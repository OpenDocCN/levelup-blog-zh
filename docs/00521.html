<html>
<head>
<title>Let’s write an API in Golang — 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">让我们用Golang-1编写一个API</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/lets-write-an-api-in-golang-1-7d8a9e69aca1?source=collection_archive---------4-----------------------#2019-04-07">https://levelup.gitconnected.com/lets-write-an-api-in-golang-1-7d8a9e69aca1?source=collection_archive---------4-----------------------#2019-04-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/2c07dcada758295d072ebf79fe11fe94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C_kaX4vSnGGMp2iEO64_ZA.jpeg"/></div></div></figure><div class=""/><p id="6f14" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在开始我的新职位@BuzzBird后，我的任务是编写一个服务，将我们选择的CRM连接起来，并将其转换为我们可以用来识别客户的内部实体。<br/>在这个过程中，我学到了很多关于如何在Go中编写API的知识，这篇文章应该会给你一个小小的介绍。会有更多这样的文章，我们将继续这个API，所以我们最终会有一个您可以使用的项目。</p><h2 id="eb3f" class="kw kx jb bd ky kz la dn lb lc ld dp le kj lf lg lh kn li lj lk kr ll lm ln lo bi translated">放弃</h2><p id="b791" class="pw-post-body-paragraph jy jz jb ka b kb lp kd ke kf lq kh ki kj lr kl km kn ls kp kq kr lt kt ku kv ij bi translated">为了简单起见，我假设你至少已经完成了围棋的<em class="lu">之旅</em>，你可以在这里找到<a class="ae lv" href="https://tour.golang.org/welcome/1" rel="noopener ugc nofollow" target="_blank"/>。这是一个很好的教程，会给你一个坚实的基础。由于我是新手，我很想听听你的反馈。如果你对你看到的任何东西有强烈的感觉或有建议，请让我知道，我总是渴望学习！</p><h2 id="cb0c" class="kw kx jb bd ky kz la dn lb lc ld dp le kj lf lg lh kn li lj lk kr ll lm ln lo bi translated">极简设置</h2><p id="6696" class="pw-post-body-paragraph jy jz jb ka b kb lp kd ke kf lq kh ki kj lr kl km kn ls kp kq kr lt kt ku kv ij bi translated">作为HTTP服务器的起点，我开发了一个可以测试的本地版本。它加快了开发速度，使寻找bug变得更加容易，在运行之后，我有了一种在它之上构建的自然方式，在添加新功能的同时测试它们。</p><h2 id="c726" class="kw kx jb bd ky kz la dn lb lc ld dp le kj lf lg lh kn li lj lk kr ll lm ln lo bi translated">文件结构</h2><p id="9c5e" class="pw-post-body-paragraph jy jz jb ka b kb lp kd ke kf lq kh ki kj lr kl km kn ls kp kq kr lt kt ku kv ij bi translated">因为在这个话题上有很多不同的观点，你可以就这个话题写一整篇博客文章。我想在这里给你的是一个你可以开始使用的结构，它应该工作得很好。<br/>如果你对这个话题感兴趣，这是一个很好的起点:<a class="ae lv" href="https://www.youtube.com/watch?v=oL6JBUk6tj0" rel="noopener ugc nofollow" target="_blank">Kat Zien的谈话</a>。</p><figure class="lx ly lz ma gt is gh gi paragraph-image"><div class="gh gi lw"><img src="../Images/55e8c421a93d0bf2726282e147fbaf75.png" data-original-src="https://miro.medium.com/v2/resize:fit:362/format:webp/0*HUthVFk5uexvp9b7.png"/></div></figure><p id="283b" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">对于根目录，我们应该有两个不同的子目录:<code class="fe mb mc md me b">cmd</code>包含用于执行web服务器的主文件，而<code class="fe mb mc md me b">internal</code>包含处理程序和任何相关的数据。<br/>如果你打算让任何其他Go服务与它交互，那么还需要一个<code class="fe mb mc md me b">pkg</code>文件夹，我们将使用它来定义我们的包的类型和功能。</p><h2 id="56b0" class="kw kx jb bd ky kz la dn lb lc ld dp le kj lf lg lh kn li lj lk kr ll lm ln lo bi translated">设置服务器</h2><p id="a404" class="pw-post-body-paragraph jy jz jb ka b kb lp kd ke kf lq kh ki kj lr kl km kn ls kp kq kr lt kt ku kv ij bi translated">在基本设置之后，我们的main.go文件应该是这样的:</p><figure class="lx ly lz ma gt is"><div class="bz fp l di"><div class="mf mg l"/></div></figure><p id="a8cc" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如您所见，我们所做的只是初始化路由器和记录器，我们将使用它们来调试我们的应用程序，这将对我们有很大帮助。最后，我们告诉路由器接受端口8080上的请求。到目前为止一切顺利！不幸的是，如果我们现在运行它，我们得到的只是一个错误。</p><p id="df54" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们还没有做的是设置我们的路由器和它将接受请求的路由！所以让我们继续前进，就这样做吧！</p><figure class="lx ly lz ma gt is"><div class="bz fp l di"><div class="mf mg l"/></div></figure><h2 id="8e60" class="kw kx jb bd ky kz la dn lb lc ld dp le kj lf lg lh kn li lj lk kr ll lm ln lo bi translated">结构</h2><p id="7a11" class="pw-post-body-paragraph jy jz jb ka b kb lp kd ke kf lq kh ki kj lr kl km kn ls kp kq kr lt kt ku kv ij bi translated">因为这里发生了很多事情，所以让我们打开它！在最初的导入语句之后，我们正在定义包含所有处理程序方法的结构。</p><p id="524f" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我之所以使用这种结构，是因为它使组织方法本身变得容易，并且它为我提供了一个中心点来授予对共享资源的访问权限——就像您在本例中看到的DB access或logger！NewRouter函数使用Chi包创建handlerShared结构和路由器的实例。</p><p id="a25e" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">它还负责添加我们想要的路由，并将它们与各自的处理程序相结合。</p><h2 id="adfa" class="kw kx jb bd ky kz la dn lb lc ld dp le kj lf lg lh kn li lj lk kr ll lm ln lo bi translated">经理人</h2><p id="f10d" class="pw-post-body-paragraph jy jz jb ka b kb lp kd ke kf lq kh ki kj lr kl km kn ls kp kq kr lt kt ku kv ij bi translated">与JavaScript和Python之类的语言相比，在Go中编写一个简单的响应都不是小事，因为它不理解JSON。</p><p id="a028" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们将使用编组将数据编码成字节格式，然后我们可以在HTTP响应中使用它。你可以在这篇<a class="ae lv" href="http://localhost:8000/Writing%20REST%20APIs%20in%20Golang/" rel="noopener ugc nofollow" target="_blank">博客文章</a>中读到更多关于这个话题的内容。</p><p id="8ced" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">一旦我们深入这个项目，我们将引入帮助器，使我们发送响应和错误更加方便。</p><h2 id="25f0" class="kw kx jb bd ky kz la dn lb lc ld dp le kj lf lg lh kn li lj lk kr ll lm ln lo bi translated">少了什么</h2><p id="8bc2" class="pw-post-body-paragraph jy jz jb ka b kb lp kd ke kf lq kh ki kj lr kl km kn ls kp kq kr lt kt ku kv ij bi translated">要获得一个全功能的REST API，还有很多方法。我们需要用户可以与之交互的实际资源，以及用户与之交互的方式！此外，我们应该简化处理HTTP请求的方式，并添加一个助手函数来发送我们的响应。所有这些和更多的你可以在这篇文章的下一部分找到，我将在04/14发布，所以请继续关注！</p><p id="a7c9" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">作者<strong class="ka jc">南多·泰森</strong>一位软件工程师&amp;目前在<a class="ae lv" href="https://www.buzzbird.de/" rel="noopener ugc nofollow" target="_blank"> BuzzBird </a>工作的德国电竞迷。要了解更多信息，请在Twitter上关注我，或在LinkedIn上找到我，并将我添加到您的联系人中！</p></div><div class="ab cl mh mi hu mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ij ik il im in"><p id="8a6e" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="lu">最初发布于</em><a class="ae lv" href="https://www.blog.nando.codes/Writing%20REST%20APIs%20in%20Golang/" rel="noopener ugc nofollow" target="_blank"><em class="lu">www . blog . nando . codes</em></a><em class="lu">。</em></p></div><div class="ab cl mh mi hu mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ij ik il im in"><div class="lx ly lz ma gt mo"><a href="https://gitconnected.com/learn/golang" rel="noopener  ugc nofollow" target="_blank"><div class="mp ab fo"><div class="mq ab mr cl cj ms"><h2 class="bd jc gy z fp mt fr fs mu fu fw ja bi translated">学习围棋-最佳围棋教程(2019) | gitconnected</h2><div class="mv l"><h3 class="bd b gy z fp mt fr fs mu fu fw dk translated">22大围棋教程-免费学习围棋。课程由开发者提交和投票，使您能够找到…</h3></div><div class="mw l"><p class="bd b dl z fp mt fr fs mu fu fw dk translated">gitconnected.com</p></div></div><div class="mx l"><div class="my l mz na nb mx nc ix mo"/></div></div></a></div></div></div>    
</body>
</html>