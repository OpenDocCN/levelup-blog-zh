<html>
<head>
<title>JavaScript Arrays: 5 Useful Recipes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript数组:5个有用的食谱</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/javascript-arrays-5-useful-recipes-3551a7d32c3?source=collection_archive---------17-----------------------#2020-05-26">https://levelup.gitconnected.com/javascript-arrays-5-useful-recipes-3551a7d32c3?source=collection_archive---------17-----------------------#2020-05-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/1f53e441897c12e2e0838fe414b01356.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*boI8UnSVtNmd_zC4S5iq9w.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">照片由<a class="ae kc" href="https://www.pexels.com/photo/cast-iron-skillet-on-table-with-species-1435909/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> Pexels </a>的<a class="ae kc" href="https://www.pexels.com/@enginakyurt?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> Engin Akyrut </a>拍摄</figcaption></figure><p id="e794" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">JavaScript是一种非常强大和通用的语言。随着它在ES5、ES2015以及更高版本中的成熟，它已经从局限于web的脚本语言发展成为大型应用程序的主干——为能够高效快速地处理成千上万个HTTP请求的web服务器提供动力。</p><p id="3e18" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">无论您是使用Node、Angular、React、Vue还是普通的JS，您都会经常遇到需要处理数据集的问题。</p><p id="4329" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这本迷你食谱给了你五个有用的食谱，你可以在遇到涉及数组的问题时应用，所有这些都不需要使用第三方库。</p><h2 id="84b2" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">1.计算总数</h2><p id="b7b7" class="pw-post-body-paragraph kd ke iq kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated"><strong class="kf ir">关键成分:</strong>减少</p><p id="aa1d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以使用reduce方法对数组的每个元素执行一个函数(reducer ),并返回一个输出。使用这种技术，我们可以对数值求和。</p><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lz"><img src="../Images/6afb2dd98b754f06a5614b85c319cf1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*18YAAcabM5w37iiElFh0TA.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">多好的中场，多划算的交易</figcaption></figure><p id="7216" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第8行的缩减器<code class="fe me mf mg mh b">(a, b) =&gt; a + b.price</code>获取累加值<code class="fe me mf mg mh b">a</code>，并将其添加到当前迭代值的<code class="fe me mf mg mh b">price</code>属性中。<code class="fe me mf mg mh b">0</code>是初始化值，即<code class="fe me mf mg mh b">a</code>的第一个值。</p><h2 id="b26b" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">2.组合两个或多个数组</h2><p id="6b42" class="pw-post-body-paragraph kd ke iq kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated"><strong class="kf ir">关键成分:</strong> concat</p><p id="ebbe" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以使用concat函数来组合两个或多个数组。</p><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lz"><img src="../Images/c5cbd14f47bcb14a577092b83880cd4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XfypmTPXc3Yt0adl_mOB_A.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">相当多的收藏…</figcaption></figure><p id="44a8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">替代配料</strong>:涂抹操作员</p><p id="628d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以使用spread操作符从两个或更多的数组中创建一个新的数组，方法与concat类似。但是请注意，spread运算符和concat确实不同，尤其是在处理非数组对象时。还应该考虑性能——使用spread运算符会比concat 慢很多。</p><p id="ad53" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">将上面示例中的第13行替换为下面的内容，以查看实际的扩展操作</p><p id="bf78" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">const menagerie = [...suitablePets, ...unsuitablePets];</code></p><h2 id="2690" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">3.变换数组的元素</h2><p id="3d40" class="pw-post-body-paragraph kd ke iq kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated"><strong class="kf ir">关键成分</strong>:地图</p><p id="918a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以使用map方法对数组的每个元素执行一个函数，并返回该函数输出的数组。</p><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mi"><img src="../Images/45c4933551100baf1b3cc56c48cba9cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2QKy1aTTios0sIuU-gZ21w.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">使用地图折扣一些游戏(我喜欢的)</figcaption></figure><p id="a9d3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第8行传递给<code class="fe me mf mg mh b">map</code>的函数获取当前迭代的值<code class="fe me mf mg mh b">g</code>，并基于<code class="fe me mf mg mh b">discountRate</code>常量返回一个新对象。结果是新对象的数组。</p><h2 id="b5d5" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">4.连接两个数组中的数据</h2><p id="ac8e" class="pw-post-body-paragraph kd ke iq kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated"><strong class="kf ir">关键成分</strong>:贴图和缩小</p><p id="a41f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以结合map和reduce方法来实现类似于SQL连接的功能。</p><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lz"><img src="../Images/f6e827a026667e7f1cbc7a13567cefdb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0os-oMf6Ma5D6NZTAyPCMQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">如果你不知道谁在哪艘船上，你就不能去，不管是大胆地去还是不去</figcaption></figure><p id="0927" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这个配方中，map和reduce被组合起来模拟一个SQL连接。在第16行，我们调用了<code class="fe me mf mg mh b">crew</code>数组上的<code class="fe me mf mg mh b">map</code>方法。如配方三所示，map允许对数组的每个元素应用一个函数，并返回一个新的数组。</p><p id="08ac" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这里实现的函数，在第16到20行，获取当前迭代的值并返回<code class="fe me mf mg mh b">Object.assign</code>方法的结果。像这样使用赋值可以合并属性。</p><p id="841c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在第20行使用<code class="fe me mf mg mh b">reduce</code>。配方一展示了如何使用reduce从数组中返回单个值。这里我们使用该功能来填充返回对象的属性。缩减器遍历<code class="fe me mf mg mh b">ships</code>数组中的每个元素，并返回构成<em class="mj">累加器</em>(本例中为<code class="fe me mf mg mh b">a</code>)的对象。当crew元素的<code class="fe me mf mg mh b">shipId</code>属性和ship元素的<code class="fe me mf mg mh b">id</code>属性匹配时，返回完整的匹配对象。</p><h2 id="feed" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">5.分组数据</h2><p id="3c35" class="pw-post-body-paragraph kd ke iq kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated"><strong class="kf ir">关键成分</strong>:还原</p><p id="b192" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以使用reduce方法根据对象的一个属性值对相同类型的对象进行分组。</p><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lz"><img src="../Images/53d52ce5554314e058854b5425beb505.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EfrQ0JehQbtev34jEZRvVQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">给毛茸茸的朋友分组</figcaption></figure><p id="4de9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了将数组的元素选择到不同的分组中，可以利用reduce函数。</p><p id="be62" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们来分解减速器的功能:</p><p id="a4d0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第10行:<code class="fe me mf mg mh b">acc[val.type] = acc[val.type] || [];</code></p><p id="1870" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这一行确保从reducer返回的对象有一个键，该键带有当前迭代的值<code class="fe me mf mg mh b">type</code>。如果存在，则保持当前值。如果不存在，则创建一个并用空数组初始化。</p><p id="5e82" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第11行:<code class="fe me mf mg mh b">acc[val.type].push(val);</code></p><p id="a362" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这一行将当前值推入刚刚初始化的数组。</p><p id="fb66" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第12行:<code class="fe me mf mg mh b">return acc;</code></p><p id="a0c8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">返回具有新值的累加器。</p><p id="2359" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在第15行，通过调用animals数组上的<code class="fe me mf mg mh b">reduce</code>创建了一个新数组。减压器用空物体初始化。</p></div></div>    
</body>
</html>