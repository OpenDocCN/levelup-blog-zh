<html>
<head>
<title>Build a Simple Rest API with Deno and Express</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Deno和Express构建一个简单的Rest API</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/build-a-simple-rest-api-with-deno-and-express-b0b62e52c230?source=collection_archive---------4-----------------------#2020-05-23">https://levelup.gitconnected.com/build-a-simple-rest-api-with-deno-and-express-b0b62e52c230?source=collection_archive---------4-----------------------#2020-05-23</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/055669bd3d749dfe18019b6a03db2834.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KVLXjan00uaiegtWx4zqFQ.jpeg"/></div></div></figure><p id="33dc" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">Deno是一个简单、现代、安全的JavaScript和TypeScript运行时，它使用V8并内置于Rust中。</p><h2 id="a7c1" class="kz la it bd lb lc ld dn le lf lg dp lh km li lj lk kq ll lm ln ku lo lp lq lr bi translated">Deno的特点</h2><ol class=""><li id="cf19" class="ls lt it kd b ke lu ki lv km lw kq lx ku ly ky lz ma mb mc bi translated">默认安全。除非明确启用，否则没有文件、网络或环境访问权限。</li><li id="09a8" class="ls lt it kd b ke md ki me km mf kq mg ku mh ky lz ma mb mc bi translated">支持现成的TypeScript。</li><li id="0a6b" class="ls lt it kd b ke md ki me km mf kq mg ku mh ky lz ma mb mc bi translated">仅提供一个可执行文件。</li><li id="0bd4" class="ls lt it kd b ke md ki me km mf kq mg ku mh ky lz ma mb mc bi translated">有内置的工具，如依赖检查器(deno info)和代码格式化程序(deno fmt)。</li><li id="3ca8" class="ls lt it kd b ke md ki me km mf kq mg ku mh ky lz ma mb mc bi translated">拥有一套经过审查(审计)的标准模块，保证能够与Deno:<a class="ae mi" href="https://deno.land/std" rel="noopener ugc nofollow" target="_blank">deno.land/std</a></li></ol><p id="28a6" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">Deno不使用NPM或节点模块来管理程序包。相反，我们使用浏览器兼容的URL链接第三方包。</p><h1 id="4925" class="mj la it bd lb mk ml mm le mn mo mp lh mq mr ms lk mt mu mv ln mw mx my lq mz bi translated"><strong class="ak">安装Deno </strong></h1><p id="640c" class="pw-post-body-paragraph kb kc it kd b ke lu kg kh ki lv kk kl km na ko kp kq nb ks kt ku nc kw kx ky im bi translated"><strong class="kd iu">如果您使用的是基于Mac或Linux的系统。打开您的终端，复制/粘贴以下命令来安装Deno。</strong></p><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="cc54" class="kz la it ni b gy nm nn l no np">curl -fsSL https://deno.land/x/install/install.sh | sh</span></pre><p id="7c81" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu">如果您使用的是Windows操作系统，只需打开power shell并运行该命令。</strong></p><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="207a" class="kz la it ni b gy nm nn l no np">iwr <a class="ae mi" href="https://deno.land/x/install/install.ps1" rel="noopener ugc nofollow" target="_blank">https://deno.land/x/install/install.ps1</a> -useb | iex</span></pre><p id="0c66" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu">安装后，您可以通过运行以下命令来验证安装。</strong></p><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="7337" class="kz la it ni b gy nm nn l no np"><em class="nq">deno --version</em></span></pre><p id="8864" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">让我们运行我们的hello world程序，一个来自Deno的官方示例。复制下面显示的命令，并在您的终端中运行它。</p><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="0fbf" class="kz la it ni b gy nm nn l no np">deno run <a class="ae mi" href="https://deno.land/std/examples/welcome.ts" rel="noopener ugc nofollow" target="_blank">https://deno.land/std/examples/welcome.ts</a></span></pre><h2 id="5984" class="kz la it bd lb lc ld dn le lf lg dp lh km li lj lk kq ll lm ln ku lo lp lq lr bi translated">您应该会看到以下响应。</h2><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="6e0f" class="kz la it ni b gy nm nn l no np">Welcome to Deno 🦕</span></pre><p id="5db6" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">为了帮助您进一步探索Deno，我推荐您阅读本文<a class="ae mi" href="https://www.freecodecamp.org/news/the-deno-handbook/" rel="noopener ugc nofollow" target="_blank"><strong class="kd iu">《Deno手册:一个带代码示例的TypeScript运行时教程</strong> </a></p><p id="ad18" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu">权限标志列表</strong></p><p id="aee4" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">由于deno在默认情况下是安全，所以它没有启用任何权限。运行文件时，这些标志对于权限非常有用。</p><ul class=""><li id="2d4e" class="ls lt it kd b ke kf ki kj km nr kq ns ku nt ky nu ma mb mc bi translated"><code class="fe nv nw nx ni b"><strong class="kd iu">--allow-env:</strong></code> <strong class="kd iu"> </strong>允许环境访问。</li><li id="bdae" class="ls lt it kd b ke md ki me km mf kq mg ku mh ky nu ma mb mc bi translated"><code class="fe nv nw nx ni b"><strong class="kd iu">--allow-hrtime:</strong></code> <strong class="kd iu"> </strong>允许高分辨率时间测量。</li><li id="7475" class="ls lt it kd b ke md ki me km mf kq mg ku mh ky nu ma mb mc bi translated"><code class="fe nv nw nx ni b"><strong class="kd iu">--allow-net:</strong></code> <strong class="kd iu"> </strong>允许网络访问。</li><li id="797f" class="ls lt it kd b ke md ki me km mf kq mg ku mh ky nu ma mb mc bi translated"><code class="fe nv nw nx ni b"><strong class="kd iu">--allow-plugin:</strong></code> <strong class="kd iu"> </strong>允许加载插件。</li><li id="f45a" class="ls lt it kd b ke md ki me km mf kq mg ku mh ky nu ma mb mc bi translated"><code class="fe nv nw nx ni b"><strong class="kd iu">--allow-read:</strong></code> <strong class="kd iu"> </strong>允许文件系统读访问。</li><li id="426f" class="ls lt it kd b ke md ki me km mf kq mg ku mh ky nu ma mb mc bi translated"><code class="fe nv nw nx ni b"><strong class="kd iu">--allow-run:</strong></code> <strong class="kd iu"> </strong>允许运行子流程。</li><li id="bfc8" class="ls lt it kd b ke md ki me km mf kq mg ku mh ky nu ma mb mc bi translated"><code class="fe nv nw nx ni b"><strong class="kd iu">--allow-write:</strong></code> <strong class="kd iu"> </strong>允许文件系统写访问。</li><li id="ce62" class="ls lt it kd b ke md ki me km mf kq mg ku mh ky nu ma mb mc bi translated"><code class="fe nv nw nx ni b"><strong class="kd iu">--allow-all:</strong></code> <strong class="kd iu"> : </strong>给予全部访问权限。</li></ul><p id="4276" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">耶！我们可以结束对Deno的简要介绍，然后转移到本文的重点。我希望你能享受❤❤❤之旅</p></div><div class="ab cl ny nz hx oa" role="separator"><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od"/></div><div class="im in io ip iq"><p id="a5ac" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们开始吧</p><p id="4a53" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们将创建一个简单的REST API来执行CRUD操作。端点将通过Postman应用程序进行测试。你可以从<a class="ae mi" href="https://www.postman.com/downloads/" rel="noopener ugc nofollow" target="_blank">这里</a>下载《邮差》。这个API将使用本文标题中提到的<strong class="kd iu"> <em class="nq"> Typescript和Express framework </em> </strong>来开发。</p><blockquote class="of og oh"><p id="cf74" class="kb kc nq kd b ke kf kg kh ki kj kk kl oi kn ko kp oj kr ks kt ok kv kw kx ky im bi translated">让我们看看我们的程序结构</p></blockquote><figure class="nd ne nf ng gt ju gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/3e183cbf953d855e4b954f0c5638c96f.png" data-original-src="https://miro.medium.com/v2/resize:fit:346/format:webp/1*7A0GkZO6wfb4ohLaDj-PHA.png"/></div></figure><ul class=""><li id="aaae" class="ls lt it kd b ke kf ki kj km nr kq ns ku nt ky nu ma mb mc bi translated"><strong class="kd iu">控制器:</strong>拥有应用程序的逻辑，并处理客户端请求。</li><li id="a065" class="ls lt it kd b ke md ki me km mf kq mg ku mh ky nu ma mb mc bi translated"><strong class="kd iu"> Server.ts: </strong>运行本地主机服务器的代码。</li><li id="e5ba" class="ls lt it kd b ke md ki me km mf kq mg ku mh ky nu ma mb mc bi translated"><strong class="kd iu"> Types.ts: </strong>包含模型定义。</li></ul><blockquote class="of og oh"><p id="7469" class="kb kc nq kd b ke kf kg kh ki kj kk kl oi kn ko kp oj kr ks kt ok kv kw kx ky im bi translated">让我们设置本地主机服务器</p></blockquote><p id="2498" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">创建<code class="fe nv nw nx ni b">server.ts</code>文件并从<code class="fe nv nw nx ni b"><a class="ae mi" href="https://raw.githubusercontent.com/NMathar/deno-express/master/mod.ts" rel="noopener ugc nofollow" target="_blank">http</a>://raw.guthubusercontent.com/NMather/deno-express/master/mod.ts</code>导入<code class="fe nv nw nx ni b">* as expressive</code></p><figure class="nd ne nf ng gt ju"><div class="bz fp l di"><div class="om on l"/></div></figure><blockquote class="of og oh"><p id="591b" class="kb kc nq kd b ke kf kg kh ki kj kk kl oi kn ko kp oj kr ks kt ok kv kw kx ky im bi translated">中间件</p></blockquote><ul class=""><li id="8615" class="ls lt it kd b ke kf ki kj km nr kq ns ku nt ky nu ma mb mc bi translated">simpleLog():这个方法用于记录请求和响应的状态。</li><li id="03b5" class="ls lt it kd b ke md ki me km mf kq mg ku mh ky nu ma mb mc bi translated">json():返回只解析<code class="fe nv nw nx ni b">json</code>的中间件，只查看<code class="fe nv nw nx ni b">Content-Type</code>头与<code class="fe nv nw nx ni b">type</code>选项匹配的请求</li></ul><blockquote class="of og oh"><p id="d4ae" class="kb kc nq kd b ke kf kg kh ki kj kk kl oi kn ko kp oj kr ks kt ok kv kw kx ky im bi translated">让我们升级我们的模型</p></blockquote><p id="6ea7" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><code class="fe nv nw nx ni b">types.ts</code>将持有产品的界面。</p><figure class="nd ne nf ng gt ju"><div class="bz fp l di"><div class="om on l"/></div></figure><blockquote class="of og oh"><p id="bb2f" class="kb kc nq kd b ke kf kg kh ki kj kk kl oi kn ko kp oj kr ks kt ok kv kw kx ky im bi translated">创造我们的产品</p></blockquote><p id="94c7" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们会创造一系列产品</p><figure class="nd ne nf ng gt ju"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="9747" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在，让我们在<code class="fe nv nw nx ni b">product.ts</code>文件中创建不同的方法</p><p id="7060" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">getProducts: 它将返回列表中的所有产品。如上所述。在<code class="fe nv nw nx ni b">/api/products</code>上发出GET请求</p><figure class="nd ne nf ng gt ju"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="2cb2" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu"> getProduct: </strong>如果找不到产品，将根据Id和错误返回单个产品。在<code class="fe nv nw nx ni b">/api/products/:id</code>上发出GET请求</p><figure class="nd ne nf ng gt ju"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="2fb5" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu">添加产品:</strong>将产品添加到列表中。在<code class="fe nv nw nx ni b">/api/products.</code>上发出POST请求</p><figure class="nd ne nf ng gt ju"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="7c14" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu">更新产品:</strong>会更新产品。在<code class="fe nv nw nx ni b">/api/products/:id.</code>上发出上传请求</p><figure class="nd ne nf ng gt ju"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="0fab" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu">删除产品:</strong>这将从列表中删除产品。在<code class="fe nv nw nx ni b">/api/product/:id</code>进行删除</p><figure class="nd ne nf ng gt ju"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="ed02" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">创建完这些函数后，我们需要将其导入到<code class="fe nv nw nx ni b">server.ts</code>中。通过导出这些函数来完成<code class="fe nv nw nx ni b">product.ts</code>。</p><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="dbf8" class="kz la it ni b gy nm nn l no np"><em class="nq">export</em> { getProducts, getProduct, addProduct, updateProduct, deleteProduct };</span></pre><p id="d166" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这是完整的<code class="fe nv nw nx ni b">Product.ts</code>文件</p><figure class="nd ne nf ng gt ju"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="738c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在，回到我们的<code class="fe nv nw nx ni b">server.ts</code>文件，从控制器导入<code class="fe nv nw nx ni b">products.ts</code>文件，并创建一个应用程序来监听端口。最终版的<code class="fe nv nw nx ni b">server.ts</code>会是这个样子。</p><figure class="nd ne nf ng gt ju"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="4bfc" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">为了运行我们的server.ts文件，我们将运行deno命令</p><pre class="nd ne nf ng gt nh ni nj nk aw nl bi"><span id="b3f3" class="kz la it ni b gy nm nn l no np">deno run --allow-net --allow-read server.ts</span></pre><p id="867b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">结论</p><p id="c70c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">万岁！！我们已经到了本教程的结尾。我希望到目前为止你已经学到了一些东西，现在可以用Deno和Express创建一个REST API。你还可以探索更多关于<a class="ae mi" href="https://deno.land/manual" rel="noopener ugc nofollow" target="_blank">德诺</a>的信息。</p><p id="1dc2" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在<a class="ae mi" href="https://github.com/temmyjay001/Deno-Medium" rel="noopener ugc nofollow" target="_blank"> Github </a>上找到完整的源代码</p></div><div class="ab cl ny nz hx oa" role="separator"><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od"/></div><div class="im in io ip iq"><p id="634b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">你运行代码有困难吗？如果是的话，请在下面留下评论。如果你能通过给朋友发电子邮件或在推特或脸书上分享来帮助它的传播，我会非常感激。 <strong class="kd iu"> <em class="nq">谢谢！</em>T15】</strong></p><p id="c461" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><em class="nq">随意连接</em> <strong class="kd iu"> <em class="nq"> </em> </strong> <em class="nq">上:</em><strong class="kd iu"><em class="nq"/></strong><a class="ae mi" href="https://github.com/temmyjay001" rel="noopener ugc nofollow" target="_blank">Github</a><strong class="kd iu"><em class="nq">，</em></strong><a class="ae mi" href="https://twitter.com/uncu001" rel="noopener ugc nofollow" target="_blank"><strong class="kd iu"><em class="nq">Twitter</em></strong></a><strong class="kd iu"><em class="nq">，</em></strong><a class="ae mi" href="https://www.linkedin.com/in/ajayi-solomon-temmyjay001/" rel="noopener ugc nofollow" target="_blank"><strong class="kd iu"><em class="nq">LinkedIn</em></strong></a></p><p id="dc28" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu">受</strong>启发:<a class="oo op ep" href="https://medium.com/u/fa661a1f194c?source=post_page-----b0b62e52c230--------------------------------" rel="noopener" target="_blank">普什卡·塔库尔</a></p></div></div>    
</body>
</html>