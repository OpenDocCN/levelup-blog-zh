<html>
<head>
<title>Two Power Commands for Unix Ninjas</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Unix忍者的两个电源命令</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/two-overlooked-commands-for-unix-ninjas-55b8bfc4dc84?source=collection_archive---------3-----------------------#2020-07-01">https://levelup.gitconnected.com/two-overlooked-commands-for-unix-ninjas-55b8bfc4dc84?source=collection_archive---------3-----------------------#2020-07-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="54e1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">使用这些被忽略的工具提升您的Unix水平</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/c979fe9e0ebfd400cefcf4f7e7519179.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DjxPGzoosJxTKYa12Q1g6g.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">星球大战截图来自<code class="fe le lf lg lh b">blinkenlights.nl Telnet session</code></figcaption></figure><p id="a130" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在这篇文章中，我将解释两个非常有用但经常被忽视的强大的Unix命令。</p><h1 id="241a" class="li lj it bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">netcat</h1><p id="d299" class="pw-post-body-paragraph jq jr it js b jt mg jv jw jx mh jz ka kb mi kd ke kf mj kh ki kj mk kl km kn im bi translated">netcat或<code class="fe le lf lg lh b">nc</code>是一个多功能的网络瑞士军刀。一种思考方式是通过UDP或TCP建立客户机-服务器连接，在主机之间发送任意数据。</p><p id="51fa" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">例如，我们可以创建简单的“聊天”会话，如下所示:</p><pre class="kp kq kr ks gt ml lh mm mn aw mo bi"><span id="1e29" class="mp lj it lh b gy mq mr l ms mt">nc -l 1234</span></pre><p id="8623" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这告诉<code class="fe le lf lg lh b">nc</code>使用端口<code class="fe le lf lg lh b">1234</code>作为本地机器上的服务器来“监听”<code class="fe le lf lg lh b">-l</code>。</p><p id="2425" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">然后在单独的终端中:</p><pre class="kp kq kr ks gt ml lh mm mn aw mo bi"><span id="2774" class="mp lj it lh b gy mq mr l ms mt">nc localhost 1234</span></pre><p id="0a0e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这告诉<code class="fe le lf lg lh b">nc</code>使用端口<code class="fe le lf lg lh b">1234</code>作为本地机器上的客户端进行连接。然后，客户端将等待输入，如果您键入一些内容，在每次回车之后，缓冲区将在服务器中回显:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi mu"><img src="../Images/6de1f1c69f5a88151d58a9a99ade68ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*kvHsohFMwuO4k0UrQcGGzQ.gif"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">netcat Hello World</figcaption></figure><p id="4aa7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">当然，如果服务器和客户机运行在不同的机器上，这将变得更加有用。netcat的应用包括:</p><ul class=""><li id="f7bc" class="mv mw it js b jt ju jx jy kb mx kf my kj mz kn na nb nc nd bi translated">使任何进程成为服务器</li><li id="f31e" class="mv mw it js b jt ne jx nf kb ng kf nh kj ni kn na nb nc nd bi translated">创建一次性web服务器</li><li id="cc9e" class="mv mw it js b jt ne jx nf kb ng kf nh kj ni kn na nb nc nd bi translated">端口扫描</li></ul><p id="6b2a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">关于netcat的更多信息，维基百科页面<a class="ae nj" href="https://en.wikipedia.org/wiki/Netcat" rel="noopener ugc nofollow" target="_blank">是一个很好的起点。</a></p></div><div class="ab cl nk nl hx nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="im in io ip iq"><h1 id="82b4" class="li lj it bd lk ll nr ln lo lp ns lr ls lt nt lv lw lx nu lz ma mb nv md me mf bi translated">截止日期（Deadline Date的缩写）</h1><p id="907d" class="pw-post-body-paragraph jq jr it js b jt mg jv jw jx mh jz ka kb mi kd ke kf mj kh ki kj mk kl km kn im bi translated">dd是最古老的Unix命令之一，最初是由Ken Thompson在1974年开发的。在某种意义上，它可以被认为是“netcat for files”，因此，netcat在网络连接上发送和接收，dd读取和写入文件。因为在Unix中“一切都是文件”，这使得它非常通用。</p><p id="301c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">像netcat一样，<code class="fe le lf lg lh b">dd</code>也是相当低的级别，提供对“原始”文件数据的访问。因此，最常见的应用之一是创建磁盘映像。</p><p id="f8de" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">例如，如果您在<code class="fe le lf lg lh b">/dev/dvd</code>安装了一个DVD，您可以创建一个iso映像，包含:</p><pre class="kp kq kr ks gt ml lh mm mn aw mo bi"><span id="48bb" class="mp lj it lh b gy mq mr l ms mt">umount /dev/dvd<br/>dd if=/dev/dvd of=/my/path/dvd.iso bs=<!-- -->65536</span></pre><p id="52a4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这可能看起来有点令人不知所措，但是<code class="fe le lf lg lh b">dd</code>的论点是记忆术，并且容易记住:</p><ul class=""><li id="ba47" class="mv mw it js b jt ju jx jy kb mx kf my kj mz kn na nb nc nd bi translated"><code class="fe le lf lg lh b">if</code> =输入文件</li><li id="64a9" class="mv mw it js b jt ne jx nf kb ng kf nh kj ni kn na nb nc nd bi translated"><code class="fe le lf lg lh b">of</code> =输出文件</li><li id="425e" class="mv mw it js b jt ne jx nf kb ng kf nh kj ni kn na nb nc nd bi translated"><code class="fe le lf lg lh b">bs</code> =以字节为单位的块大小</li></ul><p id="8a15" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">块大小是可选的，但是将其设置为高于默认值可以大大加快传输速度。</p><p id="71fb" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe le lf lg lh b">dd</code>的应用包括:</p><ul class=""><li id="a00b" class="mv mw it js b jt ju jx jy kb mx kf my kj mz kn na nb nc nd bi translated">创建一个任意大小的测试文件，用随机数据填充</li><li id="3f6d" class="mv mw it js b jt ne jx nf kb ng kf nh kj ni kn na nb nc nd bi translated">文件的就地直接修改</li><li id="f05b" class="mv mw it js b jt ne jx nf kb ng kf nh kj ni kn na nb nc nd bi translated">数据恢复</li></ul><p id="44a1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">高级用法见<a class="ae nj" href="https://en.wikipedia.org/wiki/Dd_(Unix)" rel="noopener ugc nofollow" target="_blank">此处</a>。</p></div><div class="ab cl nk nl hx nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="im in io ip iq"><h1 id="287d" class="li lj it bd lk ll nr ln lo lp ns lr ls lt nt lv lw lx nu lz ma mb nv md me mf bi translated">结合Netcat和dd</h1><p id="283b" class="pw-post-body-paragraph jq jr it js b jt mg jv jw jx mh jz ka kb mi kd ke kf mj kh ki kj mk kl km kn im bi translated">原来我们可以<em class="nw">结合</em> <code class="fe le lf lg lh b">nc</code>和<code class="fe le lf lg lh b">dd</code>来测量网络文件传输速度！</p><p id="f228" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">为此，在服务器上，我们再次以“监听”模式运行netcat:</p><pre class="kp kq kr ks gt ml lh mm mn aw mo bi"><span id="079a" class="mp lj it lh b gy mq mr l ms mt">nc -l 1234</span></pre><p id="fbbf" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在客户机上，我们使用dd在连接上传输n个字节的零:</p><pre class="kp kq kr ks gt ml lh mm mn aw mo bi"><span id="0fb8" class="mp lj it lh b gy mq mr l ms mt">dd if=/dev/zero bs=1M count=1K | nc -vv 10.10.0.2 1234</span></pre><p id="5237" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这里<code class="fe le lf lg lh b">bs</code>是之前以字节为单位的块大小，<code class="fe le lf lg lh b">count</code>是发送的块数。<code class="fe le lf lg lh b">nc</code>的<code class="fe le lf lg lh b">-vv</code>参数告诉它产生详细的输出。</p><p id="c273" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">对于1000 x 1000字节，这会产生以下输出:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nx"><img src="../Images/873d87e85f57bf2c86629fcf825c0f0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*ZTDdAtgqDh8HcdCYdw9wsw.gif"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">用netcat和dd测量文件传输速度</figcaption></figure><h1 id="e5da" class="li lj it bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">奖金命令！</h1><p id="1046" class="pw-post-body-paragraph jq jr it js b jt mg jv jw jx mh jz ka kb mi kd ke kf mj kh ki kj mk kl km kn im bi translated">干得好，走了这么远。现在给你奖励！还记得我在开始时贴的星球大战ASCII图片吗？原来这是电影的截图。当然不是官方的，而是由blinkenlights的不可思议的人们制作的一个完整的ASCII版本。</p><p id="cae8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">要观看，您需要一个Telnet客户端，在macOS上，您可以通过Homebrew:</p><pre class="kp kq kr ks gt ml lh mm mn aw mo bi"><span id="2e41" class="mp lj it lh b gy mq mr l ms mt">brew install telnet</span></pre><p id="865d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">然后:</p><pre class="kp kq kr ks gt ml lh mm mn aw mo bi"><span id="ca1a" class="mp lj it lh b gy mq mr l ms mt">telnet towel.blinkenlights.nl</span></pre><p id="35f4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">不客气！</p></div></div>    
</body>
</html>