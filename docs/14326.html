<html>
<head>
<title>How to Build HttpClient In Java to Download File</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Java构建HttpClient下载文件</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-build-httpclient-in-java-to-download-file-7085c2b6a3d0?source=collection_archive---------6-----------------------#2022-11-17">https://levelup.gitconnected.com/how-to-build-httpclient-in-java-to-download-file-7085c2b6a3d0?source=collection_archive---------6-----------------------#2022-11-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="ae19" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">构建HTTP客户端下载图像和PDF等文件。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/20be472f7a4ac3c576ef36a6bdfee43b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KL50ulkU_czcKsOEwWX8ow.png"/></div></div></figure><h2 id="2ffd" class="ku kv it bd kw kx ky dn kz la lb dp lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">介绍</h2><ul class=""><li id="4d75" class="lq lr it ls b lt lu lv lw ld lx lh ly ll lz ma mb mc md me bi translated">在本文中，我们将构建一个从互联网下载文件的HTTP客户端。</li><li id="81c8" class="lq lr it ls b lt mf lv mg ld mh lh mi ll mj ma mb mc md me bi translated">我们将为此演示下载图像文件和pdf文件，但我们可以将其扩展到任何类型的文件。</li><li id="43c6" class="lq lr it ls b lt mf lv mg ld mh lh mi ll mj ma mb mc md me bi translated">仅供参考，这段代码需要Java 11，因为我们将使用Java 11中添加的HttpClient。</li></ul><h2 id="4f22" class="ku kv it bd kw kx ky dn kz la lb dp lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">构建请求对象</h2><ul class=""><li id="67f8" class="lq lr it ls b lt lu lv lw ld lx lh ly ll lz ma mb mc md me bi translated">首先，我们将构建HTTP GET请求。HttpRequest遵循构建器模式。</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mk ml l"/></div></figure><h2 id="c78f" class="ku kv it bd kw kx ky dn kz la lb dp lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">构建HttpClient对象</h2><ul class=""><li id="b9a0" class="lq lr it ls b lt lu lv lw ld lx lh ly ll lz ma mb mc md me bi translated">之后，我们将构建httpclient并执行以获得响应。由于响应由文件组成，我们需要像InputStream一样传递bodyhandlers来读取文件。</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mk ml l"/></div></figure><h2 id="91fd" class="ku kv it bd kw kx ky dn kz la lb dp lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">写入本地文件</h2><ul class=""><li id="8fbb" class="lq lr it ls b lt lu lv lw ld lx lh ly ll lz ma mb mc md me bi translated">写入本地文件很容易，我们可以使用FileOutputStream来写。这里我们将内容作为输入流。</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mk ml l"/></div></figure><h2 id="9c36" class="ku kv it bd kw kx ky dn kz la lb dp lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">下载图像客户端</h2><ul class=""><li id="d76e" class="lq lr it ls b lt lu lv lw ld lx lh ly ll lz ma mb mc md me bi translated">我们正在下载端点“https://miro . medium . com/max/864/1 * edetjtqydwavqdaimiwxww . png”</li><li id="3f4b" class="lq lr it ls b lt mf lv mg ld mh lh mi ll mj ma mb mc md me bi translated">因为我们正在下载图像，所以响应正文包含inputstream。</li><li id="715d" class="lq lr it ls b lt mf lv mg ld mh lh mi ll mj ma mb mc md me bi translated">一旦有了inputstream，我们就可以写入本地磁盘。</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mk ml l"/></div></figure><h2 id="2fae" class="ku kv it bd kw kx ky dn kz la lb dp lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">下载PDF客户端</h2><ul class=""><li id="e17b" class="lq lr it ls b lt lu lv lw ld lx lh ly ll lz ma mb mc md me bi translated">同样，我们也可以下载PDF文件，代码看起来将完全一样的图像文件。</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mk ml l"/></div></figure><h2 id="3d73" class="ku kv it bd kw kx ky dn kz la lb dp lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">结论</h2><ul class=""><li id="3fa8" class="lq lr it ls b lt lu lv lw ld lx lh ly ll lz ma mb mc md me bi translated">在本文中，我们使用Java 11 HttpClient下载图像和pdf文件。BodyHandler提供了不同的方法来处理响应体，对于文件，我们可以使用InputStream</li><li id="0508" class="lq lr it ls b lt mf lv mg ld mh lh mi ll mj ma mb mc md me bi translated">我们可以使用这种方法下载任何类型的文件。</li></ul><h2 id="1777" class="ku kv it bd kw kx ky dn kz la lb dp lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">额外小费</h2><ul class=""><li id="46b3" class="lq lr it ls b lt lu lv lw ld lx lh ly ll lz ma mb mc md me bi translated">如果你想提高你的Java技能，你绝对应该看看<a class="ae mm" href="https://click.linksynergy.com/link?id=FAaRt1BJn8w&amp;offerid=1060092.533682&amp;type=2&amp;murl=https%3A%2F%2Fwww.udemy.com%2Fcourse%2Fjava-the-complete-java-developer-course%2F" rel="noopener ugc nofollow" target="_blank"> <strong class="ls iu"> <em class="mn">这门最畅销的课程</em> </strong> </a></li></ul><blockquote class="mo mp mq"><p id="cb36" class="mr ms mn ls b lt mt ju mu lv mv jx mw mx my mz na nb nc nd ne nf ng nh ni ma im bi translated">下面连线上<a class="ae mm" href="https://www.linkedin.com/in/suraj-mishra-16b515a4" rel="noopener ugc nofollow" target="_blank"><strong class="ls iu">LinkedIn</strong></a><strong class="ls iu"><br/></strong>如果你喜欢这篇文章，请查看更多@<a class="ae mm" href="https://asyncq.com/" rel="noopener ugc nofollow" target="_blank"><strong class="ls iu">https://asyncq.com/</strong></a></p></blockquote></div></div>    
</body>
</html>