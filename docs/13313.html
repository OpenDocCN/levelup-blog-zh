<html>
<head>
<title>The essentials of data search in Elasticsearch</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">å¼¹æ€§ç ”ç©¶ä¸­æ•°æ®æ£€ç´¢çš„è¦ç‚¹</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://levelup.gitconnected.com/the-essentials-of-data-search-in-elasticsearch-ca2efee5509e?source=collection_archive---------10-----------------------#2022-08-25">https://levelup.gitconnected.com/the-essentials-of-data-search-in-elasticsearch-ca2efee5509e?source=collection_archive---------10-----------------------#2022-08-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="1cbe" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ¬¢è¿å›åˆ°æ›´å¤šå¼¹æ€§æœç´¢çŸ¥è¯†ğŸ˜ï¼ä»Šå¤©æˆ‘ä»¬å°†è°ˆè®ºæ•°æ®æœç´¢ğŸ”ç”¨Elasticsearchã€‚</p><p id="d577" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç°åœ¨æˆ‘ä»¬å¯¹æŒ‡æ•°çš„æ¦‚å¿µæœ‰äº†ä¸€ç‚¹äº†è§£ï¼Œç‰¹åˆ«æ˜¯æ„Ÿè°¢<a class="ae kl" href="https://medium.com/@mhdabdel151/handling-documents-and-indexes-on-elasticsearch-dd2690775d4f" rel="noopener">ä»¥å‰çš„æ–‡ç« </a>ï¼Œå¦‚æœä½ è¿˜æ²¡æœ‰è¿™æ ·åšï¼Œæˆ‘å»ºè®®ä½ é˜…è¯»ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Elasticsearchæ¥æœç´¢æˆ‘ä»¬çš„æ•°æ®ã€‚</p><p id="6bd3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è®©æˆ‘ä»¬é€šè¿‡åœ¨ä¸€ä¸ª<strong class="jp ir"> <em class="km">ç”¨æˆ·</em> </strong>ç´¢å¼•ä¸­åˆ›å»ºä¾‹å¦‚3ä¸ª<em class="km">ç”¨æˆ·</em>æ¥åšå‡†å¤‡ï¼Œæˆ‘ä»¬é€šè¿‡ä¸‹é¢çš„å‘½ä»¤åˆ›å»ºè¿™ä¸ªç´¢å¼•:</p><pre class="kn ko kp kq gt kr ks kt ku aw kv bi"><span id="af9f" class="kw kx iq ks b gy ky kz l la lb">PUT users <br/>{<br/>  "settings": {<br/>    "number_of_shards": 2,<br/>    "number_of_replicas": 1<br/>  },<br/>  "mappings": {<br/>    "properties": {<br/>      "name": {<br/>        "type": "text"<br/>      },<br/>      "age": {<br/>        "type": "short"<br/>      },<br/>      "gender": {<br/>        "type": "text"<br/>      },<br/>      "quote": {<br/>        "type": "text"<br/>      }<br/>    }<br/>  }<br/>}</span></pre><p id="f973" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è®©æˆ‘ä»¬ç´¢å¼•æˆ‘ä»¬çš„3ä¸ªç”¨æˆ·(ä½ å¯ä»¥æ ¹æ®ä½ çš„æƒ³è±¡è‡ªç”±å¡«å†™å­—æ®µï¼Œè¿™ä½¿æ•™ç¨‹æ›´æœ‰è¶£ğŸŠ).</p><pre class="kn ko kp kq gt kr ks kt ku aw kv bi"><span id="ba68" class="kw kx iq ks b gy ky kz l la lb">POST users/_doc/1<br/>{<br/>  "name": "Tyrion Lannister",<br/>  "age": 39,<br/>  "gender": "Male",<br/>  "quote": "Never forget what you are, the rest of the world will not. Wear it like armor and it can never be used to hurt you."<br/>}</span><span id="e4ae" class="kw kx iq ks b gy lc kz l la lb">POST users/_doc/2<br/>{<br/>  "name": "Arya Stark",<br/>  "age": 22,<br/>  "gender": "Female",<br/>  "quote": "When people ask you what happened here, tell them the North remembers. Tell them winter came for House Frey."<br/>}</span><span id="1788" class="kw kx iq ks b gy lc kz l la lb">POST users/_doc/3<br/>{<br/>  "name": "Syrio Forel",<br/>  "age": 55,<br/>  "gender": "Male",<br/>  "quote": "What do we say to the God of Death ? Not today !"<br/>}</span></pre><p id="f3c7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç°åœ¨æ•°æ®å·²ç»åŠ è½½å®Œæ¯•ï¼Œè®©æˆ‘ä»¬å¯¹ç”¨æˆ·ç´¢å¼•è¿›è¡Œç ”ç©¶ã€‚è¿™æ˜¯é€šè¿‡å®šä¹‰ä¸€ä¸ª<strong class="jp ir"> <em class="km">æŸ¥è¯¢</em> </strong>æ¥å®Œæˆçš„ã€‚æ ¹æ®Elasticsearchæ–‡æ¡£<em class="km">â€œä½ å¯ä»¥æŠŠä¸€ä¸ªæŸ¥è¯¢æƒ³æˆä¸€ä¸ªé—®é¢˜ï¼Œç”¨Elasticsearchç†è§£çš„æ–¹å¼æ¥å†™ã€‚â€</em></p><p id="3861" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">æœç´¢API </strong>æ˜¯æä¾›ç»™æˆ‘ä»¬çš„ï¼Œæˆ‘ä»¬åªéœ€å®šä¹‰æœç´¢çš„å¯¹è±¡ï¼Œä¾‹å¦‚<em class="km">åŒ¹é…</em>æ¥æœç´¢æ–‡æœ¬ä¸­çš„å•è¯ï¼Œæˆ–è€…<em class="km">èŒƒå›´</em>æ¥æœç´¢ä¸€ç³»åˆ—å€¼ã€‚ä½ å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°æ›´å¤šä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥æ‰§è¡Œä»¥ä¸‹æ“ä½œæ¥è¿”å›å¹´é¾„åœ¨<em class="km"> 20 </em>å’Œ<em class="km"> 40 </em>ä¹‹é—´çš„ç”¨æˆ·:</p><pre class="kn ko kp kq gt kr ks kt ku aw kv bi"><span id="7c73" class="kw kx iq ks b gy ky kz l la lb">GET users/_search<br/>{<br/>  "query": {<br/>    "range": {<br/>      "age": {<br/>        "gte": 20,<br/>        "lte": 40<br/>      }<br/>    }<br/>  }<br/>}</span></pre><p id="3a87" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ–è€…æˆ‘ä»¬å¯ä»¥åœ¨<em class="km">å¼•å·å­—æ®µ</em>ä¸­æŸ¥æ‰¾æ„Ÿå…´è¶£çš„ç‰¹å®šå•è¯ã€‚ä¸ºä»€ä¹ˆä¸æ˜¯â€œ<em class="km">å†¬å¤©â€ï¼Œ</em>æ˜¾ç„¶å®ƒè¦æ¥äº†ğŸ˜‰ã€‚</p><pre class="kn ko kp kq gt kr ks kt ku aw kv bi"><span id="260d" class="kw kx iq ks b gy ky kz l la lb">GET users/_search<br/>{<br/>  "query": {<br/>    "match": {<br/>      "quote": "winter"<br/>    }<br/>  }<br/>}</span></pre><p id="327a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç»“æœä¼šç«‹å³è¿”å›ç»™æˆ‘ä»¬ã€‚</p><pre class="kn ko kp kq gt kr ks kt ku aw kv bi"><span id="fd2f" class="kw kx iq ks b gy ky kz l la lb">{<br/>  "took": 15,<br/>  "timed_out": false,<br/>  "_shards": {<br/>    "total": 1,<br/>    "successful": 1,<br/>    "skipped": 0,<br/>    "failed": 0<br/>  },<br/>  "hits": {<br/>    "total": {<br/>      "value": 1,<br/>      "relation": "eq"<br/>    },<br/>    "max_score": 0.96645224,<br/>    "hits": [<br/>      {<br/>        "_index": "users",<br/>        "_id": "2",<br/>        "_score": 0.96645224,<br/>        "_source": {<br/>          "name": "Arya Stark",<br/>          "age": 22,<br/>          "gender": "Female",<br/>          "quote": "When people ask you what happened here, tell them the North remembers. Tell them winter came for House Frey."<br/>        }<br/>      }<br/>    ]<br/>  }<br/>}</span></pre><p id="d4d6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘ä»¬å¯ä»¥é—®è‡ªå·±çš„é—®é¢˜æ˜¯<em class="km">ä¸ºä»€ä¹ˆåœ¨Elasticsearchä¸­æœç´¢è¿™ä¹ˆå¿«ï¼Ÿ</em>å—¯ï¼Œåœ¨æ’å…¥æ—¶ï¼ŒElasticsearchå°†æ‰€æœ‰æ–‡æœ¬é€šè¿‡ä¸€ä¸ª<strong class="jp ir">åˆ†æå™¨</strong>ï¼Œå®ƒå¯ä»¥å»ºæ¨¡å¦‚ä¸‹:</p><figure class="kn ko kp kq gt le gh gi paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="gh gi ld"><img src="../Images/4e6d7f38d686fb06469ca1f3c5524301.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KrMQgK4sPIktRYMX7Ko6Pg.png"/></div></div></figure><p id="3aae" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¿›å…¥åˆ†æå™¨çš„æ–‡æœ¬å°†ä¾æ¬¡ç»è¿‡3ä¸ªæ¨¡å—ï¼Œå³<strong class="jp ir"> <em class="km">å­—ç¬¦è¿‡æ»¤å™¨</em> </strong>ã€<strong class="jp ir"> <em class="km">è®°å·èµ‹äºˆå™¨</em> </strong>å’Œ<strong class="jp ir"> <em class="km">è®°å·è¿‡æ»¤å™¨</em> </strong>ã€‚ä»åˆ†æå™¨å‡ºæ¥çš„æ–‡æœ¬è¿›å…¥<strong class="jp ir">å€’æ’ç´¢å¼•</strong>ï¼Œå€’æ’ç´¢å¼•æ˜¯ä¸€ç§æ˜ å°„ï¼Œå®ƒå°†æ¯ä¸ªå•è¯ä¸è¯¥å•è¯æ‰€å±æ–‡æ¡£çš„ä¸åŒæ ‡è¯†ç¬¦ç›¸å…³è”ã€‚åŸºæœ¬ä¸Šï¼Œå¯¹æ¯ä¸ªå—æ‰§è¡Œçš„æ“ä½œå¦‚ä¸‹:</p><ul class=""><li id="bca3" class="ll lm iq jp b jq jr ju jv jy ln kc lo kg lp kk lq lr ls lt bi translated"><strong class="jp ir">å­—ç¬¦è¿‡æ»¤å™¨</strong>:å®ƒé€šè¿‡åˆ é™¤ã€æ·»åŠ å’Œæ›¿æ¢æ¥æ”¹å˜æ–‡æœ¬çš„å­—ç¬¦ã€‚ElasticsearchåŒ…æ‹¬ä¸‰ä¸ªå†…ç½®çš„å­—ç¬¦è¿‡æ»¤å™¨ï¼Œæ˜ å°„å­—ç¬¦è¿‡æ»¤å™¨ï¼ŒHTMLæ¡å½¢å­—ç¬¦è¿‡æ»¤å™¨å’Œæ¨¡å¼æ›¿æ¢å­—ç¬¦è¿‡æ»¤å™¨ã€‚æ›´å¤šä¿¡æ¯<a class="ae kl" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-charfilters.html" rel="noopener ugc nofollow" target="_blank">è¿™é‡Œ</a>ã€‚</li><li id="dd45" class="ll lm iq jp b jq lu ju lv jy lw kc lx kg ly kk lq lr ls lt bi translated"><strong class="jp ir">æ ‡è®°å™¨</strong>:å°†æ–‡æœ¬æ‹†åˆ†æˆ<strong class="jp ir"> <em class="km">æ ‡è®°</em> </strong>ã€‚ä¾‹å¦‚â€œ<em class="km">ä½ å¥½ï¼Œæˆ‘å«ä¹”å¸Œ</em>â€å°†è¢«å‰ªåˆ‡ä»¥åˆ›å»ºè¿™ç»„ä»¤ç‰Œ<em class="km">{ä½ å¥½ï¼Œæˆ‘çš„åå­—ï¼Œæ˜¯ï¼Œä¹”å¸Œ} </em>ã€‚ç‚¹å‡»äº†è§£æ›´å¤šå…³äºä¸»é¢˜<a class="ae kl" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-tokenizers.html" rel="noopener ugc nofollow" target="_blank">çš„ä¿¡æ¯ã€‚</a></li><li id="ff45" class="ll lm iq jp b jq lu ju lv jy lw kc lx kg ly kk lq lr ls lt bi translated"><strong class="jp ir">è®°å·è¿‡æ»¤å™¨</strong>:åœ¨è¿™é‡Œï¼Œè®°å·å°†æ ¹æ®æˆ‘ä»¬é€‰æ‹©çš„è¿‡æ»¤å™¨è¿›è¡Œæ“ä½œï¼Œä¾‹å¦‚åˆ é™¤å¤§å†™å­—æ¯ã€é€—å·æˆ–ä»»ä½•æˆ‘ä»¬ä¸æƒ³ä¿ç•™åœ¨å€’æ’ç´¢å¼•ä¸­çš„å­—ç¬¦ã€‚ä½ å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°æ›´å¤šä¿¡æ¯<a class="ae kl" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-tokenfilters.html" rel="noopener ugc nofollow" target="_blank"/>ã€‚</li></ul><p id="9763" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="km">ä¸€ä¸ªå½¢è±¡èƒœè¿‡åƒè¨€ä¸‡è¯­</em>ã€‚ä¸‹é¢æ˜¯åˆ†æå™¨ä¸­å‘ç”Ÿçš„æƒ…å†µçš„å›¾ç¤ºã€‚</p><figure class="kn ko kp kq gt le gh gi paragraph-image"><div class="gh gi lz"><img src="../Images/544c6a8f34d87e5c6dba45b160708220.png" data-original-src="https://miro.medium.com/v2/resize:fit:776/format:webp/1*Y0k7hE6VEgoVjeg5cQjeKw.png"/></div></figure><p id="19f3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¿™æ˜¯åˆ†æå™¨é“¾ã€‚æ‚¨å¯ä»¥ä½¿ç”¨<strong class="jp ir"> <em class="km">åˆ†æ</em> </strong>ç«¯ç‚¹ç›´æ¥åœ¨Elasticsearchä¸Šæµ‹è¯•ã€‚è®©æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªæ–‡æœ¬å¹¶é€‰æ‹©æˆ‘ä»¬æƒ³è¦ä½¿ç”¨çš„åˆ†æå™¨ã€‚è¿™é‡Œï¼Œ<strong class="jp ir">æ ‡å‡†åˆ†æä»ª</strong>ã€‚</p><pre class="kn ko kp kq gt kr ks kt ku aw kv bi"><span id="0271" class="kw kx iq ks b gy ky kz l la lb">GET _analyze<br/>{<br/>  "text": "What do we say to the God of Death ? Not today !",<br/>  "analyzer": "standard"<br/>}</span></pre><p id="ed6d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬çš„å­—ç¬¦ä¸²è¢«æ‹†åˆ†æˆäº†è®°å·ï¼Œå¤§å†™å­—æ¯æ²¡æœ‰å¹¸å­˜ä¸‹æ¥ï¼Œæ‰€æœ‰çš„æ ‡ç‚¹ç¬¦å·éƒ½è¢«å¿½ç•¥äº†ã€‚</p><pre class="kn ko kp kq gt kr ks kt ku aw kv bi"><span id="839b" class="kw kx iq ks b gy ky kz l la lb">{<br/>  "tokens": [<br/>    {<br/>      "token": "what",<br/>      "start_offset": 0,<br/>      "end_offset": 4,<br/>      "type": "&lt;ALPHANUM&gt;",<br/>      "position": 0<br/>    },<br/>    {<br/>      "token": "do",<br/>      "start_offset": 5,<br/>      "end_offset": 7,<br/>      "type": "&lt;ALPHANUM&gt;",<br/>      "position": 1<br/>    },<br/>    {<br/>      "token": "we",<br/>      "start_offset": 8,<br/>      "end_offset": 10,<br/>      "type": "&lt;ALPHANUM&gt;",<br/>      "position": 2<br/>    },<br/>    {<br/>      "token": "say",<br/>      "start_offset": 11,<br/>      "end_offset": 14,<br/>      "type": "&lt;ALPHANUM&gt;",<br/>      "position": 3<br/>    },<br/>    {<br/>      "token": "to",<br/>      "start_offset": 15,<br/>      "end_offset": 17,<br/>      "type": "&lt;ALPHANUM&gt;",<br/>      "position": 4<br/>    },<br/>    {<br/>      "token": "the",<br/>      "start_offset": 18,<br/>      "end_offset": 21,<br/>      "type": "&lt;ALPHANUM&gt;",<br/>      "position": 5<br/>    },<br/>    {<br/>      "token": "god",<br/>      "start_offset": 22,<br/>      "end_offset": 25,<br/>      "type": "&lt;ALPHANUM&gt;",<br/>      "position": 6<br/>    },<br/>    {<br/>      "token": "of",<br/>      "start_offset": 26,<br/>      "end_offset": 28,<br/>      "type": "&lt;ALPHANUM&gt;",<br/>      "position": 7<br/>    },<br/>    {<br/>      "token": "death",<br/>      "start_offset": 29,<br/>      "end_offset": 34,<br/>      "type": "&lt;ALPHANUM&gt;",<br/>      "position": 8<br/>    },<br/>    {<br/>      "token": "not",<br/>      "start_offset": 37,<br/>      "end_offset": 40,<br/>      "type": "&lt;ALPHANUM&gt;",<br/>      "position": 9<br/>    },<br/>    {<br/>      "token": "today",<br/>      "start_offset": 41,<br/>      "end_offset": 46,<br/>      "type": "&lt;ALPHANUM&gt;",<br/>      "position": 10<br/>    }<br/>  ]<br/>}</span></pre><p id="a3f6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Elasticsearchè¿˜ä¸ºæˆ‘ä»¬æä¾›äº†å®šä¹‰<strong class="jp ir"> <em class="km">è‡ªå®šä¹‰åˆ†æå™¨</em> </strong>çš„å¯èƒ½æ€§ã€‚ç‚¹å‡»äº†è§£å¦‚ä½•åˆ›å»ºè‡ªå®šä¹‰åˆ†æå™¨<a class="ae kl" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-custom-analyzer.html" rel="noopener ugc nofollow" target="_blank">ã€‚æˆ‘ä»¬å¯èƒ½å·²ç»åœ¨è¿™é‡Œè®¨è®ºäº†ç”¨äºæ‰§è¡Œåˆ†æçš„<strong class="jp ir">èšåˆ</strong>çš„æ¦‚å¿µï¼Œä½†æ˜¯ä¸è¦æ‹…å¿ƒï¼Œè¿™ä¸ªä¸»é¢˜å¯èƒ½ä¼šåœ¨æœªæ¥çš„æ–‡ç« ã€ŠğŸ«¡.ã€‹ä¸­æ¶‰åŠ</a></p><p id="b5e0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä»Šå¤©å°±åˆ°è¿™é‡Œï¼Œè¯·éšæ—¶æŸ¥çœ‹<a class="ae kl" href="https://www.elastic.co/guide/index.html" rel="noopener ugc nofollow" target="_blank">å®˜æ–¹æ–‡æ¡£</a>äº†è§£æ›´å¤šè¯¦æƒ…ã€‚æ„Ÿè°¢æ‚¨çš„é˜…è¯»ï¼Œå¦‚æœæ‚¨å¯¹æœ¬æ–‡æœ‰ä»»ä½•é—®é¢˜æˆ–è¯„è®ºï¼Œè¯·åœ¨ä¸‹é¢ç•™ä¸‹æ‚¨çš„è¯„è®ºã€‚</p><p id="1fdb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘ä»¬ä¸‹æ¬¡å†è§ï¼Œçœ‹æ›´å¤šçš„å¸–å­ã€‚</p><p id="5844" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">é˜¿åœæœå°”-å·´å‰</p></div></div>    
</body>
</html>