<html>
<head>
<title>How to Avoid Accidentally Deleting Files in Terminal</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何避免在终端中意外删除文件</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-avoid-accidentally-deleting-files-in-terminal-969d63ab1c02?source=collection_archive---------10-----------------------#2020-10-06">https://levelup.gitconnected.com/how-to-avoid-accidentally-deleting-files-in-terminal-969d63ab1c02?source=collection_archive---------10-----------------------#2020-10-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="14ca" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在Mac和Linux上避免文件删除灾难的技术</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/e1a32de5f50d02a32efc0229f9ad35c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0_TEiQx_H3bg-Qmo"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">照片由<a class="ae le" href="https://unsplash.com/@gary_at_unsplash?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Gary Chan </a>在<a class="ae le" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="7467" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我永远不会忘记当我还是一名网络工程师的时候，一位同事因为一个简单的错放的点而让整个大学校园陷入瘫痪。</p><p id="c399" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我同事犯的错误是输入:</p><pre class="kp kq kr ks gt lf lg lh li aw lj bi"><span id="f150" class="lk ll it lg b gy lm ln l lo lp">rm -rf /*</span></pre><p id="2e39" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">而不是:</p><pre class="kp kq kr ks gt lf lg lh li aw lj bi"><span id="3069" class="lk ll it lg b gy lm ln l lo lp">rm -rf ./*</span></pre><p id="c17b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">第二个命令递归地删除当前目录和所有子目录中的所有文件。第一个从根目录和所有子目录中删除所有文件。Unix系统上的根目录是包含整个文件系统的顶级目录。</p><p id="040f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">更糟糕的是，我的同事以root用户<em class="lq">T21的身份登录，他拥有完全的管理员权限。<code class="fe lr ls lt lg b">rm</code>删除文件前不提示确认。</em></p><blockquote class="lu"><p id="bdca" class="lv lw it bd lx ly lz ma mb mc md kn dk translated">所以，通过10次简单的击键，他意外地清除了整个服务器。我只想说网络经理不开心！</p></blockquote></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="44c5" class="ml ll it bd mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh bi translated">避免错误</h1><p id="f33e" class="pw-post-body-paragraph jq jr it js b jt ni jv jw jx nj jz ka kb nk kd ke kf nl kh ki kj nm kl km kn im bi translated"><code class="fe lr ls lt lg b">rm -rf</code>应该有节制有意识地使用。有些情况下，它是这项工作的合适工具。</p><p id="71dd" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">然而，可以采取一些简单的步骤来避免灾难。</p><p id="e046" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">首先，不要以root用户身份登录或使用<code class="fe lr ls lt lg b">sudo</code>，除非你完全习惯于永久删除你的文件(或者至少从备份中恢复)。</p><p id="e4dd" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">第二，养成在<code class="fe lr ls lt lg b">rm</code>命令后面添加<code class="fe lr ls lt lg b">-i</code>的习惯，因为你可能不确定要删除什么。<code class="fe lr ls lt lg b">-i</code>将使<code class="fe lr ls lt lg b">rm</code>交互运行，并提示删除文件和目录。</p><p id="b718" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">不要试图在shell的配置文件中将<code class="fe lr ls lt lg b">rm</code>别名为<code class="fe lr ls lt lg b">rm -i</code>。这将产生一个坏习惯，即认为<code class="fe lr ls lt lg b">rm</code>将总是提示确认，如果您使用没有这个安全网的机器，可能会发生不好的事情。</p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="d1db" class="ml ll it bd mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh bi translated">像专业人士一样用rmtrash移除</h1><p id="8ea9" class="pw-post-body-paragraph jq jr it js b jt ni jv jw jx nj jz ka kb nk kd ke kf nl kh ki kj nm kl km kn im bi translated">我最喜欢的方法是，只有当我<em class="lq">真的</em>知道我想删除某个东西时，才使用<code class="fe lr ls lt lg b">rm</code>。其余时间，我用<code class="fe lr ls lt lg b">rmtrash</code>。</p><p id="05a9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">几乎所有的现代文件管理器(Windows、macOS、Linux GUIs)都带有一个“垃圾桶”。当您“删除”一个文件或文件夹时，它不会立即被删除，而是被移到废纸篓。这是防止意外删除的安全网。当你确定要删除这些文件时，你可以清空垃圾箱。</p><p id="a65a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在macOS和大多数Linux发行版中，有模拟这种行为的命令行工具。macOS上有<code class="fe lr ls lt lg b">rmtrash</code>，可以通过<a class="ae le" href="https://formulae.brew.sh/formula/rmtrash" rel="noopener ugc nofollow" target="_blank">自制</a>安装，如下:</p><pre class="kp kq kr ks gt lf lg lh li aw lj bi"><span id="548c" class="lk ll it lg b gy lm ln l lo lp">brew install rmtrash</span></pre><p id="407f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">要删除目录类型:</p><pre class="kp kq kr ks gt lf lg lh li aw lj bi"><span id="d777" class="lk ll it lg b gy lm ln l lo lp">rmtrash ./path/to/directory</span></pre><p id="3c2c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这将把<code class="fe lr ls lt lg b">directory</code>移动到macOS垃圾桶。</p><p id="afda" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在Linux系统上，有一个类似的、功能更全的解决方案叫做<code class="fe lr ls lt lg b">trash-cli</code>。这不仅提供了从命令行删除文件的功能，还提供了清空垃圾桶等功能。关于<code class="fe lr ls lt lg b">trash-cli</code>的更多信息可以在这里找到<a class="ae le" href="https://github.com/andreafrancia/trash-cli/" rel="noopener ugc nofollow" target="_blank">。在Ubuntu上，它可以与以下软件一起安装:</a></p><pre class="kp kq kr ks gt lf lg lh li aw lj bi"><span id="6118" class="lk ll it lg b gy lm ln l lo lp">sudo apt install trash-cli</span></pre><p id="7380" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">要删除目录，请键入:</p><pre class="kp kq kr ks gt lf lg lh li aw lj bi"><span id="236a" class="lk ll it lg b gy lm ln l lo lp">trash-put ./path/to/directory</span></pre></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="f586" class="ml ll it bd mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh bi translated">摘要</h1><p id="ed4d" class="pw-post-body-paragraph jq jr it js b jt ni jv jw jx nj jz ka kb nk kd ke kf nl kh ki kj nm kl km kn im bi translated">请小心使用<code class="fe lr ls lt lg b">rm</code>,并保持定期备份。对于日常文件删除，考虑macOS上的<code class="fe lr ls lt lg b">rmtrash</code>或Linux上的<code class="fe lr ls lt lg b">trash-cli</code>。</p><p id="c050" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我希望这是有用的。如果有人对命令行文件删除有任何进一步的想法，我很乐意在评论中阅读。</p></div></div>    
</body>
</html>