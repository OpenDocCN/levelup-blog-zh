# 我首先相信无服务器，你也应该如此

> 原文：<https://levelup.gitconnected.com/i-believe-in-serverless-first-and-so-should-you-8a9ced0c6733>

## 进入无服务器技术的世界是一项挑战。这也是一个非常令人兴奋的世界，对你和你的产品来说，这可能是非常重要的一步。

![](img/6cff01ef7d63b46593e349ce15e00893.png)

格雷格·法罗摄影

如果你是一名从事 SaaS 产品的工程师或建筑师，过去的 5 年是一段令人难以置信的激动人心的时光(即使你没有意识到)😉).

云技术的兴起和好处已经被很好地记录下来。云技术让我兴奋的是它在 SaaS 产品中的应用。

> 问:为什么过去的五年如此激动人心？
> 
> 答:无服务器！

当 AWS 在 2014 年推出 [Lamba](https://aws.amazon.com/lambda/) 时，它引入了一种新的设计和向主流交付软件的方式。无服务器的引入给许多不同的应用程序带来了好处，但是 SaaS 和无服务器是完美的一对。

让我特别惊讶的是，理解的速度如此之慢。即使是现在，人们正在分享和谈论的无服务器技术的应用对我来说仍然是基础的，而且，恕我直言，毫无雄心。

无服务器不是银弹。它有许多可怕的“缺点”来对抗令人兴奋的“优点”。根据您的应用，无服务器可能根本不是正确的解决方案！但是，无服务器*是*解决许多问题的正确方案，而且其中一些问题很复杂，那么为什么无服务器没有得到更广泛的应用呢？

## 原则问题

使用无服务器构建是不同的。为了使利益最大化，你必须改变你的设计和建筑方法。有些架构原则是你真正应该采纳的，例如:

*   事件驱动。
*   数据可能会无序到达，或者多次到达。
*   没有国家。你必须知道你的函数是短暂的，会消失又会出现。
*   功能是独立的。

[Simon Sugob](https://medium.com/u/59fdd21a44ca?source=post_page-----8a9ced0c6733--------------------------------) 有一篇[关于无服务器架构的优秀文章](https://medium.com/swlh/serverless-architecture-complete-reference-guide-2019-55363c08d1be)。

这些变化是一个问题。这使得转变变得更加困难。作为一名专家，一名专业人士，很难意识到你专业知识的一些基础正在改变或者不再相关。有效地使用无服务器需要我们面对这个事实。

## 一望无际的绿地

另一个需要克服的障碍是“迁移”。迁移到云通常意味着一个相对简单的过程，将现有的虚拟服务器移动到其他人的硬件上。

这可不是小事，否则就不会有 1500 亿美元的市场。但是，它的机制很容易理解。在很大程度上，你是在用相似的组件交换相似的组件，无论是服务器、容器、网络等等。

“迁移”到无服务器更加复杂。几乎在所有情况下，“迁移”都意味着“重建”。立即重建听起来更困难、更昂贵且更慢。如果您承诺采用无服务器，您将建立在绿地之上，不太可能有效地重新利用您现有的组件。

好吧，如果真的这么难，我们为什么要费神呢！目前，我认为大多数人都在说“我们不应该”，因此当它被使用时，理解缓慢，实现困难。

![](img/860caea871181c1d956201acd986b81c.png)

格雷格·法罗摄影

# ResponseTap 确实很麻烦

当您构建和维护 SaaS 产品时，您打算进行扩展。你希望你的产品能接触到尽可能多的顾客，并尽可能高效和有效地服务这些顾客。这意味着能够以可预测、可追踪的成本进行大规模扩展。

这种模式非常适合无服务器技术。无服务器允许您:

*   实现大规模。
*   以微小的迭代增量进行部署，以管理风险。
*   分离你的服务和职责。
*   简化代码，实现真正的单一用途。
*   管理您的成本，只为您使用的东西付费。
*   将大量的责任推给云提供商，这样您就可以将全部精力放在产品上。
*   利用您的云提供商区域和边缘技术，将您的代码放在您的客户所在的地方。

## 我们是怎么做到的？

我的朋友[本·琼斯](https://medium.com/u/7b4759dcd8ac?source=post_page-----8a9ced0c6733--------------------------------)写了一个[关于我们过渡到无服务器](https://medium.com/responsetap-engineering/monolith-to-microservices-to-serverless-our-journey-745a2b9620ec)的精彩故事。他解释了我们如何经历了一段激动人心的旅程，从一个单一的 Java 应用程序到一个无服务器的世界，途中还绕道了 Kubernetes 和 Docker！

转折点出现在 2018 年的中途。我们现有的架构已经有机增长，遵循许多与其他公司相同的步骤。我们采用了所有这些策略，甚至更多:

*   将整体分割成多个功能部分，这样每个部分都可以独立扩展。
*   分布关系数据库以增加容量。
*   购买更大的服务器。
*   提炼和改进代码，使其更有效。
*   根据面向服务的架构(SOA)构建新功能。

所有这些技术都有帮助。我们的公司在成长，我们在扩展我们的产品以跟上发展。但是越来越难跟上。一旦唾手可得的果实被认领，我们意识到进一步的扩展将需要一个更基本和革命性的策略。

负责 ResponseTap 产品的交付、架构和维护变得越来越有压力，有时压力非常大😰。知道你的产品有一个扩展极限——这个极限正变得越来越难以增加——并不是一件愉快的事情。

我们也知道，为了给我们所有的客户提供相同的、出色的体验，无论他们在世界的哪个角落，我们都必须做一些大事。有风险的事情。令人兴奋的事情。勇敢的事情。

![](img/56555b3d8341c71ea60eb3d86cfc793f.png)

格雷格·法罗摄影

# 首先是无服务器。

正如[本·琼斯](https://medium.com/u/7b4759dcd8ac?source=post_page-----8a9ced0c6733--------------------------------)和[提到的](https://medium.com/responsetap-engineering/monolith-to-microservices-to-serverless-our-journey-745a2b9620ec)，我们一直在试验 AWS，包括基于服务器和无服务器的服务。我开始相信我们问题的答案是使用无服务器技术进行重建。它提供的好处与我们的 SaaS 产品完全一致。我们的第一个新建筑原则诞生了:

> 首先是无服务器。

我们的产品是一个复杂的数据处理平台。我们看到的无服务器架构的例子非常简单。我们需要建造更加复杂和新颖的东西。我们将进入未知的领域。一个只有像崔琰这样的思想领袖才谈论的地方！

这是一个雄心勃勃的计划，一项需要进行的大规模投资。谢天谢地，当时我得到了整个 ResponseTap 工程团队的大力支持。特别是 [David Turner](https://medium.com/u/351587b6784b?source=post_page-----8a9ced0c6733--------------------------------) (工程副总裁)，他在我提出大胆建议的过程中给予了指导，并帮助我开发新的建筑设计。安德鲁·海宁和本·琼斯也是新设计的关键合作者。

## 12 个月后。

在 2018 年 9 月的*日，我们已经孤注一掷，严重放缓了我们的产品开发，并赌上了我的坚定信念，即无服务器将使我们能够使我们公司的产品 ***成为一流的*** 。*

2019 年 9 月*，我们刚刚将我们的无服务器解决方案投入预生产。测试和开发仍在继续。但是现在，我第一次可以自信地说，**管用**。它具有难以置信的规模、性能和敏捷性。*

*我真的认为这是职业生涯的决定性时刻。很少有建筑师和工程师有机会参与这样开创性或革命性的项目，但我们做到了🙂。*

# *结论*

*致力于无服务器重建是一项艰巨的任务，它*有*风险。如果您仔细考虑这种情况，并且可以看到无服务器特性与您的需求相匹配，**值得冒这个险**。*

*我想分享这个故事，因为我认为这是我冒过的最好的风险。我们向未知领域迈进了一步，以一种复杂而新颖的方式使用无服务器，很少有类似的例子可以参考。它得到了回报，如果更多的人也能勇敢起来，我们就能开始了解无服务器技术真正能做什么。*

*去吧。*

**在接下来的几周和几个月里，我将深入探讨我们是如何实现无服务器过渡的，包括我们在这个过程中学到的一些最佳实践。**