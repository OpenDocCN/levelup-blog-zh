<html>
<head>
<title>Use a Refs in React to Create an Upload Component</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在React中使用Refs创建上传组件</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/use-a-refs-in-react-create-upload-component-7e33258e99ea?source=collection_archive---------5-----------------------#2021-09-05">https://levelup.gitconnected.com/use-a-refs-in-react-create-upload-component-7e33258e99ea?source=collection_archive---------5-----------------------#2021-09-05</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="5074" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">本章将教你如何在React中使用引用。到本章结束时，你将能够在现有的应用程序中以一种有效且易于使用的方式使用Refs。</p><p id="6c18" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在React中，我们使用Refs来直接访问、操作DOM并与之交互。对HTML元素的直接引用允许我们执行在创建客户端应用程序时经常遇到的任务。这些任务包括但不限于数据处理和布局分析。</p><p id="e29a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们将使用一个Ref来创建一个样式化的输入按钮，它不能使用普通的CSS样式化。我们将首先创建文件输入，然后添加一个自定义按钮组件。单击该按钮将触发输入的文件上传功能。</p><ol class=""><li id="dce3" class="ko kp it js b jt ju jx jy kb kq kf kr kj ks kn kt ku kv kw bi translated">使用<code class="fe kx ky kz la b">create-react-app</code> CLI创建一个新项目:</li></ol><pre class="lb lc ld le gt lf la lg lh aw li bi"><span id="81d8" class="lj lk it la b gy ll lm l ln lo">$ npx create-react-app button-refs</span></pre><p id="35a4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">2.转到该文件夹并启动<code class="fe kx ky kz la b">create-react-app</code>开发服务器:</p><pre class="lb lc ld le gt lf la lg lh aw li bi"><span id="94e0" class="lj lk it la b gy ll lm l ln lo">cd button-refs &amp;&amp; npm start</span></pre><p id="2c7e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">3.在项目编辑<code class="fe kx ky kz la b">src/App.js</code>文件中，将<code class="fe kx ky kz la b">App</code>组件修改为返回<code class="fe kx ky kz la b">input</code>组件:</p><pre class="lb lc ld le gt lf la lg lh aw li bi"><span id="3d8b" class="lj lk it la b gy ll lm l ln lo">const App = () =&gt; {<br/>  return (<br/>    &lt;input /&gt;<br/>  );<br/>}</span><span id="26f1" class="lj lk it la b gy lp lm l ln lo">export default App;</span></pre><p id="4572" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">4.将文件类型添加到<code class="fe kx ky kz la b">input</code>组件:</p><pre class="lb lc ld le gt lf la lg lh aw li bi"><span id="206d" class="lj lk it la b gy ll lm l ln lo">const App = () =&gt; {<br/>  return (<br/>    &lt;input type="file" /&gt;<br/>  );<br/>}</span><span id="40c0" class="lj lk it la b gy lp lm l ln lo">export default App;</span></pre><p id="a0d9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在<code class="fe kx ky kz la b">http://localhost:3000</code>运行应用程序，我们应该看到以下输出:</p><figure class="lb lc ld le gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi lq"><img src="../Images/aee6b2c1533f77843e8a671a06938176.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lSjcsOKZP2iweM5Gn29S0Q.png"/></div></div></figure><p id="fedd" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果您单击这个输入按钮，您应该会看到一个弹出窗口，用于选择要上传的文件。</p><p id="4a1c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">5.添加一个带有橙色背景和白色字体样式的<code class="fe kx ky kz la b">button</code>组件。添加隐藏属性以隐藏本机输入文件。</p><pre class="lb lc ld le gt lf la lg lh aw li bi"><span id="2032" class="lj lk it la b gy ll lm l ln lo">const App = () =&gt; {<br/>  return (<br/>    &lt;&gt;<br/>      &lt;input type="file" hidden={true} /&gt;<br/>      &lt;button style={{ backgroundColor: "orange", color: "white" }}&gt;<br/>        Upload<br/>      &lt;/button&gt;<br/>    &lt;/&gt;<br/>  );<br/>}</span><span id="83ff" class="lj lk it la b gy lp lm l ln lo">export default App;</span></pre><p id="3d30" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">6.首先创建一个名为inputRef的类字段来存储Ref:</p><pre class="lb lc ld le gt lf la lg lh aw li bi"><span id="4172" class="lj lk it la b gy ll lm l ln lo">const App = () =&gt; {<br/>  inputRef;<br/>  return (<br/>    &lt;&gt;<br/>      &lt;input type="file" hidden={true} /&gt;<br/>      &lt;button style={{ backgroundColor: "orange", color: "white" }}&gt;<br/>        Upload<br/>      &lt;/button&gt;<br/>    &lt;/&gt;<br/>  );<br/>}</span><span id="d123" class="lj lk it la b gy lp lm l ln lo">export default App;</span></pre><p id="be50" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">7.创建一个接受名为refParam的参数的内联函数，并将该参数分配给App组件的inputRef字段。</p><pre class="lb lc ld le gt lf la lg lh aw li bi"><span id="4cf8" class="lj lk it la b gy ll lm l ln lo">const App = () =&gt; {<br/>  let inputRef;<br/>  return (<br/>    &lt;&gt;<br/>      &lt;input<br/>        type="file"<br/>        hidden={true}<br/>        ref={refParam =&gt; inputRef = refParam}<br/>      /&gt;<br/>      &lt;button style={{ backgroundColor: "orange", color: "white" }}&gt;<br/>        Upload<br/>      &lt;/button&gt;<br/>    &lt;/&gt;<br/>  );<br/>}</span><span id="e17e" class="lj lk it la b gy lp lm l ln lo">export default App;</span></pre><p id="2c73" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">8.最后一步，向按钮添加一个onClick处理程序。如果单击该按钮，将调用输入上的click函数，如果该字段引用输入组件:</p><pre class="lb lc ld le gt lf la lg lh aw li bi"><span id="38a0" class="lj lk it la b gy ll lm l ln lo">const App = () =&gt; {<br/>  let inputRef;<br/>  return (<br/>    &lt;&gt;<br/>      &lt;input<br/>        type="file"<br/>        hidden={true}<br/>        ref={refParam =&gt; inputRef = refParam}<br/>      /&gt;<br/>      &lt;button<br/>        style={{ backgroundColor: "orange", color: "white" }}<br/>        onClick={() =&gt; inputRef.click()}<br/>      &gt;<br/>        Upload<br/>      &lt;/button&gt;<br/>    &lt;/&gt;<br/>  );<br/>}</span><span id="daa4" class="lj lk it la b gy lp lm l ln lo">export default App;</span></pre><p id="3d7c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们试试上传:</p><figure class="lb lc ld le gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi ly"><img src="../Images/1303198e623eaed1e91cca177e459919.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*hE9Fl-5T1aEnzlL-E6aFRA.gif"/></div></div></figure><p id="7b28" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在，单击按钮，系统将提示您上传文件，因为自定义按钮现在会触发文件输入的本地功能。</p><p id="30bb" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您已经使用React Ref将几乎不可定制的本机输入功能绑定到一个按钮组件，您可以根据自己的意愿设置该按钮组件的样式。特别是，我们将检查作为ref对象传递给输入组件的函数。</p><p id="c8c3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">回购网址:<a class="ae lz" href="https://github.com/easywebsify/button-refs" rel="noopener ugc nofollow" target="_blank">https://github.com/easywebsify/button-refs</a></p></div></div>    
</body>
</html>