<html>
<head>
<title>Handle Registration in FastAPI and Tortoise ORM</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在FastAPI和Tortoise ORM中处理注册</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/handle-registration-in-fastapi-and-tortoise-orm-2dafc9325b7a?source=collection_archive---------3-----------------------#2020-12-09">https://levelup.gitconnected.com/handle-registration-in-fastapi-and-tortoise-orm-2dafc9325b7a?source=collection_archive---------3-----------------------#2020-12-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="5883" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">在这个过程中掉一两滴眼泪——第一部分</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/8a52109d5c1e7515c6aa95820eba6c34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*X5HZUQ028OLrHAdk"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae kv" href="https://unsplash.com/@imattsmart?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> iMattSmart </a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="2a20" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">FastAPI最近获得了一些势头。在GitHub上，它大约有Django或Flask一半的星星。但是当你考虑到谷歌搜索结果时，它就不那么受欢迎了:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi lt"><img src="../Images/5286b954999c1ab153998e40a73f82b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j6lQDGyOAaWmUz_6l2MPhA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">FastAPI vs. Flask vs. Django人气</figcaption></figure><p id="799a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在实践中意味着什么？几乎没有机会找到你的堆栈溢出问题的答案。留给你的是(伟大的)文档和框架代码本身。它仍然是一项前沿技术，但它足够有希望让我为您介绍一些基础知识。我相信，考虑到一些覆盖面，FastAPI可以超越它的前辈。</p><p id="6fe5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">说够了。让我们建立一些有用的东西。</p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h1 id="7cb6" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">Deps</h1><p id="666c" class="pw-post-body-paragraph kw kx iq ky b kz mt jr lb lc mu ju le lf mv lh li lj mw ll lm ln mx lp lq lr ij bi translated">你首先需要一些依赖。虽然库是必须的，但是选择一个数据库和它的版本系统(或者缺少版本系统)取决于你。你<em class="ls">能不能</em>坚持乌龟的默认<a class="ae kv" href="https://github.com/tortoise/aerich" rel="noopener ugc nofollow" target="_blank"> Aerich，</a>但是我相信它就是不够成熟。我推荐使用<a class="ae kv" href="https://www.postgresql.org/download/" rel="noopener ugc nofollow" target="_blank"> PostgreSQL </a>和<a class="ae kv" href="https://github.com/amacneil/dbmate" rel="noopener ugc nofollow" target="_blank"> dbmate </a> tandem。您将手动编写SQL查询，这意味着完全控制，但可能比使用像<a class="ae kv" href="https://alembic.sqlalchemy.org/en/latest/" rel="noopener ugc nofollow" target="_blank"> Alembic </a>这样的工具要困难得多。</p><p id="020e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">调用以下命令:</p><pre class="kg kh ki kj gt my mz na nb aw nc bi"><span id="60d3" class="nd mc iq mz b gy ne nf l ng nh">pip install tortoise-orm[asyncpg] fastapi[all] python-jose[cryptography] passlib[bcrypt]</span></pre><p id="fac5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">FastAPI开发人员不会强迫您使用任何特定的文件夹结构。就像React，你可以想出任何你想要的东西。就我们的目的而言，我认为这样做最好:</p><pre class="kg kh ki kj gt my mz na nb aw nc bi"><span id="29f0" class="nd mc iq mz b gy ne nf l ng nh">.<br/>├── app<br/>│   ├── __init__.py<br/>│   ├── main.py<br/>│   ├── config<br/>│   │   ├── __init__.py<br/>│   │   ├── db.py<br/>│   │   └── settings.py <br/>│   ├── models<br/>│   │   ├── __init__.py<br/>│   │   └── users.py<br/>│   ├── routers<br/>│   │   ├── __init__.py<br/>│   │   └── auth.py<br/>│   ├── services<br/>│   │   ├── __init__.py<br/>│   │   ├── mailer.py<br/>│   │   └── auth.py</span></pre><p id="d459" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，您必须指定一个包含DB连接字符串的环境变量。用安装PostgreSQL时提供的值替换占位符:</p><pre class="kg kh ki kj gt my mz na nb aw nc bi"><span id="03ac" class="nd mc iq mz b gy ne nf l ng nh">DATABASE_URL=postgres://{USERNAME}:{PASSWORD}@{HOST}:{PORT}/{DATABASE}?sslmode=disable</span></pre><p id="87ee" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">出于本教程的目的，我们不打算实施SSL ( <code class="fe ni nj nk mz b">sslmode=disable</code>)。但是对于真正的应用，<a class="ae kv" href="https://tortoise-orm.readthedocs.io/en/latest/databases.html?highlight=ssl%20mode#passing-in-custom-ssl-certificates" rel="noopener ugc nofollow" target="_blank">你应该</a>。</p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h1 id="24cf" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">你的第一次迁移</h1><p id="6435" class="pw-post-body-paragraph kw kx iq ky b kz mt jr lb lc mu ju le lf mv lh li lj mw ll lm ln mx lp lq lr ij bi translated">如果数据库不是您自己创建的，您可以让dbmate为您创建:</p><pre class="kg kh ki kj gt my mz na nb aw nc bi"><span id="3809" class="nd mc iq mz b gy ne nf l ng nh">dbmate create</span></pre><p id="e9fa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有了这些，您应该告诉它创建您的第一个迁移文件:</p><pre class="kg kh ki kj gt my mz na nb aw nc bi"><span id="8ece" class="nd mc iq mz b gy ne nf l ng nh">dbmate new create_users_table</span></pre><p id="cb16" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它在<code class="fe ni nj nk mz b">/app/db/migrations</code>目录中创建了一个新文件。打开它。您将看到下面列出的语法:</p><pre class="kg kh ki kj gt my mz na nb aw nc bi"><span id="d974" class="nd mc iq mz b gy ne nf l ng nh">-- migrate:up</span><span id="cda1" class="nd mc iq mz b gy nl nf l ng nh">-- migrate:down</span></pre><p id="fdfa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ni nj nk mz b">-- migrate:up</code>下面的一切都是你实际的迁移。<code class="fe ni nj nk mz b">-- migrate:down</code>下面的内容用于回滚迁移(您将使用一个<code class="fe ni nj nk mz b">DROP TABLE</code> SQL命令来实现这一点)。</p><p id="6a0d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们的目标是一个简单的模式:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/c64f72a38c04bcda71a0155a29bfa0eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:382/format:webp/1*ch4gD9b0J-ooGvppLnMxKw.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated"><em class="nn">用户</em>表模式</figcaption></figure><p id="0a76" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它转化为以下SQL查询(迁移和回滚):</p><pre class="kg kh ki kj gt my mz na nb aw nc bi"><span id="a31e" class="nd mc iq mz b gy ne nf l ng nh">-- migrate:up<br/>CREATE TABLE users (<br/>    id UUID PRIMARY KEY,<br/>    email varchar(255) UNIQUE NOT NULL,<br/>    hashed_password varchar(255) NOT NULL,<br/>    is_active boolean NOT NULL DEFAULT FALSE,<br/>    confirmation UUID<br/>)<br/>-- migrate:down<br/>DROP TABLE users</span></pre><p id="534d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在您可以开始迁移了:</p><pre class="kg kh ki kj gt my mz na nb aw nc bi"><span id="dc85" class="nd mc iq mz b gy ne nf l ng nh">dbmate up</span></pre><p id="aaaa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这就是。桌子竖起来了。</p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h1 id="386e" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">配置</h1><p id="b5b1" class="pw-post-body-paragraph kw kx iq ky b kz mt jr lb lc mu ju le lf mv lh li lj mw ll lm ln mx lp lq lr ij bi translated">这里你需要两样东西:</p><ol class=""><li id="10d1" class="no np iq ky b kz la lc ld lf nq lj nr ln ns lr nt nu nv nw bi translated">应用程序设置</li><li id="6e51" class="no np iq ky b kz nx lc ny lf nz lj oa ln ob lr nt nu nv nw bi translated">数据库设置</li></ol><p id="978d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们从前者开始，因为数据库设置将依赖于它。</p><h2 id="94b6" class="nd mc iq bd md oc od dn mh oe of dp ml lf og oh mn lj oi oj mp ln ok ol mr om bi translated">应用程序设置</h2><p id="fd4d" class="pw-post-body-paragraph kw kx iq ky b kz mt jr lb lc mu ju le lf mv lh li lj mw ll lm ln mx lp lq lr ij bi translated">设置放在<code class="fe ni nj nk mz b">/app/config/settings.py</code>文件中。FastAPI依赖项之一是<a class="ae kv" href="https://pydantic-docs.helpmanual.io/" rel="noopener ugc nofollow" target="_blank">Pydantic</a>——一个用于设置管理和数据验证的工具。最终我们将使用这两个特性。首先，你需要创建一个从<code class="fe ni nj nk mz b">BaseSettings</code>类继承的模型。这是正确的选择，因为我选择将一些敏感数据保存在环境变量中。正如Pydantic devs <a class="ae kv" href="https://pydantic-docs.helpmanual.io/usage/settings/" rel="noopener ugc nofollow" target="_blank">所说</a>:</p><blockquote class="on oo op"><p id="aa9e" class="kw kx ls ky b kz la jr lb lc ld ju le oq lg lh li or lk ll lm os lo lp lq lr ij bi translated">如果您创建一个继承自<code class="fe ni nj nk mz b">BaseSettings</code>的模型，模型初始化器将试图通过从环境中读取来确定任何未作为关键字参数传递的字段的值。(如果没有设置匹配的环境变量，仍将使用默认值。)</p></blockquote><p id="0c26" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">知道了这一点，您的设置类应该如下所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ot ou l"/></div></figure><p id="8e0b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们把它分解一下:</p><ul class=""><li id="ec84" class="no np iq ky b kz la lc ld lf nq lj nr ln ns lr ov nu nv nw bi translated"><code class="fe ni nj nk mz b">DATABASE_URL</code> —设置dbmate时定义的环境变量。它需要属于<code class="fe ni nj nk mz b">Settings</code>类，因为你在设置乌龟ORM的时候会引用它。</li><li id="77b8" class="no np iq ky b kz nx lc ny lf nz lj oa ln ob lr ov nu nv nw bi translated"><code class="fe ni nj nk mz b">SECRET_KEY</code> —生成注册确认令牌时使用的环境变量(<strong class="ky ir">，需要定义</strong> <strong class="ky ir">，现在为</strong>)。出于本教程的目的，它可以是任何随机的字符串，比如<code class="fe ni nj nk mz b">sdasfgrt23</code>。对于真实的应用程序，使用由<a class="ae kv" href="https://www.openssl.org/" rel="noopener ugc nofollow" target="_blank"> OpenSSL </a>生成的字符串。</li><li id="1dc9" class="no np iq ky b kz nx lc ny lf nz lj oa ln ob lr ov nu nv nw bi translated"><code class="fe ni nj nk mz b">REGISTRATION_TOKEN_LIFETIME</code> —用户注册帐户后收到的电子邮件中发送的令牌的生命周期(秒)。</li><li id="3f2f" class="no np iq ky b kz nx lc ny lf nz lj oa ln ob lr ov nu nv nw bi translated"><code class="fe ni nj nk mz b">TOKEN_ALGORITHM</code> —生成注册令牌时您将提供的算法。</li><li id="72a1" class="no np iq ky b kz nx lc ny lf nz lj oa ln ob lr ov nu nv nw bi translated"><code class="fe ni nj nk mz b">APP_NAME</code> — FastAPI为您生成一个Swagger文档。这是显示应用程序名称的地方。</li><li id="f6f1" class="no np iq ky b kz nx lc ny lf nz lj oa ln ob lr ov nu nv nw bi translated"><code class="fe ni nj nk mz b">SMTP_SERVER</code> —在本教程中，您将使用Python内置的调试服务器。马上就要<code class="fe ni nj nk mz b">localhost:25</code>了。<strong class="ky ir">现在定义一下。</strong></li><li id="eb60" class="no np iq ky b kz nx lc ny lf nz lj oa ln ob lr ov nu nv nw bi translated"><code class="fe ni nj nk mz b">MAIL_SENDER</code> —注册确认邮件的发送者。</li><li id="e9ef" class="no np iq ky b kz nx lc ny lf nz lj oa ln ob lr ov nu nv nw bi translated"><code class="fe ni nj nk mz b">API_PREFIX</code> —在每个端点前添加的字符串。你最好让它空着。</li><li id="90e3" class="no np iq ky b kz nx lc ny lf nz lj oa ln ob lr ov nu nv nw bi translated"><code class="fe ni nj nk mz b">HOST</code> —服务器主机。</li><li id="6406" class="no np iq ky b kz nx lc ny lf nz lj oa ln ob lr ov nu nv nw bi translated"><code class="fe ni nj nk mz b">PORT</code> —服务器端口</li><li id="f0a8" class="no np iq ky b kz nx lc ny lf nz lj oa ln ob lr ov nu nv nw bi translated"><code class="fe ni nj nk mz b">BASE_URL</code> —用于生成确认链接的基本URL。</li><li id="64c7" class="no np iq ky b kz nx lc ny lf nz lj oa ln ob lr ov nu nv nw bi translated"><code class="fe ni nj nk mz b">MODELS</code> —在这里你申报你的型号。您指定模块路径，这意味着<code class="fe ni nj nk mz b">models.users</code>代表<code class="fe ni nj nk mz b">models</code>包中的一个模块<code class="fe ni nj nk mz b">users</code>。</li><li id="2f8e" class="no np iq ky b kz nx lc ny lf nz lj oa ln ob lr ov nu nv nw bi translated">您还提供了一个<code class="fe ni nj nk mz b">Config</code>类，您在其中指定变量名区分大小写。对于Windows来说无所谓，但是如果用Linux就很重要了。</li></ul><p id="dfdb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">没有必要每次需要引用变量时都创建<code class="fe ni nj nk mz b">Settings</code>对象。我们可以定义一个返回单例的工厂方法，如下所示:</p><pre class="kg kh ki kj gt my mz na nb aw nc bi"><span id="fbf5" class="nd mc iq mz b gy ne nf l ng nh">from functools import lru_cache<br/></span><span id="dc1d" class="nd mc iq mz b gy nl nf l ng nh">@lru_cache()<br/>def get_settings():<br/>    return Settings()</span></pre><p id="0d61" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">到目前为止，一切顺利。让我们转到数据库配置。</p><h2 id="45c9" class="nd mc iq bd md oc od dn mh oe of dp ml lf og oh mn lj oi oj mp ln ok ol mr om bi translated">数据库设置</h2><p id="0bf5" class="pw-post-body-paragraph kw kx iq ky b kz mt jr lb lc mu ju le lf mv lh li lj mw ll lm ln mx lp lq lr ij bi translated">您在<code class="fe ni nj nk mz b">/app/config/db.py</code> <em class="ls">中定义数据库配置。</em>再说一遍——这只是一个惯例。如果你需要提供自定义设置，你可以在Tortoise ORM <a class="ae kv" href="https://tortoise-orm.readthedocs.io/en/latest/setup.html#tortoise.Tortoise.init" rel="noopener ugc nofollow" target="_blank">文档</a>中查找。在本教程中，配置很简单。我们只需要定义两件事:</p><ul class=""><li id="8932" class="no np iq ky b kz la lc ld lf nq lj nr ln ns lr ov nu nv nw bi translated">连接字符串</li><li id="7e9b" class="no np iq ky b kz nx lc ny lf nz lj oa ln ob lr ov nu nv nw bi translated">在<code class="fe ni nj nk mz b">Settings</code>类中声明的ORM模型</li></ul><p id="9036" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">很简单:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ot ou l"/></div></figure><p id="4f82" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有一点需要注意:您需要去掉可选参数的数据库连接字符串:<code class="fe ni nj nk mz b">settings.DATABASE_URL.split('?')[0]</code>。这意味着连接字符串将不包括<code class="fe ni nj nk mz b">sslmode=disable</code>部分。</p><p id="763f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在你实际上可以<em class="ls">使用</em>配置。</p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h1 id="a663" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">设置服务器</h1><p id="5c48" class="pw-post-body-paragraph kw kx iq ky b kz mt jr lb lc mu ju le lf mv lh li lj mw ll lm ln mx lp lq lr ij bi translated">所有初始化的东西都属于<code class="fe ni nj nk mz b">/app/main.py</code> <em class="ls"> </em>文件。在这里，您可以定义一个FastAPI应用程序，注册数据库，并提供一种运行<a class="ae kv" href="https://www.uvicorn.org/" rel="noopener ugc nofollow" target="_blank">uvicon</a>服务器的方法。因为您使用的框架应该是<em class="ls">快</em>，所以这里没有太多内容:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ot ou l"/></div></figure><ul class=""><li id="99de" class="no np iq ky b kz la lc ld lf nq lj nr ln ns lr ov nu nv nw bi translated">您定义了<code class="fe ni nj nk mz b">FastAPI</code>对象，只要需要应用程序上下文，就提供这个对象。您使用前面在<code class="fe ni nj nk mz b">Settings</code>类中定义的<code class="fe ni nj nk mz b">APP_NAME</code>变量，该变量将显示在Swagger文档中。</li><li id="d90c" class="no np iq ky b kz nx lc ny lf nz lj oa ln ob lr ov nu nv nw bi translated">使用<code class="fe ni nj nk mz b">register_tortoise</code>函数，您将Tortoise与您的应用程序绑定。因为我们使用dbmate来管理模式，所以您将<code class="fe ni nj nk mz b">generate_schemas</code>参数设置为<code class="fe ni nj nk mz b">False</code>。</li><li id="4274" class="no np iq ky b kz nx lc ny lf nz lj oa ln ob lr ov nu nv nw bi translated">您定义调用脚本时会发生什么。在这里，我们运行一个Uvicorn服务器。您可以使用<code class="fe ni nj nk mz b">127.0.0.1:8080</code>地址访问它。</li></ul></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h1 id="34e2" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">运行应用程序</h1><p id="78d8" class="pw-post-body-paragraph kw kx iq ky b kz mt jr lb lc mu ju le lf mv lh li lj mw ll lm ln mx lp lq lr ij bi translated">调用命令:</p><pre class="kg kh ki kj gt my mz na nb aw nc bi"><span id="2500" class="nd mc iq mz b gy ne nf l ng nh">python main.py</span></pre><p id="514c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在浏览器中转到<code class="fe ni nj nk mz b">127.0.0.1:8000/docs</code>地址。这是你应该看到的:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ow"><img src="../Images/090284de571177a519d52efd00e417b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZWV8OqjwFNxqaGiQL-IL2w.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">默认Swagger文档页面</figcaption></figure><p id="294b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">不要介意这个错误。您将很快添加一些端点。</p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h1 id="1a59" class="mb mc iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">最后的话</h1><p id="a6bb" class="pw-post-body-paragraph kw kx iq ky b kz mt jr lb lc mu ju le lf mv lh li lj mw ll lm ln mx lp lq lr ij bi translated">感谢阅读！</p><p id="e88d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<a class="ae kv" rel="noopener ugc nofollow" target="_blank" href="/handle-registration-in-fastapi-and-tortoise-orm-a661162d27f1">下一部分</a>中，您将:</p><ul class=""><li id="286e" class="no np iq ky b kz la lc ld lf nq lj nr ln ns lr ov nu nv nw bi translated">处理发送确认电子邮件</li><li id="6918" class="no np iq ky b kz nx lc ny lf nz lj oa ln ob lr ov nu nv nw bi translated">将<code class="fe ni nj nk mz b">users</code>表映射到ORM模型</li><li id="c8bf" class="no np iq ky b kz nx lc ny lf nz lj oa ln ob lr ov nu nv nw bi translated">编写用于注册和确认的端点</li></ul><p id="05b2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所有代码都可以在我的GitHub上找到。</p></div></div>    
</body>
</html>