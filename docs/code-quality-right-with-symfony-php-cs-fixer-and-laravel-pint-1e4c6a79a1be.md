# å¦‚ä½•ç”¨ Symfony PHP-CS-Fixer å’Œ Laravel Pint æ ¼å¼åŒ–ä»£ç 

> åŸæ–‡ï¼š<https://levelup.gitconnected.com/code-quality-right-with-symfony-php-cs-fixer-and-laravel-pint-1e4c6a79a1be>

## å¹¶è‡ªåŠ¨ä¿®å¤ PHP ç¼–ç æ ‡å‡†é—®é¢˜ï¼

åœ¨æˆ‘ä¹‹å‰çš„èŒä¸šç”Ÿæ¶¯ä¸­ï¼Œæˆ‘æ˜¯ PrestaShop å’Œ Symfony å¼€æºé¡¹ç›®çš„ç§¯æè´¡çŒ®è€…ã€‚å½“äººä»¬æ ¡å¯¹æˆ‘çš„ç¨¿ä»¶æ—¶ï¼Œæ²¡æœ‰ä»€ä¹ˆæ¯”çœ‹åˆ°æ—¶é—´æµªè´¹åœ¨æ— ç”¨çš„è¯„è®ºä¸Šæ›´è®©æˆ‘æ¼ç«çš„äº†ï¼Œæ¯”å¦‚:

"*è¯·åœ¨æ–‡ä»¶*çš„æœ«å°¾æ·»åŠ ä¸€ä¸ªç©ºè¡Œï¼Œ"æˆ–

"*ä½ å¿…é¡»å›åˆ°å³æ‹¬å·*åçš„é‚£ä¸€è¡Œ."

> ç‰¹åˆ«çŒ®ç»™æŸä¸ª Pierreï¼Œä»–æµªè´¹äº†æˆ‘è¿™ä¹ˆå¤šå¯ç”¨çš„å¤§è„‘æ—¶é—´æ¥è¾©è®ºè¿™ä¸ª*ğŸ¤¡*

æœ€ä»¤äººæ²®ä¸§çš„æ˜¯çœ‹åˆ°ä»£ç æ ¡å¯¹è€…åœ¨è®¨è®ºè´¡çŒ®çš„å…´è¶£ä¹‹å‰**åšå‡ºè¿™æ ·çš„è¯„è®º:**

*   è¿™ä¸ªåŠŸèƒ½æœ‰å¸®åŠ©å—ï¼Ÿ
*   è¿™ä¸ªâ€œé”™è¯¯ä¿®å¤â€äº§ç”Ÿçš„é—®é¢˜æ¯”å®ƒä¿®å¤çš„å°‘å—ï¼Ÿç­‰ç­‰ã€‚

![](img/6fd20fe220360e4e12fdc1d6b01831d7.png)

ç…§ç‰‡ç”±[ç±³ç±³Â·è’‚å®‰](https://unsplash.com/@mimithian?utm_source=medium&utm_medium=referral)åœ¨ [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) ä¸Šæ‹æ‘„

## ä½†æ˜¯æˆ‘ä»¬ä¸ºä»€ä¹ˆè¦æœ‰ä»£ç æ ‡å‡†å‘¢ï¼Ÿ

åœ¨ä¸€ä¸ªé¡¹ç›®çš„å›¢é˜Ÿä¸­å·¥ä½œæ˜¯å¾ˆå¸¸è§çš„ï¼›åœ¨ç°å®ä¸–ç•Œä¸­ï¼Œæˆ‘ä»¬èŠ±åœ¨é˜…è¯»å’Œç†è§£ä»£ç ä¸Šçš„æ—¶é—´å’Œç”Ÿäº§ä»£ç çš„æ—¶é—´ä¸€æ ·å¤šã€‚

å¦‚æœæ¯ä¸ªäººéƒ½æŒ‰ç…§è‡ªå·±çš„æ„æ„¿ç¼–ç ï¼Œé‚£ä¹ˆé˜…è¯»å’Œç†è§£é¡¹ç›®å°±æ›´æœ‰æŒ‘æˆ˜æ€§äº†ã€‚

å¦‚æœæœ‰äººæ¥æ‰‹é¡¹ç›®ï¼Œé‚£å°±ç™½è´¹åŠ²äº†ï¼

ç„¶å PSR æ ‡å‡†å‡ºç°äº†ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒPHP ç”Ÿæ€ç³»ç»Ÿä¸­æœ€æ°å‡ºçš„å‚ä¸è€…åŒæ„äº†ä¸€ç»„å»ºè®®ã€‚

å¼€å§‹æ—¶ï¼Œå®ƒç›¸å½“ç¾è§‚ï¼Œå¹¶ä¸”æ˜¯æ‰€æœ‰é¡¹ç›®çš„å…±åŒéœ€æ±‚ï¼Œæ¯”å¦‚åŠ è½½ PHP ç±»æˆ–æ—¥å¿—ã€‚

> å½“è¿™ä¸ªå°ç»„å¼€å§‹å°è¯•åœ¨æ›´å¤§çš„æ¡†æ¶ä¸Šå¼ºåŠ é€šç”¨çš„é«˜çº§è®¾è®¡è§„åˆ™æ—¶ï¼Œè®¸å¤šäººç¦»å¼€äº†è¿™ä¸ªé¡¹ç›®ï¼Œä½†è¿™å°†æ˜¯æœªæ¥æ›´â€œå·¨é­”â€é£æ ¼æ–‡ç« çš„ä¸»é¢˜*ğŸ˜œ*

> é•¿è¯çŸ­è¯´ï¼Œä½ å¿…é¡»å°Šé‡æ ‡å‡†ã€‚

å»ºè®® [PSR-1](https://www.php-fig.org/psr/psr-1/) å’Œ [PSR-12](https://www.php-fig.org/psr/psr-12/) è®°å½•äº†å¦‚ä½•ç¼–å†™ä½ çš„ PHP ä»£ç ï¼Œæ‰€è°“çš„â€œåŸºæœ¬ç¼–ç æ ‡å‡†â€å’Œâ€œæ‰©å±•ç¼–ç é£æ ¼â€

**åœ¨ Python ç”Ÿæ€ç³»ç»Ÿä¸­ï¼Œè¿™äº›è¢«ç§°ä¸º**[**PEPS**](https://peps.python.org/)**ï¼Œæˆ‘æƒ³è±¡å¤§éƒ¨åˆ†ç¼–ç¨‹è¯­è¨€éƒ½æœ‰ç±»ä¼¼çš„è§„åˆ™ã€‚**

ä¸‹é¢æ˜¯ä¸€äº› PHP æ¨è(PSR-1)çš„å…·ä½“ä¾‹å­:

*   å¿…é¡»ä½¿ç”¨ StudlyCaps è¡¨ç¤ºæ³•å£°æ˜ç±»åï¼›
*   å¿…é¡»ä½¿ç”¨ camelCase è¡¨ç¤ºæ³•å‘½åæ–¹æ³•ï¼›

**æˆ‘æ‡’å¾—å­¦è¿™ä¸ªï¼Œå†åŠ ä¸Šæˆ‘çš„ä»£ç ç®¡ç”¨ğŸ¤”**

æˆ‘æ˜ç™½äº†ï¼ä½ å¹¶æ²¡æœ‰å†³å®šæˆä¸ºä¸€åç”¨ä»£ç è¿›è¡Œè®¾è®¡çš„å¼€å‘äººå‘˜ã€‚

è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä¸€ç¾¤å·¥å…·è¿…é€Ÿå‡ºç°æ¥é‡æ–°æ ¼å¼åŒ–ä»£ç ä»¥éµå¾ªæ ‡å‡†ã€‚å…¶ä¸­ï¼Œæˆ‘å»ºè®®ä½ ä½¿ç”¨ [**PHP-CS-Fixer**](https://cs.symfony.com/) ã€‚

# PHP-CS-Fixer è‡ªåŠ¨éµå¾ªç¼–ç æ ‡å‡†

![](img/59faf5c2769fd73ced14e6ba63cb2cfd.png)

æ¼”èŒå‘˜è¡¨:[https://cs.symfony.com/](https://cs.symfony.com/)

å®ƒæ˜¯ç”± Symfony PHP æ¡†æ¶çš„åˆ›å»ºè€…(æ³•æ¯”å®‰Â·âœ¨)ç”¨ PHP å¼€å‘çš„è½¯ä»¶ï¼Œå¯ä»¥ç”¨ Composer å®‰è£…ã€‚

æ‚¨å°†è‡ªå·±å®šä½åœ¨ PHP é¡¹ç›®çš„æ ¹ç›®å½•ï¼Œå¹¶å®‰è£… PHP-CS-Fixer *ä½œä¸ºå¼€å‘ä¾èµ–*ã€‚

è¿™é‡Œå»ºè®®æ ¹æ®æ–‡æ¡£å°†å…¶å®‰è£…åœ¨å•ç‹¬çš„æ–‡ä»¶å¤¹ä¸­:

æ‚¨å¿…é¡»å°†å®ƒå®‰è£…åœ¨é¡¹ç›®çš„ tools/php-cs-fixer æ–‡ä»¶å¤¹ä¸­

> å¦ä¸€ä¸ªæœ‰æ•ˆçš„æ›¿ä»£æ–¹æ³•æ˜¯å®‰è£… [shim](https://github.com/PHP-CS-Fixer/shim) ä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„ php-cs-fixerã€‚

é‚£ä¹ˆï¼Œä½ æœ‰ä¸¤ä¸ªé€‰æ‹©:

*   è¦æ±‚å·¥å…·æ‰§è¡Œå®é™…çš„é”™è¯¯çº æ­£ï¼›
*   æˆ–è€…æ˜¾ç¤ºå®ƒæƒ³è¦è¿›è¡Œçš„ä¿®æ­£è€Œä¸æ‰§è¡Œå®ƒä»¬ï¼›

ä¸¤ç§æƒ…å†µä¸‹çš„æ‰§è¡ŒæŒ‡ä»¤æ˜¯ç›¸åŒçš„:â€œfixâ€å‘½ä»¤ï¼

åœ¨ä¿®å¤å‘½ä»¤ä¸­ï¼Œç‚¹(â€œ.â€)æŒ‡çš„æ˜¯å½“å‰æ–‡ä»¶å¤¹:æ‚¨å¯ä»¥ä¸º PHPStan å†³å®šå“ªäº›æ–‡ä»¶å¤¹åº”è¯¥éµå¾ªæ ‡å‡†ã€‚

> ç†è®ºä¸Šï¼Œ**æ‰€æœ‰æ–‡ä»¶å¤¹**éƒ½åº”è¯¥é€‚ç”¨ã€‚

**æˆ‘è¿è¡Œè¿™ä¸ªå‘½ä»¤æ—¶ä¼šå‡ºé”™ğŸ¥º**

è¯·ä¸è¦æƒŠæ…Œï¼Œæˆ‘çš„æœ‹å‹ï¼

æˆ‘å°†ä¸æ‚¨åˆ†äº«æˆ‘çš„æ‡’æƒ°çš„æç¤ºï¼Œå› ä¸ºæˆ‘ä¸è®°å¾—è¿™ç§å†—é•¿çš„å‘½ä»¤:åœ¨æ‚¨é¡¹ç›®çš„ Composer é…ç½®æ–‡ä»¶ä¸­ç¼–å†™ä¸€ä¸ªå®šåˆ¶å‘½ä»¤ã€‚

> è¯·æ³¨æ„ï¼Œæˆ‘ä»¬è°ˆè®ºçš„æ˜¯é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„æ–‡ä»¶ **composer.json** è€Œä¸æ˜¯æ–‡ä»¶å¤¹ã€å·¥å…·/php-cs-fixer *ä¸­çš„æ–‡ä»¶**ğŸ”´***

ä»”ç»†çœ‹çœ‹æ›´æ–°å‰å Composer é…ç½®æ–‡ä»¶çš„å†…å®¹:

è¦åœ¨æ‚¨çš„é¡¹ç›®ä¸­è¿è¡Œ PHP-CS-Fixerï¼Œæ‚¨å¿…é¡»ç›´æ¥ä½¿ç”¨ Composer:

```
composer cs-fix
```

æŸ¥çœ‹æˆ‘çš„ [PHP é—ç•™é¡¹ç›®](https://github.com/mickaelandrieu/legacy-php-app)çš„è¾“å‡º:

![](img/834319c3c4638f79d02d20114eee2be0.png)

ä½ å†ä¹Ÿä¸ç”¨æ‹…å¿ƒâ€œç¼–ç æ ‡å‡†â€äº†ğŸ˜‰

è¿™å°±æ˜¯ PHP-CS-Fixer çš„å°æ¼”ç¤ºï¼

# Laravel å“è„±æ˜¯ PHP-CS-Fixer å¯¹ç±»å›ºé†‡

å¦‚æœä½ æ˜¯ Laravel çš„å¼€å‘è€…ï¼Œä½ å¯èƒ½å¬è¯´è¿‡ Pintï¼Œå› ä¸º Laravel 9.0 å’Œæ›´é«˜ç‰ˆæœ¬ä» Laravel 9.0 å¼€å§‹é»˜è®¤å®‰è£…å®ƒã€‚

Pint æ˜¯å»ºç«‹åœ¨ PHP-CS-Fixer ä¹‹ä¸Šçš„ï¼Œå®ƒä½¿ç¡®ä¿æ‚¨çš„ä»£ç é£æ ¼ä¿æŒå¹²å‡€å’Œä¸€è‡´å˜å¾—ç®€å•ã€‚

> é»˜è®¤æƒ…å†µä¸‹ï¼ŒPint ä¸éœ€è¦ä»»ä½•é…ç½®ï¼Œå¹¶ä¼šé€šè¿‡éµå¾ª Laravel çš„**å›ºæ‰§å·±è§çš„ç¼–ç é£æ ¼æ¥ä¿®å¤æ‚¨ä»£ç ä¸­çš„ä»£ç é£æ ¼é—®é¢˜ã€‚**

## å®‰è£… Laravel Pint å¹¶å¼€å§‹ä¿®å¤æ‚¨çš„ä»£ç 

æ‚¨é€šè¿‡ Composer å®‰è£… Laravel Pint:

æ‚¨å¯ä»¥é€šè¿‡è°ƒç”¨é¡¹ç›®çš„ **vendor/bin** ç›®å½•ä¸­çš„`pint`äºŒè¿›åˆ¶æ–‡ä»¶æ¥æŒ‡ç¤º Pint ä¿®å¤ä»£ç é£æ ¼é—®é¢˜:

> ä½œä¸º PHP-CS-Fixerï¼Œé»˜è®¤æƒ…å†µä¸‹ä¼šå¿½ç•¥**ä¾›åº”å•†**æ–‡ä»¶å¤¹

æŸ¥çœ‹æˆ‘çš„ PHP é—ç•™é¡¹ç›®çš„è¾“å‡º:

![](img/8a1d233bd69e1ca24b116d714a8dbe98.png)

*   UI æ¯” PHP-CS-Fixer æ›´æ¼‚äº®ï¼Œå¯¹ Pint æ›´æœ‰å¸®åŠ©ï¼›
*   ä½ ä¸éœ€è¦è®°ä½ä»»ä½•å¤æ‚çš„å‘½ä»¤ï¼›

å¦‚æœæ‚¨å¸Œæœ›çœ‹åˆ° Pint å®Œæˆçš„ä¿®å¤ï¼Œè€Œä¸å°†å®ƒä»¬åº”ç”¨åˆ°æ‚¨çš„æ–‡ä»¶ä¸­ï¼Œæ‚¨å¿…é¡»ä½¿ç”¨å‚æ•°" **test** "æ¥å®Œæˆæ‚¨çš„æŒ‡ä»¤:

å¯¹äºä»¥ä¸‹è¾“å‡º:

![](img/29ac8ddf73a9cb76789eb5e922853a23.png)

## å¦‚ä½•ä¸º Symfony é¡¹ç›®é…ç½® Laravel Pint

å¦‚æœä½ æƒ³åœ¨ Symfony é¡¹ç›®ä¸Šä½¿ç”¨ Pint æˆ–è€…é…ç½®åº”ç”¨äºä½ çš„é¡¹ç›®çš„è§„åˆ™åˆ—è¡¨ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿ

æ‚¨å¯ä»¥åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º **pint.json** çš„æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹:

Pint ç›®å‰æ”¯æŒçš„é¢„ç½®æœ‰:`laravel`ã€`psr12`å’Œ`symfony`ã€‚

> ç°åœ¨æ˜¯æ—¶å€™åœ¨ä½ çš„ PHP é¡¹ç›®ä¸Šå®‰è£…ä½ æœ€å–œæ¬¢çš„å·¥å…·ï¼Œå½»åº•è§£å†³ä»£ç é£æ ¼çš„é—®é¢˜äº† *âœ…*

å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œ[å…³æ³¨æˆ‘](https://medium.com/@mickael-andrieu/)ï¼Œæˆ‘ä¼šåœ¨ä»¥åçš„æ–‡ç« å‘å¸ƒæ—¶é€šçŸ¥ä½ ï¼

[](https://medium.com/@mickael-andrieu/membership) [## é€šè¿‡æˆ‘çš„æ¨èé“¾æ¥åŠ å…¥ Medium-mickal Andrieu

### ä½œä¸ºä¸€ä¸ªåª’ä½“ä¼šå‘˜ï¼Œä½ çš„ä¼šå‘˜è´¹çš„ä¸€éƒ¨åˆ†ä¼šç»™ä½ é˜…è¯»çš„ä½œå®¶ï¼Œä½ å¯ä»¥å®Œå…¨æ¥è§¦åˆ°æ¯ä¸€ä¸ªæ•…äº‹â€¦

medium.com](https://medium.com/@mickael-andrieu/membership)