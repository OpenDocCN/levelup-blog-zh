<html>
<head>
<title>Angular — Routing Basics</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">角度-布线基础</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/angular-routing-basics-30f9c9e19d29?source=collection_archive---------8-----------------------#2021-01-14">https://levelup.gitconnected.com/angular-routing-basics-30f9c9e19d29?source=collection_archive---------8-----------------------#2021-01-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/f9ad503f6f11ce50e6b877835466070c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*XNKHbNlb8bwXw0JD"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">照片由<a class="ae kf" href="https://unsplash.com/@diegojimenez?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">迭戈·希门尼斯</a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="6700" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这篇文章中，我们将看看如何添加路由到我们的角度应用程序。</p><h1 id="45d6" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">带角度的布线</h1><p id="92fa" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">当我们转到某个URL时，我们需要路由来加载组件。</p><p id="8cb7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要创建启用路由的应用程序，我们运行:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="5608" class="mq lf it mm b gy mr ms l mt mu">ng new routing-app --routing</span></pre><p id="1d83" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">路线将相对于基本路径进行定义，基本路径设置为<code class="fe mv mw mx mm b">base</code>标签的<code class="fe mv mw mx mm b">href</code>值。</p><p id="ef43" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">首先，我们创建一些想要映射URL的组件。</p><p id="5a73" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为此，我们运行:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="2506" class="mq lf it mm b gy mr ms l mt mu">ng generate component first<br/>ng generate component second</span></pre><p id="927e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在<code class="fe mv mw mx mm b">app.module.ts</code>，我们应该有<code class="fe mv mw mx mm b">AppRoutingModule</code>:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="ceef" class="mq lf it mm b gy mr ms l mt mu">import { BrowserModule } from '@angular/platform-browser';<br/>import { NgModule } from '@angular/core';</span><span id="9443" class="mq lf it mm b gy my ms l mt mu">import { AppRoutingModule } from './app-routing.module';<br/>import { AppComponent } from './app.component';<br/>import { FirstComponent } from './first/first.component';<br/>import { SecondComponent } from './second/second.component';</span><span id="acc0" class="mq lf it mm b gy my ms l mt mu">@NgModule({<br/>  declarations: [<br/>    AppComponent,<br/>    FirstComponent,<br/>    SecondComponent<br/>  ],<br/>  imports: [<br/>    BrowserModule,<br/>    AppRoutingModule<br/>  ],<br/>  providers: [],<br/>  bootstrap: [AppComponent]<br/>})<br/>export class AppModule { }</span></pre><p id="373e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">那么在<code class="fe mv mw mx mm b">app-routing.module.ts</code>中，我们应该有:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="df45" class="mq lf it mm b gy mr ms l mt mu">import { NgModule } from '@angular/core';<br/>import { Routes, RouterModule } from '@angular/router';</span><span id="a084" class="mq lf it mm b gy my ms l mt mu">const routes: Routes = [];</span><span id="2eaf" class="mq lf it mm b gy my ms l mt mu">@NgModule({<br/>  imports: [RouterModule.forRoot(routes)],<br/>  exports: [RouterModule]<br/>})<br/>export class AppRoutingModule { }</span></pre><p id="304d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在我们可以定义路线了。</p><p id="a068" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为此，我们写道:</p><p id="6ad9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mv mw mx mm b">app-routing.module.ts</code></p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="4ea9" class="mq lf it mm b gy mr ms l mt mu">import { NgModule } from '@angular/core';<br/>import { Routes, RouterModule } from '@angular/router';<br/>import { FirstComponent } from './first/first.component';<br/>import { SecondComponent } from './second/second.component';</span><span id="35a7" class="mq lf it mm b gy my ms l mt mu">const routes: Routes = [<br/>  { path: 'first-component', component: FirstComponent },<br/>  { path: 'second-component', component: SecondComponent },<br/>];</span><span id="5af8" class="mq lf it mm b gy my ms l mt mu">@NgModule({<br/>  imports: [RouterModule.forRoot(routes)],<br/>  exports: [RouterModule]<br/>})<br/>export class AppRoutingModule { }</span></pre><p id="f1a4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后在<code class="fe mv mw mx mm b">app.coomponent.html</code>中，我们写道:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="4941" class="mq lf it mm b gy mr ms l mt mu">&lt;nav&gt;<br/>  &lt;ul&gt;<br/>    &lt;li&gt;&lt;a routerLink="/first-component" routerLinkActive="active"&gt;First<br/>        Component&lt;/a&gt;&lt;/li&gt;<br/>    &lt;li&gt;&lt;a routerLink="/second-component" routerLinkActive="active"&gt;Second<br/>        Component&lt;/a&gt;&lt;/li&gt;<br/>  &lt;/ul&gt;<br/>&lt;/nav&gt;<br/>&lt;router-outlet&gt;&lt;/router-outlet&gt;</span></pre><p id="25b7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当我们点击链接时,<code class="fe mv mw mx mm b">routerLink</code>属性有我们想要访问的路线的路径。</p><p id="c2eb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mv mw mx mm b">routerLink</code>激活设置变量，用于设置链接是否激活。</p><h1 id="a71e" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">获取路线信息</h1><p id="87e6" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">为了获得路由数据，我们可以调用<code class="fe mv mw mx mm b">this.route.queryParams.subscribe</code>方法来获得查询字符串键值对。</p><p id="70f7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如在<code class="fe mv mw mx mm b">app.component.ts</code>中，我们可以这样写:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="0b04" class="mq lf it mm b gy mr ms l mt mu">import { Component } from '@angular/core';<br/>import { ActivatedRoute } from '@angular/router';</span><span id="b657" class="mq lf it mm b gy my ms l mt mu">@Component({<br/>  selector: 'app-root',<br/>  templateUrl: './app.component.html',<br/>  styleUrls: ['./app.component.css']<br/>})<br/>export class AppComponent {<br/>  title = 'angular-example';<br/>  constructor(<br/>    private route: ActivatedRoute,<br/>  ) { }</span><span id="478c" class="mq lf it mm b gy my ms l mt mu">  name: string;</span><span id="a894" class="mq lf it mm b gy my ms l mt mu">  ngOnInit() {<br/>    this.route.queryParams.subscribe(params =&gt; {<br/>      this.name = params['name'];<br/>      console.log(this.name)<br/>    });<br/>  }<br/>}</span></pre><p id="13d5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们注入<code class="fe mv mw mx mm b">route</code>依赖项，然后调用<code class="fe mv mw mx mm b">ngOnInit</code>中的<code class="fe mv mw mx mm b">subscribe</code>方法，以便在加载组件时观察查询参数的变化。</p><p id="f37b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们从<code class="fe mv mw mx mm b">params</code>参数中获得查询参数。</p><p id="b8c0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当我们转到<code class="fe mv mw mx mm b">http://localhost:4200/first-component?name=foo</code>时，我们从<code class="fe mv mw mx mm b">name</code>查询参数中获得<code class="fe mv mw mx mm b">'foo'</code>。</p><h1 id="2de9" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">通配符路由</h1><p id="ba02" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以使用<code class="fe mv mw mx mm b">'**'</code>字符串定义通配符路由:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="de78" class="mq lf it mm b gy mr ms l mt mu">import { NgModule } from '@angular/core';<br/>import { Routes, RouterModule } from '@angular/router';<br/>import { FirstComponent } from './first/first.component';<br/>import { PageNotFoundComponent } from './page-not-found/page-not-found.component';<br/>import { SecondComponent } from './second/second.component';</span><span id="bb1a" class="mq lf it mm b gy my ms l mt mu">const routes: Routes = [<br/>  { path: 'first-component', component: FirstComponent },<br/>  { path: 'second-component', component: SecondComponent },<br/>  { path: '**', component: PageNotFoundComponent },<br/>];</span><span id="56ae" class="mq lf it mm b gy my ms l mt mu">@NgModule({<br/>  imports: [RouterModule.forRoot(routes)],<br/>  exports: [RouterModule]<br/>})<br/>export class AppRoutingModule { }</span></pre><p id="e0fc" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">所以现在如果我们去除了<code class="fe mv mw mx mm b">first-component</code>或<code class="fe mv mw mx mm b">second-component</code>之外的任何URL，角度加载<code class="fe mv mw mx mm b">PageNotFoundComponent</code>。</p><h1 id="9bde" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">结论</h1><p id="0c60" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以使用路由模块添加带角度的路由。</p></div></div>    
</body>
</html>