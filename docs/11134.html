<html>
<head>
<title>Python Data Anonymization &amp; Masking Guide</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python数据匿名和屏蔽指南</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/python-data-anonymization-masking-guide-de0b0aa0ca82?source=collection_archive---------2-----------------------#2022-02-18">https://levelup.gitconnected.com/python-data-anonymization-masking-guide-de0b0aa0ca82?source=collection_archive---------2-----------------------#2022-02-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="fedf" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">向世界公开你的私人数据</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/d98ddcbd0e3181b5dc8377503e07ae26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Zrkb2LkGuaIysSgUwfLRng.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://c1.wallpaperflare.com/preview/176/830/383/classified-background-blog-business.jpg" rel="noopener ugc nofollow" target="_blank">https://C1 . wallpaperflare . com/preview/176/830/383/classified-background-blog-business . jpg</a></figcaption></figure><p id="5394" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们生活在一个充满数据的世界。而且大部分时间数据都是个人的、敏感的。我们每天都要面对各种各样的数据，通常我们的客户不希望与第三方共享他们的私人数据。但是如果他们想雇一个自由职业者或者外包公司呢？他们如何能够自由地传递数据，同时又不担心潜在的数据泄露？这就是数据匿名/数据屏蔽的用武之地。</p><p id="bf82" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">简而言之，数据匿名化是一个置换数据的过程，以至于我们再也无法知道数据指的是谁。根据最终目标，我们可能还希望匿名化不会影响数据及其统计属性中可能的洞察力。为了实现这一点，我们必须彻底了解我们的数据，我们正在应用的技术，以及我们希望保留什么属性。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lv"><img src="../Images/796cdfffa221d4ab32c406b283f1bf6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RqPmqgiqH7bgCSmg1G_KWg.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://www.wallpaperflare.com/classified-background-blog-business-communication-data-wallpaper-ulpvz" rel="noopener ugc nofollow" target="_blank">https://www . wallpaperflare . com/classified-background-blog-business-communication-data-wallpaper-ulp vz</a></figcaption></figure><p id="7952" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们为数据匿名化开发了一个简单但功能丰富的Python库——anonympy。Anonympy是一个用于数据匿名和屏蔽的通用工具包，目前，它为表格和图像匿名提供了许多功能。它利用了pandas的效率并封装了现有的库，如Faker。我们的目标是尽可能直观地实现数据匿名和屏蔽。让我们看看它是如何工作的。</p><h2 id="9adc" class="lw lx it bd ly lz ma dn mb mc md dp me li mf mg mh lm mi mj mk lq ml mm mn mo bi translated">匿名化数据集</h2><p id="4827" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li mr lk ll lm ms lo lp lq mt ls lt lu im bi translated">作为一个例子，让我们匿名化一个数据集— <a class="ae ky" href="https://www.briandunning.com/sample-data/" rel="noopener ugc nofollow" target="_blank"> uk-500.csv </a>。</p><p id="b9e9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们加载数据集，看看我们有什么样的数据。</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="6a7b" class="lw lx it mv b gy mz na l nb nc">import pandas as pd</span><span id="3520" class="lw lx it mv b gy nd na l nb nc">url = r'https://raw.githubusercontent.com/ArtLabss/open-data-anonimizer/0287f675a535101f145cb975baf361a96ff71ed3/examples/files/new.csv'<br/>df = pd.read_csv(url, parse_dates=['birthdate'])<br/>df.head()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi gj"><img src="../Images/317d6d0ae5b723b48e7b2ffe8c75e176.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J-1LWG_k2rRhClLjSxYDzQ.png"/></div></div></figure><p id="5e75" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过查看这些列，我们看到所有列都包含一些敏感信息。很好，这意味着我们将不得不对所有的列进行匿名化，并且能够展示anonympy包的所有功能。</p><p id="0995" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们先从安装anonympy库开始。这可以分两步完成:</p><blockquote class="ne nf ng"><p id="1c6a" class="kz la nh lb b lc ld ju le lf lg jx lh ni lj lk ll nj ln lo lp nk lr ls lt lu im bi translated">pip安装匿名<strong class="lb iu"> <br/> </strong> pip安装cape-privacy-no-deps</p></blockquote><p id="342a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在应用任何转换之前，了解列的类型是很重要的。让我们检查一下数据类型，看看有哪些方法可供我们使用。</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="878f" class="lw lx it mv b gy mz na l nb nc">from anonympy.pandas import dfAnonymizer<br/>from anonympy.pandas.utils import available_methods</span><span id="e400" class="lw lx it mv b gy nd na l nb nc">anonym = dfAnonymizer(df)</span><span id="9054" class="lw lx it mv b gy nd na l nb nc">print('Numeric columns', anonym.numeric_columns)<br/>print('Categorical columns', anonym.categorical_columns)<br/>print('Date columns', anonym.datetime_columns)</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/752e32e10cbaaf032c2c41cabae04253.png" data-original-src="https://miro.medium.com/v2/resize:fit:1298/format:webp/1*tk-WOAtbn5uKi5lQdT97MA.png"/></div></figure><p id="cf55" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们来看看表匿名化有哪些方法。</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="ff6c" class="lw lx it mv b gy mz na l nb nc">available_methods()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/461b368cbec241ac663b8ba248307e78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1056/format:webp/1*ynscz16cnLcGXvq9gX9SrQ.png"/></div></figure><p id="f16e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用可用方法的列表，我们现在可以开始应用转换了。让我们给<strong class="lb iu"><em class="nh"/></strong>列添加一些随机噪声，对<strong class="lb iu"> <em class="nh">工资</em> </strong>中的值进行四舍五入，并部分屏蔽<strong class="lb iu"> <em class="nh">电子邮件</em> </strong>列。</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="3565" class="lw lx it mv b gy mz na l nb nc">anonym.numeric_noise('age')  <br/>anonym.numeric_rounding('salary')<br/>anonym.categorical_email_masking('email')</span></pre><p id="6449" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要查看这些变化，我们可以调用<em class="nh"> to_df() </em>，或者调用<em class="nh"> info() </em>方法进行简单总结。</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="0109" class="lw lx it mv b gy mz na l nb nc">anonym.info()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/cbc8f4810daefb4c11e7502a4f8ec5e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:978/format:webp/1*h0Z7SS6ji_D1vSu0LxIlQA.png"/></div></figure><p id="cb4b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一个好的选择是用假名字替换<strong class="lb iu"> <em class="nh"> first_name </em> </strong>列中的名字。为此，我们必须检查Faker是否有相应的方法。</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="c641" class="lw lx it mv b gy mz na l nb nc">from anonympy.pandas.utils import fake_methods<br/>fake_methods('f') # args: None / 'all' / any letter</span></pre><p id="91ad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Faker有一个叫做<em class="nh"> first_name </em>的方法，让我们来置换列。</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="c7a6" class="lw lx it mv b gy mz na l nb nc"># if we wanted a different method use a dictionary {column_name:method_name}<br/># anonym.categorical_fake({'first_name': 'first_name_female'}</span><span id="de22" class="lw lx it mv b gy nd na l nb nc">anonym.categorical_fake('first_name')</span></pre><p id="af73" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">检查其他列名的<em class="nh"> fake_methods </em>原来，Faker还有<strong class="lb iu"> <em class="nh">地址</em> </strong>和<strong class="lb iu"> <em class="nh">城市</em> </strong>的方法。<strong class="lb iu"> <em class="nh"> web </em> </strong>列可以用<strong class="lb iu"> <em class="nh"> url </em> </strong>方法代替，<strong class="lb iu"> <em class="nh"> phone </em> </strong>用<strong class="lb iu"> <em class="nh"> phone_number </em> </strong>代替。</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="1a62" class="lw lx it mv b gy mz na l nb nc"># this will change `address` and `city` because column names correspond to the method names<br/>anonym.categorical_fake_auto()<br/>anonym.categorical_fake({'web': 'url', 'phone': 'phone_number'})</span></pre><p id="4ae9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">需要匿名的最后一列是<strong class="lb iu"> <em class="nh">生日</em> </strong>。因为我们有包含相同信息的<strong class="lb iu"> <em class="nh"> age </em> </strong>列，所以我们可以使用<em class="nh">column _ suppression</em>方法删除该列。然而，为了清楚起见，让我们添加一些噪声。</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="554a" class="lw lx it mv b gy mz na l nb nc">anonym.datetime_noise('birthdate')</span></pre><p id="a16d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就是这样。让我们来看看我们新的匿名数据集！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/9ff71559292154ab8d9e2fd0a70a6bb2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ADtIMtUSvBNhqryWseFwsg.png"/></div></div></figure><h2 id="00bc" class="lw lx it bd ly lz ma dn mb mc md dp me li mf mg mh lm mi mj mk lq ml mm mn mo bi translated">摘要</h2><p id="40d9" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li mr lk ll lm ms lo lp lq mt ls lt lu im bi translated">数据隐私和保护是数据处理的一个重要部分，应该给予适当的关注。因此，在ArtLabs，我们决定为这个用例创建一个方便的工具。您可能还想查看我们的图像匿名指南<a class="ae ky" href="https://github.com/ArtLabss/open-data-anonymizer" rel="noopener ugc nofollow" target="_blank">这里</a>和我们的Google Colab表格数据匿名<a class="ae ky" href="https://colab.research.google.com/drive/1wg4g4xWTSLvThYHYLKDIKSJEC4ChQHaM?usp=sharing" rel="noopener ugc nofollow" target="_blank">这里</a>。我们也欢迎任何对我们的<a class="ae ky" href="https://github.com/ArtLabss/open-data-anonymizer" rel="noopener ugc nofollow" target="_blank">匿名开源库</a>的贡献！</p><p id="8d44" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">特别感谢<a class="ae ky" href="https://www.linkedin.com/in/shukkkur" rel="noopener ugc nofollow" target="_blank">中亚大学计算机科学专业学生、ArtLabs机器学习实习生shakhanso Sabzaliev</a>对本帖和anonympy开源知识库的贡献！</p></div></div>    
</body>
</html>