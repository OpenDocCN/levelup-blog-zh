<html>
<head>
<title>Introduction to state management with Ngrx and Angular</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Ngrx和Angular状态管理简介</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/introduction-to-state-management-with-ngrx-and-angular-91f4ff27ec9f?source=collection_archive---------1-----------------------#2021-05-31">https://levelup.gitconnected.com/introduction-to-state-management-with-ngrx-and-angular-91f4ff27ec9f?source=collection_archive---------1-----------------------#2021-05-31</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/ce5965b8cd6229f59b2b2114dcff06ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yhI5ls0S0xpS6yojTXNchQ.png"/></div></div></figure><h1 id="fefe" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">什么是国家管理📝</h1><p id="86e6" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">在定义状态管理之前，让我们定义什么是状态</p><p id="0abf" class="pw-post-body-paragraph kz la it lb b lc lx le lf lg ly li lj lk lz lm ln lo ma lq lr ls mb lu lv lw im bi translated">"一个状态是一个系统在给定时间内的<strong class="lb iu">表示."</strong></p><p id="c808" class="pw-post-body-paragraph kz la it lb b lc lx le lf lg ly li lj lk lz lm ln lo ma lq lr ls mb lu lv lw im bi translated">对于前端应用，状态可以是:</p><h2 id="c780" class="mc kc it bd kd md me dn kh mf mg dp kl lk mh mi kp lo mj mk kt ls ml mm kx mn bi translated">状态类型📰</h2><ul class=""><li id="e8cb" class="mo mp it lb b lc ld lg lh lk mq lo mr ls ms lw mt mu mv mw bi translated"><strong class="lb iu">导航状态:</strong>当前用户和带有当前参数的当前路线在哪里？</li><li id="ef3b" class="mo mp it lb b lc mx lg my lk mz lo na ls nb lw mt mu mv mw bi translated"><strong class="lb iu"> UI状态</strong>:模态是否打开，按钮提交是否开启等...</li><li id="2d7a" class="mo mp it lb b lc mx lg my lk mz lo na ls nb lw mt mu mv mw bi translated"><strong class="lb iu">应用程序状态</strong>:可以被应用程序的不同部分调用的状态，比如<strong class="lb iu">当前用户是否登录</strong></li><li id="768e" class="mo mp it lb b lc mx lg my lk mz lo na ls nb lw mt mu mv mw bi translated"><strong class="lb iu">网络状态:</strong>当前是否有从API获取数据的进程</li><li id="d53c" class="mo mp it lb b lc mx lg my lk mz lo na ls nb lw mt mu mv mw bi translated"><strong class="lb iu">通信状态</strong>:描述对其他服务器请求的值(如“加载”值)</li></ul><h2 id="fdcc" class="mc kc it bd kd md me dn kh mf mg dp kl lk mh mi kp lo mj mk kt ls ml mm kx mn bi translated">状态管理📰：</h2><p id="bc45" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated"><strong class="lb iu">问题</strong> ❌ <strong class="lb iu"> : </strong></p><p id="891d" class="pw-post-body-paragraph kz la it lb b lc lx le lf lg ly li lj lk lz lm ln lo ma lq lr ls mb lu lv lw im bi translated"><strong class="lb iu">如今，</strong> web应用程序的复杂性正在增长，结果<strong class="lb iu">管理像</strong>(在组件间共享<strong class="lb iu">数据、</strong>、<strong class="lb iu">用户动作、UI状态</strong>等)<strong class="lb iu">这样的任务</strong>变得很难</p><figure class="nd ne nf ng gt ju gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/ef1a2af807110ba0577f83e67df4cdc9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/1*6rPWJV2ndmFCSPdi4fTKPw.gif"/></div></figure><h2 id="326b" class="mc kc it bd kd md me dn kh mf mg dp kl lk mh mi kp lo mj mk kt ls ml mm kx mn bi translated">解决方案:</h2><p id="5389" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">定义一种方法，该方法负责定义跨所有应用程序的全局状态，并对该状态进行操作(添加、删除、更改等)..)并促进跨组件的通信和数据共享</p><h1 id="afe5" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">国家管理的好处🔥 💥：</h1><p id="99d4" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">将状态管理模式应用到您的前端应用程序可以提供许多优势和好处:</p><ul class=""><li id="e19f" class="mo mp it lb b lc lx lg ly lk nh lo ni ls nj lw mt mu mv mw bi translated"><strong class="lb iu">集中状态</strong>:存储中的状态保存在一个目录中。这使得预测商店的更新或变化以及追踪问题(单一来源的事实)变得更加容易✔️</li><li id="0025" class="mo mp it lb b lc mx lg my lk mz lo na ls nb lw mt mu mv mw bi translated"><strong class="lb iu">性能</strong>(数据单向流动)✔️</li><li id="0c75" class="mo mp it lb b lc mx lg my lk mz lo na ls nb lw mt mu mv mw bi translated">应用程序变得<strong class="lb iu">更容易测试</strong>(更有条理，状态表示易于阅读，数据可在我们需要it)✔️时随时访问</li><li id="5fa4" class="mo mp it lb b lc mx lg my lk mz lo na ls nb lw mt mu mv mw bi translated"><strong class="lb iu">调试更容易</strong> ✔️</li><li id="c410" class="mo mp it lb b lc mx lg my lk mz lo na ls nb lw mt mu mv mw bi translated">自动与<strong class="lb iu">本地存储器</strong>同步。这使您可以在刷新✔️页面时保留数据</li><li id="0809" class="mo mp it lb b lc mx lg my lk mz lo na ls nb lw mt mu mv mw bi translated"><strong class="lb iu">避免</strong>大量不必要的API调用✔️</li></ul><h1 id="de34" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">状态管理的用例:💶 💶</h1><p id="ed65" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">在我们的应用程序中，有一些需要应用状态管理架构的常见情况，例如:</p><ul class=""><li id="06d0" class="mo mp it lb b lc lx lg ly lk nh lo ni ls nj lw mt mu mv mw bi translated">存在需要在多个组件中访问/共享的变量(获取当前用户)</li><li id="e5c4" class="mo mp it lb b lc mx lg my lk mz lo na ls nb lw mt mu mv mw bi translated">创建/更新数据后更新页面而不刷新</li><li id="1446" class="mo mp it lb b lc mx lg my lk mz lo na ls nb lw mt mu mv mw bi translated">整个应用程序的Ui全局主题变化(黑暗模式示例)</li></ul><h1 id="cd0d" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">在没有状态管理的情况下，数据如何通过角度❓流动</h1><figure class="nd ne nf ng gt ju gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/7b89971fc40c337299359a3e54c074c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:636/format:webp/1*uMzkVvQNy6tXl76oTckTYw.png"/></div></figure><p id="e5c9" class="pw-post-body-paragraph kz la it lb b lc lx le lf lg ly li lj lk lz lm ln lo ma lq lr ls mb lu lv lw im bi translated">对于Angular项目，一个常用的解决方案是通过服务共享数据，功能的数量增加了，服务的数量也增加了，这会给数据管理和项目维护带来一些困难！</p><p id="fbe8" class="pw-post-body-paragraph kz la it lb b lc lx le lf lg ly li lj lk lz lm ln lo ma lq lr ls mb lu lv lw im bi translated">正如下图中提到的，没有状态管理解决方案，数据无处不在，我们没有数据的<strong class="lb iu">单一来源</strong>，项目看起来很难维护。🙏🏻 🙏🏻 🙏🏻</p><figure class="nd ne nf ng gt ju gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/cab8a8f943821ea794d234ac3271cdc7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QoOjrEZIzQtYcyIaJ5iFeQ.png"/></div></figure><h1 id="fab8" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">使用角度✒️ ✂️:进行状态管理的可用工具</h1><p id="c012" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">有一些流行的工具可以为我们的Angular应用程序进行状态管理</p><h1 id="1160" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">☝️本地Rxjs:</h1><p id="6a6b" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">我们可以通过使用简单的<strong class="lb iu"> Rxjs </strong>操作符，如<strong class="lb iu"> BehaviorSubject </strong>来保存状态，使用<strong class="lb iu"> pipeable操作符</strong>来修改状态，从而在应用程序的不同部分之间共享数据。</p><figure class="nd ne nf ng gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nm"><img src="../Images/94216edcce048ba114887dd69814025b.png" data-original-src="https://miro.medium.com/v2/resize:fit:822/format:webp/1*HpY2uRlAnSaR-d7pc-H_7g.png"/></div></div></figure><h1 id="8105" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">秋田↖️:</h1><blockquote class="nn no np"><p id="24c3" class="kz la nq lb b lc lx le lf lg ly li lj nr lz lm ln ns ma lq lr nt mb lu lv lw im bi translated"><a class="ae nu" href="https://datorama.github.io/akita/" rel="noopener ugc nofollow" target="_blank"> Akita是一种建立在RxJS之上的状态管理模式，它采用Flux中的多个数据存储和Redux中的不可变更新的概念，以及流数据的概念，来创建可观察的数据存储模型。</a></p></blockquote><figure class="nd ne nf ng gt ju gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/b313191e9eb4df5e693ed27541e440c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:972/format:webp/1*WFEIlT9GykD3kTdepMtnGQ.png"/></div></figure><h1 id="2ebb" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">NGXS ⚓:</h1><blockquote class="nn no np"><p id="e796" class="kz la nq lb b lc lx le lf lg ly li lj nr lz lm ln ns ma lq lr nt mb lu lv lw im bi translated">NGXS模仿了在Redux和NGRX等库中普遍实现的CQRS模式，但通过使用现代的类型脚本特性(如classes和decorato   <em class="it"> rs)减少了样板文件。</em></p></blockquote><figure class="nd ne nf ng gt ju gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/464c94cbfc9e8f8dbd132d9088edb919.png" data-original-src="https://miro.medium.com/v2/resize:fit:884/format:webp/1*rNHu-ER5ei9FhfDzU4InCw.png"/></div></figure><h1 id="3fa3" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">Ngrx ✈️ ✈️:</h1><figure class="nd ne nf ng gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nx"><img src="../Images/122ca0ad884dbd000683ba889694089f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kQpngyYCbcdjCzrO8pdgsQ.png"/></div></div></figure><h2 id="ae98" class="mc kc it bd kd md me dn kh mf mg dp kl lk mh mi kp lo mj mk kt ls ml mm kx mn bi translated">Ngrx是什么？</h2><p id="e8aa" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">Ngrx是一组用于反应式扩展的角度库，它实现了Redux模式，并且通过<strong class="lb iu"> RXJS </strong>得到了增强</p><p id="2329" class="pw-post-body-paragraph kz la it lb b lc lx le lf lg ly li lj lk lz lm ln lo ma lq lr ls mb lu lv lw im bi translated">它为Angular应用程序的状态管理提供了一个解决方案</p><p id="858f" class="pw-post-body-paragraph kz la it lb b lc lx le lf lg ly li lj lk lz lm ln lo ma lq lr ls mb lu lv lw im bi translated">是由Rxjs超级大国(<code class="fe ny nz oa ob b">RxJS</code>)打造的。<code class="fe ny nz oa ob b">BehaviorSubject</code>、<code class="fe ny nz oa ob b">Subject</code>和<code class="fe ny nz oa ob b">Observable)</code></p><h2 id="5ac2" class="mc kc it bd kd md me dn kh mf mg dp kl lk mh mi kp lo mj mk kt ls ml mm kx mn bi translated">为什么我们会选择Ngrx ⁉️</h2><p id="ca3b" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">老实说，<strong class="lb iu"> Ngrx </strong>是用于状态管理的最著名的库，我没有结合其他工具来做一些深入的技术比较</p><p id="7558" class="pw-post-body-paragraph kz la it lb b lc lx le lf lg ly li lj lk lz lm ln lo ma lq lr ls mb lu lv lw im bi translated">所以作为一个初学者和博客的标题说“简介<strong class="lb iu"> Ngrx </strong></p><h2 id="cd94" class="mc kc it bd kd md me dn kh mf mg dp kl lk mh mi kp lo mj mk kt ls ml mm kx mn bi translated">Ngrx核心概念:</h2><figure class="nd ne nf ng gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi oc"><img src="../Images/8d140abd2ef1203a7024a8de42183a88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iOC2HaKvG4mb7LwbdxvrFg.png"/></div></div><figcaption class="od oe gj gh gi of og bd b be z dk translated">来源:<a class="ae nu" href="https://ngrx.io/guide/store" rel="noopener ugc nofollow" target="_blank">https://ngrx.io/guide/store</a></figcaption></figure><h2 id="fb55" class="mc kc it bd kd md me dn kh mf mg dp kl lk mh mi kp lo mj mk kt ls ml mm kx mn bi translated">商店:</h2><figure class="nd ne nf ng gt ju gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/ca041f7bfeb6fb2caf41d18101817f00.png" data-original-src="https://miro.medium.com/v2/resize:fit:128/format:webp/1*VbZk4Vt5jGpRLD__Wyt3sw.png"/></div></figure><p id="6555" class="pw-post-body-paragraph kz la it lb b lc lx le lf lg ly li lj lk lz lm ln lo ma lq lr ls mb lu lv lw im bi translated">商店是我们前端应用程序的数据库</p><p id="7ee1" class="pw-post-body-paragraph kz la it lb b lc lx le lf lg ly li lj lk lz lm ln lo ma lq lr ls mb lu lv lw im bi translated">它将不同状态的所有应用组合在一个实体中，我们称之为单一的真理来源，并且是不可变的</p><h2 id="eaa7" class="mc kc it bd kd md me dn kh mf mg dp kl lk mh mi kp lo mj mk kt ls ml mm kx mn bi translated">状态:</h2><p id="6e3e" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">状态呈现了彩妆店的数据结构，以及数据库中的字段！</p><p id="c1e8" class="pw-post-body-paragraph kz la it lb b lc lx le lf lg ly li lj lk lz lm ln lo ma lq lr ls mb lu lv lw im bi translated">可以是<strong class="lb iu">服务器端API响应</strong>，用户输入，路由器状态</p><p id="8069" class="pw-post-body-paragraph kz la it lb b lc lx le lf lg ly li lj lk lz lm ln lo ma lq lr ls mb lu lv lw im bi translated">状态存在于商店的环境中</p><figure class="nd ne nf ng gt ju"><div class="bz fp l di"><div class="oi oj l"/></div></figure><h2 id="4a10" class="mc kc it bd kd md me dn kh mf mg dp kl lk mh mi kp lo mj mk kt ls ml mm kx mn bi translated">动作:</h2><figure class="nd ne nf ng gt ju gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/4aac5d999b5e56feae2ba5bf94246bed.png" data-original-src="https://miro.medium.com/v2/resize:fit:128/format:webp/1*HUKrro0ufOaSqLmTwXEn0w.png"/></div></figure><p id="9f01" class="pw-post-body-paragraph kz la it lb b lc lx le lf lg ly li lj lk lz lm ln lo ma lq lr ls mb lu lv lw im bi translated">动作表示将由用户触发以更新商店的事件，</p><p id="89cb" class="pw-post-body-paragraph kz la it lb b lc lx le lf lg ly li lj lk lz lm ln lo ma lq lr ls mb lu lv lw im bi translated">“它们代表从应用程序发送到商店的有效信息负载”</p><p id="6ca5" class="pw-post-body-paragraph kz la it lb b lc lx le lf lg ly li lj lk lz lm ln lo ma lq lr ls mb lu lv lw im bi translated">“在代码中，一个动作由一个普通的旧JavaScript对象表示，该对象有两个主要属性，即<code class="fe ny nz oa ob b">type</code>和<code class="fe ny nz oa ob b">payload</code>。<code class="fe ny nz oa ob b">payload</code></p><p id="87ad" class="pw-post-body-paragraph kz la it lb b lc lx le lf lg ly li lj lk lz lm ln lo ma lq lr ls mb lu lv lw im bi translated">一个<strong class="lb iu">动作</strong>的示例定义:</p><figure class="nd ne nf ng gt ju"><div class="bz fp l di"><div class="oi oj l"/></div></figure><p id="8bd0" class="pw-post-body-paragraph kz la it lb b lc lx le lf lg ly li lj lk lz lm ln lo ma lq lr ls mb lu lv lw im bi translated">并且应该在组件内部调用这个方法来</p><figure class="nd ne nf ng gt ju"><div class="bz fp l di"><div class="oi oj l"/></div></figure><h2 id="d15a" class="mc kc it bd kd md me dn kh mf mg dp kl lk mh mi kp lo mj mk kt ls ml mm kx mn bi translated">减速器:</h2><figure class="nd ne nf ng gt ju gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/dc38fceccec24907605bb60033f12fc6.png" data-original-src="https://miro.medium.com/v2/resize:fit:128/format:webp/1*r-dbHtBJZ7SgDb4fKyQ_5g.png"/></div></figure><p id="7379" class="pw-post-body-paragraph kz la it lb b lc lx le lf lg ly li lj lk lz lm ln lo ma lq lr ls mb lu lv lw im bi translated">如果我们可以用一个传统的数据库来替代，那么存储就是整个数据库，缩减者吃表</p><p id="d62e" class="pw-post-body-paragraph kz la it lb b lc lx le lf lg ly li lj lk lz lm ln lo ma lq lr ls mb lu lv lw im bi translated">它是一个负责改变状态的纯函数，接受两个参数:动作和前一个状态，进行修改并返回新的状态对象</p><figure class="nd ne nf ng gt ju"><div class="bz fp l di"><div class="oi oj l"/></div></figure><h2 id="398d" class="mc kc it bd kd md me dn kh mf mg dp kl lk mh mi kp lo mj mk kt ls ml mm kx mn bi translated">效果:</h2><figure class="nd ne nf ng gt ju gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/b6fcae9faa6461a127027fa8b851d235.png" data-original-src="https://miro.medium.com/v2/resize:fit:128/format:webp/1*ChV15Xor2pm6RCJ_JjYQgg.png"/></div></figure><ul class=""><li id="1c69" class="mo mp it lb b lc lx lg ly lk nh lo ni ls nj lw mt mu mv mw bi translated"><strong class="lb iu"> Effect </strong>:“一种机制，在可观察的流中监听分派的动作，处理服务器响应，并立即或异步地向reducer返回新的动作以改变状态。请注意，我们在这个示例应用程序中没有使用‘效果’。”</li></ul><p id="1f16" class="pw-post-body-paragraph kz la it lb b lc lx le lf lg ly li lj lk lz lm ln lo ma lq lr ls mb lu lv lw im bi translated">当一个动作被分派到商店时，执行副作用的效果</p><figure class="nd ne nf ng gt ju"><div class="bz fp l di"><div class="oi oj l"/></div></figure><p id="2865" class="pw-post-body-paragraph kz la it lb b lc lx le lf lg ly li lj lk lz lm ln lo ma lq lr ls mb lu lv lw im bi translated"><a class="ae nu" href="https://github.com/ngrx/platform/tree/master/docs/effects" rel="noopener ugc nofollow" target="_blank"> @ngrx/effects </a>库提供了一种将副作用隔离到自己模型中的方法</p><h2 id="0043" class="mc kc it bd kd md me dn kh mf mg dp kl lk mh mi kp lo mj mk kt ls ml mm kx mn bi translated">选择器:</h2><figure class="nd ne nf ng gt ju gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/0a89bee0240e6b6a57b6d57b01880f96.png" data-original-src="https://miro.medium.com/v2/resize:fit:128/format:webp/1*WWImu9fLumO4K7_9SOeCaA.png"/></div></figure><p id="b26f" class="pw-post-body-paragraph kz la it lb b lc lx le lf lg ly li lj lk lz lm ln lo ma lq lr ls mb lu lv lw im bi translated"><strong class="lb iu">选择器</strong>:选择器是从存储器中获取一部分状态的功能。</p><p id="be6f" class="pw-post-body-paragraph kz la it lb b lc lx le lf lg ly li lj lk lz lm ln lo ma lq lr ls mb lu lv lw im bi translated">这些是对我们商店的询问</p><p id="658b" class="pw-post-body-paragraph kz la it lb b lc lx le lf lg ly li lj lk lz lm ln lo ma lq lr ls mb lu lv lw im bi translated"><strong class="lb iu">选择器优点:</strong></p><p id="7d5f" class="pw-post-body-paragraph kz la it lb b lc lx le lf lg ly li lj lk lz lm ln lo ma lq lr ls mb lu lv lw im bi translated">选择器是一个纯粹的函数，它保存着以前执行的记忆。只要输入没有改变，就不会重新计算输出”</p><figure class="nd ne nf ng gt ju"><div class="bz fp l di"><div class="oi oj l"/></div></figure><h2 id="e876" class="mc kc it bd kd md me dn kh mf mg dp kl lk mh mi kp lo mj mk kt ls ml mm kx mn bi translated">Ngrx的缺点🚫 ❌ :</h2><ul class=""><li id="b791" class="mo mp it lb b lc ld lg lh lk mq lo mr ls ms lw mt mu mv mw bi translated">刚开始使用NgRx时的学习曲线。</li><li id="8130" class="mo mp it lb b lc mx lg my lk mz lo na ls nb lw mt mu mv mw bi translated">这个应用程序会有点冗长(介绍几个概念减少器、选择器、效果、新艺术、包大小！</li><li id="2d9b" class="mo mp it lb b lc mx lg my lk mz lo na ls nb lw mt mu mv mw bi translated">NgRx指数级地增加了代码的复杂性，带来了大量不必要的样板代码</li></ul><h1 id="9962" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">应用示例(反应用)💻：</h1><p id="0794" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">在这一部分，我将尝试向您解释一个用angular和<strong class="lb iu"> Ngrx </strong>构建的小应用程序，以掌握和操作我们在其他部分讨论过的一些理论概念</p><h2 id="47e6" class="mc kc it bd kd md me dn kh mf mg dp kl lk mh mi kp lo mj mk kt ls ml mm kx mn bi translated"><strong class="ak"> 1)使用Angular-CLI生成角度App:</strong></h2><p id="6ae4" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">第一步，我们将使用angular-CLI生成一个项目</p><pre class="nd ne nf ng gt ok ob ol om aw on bi"><span id="98fe" class="mc kc it ob b gy oo op l oq or"><strong class="ob iu">ng new ngrx-poc --style=scss --routing=false</strong></span></pre><h2 id="5a8f" class="mc kc it bd kd md me dn kh mf mg dp kl lk mh mi kp lo mj mk kt ls ml mm kx mn bi translated"><strong class="ak"> 2)使用Vscode打开您的项目:</strong></h2><p id="404b" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">只需输入代码。在您的终端中有当前的项目目录</p><pre class="nd ne nf ng gt ok ob ol om aw on bi"><span id="355d" class="mc kc it ob b gy oo op l oq or">code .</span></pre><figure class="nd ne nf ng gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi os"><img src="../Images/96b67634d77ddfcbec7294afda6e9c52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Mk6Q5jFXqYZPhU_n9B_YrQ.png"/></div></div></figure><h2 id="c7db" class="mc kc it bd kd md me dn kh mf mg dp kl lk mh mi kp lo mj mk kt ls ml mm kx mn bi translated"><strong class="ak"> 3)运行App : </strong></h2><p id="6071" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">按照这些命令运行项目</p><pre class="nd ne nf ng gt ok ob ol om aw on bi"><span id="772f" class="mc kc it ob b gy oo op l oq or"><strong class="ob iu">cd ngrx-poc</strong></span><span id="fb6b" class="mc kc it ob b gy ot op l oq or"><strong class="ob iu">npm start</strong></span></pre><h2 id="72b5" class="mc kc it bd kd md me dn kh mf mg dp kl lk mh mi kp lo mj mk kt ls ml mm kx mn bi translated"><strong class="ak"> 4)安装NgRx和工具:</strong></h2><p id="162d" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">我们需要安装<strong class="lb iu"> Ngrx依赖关系</strong>和<strong class="lb iu"> devtools </strong></p><pre class="nd ne nf ng gt ok ob ol om aw on bi"><span id="c990" class="mc kc it ob b gy oo op l oq or"><strong class="ob iu">npm install @ngrx/store --save</strong></span><span id="8dc9" class="mc kc it ob b gy ot op l oq or"><strong class="ob iu">npm install @ngrx/effects --save</strong></span><span id="8451" class="mc kc it ob b gy ot op l oq or"><strong class="ob iu">npm install @ngrx/store-devtools --save</strong></span></pre><h2 id="6f99" class="mc kc it bd kd md me dn kh mf mg dp kl lk mh mi kp lo mj mk kt ls ml mm kx mn bi translated">5)定义你的状态</h2><p id="eb32" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">我们将定义的第一件事是将在我们的应用程序中使用的存储结构</p><p id="c729" class="pw-post-body-paragraph kz la it lb b lc lx le lf lg ly li lj lk lz lm ln lo ma lq lr ls mb lu lv lw im bi translated">通过在<strong class="lb iu"> /app/store </strong>下创建文件<strong class="lb iu"> counter.state.ts </strong></p><pre class="nd ne nf ng gt ok ob ol om aw on bi"><span id="8813" class="mc kc it ob b gy oo op l oq or"><em class="nq">export</em> <em class="nq">interface</em> CounterState {</span><span id="cb8c" class="mc kc it ob b gy ot op l oq or"><em class="nq">counter:</em> number;</span><span id="0317" class="mc kc it ob b gy ot op l oq or">}</span><span id="6d0d" class="mc kc it ob b gy ot op l oq or"><em class="nq">export const initialState: CounterState = {</em></span><span id="e4de" class="mc kc it ob b gy ot op l oq or"><em class="nq">counter: 4</em></span><span id="0ddc" class="mc kc it ob b gy ot op l oq or"><em class="nq">}</em>;</span></pre><h2 id="61ea" class="mc kc it bd kd md me dn kh mf mg dp kl lk mh mi kp lo mj mk kt ls ml mm kx mn bi translated">6)定义我们的行动</h2><p id="c174" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">下一步，我们将定义可应用于商店的不同操作，</p><p id="c2f2" class="pw-post-body-paragraph kz la it lb b lc lx le lf lg ly li lj lk lz lm ln lo ma lq lr ls mb lu lv lw im bi translated">在<strong class="lb iu"> /store </strong>下创建一个文件<strong class="lb iu"> counter.actions.ts </strong></p><pre class="nd ne nf ng gt ok ob ol om aw on bi"><span id="545f" class="mc kc it ob b gy oo op l oq or"><em class="nq">import</em> { <em class="nq">createAction</em>, <em class="nq">props</em> } <em class="nq">from</em> '@ngrx/store';</span><span id="20ff" class="mc kc it ob b gy ot op l oq or"><em class="nq">export const increment = createAction(</em>'increment'<em class="nq">)</em>;</span><span id="878f" class="mc kc it ob b gy ot op l oq or"><em class="nq">export const decrement = createAction(</em>'decrement'<em class="nq">)</em>;</span><span id="af7e" class="mc kc it ob b gy ot op l oq or"><em class="nq">export const reset = createAction(</em>'reset'<em class="nq">)</em>;</span><span id="6211" class="mc kc it ob b gy ot op l oq or"><em class="nq">export const incrementAction = createAction(</em></span><span id="f489" class="mc kc it ob b gy ot op l oq or">'[Counter] Increment'<em class="nq">,</em></span><span id="0cd2" class="mc kc it ob b gy ot op l oq or"><em class="nq">props&lt;{ count: number }&gt;()</em></span><span id="e455" class="mc kc it ob b gy ot op l oq or"><em class="nq">)</em>;</span></pre><h2 id="d195" class="mc kc it bd kd md me dn kh mf mg dp kl lk mh mi kp lo mj mk kt ls ml mm kx mn bi translated">7)定义我们的减速器</h2><p id="8c37" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">在定义了我们的存储和动作之后，让我们准备reducer函数负责更新存储的元素</p><pre class="nd ne nf ng gt ok ob ol om aw on bi"><span id="5a3c" class="mc kc it ob b gy oo op l oq or"><em class="nq">import</em> { <em class="nq">Action</em>, <em class="nq">createReducer</em>, <em class="nq">on</em>, <em class="nq">State</em> } <em class="nq">from</em> '@ngrx/store';</span><span id="5621" class="mc kc it ob b gy ot op l oq or"><em class="nq">import</em> { <em class="nq">CounterState</em>, <em class="nq">initialState</em> } <em class="nq">from</em> './counter.state';</span><span id="9726" class="mc kc it ob b gy ot op l oq or"><em class="nq">import</em> * <em class="nq">as</em> <em class="nq">CounterActions</em> <em class="nq">from</em> './counter.actions';</span><span id="edae" class="mc kc it ob b gy ot op l oq or"><em class="nq">const counterReducer = createReducer(</em></span><span id="c242" class="mc kc it ob b gy ot op l oq or"><em class="nq">initialState,</em></span><span id="7481" class="mc kc it ob b gy ot op l oq or"><em class="nq">on(CounterActions.increment, (</em>state<em class="nq">) =&gt; {</em></span><span id="e848" class="mc kc it ob b gy ot op l oq or"><em class="nq">return {</em></span><span id="8c0a" class="mc kc it ob b gy ot op l oq or"><em class="nq">...state,</em></span><span id="d1f0" class="mc kc it ob b gy ot op l oq or"><em class="nq">counter: state.counter + 2,</em></span><span id="4e84" class="mc kc it ob b gy ot op l oq or"><em class="nq">};</em></span><span id="74b0" class="mc kc it ob b gy ot op l oq or"><em class="nq">}),</em></span><span id="f9c1" class="mc kc it ob b gy ot op l oq or"><em class="nq">on(CounterActions.decrement, (</em>state<em class="nq">) =&gt; {</em></span><span id="bfc9" class="mc kc it ob b gy ot op l oq or"><em class="nq">return {</em></span><span id="9f2d" class="mc kc it ob b gy ot op l oq or"><em class="nq">...state,</em></span><span id="8b68" class="mc kc it ob b gy ot op l oq or"><em class="nq">counter: state.counter - 2,</em></span><span id="a01d" class="mc kc it ob b gy ot op l oq or"><em class="nq">};</em></span><span id="8030" class="mc kc it ob b gy ot op l oq or"><em class="nq">}),</em></span><span id="7951" class="mc kc it ob b gy ot op l oq or"><em class="nq">on(CounterActions.reset, (</em>state<em class="nq">) =&gt; {</em></span><span id="95a5" class="mc kc it ob b gy ot op l oq or"><em class="nq">return {</em></span><span id="f820" class="mc kc it ob b gy ot op l oq or"><em class="nq">...state,</em></span><span id="1b4f" class="mc kc it ob b gy ot op l oq or"><em class="nq">counter: 0,</em></span><span id="6470" class="mc kc it ob b gy ot op l oq or"><em class="nq">};</em></span><span id="f8fb" class="mc kc it ob b gy ot op l oq or"><em class="nq">})</em></span><span id="376a" class="mc kc it ob b gy ot op l oq or"><em class="nq">)</em>;</span><span id="ddfb" class="mc kc it ob b gy ot op l oq or"><em class="nq">export</em> <em class="nq">function</em> <em class="nq">reducer</em>(state<em class="nq">:</em> CounterState <em class="nq">|</em> undefined, action<em class="nq">:</em> Action) {</span><span id="fed8" class="mc kc it ob b gy ot op l oq or"><em class="nq">return</em> <em class="nq">counterReducer</em>(<em class="nq">state</em>, <em class="nq">action</em>);</span><span id="4a16" class="mc kc it ob b gy ot op l oq or">}</span></pre><h2 id="7ade" class="mc kc it bd kd md me dn kh mf mg dp kl lk mh mi kp lo mj mk kt ls ml mm kx mn bi translated">8)用于存储数据选择的选择器</h2><p id="b1c3" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">正如我们在前一部分所解释的，选择器是负责从状态中选择必要数据的部分</p><p id="f125" class="pw-post-body-paragraph kz la it lb b lc lx le lf lg ly li lj lk lz lm ln lo ma lq lr ls mb lu lv lw im bi translated">在/store文件夹下创建一个<strong class="lb iu"> counter.selector.ts </strong>文件</p><pre class="nd ne nf ng gt ok ob ol om aw on bi"><span id="ecea" class="mc kc it ob b gy oo op l oq or"><em class="nq">import</em> { <em class="nq">createFeatureSelector</em>, <em class="nq">createSelector</em> } <em class="nq">from</em> '@ngrx/store';</span><span id="4b5e" class="mc kc it ob b gy ot op l oq or"><em class="nq">import</em> { <em class="nq">CounterState</em> } <em class="nq">from</em> './counter.state';</span><span id="f02c" class="mc kc it ob b gy ot op l oq or"><em class="nq">export const COUNTER_STATE_NAME = </em>'counter';</span><span id="d972" class="mc kc it ob b gy ot op l oq or"><em class="nq">export const selectCounter =</em></span><span id="14c7" class="mc kc it ob b gy ot op l oq or"><em class="nq">createFeatureSelector&lt;CounterState&gt;(COUNTER_STATE_NAME)</em>;</span><span id="b7c4" class="mc kc it ob b gy ot op l oq or"><em class="nq">export const getCount = createSelector(</em></span><span id="94ab" class="mc kc it ob b gy ot op l oq or"><em class="nq">selectCounter,</em></span><span id="acf6" class="mc kc it ob b gy ot op l oq or"><em class="nq">(</em>state<em class="nq">: CounterState) =&gt; state.counter</em></span><span id="f9fc" class="mc kc it ob b gy ot op l oq or"><em class="nq">)</em>;</span></pre><h2 id="ca53" class="mc kc it bd kd md me dn kh mf mg dp kl lk mh mi kp lo mj mk kt ls ml mm kx mn bi translated">9)将商店和减压器添加到app。组件</h2><p id="cecd" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">我们现在需要将<strong class="lb iu"> StoreModule </strong>导入到app模块并链接到reducer</p><pre class="nd ne nf ng gt ok ob ol om aw on bi"><span id="bf4d" class="mc kc it ob b gy oo op l oq or"><em class="nq">@NgModule</em>({</span><span id="29de" class="mc kc it ob b gy ot op l oq or">declarations: [</span><span id="8d60" class="mc kc it ob b gy ot op l oq or"><em class="nq">AppComponent</em></span><span id="2e20" class="mc kc it ob b gy ot op l oq or">],</span><span id="c1f0" class="mc kc it ob b gy ot op l oq or">imports: [</span><span id="37bb" class="mc kc it ob b gy ot op l oq or"><em class="nq">BrowserModule</em>,</span><span id="6114" class="mc kc it ob b gy ot op l oq or"><em class="nq">StoreModule</em>.<em class="nq">forFeature</em>(<em class="nq">COUNTER_STATE_NAME</em>,<em class="nq">reducer</em>)</span><span id="3588" class="mc kc it ob b gy ot op l oq or">],</span><span id="8702" class="mc kc it ob b gy ot op l oq or">providers: [],</span><span id="7be6" class="mc kc it ob b gy ot op l oq or">bootstrap: [<em class="nq">AppComponent</em>]</span><span id="4a6c" class="mc kc it ob b gy ot op l oq or">})</span><span id="548c" class="mc kc it ob b gy ot op l oq or"><em class="nq">export</em> <em class="nq">class</em> AppModule { }</span></pre><h2 id="8bf8" class="mc kc it bd kd md me dn kh mf mg dp kl lk mh mi kp lo mj mk kt ls ml mm kx mn bi translated">10)生成计数器组件和子组件</h2><p id="7529" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">现在，我们需要定义应用程序的<strong class="lb iu"> UI </strong>部分，通过定义将成为计数器组件的<strong class="lb iu"> <em class="nq">容器组件</em> </strong>和将成为计数器组件的<strong class="lb iu"> <em class="nq"> e表示组件</em> </strong></p><h2 id="e9da" class="mc kc it bd kd md me dn kh mf mg dp kl lk mh mi kp lo mj mk kt ls ml mm kx mn bi translated">10.1:生成计数器组件</h2><pre class="nd ne nf ng gt ok ob ol om aw on bi"><span id="466b" class="mc kc it ob b gy oo op l oq or">ng g c counter</span></pre><h2 id="ee10" class="mc kc it bd kd md me dn kh mf mg dp kl lk mh mi kp lo mj mk kt ls ml mm kx mn bi translated">10.2:生成计数器按钮组件</h2><pre class="nd ne nf ng gt ok ob ol om aw on bi"><span id="d215" class="mc kc it ob b gy oo op l oq or">ng g c counter-buttons </span></pre><p id="0a3a" class="pw-post-body-paragraph kz la it lb b lc lx le lf lg ly li lj lk lz lm ln lo ma lq lr ls mb lu lv lw im bi translated">将这段HTML代码添加到<strong class="lb iu">counter-buttons.component.html</strong></p><pre class="nd ne nf ng gt ok ob ol om aw on bi"><span id="2d25" class="mc kc it ob b gy oo op l oq or">&lt;div&gt;</span><span id="c865" class="mc kc it ob b gy ot op l oq or">&lt;button <em class="nq">class</em>="btn btn-primary" <em class="nq">(click)</em>="onIncrement()"&gt;Increment&lt;/button</span><span id="c409" class="mc kc it ob b gy ot op l oq or">&gt;&amp;nbsp;</span><span id="30c7" class="mc kc it ob b gy ot op l oq or">&lt;button <em class="nq">class</em>="btn btn-warning" <em class="nq">(click)</em>="onDecrement()"&gt;Decrement&lt;/button</span><span id="00fb" class="mc kc it ob b gy ot op l oq or">&gt;&amp;nbsp;</span><span id="7bf8" class="mc kc it ob b gy ot op l oq or">&lt;button <em class="nq">class</em>="btn btn-info" <em class="nq">(click)</em>="onReset()"&gt;Reset&lt;/button&gt;</span><span id="fd6e" class="mc kc it ob b gy ot op l oq or">&lt;/div&gt;</span></pre><p id="e690" class="pw-post-body-paragraph kz la it lb b lc lx le lf lg ly li lj lk lz lm ln lo ma lq lr ls mb lu lv lw im bi translated">并将此ts代码发送到<strong class="lb iu">counter-buttons . component . ts:</strong></p><p id="0246" class="pw-post-body-paragraph kz la it lb b lc lx le lf lg ly li lj lk lz lm ln lo ma lq lr ls mb lu lv lw im bi translated">正如代码中提到的，我们需要在组件中注入'<strong class="lb iu">Store:Store&lt;CounterState&gt;</strong>来连接我们的存储</p><pre class="nd ne nf ng gt ok ob ol om aw on bi"><span id="bca7" class="mc kc it ob b gy oo op l oq or"><em class="nq">import</em> { <em class="nq">Component</em>, <em class="nq">OnInit</em> } <em class="nq">from</em> '@angular/core';</span><span id="9e44" class="mc kc it ob b gy ot op l oq or"><em class="nq">import</em> { <em class="nq">Store</em> } <em class="nq">from</em> '@ngrx/store';</span><span id="6416" class="mc kc it ob b gy ot op l oq or"><em class="nq">import</em> { <em class="nq">decrement</em>, <em class="nq">increment</em>, <em class="nq">reset</em> } <em class="nq">from</em> '../store/counter.actions';</span><span id="1669" class="mc kc it ob b gy ot op l oq or"><em class="nq">import</em> { <em class="nq">CounterState</em> } <em class="nq">from</em> '../store/counter.state';</span><span id="f76c" class="mc kc it ob b gy ot op l oq or"><em class="nq">@Component</em>({</span><span id="2316" class="mc kc it ob b gy ot op l oq or">selector: 'app-counter-buttons',</span><span id="ca79" class="mc kc it ob b gy ot op l oq or">templateUrl: './counter-buttons.component.html',</span><span id="6058" class="mc kc it ob b gy ot op l oq or">styleUrls: ['./counter-buttons.component.scss']</span><span id="bf5c" class="mc kc it ob b gy ot op l oq or">})</span><span id="d481" class="mc kc it ob b gy ot op l oq or"><em class="nq">export</em> <em class="nq">class</em> CounterButtonsComponent <em class="nq">implements</em> OnInit {</span><span id="1a41" class="mc kc it ob b gy ot op l oq or"><em class="nq">constructor</em>(<strong class="ob iu"><em class="nq">private</em> store<em class="nq">:</em> Store&lt;CounterState&gt;</strong>) { }</span><span id="ae6f" class="mc kc it ob b gy ot op l oq or"><em class="nq">ngOnInit</em>()<em class="nq">:</em> void {</span><span id="df32" class="mc kc it ob b gy ot op l oq or">}</span><span id="9b97" class="mc kc it ob b gy ot op l oq or"><em class="nq">onIncrement</em>()</span><span id="8426" class="mc kc it ob b gy ot op l oq or">{</span><span id="4550" class="mc kc it ob b gy ot op l oq or"><strong class="ob iu"><em class="nq">this</em>.<em class="nq">store</em>.<em class="nq">dispatch</em>(<em class="nq">increment</em>())</strong></span><span id="ed16" class="mc kc it ob b gy ot op l oq or">}</span><span id="f719" class="mc kc it ob b gy ot op l oq or"><em class="nq">onDecrement</em>()</span><span id="a6a6" class="mc kc it ob b gy ot op l oq or">{</span><span id="490c" class="mc kc it ob b gy ot op l oq or"><strong class="ob iu"><em class="nq">this</em>.<em class="nq">store</em>.<em class="nq">dispatch</em>(<em class="nq">decrement</em>())</strong></span><span id="bf37" class="mc kc it ob b gy ot op l oq or">}</span><span id="2f41" class="mc kc it ob b gy ot op l oq or"><em class="nq">onReset</em>()</span><span id="a6fd" class="mc kc it ob b gy ot op l oq or">{</span><span id="97ab" class="mc kc it ob b gy ot op l oq or"><strong class="ob iu"><em class="nq">this</em>.<em class="nq">store</em>.<em class="nq">dispatch</em>(<em class="nq">reset</em>())</strong></span><span id="ded7" class="mc kc it ob b gy ot op l oq or">}</span><span id="4c92" class="mc kc it ob b gy ot op l oq or">}</span></pre><p id="0fcd" class="pw-post-body-paragraph kz la it lb b lc lx le lf lg ly li lj lk lz lm ln lo ma lq lr ls mb lu lv lw im bi translated"><strong class="lb iu"> <em class="nq">“这个</em>。<em class="nq">储存</em>。<em class="nq">分派</em> ( <em class="nq">增量</em> ()) </strong>"是一个如何分派动作的例子，该动作将由更新状态的减速器解除(通量模式数据流)</p><h2 id="bf0c" class="mc kc it bd kd md me dn kh mf mg dp kl lk mh mi kp lo mj mk kt ls ml mm kx mn bi translated">11)组件计数器输出以输出数据</h2><p id="8735" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">现在我们需要定义一个新的组件“计数器输出”,一个显示当前状态计数器值的表示性组件！</p><p id="71ae" class="pw-post-body-paragraph kz la it lb b lc lx le lf lg ly li lj lk lz lm ln lo ma lq lr ls mb lu lv lw im bi translated"><strong class="lb iu">计数器输出组件ts </strong>:</p><p id="cb23" class="pw-post-body-paragraph kz la it lb b lc lx le lf lg ly li lj lk lz lm ln lo ma lq lr ls mb lu lv lw im bi translated"><strong class="lb iu"><em class="nq">本</em>。<em class="nq">储存</em>。<em class="nq">选择</em>(<em class="nq">get count</em>)</strong>从存储器中选择计数器值</p><pre class="nd ne nf ng gt ok ob ol om aw on bi"><span id="1d8b" class="mc kc it ob b gy oo op l oq or"><em class="nq">import</em> { <em class="nq">Component</em>, <em class="nq">OnInit</em> } <em class="nq">from</em> '@angular/core';</span><span id="bd96" class="mc kc it ob b gy ot op l oq or"><em class="nq">import</em> { <em class="nq">Store</em> } <em class="nq">from</em> '@ngrx/store';</span><span id="e4f5" class="mc kc it ob b gy ot op l oq or"><em class="nq">import</em> { <em class="nq">Observable</em> } <em class="nq">from</em> 'rxjs';</span><span id="57bb" class="mc kc it ob b gy ot op l oq or"><em class="nq">import</em> { <em class="nq">getCount</em> } <em class="nq">from</em> '../store/counter.selector';</span><span id="7520" class="mc kc it ob b gy ot op l oq or"><em class="nq">import</em> { <em class="nq">CounterState</em> } <em class="nq">from</em> '../store/counter.state';</span><span id="e6eb" class="mc kc it ob b gy ot op l oq or"><em class="nq">@Component</em>({</span><span id="672c" class="mc kc it ob b gy ot op l oq or">selector: 'app-counter-output',</span><span id="36f2" class="mc kc it ob b gy ot op l oq or">templateUrl: './counter-output.component.html',</span><span id="02a6" class="mc kc it ob b gy ot op l oq or">styleUrls: ['./counter-output.component.scss']</span><span id="ae77" class="mc kc it ob b gy ot op l oq or">})</span><span id="d4c0" class="mc kc it ob b gy ot op l oq or"><em class="nq">export</em> <em class="nq">class</em> CounterOutputComponent <em class="nq">implements</em> OnInit {</span><span id="f2d6" class="mc kc it ob b gy ot op l oq or"><em class="nq">counter$</em> <em class="nq">:</em> Observable&lt;number&gt;</span><span id="2204" class="mc kc it ob b gy ot op l oq or"><em class="nq">constructor</em>(<em class="nq">private</em> store<em class="nq">:</em> Store&lt;CounterState&gt;) {</span><span id="84c2" class="mc kc it ob b gy ot op l oq or">}</span><span id="aefa" class="mc kc it ob b gy ot op l oq or"><em class="nq">ngOnInit</em>()<em class="nq">:</em> void {</span><span id="989c" class="mc kc it ob b gy ot op l oq or"><em class="nq">this</em>.<em class="nq">counter$</em> <em class="nq">=</em> <em class="nq">this</em>.<em class="nq">store</em>.<em class="nq">select</em>(<em class="nq">getCount</em>)</span><span id="e52e" class="mc kc it ob b gy ot op l oq or">}</span><span id="365c" class="mc kc it ob b gy ot op l oq or">}</span></pre><p id="fc27" class="pw-post-body-paragraph kz la it lb b lc lx le lf lg ly li lj lk lz lm ln lo ma lq lr ls mb lu lv lw im bi translated"><strong class="lb iu">counter-output . component . html:</strong></p><p id="3b5b" class="pw-post-body-paragraph kz la it lb b lc lx le lf lg ly li lj lk lz lm ln lo ma lq lr ls mb lu lv lw im bi translated">用<strong class="lb iu"> async </strong> | pipe显示当前计数器值:</p><pre class="nd ne nf ng gt ok ob ol om aw on bi"><span id="d859" class="mc kc it ob b gy oo op l oq or">&lt;div&gt;</span><span id="da86" class="mc kc it ob b gy ot op l oq or">&lt;h3&gt;Counter is: {{ counter$ | async }}&lt;/h3&gt;</span><span id="8cb6" class="mc kc it ob b gy ot op l oq or">&lt;/div&gt;</span></pre><h2 id="09f7" class="mc kc it bd kd md me dn kh mf mg dp kl lk mh mi kp lo mj mk kt ls ml mm kx mn bi translated">12)计数器容器组件最终代码:</h2><p id="1923" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">最后，这就是我们应该如何在内部集成子组件代码</p><p id="027b" class="pw-post-body-paragraph kz la it lb b lc lx le lf lg ly li lj lk lz lm ln lo ma lq lr ls mb lu lv lw im bi translated"><strong class="lb iu">counter.component.html</strong></p><pre class="nd ne nf ng gt ok ob ol om aw on bi"><span id="cce9" class="mc kc it ob b gy oo op l oq or">&lt;div <em class="nq">class</em>="row"&gt;</span><span id="aa14" class="mc kc it ob b gy ot op l oq or">&lt;div <em class="nq">class</em>="col-md-12"&gt;</span><span id="ce72" class="mc kc it ob b gy ot op l oq or">&lt;div <em class="nq">class</em>="my-6"&gt;</span><span id="9797" class="mc kc it ob b gy ot op l oq or">&lt;app-counter-output&gt;&lt;/app-counter-output&gt;</span><span id="5c32" class="mc kc it ob b gy ot op l oq or">&lt;/div&gt;</span><span id="e1f8" class="mc kc it ob b gy ot op l oq or">&lt;div <em class="nq">class</em>="my-6"&gt;</span><span id="aa77" class="mc kc it ob b gy ot op l oq or">&lt;app-counter-buttons&gt;&lt;/app-counter-buttons&gt;</span><span id="23e3" class="mc kc it ob b gy ot op l oq or">&lt;/div&gt;</span><span id="2832" class="mc kc it ob b gy ot op l oq or">&lt;/div&gt;</span><span id="62e2" class="mc kc it ob b gy ot op l oq or">&lt;/div&gt;</span></pre><p id="26c0" class="pw-post-body-paragraph kz la it lb b lc lx le lf lg ly li lj lk lz lm ln lo ma lq lr ls mb lu lv lw im bi translated"><strong class="lb iu">app.component.html</strong></p><pre class="nd ne nf ng gt ok ob ol om aw on bi"><span id="f2ad" class="mc kc it ob b gy oo op l oq or">&lt;div&gt;</span><span id="9624" class="mc kc it ob b gy ot op l oq or">&lt;app-counter&gt;&lt;/app-counter&gt;</span><span id="e0b9" class="mc kc it ob b gy ot op l oq or">&lt;/div&gt;</span></pre><h2 id="ce73" class="mc kc it bd kd md me dn kh mf mg dp kl lk mh mi kp lo mj mk kt ls ml mm kx mn bi translated"><strong class="ak">运行App: </strong></h2><pre class="nd ne nf ng gt ok ob ol om aw on bi"><span id="4193" class="mc kc it ob b gy oo op l oq or"><strong class="ob iu">npm start</strong></span></pre><h2 id="91c5" class="mc kc it bd kd md me dn kh mf mg dp kl lk mh mi kp lo mj mk kt ls ml mm kx mn bi translated">最终输出:</h2><figure class="nd ne nf ng gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ou"><img src="../Images/3b1725ff06665fef308573a6f702b6e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*buT5tj6R1ai7TIQK_iVkaQ.gif"/></div></div></figure><p id="4fa5" class="pw-post-body-paragraph kz la it lb b lc lx le lf lg ly li lj lk lz lm ln lo ma lq lr ls mb lu lv lw im bi translated">可以找到源代码:<a class="ae nu" href="https://github.com/Rebaiahmed/learning-angular-advanced/tree/main/ngrx/ngrx-poc" rel="noopener ugc nofollow" target="_blank">https://github . com/Rebaiahmed/learning-angular-advanced/tree/main/ngrx/ngrx-POC</a></p><h1 id="b4f8" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">附录📘 📙：</h1><h2 id="a3f9" class="mc kc it bd kd md me dn kh mf mg dp kl lk mh mi kp lo mj mk kt ls ml mm kx mn bi translated"><a class="ae nu" href="https://github.com/johnpapa/angular-ngrx-data" rel="noopener ugc nofollow" target="_blank">角度ngrx-数据:</a></h2><figure class="nd ne nf ng gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ov"><img src="../Images/03862bf09165af074216802cce17c35c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nw1gK3E65XjrhQ0QhnOcXw.png"/></div></div></figure><p id="7f3a" class="pw-post-body-paragraph kz la it lb b lc lx le lf lg ly li lj lk lz lm ln lo ma lq lr ls mb lu lv lw im bi translated">零Ngrx样板文件您可能再也不会编写动作、缩减器、选择器、效果或HTTP数据服务了。</p><h2 id="8852" class="mc kc it bd kd md me dn kh mf mg dp kl lk mh mi kp lo mj mk kt ls ml mm kx mn bi translated">@ngrx/entity</h2><p id="f52f" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">是管理不可变集合的好方法。</p><h2 id="ebf9" class="mc kc it bd kd md me dn kh mf mg dp kl lk mh mi kp lo mj mk kt ls ml mm kx mn bi translated"><a class="ae nu" href="https://ngrx.io/guide/router-store" rel="noopener ugc nofollow" target="_blank">@ ngrx/router-store<strong class="ak">:</strong></a></h2><blockquote class="nn no np"><p id="a305" class="kz la nq lb b lc lx le lf lg ly li lj nr lz lm ln ns ma lq lr nt mb lu lv lw im bi translated">连接Angular路由器和商店的绑定。在每个路由器导航周期中，会调度多个操作来监听路由器状态的变化。然后，您可以从路由器的状态中选择数据，为您的应用程序提供附加信息</p></blockquote><h2 id="8317" class="mc kc it bd kd md me dn kh mf mg dp kl lk mh mi kp lo mj mk kt ls ml mm kx mn bi translated"><a class="ae nu" href="https://ngrx.io/guide/schematics" rel="noopener ugc nofollow" target="_blank"> @ngrx/schematics </a></h2><p id="81cf" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">提供脚手架。NgRx命令被集成到angular CLI中，并且大多数NgRx元素可以使用Angular CLI创建。那么，让我们添加NgRx原理图。(您可以使用新的终端窗口，或者通过按Ctrl+C键退出正在运行的angular应用程序)</p><ul class=""><li id="8166" class="mo mp it lb b lc lx lg ly lk nh lo ni ls nj lw mt mu mv mw bi translated"><code class="fe ny nz oa ob b"><strong class="lb iu">ng add @ngrx/schematics@latest</strong></code></li></ul><h2 id="f2f9" class="mc kc it bd kd md me dn kh mf mg dp kl lk mh mi kp lo mj mk kt ls ml mm kx mn bi translated"><a class="ae nu" href="https://ngrx.io/guide/store-devtools" rel="noopener ugc nofollow" target="_blank"> @ngrx/store-devtools : </a></h2><p id="d9df" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">Store Devtools为<a class="ae nu" href="https://ngrx.io/guide/store" rel="noopener ugc nofollow" target="_blank">商店</a>提供开发工具和仪器。</p><figure class="nd ne nf ng gt ju"><div class="bz fp l di"><div class="oi oj l"/></div></figure><figure class="nd ne nf ng gt ju gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/33c1c81cee40890adce4b609449cf560.png" data-original-src="https://miro.medium.com/v2/resize:fit:1040/format:webp/1*LDg4Tt_cgVT33x197UEWaw.png"/></div><figcaption class="od oe gj gh gi of og bd b be z dk translated">Ngrx devtools截图示例</figcaption></figure><h2 id="131c" class="mc kc it bd kd md me dn kh mf mg dp kl lk mh mi kp lo mj mk kt ls ml mm kx mn bi translated"><a class="ae nu" href="https://github.com/btroncone/ngrx-store-logger" rel="noopener ugc nofollow" target="_blank"> ngrx-store-logger: </a></h2><p id="7e8c" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">@ngrx/store应用程序的高级日志记录，从<a class="ae nu" href="https://github.com/fcomb/redux-logger" rel="noopener ugc nofollow" target="_blank"> redux-logger </a>移植而来。</p><figure class="nd ne nf ng gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ox"><img src="../Images/faf46f851977d5754d16224741a91e47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dKMe3nvJXuapl7SzEu20Zw.png"/></div></div></figure><h2 id="6b49" class="mc kc it bd kd md me dn kh mf mg dp kl lk mh mi kp lo mj mk kt ls ml mm kx mn bi translated"><a class="ae nu" href="https://github.com/btroncone/ngrx-store-localstorage" rel="noopener ugc nofollow" target="_blank">ngrx-商店-本地存储:</a></h2><figure class="nd ne nf ng gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi oy"><img src="../Images/d5678560f44bfe185f5c7f6427b6f616.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KdVeEhwDx3KIUxygvaR9Tw.png"/></div></div></figure><p id="aaa6" class="pw-post-body-paragraph kz la it lb b lc lx le lf lg ly li lj lk lz lm ln lo ma lq lr ls mb lu lv lw im bi translated">ngrx存储和本地或会话存储之间的简单同步。</p><h2 id="c7bc" class="mc kc it bd kd md me dn kh mf mg dp kl lk mh mi kp lo mj mk kt ls ml mm kx mn bi translated"><a class="ae nu" href="https://nx.dev/" rel="noopener ugc nofollow" target="_blank"> Nx : </a></h2><p id="1409" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">是一套用于monorepos的可扩展开发工具，它扩展了Angular CLI。Nx附带了一组实用程序，帮助编写处理路由器和服务器通信更简单的效果</p><figure class="nd ne nf ng gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi oz"><img src="../Images/7f2d7c82620010b73dcc7e9515520c47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J5PTrHtaDh7wYbnFad_XGA.png"/></div></div></figure><h2 id="0c11" class="mc kc it bd kd md me dn kh mf mg dp kl lk mh mi kp lo mj mk kt ls ml mm kx mn bi translated">参考📓 📕：</h2><ul class=""><li id="6f2e" class="mo mp it lb b lc ld lg lh lk mq lo mr ls ms lw mt mu mv mw bi translated"><a class="ae nu" href="https://www.toptal.com/angular-js/ngrx-angular-reaction-application" rel="noopener ugc nofollow" target="_blank">https://www . top tal . com/angular-js/ngrx-angular-reaction-application</a></li><li id="24d0" class="mo mp it lb b lc mx lg my lk mz lo na ls nb lw mt mu mv mw bi translated"><a class="ae nu" href="https://stackoverflow.com/search?page=3&amp;tab=Votes&amp;q=ngrx" rel="noopener ugc nofollow" target="_blank">https://stackoverflow.com/search?page=3&amp;tab =票数&amp; q=ngrx </a></li><li id="bd1e" class="mo mp it lb b lc mx lg my lk mz lo na ls nb lw mt mu mv mw bi translated"><a class="ae nu" href="https://blog.nrwl.io/using-ngrx-4-to-manage-state-in-angular-applications-64e7a1f84b7b" rel="noopener ugc nofollow" target="_blank">https://blog . nrwl . io/using-ngrx-4-to-manage-state-in-angular-applications-64e 7a 1 f 84 b 7 b</a></li><li id="72cc" class="mo mp it lb b lc mx lg my lk mz lo na ls nb lw mt mu mv mw bi translated">【https://stackabuse.com/beginners-guide-to-ngrx-and-angular/ T4】</li><li id="8056" class="mo mp it lb b lc mx lg my lk mz lo na ls nb lw mt mu mv mw bi translated"><a class="ae nu" href="https://ngrx.io/" rel="noopener ugc nofollow" target="_blank">https://ngrx.io/</a></li><li id="dc0d" class="mo mp it lb b lc mx lg my lk mz lo na ls nb lw mt mu mv mw bi translated"><a class="ae nu" href="https://medium.com/bb-tutorials-and-thoughts/why-state-management-is-important-for-angular-apps-e2e7ba8872f1" rel="noopener">https://medium . com/bb-tutorials-and-thoughts/why-state-management-is-important-for-angular-apps-e 2e 7 ba 8872 f1</a></li><li id="aff1" class="mo mp it lb b lc mx lg my lk mz lo na ls nb lw mt mu mv mw bi translated"><a class="ae nu" href="https://github.com/search?q=ngrx" rel="noopener ugc nofollow" target="_blank">https://github.com/search?q=ngrx</a></li><li id="e26b" class="mo mp it lb b lc mx lg my lk mz lo na ls nb lw mt mu mv mw bi translated"><a class="ae nu" href="https://dzone.com/articles/angular-app-state-management-with-ngrx" rel="noopener ugc nofollow" target="_blank">https://dzone . com/articles/angular-app-state-management-with-ngrx</a></li><li id="bd00" class="mo mp it lb b lc mx lg my lk mz lo na ls nb lw mt mu mv mw bi translated"><a class="ae nu" href="https://react-community-tools-practices-cheatsheet.netlify.app/state-management/overview/" rel="noopener ugc nofollow" target="_blank">https://react-community-tools-practices-cheat sheet . netlify . app/state-management/overview/</a></li><li id="839e" class="mo mp it lb b lc mx lg my lk mz lo na ls nb lw mt mu mv mw bi translated"><a class="ae nu" href="https://ordina-jworks.github.io/angular/2018/10/08/angular-state-management-comparison.html" rel="noopener ugc nofollow" target="_blank">https://ordina-jworks . github . io/angular/2018/10/08/angular-state-management-comparison . html</a></li></ul><h1 id="1f4c" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">结论❤️:</h1><p id="1555" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">作为结论，我试图用<strong class="lb iu">角度的</strong>应用程序的优点、缺点和核心概念来解释状态管理的概念，</p><p id="c707" class="pw-post-body-paragraph kz la it lb b lc lx le lf lg ly li lj lk lz lm ln lo ma lq lr ls mb lu lv lw im bi translated">我还添加了一个小例子来探索Ngrx工具和angular术语</p><p id="522a" class="pw-post-body-paragraph kz la it lb b lc lx le lf lg ly li lj lk lz lm ln lo ma lq lr ls mb lu lv lw im bi translated">如果您有任何问题，请随时添加您的评论或在GitHub <a class="ae nu" href="https://github.com/Rebaiahmed/learning-angular-advanced/tree/main/ngrx/ngrx-poc" rel="noopener ugc nofollow" target="_blank"> repo </a>中提出问题</p><p id="e693" class="pw-post-body-paragraph kz la it lb b lc lx le lf lg ly li lj lk lz lm ln lo ma lq lr ls mb lu lv lw im bi translated">通过编码学习</p></div></div>    
</body>
</html>