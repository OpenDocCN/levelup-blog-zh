<html>
<head>
<title>How to publish your react component package to npm?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何将您的react组件包发布到npm？</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-publish-your-react-component-package-to-npm-20ee4f81a506?source=collection_archive---------1-----------------------#2021-04-05">https://levelup.gitconnected.com/how-to-publish-your-react-component-package-to-npm-20ee4f81a506?source=collection_archive---------1-----------------------#2021-04-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/67945558081f78e9e3b0764e58a39ef2.png" data-original-src="https://miro.medium.com/v2/resize:fit:694/format:webp/1*uJ5NcEBI4ik0x7K74pH1Sg.png"/></div></figure><p id="80aa" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">什么是NPM？</strong></p><p id="d6e0" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">npm是Node.js的包管理器，也是超过一百万个javascript开发工具(包)的在线数据库。要从npm下载软件包，您只需运行命令:</p><pre class="ks kt ku kv gt kw kx ky kz aw la bi"><span id="d198" class="lb lc iq kx b gy ld le l lf lg">npm install &lt;package&gt;</span></pre><p id="6e57" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">这个包将会自动下载到项目中的node_modules文件夹中。你可以马上使用它。它为开发人员节省了大量时间。作为一个开源库，你也可以通过发布到npm来分享你的酷东西。</p><p id="5c58" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">让我们构建一个简单而有用的包，然后将其发布到npm。</p></div><div class="ab cl lh li hu lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="ij ik il im in"><p id="abf6" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">创建项目</strong></p><p id="f962" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">首先我们必须下载npm。我们可以通过安装Node.js来获取，我们从它的官方网站下载Node.js吧。</p><div class="lo lp gp gr lq lr"><a href="https://nodejs.org/en/" rel="noopener  ugc nofollow" target="_blank"><div class="ls ab fo"><div class="lt ab lu cl cj lv"><h2 class="bd ir gy z fp lw fr fs lx fu fw ip bi translated">节点. js</h2><div class="ly l"><h3 class="bd b gy z fp lw fr fs lx fu fw dk translated">Node.js是基于Chrome的V8 JavaScript引擎构建的JavaScript运行时。</h3></div><div class="lz l"><p class="bd b dl z fp lw fr fs lx fu fw dk translated">nodejs.org</p></div></div><div class="ma l"><div class="mb l mc md me ma mf js lr"/></div></div></a></div><p id="7564" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">打开您的终端并运行:</p><pre class="ks kt ku kv gt kw kx ky kz aw la bi"><span id="8575" class="lb lc iq kx b gy ld le l lf lg">npm -v</span></pre><p id="b894" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">如果版本信息出现，这意味着您成功地安装了它。</p><p id="c8f9" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">然后创建一个新文件夹，并初始化这个文件夹。</p><pre class="ks kt ku kv gt kw kx ky kz aw la bi"><span id="f3fd" class="lb lc iq kx b gy ld le l lf lg">mkdir react-scroll-up-button </span><span id="4a82" class="lb lc iq kx b gy mg le l lf lg">cd react-scroll-up-button</span><span id="e1e3" class="lb lc iq kx b gy mg le l lf lg">npm init</span></pre><p id="ec26" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在根目录下创建一个src文件夹和一个lib文件夹。我们将把react组件放在。src文件夹。编译后的js文件会出现在。lib文件夹。</p></div><div class="ab cl lh li hu lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="ij ik il im in"><p id="d983" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">编辑package.json </strong></p><p id="0c98" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">运行<code class="fe mh mi mj kx b">npm init -y</code>后会有一个package.json文件自动生成。通常这就足够我们发展了。但是为了将这个项目发布到npm，有些细节需要处理。只需编辑package.json文件，如下所示:</p><figure class="ks kt ku kv gt jr"><div class="bz fp l di"><div class="mk ml l"/></div></figure><ul class=""><li id="3c4d" class="mm mn iq jw b jx jy kb kc kf mo kj mp kn mq kr mr ms mt mu bi translated">名称:这个包的名称。包名不能重复使用。因此，在命名项目之前，最好在npm上检查是否存在同名包。</li></ul><div class="lo lp gp gr lq lr"><a href="https://www.npmjs.com/" rel="noopener  ugc nofollow" target="_blank"><div class="ls ab fo"><div class="lt ab lu cl cj lv"><h2 class="bd ir gy z fp lw fr fs lx fu fw ip bi translated">npm</h2><div class="ly l"><h3 class="bd b gy z fp lw fr fs lx fu fw dk translated">编辑描述</h3></div><div class="lz l"><p class="bd b dl z fp lw fr fs lx fu fw dk translated">www.npmjs.com</p></div></div><div class="ma l"><div class="mv l mc md me ma mf js lr"/></div></div></a></div><ul class=""><li id="c509" class="mm mn iq jw b jx jy kb kc kf mo kj mp kn mq kr mr ms mt mu bi translated">版本:包的版本。记得每次更新这个包的时候都要更新版本。</li><li id="60ef" class="mm mn iq jw b jx mw kb mx kf my kj mz kn na kr mr ms mt mu bi translated">描述:它将成为npm官方网站上这个包的副标题。越准确，人们找到这个包的机会就越大。</li><li id="6a29" class="mm mn iq jw b jx mw kb mx kf my kj mz kn na kr mr ms mt mu bi translated">main:是这个包的入口点。请确保路径正确。</li><li id="d4e0" class="mm mn iq jw b jx mw kb mx kf my kj mz kn na kr mr ms mt mu bi translated">存储库:它是这个包的源代码所在的地方。比如你把代码放在GitHub上。把GitHub资源库的网址放在这里就行了。</li><li id="8005" class="mm mn iq jw b jx mw kb mx kf my kj mz kn na kr mr ms mt mu bi translated">关键词:将会是npm官方网站上这个包的标签。旨在帮助人们更容易地找到包裹。</li><li id="2498" class="mm mn iq jw b jx mw kb mx kf my kj mz kn na kr mr ms mt mu bi translated">bug:应该是用户可以报告bug的地方。通常，它与存储库在同一个地方。</li><li id="21b7" class="mm mn iq jw b jx mw kb mx kf my kj mz kn na kr mr ms mt mu bi translated">脚本:我们用来运行这个项目的脚本。例如，我们使用webpack来捆绑这个项目，因此我们创建一个脚本“build”来运行webpack。</li></ul><p id="d006" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">编辑完package.json之后，让我们安装将要使用的工具和库。像React，Webpack，Babel，和Material UI。</p><pre class="ks kt ku kv gt kw kx ky kz aw la bi"><span id="fb71" class="lb lc iq kx b gy ld le l lf lg">npm install webpack webpack-cli <br/><br/>npm install react <br/><br/>npm install babel-loader @babel/core<br/> <br/>npm install @babel/preset-env @babel/preset-react</span><span id="3623" class="lb lc iq kx b gy mg le l lf lg">npm install @babel/preset-stage-0</span><span id="aaaa" class="lb lc iq kx b gy mg le l lf lg">npm install @material-ui/core</span></pre></div><div class="ab cl lh li hu lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="ij ik il im in"><p id="9cc2" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">创建webpack.config.js </strong></p><p id="1004" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">接下来，我们将设置webpack配置文件。创建一个webpack.config.js文件。在这个文件中，我们将一些重要的信息传递给webpack，比如项目的入口和输出表单。</p><figure class="ks kt ku kv gt jr"><div class="bz fp l di"><div class="mk ml l"/></div></figure><ul class=""><li id="cfaf" class="mm mn iq jw b jx jy kb kc kf mo kj mp kn mq kr mr ms mt mu bi translated">条目:React组件文件的路径。</li><li id="1e88" class="mm mn iq jw b jx mw kb mx kf my kj mz kn na kr mr ms mt mu bi translated">输出:它是一个对象。Path指出javascript文件编译后的位置。在我们的项目中，它是lib文件夹。filename是它的名字。</li><li id="541c" class="mm mn iq jw b jx mw kb mx kf my kj mz kn na kr mr ms mt mu bi translated">规则:它是一个对象。我们在这里制定规则。面对不同类型的文件时使用哪些工具进行编译的规则。在我们的项目中，我们使用babel-loader来编译以。用css-loader编译以. css结尾的文件。</li><li id="f11d" class="mm mn iq jw b jx mw kb mx kf my kj mz kn na kr mr ms mt mu bi translated">解决方案:当人们将我们的包导入到他们自己的项目中时，可能会有一些包在不同的版本中同时使用。它总是不停地反应。我们应该把它们放在这里以防止潜在的冲突。</li></ul><p id="2250" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">这些是可以处理大多数情况的一些基本设置。</p></div><div class="ab cl lh li hu lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="ij ik il im in"><p id="8b75" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">创造。babelrc </strong></p><p id="3fef" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">将JSX与react结合使用非常棒。但是浏览器不能读取JSX。这就是为什么我们用巴别塔把JSX编译成javascript。只需将我们要使用的包放在预置中。</p><figure class="ks kt ku kv gt jr"><div class="bz fp l di"><div class="mk ml l"/></div></figure></div><div class="ab cl lh li hu lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="ij ik il im in"><p id="7b88" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">。npmignore，。gitignore和Readme.md </strong></p><p id="5181" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">。npmignore是过滤掉我们不必发布到npm的文件。。gitignore就是过滤掉我们不用推送到GitHub的文件。</p><p id="6984" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">Readme.md用于介绍您的软件包。它同时出现在npm和GitHub库上。最好在这里提供尽可能多的细节。因为大多数人倾向于下载信息完整的包。如果你创建了一个超级杀手包，但没有Readme.md，没有人会使用它。</p></div><div class="ab cl lh li hu lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="ij ik il im in"><p id="1c30" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">创建react包</strong></p><p id="d73f" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在我们设置好一切之后，让我们开始写代码。我将创建一个简单但有用的包，这是一个滚动到顶部按钮。这将是一个按钮，点击它，你会回到网页的顶部，无论你在哪里。</p><p id="9785" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">你可以在这里创造任何你想要的东西。这无关紧要，因为我们的重点是如何发表它。</p><p id="8f79" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">所以让我们跳过如何创建这个react组件。好奇就去查代码。</p><div class="lo lp gp gr lq lr"><a href="https://github.com/weianofsteel/react-scroll-up-button" rel="noopener  ugc nofollow" target="_blank"><div class="ls ab fo"><div class="lt ab lu cl cj lv"><h2 class="bd ir gy z fp lw fr fs lx fu fw ip bi translated">weianofsteel/react-向上滚动按钮</h2><div class="ly l"><h3 class="bd b gy z fp lw fr fs lx fu fw dk translated">一个简单的向上滚动按钮。通过创建……为weianofsteel/react-scroll-up-button开发做出贡献</h3></div><div class="lz l"><p class="bd b dl z fp lw fr fs lx fu fw dk translated">github.com</p></div></div><div class="ma l"><div class="nb l mc md me ma mf js lr"/></div></div></a></div></div><div class="ab cl lh li hu lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="ij ik il im in"><p id="1bb4" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">在本地主机上试试</strong></p><p id="b863" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">完成react组件后，只需运行:</p><pre class="ks kt ku kv gt kw kx ky kz aw la bi"><span id="e8dc" class="lb lc iq kx b gy ld le l lf lg">npm run build</span></pre><p id="b96b" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">理想情况下，我们会收到成功消息。在我们发布它之前，我们应该测试这个包是否工作。运行:</p><pre class="ks kt ku kv gt kw kx ky kz aw la bi"><span id="9b14" class="lb lc iq kx b gy ld le l lf lg">npm pack</span></pre><p id="0dd3" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">然后会生成一个. tgz文件。让我们将它安装到另一个随机react项目中，并将其导入到一个组件中。使用这个包的本地路径来安装它，如下所示:</p><pre class="ks kt ku kv gt kw kx ky kz aw la bi"><span id="03d1" class="lb lc iq kx b gy ld le l lf lg">npm install /Users/wangweian/Desktop/xxxxxxxxxxx.tgz</span></pre><p id="2d04" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">理想情况下，这个包是有效的！</p></div><div class="ab cl lh li hu lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="ij ik il im in"><p id="7799" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">发布到国家预防机制</strong></p><p id="2cd5" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在本地主机上成功运行这个包之后。我们可以出版它！</p><p id="3375" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我们需要一个npm账户。如果你没有，就创建一个。</p><p id="0782" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><a class="ae nc" href="https://www.npmjs.com/" rel="noopener ugc nofollow" target="_blank">www.npmjs.com</a></p><p id="22d7" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">首次登录本地主机时，运行:</p><pre class="ks kt ku kv gt kw kx ky kz aw la bi"><span id="192e" class="lb lc iq kx b gy ld le l lf lg">npm adduser</span></pre><p id="3a9c" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">如果没有，运行:</p><pre class="ks kt ku kv gt kw kx ky kz aw la bi"><span id="6969" class="lb lc iq kx b gy ld le l lf lg">npm login</span></pre><p id="3ae3" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">成功登录后，我们可以发布它，运行:</p><pre class="ks kt ku kv gt kw kx ky kz aw la bi"><span id="3158" class="lb lc iq kx b gy ld le l lf lg">npm publish</span></pre><p id="8252" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我们将收到一条成功消息。然后等待几分钟，到npm网站搜索我们的包。当我们在npm网站上看到它时，我们就完成了！</p><p id="c4ad" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">每次发布前记得检查版本。如果您忘记更新版本，发布将会失败。</p><p id="0556" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">最后，让我们导入这个包，看看它是什么样子的:</p><figure class="ks kt ku kv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="ne nf di ng bf nh"><div class="gh gi nd"><img src="../Images/617fe0c617d68487a588b41697d4a65c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*C3D4VU8phCU257T9JG2kNw.gif"/></div></div></figure><p id="9923" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">就是这个！希望你喜欢这个，并在npm上发表一些很酷的东西。</p></div></div>    
</body>
</html>