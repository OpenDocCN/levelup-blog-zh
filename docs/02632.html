<html>
<head>
<title>Merge or Rebase? That’s the Problem</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">合并还是改基？这就是问题所在</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/merge-or-rebase-thats-the-problem-11d65944b7e?source=collection_archive---------10-----------------------#2020-03-26">https://levelup.gitconnected.com/merge-or-rebase-thats-the-problem-11d65944b7e?source=collection_archive---------10-----------------------#2020-03-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/fafc94b0adc3940688ee35740bceb82a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WTB5OTwYgLGriHM5Ha_AGQ.jpeg"/></div></div></figure><div class=""/><p id="d28a" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi kz translated">实际上，<a class="ae li" href="https://www.w3docs.com/learn-git/git-rebase.html" rel="noopener ugc nofollow" target="_blank"> git rebase </a>和<a class="ae li" href="https://www.w3docs.com/learn-git/git-merge.html" rel="noopener ugc nofollow" target="_blank"> git merge </a>做的是同样的事情，但是方式不同。它们都将一个<a class="ae li" href="https://www.w3docs.com/learn-git/git-branch.html" rel="noopener ugc nofollow" target="_blank">分支</a>中的<a class="ae li" href="https://www.w3docs.com/learn-git/git-commit.html" rel="noopener ugc nofollow" target="_blank"> git提交</a>集成到另一个分支中，但是它们是如何实现预期结果的，我们将在本文的范围内讨论！</p><p id="8c80" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">首先，让我们深入研究这些命令，并找到最适合您的工作流程的确切策略。</p><h2 id="8db1" class="lj lk je bd ll lm ln dn lo lp lq dp lr km ls lt lu kq lv lw lx ku ly lz ma mb bi translated"><strong class="ak"> Git合并</strong></h2><p id="8513" class="pw-post-body-paragraph kb kc je kd b ke mc kg kh ki md kk kl km me ko kp kq mf ks kt ku mg kw kx ky im bi translated">Git merge获取源分支的内容，然后<a class="ae li" href="https://www.w3docs.com/snippets/git/best-and-safe-way-to-merge-a-git-branch-into-master.html" rel="noopener ugc nofollow" target="_blank">将其与目标分支</a>集成。因此，只有目标分支被更改，而源分支历史保持不变。换句话说，当您合并时，您的HEAD分支生成一个新的git提交，维护每个提交历史的祖先。</p><h2 id="7b82" class="lj lk je bd ll lm ln dn lo lp lq dp lr km ls lt lu kq lv lw lx ku ly lz ma mb bi translated">赞成的意见</h2><ul class=""><li id="7e05" class="mh mi je kd b ke mc ki md km mj kq mk ku ml ky mm mn mo mp bi translated">提供简单的用法。</li><li id="a4e5" class="mh mi je kd b ke mq ki mr km ms kq mt ku mu ky mm mn mo mp bi translated">保留源分支的原始上下文。</li><li id="4004" class="mh mi je kd b ke mq ki mr km ms kq mt ku mu ky mm mn mo mp bi translated">保留提交历史记录和时间顺序。</li><li id="657a" class="mh mi je kd b ke mq ki mr km ms kq mt ku mu ky mm mn mo mp bi translated">将源分支的提交与另一个分支的提交分开。</li></ul><h2 id="fa76" class="lj lk je bd ll lm ln dn lo lp lq dp lr km ls lt lu kq lv lw lx ku ly lz ma mb bi translated">骗局</h2><ul class=""><li id="cf0a" class="mh mi je kd b ke mc ki md km mj kq mk ku ml ky mm mn mo mp bi translated">大量的merge commits把历史弄乱了，从而使得Git库的可视化图表有彩虹状的支线，没有有用的信息。</li></ul><h2 id="9a39" class="lj lk je bd ll lm ln dn lo lp lq dp lr km ls lt lu kq lv lw lx ku ly lz ma mb bi translated"><strong class="ak"> Git Rebase </strong></h2><p id="b832" class="pw-post-body-paragraph kb kc je kd b ke mc kg kh ki md kk kl km me ko kp kq mf ks kt ku mg kw kx ky im bi translated">Git rebase将所有的更改堆到一个补丁中，并将这个补丁集成到目标分支中。merge和rebase的一个核心区别是后者清除了历史。在将工作从一个分支转移到另一个分支的过程中，不需要的部分被移除以维护线性项目历史。当您需要要素分支中主分支的最新更新，但主分支的历史必须保持干净时，该命令非常方便。</p><blockquote class="mv mw mx"><p id="4cc4" class="kb kc my kd b ke kf kg kh ki kj kk kl mz kn ko kp na kr ks kt nb kv kw kx ky im bi translated"><em class="je">rebase将一个分支的更改重新写入另一个分支，而不创建新的提交。</em></p></blockquote><h2 id="d04f" class="lj lk je bd ll lm ln dn lo lp lq dp lr km ls lt lu kq lv lw lx ku ly lz ma mb bi translated">赞成的意见</h2><ul class=""><li id="3f93" class="mh mi je kd b ke mc ki md km mj kq mk ku ml ky mm mn mo mp bi translated">使历史可读和线性，并清除复杂的历史。</li><li id="e8bc" class="mh mi je kd b ke mq ki mr km ms kq mt ku mu ky mm mn mo mp bi translated">通过使提交成为单个提交来清除提交。</li></ul><h2 id="5a3f" class="lj lk je bd ll lm ln dn lo lp lq dp lr km ls lt lu kq lv lw lx ku ly lz ma mb bi translated">骗局</h2><ul class=""><li id="6b8a" class="mh mi je kd b ke mc ki md km mj kq mk ku ml ky mm mn mo mp bi translated">不适用于“拉”请求，因为您看不到团队成员做了什么微小的更改。</li><li id="ea0a" class="mh mi je kd b ke mq ki mr km ms kq mt ku mu ky mm mn mo mp bi translated">将特性降低到一堆可以隐藏上下文的提交。</li></ul><h2 id="a676" class="lj lk je bd ll lm ln dn lo lp lq dp lr km ls lt lu kq lv lw lx ku ly lz ma mb bi translated"><strong class="ak">什么时候合并，什么时候改基？</strong></h2><p id="0553" class="pw-post-body-paragraph kb kc je kd b ke mc kg kh ki md kk kl km me ko kp kq mf ks kt ku mg kw kx ky im bi translated">您已经区分了这两种策略，现在让我们来讨论用例。</p><h2 id="8f26" class="lj lk je bd ll lm ln dn lo lp lq dp lr km ls lt lu kq lv lw lx ku ly lz ma mb bi translated"><strong class="ak">调查</strong></h2><p id="6433" class="pw-post-body-paragraph kb kc je kd b ke mc kg kh ki md kk kl km me ko kp kq mf ks kt ku mg kw kx ky im bi translated">在采取行动之前，仔细调查总是一个好主意。需要注意的是，所选择的策略应该与您的工作流程相匹配。一个工作流策略可能对一个团队更好，而对另一个团队可能是致命的。因此，在选择一个策略之前，要考虑每个策略。</p><h2 id="a6a3" class="lj lk je bd ll lm ln dn lo lp lq dp lr km ls lt lu kq lv lw lx ku ly lz ma mb bi translated"><strong class="ak">个人vs团队</strong></h2><p id="fa80" class="pw-post-body-paragraph kb kc je kd b ke mc kg kh ki md kk kl km me ko kp kq mf ks kt ku mg kw kx ky im bi translated">如果您单独工作，选择rebase而不是merge可能会更方便。如果您共享特征分支，您将从其他成员处获得更改，则重置基础过程将产生不一致性。</p><blockquote class="mv mw mx"><p id="a12e" class="kb kc my kd b ke kf kg kh ki kj kk kl mz kn ko kp na kr ks kt nb kv kw kx ky im bi translated"><em class="je">总是要考虑到合并保存了历史，而rebase重写了历史！</em></p></blockquote><p id="5221" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">对于基于特性的工作流，git merge可能是您团队的正确选择。这也有助于你避免<a class="ae li" href="https://www.w3docs.com/learn-git/git-revert.html" rel="noopener ugc nofollow" target="_blank">回复</a>或<a class="ae li" href="https://www.w3docs.com/learn-git/git-reset.html" rel="noopener ugc nofollow" target="_blank">重置</a>任何东西。</p><p id="9e0c" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">合并的结果是，不同的特性保持隔离，不会干扰现有的提交历史。如果优先考虑的是保持完美的历史，那么git rebase是避免不相关提交的更合适的版本。</p><h2 id="0353" class="lj lk je bd ll lm ln dn lo lp lq dp lr km ls lt lu kq lv lw lx ku ly lz ma mb bi translated"><strong class="ak">冲突</strong></h2><p id="097a" class="pw-post-body-paragraph kb kc je kd b ke mc kg kh ki md kk kl km me ko kp kq mf ks kt ku mg kw kx ky im bi translated"><a class="ae li" href="https://www.w3docs.com/snippets/git/undoing-a-git-rebase.html" rel="noopener ugc nofollow" target="_blank">恢复rebase </a>比<a class="ae li" href="https://www.w3docs.com/snippets/git/how-to-revert-a-merge-commit-already-pushed-to-the-remote-branch.html" rel="noopener ugc nofollow" target="_blank">恢复merge </a>困难得多，因为rebase冲突一次提交一次，而<a class="ae li" href="https://www.w3docs.com/learn-git/merge-conflicts.html" rel="noopener ugc nofollow" target="_blank"> merge冲突</a>一次提交一次。Git允许预览当你<a class="ae li" href="https://www.w3docs.com/snippets/git/how-to-preview-a-merge-in-git.html" rel="noopener ugc nofollow" target="_blank">合并你的分支</a>时会发生什么。</p><p id="50b8" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">但是，不要乱用rebase！在你知道自己在做什么之前，不要改变基础。不正确的rebase会把你置于一个关键的位置，导致严重的后果。</p><blockquote class="mv mw mx"><p id="7f15" class="kb kc my kd b ke kf kg kh ki kj kk kl mz kn ko kp na kr ks kt nb kv kw kx ky im bi translated">永远记住不要在共享分支上改变基础。</p></blockquote><p id="e890" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">此外，阅读<a class="ae li" href="https://www.w3docs.com/snippets/git/how-to-rebase-git-branch.html" rel="noopener ugc nofollow" target="_blank">如何重定Git分支</a>。</p></div><div class="ab cl nc nd hx ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="im in io ip iq"><p id="2a1b" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">总之，重定基数和合并通过选择不同的方法提供了相同的结果。每种方法都有其独特之处。对一种情况非常有用的东西，对另一种情况可能是致命的。仔细的调查可以防止混乱。因此，总是要考虑到你和你的团队当前的情况和可能的障碍。此外，查看我们的<a class="ae li" href="https://www.w3docs.com/snippets/git.html" rel="noopener ugc nofollow" target="_blank"> Git片段</a>和<a class="ae li" href="https://www.w3docs.com/learn-git.html" rel="noopener ugc nofollow" target="_blank"> Git书籍</a>来阅读关于命令和例子！</p></div></div>    
</body>
</html>