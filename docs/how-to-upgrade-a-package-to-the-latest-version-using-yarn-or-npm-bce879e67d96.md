# å¦‚ä½•ä½¿ç”¨ Yarn æˆ– NPM å°†è½¯ä»¶åŒ…å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬

> åŸæ–‡ï¼š<https://levelup.gitconnected.com/how-to-upgrade-a-package-to-the-latest-version-using-yarn-or-npm-bce879e67d96>

## æ‰€ä»¥ï¼Œä½ ä¸€ç›´åœ¨æ¨è¿Ÿå‡çº§è½¯ä»¶åŒ…ï¼Œç°åœ¨ä½ éœ€è¦å¿«é€Ÿæ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Œä»¥ç¡®ä¿ä½ çš„å®‰å…¨å’Œä½ çš„è€æ¿é«˜å…´ï¼Ÿæˆ‘ç»™ä½ å‡†å¤‡äº†æ–‡ç« ã€‚

![](img/21b4c60f1eb1abc255f415c9862d6e54.png)

sylvie charron åœ¨ [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) ä¸Šæ‹æ‘„çš„ç…§ç‰‡

è¿™ä¸€å‘¨ï¼Œæˆ‘ä¸€ç›´å¿™äºä¸€ä¸ªå·¥ä½œé¡¹ç›®ï¼Œå°† Docusaurus(æ¥è‡ªè„¸ä¹¦çš„åŸºäº React çš„æ–‡æ¡£é™æ€ç«™ç‚¹ç”Ÿæˆå™¨)ä»æŸä¸ªå¥‡æ€ªçš„ alpha ç‰ˆæœ¬å‡çº§åˆ°åˆšåˆšå‘å¸ƒçš„æ–°çš„ 2.0 ç‰ˆæœ¬ã€‚

```
yarn remove @docusaurus/coreyarn add @docusaurus/core
```

ä¸ºä»€ä¹ˆä¸`yarn add`åŒ…å¹¶æŒ‡å®šç‰ˆæœ¬å·`@latest`ï¼Ÿé‚£æ˜¯å› ä¸º`package.json`ç‰ˆæœ¬å°†ä¼šä»¥`latest`ç»“æŸï¼Œè€Œä¸æ˜¯ä¸€ä¸ªçœŸå®çš„ç‰ˆæœ¬ã€‚é‚£ä¸ª*çœ‹èµ·æ¥*æœ‰ç”¨ï¼Œä½†æ˜¯å¦‚æœä½ æƒ³çŸ¥é“ä½ åœ¨å“ªä¸ªç‰ˆæœ¬ä¸Šå‘¢ï¼Ÿä½ æ¯æ¬¡éƒ½å¿…é¡»åœ¨ npm æ³¨å†Œè¡¨ä¸ŠæŸ¥æ‰¾å®ƒã€‚

`npm`ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œè¿™å¾ˆå¥½ï¼Œå› ä¸ºå®ƒå†…ç½®åœ¨ Node.js ä¸­ï¼Œæ‰€ä»¥ä½ å·²ç»å®‰è£…äº†`npm`ã€‚ä¸éœ€è¦é¢å¤–çš„å·¥ä½œï¼

```
npm uninstall @docusaurus/corenpm install @docusaurus/core
```

æˆ‘å·²ç»åˆ‡æ¢å›å…¨èŒä½¿ç”¨`yarn`ä¸º[æ²¡æœ‰ç‰¹åˆ«çš„åŸå› ](https://www.urbandictionary.com/define.php?term=for%20no%20reason)ï¼Œé™¤äº†æˆ‘å–œæ¬¢å®ƒå¦‚ä½•ç€è‰²ç»ˆç«¯ã€‚(æˆ‘çŒœæˆ‘æ˜¯ä¸ª[æ˜“å–](https://www.merriam-webster.com/words-at-play/usage-of-sale-sell)ã€‚)

ä½†æ˜¯ï¼Œå¦‚æœè¿™ç¯‡æ–‡ç« æ˜¯ä½ å†³å®šè·Ÿéšæ½®æµå®‰è£…`yarn`çš„åŸå› ï¼Œä½ å¯ä»¥ä»æ–‡æ¡£ä¸­ç”¨ä¸‹é¢çš„å‘½ä»¤[å®‰è£… Yarn 3:](https://yarnpkg.com/getting-started/install)

```
corepack enable
yarn init -2
```

# é‚£`yarn upgrade-interactive`å‘¢ï¼Ÿ

é‚£`yarn upgrade-interactive`å‘½ä»¤å‘¢ï¼ŸYarn 1 ä¸­çš„è¿™ä¸ªä¾¿åˆ©å·¥å…·å®é™…ä¸Šå¹¶æ²¡æœ‰é»˜è®¤åŒ…å«åœ¨ Yarn 3 ä¸­ã€‚ä½ åƒè¿™æ ·å®‰è£…å®ƒ:

```
yarn plugin import interactive-tools
```

ä¸€æ—¦å®‰è£…äº† Yarn 3 æ’ä»¶ï¼Œæ‚¨å°±å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸Šè¿è¡Œ`yarn upgrade-interactive`æ¥æŸ¥çœ‹æ‰€æœ‰è¿‡æ—¶çš„åŒ…ã€‚

```
yarn upgrade-interactive
```

![](img/68704788e37e303af468c52a1befe850.png)

MacOS ä¸Š iTerm2 ä¸­â€œ`yarn upgrade-interactive`â€çš„ä½œè€…æˆªå›¾

è¿è¡Œ`yarn upgrade-interactive`ä¼šç»™å‡ºä¸€ä¸ªæ¼‚äº®çš„å°ç•Œé¢ï¼Œè®©ä½ é€‰æ‹©åœ¨ç›¸åŒçš„ä¸»è¦ç‰ˆæœ¬æˆ–æœ€æ–°ç‰ˆæœ¬ä¸Šå‡çº§ã€‚

æ ¹æ®[è¯­ä¹‰ç‰ˆæœ¬](https://semver.org/)ï¼Œä¸åº”è¯¥æœ‰ä»»ä½•çªç ´æ€§çš„å˜åŒ–ï¼Œé™¤éä½ æ­£åœ¨è½¬ç§»åˆ°ä¸€ä¸ªä¸åŒçš„ä¸»è¦ç‰ˆæœ¬(æ›´é«˜çš„ç¬¬ä¸€ä¸ªæ•°å­—)ï¼Œæ‰€ä»¥è¿™ç»™äº†ä½ ä¸€ä¸ªä¼Ÿå¤§çš„å·¥å…·ï¼Œæ‰“ç ´ä½ çš„æ•´ä¸ªå›è´­ï¼

å¥½å§ï¼Œè¿™å°±æ˜¯æˆ‘å¦‚ä½•ä½¿ç”¨å®ƒï¼Œè‡³å°‘åœ¨æˆ‘çš„ä¸ªäººé¡¹ç›®ä¸Šã€‚å½“ä½ åœ¨ä¸“ä¸šåœ°å·¥ä½œæ—¶ï¼Œæˆ‘å‘ç°ä¸€æ¬¡æŒ‰ 5 ä¸ªåŒ…ä¸ºä¸€ç»„æ¥å‡çº§åŒ…æ˜¯æœ‰å¸®åŠ©çš„ï¼Œæˆ‘å°½é‡ä¸ç ´åä¸œè¥¿ã€‚ğŸ˜…

# ä½ çš„`yarn`æ˜¯ä¸æ˜¯ä¸€ç›´åï¼Ÿ

æˆ‘æœ€è¿‘å­¦åˆ°çš„å¦ä¸€ä¸ªéšæœºä½†æœ‰ç”¨çš„`yarn`å‘½ä»¤æ˜¯`yarn clear`ã€‚æ˜¾ç„¶ï¼Œå½“ä½¿ç”¨ Yarn 3(æœ€æ–°ç‰ˆæœ¬)æ—¶ï¼Œä½ ä¸åº”è¯¥åœ¨å‡ºç°é—®é¢˜æ—¶éšæ„åˆ é™¤ä½ çš„`node_modules`æ–‡ä»¶å¤¹ã€‚(è°çŸ¥é“å‘¢ï¼Ÿ)

å› æ­¤ï¼Œç›¸åï¼ŒDocusaurus ç»™ä½ ä¸€ä¸ª`yarn clear`å‘½ä»¤ï¼Œå®ƒè¯•å›¾ä»é¡¹ç›®ä¸­åˆ é™¤ç¼“å­˜çš„æ–‡ä»¶ä»¥ä½¿å·¥ä½œæ­£å¸¸è¿›è¡Œã€‚(æ›´æ™®éçš„æ˜¯ï¼Œä½ å¯ä»¥åœ¨ä»»ä½•é¡¹ç›®ä¸­å°è¯•`yarn cache clear`æ¥è·å¾—ç±»ä¼¼çš„æ•ˆæœã€‚)

è¿è¡Œ`yarn clear`ä¿®å¤äº†æˆ‘æœ€è¿‘åœ¨ Docusaurus ä¸­å·¥ä½œæ—¶é‡åˆ°çš„å‡ ä¸ªâ€œ`yarn`ä¸ä¼šè¿è¡Œâ€çš„é—®é¢˜ã€‚ä¸¤ä¸ªä¾‹å­:

```
ğŸ¬ yarn clear
[SUCCESS] Removed the Webpack persistent cache folder at "/Users/derek/dev/docs/node_modules/.cache".
/1.8sğŸ¬ yarn clear
Removing /Users/derek/dev/docs/build
Removing /Users/derek/dev/docs/node_modules/.cache
Removing /Users/derek/dev/docs/.docusaurus                                          /1.7s
```

æ˜¯çš„ï¼Œæˆ‘åœ¨ç”¨æµ·è±šè¡¨æƒ…ç¬¦å·ğŸ¬åœ¨ iTerm2 ä¸­æˆ‘çš„`zsh`è®¾ç½®ä¸­ã€‚å¾ˆå¯çˆ±ï¼Œå¯¹å§ï¼Ÿæ— è®ºå¦‚ä½•ï¼Œå¸Œæœ›ä½ å·²ç»äº†è§£äº†ä¸€äº›å…³äº`yarn`çš„çŸ¥è¯†ã€‚

**å¿«ä¹ç¼–ç ï¼**ğŸ¬

![](img/b6de58d1deeb5499d8edd1c572c26340.png)

ç…§ç‰‡ç”± [Ranae Smith](https://unsplash.com/@bryteeyes3?utm_source=medium&utm_medium=referral) åœ¨ [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) ä¸Šæ‹æ‘„

å¾·é‡Œå…‹Â·å¥¥æ–¯æ±€åšå£«æ˜¯ã€ŠT21 èŒä¸šè§„åˆ’:å¦‚ä½•åœ¨ 6 ä¸ªæœˆå†…æˆä¸º 6 ä½æ•°çš„æˆåŠŸç¨‹åºå‘˜ã€‹ä¸€ä¹¦çš„ä½œè€…ï¼Œè¯¥ä¹¦ç°å·²åœ¨äºšé©¬é€Šä¸Šå‡ºå”®ã€‚