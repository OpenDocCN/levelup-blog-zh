<html>
<head>
<title>How I Used the Opensource Codebase of Dev Community to Build My Own Website</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我如何使用开发社区的开源代码库来构建我自己的网站</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/deep-dive-into-opensource-codebase-of-dev-community-82286f8cb39f?source=collection_archive---------9-----------------------#2021-02-26">https://levelup.gitconnected.com/deep-dive-into-opensource-codebase-of-dev-community-82286f8cb39f?source=collection_archive---------9-----------------------#2021-02-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/a4e5a5e6cc048bc57c244700f787b436.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4DvdfTyTJsP10bST3HPsAA.png"/></div></div></figure><div class=""/><p id="a2d5" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们将使用Dev.to的Ruby on Rails后端作为管理面板，并为我们的网站创建一个自定义前端Vue.js。</p><h1 id="6b78" class="kz la je bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated"><strong class="ak">最终结果</strong></h1><p id="0933" class="pw-post-body-paragraph kb kc je kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated"><a class="ae mc" href="https://www.simplecoding.dev/" rel="noopener ugc nofollow" target="_blank">https://www.simplecoding.dev/</a></p><div class="md me mf mg gt ab cb"><figure class="mh iv mi mj mk ml mm paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><img src="../Images/effcd2463854be8df656ad0b2a9646b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:990/format:webp/1*6a5jAUVsrqQoCbED3cUHyw.png"/></div></figure><figure class="mh iv mn mj mk ml mm paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><img src="../Images/1dff8f0f88c2e6b3de7e2688c6e7cd4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1012/format:webp/1*LPD1vddWbT12iFcqyqUwSA.png"/></div></figure></div><div class="ab cb"><figure class="mh iv mo mj mk ml mm paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><img src="../Images/b457983bbf6edc7b13817c5b24364541.png" data-original-src="https://miro.medium.com/v2/resize:fit:996/format:webp/1*qiMF5_49B1PxbvxoQMEVZg.png"/></div></figure><figure class="mh iv mp mj mk ml mm paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><img src="../Images/51d285cad1dc818120dc853cf9d1b09c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1006/format:webp/1*vzEc3-fvh80SSUYSEON4mg.png"/></div></figure></div></div><div class="ab cl mq mr hx ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="im in io ip iq"><h1 id="450c" class="kz la je bd lb lc mx le lf lg my li lj lk mz lm ln lo na lq lr ls nb lu lv lw bi translated">介绍</h1><p id="022e" class="pw-post-body-paragraph kb kc je kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">我对算法和开源技术非常感兴趣。我一直在写关于如何解决Leetcode问题的故事。虽然我喜欢Medium和<a class="ae mc" href="http://dev.to" rel="noopener ugc nofollow" target="_blank"> Dev </a>编写的界面，但是我觉得它们缺少某些功能，比如</p><ol class=""><li id="f182" class="nc nd je kd b ke kf ki kj km ne kq nf ku ng ky nh ni nj nk bi translated">将在线代码编译器与故事集成</li><li id="af3a" class="nc nd je kd b ke nl ki nm km nn kq no ku np ky nh ni nj nk bi translated">创建自定义标签，如BFS、DFS、堆栈、队列</li><li id="0be5" class="nc nd je kd b ke nl ki nm km nn kq no ku np ky nh ni nj nk bi translated">标记用户的进度</li><li id="7d0c" class="nc nd je kd b ke nl ki nm km nn kq no ku np ky nh ni nj nk bi translated">更好地组织文章，如coursera或Udemy。</li></ol><p id="3891" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">因此，我决定创建自己的开源网站，它将具有以下特点</p><ol class=""><li id="45db" class="nc nd je kd b ke kf ki kj km ne kq nf ku ng ky nh ni nj nk bi translated">我将使用我的管理面板开发的代码库，写故事</li><li id="384a" class="nc nd je kd b ke nl ki nm km nn kq no ku np ky nh ni nj nk bi translated">为我的网站创建一个Vue.js前端</li><li id="a1cb" class="nc nd je kd b ke nl ki nm km nn kq no ku np ky nh ni nj nk bi translated">在谷歌云中托管它</li><li id="81ad" class="nc nd je kd b ke nl ki nm km nn kq no ku np ky nh ni nj nk bi translated">为优质文章创建基于订阅的功能，一对一辅导。</li></ol></div><div class="ab cl mq mr hx ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="im in io ip iq"><h1 id="a4e4" class="kz la je bd lb lc mx le lf lg my li lj lk mz lm ln lo na lq lr ls nb lu lv lw bi translated">体系结构</h1><p id="0b0a" class="pw-post-body-paragraph kb kc je kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated"><a class="ae mc" href="https://dev.to/" rel="noopener ugc nofollow" target="_blank"> dev.to </a>网站使用Forem。Forem是用于构建社区的开源软件。驱动<a class="ae mc" href="http://dev.to" rel="noopener ugc nofollow" target="_blank"> Dev </a>的GitHub代码可以在<a class="ae mc" href="https://github.com/forem/forem" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><p id="4dda" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><a class="ae mc" href="https://docs.forem.com/technical-overview/stack/" rel="noopener ugc nofollow" target="_blank"> Forem的堆栈由</a>组成</p><ul class=""><li id="0d4c" class="nc nd je kd b ke kf ki kj km ne kq nf ku ng ky nq ni nj nk bi translated"><a class="ae mc" href="https://github.com/puma/puma" rel="noopener ugc nofollow" target="_blank"> <em class="nr"> Puma </em> </a>作为webserver</li><li id="9d68" class="nc nd je kd b ke nl ki nm km nn kq no ku np ky nq ni nj nk bi translated">Ruby on Rails作为后端</li><li id="2288" class="nc nd je kd b ke nl ki nm km nn kq no ku np ky nq ni nj nk bi translated"><a class="ae mc" href="https://www.postgresql.org/" rel="noopener ugc nofollow" target="_blank"> <em class="nr"> PostgreSQL </em> </a>作为主数据库</li><li id="2048" class="nc nd je kd b ke nl ki nm km nn kq no ku np ky nq ni nj nk bi translated"><a class="ae mc" href="https://redis.io/" rel="noopener ugc nofollow" target="_blank"> <em class="nr"> Redis </em> </a>用来存储缓存的数据</li><li id="3db0" class="nc nd je kd b ke nl ki nm km nn kq no ku np ky nq ni nj nk bi translated"><a class="ae mc" href="https://github.com/mperham/sidekiq" rel="noopener ugc nofollow" target="_blank"> <em class="nr"> Sidekiq </em> </a>和<a class="ae mc" href="https://guides.rubyonrails.org/active_job_basics.html" rel="noopener ugc nofollow" target="_blank"> <em class="nr">主动工单</em> </a>为后台工人</li><li id="46ec" class="nc nd je kd b ke nl ki nm km nn kq no ku np ky nq ni nj nk bi translated"><a class="ae mc" href="https://www.elastic.co/elasticsearch/" rel="noopener ugc nofollow" target="_blank"> <em class="nr">弹性搜索</em> </a>用于在应用程序中搜索</li></ul><p id="5a5e" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我认为这也是一个学习<code class="fe ns nt nu nv b">caching</code>、<code class="fe ns nt nu nv b">authentication</code>、<code class="fe ns nt nu nv b">background jobs</code>最佳实践的好机会</p></div><div class="ab cl mq mr hx ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="im in io ip iq"><h1 id="2f49" class="kz la je bd lb lc mx le lf lg my li lj lk mz lm ln lo na lq lr ls nb lu lv lw bi translated"><strong class="ak">Forem代码库的问题</strong></h1><ul class=""><li id="80b0" class="nc nd je kd b ke lx ki ly km nw kq nx ku ny ky nq ni nj nk bi translated">后端和前端是紧密耦合的。所以，如果我以后想创建一个移动应用程序，这将是一个问题。</li><li id="7b86" class="nc nd je kd b ke nl ki nm km nn kq no ku np ky nq ni nj nk bi translated">与微服务架构不同，整体代码很难维护。</li></ul><p id="3d64" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">无论如何，我现在只关心第一个问题，所以第一个目标是创建我的前端可以使用的API。我们将在本系列的下一篇教程中讨论如何创建前端。</p></div><div class="ab cl mq mr hx ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="im in io ip iq"><h1 id="592d" class="kz la je bd lb lc mx le lf lg my li lj lk mz lm ln lo na lq lr ls nb lu lv lw bi translated">当心</h1><p id="de26" class="pw-post-body-paragraph kb kc je kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">如果你想看这个教程而不是看，可以在这里看。这个视频还解释了前端部分，这将在本系列的下一个教程中讨论。</p><figure class="md me mf mg gt iv"><div class="bz fp l di"><div class="nz oa l"/></div><figcaption class="ob oc gj gh gi od oe bd b be z dk translated">Forem后端快速介绍</figcaption></figure><h1 id="13e4" class="kz la je bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">后端(管理面板)</h1><p id="f6a4" class="pw-post-body-paragraph kb kc je kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">我的第一个目标是在谷歌云上安装后端，创建一些帖子，并制作一个API来列出所有帖子，以便我的Vue，js前端可以显示这些帖子。</p><p id="583f" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">运行和部署它有点困难，但是一旦我做到了，我看到它在谷歌云中运行。</p><figure class="md me mf mg gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi of"><img src="../Images/eada34b8d16d104fb8c60e08322c440e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nFEEcu13hO9Mi9JVMGkw-g.png"/></div></div><figcaption class="ob oc gj gh gi od oe bd b be z dk translated">主页</figcaption></figure><figure class="md me mf mg gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi og"><img src="../Images/916434c2ed5cc20e6c769006781b9c74.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AXHbui8pTpg6j5b1YhpvOg.png"/></div></div><figcaption class="ob oc gj gh gi od oe bd b be z dk translated">管理页面</figcaption></figure><figure class="md me mf mg gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oh"><img src="../Images/6ee5bf44c2e1b99cc633bffb71b245aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XuTwz0PDYlgEd6lCphNAOw.png"/></div></div><figcaption class="ob oc gj gh gi od oe bd b be z dk translated">文章</figcaption></figure><p id="7dbc" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在，下一个目标是制作一个新的控制器，它可以以JSON格式列出所有文章以及与这些文章相关联的元数据。</p><figure class="md me mf mg gt iv"><div class="bz fp l di"><div class="oi oa l"/></div></figure><p id="309c" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">首先，我创建了一条名为<code class="fe ns nt nu nv b">/all</code>的路线。我打算使用这个途径以JSON格式返回文章列表。然后，我创建了一个<strong class="kd jf"><em class="nr">SimplecodingArticlesController</em></strong>，它是<strong class="kd jf"><em class="nr">device</em></strong>:<strong class="kd jf"><em class="nr">registration controller，</em> </strong>的子类，因为我想使用<strong class="kd jf">require _ no _ authentic ation</strong>方法，这样我就可以显示那些文章，而不需要任何身份验证。稍后，我将使用一个访问令牌来认证API。眼下，一个快速而肮脏的方法足以开始。</p><figure class="md me mf mg gt iv"><div class="bz fp l di"><div class="oi oa l"/></div></figure><figure class="md me mf mg gt iv"><div class="bz fp l di"><div class="oi oa l"/></div></figure></div><div class="ab cl mq mr hx ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="im in io ip iq"><h1 id="d296" class="kz la je bd lb lc mx le lf lg my li lj lk mz lm ln lo na lq lr ls nb lu lv lw bi translated">扶持CORS</h1><p id="a2bf" class="pw-post-body-paragraph kb kc je kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">正如我们前面提到的，我们将使用Forem作为我们的后端，并在vuejs中创建一个与后端分开托管的前端。</p><p id="4480" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">当这个前端向Forem后端发出请求时，这些请求将是跨源请求，因为前端和后端是分开托管的。因此，要让web浏览器允许来自前端的跨来源请求，我们必须从后端启用CORS。</p><p id="20e8" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">为此，我们只需在目录<code class="fe ns nt nu nv b">config</code>位于Forem的Github repo的根文件夹中的<code class="fe ns nt nu nv b">/config/initializers/cors.rb</code>中添加以下代码。</p><figure class="md me mf mg gt iv"><div class="bz fp l di"><div class="oi oa l"/></div></figure></div><div class="ab cl mq mr hx ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="im in io ip iq"><h1 id="2fdd" class="kz la je bd lb lc mx le lf lg my li lj lk mz lm ln lo na lq lr ls nb lu lv lw bi translated">用于获取一个标签的所有文章的API</h1><p id="96d2" class="pw-post-body-paragraph kb kc je kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">现在，我想创建一个API来获取与单个标签相关联的所有文章。这个很简单。我只需要在<code class="fe ns nt nu nv b">simplecodingarticlescontroller</code>类中创建一个路由和一个新方法。</p><p id="4678" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如下所示修改<code class="fe ns nt nu nv b">route.rb</code>文件</p><figure class="md me mf mg gt iv"><div class="bz fp l di"><div class="oi oa l"/></div></figure><p id="0d56" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在<code class="fe ns nt nu nv b">simplecoding_articles_controller.rb</code>中创建新方法</p><figure class="md me mf mg gt iv"><div class="bz fp l di"><div class="oi oa l"/></div></figure><p id="c7b4" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如启用CORS部分所示，通过修改<code class="fe ns nt nu nv b">/config/initializers/cors.rb</code>文件，确保允许此路线上的CORS</p><p id="fb05" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">该api的JSON响应与显示的<code class="fe ns nt nu nv b">/all</code> API相同</p></div><div class="ab cl mq mr hx ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="im in io ip iq"><h1 id="3824" class="kz la je bd lb lc mx le lf lg my li lj lk mz lm ln lo na lq lr ls nb lu lv lw bi translated">获取特定文章的API</h1><p id="904b" class="pw-post-body-paragraph kb kc je kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">我们之前创建的API发送所有文章的列表。假设，我们只需要一个特定的文章。在这种情况下，我们必须从API中获取所有文章，然后搜索特定的文章。这是低效的。让我们创建一个只返回特定文章的API。</p><p id="979d" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">让我们在<code class="fe ns nt nu nv b">routes.rb</code>中创建一条新路线<code class="fe ns nt nu nv b">/articles/:id</code>，如下图所示。</p><figure class="md me mf mg gt iv"><div class="bz fp l di"><div class="oi oa l"/></div></figure><p id="e0ed" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">让我们也在<code class="fe ns nt nu nv b">simplecoding_articles_controller.rb</code>里面创建一个新的方法</p><figure class="md me mf mg gt iv"><div class="bz fp l di"><div class="oi oa l"/></div></figure><p id="5ac1" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这个API的JSON响应如下所示</p><figure class="md me mf mg gt iv"><div class="bz fp l di"><div class="oi oa l"/></div></figure><p id="0140" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">记住也要为此路由启用CORS</p></div><div class="ab cl mq mr hx ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="im in io ip iq"><h1 id="10d0" class="kz la je bd lb lc mx le lf lg my li lj lk mz lm ln lo na lq lr ls nb lu lv lw bi translated">通过Slugs获取文章的API</h1><p id="51d7" class="pw-post-body-paragraph kb kc je kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">目前，我们有一个API来使用文章的id获取一篇文章。让我们添加另一个API，使我们能够使用它的slug获取一篇文章。</p><p id="53ee" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在<code class="fe ns nt nu nv b">routes.rb</code>创建新路线</p><figure class="md me mf mg gt iv"><div class="bz fp l di"><div class="oi oa l"/></div></figure><p id="841c" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在<code class="fe ns nt nu nv b">simplecoding_articles_controller.rb</code>中创建新方法</p><figure class="md me mf mg gt iv"><div class="bz fp l di"><div class="oi oa l"/></div></figure><p id="9b5f" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这个API的响应类似于前面的API。</p><p id="fe5d" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">此外，记住也要为这个API启用CORS。</p><h1 id="e64b" class="kz la je bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">再见！</h1><p id="8eaa" class="pw-post-body-paragraph kb kc je kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">在接下来的教程中，我们将在前端使用这些API，并制作API来获取属于一个标签的文章。</p><p id="b9c0" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">完整的后端代码可以在这里找到</p><div class="is it gp gr iu oj"><a href="https://github.com/webtutsplus/simple-coding-rails" rel="noopener  ugc nofollow" target="_blank"><div class="ok ab fo"><div class="ol ab om cl cj on"><h2 class="bd jf gy z fp oo fr fs op fu fw jd bi translated">webtutsplus/简单编码-rails</h2><div class="oq l"><h3 class="bd b gy z fp oo fr fs op fu fw dk translated">为社区赋权欢迎来到Forem代码库，这是一个为开发者赋权的平台。我们很高兴有你…</h3></div><div class="or l"><p class="bd b dl z fp oo fr fs op fu fw dk translated">github.com</p></div></div><div class="os l"><div class="ot l ou ov ow os ox ja oj"/></div></div></a></div></div></div>    
</body>
</html>