<html>
<head>
<title>Distribute your Flutter Application with Azure DevOps and App Center</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Azure DevOps和应用中心分发您的Flutter应用程序</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/integrate-your-flutter-application-with-azure-devops-and-app-center-6e5e5ee4a53?source=collection_archive---------1-----------------------#2022-03-15">https://levelup.gitconnected.com/integrate-your-flutter-application-with-azure-devops-and-app-center-6e5e5ee4a53?source=collection_archive---------1-----------------------#2022-03-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="224e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">作为开发人员，您希望自动化手动任务，以提高生产率和节省时间。使用DevOps工具，你可以很容易地做到这一点。在本文中，我将介绍如何为你的flutter应用程序创建一个<strong class="jp ir">公关管道</strong>和一个<strong class="jp ir">部署管道</strong>。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/b26c55e57c4d8dd504d2b9a120752539.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8orwInnxqPRhrcKf9aOo9Q.png"/></div></div></figure><h2 id="a33a" class="kx ky iq bd kz la lb dn lc ld le dp lf jy lg lh li kc lj lk ll kg lm ln lo lp bi translated">在Azure DevOps中安装<a class="ae lq" href="https://marketplace.visualstudio.com/items?itemName=Hey24sheep.flutter" rel="noopener ugc nofollow" target="_blank">颤振任务</a></h2><p id="cdf1" class="pw-post-body-paragraph jn jo iq jp b jq lr js jt ju ls jw jx jy lt ka kb kc lu ke kf kg lv ki kj kk ij bi translated">在我们做任何事情之前，我们需要安装上面的扩展“Flutter Tasks”来帮助我们处理管道。你可以从上面的链接下载或者去<a class="ae lq" href="https://marketplace.visualstudio.com/" rel="noopener ugc nofollow" target="_blank"> Visual Studio市场</a>。安装后，您应该能够看到以下任务:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi lw"><img src="../Images/6cf4295bd0f97834c93ebdc4032a498a.png" data-original-src="https://miro.medium.com/v2/resize:fit:564/format:webp/1*VzqyRXFQnEpIVP9jo8SDLg.png"/></div></figure><h2 id="040e" class="kx ky iq bd kz la lb dn lc ld le dp lf jy lg lh li kc lj lk ll kg lm ln lo lp bi translated">在DevOps中创建PR构建管道</h2><p id="dea8" class="pw-post-body-paragraph jn jo iq jp b jq lr js jt ju ls jw jx jy lt ka kb kc lu ke kf kg lv ki kj kk ij bi translated">首先，您需要连接到您的Git存储库:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi lx"><img src="../Images/30e73dc15c0b9b068d7654c17cf322e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1338/format:webp/1*P4qFdUnFBBYRbLrBMo6S4Q.png"/></div></figure><p id="e7e8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后，您可以选择您的存储库和启动管道。</p><h2 id="b97d" class="kx ky iq bd kz la lb dn lc ld le dp lf jy lg lh li kc lj lk ll kg lm ln lo lp bi translated">公关YAML文件</h2><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="ly lz l"/></div></figure><p id="fcac" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">由于这是一个PR管道，我们不必设置触发器，因为我们将在develop分支上添加这个管道作为构建策略。因此，当提交PR和开发目标时，构建将会运行。</p><p id="053d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后，我们需要添加我们的颤振任务:</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="ly lz l"/></div></figure><p id="cb6d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这里，我添加了3个任务:<br/>-<strong class="jp ir">flutter install</strong>-安装最新版本的flutter(在稳定频道上)<br/>-<strong class="jp ir">flutter build</strong>-然后构建适用于android和ios的应用程序。我们将iosCodesign设置为false，因为我们不需要为PR管道签署应用程序。<br/>还有其他可选参数可以设置，如构建风格、版本号等。<br/>-<strong class="jp ir">flutter test</strong>-这运行我们在项目中的所有测试。</p><p id="f3c6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> PR管道完成！</strong>您现在可以进入开发分支策略(Repos-&gt;Branches-&gt;develop-&gt;Scroll to Build Validation)并将管道添加为新的构建策略:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ma"><img src="../Images/e4af253a7cefcef5ccbc22d661bbc656.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*69cIBcUJS5IJP2MM2DMieQ.png"/></div></div></figure><p id="6f1a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后，当创建PR时，您应该看到管道正在运行:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mb"><img src="../Images/00626ee0f5cc53368425a4f9813c6fca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jfPgHss15g4NDybWaSPOlw.png"/></div></div></figure><h2 id="5341" class="kx ky iq bd kz la lb dn lc ld le dp lf jy lg lh li kc lj lk ll kg lm ln lo lp bi translated">在DevOps中创建部署管道</h2><p id="6f4e" class="pw-post-body-paragraph jn jo iq jp b jq lr js jt ju ls jw jx jy lt ka kb kc lu ke kf kg lv ki kj kk ij bi translated">通过部署管道，我们可以使用以前的YAML，并在其上进行扩展。确保您将触发器添加到YAML的顶部，这样当代码被合并到“开发”(或任何您想要的分支)中时，它将运行这个管道:</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="ly lz l"/></div></figure><p id="6c02" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们现在需要在库中创建一些变量，以便在管道中使用。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi mc"><img src="../Images/b49dc120f23058d14ec283a75ad88ac3.png" data-original-src="https://miro.medium.com/v2/resize:fit:460/format:webp/1*L0gItgkdFPFzCWGa2jymJw.png"/></div></figure><p id="595b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于Android，您需要添加您的<strong class="jp ir">密钥别名</strong>、<strong class="jp ir">密码、</strong>和<strong class="jp ir">密钥库</strong>:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi md"><img src="../Images/9052289cd37c4f1020a5e468bd1e8ec2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XSRpYbI5a7K35MgZODat-Q.png"/></div></div><figcaption class="me mf gj gh gi mg mh bd b be z dk translated">可变组</figcaption></figure><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mi"><img src="../Images/bf88c812808b06867da0b7fe82b3f6a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*all_UXyTv5v8u0iLDm7NkQ.png"/></div></div><figcaption class="me mf gj gh gi mg mh bd b be z dk translated">安全文件</figcaption></figure><p id="20d8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于iOS，您需要添加您的<strong class="jp ir">证书密码</strong>、<strong class="jp ir"> Certificates.p12 </strong>和<strong class="jp ir">预置描述文件</strong>:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mj"><img src="../Images/6b087537f36ac22961940bdb648fa4f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dHIffY4KljMn3RWhWrwUAQ.png"/></div></div><figcaption class="me mf gj gh gi mg mh bd b be z dk translated">可变组</figcaption></figure><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/060c655a563926819fb41589130486eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1060/format:webp/1*N0JUnsL074T4_2ADZmFnHQ.png"/></div><figcaption class="me mf gj gh gi mg mh bd b be z dk translated">安全文件</figcaption></figure><p id="a7ae" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">既然我们已经建立了图书馆，让我们跳回YAML。</p><h2 id="25d4" class="kx ky iq bd kz la lb dn lc ld le dp lf jy lg lh li kc lj lk ll kg lm ln lo lp bi translated">Android签名和发布</h2><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="ly lz l"/></div></figure><p id="80b6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们现在签署并发布工件，这样我们可以在以后的发布管道中使用它。</p><h2 id="7b5d" class="kx ky iq bd kz la lb dn lc ld le dp lf jy lg lh li kc lj lk ll kg lm ln lo lp bi translated">iOS签名和发布</h2><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="ly lz l"/></div></figure><p id="76b4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们现在还可以签名并发布工件以备后用。</p></div><div class="ab cl ml mm hu mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ij ik il im in"><h1 id="ab30" class="ms ky iq bd kz mt mu mv lc mw mx my lf mz na nb li nc nd ne ll nf ng nh lo ni bi translated">部署到应用中心</h1><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/60b4617b3ee25d63a67a5b0eab8ed3af.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/1*cRblCb4wrWuER-sbManj-Q.png"/></div></figure><p id="191c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们现在需要在DevOps中创建一个发布管道来使用之前发布的工件。</p><p id="aaea" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先，我们将定义我们的工件:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/2565d030185d5d64a1be4a59a80c00ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1342/format:webp/1*Eqd6PGC62xnMfoM9lYvLSA.png"/></div></figure><p id="eb03" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后，在添加我们的阶段之前，我们需要添加来自市场的<a class="ae lq" href="https://marketplace.visualstudio.com/items?itemName=MsAppCenter.app-center-distribute-v3" rel="noopener ugc nofollow" target="_blank"> App Center Distribute </a>:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/06abe3d9b77f64e1424f98767e731bd9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1336/format:webp/1*ocJf8lLR4mq-Hztqd79pgg.png"/></div></figure><p id="b834" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">安装完成后，我们可以将其添加到Android的第一阶段:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nm"><img src="../Images/7fe682eab861270f2418ba6558cfe27e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lOABS5dznrVz7aW9w-Jfsw.png"/></div></div></figure><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nn"><img src="../Images/5469f1d6e20e31bbc2fbac450233b2d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sbDmv5iKsyBzH8ZjuMAUEQ.png"/></div></div></figure><p id="a272" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">点击信息图标旁边的“管理”超链接，即可建立App Center服务连接。一旦您设置了密钥，您就可以在那里添加它。</p><p id="7897" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">app slug的格式为<strong class="jp ir">{用户名}/{app_identifier} </strong>。https://appcenter.ms/users/<strong class="jp ir">【用户名】</strong>/应用程序/<strong class="jp ir">{应用程序标识符} </strong> 。如果您使用的是orgs，那么app slug的格式为<strong class="jp ir">{ orgname }/{ app _ identifier }</strong>。</p><p id="71ce" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后，您还可以给出APK的文件路径(来自工件)。</p><p id="9d6b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">那就是安卓搞定了！</p><p id="a336" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后，我们可以为iOS添加另一个阶段:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi no"><img src="../Images/b3d24be40700079c7d23bfbd07666003.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BnSp_QNnTiLsk3LqzOelXA.png"/></div></div></figure><p id="1274" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这与上面的几乎完全相同，除了我们的目标是IPA。</p><p id="dae3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在iOS也搞定了！</p><p id="acaa" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当您运行部署管道时，您的应用应该会自动部署到应用中心！</p><p id="5c16" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">注意:这些app center的最后步骤也可以直接在管道中完成，这完全取决于您想要如何处理它。</p></div><div class="ab cl ml mm hu mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ij ik il im in"><p id="fc38" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">感谢阅读！</p><p id="dd9c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你有任何问题，你可以通过以下方式联系我:<a class="ae lq" href="https://www.linkedin.com/in/luke-moody-0482651a6/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>，<a class="ae lq" href="https://twitter.com/LukeMoody01" rel="noopener ugc nofollow" target="_blank"> Twitter </a></p></div></div>    
</body>
</html>