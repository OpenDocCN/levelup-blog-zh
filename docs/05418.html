<html>
<head>
<title>This Is How to Deploy Your AWS Lambda Functions with CloudFormation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">这就是如何使用CloudFormation部署AWS Lambda函数</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/this-is-how-to-deploy-your-aws-lambda-functions-with-cloudformation-a21e7bbdb052?source=collection_archive---------7-----------------------#2020-08-26">https://levelup.gitconnected.com/this-is-how-to-deploy-your-aws-lambda-functions-with-cloudformation-a21e7bbdb052?source=collection_archive---------7-----------------------#2020-08-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="a9e0" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">来自AWS专家的提示和技巧</h2></div><p id="5727" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">由IOD专家<a class="ae lb" href="https://iamondemand.com/blog/author/mattbillock/" rel="noopener ugc nofollow" target="_blank">马特·比洛克</a></p><p id="e6ff" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">AWS Lambda是开发无服务器应用程序和按需工作流的强大工具。然而，这种能力在灵活性和易于部署方面是有代价的，因为AWS Lambda推荐的手动部署过程可能容易出错并且难以扩展。</p><p id="10bb" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">CloudFormation革新了这一过程，<a class="ae lb" href="https://aws.amazon.com/blogs/infrastructure-and-automation/deploying-aws-lambda-functions-using-aws-cloudformation-the-portable-way/" rel="noopener ugc nofollow" target="_blank">用可靠且可重复的基于模板的部署方案取代了复制的zip文件</a>。有了CloudFormation，您的Lambda函数将更易于维护，更易于开发人员理解，并且随着应用程序的增长更易于扩展。</p><h1 id="0f0f" class="lc ld iq bd le lf lg lh li lj lk ll lm jw ln jx lo jz lp ka lq kc lr kd ls lt bi translated">审查AWS Lambda部署</h1><p id="29b0" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">AWS Lambda函数部署基于文件处理——也就是说，将代码压缩到归档文件中，然后将文件上传到AWS。其核心是，所有AWS Lambda函数都遵循这种模式:</p><p id="8483" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">创建一个zip文件。上传到S3桶。将功能设置为激活。</strong></p><p id="a768" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">无论您是手动部署代码，将部署外包给工具，还是遵循任何介于两者之间的协议，都会发生这种情况。</p><p id="4d8b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一旦文件被接收，AWS将你的代码解压到适当的文件夹结构中，使得它可以在Lambda容器启动时运行。这种方法是我们讨论Lambda部署时要记住的一个关键点，也暴露了手动部署过程中的第一个漏洞——AWS Lambda函数有一个您需要遵循的未声明的结构。</p><p id="c409" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">简单地说，您不希望右键单击一个文件并创建一个归档；否则，当您试图运行部署的Lambda代码时，会遇到错误。以下截图说明了这个问题:</p><figure class="ma mb mc md gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi lz"><img src="../Images/e246b9a55d3f7410fac740c29535ad44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*8BUcQt3oXSC6poCu.jpg"/></div></div></figure></div><div class="ab cl ml mm hu mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ij ik il im in"><p id="1ddc" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果您检查由上述方法生成的zip文件，您会发现它们的根级别由您的代码文件夹组成:</p><figure class="ma mb mc md gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi ms"><img src="../Images/7445c4cb7dc993d39a8555923c735fb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*RrWLWQzh-v1yt_7d.jpg"/></div></div></figure><p id="5b04" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这带来的问题与AWS Lambda如何部署代码特别相关，也就是说，它只是将提供的代码存档解压缩到一个可执行文件夹，然后将调用请求路由到在该文件夹中找到的应用程序代码。当您在根级别提供一个带有文件夹的zip存档，而不是应用程序代码本身时，AWS Lambda不知道该做什么并抛出错误。因此，请确保压缩文件夹内容本身，如下所示:</p><figure class="ma mb mc md gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi lz"><img src="../Images/c9727c343042f68c1c603b08de5a0072.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ltXbyRJRACx1WwKS.jpg"/></div></div></figure></div><div class="ab cl ml mm hu mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ij ik il im in"><p id="48c8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当您这样做时，您的代码被放在zip文件夹的根级别。这允许AWS Lambda轻松部署您发布的代码:</p><figure class="ma mb mc md gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi mt"><img src="../Images/5dbb313b651277bb9e983109b5f8e74e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*7_jilQEH8Bp3Lj0k.jpg"/></div></div></figure><p id="5ff8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">每个Lambda函数都是独立存在的，这意味着您不能轻易地在Lambda函数之间共享资源——共享库、源数据文件和所有其他需要包含在您上传的zip存档中的信息源。这种额外的脆弱性和复制可以用λ层来解决。Lambda层为您的函数提供了一个公共基础，让您可以轻松地部署共享库，而无需在仅使用基础容器时进行复制。</p><p id="9f88" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">虽然您可以建立一个可脚本化和可维护的部署过程，但是一旦项目规模增长，上述步骤的脆弱性将很快变得明显。AWS CloudFormation通过将基础设施归类为代码来解决这个非常复杂的问题；这使得您的开发人员和开发运营团队可以通过简单的配置文件修改来创建、部署和拆除资源。这些配置文件是人类可读的，并且可以在任何文本配置、编程语言或用户界面工具中进行修改。</p><p id="7781" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，CloudFormation允许您集中部署基础设施，为您的无服务器功能创建一个可重复和可预测的构建过程。</p><h1 id="a119" class="lc ld iq bd le lf lg lh li lj lk ll lm jw ln jx lo jz lp ka lq kc lr kd ls lt bi translated">通过云形成改进Lambda部署</h1><p id="e011" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">从容易出错的Lambda手动部署过程转移到超级强大的CloudFormation模型，是一个将您的功能基础设施需求转化为适当的CloudFormation模板语言的简单过程。CloudFormation允许您将应用程序的不同资源部署整合到一小组配置文件中，允许您的基础设施与应用程序代码一起维护。</p><p id="6f11" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">总而言之，CloudFormation使得部署AWS Lambda函数变得极其简单。</p><p id="46c6" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从创建定义资源的模板文件开始。这将是你的代码的工作文件夹。接下来，在适当的文件中为您想要的Lambda运行时创建您的函数。最后，创建一个S3桶，并将其地址提供给Lambda函数；一旦你做到了这一点，你可以简单地通过复制你的zip文件到正确的S3桶来部署函数。</p><p id="1c29" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">CloudFormation将是一个工具，它将您的功能所需的所有资源联系在一起。在CloudFormation中，您将定义函数、函数的IAM角色、函数在S3的代码库以及执行策略，以确保您的函数可以在AWS生态系统中做它需要做的一切。CloudFormation进一步将这些资源收集在一起，将所有的基础设施定义集中在一个模板文件中，与您的代码放在一起。</p><h1 id="d532" class="lc ld iq bd le lf lg lh li lj lk ll lm jw ln jx lo jz lp ka lq kc lr kd ls lt bi translated">运行示例部署</h1><p id="3fd3" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">在本节中，我们将快速浏览一个为AWS Lambda功能创建云信息驱动的部署流程的示例。从下面的节点开始。使用nodejs12.x运行时创建简单Lambda函数的JS代码:</p><p id="510d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mu mv mw mx b">exports.handler = async (event) =&gt; {</code></p><p id="5f58" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mu mv mw mx b">// TODO implement</code></p><p id="2b81" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mu mv mw mx b">const response = {</code></p><p id="9a4e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mu mv mw mx b">statusCode: 200,</code></p><p id="0570" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mu mv mw mx b">body: JSON.stringify('CloudFormation deployment</code></p><p id="371d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mu mv mw mx b">successful!'),</code></p><p id="0c17" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mu mv mw mx b">};</code></p><p id="0758" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mu mv mw mx b">return response;</code></p><p id="92df" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mu mv mw mx b">};</code></p><p id="dee9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这段代码非常简单，允许您突出显示部署过程本身。一旦您创建了功能代码，您就可以开始创建允许您使用CloudFormation部署和运行代码的所有项目。</p><p id="7b52" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">首先，在函数所在的目录下创建一个新文件。这些说明假设您的文件将被命名为template.yml。一旦您创建了空模板文件，就开始包含运行您的函数所需的资源。首先，您可以定义一个S3存储桶来存放您的功能代码:</p></div><div class="ab cl ml mm hu mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ij ik il im in"><p id="916a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mu mv mw mx b">AWSTemplateFormatVersion: '2010-09-09'</code></p><p id="0788" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mu mv mw mx b">Description: 'Example Lambda zip copy'</code></p><p id="f393" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mu mv mw mx b">Resources:</code></p><p id="6883" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mu mv mw mx b">LambdaZipsBucket:</code></p><p id="1aba" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mu mv mw mx b">Type: AWS::S3::Bucket</code></p><p id="eaaa" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">然后，创建函数所需的资源，包括IAM角色和函数定义本身:</strong></p><p id="d4be" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mu mv mw mx b">MyFunctionRole:</code></p><p id="35b0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mu mv mw mx b">Type: AWS::IAM::Role</code></p><p id="5754" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mu mv mw mx b">Properties:</code></p><p id="796b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mu mv mw mx b">AssumeRolePolicyDocument:</code></p><p id="cc41" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mu mv mw mx b">Version: '2012-10-17'</code></p><p id="d133" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mu mv mw mx b">Statement:</code></p><p id="7eac" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mu mv mw mx b">- Effect: Allow</code></p><p id="1679" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mu mv mw mx b">Principal:</code></p><p id="1c23" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mu mv mw mx b">Service: lambda.amazonaws.com</code></p><p id="0874" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mu mv mw mx b">Action: sts:AssumeRole</code></p><p id="35f1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mu mv mw mx b">ManagedPolicyArns:</code></p><p id="3e6b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mu mv mw mx b">-</code></p><p id="b179" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mu mv mw mx b">arn:aws:iam::aws:policy/service role/AWSLambdaBasicExecutionRole</code></p><p id="c267" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mu mv mw mx b">MyFunction:</code></p><p id="fc8b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mu mv mw mx b">DependsOn: CopyZips</code></p><p id="8457" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mu mv mw mx b">Type: AWS::Lambda::Function</code></p><p id="d2c0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mu mv mw mx b">Properties:</code></p><p id="50f9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mu mv mw mx b">Description: Example</code></p><p id="fd4a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mu mv mw mx b">Handler: index.handler</code></p><p id="30ed" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mu mv mw mx b">Runtime: nodejs12.x</code></p><p id="3ced" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mu mv mw mx b">Role: !GetAtt 'MyFunctionRole.Arn'</code></p><p id="69fb" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mu mv mw mx b">Timeout: 300</code></p><p id="8223" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mu mv mw mx b">Code:</code></p><p id="6ab0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mu mv mw mx b">S3Bucket: !Ref 'LambdaZipsBucket'</code></p><p id="8dfd" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mu mv mw mx b">S3Key: !Sub '${QSS3KeyPrefix}/lambda.zi</code></p></div><div class="ab cl ml mm hu mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ij ik il im in"><p id="4fb9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一旦创建了模板文件并对其进行了修改以反映上面的资源，您就可以通过一个简单的调用从命令行部署您的功能:</p><p id="66d8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mu mv mw mx b">aws cloudformation deploy --template-file template.yml</code></p><p id="a15f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mu mv mw mx b">--stack-name your-stack-name-here</code></p><p id="a3eb" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这个基本配置允许您在将函数上传到函数定义中指定的S3存储桶后进行部署。现在，您可以在这个基本的部署功能集的基础上，自动化您的堆栈创建的任何方面。对于一个全功能的部署示例，您可以从AWS 克隆优秀的<a class="ae lb" href="https://github.com/aws-quickstart/quickstart-examples/tree/master/patterns/LambdaZips" rel="noopener ugc nofollow" target="_blank">快速启动repo。</a></p><h1 id="3381" class="lc ld iq bd le lf lg lh li lj lk ll lm jw ln jx lo jz lp ka lq kc lr kd ls lt bi translated">一些提示和附加资源</h1><p id="9a6a" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">当你在Lambda开发管道中使用CloudFormation时，你肯定会遇到令人头疼的问题。这里有一些小技巧，可以帮助你避免不必要的沮丧，因为这篇<a class="ae lb" href="https://aws.amazon.com/blogs/infrastructure-and-automation/deploying-aws-lambda-functions-using-aws-cloudformation-the-portable-way/" rel="noopener ugc nofollow" target="_blank"> AWS博客文章的主题是</a>:</p><blockquote class="my"><p id="7860" class="mz na iq bd nb nc nd ne nf ng nh la dk translated">您知道可以部署内嵌Lambda代码吗？简单地包括你的(小的)Lambda函数代码，作为附加在zipfile键后面的行。</p></blockquote><p id="dbf7" class="pw-post-body-paragraph kf kg iq kh b ki ni jr kk kl nj ju kn ko nk kq kr ks nl ku kv kw nm ky kz la ij bi translated">如果您只需要将您的功能发布到AWS区域的一个小的子集，那么您可以提供一个区域存储桶的列表来填充您的代码；定义源Lambda zip文件时，只需展开资源列表。</p><p id="6d0e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">通过简单的名称格式策略和一些自定义代码，您可以创建一个系统，允许您上传一次S3文件，然后将其发布到任何支持AWS Lambda的AWS地区。</p><p id="b0a5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">除了上面的AWS博客帖子，我的IOD专家同事也有一些关于实现无服务器部署zen的最佳方法的想法:</p><p id="01af" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir"> Mikhail Shilkov写了一篇精彩的总结文章，介绍了为无服务器应用选择最佳部署工具的途径</strong><a class="ae lb" href="https://iamondemand.com/blog/choosing-the-best-deployment-tool-for-your-serverless-applications/" rel="noopener ugc nofollow" target="_blank"><strong class="kh ir"/></a><strong class="kh ir">。</strong>他对主题的深入探究是指导您决策过程的强大资源。</p><p id="1ab8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">斯洛博丹·斯托亚诺维奇详细概述了他简化Lambda部署的途径</strong><a class="ae lb" href="https://iamondemand.com/blog/how-i-simplified-my-lambda-deployments/" rel="noopener ugc nofollow" target="_blank"><strong class="kh ir"/></a><strong class="kh ir">；</strong>这是一个将Lambda部署转换成更易于维护的模式的很好的案例研究。</p><p id="022f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">同样，AWS提供的优秀Quickstart repo也提供了一个有用的云信息驱动的工具，用于从一个桶跨多个区域部署AWS Lambda代码。</p><h1 id="2d97" class="lc ld iq bd le lf lg lh li lj lk ll lm jw ln jx lo jz lp ka lq kc lr kd ls lt bi translated">摘要</h1><p id="477b" class="pw-post-body-paragraph kf kg iq kh b ki lu jr kk kl lv ju kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">AWS Lambda部署非常脆弱，开箱即用时容易出错，需要您费力地通过大量用户界面和对话流来创建您的函数、关联的执行角色以及托管您的可部署代码所需的资源。</p><p id="b678" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用CloudFormation，您可以将所有这些手动配置转换成一个模板文件，该文件能够描述整个应用程序堆栈。CloudFormation用一个可重复、可维护的过程取代了复杂且容易出错的手动部署Lambda函数的过程，该过程可以与您的代码一起维护。</p></div><div class="ab cl ml mm hu mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ij ik il im in"><p id="cbe0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="nn">这位专家定期为IOD博客写稿，这是一份面向开发者的科技内容周刊。</em> <a class="ae lb" href="https://iamondemand.com/blog/" rel="noopener ugc nofollow" target="_blank"> <em class="nn">退房更像这样</em> </a> <em class="nn">。</em></p></div></div>    
</body>
</html>