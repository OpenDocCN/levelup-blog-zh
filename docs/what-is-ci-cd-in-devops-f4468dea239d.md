# DevOps 中的 CI/CD 是什么

> 原文：<https://levelup.gitconnected.com/what-is-ci-cd-in-devops-f4468dea239d>

CI/CD 和 DevOps 一样吗？CI/CD 是 DevOps 的圣杯吗？

![](img/e279f7f767c926e71c38aa2d851f7eeb.png)

照片由 [Growtika 开发商营销](https://unsplash.com/@growtika_developer_marketing_agency?utm_source=medium&utm_medium=referral)在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄

[devo PS 到底是什么？](#32fc)
∘ [瀑布模式](#7357)
∘ [敏捷](#1e28)
∘[DevOps](#c936)
[深浅不一的 CI/CD](#53c1)
∘ [持续集成](#ad77)
∘ [持续交付](#8e10)
∘ [持续部署](#85ab)
[是 devo PS 需要的 CI/CD 吗？](#a10b)

DevOps 被吹捧为最新和最酷的软件开发方法，许多 DevOps 团队的目标是建立和维护 CI/CD 管道。实际上，CI/CD 和 DevOps 之间的关系更加复杂。

# DevOps 到底是什么？

## 瀑布模型

传统的软件开发生命周期由从需求收集、设计、开发、测试和部署到生产的一系列阶段组成。整个过程看起来像一个瀑布，因此被命名为“瀑布模型”

产品开发的每个阶段都由不同的团队负责。开发团队根据特性规范处理设计和实现。在代码被合并和构建之后，测试团队将测试测试二进制文件的质量控制，并签署发布。然后，发布或操作团队会将其部署到生产环境中，并监控任何问题。

当软件发布周期是几个月或几年时，瀑布模型是有意义的。例如，微软视窗系统的发布周期平均为三年。长周期允许团队在将产品发布给用户之前专注于他们的设计和质量需求。

![](img/a3ebaff242bcb63756a96537191e2ca8.png)

## 敏捷

当软件开发转向服务——又名 SaaS(软件即服务),瀑布模型失宠了，因为长的发布周期不能迎合快速的市场需求和用户需求。为了适应快速变化的需求，增量和迭代的开发和部署比单一的一次性版本更受欢迎。代替一个巨大的“瀑布”，小的发布周期被一遍又一遍地重复以提高质量和增加特性。敏捷宣言及其 12 条原则总结了这种迭代持续改进开发实践的总体方法。

![](img/e4371684e705931d44917d62b48aa18d.png)

[https://www . soldevelo . com/blog/is-agile-always-the-best-solution-for-software-development-projects/](https://www.soldevelo.com/blog/is-agile-always-the-best-solution-for-software-development-projects/)

## DevOps

[DevOps](https://en.wikipedia.org/wiki/DevOps) 则是一套结合了开发和运营的实践。瀑布模型中的功能团队往往是孤立的，协作围绕着分类会议、设计评审会议、功能规划会议等。通过结合开发和运营团队，开发人员拥有整个生产链和质量。

![](img/a1790452f094ef8f7488046c327e57a4.png)

敏捷和开发运维并不相互排斥。事实上，它们可以相互补充，因为敏捷和开发运维都旨在尽可能快速有效地将产品交付给用户。有了敏捷，团队可以专注于快速适应变化的需求、迭代的质量改进和团队间的协作。通过结合开发和操作，DevOps 团队可以通过为 CI/CD(持续集成/持续部署)构建自动化来专注于使开发过程更有效，这通常被吹捧为现代软件开发的圣杯。

# CI/CD 的不同色调

在 DevOps 中建立了 CI/CD 的上下文之后，需要阐明一些常见的误解。第一，CI 和 CD 不一样。

## 连续累计

CI 代表持续集成，它指的是自动化代码合并。代码合并是将不同的分支签入并合并到主分支中的过程。像 [Git](https://git-scm.com/) 这样的代码版本控制允许每个开发人员在本地分支上工作，然后将更改后的代码检入主分支。

如果只有几个开发人员，合并不同的分支将不是一个大问题。然而，在商业软件开发中，可能有多个存储库、分支和子分支。合并冲突是日常事务，你越是等待合并代码，问题就越严重。

为了减少合并冲突和构建失败，一些常见的最佳实践是对每次签入进行代码审查和自动化单元测试。只有当所有的自动化检查和测试通过时，它才允许签入被合并并进入构建过程。

## 连续交货

对于 CD，有两个版本。第一个版本被称为连续交付，这意味着产品在生产之前被自动合并、构建、测试和交付，但是没有被部署。您可能会问，为什么有人希望除了部署之外的一切都自动化。可能有许多不同的原因，但其中一个常见的原因是“有意为之”团队有意决定不自动化部署，以便他们执行手动测试并控制发布时间表。

许多硬件和设备团队坚持连续交付，因为大量的端到端测试只能手工完成。即使产品是 SaaS(软件即服务)，团队也会在他们的管道中设置一个“阻塞”或时间窗口，以便他们想在非高峰时间发布它。

![](img/0ffdebe94b2b896ec90957adad864962.png)

## 持续部署

CD 的第二个版本称为“持续部署”，我们通常将它与 CI/CD 联系在一起。在这种情况下，整个流水线都是自动化的，代码在没有任何人工参与的情况下一直发布到生产。为了使持续部署成为可能，持续测试是必需的，因为带着错误和质量问题部署到生产环境是没有意义的。

测试出现在从单元测试、集成测试、端到端测试等产品流水线的每个阶段。理想情况下，你有足够的单元测试覆盖所有主要功能和边缘情况。在一大组单元测试的坚实基础之上，您可以有一个更小的集中于集成问题的集成测试集。最后，您有一些端到端的测试，通常涉及 UI 元素。

![](img/72af7a3dd81673edb789270a30931d61.png)

测试金字塔

然而，为了使持续部署成为可能，持续测试并不会在产品发布后停止。在它发布之前和之后，您需要运行“金丝雀测试”，这是您在生产中运行的小测试用例，以查看是否有任何错误。“金丝雀测试”这个名字来源于古老的采矿实践，矿工们用金丝雀来观察矿井中的空气质量是否有毒。如果金丝雀死了，矿工就会知道是时候逃离了。类似地，金丝雀测试会触发警报，这样产品团队就可以快速取出发布的代码。在 CI/CD 管道中，使用回滚机制来自动完成这项工作。

![](img/83c13b7011dd1986505214727593766c.png)

在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上由 [Dieny Portinanni](https://unsplash.com/@dienyportinanni?utm_source=medium&utm_medium=referral) 拍摄的照片

当然，实际的产品 CI/CD 管道需要更多的测试、检查和监控。可能有多个区域，每个区域都有自己的管道。或者除了典型的构建、测试和生产之外，还可以添加多个阶段:例如，alpha、beta、gamma 等。

# DevOps 需要 CI/CD 吗？

最后，让我们回到 CI/CD 和 DevOps 之间的关系。CI/CD 是 DevOps 的终极目标吗？还是做 CI/CD 是 DevOps 的必备组件？上面的讨论表明事实并非如此。开发和发布产品有不同的形式，许多团队或者有意选择不自动发布，或者由于实际原因而不能进行完整的 CI/CD。如果服务不是在线 SaaS(软件即服务)，则很难实现完全 CI/CD。作为硬件或设备一部分的软件没有比改进的瀑布模型开发更好的选择了。如果你在这样的团队里，不要绝望！好消息是，你不做 CI/CD 并不是在犯罪。该团队仍然可以作为一个完全有能力的 DevOps 团队运作，并交付优秀的产品。重点是有效地、迭代地、快速地交付高质量的产品。重点应该是质量，而不是为您的渠道赢得 CI/CD 徽章。