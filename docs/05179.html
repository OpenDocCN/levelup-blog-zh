<html>
<head>
<title>Snap to Item Scrolling in SwiftUI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在SwiftUI中捕捉到项目滚动</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/snap-to-item-scrolling-debccdcbb22f?source=collection_archive---------3-----------------------#2020-08-10">https://levelup.gitconnected.com/snap-to-item-scrolling-debccdcbb22f?source=collection_archive---------3-----------------------#2020-08-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1689" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用此自定义ViewModifier技术在SwiftUI中实现“捕捉到项目”滚动。这个快速提示展示了如何为水平堆栈实现它。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/5c7800151e0d0afd6383cafe58ae041b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7POw9EWtOYBfRt9MH7WV3Q.png"/></div></div></figure><p id="b52d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">SwiftUI最大的缺点之一就是，当我滚动到<code class="fe lq lr ls lt b">ScrollView</code>时，无法捕捉到视图。下面是我使用的一种技术，通过自定义的<code class="fe lq lr ls lt b">ViewModifier</code>在我的<code class="fe lq lr ls lt b">HStack</code>上实现了捕捉。</p><blockquote class="lu lv lw"><p id="a38a" class="ku kv lx kw b kx ky ju kz la lb jx lc ly le lf lg lz li lj lk ma lm ln lo lp im bi translated">在开始之前，请考虑使用此<a class="ae mb" href="https://trailingclosure.com/signup/?utm_source=trailing_closure&amp;utm_medium=blog_post&amp;utm_campaign=snap_scrolling" rel="noopener ugc nofollow" target="_blank">链接</a>订阅，如果您没有在<a class="ae mb" href="https://trailingclosure.com/?utm_source=trailing_closure&amp;utm_medium=blog_post&amp;utm_campaign=snap_scrolling" rel="noopener ugc nofollow" target="_blank">TrailingClosure.com</a>上阅读此文，请找时间来查看！</p></blockquote><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mc md l"/></div></figure><h2 id="67e4" class="me mf it bd mg mh mi dn mj mk ml dp mm ld mn mo mp lh mq mr ms ll mt mu mv mw bi translated">概观</h2><p id="2810" class="pw-post-body-paragraph ku kv it kw b kx mx ju kz la my jx lc ld mz lf lg lh na lj lk ll nb ln lo lp im bi translated">这种技术不是使用<code class="fe lq lr ls lt b">ScrollView</code>，而是使用具有动态变化的x偏移的<code class="fe lq lr ls lt b">HStack</code>来模拟滚动。要更改偏移，我使用<code class="fe lq lr ls lt b">DragGesture</code>计算滚动距离。你会在下面看到里面的<code class="fe lq lr ls lt b">DragGesture</code> <code class="fe lq lr ls lt b">onChanged()</code>闭包那我更新一下<code class="fe lq lr ls lt b">dragOffset</code>。这使得<code class="fe lq lr ls lt b">HStack</code>在用户拖过屏幕时呈现为滚动。最后，当调用<code class="fe lq lr ls lt b">DragGesture</code>函数<code class="fe lq lr ls lt b">onEnded()</code>时，我计算哪个视图项最接近，然后应用最终偏移。这将创建“捕捉”效果。</p><p id="e3fc" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">一个潜在的缺点是，创建<code class="fe lq lr ls lt b">ViewModifier</code>时必须提供视图项的宽度和间距。这意味着具有动态变化宽度的视图不能使用此技术。<code class="fe lq lr ls lt b">ViewModifier</code>必须知道宽度，才能计算视图项目的正确位置。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nc md l"/></div></figure><h1 id="b824" class="nd mf it bd mg ne nf ng mj nh ni nj mm jz nk ka mp kc nl kd ms kf nm kg mv nn bi translated">使用示例</h1><p id="ecc1" class="pw-post-body-paragraph ku kv it kw b kx mx ju kz la my jx lc ld mz lf lg lh na lj lk ll nb ln lo lp im bi translated">给定一系列颜色，你可以看到这个自定义<code class="fe lq lr ls lt b">ViewModifier</code>如何应用于<code class="fe lq lr ls lt b">HStack</code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nc md l"/></div></figure><h2 id="79be" class="me mf it bd mg mh mi dn mj mk ml dp mm ld mn mo mp lh mq mr ms ll mt mu mv mw bi translated">让我们看看你的成就吧！</h2><p id="962a" class="pw-post-body-paragraph ku kv it kw b kx mx ju kz la my jx lc ld mz lf lg lh na lj lk ll nb ln lo lp im bi translated">我们想看看你用这个教程做了什么！把照片发给我们！可以在Twitter<a class="ae mb" href="https://twitter.com/TrailingClosure" rel="noopener ugc nofollow" target="_blank">@ trailing closure</a>、Instagram 上找到我们，或者发电子邮件到<!-- -->howdy@TrailingClosure.com<!-- -->联系我们。</p></div></div>    
</body>
</html>