<html>
<head>
<title>How to Handle Routing in Your Next.js App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在你的Next.js应用中处理路由</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-handle-routing-in-your-next-js-app-6ba71280b922?source=collection_archive---------19-----------------------#2021-01-12">https://levelup.gitconnected.com/how-to-handle-routing-in-your-next-js-app-6ba71280b922?source=collection_archive---------19-----------------------#2021-01-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="5b92" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">查看页面目录、动态路由、链接组件和用户外部挂钩</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/dabd948cba9c96a750614d27007ee6a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_dAAErKqw4_yhIfr"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">沃尔特“切托巴”德博弗在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="7b2a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Next.js是一个React框架，支持混合服务器端呈现和为React应用程序生成静态页面。与传统的React应用程序相比，使用Next.js有很多好处，包括更好的性能和SEO。如果你是Next.js的新手，可以看看下面的文章来了解这个框架的概况。</p><div class="lv lw gp gr lx ly"><a href="https://medium.com/dev-genius/what-i-learned-from-the-create-a-next-js-app-tutorial-1f506b56173d" rel="noopener follow" target="_blank"><div class="lz ab fo"><div class="ma ab mb cl cj mc"><h2 class="bd iu gy z fp md fr fs me fu fw is bi translated">我从Create a Next.js应用程序教程中学到了什么</h2><div class="mf l"><h3 class="bd b gy z fp md fr fs me fu fw dk translated">Next.js路由、样式、预渲染和部署简介</h3></div><div class="mg l"><p class="bd b dl z fp md fr fs me fu fw dk translated">medium.com</p></div></div><div class="mh l"><div class="mi l mj mk ml mh mm ks ly"/></div></div></a></div><p id="aee7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我们将了解Next.js应用程序中的路由。这将包括查看页面目录，如何处理动态路由，以及理解Link组件和useRouter挂钩。</p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="a2b4" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">页面目录中的简单路由</h1><p id="7870" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">开始使用Next.js应用程序的最简单方法是运行以下命令。</p><pre class="kj kk kl km gt nr ns nt nu aw nv bi"><span id="f4f1" class="nw mv it ns b gy nx ny l nz oa">npx create-next-app YOUR-APP-NAME</span></pre><p id="cae5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">类似于使用create-react-app，这将为您设置一个样板应用程序。在应用程序中，您将看到以下页面目录。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/225cee2afeece61b1ae088549f671b5e.png" data-original-src="https://miro.medium.com/v2/resize:fit:454/format:webp/1*q7XPiQvI6RvcJnvqCJBsuQ.png"/></div></figure><p id="040d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Next.js有一个基于文件系统的路由器，建立在页面的概念上。pages目录中的每个文件都与其文件名相关联。例如，如果您要创建一个名为about.js的文件，那么它将与`/about '路径相关联。如果您创建一个名为contact.js的文件，那么它将与`/contact '路由相关联。index.js文件自动成为该目录的根目录，这意味着与`/'路径相关联。</p><p id="79c5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">还有一个名为_app.js的文件，这个app组件比较特殊，因为它在应用程序的所有页面中都是持久的。它可用于通过应用程序共享全局样式、布局或数据。</p><p id="dd73" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以使用嵌套文件夹结构创建嵌套路线。例如，您可以创建一个帖子文件夹，并在该文件夹中包含多个文件。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/d7cd3ef6f61e8df586194f343b900ae7.png" data-original-src="https://miro.medium.com/v2/resize:fit:452/format:webp/1*zL6p6SriNgEdpBw9w3_Y3Q.png"/></div></figure><p id="dadd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">first-post.js文件将与`/posts/first-post '路径相关联。second-post.js文件将与`/posts/second-post '路径相关联。与我们的根目录一样，posts文件夹中的index.js文件将与`/posts '路径相关联。</p><p id="5b93" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们还没有谈到的最后一个文件夹是api文件夹。Next.js允许您构建自己的API。该文件夹中的任何文件都将被视为API端点，而不是页面。我们不会在本文中深入探讨这个主题，但只需知道使用Next.js这是可能的。</p><h1 id="1823" class="mu mv it bd mw mx od mz na nb oe nd ne jz of ka ng kc og kd ni kf oh kg nk nl bi translated">动态路线</h1><p id="3eb5" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">要在Next.js中处理动态路由，可以在页面中添加括号。还记得我们有多个文件的帖子文件夹吗？我们可以用方括号把它变成一个动态文件。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/b77cbcdc3f2db2aacc8d19a9a6491d26.png" data-original-src="https://miro.medium.com/v2/resize:fit:486/format:webp/1*7x19_YIhiPrjzEW6FHOZcA.png"/></div></figure><p id="f246" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，如果我们转到`/posts/first-post '或`/posts/second-post '路径，它将与[id]匹配。js文件。我们仍然可以使用posts目录中的index.js文件来访问`/posts '路径。</p><p id="bb85" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您也可以通过在文件夹中添加方括号来包含嵌套的动态路由。在下面的例子中，你可以有一个路径，比如`/posts/first-post/main`。这个会被posts--&gt;[title]-&gt;[id]. js抓住。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/159464b66ffcd64fddb31b5be7de3d3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:484/format:webp/1*SNeAVc-OkawJiN30lhccJw.png"/></div></figure><p id="99df" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以嵌套任意多的文件夹，但通常情况下，您不需要超过4或5层。[标题]文件夹和[id]。js文件可以被命名为任何名称，只要它们带有方括号。无论我们将它们命名为什么，它们都将被用作查询键，稍后当我们使用useRouter钩子时，我们将看到一个例子。</p><h1 id="429d" class="mu mv it bd mw mx od mz na nb oe nd ne jz of ka ng kc og kd ni kf oh kg nk nl bi translated">链接组件</h1><p id="70d6" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">Next.js应用程序中的导航可以在客户端处理。这意味着路由是由页面上加载的JavaScript在内部处理的。当用户单击一个链接时，URL会改变，但它不会向服务器发出请求。通过改变URL，它改变了应用程序的状态，从而产生了不同的页面视图。</p><p id="e1cf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以通过使用<a class="ae ky" href="https://nextjs.org/docs/api-reference/next/link" rel="noopener ugc nofollow" target="_blank">链接</a>组件来实现。您首先需要像下面这样导入链接组件。</p><pre class="kj kk kl km gt nr ns nt nu aw nv bi"><span id="5e87" class="nw mv it ns b gy nx ny l nz oa">import Link from 'next/link';</span></pre><p id="ec48" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，您需要做的就是用链接组件包装一个<a>标签，并向链接添加一个“href”属性。每当我们点击Home </a><a>标签，它就会把我们送到`/`路线。</a></p><pre class="kj kk kl km gt nr ns nt nu aw nv bi"><span id="5b76" class="nw mv it ns b gy nx ny l nz oa">&lt;Link href="/"&gt;<br/>  &lt;a&gt;Home&lt;/a&gt;<br/>&lt;/Link&gt;</span></pre><p id="d39c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果要链接到动态路径，可以使用插值法。</p><pre class="kj kk kl km gt nr ns nt nu aw nv bi"><span id="065f" class="nw mv it ns b gy nx ny l nz oa">&lt;Link href={`/posts/${id}`}&gt;<br/>  &lt;a&gt;First Post&lt;/a&gt;<br/>&lt;/Link&gt;</span></pre><h1 id="0e27" class="mu mv it bd mw mx od mz na nb oe nd ne jz of ka ng kc og kd ni kf oh kg nk nl bi translated">用户外部挂钩</h1><p id="ac36" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">如果需要访问路由器对象，可以使用<a class="ae ky" href="https://nextjs.org/docs/api-reference/next/router#userouter" rel="noopener ugc nofollow" target="_blank"> useRouter </a>钩子。通常，这将用于访问或控制路线。</p><p id="455d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以简单地导入useRouter钩子，并在功能组件内部使用它。</p><pre class="kj kk kl km gt nr ns nt nu aw nv bi"><span id="958b" class="nw mv it ns b gy nx ny l nz oa">import { useRouter } from 'next/router';</span></pre><p id="c72c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">useRouter对象包含许多属性和方法。</p><p id="c90e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在下图中，我们在`/ post/first-post '路径上。如果你看一下下面的查询对象，你会看到<code class="fe ok ol om ns b">query: {id: "first-post"}</code>。记住[id]。我们之前创建的用于添加动态路由的js文件？这是我们访问路线查询的方式。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi on"><img src="../Images/b7f0ff62b06e1e32e10ca832f33d0242.png" data-original-src="https://miro.medium.com/v2/resize:fit:646/format:webp/1*Jj4At9we9j26Wf1-z3wICA.png"/></div></figure></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h1 id="f709" class="mu mv it bd mw mx my mz na nb nc nd ne jz nf ka ng kc nh kd ni kf nj kg nk nl bi translated">包扎</h1><p id="91c0" class="pw-post-body-paragraph kz la it lb b lc nm ju le lf nn jx lh li no lk ll lm np lo lp lq nq ls lt lu im bi translated">在Next.js中路由很简单！它可能会与动态路线有点混淆，但一旦你掌握了它，你应该没有问题。当谈到路由时，有更多的高级特性，但我们将把它留到以后再说。您应该能够用我们在本文中学到的知识为应用程序设置路由。</p><p id="8b7d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我真的很喜欢它内置在Next.js中的方式，你不需要安装任何库，比如典型react应用程序中的react-router。Next.js的另一个好处是他们有一个404页面，你可以自定义。您需要做的就是在pages目录中创建一个“404.js”文件。</p><p id="92fd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读！最近，我真的很喜欢学习Next.js的特性，并用它来构建我的项目。如果你想了解更多关于路由的知识，可以看看他们下面的文档。</p><div class="lv lw gp gr lx ly"><a href="https://nextjs.org/docs/routing/introduction" rel="noopener  ugc nofollow" target="_blank"><div class="lz ab fo"><div class="ma ab mb cl cj mc"><h2 class="bd iu gy z fp md fr fs me fu fw is bi translated">路由:简介| Next.js</h2><div class="mf l"><h3 class="bd b gy z fp md fr fs me fu fw dk translated">Next.js有一个基于文件系统的路由器，建立在页面的概念上。当文件被添加到pages目录时，它…</h3></div><div class="mg l"><p class="bd b dl z fp md fr fs me fu fw dk translated">nextjs.org</p></div></div><div class="mh l"><div class="oo l mj mk ml mh mm ks ly"/></div></div></a></div></div></div>    
</body>
</html>