<html>
<head>
<title>Surprising behavior of for…in loops</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">for…在循环中的惊人行为</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/surprising-behavior-of-for-in-loop-9854ed3b823c?source=collection_archive---------7-----------------------#2020-03-20">https://levelup.gitconnected.com/surprising-behavior-of-for-in-loop-9854ed3b823c?source=collection_archive---------7-----------------------#2020-03-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="b0a8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">了解如何在使用for…in循环遍历对象时防止代码中出现错误。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/5a116e94c1a4578d081e4d34d6fa0bde.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*iArOdBNWdhWVI5yE"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated"><a class="ae lb" href="https://unsplash.com/@etienneblg?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">艾蒂安·布朗热</a>在<a class="ae lb" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="517c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在本文中，我们将看到如何使用<code class="fe lc ld le lf b">for...in</code>循环来避免不可预测的错误。</p><p id="f9f1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">看看下面的代码:</p><pre class="km kn ko kp gt lg lf lh li aw lj bi"><span id="c91f" class="lk ll iq lf b gy lm ln l lo lp">const user = { name: 'David', age: 30 };<br/>for (key in user) {<br/> console.log(user[key]);<br/>}</span></pre><p id="147b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你能预测上面代码的输出吗？</p><p id="37b0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="lq">输出将是:</em> <br/>大卫<br/> 30</p><p id="4332" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是意料之中的。</p><p id="a408" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在看一下下面的代码:</p><pre class="km kn ko kp gt lg lf lh li aw lj bi"><span id="9c5f" class="lk ll iq lf b gy lm ln l lo lp">const user = { name: 'David', age: 30 };</span><span id="e8be" class="lk ll iq lf b gy lr ln l lo lp">Object.prototype.color = 'red';<br/>Object.prototype.display = function() {};</span><span id="66c6" class="lk ll iq lf b gy lr ln l lo lp">for (key in user) {<br/> console.log(user[key]);<br/>}</span></pre><p id="f952" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在的产量会是多少？</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ls"><img src="../Images/d4d3b9fc6f69725f48f723bdb261b304.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RFSvOksFHnN-yB8fuE4ZKA.png"/></div></div></figure><p id="feea" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以它也打印了<code class="fe lc ld le lf b">color</code>属性和<code class="fe lc ld le lf b">display</code>函数，这显然不是我们所期望的。</p><p id="1ee9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因此，如果在你的代码中的某个地方，你或某人已经向<code class="fe lc ld le lf b">Object</code>原型添加了一些属性或方法，那么当使用<code class="fe lc ld le lf b">for...in</code>循环时，它们将会显示出来。</p><p id="3df3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因此<code class="fe lc ld le lf b">for...in</code>循环将显示它自己的属性以及它的原型属性。我们可以使用<code class="fe lc ld le lf b">hasOwnProperty</code>方法解决这个问题。</p><p id="7293" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">object . prototype . hasownproperty:</strong></p><p id="b05d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">它具有以下语法:</p><pre class="km kn ko kp gt lg lf lh li aw lj bi"><span id="0f85" class="lk ll iq lf b gy lm ln l lo lp">obj.hasOwnProperty(prop)</span></pre><p id="4d0f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果提供的<code class="fe lc ld le lf b">prop</code>是<code class="fe lc ld le lf b">obj’s</code>自己声明的属性，则该方法返回true。</p><pre class="km kn ko kp gt lg lf lh li aw lj bi"><span id="b5cf" class="lk ll iq lf b gy lm ln l lo lp">const user = { name: 'David', age: 30 };</span><span id="1860" class="lk ll iq lf b gy lr ln l lo lp">Object.prototype.color = 'red';<br/>Object.prototype.display = function() {};</span><span id="ae38" class="lk ll iq lf b gy lr ln l lo lp">for (key in user) {<br/> <strong class="lf ir">if (user.hasOwnProperty(key)) {</strong><br/>  console.log(user[key]);<br/> }<br/>}</span></pre><p id="9c39" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，输出将如预期的那样出现</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi lt"><img src="../Images/ca2cda911033ec61a5e9a0b110cf448e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-siqMC8BSVywFxHEljP7ww.png"/></div></div></figure><p id="05f6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有另一种方法可以解决这个问题，使用<code class="fe lc ld le lf b">Object.keys</code>方法和<code class="fe lc ld le lf b">for...of</code>循环</p><p id="6d2e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> Object.keys: </strong></p><p id="d1b6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">它具有以下语法:</p><pre class="km kn ko kp gt lg lf lh li aw lj bi"><span id="0729" class="lk ll iq lf b gy lm ln l lo lp">Object.keys(obj)</span></pre><p id="d73a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">此方法返回给定对象自己的可枚举属性名的数组。</p><pre class="km kn ko kp gt lg lf lh li aw lj bi"><span id="a731" class="lk ll iq lf b gy lm ln l lo lp">const user = { name: 'David', age: 30 };</span><span id="7c18" class="lk ll iq lf b gy lr ln l lo lp">Object.prototype.color = 'red';<br/>Object.prototype.display = function() {};</span><span id="38ee" class="lk ll iq lf b gy lr ln l lo lp">for (key of Object.keys(user)) {<br/> console.log(user[key]);<br/>}</span></pre><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi lu"><img src="../Images/6f935a23f9836ef39255a5423b964674.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mYSRtojgqOdfME9FSJPBdw.png"/></div></div></figure><p id="3d5c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因此，在使用<code class="fe lc ld le lf b">for...in</code>循环时，您可能需要注意这些事情。</p><p id="b99b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">今天到此为止。希望你今天学到了新东西。</p><p id="df75" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">不要忘记订阅我的每周简讯，里面有惊人的技巧、窍门和文章，直接在这里的收件箱里。T29】</p></div></div>    
</body>
</html>