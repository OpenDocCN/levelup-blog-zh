<html>
<head>
<title>Async pipe in Angular from scratch</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从零开始角度异步管道</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/async-pipe-in-angular-from-scratch-254bc8a37943?source=collection_archive---------4-----------------------#2022-10-29">https://levelup.gitconnected.com/async-pipe-in-angular-from-scratch-254bc8a37943?source=collection_archive---------4-----------------------#2022-10-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/d6ec516fd07db3731e6d5e70037b58be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*374F7L22gsX3DxRrnSZU0Q.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">角形基本管道</figcaption></figure></div><div class="ab cl kc kd hu ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="ij ik il im in"><h1 id="1b4d" class="kj kk iq bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated"><strong class="ak">但是什么是有角的管子呢？</strong></h1><p id="f87b" class="pw-post-body-paragraph lh li iq lj b lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">管道用于转换输入数据。例如，我们有一个异步管道，它接受一个承诺或可观察值，并在可观察值的情况下将其转换为已解析值或最新值。</p><h2 id="621d" class="mf kk iq bd kl mg mh dn kp mi mj dp kt ls mk ml kx lw mm mn lb ma mo mp lf mq bi translated">角形内置异步管道</h2><p id="553f" class="pw-post-body-paragraph lh li iq lj b lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">Angular有一个内置的管道<strong class="lj ir"> <em class="mr"> async </em> </strong> <em class="mr"> </em>我们将从头开始制作它，但首先要了解它是如何工作的</p><figure class="mt mu mv mw gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ms"><img src="../Images/dc156ab09c4230f1bb1006bef3467640.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*clNS5tvfkXEVR3qkgoq8Tw.png"/></div></div></figure><p id="7601" class="pw-post-body-paragraph lh li iq lj b lk mx lm ln lo my lq lr ls mz lu lv lw na ly lz ma nb mc md me ij bi translated">如你所见，我们有一个类型为promise <strong class="lj ir"> <em class="mr"> name </em> </strong>的变量，它将在3秒后解析为“Angular 14”。让我们试着在HTML文件中使用它</p><figure class="mt mu mv mw gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nc"><img src="../Images/229fbddcabc25ba184d687cc766464ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NeUeiXUjN6euyiccECCoww.png"/></div></div></figure><p id="75d1" class="pw-post-body-paragraph lh li iq lj b lk mx lm ln lo my lq lr ls mz lu lv lw na ly lz ma nb mc md me ij bi translated">但是在输出中，我们看不到3秒后的角度14，而是在输出中显示[目标承诺]</p><p id="92af" class="pw-post-body-paragraph lh li iq lj b lk mx lm ln lo my lq lr ls mz lu lv lw na ly lz ma nb mc md me ij bi translated">所以让我们使用异步管道来解决这个问题</p><figure class="mt mu mv mw gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nc"><img src="../Images/3f62dc81edd889a93c3d9a35c8c4e640.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*je0vJ9OPMRGn_l5P2JyGAw.png"/></div></div></figure><p id="94b8" class="pw-post-body-paragraph lh li iq lj b lk mx lm ln lo my lq lr ls mz lu lv lw na ly lz ma nb mc md me ij bi translated">因此，通过添加<code class="fe nd ne nf ng b">| async</code>，我们可以看到它在3秒后显示“角度14”</p><h1 id="7d0d" class="kj kk iq bd kl km nh ko kp kq ni ks kt ku nj kw kx ky nk la lb lc nl le lf lg bi translated"><strong class="ak">好了，现在有趣的部分来了，让我们试着从头开始为这个管道编码。</strong></h1><figure class="mt mu mv mw gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nc"><img src="../Images/c3306d3928d3f3ba749b11e307fd8df4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xpzxhjkweq8_UfYWYis0ZQ.png"/></div></div></figure><p id="f5aa" class="pw-post-body-paragraph lh li iq lj b lk mx lm ln lo my lq lr ls mz lu lv lw na ly lz ma nb mc md me ij bi translated">这是怎么回事？</p><p id="f7a6" class="pw-post-body-paragraph lh li iq lj b lk mx lm ln lo my lq lr ls mz lu lv lw na ly lz ma nb mc md me ij bi translated">看，我们通过设置<code class="fe nd ne nf ng b">pure=false</code>使用了不纯管道，因为我们想在<code class="fe nd ne nf ng b">value(this.value)</code>改变时调用转换方法。</p><p id="8e98" class="pw-post-body-paragraph lh li iq lj b lk mx lm ln lo my lq lr ls mz lu lv lw na ly lz ma nb mc md me ij bi translated">最初，该值为null，因此当承诺处于待定状态时，它将首先返回null，但3秒钟后，它会将该值更新为我们传递的任何数据，这将导致transorm方法重新运行，我们将在输出中看到“Angular 14”。</p><p id="35a1" class="pw-post-body-paragraph lh li iq lj b lk mx lm ln lo my lq lr ls mz lu lv lw na ly lz ma nb mc md me ij bi translated">这个怎么用？</p><p id="f48e" class="pw-post-body-paragraph lh li iq lj b lk mx lm ln lo my lq lr ls mz lu lv lw na ly lz ma nb mc md me ij bi translated">将CustomAsync类添加到app.module.ts的声明数组中，并使用{{name | customAsync}}</p><p id="010f" class="pw-post-body-paragraph lh li iq lj b lk mx lm ln lo my lq lr ls mz lu lv lw na ly lz ma nb mc md me ij bi translated">检查它的演示</p><p id="c6af" class="pw-post-body-paragraph lh li iq lj b lk mx lm ln lo my lq lr ls mz lu lv lw na ly lz ma nb mc md me ij bi translated"><a class="ae nm" href="https://stackblitz.com/edit/angular-ivy-oamp4e" rel="noopener ugc nofollow" target="_blank">https://stackblitz.com/edit/angular-ivy-oamp4e</a></p></div></div>    
</body>
</html>