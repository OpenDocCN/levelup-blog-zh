<html>
<head>
<title>6 Ways to Improve Your Web App’s Security Now</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">现在提高你的网络应用安全性的6种方法</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/6-ways-to-improve-your-web-apps-security-now-164ff76661b8?source=collection_archive---------7-----------------------#2020-08-01">https://levelup.gitconnected.com/6-ways-to-improve-your-web-apps-security-now-164ff76661b8?source=collection_archive---------7-----------------------#2020-08-01</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="04d2" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">针对常见漏洞的技术无关缓解措施</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/bffb16f573b0c0566dc50d37fec1d74c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*YiFlPBfQyDIK4tKU"/></div></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated"><a class="ae kz" href="https://unsplash.com/@sincerelymedia?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">真诚媒体</a>在<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="a235" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">作为开发人员，编写代码不仅仅是我们的工作。我们负责交付经过测试、功能齐全且安全的软件。所有这些要求都同样复杂。但我感觉这些并不总是被平等对待。</p><p id="b77c" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">应用安全并不总是一等公民。但应该是。客户向我们提供他们的数据，并希望我们将其保存在安全的地方。让他们容易被利用，我们就有失去客户信任和业务的风险。</p><p id="13be" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我写这个故事是为了帮助你提高你的web应用程序的安全性。我将介绍可以在任何web应用程序中快速实现的缓解措施。因此，我挑选了<a class="ae kz" href="https://owasp.org/www-project-top-ten/" rel="noopener ugc nofollow" target="_blank">十个最常见的安全风险</a>中的五个，并为跨站请求伪造添加了专门的一章。每个部分由一个或多个漏洞和多个缓解措施组成。</p><ol class=""><li id="60f4" class="lw lx iu lc b ld le lg lh lj ly ln lz lr ma lv mb mc md me bi translated"><a class="ae kz" href="https://owasp.org/www-project-top-ten/OWASP_Top_Ten_2017/Top_10-2017_A7-Cross-Site_Scripting_(XSS)" rel="noopener ugc nofollow" target="_blank"> <strong class="lc iv">跨站请求伪造</strong> </a></li><li id="145a" class="lw lx iu lc b ld mf lg mg lj mh ln mi lr mj lv mb mc md me bi translated"><a class="ae kz" href="https://owasp.org/www-project-top-ten/OWASP_Top_Ten_2017/Top_10-2017_A7-Cross-Site_Scripting_(XSS)" rel="noopener ugc nofollow" target="_blank"> <strong class="lc iv">跨站脚本</strong> </a></li><li id="2ba9" class="lw lx iu lc b ld mf lg mg lj mh ln mi lr mj lv mb mc md me bi translated"><a class="ae kz" href="https://owasp.org/www-project-top-ten/OWASP_Top_Ten_2017/Top_10-2017_A6-Security_Misconfiguration" rel="noopener ugc nofollow" target="_blank"> <strong class="lc iv">安全误配置</strong> </a></li><li id="195e" class="lw lx iu lc b ld mf lg mg lj mh ln mi lr mj lv mb mc md me bi translated"><a class="ae kz" href="https://owasp.org/www-project-top-ten/OWASP_Top_Ten_2017/Top_10-2017_A2-Broken_Authentication" rel="noopener ugc nofollow" target="_blank"> <strong class="lc iv">破解认证</strong> </a></li><li id="d0d2" class="lw lx iu lc b ld mf lg mg lj mh ln mi lr mj lv mb mc md me bi translated"><a class="ae kz" href="https://owasp.org/www-project-top-ten/OWASP_Top_Ten_2017/Top_10-2017_A3-Sensitive_Data_Exposure" rel="noopener ugc nofollow" target="_blank"> <strong class="lc iv">敏感数据曝光</strong> </a></li><li id="bc79" class="lw lx iu lc b ld mf lg mg lj mh ln mi lr mj lv mb mc md me bi translated"><a class="ae kz" href="https://owasp.org/www-project-top-ten/OWASP_Top_Ten_2017/Top_10-2017_A9-Using_Components_with_Known_Vulnerabilities" rel="noopener ugc nofollow" target="_blank"> <strong class="lc iv">利用已知漏洞的组件</strong> </a></li></ol><h1 id="c526" class="mk ml iu bd mm mn mo mp mq mr ms mt mu ka mv kb mw kd mx ke my kg mz kh na nb bi translated">跨站点请求伪造</h1><blockquote class="nc nd ne"><p id="82a3" class="la lb nf lc b ld le jv lf lg lh jy li ng lk ll lm nh lo lp lq ni ls lt lu lv in bi translated">跨站点请求伪造(CSRF)是一种攻击，它迫使最终用户在他们当前已通过身份验证的web应用程序上执行不需要的操作。owasp.org/www-community/attacks/csrf<br/><a class="ae kz" href="https://owasp.org/www-community/attacks/csrf" rel="noopener ugc nofollow" target="_blank"/>/</p></blockquote><h2 id="8116" class="nj ml iu bd mm nk nl dn mq nm nn dp mu lj no np mw ln nq nr my lr ns nt na nu bi translated">攻击</h2><p id="9100" class="pw-post-body-paragraph la lb iu lc b ld nv jv lf lg nw jy li lj nx ll lm ln ny lp lq lr nz lt lu lv in bi translated">如果攻击者可以在没有通知的情况下代表用户执行操作，就会发生CSRF攻击。</p><ol class=""><li id="6661" class="lw lx iu lc b ld le lg lh lj ly ln lz lr ma lv mb mc md me bi translated">我们的用户登录到<strong class="lc iv">trustful.site.com。</strong></li><li id="ab4f" class="lw lx iu lc b ld mf lg mg lj mh ln mi lr mj lv mb mc md me bi translated"><strong class="lc iv">trustful.site.com</strong>设置一个会话cookie。</li><li id="4b8e" class="lw lx iu lc b ld mf lg mg lj mh ln mi lr mj lv mb mc md me bi translated">攻击者诱骗用户导航到<strong class="lc iv">evil.syte.com。</strong></li><li id="5f03" class="lw lx iu lc b ld mf lg mg lj mh ln mi lr mj lv mb mc md me bi translated"><strong class="lc iv">evil.syte.com称trustful.site.com为后端。</strong></li><li id="e767" class="lw lx iu lc b ld mf lg mg lj mh ln mi lr mj lv mb mc md me bi translated">后端应用程序<strong class="lc iv">验证会话cookie并执行请求。</strong></li></ol><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj oa"><img src="../Images/59283b31e8c13c6a2c00d9c267527dbc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1016/format:webp/1*5f9UErn2LKxVXb0kva-frQ.png"/></div></figure><p id="9ed3" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">很可怕，不是吗？为什么会这样？默认情况下，Cookies被发送到与其域值相匹配的主机名。但并不是所有的浏览器都会检查当前网页是否与cookies的域值相匹配。它们使用HTTP请求的目标主机来确定要附加哪些cookies。</p><blockquote class="nc nd ne"><p id="1e73" class="la lb nf lc b ld le jv lf lg lh jy li ng lk ll lm nh lo lp lq ni ls lt lu lv in bi translated">域属性指定cookie将被发送到的那些主机。例如，如果域属性的值是<br/>“example . com”，则用户代理在向example.com发出HTTP请求时会将cookie包含在Cookie <br/>头中..].<br/><a class="ae kz" href="https://tools.ietf.org/html/rfc6265#section-4.1.2" rel="noopener ugc nofollow" target="_blank">tools.ietf.org/html/rfc6265#section-4.1.2</a></p></blockquote><p id="39a0" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">因此，只要会话cookie有效，<strong class="lc iv">evil.syte.com</strong>就可以代表用户执行动作。</p><h2 id="79ec" class="nj ml iu bd mm nk nl dn mq nm nn dp mu lj no np mw ln nq nr my lr ns nt na nu bi translated">缓解措施</h2><p id="8e9e" class="pw-post-body-paragraph la lb iu lc b ld nv jv lf lg nw jy li lj nx ll lm ln ny lp lq lr nz lt lu lv in bi translated">我们可以做三件事来减轻CSRF的风险:</p><ul class=""><li id="8e11" class="lw lx iu lc b ld le lg lh lj ly ln lz lr ma lv ob mc md me bi translated">仅通过安全的HTTPs连接发送cookies，</li><li id="9504" class="lw lx iu lc b ld mf lg mg lj mh ln mi lr mj lv ob mc md me bi translated">限制对cookies的访问，以及</li><li id="fd83" class="lw lx iu lc b ld mf lg mg lj mh ln mi lr mj lv ob mc md me bi translated">阻止浏览器从第三方网站发送cookie。</li></ul><p id="cc2c" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">为此，<a class="ae kz" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie" rel="noopener ugc nofollow" target="_blank">设置</a>以下cookie属性:</p><ul class=""><li id="6051" class="lw lx iu lc b ld le lg lh lj ly ln lz lr ma lv ob mc md me bi translated"><code class="fe oc od oe of b">Secure</code></li><li id="ef54" class="lw lx iu lc b ld mf lg mg lj mh ln mi lr mj lv ob mc md me bi translated"><code class="fe oc od oe of b">HttpOnly</code></li><li id="9a6c" class="lw lx iu lc b ld mf lg mg lj mh ln mi lr mj lv ob mc md me bi translated"><code class="fe oc od oe of b">SameSite=strict</code></li></ul><h1 id="2cd0" class="mk ml iu bd mm mn mo mp mq mr ms mt mu ka mv kb mw kd mx ke my kg mz kh na nb bi translated">跨站点脚本</h1><blockquote class="nc nd ne"><p id="8dd1" class="la lb nf lc b ld le jv lf lg lh jy li ng lk ll lm nh lo lp lq ni ls lt lu lv in bi translated">跨站脚本(XSS)攻击是一种注入，其中恶意脚本被注入到良性和可信的网站中。当攻击者使用web应用程序向不同的最终用户发送恶意代码(通常以浏览器端脚本的形式)时，就会发生XSS攻击。<br/><a class="ae kz" href="https://owasp.org/www-community/attacks/xss/" rel="noopener ugc nofollow" target="_blank">owasp.org/www-community/attacks/xss/</a></p></blockquote><h2 id="1d5e" class="nj ml iu bd mm nk nl dn mq nm nn dp mu lj no np mw ln nq nr my lr ns nt na nu bi translated">攻击</h2><p id="e46a" class="pw-post-body-paragraph la lb iu lc b ld nv jv lf lg nw jy li lj nx ll lm ln ny lp lq lr nz lt lu lv in bi translated">对XSS的攻击需要两个先决条件。首先，攻击者必须将代码注入web应用程序。第二，web应用程序必须盲目地执行它得到的所有脚本。与CSRF的攻击不同，不一定有第三方网站参与其中。</p><p id="db4b" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">跨站点脚本攻击可能涉及保存在数据库中的代码，或者在运行时注入的代码。对于下面的例子，我们将着重于前者。</p><ol class=""><li id="ecf8" class="lw lx iu lc b ld le lg lh lj ly ln lz lr ma lv mb mc md me bi translated">攻击者通过未经服务器验证的字段将恶意脚本插入到我们的数据库中。</li><li id="468e" class="lw lx iu lc b ld mf lg mg lj mh ln mi lr mj lv mb mc md me bi translated">攻击者给我们的用户发送了一个到<strong class="lc iv">trustful.site.com的链接。他知道这个页面会返回危险的脚本。</strong></li><li id="e84f" class="lw lx iu lc b ld mf lg mg lj mh ln mi lr mj lv mb mc md me bi translated"><strong class="lc iv">我们的用户点击了链接，不知不觉地收到了恶意代码片段。</strong></li><li id="4388" class="lw lx iu lc b ld mf lg mg lj mh ln mi lr mj lv mb mc md me bi translated"><strong class="lc iv">浏览器执行攻击者准备好的代码。该脚本向我们的攻击者发送敏感信息。</strong></li></ol><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj og"><img src="../Images/554f08c21060d2ee36de511a1860f435.png" data-original-src="https://miro.medium.com/v2/resize:fit:936/format:webp/1*9rRMsfVibOX15_1d2bJ6Qg.png"/></div></figure><p id="5ff8" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">您有兴趣了解XSS漏洞的运行情况吗？点击以下链接:<a class="ae kz" href="https://xss-game.appspot.com/level1/frame?query=%3Cscript%3Ealert(%27This%20is%20an%20XSS%20attack%27)%3C/script%3E" rel="noopener ugc nofollow" target="_blank">谷歌XSS游戏演示</a>。它将打开一个由Google提供的游乐场，并显示一个JavaScript警告。弹出窗口的文本在名为query的URL参数中。我们称之为<strong class="lc iv">反射XSS攻击</strong>，因为服务器反射了查询参数。</p><h2 id="ed0f" class="nj ml iu bd mm nk nl dn mq nm nn dp mu lj no np mw ln nq nr my lr ns nt na nu bi translated">缓解措施</h2><p id="4882" class="pw-post-body-paragraph la lb iu lc b ld nv jv lf lg nw jy li lj nx ll lm ln ny lp lq lr nz lt lu lv in bi translated"><strong class="lc iv">两次验证所有数据</strong>。首先，前端应用程序需要验证<strong class="lc iv">所有</strong>用户输入。验证将首先降低恶意数据进入应用程序的风险。尽管如此，黑客仍然可以直接呼叫服务器。因此，第二，我们也需要在服务器端验证所有数据。为了减轻XSS风险，我们需要<strong class="lc iv">验证每个JSON或XML字段的值。这些字段应仅包含明确允许的字符，并具有可接受的长度</strong>。</p><p id="001a" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">对所有数据进行编码</strong>以防止反射XSS攻击。OWASP基金会为NodeJS和T21 Java构建了合适的库。编码确保web浏览器显示代码而不是执行代码。</p><p id="ebf5" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">告诉浏览器从第三方服务器获取哪种类型的资源</strong>。这样的内容策略是一个重大的安全改进，因为它限制了XSS攻击的范围。</p><ul class=""><li id="a737" class="lw lx iu lc b ld le lg lh lj ly ln lz lr ma lv ob mc md me bi translated">如果您使用CDN或从其他服务器加载资源，请对预期的域使用适当的内容安全策略。如<code class="fe oc od oe of b">Content-Security-Policy: font-src <a class="ae kz" href="https://fonts.cdn.com." rel="noopener ugc nofollow" target="_blank">https://fonts.cdn.com</a></code> <a class="ae kz" href="https://fonts.cdn.com." rel="noopener ugc nofollow" target="_blank">。</a></li><li id="b89b" class="lw lx iu lc b ld mf lg mg lj mh ln mi lr mj lv ob mc md me bi translated">如果不使用CDN，将响应头<code class="fe oc od oe of b">Content-Security-Policy</code> <strong class="lc iv"> </strong>设置为值<strong class="lc iv"> </strong> <code class="fe oc od oe of b">default-src ‘none'</code>。</li></ul><h1 id="1f60" class="mk ml iu bd mm mn mo mp mq mr ms mt mu ka mv kb mw kd mx ke my kg mz kh na nb bi translated">安全错误配置</h1><blockquote class="nc nd ne"><p id="662e" class="la lb nf lc b ld le jv lf lg lh jy li ng lk ll lm nh lo lp lq ni ls lt lu lv in bi translated">安全配置错误是最常见的问题。这通常是由不安全的默认配置、不完整或临时配置、开放式云存储、错误配置的HTTP头以及包含敏感信息的详细错误消息造成的。<br/><a class="ae kz" href="https://owasp.org/www-project-top-ten/" rel="noopener ugc nofollow" target="_blank">owasp.org/www-project-top-ten/</a></p></blockquote><p id="5ab8" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">任何组件的不正确配置都可能帮助攻击者发现安全漏洞并识别攻击面。在web应用程序安全的上下文中，正确配置的系统</p><ul class=""><li id="cdf0" class="lw lx iu lc b ld le lg lh lj ly ln lz lr ma lv ob mc md me bi translated">隐藏有关使用的组件和框架的信息，以及</li><li id="362b" class="lw lx iu lc b ld mf lg mg lj mh ln mi lr mj lv ob mc md me bi translated">不允许未经验证和未经授权的访问。</li></ul><blockquote class="nc nd ne"><p id="9971" class="la lb nf lc b ld le jv lf lg lh jy li ng lk ll lm nh lo lp lq ni ls lt lu lv in bi translated">攻击面描述了攻击者可以进入系统的所有不同点，以及他们可以获取数据的位置。<br/><a class="ae kz" href="https://cheatsheetseries.owasp.org/cheatsheets/Attack_Surface_Analysis_Cheat_Sheet.html#:~:text=The%20Attack%20Surface%20describes%20all,out%20of%20the%20application%2C%20and" rel="noopener ugc nofollow" target="_blank">cheatsheetseries . owasp . org/Cheat sheets/Attack _ Surface _ Analysis _ Cheat _ sheet . html</a></p></blockquote><h2 id="e10f" class="nj ml iu bd mm nk nl dn mq nm nn dp mu lj no np mw ln nq nr my lr ns nt na nu bi translated">攻击</h2><p id="241d" class="pw-post-body-paragraph la lb iu lc b ld nv jv lf lg nw jy li lj nx ll lm ln ny lp lq lr nz lt lu lv in bi translated">关于系统的信息可以出现在HTTP头和HTTP响应体中。包含服务器信息的标准HTTP头有:</p><ul class=""><li id="ceb6" class="lw lx iu lc b ld le lg lh lj ly ln lz lr ma lv ob mc md me bi translated"><strong class="lc iv">服务器(Apache，NGINX)，</strong></li><li id="1b2e" class="lw lx iu lc b ld mf lg mg lj mh ln mi lr mj lv ob mc md me bi translated"><strong class="lc iv"> x-powered-by (ExpressJS，PHP)，</strong></li><li id="a55c" class="lw lx iu lc b ld mf lg mg lj mh ln mi lr mj lv ob mc md me bi translated"><strong class="lc iv">x-应用-上下文(Spring Boot)，</strong></li><li id="64a8" class="lw lx iu lc b ld mf lg mg lj mh ln mi lr mj lv ob mc md me bi translated"><strong class="lc iv">通孔(清漆)</strong></li></ul><p id="0d23" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">像<strong class="lc iv"> ExpressJS </strong>或者<strong class="lc iv"> Spring Boot </strong>这样的框架提供了一个默认的错误处理机制。默认情况下，如果它们处理未捕获的错误或异常，两者都会返回堆栈跟踪。堆栈跟踪给攻击者一个应用程序的详细印象。它们揭示了哪些类型和实例正在使用，并处理了请求。有了这些深入的知识，攻击者就可以发起更复杂的攻击。</p><p id="4d07" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">此外，如果应用程序返回错误消息和用户输入，它可能容易受到<a class="ae kz" href="https://medium.com/@Johne_Jacob/rfd-reflected-file-download-what-how-6d0e6fdbe331" rel="noopener"> <strong class="lc iv">反射文件下载(RFD) </strong> </a>的攻击。RFD将允许攻击者建立一个网页的URL，当该网页打开时，将会下载一个脚本到用户的机器上。由于攻击者控制了链接，他也负责下载文件的内容。</p><p id="69e3" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这样的链接看起来像什么？</p><ul class=""><li id="db39" class="lw lx iu lc b ld le lg lh lj ly ln lz lr ma lv ob mc md me bi translated">https://search.yoursite.com/;chrome .蝙蝠？q= <encoded bash="" script="" here=""/></li></ul><p id="9579" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">配置不正确的服务器会将反射的参数<code class="fe oc od oe of b">q</code>下载到名为<code class="fe oc od oe of b">chrome.cmd</code>的文件中。你怎么看，一个非技术用户运行下载文件夹中chrome.cmd的可能性有多大？</p><h2 id="3af0" class="nj ml iu bd mm nk nl dn mq nm nn dp mu lj no np mw ln nq nr my lr ns nt na nu bi translated">减轻</h2><p id="87c5" class="pw-post-body-paragraph la lb iu lc b ld nv jv lf lg nw jy li lj nx ll lm ln ny lp lq lr nz lt lu lv in bi translated"><strong class="lc iv">禁用特定于组件和框架的HTTP头。使黑客更难发动特定的攻击。</strong></p><p id="6c3b" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">不要在错误页面中暴露详细信息或用户信息。</strong>隐藏关于框架和应用程序运行时的信息，并阻止反射文件下载。</p><p id="bd92" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">禁用HTTP路径参数。</strong>路径参数是URL的一部分，位于分号:<code class="fe oc od oe of b">https://search.yoursite.com/;<strong class="lc iv">chrome.bat</strong></code>之后。它们在RFD攻击中起着至关重要的作用，因为它们可以欺骗浏览器下载二进制文件。拒绝包含分号的请求，只需返回HTTP状态404。</p><p id="9ad5" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">此外，为了限制rfd的风险，<strong class="lc iv">不要让浏览器猜测HTTP响应的内容类型</strong>。总是设置响应头<code class="fe oc od oe of b">X-Content-Type-Options: nosniff</code>。</p><h1 id="8798" class="mk ml iu bd mm mn mo mp mq mr ms mt mu ka mv kb mw kd mx ke my kg mz kh na nb bi translated">身份验证被破坏</h1><blockquote class="nc nd ne"><p id="66a1" class="la lb nf lc b ld le jv lf lg lh jy li ng lk ll lm nh lo lp lq ni ls lt lu lv in bi translated">对经过身份验证的用户被允许做什么的限制通常没有得到适当的执行。攻击者可以利用这些缺陷来访问未经授权的功能和/或数据，例如访问其他用户的帐户、查看敏感文件、修改其他用户的数据、更改访问权限等。<br/><a class="ae kz" href="https://owasp.org/www-project-top-ten/" rel="noopener ugc nofollow" target="_blank">owasp.org/www-project-top-ten/</a></p></blockquote><h2 id="68ad" class="nj ml iu bd mm nk nl dn mq nm nn dp mu lj no np mw ln nq nr my lr ns nt na nu bi translated">攻击</h2><p id="70d8" class="pw-post-body-paragraph la lb iu lc b ld nv jv lf lg nw jy li lj nx ll lm ln ny lp lq lr nz lt lu lv in bi translated"><strong class="lc iv">跨源资源共享(CORS) </strong>策略定义了哪些网页被允许向服务器请求资源。应用服务器通过检查HTTP报头<code class="fe oc od oe of b">Origin</code>来确定允许量。该标题由浏览器设置，包含当前网站的域。</p><blockquote class="nc nd ne"><p id="e176" class="la lb nf lc b ld le jv lf lg lh jy li ng lk ll lm nh lo lp lq ni ls lt lu lv in bi translated">这意味着web应用程序[..]只能从加载应用程序的同一来源请求资源，除非来自其他来源的响应包括正确的CORS标头。<br/><a class="ae kz" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS" rel="noopener ugc nofollow" target="_blank">developer.mozilla.org/en-US/docs/Web/HTTP/CORS</a>/</p></blockquote><p id="7418" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在下图中，我们可以看到多个网页共享同一个后端应用程序。通过启用CORS策略，服务器可以允许来自signup.mailinglist.com和signup.blogs.com的请求，拒绝来自signup.evil.com的呼叫。这些策略也可以只允许特定来源的HTTP方法的子集。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj oh"><img src="../Images/71e28b69a552cc348c833cd14860716a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1078/format:webp/1*RC5BImOrHv47FwDSR8CpaQ.png"/></div></figure><p id="0c3d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">请注意:</strong>攻击者可以简单地直接调用应用服务器，因此通过不设置<code class="fe oc od oe of b">Origin</code>请求头绕过浏览器和CORS策略。<strong class="lc iv">尽管如此，已配置的CORS规则可防止攻击者构建一个看起来和感觉上都像目标应用程序并使用相同后端的网站。</strong></p><h2 id="b269" class="nj ml iu bd mm nk nl dn mq nm nn dp mu lj no np mw ln nq nr my lr ns nt na nu bi translated">减轻</h2><p id="556a" class="pw-post-body-paragraph la lb iu lc b ld nv jv lf lg nw jy li lj nx ll lm ln ny lp lq lr nz lt lu lv in bi translated"><strong class="lc iv">充分配置CORS头</strong>。即使应用程序不与其他应用程序或域共享资源，您也应该在每个HTTP响应中添加CORS报头。</p><p id="33fc" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在CORS配置中，请只授予已知和可信来源的访问权限。必须显式配置自定义HTTP头。此外，在CORS上下文中，<code class="fe oc od oe of b">Content-Type</code>头的值是<a class="ae kz" href="https://developer.mozilla.org/en-US/docs/Glossary/CORS-safelisted_request_header" rel="noopener ugc nofollow" target="_blank">受限的</a>。我们可以通过显式允许<code class="fe oc od oe of b">Content-Type</code>头来避免这一点。</p><p id="6a86" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">CORS策略是使用以下HTTP响应头定义的:</p><ul class=""><li id="ca25" class="lw lx iu lc b ld le lg lh lj ly ln lz lr ma lv ob mc md me bi translated"><code class="fe oc od oe of b">Access-Control-Allow-Origin</code></li><li id="3a78" class="lw lx iu lc b ld mf lg mg lj mh ln mi lr mj lv ob mc md me bi translated"><code class="fe oc od oe of b">Access-Control-Allow-Methods</code></li><li id="b064" class="lw lx iu lc b ld mf lg mg lj mh ln mi lr mj lv ob mc md me bi translated"><code class="fe oc od oe of b">Access-Control-Allow-Headers: Content-Type</code></li><li id="9dbd" class="lw lx iu lc b ld mf lg mg lj mh ln mi lr mj lv ob mc md me bi translated"><code class="fe oc od oe of b">Access-Control-Max-Age</code></li></ul><p id="7fe5" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">请小心添加这些HTTP头。仅当您信任其来源时才返回它们。我建议使用应用程序框架的内置CORS支持，而不是从头开始构建。</p><h1 id="6ae4" class="mk ml iu bd mm mn mo mp mq mr ms mt mu ka mv kb mw kd mx ke my kg mz kh na nb bi translated">敏感数据暴露</h1><blockquote class="nc nd ne"><p id="5533" class="la lb nf lc b ld le jv lf lg lh jy li ng lk ll lm nh lo lp lq ni ls lt lu lv in bi translated">攻击者不是直接攻击crypto，而是窃取密钥，执行中间人攻击，或者在传输过程中从服务器窃取明文数据，或者从用户的客户端(例如浏览器)窃取明文数据。通常需要手动攻击。<br/><a class="ae kz" href="https://owasp.org/www-project-top-ten/OWASP_Top_Ten_2017/Top_10-2017_A3-Sensitive_Data_Exposure" rel="noopener ugc nofollow" target="_blank">OWASP . org/www-project-Top-Ten/OWASP _ Top _ Ten _ 2017/Top _ 10–2017 _ A3-Sensitive _ Data _ Exposure</a></p></blockquote><h2 id="6acf" class="nj ml iu bd mm nk nl dn mq nm nn dp mu lj no np mw ln nq nr my lr ns nt na nu bi translated">攻击</h2><p id="4393" class="pw-post-body-paragraph la lb iu lc b ld nv jv lf lg nw jy li lj nx ll lm ln ny lp lq lr nz lt lu lv in bi translated">典型的中间人攻击允许攻击者拦截和操纵未加密的HTTP消息。更简单的是，如果客户数据存储或缓存在共享设备上，即公共图书馆中，则有权访问该设备的每个人都可以使用这些数据。</p><h2 id="bee0" class="nj ml iu bd mm nk nl dn mq nm nn dp mu lj no np mw ln nq nr my lr ns nt na nu bi translated">减轻</h2><p id="58fb" class="pw-post-body-paragraph la lb iu lc b ld nv jv lf lg nw jy li lj nx ll lm ln ny lp lq lr nz lt lu lv in bi translated"><strong class="lc iv">随时随地使用HTTPS</strong>。句号。</p><p id="d67a" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">禁用表单自动完成功能</strong>。<strong class="lc iv"> </strong>在你的智能手机上，你的浏览器很可能已经缓存了你的地址。那很方便，因为你不必一直填写你的地址。但是，如果它是一个共享设备，自动完成将暴露您的地址。我们可以通过给HTML表单或者输入标签 <strong class="lc iv">添加属性<code class="fe oc od oe of b">autocomplete=off</code> <strong class="lc iv"> </strong> <a class="ae kz" href="https://developer.mozilla.org/en-US/docs/Web/Security/Securing_your_site/Turning_off_form_autocompletion" rel="noopener ugc nofollow" target="_blank">来禁用<code class="fe oc od oe of b">autocomplete</code>。</a></strong></p><p id="2d7c" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">通过始终设置这三个响应头来禁用资源缓存</strong>。</p><ul class=""><li id="c0cd" class="lw lx iu lc b ld le lg lh lj ly ln lz lr ma lv ob mc md me bi translated"><code class="fe oc od oe of b">Cache-Control: no-cache, no-store, max-age=0, must-revalidate</code></li><li id="750c" class="lw lx iu lc b ld mf lg mg lj mh ln mi lr mj lv ob mc md me bi translated"><code class="fe oc od oe of b">Expires: 0</code></li><li id="7dc3" class="lw lx iu lc b ld mf lg mg lj mh ln mi lr mj lv ob mc md me bi translated"><code class="fe oc od oe of b">Pragma: no-cache</code></li></ul><p id="b65b" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">到其他网页的链接存在安全风险，也可能会泄露客户数据。<strong class="lc iv">为了防止这种叫做Tabnapping的攻击，我们需要为所有打开新标签的HTML链接添加一个属性</strong>:</p><ul class=""><li id="a882" class="lw lx iu lc b ld le lg lh lj ly ln lz lr ma lv ob mc md me bi translated"><code class="fe oc od oe of b">rel="nofollow noreferrer"</code></li></ul><h1 id="901a" class="mk ml iu bd mm mn mo mp mq mr ms mt mu ka mv kb mw kd mx ke my kg mz kh na nb bi translated">使用具有已知漏洞的组件</h1><blockquote class="nc nd ne"><p id="b2b3" class="la lb nf lc b ld le jv lf lg lh jy li ng lk ll lm nh lo lp lq ni ls lt lu lv in bi translated">库、框架和其他软件模块等组件以与应用程序相同的权限运行。如果易受攻击的组件被利用，这种攻击会导致严重的数据丢失或服务器接管。使用具有已知漏洞的组件的应用程序和API可能会破坏应用程序防御，并导致各种攻击和影响。<br/>https://owasp.org/www-project-top-ten/<a class="ae kz" href="https://owasp.org/www-project-top-ten/" rel="noopener ugc nofollow" target="_blank"/></p></blockquote><p id="b62f" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">最后但同样重要的是，使用具有众所周知的漏洞的过时的库、框架和运行时是有风险的。</p><h2 id="86ae" class="nj ml iu bd mm nk nl dn mq nm nn dp mu lj no np mw ln nq nr my lr ns nt na nu bi translated">缓解措施</h2><p id="234e" class="pw-post-body-paragraph la lb iu lc b ld nv jv lf lg nw jy li lj nx ll lm ln ny lp lq lr nz lt lu lv in bi translated"><strong class="lc iv">使应用程序的所有部分和依赖项保持最新</strong>。像npm或maven这样的包和依赖项管理器可以检查和显示应用程序依赖项的较新版本。</p><h1 id="f317" class="mk ml iu bd mm mn mo mp mq mr ms mt mu ka mv kb mw kd mx ke my kg mz kh na nb bi translated">结论</h1><p id="f6f5" class="pw-post-body-paragraph la lb iu lc b ld nv jv lf lg nw jy li lj nx ll lm ln ny lp lq lr nz lt lu lv in bi translated">我们不仅通过为我们的应用添加功能来为客户创造价值。我们也通过保护客户的数据来提供价值。虽然我们只是触及了web应用程序安全性的表面，但是我们已经确定了各种降低风险和提高整体安全性的方法。</p><p id="16f3" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">有关web应用程序漏洞和更多缓解措施的更多信息，请查看OWASP十大漏洞。🙂</p><div class="oi oj gq gs ok ol"><a href="https://owasp.org/www-project-top-ten/" rel="noopener  ugc nofollow" target="_blank"><div class="om ab fp"><div class="on ab oo cl cj op"><h2 class="bd iv gz z fq oq fs ft or fv fx it bi translated">OWASP十大</h2><div class="os l"><h3 class="bd b gz z fq oq fs ft or fv fx dk translated">OWASP Top 10是开发人员和web应用程序安全性的标准认知文档。它代表了广泛的…</h3></div><div class="ot l"><p class="bd b dl z fq oq fs ft or fv fx dk translated">owasp.org</p></div></div><div class="ou l"><div class="ov l ow ox oy ou oz kt ol"/></div></div></a></div></div><div class="ab cl pa pb hy pc" role="separator"><span class="pd bw bk pe pf pg"/><span class="pd bw bk pe pf pg"/><span class="pd bw bk pe pf"/></div><div class="in io ip iq ir"><p id="a7b6" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">感谢来到这里，也感谢你的阅读，<br/> Stefan👋</p></div><div class="ab cl pa pb hy pc" role="separator"><span class="pd bw bk pe pf pg"/><span class="pd bw bk pe pf pg"/><span class="pd bw bk pe pf"/></div><div class="in io ip iq ir"><h1 id="0908" class="mk ml iu bd mm mn ph mp mq mr pi mt mu ka pj kb mw kd pk ke my kg pl kh na nb bi translated">分级编码</h1><p id="8a12" class="pw-post-body-paragraph la lb iu lc b ld nv jv lf lg nw jy li lj nx ll lm ln ny lp lq lr nz lt lu lv in bi translated">感谢您成为我们社区的一员！<a class="ae kz" href="https://www.youtube.com/channel/UC3v9kBR_ab4UHXXdknz8Fbg?sub_confirmation=1" rel="noopener ugc nofollow" target="_blank"> <strong class="lc iv">订阅我们的YouTube频道</strong> </a>或者加入<a class="ae kz" href="https://skilled.dev/" rel="noopener ugc nofollow" target="_blank"> <strong class="lc iv"> Skilled.dev编码面试课程</strong> </a>。</p><div class="oi oj gq gs ok ol"><a href="https://skilled.dev" rel="noopener  ugc nofollow" target="_blank"><div class="om ab fp"><div class="on ab oo cl cj op"><h2 class="bd iv gz z fq oq fs ft or fv fx it bi translated">编写面试问题</h2><div class="os l"><h3 class="bd b gz z fq oq fs ft or fv fx dk translated">掌握编码面试的过程</h3></div><div class="ot l"><p class="bd b dl z fq oq fs ft or fv fx dk translated">技术开发</p></div></div><div class="ou l"><div class="pm l ow ox oy ou oz kt ol"/></div></div></a></div></div></div>    
</body>
</html>