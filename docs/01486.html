<html>
<head>
<title>How to Use VueJS Filters to Write Better Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用VueJS过滤器编写更好的代码</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-use-vuejs-filters-to-write-better-code-4d038bc15e7d?source=collection_archive---------9-----------------------#2020-01-06">https://levelup.gitconnected.com/how-to-use-vuejs-filters-to-write-better-code-4d038bc15e7d?source=collection_archive---------9-----------------------#2020-01-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/81416162015a6b2b843010db4d327d1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*MfJeqME0zsLEEOkJ"/></div></div><figcaption class="jc jd gj gh gi je jf bd b be z dk translated">保罗·斯科鲁普斯卡斯在<a class="ae jg" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><div class=""/><p id="3656" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">大多数VueJS开发人员都非常熟悉计算属性。它们是设计可读性更强的代码和清理模板的好方法。</p><p id="272e" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然而，在某些情况下，有一个更好的解决方案可以产生更多的<a class="ae jg" href="https://learnvue.co/2019/12/building-reusable-components-in-vuejs-tabs/" rel="noopener ugc nofollow" target="_blank">可重用代码</a> : VueJS过滤器。</p><p id="3715" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本文中，我们将回顾…</p><ul class=""><li id="ecd3" class="le lf jj ki b kj kk kn ko kr lg kv lh kz li ld lj lk ll lm bi translated">为什么要使用VueJS过滤器</li><li id="6d73" class="le lf jj ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated">如何给它们编码</li><li id="7f33" class="le lf jj ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated">高级过滤技术</li><li id="5a3a" class="le lf jj ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated">计算属性与VueJS过滤器</li></ul><p id="62b9" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最后，您应该对何时、为什么以及如何在您的项目中实现VueJS过滤器有了一个明确的想法。</p><p id="05a4" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">3…2..1…过滤时间！</p><h1 id="20c6" class="ls lt jj bd lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">如何使用VueJS过滤器</h1><p id="a293" class="pw-post-body-paragraph kg kh jj ki b kj mq kl km kn mr kp kq kr ms kt ku kv mt kx ky kz mu lb lc ld im bi translated">首先，我们必须了解VueJS滤波器到底是什么。简单地说，过滤器为我们提供了一种创建可重用文本转换的方法。</p><p id="7968" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Vue过滤器在两个方面不同于<a class="ae jg" href="https://learnvue.co/2019/12/mastering-computed-properties-in-vuejs/" rel="noopener ugc nofollow" target="_blank">计算的属性</a>。</p><ol class=""><li id="4c93" class="le lf jj ki b kj kk kn ko kr lg kv lh kz li ld mv lk ll lm bi translated">计算的属性依赖于特定的属性，而过滤器可以在不同的值上重复使用</li><li id="1772" class="le lf jj ki b kj ln kn lo kr lp kv lq kz lr ld mv lk ll lm bi translated">计算属性可用于所有属性，而过滤器主要用于文本转换</li></ol><p id="0a1f" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">第二，因为VueJS过滤器是用于文本转换的，它们只能在两个地方使用:<strong class="ki jk">mustache interpolation</strong>(模板中的花括号)和<strong class="ki jk"> v-bind表达式</strong>。</p><blockquote class="mw"><p id="e94a" class="mx my jj bd mz na nb nc nd ne nf ld dk translated"><em class="ng">计算属性依赖于特定属性的</em><strong class="ak"><em class="ng"/></strong><em class="ng">，而过滤器可以在不同的值上重复使用</em></p></blockquote><h1 id="aefe" class="ls lt jj bd lu lv lw lx ly lz ma mb mc md nh mf mg mh ni mj mk ml nj mn mo mp bi translated">那么我们如何给它们编码呢？</h1><p id="5044" class="pw-post-body-paragraph kg kh jj ki b kj mq kl km kn mr kp kq kr ms kt ku kv mt kx ky kz mu lb lc ld im bi translated">编写Vue滤镜应该感觉非常熟悉。像定义计算属性或组件方法一样，只需将它们放在filters对象内的组件选项对象中。</p><p id="daab" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，假设我们需要一个预览过滤器，它接受一个字符串，返回前50个字符，后跟一个省略号。在我们的选项对象中，看起来有点像这样。</p><pre class="nk nl nm nn gt no np nq nr aw ns bi"><span id="d15d" class="nt lt jj np b gy nu nv l nw nx">filters: {<br/>    preview: (value) =&gt; {<br/>      if (!value) {<br/>        return ''<br/>      }<br/>      return value.substring(0, 50) + '...'<br/>    }<br/>}</span></pre><p id="d4a7" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这里有几件重要的事情需要注意。首先，我们做了一个错误检查，看看值是否为空。第二，我们必须确保我们<strong class="ki jk">返回</strong>值。</p><p id="5cb2" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">但总的来说，很简单，对吧？现在，让我们看看如何将它添加到您的模板中。</p><p id="b0d3" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">使用Vue过滤器需要一个简单的语法。格式为<em class="ny">值|过滤器</em></p><p id="d9ff" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如前所述，有两种情况我们可以使用计算属性:在模板的花括号之间和使用v-bind的时候</p><pre class="nk nl nm nn gt no np nq nr aw ns bi"><span id="ebb4" class="nt lt jj np b gy nu nv l nw nx">&lt;!-- Mustache Interpolation --&gt;<br/>{{ content | preview }}</span><span id="bac9" class="nt lt jj np b gy nz nv l nw nx">&lt;!-- using a v-bind: --&gt;<br/>&lt;div :class='rawID | formatID' /&gt;</span></pre><h1 id="86cd" class="ls lt jj bd lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">更先进的技术</h1><p id="06b9" class="pw-post-body-paragraph kg kh jj ki b kj mq kl km kn mr kp kq kr ms kt ku kv mt kx ky kz mu lb lc ld im bi translated">既然我们已经介绍了Vue滤镜的基础知识，那么还有一些高级技巧和窍门可以让它们变得更加强大。</p><p id="d6ee" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">学习完这些技巧后，你可以添加的滤镜种类将会是无限的。</p><h2 id="48c6" class="nt lt jj bd lu oa ob dn ly oc od dp mc kr oe of mg kv og oh mk kz oi oj mo ok bi translated">声明全局过滤器</h2><p id="ba68" class="pw-post-body-paragraph kg kh jj ki b kj mq kl km kn mr kp kq kr ms kt ku kv mt kx ky kz mu lb lc ld im bi translated">我们的第一个过滤器实现是在本地使用它们，这意味着这些过滤器只对我们定义它的组件可用。然而，在我们的整个Vue项目中，我们希望有一些通用的过滤器。</p><p id="d6c2" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如生成预览、日期格式化、标准化大小写等等。</p><p id="1b0e" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">幸运的是，就像Vue中的其他东西一样，很容易全局声明一个过滤器。我们所要做的就是在初始化Vue对象之前使用Vue.filter函数。</p><pre class="nk nl nm nn gt no np nq nr aw ns bi"><span id="a2a5" class="nt lt jj np b gy nu nv l nw nx">Vue.filter('preview', (value) =&gt; {<br/>  if (!value) {<br/>    return ''<br/>  }<br/>  return value.substring(0, 30) + '...'<br/>})</span><span id="0a2d" class="nt lt jj np b gy nz nv l nw nx">// init code<br/>new Vue({...</span></pre><h2 id="5084" class="nt lt jj bd lu oa ob dn ly oc od dp mc kr oe of mg kv og oh mk kz oi oj mo ok bi translated">链接过滤器</h2><p id="2c0f" class="pw-post-body-paragraph kg kh jj ki b kj mq kl km kn mr kp kq kr ms kt ku kv mt kx ky kz mu lb lc ld im bi translated">也可以对一个值应用多个过滤器。</p><p id="9797" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这很直观。我们所要做的就是在我们的第一个过滤器后插入另一个“管道”，然后声明我们的第二个过滤器。类似这样的。</p><pre class="nk nl nm nn gt no np nq nr aw ns bi"><span id="cafd" class="nt lt jj np b gy nu nv l nw nx">{{ content | preview | capitalized }}</span></pre><p id="7ca4" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，两种文本转换都应用于我们的原始数据。</p><h1 id="7f07" class="ls lt jj bd lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">将参数传递给过滤器</h1><p id="ab84" class="pw-post-body-paragraph kg kh jj ki b kj mq kl km kn mr kp kq kr ms kt ku kv mt kx ky kz mu lb lc ld im bi translated">因为Vue过滤器实际上只是Javascript函数，所以我们可以给它们传递参数。它通常以你期望的方式工作，但是有一件<strong class="ki jk">重要的</strong>事情你必须知道。</p><p id="9f29" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">无论您是否传递参数，您想要修改的值都将作为第一个参数传递。</p><p id="70b2" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，如果我们想在预览过滤器中添加一个允许我们更改截止点的参数，我们可以这样做。</p><pre class="nk nl nm nn gt no np nq nr aw ns bi"><span id="68e5" class="nt lt jj np b gy nu nv l nw nx">filters: {<br/>    preview: (value, cutoff) =&gt; {<br/>      if (!value) {<br/>        return ''<br/>      }<br/>      return value.substring(0, cutoff) + '...'<br/>    }<br/>}</span></pre><p id="1421" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后，当我们声明我们的过滤器时，我们只需要在我们的值后添加第二个参数。它看起来会像这样。</p><pre class="nk nl nm nn gt no np nq nr aw ns bi"><span id="d22a" class="nt lt jj np b gy nu nv l nw nx">{{ content | preview(15) }}</span></pre><p id="acc3" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">第一个参数是值，第二个、第三个等等是我们传递给函数的任何值。</p><h1 id="03b0" class="ls lt jj bd lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">为什么不计算属性</h1><p id="97a6" class="pw-post-body-paragraph kg kh jj ki b kj mq kl km kn mr kp kq kr ms kt ku kv mt kx ky kz mu lb lc ld im bi translated">你可能会问，“等等，难道我不能用计算属性来做这件事吗？”你可以的。然而，这并不总是最好的解决方案。</p><p id="37bd" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">就像我们在文章前面讨论的，计算属性只是<a class="ae jg" href="https://learnvue.co/2019/12/a-simple-vue-watcher-tutorial-for-beginners/" rel="noopener ugc nofollow" target="_blank"> Vue观察器</a>。因此，它们被绑定到特定的属性。这意味着它们不能被一般化并应用于所有类型的数据。</p><p id="90c0" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">使用过滤器而不是计算属性非常有用的一个常见例子是<strong class="ki jk">日期格式化。</strong></p><p id="3305" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">假设我们有一个文章列表，我们想显示每一项的日期。如果我们使用计算属性，这将是非常困难的。我们需要为每个项目创建计算属性——这对于大多数实际项目来说在逻辑上是不可能的。</p><p id="9ddc" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然而，如果我们使用过滤器，我们可以像这样格式化每个日期。</p><pre class="nk nl nm nn gt no np nq nr aw ns bi"><span id="1157" class="nt lt jj np b gy nu nv l nw nx">{{ article.date | formattedDate }}</span></pre><p id="b9e0" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因此，它们被绑定到特定的属性。这意味着它们不能被一般化并应用于所有类型的数据。</p><p id="860c" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这使得它变得更加简单，可读性更好，并且可以省去很多令人头疼的问题。</p><h1 id="3d3e" class="ls lt jj bd lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">结论</h1><p id="e3fa" class="pw-post-body-paragraph kg kh jj ki b kj mq kl km kn mr kp kq kr ms kt ku kv mt kx ky kz mu lb lc ld im bi translated">唷。我们做到了。文章的结尾。</p><p id="8b24" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">简而言之，VueJS过滤器是在项目中实现可重用修改器的好方法。如果使用正确，它们可以非常强大，设计通用过滤器应该是每个Vue团队的首要步骤之一。</p><p id="796e" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">希望您已经了解了Vue滤波器的一两件事，并且已经想到了一些方法，可以将其应用到您自己的项目中。</p></div><div class="ab cl ol om hx on" role="separator"><span class="oo bw bk op oq or"/><span class="oo bw bk op oq or"/><span class="oo bw bk op oq"/></div><div class="im in io ip iq"><p id="ef02" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你有兴趣了解更多关于Vue 3的知识，请下载我的免费Vue 3备忘单，里面有一些基本知识，比如合成API、Vue 3模板语法和事件处理。</p></div><div class="ab cl ol om hx on" role="separator"><span class="oo bw bk op oq or"/><span class="oo bw bk op oq or"/><span class="oo bw bk op oq"/></div><div class="im in io ip iq"><p id="411b" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="ny">原载于2020年1月6日</em><a class="ae jg" href="https://learnvue.co/2020/01/how-to-use-vuejs-filters-to-write-better-code" rel="noopener ugc nofollow" target="_blank"><em class="ny">【https://learnvue.co】</em></a><em class="ny">。</em></p></div></div>    
</body>
</html>