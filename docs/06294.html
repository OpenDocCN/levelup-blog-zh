<html>
<head>
<title>Day-Trading with AI: When to Hold, When to Fold, and When to Not Play!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用人工智能做日内交易:什么时候持有，什么时候放弃，什么时候不玩！</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/day-trade-market-clustering-with-transdimensional-machine-learning-b088f585923a?source=collection_archive---------4-----------------------#2020-11-12">https://levelup.gitconnected.com/day-trade-market-clustering-with-transdimensional-machine-learning-b088f585923a?source=collection_archive---------4-----------------------#2020-11-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="7521" class="pw-subtitle-paragraph jv ip iq bd b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km dk translated">基于多维机器学习的市场聚类</h2></div><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi kn"><img src="../Images/77806c291fb9dbd58086120ca97c5b95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*i9M5WQg8wyFdjafs.jpeg"/></div></div><figcaption class="kz la gj gh gi lb lc bd b be z dk translated">iStock上<a class="ae ld" href="https://www.istockphoto.com/portfolio/clearviewstock?mediatype=photography" rel="noopener ugc nofollow" target="_blank"> clearviewstock </a>的照片。</figcaption></figure><h1 id="e15f" class="le lf iq bd lg lh li lj lk ll lm ln lo ke lp kf lq kh lr ki ls kk lt kl lu lv bi translated">TLDR:</h1><blockquote class="lw lx ly"><p id="b88c" class="lz ma mb mc b md me jz mf mg mh kc mi mj mk ml mm mn mo mp mq mr ms mt mu mv ij bi translated"><strong class="mc ir"> <em class="iq">用TML描述市场日内交易的能力可以使策略适合特定的市场“个性”。这些“个性”使得几乎40%的交易日都不可能盈利！</em> </strong></p></blockquote><p id="575a" class="pw-post-body-paragraph lz ma iq mc b md me jz mf mg mh kc mi mw mk ml mm mx mo mp mq my ms mt mu mv ij bi translated">背景帖:<a class="ae ld" href="https://medium.com/@andycarl_40001/the-new-ai-gold-rush-pan-provided-981c0f96e8e7" rel="noopener">新的AI淘金热——跨维度机器学习(潘提供！)</a></p><p id="f2f2" class="pw-post-body-paragraph lz ma iq mc b md me jz mf mg mh kc mi mw mk ml mm mx mo mp mq my ms mt mu mv ij bi translated">提供了一个Jupyter笔记本，包括GitHub库<a class="ae ld" href="https://github.com/afcarl/The-New-AI-Gold-Rush-Transdimensional-Machine-Learning" rel="noopener ugc nofollow" target="_blank"> <strong class="mc ir"> <em class="mb">中的代码，这里</em> </strong> </a>。</p><h1 id="52cb" class="le lf iq bd lg lh li lj lk ll lm ln lo ke lp kf lq kh lr ki ls kk lt kl lu lv bi translated">一个例子:</h1><ul class=""><li id="e4e3" class="mz na iq mc b md nb mg nc mw nd mx ne my nf mv ng nh ni nj bi translated">对于给定的基础工具，10分钟OHLC蜡烛线是从覆盖大约10年期间的分笔成交点数据发展而来的。</li><li id="1102" class="mz na iq mc b md nk mg nl mw nm mx nn my no mv ng nh ni nj bi translated">使用基准“买入/卖出”指标对蜡烛线数据进行回溯测试，每天有(9)个固定止损/基于ATR的止损/无止损案例。</li><li id="ee5d" class="mz na iq mc b md nk mg nl mw nm mx nn my no mv ng nh ni nj bi translated">每个案例都针对基线指标超参数进行了优化，针对多头和空头头寸进行了不对称优化，针对最佳和最差日损益进行了优化，记录了最大和最小日交易损益、交易数量以及相关的最佳超参数值。</li><li id="cd0f" class="mz na iq mc b md nk mg nl mw nm mx nn my no mv ng nh ni nj bi translated">对于每一天，对每(9)个病例的结果进行平均，以形成每天的“原始数据”向量。</li><li id="3201" class="mz na iq mc b md nk mg nl mw nm mx nn my no mv ng nh ni nj bi translated">使用<a class="ae ld" href="https://github.com/afcarl/The-New-AI-Gold-Rush-Transdimensional-Machine-Learning" rel="noopener ugc nofollow" target="_blank"> TML </a>进行初步数据勘探，确定潜在集群的可能数量约为(9)。</li><li id="5861" class="mz na iq mc b md nk mg nl mw nm mx nn my no mv ng nh ni nj bi translated">“适应度函数”被修改，以帮助在超净进化过程中关注(9)个集群解决方案。</li></ul><blockquote class="lw lx ly"><p id="9546" class="lz ma mb mc b md me jz mf mg mh kc mi mj mk ml mm mn mo mp mq mr ms mt mu mv ij bi translated"><strong class="mc ir">根据相对规模得出的“典型”日内交易市场“个性”:</strong></p></blockquote><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi np"><img src="../Images/30dbf78a05e561a2b24861cef7ff0752.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z25rhcNSZ6clocPyAllMmA.png"/></div></div></figure><blockquote class="lw lx ly"><p id="6200" class="lz ma mb mc b md me jz mf mg mh kc mi mj mk ml mm mn mo mp mq mr ms mt mu mv ij bi translated"><strong class="mc ir">“之前”应用TML(通过tSNE从12维到2维):</strong></p></blockquote><pre class="ko kp kq kr gt nq nr ns nt aw nu bi"><span id="565d" class="nv lf iq nr b gy nw nx l ny nz">time_start = time.time()<br/>tsne = TSNE(n_components=2, verbose=1, perplexity=100, n_iter=1000)<br/>tsne_results_orig = tsne.fit_transform( data_orig )<br/>print('t-SNE done! Time elapsed: {} seconds'.format(time.time()-time_start))</span><span id="3c74" class="nv lf iq nr b gy oa nx l ny nz">df_subset['tsne-2d-one'] = tsne_results_orig[:,0]<br/>df_subset['tsne-2d-two'] = tsne_results_orig[:,1]<br/>plt.figure(figsize=(16,10))<br/>sns.scatterplot(<br/>    x="tsne-2d-one", y="tsne-2d-two",<br/>    hue="y",<br/>    palette=['purple','red','darkcyan','brown','blue', 'dodgerblue','green','lightgreen', 'black'],<br/>    data=df_subset,<br/>    legend="full",<br/>    alpha=0.3 )</span></pre><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi ob"><img src="../Images/ef203dc6f9313e4dd028232b38335e4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n4Hxq84cMmVwKRhD7LRx3A.png"/></div></div></figure><blockquote class="lw lx ly"><p id="dbff" class="lz ma mb mc b md me jz mf mg mh kc mi mj mk ml mm mn mo mp mq mr ms mt mu mv ij bi translated"><strong class="mc ir">应用TML (12日至1000日经TML): </strong></p></blockquote><pre class="ko kp kq kr gt nq nr ns nt aw nu bi"><span id="523e" class="nv lf iq nr b gy nw nx l ny nz">...<br/>metric = "jaccard"</span><span id="5066" class="nv lf iq nr b gy oa nx l ny nz">n_neighbors_max = 100<br/>n_neighbors_min = 2</span><span id="52d0" class="nv lf iq nr b gy oa nx l ny nz">min_dist_max = 0.99<br/>min_dist_min = 0.0</span><span id="14d3" class="nv lf iq nr b gy oa nx l ny nz">n_components_max = 1000<br/>n_components_min = 1</span><span id="86c1" class="nv lf iq nr b gy oa nx l ny nz">min_samples_max = 1000<br/>min_samples_min = 2</span><span id="f3b2" class="nv lf iq nr b gy oa nx l ny nz">min_cluster_size_max = 2<br/>min_cluster_size_min = 2</span><span id="5a81" class="nv lf iq nr b gy oa nx l ny nz">...</span><span id="2a01" class="nv lf iq nr b gy oa nx l ny nz">if ( num_clusters_found == 9 ):<br/>    genome.fitness = 10000.0 / abs( clustered_COMB_sum_SE + 1)<br/>elif ( num_clusters_found == 0 ):<br/>    genome.fitness = -99999.0<br/>else:<br/>    genome.fitness = 10000.0 / abs( clustered_COMB_sum_SE + 1) — ( abs( num_clusters_found — 9 ) * 1000.0 )<br/>...</span><span id="bb63" class="nv lf iq nr b gy oa nx l ny nz">$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$<br/>New best_fitness_so_far =  -2984.7710672587614 1</span><span id="ed11" class="nv lf iq nr b gy oa nx l ny nz">New best: metric                    =  jaccard<br/>New best: n_neighbors               =  98<br/>New best: min_dist                  =  0.06658783809866256<br/>New best: n_components              =  1000<br/>New best: min_samples               =  3<br/>New best: min_cluster_size          =  2<br/>New best: cluster_selection_epsilon =  0.6658783809866257</span><span id="22ec" class="nv lf iq nr b gy oa nx l ny nz">OUT: num_clusters_found              =  12<br/>OUT: ratio_clustered                 =  1.0<br/>OUT: clusterer_probabilities_sum     =  0.9558447965277097<br/>OUT: clusterer_probabilities_sum_SE  =  184.0931575208609<br/>OUT: clusterer_outlier_scores_sum    =  0.13366803680011266<br/>OUT: clusterer_outlier_scores_sum_SE =  471.55167569985406<br/>OUT: clustered_COMB_sum_SE           =  655.644833220715<br/>$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$<br/>…<br/>$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$<br/>New best_fitness_so_far = 182.75239956493343 104</span><span id="30a3" class="nv lf iq nr b gy oa nx l ny nz">New best: metric = jaccard<br/>New best: n_neighbors = 100<br/>New best: min_dist = 0.9899882983797373<br/>New best: n_components = 1000<br/>New best: min_samples = 2<br/>New best: min_cluster_size = 2<br/>New best: cluster_selection_epsilon = 9.899882983797372</span><span id="54c6" class="nv lf iq nr b gy oa nx l ny nz">OUT: num_clusters_found = 9<br/>OUT: ratio_clustered = 1.0<br/>OUT: clusterer_probabilities_sum = 0.9978606463926271<br/>OUT: clusterer_probabilities_sum_SE = 1.649803561162849<br/>OUT: clusterer_outlier_scores_sum = 0.03316588079964379<br/>OUT: clusterer_outlier_scores_sum_SE = 52.31724504377773<br/>OUT: clustered_COMB_sum_SE = 53.96704860494058<br/>$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$</span></pre><blockquote class="lw lx ly"><p id="4a55" class="lz ma mb mc b md me jz mf mg mh kc mi mj mk ml mm mn mo mp mq mr ms mt mu mv ij bi translated"><strong class="mc ir">“在”应用TML(通过tSNE从1000-D到2-D):</strong></p></blockquote><pre class="ko kp kq kr gt nq nr ns nt aw nu bi"><span id="d5a8" class="nv lf iq nr b gy nw nx l ny nz">time_start = time.time()<br/>raw_data = fit_HDBSCAN._raw_data<br/>tsne = TSNE(n_components=2, verbose=1, perplexity=100, n_iter=1000)<br/>tsne_results_1 = tsne.fit_transform( raw_data )<br/>print('t-SNE done! Time elapsed: {} seconds'.format(time.time()-time_start))</span><span id="3680" class="nv lf iq nr b gy oa nx l ny nz">df_subset['tsne-2d-one'] = tsne_results_1[:,0]<br/>df_subset['tsne-2d-two'] = tsne_results_1[:,1]<br/>plt.figure(figsize=(16,10))<br/>sns.scatterplot(<br/>    x="tsne-2d-one", y="tsne-2d-two",<br/>    hue="y",<br/>    palette=['purple','red','darkcyan','brown','blue', 'dodgerblue','green','lightgreen', 'black'],<br/>    data=df_subset,<br/>    legend="full",<br/>    alpha=0.3 )</span></pre><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi ob"><img src="../Images/fc4906446512dbc7756ff203aead5de8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R7LyAYEplwDiysucA3P21Q.png"/></div></div></figure><pre class="ko kp kq kr gt nq nr ns nt aw nu bi"><span id="546f" class="nv lf iq nr b gy nw nx l ny nz">...<br/>unique_elements, counts_elements = np.unique(fit_HDBSCAN.labels_, return_counts=True)<br/>print(“Frequency of unique values of the said array:”)<br/>print(np.asarray((unique_elements, counts_elements)))</span><span id="b52f" class="nv lf iq nr b gy oa nx l ny nz"># Frequency of unique values of the said array:<br/># [[ 0 1 2 3 4 5 6 7 8]<br/># [638 893 269 19 41 23 486 159 225]]</span><span id="eb90" class="nv lf iq nr b gy oa nx l ny nz">threshold = pd.Series(fit_HDBSCAN.outlier_scores_).quantile(0.9)</span><span id="51b2" class="nv lf iq nr b gy oa nx l ny nz"># threshold = 0.09822259079456185</span><span id="43a0" class="nv lf iq nr b gy oa nx l ny nz">outliers = np.where(fit_HDBSCAN.outlier_scores_ &gt; threshold)[0]<br/>sns.distplot(fit_HDBSCAN.outlier_scores_[np.isfinite(fit_HDBSCAN.outlier_scores_)], rug=True)<br/>...</span></pre><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi oc"><img src="../Images/78a382671b6c58064564350933870b82.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z3U6qNaH64WMZt4c6zH1aw.png"/></div></div></figure><blockquote class="lw lx ly"><p id="31b8" class="lz ma mb mc b md me jz mf mg mh kc mi mj mk ml mm mn mo mp mq mr ms mt mu mv ij bi translated"><strong class="mc ir">多头交易特征，避免多头交易38.5%的交易日与聚类ID 6、7、8和9相关。</strong></p></blockquote><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi od"><img src="../Images/808a8ce6a493bb3941343b3da6f94d93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9ewAkBvN4vyyN3zT0QSopQ.png"/></div></div></figure><blockquote class="lw lx ly"><p id="87ac" class="lz ma mb mc b md me jz mf mg mh kc mi mj mk ml mm mn mo mp mq mr ms mt mu mv ij bi translated"><strong class="mc ir">短线交易特征，避免40.3%的交易日与聚类ID 0、2、5和8相关的短线交易。</strong></p></blockquote><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi oe"><img src="../Images/9fb541f8a6e96710720d642dc6a22773.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xZ9GRDYQRs6AKRWu9OFyxA.png"/></div></div></figure><h1 id="4230" class="le lf iq bd lg lh li lj lk ll lm ln lo ke lp kf lq kh lr ki ls kk lt kl lu lv bi translated">总结:</h1><ul class=""><li id="ae6e" class="mz na iq mc b md nb mg nc mw nd mx ne my nf mv ng nh ni nj bi translated">避免在38%的交易日内进行与6、7、8和9相关的多头交易。</li><li id="fd42" class="mz na iq mc b md nk mg nl mw nm mx nn my no mv ng nh ni nj bi translated"><strong class="mc ir">避免在与0、2、5和8相关的40%的交易日内进行短期交易。</strong></li><li id="b35c" class="mz na iq mc b md nk mg nl mw nm mx nn my no mv ng nh ni nj bi translated"><strong class="mc ir">市场有多重“个性”，单一的“一刀切”的策略是不够的！</strong></li><li id="6fea" class="mz na iq mc b md nk mg nl mw nm mx nn my no mv ng nh ni nj bi translated"><strong class="mc ir">识别单个市场“个性”的能力使得能够为特定的“<em class="mb">个性</em>”量身定制策略，以追求利润。</strong></li><li id="b6ff" class="mz na iq mc b md nk mg nl mw nm mx nn my no mv ng nh ni nj bi translated"><strong class="mc ir">风险管理要求知道<em class="mb">“如何操作”</em>，但更重要的是，知道<em class="mb">“何时不能操作”！</em>T13】</strong></li><li id="ac67" class="mz na iq mc b md nk mg nl mw nm mx nn my no mv ng nh ni nj bi translated"><strong class="mc ir">使用TML将12维的原始数据向量转换成1000维向量以实现聚类分离，然后使用tSNE将其转换回2-D向量以用于可视化目的。</strong></li><li id="084f" class="mz na iq mc b md nk mg nl mw nm mx nn my no mv ng nh ni nj bi translated"><strong class="mc ir"> <em class="mb">跨维度机器学习(TML) </em>可定义为整体应用视角查看数据、度量选择/创建、流形映射、AI/ML/DL工具选择和适应度函数确定，仅由预期用例的细节驱动，更重要的是，与底层原始数据和流形映射维度的维度无关。</strong></li></ul></div><div class="ab cl of og hu oh" role="separator"><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok"/></div><div class="ij ik il im in"><h1 id="385c" class="le lf iq bd lg lh om lj lk ll on ln lo ke oo kf lq kh op ki ls kk oq kl lu lv bi translated">灵感:</h1><ul class=""><li id="2954" class="mz na iq mc b md nb mg nc mw nd mx ne my nf mv ng nh ni nj bi translated"><a class="ae ld" href="https://github.com/lmcinnes/umap" rel="noopener ugc nofollow" target="_blank"> UMAP </a>，利兰·麦金尼斯</li><li id="2968" class="mz na iq mc b md nk mg nl mw nm mx nn my no mv ng nh ni nj bi translated">利兰·麦金尼斯，约翰·希利，史蒂夫·阿斯特尔斯</li><li id="3c94" class="mz na iq mc b md nk mg nl mw nm mx nn my no mv ng nh ni nj bi translated"><a class="ae ld" href="https://www.cs.ucf.edu/~kstanley/neat.html" rel="noopener ugc nofollow" target="_blank">整齐的</a>，肯尼斯·斯坦利</li><li id="9911" class="mz na iq mc b md nk mg nl mw nm mx nn my no mv ng nh ni nj bi translated"><a class="ae ld" href="https://towardsdatascience.com/how-to-tune-hyperparameters-of-tsne-7c0596a18868" rel="noopener" target="_blank">如何调整tSNE的超参数</a>，<a class="ae ld" href="https://medium.com/u/8570b484f56c?source=post_page-----981c0f96e8e7--------------------------------" rel="noopener"> Nikolay Oskolkov </a></li></ul></div><div class="ab cl of og hu oh" role="separator"><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok"/></div><div class="ij ik il im in"><h1 id="af81" class="le lf iq bd lg lh om lj lk ll on ln lo ke oo kf lq kh op ki ls kk oq kl lu lv bi translated">关于安德鲁(安迪)卡尔:</h1><p id="7a8f" class="pw-post-body-paragraph lz ma iq mc b md nb jz mf mg nc kc mi mw or ml mm mx os mp mq my ot mt mu mv ij bi translated">“GitHub AI大脑中的大脑”和“GitHub 2 vec”NLP生产力工具的热心开发者。一位充满激情的多学科航空航天机械工程师，在集成人工智能、混合强化机器学习(<strong class="mc ir"> Hybrid-NEAT </strong>)、数据科学和基于混合强化学习的优化中的多学科模拟(<strong class="mc ir"> Hybrid-NEAT </strong>)、复杂空中、空间和地面系统的设计和分析以及工程工具开发方面拥有丰富的经验。</p><ul class=""><li id="93e3" class="mz na iq mc b md me mg mh mw ou mx ov my ow mv ng nh ni nj bi translated"><a class="ae ld" href="https://2strikehitter.com/AI_BrainofBrains.html" rel="noopener ugc nofollow" target="_blank">安迪的《GitHub AI脑中之脑》</a></li><li id="65fb" class="mz na iq mc b md nk mg nl mw nm mx nn my no mv ng nh ni nj bi translated"><a class="ae ld" href="https://afcarl.github.io/" rel="noopener ugc nofollow" target="_blank">安迪的在线大脑</a></li><li id="b1ba" class="mz na iq mc b md nk mg nl mw nm mx nn my no mv ng nh ni nj bi translated"><a class="ae ld" href="https://www.linkedin.com/in/andrew-andy-carl-3875a310b/" rel="noopener ugc nofollow" target="_blank">安迪在领英上</a></li><li id="39ff" class="mz na iq mc b md nk mg nl mw nm mx nn my no mv ng nh ni nj bi translated"><a class="ae ld" href="https://github.com/afcarl" rel="noopener ugc nofollow" target="_blank">GitHub上的安迪</a></li><li id="718a" class="mz na iq mc b md nk mg nl mw nm mx nn my no mv ng nh ni nj bi translated"><a class="ae ld" href="https://www.2strikehitter.com/" rel="noopener ugc nofollow" target="_blank">安迪在电脑控制的棒球投球机上</a>:)</li></ul></div></div>    
</body>
</html>