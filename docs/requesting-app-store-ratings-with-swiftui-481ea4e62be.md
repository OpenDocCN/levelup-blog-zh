# ä½¿ç”¨ SwiftUI è¯·æ±‚ App Store è¯„çº§

> åŸæ–‡ï¼š<https://levelup.gitconnected.com/requesting-app-store-ratings-with-swiftui-481ea4e62be>

## å¦‚ä½•è®©ç”¨æˆ·åœ¨ App Store ä¸­è¯„ä»·å’Œè¯„è®ºä½ çš„åº”ç”¨

![](img/e1b567ce080a0c0ed3b86ad6a7da8c4f.png)

è¯„çº§å’Œå®¡æŸ¥å±å¹•

å½“æ¨å‡ºä¸€æ¬¾æ–°åº”ç”¨æ—¶ï¼Œè·å¾—ç”¨æˆ·è¯„è®ºå’Œåé¦ˆéå¸¸é‡è¦ã€‚ä¸€ä¸ªæœ‰å¤šä¸ª(æ­£é¢)è¯„ä»·çš„åº”ç”¨ä¼šè®©ä½ ä»ç«äº‰ä¸­è„±é¢–è€Œå‡ºï¼Œå‘äººä»¬å±•ç¤ºä½ çš„åº”ç”¨å€¼å¾—ä¸€è¯•ã€‚åœ¨ç†æƒ³ä¸–ç•Œä¸­ï¼Œæ‰€æœ‰å–œæ¬¢ä½ çš„åº”ç”¨ç¨‹åºçš„ç”¨æˆ·éƒ½ä¼šç•™ä¸‹è¯„è®ºï¼Œç„¶è€Œï¼Œä¸å¹¸çš„æ˜¯ï¼Œé€šå¸¸æƒ…å†µå¹¶éå¦‚æ­¤ã€‚æé†’äººä»¬ç¦»å¼€è¯„è®ºæ˜¯å»ºç«‹åé¦ˆåŸºç¡€çš„å¥½æ–¹æ³•ã€‚è¿™ç¯‡æ–‡ç« å°†å¸¦ä½ å®Œæˆè¿™äº›æ­¥éª¤ã€‚

# åˆå§‹å®æ–½

åˆ›å»ºè¯„çº§å’Œè¯„è®ºè­¦æŠ¥å®é™…ä¸Šæ˜¯ Apple store kit æ¡†æ¶çš„å†…ç½®éƒ¨åˆ†ï¼Œå› æ­¤æˆ‘ä»¬é¦–å…ˆä½¿ç”¨è§†å›¾é¡¶éƒ¨çš„â€œimport StoreKit â€,æˆ‘ä»¬å¸Œæœ›è­¦æŠ¥å‡ºç°åœ¨é‚£é‡Œã€‚ä¸‹ä¸€æ­¥æ˜¯è®¿é—®å¿…è¦çš„ç¯å¢ƒå¯†é’¥â€”â€”ç§°ä¸º requestReviewã€‚æœ€åï¼Œè°ƒç”¨ requestReview()å±æ€§ï¼Œè¿™å°†æç¤ºç”¨æˆ·ç¦»å¼€è¯„è®ºã€‚

ä¸‹é¢çš„ä»£ç ç‰‡æ®µå°†è¿™äº›æ­¥éª¤ä»˜è¯¸å®æ–½ã€‚åœ¨è¿™ä¸ªå…·ä½“çš„ä¾‹å­ä¸­ï¼Œæœ‰ä¸€ä¸ªâ€œç¦»å¼€è¯„è®ºâ€æŒ‰é’®ï¼Œå½“ç‚¹å‡»å®ƒæ—¶ï¼Œå°†å‡ºç°æç¤ºçª—å£ï¼Œè¦æ±‚è¯„çº§/è¯„è®ºã€‚

```
import StoreKit
import SwiftUI

struct RatingAlertCode: View {

    @Environment(\.requestReview) var requestReview

    var body: some View {

        Button("Leave a review") {
            requestReview()
        }

    }
}
```

# å¾®è°ƒ

è™½ç„¶é‚£ç§æ–¹æ³•å¯è¡Œï¼Œä½†ä¸å¤ªå®ç”¨ã€‚é€šå¸¸ä½ å¸Œæœ›ä½ çš„ç”¨æˆ·åœ¨è¢«æç¤ºç¦»å¼€è¯„è®ºä¹‹å‰å·²ç»ä½¿ç”¨äº†ä¸€æ®µæ—¶é—´ã€‚æ­¤æç¤ºçš„æ­£ç¡®æ—¶é—´å¯èƒ½ä¼šå› æ‚¨çš„åº”ç”¨ç¨‹åºè€Œå¼‚ï¼Œåº”è¿›è¡Œç›¸åº”è°ƒæ•´ã€‚

åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†ä¸¾ä¸€ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å¸Œæœ›ç”¨æˆ·åœ¨ç¬¬ä¸‰æ¬¡çœ‹åˆ°æ¬¢è¿å±å¹•æ—¶è¢«è¦æ±‚è¯„è®ºã€‚

ä¸ºæ­¤ï¼Œé¦–å…ˆåˆ›å»ºä¸€ä¸ªä¿å­˜åœ¨ AppStorage å†…å­˜ä¸­çš„åä¸ºâ€œopenCountâ€çš„å˜é‡ã€‚è™½ç„¶åº”è¯¥è°¨æ…ä½¿ç”¨ AppStorage å˜é‡ï¼Œä½†å®ƒéå¸¸é€‚åˆè¿™ç§æƒ…å†µï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ä¸ªåªä½¿ç”¨å°‘é‡å†…å­˜çš„å±æ€§ã€‚

æ¯æ¬¡æ˜¾ç¤ºè§†å›¾æ—¶ï¼Œå˜é‡å¢åŠ  1ã€‚è¿™å¯ä»¥é€šè¿‡åœ¨è§†å›¾çš„ä¸» VStack ä¸Šä½¿ç”¨ onAppear ä¿®æ”¹å™¨æ¥å®Œæˆã€‚ç„¶ååœ¨åŒä¸€ä¸ªä¿®é¥°ç¬¦ä¸­æ·»åŠ ä¸€ä¸ªâ€˜ifâ€™è¯­å¥ï¼Œå½“è¿™ä¸ªå˜é‡è¾¾åˆ° 3 æ—¶ï¼Œå®ƒå°†è§¦å‘å®¡æŸ¥è­¦æŠ¥ã€‚

è¯¥è­¦å‘Šå°†åªæ˜¾ç¤ºä¸€æ¬¡ï¼Œä»¥å…è¿‡å¤šçš„å¼¹å‡ºçª—å£æ‰“æ‰°ä»»ä½•ç”¨æˆ·ã€‚

```
struct ReviewAppCode: View {

    @Environment(\.requestReview) var requestReview
    @AppStorage("openCount") private var openCount = 0

    var body: some View {
        VStack{
            Text("Welcome to my App")
                .font(.headline)
            Text("You have opened the app \(openCount) times")
        }.onAppear(perform: {
            openCount += 1
            if openCount == 3 {
                requestReview()
            }
        })
    }
}
```

# æ‘˜è¦

æ·»åŠ è¯„è®ºæé†’æ˜¯é¼“åŠ±ç”¨æˆ·è¯„ä»·ä½ çš„åº”ç”¨ç¨‹åºçš„å¥½æ–¹æ³•ï¼Œä¹Ÿå¢åŠ äº†æ›´å¤šäººå‘ç°ä½ åŠªåŠ›åˆ¶ä½œçš„äº§å“çš„æœºä¼šã€‚å°½ç®¡å®æ–½èµ·æ¥å¾ˆç®€å•ï¼Œä½†åº”è¯¥èŠ±æ—¶é—´æ¥è€ƒè™‘æç¤ºå®¡æŸ¥çš„æœ€ä½³æ—¶é—´èŒƒå›´ã€‚ä¸è¦ç­‰å¤ªä¹…ï¼Œä»¥ä¾¿å°½å¯èƒ½å¤šåœ°å¸å¼•ç”¨æˆ·ï¼Œä½†ä¹Ÿè¦è®©äººä»¬æœ‰è¶³å¤Ÿçš„æ—¶é—´ä½¿ç”¨åº”ç”¨ç¨‹åºï¼Œä»¥å…ç•™ä¸‹è¿‡æ—©çš„è¯„çº§ã€‚

å¸Œæœ›è¿™æ˜¯æœ‰å¸®åŠ©çš„...å¦‚æœæœ‰ä»€ä¹ˆå¯ä»¥è§£é‡Šå¾—æ›´å¥½ï¼Œæˆ–è€…ä½ æ‰“ç®—å¦‚ä½•åœ¨ä½ è‡ªå·±çš„é¡¹ç›®ä¸­å®ç°ï¼Œè¯·åœ¨è¯„è®ºä¸­å‘Šè¯‰æˆ‘ï¼

![](img/33280b9e9a9301f9026d9111e47065b3.png)

> *æ„Ÿè°¢é˜…è¯»ï¼å¦‚æœä½ å–œæ¬¢è¿™ä¸ªå¸–å­å¹¶æƒ³é˜…è¯»æ›´å¤šï¼Œè¯·åŠ¡å¿…æŸ¥çœ‹æˆ‘çš„ä¸ªäººèµ„æ–™æˆ–* [*è®¢é˜…*](/subscribe/@simply_stef) *çš„ç±»ä¼¼å¸–å­ã€‚*
> 
> *è®¢é˜… Mediumï¼Œæ— é™è·å–æ‰€æœ‰å¯ç”¨çš„å†…å®¹å’Œæƒ³æ³•ã€‚å¦‚æœä½ é€šè¿‡è¿™ä¸ªé“¾æ¥åŠ å…¥ Mediumï¼Œæˆ‘ä¼šä»ä½ çš„è´¹ç”¨ä¸­æ”¶å–ä¸€ç‚¹ç‚¹â€”â€”è€Œä¸”ä¸ä¼šèŠ±ä½ ä»»ä½•é¢å¤–çš„é’±ï¼*

# åˆ†çº§ç¼–ç 

æ„Ÿè°¢æ‚¨æˆä¸ºæˆ‘ä»¬ç¤¾åŒºçš„ä¸€å‘˜ï¼åœ¨ä½ ç¦»å¼€ä¹‹å‰:

*   ğŸ‘ä¸ºæ•…äº‹é¼“æŒï¼Œè·Ÿç€ä½œè€…èµ°ğŸ‘‰
*   ğŸ“°æŸ¥çœ‹[å‡çº§ç¼–ç å‡ºç‰ˆç‰©](https://levelup.gitconnected.com/?utm_source=pub&utm_medium=post)ä¸­çš„æ›´å¤šå†…å®¹
*   ğŸ””å…³æ³¨æˆ‘ä»¬:[Twitter](https://twitter.com/gitconnected)|[LinkedIn](https://www.linkedin.com/company/gitconnected)|[æ—¶äº‹é€šè®¯](https://newsletter.levelup.dev)

ğŸš€ğŸ‘‰ [**åŠ å…¥å‡çº§äººæ‰é›†ä½“ï¼Œæ‰¾åˆ°ä¸€ä»½æƒŠè‰³çš„å·¥ä½œ**](https://jobs.levelup.dev/talent/welcome?referral=true)