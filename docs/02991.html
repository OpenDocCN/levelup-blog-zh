<html>
<head>
<title>Going Serverless with Node.js and Clean Architecture</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Node.js和干净的架构实现无服务器化</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/going-serverless-with-node-js-and-clean-architecture-a365208816ba?source=collection_archive---------7-----------------------#2020-04-14">https://levelup.gitconnected.com/going-serverless-with-node-js-and-clean-architecture-a365208816ba?source=collection_archive---------7-----------------------#2020-04-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><h1 id="d0cd" class="jq jr it bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated"><strong class="ak">概述</strong></h1><p id="09d8" class="pw-post-body-paragraph ko kp it kq b kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">每次我开始一个项目时，我都会和我的团队或我自己(当我在做自己的项目时)讨论很多，以找到最好的技术、架构、模式和一切。这一次，我想建立一个自己的项目来帮助新冠肺炎，所以我开始寻找新技术，我发现了许多伟大的技术！我喜欢做项目结构，所以我总是为我使用的每个平台准备一些基础代码，比如Android原生应用、Web开发、服务器等等。当然，技术变化很大，太快了，这是更大的挑战！我们怎样才能跟上这个不断变化的世界呢？加班我的朋友，TANSTAAFL！:D</p><p id="c6d3" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated">三年前，我参与了一个无服务器架构项目和无服务器框架，然而，我发现这是这个项目的最佳方法。无服务器架构很棒，因为它可以扩展(天空的限制),我只为它的使用付费，所以，如果它有太多的用户，我必须为那么多的用户付费，但是，这意味着应用程序是成功的，而且，由于这是一个非营利项目，我很确定我可能会从某个地方获得帮助来支付这些未来的账单。</p><p id="58c6" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated">我在这个建筑上花了很多时间，所以，我想，也许，它可以帮助一些人。对于新的无服务器项目，这可能是一个很好的起点。对于这一个，我使用了<a class="ae lr" href="https://serverless.com/" rel="noopener ugc nofollow" target="_blank">无服务器框架</a>和<a class="ae lr" href="https://aws.amazon.com/" rel="noopener ugc nofollow" target="_blank"> AWS云平台</a>、<a class="ae lr" href="https://nodejs.org/" rel="noopener ugc nofollow" target="_blank"> Node.js </a>、<a class="ae lr" href="https://www.typescriptlang.org/" rel="noopener ugc nofollow" target="_blank"> Typescript </a>、<a class="ae lr" href="https://aws.amazon.com/dynamodb" rel="noopener ugc nofollow" target="_blank"> DynamoDB </a>、<a class="ae lr" href="https://aws.amazon.com/sqs/" rel="noopener ugc nofollow" target="_blank"> SQS </a>和<a class="ae lr" href="https://en.wikipedia.org/wiki/Internationalization_and_localization" rel="noopener ugc nofollow" target="_blank">国际化</a>。该架构尝试(至少😂)遵循鲍勃大叔提出的<a class="ae lr" href="https://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html" rel="noopener ugc nofollow" target="_blank">清洁架构</a>。这个项目(将永远不会完成)可以在这里找到<a class="ae lr" href="https://github.com/etnishiyama/server-base-serverless" rel="noopener ugc nofollow" target="_blank"/>，任何关于如何增强结构的想法都是非常欢迎的(请！).</p><h1 id="d5e6" class="jq jr it bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">干净的建筑</h1><p id="bcd1" class="pw-post-body-paragraph ko kp it kq b kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">如果您不太熟悉clean架构，请去了解一下😂…开个玩笑，别担心，我也不知道那么多，我们永远不会有完美的建筑。我们能做的是了解许多不同的架构，并使它们适应我们的项目。不要试图让你的项目严格符合一个完美的架构，你会有未来的问题。有一点是千真万确的，通过定义层并保持它们之间的解耦，代码变得更干净，更易测试和维护，这就是为什么我喜欢干净的架构和许多其他共享相同策略的架构。</p><p id="2b64" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated">依我看，项目架构只是关于模式的。我们需要有设计指南来开发软件，我们不能对同一件事有不同的方法。如果你是团队成员，你需要有代码不是你的思想(妈的，我用这个吃了那么多苦)！！一个人需要按照团队设计准则编写代码，你不应该使用camelCase定义变量名如果每个人都使用snake_case，请！😑(只是一个简单的例子)！</p><h1 id="baf5" class="jq jr it bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">项目结构</h1><p id="6f1a" class="pw-post-body-paragraph ko kp it kq b kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">这里的想法是遵循鲍勃叔叔提出的干净的架构:</p><figure class="lt lu lv lw gt lx gh gi paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="gh gi ls"><img src="../Images/76080b31c8b1ffed64f29a6d4e392e0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B7LkQDyDqLN3rRSrNYkETA.jpeg"/></div></div></figure><p id="25c7" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated">为了实现这一点，我使用了以下原则:<br/> —内层:实体；<br/> —第二层:用例；<br/> —第三层:app<br/> —第四层:框架；</p><p id="45af" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated">内层:与模型本身相关的一切。基本上，我们有3个文件:模型、模式和验证器。我将验证器放在这里，因为它只与模型相关，并且是构建用户对象所需要的。</p><p id="87e2" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated">第二层:所有用例都放在这里。当考虑RESTful API时，基本用例是CRUD操作，但是如果我们需要停用用户呢？如果我们在收到新订单后需要给用户追加一个新的产品类别标签怎么办(想想一个电商系统)。给出的每个例子都是use_cases文件夹中的一个新用例。</p><p id="fc36" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated">第三层:控制者和契约。控制器是您能够实现您的端点和契约的地方，它被定义为使插入和拔出不同的数据库、国际化库、队列客户机等变得更容易..要使用不同的框架，只需在config文件夹中更改project_dependencies文件上的对象，非常简单！(当然你需要首先实现新的框架，而不是魔术😑).</p><p id="1f34" class="pw-post-body-paragraph ko kp it kq b kr lm kt ku kv ln kx ky kz lo lb lc ld lp lf lg lh lq lj lk ll im bi translated">第四层:框架。所以你在第三层定义了一些契约，对吗？现在，我们需要实施它们，而现在正是时候。在这里，您可以为同一个契约实现许多不同的框架，然后将它插入到您的项目中。</p><h1 id="cc91" class="jq jr it bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">TL；速度三角形定位法(dead reckoning)</h1><p id="854f" class="pw-post-body-paragraph ko kp it kq b kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">创建这个基础结构是为了加速新的无服务器项目。这种结构倾向于简洁、可测试、易于维护、添加新功能和改变框架。任何关于改进的想法都非常受欢迎。使用它或者只是看看它来实现你的下一个项目:)<br/>项目可以在<a class="ae lr" href="https://github.com/etnishiyama/server-base-serverless" rel="noopener ugc nofollow" target="_blank">这里找到</a>。感谢阅读！</p><h1 id="e0de" class="jq jr it bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">后续步骤</h1><p id="1944" class="pw-post-body-paragraph ko kp it kq b kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">—测试案例；<br/> — Swagger API文档；<br/> —日志服务；</p></div></div>    
</body>
</html>