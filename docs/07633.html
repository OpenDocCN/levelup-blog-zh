<html>
<head>
<title>How To Upload and Sync Files To An AWS S3 Bucket</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何将文件上传和同步到AWS S3存储桶</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-upload-and-sync-files-to-an-aws-s3-bucket-52ddfcec5bc1?source=collection_archive---------3-----------------------#2021-03-02">https://levelup.gitconnected.com/how-to-upload-and-sync-files-to-an-aws-s3-bucket-52ddfcec5bc1?source=collection_archive---------3-----------------------#2021-03-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/beeabe44d38f3545c58b133f7707faf9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Y80cziUH7kX0zili"/></div></div><figcaption class="jc jd gj gh gi je jf bd b be z dk translated"><a class="ae jg" href="https://unsplash.com/@pixtolero2?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">丹尼尔·埃勒杜特</a>在<a class="ae jg" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><div class=""/><div class=""><h2 id="189f" class="pw-subtitle-paragraph kg ji jj bd b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dk translated">AWS CLI和AWS PowerShell数据迁移工具的比较</h2></div><p id="d97d" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">AWS CLI和AWS PowerShell工具是功能强大的开源工具，允许您通过命令行Shell与AWS服务进行交互。</p><p id="19f5" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">下面我将提供每个工具的官方文档的链接，以及入门所需的最基本的命令。我还将包括一些使用这些工具上传文件时可能遇到的障碍和解决方案或变通办法。</p><p id="e882" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果你想知道他们如何比较，请滚动到文章的最后一节。</p><p id="ec19" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们的目标是为希望安装和使用这些工具的人提供快速参考，并帮助他们做出决策，选择更适合数据迁移的工具。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="5a0c" class="mb mc jj bd md me mf mg mh mi mj mk ml kp mm kq mn ks mo kt mp kv mq kw mr ms bi translated">先决条件</h1><ul class=""><li id="01de" class="mt mu jj la b lb mv le mw lh mx ll my lp mz lt na nb nc nd bi translated">AWS S3时段和时段名称</li></ul><div class="is it gp gr iu ne"><a href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/create-bucket-overview.html" rel="noopener  ugc nofollow" target="_blank"><div class="nf ab fo"><div class="ng ab nh cl cj ni"><h2 class="bd jk gy z fp nj fr fs nk fu fw ji bi translated">创建存储桶</h2><div class="nl l"><h3 class="bd b gy z fp nj fr fs nk fu fw dk translated">要将您的数据上传到亚马逊S3，您必须首先在其中一个AWS区域创建一个亚马逊S3存储桶。当您创建…</h3></div><div class="nm l"><p class="bd b dl z fp nj fr fs nk fu fw dk translated">docs.aws.amazon.com</p></div></div></div></a></div><ul class=""><li id="24fa" class="mt mu jj la b lb lc le lf lh nn ll no lp np lt na nb nc nd bi translated">AWS帐户的访问密钥和密钥对</li></ul><div class="is it gp gr iu ne"><a href="https://docs.aws.amazon.com/powershell/latest/userguide/pstools-appendix-sign-up.html" rel="noopener  ugc nofollow" target="_blank"><div class="nf ab fo"><div class="ng ab nh cl cj ni"><h2 class="bd jk gy z fp nj fr fs nk fu fw ji bi translated">AWS帐户和访问密钥</h2><div class="nl l"><h3 class="bd b gy z fp nj fr fs nk fu fw dk translated">要访问AWS，您需要注册一个AWS帐户。访问密钥包括访问密钥ID和秘密访问…</h3></div><div class="nm l"><p class="bd b dl z fp nj fr fs nk fu fw dk translated">docs.aws.amazon.com</p></div></div></div></a></div><h1 id="abb1" class="mb mc jj bd md me nq mg mh mi nr mk ml kp ns kq mn ks nt kt mp kv nu kw mr ms bi translated">AWS CLI</h1><h2 id="4bbc" class="nv mc jj bd md nw nx dn mh ny nz dp ml lh oa ob mn ll oc od mp lp oe of mr og bi translated">装置</h2><div class="is it gp gr iu ne"><a href="https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2.html" rel="noopener  ugc nofollow" target="_blank"><div class="nf ab fo"><div class="ng ab nh cl cj ni"><h2 class="bd jk gy z fp nj fr fs nk fu fw ji bi translated">安装、更新和卸载AWS CLI版本2</h2><div class="nl l"><h3 class="bd b gy z fp nj fr fs nk fu fw dk translated">在您的系统上安装AWS命令行界面版本2 (AWS CLI版本2)。</h3></div><div class="nm l"><p class="bd b dl z fp nj fr fs nk fu fw dk translated">docs.aws.amazon.com</p></div></div></div></a></div><p id="e960" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">打开您的终端(Mac)或命令提示符(Windows)。</p><h2 id="b8bb" class="nv mc jj bd md nw nx dn mh ny nz dp ml lh oa ob mn ll oc od mp lp oe of mr og bi translated">苹果个人计算机</h2><p id="6e60" class="pw-post-body-paragraph ky kz jj la b lb mv kk ld le mw kn lg lh oh lj lk ll oi ln lo lp oj lr ls lt im bi translated">运行以下命令。当它提示您输入密码时，请输入您电脑的密码。注意:使用<code class="fe ok ol om on b">sudo</code>将为所有用户<em class="oo">安装CLI，但避免了路径问题。</em></p><pre class="op oq or os gt ot on ou ov aw ow bi"><span id="3e56" class="nv mc jj on b gy ox oy l oz pa">$ <strong class="on jk">curl “</strong><a class="ae jg" href="https://awscli.amazonaws.com/AWSCLIV2.pkg" rel="noopener ugc nofollow" target="_blank"><strong class="on jk">https://awscli.amazonaws.com/AWSCLIV2.pkg</strong></a><strong class="on jk">" -o “AWSCLIV2.pkg”</strong><br/> % Total % Received % Xferd Average Speed Time Time Time Current<br/> Dload Upload Total Spent Left Speed<br/>100 23.8M 100 23.8M 0 0 10.2M 0 0:00:02 0:00:02 — : — : — 10.2M</span><span id="fcd4" class="nv mc jj on b gy pb oy l oz pa">$ <strong class="on jk">sudo installer -pkg AWSCLIV2.pkg -target /</strong><br/>Password:<br/>installer: Package name is AWS Command Line Interface<br/>installer: Installing at base path /<br/>installer: The install was successful.</span></pre><h2 id="3e4b" class="nv mc jj bd md nw nx dn mh ny nz dp ml lh oa ob mn ll oc od mp lp oe of mr og bi translated">Windows操作系统</h2><p id="7156" class="pw-post-body-paragraph ky kz jj la b lb mv kk ld le mw kn lg lh oh lj lk ll oi ln lo lp oj lr ls lt im bi translated">点击下面的链接，下载<strong class="la jk">。在<strong class="la jk">步骤1 </strong>中列出的msi </strong>文件。应该会很快。下载完成后，点击安装包，会弹出一个屏幕引导你完成安装。您可以保留所有默认选项。</p><div class="is it gp gr iu ne"><a href="https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2-windows.html" rel="noopener  ugc nofollow" target="_blank"><div class="nf ab fo"><div class="ng ab nh cl cj ni"><h2 class="bd jk gy z fp nj fr fs nk fu fw ji bi translated">在Windows上安装、更新和卸载AWS CLI版本2</h2><div class="nl l"><h3 class="bd b gy z fp nj fr fs nk fu fw dk translated">对于AWS CLI版本1，Python 2.7、3.4和3.5已被弃用。有关更多信息，请参见AWS CLI版本1…</h3></div><div class="nm l"><p class="bd b dl z fp nj fr fs nk fu fw dk translated">docs.aws.amazon.com</p></div></div></div></a></div><p id="968f" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">安装完成后，对于任一操作系统，运行该命令并查看它是否抛出错误。</p><pre class="op oq or os gt ot on ou ov aw ow bi"><span id="20aa" class="nv mc jj on b gy ox oy l oz pa">$ <strong class="on jk">aws --version<br/></strong>aws-cli/2.1.28 Python/3.8.8 Darwin/20.3.0 exe/x86_64 prompt/off</span></pre><p id="463a" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果有错误:</p><ul class=""><li id="1815" class="mt mu jj la b lb lc le lf lh nn ll no lp np lt na nb nc nd bi translated">Windows:关闭并重新打开命令提示符以刷新路径</li><li id="8ca6" class="mt mu jj la b lb pc le pd lh pe ll pf lp pg lt na nb nc nd bi translated">Mac:运行<code class="fe ok ol om on b">which aws</code>找到它的安装位置，并将其添加到您的路径中</li><li id="8a7b" class="mt mu jj la b lb pc le pd lh pe ll pf lp pg lt na nb nc nd bi translated">如果还是不行，就把错误复制粘贴到你的谷歌搜索栏里，按回车，点击前面几个链接。其中一个有希望包含答案。🙏🏼</li></ul><p id="706a" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果它告诉你你有哪个版本，恭喜你！</p><p id="8fd9" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在是时候用您的访问密钥和秘密访问密钥配置您的AWS bucket了。运行<code class="fe ok ol om on b">aws configure</code>它会提示你它需要的一切。(您现在还不需要存储桶名称。这只是为了让CLI知道它正在使用哪个AWS帐户。)</p><pre class="op oq or os gt ot on ou ov aw ow bi"><span id="7070" class="nv mc jj on b gy ox oy l oz pa">$ <strong class="on jk">aws configure</strong> <br/>AWS Access Key ID [None]: <em class="oo">AKFIE8F0DL2LK0EXAMPLE</em> <br/>AWS Secret Access Key [None]:<em class="oo">wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY</em> Default region name [None]: <em class="oo">us-west-2</em> <br/>Default output format [None]: <em class="oo">json (can leave blank, just hit enter)</em></span></pre><h2 id="a6b3" class="nv mc jj bd md nw nx dn mh ny nz dp ml lh oa ob mn ll oc od mp lp oe of mr og bi translated">上传和同步文件</h2><p id="c10d" class="pw-post-body-paragraph ky kz jj la b lb mv kk ld le mw kn lg lh oh lj lk ll oi ln lo lp oj lr ls lt im bi translated">若要上传和同步您的文件，请运行以下命令。您将需要您的<strong class="la jk">桶名</strong>和本地目录的<strong class="la jk">文件路径</strong>。</p><blockquote class="ph pi pj"><p id="7f22" class="ky kz oo la b lb lc kk ld le lf kn lg pk li lj lk pl lm ln lo pm lq lr ls lt im bi translated">提示:确保命令行位于正确的文件夹中，或者使用绝对路径。如果您感到困惑，使用绝对路径是最简单的，因为它包含根目录。</p><p id="634d" class="ky kz oo la b lb lc kk ld le lf kn lg pk li lj lk pl lm ln lo pm lq lr ls lt im bi translated">绝对路径示例:<br/>Mac:' ~/Desktop/folderto upload '<br/>Windows:' C:\ Users \ Venessa \ Desktop \ folderto upload '</p></blockquote><h2 id="995a" class="nv mc jj bd md nw nx dn mh ny nz dp ml lh oa ob mn ll oc od mp lp oe of mr og bi translated">苹果个人计算机</h2><pre class="op oq or os gt ot on ou ov aw ow bi"><span id="7986" class="nv mc jj on b gy ox oy l oz pa">$ <strong class="on jk">aws s3 sync ./FOLDER_PATH s3://BUCKET_NAME/SUB_DIRECTORY</strong></span></pre><figure class="op oq or os gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi pn"><img src="../Images/43a99d36e28dbc67503c6c1c39256744.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lEJZ3V08FGhgGdopFskVyw.png"/></div></div></figure><h2 id="fb3e" class="nv mc jj bd md nw nx dn mh ny nz dp ml lh oa ob mn ll oc od mp lp oe of mr og bi translated">Windows操作系统</h2><pre class="op oq or os gt ot on ou ov aw ow bi"><span id="8bb3" class="nv mc jj on b gy ox oy l oz pa">$ <strong class="on jk">aws s3 sync .\FOLDER_PATH s3://BUCKET_NAME/SUB_DIRECTORY</strong></span></pre><figure class="op oq or os gt iv gh gi paragraph-image"><div class="gh gi po"><img src="../Images/a14cb8504e5ca395fe3a32aeaca8d60d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1276/format:webp/1*iO3QgheJ1y7v7ym95mOuLA.png"/></div><figcaption class="jc jd gj gh gi je jf bd b be z dk translated">此外，如果您注意到了，您不需要在本地目录(Windows或Mac)的路径末尾加斜杠，但这也没有坏处。</figcaption></figure><blockquote class="ph pi pj"><p id="453e" class="ky kz oo la b lb lc kk ld le lf kn lg pk li lj lk pl lm ln lo pm lq lr ls lt im bi translated">提示:当您重新获得对命令行会话的控制，并且不再看到“Completed…”时，您就会知道什么时候完成了。当它上传一个大文件并且长时间处于“已完成”状态时，这让我很困惑。我以为它可能已经完成了，但它仍然在同步。</p></blockquote><figure class="op oq or os gt iv gh gi paragraph-image"><div class="gh gi pp"><img src="../Images/9e703afce681670d9686a9d533c3f1e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1388/format:webp/1*OLZAhsaDIxakXrxj0n6wsw.png"/></div><figcaption class="jc jd gj gh gi je jf bd b be z dk translated">仍在同步…</figcaption></figure><figure class="op oq or os gt iv gh gi paragraph-image"><div class="gh gi pq"><img src="../Images/d456edf379151057b362d701645a256a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1382/format:webp/1*Qals3tk9uUkistNoVIKVPQ.png"/></div><figcaption class="jc jd gj gh gi je jf bd b be z dk translated">完整！</figcaption></figure><p id="ea23" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这就是用AWS CLI上传和同步文件的全部内容！超级简单，对吧？</p><p id="6179" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果它由于某种原因中断或您的计算机意外重启，您可以通过运行上面的完整<code class="fe ok ol om on b">aws s3 sync</code>命令<strong class="la jk">轻松重启同步</strong>而无需复制文件。它会从停止的地方继续前进！</p><p id="1c2e" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">以下是所有可能参数的文档:</p><div class="is it gp gr iu ne"><a href="https://docs.aws.amazon.com/cli/latest/reference/s3/sync.html" rel="noopener  ugc nofollow" target="_blank"><div class="nf ab fo"><div class="ng ab nh cl cj ni"><h2 class="bd jk gy z fp nj fr fs nk fu fw ji bi translated">sync - AWS CLI 1.19.16命令参考</h2><div class="nl l"><h3 class="bd b gy z fp nj fr fs nk fu fw dk translated">(布尔值)显示使用指定命令执行的操作，而不实际运行它们…</h3></div><div class="nm l"><p class="bd b dl z fp nj fr fs nk fu fw dk translated">docs.aws.amazon.com</p></div></div><div class="pr l"><div class="ps l pt pu pv pr pw ja ne"/></div></div></a></div><h1 id="7851" class="mb mc jj bd md me nq mg mh mi nr mk ml kp ns kq mn ks nt kt mp kv nu kw mr ms bi translated">AWS PowerShell工具</h1><h2 id="aa29" class="nv mc jj bd md nw nx dn mh ny nz dp ml lh oa ob mn ll oc od mp lp oe of mr og bi translated">装置</h2><div class="is it gp gr iu ne"><a href="https://docs.aws.amazon.com/powershell/latest/userguide/pstools-getting-set-up.html" rel="noopener  ugc nofollow" target="_blank"><div class="nf ab fo"><div class="ng ab nh cl cj ni"><h2 class="bd jk gy z fp nj fr fs nk fu fw ji bi translated">为PowerShell安装AWS工具</h2><div class="nl l"><h3 class="bd b gy z fp nj fr fs nk fu fw dk translated">安装用于PowerShell的AWS工具-用于PowerShell的AWS工具，以成功安装和使用AWS工具…</h3></div><div class="nm l"><p class="bd b dl z fp nj fr fs nk fu fw dk translated">docs.aws.amazon.com</p></div></div></div></a></div><h2 id="1120" class="nv mc jj bd md nw nx dn mh ny nz dp ml lh oa ob mn ll oc od mp lp oe of mr og bi translated">苹果个人计算机</h2><p id="cede" class="pw-post-body-paragraph ky kz jj la b lb mv kk ld le mw kn lg lh oh lj lk ll oi ln lo lp oj lr ls lt im bi translated">要安装PowerShell:</p><pre class="op oq or os gt ot on ou ov aw ow bi"><span id="9d6c" class="nv mc jj on b gy ox oy l oz pa">$ <strong class="on jk">brew install --cask powershell</strong></span></pre><p id="517f" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">打开Powershell:</p><pre class="op oq or os gt ot on ou ov aw ow bi"><span id="dbb7" class="nv mc jj on b gy ox oy l oz pa">$<strong class="on jk"> pwsh</strong></span></pre><h2 id="33f7" class="nv mc jj bd md nw nx dn mh ny nz dp ml lh oa ob mn ll oc od mp lp oe of mr og bi translated">Windows操作系统</h2><p id="03cf" class="pw-post-body-paragraph ky kz jj la b lb mv kk ld le mw kn lg lh oh lj lk ll oi ln lo lp oj lr ls lt im bi translated">点击开始→输入“PowerShell”→点击Windows PowerShell。以管理员身份打开<strong class="la jk">而不是</strong>。亚马逊解释道:</p><blockquote class="ph pi pj"><p id="7b5a" class="ky kz oo la b lb lc kk ld le lf kn lg pk li lj lk pl lm ln lo pm lq lr ls lt im bi translated">我们建议您<em class="jj">不要</em>以具有提升权限的管理员身份运行PowerShell，除非手头的任务需要。这是因为潜在的安全风险，并且不符合最小特权原则。</p></blockquote><p id="cc84" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">打开PowerShell后，运行以下命令:</p><pre class="op oq or os gt ot on ou ov aw ow bi"><span id="c888" class="nv mc jj on b gy ox oy l oz pa">$ <strong class="on jk">Install-Module -Name AWS.Tools.Installer</strong></span></pre><p id="02a1" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然后，通过运行下面的命令来设置凭据。注意:与<code class="fe ok ol om on b">aws configure</code>不同，如果你只是运行<code class="fe ok ol om on b">Set-AWSCredential</code>，这里没有提示，你需要在一个命令中输入所有内容。</p><pre class="op oq or os gt ot on ou ov aw ow bi"><span id="d41b" class="nv mc jj on b gy ox oy l oz pa">$ <strong class="on jk">Set-AWSCredential `<br/>                 -AccessKey AKIA0123456787EXAMPLE `<br/>                 -SecretKey e51zRpSvNYzYe/Qmb6SHvC+FdNm6EXAMPLEKEY `<br/>                 -StoreAs default</strong></span></pre><h2 id="2f70" class="nv mc jj bd md nw nx dn mh ny nz dp ml lh oa ob mn ll oc od mp lp oe of mr og bi translated">上传和同步</h2><p id="8561" class="pw-post-body-paragraph ky kz jj la b lb mv kk ld le mw kn lg lh oh lj lk ll oi ln lo lp oj lr ls lt im bi translated">要将文件上传到S3 bucket的根文件夹中，您将需要bucket名称和<code class="fe ok ol om on b">-File</code>参数，这将是您本地机器上文件的<strong class="la jk">名称:</strong></p><pre class="op oq or os gt ot on ou ov aw ow bi"><span id="cbe7" class="nv mc jj on b gy ox oy l oz pa">$ <strong class="on jk">Write-S3Object -BucketName bucket -File file.txt</strong></span></pre><p id="851e" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">要上传到S3桶中的一个<em class="oo">特定位置</em>，您可以使用<code class="fe ok ol om on b">-Key</code> <strong class="la jk"> </strong>参数并将<strong class="la jk">路径指定为一个字符串</strong>(这是<strong class="la jk">而不是</strong>访问密钥或秘密访问密钥)。</p><pre class="op oq or os gt ot on ou ov aw ow bi"><span id="98f5" class="nv mc jj on b gy ox oy l oz pa">$ <strong class="on jk">Write-S3Object -BucketName bucket -Key "SUBFOLDER/FILE.txt" -File file.txt</strong></span></pre><p id="104e" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">要同步<em class="oo">整个文件夹</em>，使用<code class="fe ok ol om on b">-Folder</code>参数，它将是您本地机器上的路径。同样，请确保您位于正确的文件夹中或使用绝对路径。</p><h2 id="d576" class="nv mc jj bd md nw nx dn mh ny nz dp ml lh oa ob mn ll oc od mp lp oe of mr og bi translated">可选择的</h2><p id="6bad" class="pw-post-body-paragraph ky kz jj la b lb mv kk ld le mw kn lg lh oh lj lk ll oi ln lo lp oj lr ls lt im bi translated">使用<br/> <code class="fe ok ol om on b">-KeyPrefix</code>参数(这是<strong class="la jk">而不是</strong>访问密钥或秘密访问密钥)将文件夹上传到S3桶内的<em class="oo">子目录</em>。</p><p id="439b" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Write-S3Object只上传文件夹中的文件。如果您在文件夹中有<em class="oo">文件夹，并且也想获取其中的文件，您可以使用<code class="fe ok ol om on b">-Recurse</code>参数并将其设置为<strong class="la jk"> True。</strong></em></p><p id="856f" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">以下是包含所有选项的完整命令的外观:</p><pre class="op oq or os gt ot on ou ov aw ow bi"><span id="da28" class="nv mc jj on b gy ox oy l oz pa">$ <strong class="on jk">Write-S3Object -BucketName bucket -Folder .\Scripts -KeyPrefix Scripts\ -Recurse True</strong></span></pre><p id="6bb8" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">以下是所有可能参数的文档:</p><div class="is it gp gr iu ne"><a href="https://docs.aws.amazon.com/powershell/latest/reference/items/Write-S3Object.html" rel="noopener  ugc nofollow" target="_blank"><div class="nf ab fo"><div class="ng ab nh cl cj ni"><h2 class="bd jk gy z fp nj fr fs nk fu fw ji bi translated">用于PowerShell参考的AWS工具</h2><div class="nl l"><h3 class="bd b gy z fp nj fr fs nk fu fw dk translated">编辑描述</h3></div><div class="nm l"><p class="bd b dl z fp nj fr fs nk fu fw dk translated">docs.aws.amazon.com</p></div></div></div></a></div><h1 id="a884" class="mb mc jj bd md me nq mg mh mi nr mk ml kp ns kq mn ks nt kt mp kv nu kw mr ms bi translated">那么，您应该使用哪一个来进行数据迁移呢？</h1><p id="6ec2" class="pw-post-body-paragraph ky kz jj la b lb mv kk ld le mw kn lg lh oh lj lk ll oi ln lo lp oj lr ls lt im bi translated">我会说是AWS CLI。原因如下:</p><p id="9031" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">两者都很容易安装和开始。您可以使用其中任何一个上传单个和批处理文件。</p><p id="abb9" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然而，在同步大量文件时，PowerShell工具可能比不上AWS CLI。</p><p id="cb27" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">从某种意义上说，它们都是同步的，在一天结束时，您的S3存储桶将看起来像您的本地目录。主要区别在于PowerShell工具将重新上传它们，而不管它们是否已经被更新或导入；而CLI工具只会在文件尚未导入或已更新的情况下导入文件，这在您随着时间推移迁移数据并添加新文件时尤其有利。</p><blockquote class="px"><p id="48e1" class="py pz jj bd qa qb qc qd qe qf qg lt dk translated">随着时间的推移，CLI工具对于大型数据迁移来说更加高效，因为它可以从中断的地方重新开始，而PowerShell工具则不能。</p></blockquote><p id="7dbd" class="pw-post-body-paragraph ky kz jj la b lb qh kk ld le qi kn lg lh qj lj lk ll qk ln lo lp ql lr ls lt im bi translated">PowerShell工具最有用的特性之一是，您可以编写Shell脚本来管理AWS资源。因此，您可以编写一个shell脚本来克服这个问题，但是这会变得冗长而低效，尤其是如果您可以使用AWS CLI的内置特性:<code class="fe ok ol om on b">aws sync</code>用一行代码就可以做到这一点。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><p id="8e20" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我希望我能够帮助你开始使用这些工具来同步你的数据。如果你有任何问题，请不要犹豫地问！</p></div></div>    
</body>
</html>