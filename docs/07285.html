<html>
<head>
<title>Demystifying the scary detached HEAD in Git</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">揭秘Git中可怕的分离头</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/demystifying-the-scary-detached-head-in-git-a1b8e5169ff6?source=collection_archive---------7-----------------------#2021-02-06">https://levelup.gitconnected.com/demystifying-the-scary-detached-head-in-git-a1b8e5169ff6?source=collection_archive---------7-----------------------#2021-02-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div class="gh gi jq"><img src="../Images/684aaf79d5650d10ba9502a3c92cff53.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/0*gy9cBzDsp-GP1CFH"/></div></figure><p id="f7dd" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">我同意,<code class="fe kv kw kx ky b">You are in 'detached' HEAD state</code>消息听起来确实很吓人。我希望Git的创造者选择一个不那么令人担忧的。但是让我来消除你的担忧——分离的头部状态是容易逆转的，是一个项目的自然状态。完整的信息如下所示:</p><figure class="la lb lc ld gt ju gh gi paragraph-image"><div class="gh gi kz"><img src="../Images/1f405042edf310d3e987a66ce850954f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1198/0*DKBQE0XbWi2i7Lly"/></div></figure><p id="4ca1" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">如果您是来寻求解决方案的，请随意跳到“如何解决”部分。如果你想知道更多关于这种状态背后的原因，请继续阅读。</p><h2 id="83f4" class="le lf it bd lg lh li dn lj lk ll dp lm ki ln lo lp km lq lr ls kq lt lu lv lw bi translated">Git基础</h2><p id="8961" class="pw-post-body-paragraph jx jy it jz b ka lx kc kd ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku im bi translated">首先，让我们浏览一下Git是如何工作的。不要担心，我们将只涵盖足够了解国家的根本原因。</p><p id="c944" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated"><strong class="jz iu">提交的父子关系</strong></p><p id="6626" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">Git是一个由对象和指针组成的系统。提交通过父子关系连接在一起。每个提交都指向前一个提交作为其父提交。这里有一个图表来说明这一点:</p><figure class="la lb lc ld gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="gh gi mc"><img src="../Images/95c81dc7309251301167392f5fad1488.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*alKnwWf4jYWrjDSl"/></div></div><figcaption class="mh mi gj gh gi mj mk bd b be z dk translated"><a class="ae ml" href="https://trailhead.salesforce.com/en/content/learn/v/modules/git-and-git-hub-basics/work-with-your-history-in-git" rel="noopener ugc nofollow" target="_blank">https://trail head . sales force . com/en/content/learn/v/modules/git-and-git-hub-basics/work-with-your-history-in-git</a></figcaption></figure><p id="d89c" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">注意除了第一次提交之外，每次提交都指向前一次提交。</p><p id="60ff" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated"><strong class="jz iu">头</strong></p><p id="20e5" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">下一个问题是什么是头？HEAD是指向当前工作提交的指针。它还定义了项目的当前状态。通常，HEAD指向一个分支。</p><p id="4d6e" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated"><strong class="jz iu"> Git分支</strong></p><p id="1886" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">很多人对什么是分支有个大概的概念。但是让我们试着给出一个简单的定义。简单地说，分支是提交的标签。当您推入一个分支时，该标签现在指向新提交。当您运行带有分支名称的<code class="fe kv kw kx ky b">checkout</code>命令时，Git会检查分支指向的最新提交。</p><p id="c34f" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">按照这个逻辑，当HEAD指向一个分支时，它指向该分支下的最新提交。</p><figure class="la lb lc ld gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="gh gi mc"><img src="../Images/8649631e0c82427ca24946b63dddd9ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*TGhMLUqx3HsjBCza"/></div></div><figcaption class="mh mi gj gh gi mj mk bd b be z dk translated"><a class="ae ml" href="https://trailhead.salesforce.com/en/content/learn/v/modules/git-and-git-hub-basics/work-with-your-history-in-git" rel="noopener ugc nofollow" target="_blank">https://trail head . sales force . com/en/content/learn/v/modules/git-and-git-hub-basics/work-with-your-history-in-git</a></figcaption></figure><p id="2c19" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">注意<code class="fe kv kw kx ky b">master</code>分支和头是如何指向同一个提交的。</p><h2 id="5233" class="le lf it bd lg lh li dn lj lk ll dp lm ki ln lo lp km lq lr ls kq lt lu lv lw bi translated">什么是超脱头？</h2><p id="f792" class="pw-post-body-paragraph jx jy it jz b ka lx kc kd ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku im bi translated">那么什么是超脱的头呢？根据<a class="ae ml" href="https://www.git-tower.com/learn/git/faq/detached-head-when-checkout-commit/" rel="noopener ugc nofollow" target="_blank"> Tower的博客文章:</a>“当一个特定的提交而不是一个分支被签出时——就是所谓的“分离头”。"</p><p id="0d9f" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">重申一下，这意味着你的项目负责人不再指向一个分支。相反，它指向一个特定的提交。当您使用提交散列而不是分支名称运行<code class="fe kv kw kx ky b">checkout</code>命令时，就会发生这种情况。顺便提一下，您可以使用<code class="fe kv kw kx ky b">git log</code>获得提交的散列值:</p><figure class="la lb lc ld gt ju gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/3f63fe0cdafef74709c99acd0051089f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1376/0*t3trZgYgrqhP9aCT"/></div></figure><h2 id="3935" class="le lf it bd lg lh li dn lj lk ll dp lm ki ln lo lp km lq lr ls kq lt lu lv lw bi translated">拆下头部的原因</h2><p id="c663" class="pw-post-body-paragraph jx jy it jz b ka lx kc kd ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku im bi translated">检查特定提交有几个原因。其中之一是调试或修复问题。在这种情况下，回滚到某个时刻可能会有所帮助。</p><p id="7bb3" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">另一个原因是对任何给定的问题尝试不同的解决方案。因为状态很容易纠正，所以这是一个处理代码的好方法。</p><h2 id="5f94" class="le lf it bd lg lh li dn lj lk ll dp lm ki ln lo lp km lq lr ls kq lt lu lv lw bi translated">如何修复</h2><p id="04ec" class="pw-post-body-paragraph jx jy it jz b ka lx kc kd ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku im bi translated">记住，分离的头不是一个错误，而是Git中的一个特性。也就是说，有两种方法可以让事情回归“正常”</p><p id="9275" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated"><strong class="jz iu">检查不同的分支</strong></p><p id="e4ca" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">如果你偶然发现自己处于这种状态，或者完成了实验，你需要做的就是检查另一个分支。Git会丢弃你未提交的代码，你的头会再次指向一个分支。</p><p id="fb16" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated"><strong class="jz iu">创建一个新的分支并提交你的代码。</strong></p><p id="bfcd" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">如果您有一些不想丢失的代码更改，创建一个新的分支并提交您的代码。下面是实现这一点的Git命令:</p><pre class="la lb lc ld gt mn ky mo mp aw mq bi"><span id="6395" class="le lf it ky b gy mr ms l mt mu">git branch &lt;branch-name&gt; &amp;&amp; git checkout &lt;branch-name&gt;</span></pre><p id="9295" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">一旦你这样做了，你就可以提交你的代码到新的分支。只要你在回到你的常规分支之前做到这一点，你就会没事的。</p><p id="329e" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">现在你知道了！一旦你理解了游戏中的基本逻辑，分离的头部就不那么可怕了，而且可能相当有用。</p></div><div class="ab cl mv mw hx mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="im in io ip iq"><p id="7616" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated"><em class="nc">原载于2021年2月6日https://isamatov.com</em><em class="nc"/><a class="ae ml" href="https://isamatov.com/demystifying-the-scary-detached-head-in-git" rel="noopener ugc nofollow" target="_blank"><em class="nc">。</em></a></p></div></div>    
</body>
</html>