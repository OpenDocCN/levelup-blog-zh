<html>
<head>
<title>Drag and Drop in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在React中拖放</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/easy-guide-drag-and-drop-in-reactjs-1a676291dce7?source=collection_archive---------2-----------------------#2022-04-15">https://levelup.gitconnected.com/easy-guide-drag-and-drop-in-reactjs-1a676291dce7?source=collection_archive---------2-----------------------#2022-04-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><blockquote class="jn jo jp"><p id="2ba5" class="jq jr js jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ij bi translated">D <!-- -->探索如何在5分钟内管理反应中的拖放。你可以在这里找到我的代码<a class="ae kp" href="https://github.com/MatteoTasinato/Easy-Drag-n-Drop-React-" rel="noopener ugc nofollow" target="_blank">。</a></p></blockquote><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi kq"><img src="../Images/b4e3ae8571293f0c05a3dead3aa2ab6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MTUP0fyDScjelMC1-d8ncQ.jpeg"/></div></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">了解如何在React中拖放组件。</figcaption></figure><p id="7c00" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lg kd ke kf lh kh ki kj li kl km kn ko ij bi translated">在开始之前，我们必须问自己，当我们谈论计算机中的拖放时，我们指的是什么。</p><blockquote class="jn jo jp"><p id="4bcc" class="jq jr js jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ij bi translated">我们可以说<strong class="jt ir">拖动&amp;放下</strong>是当一个<strong class="jt ir">组件</strong>被拖动到另一个<strong class="jt ir">组件</strong>上时，软件触发一个<strong class="jt ir">回调</strong>的能力。</p></blockquote><p id="2bc0" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lg kd ke kf lh kh ki kj li kl km kn ko ij bi translated">没错，这个回调可以为所欲为，可以让元素消失，可以触发百万函数链，但基本上就是这样的情况。</p><p id="806c" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lg kd ke kf lh kh ki kj li kl km kn ko ij bi translated">从现在开始我们将讨论一个真实的场景:我们想把一个<strong class="jt ir">棒球</strong>(可拖动对象)扔进一个<strong class="jt ir">纸盒</strong>(容器对象)中，然后<strong class="jt ir">读取写在球上的标志</strong>(回调函数)。</p><p id="9a0f" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lg kd ke kf lh kh ki kj li kl km kn ko ij bi translated">然后抓起一个纸盒子:</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi lj"><img src="../Images/3314b9cdc8e1055a87027095e5e8cc6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eowdlTpA0LPdajyFXF4lEA.jpeg"/></div></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">纸盒(通过<a class="ae kp" href="https://stockup.sitebuilderreport.com/stock-photos" rel="noopener ugc nofollow" target="_blank">储存</a></figcaption></figure><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div class="gh gi lk"><img src="../Images/6327a6c37abd42ed18aa278d58f4ed6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1308/format:webp/1*Jq1H7fHkq2jz5xz8MOxQWA.png"/></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">纸盒在Matrix中的外观。</figcaption></figure><p id="bec1" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lg kd ke kf lh kh ki kj li kl km kn ko ij bi translated">现在，我们的盒子很好，但是…它没用。我们需要它能够理解什么时候球被扔进了里面，并且能够阅读写在球上的标记。</p><p id="a521" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lg kd ke kf lh kh ki kj li kl km kn ko ij bi translated">幸运的是，Javascript是一个神奇的世界，在这里我们可以将额外的能力注入到我们想要的每个对象中，甚至是一个纸盒。</p><p id="93ca" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lg kd ke kf lh kh ki kj li kl km kn ko ij bi translated">在React中，有两种主要方法来增强组件:</p><p id="a303" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lg kd ke kf lh kh ki kj li kl km kn ko ij bi translated">第一个选项是创建一个<strong class="jt ir">方法</strong>，它将接受一个<strong class="jt ir">组件</strong>并返回一个组件的<strong class="jt ir">增强版本，这样:</strong></p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi ll"><img src="../Images/ec24512a52c3fe3f52935d112c2de634.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xdwM79VzCQBQZTrsXY3pcw.png"/></div></div></figure><p id="843c" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lg kd ke kf lh kh ki kj li kl km kn ko ij bi translated">或者我们可以创建一个<strong class="jt ir">方法</strong>来生成将被注入到我们的盒子中的能力:</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi lm"><img src="../Images/998f7a319cc3047c505685a36cfe30d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6--acDEHoHW0Gy2ypjAKNw.png"/></div></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">我们正在创建一种能力，可以读取放在我们容器中的任何物体上的标志。</figcaption></figure><p id="d3e9" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lg kd ke kf lh kh ki kj li kl km kn ko ij bi translated">我们将选择第二种方式。现在，我们如何创建<strong class="jt ir"> createBoxAbility </strong>方法呢？它需要生成一个将被纸盒使用的道具:</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi ln"><img src="../Images/719aa6d1921764673b8a11c142240c03.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qoD-DblVmwS-FQ1w4M5tLg.png"/></div></div></figure><p id="7cea" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lg kd ke kf lh kh ki kj li kl km kn ko ij bi translated">我们可以看到这个方法返回了两个元素的属性:</p><ul class=""><li id="1dcf" class="lo lp iq jt b ju jv jy jz lg lq lh lr li ls ko lt lu lv lw bi translated"><strong class="jt ir"> onDragOver </strong>:用于注册一个回调，当一个组件被拖拽到盒子上时，这个回调将被触发。我们希望阻止此事件的浏览器默认效果:</li></ul><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi ll"><img src="../Images/89e6cf17417315d83055ff7f62ed4940.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k085KOPiYd99LkSYivxRBA.png"/></div></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">对<strong class="bd lx"> onDragOver </strong>的回调。它只会停止事件传播。</figcaption></figure><ul class=""><li id="7e8a" class="lo lp iq jt b ju jv jy jz lg lq lh lr li ls ko lt lu lv lw bi translated"><strong class="jt ir"> onDrop </strong>:当用户在我们的盒子上释放拖动的球时，这个回调被触发。</li></ul><p id="6520" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lg kd ke kf lh kh ki kj li kl km kn ko ij bi translated">您可以注意到这个回调为我们提供了一个<strong class="jt ir">数据传输</strong>对象。这个物体为我们提供了读写球上信息的能力。在本例中，我们正在读取它的<strong class="jt ir">标志</strong>属性。</p><p id="d56b" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lg kd ke kf lh kh ki kj li kl km kn ko ij bi translated">现在我们有了<strong class="jt ir">能力来读取掉落物体上的标志，</strong>很容易将其应用到盒子上:</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi ly"><img src="../Images/796a73e44f5443e7a72cd884a7fcfda8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QoCBroUeMi0NFTyxs9Ikww.png"/></div></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">这个盒子能够接收一个球，并读出球上的标志。</figcaption></figure><p id="6c25" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lg kd ke kf lh kh ki kj li kl km kn ko ij bi translated">我们完成了纸盒，现在轮到棒球了！</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi lz"><img src="../Images/99fa4a5472ac20467f1d9533481824c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*XJy7UbnrH5qKjzMB"/></div></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">照片由<a class="ae kp" href="https://unsplash.com/@cgbriggs19?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">克里斯·布里格斯</a>在<a class="ae kp" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="5d8d" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lg kd ke kf lh kh ki kj li kl km kn ko ij bi translated">棒球作为一个HTML组件，有两个我们必须注意的属性:</p><ol class=""><li id="21b8" class="lo lp iq jt b ju jv jy jz lg lq lh lr li ls ko ma lu lv lw bi translated"><strong class="jt ir"> draggable </strong>:布尔值，如果为真，则允许用户拖动元素；</li><li id="6235" class="lo lp iq jt b ju mb jy mc lg md lh me li mf ko ma lu lv lw bi translated"><strong class="jt ir"> onDragStart </strong>:用户开始拖动我们的球时触发的回调。</li></ol><p id="d065" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lg kd ke kf lh kh ki kj li kl km kn ko ij bi translated">现在，我们必须编写一个方法来生成能够使我们的球可拖动的道具:</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi mg"><img src="../Images/183619d38b6b77c1e2441a313823c863.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H5TdNW4mbIECKUwssiMv1A.png"/></div></div></figure><p id="34ff" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lg kd ke kf lh kh ki kj li kl km kn ko ij bi translated">如你所见<strong class="jt ir"> onDragStart </strong>可以访问<strong class="jt ir">data transfer</strong>对象。我们可以用这个物体在我们的球上签名。</p><p id="b6a6" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lg kd ke kf lh kh ki kj li kl km kn ko ij bi translated">至于盒子，将这个属性附加到球上非常容易，让我们来创建它:</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi lm"><img src="../Images/b00f880e3b1e41d468c57a39e885b182.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z5KlQIqLBDLz7CwokLG_Tg.png"/></div></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">创造被拖的能力。</figcaption></figure><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi mh"><img src="../Images/aa5a333eb15e60817d3b2a465d593944.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PVnvaGZhGiLug6HUJ89sxA.png"/></div></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">在棒球上注入能力。</figcaption></figure><p id="c3bf" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lg kd ke kf lh kh ki kj li kl km kn ko ij bi translated">嘿，我们成功了！恭喜你！尝试链接到<a class="ae kp" href="https://github.com/MatteoTasinato/Easy-Drag-n-Drop-React-" rel="noopener ugc nofollow" target="_blank">这里</a>的代码，您将能够看到类似这样的内容:</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi mi"><img src="../Images/8f4d97f9fd357e43afa8687ca405f398.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0IQeZ-i4wzJ7kMeeUDabHg.png"/></div></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">本文中显示的代码的执行。</figcaption></figure><p id="59a5" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lg kd ke kf lh kh ki kj li kl km kn ko ij bi translated">现在你可以让每一个HTML组件都可以拖动了！当然，有很多方法可以改进这一小块代码，把这篇文章作为你好奇心的起点吧！</p><p id="ba41" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lg kd ke kf lh kh ki kj li kl km kn ko ij bi translated"><strong class="jt ir">奖励积分:</strong></p><p id="a3db" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lg kd ke kf lh kh ki kj li kl km kn ko ij bi translated">您可以将这些函数包装在一个组件中，并将其用作包装器。</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi mj"><img src="../Images/e31a7554e5f32628f897ecc92633723b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oDUbuN0UBbGqrhRMkhWfMA.png"/></div></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">包装组件。根据你的需要修改它，例如，你可以使用一个<strong class="bd lx"> React.useCallback. </strong></figcaption></figure><p id="41bc" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lg kd ke kf lh kh ki kj li kl km kn ko ij bi translated">并以这种方式使用包装器:</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi mk"><img src="../Images/2fd6249459ec75e0766d657496cf7029.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xpYTuriwjocRnFY1BvAmFw.png"/></div></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">你收藏的好作品。</figcaption></figure><p id="38ac" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lg kd ke kf lh kh ki kj li kl km kn ko ij bi translated">您甚至可以使用这个包装器来使所有东西都可以拖动！</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi mg"><img src="../Images/f86cb20a1811ad6bc6f99fc81b9ab0fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WTAaXkiiM6SzXHkoRmuxpA.png"/></div></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">让你的激情变得可以拖动。</figcaption></figure><p id="7320" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lg kd ke kf lh kh ki kj li kl km kn ko ij bi translated">那都是乡亲们！如果您喜欢这篇文章，请跟随我，我的下一篇文章将是关于Javascript事件监听器的！</p></div></div>    
</body>
</html>