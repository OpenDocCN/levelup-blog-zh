<html>
<head>
<title>Ethereum Transactions Receipts, Logs and Transaction details</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">以太坊交易收据、日志和交易详情</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/ethereum-transactions-receipts-logs-and-transaction-details-e3d799eaf913?source=collection_archive---------1-----------------------#2021-07-19">https://levelup.gitconnected.com/ethereum-transactions-receipts-logs-and-transaction-details-e3d799eaf913?source=collection_archive---------1-----------------------#2021-07-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="81ea" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">以太坊节点系列V —如何获得以太坊交易收据、日志bloom和交易细节</h2></div><p id="41cf" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本文中，我将假设您阅读了我在Geth以太坊节点上的其他文章，并且您已经有一台运行以太坊Geth的Ubuntu机器。如果没有，请回到我的其他文章，找到如何部署和连接以太坊节点:</p><ul class=""><li id="e55a" class="le lf it kk b kl km ko kp kr lg kv lh kz li ld lj lk ll lm bi translated">运行在Ubuntu上的以太坊节点。查看这篇文章，我解释了如何在Ubuntu AWS上部署以太坊节点</li><li id="1dc5" class="le lf it kk b kl lo ko lp kr lq kv lr kz ls ld lj lk ll lm bi translated">您已经知道了一些使用Etehreum网络的命令。查看这篇文章，在那里我谈到了一些<a class="ae ln" rel="noopener ugc nofollow" target="_blank" href="/exploring-the-ethereum-block-9fa3a68e42d8">命令来探索以太坊块</a></li><li id="6f7f" class="le lf it kk b kl lo ko lp kr lq kv lr kz ls ld lj lk ll lm bi translated">另外，请养一只小狗🐶🤩</li></ul><p id="90ee" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们回顾一下Geth上的一些附加功能，从交易收据开始。</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi lt"><img src="../Images/a4bea4a7ee6f136c92877559a2df5d04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-Di4HPVwIFhjIMlrvCYSxA.jpeg"/></div></div></figure><p id="b80b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">假设您在安装了geth的Ubuntu机器上，通过键入以下命令打开Geth控制台:</p><pre class="lu lv lw lx gt mf mg mh mi aw mj bi"><span id="945e" class="mk ml it mg b gy mm mn l mo mp">geth attach</span></pre><p id="52f6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">哦，别忘了，要做到这一点，你需要运行节点，也就是说，你的以太坊节点至少需要同步。如果需要，查看:<a class="ae ln" rel="noopener ugc nofollow" target="_blank" href="/deploying-an-ethereum-node-on-aws-cloud-512a861026e2">如何在Ubuntu AWS上部署以太坊节点</a>寻求帮助。</p><p id="a38e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">好吧。一旦运行<em class="mq"> geth attach </em>，函数:</p><pre class="lu lv lw lx gt mf mg mh mi aw mj bi"><span id="e3ca" class="mk ml it mg b gy mm mn l mo mp">eth.getTransactionReceipt()</span></pre><p id="3596" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，您可以添加一个事务哈希:</p><pre class="lu lv lw lx gt mf mg mh mi aw mj bi"><span id="1284" class="mk ml it mg b gy mm mn l mo mp">eth.getTransactionReceipt(“0xc280ab030e20bc9ef72c87b420d58f598bda753ef80a53136a923848b0c89a5c”) </span></pre><p id="a265" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">会给我们更多的交易信息。为了从任何交易中检索交易收据，我们需要它的散列。</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div class="gh gi mr"><img src="../Images/47e2585f1955ff7b5214ab66a010b617.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*cdEV6JdQ3TbtFCfCemYtaA.png"/></div></figure><p id="e154" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在一张交易收据中，我们可以看到很多有用的信息！</p><ul class=""><li id="71dd" class="le lf it kk b kl km ko kp kr lg kv lh kz li ld lj lk ll lm bi translated">该事务所属的块号(即包含该事务的块的高度)</li><li id="70c3" class="le lf it kk b kl lo ko lp kr lq kv lr kz ls ld lj lk ll lm bi translated">blockHash是块的哈希(显然！)</li><li id="a640" class="le lf it kk b kl lo ko lp kr lq kv lr kz ls ld lj lk ll lm bi translated">与该事务关联的合同。在这种情况下，它为空，因为交易不涉及合同</li><li id="88c1" class="le lf it kk b kl lo ko lp kr lq kv lr kz ls ld lj lk ll lm bi translated">gasUsed是21000，这是支付给矿工处理交易的费用。使用的气体以Gwei计量，Gwei等于0.000000001乙醚。同样，1个以太等于1 000 000 000 Gwei。</li><li id="e1cb" class="le lf it kk b kl lo ko lp kr lq kv lr kz ls ld lj lk ll lm bi translated">root是事务时根状态的根哈希。这就像是整个区块链直到那一刻的混乱</li><li id="84f3" class="le lf it kk b kl lo ko lp kr lq kv lr kz ls ld lj lk ll lm bi translated">最后，我们还有transactionHash，它显然是这个事务的散列。咄！</li></ul><h1 id="9b99" class="ms ml it bd mt mu mv mw mx my mz na nb jz nc ka nd kc ne kd nf kf ng kg nh ni bi translated">日志和交易详细信息</h1><p id="881c" class="pw-post-body-paragraph ki kj it kk b kl nj ju kn ko nk jx kq kr nl kt ku kv nm kx ky kz nn lb lc ld im bi translated">现在让我们从以太坊交易中检索更多的细节！我们可以查看所有细节，例如块散列、块编号、发送方和接收方(from和to)、gas，以及任何给定事务的更多信息，只需使用事务散列和命令</p><pre class="lu lv lw lx gt mf mg mh mi aw mj bi"><span id="0bb4" class="mk ml it mg b gy mm mn l mo mp">eth.getTransaction()</span></pre><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div class="gh gi mr"><img src="../Images/ca560c00f536aaebcfa5f30d64d4ab05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*nHKgeCvWq4npduAnWVIzqA.png"/></div></figure><p id="3091" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果我们检索同一个事务的transactionReceipt，我们将获得额外的信息:日志和logsBloom。</p><p id="47e6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们使用下面的命令来检查transactionReceipt(再次):</p><pre class="lu lv lw lx gt mf mg mh mi aw mj bi"><span id="291d" class="mk ml it mg b gy mm mn l mo mp">eth.getTransactionReceipt()</span></pre><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi mr"><img src="../Images/699ee3712cf37fecf59256ccb76671a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*5leoPEv3I0Ynm1W8dapW4g.png"/></div></div></figure><p id="06dd" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">好吧，但是…什么是logsBloom？？？</p><p id="fe81" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">logsBloom是一个256字节的字符串，它并不是传统意义上的日志。它是块日志的布隆过滤器，允许过滤块中每个元素的散列。目标是通过存储一些事件(如bloom中的历史事务)来最小化客户端需要进行的查询的数量。当有一个查询“数据<em class="mq"> z </em>在集合中吗？”回答可以是“也许”，也可以是“不”。这是一种概率数据结构。</p><p id="5152" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在我们可以在交易收据中看到，有一个名为logs的字段与logsBloom直接相关。logsBloom就像是日志的搜索字段。</p><p id="116a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">地址是日志中生成事务的地址，它可以是某人的地址，也可以是智能合同。然后我们有blockHash，它只是这个事务所属的块的散列。我们还有blockNumber，也是来自事务所属的块。然后我们有现场数据和主题，可在logsBloom中搜索，并显示一些信息，如这是什么类型的事件，这是ERC20标准的一部分。因此，字段数据是以太坊EIP20引入的以下事件类型之一的规范签名:</p><pre class="lu lv lw lx gt mf mg mh mi aw mj bi"><span id="4492" class="mk ml it mg b gy mm mn l mo mp">function transfer(address _to, uint256 _value) public returns (bool success)</span><span id="318a" class="mk ml it mg b gy no mn l mo mp">function transferFrom(address _from, address _to, uint256 _value) public returns (bool success)</span><span id="d336" class="mk ml it mg b gy no mn l mo mp">function approve(address _spender, uint256 _value) public returns (bool success)</span></pre><p id="8876" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这个256字节是一个布隆过滤器，这意味着它是一个概率数据结构，它告诉你某个集合是否不存在，或者它可能存在。logsBloom允许简化搜索查询，减少执行查询或搜索时节点需要做的工作量。例如，如果我正在搜索该事务是否属于块4344444，logsBloom已经可以告诉我们该事务是否属于该块，或者它是否可能属于该块，然后检查logs字段。这种方法减少了完成搜索所需的计算能力。</p><p id="6d63" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">好吧，好吧，我知道这不是有史以来最有趣的话题，但总得有人写出来！🦄</p><p id="6524" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">🚀请关注我，也请查看我的🧱区块链课程:</strong></p><p id="b2fb" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">🐶</strong> <a class="ae ln" href="https://www.udemy.com/course/-dogecoin-course-the-first-complete-dogecoin-course/?referralCode=9416B1408224CE309DD8" rel="noopener ugc nofollow" target="_blank"> <strong class="kk iu">有史以来第一次Dogecoin课程</strong> </a></p><p id="923a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">👨‍🎓</strong> <a class="ae ln" href="https://www.udemy.com/course/fintech-technologies-cloud-and-cybersecurity/?referralCode=F1D4EA005A2881735A36" rel="noopener ugc nofollow" target="_blank"> <strong class="kk iu">金融科技、云和网络安全课程</strong> </a></p><p id="a7f0" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">📖</strong> <a class="ae ln" href="https://www.amazon.com/dp/B091CYTX37/ref=sr_1_1?dchild=1&amp;keywords=unblockchain&amp;qid=1617186443&amp;s=digital-text&amp;sr=1-1" rel="noopener ugc nofollow" target="_blank"> <strong class="kk iu"> </strong> </a> <a class="ae ln" href="https://www.udemy.com/course/the-complete-nft-course-learn-everything-about-nfts/?referralCode=AAEE908D13D0E2276B19" rel="noopener ugc nofollow" target="_blank"> <strong class="kk iu">完整的NFTs教程</strong> </a></p><p id="f7c6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">👨‍🎓</strong> <a class="ae ln" href="https://www.udemy.com/course/blockchain-deep-dive-from-bitcoin-to-ethereum-to-crypto/?referralCode=B8463EE382E6D313304B" rel="noopener ugc nofollow" target="_blank"> <strong class="kk iu"> Unblockchain课程</strong> </a> <strong class="kk iu"> —脑洞大开的区块链课程</strong></p></div></div>    
</body>
</html>