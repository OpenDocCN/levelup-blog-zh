# 克罗克福德构造函数

> 原文：<https://levelup.gitconnected.com/crockford-constructors-bbfd66d58fbc>

![](img/7c1aed741910834d6123c039f18968b6.png)

照片由伊万·埃纳奥在 Unsplash 提供

> 从我的[博客文章](https://fek.io/blog/crockford-constructors/)和创建 Crockford 风格的构造函数。

在之前的[帖子](/crockford-objects-in-javascript-9947a65fc5e8)中，我讨论了如何使用闭包从函数中创建对象。我的这个例子是基于道格拉斯·克洛克福特在 2018 年 JS Fest 上的一次演讲。

# 构造器

构造函数是一些函数或方法，用于用对象创建时需要封装的值来初始化对象。如果在 JavaScript 中使用`class`语法，实际上有一个名为`constructor`的构造函数内置方法。

Crockford 在这个[演讲](https://www.youtube.com/watch?v=XFTOG895C7c)中讨论的一件事是我们如何为定义函数定义构造函数参数。他建议只传递一个对象到函数中。

JavaScript 允许我们向函数传递任意多的参数。我们遇到的问题是，当你给函数添加一个参数时会发生什么，你必须重构代码中调用那个函数的每一个地方。

让我们以定义 employee 对象的函数为例。对于这个例子，我们将使用一个函数，它为对象中的每个属性都提供了参数；

现在，假设我们需要向该对象添加一个员工编号。我们现在必须将该参数添加到代码中使用该函数的每个地方。

将每个值作为单独的参数传递的一个问题是，可能不需要所有的参数。在很多用例中，我们不需要将所有可能的参数都传递给构造函数。在一些用例中，我们可能希望使用默认值。

更好的方法是将一个参数对象传递给构造函数。

这种方法的好处之一是我们可以使用 JavaScript 析构来从 parameters 对象中获取特定的值。在上面的例子中，我们只是把需要的参数名放在花括号里，如果这个属性存在，我们可以在函数体中使用它。

当您有可能不需要或不可选的参数时，这种技术也非常方便。参数的顺序也无关紧要。在创建参数对象文本时，我们可以按任意顺序放置属性。

# **总结**

通过使用函数对象而不是单独的参数，我们使得构造函数更加灵活。我们还利用新的 JavaScript 特性来可选地检查和析构 parameters 对象，以获得我们需要的值。