<html>
<head>
<title>Dissecting why Pull Request merges get delayed</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">剖析拉请求合并延迟的原因</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/dissecting-why-some-pull-request-merges-get-delayed-739432b7ebba?source=collection_archive---------4-----------------------#2021-03-12">https://levelup.gitconnected.com/dissecting-why-some-pull-request-merges-get-delayed-739432b7ebba?source=collection_archive---------4-----------------------#2021-03-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/0a3e85b8d9f9f3a353bbedd44aba0ac6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*jPteh6suNurcBP14.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">图片提供:Atlassian博客</figcaption></figure><p id="8f20" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">拉请求</strong>创建、审核、评论修改、重新审核和<a class="ae la" href="https://www.urbandictionary.com/define.php?term=LGTM" rel="noopener ugc nofollow" target="_blank"> LGTM </a>流程瓜分了开发者的大量带宽。不可否认这个过程的重要性。然而，这需要时间。<br/>让我们讨论一下如何减少整个流程的周转时间。</p><p id="39cb" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">对于本文，假设<strong class="ke ir"> <em class="lb">开发人员</em> </strong>是请求评审的人，假设<strong class="ke ir"> <em class="lb">同行/评审者</em> </strong>角色对应于评审开发人员拉式请求的同行(尽管他们的角色可能在不同的PR上互换)</p></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h1 id="ec6f" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">拉式请求生命周期</h1><p id="5477" class="pw-post-body-paragraph kc kd iq ke b kf mh kh ki kj mi kl km kn mj kp kq kr mk kt ku kv ml kx ky kz ij bi translated">广义而言，PR批准生命周期可总结如下:</p><figure class="mn mo mp mq gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mm"><img src="../Images/fec826250096a6111de12fdd27eff996.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qfzZONl8oGlYf-DeQ3ZPkQ.png"/></div></div></figure><p id="5828" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">根据经验，我们得出结论，PR获得批准的比率决定步骤是<strong class="ke ir"> <em class="lb">不是由获得审查的时间</em> </strong>决定的，而是由制作PR花费的时间<strong class="ke ir"> <em class="lb">决定的。</em> </strong></p><blockquote class="mr ms mt"><p id="9202" class="kc kd lb ke b kf kg kh ki kj kk kl km mu ko kp kq mv ks kt ku mw kw kx ky kz ij bi translated">加快整个过程的责任在于T21的开发者，而不是评审者。</p></blockquote><p id="8fd2" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">这是TL。文章的DR版本。</p></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h1 id="5b85" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">开发者责任</h1><p id="a135" class="pw-post-body-paragraph kc kd iq ke b kf mh kh ki kj mi kl km kn mj kp kq kr mk kt ku kv ml kx ky kz ij bi translated">以下是开发人员为了加快审批过程可以遵循的指导原则。</p><h2 id="1952" class="mx lk iq bd ll my mz dn lp na nb dp lt kn nc nd lx kr ne nf mb kv ng nh mf ni bi translated">指定ETR:评估时间。</h2><p id="4c58" class="pw-post-body-paragraph kc kd iq ke b kf mh kh ki kj mi kl km kn mj kp kq kr mk kt ku kv ml kx ky kz ij bi translated">当在频道上请求审查时，需要报出ETR或<strong class="ke ir">预计审查时间</strong>(是的，我只是编造了这个缩写)</p><ul class=""><li id="085c" class="nj nk iq ke b kf kg kj kk kn nl kr nm kv nn kz no np nq nr bi translated">这有助于评审者更好地分配时间。如果<em class="lb"> ETR是2.5小时</em>而同行没有带宽，可以调出延时。</li><li id="41ff" class="nj nk iq ke b kf ns kj nt kn nu kr nv kv nw kz no np nq nr bi translated">这显示了对他人的思考和同情，也是尊重他人时间的一步。如果ETR被证明是巨大的，开发人员知道他们必须打破PRs，因为假设无限制的对等带宽是不公平的。</li></ul><p id="2129" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">这里有一个样本模板。</p><blockquote class="mr ms mt"><p id="1e4c" class="kc kd lb ke b kf kg kh ki kj kk kl km mu ko kp kq mv ks kt ku mw kw kx ky kz ij bi translated">嘿，同行P，请求审查PR <link/>(简要描述)。ETR: 40分钟</p></blockquote><p id="335b" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我们在工作中遵循这一点，这有助于评审人员更好地计划。</p></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h2 id="7b9e" class="mx lk iq bd ll my mz dn lp na nb dp lt kn nc nd lx kr ne nf mb kv ng nh mf ni bi translated">尊重代码库。</h2><p id="eeb2" class="pw-post-body-paragraph kc kd iq ke b kf mh kh ki kj mi kl km kn mj kp kq kr mk kt ku kv ml kx ky kz ij bi translated">永远尊重你正在工作的代码库。试着花些时间将你的改变与它真正的哲学结合起来。</p><ul class=""><li id="a3d0" class="nj nk iq ke b kf kg kj kk kn nl kr nm kv nn kz no np nq nr bi translated">它应该看起来像一个单一的连贯的代码库。模型类和接口遵循现有的约定。</li><li id="3be9" class="nj nk iq ke b kf ns kj nt kn nu kr nv kv nw kz no np nq nr bi translated">特别注意<a class="ae la" href="https://www.smashingmagazine.com/2012/10/why-coding-style-matters/" rel="noopener ugc nofollow" target="_blank">格式</a>。这应该在整个代码库中保持一致。小的吹毛求疵突然变成难以管理的、不一致的基础。</li><li id="33cc" class="nj nk iq ke b kf ns kj nt kn nu kr nv kv nw kz no np nq nr bi translated">请考虑在ide中导入一个团队范围的格式化程序，或者查看代码清单。如果你正在使用IntelliJ，<a class="ae la" href="https://plugins.jetbrains.com/plugin/7642-save-actions" rel="noopener ugc nofollow" target="_blank">保存动作</a>插件是你的朋友。</li></ul><figure class="mn mo mp mq gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nx"><img src="../Images/c287963d756ba5c8b3ab0b19b6043b4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FhxVgwN5HlQ9AGHAhXf1fw.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">当你保存时，这个插件自动格式化当前的工作文件</figcaption></figure><blockquote class="mr ms mt"><p id="10ae" class="kc kd lb ke b kf kg kh ki kj kk kl km mu ko kp kq mv ks kt ku mw kw kx ky kz ij bi translated">如果你尊重所有形式的代码库，它会让你觉得好像是一个人写了所有的东西。这样的代码库将易于审查。</p></blockquote></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h2 id="ca2a" class="mx lk iq bd ll my mz dn lp na nb dp lt kn nc nd lx kr ne nf mb kv ng nh mf ni bi translated">保持小规模。</h2><p id="8a02" class="pw-post-body-paragraph kc kd iq ke b kf mh kh ki kj mi kl km kn mj kp kq kr mk kt ku kv ml kx ky kz ij bi translated">俗话说，</p><blockquote class="mr ms mt"><p id="3a19" class="kc kd lb ke b kf kg kh ki kj kk kl km mu ko kp kq mv ks kt ku mw kw kx ky kz ij bi translated">100 <strong class="ke ir">行</strong>改了= <strong class="ke ir"> 2 </strong>个问题，<strong class="ke ir"> 5 </strong>个审核意见和公开讨论<br/> 100 <strong class="ke ir">个文件</strong>改了= LGTM</p></blockquote><p id="33ff" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">庞大的公关是一个痛苦的审查和管理。他们从不帮助任何人。如果你觉得一份公关变得越来越长，一定要把它分成更小的几份。我们如何定义一个巨大的公关？</p><ul class=""><li id="044a" class="nj nk iq ke b kf kg kj kk kn nl kr nm kv nn kz no np nq nr bi translated"><strong class="ke ir">更改的文件数量</strong> <br/>通常，这是衡量PR有多大的一个好指标，但是它不适用于重构PR。在最坏的情况下，将更改的文件数量保持在<strong class="ke ir"> 50 </strong>以下(硬限制)。超过这个数就准备离开。</li></ul><figure class="mn mo mp mq gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ny"><img src="../Images/5344a4e9194fb318301073011da985b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uyFubOZIkhg36swy8TD78A.png"/></div></div></figure><ul class=""><li id="8861" class="nj nk iq ke b kf kg kj kk kn nl kr nm kv nn kz no np nq nr bi translated"><strong class="ke ir">增加/删除的数量<br/> </strong>这是衡量PR的一个更好的指标。通常这是审查者在审查过程中眼睛所能看到的行数。<br/>它兼顾了<em class="lb">重构</em>(通常情况下，相等的删除和添加)<em class="lb">特性</em>(更多的添加)<em class="lb">清理</em>(更多的删除)。</li></ul><blockquote class="mr ms mt"><p id="636d" class="kc kd lb ke b kf kg kh ki kj kk kl km mu ko kp kq mv ks kt ku mw kw kx ky kz ij bi translated">最不济，把增删数量控制在1500以内。任何以上，你需要分裂。或者你的评论者会要求你去做。</p></blockquote><figure class="mn mo mp mq gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nz"><img src="../Images/7a655bd49c1c0e36450b367a82f1ee1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-Q4bdDMwk4byxqVQXKka5w.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">最后一个是大<a class="ae la" href="https://www.youtube.com/watch?v=31g0YE61PLQ" rel="noopener ugc nofollow" target="_blank">号</a></figcaption></figure></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h2 id="48b1" class="mx lk iq bd ll my mz dn lp na nb dp lt kn nc nd lx kr ne nf mb kv ng nh mf ni bi translated">尽职调查——自我审查。</h2><p id="9674" class="pw-post-body-paragraph kc kd iq ke b kf mh kh ki kj mi kl km kn mj kp kq kr mk kt ku kv ml kx ky kz ij bi translated">对你的公关进行自我检讨是非常重要的。求求你，<strong class="ke ir">蛮求你</strong>，先过一遍自己的PR再养。我怎么强调都不为过。这里可以减少很多周转时间。如果你以一个评论者的眼光来看待自己的PR，你会看得更清楚。</p><ul class=""><li id="966a" class="nj nk iq ke b kf kg kj kk kn nl kr nm kv nn kz no np nq nr bi translated">你会看到<strong class="ke ir">不需要检入的注释块</strong></li><li id="e71e" class="nj nk iq ke b kf ns kj nt kn nu kr nv kv nw kz no np nq nr bi translated">您将看到由于复制粘贴之类的错误命名方法而导致的<strong class="ke ir">错误</strong></li><li id="9fe4" class="nj nk iq ke b kf ns kj nt kn nu kr nv kv nw kz no np nq nr bi translated">你会看到那些早就做好的事情，现在已经无关紧要了。</li><li id="ed93" class="nj nk iq ke b kf ns kj nt kn nu kr nv kv nw kz no np nq nr bi translated">您将看到您最终添加了<strong class="ke ir">冗余信息/测试。</strong></li><li id="2785" class="nj nk iq ke b kf ns kj nt kn nu kr nv kv nw kz no np nq nr bi translated">您将看到<strong class="ke ir">本地开发配置</strong>被错误地检入到生产中。</li><li id="2610" class="nj nk iq ke b kf ns kj nt kn nu kr nv kv nw kz no np nq nr bi translated">您会看到明显的<strong class="ke ir">格式不一致。</strong></li><li id="3a28" class="nj nk iq ke b kf ns kj nt kn nu kr nv kv nw kz no np nq nr bi translated">您将看到<strong class="ke ir">冗余日志、系统输出、调试信息</strong>被检入。</li></ul><p id="881d" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">作为一名开发人员，在适当的地方添加自我检查注释并为不太明显的变化提供理由也很重要。这些包括(但不限于)</p><ul class=""><li id="f1e0" class="nj nk iq ke b kf kg kj kk kn nl kr nm kv nn kz no np nq nr bi translated">更改配置/幻数/文字的值。</li><li id="a9aa" class="nj nk iq ke b kf ns kj nt kn nu kr nv kv nw kz no np nq nr bi translated">改变应用程序结构块或新的依赖关系。</li><li id="021a" class="nj nk iq ke b kf ns kj nt kn nu kr nv kv nw kz no np nq nr bi translated">更改不相关类的方法签名。</li><li id="3de0" class="nj nk iq ke b kf ns kj nt kn nu kr nv kv nw kz no np nq nr bi translated">在同一公关范围内对公关范围之外的事情进行微调。</li><li id="ba13" class="nj nk iq ke b kf ns kj nt kn nu kr nv kv nw kz no np nq nr bi translated">那些肯定会让你的评论者感到困惑的东西。</li></ul><blockquote class="mr ms mt"><p id="07be" class="kc kd lb ke b kf kg kh ki kj kk kl km mu ko kp kq mv ks kt ku mw kw kx ky kz ij bi translated">一旦你得到一份公关评估，你可以在自我评估中将其与你自己的评估进行比较。通过多次迭代，您将接近预期的评审意见，并提出最佳的PRs，这将导致更快的合并。</p></blockquote></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h2 id="66ab" class="mx lk iq bd ll my mz dn lp na nb dp lt kn nc nd lx kr ne nf mb kv ng nh mf ni bi translated">提高质量而不是覆盖率的测试用例。</h2><p id="0f35" class="pw-post-body-paragraph kc kd iq ke b kf mh kh ki kj mi kl km kn mj kp kq kr mk kt ku kv ml kx ky kz ij bi translated">测试案例有助于获得信心。当您编写处理以下内容的单元测试时，请密切关注它们的内部结构。</p><ul class=""><li id="31ba" class="nj nk iq ke b kf kg kj kk kn nl kr nm kv nn kz no np nq nr bi translated">显式并发功能(使用<em class="lb">闩锁、屏障、单元相位器</em></li><li id="2c3f" class="nj nk iq ke b kf ns kj nt kn nu kr nv kv nw kz no np nq nr bi translated">处理非线程安全类(如<em class="lb">日历，简单日期格式，日期</em>)</li><li id="4411" class="nj nk iq ke b kf ns kj nt kn nu kr nv kv nw kz no np nq nr bi translated">处理使对象变异的代码。</li><li id="9ac1" class="nj nk iq ke b kf ns kj nt kn nu kr nv kv nw kz no np nq nr bi translated">处理静态资源(如嵌入式数据库、容器)</li><li id="8c6f" class="nj nk iq ke b kf ns kj nt kn nu kr nv kv nw kz no np nq nr bi translated">处理依赖于隐式顺序的单元测试(<em class="lb">不幸的</em>)</li></ul><p id="d625" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">对你的单元测试进行压力测试直到失败是最重要的。否则会出现测试输出不确定的情况。您的测试可能在本地运行，但在CI管道上失败，反之亦然。许多人没有意识到我们可以运行单元测试直到失败。</p><figure class="mn mo mp mq gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oa"><img src="../Images/83a449ae73d34ee70c540840c981059f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Wm1vplWMj4WE0-jQcsLUdQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">运行测试，直到发现难以检查的错误。</figcaption></figure><p id="fd70" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">根据经验，对于您编写的每个重要的测试用例，确保输出在多次调用中是一致的。</p><blockquote class="mr ms mt"><p id="fb76" class="kc kd lb ke b kf kg kh ki kj kk kl km mu ko kp kq mv ks kt ku mw kw kx ky kz ij bi translated">因为这些在代码审查中很难发现，所以我们的想法是采取一种主动的方法并预先修复它们。<strong class="ke ir">不要等待审核者</strong>指出这一点，这将最终延迟PR合并。</p></blockquote></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h2 id="975a" class="mx lk iq bd ll my mz dn lp na nb dp lt kn nc nd lx kr ne nf mb kv ng nh mf ni bi translated">在团队频道上请求评论。</h2><p id="b6f7" class="pw-post-body-paragraph kc kd iq ke b kf mh kh ki kj mi kl km kn mj kp kq kr mk kt ku kv ml kx ky kz ij bi translated">所有公关审查都应通过公共团队渠道(slack/teams what you)请求，而不是通过DMs。你会问为什么？</p><ul class=""><li id="7f11" class="nj nk iq ke b kf kg kj kk kn nl kr nm kv nn kz no np nq nr bi translated">团队领导随时了解要求评审的变更。</li><li id="8df7" class="nj nk iq ke b kf ns kj nt kn nu kr nv kv nw kz no np nq nr bi translated">当其他同事看到除了最初请求的同事之外，他们也可以对评审做出贡献时，他们也可以参与进来。</li><li id="85fc" class="nj nk iq ke b kf ns kj nt kn nu kr nv kv nw kz no np nq nr bi translated">在渠道上撞和在DM上撞是不一样的。如果开发人员在评审中受阻，他们可以大声疾呼。</li><li id="84f1" class="nj nk iq ke b kf ns kj nt kn nu kr nv kv nw kz no np nq nr bi translated">如果某个特定的同事被多个要审查的PRs堵塞，主管可以记下并将其分配给其他人(包括自己)。</li></ul></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h2 id="44ff" class="mx lk iq bd ll my mz dn lp na nb dp lt kn nc nd lx kr ne nf mb kv ng nh mf ni bi translated">给公关贴上标签。</h2><p id="73ed" class="pw-post-body-paragraph kc kd iq ke b kf mh kh ki kj mi kl km kn mj kp kq kr mk kt ku kv ml kx ky kz ij bi translated">标签有助于对相关的pr进行分组和标记。我们可以创建大量合适的标签来更好地传达公关的范围。</p><figure class="mn mo mp mq gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ob"><img src="../Images/369abd391c0ff8bbcbb2d892e518df30.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LOgBnESjQVLUiAjLuivNTw.png"/></div></div></figure><p id="351b" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">标签有什么帮助？</strong></p><ul class=""><li id="4cd7" class="nj nk iq ke b kf kg kj kk kn nl kr nm kv nn kz no np nq nr bi translated">像<code class="fe oc od oe of b"> “dont merge”</code> <em class="lb"> </em>这样的标签传达意图。这意味着审查不那么严格。</li><li id="a65a" class="nj nk iq ke b kf ns kj nt kn nu kr nv kv nw kz no np nq nr bi translated">像<em class="lb"> </em> <code class="fe oc od oe of b"><em class="lb">“bug fix”</em></code>这样的标签优先于<code class="fe oc od oe of b">“tooling”.</code></li><li id="1fdc" class="nj nk iq ke b kf ns kj nt kn nu kr nv kv nw kz no np nq nr bi translated">它们是多种颜色的，很酷。</li><li id="b8f6" class="nj nk iq ke b kf ns kj nt kn nu kr nv kv nw kz no np nq nr bi translated">标签可以用来分组相关的变更和跟踪沿袭。</li></ul></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h2 id="56d2" class="mx lk iq bd ll my mz dn lp na nb dp lt kn nc nd lx kr ne nf mb kv ng nh mf ni bi translated">写公关描述。</h2><p id="278e" class="pw-post-body-paragraph kc kd iq ke b kf mh kh ki kj mi kl km kn mj kp kq kr mk kt ku kv ml kx ky kz ij bi translated">这是一个可以在很大程度上优化的地方。</p><ul class=""><li id="f2d5" class="nj nk iq ke b kf kg kj kk kn nl kr nm kv nn kz no np nq nr bi translated">这是开发者向评审者传达他们的意图、设计和决策的地方。参考<a class="ae la" href="https://github.com/flipkart-incubator/zjsonpatch/pull/120" rel="noopener ugc nofollow" target="_blank">样品</a>。</li><li id="c5ea" class="nj nk iq ke b kf ns kj nt kn nu kr nv kv nw kz no np nq nr bi translated">这是审阅者在开始审阅之前首先查看的地方。描述越吸引人，越清晰，越简洁，越好。</li></ul><figure class="mn mo mp mq gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi og"><img src="../Images/c5761d15a5cdf165579c9eb9e75a965e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cFU0cJN5p1DJM0kluucBeA.png"/></div></div></figure><p id="efac" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">获取<strong class="ke ir">概要</strong>可使评审者做好相应准备。</p><ul class=""><li id="e165" class="nj nk iq ke b kf kg kj kk kn nl kr nm kv nn kz no np nq nr bi translated">如果是一个<code class="fe oc od oe of b">work in progress</code> PR，评审者可以回到她的任务，直到PR回到<code class="fe oc od oe of b">Ready</code>状态。</li><li id="1a0b" class="nj nk iq ke b kf ns kj nt kn nu kr nv kv nw kz no np nq nr bi translated">如果是一个<code class="fe oc od oe of b">feature</code>公关，需要进行广泛的审查。</li><li id="5ee1" class="nj nk iq ke b kf ns kj nt kn nu kr nv kv nw kz no np nq nr bi translated">如果是一个<code class="fe oc od oe of b">bug fix</code> PR，新的测试用例需要在评审者的机器上再次运行</li><li id="2769" class="nj nk iq ke b kf ns kj nt kn nu kr nv kv nw kz no np nq nr bi translated">如果<code class="fe oc od oe of b">impact</code>为高，则审查优先级变为<strong class="ke ir">高</strong>。</li></ul><p id="e736" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi oh translated"><span class="l oi oj ok bm ol om on oo op di"> D </span> <strong class="ke ir">描述<br/> </strong>描述PR中出现的变更。就这个<code class="fe oc od oe of b">what’s</code>。不是那个<code class="fe oc od oe of b">why’s</code>。保持简短和甜蜜。</p><blockquote class="mr ms mt"><p id="66cb" class="kc kd lb ke b kf kg kh ki kj kk kl km mu ko kp kq mv ks kt ku mw kw kx ky kz ij bi translated">例如这个PR在类<class>中为<reason> <br/>引入了新的方法例如这个PR修复了类&lt;类&gt;中的bug其中&lt;原因&gt;</reason></class></p></blockquote><p id="ba93" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi oh translated"><span class="l oi oj ok bm ol om on oo op di"> R </span>这有助于在评审流程开始之前建立<strong class="ke ir">上下文</strong>。</p><ul class=""><li id="cd03" class="nj nk iq ke b kf kg kj kk kn nl kr nm kv nn kz no np nq nr bi translated">构建会因为PR被分成小的PR而中断，但是整个构建成功了吗？</li><li id="6226" class="nj nk iq ke b kf ns kj nt kn nu kr nv kv nw kz no np nq nr bi translated">设计文档不需要是因为它是一个微不足道的改变吗？</li></ul><blockquote class="mr ms mt"><p id="5c2a" class="kc kd lb ke b kf kg kh ki kj kk kl km mu ko kp kq mv ks kt ku mw kw kx ky kz ij bi translated">例如覆盖范围因<reason> <br/>而下降，例如超过60个文件因&lt;原因&gt;而改变</reason></p></blockquote><p id="a6cf" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi oh translated">M  <strong class="ke ir">动机和背景<br/> </strong>这是我们要说出为什么的地方。公关解决特定的问题。在花精力做公关之前，我们应该清楚我们为什么要做这件事。很多时候，在编写这个块的时候，开发人员会意识到变更的子集实际上是不需要的，是多余的，或者它们属于一个单独的PR。</p><ul class=""><li id="12c1" class="nj nk iq ke b kf kg kj kk kn nl kr nm kv nn kz no np nq nr bi translated">为什么需要这种改变？旧的有什么问题？</li><li id="1228" class="nj nk iq ke b kf ns kj nt kn nu kr nv kv nw kz no np nq nr bi translated">这种改变如何解决问题？</li><li id="12bc" class="nj nk iq ke b kf ns kj nt kn nu kr nv kv nw kz no np nq nr bi translated">设计变更(如果有)是内部审核还是外部审核？</li></ul><blockquote class="mr ms mt"><p id="37c6" class="kc kd lb ke b kf kg kh ki kj kk kl km mu ko kp kq mv ks kt ku mw kw kx ky kz ij bi translated">用这些来帮助你的评论者，你就可以更快的评论了</p></blockquote><p id="18e9" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi oh translated"><span class="l oi oj ok bm ol om on oo op di">H</span>T5】ow可以说是这次测试中T7，最重要的一节。这有助于评审者获得开发人员已经完成尽职调查的信心。并且代码仍然可以编译。</p><ul class=""><li id="2004" class="nj nk iq ke b kf kg kj kk kn nl kr nm kv nn kz no np nq nr bi translated">指定是否添加了<strong class="ke ir">单元测试</strong>。<br/>如果不是，同样应该有非常充分的理由。</li><li id="0be6" class="nj nk iq ke b kf ns kj nt kn nu kr nv kv nw kz no np nq nr bi translated">指定新代码<br/>是否达到了<strong class="ke ir"> &gt; 90%的覆盖率</strong>无论如何这都应该是预期。如果不是，请具体说明原因。</li><li id="fabf" class="nj nk iq ke b kf ns kj nt kn nu kr nv kv nw kz no np nq nr bi translated">代码<strong class="ke ir">已经在集成环境</strong>中运行了吗？<br/>如果是，请分享堆栈详细信息。如果不是，请具体说明整合是如何进行的。</li><li id="22d4" class="nj nk iq ke b kf ns kj nt kn nu kr nv kv nw kz no np nq nr bi translated">是否已经编写了<strong class="ke ir">集成测试并针对现有套件运行了</strong>？<br/>如果是，分享成功截图/建立链接以消除倒退。</li></ul><p id="5e83" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi oh translated"><span class="l oi oj ok bm ol om on oo op di"> R </span> <strong class="ke ir">相关链接/注释<br/> </strong>添加评审者可以用来获得关于PR的额外上下文的任何内容</p><ul class=""><li id="6ca6" class="nj nk iq ke b kf kg kj kk kn nl kr nm kv nn kz no np nq nr bi translated">在此添加设计文档、合同、解决方案文档、会议记录等。</li><li id="41ac" class="nj nk iq ke b kf ns kj nt kn nu kr nv kv nw kz no np nq nr bi translated">此PR上是否执行过任何NFR运行？添加它们。</li><li id="0eca" class="nj nk iq ke b kf ns kj nt kn nu kr nv kv nw kz no np nq nr bi translated">您是否添加了任何新的API？分享卷发/招摇的规格。</li></ul></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h1 id="2f6c" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">第一轮评审后会发生什么？</h1><p id="d6e6" class="pw-post-body-paragraph kc kd iq ke b kf mh kh ki kj mi kl km kn mj kp kq kr mk kt ku kv ml kx ky kz ij bi translated">审查者提供了反馈。你现在做什么？</p><h2 id="a459" class="mx lk iq bd ll my mz dn lp na nb dp lt kn nc nd lx kr ne nf mb kv ng nh mf ni bi translated">Ack，ack，ack。</h2><ul class=""><li id="ca72" class="nj nk iq ke b kf mh kj mi kn oq kr or kv os kz no np nq nr bi translated">你收到的每一个反馈都是评审人员为了更好地理解你的代码而付出的努力的结果。因此，让<code class="fe oc od oe of b">acknowledge</code>知道他们的意见已被收到以及在哪里会/不会得到处理变得非常重要。</li><li id="e056" class="nj nk iq ke b kf ns kj nt kn nu kr nv kv nw kz no np nq nr bi translated">这让评审者认为反馈已经被采纳<code class="fe oc od oe of b">positively</code>。否则，它会给人一种被审阅者分配了任务的感觉。此外，这对于nit注释不是必需的。</li><li id="a049" class="nj nk iq ke b kf ns kj nt kn nu kr nv kv nw kz no np nq nr bi translated">很多时候，开发人员的观点可能与评审人员不一致。最好是<code class="fe oc od oe of b">courteous</code>，用事实来支持你的观点，而不是憋在心里或完全否定评论。展开健康的讨论。</li></ul><p id="258c" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">不这样做还会增加merge TAT(房间里的大象)。怎么会？</p><blockquote class="mr ms mt"><p id="469f" class="kc kd lb ke b kf kg kh ki kj kk kl km mu ko kp kq mv ks kt ku mw kw kx ky kz ij bi translated">假设一个评论者添加了很少的评论，比如10条。开发人员已经完成了6项工作，并要求重新审核。其余的点要么在开发人员看来不值得修复，要么超出了范围。但是同样的需要叫出来。</p><p id="5622" class="kc kd lb ke b kf kg kh ki kj kk kl km mu ko kp kq mv ks kt ku mw kw kx ky kz ij bi translated">我们不能因为已经是第二轮评审，就期望评审者忽略剩下的4条评论。它们在评论者的眼中仍然是重要的。如果开发人员不同意，开始讨论。但总是ack。<br/>亦作注释📝比温和的竖起大拇指更有思想👍</p></blockquote><p id="8029" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">这就是开发者的责任。我们讨论了很多问题。总结一下</p><pre class="mn mo mp mq gt ot of ou ov aw ow bi"><span id="b7ea" class="mx lk iq of b gy ox oy l oz pa">::: Specify ETR<br/>::: Respect the codebase<br/>::: Keep it small<br/>::: Due Diligence: Self Review<br/>::: Test Cases that improve quality and not coverage<br/>::: Requesting Reviews on the channel<br/>::: Labelling PRs<br/>::: Writing a good PR Description<br/>::: Ack after review on the comments.</span></pre></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><p id="add1" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">但是，等等，我们不能在没有谈到审查者责任的情况下离开。他们肯定会有一些责任，对吗？</p><h1 id="19fc" class="lj lk iq bd ll lm pb lo lp lq pc ls lt lu pd lw lx ly pe ma mb mc pf me mf mg bi translated">审查者责任</h1><p id="62a8" class="pw-post-body-paragraph kc kd iq ke b kf mh kh ki kj mi kl km kn mj kp kq kr mk kt ku kv ml kx ky kz ij bi translated">评论者也扮演着重要的角色。特别是因为同行同时是评审者和开发者。</p><h2 id="afe1" class="mx lk iq bd ll my mz dn lp na nb dp lt kn nc nd lx kr ne nf mb kv ng nh mf ni bi translated">预审查指南</h2><ul class=""><li id="974d" class="nj nk iq ke b kf mh kj mi kn oq kr or kv os kz no np nq nr bi translated">看完ETR没<code class="fe oc od oe of b">sufficient bandwidth</code>复习就大声喊出来。Dev可以选择等待或寻找另一个同伴。</li><li id="09ab" class="nj nk iq ke b kf ns kj nt kn nu kr nv kv nw kz no np nq nr bi translated">与开发人员分享评审完成的粗略估计。这应该是在频道上，再次。这有助于开发人员更好地计划。</li><li id="9f72" class="nj nk iq ke b kf ns kj nt kn nu kr nv kv nw kz no np nq nr bi translated">如果PR超过以上指定的阈值，<code class="fe oc od oe of b">feel free to reject the PR</code>或请求dev分割成多个PR</li><li id="71d4" class="nj nk iq ke b kf ns kj nt kn nu kr nv kv nw kz no np nq nr bi translated">如果PR代码覆盖率下降到阈值以下，理想情况下应该是<code class="fe oc od oe of b"> be rejected</code>，除非开发人员提供了有效的推理</li></ul><h2 id="f557" class="mx lk iq bd ll my mz dn lp na nb dp lt kn nc nd lx kr ne nf mb kv ng nh mf ni bi translated">审查指南</h2><ul class=""><li id="bf0c" class="nj nk iq ke b kf mh kj mi kn oq kr or kv os kz no np nq nr bi translated">花些时间浏览一下PR描述和开发者已经建立的上下文。<code class="fe oc od oe of b">Value the effort.</code></li><li id="cf12" class="nj nk iq ke b kf ns kj nt kn nu kr nv kv nw kz no np nq nr bi translated">对于特性、设计或增强PR，最好在本地IDE中检查分支，并从那里开始审查。</li><li id="22bc" class="nj nk iq ke b kf ns kj nt kn nu kr nv kv nw kz no np nq nr bi translated">提供建设性的反馈和你同事的<code class="fe oc od oe of b">avoid critical assessment</code>。总是用事实来补充你的论点。</li><li id="da22" class="nj nk iq ke b kf ns kj nt kn nu kr nv kv nw kz no np nq nr bi translated">试着插话并<code class="fe oc od oe of b">share your own wisdom</code>说明你本可以用一种不同的、看起来更好的方式来解决这个问题。</li><li id="4c1b" class="nj nk iq ke b kf ns kj nt kn nu kr nv kv nw kz no np nq nr bi translated"><code class="fe oc od oe of b">Appreciate</code>只要适用。如果你看到整洁的公关或公关解决了一个难题，一定要记下来。</li></ul></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><p id="41c4" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">今天到此为止。我不打算如此深入地讨论这些问题，尤其是当这篇文章的重点是减少时间的时候。</p><p id="d512" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">但我很高兴我能触及这些细微差别。<em class="lb">希望这一块增值。</em></p></div></div>    
</body>
</html>