<html>
<head>
<title>Chaos Engineering &amp; GraphQL: Purposefully Injecting Failure Into the Popular Query Language</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">混沌工程&amp; GraphQL:有目的地将失败注入流行的查询语言</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/chaosengineering-chaosqoala-fa11c4c4fae?source=collection_archive---------3-----------------------#2019-09-18">https://levelup.gitconnected.com/chaosengineering-chaosqoala-fa11c4c4fae?source=collection_archive---------3-----------------------#2019-09-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/0ff7e84b3fe399e6bb8c45b22971ba9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AehlIaLUCDuEal_tBXGydA.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">照片由来自<a class="ae kc" href="https://www.pexels.com/photo/person-holding-a-burning-news-paper-close-up-photography-2538122/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">佩克斯</a>的<a class="ae kc" href="https://www.pexels.com/@connor-danylenko-534256?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">康纳·丹尼连科</a>拍摄</figcaption></figure><p id="2385" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">什么是混沌工程？</strong></p><p id="6abb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">亚马逊和网飞的出现和成长导致了微服务的发展。虽然这种新的工作方式有很多优点，但是微服务架构也有自己的困境:<em class="lb">当</em>出现故障时，服务的其余部分如何响应？</p><p id="463a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在21世纪初，亚马逊开始了GameDay计划，通过有目的地将关键故障注入他们的系统来测试亚马逊系统。虽然这些实验揭示了系统中意想不到的缺陷，但由于担心失败会对他们的客户产生不利影响，该计划被停止了。</p><p id="35a3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后网飞出现了。2008年8月，网飞开始从他们自己的数据中心迁移到AWS云，此前一次灾难性的数据库损坏导致DVD发货中断了几天。这一转变伴随着向微服务架构的过渡，这为网飞系统中的故障留出了更多空间。基于亚马逊游戏日计划的想法，网飞开始在他们的系统中部署混沌猴子。混沌猴有目的地将功能终止到实际生产代码中，并自动替换损坏的功能，以限制对客户的影响。网飞州立大学的混沌工程先驱在他们的著作《混沌原理》中写道:“混沌工程是一门对系统进行实验的学科，目的是建立对系统承受生产中动荡条件的能力的信心。”这种混沌工程使得网飞能够在大规模故障发生之前测试他们系统的冗余度。</p><p id="8797" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">应使用混沌工程和混沌工具来确保<em class="lb">当</em>系统发生故障时，尽可能减轻故障的影响。虽然网飞和其他公司已经建立了混沌工具来测试各种微服务和数据库，但混沌工程尚未涉足的一个领域是GraphQL。</p><p id="b4e1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">为什么混沌工程对GraphQL有帮助？</strong></p><p id="d795" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">本文不打算介绍GraphQL的许多优点；只需在谷歌上快速搜索一下，就能找到大量文章。虽然GraphQL提供了许多优势，但如果不先发制人地找出这些弱点并加以补救，它的问题可能会悄悄地对代码库造成严重破坏。</p><p id="5ced" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">无论如何，GraphQL都会向用户返回一个状态码200，即使查询没有成功。如果查询中有延迟会发生什么？或者如果数据丢失了呢？该响应不必容易地指出这些错误。如果代码库的其余部分依赖于一个成功的GraphQL查询，并且尽管有错误但还是收到了200代码，那么，如果有延迟或丢失数据，系统的其余部分将如何补偿呢？</p><p id="5e2f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这就是混沌工程工具有效的地方。有目的地在随机查询中注入延迟或返回丢失的数据，可以向开发人员展示当GraphQL出现这些问题时，他们的系统将如何反应。</p><p id="2af5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">输入chaosquala</strong></p><p id="7c99" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们的团队开发了一个开源的混沌工程工具ChaosQoala，用于在GraphQL查询上发布混沌实验。使用我们的CLI工具，您可以在查询中包含延迟，并返回丢失数据的查询，以了解它如何影响您提供的稳定状态。一旦你运行了ChaosQoala，我们的工具会返回一个结果文件，你可以上传到我们的<a class="ae kc" href="http://chaosqoala.io/" rel="noopener ugc nofollow" target="_blank">站点</a>，并接收一个数据可视化，看看ChaosQoala如何影响你的代码库。这有助于预先解决代码库中的任何主要问题，并最大限度地提高用户体验。</p><p id="ab0d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">关于如何使用ChaosQoala的更多信息，请查看<a class="ae kc" href="https://github.com/oslabs-beta/ChaosQoaLa" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上的项目。</p></div></div>    
</body>
</html>