<html>
<head>
<title>Time to Leave Heroku Behind</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">是时候离开Heroku了</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/time-to-leave-heroku-behind-5092e69a9353?source=collection_archive---------1-----------------------#2022-04-28">https://levelup.gitconnected.com/time-to-leave-heroku-behind-5092e69a9353?source=collection_archive---------1-----------------------#2022-04-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/2fb90c26c9e35ea36470a78b358e27db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kg8aAUNxI055OhNhT04srQ.png"/></div></div></figure><p id="81f5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">对于任何不熟悉Heroku的人来说，这是一个最初产生于部署应用程序而无需担心任何基础设施的平台。不要担心负载平衡器，不要担心虚拟机停机，不要担心将您的应用程序安全地连接到数据库… Heroku会为您完成所有这些工作，但需要付费，而您部署应用程序所需的只是<em class="kw"> git push </em>。</p><p id="e6ad" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">即使在今天，许多人仍然喜欢Heroku提供的简单性，尤其是当涉及到用较小的或经验较少的团队加速应用程序开发时。但是当你看到Heroku的服务条款时，你会发现其中隐藏着某种东西。更确切地说，它缺少了一些东西。</p><h1 id="69d7" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">天数的SLA</h1><p id="70b0" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">当人们提供服务以换取金钱时，通常有一个人们非常关心的关键指标:SLA。它代表“服务水平协议”,定义了什么构成了将要提供的最低服务水平，在不可接受的服务损失的情况下将执行什么样的追索权，以及协议可能存在什么豁免。</p><p id="f5e9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">一个很大的例子是跨公共云提供商的计算实例。例如，谷歌为他们的计算引擎服务制定了<a class="ae ma" href="https://cloud.google.com/compute/sla" rel="noopener ugc nofollow" target="_blank">SLA。在该协议中，谷歌定义了各种计算引擎服务的最小正常运行时间，超出定义范围的服务损失将获得财务积分，积分水平基于超额损失，以及获得财务积分的豁免(例如，如果飓风摧毁了整个数据中心，则不会获得积分)。</a></p><p id="78f5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在考虑服务的价值主张时，这些SLA是至关重要的指标。例如，您是想为99%的正常运行时间每月支付100美元，还是为99.9%的正常运行时间每月支付250美元，这完全是主观的。99%的正常运行时间意味着您每年可以获得13.5天的无薪停机时间。99.9%的正常运行时间意味着您每年的停机时间只有9小时。每月额外的150美元是否值得让您的服务增加近2周的正常运行时间？看情况。</p><h1 id="89f0" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">Heroku没有SLA</h1><p id="b83f" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">正如本节标题所述，Heroku没有SLA。他们的服务条款里没有。这意味着Heroku没有财务义务来确保他们的服务正常运行或满足任何类型的最低正常运行时间要求。</p><p id="7dc2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">最近一次导致应用程序长时间出现生产问题的事件是<a class="ae ma" href="https://status.heroku.com/incidents/2423" rel="noopener ugc nofollow" target="_blank"> <em class="kw">使用数据产品</em> </a>的问题，唯一的解决方法是手动解决，Heroku甚至不愿代表客户去做。</p><p id="cfa1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">太平洋时间早上5点左右，我的公司遭遇了停电。令人欣慰的是，我们在那段时间有人醒着工作(我们的大多数工程师都是EST)，但可笑的是，我们不得不手动调试和修复由我们非常昂贵的服务提供商造成的中断，因为他们决定禁用我们数据库的安全插件，然后阻止我们的任何应用程序与之通信。</p><p id="3549" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我可以详细介绍Heroku的理论SLA，以最大限度地减少他们对客户的财务义务，但我不会，因为他们目前没有SLA这一事实是我们唯一需要关心的事情。当你是付费客户时，我看到的几乎所有类似的服务都有SLA。我再怎么强调这一点也不为过。</p><p id="f6c1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们需要记住Heroku并不便宜。Heroku对其基本计算单元“dyno”的定价为50美元/月/标准层dyno。标准层dynos没有CPU保证，只有1 GB内存。你可以通过谷歌计算引擎部署一个N2通用虚拟机，费用大约为。56美元/月，这就为您提供了2个专用虚拟CPU和整整8 GB的ram。基本上，Heroku在他们的资源上有一个巨大的标记。成本差异的典型范围是Heroku将比云提供商贵4到10倍。</p><p id="e199" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">因此，Heroku不仅不便宜，而且29小时的停机时间很容易超过谷歌计算引擎SLA的99.5%，该引擎每月只允许大约3.5小时的停机时间。如果你经历了谷歌的这种宕机，你肯定会得到一些钱，因为谷歌放弃了这个球，他们对你这个付费用户负有责任。另一方面，Heroku告诉我基本上关闭，因为他们没有任何义务保持这些服务的运行。</p><p id="b727" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">公平地说，dynos不是这里受影响的服务，所以将Heroku的中断与Compute Engine进行比较不是苹果与苹果的比较。我只是用它来说明一般的SLA。在这种情况下，这是非常公平的，因为0%的保证正常运行时间比任何其他类似服务提供的都要少。</p><h1 id="0ec6" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">可供选择的事物</h1><p id="2abd" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">我们不是没有赫罗库的替代者。Heroku当然是这里的OG，但这并不总是更好。有PaaS的竞争对手，如Render、Netlify、Firebase、Engine Yard、Gigalixir，所有主要的公共云提供商也有自己的“即推即部署”产品，如Google App Engine和AWS Elastic Beanstalk。</p><p id="02db" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">并非所有Heroku的竞争对手都有正常运行时间保证，但这是您需要进行价值比较的地方。一些竞争对手可能没有正常运行时间保证，但收费低于Heroku。或者有些可能有你需要的开箱即用的特殊功能，Heroku可能会额外收费。但是有些价格相当的<em class="kw">和</em>都有SLA保证最低正常运行时间。例如，发动机场的成本大约相同(50美元/月)，但有99%的正常运行时间保证。与Heroku相比，这是无限好的正常运行时间保证。</p><p id="0a0a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">就我个人而言，我发现Heroku的服务质量缓慢但稳步下降。那次下跌是否与它被Salesforce收购巧合，我不知道也不能说。但对我来说很荒谬的是，Salesforce，一家拥有大量开发人员资源的极其盈利的公司，却不能给Heroku带来SLA。我甚至可以说，他们不为自己通过Heroku提供的昂贵服务承担经济责任，这简直令人作呕。</p><p id="5208" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我已经停止使用Heroku像6年前，从来没有回头。如今，使用GKE的自动驾驶仪和ECS，即使在Kubernetes上也可以非常简单地启动和运行一些东西，所以Heroku不像以前那样相关和必要了。在某些情况下，它仍然可以提供价值，但鉴于他们的高成本因素，他们没有义务提供最低水平的服务，这一事实只是坚定了我尽可能远离他们的决定。我鼓励其他人也这样做。</p></div></div>    
</body>
</html>