<html>
<head>
<title>Building a movies search app using Elasticsearch, Nodejs, Reactjs and IMDb API: [Part 1] Setup the environment</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Elasticsearch、Nodejs、Reactjs和IMDb API构建电影搜索应用程序:[第1部分]设置环境</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/building-a-movies-search-app-using-elasticsearch-nodejs-reactjs-and-imdb-api-part-1-setup-the-b2536cbc3bbc?source=collection_archive---------8-----------------------#2022-09-28">https://levelup.gitconnected.com/building-a-movies-search-app-using-elasticsearch-nodejs-reactjs-and-imdb-api-part-1-setup-the-b2536cbc3bbc?source=collection_archive---------8-----------------------#2022-09-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/26a1ca9296b83c659db0e6779f8114a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UKcpy_AQVd4HmC7J0GRGfA.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">由<a class="ae kc" href="https://unsplash.com/@lautaroandreani?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">劳塔罗·安德烈亚尼</a>在<a class="ae kc" href="https://unsplash.com/s/photos/full-stack?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="3aff" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">很高兴再次见到你，因为我们发现了弹性堆栈。今天，我们将应用我们在以前的文章中获得的知识来构建一个完整的电影搜索应用程序；电影取自IMDb API。系好安全带，准备起飞🛫.</p><p id="b979" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">下面是我们想要构建的应用程序:</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lb"><img src="../Images/56357a438342129633abcb2b562d2842.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*sPiNW5tkF1sdlfDtBMINTQ.gif"/></div></div></figure><p id="4d63" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们选择了以下架构:</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lg"><img src="../Images/afcb9442e8f553a7e0acb36b34c102f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0ii1KBHGnrdtJPSp9-gZXw.png"/></div></div></figure><p id="d428" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将首先使用Docker容器对Elasticsearch和Kibana进行安全部署，由于Elasticsearch客户端，Docker容器将与Nodejs服务器进行通信。服务器将负责从我们的API中检索电影，并在Elasticsearch上对它们进行索引。对于前端，我们有一个用React.js和Tailwindcss构建的应用程序，客户端将能够输入他的请求并查看结果。</p><h2 id="dbd6" class="lh li iq bd lj lk ll dn lm ln lo dp lp ko lq lr ls ks lt lu lv kw lw lx ly lz bi translated">设置环境</h2><p id="2948" class="pw-post-body-paragraph kd ke iq kf b kg ma ki kj kk mb km kn ko mc kq kr ks md ku kv kw me ky kz la ij bi translated">在开始开发任何东西之前，我们应该首先配置环境。为此，你需要<strong class="kf ir">码头工人</strong>。</p><p id="7f59" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在一个空目录中，创建一个<code class="fe mf mg mh mi b">.env</code>文件和一个<code class="fe mf mg mh mi b">docker-compose.yml</code>文件。这些文件将用于创建我们的容器(Elasticsearch和Kibana)。</p><p id="ec13" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe mf mg mh mi b">.env</code>文件中，创建以下环境变量，用您的键替换<strong class="kf ir"> <em class="mj"> TYPE_HERE </em> </strong>。您可以自己选择部署端口、密码以及想要使用的堆栈版本。对于本教程，我们使用8.4.0版和默认端口。</p><pre class="lc ld le lf gt mk mi ml mm aw mn bi"><span id="0992" class="lh li iq mi b gy mo mp l mq mr"># Version of Elastic products<br/>STACK_VERSION=8.4.0 </span><span id="292d" class="lh li iq mi b gy ms mp l mq mr"># Port to expose Elasticsearch HTTP API to the host<br/>ES_PORT=9200 </span><span id="02b8" class="lh li iq mi b gy ms mp l mq mr"># Port to expose Kibana to the host<br/>KIBANA_PORT=5601 </span><span id="2a4e" class="lh li iq mi b gy ms mp l mq mr"># Password for the 'elastic' client<br/>ELASTIC_PASSWORD=TYPE_HERE </span><span id="3dfd" class="lh li iq mi b gy ms mp l mq mr"># Password for the 'kibana_system' user<br/>KIBANA_PASSWORD=TYPE_HERE </span><span id="7971" class="lh li iq mi b gy ms mp l mq mr"># Set the license<br/>LICENSE=trial</span></pre><p id="ce04" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">配置完环境变量后，打开<code class="fe mf mg mh mi b">docker-compose.yml</code>文件进行一些配置。我们想要一个Elasticsearch和Kibana的安全部署，所以配置如下所示。</p><figure class="lc ld le lf gt jr"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="0f15" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你想了解更多关于这个主题的信息，我邀请你查看我写的关于这个主题的文章，或者看看官方文件。现在配置看起来不错，只需运行以下命令来创建容器:</p><pre class="lc ld le lf gt mk mi ml mm aw mn bi"><span id="ca57" class="lh li iq mi b gy mo mp l mq mr">docker-compose up -d</span></pre><p id="8389" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这可能需要一些时间，取决于您的互联网连接，因为它将从Docker Hub中提取Elasticsearch和Kibana图像。一旦启动了容器，您应该能够通过打开<a class="ae kc" href="http://localhost:5601" rel="noopener ugc nofollow" target="_blank"> http://localhost:5601 </a>来访问Kibana。以<strong class="kf ir"> <em class="mj">弹性</em> </strong>用户身份登录，填写<em class="mj">中的密码。env </em>文件(<em class="mj"> ELASTIC_PASSWORD </em>)。</p><p id="bf91" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">既然我们的容器已经发布，我们将不得不考虑Elasticsearch和Nodejs服务器之间的安全通信。为此，我们必须复制创建容器时启动的安装服务生成的证书。</p><p id="cebc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此创建一个名为<strong class="kf ir"> backend </strong>的文件夹，复制其路径并运行以下命令:</p><pre class="lc ld le lf gt mk mi ml mm aw mn bi"><span id="915d" class="lh li iq mi b gy mo mp l mq mr">docker cp es01:/usr/share/elasticsearch/config/certs/ca/ca.crt TYPE_THE_PATH_YOU_COPIED_HERE/certs/</span></pre><p id="f7a7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一旦执行，该命令将在我们的后端文件夹中创建一个<strong class="kf ir"> certs </strong>文件夹，并将<strong class="kf ir"> ca.crt </strong>文件放在那里，我们将在稍后连接Nodejs时使用该文件。</p><p id="e911" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">以上是第一部分的全部内容，我们现在可以继续为我们的应用程序编写代码了。您可以通过以下链接访问包含该应用程序的GitHub repo:</p><div class="mv mw gp gr mx my"><a href="https://github.com/AbdoulBaguiM/movies-search" rel="noopener  ugc nofollow" target="_blank"><div class="mz ab fo"><div class="na ab nb cl cj nc"><h2 class="bd ir gy z fp nd fr fs ne fu fw ip bi translated">GitHub-AbdoulBaguiM/movies-search:用Reactjs、Nodejs和…</h2><div class="nf l"><h3 class="bd b gy z fp nd fr fs ne fu fw dk translated">这是一个电影搜索应用程序，它将IMDB API中的数据索引到使用…</h3></div><div class="ng l"><p class="bd b dl z fp nd fr fs ne fu fw dk translated">github.com</p></div></div><div class="nh l"><div class="ni l nj nk nl nh nm jw my"/></div></div></a></div><p id="9483" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">感谢您的阅读，如果您对本文有任何问题或评论，请在下面留下您的评论。</p><p id="ed7b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">设置后端的下一部分即将到来，敬请关注🚀。</p><p id="770b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">阿卜杜尔-巴吉</p></div></div>    
</body>
</html>