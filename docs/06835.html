<html>
<head>
<title>Create a Desktop App with Vue and Electron</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Vue和电子创建一个桌面应用程序</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/create-a-desktop-app-with-vue-and-electron-da89dba36377?source=collection_archive---------3-----------------------#2021-01-06">https://levelup.gitconnected.com/create-a-desktop-app-with-vue-and-electron-da89dba36377?source=collection_archive---------3-----------------------#2021-01-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/0403716a1303a2f01067cc9f2f54c7fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*WSAI855sffENXlEd"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">照片由<a class="ae kf" href="https://unsplash.com/@levajsics?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">诺贝特·莱瓦西斯</a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="9ca0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Electron是一个应用程序框架，让我们可以构建基于web应用程序的桌面应用程序。这些应用是跨平台的，使用Chromium浏览器引擎渲染。我们可以使用<a class="ae kf" href="https://github.com/nklayman/vue-cli-plugin-electron-builder" rel="noopener ugc nofollow" target="_blank">vue-CLI-plugin-electronic-builder</a>代码生成器来构建一个基于Vue.js的电子app</p><p id="301d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本文中，我们将看看如何构建一个简单的电子Vue应用程序。</p><h1 id="e29b" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">入门指南</h1><p id="633d" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以从创建一个Vue.js项目开始。</p><p id="5181" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为此，我们创建一个空的项目文件夹，进入该文件夹并运行:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="0220" class="mq lf it mm b gy mr ms l mt mu">npx vue create .</span></pre><p id="ae49" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们按照说明添加我们想要的项目。</p><p id="bea4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">接下来，我们运行Vue CLI插件电子生成器，将电子文件添加到我们的Vue应用程序中。</p><p id="cfb7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们运行:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="ea73" class="mq lf it mm b gy mr ms l mt mu">vue add electron-builder</span></pre><p id="8e8c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">自动添加所有文件和设置。</p><p id="7002" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后，为了启动开发服务器，我们运行:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="098a" class="mq lf it mm b gy mr ms l mt mu">yarn electron:serve</span></pre><p id="4ced" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">或者</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="6bf0" class="mq lf it mm b gy mr ms l mt mu">npm run electron:serve</span></pre><p id="aa47" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们应该看到我们的应用程序显示一个窗口。还应该显示开发控制台。</p><p id="fa78" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在我们只需要编写我们的Vue应用程序。</p><h1 id="ca99" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">编写代码</h1><p id="9b43" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们像任何其他Vue应用程序一样编写代码。</p><p id="6e6b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在<code class="fe mv mw mx mm b">App.vue</code>中，我们写道:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="4fa5" class="mq lf it mm b gy mr ms l mt mu">&lt;template&gt;<br/>  &lt;div id="app"&gt;<br/>    &lt;form @submit.prevent="add"&gt;<br/>      &lt;input type="text" v-model="todo" /&gt;<br/>      &lt;input type="submit" value="add" /&gt;<br/>    &lt;/form&gt;<br/>    &lt;div v-for="(t, i) of todos" :key="t.id"&gt;<br/>      {{t.todo}}<br/>      &lt;button @click="remove(i)"&gt;remove&lt;/button&gt;<br/>    &lt;/div&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="91a4" class="mq lf it mm b gy my ms l mt mu">&lt;script&gt;<br/>import { v4 as uuidv4 } from "uuid";</span><span id="92ee" class="mq lf it mm b gy my ms l mt mu">export default {<br/>  name: "App",<br/>  data() {<br/>    return {<br/>      todo: "",<br/>      todos: [],<br/>    };<br/>  },<br/>  methods: {<br/>    add() {<br/>      this.todos.push({ id: uuidv4(), todo: this.todo });<br/>      this.todo = "";<br/>    },<br/>    remove(index) {<br/>      this.todos.splice(index, 1);<br/>    },<br/>  },<br/>};<br/>&lt;/script&gt;</span></pre><p id="b4c0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在我们的应用程序中添加待办事项列表。</p><p id="18c5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们有一个添加待办事项列表的表单。然后我们有了向<code class="fe mv mw mx mm b">this.todos</code>添加条目的<code class="fe mv mw mx mm b">add</code>方法。</p><p id="a631" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们使用<code class="fe mv mw mx mm b">uuid</code> NPM包为每个条目创建唯一的id，我们通过运行以下命令来安装该包:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="3158" class="mq lf it mm b gy mr ms l mt mu">npm i uuid</span></pre><p id="e31a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们用<code class="fe mv mw mx mm b">remove</code>删除给定索引的<code class="fe mv mw mx mm b">this.todos</code>条目。</p><p id="c248" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在表单中监听带有<code class="fe mv mw mx mm b">@submit.prevent</code>指令的<code class="fe mv mw mx mm b">submit</code>事件，同时调用<code class="fe mv mw mx mm b">preventDefault</code>来阻止默认提交行为。</p><p id="4978" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在我们应该看到我们的todo应用程序显示在窗口中。</p><h1 id="f763" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">构建我们的应用</h1><p id="915a" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">为了将我们的应用程序构建成可执行文件，我们运行:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="0c95" class="mq lf it mm b gy mr ms l mt mu">yarn electron:build</span></pre><p id="a259" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">用纱线或:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="8aa3" class="mq lf it mm b gy mr ms l mt mu">npm run electron:build</span></pre><p id="26ff" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">和NPM一起。</p><h1 id="03c9" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">本机模块</h1><p id="74d6" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以将本机模块添加到我们的应用程序中的<code class="fe mv mw mx mm b">vue.config.js</code>文件中:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="4a6d" class="mq lf it mm b gy mr ms l mt mu">module.exports = {<br/>  pluginOptions: {<br/>    electronBuilder: {<br/>      externals: ['my-native-dep'],<br/>      nodeModulesPath: ['../../node_modules', './node_modules']<br/>    }<br/>  }<br/>}</span></pre><p id="f50b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以添加<code class="fe mv mw mx mm b">node_module</code>路径来定位模块。</p><p id="a1ca" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mv mw mx mm b">externals</code>用于列出与我们的应用程序不兼容的模块名称。</p><h1 id="e91e" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">网络工作者</h1><p id="572c" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">要添加工人，我们通过编写以下内容将他们添加到<code class="fe mv mw mx mm b">vue.config.js</code>文件中:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="2ad7" class="mq lf it mm b gy mr ms l mt mu">const WorkerPlugin = require('worker-plugin')</span><span id="7b15" class="mq lf it mm b gy my ms l mt mu">module.exports = {<br/>  configureWebpack: {<br/>    plugins: [new WorkerPlugin()]<br/>  }<br/>}</span></pre><p id="3165" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们通过运行以下命令来安装<code class="fe mv mw mx mm b">worker-plugin</code>包:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="4f08" class="mq lf it mm b gy mr ms l mt mu">npm i worker-plugin</span></pre><p id="9092" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，我们可以通过编写以下内容来使用工人文件:</p><p id="a6f7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mv mw mx mm b">src/worker.js</code></p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="b35d" class="mq lf it mm b gy mr ms l mt mu">onmessage = (e) =&gt; {<br/>  const { a, b } = e.data;<br/>  const workerResult = +a + +b;<br/>  postMessage(workerResult);<br/>}</span></pre><p id="2e3a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mv mw mx mm b">src/App.vue</code></p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="c302" class="mq lf it mm b gy mr ms l mt mu">&lt;template&gt;<br/>  &lt;div id="app"&gt;<br/>    &lt;form @submit.prevent="send"&gt;<br/>      &lt;input type="text" v-model="a" /&gt;<br/>      &lt;input type="text" v-model="b" /&gt;<br/>      &lt;input type="submit" value="add" /&gt;<br/>    &lt;/form&gt;<br/>    &lt;p&gt;result: {{result}}&lt;/p&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="3e50" class="mq lf it mm b gy my ms l mt mu">&lt;script&gt;<br/>const worker = new Worker("./worker.js", { type: "module" });</span><span id="1184" class="mq lf it mm b gy my ms l mt mu">export default {<br/>  name: "App",<br/>  data() {<br/>    return {<br/>      a: 0,<br/>      b: 0,<br/>      result: 0<br/>    };<br/>  },<br/>  mounted() {<br/>    worker.onmessage = this.onMessage;<br/>  },<br/>  methods: {<br/>    send() {<br/>      const { a, b } = this;<br/>      worker.postMessage({ a, b });<br/>    },<br/>    onMessage({data}) {<br/>      this.result = data;<br/>    },<br/>  },<br/>};<br/>&lt;/script&gt;</span></pre><p id="883d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们创建了一个监听<code class="fe mv mw mx mm b">message</code>事件的worker。</p><p id="caad" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mv mw mx mm b">message</code>事件是由我们在<code class="fe mv mw mx mm b">send</code>方法中发出的<code class="fe mv mw mx mm b">worker.postMessage</code>方法发出的。</p><p id="6a05" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mv mw mx mm b">send</code>从我们输入的内容中获取数据。</p><p id="8d80" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一旦发出了<code class="fe mv mw mx mm b">message</code>事件，我们就从<code class="fe mv mw mx mm b">e.data</code>获得数据。</p><p id="d748" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们计算结果，并调用<code class="fe mv mw mx mm b">postMessage</code>将计算结果发送回<code class="fe mv mw mx mm b">App.vue</code>。</p><p id="dfa0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mv mw mx mm b">App.vue</code>从<code class="fe mv mw mx mm b">onMessage</code>方法中获取结果。</p><p id="660c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们从中显示出<code class="fe mv mw mx mm b">result</code>。</p><h1 id="56dd" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">结论</h1><p id="cff3" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以用Vue.js和<a class="ae kf" href="https://github.com/nklayman/vue-cli-plugin-electron-builder" rel="noopener ugc nofollow" target="_blank">vue-CLI-plugin-electron-builder</a>生成器创建一个桌面应用。</p><p id="8fe8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">它支持网络工作者。</p></div></div>    
</body>
</html>