<html>
<head>
<title>What the heck are JWT and OAuth 2.0?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JWT和OAuth 2.0到底是什么？</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/what-the-heck-are-jwt-and-oauth-2-0-865312ed2aff?source=collection_archive---------2-----------------------#2022-07-14">https://levelup.gitconnected.com/what-the-heck-are-jwt-and-oauth-2-0-865312ed2aff?source=collection_archive---------2-----------------------#2022-07-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/0ab0be21efefe569accece3ca4548c80.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/format:webp/1*qMC7g40mcQmeI3r-hMjY8Q.png"/></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk translated"><a class="ae jy" href="https://icons8.com/icon/rHpveptSuwDz/json-web-token" rel="noopener ugc nofollow" target="_blank"> JSON Web令牌</a>图标由<a class="ae jy" href="https://icons8.com/" rel="noopener ugc nofollow" target="_blank">图标8 </a>组成</figcaption></figure><h1 id="272f" class="jz ka iq bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">目录</h1><ul class=""><li id="ad55" class="kx ky iq kz b la lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">背景/问题陈述</li><li id="f087" class="kx ky iq kz b la lp lc lq le lr lg ls li lt lk ll lm ln lo bi translated">什么是JWT？</li><li id="27dc" class="kx ky iq kz b la lp lc lq le lr lg ls li lt lk ll lm ln lo bi translated">JSON Web令牌是如何以及何时使用的？</li><li id="bfe7" class="kx ky iq kz b la lp lc lq le lr lg ls li lt lk ll lm ln lo bi translated">OAuth 2.0是如何工作的？</li><li id="a1fc" class="kx ky iq kz b la lp lc lq le lr lg ls li lt lk ll lm ln lo bi translated">JWT接入令牌在OAuth 2.0中的作用</li><li id="7bb4" class="kx ky iq kz b la lp lc lq le lr lg ls li lt lk ll lm ln lo bi translated">JSON Web Token的内部工作方式</li><li id="e895" class="kx ky iq kz b la lp lc lq le lr lg ls li lt lk ll lm ln lo bi translated">一些最后的提示和可行的建议</li></ul></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h1 id="cc5f" class="jz ka iq bd kb kc mb ke kf kg mc ki kj kk md km kn ko me kq kr ks mf ku kv kw bi translated">背景/问题陈述</h1><h2 id="75dd" class="mg ka iq bd kb mh mi dn kf mj mk dp kj le ml mm kn lg mn mo kr li mp mq kv mr bi translated">创建您的自定义登录流很困难</h2><p id="8ff2" class="pw-post-body-paragraph ms mt iq kz b la lb mu mv lc ld mw mx le my mz na lg nb nc nd li ne nf ng lk ij bi translated">有时也有风险。要设计一个安全、轻量级的登录程序，需要对网络安全原理有深刻的理解，并具备良好的软件设计知识。</p><figure class="ni nj nk nl gt jr gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/b5307f46733daf72c07c7986967ece0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:576/format:webp/1*sAly10yKo7h2Yf8JF9Bg7Q.png"/></div></figure><p id="4e16" class="pw-post-body-paragraph ms mt iq kz b la nm mu mv lc nn mw mx le no mz na lg np nc nd li nq nf ng lk ij bi translated">事实证明，这对小型和大型公司来说都是相当具有挑战性的——如果您未能正确加密敏感信息，该怎么办？如果您的密码哈希很容易被利用怎么办？</p><h2 id="0add" class="mg ka iq bd kb mh mi dn kf mj mk dp kj le ml mm kn lg mn mo kr li mp mq kv mr bi translated">对身份提供者的委托</h2><figure class="ni nj nk nl gt jr gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/5d3f7e510c8c9046feab587fdefa2f50.png" data-original-src="https://miro.medium.com/v2/resize:fit:748/format:webp/1*CFIDjqjzg7vUavQZUuIXuA.png"/></div></figure><p id="6f4c" class="pw-post-body-paragraph ms mt iq kz b la nm mu mv lc nn mw mx le no mz na lg np nc nd li nq nf ng lk ij bi translated">为了避免这些复杂性，我们<strong class="kz ir">将这些任务委托给身份提供者</strong>，并使用常见的<strong class="kz ir">‘登录谷歌’</strong>或<strong class="kz ir">‘登录脸书’</strong>认证方法。</p><p id="5b9f" class="pw-post-body-paragraph ms mt iq kz b la nm mu mv lc nn mw mx le no mz na lg np nc nd li nq nf ng lk ij bi translated">在使用此类身份验证方法时，您可能会经常看到诸如<a class="ae jy" href="https://oauth.net/2/" rel="noopener ugc nofollow" target="_blank"> <strong class="kz ir"> OAuth 2.0 </strong> </a>和<a class="ae jy" href="https://jwt.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kz ir"> JWT </strong> </a> <strong class="kz ir">之类的术语。</strong></p><p id="d461" class="pw-post-body-paragraph ms mt iq kz b la nm mu mv lc nn mw mx le no mz na lg np nc nd li nq nf ng lk ij bi translated">但是OAuth 2.0到底是什么，它与JWT有什么关系？</p><p id="df31" class="pw-post-body-paragraph ms mt iq kz b la nm mu mv lc nn mw mx le no mz na lg np nc nd li nq nf ng lk ij bi translated">在本文中，我将分享您需要了解的关于OAuth 2.0和JWT的一切。如果你是一名软件架构师、软件工程师，或者只是一名热情的技术人员，你绝对应该继续读下去，了解更多！</p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h1 id="de68" class="jz ka iq bd kb kc mb ke kf kg mc ki kj kk md km kn ko me kq kr ks mf ku kv kw bi translated">什么是JWT？</h1><figure class="ni nj nk nl gt jr gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/df6a02bb4f5738b18c30913a7a400af0.png" data-original-src="https://miro.medium.com/v2/resize:fit:352/format:webp/1*I_hLOugd9uFOYbB_qHu6Jw.png"/></div></figure><p id="37a6" class="pw-post-body-paragraph ms mt iq kz b la nm mu mv lc nn mw mx le no mz na lg np nc nd li nq nf ng lk ij bi translated">简而言之，JWT——也称为JSON Web Token——是通过JSON对象在不同方之间安全传输信息的标准。 </p><p id="6e4c" class="pw-post-body-paragraph ms mt iq kz b la nm mu mv lc nn mw mx le no mz na lg np nc nd li nq nf ng lk ij bi translated">通过JWT传输的信息也可以被验证，因为它是数字签名的。数字签名信息允许我们确保我们收到的信息不被篡改，<strong class="kz ir">从而确保信息的完整性。</strong></p><figure class="ni nj nk nl gt jr gh gi paragraph-image"><div class="ab gu cl nu"><img src="../Images/96d914d8edef9f07ee3c5467355d3367.png" data-original-src="https://miro.medium.com/v2/format:webp/1*fp18WN6j_XRiBR3qqS-OiA.png"/></div></figure><p id="3352" class="pw-post-body-paragraph ms mt iq kz b la nm mu mv lc nn mw mx le no mz na lg np nc nd li nq nf ng lk ij bi translated">另外，如果您好奇，这是JSON Web令牌的紧凑形式。</p><h1 id="cdfb" class="jz ka iq bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">JSON Web令牌是如何以及何时使用的？</h1><p id="3ebf" class="pw-post-body-paragraph ms mt iq kz b la lb mu mv lc ld mw mx le my mz na lg nb nc nd li ne nf ng lk ij bi translated">通常，您会看到JWT被用于多种身份验证/授权场景。</p><figure class="ni nj nk nl gt jr gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/cc94218192b693f23a4ed1dd87db4b12.png" data-original-src="https://miro.medium.com/v2/resize:fit:864/format:webp/1*dIe90V38m_bpksVhsh2zkg.jpeg"/></div></figure><p id="04aa" class="pw-post-body-paragraph ms mt iq kz b la nm mu mv lc nn mw mx le no mz na lg np nc nd li nq nf ng lk ij bi translated">例如，当您在网站上集成Google Sign-In时，您可能会遵循OAuth(开放授权)2.0标准，并在交易结束时收到一个JWT访问令牌。</p><p id="e853" class="pw-post-body-paragraph ms mt iq kz b la nm mu mv lc nn mw mx le no mz na lg np nc nd li nq nf ng lk ij bi translated">然后，JWT访问令牌用于<strong class="kz ir">授权客户端应用程序访问受保护的资源。</strong></p><h1 id="a266" class="jz ka iq bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">OAuth 2.0是如何工作的？</h1><figure class="ni nj nk nl gt jr gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/1644f0746526d849c430b9aa5b8e5b27.png" data-original-src="https://miro.medium.com/v2/resize:fit:248/format:webp/0*LJyMxxUhU5a-GBaK.png"/></div></figure><p id="ff40" class="pw-post-body-paragraph ms mt iq kz b la nm mu mv lc nn mw mx le no mz na lg np nc nd li nq nf ng lk ij bi translated">为了更好地理解JWT，我们需要首先理解OAuth 2.0。</p><p id="dc42" class="pw-post-body-paragraph ms mt iq kz b la nm mu mv lc nn mw mx le no mz na lg np nc nd li nq nf ng lk ij bi translated">这里有一个TLDR；OAuth 2.0版本说明。我将只关注OAuth 2.0的核心概念，这足以让您理解jwt在OAuth 2.0中的作用。</p><p id="65ea" class="pw-post-body-paragraph ms mt iq kz b la nm mu mv lc nn mw mx le no mz na lg np nc nd li nq nf ng lk ij bi translated">在这个解释中，让我们使用一个开发人员的例子，他正在构建一个需要与银行服务器接口的财务应用程序。</p><p id="b74b" class="pw-post-body-paragraph ms mt iq kz b la nm mu mv lc nn mw mx le no mz na lg np nc nd li nq nf ng lk ij bi translated">在这个例子中，我们的<strong class="kz ir">财务应用</strong>需要访问<strong class="kz ir">我们的用户(即约翰)的银行信息</strong>来显示一个财务仪表板，供我们的用户跟踪他的财务状况。</p><h2 id="0773" class="mg ka iq bd kb mh mi dn kf mj mk dp kj le ml mm kn lg mn mo kr li mp mq kv mr bi translated">在OAuth 2.0中有4个角色</h2><figure class="ni nj nk nl gt jr gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/47c3bcaf459c73a2ab6df8e3a9a1165e.png" data-original-src="https://miro.medium.com/v2/resize:fit:660/format:webp/1*PLTGfhHnxIy1X3XznQ_UNQ.png"/></div></figure><ol class=""><li id="5b5c" class="kx ky iq kz b la nm lc nn le ny lg nz li oa lk ob lm ln lo bi translated"><strong class="kz ir">资源所有者:</strong>拥有受保护资源的用户，即John</li><li id="e667" class="kx ky iq kz b la lp lc lq le lr lg ls li lt lk ob lm ln lo bi translated"><strong class="kz ir">客户端:</strong>需要访问受保护资源的系统，即我们的财务app</li><li id="3724" class="kx ky iq kz b la lp lc lq le lr lg ls li lt lk ob lm ln lo bi translated"><strong class="kz ir">授权服务器:</strong>处理授权流程的服务器，以便您的客户端(金融app)可以访问受保护的资源，即银行的授权服务器</li><li id="eb0b" class="kx ky iq kz b la lp lc lq le lr lg ls li lt lk ob lm ln lo bi translated"><strong class="kz ir">资源服务器:</strong>接收访问请求并返回受保护资源的服务器，即银行的资源服务器</li></ol><p id="48fa" class="pw-post-body-paragraph ms mt iq kz b la nm mu mv lc nn mw mx le no mz na lg np nc nd li nq nf ng lk ij bi translated"><strong class="kz ir"><em class="nt">*下例中受保护的资源指的是John的银行信息。</em>T19】</strong></p><h2 id="24a1" class="mg ka iq bd kb mh mi dn kf mj mk dp kj le ml mm kn lg mn mo kr li mp mq kv mr bi translated"><strong class="ak">通用OAuth 2.0工作流程</strong></h2><p id="f9ff" class="pw-post-body-paragraph ms mt iq kz b la lb mu mv lc ld mw mx le my mz na lg nb nc nd li ne nf ng lk ij bi translated">这是OAuth 2.0工作流，用于我们的财务应用程序访问用户的银行信息。</p><figure class="ni nj nk nl gt jr gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/0c26e51acecb72569aa8681f9aeb1557.png" data-original-src="https://miro.medium.com/v2/resize:fit:968/format:webp/1*8knTKg5JJmKPL7JZ_BsK1A.png"/></div></figure><p id="bb0f" class="pw-post-body-paragraph ms mt iq kz b la nm mu mv lc nn mw mx le no mz na lg np nc nd li nq nf ng lk ij bi translated">工作流程可能看起来很复杂，但如果你试着慢慢阅读和理解，它实际上是非常符合逻辑的。</p><ol class=""><li id="f60c" class="kx ky iq kz b la nm lc nn le ny lg nz li oa lk ob lm ln lo bi translated"><strong class="kz ir">金融app (client) </strong>通过提供<strong class="kz ir">客户ID </strong>和<strong class="kz ir">客户机密</strong>作为标识，向<strong class="kz ir">银行授权服务器</strong>请求授权。</li><li id="d549" class="kx ky iq kz b la lp lc lq le lr lg ls li lt lk ob lm ln lo bi translated"><strong class="kz ir">银行的授权服务器</strong>基于所提供的凭证来认证<strong class="kz ir">财务app(客户端)</strong>，并通过询问<strong class="kz ir"> John(资源所有者)</strong>是否同意让<strong class="kz ir">财务app(客户端)</strong>访问他的<strong class="kz ir">受保护的银行资源来验证该请求是否被允许。</strong></li><li id="c827" class="kx ky iq kz b la lp lc lq le lr lg ls li lt lk ob lm ln lo bi translated"><strong class="kz ir">约翰(资源所有者)</strong>授权<strong class="kz ir">财务app(客户端)</strong>访问他的<strong class="kz ir">受保护的银行资源。</strong></li><li id="4e84" class="kx ky iq kz b la lp lc lq le lr lg ls li lt lk ob lm ln lo bi translated"><strong class="kz ir">银行的授权服务器</strong>然后返回<strong class="kz ir">带有<strong class="kz ir"> JWT访问令牌的金融应用(客户端)</strong>。</strong></li><li id="01da" class="kx ky iq kz b la lp lc lq le lr lg ls li lt lk ob lm ln lo bi translated"><strong class="kz ir">金融应用(客户端)</strong>现在可以使用<strong class="kz ir"> JWT访问令牌从<strong class="kz ir">银行的资源服务器</strong>请求<strong class="kz ir">受保护的资源</strong>。</strong></li><li id="eb38" class="kx ky iq kz b la lp lc lq le lr lg ls li lt lk ob lm ln lo bi translated"><strong class="kz ir">银行的资源服务器</strong>在识别出有效的<strong class="kz ir"> JWT访问令牌</strong>后，根据请求返回<strong class="kz ir">受保护资源</strong>。</li></ol><p id="c25e" class="pw-post-body-paragraph ms mt iq kz b la nm mu mv lc nn mw mx le no mz na lg np nc nd li nq nf ng lk ij bi translated"><strong class="kz ir"> <em class="nt">注意*如果银行决定使用Google作为身份提供者，也可以使用Google的授权服务器扩展上述工作流程。</em> </strong></p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h1 id="1713" class="jz ka iq bd kb kc mb ke kf kg mc ki kj kk md km kn ko me kq kr ks mf ku kv kw bi translated"><strong class="ak">OAuth 2.0中JWT接入令牌的作用</strong></h1><p id="98fb" class="pw-post-body-paragraph ms mt iq kz b la lb mu mv lc ld mw mx le my mz na lg nb nc nd li ne nf ng lk ij bi translated">简单来说，<strong class="kz ir"> JWT访问令牌</strong>在这里起到<strong class="kz ir">的作用，证明请求</strong>提取<strong class="kz ir">受保护资源</strong>的用户<strong class="kz ir">确实被授权访问。</strong></p><blockquote class="od"><p id="e8e3" class="oe of iq bd og oh oi oj ok ol om lk dk translated">JWT接入令牌是一种授权机制。</p></blockquote><h1 id="e14b" class="jz ka iq bd kb kc kd ke kf kg kh ki kj kk on km kn ko oo kq kr ks op ku kv kw bi translated">JSON Web Token的内部工作方式</h1><figure class="ni nj nk nl gt jr gh gi paragraph-image"><div class="gh gi oq"><img src="../Images/b18b5956638622a420b9e97b191d4fa5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1008/format:webp/1*6Qd3Edpzdg-zwu9Ol40MQA.jpeg"/></div></figure><p id="7092" class="pw-post-body-paragraph ms mt iq kz b la nm mu mv lc nn mw mx le no mz na lg np nc nd li nq nf ng lk ij bi translated">回想一下，JWT (JSON Web Token)是<strong class="kz ir"> <em class="nt">一种通过JSON对象在不同方之间安全传输信息的标准。</em> </strong></p><p id="aeb5" class="pw-post-body-paragraph ms mt iq kz b la nm mu mv lc nn mw mx le no mz na lg np nc nd li nq nf ng lk ij bi translated">但是<strong class="kz ir">为什么OAuth 2.0使用JWT标准？</strong> <strong class="kz ir">为什么OAuth 2.0不能简单地使用加密字符串进行认证？JSON Web Token到底是怎么工作的？为了找到这些问题的答案，让我们探索JSON Web Token的内部工作原理。</strong></p><h2 id="6577" class="mg ka iq bd kb mh mi dn kf mj mk dp kj le ml mm kn lg mn mo kr li mp mq kv mr bi translated"><strong class="ak"> JWT常用案例</strong></h2><p id="10cd" class="pw-post-body-paragraph ms mt iq kz b la lb mu mv lc ld mw mx le my mz na lg nb nc nd li ne nf ng lk ij bi translated">首先，记住JSON Web令牌最常用于<strong class="kz ir">授权目的</strong>。此外，由于其设计，它也可以用于<strong class="kz ir">信息交换</strong>，因为jwt是<strong class="kz ir">数字签名的</strong>。因此，您可以<strong class="kz ir">验证消息内容没有被篡改。</strong></p><h2 id="4423" class="mg ka iq bd kb mh mi dn kf mj mk dp kj le ml mm kn lg mn mo kr li mp mq kv mr bi translated"><strong class="ak"> JSON Web令牌结构</strong></h2><figure class="ni nj nk nl gt jr gh gi paragraph-image"><div class="gh gi or"><img src="../Images/81a0dd89cc89340d3719359408f099f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:598/format:webp/1*-HY4NdpzvvucreeFhXd5Zw.png"/></div></figure><p id="d8fa" class="pw-post-body-paragraph ms mt iq kz b la nm mu mv lc nn mw mx le no mz na lg np nc nd li nq nf ng lk ij bi translated">JSON Web令牌的简洁形式如下所示。</p><figure class="ni nj nk nl gt jr gh gi paragraph-image"><div class="ab gu cl nu"><img src="../Images/96d914d8edef9f07ee3c5467355d3367.png" data-original-src="https://miro.medium.com/v2/format:webp/1*fp18WN6j_XRiBR3qqS-OiA.png"/></div></figure><p id="4909" class="pw-post-body-paragraph ms mt iq kz b la nm mu mv lc nn mw mx le no mz na lg np nc nd li nq nf ng lk ij bi translated">JSON Web令牌有3个部分— <strong class="kz ir">头、有效负载和签名。每个部分由句点/点分隔。<br/> </strong>此处，<strong class="kz ir">报头为红色文字</strong>，<strong class="kz ir">有效载荷为紫色文字</strong>，<strong class="kz ir">签名为蓝色文字</strong>。</p><h2 id="3bb3" class="mg ka iq bd kb mh mi dn kf mj mk dp kj le ml mm kn lg mn mo kr li mp mq kv mr bi translated"><strong class="ak">报头—令牌的第一部分</strong></h2><figure class="ni nj nk nl gt jr gh gi paragraph-image"><div class="gh gi os"><img src="../Images/d01d14cf6ea16a33c3446cc6fb5ea692.png" data-original-src="https://miro.medium.com/v2/resize:fit:236/format:webp/1*KT1LQvUuSr7l2xpu4l42jg.png"/></div></figure><p id="ce4c" class="pw-post-body-paragraph ms mt iq kz b la nm mu mv lc nn mw mx le no mz na lg np nc nd li nq nf ng lk ij bi translated">JWT令牌的头只是一个包含两条信息的<strong class="kz ir"> JSON数据——令牌的类型和使用的签名算法(即HMAC SHA256) </strong></p><p id="a112" class="pw-post-body-paragraph ms mt iq kz b la nm mu mv lc nn mw mx le no mz na lg np nc nd li nq nf ng lk ij bi translated"><strong class="kz ir">举例:</strong></p><pre class="ni nj nk nl gt ot ou ov ow aw ox bi"><span id="7010" class="mg ka iq ou b gy oy oz l pa pb">{<br/>  "alg": "HS256",<br/>  "typ": "JWT"<br/>}</span></pre><p id="8902" class="pw-post-body-paragraph ms mt iq kz b la nm mu mv lc nn mw mx le no mz na lg np nc nd li nq nf ng lk ij bi translated">这个JSON数据然后将被<strong class="kz ir"> Base64Url编码</strong>以形成JWT的第一部分。</p><p id="0d44" class="pw-post-body-paragraph ms mt iq kz b la nm mu mv lc nn mw mx le no mz na lg np nc nd li nq nf ng lk ij bi translated">Base64Url编码输出:<code class="fe pc pd pe ou b">eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9</code></p><p id="60cc" class="pw-post-body-paragraph ms mt iq kz b la nm mu mv lc nn mw mx le no mz na lg np nc nd li nq nf ng lk ij bi translated"><strong class="kz ir"> <em class="nt">注意* <br/> - Base64Url编码是指将二进制数据(即101101)转换成ASCII字符串格式。<br/> -间距很重要。如果您尝试将上面格式良好的JSON数据粘贴到Base64Url编码器中，您将得到这个输出</em> </strong> <code class="fe pc pd pe ou b">ewogICJhbGciOiAiSFMyNTYiLAogICJ0eXAiOiAiSldUIgp9</code>。<strong class="kz ir">我用来base64url编码的JSON数据是</strong> <code class="fe pc pd pe ou b">{“alg”:”HS256",”typ”:”JWT”}</code></p><h2 id="bf95" class="mg ka iq bd kb mh mi dn kf mj mk dp kj le ml mm kn lg mn mo kr li mp mq kv mr bi translated">有效负载—令牌的第二部分</h2><figure class="ni nj nk nl gt jr gh gi paragraph-image"><div class="gh gi pf"><img src="../Images/bf42859e8ee24ed370fb41355920bfdc.png" data-original-src="https://miro.medium.com/v2/resize:fit:154/format:webp/1*tTWwMziK9sM_UuqumT9mpw.png"/></div></figure><p id="07d8" class="pw-post-body-paragraph ms mt iq kz b la nm mu mv lc nn mw mx le no mz na lg np nc nd li nq nf ng lk ij bi translated">有效负载包含关于实体(通常是用户)的数据。</p><p id="9f98" class="pw-post-body-paragraph ms mt iq kz b la nm mu mv lc nn mw mx le no mz na lg np nc nd li nq nf ng lk ij bi translated"><strong class="kz ir">例如:</strong></p><pre class="ni nj nk nl gt ot ou ov ow aw ox bi"><span id="7b1a" class="mg ka iq ou b gy oy oz l pa pb">{<br/>  "sub": "1234567890",<br/>  "name": "John Doe",<br/>  "iat": 1516239022<br/>}</span></pre><p id="034c" class="pw-post-body-paragraph ms mt iq kz b la nm mu mv lc nn mw mx le no mz na lg np nc nd li nq nf ng lk ij bi translated">同样，JSON数据被<strong class="kz ir"> Base64Url编码</strong>以形成JWT的第二部分。</p><h2 id="f894" class="mg ka iq bd kb mh mi dn kf mj mk dp kj le ml mm kn lg mn mo kr li mp mq kv mr bi translated">签名—令牌的第三部分/最后一部分</h2><figure class="ni nj nk nl gt jr gh gi paragraph-image"><div class="gh gi pg"><img src="../Images/06cbf081e6429d2204b5c0a8299efe53.png" data-original-src="https://miro.medium.com/v2/resize:fit:202/format:webp/1*jW_3XaGU2tooMbTgM4Lieg.png"/></div></figure><p id="8146" class="pw-post-body-paragraph ms mt iq kz b la nm mu mv lc nn mw mx le no mz na lg np nc nd li nq nf ng lk ij bi translated">我们的JSON Web令牌的最后一部分——<strong class="kz ir">签名</strong>——更加复杂，但是非常关键。</p><p id="5854" class="pw-post-body-paragraph ms mt iq kz b la nm mu mv lc nn mw mx le no mz na lg np nc nd li nq nf ng lk ij bi translated">签名需要<strong class="kz ir"> 4个输入</strong></p><ol class=""><li id="a3a0" class="kx ky iq kz b la nm lc nn le ny lg nz li oa lk ob lm ln lo bi translated">base64Url编码的<strong class="kz ir">头JSON数据</strong>(即<strong class="kz ir"> </strong> <code class="fe pc pd pe ou b">eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9</code>)</li><li id="2d18" class="kx ky iq kz b la lp lc lq le lr lg ls li lt lk ob lm ln lo bi translated">base64Url编码的<strong class="kz ir">有效载荷JSON数据</strong>(即<code class="fe pc pd pe ou b">eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ</code>)</li><li id="8095" class="kx ky iq kz b la lp lc lq le lr lg ls li lt lk ob lm ln lo bi translated"><strong class="kz ir">一个秘密串/密钥</strong>(即<code class="fe pc pd pe ou b">secret</code>)</li><li id="3fc5" class="kx ky iq kz b la lp lc lq le lr lg ls li lt lk ob lm ln lo bi translated"><strong class="kz ir">头JSON数据</strong>中指定的<strong class="kz ir">签名算法</strong>(即HMAC SHA256)</li></ol><p id="96c4" class="pw-post-body-paragraph ms mt iq kz b la nm mu mv lc nn mw mx le no mz na lg np nc nd li nq nf ng lk ij bi translated">对于4个输入，签名通过以下算法创建:</p><pre class="ni nj nk nl gt ot ou ov ow aw ox bi"><span id="a53d" class="mg ka iq ou b gy oy oz l pa pb">HMACSHA256(<br/>  base64UrlEncode(header) + "." +<br/>  base64UrlEncode(payload),<br/>  secret<br/>)</span></pre><p id="d392" class="pw-post-body-paragraph ms mt iq kz b la nm mu mv lc nn mw mx le no mz na lg np nc nd li nq nf ng lk ij bi translated">HMAC SHA256的输出将是<code class="fe pc pd pe ou b">XbPfbIHMI6arZ3Y922BhjWgQzWXcXNrz0ogtVhfEd2o</code></p><p id="3d00" class="pw-post-body-paragraph ms mt iq kz b la nm mu mv lc nn mw mx le no mz na lg np nc nd li nq nf ng lk ij bi translated"><strong class="kz ir"> <em class="nt">注意* —签名保证消息的完整性。如果这里的秘密是用私钥签名的，我们也可以确保身份验证和不可否认性。</em> </strong></p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h2 id="9ab4" class="mg ka iq bd kb mh mi dn kf mj mk dp kj le ml mm kn lg mn mo kr li mp mq kv mr bi translated"><strong class="ak">JSON Web令牌——结合了所有3个部分(头、有效负载和签名)</strong></h2><p id="82cb" class="pw-post-body-paragraph ms mt iq kz b la lb mu mv lc ld mw mx le my mz na lg nb nc nd li ne nf ng lk ij bi translated">报头:<code class="fe pc pd pe ou b">eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9<br/></code>有效载荷:<code class="fe pc pd pe ou b">eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ<br/></code>签名:<code class="fe pc pd pe ou b">XbPfbIHMI6arZ3Y922BhjWgQzWXcXNrz0ogtVhfEd2o</code></p><figure class="ni nj nk nl gt jr gh gi paragraph-image"><div class="gh gi ph"><img src="../Images/40b376ca0ea53489b228e42c1d83c9f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:740/format:webp/1*UYrpdXVK87saYtaiKctQ8A.png"/></div></figure><h1 id="5502" class="jz ka iq bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">一些最后的提示和可行的建议</h1><p id="478b" class="pw-post-body-paragraph ms mt iq kz b la lb mu mv lc ld mw mx le my mz na lg nb nc nd li ne nf ng lk ij bi translated">如果你成功了，恭喜你！现在<strong class="kz ir">您已经理解了JSON Web Token的基本概念</strong>以及它是如何在OAuth 2.0等标准中使用的<strong class="kz ir">。</strong></p><p id="3680" class="pw-post-body-paragraph ms mt iq kz b la nm mu mv lc nn mw mx le no mz na lg np nc nd li nq nf ng lk ij bi translated">在你离开之前，我想分享一些<strong class="kz ir">有价值的可操作的要点</strong>和你在未来项目中使用它们时与JWT互动的技巧。</p><ol class=""><li id="4775" class="kx ky iq kz b la nm lc nn le ny lg nz li oa lk ob lm ln lo bi translated"><strong class="kz ir">不要</strong>在JWT有效载荷中存储敏感数据。<strong class="kz ir">有效载荷是base64url编码的，不是加密的。</strong>攻击者可以<strong class="kz ir">运行简单的base64url解码来提取有效载荷内容。</strong></li><li id="2db0" class="kx ky iq kz b la lp lc lq le lr lg ls li lt lk ob lm ln lo bi translated">务必将JWT存储在httpOnly cookies中。由于许多用户需要JWT来向后端发出授权请求，所以您需要将JWT存储在某个地方。<strong class="kz ir">存储jwt最安全的地方是httpOnly cookies。</strong></li><li id="4089" class="kx ky iq kz b la lp lc lq le lr lg ls li lt lk ob lm ln lo bi translated">一定要为你的JWT签名使用强有力的秘密。如果你把你的秘密命名为你的应用/公司名称，你就是在要求被利用！一个好的经验法则是秘密的长度越长越好。</li></ol></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><p id="0751" class="pw-post-body-paragraph ms mt iq kz b la nm mu mv lc nn mw mx le no mz na lg np nc nd li nq nf ng lk ij bi translated">还有…就是这样！</p><p id="b839" class="pw-post-body-paragraph ms mt iq kz b la nm mu mv lc nn mw mx le no mz na lg np nc nd li nq nf ng lk ij bi translated"><strong class="kz ir">就像大多数网络安全专业人员无法逃避编码一样，大多数开发人员也无法逃避对核心安全原则的理解。</strong></p><p id="c1e9" class="pw-post-body-paragraph ms mt iq kz b la nm mu mv lc nn mw mx le no mz na lg np nc nd li nq nf ng lk ij bi translated">我很感激有一个网络安全的学术背景和丰富的软件工程经验，这使我能够结合我在这两个领域的技能。</p><p id="9e1f" class="pw-post-body-paragraph ms mt iq kz b la nm mu mv lc nn mw mx le no mz na lg np nc nd li nq nf ng lk ij bi translated">然而，你不必学习网络安全3年来学习所有必要的知识，以成为一名伟大的软件工程师/架构师！只要继续你正在做的事情——一次阅读一篇文章，一次实现一个技术概念——你就会成功！</p><p id="670c" class="pw-post-body-paragraph ms mt iq kz b la nm mu mv lc nn mw mx le no mz na lg np nc nd li nq nf ng lk ij bi translated">如果你想加速你在软件领域变得更加技术化和熟练，一定要给我一个关注！干杯！</p><p id="24a5" class="pw-post-body-paragraph ms mt iq kz b la nm mu mv lc nn mw mx le no mz na lg np nc nd li nq nf ng lk ij bi translated"><strong class="kz ir">资源</strong></p><ul class=""><li id="4bf5" class="kx ky iq kz b la nm lc nn le ny lg nz li oa lk ll lm ln lo bi translated"><a class="ae jy" href="https://jwt.io/introduction" rel="noopener ugc nofollow" target="_blank">https://jwt.io/introduction</a></li><li id="2808" class="kx ky iq kz b la lp lc lq le lr lg ls li lt lk ll lm ln lo bi translated"><a class="ae jy" href="https://jwt.io/#debugger-io" rel="noopener ugc nofollow" target="_blank">https://jwt.io/#debugger-io</a></li><li id="6a62" class="kx ky iq kz b la lp lc lq le lr lg ls li lt lk ll lm ln lo bi translated"><a class="ae jy" href="https://auth0.com/intro-to-iam/what-is-oauth-2/" rel="noopener ugc nofollow" target="_blank">https://auth0.com/intro-to-iam/what-is-oauth-2/</a></li><li id="b8c8" class="kx ky iq kz b la lp lc lq le lr lg ls li lt lk ll lm ln lo bi translated"><a class="ae jy" href="https://auth0.com/docs/secure/tokens/access-tokens" rel="noopener ugc nofollow" target="_blank">https://auth0.com/docs/secure/tokens/access-tokens</a></li></ul></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h1 id="9529" class="jz ka iq bd kb kc mb ke kf kg mc ki kj kk md km kn ko me kq kr ks mf ku kv kw bi translated">分级编码</h1><pre class="ni nj nk nl gt ot ou ov ow aw ox bi"><span id="59cb" class="mg ka iq ou b gy oy oz l pa pb">Thanks for being a part of our community! More content in the <a class="ae jy" href="https://levelup.gitconnected.com/" rel="noopener ugc nofollow" target="_blank">Level Up Coding publication</a>.</span><span id="d1d7" class="mg ka iq ou b gy pi oz l pa pb">Follow: <a class="ae jy" href="https://twitter.com/gitconnected" rel="noopener ugc nofollow" target="_blank">Twitter</a>, <a class="ae jy" href="https://www.linkedin.com/company/gitconnected" rel="noopener ugc nofollow" target="_blank">LinkedIn</a>, <a class="ae jy" href="https://newsletter.levelup.dev/" rel="noopener ugc nofollow" target="_blank">Newsletter</a></span><span id="4c77" class="mg ka iq ou b gy pi oz l pa pb">Level Up is transforming tech recruiting 👉 <a class="ae jy" href="https://jobs.levelup.dev/talent/welcome?referral=true" rel="noopener ugc nofollow" target="_blank"><strong class="ou ir">Join our talent collective</strong></a></span></pre></div></div>    
</body>
</html>