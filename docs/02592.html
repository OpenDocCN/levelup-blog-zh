<html>
<head>
<title>Sliding Carousel Tutorial for Rails 5</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Rails 5的滑动转盘教程</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/sliding-carousel-tutorial-for-rails-6-2cdf30ae4a8?source=collection_archive---------3-----------------------#2020-03-24">https://levelup.gitconnected.com/sliding-carousel-tutorial-for-rails-6-2cdf30ae4a8?source=collection_archive---------3-----------------------#2020-03-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="7cba" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">用Owl旋转木马设置一个漂亮的、反应灵敏的旋转木马</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/ccc5986aeeb18fb9290ee19551806dee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*0StSh78XBrgrb1BLiFi7mA.gif"/></div><figcaption class="kq kr gj gh gi ks kt bd b be z dk translated">在我的网站上找到现场演示:<a class="ae ku" href="https://goodfoodshanghai.com/" rel="noopener ugc nofollow" target="_blank">https://goodfoodshanghai.com/</a></figcaption></figure><p id="b2de" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated"><em class="lr">注意:本教程尚未更新Turbolinks。让我知道你是否想要一个更新的版本！</em></p><p id="e57c" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">有时候，简单的问题需要简单的解决方案。</p><p id="58fb" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">我一直在寻找一种方法来为我的Rails 6添加轮播导航，而不需要笨重的JavaScript或大约在2013年停止接收更新的gem。Bootstrap carousel是一个潜在的解决方案，但当您希望在每页上添加多个carousel卡时，它并不是一个优雅的解决方案。</p><p id="9e1a" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">OwlCarousel 来救援了！这是一个npm包，它无缝集成到您的Rails 6应用程序中(尽管它也可以与Rails 5一起工作),可以在不到5分钟的时间内创建一个工作转盘。</p><p id="a6b2" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">我们开始吧！</p><h1 id="0545" class="ls lt it bd lu lv lw lx ly lz ma mb mc jz md ka me kc mf kd mg kf mh kg mi mj bi translated">步骤1:设置npm软件包</h1><p id="4fff" class="pw-post-body-paragraph kv kw it kx b ky mk ju la lb ml jx ld le mm lg lh li mn lk ll lm mo lo lp lq im bi translated">第一步是安装<a class="ae ku" href="https://www.npmjs.com/package/owl.carousel" rel="noopener ugc nofollow" target="_blank"> NPM组件</a>。还有一个owl-carousel gem，但它与Rails 6不兼容。Rails 6通过app/javascript文件夹处理javascript，而gem需要通过旧的JavaScript管道添加进来。</p><p id="94bf" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">首先，通过yarn或npm安装软件包。您还需要在系统上安装<code class="fe mp mq mr ms b">jquery</code>作为依赖项。如果您的应用程序中配置了Bootstrap 4，应该已经完成了。</p><pre class="kj kk kl km gt mt ms mu mv aw mw bi"><span id="d314" class="mx lt it ms b gy my mz l na nb">yarn add owl.carousel jquery<br/>npm install --save owl.carousel</span></pre><p id="aac8" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">如果还没有，请在webpack配置文件中添加jQuery设置:</p><pre class="kj kk kl km gt mt ms mu mv aw mw bi"><span id="f76a" class="mx lt it ms b gy my mz l na nb">#config/webpack/environment.js</span><span id="e9ee" class="mx lt it ms b gy nc mz l na nb">const webpack = require('webpack')<br/>environment.plugins.prepend('Provide',<br/>  new webpack.ProvidePlugin({<br/>    $: 'jquery',<br/>    jQuery: 'jquery',<br/>    'window.jQuery': 'jquery'<br/> })<br/>)</span></pre><p id="568a" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">最后，将包JS和CSS导入JavaScript包:</p><pre class="kj kk kl km gt mt ms mu mv aw mw bi"><span id="e022" class="mx lt it ms b gy my mz l na nb">#app/javascript/packs/application.js<br/><br/>import 'owl.carousel/dist/assets/owl.carousel.css';<br/>import 'owl.carousel';</span><span id="7bba" class="mx lt it ms b gy nc mz l na nb">#you may also need to add these two lines above the owl carousel code if you get the 'error $ is not a function' error in the console</span><span id="5350" class="mx lt it ms b gy nc mz l na nb">import JQuery from 'jquery';<br/>window.$ = window.JQuery = JQuery;</span></pre><h1 id="bd97" class="ls lt it bd lu lv lw lx ly lz ma mb mc jz md ka me kc mf kd mg kf mh kg mi mj bi translated">步骤2:将Owl Carousel添加到您的视图中</h1><p id="a26e" class="pw-post-body-paragraph kv kw it kx b ky mk ju la lb ml jx ld le mm lg lh li mn lk ll lm mo lo lp lq im bi translated">carousel前端的设置非常简单——在想要制作成carousel的对象列表周围添加div类<code class="fe mp mq mr ms b">owl-carousel</code>,然后在它下面添加JavaScript代码片段，就完成了！</p><p id="bc0e" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">如果你用一个<code class="fe mp mq mr ms b">each</code>循环遍历一个数组，它可能看起来像这样:</p><pre class="kj kk kl km gt mt ms mu mv aw mw bi"><span id="9e4f" class="mx lt it ms b gy my mz l na nb">&lt;div class="owl-carousel"&gt;<br/>  &lt;% @things.each do |thing| %&gt;<br/>    &lt;div&gt; <br/>      &lt;%= thing.name %&gt;<br/>      &lt;%= thing.description %&gt;<br/>    &lt;/div&gt;<br/>  &lt;% end %&gt;<br/>&lt;/div&gt;</span></pre><p id="f681" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">使用一个<code class="fe mp mq mr ms b">&lt;script&gt;</code>标签添加代码来初始化同一页面上的carousel:</p><pre class="kj kk kl km gt mt ms mu mv aw mw bi"><span id="c996" class="mx lt it ms b gy my mz l na nb">&lt;script&gt;<br/>$(document).ready(function(){<br/>  $('.owl-carousel').owlCarousel();<br/>});<br/>&lt;/script&gt;</span></pre><h1 id="5003" class="ls lt it bd lu lv lw lx ly lz ma mb mc jz md ka me kc mf kd mg kf mh kg mi mj bi translated">步骤3:激活页面上的JavaScript</h1><p id="06f6" class="pw-post-body-paragraph kv kw it kx b ky mk ju la lb ml jx ld le mm lg lh li mn lk ll lm mo lo lp lq im bi translated">当您添加这段代码时，有一个小小的警告。因为jQuery现在是使用Webpack加载的，所以您需要确保<code class="fe mp mq mr ms b">&lt;script&gt;</code>代码只在加载完包之后才执行。</p><p id="ae31" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">通常在Rails应用程序中，JS pack标签被加载到应用程序布局中的<code class="fe mp mq mr ms b">&lt;%= yield %&gt;</code>下面。为了确保代码片段能够使用jQuery，它需要包含在JavaScript正下方的一个单独的yield中</p><p id="26c7" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">在应用程序布局上，使用<code class="fe mp mq mr ms b">:after_js</code>键添加产量</p><pre class="kj kk kl km gt mt ms mu mv aw mw bi"><span id="570e" class="mx lt it ms b gy my mz l na nb">&lt;body&gt;<br/>  &lt;%= yield %&gt;<br/>  &lt;%= javascript_pack_tag 'application', 'data-turbolinks-track': 'reload' %&gt;<br/>  &lt;%= yield :after_js %&gt;<br/>&lt;/body&gt;</span></pre><p id="2aa7" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">然后，在带有转盘的页面上，将<code class="fe mp mq mr ms b">&lt;script&gt;</code>标签包装在content_for循环中:</p><pre class="kj kk kl km gt mt ms mu mv aw mw bi"><span id="bb94" class="mx lt it ms b gy my mz l na nb">&lt;%= content_for(:after_js) do %&gt;<br/>  &lt;script&gt;<br/>  $(document).ready(function(){<br/>    $('.owl-carousel').owlCarousel();<br/>  });<br/>  &lt;/script&gt;<br/>&lt;% end %&gt;</span></pre><h1 id="8b74" class="ls lt it bd lu lv lw lx ly lz ma mb mc jz md ka me kc mf kd mg kf mh kg mi mj bi translated">步骤4:定制Owl Carousel</h1><p id="97ac" class="pw-post-body-paragraph kv kw it kx b ky mk ju la lb ml jx ld le mm lg lh li mn lk ll lm mo lo lp lq im bi translated">转盘可以开箱即用，但是在<a class="ae ku" href="https://owlcarousel2.github.io/OwlCarousel2/demos/demos.html" rel="noopener ugc nofollow" target="_blank">插件页面</a>上有很多整洁的定制。例如，这些是我使用的设置:</p><pre class="kj kk kl km gt mt ms mu mv aw mw bi"><span id="4c7b" class="mx lt it ms b gy my mz l na nb">$(document).ready(function(){<br/>$('.owl-carousel').owlCarousel({<br/>  stagePadding: 50,<br/>  loop: true,<br/>  margin:10,<br/>  responsive:{<br/>    0:{<br/>      items:1<br/>     },<br/>    600:{<br/>     items:3<br/>     }<br/>   }<br/> })<br/>});</span></pre><ul class=""><li id="eb38" class="nd ne it kx b ky kz lb lc le nf li ng lm nh lq ni nj nk nl bi translated"><strong class="kx iu">阶段</strong> <strong class="kx iu">填充</strong>向包装器添加左右填充</li><li id="3a61" class="nd ne it kx b ky nm lb nn le no li np lm nq lq ni nj nk nl bi translated"><strong class="kx iu">循环</strong>选项允许连续放映幻灯片</li><li id="4c47" class="nd ne it kx b ky nm lb nn le no li np lm nq lq ni nj nk nl bi translated"><strong class="kx iu">页边空白</strong>依次显示下一张和上一张幻灯片</li><li id="4bd2" class="nd ne it kx b ky nm lb nn le no li np lm nq lq ni nj nk nl bi translated"><strong class="kx iu">响应</strong>选项提供了以像素为单位的断点和要显示的项目数</li></ul><p id="8b5b" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">在这里找到选项的完整列表:<a class="ae ku" href="https://owlcarousel2.github.io/OwlCarousel2/demos/demos.html" rel="noopener ugc nofollow" target="_blank">https://owlcarousel 2 . github . io/owlcarousel 2/demos/demos . html</a></p></div></div>    
</body>
</html>