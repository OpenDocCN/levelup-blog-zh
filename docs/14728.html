<html>
<head>
<title>Three simple steps to crop images in vue.js.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在vue.js中裁剪图像的三个简单步骤。</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/three-simple-steps-to-crop-images-in-vue-js-3f23a018cf3b?source=collection_archive---------32-----------------------#2022-12-19">https://levelup.gitconnected.com/three-simple-steps-to-crop-images-in-vue-js-3f23a018cf3b?source=collection_archive---------32-----------------------#2022-12-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/58d2c240afcb32a732e89371aff9b278.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VhYnlyVWLWMXU-sxrZ5Vpg.jpeg"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">摘自我的博客the-koi.com</figcaption></figure><h2 id="11a0" class="kf kg it bd kh ki kj dn kk kl km dp kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">有时，你不仅想上传图像，而且还想将它们转换成适合的形状，例如，一个预定义的框。我们都从twitter这样的平台上了解到这一点。</h2><p id="7f9b" class="pw-post-body-paragraph lb lc it ld b le lf lg lh li lj lk ll ko lm ln lo ks lp lq lr kw ls lt lu lv im bi translated">为此，我们将创建另一个组件，用户可以在其中调整图像以满足其需求。所有这一切都将通过一个名为<a class="ae lw" href="https://norserium.github.io/vue-advanced-cropper/introduction/getting-started.html" rel="noopener ugc nofollow" target="_blank"> vue advanced cropper </a>的库来实现，它们拥有这个名字所承诺的东西。所以让我们开始吧！</p><h1 id="1518" class="lx kg it bd kh ly lz ma kk mb mc md kn me mf mg kr mh mi mj kv mk ml mm kz mn bi translated">如何在vue中裁剪图像？</h1><p id="671a" class="pw-post-body-paragraph lb lc it ld b le lf lg lh li lj lk ll ko lm ln lo ks lp lq lr kw ls lt lu lv im bi translated">为了在vue 中<strong class="ld iu">裁剪图像，你可以使用一个叫做<strong class="ld iu"> vue-image-cropper </strong>的强大软件包。你只需要首先<strong class="ld iu">上传一张图片</strong>并将其传递给组件，然后<strong class="ld iu">执行其裁剪方法</strong>并<strong class="ld iu">保存结果</strong>。搞定了。</strong></p><p id="f6b2" class="pw-post-body-paragraph lb lc it ld b le mo lg lh li mp lk ll ko mq ln lo ks mr lq lr kw ms lt lu lv im bi translated">我把所有关于vue image cropper的知识打包成一个三步指南。</p><h1 id="7850" class="lx kg it bd kh ly lz ma kk mb mc md kn me mf mg kr mh mi mj kv mk ml mm kz mn bi translated">步骤1:安装vue高级裁剪器</h1><pre class="mt mu mv mw gt mx my mz bn na nb bi"><span id="4946" class="nc kg it my b be nd ne l nf ng">npm install -S vue-advanced-cropper</span></pre><h1 id="3cce" class="lx kg it bd kh ly lz ma kk mb mc md kn me mf mg kr mh mi mj kv mk ml mm kz mn bi translated">步骤2:构建图像裁剪器组件</h1><figure class="mt mu mv mw gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nh"><img src="../Images/4306f5fb659f707688ac82e118c70a7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*sHf8gq4uUTA-zHt1.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">组件的外观示例</figcaption></figure><p id="195a" class="pw-post-body-paragraph lb lc it ld b le mo lg lh li mp lk ll ko mq ln lo ks mr lq lr kw ms lt lu lv im bi translated">以下是这个vue-advanced-cropper示例的vue模板:</p><pre class="mt mu mv mw gt mx my mz bn na nb bi"><span id="1a24" class="nc kg it my b be nd ne l nf ng">&lt;cropper <br/>        ref="cropper" <br/>        class="example-cropper" <br/>        :src="image" /&gt;<br/>&lt;drop-zone<br/>          v-model="image"<br/>          :label="upload"<br/>          :location="location"<br/>          @uploaded="newImagesUploaded"<br/>          class="pb-15"<br/>        /&gt;</span></pre><p id="c524" class="pw-post-body-paragraph lb lc it ld b le mo lg lh li mp lk ll ko mq ln lo ks mr lq lr kw ms lt lu lv im bi translated">要裁剪您的图像，您首先需要像任何其他组件及其CSS一样导入图像裁剪器组件。</p><pre class="mt mu mv mw gt mx my mz bn na nb bi"><span id="364a" class="nc kg it my b be nd ne l nf ng">import { Cropper } from "vue-advanced-cropper";<br/>    import "vue-advanced-cropper/dist/style.css";<br/>    export default {<br/>      name: "vueImageCropperExample",<br/>      components: {<br/>        Cropper<br/>      },<br/>      ...</span></pre><p id="bed2" class="pw-post-body-paragraph lb lc it ld b le mo lg lh li mp lk ll ko mq ln lo ks mr lq lr kw ms lt lu lv im bi translated">作为一个图像源，你可以使用任何你想要的东西，我已经使用了本教程<a class="ae lw" href="https://www.the-koi.com/projects/upload-images-from-vue/" rel="noopener ugc nofollow" target="_blank">中优雅的拖放组件</a>，叫做dropZone。您也可以使用原始的HTML输入。</p><p id="7fbd" class="pw-post-body-paragraph lb lc it ld b le mo lg lh li mp lk ll ko mq ln lo ks mr lq lr kw ms lt lu lv im bi translated">然后给收割者一个参考。或者，您可以向cropper组件添加一些样式，就像我对example-cropper类所做的那样。</p><p id="1187" class="pw-post-body-paragraph lb lc it ld b le mo lg lh li mp lk ll ko mq ln lo ks mr lq lr kw ms lt lu lv im bi translated">你也可以添加其他的<a class="ae lw" href="https://norserium.github.io/vue-advanced-cropper/guides/theming.html#basics" rel="noopener ugc nofollow" target="_blank">主题</a>到裁剪器中，只需要将想要的CSS文件导入到你的组件中。</p><h1 id="8e45" class="lx kg it bd kh ly lz ma kk mb mc md kn me mf mg kr mh mi mj kv mk ml mm kz mn bi translated">步骤3:裁剪图像并保存结果</h1><pre class="mt mu mv mw gt mx my mz bn na nb bi"><span id="ae03" class="nc kg it my b be nd ne l nf ng">methods: {<br/>        cropImage() {<br/>          const result = this.$refs.cropper.getResult();<br/>          const newTab = window.open();<br/>          // for testing open the result in a new tab<br/>          newTab.document.body.innerHTML = `&lt;img src="${result.canvas.toDataURL(<br/>            "image/jpeg"<br/>          )}"&gt;&lt;/img&gt;`;<br/>        }<br/>      }<br/>    };</span></pre><p id="90cf" class="pw-post-body-paragraph lb lc it ld b le mo lg lh li mp lk ll ko mq ln lo ks mr lq lr kw ms lt lu lv im bi translated">要在vue中裁剪您的图像，使用<em class="ni">这个</em>。$ refs . cropper . get result()；</p><p id="acce" class="pw-post-body-paragraph lb lc it ld b le mo lg lh li mp lk ll ko mq ln lo ks mr lq lr kw ms lt lu lv im bi translated">要在vue中裁剪您的图像，使用<em class="ni">这个</em>。$ refs . cropper . get result()；</p><p id="3523" class="pw-post-body-paragraph lb lc it ld b le mo lg lh li mp lk ll ko mq ln lo ks mr lq lr kw ms lt lu lv im bi translated">这将访问cropper组件并从中获取裁剪后的图像！</p><p id="3bf2" class="pw-post-body-paragraph lb lc it ld b le mo lg lh li mp lk ll ko mq ln lo ks mr lq lr kw ms lt lu lv im bi translated">我用下面的裁剪图像方法来做这个。从vue-advanced-cropper中取出图像后，我保存了它，为了测试，你可以简单地在一个新标签中打开它或者再次下载它。</p><p id="e352" class="pw-post-body-paragraph lb lc it ld b le mo lg lh li mp lk ll ko mq ln lo ks mr lq lr kw ms lt lu lv im bi translated">就是这样！在<a class="ae lw" href="https://norserium.github.io/vue-advanced-cropper/introduction/getting-started.html" rel="noopener ugc nofollow" target="_blank">文档</a>中，有很多方法可以扩展你的裁剪器来满足你的需求！</p><p id="d42f" class="pw-post-body-paragraph lb lc it ld b le mo lg lh li mp lk ll ko mq ln lo ks mr lq lr kw ms lt lu lv im bi translated">实现这一点只需要几分钟，您将最终得到一个实用而优雅的vue图像裁剪组件。</p><p id="a353" class="pw-post-body-paragraph lb lc it ld b le mo lg lh li mp lk ll ko mq ln lo ks mr lq lr kw ms lt lu lv im bi translated">下面你可以找到这个vue高级裁剪器例子的完整代码，请随意复制和使用它！</p><pre class="mt mu mv mw gt mx my mz bn na nb bi"><span id="1744" class="nc kg it my b be nd ne l nf ng">&lt;template&gt;<br/>    &lt;v-card width="auto"&gt;<br/>      &lt;div class="example"&gt;<br/>        &lt;cropper ref="cropper" class="example-cropper" :src="image" /&gt;<br/>        &lt;drop-zone<br/>          v-model="image"<br/>          :label="upload"<br/>          :location="location"<br/>          @uploaded="newImagesUploaded"<br/>          class="pb-15"<br/>        /&gt;<br/>        &lt;div class="button-wrapper"&gt;<br/>          &lt;span class="button" @click="cropImage"&gt;Crop image&lt;/span&gt;<br/>        &lt;/div&gt;<br/>      &lt;/div&gt;&lt;/v-card<br/>    &gt;<br/>  &lt;/template&gt;<br/>    <br/>    &lt;script&gt;<br/>    import { Cropper } from "vue-advanced-cropper";<br/>    import "vue-advanced-cropper/dist/style.css";<br/>    export default {<br/>      name: "vueImageCropperExample",<br/>      components: {<br/>        Cropper<br/>      },<br/>      props: {},<br/>      data() {<br/>        return {<br/>          image:<br/>            "https://images.pexels.com/photos/4218687/pexels-photo-4218687.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940"<br/>        };<br/>      },<br/>      methods: {<br/>        cropImage() {<br/>          const result = this.$refs.cropper.getResult();<br/>          const newTab = window.open();<br/>          // for testing open the result in a new tab<br/>          newTab.document.body.innerHTML = `&lt;img src="${result.canvas.toDataURL(<br/>            "image/jpeg"<br/>          )}"&gt;&lt;/img&gt;`;<br/>        }<br/>      }<br/>    };<br/>    &lt;/script&gt;<br/>    <br/>    &lt;style&gt;<br/>    .example-cropper {<br/>      border: solid 1px #eee;<br/>      min-height: 300px;<br/>      width: 100%;<br/>      height: 85vh;<br/>    }<br/>    <br/>    .button-wrapper {<br/>      display: flex;<br/>      justify-content: center;<br/>      margin-top: 17px;<br/>    }<br/>    <br/>    .button {<br/>      color: white;<br/>      font-size: 16px;<br/>      padding: 10px 20px;<br/>      background: #35b392;<br/>      cursor: pointer;<br/>      transition: background 0.5s;<br/>      font-family: Open Sans, Arial;<br/>      margin: 0 10px;<br/>    }<br/>    <br/>    .button:hover {<br/>      background: #38d890;<br/>    }<br/>    <br/>    .button input {<br/>      display: none;<br/>    }<br/>    &lt;/style&gt;</span></pre><h1 id="6551" class="lx kg it bd kh ly lz ma kk mb mc md kn me mf mg kr mh mi mj kv mk ml mm kz mn bi translated">可选步骤4:使用axios将图像上传到API</h1><p id="bf3f" class="pw-post-body-paragraph lb lc it ld b le lf lg lh li lj lk ll ko lm ln lo ks lp lq lr kw ls lt lu lv im bi translated">裁剪完成后，您可能希望将裁剪后的图像上传到API。</p><p id="504f" class="pw-post-body-paragraph lb lc it ld b le mo lg lh li mp lk ll ko mq ln lo ks mr lq lr kw ms lt lu lv im bi translated">上传这些图片最简单的方法是使用axios。Axios是一个了不起的JavaScript网络库，每个前端开发人员都应该知道。所有主流前端框架都有版本，Vue也是如此。</p><p id="a2f6" class="pw-post-body-paragraph lb lc it ld b le mo lg lh li mp lk ll ko mq ln lo ks mr lq lr kw ms lt lu lv im bi translated">要使用axios上传我们的图像，我们只需访问结果并将其转换为Blob(二进制大对象)。我们正在从图像裁剪器的画布元素中创建blob。确保指定正确的文件格式来保存底部的blob！我喜欢用png。然后，我们将这个blob传递给一个带有一些附加参数的formData对象。然后这个blob可以被发送到你的API或者S3桶或者任何你想保存它的地方！</p><pre class="mt mu mv mw gt mx my mz bn na nb bi"><span id="0f44" class="nc kg it my b be nd ne l nf ng">const { canvas } = this.$refs.cropper.getResult();<br/>      if (canvas) {<br/>        const formData = new FormData();<br/>        canvas.toBlob(async blob =&gt; {<br/>          formData.append(<br/>            "File",<br/>            blob,<br/>            "myImageName.png"<br/>          );<br/>          // add optional stuff like an path to save the image<br/>          formData.append("path", "/theKoiIsAwesome");<br/>          // You can use axios, fetch and other libraries instead here<br/>			let config = {<br/>            headers: {<br/>              "Content-Type": "multipart/form-data"<br/>            }<br/>          };<br/>          let res = axios.post(`${ImageResource}`, formData, config);<br/>          console.log("[save bg img]", result);<br/>          // Perhaps you should add the setting appropriate file format here<br/>        }, "image/png");<br/>      }</span></pre><h1 id="12e4" class="lx kg it bd kh ly lz ma kk mb mc md kn me mf mg kr mh mi mj kv mk ml mm kz mn bi translated">结论</h1><p id="eac5" class="pw-post-body-paragraph lb lc it ld b le lf lg lh li lj lk ll ko lm ln lo ks lp lq lr kw ls lt lu lv im bi translated">Vue advanced cropper是一个令人难以置信的库，可以轻松地为您的Vue项目构建防弹图像裁剪功能。这个库不仅易于使用，而且具有高度的可扩展性和可定制性。文档也很容易理解，有很多例子。</p><p id="2889" class="pw-post-body-paragraph lb lc it ld b le mo lg lh li mp lk ll ko mq ln lo ks mr lq lr kw ms lt lu lv im bi translated">我希望我能帮助你，节省你一些时间。</p><p id="94d5" class="pw-post-body-paragraph lb lc it ld b le mo lg lh li mp lk ll ko mq ln lo ks mr lq lr kw ms lt lu lv im bi translated">快乐编码，</p><p id="8512" class="pw-post-body-paragraph lb lc it ld b le mo lg lh li mp lk ll ko mq ln lo ks mr lq lr kw ms lt lu lv im bi translated">亚历克斯</p></div><div class="ab cl nj nk hx nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="im in io ip iq"><p id="6a69" class="pw-post-body-paragraph lb lc it ld b le mo lg lh li mp lk ll ko mq ln lo ks mr lq lr kw ms lt lu lv im bi translated"><em class="ni">最初发表于</em><a class="ae lw" href="https://www.the-koi.com/projects/vue-crop-images-the-elegant-way/" rel="noopener ugc nofollow" target="_blank">T5【https://www.the-koi.com】</a><em class="ni">。</em></p><h1 id="ecde" class="lx kg it bd kh ly lz ma kk mb mc md kn me mf mg kr mh mi mj kv mk ml mm kz mn bi translated">参考</h1><p id="59a9" class="pw-post-body-paragraph lb lc it ld b le lf lg lh li lj lk ll ko lm ln lo ks lp lq lr kw ls lt lu lv im bi translated"><a class="ae lw" href="https://norserium.github.io/vue-advanced-cropper/introduction/getting-started.html" rel="noopener ugc nofollow" target="_blank"> vue高级收割机</a></p><p id="ce6d" class="pw-post-body-paragraph lb lc it ld b le mo lg lh li mp lk ll ko mq ln lo ks mr lq lr kw ms lt lu lv im bi translated"><a class="ae lw" href="https://axios-http.com/" rel="noopener ugc nofollow" target="_blank"> axios </a></p></div></div>    
</body>
</html>