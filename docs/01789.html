<html>
<head>
<title>Object Labelling Tool on Vue.js (Part 1: Drawing Boxes)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Vue.js上的对象标注工具(第1部分:绘图框)</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/object-labelling-tool-on-vue-js-part-1-drawing-boxes-3e0b961aa680?source=collection_archive---------12-----------------------#2020-01-29">https://levelup.gitconnected.com/object-labelling-tool-on-vue-js-part-1-drawing-boxes-3e0b961aa680?source=collection_archive---------12-----------------------#2020-01-29</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="e597" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">制作自定义对象检测模型是一项非常流行的任务。此外，有很多桌面应用程序可以帮助你贴标签。但是如果你想标记远程呢？或者你想用CSS和JS在照片上画矩形？这篇文章会帮助你！</p><p id="390b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">首先，我们用Vue CLI创建一个新项目:</p><pre class="ko kp kq kr gt ks kt ku kv aw kw bi"><span id="10e5" class="kx ky it kt b gy kz la l lb lc">vue create label-demo</span></pre><p id="cd6d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">然后我们启动它并渲染一张照片(我将名为“caterpillar.jpg”的文件放在公共目录中)。不要忘记从<code class="fe ld le lf kt b">#app</code>选择器中删除默认的“页边距-顶部:60px”规则，因为它可能会影响检测框的定位。</p><pre class="ko kp kq kr gt ks kt ku kv aw kw bi"><span id="377e" class="kx ky it kt b gy kz la l lb lc">&lt;template&gt;<br/>    &lt;div id="app"&gt;<br/>        &lt;h1&gt;Object Labelling Demo&lt;/h1&gt;<br/>        <strong class="kt iu">&lt;div id="image-wrapper" :style="{backgroundImage: `url(caterpillar.jpg)`}"&gt;<br/>        &lt;/div&gt;</strong><br/>    &lt;/div&gt;<br/>&lt;/template&gt;<br/>...<br/>&lt;style lang="scss" scoped&gt;<br/>    #app {<br/>        font-family: 'Avenir', Helvetica, Arial, sans-serif;<br/>        -webkit-font-smoothing: antialiased;<br/>        -moz-osx-font-smoothing: grayscale;<br/>        text-align: center;<br/>        color: #2c3e50;<br/><br/>        <strong class="kt iu">#image-wrapper {<br/>            height: 640px;<br/>            width: 640px;<br/>            background-repeat: no-repeat;<br/>            position: relative;<br/>        }</strong><br/>    }<br/>&lt;/style&gt;</span></pre><p id="7330" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">请注意，此演示假设您的图像具有相同的宽高比(有意义的是，培训配置可能要求您为所有照片确定该值)。之后，将呈现一个以漂亮的毛毛虫图像作为背景图像的div。</p><figure class="ko kp kq kr gt lh gh gi paragraph-image"><div class="gh gi lg"><img src="../Images/1d5e3c9d0c57856df37e63331ba130d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*MyNk10umNQgN5SARkaLrSA.jpeg"/></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk translated">这是一张我们想要检测的图像:)</figcaption></figure><p id="e52f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在是时候放置我们的第一个检测盒了。我们第一次用静态值渲染它。我们将创建一个名为“盒子”的组件</p><pre class="ko kp kq kr gt ks kt ku kv aw kw bi"><span id="a491" class="kx ky it kt b gy kz la l lb lc">&lt;template&gt;<br/>    &lt;div class="box-wrapper"&gt;<br/>        &lt;div class="box" :style="{top: bTop + 'px', left: bLeft + 'px', width: bWidth + 'px', height: bHeight + 'px'}"&gt;<br/>        &lt;/div&gt;<br/>    &lt;/div&gt;<br/>&lt;/template&gt;<br/><br/>&lt;script&gt;<br/>    export default {<br/>        name: "Box",<br/>        props: [<br/>            'b-top', 'b-left', 'b-width', 'b-height'<br/>        ]<br/>    }<br/>&lt;/script&gt;<br/><br/>&lt;style lang="scss" scoped&gt;<br/>    .box {<br/>        position: absolute;<br/>        border: 2px #90ee90 solid;<br/><br/>        &amp;:hover, &amp;.active {<br/>            background-color: rgba(144, 238, 144, .2);<br/>        }<br/><br/>        z-index: 3;<br/>    }<br/>&lt;/style&gt;</span></pre><p id="492b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">之后，我们将导入这个组件并使用一些静态数据。这段代码将在毛毛虫周围呈现绿色方框。</p><pre class="ko kp kq kr gt ks kt ku kv aw kw bi"><span id="c5de" class="kx ky it kt b gy kz la l lb lc">&lt;template&gt;<br/>    &lt;div id="app"&gt;<br/>        &lt;h1&gt;Object Labelling Demo&lt;/h1&gt;<br/>        &lt;div id="image-wrapper" :style="{backgroundImage: `url(caterpillar.jpg)`}"&gt;<br/>          <strong class="kt iu">&lt;Box b-top="135" b-left="200" b-width="190" b-height="390"/&gt;</strong><br/>        &lt;/div&gt;<br/>    &lt;/div&gt;<br/>&lt;/template&gt;<br/><br/>&lt;script&gt;<br/>    <strong class="kt iu">import Box from "./components/Box";</strong><br/>    export default {<br/>        name: 'app',<br/>        <strong class="kt iu">components: {Box},</strong><br/>    }<br/>&lt;/script&gt;</span></pre><p id="c3f9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">结果将是这样的</p><figure class="ko kp kq kr gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi lo"><img src="../Images/f6473261fcb976e7dce29293f6b8234d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c_pRdSkZ64uJAbNoInV6Tg.png"/></div></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk translated">检测到！</figcaption></figure><p id="210d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在终于来画点什么了！实际上这很简单:我们应该添加一些方法，通过创建新的盒子并在<code class="fe ld le lf kt b">mousemove</code>上改变它的大小来对<code class="fe ld le lf kt b">mousedown</code> - <code class="fe ld le lf kt b">mouseup</code>事件做出反应。在<code class="fe ld le lf kt b">mouseup</code>之后，我们将刚刚创建的盒子添加到数据中(它的宽度超过5px)。不要忘记从数据中渲染所有的盒子。代码如下:</p><pre class="ko kp kq kr gt ks kt ku kv aw kw bi"><span id="66cb" class="kx ky it kt b gy kz la l lb lc">&lt;template&gt;<br/>    &lt;div id="app"&gt;<br/>        &lt;div id="image-wrapper" :style="{backgroundImage: `url(caterpillar.jpg)`}" @mousedown="startDrawingBox" @mousemove="changeBox" @mouseup="stopDrawingBox"&gt;<br/>            &lt;Box v-if="drawingBox.active" :b-width="drawingBox.width" :b-height="drawingBox.height" :b-top="drawingBox.top" :b-left="drawingBox.left"/&gt;<br/>            &lt;Box v-for="(<em class="lt">box</em>, <em class="lt">i</em>) in boxes" :key="<em class="lt">i</em>" :b-top="<em class="lt">box</em>.top" :b-left="<em class="lt">box</em>.left" :b-width="<em class="lt">box</em>.width" :b-height="<em class="lt">box</em>.height"/&gt;<br/>        &lt;/div&gt;<br/>    &lt;/div&gt;<br/>&lt;/template&gt;<br/><br/>&lt;script&gt;<br/>    import Box from "./components/Box";<br/>    import {pick} from 'lodash';<br/><br/>    const getCoursorLeft = (e) =&gt; {<br/>        return e.pageX - 10;<br/>    };<br/><br/>    const getCoursorTop = (e) =&gt; {<br/>        return e.pageY - 10;<br/>    };<br/><br/>    export default {<br/>        name: 'app',<br/>        components: {Box},<br/>        data: function () {<br/>            return {<br/>                drawingBox: {<br/>                    active: false,<br/>                    top: 0,<br/>                    left: 0,<br/>                    height: 0,<br/>                    width: 0<br/>                },<br/>                boxes: []<br/>            }<br/>        },<br/>        methods: {<br/>            startDrawingBox(e) {<br/>                this.drawingBox = {<br/>                    width: 0,<br/>                    height: 0,<br/>                    top: getCoursorTop(e),<br/>                    left: getCoursorLeft(e),<br/>                    active: true,<br/>                };<br/>            },<br/>            changeBox(e) {<br/>                if (this.drawingBox.active) {<br/>                    this.drawingBox = {<br/>                        ...this.drawingBox,<br/>                        width: getCoursorLeft(e) - this.drawingBox.left,<br/>                        height: getCoursorTop(e) - this.drawingBox.top,<br/>                    };<br/>                }<br/>            },<br/>            stopDrawingBox() {<br/>                if (this.drawingBox.active) {<br/>                    if (this.drawingBox.width &gt; 5) {<br/>                        this.boxes.push({...pick(this.drawingBox, ['width', 'height', 'top', 'left'])});<br/>                    }<br/>                    this.drawingBox = {<br/>                        active: false,<br/>                        top: 0,<br/>                        left: 0,<br/>                        height: 0,<br/>                        width: 0<br/>                    }<br/>                }<br/>            },<br/>        }<br/>    }<br/>&lt;/script&gt;<br/>...</span></pre><p id="a6ad" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这就是你将在浏览器中看到的</p><figure class="ko kp kq kr gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi lu"><img src="../Images/0e69e6a43cacd230e26db87324be867b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*wFzLJWuquU74XKe90uQUMQ.gif"/></div></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk translated">冥想的</figcaption></figure><p id="a056" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我意识到整篇文章太长了，所以下次我会向你展示我是如何移除盒子并贴上标签的:)</p></div></div>    
</body>
</html>