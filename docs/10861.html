<html>
<head>
<title>Multi-Tenant Application</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">多租户应用</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/multi-tenant-application-a29153d31c5a?source=collection_archive---------2-----------------------#2022-01-18">https://levelup.gitconnected.com/multi-tenant-application-a29153d31c5a?source=collection_archive---------2-----------------------#2022-01-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="d3ad" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kl">软件架构|</em><a class="ae km" href="https://blackthorn.ai/" rel="noopener ugc nofollow" target="_blank">T3】black thorn . aiT5】</a></p><p id="8bf5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> <em class="kl">多租户</em> </strong>概念是指众多用户共享计算、网络和存储资源，但看不到彼此的数据。多租户应用是为每组用户(所谓的<strong class="jp ir"> <em class="kl">租户</em> </strong>)定制的，而整个架构和核心功能保持不变。多租户是软件即服务(SaaS)供应商的一种典型方法。</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi kn"><img src="../Images/3a364af1fa639e4d695771ad4c294e6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y1EBj104oKMgdPfeXEdv6g.png"/></div></div><figcaption class="kz la gj gh gi lb lc bd b be z dk translated">多租户应用程序—图片由作者提供。版权所有</figcaption></figure><p id="974b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">听起来像是明智的商业决策？</p><p id="f917" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">是的，确实如此。资源利用率增加，因此，项目所有权通常更合理。但它不能用于每个应用程序。让我解释一下多租户是如何工作的，它与单一租户有何不同，以及何时应用它。</p></div><div class="ab cl ld le hu lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="ij ik il im in"><h1 id="27e3" class="lk ll iq bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">用例</h1><p id="c672" class="pw-post-body-paragraph jn jo iq jp b jq mi js jt ju mj jw jx jy mk ka kb kc ml ke kf kg mm ki kj kk ij bi translated">多租户架构最适合以下类型的应用:</p><ol class=""><li id="0b43" class="mn mo iq jp b jq jr ju jv jy mp kc mq kg mr kk ms mt mu mv bi translated">SaaS(软件即服务)或AaaS(应用即服务)</li><li id="ee41" class="mn mo iq jp b jq mw ju mx jy my kc mz kg na kk ms mt mu mv bi translated">平台即服务</li><li id="3924" class="mn mo iq jp b jq mw ju mx jy my kc mz kg na kk ms mt mu mv bi translated">IaaS(基础设施即服务)</li><li id="acc9" class="mn mo iq jp b jq mw ju mx jy my kc mz kg na kk ms mt mu mv bi translated">对于多个客户端使用相同算法堆栈的所有其他应用程序。主要功能要么是相同的，要么是模块化的，可以根据客户的任何需求进行定制。</li></ol></div><div class="ab cl ld le hu lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="ij ik il im in"><h1 id="fc17" class="lk ll iq bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">多租户与单租户</h1><p id="70b0" class="pw-post-body-paragraph jn jo iq jp b jq mi js jt ju mj jw jx jy mk ka kb kc ml ke kf kg mm ki kj kk ij bi translated">为了选择典型的架构，我们必须理解两者是如何工作的。</p><h2 id="ea69" class="nb ll iq bd lm nc nd dn lq ne nf dp lu jy ng nh ly kc ni nj mc kg nk nl mg nm bi translated">1.单租户</h2><p id="109a" class="pw-post-body-paragraph jn jo iq jp b jq mi js jt ju mj jw jx jy mk ka kb kc ml ke kf kg mm ki kj kk ij bi translated">每个用户都获得专用的计算、网络和存储资源。每个环境都是单独开发和管理的。本质上，这个选项不允许任何共享。</p><h2 id="96e5" class="nb ll iq bd lm nc nd dn lq ne nf dp lu jy ng nh ly kc ni nj mc kg nk nl mg nm bi translated"><strong class="ak"> 2。多租户</strong></h2><p id="72e4" class="pw-post-body-paragraph jn jo iq jp b jq mi js jt ju mj jw jx jy mk ka kb kc ml ke kf kg mm ki kj kk ij bi translated">该模型支持在一个环境中托管多个客户，并重用核心应用程序功能。每个房客都是孤立的，其他人看不见。居民是逻辑上分开的，不是物理上分开的；因此，需要更少的硬件投资。其他优势包括简化的安全支持和更实惠的许可。在许多不同的解决方案上花费更少的时间/精力意味着在核心解决方案上投入更多的时间/精力。在这种情况下，整体质量胜出。</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi nn"><img src="../Images/bbbc2bc2241eaf14b8ad69ac1d6090ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mGAjPpJLyUKRL4-qFnCkyg.png"/></div></div><figcaption class="kz la gj gh gi lb lc bd b be z dk translated">多租户和单租户应用程序—图片由作者提供。版权所有</figcaption></figure></div><div class="ab cl ld le hu lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="ij ik il im in"><h1 id="7b56" class="lk ll iq bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">示例解决方案架构</h1><p id="1f21" class="pw-post-body-paragraph jn jo iq jp b jq mi js jt ju mj jw jx jy mk ka kb kc ml ke kf kg mm ki kj kk ij bi translated">让我们继续看一个简单但真实的多租户解决方案。</p><p id="d2dd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这里的数据层由单个共享云SQL (MySQL)实例和对象存储组成。客户端(租户)使用一系列共享的云功能，这些功能组成了无服务器业务层。</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi no"><img src="../Images/62fd5ffa34ba283bef21d19738ab1bb3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FUhDZpA34_XbTO1YDnTiig.png"/></div></div><figcaption class="kz la gj gh gi lb lc bd b be z dk translated">Google Cloud上的无服务器单数据库多租户架构——图片由作者提供。版权所有</figcaption></figure><p id="bed5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">等等……一个数据库？</p></div><div class="ab cl ld le hu lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="ij ik il im in"><h1 id="b79b" class="lk ll iq bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated"><strong class="ak">多租户应用中的数据管理</strong></h1><p id="c9f3" class="pw-post-body-paragraph jn jo iq jp b jq mi js jt ju mj jw jx jy mk ka kb kc ml ke kf kg mm ki kj kk ij bi translated">根据存储数据的方式，可能有不同的多租户数据库解决方案:</p><h2 id="448c" class="nb ll iq bd lm nc nd dn lq ne nf dp lu jy ng nh ly kc ni nj mc kg nk nl mg nm bi translated">1.单一数据库+单一模式</h2><p id="84f5" class="pw-post-body-paragraph jn jo iq jp b jq mi js jt ju mj jw jx jy mk ka kb kc ml ke kf kg mm ki kj kk ij bi translated">=一个数据库模式包含所有租户的数据</p><p id="b1a5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这种情况下，关心租户的数据分离是最重要的。添加像<em class="kl"> TenantID </em>或<em class="kl"> ClientID </em>这样的数据库索引来划分租户的行。</p><p id="d6b0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">好处:</strong></p><ul class=""><li id="1304" class="mn mo iq jp b jq jr ju jv jy mp kc mq kg mr kk np mt mu mv bi translated">维护一个数据库很容易(与其他选项相比)</li><li id="482c" class="mn mo iq jp b jq mw ju mx jy my kc mz kg na kk np mt mu mv bi translated">您可以添加任意数量的新客户(添加就像在表中键入新记录一样简单)。</li></ul><p id="cbcd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">陷阱:</strong></p><ul class=""><li id="bc1c" class="mn mo iq jp b jq jr ju jv jy mp kc mq kg mr kk np mt mu mv bi translated">对于可能需要不同数据使用模式的不同客户，没有太大的灵活性。当非典型客户到来时，需要进行修补。</li><li id="8b7a" class="mn mo iq jp b jq mw ju mx jy my kc mz kg na kk np mt mu mv bi translated">你冒着浪费时间和精力试图正确分离权限的风险</li><li id="4725" class="mn mo iq jp b jq mw ju mx jy my kc mz kg na kk np mt mu mv bi translated">备份和恢复可能会带来额外的问题。因为它包含来自其他客户的数据，所以不容易删除和重新创建表。不得不搜索并覆盖需要的行，这真的是一件痛苦的事情。</li></ul><p id="c61d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">判决:</strong></p><p id="a248" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于执行匹配操作的客户来说，这是一个绝佳的选择。</p><h2 id="7dab" class="nb ll iq bd lm nc nd dn lq ne nf dp lu jy ng nh ly kc ni nj mc kg nk nl mg nm bi translated">2.单个数据库+多个模式</h2><p id="50be" class="pw-post-body-paragraph jn jo iq jp b jq mi js jt ju mj jw jx jy mk ka kb kc ml ke kf kg mm ki kj kk ij bi translated">在这个场景中，需要多个表来存储来自不同客户端的数据。模式变成了包含特定表、过程和权限的“名称空间”。</p><p id="8eb2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">好处:</strong></p><ul class=""><li id="176c" class="mn mo iq jp b jq jr ju jv jy mp kc mq kg mr kk np mt mu mv bi translated">模式支持DBMS级别的<strong class="jp ir">访问共享</strong>，所以我们不需要做任何进一步的工作(我们节省了精力和金钱，哈利路亚！)</li><li id="d17f" class="mn mo iq jp b jq mw ju mx jy my kc mz kg na kk np mt mu mv bi translated">更少的数据库—更少的硬件资源。又一次胜利！</li><li id="9509" class="mn mo iq jp b jq mw ju mx jy my kc mz kg na kk np mt mu mv bi translated">良好的<strong class="jp ir">延展性</strong>。如果您需要一个新的模式，您可以基于另一个模式构建它。每一次，你都可以随意修改。</li></ul><p id="ed28" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">陷阱:</strong></p><ul class=""><li id="ab0d" class="mn mo iq jp b jq jr ju jv jy mp kc mq kg mr kk np mt mu mv bi translated">来自几个客户端的数据保存在一起，因为表是逻辑上而不是物理上划分的；</li><li id="891b" class="mn mo iq jp b jq mw ju mx jy my kc mz kg na kk np mt mu mv bi translated">备份和恢复都存在问题。我们有一个数据库，如果某个元素失败了，所有东西都可以回滚到以前的状态，这是不可接受的。然后，您可能需要合并新旧信息。容易吗？一点也不，因为这不仅仅是恢复。</li></ul><p id="2b33" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">判决:</strong></p><p id="6b11" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于愿意在共享环境中工作的客户来说，这是一个绝佳的选择。</p><h2 id="f672" class="nb ll iq bd lm nc nd dn lq ne nf dp lu jy ng nh ly kc ni nj mc kg nk nl mg nm bi translated">3.独立的数据库</h2><p id="11ac" class="pw-post-body-paragraph jn jo iq jp b jq mi js jt ju mj jw jx jy mk ka kb kc ml ke kf kg mm ki kj kk ij bi translated">另一种可能的模型是当代码和数据在概念上(也可能是物理上)在客户端之间共享时(通过公共用户界面和业务逻辑)。</p><p id="93e9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">好处:</strong></p><ul class=""><li id="96c5" class="mn mo iq jp b jq jr ju jv jy mp kc mq kg mr kk np mt mu mv bi translated"><strong class="jp ir">扩展性</strong>一键完成。要添加新的客户端，您只需配置新的存储</li><li id="1861" class="mn mo iq jp b jq mw ju mx jy my kc mz kg na kk np mt mu mv bi translated"><strong class="jp ir">缩放</strong>很简单。您可以支持不同服务器上的客户端数据库</li><li id="42fd" class="mn mo iq jp b jq mw ju mx jy my kc mz kg na kk np mt mu mv bi translated"><strong class="jp ir">定制</strong>。您可以更改每个客户端的设置(甚至将存储移动到不同的DBMS)</li><li id="028f" class="mn mo iq jp b jq mw ju mx jy my kc mz kg na kk np mt mu mv bi translated">简单的<strong class="jp ir">备份</strong>。即使一个组件出现故障，其他组件也不会受到影响。</li></ul><p id="375c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">陷阱:</strong></p><ul class=""><li id="5673" class="mn mo iq jp b jq jr ju jv jy mp kc mq kg mr kk np mt mu mv bi translated">不便宜。单台服务器支持的存储量是有限的。你可能需要更多的硬件(比所有东西都放在一个地方多得多)。请记住，更多的硬件=更多的管理员、服务器空间和电力开支。</li><li id="78dd" class="mn mo iq jp b jq mw ju mx jy my kc mz kg na kk np mt mu mv bi translated">还是那句话，不便宜。当您的服务器托管许多位置时，总容量大于RAM大小；数据溢出到交换文件中，导致对硬盘的访问非常缓慢。解决方案是购买额外的服务器。</li></ul><p id="7fad" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">判决:</strong></p><p id="f779" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于安全第一，愿意付钱的客户(比如银行)，这是最好的选择。</p></div><div class="ab cl ld le hu lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="ij ik il im in"><h1 id="ff00" class="lk ll iq bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">外卖食品</h1><p id="b032" class="pw-post-body-paragraph jn jo iq jp b jq mi js jt ju mj jw jx jy mk ka kb kc ml ke kf kg mm ki kj kk ij bi translated">我希望您已经掌握了足够多的关于多租户的信息，能够根据您的需求做出正确的选择。</p><p id="50ff" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">以下是这篇文章的要点:</p><ol class=""><li id="2da2" class="mn mo iq jp b jq jr ju jv jy mp kc mq kg mr kk ms mt mu mv bi translated"><strong class="jp ir"/><strong class="jp ir">多租户环境</strong>托管共享计算、网络和存储资源的独立用户。</li><li id="c116" class="mn mo iq jp b jq mw ju mx jy my kc mz kg na kk ms mt mu mv bi translated">在多租户模式下运行时，您将从成本节约、资源利用率提高、可重复使用的数据处理元素、简单的版本管理和较低的维护成本中获益。</li><li id="c506" class="mn mo iq jp b jq mw ju mx jy my kc mz kg na kk ms mt mu mv bi translated">另一方面，你应该准备好面对诸如复杂的开发、高发布风险、有限的个性化、脆弱的安全性、较低的性能和复杂的变更等缺点。</li><li id="eb0d" class="mn mo iq jp b jq mw ju mx jy my kc mz kg na kk ms mt mu mv bi translated">在申请多租户场景之前要三思。但是，在为<strong class="jp ir"> SaaS、AaaS、PaaS、IaaS </strong>以及其他核心功能对所有用户都相同或严格模块化并可轻松满足典型客户需求的应用选择它时，您可以确信无疑。</li></ol><p id="c659" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">访问<a class="ae km" href="https://blackthorn.ai/" rel="noopener ugc nofollow" target="_blank">我们的网站</a>了解更多人工智能解决方案！</p><blockquote class="nq nr ns"><p id="ff91" class="jn jo kl jp b jq jr js jt ju jv jw jx nt jz ka kb nu kd ke kf nv kh ki kj kk ij bi translated">版权所有<br/>Oleksandr(Alex)Gurbych(<a class="ae km" href="https://www.linkedin.com/in/ogurbych/" rel="noopener ugc nofollow" target="_blank">LinkedIn</a>，<a class="ae km" href="mailto:gurbycholeksandr@gmail.com" rel="noopener ugc nofollow" target="_blank">Gmail</a>)<br/>2022年1月18日</p></blockquote></div></div>    
</body>
</html>