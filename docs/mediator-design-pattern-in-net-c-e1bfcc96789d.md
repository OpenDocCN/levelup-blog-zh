# ä¸­ä»‹è®¾è®¡æ¨¡å¼ã€‚NET C#

> åŸæ–‡ï¼š<https://levelup.gitconnected.com/mediator-design-pattern-in-net-c-e1bfcc96789d>

## è®¾è®¡æ¨¡å¼

## ä¸­äº†è§£ä¸­ä»‹å™¨è®¾è®¡æ¨¡å¼ã€‚NET C#ä¸ä»£ç ç¤ºä¾‹ã€‚

![](img/914a92f3edfd198e7bda5665c75cce7e.png)

ç…§ç‰‡ç”± [Jonathan](https://unsplash.com/@isodme?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) åœ¨ [Unsplash](https://unsplash.com/?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) ä¸Šæ‹æ‘„ï¼Œç”± [Ahmed Tarek](https://medium.com/@eng_ahmed.tarek) è°ƒæ•´

# ä¸­ä»‹è®¾è®¡æ¨¡å¼å®šä¹‰

**ä¸­ä»‹è®¾è®¡æ¨¡å¼**æ˜¯è¡Œä¸ºè®¾è®¡æ¨¡å¼ä¹‹ä¸€ã€‚

æ ¹æ®[ç»´åŸºç™¾ç§‘](https://en.wikipedia.org/wiki/Mediator_pattern)ï¼Œå®šä¹‰å¦‚ä¸‹:

> ä¸­ä»‹æ¨¡å¼çš„æœ¬è´¨æ˜¯â€œå®šä¹‰ä¸€ä¸ªå°è£…äº†ä¸€ç»„å¯¹è±¡å¦‚ä½•äº¤äº’çš„å¯¹è±¡â€ã€‚å®ƒé€šè¿‡é˜²æ­¢å¯¹è±¡æ˜¾å¼åœ°ç›¸äº’å¼•ç”¨æ¥ä¿ƒè¿›æ¾æ•£è€¦åˆï¼Œå¹¶å…è®¸å®ƒä»¬çš„äº¤äº’ç‹¬ç«‹å˜åŒ–ã€‚å®¢æˆ·ç«¯ç±»å¯ä»¥ä½¿ç”¨ä¸­ä»‹å‘å…¶ä»–å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯ï¼Œå¹¶å¯ä»¥é€šè¿‡ä¸­ä»‹ç±»ä¸Šçš„äº‹ä»¶ä»å…¶ä»–å®¢æˆ·ç«¯æ¥æ”¶æ¶ˆæ¯ã€‚

å› æ­¤ï¼Œç®€å•åœ°è¯´ï¼Œ**ä¸­ä»‹è®¾è®¡æ¨¡å¼**ç”¨äºç®¡ç†ä¸€ç»„å¯¹è±¡(ç›¸ä¼¼æˆ–ä¸ç›¸ä¼¼)ä¹‹é—´çš„äº¤äº’ï¼Œä¿æŒå¯¹è±¡ç›¸äº’éš”ç¦»ã€‚

ä¸ºäº†ç†è§£è¿™ä¸€ç‚¹ï¼Œæˆ‘ç”¨ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥è§£é‡Šä¸€ä¸‹ã€‚

å‡è®¾ä½ æ­£åœ¨å®ç°ä¸€ä¸ªèŠå¤©å®¤ã€‚å› æ­¤ï¼Œä½ æœ‰æ— é™æ•°é‡çš„ç”¨æˆ·å¯ä»¥åŠ å…¥èŠå¤©å®¤ï¼Œä¸€æ—¦ä»»ä½•ç”¨æˆ·å‘é€æ¶ˆæ¯ï¼Œè¯¥æ¶ˆæ¯åº”è¯¥è¢«èŠå¤©å®¤çš„æ‰€æœ‰å…¶ä»–ç”¨æˆ·æ¥æ”¶ã€‚

å› æ­¤ï¼Œå®ç°è¿™ä¸ªï¼Œä½ å°†æ‹¥æœ‰ä¸€ä¸ªå¸¦æœ‰`SendMessage`æ–¹æ³•çš„`User`ç±»ã€‚

ä½†æ˜¯ï¼Œæ‚¨ä»ç„¶éœ€è¦è®¿é—®å…¶ä»–ç”¨æˆ·ï¼Œä»¥ä¾¿æ‚¨å¯ä»¥å°†æ¶ˆæ¯å‘é€ç»™ä»–ä»¬ã€‚æ­¤å¤–ï¼Œæ¯å½“ç”¨æˆ·ç¦»å¼€èŠå¤©å®¤æ—¶ï¼Œæ‚¨è¿˜éœ€è¦å°†è¯¥ç”¨æˆ·ä»æ‰€æœ‰å…¶ä»–ç”¨æˆ·ä¸­åˆ é™¤ï¼Œè¿™æ ·ä»–ä»¬å°±ä¸ä¼šç»™ä»–å‘é€æ¶ˆæ¯ã€‚

æ‚¨æœ‰ä¸æ­¢ä¸€ç§æ–¹æ³•æ¥å®ç°è¿™ä¸€ç‚¹:

1.  åœ¨æ¯ä¸ªç”¨æˆ·å†…éƒ¨å®šä¹‰ä¸€ä¸ªç”¨æˆ·åˆ—è¡¨ï¼Œå¹¶åœ¨ç”¨æˆ·è¿›å…¥æˆ–ç¦»å¼€èŠå¤©å®¤æ—¶æ›´æ–°è¿™äº›åˆ—è¡¨ã€‚
2.  ä½¿ç”¨å¦ä¸€ä¸ªç±»æˆ–æ¨¡å—ä½œä¸ºä¸­é—´äººæ¥å¤„ç†ç”¨æˆ·åˆ—è¡¨ä»¥åŠä¸åŒç”¨æˆ·ä¹‹é—´å‘é€å’Œæ¥æ”¶æ¶ˆæ¯çš„æ–¹å¼ã€‚

ç¬¬ä¸€ç§é€‰æ‹©å¯è¡Œï¼Œä½†æ˜¯ä¸å¥½ï¼Œå› ä¸º:

1.  `User`ç±»ä¼šåšå¤ªå¤šå®é™…ä¸Šä¸å…¶ä¸»è¦å·¥ä½œæ— å…³çš„äº‹æƒ…ã€‚
2.  æ¯ä¸ª`User`ç°åœ¨éƒ½çŸ¥é“å…¶ä»–ç”¨æˆ·ï¼Œè¿™æ˜¯ä¸ç¬¦åˆé€»è¾‘çš„ã€‚
3.  å¦‚æœæˆ‘ä»¬æƒ³è¦åº”ç”¨ä¸€äº›å•†ä¸šè§„åˆ™æ¥å†³å®šå…è®¸å“ªä¸ªç”¨æˆ·ä¸å“ªä¸ªç”¨æˆ·é€šä¿¡ï¼Œé‚£å°†ä¼šéå¸¸å›°éš¾ã€‚
4.  ç»´æŠ¤æ‰€æœ‰ç”¨æˆ·åˆ—è¡¨çš„å¤„ç†é‡å¤ªå¤§ã€‚

ç°åœ¨ï¼Œå¦‚æœæˆ‘ä»¬æ¢ç´¢ç¬¬äºŒç§é€‰æ‹©:

1.  ç±»å®Œæˆäº†å®ƒçš„å·¥ä½œï¼Œä¹Ÿæ˜¯å”¯ä¸€çš„å·¥ä½œã€‚
2.  ç»´æŠ¤ç”¨æˆ·åˆ—è¡¨çš„æ‰€æœ‰é€»è¾‘éƒ½é›†ä¸­åœ¨ä¸€ä¸ªç±»æˆ–æ¨¡å—ä¸­ã€‚
3.  è¿™ä½¿æˆ‘ä»¬èƒ½å¤Ÿåœ¨éœ€è¦æ—¶è½»æ¾åº”ç”¨ä¸šåŠ¡è§„åˆ™å’Œèšåˆã€‚

å¦‚ä½ æ‰€è§ï¼Œé€‰æ‹©ç¬¬äºŒç§ä¼šæ›´å¥½ã€‚ç°åœ¨ï¼Œè®©æˆ‘å‘Šè¯‰ä½ ï¼Œä½ å°†åœ¨ç¬¬äºŒä¸ªé€‰é¡¹ä¸­å®ç°çš„æ˜¯**ä¸­ä»‹è®¾è®¡æ¨¡å¼**ã€‚

![](img/dae42316c04548aad197e34b378e3bf1.png)[](https://medium.com/subscribe/@eng_ahmed.tarek) [## ğŸ”¥è®¢é˜…è‰¾å“ˆè¿ˆå¾·çš„æ—¶äº‹é€šè®¯ğŸ”¥

### è®¢é˜…è‰¾å“ˆè¿ˆå¾·çš„æ—¶äº‹é€šè®¯ğŸ“°ç›´æ¥è·å¾—æœ€ä½³å®è·µã€æ•™ç¨‹ã€æç¤ºã€æŠ€å·§å’Œè®¸å¤šå…¶ä»–å¾ˆé…·çš„ä¸œè¥¿â€¦

medium.com](https://medium.com/subscribe/@eng_ahmed.tarek) ![](img/dae42316c04548aad197e34b378e3bf1.png)

# ä¸­ä»‹è®¾è®¡æ¨¡å¼ç±»å›¾

å…³äº**ä¸­ä»‹è®¾è®¡æ¨¡å¼**ï¼Œæˆ‘æ³¨æ„åˆ°å®ƒå¯ä»¥è¢«å®ç°æˆå¤šç§é£æ ¼ã€‚

æœ‰æ—¶ä½ å¯ä»¥ä½¿ç”¨**äº‹ä»¶**ã€**å§”æ‰˜**æˆ–**ç›´æ¥æ–¹æ³•**ã€‚æœ‰æ—¶ï¼Œæ‚¨å¯ä»¥åœ¨è®¸å¤šåœ°æ–¹ä½¿ç”¨**ä¸­ä»‹**å¹¶å°†å…¶ä½œä¸ºä¾èµ–é¡¹æ³¨å…¥ï¼Œæˆ–è€…æ‚¨å¯ä»¥ä»…åœ¨é›†ä¸­å¼ç®¡ç†å™¨ä¸­ä½¿ç”¨å®ƒã€‚

å› æ­¤ï¼Œè¿™ä½¿æˆ‘å°†**ä¸­ä»‹è®¾è®¡æ¨¡å¼**è§†ä¸ºä¸€ä¸ªæ¦‚å¿µè€Œä¸æ˜¯ä¸€ä¸ªæ¨¡å¼ã€‚

ç„¶è€Œï¼Œä¸ºäº†å¸®åŠ©ä½ æƒ³è±¡**ä¸­ä»‹è®¾è®¡æ¨¡å¼**å¯èƒ½æ˜¯æ€æ ·çš„ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªæ¥è‡ª[ç»´åŸºç™¾ç§‘](https://en.wikipedia.org/wiki/Mediator_pattern)çš„ç±»å›¾ã€‚

![](img/4cdc384e1a4daf3a7e6b4e9fbd843787.png)

[ä¸­ä»‹è¡Œä¸ºè®¾è®¡æ¨¡å¼](https://en.wikipedia.org/wiki/Mediator_pattern)ï¼Œç”± [Ahmed Tarek](https://medium.com/@eng_ahmed.tarek) è°ƒæ•´

![](img/0fdde0c5543c9946ee7ddef5cbbc1389.png)

ç”± [Arnold Francisca](https://unsplash.com/@clark_fransa?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) åœ¨ [Unsplash](https://unsplash.com/?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) ä¸Šæ‹æ‘„ï¼Œç”± [Ahmed Tarek](https://medium.com/@eng_ahmed.tarek) è°ƒæ•´

# ä»£ç ç¤ºä¾‹

ç°åœ¨æ˜¯æ—¶å€™æ·±å…¥ä¸€äº›ä»£ç æ¥ç†è§£**ä¸­ä»‹è®¾è®¡æ¨¡å¼**äº†ã€‚æˆ‘ä»¬ç°åœ¨è¦åšçš„æ˜¯å®ç°**èŠå¤©å®¤**çš„ä¾‹å­ã€‚

å…ˆè¯´`User`ç±»ã€‚

æˆ‘ä»¬åœ¨è¿™é‡Œå¯ä»¥æ³¨æ„åˆ°:

1.  æˆ‘ä»¬å®šä¹‰äº†`MessageBroadcastedEventHandler`å§”æ‰˜ä½œä¸ºæ¯ä¸ªç”¨æˆ·å‘é€æ¶ˆæ¯æ—¶è§¦å‘çš„äº‹ä»¶ã€‚
2.  é‚£ä¹ˆå¾ˆæ˜æ˜¾ï¼Œæˆ‘ä»¬åœ¨`User`ç±»ä¸­å®šä¹‰äº†`event MessageBroadcastedEventHandler MessageBroadcasted`ã€‚
3.  æˆ‘ä»¬è¿˜å°†`protected void OnMessageBroadcasted(string message)`å®šä¹‰ä¸ºå¤„ç†è§¦å‘äº‹ä»¶çš„æœ€ä½³å®è·µã€‚
4.  æ¯ä¸ª`User`éƒ½æœ‰ä¸€ä¸ª`Name`å±æ€§ã€‚
5.  å¦å¤–ï¼Œå½“æŸä¸ª`User`å‘é€æ¶ˆæ¯æ—¶ï¼Œæ¯ä¸ª`User`éƒ½æœ‰ä¸»æ¨¡å—è°ƒç”¨çš„`SendMessage`æ–¹æ³•ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬åªæ˜¯é€šè¿‡`OnMessageBroadcasted`è§¦å‘äº‹ä»¶ã€‚
6.  `ReceiveMessage`æ–¹æ³•ç”¨äºåœ¨å¹¿æ’­æ¶ˆæ¯æ—¶é€šçŸ¥`User`ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬åªæ˜¯è®°å½•ä¸€äº›æµ‹è¯•ä¿¡æ¯ã€‚

ç°åœ¨ï¼Œè®©æˆ‘ä»¬è½¬åˆ°`ChatRoom`ç±»ï¼Œå®ƒæ˜¯æˆ‘ä»¬çš„**ä¸­ä»‹**ç±»ã€‚

æˆ‘ä»¬åœ¨è¿™é‡Œå¯ä»¥æ³¨æ„åˆ°:

1.  æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª**ç”¨æˆ·**çš„ç§æœ‰åˆ—è¡¨ã€‚
2.  æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªåœ¨å‘`ChatRoom`æ·»åŠ æ–°çš„`User`æ—¶è¦è°ƒç”¨çš„`AddUser`æ–¹æ³•ã€‚æˆ‘ä»¬åœ¨è¿™é‡Œåšçš„æ˜¯å°†ç”¨æˆ·æ·»åŠ åˆ°ç§æœ‰åˆ—è¡¨ä¸­ï¼Œå¹¶è®¢é˜…å®ƒçš„`MessageBroadcasted`äº‹ä»¶ã€‚
3.  æˆ‘ä»¬å®šä¹‰äº†ä»`ChatRoom`ä¸­ç§»é™¤`User`æ—¶è¦è°ƒç”¨çš„`RemoveUser`æ–¹æ³•ã€‚æˆ‘ä»¬åœ¨è¿™é‡Œåšçš„æ˜¯å°†ç”¨æˆ·ä»ç§æœ‰åˆ—è¡¨ä¸­ç§»é™¤ï¼Œå¹¶å–æ¶ˆè®¢é˜…å…¶`MessageBroadcasted`äº‹ä»¶ã€‚
4.  æˆ‘ä»¬å®šä¹‰äº†`OnMessageBroadcasted`æ–¹æ³•æ¥å¤„ç†æ¯ä¸ª`User`çš„`MessageBroadcasted`äº‹ä»¶ã€‚æˆ‘ä»¬åœ¨è¿™é‡Œæ‰€åšçš„æ˜¯å¾ªç¯æ‰€æœ‰çš„**ç”¨æˆ·**ï¼Œé™¤äº†é‚£ä¸ªå¹¿æ’­æ¶ˆæ¯çš„ç”¨æˆ·ï¼Œå¹¶è§¦å‘ä»–ä»¬çš„`ReceiveMessage`æ–¹æ³•ã€‚

ç§»åŠ¨åˆ°ä¸»æ¨¡å—ã€‚

æˆ‘ä»¬åœ¨è¿™é‡Œå¯ä»¥æ³¨æ„åˆ°:

1.  æˆ‘ä»¬å®šä¹‰äº† 3 ä¸ªç”¨æˆ·ã€‚
2.  æˆ‘ä»¬åˆ›å»ºäº†**èŠå¤©å®¤**å¹¶é€ä¸€æ·»åŠ äº† 3 ä¸ªç”¨æˆ·ã€‚
3.  ç„¶åï¼Œ**è‰¾å“ˆè¿ˆå¾·**å¼€å§‹è¯´â€œå¤§å®¶å¥½ã€‚â€ã€‚æˆ‘ä»¬åœ¨æ§åˆ¶å°ä¸Šçœ‹åˆ°è¿™ä¸ª:
    â€œTarekâ€æ”¶åˆ°ä¸€æ¡æ¥è‡ªâ€œAhmedâ€çš„æ¶ˆæ¯:â€œå¤§å®¶å¥½ã€‚â€â€œå“ˆæ¡‘â€æ”¶åˆ°äº†â€œè‰¾å“ˆè¿ˆå¾·â€å‘æ¥çš„ä¿¡æ¯:â€œå¤§å®¶å¥½ã€‚â€
4.  ç„¶åå¡”ç‘å…‹å›å¤è¯´:â€œå—¨ï¼Œè‰¾å“ˆè¿ˆå¾·ã€‚â€ã€‚æˆ‘ä»¬åœ¨æ§åˆ¶å°ä¸Šçœ‹åˆ°è¿™ä¸ª:
    â€œè‰¾å“ˆè¿ˆå¾·â€æ”¶åˆ°äº†æ¥è‡ªâ€œå¡”é‡Œå…‹â€çš„æ¶ˆæ¯:â€œä½ å¥½ï¼Œè‰¾å“ˆè¿ˆå¾·ã€‚â€â€œå“ˆæ¡‘â€æ”¶åˆ°äº†â€œå¡”é›·å…‹â€å‘æ¥çš„ä¿¡æ¯:â€œä½ å¥½ï¼Œè‰¾å“ˆè¿ˆå¾·ã€‚â€
5.  ç„¶å **Tarek** ä»èŠå¤© rom ä¸­åˆ é™¤ã€‚
6.  ç„¶å Tarek å‘äº†ä¸€æ¡ä¿¡æ¯è¯´â€œæœ‰äººèƒ½å¬åˆ°æˆ‘å—ï¼Ÿâ€ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬åœ¨æ§åˆ¶å°ä¸­æ²¡æœ‰å¾—åˆ°ä»»ä½•ä¸œè¥¿ï¼Œå› ä¸º Tarek å·²ç»ä»èŠå¤©å®¤ä¸­åˆ é™¤äº†ã€‚
7.  ç„¶å**å“ˆæ¡‘**å‘æ¥ä¸€æ¡ä¿¡æ¯è¯´â€œæˆ‘è®¤ä¸ºå¡”é‡Œå…‹æ–­çº¿äº†ã€‚â€ã€‚æˆ‘ä»¬åœ¨æ§åˆ¶å°ä¸Šçœ‹åˆ°äº†è¿™ä¸ª:
    â€œè‰¾å“ˆè¿ˆå¾·â€æ”¶åˆ°äº†â€œå“ˆæ¡‘â€å‘æ¥çš„ä¿¡æ¯:â€œæˆ‘æƒ³å¡”é‡Œå…‹æ–­çº¿äº†ã€‚â€

æ‰€ä»¥ï¼Œç°åœ¨ä¸€åˆ‡éƒ½æ­£å¸¸å·¥ä½œï¼Œé‡è¦çš„æ˜¯æˆ‘ä»¬çš„å¯¹è±¡(åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼›ç”¨æˆ·)æ˜¯æ¾æ•£è€¦åˆçš„ã€‚

æ­¤å¤–ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦åº”ç”¨ä¸€äº›ä¸šåŠ¡è§„åˆ™ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“åœ°åšåˆ°ï¼Œå› ä¸ºæˆ‘ä»¬å°†å…³ç³»å’Œäº¤äº’é›†ä¸­åˆ°ä¸€ä¸ªåœ°æ–¹ã€‚è¿™ä¹Ÿä½¿å¾—åº”ç”¨èšåˆå˜å¾—éå¸¸å®¹æ˜“ã€‚

![](img/eb73f869c014bceccd1fa198770530d2.png)

ç…§ç‰‡ç”±[è¨ç±³Â·å¨å»‰å§†æ–¯](https://unsplash.com/@sammywilliams?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)åœ¨ [Unsplash](https://unsplash.com/?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) ä¸Šæ‹æ‘„ï¼Œç”±[è‰¾å“ˆè¿ˆå¾·Â·å¡”é‡Œå…‹](https://medium.com/@eng_ahmed.tarek)è°ƒæ•´

# è¯¯è§£

æœ‰ä¸€ç§è¯¯è§£è®¤ä¸º**ä¸­ä»‹è®¾è®¡æ¨¡å¼**ç®¡ç†ç›¸ä¼¼å¯¹è±¡æˆ–ç›¸åŒç±»å‹å¯¹è±¡ä¹‹é—´çš„å…³ç³»å’Œäº¤äº’ï¼Œç„¶è€Œï¼Œè¿™ä¸æ˜¯çœŸçš„ã€‚

**ä¸­ä»‹è®¾è®¡æ¨¡å¼**å¯ä»¥å¯¹ä¸åŒç§ç±»çš„å¯¹è±¡åšåŒæ ·çš„å·¥ä½œã€‚ä¸€ä¸ªè‘—åçš„ä¾‹å­æ˜¯**è¯·æ±‚å¤„ç†å™¨**æ¨¡å¼å®ç°ã€‚

ç®€è€Œè¨€ä¹‹ï¼Œå¦‚æœæ‚¨æœ‰ä¸€äº›è¾“å…¥æˆ–è¯·æ±‚å°†é€šè¿‡ä¸€ç³»åˆ—ä¸åŒçš„å¤„ç†ç¨‹åº(å¯èƒ½æ˜¯é¢„å®šä¹‰çš„æˆ–åœ¨è¿è¡Œæ—¶åŠ è½½çš„)ä¼ é€’ï¼Œé‚£ä¹ˆä½¿ç”¨**ä¸­ä»‹è®¾è®¡æ¨¡å¼**ä¼šéå¸¸å¥½ã€‚

ä½¿ç”¨**ä¸­ä»‹è®¾è®¡æ¨¡å¼**çš„ä¸»è¦å¥½å¤„æ˜¯ï¼Œä½ å¯ä»¥å®ç°ä¸€ä¸ªæ¾æ•£è€¦åˆçš„è®¾è®¡ï¼Œè¿™æ ·è¯·æ±‚å’Œå¤„ç†ç¨‹åºå°±ä¸ä¼šäº’ç›¸å¯Ÿè§‰ã€‚

è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªä¾‹å­ã€‚

![](img/dae42316c04548aad197e34b378e3bf1.png)

# è¯·æ±‚å¤„ç†ç¨‹åºç¤ºä¾‹

å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå‘˜å·¥ç®¡ç†ç³»ç»Ÿï¼Œæ¯å½“é›‡ä½£æ–°å‘˜å·¥æ—¶ï¼Œæˆ‘ä»¬éƒ½æœ‰ä¸åŒçš„æ“ä½œè¦æ‰§è¡Œã€‚

åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨ä¸å¸Œæœ›åƒä¸šåŠ¡å±‚ä¸­çš„`CreateEmployee`æ–¹æ³•ä¸€æ ·åœ¨ä¸€ä¸ªåœ°æ–¹è¿è¡Œæˆ–è§¦å‘è¿™äº›æ“ä½œã€‚è¿™æ˜¯å¯è¡Œçš„ï¼Œä½†æ˜¯ï¼Œæ‚¨æœ€ç»ˆä¼šå¾—åˆ°ä¸€ä¸ªè‡ƒè‚¿çš„ä¸šåŠ¡å±‚ã€‚åŒæ ·ï¼Œæ¯æ¬¡ä½ æƒ³æ·»åŠ ä¸€ä¸ªæ–°çš„åŠ¨ä½œï¼Œä½ éƒ½è¦ä¿®æ”¹`CreateEmployee`æ–¹æ³•ã€‚è¿™æ ·ä¸å¥½ï¼Œå› ä¸ºä½ å¯èƒ½ä¼šæ— æ„ä¸­æ‰“ç¢ä¸œè¥¿ã€‚

å› æ­¤ï¼Œåœ¨è¿™é‡Œä½¿ç”¨**è¯·æ±‚å¤„ç†ç¨‹åº**æ¨¡å¼ä¼šå¾ˆå¥½ã€‚

N **ote** :ä¸ºäº†ç®€å•èµ·è§ï¼Œè¿™é‡Œå°†çœç•¥ä¸€äº›æœ€ä½³å®è·µï¼Œä»¥ä¾¿å°†æ³¨æ„åŠ›é›†ä¸­åœ¨**è¯·æ±‚å¤„ç†ç¨‹åº**æ¨¡å¼çš„ä¸»è¦æ€æƒ³ä¸Šã€‚

æˆ‘ä»¬åœ¨è¿™é‡Œå¯ä»¥æ³¨æ„åˆ°:

1.  æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªç®€å•çš„`Employee`ç±»ã€‚
2.  æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªç®€å•çš„`IAddEmployeeRequest`æ¥å£ã€‚å®ƒåªæœ‰ä¸€ä¸ªè¦æ·»åŠ çš„`Employee`å±æ€§ã€‚
3.  æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªç®€å•çš„`AddEmployeeRequest`ç±»æ¥å®ç°`IAddEmployeeRequest`æ¥å£ã€‚
4.  æˆ‘ä»¬å®šä¹‰äº†`IAddEmployeeRequestHandler`æ¥å£æ¥è¡¨ç¤º`IAddEmployeeRequest`è¯·æ±‚çš„ä»»ä½•å¤„ç†ç¨‹åºã€‚
5.  æˆ‘ä»¬æœ‰ä¸¤ä¸ªç®€å•çš„`IAddEmployeeRequestHandler`æ¥å£å®ç°ï¼›`AddEmployeeRequestHandler1`å’Œ`AddEmployeeRequestHandler2`ã€‚

æˆ‘ä»¬åœ¨è¿™é‡Œå¯ä»¥æ³¨æ„åˆ°:

1.  æˆ‘ä»¬å®šä¹‰äº†`AddEmployeeMediator`ç±»ã€‚
2.  å®ƒç»´æŠ¤ä¸€ä¸ª`IAddEmployeeRequestHandler`å¤„ç†ç¨‹åºåˆ—è¡¨ã€‚
3.  å½“ä¸€ä¸ªè¯·æ±‚é€šè¿‡`Handle`æ–¹æ³•è¿›å…¥æ—¶ï¼Œå®ƒåœ¨æ‰€æœ‰æ³¨å†Œçš„å¤„ç†ç¨‹åºä¸Šå¾ªç¯å¹¶è§¦å‘å®ƒä»¬çš„`Handle`æ–¹æ³•ã€‚
4.  `RegisterHandler`å’Œ`UnregisterHandler`æ˜¯æ³¨å†Œå’Œæ³¨é”€å¤„ç†ç¨‹åºçš„ä¸¤ç§æ–¹æ³•ã€‚

è¿è¡Œè¿™ä¸ªç¨‹åºï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°ä»¥ä¸‹ç»“æœ:

> AddEmployeeRequestHandler1 å¤„ç† Ahmed
> addemployeerequesthandler 2 å¤„ç† Ahmed
> addemployeerequesthandler 1 å¤„ç† Tarek
> addemployeerequesthandler 2 å¤„ç† Tarek

è¿™å¤ªæ£’äº†ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬è®©ä¸åŒçš„å¤„ç†ç¨‹åºå¤„ç†æˆ‘ä»¬çš„è¯·æ±‚ï¼Œè€Œæ²¡æœ‰ç´§å¯†è€¦åˆçš„è¯·æ±‚å’Œå¤„ç†ç¨‹åºã€‚

å½“ç„¶ï¼Œç¤ºä¾‹ä»£ç å¹¶ä¸æ˜¯å¤„äºæœ€ä½³çŠ¶æ€ï¼Œå®ƒå¯ä»¥é€šè¿‡æä¾›æ›´å¤šçš„æŠ½è±¡å’Œè¿›è¡Œä¸€äº›é‡æ„æ¥å¢å¼ºï¼Œä½†è¿™æ˜¯å¾ˆå®¹æ˜“åšåˆ°çš„ï¼Œå¯¹å—ï¼Ÿ

åœ¨æˆ‘ä»¬ç¦»å¼€è¿™ä¸€æ­¥ä¹‹å‰ï¼Œè®©æˆ‘å‘Šè¯‰ä½ å®ç°è¿™ä¸€æ¦‚å¿µçš„è‘—åå›¾ä¹¦é¦†ä¹‹ä¸€æ˜¯[**mediator**](https://github.com/jbogard/MediatR)ã€‚

![](img/d5d52462bc03fb075aa7ff383d632a37.png)

ç”± [Ben White](https://unsplash.com/@benwhitephotography?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) åœ¨ [Unsplash](https://unsplash.com/?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) ä¸Šæ‹æ‘„ï¼Œç”± [Ahmed Tarek](https://medium.com/@eng_ahmed.tarek) è°ƒæ•´

# ä»€ä¹ˆæ˜¯è”å‘ç§‘ï¼Ÿ

[**è”å‘ç§‘**](https://github.com/jbogard/MediatR) ï¼ŒæŒ‰ç…§å›¢é˜Ÿçš„å®šä¹‰ï¼Œæˆ‘å¼•ç”¨ä¸€ä¸‹ï¼Œå°±æ˜¯:

> ç®€å•ï¼Œæ²¡æœ‰é‡å¿ƒçš„ä¸­ä»‹å®ç°ã€‚ç½‘
> 
> æ— ä¾èµ–æ€§çš„è¿›ç¨‹å†…æ¶ˆæ¯ä¼ é€’ã€‚
> 
> æ”¯æŒè¯·æ±‚/å“åº”ã€å‘½ä»¤ã€æŸ¥è¯¢ã€é€šçŸ¥å’Œäº‹ä»¶ï¼ŒåŒæ­¥å’Œå¼‚æ­¥ï¼Œé€šè¿‡ C#é€šç”¨å˜é‡è¿›è¡Œæ™ºèƒ½è°ƒåº¦ã€‚

å¦‚æœä½ æ„¿æ„ï¼Œä½ å¯ä»¥åœ¨[è¿™ä¸ªç»´åŸº](https://github.com/jbogard/MediatR/wiki)é¡µé¢ä¸ŠæŸ¥çœ‹ä¸€äº›ä½¿ç”¨[mediator](https://github.com/jbogard/MediatR)çš„ä¾‹å­ã€‚

å¦‚ä»Šå®ƒå·²ç»å’Œ**ä¸€èµ·è¢«å¤§é‡ä½¿ç”¨ã€‚NetCore** ï¼Œå·²çŸ¥åœ¨å®ç°**å‘½ä»¤å’ŒæŸ¥è¯¢è´£ä»»åˆ†ç¦»(CQRS)** æ—¶ä½¿ç”¨ã€‚

æˆ‘çœŸçš„å»ºè®®ä½ è¯•ä¸€è¯•ã€‚

![](img/de779c5eafed25a0fddc5c8a152c995c.png)

ç”± [Pixabay](https://pixabay.com) ä¸Šçš„ [ColiN00B](https://pixabay.com/users/colin00b-346653/) æ‹æ‘„ï¼Œç”± [Ahmed Tarek](https://medium.com/@eng_ahmed.tarek) è°ƒæ•´

# æœ€åçš„æƒ³æ³•

**ä¸­ä»‹è®¾è®¡æ¨¡å¼**æ˜¯æœ‰å²ä»¥æ¥æœ€ä¼Ÿå¤§çš„æ¨¡å¼ä¹‹ä¸€ã€‚åœ¨æŸä¸ªæ—¶å€™ï¼Œæˆ‘å‘ç°æˆ‘ç”šè‡³åœ¨çŸ¥é“å®ƒä¹‹å‰å°±å·²ç»åœ¨ä½¿ç”¨å®ƒäº†ã€‚

æœ‰æ—¶ä½¿ç”¨è¿™ç§æ¨¡å¼å¤ªæ˜æ˜¾äº†ï¼Œè€Œå…¶ä»–æ—¶å€™å°±æœ‰ç‚¹æ£˜æ‰‹äº†ã€‚

ä¸ºäº†äº†è§£æ›´å¤šå…³äº**ä¸­ä»‹è®¾è®¡æ¨¡å¼**çš„ä¿¡æ¯ï¼Œæˆ‘å»ºè®®ä¸è¦ä»…ä»…æ»¡è¶³äºä»æœ¬æ–‡ä¸­å­¦åˆ°çš„ä¸œè¥¿ï¼Œç»§ç»­åšä¸€äº›ç ”ç©¶å’Œå°è¯•ã€‚è¿™ä¼šå¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å®ƒã€‚

![](img/dae42316c04548aad197e34b378e3bf1.png)

# å¸Œæœ›è¿™äº›å†…å®¹å¯¹ä½ æœ‰ç”¨ã€‚å¦‚æœæ‚¨æƒ³æ”¯æŒ:

å¦‚æœä½ è¿˜ä¸æ˜¯**ä¸­ä»‹**ä¼šå‘˜ï¼Œä½ å¯ä»¥ä½¿ç”¨ [**æˆ‘çš„æ¨èé“¾æ¥**](https://medium.com/@eng_ahmed.tarek/membership) ï¼Œè¿™æ ·æˆ‘å¯ä»¥ä»**ä¸­ä»‹**é‚£é‡Œå¾—åˆ°ä½ çš„ä¸€éƒ¨åˆ†è´¹ç”¨ï¼Œä½ ä¸éœ€è¦æ”¯ä»˜ä»»ä½•é¢å¤–è´¹ç”¨ã€‚è®¢é˜… [**æˆ‘çš„ç®€è®¯**](https://medium.com/subscribe/@eng_ahmed.tarek) å°†æœ€ä½³å®è·µã€æ•™ç¨‹ã€æç¤ºã€æŠ€å·§å’Œè®¸å¤šå…¶ä»–å¾ˆé…·çš„ä¸œè¥¿ç›´æ¥å‘é€åˆ°æ‚¨çš„æ”¶ä»¶ç®±ã€‚

![](img/dae42316c04548aad197e34b378e3bf1.png)

# å…¶ä»–èµ„æº

è¿™äº›æ˜¯ä½ å¯èƒ½ä¼šå‘ç°æœ‰ç”¨çš„å…¶ä»–èµ„æºã€‚

[](/strategy-design-pattern-in-net-c-b9dbd863c31e) [## ä¸­çš„ç­–ç•¥è®¾è®¡æ¨¡å¼ã€‚NET C#

### äº†è§£ä¸­çš„ç­–ç•¥è®¾è®¡æ¨¡å¼ã€‚NET C#

levelup.gitconnected.com](/strategy-design-pattern-in-net-c-b9dbd863c31e) [](/when-implementations-affect-abstractions-1bb2adc808d1) [## å½“å®ç°å½±å“æŠ½è±¡æ—¶

### å…³äºå®ç°çš„çŸ¥è¯†ä¼šå½±å“æŠ½è±¡è®¾è®¡å—ï¼Ÿ

levelup.gitconnected.com](/when-implementations-affect-abstractions-1bb2adc808d1) [](/how-to-cancel-a-running-process-in-a-separate-request-command-in-net-c-2ca8fb733618) [## å¦‚ä½•åœ¨å•ç‹¬çš„è¯·æ±‚/å‘½ä»¤ä¸­å–æ¶ˆæ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ã€‚NET C#

### äº†è§£å¦‚ä½•åœ¨å•ç‹¬çš„è¯·æ±‚ä¸­å–æ¶ˆå·²ç»è¿è¡Œçš„è¿›ç¨‹ã€‚NET C#

levelup.gitconnected.com](/how-to-cancel-a-running-process-in-a-separate-request-command-in-net-c-2ca8fb733618) ![](img/dae42316c04548aad197e34b378e3bf1.png)