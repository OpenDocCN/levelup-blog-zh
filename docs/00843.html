<html>
<head>
<title>React Native Deep Linking Simplified</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">反应本地深层链接简化</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/react-native-deep-linking-simplified-26351f57d04f?source=collection_archive---------2-----------------------#2019-08-20">https://levelup.gitconnected.com/react-native-deep-linking-simplified-26351f57d04f?source=collection_archive---------2-----------------------#2019-08-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/cf295a7c8e8394c1fcc4f79eeb305621.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sB-VhN6VEBrq3ZbX3uw0UQ.png"/></div></div></figure><p id="007d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在我们浏览本博客的<strong class="ka ir">如何</strong>部分之前，我们将在React原生应用中添加<em class="kw">深度链接</em>，让我们先浏览一下<strong class="ka ir">什么</strong>和<strong class="ka ir">为什么</strong>以更好地理解这个概念。</p><p id="4d13" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">深度链接<em class="kw"> </em>仅仅是一个<em class="kw">意图过滤系统</em>，允许用户通过URL访问Android应用程序中的某个活动。假设我们在一个电子商务网站上看到了某种产品(例如一只鞋)，我们想与朋友分享它。深层链接将允许我们共享一个URL，这将使接收者只需点击一下就可以打开应用程序中确切的鞋类产品页面，直接进入该屏幕。让我们来看一个定义，这样会更清楚:</p><blockquote class="kx ky kz"><p id="6727" class="jy jz kw ka b kb kc kd ke kf kg kh ki la kk kl km lb ko kp kq lc ks kt ku kv ij bi translated"><em class="iq">深度链接包括使用统一资源标识符(URI)，链接到移动应用程序中的特定位置，而不是简单地启动应用程序。延迟深度链接允许用户深度链接到内容，即使应用程序尚未安装。</em></p></blockquote><p id="0afd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们已经在上面的<em class="kw">和</em>部分中讨论了一个例子，但是还可以有更多的使用案例，在这些案例中，深度链接非常有用。想想营销策略、推荐链接、分享某种产品等。</p><p id="d313" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">移动深度链接的最大好处是营销人员和应用程序开发人员能够通过专用链接将用户直接带到应用程序中的特定位置。正如深度链接让网络更有用一样，移动深度链接对移动应用程序也是如此。</p><p id="e155" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们看看如何在React Native中创建一个。只需要三个简单的步骤。</p><h1 id="0c54" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">涉及的步骤:</h1><ol class=""><li id="aa7c" class="mb mc iq ka b kb md kf me kj mf kn mg kr mh kv mi mj mk ml bi translated">创建项目</li><li id="58ac" class="mb mc iq ka b kb mm kf mn kj mo kn mp kr mq kv mi mj mk ml bi translated">编辑AndroidManifest.xml</li><li id="2fc9" class="mb mc iq ka b kb mm kf mn kj mo kn mp kr mq kv mi mj mk ml bi translated">构建项目</li></ol><h1 id="6d2c" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">步骤1:创建一个项目</h1><p id="143e" class="pw-post-body-paragraph jy jz iq ka b kb md kd ke kf me kh ki kj mr kl km kn ms kp kq kr mt kt ku kv ij bi translated">通过运行以下命令创建一个React本机项目:</p><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="5aa7" class="nd le iq mz b gy ne nf l ng nh">react-native init deeplinkdemo</span></pre><h1 id="a32d" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">步骤2:编辑AndroidManifest.xml</h1><p id="140e" class="pw-post-body-paragraph jy jz iq ka b kb md kd ke kf me kh ki kj mr kl km kn ms kp kq kr mt kt ku kv ij bi translated">我们必须在<code class="fe ni nj nk mz b">AndroidManifest.xml</code>中添加<code class="fe ni nj nk mz b">intent-filter</code>来指定启动这个特定应用程序的传入链接。</p><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="3b32" class="nd le iq mz b gy ne nf l ng nh">&lt;activity<br/> android:name=".MainActivity"<br/> android:label="@string/app_name"<br/> android:configChanges="keyboard|keyboardHidden|orientation|screenSize"<br/> android:windowSoftInputMode="adjustResize"&gt;<br/> &lt;intent-filter&gt;<br/> &lt;action android:name="android.intent.action.MAIN" /&gt;<br/> &lt;category android:name="android.intent.category.LAUNCHER" /&gt;<br/> &lt;/intent-filter&gt;<br/> &lt;!--Copy &amp; Paste code from here--&gt;<br/> &lt;intent-filter android:label="@string/app_name"&gt;<br/> &lt;action android:name="android.intent.action.VIEW" /&gt;<br/> &lt;category android:name="android.intent.category.DEFAULT" /&gt;<br/> &lt;category android:name="android.intent.category.BROWSABLE" /&gt;<br/> &lt;data android:scheme="app"<br/> android:host="deeplink" /&gt;<br/> &lt;/intent-filter&gt;<br/> &lt;!--To here--&gt;<br/> &lt;/activity&gt;</span></pre><p id="6a53" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我希望评论能明确说明该怎么做。让我们更好地理解<code class="fe ni nj nk mz b">intent-filter</code>。</p><blockquote class="kx ky kz"><p id="d35e" class="jy jz kw ka b kb kc kd ke kf kg kh ki la kk kl km lb ko kp kq lc ks kt ku kv ij bi translated"><em class="iq"/><code class="fe ni nj nk mz b"><em class="iq">intent filter</em></code><em class="iq">是应用程序清单文件中的一个表达式，它指定组件想要接收的意图类型。</em></p></blockquote><p id="b412" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">仔细看看<code class="fe ni nj nk mz b">&lt;intent-filter&gt;</code>里面的<code class="fe ni nj nk mz b">&lt;data&gt;</code>标签。有两个我们必须关心的属性。将<code class="fe ni nj nk mz b">scheme</code>视为一种传入链接，将<code class="fe ni nj nk mz b">host</code>视为URL。</p><blockquote class="kx ky kz"><p id="3cca" class="jy jz kw ka b kb kc kd ke kf kg kh ki la kk kl km lb ko kp kq lc ks kt ku kv ij bi translated"><em class="iq">我们的深度链接会是这样的:</em> <code class="fe ni nj nk mz b"><em class="iq">app://deeplink</em></code></p></blockquote><p id="a778" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">阅读谷歌文档了解更多信息:<a class="ae nl" href="https://developer.android.com/training/app-links/deep-linking" rel="noopener ugc nofollow" target="_blank">developer.android.com/training/app-links/deep-linking</a></p><h1 id="1d3f" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">第三步。构建项目</h1><p id="e5ee" class="pw-post-body-paragraph jy jz iq ka b kb md kd ke kf me kh ki kj mr kl km kn ms kp kq kr mt kt ku kv ij bi translated">转到您的根目录并运行以下命令:</p><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="06f9" class="nd le iq mz b gy ne nf l ng nh">react-native run-android</span></pre><p id="57ca" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">等待项目建立，然后我们将测试我们的深层链接是否正常工作。</p><p id="206e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">确保您的应用程序在后台，并运行以下命令:</p><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="6574" class="nd le iq mz b gy ne nf l ng nh">adb shell am start -W -a android.intent.action.VIEW -d app://deeplink com.deeplinkdemo</span></pre><p id="44ab" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果您的软件包有不同的名称，则编辑命令如下:</p><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="dd4e" class="nd le iq mz b gy ne nf l ng nh">$ adb shell am start -W -a android.intent.action.VIEW -d &lt;URI&gt; &lt;PACKAGE&gt;</span></pre><blockquote class="kx ky kz"><p id="1ff6" class="jy jz kw ka b kb kc kd ke kf kg kh ki la kk kl km lb ko kp kq lc ks kt ku kv ij bi translated">注:仔细看看<code class="fe ni nj nk mz b">app://deeplink</code>。这是我们添加在<code class="fe ni nj nk mz b">intent-filter</code>中的链接，用于指定我们的应用程序。</p></blockquote><p id="c113" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果您的应用程序成功打开，那么我们的深度链接将按预期工作。耶！</p><figure class="mu mv mw mx gt jr gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/49a6285561506c3dc207f2656acdae2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:500/0*6-SCNK19phVbjQdn.gif"/></div></figure><p id="2f66" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们之前使用了<code class="fe ni nj nk mz b">app</code>方案，我们将如何使用<code class="fe ni nj nk mz b">https</code>方案。编辑<code class="fe ni nj nk mz b">intent-filter</code>属性内的<code class="fe ni nj nk mz b">&lt;data&gt;</code>标签，如下所示:</p><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="d6e6" class="nd le iq mz b gy ne nf l ng nh">&lt;data android:scheme="https" android:host="www.deeplinkdemo.com" /&gt;</span></pre><p id="e6ec" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">运行以下命令:</p><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="b83a" class="nd le iq mz b gy ne nf l ng nh">adb shell am start -W -a android.intent.action.VIEW -d https://www.deeplinkdemo.com com.deeplinkdemo</span></pre><p id="e329" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你的应用出现在你面前，欢呼吧。</p><h1 id="0491" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">注意:</h1><p id="d34e" class="pw-post-body-paragraph jy jz iq ka b kb md kd ke kf me kh ki kj mr kl km kn ms kp kq kr mt kt ku kv ij bi translated">您可以在<code class="fe ni nj nk mz b">intent-filter</code>中使用多个<code class="fe ni nj nk mz b">&lt;data&gt;</code>标签，所以类似这样的事情完全没问题。</p><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="bdfc" class="nd le iq mz b gy ne nf l ng nh">&lt;data android:scheme="app" android:host="deeplink" /&gt;<br/>&lt;data android:scheme="https" android:host="www.deeplinkdemo.com" /&gt;</span></pre><blockquote class="kx ky kz"><p id="50aa" class="jy jz kw ka b kb kc kd ke kf kg kh ki la kk kl km lb ko kp kq lc ks kt ku kv ij bi translated"><em class="iq">URIs“app://deeplink”和“deeplinkdemo.com”都立志于这项活动。</em></p></blockquote><p id="5008" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你也可以用这两个链接创建一个HTML文件，就像这样,<em class="kw"> test </em>:</p><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="30df" class="nd le iq mz b gy ne nf l ng nh">&lt;html&gt;<br/>&lt;a href="app://deeplink"&gt;DeepLink with app scheme&lt;/a&gt;<br/>&lt;a href="https://www.deeplinkdemo.com"&gt;DeepLink with https scheme&lt;/a&gt;<br/>&lt;/html&gt;</span></pre><p id="9086" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">通过localhost访问文件或将其放在设备上。点击链接，这将有望启动你的应用程序。</p><p id="acda" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这是系列<em class="kw">React Native Deep Linking Simplified</em>的第一部分，在第2部分中，我们将学习<strong class="ka ir">如何在应用启动时处理传入的链接并重定向用户</strong>。</p><p id="a30d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你觉得这篇文章有帮助，一定要分享。<br/>沙德</p></div></div>    
</body>
</html>