<html>
<head>
<title>Snippets in Google Chrome</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">谷歌浏览器中的片段</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/snippets-in-google-chrome-62636236b766?source=collection_archive---------1-----------------------#2021-05-13">https://levelup.gitconnected.com/snippets-in-google-chrome-62636236b766?source=collection_archive---------1-----------------------#2021-05-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="20d9" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph">使用Google Chrome的片段来节省时间和组织脚本。通读以了解该特性在调试web应用程序时是如何有用的。</h2><div class=""/><div class=""><h2 id="ad95" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">使用谷歌Chrome像专业人士一样调试</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/9a44dd066346a9fef9483ab8bc33fc53.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IIfuniJP27fLTNGxfa9vmQ@2x.jpeg"/></div></div></figure><p id="c8d1" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi lw translated">在调试web应用程序时，我们经常在Google Chrome控制台中运行脚本。这是一个非常有用的工具，不仅提供对变量的访问，还允许更新页面，在会话存储/本地存储中设置值等。</p><p id="a284" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">我经常遇到这样的情况，我在应用中调试第7或第8屏，没有设置上下文就无法直接启动。因此，使用Chrome开发工具运行一些语句并设置所需的上下文。但是，很容易丢失这个脚本。每次遇到这种情况，我最终都要输入代码。</p><p id="3c4e" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">在谷歌浏览器中维护这些脚本有一个更简单的方法——那就是<em class="mf">片段</em>。注意，Chrome Dev Tools中源代码下的snippets选项卡。见下图-1。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi mg"><img src="../Images/5f994ca6372d8bf7aa87c50c1e32c1d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TW9Ck7FPmD1p4fciJNm3Pw.png"/></div></div><figcaption class="mh mi gj gh gi mj mk bd b be z dk translated">图1:启动片段</figcaption></figure><h1 id="2def" class="ml mm iq bd mn mo mp mq mr ms mt mu mv kf mw kg mx ki my kj mz kl na km nb nc bi translated">用例</h1><p id="43e5" class="pw-post-body-paragraph la lb iq lc b ld nd ka lf lg ne kd li lj nf ll lm ln ng lp lq lr nh lt lu lv ij bi translated">在详细描述代码片段之前，让我先来阐述一个样例用例。我创建了一个具有表单和登录功能的小应用程序。示例应用程序及其特性没有任何意义。它的目的只是帮助理解代码片段的用法。</p><p id="1ea6" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">我以登录为例，它在会话存储中设置了一个<em class="mf">身份验证令牌</em>。直到会话存储中的auth令牌可用(这是上下文应用程序需要的)，其余的功能才起作用。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ni"><img src="../Images/197ec0461a0220c5a08b0700cdb1e5f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xt1B9aQZSQKvolC6urcB9Q.png"/></div></div><figcaption class="mh mi gj gh gi mj mk bd b be z dk translated">图2:没有登录会话的示例应用程序</figcaption></figure><p id="602c" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">为了避免每次都经历登录过程，请运行以下脚本，该脚本检索身份验证令牌、用户名，并将其设置在会话存储中。</p><p id="de7d" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">我的示例非常简单，只有一个页面。然而，真正的应用程序会有很少的页面，因此每次登录和导航到第八页进行调试是很乏味的。</p><pre class="kp kq kr ks gt nj nk nl nm aw nn bi"><span id="86d1" class="no mm iq nk b gy np nq l nr ns">-------------------------- <strong class="nk ja">Snippet-1</strong> --------------------------</span><span id="82e9" class="no mm iq nk b gy nt nq l nr ns">// Make a call to retrive auth token, with all the needed parameters</span><span id="6823" class="no mm iq nk b gy nt nq l nr ns">fetch('https://&lt;some domain name&gt;/auth', { method: 'GET' /*few additional needed parameters*/ })</span><span id="52e8" class="no mm iq nk b gy nt nq l nr ns">.then(httpResult =&gt; httpResult.json()<br/>.then(resultJson =&gt; {</span><span id="9fb0" class="no mm iq nk b gy nt nq l nr ns">// take all the fields required and set in session storage</span><span id="3ebb" class="no mm iq nk b gy nt nq l nr ns">sessionStorage.setItem('authToken', resultJson.authToken);</span><span id="056b" class="no mm iq nk b gy nt nq l nr ns">// My sample shows name too, obtained from the remote service.</span><span id="83d4" class="no mm iq nk b gy nt nq l nr ns">sessionStorage.setItem('userName', resultJson.firstName + ' ' + resultJson.lastName);</span><span id="dcca" class="no mm iq nk b gy nt nq l nr ns">return;</span><span id="32cf" class="no mm iq nk b gy nt nq l nr ns">}), err =&gt; console.log(err)) // not much to error handling, feel free to play with it.</span><span id="3dc1" class="no mm iq nk b gy nt nq l nr ns">// remember, fetch doesn't reject the promise unless it's network error (off-topic).</span><span id="b292" class="no mm iq nk b gy nt nq l nr ns">location.reload() // do it if your sample needs it. Sometimes, it might redirect you back to home screen, defeating the purpose.</span></pre><p id="51b8" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">运行这个脚本将在上面的示例应用程序中设置身份验证令牌和用户名上下文。参见图3中的结果。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nu"><img src="../Images/870cdc642f32e0e0868375d8d7a3f85c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hnQ9E7xv6bLoxQC9KZg2ew.png"/></div></div><figcaption class="mh mi gj gh gi mj mk bd b be z dk translated">图3:设置授权令牌和用户名上下文后的示例应用程序</figcaption></figure><h1 id="a6cd" class="ml mm iq bd mn mo mp mq mr ms mt mu mv kf mw kg mx ki my kj mz kl na km nb nc bi translated">在片段中维护脚本</h1><p id="fe81" class="pw-post-body-paragraph la lb iq lc b ld nd ka lf lg ne kd li lj nf ll lm ln ng lp lq lr nh lt lu lv ij bi translated">我们可以在片段中维护这些脚本。这节省了我们每次调试时输入代码行的时间。</p><h2 id="8e70" class="no mm iq bd mn nv nw dn mr nx ny dp mv lj nz oa mx ln ob oc mz lr od oe nb iw bi translated">创建新的代码片段</h2><p id="af3b" class="pw-post-body-paragraph la lb iq lc b ld nd ka lf lg ne kd li lj nf ll lm ln ng lp lq lr nh lt lu lv ij bi translated">要创建新的代码段，请导航到代码段，</p><p id="5dfb" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">启动Chrome开发工具→导航到源代码→在页面旁边的菜单下，选择Snippets。参见上面的图1。</p><p id="4c3c" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">或者，启动Chrome开发工具→使用Ctrl + P (Windows)或Cmd+ P (Mac) →使用文本字段中的符号&gt;。它列出了我们可以在开发工具中执行的所有操作。找到并选择<em class="mf">创建新片段。</em>见下图-4。</p><p id="236a" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">键入脚本并保存。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi of"><img src="../Images/fa7c47919fe8975e2e88634fde18e9ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1206/format:webp/1*F33LCAg_nEnMIgSj5xaQRw.png"/></div><figcaption class="mh mi gj gh gi mj mk bd b be z dk translated">图4:创建一个新的代码片段。</figcaption></figure><blockquote class="og oh oi"><p id="2134" class="la lb mf lc b ld le ka lf lg lh kd li oj lk ll lm ok lo lp lq ol ls lt lu lv ij bi translated">启动Chrome开发工具的快捷键是Ctrl+Shift+I(Windows)/Cmd+Option+I(Mac)</p></blockquote><h2 id="c42f" class="no mm iq bd mn nv nw dn mr nx ny dp mv lj nz oa mx ln ob oc mz lr od oe nb iw bi translated">运行代码片段</h2><p id="baa9" class="pw-post-body-paragraph la lb iq lc b ld nd ka lf lg ne kd li lj nf ll lm ln ng lp lq lr nh lt lu lv ij bi translated">要运行代码片段，导航到源代码→在页面旁边的菜单下，选择代码片段→右键单击代码片段并选择<em class="mf">运行。</em>见下图-5A。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi om"><img src="../Images/a924e90d98ef4a1d4e90370504539f9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:598/format:webp/1*eAPIe1nNMAzluKDjTInPmw.png"/></div><figcaption class="mh mi gj gh gi mj mk bd b be z dk translated">图5A:运行一个片段</figcaption></figure><p id="78da" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">或者，使用Ctrl + P (Windows)或Cmd+ P (Mac) →键入感叹号(！)，其中列出了所有保存的代码片段。请参见下面的图5B。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi on"><img src="../Images/d76a292f7745fc6b04642928a1ac7754.png" data-original-src="https://miro.medium.com/v2/resize:fit:1062/format:webp/1*6ZDGe63fDPcIkaN_jiVs1w.png"/></div><figcaption class="mh mi gj gh gi mj mk bd b be z dk translated">图5B:运行代码片段的替代方法</figcaption></figure><h1 id="910f" class="ml mm iq bd mn mo mp mq mr ms mt mu mv kf mw kg mx ki my kj mz kl na km nb nc bi translated">导出片段</h1><p id="5217" class="pw-post-body-paragraph la lb iq lc b ld nd ka lf lg ne kd li lj nf ll lm ln ng lp lq lr nh lt lu lv ij bi translated">我们可以导出并分发片段(在团队中)。这将帮助团队中的其他人利用这些有用的脚本。但是，没有导出和保存代码片段的简单方法。以下是一个快速破解。</p><p id="9ae0" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">要导出代码片段，请启动开发工具的开发工具。也就是说，在单独的窗口中启动Chrome Dev工具(不要与网页对接)。选择开发工具窗口，再次使用Ctrl+Shift+I(Windows)/Cmd+Option+I(Mac)。它启动第二个开发工具窗口。</p><p id="373c" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">在第二个开发工具窗口中，运行以下代码行来导出代码片段</p><pre class="kp kq kr ks gt nj nk nl nm aw nn bi"><span id="9d9f" class="no mm iq nk b gy np nq l nr ns">InspectorFrontendHost.getPreferences(p =&gt; console.log(JSON.stringify(p.scriptSnippets)))</span></pre><p id="ca73" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">它在控制台上打印片段。复制结果并与他人分享。他们可以运行下面一行代码。同样，他们需要为开发工具启动开发工具。</p><pre class="kp kq kr ks gt nj nk nl nm aw nn bi"><span id="493d" class="no mm iq nk b gy np nq l nr ns">InspectorFrontendHost.setPreference("scriptSnippets", "Exported Snippet goes here")</span></pre><p id="5fb6" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">重新启动浏览器以查找安装的代码片段。</p><blockquote class="og oh oi"><p id="9476" class="la lb mf lc b ld le ka lf lg lh kd li oj lk ll lm ok lo lp lq ol ls lt lu lv ij bi translated">在我们结束之前，在这里多了解一下我和我的观点，<a class="ae oo" href="https://codevenkey.com" rel="noopener ugc nofollow" target="_blank">CodeVenkey</a>/<a class="ae oo" href="https://twitter.com/keertikotaru" rel="noopener ugc nofollow" target="_blank">Twitter</a></p></blockquote><h1 id="8650" class="ml mm iq bd mn mo mp mq mr ms mt mu mv kf mw kg mx ki my kj mz kl na km nb nc bi translated">参考和链接</h1><ol class=""><li id="5295" class="op oq iq lc b ld nd lg ne lj or ln os lr ot lv ou ov ow ox bi translated">Google Chrome文档-<a class="ae oo" href="https://developer.chrome.com/docs/devtools/javascript/snippets/" rel="noopener ugc nofollow" target="_blank">https://developer . Chrome . com/docs/devtools/JavaScript/Snippets/</a></li><li id="8c5c" class="op oq iq lc b ld oy lg oz lj pa ln pb lr pc lv ou ov ow ox bi translated">由他人创建的六个有用片段—<a class="ae oo" href="https://www.telerik.com/blogs/6-snippets-to-keep-in-your-chrome-devtools" rel="noopener ugc nofollow" target="_blank">https://www . telerik . com/blogs/6-Snippets-to-keep-in-your-chrome-dev tools</a></li></ol></div></div>    
</body>
</html>