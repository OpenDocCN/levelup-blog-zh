# å¤šä¸ª Docker-Compose é¡¹ç›®ä¹‹é—´çš„è”ç½‘

> åŸæ–‡ï¼š<https://levelup.gitconnected.com/networking-between-multiple-docker-compose-projects-317922eb85d2>

å½“ä½ æƒ³åœ¨æœ¬åœ°è¿è¡Œé¡¹ç›®æ—¶ï¼Œä¸€ä¸ªè·¨ repos å’Œ docker-compose æ–‡ä»¶çš„å¾®æœåŠ¡åº”ç”¨ç¨‹åºå¯èƒ½ä¼šå˜å¾—æ··ä¹±ã€‚

![](img/6564712707d7a02c86c9d027b371993c.png)

å¤šä¸ª Docker-Compose é¡¹ç›®ä¹‹é—´çš„è”ç½‘

è®¾ç½®å¼€å‘ç¯å¢ƒæ€»æ˜¯å…·æœ‰æŒ‘æˆ˜æ€§ï¼Œå°¤å…¶æ˜¯å¾®æœåŠ¡æ¶æ„ã€‚åœ¨æˆ‘çš„ä¸Šä¸€ä¸ªé¡¹ç›®ä¸­ï¼Œæˆ‘å°†ä¸€ä¸ªå¤§å‹çš„ monolith åˆ†å‰²æˆè·¨ä¸åŒä»£ç åº“çš„å¾®æœåŠ¡ï¼Œæœ€åå¾—åˆ°äº†å‡ ä¸ªç‹¬ç«‹çš„ docker-compose æ–‡ä»¶ã€‚

æˆ‘æƒ³é€šè¿‡è·¯ç”± docker ç½‘ç»œä¸­çš„æ‰€æœ‰å†…å®¹ï¼Œåœ¨æˆ‘çš„æœ¬åœ°æœºå™¨ä¸Šæµ‹è¯•å®Œæ•´çš„åº”ç”¨ç¨‹åºã€‚æˆ‘æ€æ ·æ‰èƒ½è®©ä¸åŒçš„æœåŠ¡åœ¨ docker ä¸­è¿æ¥èµ·æ¥ï¼Œä½†æ˜¯è¿è¡Œåœ¨å®ƒä»¬å•ç‹¬çš„ docker-compose é¡¹ç›®ç›®å½•ä¸­ï¼Ÿ

æˆ‘ä¸æ˜¯ä¸“å®¶ï¼Œä½†æ˜¯æˆ‘é€šè¿‡ä½¿ç”¨ docker-compose æ–‡ä»¶å’ŒæœåŠ¡å‘ç°äº†ä¸€äº›æœ‰è¶£çš„æ¦‚å¿µã€‚

# Docker ç½‘ç»œå…¬å¸

Docker æœ‰å®ƒçš„[ç½‘ç»œ](https://docs.docker.com/network/)å­ç³»ç»Ÿã€‚å½“å¯åŠ¨ Docker æ—¶ï¼Œå®ƒåˆ›å»ºäº†ä¸€ä¸ª**æ¡¥**ç½‘ç»œã€‚è¯¥ç½‘ç»œè¿æ¥äº†æ‰€æœ‰æœåŠ¡ï¼Œä½†é™¤éæŒ‡å®šï¼Œå¦åˆ™ä¸ç›´æ¥è¿æ¥å®¹å™¨ã€‚æ‚¨ä¹Ÿå¯ä»¥åˆ›å»ºå’ŒæŒ‡å®šè‡ªå·±çš„æ¡¥æ¥ç½‘ç»œã€‚

åœ¨ ***ç›¸åŒçš„ YAML æ–‡ä»¶ä¸­æ¦‚è¿°çš„ Docker-compose æœåŠ¡å°†æ€»æ˜¯åœ¨ç›¸åŒçš„æ¡¥æ¥ç½‘ç»œ*** ä¸Šï¼Œé€šè¿‡å®ƒä»¬çš„æœåŠ¡ååˆ›å»ºå¹¶å¯åˆ°è¾¾ã€‚æˆ‘æƒ³ä½¿ç”¨å®ƒï¼Œè¿™æ ·æˆ‘åœ¨å¤šä¸ª docker-compose æ–‡ä»¶ä¸­çš„ä¸åŒæœåŠ¡å°±å¯ä»¥é€šè¿‡å®ƒä»¬çš„æœåŠ¡åäº’ç›¸è®¿é—®ã€‚

![](img/80d9e3f67ee750d2bb6067630a4cdb51.png)

æˆ‘çš„æµ‹è¯•ç›®å½•ã€‚æ¯ä¸ªé¡¹ç›®éƒ½åœ¨è‡ªå·±çš„ç›®å½•ä¸­ï¼Œä»¥ç¡®ä¿åˆ›å»ºäº†ä¸åŒçš„ç½‘ç»œã€‚

## æ‰‹åŠ¨åˆ›å»º Docker ç½‘ç»œ

æˆ‘ä»¬å¯ä»¥å»ºç«‹æˆ‘ä»¬çš„ docker ç½‘ç»œï¼Œå¹¶æŒ‡å¯¼ docker-compose æœåŠ¡ä½¿ç”¨æˆ‘ä»¬åˆ›å»ºçš„ç½‘ç»œã€‚

æˆ‘ä»¬è¿™æ ·åš:

![](img/d9af3cc939990f946fb408e25e52abe5.png)

åˆ›å»ºç½‘ç»œå¹¶æ£€æŸ¥å®ƒæ˜¯å¦å­˜åœ¨

ç°åœ¨å‘Šè¯‰ä»–ä»¬ä½¿ç”¨è¿™ä¸ª docker ç½‘ç»œ

æˆ‘ä»¬é€šè¿‡åœ¨ docker-compose æ–‡ä»¶ä¸­å°†ç½‘ç»œå£°æ˜ä¸º ***å¤–éƒ¨*** æ¥å®ç°è¿™ä¸€ç‚¹

![](img/299c3d1c5a95ce901f86457f89c4d4d9.png)

å°†ç½‘ç»œå£°æ˜ä¸ºå¤–éƒ¨ç½‘ç»œ

è¿™å‘Šè¯‰ docker-compose ä¸è¦åˆ›å»ºé»˜è®¤ç½‘ç»œï¼Œè€Œæ˜¯ä½¿ç”¨æˆ‘ä»¬é¢„å…ˆå­˜åœ¨çš„ç½‘ç»œã€‚è®©æˆ‘ä»¬ ping å¦ä¸€ä¸ªé¡¹ç›®çš„ IP åœ°å€â€”â€”æˆ‘ä»¬å¯ä»¥ä½¿ç”¨`docker inspect [container]`æ¥æ£€ç´¢å®ƒã€‚ç„¶åï¼Œè®©æˆ‘ä»¬ä½¿ç”¨ IP åœ°å€å’ŒæœåŠ¡åå‘å®ƒå‘é€ä¸€ä¸ªè¯·æ±‚ï¼Œä»¥è¯æ˜ Docker ä»ç„¶åœ¨åŒä¸€ä¸ªç½‘ç»œä¸Šè§£æå®ƒã€‚

![](img/fabd144f50bbe8fb4b0f1c236d8e5710.png)

å‘å¦ä¸€ä¸ª docker-compose é¡¹ç›®å‘é€è¯·æ±‚

## è®©å®ƒå˜å¾—æ›´å®¹æ˜“

Docker é€šå¸¸ä½¿ç”¨ç›®å½•å’Œ`_default`çš„å‘½åæ–¹æ¡ˆæ¥åˆ¶ä½œé»˜è®¤ç½‘ç»œã€‚æˆ‘ä»¬å¯ä»¥åœ¨ç¬¬äºŒä¸ªé¡¹ç›®ä¸­å°†å…¶å£°æ˜ä¸ºå¤–éƒ¨çš„ï¼Œè€Œä¸æ¥è§¦ç¬¬ä¸€ä¸ªé¡¹ç›®çš„ docker-compose æ–‡ä»¶ã€‚

![](img/402433b7b5baad8a5b952eb76e6d8c63.png)

åªéœ€ä½¿ç”¨ç¬¬ä¸€ä¸ªé¡¹ç›®ä¸­é»˜è®¤ç½‘ç»œçš„åç§°

ä»¥ä¸‹æ˜¯å¸®åŠ©å¾ˆå¤§çš„ StackOverflow å¸–å­ï¼

[](https://stackoverflow.com/questions/38088279/communication-between-multiple-docker-compose-projects) [## å¤šä¸ª docker-compose é¡¹ç›®ä¹‹é—´çš„é€šä¿¡

### å¦‚æœä½ è¯•å›¾åœ¨æ¥è‡ªä¸åŒ docker-compose é¡¹ç›®çš„ä¸¤ä¸ªå®¹å™¨ä¹‹é—´è¿›è¡Œé€šä¿¡ï¼Œå¹¶ä¸”ä¸æƒ³ä½¿ç”¨â€¦

stackoverflow.com](https://stackoverflow.com/questions/38088279/communication-between-multiple-docker-compose-projects) [](https://stackoverflow.com/questions/52010778/docker-compose-make-requests-between-containers) [## docker-ç¼–å†™å®¹å™¨ä¹‹é—´çš„è¯·æ±‚

### æˆ‘å¯¹ docker-compose æœ‰ç‚¹é™Œç”Ÿï¼Œæ‰€ä»¥æˆ‘ç”šè‡³ä¸ç¡®å®šæˆ‘åœ¨å¯»æ‰¾ä»€ä¹ˆã€‚æˆ‘åˆ›å»ºäº†ä¸¤ä¸ªå›¾åƒï¼Œæˆ‘æ­£åœ¨è¿è¡Œâ€¦

stackoverflow.com](https://stackoverflow.com/questions/52010778/docker-compose-make-requests-between-containers) 

# å¸®åŠ©å·¥å…·

*   `docker network create`
*   `docker network ls`
*   `docker inspect [container name]`
*   `netcat`

# TLï¼›é€Ÿåº¦ä¸‰è§’å½¢å®šä½æ³•(dead reckoning)

*   è¿æ¥å¤šä¸ª docker ç½‘ç»œå¯èƒ½ä¼šå˜å¾—æ£˜æ‰‹
*   é€šè¿‡åˆ›å»ºä¸€ä¸ªç½‘ç»œæˆ–è€…ä½¿ç”¨åˆ›å»ºçš„é»˜è®¤ç½‘ç»œï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ–‡ä»¶åä¸­ä½¿ç”¨`external`æ¥è¿æ¥å®ƒä»¬

å¦‚æœä½ å–œæ¬¢ä½ è¯»åˆ°çš„å†…å®¹ï¼Œè¯·åœ¨ LinkedIn[æˆ– Medium ä¸Šå…³æ³¨æˆ‘:)](https://www.linkedin.com/in/stcalica/)

# åˆ†çº§ç¼–ç 

æ„Ÿè°¢æ‚¨æˆä¸ºæˆ‘ä»¬ç¤¾åŒºçš„ä¸€å‘˜ï¼åœ¨ä½ ç¦»å¼€ä¹‹å‰:

*   ğŸ‘ä¸ºæ•…äº‹é¼“æŒï¼Œè·Ÿç€ä½œè€…èµ°ğŸ‘‰
*   ğŸ“°æŸ¥çœ‹[å‡çº§ç¼–ç å‡ºç‰ˆç‰©](https://levelup.gitconnected.com/?utm_source=pub&utm_medium=post)ä¸­çš„æ›´å¤šå†…å®¹
*   ğŸ””å…³æ³¨æˆ‘ä»¬:[Twitter](https://twitter.com/gitconnected)|[LinkedIn](https://www.linkedin.com/company/gitconnected)|[æ—¶äº‹é€šè®¯](https://newsletter.levelup.dev)

ğŸš€ğŸ‘‰ [**åŠ å…¥å‡çº§äººæ‰é›†ä½“ï¼Œæ‰¾åˆ°ä¸€ä»½ç¥å¥‡çš„å·¥ä½œ**](https://jobs.levelup.dev/talent/welcome?referral=true)