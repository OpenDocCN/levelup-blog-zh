<html>
<head>
<title>AWS SQS hidden polling costs</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">AWS SQS隐藏投票成本</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/aws-sqs-hidden-polling-costs-c263470329c9?source=collection_archive---------4-----------------------#2020-12-23">https://levelup.gitconnected.com/aws-sqs-hidden-polling-costs-c263470329c9?source=collection_archive---------4-----------------------#2020-12-23</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><p id="946c" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">对Lambda使用队列</p><figure class="kq kr ks kt gu ku gi gj paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gi gj kp"><img src="../Images/a29de95ea6ae1a9ddf202f7841413b4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0JlQdLayWIOQzImR"/></div></div><figcaption class="lb lc gk gi gj ld le bd b be z dk translated">安东·达利斯在<a class="ae lf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="3a0c" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi lg translated">在构建事件驱动的应用程序时，处理上传到S3桶的对象是很常见的。有几种方法可以使用S3通知收听S3事件。你可以在每次上传后直接调用lambda函数，或者将通知发送到SNS主题/SQS队列，作为两者之间的中介。</p><p id="ebf2" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">对于处理错误的高性能、可扩展的解决方案，SQS是最佳选择。</p><p id="6c4f" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">Lambda每秒有1000个并发调用的限制。T11】</p><p id="81dc" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated"><a class="ae lf" href="https://aws.amazon.com/sns/faqs/" rel="noopener ugc nofollow" target="_blank"> <em class="lp"> SNS不保证每个通知只发送一次。</em>T15】</a></p><p id="6f50" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated"><a class="ae lf" href="https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/sqs-dead-letter-queues.html" rel="noopener ugc nofollow" target="_blank"> <em class="lp">如果交付出现错误，SQS允许您根据您的重新驱动政策重试向消费者交付(例如Lambda)。如果重试次数用尽，那么您可以使用死信队列(DLQ)单独处理错误。</em>T19】</a></p><p id="e32d" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">设置很简单。</p><figure class="kq kr ks kt gu ku"><div class="bz fq l di"><div class="lq lr l"/></div></figure><p id="1b20" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">AWS每月免费给你一百万条消息。之后，每百万条信息只需0.40美元，所以成本很低。</p><p id="61a9" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">Lambda不断轮询队列，监听队列中的新消息，这就带来了问题。如果没有空消息，这种轮询会产生空消息。这些消息计入AWS空闲层请求。Lambda函数将有五个实例每20秒轮询一次。</p></div><div class="ab cl ls lt hy lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="in io ip iq ir"><h2 id="ab2d" class="lz ma iu bd mb mc md dn me mf mg dp mh kc mi mj mk kg ml mm mn kk mo mp mq mr bi translated">每分钟15条信息。</h2><h2 id="418e" class="lz ma iu bd mb mc md dn me mf mg dp mh kc mi mj mk kg ml mm mn kk mo mp mq mr bi translated">每小时900。</h2><h2 id="e52b" class="lz ma iu bd mb mc md dn me mf mg dp mh kc mi mj mk kg ml mm mn kk mo mp mq mr bi translated">每天21600。</h2><h2 id="a1d2" class="lz ma iu bd mb mc md dn me mf mg dp mh kc mi mj mk kg ml mm mn kk mo mp mq mr bi translated">每个月64.8万。</h2></div><div class="ab cl ls lt hy lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="in io ip iq ir"><h1 id="ff98" class="ms ma iu bd mb mt mu mv me mw mx my mh mz na nb mk nc nd ne mn nf ng nh mq ni bi translated">这已经是免费层的一半以上。</h1><p id="32a8" class="pw-post-body-paragraph jr js iu jt b ju nj jw jx jy nk ka kb kc nl ke kf kg nm ki kj kk nn km kn ko in bi translated">如果你有两个队列，那么你已经开始为SQS付费了。还好它相当便宜。</p><p id="4050" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">正如我之前提到的，您可以直接从S3通知中调用Lambda函数。如果您知道负载不会很多，您可以安全地使用此选项。</p><figure class="kq kr ks kt gu ku"><div class="bz fq l di"><div class="lq lr l"/></div></figure><p id="0343" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">有一个好的，并继续建设真棒的东西🎉</p><div class="no np gq gs nq nr"><a href="https://blog.jagonzalr.com/membership" rel="noopener  ugc nofollow" target="_blank"><div class="ns ab fp"><div class="nt ab nu cl cj nv"><h2 class="bd iv gz z fq nw fs ft nx fv fx it bi translated">加入我的介绍链接媒体-何塞安东尼奥冈萨雷斯罗德里格斯</h2><div class="ny l"><h3 class="bd b gz z fq nw fs ft nx fv fx dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="nz l"><p class="bd b dl z fq nw fs ft nx fv fx dk translated">blog.jagonzalr.com</p></div></div><div class="oa l"><div class="ob l oc od oe oa of kz nr"/></div></div></a></div></div></div>    
</body>
</html>