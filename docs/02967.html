<html>
<head>
<title>Agnita: Authentication for Create React App using AWS Cognito</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Agnita:使用AWS Cognito创建React应用程序的身份验证</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/agnita-authentication-for-create-react-app-using-aws-cognito-80cde1fb781b?source=collection_archive---------1-----------------------#2020-04-13">https://levelup.gitconnected.com/agnita-authentication-for-create-react-app-using-aws-cognito-80cde1fb781b?source=collection_archive---------1-----------------------#2020-04-13</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="5c53" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Agnita项目是使用<a class="ae ko" href="https://aws.amazon.com/cognito/" rel="noopener ugc nofollow" target="_blank"> Amazon Cognito </a>和<a class="ae ko" href="https://create-react-app.dev/" rel="noopener ugc nofollow" target="_blank"> create-react-app </a>实现的概念验证。</p><p id="033b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">阿格尼塔这个名字来自拉丁语，意思是公认的。这个名字的选择与Cognito密切相关。找到一个合适的名字花了我不少时间，但毫无用处。</p><p id="bfb6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">查看GitHub回购这里:【https://github.com/bartw/agnita T4】</p><h1 id="5d2b" class="kp kq it bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">设置AWS认知</h1><p id="d6cd" class="pw-post-body-paragraph jq jr it js b jt ln jv jw jx lo jz ka kb lp kd ke kf lq kh ki kj lr kl km kn im bi translated">确保你有一个AWS帐户，我建议你使用<a class="ae ko" href="https://aws.amazon.com/free/" rel="noopener ugc nofollow" target="_blank">免费层</a>开始。转到<a class="ae ko" href="https://console.aws.amazon.com/console" rel="noopener ugc nofollow" target="_blank"> AWS管理控制台</a>中的<a class="ae ko" href="https://console.aws.amazon.com/cognito/" rel="noopener ugc nofollow" target="_blank"> Cognito </a>服务，并点击管理用户池。</p><figure class="lt lu lv lw gt lx gh gi paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="gh gi ls"><img src="../Images/22ac73b9853151a96e45a96efc5e5888.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Y8Ixajo0m8Z4Ynfd.png"/></div></div></figure><p id="c69f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在点击创建用户池来创建你的第一个用户池。</p><figure class="lt lu lv lw gt lx gh gi paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="gh gi ls"><img src="../Images/31924f83d870c2e91034381721e60240.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*cgWl_WFFiqlMT7fC.png"/></div></div></figure><p id="93d0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">下一步，你必须给你的用户池起一个名字，我把我的命名为Agnita，因为，嗯，那是我的应用程序的名字。通过点击AWS Cognito上的“查看默认值”,您可以在设置中做出大多数艰难的选择。作为概念的证明，我当然希望缺省值足够了。</p><figure class="lt lu lv lw gt lx gh gi paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="gh gi ls"><img src="../Images/4128e993efb3216396ea85648712636c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*pbozxSs7Ps3M5FV5.png"/></div></div></figure><p id="13ed" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">据我所知，那些违约看起来还不错。既然你正在读这篇文章，你可能也没有头绪。因此，您可以单击“Create pool ”,查看您的第一个AWS Cognito用户池。</p><figure class="lt lu lv lw gt lx gh gi paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="gh gi ls"><img src="../Images/21407601a7d11bb2c9dd5e563c0a022d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*d7AHnXgbB93z0LwF.png"/></div></div></figure><p id="f523" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">返回到<a class="ae ko" href="https://console.aws.amazon.com/console" rel="noopener ugc nofollow" target="_blank"> AWS管理控制台</a>中的<a class="ae ko" href="https://console.aws.amazon.com/cognito/" rel="noopener ugc nofollow" target="_blank"> Cognito </a>服务，但这次您要单击管理身份池。</p><figure class="lt lu lv lw gt lx gh gi paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="gh gi ls"><img src="../Images/a8689957cf9b2e76d8f9a1b2adca68fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*xzZLsPc-AT2iGo7U.png"/></div></div></figure><p id="72db" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">是时候想出另一个名字了，我又选了阿格尼塔。您可以忽略未认证的身份和认证流设置。但是您应该扩展身份验证提供程序。</p><p id="5895" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">第一个Authentication-providers-tab是Cognito，您可以填写刚刚在其中创建的用户池的用户池ID。但是还需要一个应用客户端id。我所做的是打开另一个浏览器选项卡来创建一个应用程序客户端。</p><figure class="lt lu lv lw gt lx gh gi paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="gh gi ls"><img src="../Images/4d2b212a66d08ecab90aaadcf766a92c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*dgyNrefzTnPo22Og.png"/></div></div></figure><p id="22e5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果您再次转到Cognito，我不会再把那个屏幕截图放上去，然后管理用户池，您可以选择您的用户池。在常规设置下，有一个应用程序客户端选项。我认为你可以在那里创建非常需要的应用程序客户端。</p><figure class="lt lu lv lw gt lx gh gi paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="gh gi ls"><img src="../Images/0d073e5947e4f2fdff3277d8c8513100.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*XURUyQjL5SL7pt_F.png"/></div></div></figure><p id="3f23" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">看来我是对的。您可以单击添加应用程序客户端。</p><figure class="lt lu lv lw gt lx gh gi paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="gh gi ls"><img src="../Images/dfe5c255ca8032551189e5ed73d4687a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*f39Is4MBDo359tB0.png"/></div></div></figure><p id="b24b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">猜猜我给我的app客户端选了什么名字？没错，阿格尼塔，但我加了-Web只是因为。您还应该<strong class="js iu">禁用生成客户端密码复选框</strong>。我保留了所有其他设置，因此您也可以这样做，我单击了创建应用程序客户端。</p><figure class="lt lu lv lw gt lx gh gi paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="gh gi ls"><img src="../Images/e65d78b4a51696e6b3d0ce62b09e9663.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*tvtug0kfKgi52-Gv.png"/></div></div></figure><p id="4bfd" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在，您可以继续使用身份池了。粘贴您的id并点击创建池！</p><p id="a72b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">出现了一个意外的屏幕。显然，您还需要指定至少一个角色。我想这是有道理的。我只对一种经过身份验证的用户感兴趣，所以我将保持简单。</p><figure class="lt lu lv lw gt lx gh gi paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="gh gi ls"><img src="../Images/6670d38e5a4b4d7be1e1942d80fb118d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Q5IxaiCVcFsTAEZR.png"/></div></div></figure><p id="d93d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">那起了作用。现在你可以从一个网站开始使用Cognito。</p><h1 id="6176" class="kp kq it bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">设置创建React应用程序</h1><p id="b1e5" class="pw-post-body-paragraph jq jr it js b jt ln jv jw jx lo jz ka kb lp kd ke kf lq kh ki kj lr kl km kn im bi translated">确保你已经安装了<a class="ae ko" href="https://nodejs.org/" rel="noopener ugc nofollow" target="_blank"> Node.js </a>。我也喜欢使用<a class="ae ko" href="https://code.visualstudio.com/" rel="noopener ugc nofollow" target="_blank"> Visual Studio代码</a>，因为它有效。</p><p id="0fa4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">打开一个终端，开始像疯子一样打字。</p><pre class="lt lu lv lw gt me mf mg mh aw mi bi"><span id="d3a5" class="mj kq it mf b gy mk ml l mm mn">npx create-react-app agnita<br/>cd agnita<br/>code .</span></pre><p id="fd36" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果一切顺利，您应该已经编写好Visual Studio代码，并且刚刚生成的create-react-app已经准备就绪。</p><h1 id="9d2e" class="kp kq it bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">更漂亮的弯路</h1><p id="ec25" class="pw-post-body-paragraph jq jr it js b jt ln jv jw jx lo jz ka kb lp kd ke kf lq kh ki kj lr kl km kn im bi translated">在我开始一个JavaScript项目之前，我总是确保已经安装了<a class="ae ko" href="https://prettier.io/" rel="noopener ugc nofollow" target="_blank">漂亮的</a>。如果能每3.8秒自动格式化一次，编码速度会快很多。</p><p id="7d90" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">当我在Visual Studio代码中时，我总是使用内置的终端。你可以像我一样在<a class="ae ko" href="https://code.visualstudio.com/shortcuts/keyboard-shortcuts-macos.pdf" rel="noopener ugc nofollow" target="_blank"> macOS </a>上使用⌃` (control + backtick)快捷键来显示集成终端。同样的Visual Studio键盘快捷键也存在于<a class="ae ko" href="https://code.visualstudio.com/shortcuts/keyboard-shortcuts-windows.pdf" rel="noopener ugc nofollow" target="_blank"> Windows </a>和<a class="ae ko" href="https://code.visualstudio.com/shortcuts/keyboard-shortcuts-linux.pdf" rel="noopener ugc nofollow" target="_blank"> Linux </a>中。</p><p id="e1be" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在回到漂亮。在安装了prettier并创建了一个空的配置后，当你在格式化一个文件时，你可以点击⇧⌥F (shift + command + f)。</p><pre class="lt lu lv lw gt me mf mg mh aw mi bi"><span id="1bea" class="mj kq it mf b gy mk ml l mm mn">npm install --save-dev prettier<br/>echo "{}" &gt;&gt; .prettierrc</span></pre><h1 id="65ad" class="kp kq it bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">回到正轨</h1><p id="60fb" class="pw-post-body-paragraph jq jr it js b jt ln jv jw jx lo jz ka kb lp kd ke kf lq kh ki kj lr kl km kn im bi translated">为了确保在开始集成AWS Cognito之前一切正常，您可以启动生成的应用程序。回到终端:</p><pre class="lt lu lv lw gt me mf mg mh aw mi bi"><span id="8761" class="mj kq it mf b gy mk ml l mm mn">npm start</span></pre><p id="db44" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我不知道你怎么想，但对我来说，这打开了一个浏览器标签，显示了一个旋转的<a class="ae ko" href="https://reactjs.org/" rel="noopener ugc nofollow" target="_blank">反应</a>标志。</p><h1 id="e036" class="kp kq it bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">AWS放大器</h1><p id="2509" class="pw-post-body-paragraph jq jr it js b jt ln jv jw jx lo jz ka kb lp kd ke kf lq kh ki kj lr kl km kn im bi translated">要使用AWS Cognito注册、登录和注销，您需要<a class="ae ko" href="https://aws-amplify.github.io/" rel="noopener ugc nofollow" target="_blank"> AWS Amplify </a>。AWS Amplify是一个成熟的库，可以在AWS上构建应用程序。我现在只打算使用AWS Cognito，所以我主要关注文档中的<a class="ae ko" href="https://aws-amplify.github.io/docs/js/authentication#manual-setup" rel="noopener ugc nofollow" target="_blank">手动设置</a>部分。</p><pre class="lt lu lv lw gt me mf mg mh aw mi bi"><span id="0f23" class="mj kq it mf b gy mk ml l mm mn">npm install --save aws-amplify</span></pre><p id="cc86" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在React应用程序中，您需要Cognito的区域、用户池ID和应用程序客户端ID。<code class="fe mo mp mq mf b">.env</code>文件是您应该保存这些AWS Cognito id的地方。最好不要签入它们，因为其他人可能会开始使用你的用户池来存储他们的用户。所以一定要将<code class="fe mo mp mq mf b">.env</code>添加到您的<code class="fe mo mp mq mf b">.gitignore</code>中，将其从Git中排除。</p><p id="df65" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">你确实知道Git，是吗？如果你没有，那你就去学吧，只要看完<a class="ae ko" href="https://git-scm.com/book/en/v2" rel="noopener ugc nofollow" target="_blank">这本免费书</a>的前3章就可以了。</p><pre class="lt lu lv lw gt me mf mg mh aw mi bi"><span id="7592" class="mj kq it mf b gy mk ml l mm mn">touch .env</span></pre><p id="248b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您的<code class="fe mo mp mq mf b">.env</code>文件应该如下所示。对于Create-React-App来说,<code class="fe mo mp mq mf b">REACT_APP_</code>前缀是必须的，以获取您的<a class="ae ko" href="https://create-react-app.dev/docs/adding-custom-environment-variables/" rel="noopener ugc nofollow" target="_blank">环境变量</a>。</p><blockquote class="mr ms mt"><p id="abe9" class="jq jr mu js b jt ju jv jw jx jy jz ka mv kc kd ke mw kg kh ki mx kk kl km kn im bi translated">我用了一个无法破解的算法来改变所有的id，所以不要尝试任何东西。事实上，我只是输入了一些随机字符，而不是真正的id，但它会完成工作。</p></blockquote><pre class="lt lu lv lw gt me mf mg mh aw mi bi"><span id="2c30" class="mj kq it mf b gy mk ml l mm mn">REACT_APP_REGION=us-east-1<br/>REACT_APP_USER_POOL_ID=us-east-1_SW382wGyU<br/>REACT_APP_USER_POOL_WEB_CLIENT_ID=4t3RdWfp5ydwadefjthscrdrcd</span></pre><p id="1309" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">将AWS Cognito集成到您的Create-React-App应用程序中的一切都已就绪。所以你可以开始反应了。我添加了一些css和一个<code class="fe mo mp mq mf b">FormElement</code>组件，让它看起来更好一点(真的只是一点点)。您可以在完整代码中查看这些更改。</p><p id="a8bf" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">首先你需要初始化AWS Amplify。我在我的<code class="fe mo mp mq mf b">App</code>组件中这样做了。当我的<code class="fe mo mp mq mf b">App</code>组件挂载时，我使用了<a class="ae ko" href="https://reactjs.org/docs/hooks-effect.html" rel="noopener ugc nofollow" target="_blank"> useEffect </a>钩子来初始化AWS Amplify。</p><pre class="lt lu lv lw gt me mf mg mh aw mi bi"><span id="c72f" class="mj kq it mf b gy mk ml l mm mn">import React, { useEffect } from "react";<br/>import Amplify from "aws-amplify";<br/>import logo from "./logo.svg";<br/>import SignUp from "./SignUp";<br/>import SignIn from "./SignIn";<br/>import "./App.css";</span><span id="1ebd" class="mj kq it mf b gy my ml l mm mn">const App = () =&gt; {<br/>  useEffect(() =&gt; {<br/>    Amplify.configure({<br/>      Auth: {<br/>        region: process.env.REACT_APP_REGION,<br/>        userPoolId: process.env.REACT_APP_USER_POOL_ID,<br/>        userPoolWebClientId: process.env.REACT_APP_USER_POOL_WEB_CLIENT_ID,<br/>      },<br/>    });<br/>  });</span><span id="730a" class="mj kq it mf b gy my ml l mm mn">  return (<br/>    &lt;div className="App"&gt;<br/>      &lt;header className="App-header"&gt;<br/>        &lt;img src={logo} className="App-logo" alt="logo" /&gt;<br/>        &lt;h1&gt;Agnita&lt;/h1&gt;<br/>        &lt;h2&gt;Authentication for Create React App using AWS Cognito&lt;/h2&gt;<br/>      &lt;/header&gt;<br/>      &lt;SignUp /&gt;<br/>      &lt;SignIn /&gt;<br/>    &lt;/div&gt;<br/>  );<br/>};</span><span id="a14f" class="mj kq it mf b gy my ml l mm mn">export default App;</span></pre><p id="f2cf" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">你可以看到我创建了一个<code class="fe mo mp mq mf b">SignUp</code>和一个<code class="fe mo mp mq mf b">SignIn</code>组件。这是两个非常相似的表单，使用AWS Amplify Auth API来创建新用户并与这些用户一起登录。现在这个应用程序不做任何事情，所以你应该保持你的浏览器控制台打开，看看东西是否工作。</p><p id="c4e3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe mo mp mq mf b">SignUp</code>组件由两个表格组成。在第一张表格中，你需要填写电子邮件地址和密码。当您提交时，将创建一个用户，您的电子邮件将作为用户名，电子邮件也是您的电子邮件和密码。如果一切顺利，第二种形式将变得可见。第二种形式要求您输入确认码。这个代码应该在第一步之后通过电子邮件发送给您。提交确认码后，您将拥有一个注册用户。</p><pre class="lt lu lv lw gt me mf mg mh aw mi bi"><span id="ab99" class="mj kq it mf b gy mk ml l mm mn">import React, { useState } from "react";<br/>import { Auth } from "aws-amplify";<br/>import FormElement from "./FormElement";</span><span id="592e" class="mj kq it mf b gy my ml l mm mn">const SignUp = () =&gt; {<br/>  const [email, setEmail] = useState("");<br/>  const [password, setPassword] = useState("");<br/>  const [waitingForCode, setWaitingForCode] = useState(false);<br/>  const [code, setCode] = useState("");</span><span id="f80e" class="mj kq it mf b gy my ml l mm mn">  const signUp = (e) =&gt; {<br/>    e.preventDefault();</span><span id="035a" class="mj kq it mf b gy my ml l mm mn">    Auth.signUp({ username: email, password, attributes: { email } })<br/>      .then((data) =&gt; {<br/>        console.log(data);<br/>        setWaitingForCode(true);<br/>        setPassword("");<br/>      })<br/>      .catch((err) =&gt; {<br/>        console.log(err);<br/>      });<br/>  };</span><span id="8d57" class="mj kq it mf b gy my ml l mm mn">  const confirmSignUp = (e) =&gt; {<br/>    e.preventDefault();</span><span id="ed54" class="mj kq it mf b gy my ml l mm mn">    Auth.confirmSignUp(email, code)<br/>      .then((data) =&gt; {<br/>        console.log(data);<br/>        setWaitingForCode(false);<br/>        setEmail("");<br/>        setCode("");<br/>      })<br/>      .catch((err) =&gt; console.log(err));<br/>  };</span><span id="27dd" class="mj kq it mf b gy my ml l mm mn">  const resendCode = () =&gt; {<br/>    Auth.resendSignUp(email)<br/>      .then(() =&gt; {<br/>        console.log("code resent successfully");<br/>      })<br/>      .catch((e) =&gt; {<br/>        console.log(e);<br/>      });<br/>  };</span><span id="5df5" class="mj kq it mf b gy my ml l mm mn">  return (<br/>    &lt;div className="form"&gt;<br/>      &lt;h3&gt;Sign Up&lt;/h3&gt;<br/>      {!waitingForCode &amp;&amp; (<br/>        &lt;form&gt;<br/>          &lt;FormElement label="Email" forId="sign-up-email"&gt;<br/>            &lt;input<br/>              id="sign-up-email"<br/>              type="email"<br/>              value={email}<br/>              onChange={(e) =&gt; setEmail(e.target.value)}<br/>              placeholder="email"<br/>            /&gt;<br/>          &lt;/FormElement&gt;<br/>          &lt;FormElement label="Password" forId="sign-up-email"&gt;<br/>            &lt;input<br/>              id="sign-up-password"<br/>              type="password"<br/>              value={password}<br/>              onChange={(e) =&gt; setPassword(e.target.value)}<br/>              placeholder="password"<br/>            /&gt;<br/>          &lt;/FormElement&gt;<br/>          &lt;button type="submit" onClick={signUp}&gt;<br/>            Sign Up<br/>          &lt;/button&gt;<br/>        &lt;/form&gt;<br/>      )}<br/>      {waitingForCode &amp;&amp; (<br/>        &lt;form&gt;<br/>          &lt;FormElement label="Confirmation Code" forId="sign-up-code"&gt;<br/>            &lt;input<br/>              id="sign-up-code"<br/>              type="text"<br/>              value={code}<br/>              onChange={(e) =&gt; setCode(e.target.value)}<br/>              placeholder="code"<br/>            /&gt;<br/>          &lt;/FormElement&gt;<br/>          &lt;button type="submit" onClick={confirmSignUp}&gt;<br/>            Confirm Sign Up<br/>          &lt;/button&gt;<br/>          &lt;button type="button" onClick={resendCode}&gt;<br/>            Resend code<br/>          &lt;/button&gt;<br/>        &lt;/form&gt;<br/>      )}<br/>    &lt;/div&gt;<br/>  );<br/>};</span><span id="a723" class="mj kq it mf b gy my ml l mm mn">export default SignUp;</span></pre><p id="1233" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">当您有一个注册用户时，您可以在<code class="fe mo mp mq mf b">SignIn</code>表单中使用该用户的电子邮件和密码。只需填写电子邮件和密码，然后点击登录，你会看到一个用户信息的控制台日志。</p><pre class="lt lu lv lw gt me mf mg mh aw mi bi"><span id="af40" class="mj kq it mf b gy mk ml l mm mn">import React, { useState } from "react";<br/>import { Auth } from "aws-amplify";<br/>import FormElement from "./FormElement";</span><span id="1d24" class="mj kq it mf b gy my ml l mm mn">const SignIn = () =&gt; {<br/>  const [email, setEmail] = useState("");<br/>  const [password, setPassword] = useState("");</span><span id="8343" class="mj kq it mf b gy my ml l mm mn">  const signIn = (e) =&gt; {<br/>    e.preventDefault();</span><span id="34f3" class="mj kq it mf b gy my ml l mm mn">    Auth.signIn({<br/>      username: email,<br/>      password,<br/>    })<br/>      .then((user) =&gt; {<br/>        setEmail("");<br/>        setPassword("");<br/>        console.log(user);<br/>      })<br/>      .catch((err) =&gt; {<br/>        console.log(err);<br/>      });<br/>  };</span><span id="4a61" class="mj kq it mf b gy my ml l mm mn">  return (<br/>    &lt;div className="form"&gt;<br/>      &lt;h3&gt;Sign In&lt;/h3&gt;<br/>      &lt;form&gt;<br/>        &lt;FormElement label="Email" forId="sign-in-email"&gt;<br/>          &lt;input<br/>            id="sign-in-email"<br/>            type="email"<br/>            value={email}<br/>            onChange={(e) =&gt; setEmail(e.target.value)}<br/>            placeholder="email"<br/>          /&gt;<br/>        &lt;/FormElement&gt;<br/>        &lt;FormElement label="Password" forId="sign-in-password"&gt;<br/>          &lt;input<br/>            id="sign-in-password"<br/>            type="password"<br/>            value={password}<br/>            onChange={(e) =&gt; setPassword(e.target.value)}<br/>            placeholder="password"<br/>          /&gt;<br/>        &lt;/FormElement&gt;<br/>        &lt;button type="submit" onClick={signIn}&gt;<br/>          Sign In<br/>        &lt;/button&gt;<br/>      &lt;/form&gt;<br/>    &lt;/div&gt;<br/>  );<br/>};</span><span id="2a2a" class="mj kq it mf b gy my ml l mm mn">export default SignIn;</span></pre><p id="62a3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">事实证明，使用AWS Cognito向Create-React-App添加身份验证并不难。我希望你也能成功。这里还有一个运行中的应用程序的小演示。</p><figure class="lt lu lv lw gt lx"><div class="bz fp l di"><div class="mz na l"/></div><figcaption class="nb nc gj gh gi nd ne bd b be z dk translated">微型演示</figcaption></figure><p id="8518" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这个概念验证可以使用很多后续内容:部署到多个环境中，在一个包含私有和公共部分的真实应用程序中使用它，以及添加像脸书这样的第三方身份验证提供商是首先想到的。也许我会找到尝试把它们写下来的动力。</p></div></div>    
</body>
</html>