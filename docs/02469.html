<html>
<head>
<title>Event Handling in Vue.js Components</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Vue.js组件中的事件处理</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/event-handling-in-vue-js-components-fa314e469d30?source=collection_archive---------9-----------------------#2020-03-15">https://levelup.gitconnected.com/event-handling-in-vue-js-components-fa314e469d30?source=collection_archive---------9-----------------------#2020-03-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/831aa29332056e06c314377a5ec0561a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*B0c1nN-jkYTRael-"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated"><a class="ae kf" href="https://unsplash.com/@joshnh?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">约书亚·希伯特</a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="3ac3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Vue.js是一个易于使用的web应用框架，我们可以用它来开发交互式前端应用。</p><p id="cc08" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本文中，我们将看看如何处理Vue组件中的事件，包括如何使用定制组件的<code class="fe le lf lg lh b">v-model</code>以及在父组件和子组件之间传递数据。</p><h1 id="ccaa" class="li lj it bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">监听子组件事件</h1><p id="cecc" class="pw-post-body-paragraph kg kh it ki b kj mg kl km kn mh kp kq kr mi kt ku kv mj kx ky kz mk lb lc ld im bi translated">我们可以从子组件向父组件发送事件，以便在父组件中运行代码。</p><p id="aa3c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，如果我们想给每篇文章添加一个按钮来改变页面的字体，我们可以这样做:</p><p id="da5e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe le lf lg lh b">src/index.js</code>:</p><pre class="ml mm mn mo gt mp lh mq mr aw ms bi"><span id="d765" class="mt lj it lh b gy mu mv l mw mx">Vue.component("post", {<br/>  props: ["post"],<br/>  template: `<br/>    &lt;div&gt;<br/>      &lt;h2&gt;{{post.title}}&lt;/h2&gt;<br/>      &lt;div&gt;{{post.content}}&lt;/div&gt;<br/>      &lt;button v-on:click="$emit('change-font')"&gt;<br/>        Change Font<br/>      &lt;/button&gt;<br/>    &lt;/div&gt;<br/>  `<br/>});</span><span id="4e9e" class="mt lj it lh b gy my mv l mw mx">new Vue({<br/>  el: "#app",<br/>  data: {<br/>    posts: [{ title: "Foo", content: "foo" }, { title: "Bar", content: "bar" }],<br/>    font: ""<br/>  },<br/>  methods: {<br/>    changeFont() {<br/>      this.font = this.font === "" ? "courier" : "";<br/>    }<br/>  }<br/>});</span></pre><p id="20c9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们添加了<code class="fe le lf lg lh b">changeFont</code>方法，让我们在Vue应用程序中改变字体。当<code class="fe le lf lg lh b">post</code>组件发出<code class="fe le lf lg lh b">change-font</code>事件时，将会调用这个函数。</p><p id="01a8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当点击改变字体按钮时，从<code class="fe le lf lg lh b">post</code>发出<code class="fe le lf lg lh b">change-font</code>事件。</p><p id="e683" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">该事件是用<code class="fe le lf lg lh b">$emit</code>方法发出的。我们传入的字符串是事件的名称。</p><p id="1db1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe le lf lg lh b">index.html</code>:</p><pre class="ml mm mn mo gt mp lh mq mr aw ms bi"><span id="5bfc" class="mt lj it lh b gy mu mv l mw mx">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;App&lt;/title&gt;<br/>    &lt;meta charset="UTF-8" /&gt;<br/>    &lt;script src="<a class="ae kf" href="https://cdn.jsdelivr.net/npm/vue/dist/vue.js" rel="noopener ugc nofollow" target="_blank">https://cdn.jsdelivr.net/npm/vue/dist/vue.js</a>"&gt;&lt;/script&gt;<br/>  &lt;/head&gt;</span><span id="31f6" class="mt lj it lh b gy my mv l mw mx">  &lt;body&gt;<br/>    &lt;div id="app"&gt;<br/>      &lt;div v-bind:style="{'font-family': font}"&gt;<br/>        &lt;post<br/>          v-for="post in posts"<br/>          v-bind:post="post"<br/>          v-on:change-font="changeFont"<br/>        &gt;&lt;/post&gt;<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;</span><span id="f3e5" class="mt lj it lh b gy my mv l mw mx">    &lt;script src="src/index.js"&gt;&lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="aa3f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在模板中，我们用<code class="fe le lf lg lh b">v-bind:style</code>属性来动态设置<code class="fe le lf lg lh b">div</code>的字体。</p><p id="aee0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当收到<code class="fe le lf lg lh b">change-font</code>事件时，将调用<code class="fe le lf lg lh b">changeFont</code>方法在Courier和default之间切换字体。</p><p id="593e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe le lf lg lh b">$emit</code>方法还接受第二个参数，该参数带有我们希望发送回父对象的值。</p><p id="769d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以将字体更改代码重写如下:</p><p id="8f92" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe le lf lg lh b">src/index.js</code>:</p><pre class="ml mm mn mo gt mp lh mq mr aw ms bi"><span id="d0ff" class="mt lj it lh b gy mu mv l mw mx">Vue.component("post", {<br/>  props: ["post"],<br/>  template: `<br/>    &lt;div&gt;<br/>      &lt;h2&gt;{{post.title}}&lt;/h2&gt;<br/>      &lt;div&gt;{{post.content}}&lt;/div&gt;<br/>      &lt;button v-on:click="$emit('change-font', 'courier')"&gt;<br/>        Change Font<br/>      &lt;/button&gt;<br/>    &lt;/div&gt;<br/>  `<br/>});</span><span id="82e4" class="mt lj it lh b gy my mv l mw mx">new Vue({<br/>  el: "#app",<br/>  data: {<br/>    posts: [{ title: "Foo", content: "foo" }, { title: "Bar", content: "bar" }],<br/>    font: ""<br/>  },<br/>  methods: {<br/>    changeFont(font) {<br/>      this.font = this.font === font ? "" : font;<br/>    }<br/>  }<br/>});</span></pre><p id="54dd" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在上面的代码中，我们将<code class="fe le lf lg lh b">'courier'</code>传递给了<code class="fe le lf lg lh b">$emit</code>函数。第二个参数中的项目将作为父组件中的<code class="fe le lf lg lh b">$event</code>可用。</p><p id="6b53" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe le lf lg lh b">index.html</code>:</p><pre class="ml mm mn mo gt mp lh mq mr aw ms bi"><span id="1df2" class="mt lj it lh b gy mu mv l mw mx">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;App&lt;/title&gt;<br/>    &lt;meta charset="UTF-8" /&gt;<br/>    &lt;script src="<a class="ae kf" href="https://cdn.jsdelivr.net/npm/vue/dist/vue.js" rel="noopener ugc nofollow" target="_blank">https://cdn.jsdelivr.net/npm/vue/dist/vue.js</a>"&gt;&lt;/script&gt;<br/>  &lt;/head&gt;</span><span id="c2ac" class="mt lj it lh b gy my mv l mw mx">  &lt;body&gt;<br/>    &lt;div id="app"&gt;<br/>      &lt;div v-bind:style="{'font-family': font}"&gt;<br/>        &lt;post<br/>          v-for="post in posts"<br/>          v-bind:post="post"<br/>          v-on:change-font="changeFont($event)"<br/>        &gt;&lt;/post&gt;<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;</span><span id="084a" class="mt lj it lh b gy my mv l mw mx">    &lt;script src="src/index.js"&gt;&lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="f4e9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在模板中，我们将包含<code class="fe le lf lg lh b">'courier'</code>的<code class="fe le lf lg lh b">$template</code>传递给<code class="fe le lf lg lh b">changeFont</code>方法。</p><p id="5513" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe le lf lg lh b">changeFont</code>方法在我们作为参数传入的<code class="fe le lf lg lh b">font</code>和空字符串之间切换字体。</p><p id="3cb4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">所以它做的和以前一样。</p><p id="0113" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这让我们可以将数据从子组件传递到父组件。</p><figure class="ml mm mn mo gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mz"><img src="../Images/6e07b4f96fa5c01727937a27ef6c3dda.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5GITjgeijvuqeOUZ"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">照片由<a class="ae kf" href="https://unsplash.com/@kymellis?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">金莎·艾利斯</a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><h1 id="a8e2" class="li lj it bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">在组件上使用v模型</h1><p id="f18f" class="pw-post-body-paragraph kg kh it ki b kj mg kl km kn mh kp kq kr mi kt ku kv mj kx ky kz mk lb lc ld im bi translated"><code class="fe le lf lg lh b">v-model</code>同<code class="fe le lf lg lh b">v-bind:value</code>和<code class="fe le lf lg lh b">v-on:input</code>加在一起。这意味着:</p><pre class="ml mm mn mo gt mp lh mq mr aw ms bi"><span id="a31e" class="mt lj it lh b gy mu mv l mw mx">&lt;input v-model="text"&gt;</span></pre><p id="e61b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">与以下内容相同:</p><pre class="ml mm mn mo gt mp lh mq mr aw ms bi"><span id="f0bc" class="mt lj it lh b gy mu mv l mw mx">&lt;input v-bind:value="text" v-on:input="text= $event.target.value" &gt;</span></pre><p id="d49f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">由于组件接受道具并发出事件，我们可以将<code class="fe le lf lg lh b">value</code> propr和<code class="fe le lf lg lh b">input</code>事件绑定到<code class="fe le lf lg lh b">v-model</code>指令中。</p><p id="01ff" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以使用它进行如下自定义输入:</p><p id="e3c6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe le lf lg lh b">src/index.js</code>:</p><pre class="ml mm mn mo gt mp lh mq mr aw ms bi"><span id="6a13" class="mt lj it lh b gy mu mv l mw mx">Vue.component("styled-input", {<br/>  props: ["value"],<br/>  template: `<br/>    &lt;input<br/>      v-bind:style="{'font-family':'courier'}"<br/>      v-bind:value="value"<br/>      v-on:input="$emit('input', $event.target.value)"<br/>    &gt;<br/>  `<br/>});</span><span id="ce91" class="mt lj it lh b gy my mv l mw mx">new Vue({<br/>  el: "#app",<br/>  data: {<br/>    text: ""<br/>  }<br/>});</span></pre><p id="3754" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在上面的代码中，我们创建了<code class="fe le lf lg lh b">style-input</code>组件来将输入的字体更改为Courier。</p><p id="b21f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">同样，我们使用<code class="fe le lf lg lh b">v-bind:value</code>来获取<code class="fe le lf lg lh b">value</code>属性的值，并在文本输入到输入框时发出<code class="fe le lf lg lh b">input</code>事件。</p><p id="6f31" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe le lf lg lh b">index.html</code>:</p><pre class="ml mm mn mo gt mp lh mq mr aw ms bi"><span id="285e" class="mt lj it lh b gy mu mv l mw mx">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;App&lt;/title&gt;<br/>    &lt;meta charset="UTF-8" /&gt;<br/>    &lt;script src="<a class="ae kf" href="https://cdn.jsdelivr.net/npm/vue/dist/vue.js" rel="noopener ugc nofollow" target="_blank">https://cdn.jsdelivr.net/npm/vue/dist/vue.js</a>"&gt;&lt;/script&gt;<br/>  &lt;/head&gt;</span><span id="1dc8" class="mt lj it lh b gy my mv l mw mx">  &lt;body&gt;<br/>    &lt;div id="app"&gt;<br/>      &lt;styled-input v-model="text"&gt;&lt;/styled-input&gt;<br/>      &lt;br /&gt;<br/>      {{text}}<br/>    &lt;/div&gt;</span><span id="90bb" class="mt lj it lh b gy my mv l mw mx">    &lt;script src="src/index.js"&gt;&lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="9606" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在上面的代码中，我们可以使用<code class="fe le lf lg lh b">v-model</code>绑定到<code class="fe le lf lg lh b">text</code>数据字段，因为<code class="fe le lf lg lh b">v-model</code>与组合<code class="fe le lf lg lh b">v-bind:value</code>和<code class="fe le lf lg lh b">v-on:input</code>是一样的。</p><p id="f138" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe le lf lg lh b">styled-input</code>发出了<code class="fe le lf lg lh b">input</code>事件并获得了<code class="fe le lf lg lh b">value</code>道具，所以我们可以将它们合并成<code class="fe le lf lg lh b">v-model</code>。</p><h1 id="0fed" class="li lj it bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">结论</h1><p id="fd3a" class="pw-post-body-paragraph kg kh it ki b kj mg kl km kn mh kp kq kr mi kt ku kv mj kx ky kz mk lb lc ld im bi translated">我们可以从子组件向父组件发出带有<code class="fe le lf lg lh b">$emit</code>的事件。它需要两个参数。第一个参数是事件名称的字符串，第二个参数是我们要传递给父对象的对象。</p><p id="15aa" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">父进程可以通过使用<code class="fe le lf lg lh b">v-on</code>指令监听事件来访问从子进程传递的对象，然后使用<code class="fe le lf lg lh b">$event</code>对象从子进程中检索项目。</p><p id="97de" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe le lf lg lh b">v-bind:value</code>和<code class="fe le lf lg lh b">v-on:input</code>与<code class="fe le lf lg lh b">v-model</code>相同，所以<code class="fe le lf lg lh b">v-bind:value</code>和<code class="fe le lf lg lh b">v-on:input</code>可以合二为一，<code class="fe le lf lg lh b">v-model</code>可以使用定制组件。</p><p id="84f2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这让我们可以轻松地创建自定义输入。</p></div></div>    
</body>
</html>