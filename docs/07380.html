<html>
<head>
<title>Make a Ruby Gem</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">制作红宝石</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/make-a-ruby-gem-2139f8cdf910?source=collection_archive---------5-----------------------#2021-02-13">https://levelup.gitconnected.com/make-a-ruby-gem-2139f8cdf910?source=collection_archive---------5-----------------------#2021-02-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="a476" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你有没有一个可爱的ruby脚本，你想很容易地与你的朋友分享，或者一个你认为对其他人有用的不错的类？别担心，在本文中，我将向您展示如何使用现有的ruby代码制作一个ruby宝石。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/eee26b15cd1315848589aa4bc2722fe0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Y1hMv3CVdvDKWL12"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">Muhannad Ajjan 在<a class="ae lb" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="da13" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我将使用具有以下项目结构的模拟项目:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi lc"><img src="../Images/c04f6dda8f41a82cfbd98e16b9c74c0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:502/format:webp/1*3Srw4RWx_B7CdSRf714uKQ.png"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">基本项目结构</figcaption></figure><p id="00e2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在ruby项目的根目录下创建一个<code class="fe ld le lf lg b">.gemspec</code>文件。我创建了一个<code class="fe ld le lf lg b">hello.gemspec</code>文件，内容如下。确保用与您的项目相关的信息替换虚拟字段。</p><pre class="km kn ko kp gt lh lg li lj aw lk bi"><span id="f03b" class="ll lm iq lg b gy ln lo l lp lq">Gem::Specification.new do |s|<br/>  s.name = 'hello'<br/>  s.version = '0.0.0'<br/>  s.executables &lt;&lt; 'hello'<br/>  s.summary = 'hello!!'<br/>  s.description = 'Hello, World!'<br/>  s.authors = ['Anon Anon']<br/>  s.email = '<a class="ae lb" href="mailto:okbaymeron@gmail.com" rel="noopener ugc nofollow" target="_blank">a</a>non@anon.anon'<br/>  s.files = ['lib/important_class.rb', 'lib/awesome_class.rb']<br/>  s.license = 'MIT'<br/>end</span></pre><p id="2c0b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">通过在文件顶部添加一个shebang并使用<code class="fe ld le lf lg b">chmod</code>使<code class="fe ld le lf lg b">bin/hello</code>可执行。在这种情况下，只需将<code class="fe ld le lf lg b">#!/usr/bin/env ruby</code>添加到<code class="fe ld le lf lg b">bin/hello</code>的顶部并执行<code class="fe ld le lf lg b">chmod +x bin/hello</code>。</p><p id="1b0e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">通过执行<code class="fe ld le lf lg b">gem build hello.gemspec</code>创建gem，这会在当前文件夹中创建它。执行<code class="fe ld le lf lg b">gem install ./hello-0.0.0.gem</code>安装宝石并进行测试。</p><p id="ab62" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果您没有任何帐户，请创建一个<a class="ae lb" href="https://rubygems.org/sign_up" rel="noopener ugc nofollow" target="_blank"> rubygems </a>帐户。接下来，运行以下命令，用您的rubygems帐户设置您的计算机。用您的用户名替换anon。</p><pre class="km kn ko kp gt lh lg li lj aw lk bi"><span id="f3dd" class="ll lm iq lg b gy ln lo l lp lq">curl -u anon <a class="ae lb" href="https://rubygems.org/api/v1/api_key.yaml" rel="noopener ugc nofollow" target="_blank">https://rubygems.org/api/v1/api_key.yaml</a> &gt; ~/.gem/credentials; chmod 0600 ~/.gem/credentials</span></pre><p id="7aac" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，您可以发布了！执行<code class="fe ld le lf lg b">gem push hello-0.0.0.gem</code>，你就可以开始了。</p><p id="c276" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">注意:</strong>模拟项目中的所有名字都是假名，所以在选择你的gem、类和脚本的名字之前，你必须确保阅读<a class="ae lb" href="https://guides.rubygems.org/patterns/#consistent-naming" rel="noopener ugc nofollow" target="_blank">文档</a>并浏览<a class="ae lb" href="http://rubygems.org/" rel="noopener ugc nofollow" target="_blank"> rubygems网站</a>。</p></div></div>    
</body>
</html>