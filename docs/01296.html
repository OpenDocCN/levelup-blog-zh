<html>
<head>
<title>Understand the Power of BigInt in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">理解JavaScript中BigInt的威力</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/learn-bigint-in-javascript-df9b61bc19ef?source=collection_archive---------3-----------------------#2019-12-12">https://levelup.gitconnected.com/learn-bigint-in-javascript-df9b61bc19ef?source=collection_archive---------3-----------------------#2019-12-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="4f03" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">了解如何在JavaScript中使用BigInt来存储大数</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/32de156755862f5a8ee5a06066ad0009.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1WeuR9OoKyD5EvtT9KjXOA.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@mbaumi?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">米卡·鲍梅斯特</a>在<a class="ae ky" href="https://unsplash.com/s/photos/numbers?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="429b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b"><strong class="lb iu">BigInt</strong></code>是一个内置对象，它提供了一种存储大于<code class="fe lv lw lx ly b">Number.MAX_SAFE_INTEGER</code>的数字的方法。</p><p id="72db" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">需要<code class="fe lv lw lx ly b">BigInt</code>的原因是</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="09ef" class="md me it ly b gy mf mg l mh mi">var maxIntNum = 9007199254740991;</span><span id="2244" class="md me it ly b gy mj mg l mh mi">var largeNumber = maxIntNum + 2; // 9007199254740992</span></pre><p id="6e79" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">上述操作的预期结果是<code class="fe lv lw lx ly b">9007199254740993</code>，但是我们得到的是<code class="fe lv lw lx ly b"><strong class="lb iu">9007199254740992</strong></code>。<strong class="lb iu"> </strong>原因是JavaScript使用64位来存储一个数，所以一旦我们试图创建一个大于这个数的数，就无法存储了。</p><p id="e6db" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要解决这个问题，我们可以选择<code class="fe lv lw lx ly b">BigInt</code>。</p><h1 id="6c06" class="mk me it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">正在创建BigInt</h1><ol class=""><li id="7861" class="nb nc it lb b lc nd lf ne li nf lm ng lq nh lu ni nj nk nl bi translated">将<code class="fe lv lw lx ly b">n</code>添加到数字的末尾</li></ol><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="8972" class="md me it ly b gy mf mg l mh mi">var num =  100000000000000000n;</span><span id="9024" class="md me it ly b gy mj mg l mh mi">num  + 10n;  // 100000000000000010n</span><span id="d4e5" class="md me it ly b gy mj mg l mh mi">// using binary literal with n appended</span><span id="fa3e" class="md me it ly b gy mj mg l mh mi">var num = 0x1fffffffffffff<strong class="ly iu">n</strong></span><span id="e62d" class="md me it ly b gy mj mg l mh mi">num; // <strong class="ly iu">9007199254740991n</strong></span></pre><p id="2b1e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">2.使用<code class="fe lv lw lx ly b">BigInt</code>构造函数</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="082f" class="md me it ly b gy mf mg l mh mi">var num = BigInt(100000000000000000);</span><span id="b766" class="md me it ly b gy mj mg l mh mi">num+10n; //100000000000000010n</span><span id="e794" class="md me it ly b gy mj mg l mh mi">var fromHex = <strong class="ly iu">BigInt('0x1fffffffffffff')</strong>;</span><span id="2277" class="md me it ly b gy mj mg l mh mi">fromHex; // <strong class="ly iu">9007199254740991n</strong></span></pre><p id="7da0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将一个<code class="fe lv lw lx ly b">BigInt</code>转换成一个对象</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="01e3" class="md me it ly b gy mf mg l mh mi">var bigIntAsObject = Object(1n);</span><span id="3a02" class="md me it ly b gy mj mg l mh mi">bigIntAsObject; // BigInt {1n}</span></pre><p id="cc1a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">检查一个数字是否是一个<code class="fe lv lw lx ly b">BigInt</code></p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="ab42" class="md me it ly b gy mf mg l mh mi">typeof num === "bigint";</span><span id="385c" class="md me it ly b gy mj mg l mh mi"><strong class="ly iu">typeof bigIntAsObject;</strong> "object"</span></pre><p id="4bc4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请记住，我们不能将正常数字与BitInt混合，如果我们试图这样做，就会导致错误。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="0c3a" class="md me it ly b gy mf mg l mh mi">num + 10;</span><span id="4e7c" class="md me it ly b gy mj mg l mh mi">// Uncaught TypeError: Cannot mix BigInt and other types, use explicit conversions</span></pre><p id="9627" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了解决这个问题，我们可以通过将我们的正常数字转换为BigInt来完成以下操作:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="e526" class="md me it ly b gy mf mg l mh mi">num + BigInt(10);</span></pre><h1 id="51e9" class="mk me it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">用<code class="fe lv lw lx ly b">BigInt</code>进行算术运算</h1><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="8c41" class="md me it ly b gy mf mg l mh mi">var num = BigInt(10);</span><span id="ace4" class="md me it ly b gy mj mg l mh mi"><strong class="ly iu">Addition</strong><br/>num + 10n; // 20n</span><span id="7ede" class="md me it ly b gy mj mg l mh mi"><strong class="ly iu">Subtraction</strong><br/>num - BigInt(5); // 15n</span><span id="0614" class="md me it ly b gy mj mg l mh mi"><strong class="ly iu">Multiplication </strong><br/>num * 10n; // 150n</span><span id="0967" class="md me it ly b gy mj mg l mh mi"><strong class="ly iu">Exponent operator <br/></strong>num ** 10n; // 10000000000n</span><span id="b7d9" class="md me it ly b gy mj mg l mh mi"><strong class="ly iu">DIVISION</strong></span><span id="0968" class="md me it ly b gy mj mg l mh mi">// when we perform division , the fractional part in the result is removed</span><span id="0582" class="md me it ly b gy mj mg l mh mi">var n  = 5n;<br/><strong class="ly iu">n / 2n;  // 2n</strong></span><span id="8da7" class="md me it ly b gy mj mg l mh mi"><strong class="ly iu">MODULO</strong></span><span id="f460" class="md me it ly b gy mj mg l mh mi">var n  = 5n;<br/><strong class="ly iu">n % 2n; // 1n</strong></span></pre><h1 id="64c7" class="mk me it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">平等比较</h1><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="7685" class="md me it ly b gy mf mg l mh mi">10n == 10; // true</span></pre><p id="c267" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当<code class="fe lv lw lx ly b">BigInt</code>与非<code class="fe lv lw lx ly b">BigInt</code>数字比较时，使用严格相等的<strong class="lb iu"> </strong> <code class="fe lv lw lx ly b">===</code>总是得到<code class="fe lv lw lx ly b">false</code>。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="30db" class="md me it ly b gy mf mg l mh mi">10n === 10; // false</span></pre><h1 id="c3b3" class="mk me it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">关系运算</h1><p id="bf8c" class="pw-post-body-paragraph kz la it lb b lc nd ju le lf ne jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">这类似于数字比较</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="6763" class="md me it ly b gy mf mg l mh mi">1n &lt; 2<br/>// true<br/><br/>2n &gt; 1<br/>// true<br/><br/>2 &gt; 2<br/>// false<br/><br/>2n &gt; 2<br/>// false<br/><br/>2n &gt;= 2<br/>// true</span></pre><h1 id="e1e9" class="mk me it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">转换为布尔值</h1><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="4e07" class="md me it ly b gy mf mg l mh mi">Boolean(0n) // false</span><span id="a634" class="md me it ly b gy mj mg l mh mi">Boolean(12n) // true</span><span id="1bf3" class="md me it ly b gy mj mg l mh mi">!0n; // true</span><span id="3d33" class="md me it ly b gy mj mg l mh mi">!12n; // false.</span></pre><h1 id="ea80" class="mk me it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">用JSON解析</h1><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="9509" class="md me it ly b gy mf mg l mh mi">var n = 100n;</span><span id="d6c1" class="md me it ly b gy mj mg l mh mi">JSON.stringify(n); <br/>// <!-- -->Uncaught TypeError: Do not know how to serialize a BigInt</span></pre><h1 id="683d" class="mk me it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">方法</h1><h2 id="bb1b" class="md me it bd ml np nq dn mp nr ns dp mt li nt nu mv lm nv nw mx lq nx ny mz nz bi translated">toString</h2><p id="ba0c" class="pw-post-body-paragraph kz la it lb b lc nd ju le lf ne jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">BigInt的<code class="fe lv lw lx ly b">toString</code>方法将返回一个表示指定的<code class="fe lv lw lx ly b">BigInt</code>对象的字符串，在数字的末尾没有<code class="fe lv lw lx ly b">n</code>。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="e2a5" class="md me it ly b gy mf mg l mh mi">var a = 10n;</span><span id="89d1" class="md me it ly b gy mj mg l mh mi">a.toString(); //10</span></pre><p id="1bc7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以使用<code class="fe lv lw lx ly b">toString()</code>方法来解决由stringify方法引起的错误。为了解决这个问题，我们将在<code class="fe lv lw lx ly b">BigInt</code>原型中添加<code class="fe lv lw lx ly b">toJSON</code>方法。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="cfcd" class="md me it ly b gy mf mg l mh mi">BigInt.prototype.toJSON = function() {</span><span id="7c16" class="md me it ly b gy mj mg l mh mi">  <strong class="ly iu">  return this.toString();</strong></span><span id="46c4" class="md me it ly b gy mj mg l mh mi">}</span></pre><h2 id="b108" class="md me it bd ml np nq dn mp nr ns dp mt li nt nu mv lm nv nw mx lq nx ny mz nz bi translated">的价值</h2><p id="ce27" class="pw-post-body-paragraph kz la it lb b lc nd ju le lf ne jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated"><code class="fe lv lw lx ly b"><strong class="lb iu">valueOf()</strong></code>方法返回一个<code class="fe lv lw lx ly b">BigInt</code>对象的包装原始值。</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="a180" class="md me it ly b gy mf mg l mh mi">var obj = Object(10n);</span><span id="bbb7" class="md me it ly b gy mj mg l mh mi">obj.valueOf(); // 10n</span></pre><p id="e121" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">参考:<a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" rel="noopener ugc nofollow" target="_blank"> MDN </a></p><p id="de43" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">跟随<a class="oa ob ep" href="https://medium.com/u/f9ffc26e7e69?source=post_page-----df9b61bc19ef--------------------------------" rel="noopener" target="_blank"> Javascript吉普🚙💨</a>。</p><div class="oc od gp gr oe of"><a href="https://sitepoint.tapfiliate.com/p/payout-methods/new/" rel="noopener  ugc nofollow" target="_blank"><div class="og ab fo"><div class="oh ab oi cl cj oj"><h2 class="bd iu gy z fp ok fr fs ol fu fw is bi translated">登录|站点点</h2><div class="om l"><h3 class="bd b gy z fp ok fr fs ol fu fw dk translated">不支持的浏览器虽然我们的跟踪技术支持旧的浏览器，不幸的是我们的网站不支持…</h3></div><div class="on l"><p class="bd b dl z fp ok fr fs ol fu fw dk translated">sitepoint.tapfiliate.com</p></div></div><div class="oo l"><div class="op l oq or os oo ot ks of"/></div></div></a></div><div class="oc od gp gr oe of"><a rel="noopener  ugc nofollow" target="_blank" href="/15-vs-code-extension-to-save-your-time-and-make-you-a-better-developer-506f79baec53"><div class="og ab fo"><div class="oh ab oi cl cj oj"><h2 class="bd iu gy z fp ok fr fs ol fu fw is bi translated">15 VS代码扩展节省您的时间，让您成为更好的开发人员</h2><div class="om l"><h3 class="bd b gy z fp ok fr fs ol fu fw dk translated">对前端开发人员有用的VS代码扩展列表</h3></div><div class="on l"><p class="bd b dl z fp ok fr fs ol fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="oo l"><div class="ou l oq or os oo ot ks of"/></div></div></a></div><div class="oc od gp gr oe of"><a href="https://medium.com/swlh/dot-vs-bracket-notation-in-accessing-javascript-object-9a3cd116a151" rel="noopener follow" target="_blank"><div class="og ab fo"><div class="oh ab oi cl cj oj"><h2 class="bd iu gy z fp ok fr fs ol fu fw is bi translated">访问JavaScript对象中的点与括号符号。</h2><div class="om l"><h3 class="bd b gy z fp ok fr fs ol fu fw dk translated">了解JavaScript中何时使用点和括号符号。</h3></div><div class="on l"><p class="bd b dl z fp ok fr fs ol fu fw dk translated">medium.com</p></div></div><div class="oo l"><div class="ov l oq or os oo ot ks of"/></div></div></a></div><div class="oc od gp gr oe of"><a href="https://medium.com/better-programming/different-ways-to-duplicate-objects-in-javascript-c199be34ecb7" rel="noopener follow" target="_blank"><div class="og ab fo"><div class="oh ab oi cl cj oj"><h2 class="bd iu gy z fp ok fr fs ol fu fw is bi translated">在JavaScript中复制对象的不同方法</h2><div class="om l"><h3 class="bd b gy z fp ok fr fs ol fu fw dk translated">原来复制物体有很多不同的方法</h3></div><div class="on l"><p class="bd b dl z fp ok fr fs ol fu fw dk translated">medium.com</p></div></div><div class="oo l"><div class="ow l oq or os oo ot ks of"/></div></div></a></div></div></div>    
</body>
</html>