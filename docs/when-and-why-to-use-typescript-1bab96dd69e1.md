# 何时以及为何使用 TypeScript

> 原文：<https://levelup.gitconnected.com/when-and-why-to-use-typescript-1bab96dd69e1>

![](img/3df00b2c50c65b465b58983c1de8f0f2.png)

共享知识对开发团队至关重要。照片:伊斯托克

过去五年来，avaScript 一直是我的主要编程语言。我喜欢用 JavaScript 编程，直到最近，我还不知道为什么要放弃它。我不明白为什么我要牺牲 JavaScript 带来的速度和灵活性。

我喜欢 JS 的动态特性。它让我能够快速实施新的解决方案。我的想法是，TypeScript 增加的类型声明和类型检查会使我速度更慢，效率更低。

最近我的观点发生了变化，在我最近的项目中，我开始理解 TypeScript 的好处。

在本文中，我解释了为什么我改变了对 TypeScript 的看法，以及为什么我认为许多项目将从使用它而不是普通的 JavaScript 中受益。

# **单干**

我认为 JavaScript 在单独工作时是足够的，但是对于团队来说是次优的。

JavaScript 适合快速开发。当独自工作时，如果代码对其他人来说很难理解，那么*也没关系。作为代码库的唯一作者，您很有可能能够很好地理解它并对其进行维护和增强。*

JavaScript 允许快速开发，部分是因为它不需要编写任何类型或接口。你没有“浪费”任何时间来写这个打字稿。

在过去，我已经用普通的 JavaScript 实现了相当大的代码库，并且我已经维护它们很多年了。这很有效，因为我是唯一一个参与这些项目的人。

# **团队合作**

我最近开始开发一个巨大的 JavaScript 代码库，它是由一个开发人员用了几年时间创作的。我的任务是对它做一个小小的改进，但是我没能做到，因为对我来说理解代码中发生的事情太难了。

显然，最初的开发人员仍然能够对它进行修改，但对我来说，代码没有多大意义。编码风格，或者说缺乏编码风格，让我头疼。

我们决定开始迁移项目以使用 TypeScript。我们确定了从类型注释中受益最大的两个领域:

*   所有消息类型的接口。该项目使用一个消息传递系统，在模块和函数之间发送和接收几种不同类型的消息。
*   所有数据库类型的接口。就像消息对象一样，这些 DB 记录也在模块和函数之间传递。

我们添加了这些接口，并继续为所有在签名中包含这些对象作为参数或返回值的函数添加类型。正是这些类型声明使得代码更容易理解。从类型声明中，您可以立即看到该函数接受了哪些数据。接口描述了所有复杂参数的结构和类型。不需要检查调用代码、函数实现或单元测试来找出这些复杂对象是由哪些字段组成的。

**当你在团队中工作时，对代码的共同理解变得*至关重要*。增加的类型信息带来了更多的理解。**

# **更少的 bug**

类型信息也由 TypeScript 编译器使用和检查。编译器会告诉你什么时候你的代码不是类型安全的。

这是类型检查带来的典型好处:*在开发过程的早期捕获 bugs】。您将在开发过程中发现并修复 bug，而不是在您的应用程序处于生产阶段时让您的客户发现它们。*

[Airbnb 报告称](https://www.reddit.com/r/typescript/comments/c079bt/airbnb_think_38_of_their_bugs_could_have_been/)通过在开发过程中添加 TypeScript，bug**减少了**38%。

TypeScript 编译器有一个 *_strict 选项 _* ，它支持更严格的类型检查。启用严格选项后，它将标记出更多的潜在问题。

> *“如果因为编译器警告，使用 TypeScript 比使用普通 JavaScript 更好，为什么你不想把编译器警告调到 10 呢？”—* [*拥抱打字稿严格模式*](https://www.stevefenton.co.uk/2018/01/embracing-typescript-strict-mode/) *—史蒂夫·芬顿*

在迁移现有 JS 项目以使用 TypeScript 时，最好不要使用严格模式。在我们的 TypeScript 迁移项目中，我们已经禁用了严格检查，这使得我们可以轻松地通过构建和运行程序。如果我们决定启用严格检查，在编译器满意地生成一个可运行的程序之前，我们还有更多的工作要做。

# **使用打字稿的成本**

TypeScript 不是免费的。使用它有一些相关的成本:

*   编写类型注释并维护它们需要付出努力
*   类型注释增加了代码库的混乱

应该注意的是，我们的行业正在使用几种技术来捕捉 bug。Typescript 及其静态类型检查只是这些技术中的一种。以下是一些推荐的实践:测试驱动开发(TDD)、结对编程、代码评审、设计评审和林挺。

如果您使用 TDD 和代码审查，您可能已经在早期有效地恢复了 bug。在这种情况下，添加 TypeScript 不会对提高质量产生如此显著的影响。您应该考虑您的情况，并尝试确定 TypeScript 的好处是否会超过成本。

# **面向对象与函数式编程**

在过去的两年中，我一直在学习在我的 JS 项目中使用函数式编程。我有点担心 TypeScript 不太适合函数式编程。我的无知想法是，TypeScript 会使我的代码类似于 Java，其中一切都基于类，一切都必须是对象。

事实证明，我的担心是没有道理的。TypeScript 构建在 JavaScript 之上，我可以用 JavaScript 做的一切也可以在 TypeScript 中完成。我没有被强迫使用类，或者为所有变量声明类型。键入是可选的，可以在最合适的地方添加。

# **结论**

**什么时候使用 TypeScript？**

当满足以下一些条件时，您将从 TypeScript 中受益:

*   您有一个丰富的数据模型，其中数据对象在模块和函数之间传递。
*   您有多个开发人员在该项目中工作。
*   你正在开发一个开源库。库需要类型脚本类型，以便人们可以使用他们的类型脚本代码库。

**为什么要用 TypeScript？**

*   类型检查可以及早发现错误。
*   它通过增加代码的可理解性和可维护性来支持团队合作。由于同样的原因，它也使得新的团队成员更快地适应环境。

**什么时候坚持使用 JavaScript 比较好？**

有些情况下，我不会使用 TypeScript，而是使用普通的 JavaScript:

*   你有使用 TDD 和代码评审的 JavaScript 开发经验。
*   用 JavaScript 开发原型很快。
*   一次性脚本，如迁移脚本等。，非常适合用 JavaScript 来完成。