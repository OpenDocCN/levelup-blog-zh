<html>
<head>
<title>Going Serverless with NodeJS &amp; GraphQL (Part I) — Setting up Serverless</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用NodeJS &amp; GraphQL实现无服务器(第一部分)——设置无服务器</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/going-serverless-with-nodejs-graphql-5b34f5d280f4?source=collection_archive---------1-----------------------#2018-12-25">https://levelup.gitconnected.com/going-serverless-with-nodejs-graphql-5b34f5d280f4?source=collection_archive---------1-----------------------#2018-12-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="aa3c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在过去的几个月里，我对AWS上的<a class="ae kl" href="https://serverless.com/" rel="noopener ugc nofollow" target="_blank">无服务器</a>很感兴趣，它使用云形成模板来提供资源。我决定分享我所学到的和创造的东西，我认为这将有助于其他任何想要在AWS上一头扎进<a class="ae kl" href="https://serverless.com/" rel="noopener ugc nofollow" target="_blank">无服务器</a>/云形成的人:)</p><p id="029a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">第一篇文章(第1部分)将展示如何初始化<a class="ae kl" href="https://serverless.com/" rel="noopener ugc nofollow" target="_blank">无服务器</a>，下一篇文章(<a class="ae kl" rel="noopener ugc nofollow" target="_blank" href="/going-serverless-with-nodejs-graphql-part-ii-1810445028a4">第2部分</a>)将展示如何在其上实现GraphQL。</p><p id="10f5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下面你会发现我的初步计划/架构。这对于一般的应用程序很有用，对于我的用例，我将构建一个预订应用程序。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/cd65716a32fe4c409272686079db18ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*luzrrxaE39RRNO96vHFpAA.png"/></div></div></figure><p id="21d7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最初，在几个小时的阅读和研究后，我开始在<a class="ae kl" href="https://serverless.com/" rel="noopener ugc nofollow" target="_blank">无服务器</a>网站上浏览他们的基础知识。我可以把类似上面架构的模板文件放在一起。下面是我的第一个模板文件的要点。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="ky kz l"/></div></figure><p id="0724" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">不要担心外部链接的文件(暂时在参考资料中)。这个模板的想法是在<a class="ae kl" href="https://aws.amazon.com/" rel="noopener ugc nofollow" target="_blank"> AWS </a>上创建资源，比如可以在<a class="ae kl" href="https://aws.amazon.com/dynamodb/" rel="noopener ugc nofollow" target="_blank">dynamo db</a>(AWS提供的DaaS)上执行动作的Lambda函数。</p><p id="8dd6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Lambda函数需要被赋予明确的权限，在这个例子中，我们通过指定它可以对DynamoDB执行的可能操作，为它们提供了与dynamo db交互的能力。它可以在其上执行这些交互的资源也必须显式声明——在本例中，是一个引用为<code class="fe la lb lc ld b">EventsGqlDynamoDbTable</code>的DynamoDB表。下面的快照显示了我提到的所有权限。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="ky kz l"/></div></figure><p id="d964" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，我们提供了一个函数，该函数基于到AWS API网关上特定路径的HTTP POST而被触发。在这种情况下，路线是<code class="fe la lb lc ld b">/events</code>。这个端点将是我们稍后在教程中连接GraphQL API的地方。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="ky kz l"/></div></figure><p id="de75" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后，我们提供一组我们将实际使用的资源的参考:</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="ky kz l"/></div></figure><p id="0cea" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">其中，引用DynamoDB的YML为:</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="ky kz l"/></div></figure><p id="d360" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一旦这些都设置好了，你就可以开始开发了。您可以从无服务器“入门”部分的基础知识<a class="ae kl" href="https://serverless.com/framework/docs/getting-started/" rel="noopener ugc nofollow" target="_blank">开始。首先，我们将添加一个名为<code class="fe la lb lc ld b">handler.js</code>的文件，它导出一个函数<code class="fe la lb lc ld b">eventQuery</code>,因为这是模板在其配置中指定的预期用途。</a></p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="ky kz l"/></div></figure><p id="07ac" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我用这里描述的东西做了一个样板，做了一些增强和改进。我希望这能帮助你轻松入门。你可以通过这个样板文件上的<code class="fe la lb lc ld b">readme.md</code>立即开始。它为您提供了无服务器yml模板、GraphQL API、Typescript / webpack配置、Jest单元测试功能、无服务器离线、VS-Code上的调试功能&amp; CI/CD管道上的调试功能<a class="ae kl" href="https://about.gitlab.com/" rel="noopener ugc nofollow" target="_blank"> git-lab上的</a>您可以立即找到以下链接:</p><div class="le lf gp gr lg lh"><a href="https://dasithkuruppu.github.io/Serverless-GraphQL/" rel="noopener  ugc nofollow" target="_blank"><div class="li ab fo"><div class="lj ab lk cl cj ll"><h2 class="bd ir gy z fp lm fr fs ln fu fw ip bi translated">🌩️无服务器节点js/GraphQL样板文件</h2><div class="lo l"><h3 class="bd b gy z fp lm fr fs ln fu fw dk translated">🌩AWS上使用无服务器yml模板的typescript/nodejs的️样板文件，使用graphQL作为由dynamond &amp;…</h3></div><div class="lp l"><p class="bd b dl z fp lm fr fs ln fu fw dk translated">dasithkuruppu.github.io</p></div></div><div class="lq l"><div class="lr l ls lt lu lq lv kw lh"/></div></div></a></div><div class="le lf gp gr lg lh"><a href="https://github.com/DasithKuruppu/serverlessGraphQL" rel="noopener  ugc nofollow" target="_blank"><div class="li ab fo"><div class="lj ab lk cl cj ll"><h2 class="bd ir gy z fp lm fr fs ln fu fw ip bi translated">DasithKuruppu/server lesssgraphql</h2><div class="lo l"><h3 class="bd b gy z fp lm fr fs ln fu fw dk translated">AWS上的无服务器/lambda样板文件，使用graphQL作为API的云格式…</h3></div><div class="lp l"><p class="bd b dl z fp lm fr fs ln fu fw dk translated">github.com</p></div></div><div class="lq l"><div class="lw l ls lt lu lq lv kw lh"/></div></div></a></div><blockquote class="lx ly lz"><p id="3328" class="jn jo ma jp b jq jr js jt ju jv jw jx mb jz ka kb mc kd ke kf md kh ki kj kk ij bi translated">在下一篇文章中，也就是第二部分，我将会添加一些内容来展示我是如何集成GraphQL的。</p></blockquote><p id="c743" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">点击查看<a class="ae kl" rel="noopener ugc nofollow" target="_blank" href="/going-serverless-with-nodejs-graphql-part-ii-1810445028a4">第二部分的GraphQL实现。</a></p><div class="le lf gp gr lg lh"><a rel="noopener  ugc nofollow" target="_blank" href="/going-serverless-with-nodejs-graphql-part-ii-1810445028a4"><div class="li ab fo"><div class="lj ab lk cl cj ll"><h2 class="bd ir gy z fp lm fr fs ln fu fw ip bi translated">使用NodeJS &amp; GraphQL实现无服务器—第二部分</h2><div class="lo l"><h3 class="bd b gy z fp lm fr fs ln fu fw dk translated">在你阅读这篇文章之前，请注意这里有关于云形成模板的第一篇文章。你可以读给…</h3></div><div class="lp l"><p class="bd b dl z fp lm fr fs ln fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="lq l"><div class="me l ls lt lu lq lv kw lh"/></div></div></a></div></div><div class="ab cl mf mg hu mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ij ik il im in"><figure class="kn ko kp kq gt kr gh gi paragraph-image"><a href="https://levelup.gitconnected.com"><div class="gh gi mm"><img src="../Images/439094b9a664ef0239afbc4565c6ca49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S9uYu-fFL3hIQLGVu0o-EQ.png"/></div></a></figure><div class="le lf gp gr lg lh"><a href="https://gitconnected.com/learn/serverless-computing" rel="noopener  ugc nofollow" target="_blank"><div class="li ab fo"><div class="lj ab lk cl cj ll"><h2 class="bd ir gy z fp lm fr fs ln fu fw ip bi translated">了解无服务器计算-最佳无服务器计算教程(2019) | gitconnected</h2><div class="lo l"><h3 class="bd b gy z fp lm fr fs ln fu fw dk translated">7大无服务器计算教程。课程由开发者提交并投票，使您能够找到最好的…</h3></div><div class="lp l"><p class="bd b dl z fp lm fr fs ln fu fw dk translated">gitconnected.com</p></div></div><div class="lq l"><div class="mn l ls lt lu lq lv kw lh"/></div></div></a></div></div></div>    
</body>
</html>