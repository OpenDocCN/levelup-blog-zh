<html>
<head>
<title>How to Detect Topics in Speech</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何检测语音中的话题</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-detect-topics-in-speech-f60552e7ce36?source=collection_archive---------11-----------------------#2022-02-21">https://levelup.gitconnected.com/how-to-detect-topics-in-speech-f60552e7ce36?source=collection_archive---------11-----------------------#2022-02-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="667a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">根据IAB分类法确定相关主题</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/6f41cb6e112bf9151c3c6003203d0dc9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eNXdDiQ2e0S0pnW3ib3lXw.jpeg"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">由<a class="ae le" href="https://unsplash.com/@nate_dumlao?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">内森·杜姆劳</a>在<a class="ae le" href="https://unsplash.com/s/photos/variety?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="0742" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">主题检测是一种发现文档集合背后的抽象主题的技术。将文本分类到特定的主题/领域主要是自然语言处理技术的一部分。</p><p id="9aab" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">虽然没有关于主题应该如何分类的规则和规定，但是有一些你可以遵守的内容分类法。例如，<a class="ae le" href="https://www.iab.com/guidelines/content-taxonomy/" rel="noopener ugc nofollow" target="_blank"> IAB分类法</a>提供了一个标准化的主题列表。目的是</p><blockquote class="lf lg lh"><p id="8a1d" class="jq jr li js b jt ju jv jw jx jy jz ka lj kc kd ke lk kg kh ki ll kk kl km kn im bi translated">…提供额外的实用程序，旨在最大限度地降低内容分类信号可能被用来生成有关种族、政治、宗教或其他个人特征等可能导致歧视的敏感数据点的风险</p></blockquote><p id="75d4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">请看下面的例子，它说明了IAB分类法中可用的几个类别:</p><pre class="kp kq kr ks gt lm ln lo lp aw lq bi"><span id="1b55" class="lr ls it ln b gy lt lu l lv lw">MedicalHealth&gt;DiseasesAndConditions&gt;Injuries<br/>MedicalHealth&gt;DiseasesAndConditions&gt;Injuries&gt;FirstAid<br/>MedicalHealth&gt;DiseasesAndConditions&gt;LungAndRespiratoryHealth<br/>MedicalHealth&gt;DiseasesAndConditions&gt;MentalHealth<br/>...<br/>Style&amp;Fashion&gt;PersonalCare&gt;Shaving<br/>Style&amp;Fashion&gt;StreetStyle<br/>Technology&amp;Computing<br/>Technology&amp;Computing&gt;ArtificialIntelligence</span></pre><p id="e4b9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe lx ly lz ln b">&gt;</code>之后的主题是指前一主题的副主题:</p><pre class="kp kq kr ks gt lm ln lo lp aw lq bi"><span id="6612" class="lr ls it ln b gy lt lu l lv lw">Topic1&gt;Subtopic of topic 1&gt;Subtopic of subtopic of topic 1</span></pre><p id="6b98" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">当涉及到音频数据时，在实际的主题检测过程之前，基础语音被转换成文本。因此，整个过程由两个阶段管道组成:</p><ul class=""><li id="58ac" class="ma mb it js b jt ju jx jy kb mc kf md kj me kn mf mg mh mi bi translated">对语音进行语音识别以获得转录文本</li><li id="b05b" class="ma mb it js b jt mj jx mk kb ml kf mm kj mn kn mf mg mh mi bi translated">转录上的主题检测以获得相关的标签/类别</li></ul><p id="d3df" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们探索如何通过AssemblyAI的<a class="ae le" href="https://www.assemblyai.com/" rel="noopener ugc nofollow" target="_blank">语音转文本API </a>轻松执行话题检测。</p></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="157f" class="mv ls it bd mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr bi translated">设置</h1><p id="cf76" class="pw-post-body-paragraph jq jr it js b jt ns jv jw jx nt jz ka kb nu kd ke kf nv kh ki kj nw kl km kn im bi translated">在本教程中，实现基于API调用，并使用Python作为编程语言。但是，由于输入输出是JSON，所以也可以很容易地用其他编程语言替换它。</p><h2 id="9d07" class="lr ls it bd mw nx ny dn na nz oa dp ne kb ob oc ni kf od oe nm kj of og nq oh bi translated">API密钥</h2><p id="0c53" class="pw-post-body-paragraph jq jr it js b jt ns jv jw jx nt jz ka kb nu kd ke kf nv kh ki kj nw kl km kn im bi translated">首先，前往<a class="ae le" href="https://app.assemblyai.com/signup" rel="noopener ugc nofollow" target="_blank"> AssemblyAI的注册页面</a>注册一个新的试用账户。它附带每月3小时的转录。登录平台，您应该会看到以下主页:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi oi"><img src="../Images/e5ad03dd2cbbe367f2a6961d6a457031.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*eattlmHOGOOqSBgb"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">作者图片</figcaption></figure><p id="5e31" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">记下API键，因为您稍后将使用它来调用转录API。</p><h2 id="0440" class="lr ls it bd mw nx ny dn na nz oa dp ne kb ob oc ni kf od oe nm kj of og nq oh bi translated">要求</h2><p id="e61e" class="pw-post-body-paragraph jq jr it js b jt ns jv jw jx nt jz ka kb nu kd ke kf nv kh ki kj nw kl km kn im bi translated">因为需要进行HTTP API调用，所以我们需要一个Python包，而<code class="fe lx ly lz ln b">requests</code>包是一个很好的选择。按照以下方式安装:</p><pre class="kp kq kr ks gt lm ln lo lp aw lq bi"><span id="929e" class="lr ls it ln b gy lt lu l lv lw">pip install requests</span></pre></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="4acc" class="mv ls it bd mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr bi translated">履行</h1><p id="16ab" class="pw-post-body-paragraph jq jr it js b jt ns jv jw jx nt jz ka kb nu kd ke kf nv kh ki kj nw kl km kn im bi translated">假设您已经有一个链接到音频的可访问URL，主题检测的步骤如下:</p><ul class=""><li id="189b" class="ma mb it js b jt ju jx jy kb mc kf md kj me kn mf mg mh mi bi translated">通过POST HTTP调用转录API。这个调用需要<code class="fe lx ly lz ln b">audio_url</code>，它指向你的音频文件的可访问URL，还需要将<code class="fe lx ly lz ln b">iab_categories</code>参数设置为<code class="fe lx ly lz ln b">true</code>。</li><li id="6aca" class="ma mb it js b jt mj jx mk kb ml kf mm kj mn kn mf mg mh mi bi translated">在第一次API调用之后，您必须对同一个转录API进行第二次调用，但这次是通过GET。返回的响应将包含一个指示转录过程状态的<code class="fe lx ly lz ln b">status</code>键。这个过程完成后，您应该会得到带有相应标签的转录文本。</li></ul><h2 id="ecbd" class="lr ls it bd mw nx ny dn na nz oa dp ne kb ob oc ni kf od oe nm kj of og nq oh bi translated">对脚本API进行POST调用</h2><p id="7f71" class="pw-post-body-paragraph jq jr it js b jt ns jv jw jx nt jz ka kb nu kd ke kf nv kh ki kj nw kl km kn im bi translated">我们将调用<a class="ae le" href="https://docs.assemblyai.com/api-ref/v2-transcript" rel="noopener ugc nofollow" target="_blank"> AssemblyAI的脚本API </a>。它接受JSON输入并返回JSON作为输出。让我们用下面的代码片段创建一个名为<code class="fe lx ly lz ln b">transcribe.py.</code>的新Python文件:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="oj ok l"/></div></figure><p id="4a22" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">需要注意的一点是，您必须将<code class="fe lx ly lz ln b">iab_categories</code>参数设置为<code class="fe lx ly lz ln b">true </code>，否则返回的响应将不会包含关于主题检测的信息。</p><p id="743a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">另外，请根据您现有的变量替换<code class="fe lx ly lz ln b">api_key</code>和<code class="fe lx ly lz ln b">audio_url</code>变量。运行以下命令启动转录过程:</p><pre class="kp kq kr ks gt lm ln lo lp aw lq bi"><span id="e5d0" class="lr ls it ln b gy lt lu l lv lw">python transcribe.py</span></pre><p id="ce3b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">它将返回一个JSON格式的输出，其中包含相当多的键值对:</p><pre class="kp kq kr ks gt lm ln lo lp aw lq bi"><span id="7b34" class="lr ls it ln b gy lt lu l lv lw">{ "id": "xxxxxx"<br/>  "language_model": "assemblyai_default",<br/>  "acoustic_model": "assemblyai_default",<br/>  "language_code": "en_us",<br/>  "status": "queued",<br/>  "audio_url": "https://cdn.assemblyai.com/upload/d04b8505-3cf2-422a-a6e9-b9c6af7c8c6c",<br/>  "<!-- -->iab_categories<!-- -->": true, ...<br/>}</span></pre><p id="641d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">不要被键值对的数量吓到，因为重要的键值对如下所示:</p><ul class=""><li id="4684" class="ma mb it js b jt ju jx jy kb mc kf md kj me kn mf mg mh mi bi translated"><code class="fe lx ly lz ln b">id</code>—代表您的流程的唯一标识符。请记下这个id，因为稍后将使用它来检索转录结果。</li><li id="f016" class="ma mb it js b jt mj jx mk kb ml kf mm kj mn kn mf mg mh mi bi translated"><code class="fe lx ly lz ln b">status</code> —表示您的转录进度</li></ul><p id="7e81" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果返回的<code class="fe lx ly lz ln b">status</code>是一个<code class="fe lx ly lz ln b">error</code>，这意味着转录不成功。这可能是由于以下原因之一:</p><ul class=""><li id="c2a9" class="ma mb it js b jt ju jx jy kb mc kf md kj me kn mf mg mh mi bi translated">不支持的音频文件格式</li><li id="1a82" class="ma mb it js b jt mj jx mk kb ml kf mm kj mn kn mf mg mh mi bi translated">音频文件不包含音频数据</li><li id="5814" class="ma mb it js b jt mj jx mk kb ml kf mm kj mn kn mf mg mh mi bi translated">音频文件太短(&lt; 200毫秒)</li><li id="b2bb" class="ma mb it js b jt mj jx mk kb ml kf mm kj mn kn mf mg mh mi bi translated">无法访问音频文件的URL</li><li id="ddf9" class="ma mb it js b jt mj jx mk kb ml kf mm kj mn kn mf mg mh mi bi translated">API端的错误</li></ul><p id="cb8d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">继续下一部分以检索转录结果。请注意，根据音频文件的长度，转录过程可能需要10分钟。</p><h2 id="8b72" class="lr ls it bd mw nx ny dn na nz oa dp ne kb ob oc ni kf od oe nm kj of og nq oh bi translated">对脚本API进行GET调用</h2><p id="80da" class="pw-post-body-paragraph jq jr it js b jt ns jv jw jx nt jz ka kb nu kd ke kf nv kh ki kj nw kl km kn im bi translated">在同一个工作目录中创建一个名为<code class="fe lx ly lz ln b">transcribe_file.py</code>的新文件，并添加以下代码:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="oj ok l"/></div></figure><p id="523f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">它将调用相同的转录API，但是通过GET HTTP。像往常一样，替换<code class="fe lx ly lz ln b">api_key</code>并使用从之前的POST HTTP调用返回的同一个<code class="fe lx ly lz ln b">id</code>。</p><p id="f3ac" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在您的终端上运行以下命令来检查转录的状态:</p><pre class="kp kq kr ks gt lm ln lo lp aw lq bi"><span id="212c" class="lr ls it ln b gy lt lu l lv lw">python transcribe_file.py</span></pre><p id="5fe3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果转录完成，它将返回JSON作为输出。输出包含<code class="fe lx ly lz ln b">iab_categories_result</code>键，表示从语音中检测到的主题:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="oj ok l"/></div></figure><p id="86d4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在撰写本文时，API支持大约698种不同的标签。该密钥包含以下数据:</p><ul class=""><li id="eab7" class="ma mb it js b jt ju jx jy kb mc kf md kj me kn mf mg mh mi bi translated"><code class="fe lx ly lz ln b">status</code>:可以是<code class="fe lx ly lz ln b">success</code>也可以是<code class="fe lx ly lz ln b">unavailable</code>(表示故障)</li><li id="8303" class="ma mb it js b jt mj jx mk kb ml kf mm kj mn kn mf mg mh mi bi translated"><code class="fe lx ly lz ln b">summary</code>:字典列表(文本、标签、时间戳)。<code class="fe lx ly lz ln b">text</code>表示转录文本，而<code class="fe lx ly lz ln b">timestamp</code>表示语音中转录的开始和结束。另一方面，<code class="fe lx ly lz ln b">labels</code>包含一个字典列表(相关性，标签)。<code class="fe lx ly lz ln b">label</code>表示基于IAB分类法检测到的主题，而<code class="fe lx ly lz ln b">relevance</code>提供0到1之间的分数，表示标签与文本的相关程度。</li><li id="526f" class="ma mb it js b jt mj jx mk kb ml kf mm kj mn kn mf mg mh mi bi translated"><code class="fe lx ly lz ln b">summary</code>:对于检测到的每个主题/标签，它将具有0到1之间的关于标签在整个音频文件中的相关程度的汇总分数。</li></ul><p id="ed7a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在本例中，它返回以下与谈论校园枪击事件的音频剪辑相关的重要主题:</p><pre class="kp kq kr ks gt lm ln lo lp aw lq bi"><span id="c434" class="lr ls it ln b gy lt lu l lv lw">"NewsAndPolitics&gt;Disasters": 1,                                   "MedicalHealth&gt;DiseasesAndConditions&gt;Injuries": 0.38230085372924805,                                   "Sports&gt;CollegeSports": 0.3760283589363098,</span></pre><h2 id="935e" class="lr ls it bd mw nx ny dn na nz oa dp ne kb ob oc ni kf od oe nm kj of og nq oh bi translated">上传本地音频文件(可选)</h2><p id="1784" class="pw-post-body-paragraph jq jr it js b jt ns jv jw jx nt jz ka kb nu kd ke kf nv kh ki kj nw kl km kn im bi translated">如果你没有任何可访问的URL，你可以使用AssemblyAI提供的<a class="ae le" href="https://docs.assemblyai.com/reference#upload" rel="noopener ugc nofollow" target="_blank">上传API </a>。</p><p id="3ce1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们用下面的代码创建一个名为<code class="fe lx ly lz ln b">upload_file.py</code>的新文件来测试一下(相应地替换<code class="fe lx ly lz ln b">filename</code>和<code class="fe lx ly lz ln b">api_key</code>变量):</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="oj ok l"/></div></figure><p id="cb91" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">运行以下命令，开始将音频文件分块上传到服务器:</p><pre class="kp kq kr ks gt lm ln lo lp aw lq bi"><span id="a67d" class="lr ls it ln b gy lt lu l lv lw">python upload_file.py</span></pre><p id="6899" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">它将返回一个包含可访问URL的JSON输出:</p><pre class="kp kq kr ks gt lm ln lo lp aw lq bi"><span id="4fef" class="lr ls it ln b gy lt lu l lv lw">{"upload_url": "https://cdn.assemblyai.com/upload/d04b8505-3cf2-422a-a6e9-b9c6af7c8c6c"}</span></pre><p id="7850" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">调用转录API时只需使用<code class="fe lx ly lz ln b">upload_url</code>的值，就可以了。</p></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="5fe5" class="mv ls it bd mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr bi translated">结论</h1><p id="c725" class="pw-post-body-paragraph jq jr it js b jt ns jv jw jx nt jz ka kb nu kd ke kf nv kh ki kj nw kl km kn im bi translated">让我们回顾一下你今天所学的内容。</p><p id="9f05" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">本文简要介绍了语音中的话题检测和IAB分类法。</p><p id="9b99" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">然后，介绍了如何在AssemblyAI平台上安装requests模块和注册新帐户。</p><p id="b35b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">随后，它解释了使POST和GET API调用转录可通过URL访问的音频文件的实现过程。除此之外，它还展示了上传本地音频文件以通过URL访问它所需的步骤。</p><p id="e2e3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">感谢你阅读这篇文章。祝你有美好的一天！</p></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="a02c" class="mv ls it bd mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr bi translated">参考</h1><ol class=""><li id="744a" class="ma mb it js b jt ns jx nt kb ol kf om kj on kn oo mg mh mi bi translated"><a class="ae le" href="https://docs.assemblyai.com/audio-intelligence#topic-detection-iab-classification" rel="noopener ugc nofollow" target="_blank"> AssemblyAI —文档(主题检测)</a></li></ol></div></div>    
</body>
</html>