<html>
<head>
<title>Modernize Your Android App With The Single Activity Pattern</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用单一活动模式更新您的Android应用程序</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/modernize-your-android-app-with-the-single-activity-pattern-1526407a7d4?source=collection_archive---------2-----------------------#2022-08-23">https://levelup.gitconnected.com/modernize-your-android-app-with-the-single-activity-pattern-1526407a7d4?source=collection_archive---------2-----------------------#2022-08-23</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/42d6b16edc9d93952fd5ad11b8d7aafe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*pzmUDgST-8qCKAgu"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">丹尼尔·伊德里在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="1234" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你已经开发Android应用程序3-5年了，你可能在一开始就知道应用程序的一个屏幕应该按照1-1的关系分配给一个活动。</p><p id="1001" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这是向框架迈出第一步时的主要经验之一，以保持开始时的简单性，因为这是开发应用程序的标准方式很长一段时间了。</p><p id="9f6a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这个框架已经发展了很多年，不同的方法来来去去，其中之一，也是我个人的偏好，是单一活动模式。</p><h1 id="d7ef" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">单一活动模式</h1><p id="94a9" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">这种模式认为，应用程序不是为每个屏幕使用一个活动，而是用一个单独的活动来构建，该活动充当将为每个屏幕替换的片段的容器，并通过堆栈来管理。核心思想是为片段改变活动。</p><p id="de19" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如今，谷歌正在推广这种模式，将其作为开发Android应用的标准。你可以去看看谷歌软件工程师伊恩·莱克举办的这个<a class="ae kf" href="https://www.youtube.com/watch?v=2k8x8V77CrU" rel="noopener ugc nofollow" target="_blank">会议</a>，但是如果你觉得懒的话，以下是演讲中指出的主要好处:</p><ul class=""><li id="5781" class="mh mi it ki b kj kk kn ko kr mj kv mk kz ml ld mm mn mo mp bi translated">在活动之间共享状态比在片段之间共享更难。片段可以使用容器活动，在附加到活动生命周期的视图模型的帮助下共享这些数据，这将在片段替换后继续存在。</li><li id="e606" class="mh mi it ki b kj mq kn mr kr ms kv mt kz mu ld mm mn mo mp bi translated">在处理片段时，孤立地测试UI更容易。</li><li id="588a" class="mh mi it ki b kj mq kn mr kr ms kv mt kz mu ld mm mn mo mp bi translated">更好地支持片段之间的动画转换，而不是活动之间的转换。</li><li id="2f32" class="mh mi it ki b kj mq kn mr kr ms kv mt kz mu ld mm mn mo mp bi translated">在屏幕之间切换时，避免暗示操作系统。每次创建和销毁活动时，活动都需要通知操作系统，这增加了额外的开销，但这并不是真正必要的。总体来说碎片比较轻。</li><li id="cefa" class="mh mi it ki b kj mq kn mr kr ms kv mt kz mu ld mm mn mo mp bi translated">遵循单一活动模式允许开发者充分利用N<a class="ae kf" href="https://developer.android.com/guide/navigation/navigation-getting-started" rel="noopener ugc nofollow" target="_blank">aviation Jetpack库</a>并使深度链接更容易。</li></ul><p id="7075" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">通过使用导航库，您还可以直观地展示应用程序的导航逻辑，如下图所示。</p><figure class="mw mx my mz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mv"><img src="../Images/1688b5faeb96edccd20a0e340d3f1056.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Pt04qdB4xzOC5RcD.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">谷歌<a class="ae kf" href="https://developer.android.com/guide/navigation/navigation-getting-started" rel="noopener ugc nofollow" target="_blank">的导航组件示例</a></figcaption></figure><p id="fa02" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如今，随着Jetpack Compose的发布，我们又多了一个实现单一活动模式的选择。除了使用片段，我们可以为每个屏幕使用composables，并使用Compose导航库在它们之间导航，完全消除片段。</p><p id="254e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您还可以为每个片段创建一个主要的可组合函数，并继续使用之前解释过的导航组件来保持导航的可视化表示。老实说，我不认为使用这些片段作为组件的容器会对性能产生不利影响，所以我个人更喜欢它对我的应用程序的显示内容、导航逻辑和我认为向Jetpack Compose的过渡这样会更容易。</p></div><div class="ab cl na nb hx nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="im in io ip iq"><p id="247f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你想阅读更多这样的内容，并支持我，不要忘记检查我的个人资料，或给媒体一个机会，成为会员，以获得我和其他作家的无限故事。一个月只要5美元，如果你使用这个链接，我会得到一小笔佣金。</p><div class="nh ni gp gr nj nk"><a href="https://medium.com/@molidev8/membership" rel="noopener follow" target="_blank"><div class="nl ab fo"><div class="nm ab nn cl cj no"><h2 class="bd iu gy z fp np fr fs nq fu fw is bi translated">通过我的推荐链接加入Medium—Miguel</h2><div class="nr l"><h3 class="bd b gy z fp np fr fs nq fu fw dk translated">阅读米格尔的每一个故事(以及媒体上成千上万的其他作家)。你的会员费直接支持米盖尔…</h3></div><div class="ns l"><p class="bd b dl z fp np fr fs nq fu fw dk translated">medium.com</p></div></div><div class="nt l"><div class="nu l nv nw nx nt ny jz nk"/></div></div></a></div></div></div>    
</body>
</html>