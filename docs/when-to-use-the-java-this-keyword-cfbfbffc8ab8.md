# 何时使用 Java“this”关键字

> 原文：<https://levelup.gitconnected.com/when-to-use-the-java-this-keyword-cfbfbffc8ab8>

## 关于一个最普遍的 Java 关键字的权威指南，带有示例。

![](img/bb0e2660ec9293f19d7afd18a6487b2e.png)

代码评审是一份不断赠送的礼物。即使在你和你的同事一起研究过之后，进一步发现的潜力还是被低估了。

前几天，我在查看一个拉取请求的一些评论时，我发现了这样的内容:

> *“这个”这里不需要。*

而`this`是 Java 关键字。在这部分代码中，它被用来给一个测试类变量分配一个 mock。类似于:

你知道吗，评论是 100%正确的。测试按预期运行，但是在这种情况下我们不需要`this`。

# 什么是 Java this 关键字的原子解释

使用`this`,你可以从当前对象的一个方法中获得对当前对象的直接引用。

就是这样。

我敢打赌，您也想象到了在使用它时可能出现的混乱和冗余。如果不使用`this` 关键字也可以访问当前对象的方法和变量，为什么还需要一个特殊的关键字呢？

因为你可能会面临以下五种情况之一:

# 当实例变量和方法参数之间有歧义时

Java 最佳实践促进了一种编写 setter 方法的特定方式。

我敢说这是`this`最常见的用法。当一个方法接受一个与其对象的一个变量同名的参数时，你需要一种方法来识别哪个是哪个。

# 当您想从同一个类中的另一个构造函数调用构造函数时

如果您接受不同的参数集来创建同一类型的对象，那么您很可能要么使用生成器，要么使用重载的构造函数。如果是后者，不管调用哪个构造函数，您可能都需要调用另一个来处理默认属性，这些属性应该总是初始对象定义的一部分。

再次出手相救。这一次我们用它从另一个方法内部引用一个方法(更确切地说是一个构造函数)。要记住的重要 Java 规则:`this()`需要是每个构造函数调用另一个构造函数的第一条语句。

# 当您需要从方法中返回当前的类实例时

这是赋予构建器设计模式权力的规则。您可以将连续的属性链接到一个对象定义，因为每次添加都会返回更新的对象。更新后的对象由`this`返回。

一旦你看到它的实际应用，你会印象更加深刻:

就像装配线一样，这里的汽车也是一步一步制造的，每个工位都完成了之前的所有工作，并增加了一点点。

# 当您需要将当前类实例传递给方法时

就像你从一个方法返回`this`一样简单，你可以把它作为一个参数传递给另一个方法。它们带着实例变量和方法，允许在其他类中访问它们。权力越大，责任越大！

# 当嵌套的非静态类需要访问外部类的实例时

我们必须将嵌套类视为外部类的任何其他成员。

> 写这篇文章时我才知道的一些很酷的事情。 [*非静态嵌套类称为* **内部类** *，静态嵌套类称为*](https://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)***。***

**就像上面例子中的方法一样，Java 允许你通过关键字`this`获得对父类实例的引用。**

**`this`关键字的这个特性不仅允许你访问汽车实例变量，就像例子中一样，而且如果需要的话，还可以访问汽车实例本身。**