<html>
<head>
<title>Set Up a Simple Go Development Environment with Docker</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Docker建立一个简单的Go开发环境</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/setup-simple-go-development-environment-with-docker-b8b9c0d4e0a8?source=collection_archive---------1-----------------------#2019-09-07">https://levelup.gitconnected.com/setup-simple-go-development-environment-with-docker-b8b9c0d4e0a8?source=collection_archive---------1-----------------------#2019-09-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/a28f01174be88ea00b56ad95d71e76e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g5TEj1R0X0CzTgvielr0Yw.png"/></div></div></figure><h2 id="1281" class="iz ja jb bd b dl jc jd je jf jg jh dk ji translated" aria-label="kicker paragraph">去休息吧</h2><div class=""/><h1 id="a024" class="kh ki jb bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated">史诗</h1><p id="3f24" class="pw-post-body-paragraph lf lg jb lh b li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc ij bi translated">用Docker建立一个健壮的本地开发环境。</p><ul class=""><li id="9759" class="md me jb lh b li mf lm mg lq mh lu mi ly mj mc mk ml mm mn bi translated">实施单个启动脚本来启动环境。</li><li id="43ab" class="md me jb lh b li mo lm mp lq mq lu mr ly ms mc mk ml mm mn bi translated">记录开发人员应该如何启动环境并运行一些特定命令(例如，启动/停止应用程序)。</li><li id="7edf" class="md me jb lh b li mo lm mp lq mq lu mr ly ms mc mk ml mm mn bi translated">不应该有任何依赖，开发人员必须安装到他们的本地机器(除了Docker和编辑器)。</li><li id="a79a" class="md me jb lh b li mo lm mp lq mq lu mr ly ms mc mk ml mm mn bi translated">开发人员可以将源代码从他们的本地机器安装到环境中，这样他们就可以使用他们喜欢的编辑器编写代码，并让他们的代码自动同步到环境中。</li><li id="2985" class="md me jb lh b li mo lm mp lq mq lu mr ly ms mc mk ml mm mn bi translated">记录开发人员如何将源代码从他们的本地机器挂载到环境中。</li><li id="8613" class="md me jb lh b li mo lm mp lq mq lu mr ly ms mc mk ml mm mn bi translated">至少有一个工具可以调试应用程序。该工具应该是健壮且易于使用的。</li><li id="9ed3" class="md me jb lh b li mo lm mp lq mq lu mr ly ms mc mk ml mm mn bi translated">记录开发人员在开发过程中应该如何调试应用程序。</li></ul><p id="c2e8" class="pw-post-body-paragraph lf lg jb lh b li mf lk ll lm mg lo lp lq mt ls lt lu mu lw lx ly mv ma mb mc ij bi translated">更多详情，请参考此票证。</p></div><div class="ab cl mx my hu mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="ij ik il im in"><h1 id="6062" class="kh ki jb bd kj kk ne km kn ko nf kq kr ks ng ku kv kw nh ky kz la ni lc ld le bi translated">范围</h1><p id="ced3" class="pw-post-body-paragraph lf lg jb lh b li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc ij bi translated">在本文中，我将从一个简单的脚本开始，启动一个Docker开发环境，该环境可以执行Go代码并将源代码装载到环境中，这样开发人员就可以直接在本地机器上使用自己喜欢的编辑器编写代码。</p></div><div class="ab cl mx my hu mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="ij ik il im in"><h1 id="6e5a" class="kh ki jb bd kj kk ne km kn ko nf kq kr ks ng ku kv kw nh ky kz la ni lc ld le bi translated">履行</h1><h2 id="acf9" class="nj ki jb bd kj nk nl dn kn nm nn dp kr lq no np kv lu nq nr kz ly ns nt ld jh bi translated">基础图像</h2><p id="c9cc" class="pw-post-body-paragraph lf lg jb lh b li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc ij bi translated">有了这些简单的需求，就没有必要定义新的Docker映像。我是直接用官方的<code class="fe nu nv nw nx b">golang</code>图。</p><pre class="ny nz oa ob gt oc nx od oe aw of bi"><span id="94e1" class="nj ki jb nx b gy og oh l oi oj">docker run --rm -it --name go-restful golang</span></pre><p id="fbe3" class="pw-post-body-paragraph lf lg jb lh b li mf lk ll lm mg lo lp lq mt ls lt lu mu lw lx ly mv ma mb mc ij bi translated">这将在交互模式下从<code class="fe nu nv nw nx b">golang</code>启动一个容器，以便我稍后可以执行每个<code class="fe nu nv nw nx b">go</code>命令。</p><pre class="ny nz oa ob gt oc nx od oe aw of bi"><span id="0a59" class="nj ki jb nx b gy og oh l oi oj">go version </span><span id="1a48" class="nj ki jb nx b gy ok oh l oi oj"><em class="ol">-&gt; go version go1.13 linux/amd64</em></span></pre><h2 id="0214" class="nj ki jb bd kj nk nl dn kn nm nn dp kr lq no np kv lu nq nr kz ly ns nt ld jh bi translated">挂载源代码</h2><p id="1a83" class="pw-post-body-paragraph lf lg jb lh b li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc ij bi translated">接下来，我将存储库的源代码安装到容器中，以便我可以在容器化的开发环境中测试它。</p><pre class="ny nz oa ob gt oc nx od oe aw of bi"><span id="90a3" class="nj ki jb nx b gy og oh l oi oj">docker run --rm -it --name go-restful \<br/>  -v $PWD:/go/src/github.com/the-evengers/go-restful golang</span></pre><p id="7095" class="pw-post-body-paragraph lf lg jb lh b li mf lk ll lm mg lo lp lq mt ls lt lu mu lw lx ly mv ma mb mc ij bi translated"><code class="fe nu nv nw nx b">-v</code>或<code class="fe nu nv nw nx b">--volume</code>选项允许我从本地机器<code class="fe nu nv nw nx b">$PWD</code>(工作目录)挂载一个目录到容器<code class="fe nu nv nw nx b">/go/src/github.com/the-evengers/go-restful</code>中的一个目录。</p><p id="d16f" class="pw-post-body-paragraph lf lg jb lh b li mf lk ll lm mg lo lp lq mt ls lt lu mu lw lx ly mv ma mb mc ij bi translated">虽然目录位置有点长，但我现在必须这么做，因为这是Go所需的工作区结构。</p><h2 id="aa5e" class="nj ki jb bd kj nk nl dn kn nm nn dp kr lq no np kv lu nq nr kz ly ns nt ld jh bi translated">试验</h2><p id="8610" class="pw-post-body-paragraph lf lg jb lh b li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc ij bi translated">现在让我们从本地机器写一些样本代码并测试它。</p><figure class="ny nz oa ob gt is"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="c733" class="pw-post-body-paragraph lf lg jb lh b li mf lk ll lm mg lo lp lq mt ls lt lu mu lw lx ly mv ma mb mc ij bi translated">然后运行(在容器的交互模式下):</p><pre class="ny nz oa ob gt oc nx od oe aw of bi"><span id="ce22" class="nj ki jb nx b gy og oh l oi oj">go run main.go<br/><em class="ol">-&gt; Hello World!</em></span></pre><p id="137d" class="pw-post-body-paragraph lf lg jb lh b li mf lk ll lm mg lo lp lq mt ls lt lu mu lw lx ly mv ma mb mc ij bi translated">现在，进行一些更改(从本地机器):</p><figure class="ny nz oa ob gt is"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="2a16" class="pw-post-body-paragraph lf lg jb lh b li mf lk ll lm mg lo lp lq mt ls lt lu mu lw lx ly mv ma mb mc ij bi translated">然后，再次运行:</p><pre class="ny nz oa ob gt oc nx od oe aw of bi"><span id="4b83" class="nj ki jb nx b gy og oh l oi oj">go run main.go<br/><em class="ol">-&gt; Hello World inside Docker!</em></span></pre><p id="2a0b" class="pw-post-body-paragraph lf lg jb lh b li mf lk ll lm mg lo lp lq mt ls lt lu mu lw lx ly mv ma mb mc ij bi translated">耶！我们准备好了。</p><h2 id="2103" class="nj ki jb bd kj nk nl dn kn nm nn dp kr lq no np kv lu nq nr kz ly ns nt ld jh bi translated">进入剧本</h2><p id="7dbc" class="pw-post-body-paragraph lf lg jb lh b li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc ij bi translated">最后，让我们把所有东西都移到一个脚本文件<code class="fe nu nv nw nx b">scripts/start-devcontainer.sh</code>中，隐藏所有的魔法。</p><figure class="ny nz oa ob gt is"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="61c4" class="pw-post-body-paragraph lf lg jb lh b li mf lk ll lm mg lo lp lq mt ls lt lu mu lw lx ly mv ma mb mc ij bi translated">我在这里做了一些改进:</p><ul class=""><li id="608e" class="md me jb lh b li mf lm mg lq mh lu mi ly mj mc mk ml mm mn bi translated">从脚本本身找到库的绝对位置，而不是使用<code class="fe nu nv nw nx b">$PWD</code>,这样开发人员可以从任何地方执行脚本，挂载路径总是正确的。</li><li id="fb97" class="md me jb lh b li mo lm mp lq mq lu mr ly ms mc mk ml mm mn bi translated">为了可读性，很好地声明一些变量。</li></ul></div><div class="ab cl mx my hu mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="ij ik il im in"><h2 id="2f51" class="nj ki jb bd kj nk nl dn kn nm nn dp kr lq no np kv lu nq nr kz ly ns nt ld jh bi translated">完成了。让我们想想智能感知和调试功能！</h2><p id="5818" class="pw-post-body-paragraph lf lg jb lh b li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc ij bi translated">我现在能够使用我最喜欢的编辑器编写代码，并让它们在容器化的开发环境中运行。然而，我不能使用我的编辑器最酷的功能，如智能感知，运行或调试等。让我们在下一篇文章中讨论这个问题，回头见！</p></div><div class="ab cl mx my hu mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="ij ik il im in"><p id="0785" class="pw-post-body-paragraph lf lg jb lh b li mf lk ll lm mg lo lp lq mt ls lt lu mu lw lx ly mv ma mb mc ij bi translated">这篇文章的全部来源发表在<a class="ae mw" href="https://github.com/the-evengers/go-restful/tree/a3324427c052e2d30587788ff71b79367a22b978" rel="noopener ugc nofollow" target="_blank">这里</a>。</p></div></div>    
</body>
</html>