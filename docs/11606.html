<html>
<head>
<title>Efficient Logger for Your Flutter App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为您的Flutter应用程序提供高效的记录器</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/logger-706fb772cc47?source=collection_archive---------6-----------------------#2022-03-30">https://levelup.gitconnected.com/logger-706fb772cc47?source=collection_archive---------6-----------------------#2022-03-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/cd68daec8ff00500571991f3418aa9b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ooq77BRyyZhIVh9FqYy0DQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">记录器输出示例。</figcaption></figure><p id="62cb" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在本文中，我将向您展示如何为您的Flutter应用程序设置一个简单而高效的记录器。</p><p id="5f81" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">这里介绍的记录器具有以下特征:</p><ul class=""><li id="877c" class="la lb iq ke b kf kg kj kk kn lc kr ld kv le kz lf lg lh li bi translated">根据您的需求和品味轻松定制；</li><li id="45b7" class="la lb iq ke b kf lj kj lk kn ll kr lm kv ln kz lf lg lh li bi translated">可以选择同时登录到终端和开发工具，或者只登录到开发工具；</li><li id="b185" class="la lb iq ke b kf lj kj lk kn ll kr lm kv ln kz lf lg lh li bi translated">彩色终端输出；</li><li id="223f" class="la lb iq ke b kf lj kj lk kn ll kr lm kv ln kz lf lg lh li bi translated">记录器设置的最小代码；</li><li id="f7d3" class="la lb iq ke b kf lj kj lk kn ll kr lm kv ln kz lf lg lh li bi translated">大多数日志调用都在一行代码中；</li><li id="89d6" class="la lb iq ke b kf lj kj lk kn ll kr lm kv ln kz lf lg lh li bi translated">充分利用代码自动完成功能，最大限度地减少所需的击键次数；</li><li id="5053" class="la lb iq ke b kf lj kj lk kn ll kr lm kv ln kz lf lg lh li bi translated">定时日志的集成选项；和</li><li id="6a3b" class="la lb iq ke b kf lj kj lk kn ll kr lm kv ln kz lf lg lh li bi translated">记录小部件构建的集成选项。</li></ul><p id="c971" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在接下来的部分中，我将展示一些如何使用记录器的例子。</p></div><div class="ab cl lo lp hu lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ij ik il im in"><h1 id="ddf5" class="lv lw iq bd lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms bi translated"><strong class="ak">模板工程</strong></h1><p id="1dd2" class="pw-post-body-paragraph kc kd iq ke b kf mt kh ki kj mu kl km kn mv kp kq kr mw kt ku kv mx kx ky kz ij bi translated">为了运行本文中显示的示例，我使用Flutter的骨架模板创建了一个新项目。要实现它，您可以通过运行以下命令来创建一个新项目:</p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="68b9" class="nh lw iq nd b gy ni nj l nk nl">$ flutter create -t skeleton --project-name my_app_name app-name</span></pre><blockquote class="nm nn no"><p id="ba88" class="kc kd np ke b kf kg kh ki kj kk kl km nq ko kp kq nr ks kt ku ns kw kx ky kz ij bi translated">其中,<code class="fe nt nu nv nd b">my_app_name</code>是您的项目名称，而<code class="fe nt nu nv nd b">app-name</code>是将在其中创建您的应用程序的文件夹的名称(如果不存在，将创建一个新文件夹)。</p></blockquote></div><div class="ab cl lo lp hu lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ij ik il im in"><h1 id="6de9" class="lv lw iq bd lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms bi translated">记录器设置</h1><p id="7c93" class="pw-post-body-paragraph kc kd iq ke b kf mt kh ki kj mu kl km kn mv kp kq kr mw kt ku kv mx kx ky kz ij bi translated">首先，如果你已经在使用Dart团队提供的<a class="ae nw" href="https://pub.dev/packages/intl" rel="noopener ugc nofollow" target="_blank">国际化(intl) </a>包，就不需要导入任何第三方包。</p><p id="0a0e" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">如果您还没有使用Dart的<a class="ae nw" href="https://pub.dev/packages/intl" rel="noopener ugc nofollow" target="_blank"> intl </a>包，您可以通过在项目目录中运行以下命令将它添加到您的项目中:</p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="bd73" class="nh lw iq nd b gy ni nj l nk nl">$ flutter pub add intl</span></pre><p id="b121" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">这将自动把下面一行添加到您的项目的<code class="fe nt nu nv nd b">pubspec.yaml</code>文件中，在dependencies部分下:</p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="25ba" class="nh lw iq nd b gy ni nj l nk nl">dependencies:<br/>  (...)<br/>  intl: ^0.17.0 # new line</span></pre></div><div class="ab cl lo lp hu lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ij ik il im in"><h1 id="cfdc" class="lv lw iq bd lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms bi translated">新文件</h1><p id="9f29" class="pw-post-body-paragraph kc kd iq ke b kf mt kh ki kj mu kl km kn mv kp kq kr mw kt ku kv mx kx ky kz ij bi translated">在你的项目的<code class="fe nt nu nv nd b">lib</code>目录下创建一个名为<code class="fe nt nu nv nd b">logger.dart</code>的新文件，即<code class="fe nt nu nv nd b">main.dart</code>文件所在的文件夹。</p><p id="1a4a" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">您可以直接从链接存储库中的<a class="ae nw" href="https://gitlab.com/rodweber/logger-example/-/blob/main/lib/logger.dart" rel="noopener ugc nofollow" target="_blank">这个文件中复制文件内容，或者从本文的最后一节中复制。这个记录器被认为是容易理解的。</a></p></div><div class="ab cl lo lp hu lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ij ik il im in"><h1 id="232e" class="lv lw iq bd lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms bi translated">使用</h1><p id="0fce" class="pw-post-body-paragraph kc kd iq ke b kf mt kh ki kj mu kl km kn mv kp kq kr mw kt ku kv mx kx ky kz ij bi translated">要开始使用记录器，只需将这些行添加到您的<code class="fe nt nu nv nd b">main.dart</code>文件中:</p><figure class="my mz na nb gt jr"><div class="bz fp l di"><div class="nx ny l"/></div></figure><blockquote class="nm nn no"><p id="c307" class="kc kd np ke b kf kg kh ki kj kk kl km nq ko kp kq nr ks kt ku ns kw kx ky kz ij bi translated">其中<code class="fe nt nu nv nd b">my_app_name</code>是您的项目的名称，在模板项目部分中选择。</p></blockquote><p id="b936" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">然后，仍然在您的<code class="fe nt nu nv nd b">main.dart</code>文件中，您可以设置日志级别，如下所示:</p><figure class="my mz na nb gt jr"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="1876" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">日志记录选项如下，按重要性或严重性排序:</p><ul class=""><li id="a6de" class="la lb iq ke b kf kg kj kk kn lc kr ld kv le kz lf lg lh li bi translated"><code class="fe nt nu nv nd b">logDebugFinest()</code></li><li id="713a" class="la lb iq ke b kf lj kj lk kn ll kr lm kv ln kz lf lg lh li bi translated"><code class="fe nt nu nv nd b">logDebugFiner()</code></li><li id="7510" class="la lb iq ke b kf lj kj lk kn ll kr lm kv ln kz lf lg lh li bi translated"><code class="fe nt nu nv nd b">logDebugFine()</code></li><li id="805f" class="la lb iq ke b kf lj kj lk kn ll kr lm kv ln kz lf lg lh li bi translated"><code class="fe nt nu nv nd b">logDebug()</code></li><li id="6e1f" class="la lb iq ke b kf lj kj lk kn ll kr lm kv ln kz lf lg lh li bi translated"><code class="fe nt nu nv nd b">logInfo()</code></li><li id="e3ee" class="la lb iq ke b kf lj kj lk kn ll kr lm kv ln kz lf lg lh li bi translated"><code class="fe nt nu nv nd b">logSuccess()</code></li><li id="2f91" class="la lb iq ke b kf lj kj lk kn ll kr lm kv ln kz lf lg lh li bi translated"><code class="fe nt nu nv nd b">logWarning()</code></li><li id="a3b9" class="la lb iq ke b kf lj kj lk kn ll kr lm kv ln kz lf lg lh li bi translated"><code class="fe nt nu nv nd b">logError()</code></li><li id="c2d0" class="la lb iq ke b kf lj kj lk kn ll kr lm kv ln kz lf lg lh li bi translated"><code class="fe nt nu nv nd b">logFatal()</code></li></ul><p id="aac8" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">此外，还有定时日志选项。这些将在下面显示。</p><p id="461c" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">对于任意代码块，您可以使用:</p><ul class=""><li id="69cc" class="la lb iq ke b kf kg kj kk kn lc kr ld kv le kz lf lg lh li bi translated"><code class="fe nt nu nv nd b">logTimerStart()</code></li><li id="3806" class="la lb iq ke b kf lj kj lk kn ll kr lm kv ln kz lf lg lh li bi translated"><code class="fe nt nu nv nd b">logTimerStop()</code></li></ul><p id="ca85" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">以应用程序初始化为例，您可以:</p><figure class="my mz na nb gt jr"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="dc85" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">等待异步操作完成并记录花费时间的示例:</p><figure class="my mz na nb gt jr"><div class="bz fp l di"><div class="nx ny l"/></div></figure><blockquote class="nm nn no"><p id="5cc4" class="kc kd np ke b kf kg kh ki kj kk kl km nq ko kp kq nr ks kt ku ns kw kx ky kz ij bi translated"><code class="fe nt nu nv nd b">logTimerStop()</code>将花费的时间(以毫秒为单位)附加到日志消息的末尾。</p></blockquote><p id="91e1" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">一个调用昂贵的异步操作而不等待它完成的例子:</p><figure class="my mz na nb gt jr"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="9081" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">调用可能失败的昂贵异步操作的示例:</p><figure class="my mz na nb gt jr"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="a060" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">另一个定时日志选项是记录小部件的构建方法，方法是使用:</p><ul class=""><li id="98c1" class="la lb iq ke b kf kg kj kk kn lc kr ld kv le kz lf lg lh li bi translated"><code class="fe nt nu nv nd b">logBuild()</code></li></ul><p id="4f2c" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">作为记录构建方法的一个例子，我们可以如下更新<code class="fe nt nu nv nd b">lib/src/app.dart</code>文件:</p><figure class="my mz na nb gt jr"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="4e81" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">你可以在<a class="ae nw" href="https://gitlab.com/rodweber/logger-example" rel="noopener ugc nofollow" target="_blank">这个库</a>中找到所有这些例子的实现。</p><p id="c7fd" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">包含所有示例的完整<code class="fe nt nu nv nd b">main.dart</code>文件如下所示(<a class="ae nw" href="https://gitlab.com/rodweber/logger-example/-/blob/main/lib/main.dart" rel="noopener ugc nofollow" target="_blank">也可以在这里看到</a>):</p><figure class="my mz na nb gt jr"><div class="bz fp l di"><div class="nx ny l"/></div></figure></div><div class="ab cl lo lp hu lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ij ik il im in"><h1 id="c94e" class="lv lw iq bd lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms bi translated">记录器</h1><p id="1f45" class="pw-post-body-paragraph kc kd iq ke b kf mt kh ki kj mu kl km kn mv kp kq kr mw kt ku kv mx kx ky kz ij bi translated"><code class="fe nt nu nv nd b">lib/logger.dart</code>(此处<a class="ae nw" href="https://gitlab.com/rodweber/logger-example/-/blob/main/lib/logger.dart" rel="noopener ugc nofollow" target="_blank">也可见</a>)的内容:</p><figure class="my mz na nb gt jr"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="7f24" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">暂时就这样了。希望你能好好利用！</p></div></div>    
</body>
</html>