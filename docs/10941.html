<html>
<head>
<title>Transform NULL values with the MySQL COALESCE function</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用MySQL COALESCE函数转换空值</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/transform-null-values-with-the-mysql-coalesce-function-6802033900ee?source=collection_archive---------11-----------------------#2022-01-27">https://levelup.gitconnected.com/transform-null-values-with-the-mysql-coalesce-function-6802033900ee?source=collection_archive---------11-----------------------#2022-01-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="7524" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果我们不小心，<code class="fe ko kp kq kr b">NULLs</code>有可能<em class="ks">破坏</em>我们的查询结果。学习如何根据手头的业务逻辑上下文使用<code class="fe ko kp kq kr b">IS NULL</code>或<code class="fe ko kp kq kr b">IS NOT NULL</code>正确过滤<code class="fe ko kp kq kr b">WHERE</code>子句中的<code class="fe ko kp kq kr b">NULL</code>，只是学习处理<code class="fe ko kp kq kr b">NULLs</code>的一部分。</p><p id="3eb8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">将<code class="fe ko kp kq kr b">NULLs</code>作为查询结果的一部分，可以让我们更好地应对遇到<code class="fe ko kp kq kr b">NULL</code>值的情况(尤其是在计算中)。</p><figure class="ku kv kw kx gt ky gh gi paragraph-image"><div class="gh gi kt"><img src="../Images/d178c8820b6774c0c37b34e7be8c992e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*8xWDPM-9qRZs15t0KqLEKg.jpeg"/></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">图片来自<a class="ae lf" href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=6475769" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>的<a class="ae lf" href="https://pixabay.com/users/geralt-9301/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=6475769" rel="noopener ugc nofollow" target="_blank"> Gerd Altmann </a></figcaption></figure></div><div class="ab cl lg lh hx li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="im in io ip iq"><p id="367d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu"> <em class="ks"> OpenLampTech </em> </strong>，面向PHP/MySQL开发者的简讯。这份时事通讯是你每周策划和原创的PHP/MySQL内容。立即订阅，帮助构建社区<a class="ae lf" href="http://openlamptech.substack.com" rel="noopener ugc nofollow" target="_blank">！</a></p></div><div class="ab cl lg lh hx li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="im in io ip iq"><h2 id="b094" class="ln lo it bd lp lq lr dn ls lt lu dp lv kb lw lx ly kf lz ma mb kj mc md me mf bi translated">MySQL COALESCE()函数</h2><p id="8fa4" class="pw-post-body-paragraph jq jr it js b jt mg jv jw jx mh jz ka kb mi kd ke kf mj kh ki kj mk kl km kn im bi translated">像其他主要的SQL实现一样，MySQL支持<code class="fe ko kp kq kr b">COALESCE()</code>函数。</p><p id="4873" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在本帖中，我们将看到示例查询利用<code class="fe ko kp kq kr b">SELECT</code>列列表中的<code class="fe ko kp kq kr b">COALESCE()</code>为那些<code class="fe ko kp kq kr b">NULL’</code>遇到<em class="ks">的列或表达式提供更有意义的值。</em></p><p id="27aa" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe ko kp kq kr b">COALESCE()</code>函数的语法是:</p><p id="7a35" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe ko kp kq kr b">COALESCE(value_1,… value_n)</code></p><p id="5df9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe ko kp kq kr b">COALESCE()</code>的一个特点是该函数接受多个参数，而像<code class="fe ko kp kq kr b">IFNULL()</code>这样的函数只接受2个参数。<code class="fe ko kp kq kr b">COALESCE()</code>返回第<strong class="js iu"><em class="ks"/></strong>非<code class="fe ko kp kq kr b">NULL</code>值。如果<code class="fe ko kp kq kr b">COALESCE()</code>中的所有参数都是<code class="fe ko kp kq kr b">NULL</code>，则返回<code class="fe ko kp kq kr b">NULL</code>。</p><h2 id="50ea" class="ln lo it bd lp lq lr dn ls lt lu dp lv kb lw lx ly kf lz ma mb kj mc md me mf bi translated">MySQL COALESCE()查询示例</h2><p id="fd43" class="pw-post-body-paragraph jq jr it js b jt mg jv jw jx mh jz ka kb mi kd ke kf mj kh ki kj mk kl km kn im bi translated">在第一个示例查询中，我们只是用字符串“未确定”替换“年龄”列中的任何<code class="fe ko kp kq kr b">NULL</code>值:</p><figure class="ku kv kw kx gt ky"><div class="bz fp l di"><div class="ml mm l"/></div></figure><figure class="ku kv kw kx gt ky gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/e32c2ee933a97a064eb410a517c29f76.png" data-original-src="https://miro.medium.com/v2/resize:fit:700/format:webp/1*P5nLh7EK-skFBtyd5Wvvrw.png"/></div></figure><p id="0493" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">对于查询结果中返回的每一行，如果“年龄”列值为<code class="fe ko kp kq kr b">NULL</code>，则<code class="fe ko kp kq kr b">COALESCE()</code>返回“未确定”。</p></div><div class="ab cl lg lh hx li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="im in io ip iq"><p id="7421" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">通过<a class="ae lf" href="https://parabollus.medium.com/subscribe" rel="noopener">注册电子邮件通知</a>，我每次在媒体上发表博客文章时都会收到通知。如果您还不是该平台的会员，可以考虑通过<a class="ae lf" href="https://parabollus.medium.com/membership" rel="noopener">我的推荐链接</a>注册一个中型账户。在不增加你额外费用的情况下，我会收到你会费的一小部分。成为会员后，你可以在平台上无限阅读作者的文章。谢谢你🙏</p></div><div class="ab cl lg lh hx li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="im in io ip iq"><h2 id="dce2" class="ln lo it bd lp lq lr dn ls lt lu dp lv kb lw lx ly kf lz ma mb kj mc md me mf bi translated">MySQL COALESCE() —第一个非空值</h2><p id="605d" class="pw-post-body-paragraph jq jr it js b jt mg jv jw jx mh jz ka kb mi kd ke kf mj kh ki kj mk kl km kn im bi translated">使用<code class="fe ko kp kq kr b">COALESCE()</code>时要注意，因为它返回的是<strong class="js iu"> <em class="ks">第一个</em> </strong>非<code class="fe ko kp kq kr b">NULL</code>值。这可能不是你所期望的。为了更好地理解，请参见下一个查询示例:</p><figure class="ku kv kw kx gt ky"><div class="bz fp l di"><div class="ml mm l"/></div></figure><figure class="ku kv kw kx gt ky gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/76d5b2306695c99ace04a8f5f141e2b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:680/format:webp/1*t1z2aGrjwfsmnaMFy2KmhQ.png"/></div></figure><p id="fed5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">尽管“名字”列值“乔希”的行确实具有“年龄”列值44，并且不是<code class="fe ko kp kq kr b">NULL</code>，但由于它是<code class="fe ko kp kq kr b">COALESCE()</code>参数列表中第一个非<code class="fe ko kp kq kr b">NULL</code>值，因此返回“未知”。因此，如果您在查询中使用<code class="fe ko kp kq kr b">COALESCE()</code>代替<code class="fe ko kp kq kr b">NULL</code> <em class="ks">遭遇</em>的简单替换，理解这种差异是很重要的。</p></div><div class="ab cl lg lh hx li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="im in io ip iq"><p id="3a5c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">需要学习MySQL吗？刚刚起步，对如何查询一个表，获取自己需要的数据感到困惑？出于这个特殊的原因，我正在创建优质的MySQL初学者内容。来帮助那些想学习MySQL基础知识却不知道从何入手的人。在我开发和发布我的高级MySQL博客文章和内容时，了解更多信息。</p></div><div class="ab cl lg lh hx li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="im in io ip iq"><h2 id="67da" class="ln lo it bd lp lq lr dn ls lt lu dp lv kb lw lx ly kf lz ma mb kj mc md me mf bi translated">MySQL COALESCE() —只有空值返回空值</h2><p id="3ef9" class="pw-post-body-paragraph jq jr it js b jt mg jv jw jx mh jz ka kb mi kd ke kf mj kh ki kj mk kl km kn im bi translated">在<code class="fe ko kp kq kr b">COALESCE()</code>函数参数列表中没有非<code class="fe ko kp kq kr b">NULL</code>值的情况下，返回<code class="fe ko kp kq kr b">NULL</code>，如下例所示:</p><figure class="ku kv kw kx gt ky"><div class="bz fp l di"><div class="ml mm l"/></div></figure><figure class="ku kv kw kx gt ky gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/980a2a40a23e9f4b649a9ba4483c7928.png" data-original-src="https://miro.medium.com/v2/resize:fit:720/format:webp/1*8hF3Z7fbjQWxbNFHoewUbA.png"/></div></figure><p id="f714" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe ko kp kq kr b">COALESCE()</code>返回年龄列值为<code class="fe ko kp kq kr b">NULL</code>的两行的<code class="fe ko kp kq kr b">NULL</code>。</p></div><div class="ab cl lg lh hx li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="im in io ip iq"><p id="1402" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">一如既往，如果你有任何问题或看到代码中的任何错误，请通过评论让我知道。建设性的意见有助于我提供准确的博客帖子，我非常感激。感谢您的阅读。</p></div><div class="ab cl lg lh hx li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="im in io ip iq"><div class="ku kv kw kx gt mq"><a rel="noopener  ugc nofollow" target="_blank" href="/export-query-results-to-csv-with-mysql-workbench-ed7722180174"><div class="mr ab fo"><div class="ms ab mt cl cj mu"><h2 class="bd iu gy z fp mv fr fs mw fu fw is bi translated">使用MySQL Workbench将查询结果导出到CSV</h2><div class="mx l"><h3 class="bd b gy z fp mv fr fs mw fu fw dk translated">CSV文件用于一切。由于CSV是如此普遍，是一种友好的交流形式，每个人都明白…</h3></div><div class="my l"><p class="bd b dl z fp mv fr fs mw fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="mz l"><div class="na l nb nc nd mz ne kz mq"/></div></div></a></div><div class="nf ng gp gr nh mq"><a rel="noopener  ugc nofollow" target="_blank" href="/recursive-cte-fun-with-substring-in-mysql-3a06fab881cd"><div class="mr ab fo"><div class="ms ab mt cl cj mu"><h2 class="bd iu gy z fp mv fr fs mw fu fw is bi translated">用MySQL中的SUBSTRING()实现递归CTE</h2><div class="mx l"><h3 class="bd b gy z fp mv fr fs mw fu fw dk translated">虽然这些天我主要在后端web开发项目中使用MySQL/MariaDB，但我正在学习Oracle SQL…</h3></div><div class="my l"><p class="bd b dl z fp mv fr fs mw fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="mz l"><div class="ni l nb nc nd mz ne kz mq"/></div></div></a></div><div class="nf ng gp gr nh mq"><a href="https://medium.com/an-idea/mysql-count-and-count-column-or-expression-differences-e480b0db5f43" rel="noopener follow" target="_blank"><div class="mr ab fo"><div class="ms ab mt cl cj mu"><h2 class="bd iu gy z fp mv fr fs mw fu fw is bi translated">MySQL计数(*)和计数(列或表达式)—差异</h2><div class="mx l"><h3 class="bd b gy z fp mv fr fs mw fu fw dk translated">我写了很多关于MySQL、PHP和后端Web开发的博客文章。我认为写博客是一种个人成长…</h3></div><div class="my l"><p class="bd b dl z fp mv fr fs mw fu fw dk translated">medium.com</p></div></div><div class="mz l"><div class="nj l nb nc nd mz ne kz mq"/></div></div></a></div></div><div class="ab cl lg lh hx li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="im in io ip iq"><p id="cb05" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我定期在我的技术博客<a class="ae lf" href="http://joshuaotwell.com" rel="noopener ugc nofollow" target="_blank"> Digital Owl的散文</a>上写关于SQL、PHP和CodeIgniter的文章。关注我那里的类似内容，并确保<a class="ae lf" href="http://openalamptech.substack.com" rel="noopener ugc nofollow" target="_blank">注册我的免费每周时事通讯</a>、<strong class="js iu">、T5】 OpenLampTech 、面向PHP/MySQL开发人员的时事通讯。谢谢大家！</strong></p></div></div>    
</body>
</html>