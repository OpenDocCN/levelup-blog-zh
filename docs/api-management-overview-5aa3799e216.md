# API 管理概述

> 原文：<https://levelup.gitconnected.com/api-management-overview-5aa3799e216>

![](img/ca09d9c04e78de6f1feb9ef8b071fa27.png)

马丁·范·登·霍维尔在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上的照片

在这篇新帖中，我将以一种通用的方式回顾 API 管理，因为这是一个相当广泛的话题。正如您可能已经知道的，API 是用于以有效的方式在环境之间公开数据的机制。

许多年前，与第三方组件连接或共享数据是不可能的，因为抓取技术的效率很高，这是当时从不同的服务或网站抓取数据的唯一解决方案。

废弃网站很大程度上依赖于 HTML 结构。如果源端在他们的前端结构中执行了一个改变，你的 scrapper 代码将不能成功地收集数据。这样做的好处是，当报废发生时，你不会被跟踪。

API 是一个用于数据管理的用户界面，它用一个定义良好的请求数据的契约和一个已知的带有结果值的响应结构来取代任何基于废弃技术的复制。

在 21 世纪初，XML 是数据通信的参考，尤其是 XML-RPC 定义，一段时间后，另一个基于 XML 的标准 SOAP 成为主角。基于 XML 的标准只是在安全性、事务和格式方面定义了如何交换消息的结构。

随着 spa 和移动应用的兴起，开发人员开始抱怨 XML 的笨重和性能低下。不久以后，JSON 成为了一种替代方案，它具有更简单的语法和更好的性能。

## 休息时代

**REST** 或**表述性状态转移**是全球顶尖公司广泛使用的架构原则，主要基于 API 实现。

在 RESTful APIs 的世界中，资源是神经组件，它为软件和业务逻辑设置属性和定义。

在软件 POV 中，资源是在数据库中处理的属性，它们的状态会根据执行的操作而变化。状态表示在软件的后端进行管理。

代表性状态可以被看作是由 API 加入的数据库行。这种状态可以转换成任何类型的格式，例如 XML、JSON 和 TXT，用于移动和 SPAs 客户端，甚至用于 JPG、PDF 和 XLS

**REST** 不是标准，也不是技术，而是一种架构风格。访问是在请求的帮助下完成的，请求的形式有 URL、参数和动词，如`PUT`、`DELETE`、`HEAD`、`GET`、`TRACE`、`OPTIONS`等。因此，要被认为是一个 Restful API，它必须遵循一种架构风格。

HTTP 协议是 RESTful APIs 使用最多的协议，但不是唯一的协议。

## API 类型

API 可以在**私有**、**公共**和**合作伙伴**表单中找到，其中**私有**用于同一个组织的内部消费者，**公共**用于组织外的用户，合作伙伴用于他们之间有联盟或信任关系的公司。

他们之间没有技术上的区别，但管理方式发生了变化。

1.  私有 API 由内部开发人员、内部组织或某些外部应用程序的公众使用。它是在企业的边缘设置的(如果需要公共访问)。
2.  **公共 API**面向对创建能够连接到企业应用的第三方应用感兴趣的开发人员。它总是在企业的边缘，只是为了向开发人员提供访问权限
3.  **合作伙伴 API**是向可信合作伙伴公开的 API，在内部，开发人员可以在他们自己的上下文中进行连接，并与提供商的企业应用程序进行交互。

## 安全呢？

重度用户需要一些基本的认证和专有方案来访问私有 API。对于公共和合作伙伴企业 API，您不能盲目地信任用户，为了使用它们，这两者都用密钥/秘密令牌和 OAuth 进行了增强。

不管执行什么功能，您总是可以根据基本的 API 设计规划来调整任何标准的安全方案(组合或不组合)。这也包括 SLA 文件中建立的任何限制。

# API 管理

管理包括在安全和可扩展的环境中发布、记录和监督 API 的整个过程。还有生命周期，生产力，安全性，流量分析，如何将你的 API 产品化和货币化。

API 基础设施有两种模式，基于代理和基于代理。第一种存在于企业网络中，它以受控的方式公开 API，流量通过安全网关。之后，API 策略通过平台提供的“代理”应用于 API 服务器。

基于代理的设置在企业的边缘，它执行对代理的调用，这些调用使用代理级别而不是 API 级别的策略路由到 API 服务器。这用于安全和交通监控。

API 的生命周期遵循四个步骤，其中:

1.  **构建**阶段是开发人员创建 API 的时候
2.  **发布**阶段之前需要一个测试步骤，但是包括部署到生产环境中，以便以后调用和访问 API
3.  一段时间后，**弃用的**阶段声明该 API 不再可用或不再受支持。有时会发布新版本，推荐使用。
4.  最后，**退出了**阶段，这意味着 API 被删除并且不再使用。

这个生命周期可以用非标准化的方式来完成。首先，建立过程、实践和角色是很常见的，然后，通过提前发布路线图，您可以设置不推荐的和退役的版本。之后，您可以设置开发人员交流，并最终利用和创建产品。

这可能会有所不同，并且会根据要实现的产品以特定的方式进行

在这一点上，我们已经准备好使用它，但是，我们不知道如何去做。

为了提高工作效率，您将需要一个工具来进行自助配置和支持，以及记录。API 开发人员必须根据最佳实践生成用户指南、代码示例、框架和建议。

在设计和开发方面，交付基于规范的工具和实用程序以及策略实现是很常见的。

## 构建开发人员门户

根据您的应用程序的范围，构建一个开发人员门户可能是夸张的，也可能是非常恰当的。这就像是应用程序开发人员的一站式商店，因为它捆绑了正确使用 API 的所有要求和指导。它通常包括:

1.  API 文档作为代码示例、SDK 以及使用、访问和集成手册(仅举几例)的外部文档。
2.  用于生成凭证(如授权级别、密钥、机密、策略和令牌)的自我配置部分。所有这些都被用作所有者和开发人员或利益相关者之间的一个步骤。
3.  基于所使用的 API 类型，提供故障排除、最佳实践、联系方式、错误报告等方面的支持。

当进行手动自供应时，整个 API 密钥-秘密生成过程是以编程方式完成的。为了获得凭证，您需要描述基于策略的使用意图。

安全管理与自我配置步骤紧密相连，因为参与者增强了安全性。

一个事实是，所有 API 都必须至少需要一个最低限度的安全性或 API 密钥。这整个密钥-秘密生成也必须有一些策略，您应该为行为不端的客户端进行更新、失效、限制和范围管理。一个有利但广受欢迎的方面是分析和指标的使用。

OAuth 2.0 已经成为某种标准。

## 功能性威胁

我将展示五种常见的场景，不管 API 级别的设计缺陷和攻击媒介如何，它们都有助于减轻可能的功能威胁。

1.  实现和执行测试是强制性的。甚至在采用工具时，这也被认为是一件好事。
2.  使用第三方工具进行漏洞评估。
3.  执行持续监控以检测攻击和可能的威胁。
4.  建立保护原料药的积极态度
5.  也在策略中实施威胁防护。

当然，还可以更多，技术的发展比你和你的团队更快。

不管您的客户和开发人员的技能如何，您总是需要对安全案例进行教育和指导。及时了解威胁并制定应急计划。

## 最后，货币化

大多数时候在构建 API 的时候，你的业务视角会超越，通常会把 API 看成是产品的一部分，而根本不是产品本身。或者至少，我是这么看的。

产品是可以提供给市场的任何东西，可以满足客户的需求，有时是 API 本身，那么，如何将 API 演化为产品呢？

就像任何产品一样，它从需要证明的商业案例开始，然后通过研究如何向客户展示它，根据交付或规划试点以及营销策略创建原型或功能性产品，并推出它。

基于 API 的类型，你可以使用免费增值、企业或开发者的商业模式，你可以使用任何货币化模式，这必须至少包括一个良好的产品定义、指标和报告。

像任何软件产品一样，API 需要全面和详细的管理。如果你想发布一个基于 API 的产品，你需要考虑所有这些方面，当然，如果你想成功，你的产品将决定特殊性，但这是当今现代软件中常见的。

快乐编码:)