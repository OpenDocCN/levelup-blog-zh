<html>
<head>
<title>Adding multilanguage support to your React project</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">向React项目添加多语言支持</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/adding-multilanguage-support-to-your-react-project-a4fa209071d9?source=collection_archive---------7-----------------------#2020-04-24">https://levelup.gitconnected.com/adding-multilanguage-support-to-your-react-project-a4fa209071d9?source=collection_archive---------7-----------------------#2020-04-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="51c9" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何让你的项目更上一层楼</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/611a06cd76720068475958333078deca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*OPvztGk-OMInRqUL"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">凯尔·格伦在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="76e7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi lv translated"><span class="l lw lx ly bm lz ma mb mc md di"> I </span>与来自不同国家的用户和服务的互动变得越来越普遍，这种趋势超越了it界的边界概念。因此,<strong class="lb iu">越来越强烈地要求</strong>开发支持不同国家的平台，从而适应当地语言。</p><p id="0227" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有一个有趣的练习可以帮助我们理解这一点的重要性，那就是尝试想象以下场景:</p><p id="9274" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">。您经常使用的仅支持韩语、法语或您没有域名的任何语言的脸书、Twitter或其他社交媒体；</strong></p><p id="7030" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">。仅使用当地货币表示货币成本的电子商务网站(用俄罗斯卢布计算，你的手机值多少钱？);</strong></p><p id="8aba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">。使用其他国家的日期和时间格式的在线日记(<br/>你知道如何用台语表示你的生日吗？);</strong></p><p id="ff38" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">考虑到上面列出的主题，<strong class="lb iu">如果与您目前的用户体验相比，您认为您在这些场景中会有同样的体验吗？</strong></p><p id="618f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果答案是<strong class="lb iu">否</strong>，那么我们都认同国际化的重要性，以及为什么我们在构建应用程序时应该关注国际化。</p><h1 id="dd4b" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">我向你介绍国际反应</h1><p id="438f" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">这个为React开发的库为我们提供了用于格式化不同类型数据的组件和API，支持150多种语言。</p><p id="be4c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你想进一步了解这个库，可以点击<a class="ae ky" href="https://github.com/formatjs/react-intl" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">这里</strong> </a>直接访问它在GitHub上的资源库！</p><blockquote class="nb nc nd"><p id="491a" class="kz la ne lb b lc ld ju le lf lg jx lh nf lj lk ll ng ln lo lp nh lr ls lt lu im bi translated">在这篇文章中，<strong class="lb iu">我将只关注把我们应用程序中的信息翻译成不同的语言。</strong>如果你对这个主题感兴趣，想要更多关于如何格式化日期、货币值以及其他数据类型的内容，请在评论中留下你的建议！</p></blockquote><h1 id="69bf" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">定义消息</h1><p id="9723" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated"><em class="ne"> react-intl </em>库使用<strong class="lb iu">消息描述符</strong>概念，它包含定义消息如何格式化的必要数据。</p><p id="39bd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，每条消息具有以下属性:</p><p id="2376" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">。id(必需):</strong>定义每条消息的唯一标识。</p><p id="51ad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">。描述(可选):</strong>消息内容的描述。</p><p id="fd11" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">。defaultMessage(可选):</strong>一个标准消息，当主消息处理中出现错误时，例如没有找到翻译时，用作后备消息。它可以直接用作您的主要语言文本。</p><p id="057a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用同一个库，我们可以使用另一个名为<em class="ne"> defineMessages </em>的函数来返回消息描述符列表，从而在我们的组件中使用它们。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ni"><img src="../Images/8675f4005d1bb2025095899c216bb72c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xEKrtZyv73Mt4GH-N-gCZw.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">使用defineMessages函数定义我们的消息。</figcaption></figure><p id="53d0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意，在每条消息的id中，我使用了一个范围，后跟消息键。</p><p id="cd74" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在大型项目中，应用程序中定义了大量的消息。考虑到可伸缩性并确保每个标识对于每个消息都是唯一的，我们可以使用一些<em class="ne">约定</em>来编写消息id。</p><p id="55ce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我的项目中，我通常使用<strong class="lb iu">消息所在的每个文件的路径作为作用域，后跟消息键</strong>，因此我们将每个消息的id定义为:</p><p id="f230" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">{路径文件}。{messageKey} </strong></p><blockquote class="nb nc nd"><p id="9e37" class="kz la ne lb b lc ld ju le lf lg jx lh nf lj lk ll ng ln lo lp nh lr ls lt lu im bi translated">选择使用哪种约定可能会有所不同，但是推荐的做法是，一旦定义了标准标识，就应该为所有的项目消息维护它。</p></blockquote><h2 id="17d9" class="nj mf it bd mg nk nl dn mk nm nn dp mo li no np mq lm nq nr ms lq ns nt mu nu bi translated">格式化邮件</h2><p id="7dcc" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">定义消息后，我们将使用<em class="ne"> FormattedMessages </em>来格式化组件中的消息。要做到这一点，只需在我们的组件中调用这个函数，向它传递带有先前定义的消息的<em class="ne"> MessageDescriptor </em>对象，如果需要，传递一个名为values的属性，该属性包含一个带有<em class="ne">值</em>的对象，该值将替换消息中包含的可能变量。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nv"><img src="../Images/1688f98e1b47095b9f53623d9b490aed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YU97BUyCuyK8NP0OE94IUA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">使用FormattedMessage在我们的组件中格式化消息</figcaption></figure><p id="c0b9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">根据定义，所有以某种方式使用React Intl的组件都必须使用一个名为<em class="ne"> IntlProvider </em>的组件，该组件负责设置i18n的上下文(用作<strong class="lb iu"> I </strong>国际化<strong class="lb iu"> n </strong>的缩写，在“I”和“n”之间有18个字母)。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nv"><img src="../Images/de079a1c3398f6145beb05fa483d9c91.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uVlKSThpP1lfLr19O8oCRA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">使用IntlProvider</figcaption></figure><h2 id="90d5" class="nj mf it bd mg nk nl dn mk nm nn dp mo li no np mq lm nq nr ms lq ns nt mu nu bi translated">就这样…完成了！我们已经在使用React Intl格式化的消息。</h2><h1 id="6067" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">在我们的应用中实现其他语言</h1><h2 id="738a" class="nj mf it bd mg nk nl dn mk nm nn dp mo li no np mq lm nq nr ms lq ns nt mu nu bi translated">首先，让我们考虑一下如何在项目中安排我们的翻译文件…</h2><p id="f8ad" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">将翻译文件存储在靠近使用它们的位置是一个很好的编程实践。</p><p id="0d35" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，我们将遵循这个概念，在组件之外创建一个位置，这将导入所有位置的翻译，将它们集中在一个文件中。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/c316727c7a05ce62ac4c3fcefda0dd6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M-MvQLylPgNXk_el0IV2Ow.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">文件夹架构</figcaption></figure><p id="3330" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">根据我为i18n创建的模型，我们应该实现以下步骤:</p><p id="0c8c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">步骤1: </strong>在与组件索引相同的文件夹中创建一个messages.js文件，该文件将使用<em class="ne"> defineMessages </em>函数，但只能通过定义消息的范围和id来实现。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/f20fbf96df38a6fc3909006b6f4c5d17.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r2okYRM6aafumJ7cedujLg.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">示例消息文件</figcaption></figure><p id="4797" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">注:</strong> <em class="ne">我们甚至不会在这里写一个defaultMessage，稍后我会解释原因。如果您想在id旁边添加描述，请随意。</em></p><p id="d4ee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">步骤2: </strong>对于每个组件翻译文件，导入消息文件的范围，并为每个id定义翻译成文件命名的语言的相应消息。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/30012a75a46285f6d71307a74399abc1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jIRg9jAvRTEyjTcTlWskrA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">en.js</figcaption></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/ab5c472fb44237b77976b1ca7ca0bc1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3COcRZlt6w-mJ3U7HB6OIA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">pt.js</figcaption></figure><p id="cdd1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对组件中的所有消息都这样做。</p><h2 id="9599" class="nj mf it bd mg nk nl dn mk nm nn dp mo li no np mq lm nq nr ms lq ns nt mu nu bi translated">步骤3:将所有翻译集中到一个文件中</h2><p id="fa33" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">在组件和容器之外定义的翻译文件中，我们导入在代码中定义的所有翻译。</p><blockquote class="nb nc nd"><p id="0320" class="kz la ne lb b lc ld ju le lf lg jx lh nf lj lk ll ng ln lo lp nh lr ls lt lu im bi translated">这里，如果有必要，我们可以使用中间文件来避免在单个文件中进行大量的导入。</p></blockquote><p id="6506" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">对于每个通用翻译文件</strong>，我们会有这样的内容:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/b90f6a57cb9acadd9b80320198ec1385.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Jb5TSB8jq7fmyuRmuMDqpA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">将所有翻译集中到一个文件中</figcaption></figure><p id="a54d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，我们导出一个对象，其中包含我们的应用程序将支持的所有语言作为关键字。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/205e0ce7122d44eafeeed24528137ff1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X_TQbMkJ0O-Nsetq9jQioA.png"/></div></div></figure><p id="c055" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们现在可以访问包含项目所有翻译的对象。</p><h2 id="1e41" class="nj mf it bd mg nk nl dn mk nm nn dp mo li no np mq lm nq nr ms lq ns nt mu nu bi translated">步骤4:注入通过当前位置的消息</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/5a312fb4475b0ccfad78d90c79d75d3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6Vyk93k3XJzjz7p0sH05tQ.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">在Intl提供程序中使用消息</figcaption></figure><p id="08ec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这样，当我们更改位置时，应用程序中的所有文本都将被翻译到所选的位置。很酷，不是吗？</p><h1 id="7050" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">定义标准消息</h1><p id="1ac7" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">假设你刚被一家巴西公司雇佣，这家公司正在其运营地区的可再生能源市场发展。尽管我们打算用多种语言编写应用程序，但在这种情况下，我们将始终将葡萄牙语作为默认语言，因为该应用程序最初可能会在巴西使用，随后，当公司在国际上扩张时，其他国家的用户也会使用。</p><p id="e4c8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="ne"> MessageDescriptor </em>预测到这一点，并为我们提供了<em class="ne"> defaultMessage </em>，在这里我们将一个带有默认语言的字符串传递给我们的应用程序，如果<em class="ne"> react-intl </em>未能尝试翻译任何消息，它将根据其策略<a class="ae ky" href="https://github.com/formatjs/react-intl/blob/master/docs/API.md#message-formatting-fallbacks" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu"> fallback </strong> </a>返回<em class="ne"> defaultMessage </em>的值。</p><blockquote class="ob"><p id="89d6" class="oc od it bd oe of og oh oi oj ok lu dk translated">在这种情况下，在messages.js文件中写一个defaultMessage以及id就足够了，可以防止任何翻译错误的发生，对吗？</p></blockquote><p id="8648" class="pw-post-body-paragraph kz la it lb b lc ol ju le lf om jx lh li on lk ll lm oo lo lp lq op ls lt lu im bi translated">没错，是解决这个问题的一个办法。但是，让我们更深入地想象以下场景:</p><p id="a994" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">贵公司发展迅速，在行业中处于领先地位，并引起了加拿大一家跨国公司的注意，该公司决定收购贵公司并接管其业务。但是这家跨国公司的总部不在巴西，它想让它的老公司迁移到加拿大，在那里建立一个新的总部，现在它的客户大多不会说葡萄牙语。</p><p id="18e9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该公司希望将其新收购的服务的默认语言更改为本地语言，这是有道理的，对吗？</p><p id="053d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是想象一下，它必须翻译每条现有的消息，这些消息的<em class="ne">默认消息</em>是葡萄牙语的，散布在整个代码的各个<em class="ne"> messages.js </em>文件中。如果出于某种原因，她需要再次更改默认语言，该怎么办？</p><p id="79d7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是完全不可扩展的。</p><p id="b228" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不幸的是，<em class="ne"> react-intl </em>库不接受任何与它的<em class="ne"> IntlProvider </em>中的默认消息相关的属性来处理这个问题，因为它期望通过<em class="ne"> MessageDescriptor </em>接收这个属性。</p><p id="2c18" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">然而，有一个超级简单的解决方案，对Javascript对象使用扩展操作符。</strong></p><p id="f961" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">很简单。我们将创建一个辅助对象mergedMessages，它接收所有ID，并将该语言的翻译设置为默认语言，随后我们使用ID作为比较键，用当前语言替换它们，而不是只发送所选语言的翻译。</p><p id="0922" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这样，如果<em class="ne"> react-intl </em>找不到所选语言的任何消息的翻译，它将始终使用默认语言翻译。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oq"><img src="../Images/57a4665311f7134630fd5959d932dabe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7XrA5ZCc_kXX0M7iPuObXQ.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">使用合并邮件</figcaption></figure><h1 id="c71a" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">酷，解决方案很好，但我仍然有一个问题…</h1><blockquote class="nb nc nd"><p id="c4aa" class="kz la ne lb b lc ld ju le lf lg jx lh nf lj lk ll ng ln lo lp nh lr ls lt lu im bi translated"><strong class="lb iu">我需要手动更改位置来翻译我的邮件吗？</strong></p><p id="37ce" class="kz la ne lb b lc ld ju le lf lg jx lh nf lj lk ll ng ln lo lp nh lr ls lt lu im bi translated">答案:根据我们目前掌握的情况，是的。幸运的是，有一种方法可以简化事情，让我们的工作自动化。</p></blockquote><h1 id="dcad" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">使用Redux管理位置</h1><p id="b354" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">我们需要能在运行时动态改变位置值的东西。在这种背景下，<a class="ae ky" href="https://redux.js.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu"> Redux </strong> </a>库非常适合，这是我们将用来补充我们的解决方案的。</p><p id="59a4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里要做的修改是将<em class="ne"> IntlProvider </em>传递给一个容器，该容器通过商店的状态接收位置。因此，如果需要更改位置(例如，用户已经表明他想要更改屏幕上文本的语言)，只需触发一个动作，替换商店的状态，因此新位置将被传递给<em class="ne"> IntlProvider </em>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi or"><img src="../Images/c0c74e8f33f6448a72666eb9c4bb134f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nJZ-vI8hmo_w8BM6hey48g.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">使用Redux管理位置</figcaption></figure><p id="6db2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，只需在我们的根索引中使用导出的组件，而不是IntlProvider。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi os"><img src="../Images/da48f29d44dfb626c4ca1a8449c25a90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8LHCbbjFmQTffZfThLEHaQ.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">使用语言提供者</figcaption></figure><h1 id="35be" class="me mf it bd mg mh mi mj mk ml mm mn mo jz mp ka mq kc mr kd ms kf mt kg mu mv bi translated">后续步骤</h1><p id="0364" class="pw-post-body-paragraph kz la it lb b lc mw ju le lf mx jx lh li my lk ll lm mz lo lp lq na ls lt lu im bi translated">该解决方案认为<strong class="lb iu">所有翻译都是手动完成的。</strong></p><p id="15cb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，我们可以使用<a class="ae ky" href="https://github.com/formatjs/babel-plugin-react-intl" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu">babel-plugin-react-intl</strong></a>库，它用react-intl从模块中提取所有消息，并生成一个包含所有消息的JSON。</p><p id="1ce5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从那里，我们可以使用单独的翻译服务来自动生成翻译，这将节省大量的开发时间，即使这样应用程序将依赖于外部服务和自动生成的翻译。如果这对你的目的有意义，我认为这将是一个更合理的改变。</p><p id="e349" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由于这篇文章目前的长度，我把它作为对这个主题感兴趣的读者的一个练习。</p><p id="801b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我要强调的是，上述<strong class="lb iu">给出的解决方案仅代表了几种可能的现有解决方案中的一种。</strong></p><p id="dcf1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">欢迎在评论中留下任何疑问、批评甚至改进建议。</strong></p></div></div>    
</body>
</html>