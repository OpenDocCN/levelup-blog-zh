<html>
<head>
<title>How to Debug Node.js Program with VS Code?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用VS代码调试Node.js程序？</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/want-to-become-a-senior-frontend-developer-you-must-master-debugging-f577ee569687?source=collection_archive---------11-----------------------#2022-02-22">https://levelup.gitconnected.com/want-to-become-a-senior-frontend-developer-you-must-master-debugging-f577ee569687?source=collection_archive---------11-----------------------#2022-02-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="f6f9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">调试是高级前端的必备技能。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/1b4682091c412f9e2bbe21684f9ba953.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-xx7paIWmGKtxE5d"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">照片由<a class="ae le" href="https://unsplash.com/@sigmund?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">西格蒙德</a>在<a class="ae le" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</figcaption></figure><p id="b827" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果你也想成为一名高级前端开发人员，掌握调试是一项关键技能。它会帮助你理解程序是如何工作的，并逐步提高你的编码水平。</p><p id="8781" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">对于复杂的开源项目，使用调试可以快速了解代码的作用和作者的意图，帮助你理解其内部原理，使你在编程上不断进步，最终成为高级前端开发人员，获得更高的薪水。</p><h1 id="e1b0" class="lf lg it bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">概观</h1><p id="8c09" class="pw-post-body-paragraph jq jr it js b jt md jv jw jx me jz ka kb mf kd ke kf mg kh ki kj mh kl km kn im bi translated">调试在Node.js方向和web方向有很多要介绍的，所以我决定把这一系列文章分成以下几篇:</p><ol class=""><li id="2139" class="mi mj it js b jt ju jx jy kb mk kf ml kj mm kn mn mo mp mq bi translated">本文(我将重点介绍如何用VS代码调试Node.js程序)</li><li id="7ab4" class="mi mj it js b jt mr jx ms kb mt kf mu kj mv kn mn mo mp mq bi translated"><a class="ae le" rel="noopener ugc nofollow" target="_blank" href="/how-to-debug-web-program-like-a-pro-ebc8995201bf">如何像专家一样调试Web程序</a></li></ol></div><div class="ab cl mw mx hx my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="im in io ip iq"><h1 id="c03c" class="lf lg it bd lh li nd lk ll lm ne lo lp lq nf ls lt lu ng lw lx ly nh ma mb mc bi translated">快速启动</h1><p id="688c" class="pw-post-body-paragraph jq jr it js b jt md jv jw jx me jz ka kb mf kd ke kf mg kh ki kj mh kl km kn im bi translated">VS代码有一个强大的内置Node.js调试器，不用安装任何扩展就可以调试Node.js程序或者web程序。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ni"><img src="../Images/4f15777989d3ad02f9db6abbe1e24ed7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*W2Y6YYsZstNnCiiRvTBSNA.gif"/></div></div></figure><p id="5387" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">你可以看到我们在VS代码中很容易启动调试器，我来详细介绍一下。</p><h1 id="b1d1" class="lf lg it bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">启动配置</h1><p id="c515" class="pw-post-body-paragraph jq jr it js b jt md jv jw jx me jz ka kb mf kd ke kf mg kh ki kj mh kl km kn im bi translated">首先，您可以看到我在gif中创建了一个启动配置文件，它很有用，因为它允许您配置和保存调试设置细节。接下来，我们选择Node.js，VS代码自动生成相应的配置，回到File Explorer视图你会看到VS代码已经创建了一个<code class="fe nj nk nl nm b">.vscode</code>文件夹，并将launch.json文件添加到你的工作区。</p><p id="bbd9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在launch.json配置文件中，调试模式可以分为两种核心模式，Attach和launch。</p><p id="24dc" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">attach模式需要提前准备调试服务器。我们可以在调试模式下启动app获取调试服务器，然后通过程序端口连接VS代码调试器，而启动则帮助我们完成这一切，直接帮助我们在调试模式下启动app，所以启动模式可以满足大部分使用场景。</p><p id="bb0e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">有很多Launch.json属性，你可以在<a class="ae le" href="https://code.visualstudio.com/docs/editor/debugging#_launchjson-attributes" rel="noopener ugc nofollow" target="_blank"> VS代码官方文档</a>中找到它们的详细描述。</p><p id="0490" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在这个演示项目中，我将使用以下配置。</p><pre class="kp kq kr ks gt nn nm no np aw nq bi"><span id="e927" class="nr lg it nm b gy ns nt l nu nv">{<br/>  "version": "0.2.0",<br/>  "configurations": [<br/>    {<br/>      "type": "pwa-node",<br/>      "request": "launch",<br/>      "name": "Launch Program",<br/>      "skipFiles": ["&lt;node_internals&gt;/**"],<br/>      "program": "${file}"<br/>    }<br/>  ]<br/>}</span></pre><h1 id="2357" class="lf lg it bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">断点选项</h1><p id="b064" class="pw-post-body-paragraph jq jr it js b jt md jv jw jx me jz ka kb mf kd ke kf mg kh ki kj mh kl km kn im bi translated">断点可以通过点击当前行的编辑器页边来切换，如果是鼠标右键点击，会出现一个选项菜单。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nw"><img src="../Images/a8a234cade00b9bd58c51109343c6a4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*PWFqVbgFJ6qwaytczh4F2w.png"/></div></div></figure><p id="d7e5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">第一个选项与用鼠标左键单击的效果相同。</p><p id="96a9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">第二个选项是添加一个条件断点。您可以稍后输入JavaScript表达式。只有当表达式结果为true时，此断点才会生效。</p><p id="3857" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">第三个选项是Logpoints，它是断点的变体，不会“中断”到调试器中，而是向控制台记录一条消息。在调试无法暂停或停止的生产服务器时，日志点对于注入日志记录特别有用。</p><h1 id="5554" class="lf lg it bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">调试应用程序</h1><p id="5d6d" class="pw-post-body-paragraph jq jr it js b jt md jv jw jx me jz ka kb mf kd ke kf mg kh ki kj mh kl km kn im bi translated">现在我们可以开始调试了，我们可以使用快捷键F5或左边的开始按钮来启动它。</p><p id="d1c5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">当程序运行到断点时，它将停止。此时截图如下。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nx"><img src="../Images/e5d52b28e257c88a979cadcb8bda5173.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nrl5KUHbgaU3Ck3L0at2sw.png"/></div></div></figure><h1 id="6279" class="lf lg it bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated"><strong class="ak">左侧面板</strong></h1><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/9a8003ce449f7aa5d25502ea74cb5fde.png" data-original-src="https://miro.medium.com/v2/resize:fit:652/format:webp/1*8YbkxkTIncTO7ZlFb6o6HA.png"/></div></figure><ul class=""><li id="84cc" class="mi mj it js b jt ju jx jy kb mk kf ml kj mm kn nz mo mp mq bi translated"><strong class="js iu">变量</strong></li></ul><p id="c55a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您可以在这里查看当前断点下所有可访问的环境变量，它们可能来自当前作用域、闭包作用域、全局作用域等。</p><ul class=""><li id="4e66" class="mi mj it js b jt ju jx jy kb mk kf ml kj mm kn nz mo mp mq bi translated"><strong class="js iu">手表</strong></li></ul><p id="97b2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在这里，您可以添加变量或计算表达式，并在当前断点的上下文中观察它们的值。如果我们想在代码逻辑之外做一些表达式计算，这是一个非常有用的特性。</p><ul class=""><li id="a98c" class="mi mj it js b jt ju jx jy kb mk kf ml kj mm kn nz mo mp mq bi translated"><strong class="js iu">调用堆栈</strong></li></ul><p id="45a1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在这里可以查看当前函数的调用栈，这对于明确函数调用的顺序很有帮助。</p><ul class=""><li id="8a6b" class="mi mj it js b jt ju jx jy kb mk kf ml kj mm kn nz mo mp mq bi translated"><strong class="js iu">断点</strong></li></ul><p id="eb00" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">此处包含所有带有断点的文件列表。如果检查了未捕获的异常，这意味着如果程序中出现未捕获的异常，它将在出现异常的行停止。对于被捕获的异常也是如此，但它只表示被捕获的异常。</p><h1 id="92ff" class="lf lg it bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">调试操作</h1><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/bf4764e55cf479d94d75a0577f8a2aa2.png" data-original-src="https://miro.medium.com/v2/resize:fit:466/format:webp/1*vEOhIAIahHDka-pJuNA9Kg.png"/></div></figure><p id="5d01" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您可以通过单击这些图标来控制调试行为。它们如下:</p><ul class=""><li id="ffbb" class="mi mj it js b jt ju jx jy kb mk kf ml kj mm kn nz mo mp mq bi translated"><strong class="js iu">继续/暂停</strong>T0】</li></ul><p id="ff64" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这意味着继续运行代码，直到遇到下一个断点。</p><ul class=""><li id="e903" class="mi mj it js b jt ju jx jy kb mk kf ml kj mm kn nz mo mp mq bi translated"><strong class="js iu">跨过</strong> <code class="fe nj nk nl nm b"><strong class="js iu">F10</strong></code></li></ul><p id="8209" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">根据代码执行逻辑跳过当前函数执行，直接执行下一条语句。</p><ul class=""><li id="3bce" class="mi mj it js b jt ju jx jy kb mk kf ml kj mm kn nz mo mp mq bi translated"><strong class="js iu">踏入</strong> <code class="fe nj nk nl nm b"><strong class="js iu">F11</strong></code></li></ul><p id="ce86" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">当断点到达函数时，您可以使用此选项跳转到函数的执行中，以查看函数内部发生了什么。</p><ul class=""><li id="9f92" class="mi mj it js b jt ju jx jy kb mk kf ml kj mm kn nz mo mp mq bi translated"><strong class="js iu">踏出</strong>T3】</li></ul><p id="8a87" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">可以在执行过程中跳出当前函数。</p><ul class=""><li id="3d28" class="mi mj it js b jt ju jx jy kb mk kf ml kj mm kn nz mo mp mq bi translated"><strong class="js iu">重启</strong>T4】</li><li id="b21e" class="mi mj it js b jt mr jx ms kb mt kf mu kj mv kn nz mo mp mq bi translated"><strong class="js iu">停止</strong>T5】</li></ul><h1 id="d786" class="lf lg it bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">调试控制台REPL</h1><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/2662c436a65620705220f75117e8badd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1350/format:webp/1*KQE5IhMEABdV3XvQceV_kA.png"/></div></figure><p id="a0fe" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这个区域称为调试控制台REPL，在这里您可以获取当前断点环境中的变量，并组合它们来执行表达式。</p></div><div class="ab cl mw mx hx my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="im in io ip iq"><p id="4c2b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">最后，我是李。我会继续输出前端技术相关的故事。如果你喜欢这样的故事，想支持我，请考虑成为 <a class="ae le" href="https://medium.com/@islizeqiang/membership" rel="noopener"> <em class="oc">中等会员</em> </a> <em class="oc">。每月5美元，你可以无限制地访问媒体内容。如果你通过</em> <a class="ae le" href="https://medium.com/@islizeqiang/membership" rel="noopener"> <em class="oc">我的链接</em> </a> <em class="oc">报名，我会得到一点佣金。</em></p><p id="217e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">你的支持对我来说非常重要——谢谢。</p></div></div>    
</body>
</html>