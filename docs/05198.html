<html>
<head>
<title>How to Generate React Components from your Terminal</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何从终端生成React组件</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-generate-react-components-from-your-terminal-a27741a5b862?source=collection_archive---------0-----------------------#2020-08-11">https://levelup.gitconnected.com/how-to-generate-react-components-from-your-terminal-a27741a5b862?source=collection_archive---------0-----------------------#2020-08-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="daf2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">并加快您的工作流程</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/7d87578c125b31cf2011e2af197ed016.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ETe6mqtXwfCL_lVz"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">照片由<a class="ae le" href="https://unsplash.com/@bernardhermant?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">伯纳德·赫曼特</a>在<a class="ae le" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="bd6b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">添加一个新的组件可能是一个麻烦的任务，特别是如果你正在编写测试和使用类似Storybook的东西。单个组件的文件结构可能如下所示:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi lf"><img src="../Images/b999b46507dfeb629f4dc5ae10f73d6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:756/format:webp/1*2jjdoIe2Hgc4gLrfg20T0A.png"/></div></figure><p id="9127" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您可以通过编写一个节点脚本来获取您需要的任何组件模板并生成这些文件，而不是每次都手动编写，从而节省大量时间。</p><p id="51fb" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">目前有npm包可供您下载和试用，但这种方法的额外好处是您可以调整组件模板，以满足您和您的团队在逐个项目的基础上的需求。</p><h1 id="0aee" class="lg lh it bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">你需要什么</h1><ol class=""><li id="2586" class="me mf it js b jt mg jx mh kb mi kf mj kj mk kn ml mm mn mo bi translated">文件模板功能</li><li id="99c5" class="me mf it js b jt mp jx mq kb mr kf ms kj mt kn ml mm mn mo bi translated">生成和填充文件的节点脚本</li><li id="a863" class="me mf it js b jt mp jx mq kb mr kf ms kj mt kn ml mm mn mo bi translated">逻辑脚本中更新<strong class="js iu"> </strong> <code class="fe mu mv mw mx b"><strong class="js iu">components/index.ts</strong></code> <strong class="js iu"> </strong>文件(可选)</li><li id="eacd" class="me mf it js b jt mp jx mq kb mr kf ms kj mt kn ml mm mn mo bi translated">运行节点脚本的npm脚本(可选)</li></ol><p id="d979" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们首先在项目的根文件夹中创建一个目录来存放模板函数和逻辑。</p><pre class="kp kq kr ks gt my mx mz na aw nb bi"><span id="520a" class="nc lh it mx b gy nd ne l nf ng">take .generate_component<br/>touch component_templates.js<br/>touch index.js</span></pre></div><div class="ab cl nh ni hx nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="im in io ip iq"><h1 id="0aeb" class="lg lh it bd li lj no ll lm ln np lp lq lr nq lt lu lv nr lx ly lz ns mb mc md bi translated">组件模板</h1><p id="5812" class="pw-post-body-paragraph jq jr it js b jt mg jv jw jx mh jz ka kb nt kd ke kf nu kh ki kj nv kl km kn im bi translated">我的团队使用的一个基本组件的结构示例如下:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nw nx l"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">components/Navbar/Navbar . tsx</figcaption></figure><p id="9b21" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在我们的<code class="fe mu mv mw mx b"><strong class="js iu">component_templates.js</strong></code>文件中，我们可以添加一个函数来生成组件模板，如下所示:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nw nx l"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">。生成_组件/组件_模板. js</figcaption></figure><p id="d46b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">该函数在运行节点脚本时会收到<code class="fe mu mv mw mx b"><strong class="js iu">name</strong></code> <strong class="js iu"> </strong>参数。</p><p id="00ce" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">根据文件夹结构中要包含的文件，可以添加其他组件模板。在我的例子中，我想添加以下模板函数:</p><ul class=""><li id="de16" class="me mf it js b jt ju jx jy kb ny kf nz kj oa kn ob mm mn mo bi translated"><strong class="js iu">组件</strong></li><li id="2837" class="me mf it js b jt mp jx mq kb mr kf ms kj mt kn ob mm mn mo bi translated"><strong class="js iu">故事</strong></li><li id="2a62" class="me mf it js b jt mp jx mq kb mr kf ms kj mt kn ob mm mn mo bi translated"><strong class="js iu">测试</strong></li><li id="4508" class="me mf it js b jt mp jx mq kb mr kf ms kj mt kn ob mm mn mo bi translated"><strong class="js iu">木桶</strong></li></ul><p id="5f44" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">该文件夹结构的完整文件如下所示:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nw nx l"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">。生成_组件/组件_模板. js</figcaption></figure></div><div class="ab cl nh ni hx nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="im in io ip iq"><h1 id="a983" class="lg lh it bd li lj no ll lm ln np lp lq lr nq lt lu lv nr lx ly lz ns mb mc md bi translated">节点脚本</h1><p id="31e6" class="pw-post-body-paragraph jq jr it js b jt mg jv jw jx mh jz ka kb nt kd ke kf nu kh ki kj nv kl km kn im bi translated">节点脚本的任务将是:</p><ol class=""><li id="101b" class="me mf it js b jt ju jx jy kb ny kf nz kj oa kn ml mm mn mo bi translated">运行脚本时，从终端接受一个参数(组件名)</li><li id="aba3" class="me mf it js b jt mp jx mq kb mr kf ms kj mt kn ml mm mn mo bi translated">为新组件创建一个文件夹</li><li id="bef2" class="me mf it js b jt mp jx mq kb mr kf ms kj mt kn ml mm mn mo bi translated">将所需文件添加到文件夹中</li><li id="dba6" class="me mf it js b jt mp jx mq kb mr kf ms kj mt kn ml mm mn mo bi translated">从<code class="fe mu mv mw mx b"><strong class="js iu">components/index.ts</strong></code> <strong class="js iu"> </strong>文件中读取并插入新组件(可选)*</li></ol><p id="1d70" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">*这是假设您使用一个桶文件来导出components文件夹中的所有组件。下面是一个我们用作参考的桶文件示例:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nw nx l"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">组件/索引. ts</figcaption></figure><p id="1a06" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果您不遵循在<code class="fe mu mv mw mx b"><strong class="js iu">components/index.ts</strong></code>中包含新生成的组件的模式，那么我建议在接下来的例子中删除注释“Optional”后面的代码块。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nw nx l"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">。生成_组件/索引. js</figcaption></figure><p id="9128" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在脚本和模板已经运行，您可以通过在终端中输入以下命令来运行脚本:</p><pre class="kp kq kr ks gt my mx mz na aw nb bi"><span id="8461" class="nc lh it mx b gy nd ne l nf ng">node ./generate_component ComponentName</span></pre><p id="ae06" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">或者，如果您不想直接运行节点脚本，您可以在您的<code class="fe mu mv mw mx b"><strong class="js iu">package.json</strong></code> <strong class="js iu"> </strong>文件中编写一个npm脚本来运行该命令。</p><p id="3a2a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这是一个可能的例子:</p><pre class="kp kq kr ks gt my mx mz na aw nb bi"><span id="71b9" class="nc lh it mx b gy nd ne l nf ng">"scripts": {<br/>  "gc": "node .generate_component $1"<br/>}</span></pre><p id="e5c9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">上面脚本中的<code class="fe mu mv mw mx b"><strong class="js iu">$1</strong></code> <strong class="js iu"> </strong>将是运行npm脚本时传递给它的任何组件名。</p><p id="eeb0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在您已经编写了npm脚本，您可以在终端中运行以下命令:</p><pre class="kp kq kr ks gt my mx mz na aw nb bi"><span id="3427" class="nc lh it mx b gy nd ne l nf ng">npm run gc ComponentName</span></pre><p id="0446" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果您正确地执行了所有操作，一个新的文件夹应该出现在components文件夹中，并且该组件应该包含在您的<code class="fe mu mv mw mx b"><strong class="js iu">components/index.ts</strong></code>文件中。</p><p id="9341" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我希望你能把这种模式结合到你的工作流程中，为自己节省大量的时间！</p></div></div>    
</body>
</html>