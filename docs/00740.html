<html>
<head>
<title>Generate Images Using React, Vue, or Angular Using Puppeteer</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用React、Vue生成图像，或使用木偶师生成角度图像</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/generate-images-using-react-vue-angular-765525b45f28?source=collection_archive---------1-----------------------#2019-07-15">https://levelup.gitconnected.com/generate-images-using-react-vue-angular-765525b45f28?source=collection_archive---------1-----------------------#2019-07-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/36f1cffe76c1bca2e3307a1a3f230afb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U_uY2kSVr8ZfoIVhMFtuGQ.png"/></div></div></figure><p id="633a" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我最近开始用一种新的格式设计我博客的特色图片(就是你在上图中看到的那种)。我需要手动为20篇文章创建60张新图片。每篇文章有3张图片Open Graph、Instagram story和Instagram post图片。</p><p id="b79f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">通过简单地使其成为一个REST请求并发送标题、副标题和背景图像来生成新的文章图像集会有多好？</p><p id="556b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">让我们通过使用React和木偶师建立一个简单的项目来看看如何做到这一点。</p><p id="4385" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">首先，让我们在React应用程序(我们构建的图像+文本的UI)和图像渲染脚本之间划分我们的项目，我们需要一个像这样的文件夹结构:</p><figure class="la lb lc ld gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi kz"><img src="../Images/403cbb6f2343cbf7cb9d1dfb1632e6f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6s4fu-WKFMP03yL0e00vyw.png"/></div></div></figure><p id="81d7" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">让我们从使用<code class="fe le lf lg lh b">create-react-app</code>创建一个新的React应用程序开始:</p><figure class="la lb lc ld gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi kz"><img src="../Images/c8b1daf18cae8dade45fe5edc790db85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RNgBMp9lXkNIE-z3guxlSg.png"/></div></div></figure><p id="8b8d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">太好了！现在我们来思考一下我们想要塑造哪种形象。<br/>对于这篇文章，我想创建一个全高清(1920 * 1080像素)的图片，上面有一些文字。让我们设计它只是为了在开发过程中有一个参考:</p><figure class="la lb lc ld gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/7b711c04b1b6c5c9808c099bc937e38f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FiCEhpSFl-ZXXRX3sF2Y8w.png"/></div></div></figure><p id="8dde" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如你所见，我们使用了Google字体(<a class="ae li" href="https://fonts.google.com/specimen/Roboto" rel="noopener ugc nofollow" target="_blank"> <strong class="kd iu"> Roboto </strong> </a>)和Unsplash  中的<a class="ae li" href="https://images.unsplash.com/photo-1555448248-2571daf6344b?ixlib=rb-1.2.1&amp;ixid=eyJhcHBfaWQiOjEyMDd9&amp;auto=format&amp;fit=crop&amp;w=934&amp;q=80" rel="noopener ugc nofollow" target="_blank"> <strong class="kd iu">图像，所以我们需要在我们的组件中渲染它们。</strong></a></p><p id="ab26" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">让我们从创建背景组件开始。请注意，干净的React架构不是本文的目标。我们只需要创建一些有用的东西，并将其渲染为图像！</p><h2 id="6dc0" class="lj lk it bd ll lm ln dn lo lp lq dp lr km ls lt lu kq lv lw lx ku ly lz ma mb bi translated">背景组件</h2><figure class="la lb lc ld gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mc"><img src="../Images/0688733a1fefc76afcf3ebbffbecc0b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mH2G2hZn677fFrJWojqhBQ.png"/></div></div></figure><figure class="la lb lc ld gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi kz"><img src="../Images/00e195a79967d4f7fe4660b9be6a2cf5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HdbSvNUj9LyxnMtYMxZ1eA.png"/></div></div></figure><p id="b5d4" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如你所见，我们只是创建了一个简单的组件，它将从<code class="fe le lf lg lh b">props</code>获取背景图像，并将所有内容作为<code class="fe le lf lg lh b">children</code>道具呈现。</p><h2 id="ffdb" class="lj lk it bd ll lm ln dn lo lp lq dp lr km ls lt lu kq lv lw lx ku ly lz ma mb bi translated">标题组件</h2><figure class="la lb lc ld gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi kz"><img src="../Images/61346f1e8728e2a126b82e7e11ad8413.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FN1hyivppvX1w5TtMcsq1A.png"/></div></div></figure><figure class="la lb lc ld gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi kz"><img src="../Images/3de1fe51eea5027abd6d7548b60007cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yjog8zewyPaaKoyGU9n0Sg.png"/></div></div></figure><p id="bf5b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><code class="fe le lf lg lh b">Title</code>组件甚至更简单——它采用一个名为<code class="fe le lf lg lh b">text</code>的道具，并将它呈现在一个<code class="fe le lf lg lh b">h1</code>标签内。</p><h2 id="5a22" class="lj lk it bd ll lm ln dn lo lp lq dp lr km ls lt lu kq lv lw lx ku ly lz ma mb bi translated">字幕组件</h2><figure class="la lb lc ld gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi kz"><img src="../Images/494bd0bf52cbab2343b229647fa73573.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ihBenlcfvX_44L2zQSo4Hg.png"/></div></div></figure><figure class="la lb lc ld gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi kz"><img src="../Images/2b02dad3bb13d4a01753a054eb67e823.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SjpfgbGKPKz8pW8Ga_jE-A.png"/></div></div></figure><p id="a874" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">就像<code class="fe le lf lg lh b">Title</code>组件一样，<code class="fe le lf lg lh b">Subtitle</code>将获得一个名为<code class="fe le lf lg lh b">text</code>的道具，并将其呈现在<code class="fe le lf lg lh b">div</code>中。相当简单！</p><h2 id="c58e" class="lj lk it bd ll lm ln dn lo lp lq dp lr km ls lt lu kq lv lw lx ku ly lz ma mb bi translated">应用程序组件</h2><figure class="la lb lc ld gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi md"><img src="../Images/66da559f670e4713b884314b4e9f28d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-BxcPp3mK9Z7mjmrJHQgNA.png"/></div></div></figure><figure class="la lb lc ld gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mc"><img src="../Images/8e751b01222f23287745d609ae544e44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QeEQbMsNq0iB1EinOoqsjg.png"/></div></div></figure><p id="1850" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">使用<code class="fe le lf lg lh b">App</code>组件，我们将挂载整个图像和文本。让我们在网络浏览器中看看结果:</p><figure class="la lb lc ld gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi me"><img src="../Images/d129ca0c678d0a67381e5a35401ff7fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*64NTf9Mlc0ZtIt5ztb8R4g.png"/></div></div></figure><p id="4431" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">厉害！这正是我们所需要的。</p><h1 id="a205" class="mf lk it bd ll mg mh mi lo mj mk ml lr mm mn mo lu mp mq mr lx ms mt mu ma mv bi translated">将React项目呈现为PNG文件</h1><p id="dd99" class="pw-post-body-paragraph kb kc it kd b ke mw kg kh ki mx kk kl km my ko kp kq mz ks kt ku na kw kx ky im bi translated">我们需要创建React应用程序的生产版本。让我们将<code class="fe le lf lg lh b">"homepage”</code>属性添加到我们的<code class="fe le lf lg lh b">package.json</code>文件中。这将使它在本地工作，只需用浏览器打开生成的<code class="fe le lf lg lh b">index.html</code>文件:</p><figure class="la lb lc ld gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi kz"><img src="../Images/826ce7242ffaa0be8b91ef33d0cfa3ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mqHgTqMw3Lw8f9XHhgSGoQ.png"/></div></div></figure><p id="f5cc" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在让我们使用默认的<code class="fe le lf lg lh b">create-react-app</code>脚本启动构建:</p><figure class="la lb lc ld gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi kz"><img src="../Images/2de76631ed2591eaa7b96f0fb4c74ac6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UhVvUQYBzMN-WM8uSnHcag.png"/></div></div></figure><p id="c014" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">太好了！现在我们有了以下文件夹结构:</p><figure class="la lb lc ld gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi kz"><img src="../Images/94fbd0a6ddf723e5f47479db9cbacf66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bdfJxzMckzEKFFmQDNAWGw.png"/></div></div></figure><p id="f38e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们已经将React app项目与Render项目(将为我们生成图像的项目)分开。在<code class="fe le lf lg lh b">/react-project/build</code>目录中，我们可以找到用于生成图像的产品版本。</p><p id="9c3e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在让我们进入我们的<code class="fe le lf lg lh b">render-project</code>文件夹，初始化一个新的<code class="fe le lf lg lh b">package.json</code>文件。</p><figure class="la lb lc ld gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi kz"><img src="../Images/3dd23c1faaba52cca2ae83ebd726cfe9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kCi7XzFqCGZL0Qxzdwq8Rw.png"/></div></div></figure><p id="bf1a" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在让我们添加我们需要的唯一依赖项，<a class="ae li" href="https://github.com/GoogleChrome/puppeteer" rel="noopener ugc nofollow" target="_blank"> <strong class="kd iu">木偶师</strong> </a>。</p><figure class="la lb lc ld gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi kz"><img src="../Images/3439aff1d4959a5da7464d2a5764ff4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J8uclnEc3yTzyg-3chUxTQ.png"/></div></div></figure><p id="c570" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">木偶师是由谷歌建立的一个令人惊讶的库，它公开了无头的Chrome APIs。这意味着我们在谷歌Chrome上做的几乎所有事情都可以使用这个神奇的库来完成！</p><p id="af6f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">让我们看看如何实现图像生成:</p><figure class="la lb lc ld gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi kz"><img src="../Images/5eee8bf6a86b9d9c6b76da5464d0c4e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mpiJyd_UuDP1qyT-LELltQ.png"/></div></div></figure><p id="89d0" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">就是这样！仅仅14行代码就可以从我们的React场景中生成一个PNG图像！</p><p id="ad12" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">让我们深入分析一下我们正在做的事情:</p><ol class=""><li id="12d6" class="nb nc it kd b ke kf ki kj km nd kq ne ku nf ky ng nh ni nj bi translated">我们创建了一个新的木偶浏览器。</li><li id="4b1b" class="nb nc it kd b ke nk ki nl km nm kq nn ku no ky ng nh ni nj bi translated">我们创建一个新页面。</li><li id="ef3c" class="nb nc it kd b ke nk ki nl km nm kq nn ku no ky ng nh ni nj bi translated">我们将它的目标URL设置为我们生成的<code class="fe le lf lg lh b">index.html</code>文件。请注意，我们使用的是<code class="fe le lf lg lh b">file://</code>，<code class="fe le lf lg lh b">http</code>协议不适用于这种特定情况！</li><li id="8732" class="nb nc it kd b ke nk ki nl km nm kq nn ku no ky ng nh ni nj bi translated">我们将视口设置为1920x1080像素。这样，我们将覆盖整个React场景，并在下一个脚本中完整地捕捉它。</li><li id="989f" class="nb nc it kd b ke nk ki nl km nm kq nn ku no ky ng nh ni nj bi translated">我们截取页面截图并保存到<code class="fe le lf lg lh b">./myAwesomeImage.png</code>文件。</li><li id="fa55" class="nb nc it kd b ke nk ki nl km nm kq nn ku no ky ng nh ni nj bi translated">我们关闭浏览器。</li></ol><p id="abc5" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在让我们看看结果:</p><figure class="la lb lc ld gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi np"><img src="../Images/1e5fcce9250b2cc4efe0e8b449119659.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BikLghxU9DuA_kDjWjUqAw.png"/></div></div></figure><p id="1b13" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">你能猜出哪个是原始图像，哪个是用React生成的吗？我也没有！</p><p id="629b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">您可以在这个资源库中找到完整的项目:</p><div class="nq nr gp gr ns nt"><a href="https://github.com/jsmonday/jsm22" rel="noopener  ugc nofollow" target="_blank"><div class="nu ab fo"><div class="nv ab nw cl cj nx"><h2 class="bd iu gy z fp ny fr fs nz fu fw is bi translated">jsmonday/jsm22</h2><div class="oa l"><h3 class="bd b gy z fp ny fr fs nz fu fw dk translated">第22篇JSMonday文章的源代码。在GitHub上创建一个帐户，为jsmonday/jsm22的开发做出贡献。</h3></div><div class="ob l"><p class="bd b dl z fp ny fr fs nz fu fw dk translated">github.com</p></div></div><div class="oc l"><div class="od l oe of og oc oh jz nt"/></div></div></a></div><h1 id="c6cb" class="mf lk it bd ll mg mh mi lo mj mk ml lr mm mn mo lu mp mq mr lx ms mt mu ma mv bi translated">后续步骤</h1><p id="6a44" class="pw-post-body-paragraph kb kc it kd b ke mw kg kh ki mx kk kl km my ko kp kq mz ks kt ku na kw kx ky im bi translated">那么现在，我们下一步能做什么？我刚刚开源了一个<strong class="kd iu">谷歌云功能</strong>(它也可以作为一个<strong class="kd iu"> AWS Lambda </strong>)的代码，只需通过REST API发送标题、副标题和图片链接，就可以生成Instagram帖子/故事和开放图形图像:</p><div class="nq nr gp gr ns nt"><a href="https://github.com/jsmonday/sigf" rel="noopener  ugc nofollow" target="_blank"><div class="nu ab fo"><div class="nv ab nw cl cj nx"><h2 class="bd iu gy z fp ny fr fs nz fu fw is bi translated">jsmonday/sigf</h2><div class="oa l"><h3 class="bd b gy z fp ny fr fs nz fu fw dk translated">无服务器图像生成功能。在GitHub上创建一个帐户，为jsmonday/sigf开发做贡献。</h3></div><div class="ob l"><p class="bd b dl z fp ny fr fs nz fu fw dk translated">github.com</p></div></div><div class="oc l"><div class="oi l oe of og oc oh jz nt"/></div></div></a></div><p id="ebfd" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">可能性是无限的。您可以构建一个基于某些参数生成图像的Express服务器，或者您也可以使用Puppeteer和React生成PDF发票。全凭你的想象力！</p><figure class="la lb lc ld gt ju gh gi paragraph-image"><a href="https://github.com/sponsors/micheleriva"><div class="gh gi oj"><img src="../Images/e05f00ed2cddfd2907284cb397168c3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xAIiY1uBKSNdw12oq2BbjA.png"/></div></a></figure></div></div>    
</body>
</html>