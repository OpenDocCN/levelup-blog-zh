# Linux 中常见软件问题的故障排除

> 原文：<https://levelup.gitconnected.com/troubleshooting-general-software-problems-in-linux-1524db667e25>

![](img/1151ab8e7081783ff9960285a4babba1.png)

马修·韦林在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上的照片

继续故障排除经验，现在是时候转移到软件角度了。这需要一定的心态来发现和解决问题，因为错误实际上可能存在于许多向量中。

如果你有一定的系统管理员或软件开发人员的经验，这个过程会变得很容易，当然，最好有一定的技术背景来正确地完成这个过程。

要排除故障，我们需要一些问题，对吗？不幸的是，这个软件非常庞大，可能有大量的问题需要解决。也可以被看作是好的东西，更好的改进机会等。另一天的东西。

## 问题的类型

这里需要的第一个好的分析提示是检测问题产生的位置。为了便于理解，我尝试将许多常见因素归类到一个小列表中，包括:

1.  **硬件** **问题**:这主要集中在你系统中的物理问题，来自电线、插头或掉落的磁盘。一个好的直接解决方法是修复或更换故障或损坏的零件。
2.  操作系统的内核问题:这种情况并不常见，但也有可能发生。很多时候，问题输出是用内核的语义版本来表示的，如果出于某种原因，您正在使用一个实验性的内核版本，问题就不言自明了。有很多很多方法可以解决这个问题，但总的来说，你将结束修补那些内核错误，然后重新编译内核，或者替换整个内核并重新开始。
3.  **应用软件**:根据所用程序的类型，一些预期的功能可能会因环境或配置而工作，为此，您可以随时检查日志以获得确切的错误，很多时候这些问题可能与系统设置中的错误配置或损坏的标志有关。
4.  **配置问题**:可能出现在系统范围内，应用软件故障排除方法也适用于此。
5.  **用户问题**:相关用户账号问题。时钟，用户密码，显示器设置，以及所有那些无聊的东西。

一旦您检测到可能的问题载体，您就可以开始计划故障排除过程。这个计划可以通过 4 个简单的步骤来恢复，从**观察问题行为**开始，这里的目标是能够重现问题。然后，我们可以转到**制定对问题原因的猜测**(设定问题的原因)。

此时，我们可以**尝试修复问题**，在这里，你应该修复并记录你修复的内容，确保更改解决了所有问题。如果没有，第四步也是最后一步是返回到第一步，重复整个过程，直到完全验证。

## 预防措施

软件上的问题，生活上的问题，一切的问题，都是不可避免的。但是当与软件相对应时，我们可以通过简单有效的措施来防止错误。

就硬件而言，预防很简单，**购买受支持的元素**，这将给你带来更少的问题，因为已经由制造商甚至早期采用者社区进行了测试。

另一个常见的错误行为是**处理器超频。**如果您超过了处理器的平均速度(提高了时钟频率),那么它将产生更多的热量，相应的硬件可能会出现故障或使整个系统崩溃(散热能力较慢)

在软件方面，还有更多的事情要做，一件简单的事情就是远离测试版软件，这是相当令人兴奋的，但会由于未经测试的行为而导致问题。此外，阅读日志文件，许多人不会这样做，浪费大量时间猜测和谷歌错误。

让我们暂时停留在**日志**上，在 Linux 环境中，**日志**目录位于`/var/log`目录中。

这里的另一件事是，您可以过滤和检查`/etc/syslog.conf`文件中的更多信息，它会告诉您代表什么类型的设施或服务器，以及写入的特定日志文件。

> **整个故障诊断都是为了收集信息，以便尽可能确定地采取行动。**

我。

## 收集系统信息

有很多方法(命令)来获取关于操作系统及其状态的信息，如网络、磁盘、打印机等。此外，还有像`top`或`htop`命令这样的系统进程监控工具。

让我们从内核操作系统信息开始，这里使用的最好命令是`dmesg`命令，这个命令显示内核环形缓冲区(内核消息)，这些消息通常写在其他引导文件中

通过执行`dmesg`,您将获得关于系统、硬件、驱动程序、处理器速度、高速缓存、可用内存、驱动程序信息等信息，这对于诊断问题来说非常重要。

我们也可以使用:

1.  用于联网:`ifconfig`
2.  对于磁盘统计:`du`、`df`或`fdisk`
3.  对于打印机:`lpq`
4.  对于进程:`top`或`htop`都是交互式命令，用于获取系统中使用的 Pid、用户、进程、大小和内存使用等信息。

## 启动或停止进程

许多正在运行的服务在`/etc/init.d`目录中被引用，一些命令如`systemctl`或`service`可以在运行时正确处理程序的状态。

当遇到不好的行为时，有时可能是一个挂起的进程，许多开发人员使用`kill`命令来完成执行，但现实是你没有正确地停止程序，最好是`start`或`stop`进程，然后重新访问配置脚本或日志来检查行为。有些程序会生成`lock`文件，里面保存着控制程序，有时这个文件会因为这个文件的存在而让系统无法启动。

## 有用的命令

在讨论引导问题之前，我们可以重温一些用于文件定位、时间访问和过滤的有用命令。

`find`命令从特定的目录集开始查找系统。这里有一个例子:`find / -name *.local`，这里我们过滤的是`.local`格式的文件，另外，通过`-amin [n|-n|+n]`我们可以过滤在`N`分钟内访问过的文件。

对于使用正则表达式过滤，我们使用`grep`命令，对于日志，`tail`命令对于访问底部(新)生成的记录非常有用。

其中大部分是纯基础的 Linux 命令，但值得一提。

## 启动问题

免责声明:LILO 适用于旧系统。现在默认使用 GRUB

为了更好地理解这一点，让我们倒回到 BIOS 系统启动时，它将检查硬件和内存，执行测试，如果所有测试都通过，它将指示转到磁盘的 MBR，之后，它将获得访问 MBR 中的引导加载程序并与之交互的指令。这就是 LILO 作为 Linux 加载器的作用。

我在以前的其他帖子中讨论了引导过程，但是出于故障排除的目的，最好直接解释 LILO 校验码。如今，LILO 已经被 GRUB 取代，成为大多数发行版的默认引导加载程序

如果在引导过程中出现问题， **LILO** 可以通过使用字母(表示状态的加载程序片段)来显示错误代码。

`L`字母表示第一级已经加载，但增加了 2 位错误描述，这种状态主要表示磁盘错误代码。

`LI`序列设置 boot 能够加载到第二阶段，在执行中有一些问题。`LIL`和`LILO`序列是一切都成功完成的好迹象。

在此之后，您可以更改某些内容或移动文件，但是 **LILO** 将不能或不能直接从配置文件中恢复数据，您将需要再次运行 LILO 命令并使更改永久化

LILO 的一个好处是它会坏掉，没有它你也可以启动系统。有一些像`LoadLIN`这样的替代品，需要一份硬盘、一个引导驱动器和 bin 文件本身。如果没有，您可以使用`Emergency mode boot disk`并使用最小分布来评估当前状态并做出决策。

## 备份问题

我们可以将备份问题分成两种类型。

计算机方面的问题，集中在错误配置的驱动程序和写权限(集中在设备上)，而没有分开设置文件权限(用户权限)

备份设备端的问题是当我们遇到介质错误时。尝试恢复文件时，您可以遵循这些建议。

1.  不要 GZIP 你的文件(在 Tar 上压缩)，因为如果有东西损坏了，你以后就不能恢复数据了
2.  不要滥用备份介质
3.  尝试进行备份
4.  确保您可以在进行备份后回滚信息。

不是关于制作备份，而是关于制作格式良好且可用的备份

## 应用问题

同样，两个视角，但以人为本。

从用户(最终用户)的角度来看，您只需测试您的程序，检查它是否正常工作，如果您愿意，您可以对服务进行自我诊断和问题检测，并将其报告给所有者或利益相关者，以便以后进行改进。

从系统管理员的角度来看，保持系统的良好运行，监控一切。记住，你是你能衡量的人

## 网络问题

这个视角主要关注连通性。整个想法是为了防止连接故障。又为了什么。

1.  测试网络的每个部分(强制)
2.  检查为服务器、动态/静态 IP、网关和其他服务成功到达而设置的网络基础架构。
3.  本地网卡接口状态，一个完整的网络诊断。
4.  名称服务器注册管理机构配置和记录