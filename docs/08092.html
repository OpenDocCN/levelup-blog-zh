<html>
<head>
<title>Using the Tag System in Unity and Damaging the Player</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Unity中使用标签系统并损坏播放器</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/using-the-tag-system-in-unity-and-damaging-the-player-f8267c1c7420?source=collection_archive---------4-----------------------#2021-04-02">https://levelup.gitconnected.com/using-the-tag-system-in-unity-and-damaging-the-player-f8267c1c7420?source=collection_archive---------4-----------------------#2021-04-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="92b9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在Unity中，标签是一个非常有用的系统，它让我们很容易判断哪些对象正在相互交互，以及它们应该如何在我们的代码中交互。</p><p id="65a3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">它们与触发器、碰撞器和刚体齐头并进。他们是这样工作的！</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/237a21cace58e257c29180c5bef1f11d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*z_3eyVOBxL8YYtecJzM6xg.gif"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">敌人现在可以被正确消灭了！</figcaption></figure></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><h1 id="dd1f" class="li lj iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">标签系统</h1><p id="2fa1" class="pw-post-body-paragraph jn jo iq jp b jq mg js jt ju mh jw jx jy mi ka kb kc mj ke kf kg mk ki kj kk ij bi translated">使用<strong class="jp ir">标签</strong>系统简单明了。它给一个<strong class="jp ir">对象</strong>一个<strong class="jp ir">标签</strong>，或者<strong class="jp ir">名字</strong>，以便于<strong class="jp ir">引用</strong>。然后当一个对象<strong class="jp ir">与那个<strong class="jp ir">标签分类的任意成员</strong>交互</strong>时，以同样的<strong class="jp ir">方式与每个</strong>成员<strong class="jp ir">执行一个动作。</strong></p><p id="f2d0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">给一个对象一个<strong class="jp ir">标签</strong>，它位于<strong class="jp ir">检查器</strong>窗口中其<strong class="jp ir">名称</strong>下<strong class="jp ir">。</strong></p><p id="4f63" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有些是预制的，但是你可以在任何给定的情况下创造你自己的。在我们的例子中，我们将为我们的<strong class="jp ir">激光器</strong>创建一个。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ml"><img src="../Images/79f03b504674980fd2f03f7a87ffba50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*DVn4HXSx31dXST3bQs5RvA.gif"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">给我们的球员一个标签，并为我们的激光创造一个。</figcaption></figure><p id="487a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在在我们的<strong class="jp ir">敌人</strong>代码中，我们可以选择<strong class="jp ir">在<strong class="jp ir">碰撞检测</strong>期间</strong> it <strong class="jp ir">如何与每个<strong class="jp ir">标签</strong>交互</strong>，通过使用<strong class="jp ir"> if/else语句</strong>，以及<strong class="jp ir">检查</strong>标签— <strong class="jp ir"> other。CompareTag("Player") </strong>。</p><p id="32eb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你也可以使用— <strong class="jp ir"> other.tag == "Player" </strong>。他们都工作。</p><p id="47d3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果<strong class="jp ir">敌人与</strong>我方<strong class="jp ir">玩家</strong>发生碰撞，<strong class="jp ir">只会摧毁</strong>敌人，而<strong class="jp ir">会伤害</strong>玩家(后面会详细介绍)。如果<strong class="jp ir">敌人</strong>接触到<strong class="jp ir">激光</strong>，<strong class="jp ir">摧毁两个物体</strong>。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/57d31b2b5da4e8db4610a26946d58656.png" data-original-src="https://miro.medium.com/v2/resize:fit:1070/format:webp/1*BQHL2A2tfuZnHMNAMQy7fA.png"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">在敌方脚本中设置我们的标签。</figcaption></figure><p id="cd4a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">实际代码:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/237a21cace58e257c29180c5bef1f11d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*z_3eyVOBxL8YYtecJzM6xg.gif"/></div></div></figure></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><h1 id="63e8" class="li lj iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">玩家代码清理—重命名私有变量</h1><p id="6fd7" class="pw-post-body-paragraph jn jo iq jp b jq mg js jt ju mh jw jx jy mi ka kb kc mj ke kf kg mk ki kj kk ij bi translated">接下来我们将创建我们的伤害玩家逻辑。不过在此之前我想<strong class="jp ir">清理一下</strong>的<strong class="jp ir">玩家代码</strong>。</p><p id="1fef" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">用<strong class="jp ir">下划线“_”前缀</strong>命名<strong class="jp ir">私有</strong>变量是<strong class="jp ir">最佳实践</strong>和<strong class="jp ir">行业标准</strong>。我仍然经常搞砸，但是这给了我一个很好的机会向你展示如何<strong class="jp ir">有效地重命名变量</strong>，并且<strong class="jp ir">而不是</strong>搞乱你的整个代码。</p><p id="23ec" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你想重命名一个变量，如果你仅仅改变了一个引用的引用，你的T2代码将会破坏T3，因为你所有的其他变量的实例现在都是不正确的。</p><p id="f0c4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">最好的</strong>方法是<strong class="jp ir">选择你想要重命名的变量</strong>，确保<strong class="jp ir">高亮显示</strong>，然后按两次<strong class="jp ir"> CTRL+R </strong>。这允许您重命名变量及其每个实例。超级得心应手！</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mn"><img src="../Images/3aba617a327a95b603b4054f8895bc48.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*emJHOvzeambnG9TaE-7xiw.gif"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">另一个快捷方式，我在上面的例子中使用的，是在按下CTRL+R两次后，我按下<strong class="bd lk"> Home </strong>键，转到变量的开头，输入我的下划线。而不是像在_canFire示例中那样重新键入整个变量名。</figcaption></figure></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><h1 id="0b30" class="li lj iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">损坏播放器</h1><p id="9681" class="pw-post-body-paragraph jn jo iq jp b jq mg js jt ju mh jw jx jy mi ka kb kc mj ke kf kg mk ki kj kk ij bi translated">现在回到我们定期安排的节目。</p><p id="60b2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了损坏我们的球员，我们必须做一些事情。创建一个变量，创建一个公共方法，然后从我们的敌人脚本中调用该方法！</p><p id="a02a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">创建我们的<strong class="jp ir">私有int _ lifes</strong>。出于调试目的，我将它设为<strong class="jp ir">【serialized field】</strong>——以确保它正常工作。它也是私有的，所以没有任何代码可以随意改变它。他们将不得不使用我们专用的方法。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/d6fcc530eefc03b207e714a4d8f35425.png" data-original-src="https://miro.medium.com/v2/resize:fit:898/format:webp/1*PcS28PInCEeFDVpULgz7XA.png"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">创建我们的生活变量。</figcaption></figure><p id="e715" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">还有我们的<strong class="jp ir"> DamagePlayer() </strong>函数:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/b3c3532f031ed754e647844199e6b5d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:744/format:webp/1*jVwERrY0iucgUvVscZqjig.png"/></div></figure><p id="6192" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">每调用一次，我们的<strong class="jp ir">生命</strong>将<strong class="jp ir">减少</strong>1。如果<strong class="jp ir">_ lifes</strong>等于<strong class="jp ir">等于</strong>或者<strong class="jp ir">小于0 </strong>(比如我们有一个伤害更大的超级强敌)，那么我们的玩家就是<strong class="jp ir">被摧毁</strong>！</p><p id="f7d5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在从另一个脚本调用这个函数/方法！这就需要一些<strong class="jp ir">脚本沟通</strong>。这是另一天的大主题，但是我们将使用<strong class="jp ir">get component&lt;&gt;()</strong>函数来实现这一点。</p><p id="f258" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在我们的敌人剧本中:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/20518b155cd97b73f56830b84c80de22.png" data-original-src="https://miro.medium.com/v2/resize:fit:1338/format:webp/1*now-X_Xk3Yk7Up1cmFZLKQ.png"/></div></figure><p id="ad33" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">如果</strong><strong class="jp ir">其他</strong>标签是<strong class="jp ir">播放器</strong>，那么我们<strong class="jp ir">创建</strong>一个<strong class="jp ir">类型播放器</strong>的<strong class="jp ir">变量</strong>称为<strong class="jp ir">播放器</strong>，它需要获取一个对其<strong class="jp ir">播放器脚本</strong>的引用，作为<strong class="jp ir">组件</strong>。(于是<strong class="jp ir">get component&lt;Player&gt;()</strong>)。</p><p id="3990" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">如果(玩家！= null) </strong>是一个空检查，以防有一个bug不能准确地从'<strong class="jp ir"> other </strong>'对象中检索到<strong class="jp ir">组件</strong>。</p><p id="70b6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们有了变量<strong class="jp ir"> player </strong>，它正确地引用了它的<strong class="jp ir">脚本组件</strong>，我们可以调用<strong class="jp ir"> Player脚本</strong>中的任意函数。在这种情况下，它将是我们刚刚创建的<strong class="jp ir"> DamagePlayer() </strong>！</p><p id="3b4c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">以下是我们的完整代码:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mr"><img src="../Images/5a4d26a0098da7d29e22f915d182c51f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*QB4to-amu0XEZK3gK6_owg.gif"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">你可以看到我们每打一个敌人生命就减1！</figcaption></figure></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><p id="0123" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们有进展了！现在成为一个糟糕的飞行员是有后果的！</p><p id="0b33" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，我们将通过一个繁殖管理器来繁殖敌人，并介绍协程！</p></div></div>    
</body>
</html>