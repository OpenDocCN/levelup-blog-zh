<html>
<head>
<title>How to Build Great Command Line Interfaces (CLIs)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何构建优秀的命令行界面(CLI)</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-build-great-command-line-interfaces-clis-5d387bb51d55?source=collection_archive---------11-----------------------#2022-04-03">https://levelup.gitconnected.com/how-to-build-great-command-line-interfaces-clis-5d387bb51d55?source=collection_archive---------11-----------------------#2022-04-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="0876" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">关注用户体验</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/d6a1cdeb64a9585f9ee7d007655e6d41.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*a57XhWTi-c1AIIgu-XRAWg.jpeg"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">谢尔盖·佐尔金在<a class="ae lb" href="https://unsplash.com/s/photos/typing-on-keyboard?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="7f92" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="lc">命令行界面</em> (CLIs)是自动化任务的绝佳工具。CLI在开发人员的生活中非常常见，可以节省日常任务的时间和精力:例如，GitHub CLI、Docker CLI、Kubernetes CLI等。</p><p id="e43a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">CLI易于在命令行中从终端直接使用，而且——这些工具在脚本编写方面为用户提供了巨大的价值。</p></div><div class="ab cl ld le hu lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="ij ik il im in"><p id="ce29" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">设计、构建和实现CLI的主要目标应该是为用户创建一个易于使用的工具。以下几点旨在作为开始创建CLI的指南。第一步主要是覆盖基础，而最后一步更关注用户体验。</p><ol class=""><li id="913c" class="lk ll iq jp b jq jr ju jv jy lm kc ln kg lo kk lp lq lr ls bi translated"><strong class="jp ir">范围</strong></li></ol><p id="7301" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">此CLI旨在向用户提供什么？<em class="lc"> </em>用尽可能多的细节来回答这个问题，可以在过程中节省很多时间。从一开始就对CLI应该支持什么有一个清晰的了解，它可以在项目的架构和结构方面有所帮助，提高模块性和长期的易维护性。</p><p id="a6ac" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="lc">明确列出您希望CLI支持的任务。</em>这涵盖了基础知识，即您希望实现自动化的流程。</p><p id="7952" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="lc">明确列出您希望CLI支持的</em> <strong class="jp ir"> <em class="lc">用户体验</em> </strong> <em class="lc">任务。</em>这是指应该改善用户体验的任务。</p><p id="0b93" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2.<strong class="jp ir">姓名</strong></p><p id="8726" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在制作命令行界面中定义范围后，为其选择一个名称。通常，cli名称带有后缀<em class="lc"> ctl </em>、control的别名(例如:kubectl)或后缀- <em class="lc"> cli </em>。虽然这只是一个建议，但是有很多很棒的地方都有一个提示性的词。</p><p id="9d4d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">想一个有暗示性的，好用，好记，易写的名字。CLI it的名称将是根命令，所有子命令都将连接到它。</p><p id="0c18" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">3.<strong class="jp ir">命令结构</strong></p><p id="716f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">列表中的下一步是命令的<strong class="jp ir">结构。重要的是将这一步与第一步和项目的大局相匹配。</strong></p><p id="c82f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这一步中，决定一个命令结构，并在整个项目中遵循这个结构。保持一致。使用动词(例如:创建、列出、获取、显示、显示、更新、删除、移除等。)，名词和决定结构。有的CLI有:<em class="lc"> &lt;根命令&gt; &lt;名词&gt; &lt;动词&gt; </em>结构，有的则有:<em class="lc"> &lt;根命令&gt; &lt;动词&gt; &lt;名词&gt; </em>。</p><p id="17bf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">可能会考虑目标用户，这取决于CLI的范围—最终，他们将是使用CLI的人。例如，如果他们将使用与Kubernetes CLI关联的CLI，并且让<strong class="jp ir">熟悉的东西</strong>与<em class="lc">kubectl get&lt;resource&gt;</em>命令同步对他们来说更有意义。</p><p id="e1df" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">CLI应根据最小意外原则工作。</p><p id="c842" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">4.<strong class="jp ir">名称空间</strong></p><p id="82e2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是一个可选步骤，由CLI的范围和它应该涵盖的任务决定，可能只是一些小任务，可以包含在子命令的第一个“级别”中。</p><p id="2136" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">名称空间根据标准对多个子命令进行分组。名称空间可以改进模块性、命令结构，并且如果用户想要使用一组特定的命令，它可以更加直观。</p><p id="baeb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">从一开始就记住清晰的画面，关注目标(例如，能够容易地维护、集成新功能)和用户体验。</p><p id="4f46" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">5.<strong class="jp ir">易于安装，易于更新</strong></p><p id="558e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是更加关注<em class="lc">用户体验的第一步。</em></p><p id="0b3a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">CLI应该易于安装，易于更新到最新版本。</p><p id="0f76" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">软件包管理器在这个等式中起了很大的作用，并且无疑改善了用户在安装和更新CLI时的体验。考虑软件包管理器的支持，比如Aptitude(针对Ubuntu)、Homebrew(针对MacOS)或Chocolatey(针对Windows)。</p><p id="fd87" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">6.<strong class="jp ir">自动完成</strong></p><p id="b512" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">支持为CLI完成是一个很大的优势，它使它更容易使用，并节省时间。</p><p id="13ef" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您可以为命令、标志和标志值添加补全。</p><p id="df4e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">7.<strong class="jp ir">命令和标志别名</strong></p><p id="aaf0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了更容易使用，CLIs命令的一个很酷的东西是命令的别名和标志的缩写。使用直观的别名和提示性的简写字符(小写或大写)作为标志。</p><p id="0a84" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">8.<strong class="jp ir">全局标志</strong></p><p id="ba1e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">CLI的所有命令都支持全局选项。</p><p id="67c1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">例如，您可能希望支持一个<em class="lc">输出</em>选项(text、json、yaml)，一个<em class="lc">宽的</em>选项来显示输出中的多列——但不是默认情况下，一个<em class="lc">列</em>选项来只显示输出中的特定列。</p><p id="f45c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">9.<strong class="jp ir">环境变量</strong></p><p id="59fd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">环境变量很容易在终端和工作流中使用(通过secrets)。</p><p id="0bd8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">例如，如果CLI是工具组合的一部分，您可能希望在用户身份验证方面提供一致性，从环境变量中获取凭据可能是一种方法。</p><p id="5446" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">10.<strong class="jp ir">用户友好输出</strong></p><p id="6edc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了改善用户与CLI的交互，您可以关注自定义输出。使用不同的颜色；红色—错误，黄色—警告，等等。在等待命令时使用装载杆。你可以使用表情符号，如果你考虑适当的话，例如:感叹号，支票，问号。(注意检查输出是否正确显示在多个终端上。)</p><p id="fe9a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使工具具有交互性和趣味性。享受这个过程，发挥创造力。</p><p id="a30f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">11.<strong class="jp ir">脚本支持</strong></p><p id="cb84" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">可以在脚本中使用命令行界面，以便自动化工作流和管道中的任务。如果这是CLI范围的一部分，请考虑在脚本中提供选项和标志，以便于集成和使用。</p><p id="f0f8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">例如，如果CLI向用户显示问题以确认继续进行—考虑添加一个<em class="lc">强制</em>标志以在脚本中使用。这样，命令将继续执行，无需用户确认。此外，您可以考虑使用<em class="lc"> no-headers </em>选项来更容易地管理脚本中的输出。</p><p id="a45c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">12.<strong class="jp ir">调试</strong></p><p id="562c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">像<em class="lc"> debug </em>这样的全局选项可以为用户显示调试中的重要信息。它可以通过标志或环境变量来设置。</p><p id="a5a9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">13.<strong class="jp ir">文档</strong></p><p id="c8d5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为你的项目准备好文档，包括目的、安装步骤、用法、例子、测试、发布等。使用CLI时，您可以将集成到记录的终端的文档中；对于用户来说，看到一个可视的例子可能是更动态的。</p></div><div class="ab cl ld le hu lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="ij ik il im in"><p id="b6c6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，记得要开心，要有创意。</p><p id="4afa" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="lc">CLI应该有趣、简单且易于使用，让用户的生活更轻松，而不是更困难。在构建CLI时，请始终牢记这一点。假装你是这个工具的使用者。你会用它吗？</em></p></div><div class="ab cl ld le hu lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="ij ik il im in"><p id="487f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">注意:这些是基于我在Go中使用<a class="ae lb" href="https://github.com/spf13/cobra" rel="noopener ugc nofollow" target="_blank"> Cobra </a>和<a class="ae lb" href="https://github.com/spf13/viper" rel="noopener ugc nofollow" target="_blank"> Viper </a>编写的CLIs经验的提示和技巧。如果你有什么建议，如果你想分享你建设CLI的经验，请在下面留下评论。干杯！</p></div></div>    
</body>
</html>