<html>
<head>
<title>Build a command-line Application using kotlinx-cli | Kotlin beginner to advanced</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用kotlinx-cli | Kotlin初级到高级构建命令行应用程序</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/kotlin-beginner-to-advance-build-real-command-line-tool-using-kotlinx-cli-608bbc6d9a3?source=collection_archive---------1-----------------------#2020-03-12">https://levelup.gitconnected.com/kotlin-beginner-to-advance-build-real-command-line-tool-using-kotlinx-cli-608bbc6d9a3?source=collection_archive---------1-----------------------#2020-03-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/a9f3f9471b684b8e8f09d0eb798e7dbe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YK5PLgDKciZ0J66Ilvb9wQ.png"/></div></div><figcaption class="jc jd gj gh gi je jf bd b be z dk translated">科特林标志</figcaption></figure><div class=""/><p id="d555" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">在许多面向对象语言中，编写命令行应用程序是一个挑战。大多数面向对象的语言需要沉重的结构(源代码)来运行一个简单的程序。Java/Kotlin就是其中之一。在这里，格雷尔来救我们了。</p><p id="3794" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">Gradle是一个帮助我们创建和维护大型应用程序的框架。格拉德太棒了。然而，设置Gradle也是一项繁琐的任务。在这里，我将一步一步地展示如何在Kotlin中构建一个可伸缩的CLI(命令行界面)工具。</p><h2 id="09eb" class="ld le ji bd lf lg lh dn li lj lk dp ll kq lm ln lo ku lp lq lr ky ls lt lu lv bi translated">先决条件:</h2><ol class=""><li id="ffba" class="lw lx ji kh b ki ly km lz kq ma ku mb ky mc lc md me mf mg bi translated">Java 1.8及以上版本</li><li id="2682" class="lw lx ji kh b ki mh km mi kq mj ku mk ky ml lc md me mf mg bi translated"><a class="ae mm" href="https://gradle.org/install/" rel="noopener ugc nofollow" target="_blank"> Gradle 5.5。</a> 1及以上(支持Kotlin DSL的Gradle)</li></ol><h2 id="c292" class="ld le ji bd lf lg lh dn li lj lk dp ll kq lm ln lo ku lp lq lr ky ls lt lu lv bi translated">步骤1:创建一个多模块的Gradle项目</h2><p id="3f58" class="pw-post-body-paragraph kf kg ji kh b ki ly kk kl km lz ko kp kq mn ks kt ku mo kw kx ky mp la lb lc im bi translated">创建一个文件夹，用Gradle搭建结构。</p><pre class="mq mr ms mt gt mu mv mw mx aw my bi"><span id="3845" class="ld le ji mv b gy mz na l nb nc">mkdir kotlin-demos #[your project name]<br/>cd kotlin-demos &amp;&amp; gradle init</span></pre><figure class="mq mr ms mt gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nd"><img src="../Images/ef0da0476b0cf80c74ff26fa10d7473e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9Kzbw07NBIcpmqIETsRLtg.png"/></div></div></figure><p id="97b0" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">选择基本<strong class="kh jj">【选项1】</strong>或直接按回车键。之后选择Kotlin <strong class="kh jj">【选项2】</strong>作为构建脚本DSL。您可以输入所需的项目名称。项目名称可以不同于文件夹名称。</p><p id="ed9a" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">初始化完成后，您可以在IntelliJ(IDE)中打开项目。它将同步Gradle项目，您可以在ide的右侧看到可用的Gradle命令。</p><figure class="mq mr ms mt gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ne"><img src="../Images/61f8e1bbecfae0ac5734fa91a2724a1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gFwphYGipdtllpCGeE8gvA.png"/></div></div></figure><p id="bc71" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated"><strong class="kh jj">注意:</strong>本教程不需要IntelliJ。然而，IntelliJ与Gradle一起工作非常方便。</p><p id="e0d0" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated"><strong class="kh jj">文件夹结构:</strong></p><figure class="mq mr ms mt gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nf"><img src="../Images/6df3d5ad1374eefad3445a823ecf20b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jiO5Idm_1d4WbGpWCMHLRA.png"/></div></div></figure><p id="a79d" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">一旦项目初始化完成，您将看到<code class="fe ng nh ni mv b">settings.gradle.kts</code>和<code class="fe ng nh ni mv b">build.gradle.kts </code>文件。</p><h2 id="fc16" class="ld le ji bd lf lg lh dn li lj lk dp ll kq lm ln lo ku lp lq lr ky ls lt lu lv bi translated"><strong class="ak">第二步:创建App或CLI项目，添加Java插件</strong></h2><p id="69fa" class="pw-post-body-paragraph kf kg ji kh b ki ly kk kl km lz ko kp kq mn ks kt ku mo kw kx ky mp la lb lc im bi translated">在创建任何新项目之前，添加依赖项的存储库。它可以与其他模块单独完成。</p><pre class="mq mr ms mt gt mu mv mw mx aw my bi"><span id="cc54" class="ld le ji mv b gy mz na l nb nc">// build.gradle.kts<br/>allprojects <strong class="mv jj">{<br/>    </strong><em class="nj">repositories </em><strong class="mv jj">{<br/>        </strong>jcenter() <br/>    <strong class="mv jj">}<br/>}</strong></span></pre><p id="ef94" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">现在创建一个模块。</p><pre class="mq mr ms mt gt mu mv mw mx aw my bi"><span id="79d3" class="ld le ji mv b gy mz na l nb nc">mkdir cli-app &amp;&amp; cd cli-app<br/>gradle init</span></pre><figure class="mq mr ms mt gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nk"><img src="../Images/e71f0f3b23895caf057edd847eb1c27a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WCOsSEAKxCeoWtQxVOG_mw.png"/></div></div></figure><p id="f9b1" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">这里选择如下所述</p><ol class=""><li id="57bb" class="lw lx ji kh b ki kj km kn kq nl ku nm ky nn lc md me mf mg bi translated">项目类型申请[选项2]</li><li id="68f1" class="lw lx ji kh b ki mh km mi kq mj ku mk ky ml lc md me mf mg bi translated">语言为科特林语[选项4]</li><li id="7dc4" class="lw lx ji kh b ki mh km mi kq mj ku mk ky ml lc md me mf mg bi translated">DSL[选项2]</li><li id="ddbd" class="lw lx ji kh b ki mh km mi kq mj ku mk ky ml lc md me mf mg bi translated">休息默认[按回车键]</li></ol><p id="8512" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">一旦初始化完成:你将看到带有cli-app的目录。</p><figure class="mq mr ms mt gt iv gh gi paragraph-image"><div class="gh gi no"><img src="../Images/afc429103f948169b1a122de73558fcd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1348/format:webp/1*yLqcojw_-XYyYQ4jrs3DbA.png"/></div></figure><h1 id="5aaf" class="np le ji bd lf nq nr ns li nt nu nv ll nw nx ny lo nz oa ob lr oc od oe lu of bi translated">需要注意的事项:</h1><p id="4d31" class="pw-post-body-paragraph kf kg ji kh b ki ly kk kl km lz ko kp kq mn ks kt ku mo kw kx ky mp la lb lc im bi translated">在<code class="fe ng nh ni mv b">cli-app/build.gradle.kts</code>里面，你会看到<code class="fe ng nh ni mv b">kotlin.jvm</code>这个插件。可以将插件升级到最新的。<code class="fe ng nh ni mv b"> <strong class="kh jj">(While the time writing, kotlin.jvm was 1.3.70)</strong></code></p><pre class="mq mr ms mt gt mu mv mw mx aw my bi"><span id="19cb" class="ld le ji mv b gy mz na l nb nc">plugins <strong class="mv jj">{<br/>    </strong>id("org.jetbrains.kotlin.jvm").version("1.3.70")<br/>    <em class="nj">application<br/></em><strong class="mv jj">}</strong></span></pre><p id="2c07" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">另外需要注意的是:<code class="fe ng nh ni mv b"><em class="nj">mainClassName</em></code> <em class="nj">在应用配置中。如果您的类名不同，您可以更新确切的类名。</em></p><pre class="mq mr ms mt gt mu mv mw mx aw my bi"><span id="3572" class="ld le ji mv b gy mz na l nb nc"><em class="nj">application </em><strong class="mv jj">{<br/>    </strong>// Define the main class for the application<br/>    <em class="nj">mainClassName </em>= "cli.app.AppKt"<br/><strong class="mv jj">}</strong></span></pre><p id="409f" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">注意:你仍然不能运行这个项目。</p><h2 id="1b73" class="ld le ji bd lf lg lh dn li lj lk dp ll kq lm ln lo ku lp lq lr ky ls lt lu lv bi translated"><strong class="ak">第三步:将子模块配置到主项目</strong></h2><p id="0550" class="pw-post-body-paragraph kf kg ji kh b ki ly kk kl km lz ko kp kq mn ks kt ku mo kw kx ky mp la lb lc im bi translated">由于我们使用的是命令行，Gradle在默认情况下不会包含子模块。我们必须在根项目的<strong class="kh jj"><em class="nj">settings . gradle . kts</em></strong>中手动添加。</p><pre class="mq mr ms mt gt mu mv mw mx aw my bi"><span id="a681" class="ld le ji mv b gy mz na l nb nc"># kotlin-demos/settings.gradle.kts</span><span id="d3c7" class="ld le ji mv b gy og na l nb nc">include("cli-app")</span></pre><p id="18ea" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">验证一切工作，并测试运行应用程序。</p><p id="0a46" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated"><strong class="kh jj">运行:</strong> <code class="fe ng nh ni mv b">gradle cli-app:clean cli-app:run</code></p><pre class="mq mr ms mt gt mu mv mw mx aw my bi"><span id="5beb" class="ld le ji mv b gy mz na l nb nc"><strong class="mv jj"># output::</strong><br/>&gt; Task :cli-app:run<br/><strong class="mv jj">Hello world.</strong></span></pre><p id="55bd" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">设置更改完成后，您可以执行运行命令并在控制台中查看<code class="fe ng nh ni mv b">Hello World </code>。</p><h2 id="6661" class="ld le ji bd lf lg lh dn li lj lk dp ll kq lm ln lo ku lp lq lr ky ls lt lu lv bi translated"><strong class="ak">步骤4:作为独立CLI工具运行</strong></h2><p id="8149" class="pw-post-body-paragraph kf kg ji kh b ki ly kk kl km lz ko kp kq mn ks kt ku mo kw kx ky mp la lb lc im bi translated">你可以看到输出<em class="nj"> Hello World，</em>然而，如果没有Gradle，这个项目将无法独立运行。Gradle Java插件提供了从源代码生成<code class="fe ng nh ni mv b">.jar</code>的命令。</p><p id="54bc" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated"><strong class="kh jj">命令:</strong>T3】</p><p id="b35f" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated"><strong class="kh jj">跑:</strong> <code class="fe ng nh ni mv b">java -jar cli-app/build/libs/cli-app.jar</code></p><p id="2bb7" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated"><strong class="kh jj">说明:</strong>一旦运行<strong class="kh jj"> cli-app:jar </strong>命令，就可以在<code class="fe ng nh ni mv b">cli-app/build/libs</code>看到<strong class="kh jj"> cli-app.jar </strong>。当您试图运行jar文件时。您将得到一个错误。</p><blockquote class="oh oi oj"><p id="742c" class="kf kg nj kh b ki kj kk kl km kn ko kp ok kr ks kt ol kv kw kx om kz la lb lc im bi translated"><code class="fe ng nh ni mv b">no main manifest attribute, in cli-app/build/libs/cli-app.jar</code></p></blockquote><p id="f356" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">此错误是由于jar文件中缺少清单文件造成的。清单文件是指示java jar入口点的文件。它还有一些jar的其他元数据，比如包名是什么。它还包含其他库的其他类路径的条目。</p><h2 id="caa3" class="ld le ji bd lf lg lh dn li lj lk dp ll kq lm ln lo ku lp lq lr ky ls lt lu lv bi translated"><strong class="ak">第五步:添加</strong>构建jar任务，创建可执行的Jar</h2><p id="c6fd" class="pw-post-body-paragraph kf kg ji kh b ki ly kk kl km lz ko kp kq mn ks kt ku mo kw kx ky mp la lb lc im bi translated">默认情况下，Gradle Java plugin jar命令不知道jar文件的<strong class="kh jj">主类【入口类】</strong>。对于可执行的jar，您需要定义主类。你可以通过修改<strong class="kh jj"> build.gradle.kts </strong>来配置它</p><p id="0ac0" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">首先，让我们为了简化而修改<strong class="kh jj"> App.kt </strong></p><pre class="mq mr ms mt gt mu mv mw mx aw my bi"><span id="47e3" class="ld le ji mv b gy mz na l nb nc">// cli-app/src/main/kotlin/cli/app/App.kt</span><span id="1d80" class="ld le ji mv b gy og na l nb nc"><strong class="mv jj">object App {<br/>    const val appName = "DBS CLI App"<br/>    const val version = "0.0.1"<br/>}</strong><br/>fun main(args: Array&lt;String&gt;) {<br/>    <em class="nj">println</em>(<strong class="mv jj">"${App.appName}:: ${App.version}"</strong>)<br/>}</span></pre><p id="8adb" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">因为我们已经更新了应用程序代码。我们需要为它更新测试用例。</p><pre class="mq mr ms mt gt mu mv mw mx aw my bi"><span id="ed95" class="ld le ji mv b gy mz na l nb nc">// cli-app/src/main/kotlin/cli/app/App.kt</span><span id="f9a2" class="ld le ji mv b gy og na l nb nc">class AppTest {<br/>    @Test fun testAppHasAGreeting() {<br/>        <strong class="mv jj"><em class="nj">assertNotNull</em>(App.appName, "DBS CLI App")<br/>        <em class="nj">assertNotNull</em>(App.version, "0.0.1")</strong><br/>    }<br/>}</span></pre><p id="62d2" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">现在更新<strong class="kh jj"> build.gradle.kts </strong></p><pre class="mq mr ms mt gt mu mv mw mx aw my bi"><span id="b178" class="ld le ji mv b gy mz na l nb nc">// cli-app/build.gradle.kts</span><span id="569c" class="ld le ji mv b gy og na l nb nc">val jar by <em class="nj">tasks</em>.<em class="nj">getting</em>(Jar::class) <strong class="mv jj">{<br/>    </strong>manifest <strong class="mv jj">{<br/>        </strong><em class="nj">attributes</em>["Main-Class"] = "ktor.demo.AppKt"<br/>    <strong class="mv jj">}<br/>    </strong>from(<em class="nj">configurations</em>.<em class="nj">runtimeClasspath</em>.get().<em class="nj">map </em><strong class="mv jj">{ </strong>if (<strong class="mv jj">it</strong>.<em class="nj">isDirectory</em>) <strong class="mv jj">it </strong>else zipTree(<strong class="mv jj">it</strong>) <strong class="mv jj">}</strong>) <strong class="mv jj">{<br/>        </strong>exclude("META-INF/*.RSA", "META-INF/*.SF", "META-INF/*.DSA")<br/>    <strong class="mv jj">}<br/>}</strong></span></pre><p id="c6de" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated"><strong class="kh jj">构建Jar: </strong> <code class="fe ng nh ni mv b">gradle clean cli-app:jar</code></p><p id="35e9" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated"><strong class="kh jj">运行:</strong> <code class="fe ng nh ni mv b">java -jar cli-app/build/libs/cli-app.jar</code></p><p id="cd92" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">现在您可以使用<strong class="kh jj"> java -jar </strong>命令运行CLI</p><p id="da4e" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated"><strong class="kh jj">输出:</strong> <code class="fe ng nh ni mv b">DBS CLI App:: 0.0.1</code></p><h2 id="2fd4" class="ld le ji bd lf lg lh dn li lj lk dp ll kq lm ln lo ku lp lq lr ky ls lt lu lv bi translated">Tada！！您的CLI无需任何外部工具即可运行。</h2></div><div class="ab cl on oo hx op" role="separator"><span class="oq bw bk or os ot"/><span class="oq bw bk or os ot"/><span class="oq bw bk or os"/></div><div class="im in io ip iq"><p id="9d7a" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">现在，您的初始CLI工具正在工作。让我们添加Kotlin核心库来接受用户的输入。</p><h2 id="593e" class="ld le ji bd lf lg lh dn li lj lk dp ll kq lm ln lo ku lp lq lr ky ls lt lu lv bi translated">第6步:使用<a class="ae mm" href="https://github.com/Kotlin/kotlinx.cli" rel="noopener ugc nofollow" target="_blank"> kotlinx-cli </a>添加支持用户输入</h2><p id="a623" class="pw-post-body-paragraph kf kg ji kh b ki ly kk kl km lz ko kp kq mn ks kt ku mo kw kx ky mp la lb lc im bi translated">是一个帮助解析用户输入并以优雅的方式添加验证的库。<code class="fe ng nh ni mv b">kotlinx-cli</code>最近发布了稳定版。开发仍在进行中，然而好到足以使用它。</p><pre class="mq mr ms mt gt mu mv mw mx aw my bi"><span id="4de4" class="ld le ji mv b gy mz na l nb nc">// cli-app/build.gradle.kts</span><span id="55b2" class="ld le ji mv b gy og na l nb nc"><em class="nj">repositories </em><strong class="mv jj">{<br/>    </strong>jcenter()<br/>    <strong class="mv jj"><em class="nj">maven</em>("https://dl.bintray.com/kotlin/kotlinx/")</strong><br/><strong class="mv jj">}<br/><br/></strong><em class="nj">dependencies </em><strong class="mv jj">{<br/>    </strong>// Use the Kotlin JDK 8 standard library.<br/>    <em class="nj">implementation</em>("org.jetbrains.kotlin:kotlin-stdlib-jdk8")<br/>    <strong class="mv jj"><em class="nj">compile</em>("org.jetbrains.kotlinx", "kotlinx-cli", "0.2")</strong></span><span id="4eeb" class="ld le ji mv b gy og na l nb nc">... rest<br/>}</span></pre><p id="6551" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated"><strong class="kh jj">打造:</strong>T2】</p><p id="7f54" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">更新应用程序以接受用户输入并添加<code class="fe ng nh ni mv b">--help</code>命令。</p><pre class="mq mr ms mt gt mu mv mw mx aw my bi"><span id="85e1" class="ld le ji mv b gy mz na l nb nc">import kotlinx.cli.*<br/>fun main(args: Array&lt;String&gt;) {<br/>    <strong class="mv jj">val parser = ArgParser("${App.appName}:: ${App.version}")<br/>    val version by parser.option(ArgType.Boolean, shortName = "V", description = "Version").default(false)<br/><br/>    // Add all input to parser<br/>    parser.parse(args)<br/><br/>    if(version) <em class="nj">println</em>(App.version)</strong><br/>}<br/>object App {<br/>    const val appName = "DBS CLI App"<br/>    const val version = "0.0.1"<br/>}</span></pre><p id="00ba" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated"><strong class="kh jj">注意:</strong> <code class="fe ng nh ni mv b">Kotlinx-cli</code>默认添加帮助命令。要查看所有API，您可以查看<code class="fe ng nh ni mv b"><a class="ae mm" href="https://github.com/Kotlin/kotlinx.cli" rel="noopener ugc nofollow" target="_blank">kotlinx.cli</a></code></p><h2 id="e5f4" class="ld le ji bd lf lg lh dn li lj lk dp ll kq lm ln lo ku lp lq lr ky ls lt lu lv bi translated"><strong class="ak">构建并运行:</strong></h2><figure class="mq mr ms mt gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ca"><img src="../Images/90f983a68189c901002255bfc780c3c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wI14byHZxt6B55OSwTvzoA.png"/></div></div></figure><p id="be46" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">是啊！！你做到了。现在您有了一个工作的可执行jar。我们可以清理我们的CLI工具。因为用户很难记住所有这些java命令。让我们制作一个可执行的bash文件。</p><h2 id="6473" class="ld le ji bd lf lg lh dn li lj lk dp ll kq lm ln lo ku lp lq lr ky ls lt lu lv bi translated"><strong class="ak">步骤7:为分发文件创建Bash</strong></h2><p id="884a" class="pw-post-body-paragraph kf kg ji kh b ki ly kk kl km lz ko kp kq mn ks kt ku mo kw kx ky mp la lb lc im bi translated">创建一个bash文件<code class="fe ng nh ni mv b">scripts/dbs-cli</code>并赋予执行权限。</p><pre class="mq mr ms mt gt mu mv mw mx aw my bi"><span id="8b51" class="ld le ji mv b gy mz na l nb nc">mkdir scripts &amp;&amp; touch scripts/dbs-cli &amp;&amp; chmod +x scripts/dbs-cli</span><span id="e40d" class="ld le ji mv b gy og na l nb nc">// scripts/dbs-cli<br/>## Add command in scripts/dbs-cli</span><span id="2a38" class="ld le ji mv b gy og na l nb nc">#/usr/bin<br/>java -jar lib/cli-app.jar $@</span></pre><p id="c21d" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">在根目录<code class="fe ng nh ni mv b">build.gradle.kts</code>中创建一个包(zip)任务。这将把所有需要的文件移动到<code class="fe ng nh ni mv b">dist</code>文件夹。</p><pre class="mq mr ms mt gt mu mv mw mx aw my bi"><span id="7fd2" class="ld le ji mv b gy mz na l nb nc">// kotlin-demos/build.gradle.kts</span><span id="4030" class="ld le ji mv b gy og na l nb nc">subprojects <strong class="mv jj">{<br/>    </strong><em class="nj">tasks</em>.<em class="nj">register</em>&lt;Copy&gt;("packageDistribution") <strong class="mv jj">{<br/>        </strong>dependsOn("jar")<br/>        from("${<em class="nj">project</em>.<em class="nj">rootDir</em>}/scripts/dbs-cli")<br/>        from("${<em class="nj">project</em>.<em class="nj">projectDir</em>}/build/libs/${<em class="nj">project</em>.<em class="nj">name</em>}.jar") <strong class="mv jj">{<br/>            </strong>into("lib")<br/>        <strong class="mv jj">}<br/>        </strong>into("${<em class="nj">project</em>.<em class="nj">rootDir</em>}/dist")<br/>    <strong class="mv jj">}<br/>}</strong></span></pre><p id="0cc6" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">现在我们可以运行定制的Gradle任务来构建jar并转移到dist。</p><p id="30cd" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated"><strong class="kh jj">构建:</strong>T9】</p><p id="fb03" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated"><strong class="kh jj">运行:</strong>T10】</p><p id="af7f" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">运行上述命令后，您可以看到CLI工具帮助菜单。</p><figure class="mq mr ms mt gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ou"><img src="../Images/fbadddddafdbeed9e5b9fbd2704e8a0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qWClyl0h1moUodQjspuJ9w.png"/></div></div></figure><p id="3009" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated"><strong class="kh jj">感谢支持！！干杯！！</strong>🙏👍🏻🥂</p><p id="7a99" class="pw-post-body-paragraph kf kg ji kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">所有的源代码都可以在我的GitHub上找到</p><div class="is it gp gr iu ov"><a href="https://github.com/deepakshrma/kotlin-demos" rel="noopener  ugc nofollow" target="_blank"><div class="ow ab fo"><div class="ox ab oy cl cj oz"><h2 class="bd jj gy z fp pa fr fs pb fu fw jh bi translated">deepakshrma/kotlin-demos</h2><div class="pc l"><h3 class="bd b gy z fp pa fr fs pb fu fw dk translated">在GitHub上创建一个帐户，为deepakshrma/kotlin-demos的开发做出贡献。</h3></div><div class="pd l"><p class="bd b dl z fp pa fr fs pb fu fw dk translated">github.com</p></div></div><div class="pe l"><div class="pf l pg ph pi pe pj ja ov"/></div></div></a></div></div></div>    
</body>
</html>