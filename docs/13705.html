<html>
<head>
<title>Building a movies search app using Elasticsearch, Nodejs, Reactjs and IMDb API: [Part 2] Initiating the Node server and Planning for data storage</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ä½¿ç”¨Elasticsearchã€Nodejsã€Reactjså’ŒIMDb APIæ„å»ºç”µå½±æœç´¢åº”ç”¨ç¨‹åº:[ç¬¬2éƒ¨åˆ†]å¯åŠ¨èŠ‚ç‚¹æœåŠ¡å™¨å¹¶è§„åˆ’æ•°æ®å­˜å‚¨</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://levelup.gitconnected.com/building-a-movies-search-app-using-elasticsearch-nodejs-reactjs-and-imdb-api-part-2-initiating-394796e4ecbc?source=collection_archive---------10-----------------------#2022-09-28">https://levelup.gitconnected.com/building-a-movies-search-app-using-elasticsearch-nodejs-reactjs-and-imdb-api-part-2-initiating-394796e4ecbc?source=collection_archive---------10-----------------------#2022-09-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/26a1ca9296b83c659db0e6779f8114a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UKcpy_AQVd4HmC7J0GRGfA.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">ç…§ç‰‡ç”±<a class="ae kc" href="https://unsplash.com/@lautaroandreani?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">åŠ³å¡”ç½—Â·å®‰å¾·çƒˆäºšå°¼</a>åœ¨<a class="ae kc" href="https://unsplash.com/s/photos/full-stack?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>ä¸Šæ‹æ‘„</figcaption></figure><p id="8b3b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æ¬¢è¿å›åˆ°æœ¬ç³»åˆ—çš„å‰©ä½™éƒ¨åˆ†ï¼Œä½¿ç”¨NodejsæœåŠ¡å™¨ã€Reactjså®¢æˆ·ç«¯å’ŒElasticsearchä»IMDb APIåˆ¶ä½œä¸€ä¸ªå®Œæ•´çš„ç”µå½±æœç´¢åº”ç”¨ç¨‹åºã€‚æˆ‘ä»¬ä»Šå¤©ç»§ç»­æˆ‘ä»¬çš„åç«¯é…ç½®çš„å†’é™©ã€‚</p><p id="f2e2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨Dockerå®¹å™¨è®¾ç½®äº†ä¸€ä¸ªå®‰å…¨çš„Elasticsearchå’ŒKibanaéƒ¨ç½²ï¼Œå¹¶å°†<code class="fe lb lc ld le b">ca.crt</code>æ–‡ä»¶å¤åˆ¶åˆ°äº†<code class="fe lb lc ld le b">backend &gt; certs</code>æ–‡ä»¶å¤¹ä¸­ã€‚å›æƒ³ä¸€ä¸‹ï¼Œæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºçš„æ¶æ„å¦‚ä¸‹:</p><figure class="lg lh li lj gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lf"><img src="../Images/afcb9442e8f553a7e0acb36b34c102f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0ii1KBHGnrdtJPSp9-gZXw.png"/></div></div></figure><h2 id="c576" class="lk ll iq bd lm ln lo dn lp lq lr dp ls ko lt lu lv ks lw lx ly kw lz ma mb mc bi translated">è®¾ç½®Node.jsæœåŠ¡å™¨</h2><p id="7c68" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹(åç«¯)ä¸­æ‰“å¼€ä¸€ä¸ªç»ˆç«¯ï¼Œè¿è¡Œä¸‹é¢çš„å‘½ä»¤æ¥åˆå§‹åŒ–Nodejsé¡¹ç›®ã€‚å¡«å†™æ‚¨è®¤ä¸ºåˆé€‚çš„å­—æ®µã€‚</p><pre class="lg lh li lj gt mi le mj mk aw ml bi"><span id="7161" class="lk ll iq le b gy mm mn l mo mp">npm init</span></pre><p id="cec0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æ¥ä¸‹æ¥ï¼Œè¿è¡Œä¸‹é¢çš„å‘½ä»¤æ¥å®‰è£…æˆ‘ä»¬éœ€è¦çš„ä¾èµ–é¡¹ã€‚</p><pre class="lg lh li lj gt mi le mj mk aw ml bi"><span id="d4db" class="lk ll iq le b gy mm mn l mo mp">yarn add @elastic/elasticsearch axios cors dotenv express</span></pre><p id="2a77" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æˆ‘ä»¬è¿˜å°†æ·»åŠ <strong class="kf ir"> nodemon </strong>ä½œä¸ºå¼€å‘ä¾èµ–é¡¹:</p><pre class="lg lh li lj gt mi le mj mk aw ml bi"><span id="5426" class="lk ll iq le b gy mm mn l mo mp">yarn add nodemon -D</span></pre><p id="62ff" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ç°åœ¨å·²ç»å®‰è£…äº†ä¾èµ–é¡¹ï¼Œåœ¨é¡¹ç›®çš„æ ¹ç›®å½•(åç«¯æ–‡ä»¶å¤¹)åˆ›å»ºä¸€ä¸ª<code class="fe lb lc ld le b">src</code>æ–‡ä»¶å¤¹ï¼Œå¹¶åœ¨é‚£é‡Œåˆ›å»º<code class="fe lb lc ld le b">index.js</code>æ–‡ä»¶ã€‚ç°åœ¨ç¼–è¾‘<code class="fe lb lc ld le b">package.json</code>ä¸­çš„â€œ<strong class="kf ir">mainâ€</strong>å­—æ®µå’Œâ€œ<strong class="kf ir"> scripts </strong>â€éƒ¨åˆ†ï¼Œå¦‚ä¸‹æ‰€ç¤º:</p><pre class="lg lh li lj gt mi le mj mk aw ml bi"><span id="c46a" class="lk ll iq le b gy mm mn l mo mp">{<br/>...<br/>  "main": "index.js",  <br/>  "scripts": {    <br/>    "start": "node src/index.js",    <br/>    "dev": "nodemon src/index.js",<br/>  }<br/>...<br/>}</span></pre><p id="9c80" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">åœ¨ç»§ç»­ä¹‹å‰ï¼Œç°åœ¨æœåŠ¡å™¨å·²ç»å·®ä¸å¤šå¯åŠ¨äº†ï¼Œæˆ‘ä»¬åº”è¯¥çœ‹çœ‹æˆ‘ä»¬çš„APIã€‚</p><h2 id="e82e" class="lk ll iq bd lm ln lo dn lp lq lr dp ls ko lt lu lv ks lw lx ly kw lz ma mb mc bi translated">æ•°æ®å­˜å‚¨è®¡åˆ’</h2><p id="df5a" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">ç‚¹å‡»<a class="ae kc" href="https://imdb-api.com/Identity/Account/Register" rel="noopener ugc nofollow" target="_blank">æ­¤é“¾æ¥</a>ååˆ›å»ºè´¦æˆ·ã€‚ä¸€æ—¦æ‚¨çš„å¸æˆ·è¢«æ¿€æ´»ï¼Œæ‚¨å°†æ‹¥æœ‰ä¸€ä¸ª<strong class="kf ir"> API_KEY </strong>ä¾›æ‚¨ä½¿ç”¨ã€‚åœ¨æ–‡æ¡£ä¸­ï¼Œæ‚¨å¯ä»¥æŸ¥è¯¢ä¸åŒçš„URLæ¥æ£€ç´¢ç”µå½±ã€ç”µè§†èŠ‚ç›®ã€è°ƒæ•´å›¾åƒå¤§å°â€¦â€¦æˆ‘ä»¬åœ¨è¿™é‡Œæ„Ÿå…´è¶£çš„æ˜¯<em class="mq">in thiaters</em>URLï¼Œå› ä¸ºå®ƒå…è®¸æˆ‘ä»¬æ£€ç´¢ä¸€ç»„ç”µå½±ï¼Œå…¶ä¸­åŒ…å«ä¸€äº›ä¿¡æ¯ï¼Œå¦‚æ¼”å‘˜é˜µå®¹ã€å®˜æ–¹æµ·æŠ¥ä»¥åŠIMDbè¯„åˆ†ã€‚æ–‡æ¡£çš„ç»“æ„å¦‚ä¸‹æ‰€ç¤º:</p><pre class="lg lh li lj gt mi le mj mk aw ml bi"><span id="91ae" class="lk ll iq le b gy mm mn l mo mp">{<br/>  "id":"tt10731256",<br/>  "title":"Don't Worry Darling (I) (2022)",<br/>  "fullTitle":"Don't Worry Darling (I) (2022)",<br/>  "year":"I) (",<br/>  "releaseState":"23 Sep 2022",<br/>  "image":"https://m.media-amazon.com/images/M/MV5BMzFkMWUzM2ItZWFjMi00NDY0LTk2MDMtZDhkMDE2MjRlYmZlXkEyXkFqcGdeQXVyNTAzNzgwNTg@._V1_UX128_CR0,12,128,176_AL_.jpg",<br/>  "runtimeMins":"123",<br/>  "runtimeStr":"123 mins",<br/>  "plot":"A 1950s housewife living with her husband in a utopian experimental community begins to worry that his glamorous company could be hiding disturbing secrets.",<br/>  "contentRating":"R",<br/>  "imDbRating":"6.3",<br/>  "imDbRatingCount":"15059",<br/>  "metacriticRating":"48",<br/>  "genres":"Drama, Mystery, Thriller",<br/>  "genreList":[<br/>    {"key":"Drama","value":"Drama"},<br/>    {"key":"Mystery","value":"Mystery"},<br/>    {"key":"Thriller","value":"Thriller"}<br/>  ],<br/>  "directors":"Olivia Wilde",<br/>  "directorList":[<br/>    {"id":"nm1312575","name":"Olivia Wilde"}<br/>  ],<br/>  "stars":"Florence Pugh, Harry Styles, Chris Pine, Olivia Wilde",<br/>  "starList":[<br/>    {"id":"nm6073955","name":"Florence Pugh"},<br/>    {"id":"nm4089170","name":"Harry Styles"},<br/>    {"id":"nm1517976","name":"Chris Pine"},<br/>    {"id":"nm1312575","name":"Olivia Wilde"}<br/>  ]<br/>}</span></pre><p id="50c9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">åœ¨æ£€ç´¢å’Œç´¢å¼•æ•°æ®ä¹‹å‰ï¼Œæœ€å¥½å…ˆäº†è§£æ–‡æ¡£çš„ç»“æ„ï¼Œä»¥ä¾¿æ›´å¥½åœ°å¤„ç†å®ƒä»¬ã€‚æ‚¨å°†ä¼šç†è§£ï¼Œå¯¹äºæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºï¼Œæˆ‘ä»¬ä¸éœ€è¦æ‰€æœ‰è¿™äº›å­—æ®µã€‚<br/>æˆ‘ä»¬å°†é¦–å…ˆå®šä¹‰ä¸€ä¸ªæ¥æ”¶ç®¡é“ï¼Œä»¥ä¾¿åªä¿ç•™å¿…è¦çš„å­—æ®µï¼Œå¹¶ä»¥æ»¡è¶³æˆ‘ä»¬éœ€æ±‚çš„æ–¹å¼è½¬æ¢æ•°æ®ã€‚</p><h2 id="c164" class="lk ll iq bd lm ln lo dn lp lq lr dp ls ko lt lu lv ks lw lx ly kw lz ma mb mc bi translated">é…ç½®æˆ‘ä»¬çš„æ‘„å–ç®¡é“</h2><p id="b8fa" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">ç¡®ä¿Elasticsearchå’ŒKibanaæ­£åœ¨è¿è¡Œï¼Œè½¬åˆ°<code class="fe lb lc ld le b">DevTools &gt; Console</code>éƒ¨åˆ†ï¼Œè¿è¡Œä¸‹é¢çš„å‘½ä»¤æ¥åˆ›å»ºåä¸º<strong class="kf ir"> movies_pipeline </strong>çš„ç®¡é“ï¼Œæˆ‘ä»¬å°†åœ¨ä¿å­˜æ•°æ®ä¹‹å‰åº”ç”¨è¯¥ç®¡é“ã€‚</p><pre class="lg lh li lj gt mi le mj mk aw ml bi"><span id="578a" class="lk ll iq le b gy mm mn l mo mp">PUT _ingest/pipeline/movies_pipeline<br/>{<br/>  "processors": [<br/>        {<br/>            "remove": {<br/>                "field": [<br/>                    "id",<br/>                    "title",<br/>                    "year",<br/>                    "releaseState",<br/>                    "metacriticRating",<br/>                    "genreList",<br/>                    "directorList",<br/>                    "starList",<br/>                    "runtimeStr"<br/>                ],<br/>                "ignore_missing": true<br/>            }<br/>        },<br/>        {<br/>            "rename": {<br/>                "field": "fullTitle",<br/>                "target_field": "title"<br/>            }<br/>        },<br/>        {<br/>            "split": {<br/>                "field": "genres",<br/>                "separator": ",",<br/>                "ignore_missing": true<br/>            }<br/>        }<br/>    ]<br/>}</span></pre><p id="4707" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ä½ å½“ç„¶å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚å®šåˆ¶è¿™ä¸ªç®¡é“ã€‚æ­¤å¤–ï¼Œæ‚¨è¿˜å¯ä»¥é€šè¿‡è½¬åˆ°é¡µé¢<code class="fe lb lc ld le b">Stack Management &gt; Ingest Pipeline</code>ä½¿ç”¨å›¾å½¢ç•Œé¢æ¥åˆ›å»ºç®¡é“ã€‚</p><h2 id="1a59" class="lk ll iq bd lm ln lo dn lp lq lr dp ls ko lt lu lv ks lw lx ly kw lz ma mb mc bi translated">ç”Ÿæˆç´¢å¼•çš„æ˜ å°„</h2><p id="3ab9" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">æ­¤å¤–ï¼Œä¸ºäº†è®©Elasticsearchåœ¨æ•°æ®æœç´¢æ–¹é¢æœ‰æ›´å¥½çš„è¡¨ç°ï¼Œæ˜æ™ºçš„åšæ³•æ˜¯ä¸ºæˆ‘ä»¬è‡ªå·±å®šä¹‰æœªæ¥<strong class="kf ir">ç”µå½±</strong>ç´¢å¼•çš„æ¨¡å¼ã€‚ä¸ºæ­¤ï¼Œä»ç„¶åœ¨æ§åˆ¶å°é€‰é¡¹å¡ä¸­ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤:</p><pre class="lg lh li lj gt mi le mj mk aw ml bi"><span id="0ffe" class="lk ll iq le b gy mm mn l mo mp">PUT movies<br/>{<br/>    "mappings": {<br/>    "properties": {<br/>        "contentRating": {<br/>            "type": "text",<br/>            "fields": {<br/>                "keyword": {<br/>                    "type": "keyword",<br/>                    "ignore_above": 256<br/>                }<br/>            }<br/>        },<br/>        "directors": {<br/>            "type": "text",<br/>            "fields": {<br/>                "keyword": {<br/>                    "type": "keyword",<br/>                    "ignore_above": 256<br/>                }<br/>            }<br/>        },<br/>        "genres": {<br/>            "type": "keyword"<br/>        },<br/>        "imDbRating": {<br/>            "type": "float"<br/>        },<br/>        "imDbRatingCount": {<br/>            "type": "integer"<br/>        },<br/>        "image": {<br/>            "type": "text",<br/>            "fields": {<br/>                "keyword": {<br/>                    "type": "keyword"<br/>                }<br/>            }<br/>        },<br/>        "plot": {<br/>            "type": "text"<br/>        },<br/>        "runtimeMins": {<br/>            "type": "integer"<br/>        },<br/>        "stars": {<br/>            "type": "text",<br/>                "fields": {<br/>                    "keyword": {<br/>                        "type": "keyword"<br/>                    }<br/>            }<br/>        },<br/>        "title": {<br/>            "type": "text",<br/>            "fields": {<br/>                "keyword": {<br/>                    "type": "keyword",<br/>                    "ignore_above": 256<br/>                }<br/>            }<br/>        }<br/>    }<br/>}</span></pre><p id="52b6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æ‚¨ä¼šæ³¨æ„åˆ°æˆ‘ä»¬å†³å®šä¸ºåº”ç”¨ç¨‹åºä¿ç•™çš„æ‰€æœ‰å­—æ®µåŠå…¶ç±»å‹ã€‚</p><p id="f84d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">è¿™éƒ¨åˆ†åˆ°æ­¤ä¸ºæ­¢ã€‚æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹é“¾æ¥è®¿é—®åŒ…å«è¯¥åº”ç”¨ç¨‹åºçš„GitHub repo:</p><div class="mr ms gp gr mt mu"><a href="https://github.com/AbdoulBaguiM/movies-search" rel="noopener  ugc nofollow" target="_blank"><div class="mv ab fo"><div class="mw ab mx cl cj my"><h2 class="bd ir gy z fp mz fr fs na fu fw ip bi translated">GitHub-AbdoulBaguiM/movies-search:ç”¨Reactjsã€Nodejså’Œâ€¦</h2><div class="nb l"><h3 class="bd b gy z fp mz fr fs na fu fw dk translated">è¿™æ˜¯ä¸€ä¸ªç”µå½±æœç´¢åº”ç”¨ç¨‹åºï¼Œå®ƒå°†IMDB APIä¸­çš„æ•°æ®ç´¢å¼•åˆ°ä½¿ç”¨â€¦</h3></div><div class="nc l"><p class="bd b dl z fp mz fr fs na fu fw dk translated">github.com</p></div></div><div class="nd l"><div class="ne l nf ng nh nd ni jw mu"/></div></div></a></div><p id="fcdc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æ„Ÿè°¢æ‚¨çš„é˜…è¯»ï¼Œå¦‚æœæ‚¨å¯¹æœ¬æ–‡æœ‰ä»»ä½•é—®é¢˜æˆ–è¯„è®ºï¼Œè¯·åœ¨ä¸‹é¢ç•™ä¸‹æ‚¨çš„è¯„è®ºã€‚</p><p id="b51a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">å®Œæˆæˆ‘ä»¬åç«¯é…ç½®çš„ä¸‹ä¸€éƒ¨åˆ†å³å°†åˆ°æ¥ï¼Œæ•¬è¯·å…³æ³¨ğŸš€ã€‚</p><p id="45f7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">é˜¿åœæœå°”-å·´å‰</p></div></div>    
</body>
</html>