<html>
<head>
<title>Expandable Text View Using Kotlin and Android Studio</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Kotlin和Android Studio的可扩展文本视图</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/expandable-text-view-using-kotlin-and-android-studio-2b70ff04c0e9?source=collection_archive---------2-----------------------#2020-01-05">https://levelup.gitconnected.com/expandable-text-view-using-kotlin-and-android-studio-2b70ff04c0e9?source=collection_archive---------2-----------------------#2020-01-05</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="ccaf" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这个详细的指南将教你实现一个可扩展的文本视图</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/2b46b50dea5835d44eff8a0c0a7131e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eU1avk_dpOQbfBIzM664JA.png"/></div></div></figure><p id="36ea" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">可扩展文本视图是一个android库，允许用户创建可以扩展和折叠的文本视图来阅读文本描述。我敢打赌，你们在很多android应用程序中都见过这个，但可能不知道它的名字和用途。</p><p id="cf00" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">下面是Play store上Instagram应用的截图。“<strong class="js iu"> <em class="la">开发商联系人</em> </strong>”有一个微小的下拉框样符号。在展开时，我们可以进一步阅读开发人员的所有联系选项，这些信息也可以通过单击选项来折叠。这个特性节省了大量的空间，而不是将大量的信息排列起来，占据整个页面。我们可以使用这种策略来优化间距。在本教程中，我们将构建一个类似的可扩展文本视图，它将具有相同的外观和功能。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi lb"><img src="../Images/c8bd8b536e5035f848c6d10c73fb4e9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P2w_P4wdrf8a6ikn6Wzf2A.png"/></div></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">Play store上Instagram应用程序的屏幕截图</figcaption></figure><p id="c61a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">让我们开始吧。在Android Studio上创建一个新项目。</strong></p><h2 id="2f0e" class="lg lh it bd li lj lk dn ll lm ln dp lo kb lp lq lr kf ls lt lu kj lv lw lx ly bi translated">1.将外部库添加到Android Studio</h2><p id="cb2b" class="pw-post-body-paragraph jq jr it js b jt lz jv jw jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn im bi translated">如前所述，“<strong class="js iu"> <em class="la">可扩展文本视图</em> </strong>”是一个外部库，我们需要用它来手动导入。该库可从<a class="ae me" href="https://github.com/Manabu-GT/ExpandableTextView" rel="noopener ugc nofollow" target="_blank"> <strong class="js iu"> <em class="la"> GitHub资源库</em> </strong> </a> <em class="la">、</em> <strong class="js iu"> <em class="la"> </em> </strong>获得，更多关于该库的详细信息，请参考下面的链接。</p><div class="mf mg gp gr mh mi"><a href="https://github.com/Manabu-GT/ExpandableTextView" rel="noopener  ugc nofollow" target="_blank"><div class="mj ab fo"><div class="mk ab ml cl cj mm"><h2 class="bd iu gy z fp mn fr fs mo fu fw is bi translated">相叶マナブ-GT/ExpandableTextView</h2><div class="mp l"><h3 class="bd b gy z fp mn fr fs mo fu fw dk translated">ExpandableTextView是一个Android库，允许开发人员轻松创建一个可以展开/折叠的文本视图…</h3></div><div class="mq l"><p class="bd b dl z fp mn fr fs mo fu fw dk translated">github.com</p></div></div><div class="mr l"><div class="ms l mt mu mv mr mw ky mi"/></div></div></a></div><p id="811f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">有很多方法可以给Android Studio添加一个外部库。最简单的方法之一就是直接在<strong class="js iu"> <em class="la"> build.gradle </em> </strong>文件里面添加(复制粘贴)库。将下面的代码添加到build.gradle文件中。</p><pre class="kp kq kr ks gt mx my mz na aw nb bi"><span id="ccca" class="lg lh it my b gy nc nd l ne nf">implementation <strong class="my iu">'com.ms-square:expandableTextView:0.1.4'</strong></span></pre><p id="fd7f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">build.gradle文件可以在“<strong class="js iu"> <em class="la"> app </em> </strong>下找到，然后在<strong class="js iu"> <em class="la"> Gradle脚本→ build.gradle(模块:app)下找到。</em> </strong>确保将上述代码粘贴到<strong class="js iu"> <em class="la">依赖</em> </strong>函数中。按照下面的截图，以获得更好的图片。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ng"><img src="../Images/002003852a37f27000778b06fd24fde5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OmS1jWRO_Y3kw42S9sUEMQ.png"/></div></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">将上面的代码粘贴到build.gradle文件中</figcaption></figure></div><div class="ab cl nh ni hx nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="im in io ip iq"><h2 id="23f0" class="lg lh it bd li lj lk dn ll lm ln dp lo kb lp lq lr kf ls lt lu kj lv lw lx ly bi translated">2.将属性添加到我们的布局文件(activity_main.xml)</h2><p id="67f5" class="pw-post-body-paragraph jq jr it js b jt lz jv jw jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn im bi translated">我们应该在布局文件中添加的属性有<strong class="js iu"> <em class="la">可扩展文本视图</em> </strong>、<strong class="js iu"> <em class="la">文本视图</em> </strong>和<strong class="js iu"> <em class="la">图像视图</em> </strong>。</p><blockquote class="no np nq"><p id="395d" class="jq jr la js b jt ju jv jw jx jy jz ka nr kc kd ke ns kg kh ki nt kk kl km kn im bi translated"><strong class="js iu">注意</strong>:需要注意的重要一点是，TextView和ImageButton的视图Id必须分别设置为“<strong class="js iu">、@id/expandable_text </strong>和“<strong class="js iu">、@id/expand_collapse </strong>”，这个库才能工作。</p></blockquote><p id="b7a0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我使用相对布局来放置所有的属性。代码非常简单明了。我们可以通过改变<code class="fe nu nv nw my b">animDuration</code>的值来改变展开和折叠的动画速度</p><pre class="kp kq kr ks gt mx my mz na aw nb bi"><span id="ab12" class="lg lh it my b gy nc nd l ne nf"><em class="la">&lt;?</em><strong class="my iu">xml version="1.0" encoding="utf-8"</strong><em class="la">?&gt;<br/></em>&lt;<strong class="my iu">RelativeLayout<br/>    xmlns:android="http://schemas.android.com/apk/res/android"<br/>    xmlns:tools="http://schemas.android.com/tools"<br/>    android:layout_width="match_parent"<br/>    android:layout_height="match_parent"<br/>    tools:context=".MainActivity"</strong>&gt;</span><span id="9b2e" class="lg lh it my b gy nx nd l ne nf"><em class="la">&lt;!-- This is just for the name of the project --&gt;<br/>    </em>&lt;<strong class="my iu">TextView<br/>        android:layout_width="match_parent"<br/>        android:layout_height="wrap_content"<br/>        android:id="@+id/textView"<br/>        android:text="Expandable Text View"<br/>        android:gravity="center"<br/>        android:textSize="25dp"<br/>        android:textStyle="bold"<br/>        android:layout_marginTop="20dp"</strong>/&gt;<br/><br/>    <em class="la">&lt;!-- This is the actual mandatory library attributes that must be used --&gt;<br/>    </em>&lt;<strong class="my iu">com.ms.square.android.expandabletextview.ExpandableTextView<br/>        xmlns:android="http://schemas.android.com/apk/res/android"<br/>        xmlns:expandableTextView="http://schemas.android.com/apk/res-auto"<br/>        android:id="@+id/expand_text_view"<br/>        android:layout_width="match_parent"<br/>        android:layout_below="@id/textView"<br/>        android:layout_height="wrap_content"<br/>        android:layout_marginTop="10dp"<br/>        expandableTextView:maxCollapsedLines="4"<br/>        expandableTextView:animDuration="200"</strong>&gt;<br/><br/>        &lt;<strong class="my iu">TextView<br/>            android:id="@id/expandable_text"<br/>            android:layout_width="match_parent"<br/>            android:layout_height="wrap_content"<br/>            android:layout_marginLeft="10dp"<br/>            android:layout_marginRight="10dp"<br/>            android:textSize="16sp"<br/>            android:textColor="#666666" </strong>/&gt;<br/><br/>        &lt;<strong class="my iu">ImageButton<br/>            android:id="@id/expand_collapse"<br/>            android:layout_width="wrap_content"<br/>            android:layout_height="wrap_content"<br/>            android:padding="16dp"<br/>            android:layout_gravity="right|bottom"<br/>            android:background="@android:color/transparent"</strong>/&gt;<br/><br/>    &lt;/<strong class="my iu">com.ms.square.android.expandabletextview.ExpandableTextView</strong>&gt;<br/><br/>&lt;/<strong class="my iu">RelativeLayout</strong>&gt;</span></pre><p id="43f4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这里的图像视图用于显示小可爱下拉按钮(展开和折叠按钮)。有关库使用的更多详细信息，请单击下面的链接:</p><div class="mf mg gp gr mh mi"><a href="https://github.com/Manabu-GT/ExpandableTextView#usage" rel="noopener  ugc nofollow" target="_blank"><div class="mj ab fo"><div class="mk ab ml cl cj mm"><h2 class="bd iu gy z fp mn fr fs mo fu fw is bi translated">相叶マナブ-GT/ExpandableTextView</h2><div class="mp l"><h3 class="bd b gy z fp mn fr fs mo fu fw dk translated">ExpandableTextView是一个Android库，允许开发人员轻松创建一个可以展开/折叠的文本视图…</h3></div><div class="mq l"><p class="bd b dl z fp mn fr fs mo fu fw dk translated">github.com</p></div></div><div class="mr l"><div class="ny l mt mu mv mr mw ky mi"/></div></div></a></div><p id="9dca" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">此外，您可以在折叠过程中更改行数，这可以通过更改<code class="fe nu nv nw my b">expanbableTextView:maxCollapsedLines="4"</code>的值来实现。您可以根据自己的喜好将其更改为3、4、5或其他数字(无负数)。下面是值3和5之间的差异(显示3行和5行)。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/c5d2f32d088666d8f9b854b043e60141.png" data-original-src="https://miro.medium.com/v2/resize:fit:1088/format:webp/1*BAZwS6FX9LlMHO-CCIc0NQ.png"/></div></figure></div><div class="ab cl nh ni hx nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="im in io ip iq"><h2 id="33ff" class="lg lh it bd li lj lk dn ll lm ln dp lo kb lp lq lr kf ls lt lu kj lv lw lx ly bi translated">3.通过Kotlin编码添加要显示的文本</h2><p id="b9f5" class="pw-post-body-paragraph jq jr it js b jt lz jv jw jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn im bi translated">这一步非常简单。你所要做的就是获得可扩展文本视图的<strong class="js iu"> <em class="la"> id </em> </strong>并设置文本为你想要的。这可以通过编程实现，如下所示:</p><pre class="kp kq kr ks gt mx my mz na aw nb bi"><span id="f784" class="lg lh it my b gy nc nd l ne nf"><strong class="my iu">import </strong>androidx.appcompat.app.AppCompatActivity<br/><strong class="my iu">import </strong>android.os.Bundle<br/><strong class="my iu">import </strong>com.ms.square.android.expandabletextview.ExpandableTextView<br/><br/><strong class="my iu">class </strong>MainActivity : AppCompatActivity() {<br/><br/>    <strong class="my iu">override fun </strong>onCreate(savedInstanceState: Bundle?) {<br/>        <strong class="my iu">super</strong>.onCreate(savedInstanceState)<br/>        setContentView(R.layout.<em class="la">activity_main</em>)<br/><br/><br/>        <em class="la">// Get the id of the expandable text view and set the desired text of your choice.</em></span><span id="f250" class="lg lh it my b gy nx nd l ne nf"><em class="la">        </em><strong class="my iu">val </strong>expTv: ExpandableTextView = findViewById(R.id.<em class="la">expand_text_view</em>)</span><span id="508a" class="lg lh it my b gy nx nd l ne nf">        expTv.setText(<strong class="my iu">"Expandable Text View is an android library that allows the users to create the text view which can expand and collapse to read the text description. I bet you guys have seen this in a lot of android applications but might not know the name and its purpose. Well, below is a screenshot of the Instagram application on the Play store. This feature saves a lot of space, rather than laying out the huge chunks of information and occupying the entire page we can further use this option and can utilize the space"</strong>)</span><span id="3b4b" class="lg lh it my b gy nx nd l ne nf">    }</span><span id="2205" class="lg lh it my b gy nx nd l ne nf">}</span></pre><p id="7e96" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">就这样，Koltin编码完成了。</p></div><div class="ab cl nh ni hx nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="im in io ip iq"><h2 id="469d" class="lg lh it bd li lj lk dn ll lm ln dp lo kb lp lq lr kf ls lt lu kj lv lw lx ly bi translated">4.运行应用程序</h2><p id="6eb8" class="pw-post-body-paragraph jq jr it js b jt lz jv jw jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn im bi translated">这是教程的最后一步。成功完成上述步骤后，现在可以在模拟器上运行应用程序了。按绿色播放按钮或(Shift+F10)在模拟器上运行应用程序。如果您仔细地遵循了这些步骤，那么您将得到如下所示的输出:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/85f701a81650be6d30aff3d27ea0eaa1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1216/format:webp/1*Yjef_gmc9LIftwQpeNYtJQ.png"/></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">决赛成绩</figcaption></figure><p id="877e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如上图所示，文本下方有一个类似下拉的小按钮，点击这个按钮，你可以根据自己的喜好展开或折叠文本。</p><p id="cc45" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">今天到此为止。我希望你们喜欢这个教程。如果你对代码或教程有任何疑问，请通过评论区告诉我。在那之前，再见，祝你愉快。</p></div></div>    
</body>
</html>