<html>
<head>
<title>Modularize shared code with Yalc</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Yalc模块化共享代码</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/modularize-a-shared-code-with-yalc-6f32031b647f?source=collection_archive---------0-----------------------#2018-12-23">https://levelup.gitconnected.com/modularize-a-shared-code-with-yalc-6f32031b647f?source=collection_archive---------0-----------------------#2018-12-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="0c0a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">将你的代码的每一个开发版本发布到NPM可能是痛苦的。Windows上的符号链接？哼，就是不要。Git子模块？不完全是。用<a class="ae kl" href="https://github.com/whitecolor/yalc/" rel="noopener ugc nofollow" target="_blank"> Yalc </a>准备一些轻量级动作。</p><h2 id="f428" class="km kn iq bd ko kp kq dn kr ks kt dp ku jy kv kw kx kc ky kz la kg lb lc ld le bi translated">TL；博士<em class="lf">(如何派生和使用你最喜欢的库)</em></h2><pre class="lg lh li lj gt lk ll lm ln aw lo bi"><span id="645f" class="km kn iq ll b gy lp lq l lr ls">git clone fork_of_your_favorite_library<br/>npm/yarn install <em class="lt">(in that fork dir)</em><br/>npm/yarn run build <em class="lt">(or similar)<br/></em>npm/yarn install -g yalc<br/>yalc publish <em class="lt">(still in the fork dir)</em><br/>yalc add fork_of_your_favorite_library <em class="lt">(inside your project dir)</em></span></pre><figure class="lg lh li lj gt lv gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi lu"><img src="../Images/79192e655dab2277160a87ce2160b08c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*AsKyAQLnN7E6_TgF"/></div></div><figcaption class="mc md gj gh gi me mf bd b be z dk translated">照片由<a class="ae kl" href="https://unsplash.com/@jtylernix?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">泰勒·尼克斯</a>在<a class="ae kl" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="61f9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有很多方法可以将你的代码分割成更小的部分。即使对一个应用程序来说，你也可以使用monorepo结构。然而，如果您的团队正在构建多个不紧密相关但一些代码共享是有益的应用程序，该怎么办？</p><p id="e0f7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我想有些人可能喜欢只使用<code class="fe mg mh mi ll b">npm/yarn link.</code>，它在大多数情况下工作得很好，但是你团队中的每个人都必须这样做！我的意思是，除非软件包被发布到NPM，否则每个团队成员都必须克隆共享回购协议，构建它，并在启动应用程序之前链接它。你想学一种更简单的方法吗？</p><p id="6c51" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Yalc是由<a class="mj mk ep" href="https://medium.com/u/217a289a6992?source=post_page-----6f32031b647f--------------------------------" rel="noopener" target="_blank"> Alex </a>制作的一个小型CLI工具，它允许你将一个包发布到一个简单的本地存储库(只是一个包含文件的目录)。命令<code class="fe mg mh mi ll b">yalc publish</code>像<code class="fe mg mh mi ll b">npm publish</code>命令一样尊重设置。您也可以使用<code class="fe mg mh mi ll b">prepublish </code>或<code class="fe mg mh mi ll b">preyalc</code>来完成任何必要的构建步骤。</p><p id="d480" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">准备好之后，只需在你的app目录下的<code class="fe mg mh mi ll b">yalc add package</code>中<strong class="jp ir">将发布的文件</strong>完整复制到你的项目根目录下的<code class="fe mg mh mi ll b">.yalc</code>目录中，以<code class="fe mg mh mi ll b">file:.yalc/package</code>的形式给<code class="fe mg mh mi ll b">package.json</code>添加一个依赖项，就这样。现在你所要做的就是将<code class="fe mg mh mi ll b">.yalc</code>目录(和<code class="fe mg mh mi ll b">yalc.lock</code>文件)提交给你的repo，你团队中的每个人都可以使用这个包，甚至不用安装Yalc🎉</p><p id="f975" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这种方法提供了惊人的透明度，因为即使没有任何显式的版本控制方案，你也知道团队中的每个人都将拥有与应用程序代码100%兼容的包，因为它是同一回购及其历史的一部分。Yalc提供了基于文件内容散列的默认版本控制方案，这对于大多数情况来说已经足够了。如果你喜欢的话，你可以选择退出，使用普通的服务器。如果想要使用<a class="ae kl" href="https://github.com/whitecolor/yalc/#pushing-updates-automatically-to-all-installations" rel="noopener ugc nofollow" target="_blank">推送(发布+更新)功能</a>，这是非常重要的。</p><p id="4344" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在某种程度上，你可能认为这个包足够稳定，你想把它发布到NPM，这完全没问题(除了你在那里制造了不必要的混乱)。然而，我相信Yalc可以长期使用，据我所知没有任何缺点。这也给了你一个很好的机会来保持一个包的私有代码不被外界看到。如果你曾经试图直接从私有回购安装一个包，你现在可能已经意识到Yalc提供了一个更好的方法。或者你尝试过使用Git子模块吗🙊？</p><p id="fef1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">但是有一个重要的问题。您需要适当地指导团队成员，否则他们可能会试图修改<code class="fe mg mh mi ll b">.yalc</code>目录的内容。为了大家好应该避免。有些实验可以直接在<code class="fe mg mh mi ll b">node_modules</code>里随意修改文件。任何有意义的更改都应该在带有包源的repo中完成，从而导致新的构建和发布。</p><blockquote class="ml mm mn"><p id="f7db" class="jn jo lt jp b jq jr js jt ju jv jw jx mo jz ka kb mp kd ke kf mq kh ki kj kk ij bi translated">请注意，Yalc也支持<code class="fe mg mh mi ll b">yalc link</code>，但我不认为它有用，因为所有团队成员都需要安装Yalc，并在启动应用程序之前手动链接所有必需的包。</p></blockquote><p id="aab0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">希望这篇短信对你有用。这为我和我的团队节省了大量时间和精力。</p></div><div class="ab cl mr ms hu mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="ij ik il im in"><figure class="lg lh li lj gt lv gh gi paragraph-image"><a href="https://levelup.gitconnected.com"><div class="gh gi my"><img src="../Images/439094b9a664ef0239afbc4565c6ca49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S9uYu-fFL3hIQLGVu0o-EQ.png"/></div></a></figure><div class="mz na gp gr nb nc"><a href="https://gitconnected.com/learn" rel="noopener  ugc nofollow" target="_blank"><div class="nd ab fo"><div class="ne ab nf cl cj ng"><h2 class="bd ir gy z fp nh fr fs ni fu fw ip bi translated">查找最佳编码教程和课程-学习编码| gitconnected</h2><div class="nj l"><h3 class="bd b gy z fp nh fr fs ni fu fw dk translated">使用我们完整的编码资源列表学习任何编程语言或框架。我们分享、汇总和排名…</h3></div><div class="nk l"><p class="bd b dl z fp nh fr fs ni fu fw dk translated">gitconnected.com</p></div></div><div class="nl l"><div class="nm l nn no np nl nq ma nc"/></div></div></a></div></div></div>    
</body>
</html>