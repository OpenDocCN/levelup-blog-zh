<html>
<head>
<title>Automating website creation using Jekyll</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Jekyll自动创建网站</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/automating-website-creation-using-jekyll-6f7550e52bc1?source=collection_archive---------14-----------------------#2020-06-21">https://levelup.gitconnected.com/automating-website-creation-using-jekyll-6f7550e52bc1?source=collection_archive---------14-----------------------#2020-06-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="0ec2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="ko">关于使用Jekyll和Liquid templates构建基于web内容抓取和API请求的网站解决方案的案例研究。</em></p><h1 id="33e8" class="kp kq it bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated"><strong class="ak">真实案例</strong></h1><p id="d9f1" class="pw-post-body-paragraph jq jr it js b jt ln jv jw jx lo jz ka kb lp kd ke kf lq kh ki kj lr kl km kn im bi translated">想象一下，你有一个庞大而复杂的网站，有很多页面和内容，大部分时间都用信息和视觉刺激淹没了用户。现在，你正转向一个更精简的信息结构，更小的网站专注于你的产品。您部署解决方案的时间跨度很短，真正的挑战在于如何汇编大量信息并自动完成创建这些小型网站的过程。</p><h1 id="822e" class="kp kq it bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">以用户为中心的解决方案</h1><p id="ebbc" class="pw-post-body-paragraph jq jr it js b jt ln jv jw jx lo jz ka kb lp kd ke kf lq kh ki kj lr kl km kn im bi translated">记住你是在试图为某人解决问题。技术方面是惊人的，但最终，你的解决方案必须解决一个业务问题。在这种情况下，我们需要创建一些更小、更直接的网站，包含来自更大网站的内容，以一种对最终用户更有意义的方式。直接与您的设计和业务团队合作至关重要。了解哪些信息是必不可少的，以及它们应该如何显示，以何种顺序和优先级显示，将有助于您避免未来的麻烦。</p><h1 id="9489" class="kp kq it bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">理解上下文</h1><p id="ed2b" class="pw-post-body-paragraph jq jr it js b jt ln jv jw jx lo jz ka kb lp kd ke kf lq kh ki kj lr kl km kn im bi translated">在选择工具之前，了解信息的背景是至关重要的。对您的决策起关键作用的几个问题是:</p><ul class=""><li id="85c5" class="ls lt it js b jt ju jx jy kb lu kf lv kj lw kn lx ly lz ma bi translated">这些数据多久改变一次？</li><li id="126f" class="ls lt it js b jt mb jx mc kb md kf me kj mf kn lx ly lz ma bi translated">出于业务和法规遵从性原因，您的信息保持最新和正确有多重要？</li><li id="090b" class="ls lt it js b jt mb jx mc kb md kf me kj mf kn lx ly lz ma bi translated">每个案例中有多少是标准化的或专用的？</li><li id="743a" class="ls lt it js b jt mb jx mc kb md kf me kj mf kn lx ly lz ma bi translated">这些内容适合模板模型吗？</li><li id="15ab" class="ls lt it js b jt mb jx mc kb md kf me kj mf kn lx ly lz ma bi translated">这个项目最重要的特点是什么？</li></ul><p id="3250" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这些问题将有助于您了解需要更新数据的频率，以及是否需要自动更新或在需要时手动更新。会发生多少例外情况，哪些可以标准化和模板化。记住，不要为你没有的问题过度设计解决方案。如果你的数据每年改变一次，很可能你不需要每天通过例行程序更新它。</p><h1 id="e4f7" class="kp kq it bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">适合正确工作的正确工具</h1><p id="762f" class="pw-post-body-paragraph jq jr it js b jt ln jv jw jx lo jz ka kb lp kd ke kf lq kh ki kj lr kl km kn im bi translated">在这种情况下，在了解到数据不会不断变化，速度和重量是项目成功的关键因素(该项目专注于新兴市场，在那里低端手机占主导地位，互联网速度不是最好的)后，我们选择与Jekyll合作进行静态内容生成。内容将通过使用一个简单的web报废应用程序(因为HTML是一种结构化标记语言，您可以提取大量具有一致性的信息)和一个API来获取，这两个应用程序都将保存在Jekyll的<em class="ko"> _data </em>文件夹中。</p><figure class="mh mi mj mk gt ml gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi mg"><img src="../Images/bc53ef4e806d6fd889b119daffd7ee0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2AxulRwYdl2EkbLU_p2FXw.jpeg"/></div></div><figcaption class="ms mt gj gh gi mu mv bd b be z dk translated">整体流程(图标由<a class="ae mw" href="https://www.flaticon.com/" rel="noopener ugc nofollow" target="_blank">平面图标</a>表示)</figcaption></figure><h1 id="26d6" class="kp kq it bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">牢记可扩展性</h1><p id="1cf0" class="pw-post-body-paragraph jq jr it js b jt ln jv jw jx lo jz ka kb lp kd ke kf lq kh ki kj lr kl km kn im bi translated">如果您正在考虑扩展和自动化您的创建，请记住简单的数据建模将对您有很大帮助。</p><h2 id="00f2" class="mx kq it bd kr my mz dn kv na nb dp kz kb nc nd ld kf ne nf lh kj ng nh ll ni bi translated">为你的数据和物品准备钥匙</h2><p id="8ff4" class="pw-post-body-paragraph jq jr it js b jt ln jv jw jx lo jz ka kb lp kd ke kf lq kh ki kj lr kl km kn im bi translated">使用Jekyll将允许您将文件系统用作数据库。在项目、页面和数据之间使用键。这将帮助您识别您的内容，并允许自动获取和合并数据。想象一下，你有一个页面，在<a class="ae mw" href="https://jekyllrb.com/docs/front-matter/" rel="noopener ugc nofollow" target="_blank">首页</a>和<em class="ko">中有关键字“1”。在<em class="ko"> _data </em>文件夹中的json </em>名为“data_1.json”，你可以很容易地使用变量、<em class="ko"> WHEREs </em>、<em class="ko"> IFs、</em>等操作符来定位引用任何具体项目的数据。</p><h1 id="be34" class="kp kq it bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">构建您的项目</h1><p id="1999" class="pw-post-body-paragraph jq jr it js b jt ln jv jw jx lo jz ka kb lp kd ke kf lq kh ki kj lr kl km kn im bi translated">理解数据上下文后，从层堆栈的角度考虑项目，并将其合并到工具架构中。</p><h2 id="bf29" class="mx kq it bd kr my mz dn kv na nb dp kz kb nc nd ld kf ne nf lh kj ng nh ll ni bi translated">数据层</h2><p id="8419" class="pw-post-body-paragraph jq jr it js b jt ln jv jw jx lo jz ka kb lp kd ke kf lq kh ki kj lr kl km kn im bi translated">把你的数据层想象成你的数据库。在Jekyll中，文件夹<em class="ko"> _data </em>是你的<em class="ko">的位置。csv </em>、<em class="ko">。yml </em>，<em class="ko">。json、</em>或其他数据文件。在这里，创建文件夹来组织你的数据，这样你就可以理解和维护它。您可以拥有一个外部应用程序，它会定期从数据源中获取数据，并更新该文件夹中的文件。</p><h2 id="665d" class="mx kq it bd kr my mz dn kv na nb dp kz kb nc nd ld kf ne nf lh kj ng nh ll ni bi translated">布局层</h2><p id="d4f7" class="pw-post-body-paragraph jq jr it js b jt ln jv jw jx lo jz ka kb lp kd ke kf lq kh ki kj lr kl km kn im bi translated">在这里你可以定义你的网站将会有哪些布局。例如，您可能需要一个主页布局、一个登录页面、一个有一列的内容页面和另一个有两列的内容页面。否则，您可以根据要显示的内容类型、新闻布局、产品类别布局和产品布局来组织布局。</p><h2 id="0f14" class="mx kq it bd kr my mz dn kv na nb dp kz kb nc nd ld kf ne nf lh kj ng nh ll ni bi translated">内容层</h2><p id="9331" class="pw-post-body-paragraph jq jr it js b jt ln jv jw jx lo jz ka kb lp kd ke kf lq kh ki kj lr kl km kn im bi translated">现在你已经有了你的布局(你的网站的宏观视图)，你的数据(你的内容的微观视图)，是时候构建你的内容了。Jekyll允许你创建自定义的内容文件夹(通过使用<a class="ae mw" href="https://jekyllrb.com/docs/collections/" rel="noopener ugc nofollow" target="_blank">集合</a>，它将帮助你组织你的内容。</p><h2 id="c59c" class="mx kq it bd kr my mz dn kv na nb dp kz kb nc nd ld kf ne nf lh kj ng nh ll ni bi translated">第一招来了</h2><p id="5ca5" class="pw-post-body-paragraph jq jr it js b jt ln jv jw jx lo jz ka kb lp kd ke kf lq kh ki kj lr kl km kn im bi translated">你的过程将变得更加迭代:为你的网站将有的每个内容建立一个页面。现在你有了完整的模型。布局已经过测试，应用于页面的数据已经过验证，现在您可以看到最终的结果，至少在这种情况下是这样。现在，让我们后退一步。</p><p id="ce79" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您已经有了示例页面。所以，让我们把它分解成更容易维护的组件，并且在实现自动化层时会给你很大帮助。这样，您的自动化将只需要创建组件名称和数据模型，并且所有的微调都将在组件中进行。</p><h2 id="7c08" class="mx kq it bd kr my mz dn kv na nb dp kz kb nc nd ld kf ne nf lh kj ng nh ll ni bi translated">组件层</h2><p id="7ef2" class="pw-post-body-paragraph jq jr it js b jt ln jv jw jx lo jz ka kb lp kd ke kf lq kh ki kj lr kl km kn im bi translated">您的组件将进入<em class="ko"> _includes </em>文件夹。保持一个命名约定，会对你有很大帮助。在includes文件夹中为每种类型的页面或模型创建一个文件夹。例如，您有自己的<em class="ko">“产品页面”</em>，在includes文件夹中创建一个名为<em class="ko">“产品”</em>的文件夹，并将这些页面的所有组件放在那里。此外，您可以使用一个<em class="ko">公共</em>文件夹，用于那些出现在多种类型页面上的组件。所以你会得到这样一个结构:</p><figure class="mh mi mj mk gt ml gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/d4a1ba5e14639e482b709842c48a30e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:370/format:webp/1*w3ciaRifQhuU0WK_TsQMXg.png"/></div><figcaption class="ms mt gj gh gi mu mv bd b be z dk translated">includes文件夹的结构。</figcaption></figure><p id="217f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">创建组件时，请记住数据中可能会出现<em class="ko">空案例</em>。也许某些项目的数据会丢失，或者在某些情况下可能不存在。在这些情况下，让<em class="ko"> if-else </em>语句成为你的朋友。</p><p id="ffe0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">创建所有组件后，更新您的页面，这样它将使用来自<em class="ko"> _includes的组件。</em>点击 <em class="ko">查看更多关于包含和传递参数<a class="ae mw" href="https://jekyllrb.com/docs/includes/" rel="noopener ugc nofollow" target="_blank">。</a></em>现在，你的页面将会更加简单，组件的行为和样式将会是独立的，你将能够很容易地将你需要的数据传递给它。现在，我们可以转到自动化层，创建我们仍然需要的所有页面。</p><h2 id="49c8" class="mx kq it bd kr my mz dn kv na nb dp kz kb nc nd ld kf ne nf lh kj ng nh ll ni bi translated">自动化层</h2><p id="35fb" class="pw-post-body-paragraph jq jr it js b jt ln jv jw jx lo jz ka kb lp kd ke kf lq kh ki kj lr kl km kn im bi translated">现在，让我们以可扩展的方式创建内容。使用includes创建页面，知道在<em class="ko"> _data </em>文件夹中的何处存储和获取内容，并且拥有内容文件夹的结构。接下来是一个关键组件，一个将从数据源获取结果并将内容保存在Jekyll项目中属于它们的地方的应用程序。根据您从web scrapper或API端点获得的数据，创建一个基于您的模板的新页面，进行所有需要的替换(这里关键字起着重要的作用),您将最终获得可以部署的新页面。</p><figure class="mh mi mj mk gt ml gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi mg"><img src="../Images/538e8523859b88fe48cfd681619df942.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-BW54T5KxQkuBfHtuyyFqQ.jpeg"/></div></div><figcaption class="ms mt gj gh gi mu mv bd b be z dk translated">该进程，现在生成页面和内容(图标由<a class="ae mw" href="https://www.flaticon.com/" rel="noopener ugc nofollow" target="_blank">扁平图标</a></figcaption></figure><h2 id="b018" class="mx kq it bd kr my mz dn kv na nb dp kz kb nc nd ld kf ne nf lh kj ng nh ll ni bi translated">更新层</h2><p id="ae18" class="pw-post-body-paragraph jq jr it js b jt ln jv jw jx lo jz ka kb lp kd ke kf lq kh ki kj lr kl km kn im bi translated">最后，您可以基于您最喜欢的CI/CD工作流，甚至使用现场服务器上的调度程序来自动化部署过程。从数据源获取所有数据，建立一个新版本的网站，瞧。</p><h1 id="ab5d" class="kp kq it bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">主要学习内容</h1><p id="30b3" class="pw-post-body-paragraph jq jr it js b jt ln jv jw jx lo jz ka kb lp kd ke kf lq kh ki kj lr kl km kn im bi translated">当你阅读这篇文章的时候，你可能会问自己:<em class="ko">“为什么不从一开始就多花一点时间来计划所有的结构，并使它更直接地发展呢？”。</em>像任何涉及许多利益相关者和来自不同领域的人(你可能会和设计师、产品负责人、业务分析师、营销人员等等一起工作)的过程一样，规范变化很快，你需要使架构适应这些变化<em class="ko">。</em>所以，这里是关键的学习点(就我而言):</p><blockquote class="nk"><p id="e043" class="nl nm it bd nn no np nq nr ns nt kn dk translated">为你的项目选择一个垂直的方法。尽可能简单地让它跨所有层工作，这样你就会理解这个结构，并且能够更容易更快地适应变化。</p></blockquote><h1 id="81f9" class="kp kq it bd kr ks kt ku kv kw kx ky kz la nu lc ld le nv lg lh li nw lk ll lm bi translated">结果呢</h1><p id="f231" class="pw-post-body-paragraph jq jr it js b jt ln jv jw jx lo jz ka kb lp kd ke kf lq kh ki kj lr kl km kn im bi translated">做完这一切后，您将最终得到一个静态生成的网站，它使用不同的数据源。它更安全、更轻便、更快。可以在way.feevale.br/的<a class="ae mw" href="https://way.feevale.br/" rel="noopener ugc nofollow" target="_blank">和digital.feevale.br/</a>的<a class="ae mw" href="https://digital.feevale.br/" rel="noopener ugc nofollow" target="_blank">查看样本结果。在这两种情况下，数据来自不同的来源，内容页面是使用Jekyll静态生成的。</a></p></div></div>    
</body>
</html>