<html>
<head>
<title>It's Okay to Write Crap Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">写垃圾代码没关系</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/its-okay-to-write-crap-code-90563a511491?source=collection_archive---------12-----------------------#2020-03-30">https://levelup.gitconnected.com/its-okay-to-write-crap-code-90563a511491?source=collection_archive---------12-----------------------#2020-03-30</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div class="gh gi jq"><img src="../Images/f146c19fe9a91d7581be70af39b472fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:652/1*4uSR9yvz-Y1S7Vsu-myn8Q.gif"/></div></figure><p id="a3f9" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">我知道。管它呢。对于那些不知道的人，几个月前，我写了一篇文章，“停止写废话代码”。这是我写的最好的文章之一。今天，我要做一个小小的修改:偶尔写垃圾代码是可以的。</p><div class="kv kw gp gr kx ky"><a href="https://medium.com/better-programming/stop-writing-crap-code-7d3458f42384" rel="noopener follow" target="_blank"><div class="kz ab fo"><div class="la ab lb cl cj lc"><h2 class="bd iu gy z fp ld fr fs le fu fw is bi translated">停止写垃圾代码</h2><div class="lf l"><h3 class="bd b gy z fp ld fr fs le fu fw dk translated">编写易读易调试代码的实用指南。</h3></div><div class="lg l"><p class="bd b dl z fp ld fr fs le fu fw dk translated">medium.com</p></div></div><div class="lh l"><div class="li l lj lk ll lh lm jv ky"/></div></div></a></div><p id="1993" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">在过去的一周里，许多不同的网站取消了订阅要求，向公众开放了内容。这是因为冠状病毒隔离。作为一个数据迷，我看到了这个机会，并决定利用它。唯一的问题？时间不多了。我需要在尽可能短的时间内收集所有的内容。</p><h1 id="f6ff" class="ln lo it bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">什么时候写垃圾代码</h1><p id="8dac" class="pw-post-body-paragraph jx jy it jz b ka ml kc kd ke mm kg kh ki mn kk kl km mo ko kp kq mp ks kt ku im bi translated">首先，并不是你写的每一个应用程序都需要永久存在。当你第一次学习编码时，你应该把注意力集中在解决问题和许多问题上。您将开始理解为什么以及在哪里需要使用良好的编码实践。</p><p id="5050" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">第二，有时你只需要你的程序运行一次，就可以把你从大量的手工劳动中解放出来。我今天要展示的例子来自我编写的一个程序，它从一个杂志档案中收集数据。他们有418期，超过38014页。我不想手动存档。这里是您可以安全地编写垃圾代码的地方。</p><h1 id="b839" class="ln lo it bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated"><strong class="ak">什么垃圾代码看起来像</strong></h1><p id="9153" class="pw-post-body-paragraph jx jy it jz b ka ml kc kd ke mm kg kh ki mn kk kl km mo ko kp kq mp ks kt ku im bi translated">那么，是什么让我的代码如此糟糕呢？让我们好好看看！</p><h2 id="b695" class="mq lo it bd lp mr ms dn lt mt mu dp lx ki mv mw mb km mx my mf kq mz na mj nb bi translated">1.复制</h2><figure class="nd ne nf ng gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="nh ni di nj bf nk"><div class="gh gi nc"><img src="../Images/c5ec5f6d7521bfd7e2a61ee17e2f0075.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F3AvMxVLrdNsr7bJ2kKpaQ.png"/></div></div></figure><p id="e1d3" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">垃圾代码包含大量重复代码。举上面的例子。我用相同的代码在两个不同的地方创建了一个目录。有趣的是在save_image函数中不应该包含创建的目录代码。save_metadata函数应该是我创建目录的唯一地方，因为我必须在保存图像之前拥有元数据。</p><p id="fb47" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">修复上面的代码很简单，因为它们实际上使用的是完全相同的代码。但是更常见的情况是，你需要确保你的功能足够灵活来处理不同的用例。</p><h2 id="b762" class="mq lo it bd lp mr ms dn lt mt mu dp lx ki mv mw mb km mx my mf kq mz na mj nb bi translated">2.功能太长，做得太多</h2><p id="77fc" class="pw-post-body-paragraph jx jy it jz b ka ml kc kd ke mm kg kh ki mn kk kl km mo ko kp kq mp ks kt ku im bi translated">*请不要阅读所有这些代码。只需滚动到我对它的评论。</p><figure class="nd ne nf ng gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="nh ni di nj bf nk"><div class="gh gi nl"><img src="../Images/db5a287ffebc1e02267df8a9a2477b8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Em0BGDidNS-Q8h3G_UpMxw.png"/></div></div></figure><p id="ab49" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">很抱歉让你看到这些。这是为了说明一点。一个函数不应该太长，以至于你需要滚动才能看到全部。这使得调试变得不可能。除了长度之外，这个函数还包含了太多内容。以下是该函数中发生的所有事情的列表:</p><ol class=""><li id="b875" class="nm nn it jz b ka kb ke kf ki no km np kq nq ku nr ns nt nu bi translated">迭代文章链接</li><li id="2d58" class="nm nn it jz b ka nv ke nw ki nx km ny kq nz ku nr ns nt nu bi translated">请求文章封面</li><li id="d414" class="nm nn it jz b ka nv ke nw ki nx km ny kq nz ku nr ns nt nu bi translated">解析元数据</li><li id="73a4" class="nm nn it jz b ka nv ke nw ki nx km ny kq nz ku nr ns nt nu bi translated">解析图像URL输出</li><li id="3322" class="nm nn it jz b ka nv ke nw ki nx km ny kq nz ku nr ns nt nu bi translated">迭代文章中的页面链接</li><li id="18e8" class="nm nn it jz b ka nv ke nw ki nx km ny kq nz ku nr ns nt nu bi translated">请求文章页面</li><li id="7c23" class="nm nn it jz b ka nv ke nw ki nx km ny kq nz ku nr ns nt nu bi translated">解析文章页面中的图像URL</li></ol><p id="1a80" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">这是一个噩梦，因为如果上面的任何部分坏了，我去哪里修复它？在主函数\_(ツ)_/的某个地方</p><p id="5e12" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">为了修复上面的代码，我可能会先把它分解成上面列出的7个函数。然后，再回头看一遍，我会看到上面的几个函数有相似的位，并将它提取到自己的功能中。以请求文章封面和文章页面为例。它们都使用代码来检查请求是否被成功返回。应该提取到它自己的函数中。</p><h2 id="cd6f" class="mq lo it bd lp mr ms dn lt mt mu dp lx ki mv mw mb km mx my mf kq mz na mj nb bi translated">3.国家管理不善</h2><figure class="nd ne nf ng gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="nh ni di nj bf nk"><div class="gh gi oa"><img src="../Images/f9d34c8526cae4575ea5d680c75292b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vLkjNz_o0RYzBV_lquNNsw.png"/></div></div></figure><p id="c99b" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">信不信由你，事情并不是这样开始的。它从一个简单的函数程序开始…好吧，所以我至少从一个程序开始。进行到一半时，我意识到在失败的情况下，我希望能够重新加载状态的大部分，这样我就可以从我离开的地方重新开始。我很高兴我这么做了，因为有几次我不得不这么做。</p><p id="77e7" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">尽管如此，所有这些状态都没有得到很好的管理。如果这个构建得更好，我会将状态分解成更小的块。应该有一个管理会话状态，另一个管理文章/页面状态。</p><h1 id="e259" class="ln lo it bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">为什么这个项目是好的</h1><p id="2c6b" class="pw-post-body-paragraph jx jy it jz b ka ml kc kd ke mm kg kh ki mn kk kl km mo ko kp kq mp ks kt ku im bi translated">我能够在几个下午内编写这个程序。它能够从杂志x中抓取41Gb的数据。现在我完成了，我可能会把它放在我完成的项目文件夹中，让它腐烂。不过，我从中学到的经验不会白白浪费。制作它教会了我很多从网站下载图片和处理会议的方法。</p><p id="a8f8" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">不是你写的每个程序都必须是最好的。写一次性代码没问题。只要知道如果你必须维护你的代码，让它正确是值得的。</p><p id="d1b7" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">如果你想尝试重构这段丑陋的代码？叉我的仓库，并给它一个去！</p><div class="kv kw gp gr kx ky"><a href="https://github.com/dtaivpp/one-time-image-scraper" rel="noopener  ugc nofollow" target="_blank"><div class="kz ab fo"><div class="la ab lb cl cj lc"><h2 class="bd iu gy z fp ld fr fs le fu fw is bi translated">dtaivpp/一次性图像刮刀</h2><div class="lf l"><h3 class="bd b gy z fp ld fr fs le fu fw dk translated">这个项目是为了证明不是所有的代码都需要完美。这是一个完全一次性的项目…</h3></div><div class="lg l"><p class="bd b dl z fp ld fr fs le fu fw dk translated">github.com</p></div></div><div class="lh l"><div class="ob l lj lk ll lh lm jv ky"/></div></div></a></div></div></div>    
</body>
</html>