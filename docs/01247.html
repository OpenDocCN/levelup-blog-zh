<html>
<head>
<title>Different ways to measure performance in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript中测量性能的不同方法</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/different-ways-to-measure-performance-in-javascript-94785075ab96?source=collection_archive---------1-----------------------#2019-12-05">https://levelup.gitconnected.com/different-ways-to-measure-performance-in-javascript-94785075ab96?source=collection_archive---------1-----------------------#2019-12-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="49fa" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">学习不同的方法来测量JavaScript中执行程序所花费的时间</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/9788995666959becb2d0655baeef339a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6azqUQZS_S3YZqi_gX4Tvw.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">图片由<a class="ae kv" href="https://unsplash.com/@aronvisuals?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Aron Visuals制作</a></figcaption></figure><p id="2d27" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要了解JavaScript中一个函数、循环或任何操作的执行时间，我们可以使用以下工具之一:</p><ul class=""><li id="f0ca" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">使用<code class="fe mb mc md me b">console.time</code>和<code class="fe mb mc md me b">console.timeEnd</code></li><li id="b696" class="ls lt iq ky b kz mf lc mg lf mh lj mi ln mj lr lx ly lz ma bi translated">使用<code class="fe mb mc md me b">performance.now</code>方法</li><li id="41b1" class="ls lt iq ky b kz mf lc mg lf mh lj mi ln mj lr lx ly lz ma bi translated">使用在线性能测试工具</li></ul><h1 id="9296" class="mk ml iq bd mm mn mo mp mq mr ms mt mu jw mv jx mw jz mx ka my kc mz kd na nb bi translated">1.使用控制台. time和控制台. timeEnd</h1><p id="2874" class="pw-post-body-paragraph kw kx iq ky b kz nc jr lb lc nd ju le lf ne lh li lj nf ll lm ln ng lp lq lr ij bi translated"><code class="fe mb mc md me b">console.time</code>和<code class="fe mb mc md me b">console.timeEnd</code>将打印在函数调用之间执行代码所用的<code class="fe mb mc md me b">millisecond</code>的数量。</p><pre class="kg kh ki kj gt nh me ni nj aw nk bi"><span id="5cf0" class="nl ml iq me b gy nm nn l no np">function test() {<br/>   for(let i =0 ; i &lt; 100000; i++) {<br/>      //operation;<br/>   }<br/>}</span><span id="06a3" class="nl ml iq me b gy nq nn l no np">console.time();</span><span id="a775" class="nl ml iq me b gy nq nn l no np">test();</span><span id="0fa5" class="nl ml iq me b gy nq nn l no np">console.timeEnd();</span><span id="5fff" class="nl ml iq me b gy nq nn l no np">// This will produce </span><span id="519e" class="nl ml iq me b gy nq nn l no np">default: 1.2529296875ms (time taken to execute test function, value may vary ).</span></pre><p id="dd75" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们也可以使用标签来标记不同的计时操作。</p><pre class="kg kh ki kj gt nh me ni nj aw nk bi"><span id="c096" class="nl ml iq me b gy nm nn l no np">console.time("test");</span><span id="d003" class="nl ml iq me b gy nq nn l no np">test();</span><span id="ee63" class="nl ml iq me b gy nq nn l no np">console.timeEnd("test");</span><span id="a537" class="nl ml iq me b gy nq nn l no np">// test: 1.117919921875ms</span></pre><p id="8ed1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们可以使用不同标签的嵌套<code class="fe mb mc md me b">console.time</code></p><pre class="kg kh ki kj gt nh me ni nj aw nk bi"><span id="8583" class="nl ml iq me b gy nm nn l no np">console.time("test1");</span><span id="326d" class="nl ml iq me b gy nq nn l no np">   test();</span><span id="b5af" class="nl ml iq me b gy nq nn l no np">   console.time("test2");<br/>   test();<br/>   console.timeEnd("test2");</span><span id="3684" class="nl ml iq me b gy nq nn l no np">console.timeEnd("test1");</span><span id="a3a0" class="nl ml iq me b gy nq nn l no np"><strong class="me ir">test2: 0.875ms<br/>test1: 2.1748046875ms</strong></span></pre><p id="48fb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以编写一个自动处理日志记录性能的方法</p><pre class="kg kh ki kj gt nh me ni nj aw nk bi"><span id="71ba" class="nl ml iq me b gy nm nn l no np">function runTest(fn, n = 1){</span><span id="09b2" class="nl ml iq me b gy nq nn l no np">    <strong class="me ir">console.time("Test");</strong></span><span id="7bdc" class="nl ml iq me b gy nq nn l no np">    for(let i =0 ; i &lt; n; i++) {</span><span id="02b1" class="nl ml iq me b gy nq nn l no np">        fn();</span><span id="e55d" class="nl ml iq me b gy nq nn l no np">     }</span><span id="2a6c" class="nl ml iq me b gy nq nn l no np">     <strong class="me ir">console.timeEnd("Test");</strong></span><span id="eb9e" class="nl ml iq me b gy nq nn l no np">}</span><span id="d288" class="nl ml iq me b gy nq nn l no np">// we can pass the function and number of iteration . </span></pre><p id="b461" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了比较两个函数</p><pre class="kg kh ki kj gt nh me ni nj aw nk bi"><span id="11f8" class="nl ml iq me b gy nm nn l no np">function compareFunction(fn1, fn2, n = 1) {</span><span id="fbf4" class="nl ml iq me b gy nq nn l no np"><strong class="me ir">  console.time("Fn1");</strong></span><span id="d7bd" class="nl ml iq me b gy nq nn l no np">  for(let i =0 ; i &lt; n; i++) {</span><span id="0a76" class="nl ml iq me b gy nq nn l no np"><strong class="me ir">     fn1();</strong></span><span id="7398" class="nl ml iq me b gy nq nn l no np">  }</span><span id="2bf1" class="nl ml iq me b gy nq nn l no np"><strong class="me ir">  console.timeEnd("Fn1");</strong></span><span id="70eb" class="nl ml iq me b gy nq nn l no np"><strong class="me ir">  console.time("Fn2");</strong></span><span id="088f" class="nl ml iq me b gy nq nn l no np">  for(let i =0 ; i &lt; n; i++) {</span><span id="fd08" class="nl ml iq me b gy nq nn l no np">     <strong class="me ir"> fn2();</strong></span><span id="f8ab" class="nl ml iq me b gy nq nn l no np">  }</span><span id="9d52" class="nl ml iq me b gy nq nn l no np"><strong class="me ir">   console.timeEnd("Fn2"); </strong></span><span id="375c" class="nl ml iq me b gy nq nn l no np">}</span><span id="000d" class="nl ml iq me b gy nq nn l no np">// we can pass the function and number of iteration .</span></pre><h1 id="ce6c" class="mk ml iq bd mm mn mo mp mq mr ms mt mu jw mv jx mw jz mx ka my kc mz kd na nb bi translated">2.使用<code class="fe mb mc md me b">performance.now()</code></h1><p id="66e2" class="pw-post-body-paragraph kw kx iq ky b kz nc jr lb lc nd ju le lf ne lh li lj nf ll lm ln ng lp lq lr ij bi translated"><code class="fe mb mc md me b">performance.now()</code>方法将返回一个以毫秒为单位的时间戳，表示从您加载页面到现在已经过了多长时间。</p><p id="9e27" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们尝试在窗口加载后打印该值。</p><pre class="kg kh ki kj gt nh me ni nj aw nk bi"><span id="9e5b" class="nl ml iq me b gy nm nn l no np">window.onload = function (ev) {</span><span id="00f8" class="nl ml iq me b gy nq nn l no np">   console.log(performance.now()); // the value will be around 100ms</span><span id="bcb5" class="nl ml iq me b gy nq nn l no np">}</span></pre><p id="a4ff" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们用它来检查性能:</p><pre class="kg kh ki kj gt nh me ni nj aw nk bi"><span id="a34f" class="nl ml iq me b gy nm nn l no np">var start = performance.now();</span><span id="a410" class="nl ml iq me b gy nq nn l no np">test();</span><span id="5a29" class="nl ml iq me b gy nq nn l no np">var end = performance.now();</span><span id="0e55" class="nl ml iq me b gy nq nn l no np">var timeTaken = end - start; // 1.1350000277161598</span></pre><p id="3dda" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是Mozilla说</p><blockquote class="nr ns nt"><p id="d6e1" class="kw kx nu ky b kz la jr lb lc ld ju le nv lg lh li nw lk ll lm nx lo lp lq lr ij bi translated">时间戳实际上不是高分辨率的。为了缓解诸如<a class="ae kv" href="https://spectreattack.com/" rel="noopener ugc nofollow" target="_blank"> Spectre </a>之类的安全威胁，浏览器目前在不同程度上对结果进行了四舍五入。(Firefox在Firefox 60中开始四舍五入到1毫秒)。一些浏览器也可能稍微随机化时间戳。在未来的版本中，精度可能会再次提高；浏览器开发人员仍在研究这些计时攻击以及如何最好地减轻它们。</p></blockquote><h1 id="f6d3" class="mk ml iq bd mm mn mo mp mq mr ms mt mu jw mv jx mw jz mx ka my kc mz kd na nb bi translated">在线测试工具</h1><p id="aebf" class="pw-post-body-paragraph kw kx iq ky b kz nc jr lb lc nd ju le lf ne lh li lj nf ll lm ln ng lp lq lr ij bi translated">在线性能测试工具将执行我们的JavaScript代码，运行基准测试，并给出性能结果。三个最好的在线测试工具是:</p><ol class=""><li id="770b" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr ny ly lz ma bi translated"><a class="ae kv" href="https://jsperf.com" rel="noopener ugc nofollow" target="_blank"> jsPerf </a></li><li id="63dd" class="ls lt iq ky b kz mf lc mg lf mh lj mi ln mj lr ny ly lz ma bi translated"><a class="ae kv" href="http://jsben.ch/" rel="noopener ugc nofollow" target="_blank"> jsBen。CH </a></li><li id="a2fe" class="ls lt iq ky b kz mf lc mg lf mh lj mi ln mj lr ny ly lz ma bi translated"><a class="ae kv" href="https://jsbench.me/" rel="noopener ugc nofollow" target="_blank"> jsBench.me </a></li></ol></div><div class="ab cl nz oa hu ob" role="separator"><span class="oc bw bk od oe of"/><span class="oc bw bk od oe of"/><span class="oc bw bk od oe"/></div><div class="ij ik il im in"><p id="03cd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">握住你的手🤚与我一起<a class="ae kv" href="https://medium.com/u/f9ffc26e7e69?source=post_page-----98efbae5e8aa----------------------" rel="noopener"> JavaScript Jeep🚙💨</a>。</p><p id="de2b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="https://www.buymeacoffee.com/Jagathish" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir">给我买杯咖啡</strong> </a> <strong class="ky ir">。</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi og"><img src="../Images/6cc6c127d4371408ba6fece0f75c5e57.png" data-original-src="https://miro.medium.com/v2/resize:fit:896/format:webp/0*jhd1hjksnCcRozc_.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae kv" href="https://www.buymeacoffee.com/Jagathish" rel="noopener ugc nofollow" target="_blank"> <strong class="bd mm">给我买杯咖啡</strong> </a> <strong class="bd mm">。</strong></figcaption></figure></div></div>    
</body>
</html>