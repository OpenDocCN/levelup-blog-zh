<html>
<head>
<title>Fixing your SSL Verify Errors in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">修复Python中的SSL验证错误</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/fixing-your-ssl-verify-errors-in-python-71c2201db4b2?source=collection_archive---------1-----------------------#2021-05-06">https://levelup.gitconnected.com/fixing-your-ssl-verify-errors-in-python-71c2201db4b2?source=collection_archive---------1-----------------------#2021-05-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/f0c3abd37679d6fb415251655ff76c0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5J6ULfBAvgLF8PBM4B__Qw.jpeg"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">来源:XCart.com</figcaption></figure><p id="42ba" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我不认为我可以恰当地用语言来表达我有多不喜欢SSL。不是因为我认为它不好，而是因为要花这么多时间才能搞清楚到底是怎么回事。我是说这个错误到底是什么意思？！</p><figure class="le lf lg lh gt ju"><div class="bz fp l di"><div class="li lj l"/></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">我已经忍受了很多个月的实际错误…</figcaption></figure><h1 id="7d25" class="lk ll it bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">为什么您会遇到SSL问题</h1><p id="0250" class="pw-post-body-paragraph kg kh it ki b kj mi kl km kn mj kp kq kr mk kt ku kv ml kx ky kz mm lb lc ld im bi translated">据我所知，人们对SSL有问题有两个主要原因。首先，你正在处理一个有自我签名证书的网站。自签名证书实际上是您为自己创建的证书。这里简单的类比就是签署一份文件并将其发送给某人。备选方案正在获取受信任的证书颁发机构来验证您的证书。这就像去公证处签署一份文件。现在你有了一个可以证明你的签名确实来自你的外部团体。</p><p id="726d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">人们遇到SSL问题的第二个原因是他们为一家公司工作，该公司从事所谓的SSL解密。这是他们解密流量的地方，就好像他们是最终用户来验证流量的安全性，然后用他们自己的证书重新加密流量并转发给你。就像这样:</p><figure class="le lf lg lh gt ju gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/823ef309f16f9ece8d5cb77d0a9ca489.png" data-original-src="https://miro.medium.com/v2/resize:fit:1192/format:webp/1*-4RA5mNhI96HPf0lX9s6og.png"/></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">来源:这是我画的，不要评价</figcaption></figure><h1 id="82fc" class="lk ll it bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">如何修复您的SSL错误:</h1><p id="88e8" class="pw-post-body-paragraph kg kh it ki b kj mi kl km kn mj kp kq kr mk kt ku kv ml kx ky kz mm lb lc ld im bi translated">如果你的问题是你的公司使用SSL解密，而你使用的是windows，那么你将会有一段艰难的时间。以下是解决方法:</p><pre class="le lf lg lh gt mo mp mq mr aw ms bi"><span id="a441" class="mt ll it mp b gy mu mv l mw mx">python -m pip install python-certifi-win32</span></pre><p id="ab00" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Gottem，除了在请求中使用verify=True之外，这就是您需要做的所有事情。python-certify-win32库使用Windows证书存储来检查证书的有效性。</p><p id="a788" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">对于Linux机器，您需要设置一个环境变量，以便请求可以在哪里找到cert包。这通常是这样的:</p><pre class="le lf lg lh gt mo mp mq mr aw ms bi"><span id="b6f5" class="mt ll it mp b gy mu mv l mw mx">export REQUESTS_CA_BUNDLE=/etc/ssl/certs/ca-certificates.crt</span></pre><p id="6ad0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">python的新版本使用Certifi包。有了这个，你就可以在需要的地方安装证书了(<a class="ae kf" href="https://stackoverflow.com/questions/42982143/python-requests-how-to-use-system-ca-certificates-debian-ubuntu" rel="noopener ugc nofollow" target="_blank">大喊到stackoverflow </a>)。这是通过运行以下命令来完成的:</p><pre class="le lf lg lh gt mo mp mq mr aw ms bi"><span id="b589" class="mt ll it mp b gy mu mv l mw mx">Python 3.8.5 (default, Jul 28 2020, 12:59:40) <br/>&gt;&gt;&gt; import certifi<br/>&gt;&gt;&gt; certifi.where()<br/>'/etc/ssl/certs/ca-certificates.crt'</span></pre><p id="89f6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你试图用自签名证书攻击服务器，你首先需要获得他们的证书。再次感谢<a class="ae kf" href="https://superuser.com/questions/97201/how-to-save-a-remote-server-ssl-certificate-locally-as-a-file" rel="noopener ugc nofollow" target="_blank">精彩叠溢</a>为我们指明了道路:</p><pre class="le lf lg lh gt mo mp mq mr aw ms bi"><span id="39a2" class="mt ll it mp b gy mu mv l mw mx">openssl s_client -showcerts -connect server.edu:443 &lt;/dev/null 2&gt;/dev/null|openssl x509 -outform PEM &gt;mycertfile.pem</span></pre><p id="7f35" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这会将文件输出为mycertfile.pem。然后我们可以将它添加到可信证书中。就是这样，不要再开玩笑了。现在去享受作为日志清洁工和安全实现者的荣耀吧。</p><figure class="le lf lg lh gt ju gh gi paragraph-image"><div class="gh gi my"><img src="../Images/6ebbbc33b4b40d6ac3eac1c5afd22d06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/format:webp/0*WwijPwwH2gL6uRUW.png"/></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">来源:<a class="ae kf" href="https://knowyourmeme.com/memes/hackerman" rel="noopener ugc nofollow" target="_blank">KnowYourMeme.com</a></figcaption></figure></div></div>    
</body>
</html>