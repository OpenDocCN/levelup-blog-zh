<html>
<head>
<title>The Ultimate Guide to Loops in Swift</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Swift环路终极指南</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/the-ultimate-guide-to-loops-in-swift-431664155618?source=collection_archive---------12-----------------------#2020-12-22">https://levelup.gitconnected.com/the-ultimate-guide-to-loops-in-swift-431664155618?source=collection_archive---------12-----------------------#2020-12-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="22fb" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">掌握编程中最基本的构件之一</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/5a9d035d33e057249b31efe9899234ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8Sn9Lu4iAhXeHoas"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae kv" href="https://unsplash.com/@tine999?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Tine ivani</a>拍摄的照片</figcaption></figure><p id="0eed" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所有编程语言都是独一无二的。他们至少在某些方面不同于所有的同龄人。</p><p id="1163" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，Swift有可选、类型别名和不透明返回类型。</p><p id="8ca9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然而，有一些几乎每种语言都使用的基本构件。条件允许你仅在条件评估为真时运行代码的某一部分。大多数语言使用if子句来实现这种条件逻辑。</p><div class="ls lt gp gr lu lv"><a href="https://medium.com/swlh/the-ultimate-guide-to-swift-conditionals-297f17fd5c1f" rel="noopener follow" target="_blank"><div class="lw ab fo"><div class="lx ab ly cl cj lz"><h2 class="bd ir gy z fp ma fr fs mb fu fw ip bi translated">快速条件句终极指南</h2><div class="mc l"><h3 class="bd b gy z fp ma fr fs mb fu fw dk translated">深入探究Swift的核心构件之一。今天，我们来看看条件句。</h3></div><div class="md l"><p class="bd b dl z fp ma fr fs mb fu fw dk translated">medium.com</p></div></div><div class="me l"><div class="mf l mg mh mi me mj kp lv"/></div></div></a></div><p id="7a0b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是条件并不是大多数编程语言使用的唯一基本构件。我们有类、对象、函数、变量、常量、访问控制等等。</p><p id="6a94" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们开发人员经常想快速学习新的东西，看一门语言为我们提供的所有高级特性是很有诱惑力的。因此，我们经常忘记首先掌握基础知识。在我们继续前进之前，建立一个坚实的基础是很重要的。这将帮助我们以更快的速度获取知识，因为我们理解了语言本身的核心。</p><p id="41c1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这就是为什么今天我想讨论编程语言Swift中的一个基础部分。</p><p id="85ce" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">循环往复。</strong></p><p id="3f30" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在阅读这篇文章时，你会学到以下几点:</p><ol class=""><li id="e1b7" class="mk ml iq ky b kz la lc ld lf mm lj mn ln mo lr mp mq mr ms bi translated">什么是循环？</li><li id="a4fb" class="mk ml iq ky b kz mt lc mu lf mv lj mw ln mx lr mp mq mr ms bi translated">while循环。</li><li id="fc85" class="mk ml iq ky b kz mt lc mu lf mv lj mw ln mx lr mp mq mr ms bi translated">重复循环。</li><li id="fe0d" class="mk ml iq ky b kz mt lc mu lf mv lj mw ln mx lr mp mq mr ms bi translated">斯威夫特经典for-loop的再现。</li><li id="4bee" class="mk ml iq ky b kz mt lc mu lf mv lj mw ln mx lr mp mq mr ms bi translated">基于范围的for-in-loop。</li><li id="c6b4" class="mk ml iq ky b kz mt lc mu lf mv lj mw ln mx lr mp mq mr ms bi translated">用for-in-loop迭代序列。</li><li id="efaf" class="mk ml iq ky b kz mt lc mu lf mv lj mw ln mx lr mp mq mr ms bi translated">使用循环的替代方法。</li></ol><p id="a11f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">本文试图成为您全面理解Swift中所有类型环路所需的唯一资源。我将添加个人建议以及技巧和诀窍，以充分利用每种类型的循环。遗憾的是，我不能涵盖这个话题的每一个细微差别。但是在你完成之后，你将会为你将要面对的循环挑战做好充分的准备。</p></div><div class="ab cl my mz hu na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="ij ik il im in"><h2 id="75af" class="nf ng iq bd nh ni nj dn nk nl nm dp nn lf no np nq lj nr ns nt ln nu nv nw nx bi translated">什么是循环？</h2><p id="8d9e" class="pw-post-body-paragraph kw kx iq ky b kz ny jr lb lc nz ju le lf oa lh li lj ob ll lm ln oc lp lq lr ij bi translated">循环包含的代码不仅要运行一次，还要运行多次。</p><p id="7d04" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">想象一个没有循环的世界，你会想打印从0到100的数字。</p><p id="b1d5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你需要写100份打印声明！现在考虑更动态的行为，您希望根据用户拥有的数据项的数量来运行某些代码。那是不可能实现的！</p><p id="230e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">循环允许您指定一个条件，并在尽可能多的迭代中运行一些代码，以使条件评估为假。</p><p id="9037" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">举个例子，让我们假设你从用户那里得到一个不确定数目的整数，然后你想把它们加倍。通过一个循环，您可以迭代这些数字，并将每个数字乘以2。您只需编写一次代码，但要多次执行。</p><p id="5152" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有像递归这样的循环的替代方法。但稍后会详细介绍。</p><p id="9f45" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有了这个更一般的解释，让我们看一个具体的例子，看一些代码来理解它背后的理论。</p></div><div class="ab cl my mz hu na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="ij ik il im in"><h2 id="1e95" class="nf ng iq bd nh ni nj dn nk nl nm dp nn lf no np nq lj nr ns nt ln nu nv nw nx bi translated">Swift中的while循环</h2><p id="12ab" class="pw-post-body-paragraph kw kx iq ky b kz ny jr lb lc nz ju le lf oa lh li lj ob ll lm ln oc lp lq lr ij bi translated">如果你像我一样幸运，拥有计算机科学学位，你就会知道这种类型的循环。</p><p id="6155" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是你将在许多典型的“编程入门”课上看到的第一个循环。我第一次遇到它是在C语言中，后来是在Java中。</p><p id="4dc9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在进一步讨论这个问题之前，我们先来看一个Swift中的代码示例。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="e940" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">上面的循环将从10到0(包括10和0)的数字打印到控制台。</p><p id="9653" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">while循环基本上执行以下操作:</p><blockquote class="of"><p id="5d01" class="og oh iq bd oi oj ok ol om on oo lr dk translated">如果条件的计算结果为真，运行这段代码，运行的次数与条件的计算结果相同。</p></blockquote><p id="bba4" class="pw-post-body-paragraph kw kx iq ky b kz op jr lb lc oq ju le lf or lh li lj os ll lm ln ot lp lq lr ij bi translated">变量<code class="fe ou ov ow ox b">countdown</code>用于while循环的条件部分。在第一次迭代中，值是10，因此，while块中的代码被执行。</p><p id="414a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在程序块的末尾，变量<code class="fe ou ov ow ox b">countdown</code>将被减1。所以下一次迭代是9。</p><blockquote class="oy oz pa"><p id="2c23" class="kw kx pb ky b kz la jr lb lc ld ju le pc lg lh li pd lk ll lm pe lo lp lq lr ij bi translated"><strong class="ky ir">注意:</strong>不要忘记这最后一行代码！关于循环，最容易犯的一个错误是忘记改变用于计算的变量。如果没有while块的最后一行，我们将无限次地执行代码。每次迭代，变量<code class="fe ou ov ow ox b">countdown</code>都是10。这将导致我们的应用程序冻结，并最终崩溃。</p></blockquote><p id="17d4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">只要条件评估为真，就将执行循环，在这种情况下，只要变量<code class="fe ou ov ow ox b">countdown</code>大于或等于0。</p><p id="d769" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一旦条件评估为假(<code class="fe ou ov ow ox b">countdown</code>变得小于0)，while块将不再执行，我们将继续执行循环后面的代码。</p><p id="c3fa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里我还想指出两件事:</p><ol class=""><li id="c50e" class="mk ml iq ky b kz la lc ld lf mm lj mn ln mo lr mp mq mr ms bi translated">在块内的什么地方改变用于条件的变量并不重要。当前迭代将一直运行到完成，然后在下一次迭代之前检查条件。因此，改变变量的行为不像一个<code class="fe ou ov ow ox b">break</code> -、<code class="fe ou ov ow ox b">continue</code> -或<code class="fe ou ov ow ox b">return</code>-语句。<strong class="ky ir">然而，如果你想在下面的代码中使用它，这就很重要了！</strong></li><li id="752d" class="mk ml iq ky b kz mt lc mu lf mv lj mw ln mx lr mp mq mr ms bi translated">你不必像我一样使用计数器。这是最常见的场景，但是您也可以使用任何其他可用于条件的内容。例如，你也可以使用一个在开始时为真的变量，当循环中发生某些事情时，这个变量变为假。</li></ol><p id="34e0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">相关性:</strong>就我个人而言，我不再经常使用while循环了。当你从旧的编程语言进入Swift时，你可能会经常使用它。但是while循环有一个很大的缺点。你必须自己改变影响条件的变量！如果你忘记了或者犯了一个错误，这个循环将会无休止地运行。Swift正尽力避免这种人为错误，这就是为什么我认为其他循环更适合Swift和您的应用程序。</p></div><div class="ab cl my mz hu na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="ij ik il im in"><h2 id="ff06" class="nf ng iq bd nh ni nj dn nk nl nm dp nn lf no np nq lj nr ns nt ln nu nv nw nx bi translated">Swift中的repeat while循环</h2><p id="bc97" class="pw-post-body-paragraph kw kx iq ky b kz ny jr lb lc nz ju le lf oa lh li lj ob ll lm ln oc lp lq lr ij bi translated">你可能也知道这种类型的循环。通常，它有一个不同的名字。do-while循环。</p><blockquote class="oy oz pa"><p id="3383" class="kw kx pb ky b kz la jr lb lc ld ju le pc lg lh li pd lk ll lm pe lo lp lq lr ij bi translated"><strong class="ky ir">注意:</strong>在Swift的早期，这也被称为do-while。在Swift 2.0中，他们将命名约定改为repeat-while。</p></blockquote><p id="528c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它非常类似于while循环，但是在第一次迭代时表现不同。让我们看另一个例子。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="od oe l"/></div></figure><blockquote class="oy oz pa"><p id="4193" class="kw kx pb ky b kz la jr lb lc ld ju le pc lg lh li pd lk ll lm pe lo lp lq lr ij bi translated"><strong class="ky ir">注意:</strong>在两个例子中，我们都没有使用递增或递减操作符(例如<code class="fe ou ov ow ox b">howManyIterationsLeft--</code>、<code class="fe ou ov ow ox b">--countdown</code>)。这些运算符在Swift中已不复存在，在语言版本2.2中已被弃用。</p></blockquote><p id="4e92" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你能猜出这个循环多久运行一次吗？你可以假设它根本不会运行，因为条件说<code class="fe ou ov ow ox b">howManyIterationsLeft</code>需要大于0。</p><p id="ddf3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这就是repeat-while循环的问题。它总是至少执行一次！在上面的代码片段中，变量<code class="fe ou ov ow ox b">howManyIterationsLeft</code>的值将被打印到控制台。那样的话就是0。</p><p id="e749" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">重复循环基本上执行以下操作:</p><blockquote class="of"><p id="7739" class="og oh iq bd oi oj ok ol om on oo lr dk translated">运行这段代码，并在每次迭代后检查条件是否仍然为真。如果是这种情况，继续另一个迭代。</p></blockquote><p id="6424" class="pw-post-body-paragraph kw kx iq ky b kz op jr lb lc oq ju le lf or lh li lj os ll lm ln ot lp lq lr ij bi translated">所以让我们回顾一下while循环和repeat-while循环之间的区别。</p><p id="e4c5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">While循环:</p><ol class=""><li id="03b2" class="mk ml iq ky b kz la lc ld lf mm lj mn ln mo lr mp mq mr ms bi translated">在运行循环迭代之前评估条件。</li><li id="414e" class="mk ml iq ky b kz mt lc mu lf mv lj mw ln mx lr mp mq mr ms bi translated">在0和无限次数之间运行。</li></ol><p id="d5f5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">循环时重复:</p><ol class=""><li id="e4dc" class="mk ml iq ky b kz la lc ld lf mm lj mn ln mo lr mp mq mr ms bi translated">在运行循环迭代后计算条件。</li><li id="2ca1" class="mk ml iq ky b kz mt lc mu lf mv lj mw ln mx lr mp mq mr ms bi translated">在1和无限次数之间运行。</li></ol><p id="97de" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">相关性:</strong>while循环和repeat-while循环在Swift中同样常见。repeat-while循环可能更少使用，因为它在第一次迭代后检查，这很少有用。两者都有一个缺点，就是必须记住正确地改变用于条件的变量。如果你在这里犯了一个编程错误，代价是一个崩溃的应用程序。对我来说，这似乎很容易出错，这不是Swift的全部。</p></div><div class="ab cl my mz hu na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="ij ik il im in"><h2 id="7818" class="nf ng iq bd nh ni nj dn nk nl nm dp nn lf no np nq lj nr ns nt ln nu nv nw nx bi translated">斯威夫特经典for-loop的再现</h2><p id="6597" class="pw-post-body-paragraph kw kx iq ky b kz ny jr lb lc nz ju le lf oa lh li lj ob ll lm ln oc lp lq lr ij bi translated">这是几乎所有编程语言都有的最后一种循环。但是Swift对此并没有真正的支持。许多编程语言中的经典for循环包括以下部分:</p><ol class=""><li id="0c1b" class="mk ml iq ky b kz la lc ld lf mm lj mn ln mo lr mp mq mr ms bi translated">初始化语句。</li><li id="61e0" class="mk ml iq ky b kz mt lc mu lf mv lj mw ln mx lr mp mq mr ms bi translated">一个条件。</li><li id="64e0" class="mk ml iq ky b kz mt lc mu lf mv lj mw ln mx lr mp mq mr ms bi translated">增量/减量。</li></ol><p id="a0ba" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们先来看一个c中的例子。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="05d9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">初始化语句是<code class="fe ou ov ow ox b">int counter = 1</code>。用分号分隔，然后是条件，之后是用于条件的变量的增量。</p><p id="ea8b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们仍然需要自己改变条件变量，但是语法迫使我们记住它。</p><p id="d3e9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Swift没有提供这样的for循环，但是我们可以用<a class="ae kv" href="https://developer.apple.com/documentation/swift/1641347-stride" rel="noopener ugc nofollow" target="_blank"> stride </a>函数重新创建它。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="6ee9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它实际上已经是一个for-in-loop了，但是我想先给你们展示一个更经典的变体。</p><blockquote class="oy oz pa"><p id="bec2" class="kw kx pb ky b kz la jr lb lc ld ju le pc lg lh li pd lk ll lm pe lo lp lq lr ij bi translated"><strong class="ky ir">注意:</strong>注意，stride函数不包括序列的结尾(第二个参数<code class="fe ou ov ow ox b">to</code>)。因此，为了打印从1到10的值，我们必须传递11。</p></blockquote><p id="48c7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">相关性:</strong>我想跟你说实话，在6年多的Swift编程中，我还没有见过或使用过带stride函数的for-in-loop。如果你想忘记这篇文章中的一条信息，那么很明显是这个解决方案。我看到的唯一原因是当你想要一个不同于1的增量时。您可以将2、-5或10传递给<code class="fe ou ov ow ox b">by</code>参数。尽管如此，Swift还有一种更常见的循环类型，我们接下来要看一看。</p></div><div class="ab cl my mz hu na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="ij ik il im in"><h2 id="a74d" class="nf ng iq bd nh ni nj dn nk nl nm dp nn lf no np nq lj nr ns nt ln nu nv nw nx bi translated">Swift中基于范围的for-in-loop</h2><p id="1eab" class="pw-post-body-paragraph kw kx iq ky b kz ny jr lb lc nz ju le lf oa lh li lj ob ll lm ln oc lp lq lr ij bi translated">我们研究了许多可用的选项，它们的相关性都很低。Swift为我们提供了一种for-in-loop，它可以采用多种不同的形状，绝对是所有循环类型中最重要的一种。</p><p id="978e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们从一个循环开始，我们只对索引或者计数器感兴趣。这一次是以一种更快捷的方式。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="6d4c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它更容易阅读，而且完全符合你的想法。它在我们提供的范围内迭代，包括下限和上限。在上面的例子中，它将迭代从1到10的数字，并将它们全部打印到控制台。</p><p id="59f7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我已经告诉过您，Swift中的for-in-loop非常通用。那么我们是否也可以排除上界呢？</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="89e2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">控制台会看到从0到59的数字。</p><p id="2f46" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如您所见，半开范围操作符(<code class="fe ou ov ow ox b">..&lt;</code>)在快速循环中也能工作。您甚至可以为范围操作符使用常量或变量。</p><p id="90c4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">同样，我们不需要自己处理计数。</p><p id="1404" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在for循环中递减怎么样？</p><p id="8a4d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以像这样简单地反转范围:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="f66f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这仍然会打印出0到59的数字。但顺序颠倒了，所以这正是我们要找的。</p><p id="d226" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">相关性:</strong>我并不是每天都使用这种方法，因为我们接下来会看到一个更常见的解决方案。除此之外，我认为你应该知道如何使用for-in-loop的变体，因为你会不时地需要它。我倾向于每月使用2-3次，在这种情况下知道这一点是有好处的。</p></div><div class="ab cl my mz hu na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="ij ik il im in"><h2 id="aa1f" class="nf ng iq bd nh ni nj dn nk nl nm dp nn lf no np nq lj nr ns nt ln nu nv nw nx bi translated">用for-in-loop迭代序列</h2><p id="8d5f" class="pw-post-body-paragraph kw kx iq ky b kz ny jr lb lc nz ju le lf oa lh li lj ob ll lm ln oc lp lq lr ij bi translated">现在让我们来看看我在Swift中处理循环时最常用的解决方案。</p><p id="071a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所以，我们先来了解一下，在用循环编程的时候，我们大部分时间都在做什么。</p><p id="af98" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为什么我们首先要循环？大多数时候，这是因为我们希望对经常来自外部来源(例如，用户输入或网络请求)的一定数量的元素反复执行操作。</p><p id="5722" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们现在可以获得元素的数量，然后使用上面基于索引的解决方案。让我们看看代码:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="4633" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在上面的代码片段中，我们有3只动物。我们用一个索引对它们进行迭代，访问数组索引处的元素，并用字符串插值将其打印出来。</p><p id="0386" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然而，这仍然容易出错。想象一下，我们会不小心使用了以下范围:</p><pre class="kg kh ki kj gt pf ox pg ph aw pi bi"><span id="8379" class="nf ng iq ox b gy pj pk l pl pm">1..&lt;animals.count</span></pre><p id="1eb6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这将导致我们不打印狗到控制台。或者这样如何:</p><pre class="kg kh ki kj gt pf ox pg ph aw pi bi"><span id="ddb4" class="nf ng iq ox b gy pj pk l pl pm">0...animals.count</span></pre><p id="ef25" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这甚至会使我们的应用程序崩溃，因为我们试图访问索引中不可用的元素。</p><p id="6c97" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当然，在打印数值时，所有这些都不那么重要。无论如何，这同样适用于关键的业务逻辑，比如从一个银行账户到另一个账户的转账。当你没有对其中一项交易应用货币汇率时，就会出现问题。</p><p id="7d5b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所以让我们用一种更好的方法来重温上面的例子。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="231f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">那看起来更好！但是它是如何工作的呢？它实际上遍历序列(在本例中是一个数组)，并为每次迭代创建一个这些值的常数，然后我们可以在循环中使用它。</p><p id="a298" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里我们不需要处理索引。我们可以简单地使用元素。</p><p id="d190" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这和字典有什么关系？这是代码。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="9c17" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你可以看到，我们使用了相同的循环，但是这一次，我们可以用<code class="fe ou ov ow ox b">key</code>属性访问动物的键，用<code class="fe ou ov ow ox b">value</code>属性访问值。</p><blockquote class="oy oz pa"><p id="0fad" class="kw kx pb ky b kz la jr lb lc ld ju le pc lg lh li pd lk ll lm pe lo lp lq lr ij bi translated"><strong class="ky ir">你知道吗:</strong>你可以在Swift中使用表情符号。您甚至可以将它们用作变量名，但是我建议避免这样做。这使得访问它们变得更加困难。</p></blockquote><p id="6599" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我将省略<a class="ae kv" href="https://developer.apple.com/documentation/swift/set" rel="noopener ugc nofollow" target="_blank">集合</a>，因为从循环的角度来看，它们与数组的工作方式相同。你只需要知道，集合没有重复。但是要小心！他们也没有被命令！这可能会产生一些意想不到的副作用。</p><p id="a2c3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是如果你仍然需要元素的索引呢？如果要打印出类似<em class="pb"> 0:狗</em>、<em class="pb"> 1:猫</em>、<em class="pb"> 2:鱼</em>的东西怎么办？或者其他什么原因，还需要知道元素的索引？</p><p id="3628" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">for-in-loop是非常通用的，也有一个解决方案！您可以在数组上使用函数<a class="ae kv" href="https://developer.apple.com/documentation/swift/enumeratedsequence" rel="noopener ugc nofollow" target="_blank">枚举</a>，并访问索引和元素。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="5959" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">枚举函数将创建一个具有结构<em class="pb"> (n，x) </em>的元组，其中<em class="pb"> n </em>是从零开始的元素的索引，<em class="pb"> x </em>是元素本身。</p><p id="958b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这样，我们可以访问实际元素旁边的索引，并在同一个循环中使用这两个值，而无需修改索引或访问原始元素数组。</p><p id="1cd6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">相关性:我已经提到过，与其他循环类型相比，我更喜欢这个变体中的循环。它非常通用，你可以访问索引和元素，或者同时访问两者。请确保您已经习惯了该语法，因为您会一遍又一遍地看到它。</p></div><div class="ab cl my mz hu na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="ij ik il im in"><h2 id="4907" class="nf ng iq bd nh ni nj dn nk nl nm dp nn lf no np nq lj nr ns nt ln nu nv nw nx bi translated">在Swift中使用循环的替代方案</h2><p id="e38a" class="pw-post-body-paragraph kw kx iq ky b kz ny jr lb lc nz ju le lf oa lh li lj ob ll lm ln oc lp lq lr ij bi translated">对于循环，有两种选择，你应该知道。</p><p id="e78b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">递归:</strong></p><p id="267b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，有递归。递归意味着你有一个调用自己的函数，但是有不同的输入参数。这样，你就可以创建一个循环，而不需要真正的循环。</p><p id="fd94" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们看一个代码示例。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="a550" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们只调用一次<code class="fe ou ov ow ox b">printAnimal</code>函数(在第12行)。但是，它仍然会通过调用自己来打印出所有的动物。当我们到达动物数组的最后一个索引时，它停止，并简单地打印出它的值。你会发现没有循环。</p><p id="2f05" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">相关性:对我来说，递归更难理解和思考。不时挑战自己，尝试不同的方法来解决一个共同的问题是有意义的。这拓宽了我们的思维，让我们能够接受新的解决方案。无论如何，在生产代码中，我倾向于使用循环而不是递归。</p><p id="a740" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">高阶函数:</strong></p><p id="28bc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如今，第二种选择更加普遍。随着函数式编程的兴起，循环的替代方案也以高阶函数的形式出现了。我不能涵盖所有的，但我想给你看一个地图功能的例子。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="31ce" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它实际上会打印出所有的动物，就像我们之前打印循环一样。</p><p id="80ac" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">map函数对于转换集合的元素很有用。高阶函数可以一个接一个地链接在一起，你甚至可以将映射函数传递给它们。</p><p id="03b8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果这让您的问题多于答案，我强烈推荐这本关于Swift高阶函数的优秀指南:</p><div class="ls lt gp gr lu lv"><a href="https://abhimuralidharan.medium.com/higher-order-functions-in-swift-filter-map-reduce-flatmap-1837646a63e8" rel="noopener follow" target="_blank"><div class="lw ab fo"><div class="lx ab ly cl cj lz"><h2 class="bd ir gy z fp ma fr fs mb fu fw ip bi translated">Swift中的高阶函数:Filter、Map、Reduce、flatmap、compactMap</h2><div class="mc l"><h3 class="bd b gy z fp ma fr fs mb fu fw dk translated">自从我详细了解了函数和闭包之后，我想知道更多关于…的优点和用法</h3></div><div class="md l"><p class="bd b dl z fp ma fr fs mb fu fw dk translated">abhimuralidharan.medium.com</p></div></div><div class="me l"><div class="pn l mg mh mi me mj kp lv"/></div></div></a></div><p id="bceb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">相关性:随着我最近的项目大量使用函数式反应式编程(FRP)，我也越来越经常地使用这些高阶函数。无论如何，当我真的很难让一些东西工作时，我仍然试图在切换到高阶函数之前先在一个循环中解决它。然而，这绝对是你需要知道的一件事，这样你才能称自己为快速开发专家。</p></div><div class="ab cl my mz hu na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="ij ik il im in"><h2 id="2a67" class="nf ng iq bd nh ni nj dn nk nl nm dp nn lf no np nq lj nr ns nt ln nu nv nw nx bi translated">结论</h2><p id="d770" class="pw-post-body-paragraph kw kx iq ky b kz ny jr lb lc nz ju le lf oa lh li lj ob ll lm ln oc lp lq lr ij bi translated">我的Swift循环指南到此结束。因为你会经常见到他们，所以真正对他们感到舒适是很重要的。不管怎样，如果你是一个macOS，iOS，tvOS，watchOS，或者任何其他开发者，你会在你进入的许多项目中发现循环。</p><p id="af11" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">即使随着函数式反应式编程的兴起，循环，尤其是它们背后的思想仍然是一个核心的构建模块，你需要理解它才能掌握你的技能。</p><p id="9549" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">感谢您的时间，并与循环玩得开心！</p></div></div>    
</body>
</html>