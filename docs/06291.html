<html>
<head>
<title>How to Restart FastAPI Server with Bash Script</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Bash脚本重启FastAPI服务器</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-restart-fastapi-server-with-bash-script-f05a5bfcec5c?source=collection_archive---------1-----------------------#2020-11-12">https://levelup.gitconnected.com/how-to-restart-fastapi-server-with-bash-script-f05a5bfcec5c?source=collection_archive---------1-----------------------#2020-11-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="400d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">一个简单的窍门让你的生活更轻松</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/9c6bc053ececba09abd00b88b8a13bdd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YH_zfktV-QwoIB65qCWmAw.jpeg"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">照片由<a class="ae le" href="https://unsplash.com/@_imkiran?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Sai Kiran Anagani </a>在<a class="ae le" href="https://unsplash.com/s/photos/automation?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="1a93" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">通过阅读这篇文章，您将学会创建一个bash脚本，该脚本可以自动执行FastAPI服务器(生产)的重启过程。如您所知，您可以在开发过程中使用reload参数重启服务器。</p><pre class="kp kq kr ks gt lf lg lh li aw lj bi"><span id="6123" class="lk ll it lg b gy lm ln l lo lp">uvicorn myapp:app --reload</span></pre><p id="b7fd" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">当FastAPI(uvicon ASGI)检测到文件中的变化时，它将为您触发一次重新加载。但是，您不应该对生产服务器使用<code class="fe lq lr ls lg b">reload</code>参数。这仅仅是因为它会占用你的CPU资源来检测本地文件的变化。</p><p id="046a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">大多数时候，您会使用<code class="fe lq lr ls lg b">nohup</code>和<code class="fe lq lr ls lg b">&amp;</code>参数来部署它，这允许进程继续在后台运行。因此，可能会出现您只想重新启动FastAPI服务器的情况:</p><ul class=""><li id="00ad" class="lt lu it js b jt ju jx jy kb lv kf lw kj lx kn ly lz ma mb bi translated">更新配置文件</li><li id="107f" class="lt lu it js b jt mc jx md kb me kf mf kj mg kn ly lz ma mb bi translated">错误修复</li><li id="ef05" class="lt lu it js b jt mc jx md kb me kf mf kj mg kn ly lz ma mb bi translated">添加新功能</li></ul></div><div class="ab cl mh mi hx mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="im in io ip iq"><h1 id="f4a2" class="mo ll it bd mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk bi translated">手动重启</h1><p id="8ca3" class="pw-post-body-paragraph jq jr it js b jt nl jv jw jx nm jz ka kb nn kd ke kf no kh ki kj np kl km kn im bi translated">我重启FastAPI服务器的常用程序如下:</p><ul class=""><li id="c0e3" class="lt lu it js b jt ju jx jy kb lv kf lw kj lx kn ly lz ma mb bi translated">检查运行FastAPI服务器的进程ID</li><li id="9cdd" class="lt lu it js b jt mc jx md kb me kf mf kj mg kn ly lz ma mb bi translated">终止或终止进程</li><li id="28bf" class="lt lu it js b jt mc jx md kb me kf mf kj mg kn ly lz ma mb bi translated">清理nohup文件</li><li id="3f55" class="lt lu it js b jt mc jx md kb me kf mf kj mg kn ly lz ma mb bi translated">启动FastAPI服务器</li></ul><h2 id="10e7" class="lk ll it bd mp nq nr dn mt ns nt dp mx kb nu nv nb kf nw nx nf kj ny nz nj oa bi translated">检查运行FastAPI服务器的进程ID</h2><p id="8431" class="pw-post-body-paragraph jq jr it js b jt nl jv jw jx nm jz ka kb nn kd ke kf no kh ki kj np kl km kn im bi translated">有多种方法可以检查正在运行的FastAPI服务器所使用的PID。例如，通过<code class="fe lq lr ls lg b">netstat</code>命令检查。</p><pre class="kp kq kr ks gt lf lg lh li aw lj bi"><span id="11bc" class="lk ll it lg b gy lm ln l lo lp">netstat -tulpn</span></pre><p id="dc24" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">它将与<code class="fe lq lr ls lg b">Local Address</code>一起显示<code class="fe lq lr ls lg b">PID/Program name</code>列表。一个主要的缺点是，您必须记住服务器使用的端口，因为FastAPI服务器的<code class="fe lq lr ls lg b">Program name</code>将被列为<code class="fe lq lr ls lg b">python</code>。如果你在运行多个python应用，你只能通过<code class="fe lq lr ls lg b">Local Address</code> (IP和端口)来区分每一个。</p><p id="133d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">另一种方法是依靠<code class="fe lq lr ls lg b">ps</code>命令，该命令显示与特定过程相关的详细信息。可以和<code class="fe lq lr ls lg b">grep</code>(全局正则表达式打印)命令配对，通过regex找到想要的进程。假设您的服务器使用以下命令启动。</p><pre class="kp kq kr ks gt lf lg lh li aw lj bi"><span id="73ba" class="lk ll it lg b gy lm ln l lo lp">nohup uvicorn myapp:app &amp;</span></pre><p id="a817" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您可以使用以下命令获得服务器的PID</p><pre class="kp kq kr ks gt lf lg lh li aw lj bi"><span id="21cf" class="lk ll it lg b gy lm ln l lo lp">ps aux | grep 'uvicorn myapp:app'</span></pre><p id="2119" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您可以指定<code class="fe lq lr ls lg b">aux</code>选项来返回与用户、所有进程和终端相关的信息。如果一切正常，您应该在控制台上看到两个PID。一个代表运行在机器上的FastAPI服务器，另一个代表grep进程。</p><pre class="kp kq kr ks gt lf lg lh li aw lj bi"><span id="428b" class="lk ll it lg b gy lm ln l lo lp">grep --color=auto uvicorn myapp:app</span></pre><p id="ce2f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">事实上，您可以通过在命令中添加<code class="fe lq lr ls lg b">grep -v grep</code>来排除grep进程。</p><pre class="kp kq kr ks gt lf lg lh li aw lj bi"><span id="755d" class="lk ll it lg b gy lm ln l lo lp">ps aux | grep 'uvicorn myapp:app' | grep -v grep</span></pre><h2 id="721f" class="lk ll it bd mp nq nr dn mt ns nt dp mx kb nu nv nb kf nw nx nf kj ny nz nj oa bi translated">终止或终止进程</h2><p id="cfe3" class="pw-post-body-paragraph jq jr it js b jt nl jv jw jx nm jz ka kb nn kd ke kf no kh ki kj np kl km kn im bi translated">一旦有了FastAPI服务器的PID，就可以使用kill -9 PID正常终止或终止进程。假设您的PID是12345，您应该如下运行它:</p><pre class="kp kq kr ks gt lf lg lh li aw lj bi"><span id="fedf" class="lk ll it lg b gy lm ln l lo lp">kill -9 12345</span></pre><p id="f4bf" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">你可以选择用<code class="fe lq lr ls lg b">-15</code>而不是<code class="fe lq lr ls lg b">-9</code>优雅地杀死它，这取决于服务器的复杂性和配置。</p><h2 id="980b" class="lk ll it bd mp nq nr dn mt ns nt dp mx kb nu nv nb kf nw nx nf kj ny nz nj oa bi translated">清理nohup文件</h2><p id="f16c" class="pw-post-body-paragraph jq jr it js b jt nl jv jw jx nm jz ka kb nn kd ke kf no kh ki kj np kl km kn im bi translated">默认情况下，该流程会将所有消息输出到一个名为<code class="fe lq lr ls lg b">nohup.out</code>的文件中，除非您明确指定了自己的文件。我更喜欢每次都清除它，以便于调试和维护。您可以通过运行来轻松清除它</p><pre class="kp kq kr ks gt lf lg lh li aw lj bi"><span id="40d8" class="lk ll it lg b gy lm ln l lo lp">echo "" &gt; nohup.out</span></pre><h2 id="9737" class="lk ll it bd mp nq nr dn mt ns nt dp mx kb nu nv nb kf nw nx nf kj ny nz nj oa bi translated">启动FastAPI服务器</h2><p id="2ffe" class="pw-post-body-paragraph jq jr it js b jt nl jv jw jx nm jz ka kb nn kd ke kf no kh ki kj np kl km kn im bi translated">之后，您可以通过以下方式正常启动FastAPI服务器</p><pre class="kp kq kr ks gt lf lg lh li aw lj bi"><span id="d5d7" class="lk ll it lg b gy lm ln l lo lp">nohup uvicorn myapp:app &amp;</span></pre><p id="db5f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">当您需要多次重新启动时，手动方式既耗时又令人畏惧。此外，你可能会在这个过程中犯错误。</p></div><div class="ab cl mh mi hx mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="im in io ip iq"><h1 id="4021" class="mo ll it bd mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk bi translated">通过Bash脚本重启</h1><p id="7105" class="pw-post-body-paragraph jq jr it js b jt nl jv jw jx nm jz ka kb nn kd ke kf no kh ki kj np kl km kn im bi translated">利用bash脚本来自动化重启过程更加可靠和简单。首先，创建一个名为<code class="fe lq lr ls lg b">restart_server.sh</code>的新文件。您需要为它提供足够的权限。建议的方法是</p><pre class="kp kq kr ks gt lf lg lh li aw lj bi"><span id="7f77" class="lk ll it lg b gy lm ln l lo lp">chmod 755 restart_server.sh</span></pre><p id="ae87" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在文件的顶部添加下面的shebang。这确保了我们的文件将使用bash shell来解释和执行。</p><pre class="kp kq kr ks gt lf lg lh li aw lj bi"><span id="535f" class="lk ll it lg b gy lm ln l lo lp">#!/bin/bash</span></pre><p id="50b7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">接下来，您应该将目录更改为项目的根目录。强烈建议使用绝对路径，以确保脚本可以在您喜欢的任何地方调用。如果您的项目使用虚拟环境，您也应该激活它。</p><p id="ef3b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">将以下命令添加到您的文件中。确保相应地修改路径。</p><pre class="kp kq kr ks gt lf lg lh li aw lj bi"><span id="2d8f" class="lk ll it lg b gy lm ln l lo lp">source /home/project/myenv/bin/activate<br/>cd /home/project/server</span></pre><p id="d0b5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们的脚本应该在以下任务中完美工作:</p><ul class=""><li id="4433" class="lt lu it js b jt ju jx jy kb lv kf lw kj lx kn ly lz ma mb bi translated">如果服务器尚未运行，请正常启动它</li><li id="f0a6" class="lt lu it js b jt mc jx md kb me kf mf kj mg kn ly lz ma mb bi translated">如果存在现有的服务器，终止进程并启动服务器</li></ul><h2 id="ae2c" class="lk ll it bd mp nq nr dn mt ns nt dp mx kb nu nv nb kf nw nx nf kj ny nz nj oa bi translated">检查运行FastAPI服务器的进程ID</h2><p id="58a5" class="pw-post-body-paragraph jq jr it js b jt nl jv jw jx nm jz ka kb nn kd ke kf no kh ki kj np kl km kn im bi translated">为了完成它们，我们需要识别正在运行的进程并获得它们的ID。让我们稍微修改一下上面的<code class="fe lq lr ls lg b">ps</code>命令。我将使用两个额外的命令来传输它，并将其存储为一个变量。</p><pre class="kp kq kr ks gt lf lg lh li aw lj bi"><span id="f2b0" class="lk ll it lg b gy lm ln l lo lp">PID=$(ps aux | grep 'uvicorn myapp:app' | grep -v grep | awk {'print $2'} | xargs)</span></pre><p id="f4b3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">第一个加法是<code class="fe lq lr ls lg b">awk {‘print $2’}</code>，它排除了所有输出，只打印PID值。假设它检测到ID为1234和1235的两个进程。输出将是</p><pre class="kp kq kr ks gt lf lg lh li aw lj bi"><span id="9d28" class="lk ll it lg b gy lm ln l lo lp">1234<br/>1235</span></pre><p id="8662" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">为了将输出转换成命令，需要指定代表<code class="fe lq lr ls lg b">e<strong class="js iu">X</strong>tended <strong class="js iu">ARG</strong>uments</code>的<code class="fe lq lr ls lg b">xargs</code>命令。它将按如下方式转换输出:</p><pre class="kp kq kr ks gt lf lg lh li aw lj bi"><span id="cfd8" class="lk ll it lg b gy lm ln l lo lp">1234 1235</span></pre><p id="7d2d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">一旦我们完成了，通过下面的语法将它存储在一个变量中</p><pre class="kp kq kr ks gt lf lg lh li aw lj bi"><span id="678b" class="lk ll it lg b gy lm ln l lo lp">variable_name=$(your_command)</span></pre><h2 id="ad09" class="lk ll it bd mp nq nr dn mt ns nt dp mx kb nu nv nb kf nw nx nf kj ny nz nj oa bi translated">终止或终止进程+清理nohup文件</h2><p id="7d49" class="pw-post-body-paragraph jq jr it js b jt nl jv jw jx nm jz ka kb nn kd ke kf no kh ki kj np kl km kn im bi translated">变量是通过美元符号前缀引用的</p><pre class="kp kq kr ks gt lf lg lh li aw lj bi"><span id="9548" class="lk ll it lg b gy lm ln l lo lp">$variable_name</span></pre><p id="de3a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">终止所有正在运行的进程的命令如下:</p><pre class="kp kq kr ks gt lf lg lh li aw lj bi"><span id="b817" class="lk ll it lg b gy lm ln l lo lp">kill -9 $PID</span></pre><p id="946b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在此之前，让我们将其封装在一个条件语句中，以检查是否有任何现有的进程正在运行。这种方法的优点是，我们可以向运行这个bash脚本的用户提供一些反馈。此外，我将在重新启动时间之前诱导2秒钟的等待时间，以防止端口冲突问题。<code class="fe lq lr ls lg b">nohup</code>之后文件也会被清除。</p><pre class="kp kq kr ks gt lf lg lh li aw lj bi"><span id="a1df" class="lk ll it lg b gy lm ln l lo lp">if [ "$PID" != "" ]<br/>then<br/>kill -9 $PID<br/>sleep 2<br/>echo "" &gt; nohup.out<br/>echo "Restarting FastAPI server"<br/>else<br/>echo "No such process. Starting new FastAPI server"<br/>fi</span></pre><h2 id="438b" class="lk ll it bd mp nq nr dn mt ns nt dp mx kb nu nv nb kf nw nx nf kj ny nz nj oa bi translated">启动FastAPI服务器</h2><p id="4be4" class="pw-post-body-paragraph jq jr it js b jt nl jv jw jx nm jz ka kb nn kd ke kf no kh ki kj np kl km kn im bi translated">最后，您可以通过以下方式正常启动服务器</p><pre class="kp kq kr ks gt lf lg lh li aw lj bi"><span id="f5c5" class="lk ll it lg b gy lm ln l lo lp">nohup uvicorn myapp:app &amp;</span></pre><p id="1fed" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">重启FastAPI服务器的完整bash脚本可以在下面的<a class="ae le" href="https://gist.github.com/wfng92/8211e05134e66285d83a8b06f1c0c7ff" rel="noopener ugc nofollow" target="_blank">要点</a>中找到。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="ob oc l"/></div></figure><h2 id="a5c1" class="lk ll it bd mp nq nr dn mt ns nt dp mx kb nu nv nb kf nw nx nf kj ny nz nj oa bi translated">调用Bash脚本</h2><p id="1ecc" class="pw-post-body-paragraph jq jr it js b jt nl jv jw jx nm jz ka kb nn kd ke kf no kh ki kj np kl km kn im bi translated">您可以将bash脚本放在您喜欢的任何地方。我通常将它直接放在FastAPI服务器的根目录中。简单地打电话</p><pre class="kp kq kr ks gt lf lg lh li aw lj bi"><span id="9ddb" class="lk ll it lg b gy lm ln l lo lp">./path/to/file/restart_server.sh</span></pre><p id="3cb6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果您直接在同一个中，您可以如下运行它:</p><pre class="kp kq kr ks gt lf lg lh li aw lj bi"><span id="f925" class="lk ll it lg b gy lm ln l lo lp">./restart_server.sh</span></pre><h2 id="e289" class="lk ll it bd mp nq nr dn mt ns nt dp mx kb nu nv nb kf nw nx nf kj ny nz nj oa bi translated">处理多个工人</h2><p id="7e82" class="pw-post-body-paragraph jq jr it js b jt nl jv jw jx nm jz ka kb nn kd ke kf no kh ki kj np kl km kn im bi translated">如果您的服务器在多个工作线程上运行</p><pre class="kp kq kr ks gt lf lg lh li aw lj bi"><span id="7577" class="lk ll it lg b gy lm ln l lo lp">nohup uvicorn myapp:app --workers 4 &amp;</span></pre><p id="8514" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们创建的脚本将无法正常工作，因为uvicorn使用多重处理在幕后产生了多个进程。您可以通过以下方式轻松识别它们</p><pre class="kp kq kr ks gt lf lg lh li aw lj bi"><span id="c39f" class="lk ll it lg b gy lm ln l lo lp">ps aux | grep 'python -c from multiprocessing'</span></pre><p id="6f03" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">但是，有一个小风险，即其他程序在同一个服务器上运行多处理。为了解决此问题，您可以将虚拟环境路径包括在一起，如下所示:</p><pre class="kp kq kr ks gt lf lg lh li aw lj bi"><span id="471d" class="lk ll it lg b gy lm ln l lo lp">ps aux | grep '/home/project/myenv/python -c from multiprocessing'</span></pre><p id="d83a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们需要做的就是在我们的文件中包含这个命令和随后的<code class="fe lq lr ls lg b">kill -9</code>命令。查看下面的<a class="ae le" href="https://gist.github.com/wfng92/4882be87a5017508e92fa11198a1d9e8" rel="noopener ugc nofollow" target="_blank">要点</a>获得完整的bash脚本。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="ob oc l"/></div></figure></div><div class="ab cl mh mi hx mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="im in io ip iq"><h1 id="8503" class="mo ll it bd mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk bi translated">结论</h1><p id="7760" class="pw-post-body-paragraph jq jr it js b jt nl jv jw jx nm jz ka kb nn kd ke kf no kh ki kj np kl km kn im bi translated">让我们回顾一下今天所学的内容。</p><p id="4102" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们从一个简短的问题陈述开始，这个问题陈述是关于开发人员在重启FastAPI服务器时所面临的棘手问题。</p><p id="b802" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">接下来，我们深入探讨了手动重启FastAPI服务器所涉及的步骤。整个工作流程非常繁琐，容易出现人为错误。</p><p id="a742" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们继续前进，创建了一个简单的bash脚本，它自动化了服务器终止和服务器启动过程。我们可以简单地调用bash脚本来重启FastAPI服务器。</p><p id="b417" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">之后，我们对文件做了一些小的修改，以处理由多个workers启动的FastAPI服务器。</p><p id="905f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">感谢你阅读这篇文章。希望在下一篇文章中再见到你！</p></div><div class="ab cl mh mi hx mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="im in io ip iq"><h1 id="0016" class="mo ll it bd mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk bi translated">参考</h1><ol class=""><li id="e02b" class="lt lu it js b jt nl jx nm kb od kf oe kj of kn og lz ma mb bi translated"><a class="ae le" href="https://gist.github.com/wfng92/8211e05134e66285d83a8b06f1c0c7ff" rel="noopener ugc nofollow" target="_blank">重启FastAPI服务器要点</a></li><li id="ff11" class="lt lu it js b jt mc jx md kb me kf mf kj mg kn og lz ma mb bi translated"><a class="ae le" href="https://gist.github.com/wfng92/4882be87a5017508e92fa11198a1d9e8" rel="noopener ugc nofollow" target="_blank">重启多工人FastAPI服务器要点</a></li></ol></div></div>    
</body>
</html>