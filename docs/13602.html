<html>
<head>
<title>How To Design A Relational Database Schema</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何设计关系数据库模式</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-design-a-relational-database-schema-1f0ee48d4567?source=collection_archive---------3-----------------------#2022-09-20">https://levelup.gitconnected.com/how-to-design-a-relational-database-schema-1f0ee48d4567?source=collection_archive---------3-----------------------#2022-09-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="97a6" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用Spotify数据设计数据库</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/c4950e30cdaf8bdedef9b7c5c872420f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*cqMxQrMJ9c13Z_lg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">图片由<a class="ae ky" href="https://unsplash.com/@tofi" rel="noopener ugc nofollow" target="_blank"> @tofi </a>来自<a class="ae ky" href="https://unsplash.com/photos/PkbZahEG2Ng" rel="noopener ugc nofollow" target="_blank"> Unsplash </a></figcaption></figure><p id="ee07" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在处理项目的数据库时，设计关系模式是最重要的。这是为数据库创建规则和管理不同表之间关系的一种方式。一个好的关系模式将产生一个灵活的、易于维护的数据库，使您在项目中操作的数据更容易处理。</p><h1 id="5d30" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">检查数据</h1><p id="4776" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">设计关系模式的第一步是查看可用的数据。在本教程中，我将使用Spotify数据来获取他们的歌曲、音频属性、播放列表和图表。以下是与我们的目的最相关的数据:</p><ul class=""><li id="b087" class="ms mt it lb b lc ld lf lg li mu lm mv lq mw lu mx my mz na bi translated"><strong class="lb iu">曲目(歌曲)</strong>:人气、发行日期、音频属性</li><li id="b916" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated"><strong class="lb iu">音频属性</strong>:可跳性、效价和能量</li><li id="5400" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated"><strong class="lb iu">播放列表</strong>:流派、日期、关注者和曲目</li><li id="dad8" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated"><strong class="lb iu">热门曲目排行榜</strong>:热门曲目所在国家，曲目及其在排行榜上的排名</li></ul><h1 id="6913" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">设计模式</h1><p id="8a7e" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">当设计一个模式时，有一些主要的事情要记住:每个表必须包含一个唯一的键，最小化冗余和空值。键是唯一的一组数据，不能在同一个表中重复。在我们的设计中，我们希望有一种方法将一个表中的数据与其他表连接起来，或者直接连接，或者通过一系列的表连接。使用公共属性将一个表连接到另一个表是外键概念的基础。记住所有这些，下面是根据数据设计的关系模式:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ng"><img src="../Images/2f8884ff77b225df9a6a2eef565f4337.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Bn1S7QPRTJqoCdTeH2GDQA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">Spotify数据的关系模式</figcaption></figure><p id="9100" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下划线表示该表的键。例如，曲目表有ID键，这意味着该表中没有两个曲目可以有相同的ID，但它们可以有相同的流行度。PlaylistTrack有一个组合键，这意味着PlaylistTrack可能有多个项目具有相同的trackID(意味着同一首曲目可以重复播放)，但trackID不能与同一个playlistID同时存在多次。</p><h1 id="6d94" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">数据字典</h1><p id="b069" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">数据字典本质上是对表中包含的数据的描述，此外还有数据的类型，如果需要的话(可能不为空)。每个数据字典都应该是合理的，以显示底层的决策过程。</p><p id="4596" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是我们的关系模式中几个表的数据字典:</p><h2 id="ad23" class="nh lw it bd lx ni nj dn mb nk nl dp mf li nm nn mh lm no np mj lq nq nr ml ns bi translated">轨道数据字典</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nt"><img src="../Images/1347a6c41634e1627f531df694b58d30.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WjPNlnpVt5z93OkrqSgc8A.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">轨道数据字典</figcaption></figure><p id="3795" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">每个轨道都有一些通过其ID与之相关的一般信息。我们调查需要的两条主要信息是流行度和发行日期。流行度是衡量一首曲目被听了多少的必要条件，我们可以通过曲目ID将流行度与曲目属性联系起来，以得出关于收听习惯的结论。发行日期对于理解随时间发行的音乐类型的趋势是重要的。将发行日期与音频属性和流派联系起来可以揭示关于在一年中的特定时间发行的曲目类型的信息，以及根据音乐的属性这些年来的演变。由于曲目ID是唯一的，而流行度和发行日期不是唯一的(几首曲目可能有相同的流行度或发行日期)，我们选择曲目ID作为该表的关键字。</p><h2 id="5dc9" class="nh lw it bd lx ni nj dn mb nk nl dp mf li nm nn mh lm no np mj lq nq nr ml ns bi translated">轨道属性数据字典</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/752fef1788318ba9242e1af2c72eed2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WBmsbpzo_27htIqxgOd99Q.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">轨道属性数据字典</figcaption></figure><p id="0587" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">每个音轨都被分析，其主要的音频特征被编辑，包括它的可跳舞性、效价和能量。每个轨道具有以字符串ID的形式分配给它的全局唯一标识符，通过该标识符可以检索关于轨道的任何信息。因为一个音轨的ID是唯一的，但是它的名字不是，我们选择使用ID作为键来确保没有冗余。轨道具有以下音频质量:</p><ul class=""><li id="74b6" class="ms mt it lb b lc ld lf lg li mu lm mv lq mw lu mx my mz na bi translated">声音</li><li id="7d51" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated">活力</li><li id="b032" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated">工具性</li><li id="3f42" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated">活性</li><li id="e8a5" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated">音量</li><li id="8f2c" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated">语音</li><li id="af10" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated">拍子</li><li id="e6ab" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated">效价</li></ul><p id="b79d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我选择关注可舞性、效价和能量，因为它们包含了其他音频质量，也是音轨如何影响听众的预测因素。例如，一首效价、能量和可舞性高的曲目可能会引发积极的情绪反应。然而，我们不能根据音轨的语音、乐器和声音来判断一个响应。</p><h2 id="e134" class="nh lw it bd lx ni nj dn mb nk nl dp mf li nm nn mh lm no np mj lq nq nr ml ns bi translated">艺术家音轨数据字典</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nv"><img src="../Images/93d5bc6879ef839e1ccde30946fee65f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2YtDhsubFr9WJMOZ5QuXxA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">艺术家音轨数据字典</figcaption></figure><p id="404d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一个艺术家可能有许多曲目，并且需要知道哪些曲目属于哪些艺术家，以将曲目音频属性和流行度与艺术家流行度和追随者相关联。曲目ID允许我们查询曲目属性表，而艺术家ID允许我们查询艺术家表。这是为减少冗余而创建的中间表；在该表中放置任何其他艺术家信息将会添加信息，该信息将针对该艺术家所拥有的曲目数量而重复。此外，向该表添加任何其他轨道信息都是多余的，因为该信息存在于轨道和轨道属性表中。我们选择了艺术家ID和音轨ID作为该表的联合关键字，因为艺术家ID可以重复，因为一个艺术家可以有几个音轨，并且音轨可以重复，因为在多个艺术家合作的情况下，多个艺术家可以有相同的音轨，但是不可能出现艺术家和音轨ID都重复的情况。</p><h1 id="5829" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">完整性约束</h1><p id="80c6" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">定义关系模式的最后一步是定义完整性约束，这些约束应用于表中的数据，以便我们可以轻松地查询数据库和逻辑地添加值。阅读完整性约束需要关系代数知识，所以我强烈推荐查找下面出现的一些符号。</p><p id="df81" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">几个很好的例子是:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/a2d2483a608751f5ad1dc8526473f829.png" data-original-src="https://miro.medium.com/v2/resize:fit:1116/format:webp/1*69TpK4ijPozrLniSOLxTiA.png"/></div></div></figure><p id="deaf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">追踪属性表中的每个ID也必须是追踪表中的ID。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/4295032ae4284f4a3df9cc1dc0439388.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*edlz-F1exvSpJzPjo0y3Uw.png"/></div></div></figure><p id="4803" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">艺术家曲目表中不应有不在艺术家表中的任何艺术家ID。本质上，这意味着不应该存在艺术家表中不存在艺术家的轨道。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/faa494f320ac92d904b99d32e5a44d95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1156/format:webp/1*Zi44KfYUMAtmCRGwW-2nfw.png"/></div></figure><p id="fc7b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不应该存在人气小于等于零的艺人。</p><h1 id="3310" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">结论</h1><p id="5323" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">设计关系模式可能是一项艰巨的任务，但是如果您一步一步地进行，从您希望收集的数据开始，然后进入您希望如何使用它，任务就会变得简单得多。对于数据库来说，基础要走很长的路，所以设计一个简单的模式是理想的；模式越复杂，就越难使用和更改。</p><p id="a64e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读，如果你喜欢，请跟我来！我定期发布这样的内容。</p></div></div>    
</body>
</html>