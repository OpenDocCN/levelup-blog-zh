<html>
<head>
<title>Implementing search with Django, Elasticsearch, and Vue.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Django、Elasticsearch和Vue.js实现搜索</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/implementing-search-with-django-elasticsearch-and-vue-js-e69a26c27e0e?source=collection_archive---------2-----------------------#2021-07-01">https://levelup.gitconnected.com/implementing-search-with-django-elasticsearch-and-vue-js-e69a26c27e0e?source=collection_archive---------2-----------------------#2021-07-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="c472" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">实施搜索功能的分步指南</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/75ef4f687f044895493e8f5c315eb01f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*71hHODDUTBGFHtoNvi0zrw.png"/></div></div></figure><p id="da2c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在这个简短的教程中，我将展示一个例子，说明如何用Django和Vue.js使用Elasticsearch实现一个搜索功能。在我们将要创建的web应用程序中，用户可以通过提供文章的标题和内容来添加新文章，如果需要，还可以添加一些标签。他们还可以从“文章列表”中搜索文章。</p><p id="aed4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">假设你已经知道什么是Elasticsearch以及我们为什么需要它(因为你在搜索中偶然发现了这篇文章)，我就不详细解释Elasticsearch了。简而言之，Elasticsearch是一个提供强大搜索功能的数据库，如全文搜索、模糊文本搜索等。我们将使用Elasticsearch来增强我们在这个web应用程序中的搜索功能。如果你有兴趣学习更多关于Elasticsearch的知识，这将是一个好的开始:<a class="ae ln" href="https://www.elastic.co/what-is/elasticsearch" rel="noopener ugc nofollow" target="_blank">https://www.elastic.co/what-is/elasticsearch</a></p><p id="3e0c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">示例应用程序看起来类似于下面的GIF。如上所述，我们可以使用页面底部的“新文章”表单添加文章，或者使用搜索栏搜索文章。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi lo"><img src="../Images/ed99895f30d6896e5d25277ff3771987.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*wRRGQHddYJtJnGun4-C9NQ.gif"/></div></div><figcaption class="lp lq gj gh gi lr ls bd b be z dk translated">使用Elasticsearch搜索功能</figcaption></figure><p id="a598" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这个示例web应用程序的完整代码可以在这个<a class="ae ln" href="https://github.com/fatse/django-elasticsearch-vuejs" rel="noopener ugc nofollow" target="_blank"> GitHub </a> repo中找到。</p><blockquote class="lt lu lv"><p id="a29c" class="kr ks lw kt b ku kv jr kw kx ky ju kz lx lb lc ld ly lf lg lh lz lj lk ll lm ij bi translated"><strong class="kt ir">使用的技术:</strong></p><p id="2790" class="kr ks lw kt b ku kv jr kw kx ky ju kz lx lb lc ld ly lf lg lh lz lj lk ll lm ij bi translated"><a class="ae ln" href="https://www.docker.com/products/docker-desktop" rel="noopener ugc nofollow" target="_blank"> Docker桌面</a><a class="ae ln" href="https://www.python.org/downloads/release/python-395/" rel="noopener ugc nofollow" target="_blank"><br/>Python</a><br/><a class="ae ln" href="https://docs.djangoproject.com/en/3.2/releases/3.1.4/" rel="noopener ugc nofollow" target="_blank">Django</a><br/><a class="ae ln" href="https://v3.vuejs.org/" rel="noopener ugc nofollow" target="_blank">vue . js</a><br/><a class="ae ln" href="https://www.django-rest-framework.org/" rel="noopener ugc nofollow" target="_blank">Django REST框架</a><br/><a class="ae ln" href="https://www.elastic.co/elasticsearch/" rel="noopener ugc nofollow" target="_blank">elastic search</a><br/><a class="ae ln" href="https://elasticsearch-dsl.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank">elastic search DSL</a></p></blockquote><p id="df2f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们将按照以下步骤构建我们的应用程序:</p><ol class=""><li id="e0f7" class="ma mb iq kt b ku kv kx ky la mc le md li me lm mf mg mh mi bi translated"><a class="ae ln" href="#b1d3" rel="noopener ugc nofollow"> <em class="lw">创建新的虚拟环境</em> </a></li><li id="a1b8" class="ma mb iq kt b ku mj kx mk la ml le mm li mn lm mf mg mh mi bi translated"><a class="ae ln" href="#7dab" rel="noopener ugc nofollow"> <em class="lw">安装Django </em> </a></li><li id="7e9a" class="ma mb iq kt b ku mj kx mk la ml le mm li mn lm mf mg mh mi bi translated"><a class="ae ln" href="#dbed" rel="noopener ugc nofollow"> <em class="lw">创建新的Django项目和新的Django应用</em> </a></li><li id="af2f" class="ma mb iq kt b ku mj kx mk la ml le mm li mn lm mf mg mh mi bi translated"><a class="ae ln" href="#95d7" rel="noopener ugc nofollow"> <em class="lw">创建REST API模型&amp;创建Elasticsearch模型</em> </a></li><li id="516d" class="ma mb iq kt b ku mj kx mk la ml le mm li mn lm mf mg mh mi bi translated"><a class="ae ln" href="#0fd0" rel="noopener ugc nofollow"> <em class="lw">使用Docker </em> </a>设置Elasticsearch &amp; Kibana服务器</li><li id="ceae" class="ma mb iq kt b ku mj kx mk la ml le mm li mn lm mf mg mh mi bi translated"><a class="ae ln" href="#1ced" rel="noopener ugc nofollow"> <em class="lw">实现Django视图</em> </a></li><li id="2d39" class="ma mb iq kt b ku mj kx mk la ml le mm li mn lm mf mg mh mi bi translated"><a class="ae ln" href="#d5ef" rel="noopener ugc nofollow"> <em class="lw">创建URL并使用DRF UI测试它们</em> </a></li><li id="dc1c" class="ma mb iq kt b ku mj kx mk la ml le mm li mn lm mf mg mh mi bi translated"><a class="ae ln" href="#7ffa" rel="noopener ugc nofollow"> <em class="lw">建立模板，添加并使用Vue.js </em> </a></li><li id="63c2" class="ma mb iq kt b ku mj kx mk la ml le mm li mn lm mf mg mh mi bi translated"><a class="ae ln" href="#f485" rel="noopener ugc nofollow"> <em class="lw">运行应用</em> </a></li></ol><p id="b1d3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi mo translated"><span class="l mp mq mr bm ms mt mu mv mw di"> 1。</span> <strong class="kt ir"> <em class="lw">创建新的虚拟环境</em> </strong> <br/>让我们从创建新的虚拟环境开始。通过这样做，我们将在每个项目的基础上隔离我们的Django设置，因此我们对项目所做的任何更改都不会影响我们可能正在开发的其他项目。</p><p id="5e65" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在您的终端中，运行下面显示的命令来创建一个新目录，并将当前目录更改为我们刚刚创建的新项目目录。</p><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="527d" class="nc nd iq my b gy ne nf l ng nh">mkdir elastico-app</span><span id="3f6f" class="nc nd iq my b gy ni nf l ng nh">cd elastico-app</span></pre><p id="a0bb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">创建并进入新目录后，我们就可以通过运行以下命令来创建新的虚拟环境了:</p><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="2333" class="nc nd iq my b gy ne nf l ng nh">python3 -m venv env</span></pre><p id="b3bb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">最后，我们需要像这样激活新的虚拟环境:</p><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="57d6" class="nc nd iq my b gy ne nf l ng nh">source env/bin/activate</span></pre><p id="7dab" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi mo translated"><span class="l mp mq mr bm ms mt mu mv mw di"> 2。</span> <strong class="kt ir"> <em class="lw">安装Django </em> </strong> <br/>现在我们可以安装我们喜欢的Django版本了。在这个例子中，我们将安装Django 3.1.4。</p><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="320e" class="nc nd iq my b gy ne nf l ng nh">(env) ~/elastico-app$ pip install Django==3.1.4</span></pre><p id="dbed" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi mo translated"><span class="l mp mq mr bm ms mt mu mv mw di"> 3。</span> <strong class="kt ir"> <em class="lw">创建一个新的Django项目和一个新的Django应用程序</em> </strong> <br/>接下来，让我们创建一个新的Django项目。我们将这个项目命名为<strong class="kt ir">django _ elastic search</strong><em class="lw">，</em>，我们将通过运行以下代码来创建它:</p><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="e493" class="nc nd iq my b gy ne nf l ng nh">(env) ~/elastico-app$ django-admin startproject django_elasticsearch</span><span id="80ef" class="nc nd iq my b gy ni nf l ng nh">(env) ~/elastico-app$ cd django_elasticsearch</span></pre><p id="d27a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">接下来，我们将创建一个新的Django应用程序。我们将这个应用程序称为<strong class="kt ir">django _ formset _ vuejs</strong><em class="lw"/>，我们将这样创建它:</p><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="d698" class="nc nd iq my b gy ne nf l ng nh">(env) ~/elastico-app/django_elasticsearch$ python manage.py startapp django_elastico_vuejs</span></pre><p id="a8ce" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">成功创建新应用程序后，我们必须将其添加到<strong class="kt ir"> settings.py </strong>文件中的<strong class="kt ir"> INSTALLED_APPS </strong>中。</p><p id="439c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="lw">注:</em>我们还得在INSTALLED_APPS中添加<em class="lw"/><strong class="kt ir">‘rest _ framework’</strong>。因此，此时INSTALLED_APPS列表如下所示:</p><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="d4ba" class="nc nd iq my b gy ne nf l ng nh">INSTALLED_APPS = [<br/>    'django.contrib.admin',<br/>    'django.contrib.auth',<br/>    'django.contrib.contenttypes',<br/>    'django.contrib.sessions',<br/>    'django.contrib.messages',<br/>    'django.contrib.staticfiles',</span><span id="eb9a" class="nc nd iq my b gy ni nf l ng nh">    'rest_framework',<br/>    'django_elastico_vuejs',<br/>]</span></pre><p id="bd88" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们的项目树应该是这样的:</p><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="6f48" class="nc nd iq my b gy ne nf l ng nh">elastico-app<br/>├── django_elastico_vuejs<br/>│   ├── admin.py<br/>│   ├── apps.py<br/>│   ├── migrations<br/>│   │   └── __init__.py<br/>│   ├── models.py<br/>│   ├── tests.py<br/>│   └── views.py<br/>├── manage.py<br/>├── django_elasticsearch<br/>│   ├── __init__.py<br/>│   ├── settings.py<br/>│   ├── urls.py<br/>│   └── wsgi.py<br/>└── env</span></pre><p id="95d7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi mo translated"><span class="l mp mq mr bm ms mt mu mv mw di"> 4。</span> <strong class="kt ir"> <em class="lw">创建API模型&amp;创建Elasticsearch模式</em></strong><em class="lw">l</em><strong class="kt ir"><br/></strong>首先，我们需要定义REST API模型，以便我们在REST API用户和我们的REST API服务器之间有一个清晰的接口。</p><p id="cb64" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">接下来，我们需要定义一个Elasticsearch文档，我们将使用它来表示存储在Elasticsearch中的可搜索数据。</p><p id="c0f6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这样，两个接口都可以独立发展。</p><p id="dc5d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们将模型保存在一个新的<strong class="kt ir"> " <em class="lw">模型</em> " </strong>文件夹中，在<strong class="kt ir"><em class="lw">django _ elastico _ vuejs</em></strong><em class="lw"/>app下。</p><h2 id="a535" class="nc nd iq bd nj nk nl dn nm nn no dp np la nq nr ns le nt nu nv li nw nx ny nz bi translated"><strong class="ak"> 4.1 </strong> <em class="oa"> REST API模型</em></h2><p id="eaad" class="pw-post-body-paragraph kr ks iq kt b ku ob jr kw kx oc ju kz la od lc ld le oe lg lh li of lk ll lm ij bi translated">模型对象<em class="lw"> : </em></p><ul class=""><li id="df10" class="ma mb iq kt b ku kv kx ky la mc le md li me lm og mg mh mi bi translated"><strong class="kt ir">文章()</strong></li><li id="c2ea" class="ma mb iq kt b ku mj kx mk la ml le mm li mn lm og mg mh mi bi translated">文章请求()</li><li id="ff0a" class="ma mb iq kt b ku mj kx mk la ml le mm li mn lm og mg mh mi bi translated"><strong class="kt ir">searcarticlerequest()</strong></li></ul><p id="fbb6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">模型序列化程序:</p><ul class=""><li id="0e83" class="ma mb iq kt b ku kv kx ky la mc le md li me lm og mg mh mi bi translated"><strong class="kt ir"> ArticleSerializer() </strong></li><li id="9860" class="ma mb iq kt b ku mj kx mk la ml le mm li mn lm og mg mh mi bi translated"><strong class="kt ir">articlexrequestserializer()</strong></li><li id="2051" class="ma mb iq kt b ku mj kx mk la ml le mm li mn lm og mg mh mi bi translated"><strong class="kt ir">searcarticrequestserializer()</strong></li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oh oi l"/></div></figure><h2 id="6df0" class="nc nd iq bd nj nk nl dn nm nn no dp np la nq nr ns le nt nu nv li nw nx ny nz bi translated"><strong class="ak"> 4.2 </strong>弹性搜索文件</h2><p id="df5e" class="pw-post-body-paragraph kr ks iq kt b ku ob jr kw kx oc ju kz la od lc ld le oe lg lh li of lk ll lm ij bi translated">将<strong class="kt ir"> ArticleDocument() </strong>定义为我们的弹性搜索文档，并使用<strong class="kt ir"> init() </strong>方法初始化它。</p><p id="229f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="lw">注意:</em> ArticleDocument继承自<strong class="kt ir"> elasticsearch_dsl </strong>库的文档类。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oh oi l"/></div></figure><p id="1937" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">和项目树:</p><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="2f19" class="nc nd iq my b gy ne nf l ng nh">elastico-app<br/>├── django_elastico_vuejs<br/>│   ├── migrations<br/>│   ├── models<br/>│   │   └──api<br/>│   │      ├── __init__.py<br/>│   │      └── models.py<br/>│   │   └──es<br/>│   │      ├── __init__.py<br/>│   │      └── models.py<br/>│   │   └── __init__.py<br/>│   ├── __init__.py<br/>│   ├── admin.py<br/>│   ├── apps.py<br/>│   ├── models.py<br/>│   ├── tests.py<br/>│   └── views.py<br/>├── manage.py<br/>├── django_elasticsearch<br/>│   ├── __init__.py<br/>│   ├── settings.py<br/>│   ├── urls.py<br/>│   └── wsgi.py<br/>└── env</span></pre><p id="0fd0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi mo translated"><span class="l mp mq mr bm ms mt mu mv mw di"> 5。</span> <strong class="kt ir"> <em class="lw">使用Docker </em> <br/> </strong>设置Elasticsearch &amp; Kibana服务器我们使用<a class="ae ln" href="https://docs.docker.com/compose/" rel="noopener ugc nofollow" target="_blank"> Docker Compose </a>工具在本地启动Elasticsearch数据库，以便从Docker映像运行Elasticsearch。</p><p id="d398" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">此外，我们还使用<a class="ae ln" href="https://www.elastic.co/kibana?ultron=B-Stack-Trials-AMER-CA-Exact&amp;gambit=Elasticsearch-Kibana&amp;blade=adwords-s&amp;hulk=cpc&amp;Device=c&amp;thor=kibana&amp;gclid=CjwKCAjwz_WGBhA1EiwAUAxIcbEXahJWvNtYsix19Tzquc8I26SHC5blamhok7_UO12IE05XRVLtvRoCQrcQAvD_BwE" rel="noopener ugc nofollow" target="_blank"> Kibana </a>作为Elasticsearch的数据可视化工具，因此我们也在Docker Compose脚本中定义了一个Kibana容器。</p><p id="71ef" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这是我们的<em class="lw"> docker-compose.yml </em>文件的样子:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oh oi l"/></div></figure><p id="dbdf" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">要运行Docker编写文件，请打开您的终端并运行以下命令:</p><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="d60b" class="nc nd iq my b gy ne nf l ng nh">(env) ~/elastico-app$ docker-compose up</span></pre><p id="7725" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="lw">注意:</em>在尝试运行此命令之前，请确保您已经安装了<a class="ae ln" href="https://www.docker.com/products/docker-desktop" rel="noopener ugc nofollow" target="_blank"> Docker Desktop </a>，并且它正在您的机器上运行，否则您会在执行docker-compose脚本时遇到问题。</p><p id="5b00" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">使用我们在docker-compose文件中定义的端口，即5601，可以从浏览器访问Kibana dashboard。例如，当在浏览器的搜索栏中键入<a class="ae ln" href="http://localhost:5601/app/kibana#/dev_tools/console" rel="noopener ugc nofollow" target="_blank">http://localhost:5601/app/kibana #/dev _ tools/console</a>时，我们看到ki Bana的UI类似于下面的截图。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oj"><img src="../Images/5049c3a77b3f77682f1b3f53e4dd1511.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l5VL0JeeefA0b_FR4ECm4Q.png"/></div></div></figure><p id="1ced" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi mo translated"><span class="l mp mq mr bm ms mt mu mv mw di"> 6。</span> <strong class="kt ir"> <em class="lw">实现视图</em> <br/> </strong>我们准备在<strong class="kt ir">django _ elastico _ vuejs/views . py</strong>中实现我们的视图，并处理我们的REST API以及初始化Elasticsearch数据库。</p><p id="66d3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="lw">注意:</em>我们正在使用Elasticsearch <a class="ae ln" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-fuzzy-query.html" rel="noopener ugc nofollow" target="_blank">模糊查询</a>，它返回包含与搜索词相似的词的文档，这是通过<a class="ae ln" href="https://en.wikipedia.org/wiki/Levenshtein_distance" rel="noopener ugc nofollow" target="_blank"> Levenshtein编辑距离</a>测量的。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oh oi l"/></div></figure><p id="d5ef" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi mo translated"><span class="l mp mq mr bm ms mt mu mv mw di"> 7。</span> <strong class="kt ir"> <em class="lw">创建URL并使用DRF UI测试它们</em> <br/> </strong>我们还需要在<strong class="kt ir">django _ elastico _ vuejs</strong>app内创建一个名为<strong class="kt ir"> urls.py </strong>的新文件。<strong class="kt ir"> urls.py </strong>中的代码应该是这样的:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oh oi l"/></div></figure><p id="985d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在我们需要将<strong class="kt ir"> django_elastico_vuejs </strong>应用程序的URL包含到我们的主<strong class="kt ir"> urls.py </strong>项目文件中。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oh oi l"/></div></figure><p id="360a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们可以使用DRF接口测试REST APIs。例如，如果我们想要测试文章创建REST API，我们使用这个url来访问它:<a class="ae ln" href="http://127.0.0.1:8000/api/articles/" rel="noopener ugc nofollow" target="_blank">http://127 . 0 . 0 . 1:8000/API/articles/</a></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ok"><img src="../Images/fd74a81c79dde518aae9671584262acb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xhR1eXMxfawsQo4KD7ok5A.png"/></div></div></figure><p id="7ffa" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi mo translated"><span class="l mp mq mr bm ms mt mu mv mw di"> 8。</span> <strong class="kt ir"> <em class="lw">构建模板，添加并使用Vue.js </em> <br/> </strong>我们应该先在<strong class="kt ir"> django_elastico_vuejs </strong>应用程序内创建一个目录，名为<strong class="kt ir"> templates </strong>、<strong class="kt ir"> </strong>，然后在<strong class="kt ir"> templates </strong>目录内，我们应该创建另一个目录，名为<strong class="kt ir"> django_elastico_vuejs </strong>。<strong class="kt ir"> <br/> </strong>现在让我们在<strong class="kt ir"> django_elastico_vuejs里面添加两个模板<strong class="kt ir">base.html</strong>和<strong class="kt ir">articles.html</strong>。</strong></p><p id="80b8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们的项目树现在看起来像这样:</p><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="293a" class="nc nd iq my b gy ne nf l ng nh">elastico-app<br/>├── django_elastico_vuejs<br/>│   ├── migrations<br/>│   ├── models<br/>│   ├── templates<br/>│   │   └──django_elastico_vuejs<br/>│   │      ├── articles.html<br/>│   │      └── base.html<br/>│   ├── __init__.py<br/>│   ├── admin.py<br/>│   ├── apps.py<br/>│   ├── models.py<br/>│   ├── tests.py<br/>│   ├── urls.py<br/>│   └── views.py<br/>├── manage.py<br/>├── django_elasticsearch<br/>│   ├── __init__.py<br/>│   ├── settings.py<br/>│   ├── urls.py<br/>│   └── wsgi.py<br/>└── env</span></pre><p id="3737" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在<strong class="kt ir">base.html</strong>中，我们将把基本模板的代码与我们的风格、脚本和其他我们希望与其他模板共享的东西放在一起。该文件如下所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oh oi l"/></div></figure><p id="b9f7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如你所见，我们已经通过添加CDN将Vue.js添加到我们的项目中，我们可以在扩展<strong class="kt ir">base.html</strong>模板的模板中自由使用它。</p><p id="cf15" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然后<strong class="kt ir">articles.html</strong>模板中的代码看起来像这样:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oh oi l"/></div></figure><p id="f485" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi mo translated"><span class="l mp mq mr bm ms mt mu mv mw di"> 9。</span> <strong class="kt ir"> <em class="lw">运行应用程序</em> </strong> <br/>此时，我们已经用Django和Vue.js使用Elasticsearch数据库完成了应用程序的实现，我们可以启动本地web服务器了。</p><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="b992" class="nc nd iq my b gy ne nf l ng nh">(env) ~/elastico-app$ python manage.py runserver</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi lo"><img src="../Images/d4326ece1688d028fc190636fbff878b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*zbYi9B3PtjkvRymys1Wvew.gif"/></div></div><figcaption class="lp lq gj gh gi lr ls bd b be z dk translated">使用Elasticsearch搜索功能</figcaption></figure><h1 id="b8f3" class="ol nd iq bd nj om on oo nm op oq or np jw os jx ns jz ot ka nv kc ou kd ny ov bi translated">结论</h1><p id="0343" class="pw-post-body-paragraph kr ks iq kt b ku ob jr kw kx oc ju kz la od lc ld le oe lg lh li of lk ll lm ij bi translated">我希望您喜欢这篇文章，并且您可以使用这个示例作为指南，使用带有Django REST framework和Vue.js的Elasticsearch来使用和实现一个搜索特性。</p></div><div class="ab cl ow ox hu oy" role="separator"><span class="oz bw bk pa pb pc"/><span class="oz bw bk pa pb pc"/><span class="oz bw bk pa pb"/></div><div class="ij ik il im in"><p id="93a1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"> <em class="lw">参考文献及资源:</em> </strong></p><div class="pd pe gp gr pf pg"><a href="https://www.django-rest-framework.org/" rel="noopener  ugc nofollow" target="_blank"><div class="ph ab fo"><div class="pi ab pj cl cj pk"><h2 class="bd ir gy z fp pl fr fs pm fu fw ip bi translated">Home - Django REST框架</h2><div class="pn l"><h3 class="bd b gy z fp pl fr fs pm fu fw dk translated">Django REST框架是一个用于构建Web APIs的强大而灵活的工具包。您可能想使用REST的一些原因…</h3></div><div class="po l"><p class="bd b dl z fp pl fr fs pm fu fw dk translated">www.django-rest-framework.org</p></div></div></div></a></div><div class="pd pe gp gr pf pg"><a href="https://docs.docker.com/compose/" rel="noopener  ugc nofollow" target="_blank"><div class="ph ab fo"><div class="pi ab pj cl cj pk"><h2 class="bd ir gy z fp pl fr fs pm fu fw ip bi translated">Docker编写概述</h2><div class="pn l"><h3 class="bd b gy z fp pl fr fs pm fu fw dk translated">寻找撰写文件参考？在此处找到最新版本。Compose是一个定义和运行…</h3></div><div class="po l"><p class="bd b dl z fp pl fr fs pm fu fw dk translated">docs.docker.com</p></div></div><div class="pp l"><div class="pq l pr ps pt pp pu kp pg"/></div></div></a></div><div class="pd pe gp gr pf pg"><a href="https://www.elastic.co/kibana/" rel="noopener  ugc nofollow" target="_blank"><div class="ph ab fo"><div class="pi ab pj cl cj pk"><h2 class="bd ir gy z fp pl fr fs pm fu fw ip bi translated">Kibana:探索、可视化、发现数据|弹性</h2><div class="pn l"><h3 class="bd b gy z fp pl fr fs pm fu fw dk translated">刚到基巴纳？这是你开始工作所需要的一切。观看视频，了解使用Kibana进行数据分析的核心概念…</h3></div><div class="po l"><p class="bd b dl z fp pl fr fs pm fu fw dk translated">www.elastic.co</p></div></div><div class="pp l"><div class="pv l pr ps pt pp pu kp pg"/></div></div></a></div><div class="pd pe gp gr pf pg"><a href="https://articlegenerator.org/" rel="noopener  ugc nofollow" target="_blank"><div class="ph ab fo"><div class="pi ab pj cl cj pk"><h2 class="bd ir gy z fp pl fr fs pm fu fw ip bi translated">文章生成器-免费独特的在线内容生成器！</h2><div class="pn l"><h3 class="bd b gy z fp pl fr fs pm fu fw dk translated">文章生成器是一个轻量级的在线自动工具，只需添加一个…</h3></div><div class="po l"><p class="bd b dl z fp pl fr fs pm fu fw dk translated">articlegenerator.org</p></div></div><div class="pp l"><div class="pw l pr ps pt pp pu kp pg"/></div></div></a></div></div></div>    
</body>
</html>