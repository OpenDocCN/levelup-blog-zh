<html>
<head>
<title>Trick Angular into thinking all of your apps share the same source folder</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">欺骗Angular，让他认为你所有的应用程序共享同一个源文件夹</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/trick-angular-into-thinking-all-of-your-apps-share-the-same-source-folder-b8eb2e5aed16?source=collection_archive---------16-----------------------#2020-02-25">https://levelup.gitconnected.com/trick-angular-into-thinking-all-of-your-apps-share-the-same-source-folder-b8eb2e5aed16?source=collection_archive---------16-----------------------#2020-02-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div class="gh gi jq"><img src="../Images/9e964dc14beab5abce3bd0f7408a8c7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*J0jFDU5_Tt3zb_z7okqDmg.png"/></div><figcaption class="jx jy gj gh gi jz ka bd b be z dk translated">图片来源:Freepik</figcaption></figure><p id="232e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果您使用Angular CLI启动一个新项目，您会注意到它附带了一个默认应用程序，其中有一个“src”文件夹。Angular使用此文件夹作为应用程序的根位置，这样无论您在文件夹结构中的哪个位置，都可以访问相同的起点。</p><h1 id="77eb" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">但是如果你想在多个应用之间共享同一个起点呢？</h1><p id="18f1" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">在意识到Angular是多么不可思议之后，你可能决定要在同一个项目工作空间中创建多个应用程序，但是由于明显的原因，你不想一次又一次地复制相同的资产。看起来好像你可以创建一个位于你的应用之上一层的资产文件夹，让你所有的应用都链接到它，这样就可以了。然而，通过巧妙的设计，Angular限制每个应用程序只能有一个源文件夹，它不会识别源文件夹之外的任何东西，所以你必须做更多的fanagling来覆盖这些保护性的默认行为。</p><h1 id="d6e6" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">步骤1:创建一个没有默认应用程序的新项目</h1><p id="96a8" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">当您创建新的Angular项目时，请指定您不想创建带有以下标志的默认应用程序:</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="80c5" class="ml la it mh b gy mm mn l mo mp">ng new [workspace name] --create-application=false</span></pre><p id="9e8b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">阅读Todd Palmer的这篇伟大的文章,进一步了解这面旗帜的其他用途。</p><p id="1e3b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu">注意:</strong>确保使用一个足够宽泛的工作区名称来包含你所有的应用程序，因为你不能在以后为一个应用程序重复使用相同的名称。真的，这个名字并不重要，但是为什么不使它有意义呢？</p><p id="da3b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">您将最终得到一个看似贫瘠的角形项目，如下所示:</p><figure class="mc md me mf gt ju gh gi paragraph-image"><div class="gh gi mr"><img src="../Images/70a2b8e7c611676d0f0553ef0f27cdf3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1332/format:webp/0*bbHtAkVbGBEqkGlZ.png"/></div></figure><h1 id="b1ba" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">步骤2:创建您的应用程序</h1><p id="6c0f" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">使用Angular CLI创建尽可能多的应用程序:</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="4a77" class="ml la it mh b gy mm mn l mo mp">ng generate app [app name]</span></pre><p id="e37c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">您会注意到，这些应用程序将创建在您的“项目”文件夹中，就像您正在创建一个库一样。</p><figure class="mc md me mf gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi ms"><img src="../Images/5ff46b3251cf31313e1f8c36786a64b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*r-sN9Ly7SpghMmi-.png"/></div></div></figure><h1 id="45db" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">步骤3:在“项目”文件夹的同一层创建一个共享的“src”文件夹</h1><p id="b2c6" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated"><strong class="kd iu">注意:</strong>让你的应用程序将“项目”或“src”作为它们的根文件夹位置本质上没有区别。然而，如果你想轻松区分你的应用程序和你的库，你必须创建一个共享的“src”文件夹，然后将你的应用程序拖到该文件夹中。</p><figure class="mc md me mf gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi mx"><img src="../Images/987450975fd2e6696f933337a9ace857.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ZjAQ3VTRFwn0fk14.png"/></div></div></figure><h1 id="c5b2" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">第四步:修改“angular.json”</h1><p id="8db4" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">执行查找和替换搜索，将“项目/应用程序名称”替换为“src/应用程序名称”</p><p id="a883" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu">注意:</strong>这个替换必须在你的“angular.json”文件的所有实例中进行(例如，2个应用程序有44个结果)，否则你的应用程序会崩溃！不要依靠目测在哪里进行替换。</p><figure class="mc md me mf gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi my"><img src="../Images/fe6ae7af38dc67edba65f072e14e0f77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*EtPNfVOlDkKV7BOo.png"/></div></div></figure><h1 id="1e31" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">步骤5:创建资产文件夹</h1><p id="8d6f" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">创建一个“资产”文件夹，与你的应用程序放在同一层。</p><figure class="mc md me mf gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi mz"><img src="../Images/812e13701c31fceffe91ea262a450409.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*X1aKJArWjwsdFgGp.png"/></div></div></figure><h1 id="01e8" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">第六步:修改“angular.json”</h1><p id="6c3d" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">你现在必须告诉Angular你的“资产”文件夹的新位置，用新的链接替换当前的资产链接。为此，您可以在每个应用程序中找到“assets”部分，并用以下代码行替换现有代码:</p><p id="9404" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu">之前:</strong></p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="3b20" class="ml la it mh b gy mm mn l mo mp">"assets": [<br/>      "src/cloud-engineering-studio/src/favicon.ico",<br/>      "src/cloud-engineering-studio/src/assets"<br/>    ],</span></pre><p id="3197" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu">之后:</strong></p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="455b" class="ml la it mh b gy mm mn l mo mp">"assets": [<br/>          { "glob": "**/*", "input": "src/assets/", "output": "/assets/" },<br/>          "src/cloud-engineering-studio/src/favicon.ico"<br/>        ],</span></pre><p id="5ad1" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这种替换必须在每个应用程序的两个位置进行，因为第一个位置用于应用程序，第二个位置用于测试应用程序。</p><p id="89c7" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu">注意:</strong>因为我希望每个应用程序都有不同的图标，所以我保留了不同的图标链接。如果这样做，请确保颠倒两个语句的顺序。</p><h1 id="33e5" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">步骤7:使用新的“资产”文件夹</h1><p id="9cba" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">现在，你可以对每个应用程序以同样的方式使用新的“资产”文件夹，它们都将链接到同一个位置。例如，要链接到一个图像，您可以只写:</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="015c" class="ml la it mh b gy mm mn l mo mp">"/assets/file-directory/file-name.jpg"</span></pre><p id="eca7" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">要导入位于assets文件夹中的样式表，可以像这样形成导入语句:</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="479e" class="ml la it mh b gy mm mn l mo mp">@import "src/assets/file-directory/file-name.scss"</span></pre></div></div>    
</body>
</html>