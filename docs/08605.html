<html>
<head>
<title>Testing In-App Purchases Locally in Simulator</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在模拟器中本地测试应用内购买</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/testing-in-app-purchases-locally-in-simulator-7cdfd5031462?source=collection_archive---------9-----------------------#2021-05-16">https://levelup.gitconnected.com/testing-in-app-purchases-locally-in-simulator-7cdfd5031462?source=collection_archive---------9-----------------------#2021-05-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/5eea6f0f93856ec58a66557b7dc1f02e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y6OTwV686_VBF5o8molr4g.png"/></div></div><figcaption class="jc jd gj gh gi je jf bd b be z dk translated">图片:<a class="ae jg" href="https://qonversion.io/blog/storekit-testing-in-xcode-12-and-ios-14/" rel="noopener ugc nofollow" target="_blank">https://qonversion.io/</a></figcaption></figure><div class=""/><p id="c475" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在开发期间，我们将进入一个阶段，我们想测试我们的应用内购买。然而，最有可能的是，我们听说过一个神话，IAP只与设备一起工作，用内部测试帐户来测试它。原来在创建<a class="ae jg" href="https://apps.apple.com/th/app/tripzy/id1564625604" rel="noopener ugc nofollow" target="_blank"> Tripzy </a>的过程中，我找到了一种在模拟器中测试我们的IAP的方法，没有任何麻烦。请记住，如果我们在模拟器上测试，当然会有一些限制。好了，让我们跳出这个解决方案，这就是StoreKit配置<strong class="ki jk">。</strong></p><h2 id="fef7" class="le lf jj bd lg lh li dn lj lk ll dp lm kr ln lo lp kv lq lr ls kz lt lu lv lw bi translated"><strong class="ak"> StoreKit配置</strong></h2><p id="af6b" class="pw-post-body-paragraph kg kh jj ki b kj lx kl km kn ly kp kq kr lz kt ku kv ma kx ky kz mb lb lc ld im bi translated">基本上，StoreKit配置是一个JSON编码的文件，它模拟了我们在App Store Connect中的应用内购买配置。当我们创建文件时，我们可以指定我们想要的任何产品标识符，而不必与产品标识符完全相同。然而，为了克隆和测试我们的生产应用程序，如果我们能创建完全相同的环境就更好了。让我们开始第一步:</p><ol class=""><li id="c73b" class="mc md jj ki b kj kk kn ko kr me kv mf kz mg ld mh mi mj mk bi translated">Xcode -&gt;文件-&gt;新建-&gt; StoreKit配置文件</li></ol><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ml"><img src="../Images/846c22523bfb4ca9f320130ba85a61d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yZZ38_jvc90L7Om0AK5PPw.png"/></div></div><figcaption class="jc jd gj gh gi je jf bd b be z dk translated">第一步</figcaption></figure><p id="92d1" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一旦您创建了第一个新文件，它将出现在您的左侧面板项目结构中，扩展名为. storekit。接下来，我们将添加一些我们想要的应用内购买。我假设你们都已经了解了这4种可用IAP类型之间的区别。</p><p id="4f71" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">2.单击+按钮，然后选择其中一个项目</p><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/fab0b37e5ad7e913992ded2dafc94e19.png" data-original-src="https://miro.medium.com/v2/resize:fit:1196/format:webp/1*Tj-HcuMdVOF9krVGgTzRzw.png"/></div><figcaption class="jc jd gj gh gi je jf bd b be z dk translated">第二步</figcaption></figure><p id="f4b0" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在下一步是建立一个新的小组。您可以指定与实际生产组相似的组名。</p><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mr"><img src="../Images/6051b33c950563cd90713868dfe3e372.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ckRW641dU82lRWRPFaKEkg.png"/></div></div><figcaption class="jc jd gj gh gi je jf bd b be z dk translated">第三步</figcaption></figure><p id="45b4" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">正如你在下图中看到的，这是storekit的下一步。我们现在可以指定关于您的配置的更多细节，参考名称、价格、持续时间和许多我们需要在AppStore Connect中设置的完全相同的内容。您可以在同一个组下添加新的IAP，或者创建新的组，甚至删除现有的组。</p><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ms"><img src="../Images/db7f951041b128225ea8f8d8237ee285.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4i9KGk78bk-3sXcm_wDDbg.png"/></div></div><figcaption class="jc jd gj gh gi je jf bd b be z dk translated">第四步</figcaption></figure><p id="065d" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在的最后一步是使这个配置文件可用于模拟器中的测试。您需要做的是在我们的方案中的调试选项中使用storekit。</p><p id="50a2" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">3.编辑方案-&gt;运行-&gt;选项-&gt; StoreKit配置</p><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mt"><img src="../Images/0e10fd5e19666514d52a80d772a9651e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CNTXdwH7Xez1swvJYhSoDA.png"/></div></div><figcaption class="jc jd gj gh gi je jf bd b be z dk translated">最后一步</figcaption></figure><p id="2fc0" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们尝试运行我们的应用程序。您将看到我们在StoreKit文件中设置的确切数字。</p><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mu"><img src="../Images/18df6285f773d85c080b1d03fb7fb239.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7Ooeil982UtNBZerb6bWKg.png"/></div></div><figcaption class="jc jd gj gh gi je jf bd b be z dk translated">Tripzy高级页面</figcaption></figure><p id="9b1f" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">那么我们如何验证所有的工作是否完美？单击其中一个IAP后，您可以通过单击迷你调试器工具栏上的最后一个按钮(位置按钮旁边)来查看我们实际购买的产品。</p><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mv"><img src="../Images/c68dd6f4e5464afbfcb8f666338b1e74.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vWoRO9IIqtXm639D_6Ezow.png"/></div></div></figure><figure class="mm mn mo mp gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mw"><img src="../Images/d392da18193a95a81ae7af4a9870af20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*REnmj9n-GUdPXJ0vWUOBNQ.png"/></div></div><figcaption class="jc jd gj gh gi je jf bd b be z dk translated">我们的交易</figcaption></figure><p id="d97e" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后在这个页面上，你可以删除它，直到你对你的测试满意为止。</p><p id="e0da" class="pw-post-body-paragraph kg kh jj ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我希望有了这些信息，现在你能够在我的应用程序上模拟我所做的，并使你的测试比以前容易得多。请记住，使用storekit作为模拟网络连接问题的例子有一些限制(使我们在等待响应时很难模拟我们的负载指示器)。</p></div></div>    
</body>
</html>