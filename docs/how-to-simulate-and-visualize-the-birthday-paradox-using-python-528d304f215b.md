# å¦‚ä½•ç”¨ Python æ¨¡æ‹Ÿå’Œå¯è§†åŒ–ç”Ÿæ—¥æ‚–è®º

> åŸæ–‡ï¼š<https://levelup.gitconnected.com/how-to-simulate-and-visualize-the-birthday-paradox-using-python-528d304f215b>

## ä¸€å ‚ 5 åˆ†é’Ÿçš„ Python è¯¾:

## é€šè¿‡ç¼–ç æé«˜ä½ å¯¹æ¦‚ç‡çš„ç†è§£

![](img/73968bc4af9606fd6227cf5ff196a3e0.png)

è±ªå°”èµ«Â·ä¾ç­å¨œåœ¨ [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) ä¸Šçš„ç…§ç‰‡

# ä»€ä¹ˆæ˜¯ç”Ÿæ—¥æ‚–è®ºï¼Ÿ

æœ‰ä¸€å¤©åœ¨å·¥ä½œä¸­ï¼Œæˆ‘çš„ä¸€ä¸ªåŒäº‹å¸¦ç€ç¤¼ç‰©è¿›æ¥åº†ç¥ä»–çš„ç”Ÿæ—¥ã€‚å½“æˆ‘ä»¬éƒ½èšé›†åœ¨ä»–çš„åŠå…¬æ¡Œæ—åƒé›¶é£Ÿå’ŒèŠå¤©æ—¶ï¼Œæœ‰äººæåˆ°å…¬å¸çš„å¦ä¸€ä¸ªäººä¹Ÿæ˜¯åŒä¸€å¤©ç”Ÿæ—¥ã€‚è¿™è®©æˆ‘æƒ³åˆ°äº†è€ T4 çš„ç”Ÿæ—¥æ‚–è®ºï¼Œå®ƒæå‡ºäº†ä¸€ä¸ªé—®é¢˜:

> **åœ¨ä¸€ç¾¤äººä¸­ï¼Œä¸¤ä¸ªäººåŒä¸€å¤©ç”Ÿæ—¥çš„å¯èƒ½æ€§æœ‰å¤šå¤§ï¼Ÿ**

æˆ‘çŸ¥é“æˆ‘ä»¬éƒ½æƒ³åœ¨è‡ªå·±ç‰¹åˆ«çš„æ—¥å­é‡Œæ„Ÿåˆ°ç‰¹åˆ«ï¼Œä½†æ•°å­¦æ˜¾ç¤ºï¼Œåœ¨ä¸€ä¸ªåªæœ‰ 23 äººçš„å›¢ä½“ä¸­ï¼Œå¤§çº¦æœ‰ 50/50 çš„æœºä¼šæœ‰äººåŒä¸€å¤©è¿‡ç”Ÿæ—¥ã€‚åœ¨ä¸€ä¸ª 70 äººçš„å›¢ä½“ä¸­ï¼Œæœ‰ 99.9%çš„æœºä¼šæ˜¯åŒä¸€å¤©ç”Ÿæ—¥ã€‚ç”±äºæˆ‘åœ¨ä¸€å®¶é›‡ç”¨æ•°ç™¾äººçš„å…¬å¸å·¥ä½œï¼Œæˆ‘æƒ³çŸ¥é“æ˜¯å¦æœ‰äººçœŸçš„å’Œæˆ‘åŒä¸€å¤©ç”Ÿæ—¥ï¼ŸğŸ¤”

![](img/8294e015e8271a1463d1ab3992fb5ea8.png)

ç…§ç‰‡ç”±[ç½—ä¼¯ç‰¹Â·å®‰å¾·æ£®](https://unsplash.com/@fochrist1?utm_source=medium&utm_medium=referral)åœ¨ [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) ä¸Šæ‹æ‘„

# ä½¿ç”¨ Python æ¢ç´¢é—®é¢˜

åœ¨æ·±å…¥ç ”ç©¶å…¬å¼ä¹‹å‰ï¼Œè®©æˆ‘ä»¬é¦–å…ˆå‰–æè¿™ä¸ªé—®é¢˜ï¼Œå¹¶ç¼–å†™ä¸€ä¸ªå¼ºåŠ›ç¤ºä¾‹ï¼Œè¾“å‡ºç»„å¤§å°ä¸º N çš„éšæœºç”Ÿæ—¥ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å°è¯•å¯¹è¿™ä¸ªé—®é¢˜æœ‰ä¸€äº›ç›´è§‰ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬é¦–å…ˆå‡è®¾æ¯ä¸ªå‡ºç”Ÿæ—¥æœŸå‘ç”Ÿçš„å¯èƒ½æ€§ç›¸åŒã€‚

è¯·è®°ä½ï¼Œæˆ‘ä»¬ä¸éœ€è¦æ‹…å¿ƒå¹´ä»½ï¼Œåªéœ€è¦æ‹…å¿ƒæœˆä»½å’Œæ—¥æœŸï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ç®€å•åœ°æä¾›ä¸€ä¸ªå¼€å§‹æ—¥æœŸï¼Œå¹¶éšæœºæ·»åŠ  N æ¬¡æ—¥æœŸæ¥ç”Ÿæˆç”Ÿæ—¥åˆ—è¡¨ã€‚ä½¿ç”¨ [**datetime** åº“](https://docs.python.org/3/library/datetime.html)ï¼Œæˆ‘ä»¬å¯ä»¥ç”Ÿæˆ 2020 å¹´ 1 æœˆ 1 æ—¥çš„å¼€å§‹æ—¥æœŸã€‚ç„¶åä½¿ç”¨[](https://docs.python.org/3/library/datetime.html#timedelta-objects)****ä»åº“ä¸­ï¼Œé€šè¿‡ 0 åˆ° 366 ä¹‹é—´çš„éšæœºæ•´æ•°å€¼ä¿®æ”¹å¼€å§‹æ—¥æœŸ(å› ä¸º 2020 å¹´æœ‰é—°æ—¥)ã€‚****

****åˆ›å»ºä¸€ä¸ªåä¸º **generate_birthdays** çš„å‡½æ•°ï¼Œå®ƒæ¥å—ä¸€ä¸ª**int**value***group _ size***ã€‚ä¹Ÿå¯¼å…¥æ‰€éœ€çš„ä¾èµ–é¡¹:****

```
**from datetime import datetime, timedelta
import randomdef generate_birthdays(group_size):**
```

****ç„¶åé€šè¿‡ä¸º 2020 å¹´ 1 æœˆ 1 æ—¥åˆ›å»ºä¸€ä¸ªæ—¥æœŸæ—¶é—´å¯¹è±¡æ¥æ·»åŠ  **jan_first** å˜é‡:****

```
**def generate_birthdays(group_size):
    jan_first = datetime(2020, 1, 1)**
```

****ä»è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨[åˆ—è¡¨ç†è§£](https://towardsdatascience.com/my-trick-to-learning-list-comprehensions-in-python-8a54e66d98b)æ¥åˆ¶ä½œä¸€ä¸ªéšæœºç”Ÿæ—¥åˆ—è¡¨:****

```
**def generate_birthdays(group_size):
    jan_first = datetime(2020, 1, 1)
    birthday_list = [(jan_first + timedelta(days=random.randint(0, 366))).strftime("%m/%d/%Y") for i in range(group_size)]**
```

****æ³¨æ„ï¼Œæˆ‘å°† [strftime("%m/%d/%Y")](https://docs.python.org/3/library/datetime.html#strftime-and-strptime-behavior) è¿½åŠ åˆ° datetime å€¼ï¼Œä»¥ä¾¿å°†å¯¹è±¡è¾“å‡ºä¸ºå­—ç¬¦ä¸²ï¼Œä½¿å…¶æ›´æ˜“äºé˜…è¯»ã€‚****

****æœ€åï¼Œè¿”å›ä¸€ä¸ªæ’åºåçš„ç”Ÿæ—¥åˆ—è¡¨ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å¾ˆå®¹æ˜“åœ°å‘ç°é‡å¤çš„å‡ºç”Ÿæ—¥æœŸã€‚ä¸‹é¢æ˜¯å®Œæ•´çš„å‡½æ•°:****

```
**def generate_birthdays(group_size):
    jan_first = datetime(2020, 1, 1)
    birthday_list = [(jan_first + timedelta(days=random.randint(0, 366))).strftime("%m/%d/%Y") for i in range(group_size)]
    return sorted(birthday_list)**
```

****ä½¿ç”¨ *group_size* = 23 è¿è¡Œå‡½æ•°ï¼Œå› ä¸ºæˆ‘ä»¬æƒ³è¦æ£€æŸ¥ç»™å®šä¸€ç»„ 23 ä¸ªäººï¼Œæ˜¯å¦çœŸçš„æœ‰ 50/50 çš„æœºä¼šå…±äº«ç”Ÿæ—¥ã€‚è¯·è®°ä½ï¼Œç”±äºæ—¥æœŸæ˜¯éšæœºçš„ï¼Œæ‰€ä»¥æ‚¨çš„è¾“å‡ºä¸ä¼šä¸æˆ‘çš„ç›¸åŒ¹é…ã€‚****

```
**generate_birthdays(23)**
```

****![](img/ddecf655415ae1e605ba680f712ee23a.png)****

****generate_birthdays çš„è¾“å‡º(23)****

****æ­£å¦‚æˆ‘ä»¬åœ¨ç¤ºä¾‹è¾“å‡ºä¸­çœ‹åˆ°çš„ï¼Œæˆ‘ä»¬çš„ç”Ÿæ—¥åˆ—è¡¨åŒ…å«ä¸€ä¸ªå‰¯æœ¬ï¼ç°åœ¨ï¼Œå¦‚æœæˆ‘ä»¬æƒ³æ·±å…¥äº†è§£å…±åŒç”Ÿæ—¥å‘ç”Ÿçš„æ¦‚ç‡ï¼Œæˆ‘ä»¬å¯ä»¥è¿è¡Œè¿™ä¸ªå‡½æ•° X æ¬¡å¹¶è®°å½•æˆ‘ä»¬çš„ç»“æœã€‚å½“ç„¶æœ‰å¯èƒ½ï¼Œä½†æ‰‹å·¥æ“ä½œä¹Ÿå¾ˆç¹çã€‚å¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç¼–å†™æ›´å¤šçš„å‡½æ•°æ¥å‘Šè¯‰æˆ‘ä»¬è¯¥åˆ—è¡¨æ˜¯å¦åŒ…å«é‡å¤é¡¹ï¼Œä»è€Œè®© Python æ¥ä¸ºæˆ‘ä»¬å®Œæˆè¿™é¡¹ç¹ççš„å·¥ä½œ:****

```
**def shared_bday(group_size):
    birthdays = random_birthdays(group_size)
    #print(birthdays)
    for a, birthdayA in enumerate(birthdays):
        for b, birthdayB in enumerate(birthdays[a + 1 :]):
            if birthdayA == birthdayB:
                return True**
```

****è¯¥å‡½æ•°æ¥å— *group_size* å¹¶ç”Ÿæˆä¸€ä¸ªç”Ÿæ—¥åˆ—è¡¨ã€‚ç„¶åï¼Œå®ƒéå†ç”Ÿæ—¥åˆ—è¡¨ï¼Œå°†æ¯ä¸ªç”Ÿæ—¥ä¸åˆ—è¡¨ä¸­çš„å…¶ä»–ç”Ÿæ—¥è¿›è¡Œæ¯”è¾ƒã€‚å¦‚æœä¸¤ä¸ªç”Ÿæ—¥åŒ¹é…ï¼Œè¯¥å‡½æ•°è¿”å› Trueã€‚****

****ç”±äºæˆ‘ä»¬ä¸æƒ³æ‰‹åŠ¨ç»Ÿè®¡è¾“å‡ºï¼Œæˆ‘ä»¬å¯ä»¥ç¼–å†™æœ€åä¸€ä¸ªå‡½æ•°æ¥è¿è¡Œ X æ¬¡è¯•éªŒçš„ **shared_bday** ï¼Œç„¶åè¿”å› shared_bday ä¸ºçœŸçš„æ¬¡æ•°ä¹‹å’Œé™¤ä»¥ X æ¬¡è¯•éªŒï¼Œä»¥è·å¾— 0 åˆ° 1 ä¹‹é—´çš„æ¦‚ç‡å€¼:****

```
**def generate_trials(group_size, trials):
    counts = []
    for i in range(trials):
        if shared_bday(group_size) == True:
            counts.append(1)
    return sum(counts)/trials**
```

****ä½¿ç”¨ *group_size* = 23 å’Œ *trials* = 10000 è¿è¡Œè¯¥åŠŸèƒ½ã€‚è¯·æ³¨æ„ï¼Œè¿”å›å€¼å§‹ç»ˆä¸º~0.50ï¼Œè¿™è¡¨æ˜åœ¨ 10ï¼Œ000 æ¬¡è¯•éªŒä¸­ï¼Œå¤§çº¦æœ‰ 50%çš„æƒ…å†µä¸‹ï¼Œä¸€ç»„ 23 ä¸ªäººä¸­è‡³å°‘æœ‰ä¸¤ä¸ªç”Ÿæ—¥å…±äº«åŒä¸€å¤©ã€‚****

# ****ä¸€ä¸ªæ›´ç®€å•çš„è§£å†³æ–¹æ¡ˆå’Œå¯è§†åŒ–çš„æ¦‚ç‡****

****è™½ç„¶æˆ‘ä»¬çš„å¼ºåŠ›è§£å†³æ–¹æ¡ˆç»™äº†æˆ‘ä»¬ä¸€ä¸ªç­”æ¡ˆï¼Œä½†æœ‰ä¸€ä¸ªæ›´ç®€å•çš„æ–¹æ³•æ¥è®¡ç®—æ¦‚ç‡ï¼Œå¹¶ä¸”ä½¿å¯è§†åŒ–æ¦‚ç‡å˜å¾—è½»è€Œæ˜“ä¸¾ã€‚ä¸å…¶è¯•å›¾è®¡ç®—åŒä¸€å¤©ç”Ÿæ—¥çš„æ¦‚ç‡ï¼Œä¸å¦‚è®¡ç®—æ²¡æœ‰åŒä¸€å¤©ç”Ÿæ—¥çš„æ¦‚ç‡ï¼Œå¹¶ä» 1:****

*****P* ( *å…±äº«ç”Ÿæ—¥*)= 1*P*(*æ— å…±äº«ç”Ÿæ—¥*)****

## ****æ‰¾ä¸åˆ°å…±äº«ç”Ÿæ—¥****

****ä¸ºäº†ä½¿æ•°å­¦æ›´å®¹æ˜“è§£é‡Šï¼Œè®©æˆ‘ä»¬å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ª 5 äººå°ç»„ã€‚äºº A å¿…é¡»æœ‰ç”Ÿæ—¥ï¼Œå¹¶ä¸”æ˜¯ 366 å¤©ä¸­çš„ä¸€å¤©ã€‚äºº b çš„ç”Ÿæ—¥ä¹Ÿæ˜¯ 366 å¤©ä¸­çš„ä¸€å¤©â€¦â€¦æˆ‘ä»¬å¯ä»¥ç®€å•åœ°å†™æˆ 366âµï¼Œè€Œä¸æ˜¯ 366 x 366 x 366 x 366 x 366****

****å› ä¸ºç”Ÿæ—¥ä¸èƒ½å…±äº«ï¼Œæ‰€ä»¥äºº A æœ‰ 366 ä¸ªå¯èƒ½çš„æ—¥å­ï¼Œä½†æ˜¯äºº B åªæœ‰ 365 ä¸ªï¼Œè€Œäºº C åªæœ‰ 364 ä¸ªâ€¦ç­‰ç­‰ã€‚ä½¿ç”¨ Pythonï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºä¸€ä¸ª 5 äººå°ç»„æ±‚è§£å¦‚ä¸‹ç­‰å¼:****

```
**1 - (366 * 365 *364 * 363 * 362) / 366**5
=.027**
```

****ä½¿ç”¨å¾ªç¯çš„*,æˆ‘ä»¬å¯ä»¥ç”Ÿæˆä¸€ç³»åˆ—ç¾¤ä½“å¤§å°çš„æ¦‚ç‡ï¼Œåˆ›å»ºä¸€ä¸ªå­—å…¸ï¼Œå¹¶å°†ç¾¤ä½“å¤§å°å’Œæ¦‚ç‡åŠ è½½åˆ°[ç†ŠçŒ«æ•°æ®å¸§](https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html)ä¸­ã€‚ä¸€æ—¦è¿›å…¥æ•°æ®å¸§ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ [Plotly express](https://plotly.com/python/line-charts/) åˆ›å»ºä¸€ä¸ªäº¤äº’å¼å›¾å½¢:*****

```
**#import dependencies
import pandas as pd
import plotly.express as px#set number of days in a year
numerator = 366
denominator = 366#create empty list to store dictionary
probabilities = []#for loop to generate probabilities
for i in range(2, 100):
    numerator = numerator * (366 + 1 - i)
    denominator = denominator * 366
    probabilities.append({'group_size':i, 'probability':round(1 - (numerator / denominator), 3)})
    #print(round(probabilities, 3))#load dataframe
df = pd.DataFrame(probabilities)#graph probabilities
fig = px.line(df, x='group_size', y='probability', title='Probability of Sharing B-Day')
fig.show()**
```

****![](img/68b9aef91edd526a4a8ff63b578aaddf.png)****

****æ¦‚ç‡å›¾(ä½œè€…å›¾ç‰‡)****

****æ­£å¦‚æˆ‘ä»¬å†æ¬¡çœ‹åˆ°çš„ï¼Œ23 äººçš„ç»„è¿”å› 0.506 çš„æ¦‚ç‡ã€‚Plotly å›¾å½¢æ˜¯äº¤äº’å¼çš„ï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°çœ‹åˆ°æ²¿ç€ç»˜åˆ¶çº¿çš„ä»»ä½• group_size å€¼çš„æ¦‚ç‡ã€‚****

# ****ç»“æŸè¯­****

****ç”Ÿæ—¥æ‚–è®ºæ˜¯ä¸€ä¸ªå¤§é—®é¢˜ï¼Œå› ä¸ºå®ƒæ­ç¤ºäº†æŒ‡æ•°çš„éç›´è§‚æ€§ã€‚ä½¿ç”¨ Python æ¢ç´¢è¿™ä¸ªé—®é¢˜å…è®¸æˆ‘ä»¬ç”¨ä¸åŒçš„æ–¹æ³•è§£å†³å®ƒã€‚é€šè¿‡ç†è§£é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆï¼Œå®ƒæœ‰åŠ©äºè®­ç»ƒå¤§è„‘ä»ä¸åŒçš„è§’åº¦çœ‹å¾…é—®é¢˜ï¼Œå› ä¸ºä¸ç”¨æš´åŠ›è§£å†³ç”Ÿæ—¥æ‚–è®ºçš„æŠ€å·§æ˜¯é¦–å…ˆè®¡ç®—åœ¨å°ç»„å†…å…±äº«ç”Ÿæ—¥çš„å¯èƒ½æ€§æœ‰å¤šå¤§ã€‚****

# ****è°¢è°¢å¤§å®¶ï¼****

*   *****å¦‚æœä½ å–œæ¬¢è¿™ä¸ªï¼Œ* [*å…³æ³¨æˆ‘çš„ Medium*](https://medium.com/@erickleppen) *äº†è§£æ›´å¤š*****
*   ****[*é€šè¿‡è®¢é˜…*](https://erickleppen.medium.com/membership) è·å¾—å®Œå…¨è®¿é—®æƒé™å¹¶å¸®åŠ©æ”¯æŒæˆ‘çš„å†…å®¹****
*   *****æˆ‘ä»¬è¿çº¿ä¸Š*[*LinkedIn*](https://www.linkedin.com/in/erickleppen01/)****
*   *****ç”¨ Python åˆ†ææ•°æ®ï¼ŸæŸ¥çœ‹æˆ‘çš„* [*ç½‘ç«™*](https://pythondashboards.com/)****

****[**â€”åŸƒé‡Œå…‹Â·å…‹è±æœ¬**](http://pythondashboards.com/)****