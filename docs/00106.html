<html>
<head>
<title>Build a toggle control smiley face using HTML and CSS — WotW</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用HTML和CSS构建一个切换控件笑脸——WotW</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/smiley-toggle-wotw-a3bf7cc1b5c3?source=collection_archive---------0-----------------------#2018-04-02">https://levelup.gitconnected.com/smiley-toggle-wotw-a3bf7cc1b5c3?source=collection_archive---------0-----------------------#2018-04-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="ccee" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是本周<strong class="jp ir">小部件系列的第一篇文章。</strong></p><blockquote class="kl"><p id="a032" class="km kn iq bd ko kp kq kr ks kt ku kk dk translated">查看本周所有的<a class="ae kv" rel="noopener ugc nofollow" target="_blank" href="https://levelup.gitconnected.com/wotw/home"> Widget文章</a>并关注Gitconnected，确保你不会错过任何即将到来的Widget教程</p></blockquote><p id="0d37" class="pw-post-body-paragraph jn jo iq jp b jq kw js jt ju kx jw jx jy ky ka kb kc kz ke kf kg la ki kj kk ij bi translated">将一个<strong class="jp ir"> gif </strong>转换成一个<strong class="jp ir">全功能HTML </strong> <strong class="jp ir">控件</strong>并不像听起来那么简单，所以我也会写下这个过程，并解释解决棘手部分的原因。</p><p id="aeae" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">事不宜迟，本周小部件就是这个<strong class="jp ir">切换控件</strong>:</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lb"><img src="../Images/cbad697fb055611ab83b35fe377ed8cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*DJK6GiEZzErCBPOc.gif"/></div></div></figure><h2 id="6379" class="ln lo iq bd lp lq lr dn ls lt lu dp lv jy lw lx ly kc lz ma mb kg mc md me mf bi translated">准备元素</h2><p id="d7cd" class="pw-post-body-paragraph jn jo iq jp b jq mg js jt ju mh jw jx jy mi ka kb kc mj ke kf kg mk ki kj kk ij bi translated">首先，我们需要识别部件的各个部分。看起来我们需要一个容器来放置控件、背景、球和球里面的面。</p><p id="377a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">几乎所有的事情都可以用HTML + CSS完成。面部可以用一些CSS魔法来完成，但我认为启动一个应用程序并为它们创建SVG节点会更容易。我只是拍了一个截图，然后重画了一下:</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi ml"><img src="../Images/fb679589c441b66d7240116716b03166.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*GFYGKnXfdUYaIQKz.png"/></div></div><figcaption class="mm mn gj gh gi mo mp bd b be z dk translated">SVG在中间，截图在边缘</figcaption></figure><p id="57ca" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们现在有一切可以开始编码。</p><h2 id="6257" class="ln lo iq bd lp lq lr dn ls lt lu dp lv jy lw lx ly kc lz ma mb kg mc md me mf bi translated">HTML结构</h2><p id="dccf" class="pw-post-body-paragraph jn jo iq jp b jq mg js jt ju mh jw jx jy mi ka kb kc mj ke kf kg mk ki kj kk ij bi translated">基本结构看起来是这样的:</p><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="mq mr l"/></div><figcaption class="mm mn gj gh gi mo mp bd b be z dk translated">开始HTML</figcaption></figure><p id="1275" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后我开始给它们添加一些样式，我为背景和球面使用了边界半径，渐变和阴影帮助给球体增加体积。我还必须设置<code class="fe ms mt mu mv b">-webkit-tap-highlight-color</code>来移除当你点击移动时出现的高亮显示。然后，经过一些试验错误，我定位的面孔SVG。</p><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="mq mr l"/></div><figcaption class="mm mn gj gh gi mo mp bd b be z dk translated">开始CSS样式</figcaption></figure><h2 id="794b" class="ln lo iq bd lp lq lr dn ls lt lu dp lv jy lw lx ly kc lz ma mb kg mc md me mf bi translated">互动逻辑</h2><p id="ed07" class="pw-post-body-paragraph jn jo iq jp b jq mg js jt ju mh jw jx jy mi ka kb kc mj ke kf kg mk ki kj kk ij bi translated">为了让控件工作，我们需要一些JS代码，所以我导入了<a class="ae kv" href="https://vuejs.org/v2/guide/" rel="noopener ugc nofollow" target="_blank"> Vue.js </a>来快速集成功能。</p><p id="375f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这样的事情足以开始:</p><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="mq mr l"/></div><figcaption class="mm mn gj gh gi mo mp bd b be z dk translated">正在启动Vue.js逻辑</figcaption></figure><p id="0e22" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，我们只需要将toggle方法绑定到HTML中的toggle控件，如下所示:</p><pre class="lc ld le lf gt mw mv mx my aw mz bi"><span id="8377" class="ln lo iq mv b gy na nb l nc nd">&lt;div id="widget" class="center"&gt; <br/>  &lt;div @click="toggle" class="toggle-container"&gt;]<br/>    // ... rest of html</span></pre><p id="c05d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">目前不会有任何视觉上的变化，但是如果我们检查组件，它已经在工作了，每次点击都切换<code class="fe ms mt mu mv b">active</code>属性。所以接下来要做的是根据属性改变外观。</p><h2 id="ed5c" class="ln lo iq bd lp lq lr dn ls lt lu dp lv jy lw lx ly kc lz ma mb kg mc md me mf bi translated">将CSS类绑定到Vue属性</h2><p id="08b7" class="pw-post-body-paragraph jn jo iq jp b jq mg js jt ju mh jw jx jy mi ka kb kc mj ke kf kg mk ki kj kk ij bi translated">首先，我需要创建当开关是<code class="fe ms mt mu mv b">active</code>时应用的CSS规则，所以我创建了如下类</p><pre class="lc ld le lf gt mw mv mx my aw mz bi"><span id="e002" class="ln lo iq mv b gy na nb l nc nd">// CSS<br/>.ball-face.active {<br/>  left: 87px;<br/>}</span></pre><p id="82a3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这将在没有动画的情况下立即移动到正确的球面，因此我们需要在我们的<code class="fe ms mt mu mv b">.ball-face</code>类中进行转换:</p><pre class="lc ld le lf gt mw mv mx my aw mz bi"><span id="78e8" class="ln lo iq mv b gy na nb l nc nd">// CSS<br/>.ball-face {<br/>  ... other rules<br/>  transition: left .4s ease-in-out;<br/>}</span></pre><p id="c21a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这将在0.4秒内用类型<code class="fe ms mt mu mv b">in-out</code>的加速度(ease)的变化来激活属性<code class="fe ms mt mu mv b">left</code>。如果你想知道更多关于CSS中的过渡和什么是缓和，你可以查看<a class="ae kv" href="https://www.w3schools.com/css/css3_transitions.asp" rel="noopener ugc nofollow" target="_blank">这一页</a>。</p><p id="9968" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">之后，当Vue属性为真时，我们需要以某种方式将<code class="fe ms mt mu mv b">active</code>类添加到HTML中。我们需要像这样绑定类:</p><pre class="lc ld le lf gt mw mv mx my aw mz bi"><span id="7fcf" class="ln lo iq mv b gy na nb l nc nd">// HTML<br/>&lt;div :class="{'active': active}" class="ball-face"&gt;</span></pre><p id="02e1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">注意<code class="fe ms mt mu mv b">:class</code>中的冒号，它有助于绑定Vue属性来显示或隐藏‘active’类。该类将追加到已经定义的类“ball-face”中。</p><p id="5247" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我试图对其余的属性做同样的事情。我遇到的唯一问题是，当试图为容器设置动画背景颜色时，看起来CSS过渡还不支持这个属性。我不得不使用两种背景来解决这个问题，一种是灰色的，另一种是彩色的。我只需要制作不透明度的动画，而不是过渡颜色。</p><p id="53a1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于脸部，我也设置了左边属性的动画，然后在球里放了<code class="fe ms mt mu mv b">overflow: hidden;</code>来掩盖内容。这是它不带遮罩时的样子:</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/cf1df7d66d132cd5b3b1e21c283b7447.png" data-original-src="https://miro.medium.com/v2/resize:fit:900/0*L9tXAE9yjPojhgkI.gif"/></div><figcaption class="mm mn gj gh gi mo mp bd b be z dk translated">没有“溢出:隐藏”属性</figcaption></figure><h2 id="088a" class="ln lo iq bd lp lq lr dn ls lt lu dp lv jy lw lx ly kc lz ma mb kg mc md me mf bi translated">易接近</h2><p id="5871" class="pw-post-body-paragraph jn jo iq jp b jq mg js jt ju mh jw jx jy mi ka kb kc mj ke kf kg mk ki kj kk ij bi translated">我们的组件具有复选框的功能，所以根据<a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/ARIA_Techniques/Using_the_checkbox_role" rel="noopener ugc nofollow" target="_blank"> MDN webdocs </a>如果我们想让它可访问，我们需要添加几个属性。它还提到“空格”按钮应该切换控件，我认为“回车”键也应该切换它，所以我最后使用了这些绑定:</p><pre class="lc ld le lf gt mw mv mx my aw mz bi"><span id="1f8b" class="ln lo iq mv b gy na nb l nc nd">//HTML<br/>&lt;label for="toggleControl"&gt;Click the sleepy face!&lt;/label&gt;<br/>&lt;div @click="toggle"<br/>   @keyup.space="toggle"<br/>   @keyup.enter="toggle"<br/>   :aria-checked="isChecked" <br/>   class="toggle-container" <br/>   role="checkbox" <br/>   tabindex="0" id="toggleControl"&gt;<br/>     ... rest of html</span></pre><p id="84a5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">而现在最后的结果！</p><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="nf mr l"/></div></figure><p id="d631" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这就是本周的第一个<strong class="jp ir">小部件。</strong>如果你想在下周申请一个特定的小工具，请在评论区发布。</p><p id="714a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下周见，关注<a class="ae kv" href="https://levelup.gitconnected.com" rel="noopener ugc nofollow" target="_blank"> gitconnected </a>获取每周小工具！</p></div><div class="ab cl ng nh hu ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="ij ik il im in"><p id="2bff" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="nn">最初发表于</em><a class="ae kv" href="http://ederdiaz.com/blog/2018/04/04/smiley-toggle-wotw/" rel="noopener ugc nofollow" target="_blank"><em class="nn">Eder díaz</em></a><em class="nn">。</em></p></div></div>    
</body>
</html>