<html>
<head>
<title>How To Install Private NPM Packages In Microsoft AppCenter CI/CD</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Microsoft AppCenter CI/CD中安装私有NPM软件包</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/installing-private-npm-packages-in-microsoft-appcenter-ci-cd-13d61f02aab2?source=collection_archive---------29-----------------------#2020-05-04">https://levelup.gitconnected.com/installing-private-npm-packages-in-microsoft-appcenter-ci-cd-13d61f02aab2?source=collection_archive---------29-----------------------#2020-05-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/1c2bd402a2890b305383b459b62eff80.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o66kWKFjlEnyelmNBqk2oQ.png"/></div></div></figure><div class=""/><div class=""><h2 id="9688" class="pw-subtitle-paragraph kb jd je bd b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks dk translated">这篇文章假设你对NPM、应用中心和CI/CD有一个大致的了解。</h2></div><p id="400a" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">尝试为您的移动构建管道设置CI/CD，无论是Android还是iOS，都可能有点令人生畏。因为这个<a class="ae lp" href="https://appcenter.ms" rel="noopener ugc nofollow" target="_blank">微软应用中心</a>是很多人，尤其是单人开发者登陆的地方。</p><p id="5035" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">你可能遇到的一个问题是如何在构建过程中安装你的<a class="ae lp" href="https://docs.npmjs.com/creating-and-publishing-private-packages" rel="noopener ugc nofollow" target="_blank">私有NPM包</a>。如果设置不正确，您将在构建输出中看到类似如下的错误:</p><pre class="lq lr ls lt gt lu lv lw lx aw ly bi"><span id="b810" class="lz ma je lv b gy mb mc l md me">error An unexpected error occurred: "https://registry.yarnpkg.com/your-pacakge-name-1.1.3.tgz: Request failed "404 Not Found".</span></pre><p id="2d69" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">这是由于NPM在运行管道时拒绝AppCenter下载您的包而引发的错误。</p><h2 id="bcb3" class="lz ma je bd mf mg mh dn mi mj mk dp ml lc mm mn mo lg mp mq mr lk ms mt mu mv bi translated">怎么修</h2><ol class=""><li id="dafe" class="mw mx je kv b kw my kz mz lc na lg nb lk nc lo nd ne nf ng bi translated">在项目的根目录下创建一个<code class="fe nh ni nj lv b">.npmrc</code>文件</li><li id="bb61" class="mw mx je kv b kw nk kz nl lc nm lg nn lk no lo nd ne nf ng bi translated">在该文件中添加以下行:<code class="fe nh ni nj lv b">//registry.npmjs.org/:_authToken=${NPM_TOKEN}</code></li><li id="b102" class="mw mx je kv b kw nk kz nl lc nm lg nn lk no lo nd ne nf ng bi translated">签入文件，提交并推送到AppCenter构建的分支。</li><li id="7562" class="mw mx je kv b kw nk kz nl lc nm lg nn lk no lo nd ne nf ng bi translated">在AppCenter中，通过单击分支，然后在右上角找到扳手，转到分支配置设置。</li><li id="def0" class="mw mx je kv b kw nk kz nl lc nm lg nn lk no lo nd ne nf ng bi translated">在环境变量部分添加一个名为<code class="fe nh ni nj lv b">NPM_TOKEN</code>的新变量</li><li id="38c8" class="mw mx je kv b kw nk kz nl lc nm lg nn lk no lo nd ne nf ng bi translated">前往NPMJS.com = &gt;登录= &gt;点击您的个人资料头像并选择“授权令牌”</li><li id="9d8c" class="mw mx je kv b kw nk kz nl lc nm lg nn lk no lo nd ne nf ng bi translated">创建具有只读状态的新身份验证令牌。复制令牌并将其作为<code class="fe nh ni nj lv b">NPM_TOKEN</code>的值输入到AppCenter中</li><li id="f732" class="mw mx je kv b kw nk kz nl lc nm lg nn lk no lo nd ne nf ng bi translated">单击配置面板中的“保存并构建”。</li></ol><p id="339c" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">完成了。您的私有包现在应该安装了。</p></div><div class="ab cl np nq hx nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="im in io ip iq"><h1 id="642d" class="nw ma je bd mf nx ny nz mi oa ob oc ml kk od kl mo kn oe ko mr kq of kr mu og bi translated">开发无服务器时，希望恢复您的控制台日志吗？签出树枝…</h1><figure class="lq lr ls lt gt iv gh gi paragraph-image"><a href="https://www.twig.im/"><div class="gh gi oh"><img src="../Images/36a4b9f9e789e19a238bbaa9a45b7975.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zOVO7JmICUotRiX95LCOKA.jpeg"/></div></a></figure></div></div>    
</body>
</html>