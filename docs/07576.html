<html>
<head>
<title>Easy Link Generation in C# with @Url Extensions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用@Url扩展在C#中轻松生成链接</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/easy-link-generation-in-c-with-url-extensions-96183a4f2d84?source=collection_archive---------10-----------------------#2021-02-24">https://levelup.gitconnected.com/easy-link-generation-in-c-with-url-extensions-96183a4f2d84?source=collection_archive---------10-----------------------#2021-02-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="ae63" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何充分利用新的C#源代码生成器</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/c1ae32afdb8dfa9cfe584d906397c5b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*yhOD1zTebfx8Wt_d"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">丹尼尔·冯·阿彭在Unsplash<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">拍摄的照片</a></figcaption></figure><h1 id="4a24" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">介绍</h1><p id="97a6" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">自从C# MVC开始以来，开发人员一直在努力寻找在他们的视图中生成<strong class="lt iu">URL的最佳方式。有些人用字符串内插法写下整个URL，而有些人用<code class="fe mn mo mp mq b">@Url.Action("Action", "Controller")</code>。随着ASP.NET核心，微软推出了<a class="ae ky" href="https://docs.microsoft.com/en-us/aspnet/core/mvc/views/tag-helpers/intro?view=aspnetcore-5.0" rel="noopener ugc nofollow" target="_blank">标签助手</a>，但它仍然缺乏智能感知功能，因为它仍然使用神奇的字符串。</strong></p><p id="2fe3" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">在本文中，我将向您展示如何通过使用一个非常有用的名为<strong class="lt iu"> UrlActionGenerator </strong>的包，在ASP.NET核心MVC应用程序中轻松生成链接。因此，让我们深入了解这个包使用的技术，并了解如何使用它来自己生成链接。</p><p id="605b" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated"><strong class="lt iu">TL；DR；</strong></p><ul class=""><li id="b776" class="mw mx it lt b lu mr lx ms ma my me mz mi na mm nb nc nd ne bi translated">使用包<a class="ae ky" href="https://github.com/sleeuwen/UrlActionGenerator" rel="noopener ugc nofollow" target="_blank"> UrlActionGenerator </a>轻松生成链接</li><li id="202c" class="mw mx it lt b lu nf lx ng ma nh me ni mi nj mm nb nc nd ne bi translated">在生成过程中获取IntelliSense和有关链接生成的生成错误信息</li></ul></div><div class="ab cl nk nl hx nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="im in io ip iq"><h1 id="96c8" class="kz la it bd lb lc nr le lf lg ns li lj jz nt ka ll kc nu kd ln kf nv kg lp lq bi translated">技术</h1><p id="f620" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">就像我之前说的，我们将使用包<a class="ae ky" href="https://github.com/sleeuwen/UrlActionGenerator" rel="noopener ugc nofollow" target="_blank"> UrlActionGenerator </a>。本包由<a class="ae ky" href="https://github.com/sleeuwen" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu"> SLeeuwen </strong> </a>编写。UrlActionGenerator利用了<strong class="lt iu">源生成器</strong>技术。根据微软的说法:“源代码生成器是在编译过程中运行的一段代码，它可以检查你的程序，以生成与你的代码的其余部分一起编译的附加文件。”</p><p id="7b20" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">你现在可能会问自己，但这对我有什么好处？别担心😊我也这么做了。</p><p id="7868" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">要了解所有的好处，我强烈推荐阅读来自的这篇文章。网队。一个很好的收获是，通过在编译时执行<strong class="lt iu">控制器发现阶段</strong>，源代码生成器可以用来提高应用程序的性能。这可能会导致一些更快的启动时间，因为今天在运行时发生的动作可能会被推到编译时。</p><p id="1ac1" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">SLeeuwen 看到了这个机会，决定利用它。他写了一个库，使用源代码生成器在编译时发现你的控制器和动作。这些动作将作为扩展方法添加到<code class="fe mn mo mp mq b">IUrlHelper</code>类中。使用该软件包有两大好处:</p><h2 id="4f9d" class="nw la it bd lb nx ny dn lf nz oa dp lj ma ob oc ll me od oe ln mi of og lp oh bi translated">优势</h2><ul class=""><li id="5545" class="mw mx it lt b lu lv lx ly ma oi me oj mi ok mm nb nc nd ne bi translated"><strong class="lt iu"> IntelliSense </strong>是各种代码编辑功能的统称，包括代码完成、参数信息、快速信息和成员列表。UrlActionGenerator为URL生成提供了所有这些选项</li><li id="2aff" class="mw mx it lt b lu nf lx ng ma nh me ni mi nj mm nb nc nd ne bi translated"><strong class="lt iu">构建错误信息</strong>是UrlActionGenerator的另一个非常有用的好处。当控制器方法需要参数时，当您在视图中使用URL生成器时，编译器会直接警告您。</li></ul></div><div class="ab cl nk nl hx nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="im in io ip iq"><h1 id="b018" class="kz la it bd lb lc nr le lf lg ns li lj jz nt ka ll kc nu kd ln kf nv kg lp lq bi translated">使用</h1><p id="1810" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">UrlActionGenerator的GitHub库很好地展示了如何在代码中使用这个包，这也是我在这里使用这个例子的原因。</p><h2 id="4118" class="nw la it bd lb nx ny dn lf nz oa dp lj ma ob oc ll me od oe ln mi of og lp oh bi translated">无参数</h2><p id="3abe" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">假设我们有以下控制器:</p><pre class="kj kk kl km gt ol mq om on aw oo bi"><span id="5551" class="nw la it mq b gy op oq l or os">public class HomeController : Controller<br/>{<br/>    public IActionResult Index()<br/>    {<br/>        return View();<br/>    }<br/>}</span></pre><p id="39af" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">然后，我们可以在您的视图中使用以下代码轻松生成该操作的URL—<code class="fe mn mo mp mq b">/Home/Index</code>:</p><pre class="kj kk kl km gt ol mq om on aw oo bi"><span id="7c26" class="nw la it mq b gy op oq l or os">@<!-- -->Url.Actions().Home.Index()</span></pre><h2 id="137f" class="nw la it bd lb nx ny dn lf nz oa dp lj ma ob oc ll me od oe ln mi of og lp oh bi translated">带参数</h2><p id="80c4" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">但这还不是全部。有了这个包，我们还可以生成包含参数的链接。如果我们有以下控制器方法:</p><pre class="kj kk kl km gt ol mq om on aw oo bi"><span id="5623" class="nw la it mq b gy op oq l or os">public class HomeController : Controller<br/>{<br/>    public IActionResult Search(int page, int pageSize = 20)<br/>    {<br/>        return View();<br/>    }<br/>}</span></pre><p id="e5a1" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">我们可以用下面的代码生成URL:</p><pre class="kj kk kl km gt ol mq om on aw oo bi"><span id="5d27" class="nw la it mq b gy op oq l or os">@Url.Actions().Home.Search(1);                  &lt;-- 1.<br/>@Url.Actions().Home.Search(2, pageSize: 50);    &lt;-- 2.</span></pre><p id="9e12" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">这将为1生成URL“<code class="fe mn mo mp mq b">/Home/Search?page=1</code>”，为2生成URL“<code class="fe mn mo mp mq b">/Home/Search?page=2&amp;pageSize=50</code>”。正如你所看到的，因为参数<code class="fe mn mo mp mq b">page</code>是必需的，你<strong class="lt iu">必须</strong>把它提供给方法。如果不这样做，将会产生一个构建错误。</p></div><div class="ab cl nk nl hx nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="im in io ip iq"><h1 id="abef" class="kz la it bd lb lc nr le lf lg ns li lj jz nt ka ll kc nu kd ln kf nv kg lp lq bi translated">结论</h1><p id="72d1" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">很长一段时间以来，MVC开发人员都在努力寻找在他们的视图中生成URL的最佳方式。但地平线上终于有了一丝曙光。包<a class="ae ky" href="https://github.com/sleeuwen/UrlActionGenerator" rel="noopener ugc nofollow" target="_blank"> UrlActionGenerator </a>为开发人员提供了一种使用智能感知生成链接和构建错误信息的新方法。</p><p id="3366" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">有关如何实现该包的更多信息，请查看存储库中提供的示例项目:<a class="ae ky" href="https://github.com/sleeuwen/UrlActionGenerator/tree/master/samples/AspNetCoreSample" rel="noopener ugc nofollow" target="_blank">https://github . com/sleeuwen/UrlActionGenerator/tree/master/samples/AspNetCoreSample</a></p><p id="110e" class="pw-post-body-paragraph lr ls it lt b lu mr ju lw lx ms jx lz ma mt mc md me mu mg mh mi mv mk ml mm im bi translated">快乐编码😊</p></div><div class="ab cl nk nl hx nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="im in io ip iq"><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ot"><img src="../Images/095d3d82a769bfc84cc3b54b1e73c6d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hVfgU40RCMeP9Wq-HfSUlg@2x.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://ko-fi.com/koenvanzeijl" rel="noopener ugc nofollow" target="_blank">https://ko-fi.com/koenvanzeijl</a></figcaption></figure></div><div class="ab cl nk nl hx nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="im in io ip iq"><h1 id="b926" class="kz la it bd lb lc nr le lf lg ns li lj jz nt ka ll kc nu kd ln kf nv kg lp lq bi translated">资源</h1><ul class=""><li id="a003" class="mw mx it lt b lu lv lx ly ma oi me oj mi ok mm nb nc nd ne bi translated">微软博客:<a class="ae ky" href="https://devblogs.microsoft.com/dotnet/introducing-c-source-generators/" rel="noopener ugc nofollow" target="_blank">https://dev blogs . Microsoft . com/dotnet/introducing-c-source-generators</a></li><li id="a0bf" class="mw mx it lt b lu nf lx ng ma nh me ni mi nj mm nb nc nd ne bi translated">套餐:【https://github.com/sleeuwen/UrlActionGenerator T2】</li></ul></div></div>    
</body>
</html>