<html>
<head>
<title>Go 1.16 Embed: First Impressions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Go 1.16嵌入:第一印象</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/go-1-16-embed-first-impressions-464e07020cca?source=collection_archive---------6-----------------------#2021-02-18">https://levelup.gitconnected.com/go-1-16-embed-first-impressions-464e07020cca?source=collection_archive---------6-----------------------#2021-02-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/e58bbaaa3f60088d7b8b823cc1de95f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OlKA2iU4oF9JMxgMoVA3QQ.png"/></div></div></figure><p id="ae08" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">Go 1.16增加了<a class="ae kz" href="https://golang.org/doc/go1.16#library-embed" rel="noopener ugc nofollow" target="_blank">嵌入包</a>。理论上，它为我以前如何实现一些东西提供了一个更好的解决方案，所以我尝试了一下。</p><h2 id="3ef2" class="la lb it bd lc ld le dn lf lg lh dp li km lj lk ll kq lm ln lo ku lp lq lr ls bi translated">形势</h2><p id="3e7e" class="pw-post-body-paragraph kb kc it kd b ke lt kg kh ki lu kk kl km lv ko kp kq lw ks kt ku lx kw kx ky im bi translated">所以，我有一个大的字符串模板，我用它来生成一些输出。之前我做了以下工作:</p><pre class="ly lz ma mb gt mc md me mf aw mg bi"><span id="b550" class="la lb it md b gy mh mi l mj mk">const (<br/>  TemplateStr = `</span><span id="57f2" class="la lb it md b gy ml mi l mj mk">blah blah blah some big string contents goes here ... </span><span id="4820" class="la lb it md b gy ml mi l mj mk">Mauris mollis neque nisl, sit amet facilisis nulla finibus ut. Aliquam massa metus, imperdiet a finibus accumsan, interdum vitae felis. Ut et dapibus purus, sed mattis nunc. Mauris dui nunc, suscipit consectetur vulputate sit amet, luctus feugiat leo. Quisque fermentum lacus vitae facilisis feugiat. Nulla ut turpis ac nisl faucibus aliquet vitae eu dolor. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Suspendisse vitae tempor mi, eu posuere nisi.</span><span id="52d1" class="la lb it md b gy ml mi l mj mk">`<br/>)</span></pre><p id="0b9d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">简单地说，我在Go文件中创建了一个又大又丑的字符串常量。</p><p id="36ec" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">用<em class="mm">嵌入</em>肯定更好；</p><pre class="ly lz ma mb gt mc md me mf aw mg bi"><span id="6f55" class="la lb it md b gy mh mi l mj mk">//go:embed template.txt<br/>var TemplateStr string</span></pre><p id="9ba7" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">然后一个文件<em class="mm"> template.txt </em>里面有内容。非常好。</p><h2 id="2bf2" class="la lb it bd lc ld le dn lf lg lh dp li km lj lk ll kq lm ln lo ku lp lq lr ls bi translated">非常好，但不完美…</h2><p id="6366" class="pw-post-body-paragraph kb kc it kd b ke lt kg kh ki lu kk kl km lv ko kp kq lw ks kt ku lx kw kx ky im bi translated">要嵌入文件，你需要使用一个<em class="mm">变量</em>。从实际实现的角度来看，我可以理解为什么。<em class="mm"> var </em>语法提供类型信息，没有const的特定类型约束，也不需要初始值。但是在一个完美的世界里，如果我嵌入一个文件的内容，它很可能被用作一个不可变的值，也就是一个常量。我希望能够将变量保留为常量，并使用embed来设置它。</p></div></div>    
</body>
</html>