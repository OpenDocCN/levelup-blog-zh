<html>
<head>
<title>Notorious RGB</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">臭名昭著的RGB</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/notorious-rgb-756f19f3e462?source=collection_archive---------4-----------------------#2020-04-18">https://levelup.gitconnected.com/notorious-rgb-756f19f3e462?source=collection_archive---------4-----------------------#2020-04-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="3d10" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">Javascript中的图像处理—颜色模型</h2></div><p id="bb25" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是Javascript图像处理系列文章的第二部分。在上一期中，我介绍了如何读取图像的像素，在GPU上处理它们，并在画布上显示它们。看看这个。</p><ol class=""><li id="245f" class="lb lc iq kh b ki kj kl km ko ld ks le kw lf la lg lh li lj bi translated">看这张照片</li></ol><p id="9203" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae lk" href="https://srmullen.github.io/color_kernels/" rel="noopener ugc nofollow" target="_blank">用我建的演示网站马上开始编辑照片。</a></p><p id="f4d2" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">简单回顾一下，我们正在使用<a class="ae lk" href="https://gpu.rocks/" rel="noopener ugc nofollow" target="_blank"> GPU.js </a>来并行化我们的图像处理算法。这是显示图像的代码。</p><figure class="ll lm ln lo gt lp"><div class="bz fp l di"><div class="lq lr l"/></div></figure><p id="5545" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">像素数据存储为红色、绿色和蓝色强度值。这对于数字图像格式(如PNG和GIF)来说很常见，而且很有意义。计算机屏幕的物理像素由微小的红色、绿色和蓝色光组成，当这些光组合在一起时，我们可以感知可见光谱中的任何颜色。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi ls"><img src="../Images/11e51ed6265c8055c45691e48a02bc85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Js8FdjjNyEjiUtsZ"/></div></div><figcaption class="lz ma gj gh gi mb mc bd b be z dk translated">迈克尔·马森在<a class="ae lk" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="cd7d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这并不是表现颜色的唯一方式。当使用光源(如电脑显示器上的发光二极管)创建颜色时，它工作得很好，但对于其他介质就不太好了。考虑粉刷你的新栅栏。你不会把红色、绿色和蓝色的油漆混合在一起，然后期望它是白色的。HOA会敲你的门。由于这个原因，RGB颜色模型被认为是一个<em class="md">加色</em>模型。每种成分颜色添加得越多，合成色就越亮。</p><p id="d06d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用墨水、颜料等时。我们正在研究一个<em class="md">减法</em>模型。与其用光来为我们创造颜色，不如让外部光源投射到我们的媒介上。添加到介质中的任何颜料都会吸收光线并反射你看到的颜色。以减色方式添加颜色的标准模式是CMYK，它代表青色-品红色-黄色-调。关键是黑色的组成部分，这样称呼是因为它给图像增加了细节，或者是维基百科告诉我的。您可能对它们很熟悉，因为它们很可能是彩色打印机墨盒中的墨水。</p><p id="e888" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们来看看CMYK通道是什么样子的。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi me"><img src="../Images/871b0e7fad1f1c383ee50ef026143573.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZtNuNB_2VunbnW-K5PpAUg.png"/></div></div><figcaption class="lz ma gj gh gi mb mc bd b be z dk translated">CMYK通道:左下角=青色，左上角=洋红色，右上角=黄色，右下角=键</figcaption></figure><p id="0489" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在让我们看看CMYK通道如何重叠，以创建一个自然的彩色图像。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi me"><img src="../Images/df1c99145ed9a76562038ac77342f285.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TvPVzUNlF6zkogTDkd-P0g.png"/></div></div><figcaption class="lz ma gj gh gi mb mc bd b be z dk translated">中心包含所有CMYK通道。</figcaption></figure><h1 id="a720" class="mf mg iq bd mh mi mj mk ml mm mn mo mp jw mq jx mr jz ms ka mt kc mu kd mv mw bi translated">将RGB转换为CMYK(然后再转换回来)</h1><p id="9be9" class="pw-post-body-paragraph kf kg iq kh b ki mx jr kk kl my ju kn ko mz kq kr ks na ku kv kw nb ky kz la ij bi translated">像RGB一样，我们将使用0到1范围内的CMYK值。将RGB转换为CMYK的公式如下。</p><pre class="ll lm ln lo gt nc nd ne nf aw ng bi"><span id="14fe" class="nh mg iq nd b gy ni nj l nk nl">key = max(red, green, blue)<br/>cyan = (1 - red - key) / (1 - key)<br/>magenta = (1 - green - key) / (1 - key)<br/>yellow = (1 - blue - key) / (1 - key)</span></pre><p id="c32b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">和CMYK转换回RGB</p><pre class="ll lm ln lo gt nc nd ne nf aw ng bi"><span id="ebec" class="nh mg iq nd b gy ni nj l nk nl">red = (1 - cyan) * (1 - key)<br/>green = (1 - magenta) * (1 - key)<br/>blue = (1 - yellow) * (1 - key)</span></pre><h2 id="6834" class="nh mg iq bd mh nm nn dn ml no np dp mp ko nq nr mr ks ns nt mt kw nu nv mv nw bi translated">在GPU上定义函数。</h2><p id="4657" class="pw-post-body-paragraph kf kg iq kh b ki mx jr kk kl my ju kn ko mz kq kr ks na ku kv kw nb ky kz la ij bi translated">在上一个教程中，我们创建了内核函数。这些将我们的数据移动到GPU上进行并行处理。我们也可以编写像普通Javascript函数一样工作的函数，但是可以在GPU上的内核中使用。GPU.js提供了一个方法来完成这个任务:<code class="fe nx ny nz nd b">gpu.addFunction.</code>它接受一个命名函数作为参数。我们在这里用它来帮助简化代码，让它更清楚内核在做什么。</p><figure class="ll lm ln lo gt lp"><div class="bz fp l di"><div class="lq lr l"/></div></figure><p id="031a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这个例子中，我们添加了<code class="fe nx ny nz nd b">rgb2cmyk</code>和<code class="fe nx ny nz nd b">cmyk2rgb</code>函数。在第28行，RGB值被转换成CMYK。然后，我们可以随心所欲地处理CMYK值。在第30到33行，它们与内核的一个参数相乘。第36行看到我们修改后的CMYK值变回RGB，这样它们就可以写入画布。</p><p id="76e5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae lk" href="https://srmullen.github.io/color_kernels/?mode=cmyk" rel="noopener ugc nofollow" target="_blank">在这里试试这个内核。</a></p><h1 id="4d76" class="mf mg iq bd mh mi mj mk ml mm mn mo mp jw mq jx mr jz ms ka mt kc mu kd mv mw bi translated">HSV——一罐颜色</h1><p id="26f7" class="pw-post-body-paragraph kf kg iq kh b ki mx jr kk kl my ju kn ko mz kq kr ks na ku kv kw nb ky kz la ij bi translated">HSV或色调-饱和度-值不同于RGB和CMYK。与它们不同的是，它不是基于颜色混合。相反，它被设计成更符合人类对颜色的感知。HSV颜色模型通常显示为圆柱体。</p><div class="oa ob gp gr oc od"><a href="https://commons.wikimedia.org/wiki/File:HSV_color_solid_cylinder_saturation_gray.png#/media/File:HSV_color_solid_cylinder_saturation_gray.png" rel="noopener  ugc nofollow" target="_blank"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd ir gy z fp oi fr fs oj fu fw ip bi translated">HSV彩色实心圆柱饱和度gray.png</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">来自维基共享，自由媒体仓库</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">commons.wikimedia.org</p></div></div><div class="om l"><div class="on l oo op oq om or lx od"/></div></div></a></div><p id="f0c1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">沿着圆柱体的圆周是完全饱和的颜色。向圆柱体中心移动会降低颜色的饱和度或强度。值是颜色阴影的度量。值为0时总是黑色，值为1时没有阴影。</p><p id="4627" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">色调是用旋转角度来表示颜色。<strong class="kh ir">为0时为红色</strong>。当我们开始围绕圆柱体旋转时，我们到达120°处的绿色。0到120之间的颜色是红色和绿色之间的线性插值。圆柱体周围的下一个120度从绿色变为蓝色，然后在360度从蓝色变回红色。我觉得有趣的是，这种线性插值在纯红色、绿色和蓝色角度的中间点产生青色、品红色和黄色。</p><p id="1ad5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了让您了解更改色调的工作原理，下图显示了对每个像素应用90°增量旋转后的图像外观。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi me"><img src="../Images/77e5f3ef502609d7cf33b8ced7d7eab0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*da0r518Ya_2r5DGv_911Kg.png"/></div></div><figcaption class="lz ma gj gh gi mb mc bd b be z dk translated">色调旋转:左下角= 0，左上角= 90，右上角= 180，右下角= 270</figcaption></figure><p id="2530" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">下面是在HSV和RGB颜色模型之间转换的代码。颜色模型转换比CMYK稍微复杂一点，但是这段代码遵循与CMYK转换示例相同的大纲。</p><figure class="ll lm ln lo gt lp"><div class="bz fp l di"><div class="lq lr l"/></div></figure><p id="0b5c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这里使用内核！</p><p id="98a0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">还有很多其他的颜色模型可以探索。HSL，或HSB，(色调-饱和度-明度/亮度)是另一种在概念上类似于HSV的常见模型。</p><h2 id="02dd" class="nh mg iq bd mh nm nn dn ml no np dp mp ko nq nr mr ks ns nt mt kw nu nv mv nw bi translated"><strong class="ak">脚注</strong></h2><p id="c50a" class="pw-post-body-paragraph kf kg iq kh b ki mx jr kk kl my ju kn ko mz kq kr ks na ku kv kw nb ky kz la ij bi translated">[1]我要涉入GIF发音的争论，只是因为我喜欢它。长颈鹿。</p><p id="d43e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">[2]我正在使用的公式来自<a class="ae lk" href="https://www.rapidtables.com/convert/color/cmyk-to-rgb.html" rel="noopener ugc nofollow" target="_blank">快速表格</a>。</p></div></div>    
</body>
</html>