<html>
<head>
<title>What I’ve Learned Reviewing Over 3500 Pull Requests On GitHub</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在GitHub上查看超过3500个拉取请求，我学到了什么</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/what-ive-learned-reviewing-over-3500-pull-requests-on-github-ff542e35ee96?source=collection_archive---------8-----------------------#2022-10-10">https://levelup.gitconnected.com/what-ive-learned-reviewing-over-3500-pull-requests-on-github-ff542e35ee96?source=collection_archive---------8-----------------------#2022-10-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6f3c" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">该做的和不该做的以及如何改进。</h2></div><p id="a5a8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我写这篇文章是为了帮助你的校对工作，因为我觉得这项任务被误解了或者被认为是忘恩负义的。</p><blockquote class="le"><p id="5b80" class="lf lg it bd lh li lj lk ll lm ln ld dk translated">但是什么是代码审查呢？</p></blockquote><p id="57b2" class="pw-post-body-paragraph ki kj it kk b kl lo ju kn ko lp jx kq kr lq kt ku kv lr kx ky kz ls lb lc ld im bi translated">对于许多人，也许是绝大多数开发人员或数据人员来说，这是一个极好的定义:</p><blockquote class="le"><p id="a51c" class="lf lg it bd lh li lj lk ll lm ln ld dk translated">此任务包括分析代码以检测错误和bug，无论它们是功能问题(代码没有做它应该做的事情)、回归(代码破坏了现有的行为)、语法错误(一个被遗忘的chevron，一个未定义的变量)还是符合项目的标准(缩进、命名规范、语言标准)等。</p></blockquote><figure class="lu lv lw lx ly lz gh gi paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><div class="gh gi lt"><img src="../Images/3e048bb9539fd640841d3dfcfa58aaec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*R3Wci2X7gjKndpG0"/></div></div><figcaption class="mg mh gj gh gi mi mj bd b be z dk translated"><strong class="bd mk">代码审查</strong>由<a class="ae ml" href="https://unsplash.com/@alvarordesign?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Alvaro Reyes </a>在<a class="ae ml" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上进行</figcaption></figure><p id="b344" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因此，在一个开源项目的环境中，校对者判断同事甚至外部人员的工作，并且必须指出其中所有负面的东西。</p><p id="40f5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果这是你期望从同事那里得到的那种代码审查，你将很难找到志愿者。</p><p id="76f9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在不质疑这个定义的情况下，我发现它是有限的，有时还有点错误:我将与您讨论代码评审的其他用途。</p><h2 id="fd64" class="mm mn it bd mk mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">代码评审是一个知识来源</h2><p id="6b2a" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi translated">我要求或做的大多数代码评审都是在这种背景下完成的。</p><p id="131b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，在2019年的PrestaShop项目中，没有一个公认的贡献逃过Sauro…uh Mick al Andrieu的眼睛。</p><p id="5723" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">据GitHub称，这仍然占我贡献的40%,在我看来，占我工作时间的60 %- 70%。</p><p id="caa5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为什么？因为我们都知道，不是所有的东西都将被记录，不是所有的东西都将被测试，然而有人必须能够维护在开发分支上已经被接受的所有东西:)</p><p id="8394" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">真诚地说，认为做出贡献的人会在需要的时候出现是一种错觉；在大多数开发人员每两年换一份工作的情况下，这是非常幼稚的。</p><p id="d38f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这个代码审查期间，我可以问一些关于上下文的问题，关于“<strong class="kk iu"> <em class="nj">为什么</em> </strong>”我们正在这样做，如果我们做了一些有点脏的事情，解释一下原因。看到我写“为了记录……”并不罕见，因为有一天当你不得不回到贡献上来理解为什么“那个混蛋”(妈的，是我xD)那样编码时，有时间的背景是有帮助的…</p><figure class="nl nm nn no gt lz gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/708bf279010338bf44aa5eee0b26a10a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1344/format:webp/1*8drdilJBQ6H4121zMXBWMg.png"/></div><figcaption class="mg mh gj gh gi mi mj bd b be z dk translated">但是他为什么要碰这个模板呢？啊…好吧！</figcaption></figure><h2 id="c607" class="mm mn it bd mk mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">代码评审是一种交流工具</h2><p id="45d4" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi translated">我在代码评审中越来越多地整合的一件事是“非开发人员”的意见，通过获取一段代码并解释其来龙去脉来获得他们对该主题的意见。</p><p id="adbb" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，当添加一个新特性时，我意识到所选择的实现会对另一个特性产生影响。那时，我联系了产品团队的某个人，解释了所选解决方案的优缺点，并请他们做出决定。</p><p id="a73b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">理想情况下，在代码审查中，我希望所有相关人员都参与进来:架构师验证实现没有破坏所选的架构选择，内容经理验证内容，开发人员回顾代码错误或优化，产品/QA经理确认这是所期望的…有了我们的工具，我们可以让每个人都参与到代码审查过程中。</p><p id="96c6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">PrestaShop已经是这种情况，根据捐款情况，有:</p><ul class=""><li id="53c9" class="np nq it kk b kl km ko kp kr nr kv ns kz nt ld nu nv nw nx bi translated">负责验证翻译密钥的人员；</li><li id="4063" class="np nq it kk b kl ny ko nz kr oa kv ob kz oc ld nu nv nw nx bi translated">有时社区成员会发表他们的意见；</li><li id="2b1c" class="np nq it kk b kl ny ko nz kr oa kv ob kz oc ld nu nv nw nx bi translated">至少一个甚至两个开发者，取决于贡献的大小；</li><li id="473b" class="np nq it kk b kl ny ko nz kr oa kv ob kz oc ld nu nv nw nx bi translated">一个来自产品团队的人，因为软件必须保证产品的一致性；</li><li id="cf93" class="np nq it kk b kl ny ko nz kr oa kv ob kz oc ld nu nv nw nx bi translated">…最后是质量和保证团队，没有他们，任何东西都不会被接受！</li></ul><figure class="nl nm nn no gt lz gh gi paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><div class="gh gi od"><img src="../Images/da56e780456381e77b0f1cf3cdf26e23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pUufHp0OTyU1WA9A-n41VQ.png"/></div></div><figcaption class="mg mh gj gh gi mi mj bd b be z dk translated">而且七个参与者都知道这个功能！</figcaption></figure><p id="40ee" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">很多人围绕一段代码交流，这没什么👼</p><h2 id="e765" class="mm mn it bd mk mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">代码评审是一种工具，用于…代码改进</h2><p id="3238" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi translated">当然，这始终是代码评审的目标之一，但我倾向于限制范围(或者限制自己)。让我们明确一点:我们总是可以改进代码。</p><blockquote class="le"><p id="9256" class="lf lg it bd lh li lj lk ll lm ln ld dk translated">问题是:什么时候足够好？</p></blockquote><p id="2b22" class="pw-post-body-paragraph ki kj it kk b kl lo ju kn ko lp jx kq kr lq kt ku kv lr kx ky kz ls lb lc ld im bi translated">在这些问题上，只要代码具有足够的可扩展性，被测试覆盖，并且不存在明显的错误风险，就很好。</p><p id="6a6a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">对我来说，更重要的是命名、结构和文档:一致性是必不可少的，尤其是对于理解起来很复杂的大型旧项目。</p><p id="176c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">有时，一个好的命名或者将一段代码重构为一个或多个好的函数(并且只有一个职责)可以限制编写文档的需要。</p><p id="dd5f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我有一个非常个人化的规则:<strong class="kk iu">没有记载的就不存在</strong>。</p><p id="436e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我还决定禁止PrestaShop添加任何带有boolean参数的函数:不仅在3周内没有人知道这个参数改变了什么，而且更重要的是，如果函数的行为根据boolean而改变，它有两种行为😃</p><p id="5ac1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我在代码审查中改进得越多，我就越要求短函数，理想情况下，有0或1个参数，以及有特殊责任的短类。</p><p id="93a9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">大遗留</strong>项目的主要问题不是拥有成千上万的文件，而是理解和掌握每个文件的作用…</p><h2 id="5d00" class="mm mn it bd mk mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">编码标准的重要性</h2><p id="9948" class="pw-post-body-paragraph ki kj it kk b kl ne ju kn ko nf jx kq kr ng kt ku kv nh kx ky kz ni lb lc ld im bi translated"><strong class="kk iu">不要浪费你的时间⛔ </strong></p><p id="31f0" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一定要喜欢Symfony、API Platform、PrestaShop或任何其他严肃的项目:设置您需要的linter/fixer工具，尽量不要发明您的标准，让机器人来处理它！</p><figure class="nl nm nn no gt lz gh gi paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><div class="gh gi od"><img src="../Images/2b3944a1173c29cdb03916a515df0b6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AYZMV8LvuLmCjs5hopH6yw.png"/></div></div><figcaption class="mg mh gj gh gi mi mj bd b be z dk translated">我们最终在PrestaShop完成了这种类型的代码审查。</figcaption></figure><blockquote class="oe of og"><p id="77fa" class="ki kj nj kk b kl km ju kn ko kp jx kq oh ks kt ku oi kw kx ky oj la lb lc ld im bi translated">如果有一件事让我恼火，也应该让你们所有人恼火的话，那就是看到一个开发人员在一个贡献上浪费了一个半小时，却只得到了没有对齐的空格、逗号和大括号。</p></blockquote><h2 id="1d06" class="mm mn it bd mk mo mp dn mq mr ms dp mt kr mu mv mw kv mx my mz kz na nb nc nd bi translated">如何提高自己的代码审查技巧？</h2><figure class="nl nm nn no gt lz gh gi paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><div class="gh gi ok"><img src="../Images/8abee81ad82ef3636eba8ef001e27971.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*cHVdzhXMPesUy81G"/></div></div><figcaption class="mg mh gj gh gi mi mj bd b be z dk translated">照片由<a class="ae ml" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的<a class="ae ml" href="https://unsplash.com/@javaistan?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Afif Ramdhasuma </a>拍摄</figcaption></figure><p id="d5d9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">以下是我在过去几个月里做的/理解的一些小事，它们产生了积极的影响:</p><ol class=""><li id="8f77" class="np nq it kk b kl km ko kp kr nr kv ns kz nt ld ol nv nw nx bi translated">指出错误并<strong class="kk iu">还一些你认为做得很好的事情</strong>(例如，哇，很好地使用了* * *)；</li><li id="0e16" class="np nq it kk b kl ny ko nz kr oa kv ob kz oc ld ol nv nw nx bi translated">在所有情况下，<strong class="kk iu">感谢审查和验证你的代码的人</strong>；</li><li id="6794" class="np nq it kk b kl ny ko nz kr oa kv ob kz oc ld ol nv nw nx bi translated">无论如何，<strong class="kk iu">感谢贡献的人</strong>，即使你拒绝了(反正开源更合适)；</li><li id="41a9" class="np nq it kk b kl ny ko nz kr oa kv ob kz oc ld ol nv nw nx bi translated">将你的贡献联系起来！我们说RTFM(阅读F***手册)，而不是RTFC(阅读F***代码)有一个很好的理由:<strong class="kk iu">代码不包含所有的商业知识</strong>，这是即使你是一个DDD迷(但它有帮助👊);</li><li id="f991" class="np nq it kk b kl ny ko nz kr oa kv ob kz oc ld ol nv nw nx bi translated"><strong class="kk iu">千万不要说“真蠢，……”之类的话</strong>而如果非要进行强烈的批评，就说“这个代码/这个块”来指向作品而不是人；</li><li id="7262" class="np nq it kk b kl ny ko nz kr oa kv ob kz oc ld ol nv nw nx bi translated">我再次强调善意。<strong class="kk iu">幽默可以帮助</strong>；</li><li id="5622" class="np nq it kk b kl ny ko nz kr oa kv ob kz oc ld ol nv nw nx bi translated">如果有不清楚的地方，不要犹豫<strong class="kk iu">把代码带回你的机器并尝试。</strong> <br/>我越来越多地问我的同事，“你是检查了它的工作情况，还是只是看了代码？”通常…一些代码重读需要检查诱发的行为。这不是奖金，而是预期工作的一部分😜；</li><li id="be0f" class="np nq it kk b kl ny ko nz kr oa kv ob kz oc ld ol nv nw nx bi translated"><strong class="kk iu">做代码评审比写代码更有价值。为什么？因为一份贡献，只要不被接受，就没有价值:每周做20份贡献并接受10份，比做70份贡献并接受5份要好。这个规则，不管是什么项目，总是有效的；</strong></li></ol><p id="d0be" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">你如何组织你的代码评审？我期待着听到你对这个问题的不同观点！</p></div><div class="ab cl om on hx oo" role="separator"><span class="op bw bk oq or os"/><span class="op bw bk oq or os"/><span class="op bw bk oq or"/></div><div class="im in io ip iq"><p id="52bf" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你喜欢这篇文章，<a class="ae ml" href="https://medium.com/@mickael-andrieu/" rel="noopener">关注我</a>，我会在以后发布文章时通知你！</p><div class="ot ou gp gr ov ow"><a href="https://medium.com/@mickael-andrieu/membership" rel="noopener follow" target="_blank"><div class="ox ab fo"><div class="oy ab oz cl cj pa"><h2 class="bd iu gy z fp pb fr fs pc fu fw is bi translated">通过我的推荐链接加入Medium-mickal Andrieu</h2><div class="pd l"><h3 class="bd b gy z fp pb fr fs pc fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="pe l"><p class="bd b dl z fp pb fr fs pc fu fw dk translated">medium.com</p></div></div><div class="pf l"><div class="pg l ph pi pj pf pk me ow"/></div></div></a></div></div></div>    
</body>
</html>