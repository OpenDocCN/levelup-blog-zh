<html>
<head>
<title>Sending Emails with the SendGrid Function</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用SendGrid功能发送电子邮件</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/sending-emails-with-the-sendgrid-function-71eb2ee2845e?source=collection_archive---------0-----------------------#2018-09-11">https://levelup.gitconnected.com/sending-emails-with-the-sendgrid-function-71eb2ee2845e?source=collection_archive---------0-----------------------#2018-09-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/7ab45fbe52336c4c3edafae58469bf7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_QtWftTAV8nYPjnkevt98Q.jpeg"/></div></div></figure><p id="037d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们最近发布了<a class="ae kw" href="https://cosmicjs.com/docs/functions" rel="noopener ugc nofollow" target="_blank">宇宙函数</a>(公测版)。我们很高兴能帮助团队利用新的无服务器解决方案构建令人惊叹的现代产品。</p><p id="14a7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在这个简短的教程中，我将向您展示如何启动并运行<a class="ae kw" href="https://github.com/cosmicjs/send-email-function" rel="noopener ugc nofollow" target="_blank"> SendGrid电子邮件功能</a>以通过SendGrid发送电子邮件(要查看更多示例功能，请登录并转到<em class="kx">Your Bucket&gt;Settings&gt;Functions</em>)。</p><h1 id="f9e0" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">部署功能</h1><p id="d047" class="pw-post-body-paragraph jy jz iq ka b kb lw kd ke kf lx kh ki kj ly kl km kn lz kp kq kr ma kt ku kv ij bi translated"><strong class="ka ir"> 1。安装功能</strong> <br/>要安装SendGrid功能，进入<em class="kx">你的桶&gt;设置&gt;功能</em>，找到SendGrid功能，点击“安装功能”。</p><p id="7b46" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> 2。添加密钥，并部署</strong> <br/>安装完该函数后，您将被重定向到添加AWS凭证和环境变量的页面。按照步骤添加您的AWS凭证(如果您手头没有的话)。</p><p id="cce4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">转到您的SendGrid帐户，在<a class="ae kw" href="https://app.sendgrid.com/settings/api_keys" rel="noopener ugc nofollow" target="_blank">设置&gt; API密钥</a>中找到您的API密钥(您可能需要创建一个新的)，并将其作为值添加到SENDGRID_API_KEY。</p><p id="8ca4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">添加密钥后，单击“部署函数”,一分钟后您的函数将被部署并为请求做好准备。</p><h1 id="8887" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">编写Web联系人表单代码</h1><p id="3c07" class="pw-post-body-paragraph jy jz iq ka b kb lw kd ke kf lx kh ki kj ly kl km kn lz kp kq kr ma kt ku kv ij bi translated">接下来，让我们创建一个联系人表单来访问新部署的端点。按照以下步骤安装<a class="ae kw" href="https://cosmicjs.com/getting-started#quickstart" rel="noopener ugc nofollow" target="_blank">反应启动器</a>:</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="a12e" class="mk kz iq mg b gy ml mm l mn mo">npm i -g cosmic-cli<br/>cosmic init react-starter<br/>cosmic develop</span></pre><p id="35ce" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在转到您的应用程序代码库，转到位于<code class="fe mp mq mr mg b">pages/default.js</code>的默认页面组件，编辑它，如下所示:</p><figure class="mb mc md me gt jr"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="34a1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">注意这里的一些事情:</strong></p><p id="ca7a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">1.我们添加了一个<code class="fe mp mq mr mg b">form</code>元素来接收电子邮件、名字和姓氏的输入。<br/> 2。我们添加了<code class="fe mp mq mr mg b">handleSubmit</code>方法来处理表单提交，该方法获取表单的值并将数据发送到我们的宇宙函数端点。</p><p id="1758" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">就这样！现在我们有了一个端点，它接收来自表单的数据，并将其发送到SendGrid API进行处理。</strong></p><h1 id="8462" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">利益</h1><p id="48dc" class="pw-post-body-paragraph jy jz iq ka b kb lw kd ke kf lx kh ki kj ly kl km kn lz kp kq kr ma kt ku kv ij bi translated">更少的代码我们不必担心在我们的应用程序中构建API端点来将数据发送到SendGrid。</p><p id="29d5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">更少的配置麻烦我们不必担心配置麻烦，比如可能泄露客户端的密钥。我们不需要与任何人共享API密钥，只需要与端点共享。Config在Cosmic函数中作为环境变量处理。</p><p id="ede2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">可重用的 <br/>我们可以在任何其他需要发送电子邮件的应用程序中使用这个端点。</p><p id="8ebe" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我希望你喜欢这个SendGrid功能的快速浏览，现在已经准备好安装和部署了(转到<em class="kx">你的桶&gt;设置&gt;功能</em>)。如果你有任何问题或意见，请告诉我。<a class="ae kw" href="https://twitter.com/cosmic_js" rel="noopener ugc nofollow" target="_blank">在Twitter上联系我们</a>和<a class="ae kw" href="https://cosmicjs.com/community" rel="noopener ugc nofollow" target="_blank">加入我们的Slack社区</a>。</p></div></div>    
</body>
</html>