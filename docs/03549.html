<html>
<head>
<title>Network Troubleshooting Basics for Developers</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">面向开发人员的网络故障排除基础</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/network-troubleshooting-basics-for-developers-cf0a1e96ea00?source=collection_archive---------8-----------------------#2020-05-15">https://levelup.gitconnected.com/network-troubleshooting-basics-for-developers-cf0a1e96ea00?source=collection_archive---------8-----------------------#2020-05-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="ea98" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">4个简单的命令行工具，可以更快地调试网络问题</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/90f65e1f128c9aea34e591946bf5bb06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8wko3h-v8jxN_O0dG-1B0w.jpeg"/></div></div></figure><p id="69e7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在您职业生涯的某个阶段，您可能会面临这样的问题，比如无法连接到数据库或应用程序，无法浏览网站，或者根本无法通过ssh连接到另一台机器。通常情况下，您看到的错误消息也不是非常有用。</p><p id="1501" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在这篇文章中，我想讨论4个实用程序，它们可以帮助您有效地调试和修复此类问题，或者至少可以帮助您获得具体的发现，以便您可以有效地与技术同行交流。</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="9320" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated">重要的事情先来</h1><p id="3e00" class="pw-post-body-paragraph ku kv it kw b kx mp ju kz la mq jx lc ld mr lf lg lh ms lj lk ll mt ln lo lp im bi translated">你面前的电脑或电话被称为<em class="mu">客户端——请求信息的客户端</em>。另一边的计算机，<em class="mu">一台服务器——</em>服务于该请求的服务器。客户端和服务器之间的所有通信都涉及不同的层。履行各自职责的层，以确保两台机器能够相互通信。它们从上层/下层获取某种形式的信息，并将其进一步传递到链中。</p><p id="0476" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这形成了TCP/IP模型的基础，它是世界上任何客户机和服务器之间的通信标准。补充不同层的是协议——客户机/服务器可以使用的不同语言。这些就是我们所知道的HTTP，FTP，TCP等。它们使服务器能够充当web应用程序、ssh服务器等。同时。</p><p id="e3c3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">然而，在这篇文章中，我们不会深入研究TCP/IP模型或不同的协议，而是将重点放在工具/实用程序上，这将帮助您调试这些层的不同方面，并使您作为开发人员的生活更加轻松。</p><p id="b78c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">作为一名开发人员，您通常首先会有一个域名。</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="5b06" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated">dig——给我那个域名</h1><p id="6440" class="pw-post-body-paragraph ku kv it kw b kx mp ju kz la mq jx lc ld mr lf lg lh ms lj lk ll mt ln lo lp im bi translated">计算机不理解域，它们需要一个IP地址。你可以用<code class="fe mv mw mx my b">dig</code> <em class="mu">轻松获取一个域后面的服务器。</em>让我们从谷歌开始:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mz"><img src="../Images/8b5d0babf0d93225e39217682f1c2ddf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RZA1oTFtH0GHJOp5YfyN7g.png"/></div></div><figcaption class="na nb gj gh gi nc nd bd b be z dk translated">dig —域名解析(google.com)</figcaption></figure><p id="5b60" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">因此，客户对google.com的请求(在本例中是对T10的请求)将由216.58.210.14现有的机器提供服务。<em class="mu">查询时间</em>响应中突出显示了解析该域名所花费的时间。操作系统和浏览器通常在定义的<em class="mu"> ttl </em>(生存时间)持续时间内缓存这些结果，以便对<em class="mu">google.com</em>的后续请求可以自动发送到216.58.210.14</p><p id="a443" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">同样地，你可以检查谁是亚马逊的幕后黑手</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mz"><img src="../Images/a79ca24a37ae3d6ed81d418ffdb57759.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CgQ4k6vt3AsLo1y7CFCZPA.png"/></div></div><figcaption class="na nb gj gh gi nc nd bd b be z dk translated">dig —域名解析(amazon.de)</figcaption></figure><p id="19b7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">有三台服务器准备好接受对<em class="mu"> amazon.de. </em>高流量网站通常会这样做，以便在不同的服务器之间对传入的请求进行负载平衡。客户端(浏览器/终端等。)然而，每次将仅启动与其中任何一个的连接。</p><p id="5bde" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">一个小版本的快速知道谁在一个特定的域后面是与选项<code class="fe mv mw mx my b">+short</code></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mz"><img src="../Images/19e1e5b311db2b0b664db2d6a7e6fbc1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VrBu-y4qy8v62terR2m6Hw.png"/></div></div><figcaption class="na nb gj gh gi nc nd bd b be z dk translated">摘要—短输出格式</figcaption></figure><p id="f804" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">可以使用类似的步骤来识别AWS Cloud上的服务器、您的办公网络中的数据库或在互联网上注册的任何其他域。</p><p id="a121" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">一旦<em class="mu"> dig </em>返回ip地址，你现在可以检查你的机器是否真的可以到达它。</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="41b0" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated">ping——发送一个无声的“你好”</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mz"><img src="../Images/74e3a39e23f7f4e8cc5284027c00c027.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dYd7NpQD5w0maVgArbY97g.png"/></div></div><figcaption class="na nb gj gh gi nc nd bd b be z dk translated">砰</figcaption></figure><p id="1b10" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">发送5个数据包到<em class="mu"> google.in </em>服务器，说<em class="mu">你好。</em> <code class="fe mv mw mx my b">ping</code>使用ICMP协议向服务器发送回应请求，服务器以回应响应进行回应，确认您的机器和<em class="mu"> google.in </em>之间的网络路径是正常的——仅此而已。它不使用任何端口，也不提供对以下问题的智能洞察:该服务器能与HTTP对话吗？也许FTP？我能从中得到什么有用的东西吗？</p><p id="a58e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">例如，很有可能服务器不允许你用它来说HTTP。因此，理解从<em class="mu"> ping </em>的输出中得到什么很重要</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="2074" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated">nc —服务器是否监听特定端口？还是端口范围？</h1><p id="8127" class="pw-post-body-paragraph ku kv it kw b kx mp ju kz la mq jx lc ld mr lf lg lh ms lj lk ll mt ln lo lp im bi translated"><em class="mu"> nc (netcat) </em>帮助您进一步确认服务器是否响应特定端口。</p><p id="5b02" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><em class="mu"> netcat </em>与&lt;主机&gt;和&lt;端口&gt;一起工作，作为参数传递给命令。你可以测试<em class="mu"> amazon.de </em>是否开放talk HTTP(端口80)，比如:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mz"><img src="../Images/dec59a1e4f7a69342e04ca89491417bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9UzeDdVn_loZG22FTYlKdw.png"/></div></div><figcaption class="na nb gj gh gi nc nd bd b be z dk translated">netcat —扫描服务器上的可用端口</figcaption></figure><p id="15df" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">看起来它确实在端口80上做出了响应！但是，其他端口似乎被封锁了。在这种情况下，选项<code class="fe mv mw mx my b">-v</code>将<code class="fe mv mw mx my b">verbosity</code>添加到<em class="mu"> netcat </em>输出中，并且<code class="fe mv mw mx my b">-z</code>确保端口被扫描——但是没有数据发送到服务器。类似地，您可以通过在端口22上启动<em class="mu"> netcat </em>检查来调试远程服务器是否允许SSH连接。</p><h2 id="05d9" class="ne ly it bd lz nf ng dn md nh ni dp mh ld nj nk mj lh nl nm ml ll nn no mn np bi translated">注册一个netcat监听器</h2><p id="81b2" class="pw-post-body-paragraph ku kv it kw b kx mp ju kz la mq jx lc ld mr lf lg lh ms lj lk ll mt ln lo lp im bi translated">如果您想测试两台机器——X &amp; Y——之间的网络，并且您可以访问这两台机器，该怎么办？快速检查可以是在服务器Y 上“注册”一个netcat监听器:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mz"><img src="../Images/ed564ad61f5245abd25a34e1897b985a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sQT6l-LFWMEkFJTBZVg4VA.png"/></div></div><figcaption class="na nb gj gh gi nc nd bd b be z dk translated">netcat —服务器Y上的侦听器</figcaption></figure><p id="1ddc" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">并且触发来自<em class="mu">客户端X </em>的请求</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mz"><img src="../Images/49c9c324cf63b92c22c478d700e3b290.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nLZrFTgroZsYbFx2GjFBhQ.png"/></div></div><figcaption class="na nb gj gh gi nc nd bd b be z dk translated">netcat —来自客户端X的请求</figcaption></figure><p id="442e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这种测试在您无法控制两台这样的机器之间的网络，并且由于某些网络/安全配置，您的数据包实际上在“途中”被丢弃的情况下非常有用。netcat 使您能够在没有真正的HTTP服务器的情况下进行测试。这可以帮助你排除任何破坏聚会的外部因素。</p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><h1 id="931e" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated">curl —一切看起来都很好，让我们说一种标准语言</h1><p id="3339" class="pw-post-body-paragraph ku kv it kw b kx mp ju kz la mq jx lc ld mr lf lg lh ms lj lk ll mt ln lo lp im bi translated">测试了基本的网络连接后，您现在可以直接在终端上使用<em class="mu"> curl — </em>来使用HTTP和FTP等高级协议。</p><p id="3591" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">curl 了解许多其他协议，如HTTPS、TELNET、SCP等。也是。</p><p id="97ea" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">向<em class="mu">发送一个简单的HTTP请求，google.com</em>的响应是:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nq"><img src="../Images/389da824ee340037f51e7795c4e3a4f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o8m-Rl8AVkNx2hZVlQgPvg.png"/></div></div><figcaption class="na nb gj gh gi nc nd bd b be z dk translated">curl — HTTP请求和响应</figcaption></figure><p id="3348" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">将<em class="mu"> curl </em>与<code class="fe mv mw mx my b">-i</code>一起使用也会返回HTTP响应头。您可以看到<em class="mu">google.com</em>最初发送了一个HTTP 301重定向，我们使用了<code class="fe mv mw mx my b">-L</code>选项(就像浏览器会做的那样)并最终获得了HTTP响应。</p><p id="6fe6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们可以通过发送自定义HTTP头来进一步自定义请求:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nr"><img src="../Images/86040062fdb84c1d21e3aaa9f2b3e806.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z5HNKrCVfWCi9Y-yED5Dtg.png"/></div></div><figcaption class="na nb gj gh gi nc nd bd b be z dk translated">curl —带有自定义HTTP头</figcaption></figure><h2 id="2b21" class="ne ly it bd lz nf ng dn md nh ni dp mh ld nj nk mj lh nl nm ml ll nn no mn np bi translated">知道你在外面世界的身份</h2><p id="b973" class="pw-post-body-paragraph ku kv it kw b kx mp ju kz la mq jx lc ld mr lf lg lh ms lj lk ll mt ln lo lp im bi translated">有时你可能有兴趣知道你的请求到达互联网的公共IP地址。测试使用<em class="mu">卷曲</em>的快速方法是:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mz"><img src="../Images/90318f9a1fbf90b38415d4c1ae50aa5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YqJk4nLvklg9eXDIY2PPWg.png"/></div></div><figcaption class="na nb gj gh gi nc nd bd b be z dk translated">卷发——和icanhazip.com一起</figcaption></figure><p id="ccd0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">icanhazip 是一个超级酷的服务，可以返回你发出请求所使用的公共ip地址。它还提供许多其他服务，绝对值得一试。例如，此类数据可以帮助您将您的公共IP暴露告知第三方服务，以满足白名单需求。</p><h1 id="e8bb" class="lx ly it bd lz ma nt mc md me nu mg mh jz nv ka mj kc nw kd ml kf nx kg mn mo bi translated">所有这些看起来都不错——接下来呢？</h1><p id="d902" class="pw-post-body-paragraph ku kv it kw b kx mp ju kz la mq jx lc ld mr lf lg lh ms lj lk ll mt ln lo lp im bi translated">上面的帖子已经向你介绍了不同命令的一些基本用法，已经可以帮助你开始了。然而，真正的潜力在于这些命令的<strong class="kw iu">许多选项</strong>，您可以进一步利用这些选项来完成更多工作。例如，学习它们的一个好方法是使用<code class="fe mv mw mx my b">man curl</code>浏览各自的手册。</p><p id="236e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我希望这些能帮助你成为一名更好的工程师，增加你的知识和技能。在以后的文章中，我将尝试深入研究这些工具，探索它们提供的其他精彩功能！</p><p id="e537" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在那之前，楚斯！:)</p></div></div>    
</body>
</html>