# 新年前夕我犯过的最严重的软件开发错误

> 原文：<https://levelup.gitconnected.com/the-worst-software-developer-mistake-i-ever-made-during-new-years-eve-ceae20e68168>

## 这是我必须通过艰难的方式学习的 4 个教训。

![](img/1e633551f96d5f3b097a4c5ced6b57f3.png)

卡斯帕·卡米尔·鲁宾在 [Unsplash](https://unsplash.com/s/photos/sql?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) 上的照片

这是一年中讲故事的时候了，然而这是一个基于我自己经历的真实故事，它非常有价值并且教会了我一些事情！

那是 201 年的 12 月 31 日(记不清具体是哪一年了)，但那是在 2010 年到 2019 年之间的某个时候，我猜我的潜意识想要忘记它！

在过去的 6 个月中，我一直在开发定制的软件，帮助商店规范他们的库存系统，以便他们在某个给定的时间(考虑到任何输入错误、坏库存等)能够准确了解他们在现实生活中的商店里有什么(而不是他们的系统说他们有什么)。

这包括对实际库存进行一些手动计数，然后与他们在商店进行销售时使用的内部软件进行比较，并根据需要创建一些发票/采购交货单，以便在给定产品中添加库存，或者在系统中的库存多于实际库存时减去库存。

当然，一些商店会有成千上万种不同的产品，他们无法承受为此关闭整整一个月，所以软件必须考虑到，在应用更改时，它还应该考虑到某个给定的商品在此期间是否被出售或购买。

出于法律原因，客户需要在年初完成这项工作，所以我们提前足够的时间开始工作，他们每天都有大量的产品和大量的销售，所以在一个多月的时间里，我们每天都在工作。

因此，最终在 12 月 31 日，我们清点完了他们所有商店中的所有产品，虽然我们每天都在进行更正，但我们仍然需要对当天的最后一批产品进行更正。

在漫长的一天工作之后，我回到了家，当时是晚上，我还必须处理一些其他事情，在应用校正时，我注意到一些产品偏离了方向，可能会导致计算中的一些问题，所以我决定在继续之前手动修复它们。

这是在晚上 11 点左右，我已经很累了，但需要完成这个，这样我就可以在 1 月 1 日休息了，所以我继续努力。

我打开数据库并编写了一个更新 SQL 查询，以更新这个特定产品的数量，不，我没有忘记添加一个 where 子句，事实上，我首先添加并检查了一个返回正确项目的 SELECT 子句，然后使用同一个 WHERE 过滤器进行更新。

然后我去执行更新，嘣…它发生了…

我开始冒冷汗，我的脸变白了，就好像我是一个幽灵，并且读了 4500 行受影响…

等一下，什么？

我只需要更新一行！刚刚发生了什么？

虽然我在执行 WHERE 子句时确实在其中，但是没有选择它，因此对表中的所有行执行更新。

幸运的是，在过去，我确实实施了一个很好的备份策略，所以每天我们都会有一个适当的备份，但这还不够，理想情况下，我应该在那天晚上做任何更改之前有一个备份，毕竟商店已经关门了，在那些深夜时段不应该有新的活动发生。

幸运的是，由于股票是动态计算的，我可以设法恢复正确的数字，尽管我不得不为所有产品而不仅仅是丢失的产品这样做，但我花了第二天的一半时间来修复它。

## 经验教训

1.  确保有一个良好的灾难恢复计划，其中包括至少每天备份，如果不是更频繁。
2.  在做任何重要的事情之前，一定要备份最新的数据库，这样你就可以轻松地回滚并修复任何可能损坏的东西
3.  尽可能避免自动提交，在这种情况下，我的所有查询都自动提交。
4.  适可而止，不要过度劳累，你可能会把事情搞砸，休息一下，如果可能的话，过一会儿或者第二天再来做。

## 你觉得这篇文章有用吗？

分享你的评论和经验！让我们知道你的想法。

如果你喜欢这篇文章并想看更多，请给这篇文章一些掌声。

要了解最新信息，请务必关注，直到下次！

## 你在找导师吗？取得联系！

你可以在这里找到我的社交网络链接:[https://linktr.ee/gnstudenko](https://linktr.ee/gnstudenko)