<html>
<head>
<title>Python Automated WhatsApp Message Sender</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python自动WhatsApp消息发送器</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/python-automated-whatsapp-message-sender-db488c8c6bc7?source=collection_archive---------0-----------------------#2022-12-02">https://levelup.gitconnected.com/python-automated-whatsapp-message-sender-db488c8c6bc7?source=collection_archive---------0-----------------------#2022-12-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="7c7e" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">了解如何构建一个自动化的WhatsApp发送器，在白天代表你发送随机消息。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/78d45454f428851f67e76d1d4fbc2ea2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DrcouZ3ci76NiVi36hosZw.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</figcaption></figure></div><div class="ab cl kv kw hu kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="ij ik il im in"><p id="a844" class="pw-post-body-paragraph lc ld iq le b lf lg jr lh li lj ju lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi ly translated">上周我工作非常忙，我几乎没有时间去安排午餐，更糟糕的是，我去和我的妻子聊天，问她怎么样了。一周之后，在晚上，我不得不解释为什么我没有几秒钟的时间来发送WhatsApp消息，我想到了一个主意——建立一个Python脚本来代表我发送每天的消息。所以我开始着手创建一个，并努力使它尽可能的通用、随机和可靠。我最不希望她发现我花时间写了这样一个脚本，而不仅仅是发送一条消息…</p></div><div class="ab cl kv kw hu kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="ij ik il im in"><h2 id="ec30" class="mh mi iq bd mj mk ml dn mm mn mo dp mp ll mq mr ms lp mt mu mv lt mw mx my mz bi translated">我们开始吧</h2><p id="3e9b" class="pw-post-body-paragraph lc ld iq le b lf na jr lh li nb ju lk ll nc ln lo lp nd lr ls lt ne lv lw lx ij bi translated">我们将从导入我们将使用的库开始。首先，我们将导入主库<a class="ae nf" href="https://pypi.org/project/pywhatkit/" rel="noopener ugc nofollow" target="_blank"> PyWhatKit </a>，这是WhatsApp和YouTube automation最流行的库之一，允许您在一行中非常容易地发送WhatsApp消息。事实上，该库的构建使得我们几乎不需要任何其他库，因为这些方法应该可以打开WhatsApp web，自动发送消息，并关闭标签。但是到目前为止，还存在一些问题，所以我们需要更多的工作来解决这些问题。</p><p id="94bd" class="pw-post-body-paragraph lc ld iq le b lf lg jr lh li lj ju lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">其中一个错误(至少是我遇到的)是自动发送器不工作，所以为了解决它，我们将使用<a class="ae nf" href="https://pyautogui.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank"> PyAutoGUI </a>，它让您的Python脚本控制鼠标和键盘来自动与其他应用程序交互。此外，我们将使用<a class="ae nf" href="https://pypi.org/project/pynput/" rel="noopener ugc nofollow" target="_blank"> PynPut </a>，特别是Key和Controller方法，因此我们可以向键盘添加控制来发送消息。</p><p id="f0d0" class="pw-post-body-paragraph lc ld iq le b lf lg jr lh li lj ju lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">最终，我们将需要<a class="ae nf" href="https://carpedm20.github.io/emoji/docs/" rel="noopener ugc nofollow" target="_blank">表情符号</a>库来使我们的消息更加多样化，需要<a class="ae nf" href="https://docs.python.org/3/library/random.html" rel="noopener ugc nofollow" target="_blank">随机</a>库来随机选择消息和消息将被发送的时间，需要<a class="ae nf" href="https://docs.python.org/3/library/time.html" rel="noopener ugc nofollow" target="_blank">时间</a>库来给代码一些时间来完成它的工作。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="f345" class="pw-post-body-paragraph lc ld iq le b lf lg jr lh li lj ju lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">为了发送消息，我们将编写如下函数。一般来说，我们会尝试发送消息(正如我提到的，我遇到了几个bug，所以这样更容易工作)，如果它不起作用，我们将<code class="fe ni nj nk nl b">except</code>错误并打印出来，这样我们就知道哪里出错了。我们的函数有四个参数:一个带有国家代码的电话号码和一条消息，两者都是字符串，还有两个整数表示小时(0到23)和分钟(0到59)。</p><p id="4534" class="pw-post-body-paragraph lc ld iq le b lf lg jr lh li lj ju lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">在<code class="fe ni nj nk nl b">try</code>中，我们首先使用<code class="fe ni nj nk nl b">pywahtkit.sendwahtmsg</code>方法，顾名思义，它发送消息。这个函数的所有参数都是这个函数的输入，为了使这个函数正常工作，这个时间应该比发送消息的预期时间至少早5-6分钟。接下来，我们将使用<code class="fe ni nj nk nl b">time.sleep()</code>等待10秒钟，以便我们的浏览器有时间打开WhatsApp标签，这可能会根据您的互联网而有所不同。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="1e34" class="pw-post-body-paragraph lc ld iq le b lf lg jr lh li lj ju lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">首次使用<code class="fe ni nj nk nl b">pywahtkit.sendwahtmsg</code>方法后，WhatsApp web会要求您将设备连接到浏览器，如下所示。这也可能会影响该功能的首次运行，因为打开标签和连接计算机将需要超过10秒的时间(该方法也有内置的15秒延迟，但这可能还不够)</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nm"><img src="../Images/333d0c611c413d447b83e58d382e5009.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ghy-9CB2RdPZgQz8Tyi8ig.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</figcaption></figure><p id="f04e" class="pw-post-body-paragraph lc ld iq le b lf lg jr lh li lj ju lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">现在，我们需要建立一个消息“银行”，我们将使用<code class="fe ni nj nk nl b">random.choise</code>方法每次随机选择一条消息。下面的例子向您展示了一些简单的文本消息。此外，我使用了<code class="fe ni nj nk nl b">emoji.emojize</code>方法来增加一些信息的趣味，或者只是单独发送一个表情符号。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="77d4" class="pw-post-body-paragraph lc ld iq le b lf lg jr lh li lj ju lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">坚持住。我们快到了。为了让它更具互动性，我增加了一个选项，可以选择每天发送多少条消息，以及在哪个时间段发送(开始时间和结束时间)。显然，这取决于你的工作日长度。所有这些都是通过<code class="fe ni nj nk nl b">input()</code>内置函数实现的，它要求用户写下他的答案作为输入。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="5b79" class="pw-post-body-paragraph lc ld iq le b lf lg jr lh li lj ju lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">最终，我们将运行一个while循环，只要它不发送我们要求的所有消息，就会一直运行。它首先随机选择一个小时，然后选择分钟，最后调用我们之前构建的sender函数。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ng nh l"/></div></figure></div><div class="ab cl kv kw hu kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="ij ik il im in"><h2 id="8719" class="mh mi iq bd mj mk ml dn mm mn mo dp mp ll mq mr ms lp mt mu mv lt mw mx my mz bi translated">真的是这样！</h2><p id="448c" class="pw-post-body-paragraph lc ld iq le b lf na jr lh li nb ju lk ll nc ln lo lp nd lr ls lt ne lv lw lx ij bi translated">我就讲到这里，不过你可以在这里找到<a class="ae nf" href="https://github.com/Waeara/Python-Automated-WhatsApp-Message-Sender/blob/main/Whatsapp%20automate%20message%20sender.ipynb" rel="noopener ugc nofollow" target="_blank">的完整代码</a>。如果你有任何想法或问题，请随时留下评论🙂</p><p id="c9fc" class="pw-post-body-paragraph lc ld iq le b lf lg jr lh li lj ju lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">感谢阅读！👍</p></div><div class="ab cl kv kw hu kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="ij ik il im in"><h1 id="47a6" class="nn mi iq bd mj no np nq mm nr ns nt mp jw nu jx ms jz nv ka mv kc nw kd my nx bi translated">分级编码</h1><p id="82cd" class="pw-post-body-paragraph lc ld iq le b lf na jr lh li nb ju lk ll nc ln lo lp nd lr ls lt ne lv lw lx ij bi translated">感谢您成为我们社区的一员！在你离开之前:</p><ul class=""><li id="64d7" class="ny nz iq le b lf lg li lj ll oa lp ob lt oc lx od oe of og bi translated">👏为故事鼓掌，跟着作者走👉</li><li id="ec06" class="ny nz iq le b lf oh li oi ll oj lp ok lt ol lx od oe of og bi translated">📰查看<a class="ae nf" href="https://levelup.gitconnected.com/?utm_source=pub&amp;utm_medium=post" rel="noopener ugc nofollow" target="_blank">级编码出版物</a>中的更多内容</li><li id="3d4b" class="ny nz iq le b lf oh li oi ll oj lp ok lt ol lx od oe of og bi translated">🔔关注我们:<a class="ae nf" href="https://twitter.com/gitconnected" rel="noopener ugc nofollow" target="_blank">推特</a> | <a class="ae nf" href="https://www.linkedin.com/company/gitconnected" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a> | <a class="ae nf" href="https://newsletter.levelup.dev" rel="noopener ugc nofollow" target="_blank">时事通讯</a></li></ul><p id="667d" class="pw-post-body-paragraph lc ld iq le b lf lg jr lh li lj ju lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">🚀👉<a class="ae nf" href="https://jobs.levelup.dev/talent/welcome?referral=true" rel="noopener ugc nofollow" target="_blank"> <strong class="le ir">加入升级人才集体，找到一份惊艳的工作</strong> </a></p></div></div>    
</body>
</html>