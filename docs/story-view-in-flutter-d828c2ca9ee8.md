# é¢¤æŒ¯ä¸­çš„æ•…äº‹è§‚

> åŸæ–‡ï¼š<https://levelup.gitconnected.com/story-view-in-flutter-d828c2ca9ee8>

æ•…äº‹è§†å›¾æ˜¯å½“ä»Šè„¸ä¹¦ã€Instagramã€Snapchat ç­‰ç¤¾äº¤åª’ä½“çš„æ˜¾è‘—ç‰¹å¾ä¹‹ä¸€ã€‚è¿™ç¯‡æ–‡ç« å°†æ•™æˆ‘ä»¬å¦‚ä½•åœ¨æœªæ¥å»ºç«‹æ•…äº‹è§†å›¾ã€‚

![](img/4d041db5ef499ae4bc6ebb4f3b936e8c.png)

é¢¤æŒ¯ä¸­çš„æ•…äº‹è§‚

æˆ‘ä»¬çš„æœ€ç»ˆåº”ç”¨ç¨‹åºå°†å¦‚ä¸‹å·¥ä½œ:

![](img/cf2cb57a45ece5695f787e75a0537fcd.png)

æ­£å¦‚æˆ‘ä»¬æ‰€çœ‹åˆ°çš„ï¼Œæˆ‘ä»¬å°†æœ‰æ•…äº‹çš„åˆ—è¡¨ï¼Œå½“ç‚¹å‡»é¡¹ç›®æ—¶ï¼Œæˆ‘ä»¬æœ‰æˆ‘ä»¬çš„æ•…äº‹è§†å›¾ã€‚

## æ–‡ç« è§†å›¾çš„å±æ€§:

*   **æ§åˆ¶å™¨**:ç”¨äºæ§åˆ¶æ•…äº‹çš„å›æ”¾ã€‚
*   **storyItems** :æ˜¾ç¤ºçš„æ˜¯é¡µé¢æˆ–é¡¹ç›®ã€‚æ­¤å±æ€§ä¸èƒ½ä¸ºç©ºã€‚
*   **progressPosition** :è¯¥å±æ€§ç”¨äºå¯¹é½æ•…äº‹çš„è¿›åº¦æŒ‡ç¤ºå™¨ã€‚
*   **onComplete:** å½“æ•…äº‹çš„å®Œæ•´å¾ªç¯å±•ç°æ—¶è°ƒç”¨ã€‚æ¯æ¬¡å°†`repeat`å±æ€§è®¾ç½®ä¸º true æ—¶éƒ½ä¼šè°ƒç”¨å®ƒã€‚
*   **onStoryShow** :ç”¨äºåœ¨æ•…äº‹æ’­æ”¾æ—¶å›è°ƒæµç¨‹ã€‚
*   **onVerticalSwipeComplete**:ç”¨äºæ£€æµ‹åˆ°æ»‘åŠ¨æ‰‹åŠ¿æ—¶å›è°ƒã€‚ä¸æƒ³å¬æ‰‹åŠ¿å¯ä»¥å¿½ç•¥ã€‚

## **æ•…äº‹è§†å›¾çš„ç‰¹ç‚¹:**

*   æ¯ä¸ªæ•…äº‹é¡¹ç›®çš„æ ‡é¢˜
*   æ”¯æŒ gifã€å›¾åƒå’Œè§†é¢‘
*   ä¸Šä¸€ä¸ªã€ä¸‹ä¸€ä¸ªå’Œæš‚åœçš„æ‰‹åŠ¿ã€‚
*   æ¯ä¸ªæ•…äº‹é¡¹ç›®çš„åŠ¨ç”»è¿›åº¦æŒ‡ç¤ºå™¨ã€‚

# è®©æˆ‘ä»¬å¼€å§‹å§

ä¸ºäº†åœ¨ Flutter ä¸­å®ç°æ•…äº‹è§†å›¾ï¼Œæˆ‘ä»¬éœ€è¦ä¸¤ä¸ªä¾èµ–é¡¹ã€‚é¦–å…ˆï¼Œåœ¨`pubsec.yaml`æ–‡ä»¶ä¸­æ·»åŠ è¿™äº›ä¾èµ–å…³ç³» [story_view](https://pub.dev/packages/story_view') å’Œ[è™šçº¿ _circle](https://pub.dev/packages/dashed_circle) ã€‚

```
dependencies:
  story_view: ^0.13.2
  dashed_circle: ^0.0.2
```

ç°åœ¨ï¼Œåœ¨`lib`æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ª`homepage.dart`æ–‡ä»¶ã€‚æˆ‘ä»¬å°†ä½¿ç”¨åŠ¨ç”»æ§åˆ¶å™¨ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦è°ƒç”¨`TickerProviderStateMixin`ã€‚

æˆ‘ä»¬åœ¨ä¸»é¡µä¸Šåˆ›å»ºå˜é‡ã€‚

```
 late Animation<double> gap; //gap between the dashed
  late Animation<double> base; //the point of anima
  late Animation<double> reverse; //to reverse the animation
  late AnimationController controller; // the controller
```

æˆ‘ä»¬éœ€è¦åœ¨ä¸»é¡µçš„`initState` ä¸­åˆå§‹åŒ–åŠ¨ç”»æ§åˆ¶å™¨ã€‚

```
[@override](http://twitter.com/override)
  initState() {
    super.initState();controller =
        AnimationController(vsync: this, duration: const Duration(seconds: 10));base = CurvedAnimation(parent: controller, curve: Curves.easeOut);reverse = Tween<double>(begin: 0.0, end: -1.0).animate(base);gap = Tween<double>(begin: 15.0, end: 0.0).animate(base)
      ..addListener(() {
        setState(() {});
      });controller.forward();
  }
```

> vsync: this :æˆ‘ä»¬å°†å®ƒä¼ é€’ç»™åŠ¨ç”»æ§åˆ¶å™¨ï¼Œåœ¨ä½¿ç”¨è¿™ä¸ª mixin çš„ç±»ä¸­åˆ›å»ºä¸€ä¸ªåŠ¨ç”»æ§åˆ¶å™¨
> 
> å¦‚æœæˆ‘ä»¬ä¸éœ€è¦çº¿æ€§åŠ¨ç”»ï¼Œæˆ‘ä»¬å°±ä½¿ç”¨å®ƒã€‚å®ƒä¸ºåŠ¨ç‰©æä¾›äº†æ›²çº¿ã€‚å½“æˆ‘ä»¬éœ€è¦åœ¨åŠ¨ç”»å‘å‰å’Œå‘åç§»åŠ¨æ—¶æœ‰ä¸åŒçš„æ›²çº¿æ—¶ï¼Œå®ƒæ˜¯ä¸“é—¨ä½¿ç”¨çš„ã€‚
> 
> **è¡¥é—´**:æä¾›èµ·å§‹å€¼å’Œç»“æŸå€¼ä¹‹é—´çš„çº¿æ€§æ’å€¼ã€‚
> 
> **..addListener():** è¿™ä¸¤ç‚¹ syantx å®šä¹‰äº†ä½¿ç”¨æ¥è‡ª`animate`çš„è¿”å›å€¼è°ƒç”¨`addListener()`æ–¹æ³•ã€‚

æˆ‘ä»¬æ ¹æ®è¿™äº›å˜é‡çš„å€¼åˆ¶ä½œè™šçº¿åŠ¨ç”»ã€‚ä¸ºäº†åˆ¶ä½œçª—å£å°éƒ¨ä»¶çš„åŠ¨ç”»ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†çª—å£å°éƒ¨ä»¶`RotationTransition`ã€‚å®ƒè´Ÿè´£åˆ¶ä½œå°éƒ¨ä»¶æ—‹è½¬çš„åŠ¨ç”»ã€‚

å½“ç‚¹å‡»é¡¹ç›®æ—¶ï¼Œæˆ‘ä»¬ä»ä¸»é¡µä¼ é€’ä¸€äº›å€¼ï¼Œè¿™äº›å€¼æ˜¯**ç´¢å¼•**å’Œ**å›¾ç‰‡æ•°ç»„**åˆ° **StoryViewPage** ã€‚

```
Navigator.push(context, MaterialPageRoute(builder: (_) {
  return StoryViewPage(index: index, model: model); }));
```

ç„¶åç‚¹å‡»ä»¥ä¸Šé¡¹ç›®çš„åˆ—è¡¨ï¼Œæˆ‘ä»¬æ˜¾ç¤ºæ•…äº‹è§†å›¾ã€‚ä¸ºæ­¤ï¼Œåˆ›å»ºåä¸º`story_view_page.dart`çš„æ–°æ–‡ä»¶ã€‚

åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°†æ•…äº‹è§†å›¾åˆ›å»ºä¸º:

# è®©æˆ‘ä»¬è¿æ¥èµ·æ¥

æˆ‘ä»¬å¯ä»¥æˆä¸ºæœ‹å‹ã€‚åœ¨[è„¸ä¹¦](https://www.facebook.com/nabin.dhakal.714/)ã€ [Linkedin](https://www.linkedin.com/in/nabindhakal/) ã€ [Github](https://github.com/nbnD) ã€ [Youtube](https://www.youtube.com/channel/UCW6oYt_3QSl7J2HSHNqwXWw) å’Œ [Instagram](https://www.instagram.com/nbn_d_/) ä¸ŠæŸ¥æ‰¾ã€‚

# ç»“è®º

å¸Œæœ›è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œè®©ä½ å­¦åˆ°æ–°çš„ä¸œè¥¿ã€‚æˆ‘åœ¨è¿™ç¯‡æ–‡ç« ä¸­ä½¿ç”¨äº†ä¸€äº›å¯¹ä½ ä»¬ä¸­çš„ä¸€äº›äººæ¥è¯´å¯èƒ½æ˜¯æ–°çš„ä¸œè¥¿ã€‚

å¦‚æœä½ å­¦åˆ°äº†æ–°çš„ä¸œè¥¿æˆ–è€…æƒ³æå‡ºä¸€äº›å»ºè®®ï¼Œè¯·åœ¨è¯„è®ºä¸­å‘Šè¯‰æˆ‘ã€‚

å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œè¯·ç‚¹å‡»ğŸ‘å›¾æ ‡ï¼Œå®ƒä¸ºæ‚¨æä¾›äº†ä¼ é€’æ‰€æœ‰æ–°äº‹ç‰©çš„åŠ¨åŠ›ã€‚

æ­¤å¤–ï¼Œå…³æ³¨ä»¤äººå…´å¥‹çš„æ–‡ç« å’Œé¡¹ç›®çš„æ›´æ–°ã€‚

é€šè¿‡åˆ†äº«å­¦ä¹ å¯¹å­¦ä¹ è¿‡ç¨‹äº§ç”Ÿäº†å·¨å¤§çš„å½±å“ï¼Œå¹¶ä½¿ç¤¾åŒºè¶Šæ¥è¶Šå¤§ã€‚

åˆ†äº«æ˜¯å¸å¼•å…¶ä»–çˆ±å¥½è€…çš„ç£çŸ³ã€‚

å› æ­¤ï¼Œè®©æˆ‘ä»¬æœç€æ‰©å¤§æˆ‘ä»¬çš„å­¦ä¹ ç¤¾åŒºè¿ˆå‡ºä¸€å°æ­¥ã€‚

ä¸ä½ çš„æœ‹å‹åˆ†äº«è¿™ç¯‡æ–‡ç« ï¼Œæˆ–è€…å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œå°±åœ¨æ¨ç‰¹ä¸Šå‘è¡¨è¯„è®ºã€‚

[![](img/b768ed307150d11444cf04000ec92315.png)](https://www.buymeacoffee.com/nabindhakal)

é¢¤æŒ¯ä¸­çš„æ•…äº‹è§‚

# å®Œæ•´ä»£ç :

[](https://github.com/nbnD/story_view_futter) [## GitHub - nbnD/story_view_futter:é¢¤æŒ¯ä¸­çš„æ•…äº‹è§†å›¾

### ä¸€ä¸ªæ–°çš„é¢¤æŒ¯é¡¹ç›®ã€‚è¿™ä¸ªé¡¹ç›®æ˜¯é¢¤æŒ¯åº”ç”¨çš„èµ·ç‚¹ã€‚ä¸€äº›å¸®åŠ©æ‚¨å…¥é—¨çš„èµ„æºâ€¦

github.com](https://github.com/nbnD/story_view_futter) 

# åˆ†çº§ç¼–ç 

æ„Ÿè°¢æ‚¨æˆä¸ºæˆ‘ä»¬ç¤¾åŒºçš„ä¸€å‘˜ï¼åœ¨ä½ ç¦»å¼€ä¹‹å‰:

*   ğŸ‘ä¸ºæ•…äº‹é¼“æŒï¼Œè·Ÿç€ä½œè€…èµ°ğŸ‘‰
*   ğŸ“°æŸ¥çœ‹[å‡çº§ç¼–ç å‡ºç‰ˆç‰©](https://levelup.gitconnected.com/?utm_source=pub&utm_medium=post)ä¸­çš„æ›´å¤šå†…å®¹
*   ğŸ””å…³æ³¨æˆ‘ä»¬:[Twitter](https://twitter.com/gitconnected)|[LinkedIn](https://www.linkedin.com/company/gitconnected)|[æ—¶äº‹é€šè®¯](https://newsletter.levelup.dev)

ğŸš€ğŸ‘‰ [**åŠ å…¥å‡çº§äººæ‰é›†ä½“ï¼Œæ‰¾åˆ°ä¸€ä»½ç¥å¥‡çš„å·¥ä½œ**](https://jobs.levelup.dev/talent/welcome?referral=true)