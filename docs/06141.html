<html>
<head>
<title>How to Automate Boring Stuff with Chrome Extensions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Chrome扩展自动化枯燥的东西</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-automate-boring-stuff-with-chrome-extensions-9d2dc268bb9a?source=collection_archive---------9-----------------------#2020-10-29">https://levelup.gitconnected.com/how-to-automate-boring-stuff-with-chrome-extensions-9d2dc268bb9a?source=collection_archive---------9-----------------------#2020-10-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/4f8be9585235fe2fd5e1d09b6629313c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*TRVgI51uU_k1rECA"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">照片由<a class="ae kc" href="https://unsplash.com/@mitchel3uo?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">米切尔罗</a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a></figcaption></figure><p id="5ad4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">复制...粘贴……复制……粘贴……浪费了几分钟，甚至几个小时在线比较报价。我们都经历过，对吗？我心想，如果有一些工具来比较另一个网站上的价格…我在这里，几天后与一个全新的chrome扩展！</p><p id="9b8c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我想描述一下我在这个项目中的经历，我对它的感受，以及我是否会创造另一个项目。希望在这篇文章之后，你会对chrome扩展有一个很好的了解。</p></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><h1 id="d43e" class="li lj iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">非常简短的介绍</h1><p id="e4c7" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">Chrome extension是一个为您的浏览器提供附加功能的小程序。它是由HTML、CSS和JavaScript组成的。构建chrome扩展最重要的一步是创建manifest.json，其中包含关于项目的所有信息，例如名称、描述、文件和权限。扩展能够操作DOM、发送请求、收集数据、搜索互联网等等。令人难以置信的是，一个好的扩展会如此有用。看看最流行的例子，比如<a class="ae kc" href="https://chrome.google.com/webstore/detail/adblock-plus-free-ad-bloc/cfhdojbkjhnklbpkdaibdccddilifddb" rel="noopener ugc nofollow" target="_blank"> Adblock加</a>、<a class="ae kc" href="https://chrome.google.com/webstore/detail/honey/bmnlcjabgnpnenekpadlanbbkooimhnj" rel="noopener ugc nofollow" target="_blank"> Honey </a>或<a class="ae kc" href="https://chrome.google.com/webstore/detail/grammarly-for-chrome/kbfnbcaeplbcioakkpcpgfkobkghlhen?hl=en" rel="noopener ugc nofollow" target="_blank">语法上的</a>。</p><p id="2a01" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在让我们来看看扩展的一般结构:</p><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div class="gh gi ml"><img src="../Images/d3269ff8d4e663196aa3028c726ecde3.png" data-original-src="https://miro.medium.com/v2/resize:fit:776/format:webp/0*LgoDYDKU2QlNlAly.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><a class="ae kc" href="https://developer.chrome.com/extensions/overview" rel="noopener ugc nofollow" target="_blank">https://developer.chrome.com/extensions/overview</a></figcaption></figure><p id="9a38" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">基本上，您的应用程序可以在3个“环境”中执行脚本。</p><ul class=""><li id="de3d" class="mq mr iq kf b kg kh kk kl ko ms ks mt kw mu la mv mw mx my bi translated">popup.js包含打开弹出窗口时将执行的脚本</li><li id="2d65" class="mq mr iq kf b kg mz kk na ko nb ks nc kw nd la mv mw mx my bi translated">js负责所有应该在后台发生的事情(很明显)</li><li id="df7d" class="mq mr iq kf b kg mz kk na ko nb ks nc kw nd la mv mw mx my bi translated">contentscript.js允许您与网站DOM交互</li></ul><p id="0ed7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">值得一提的是，contentscript.js只能通过消息与popup.js和background.js进行通信。这就是为什么我们有上图中的那些字母。</p><p id="5280" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在让我们进入实际项目！</p></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><p id="989a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们的目标是:创建一个chrome扩展，使在我国最大的电子网站上搜索产品的过程自动化，并呈现我当前正在查看的产品的结果。</p><p id="2d1d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我从建立一个简单的manifest.json开始，在这里我定义了所有需要的文件和权限。</p><figure class="mm mn mo mp gt jr"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="85e4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我准备好了，整个结构都准备好了，几分钟后，我遇到了一个…问题…</p><p id="62c6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如何在一个网站上找到产品名称？😧</p><p id="e850" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">幸运的是，我记得一个好的SEO实践是将最相关的信息放在<strong class="kf ir"> <em class="ng"> &lt; h1 &gt; </em> </strong>标签中，这正是我找到我的产品名称的地方！当然，它并不适用于每一个网站，但是，对于我的目的来说已经足够了。</p><p id="7949" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">好吧，下一步，在外部网站上搜索数据，然后发送到扩展。对于所有与谷歌浏览器的交互，我们将使用<a class="ae kc" href="https://developer.chrome.com/extensions/api_index" rel="noopener ugc nofollow" target="_blank">浏览器API </a>。在这个例子中，我跳过了获取数据的部分，因为这是不相关的(而且有点笨拙……)</p><figure class="mm mn mo mp gt jr"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="5a2e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在让我们看一下background.js，它所做的只是监听消息并将传入的数据保存在存储器中。</p><figure class="mm mn mo mp gt jr"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="3d24" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在是最后一部分popup.js和popup.js。最后一步是使用chrome API加载数据并填充弹出窗口。</p><figure class="mm mn mo mp gt jr"><div class="bz fp l di"><div class="ne nf l"/></div></figure><figure class="mm mn mo mp gt jr"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="2c3b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">完成了。</p></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><p id="3122" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">或者，是吗？</p><p id="1288" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">原来我搜索的一个网站是一个单页应用程序。因此，当我被重定向时，我的内容脚本没有再次运行...幸运的是，凭借<a class="ae kc" href="https://stackoverflow.com/" rel="noopener ugc nofollow" target="_blank"> StackOverflow </a>向导的智慧，我通过查看URL的变化迅速处理了这个问题。我只需要添加这些行:</p><p id="2f0e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">background.js简单更改监听器</p><figure class="mm mn mo mp gt jr"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="fc0b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果收到来自background.js的消息，则获取数据</p><figure class="mm mn mo mp gt jr"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="5392" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在已经完成了。😅</p></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><h1 id="1e5a" class="li lj iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">最后的想法</h1><p id="dff2" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">这个扩展为我节省了大量时间吗？没有…至少还没有，因为我花了一段时间来创作。</p><p id="72b1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这值得吗？是啊！</p><p id="5bef" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我学到了新的东西，获得了新的知识。如果我不得不解决一些更耗时的问题，并且该解决方案可以被许多人使用，那将是非常有用的。</p><p id="0a7e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">谁知道也许有一天你会将这些知识用于某个伟大的目的呢？</p></div></div>    
</body>
</html>