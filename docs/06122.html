<html>
<head>
<title>How to Format Integers into String Representations in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Python中将整数格式化为字符串表示</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-format-integers-into-string-representations-in-python-9f6ad0f2d36f?source=collection_archive---------5-----------------------#2020-10-28">https://levelup.gitconnected.com/how-to-format-integers-into-string-representations-in-python-9f6ad0f2d36f?source=collection_archive---------5-----------------------#2020-10-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="aa8c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">10000到10K | 999999到1M | 1234567890到1.23B</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/806853f6997e56af422442e718d2726e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2zTMjXrhIVLNr1WSTjfeRw.jpeg"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">照片由<a class="ae le" href="https://unsplash.com/@photoart2018?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">安德鲁·布坎南</a>在<a class="ae le" href="https://unsplash.com/s/photos/number?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="e831" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">通过阅读这篇文章，您将学会用Python将一个整数(123456)格式化成它自己的字符串表示(123K)。这有助于改善应用程序中的用户体验，因为将数字显示为字符串表示对用户来说更加连贯。在本教程中，我将展示两种不同的实现:</p><ul class=""><li id="75ed" class="lf lg it js b jt ju jx jy kb lh kf li kj lj kn lk ll lm ln bi translated">在<a class="ae le" href="https://stackoverflow.com/questions/579310/formatting-long-numbers-as-strings-in-python#579376" rel="noopener ugc nofollow" target="_blank">堆栈溢出</a>上共享的代码的修改版本</li><li id="6e56" class="lf lg it js b jt lo jx lp kb lq kf lr kj ls kn lk ll lm ln bi translated">我自己的自定义实现</li></ul><p id="2a15" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">话虽如此，但本文并未涉及micro和nano等小于0的字符串表示。一旦你完成了教程，你可以自由地自己实现它。</p></div><div class="ab cl lt lu hx lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="im in io ip iq"><h1 id="bc1e" class="ma mb it bd mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx bi translated">堆栈溢出</h1><p id="7dc8" class="pw-post-body-paragraph jq jr it js b jt my jv jw jx mz jz ka kb na kd ke kf nb kh ki kj nc kl km kn im bi translated">在撰写本文时，已经有一个关于堆栈溢出的主题，标题为“<a class="ae le" href="https://stackoverflow.com/questions/579310/formatting-long-numbers-as-strings-in-python" rel="noopener ugc nofollow" target="_blank"> <strong class="js iu">在python </strong> </a>中将长数字格式化为字符串”。该实现基于数字除法，以便获得相应的度量(K，M，B，T)。</p><p id="da09" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在此之前，让我们创建一个通用函数，它将相应的输入解析并格式化为一个安全的数字。它还会使用字符串格式<code class="fe nd ne nf ng b">3g</code>根据3个有效数字对数字进行舍入。这确保了999999将被转换为1000000。</p><pre class="kp kq kr ks gt nh ng ni nj aw nk bi"><span id="73cb" class="nl mb it ng b gy nm nn l no np">def safe_num(num):<br/>    if isinstance(num, str):<br/>        num = float(num)</span><span id="5435" class="nl mb it ng b gy nq nn l no np">    return float('{:.3g}'.format(abs(num)))</span></pre><p id="12db" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">接下来，让我们探索一下Stack Overflow中提供的答案的修改版本。该函数每次将输入除以1000，并将幅度增加1，直到输入小于1000。该函数还会在返回结果之前去掉结尾的<code class="fe nd ne nf ng b">0</code>和<code class="fe nd ne nf ng b">.</code>。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="c45d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果输入的值很小，这种实现在性能方面有优势，因为它从最小的度量循环到最大的度量。</p><p id="3ba2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">缺点是它仅适用于K、M、B和t等通用指标。如果您打算将它用于其他语言，则由于每个量值之间的不规则性，它将不起作用。另外，如果你的数大于一万亿的倍数乘1000，会得到一个<code class="fe nd ne nf ng b">IndexError: list index out of range</code>错误。</p></div><div class="ab cl lt lu hx lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="im in io ip iq"><h1 id="678c" class="ma mb it bd mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx bi translated">自定义实现</h1><p id="4452" class="pw-post-body-paragraph jq jr it js b jt my jv jw jx mz jz ka kb na kd ke kf nb kh ki kj nc kl km kn im bi translated">让我们来看看另一种实现，它从最大度量循环到最小度量。每个指标及其各自的值都在Python字典中定义。它代表指标的实际值。如果除法的值大于或等于1，循环将中断。返回的结果使用f字符串进行格式化。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="87b0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">就性能而言，当且仅当大部分输入是大数时，这种实现会更快，因为它从最大的度量开始循环。此外，您可以根据实际值指定自己的度量值对。如果您打算为其他语言复制相同的功能，这是非常有用的。</p></div><div class="ab cl lt lu hx lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="im in io ip iq"><h1 id="e504" class="ma mb it bd mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx bi translated">试验</h1><p id="9034" class="pw-post-body-paragraph jq jr it js b jt my jv jw jx mz jz ka kb na kd ke kf nb kh ki kj nc kl km kn im bi translated">让我们测试一下，看看两个函数是否返回相同的结果。将以下代码追加到函数下面。我已经声明了一个整数列表作为例子。您可以随意添加自己的值来测试这两个函数。</p><pre class="kp kq kr ks gt nh ng ni nj aw nk bi"><span id="4f7a" class="nl mb it ng b gy nm nn l no np">example_input = [1000, 999, 100, 99, 9996, 23, 123456, 10000, 999999, 1234567890, 5634723]</span><span id="cf4d" class="nl mb it ng b gy nq nn l no np">for i in example_input:<br/>    print(format_number_stack_overflow(i), format_number(i))</span></pre><p id="cd1b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您应该在控制台上得到以下输出，这表明它们都返回了相同的预期输出。999将作为999返回，因为考虑基于3个最高有效数字。另一方面，9996将作为10K返回，因为它将由于字符串格式而被舍入。</p><pre class="kp kq kr ks gt nh ng ni nj aw nk bi"><span id="1f86" class="nl mb it ng b gy nm nn l no np">1K 1K<br/>999 999<br/>100 100<br/>99 99<br/>10K 10K<br/>23 23<br/>123K 123K<br/>10K 10K<br/>1M 1M<br/>1.23B 1.23B<br/>5.63M 5.63M</span></pre></div><div class="ab cl lt lu hx lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="im in io ip iq"><h1 id="349c" class="ma mb it bd mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx bi translated">结论</h1><p id="6985" class="pw-post-body-paragraph jq jr it js b jt my jv jw jx mz jz ka kb na kd ke kf nb kh ki kj nc kl km kn im bi translated">让我们回顾一下今天所学的内容。</p><p id="2783" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们从一个简单的问题陈述开始，说明了将整数转换成相应的字符串表示的好处。</p><p id="d39b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">然后，创建了一个简单的函数来格式化基于3个最高有效数字的数字。</p><p id="96eb" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们还深入探讨了栈溢出实现的修改版本。</p><p id="74f1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">最后，我们尝试了我们自己的定制实现，它产生了相同的预期输出。</p><p id="4f80" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">感谢你阅读这篇文章。希望在下一篇文章中再见到你！</p></div><div class="ab cl lt lu hx lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="im in io ip iq"><h1 id="40b6" class="ma mb it bd mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx bi translated">参考</h1><ol class=""><li id="78c9" class="lf lg it js b jt my jx mz kb nt kf nu kj nv kn nw ll lm ln bi translated"><a class="ae le" href="https://stackoverflow.com/questions/579310/formatting-long-numbers-as-strings-in-python#579376" rel="noopener ugc nofollow" target="_blank">堆栈溢出格式长数字</a></li><li id="52dc" class="lf lg it js b jt lo jx lp kb lq kf lr kj ls kn nw ll lm ln bi translated"><a class="ae le" href="https://docs.python.org/3.8/library/stdtypes.html#printf-style-string-formatting" rel="noopener ugc nofollow" target="_blank"> Python stdtypes -字符串格式</a></li></ol></div></div>    
</body>
</html>