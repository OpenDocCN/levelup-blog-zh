<html>
<head>
<title>Writing Automated UI tests in .NET using Playwright and SpecFlow</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在中编写自动化UI测试。NET使用剧作家和SpecFlow</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/writing-automated-ui-tests-in-net-using-playwright-and-specflow-f923411a65bc?source=collection_archive---------2-----------------------#2022-01-24">https://levelup.gitconnected.com/writing-automated-ui-tests-in-net-using-playwright-and-specflow-f923411a65bc?source=collection_archive---------2-----------------------#2022-01-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9b7c" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">为什么是自动化测试，为什么应该编写自动化测试</h2></div><p id="7432" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">虽然编写测试对于大多数开发人员(包括我)来说不是一件愉快的事情，但它是软件开发的一个基本部分。您日常使用的高质量软件产品有足够的测试来将错误保持在最低限度，并给我们完美的体验，这就是为什么您应该在您正在工作的应用程序中做同样的事情。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi le"><img src="../Images/e9427afb7a22a6794e0af2248e9a47d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TQmpa7zsU4zocFVdilhcZw.jpeg"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk translated">在<a class="ae lu" href="https://unsplash.com/photos/hOCYuLmTTnY" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的<a class="ae lu" href="https://unsplash.com/@thisisengineering" rel="noopener ugc nofollow" target="_blank">this is工程</a>拍摄</figcaption></figure></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="1f52" class="mc md it bd me mf mg dn mh mi mj dp mk kr ml mm mn kv mo mp mq kz mr ms mt mu bi translated"><strong class="ak">自动化测试</strong></h2><p id="db89" class="pw-post-body-paragraph ki kj it kk b kl mv ju kn ko mw jx kq kr mx kt ku kv my kx ky kz mz lb lc ld im bi translated">你会问什么是自动化测试？它是编写独立于你要测试的软件的代码，主要目的是在应用程序进入生产之前发现其中的任何错误或缺陷。</p><p id="7865" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">不要误解我的意思，即使经过测试，你的软件也不会100%没有bug，但是bug的百分比肯定会下降。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="0088" class="mc md it bd me mf mg dn mh mi mj dp mk kr ml mm mn kv mo mp mq kz mr ms mt mu bi translated">编写自动化测试的短期缺点</h2><p id="ac8d" class="pw-post-body-paragraph ki kj it kk b kl mv ju kn ko mw jx kq kr mx kt ku kv my kx ky kz mz lb lc ld im bi translated">有很多人会认为，编写大量的测试可能会很昂贵，因为它耗费时间，因为你必须编写实际的应用程序，然后在你能够发布任何软件之前进行测试。</p><p id="4a6c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">但是让我问一个问题。你是想发布你和你的团队能开发的最好的产品，并把错误限制在最低限度，还是想匆忙发布一个有很多错误的应用程序，让所有用户和相关方都不高兴？</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="1513" class="mc md it bd me mf mg dn mh mi mj dp mk kr ml mm mn kv mo mp mq kz mr ms mt mu bi translated"><strong class="ak">长期优势</strong></h2><p id="898f" class="pw-post-body-paragraph ki kj it kk b kl mv ju kn ko mw jx kq kr mx kt ku kv my kx ky kz mz lb lc ld im bi translated">虽然作为一个公司，你确实需要花费更多的时间和金钱来编写测试，但这并不是不做测试的足够理由。</p><p id="0c58" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">从长远来看，如果测试做得正确，应用程序的质量将会更高，没有人需要花费时间和金钱去匆忙修复错误，更不用说如果您的应用程序正在快速增长，手动测试根本就不可伸缩。</p><p id="6e14" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">虽然一开始写它们可能会很痛苦。自动化测试是可重用的——您只需编写一次，就可以运行成百上千次。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="1413" class="mc md it bd me mf mg dn mh mi mj dp mk kr ml mm mn kv mo mp mq kz mr ms mt mu bi translated">剧作家和SpecFlow</h2><p id="8c10" class="pw-post-body-paragraph ki kj it kk b kl mv ju kn ko mw jx kq kr mx kt ku kv my kx ky kz mz lb lc ld im bi translated">所有这些都解决了之后，让我们创建一些自动化的UI测试。为此，我们需要使用<a class="ae lu" href="https://playwright.dev/" rel="noopener ugc nofollow" target="_blank"> <em class="na">剧作家</em> </a>，它使我们能够编写端到端的测试，并且是一个开源的浏览器自动化库。我们还将使用一个. NET的行为驱动开发(BDD)框架。</p><p id="0634" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">对于那些不熟悉BDD测试的人，这里有一个SpecFlow特性文件的代码示例。</p><figure class="lf lg lh li gt lj"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="a907" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">正如我们所看到的，它遵循了一个普通用户想要在浏览器中做一些事情的行为。剧作家所做的是帮助我们使用浏览器来测试这是否真的发生了。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="506a" class="mc md it bd me mf mg dn mh mi mj dp mk kr ml mm mn kv mo mp mq kz mr ms mt mu bi translated"><strong class="ak">设置剧作家</strong></h2><figure class="lf lg lh li gt lj"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="8621" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这段代码的作用是在我们进行的每个<em class="na">场景</em>(测试)之前启动一个浏览器，并在<em class="na">场景</em>完成后关闭它。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="60cc" class="mc md it bd me mf mg dn mh mi mj dp mk kr ml mm mn kv mo mp mq kz mr ms mt mu bi translated">创建我们的页面对象</h2><p id="72df" class="pw-post-body-paragraph ki kj it kk b kl mv ju kn ko mw jx kq kr mx kt ku kv my kx ky kz mz lb lc ld im bi translated">首先，我们将创建一个<em class="na"> BasePageObject </em>类，该类有一个<em class="na"> NavigateAsync </em>方法将我们导航到我们的页面路径。</p><figure class="lf lg lh li gt lj"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="686d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们需要一个实际的类来测试页面。</p><figure class="lf lg lh li gt lj"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="fbe5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这将有初始页面路径和我们需要完成测试的所有方法。如上所述，我们需要:</p><ol class=""><li id="00fe" class="nd ne it kk b kl km ko kp kr nf kv ng kz nh ld ni nj nk nl bi translated">在搜索栏中填写详细信息</li><li id="ad21" class="nd ne it kk b kl nm ko nn kr no kv np kz nq ld ni nj nk nl bi translated">点击搜索按钮</li><li id="9509" class="nd ne it kk b kl nm ko nn kr no kv np kz nq ld ni nj nk nl bi translated">单击SpecFlow链接</li></ol><p id="5b86" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这正是使用<em class="na">页面的示例中所发生的情况。ClickAsync </em>并传入选择器(您可以通过检查页面直接从那里复制来获得选择器)。</p><p id="4029" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这一页。RunAndWaitForNavigationAsync将强制该方法在单击之前等待导航更改，从而防止测试因页面加载缓慢而失败。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="583b" class="mc md it bd me mf mg dn mh mi mj dp mk kr ml mm mn kv mo mp mq kz mr ms mt mu bi translated"><strong class="ak">编写实际测试</strong></h2><figure class="lf lg lh li gt lj"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="4a62" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这将经历来自<em class="na">的所有步骤。上面的特性</em>文件，并按照我们想要的方式导航。最后，它将检查我们在浏览器中的位置是否实际上是我们在<em class="na">中传递的目标URL <em class="na"> </em>。特写【https://specflow.org/】文件和正<a class="ae lu" href="https://specflow.org/" rel="noopener ugc nofollow" target="_blank">文件</a>。在测试本身中，它被表示为'(。*)'在Then情况下。</em></p><h2 id="a586" class="mc md it bd me mf mg dn mh mi mj dp mk kr ml mm mn kv mo mp mq kz mr ms mt mu bi translated"><strong class="ak">总结</strong></h2><p id="24f3" class="pw-post-body-paragraph ki kj it kk b kl mv ju kn ko mw jx kq kr mx kt ku kv my kx ky kz mz lb lc ld im bi translated">对于开发人员来说，测试可能是一个短期的地狱，但却是一个长期的投资，肯定会有不错的回报，一旦理解了，实现起来就不会那么困难了。所以如果你想开发出最好的软件，一定要钻研自动化测试！</p></div></div>    
</body>
</html>