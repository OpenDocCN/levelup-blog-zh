<html>
<head>
<title>The new ‘switch’ expression in Java 12</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Java 12中新的“开关”表达式</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/java12-switch-expression-f2ed457b3e27?source=collection_archive---------1-----------------------#2019-05-31">https://levelup.gitconnected.com/java12-switch-expression-f2ed457b3e27?source=collection_archive---------1-----------------------#2019-05-31</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="26c0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">甲骨文最近于2019年3月发布了JDK版本12。JDK 12带来了许多新功能，其中最有趣的更新是对<code class="fe ko kp kq kr b">switch</code>表达式的新实现。</p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div class="gh gi ks"><img src="../Images/c82cc5ecdae1a6232e9afc1e014d2f52.png" data-original-src="https://miro.medium.com/v2/resize:fit:568/format:webp/1*B_2bkt9KDbNxAHY9GyD-yQ.jpeg"/></div></figure><p id="7394" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在Java 12之前，如果我们想写一个<code class="fe ko kp kq kr b">switch</code>条件，它看起来会像这样:</p><pre class="kt ku kv kw gt la kr lb lc aw ld bi"><span id="640e" class="le lf it kr b gy lg lh l li lj">package com.blog.posts;<br/><br/>/**<br/> * @author Vinod Kumar Nair<br/> */<br/>public class SwitchExpression {<br/><br/>    public static void main(String[] args) {<br/>        int animalCode = getAnimalCodeUsingSwitchExpression(Animal.DOG);<br/>        System.out.println("Animal Code: "+animalCode);<br/><br/>        animalCode = getAnimalCode(Animal.DOG);<br/>        System.out.println("Animal Code: "+animalCode);<br/>    }<br/><br/>    /**<br/>     * Using old switch statement<br/>     * @param animal<br/>     * @return<br/>     */<br/>    private static int getAnimalCode(Animal animal){<br/>        int animalCode;<br/>        switch(animal){<br/>            case DOG:<br/>                animalCode = 10;<br/>                break;<br/><br/>            case ELEPHANT:<br/>                animalCode = 20;<br/>                break;<br/><br/>            case TIGER:<br/>                animalCode = 30;<br/>                break;<br/><br/>            case ZEBRA:<br/>                animalCode = 30;<br/>                break;<br/><br/>            case CAT:<br/>                animalCode = 40;<br/>                break;<br/><br/>            default:<br/>                animalCode = 0;<br/>        }<br/>        return animalCode;<br/>    }<br/><br/>    enum Animal{<br/>        ELEPHANT,<br/>        TIGER,<br/>        ZEBRA,<br/>        DOG,<br/>        CAT<br/>    }<br/>}</span></pre><p id="ab63" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果我们遵循老派风格的语法，我们需要编写大量的代码。有了Java 12 <code class="fe ko kp kq kr b">switch</code>表达式，我们可以使用带有箭头<strong class="js iu"> </strong> <code class="fe ko kp kq kr b"><strong class="js iu">-&gt;</strong></code> <strong class="js iu"> </strong>符号的<strong class="js iu"> </strong>表达式标签<strong class="js iu"> </strong>以更简洁的方式重写整个逻辑，如下所示:</p><pre class="kt ku kv kw gt la kr lb lc aw ld bi"><span id="4645" class="le lf it kr b gy lg lh l li lj">package com.blog.posts;<br/><br/>/**<br/> * @author Vinod Kumar Nair<br/> */<br/>public class SwitchExpression {<br/><br/>    public static void main(String[] args) {<br/>        int animalCode =  getAnimalCodeUsingSwitchExpression(Animal.DOG);<br/>        System.out.println("Animal Code: "+animalCode);<br/>    }<br/><br/>    /**<br/>     * Using new Java 12 - Switch Expression<br/>     * @param animal<br/>     * @return<br/>     */<br/>    private static int getAnimalCodeUsingSwitchExpression(Animal animal){<br/>        return switch(animal){<br/>            case DOG -&gt; 10;<br/>            case ELEPHANT -&gt; 20;<br/>            case TIGER -&gt; 30;<br/>            case ZEBRA -&gt; 30;<br/>            case CAT -&gt; 40;<br/>        };<br/>    }<br/><br/>    enum Animal{<br/>        ELEPHANT,<br/>        TIGER,<br/>        ZEBRA,<br/>        DOG,<br/>        CAT<br/>    }<br/>}</span></pre><p id="1414" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">不需要添加<code class="fe ko kp kq kr b">return</code>或者<code class="fe ko kp kq kr b">break</code>关键词。</p><p id="1f40" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">使用Java 12中的<code class="fe ko kp kq kr b">switch</code>表达式的主要优点是在条件中没有<strong class="js iu">失败</strong>的风险。因此，没有必要在每一个开关情况中添加一个<code class="fe ko kp kq kr b">break</code> <strong class="js iu"> </strong>关键字。</p><p id="1ff9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">使用新的switch表达式的第二个优点是，您可以一起添加多个具有相同逻辑的案例。例如，如果您仔细查看switch表达式代码，两种情况<code class="fe ko kp kq kr b">TIGER</code>和<code class="fe ko kp kq kr b">ZEBRA</code>都返回相同的<code class="fe ko kp kq kr b">int</code>值，因此我们可以像下面这样一起重写两种情况，这在以前的Java版本中是不可能的:</p><pre class="kt ku kv kw gt la kr lb lc aw ld bi"><span id="3878" class="le lf it kr b gy lg lh l li lj">/**<br/>     * Using new Java 12 - Switch Expression<br/>     * @param animal<br/>     * @return<br/>     */<br/>    private static int getAnimalCodeUsingSwitchExpression(Animal animal){<br/>        return switch(animal){<br/>            case DOG -&gt; 10;<br/>            case ELEPHANT -&gt; 20;<br/>            case TIGER, ZEBRA -&gt; 30;<br/>            case CAT -&gt; 40;<br/>        };<br/>    }</span></pre><p id="c385" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">使用switch表达式的另一个优点是不需要在表达式中放入默认case。</p><blockquote class="lk ll lm"><p id="2556" class="jq jr ln js b jt ju jv jw jx jy jz ka lo kc kd ke lp kg kh ki lq kk kl km kn im bi translated"><strong class="js iu">注意:</strong> <em class="it">带ENUM，默认情况下不需要。对于其他数据类型，如字符串、整数等，需要默认情况，因为编译器不确定在运行时将发送什么数据。对于ENUM，情况并非如此，因为编译器对运行时传递的预定义数据集很有信心。</em></p></blockquote><p id="3c78" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果您使用的是IntelliJ IDEA IDE，则可以轻松配置JDK 12(预览)-开关表达式。</p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi lr"><img src="../Images/b7465dce7f73235b270de2c9ee5be228.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GBxWVTlhhQoBxuK_1UyWFw.png"/></div></div><figcaption class="lw lx gj gh gi ly lz bd b be z dk translated">智能思想集成开发环境</figcaption></figure><p id="7dac" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我希望你喜欢这篇文章，并发现它是有用的。请分享您的反馈。</p><p id="fa73" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">干杯</p></div></div>    
</body>
</html>