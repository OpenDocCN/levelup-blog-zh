<html>
<head>
<title>How You Can Avoid Using Else in Your Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何避免在代码中使用Else</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-you-can-avoid-using-else-in-your-code-871197a1adbc?source=collection_archive---------5-----------------------#2020-08-05">https://levelup.gitconnected.com/how-you-can-avoid-using-else-in-your-code-871197a1adbc?source=collection_archive---------5-----------------------#2020-08-05</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/3ab301f767fbce0d377e8444934f2ff9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*NBv-10kq5I3LD_E_"/></div></div><figcaption class="jc jd gj gh gi je jf bd b be z dk translated">在<a class="ae jg" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae jg" href="https://unsplash.com/@courtneycorlew?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Courtney Corlew </a>拍摄的照片</figcaption></figure><div class=""/><div class=""><h2 id="9a41" class="pw-subtitle-paragraph kg ji jj bd b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dk translated">有更好的方法来组织你的代码</h2></div><p id="69d5" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们一直在代码中使用else子句。很可能是出于习惯，没有想太多。Else子句似乎已经融入了我们解决编码问题的技能库中。一旦你开始学习如何编程，你要学习的第一个概念就是if-else语句。</p><p id="8d1b" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在代码中使用else看似无害，但真的是这样吗？</p><p id="5266" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当你稍微多考虑一下你的代码时，你会发现大多数else块都是多余的。所有这些多余的else块给你的代码带来的是不必要的冗长，可读性差，看起来比实际更复杂。</p><p id="f3eb" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">尽管当使用一个if-else语句时，代码仍然具有很好的可读性。它会很快变得更糟。例如，在第一个if-else语句的else块中使用另一个if-else语句时。一旦你需要这样的结构，你可能需要重构代码。</p><p id="dcba" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果我们知道如何去除这些else块，代码将变得更容易阅读。最重要的是，将会有一个单一的真理之路，使你的代码更容易被其他开发者理解。</p><p id="17d4" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这就是为什么我们要讨论四种方法来避免代码中的else块。这些备选方案的最大好处是它们使您的代码更加优雅。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="dd05" class="mb mc jj bd md me mf mg mh mi mj mk ml kp mm kq mn ks mo kt mp kv mq kw mr ms bi translated">使用退货</h1><p id="09a6" class="pw-post-body-paragraph ky kz jj la b lb mt kk ld le mu kn lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">if-else语句最经典的形式看起来非常简单。</p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="0fd2" class="nh mc jj nd b gy ni nj l nk nl">if (someCondition) {<br/>   // 10 lines of code<br/>} else {<br/>   // More code..<br/>}</span></pre><p id="8eea" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这里不涉及火箭科学。可以肯定地说，每个程序员以前都写过类似这样的代码。大多数程序员在日常工作中都会编写这样的代码，而不会花太多心思。</p><p id="c4d7" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是如果我们去掉else块，代码会是什么样子呢？</p><p id="24f4" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">不使用else块，我们可以选择使用return。这将有助于摆脱else块，并避免不必要的缩进代码。</p><p id="967a" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这就是我们如何使用return来删除else块:</p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="55e0" class="nh mc jj nd b gy ni nj l nk nl">if (someCondition) {<br/>   // 10 lines of code<br/>   return;<br/>} </span><span id="0e18" class="nh mc jj nd b gy nm nj l nk nl">// More code..</span></pre><p id="f7ea" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当使用return时，else块变得多余。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="3290" class="mb mc jj bd md me mf mg mh mi mj mk ml kp mm kq mn ks mo kt mp kv mq kw mr ms bi translated">使用默认值</h1><p id="bdc7" class="pw-post-body-paragraph ky kz jj la b lb mt kk ld le mu kn lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">If-else语句经常被用来给变量赋值——这毫无意义。您可能以前见过这样的代码:</p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="ad8a" class="nh mc jj nd b gy ni nj l nk nl">if (someCondition) {<br/>   number = someNumber * 2<br/>} else {<br/>   number = 1<br/>}</span></pre><p id="5978" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当你发现这样的代码时，改变它。去掉else块的方法是分配一个默认值。</p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="424c" class="nh mc jj nd b gy ni nj l nk nl">number = 1</span><span id="acf5" class="nh mc jj nd b gy nm nj l nk nl">if (someCondition) {<br/>   number = someNumber * 2<br/>}</span></pre><p id="b3a4" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">看起来好多了，对吧？</p><p id="ba99" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">去掉else块并使用默认值有两个主要优点。第一个与变量的范围有关。使用默认值时，变量在if-else语句之外可用。第二个是我们有更少的代码行，但是可读性提高了。</p><p id="d9f7" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">有一种方法可以进一步优化这段代码。我们可以通过使用条件操作符使这段代码成为一行代码:</p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="a459" class="nh mc jj nd b gy ni nj l nk nl">number = someCondition ? someNumber * 2 : 1;</span></pre></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="efe0" class="mb mc jj bd md me mf mg mh mi mj mk ml kp mm kq mn ks mo kt mp kv mq kw mr ms bi translated">保护条款</h1><p id="921c" class="pw-post-body-paragraph ky kz jj la b lb mt kk ld le mu kn lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">保护条款也被称为提前归还。提前返回背后的思想是，编写在函数结束时返回预期正结果的函数。</p><p id="1a99" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">函数中的其余代码应该在与函数的目的不一致的情况下尽快触发终止。</p><p id="c5fd" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">早归顾名思义。这就是早期回报的样子:</p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="75b3" class="nh mc jj nd b gy ni nj l nk nl">function someFunction() {<br/>    if (!someCondition) {<br/>        return;<br/>    }    </span><span id="7ee2" class="nh mc jj nd b gy nm nj l nk nl">    // Do something<br/>}</span></pre><p id="6c9c" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Guard子句受到许多程序员的青睐，因为它们清楚地表明当前方法在某些情况下不感兴趣。如果你想执行这个方法，你必须满足一定的标准。如果你不这样做，你会提前回来。</p><p id="76ac" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">一如既往，有更多可能的解决方案。您还可以选择反转guard子句，如下所示:</p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="573a" class="nh mc jj nd b gy ni nj l nk nl">function someFunction() {<br/>    if (someCondition) {<br/>        // Do something<br/>    }<br/>}</span></pre><p id="bca7" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">就我个人而言，我更喜欢早点回来。你可以考虑使用早期返回的一个原因是它可以让你的代码看起来更扁平。如果您选择使用包装if语句的替代方法，那么就不需要额外的缩进。这使得代码更具可读性。</p><p id="98fa" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">最重要的是，使用早期回报可以让程序员安心。通过使用早期返回，您可以首先处理无效的情况，然后在那里放一个空行，然后您可以专注于函数的“真正的”主体。</p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><h1 id="6365" class="mb mc jj bd md me mf mg mh mi mj mk ml kp mm kq mn ks mo kt mp kv mq kw mr ms bi translated">事情太多了</h1><p id="bf4c" class="pw-post-body-paragraph ky kz jj la b lb mt kk ld le mu kn lg lh mv lj lk ll mw ln lo lp mx lr ls lt im bi translated">我们要讨论的不恰当的if-else语句的最后一个例子是，当你的代码中有太多东西在运行时。您可能会联想到下面这段代码:</p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="e3be" class="nh mc jj nd b gy ni nj l nk nl">if (...) {<br/>    for(var i = 0; i &lt; someArray.length; i++) {<br/>        var isValid = hasValid(someVar[i]);<br/>        if (!isValid) {<br/>            toBeDeleted.push(someVar[i]);<br/>        }<br/>    }<br/>}<br/>else {<br/>    var service = initSomeService();<br/>    service.doSomeStuff();</span><span id="77d1" class="nh mc jj nd b gy nm nj l nk nl">    if (service.someCondition != null) {<br/>        service.scheduleNextTask();<br/>    }<br/>}</span></pre><p id="b3b0" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当if块与else块无关时，您知道if-else语句中发生了太多事情。将两个完全不相关的代码块组合在一起会让人很难理解，也很容易出错。最后但同样重要的是，很难为这个方法找到一个合适的名字并添加适当的注释，因为它做了很多事情。</p><p id="0a6f" class="pw-post-body-paragraph ky kz jj la b lb lc kk ld le lf kn lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">解决这个问题的最好方法是通过尝试在代码中划分职责来重构代码。</p></div></div>    
</body>
</html>