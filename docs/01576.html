<html>
<head>
<title>How to Set Up a TypeScript + Node.js App in 5 Minutes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在5分钟内设置好一个TypeScript + Node.js App</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-set-up-a-typescript-node-js-app-in-5-minutes-93ffee3b1768?source=collection_archive---------1-----------------------#2020-01-14">https://levelup.gitconnected.com/how-to-set-up-a-typescript-node-js-app-in-5-minutes-93ffee3b1768?source=collection_archive---------1-----------------------#2020-01-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/72f9298d3a5e687fd420a173822e062f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EQXKFB8MRC9lyGjJ8ADIqw.jpeg"/></div></div></figure><p id="56d7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">TypeScript已经占据了JavaScript的世界，对于web开发人员来说，知道TypeScript是必不可少的。在本文中，我将向您展示如何用Express和TypeScript在5分钟内启动一个节点服务器。</p><p id="11e7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你遇到任何问题，你可以在GitHub上看到完整的代码。</p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi kx"><img src="../Images/aced8a676f6e35c5f7a618a71ff5fd7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TLAWV1AQAnbMj9Ravbgq7A.png"/></div></div></figure><p id="c0da" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">创建和维护一份简历并不有趣。而是让我们为你生成一份牛逼的简历:)<a class="ae kw" href="https://gitconnected.com/resume-builder" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir">简历生成器</strong> </a> →</p><div class="lc ld gp gr le lf"><a href="https://gitconnected.com/resume-builder" rel="noopener  ugc nofollow" target="_blank"><div class="lg ab fo"><div class="lh ab li cl cj lj"><h2 class="bd ir gy z fp lk fr fs ll fu fw ip bi translated">软件工程师简历生成器和示例| gitconnected</h2><div class="lm l"><h3 class="bd b gy z fp lk fr fs ll fu fw dk translated">使用您的个人资料中的详细信息构建一份有价值的简历模板。从你的投资组合网站链接到你的简历或…</h3></div><div class="ln l"><p class="bd b dl z fp lk fr fs ll fu fw dk translated">gitconnected.com</p></div></div><div class="lo l"><div class="lp l lq lr ls lo lt jw lf"/></div></div></a></div><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi kx"><img src="../Images/aced8a676f6e35c5f7a618a71ff5fd7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TLAWV1AQAnbMj9Ravbgq7A.png"/></div></div></figure><h2 id="ac85" class="lu lv iq bd lw lx ly dn lz ma mb dp mc kj md me mf kn mg mh mi kr mj mk ml mm bi translated">设置类型脚本</h2><p id="c3d4" class="pw-post-body-paragraph jy jz iq ka b kb mn kd ke kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ij bi translated">首先创建一个项目文件夹:</p><pre class="ky kz la lb gt ms mt mu mv aw mw bi"><span id="3011" class="lu lv iq mt b gy mx my l mz na">mkdir typescript-api<br/>cd typescript-api</span></pre><p id="cba3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">初始化您的<code class="fe nb nc nd mt b">package.json</code>:</p><pre class="ky kz la lb gt ms mt mu mv aw mw bi"><span id="8b6e" class="lu lv iq mt b gy mx my l mz na">yarn init -y</span></pre><p id="565a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们将安装的第一个包是作为开发依赖项的<code class="fe nb nc nd mt b">typescript</code>。我们使用TypeScript作为开发依赖项的原因是，在我们将应用程序部署到生产环境之前，我们将TypeScript编译成普通的JavaScript代码，这些代码可以由Node解释。</p><pre class="ky kz la lb gt ms mt mu mv aw mw bi"><span id="e38b" class="lu lv iq mt b gy mx my l mz na">yarn add -D typescript</span></pre><p id="c5db" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">每个TypeScript项目的根目录下都必须有一个<code class="fe nb nc nd mt b">tsconfig.json</code>文件，这样我们就可以根据我们项目的规范来配置它。安装TypeScript后，我们可以访问项目中的<code class="fe nb nc nd mt b">tsc</code>命令。我们可以通过执行以下命令来初始化一个<code class="fe nb nc nd mt b">tsconfig.json</code>文件:</p><pre class="ky kz la lb gt ms mt mu mv aw mw bi"><span id="e9e6" class="lu lv iq mt b gy mx my l mz na">yarn tsc --init --rootDir src --outDir dist</span></pre><p id="d76c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这将生成以下tsconfig:</p><figure class="ky kz la lb gt jr"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="9acc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">最初的<code class="fe nb nc nd mt b">tsconfig.json</code>文件显示了所有可能的选项，其中重要的没有注释掉。您使用的值将取决于您的项目，但是一个可靠的基本配置应该是:</p><figure class="ky kz la lb gt jr"><div class="bz fp l di"><div class="ne nf l"/></div></figure><h2 id="d1b7" class="lu lv iq bd lw lx ly dn lz ma mb dp mc kj md me mf kn mg mh mi kr mj mk ml mm bi translated">构建API</h2><p id="ad10" class="pw-post-body-paragraph jy jz iq ka b kb mn kd ke kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ij bi translated">现在我们将安装我们需要的额外的软件包。我们的服务器将使用Express构建，所以先添加它。</p><pre class="ky kz la lb gt ms mt mu mv aw mw bi"><span id="255e" class="lu lv iq mt b gy mx my l mz na">yarn add express</span></pre><p id="42d9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们还将受益于安装一些额外的TypeScript类型以及用于自动重建的Nodemon。我们将在开发中使用<code class="fe nb nc nd mt b">ts-node</code>,这样我们就可以执行TypeScript文件，而不需要编译它们。<a class="ae kw" href="https://github.com/DefinitelyTyped/DefinitelyTyped" rel="noopener ugc nofollow" target="_blank"> DefinitelyType GitHub </a>库包含了由TS社区维护的大量类型，为您提供了NPM包的类型。这些类型可以通过使用模式<code class="fe nb nc nd mt b">@types/&lt;package-name&gt;</code>进行安装。在您的终端中运行以下命令来获取类型Nodemon和ts-node:</p><pre class="ky kz la lb gt ms mt mu mv aw mw bi"><span id="78eb" class="lu lv iq mt b gy mx my l mz na">yarn add -D @types/node @types/express nodemon ts-node</span></pre><p id="1ba5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们将在<code class="fe nb nc nd mt b">src</code>目录中构建我们的API，所以现在创建它。</p><pre class="ky kz la lb gt ms mt mu mv aw mw bi"><span id="27df" class="lu lv iq mt b gy mx my l mz na">mkdir src</span></pre><p id="7b9a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们将有两个文件<code class="fe nb nc nd mt b">index.ts</code>和<code class="fe nb nc nd mt b">handlers.ts</code>。在<code class="fe nb nc nd mt b">src</code>文件夹中，创建这些文件:</p><pre class="ky kz la lb gt ms mt mu mv aw mw bi"><span id="020d" class="lu lv iq mt b gy mx my l mz na">touch index.ts handlers.ts</span></pre><p id="00a1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们创建了一个单独的<code class="fe nb nc nd mt b">handlers.ts</code>文件来显示TypeScript已经处理模块(<code class="fe nb nc nd mt b">import</code> / <code class="fe nb nc nd mt b">export</code>)而不需要Babel。在<code class="fe nb nc nd mt b">handlers.ts</code>内部，添加以下代码:</p><figure class="ky kz la lb gt jr"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="efb1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">由于我们安装了<code class="fe nb nc nd mt b">@types/express</code>，我们可以从<code class="fe nb nc nd mt b">express</code>包本身导入类型(TypeScript知道寻找DefinitelyTyped包)。例如，这告诉我们<code class="fe nb nc nd mt b">req</code>将有一个类型<code class="fe nb nc nd mt b">Request</code>:</p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ng"><img src="../Images/6be6863439d3d376e97aec769d557a78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*psSyZgvMBBrQH0D_CH6G3w.png"/></div></div></figure><p id="5273" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们可以看到参数将自动被赋予一个类型<code class="fe nb nc nd mt b">ParamsDictionary</code>:</p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nh"><img src="../Images/1f9e8d876a336a3a10dcae5fda67d5aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pvJe3s09H6dARbFQ3Nileg.png"/></div></div></figure><p id="96ba" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为了更明确地展示我们现在如何利用TypeScript，我还为我们的API响应创建了一个<code class="fe nb nc nd mt b">HelloResponse</code>和<code class="fe nb nc nd mt b">HelloBuilder</code>。</p><p id="796d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">最后，在<code class="fe nb nc nd mt b">src/index.ts</code>中导入您的处理程序并创建您的服务器:</p><figure class="ky kz la lb gt jr"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="501d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">同样值得注意的是，由于我们已经安装了<code class="fe nb nc nd mt b">@types/node</code>，TypeScript将识别全局节点类型。比如<code class="fe nb nc nd mt b">process.env.PORT</code>自动打成<code class="fe nb nc nd mt b">string | undefined</code>。</p><h2 id="578e" class="lu lv iq bd lw lx ly dn lz ma mb dp mc kj md me mf kn mg mh mi kr mj mk ml mm bi translated">在开发和生产环境中运行您的服务器</h2><p id="5bc0" class="pw-post-body-paragraph jy jz iq ka b kb mn kd ke kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ij bi translated">我们现在拥有了节点项目所需的所有代码。为了运行我们的服务器，我们将把NPM脚本添加到我们的<code class="fe nb nc nd mt b">package.json</code>文件中。</p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ni"><img src="../Images/986e07f4176ad69032ad41059cb1b964.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Qw5oUyDbX9c5HVi-ZP8MFA.png"/></div></div></figure><p id="aca0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">通过运行<code class="fe nb nc nd mt b">yarn dev</code>，您将启动用于开发的服务器，并且它将在任何时候用Nodemon更改文件时自动重新编译。</p><p id="aa27" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为了制作，我们有一个<code class="fe nb nc nd mt b">build</code>和<code class="fe nb nc nd mt b">start</code>剧本。<code class="fe nb nc nd mt b">yarn build</code>会在<code class="fe nb nc nd mt b">dist</code>文件夹中把你的类型脚本编译成JavaScript。然后，您可以使用<code class="fe nb nc nd mt b">yarn start</code>运行您的应用程序。</p><p id="4f0e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们看看使用<code class="fe nb nc nd mt b">yarn dev</code>的路线:</p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nj"><img src="../Images/57cf8316a61bd621cf469dfdc1e335a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FT3fthT34Dq3tNKpt-heWQ.png"/></div></div></figure><h2 id="6997" class="lu lv iq bd lw lx ly dn lz ma mb dp mc kj md me mf kn mg mh mi kr mj mk ml mm bi translated">包裹</h2><p id="7643" class="pw-post-body-paragraph jy jz iq ka b kb mn kd ke kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ij bi translated">您现在已经有了用TypeScript启动任何节点项目的基础！就像安装TypeScript包并用您的<code class="fe nb nc nd mt b">tsconfig.json</code>文件配置它一样简单。</p><p id="6bcb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">—<a class="ae kw" href="https://twitter.com/treyhuffine" rel="noopener ugc nofollow" target="_blank">@ trey huffine</a>|<a class="ae kw" href="https://twitter.com/gitconnected" rel="noopener ugc nofollow" target="_blank">@ git connected</a></p></div></div>    
</body>
</html>