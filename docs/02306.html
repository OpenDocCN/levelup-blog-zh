<html>
<head>
<title>JavaScript Clean Code — Bad Comments</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript干净代码——糟糕的注释</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/javascript-clean-code-bad-comments-da8157aed09f?source=collection_archive---------11-----------------------#2020-03-04">https://levelup.gitconnected.com/javascript-clean-code-bad-comments-da8157aed09f?source=collection_archive---------11-----------------------#2020-03-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/57ec18c8e5272c761c699b527cbe3e7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*VO99Yr8M7uVHMsv9"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">照片由<a class="ae kf" href="https://unsplash.com/@denisseleon?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">丹尼斯·莱昂</a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</figcaption></figure><p id="190a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">注释有时用来解释我们无法用代码解释的想法。其他时候，它用于解释一些混乱的代码在做什么。</p><p id="6b4a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这篇文章中，我们将看看各种类型的不好的评论。</p><p id="79b7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">大部分评论都是差评。它们被用来解释糟糕的决策或糟糕的代码。我们应该避免这种评论。</p><h1 id="2cd6" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">咕哝</h1><p id="e9cc" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">仅仅因为我们喜欢或者过程需要而添加评论并不是一个好的理由。</p><p id="556a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果我们要写的话，至少评论必须有用。例如，如果我们有:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="60cb" class="mq lf it mm b gy mr ms l mt mu">try {<br/>  loadProperties();<br/>} catch (e) {<br/>  // No properties means everything is loaded<br/>}</span></pre><p id="3248" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们有一个在<code class="fe mv mw mx mm b">catch</code>块中不太有用的注释。我们不知道作者想说什么。</p><p id="dda8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们不知道“属性”是什么意思。什么时候所有东西都装好了？只是没有告诉我们太多有用的信息。</p><p id="3f14" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这可能会让更多帮助他们的人感到困惑。我们可能最终只是查看代码，看看<code class="fe mv mw mx mm b">loadProperties</code>函数做了什么来获得代码的知识。</p><h1 id="0630" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">多余的评论</h1><p id="79cf" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">这些注释解释了代码已经解释过的同样的事情。</p><p id="1eda" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，如果我们有:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="4e76" class="mq lf it mm b gy mr ms l mt mu">// adds 2 numbers;<br/>const add = (a, b) =&gt; a + b;</span></pre><p id="b35b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">那么“增加2个数字”的注释是多余的，因为我们已经知道这个函数叫做<code class="fe mv mw mx mm b">add</code>，它接受2个数字并返回它们的和。因此，我们不需要在它之前添加注释来解释代码中已经显示的内容。</p><h1 id="c04f" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">误导性的评论</h1><p id="690e" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">误导性的评论会导致开发人员对代码有错误的理解，做出错误的决定并产生错误。</p><p id="9c95" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因此显然不是食物。这导致了更多的调试时间来找出为什么有些东西不能像他们在评论中描述的那样工作。</p><h1 id="b87d" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">强制性意见</h1><p id="0cbb" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">如果一段代码不是供公众使用的，那么就没有读者来评论他们，因为我们不需要为他们生成文档。</p><p id="5548" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">它只是用额外的文本使代码文件变得混乱，这对读者和其他开发人员没有多大帮助。</p><h2 id="079f" class="mq lf it bd lg my mz dn lk na nb dp lo kr nc nd ls kv ne nf lw kz ng nh ma ni bi translated">日志注释</h2><p id="4e2e" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">用一段代码的所有变更的日志写一个长注释是没有用的。它们很长，并且不提供太多信息，因为我们已经在版本控制系统中有了变更历史。</p><p id="7172" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果我们没有使用版本控制来版本化我们的代码，现在是时候使用它了，这样我们就可以记录变更历史，用分支创建副本，并在团队工作时将不同人的代码合并成一个。</p><h1 id="31d9" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">噪音评论</h1><p id="ea2c" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">噪音评论不过是噪音。它们毫无用处，只会占用屏幕和磁盘空间。</p><p id="5b07" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们回到这个例子:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="3aa8" class="mq lf it mm b gy mr ms l mt mu">// adds 2 numbers;<br/>const add = (a, b) =&gt; a + b;</span></pre><p id="249f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这显然不是很有用，因为代码已经用与注释相同的方式解释了一切。</p><h1 id="9ce3" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">当标识符可以更好地命名时，不要使用注释</h1><p id="12b3" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以很容易地编写代码来解释它们自己。例如，不要写:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="d3ac" class="mq lf it mm b gy mr ms l mt mu">// check if employee is eligible for child care benefits<br/>if (employee.salary &lt; 50000 &amp;&amp; employee.hasChild) {<br/>  //...<br/>}</span></pre><p id="aeb0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以写:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="1d61" class="mq lf it mm b gy mr ms l mt mu">const isEligibleForChildCareBenefits = (employee) =&gt; {<br/>  return employee.salary &lt; 50000 &amp;&amp; employee.hasChild;<br/>}</span><span id="c5f9" class="mq lf it mm b gy nj ms l mt mu">if (isEligibleForChildCareBenefits(employee)) {<br/>  //...<br/>}</span></pre><p id="1f62" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们的新功能解释了和评论一样的东西，但是用了更少的词。</p><p id="c9b1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">注释也会很快过时，因为当代码被修改时，它们经常被忽略。</p><figure class="mh mi mj mk gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nk"><img src="../Images/b52510e6a929db749b1ab124a1dcbc72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*c2Lj2SBkE8cUqlhu"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">安斯利·文图拉在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><h1 id="4294" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">位置标记</h1><p id="8bc4" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">一些开发人员喜欢放置如下位置标记:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="0616" class="mq lf it mm b gy mr ms l mt mu">// //////////</span></pre><p id="9e95" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这些额外注释的使用大多数时候都是有问题的。只有当它们真的很重要的时候才使用它们。</p><h1 id="cb81" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">右大括号注释</h1><p id="6243" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">有些人喜欢用右括号标记行，并附上如下注释:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="5f7b" class="mq lf it mm b gy mr ms l mt mu">if (employee.salary &lt; 50000 &amp;&amp; employee.hasChild) {<br/>  //...<br/>} // if</span></pre><p id="553f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这是显而易见的，所以没什么用。大多数文本编辑器和ide会在你把光标放在它上面的时候突出显示左右括号，这样我们就不会错过它们。</p><h1 id="fd97" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">属性和副线</h1><p id="3e59" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">这类似于:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="2b80" class="mq lf it mm b gy mr ms l mt mu">/* Added by Bob */</span></pre><p id="f107" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">源代码控制系统已经提供了这些信息，所以我们的代码中肯定不需要它们。</p><h1 id="033d" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">注释掉的代码</h1><p id="87dd" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">注释我们的代码弄乱了我们的文件和屏幕。此外，它没有提供任何价值，因为它们被注释掉了。这也导致开发人员在阅读代码时质疑为什么他们首先被注释掉了。</p><p id="9a83" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">用它们很容易误导开发者，应该去掉。如果程序在注释掉它们的情况下仍然工作，它们就不需要出现在代码中。</p><p id="3ce5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果我们需要它们，我们可以从源代码控制系统的变更历史中获取它们。</p><h1 id="9c46" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">HTML注释</h1><p id="a96b" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">HTML注释绝对不属于代码。人类无法阅读它们。因此，从我们人类可读的注释中生成HTML代码应该是文档程序的责任。</p><h1 id="33da" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">信息太多</h1><p id="2b4d" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">没人想在评论里看文章，所以我们不应该写。如果我们真的需要的话，最好保持简短。</p><h1 id="6df0" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">非公共代码中的JSDoc</h1><p id="9bfb" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">没有向公众公开的代码不需要像为公众制作的那样进行文档化。所以我们不应该这样做，这样可以节省大量的时间来记录那些不应该被记录的代码。</p><h1 id="c063" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">结论</h1><p id="61a3" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">正如我们所看到的，有许多类型的不好的评论。我们应该避免所有这些，以节省我们自己和其他开发人员的时间。他们没有贡献任何价值或者他们误导了人们，这更糟糕。</p></div></div>    
</body>
</html>