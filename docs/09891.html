<html>
<head>
<title>Do You Consider Separating Your Domain From Your Persistence Logic?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">您是否考虑将您的域从您的持久性逻辑中分离出来？</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/do-you-consider-separating-your-domain-from-your-persistence-logic-5db3e3dae917?source=collection_archive---------3-----------------------#2021-09-28">https://levelup.gitconnected.com/do-you-consider-separating-your-domain-from-your-persistence-logic-5db3e3dae917?source=collection_archive---------3-----------------------#2021-09-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="2d49" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">固执己见的观点(简式)</h2><div class=""/><div class=""><h2 id="0aa0" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">干净的领域模型是持久性不可知的。</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/4a51f9743dbfa03f60561a37a2b30cc1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LDBR4YgcS0lZRUU7GkIbEw.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">建模不良的领域类</figcaption></figure><p id="ee21" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我假设大多数开发人员通过对象关系映射(ORM)技术与他们的数据库进行交互。如今，作为应用程序开发人员，您很少编写原始SQL。</p><p id="5c64" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">这带来了一系列全新的问题。</p><p id="e575" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">混合关注通常会导致软件开发中的坏事情。我发现将您的领域模型与您的持久性逻辑结合起来是最糟糕的混合关注类型之一。</p><blockquote class="md"><p id="4fd8" class="me mf it bd mg mh mi mj mk ml mm mc dk translated">你不应该为了取悦外部框架而牺牲你的领域设计。</p></blockquote><p id="969e" class="pw-post-body-paragraph lh li it lj b lk mn kd lm ln mo kg lp lq mp ls lt lu mq lw lx ly mr ma mb mc im bi translated">这种做法有<a class="ae ms" rel="noopener ugc nofollow" target="_blank" href="/is-your-database-bullying-you-bc0b2d587be6">多重不利影响</a>。你不仅在你的领域项目中需要不必要的库依赖，而且你突然告诉你的领域<em class="mt">数据是如何存储的。灵活性也消失了。将您的模型与持久性逻辑紧密耦合，例如ORM关注点，可能需要您放松域不变检查，因为ORM通常需要某些模式或访问修饰符。</em></p><p id="ff3e" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">🔔<a class="ae ms" href="https://nmillard.medium.com/subscribe" rel="noopener">想要更多这样的文章吗？在这里签名。</a></p><h2 id="b290" class="mu mv it bd mw mx my dn mz na nb dp nc lq nd ne nf lu ng nh ni ly nj nk nl iz bi translated">归结起来就是两件事…</h2><p id="67a5" class="pw-post-body-paragraph lh li it lj b lk nm kd lm ln nn kg lp lq no ls lt lu np lw lx ly nq ma mb mc im bi translated">你有多了解你的工具，你愿意付出多大的努力来将你的领域从持久性中分离出来。</p><p id="8994" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我不想撒谎，学习如何正确使用你选择的表单确实需要一些努力，而且简单地创建没有什么逻辑的愚蠢的贫血模型<em class="mt">要容易得多，所有的属性/字段都是setters公开的。</em></p><p id="468f" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">这是一条危险的道路。您允许无效状态的存在和持续——几乎不可能解释什么是有效的，对于加入您团队的新开发人员来说更是如此。</p><p id="7a3b" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">了解您可以使用的工具。了解来龙去脉，缺点，以及如何解决这些问题。如果您的工具提供了这个选项，那么就利用fluent配置——最重要的是，让持久性(基础设施)问题远离您的领域模型。</p><h2 id="a5bb" class="mu mv it bd mw mx my dn mz na nb dp nc lq nd ne nf lu ng nh ni ly nj nk nl iz bi translated">您是否考虑过专门的基础设施模型？</h2><p id="ea1a" class="pw-post-body-paragraph lh li it lj b lk nm kd lm ln nn kg lp lq no ls lt lu np lw lx ly nq ma mb mc im bi translated">有时候太难了，你的ORM不想打球。正是在这个时候，许多开发人员的士气崩溃，他们屈服于持久性蠕变。我去过那里。很多很多次。</p><p id="51b3" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">如果你愿意，可以称之为“务实”。但是为了取悦外部框架而牺牲自己的领域是不现实的。</p><p id="e888" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">最近，我在创建专门的基础设施模型方面取得了很多成功。这些只能在基础设施项目中访问。例如，您将拥有一个存储库，该存储库获取并合并基础架构模型，然后映射并返回域模型。</p><p id="4cc2" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">因此，您的领域完全是持久性不可知的，并且只知道它自己的模型。</p><h1 id="21f5" class="nr mv it bd mw ns nt nu mz nv nw nx nc ki ny kj nf kl nz km ni ko oa kp nl ob bi translated">临别赠言…</h1><p id="f4d0" class="pw-post-body-paragraph lh li it lj b lk nm kd lm ln nn kg lp lq no ls lt lu np lw lx ly nq ma mb mc im bi translated">不要仅仅为了更容易地使用数据库或ORM而损害您的域。首先，深入学习您的工具，并使用它提供的任何模型配置(如果有的话)——并且，尝试选择不同的途径，比如直接映射到域模型的特定于基础设施的模型。</p><h1 id="f480" class="nr mv it bd mw ns nt nu mz nv nw nx nc ki ny kj nf kl nz km ni ko oa kp nl ob bi translated">让我们保持联系！</h1><p id="01d0" class="pw-post-body-paragraph lh li it lj b lk nm kd lm ln nn kg lp lq no ls lt lu np lw lx ly nq ma mb mc im bi translated"><a class="ae ms" href="https://nmillard.medium.com/subscribe" rel="noopener">在这里注册我的简讯</a>并查看新的YouTube频道<a class="ae ms" href="https://www.youtube.com/channel/UCaUy83EAkVdXsZjF3xGSvMw" rel="noopener ugc nofollow" target="_blank"><em class="mt">(@尼可拉斯·米勒德)</em> </a></p><p id="3af7" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><em class="mt">连接上</em> <a class="ae ms" href="https://www.linkedin.com/in/nicklasmillard/" rel="noopener ugc nofollow" target="_blank"> <em class="mt"> LinkedIn </em> </a></p><h1 id="12ea" class="nr mv it bd mw ns nt nu mz nv nw nx nc ki ny kj nf kl nz km ni ko oa kp nl ob bi translated">好奇者的资源</h1><ul class=""><li id="57aa" class="oc od it lj b lk nm ln nn lq oe lu of ly og mc oh oi oj ok bi translated"><a class="ae ms" href="https://enterprisecraftsmanship.com/posts/separation-of-concerns-in-orm/" rel="noopener ugc nofollow" target="_blank">由Vladimir Khorikov在ORM </a>中分离关注点</li><li id="d468" class="oc od it lj b lk ol ln om lq on lu oo ly op mc oh oi oj ok bi translated"><a class="ae ms" rel="noopener ugc nofollow" target="_blank" href="/is-your-database-bullying-you-bc0b2d587be6">你的数据库/ORM是不是也让你做傻事？尼古拉斯·米勒德</a></li></ul></div></div>    
</body>
</html>