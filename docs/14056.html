<html>
<head>
<title>SwiftUI Paging ScrollView</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">SwiftUI分页滚动视图</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/swiftui-paging-scrollview-189aa8902e3a?source=collection_archive---------6-----------------------#2022-10-28">https://levelup.gitconnected.com/swiftui-paging-scrollview-189aa8902e3a?source=collection_archive---------6-----------------------#2022-10-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="394d" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">页面控制，难以置信的3d动画，和一个可怕的开始按钮:]</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/c03ec597f35f6d34bddafcde0f71c73f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*r21aQqHn1HuXlsON-D718g.gif"/></div></div></figure><p id="efb0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">我们将这样做:</strong> <br/> -我将在滚动视图中描述动画卡片的主要部分，并显示下面的代码<br/> -其他步骤-支持项目的功能</p><h1 id="74f9" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">主要部分</h1><h2 id="e558" class="mf lo iq bd lp mg mh dn lt mi mj dp lx la mk ml lz le mm mn mb li mo mp md mq bi translated">步骤01 —创建基础</h2><p id="77f3" class="pw-post-body-paragraph kr ks iq kt b ku mr jr kw kx ms ju kz la mt lc ld le mu lg lh li mv lk ll lm ij bi translated">首先，让我们创建一个AdaptivePagingScrollView结构，并添加实现所需的字段。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><h2 id="940a" class="mf lo iq bd lp mg mh dn lt mi mj dp lx la mk ml lz le mm mn mb li mo mp md mq bi translated">步骤2 —准备计数函数</h2><p id="bf8e" class="pw-post-body-paragraph kr ks iq kt b ku mr jr kw kx ms ju kz la mt lc ld le mu lg lh li mv lk ll lm ij bi translated">第一步，我们需要计算将解决相反任务的函数。</p><p id="53d0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">所以我们在统计:</strong><br/>//<strong class="kt ir">01</strong>&amp;&amp;<strong class="kt ir">02</strong>—抵销为指标，对方指标为抵销。<br/>//<strong class="kt ir">03</strong>&amp;&amp;<strong class="kt ir">04</strong>—目标和逻辑滚动视图偏移。第一项的逻辑偏移量从0开始，这使得计算页面索引更加容易</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><h2 id="9bd1" class="mf lo iq bd lp mg mh dn lt mi mj dp lx la mk ml lz le mm mn mb li mo mp md mq bi translated">第3步——完成工作</h2><p id="4313" class="pw-post-body-paragraph kr ks iq kt b ku mr jr kw kx ms ju kz la mt lc ld le mu lg lh li mv lk ll lm ij bi translated">让我们继续我们的观点。</p><p id="3a7d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">// <strong class="kt ir"> 01 </strong> —我们将使用几何阅读器进行基础视图中心偏移，并在HStack中添加我们的视图。</p><p id="9f9b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">// <strong class="kt ir"> 02 </strong> —在视图出现时，我们将计算基础起始偏移，并在稍后用设置它。抵消</p><p id="9e6b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">// <strong class="kt ir"> 03 </strong> —在最后一步，我们将使用手势容器同时手势。</p><p id="ae22" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">//<strong class="kt ir">04</strong>—让我们开始描述我们的拖动手势。每次更改时，我们都需要计算当前的滚动偏移量，对于下面的逻辑，我们需要保存当前的拖动偏移量。</p><p id="1dad" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">// <strong class="kt ir"> 05 </strong> —在拖动会话结束时，我们需要知道速度的净偏移量，以计算我们随后的页面索引。</p><p id="8c1b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">// <strong class="kt ir"> 06 </strong> —有了统计出来的点，我们就可以预测下一页，并创建一个动画来展示这个过渡。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><h1 id="0722" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">其他步骤</h1><h2 id="5f14" class="mf lo iq bd lp mg mh dn lt mi mj dp lx la mk ml lz le mm mn mb li mo mp md mq bi translated">第一步—数据</h2><p id="627e" class="pw-post-body-paragraph kr ks iq kt b ku mr jr kw kx ms ju kz la mt lc ld le mu lg lh li mv lk ll lm ij bi translated">首先，让我们用卡片数据创建一个JSON。为了在应用程序中使用它，我们需要一个ObservableObject，它将把所有反序列化的对象存储在卡中，并在初始化期间序列化它们。为了在一行中获得JSON文件中的所有内容，我们将为这个包编写一个小的扩展。我相信它将来会对你有所帮助。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="eebe" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如您所见，该方法对于任何可解码的数据类型都是通用的，并带有两个必需的参数:您想要解码的内容和您的包中JSON文件的名称。还有两个参数具有合理的默认值，但是如果需要的话，允许您自定义日期和键。</p><p id="f793" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">接下来，它试图在app bundle中找到JSON的路径，并将其加载到数据实例中。如果其中任何一个失败，代码将使用fatalError()强制应用程序崩溃，这可能看起来很糟糕，但请记住:这是您手工创建的JSON文件，并直接添加到您的应用程序包中——如果您忘记了JSON或它无法加载，这是您的基本逻辑错误，应该予以纠正。</p><p id="999c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">文件加载后，代码会创建一个JSONDecoder，并尝试将文件内容解码为您所要求的类型。然后，它有一系列catch块来处理所有可能的错误，每个错误都会触发一个崩溃，告诉您发生了什么错误。</p><p id="6d22" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">同样，在这里触发崩溃是完全没问题的:这都是你直接添加到应用程序中的静态硬编码JSON，所以如果它意外地改变了格式，那么你的程序就不应该运行。事实上，我通常会添加测试，专门尝试加载我的应用程序包中包含的所有JSON，以确保它们不会意外更改。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="e413" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">编译、构建、运行……完成！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi my"><img src="../Images/64786fb09549198992048e560a165246.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e-qwJUKr7THGJYCWcGgETA.png"/></div></div></figure><p id="8300" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">仅此而已，最美好的祝愿，没有bug编码[-。-]</p><p id="7708" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">链接到项目<a class="ae mz" href="https://github.com/borisdipner/paging-srollview-swiftui" rel="noopener ugc nofollow" target="_blank"> GitHub </a>和<a class="ae mz" href="https://borisdipner.com/swiftui-paging-scrollview.html" rel="noopener ugc nofollow" target="_blank">我的博客</a></p></div></div>    
</body>
</html>