<html>
<head>
<title>The Problem with Accuracy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">准确性的问题</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/the-problem-with-accuracy-3670891b908e?source=collection_archive---------10-----------------------#2020-03-10">https://levelup.gitconnected.com/the-problem-with-accuracy-3670891b908e?source=collection_archive---------10-----------------------#2020-03-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="e130" class="pw-post-body-paragraph jo jp iq jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ij bi translated">想象一下，我们正在建造一个鸭嘴兽探测器。这个系统拍摄动物照片，并识别鸭嘴兽:</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/b20939778b0ccf2fb651e892b0fe6d86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YJN6Kt9QkQuh7VWtC1mszg.png"/></div></div></figure><p id="295c" class="pw-post-body-paragraph jo jp iq jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ij bi translated">这个系统是一个<strong class="jq ir"> <em class="ky">二进制分类器</em> </strong> <em class="ky"> r </em>，因为它要么返回肯定的结果，要么返回否定的结果。假设我们从上面的图片中得到这些结果:</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi kz"><img src="../Images/5356dc7db33c42399d41b2a55b34ba3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X-iWc5lwcjyaRlLys7DhIQ.png"/></div></div></figure><p id="b7e4" class="pw-post-body-paragraph jo jp iq jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ij bi translated">乍一看，这些结果看起来还过得去，但不是很好。让我们找到一个度量标准，对这种直觉进行量化。一个流行的衡量标准是<strong class="jq ir"><em class="ky"/></strong>——正确结果的百分比。让我们看一下结果，用绿色勾号标出正确的，用红色叉号标出不正确的:</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi la"><img src="../Images/22f5d974771f556666cd83fdae9f4667.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gamLPMczqAB98OcBfa_4uw.png"/></div></div></figure><p id="703c" class="pw-post-body-paragraph jo jp iq jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ij bi translated">分类器在10个结果中找到了7个，因此准确率为70%。</p><p id="67f2" class="pw-post-body-paragraph jo jp iq jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ij bi translated">准确性让人感觉很自然，但它不是一个完美的衡量标准。它有一个狡猾的问题，这使得它往好里说是可疑的，往坏里说是误导的。在这篇文章中，我将描述这个问题，并告诉你如何解决它。</p><h1 id="53f2" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">作弊分类器</h1><p id="a0e3" class="pw-post-body-paragraph jo jp iq jq b jr lz jt ju jv ma jx jy jz mb kb kc kd mc kf kg kh md kj kk kl ij bi translated">我们打个赌吧，我有信心赢。我敢打赌:</p><ul class=""><li id="6f37" class="me mf iq jq b jr js jv jw jz mg kd mh kh mi kl mj mk ml mm bi translated">我可以编写一个类似上面的鸭嘴兽分类器；</li><li id="ab1d" class="me mf iq jq b jr mn jv mo jz mp kd mq kh mr kl mj mk ml mm bi translated">准确率高达90%；</li><li id="f943" class="me mf iq jq b jr mn jv mo jz mp kd mq kh mr kl mj mk ml mm bi translated">短短两行Python代码。</li></ul><p id="b75f" class="pw-post-body-paragraph jo jp iq jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ij bi translated">你愿意打赌吗？(请做。我们都知道我在作弊，但还是迁就我吧。)</p><p id="f465" class="pw-post-body-paragraph jo jp iq jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ij bi translated">成交！下面是分类器:</p><pre class="kn ko kp kq gt ms mt mu mv aw mw bi"><span id="b2be" class="mx lc iq mt b gy my mz l na nb">def classify(image):<br/>    return False</span></pre><p id="444a" class="pw-post-body-paragraph jo jp iq jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ij bi translated">上面的代码在测试图像上有90%的准确率。你可以猜到，这个辉煌的业绩是一个假象。它不是来自智能分类器——它来自这样一个事实，即测试数据中只有一张图像是鸭嘴兽。分类器总是否认图像代表鸭嘴兽，所以它在其他9种情况下是正确的:</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi nc"><img src="../Images/b2b3cdfbe588ed3b721c39bfa3400bfd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FMXr7mRzjVRZXbJhN8dtRg.png"/></div></div></figure><p id="efdd" class="pw-post-body-paragraph jo jp iq jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ij bi translated">现在你有了:一个简单、准确…而且完全没有意义的分类器。</p><p id="1998" class="pw-post-body-paragraph jo jp iq jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ij bi translated">上面的例子并不像你想象的那样做作。现实生活中的分类器也会遭遇同样的问题，即使他们不想作弊。事实上，这个问题在真实的系统上可能更糟，因为更难发现。</p><p id="b096" class="pw-post-body-paragraph jo jp iq jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ij bi translated">作为一个例子，考虑一个机器学习驱动的火灾探测器。火灾是很少发生的事件，因此分类器可能学会从不或几乎从不发出警报。这样的分类器可能是准确的，但也是非常危险的。</p><p id="4083" class="pw-post-body-paragraph jo jp iq jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ij bi translated">这就是准确性的问题。这是一个直观的衡量标准，但是对于现实世界的系统来说并不适用。我们需要一些东西来代替它。</p><h1 id="cd10" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">比准确性更好</h1><p id="ea06" class="pw-post-body-paragraph jo jp iq jq b jr lz jt ju jv ma jx jy jz mb kb kc kd mc kf kg kh md kj kk kl ij bi translated">让我们来看看准确度的两种替代方案:<em class="ky">精度</em>和<em class="ky">召回</em>。</p><p id="3722" class="pw-post-body-paragraph jo jp iq jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ij bi translated">下面是<strong class="jq ir"> <em class="ky">精度</em> </strong>的工作原理。从分类器中取出所有肯定的结果。在我们的例子中，这些将是系统分类为鸭嘴兽的所有图像。其中有多少是鸭嘴兽？这就是分类器的精度。</p><p id="5a2d" class="pw-post-body-paragraph jo jp iq jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ij bi translated">作为一个具体的例子，想象一个鸭嘴兽分类器，它很挑剔，很特别。这个分类器不会说一幅图像是鸭嘴兽，除非它非常确定它正在看一只鸭嘴兽。假设每100张它识别为鸭嘴兽的图像中，就有98张确实是鸭嘴兽。这是98%的精确度。</p><p id="dbd7" class="pw-post-body-paragraph jo jp iq jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ij bi translated">另一方面，分类器不妥协的态度可能会导致一些<em class="ky">假阴性</em>。这时分类器会拒绝一只完美的鸭嘴兽:</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi nd"><img src="../Images/8473d9686aa104a40cff972682235b49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*URvIqcuActu7TaR5eTSdww.png"/></div></div></figure><p id="eb29" class="pw-post-body-paragraph jo jp iq jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ij bi translated">这就是斯特恩高精度分类器的权衡。当它给我们一个自信时，我们可以相信它:“是的，这是鸭嘴兽。”但当它说:“不，这不是鸭嘴兽”时，我们应该警惕</p><p id="ad64" class="pw-post-body-paragraph jo jp iq jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ij bi translated">precision的对应词是<strong class="jq ir"> <em class="ky"> recall </em> </strong>，我们可以这样概括:取数据中所有的鸭嘴兽。其中有多少是系统正确分类的？像精度一样，召回率通常用百分比表示。如果一个系统有97%的回忆，这意味着它识别了100只鸭嘴兽中的97只。</p><p id="cb63" class="pw-post-body-paragraph jo jp iq jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ij bi translated">召回率高的系统是随和宽容的。它撒下一张大网，可以捕捉到大多数鸭嘴兽。另一方面，在急于捕捉它们的过程中，该系统也可能捕捉到一些<em class="ky">误报</em>:不是鸭嘴兽，但被归类为鸭嘴兽的东西。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi ne"><img src="../Images/234d73fca7c03eaeeca9e7f8dacf9e8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qUSipXCVDLWo4GE9MTpM9w.png"/></div></div></figure><p id="8a6e" class="pw-post-body-paragraph jo jp iq jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ij bi translated">我总是发现很难记住精确和回忆之间的区别。我甚至想出了一个小记忆法来帮助我记住哪个是哪个:</p><blockquote class="nf ng nh"><p id="b35a" class="jo jp ky jq b jr js jt ju jv jw jx jy ni ka kb kc nj ke kf kg nk ki kj kk kl ij bi translated">绝对精确地说鸭嘴兽就是鸭嘴兽。</p></blockquote><p id="a861" class="pw-post-body-paragraph jo jp iq jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ij bi translated">这个头韵提醒我，当一个系统说“是”的时候，我应该相信它的精确度很高。相反，当一个系统说“不”的时候，我应该相信它的高召回率。</p><p id="5963" class="pw-post-body-paragraph jo jp iq jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ij bi translated">现在，我们有两个而不是一个指标来代替准确性。使用两个指标而不是一个迫使我们玩一个平衡的游戏。你应该建立一个挑剔的高精度分类器，还是一个悠闲的高召回分类器？让我们看看如何做出选择。</p><h1 id="00ea" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">选择正确的指标</h1><p id="c102" class="pw-post-body-paragraph jo jp iq jq b jr lz jt ju jv ma jx jy jz mb kb kc kd mc kf kg kh md kj kk kl ij bi translated">想象一下，你正在比较两个系统:一个具有高精度，另一个具有高召回率。两者哪个更好？</p><p id="b48f" class="pw-post-body-paragraph jo jp iq jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ij bi translated">你可以用一个更简单的问题来代替这个问题:当系统出错时，你更希望得到哪个——误报还是漏报？如果你想最小化<em class="ky">误报</em>，首选<em class="ky">精度</em>。为了最大限度地减少<em class="ky">假阴性</em>，最好选择<em class="ky">召回。</em></p><p id="b64f" class="pw-post-body-paragraph jo jp iq jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ij bi translated">这里来一个具体的例子。回想一下我之前提到的机器学习驱动的火灾报警器。在这种情况下，误报意味着即使没有发生火灾，警报也会响起:</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi nl"><img src="../Images/a94475497029db3e4c48b99af2e86e09.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hfnbv8ddsA7pC27WTxhEjg.png"/></div></div></figure><p id="6884" class="pw-post-body-paragraph jo jp iq jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ij bi translated">相比之下，假阴性意味着系统无法识别正在发生的火灾:</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi nl"><img src="../Images/b5e52c89d9b50be335ef1ed3ae60c845.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4LXX04QQC91AKxmQIReQGA.png"/></div></div></figure><p id="8597" class="pw-post-body-paragraph jo jp iq jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ij bi translated">在这种情况下，误报没什么大不了的，但误报却是。大多数人不会介意偶尔不必要的户外散步，但没人愿意在着火的大楼里逗留。对于这个系统，我们应该把重点放在召回上，即使牺牲一些精确度。如果系统有很高的召回率，那么当它说:“不，没有发生火灾”时，我们可以相信它</p><p id="73b8" class="pw-post-body-paragraph jo jp iq jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ij bi translated">相比之下，想想一个办公室接待系统。这个系统识别员工，并为他们敞开大门。假阴性意味着系统无法识别某个员工。当这种情况发生时，这个人必须证明她的身份——也许是通过刷卡。另一方面，误报意味着系统向一个随机的陌生人敞开大门。</p><p id="b6e6" class="pw-post-body-paragraph jo jp iq jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ij bi translated">在这个例子中，大多数公司宁愿冒假阴性的风险，也不愿冒假阳性的风险。换句话说，他们更注重精确而不是回忆。如果系统有很高的精度，那么当它说:“是的，我认识这个人”时，我们可以信任它。</p><p id="f183" class="pw-post-body-paragraph jo jp iq jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ij bi translated">我给了你一个在精确度和召回率之间选择的经验法则，但是在实践中事情会变得更加复杂。想象一下，一个偏执的火灾探测系统每天会发出许多警报。这样的系统有很高的召回率，因为没有火灾会被忽视——但我还是不会使用它。虽然偶尔出现假阴性是可以的，但没有人喜欢每隔几分钟就有一次可怕的火警。</p><p id="eed8" class="pw-post-body-paragraph jo jp iq jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ij bi translated">在实践中，精确和召回之间的决定总是一个平衡的行为。在某些情况下，你甚至不能决定关注哪一个——你只是想在两者之间找到一个好的平衡。对于这些情况，统计学家有一个称为<em class="ky"> F1得分</em>的指标。它将精确度和召回率合并为一个平均指标:</p><pre class="kn ko kp kq gt ms mt mu mv aw mw bi"><span id="59bd" class="mx lc iq mt b gy my mz l na nb">F1 = 2 * (precision * recall) / (precision + recall)</span></pre><p id="7188" class="pw-post-body-paragraph jo jp iq jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ij bi translated">所以，你有它。如果你不确定是追求精确还是回忆，考虑关注F1的分数。</p><h1 id="84ea" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">包装它</h1><p id="a840" class="pw-post-body-paragraph jo jp iq jq b jr lz jt ju jv ma jx jy jz mb kb kc kd mc kf kg kh md kj kk kl ij bi translated"><strong class="jq ir"> <em class="ky">准确度</em> </strong>是二进制分类器最明显的度量。它回答了这个问题:“有多少例子被正确分类？”</p><p id="3578" class="pw-post-body-paragraph jo jp iq jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ij bi translated">即使很直观，准确性也会误导人。我们已经看到了一个精确系统的例子，但它在实践中并不是很有用。作为替代，我们看了另外两个指标:<strong class="jq ir"> <em class="ky">精度</em> </strong>和<strong class="jq ir"> <em class="ky">召回</em> </strong>。</p><p id="915a" class="pw-post-body-paragraph jo jp iq jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ij bi translated">当一个高精度的系统识别出某个东西时，我们一般可以信任它。另一方面，该系统可能容易出现<strong class="jq ir"> <em class="ky">假阴性</em> </strong>。当系统无法识别它正在寻找的一些东西时，就会发生假阴性。</p><p id="d5ad" class="pw-post-body-paragraph jo jp iq jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ij bi translated">高召回率的系统则相反。它通常能识别它在寻找的东西，但也可能看到不存在的东西。那些错误是<strong class="jq ir"> <em class="ky">误报</em> </strong>。</p><p id="9ad6" class="pw-post-body-paragraph jo jp iq jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ij bi translated">根据您构建的内容，您可能会容忍假阳性或假阴性。因此，你可以设计系统来提高精确度或召回率。</p><p id="3ff9" class="pw-post-body-paragraph jo jp iq jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ij bi translated">如果你对精确和回忆都没有强烈的偏好，你还有第三个选择。你可以优化系统的<strong class="jq ir"> <em class="ky"> F1分数</em> </strong>，在精确度和召回率之间取得平衡。</p><p id="4f8a" class="pw-post-body-paragraph jo jp iq jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ij bi translated">就像他们说的，你得到你测量的。小心选择你的度量标准，你会得到一个有用的系统。现在，对不起，我得赶快离开这栋大楼——火警又响了。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi nm"><img src="../Images/51cd52c93786d2dc6dfa3debd1cd0908.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*96g8PQjTFSJPBv6KCz5hzQ.jpeg"/></div></div></figure></div><div class="ab cl nn no hu np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="ij ik il im in"><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/ae815976d39b730ca0b1dc526066865d.png" data-original-src="https://miro.medium.com/v2/resize:fit:500/format:webp/0*CLGEpC-MfhtV-7XY.png"/></div></figure><p id="6838" class="pw-post-body-paragraph jo jp iq jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ij bi translated"><em class="ky">本帖是</em> <a class="ae nv" href="http://www.progml.com/" rel="noopener ugc nofollow" target="_blank">编程机器学习</a> <em class="ky">的衍生，程序员零到英雄入门，从基础到深度学习。前往</em> <a class="ae nv" href="http://www.pragprog.com/titles/pplearn" rel="noopener ugc nofollow" target="_blank"> <em class="ky">此处</em> </a> <em class="ky">为电子书，</em> <a class="ae nv" href="https://www.amazon.com/gp/product/1680506609/ref=as_li_qf_asin_il_tl?ie=UTF8&amp;tag=ductyp-20&amp;creative=9325&amp;linkCode=as2&amp;creativeASIN=1680506609&amp;linkId=21357a11b4a7bc9be95476540d1d3a09" rel="noopener ugc nofollow" target="_blank"> <em class="ky">此处</em> </a> <em class="ky">为纸质书，或来</em> <a class="ae nv" href="https://forum.devtalk.com/tag/book-programming-machine-learning" rel="noopener ugc nofollow" target="_blank"> <em class="ky">论坛</em> </a> <em class="ky">如有疑问和评论！</em></p></div></div>    
</body>
</html>