<html>
<head>
<title>A Cloud-Native database for your data science project</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">适用于您的数据科学项目的云原生数据库</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/a-cloud-native-database-for-your-data-science-project-d55ed43ab9e7?source=collection_archive---------30-----------------------#2021-02-23">https://levelup.gitconnected.com/a-cloud-native-database-for-your-data-science-project-d55ed43ab9e7?source=collection_archive---------30-----------------------#2021-02-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="9f43" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用免费的企业级数据仓库将模型投入生产。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/6bd1f16a6b6207e06a907c1ed418a76a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5T3n-Qsdxz4Fs6wSBFul7Q.jpeg"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated">【https://unsplash.com/photos/gpjvRZyavZc T2】号</figcaption></figure><h1 id="f3d8" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">为什么？</h1><p id="08d6" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">在现实世界的数据科学中，您永远不会收到一个漂亮干净的CSV文件，但它将来自数据库，或者如果您幸运的话，来自数据仓库。</p><p id="f830" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在大多数数据科学课程中，没有人会谈论数据库，也没有人会教你如何使用数据库。事实上，没有数据科学家愿意花时间安装和管理数据库。幸运的是，有自主数据库，一个<em class="kl">“数据科学家友好”</em>云原生数据库。</p><p id="4c36" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Autonomous DB运行在Oracle Cloud上，它是一项完全托管的服务，可以为您自动执行各种安装或维护操作。你只需要使用它，在本文中，我们将学习如何在数据科学项目中使用它。</p><p id="a546" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在开始之前，我想告诉您，作为我们始终免费服务层的一部分，您可以免费使用2个Oracle自治数据库。<a class="ae lc" href="https://medium.com/@roberto.di.bella/5-reasons-why-oracle-free-tier-is-better-than-your-raspberry-pie-277ac8cb37e3" rel="noopener"> <strong class="jp ir">查看我关于Oracle云始终免费层的文章，了解更多信息并注册！</strong>T9】</a></p><blockquote class="mg mh mi"><p id="7fb7" class="jn jo kl jp b jq jr js jt ju jv jw jx mj jz ka kb mk kd ke kf ml kh ki kj kk ij bi translated">要注册永远免费的服务<a class="ae lc" href="https://www.oracle.com/cloud/free/?source=:so:li:or:awr:ocorp:::RC_WWSA191002P00028:GjTemp&amp;SC=:so:li:or:awr:ocorp:::RC_WWSA191002P00028:GjTemp&amp;pcode=WWSA191002P00028" rel="noopener ugc nofollow" target="_blank">请点击此链接</a>。</p><p id="01bc" class="jn jo kl jp b jq jr js jt ju jv jw jx mj jz ka kb mk kd ke kf ml kh ki kj kk ij bi translated"><strong class="jp ir">免责声明:</strong>如果您没有明确允许，Oracle Cloud不得向您收费，并且免费服务没有到期日。</p></blockquote></div><div class="ab cl mm mn hu mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ij ik il im in"><h1 id="83d0" class="ld le iq bd lf lg mt li lj lk mu lm ln lo mv lq lr ls mw lu lv lw mx ly lz ma bi translated"><strong class="ak">但是等一下！什么是数据仓库？</strong></h1><p id="395f" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">“数据仓库是一种关系数据库，它聚集了整个组织中的结构化数据。它汇集了来自多个来源的数据，其中大部分通常是在线事务处理(OLTP)数据。数据仓库选择、组织和聚合数据，以便进行高效的比较和分析。”</p><p id="0eac" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">好了，谈够了，让我们开始工作吧。</p><p id="7e0c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">由于关于建模的文章和课程数不胜数，我们不会太关注这个，我们将使用著名的泰坦尼克号数据集。</p><h1 id="d723" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">让我们从创建云原生数据库开始</h1><blockquote class="mg mh mi"><p id="e4dc" class="jn jo kl jp b jq jr js jt ju jv jw jx mj jz ka kb mk kd ke kf ml kh ki kj kk ij bi translated"><strong class="jp ir">注意</strong>:要了解如何创建一个始终免费的ADB并向其加载数据，请查看<a class="ae lc" href="https://www.youtube.com/watch?v=Ho91Ysq_Z1I" rel="noopener ugc nofollow" target="_blank">此视频</a>。</p></blockquote><p id="b938" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因此，我们有一个在Oracle Cloud上免费运行的自治数据仓库，其中包含一个包含所有乘客数据的“泰坦尼克”表。</p><p id="9fd4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您不需要任何外部工具，因为自治数据库附带了一整套工具，这将使您在ETL或数据集成过程中的生活变得轻松。</p><blockquote class="mg mh mi"><p id="2183" class="jn jo kl jp b jq jr js jt ju jv jw jx mj jz ka kb mk kd ke kf ml kh ki kj kk ij bi translated">要了解这些集成工具以及如何使用它们<a class="ae lc" href="https://go.oracle.com/LP=105660?elqCampaignId=283506&amp;src1=:se:lw:ie:pt:::OD&amp;evite=WWMK210112P00135:se:lw:ie:pt:::OD" rel="noopener ugc nofollow" target="_blank">请查看本页</a>了解所有关于自治数据库工具的信息。</p></blockquote><h1 id="3228" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">我们开始吧！图书馆</h1><p id="494e" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">今天我们将使用<em class="kl"> scikit-learn </em>和<em class="kl"> SQLAlchemy </em>。虽然第一个是最流行的python库之一，但后者提供了一整套众所周知的企业级持久性模式，旨在实现高效和高性能的数据库访问。</p><blockquote class="mg mh mi"><p id="7bd1" class="jn jo kl jp b jq jr js jt ju jv jw jx mj jz ka kb mk kd ke kf ml kh ki kj kk ij bi translated">要安装SQLAlchemy，只需使用以下命令:<em class="iq"> pip install SQLAlchemy </em></p></blockquote><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="acec" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们今天需要的第二个要素是数据库钱包。您可以从数据库的服务控制台下载wallet，如下图所示。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi na"><img src="../Images/fb239e773deef433ebce6d608a32bbbb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DGdk-5S4ep_cmDjcavupKA.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated">从自治数据库服务控制台中，选择“管理”选项卡，然后单击“下载客户端凭据”</figcaption></figure><p id="daae" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了连接到自治数据库，我们需要:<br/> <em class="kl"> —解压缩的钱包<br/> —用户<br/> —密码<br/> —服务类型连接字符串</em></p><p id="5a15" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">通过使用文本编辑器打开wallet中的文件"<em class="kl"> sqlnet.ora </em>"可以找到连接字符串。有效服务类型的一个例子是“<em class="kl"> demodb_high </em>”。</p><blockquote class="mg mh mi"><p id="82bd" class="jn jo kl jp b jq jr js jt ju jv jw jx mj jz ka kb mk kd ke kf ml kh ki kj kk ij bi translated"><strong class="jp ir">注意</strong>:如果你对配置钱包有困难或者想了解更多，请参考<a class="ae lc" href="https://docs.oracle.com/en/cloud/paas/autonomous-database/adbsa/connect-data-warehouse.html#GUID-94719269-9218-4FAF-870E-6F0783E209FD" rel="noopener ugc nofollow" target="_blank">官方文档</a>。</p></blockquote><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="4871" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们现在准备通过SQLAlchemy连接到数据库，并使用连接查询DataFrame格式的完整titanic数据集。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="1986" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这次我们将保持简单:我们将删除一些列和所有缺少值的行。当然，我们会付出精度下降的代价，但在这里我们不关心这个。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="d650" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下一步包括将分类变量转换成数值变量:因此我们使用sklearn的"<em class="kl"> LabelEncoder </em>"对象将列"<em class="kl"> SEX </em>"和"<em class="kl">abowed</em>"转换成数值。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="my mz l"/></div></figure><blockquote class="mg mh mi"><p id="aae9" class="jn jo kl jp b jq jr js jt ju jv jw jx mj jz ka kb mk kd ke kf ml kh ki kj kk ij bi translated"><strong class="jp ir">注意</strong>:在<strong class="jp ir">拟合/变换</strong>之后，保存每个编码器很重要，这样我们就可以在将新数据输入模型之前，在<strong class="jp ir">推理时间</strong>重用它。为此，我们将使用pickle模块，如下所示。</p></blockquote><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="af46" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们继续像往常一样，使用80/20规则分割训练和测试数据，并创建一个简单的<em class="kl"> RandomForest </em>分类器，然后我们向其提供训练数据(使用fit函数)。随后我们用评分法对模型的性能进行了评估。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="my mz l"/></div></figure><h1 id="ab89" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">现在呢？推理阶段。</h1><h2 id="2c3e" class="nb le iq bd lf nc nd dn lj ne nf dp ln jy ng nh lr kc ni nj lv kg nk nl lz nm bi translated">好了，我们保存了我们的模型，是时候使用它了！假设我们发现了一份新的乘客名单，但我们不知道他们是否幸存。让我们用我们的模型来看看谁更有可能幸存下来！</h2><p id="d616" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">首先，我们将重新加载我们之前保存的对象:两个<em class="kl">标签编码器</em>，一个<em class="kl">缩放器</em>，以及经过训练的<em class="kl">模型</em>。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="a755" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，让我们像以前一样从自治数据仓库中获取新乘客的数据，然后对训练数据应用相同的转换。这一步至关重要，否则，模型不会接受它。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="my mz l"/></div></figure><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="6484" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们将使用刚刚加载的模型来预测他们是否能幸存。</p><p id="c51b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们将最终<strong class="jp ir">将预测发送回自主数据仓库</strong> e，这样我们就可以用我们最喜欢的分析工具构建一些漂亮的仪表板！</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="my mz l"/></div></figure><h1 id="0d7a" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">结论</h1><p id="b93f" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">在本文中，我们学习了如何使用云原生数据库来构建并在生产中使用在一个非常流行的数据集上训练的scikit-learn模型。</p><p id="718e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先，我们看到了如何使用流行的SQLAlchemy库创建和连接自治数据仓库。然后，我们从数据库中提取数据，构建模型，并保存推理阶段所需的关键成分，如缩放器、编码器和模型。最后但同样重要的是，我们从数据库中获得新的未分类数据，并用训练好的模型对其进行分类。</p><h2 id="c41a" class="nb le iq bd lf nc nd dn lj ne nf dp ln jy ng nh lr kc ni nj lv kg nk nl lz nm bi translated">了解自治数据库中包含的工具的更多信息，并发现它们如何帮助您<a class="ae lc" href="https://go.oracle.com/LP=105660?elqCampaignId=283506&amp;src1=:se:lw:ie:pt:::OD&amp;evite=WWMK210112P00135:se:lw:ie:pt:::OD" rel="noopener ugc nofollow" target="_blank">查看我们的现场活动</a>！</h2><h2 id="78d9" class="nb le iq bd lf nc nd dn lj ne nf dp ln jy ng nh lr kc ni nj lv kg nk nl lz nm bi translated">要了解永远免费的云资源<a class="ae lc" href="https://www.oracle.com/cloud/free/?source=:so:li:or:awr:ocorp:::RC_WWSA191002P00028:GjTemp&amp;SC=:so:li:or:awr:ocorp:::RC_WWSA191002P00028:GjTemp&amp;pcode=WWSA191002P00028" rel="noopener ugc nofollow" target="_blank">请点击这里</a>！</h2><h2 id="95c5" class="nb le iq bd lf nc nd dn lj ne nf dp ln jy ng nh lr kc ni nj lv kg nk nl lz nm bi translated">想要更多吗？加入非官方<a class="ae lc" href="https://discord.gg/NfcvyKxrRU" rel="noopener ugc nofollow" target="_blank">不和谐社区</a>！</h2></div><div class="ab cl mm mn hu mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ij ik il im in"><blockquote class="nn"><p id="21d8" class="no np iq bd nq nr ns nt nu nv nw kk dk translated">我是罗伯特·迪贝拉，甲骨文公司的数据科学家顾问。帮助数据科学家、开发人员和公司在Oracle云上取得成功。</p><p id="6d86" class="no np iq bd nq nr ns nt nu nv nw kk dk translated">在LinkedIn 上随意联系。</p></blockquote></div></div>    
</body>
</html>