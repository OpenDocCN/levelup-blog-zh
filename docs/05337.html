<html>
<head>
<title>Recycler View in Kotlin | Android</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Kotlin | Android中的回收器视图</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/recycler-view-in-kotlin-android-4f1c00d82e72?source=collection_archive---------7-----------------------#2020-08-20">https://levelup.gitconnected.com/recycler-view-in-kotlin-android-4f1c00d82e72?source=collection_archive---------7-----------------------#2020-08-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/3983365bcd260e3f75b2076947092041.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pX8_0qaGhRFr07QuvNH1zw.png"/></div></div></figure><h1 id="3a70" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">回收器视图的解释</h1><p id="a6a3" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">Recycler view是android开发中的一个组件，用于向屏幕列出大量数据。在这个故事中，我将尝试进一步解释这个概念。</p><p id="34c9" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">当然，您也可以使用ListView或其他工具，但Recyclerview在性能方面更胜一筹。我说的“性能”是什么意思？当Listview试图加载整个数组时，Recycler视图只加载显示所需的数据。这意味着，例如，您在一个数组中有20个项目，而您的屏幕大小仅够数组中的5个项目，Recyclerview将在缓存中保存9个项目。这些数字可能令人困惑，但它们只是一个例子。你会明白的，请看下图。</p><ul class=""><li id="98ae" class="lz ma iq ky b kz lu ld lv lh mb ll mc lp md lt me mf mg mh bi translated">向下滚动时；如果您滚动回顶部，2个项目仍将保留在缓存中。如果您滚动更多，这2个项目将被删除，数组中接下来的2个项目将保存在缓存中。</li><li id="739a" class="lz ma iq ky b kz mi ld mj lh mk ll ml lp mm lt me mf mg mh bi translated">屏幕底部的2个项目；当您向下滚动时，除了我们示例中屏幕上的5个项目之外，接下来的2个项目将被保留到屏幕上。</li></ul><figure class="mo mp mq mr gt jr gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/6eaf038a70417fd8ce8e39e672592c7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:858/format:webp/1*MyohaOT3JXQzKtET_sRhhw.png"/></div><figcaption class="ms mt gj gh gi mu mv bd b be z dk translated">两个顶视图和底视图被回收器视图反复使用，它只是由适配器加载数据。因此，系统不会加载更多的视图，也不会损失任何性能。</figcaption></figure><p id="a583" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">回收器视图还具有布局管理器功能。你可以用不同的形状列出你的物品。比如横向布局，网格布局，或者更有趣的是无序布局。您可以查看下图中的示例布局。</p><figure class="mo mp mq mr gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/3a7618433902ade4afb208848198e993.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*scNhy-bScx_KlAcaRF3OeA.png"/></div></div></figure></div><div class="ab cl mx my hu mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="ij ik il im in"><h1 id="d4f2" class="jy jz iq bd ka kb ne kd ke kf nf kh ki kj ng kl km kn nh kp kq kr ni kt ku kv bi translated">活生生的例子</h1><p id="738d" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">我们现在对回收者的观点有了一个大致的看法。让我们从一个实际的例子开始。现在我正在开发一个应用程序来实践我的知识。它是关于旅行的，你可以得到一些特定地点的一般信息。感谢这个项目，我可以向你展示回收视图和布局管理器(网格，水平)的实现。</p><p id="de53" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">要使回收器视图工作，您需要项目视图、模型、模拟数据或远程服务器连接，将回收器视图放置到活动、适配器和视图容器。</p><p id="eebc" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">首先，您需要将依赖项添加到Gradle，以便使用recycler视图。</p><p id="e52d" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">之后，我们需要一个项目的蓝图来填充它和加载数据。我在这个项目中使用了卡片视图。</p><figure class="mo mp mq mr gt jr gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/9d8c60df14dfce2c3fb36d5cb637a769.png" data-original-src="https://miro.medium.com/v2/resize:fit:652/format:webp/1*CscgVLgE_pQ2206g3pbylw.png"/></div></figure><p id="036b" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">这是代码。</p><p id="bd37" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">很好，我们创建了我们的卡，接下来我们需要向activity_xml添加一个回收器视图。这需要在某个地方展示，对吗？:)</p><p id="f3a7" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">我们已经完成了可视化部分，接下来我们需要创建一个模型来保存数据。</p><p id="27a5" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">现在适配器和取景器。这里重要的是我们需要实现3个方法。它们是不可避免的，IDE会警告您覆盖它们。这些是:</p><ul class=""><li id="4ecf" class="lz ma iq ky b kz lu ld lv lh mb ll mc lp md lt me mf mg mh bi translated">onCreateViewHolder:需要新布局时调用。它基本上连接布局和视图。</li><li id="1ccb" class="lz ma iq ky b kz mi ld mj lh mk ll ml lp mm lt me mf mg mh bi translated">getItemCount:保存数组中的项数。</li><li id="6ddc" class="lz ma iq ky b kz mi ld mj lh mk ll ml lp mm lt me mf mg mh bi translated">onBindViewHolder:您将获得新的未使用的视图持有者，并且您必须用您想要显示的数据填充它们。但是当你向下滚动时，你会开始看到屏幕外的旧视图持有者，你需要用新的数据替换他们的数据。</li></ul><p id="44b3" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">让我们创建模拟数据，并在main中连接我们的回收器视图和适配器。</p><p id="f968" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">我们已经连接了适配器和回收器视图，还创建了模拟数据。我使用了网格布局和水平布局。你可以根据需要使用其中的任何一个。示例中有4个模拟项目。我添加了更多来展示滚动。我们的回收器视图已经可以运行了。</p><figure class="mo mp mq mr gt jr gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/9b87cf44916dfb76a97ae5cc1f9eb149.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*ojUrcZsJBARbh1SBqM7l0w.gif"/></div><figcaption class="ms mt gj gh gi mu mv bd b be z dk translated">带有网格视图的回收器视图</figcaption></figure><figure class="mo mp mq mr gt jr gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/8b5cb7703ae6881d558489f29689b617.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*FonPdT3tcprvwus6pC0twA.gif"/></div><figcaption class="ms mt gj gh gi mu mv bd b be z dk translated">带水平视图的回收器视图</figcaption></figure><p id="3824" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">如果你想在Github上查看我的项目，链接如下:</p><p id="b16a" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated"><a class="ae nl" href="https://github.com/CanerGures/CityCatalog" rel="noopener ugc nofollow" target="_blank">https://github.com/CanerGures/CityCatalog</a></p><p id="75bf" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">最后，是时候为我们心爱的回收者鼓掌了。</p><figure class="mo mp mq mr gt jr"><div class="bz fp l di"><div class="nm nn l"/></div></figure></div></div>    
</body>
</html>