<html>
<head>
<title>Create a custom shape mask with Python &amp; Pillow</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python和Pillow创建自定义形状遮罩</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/create-a-custom-shape-mask-with-python-pillow-9f566dd1e6ae?source=collection_archive---------1-----------------------#2020-12-07">https://levelup.gitconnected.com/create-a-custom-shape-mask-with-python-pillow-9f566dd1e6ae?source=collection_archive---------1-----------------------#2020-12-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/0436d53912cbeb64dc0bc61e07c7b8c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*HdgQoiexa1vpjVFv"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><a class="ae kc" href="https://unsplash.com/photos/SUTfFCAHV_A" rel="noopener ugc nofollow" target="_blank">(来源)</a></figcaption></figure><p id="f3d4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">和许多其他东西一样，Python非常适合编程式的图像编辑。这在很大程度上要感谢<a class="ae kc" href="https://pillow.readthedocs.io/en/stable/" rel="noopener ugc nofollow" target="_blank">枕</a>库。从头开始创建一个图像，在上面粘贴几层，或者应用一些滤镜，只需几行代码就可以轻松完成。</p><p id="a220" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">今天，我将向您展示一个创建自定义形状遮罩的简短脚本。我们将加载一个没有背景的圣诞老人帽子，并在不到20行代码中添加一个和一个阴影！</p><p id="d884" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">圣诞帽原图，请在这里找到<a class="ae kc" href="https://github.com/Ze1598/medium-articles/blob/master/Create%20a%20custom%20shape%20mask%20with%20Python%20%26%C2%A0Pillow/santa_hat.png" rel="noopener ugc nofollow" target="_blank">。</a></p><figure class="lb lc ld le gt jr"><div class="bz fp l di"><div class="lf lg l"/></div></figure><p id="3d6e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果您已经熟悉Pillow，那么这段代码看起来会很简单，即使这是您第一次接触这个库，我认为代码中的注释就足够了。但是，让我强调一下最重要的部分。</p><p id="5b8f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在第8行，创建将成为遮罩黑色矩形非常重要。它必须与原始图像的大小/尺寸相同，并且稍后会被裁剪成所需的形状，所以不要担心它的原始形状。</p><p id="3838" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，第15行和第17行分别添加阴影和圣诞老人帽子，作为用脚本创建的图像的两个新图层。当添加阴影时，<code class="fe lh li lj lk b">mask=santa_hat</code>参数发挥了所有的魔力，因为它将矩形转换成与帽子相同的形状。当然，原图有透明背景是必不可少的，否则什么都不会发生。</p><p id="1d63" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当在第17行粘贴帽子本身时，它也需要<code class="fe lh li lj lk b">mask=santa_hat</code>参数，因此Pillow保持透明背景，即只粘贴帽子而不粘贴帽子<strong class="kf ir">并且</strong>填充帽子的背景…</p><figure class="lb lc ld le gt jr gh gi paragraph-image"><div class="gh gi ll"><img src="../Images/d2961cb85f00696936e4f5be749afbe4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1100/format:webp/1*Yzig9Igufv1oxe_F4fmj7g.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">不要忘记使用掩码参数</figcaption></figure><figure class="lb lc ld le gt jr gh gi paragraph-image"><div class="gh gi ll"><img src="../Images/990f6763fab9914f0e8ef66a45c9f687.png" data-original-src="https://miro.medium.com/v2/resize:fit:1100/format:webp/1*0ZVBRFr8uSil95hkO4mKvA.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">适当的结果</figcaption></figure><p id="75c5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">就是这样！现在你知道如何创建一个自定义形状的面具的基础上，另一个形象。我认为这个阴影例子可能是一个有用的演示，但当然这也可以用于许多其他场景。只要你想要定制的图像和你的面具尺寸相同，你就可以开始了！</p><p id="3b30" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这种技术的未来应用注意:如果你有一个定制形状的图像，而不是一个实心矩形，那么在调用<code class="fe lh li lj lk b">paste</code>之前，调用<code class="fe lh li lj lk b">PIL.mageOps.fit</code>函数将图像调整到蒙版的尺寸。</p></div></div>    
</body>
</html>