<html>
<head>
<title>Load more functionality in ReactJS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在ReactJS中加载更多功能</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/load-more-functionality-in-reactjs-82446862bc06?source=collection_archive---------2-----------------------#2022-05-17">https://levelup.gitconnected.com/load-more-functionality-in-reactjs-82446862bc06?source=collection_archive---------2-----------------------#2022-05-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><blockquote class="jn jo jp"><p id="187d" class="jq jr js jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ij bi translated">如何实现加载更多功能？</p></blockquote><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi kp"><img src="../Images/932e372b5c6a39759cf6cb761b159b64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ObnEDnpPhjAW0Vn6"/></div></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">照片由<a class="ae lf" href="https://unsplash.com/@mike_van_den_bos?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">迈克·范·登博斯</a>在<a class="ae lf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="2dc0" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lg kd ke kf lh kh ki kj li kl km kn ko ij bi translated">在本文中，我们将看到一种分页形式，它涉及到使用一个load more按钮，当点击它时，将加载剩余的数据。<br/>这种方法在很多情况下都很有用，比如社交媒体帖子、图片库、视频帖子等。</p><p id="4ca0" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lg kd ke kf lh kh ki kj li kl km kn ko ij bi translated">那么，我们开始吧。</p><p id="3165" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lg kd ke kf lh kh ki kj li kl km kn ko ij bi translated">我不会向您展示如何建立一个react项目和获取样本数据的初始版本。</p><p id="8673" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lg kd ke kf lh kh ki kj li kl km kn ko ij bi translated">您可以使用<code class="fe lj lk ll lm b">CRA</code>来建立一个初始的基本react模板，然后使用<code class="fe lj lk ll lm b">Fetch</code>或<code class="fe lj lk ll lm b">Axios</code>从API获取数据。</p><p id="7de1" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lg kd ke kf lh kh ki kj li kl km kn ko ij bi translated">向前看，</p><p id="3cd7" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lg kd ke kf lh kh ki kj li kl km kn ko ij bi translated">我们的数据看起来像这样</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi ln"><img src="../Images/83a38e3661f7c8676f490fa805a86271.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x7BmpwznKBXsOXHGCecycA.png"/></div></div></figure><h1 id="3fb4" class="lo lp iq bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">创建一个组件来显示数据</h1><p id="8ba7" class="pw-post-body-paragraph jq jr iq jt b ju mm jw jx jy mn ka kb lg mo ke kf lh mp ki kj li mq km kn ko ij bi translated">我们的React组件如下所示，其中我们将imageGallery数据(包含图像数据的对象数组)作为道具传递给组件。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi mr"><img src="../Images/43f0bb05ea1db25ff8583e58b57af231.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mhgEPgr0Kwhv8IR7XmxwjA.png"/></div></div></figure><p id="85d5" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lg kd ke kf lh kh ki kj li kl km kn ko ij bi translated">当我们运行这个应用程序时，我们的组件呈现如下</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi ms"><img src="../Images/8eb5d1bc1de820d8e98ceb00c704537c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Gua8DsruoDAHaFUuBUjZIg.png"/></div></div></figure><p id="6453" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lg kd ke kf lh kh ki kj li kl km kn ko ij bi translated">现在，我们的数据只有六张图片，你可以在上面看到，但你会明白为什么我们需要加载更多的按钮，如果我们有超过15或20张图片或帖子，那么在一次加载中加载屏幕上的所有图片是不理想的，这是一个糟糕的用户体验。</p></div><div class="ab cl mt mu hu mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="ij ik il im in"><p id="e4d4" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lg kd ke kf lh kh ki kj li kl km kn ko ij bi translated">现在，让我们转向我们的<code class="fe lj lk ll lm b">load more button</code>逻辑:-</p><p id="4fe3" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lg kd ke kf lh kh ki kj li kl km kn ko ij bi translated">在展示代码之前，我将快速浏览一下我们将要做的事情。</p><ul class=""><li id="e991" class="na nb iq jt b ju jv jy jz lg nc lh nd li ne ko nf ng nh ni bi translated">创建一个名为<code class="fe lj lk ll lm b">imagePerRow</code>的变量，它将保存要显示的图像的初始数量，以及用户每次单击<strong class="jt ir"> load more </strong>按钮时要显示的额外图像的数量。</li><li id="ab60" class="na nb iq jt b ju nj jy nk lg nl lh nm li nn ko nf ng nh ni bi translated">创建一个<code class="fe lj lk ll lm b">load more</code>按钮，并给它一个名为<code class="fe lj lk ll lm b">handleMoreImage</code>的<code class="fe lj lk ll lm b">onClick</code>处理程序。</li><li id="acc7" class="na nb iq jt b ju nj jy nk lg nl lh nm li nn ko nf ng nh ni bi translated">创建一个状态，存储要显示的图像的初始数量，并在单击按钮时更新状态。</li><li id="67f8" class="na nb iq jt b ju nj jy nk lg nl lh nm li nn ko nf ng nh ni bi translated">创建每次点击<strong class="jt ir"> load more </strong>按钮时运行的<code class="fe lj lk ll lm b">handleMoreImage</code>函数。</li></ul><p id="953f" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lg kd ke kf lh kh ki kj li kl km kn ko ij bi translated">现在是代码！</p><pre class="kq kr ks kt gt no lm np nq aw nr bi"><span id="3e21" class="ns lp iq lm b gy nt nu l nv nw">const imagePerRow = 4;</span><span id="aabd" class="ns lp iq lm b gy nx nu l nv nw">export const ImageGallery = ({ imageGallery }) =&gt; {<br/>  const [next, setNext] = useState(imagePerRow);</span><span id="4a78" class="ns lp iq lm b gy nx nu l nv nw">const handleMoreImage = () =&gt; {<br/>    setNext(next + imagePerRow);<br/>  };</span><span id="def9" class="ns lp iq lm b gy nx nu l nv nw">return (<br/>    &lt;&gt;<br/>      &lt;div className="gap-y-4 flex flex-wrap justify-center"&gt;<br/>        {imageGallery?.slice(0, next)?.map((image, index) =&gt; {<br/>          return (<br/>            &lt;div<br/>              key={index}<br/>              className="px-2.5 md:px-0"<br/>            &gt;<br/>              &lt;img<br/>                className="cursor-pointer"<br/>                src={image?.url}<br/>              /&gt;<br/>            &lt;/div&gt;<br/>          );<br/>        })}</span><span id="5770" class="ns lp iq lm b gy nx nu l nv nw">       {next &lt; imageGallery?.length &amp;&amp; (<br/>          &lt;Button<br/>            className="mt-4"<br/>            onClick={handleMoreImage}<br/>          &gt;<br/>            Load more<br/>          &lt;/Button&gt;<br/>        )}<br/>      &lt;/div&gt;<br/>    &lt;/&gt;<br/>  );<br/>};</span></pre><p id="7803" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lg kd ke kf lh kh ki kj li kl km kn ko ij bi translated">让我解释一下上面的代码，</p><ul class=""><li id="e062" class="na nb iq jt b ju jv jy jz lg nc lh nd li ne ko nf ng nh ni bi translated">最初，当这个应用程序运行时，我们显示四个图像，因为我们将<code class="fe lj lk ll lm b">imagePerRow</code>设置为四个。</li><li id="f92d" class="na nb iq jt b ju nj jy nk lg nl lh nm li nn ko nf ng nh ni bi translated">只有当imageGallery数组长度大于我们想要显示的图像时，我们的<code class="fe lj lk ll lm b">load more button </code>才会可见。如果我们显示所有的图像，没有必要显示按钮。</li><li id="65c6" class="na nb iq jt b ju nj jy nk lg nl lh nm li nn ko nf ng nh ni bi translated">我们附加了一个<code class="fe lj lk ll lm b">onClick</code>事件句柄，当我们点击按钮时，<code class="fe lj lk ll lm b">handleMoreImage</code>函数将被执行。</li><li id="ba32" class="na nb iq jt b ju nj jy nk lg nl lh nm li nn ko nf ng nh ni bi translated">这个函数将我们的状态设置为接下来的四个图像，这意味着最初当我们显示四个图像时，当用户现在点击按钮时，它将是4+4，即8个图像，等等。</li></ul><p id="97c1" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lg kd ke kf lh kh ki kj li kl km kn ko ij bi translated">这是我们的应用程序在初始渲染时的样子</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi ny"><img src="../Images/3a3dc418c3312b0ebf5db1dc43cf10fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T2DTq85_gRkNjU8ojpJv7Q.png"/></div></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">带有“加载更多”按钮的初始渲染</figcaption></figure><p id="1bea" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lg kd ke kf lh kh ki kj li kl km kn ko ij bi translated">在用户点击按钮后，它会将我们的状态设置为4 + 4更多的图像，因为我们在imageGallery数组中只有6张图像。它将显示总共6个图像，现在加载更多的按钮将消失。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi ms"><img src="../Images/8eb5d1bc1de820d8e98ceb00c704537c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Gua8DsruoDAHaFUuBUjZIg.png"/></div></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">点击加载更多按钮后</figcaption></figure><h2 id="3e22" class="ns lp iq bd lq nz oa dn lu ob oc dp ly lg od oe mc lh of og mg li oh oi mk oj bi translated">好了</h2><p id="8ed2" class="pw-post-body-paragraph jq jr iq jt b ju mm jw jx jy mn ka kb lg mo ke kf lh mp ki kj li mq km kn ko ij bi translated">只使用一个状态和一个根据用户点击更新状态的函数，很容易构建<code class="fe lj lk ll lm b">load more functionality in react</code>。</p><p id="7ce7" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lg kd ke kf lh kh ki kj li kl km kn ko ij bi translated">没有必要为这种类型的东西下载一个npm包，因为它会增加你的构建的大小。我们需要在react中构建自定义逻辑来处理这类事情。</p><p id="4247" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lg kd ke kf lh kh ki kj li kl km kn ko ij bi translated">是的，现在就这些了…</p><p id="9e84" class="pw-post-body-paragraph jq jr iq jt b ju jv jw jx jy jz ka kb lg kd ke kf lh kh ki kj li kl km kn ko ij bi translated">请查看我之前的文章<a class="ae lf" href="https://blog.bitsrc.io/how-to-view-localhost-web-apps-on-mobile-browsers-2b7433df4abd?source=friends_link&amp;sk=f09858ee0e1556fe9d1addafce884bdf" rel="noopener ugc nofollow" target="_blank"> <strong class="jt ir">如何在移动浏览器上查看本地主机web应用。</strong> </a></p><blockquote class="jn jo jp"><p id="c4c9" class="jq jr js jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ij bi translated">请在评论区分享你的观点，欢迎反馈。<br/>希望你会喜欢并分享这篇文章，以便更好地阅读。<br/>查看我的其他文章:<a class="ae lf" href="https://medium.com/@aayushtibra1997" rel="noopener"><strong class="jt ir"><em class="iq">https://medium.com/@aayushtibra1997</em></strong></a><strong class="jt ir"><em class="iq"><br/>感谢阅读:</em> </strong></p></blockquote></div></div>    
</body>
</html>