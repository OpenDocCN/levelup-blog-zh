<html>
<head>
<title>What’s So Special About Elasticsearch</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Elasticsearch有什么特别之处</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/whats-so-special-about-elasticsearch-d97f652fcedc?source=collection_archive---------13-----------------------#2021-02-28">https://levelup.gitconnected.com/whats-so-special-about-elasticsearch-d97f652fcedc?source=collection_archive---------13-----------------------#2021-02-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="d1a7" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">学习软件开发</h2><div class=""/><div class=""><h2 id="671f" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">非关系数据库和灵活搜索的结合</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/7dcb2430b4819134defea0943eef6611.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*vX3I9VXxjfdINzF-"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated"><a class="ae lh" href="https://unsplash.com/@rishikeshyogpeeth?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> rishikesh yogpeeth </a>在<a class="ae lh" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="605a" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi me translated">如果你听说过Elasticsearch，但不知道它有什么特别之处，这是给你的。下面提供了Elasticsearch可以做什么的例子和一个实际的代码显示它是如何做的。</p><p id="3888" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">要设置和学习基本的弹性搜索，你可以参考下面的博客。</p><div class="mn mo gp gr mp mq"><a rel="noopener  ugc nofollow" target="_blank" href="/learning-elasticsearch-basic-easily-441f37b8bd8d"><div class="mr ab fo"><div class="ms ab mt cl cj mu"><h2 class="bd jd gy z fp mv fr fs mw fu fw jc bi translated">轻松学习弹性搜索基础</h2><div class="mx l"><h3 class="bd b gy z fp mv fr fs mw fu fw dk translated">轻松快速体验Elasticsearch</h3></div><div class="my l"><p class="bd b dl z fp mv fr fs mw fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="mz l"><div class="na l nb nc nd mz ne lb mq"/></div></div></a></div><p id="54f4" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">让我们开始吧…</p><h1 id="a720" class="nf ng it bd nh ni nj nk nl nm nn no np ki nq kj nr kl ns km nt ko nu kp nv nw bi translated">模糊搜索</h1><p id="3c47" class="pw-post-body-paragraph li lj it lk b ll nx kd ln lo ny kg lq lr nz lt lu lv oa lx ly lz ob mb mc md im bi translated">当我们搜索数据库时，我们使用通配符搜索整个单词或单词的一部分。但是错别字呢？</p><p id="947c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这就是弹性搜索的模糊性可以发挥作用的地方。</p><p id="4d88" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们有一份数据清单如下</p><pre class="ks kt ku kv gt oc od oe of aw og bi"><span id="6c6b" class="oh ng it od b gy oi oj l ok ol">POST books/_bulk<br/>{"index":{}}<br/>{ "title": "Kotlin", "description": "Kotlin came from Java" }<br/>{"index":{}}<br/>{ "title": "JVM", "description": "Java, Kotlin and Scale" }<br/>{"index":{}}<br/>{ "title": "Web", "description": "JavaScript, Python, PHP, HTML" }</span></pre><p id="7780" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们搜索<code class="fe om on oo od b">Java</code>的时候，不小心打了<code class="fe om on oo od b">Jawa</code>。</p><p id="f733" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">模糊度设置为1，如下所示</p><pre class="ks kt ku kv gt oc od oe of aw og bi"><span id="4342" class="oh ng it od b gy oi oj l ok ol">GET books/_search<br/>{<br/>  "query": {<br/>    "match": {<br/>      "description": {<br/>        "query": "Jawa",<br/>        "fuzziness": 1<br/>      }<br/>    }<br/>  }<br/>}</span></pre><p id="132d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们仍然得到如下结果</p><pre class="ks kt ku kv gt oc od oe of aw og bi"><span id="7028" class="oh ng it od b gy oi oj l ok ol">"Kotlin came from Java"<br/>"Java, Kotlin and Scale"</span></pre><h1 id="d886" class="nf ng it bd nh ni nj nk nl nm nn no np ki nq kj nr kl ns km nt ko nu kp nv nw bi translated">搜索并排列结果的顺序</h1><p id="6dd5" class="pw-post-body-paragraph li lj it lk b ll nx kd ln lo ny kg lq lr nz lt lu lv oa lx ly lz ob mb mc md im bi translated">在一个典型的数据库中，我们可以搜索，但无法控制搜索结果的排名(不排序)。</p><p id="7344" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在Elasticsearch中，我们可以对结果进行过滤和排序。</p><p id="92db" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们有下面的数据清单。</p><pre class="ks kt ku kv gt oc od oe of aw og bi"><span id="33a3" class="oh ng it od b gy oi oj l ok ol">POST books/_bulk<br/>{"index":{}}<br/>{ "title": "Kotlin", "description": "Kotlin came from Java" }<br/>{"index":{}}<br/>{ "title": "JVM", "description": "Java, Kotlin and Scale" }<br/>{"index":{}}<br/>{ "title": "Web", "description": "JavaScript, Python, PHP, HTML" }<br/>{"index":{}}<br/>{ "title": "C++", "description": "C++ is better than Java" }<br/>{"index":{}}<br/>{ "title": "Java", "description": "Java is easier than C++" }<br/>{"index":{}}<br/>{ "title": "OOP", "description": "C++ is object oriented" }</span></pre><p id="cd6c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">当我们想要查找所有带有<code class="fe om on oo od b">Java</code>的内容时，优先显示带有<code class="fe om on oo od b">C++</code>的内容。查询如下所示。</p><pre class="ks kt ku kv gt oc od oe of aw og bi"><span id="e38d" class="oh ng it od b gy oi oj l ok ol">GET books/_search<br/>{<br/>  "query": {<br/>    "bool": {<br/>      "filter": {<br/>        "match": {<br/>          "description": "Java"<br/>        }<br/>      },<br/>      "should": {<br/>        "match": {<br/>          "description": "C++"<br/>        }<br/>      }<br/>    }<br/>  }<br/>}</span></pre><p id="0e34" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">结果将会显示</p><pre class="ks kt ku kv gt oc od oe of aw og bi"><span id="351a" class="oh ng it od b gy oi oj l ok ol">"C++ is better than Java"<br/>"Java is easier than C++"<br/>"Kotlin came from Java"<br/>"Java, Kotlin and Scale"</span></pre><p id="eea3" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">人们可以使用<code class="fe om on oo od b">weight</code>和<code class="fe om on oo od b">boost</code>来进一步提高搜索排名</p><div class="mn mo gp gr mp mq"><a href="https://www.elastic.co/guide/en/app-search/current/relevance-tuning-guide.html" rel="noopener  ugc nofollow" target="_blank"><div class="mr ab fo"><div class="ms ab mt cl cj mu"><h2 class="bd jd gy z fp mv fr fs mw fu fw jc bi translated">相关性调整指南、权重和提升|弹性应用搜索文档[7.11] |弹性</h2><div class="mx l"><h3 class="bd b gy z fp mv fr fs mw fu fw dk translated">开箱即用，应用搜索提供高质量的搜索相关性。建立在Elasticsearch之上的应用程序搜索是一个受管理的…</h3></div><div class="my l"><p class="bd b dl z fp mv fr fs mw fu fw dk translated">www.elastic.co</p></div></div><div class="mz l"><div class="op l nb nc nd mz ne lb mq"/></div></div></a></div><h1 id="1fa8" class="nf ng it bd nh ni nj nk nl nm nn no np ki nq kj nr kl ns km nt ko nu kp nv nw bi translated">英语分析器搜索</h1><p id="a1ed" class="pw-post-body-paragraph li lj it lk b ll nx kd ln lo ny kg lq lr nz lt lu lv oa lx ly lz ob mb mc md im bi translated">有时我们有基于英语单词的课文。我们希望从<code class="fe om on oo od b">housing</code>中识别相关的单词，例如<code class="fe om on oo od b">house</code>，并且我们希望省略简单的连接单词，例如<code class="fe om on oo od b">is</code>。</p><p id="d6cf" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在Elasticsearch中，我们首先需要定义要进行英语分析的字段，如下所示</p><pre class="ks kt ku kv gt oc od oe of aw og bi"><span id="b7cb" class="oh ng it od b gy oi oj l ok ol">PUT books<br/>{<br/>  "mappings": {<br/>    "properties": {<br/>      "description": {<br/>        "type": "text",<br/>        "analyzer": "english"<br/>      }<br/>    }<br/>  }<br/>}</span></pre><p id="40bb" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">然后我们就有了数据。</p><pre class="ks kt ku kv gt oc od oe of aw og bi"><span id="6769" class="oh ng it od b gy oi oj l ok ol">POST books/_bulk<br/>{"index":{}}<br/>{ "title": "Sell", "description": "Housing price estimation" }<br/>{"index":{}}<br/>{ "title": "Develop", "description": "How to build houses" }<br/>{"index":{}}<br/>{ "title": "Climax", "description": "Horse is better than car" }</span></pre><p id="5ca9" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">当我们搜索像<code class="fe om on oo od b">is</code>、<code class="fe om on oo od b">to</code>等基本连接词时，什么都不会出来。但是，如果我们搜索<code class="fe om on oo od b">house</code>，它会识别<code class="fe om on oo od b">houses</code>和<code class="fe om on oo od b">housing</code>，但会忽略<code class="fe om on oo od b">horse</code></p><pre class="ks kt ku kv gt oc od oe of aw og bi"><span id="61b8" class="oh ng it od b gy oi oj l ok ol">GET books/_search<br/>{<br/>  "query": {<br/>    "match": {<br/>      "description": {<br/>        "query": "house"<br/>      }<br/>    }<br/>  }<br/>}</span></pre><p id="2742" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">结果如下</p><pre class="ks kt ku kv gt oc od oe of aw og bi"><span id="d7d0" class="oh ng it od b gy oi oj l ok ol">"Housing price estimation"<br/>"How to build houses"</span></pre><h1 id="d57a" class="nf ng it bd nh ni nj nk nl nm nn no np ki nq kj nr kl ns km nt ko nu kp nv nw bi translated">邻近排序搜索</h1><p id="6ba7" class="pw-post-body-paragraph li lj it lk b ll nx kd ln lo ny kg lq lr nz lt lu lv oa lx ly lz ob mb mc md im bi translated">想象一下，如果你只想找到大约200页长的书。那些最接近200页的将是首选，不管他们是多还是少。</p><p id="0960" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">你可以在Elasticsearch中使用函数score，而不是制作复杂的绝对不同的数学函数</p><p id="be42" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">想象一下，如果我们有3本书</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi oq"><img src="../Images/742a9adc9880de29af6377a2e839a185.png" data-original-src="https://miro.medium.com/v2/resize:fit:634/format:webp/1*WbLENDmeeC2f2fhO5ehCJw.png"/></div></figure><pre class="ks kt ku kv gt oc od oe of aw og bi"><span id="b558" class="oh ng it od b gy oi oj l ok ol">POST books/_bulk<br/>{"index":{}}<br/>{ "title": "Sell", "pages": 140 }<br/>{"index":{}}<br/>{ "title": "Develop", "pages": 200 }<br/>{"index":{}}<br/>{ "title": "Climax", "pages": 250 }</span></pre><p id="4496" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">当执行搜索时，对接近200页的页面进行高斯计算</p><pre class="ks kt ku kv gt oc od oe of aw og bi"><span id="f2b7" class="oh ng it od b gy oi oj l ok ol">GET books/_search<br/>{<br/>  "query": {<br/>    "function_score": {<br/>      "query": {<br/>        "match_all": {}<br/>      },<br/>      "functions": [<br/>        {<br/>         <strong class="od jd"> "gauss": {<br/>            "pages": {<br/>              "origin": 200,<br/>              "scale": 50,<br/>              "decay": 0.5<br/>            }<br/>          }</strong><br/>        }<br/>      ]<br/>    }<br/>  }<br/>}</span></pre><p id="6789" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">结果如下</p><pre class="ks kt ku kv gt oc od oe of aw og bi"><span id="e4f5" class="oh ng it od b gy oi oj l ok ol">"Develop", "pages": 200<br/>"Climax", "pages": 250<br/>"Sell", "pages": 140</span></pre><h1 id="7c64" class="nf ng it bd nh ni nj nk nl nm nn no np ki nq kj nr kl ns km nt ko nu kp nv nw bi translated">位置边界搜索</h1><p id="5a37" class="pw-post-body-paragraph li lj it lk b ll nx kd ln lo ny kg lq lr nz lt lu lv oa lx ly lz ob mb mc md im bi translated">如果您有位置数据，并且您喜欢搜索所有数据</p><ul class=""><li id="a0f1" class="or os it lk b ll lm lo lp lr ot lv ou lz ov md ow ox oy oz bi translated">在某个地点的半径范围内</li><li id="2a50" class="or os it lk b ll pa lo pb lr pc lv pd lz pe md ow ox oy oz bi translated">在矩形边界框内</li><li id="1290" class="or os it lk b ll pa lo pb lr pc lv pd lz pe md ow ox oy oz bi translated">在多边形边界框内</li></ul><p id="5c42" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">使用Elasticsearch可以轻松实现这些目标</p><p id="9805" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">需要将数据设置为<code class="fe om on oo od b">geo_point</code></p><pre class="ks kt ku kv gt oc od oe of aw og bi"><span id="22b7" class="oh ng it od b gy oi oj l ok ol">PUT cities<br/>{<br/>  "mappings": {<br/>    "properties": {<br/>      "geocode": {<br/>        "type": "geo_point"<br/>      }<br/>    }<br/>  }<br/>}</span></pre><p id="619e" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我有如下几个城市的数据</p><pre class="ks kt ku kv gt oc od oe of aw og bi"><span id="9aa3" class="oh ng it od b gy oi oj l ok ol">POST cities/_bulk<br/>{"index":{}}<br/>{ "city": "San Francisco", "geocode": {"lat": 37.773972, "lon": -122.431297 } }<br/>{"index":{}}<br/>{ "city": "Melbourne", "geocode": {"lat": -37.840935, "lon": 144.946457 } }<br/>{"index":{}}<br/>{ "city": "Kuala Lumpur", "geocode": {"lat": 3.140853, "lon": 101.693207 } }<br/>{"index":{}}<br/>{ "city": "Shanghai", "geocode": {"lat": 31.224361, "lon": 121.469170 } }<br/>{"index":{}}<br/>{ "city": "London", "geocode": {"lat": 51.509865, "lon": -0.118092 } }</span></pre><p id="2f05" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">然后我喜欢在下图所示的三角形内搜索</p><pre class="ks kt ku kv gt oc od oe of aw og bi"><span id="8bff" class="oh ng it od b gy oi oj l ok ol">GET cities/_search<br/>{<br/>  "query": {<br/>    "geo_polygon": {<br/>      "geocode": {<br/>        "points": [<br/>          {<br/>            "lat": 75,<br/>            "lon": -5<br/>          },<br/>          {<br/>            "lat": -40,<br/>            "lon": -5<br/>          },<br/>          {<br/>            "lat": -40,<br/>            "lon": 170<br/>          }<br/>        ]<br/>      }<br/>    }<br/>  }<br/>}</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi pf"><img src="../Images/28311eb76708fc2f7faf4dba6808891a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6Kro60-rgEAmfap2v7OadQ.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">这个地图是使用Kibana生成的。关于如何让你的数据显示在地图上的信息，你可以看看这个视频<a class="ae lh" href="https://www.youtube.com/watch?v=1arB6i61qWs" rel="noopener ugc nofollow" target="_blank">https://www.youtube.com/watch?v=1arB6i61qWs</a></figcaption></figure><p id="83d7" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">从图中，从弹性搜索，你会得到3个城市，即墨尔本，吉隆坡和伦敦。</p><blockquote class="pg ph pi"><p id="c4cc" class="li lj pj lk b ll lm kd ln lo lp kg lq pk ls lt lu pl lw lx ly pm ma mb mc md im bi translated">如果你喜欢多多边形搜索，你可以使用<code class="fe om on oo od b"><a class="ae lh" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-geo-shape-query.html" rel="noopener ugc nofollow" target="_blank">geo_shape</a></code>。</p></blockquote><h1 id="09bd" class="nf ng it bd nh ni nj nk nl nm nn no np ki nq kj nr kl ns km nt ko nu kp nv nw bi translated">查询数据库</h1><p id="2b16" class="pw-post-body-paragraph li lj it lk b ll nx kd ln lo ny kg lq lr nz lt lu lv oa lx ly lz ob mb mc md im bi translated">想象一下，如果我们想根据自上次查询以来的查询集提取所有最新的数据。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi pn"><img src="../Images/76fd1123d959855716f7c792ffaa05a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1094/format:webp/1*hHhDfytjcoGgoD8lsYiCnw.png"/></div></figure><p id="3b25" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这种查询不会随着时间的推移而扩展。随着数据总量的增长，速度会越来越慢。</p><p id="307e" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在Elasticsearch中，我们有不同的处理方式。我们也可以将我们的查询存储为文档(数据)。我们可以通过将字段定义为<code class="fe om on oo od b">percolator</code>来做到这一点。对于要存储的查询，我们需要确保要使用的字段也被定义，在我们下面的例子中，这将是<code class="fe om on oo od b">definition</code></p><pre class="ks kt ku kv gt oc od oe of aw og bi"><span id="ddaf" class="oh ng it od b gy oi oj l ok ol">PUT interested-book-queries<br/>{<br/>  "mappings": {<br/>    "properties": {<br/>      "query-name": {"type": "keyword"},<br/>      "query-field": {"type": "percolator"},</span><span id="e87d" class="oh ng it od b gy po oj l ok ol">      "description": {"type": "text", "analyzer": "english"}<br/>    }<br/>  }<br/>}</span></pre><p id="7d9e" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这样，我们就可以存储我们的查询。在我们的例子中，我们存储一个搜索描述为<code class="fe om on oo od b">Java</code>的书籍的数据库，另一个搜索描述为<code class="fe om on oo od b">C++</code>的书籍的数据库</p><pre class="ks kt ku kv gt oc od oe of aw og bi"><span id="845e" class="oh ng it od b gy oi oj l ok ol">PUT interested-book-queries/_doc/1<br/>{<br/>  "query-name": "Java",<br/>  "query-field": {<br/>    "match": {<br/>      "description": "Java"<br/>    }<br/>  }<br/>}</span><span id="58d0" class="oh ng it od b gy po oj l ok ol">PUT interested-book-queries/_doc/2<br/>{<br/>  "query-name": "C++",<br/>  "query-field": {<br/>    "match": {<br/>      "description": "C++"<br/>    }<br/>  }<br/>}</span></pre><p id="21e8" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">当新书数据可用时，在插入数据时，可以在查询文档中运行它，并生成结果。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi pn"><img src="../Images/33495c740a5407d4cb9fc529ed25c5dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1094/format:webp/1*M0R9Ot04kmc07rHeTowYEQ.png"/></div></figure><p id="f774" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">查询显示如下</p><pre class="ks kt ku kv gt oc od oe of aw og bi"><span id="57b1" class="oh ng it od b gy oi oj l ok ol">GET interested-book-queries/_search<br/>{<br/>  "query": {<br/>    "percolate": {<br/>      "field": "query-field",<br/>      "document": {<br/>        "title": "Programming",<br/>        "description": "C++ is Object Oriented"<br/>      }<br/>    }<br/>  }<br/>}</span></pre><p id="d03b" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">上述内容与C++ book查询相匹配，因此可以存储在最新的C++ Book数据库中</p><pre class="ks kt ku kv gt oc od oe of aw og bi"><span id="6f41" class="oh ng it od b gy oi oj l ok ol">GET interested-book-queries/_search<br/>{<br/>  "query": {<br/>    "percolate": {<br/>      "field": "query-field",<br/>      "document": {<br/>        "title": "Android",<br/>        "description": "Android with Java language"<br/>      }<br/>    }<br/>  }<br/>}</span></pre><p id="b2c9" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">上述内容与Java book查询相匹配，因此可以存储在最新的Java Book数据库中</p><pre class="ks kt ku kv gt oc od oe of aw og bi"><span id="72b2" class="oh ng it od b gy oi oj l ok ol">GET interested-book-queries/_search<br/>{<br/>  "query": {<br/>    "percolate": {<br/>      "field": "query-field",<br/>      "document": {<br/>        "title": "Compare",<br/>        "description": "C++ and Java comparison"<br/>      }<br/>    }<br/>  }<br/>}</span></pre><p id="2e27" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">以上匹配C++和Java book查询，因此可以存储在最新的C++和Java Book数据库中。</p><p id="ca59" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这样的处理更具可扩展性，而不用担心旧的完整的图书数据不断增长。</p></div><div class="ab cl pp pq hx pr" role="separator"><span class="ps bw bk pt pu pv"/><span class="ps bw bk pt pu pv"/><span class="ps bw bk pt pu"/></div><div class="im in io ip iq"><p id="acd9" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这些是一些有趣的高级弹性搜索功能。要了解更多细节，请浏览Elasticsearch官方文档。</p><div class="mn mo gp gr mp mq"><a href="https://www.elastic.co/guide/index.html" rel="noopener  ugc nofollow" target="_blank"><div class="mr ab fo"><div class="ms ab mt cl cj mu"><h2 class="bd jd gy z fp mv fr fs mw fu fw jc bi translated">弹性堆栈和产品文档</h2><div class="mx l"><h3 class="bd b gy z fp mv fr fs mw fu fw dk translated">弹性公共模式(ECS)参考[1.8] -其他版本</h3></div><div class="my l"><p class="bd b dl z fp mv fr fs mw fu fw dk translated">www.elastic.co</p></div></div><div class="mz l"><div class="pw l nb nc nd mz ne lb mq"/></div></div></a></div></div></div>    
</body>
</html>