<html>
<head>
<title>The Awesome New 1Password Feature for Developers to Secure and Manage Your Secrets</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">令人惊叹的新1密码功能，可帮助开发人员保护和管理您的秘密</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/the-awesome-new-1password-feature-for-developers-to-secure-and-manage-your-secrets-b583e47e8693?source=collection_archive---------8-----------------------#2022-07-13">https://levelup.gitconnected.com/the-awesome-new-1password-feature-for-developers-to-secure-and-manage-your-secrets-b583e47e8693?source=collection_archive---------8-----------------------#2022-07-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="b985" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">1密码保密自动化如何帮助保护、更新和同步您的开发人员密码</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/88de3de46c69439c0799645e41221d7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CaixaXvRPhGJaxKJ4n0Irw.png"/></div></div></figure><h2 id="2f6a" class="kr ks iq bd kt ku kv dn kw kx ky dp kz la lb lc ld le lf lg lh li lj lk ll lm bi translated"><strong class="ak">秘密的问题</strong></h2><p id="bf1c" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv la lw lx ly le lz ma mb li mc md me mf ij bi translated">作为一名开发人员，您不可避免地会接触到秘密。敏感信息，例如API密钥、用户凭证和数据库URL等等。但是如何最好地保护它们呢？</p><p id="26b1" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated">毕竟，<code class="fe ml mm mn mo b">.env</code>文件只是一个隐藏的文本文件。能够访问服务器或开发文件系统的黑客将能够读取这些信息，并且通常在记录时会泄露环境变量。</p><p id="5684" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated">Docker secrets等替代软件的问题在于，它们依赖于你在所有项目中使用特定的工具或软件。它不是跨平台的。</p><p id="d35c" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated">保持更新也是一个挑战。如果您在开发机器或服务器上修改了您的秘密，那么您也需要在生产中改变它。这在团队工作中尤为普遍。如果您可以在开发和生产中轻松地保护您的秘密，并在团队中共享它们，会怎么样？</p><p id="8354" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated">密码管理器<a class="ae mp" href="http://1password.com" rel="noopener ugc nofollow" target="_blank"> 1Password </a>最近发布了一个很棒的新功能来解决这个问题:<a class="ae mp" href="https://1password.com/products/secrets" rel="noopener ugc nofollow" target="_blank">1 password Secrets Automation</a>。</p><h2 id="014d" class="kr ks iq bd kt ku kv dn kw kx ky dp kz la lb lc ld le lf lg lh li lj lk ll lm bi translated"><strong class="ak">什么是1密码保密自动化？</strong></h2><p id="0ce7" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv la lw lx ly le lz ma mb li mc md me mf ij bi translated">1密码保密自动化是指1密码能够安全地存储、同步和检索密码的方法。它背后有一系列不同的工具、扩展和插件，允许你在任何需要的地方使用秘密，比如代码编辑器和云服务器等。</p><p id="a19a" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated">其核心是秘密引用。机密引用是1Password存储机密的数据形式。它们由三部分组成:保管库、项目和字段。保管库指的是1您存储密码的保管库，项1密码条目和字段的名称，存储密码的字段的名称。</p><p id="6b11" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated">一个秘密参考大概是这样的:<code class="fe ml mm mn mo b">op://Vault1/Sample API Key/api_key</code>。机密引用是您代码中的内容，1Password会将其转化为您的真实机密。</p><h2 id="c781" class="kr ks iq bd kt ku kv dn kw kx ky dp kz la lb lc ld le lf lg lh li lj lk ll lm bi translated"><strong class="ak">我们如何将1密码集成到我们的代码编辑器中？</strong></h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/b8305d25f9f20635ce4c7341e21550dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:598/format:webp/1*1ls3QII5Y6c-UKIoC3CSvA.png"/></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk translated">1密码与代码扩展</figcaption></figure><p id="7199" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated">第一个问题是，我们如何开始1密码保密自动化？我们通常通过代码编辑器在本地或远程开始开发。Visual Studio Code (VS Code)是最受欢迎的代码之一，有一个扩展允许我们使用1Password来存储我们的秘密。</p><p id="d20c" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated">首先，我们需要通过VS代码扩展市场安装1Password扩展。打开VS Code并转到Extensions选项卡。在搜索中键入1密码并安装扩展。</p><h2 id="c49f" class="kr ks iq bd kt ku kv dn kw kx ky dp kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">安装1密码CLI</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mv"><img src="../Images/34254fa5008460c8f180264ead0fc159.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*W5Rv2raEac1mydpFjVW81g.png"/></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk translated">1密码CLI介绍文本</figcaption></figure><p id="b9fa" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated">如果您之前没有使用过1Password的开发人员端，则会在右下角出现一个弹出窗口，通知您未安装CLI。</p><p id="aa95" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated">1Password CLI是1Password的命令行界面，是包括1Password Secrets Automation在内的大多数开发人员集成所必需的。点击按钮:<a class="ae mp" href="https://developer.1password.com/docs/cli/get-started/#install" rel="noopener ugc nofollow" target="_blank">打开安装文档</a>，按照OS(操作系统)的说明进行操作。</p><p id="4264" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated">安装1密码CLI后，VS代码上将出现另一个弹出窗口，提示您选择帐户。点按您想要使用的帐户并验证您自己。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/f07c1f5acf6e181519236a53aef073bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:872/format:webp/1*3nBMv3d-z_NTYhDs0MgNwA.png"/></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk translated">1密码CLI的生物识别解锁选项</figcaption></figure><p id="dcc8" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated">您不仅仅需要使用您的密码来验证VS代码扩展。您还可以在1密码&gt;设置&gt;开发者中为1密码CLI启用生物识别解锁，以使用您已经在1密码桌面应用程序中使用的任何生物识别身份验证方法，如指纹(触控ID和Windows Hello)、PIN、面部识别(Face ID和Windows Hello)或Apple Watch。</p><p id="93d9" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated">最后，选择您希望使用的1密码存储库。如果你与一个团队合作，那么选择一个共享库，这样你的秘密就可以在你的团队成员之间共享。这就是1密码扩展的全部设置。</p><h2 id="1bf1" class="kr ks iq bd kt ku kv dn kw kx ky dp kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">创建新的秘密引用</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/80d1d4df51b48f9ca62c045e5e30297c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1212/format:webp/1*IRV2ddz28y8Ykv9uYBwYVw.png"/></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk translated">1密码与代码扩展命令</figcaption></figure><p id="34b4" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated">我们可以创建一个新的密码参考，使用1Password为我们生成安全密码(这对于为API密钥或其他开发人员软件等服务创建用户凭据非常有用),或者在1Password中保存现有密码，并用密码参考替换现有密码。</p><p id="c050" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated">要创建新的安全密码并将其保存为秘密参考，请打开命令调板并访问1Password: Generate Password。输入参赛作品的标题后，1Password将生成一个安全密码，将其存储在您的保管库中，并将秘密参考添加到您的代码中。</p><h2 id="9c45" class="kr ks iq bd kt ku kv dn kw kx ky dp kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">将现有机密转换为机密引用</h2><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="my mz l"/></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk translated">API密钥秘密参考示例</figcaption></figure><p id="2b15" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated">要在1密码中保存现有密码，请突出显示您希望添加的密码。如果您希望将多个秘密添加到同一个条目中，因为它们是相关的(例如，使用需要URL、电子邮件和API密钥的API，然后使用多个光标突出显示它们)。</p><p id="138a" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated">接下来，打开命令调板，转到1密码:保存在1密码中。对话框将要求您输入条目的名称和字段的标题。一旦完成，你的秘密将被替换为秘密参考。</p><p id="5415" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated">点击参考，显示1密码项目名称、创建日期、上次更新时间和密码内容。</p><p id="5f66" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated">该扩展的一个很大的优点是，如果我们已经在代码中添加了秘密，该扩展将检测到它们，并建议我们应该将它们转换为秘密引用。点击1密码中的保存以启动该流程。</p><h2 id="e5f1" class="kr ks iq bd kt ku kv dn kw kx ky dp kz la lb lc ld le lf lg lh li lj lk ll lm bi translated"><strong class="ak">但是我们的远程服务器呢？</strong></h2><p id="9f07" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv la lw lx ly le lz ma mb li mc md me mf ij bi translated">1Password Secrets Automation如何在远程无头服务器上工作？当我们将代码部署到生产环境中时，通常是在云中的远程无头服务器上。</p><p id="565c" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated">由于它们是无头的并且没有GUI(图形用户界面)，我们无法在它们上安装1Password Desktop来验证我们自己，因此我们无法检索我们的秘密参考的正确值，是吗？</p><p id="b56c" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated">1密码CLI有解决方案。</p><h2 id="b3ef" class="kr ks iq bd kt ku kv dn kw kx ky dp kz la lb lc ld le lf lg lh li lj lk ll lm bi translated"><strong class="ak">在远程服务器上设置1个密码CLI</strong></h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi na"><img src="../Images/eace6068fce10fdf369f3b1510fe2bd3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1036/format:webp/1*5C7fIkZU2fbGiR2XTwL-Vw.png"/></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk translated">1密码客户端无账户提示</figcaption></figure><p id="5c19" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated">首先，在您的远程服务器上安装1Password CLI，就像我们在您的主机操作系统上安装VS代码一样。然后运行<code class="fe ml mm mn mo b">op vault ls</code>。这将提示您添加1密码帐户。我们无法进行生物识别认证，因为我们使用的是远程服务器，但我们可以手动添加我们的帐户。</p><p id="eb41" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated">接下来，添加您的1密码帐户的登录地址。如果您在默认地区使用个人或家庭账户，这将是<a class="ae mp" href="https://my.1password.com/" rel="noopener ugc nofollow" target="_blank">https://my.1password.com</a>。您可以检查您的登录地址，方法是打开1Password桌面应用程序，单击左上角的用户名&gt;设置另一台设备，并记下您的登录地址。</p><p id="9ff0" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated">您还需要您的电子邮件地址、密钥和主密码。这些都可以在您的1密码帐户条目中找到。如果您已经为您的帐户激活了2FA(双因素身份验证),还可能会要求您输入六位数字的身份验证代码。</p><p id="4ff5" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated">一旦您添加了您的帐户详情，请按要求运行<code class="fe ml mm mn mo b">eval$(op signin)</code>。最后，您需要再次输入密码，然后登录到您的1密码帐户。运行<code class="fe ml mm mn mo b">op vault ls</code>进行确认。您现在应该会看到您的1密码保管库列表。</p><h2 id="2939" class="kr ks iq bd kt ku kv dn kw kx ky dp kz la lb lc ld le lf lg lh li lj lk ll lm bi translated"><strong class="ak">在远程服务器中集成1密码</strong></h2><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="my mz l"/></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk translated">带有秘密引用的Env配置文件示例</figcaption></figure><p id="9924" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated">在生产环境中，通常所有的秘密都位于一个env文件中。在这种情况下，我们可以使用1密码机密引用将该文件安全地提交到源代码管理，这样每个人都可以访问最新版本(否则团队成员将会遇到运行最新代码而没有更新机密的问题)，而不会暴露他们的真实值。</p><p id="2ade" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated">通过VS代码创建一个新的env文件并创建相关的秘密引用，或者您可以通过远程服务器中的1密码CLI来完成此操作。如果您想使用CLI方法，请访问<a class="ae mp" href="https://developer.1password.com/docs/cli/create-item" rel="noopener ugc nofollow" target="_blank">文档</a>。</p><p id="5d72" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated">最后，在运行应用程序时，我们需要将1密码CLI的run命令与您的应用程序的start命令结合使用，从而将秘密引用替换为真实的秘密值。<code class="fe ml mm mn mo b">op run —-env-file .env (your app's start command)</code>。输出任何秘密值的日志现在应该显示<code class="fe ml mm mn mo b">&lt;concealed by 1Password&gt;</code>。</p><h2 id="6e05" class="kr ks iq bd kt ku kv dn kw kx ky dp kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">恭喜您，您已经设置了1密码保密自动化</h2><p id="3a13" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv la lw lx ly le lz ma mb li mc md me mf ij bi translated">恭喜你。现在，您已经在代码编辑器和远程服务器中设置了1密码加密自动化。您的秘密是安全的，可以在多个环境中安全地共享和更新。</p><pre class="kg kh ki kj gt nb mo nc nd aw ne bi"><span id="e434" class="kr ks iq mo b gy nf ng l nh ni"><strong class="mo ir">Want to Read More?</strong></span><span id="0560" class="kr ks iq mo b gy nj ng l nh ni">Subscribe to my <a class="ae mp" href="https://medium.com/subscribe/@louisefindlay23" rel="noopener">newsletter</a> for more technical guides and tutorials for developers.</span></pre><h2 id="68f6" class="kr ks iq bd kt ku kv dn kw kx ky dp kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">资源</h2><p id="0e34" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv la lw lx ly le lz ma mb li mc md me mf ij bi translated"><a class="ae mp" href="https://blog.1password.com/1password-visual-studio-code/" rel="noopener ugc nofollow" target="_blank"> 1Password Visual Studio代码公告</a></p><p id="1e05" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated"><a class="ae mp" href="https://developer.1password.com/docs/vscode" rel="noopener ugc nofollow" target="_blank">1密码VS代码文档</a></p><p id="1559" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated"><a class="ae mp" href="https://developer.1password.com/docs/cli/get-started" rel="noopener ugc nofollow" target="_blank">开始使用1密码CLI 2 </a></p><p id="db86" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated"><a class="ae mp" href="https://developer.1password.com/docs/cli/sign-in-manually" rel="noopener ugc nofollow" target="_blank">手动登录1密码</a></p><p id="b70d" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated"><a class="ae mp" href="https://developer.1password.com/docs/cli/secrets-config-files" rel="noopener ugc nofollow" target="_blank">将机密加载到配置文件| 1密码CLI文档</a></p></div><div class="ab cl nk nl hu nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="ij ik il im in"><h1 id="3a71" class="nr ks iq bd kt ns nt nu kw nv nw nx kz jw ny jx ld jz nz ka lh kc oa kd ll ob bi translated">分级编码</h1><pre class="kg kh ki kj gt nb mo nc nd aw ne bi"><span id="b102" class="kr ks iq mo b gy nf ng l nh ni">Thanks for being a part of our community! More content in the <a class="ae mp" href="https://levelup.gitconnected.com/" rel="noopener ugc nofollow" target="_blank">Level Up Coding publication</a>.</span><span id="ac4f" class="kr ks iq mo b gy nj ng l nh ni">Follow: <a class="ae mp" href="https://twitter.com/gitconnected" rel="noopener ugc nofollow" target="_blank">Twitter</a>, <a class="ae mp" href="https://www.linkedin.com/company/gitconnected" rel="noopener ugc nofollow" target="_blank">LinkedIn</a>, <a class="ae mp" href="https://newsletter.levelup.dev/" rel="noopener ugc nofollow" target="_blank">Newsletter</a></span><span id="decd" class="kr ks iq mo b gy nj ng l nh ni"><strong class="mo ir">Level Up is transforming tech recruiting</strong> 👉 <a class="ae mp" href="https://jobs.levelup.dev/talent/welcome?referral=true" rel="noopener ugc nofollow" target="_blank"><strong class="mo ir">Join our talent collective</strong></a></span></pre></div></div>    
</body>
</html>