# 更好的代码审查技巧

> 原文：<https://levelup.gitconnected.com/tips-for-better-code-reviews-2121fc338d3e>

![](img/a25de84141a786cda01ca64fdde1eba3.png)

图片由[斯科特·奥利韦利](https://medium.com/u/d5d9d4cf873?source=post_page-----2121fc338d3e--------------------------------)

代码评审是软件开发的一个重要部分。他们可以帮助团队加强并遵循标准和最佳实践，帮助开发人员优化他们的代码，并防止不良或有缺陷的代码被发布。这里有一些技巧，可以让你以一种更有效、更高效、更有利于协作的方式进行代码评审。

# 理解和交流背景

对于评审人员来说，理解代码更改实际上在做什么，该代码区域如何与代码的其他部分相关，以及该更改对程序的影响是很重要的。在没有完全理解的情况下审查某些东西可能会导致尽管代码中存在问题，但仍然被批准。这也可能导致审阅者给出的反馈不准确或没有应有的帮助。如果评审者不理解代码变更的上下文，那么对于他们来说，询问上下文或者将变更转发给理解的团队成员是很重要的。

对于评论者来说，在他们留下的评论中给出适当的上下文也是很重要的。例如，与其告诉某人做出改变，不如告诉某人为什么改变是必要的，或者改变会有什么好处。这有助于代码作者更好地理解问题是什么，并让他们了解如何解决问题。它还可能让人们更好地理解标准或最佳实践。

# 邀请协作

代码评审并不一定意味着评审者给出了一个注释，开发人员进行了修改，仅此而已。有时这并不是对代码最好的。在代码评审中具有包容性并邀请协作可以允许更详细地从更多角度评审代码。它有助于确保对代码的处理是对代码最好的。

邀请合作的一个很好的方法是将问题作为评论。与其告诉某人改变他们所做的，不如问问他们为什么这样做，或者问问他们为什么那样做。开发人员可能出于一个非常好的理由，以一种非常谨慎的方式编写了他们的代码。对于评审者来说，看起来奇怪的疏忽实际上可能是一个重要的、有意的决定，它防止了代码的功能或健康问题。看似奇怪的疏忽实际上可能是一个奇怪的疏忽，并可能说明某人知识上的误解或差距。开放讨论为作者和评论者创造了学习和合作的机会，以确定最佳的行动方案。

在代码评审中邀请协作的另一种方式是使用更具包容性的语言。尽可能使用“我们”而不是“我”或“你”。这有助于消除代码作者和评审者被反对的感觉，并使他们对彼此的反馈和想法更加开放。它还创建了对代码和对代码所做的更改的更大的共享感。加强合作可以带来更有成效的审查。

# 使用 ASK 方法

我收到的关于提供反馈的一些最好的建议是，反馈应该是可操作的、具体的和友好的(因此要问)。相反，在代码评审中，评审者给出的最糟糕的反馈之一就是“改变这一点”。这并没有指出需要改变什么，为什么需要改变，应该如何改变，或者正确的前进道路是什么。缺乏特异性和可操作性将使程序员很难按照评审者想要的方式修改代码。

准确地交流问题或改进的领域以及它在代码中的位置是很重要的。例如，评审者可以建议将一个特定的方法分解成更小的辅助函数，或者删除一段不必要的代码，而不是告诉某人“清理这段代码”。以这种方式传递反馈给程序员一个清晰的行动来改进代码。评审者让人们更容易理解问题，他们就能更好地解决问题。

提供反馈时态度和蔼也很重要。在提供反馈时，没有必要贬低某人或过于挑剔，这样做会阻碍合作。在审查代码时，一种更友好的方法是使用关注代码而不是作者的语言。评审者可以说“这段代码中的错误消息不一致”，而不是说“你的错误消息不一致”然后，评审者可以对团队使用的标准进行评论，提供文档的链接，或者建议聚在一起讨论标准。对于评审者来说，重要的是要记住他们是在评审代码，而不是编写代码的人。

代码审查不仅仅是指出错误和改进代码的方法，让别人知道他们做得好也很重要。给予正面的强化有助于在代码评审中建立一个协作的环境，并鼓励人们继续他们良好的编码实践。当某人以一种新的好的方式做某事时，认识到这一点也可以帮助团队发展出自己的最佳实践。

# 说明变更的重要性

不同的评论有不同的紧急程度或重要性。向代码作者传达变更的重要性是非常有用的。如果他们代码中的某些东西留下了安全风险，或者如果他们代码中的某个问题可能会导致某些东西被破坏或另一个重要的问题，那么让他们知道这个问题带来的风险是很重要的。另一方面，如果你要求的改变是微小的或吹毛求疵的，那么交流也是有帮助的。

当反馈是可选的时，这尤其重要。说一条反馈是可选的，并不等同于说它是次要的，但仍然应该实施，并且不应该这样对待它。告诉某人反馈是可选的，让他们选择实施反馈，也让他们选择不实施反馈。如果作者说反馈是可选的，那么评论者需要准备好不执行他们的反馈。因此，重要的是要确定反馈可以是可选的，并接受作者的决定，即使这不是审查者的偏好。

另一方面，如果评审者有为了代码的健康或安全而必须实现的反馈，他们可以创建一个变更请求。这类似于留下一个普通的反馈注释，除了它阻止代码被合并，直到请求变更的人批准。这是另一种情况，在这种情况下，评审者在以这种方式给出反馈之前确定他们的反馈有多重要是非常重要的。如果评审者对每一条反馈都提出变更请求，不管它有多重要，他们最终会成为团队生产力的瓶颈。