<html>
<head>
<title>Should Smart Contracts be Non-Turing Complete?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">智能合约应该是非图灵完全的吗？</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/should-smart-contracts-be-non-turing-complete-fe304203a49e?source=collection_archive---------1-----------------------#2019-07-13">https://levelup.gitconnected.com/should-smart-contracts-be-non-turing-complete-fe304203a49e?source=collection_archive---------1-----------------------#2019-07-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/d588d239b4e90655526c246d84a62c1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*LaxxmlKUgWcJBwaW"/></div></div></figure><p id="780a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">每个人都有自己喜欢的编程语言，就像每个人都有自己喜欢的鞋子或者喜欢的食物一样。我希望我们一起踏上编程之旅。我们将讨论图灵完备性，评估它在智能契约方面的有用性，看看替代方案，希望我们最终能一起得出相同的结论。剧透:结论是，让Solidity垄断智能合约是一个可怕而愚蠢的想法。</p><p id="b0be" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">所以让我们直接开始吧。(真正快速:TC =图灵完成，NTC =未图灵完成)</p><h1 id="1d95" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">图灵完备性，最简短的解释</h1><p id="8570" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">如果你不知道TC是什么，我给你简单解释一下，让你了解最新情况。如果你以前听说过它，但不太记得它到底是什么，这将刷新你的记忆。让我们投入进去吧！</p><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lz"><img src="../Images/ab723b2ac122f4bffb6d38b078ebe471.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qbGky_tJDxYBgpxy"/></div></div></figure><p id="e4ef" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">艾伦·图灵是一位数学家(以及其他许多人)，他创造了一种叫做图灵机的理论机器。这个虚构的机器可以访问无限量的RAM，并使用有限的程序来运行，该程序决定它何时应该在内存中进行写、读和移动。它的编程还规定了在什么条件下应该终止以及下一步应该做什么。符合这些条件的编程语言被称为TC语言。</p><p id="6dde" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">快速分析一下TC机器能做什么和不能做什么是合适的，所以让我们看一些例子。</p><p id="1252" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">已完成:</p><ul class=""><li id="9ff1" class="mf mg iq ka b kb kc kf kg kj mh kn mi kr mj kv mk ml mm mn bi translated">有能力实现任何可计算的功能。</li><li id="e4ba" class="mf mg iq ka b kb mo kf mp kj mq kn mr kr ms kv mk ml mm mn bi translated">总是包含一个不会自行终止的函数。</li><li id="72db" class="mf mg iq ka b kb mo kf mp kj mq kn mr kr ms kv mk ml mm mn bi translated">包括理论上可以使用无限量内存的功能。</li></ul><p id="928e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">不完整:</p><ul class=""><li id="e4b1" class="mf mg iq ka b kb kc kf kg kj mh kn mi kr mj kv mk ml mm mn bi translated">不支持循环、递归或其他不会自行终止的goto变体。</li></ul><p id="4b98" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">根据<a class="ae mt" href="https://www.tiobe.com/tiobe-index/" rel="noopener ugc nofollow" target="_blank"> Tiobe Index </a>，几乎所有现代流行的编程语言都默认为TC(或者在需要时有能力成为TC)。有目的的NTC语言是非常特定于领域的语言，如BicoinScript和Coq(一种机械检查证明的交互式定理程序)。这些语言有意地缺少递归，要么是作为一种安全特性，要么是因为它们可以在没有递归的情况下运行，开发人员认为创建一个TC环境是多余的。</p><p id="0b26" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">基本上，NTC语言更专业，而TC语言是一种多用途工具，可以处理各种情况。起初你可能会想，“嗯，我们应该对所有事情都使用TC语言，对吗？”毕竟，它是灵活的，但正如多功能工具是一个很好的随身物品，因为它在许多情况下都很方便，你可能更喜欢在修理像你的汽车这样的东西时有合适的工具。</p><figure class="ma mb mc md gt jr gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/ffe22a7f94f494705a5dbb8340f96678.png" data-original-src="https://miro.medium.com/v2/resize:fit:1080/0*nps_LyXE2Op2yj2G"/></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated"><a class="ae mt" href="http://themetapicture.com/have-you-never-opened-chardonnay-under-fire/" rel="noopener ugc nofollow" target="_blank">http://themeta picture . com/have-you-never-open-chardonnay-under-fire/</a></figcaption></figure><p id="47d8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">用上面的类比来滚动，TC语言可以应用的更广，而NTC语言有<em class="me">特定的</em>用途。我不知道你怎么想，但我个人认为智能合同是<em class="me">的一个特定</em>用例。“但是，”你可能会想，“智能合约有这么多不同的类型，大多数都写得很可靠，没有任何问题。”</p><p id="1bd7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">说得好，亲爱的读者。我很高兴你提起那件事。</p><h1 id="a17b" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">智能契约、可靠性和图灵完备性</h1><p id="9e7a" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">我发现，对于复杂的问题，向专家寻求帮助总是最好的，这也是我在德国鲁尔西部应用科学大学计算机科学研究所发表论文的原因。这篇论文的题目很恰当，叫做“<a class="ae mt" href="https://www.researchgate.net/publication/332072371_Do_Smart_Contract_Languages_Need_to_be_Turing_Complete" rel="noopener ugc nofollow" target="_blank">智能契约语言需要图灵完备吗？“揭示了许多关于你我共同经历的旅程的非常有趣的统计数据。</a></p><p id="bbe6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">但是在我们深入研究这些统计数据之前，让我们快速检查一下存在的一些常见缺陷，因为Solidity是一种TC语言。我们有允许DAO hack发生的安全缺陷(<a class="ae mt" href="https://medium.com/@ogucluturk/the-dao-hack-explained-unfortunate-take-off-of-smart-contracts-2bd8c8db3562" rel="noopener">递归调用利用</a>)，攻击实现不佳的智能契约的可能性(<a class="ae mt" href="https://eprint.iacr.org/2016/1007.pdf" rel="noopener ugc nofollow" target="_blank">重入攻击</a>)，以及由于递归而无法准确预测费用的事实(以及<a class="ae mt" href="https://en.wikipedia.org/wiki/Halting_problem" rel="noopener ugc nofollow" target="_blank">停止问题</a>)。这些东西之所以存在，只是因为Solidity是一种TC语言，但是我们从TC语言中获得了如此多的东西，忍受这些缺陷当然是值得的，对吗？</p><p id="837a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">对吗？！</p><p id="652d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">不幸的是，德国鲁尔西应用科技大学的人告诉我们一个不同的故事。他们下载了53575份智能合同，并分析了每份合同中的编码类型。他们在论文中解释说，“执行的分析确定了提取的智能合约所使用的流控制机制，并将每个智能合约分配给相应的可计算性类，以便检查实际需要图灵完整智能合约来实现的智能合约的百分比，并以此回答提出的研究问题。”</p><p id="1015" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">结果如下:</p><ul class=""><li id="9fa4" class="mf mg iq ka b kb kc kf kg kj mh kn mi kr mj kv mk ml mm mn bi translated">35.3% —使用“for循环和原始递归函数以及与此类函数相关的暂停问题。”</li><li id="564b" class="mf mg iq ka b kb mo kf mp kj mq kn mr kr ms kv mk ml mm mn bi translated">这35.3%中的进一步细分包括:</li><li id="7d6c" class="mf mg iq ka b kb mo kf mp kj mq kn mr kr ms kv mk ml mm mn bi translated">24.8%“验证合同使用for-loops”</li><li id="4564" class="mf mg iq ka b kb mo kf mp kj mq kn mr kr ms kv mk ml mm mn bi translated">3.6%是“使用递归的契约”</li><li id="96af" class="mf mg iq ka b kb mo kf mp kj mq kn mr kr ms kv mk ml mm mn bi translated">所有分析过的智能合同中，有6.9%使用了控制流机制，这种机制通常需要一种完整的编程语言。</li></ul><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mz"><img src="../Images/2b4d30c9b020261c4d0417bfe450322a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-_cBYMEx1I8uVTLj"/></div></div></figure><p id="9da6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们可以从两个方面来看待这些数据。严格来说，最后的6.9%(大约53，575人中的3，697人)是技术上唯一需要TC语言才能发挥作用的类别。即使我们非常自由地进行归纳，并假设全部35%的人都需要一门TC语言，那会更好吗？见鬼，我甚至可以说，即使他们中有一半人需要TC，这也不值得。那么坚固性为什么是TC呢？</p><p id="e3c5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Solidity的创建深受JS、C++、Python和PowerShell的影响，这些都是TC语言本身。说Solidity是通过100%的意图被创造出来的TC语言可能有点夸张。毕竟，为什么你会故意在你的编程语言中引入缺陷，而好处却没有被利用呢？在DAO被黑后，康乃尔大学的博士生菲利普·黛安在一篇相当有趣的博客文章中写道:“这实际上不仅仅是DAO契约本身的一个缺陷或漏洞:从技术上讲，EVM是按照预期运行的，但是Solidity将安全缺陷引入了契约中，这不仅被社区忽略了，而且也被语言的设计者自己忽略了。”</p><h1 id="b571" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">我们还有其他选择…对吗？</h1><p id="1532" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">垄断是不好的，会扼杀增长。句号。我们反对、支持政府解散它们的行动，但出于某种原因，当涉及到智能合同时，我们愿意接受它们？考虑到这一点，我认为有两种可能的未来展现在我们面前。</p><p id="e294" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">未来的一个，我们用我们的经验来巩固并从中成长。我们在Solidity上进行扩展，用其他语言进行扩展，比如Vyper(一种旨在紧挨着Solidity使用的NTC语言)，并继续忽略TC语言给智能合约世界带来的明显缺陷。</p><p id="8ba3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">未来二，我们多样化我们的投资组合。听着，我之前说过我不会告诉任何人放弃他们最喜欢的编程语言，我撒谎了。现在智能合约社区的问题是每个人都坚持使用Solidity，我只是希望这是出于必要而不是欲望。</p><p id="4330" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们来谈谈智能合约世界中编程语言的重要竞争者。让我们来谈谈海浪的行程。</p><p id="b498" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我认为Waves是这场斗争中的一个重要竞争者有几个原因，其中一个主要原因是Waves出现了，建立了一个系统，并自2016年以来一直在运行它。你经常会看到关于“这家新公司”的推测性文章，它将“彻底改变这个领域”。当波浪进入赛场时，它们摇摆着进来，它们有一个展示产品的橱窗来展示。</p><p id="2b9d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">他们有自己的区块链、钱包和安全浏览器扩展来管理dApp连接，DEX，现在还有RIDE，他们自己专门设计的编程语言来构建dApp。我提出这一点的原因是因为Waves是一家做严肃事情的强大公司，这使得他们的Solidity替代品成为dApp开发者的重要竞争者。老实说，我对这家公司的主要问题是他们网站的登陆页面令人作呕，它只是…不停地移动。</p><p id="665b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">RIDE是一种有目的的非图灵完整语言，它是为开发人员设计的，用于在一个严肃的环境中构建智能契约。RIDE对此采取了双管齐下的方法:首先，他们的语言提供了创建dApps所需的基本脚本功能(同时减少了与安全相关的错误)。其次，因为这种语言不支持任何递归或复杂的循环，所以可以很容易地测试它的安全缺陷。</p><p id="c59e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">但是递归的缺乏不仅仅有利于安全测试，在计算执行Waves区块链智能合同的天然气费用时也会考虑到这一点。因为有可能计算程序应该运行多长时间以及它将有多复杂，所以可以估计价格，并且在不执行dApp的情况下从不收取费用(我在看着你，以太坊)。</p><p id="d9ef" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你可能会想，因为RIDE是NTC，所以它不能处理大多数为EVM编写的智能合同。还记得之前德国计算机科学家的研究吗？不到7%的测试智能合约使用了循环并需要TC来运行。</p><p id="b75c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">真正的问题(这次旅程的全部目的)是:当不到7%的用Solidity编写的dApps在使用它的TC特性时，我们为什么还要使用Solidity这种TC语言？</p><p id="9094" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">根据论文“<a class="ae mt" href="https://arxiv.org/abs/1806.10116" rel="noopener ugc nofollow" target="_blank">自我复制硬币作为通用图灵机</a>”，理论上，7%需要TC智能合约的dApps可以通过在许多不同的交易中实现TC功能来服务。在他们的研究中，他们能够通过使用利用UTXO(未用事务输出)模型的一组小型特定语言功能来构建一个简单的TC机器。为了安全起见，这些事务受到输入和输出事务状态的严格限制，在这种情况下，无界循环和无限循环都是有意不可能触发的。同样，RIDE作为一种NTC编程语言，可以用来编写TC智能合约，而没有底层TC编程语言可能带来的问题。</p><p id="13e4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们在以太坊中看到的问题只会变得更糟，除非他们改变一些重大的东西，因为我们可以看到他们未来几年的路线图，我们知道这些关键的变化都没有在工作中。他们将<em class="me">最终</em>转移到POS而不是power，而且他们有Vyper，如果你想增加安全性，你可以选择写入。但底线是TC是一个卖点。见鬼，Vitalik Buterin甚至在以太坊白皮书中承认:</p><p id="0c25" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">“图灵不完全性甚至不是一个很大的限制；在我们内部构思的所有契约示例中，到目前为止，只有一个需要循环，甚至可以通过重复26次一行代码来消除该循环。考虑到图灵完全性的严重影响和有限的好处，为什么不简单地拥有一个图灵不完全语言呢？然而，实际上，图灵不完全性远不是解决问题的好办法。</p><figure class="ma mb mc md gt jr gh gi paragraph-image"><div class="gh gi na"><img src="../Images/d5a78785abfd46e1b24232ec9cf5582a.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/0*1rUUGkQ184jIuDGe"/></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated">【https://xkcd.com/329/ T4】</figcaption></figure><p id="c462" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当我们一起到达旅程的终点时，我问你，“作为开发人员，什么对你来说更重要:编写清晰、简洁的代码，自动抵御黑客攻击和恶意意图的能力，还是用更“简洁”的TC语言编写代码的能力？</p><p id="1cd2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">以太坊和稳固性不可否认地打开了智能合约和dApps新世界的大门，但我们早就应该多样化我们的编程技能，并在它变得太强大之前打破这种垄断。对于开发人员来说，转换到NTC替代品并不是一个很大的飞跃。为了让你更容易理解，我打算在我的下一篇文章中向你展示整个过程，并向你展示具体的代码示例。留下来，因为转变正在发生，你在前排有座位！</p></div></div>    
</body>
</html>