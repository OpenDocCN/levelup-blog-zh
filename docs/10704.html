<html>
<head>
<title>How to Create a Circle Packing Chart Using JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用JavaScript创建圆形包装图</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-create-a-circle-packing-chart-using-javascript-6771648882cc?source=collection_archive---------15-----------------------#2022-01-03">https://levelup.gitconnected.com/how-to-create-a-circle-packing-chart-using-javascript-6771648882cc?source=collection_archive---------15-----------------------#2022-01-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="79b4" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">一个清晰的分步指南，用于构建一个交互式JS Circle包装图表，以可视化Spotify上最热门的100首歌曲。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/6bb1f3747c1089841c009e5773a6b769.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tx61X_RzEMWCUXum75jmVg.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</figcaption></figure><p id="3765" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">想学习如何以令人惊叹的圆形包装图可视化分层数据，并以轻松的方式添加到网页或应用程序中吗？不要感到不知所措，只要按照我的逐步数据可视化教程！使用Spotify上最热门的100首歌曲的数据，我将向您展示如何使用JavaScript轻松创建和定制一个漂亮的交互式圆形包装图。</p><h1 id="1cd9" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">什么是圆形包装图</h1><p id="5aff" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">让我先给你简单介绍一下什么是圆形包装图，以及如何使用它。</p><p id="2abf" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">也称为圆形树，圆形包装图基本上是展示分层数据的树形图，其中圆形表示节点，子节点是节点圆形内的圆形。</p><p id="4b8f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">圆圈的大小表示节点的值。</p><p id="50d9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">圆形包装表示法很好地表示了层次结构，通过组和子组提供了方便的可视化分解。</p><h1 id="82d4" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">预览将要制作的圆形包装图</h1><p id="ed7f" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">看看我将要构建的东西——最终的JS circle包装图将在本教程结束时创建——并加入这场音乐之旅！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mr"><img src="../Images/1354f41a7931517153fe8555359fb9eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YXb3HOMadFp15e8axKg-uw.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</figcaption></figure><h1 id="cba3" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">用4个简单的步骤构建JS圆形包装图</h1><p id="0a19" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">一个可嵌入的圆形包装图看起来令人兴奋，但很难创建。然而，有许多专门用来帮助每个人构建各种数据可视化的JavaScript图表库。一旦你找到了一个开箱即用的内置圆形打包选项，即使你是一个编程技能有限的初学者，通常也能非常快速和直接地得到这样一个交互式图表。</p><p id="8969" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">从技术上讲，创建圆形包装数据可视化的整个过程所包含的步骤与任何JS图表库大致相同。在本教程中，我将使用<a class="ae ms" href="https://www.anychart.com/" rel="noopener ugc nofollow" target="_blank"> AnyChart </a>进行说明。这很容易开始，详细的<a class="ae ms" href="https://docs.anychart.com/" rel="noopener ugc nofollow" target="_blank">文档</a>和许多现成的<a class="ae ms" href="https://www.anychart.com/products/anychart/gallery/" rel="noopener ugc nofollow" target="_blank">示例</a>可以作为快速构建任何类型图表的良好起点，包括这张。同样重要的是，该库对于非商业用途是免费的。</p><p id="5274" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">所以，创建一个JS四号圆形包装图的基本步骤如下:</p><ol class=""><li id="2269" class="mt mu it la b lb lc le lf lh mv ll mw lp mx lt my mz na nb bi translated">为图表制作一个HTML页面。</li><li id="6ea6" class="mt mu it la b lb nc le nd lh ne ll nf lp ng lt my mz na nb bi translated">包括必要的JS文件。</li><li id="b249" class="mt mu it la b lb nc le nd lh ne ll nf lp ng lt my mz na nb bi translated">添加数据。</li><li id="aafa" class="mt mu it la b lb nc le nd lh ne ll nf lp ng lt my mz na nb bi translated">编写绘制图表所需的JavaScript代码。</li></ol><h2 id="a859" class="nh lv it bd lw ni nj dn ma nk nl dp me lh nm nn mg ll no np mi lp nq nr mk ns bi translated">1.创建HTML页面</h2><p id="2c76" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">我做的第一件事是创建一个放置图表的基本HTML页面。接下来，我创建一个HTML块元素，<code class="fe nt nu nv nw b">div</code>,并给它分配一个ID属性，如“container ”,以便在代码中容易地识别它。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="dde0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我定义了块的样式，通过给高度和宽度属性赋予100%的值，使图表呈现在整个页面上。当然，您可以随意指定您想要完成任务的方式。</p><h2 id="44c0" class="nh lv it bd lw ni nj dn ma nk nl dp me lh nm nn mg ll no np mi lp nq nr mk ns bi translated">2.包括必要的JavaScript文件</h2><p id="140b" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">然后，我需要添加我要用来创建我想要开发的圆形包装图的脚本。通常可以从您正在使用的库的CDN中引用必要的文件，或者将它们下载到您的本地机器上。</p><p id="dd17" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为了在本教程中创建这个图表，我使用了AnyChart库。它有一个模块化的结构，可以很容易地只连接您当前需要的图表类型和特性，从而减少运行JavaScript代码的大小。在这种情况下，我需要<a class="ae ms" href="https://docs.anychart.com/Quick_Start/Modules#core" rel="noopener ugc nofollow" target="_blank">核心</a>模块和特定的<a class="ae ms" href="https://docs.anychart.com/Quick_Start/Modules#circle_packing" rel="noopener ugc nofollow" target="_blank">圆形包装</a>模块。所以我在第一步中创建的HTML页面的<code class="fe nt nu nv nw b">head</code>部分包含了这两者。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><h2 id="ffdf" class="nh lv it bd lw ni nj dn ma nk nl dp me lh nm nn mg ll no np mi lp nq nr mk ns bi translated">3.添加数据</h2><p id="8d3f" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">我决定使用来自<a class="ae ms" href="https://www.kaggle.com/pavan9065/top-100-most-streamed-songs-on-spotify" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>的专用数据集来可视化Spotify上100首最热门的歌曲。我稍微修改了一下数据，使它看起来像我需要的那样，并把它保存在一个<a class="ae ms" href="https://gist.githubusercontent.com/shacheeswadia/17dc3b3d4ac9b63ac5ac6833944f3a94/raw/07c4bec103d22ec2824453a33d41868fd476db3d/dataPackedCircles.json" rel="noopener ugc nofollow" target="_blank"> JSON文件中。</a></p><p id="fd2f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为了从JSON文件加载数据，我将利用一个叫做<a class="ae ms" href="https://docs.anychart.com/Quick_Start/Modules#data_adapter" rel="noopener ugc nofollow" target="_blank">数据适配器</a>的便利模块。所以我将它包含在<code class="fe nt nu nv nw b">head</code>部分的引用脚本列表中，并使用<code class="fe nt nu nv nw b">anychart.data.loadJsonFile</code>函数将这个数据文件添加到代码中。</p><p id="025c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在所有的准备工作都完成了，让我们进入创建这个令人印象深刻的、交互式的、基于JS的包装圆图的最后一步！</p><h2 id="a699" class="nh lv it bd lw ni nj dn ma nk nl dp me lh nm nn mg ll no np mi lp nq nr mk ns bi translated">4.为您的图表编写JavaScript代码</h2><p id="70d0" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">当创建可视化和编写看似复杂的代码时，一些像HTML和JavaScript这样的web开发技术的背景知识总是一个优势。然而，用这种方式创建一个圆形包装图只需要6到7行代码。所以这一点也不复杂。你不觉得那是音乐吗？</p><p id="a615" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">最初，我添加了一个包含所有代码的函数，确保一旦页面准备好就执行它。然后我把数据包含在这个函数里。</p><p id="62eb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在，我用data参数定义一个函数，并使用data.tree函数映射数据。我将映射的数据添加到circlePacking函数中。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="0235" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">最后，我还做了一个标题，添加了对之前定义的容器的引用，并画出了结果的圆形装箱图。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="38e3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Tada！一个功能齐全的圆形包装图就这么不费吹灰之力就搭建好了！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/70f1f2acd6af1a5cd703d5da92a654f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ZoMcLDgUg5mpvPmE"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</figcaption></figure><p id="88a9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在Spotify的100首最热门的流媒体歌曲中，流行音乐显然是最受欢迎的。我本人更倾向于舞蹈流派，而你可能是摇滚或节奏布鲁斯的粉丝。但不出所料，流行音乐和嘻哈音乐绝对是大众的最爱。</p><p id="ea9f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你可以在<a class="ae ms" href="https://codepen.io/shacheeswadia/pen/ExwXmOd?editors=0010" rel="noopener ugc nofollow" target="_blank"> CodePen </a>上找到这个基本JavaScript打包圆图的完整代码。</p><h1 id="3fc8" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">定制JS圆形包装图</h1><p id="c52b" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">这个基于JavaScript的圆形包装图的初始版本看起来非常漂亮，可以马上使用。但是我还想向您展示一些简单的方法，使这种类型的数据可视化更加令人印象深刻、时尚和强大。</p><h2 id="5b5c" class="nh lv it bd lw ni nj dn ma nk nl dp me lh nm nn mg ll no np mi lp nq nr mk ns bi translated"><strong class="ak">颜色修改</strong></h2><p id="b5f6" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">为了给图表添加更多的爵士乐，我改变了气泡的颜色。使用AnyChart的一个预先构建的设计主题可以非常容易地做到这一点。我选择“黑暗魅力”主题，所以我添加它的脚本并在代码中设置主题。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="589d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我想给圆形一个透明的背景效果，所以我把圆形的背景和填充设置为相同的颜色。我将圆形的笔画加粗，并将笔画的颜色设置为主题颜色。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><h2 id="6b80" class="nh lv it bd lw ni nj dn ma nk nl dp me lh nm nn mg ll no np mi lp nq nr mk ns bi translated"><strong class="ak">标题改进</strong></h2><p id="26d4" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">为了使标题更加突出，我使用HTML来指定字体大小和颜色。我还加了第二行做字幕。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="653f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">点击这里查看JS打包圆图表<a class="ae ms" href="https://codepen.io/shacheeswadia/pen/MWEomxQ" rel="noopener ugc nofollow" target="_blank">的定制版本。</a></p><h2 id="253e" class="nh lv it bd lw ni nj dn ma nk nl dp me lh nm nn mg ll no np mi lp nq nr mk ns bi translated"><strong class="ak">工具提示格式</strong></h2><p id="df8c" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">使交互式数据可视化更具信息性的最好方法之一是在工具提示中添加更多的细节。该数据集包含关于每首歌曲的艺术家和年份的信息，以及其流行度值。因此，我使用HTML将所有这些信息包含在圆形包装图的工具提示中。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="e025" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">仅此而已！一个优雅而富有启发性的JavaScript Circle Packing Chart被设计出来并准备好了。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/fa9327bd91df74a830e0d7927b125d85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*r7ihJqdVHeTUXDzk"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</figcaption></figure><p id="4560" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">使用<a class="ae ms" href="https://codepen.io/shacheeswadia/pen/rNGwwYb" rel="noopener ugc nofollow" target="_blank"> CodePen上的所有定制检查整个代码。</a></p><h1 id="2c3a" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">结论</h1><p id="a2f6" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">你可以看到构建一个像包装好的圆圈这样有创意的图表是多么简单。你可以学习使用各种<a class="ae ms" href="https://en.wikipedia.org/wiki/Comparison_of_JavaScript_charting_libraries" rel="noopener ugc nofollow" target="_blank"> JS图表库</a>创建大量不同类型的数据可视化。或者从查看AnyChart中的其他<a class="ae ms" href="https://docs.anychart.com/Quick_Start/Supported_Charts_Types" rel="noopener ugc nofollow" target="_blank">图表选项</a>开始。</p><p id="a3db" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果您对构建此图表有任何问题或任何其他疑问，请告诉我。音乐有益于灵魂，创造形象有益于大脑，所以让我们多听些歌，多做些图表吧！</p></div></div>    
</body>
</html>