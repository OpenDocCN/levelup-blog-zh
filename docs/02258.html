<html>
<head>
<title>Make your custom errors NSError convertible</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使您的自定义错误NSError可转换</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/make-your-custom-errors-nserror-convertible-86ebafa306ef?source=collection_archive---------3-----------------------#2020-03-01">https://levelup.gitconnected.com/make-your-custom-errors-nserror-convertible-86ebafa306ef?source=collection_archive---------3-----------------------#2020-03-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/d0f835067f115e9edf32ac8f4d99a5b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TbSC_Trh_e2lOvuRqXHTiQ.jpeg"/></div></div></figure></div><div class="ab cl jy jz hu ka" role="separator"><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd"/></div><div class="ij ik il im in"><p id="007f" class="pw-post-body-paragraph kf kg iq kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ij bi translated">最近我在写一个网络层，结果像往常一样创建了<strong class="kh ir"> NetworkError </strong>:使用enum来指定可能的错误类型。</p><p id="d35a" class="pw-post-body-paragraph kf kg iq kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ij bi translated">大概是这样的:</p><figure class="ld le lf lg gt jr"><div class="bz fp l di"><div class="lh li l"/></div></figure><p id="6ee6" class="pw-post-body-paragraph kf kg iq kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ij bi translated">这没有问题，但是由于我必须通过我的logger模块发送一些错误日志<strong class="kh ir"> </strong>，我想要一个简单的方法来获得我需要的所有信息，而不必向它发送特定的类型。</p><p id="ac26" class="pw-post-body-paragraph kf kg iq kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ij bi translated">我想:“当我需要更多关于系统错误的信息时，我通常会尝试将它转换成<strong class="kh ir"> NSError </strong> …如果我也能处理我的错误呢？”</p><p id="ad38" class="pw-post-body-paragraph kf kg iq kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ij bi translated">然后我找到了<a class="ae lj" href="https://developer.apple.com/documentation/foundation/customnserror" rel="noopener ugc nofollow" target="_blank"> CustomNSError协议</a>。</p><figure class="ld le lf lg gt jr"><div class="bz fp l di"><div class="lh li l"/></div></figure><p id="b6fe" class="pw-post-body-paragraph kf kg iq kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ij bi translated">使用<strong class="kh ir"> CustomNSError </strong>协议，可以简单地将对象类型转换为<strong class="kh ir"> NSError </strong>。为了做到这一点，我们必须符合它并实现所需的逻辑，以返回协议中指定的与<strong class="kh ir"> NSError </strong>相关的属性。</p><p id="5401" class="pw-post-body-paragraph kf kg iq kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ij bi translated">使用这种方法，我们的示例错误将如下所示。</p><figure class="ld le lf lg gt jr"><div class="bz fp l di"><div class="lh li l"/></div></figure><p id="63e9" class="pw-post-body-paragraph kf kg iq kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ij bi translated">然后有可能这样做:</p><figure class="ld le lf lg gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lk"><img src="../Images/1ab3f535a9af5bacef65ccd5a3b52b01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TKlKF5rY2RaFcW3qIfJXjA.png"/></div></div></figure></div><div class="ab cl jy jz hu ka" role="separator"><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd"/></div><div class="ij ik il im in"><h1 id="716c" class="ll lm iq bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated"><strong class="ak">结论</strong></h1><p id="bb3b" class="pw-post-body-paragraph kf kg iq kh b ki mj kk kl km mk ko kp kq ml ks kt ku mm kw kx ky mn la lb lc ij bi translated">从现在开始，您可以像Swift APIs一样在上层处理您的错误，以您已经习惯的方式更容易地从它们那里获得更多信息。</p></div></div>    
</body>
</html>