<html>
<head>
<title>Create a Bitcoin trading DataFrame with Python Pandas</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python熊猫创建比特币交易数据框架</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/create-a-bitcoin-trading-dataframe-with-python-pandas-d090f4758289?source=collection_archive---------3-----------------------#2020-12-04">https://levelup.gitconnected.com/create-a-bitcoin-trading-dataframe-with-python-pandas-d090f4758289?source=collection_archive---------3-----------------------#2020-12-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="bc2a" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用数据科学Python库Pandas进行交易</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/d1f965efd683b156dfbde163bf3c1d87.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gmIx7yekyYkU_hBmzSlykA.jpeg"/></div></div></figure><p id="18ed" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我正在用Python开发一个自动加密交易机器人。我以前在Node.js中写过一个非常成功的例子，但是有了极其强大的Python Pandas数据科学库，它就变得简单多了。</p><p id="61af" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我计划在一系列文章中记录这个过程并分享代码，所以如果你感兴趣，请关注我的更新。</p><p id="19b9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我会用截图说明这些功能，但我也会包括该项目的Git库。我不会再讨论Python的安装，但是如果你感兴趣，请参考我以前的文章。</p><p id="e855" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">第一步是导入所需的库。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lq"><img src="../Images/93b41789082c5fab6f46d36d6190e0c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Jx7r1o5H3BlVXgclzKgdYA.png"/></div></div></figure><p id="2649" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">该函数将从比特币基地专业应用编程接口检索市场数据，并创建一个熊猫数据框架。</p><ul class=""><li id="1a48" class="lr ls it kw b kx ky la lb ld lt lh lu ll lv lp lw lx ly lz bi translated"><strong class="kw iu">市场</strong>:比特币基地专业市场(默认为‘BTC-英镑’)</li><li id="6834" class="lr ls it kw b kx ma la mb ld mc lh md ll me lp lw lx ly lz bi translated"><strong class="kw iu">粒度:</strong>(采样间隔):60 = 1分钟，300 = 5分钟，900，15分钟，3600 = 1小时，21600 = 6小时，86400 = 1天(默认为1天)</li><li id="c150" class="lr ls it kw b kx ma la mb ld mc lh md ll me lp lw lx ly lz bi translated"><strong class="kw iu"> iso8601start </strong>:可选的ISO8601开始日期格式，以字符串形式提供(不提供此格式，比特币基地Pro将提供最近300个样本，粒度为86400，这是最近300天)</li><li id="762c" class="lr ls it kw b kx ma la mb ld mc lh md ll me lp lw lx ly lz bi translated"><strong class="kw iu"> iso8601start </strong>:可选的ISO8601结束日期格式，以字符串形式提供(如果不提供，将默认为最后一个样本)</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lq"><img src="../Images/129b27ed57551bdf9c42f7450cbddcf7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JeQTsGsuZvI06-ChAOyHHg.png"/></div></div></figure><p id="2c0b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">该函数将把累积移动平均线(CMA)、指数移动平均线(EMA12和EMA26)和简单移动平均线(SMA20、SMA50和SMA200)附加到Pandas数据帧。请注意Python熊猫如何在一行中完成这些计算！</p><p id="dfca" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">还要注意，这将适用于任何带有“close”列的Pandas数据帧。如果您想对任何交易数据框架使用此功能，您需要的只是“收盘”栏，最好是日期/时间的参考。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mf"><img src="../Images/11e913ea2df4ba3693d3fb7ad6a7f38b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3sF-PpDPL0oSx2o0FnPBCA.png"/></div></div></figure><p id="663b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">该函数将把相对强弱指数(RSI14)和移动平均收敛发散(MACD)动量技术指标附加到熊猫数据框架上。由于需要EMA12和EMA26，该函数在计算MACD时会稍微复杂一些。我还创建了一个单独的函数来计算RSI。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lq"><img src="../Images/9f4dbe669c1944b4ce895a2586306e0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K-FVNdUZb6UakPZUjhNG-g.png"/></div></div></figure><p id="c0e4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这是上面使用的RSI函数。</p><p id="ba3a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">系列</strong>:熊猫系列收盘价<br/> <strong class="kw iu">区间</strong>:可配置区间，一般为14</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lq"><img src="../Images/7603e8cd353ed85c581c8ae678cab376.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ef1S6w7hxzgvuXEorfQcXA.png"/></div></div></figure><p id="90bc" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">该函数将熊猫数据帧存储到未压缩的CSV文件中。这可以用于任何熊猫数据帧。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mg"><img src="../Images/e5ffc6c3c765ea57d836d7bf7ca3736f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eJMUFFalYAlqtOlI_tmCWA.png"/></div></div></figure><p id="1f87" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">您应该像这样运行函数。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mh"><img src="../Images/94ad60e0198c1a7fa6626febaba2f5dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4ni3M8qtPdgRFSbfAAdFrA.png"/></div></div></figure><p id="9bf9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">输出如下所示…</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mi"><img src="../Images/1785d5f7ffdcb6395811d4cd283f3167.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6SZmr3mJW0QbTj6sy0IObA.png"/></div></div></figure><p id="cde8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">CSV看起来像这样(因为有大量数据，所以显示起来有点小)…</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mj"><img src="../Images/d25b0528d8990c92d88418676a7279cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5II5NCQppEZWPJRSSDJCCw.png"/></div></div></figure><h2 id="1644" class="mk ml it bd mm mn mo dn mp mq mr dp ms ld mt mu mv lh mw mx my ll mz na nb nc bi translated">***更新***</h2><p id="6156" class="pw-post-body-paragraph ku kv it kw b kx nd ju kz la ne jx lc ld nf lf lg lh ng lj lk ll nh ln lo lp im bi translated">我为这个项目<a class="ae ni" href="https://github.com/whittlem/pycryptobot" rel="noopener ugc nofollow" target="_blank">创建了一个Git库，你可以在这里找到它</a>。请注意，自从写了这篇文章，我已经把上面的代码改成了面向对象的。上面的代码现在将作为模型运行，例如:</p><pre class="kj kk kl km gt nj nk nl nm aw nn bi"><span id="4d0e" class="mk ml it nk b gy no np l nq nr">from models.CoinbasePro import CoinbasePro</span><span id="2884" class="mk ml it nk b gy ns np l nq nr">coinbasepro = CoinbasePro()<br/>print (coinbasepro.getDataFrame())<br/>coinbasepro.addMovingAverages()<br/>print (coinbasepro.getDataFrame())<br/>coinbasepro.addMomentumIndicators()<br/>print (coinbasepro.getDataFrame())<br/>coinbasepro.saveCSV()</span></pre><p id="c57d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果你对我如何和为什么这样做感兴趣，请阅读我的后续文章。</p><div class="nt nu gp gr nv nw"><a href="https://whittle.medium.com/object-oriented-programming-oop-in-python-3-3e2d483ff759" rel="noopener follow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd iu gy z fp ob fr fs oc fu fw is bi translated">Python 3中的面向对象编程(OOP)</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">我正在用Python开发一个加密交易机器人。我想创建模拟来测试各种交易…</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">whittle.medium.com</p></div></div><div class="of l"><div class="og l oh oi oj of ok ks nw"/></div></div></a></div><p id="79b6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我希望你觉得这篇文章有趣并且有用。如果您想随时了解情况，请不要忘记关注我，注册我的<a class="ae ni" href="https://whittle.medium.com/subscribe" rel="noopener">电子邮件通知</a>。</p><h1 id="1323" class="ol ml it bd mm om on oo mp op oq or ms jz os ka mv kc ot kd my kf ou kg nb ov bi translated">迈克尔·惠特尔</h1><ul class=""><li id="04d1" class="lr ls it kw b kx nd la ne ld ow lh ox ll oy lp lw lx ly lz bi translated"><strong class="kw iu"> <em class="oz">如果你喜欢这个，请</em> </strong> <a class="ae ni" href="https://whittle.medium.com/" rel="noopener"> <strong class="kw iu"> <em class="oz">跟我上媒</em> </strong> </a></li><li id="436f" class="lr ls it kw b kx ma la mb ld mc lh md ll me lp lw lx ly lz bi translated"><strong class="kw iu"> <em class="oz">更多有趣的文章，请</em> </strong> <a class="ae ni" href="https://medium.com/trading-data-analysis" rel="noopener"> <strong class="kw iu"> <em class="oz">关注我的刊物</em> </strong> </a></li><li id="9379" class="lr ls it kw b kx ma la mb ld mc lh md ll me lp lw lx ly lz bi translated"><strong class="kw iu"> <em class="oz">有兴趣合作吗？</em> </strong> <a class="ae ni" href="https://www.linkedin.com/in/miwhittle/" rel="noopener ugc nofollow" target="_blank"> <strong class="kw iu"> <em class="oz">让我们在LinkedIn上连线</em> </strong> </a></li><li id="f45c" class="lr ls it kw b kx ma la mb ld mc lh md ll me lp lw lx ly lz bi translated"><strong class="kw iu"> <em class="oz">支持我和其他媒体作者</em> </strong> <a class="ae ni" href="https://whittle.medium.com/membership" rel="noopener"> <strong class="kw iu"> <em class="oz">在此报名</em> </strong> </a></li><li id="872e" class="lr ls it kw b kx ma la mb ld mc lh md ll me lp lw lx ly lz bi translated"><strong class="kw iu"> <em class="oz">请别忘了为文章鼓掌:)←谢谢！</em>T47】</strong></li></ul></div></div>    
</body>
</html>