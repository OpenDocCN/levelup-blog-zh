# ç”¨ Python å’Œå¸å®‰å®ç°è‡ªåŠ¨åŠ å¯†äº¤æ˜“

> åŸæ–‡ï¼š<https://levelup.gitconnected.com/automated-crypto-trading-with-python-and-binance-7223b1ad36d8>

## python-å¸å®‰ç®€ä»‹

**å…è´£å£°æ˜**:æˆ‘ä¸é¼“åŠ±äººä»¬äº¤æ˜“åŠ å¯†è´§å¸ï¼Œä¹Ÿä¸å¯¹ç”±æ­¤é€ æˆçš„æŸå¤±æ‰¿æ‹…ä»»ä½•è´£ä»»ã€‚äº‹å®ä¸Šï¼Œæˆ‘å¯¹é«˜é£é™©æŠ•èµ„æŠ±æœ‰ç›¸å½“ç¨‹åº¦çš„æ€€ç–‘ï¼Œå°¤å…¶æ˜¯åŠ å¯†è´§å¸ã€‚å½“ç„¶ï¼Œç›ˆåˆ©æ˜¯å¯èƒ½çš„ï¼Œä½†ä½ çš„èµ„äº§ä¹Ÿä¼šå®Œå…¨äºæŸã€‚

![](img/4efbf6249b854a4c60f4c1593704aba5.png)

[åæŸ¥çº³æ‹‰](https://unsplash.com/@kanchanara?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)åœ¨ [Unsplash](https://unsplash.com/s/photos/binance?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) ä¸Šçš„ç…§ç‰‡

ç„¶è€Œï¼Œå¦‚æœä½ ä»ç„¶å¯¹è¿™ä¸ªè¯é¢˜æ„Ÿå…´è¶£ï¼Œç‰¹åˆ«æ˜¯å¯¹ Python å’Œå¸å®‰çš„è‡ªåŠ¨åŒ–äº¤æ˜“ï¼Œè¿™ç¯‡æ–‡ç« åº”è¯¥åˆ†äº«ä¸€äº›è§è§£ã€‚

# å¸å®‰

è¿™ç¯‡æ–‡ç« æ¶µç›–äº†å¸å®‰çš„ Python API çš„ç”¨æ³•ã€‚[å¸å®‰](https://www.binance.com/en)å¯ä»¥è¯´æ˜¯å…¨çƒæœ€å¤§çš„åŠ å¯†è´§å¸äº¤æ˜“æ‰€ä¹‹ä¸€ã€‚å®ƒçš„ä¸€äº›ä¼˜ç‚¹æ˜¯ä½¿ç”¨ç®€å•(åŒ…æ‹¬è‡ªåŠ¨åŒ–)ï¼Œä»¥åŠç›¸å¯¹è¾ƒä½çš„äº¤æ˜“è´¹ç”¨(1%)ã€‚å½“ç„¶ä¹Ÿæœ‰å…¶ä»–çš„ï¼Œä¹Ÿæä¾›ç¼–ç¨‹è®¿é—®çš„ APIï¼Œä½ åº”è¯¥é€‰æ‹©æœ€é€‚åˆä½ çš„â€”â€”ä½†æ˜¯è¿™ç¯‡æ–‡ç« ä¸å¸å®‰å’Œ Python æœ‰å…³ã€‚

å¦‚æœä½ åˆšåˆ°å¸å®‰ï¼Œè¯·éšæ—¶ä½¿ç”¨æˆ‘çš„[æ¨èé“¾æ¥](https://www.binance.com/en-GB/activity/referral-entry/CPA?fromActivityPage=true&ref=CPA_008DHX4MEN)æ³¨å†Œï¼Œè¿™æ ·å¯¹æ¯ä¸ªäººéƒ½æœ‰å¥½å¤„ã€‚

# API è®¾ç½®

å¯¹äº API çš„é€‰æ‹©ï¼Œä¹Ÿæœ‰å‡ ä¸ªé€‰é¡¹â€”â€”è¿™é‡Œæˆ‘ä»¬è®¨è®º[python-å¸å®‰](https://python-binance.readthedocs.io/en/latest/)ï¼Œè¿™å¯èƒ½æ˜¯æœ€å¸¸ç”¨çš„ã€‚

è¦å®‰è£…ï¼Œè¯·è¿è¡Œ:

```
pip install python-binance
```

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¿…é¡»åˆ›å»ºä¸€ä¸ª API å¯†é’¥ã€‚ä¸ºæ­¤ï¼Œè¯·ç™»å½•å¸å®‰ï¼Œç‚¹å‡»æ‚¨çš„ä¸ªäººèµ„æ–™å›¾æ ‡ï¼Œç„¶åé€‰æ‹©â€œAPI ç®¡ç†â€ã€‚ç„¶åï¼Œé€‰æ‹©â€œåˆ›å»º APIâ€å¹¶å®Œæˆå®‰å…¨é—®é¢˜ã€‚

è¯·æ³¨æ„æ˜¾ç¤ºçš„ **API å¯†é’¥**å’Œ**å¯†é’¥** â€”å½“å¯¼èˆªç¦»å¼€è¯¥ç«™ç‚¹æ—¶ï¼Œè¯¥å¯†é’¥å°†ä¸å†å¯è§ã€‚ä¸ºäº†èƒ½å¤Ÿåœ¨å³å°†åˆ°æ¥çš„åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨è¯¥é”®ï¼Œé€‰æ‹©â€œç¼–è¾‘æƒé™â€ï¼Œç„¶ååˆ‡æ¢â€œå¯ç”¨ç°è´§&ä¿è¯é‡‘äº¤æ˜“â€(ä»¥åŠæ‚¨æƒ³åˆ°çš„ä»»ä½•å…¶ä»–å¯èƒ½çš„ç”¨ä¾‹)ã€‚ä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯:è¿™å°†å¯†é’¥è®¾ç½®ä¸ºâ€œlive â€,æ‹¥æœ‰å®ƒçš„æ¯ä¸ªäººéƒ½å¯ä»¥ç”¨ä½ çš„è´¦æˆ·æ‰§è¡Œä»»æ„äº¤æ˜“ã€‚

ç®¡ç†é”®è€Œä¸æŠŠå®ƒä»¬ç²˜è´´åˆ°ä»£ç ä¸­(å¹¶æŠŠå®ƒä»¬æäº¤ç»™ gitâ€¦â€¦)çš„ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨ç¯å¢ƒå˜é‡ã€‚ä¸ºæ­¤(åœ¨ Linux ä¸‹)ï¼Œæ‰§è¡Œ

```
echo â€˜export binance_api={API Key}â€™ >> ~/.bashrcecho â€˜export binance_secret={Secret Key}â€™ >> ~/.bashrc
```

å¹¶é‡æ–°åŠ è½½æ‚¨çš„ç»ˆç«¯ã€‚

# API ç”¨æ³•

é¦–å…ˆï¼Œæˆ‘ä»¬åˆå§‹åŒ–å¸å®‰å®¢æˆ·ç«¯:

```
api_key = os.environ.get(â€˜binance_apiâ€™) api_secret = os.environ.get(â€˜binance_secretâ€™) client = Client(api_key, api_secret)
```

è®©æˆ‘ä»¬ä»æŸ¥è¯¢æˆ‘ä»¬æ‹¥æœ‰çš„ BTC(æ¯”ç‰¹å¸)æ•°é‡å¼€å§‹:

```
client.get_asset_balance(asset=â€™BTCâ€™)[â€˜freeâ€™]
```

è‡ªç„¶ï¼Œç”¨ä»»ä½•å…¶ä»–æ ‡è®°æ›¿æ¢â€œBTCâ€éƒ½ä¼šè¿”å›ç›¸åº”çš„å€¼ã€‚

è¦è¯¢é—®ä»¤ç‰Œçš„å½“å‰ä»·æ ¼(åœ¨ USDT)ï¼Œè¯·è¿è¡Œ:

```
client.get_symbol_ticker(symbol=â€™BTCUSDTâ€™)[â€˜priceâ€™]
```

ç°åœ¨è®©æˆ‘ä»¬æ¥çœ‹çœ‹è´­ä¹°/é”€å”®å¯†ç :

åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬åªä½¿ç”¨[å¸‚ä»·è®¢å•](https://www.schwab.com/learn/story/3-order-types-market-limit-and-stop-orders#:~:text=A%20market%20order%20is%20an,to%20execute%20the%20trade%20immediately.)(å³åœ¨ç»™å®šå¸‚ä»·ä¹°å…¥/å–å‡ºçš„è®¢å•)ï¼Œå¹¶å°†é«˜çº§è®¢å•ç±»å‹ç•™ç»™è¯»è€…ã€‚

è¦è´­ä¹° 0.01 BNBï¼Œè¯·æ‰§è¡Œä»¥ä¸‹æ“ä½œ:

```
buy_order = self.client.order_market_buy(symbol=â€˜BNBUSDTâ€™, quantity=0.01)
```

`buy_order`ç„¶ååŒ…å«ä¸€ä¸ªè®¢å•æ‘˜è¦ã€‚

ç›¸åï¼Œè¦å–å‡ºä¹‹å‰ä¹°å…¥çš„ BNBï¼Œè¿è¡Œ:

```
sell_order = self.client.order_market_sell(symbol=â€˜BNBUSDTâ€™, quantity=sell_quantity)
```

è¯·æ³¨æ„ï¼Œé™¤éä½ éå¸¸å¹¸è¿ï¼Œä»·æ ¼ä¸Šæ¶¨å¾ˆå¿«ï¼Œå¦åˆ™è¿™ä¸¤è¡Œä»£ç ä¸ä¼šåœ¨ä¸€ä¸ªç©ºè´¦æˆ·ä¸Šç›¸ç»§æ‰§è¡Œï¼Œå› ä¸ºå¸å®‰æ”¶å– 1%çš„äº¤æ˜“è´¹ã€‚

è¿›ä¸€æ­¥å€¼å¾—å¼ºè°ƒçš„æ˜¯ï¼Œç¡¬å¸ä¸èƒ½ä»¥ä»»æ„ç²¾åº¦è¿›è¡Œäº¤æ˜“â€”â€”è¿™é‡Œçš„å…³é”®æœ¯è¯­æ˜¯*ç²¾åº¦*å’Œ*æ‰¹é‡*ï¼Œä¾‹å¦‚å¯ä»¥é€šè¿‡`[client.get_exchange_info()](https://python-binance.readthedocs.io/en/latest/binance.html#binance.client.Client.get_exchange_info)`è¿›è¡ŒæŸ¥è¯¢ã€‚

æœ€åï¼Œè®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•ä½¿ç”¨`get_historical_klines()`æŸ¥è¯¢å†å²å¸‚åœºæ•°æ®ã€‚æ­¤å‡½æ•°å¯ç”¨äºä¸åŒçš„å‚æ•°å’Œä¸åŒçš„æ–¹å¼â€”ä»¥ä¸‹è¿”å› ETH æœ€è¿‘ 7 å¤©çš„å¸‚åœºä¿¡æ¯ï¼Œæ¯å¤©æ±‡æ€»ä¸€æ¬¡:

```
klines = client.get_historical_klines(â€œETHUSDTâ€, Client.KLINE_INTERVAL_1DAY, â€œ7 days ago UTCâ€)
```

`klines`ç°åœ¨æ˜¯ä¸€ä¸ªé•¿åº¦ä¸º 7 çš„åˆ—è¡¨ï¼Œä»£è¡¨è¿‡å» 7 å¤©çš„ä¿¡æ¯â€”â€”æ¯ä¸ªè¿™æ ·çš„â€œä¿¡æ¯â€ç”±å¦ä¸€ä¸ªé•¿åº¦ä¸º 12 çš„[åˆ—è¡¨ç»„æˆï¼Œå…¶ä¸­ä¾‹å¦‚å‰ 4 ä¸ªå€¼æ˜¯:*å¼€ç›˜æ—¶é—´*ã€*å¼€ç›˜ä»·*ã€*æœ€é«˜ä»·*å’Œ*æœ€ä½ä»·*ã€‚](https://www.programcreek.com/python/?CodeExample=get+klines)

å¸Œæœ›ä½ å–œæ¬¢è¿™æ¬¡çŸ­é€”æ—…è¡Œâ€”â€”å¦‚æœæ˜¯çš„è¯ï¼Œè¯·å°½å¿«å›æ¥â€”â€”å¦‚æœæœ‰ä»»ä½•é—®é¢˜ï¼Œè¯·è”ç³»æˆ‘ã€‚

# åˆ†çº§ç¼–ç 

æ„Ÿè°¢æ‚¨æˆä¸ºæˆ‘ä»¬ç¤¾åŒºçš„ä¸€å‘˜ï¼åœ¨ä½ ç¦»å¼€ä¹‹å‰:

*   ğŸ‘ä¸ºæ•…äº‹é¼“æŒï¼Œè·Ÿç€ä½œè€…èµ°ğŸ‘‰
*   ğŸ“°æŸ¥çœ‹[å‡çº§ç¼–ç å‡ºç‰ˆç‰©](https://levelup.gitconnected.com/?utm_source=pub&utm_medium=post)ä¸­çš„æ›´å¤šå†…å®¹
*   ğŸ’°å…è´¹ç¼–ç é¢è¯•è¯¾ç¨‹[æŸ¥çœ‹è¯¾ç¨‹](https://skilled.dev/?utm_source=luc&utm_medium=article)
*   ğŸ””å…³æ³¨æˆ‘ä»¬:[Twitter](https://twitter.com/gitconnected)|[LinkedIn](https://www.linkedin.com/company/gitconnected)|[æ—¶äº‹é€šè®¯](https://newsletter.levelup.dev)

ğŸš€ğŸ‘‰ [**åŠ å…¥å‡çº§è¾¾äººé›†ä½“ï¼Œæ‰¾åˆ°ä¸€ä»½æƒŠè‰³çš„å·¥ä½œ**](https://jobs.levelup.dev/talent/welcome?referral=true)