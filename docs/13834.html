<html>
<head>
<title>How to Scrape Websites with PhantomJS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用幻想曲刮网站</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-scrape-websites-with-phantomjs-66c2296547b0?source=collection_archive---------17-----------------------#2022-10-10">https://levelup.gitconnected.com/how-to-scrape-websites-with-phantomjs-66c2296547b0?source=collection_archive---------17-----------------------#2022-10-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="0276" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">了解如何利用无头web浏览器的功能来简化您的web数据收集操作以及完全自动化的替代方案</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/e2959b7ced59470a5061c6e2e5cb200d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gP_WAQdY7jkcPNcaRMoJEA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">图片由光明数据博客提供</figcaption></figure><p id="bdee" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在本文中，我们将讨论:</p><ul class=""><li id="aad8" class="lr ls iq kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated"><strong class="kx ir">揭开幻象的神秘面纱</strong></li><li id="074c" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated"><strong class="kx ir">使用幻想曲进行数据抓取的利与弊</strong></li><li id="bfe9" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated"><strong class="kx ir">一步一步的PhantomJS数据收集指南</strong></li><li id="d94a" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated"><strong class="kx ir">数据自动化:手动抓取的更简单替代方案</strong></li></ul><h1 id="5f49" class="mf mg iq bd mh mi mj mk ml mm mn mo mp jw mq jx mr jz ms ka mt kc mu kd mv mw bi translated">揭开幻象的神秘面纱</h1><p id="c7b3" class="pw-post-body-paragraph kv kw iq kx b ky mx jr la lb my ju ld le mz lg lh li na lk ll lm nb lo lp lq ij bi translated">PhantomJS是一个无头网络浏览器。这意味着没有图形用户界面(GUI)，相反，它只在脚本上运行(使它更精简、更快速，从而更高效)。它可以用来自动化使用JavaScript (JS)的不同任务，比如测试代码或收集数据。</p><p id="18d9" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">对于初学者，我建议首先在CLI中使用“npm”在您的计算机上安装PhantomJS。您可以通过运行以下命令来实现这一点:</p><p id="cdf1" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">npm安装phantomjs -g</p><p id="ccd3" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在' Phantomjs '命令将可供您使用。</p><h1 id="adc4" class="mf mg iq bd mh mi mj mk ml mm mn mo mp jw mq jx mr jz ms ka mt kc mu kd mv mw bi translated">使用幻想曲进行数据爬行的利与弊</h1><p id="4045" class="pw-post-body-paragraph kv kw iq kx b ky mx jr la lb my ju ld le mz lg lh li na lk ll lm nb lo lp lq ij bi translated">PhantomJS有很多优点，包括“无头”,正如我在上面解释的那样，这使得它更快，因为不需要加载图形来测试或检索信息。</p><p id="9d3b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">幻象可以被有效地使用，以便完成:</strong></p><h1 id="d114" class="mf mg iq bd mh mi mj mk ml mm mn mo mp jw mq jx mr jz ms ka mt kc mu kd mv mw bi translated">屏幕捕获</h1><p id="dcbe" class="pw-post-body-paragraph kv kw iq kx b ky mx jr la lb my ju ld le mz lg lh li na lk ll lm nb lo lp lq ij bi translated">PhantomJS可以帮助自动捕捉和保存png、JPEGs甚至gif。该功能使得执行前端用户界面/体验保证变得更加容易。例如，您可以运行命令行:Phantomjs amazon.js，以便收集竞争对手产品列表的图像，或者确保您公司的产品列表正确显示。</p><h1 id="dd9b" class="mf mg iq bd mh mi mj mk ml mm mn mo mp jw mq jx mr jz ms ka mt kc mu kd mv mw bi translated">页面自动化</h1><p id="7854" class="pw-post-body-paragraph kv kw iq kx b ky mx jr la lb my ju ld le mz lg lh li na lk ll lm nb lo lp lq ij bi translated">这是PhantomJS的一个主要优势，因为它帮助开发人员节省了大量时间。通过运行像Phantomjs userAgent.js这样的命令行，开发人员可以编写和检查与特定网页相关的js代码。节省时间的主要优势是这个过程可以自动完成，甚至不需要打开浏览器。</p><h1 id="dee2" class="mf mg iq bd mh mi mj mk ml mm mn mo mp jw mq jx mr jz ms ka mt kc mu kd mv mw bi translated">测试</h1><p id="b38b" class="pw-post-body-paragraph kv kw iq kx b ky mx jr la lb my ju ld le mz lg lh li na lk ll lm nb lo lp lq ij bi translated">在测试网站时，PhantomJS是有利的，因为它简化了过程，就像其他流行的<a class="ae nc" href="https://brightdata.com/blog/how-tos/using-selenium-for-web-scraping" rel="noopener ugc nofollow" target="_blank"> <strong class="kx ir"> web抓取工具，如Selenium </strong> </a>。没有GUI的无头浏览意味着，通过在命令行级别发现和提交错误代码，可以更快地扫描问题。</p><p id="6abc" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">开发人员还<a class="ae nc" href="https://github.com/ariya/phantomjs" rel="noopener ugc nofollow" target="_blank"> <strong class="kx ir">将PhantomJS </strong> </a>与不同类型的持续集成(CI)系统集成，以便在部署之前测试代码。这有助于开发人员实时修复损坏的代码，确保项目运行更加顺畅。</p><h1 id="ec8f" class="mf mg iq bd mh mi mj mk ml mm mn mo mp jw mq jx mr jz ms ka mt kc mu kd mv mw bi translated">网络监控/网络数据收集</h1><p id="88b2" class="pw-post-body-paragraph kv kw iq kx b ky mx jr la lb my ju ld le mz lg lh li na lk ll lm nb lo lp lq ij bi translated">幻像还可以用来监控网络流量/活动。许多开发人员对其编程的方式有助于收集目标数据，例如:</p><ul class=""><li id="1ae7" class="lr ls iq kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated">特定网页的性能</li><li id="5a31" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">当添加/删除代码行时</li><li id="d802" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">股票价格波动数据</li><li id="3d29" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated"><a class="ae nc" href="https://brightdata.com/products/data-collector/website/tiktok" rel="noopener ugc nofollow" target="_blank"> <strong class="kx ir">刮抖音</strong> </a>等网站时的影响者/参与度数据</li></ul><p id="ef71" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">使用幻像的一些缺点包括:</p><ul class=""><li id="35c9" class="lr ls iq kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated">恶意方可以利用它来执行自动攻击(主要是因为它不使用用户界面)</li><li id="912d" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">当涉及到全周期/端到端测试和功能测试时，有时会被证明是棘手的。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nd"><img src="../Images/a7d6c65e17196af12f9db8b441169fb0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IHfoQf42HthsWXs5dyPk2w.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">光明数据博客提供</figcaption></figure><h1 id="df06" class="mf mg iq bd mh mi mj mk ml mm mn mo mp jw mq jx mr jz ms ka mt kc mu kd mv mw bi translated">一步一步的幻想曲数据收集指南</h1><p id="efeb" class="pw-post-body-paragraph kv kw iq kx b ky mx jr la lb my ju ld le mz lg lh li na lk ll lm nb lo lp lq ij bi translated">PhantomJS在NodeJS开发人员中很受欢迎，所以我们带来了一个如何在NodeJS环境中使用它的例子。该示例显示了如何从URL获取HTML内容。</p><h1 id="ea19" class="mf mg iq bd mh mi mj mk ml mm mn mo mp jw mq jx mr jz ms ka mt kc mu kd mv mw bi translated">第一步:安装package.json并安装npm包</h1><p id="2235" class="pw-post-body-paragraph kv kw iq kx b ky mx jr la lb my ju ld le mz lg lh li na lk ll lm nb lo lp lq ij bi translated">创建一个项目文件夹，并在其中创建一个“package.json”文件。</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="ec35" class="nj mg iq nf b gy nk nl l nm nn">{<br/>"name": "phantomjs-example",<br/>"version": "1.0.0",<br/>"title": "PhantomJS Example",<br/>"description": "PhantomJS Example",<br/>"keywords": [<br/>  	"phantom example"<br/>],<br/>"main": "./index.js",<br/>"scripts": {<br/>	"inst": "rm -rf node_modules &amp;&amp; rm package-lock.json &amp;&amp; npm install",<br/>	"dev": "nodemon index.js"<br/>},<br/>"dependencies": {<br/>	"phantom": "^6.3.0"<br/>}<br/>}</span></pre><p id="41c1" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">然后在您的终端中运行这个命令:<strong class="kx ir"> $ npm install </strong>。它将在您的本地项目文件夹“node_modules”中安装Phantom。</p><h1 id="9f9a" class="mf mg iq bd mh mi mj mk ml mm mn mo mp jw mq jx mr jz ms ka mt kc mu kd mv mw bi translated">第二步:创建一个虚幻的JS脚本</h1><p id="64bc" class="pw-post-body-paragraph kv kw iq kx b ky mx jr la lb my ju ld le mz lg lh li na lk ll lm nb lo lp lq ij bi translated">创建JS脚本，并将其命名为“index.js”</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="00dc" class="nj mg iq nf b gy nk nl l nm nn">const phantom = require('phantom');</span><span id="3788" class="nj mg iq nf b gy no nl l nm nn">const main = async () =&gt; {<br/>  const instance = await phantom.create();<br/>  const page = await instance.createPage();<br/>  await page.on('onResourceRequested', function(requestData) {<br/>    console.info('Requesting', requestData.url);<br/>  });</span><span id="ae7e" class="nj mg iq nf b gy no nl l nm nn">  const url = 'https://example.com/'; <br/>  console.log('URL::', url);</span><span id="b651" class="nj mg iq nf b gy no nl l nm nn">  const status = await page.open(url);<br/>  console.log('STATUS::', status);</span><span id="383e" class="nj mg iq nf b gy no nl l nm nn">  const content = await page.property('content');<br/>  console.log('CONTENT::', content);</span><span id="0cb7" class="nj mg iq nf b gy no nl l nm nn">  await instance.exit();<br/>};</span><span id="b014" class="nj mg iq nf b gy no nl l nm nn">main().catch(console.log);</span></pre><h1 id="c9a0" class="mf mg iq bd mh mi mj mk ml mm mn mo mp jw mq jx mr jz ms ka mt kc mu kd mv mw bi translated">第三步:运行JS脚本</h1><p id="5a9c" class="pw-post-body-paragraph kv kw iq kx b ky mx jr la lb my ju ld le mz lg lh li na lk ll lm nb lo lp lq ij bi translated">要启动这个脚本，在您的终端中运行:<strong class="kx ir"> $ node index.js </strong>。结果将是HTML内容。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi np"><img src="../Images/f3aa68e24f5cbf7077db6e20b8814765.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iA9i0BGBHE3lfWHp6xryEg.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">来源:<a class="ae nc" href="https://www.npmjs.com/package/cheerio" rel="noopener ugc nofollow" target="_blank"> <strong class="bd mh"> npmjs </strong> </a></figcaption></figure><h1 id="067c" class="mf mg iq bd mh mi mj mk ml mm mn mo mp jw mq jx mr jz ms ka mt kc mu kd mv mw bi translated">数据自动化:手动web抓取的更简单替代方案</h1><p id="28fa" class="pw-post-body-paragraph kv kw iq kx b ky mx jr la lb my ju ld le mz lg lh li na lk ll lm nb lo lp lq ij bi translated">当谈到<a class="ae nc" rel="noopener ugc nofollow" target="_blank" href="/web-scraping-and-the-art-of-war-5-tools-that-will-help-your-bot-win-c2a3840d8b71"> <strong class="kx ir">大规模收集数据</strong> </a>时，一些公司可能更喜欢使用幻想曲。</p><p id="a0f2" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">其中包括:</p><ol class=""><li id="8122" class="lr ls iq kx b ky kz lb lc le lt li lu lm lv lq nq lx ly lz bi translated">代理服务器:使用代理服务器的网络抓取是有益的，因为它可以让用户大规模收集数据，提交无限数量的并发请求。代理还可以帮助解决目标站点阻塞，如速率限制或基于地理位置的阻塞。在这种情况下，企业可以利用特定国家/城市的移动和住宅IP/设备来路由数据请求，使他们能够检索更准确的面向用户的数据(例如，竞争对手的定价、广告活动和谷歌搜索结果)。</li><li id="2d3f" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq nq lx ly lz bi translated"><strong class="kx ir">现成可用的数据集:</strong> <a class="ae nc" href="https://brightdata.com/products/datasets" rel="noopener ugc nofollow" target="_blank"> <strong class="kx ir">数据集</strong> </a>本质上是已经收集好的‘信息包’，准备交付给算法/团队立即使用。它们通常包括来自目标站点的信息，并从web上的相关站点得到丰富(比如多个供应商和各种电子商务市场中相关类别的产品信息)。数据集还可以定期刷新，以确保所有数据点都是最新的。这里的主要优势是在数据收集行为上投入的时间/资源为零，这意味着可以将更多的时间花在数据分析和为客户创造价值上。</li><li id="3f03" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq nq lx ly lz bi translated"><strong class="kx ir">全自动数据收集器:</strong>Bright Data的数据收集器是一个零代码、零基础设施、可定制的数据收集解决方案。这种工具使公司能够积极参与网络数据收集过程，而不必担心软件/硬件的开发和维护。这三步过程包括选择目标站点、收集时间(实时或预定)、决定输出格式(<strong class="kx ir"> JSON、CSV、HTML或Microsoft Excel </strong>)，以及将数据交付到任何你方便的地方(webhook、电子邮件、亚马逊S3、谷歌云、微软Azure、SFTP或API)。</li></ol></div></div>    
</body>
</html>