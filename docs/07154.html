<html>
<head>
<title>Five stages of RISC pipeline</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">RISC流水线的五个阶段</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/five-stages-of-risc-pipeline-aad0c3eb1233?source=collection_archive---------0-----------------------#2021-01-28">https://levelup.gitconnected.com/five-stages-of-risc-pipeline-aad0c3eb1233?source=collection_archive---------0-----------------------#2021-01-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="38ae" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">获取、解码、执行、存储、写入</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/c2c6857208a715dd00c5ba6d2fdb5026.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TgWqHngwOIdKiV29TSFhsg.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@cookiethepom?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Cookie在<a class="ae kv" href="https://unsplash.com/s/photos/computer?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的Pom </a>拍摄</figcaption></figure><p id="416c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在计算机硬件的早期，精简指令集计算机中央处理器(RISC CPUs)被设计为每个周期执行一条指令，总共五个阶段。这些阶段是:获取、解码、执行、存储和写入。所执行的操作的简单性允许每个指令在一个处理器周期内完成。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="8743" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">取得</h1><p id="1bda" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">在提取阶段，从存储器中提取指令。</p><h2 id="f2e4" class="mw ma iq bd mb mx my dn mf mz na dp mj lf nb nc ml lj nd ne mn ln nf ng mp nh bi translated">译</h2><p id="e2f7" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">在解码阶段，我们解码指令并获取源操作数</p><h2 id="c955" class="mw ma iq bd mb mx my dn mf mz na dp mj lf nb nc ml lj nd ne mn ln nf ng mp nh bi translated">执行</h2><p id="54ea" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">在执行阶段，计算机执行指令指定的操作</p><h2 id="b216" class="mw ma iq bd mb mx my dn mf mz na dp mj lf nb nc ml lj nd ne mn ln nf ng mp nh bi translated">记忆</h2><p id="a678" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">如果有任何需要访问的数据，都在内存阶段完成</p><h2 id="c99f" class="mw ma iq bd mb mx my dn mf mz na dp mj lf nb nc ml lj nd ne mn ln nf ng mp nh bi translated">写</h2><p id="4599" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">如果我们需要将结果存储在目标位置，则在写回阶段完成，</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="a03f" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">代码类型</h1><p id="b359" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">我们可以编写五种类型的代码。我们可以编写加载类型、存储类型、分支、跳转或R类型的代码。每种类型的代码执行RISC流水线的不同阶段。</p><h2 id="1d58" class="mw ma iq bd mb mx my dn mf mz na dp mj lf nb nc ml lj nd ne mn ln nf ng mp nh bi translated">负载类型</h2><p id="bb3c" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">管道:获取、解码、执行、存储、写入</p><pre class="kg kh ki kj gt ni nj nk nl aw nm bi"><span id="a06c" class="mw ma iq nj b gy nn no l np nq">R1 &lt;- [1]</span></pre><p id="01c6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">上面的代码是一个加载类型。1的地址正被加载到R1。加载类型包括RISC流水线的所有五个阶段。加载代码需要获取、解码、执行、存储和写入才能完成。</p><h2 id="b6e6" class="mw ma iq bd mb mx my dn mf mz na dp mj lf nb nc ml lj nd ne mn ln nf ng mp nh bi translated">商店类型</h2><p id="615c" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">流水线:获取、解码、执行、内存</p><pre class="kg kh ki kj gt ni nj nk nl aw nm bi"><span id="85f7" class="mw ma iq nj b gy nn no l np nq">[A] &lt;- R1</span></pre><p id="67f7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">上面的代码是一个商店类型。R1被存储在地址a中。存储类型代码只需要获取、解码、执行和内存来执行。我们不需要写。</p><h2 id="4e9c" class="mw ma iq bd mb mx my dn mf mz na dp mj lf nb nc ml lj nd ne mn ln nf ng mp nh bi translated">分支类型</h2><p id="c651" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">流水线:获取、解码、执行</p><pre class="kg kh ki kj gt ni nj nk nl aw nm bi"><span id="8233" class="mw ma iq nj b gy nn no l np nq">BNE R1, R2, Loop</span></pre><p id="4c71" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">上面的代码是一个分支类型。上面的代码检查R1是否不等于R2。如果它们不相等，代码将进入循环。如果它们相等，就不会进入循环。</p><p id="d80d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">分支类型代码需要获取、解码和执行才能运行。</p><h2 id="feeb" class="mw ma iq bd mb mx my dn mf mz na dp mj lf nb nc ml lj nd ne mn ln nf ng mp nh bi translated">跳跃</h2><p id="1312" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">管道:提取、解码</p><pre class="kg kh ki kj gt ni nj nk nl aw nm bi"><span id="bfa6" class="mw ma iq nj b gy nn no l np nq">JMP Loop</span></pre><p id="1b54" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">上述代码是一个JMP代码。跳转不同于分支类型的代码，因为跳转不检查任何条件，而是直接跳转到代码中指定的位置。</p><p id="afbf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">跳转类型需要获取和解码才能运行。</p><h2 id="ca93" class="mw ma iq bd mb mx my dn mf mz na dp mj lf nb nc ml lj nd ne mn ln nf ng mp nh bi translated">ALU-R型</h2><p id="a9a4" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">流水线:获取、解码、执行、写入</p><pre class="kg kh ki kj gt ni nj nk nl aw nm bi"><span id="a0b6" class="mw ma iq nj b gy nn no l np nq">R1 &lt;- R2 + R3</span></pre><p id="378f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">上面的代码是一个ALU或R类型。操作数R2和R3被相加并存储在R1。这使用了流水线的4个阶段，提取、解码、执行和只写。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="28eb" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">代码示例</h1><p id="aa4a" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">假设我们有以下3行代码:</p><pre class="kg kh ki kj gt ni nj nk nl aw nm bi"><span id="7967" class="mw ma iq nj b gy nn no l np nq">R1 &lt;- [1]<br/>R2 &lt;- [2]<br/>R3 &lt;- [3]</span></pre><p id="de84" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在上面的代码中，我们执行三种负载类型。在第一行，我们将地址1存储到R1，在第二行，我们将地址2存储到R2，最后在第三行，我们将地址3存储到R3。</p><p id="7c0a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">RISC流水线看起来像这样:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/cf5688dde05c61a8b3c655059e0ea02a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kQO__iYfMWQf7_agWCtTWQ.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">RISC管道示例</figcaption></figure><p id="fe81" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们知道加载类型执行RISC流水线的所有5个阶段，也就是，获取、解码、执行、存储和写入。</p><p id="548b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">上图显示了所有加载类型的示例三行代码将如何执行。在第1步中，第一行将执行第一步，即提取。然后在步骤2中，当第1行处于解码阶段时，第2行将开始提取，依此类推。这3行代码需要经过7个步骤才能完成这3行代码的所有RISC管道。</p></div></div>    
</body>
</html>