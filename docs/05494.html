<html>
<head>
<title>Level Up Your JavaScript Arrays With These Four Building-Block Functions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用这四个构建块函数提升您的JavaScript数组</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/level-up-your-javascript-arrays-with-these-four-building-block-functions-d01ca0971bcf?source=collection_archive---------15-----------------------#2020-09-02">https://levelup.gitconnected.com/level-up-your-javascript-arrays-with-these-four-building-block-functions-d01ca0971bcf?source=collection_archive---------15-----------------------#2020-09-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8b1d" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用Map、Reduce、Filter和Find，您可以编写更好的JavaScript代码。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/f057845c6ada6cd6f17bb02b83986991.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*J5I7yK8NGx_kn58n"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@jamesponddotco?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">詹姆斯·庞德</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</figcaption></figure><p id="edc1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">JavaScript中的数组有些特殊，因为它们利用了JS的原型特性，并提供了一种方便的方法来直接从对数组实例的引用运行函数。</p><p id="5789" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我相信在你的代码中尽可能多地使用这四个功能不仅会让你更有效率，而且会让你在团队中更受欢迎，通常会对你所做的事情更感兴趣。</p><p id="c9c7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所有这四个原型函数都接受一个“回调”函数，这是一个纯粹的函数，接受参数并必须将预期的东西返回给调用者，无论是像<code class="fe lv lw lx ly b">true</code>或<code class="fe lv lw lx ly b">false</code>这样的<code class="fe lv lw lx ly b">boolean</code>，还是像<code class="fe lv lw lx ly b">String</code>、<code class="fe lv lw lx ly b">Object</code>、<code class="fe lv lw lx ly b">Array</code>或<code class="fe lv lw lx ly b">Number</code>这样的类型。</p><p id="3ebd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们来看看这些有用的数组函数，并学习使我们的代码更加简洁<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/concise-code-meet-the-new-assignment-operators-in-javascript-7d39137eb42e"/>！</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><h1 id="6b24" class="mg mh it bd mi mj mk ml mm mn mo mp mq jz mr ka ms kc mt kd mu kf mv kg mw mx bi translated">map-array . prototype . map()</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi my"><img src="../Images/98ca2a451829c5f883ffd1cb859a862b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*u0MaRIweMyNpnI6n"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@louishansel?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Louis Hansel @ shotsoflouis</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="d07e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">map</code>是大多数编程语言的构建模块，并且绝对是一个很棒的<code class="fe lv lw lx ly b">Array</code>函数。</p><p id="9e90" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，这一行代码将遍历<code class="fe lv lw lx ly b">ANIMALS</code>并创建一个<code class="fe lv lw lx ly b">Strings</code>数组，其中包含它们的名字和动物类型:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="6ee9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您正在使用React或Vue这样的前端框架，您可能已经熟悉了<code class="fe lv lw lx ly b">map</code>,在这些框架中，您经常需要遍历一组数据来生成HTML:</p><pre class="kj kk kl km gt nb ly nc nd aw ne bi"><span id="934b" class="nf mh it ly b gy ng nh l ni nj">&lt;ul&gt;<br/>    {ANIMALS.map((animal) =&gt;<br/>        &lt;li&gt;<br/>            {animal.name} ({animal.type})<br/>        &lt;/li&gt;<br/>    )}<br/>&lt;/ul&gt;<br/>​<br/>// produces:<br/>&lt;ul&gt;<br/>    &lt;li&gt;Spot (dog)&lt;/li&gt;<br/>    &lt;li&gt;Fluffy (cat)&lt;/li&gt;<br/>    &lt;li&gt;Peppy (bird)&lt;/li&gt;<br/>    &lt;li&gt;Lizzy (lizard)&lt;/li&gt;<br/>&lt;/ul&gt;</span></pre><p id="084d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">map</code>函数对于<em class="nk">将X的数组转换成Y的数组</em>非常有用。</p><h1 id="c4a9" class="mg mh it bd mi mj nl ml mm mn nm mp mq jz nn ka ms kc no kd mu kf np kg mw mx bi translated">reduce-array . prototype . reduce()</h1><p id="13a7" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated"><code class="fe lv lw lx ly b">reduce</code>功能的用法与<code class="fe lv lw lx ly b">map</code>相似，但更进一步。</p><p id="ed54" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">代替<em class="nk">将X的数组转换成Y的数组</em> , <code class="fe lv lw lx ly b">reduce</code>被设计成<em class="nk">将X的数组转换成Y的数组</em>，意思是<strong class="lb iu">你不仅仅局限于做一个新的数组</strong>。</p><p id="36af" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以把一个数组变成<code class="fe lv lw lx ly b">Objects</code>、<code class="fe lv lw lx ly b">Numbers</code>或者<code class="fe lv lw lx ly b">Strings</code>。这里我们合计一下所有<code class="fe lv lw lx ly b">ANIMALS</code>的总重量:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="c402" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">reduce</code>是一个非常强大的数组函数，它足够灵活，可以产生和<code class="fe lv lw lx ly b">map</code>一样的效果。看看这个<code class="fe lv lw lx ly b">reduce</code>版本的<code class="fe lv lw lx ly b">map</code>函数:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><h1 id="515d" class="mg mh it bd mi mj nl ml mm mn nm mp mq jz nn ka ms kc no kd mu kf np kg mw mx bi translated">Filter — Array.prototype.filter()</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nv"><img src="../Images/03acfccd811b9bbae76c09e2daaec0b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Y7FnSgZY2bdNJPvn"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@calebscamera?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Caleb Dow </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="270b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">filter</code>工作起来就像它听起来一样，并且只从一个数组中检索那些从你的回调函数中产生真值的项目。在这里，我们寻找拥有柔软皮毛或羽毛的<code class="fe lv lw lx ly b">ANIMALS</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="535e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是另一个例子，用数学比较。只要函数返回一个true/falsy值，它就会按预期工作。这里我们只选择重量小于10磅的<code class="fe lv lw lx ly b">ANIMALS</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><h1 id="ea0f" class="mg mh it bd mi mj nl ml mm mn nm mp mq jz nn ka ms kc no kd mu kf np kg mw mx bi translated">Find — Array.prototype.find()</h1><p id="7e3e" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">最后，我们有<code class="fe lv lw lx ly b">find</code>，它帮助你使用<code class="fe lv lw lx ly b">callback</code>搜索一个数组。这非常有用，因为它提供了一个接口来搜索一个数组，该数组还可以与一个名为<code class="fe lv lw lx ly b">findIndex</code>的姐妹函数一起工作。</p><p id="c1ff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">只要您的函数返回真值，返回的第一个<strong class="lb iu">真值将退出<code class="fe lv lw lx ly b">find</code>搜索并从数组返回该行。</strong></p><p id="98fc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这个例子中，我们<code class="fe lv lw lx ly b">find</code>一只名叫斑点的狗:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><h1 id="c43b" class="mg mh it bd mi mj nl ml mm mn nm mp mq jz nn ka ms kc no kd mu kf np kg mw mx bi translated">组合数组函数</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/e9fabceecdac622c4a91384f5205efaa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2a-8OiscwqiQe1WX"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@ayahya09?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">阿里·叶海亚</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="6a91" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在您已经掌握了这四个构建模块功能，我们可以将它们结合在一起:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="1751" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">上面，我们首先<code class="fe lv lw lx ly b">map</code>超过我们的<code class="fe lv lw lx ly b">ANIMALS</code>并创建一个新的对象，它们的<strong class="lb iu">重量</strong>和<strong class="lb iu">类型</strong>，也借此机会喂养每一个。我们给它们喂食，它们可能会在进食后体重增加1%——这只是猜测。</p><p id="b34f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后我们只过滤掉有皮毛或羽毛的动物，注意我们在喂食后做了这个<em class="nk">，因为我们不想让蜥蜴Lizzy挨饿🦎：</em></p><p id="6787" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">.filter((animal) =&gt; animal.type !== 'lizard') // only soft</code></p><p id="6e33" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后我们过滤掉超过一定重量限制的动物，这就去除了狗的条目🐕：</p><p id="b0d7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">.filter((animal) =&gt; animal.weight &lt; 10) // only light (after eating)</code></p><p id="cc60" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，我们将剩余的动物行简化为一个值，一个代表它们体重的数字🐈🐦：</p><p id="3d08" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b">.reduce((weightSum, animal) =&gt; weightSum + animal.weight, 0); // get total weight</code></p><p id="7a55" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">多亏了数组原型和JavaScript魔法，所有这些都可以轻松、完美地链接在一起。</p></div></div>    
</body>
</html>