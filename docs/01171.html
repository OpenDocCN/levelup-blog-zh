<html>
<head>
<title>How to Add Geolocation to a Vue.js App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何将地理定位添加到Vue.js应用程序</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-add-geolocation-to-a-vue-js-app-14716b90d87b?source=collection_archive---------0-----------------------#2019-11-22">https://levelup.gitconnected.com/how-to-add-geolocation-to-a-vue-js-app-14716b90d87b?source=collection_archive---------0-----------------------#2019-11-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="3592" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用地理定位浏览器API和Vue在您的应用程序中获取用户位置</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/f46eb99aabd51118c6069403b4536a7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1LG-GIviReK4grmYUlmveg.jpeg"/></div></div></figure><p id="87c1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">许多应用程序希望提供基于用户位置的体验。这就是HTML地理定位API的用武之地。您可以很容易地使用它来获取当前设备的位置。</p><p id="00db" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">为了使用普通的JavaScript在浏览器中获得设备的位置，我们编写:</p><pre class="kj kk kl km gt lq lr ls lt aw lu bi"><span id="9451" class="lv lw it lr b gy lx ly l lz ma">if (navigator.geolocation) {<br/>  navigator.geolocation.getCurrentPosition(getPosition);<br/>}</span><span id="0c89" class="lv lw it lr b gy mb ly l lz ma">function getPosition(position) {<br/>  console.log(position.coords.latitude, position.coords.longitude);<br/>}</span></pre><p id="aa65" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如您所见，获取纬度和经度非常容易。</p><p id="ddef" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们还可以轻松地将地理定位添加到任何Vue.js应用程序中。<a class="ae mc" href="https://www.npmjs.com/package/vue-browser-geolocation" rel="noopener ugc nofollow" target="_blank"> vue-browser-geolocation </a>包是一个很好的插件，可以为您的应用程序添加地理定位功能。它提供了一个基于promise的API来获取设备的位置，所以我们可以很容易地使用<code class="fe md me mf lr b">async</code>和<code class="fe md me mf lr b">await</code>来获取这个包的位置。</p><h2 id="fee8" class="lv lw it bd mg mh mi dn mj mk ml dp mm ld mn mo mp lh mq mr ms ll mt mu mv mw bi translated">入门指南</h2><p id="65a0" class="pw-post-body-paragraph ku kv it kw b kx mx ju kz la my jx lc ld mz lf lg lh na lj lk ll nb ln lo lp im bi translated">在本文中，我们将构建一个应用程序，从<a class="ae mc" href="https://represent.opennorth.ca/" rel="noopener ugc nofollow" target="_blank">代表公民信息API </a>获取您所在地区的加拿大政治家列表。</p><p id="7cc5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们将使用vue-browser-geolocation包来获取位置，然后使用API从API获取项目列表。我们将获得本地区的政治家列表、本地区的选区边界，以及从列表中选择的给定立法机构的代表列表。</p><p id="2c4f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">首先，我们运行Vue CLI来创建项目。运行<code class="fe md me mf lr b">npx @vue/cli create politicians-app</code>创建应用程序。在向导中，我们选择“手动选择功能”，然后选择包括Babel和Vue路由器。</p><p id="29ff" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">接下来，我们安装一些构建应用程序所需的包。我们将使用Axios进行HTTP请求，使用BootstrapVue进行样式设计，使用Vue Avatar显示政治家的头像图片，使用vue-browser-geolocation获取设备的位置。运行<code class="fe md me mf lr b">npm i axios bootstrap-vue vue-avatar vue-browser-geolocation</code>安装所有软件包。</p><h2 id="9072" class="lv lw it bd mg mh mi dn mj mk ml dp mm ld mn mo mp lh mq mr ms ll mt mu mv mw bi translated">发出API请求</h2><p id="2d4e" class="pw-post-body-paragraph ku kv it kw b kx mx ju kz la my jx lc ld mz lf lg lh na lj lk ll nb ln lo lp im bi translated">现在我们可以开始编写应用程序了。我们首先创建一个mixin，用于发出在组件中使用的HTTP请求。在<code class="fe md me mf lr b">src</code>文件夹中创建一个<code class="fe md me mf lr b">mixins</code>文件夹，在<code class="fe md me mf lr b">mixins</code>文件夹中创建<code class="fe md me mf lr b">requestsMixin.js</code>。然后，我们将以下内容添加到文件中:</p><pre class="kj kk kl km gt lq lr ls lt aw lu bi"><span id="5dc4" class="lv lw it lr b gy lx ly l lz ma">const axios = require("axios");<br/>const APIURL = "<a class="ae mc" href="https://represent.opennorth.ca" rel="noopener ugc nofollow" target="_blank">https://represent.opennorth.ca</a>";</span><span id="e2b1" class="lv lw it lr b gy mb ly l lz ma">export const requestsMixin = {<br/>  methods: {<br/>    getRepresentatives(lat, lng) {<br/>      return axios.get(`${APIURL}/representatives/?point=${lat},${lng}`);<br/>    },</span><span id="dd1b" class="lv lw it lr b gy mb ly l lz ma">    getBoundaries(lat, lng) {<br/>      return axios.get(`${APIURL}/boundaries/?contains=${lat},${lng}`);<br/>    },</span><span id="879e" class="lv lw it lr b gy mb ly l lz ma">    getRepresentativeSetsRepresentatives(set, lat, lng) {<br/>      return axios.get(<br/>        `${APIURL}/representatives/${set}/?point=${lat},${lng}`<br/>      );<br/>    },</span><span id="b2bd" class="lv lw it lr b gy mb ly l lz ma">    getRepresentativeSets() {<br/>      return axios.get(`${APIURL}/representative-sets/?offset=0&amp;limit=200`);<br/>    }<br/>  }<br/>};</span></pre><p id="8e6d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们使用代表公民信息API来按位置获取代表和边界，还可以获取加拿大立法机构的列表。终点的完整列表在<a class="ae mc" href="https://represent.opennorth.ca/api/#representativeset" rel="noopener ugc nofollow" target="_blank">https://represent.opennorth.ca/api/#representativeset</a>。</p><h2 id="0d93" class="lv lw it bd mg mh mi dn mj mk ml dp mm ld mn mo mp lh mq mr ms ll mt mu mv mw bi translated">获取地理位置</h2><p id="6fb2" class="pw-post-body-paragraph ku kv it kw b kx mx ju kz la my jx lc ld mz lf lg lh na lj lk ll nb ln lo lp im bi translated">接下来创建显示数据的页面。在<code class="fe md me mf lr b">views</code>文件夹中，创建<code class="fe md me mf lr b">Boundaries.vue</code>并添加:</p><pre class="kj kk kl km gt lq lr ls lt aw lu bi"><span id="7633" class="lv lw it lr b gy lx ly l lz ma">&lt;template&gt;<br/>  &lt;div class="page"&gt;<br/>    &lt;h1 class="text-center"&gt;Your Constituent Boundary&lt;/h1&gt;<br/>    &lt;template v-if="noLocation"&gt;<br/>      &lt;h2 class="text-center"&gt;Enable geolocation to see list of boundaries&lt;/h2&gt;<br/>    &lt;/template&gt;<br/>    &lt;template v-if="!noLocation"&gt;<br/>      &lt;b-card v-for="(b, i) in boundaries" :key="i" class="card"&gt;<br/>        &lt;b-card-title&gt;<br/>          &lt;h2&gt;{{b.name}}&lt;/h2&gt;<br/>        &lt;/b-card-title&gt;</span><span id="e776" class="lv lw it lr b gy mb ly l lz ma">        &lt;b-card-text&gt;<br/>          &lt;p&gt;<br/>            &lt;b&gt;Boundary Set Name:&lt;/b&gt;<br/>            {{b.boundary_set_name}}<br/>          &lt;/p&gt;<br/>        &lt;/b-card-text&gt;<br/>      &lt;/b-card&gt;<br/>    &lt;/template&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="342a" class="lv lw it lr b gy mb ly l lz ma">&lt;script&gt;<br/>import { requestsMixin } from "@/mixins/requestsMixin";</span><span id="c77c" class="lv lw it lr b gy mb ly l lz ma">export default {<br/>  name: "boundaries",<br/>  mixins: [requestsMixin],<br/>  data() {<br/>    return {<br/>      boundaries: [],<br/>      noLocation: true<br/>    };<br/>  },<br/>  beforeMount() {<br/>    this.getBounds();<br/>  },<br/>  methods: {<br/>    async getBounds() {<br/>      try {<br/>        const coordinates = await this.$getLocation({<br/>          enableHighAccuracy: true<br/>        });<br/>        const { lat, lng } = coordinates;<br/>        const response = await this.getBoundaries(lat, lng);<br/>        this.boundaries = response.data.objects;<br/>        this.noLocation = false;<br/>      } catch (error) {<br/>        this.noLocation = true;<br/>      }<br/>    }<br/>  }<br/>};<br/>&lt;/script&gt;</span><span id="da8c" class="lv lw it lr b gy mb ly l lz ma">&lt;/script&gt;</span></pre><p id="646b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在该页面中，我们通过vue浏览器地理定位包获得了用户设备当前所在位置的选区边界。<code class="fe md me mf lr b">this.$getLocation</code>中的<code class="fe md me mf lr b">getBounds</code>功能由软件包提供。当用户启用地理定位时，promise解析为具有纬度和经度的对象。我们用一个<code class="fe md me mf lr b">try...catch</code>包装代码，以防它被禁用。如果地理定位被禁用，我们会显示一条消息，让用户知道他们必须启用地理定位才能看到数据。</p><p id="95ca" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果地理定位被启用，那么<code class="fe md me mf lr b">this.getBoundaries</code>将被调用。该函数由我们之前创建的<code class="fe md me mf lr b">requestsMixin</code>提供。我们将它包含在这个组件的<code class="fe md me mf lr b">mixin</code>属性中。这些物品显示在BootstrapVue卡中。</p><p id="fa9b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">接下来，我们用以下代码替换<code class="fe md me mf lr b">Home.vue</code>中的代码:</p><pre class="kj kk kl km gt lq lr ls lt aw lu bi"><span id="8657" class="lv lw it lr b gy lx ly l lz ma">&lt;template&gt;<br/>  &lt;div class="page"&gt;<br/>    &lt;h1 class="text-center"&gt;Your Local Representatives&lt;/h1&gt;<br/>    &lt;template v-if="noLocation"&gt;<br/>      &lt;h2 class="text-center"&gt;Enable geolocation to see list of representatives&lt;/h2&gt;<br/>    &lt;/template&gt;<br/>    &lt;template v-if="!noLocation"&gt;<br/>      &lt;b-card v-for="(r, i) in reps" :key="i" class="card"&gt;<br/>        &lt;b-card-title&gt;<br/>          &lt;h2&gt;<br/>            &lt;avatar :src="r.photo_url" :inline="true"&gt;&lt;/avatar&gt;<br/>            &lt;span class="title"&gt;{{r.name}}&lt;/span&gt;<br/>          &lt;/h2&gt;<br/>        &lt;/b-card-title&gt;</span><span id="645f" class="lv lw it lr b gy mb ly l lz ma">        &lt;b-card-text&gt;<br/>          &lt;h5&gt;Offices:&lt;/h5&gt;<br/>          &lt;div v-for="(o,i) in r.offices" :key="i"&gt;<br/>            &lt;p&gt;<br/>              &lt;b&gt;Address:&lt;/b&gt;<br/>              {{o.postal}}<br/>            &lt;/p&gt;<br/>            &lt;p&gt;<br/>              &lt;b&gt;Telephone:&lt;/b&gt;<br/>              {{o.tel}}<br/>            &lt;/p&gt;<br/>            &lt;p&gt;<br/>              &lt;b&gt;Type:&lt;/b&gt;<br/>              {{o.type}}<br/>            &lt;/p&gt;<br/>          &lt;/div&gt;<br/>          &lt;p&gt;<br/>            &lt;b&gt;Party:&lt;/b&gt;<br/>            {{r.party_name}}<br/>          &lt;/p&gt;<br/>        &lt;/b-card-text&gt;</span><span id="ff60" class="lv lw it lr b gy mb ly l lz ma">        &lt;b-button :href="r.url" variant="primary" target="_blank"&gt;Go to Source&lt;/b-button&gt;<br/>      &lt;/b-card&gt;<br/>    &lt;/template&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="fbc7" class="lv lw it lr b gy mb ly l lz ma">&lt;script&gt;<br/>import { requestsMixin } from "@/mixins/requestsMixin";<br/>import Avatar from "vue-avatar";</span><span id="9024" class="lv lw it lr b gy mb ly l lz ma">export default {<br/>  name: "home",<br/>  mixins: [requestsMixin],<br/>  data() {<br/>    return {<br/>      reps: [],<br/>      noLocation: true<br/>    };<br/>  },<br/>  components: {<br/>    Avatar<br/>  },</span><span id="9a25" class="lv lw it lr b gy mb ly l lz ma">beforeMount() {<br/>    this.getAllRepresentatives();<br/>  },<br/>  methods: {<br/>    async getAllRepresentatives() {<br/>      try {<br/>        const coordinates = await this.$getLocation({<br/>          enableHighAccuracy: true<br/>        });<br/>        const { lat, lng } = coordinates;<br/>        const response = await this.getRepresentatives(lat, lng);<br/>        this.reps = response.data.objects;<br/>        this.noLocation = false;<br/>      } catch (error) {<br/>        this.noLocation = true;<br/>      }<br/>    }<br/>  }<br/>};<br/>&lt;/script&gt;</span></pre><p id="fc26" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们使用与<code class="fe md me mf lr b">Boundaries.vue</code>相同的<code class="fe md me mf lr b">this.$geoLocation</code>功能。在该页面中，我们获得用户设备当前所在位置的代表列表。地理定位功能与<code class="fe md me mf lr b">Boundaries.vue</code>相同。我们运行<code class="fe md me mf lr b">beforeMount</code>中的<code class="fe md me mf lr b">getAllRepresentatives</code>函数，以便它在页面加载时加载。</p><p id="1034" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">API中的项目显示在BootstrapVue卡中。我们用vue-avatar包在avatar中显示图片。</p><p id="5118" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">接下来，我们在<code class="fe md me mf lr b">views</code>文件夹中创建<code class="fe md me mf lr b">Representatives.vue</code>。我们将以下代码添加到文件中:</p><pre class="kj kk kl km gt lq lr ls lt aw lu bi"><span id="35d6" class="lv lw it lr b gy lx ly l lz ma">&lt;template&gt;<br/>  &lt;div class="page"&gt;<br/>    &lt;h1 class="text-center"&gt;Representative Sets&lt;/h1&gt;<br/>    &lt;template v-if="noLocation"&gt;<br/>      &lt;h2 class="text-center"&gt;Enable geolocation to see list of representatives&lt;/h2&gt;<br/>    &lt;/template&gt;<br/>    &lt;template v-if="!noLocation"&gt;<br/>      &lt;b-form&gt;<br/>        &lt;b-form-group label="Representative Set" label-for="repSet"&gt;<br/>          &lt;b-form-select<br/>            name="repSet"<br/>            v-model="form.repSet"<br/>            :options="repSets"<br/>            required<br/>            <a class="ae mc" href="http://twitter.com/change" rel="noopener ugc nofollow" target="_blank">@change</a>="getRepSetReps()"<br/>          &gt;&lt;/b-form-select&gt;<br/>        &lt;/b-form-group&gt;<br/>      &lt;/b-form&gt;<br/>      &lt;b-card v-for="(r, i) in reps" :key="i" class="card"&gt;<br/>        &lt;b-card-title&gt;<br/>          &lt;h2&gt;<br/>            &lt;avatar :src="r.photo_url" :inline="true"&gt;&lt;/avatar&gt;<br/>            &lt;span class="title"&gt;{{r.name}}&lt;/span&gt;<br/>          &lt;/h2&gt;<br/>        &lt;/b-card-title&gt;</span><span id="ab64" class="lv lw it lr b gy mb ly l lz ma">        &lt;b-card-text&gt;<br/>          &lt;h5&gt;Info:&lt;/h5&gt;<br/>          &lt;p&gt;<br/>            &lt;b&gt;Elected Office:&lt;/b&gt;<br/>            {{r.office}}<br/>          &lt;/p&gt;<br/>          &lt;p&gt;<br/>            &lt;b&gt;District Name:&lt;/b&gt;<br/>            {{r.district_name}}<br/>          &lt;/p&gt;<br/>          &lt;p&gt;<br/>            &lt;b&gt;Party:&lt;/b&gt;<br/>            {{r.party_name || 'None'}}<br/>          &lt;/p&gt;<br/>          &lt;h5&gt;Offices:&lt;/h5&gt;<br/>          &lt;div v-for="(o,i) in r.offices" :key="i"&gt;<br/>            &lt;p&gt;<br/>              &lt;b&gt;Address:&lt;/b&gt;<br/>              {{o.postal}}<br/>            &lt;/p&gt;<br/>            &lt;p&gt;<br/>              &lt;b&gt;Telephone:&lt;/b&gt;<br/>              {{o.tel}}<br/>            &lt;/p&gt;<br/>            &lt;p&gt;<br/>              &lt;b&gt;Type:&lt;/b&gt;<br/>              {{o.type}}<br/>            &lt;/p&gt;<br/>          &lt;/div&gt;<br/>        &lt;/b-card-text&gt;<br/>      &lt;/b-card&gt;<br/>    &lt;/template&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="b3de" class="lv lw it lr b gy mb ly l lz ma">&lt;script&gt;<br/>import { requestsMixin } from "@/mixins/requestsMixin";<br/>import Avatar from "vue-avatar";</span><span id="cca3" class="lv lw it lr b gy mb ly l lz ma">export default {<br/>  name: "boundaries",<br/>  mixins: [requestsMixin],<br/>  data() {<br/>    return {<br/>      repSets: [],<br/>      reps: [],<br/>      form: {<br/>        repSet: "strathcona-county-council"<br/>      },<br/>      noLocation: true,<br/>      coordinates: {}<br/>    };<br/>  },<br/>  components: {<br/>    Avatar<br/>  },<br/>  beforeMount() {<br/>    this.getRepSets();<br/>    this.getLocation();<br/>  },<br/>  methods: {<br/>    async getRepSets() {<br/>      const response = await this.getRepresentativeSets();<br/>      this.repSets = response.data.objects.map(s =&gt; {<br/>        const [part1, part2, value] = s.url.split("/");<br/>        return {<br/>          text: s.name,<br/>          value<br/>        };<br/>      });<br/>    },</span><span id="b69f" class="lv lw it lr b gy mb ly l lz ma">    async getLocation() {<br/>      try {<br/>        const coordinates = await this.$getLocation({<br/>          enableHighAccuracy: true<br/>        });<br/>        this.coordinates = coordinates;<br/>        this.noLocation = false;<br/>      } catch (error) {<br/>        this.noLocation = true;<br/>      }<br/>    },</span><span id="e239" class="lv lw it lr b gy mb ly l lz ma">    async getRepSetReps() {<br/>      const { lat, lng } = this.coordinates;<br/>      const response = await this.getRepresentativeSetsRepresentatives(<br/>        this.form.repSet,<br/>        lat,<br/>        lng<br/>      );<br/>      this.reps = response.data.objects;<br/>    }<br/>  }<br/>};<br/>&lt;/script&gt;</span></pre><p id="d02b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">当页面加载时，我们调用<code class="fe md me mf lr b">this.getRepSets</code>和<code class="fe md me mf lr b">this.getLocation</code>用加拿大的立法机构填充下拉列表，并分别获取位置。当下拉选择改变并且地理位置API启用时，我们用提供的坐标在<code class="fe md me mf lr b">this.getRepSetReps</code>函数中获得项目。我们只在地理定位启用时显示下拉列表，这样我们就不会让用户在没有启用的情况下选择任何内容。</p><p id="d3e7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这些物品也会显示在此页面的BootstrapVue卡中。</p><p id="9452" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">然后我们将<code class="fe md me mf lr b">App.vue</code>中的现有代码改为:</p><pre class="kj kk kl km gt lq lr ls lt aw lu bi"><span id="334c" class="lv lw it lr b gy lx ly l lz ma">&lt;template&gt;<br/>  &lt;div&gt;<br/>    &lt;b-navbar toggleable="lg" type="dark" variant="info"&gt;<br/>      &lt;b-navbar-brand href="#"&gt;Canadian Politicians App&lt;/b-navbar-brand&gt;</span><span id="59a9" class="lv lw it lr b gy mb ly l lz ma">&lt;b-navbar-toggle target="nav-collapse"&gt;&lt;/b-navbar-toggle&gt;</span><span id="cb57" class="lv lw it lr b gy mb ly l lz ma">&lt;b-collapse id="nav-collapse" is-nav&gt;<br/>        &lt;b-navbar-nav&gt;<br/>          &lt;b-nav-item to="/" :active="path == '/'"&gt;Home&lt;/b-nav-item&gt;<br/>          &lt;b-nav-item to="/boundaries" :active="path == '/boundaries'"&gt;Boundaries&lt;/b-nav-item&gt;<br/>          &lt;b-nav-item to="/representatives" :active="path == '/representatives'"&gt;Representatives&lt;/b-nav-item&gt;<br/>        &lt;/b-navbar-nav&gt;<br/>      &lt;/b-collapse&gt;<br/>    &lt;/b-navbar&gt;<br/>    &lt;router-view /&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="5b27" class="lv lw it lr b gy mb ly l lz ma">&lt;script&gt;<br/>export default {<br/>  data() {<br/>    return {<br/>      path: this.$route &amp;&amp; this.$route.path<br/>    };<br/>  },<br/>  watch: {<br/>    $route(route) {<br/>      this.path = route.path;<br/>    }<br/>  }<br/>};<br/>&lt;/script&gt;</span><span id="a11a" class="lv lw it lr b gy mb ly l lz ma">&lt;style&gt;<br/>.page {<br/>  padding: 20px;<br/>  margin: 0 auto;<br/>}</span><span id="8064" class="lv lw it lr b gy mb ly l lz ma">.card,<br/>form {<br/>  max-width: 800px;<br/>  margin: 0 auto;<br/>}</span><span id="00c6" class="lv lw it lr b gy mb ly l lz ma">.title {<br/>  position: relative;<br/>  top: -13px;<br/>  left: 10px;<br/>}<br/>&lt;/style&gt;</span></pre><p id="18c4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们添加了BootstrapVue工具栏和每个页面的链接。在顶栏中，我们为链接设置了<code class="fe md me mf lr b">active</code>属性，这样我们就可以突出显示当前页面的链接。在<code class="fe md me mf lr b">scripts</code>部分，我们观察Vue Router为app当前路径提供的<code class="fe md me mf lr b">$route</code>对象，并将其赋给<code class="fe md me mf lr b">this.path</code>，这样我们就可以用它来设置<code class="fe md me mf lr b">active</code>道具。</p><p id="aad7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在<code class="fe md me mf lr b">style</code>块中，我们用<code class="fe md me mf lr b">page</code>类给页面添加填充和边距。我们设置了表单和卡片的宽度，这样它们就不会太宽，我们还添加了<code class="fe md me mf lr b">title</code>类，这样卡片中的标题就可以和头像对齐了。</p><p id="62f6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在<code class="fe md me mf lr b">main.js</code>中，我们将现有代码替换为:</p><pre class="kj kk kl km gt lq lr ls lt aw lu bi"><span id="71ff" class="lv lw it lr b gy lx ly l lz ma">import Vue from 'vue'<br/>import App from './App.vue'<br/>import router from './router'<br/>import store from './store'<br/>import VueGeolocation from 'vue-browser-geolocation';<br/>import BootstrapVue from 'bootstrap-vue'<br/>import 'bootstrap/dist/css/bootstrap.css'<br/>import 'bootstrap-vue/dist/bootstrap-vue.css'</span><span id="6216" class="lv lw it lr b gy mb ly l lz ma">Vue.use(BootstrapVue)<br/>Vue.use(VueGeolocation);</span><span id="5d64" class="lv lw it lr b gy mb ly l lz ma">Vue.config.productionTip = false</span><span id="491a" class="lv lw it lr b gy mb ly l lz ma">new Vue({<br/>  router,<br/>  store,<br/>  render: h =&gt; h(App)<br/>}).$mount('#app')</span></pre><p id="e20f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这为我们的应用程序添加了BootstrapVue库和样式，以及vue-browser-geolocation包。</p><p id="6637" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在<code class="fe md me mf lr b">router.js</code>中，我们将现有代码替换为:</p><pre class="kj kk kl km gt lq lr ls lt aw lu bi"><span id="dd0a" class="lv lw it lr b gy lx ly l lz ma">import Vue from "vue";<br/>import Router from "vue-router";<br/>import Home from "./views/Home.vue";<br/>import Boundaries from "./views/Boundaries.vue";<br/>import Representatives from "./views/Representatives.vue";</span><span id="6b06" class="lv lw it lr b gy mb ly l lz ma">Vue.use(Router);</span><span id="85d2" class="lv lw it lr b gy mb ly l lz ma">export default new Router({<br/>  mode: "history",<br/>  base: process.env.BASE_URL,<br/>  routes: [<br/>    {<br/>      path: "/",<br/>      name: "home",<br/>      component: Home<br/>    },<br/>    {<br/>      path: "/boundaries",<br/>      name: "boundaries",<br/>      component: Boundaries<br/>    },<br/>    {<br/>      path: "/representatives",<br/>      name: "representatives",<br/>      component: Representatives<br/>    }<br/>  ]<br/>});</span></pre><p id="f214" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在，用户可以在顶栏中找到我们链接的包，也可以直接输入URL。</p><p id="9ae5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在我们通过运行<code class="fe md me mf lr b">npm run serve</code>来运行app。然后我们得到:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nc"><img src="../Images/1900b8a422e64ac3cd71d1263e4c0ae5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2DG3-TTWrX78RZpjn-W7ZQ.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nc"><img src="../Images/171a8c77f4f1052dbd52c44384f52795.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bEq2RuWK4q1-fT0CpsUXzw.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nc"><img src="../Images/5bbc1b5e29158b1929fb514e0401b245.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yOsXTL2PQMvNDLJTuSTmUw.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/156d940f91372e28e070a5597848e77f.png" data-original-src="https://miro.medium.com/v2/resize:fit:638/format:webp/1*QWkhGcac7pRkdlkfy_tVOg.png"/></div></figure><p id="d373" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果您在上面的确认对话框中单击“允许”,我们会得到:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nc"><img src="../Images/09ddd646897be3862aab7dcf2bea957d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Vo1I2NrTzFR-YCfpctLTiQ.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nc"><img src="../Images/d0d528cce1d892d9ac2aee0abd35377d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6OddN7Lo7-yJb-zmp1PTQw.png"/></div></div></figure></div></div>    
</body>
</html>