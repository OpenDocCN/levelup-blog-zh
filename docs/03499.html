<html>
<head>
<title>Kotlin collection asReversed() vs reversed()</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Kotlin系列asReversed() vs reversed()</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/kotlin-collection-asreversed-vs-reversed-6fb0e01f1dd4?source=collection_archive---------13-----------------------#2020-05-12">https://levelup.gitconnected.com/kotlin-collection-asreversed-vs-reversed-6fb0e01f1dd4?source=collection_archive---------13-----------------------#2020-05-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="8950" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">学习科特林语</h2><div class=""/><div class=""><h2 id="c630" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">他们是相同的，但不同的</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/79d371497f8e006e84904f988de6b22c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_OUOblUK5jttHCKh"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">莎伦·麦卡琴在<a class="ae lh" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</figcaption></figure><p id="8f2b" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi me translated">在浏览收藏品时，我注意到有<code class="fe mn mo mp mq b">asReversed()</code>和<code class="fe mn mo mp mq b">reversed()</code>。困惑，所以我探索了解他们的区别。</p><h1 id="8670" class="mr ms it bd mt mu mv mw mx my mz na nb ki nc kj nd kl ne km nf ko ng kp nh ni bi translated">相似之处</h1><p id="563b" class="pw-post-body-paragraph li lj it lk b ll nj kd ln lo nk kg lq lr nl lt lu lv nm lx ly lz nn mb mc md im bi translated">对于<code class="fe mn mo mp mq b">reversed()</code>和<code class="fe mn mo mp mq b">asReversed()</code>，您将获得与原始提供的列表相反的列表。即</p><pre class="ks kt ku kv gt no mq np nq aw nr bi"><span id="c4e0" class="ns ms it mq b gy nt nu l nv nw">val myList = listOf(1, 2, 3)<br/>println(myList.reversed())    // [3, 2, 1]<br/>println(myList.asReversed())  // [3, 2, 1]</span></pre><p id="b51d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">简单的😊</p><h1 id="0918" class="mr ms it bd mt mu mv mw mx my mz na nb ki nc kj nd kl ne km nf ko ng kp nh ni bi translated">差异</h1><p id="bb2f" class="pw-post-body-paragraph li lj it lk b ll nj kd ln lo nk kg lq lr nl lt lu lv nm lx ly lz nn mb mc md im bi translated">好的，这就是我们要找的</p><h2 id="9655" class="ns ms it bd mt nx ny dn mx nz oa dp nb lr ob oc nd lv od oe nf lz of og nh iz bi translated">1.适用的集合类型</h2><p id="2831" class="pw-post-body-paragraph li lj it lk b ll nj kd ln lo nk kg lq lr nl lt lu lv nm lx ly lz nn mb mc md im bi translated"><code class="fe mn mo mp mq b">reversed()</code>可以应用于任何<em class="oh">数组、列表、</em>和<em class="oh">可变列表</em>。</p><p id="50cc" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><code class="fe mn mo mp mq b">asReversed()</code>只能应用于<em class="oh">列表</em>和<em class="oh">可变列表</em></p><h2 id="d78e" class="ns ms it bd mt nx ny dn mx nz oa dp nb lr ob oc nd lv od oe nf lz of og nh iz bi translated">2.生成一个新列表或只是一个参考列表</h2><p id="c3df" class="pw-post-body-paragraph li lj it lk b ll nj kd ln lo nk kg lq lr nl lt lu lv nm lx ly lz nn mb mc md im bi translated">列表的<code class="fe mn mo mp mq b">reversed()</code>实际上是生成一个新的反向列表</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/c7c0a13f76640aadd021b06f8aaf923f.png" data-original-src="https://miro.medium.com/v2/resize:fit:542/format:webp/1*ZOzig63UAs-Jz2E6o7e7sA.png"/></div></figure><p id="a455" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">因此，如果我们在此之后修改了原始列表，反转后的列表将保持原样。</p><p id="85cf" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">列表的<code class="fe mn mo mp mq b">asReversed()</code>不是生成一个新列表，而是一个指向原始列表的反向列表——它在适当的位置反向它。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/95463f403792a053b1b16abdc9355064.png" data-original-src="https://miro.medium.com/v2/resize:fit:542/format:webp/1*VsqIsVIbgB2l-JMnYIuKnQ.png"/></div></figure><p id="5582" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">因此，如果我们在那之后修改原始列表(假设它是可变的),反转的列表也会被修改。</p><h2 id="00b5" class="ns ms it bd mt nx ny dn mx nz oa dp nb lr ob oc nd lv od oe nf lz of og nh iz bi translated">3.返回不可变或可变类型</h2><p id="4bb8" class="pw-post-body-paragraph li lj it lk b ll nj kd ln lo nk kg lq lr nl lt lu lv nm lx ly lz nn mb mc md im bi translated">一个列表的<code class="fe mn mo mp mq b">reversed()</code>将总是生成一个不可变列表，不管原始列表是可变的还是不可变的。所以结果反转列表不能改变(除非转换成可变类型)。</p><p id="17d5" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">列表的<code class="fe mn mo mp mq b">asReversed()</code>将根据原始类型返回类型。如果原始列表是可变的，那么反向列表也是可变的；如果原始列表是不可变的，那么反向列表也是不可变的。</p><h2 id="3e7a" class="ns ms it bd mt nx ny dn mx nz oa dp nb lr ob oc nd lv od oe nf lz of og nh iz bi translated"><strong class="ak"> 4。数组更细微的区别。</strong></h2><p id="2334" class="pw-post-body-paragraph li lj it lk b ll nj kd ln lo nk kg lq lr nl lt lu lv nm lx ly lz nn mb mc md im bi translated">对于数组，有<code class="fe mn mo mp mq b">reversed()</code>和<code class="fe mn mo mp mq b">reversedArray()</code>。</p><p id="c780" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><code class="fe mn mo mp mq b">reversed()</code>同上，返回一个列表。</p><p id="a1df" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">要返回一个数组，请使用<code class="fe mn mo mp mq b">reversedArray()</code>。</p><p id="4f28" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">更新:</strong></p><p id="eda1" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">除了<code class="fe mn mo mp mq b">reversed()</code>、<code class="fe mn mo mp mq b">asReversed()</code>、<code class="fe mn mo mp mq b">reversedArray()</code>之外，还有<code class="fe mn mo mp mq b">reverse()</code>。</p><p id="1a3d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><code class="fe mn mo mp mq b">reverse()</code>的行为与<code class="fe mn mo mp mq b">reversed()</code>不同。不是生成新的列表或数组，而是反转原始数组的元素。这只适用于<code class="fe mn mo mp mq b">mutableList</code>和<code class="fe mn mo mp mq b">array</code>。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/21e4cebf62362c14493bd90f55b24323.png" data-original-src="https://miro.medium.com/v2/resize:fit:1262/format:webp/1*CnH3IZf3O0ijSsFKSNevVg.png"/></div></figure><h1 id="a3c0" class="mr ms it bd mt mu mv mw mx my mz na nb ki nc kj nd kl ne km nf ko ng kp nh ni bi translated">asReversed on List有什么用？</h1><p id="f2e3" class="pw-post-body-paragraph li lj it lk b ll nj kd ln lo nk kg lq lr nl lt lu lv nm lx ly lz nn mb mc md im bi translated">我们知道<code class="fe mn mo mp mq b">List</code>的默认性质是不可变类型。如果我们从中生成<code class="fe mn mo mp mq b">asReversed()</code>，就会生成一个不可变的<code class="fe mn mo mp mq b">List</code>引用原始列表。</p><p id="1284" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">所以问题是，既然我们无论如何都不能改变原始的(不可变的)<code class="fe mn mo mp mq b">List</code>，那么使用<code class="fe mn mo mp mq b">asReversed()</code>和<code class="fe mn mo mp mq b">reversed()</code>不是会产生相同的结果吗？即不能改变的反向列表。</p><h2 id="5a98" class="ns ms it bd mt nx ny dn mx nz oa dp nb lr ob oc nd lv od oe nf lz of og nh iz bi translated">答案</h2><p id="efff" class="pw-post-body-paragraph li lj it lk b ll nj kd ln lo nk kg lq lr nl lt lu lv nm lx ly lz nn mb mc md im bi translated">从技术上来说，他们在这方面是一样的。然而，有一个微妙的区别如下。</p><pre class="ks kt ku kv gt no mq np nq aw nr bi"><span id="4ba6" class="ns ms it mq b gy nt nu l nv nw">val original = mutableListOf('a', 'b', 'c', 'd', 'e')<br/>val originalReadOnly = original as List&lt;Char&gt;<br/>val reversedA = originalReadOnly.asReversed()<br/>val reversedB = originalReadOnly.reversed()<br/><br/>println(original)  // [a, b, c, d, e]<br/>println(reversedA) // [e, d, c, b, a]<br/>println(reversedB) // [e, d, c, b, a]<br/><br/>// changing the original list affects its reversed view<br/>original.add('f')<br/>println(original)  // [a, b, c, d, e, f]<br/>println(reversedA) // [f, e, d, c, b, a] this is altered as well.<br/>println(reversedB) // [e, d, c, b, a]<br/><br/>original[original.lastIndex] = 'z'<br/>println(original)  // [a, b, c, d, e, z]<br/>println(reversedA) // [z, e, d, c, b, a] this is altered as well.<br/>println(reversedB) // [e, d, c, b, a]</span></pre><p id="db6d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">如果我们有办法改变(不可变的)<code class="fe mn mo mp mq b">List</code>(即上面的<code class="fe mn mo mp mq b">originalReadOnly</code>)，那么它们的行为将会不同。上面的代码显示我们可以通过改变原始的<code class="fe mn mo mp mq b">MutableList</code>来改变(不可变的)<code class="fe mn mo mp mq b">List</code>。</p></div><div class="ab cl ok ol hx om" role="separator"><span class="on bw bk oo op oq"/><span class="on bw bk oo op oq"/><span class="on bw bk oo op"/></div><div class="im in io ip iq"><p id="27e2" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">感谢阅读。你可以在这里查看我的其他话题<a class="ae lh" href="https://medium.com/@elye.project/" rel="noopener">。</a></p><p id="f9f9" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">你可以在这里订阅<a class="ae lh" href="https://buttondown.email/Elye." rel="noopener ugc nofollow" target="_blank"/>或者关注我的<a class="ae lh" href="https://medium.com/@elye.project" rel="noopener"><em class="oh"/></a><em class="oh"/><a class="ae lh" href="https://twitter.com/elye_project" rel="noopener ugc nofollow" target="_blank"><em class="oh">Twitter</em></a><em class="oh"/><a class="ae lh" href="https://www.facebook.com/elye.project/" rel="noopener ugc nofollow" target="_blank"><em class="oh">脸书</em> </a> <em class="oh">，以及</em> <a class="ae lh" href="https://www.reddit.com/user/elyeproj/" rel="noopener ugc nofollow" target="_blank"> <em class="oh"> Reddit </em> </a>获取关于移动开发、媒介写作等相关话题的小技巧和学习。~Elye~</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="or os l"/></div></figure></div></div>    
</body>
</html>