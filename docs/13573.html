<html>
<head>
<title>Winlogbeat with local Elasticsearch and Kibana</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Winlogbeat与本地Elasticsearch和Kibana</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/winlogbeat-with-local-elasticsearch-and-kibana-bcf8d6c64af3?source=collection_archive---------2-----------------------#2022-09-17">https://levelup.gitconnected.com/winlogbeat-with-local-elasticsearch-and-kibana-bcf8d6c64af3?source=collection_archive---------2-----------------------#2022-09-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/1263bf0fc27cb773c441443ec64a2a5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ilLMXuX1ua32-xzv37JsSg.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">卡斯帕·卡米尔·鲁宾在<a class="ae kc" href="https://unsplash.com/s/photos/windows-informatic?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="8a1d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">很高兴看到你回来参加我们的弹力栈冒险😊。今天我们要谈谈Winlogbeat以及如何在我们的Windows系统上安装它。</p><p id="2755" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Winlogbeat 是一个轻量级的Windows事件日志发送器，是大型弹性beat家族的一部分。这是一个专门为提供基于<em class="lb"> libbeat </em>框架的Windows事件日志流而设计的工具。Winlogbeat会自动将收集到的原始数据上传到Elasticsearch或任何其他已配置的输出，这些数据随后会被编入索引以供将来使用。它作为一个安全增强应用程序，允许用户监控其Windows主机上发生的几乎任何事情，例如:</p><ul class=""><li id="cc56" class="lc ld iq kf b kg kh kk kl ko le ks lf kw lg la lh li lj lk bi translated">应用程序事件</li><li id="0512" class="lc ld iq kf b kg ll kk lm ko ln ks lo kw lp la lh li lj lk bi translated">硬件事件</li><li id="7298" class="lc ld iq kf b kg ll kk lm ko ln ks lo kw lp la lh li lj lk bi translated">安全事件</li><li id="903d" class="lc ld iq kf b kg ll kk lm ko ln ks lo kw lp la lh li lj lk bi translated">系统事件</li></ul><h2 id="922c" class="lq lr iq bd ls lt lu dn lv lw lx dp ly ko lz ma mb ks mc md me kw mf mg mh mi bi translated">安装和配置</h2><p id="2e45" class="pw-post-body-paragraph kd ke iq kf b kg mj ki kj kk mk km kn ko ml kq kr ks mm ku kv kw mn ky kz la ij bi translated">在我们开始之前，您需要部署Kibana和Elasticsearch。如果你还没有读过这篇文章，请阅读这篇文章。</p><p id="dde6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一如既往的去<a class="ae kc" href="https://www.elastic.co/downloads/beats/winlogbeat" rel="noopener ugc nofollow" target="_blank">官方弹性网站</a>下载Winlogbeat。一旦下载了归档文件，解压并打开<code class="fe mo mp mq mr b">winlogbeat.yml</code>文件进行一些配置。首先，导航到<em class="lb">输出部分</em>，在这里我们将按如下方式配置Elasticsearch:</p><pre class="ms mt mu mv gt mw mr mx my aw mz bi"><span id="4c82" class="lq lr iq mr b gy na nb l nc nd">output.elasticsearch:   <br/>  hosts: ["https://localhost:9200"]   <br/>  username: "elastic"   <br/>  password: "<em class="lb">TYPE_HERE</em>"  <br/>  <em class="lb"># If using Elasticsearch's default certificate<br/>  </em>ssl:<br/>      enabled: true<br/>      ca_trusted_fingerprint:  "your_fingerprint"</span></pre><p id="119e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">请注意，本教程是针对Elasticsearch的安全部署编写的，因此这里应该提到<em class="lb"> ca_trusted_fingerprint </em>。<em class="lb">指纹</em>是第一次启动Elasticsearch时生成的CA证书的十六进制编码SHA-256。如果您丢失了它，不要惊慌，您总是可以使用以下命令找回它:</p><pre class="ms mt mu mv gt mw mr mx my aw mz bi"><span id="6c63" class="lq lr iq mr b gy na nb l nc nd">openssl x509 -fingerprint -sha256 -in config/certs/http_ca.crt</span></pre><p id="d9b3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这个命令不能在Windows终端上运行，你需要下载并安装<a class="ae kc" href="https://git-scm.com/download/win" rel="noopener ugc nofollow" target="_blank"> Git </a>，打开<em class="lb"> Git CMD </em>并从Elasticsearch根文件夹运行这个命令。</p><p id="7cbe" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">完成后，转到<em class="lb"> winlogbeat.event_logs </em>部分，指定要监控的事件日志列表。默认情况下，Winlogbeat监控<em class="lb">应用</em>、<em class="lb">安全</em>和<em class="lb">系统</em>日志。您可以使用所有可用事件日志的列表，只需在Powershell中运行以下命令:<code class="fe mo mp mq mr b">Get-EventLog *</code></p><p id="d798" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Winlogbeat附带了一组实用程序来检查配置或连接是否就绪。保存配置文件，并从根文件夹中依次运行以下命令:</p><pre class="ms mt mu mv gt mw mr mx my aw mz bi"><span id="4916" class="lq lr iq mr b gy na nb l nc nd">./winlogbeat test config<br/>./winlogbeat test output</span></pre><p id="b2a2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，要设置<strong class="kf ir">资产</strong>来解析、索引和可视化您的数据，您可以运行以下命令:</p><pre class="ms mt mu mv gt mw mr mx my aw mz bi"><span id="3ed8" class="lq lr iq mr b gy na nb l nc nd">./winlogbeat setup</span></pre><p id="8a48" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">注意:<code class="fe mo mp mq mr b">-e</code>是可选的，将输出发送到标准错误，而不是配置的日志输出。</p><p id="ce37" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">剩下的工作就是用下面的命令启动Winlogbeat:</p><pre class="ms mt mu mv gt mw mr mx my aw mz bi"><span id="f4bb" class="lq lr iq mr b gy na nb l nc nd">./winlogbeat -e</span></pre><p id="0a59" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">点击Kibana侧面导航中的<strong class="kf ir">发现</strong>。确保选择了预定的<code class="fe mo mp mq mr b">winlogbeat-*</code>索引模式，以便查看Winlogbeat数据。</p><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ne"><img src="../Images/fccc887cb597f340da977b52df42ae5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LjG4BJhYIa9GjP5rxJewsQ.png"/></div></div></figure><p id="b4f1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">setup命令建立了许多仪表板，然后可以在其中浏览数据。在<strong class="kf ir">仪表板</strong>部分，从其中一个仪表板，您可以验证您的安装是否正常工作，如下所示:</p><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nf"><img src="../Images/177ebf0747309e94a7dcfcf81fd77232.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kS184Jycz0g3eKKl_ZXjLQ.png"/></div></div></figure><p id="a7e9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">今天就到这里，请随意查看关于这个主题的<a class="ae kc" href="https://www.elastic.co/guide/en/beats/winlogbeat/current/winlogbeat-installation-configuration.html#winlogbeat-installation-configuration" rel="noopener ugc nofollow" target="_blank">官方文档</a>了解更多细节。感谢您的阅读，如果您对本文有任何问题或评论，请在下面留下您的评论。</p><p id="1208" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们下次再见，看更多的帖子🚀。</p><p id="0f6d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">阿卜杜尔-巴吉</p></div></div>    
</body>
</html>