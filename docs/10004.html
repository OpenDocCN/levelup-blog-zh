<html>
<head>
<title>Passive Income with Profitable Machine Learning Algorithm (+22.07%)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">有盈利机器学习算法的被动收入(+22.07%)</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/passive-income-with-profitable-machine-learning-algorithm-7788e06c7618?source=collection_archive---------1-----------------------#2021-10-14">https://levelup.gitconnected.com/passive-income-with-profitable-machine-learning-algorithm-7788e06c7618?source=collection_archive---------1-----------------------#2021-10-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="305f" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">面向交易员和密码交易员的Python</h2><div class=""/><div class=""><h2 id="c9f5" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">我如何使用网飞使用的机器学习算法将我的交易成功率提高了22.0713%——第三部分</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/01e1a466e176523ea7a213a574e88fa1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EduUyEdREqw4PLIZqjPutg.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">输出最终性能</figcaption></figure><p id="202c" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi md translated"><span class="l me mf mg bm mh mi mj mk ml di"> T </span>他的这篇文章是关于如何使用机器学习和人工智能进行算法交易的系列文章和视频的第三部分<strong class="lj jd">。</strong></p><p id="52ae" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">本系列中涉及的模型在过去的六个月中得到了改进，目前用于我的交易机器人。这是一个适用于<strong class="lj jd">日交易</strong>的模型，也是为适应美国股票市场而设计的。(只是变量和概率的问题)。如果你想让它适应加密市场，你必须改变下面列出的一些超参数。</p><p id="9906" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">因此，让我们从之前看到的内容开始。但是首先，我强烈建议您看一看第一部分和第二部分(至少让Python代码和代码同步):</p><div class="mm mn gp gr mo mp"><a rel="noopener  ugc nofollow" target="_blank" href="/python-for-trading-how-i-used-classification-algorithms-to-easily-enhance-my-winning-rate-by-22-4-6269167fbf93"><div class="mq ab fo"><div class="mr ab ms cl cj mt"><h2 class="bd jd gy z fp mu fr fs mv fu fw jc bi translated">Python交易——我如何使用分类算法将我的胜率提高了22.4%</h2><div class="mw l"><h3 class="bd b gy z fp mu fr fs mv fu fw dk translated">网飞使用的一个错误的机器学习算法，以增加我的技术…</h3></div><div class="mx l"><p class="bd b dl z fp mu fr fs mv fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="my l"><div class="mz l na nb nc my nd lb mp"/></div></div></a></div><div class="mm mn gp gr mo mp"><a rel="noopener  ugc nofollow" target="_blank" href="/how-i-used-mathematics-and-ai-to-increase-my-profits-by-22-4-part2-89cd1443fa56"><div class="mq ab fo"><div class="mr ab ms cl cj mt"><h2 class="bd jd gy z fp mu fr fs mv fu fw jc bi translated">我如何利用数学和人工智能将利润提高22.4% —第二部分</h2><div class="mw l"><h3 class="bd b gy z fp mu fr fs mv fu fw dk translated">网飞使用的一个错误的机器学习算法，像高频交易者一样交易。</h3></div><div class="mx l"><p class="bd b dl z fp mu fr fs mv fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="my l"><div class="ne l na nb nc my nd lb mp"/></div></div></a></div><h2 id="f234" class="nf ng it bd nh ni nj dn nk nl nm dp nn lq no np nq lu nr ns nt ly nu nv nw iz bi translated">在上一篇文章中…</h2><p id="91b2" class="pw-post-body-paragraph lh li it lj b lk nx kd lm ln ny kg lp lq nz ls lt lu oa lw lx ly ob ma mb mc im bi translated">在上一篇文章中，我们首先介绍了<a class="ae oc" rel="noopener ugc nofollow" target="_blank" href="/python-for-trading-how-i-used-classification-algorithms-to-easily-enhance-my-winning-rate-by-22-4-6269167fbf93"> <strong class="lj jd">(网飞使用的)分类算法以及如何将它们用于交易目的</strong> </a> <strong class="lj jd">。</strong></p><p id="57e4" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我们阐述了最大似然算法和通常的分类方法之间的区别。然后，我们定义了发展日内交易机器学习模型的路线图:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi od"><img src="../Images/57c80a791497a5b55a904a10b3120aea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*i0TokHXXwLBvD7fh.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">数据模型</figcaption></figure><p id="93dd" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我们定义了一种使用yahoo finance API获取实时市场数据的方法，我们选择了<strong class="lj jd">一分钟的间隔</strong>来保持在我们的<strong class="lj jd">日交易</strong>窗口中。</p><p id="0670" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">然后，我们通过多个步骤处理数据:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi od"><img src="../Images/fac943f480d1927235e6c1ea4b789445.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*7DiGcXP7ewkl_lT9.png"/></div></div></figure><p id="41b8" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">首先，<strong class="lj jd">我们根据最敏感的交易指标</strong>创建了多个变量。之后，我们<strong class="lj jd">设置我们的信号</strong>和<strong class="lj jd">根据返回分类我们的输出</strong>。最后，我们将数据分为训练数据集和测试数据集。</p><h1 id="24f6" class="oe ng it bd nh of og oh nk oi oj ok nn ki ol kj nq kl om km nt ko on kp nw oo bi translated">在这篇文章中</h1><p id="d3ad" class="pw-post-body-paragraph lh li it lj b lk nx kd lm ln ny kg lp lq nz ls lt lu oa lw lx ly ob ma mb mc im bi translated">在第三部分中，我们将<strong class="lj jd">开发我们的机器学习模型</strong>，并通过<strong class="lj jd">混淆矩阵</strong>和<strong class="lj jd"> F值</strong>测试模型的性能。并通过<strong class="lj jd">观看</strong>如何<strong class="lj jd"> </strong>预测模型在实际市场条件下发挥作用来完成本文。</p><p id="bc6f" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在开始之前，如果你想完全开始算法交易，我强烈推荐下面的课程:</p><div class="mm mn gp gr mo mp"><a href="https://www.udemy.com/course/python-for-algorithmic-trading/?couponCode=LOVE_SEPTEMBER" rel="noopener  ugc nofollow" target="_blank"><div class="mq ab fo"><div class="mr ab ms cl cj mt"><h2 class="bd jd gy z fp mu fr fs mv fu fw jc bi translated">2021年:一天学会算法交易</h2><div class="mw l"><h3 class="bd b gy z fp mu fr fs mv fu fw dk translated">你好，我是赛义德·赫萨尼。我一直在伦敦的多家银行担任数据科学家，是一名…</h3></div><div class="mx l"><p class="bd b dl z fp mu fr fs mv fu fw dk translated">www.udemy.com</p></div></div><div class="my l"><div class="op l na nb nc my nd lb mp"/></div></div></a></div><p id="e3f9" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">开始吧！</p><h1 id="a8db" class="oe ng it bd nh of og oh nk oi oj ok nn ki ol kj nq kl om km nt ko on kp nw oo bi translated">模型部署</h1><p id="f9d4" class="pw-post-body-paragraph lh li it lj b lk nx kd lm ln ny kg lp lq nz ls lt lu oa lw lx ly ob ma mb mc im bi translated">机器学习模型部署将分为三个部分。首先，定义我们的最优超参数。其次，根据这些参数创建SVM模型。第三，回测这个预测模型的性能。</p><p id="4fe6" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">但在开始之前，我们必须深入研究一下理论，以便理解所应用的策略和数学直觉。</p><h2 id="4556" class="nf ng it bd nh ni nj dn nk nl nm dp nn lq no np nq lu nr ns nt ly nu nv nw iz bi translated">理论</h2><p id="a9c5" class="pw-post-body-paragraph lh li it lj b lk nx kd lm ln ny kg lp lq nz ls lt lu oa lw lx ly ob ma mb mc im bi translated">当你建立一个机器学习或人工智能模型时，最重要的挑战之一是向人工智能实例化正确的思维方式(数学上:建模)。</p><p id="eeb4" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">事实上，人工智能与ARIMA等常规预测模型之间的区别在于，计算机将根据情况创建定制模型。</p><blockquote class="oq"><p id="68c7" class="or os it bd ot ou ov ow ox oy oz mc dk translated">“没有人比机器更会建模”——扬·勒·库恩</p></blockquote><p id="72dc" class="pw-post-body-paragraph lh li it lj b lk pa kd lm ln pb kg lp lq pc ls lt lu pd lw lx ly pe ma mb mc im bi translated">我们的工作将是实例化计算机以正确的方式思考，并让它建立预测市场的最佳模型。这就是超参数出现的地方。</p><h2 id="e83d" class="nf ng it bd nh ni nj dn nk nl nm dp nn lq no np nq lu nr ns nt ly nu nv nw iz bi translated">超参数</h2><p id="9d06" class="pw-post-body-paragraph lh li it lj b lk nx kd lm ln ny kg lp lq nz ls lt lu oa lw lx ly ob ma mb mc im bi translated">在科学文献中，四个主要参数用于支持向量模型:<strong class="lj jd"> C、γ、核</strong>和<strong class="lj jd"/>ε(但是ε主要用于SVR而不是SVM)。</p><p id="b416" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><strong class="lj jd">这些超参数之间的主要区别</strong>是计算决策边界的<strong class="lj jd">方式(也称为超平面，参见</strong> <a class="ae oc" rel="noopener ugc nofollow" target="_blank" href="/python-for-trading-how-i-used-classification-algorithms-to-easily-enhance-my-winning-rate-by-22-4-6269167fbf93"> <strong class="lj jd">第一部分</strong> </a> <strong class="lj jd">)。</strong></p><p id="6886" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">这些参数中的每一个都需要“调整”，我们需要定义一个特定的值。该值将决定拟合的程度。由于这些参数，人工智能将以某种方式思考和预测市场。</p><p id="d30b" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">你可以想象，像一些按钮，你将调整，以获得最佳预测模型(或在这种情况下，<strong class="lj jd">最佳超平面/决策边界</strong>)。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi pf"><img src="../Images/99580122f77d9281bb102f75ab8e8074.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vyt23ovqjIQxRe216f3r5Q.png"/></div></div></figure><p id="420b" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">如您所知，所用的拟合程度和超参数<strong class="lj jd">对于获得可靠的市场预测</strong>至关重要。但幸运的是，我们会找到一种方法让计算机自己找到最佳值。</p><p id="d46e" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">为了大致了解，我们先从数学上快速看一下这三个参数的区别。</p><h2 id="46db" class="nf ng it bd nh ni nj dn nk nl nm dp nn lq no np nq lu nr ns nt ly nu nv nw iz bi translated">差异C、伽玛和内核</h2><p id="2fea" class="pw-post-body-paragraph lh li it lj b lk nx kd lm ln ny kg lp lq nz ls lt lu oa lw lx ly ob ma mb mc im bi translated"><strong class="lj jd"> C参数</strong>将通过为每个错误分类的数据点添加惩罚来定义超平面(决策边界)。如果<strong class="lj jd"> C较大</strong>，SVM将<strong class="lj jd">倾向于过拟合</strong>，而如果<strong class="lj jd"> C较低</strong>，模型将更加宽松，在许多情况下会给出更好的边界，但<strong class="lj jd">倾向于过拟合</strong>。下面的例子:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi pg"><img src="../Images/696d4a8861364039d2090228fe9ec8b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ejLWuQUaEfQ9OU7iZg6FSA.png"/></div></div></figure><p id="a69d" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">另一方面，gamma将处理每个训练点的影响距离。它将通过最小化点与点之间的距离来创建微集群。低值gamma表示较大的相似性半径，这将导致更多的点被分组。对于高伽玛值，数据点需要彼此非常接近才能被认为在同一组(或类)中。下面的例子:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ph"><img src="../Images/0a99a75e50d8dbc2fb0562ab21b00179.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gJSzs2z0B2wBx5kpJx8T1w.png"/></div></div></figure><p id="40cd" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">关于内核技巧，它将根据相似性度量来计算决策边界。虽然我们需要为其他人定义一个值，但我们必须指定用于内核的方程类型。主要有四种核:<strong class="lj jd">线性</strong>核、<strong class="lj jd">多项式</strong>核、<strong class="lj jd"> Logistic/ Sigmoid </strong>核、<strong class="lj jd">高斯/RBF </strong>核。</p><p id="6728" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我们将使用的是基于高斯分布的，因为它更接近市场行为，这是一个真实的例子<a class="ae oc" href="https://towardsdatascience.com/how-covid19-has-impacted-the-us-stock-exchange-and-it-is-not-what-you-can-expect-edd2d43407ef" rel="noopener" target="_blank"><strong class="lj jd"/></a>。</p><p id="37cf" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">但在开始编码和创建我们的人工智能之前，我们必须定义我们将如何处理我们的数据。</p><h1 id="0da7" class="oe ng it bd nh of og oh nk oi oj ok nn ki ol kj nq kl om km nt ko on kp nw oo bi translated">数据模型</h1><p id="4b4f" class="pw-post-body-paragraph lh li it lj b lk nx kd lm ln ny kg lp lq nz ls lt lu oa lw lx ly ob ma mb mc im bi translated">如前所述，关键挑战之一将是找到我们的超参数的正确值，并让机器进行第二次预测。</p><p id="77ae" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">但是不要担心，Scikit有这样的工具。:)</p><p id="6605" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我们将首先创建一个函数，通过迭代来测试参数<strong class="lj jd">的不同值。一旦我们得到这个函数，我们将让机器选择最好的一个，使用一个名为best_param_ <strong class="lj jd">的函数。定义完成后，我们将根据这些值创建我们的SVM算法。</strong></strong></p><p id="94e5" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">它看起来类似于:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi pi"><img src="../Images/846540e3f7c565fd9facd6a86969cb3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LdVuWKBkO1OPMi-jkyTb5w.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">数据模型</figcaption></figure><p id="273b" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">既然我们已经定义了我们的计划，让我们编码吧！</p><h1 id="4892" class="oe ng it bd nh of og oh nk oi oj ok nn ki ol kj nq kl om km nt ko on kp nw oo bi translated">模型开发</h1><h2 id="920b" class="nf ng it bd nh ni nj dn nk nl nm dp nn lq no np nq lu nr ns nt ly nu nv nw iz bi translated"><strong class="ak">启动前</strong></h2><p id="36f4" class="pw-post-body-paragraph lh li it lj b lk nx kd lm ln ny kg lp lq nz ls lt lu oa lw lx ly ob ma mb mc im bi translated">在开始之前，需要进行一些前一篇文章中没有做过的数据清理。我们将需要排除变量<code class="fe pj pk pl pm b">Close</code>、<code class="fe pj pk pl pm b">Signal</code>、<code class="fe pj pk pl pm b">Time</code>、<code class="fe pj pk pl pm b">High</code>、<code class="fe pj pk pl pm b">Low</code>、<code class="fe pj pk pl pm b">Volume</code>和<code class="fe pj pk pl pm b">Ret</code>，因为算法不会在这些特征上被训练。接下来，我们将<code class="fe pj pk pl pm b">Signal</code>分配给<code class="fe pj pk pl pm b">y</code>，这是您将使用测试数据预测的输出变量。(视频教程中有更多解释)</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="pn po l"/></div></figure><p id="4276" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">现在我们可以开始为我们的人工智能模型设置超参数了。</p><h2 id="1b57" class="nf ng it bd nh ni nj dn nk nl nm dp nn lq no np nq lu nr ns nt ly nu nv nw iz bi translated">创建我们的超参数最优搜索函数</h2><p id="7547" class="pw-post-body-paragraph lh li it lj b lk nx kd lm ln ny kg lp lq nz ls lt lu oa lw lx ly ob ma mb mc im bi translated">既然我们已经清理了数据集，我们将开始创建一个过程，通过迭代来找到C和Gamma的最佳值。提醒一下，从效率的角度来看，我们将使用<code class="fe pj pk pl pm b">rbf</code>作为内核的单个条目，但是也可以随意测试其他选项。</p><p id="77b9" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">为了通过迭代测试每个选项，我们将创建一个函数管道，以特定的顺序在训练数据上运行。并使用一个名为<code class="fe pj pk pl pm b">RandomizedSearchCV</code>的Scikit函数来帮助我们运行管道。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="pn po l"/></div></figure><p id="e8ff" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">该函数使用管道来执行后续步骤，并且“TimeSeriesSplit”为2。它可以是大于2的任何值，但是为了运行得更快，我将时间序列除以2以提高效率。</p><p id="87af" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">既然我们已经创建了搜索最佳参数引擎函数，我们必须训练它来获得C和Gamma的最佳值。</p><h2 id="1cdc" class="nf ng it bd nh ni nj dn nk nl nm dp nn lq no np nq lu nr ns nt ly nu nv nw iz bi translated">创建/训练模型并选择最佳输出🦾</h2><p id="80d7" class="pw-post-body-paragraph lh li it lj b lk nx kd lm ln ny kg lp lq nz ls lt lu oa lw lx ly ob ma mb mc im bi translated">为了完成这个任务，我们将首先在我们的随机搜索函数(名为<code class="fe pj pk pl pm b">rcv</code>)中传递我们的训练数据集。然后对每个参数(C、gamma、kernel)使用函数<code class="fe pj pk pl pm b">best_params_</code>让机器选择最佳值。然后，用引擎选择的最佳超参数实例化新的支持向量分类器函数。</p><p id="7e72" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">尽管它看起来像野蛮人，但这只是一个要遵循的架构和流程问题。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="pn po l"/></div></figure><p id="ea3d" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">机器选择的最佳参数如下:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi pp"><img src="../Images/5807d53c2384cb1700d2e9dfefa79a10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*2nR4_IakUDbbpOSkMidVog.png"/></div></figure><p id="017d" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">现在我们的模型准备好了！让我们看看它在市场上的表现。</p><h1 id="cc03" class="oe ng it bd nh of og oh nk oi oj ok nn ki ol kj nq kl om km nt ko on kp nw oo bi translated">预测市场</h1><p id="67dd" class="pw-post-body-paragraph lh li it lj b lk nx kd lm ln ny kg lp lq nz ls lt lu oa lw lx ly ob ma mb mc im bi translated">既然我们基于过去的数据来训练模型，我们将需要模型来预测我们的测试数据集中的信号。您可以使用测试数据进行预测，并将输出保存在名为“y_predict”的列表中。该列表将包含测试数据的信号预测值。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="pn po l"/></div></figure><h2 id="68f9" class="nf ng it bd nh ni nj dn nk nl nm dp nn lq no np nq lu nr ns nt ly nu nv nw iz bi translated">保存预测</h2><p id="f88a" class="pw-post-body-paragraph lh li it lj b lk nx kd lm ln ny kg lp lq nz ls lt lu oa lw lx ly ob ma mb mc im bi translated">1.为了保存测试数据的预测y值，我们可以使用split将“y_predict”分配给“Pred_Signal”。<br/> 2。为了保存训练数据的预测y值，我们进行预测并以类似的方式保存它们。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="pn po l"/></div></figure><p id="70c5" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">因为该算法是在训练数据上训练的，所以它在该训练数据上的准确性预期比测试数据更好。您可以分别打印这两个文件来检查准确性。</p><h1 id="88a1" class="oe ng it bd nh of og oh nk oi oj ok nn ki ol kj nq kl om km nt ko on kp nw oo bi translated">使用模型进行交易。</h1><p id="527e" class="pw-post-body-paragraph lh li it lj b lk nx kd lm ln ny kg lp lq nz ls lt lu oa lw lx ly ob ma mb mc im bi translated">在评估交易模型之前，我们需要在测试数据集上检查算法的性能，并验证预测的准确性。为此，我们将生成混淆矩阵。(如果想要混淆矩阵和F分代码，在视频教程和脚本中有分享)。</p><h2 id="d3a3" class="nf ng it bd nh ni nj dn nk nl nm dp nn lq no np nq lu nr ns nt ly nu nv nw iz bi translated">技术性能分析</h2><p id="50e3" class="pw-post-body-paragraph lh li it lj b lk nx kd lm ln ny kg lp lq nz ls lt lu oa lw lx ly ob ma mb mc im bi translated">在执行了下面视频中的代码行之后。这是我们的混淆矩阵和分类报告。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi pq"><img src="../Images/3b62af983453303357d49e4a5f60c834.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AnD_VFSc342d0NS864tSBQ.png"/></div></div></figure><p id="7dcc" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">有趣的是，我们注意到预测并不完美，但算法可以避免做出错误的决定。事实上，在42分钟的“牛市”期间，算法从未建议卖出股票。在超过38分钟的卖出时间里，算法建议只在2分钟内买入。</p><p id="48e0" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">但是现在，让我们将预测模型可视化。</p><h1 id="f081" class="oe ng it bd nh of og oh nk oi oj ok nn ki ol kj nq kl om km nt ko on kp nw oo bi translated">真实市场条件下的回溯测试</h1><p id="ac7f" class="pw-post-body-paragraph lh li it lj b lk nx kd lm ln ny kg lp lq nz ls lt lu oa lw lx ly ob ma mb mc im bi translated">既然我们已经检查了性能并感到满意，我们可以看看运行中的预测算法了。<em class="pr">(视频中和文末分享的完整代码)。</em></p><p id="0404" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">你可以画出结果来形象化表现。</p><p id="f24a" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">下面是我们的摆动交易算法的最终结果和性能的一个例子:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/01e1a466e176523ea7a213a574e88fa1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EduUyEdREqw4PLIZqjPutg.png"/></div></div></figure><p id="c3f1" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">你可以访问下面的完整视频教程，如果你想在家里开发它，还有进一步的解释:</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="ps po l"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">视频教程</figcaption></figure><h1 id="75fb" class="oe ng it bd nh of og oh nk oi oj ok nn ki ol kj nq kl om km nt ko on kp nw oo bi translated">现场交易</h1><p id="b5ae" class="pw-post-body-paragraph lh li it lj b lk nx kd lm ln ny kg lp lq nz ls lt lu oa lw lx ly ob ma mb mc im bi translated">既然我们已经对模型进行了回溯测试，并分析了模型的性能，我们将构建它来进行现场测试。在下一部分，我们将学习如何把我们的算法变成一个事件编码方法。</p><p id="d68d" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">事实上，我们不能使用这个代码，因为它是现场交易。前一篇文章中学习的回溯测试代码是以<strong class="lj jd">矢量格式</strong>编写的。这意味着您以表格形式传递历史数据，并计算真实数据的信号和策略回报，以查看算法在实际条件下的反应。这就是你如何测试你的策略的有效性。</p><p id="c90c" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">但是<strong class="lj jd">实时交易需要以事件驱动的方式编码</strong>。它将包括获取实时数据作为输入，生成交易信号并向经纪商下单。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi pt"><img src="../Images/52bc2df99de5fcaab44aac6c557eb996.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KswoMmH_jXjVWUtnHxuiUQ.png"/></div></div></figure><p id="573e" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在接下来的文章中，我们将更深入地研究事件驱动的格式代码。让交易机器人为我们运行。</p><p id="95fb" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">如何创建你的事件驱动方法将在第四部分也是最后一部分讨论。最后一部分将在接下来的几周内发表，因为我花了很多时间来写这种类型的文章<strong class="lj jd">。</strong></p><p id="4917" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">所以，想在<a class="ae oc" href="https://lhessani-sajid.medium.com/subscribe" rel="noopener"> <strong class="lj jd">上订阅</strong> </a> <strong class="lj jd"> </strong>或者<a class="ae oc" href="https://www.youtube.com/c/AlgorithmicTradingbySajid" rel="noopener ugc nofollow" target="_blank"> <strong class="lj jd"> Youtube </strong> </a>来获取更新。</p><p id="77dc" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我爱你们所有人。希望你喜欢这第三部；最后一部分会更加精彩。</p><p id="2964" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">快乐编码，</p><p id="b015" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">赛义德</p></div><div class="ab cl pu pv hx pw" role="separator"><span class="px bw bk py pz qa"/><span class="px bw bk py pz qa"/><span class="px bw bk py pz"/></div><div class="im in io ip iq"><h1 id="0881" class="oe ng it bd nh of qb oh nk oi qc ok nn ki qd kj nq kl qe km nt ko qf kp nw oo bi translated">为了更进一步:</h1><h1 id="0359" class="oe ng it bd nh of og oh nk oi oj ok nn ki ol kj nq kl om km nt ko on kp nw oo bi translated">来源:</h1><div class="mm mn gp gr mo mp"><a href="https://www.udemy.com/course/python-for-algorithmic-trading/?couponCode=FIRST_MONTH" rel="noopener  ugc nofollow" target="_blank"><div class="mq ab fo"><div class="mr ab ms cl cj mt"><h2 class="bd jd gy z fp mu fr fs mv fu fw jc bi translated">2021年:一天学会算法交易</h2><div class="mw l"><h3 class="bd b gy z fp mu fr fs mv fu fw dk translated">你好，我是赛义德·赫萨尼。我一直在伦敦的多家银行担任数据科学家，是一名…</h3></div><div class="mx l"><p class="bd b dl z fp mu fr fs mv fu fw dk translated">www.udemy.com</p></div></div><div class="my l"><div class="qg l na nb nc my nd lb mp"/></div></div></a></div><h1 id="ca06" class="oe ng it bd nh of og oh nk oi oj ok nn ki ol kj nq kl om km nt ko on kp nw oo bi translated">推荐内容</h1><p id="2c79" class="pw-post-body-paragraph lh li it lj b lk nx kd lm ln ny kg lp lq nz ls lt lu oa lw lx ly ob ma mb mc im bi translated">如果你想在这个领域更进一步，我可以推荐以下两个课程:</p><p id="008b" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><a class="ae oc" href="https://quantra.quantinsti.com/learning-track/machine-learning-deep-learning-in-financial-markets/?ref=sajidlhessani" rel="noopener ugc nofollow" target="_blank">金融市场的机器学习和深度学习</a></p><p id="d085" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><a class="ae oc" href="https://quantra.quantinsti.com/learning-track/algorithmic-trading-for-everyone/?ref=sajidlhessani" rel="noopener ugc nofollow" target="_blank">人人算法交易</a></p><p id="a494" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><a class="ae oc" href="https://quantra.quantinsti.com/course/trading-with-machine-learning-regression/?ref=sajidlhessani" rel="noopener ugc nofollow" target="_blank">用机器学习回归交易</a></p></div><div class="ab cl pu pv hx pw" role="separator"><span class="px bw bk py pz qa"/><span class="px bw bk py pz qa"/><span class="px bw bk py pz"/></div><div class="im in io ip iq"><h1 id="f59c" class="oe ng it bd nh of qb oh nk oi qc ok nn ki qd kj nq kl qe km nt ko qf kp nw oo bi translated">完整的Python代码—第3/3部分</h1><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="pn po l"/></div></figure></div></div>    
</body>
</html>