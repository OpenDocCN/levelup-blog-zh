<html>
<head>
<title>4 Useful fzf Tricks for Your Terminal</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">4个对你的终端有用的fzf技巧</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/4-useful-fzf-tricks-for-your-terminal-18a5d2a8c0cb?source=collection_archive---------7-----------------------#2021-06-21">https://levelup.gitconnected.com/4-useful-fzf-tricks-for-your-terminal-18a5d2a8c0cb?source=collection_archive---------7-----------------------#2021-06-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="e733" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">欢迎，您可能对使用最好的命令行工具之一——fzf感兴趣。fzf是一个用于模糊搜索的命令行工具。嗯，一开始，听起来可能没那么吸引人。但是，请原谅我，它非常性感，而且它会让你的生活变得更轻松。</p><p id="37c7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我准备了四个窍门，你可以在候机楼里随时准备好。但是首先，让我们回顾一下如何设置fzf。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi ko"><img src="../Images/8e83a00cd7acfdc066431ed4d62c6bd4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1180/format:webp/0*9Xz3m4mGtGfhQkLb.jpg"/></div></figure><h1 id="83c5" class="kw kx it bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">入门指南</h1><p id="45c1" class="pw-post-body-paragraph jq jr it js b jt lu jv jw jx lv jz ka kb lw kd ke kf lx kh ki kj ly kl km kn im bi translated">如果您还没有，您可以使用Git安装fzf:</p><pre class="kp kq kr ks gt lz ma mb mc aw md bi"><span id="e92a" class="me kx it ma b gy mf mg l mh mi">git clone --depth 1 https://github.com/junegunn/fzf.git ~/.fzf ~/.fzf/install</span></pre><p id="1774" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我发现这是最简单的。或者，如果您使用的是macOS，并且想要跳过所有的麻烦，您可以使用以下命令:</p><pre class="kp kq kr ks gt lz ma mb mc aw md bi"><span id="2211" class="me kx it ma b gy mf mg l mh mi">brew install fzf</span><span id="013e" class="me kx it ma b gy mj mg l mh mi"># To install useful key bindings and fuzzy completion:<br/>$(brew --prefix)/opt/fzf/install</span></pre><p id="2b48" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果你仍然有问题，试试关于安装的<a class="ae mk" href="https://github.com/junegunn/fzf#installation" rel="noopener ugc nofollow" target="_blank"> fzf文档。</a></p><h1 id="a803" class="kw kx it bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">麦克风检查</h1><p id="2302" class="pw-post-body-paragraph jq jr it js b jt lu jv jw jx lv jz ka kb lw kd ke kf lx kh ki kj ly kl km kn im bi translated">安装后，让我们去尝试基本的fzf功能。您可以尝试在您的终端中运行<code class="fe ml mm mn ma b">fzf</code>。您应该会看到类似这样的内容:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi mo"><img src="../Images/2b660b4bb8435743e2ed0a8422dd223c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_8hhGrny7pNCHaIQ.gif"/></div></div></figure><p id="1226" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">模糊查找器在您的终端窗口中启动，您可以搜索您想要的任何文件。最酷的是，fzf可以在你打字的时候索引文件。如果你的目录没有太多关于文件和目录的复杂性，你不会注意到底部的索引。</p><h1 id="5fd7" class="kw kx it bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">1.模糊地改变目录</h1><p id="197d" class="pw-post-body-paragraph jq jr it js b jt lu jv jw jx lv jz ka kb lw kd ke kf lx kh ki kj ly kl km kn im bi translated">今天的第一个技巧是使用fzf快速地<code class="fe ml mm mn ma b">cd</code>进入一个目录。可以按<code class="fe ml mm mn ma b">ALT + c</code>(MAC OS上的<code class="fe ml mm mn ma b">OPTION + c</code>)，会得到交互提示。请看下面:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi mo"><img src="../Images/8d8ee2a8039f967011d98b943d43bd28.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*XwWvTv-XzQl_68LX.gif"/></div></div></figure><p id="5565" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">它开始索引你现在所在的目录中的所有目录的内容。你可以开始输入想要的目录，用箭头键选择你需要的目录，然后按回车键进入目录。方便吧？</p><h1 id="e862" class="kw kx it bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">2.穿越历史</h1><p id="6dcf" class="pw-post-body-paragraph jq jr it js b jt lu jv jw jx lv jz ka kb lw kd ke kf lx kh ki kj ly kl km kn im bi translated">老实说，第二个技巧也是我最喜欢的一个，是用fzf搜索命令历史的能力。要开始，请在您的终端中按<code class="fe ml mm mn ma b">CTRL + r</code>。然后，搜索您之前键入的命令。您应该会看到类似这样的内容:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi mo"><img src="../Images/e1a733cbb4a820b7992d30eb2fc88558.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FLBenGrZEPFOstFM.gif"/></div></div></figure><p id="f1ee" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">可以快速跳转到前段时间输入的命令。我发现它在日常生活中非常有用。</p><h1 id="7d05" class="kw kx it bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">3.自动完成任何内容</h1><p id="41da" class="pw-post-body-paragraph jq jr it js b jt lu jv jw jx lv jz ka kb lw kd ke kf lx kh ki kj ly kl km kn im bi translated">您几乎可以在终端的任何地方使用fzf。默认的一个功能是让你快速找到进程杀。你可以通过键入<code class="fe ml mm mn ma b">kill -9</code>并按下<code class="fe ml mm mn ma b">TAB</code>来尝试一下。如果这不起作用，请键入<code class="fe ml mm mn ma b">kill -9 **</code>和<code class="fe ml mm mn ma b">TAB</code>。现在，您可以搜索想要结束的一个或多个流程。</p><p id="41b4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您还可以快速搜索SSH的主机名。为此，键入<code class="fe ml mm mn ma b">ssh **</code>并按下<code class="fe ml mm mn ma b">TAB</code>。您将获得交互式搜索来找到想要的主机名。</p><p id="f29b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">总而言之，下面是一些默认情况下可以使用的选项:</p><pre class="kp kq kr ks gt lz ma mb mc aw md bi"><span id="455a" class="me kx it ma b gy mf mg l mh mi">kill -9 **&lt;TAB&gt;</span><span id="7532" class="me kx it ma b gy mj mg l mh mi">ssh **&lt;TAB&gt;<br/>telnet **&lt;TAB&gt;</span><span id="0e26" class="me kx it ma b gy mj mg l mh mi">unset **&lt;TAB&gt;<br/>export **&lt;TAB&gt;<br/>unalias **&lt;TAB</span></pre><p id="fa36" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果你厌倦了键入<code class="fe ml mm mn ma b">**</code>，你可以通过设置<code class="fe ml mm mn ma b">FZF_COMPLETION_TRIGGER</code>变量来改变fzf触发器。例如:</p><pre class="kp kq kr ks gt lz ma mb mc aw md bi"><span id="ddca" class="me kx it ma b gy mf mg l mh mi"># Use ~~ as the trigger sequence instead of the default **<br/>export FZF_COMPLETION_TRIGGER='~~'</span></pre><p id="1859" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果你想进行下一步，试试<a class="ae mk" href="https://github.com/Aloxaf/fzf-tab" rel="noopener ugc nofollow" target="_blank"> fzf-tab </a>插件。我使用的是zsh和oh-my-zsh，所以设置起来非常简单。该插件基本上是将fzf“插入”到默认的制表符补全中。我建议你尝试一下。</p><h1 id="5396" class="kw kx it bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">4.在选择文件之前预览它们</h1><p id="206f" class="pw-post-body-paragraph jq jr it js b jt lu jv jw jx lv jz ka kb lw kd ke kf lx kh ki kj ly kl km kn im bi translated">另一个很酷的尝试是fzf的预览功能。它允许您在打开文件之前预览文件。要访问它，你需要把<code class="fe ml mm mn ma b">--preview-</code>传给fzf。让我们来看看它的实际应用:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi mo"><img src="../Images/a579c47d0fe0d83107f55e8361a44e4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*uxCjRhV9st3ioABS.gif"/></div></div></figure><p id="0002" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我发出的命令是:</p><pre class="kp kq kr ks gt lz ma mb mc aw md bi"><span id="df45" class="me kx it ma b gy mf mg l mh mi">fzf --preview 'bat --style=numbers --color=always --line-range :500 {}'</span></pre><p id="612b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">但是你可以随意定制。我的命令使用了<code class="fe ml mm mn ma b">bat</code>，你可以在<a class="ae mk" href="https://github.com/sharkdp/bat" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上找到的<code class="fe ml mm mn ma b">cat</code>克隆。您也可以像这样使用简单的<code class="fe ml mm mn ma b">cat</code>命令:</p><pre class="kp kq kr ks gt lz ma mb mc aw md bi"><span id="a22a" class="me kx it ma b gy mf mg l mh mi">fzf --preview 'cat {}'</span></pre><p id="bf12" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">或者，如果您想更进一步，您可以在完成特定命令时设置默认预览选项。您可以显示目录和文件的树状视图，如下所示:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi mo"><img src="../Images/8501e9b334c4195a6ab0dbde279570c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*QmvuC8PfqHebXlMr.gif"/></div></div></figure><p id="96db" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">使用<code class="fe ml mm mn ma b">tree</code>的力量也可以达到类似的效果。我只好用<code class="fe ml mm mn ma b">brew install tree</code>把它安装在macOS上。然后，我添加了<code class="fe ml mm mn ma b">_fzf_comprun</code>函数在shell初始化时加载(可以在<code class="fe ml mm mn ma b">.bashrc</code>或者<code class="fe ml mm mn ma b">.zshrc</code>中添加)。这是它的样子:</p><pre class="kp kq kr ks gt lz ma mb mc aw md bi"><span id="2318" class="me kx it ma b gy mf mg l mh mi">_fzf_comprun() {<br/>  local command=$1<br/>  shift</span><span id="c558" class="me kx it ma b gy mj mg l mh mi">case "$command" in<br/>    cd)           fzf "$@" --preview 'tree -C {} | head -200' ;;<br/>    *)            fzf "$@" ;;<br/>  esac<br/>}</span></pre><p id="96df" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果您愿意，您可以使用更多命令添加更多案例，因为您可能希望不同的命令在其他案例中显示预览。例如，<code class="fe ml mm mn ma b">cat</code>和<code class="fe ml mm mn ma b">bat</code>可以很好地处理文件，但是不能预览SSH到的目录和主机名。</p><h1 id="9906" class="kw kx it bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">5.好处:与Vim集成</h1><p id="8caf" class="pw-post-body-paragraph jq jr it js b jt lu jv jw jx lv jz ka kb lw kd ke kf lx kh ki kj ly kl km kn im bi translated">如果你已经在使用Vim(或者你正在计划)，我必须告诉你，fzf与Vim完美契合。模糊搜索，预览窗口和定制选项是如此可爱，你会希望在其他任何情况下都有它。</p><p id="40e4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果你对设置Vim和fzf感兴趣，可以看看我关于用fzf改进Vim工作流的博文。此外，如果你对我的设置感兴趣，我会在GitHub 上维护和添加我的<a class="ae mk" href="https://github.com/nikolalsvk/dotfiles" rel="noopener ugc nofollow" target="_blank">点文件的新功能。</a></p><h1 id="25da" class="kw kx it bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">总结</h1><p id="41b5" class="pw-post-body-paragraph jq jr it js b jt lu jv jw jx lv jz ka kb lw kd ke kf lx kh ki kj ly kl km kn im bi translated">fzf是一个很好的工具，尤其是当你住在航站楼里的时候。我希望这篇博文能教会你一些新东西，或者启发你尝试这些技巧。</p><p id="4fe6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果你喜欢你所读的，考虑订阅我的<a class="ae mk" href="https://pragmaticpineapple.com/newsletter" rel="noopener ugc nofollow" target="_blank">时事通讯</a>，当有新的帖子出现时，你会得到更新。此外，您还可以在下面的Twitter上评论、点赞或与您的朋友分享:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="e3c2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">下次再见，干杯。</p></div><div class="ab cl mv mw hx mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="im in io ip iq"><p id="e899" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="nc">原载于2021年6月21日https://pragmaticpineapple.com</em><em class="nc"/><a class="ae mk" href="https://pragmaticpineapple.com/four-useful-fzf-tricks-for-your-terminal/" rel="noopener ugc nofollow" target="_blank"><em class="nc">。</em></a></p></div></div>    
</body>
</html>