<html>
<head>
<title>Swift — Filtering: A Real Example</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">快速过滤:一个真实的例子</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/swift-filtering-a-real-example-a1777d8bf7e?source=collection_archive---------3-----------------------#2020-06-26">https://levelup.gitconnected.com/swift-filtering-a-real-example-a1777d8bf7e?source=collection_archive---------3-----------------------#2020-06-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/006f7ac9c5c357f33b61f22c2d29c5a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*iA0ufDRCMQ6aKRI8"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">内森·杜姆劳在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="171f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在任何语言中，你都可以管理<em class="lb">事物的列表</em>。最有可能的是，如果你有一个列表，那么在某个时候你必须过滤它。最有可能的是，您将不得不根据众多标准对其进行多次过滤。让我们从基础开始。</p><h1 id="e419" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">一次一个过滤器</h1><p id="f8c3" class="pw-post-body-paragraph kd ke iq kf b kg ma ki kj kk mb km kn ko mc kq kr ks md ku kv kw me ky kz la ij bi translated">现在是讨论高阶函数的时候了。高阶函数是以另一个函数为参数的函数。也可以是返回函数的函数，但我们不会讨论这个。接受函数的函数。一开始可能看起来很陡，但是一旦你看到了，你就会明白。</p><p id="39a7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">筛选数据最简单的方法是创建一个新列表，只复制所需的元素。</p><figure class="mf mg mh mi gt jr"><div class="bz fp l di"><div class="mj mk l"/></div></figure><p id="1459" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你可以把这个放到一个函数里，每次都用。但是多亏了高阶函数，我们现在可以更快地完成它。</p><figure class="mf mg mh mi gt jr"><div class="bz fp l di"><div class="mj mk l"/></div></figure><p id="71f0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">filter函数接受一个函数，并将其应用于所有元素。然后，我们使用变量<em class="lb"> bookBefore2020HOF </em>来存储结果。</p><p id="1d95" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你可以在媒体和互联网上找到很多这方面的文章。如果你还不熟悉这个概念，我强烈建议你查阅其他文章来获得更多的解释。</p><h1 id="80f4" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">多次过滤，多次过滤。</h1><p id="1837" class="pw-post-body-paragraph kd ke iq kf b kg ma ki kj kk mb km kn ko mc kq kr ks md ku kv kw me ky kz la ij bi translated">让我们深入当前的主题:如何根据多个标准过滤列表。我们的图书清单将不得不根据三个不同的标准(年份，最喜欢的，作者的名字)过滤。你可以同时应用所有的需求，或者任何其他的可能性。</p><p id="53e2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这八个选项是:</p><ul class=""><li id="715f" class="ml mm iq kf b kg kh kk kl ko mn ks mo kw mp la mq mr ms mt bi translated">没有过滤器</li><li id="0a41" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">仅过滤器1</li><li id="4302" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">仅过滤器2</li><li id="8847" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">仅过滤器3</li><li id="5ae4" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">过滤器1和过滤器2</li><li id="c3b3" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">过滤器1和过滤器3</li><li id="2427" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">过滤器2和过滤器3</li><li id="38e0" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">过滤器1、过滤器2和过滤器3</li></ul><p id="1c44" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们试试<strong class="kf ir">而不是</strong>写八个不同的函数。<strong class="kf ir">我们只写一个函数吧。</strong></p><p id="c117" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们的函数将接受数组和我们将创建的过滤器对象。</p><p id="1853" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们的过滤器结构将代表这三个标准。</p><figure class="mf mg mh mi gt jr"><div class="bz fp l di"><div class="mj mk l"/></div></figure><p id="8bb9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你可以看到最喜欢的是一个枚举。这是代码。</p><figure class="mf mg mh mi gt jr"><div class="bz fp l di"><div class="mj mk l"/></div></figure><p id="60a8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">每次你在一个布尔值上有一个过滤器，你只有两种可能:是和不是<em class="lb">这就是为什么我们有布尔值；).</em></p><p id="4671" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但是如果你考虑到过滤器可以或者不可以被应用的事实，那么你有三种可能:是，否，没有过滤器。</p><p id="af4f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这种情况下，使用枚举比管理IF情况更快。</p><p id="bbf3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们得到了支持它的结构和必要的枚举。让我们转到函数。该函数将使用数组和结构SearchingBook。该方法的输出将是一个新的数组，其中的数据已被过滤。</p><p id="21fc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们得到了签名:</p><pre class="mf mg mh mi gt mz na nb nc aw nd bi"><span id="d652" class="ne ld iq na b gy nf ng l nh ni">func filterBooks(books: [Book], by filters: SearchingBook) -&gt; [Book]</span></pre><p id="2124" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于代码，这里有两个逻辑。</p><p id="bcae" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您可以从一个空数组开始，然后添加与过滤器匹配的书籍。或者可以从一本集子开始，去掉不符合的书。第一种方法需要处理重复。这并不难，但却是我们可以避免的额外一步。</p><p id="0986" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们用第二个选择。</p><p id="e112" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">由于第一个过滤器很简单，我们将直接应用它。</p><figure class="mf mg mh mi gt jr"><div class="bz fp l di"><div class="mj mk l"/></div></figure><p id="f224" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们拿出完整的列表，应用第一个过滤器。我们使用double条件来处理<em class="lb"> No Filter </em>。如果值为0，表达式将始终为真，我们将保留所有的书。</p><p id="44ee" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们的第二个过滤器是在<em class="lb">最喜欢的</em>领域。</p><figure class="mf mg mh mi gt jr"><div class="bz fp l di"><div class="mj mk l"/></div></figure><p id="e020" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们使用ENUM来处理这三种可能性。</p><p id="a350" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们只想要最喜欢的书，我们就去掉不喜欢的。如果我们只想要不喜欢的书，我们会删除所有喜欢的书。</p><p id="6ebe" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，如果我们想要所有的书，我们退出开关而不删除任何东西。</p><p id="2664" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我相信你注意到了另一个高阶函数<em class="lb"> removeAll(where:) </em>的使用。名字说明了一切。它从列表中移除符合特定条件的所有元素。</p><p id="d089" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后一个过滤器在作者的名字上。我们将混合使用这两种过滤器。我们将使用IF语句来处理<em class="lb"> No Filter </em>的情况，并使用<em class="lb"> removeAll(where:) </em>高阶函数来过滤书籍。</p><figure class="mf mg mh mi gt jr"><div class="bz fp l di"><div class="mj mk l"/></div></figure><p id="494f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我们已经应用了三个过滤器，可以返回数据了。</p><pre class="mf mg mh mi gt mz na nb nc aw nd bi"><span id="0b78" class="ne ld iq na b gy nf ng l nh ni"><strong class="na ir">return</strong> bookFiltered</span></pre><p id="b243" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="lb">完整功能</em></p><figure class="mf mg mh mi gt jr"><div class="bz fp l di"><div class="mj mk l"/></div></figure><p id="3a85" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们回顾一下我们所拥有的:</p><ul class=""><li id="5b39" class="ml mm iq kf b kg kh kk kl ko mn ks mo kw mp la mq mr ms mt bi translated">处理不同过滤器的结构</li><li id="1e92" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">用于处理布尔筛选器的枚举</li><li id="2dab" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">一个将它们混合起来过滤数据的函数</li></ul><p id="d6af" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">首先，你可以一直使用你的函数，过滤或者不过滤。</p><p id="92f3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">不再有<em class="lb">if</em>来处理所有的可能性。添加新的过滤器也更容易。你只需要更新结构和功能，仅此而已。</p><p id="20d4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第二，这与SwiftUI配合得非常好；).</p><p id="1cc3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您需要将过滤器按钮映射到结构，并使用列表中的函数。仅此而已，没别的了。</p><p id="1649" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当用户激活过滤器时，数据被过滤并呈现。如果用户取消所有选择，将显示所有数据。</p><p id="066a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">可以在这里找到我的游乐场项目:<a class="ae kc" href="https://github.com/satan87/MEDIUM_FiltersSort" rel="noopener ugc nofollow" target="_blank">游乐场</a>。</p></div></div>    
</body>
</html>