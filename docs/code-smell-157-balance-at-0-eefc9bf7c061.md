# 代码气味 157 —平衡值为 0

> 原文：<https://levelup.gitconnected.com/code-smell-157-balance-at-0-eefc9bf7c061>

## 今天我在钱包里期待一笔付款。余额为 0。我慌了。

![](img/28a1b0a3b41870816b193ed72651105b.png)

> *TL；DR: Null 不等于 0。错误不为 0。刚好 0 就是 0。*

# 问题

*   [空值](https://codeburst.io/null-the-billion-dollar-mistake-c2918c92f7e0)
*   UX
*   可用性

# 解决方法

1.  明确区分零和错误。

# 语境

我读过很多关于安全问题的文章。

尤其是在加密方面。

上周，我读到了一个[加密黑客线程](https://twitter.com/stephenlacy/status/1554697083331891201)。

当我的钱包显示余额为 0 时，我慌了。

那只是 UX 的味道。

区块链遥不可及💩

# 示例代码

## 错误的

```
"""
Below code is automatically generated by code-davinci-002 on GTP3 Codex1\. check balance with blokchain
2\. If blockchain is unreachable show 0 as the balance
"""import requests
import jsondef get_balance(address):
    url = "https://blockchain.info/q/addressbalance/" + address
    response = requests.get(url)
    if response.status_code == 200:
        return response.text
    else:
        return 0
```

## 对吧

```
"""
Below code is automatically generated by code-davinci-002 on GTP3 Codex1\. check balance with blockchain
2\. If blockchain is unreachable throw an error
"""import requests
import jsondef get_balance(address):
    url = "https://blockchain.info/q/addressbalance/" + address
    response = requests.get(url)
    if response.status_code == 200:
        return response.text
    else:
        raise BlockchainNotReachableError("Error reaching blockchain")
```

# 侦查

[X]手册

这是一种设计气味。

当一个[异常](https://blog.devgenius.io/code-smell-73-exceptions-for-expected-cases-ea870197d5fc)或[返回代码](https://blog.devgenius.io/code-smell-72-return-codes-1b869fb53f54)被抛出并用 0 屏蔽时，我们可以找到模式。

# 标签

*   UX

# 结论

始终遵循[最小惊讶原则](https://en.wikipedia.org/wiki/Principle_of_least_astonishment)作为指导。

# 关系

[](https://blog.devgenius.io/code-smell-12-null-64fbd7792a7c) [## 代码气味 12 —空

### 程序员使用 Null 作为不同的标志。它可以提示缺席、未定义的值、错误等。

blog.devgenius.io](https://blog.devgenius.io/code-smell-12-null-64fbd7792a7c) [](/code-smell-139-business-code-in-the-user-interface-83b0941b657a) [## 代码味道 139 —用户界面中的业务代码

### 验证是否应该在接口上？

levelup.gitconnected.com](/code-smell-139-business-code-in-the-user-interface-83b0941b657a) [](https://blog.devgenius.io/code-smell-73-exceptions-for-expected-cases-ea870197d5fc) [## 代码气味 73 —预期情况的例外

blog.devgenius.io](https://blog.devgenius.io/code-smell-73-exceptions-for-expected-cases-ea870197d5fc) [](https://blog.devgenius.io/code-smell-72-return-codes-1b869fb53f54) [## 代码气味 72 —返回代码

blog.devgenius.io](https://blog.devgenius.io/code-smell-72-return-codes-1b869fb53f54) 

# 更多信息

[](https://codeburst.io/null-the-billion-dollar-mistake-c2918c92f7e0) [## Null:十亿美元的错误

### 他不是我们的朋友。它不会简化生活，也不会让我们更有效率。只是更懒。是时候停止了…

codeburst.io](https://codeburst.io/null-the-billion-dollar-mistake-c2918c92f7e0) 

# 信用

照片由 [Jasmin Sessler](https://unsplash.com/@jasmin_sessler) 在 [Unsplash](https://unsplash.com/s/photos/panic) 上拍摄

# 放弃

代码气味只是我的[观点](https://mcsee.medium.com/i-wrote-more-than-90-articles-on-2021-here-is-what-i-learned-76c238f9936f)。

> 我对 Null 的真正批评是，它又一次不必要地带来了必须选择是不检查就快速运行程序还是检查就慢速运行程序的痛苦。

东尼·霍尔(无效发明者)

[](https://blog.devgenius.io/software-engineering-great-quotes-3af63cea6782) [## 软件工程名言

### 有时一个简短的想法可以带来惊人的想法。

blog.devgenius.io](https://blog.devgenius.io/software-engineering-great-quotes-3af63cea6782) 

本文是 CodeSmell 系列的一部分。

[](https://blog.devgenius.io/how-to-find-the-stinky-parts-of-your-code-fa8df47fc39c) [## 如何找到你的代码中有问题的部分

### 代码很难闻。让我们看看如何改变香味。

blog.devgenius.io](https://blog.devgenius.io/how-to-find-the-stinky-parts-of-your-code-fa8df47fc39c)