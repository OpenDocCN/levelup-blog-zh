<html>
<head>
<title>How to change git default branch from master</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何从主服务器更改git默认分支</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-change-git-default-branch-from-master-3933afab08f9?source=collection_archive---------1-----------------------#2020-08-25">https://levelup.gitconnected.com/how-to-change-git-default-branch-from-master-3933afab08f9?source=collection_archive---------1-----------------------#2020-08-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/9c556887949dc247b2e05449af9cd885.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*N976fSr1AfsDJJTY.png"/></div></div></figure><p id="1eb3" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">最近，有许多关于将默认分支<strong class="kd iu">主</strong>重命名为其他名称的建议。这主要是由于主从隐喻。</p><p id="c2ba" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">有<a class="ae kz" href="https://git.github.io/rev_news/2020/07/29/edition-65/" rel="noopener ugc nofollow" target="_blank">证据</a>表明其意在提及<strong class="kd iu">原版拷贝</strong>或<strong class="kd iu">原版录音。</strong>而且也不打算主从。</p><p id="0ca0" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">但我认为这是人们的观点，他们应该被授权做出这种改变。</p><p id="5bdf" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">那么让我们看看如何将默认的git分支<strong class="kd iu"> <em class="la">主</em> </strong>改为<strong class="kd iu"> <em class="la">默认</em> </strong>(你可以使用你喜欢的名字)</p><p id="df57" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu">在开始之前，我必须告诉你，我已经在多个回购中尝试过了，它工作得很好，没有任何突破性的变化。如果你没有足够的信心，那么叉你的回购，并尝试第一次。</strong></p><h2 id="41c3" class="lb lc it bd ld le lf dn lg lh li dp lj km lk ll lm kq ln lo lp ku lq lr ls lt bi translated">先决条件</h2><ol class=""><li id="e61b" class="lu lv it kd b ke lw ki lx km ly kq lz ku ma ky mb mc md me bi translated">确保您的CI/CD流程不会被中断。</li><li id="92fa" class="lu lv it kd b ke mf ki mg km mh kq mi ku mj ky mb mc md me bi translated">确保您已经合并了针对<strong class="kd iu">主机的所有PRs。</strong>其他PRs正常</li></ol><h2 id="8f7d" class="lb lc it bd ld le lf dn lg lh li dp lj km lk ll lm kq ln lo lp ku lq lr ls lt bi translated">重命名默认分支有三个步骤</h2><ol class=""><li id="7624" class="lu lv it kd b ke lw ki lx km ly kq lz ku ma ky mb mc md me bi translated">更改分支名称</li><li id="de07" class="lu lv it kd b ke mf ki mg km mh kq mi ku mj ky mb mc md me bi translated">为新分支机构设置远程上游跟踪</li><li id="9894" class="lu lv it kd b ke mf ki mg km mh kq mi ku mj ky mb mc md me bi translated">在repo主机中更改新的分支名称(Github，Gitlab)</li></ol><h2 id="5604" class="lb lc it bd ld le lf dn lg lh li dp lj km lk ll lm kq ln lo lp ku lq lr ls lt bi translated">更改分支名称</h2><pre class="mk ml mm mn gt mo mp mq mr aw ms bi"><span id="a5be" class="lb lc it mp b gy mt mu l mv mw">git branch -m master default</span></pre><p id="9908" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">上面的命令只是将默认分支重命名为名称<strong class="kd iu"> default。</strong></p><p id="1860" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu"> -m </strong>属性用于在不影响分支历史的情况下重命名分支名称。</p><figure class="mk ml mm mn gt ju gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/9852333181701b8aa6a218dfb1c6008d.png" data-original-src="https://miro.medium.com/v2/resize:fit:946/format:webp/0*3E8mZHBUHoORsO8f.png"/></div></figure><p id="ae8b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在，默认分支在本地发生了变化，但在远程没有发生变化。</p><h2 id="fa6e" class="lb lc it bd ld le lf dn lg lh li dp lj km lk ll lm kq ln lo lp ku lq lr ls lt bi translated">为新分支机构设置远程上游跟踪</h2><pre class="mk ml mm mn gt mo mp mq mr aw ms bi"><span id="db92" class="lb lc it mp b gy mt mu l mv mw">git push -u origin default</span></pre><p id="f187" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">上述命令会将新分支推送到远程。</p><p id="d441" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu"> -u </strong>属性用于设置分支的上游跟踪。</p><figure class="mk ml mm mn gt ju gh gi paragraph-image"><div class="gh gi my"><img src="../Images/da07672f3eea368a1d8975ad93870de4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1346/format:webp/0*F8qTTgOSBWSdGN7V.png"/></div></figure><p id="3294" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">正如你所看到的，上游是为新的分支设置的。但是，对旧上游的引用仍然存在于本地。</p><h2 id="f706" class="lb lc it bd ld le lf dn lg lh li dp lj km lk ll lm kq ln lo lp ku lq lr ls lt bi translated">在回购主机中更改新的分支名称</h2><p id="1ccb" class="pw-post-body-paragraph kb kc it kd b ke lw kg kh ki lx kk kl km mz ko kp kq na ks kt ku nb kw kx ky im bi translated">在本教程中，我们来考虑一下Github。但是同样的选项在Gitlab，Bitbucket也有。</p><p id="5fa3" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在Github中，进入设置-&gt;分支。您可以在那里更改默认分支。</p><figure class="mk ml mm mn gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nc"><img src="../Images/1cf005476ed86858b6689aa48e3e2f50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*FI67ueZxNl0ZXnX4.png"/></div></div></figure><p id="8bec" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">就这样，你完了。</p><p id="d8d5" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">但是请记住，旧分支的上游仍然存在。不会影响你的工作流程。但你应该删除它，以保持你的回购干净。</p><p id="7d16" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">要删除旧分支的上游，您可以使用</p><pre class="mk ml mm mn gt mo mp mq mr aw ms bi"><span id="fbcc" class="lb lc it mp b gy mt mu l mv mw">git push origin --delete master</span></pre><figure class="mk ml mm mn gt ju gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/e24e92dc4e75c114e6717d8b0eb5c0ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1254/format:webp/0*0B5nqh-gMtNVfOMc.png"/></div></figure><p id="9543" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如您所见，旧的远程流已被删除。</p><p id="5ccc" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在，在本地主机和远程主机上都完成了更改。让我们看看如何把这些带给已经在使用回购的其他人。</p><p id="318b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我的意思是会有其他人使用这个回购。他们必须做一些改变来完成流程。</p><figure class="mk ml mm mn gt ju gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/9afc8e1c66aecf18707c7e855bda8c3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1124/format:webp/0*NlL7ffc8clU6rgmQ.png"/></div></figure><p id="66af" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">正如你所看到的，分支机构<strong class="kd iu">主机构</strong>仍然存在于已经在使用回购协议的其他机构的本地。</p><h2 id="c32e" class="lb lc it bd ld le lf dn lg lh li dp lj km lk ll lm kq ln lo lp ku lq lr ls lt bi translated">对于已经在使用回购的人来说，有三个步骤</h2><ol class=""><li id="704b" class="lu lv it kd b ke lw ki lx km ly kq lz ku ma ky mb mc md me bi translated">把所有的树枝都拿来</li><li id="3dc0" class="lu lv it kd b ke mf ki mg km mh kq mi ku mj ky mb mc md me bi translated">更新上游遥控器的头部</li><li id="951b" class="lu lv it kd b ke mf ki mg km mh kq mi ku mj ky mb mc md me bi translated">重命名默认分支</li></ol><h2 id="f681" class="lb lc it bd ld le lf dn lg lh li dp lj km lk ll lm kq ln lo lp ku lq lr ls lt bi translated">把所有的树枝都拿来</h2><pre class="mk ml mm mn gt mo mp mq mr aw ms bi"><span id="08e9" class="lb lc it mp b gy mt mu l mv mw">git fetch</span></pre><p id="9bc3" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">上述命令将把所有远程分支提取到本地。</p><h2 id="4c63" class="lb lc it bd ld le lf dn lg lh li dp lj km lk ll lm kq ln lo lp ku lq lr ls lt bi translated">更新上游远程头</h2><pre class="mk ml mm mn gt mo mp mq mr aw ms bi"><span id="d5c0" class="lb lc it mp b gy mt mu l mv mw">git remote set-head origin -a</span></pre><p id="c43d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">上述命令将向远程主机查询HEAD upstream，并在本地更新该upstream。</p><h2 id="ee48" class="lb lc it bd ld le lf dn lg lh li dp lj km lk ll lm kq ln lo lp ku lq lr ls lt bi translated">重命名默认分支</h2><pre class="mk ml mm mn gt mo mp mq mr aw ms bi"><span id="c743" class="lb lc it mp b gy mt mu l mv mw">git branch -m master default</span></pre><p id="ca42" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这个和旧的一样。我们只是移动分支，而不影响分支的历史。</p><p id="a306" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">由于我们在上一步中已经将远程设置为上游，因此新的分支发生了变化，并与远程同步。</p><p id="7b04" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在这个人可以使用默认的分支了。</p><p id="4bea" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">正如我前面所说的，我已经在我的多个回购中试过了，它工作得很好，没有任何突破性的变化。这一开始看起来可能会令人困惑，但是如果你理解这个过程并多次阅读，你就会熟悉了。</p><p id="4521" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果你有任何疑问或被困在某个地方，你可以联系我。</p><p id="f1dd" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">感谢您的阅读。希望你学到了新东西:)</p><p id="aa4e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果你来了这么久，我想你会对Git很感兴趣。可以订阅我的简讯<a class="ae kz" href="https://gitbetter.substack.com/" rel="noopener ugc nofollow" target="_blank"><strong class="kd iu">GitBetter</strong></a><strong class="kd iu">获取Git的招数、技巧、高级话题。</strong></p></div></div>    
</body>
</html>