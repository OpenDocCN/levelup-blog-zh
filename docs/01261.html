<html>
<head>
<title>How to Setup CI/CD for Flutter Apps with GitHub Actions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用GitHub动作为Flutter应用程序设置CI/CD</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/ci-cd-for-flutter-apps-3a56e3fc6d8e?source=collection_archive---------1-----------------------#2019-12-09">https://levelup.gitconnected.com/ci-cd-for-flutter-apps-3a56e3fc6d8e?source=collection_archive---------1-----------------------#2019-12-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/a85255f5fad74ec0c9aadbe0f5f7a864.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QhICFqF12MLm0MMiYeFH_A.png"/></div></div></figure><p id="8bcc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">一些程序员声称，在构建好的软件和快速编写代码以实现业务目标之间，总是存在一个两难的选择。有了CI/CD(持续集成/持续交付),开发人员能够编写更好的软件，也能更快地构建产品，这对每个人来说都是双赢的。</p><p id="3b4f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这篇文章是关于<a class="ae kw" href="https://inveritasoft.com/technologies/flutter" rel="noopener ugc nofollow" target="_blank">用Flutter </a>实现CI/CD的指南，以及为什么集成到您的工程团队中很重要。</p><h1 id="e9a6" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">理论方面</h1><p id="675b" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">他们说你不能取悦每个人，但是CI/CD打破了这个规则。这个简单的想法属于IT先驱<a class="ae kw" href="https://en.wikipedia.org/wiki/Grady_Booch" rel="noopener ugc nofollow" target="_blank">格雷迪·布奇</a>。你能想象你的同事一天三次拿着软盘从一个部门跑到另一个部门去介绍CI吗？这就是1991年实施CI的挑战性。如今，事情已经不那么复杂了。</p><p id="e303" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">CI/CD的主要目的是将工作产品版本连续合并到主开发分支中，并频繁执行项目构建，以发现潜在的bug并解决集成问题。</p><figure class="mb mc md me gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ma"><img src="../Images/8b9021a759d2b8eed1b732ab39358f1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*1uPDJRejC5Tcq6cD.png"/></div></div></figure><p id="e7b6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你越快找到一个bug，你为它付出的代价就越少。有时价格太高，像T4水手1号和Therac 25号。</p><h1 id="ab58" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">竞争情报对企业有什么好处？</h1><p id="f7bd" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated"><strong class="ka ir"> 1。高效的开发者</strong></p><p id="d98a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">通过整合CI，开发团队变得更加有利可图，并且软件项目的成本降低。CI旨在细化集成过程，从而将其分解为简单的日常开发任务，以帮助最小化构建成本并在软件生命周期的早期检测缺陷。</p><p id="b32d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> 2。更快的软件构建</strong></p><p id="b789" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">基础架构和部署是自动化的。每个人都喜欢看到他们的工作成果，尤其是开发人员，并且业务部门可以马上看到这些代码的好处。当开发人员可以利用测试自动化时，部署更小的代码补丁风险更小，因此他们有更少的开销和与QA团队的协调。</p><p id="e570" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> 3。专注于解决业务问题</strong></p><p id="5068" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">开发-运营团队必须支持管道开发，这有助于开发人员专注于解决业务问题，而无需考虑基础设施部署。</p><h1 id="4559" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">实用方面</h1><p id="d508" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">inVerita Flutter开发人员在使用CI系统方面经验丰富，如Jenkins、Circle IO、Bitrase和Gitlab CI。由于我们有一个Github项目代码库，最好将CI集成到Github中，而不是任何其他第三方服务。</p><p id="362e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Github Actions是Github的一个新特性，允许用户直接在Github存储库中创建CI/CD系统。开发人员和开发运营人员可以编写单独的任务，称为操作，并将它们组合起来创建一个定制的工作流。它让我们能够构建我们的产品，快速测试我们的应用程序，并发布它们。最棒的是你可以在Github内部做到这一点，避免第三方网站。</p><p id="4c12" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Github私有库通常提供每月2000分钟的免费构建计划。对于中型和大型项目，我们通常每月使用1800分钟的构建时间。</p><p id="92ac" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在我们来谈谈整合一个Flutter app的CI/CD工作流所需的步骤。</p><p id="a7e7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> 1)创建Github项目</strong></p><p id="a096" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">例如，你有一个标准的颤动计数器应用程序。</p><figure class="mb mc md me gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mf"><img src="../Images/ee55f71c0c8f91fc861c817a4018fae1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*XwP9UUkVVLtwVS9X.png"/></div></div></figure><p id="13ff" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后向项目中添加Flutter集成测试、单元测试和小部件测试。</p><figure class="mb mc md me gt jr"><div class="bz fp l di"><div class="mg mh l"/></div><figcaption class="mi mj gj gh gi mk ml bd b be z dk translated">部件测试</figcaption></figure><figure class="mb mc md me gt jr"><div class="bz fp l di"><div class="mg mh l"/></div><figcaption class="mi mj gj gh gi mk ml bd b be z dk translated">集成测试(UI测试)</figcaption></figure><p id="0bdd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> 2)添加工作流文件</strong></p><p id="2bc0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在您的Flutter项目的根文件夹中，创建一个新文件夹<strong class="ka ir">。github </strong>和一个子文件夹<strong class="ka ir">工作流</strong>。这就是你的工作流程<strong class="ka ir">所在。yml </strong>或<strong class="ka ir">。yaml </strong>扩展文件将驻留(例如我们提供了它的<strong class="ka ir"> main.yaml </strong>)</p><p id="d957" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">一个项目可以有多个工作流文件，但是为了简单起见，我们建议该项目只使用一个文件。</p><p id="9d5f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> 3)写命令</strong></p><p id="8aba" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们试图用注释解释文件的每一行。如果你需要更多关于Github动作语法的信息，点击这里查看<a class="ae kw" href="https://help.github.com/en/actions/automating-your-workflow-with-github-actions/workflow-syntax-for-github-actions" rel="noopener ugc nofollow" target="_blank"/>。</p><figure class="mb mc md me gt jr"><div class="bz fp l di"><div class="mg mh l"/></div><figcaption class="mi mj gj gh gi mk ml bd b be z dk translated">运行单元和小部件测试作业</figcaption></figure><p id="e2df" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们集成了CodeCov，从CI中自动生成漂亮的报告。</p><p id="b896" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这些报告看起来是这样的:</p><figure class="mb mc md me gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mm"><img src="../Images/42b71fea8a47ff6cb90d619d37e9f70a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*4SRbTZVTK6IbYpk9.png"/></div></div><figcaption class="mi mj gj gh gi mk ml bd b be z dk translated">CI报告#1</figcaption></figure><figure class="mb mc md me gt jr gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/0950221499453d8ef454332d54e88ce9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/0*8C9fUaZm7YSVae8W.png"/></div><figcaption class="mi mj gj gh gi mk ml bd b be z dk translated">CI报告#2</figcaption></figure><figure class="mb mc md me gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mo"><img src="../Images/04a4585eceeb958c1202c7b59a33b5b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Dc6XqNa3dZ3zYm90.png"/></div></div><figcaption class="mi mj gj gh gi mk ml bd b be z dk translated">CI报告#3</figcaption></figure><figure class="mb mc md me gt jr"><div class="bz fp l di"><div class="mg mh l"/></div><figcaption class="mi mj gj gh gi mk ml bd b be z dk translated">运行集成测试iOS作业</figcaption></figure><figure class="mb mc md me gt jr"><div class="bz fp l di"><div class="mg mh l"/></div><figcaption class="mi mj gj gh gi mk ml bd b be z dk translated">运行集成测试android作业</figcaption></figure><figure class="mb mc md me gt jr"><div class="bz fp l di"><div class="mg mh l"/></div><figcaption class="mi mj gj gh gi mk ml bd b be z dk translated">构建和部署作业</figcaption></figure><blockquote class="mp mq mr"><p id="3858" class="jy jz ms ka b kb kc kd ke kf kg kh ki mt kk kl km mu ko kp kq mv ks kt ku kv ij bi translated"><strong class="ka ir">关于如何改进工作流程的建议。我们建议在Slack、Telegram或微信中为开发者添加个人通知，因为这可以让他们在需要时快速提供帮助。</strong></p></blockquote><h1 id="3b87" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">查看Github中的工作流和发布</h1><p id="77c3" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">一旦您推送了代码，您可以通过进入<code class="fe mw mx my mz b">&lt;repo-url&gt;/actions</code>来查看工作流程。</p><figure class="mb mc md me gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi na"><img src="../Images/ec74f29edf19f4fd6c51f2c65a2ff188.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*eGXMndab3JxdYzXK.png"/></div></div></figure><p id="d435" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你可以通过<code class="fe mw mx my mz b">&lt;repo-url&gt;/releases</code>看到发布文件。</p><figure class="mb mc md me gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nb"><img src="../Images/41b2b800ff61fcfe22ff458f4da2c720.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*MgQUfd_uZhe81R08.png"/></div></div></figure><p id="a09b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你的网站将被发布<code class="fe mw mx my mz b">&lt;yourusername&gt;.github.io/&lt;repo-name&gt;</code>。这里有一个<a class="ae kw" href="https://inveritasoft.github.io/inverita_CI_CD_Flutter_demo" rel="noopener ugc nofollow" target="_blank">的例子</a>。</p><figure class="mb mc md me gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nc"><img src="../Images/06d2b7f083395f069e0ea9fe53baa266.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*zmRBE04s9ZG3I1gE.png"/></div></div></figure><p id="95ef" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在您有了一个漂亮的桌面应用程序。</p><figure class="mb mc md me gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nd"><img src="../Images/2889b9766ab57695b9f755da373f0ec7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Sqf6JK7lI156RFTP.png"/></div></div></figure><p id="5877" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae kw" href="https://github.com/nazarcybulskij/CI_CD_Flutter_Demo" rel="noopener ugc nofollow" target="_blank">完整代码在这里</a>。</p><h1 id="4f5e" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">有用的链接</h1><p id="a2a3" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated"><a class="ae kw" href="https://medium.com/flutter-community/run-flutter-driver-tests-on-github-actions-13c639c7e4ab" rel="noopener">关于在Github actions上运行颤振驱动测试的伟大文章</a></p><p id="70ad" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae kw" href="https://help.github.com/en/actions/automating-your-workflow-with-github-actions/workflow-syntax-for-github-actions" rel="noopener ugc nofollow" target="_blank">关于GitHub动作doc </a></p><p id="f80e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae kw" href="https://flutter.dev/docs/cookbook/testing" rel="noopener ugc nofollow" target="_blank">颤振测试</a></p><h1 id="9615" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">包裹</h1><p id="ad05" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">我们相信，在许多情况下，CI/CD提高了代码质量，并允许我们比其他方法更快地迭代一流的产品。</p><p id="39b8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">什么时候应该使用CI/CD？我们建议您在从头开始开发时使用它。如果您有单一的IT系统，并且您想将CI/CD集成到开发过程中，请三思，因为您将不得不根据新的需求重建架构。更有可能的是，在对旧代码进行改进时，你不会从CI中受益，但如果你将它用于新项目，你肯定会赢。如果你坚持开发Flutter应用程序，请联系inVerita。</p></div><div class="ab cl ne nf hu ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ij ik il im in"><p id="b7d3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="ms">原载于2019年12月9日</em><a class="ae kw" href="https://inveritasoft.com/blog/ci-cd-for-flutter-apps" rel="noopener ugc nofollow" target="_blank"><em class="ms">inveritasoft.com</em></a><em class="ms"/></p></div></div>    
</body>
</html>