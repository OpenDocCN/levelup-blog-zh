<html>
<head>
<title>React &amp; Ethereum: Getting Started With The Minimum Toolset Required — Part 1 of 4</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React &amp; Ethereum:从所需的最少工具集开始—第1部分，共4部分</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/https-medium-com-zubairnahmed-react-ethereum-getting-started-with-the-minimum-toolset-required-part-1-of-4-9562efa23d18?source=collection_archive---------0-----------------------#2017-11-09">https://levelup.gitconnected.com/https-medium-com-zubairnahmed-react-ethereum-getting-started-with-the-minimum-toolset-required-part-1-of-4-9562efa23d18?source=collection_archive---------0-----------------------#2017-11-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="bd0c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">了解如何使用所需的最少工具集创建智能合约并将其部署到以太坊区块链:Remix、Metamask和任何文本编辑器。</p><p id="d409" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"><em class="kl">第一部分</em></strong><a class="ae km" href="https://medium.com/@zubairnahmed/react-ethereum-getting-started-with-the-minimum-toolset-required-part-2-of-4-ad4d258ebe53" rel="noopener"><em class="kl">第二部分</em></a><a class="ae km" href="https://medium.com/@zubairnahmed/react-ethereum-getting-started-with-the-minimum-toolset-required-part-3-of-4-6f8c55c751f5" rel="noopener"><em class="kl">第三部分</em></a><a class="ae km" href="https://medium.com/@zubairnahmed/react-ethereum-getting-started-with-the-minimum-toolset-required-part-4-of-4-478be958c16f" rel="noopener"><em class="kl">第四部分</em></a><em class="kl"/><strong class="jp ir"/></p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi kn"><img src="../Images/f7177bdfe131c97cb0fc682ea059c27e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cggtIczxdXVEF4VwLYAoYw.jpeg"/></div></div><figcaption class="kz la gj gh gi lb lc bd b be z dk translated">Pixabay图像，在<a class="ae km" href="https://creativecommons.org/publicdomain/zero/1.0/deed.en" rel="noopener ugc nofollow" target="_blank">知识共享CC0 </a>下发布。</figcaption></figure><p id="6e6e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">更新</strong>:此博客系列不再维护。</p><h1 id="bf1a" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">介绍</h1><p id="75a3" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">这篇文章的本质是展示React如何与以太坊区块链对话。只会用到三个工具，所以学习曲线会很短。这个项目将被分成五个阶段，以便于跟踪。</p><p id="c3f9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">目标受众:学生/初学者/中级初学者，以及任何有好奇心的人。</p><p id="f272" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kl">先决条件</em>:基本熟悉JavaScript、React、npm和命令行。乙醚和气体的简单知识。</p><p id="f1bd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae km" href="http://solidity.readthedocs.io/en/latest/index.html" rel="noopener ugc nofollow" target="_blank">可靠性</a>将用于编写我们的<a class="ae km" href="http://solidity.readthedocs.io/en/latest/introduction-to-smart-contracts.html#" rel="noopener ugc nofollow" target="_blank">智能合同</a>，尽管不需要熟悉它。我会尽力解释发生了什么，我会将相关关键词链接到<a class="ae km" href="http://solidity.readthedocs.io/en/latest" rel="noopener ugc nofollow" target="_blank"> Solidity文档</a>以便于参考。</p><p id="d9b3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kl">设计说明</em>:我将这篇文章设计成一次学习经历，旨在提供对所用工具集和Solidity编程语言的简单而详细的理解。练习、凭记忆回忆、遵循过程是这种体验的一部分。</p><p id="db70" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae km" href="https://github.com/zubairnahmed/react_ethereum_blockchain" rel="noopener ugc nofollow" target="_blank"> <em class="kl"> GitHub仓库</em> </a>:如果你愿意，你可以和我的仓库一起编码。我添加了一些评论作为指导。</p></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><p id="935a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kl">个人过程注释</em>:我想提一下，尽管这些帖子看起来是线性的，但我学习和编写这个例子的过程远非如此。它是非线性的，有点像螺旋。我应用了我在斯坦福大学学习的快速原型/快速迭代过程，在这个过程中，我尝试一些小的东西，调试它，再尝试，再调试，重复，直到我达到我的目标。在沮丧的时候，我会散步休息，理清思绪，查阅谷歌搜索，然后再试一次。我觉得这个过程在编写代码的领域是普遍的。这一点我肯定是错的，尽管我在许多同龄人身上看到过这种情况。我已经学会热爱这个过程，并从中获得乐趣。</p></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h2 id="d002" class="mn le iq bd lf mo mp dn lj mq mr dp ln jy ms mt lr kc mu mv lv kg mw mx lz my bi translated">成套工具</h2><p id="14db" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">对于这个项目，我们将使用:</p><ul class=""><li id="981f" class="mz na iq jp b jq jr ju jv jy nb kc nc kg nd kk ne nf ng nh bi translated"><strong class="jp ir"> Remix IDE </strong>:以太坊开发团队提供的Solidity开发环境。在网上可以买到<a class="ae km" href="https://remix.ethereum.org" rel="noopener ugc nofollow" target="_blank">这里</a>。在我们学习的过程中，请保持开放。</li><li id="6690" class="mz na iq jp b jq ni ju nj jy nk kc nl kg nm kk ne nf ng nh bi translated"><strong class="jp ir"> Metamask </strong>:一个铬合金扩展，用来连接以太坊区块链。请<a class="ae km" href="https://chrome.google.com/webstore/detail/metamask/nkbihfbeogaeaoehlefnkodbefgpgknn" rel="noopener ugc nofollow" target="_blank">安装它</a>并设置您的帐户。我们将用它来连接以太坊Ropsten测试网。</li><li id="c6ae" class="mz na iq jp b jq ni ju nj jy nk kc nl kg nm kk ne nf ng nh bi translated"><strong class="jp ir">文本编辑器</strong>:你选择的任何文本编辑器都会很好用。我们将从第2阶段开始使用编辑器，通过Metamask将React与Ropsten Testnet Etherium区块链连接起来。</li></ul><h2 id="0922" class="mn le iq bd lf mo mp dn lj mq mr dp ln jy ms mt lr kc mu mv lv kg mw mx lz my bi translated">阶段概述</h2><p id="b9c5" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">每个阶段都旨在展示具体的知识金块。它们是独立的，并且建立在彼此的基础上，就像第2阶段建立在第1阶段的基础上一样。</p><ul class=""><li id="5abb" class="mz na iq jp b jq jr ju jv jy nb kc nc kg nd kk ne nf ng nh bi translated"><strong class="jp ir">第0期</strong> : <em class="kl">熟悉Remix，打造智能合约脚手架。</em></li><li id="7b2d" class="mz na iq jp b jq ni ju nj jy nk kc nl kg nm kk ne nf ng nh bi translated"><strong class="jp ir">第一阶段</strong> : <em class="kl">创建一个公共变量，在JavaScript VM上部署智能合约，在Remix中与之交互。</em></li><li id="8048" class="mz na iq jp b jq ni ju nj jy nk kc nl kg nm kk ne nf ng nh bi translated"><strong class="jp ir">第二阶段</strong> : <em class="kl">创建私有变量，将智能合约部署到以太坊Ropsten Testnet，使用Metamask作为中介，在React前端与私有变量进行交互。</em></li><li id="056b" class="mz na iq jp b jq ni ju nj jy nk kc nl kg nm kk ne nf ng nh bi translated"><strong class="jp ir">阶段3 </strong> : <em class="kl">从React操作智能合约的状态。</em></li><li id="458c" class="mz na iq jp b jq ni ju nj jy nk kc nl kg nm kk ne nf ng nh bi translated"><strong class="jp ir">第4阶段</strong> : <em class="kl">签订一份有条件的智能合同，并探讨其含义。</em></li></ul><h1 id="cd21" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">阶段0:重新组合IDE和智能合约框架</h1><p id="e69a" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">我们将打开<a class="ae km" href="https://remix.ethereum.org" rel="noopener ugc nofollow" target="_blank"> Remix IDE </a>，开始熟悉它的布局，特别是右边的栏。我们从那里开始。</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi nn"><img src="../Images/0f26da132d55199299d8e2caa7a4dba9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UBsrsO5kT3k6JQ3bEVavgw.png"/></div></div><figcaption class="kz la gj gh gi lb lc bd b be z dk translated">在<strong class="bd lf">编译</strong>选项卡打开的情况下，重新混合IDE的右栏</figcaption></figure><p id="dc8c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">编译</strong>标签<a class="ae km" href="http://remix.readthedocs.io/en/latest/compile_tab.html" rel="noopener ugc nofollow" target="_blank">编译【Remix加载时编辑器中的源代码。编译后，Remix提供了一个</a><a class="ae km" href="http://remix.readthedocs.io/en/latest/analysis_tab.html" rel="noopener ugc nofollow" target="_blank"> <em class="kl">静态分析</em> </a>，它提供了警告和错误，我们可以用它们来编辑我们的代码。我们现在可以安全地忽略警告。</p><p id="99d0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">默认情况下，顶部附近的“<em class="kl">自动编译”</em>框处于选中状态。我个人更喜欢取消选中它，这样编译器就不会随着我在编辑器中所做的每一个改变而触发。然后每次需要编译源代码时，手动点击“<em class="kl">开始编译”</em>按钮。</p><p id="d47b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，让我们看看<strong class="jp ir">运行</strong>选项卡。</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi no"><img src="../Images/22dbc215318b959f96062b921c5c412f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0720aW4aD-nTuUyAhjhKRg.png"/></div></div><figcaption class="kz la gj gh gi lb lc bd b be z dk translated">打开<strong class="bd lf">运行</strong>选项卡的Remix IDE右栏</figcaption></figure><p id="519e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们从<strong class="jp ir">运行</strong>选项卡部署智能合同。请注意<em class="kl">环境</em>下拉菜单和浅红色<em class="kl">创建</em>按钮。首先，我们选择<em class="kl">环境</em>来声明我们部署的上下文，然后我们单击<em class="kl">创建</em>来创建智能契约。</p><p id="cf6e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<em class="kl">环境</em>菜单下，我们将使用这些选项:</p><ul class=""><li id="4835" class="mz na iq jp b jq jr ju jv jy nb kc nc kg nd kk ne nf ng nh bi translated">JavaScript VM:在我们的浏览器上部署和使用我们的智能合约。</li><li id="a729" class="mz na iq jp b jq ni ju nj jy nk kc nl kg nm kk ne nf ng nh bi translated"><strong class="jp ir">注入Web3 </strong>:在以太坊Ropsten测试网或以太坊主网上通过Metamask部署我们的智能合约。</li></ul><p id="6c4c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们将在这个项目中频繁使用<strong class="jp ir">编译</strong>和<strong class="jp ir">运行</strong>选项卡。</p><p id="0503" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Remix中的左栏是文件浏览器，中间一栏包含代码编辑器和控制台。我认为这些是不言自明的。</p><h2 id="1b01" class="mn le iq bd lf mo mp dn lj mq mr dp ln jy ms mt lr kc mu mv lv kg mw mx lz my bi translated">智能合约脚手架</h2><p id="0fa0" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">Remix通常附带一些代码。请删除这段代码，并将左侧选项卡上的文件名改为<em class="kl"> ReactExample.sol </em>。然后我们将在中间一栏的编辑器中输入我们的代码。</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div class="gh gi np"><img src="../Images/9216cb0b5e42c3639f93049bb590e3ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:924/format:webp/1*rC8qkzeZWiB1hEiQB8W3MA.png"/></div><figcaption class="kz la gj gh gi lb lc bd b be z dk translated">Solidity Smart合同的初始框架</figcaption></figure><p id="0e31" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">注意:我提供了一张图片，这样人们可以练习打字，而不是复制/粘贴。这将有助于建立记忆，也是更好的学习体验。</p><p id="7740" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因为没有假设你熟悉可靠性，所以我将试着解释代码的每一部分。</p><p id="3cc3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kl">第1行</em>:告诉Solidity编译器源代码是0.4.11版本写的。支持更高版本，但不包括版本0.5.0。我随意选择了0.4.11版本——在现实项目中，选择一个版本将是一个权衡利弊的技术决策。</p><p id="092c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kl">第4行</em>:声明一个<strong class="jp ir"> <em class="kl">类型的状态变量地址</em> </strong>，命名为<strong class="jp ir"> <em class="kl">拥有者</em> </strong>。它被声明为<a class="ae km" href="http://solidity.readthedocs.io/en/latest/contracts.html?highlight=private#visibility-and-getters" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir"><em class="kl">private</em></strong></a>，所以它的值在我们的契约之外是不可见的。一个<a class="ae km" href="http://solidity.readthedocs.io/en/latest/types.html#address" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> <em class="kl">地址</em></strong></a>类型保存一个160位的值，大小相当于一个以太坊地址。状态变量存储在智能合约的<a class="ae km" href="http://solidity.readthedocs.io/en/latest/introduction-to-smart-contracts.html#storage-memory-and-the-stack" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> <em class="kl">存储器</em> </strong> </a>中，这是一个永久存储区。</p><p id="80fa" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kl">第6行</em>:提供了一个<a class="ae km" href="http://solidity.readthedocs.io/en/latest/contracts.html?highlight=constructor#creating-contracts" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> <em class="kl">构造函数</em> </strong> </a>，创建智能合约时运行一次。它的可见性设置为<a class="ae km" href="http://solidity.readthedocs.io/en/latest/miscellaneous.html?highlight=public#function-visibility-specifiers" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir"><em class="kl">public</em></strong></a>，这意味着它对所有人都可见。我们契约中的所有函数都是<em class="kl"> public </em>，如果没有指定的话，这是默认的可见性修饰符。构造函数的名称必须与契约的名称相同，在我们的例子中是ReactExample。</p><p id="9388" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kl">第7行</em>:将<strong class="jp ir"> <em class="kl">所有者</em> </strong>初始化为创建合同者的<strong class="jp ir"> <em class="kl">地址</em> </strong>。创建者的地址包含在<a class="ae km" href="http://solidity.readthedocs.io/en/latest/units-and-global-variables.html?highlight=msg.sender#block-and-transaction-properties" rel="noopener ugc nofollow" target="_blank"> <em class="kl"> msg.sender </em> </a>中。<em class="kl">注意</em>:在JavaScript和其他编程语言中，我们需要<em class="kl"> this </em>关键字来引用智能契约实例。在Solidity中，这个上下文不需要，但是<a class="ae km" href="http://solidity.readthedocs.io/en/latest/control-structures.html#external-function-calls" rel="noopener ugc nofollow" target="_blank"> <em class="kl">外部函数</em> <em class="kl">调用</em> </a>需要。</p><p id="950d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kl">第10行</em>:提供一个功能，<em class="kl">拥有者</em>可以在智能合约被破坏的情况下调用。援引它会破坏合同。</p><p id="aa7d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kl">第11行</em>:确保只有<strong class="jp ir"> <em class="kl">所有者</em> </strong>可以自毁合同。<a class="ae km" href="http://solidity.readthedocs.io/en/latest/control-structures.html?highlight=require#error-handling-assert-require-revert-and-exceptions" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir">要求(</strong> <em class="kl">条件</em> <strong class="jp ir"> ) </strong> </a>如果括号内的条件为<em class="kl">假</em>则抛出异常。</p><p id="de87" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">第12行:毁约。<em class="kl">回忆</em>:<strong class="jp ir">:<em class="kl">拥有者</em> </strong>是一个<strong class="jp ir"> <em class="kl">地址</em> </strong>，所以<a class="ae km" href="http://solidity.readthedocs.io/en/latest/introduction-to-smart-contracts.html?highlight=selfdestruct#self-destruct" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir">自毁(</strong> <em class="kl">拥有者</em> <strong class="jp ir"> ) </strong> </a>要将其余额转发给<strong class="jp ir"> <em class="kl">拥有者</em> </strong>。</p><p id="9314" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kl">第15行</em>:提供一个匿名函数，称为<a class="ae km" href="http://solidity.readthedocs.io/en/latest/contracts.html#fallback-function" rel="noopener ugc nofollow" target="_blank">回退函数</a>。<a class="ae km" href="http://solidity.readthedocs.io/en/latest/miscellaneous.html?highlight=payable" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> <em class="kl">应付</em></strong></a><strong class="jp ir"><em class="kl"/></strong>修饰符保证了该函数可以接收<em class="kl">乙醚</em>。<a class="ae km" href="http://solidity.readthedocs.io/en/latest/control-structures.html?highlight=revert()#error-handling-assert-require-revert-and-exceptions" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir">revert()</strong></a><strong class="jp ir"/>调用将<em class="kl">以太</em>返回给调用该函数的任何人。</p><p id="c301" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这就是第0阶段。现在，我们对Remix和Solidity的一些基本工作原理有了更多的了解，让我们进入第1阶段，开始使用一个部署的智能契约。</p></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="e023" class="ld le iq bd lf lg nq li lj lk nr lm ln lo ns lq lr ls nt lu lv lw nu ly lz ma bi translated">阶段1: Remix的JavaScript VM &amp;与智能合约交互</h1><p id="b682" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">现在我们有了一个基本的智能契约，我们将添加一个<a class="ae km" href="http://solidity.readthedocs.io/en/latest/introduction-to-smart-contracts.html#subcurrency-example?highlight=public" rel="noopener ugc nofollow" target="_blank"> <em class="kl">公共状态变量</em> </a>，部署契约，并与之交互—所有这些都在Remix IDE内完成。</p><p id="a25e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先，让我们添加两行代码:</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi nv"><img src="../Images/a8e71b7640f1e9c96b3c06fbed29d3c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NhCyJGktjQZgLJcmn-L9Ew.png"/></div></div><figcaption class="kz la gj gh gi lb lc bd b be z dk translated">字符串类型的公共状态变量，称为<strong class="bd lf"> you_awesome </strong></figcaption></figure><p id="5e95" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kl">第5行</em>:声明一个<strong class="jp ir"> <em class="kl">公共</em> </strong> <a class="ae km" href="http://solidity.readthedocs.io/en/latest/types.html#string-literals" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> <em class="kl">字符串</em> </strong> <em class="kl">类型</em> </a>变量叫做<strong class="jp ir"> <em class="kl"> you_awesome </em> </strong>。当一个<strong class="jp ir"> <em class="kl">公共</em> </strong> <em class="kl"> </em>状态变量被声明时，它被存储在智能合约的<a class="ae km" href="http://solidity.readthedocs.io/en/latest/introduction-to-smart-contracts.html#storage-memory-and-the-stack" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> <em class="kl">存储器</em> </strong> </a>中，Solidity自动为它创建一个公共getter函数<strong class="jp ir"> <em class="kl">。</em> </strong> <em class="kl">回忆:</em> <strong class="jp ir"> <em class="kl">存储</em> </strong>是智能合约的持久存储区。这个公共的getter函数是我们在这一节将要用到的。</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi nw"><img src="../Images/7e5f8d9666404b65cfb7276ed51d2081.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XjFyXK_Lo1ODyptVipayVw.png"/></div></div><figcaption class="kz la gj gh gi lb lc bd b be z dk translated">添加第9行，它将<strong class="bd lf"> you_awesome </strong>变量初始化为“You 're awesome”</figcaption></figure><p id="8534" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kl">第9行</em>:用值“<em class="kl">You are awesome</em>”初始化<strong class="jp ir"> <em class="kl"> you_awesome </em> </strong>变量。回忆一下:构造函数只被调用一次，当契约被创建时。到目前为止，我们还没有部署我们的合同。</p><h2 id="e0d7" class="mn le iq bd lf mo mp dn lj mq mr dp ln jy ms mt lr kc mu mv lv kg mw mx lz my bi translated">JavaScript虚拟机上智能合约的首次部署</h2><p id="5e90" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated"><em class="kl">一般流程注意事项</em>:请记住这个流程。我们将在以后的阶段中引用它。任何时候，我们在任何<em class="kl">环境</em>环境中部署智能合同时，我们都将遵循以下步骤:</p><ul class=""><li id="bee9" class="mz na iq jp b jq jr ju jv jy nb kc nc kg nd kk ne nf ng nh bi translated">首先点击<strong class="jp ir">编译</strong>选项卡上的<em class="kl">开始编译</em>按钮。</li><li id="e70b" class="mz na iq jp b jq ni ju nj jy nk kc nl kg nm kk ne nf ng nh bi translated">一旦我们的源代码被编译并且分析被检查，我们将点击<strong class="jp ir"> Run </strong>选项卡。</li><li id="9602" class="mz na iq jp b jq ni ju nj jy nk kc nl kg nm kk ne nf ng nh bi translated">然后我们将在<strong class="jp ir"> </strong>我们的<em class="kl">环境</em>下拉菜单中选择<strong class="jp ir"> JavaScript VM </strong>或<strong class="jp ir">注入Web3 </strong>。</li><li id="6716" class="mz na iq jp b jq ni ju nj jy nk kc nl kg nm kk ne nf ng nh bi translated">最后，点击“<em class="kl">创建</em>按钮。</li></ul><p id="83b1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kl">调试注意事项</em>:如果在以后的阶段没有登录到元掩码中，那么<strong class="jp ir">注入的Web3 </strong>将显示一个错误。请确保您在处理此项目时已登录。这个注释现在还不适用，但以后会有用。</p><p id="0a37" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于我们的第一次部署，我们将使用<strong class="jp ir"> JavaScript VM </strong>环境。</p><p id="2a5b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">总的来说，在快速迭代我们的智能契约代码时，我们将总是部署在<strong class="jp ir"> JavaScript VM </strong>环境中，因为它很快并且运行在我们的浏览器上。这是一个测试我们实验的好地方，它不需要额外的设置，也就是说，不需要Metamask或React。</p><p id="0ffb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当我们准备好让我们的智能合约与一个真实的以太坊区块链(Ropsten Testnet或真实的以太坊区块链)合作时，我们将使用<strong class="jp ir">注入Web3 </strong>环境。当部署在实时网络上时，客户端可以通过我们将在下一阶段讨论的接口与智能合约进行交互。这个过程至少需要设置Metamask和React。</p><p id="7def" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">好了，让我们在<strong class="jp ir"> JavaScript VM </strong>环境中部署我们的第一个智能合约，并开始使用它吧！</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi nx"><img src="../Images/9359122ea2716a8466cd8f2f640ee548.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yqX41_NVy5tBUpSX-xxo_g.png"/></div></div><figcaption class="kz la gj gh gi lb lc bd b be z dk translated">我们第一个部署的智能合同，它位于我们的浏览器中。合同界面位于底部，在“0待处理交易”部分之后</figcaption></figure><p id="2193" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">屏幕截图底部出现的彩色按钮是我们智能合约的一部分——它们是我们编写的函数。注意<strong class="jp ir"> <em class="kl"> owner </em> </strong>变量没有显示出来——这是因为它的可见性被设置为<strong class="jp ir"> <em class="kl"> private </em> </strong>，所以Solidity编译器不会为它创建一个公共getter函数。</p><p id="d098" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果您单击'<em class="kl"> you_awesome </em>'按钮，我们的<strong class="jp ir"> <em class="kl"> public </em> </strong>状态变量的getter函数将检索该值，并将其显示在代码编辑器下方的控制台上。</p><p id="6bb0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">第一阶段到此为止。我们现在已经在Remix上编写了一个简单的智能契约，将它部署在JavaScript VM环境中，并在我们的浏览器上与它进行交互。接下来，我们将把一个<strong class="jp ir"> <em class="kl">私有</em> </strong>状态变量添加到我们的智能契约，部署到一个实时测试网络，设置元掩码作为我们的中介，并启动一个React前端来查询该变量。</p></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><p id="40de" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">第一部分</strong><a class="ae km" href="https://medium.com/@zubairnahmed/react-ethereum-getting-started-with-the-minimum-toolset-required-part-2-of-4-ad4d258ebe53" rel="noopener"><em class="kl">第二部分</em></a><a class="ae km" href="https://medium.com/@zubairnahmed/react-ethereum-getting-started-with-the-minimum-toolset-required-part-3-of-4-6f8c55c751f5" rel="noopener"><em class="kl">第三部分</em></a><a class="ae km" href="https://medium.com/@zubairnahmed/react-ethereum-getting-started-with-the-minimum-toolset-required-part-4-of-4-478be958c16f" rel="noopener"><em class="kl">第四部分</em></a><em class="kl"/><strong class="jp ir"/></p></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><figure class="ko kp kq kr gt ks gh gi paragraph-image"><a href="https://levelup.gitconnected.com/"><div class="gh gi ny"><img src="../Images/439094b9a664ef0239afbc4565c6ca49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S9uYu-fFL3hIQLGVu0o-EQ.png"/></div></a></figure><div class="nz oa gp gr ob oc"><a href="https://gitconnected.com/learn/solidity" rel="noopener  ugc nofollow" target="_blank"><div class="od ab fo"><div class="oe ab of cl cj og"><h2 class="bd ir gy z fp oh fr fs oi fu fw ip bi translated">学习可靠性——最佳可靠性教程(2019) | gitconnected</h2><div class="oj l"><h3 class="bd b gy z fp oh fr fs oi fu fw dk translated">14大坚实度教程。课程由开发者提交并投票，让你找到最好的稳定性…</h3></div><div class="ok l"><p class="bd b dl z fp oh fr fs oi fu fw dk translated">gitconnected.com</p></div></div><div class="ol l"><div class="om l on oo op ol oq kx oc"/></div></div></a></div></div></div>    
</body>
</html>