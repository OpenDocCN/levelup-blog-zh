<html>
<head>
<title>Tips to Learn Ruby with a Python Background</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python背景学习Ruby的技巧</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/tips-to-learn-ruby-with-a-python-background-2ca806a891ba?source=collection_archive---------3-----------------------#2022-01-09">https://levelup.gitconnected.com/tips-to-learn-ruby-with-a-python-background-2ca806a891ba?source=collection_archive---------3-----------------------#2022-01-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/516cea3873a94bbf79e5921363ea29ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*emin70-c5bGDyncSKZAHag.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">我在循环上的示例Ruby脚本</figcaption></figure><p id="7843" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在我开始在现在的公司工作后，我意识到我需要学习用Ruby编程。由于我从大学就开始使用Python，学习一门新的编程语言对我来说并不太难。Ruby的语法和风格与Python不同并不奇怪，但是如果你想学习Ruby并有Python背景来加速你的学习曲线，我想给你一些提示！</p><p id="e8b4" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">理解字符串的双引号</strong> <br/>在Ruby中粘贴字符串中的变量非常简单，就像在字符串中粘贴“#{variable}”，类似于Python中的f字符串。例如，如果你有一个年龄= 10的变量，我可以用下面的代码打印一个人的年龄。</p><p id="49d4" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">然而，我第一次感到困惑，为什么它有时工作，但有时我得到一个错误。然后，我发现你“#{variable}”只对带双引号的字符串有效。作为一个新的Ruby程序员，我不知道使用单引号和双引号的字符串有什么区别。显然，您只能在双引号中粘贴“#{}”和转义序列，如果在单引号字符串中粘贴，任何一种语法都会抛出错误。</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="2e76" class="lj lk iq lf b gy ll lm l ln lo"># To print a person's age<br/>age = 10<br/>puts “The person’s age is #{age}”</span></pre><p id="0027" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">最佳实践是始终用单引号定义字符串，除非您需要粘贴“#{}”或转义序列。</p><p id="dda7" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">习惯Ruby语法——尤其是Nil</strong>T5】当你用Ruby编码时，试着暂时忘记Python风格的语法吧！在第一个脚本中，当用Ruby编码时，我的脑袋总是在想如果变量是None 的话，我会怎么想。Null在很多编程语言中都有自己的关键字，它在Ruby中的语法是<em class="lp"> nil </em>，use <em class="lp">。零？</em>证明变量是否为空/</p><p id="9f19" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">缩进替换为“end”</strong><br/>缩进是Python的东西！Ruby里没有这样的规则，你用关键字<strong class="ke ir"> end </strong>来关闭一个函数。它类似于Java中使用的括号。除了周末后心不在焉，我忘记在函数后放关键字<strong class="ke ir"> end </strong>的一个常见原因是有太多的函数需要我放一个<strong class="ke ir"> end </strong>来关闭一个函数。我从编写Java中得到的一个好习惯是在一个封闭的括号后放一个注释来表示我正在关闭什么函数，我把这个好习惯带到Ruby来放一个<em class="lp"> end func </em>或<em class="lp"> end if </em>的注释。</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="800d" class="lj lk iq lf b gy ll lm l ln lo">def some_func(num1, num2)<br/>    if num1 &gt; num2<br/>        then puts "#{num1} is greater than #{num2}"<br/>    else<br/>        puts 'num1 is a small number!'<br/>    end # end if<br/>end # end func</span></pre><p id="7ff1" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">放一个注释来关闭一个函数对你调试有很大帮助！虽然缩进不是Ruby中的一个规则，但是您仍然应该尽最大努力让您的代码更具可读性。Python这个东西不是必需的，但它绝对是一个好习惯，让你在调试脚本时更轻松。</p><p id="b3ce" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">布尔不是数据类型</strong> <br/>一个惊人的事实是True和False在Ruby中是两种不同的数据类型！它的意思是Boolean在Ruby中不作为数据类型存在。True本身是一种数据类型；false本身是另一种数据类型。在Ruby中否定true或false与将变量从一种类型转换为另一种类型是一样的。</p><p id="4c7d" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">Ruby中另一个与true或false相关的独特语法是unless语句，它是if语句的否定。如果你想证明某个条件是真还是假，这是很有帮助的。</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="439b" class="lj lk iq lf b gy ll lm l ln lo"># Let's pretend we want to print if num is not 0<br/>unless num == 0<br/>   then puts num<br/>end # end unless</span></pre><p id="d354" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">使用unless语句不像一个Rubyist新手那么直接，因为它涉及到你头脑中大量的“否定思维”，如果你一开始就感到困惑，不要难过！</p><p id="a6f6" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">说到unless语句，如果你想证明一个变量是否不为null，你应该有一个习惯，用unless语句来证明，如下图:</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="d58c" class="lj lk iq lf b gy ll lm l ln lo"># Python way<br/>if var is not None:<br/>    print('Variable is null')</span><span id="4b48" class="lj lk iq lf b gy lq lm l ln lo"># Ruby way<br/>unless var.nil?<br/>    then puts 'Variable is null'<br/>end # end unless</span></pre><p id="81e4" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir"> Ruby风格而非Python习惯</strong> <br/>虽然Ruby采用了Python风格的语法来迭代数组中的元素(some_array  style中的<em class="lp"> for i)，但是最好习惯each()函数的Ruby风格。</em></p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="04e2" class="lj lk iq lf b gy ll lm l ln lo"># some_array is an array with numbers<br/># This is the Python style<br/>for i in some_array do<br/>    puts i<br/>end # end for<br/># It works but not very Rubyist</span><span id="c3cf" class="lj lk iq lf b gy lq lm l ln lo"># Try to write this instead<br/>some_array.each{|i| puts i}</span></pre><p id="3c42" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我试图避免在开始时使用each函数的原因之一是，我认为每个函数在每次迭代中只能执行一次操作，因为括号中没有空间来放置多个操作。直到几个月后，我才意识到只需稍微修改一下语法就可以进行多种操作！只需用“do”关键字替换括号，并用“end”结束每个函数。当你需要放一个if语句时，它特别有用:</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="7ade" class="lj lk iq lf b gy ll lm l ln lo"># If you have multiple operations within each function<br/>some_array.each do |i|<br/>   if i&gt;=0 <br/>       then puts i<br/>   else <br/>       puts "#{i}" is a negative number<br/>   end # end if<br/>end # end each</span></pre><p id="74c3" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">如果您采用Ruby风格的语法，作为Ruby专家，不仅您的代码更可信，而且它还能帮助您理解和习惯在其他功能中使用管道作为参数。您可能要做的另一个常见任务是用CSV gem将数据保存在CSV文件中，它使用管道接受参数来打开文件并将数据写入其中。</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="e627" class="lj lk iq lf b gy ll lm l ln lo">CSV.open(filename,"w") do |csv_file|<br/>        some_array.each{|i| csv_file &lt;&lt; i}<br/>end # Close csv</span></pre><p id="396b" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">了解什么是符号对于许多像我一样的新Ruby爱好者来说，符号是最大的困惑，尤其是当他们学习如何用Ruby编写一个类的时候。用Ruby编写一个类非常方便，因为你可以将属性评估器作为“getter”和“setter”函数的组合来获取或设置类对象的属性:</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="b485" class="lj lk iq lf b gy ll lm l ln lo">class person<br/>	def initialize(age) # Constructor<br/>		@age = age<br/>	end<br/><br/>	# Setter + Getter function<br/>	attr_accessor :age<br/>end</span></pre><p id="86e8" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">但是，当冒号和attribute的语法出现时，我感到非常困惑，并错误地认为它是一种特殊类型的变量。原来Ruby中的一个符号是一个不可变的字符串，允许多次引用，而不需要额外的内存来提高效率。它既不是一个变量，也不是一个字符串，而是一个特殊的Ruby实例，在为Ruby初学者编写类时要记住使用它。</p><p id="56bc" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我的另一个符号用例是使用Sequel，一个Ruby gem来查询关系数据库。当使用Sequel查询时，它需要符号中的列名才能执行。一个例子是，当我们有一个股票价格的表，我们希望苹果公司的股票价格按时间顺序排列:</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="2e43" class="lj lk iq lf b gy ll lm l ln lo"># This is same as select * from fund_price where ticker='AAPL' order by pricedate<br/>result = ds.select(:ticker, :pricedate, :price).order(:pricedate).where(ticker: 'AAPL').all</span></pre><p id="f53f" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">如果您有一个字符串形式的列名列表，请使用<em class="lp">。to_sym </em>将字符串转换成符号。</p><p id="a97b" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">结论</strong> <br/>对于一个Python爱好者来说，学习Ruby是一件有趣的事情，如果你了解Python的话，学习Ruby并不需要太多时间。但是不要像在some_array 中为I编码<em class="lp">那样用Python思维来编码Ruby，试着用它的原生语法来编码Ruby，就像使用each函数一样！</em></p><div class="lr ls gp gr lt lu"><a href="https://www.linkedin.com/in/jacquessham/" rel="noopener  ugc nofollow" target="_blank"><div class="lv ab fo"><div class="lw ab lx cl cj ly"><h2 class="bd ir gy z fp lz fr fs ma fu fw ip bi translated">Jacques Sham -数据工程师- GoodData | LinkedIn</h2><div class="mb l"><h3 class="bd b gy z fp lz fr fs ma fu fw dk translated">查看雅克·沙姆在全球最大的职业社区LinkedIn上的个人资料。雅克有5个工作列在他们的…</h3></div><div class="mc l"><p class="bd b dl z fp lz fr fs ma fu fw dk translated">www.linkedin.com</p></div></div><div class="md l"><div class="me l mf mg mh md mi jw lu"/></div></div></a></div></div></div>    
</body>
</html>