# å¦‚ä½•åœ¨ NGX å¼•å¯¼æ¨¡å¼å’Œçˆ¶æ¨¡å¼ä¹‹é—´ä¼ é€’æ•°æ®

> åŸæ–‡ï¼š<https://levelup.gitconnected.com/how-to-pass-data-between-ngx-bootstrap-modal-and-parent-e348cd596cf7>

å°†æ•°æ®ä»çˆ¶æ¨¡å‹ä¼ é€’åˆ°æ¨¡å‹ï¼Œå¹¶ä»æ¨¡å‹è·å¾—å¯¹çˆ¶æ¨¡å‹çš„å“åº”ï¼Œè¿™æ˜¯æˆ‘ä»¬åœ¨å¼€å‘æ—¶ç»å¸¸é‡åˆ°çš„æƒ…å†µã€‚è¿™ç¯‡æ–‡ç« ç»™å‡ºäº†ä¸€ä¸ªåˆçº§çš„æ¼”ç¤ºï¼Œä½†æ˜¯åœ¨å®ƒå˜å¾—ä»¤äººåŒçƒ¦ä¹‹å‰ï¼Œä½ å¯ä»¥è‡ªç”±åœ°ç›´æ¥è·³è¿‡ä¸»é¢˜ğŸ¤ ã€‚

*   å¦‚ä½•å°†æ•°æ®ä»çˆ¶èŠ‚ç‚¹ä¼ é€’åˆ°æ¨¡æ€èŠ‚ç‚¹
*   å¦‚ä½•å°†æ•°æ®ä»æ¨¡æ€ä¼ é€’åˆ°çˆ¶ä»£

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä½¿ç”¨ä¸€ä¸ª*é¡¹ç›®åˆ—è¡¨ç»„ä»¶*ä½œä¸ºçˆ¶ç»„ä»¶ï¼Œä½¿ç”¨*æ·»åŠ é¡¹ç›®è¡¨å•*ä½œä¸ºæ¨¡æ€ç»„ä»¶ğŸ˜‰ã€‚

![](img/bbfb5eadc3bac16644f5ea205db6d733.png)

## å¯åŠ¨é¡¹ç›®

é¦–å…ˆå»ºç«‹ä¸€ä¸ªæ–°çš„ angular é¡¹ç›®ï¼Œå®‰è£…*ngx-bootstrap model*ã€‚

`ng add ngx-bootstrap â€” component modals`

åˆ›å»ºä¸€ä¸ªç®€å•çš„ç»„ä»¶ *ItemList* æ¥æ˜¾ç¤ºæ·»åŠ åˆ°æ•°ç»„ä¸­çš„é¡¹ç›®åˆ—è¡¨ã€‚
`ng g c itemList`

*item-list.component.html*

*item-list.component.ts*

![](img/f045783ef022ca81c6016ef132127d3a.png)

å®Œæˆçš„é¡¹ç›®åˆ—è¡¨

è®©æˆ‘ä»¬åˆ›å»ºå¦ä¸€ä¸ªç»„ä»¶ä½œä¸ºæ¨¡æ€ã€‚

`ng g c itemAdd`

*çš„ç¬¬äºŒä¸ªç»„ä»¶æ·»åŠ äº†ä¸€ä¸ªæ–°é¡¹ç›®*ï¼Œå®ƒå°†åœ¨å°†æ¥ç”¨ä½œæ¨¡æ€ã€‚æ­¤å¤–ï¼Œæˆ‘å†™äº†ä¸€ä¸ªç®€å•çš„å‡½æ•°å«åš`saveToList()`ï¼Œå®ƒä¹Ÿå°†åœ¨æœªæ¥å®ç°ã€‚ç°åœ¨ï¼Œæˆ‘å·²ç»æ”¾äº†ä¸€ä¸ªç®€å•çš„æ§åˆ¶å°æ—¥å¿—ï¼Œåªæ˜¯ä¸ºäº†æ˜¾ç¤ºè¾“å…¥å­—æ®µä¸­çš„å€¼ã€‚

*numberOfItems* å°†æ˜¯ç°æœ‰æ•°ç»„ä¸­çš„é¡¹ç›®æ•°ã€‚

*item-add.component.html*

*é¡¹ç›®-æ·»åŠ ç»„ä»¶. ts*

![](img/cd77f2c4a435e78e891142e12ec44b8b.png)

å·²å®Œæˆæ·»åŠ é¡¹ç›®ç»„ä»¶

## æ·»åŠ ä¸€ä¸ªæ¨¡æ€

è®©æˆ‘ä»¬ä¿®æ”¹ä»£ç ï¼Œå½“ç‚¹å‡»*æ·»åŠ æ–°é¡¹ç›®*æŒ‰é’®æ—¶ï¼Œæ‰“å¼€*æ·»åŠ é¡¹ç›®è¡¨å•*ä½œä¸ºæ¨¡æ€ã€‚

*item-list.component.ts*

ä¸è¦å¿˜è®°å°† *ItemAddComponent* æ·»åŠ åˆ° *app.module.ts* ä¸­çš„ *entryComponents* åˆ—è¡¨ä¸­

```
providers: [],
entryComponents: [ItemAddComponent],
```

## å°†å€¼ä»çˆ¶çº§ä¼ é€’åˆ°æ¨¡æ€

æˆ‘ä»¬å¯ä»¥ç®€å•åœ°ä½¿ç”¨ initialState å°†åˆå§‹å€¼ä¼ é€’ç»™æ¨¡æ€ğŸ˜Š

*item-list.component.ts*

è¦ä»æ·»åŠ é¡¹ç›®æ¨¡å¼ä¸­è¯»å–è¯¥å€¼ï¼Œ

åˆå§‹åŒ– modal ä¸­çš„åˆ—è¡¨ï¼Œ *item-add.component.ts*

`list: any[] = [];`

ç„¶å *initialState* åˆ—è¡¨å¯ä»¥ä½œä¸ºâ€œ*list[]â€*è®¿é—®ã€‚

æˆ‘ä»¬æ­£åœ¨å‘é€ä¸€ä¸ªæ ·æœ¬æ•°æ®â€œæµ‹è¯•â€,å®ƒå¯ä»¥ä½œä¸ºåˆ—è¡¨[0]ä»*item-add.component.html*è®¿é—®

`<label>Number of Items : </label> {{list[0]}}`

æƒ³æƒ³çœ‹ï¼Œæˆ‘ä»¬æƒ³è¦**å°†ä¸€ä¸ªå¯¹è±¡**ä»*é¡¹åˆ—è¡¨*ä¸­ä¼ é€’åˆ°æ¨¡æ€ä¸­ã€‚

*item-list.component.ts*

`<label>Number of Items : </label> {{list[0].value}}`

![](img/30fb87ea691e529943ad88d7fbe27e88.png)

å°†å€¼ä»çˆ¶çº§ä¼ é€’åˆ°æ¨¡æ€

## å°†å€¼ä»æ¨¡æ€ä¼ é€’ç»™å­çº§

è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•ä»*æ·»åŠ é¡¹ç›®è¡¨å•*å‘*é¡¹ç›®åˆ—è¡¨*ä¼ é€’ä¸€ä¸ªå€¼ã€‚åœ¨ *item-add.component.ts* ä¸­å£°æ˜ä¸€ä¸ª`EventEmitter`

`public event: EventEmitter<any> = new EventEmitter();`

ä¿å­˜é¡¹ç›®æ—¶å‘å‡ºäº‹ä»¶ã€‚

```
triggerEvent(item: string) {
    this.event.emit({ data: item , res:200 });
}
```

*é¡¹ç›®-æ·»åŠ ç»„ä»¶. ts*

åœ¨ *item-list.component.ts* ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥*è®¢é˜…*åˆ°*äº‹ä»¶å‘å°„å™¨*ã€‚

*item-list.component.ts*

![](img/7e7177ba9474df6fef4426e08c63ecf5.png)

åœ¨çˆ¶çº§å’Œæ¨¡æ€ä¹‹é—´ä¼ é€’æ•°æ®

å®Œæ•´ä»£ç å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°ã€‚