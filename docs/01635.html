<html>
<head>
<title>Successfully porting complex data-driven frontends to React with GraphQL</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">成功移植复杂的数据驱动前端以与GraphQL进行交互</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/successfully-porting-complex-data-driven-frontends-to-react-w-graphql-83a011da5a2a?source=collection_archive---------9-----------------------#2020-01-17">https://levelup.gitconnected.com/successfully-porting-complex-data-driven-frontends-to-react-w-graphql-83a011da5a2a?source=collection_archive---------9-----------------------#2020-01-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="6270" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">当移植现有代码以进行反应时，需要注意一些事情。本文分享了我在移植Rails应用程序的一部分以通过GraphQL反应和消费数据时的经验。</p><h1 id="0ce5" class="ko kp it bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">构建上下文，评估您要移植的内容</h1><p id="61db" class="pw-post-body-paragraph jq jr it js b jt lm jv jw jx ln jz ka kb lo kd ke kf lp kh ki kj lq kl km kn im bi translated">如果您熟悉将要移植的部分，那就太好了。然而，即使您以前处理过该特定代码，仍然可能有您不知道的隐藏功能。</p><p id="6fc2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在我的例子中，我不熟悉我正在移植的项目的具体部分。这意味着我必须建立大量关于功能、不同特性以及用户在使用该部分时可能处于的状态的上下文。</p><p id="afec" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">以下几个问题有助于获得高层次的概述，并找出页面的关键方面:</p><ul class=""><li id="bc21" class="lr ls it js b jt ju jx jy kb lt kf lu kj lv kn lw lx ly lz bi translated"><strong class="js iu">用途:</strong>这个页面是做什么用的？用户为什么会去这个页面？</li><li id="bd18" class="lr ls it js b jt ma jx mb kb mc kf md kj me kn lw lx ly lz bi translated"><strong class="js iu">动作:</strong>用户常用的工作流有哪些？</li><li id="bd9c" class="lr ls it js b jt ma jx mb kb mc kf md kj me kn lw lx ly lz bi translated"><strong class="js iu">状态:</strong>与该页面交互的用户可以处于哪些不同的状态？有空的状态吗？如果用户没有正确的权限或者页面出现错误怎么办？</li><li id="ccb2" class="lr ls it js b jt ma jx mb kb mc kf md kj me kn lw lx ly lz bi translated"><strong class="js iu">内容:</strong>我们需要哪些数据？</li><li id="7654" class="lr ls it js b jt ma jx mb kb mc kf md kj me kn lw lx ly lz bi translated"><strong class="js iu">功能:</strong>有没有只为某些用户组启用的功能？</li></ul><h1 id="0116" class="ko kp it bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">制定计划，确定必要的核心组件</h1><p id="c391" class="pw-post-body-paragraph jq jr it js b jt lm jv jw jx ln jz ka kb lo kd ke kf lp kh ki kj lq kl km kn im bi translated">在意识到您正在处理的内容并对页面的目的、动作、状态和功能有了很好的理解之后，开始考虑页面的未来版本是有意义的。</p><p id="a9c8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">对我的团队来说，将页面的主要部分分开非常有用。这使我们能够单独地、更详细地评估每个方面。我们最终按照技术进行了拆分，也按照组件进行了拆分。我们的目标是让每个领域都有一名专家，然后他将能够向团队的其他成员介绍情况并回答更深入的问题。</p><h2 id="9315" class="mf kp it bd kq mg mh dn ku mi mj dp ky kb mk ml lc kf mm mn lg kj mo mp lk mq bi translated">从逻辑上将您要移植的内容分成关注点</h2><p id="c07b" class="pw-post-body-paragraph jq jr it js b jt lm jv jw jx ln jz ka kb lo kd ke kf lp kh ki kj lq kl km kn im bi translated">看看你要移植的是什么，试着从逻辑上将它分成几个部分。当您使用设计系统或组件库时，请尝试识别匹配的组件，并单独评估每个组件的功能。这将有助于您在意识到组件不能完全满足您的需求时不会受阻。</p><h2 id="36b0" class="mf kp it bd kq mg mh dn ku mi mj dp ky kb mk ml lc kf mm mn lg kj mo mp lk mq bi translated">弄清楚从哪里以及如何获取数据</h2><p id="598c" class="pw-post-body-paragraph jq jr it js b jt lm jv jw jx ln jz ka kb lo kd ke kf lp kh ki kj lq kl km kn im bi translated">由于我们只是将应用程序的一个部分移植到一个已经存在的项目中，使用现有的GraphQL端点是显而易见的选择。为了了解我们需要多少查询以及实际查询哪些字段，反复浏览<strong class="js iu"> GraphQL模式</strong>很有帮助。</p><p id="d576" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">确保创建所有必要的查询和变化，您稍后会需要它们。这不仅有助于您了解您正在处理什么，同时还可以帮助您识别API中的<strong class="js iu">缺失查询、突变和字段</strong>。在过程的早期识别那些丢失的字段对于避免在端口的后期阻塞后端工作非常重要。</p><blockquote class="mr"><p id="bb8d" class="ms mt it bd mu mv mw mx my mz na kn dk translated">分享是关怀</p></blockquote><p id="1320" class="pw-post-body-paragraph jq jr it js b jt nb jv jw jx nc jz ka kb nd kd ke kf ne kh ki kj nf kl km kn im bi translated">就个人而言，我非常喜欢用<a class="ae ng" href="https://insomnia.rest/graphql/" rel="noopener ugc nofollow" target="_blank">失眠</a>来评估API的当前状态。它允许您轻松地创建所有查询和变异，并在以后实际实现查询和变异时节省您的时间。它也非常方便，您可以导出工作区，以便与您的同事快速共享。</p><figure class="ni nj nk nl gt nm gh gi paragraph-image"><div role="button" tabindex="0" class="nn no di np bf nq"><div class="gh gi nh"><img src="../Images/c8ae769fcebbc5db64a31f6be063a669.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TMZe-MjMONKSMqTHTas3Lg.png"/></div></div><figcaption class="nt nu gj gh gi nv nw bd b be z dk translated">主计划，列出所有组件和所需的查询/变更。</figcaption></figure><h1 id="07d7" class="ko kp it bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">决策和规划，协调团队</h1><p id="7198" class="pw-post-body-paragraph jq jr it js b jt lm jv jw jx ln jz ka kb lo kd ke kf lp kh ki kj lq kl km kn im bi translated">这是我认为最重要的一步。这是一个步骤，每位专家在评估他们感兴趣的领域时，对他们的发现做一个简短的总结。</p><p id="2539" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">以下是讨论中出现的几个问题:</p><ul class=""><li id="f5b8" class="lr ls it js b jt ju jx jy kb lt kf lu kj lv kn lw lx ly lz bi translated">我们是否有一个<strong class="js iu">共享的和/或现有的组件</strong>可以重用，而不是构建一个新的？如果是，我们需要调整它吗？要让它符合我们的需求需要付出多大的努力？我们是否应该考虑为此构建一个新组件？</li><li id="b8a9" class="lr ls it js b jt ma jx mb kb mc kf md kj me kn lw lx ly lz bi translated">该组件是否依赖于任何其他组件？</li><li id="7e19" class="lr ls it js b jt ma jx mb kb mc kf md kj me kn lw lx ly lz bi translated">是否有其他组件依赖于此组件？挡住了吗？</li><li id="e7fc" class="lr ls it js b jt ma jx mb kb mc kf md kj me kn lw lx ly lz bi translated">该组件的主要挑战是什么？</li><li id="b18f" class="lr ls it js b jt ma jx mb kb mc kf md kj me kn lw lx ly lz bi translated">我们如何为这个组件提供数据？这个组件需要哪些GraphQL查询和/或变异？</li></ul><p id="ea29" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在讨论了该部分的组件及其功能后，分解任务并确定一个大致的时间表是有意义的。这降低了一开始就被阻止的风险。它也给后端团队机会开始处理早期发现的问题，以防止以后的摩擦。总是从那些可能阻碍您的同事完成其他任务的组件开始。</p><h1 id="d7f0" class="ko kp it bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">🐛亨特</h1><p id="e7b5" class="pw-post-body-paragraph jq jr it js b jt lm jv jw jx ln jz ka kb lo kd ke kf lp kh ki kj lq kl km kn im bi translated">不要在没有进行bug搜索的情况下发货。大约在我们想发布移植部分的两周前，我们做了bug搜索。运行一个成功的bug hunt需要一些准备，你要确保你提供了好的指令，包含了bug hunters快速启动和运行的最重要的方面。</p><ul class=""><li id="86f0" class="lr ls it js b jt ju jx jy kb lt kf lu kj lv kn lw lx ly lz bi translated">确保他们知道一些东西，让他们能够快速识别他们是否正在查看页面的React或Rails版本。你不希望人们在非React页面上寻找bug。</li><li id="a8ad" class="lr ls it js b jt ma jx mb kb mc kf md kj me kn lw lx ly lz bi translated">如果你的用户不熟悉这个特定的页面，给他们一个这个页面的目的，它的动作，状态和特性的概念。但是不要涉及太多的细节，因为您希望测试人员实际测试，而不是遵循您在该页面上工作时已经建立的工作流。</li><li id="3319" class="lr ls it js b jt ma jx mb kb mc kf md kj me kn lw lx ly lz bi translated">提及已知的变更/限制/错误，这样测试人员就不会制造这些问题。</li><li id="6ede" class="lr ls it js b jt ma jx mb kb mc kf md kj me kn lw lx ly lz bi translated">提供在哪里记录问题的说明，这可以是到github模板的链接或到excel表格的链接。确保你的测试人员留下了问题的细节，比如重现的步骤，浏览器版本，这样你就可以重现他们后来发现的bug。</li></ul><p id="6fcf" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在查找错误之后，确定哪些问题是高优先级的，哪些是低优先级的。高优先级问题肯定是阻止用户完成他们通常的工作流的问题，而低优先级问题通常与较小的样式问题有关。</p><p id="7eba" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果只出现了几个低优先级的问题，那么它会给你足够的时间来及时修复这些错误。否则，你仍然可以感谢你的bug猎人在发布之前发现了这些bug。最好让他们找到，而不是你的用户。推迟发布总是比在生产中回滚并影响用户工作流更好的选择。</p><h1 id="8224" class="ko kp it bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">我学到了什么</h1><ul class=""><li id="a61f" class="lr ls it js b jt lm jx ln kb nx kf ny kj nz kn lw lx ly lz bi translated">在真正开始编码之前准备和评估现有的代码是最重要的部分，<strong class="js iu">不要在没有计划之前就开始编码</strong></li><li id="d89e" class="lr ls it js b jt ma jx mb kb mc kf md kj me kn lw lx ly lz bi translated"><strong class="js iu">提早看表现</strong>，你不希望在发射前或发射后有任何惊喜🚀</li><li id="95b0" class="lr ls it js b jt ma jx mb kb mc kf md kj me kn lw lx ly lz bi translated"><strong class="js iu">仪器/监控就是一切</strong>，这也适用于支持和监控支持通道中的循环</li></ul></div></div>    
</body>
</html>