<html>
<head>
<title>How to Host a Website in the Cloud</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在云中托管网站</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-host-a-website-in-the-cloud-915acad9c15f?source=collection_archive---------11-----------------------#2021-10-30">https://levelup.gitconnected.com/how-to-host-a-website-in-the-cloud-915acad9c15f?source=collection_archive---------11-----------------------#2021-10-30</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="c8c5" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">WEB开发:</h2><div class=""/><div class=""><h2 id="7576" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">包含逐步说明的完整解决方案</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/e62805ecfb075ed4df37b5c56f16aee9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xoBviFQYmJGV2cMzGP95Zw.jpeg"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">图片由<a class="ae lh" href="https://unsplash.com/photos/oalS6SkZc_s" rel="noopener ugc nofollow" target="_blank">森迪·纪伯伦</a></figcaption></figure><h2 id="c427" class="li lj it bd lk ll lm dn ln lo lp dp lq lr ls lt lu lv lw lx ly lz ma mb mc iz bi translated">总结:</h2><p id="0aaa" class="pw-post-body-paragraph md me it mf b mg mh kd mi mj mk kg ml lr mm mn mo lv mp mq mr lz ms mt mu mv im bi translated">阅读这篇文章的主要好处是，你将学会如何使用共享主机服务，这些服务比Wix、GoDaddy和Wordpress等网站建设服务提供更快的速度、更好的控制和更便宜的计划。这将让您可以选择自定义网站上可以自定义的所有内容。然而，这将要求你管理自己的网络服务器，并使用代码构建和更新自己的网站。</p><p id="fd20" class="pw-post-body-paragraph md me it mf b mg mw kd mi mj mx kg ml lr my mn mo lv mz mq mr lz na mt mu mv im bi translated">我们将使用Linode作为我们的云服务提供商，因为他们的产品易于使用、价格合理、可扩展，并且他们的客户服务非常出色。我们将使用Nginx作为我们的网络服务器，因为他们的产品是免费的，处理高网站流量，并为世界上10万个顶级网站中的60%提供支持。</p><ul class=""><li id="365d" class="nb nc it mf b mg mw mj mx lr nd lv ne lz nf mv ng nh ni nj bi translated"><strong class="mf jd">推广:</strong>这个<a class="ae lh" href="https://linode.gvw92c.net/P0BmGX" rel="noopener ugc nofollow" target="_blank">推荐链接</a>为Linode提供100美元的信用</li></ul><pre class="ks kt ku kv gt nk nl nm nn aw no bi"><span id="dbf2" class="li lj it nl b gy np nq l nr ns"><strong class="nl jd"># How to Put a High Performance Website on the Internet:<br/></strong>01. <a class="ae lh" href="https://medium.com/p/915acad9c15f" rel="noopener">How to Host a Website in the Cloud</a><br/>02. <a class="ae lh" href="https://medium.com/p/78ce938c7bd5/" rel="noopener">How to Protect a Website From Threats</a><br/>03. <a class="ae lh" href="https://medium.com/p/3d67f11018ec" rel="noopener">How to Optimize a Website to Load in 1 Second</a><br/>04. <a class="ae lh" href="https://medium.com/p/8d36d1e77316" rel="noopener">How to Add a Database to a Website</a><br/>05. <a class="ae lh" href="https://medium.com/p/7cbc15c714ae" rel="noopener">How to Protect a Database from Threats</a><br/>06. <a class="ae lh" href="https://medium.com/p/1192fc4629f2" rel="noopener">How to Backup a Database in the Cloud</a><br/>07. <a class="ae lh" href="https://medium.com/p/382a8d960f77" rel="noopener">How to Scale a Website to Handle High Traffic</a><br/>08. <a class="ae lh" href="https://medium.com/p/57218f9dfaaa" rel="noopener">How to Add a Node.js Application to a Website</a><br/>09. How to Add a Python Application to a Website<br/>10. How to Add a Payment Method to a Website</span></pre></div><div class="ab cl nt nu hx nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="im in io ip iq"><h2 id="6ca7" class="li lj it bd lk ll lm dn ln lo lp dp lq lr ls lt lu lv lw lx ly lz ma mb mc iz bi translated">目录:</h2><ol class=""><li id="b571" class="nb nc it mf b mg mh mj mk lr oa lv ob lz oc mv od nh ni nj bi translated"><a class="ae lh" href="#366a" rel="noopener ugc nofollow">更改名称服务器</a></li><li id="b61f" class="nb nc it mf b mg oe mj of lr og lv oh lz oi mv od nh ni nj bi translated"><a class="ae lh" href="#c65b" rel="noopener ugc nofollow">创建虚拟机</a></li><li id="3372" class="nb nc it mf b mg oe mj of lr og lv oh lz oi mv od nh ni nj bi translated"><a class="ae lh" href="#c736" rel="noopener ugc nofollow">编辑DNS记录</a></li><li id="c93a" class="nb nc it mf b mg oe mj of lr og lv oh lz oi mv od nh ni nj bi translated"><a class="ae lh" href="#dce2" rel="noopener ugc nofollow">安装网络服务器</a></li><li id="6b28" class="nb nc it mf b mg oe mj of lr og lv oh lz oi mv od nh ni nj bi translated"><a class="ae lh" href="#d0c2" rel="noopener ugc nofollow">安装网站</a></li></ol></div><div class="ab cl nt nu hx nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="im in io ip iq"><h2 id="366a" class="li lj it bd lk ll lm dn ln lo lp dp lq lr ls lt lu lv lw lx ly lz ma mb mc iz bi translated">更改名称服务器:</h2><p id="291d" class="pw-post-body-paragraph md me it mf b mg mh kd mi mj mk kg ml lr mm mn mo lv mp mq mr lz ms mt mu mv im bi translated">域名注册商是租赁您的域名，并将来自您的域名的传入网络流量重定向到您帐户中指定的名称服务器的企业。在本节中，我们将把这些名称服务器更改为我们的云服务提供商拥有的服务器，以便将传入的网络流量路由到存储我们网站的web服务器。</p><ul class=""><li id="02ee" class="nb nc it mf b mg mw mj mx lr nd lv ne lz nf mv ng nh ni nj bi translated">我使用GoDaddy，但其他域名注册商的步骤类似。</li></ul><pre class="ks kt ku kv gt nk nl nm nn aw no bi"><span id="6bd6" class="li lj it nl b gy np nq l nr ns"><strong class="nl jd"># open dns settings of your domain registrar</strong><br/>1. open "products" page on <a class="ae lh" href="https://account.godaddy.com/products" rel="noopener ugc nofollow" target="_blank">GoDaddy</a><br/>2. scroll to "all products and services" section<br/>3. click "dns" in "domains" section<strong class="nl jd"><br/></strong>4. scroll to "nameservers" section<br/>5. click "change" button<br/>6. click "enter my own nameservers" link</span><span id="69b3" class="li lj it nl b gy oj nq l nr ns"><strong class="nl jd"># enter nameservers<br/></strong>1. enter "ns1.linode.com" into "nameserver 1" text field<br/>2. enter "ns2.linode.com" into "nameserver 2" text field<br/>3. click "add nameserver" link<br/>4. enter "ns3.linode.com" into "nameserver 3" text field<br/>5. click "add nameserver" link<br/>6. enter "ns4.linode.com" into "nameserver 3" text field<br/>7. click "add nameserver" link<br/>8. enter "ns5.linode.com" into "nameserver 3" text field</span><span id="784a" class="li lj it nl b gy oj nq l nr ns"><strong class="nl jd"># save nameservers</strong><br/>1. click "save" button<br/>2. check "yes, i consent to update nameservers" checkbox<br/>3. click "continue" button<br/>4. enter verification code<br/>5. click "verify code" button</span></pre><h2 id="c65b" class="li lj it bd lk ll lm dn ln lo lp dp lq lr ls lt lu lv lw lx ly lz ma mb mc iz bi translated">创建虚拟机:</h2><p id="a4d0" class="pw-post-body-paragraph md me it mf b mg mh kd mi mj mk kg ml lr mm mn mo lv mp mq mr lz ms mt mu mv im bi translated">虚拟机是一个模拟的计算机系统，拥有自己的CPU、内存、存储和网络接口，位于我们云服务提供商的物理硬件上。这使我们可以安装我们的网络服务器，托管我们的网站，并根据需要每月花费很少的费用升级我们的硬件。在本节中，我们将使用最便宜的月度计划创建包含我们网站的虚拟机。</p><pre class="ks kt ku kv gt nk nl nm nn aw no bi"><span id="a329" class="li lj it nl b gy np nq l nr ns"><strong class="nl jd"># create virtual machine<br/></strong>1. create an account on <a class="ae lh" href="https://www.linode.com/lp/free-credit-short/" rel="noopener ugc nofollow" target="_blank">linode</a><br/>2. click "create" button<br/>3. click "linode" menu item</span><span id="b278" class="li lj it nl b gy oj nq l nr ns"><strong class="nl jd"># select linux distribution</strong><br/>1. click image dropdown menu in "choose a distribution" section<br/>2. click "ubuntu 20.04 LTS" menu item</span><span id="d8fb" class="li lj it nl b gy oj nq l nr ns"><strong class="nl jd"># select datacenter with good performance<br/></strong>1. open "speed test" page on <a class="ae lh" href="https://www.linode.com/speed-test/" rel="noopener ugc nofollow" target="_blank">linode</a><br/>2. click region closest to your customers<br/>3. click "start speed test" button<br/>4. review download speed, upload speed, and ping score<br/>5. repeat for regions closest to your customers<br/>6. remember region with high download and upload speed and low ping</span><span id="686f" class="li lj it nl b gy oj nq l nr ns"><strong class="nl jd"># select datacenter to store virtual machine</strong><br/>1. click region dropdown menu in "region" section<br/>2. select region with good performance from before</span><span id="cdb9" class="li lj it nl b gy oj nq l nr ns"><strong class="nl jd"># select monthly plan</strong><br/>1. click "shared cpu" tab in "plan" section<br/>2. click "nanode 1gb" radio button</span><span id="8fa7" class="li lj it nl b gy oj nq l nr ns"><strong class="nl jd"># finish virtual machine</strong><br/>1. scroll down to "linode label" section<br/>2. enter "load-balancer" into "linode label" text field<br/>3. enter password into "root password" text field<br/>4. click "create linode" button</span><span id="8028" class="li lj it nl b gy oj nq l nr ns"><strong class="nl jd"># copy ip address<br/></strong>1. copy ip address under "ip addresses" label</span></pre><h2 id="c736" class="li lj it bd lk ll lm dn ln lo lp dp lq lr ls lt lu lv lw lx ly lz ma mb mc iz bi translated">编辑DNS记录:</h2><p id="9451" class="pw-post-body-paragraph md me it mf b mg mh kd mi mj mk kg ml lr mm mn mo lv mp mq mr lz ms mt mu mv im bi translated">DNS记录是包含您的域名信息的文本文件，我们的云服务提供商使用该文件将传入的网络流量从他们的名称服务器路由到包含我们网站的web服务器。在本节中，我们将为您的域名和包含我们虚拟机ip地址的“www”子域创建“A”记录。</p><pre class="ks kt ku kv gt nk nl nm nn aw no bi"><span id="b230" class="li lj it nl b gy np nq l nr ns"><strong class="nl jd"># open dns settings<br/></strong>1. click "domains" option in side panel<br/>2. click "create domain" button<br/>2. click "primary" radio button<br/>3. enter domain into "domain" text field<br/>4. enter regular email into "soa email address" text field<br/>5. click "create domain" button</span><span id="88e3" class="li lj it nl b gy oj nq l nr ns"><strong class="nl jd"># create "a" record<br/></strong>1. click "add an a/aaaa record" button<br/>2. enter "@" into "hostname" text field <br/>3. paste ip address into "ip address" text field<br/>4. click "ttl" dropdown menu<br/>5. click "30 seconds" menu item<br/>6. click "save" button</span><span id="ab74" class="li lj it nl b gy oj nq l nr ns"><strong class="nl jd"># create "a" record<br/></strong>1. click "add an a/aaaa record" button<br/>2. enter "www" into "hostname" text field <br/>3. paste ip address into "ip address" text field<br/>4. click "ttl" dropdown menu<br/>5. click "30 seconds" menu item<br/>6. click "save" button</span></pre><h2 id="dce2" class="li lj it bd lk ll lm dn ln lo lp dp lq lr ls lt lu lv lw lx ly lz ma mb mc iz bi translated">安装Web服务器:</h2><p id="dec5" class="pw-post-body-paragraph md me it mf b mg mh kd mi mj mk kg ml lr mm mn mo lv mp mq mr lz ms mt mu mv im bi translated">网络服务器是一个接收和响应用户访问我们网站的请求的程序。这将允许我们存储、处理和向用户分发我们的网站内容。在本节中，我们将安装Nginx，下载我们的配置文件，并定制我们的web服务器。</p><pre class="ks kt ku kv gt nk nl nm nn aw no bi"><span id="8e4b" class="li lj it nl b gy np nq l nr ns"><strong class="nl jd"># open console</strong><br/>1. click "linodes" option in side panel<br/>2. click "website-1" linode<br/>3. click "launch lish console" link<br/>4. press "return" key<br/>5. enter "root" into "login" prompt<br/>6. enter your password into "password" prompt<br/>5. paste commands into console</span><span id="7b11" class="li lj it nl b gy oj nq l nr ns"><strong class="nl jd"># add php repository to package manager<br/></strong>sudo add-apt-repository --yes ppa:ondrej/php</span><span id="6c1a" class="li lj it nl b gy oj nq l nr ns"><strong class="nl jd"># update package information<br/></strong>sudo apt-get update</span><span id="b281" class="li lj it nl b gy oj nq l nr ns"><strong class="nl jd"># install php and php extensions<br/></strong>sudo apt-get install --yes php7.2-fpm php7.2-cli php7.2-mcrypt php7.2-gd php7.2-imap php-memcached php7.2-mbstring php7.2-xml php7.2-curl php7.2-bcmath php7.2-xdebug</span><span id="14d9" class="li lj it nl b gy oj nq l nr ns"><strong class="nl jd"># set php-fpm to automatically start with server<br/></strong>sudo systemctl enable php7.2-fpm.service</span><span id="b13b" class="li lj it nl b gy oj nq l nr ns"><strong class="nl jd"># install nginx<br/></strong>sudo apt-get install --yes nginx</span><span id="13a6" class="li lj it nl b gy oj nq l nr ns"><strong class="nl jd"># download nginx configuration file</strong><br/>sudo curl -o /etc/nginx/nginx.conf <a class="ae lh" href="https://gist.githubusercontent.com/david-littlefield/c02e64e0dc6a5df84de2f821c0914895/raw" rel="noopener ugc nofollow" target="_blank">https://gist.githubusercontent.com/david-littlefield/c02e64e0dc6a5df84de2f821c0914895/raw</a></span><span id="29f5" class="li lj it nl b gy oj nq l nr ns"><strong class="nl jd"># store number of worker connections<br/></strong>worker_connections=$(ulimit -n)</span><span id="b90a" class="li lj it nl b gy oj nq l nr ns"><strong class="nl jd"># update number of worker connections</strong><br/>sudo sed "s|#worker_connections#|$worker_connections|" -i /etc/nginx/nginx.conf</span><span id="5c43" class="li lj it nl b gy oj nq l nr ns"><strong class="nl jd"># change "placeholder.com" to your domain name</strong><br/>domain_name="placeholder.com"</span><span id="eb8a" class="li lj it nl b gy oj nq l nr ns"><strong class="nl jd"># add domain name to configuration file<br/></strong>sudo sudo sed "s|#domain_name#|$domain_name|g" -i /etc/nginx/nginx.conf</span><span id="94ec" class="li lj it nl b gy oj nq l nr ns"><strong class="nl jd"># store php-fpm socket<br/></strong>php_fpm_socket=$(sudo find / -name *[0-9][\-]fpm.sock)</span><span id="a42d" class="li lj it nl b gy oj nq l nr ns"><strong class="nl jd"># update php-fpm socket</strong><br/>sudo sed "s|#php_fpm_socket#|$php_fpm_socket|" -i /etc/nginx/nginx.conf</span><span id="7415" class="li lj it nl b gy oj nq l nr ns"><strong class="nl jd"># restart nginx</strong><br/>sudo systemctl restart nginx</span></pre><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="ok ol l"/></div></figure><h2 id="d0c2" class="li lj it bd lk ll lm dn ln lo lp dp lq lr ls lt lu lv lw lx ly lz ma mb mc iz bi translated">安装网站:</h2><p id="9643" class="pw-post-body-paragraph md me it mf b mg mh kd mi mj mk kg ml lr mm mn mo lv mp mq mr lz ms mt mu mv im bi translated">该网站是一个包含php、css、文本和图像的模板，不使用数据库查询、JavaScript函数或可能会降低速度的第三方模块。这使我们能够记录我们的基准性能，并将其与我们的优化性能进行比较。在这一节中，我们将通过从GitHub存储库中克隆我们的网站来将其安装在我们的虚拟机上。</p><ul class=""><li id="284f" class="nb nc it mf b mg mw mj mx lr nd lv ne lz nf mv ng nh ni nj bi translated">它只使用bootstrap为我们的网站提供设计模板。</li></ul><pre class="ks kt ku kv gt nk nl nm nn aw no bi"><span id="9f79" class="li lj it nl b gy np nq l nr ns"><strong class="nl jd"># open html directory<br/></strong>cd /var/www</span><span id="97f9" class="li lj it nl b gy oj nq l nr ns"><strong class="nl jd"># remove existing html directory</strong><br/>sudo rm -rf /var/www/html</span><span id="0cc1" class="li lj it nl b gy oj nq l nr ns"><strong class="nl jd"># clone the website repository</strong><br/>sudo git clone <a class="ae lh" href="https://github.com/david-littlefield/website.git" rel="noopener ugc nofollow" target="_blank">https://github.com/david-littlefield/website.git</a> /var/www/html</span><span id="f1d9" class="li lj it nl b gy oj nq l nr ns"><strong class="nl jd"># assign ownership of html directory to www-data user<br/></strong>sudo chown -R www-data: /var/www/html</span><span id="3845" class="li lj it nl b gy oj nq l nr ns"><strong class="nl jd"># restart nginx</strong><br/>sudo systemctl restart nginx</span><span id="5ac7" class="li lj it nl b gy oj nq l nr ns"><strong class="nl jd"># measure performance with gtmetrix<br/></strong>1. open <a class="ae lh" href="https://gtmetrix.com/" rel="noopener ugc nofollow" target="_blank">gtmetrix</a><br/>2. enter your domain name into "enter url to analyze" text field<br/>3. click "test your site" button<br/>4. scroll to "page details" section<br/>5. review "fully loaded time" metric</span></pre></div><div class="ab cl nt nu hx nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="im in io ip iq"><h2 id="1e71" class="li lj it bd lk ll lm dn ln lo lp dp lq lr ls lt lu lv lw lx ly lz ma mb mc iz bi translated">后续步骤:</h2><p id="17bb" class="pw-post-body-paragraph md me it mf b mg mh kd mi mj mk kg ml lr mm mn mo lv mp mq mr lz ms mt mu mv im bi translated">以下文章包含一个宝石本身，但一起宝藏。</p><pre class="ks kt ku kv gt nk nl nm nn aw no bi"><span id="565f" class="li lj it nl b gy np nq l nr ns"><strong class="nl jd"># How to Put a High Performance Website on the Internet:<br/></strong>01. <a class="ae lh" href="https://medium.com/p/915acad9c15f" rel="noopener">How to Host a Website in the Cloud</a><br/>02. <a class="ae lh" href="https://medium.com/p/78ce938c7bd5/" rel="noopener">How to Protect a Website From Threats</a><br/>03. <a class="ae lh" href="https://medium.com/p/3d67f11018ec" rel="noopener">How to Optimize a Website to Load in 1 Second</a><br/>04. <a class="ae lh" href="https://medium.com/p/8d36d1e77316" rel="noopener">How to Add a Database to a Website</a><br/>05. <a class="ae lh" href="https://medium.com/p/7cbc15c714ae" rel="noopener">How to Protect a Database from Threats</a><br/>06. <a class="ae lh" href="https://medium.com/p/1192fc4629f2" rel="noopener">How to Backup a Database in the Cloud</a><br/>07. <a class="ae lh" href="https://medium.com/p/382a8d960f77" rel="noopener">How to Scale a Website to Handle High Traffic</a><br/>08. <a class="ae lh" href="https://medium.com/p/57218f9dfaaa" rel="noopener">How to Add a Node.js Application to a Website</a><br/>09. How to Add a Python Application to a Website<br/>10. How to Add a Payment Method to a Website</span></pre></div></div>    
</body>
</html>