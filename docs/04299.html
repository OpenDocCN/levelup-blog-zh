<html>
<head>
<title>Basic GUI Calculator in Python — Python Programming</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中的基本GUI计算器— Python编程</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/basic-gui-calculator-in-python-python-programming-pyshark-ba990f82d7f5?source=collection_archive---------23-----------------------#2020-06-18">https://levelup.gitconnected.com/basic-gui-calculator-in-python-python-programming-pyshark-ba990f82d7f5?source=collection_archive---------23-----------------------#2020-06-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/64b842d0558188e610fcaecd32945d86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*PWhpavff29kBXEhy"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">阿莫尔·泰亚吉在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="3a98" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">本文将带您了解用Python开发GUI计算器的整个过程。如果你正在阅读这篇文章，你可能已经知道如何用Python写一个计算器程序。而现在你想为这样一个程序开发一个GUI(图形用户界面),使它更好看，更容易重用。</p><figure class="le lf lg lh gt ju"><div class="bz fp l di"><div class="li lj l"/></div></figure><p id="286d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu">目录:</strong></p><ul class=""><li id="45bf" class="lk ll it ki b kj kk kn ko kr lm kv ln kz lo ld lp lq lr ls bi translated">介绍</li><li id="b36c" class="lk ll it ki b kj lt kn lu kr lv kv lw kz lx ld lp lq lr ls bi translated">构建主屏幕</li><li id="c0b0" class="lk ll it ki b kj lt kn lu kr lv kv lw kz lx ld lp lq lr ls bi translated">添加方程式线</li><li id="e9de" class="lk ll it ki b kj lt kn lu kr lv kv lw kz lx ld lp lq lr ls bi translated">为计算器创建按钮</li><li id="999f" class="lk ll it ki b kj lt kn lu kr lv kv lw kz lx ld lp lq lr ls bi translated">向GUI添加按钮</li><li id="292b" class="lk ll it ki b kj lt kn lu kr lv kv lw kz lx ld lp lq lr ls bi translated">将动作分配给按钮</li><li id="2e3f" class="lk ll it ki b kj lt kn lu kr lv kv lw kz lx ld lp lq lr ls bi translated">结论</li></ul><h1 id="26f2" class="ly lz it bd ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv bi translated">介绍</h1><p id="70e4" class="pw-post-body-paragraph kg kh it ki b kj mw kl km kn mx kp kq kr my kt ku kv mz kx ky kz na lb lc ld im bi translated">在我们深入代码之前，让我们先讨论一下我们要构建什么类型的计算器，它的功能是什么，以及它的“必备功能”是什么。</p><p id="ec8f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">本文的预期输出将引导您完成用Python创建GUI计算器的过程，如下所示:</p><figure class="le lf lg lh gt ju gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/7342e108b119e0d8d2da2dc32bcbbd9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:588/0*2kwU_ZEB6_IiNN3r"/></div></figure><p id="d500" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">以下是我认为该应用程序的“必备条件”:</p><ol class=""><li id="7991" class="lk ll it ki b kj kk kn ko kr lm kv ln kz lo ld nc lq lr ls bi translated">显示单击动作和结果的方程式行(屏幕)。</li><li id="10bf" class="lk ll it ki b kj lt kn lu kr lv kv lw kz lx ld nc lq lr ls bi translated">按钮必须有值并且是可点击的。</li><li id="3fc4" class="lk ll it ki b kj lt kn lu kr lv kv lw kz lx ld nc lq lr ls bi translated">进行数学运算(加、减、乘、除)。</li><li id="90b0" class="lk ll it ki b kj lt kn lu kr lv kv lw kz lx ld nc lq lr ls bi translated">执行方程式计算(=)并清除屏幕。</li></ol><p id="2a6b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在整个过程中，我们将使用<a class="ae kf" href="https://docs.python.org/3.8/library/tkinter.html" rel="noopener ugc nofollow" target="_blank"> tkinter </a>，这是Python的标准GUI库。如果您有兴趣了解更多关于该库及其功能的信息，可以在线获得<a class="ae kf" href="https://python-textbok.readthedocs.io/en/1.0/Introduction_to_GUI_Programming.html" rel="noopener ugc nofollow" target="_blank">详细指南</a>。</p><h1 id="f383" class="ly lz it bd ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv bi translated">用Python构建计算器的基础</h1><p id="01b5" class="pw-post-body-paragraph kg kh it ki b kj mw kl km kn mx kp kq kr my kt ku kv mz kx ky kz na lb lc ld im bi translated">作为第一步，我们要导入tkinter库并定义一个类，以及__init__方法和执行语句。这将是我们的主框架，在此基础上，我们将添加GUI和计算器功能。</p><p id="bbd0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这可能看起来像一个难以理解的代码，但我们将详细讨论每个部分是什么，所以与我裸露。</p><figure class="le lf lg lh gt ju"><div class="bz fp l di"><div class="nd lj l"/></div></figure><p id="4ec4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们一步一步来讨论:</p><p id="d64f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">创建一个<strong class="ki iu">计算器</strong>类(这是一个具有特定行为的独立对象)。</p><p id="f630" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">定义我们的第一个方法<strong class="ki iu"> __init__ </strong>。<br/>该方法特定于python类，在面向对象的概念中充当构造函数。当对象被创建时，这个方法被立即调用，并允许类初始化它的属性。</p><p id="e932" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">将两个参数传递给<strong class="ki iu"> __init__ </strong>方法:<strong class="ki iu"> self </strong>和<strong class="ki iu"> master </strong>。<br/> <strong class="ki iu"> self </strong>代表类的实例，基本上就是说<strong class="ki iu"> __init__ </strong>是<strong class="ki iu"> Calculator </strong>类的一个方法。<br/> <strong class="ki iu"> master </strong>是我们传递给<strong class="ki iu"> __init__ </strong>方法的一个局部变量，它的作用是创建一个顶级小部件(通常是应用程序的主窗口)。更多细节将进一步讨论。</p><p id="e14c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">创建对应用程序<strong class="ki iu"> self.master=master </strong>主窗口的引用，以便对其执行操作。然后给我们的应用程序添加一个标题<strong class="ki iu"> master.title("Python计算器")</strong></p><p id="0a6a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果_ _<strong class="ki iu">name</strong>_ _ = _ _ '<strong class="ki iu">main</strong>' _ _，则添加标准执行启动器<strong class="ki iu">。这是一个标准程序，你可以点击了解更多详情<a class="ae kf" href="https://stackoverflow.com/questions/419163/what-does-if-name-main-do" rel="noopener ugc nofollow" target="_blank">。</a></strong></p><p id="1fa6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">指定当我们执行文件时应该发生什么。<br/>这个比较有顺序性，所以按照逻辑来。<br/> -我们首先创建一个局部变量<strong class="ki iu"> root </strong>，并给它赋值Tk()。Tk()是一个tkinter类，它创建了我们的主窗口。<br/> -然后我们创建另一个局部变量<strong class="ki iu"> my_gui </strong>并将<strong class="ki iu">计算器</strong>类赋给is，同时传递<strong class="ki iu">根</strong>作为<strong class="ki iu">计算器</strong>的参数。本质上，这一步通过告诉一个类使用<strong class="ki iu">根</strong>创建了一个GUI，它是<strong class="ki iu"> Tk() </strong>作为它的主窗口。<br/> -最后我们添加了<strong class="ki iu"> root.mainloop() </strong>，其中mainloop()是Tk()的一个方法，基本上是告诉应用程序等待事件(点击)并相应地更新UI。</p><p id="45c9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这是一次需要消耗的大量信息。但是我们已经完成了指南的第一部分，现在可以看到我们的初始屏幕了。将上面的代码复制粘贴到您的编辑器中并运行它。您应该看到以下内容:</p><figure class="le lf lg lh gt ju gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/d128be4894f1b79c442076f4b9a71e40.png" data-original-src="https://miro.medium.com/v2/resize:fit:406/0*lrWGzVQZeHpWgBks"/></div></figure><h1 id="48e1" class="ly lz it bd ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv bi translated">在Python中向计算器添加方程线</h1><p id="75e3" class="pw-post-body-paragraph kg kh it ki b kj mw kl km kn mx kp kq kr my kt ku kv mz kx ky kz na lb lc ld im bi translated">作为下一步，我们想做的是添加一个公式线到我们的计算器图形用户界面。如果你现在手里拿着一个计算器，我们想添加的是“显示器”,在上面显示你所有的操作。</p><p id="dd5c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这部分非常直观，只需要我们向我们的<strong class="ki iu"> __init__ </strong>方法添加两行代码:</p><figure class="le lf lg lh gt ju"><div class="bz fp l di"><div class="nd lj l"/></div></figure><p id="e138" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们之所以将它添加到<strong class="ki iu"> __init__ </strong>方法中，是因为我们希望应用程序一启动就“创建”它。</p><p id="1eae" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们一步一步来讨论:</p><p id="057a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们需要创建一些想要添加到我们的<strong class="ki iu">计算器</strong>类中的<strong class="ki iu">方程</strong>行，因此我们将其定义为<strong class="ki iu"> self.equation </strong>，然后使用tkinter类<strong class="ki iu"> Entry() </strong>创建一个小部件。<br/>Entry()类中有一些参数。我们需要让它知道它应该属于我们的<strong class="ki iu">主</strong>窗口，以及一些基本的样式属性，如<strong class="ki iu">宽度</strong>和<strong class="ki iu">边框宽度</strong>(可以随意更改这些，但现在请按照我指定的值进行)。</p><p id="13d3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">将方程式线放在我们的主屏幕上。所以我们已经创建了我们的行，它属于<strong class="ki iu">计算器</strong>类。但是它还不知道它应该在这个灰色屏幕上的什么位置。应该放在右上角、左下角还是其他地方？我会放在我们的图形用户界面的顶部。为此，我将使用<strong class="ki iu">。grid() </strong>方法的<strong class="ki iu"> Entry() </strong>类附带一些参数。<br/>所以我们已经知道它需要赋给我们的“显示”，于是就有了形式<strong class="ki iu"> self.equation.grid() </strong>。<br/>现在什么进入<strong class="ki iu">。grid() </strong>需要一点解释:<br/>——回想一下Python索引是从0开始的，所以第一个<strong class="ki iu">行</strong>的索引是0，第一个<strong class="ki iu">列</strong>的索引也是0。<br/> - <strong class="ki iu"> columnspan </strong>将指定这一行将占据多少“列”。看看介绍部分的计算器应用程序的最终图像，你会注意到应用程序按钮被放置在4列中。因为我们的方程线占据了屏幕的整个宽度，这意味着它正好占据了4列。注意:这也是我选择36宽度的原因，因为它可以被4整除而没有余数，并且保持布局不受影响。<br/> - <strong class="ki iu"> padx </strong>和<strong class="ki iu"> pady </strong>是我添加到线条顶部、底部、左侧和右侧的基本填充，只是为了在视觉上给它多一点空间。</p><p id="6608" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">将这些内容添加到我们的代码中，您应该会得到以下结果:</p><figure class="le lf lg lh gt ju"><div class="bz fp l di"><div class="nd lj l"/></div></figure><p id="99af" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">将上面的代码复制粘贴到您的编辑器中并运行它。您应该看到以下内容:</p><figure class="le lf lg lh gt ju gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/c513559662a26fe23da8344efd23c3e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:502/0*KmIKDcWjo1Q9OoXe"/></div></figure><p id="70f9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您会注意到应用程序窗口实际上变得更小了，因为现在它被方程显示所包围。您还可以在该行中随意键入任何内容，只是为了测试它的“entry”属性。</p><h1 id="da12" class="ly lz it bd ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv bi translated">在Python中创建计算器按钮</h1><p id="bd1f" class="pw-post-body-paragraph kg kh it ki b kj mw kl km kn mx kp kq kr my kt ku kv mz kx ky kz na lb lc ld im bi translated">好了，到目前为止，我们有我们的计算器主屏幕和方程显示连接到它。我们的下一步是给这个GUI添加按钮，这样它看起来就像一个完整的计算器。</p><p id="f76d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这是代码中最乏味的部分，在技术上比前面的部分更高级一些。让我们浏览所有的代码和解释。</p><p id="9c62" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们将创建一个新方法<strong class="ki iu"> createButton() </strong>，并向其中添加以下代码:</p><figure class="le lf lg lh gt ju"><div class="bz fp l di"><div class="nd lj l"/></div></figure><p id="0ab7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们一步一步来讨论:</p><p id="ecda" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu">步骤1: </strong> <br/>定义一个新方法<strong class="ki iu"> createButton() </strong>并将<strong class="ki iu"> self </strong>作为参数传递给它。这基本上将这个方法分配给了<strong class="ki iu">计算器</strong>类的实例。</p><p id="3de8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu">第二步:</strong> <br/>创建按钮对象。您会注意到所有的按钮都遵循相同的模板:<em class="ng">b[some name]= self . add button(some value)</em>。逐个创建每个按钮是一个繁琐的过程，而且可以自动化。为了解释细节，我一个一个地硬编码。本质上，每个按钮名称都代表了我们希望这个按钮执行的操作。比如<strong class="ki iu"> b9 </strong>是9的按钮，<strong class="ki iu"> b_add </strong>是加法的按钮，以此类推。<br/>现在，出现的问题是:这个<strong class="ki iu"> self.addButton() </strong>是什么？这是我们将在后面的代码中定义的另一个方法。本质上，它所做的是用我们需要的值创建我们需要的按钮对象。这将在下一节解释。整体登录是针对<strong class="ki iu"> createButton() </strong>方法内的每个按钮，我们调用<strong class="ki iu"> addButton() </strong>方法来生成按钮。</p><p id="b76e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu">第三步:</strong> <br/>将按钮按照它们在计算器上出现的顺序排列成行。我们希望它有4行，每一行有4个按钮，所以它们按以下顺序出现:<br/> <em class="ng">第1行</em> : 7，8，9，+ <br/> <em class="ng">第2行</em> : 4，5，6，- <br/> <em class="ng">第3行</em> : 1，2，3，* <br/> <em class="ng">第4行</em> : c，0，=，/</p><p id="4e58" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu">第四步:</strong> <br/>用按钮填充每一行。现在，作为添加按钮的最后一步，我们基本上遍历每行的每一列，并用按钮填充它。<br/>要记住的一件事是，我们从行索引1到4开始(从<strong class="ki iu"> r=1 </strong>)，因为我们的行索引0是用等式“display”填充的。<br/>另一方面，我们的列将从0到3进行索引。</p><p id="0243" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这是重要的一步，不是上面显示的代码块。所以我们创建了这个方法来创建按钮。现在要执行它，我们需要通过向它添加<strong class="ki iu"> self.createButton() </strong>从我们的<strong class="ki iu"> __init__ </strong>方法中“调用”它。</p><p id="4d39" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这一部分之后，到目前为止完整的代码应该如下所示:</p><figure class="le lf lg lh gt ju"><div class="bz fp l di"><div class="nd lj l"/></div></figure><p id="ebdc" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">注意:如果您现在尝试运行它，您应该会得到一个错误。错误的原因是我们在我们的<strong class="ki iu"> createButton() </strong>方法中使用了某个<strong class="ki iu"> addButton() </strong>方法，但是我们没有指定它具体做什么。我们将在下一节讨论这个问题。</p><h1 id="79a4" class="ly lz it bd ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv bi translated">向GUI添加按钮</h1><p id="d99f" class="pw-post-body-paragraph kg kh it ki b kj mw kl km kn mx kp kq kr my kt ku kv mz kx ky kz na lb lc ld im bi translated">在这一节中，我们将把我们创建的按钮添加到GUI中。还记得我们用来创建每个按钮的<strong class="ki iu"> addButton() </strong>方法吗？这正是我们现在要重点添加的内容。这个方法实际上创建并返回一个tkinter按钮对象，然后我们将它添加到GUI中。</p><p id="f2ed" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下面几行代码将帮助我们:</p><figure class="le lf lg lh gt ju"><div class="bz fp l di"><div class="nd lj l"/></div></figure><p id="1672" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们一步一步来讨论:</p><p id="8896" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu">步骤1: </strong> <br/>定义一个新方法<strong class="ki iu"> addButton() </strong>并传递两个参数:<strong class="ki iu"> self </strong>和<strong class="ki iu"> value </strong>给它。<strong class="ki iu"> self </strong>将该方法分配给<strong class="ki iu"> Calculator </strong>类的实例，而<strong class="ki iu"> value </strong>是我们想要在GUI中的每个按钮上显示的实际“值”。</p><p id="77fe" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们用一些我们需要的参数创建一个按钮类:<br/> - <em class="ng"> self.master </em>:这将按钮对象分配给计算器类。<br/> - <em class="ng"> text=value </em>:这将把我们作为参数传递的“值”显示为按钮上的文本。<br/> - <em class="ng"> width=9 </em>:这只是造型，你可以调整按钮的宽度。</p><p id="caf7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在让我们将它添加到主代码中并运行它:</p><figure class="le lf lg lh gt ju"><div class="bz fp l di"><div class="nd lj l"/></div></figure><p id="f6b1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果一个完整的GUI有可点击的按钮，你会看到什么。所以它现在就像一个普通的计算器应用程序一样工作，除了每次点击都没有什么变化。</p><figure class="le lf lg lh gt ju gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/2d0159b99ac360917875d055175f8c01.png" data-original-src="https://miro.medium.com/v2/resize:fit:588/0*Iilq0MKyRg20Etdo"/></div></figure><h1 id="c9f3" class="ly lz it bd ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv bi translated">将动作分配给按钮</h1><p id="afe0" class="pw-post-body-paragraph kg kh it ki b kj mw kl km kn mx kp kq kr my kt ku kv mz kx ky kz na lb lc ld im bi translated">经过上一步，我们已经为计算器应用程序设计了一个完整的GUI。我们有方程式线和可点击的按钮。最后一步是添加实际的数学功能。</p><p id="07f3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们看看将为我们做这件事的代码块:</p><figure class="le lf lg lh gt ju"><div class="bz fp l di"><div class="nd lj l"/></div></figure><p id="5758" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这部分是我们添加主要数学计算和程序逻辑的地方，比前面的部分更复杂。我们来讨论一下步骤:</p><p id="ca55" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">定义一个新方法<strong class="ki iu"> addButton() </strong>并传递两个参数:<strong class="ki iu"> self </strong>和<strong class="ki iu"> value </strong>给它。<strong class="ki iu"> self </strong>将该方法分配给<strong class="ki iu"> Calculator </strong>类的实例，而<strong class="ki iu"> value </strong>是我们想要在GUI中的每个按钮上显示的实际“值”。</p><p id="b6fe" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了让计算器知道下一步该做什么，它需要知道方程式行中显示的内容。为了从方程式行中获取内容，我们使用了<strong class="ki iu">。get() </strong>方法的<em class="ng">方程</em>行是一个tkinter <strong class="ki iu">条目</strong>类。<br/>这意味着，例如，如果公式行中有“1+1 ”,该函数将获取该行，并将其作为字符串存储在本地<em class="ng"> current_equation </em>变量中。</p><p id="05f3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这里我们开始为点击添加逻辑，最简单的是当用户点击“c”时，Python中的计算器应该执行什么操作？如果用户点击“c ”,我们希望公式行被清除<strong class="ki iu">,这正是我们使用<strong class="ki iu">所做的。删除属于tkinter <strong class="ki iu">条目</strong>类的<em class="ng">等式</em>行的()</strong>方法。</strong></p><p id="e3ab" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们条件的第二部分是添加当用户点击“=”时的功能。我们想要的是计算出一个答案，并显示在方程行中。<br/> -我们在<strong class="ki iu"> elif </strong>部分做的第一件事是计算<em class="ng"> current_equation </em>，这是我们在步骤1中已经得到的。我们使用Python <strong class="ki iu"> eval() </strong>方法，该方法解析字符串表达式并“评估”它，就像您直接在Python中运行它一样，并将它存储为本地变量<em class="ng"> answer </em>。比如你的<em class="ng"> current_equation </em>是“1+1”，是一个字符串，你用Python运行1+1，它会给你2作为输出。这正是我们在这里做的。<br/> -然后我们使用<strong class="ki iu">从方程式行中删除当前文本。tkinter条目类的delete() </strong>方法(类似于我们在用户点击“c”时清除该行)。<br/> -最后使用<strong class="ki iu">将我们的<em class="ng">答案</em>插入方程式行。tkinter入口类的insert() </strong>方法。</p><p id="b188" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">调节的最后一步是添加我们称之为“全部捕捉”的条件，我们将它放在<strong class="ki iu"> else </strong>部分中。本质上，如果用户点击除了“c”或“=”之外的任何东西，这意味着他们点击了从0到9的数字或数学运算符号(+、-、*、/)。在这种情况下，我们只想把它加到我们的方程线上。<br/> -首先，我们删除方程式行<strong class="ki iu">中的现有文本。tkinter入口类的delete() </strong>方法。<br/> -然后我们将<em class="ng"> current_equation </em>与<em class="ng">值</em>(这是最近的点击)连接起来，并使用<strong class="ki iu">将其插入方程式行。tkinter入口类的insert() </strong>方法。举个例子，如果你的方程式行中有“1+”，然后点击“1”，我们要做的就是把“1+”和“1”粘在一起，得到“1+1”，然后粘贴回方程式行。</p><p id="8fe5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu">附加步骤:</strong> <br/>我们需要做的最后一步是让我们的按钮知道当它们被点击时属于它们中的每一个的动作。为此，我们需要返回到我们的<strong class="ki iu"> addButton() </strong>方法，并为<strong class="ki iu"> Button() </strong>对象创建添加一个参数。我们需要添加的是一个<em class="ng">命令</em>。命令是按钮的参数，让它知道应该做什么，每个按钮本质上应该做的是使用<strong class="ki iu"> clickButton() </strong>方法作为它的参数。所以我们需要将<strong class="ki iu"> addButton() </strong>方法中的代码从:</p><figure class="le lf lg lh gt ju"><div class="bz fp l di"><div class="nd lj l"/></div></figure><p id="5f14" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">收件人:</p><figure class="le lf lg lh gt ju"><div class="bz fp l di"><div class="nd lj l"/></div></figure><p id="6e8b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，当我们的按钮被创建时，GUI知道每个按钮的点击所分配的动作。</p><p id="700e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们刚刚用Python编写的完整的基本GUI计算器的最终代码应该是这样的:</p><figure class="le lf lg lh gt ju"><div class="bz fp l di"><div class="nd lj l"/></div></figure><p id="bb4f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这段代码也可以在我的<a class="ae kf" href="https://github.com/misha-pyshark/python-calculator" rel="noopener ugc nofollow" target="_blank"> GitHub </a>页面上找到。</p><h1 id="17ff" class="ly lz it bd ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv bi translated">结论</h1><p id="88d5" class="pw-post-body-paragraph kg kh it ki b kj mw kl km kn mx kp kq kr my kt ku kv mz kx ky kz na lb lc ld im bi translated">在本文中，我们介绍了如何使用tkinter库在Python中创建一个定制的基本GUI计算器。我也鼓励你看看我在<a class="ae kf" href="https://pyshark.com/category/python-programming/" rel="noopener ugc nofollow" target="_blank"> Python编程</a>上的其他帖子。</p><p id="8049" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你有任何问题或者对编辑有任何建议，请在下面留下你的评论。</p></div><div class="ab cl nh ni hx nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="im in io ip iq"><p id="1816" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="ng">原载于2020年6月18日</em><a class="ae kf" href="https://pyshark.com/basic-gui-calculator-in-python/" rel="noopener ugc nofollow" target="_blank"><em class="ng">https://pyshark.com</em></a><em class="ng">。</em></p></div></div>    
</body>
</html>