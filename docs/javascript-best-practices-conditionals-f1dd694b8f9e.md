# JavaScript 最佳实践—条件

> 原文：<https://levelup.gitconnected.com/javascript-best-practices-conditionals-f1dd694b8f9e>

![](img/42b376732343805b45092498468d117a.png)

马库斯·斯皮斯克在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄的照片

JavaScript 是一种非常宽容的语言。编写可以运行但存在问题的代码很容易。

在本文中，我们将看看如何在 JavaScript 程序中编写条件语句。

# 首先编写代码中的正常路径

我们应该首先考虑正常的路径，然后写出异常的情况。

因此，我们应该检查比罕见的边缘情况更频繁遇到的情况。

# 确保我们在平等问题上分支正确

`>=`不同于`>`，`<=`也不同于`<`。

因此，我们应该确保通过使用正确的方法来避免一个接一个的错误。

# 将正常情况放在 if 之后，而不是 else 之后

在`if`之后，正常情况会更好，因为它让我们运行的代码比放在`else`中少。

短路评估意味着我们只是运行`if`语句，而不是检查`if`语句，然后转到`else`。

如果大多数案例都是成功的，那么我们应该把成功的案例放在`if`之后，而不是放在`else`之后。

例如，不写:

```
if (status === 'error') {
  //...
} else if (status === 'success') {
  //...
} else {
  //...
}
```

我们通过书写来翻转案例:

```
if (status === 'success') {
  //...
} else if (status === 'error') {
  //...
} else {
  //...
}
```

如果状态为`'success'`，错误案例在顶部，我们可以跳过所有需要检查的错误案例。

我们还知道，如果我们遵循这个惯例，`if`案例总是正常的成功案例。

# 在 if 子句后加上一个有意义的陈述

我们不应该有一个什么也不做的`if`块。所以与其写:

```
if (condition) {} else {
  // ...
}
```

我们应该改为写:

```
if (!condition) {
  //...
}
```

# 考虑 else 子句

我们可以使用`else`子句，以便考虑在`if`块中没有考虑的条件。

例如，我们可能想写:

```
if (MIN <= value && value <= MAX) {
  // do something ...
} else {
  // invalid value, do nothing
}
```

如果不满足`if`中的条件，我们可能希望让`else`块解释为什么我们什么都不做。

这样，我们确保没有忽略与`if`程序块中的条件相反的情况。

# 测试 else 子句的正确性

我们想在程序中测试所有案例的正确性。

所以除了测试`if`子句之外，我们还应该测试`else`子句。

# 检查 if 和 else 子句的反转

如果我们翻转`if`和`else`条款，我们会得到意想不到的结果。

因此，我们应该检查那些条款是否被颠倒了。

![](img/d61c3de26bbb24b51892cdc6e0c72552.png)

马库斯·斯皮斯克在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄的照片

# 用布尔函数调用简化复杂的测试

如果我们的条件中有复杂的测试，我们应该把表达式放在一个函数中，这样我们就可以调用这个函数。

函数名也让每个人都清楚检查在做什么。

例如，我们可以编写以下代码来实现这一点:

```
const inRange = (min, max, value) => (min <= value && value <= max);
if (inRange(min, max, value)) {
  // ...
} else {
  //...
}
```

我们将范围检查代码放入一个函数中，然后调用它。

现在我们知道布尔表达式正在检查`value`是否在由`min`和`max`限定的给定数字范围内。

# 将最常见的案例放在第一位

因为最常见的情况是最经常遇到的，所以我们应该把它们放在第一位，这样在大多数情况下，不经常遇到的情况就不必检查了。

例如，如果字母是 ou `if`语句中最常见的字符，那么我们可以把它作为第一种情况:

```
if (isLetter(input)) {
  //...
} else if (isNumber(input)) {
  ///...
} else {
  //...
}
```

这样，第一种情况将是最常见的，我们的程序必须更少地运行`else`子句。

# 结论

我们可以通过将最常遇到的情况放在最前面来编写更有效的条件语句。

还有，我们想把复杂的布尔表达式放到自己的函数里，让它们更清晰。

正常情况应该优先考虑，因为它遇到的频率更高。

我们还应该使用正确的运算符进行比较，以减少一个接一个的错误。