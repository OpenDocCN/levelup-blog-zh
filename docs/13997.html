<html>
<head>
<title>What is C10k Problem? Why Should you Care?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">C10k问题是什么？你为什么要在乎？</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/what-is-c10k-problem-why-should-you-care-a5396939a68c?source=collection_archive---------9-----------------------#2022-10-23">https://levelup.gitconnected.com/what-is-c10k-problem-why-should-you-care-a5396939a68c?source=collection_archive---------9-----------------------#2022-10-23</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1318" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">提高服务器性能需要考虑的因素</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/f8469ba5d0bc07e412c52372cbf8d16a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hSJY9yln0Q5xbIU_qMapVA.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">克里斯蒂娜@ wocintechchat.com在<a class="ae ky" href="https://unsplash.com/s/photos/server?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="5122" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在最近的一篇文章中，我们讨论了<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/why-cloudflare-abandoned-nginx-for-pingora-b5c4e5256a4a">反向代理</a>如何以闪电般的速度处理数百万个连接。</p><p id="8797" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就是在那段时间我听说了C10k的问题。显然，NGINX是由伊戈尔·塞索耶夫编写的，以解决这一挑战。</p><p id="e683" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我花了一段时间才更深层次地理解这些概念和问题。这篇文章是我重新迭代我的理解的尝试，希望对你也有帮助。</p><h2 id="286b" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">C10K是什么？</h2><p id="1924" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">C10K这个名字是由软件工程师Dan Kegel在1999年创造的。</p><p id="aa43" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个缩写中的c代表并发连接，10K代表数字。总之，它表示这个问题是一个10K并发连接问题。</p><p id="5f64" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">C10K定义了web服务器在同时处理大量并发请求时面临的挑战。</p></div><div class="ab cl mt mu hx mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="im in io ip iq"><p id="198d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当服务器已经足够复杂和现代来处理许多连接并提供更好的吞吐量时，我们中的许多人可能已经开始编写服务器端代码了。</p><p id="5d63" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">能够通过并行处理和多线程同时处理多个任务的多核处理器已经成为标准。</p><p id="7bac" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果说有什么不同的话，那就是云服务进一步简化了这些流程，并使横向扩展比以往任何时候都更加方便。</p><p id="e354" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">随着这些年来服务器变得越来越复杂，消费者的数量也在增加。10K问题演变成了10米问题，然后进一步发展。</p><p id="37c4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">更好地理解是什么让服务器每秒处理数千个请求，将有助于我们在服务器必须扩展以处理不断增长的web流量时做出正确的决定。</p><p id="3006" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们首先尝试理解软件应用程序和服务器扩展的两种常见方式。</p><p id="0dea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所谓伸缩，我们指的是系统根据不断变化的需求而增长或收缩的能力。</p><ol class=""><li id="04aa" class="na nb it lb b lc ld lf lg li nc lm nd lq ne lu nf ng nh ni bi translated">垂直缩放</li><li id="c99a" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">水平缩放</li></ol><h2 id="5a05" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">垂直缩放</h2><p id="3300" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">垂直扩展会给现有系统增加更多资源。</p><p id="fa98" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这可以包括但不限于提高处理能力、内存、存储或网络速度。</p><p id="a847" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">简而言之，垂直扩展通过向现有机器添加更多资源，使其更加强大。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/6160848846bf4faa0b22df44c0d5d78a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bIq-TJToBH_u_d1DbN2z9A.png"/></div></div></figure><h2 id="0f50" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">水平缩放</h2><p id="30c3" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">水平扩展为我们的基础设施增加了更多的机器。</p><p id="e24c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这意味着，不是向现有机器添加更多资源，而是向现有基础架构添加与旧服务器功能相似的新服务器，以满足不断增长的需求。</p><p id="42a2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在云环境中，添加更多的服务器实例就是水平扩展的一个例子。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/23f47a201bd05d8467afa95976b79a8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qB_-grE8-9Flwlq9WLWWvw.png"/></div></div></figure><p id="c28c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当系统不再能够以高效的方式容纳传入流量时，组织决定使用水平或垂直扩展来扩展其IT基础架构。</p><p id="48b2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是，如果提高服务器性能的解决方案并不总是局限于纵向扩展(垂直)或横向扩展(水平)呢？</p><p id="5e98" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们来看看有助于性能优化的另一个因素。</p><h2 id="88f3" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">优化网络技术</h2><p id="ed91" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">随着基于云的服务的引入，网络优化变得不那么令人头疼了，但即使在基于云的服务中，如果没有正确的架构，最终也会出现与本地服务器类似的服务器性能问题。更不用说，每增加一项资源都会增加云费用。</p><p id="c151" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在典型的IT场景中，使用各种网络优化工具和最佳实践来监控和改进网络技术。</p><p id="3119" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这些用于提高服务器性能的技术包括:</p><ol class=""><li id="f49c" class="na nb it lb b lc ld lf lg li nc lm nd lq ne lu nf ng nh ni bi translated">代理服务器和CDN</li></ol><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/e911e41454d74b7f7a52454dcc939830.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fE8Pv_-2V_gC74hRIi2Pig.png"/></div></div></figure><p id="9729" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">代理服务器是一个中间人。它位于应用服务器的前面。</p><p id="aa91" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">与普通的web服务器相比，这些服务器处理传入web请求的方式有所不同。代理服务器不是使用单线程处理每个web请求，而是遵循多线程或多进程架构来处理多个并发请求。</p><p id="d710" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">主要是，这些服务器重用现有的TCP连接并提高它们的性能。</p><p id="d538" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另一方面，CDN(内容交付网络)服务器用于缓存web资源(静态内容)。这意味着静态内容可以在地理位置上靠近消费者，并且可以更快地提供内容。</p><p id="e5e0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">2.负载平衡器</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/02e777c98938ab463b1a1ab86d1ef0b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iuayrUJdPqitcjXlpuPb-Q.png"/></div></div></figure><p id="a866" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">像代理服务器一样，负载平衡器位于我们的web和应用服务器的前面。</p><p id="7a4e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它的主要工作是路由传入的客户端请求，并以一种我们所有的服务器都公平分担工作的方式将它们转发到服务器，并且没有一个服务器因传入的流量而过载。</p><p id="0744" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">负载平衡器还可以检测是否添加了新的服务器或有一台服务器关闭，并在联机的服务器之间路由流量。这可以确保我们的资源得到有效利用，并且服务器的性能不会下降。</p><h2 id="6f0b" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">结论</h2><p id="d4dd" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">无论您的应用是部署到云还是本地物理服务器，了解服务器性能有助于我们设计更好的系统并降低基础设施成本。</p></div></div>    
</body>
</html>