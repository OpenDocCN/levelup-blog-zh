<html>
<head>
<title>JavaScript Algorithm: Record Collection</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript算法:记录收集</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/javascript-algorithm-record-collection-fc107c1eb612?source=collection_archive---------5-----------------------#2020-04-02">https://levelup.gitconnected.com/javascript-algorithm-record-collection-fc107c1eb612?source=collection_archive---------5-----------------------#2020-04-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="d228" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">我们编写一个函数来修改一个包含多个音乐记录的JSON对象。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/bb44cca0b8a57b28bf01b2a70b87d89f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JT8w1tuGYvT2w_wG0Mc3-A.png"/></div></div></figure><p id="84b4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">今天我们将编写一个名为<code class="fe lq lr ls lt b">updateRecords</code>的函数，它将接受一个整数(<code class="fe lq lr ls lt b">id</code>)和两个字符串(<code class="fe lq lr ls lt b">prop</code>和<code class="fe lq lr ls lt b">value</code>)作为参数。</p><p id="c1c2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">给你一个JSON对象，代表你的音乐唱片集。每个相册都有一个唯一的ID作为其关键字。每个键都有另一个包含多个属性的对象，如album、tracks和artist。并非所有的相册都有这些属性。</p><pre class="kj kk kl km gt lu lt lv lw aw lx bi"><span id="d916" class="ly lz it lt b gy ma mb l mc md">var collection = {<br/>    2548: {<br/>        album: "Slippery When Wet",<br/>        artist: "Bon Jovi",<br/>        tracks: [<br/>            "Let It Rock",<br/>            "You Give Love a Bad Name"<br/>        ]<br/>    },<br/>    2468: {<br/>        album: "1999",<br/>        artist: "Prince",<br/>        tracks: [<br/>            "1999",<br/>            "Little Red Corvette"<br/>        ]<br/>    },<br/>    1245: {<br/>        artist: "Robert Palmer",<br/>        tracks: []<br/>    },<br/>    5439: {<br/>        album: "ABBA Gold"<br/>    }<br/>};</span></pre><p id="a964" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">该函数的目标是使用给定的函数输入修改上面的JSON数据，并返回整个集合对象。<code class="fe lq lr ls lt b">ID</code>是指每条记录的ID号，<code class="fe lq lr ls lt b">prop</code>是该ID内的对象属性，<code class="fe lq lr ls lt b">value</code>是与该<code class="fe lq lr ls lt b">prop</code>相关联的值。</p><p id="dfec" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">以下是处理不存在的属性或具有空值的对象属性时要遵循的一些规则。</p><p id="d39d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果<code class="fe lq lr ls lt b">prop</code> = <code class="fe lq lr ls lt b">"tracks"</code>但特定<code class="fe lq lr ls lt b">ID</code>中的相册没有<code class="fe lq lr ls lt b">tracks</code>属性，则在将新的<code class="fe lq lr ls lt b">value</code>添加到数组中之前创建一个空数组。</p><p id="f44c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果<code class="fe lq lr ls lt b">prop</code> = <code class="fe lq lr ls lt b">"tracks"</code>并且相册已经有一个<code class="fe lq lr ls lt b">tracks</code>属性和一个现有的值数组，则将<code class="fe lq lr ls lt b">value</code>推到现有数组的末尾。</p><p id="52a7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果<code class="fe lq lr ls lt b">value</code>为空(<code class="fe lq lr ls lt b">""</code>，则从相册中删除给定的<code class="fe lq lr ls lt b">prop</code>属性。</p><p id="4be3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果<code class="fe lq lr ls lt b">prop</code>是另一个不是<code class="fe lq lr ls lt b">tracks</code>的属性，则更新或设置该唱片集属性的<code class="fe lq lr ls lt b">value</code>。</p><p id="fe5f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们开始写代码吧。</p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><p id="c933" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">因为我们的对象被赋给了一个变量，所以我们将使用括号符号来访问对象属性。</p><p id="60f5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们要写一系列if-else语句。使用上面的规则，我们编写第一个if语句。这将检查给定的<code class="fe lq lr ls lt b">prop</code>是否等于<code class="fe lq lr ls lt b">tracks</code>，并检查我们的<code class="fe lq lr ls lt b">collections</code>对象中给定的<code class="fe lq lr ls lt b">ID</code>内的相册是否没有<code class="fe lq lr ls lt b">tracks</code>属性。</p><pre class="kj kk kl km gt lu lt lv lw aw lx bi"><span id="31d1" class="ly lz it lt b gy ma mb l mc md">if(prop === "tracks" &amp;&amp; !collection[id].hasOwnProperty([prop])){<br/>    collection[id][prop] = [];<br/>    collection[id][prop].push(value);<br/>}</span></pre><p id="2031" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们使用<code class="fe lq lr ls lt b">hasOwnProperty()</code>方法检查一个对象是否有属性。如果属性存在，则返回<code class="fe lq lr ls lt b">true</code>或<code class="fe lq lr ls lt b">false</code>。</p><p id="5ff2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果这个语句为真，意味着<code class="fe lq lr ls lt b">tracks</code>属性不存在，我们创建一个新的属性并给它一个空数组。之后，我们把给定的<code class="fe lq lr ls lt b">value</code>放入数组。</p><p id="e718" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在我们的else-if语句中，我们检查给定的<code class="fe lq lr ls lt b">prop</code>是否等于<code class="fe lq lr ls lt b">tracks</code>，并检查<code class="fe lq lr ls lt b">collections</code>对象是否已经有一个现有的<code class="fe lq lr ls lt b">tracks</code>属性。如果这是真的，我们只需将给定的<code class="fe lq lr ls lt b">value</code>推到现有数组的末尾。</p><pre class="kj kk kl km gt lu lt lv lw aw lx bi"><span id="8cc9" class="ly lz it lt b gy ma mb l mc md">else if(prop === "tracks" &amp;&amp; collection[id].hasOwnProperty([prop])){<br/>    collection[id][prop].push(value);<br/>}</span></pre><p id="8af6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在我们最后的else语句中，对于所有其他属性，更新或设置唱片集属性的<code class="fe lq lr ls lt b">value</code>。</p><pre class="kj kk kl km gt lu lt lv lw aw lx bi"><span id="e8a9" class="ly lz it lt b gy ma mb l mc md">else{<br/>    collection[id][prop] = value;<br/>}</span></pre><p id="de0b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">下面是完整的if-else语句块:</p><pre class="kj kk kl km gt lu lt lv lw aw lx bi"><span id="87b4" class="ly lz it lt b gy ma mb l mc md">if (prop === "tracks" &amp;&amp; !collection[id].hasOwnProperty([prop])) {<br/>    collection[id][prop] = [];<br/>    collection[id][prop].push(value);<br/>} else if (prop === "tracks" &amp;&amp; collection[id].hasOwnProperty([prop])) {<br/>    collection[id][prop].push(value);<br/>} else {<br/>    collection[id][prop] = value;<br/>}</span></pre><p id="0604" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们编写一个最终的if语句，检查给定的<code class="fe lq lr ls lt b">value</code>是否为空字符串。如果这是真的，那么我们从相册的对象中删除给定的<code class="fe lq lr ls lt b">prop</code>属性。</p><pre class="kj kk kl km gt lu lt lv lw aw lx bi"><span id="4931" class="ly lz it lt b gy ma mb l mc md">if(!value){<br/>    delete collection[id][prop];<br/>}</span></pre><p id="16de" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在函数完成对集合对象的修改后，我们返回它。</p><pre class="kj kk kl km gt lu lt lv lw aw lx bi"><span id="f810" class="ly lz it lt b gy ma mb l mc md">return collection;</span></pre><p id="3763" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">以下是完整的代码:</p><pre class="kj kk kl km gt lu lt lv lw aw lx bi"><span id="f69e" class="ly lz it lt b gy ma mb l mc md">function updateRecords(id, prop, value) {<br/>  <br/>  if(prop === "tracks" &amp;&amp; !collection[id].hasOwnProperty([prop])){<br/>    collection[id][prop] = [];<br/>    collection[id][prop].push(value);<br/>  }else if(prop === "tracks" &amp;&amp; collection[id].hasOwnProperty([prop])){<br/>    collection[id][prop].push(value);<br/>  }else{<br/>    collection[id][prop] = value;<br/>  }<br/>  <br/>  if(!value){<br/>    delete collection[id][prop];<br/>  }<br/>  <br/>  return collection;<br/>}</span></pre></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><p id="ab4f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果你觉得这个算法有帮助，看看我的其他JavaScript算法解决方案:</p><div class="ml mm gp gr mn mo"><a href="https://medium.com/javascript-in-plain-english/javascript-algorithm-calculate-body-mass-index-6f14dce4075d" rel="noopener follow" target="_blank"><div class="mp ab fo"><div class="mq ab mr cl cj ms"><h2 class="bd iu gy z fp mt fr fs mu fu fw is bi translated">JavaScript算法:计算身体质量指数</h2><div class="mv l"><h3 class="bd b gy z fp mt fr fs mu fu fw dk translated">我们写了一个函数，计算你的身体质量指数，并确定你是否超重，体重不足，肥胖或正常。</h3></div><div class="mw l"><p class="bd b dl z fp mt fr fs mu fu fw dk translated">medium.com</p></div></div><div class="mx l"><div class="my l mz na nb mx nc ks mo"/></div></div></a></div><div class="ml mm gp gr mn mo"><a href="https://medium.com/javascript-in-plain-english/javascript-algorithm-es6-string-addition-d9022d8f189c" rel="noopener follow" target="_blank"><div class="mp ab fo"><div class="mq ab mr cl cj ms"><h2 class="bd iu gy z fp mt fr fs mu fu fw is bi translated">JavaScript算法:ES6字符串添加</h2><div class="mv l"><h3 class="bd b gy z fp mt fr fs mu fu fw dk translated">我们将在不使用任何JavaScript内置方法和+号的情况下连接两个字符串。</h3></div><div class="mw l"><p class="bd b dl z fp mt fr fs mu fu fw dk translated">medium.com</p></div></div><div class="mx l"><div class="nd l mz na nb mx nc ks mo"/></div></div></a></div><div class="ml mm gp gr mn mo"><a href="https://medium.com/javascript-in-plain-english/javascript-algorithm-funny-string-adabc8eac4d7" rel="noopener follow" target="_blank"><div class="mp ab fo"><div class="mq ab mr cl cj ms"><h2 class="bd iu gy z fp mt fr fs mu fu fw is bi translated">JavaScript算法:有趣的字符串</h2><div class="mv l"><h3 class="bd b gy z fp mt fr fs mu fu fw dk translated">对于今天的算法，我们要写一个叫做funnyString的函数，它接受一个输入:一个字符串，s。</h3></div><div class="mw l"><p class="bd b dl z fp mt fr fs mu fu fw dk translated">medium.com</p></div></div><div class="mx l"><div class="ne l mz na nb mx nc ks mo"/></div></div></a></div></div></div>    
</body>
</html>