<html>
<head>
<title>Are NoSQL Databases Relevant for Data Engineering?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">NoSQL数据库与数据工程相关吗？</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/are-nosql-databases-relevant-for-data-engineering-e631abe473f5?source=collection_archive---------14-----------------------#2021-03-11">https://levelup.gitconnected.com/are-nosql-databases-relevant-for-data-engineering-e631abe473f5?source=collection_archive---------14-----------------------#2021-03-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="4df7" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">SQL很棒，但有时您可能需要其他东西</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/f6758ff6fe010439bfa457a9ae03fc7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*19amUhUQWpZuAUAGvj_rcA.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">照片由来自<a class="ae ky" href="https://www.pexels.com/photo/aerial-view-of-city-buildings-424184/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> Pexels </a> | <a class="ae ky" href="https://www.annageller.com/disclosure" rel="noopener ugc nofollow" target="_blank">品牌内容披露</a>的<a class="ae ky" href="https://www.pexels.com/@patricialazaro?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> Patricia Lazaro </a>拍摄</figcaption></figure><p id="7e8d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi lv translated">总的来说，数据工程师经常处理的数据类型是关系型的。数据仓库中的表，OLTP数据库中的事务性数据—它们都可以使用SQL进行查询和访问。但是这是否意味着NoSQL与数据工程无关呢？在本文中，我们将研究数据工程师可能需要与NoSQL数据存储交互的用例。</p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="91dd" class="ml mm it bd mn mo mp mq mr ms mt mu mv jz mw ka mx kc my kd mz kf na kg nb nc bi translated">NoSQL背后的原因</h1><p id="f37c" class="pw-post-body-paragraph kz la it lb b lc nd ju le lf ne jx lh li nf lk ll lm ng lo lp lq nh ls lt lu im bi translated">如今，数据存储的速度、容量和多样性让许多关系数据库系统无法跟上。从历史上看，这是大型科技公司开发自己的NoSQL解决方案来缓解这些问题的主要原因。2006年，谷歌发布了他们的<strong class="lb iu"> Bigtable </strong>论文，为开源的<strong class="lb iu"> HBase </strong> NoSQL数据存储和GCP的<strong class="lb iu">云Bigtable </strong>奠定了基础。2007年，亚马逊用迪纳摩纸提供了他们的替代解决方案。</p><p id="d213" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从那时起，其他NoSQL分布式数据库系统不断涌现。他们都主要试图缓解规模问题(<strong class="lb iu"> <em class="ni">数据</em> </strong> <em class="ni"> </em> <strong class="lb iu"> <em class="ni">卷</em> </strong>)，这是传统的垂直可扩展RDBMS难以实现的。他们不是纵向扩展(<em class="ni">为您的单个服务器</em>购买更多RAM和CPU)，而是在横向可扩展的分布式集群上运行，允许他们通过简单地向集群添加更多节点来增加容量。</p><p id="6327" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">除了可伸缩性和处理庞大的数据量之外，许多分布式NoSQL数据库系统还处理来自许多不同格式的数据的挑战，这些格式在关系数据库中很难实现。在我的职业生涯中，当人们试图将非关系数据序列化和blob化到关系数据库时，我看到了许多创造性的解决方案。不过，这种自建系统往往难以大规模运营和管理。带有读取模式的文档数据库在这方面有更大的灵活性，比如MongoDB。</p><p id="3489" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，随着数据速度的不断提高，许多NoSQL数据库帮助解决了这个问题。例如，<a class="ae ky" href="https://towardsdatascience.com/amazon-timestream-is-finally-released-is-it-worth-your-time-e6b7eff10867" rel="noopener" target="_blank"> Amazon Timestream </a>以非常直观和简单的方式处理来自各种物联网设备的数据流。</p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="c5cd" class="ml mm it bd mn mo mp mq mr ms mt mu mv jz mw ka mx kc my kd mz kf na kg nb nc bi translated">作为一名数据工程师，我为什么需要了解NoSQL数据商店？</h1><p id="02f7" class="pw-post-body-paragraph kz la it lb b lc nd ju le lf ne jx lh li nf lk ll lm ng lo lp lq nh ls lt lu im bi translated">数据工程师的职责之一是<strong class="lb iu">整合</strong>和<strong class="lb iu">整合来自各种来源的</strong>数据，并一致可靠地提供给数据消费者，以便这些数据可用于分析和构建数据产品。这意味着建立数据管道<strong class="lb iu">从</strong>(其中<em class="ni"/>)<strong class="lb iu">NoSQL数据库</strong>中提取数据，并将其存储在数据湖或数据仓库中。由于上述数据<strong class="lb iu">的多样性</strong>，数据湖对于存储来自NoSQL数据存储的数据特别有用。</p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="1ced" class="ml mm it bd mn mo mp mq mr ms mt mu mv jz mw ka mx kc my kd mz kf na kg nb nc bi translated">数据工程的NoSQL用例</h1><p id="e1ba" class="pw-post-body-paragraph kz la it lb b lc nd ju le lf ne jx lh li nf lk ll lm ng lo lp lq nh ls lt lu im bi translated">现在我们知道了为什么NoSQL对数据工程很重要，让我们看看我们可能遇到的典型用例。</p><h2 id="bddc" class="nj mm it bd mn nk nl dn mr nm nn dp mv li no np mx lm nq nr mz lq ns nt nb nu bi translated">1.日志流分析</h2><p id="6912" class="pw-post-body-paragraph kz la it lb b lc nd ju le lf ne jx lh li nf lk ll lm ng lo lp lq nh ls lt lu im bi translated">如今，许多应用程序正在向Elasticsearch发送日志，并且可以使用Kibana进行分析和可视化。得益于动态模式和索引，Elaticsearch是数据工程工具箱中一个方便的NoSQL数据存储，尤其适用于容器监控、识别操作问题和日志分析。</p><h2 id="067d" class="nj mm it bd mn nk nl dn mr nm nn dp mv li no np mx lm nq nr mz lq ns nt nb nu bi translated">2.从物联网设备和实时应用中提取时序数据</h2><p id="7721" class="pw-post-body-paragraph kz la it lb b lc nd ju le lf ne jx lh li nf lk ll lm ng lo lp lq nh ls lt lu im bi translated">关系数据库系统通常不打算同时与数千个打开的连接一起使用。想象一下，您管理着一大群服务器或物联网设备，这些设备将CPU利用率等指标传输到一些集中式数据存储，以便这些信息可以用于实时仪表板(<em class="ni">显示系统健康状况</em>)和异常检测分析。如果您为此使用关系数据库，您可能会遇到连接问题(<em class="ni">导致一些数据丢失</em>)，因为RDBMS不是为成千上万的短期连接设计的。相比之下，NoSQL分布式数据存储，如AWS Timestream可以轻松处理这一问题。</p><h2 id="fdd8" class="nj mm it bd mn nk nl dn mr nm nn dp mv li no np mx lm nq nr mz lq ns nt nb nu bi translated">3.从NoSQL后端系统提取数据</h2><p id="cda9" class="pw-post-body-paragraph kz la it lb b lc nd ju le lf ne jx lh li nf lk ll lm ng lo lp lq nh ls lt lu im bi translated">NoSQL数据库被用作许多应用程序的后端数据存储，包括电子商务、内容管理平台(博客)、移动应用程序、网站、网络分析、点击流、购物车等等。一旦您建立了数据管道，将这些数据提取或流入您的数据湖或数据仓库，所有这些数据都可以用于分析。</p><h2 id="192e" class="nj mm it bd mn nk nl dn mr nm nn dp mv li no np mx lm nq nr mz lq ns nt nb nu bi translated"><strong class="ak"> 4。为快速检索缓存数据</strong></h2><p id="6051" class="pw-post-body-paragraph kz la it lb b lc nd ju le lf ne jx lh li nf lk ll lm ng lo lp lq nh ls lt lu im bi translated">如果您曾经使用一些BI工具(如Tableau)构建过仪表板，那么如果数据集相当大，您可能更喜欢使用摘录而不是实时数据。与关系数据库建立连接并等待它们处理和检索数据通常太慢，无法构建真正高性能的仪表板(应用过滤器时不会挂起的<em class="ni"/>)。出于这个目的，内存中的NoSQL数据存储，如<strong class="lb iu"> Redis </strong>非常有用。如果您使用这些来<strong class="lb iu">缓存您的仪表板需要的最近数据</strong>，您可以确保没有延迟并提供良好的用户体验。</p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="1d5b" class="ml mm it bd mn mo mp mq mr ms mt mu mv jz mw ka mx kc my kd mz kf na kg nb nc bi translated">演示:从NoSQL提取数据</h1><p id="25fb" class="pw-post-body-paragraph kz la it lb b lc nd ju le lf ne jx lh li nf lk ll lm ng lo lp lq nh ls lt lu im bi translated">让我们演示如何从DynamoDB中提取数据，dynamo db是AWS上最受欢迎的(<em class="ni">无服务器</em> ) NoSQL数据存储之一。我用分区键<code class="fe nv nw nx ny b">index</code>创建了一个名为<code class="fe nv nw nx ny b">demo</code>的表。这个指数相当于我的熊猫数据框架的指数。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/caa5cfd4231793d5648cbb0a44f90b0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xZsNatNPo-AdUTRoI_AiSQ.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">使用默认设置创建DynamoDB表-作者图片</figcaption></figure><p id="3f99" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们可以使用<code class="fe nv nw nx ny b">boto3</code>和<code class="fe nv nw nx ny b">awswrangler</code>的组合来加载一个样本数据集。然后，从第34行开始，我们构建一个简单的ETL来检索从昨天开始插入的数据。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="6d19" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，我们可以使用管理控制台中的PartiQL查询编辑器来验证我们的ETL是否返回了正确的数据。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oc"><img src="../Images/532c71017d6dddf4d6a0d6c0dcac036e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_f9z3pSBvEYR9na3T4UzYw.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">DynamoDB PartiQL查询编辑器—作者图片</figcaption></figure></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="d840" class="ml mm it bd mn mo mp mq mr ms mt mu mv jz mw ka mx kc my kd mz kf na kg nb nc bi translated">如何关注你的DynamoDB资源？</h1><p id="5fff" class="pw-post-body-paragraph kz la it lb b lc nd ju le lf ne jx lh li nf lk ll lm ng lo lp lq nh ls lt lu im bi translated">为了监视我们的表所使用的读写容量单位，利用一个可观察性平台会很有帮助，它可以为您提供关于基础设施和应用程序健康状况的更多细节。使用<a class="ae ky" href="https://dashbird.io/" rel="noopener ugc nofollow" target="_blank"> Dashbird </a>，您可以跟踪:</p><ul class=""><li id="62bc" class="od oe it lb b lc ld lf lg li of lm og lq oh lu oi oj ok ol bi translated">读取或写入数据时发生的任何<strong class="lb iu">错误</strong>，</li><li id="96b3" class="od oe it lb b lc om lf on li oo lm op lq oq lu oi oj ok ol bi translated">您的读写操作的平均<strong class="lb iu">延迟</strong>，</li><li id="4c26" class="od oe it lb b lc om lf on li oo lm op lq oq lu oi oj ok ol bi translated">是否为快速<a class="ae ky" href="https://dashbird.io/blog/10-ways-protect-mission-critical-database/" rel="noopener ugc nofollow" target="_blank">时间点恢复</a>启用连续<strong class="lb iu">备份</strong>，</li><li id="d8b9" class="od oe it lb b lc om lf on li oo lm op lq oq lu oi oj ok ol bi translated">以及您的资源消耗了多少<strong class="lb iu">读取(RCU)和写入容量单位(WCU) </strong>。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi or"><img src="../Images/fcb5946315eab69dfc4da7f89195b29b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qOG_ymEXie70fu4zIg5bYw.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://dashbird.io/" rel="noopener ugc nofollow" target="_blank"> Dashbird </a>中的“演示”DynamoDB表—图片由作者提供</figcaption></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi os"><img src="../Images/14726b6f3ef83a1484c233eff5a68873.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y5hOqhjGPJC0mGCaPHysvA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">使用<a class="ae ky" href="https://dashbird.io/" rel="noopener ugc nofollow" target="_blank"> Dashbird </a>观察到的读写操作的平均延迟—图片由作者提供</figcaption></figure></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="5fcc" class="ml mm it bd mn mo mp mq mr ms mt mu mv jz mw ka mx kc my kd mz kf na kg nb nc bi translated">NoSQL数据库的缺点</h1><p id="7beb" class="pw-post-body-paragraph kz la it lb b lc nd ju le lf ne jx lh li nf lk ll lm ng lo lp lq nh ls lt lu im bi translated">前面的部分展示了NoSQL数据存储在数据工程中大放异彩的用例。但是现在到了弊端。</p><p id="24f1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">NoSQL数据存储的主要缺点是没有一个成熟的SQL接口，开发人员需要学习一些专有词汇、API或接口来访问数据。时标DB在他们的博客上说得很好:</p><blockquote class="ot ou ov"><p id="d7b2" class="kz la ni lb b lc ld ju le lf lg jx lh ow lj lk ll ox ln lo lp oy lr ls lt lu im bi translated">“SQL又回来了。不仅仅是因为编写粘合代码来组装NoSQL工具很烦人。不仅仅是因为重新培训劳动力学习各种新语言很难。不仅仅是因为标准是一件好事。还因为这个世界充满了数据。[……]要么我们可以生活在一个脆弱的系统和一百万个界面的世界里。或者我们可以继续拥抱SQL。”— <a class="ae ky" href="https://blog.timescale.com/blog/why-sql-beating-nosql-what-this-means-for-future-of-data-time-series-database-348b777b847a/" rel="noopener ugc nofollow" target="_blank">来源</a></p></blockquote><p id="b971" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">尽管许多NoSQL数据存储在顶层提供了SQL接口，但它们永远不会像成熟的关系数据库那样强大，在关系数据库中可以创建复杂的查询(<em class="ni">并不是说复杂的查询总是一件好事</em>)。</p><p id="082d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，纯粹从数据工程的角度来看，最好是与那些NoSQL系统合作，而不是与之对抗。当有一个用例清楚地证明NoSQL的规模和灵活性来自于读取模式时，使用它们。</p><p id="c3cf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果数据的格式不适合存储在数据仓库中，我们总是可以提取它，将其存储在数据湖中(<em class="ni"> ELT-approach </em>)，然后<strong class="lb iu">以其原始格式</strong>提供给分析人员。如今，许多工具允许我们理解存储在数据湖中的数据。当利用Presto ( <em class="ni">或AWS版本:Amazon Athena </em>)或BigQuery等无服务器SQL查询引擎时，甚至可以分析半结构化的嵌套数据。</p></div><div class="ab cl me mf hx mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="im in io ip iq"><h1 id="b6d0" class="ml mm it bd mn mo mp mq mr ms mt mu mv jz mw ka mx kc my kd mz kf na kg nb nc bi translated">结论</h1><p id="14e5" class="pw-post-body-paragraph kz la it lb b lc nd ju le lf ne jx lh li nf lk ll lm ng lo lp lq nh ls lt lu im bi translated">回答题目中的问题:是的，NoSQL数据存储对数据工程很重要。尽管它们通常缺乏友好的类似SQL的接口来检索您需要的信息，但在各种用例中仍然非常有用。考虑到越来越多的供应商意识到需要一个SQL接口来进行数据检索(例如AWS的PartiQL、the“good old”Hive、Spark SQL、Cassandra的CQL、Timestream的SQL查询等)，我们应该预计这一趋势将会继续。有一天，我们可能能够编写SQL查询来以同样的方式检索数据，而不用考虑后台的数据存储。事实上，如果我们用Presto来看联邦查询，这个未来可能并不遥远。</p><p id="4b6a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">感谢您的阅读！如果这篇文章有用，请关注我的</strong><a class="ae ky" href="https://medium.com/@anna.anisienia" rel="noopener"><strong class="lb iu"/></a><strong class="lb iu">来看我的下一篇文章。</strong></p></div></div>    
</body>
</html>