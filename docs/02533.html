<html>
<head>
<title>JavaScript Clean Code — Name and Test Heuristics</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript干净代码—命名和测试试探法</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/javascript-clean-code-name-and-test-heuristics-59770725e257?source=collection_archive---------19-----------------------#2020-03-19">https://levelup.gitconnected.com/javascript-clean-code-name-and-test-heuristics-59770725e257?source=collection_archive---------19-----------------------#2020-03-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/f1861fec950c84b6c8759de35fd60615.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*O-I9uhRG9G8eMaxS"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated"><a class="ae kf" href="https://unsplash.com/@shahzin_2903?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">沙欣·沙吉德</a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="8a75" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">糟糕的代码有很多独特的特征。在这篇文章中，我们将看看每一个和他们是什么。我们看更一般的代码味道。</p><p id="a40a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这篇文章中，我们将看看如何正确地命名事物，并编写一个高覆盖率和快速的测试。</p><h1 id="8f4a" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">命名</h1><h2 id="1ff5" class="mc lf it bd lg md me dn lk mf mg dp lo kr mh mi ls kv mj mk lw kz ml mm ma mn bi translated">对长范围使用长名称</h2><p id="8f41" class="pw-post-body-paragraph kg kh it ki b kj mo kl km kn mp kp kq kr mq kt ku kv mr kx ky kz ms lb lc ld im bi translated">如果作用域很长，那么名字应该比短作用域的名字长。</p><p id="66a9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">短名称的变量在长距离上失去了意义。</p><h2 id="62c7" class="mc lf it bd lg md me dn lk mf mg dp lo kr mh mi ls kv mj mk lw kz ml mm ma mn bi translated">避免编码</h2><p id="9604" class="pw-post-body-paragraph kg kh it ki b kj mo kl km kn mp kp kq kr mq kt ku kv mr kx ky kz ms lb lc ld im bi translated">名称不应该用范围信息编码。我们应该避免无用的前缀。</p><p id="d0cf" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然而，名称中的类型在JavaScript中很有用，因为变量和常量都有动态类型。</p><h2 id="f4ac" class="mc lf it bd lg md me dn lk mf mg dp lo kr mh mi ls kv mj mk lw kz ml mm ma mn bi translated">名字应该描述副作用</h2><p id="e84e" class="pw-post-body-paragraph kg kh it ki b kj mo kl km kn mp kp kq kr mq kt ku kv mr kx ky kz ms lb lc ld im bi translated">如果一段代码有副作用，名字应该反映出来。例如，如果我们有以下函数:</p><pre class="mt mu mv mw gt mx my mz na aw nb bi"><span id="4e27" class="mc lf it my b gy nc nd l ne nf">let foo;<br/>const getFoo = () =&gt; {<br/>  if (!foo) {<br/>    foo = {}<br/>  }<br/>  return foo<br/>}</span></pre><p id="9166" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">那么我们应该命名为<code class="fe ng nh ni my b">getFoo</code>因为我们没有在名字中描述明显的副作用。</p><p id="d1ee" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">相反，我们应该将它命名为<code class="fe ng nh ni my b">setFooIfNotExistAndGetFoo</code>,以便将这两种行为都考虑在内。</p><figure class="mt mu mv mw gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nj"><img src="../Images/f5e271b8e65515a6532ea0f805e43ed4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7yf5qSO2CgqJSe1G"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">照片由<a class="ae kf" href="https://unsplash.com/@giancarlos?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> FOTOGRAFIA拍摄。GES </a>开<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">退溅</a></figcaption></figure><h1 id="5995" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">试验</h1><h2 id="b127" class="mc lf it bd lg md me dn lk mf mg dp lo kr mh mi ls kv mj mk lw kz ml mm ma mn bi translated">测试不足</h2><p id="b6ee" class="pw-post-body-paragraph kg kh it ki b kj mo kl km kn mp kp kq kr mq kt ku kv mr kx ky kz ms lb lc ld im bi translated">我们应该确保我们有足够的测试覆盖率，以便我们知道代码和分支的工作。</p><p id="f189" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">此外，我们的测试应该考虑阳性和阴性病例。</p><p id="0160" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">边界和边缘案例也应该有测试来测试可能破坏我们代码的案例。</p><h2 id="8f0e" class="mc lf it bd lg md me dn lk mf mg dp lo kr mh mi ls kv mj mk lw kz ml mm ma mn bi translated">使用覆盖工具</h2><p id="f3ee" class="pw-post-body-paragraph kg kh it ki b kj mo kl km kn mp kp kq kr mq kt ku kv mr kx ky kz ms lb lc ld im bi translated">测试覆盖工具告诉我们有哪些测试，哪些仍然需要测试覆盖。</p><p id="0e77" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">它们还告诉我们代码的哪些分支有测试覆盖率。</p><h2 id="2f58" class="mc lf it bd lg md me dn lk mf mg dp lo kr mh mi ls kv mj mk lw kz ml mm ma mn bi translated">不要跳过琐碎的测试</h2><p id="04f9" class="pw-post-body-paragraph kg kh it ki b kj mo kl km kn mp kp kq kr mq kt ku kv mr kx ky kz ms lb lc ld im bi translated">它们易于编写，是很好的文档。</p><h2 id="377a" class="mc lf it bd lg md me dn lk mf mg dp lo kr mh mi ls kv mj mk lw kz ml mm ma mn bi translated">被忽略的测试是一个关于歧义的问题</h2><p id="976b" class="pw-post-body-paragraph kg kh it ki b kj mo kl km kn mp kp kq kr mq kt ku kv mr kx ky kz ms lb lc ld im bi translated">被忽略的测试总是有问题的。我们不知道他们为什么被跳过，所以我们一定要弄清楚为什么我们跳过一个测试。</p><h2 id="3454" class="mc lf it bd lg md me dn lk mf mg dp lo kr mh mi ls kv mj mk lw kz ml mm ma mn bi translated">测试边界条件</h2><p id="1a66" class="pw-post-body-paragraph kg kh it ki b kj mo kl km kn mp kp kq kr mq kt ku kv mr kx ky kz ms lb lc ld im bi translated">测试边界条件是很重要的，因为代码经常在边界条件附近中断。</p><h2 id="f45c" class="mc lf it bd lg md me dn lk mf mg dp lo kr mh mi ls kv mj mk lw kz ml mm ma mn bi translated">彻底测试附近的bug</h2><p id="eaf1" class="pw-post-body-paragraph kg kh it ki b kj mo kl km kn mp kp kq kr mq kt ku kv mr kx ky kz ms lb lc ld im bi translated">如果一段代码有错误，那么我们应该更多地测试那些情况。</p><h2 id="d5e6" class="mc lf it bd lg md me dn lk mf mg dp lo kr mh mi ls kv mj mk lw kz ml mm ma mn bi translated">失败的模式很能说明问题</h2><p id="837b" class="pw-post-body-paragraph kg kh it ki b kj mo kl km kn mp kp kq kr mq kt ku kv mr kx ky kz ms lb lc ld im bi translated">测试用例失败的模式可以告诉我们很多关于什么破坏了我们的代码。</p><p id="842a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">失败的案例通常有一定的模式，比如当传入5个或更多字符时失败，或者类似的情况。</p><h2 id="3469" class="mc lf it bd lg md me dn lk mf mg dp lo kr mh mi ls kv mj mk lw kz ml mm ma mn bi translated">测试应该很快</h2><p id="3948" class="pw-post-body-paragraph kg kh it ki b kj mo kl km kn mp kp kq kr mq kt ku kv mr kx ky kz ms lb lc ld im bi translated">运行缓慢的测试是一种折磨。他们只是被忽视，不会得到运行。我们应该尽可能快地制作它们，特别是因为它们将会有很多。</p><h1 id="7616" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">结论</h1><p id="785c" class="pw-post-body-paragraph kg kh it ki b kj mo kl km kn mp kp kq kr mq kt ku kv mr kx ky kz ms lb lc ld im bi translated">我们应该用明确的方式给事物命名。如果有副作用，我们应该描述一下。</p><p id="7a95" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">此外，测试应该覆盖bug和边界情况，并且应该运行得很快。</p><p id="9051" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以使用覆盖工具来清楚地了解测试覆盖了哪些代码。</p></div></div>    
</body>
</html>