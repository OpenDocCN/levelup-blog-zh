# å¦‚ä½•ä½¿ç”¨ React ä¸Šä¸‹æ–‡ API æ„å»º React æœ¬æœºã€Expo å’Œ Firebase åº”ç”¨ç¨‹åº

> åŸæ–‡ï¼š<https://levelup.gitconnected.com/how-to-use-the-react-context-api-to-build-react-native-expo-and-firebase-apps-adda840e52b0>

![](img/462996c9558aa9588d59206eebcd976a.png)

React ä¸Šä¸‹æ–‡ API å…è®¸æ‚¨é¿å…åœ¨ç»„ä»¶æ ‘çš„æ¯ä¸€å±‚å°†å±æ€§ä»çˆ¶çº§ä¼ é€’åˆ°å­çº§ã€‚å®ƒå…è®¸æ‚¨ä½¿ç”¨ Redux ç­‰çŠ¶æ€ç®¡ç†åº“å‘åº”ç”¨ç¨‹åºæ·»åŠ å…¨å±€çŠ¶æ€ï¼Œè€Œæ— éœ€å¢åŠ ä»£ç åº“çš„å¤æ‚æ€§ã€‚åœ¨ React Native æˆ– Expo åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨å¸¦æœ‰ä¸Šä¸‹æ–‡ API çš„ Firebase èº«ä»½éªŒè¯å’Œå­˜å‚¨æœåŠ¡æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å°è¯•ç”¨ä¾‹ã€‚

åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘å°†å‘æ‚¨å±•ç¤ºå¦‚ä½•ä½¿ç”¨ä¸Šä¸‹æ–‡ API åœ¨ Expo åº”ç”¨ç¨‹åºä¸­è®¾ç½® Firebase ç”µå­é‚®ä»¶èº«ä»½éªŒè¯ã€‚åœ¨æˆ‘ä»¬å¼€å§‹ä¹‹å‰ï¼Œè¯·æ³¨æ„æˆ‘å°†ä½¿ç”¨ä¸€ä¸ª Expo é¡¹ç›®ï¼Œå®ƒå…·æœ‰:

*   [å¯¼èˆªè®¾ç½®åŒ](https://amanhimself.dev/authentication-navigation-flow-in-react-native-apps) `[react-navigation](https://amanhimself.dev/authentication-navigation-flow-in-react-native-apps)` [4.x.x](https://amanhimself.dev/authentication-navigation-flow-in-react-native-apps)
*   ç¼“å­˜æœ¬åœ°å›¾åƒ/èµ„äº§
*   [ä½¿ç”¨ formik å’Œ yup ç™»å½•å¹¶æ³¨å†Œå±å¹•è®¾ç½®](https://amanhimself.dev/build-validate-forms-with-react-native-formik-yup)
*   [ç”¨ formik å’Œ yup å¤„ç† React åŸç”Ÿè¡¨å•ä¸­çš„ä¸åŒå­—æ®µç±»å‹](https://amanhimself.dev/handle-different-field-types-in-react-native-forms)

åœ¨å¼€å§‹ä¹‹å‰ï¼Œæ‚¨å¯ä»¥ä»è¿™ä¸ª Github repo ä¸‹è½½å½“å‰çŠ¶æ€çš„æºä»£ç ã€‚

å®‰è£…æºä»£ç åï¼Œè¯·åœ¨é¡¹ç›®ç›®å½•ä¸­å¯¼èˆªï¼Œå¹¶é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…ä¾èµ–é¡¹:

> *å¦‚æœä½ æœ‰å…´è¶£ç”¨ Redux æ¥ç®¡ç†é‚®ç®±è®¤è¯ï¼Œç”¨ Firebaseã€Firestoreã€React Nativeã€Expo æ¥å­˜å‚¨ç”¨æˆ·çš„æ•°æ®ï¼Œå¯ä»¥å‚è€ƒæˆ‘ä»¥å‰çš„ä¸€ç¯‡å¸–å­* [***è¿™é‡Œ***](https://amanhimself.dev/how-to-build-an-email-authentication-app-with-firebase-firestore-and-react-native) *ã€‚*

# ç›®å½•

*   è¦æ±‚
*   æ·»åŠ  Firebase é…ç½®å¹¶é›†æˆ Firebase SDK
*   å¯ç”¨ Firestore
*   æ·»åŠ ä¸Šä¸‹æ–‡ API
*   å‘ Firebase æ³¨å†Œ
*   å¤„ç†å®æ—¶/æœåŠ¡å™¨é”™è¯¯
*   ç™»å½• Firebase ç”¨æˆ·
*   æ·»åŠ æ³¨é”€æŒ‰é’®
*   æ£€æŸ¥è‡ªåŠ¨ç™»å½•çš„ç”¨æˆ·èº«ä»½éªŒè¯çŠ¶æ€
*   ç»“è®º

# è¦æ±‚

è¦éµå¾ªæœ¬æ•™ç¨‹ï¼Œè¯·ç¡®ä¿æ‚¨çš„æœ¬åœ°å¼€å‘ç¯å¢ƒä¸­å®‰è£…äº†ä»¥ä¸‹åº“ï¼Œå¹¶ä¸”å¯ä»¥è®¿é—®ä¸‹é¢æåˆ°çš„æœåŠ¡ã€‚

*   å®‰è£…äº† npm/yarn çš„èŠ‚ç‚¹(> = `10.x.x`)
*   expo-cli (>= `3.x.x`)(ä»¥å‰ç§°ä¸º create-react-native-app)
*   Firebase è´¦æˆ·ï¼Œå…è´¹å±‚å°±å¯ä»¥äº†

*å¦‚æœä½ æ­£åœ¨å¯»æ‰¾é€šè¿‡å®ç°é’©å­æ¥å‡çº§ä½ çš„ React åŸç”Ÿåº”ç”¨å¹¶ä¸”æƒ³è¦å¼€å§‹ï¼Œåœ¨è¿™é‡Œ* *æŸ¥çœ‹å¸–å­* [***ï¼Œå®ƒè§£é‡Šäº†å¦‚ä½•åœ¨ React åŸç”Ÿåº”ç”¨ä¸­ä½¿ç”¨* `*useState*` *å’Œ* `*useEffect*` *ã€‚***](https://www.instamobile.io/mobile-development/react-native-hooks/)

# æ·»åŠ  Firebase é…ç½®å¹¶é›†æˆ Firebase SDK

> å¦‚æœä½ å·²ç»çŸ¥é“å¦‚ä½•è·å¾— Firebase API å’Œå­˜å‚¨å¯†é’¥ï¼Œä½ å¯ä»¥è·³è¿‡è¿™ä¸€èŠ‚ã€‚å¦åˆ™ï¼Œä½ å¯ä»¥è·Ÿç€èµ°

ä» [Firebase æ§åˆ¶å°](https://console.firebase.google.com)åˆ›å»ºä¸€ä¸ªæ–°çš„ Firebase é¡¹ç›®ã€‚

![](img/f1eade9b3ea82620a9e2c8643c7020f1.png)

æ¥ä¸‹æ¥ï¼Œå¡«å†™å…³äº Firebase é¡¹ç›®çš„é€‚å½“ç»†èŠ‚ï¼Œå¹¶å•å‡» Create project æŒ‰é’®ã€‚

![](img/31c2199473300418778667501348309a.png)

æ‚¨å°†è¢«é‡å®šå‘åˆ° Firebase é¡¹ç›®çš„ä»ªè¡¨æ¿ã€‚ä»å·¥å…·æ¡èœå•è¿›å…¥é¡¹ç›®è®¾ç½®ï¼Œå¤åˆ¶`firebaseConfig`å¯¹è±¡ã€‚å®ƒæœ‰æˆ‘ä»¬éœ€è¦çš„æ‰€æœ‰å¿…è¦çš„ API é”®ï¼Œä»¥ä¾¿ä½¿ç”¨ Firebase é¡¹ç›®ä½œä¸ºä»»ä½• React Native æˆ– Expo åº”ç”¨ç¨‹åºçš„åç«¯ã€‚

![](img/f116c17a9d26646ca0dddece73bf4812.png)

æ¥ä¸‹æ¥ï¼Œè¿›å…¥ [Expo app](https://github.com/amandeepmittal/expo-firebase/releases/tag/0.5.0) å†…éƒ¨ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º`config`çš„æ–°ç›®å½•ã€‚è¯¥æ–‡ä»¶å¤¹å°†åŒ…å«æ‰€æœ‰é…ç½®æ–‡ä»¶ã€‚åœ¨å…¶ä¸­ï¼Œåˆ›å»º`Firebase/firebaseConfig.js`æ–‡ä»¶å¹¶ç²˜è´´ config å¯¹è±¡çš„å†…å®¹ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚

æ¥ä¸‹æ¥ï¼Œä»ç»ˆç«¯çª—å£å®‰è£… Firebase SDKã€‚

å›åˆ°`config/Firebase/`ç›®å½•ã€‚åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶`firebase.js`ã€‚è¿™å°†åŒ…å«ä¸é›†æˆ Firebase SDK ç›¸å…³çš„æ‰€æœ‰é…ç½®ä»¥åŠå®ƒæä¾›çš„èº«ä»½éªŒè¯åŠŸèƒ½â€”â€”å®æ—¶æ•°æ®åº“ç­‰ç­‰ã€‚

åŒæ ·ï¼Œç”¨ä¸€äº›æ‚¨å°†åœ¨æ•™ç¨‹ä¸­ä½¿ç”¨çš„åˆå§‹æ–¹æ³•å®šä¹‰ä¸€ä¸ª`Firebase`å¯¹è±¡ã€‚è¿™äº›æ–¹æ³•å°†æ‰§è¡Œå®æ—¶äº‹ä»¶ï¼Œå¦‚ç”¨æˆ·èº«ä»½éªŒè¯ã€ä»åº”ç”¨ç¨‹åºä¸­æ³¨é”€ï¼Œå¹¶åŸºäºå¯¹åä¸º Cloud Firestore çš„å®æ—¶ NoSQL æ•°æ®åº“ä¸­çš„`uid`(*Firebase ä¸ºæ¯ä¸ªæ³¨å†Œç”¨æˆ·åˆ›å»ºçš„å”¯ä¸€ç”¨æˆ· id*)çš„å¼•ç”¨æ¥å­˜å‚¨ç”¨æˆ·è¯¦ç»†ä¿¡æ¯ã€‚

è¿™ç§ä¸ React çš„ä¸Šä¸‹æ–‡ API ä¸€èµ·ä½¿ç”¨çš„æ–¹æ³•å°†æ¶ˆé™¤ Redux çŠ¶æ€ç®¡ç†(è¿™æ˜¯æˆ‘ä»¥å‰åœ¨[](https://amanhimself.dev/how-to-build-an-email-authentication-app-with-firebase-firestore-and-react-native)**ä¸­ä½¿ç”¨çš„æ–¹æ³•)åº“çš„ä½¿ç”¨ï¼Œå¹¶ç®€å•åœ°ä½¿ç”¨ React åŸåˆ™ã€‚ç”¨ä¸Šä¸‹æ–‡å¡«å……`Firebase`å¯¹è±¡ï¼Œä½ å°†èƒ½å¤Ÿè®¿é—®æ‰€æœ‰çš„åŠŸèƒ½ï¼Œä»¥åŠä½œä¸ºé“å…·çš„ React æœ¬åœ°åº”ç”¨ç¨‹åºä¸­çš„ç”¨æˆ·ã€‚**

# **å¯ç”¨ Firestore**

**Firebase æä¾›äº†ä¸¤ç§åŸºäºäº‘çš„æ•°æ®åº“æœåŠ¡ã€‚ä¸€ä¸ªå«åšäº‘ Firestoreï¼Œå¦ä¸€ä¸ªå«åšå®æ—¶æ•°æ®åº“ã€‚å®æ—¶æ•°æ®åº“å°†æ•°æ®å­˜å‚¨ä¸ºä¸€æ£µå¤§å‹ JSON æ ‘ã€‚å¤æ‚ä¸”å¯æ‰©å±•çš„æ•°æ®å¾ˆéš¾åœ¨å…¶ä¸­ç»„ç»‡ã€‚**

**åœ¨å­˜å‚¨æ•°æ®æ—¶ï¼ŒCloud Firestore éµå¾ªé€‚å½“çš„ NoSQL æœ¯è¯­ã€‚å®ƒå°†æ•°æ®å­˜å‚¨åœ¨æ–‡æ¡£ä¸­ï¼Œæ¯ä¸ªæ–‡æ¡£éƒ½å¯ä»¥æœ‰å­é›†åˆâ€”â€”å› æ­¤ï¼Œå®ƒé€‚ç”¨äºå¯ä¼¸ç¼©çš„å¤æ‚æ•°æ®åœºæ™¯ã€‚**

**è¿”å› Firebase æ§åˆ¶å°ï¼Œåœ¨æ•°æ®åº“éƒ¨åˆ†ï¼Œé€‰æ‹©äº‘ Firestore å¹¶å•å‡»æŒ‰é’® Create databaseã€‚**

**![](img/b05ee4e614fd7f9984153fb55b047936.png)**

**ç„¶åï¼Œé€‰æ‹©â€œåœ¨æµ‹è¯•æ¨¡å¼ä¸‹å¯åŠ¨â€é€‰é¡¹ï¼Œå¹¶å•å‡»â€œä¸‹ä¸€æ­¥â€æŒ‰é’®ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚**

**![](img/a19235ef8d56118bb66cdf9e40f293c3.png)**

# **æ·»åŠ ä¸Šä¸‹æ–‡ API**

**åœ¨ React åŸç”Ÿåº”ç”¨ä¸­ä½¿ç”¨ä¸Šä¸‹æ–‡ API çš„å¸¸è§åŸå› æ˜¯ï¼Œæ‚¨éœ€è¦åœ¨ç»„ä»¶æ ‘çš„ä¸åŒä½ç½®æˆ–ç»„ä»¶ä¸­å…±äº«ä¸€äº›æ•°æ®ã€‚æ‰‹åŠ¨ä¼ é€’é“å…·æ—¢ä¹å‘³åˆéš¾ä»¥è·Ÿè¸ªã€‚**

**ä¸Šä¸‹æ–‡ API ç”±ä¸‰ä¸ªæ„ä»¶ç»„æˆ:**

*   **åˆ›å»ºä¸Šä¸‹æ–‡å¯¹è±¡**
*   **å£°æ˜æä¾›å€¼çš„æä¾›è€…**
*   **å£°æ˜å…è®¸æ¶ˆè´¹å€¼çš„æ¶ˆè´¹è€…(ç”±æä¾›è€…æä¾›**

***åœ¨`Firebase`ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º`context.js`çš„æ–°æ–‡ä»¶ã€‚å£°æ˜ä¸€ä¸ªå°†è¦æˆä¸ºå¯¹è±¡çš„`FirebaseContext`ã€‚***

***åˆ›å»ºä¸Šä¸‹æ–‡åï¼Œä¸‹ä¸€æ­¥æ˜¯å£°æ˜æä¾›è€…å’Œæ¶ˆè´¹è€…ã€‚***

***æœ€åï¼Œè®©æˆ‘ä»¬å£°æ˜ä¸€ä¸ªç‰¹è®¾(*é«˜é˜¶ç»„ä»¶*)æ¥æ¦‚æ‹¬è¿™ä¸ª Firebase ä¸Šä¸‹æ–‡ã€‚React ä¸­çš„ HoC æ˜¯ä¸€ä¸ªæ¥å—ä¸€ä¸ªç»„ä»¶å¹¶è¿”å›å¦ä¸€ä¸ªç»„ä»¶çš„å‡½æ•°ã€‚è¿™ä¸ª HoC è¦åšçš„ä¸æ˜¯åœ¨æ¯ä¸ªå¿…è¦çš„ç»„ä»¶ä¸­å¯¼å…¥å’Œä½¿ç”¨`Firebase.Consumer`ï¼Œæ‰€æœ‰è¦åšçš„åªæ˜¯å°†ç»„ä»¶ä½œä¸ºå‚æ•°ä¼ é€’ç»™ä¸‹é¢çš„ HoCã€‚***

***åœ¨ä¸‹ä¸€èŠ‚ä¸­ï¼Œå½“ç”¨è¿™ä¸ª HoC ä¿®æ”¹ç°æœ‰çš„`Login`å’Œ`Signup`ç»„ä»¶æ—¶ï¼Œä½ ä¼šæ›´åŠ æ¸…æ¥šåœ°ç†è§£ã€‚ç°åœ¨ï¼Œåˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶`index.js`æ¥ä»`firebase.js`æ–‡ä»¶ä¸­å¯¼å‡º`Firebase`å¯¹è±¡ã€æä¾›è€…å’Œç‰¹è®¾ã€‚***

***æä¾›è€…å¿…é¡»ä»ä¸Šä¸‹æ–‡å¯¹è±¡ä¸­è·å–å€¼ï¼Œä»¥ä¾¿æ¶ˆè´¹è€…ä½¿ç”¨è¯¥å€¼ã€‚è¿™å°†åœ¨`App.js`æ–‡ä»¶ä¸­å®Œæˆã€‚`FirebaseProvider`çš„å€¼å°†æ˜¯å…·æœ‰ä¸åŒç­–ç•¥å’ŒåŠŸèƒ½çš„`Firebase`å¯¹è±¡ï¼Œç”¨äºåœ¨å®æ—¶æ•°æ®åº“ä¸­éªŒè¯å’Œå­˜å‚¨ç”¨æˆ·æ•°æ®ã€‚ç”¨å®ƒåŒ…ä½`AppContainer`ã€‚***

***è¿™å°±æ˜¯è®¾ç½® Firebase SDK çš„å…¨éƒ¨å†…å®¹ã€‚***

# ***å‘ Firebase æ³¨å†Œ***

***åœ¨æœ¬èŠ‚ä¸­ï¼Œæ‚¨å°†ä¿®æ”¹ç°æœ‰çš„`Signup.js`ç»„ä»¶ï¼Œä»¥ä¾¿åœ¨ firebase åç«¯æ³¨å†Œä¸€ä¸ªæ–°ç”¨æˆ·ï¼Œå¹¶å°†ä»–ä»¬çš„æ•°æ®å­˜å‚¨åœ¨ Firestore ä¸­ã€‚é¦–å…ˆï¼Œå¯¼å…¥`withFirebaseHOC`ã€‚***

***ç”¨`handleOnSignup()`æ›¿æ¢`handleSubmit()`æ–¹æ³•ã€‚å› ä¸ºæ‰€æœ‰çš„è¾“å…¥å€¼éƒ½æ¥è‡ª Formikï¼Œæ‰€ä»¥æ‚¨ä¹Ÿå¿…é¡»åœ¨`Formik`å…ƒç´ ä¸Šç¼–è¾‘`onSubmit` propã€‚`signupWithEmail`æ¥è‡ª firebase propsï¼Œå› ä¸ºæ‚¨å·²ç»ç”¨`FirebaseProvider`åŒ…è£…äº†å¯¼èˆªå®¹å™¨ï¼Œ`this.props.firebase`å°†ç¡®ä¿æ–‡ä»¶`config/Firebase/firebase.js`ä¸­çš„`Firebase`å¯¹è±¡å†…çš„ä»»ä½•æ–¹æ³•éƒ½å¯ä»¥åœ¨è¯¥ç»„ä»¶ä¸­ä½¿ç”¨ã€‚***

***`signupWithEmail`æ–¹æ³•æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œ`email`å’Œ`password`ï¼Œä½¿ç”¨å®ƒä»¬ï¼Œå®ƒåˆ›å»ºä¸€ä¸ªæ–°ç”¨æˆ·å¹¶ä¿å­˜ä»–ä»¬çš„å‡­è¯ã€‚ç„¶åï¼Œåœ¨åˆ›å»ºæ–°ç”¨æˆ·æ—¶ï¼Œå®ƒä»å“åº”ä¸­è·å–ç”¨æˆ· id ( `*uid*`)ã€‚`createNewUser()`æ–¹æ³•å°†ç”¨æˆ·å¯¹è±¡`userData`å­˜å‚¨åœ¨é›†åˆ`users`ä¸­ã€‚è¿™ä¸ªç”¨æˆ·å¯¹è±¡åŒ…å«æ¥è‡ªèº«ä»½éªŒè¯å“åº”çš„`uid`ã€æ³¨å†Œè¡¨å•ä¸­è¾“å…¥çš„ç”¨æˆ·çš„å§“åå’Œç”µå­é‚®ä»¶ã€‚***

***ä¿å­˜ç”¨æˆ·å¯¹è±¡çš„é€»è¾‘å¦‚ä¸‹:***

***æœ€åï¼Œä¸è¦å¿˜è®°å¯¼å‡º`withFirebaseHOC`ä¸­çš„`Signup`ç»„ä»¶ã€‚***

***è®©æˆ‘ä»¬çœ‹çœ‹å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚***

***![](img/fe2e41e311d0dd424b5dd9b9f8222f3e.png)***

***å› ä¸ºå®ƒå°†å‡ºç°åœ¨ä¸»å±å¹•ä¸Šï¼Œæ„å‘³ç€ç”¨æˆ·æ­£åœ¨æ³¨å†Œã€‚è¦éªŒè¯è¿™ä¸€ç‚¹ï¼Œè¯·è®¿é—® Firebase æ§åˆ¶å°ä»ªè¡¨æ¿çš„æ•°æ®åº“éƒ¨åˆ†ã€‚æ‚¨ä¼šå‘ç°ä¸€ä¸ª`users`é›†åˆä¸­æœ‰ä¸€ä¸ªå¸¦æœ‰`uid`çš„æ–‡æ¡£ã€‚***

***![](img/4a487f7908a442d743815fb69a33a6e0.png)***

***è¦éªŒè¯`uid`ï¼Œè¯·è®¿é—®è®¤è¯éƒ¨åˆ†ã€‚***

***![](img/fcdb8c6b7190833684b52cc347e9ca94.png)***

# ***å¤„ç†å®æ—¶/æœåŠ¡å™¨é”™è¯¯***

***ä¸ºäº†å¤„ç†å®æ—¶æˆ–æœåŠ¡å™¨é”™è¯¯ï¼ŒFormik æœ‰ä¸€ä¸ªè§£å†³æ–¹æ¡ˆã€‚ç°åœ¨ï¼Œè¦æ˜ç™½åœ¨å®¢æˆ·ç«¯æœ‰æ•ˆçš„ä¸œè¥¿åœ¨æœåŠ¡å™¨ç«¯å¯èƒ½æ˜¯æ— æ•ˆçš„ã€‚ä¾‹å¦‚ï¼Œå½“ä½¿ç”¨ Firebase å­˜å‚¨ä¸­å·²ç»å­˜åœ¨çš„ç”µå­é‚®ä»¶æ³¨å†Œæ–°ç”¨æˆ·æ—¶ï¼Œåº”è¯¥é€šè¿‡æŠ›å‡ºé”™è¯¯æ¥é€šçŸ¥å®¢æˆ·ç«¯çš„ç”¨æˆ·ã€‚***

***ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œåœ¨`Formik`å…ƒç´ ç¼–è¾‘`onSubmit`å±æ€§ï¼Œç»•è¿‡ç¬¬äºŒä¸ªå‚æ•°`actions`ã€‚***

***æ¥ä¸‹æ¥ï¼Œä¸æ˜¯ä»…ä»…åœ¨æ§åˆ¶å°è®°å½•é”™è¯¯å€¼ï¼Œè€Œæ˜¯æ˜¾ç¤ºé”™è¯¯ï¼Œæ‚¨å°†å¿…é¡»ä½¿ç”¨`setFieldError`ã€‚è¿™å°†åœ¨`catch`å—ä¸­è®¾ç½®ä¸€æ¡é”™è¯¯ä¿¡æ¯ã€‚å¦å¤–ï¼Œæ·»åŠ ä¸€ä¸ª`finally`å—ï¼Œå®ƒå°†é¿å…è¡¨å•åœ¨å‡ºé”™æ—¶è¢«æäº¤ã€‚***

***æœ€åï¼Œåœ¨åº”ç”¨ç¨‹åºå±å¹•ä¸Šæ˜¾ç¤ºé”™è¯¯ï¼Œåœ¨`FormButton`ç»„ä»¶åæ·»åŠ ä¸€ä¸ª`ErrorMessage`ã€‚***

***ç°åœ¨å›åˆ°åº”ç”¨ç¨‹åºä¸­çš„æ³¨å†Œè¡¨å•ï¼Œå°è¯•ä½¿ç”¨ä¸Šä¸€æ­¥ä¸­ä½¿ç”¨çš„ç›¸åŒç”µå­é‚®ä»¶ id æ³¨å†Œç”¨æˆ·ã€‚***

***![](img/ed02ee456c1823fdaf5df993b0233e07.png)***

***ç§å§ï¼ç®¡ç”¨ï¼æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯ï¼Œå¹¶ä¸”ä¸æäº¤è¡¨å•ã€‚***

# ***ç™»å½• Firebase ç”¨æˆ·***

***ä¸ä¸Šä¸€èŠ‚ä¸€æ ·ï¼Œå¿…é¡»æ‰§è¡Œç±»ä¼¼æ•°é‡çš„æ­¥éª¤ï¼Œç™»å½•è¡¨å•æ‰èƒ½å·¥ä½œã€‚è¿™é‡Œæ˜¯å®Œæ•´çš„`Login`ç»„ä»¶ï¼Œè€Œä¸æ˜¯é€ä¸ªä»‹ç»ã€‚***

***è®©æˆ‘ä»¬çœ‹çœ‹å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚è¦æˆåŠŸç™»å½•ï¼Œè¯·ä½¿ç”¨æ³¨å†Œçš„å‡­æ®ã€‚***

# ***æ·»åŠ æ³¨é”€æŒ‰é’®***

***åœ¨è¿™ä¸€ç‚¹ä¸Šé€€å‡ºæŒ‰é’®æ˜¯å¿…ä¸å¯å°‘çš„ï¼Œä½†ç”±äºç°åœ¨æ²¡æœ‰åº”ç”¨ç¨‹åºç•Œé¢ï¼Œæˆ‘å°†åœ¨ä¸»å±å¹•ä¸Šæ”¾ä¸€ä¸ªç®€å•çš„æŒ‰é’®ã€‚æ‰“å¼€ï¼Œ`Home.js`æ–‡ä»¶ï¼Œä»`react-native-elements`å¯¼å…¥`Button`ã€‚***

***æ­¤å¤–ï¼Œå¯¼å…¥`withFirebaseHOC`å¹¶åœ¨æ–‡æœ¬ä¸‹æ–¹æ·»åŠ `Button`ç»„ä»¶ã€‚***

***è¿™æ˜¯è¾“å‡ºã€‚***

***![](img/1760cee4515e28d5d82338a2ec7640fc.png)***

***ç°åœ¨ï¼Œè¿™ä¸ªæŒ‰é’®ä¸èƒ½åšä»»ä½•äº‹æƒ…ã€‚æ‚¨å¿…é¡»æ·»åŠ å¦‚ä¸‹çš„`handleSignout`æ–¹æ³•ã€‚***

***è¿”å›ä¸»å±å¹•å¹¶ç™»å½•åº”ç”¨ç¨‹åºã€‚æ˜¾ç¤ºä¸»å±å¹•åï¼Œç‚¹å‡»æŒ‰é’®`Signout`ã€‚***

***![](img/ec1c6387122e49740b7a2b0990ae9137.png)***

# ***æ£€æŸ¥è‡ªåŠ¨ç™»å½•çš„ç”¨æˆ·èº«ä»½éªŒè¯çŠ¶æ€***

***ç°åœ¨ï¼Œæ¯å½“ç”¨æˆ·æˆåŠŸç™»å½•æˆ–æ³¨å†Œæ—¶ï¼Œå®ƒç¡®å®ä¼šå¯¼è‡´åº”ç”¨ç¨‹åºçš„ä¸»å±å¹•ï¼Œä½†åœ¨åˆ·æ–°æ¨¡æ‹Ÿå™¨æ—¶ï¼Œå¯¼èˆªæ¨¡å¼ä¼šå›åˆ°ç™»å½•å±å¹•ã€‚***

***åœ¨æœ¬èŠ‚ä¸­ï¼Œæ‚¨å°†ä½¿ç”¨ Firebase æ–¹æ³•`onAuthStateChanged()`æ·»åŠ ä¸€ä¸ªå°çš„èº«ä»½éªŒè¯æ£€æŸ¥ï¼Œå¦‚æœå½“å‰ç”¨æˆ·å·²ç»ç™»å½•ï¼Œè¯¥æ–¹æ³•å°†å½“å‰ç”¨æˆ·ä½œä¸ºå‚æ•°ã€‚***

***å½“åº”ç”¨ç¨‹åºåŠ è½½èµ„äº§ï¼Œå³`Initial`å±å¹•ç»„ä»¶æ—¶ï¼Œauth æ£€æŸ¥å°†åœ¨åŒä¸€ç‚¹è¿›è¡Œã€‚å®ƒå·²ç»è¢«æŒ‚åœ¨å¯¼èˆªæ¨¡å¼ä¸­ä½œä¸ºç¬¬ä¸€ä¸ªå±å¹•æˆ–åˆå§‹è·¯çº¿ã€‚***

***ä½¿ç”¨`Initial.js`å†…éƒ¨çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œå¯ä»¥æ£€æŸ¥ç”¨æˆ·æ˜¯å¦ç™»å½•åº”ç”¨çš„è®¤è¯çŠ¶æ€ã€‚***

***ä»å¯¼å…¥æ–‡ä»¶`screens/Initial.js`ä¸­çš„ Firebase HoC å¼€å§‹ã€‚***

***æ¥ä¸‹æ¥ï¼Œåœ¨`componendDidMount`æ–¹æ³•ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ã€‚å¦‚æœç”¨æˆ·å…ˆå‰å·²ç»ç™»å½•ï¼Œå¯¼èˆªæµå°†ç›´æ¥æŠŠç”¨æˆ·å¸¦åˆ°ä¸»å±å¹•ã€‚å¦‚æœæœªç™»å½•ï¼Œå®ƒå°†æ˜¾ç¤ºç™»å½•å±å¹•ã€‚***

***è®©æˆ‘ä»¬çœ‹çœ‹å®ƒçš„å®é™…åº”ç”¨ã€‚å³ä½¿åœ¨åˆ·æ–°åº”ç”¨ç¨‹åºåï¼Œç»è¿‡èº«ä»½éªŒè¯çš„ç”¨æˆ·ä»ä¿æŒç™»å½•çŠ¶æ€ã€‚***

***![](img/b0d78b22b7fd579156259d4d205e86bb.png)***

# ***ç»“è®º***

****ç¥è´ºä½ ï¼ğŸ‰****

***å¦‚æœä½ å·²ç»èµ°äº†è¿™ä¹ˆè¿œï¼Œæˆ‘å¸Œæœ›å–œæ¬¢é˜…è¯»è¿™ç¯‡æ–‡ç« ã€‚è¿™äº›æ˜¯æˆ‘åœ¨ä»»ä½•**Firebase+React Native+Expo**é¡¹ç›®ä¸­å°è¯•éµå¾ªçš„ä¸€äº›ç­–ç•¥ã€‚æˆ‘å¸Œæœ›æœ¬æ•™ç¨‹ä¸­ä½¿ç”¨çš„ä»»ä½•ä»£ç åº“å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©ã€‚***

***è¦æ‰¾åˆ°å®Œæ•´çš„ä»£ç ï¼Œä½ å°†ä¸å¾—ä¸è®¿é—® [**è¿™ä¸ª Github å›è´­å‘å¸ƒ**](https://github.com/amandeepmittal/expo-firebase/releases/tag/0.6.0) **ã€‚*****

> ***å¦‚æœä½ æœ‰å…´è¶£ç”¨ Firebase å’Œ React Native æ„å»ºæ›´å¤šçš„å®æ—¶è®¤è¯ç‰¹æ€§ï¼Œè¯·æŸ¥çœ‹ä¸‹é¢å…³äºç”¨ Firebase å’Œ React Native è®¾ç½®ç”µè¯è®¤è¯çš„å¸–å­ã€‚***

***[](https://www.instamobile.io/mobile-development/firebase-phone-authentication-react-native/) [## å¦‚ä½•åœ¨ React Native ä¸­è®¾ç½® Firebase ç”µè¯è®¤è¯

### ä½¿ç”¨ç”µè¯å·ç å’Œå”¯ä¸€çš„çŸ­ä¿¡éªŒè¯ç ç™»å½•ç§»åŠ¨åº”ç”¨ç¨‹åºæ˜¯æœ€å¸¸è§çš„æ¨¡å¼ä¹‹ä¸€â€¦

www.instamobile.io](https://www.instamobile.io/mobile-development/firebase-phone-authentication-react-native/)*** 

*****æˆ‘ç»å¸¸åœ¨ Nodejsã€Reactjsã€React Native ä¸Šå†™ã€‚*****

***ä½ å¯ä»¥è®¿é—®æˆ‘çš„åšå®¢[**aman his . dev**](https://amanhimself.dev/)**è·å–æ›´å¤š React æœ¬åœ°æ•™ç¨‹ï¼Œæˆ–è€…ä½ å¯ä»¥è®¢é˜… [**æ¯å‘¨ç®€è®¯**](https://tinyletter.com/amanhimself) ç›´æ¥åœ¨ä½ çš„æ”¶ä»¶ç®±ä¸­æ¥æ”¶æ‰€æœ‰æ–°å¸–å­å’Œå†…å®¹çš„æ›´æ–°ğŸ’Œã€‚*****

******åŸè½½äº* [*æˆ‘çš„ä¸ªäººåšå®¢*](https://amanhimself.dev/)*****