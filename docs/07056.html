<html>
<head>
<title>React Native — Flat Lists</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">反应本机-平面列表</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/react-native-flat-lists-f7cb089002b?source=collection_archive---------16-----------------------#2021-01-20">https://levelup.gitconnected.com/react-native-flat-lists-f7cb089002b?source=collection_archive---------16-----------------------#2021-01-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/6634b54032190af6bdebe8be1916e8d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*kobmRM-jvhj53jnN"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">安妮·斯普拉特在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="5df1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">React Native是基于React的移动开发，我们可以用它来进行移动开发。在本文中，我们将看看如何使用它来创建一个带有React Native的应用程序。</p><h1 id="6918" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">平面列表</h1><p id="8991" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以添加<code class="fe mh mi mj mk b">FlatList</code>组件来显示一个简单的列表视图。</p><p id="4946" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">它是跨平台的，支持水平模式。此外，它还支持页眉、页脚和分隔符。我们可以拉出来刷新数据。我们可以一边滚动一边加载数据。它还支持多列。</p><p id="5df3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="a7f3" class="mt lf it mk b gy mu mv l mw mx">import React from 'react';<br/>import { SafeAreaView, FlatList, StyleSheet, View, Text } from 'react-native';<br/>const DATA = Array(100).fill().map((_, i) =&gt; ({ id: i, title: i }))</span><span id="8ba7" class="mt lf it mk b gy my mv l mw mx">const Item = ({ title }) =&gt; (<br/>  &lt;View style={styles.item}&gt;<br/>    &lt;Text style={styles.title}&gt;{title}&lt;/Text&gt;<br/>  &lt;/View&gt;<br/>);</span><span id="8083" class="mt lf it mk b gy my mv l mw mx">const renderItem = ({ item }) =&gt; (<br/>  &lt;Item title={item.title} /&gt;<br/>);</span><span id="3eee" class="mt lf it mk b gy my mv l mw mx">export default function App() {<br/>  return (<br/>    &lt;SafeAreaView style={styles.container}&gt;<br/>      &lt;FlatList<br/>        data={DATA}<br/>        renderItem={renderItem}<br/>        keyExtractor={item =&gt; item.id}<br/>      /&gt;<br/>    &lt;/SafeAreaView&gt;<br/>  );<br/>}</span><span id="71d1" class="mt lf it mk b gy my mv l mw mx">const styles = StyleSheet.create({<br/>  container: {<br/>    flex: 1,<br/>    marginTop: 0<br/>  },<br/>  item: {<br/>    backgroundColor: '#f9c2ff',<br/>    padding: 20,<br/>    marginVertical: 8,<br/>    marginHorizontal: 16,<br/>  },<br/>  title: {<br/>    fontSize: 32,<br/>  },<br/>});</span></pre><p id="8067" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">来创建我们的列表。</p><p id="b770" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们创建了<code class="fe mh mi mj mk b">Item</code>组件，它为列表项呈现了<code class="fe mh mi mj mk b">View</code>和<code class="fe mh mi mj mk b">Text</code>组件。</p><p id="53e9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">renderItem</code>功能是渲染一个<code class="fe mh mi mj mk b">Item</code>的功能。</p><p id="26e9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们添加一个<code class="fe mh mi mj mk b">SafeAreaView</code>和一个<code class="fe mh mi mj mk b">FlatList</code>来呈现一个可滚动的列表。</p><p id="c52a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们在<code class="fe mh mi mj mk b">data</code>属性中传递一个数组。</p><p id="e720" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">而<code class="fe mh mi mj mk b">renderItem</code>道具有我们之前创建的<code class="fe mh mi mj mk b">renderItem</code>函数。</p><p id="9935" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">keyExtractor</code>是一个获取项目唯一键的函数。</p><p id="9aa6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以通过使用<code class="fe mh mi mj mk b">TouchableOpacity</code>组件来选择我们的项目:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="eb15" class="mt lf it mk b gy mu mv l mw mx">import React from 'react';<br/>import { SafeAreaView, FlatList, StyleSheet, Text, TouchableOpacity } from 'react-native';<br/>const DATA = Array(100).fill().map((_, i) =&gt; ({ id: i, title: i }))</span><span id="422f" class="mt lf it mk b gy my mv l mw mx">const Item = ({ item: { title }, onPress, style }) =&gt; (<br/>  &lt;TouchableOpacity onPress={onPress} style={[styles.item, style]}&gt;<br/>    &lt;Text style={styles.title}&gt;{title}&lt;/Text&gt;<br/>  &lt;/TouchableOpacity&gt;<br/>);</span><span id="44d1" class="mt lf it mk b gy my mv l mw mx">export default function App() {<br/>  const [selectedId, setSelectedId] = React.useState(null);<br/>  const renderItem = ({ item }) =&gt; {<br/>    const backgroundColor = item.id === selectedId ? "lightgreen" : "pink";<br/>    return (<br/>      &lt;Item<br/>        item={item}<br/>        onPress={() =&gt; setSelectedId(item.id)}<br/>        style={{ backgroundColor }}<br/>      /&gt;<br/>    );<br/>  };</span><span id="8a2e" class="mt lf it mk b gy my mv l mw mx">return (<br/>    &lt;SafeAreaView style={styles.container}&gt;<br/>      &lt;FlatList<br/>        data={DATA}<br/>        renderItem={renderItem}<br/>        keyExtractor={item =&gt; item.id}<br/>        extraData={selectedId}<br/>      /&gt;<br/>    &lt;/SafeAreaView&gt;<br/>  );<br/>}</span><span id="39e0" class="mt lf it mk b gy my mv l mw mx">const styles = StyleSheet.create({<br/>  container: {<br/>    flex: 1,<br/>    marginTop: 0<br/>  },<br/>  item: {<br/>    backgroundColor: '#f9c2ff',<br/>    padding: 20,<br/>    marginVertical: 8,<br/>    marginHorizontal: 16,<br/>  },<br/>  title: {<br/>    fontSize: 32,<br/>  },<br/>});</span></pre><p id="a284" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">Item</code>组件与<code class="fe mh mi mj mk b">TouchableOpacity</code>组件一起呈现，让我们在它被选中时显示一些不同的东西。</p><p id="2955" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在<code class="fe mh mi mj mk b">App</code>组件中，我们有<code class="fe mh mi mj mk b">renderItem</code>函数，它接受<code class="fe mh mi mj mk b">item</code>并根据哪个按钮被按下来设置背景颜色。</p><p id="b1f3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们用<code class="fe mh mi mj mk b">onPress</code> prop确定哪个按钮被按下，这需要一个函数调用<code class="fe mh mi mj mk b">setSelectedId</code>来设置所选项目的ID。</p><p id="28fd" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后在<code class="fe mh mi mj mk b">style</code>道具中，我们根据<code class="fe mh mi mj mk b">selectedId</code>是否与当前物品的<code class="fe mh mi mj mk b">id</code>相同，将<code class="fe mh mi mj mk b">backgroundColor</code>属性设置为我们想要的颜色。</p><p id="0573" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，当一个项目被选中时，该项目的背景是浅绿色的。</p><p id="165d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">否则，它有一个粉红色的背景。</p><h1 id="9b99" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">结论</h1><p id="3726" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以添加一个<code class="fe mh mi mj mk b">FlatList</code>组件来显示一个可滚动的项目列表。</p></div></div>    
</body>
</html>