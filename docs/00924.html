<html>
<head>
<title>Source-maps could be revealing your private project files</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">源地图可能会泄露你的私人项目文件</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/automatically-generated-source-maps-could-be-revealing-your-private-projects-files-17b2d13d7da4?source=collection_archive---------1-----------------------#2019-09-18">https://levelup.gitconnected.com/automatically-generated-source-maps-could-be-revealing-your-private-projects-files-17b2d13d7da4?source=collection_archive---------1-----------------------#2019-09-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/84fc7d4cfb6406a78083cd117a1acd0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*QFSa1KqcDLuQkj0z"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">鲍里斯·斯莫克罗维奇在<a class="ae jd" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><div class=""/><div class=""><h2 id="6bdc" class="pw-subtitle-paragraph kd jf jg bd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dk translated">您可能会错误地使用自动生成的源代码映射来公开您的前端应用程序源代码。</h2></div><p id="a2b0" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">当您开始创建web应用程序时，通常会接触一些流行的库或框架。例如，您可以使用众所周知的“create-react-app”CLI，它将为您完成所有工作。</p><p id="b888" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">CLI将自动生成捆绑文件以及名为“源映射”的文件。每次对应用程序进行生产构建时，都会在包文件旁边生成“. js.map”文件。那些是源地图。它们是在与您的包文件相同的文件夹中创建的，如果您不够注意，当您将它们发布到您的服务器时，您的代码可能会被公开。这不仅适用于“create-react-app”CLI，任何其他绑定器都可能发生这种情况。</p><p id="4e83" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">当您将缩小的JavaScript文件发布到您的服务器时，您的源映射也可能被错误地发布，这意味着每个人都可以看到您的私有源代码。这包括项目的原始数据。js，。ts，。咖啡，。sass文件。</p><h2 id="13db" class="lr ls jg bd lt lu lv dn lw lx ly dp lz le ma mb mc li md me mf lm mg mh mi mj bi translated">什么是源地图？</h2><p id="bc44" class="pw-post-body-paragraph kv kw jg kx b ky mk kh la lb ml kk ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">简而言之，源映射只是一个简单的JSON文件，其中包含一个对象。该对象有两个重要的键:“sources”和“sourcesContent”。“sources”键包含项目中本地文件的名称数组，而“sourcesContent”键包含这些文件的内容数组。</p><p id="953d" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">为了更好地理解，请参见下面的源映射文件示例。</p><figure class="mp mq mr ms gt is"><div class="bz fp l di"><div class="mt mu l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">源映射文件示例</figcaption></figure><h2 id="b711" class="lr ls jg bd lt lu lv dn lw lx ly dp lz le ma mb mc li md me mf lm mg mh mi mj bi translated">这是什么意思？</h2><p id="6883" class="pw-post-body-paragraph kv kw jg kx b ky mk kh la lb ml kk ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">如果您公开您的源映射文件，任何人都可以阅读您的部分源代码。</p><h2 id="8dad" class="lr ls jg bd lt lu lv dn lw lx ly dp lz le ma mb mc li md me mf lm mg mh mi mj bi translated">会有什么影响？</h2><p id="ffa7" class="pw-post-body-paragraph kv kw jg kx b ky mk kh la lb ml kk ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">对于一些项目来说，这可能是不好的。公司投入资金和精力来制造一个在客户端有很多逻辑的产品。使用源代码地图，任何人都可以复制这个项目，修改它，并将其作为他们“自己”的项目发布在其网站上，并开始赚钱，甚至羞辱你的应用程序的名称。在这种情况下，您应该确保不公开您的源地图。</p><h2 id="8573" class="lr ls jg bd lt lu lv dn lw lx ly dp lz le ma mb mc li md me mf lm mg mh mi mj bi translated">你如何从中受益？</h2><p id="febb" class="pw-post-body-paragraph kv kw jg kx b ky mk kh la lb ml kk ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">一些项目对发布源代码地图是开放的，因为这有助于人们学习新技术，如何构建大型应用程序等。当阅读别人写的代码时，你可以学到很多有用的东西，特别是当你是web技术世界的初学者，你所看到的只是缩小的文件时。这可以让你更仔细地了解一些项目的内幕。</p><h2 id="9f7c" class="lr ls jg bd lt lu lv dn lw lx ly dp lz le ma mb mc li md me mf lm mg mh mi mj bi translated">你怎么知道一个网站有公开的源代码地图？</h2><p id="e66f" class="pw-post-body-paragraph kv kw jg kx b ky mk kh la lb ml kk ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">打开你的Google Chrome DevTools，查看网络日志，浏览下载的JS文件，看看在某个文件的末尾是否有类似这样的一行。</p><pre class="mp mq mr ms gt mv mw mx my aw mz bi"><span id="4fef" class="lr ls jg mw b gy na nb l nc nd">//# sourceMappingURL=main.1ad01fd1.chunk.js.map</span></pre><p id="b25a" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这一行描述了为这个包生成的源映射文件的位置。如果您访问这个<code class="fe ne nf ng mw b">sourceMappingURL</code>，您应该能够看到源文件。</p><p id="e1c5" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果您看不到这一行，仍然有可能生成源映射文件。只要尝试在一个新窗口中打开任何JavaScript包文件，然后在你的地址栏中将“. min.js”替换为“. min.js.map”，如果你足够幸运的话，你将看到源文件。</p><h2 id="b43a" class="lr ls jg bd lt lu lv dn lw lx ly dp lz le ma mb mc li md me mf lm mg mh mi mj bi translated">如何以更易读的方式查看源地图？</h2><p id="2eb2" class="pw-post-body-paragraph kv kw jg kx b ky mk kh la lb ml kk ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">例如，如果你正在使用谷歌Chrome，只需访问一些使用React的网站(如果你使用React开发者工具扩展，你可以看到该网站正在使用React ),如果你运气好，该网站有公开的源代码地图。打开谷歌Chrome DevTools，重新加载你的网站，点击“源”标签，在左侧，你将能够看到这个网站的文件。这些文件可能还包括来自源地图的文件，所以您可以看到项目的。ts，。咖啡，。tsx等。文件在那里。</p><p id="35a7" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">去<a class="ae jd" href="https://reactjs.org/" rel="noopener ugc nofollow" target="_blank">官方React网页</a>或者<a class="ae jd" href="https://angular.io/" rel="noopener ugc nofollow" target="_blank">官方Angular网页</a>试试吧！</p><figure class="mp mq mr ms gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nh"><img src="../Images/f412a0eb703291f4d7a65ac39e9b34b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z1wvH8ilTHsM4q8lgpTZQg.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">Chrome DevTools显示来自源地图的文件。</figcaption></figure><h2 id="19ef" class="lr ls jg bd lt lu lv dn lw lx ly dp lz le ma mb mc li md me mf lm mg mh mi mj bi translated">阻止您的源代码公开</h2><p id="3ac0" class="pw-post-body-paragraph kv kw jg kx b ky mk kh la lb ml kk ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">您不应该在构建过程中删除所有的<code class="fe ne nf ng mw b">.map</code>文件——特别是，如果您分析您的生产日志，源映射可能会有所帮助——这就是它们的目的。只要确保不公开它们就行了。你可以这样做，比如把它们放在另一个(私有)目录中，或者干脆不允许服务static。映射服务器上的文件。</p><h2 id="15a7" class="lr ls jg bd lt lu lv dn lw lx ly dp lz le ma mb mc li md me mf lm mg mh mi mj bi translated">结论</h2><p id="1dff" class="pw-post-body-paragraph kv kw jg kx b ky mk kh la lb ml kk ld le mm lg lh li mn lk ll lm mo lo lp lq ij bi translated">当您将web应用程序投入生产时，请考虑是否要公开您的项目文件。如果你决定公开你的源地图，你可以在这个GitHub知识库<a class="ae jd" href="https://github.com/MichalSzorad/spreading-source-code" rel="noopener ugc nofollow" target="_blank">https://github.com/michalszorad/spreading-source-code</a>上列出你的网站，帮助传播构建网络应用的知识。</p></div><div class="ab cl ni nj hu nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ij ik il im in"><p id="9d8a" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果你不想错过任何新文章，请在我的推特上关注我<a class="ae jd" href="https://twitter.com/michalszorad" rel="noopener ugc nofollow" target="_blank">https://twitter.com/michalszorad</a></p><div class="ip iq gp gr ir np"><a rel="noopener  ugc nofollow" target="_blank" href="/typescript-keeping-type-guards-safe-and-up-to-date-2457d52bd722"><div class="nq ab fo"><div class="nr ab ns cl cj nt"><h2 class="bd jh gy z fp nu fr fs nv fu fw jf bi translated">TypeScript:保持类型保护安全并保持最新</h2><div class="nw l"><h3 class="bd b gy z fp nu fr fs nv fu fw dk translated">普通类型的警卫可以帮助我们。</h3></div><div class="nx l"><p class="bd b dl z fp nu fr fs nv fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="ny l"><div class="nz l oa ob oc ny od ix np"/></div></div></a></div></div><div class="ab cl ni nj hu nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ij ik il im in"><div class="mp mq mr ms gt np"><a href="https://gitconnected.com/learn" rel="noopener  ugc nofollow" target="_blank"><div class="nq ab fo"><div class="nr ab ns cl cj nt"><h2 class="bd jh gy z fp nu fr fs nv fu fw jf bi translated">了解如何编码-查找编码教程| gitconnected</h2><div class="nw l"><h3 class="bd b gy z fp nu fr fs nv fu fw dk translated">从开发者提交和排名的教程中学习任何编程语言、框架或库。教程是…</h3></div><div class="nx l"><p class="bd b dl z fp nu fr fs nv fu fw dk translated">gitconnected.com</p></div></div><div class="ny l"><div class="oe l oa ob oc ny od ix np"/></div></div></a></div></div></div>    
</body>
</html>