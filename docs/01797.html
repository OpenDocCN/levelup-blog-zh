<html>
<head>
<title>Getting Smart with Vue Form Validation — Vuelidate Tutorial</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Vue表单验证变得更加智能— Vuelidate教程</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/getting-smart-with-vue-form-validation-vuelidate-tutorial-ff9ca5b1ab9?source=collection_archive---------20-----------------------#2020-01-29">https://levelup.gitconnected.com/getting-smart-with-vue-form-validation-vuelidate-tutorial-ff9ca5b1ab9?source=collection_archive---------20-----------------------#2020-01-29</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/218fdc201d503a26a4cd6af4d47037e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U9nfUxDPqzc8gsur63TjaQ.png"/></div></div></figure><div class=""/><p id="b6f5" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd jf"> Vue表单验证是任何应用程序必不可少的一部分。你需要确保人们正在提交你的应用程序可以使用的数据！</strong></p><p id="a6ae" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">无论是确保用户有一个强密码，还是检查消息是否太长，输入验证在web应用程序中无处不在。</p><p id="893e" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">对Vue开发者来说幸运的是，Vuelidate库为我们做了大部分艰苦的工作。我们不必编写数百个条件来验证我们的输入。我们变得更聪明地工作，而不是更努力地工作。</p><p id="0714" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在本教程结束时，您应该…</p><ul class=""><li id="4b3c" class="kz la je kd b ke kf ki kj km lb kq lc ku ld ky le lf lg lh bi translated">知道Vuelidate是什么吗</li><li id="d04c" class="kz la je kd b ke li ki lj km lk kq ll ku lm ky le lf lg lh bi translated">安装它</li><li id="06a7" class="kz la je kd b ke li ki lj km lk kq ll ku lm ky le lf lg lh bi translated">构建基本的表单验证</li><li id="5b96" class="kz la je kd b ke li ki lj km lk kq ll ku lm ky le lf lg lh bi translated">了解一些高级的Vuelidate主题</li></ul><p id="73a5" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">Vuelidate对所有Vue开发者来说都是一个很棒的库，所以让我们开始编码吧。</p><blockquote class="ln"><p id="e4b4" class="lo lp je bd lq lr ls lt lu lv lw ky dk translated">我们变得更聪明地工作，而不是更努力地工作。</p></blockquote><h1 id="7511" class="lx ly je bd lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu bi translated">什么是Vuelidate？</h1><p id="3c72" class="pw-post-body-paragraph kb kc je kd b ke mv kg kh ki mw kk kl km mx ko kp kq my ks kt ku mz kw kx ky im bi translated"><a class="ae na" href="http://vuelidate.js.org/" rel="noopener ugc nofollow" target="_blank"> Vuelidate </a>为Vue项目提供基于模型的验证。</p><p id="49b6" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这是将表单验证添加到项目中的一种简单而强大的方法，因为它有许多内置的验证器。一些基础知识包括…</p><ul class=""><li id="2bb0" class="kz la je kd b ke kf ki kj km lb kq lc ku ld ky le lf lg lh bi translated"><code class="fe nb nc nd ne b">required</code> -值不能为空</li><li id="425e" class="kz la je kd b ke li ki lj km lk kq ll ku lm ky le lf lg lh bi translated"><code class="fe nb nc nd ne b">minLength</code> / <code class="fe nb nc nd ne b">maxLength</code> -提供值的最小或最大长度</li><li id="5e07" class="kz la je kd b ke li ki lj km lk kq ll ku lm ky le lf lg lh bi translated"><code class="fe nb nc nd ne b">email</code> -值必须是有效的电子邮件地址格式</li><li id="76de" class="kz la je kd b ke li ki lj km lk kq ll ku lm ky le lf lg lh bi translated"><code class="fe nb nc nd ne b">alpha</code> -值只接受字母</li><li id="aada" class="kz la je kd b ke li ki lj km lk kq ll ku lm ky le lf lg lh bi translated"><code class="fe nb nc nd ne b">numeric</code> -值只接受数字</li></ul><p id="c469" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这只是Vuelidate提供的内置验证器的一个简短列表。要获得完整的列表，请务必访问<a class="ae na" href="https://vuelidate.js.org/#sub-builtin-validators" rel="noopener ugc nofollow" target="_blank">更新文档</a>。</p><h1 id="b560" class="lx ly je bd lz ma mb mc md me mf mg mh mi nf mk ml mm ng mo mp mq nh ms mt mu bi translated">一个基本的Vue表单验证示例</h1><p id="a9f5" class="pw-post-body-paragraph kb kc je kd b ke mv kg kh ki mw kk kl km mx ko kp kq my ks kt ku mz kw kx ky im bi translated">现在我们知道了Vuelidate是什么，并对它能做什么有了一些概念，<strong class="kd jf">让我们来实现它。</strong></p><p id="177b" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">首先，我们必须安装Vuelidate并将其包含在我们的<code class="fe nb nc nd ne b">src/main.js</code>文件中。运行<code class="fe nb nc nd ne b">npm install vuelidate --save</code>将其添加到您的Vue项目中。然后，在我们的main.js文件中，我们需要这两行将Vuelidate放入我们的应用程序。</p><pre class="ni nj nk nl gt nm ne nn no aw np bi"><span id="6aba" class="nq ly je ne b gy nr ns l nt nu">import Vuelidate from 'vuelidate' Vue.use(Vuelidate)</span></pre><p id="ac1d" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">好吧。Vuelidate现在在我们的应用中，但是<em class="nv">我们如何使用它呢？</em></p><p id="26bb" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在本教程中，我构建了一个包含4个字段的用户注册组件。</p><ol class=""><li id="28e1" class="kz la je kd b ke kf ki kj km lb kq lc ku ld ky nw lf lg lh bi translated">电子邮件</li><li id="a8f6" class="kz la je kd b ke li ki lj km lk kq ll ku lm ky nw lf lg lh bi translated">用户名</li><li id="25c6" class="kz la je kd b ke li ki lj km lk kq ll ku lm ky nw lf lg lh bi translated">密码</li><li id="d693" class="kz la je kd b ke li ki lj km lk kq ll ku lm ky nw lf lg lh bi translated">确认口令</li></ol><p id="b399" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这是我们组件的代码。我添加了一些简单的样式来让我们的应用感觉不那么乏味，但是你可以一直使用许多<a class="ae na" href="https://learnvue.co/2020/01/9-vue-input-libraries-to-power-up-your-forms" rel="noopener ugc nofollow" target="_blank"> Vue输入库</a>中的一个。</p><pre class="ni nj nk nl gt nm ne nn no aw np bi"><span id="a697" class="nq ly je ne b gy nr ns l nt nu">&lt;template&gt;<br/>  &lt;div&gt;<br/>    &lt;h2&gt;Create Your Account&lt;/h2&gt;<br/>    &lt;input class="form__input" type='text' placeholder='Email'/&gt;<br/>    &lt;input class="form__input" type='text' placeholder='Username'/&gt;<br/>    &lt;input class="form__input" type='password' placeholder='Password'/&gt;<br/>    &lt;input class="form__input" type='password' placeholder='Confirm Password'/&gt;<br/>    &lt;div class='form__submit' @click='submitForm'&gt;<br/>      Submit<br/>    &lt;/div&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;<br/><br/>&lt;script&gt;<br/>export default {<br/>  data () {<br/>  },<br/>  validations: {<br/>  },<br/>  methods: {<br/>    submitForm () {<br/>      alert('Form has been submitted')<br/>    }<br/>  }<br/>}<br/>&lt;/script&gt;<br/><br/>&lt;style scoped&gt;<br/>.form__input {<br/>  border: none;<br/>  outline: none;<br/>  border-bottom: 1px solid #eee;<br/>  font-size: 1em;<br/>  padding: 5px;<br/>  display: block;<br/>  margin: 10px 0 5px 0;<br/>}<br/><br/>.form__error {<br/>  color: red;<br/>  font-size: 0.75em;<br/>  padding-left: 10px;<br/>}<br/><br/>.form__submit {<br/>  background-color: #0033cc;<br/>  display: inline-block;<br/>  color: white;<br/>  padding: 10px 20px;<br/>  text-align: center;<br/>  cursor: pointer;<br/>  margin-top: 30px;<br/>}<br/>&lt;/style&gt;</span></pre><p id="bd02" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果我们检查我们的组件，它应该看起来像这样。</p><figure class="ni nj nk nl gt iv gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/126f1b42e7e9eee639f01b9373288106.png" data-original-src="https://miro.medium.com/v2/resize:fit:846/format:webp/0*yBFp44xrVP3vvTXM.png"/></div></figure><h1 id="caec" class="lx ly je bd lz ma mb mc md me mf mg mh mi nf mk ml mm ng mo mp mq nh ms mt mu bi translated">向我们的表单添加Vuelidate</h1><p id="32d0" class="pw-post-body-paragraph kb kc je kd b ke mv kg kh ki mw kk kl km mx ko kp kq my ks kt ku mz kw kx ky im bi translated"><strong class="kd jf"> Vuelidate将新的验证属性</strong>添加到我们的options对象中。这个验证对象将具有与我们正在收集的数据相同的属性。它与数据属性结合使用。</p><p id="ef2f" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果我们希望所有的字段都是必需的，首先我们必须从Vuelidate导入<code class="fe nb nc nd ne b">required</code>验证器。然后，我们填充数据和验证对象。</p><pre class="ni nj nk nl gt nm ne nn no aw np bi"><span id="8465" class="nq ly je ne b gy nr ns l nt nu">import { required } from 'vuelidate/lib/validators'<br/><br/>export default {<br/>  data() {<br/>    return {<br/>      email: '',<br/>      username: '',<br/>      password: '',<br/>      confirmPassword: ''<br/>    }<br/>  },<br/>  validations: {<br/>    email: {<br/>      required<br/>    },<br/>    username: {<br/>      required<br/>    },<br/>    password: {<br/>      required<br/>    },<br/>    confirmPassword: {<br/>      required<br/>    }<br/>  }<br/>}</span></pre><p id="5070" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在我们有了一个基本的验证器，让我们的表单使用它。首先，我们必须知道Vuelidate在包含我们所有验证的Vue实例上公开了一个<code class="fe nb nc nd ne b">$v</code>对象——它可以像<code class="fe nb nc nd ne b">this.$v</code>一样被访问。</p><p id="45e6" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果我们打印出<code class="fe nb nc nd ne b">$v</code>对象，我们会看到它看起来像这样</p><figure class="ni nj nk nl gt iv gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/07d58da19403beeedc61d2d44199a130.png" data-original-src="https://miro.medium.com/v2/resize:fit:858/format:webp/0*wKsCMoi1QZScHUnV.png"/></div></figure><p id="31d9" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">然后，如果我们查看这些验证对象中的一个，例如<code class="fe nb nc nd ne b">email</code>。我们将看到一个<code class="fe nb nc nd ne b">$model</code>属性。</p><figure class="ni nj nk nl gt iv gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/975a29be6855f1b14ff5e263443a7b6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:520/format:webp/0*C97u-rY5CM3RpAgt.png"/></div></figure><p id="d31e" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">将我们的验证绑定到我们的数据。这就是我们如何在表单中使用v-model通过将我们的输入绑定到<code class="fe nb nc nd ne b">$v.<em class="nv">propertyName</em>.$model</code>属性。</p><p id="400e" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">下面是将<code class="fe nb nc nd ne b">v-model</code>添加到<code class="fe nb nc nd ne b">email</code>属性的方法。所有其他输入遵循相同的格式。</p><pre class="ni nj nk nl gt nm ne nn no aw np bi"><span id="b73b" class="nq ly je ne b gy nr ns l nt nu">&lt;input <br/>   class="form__input" <br/>   type='text' <br/>   placeholder='Email' <br/>   v-model.trim='$v.email.$model'<br/>/&gt;</span></pre><p id="ef8a" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">注意:我们可以在v模型中使用<code class="fe nb nc nd ne b">.trim</code>修饰符来消除验证中的尾随/前导空格。想想空间是否值得保留。我只是把这个添加到邮件输入中。</p><h1 id="fdd2" class="lx ly je bd lz ma mb mc md me mf mg mh mi nf mk ml mm ng mo mp mq nh ms mt mu bi translated">向我们的用户显示错误</h1><p id="7fb9" class="pw-post-body-paragraph kb kc je kd b ke mv kg kh ki mw kk kl km mx ko kp kq my ks kt ku mz kw kx ky im bi translated"><strong class="kd jf">如果我们再看一下</strong>我们的<code class="fe nb nc nd ne b">$v.email</code>对象，我们会看到我们包含的每个验证器都创建了一个新的布尔值。例如，我们的<code class="fe nb nc nd ne b">required</code>属性在对象内部看起来像这样。</p><figure class="ni nj nk nl gt iv gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/ad55e3c75677e17105364444233733d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:576/format:webp/0*QcYk-uIb07QtuNP4.png"/></div></figure><p id="a5d7" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">该值表示是否满足验证要求。对于required，如果修剪值为空，则为false，否则为true。</p><p id="2cac" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们可以使用这个布尔值和一个<code class="fe nb nc nd ne b">v-if </code>来向用户显示输入错误。</p><p id="a397" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">例如，如果我们想在电子邮件输入为空时显示<em class="nv">“此字段是必填的”</em>，可以这样做。</p><pre class="ni nj nk nl gt nm ne nn no aw np bi"><span id="a19c" class="nq ly je ne b gy nr ns l nt nu">&lt;div class="form__error" v-if='!$v.email.required'&gt; <br/>   *This field is required. <br/>&lt;/div&gt;</span></pre><p id="2db4" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在，只要我们的字段为空(并且不满足Vuelidate要求的验证)，这个div就会可见。</p><figure class="ni nj nk nl gt iv gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/eaf59def5677e52cb432e3a262203ebf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1176/format:webp/0*LHViGsL1FL0QxFN6.png"/></div></figure><h1 id="24c5" class="lx ly je bd lz ma mb mc md me mf mg mh mi nf mk ml mm ng mo mp mq nh ms mt mu bi translated">使用更高级的表单验证</h1><p id="2c49" class="pw-post-body-paragraph kb kc je kd b ke mv kg kh ki mw kk kl km mx ko kp kq my ks kt ku mz kw kx ky im bi translated"><strong class="kd jf"> Vuelidate提供了许多额外的内置</strong>验证器，在这个例子中我们需要其中的一些。让我们仔细检查每个输入，并添加我们需要的验证器。</p><p id="2239" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd jf">用户名</strong></p><p id="731e" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">对于我们的注册组件的实现，我们希望对用户名输入施加以下规则。</p><ul class=""><li id="3f11" class="kz la je kd b ke kf ki kj km lb kq lc ku ld ky le lf lg lh bi translated"><code class="fe nb nc nd ne b">minLength</code> -设置用户名的最小长度</li><li id="9504" class="kz la je kd b ke li ki lj km lk kq ll ku lm ky le lf lg lh bi translated"><code class="fe nb nc nd ne b">maxLength</code> -设置用户名的最大长度</li><li id="cfb9" class="kz la je kd b ke li ki lj km lk kq ll ku lm ky le lf lg lh bi translated"><code class="fe nb nc nd ne b">alphaNum</code> -将我们的用户名限制为字母数字值</li></ul><p id="b29e" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">添加这三个内置的验证器后，我们新的电子邮件验证对象将如下所示。请记住，我们必须像对待required一样<strong class="kd jf">导入</strong>所有这些验证器。</p><pre class="ni nj nk nl gt nm ne nn no aw np bi"><span id="ea5a" class="nq ly je ne b gy nr ns l nt nu">import { required, minLength, maxLength, alphaNum, email, sameAs } from 'vuelidate/lib/validators'</span><span id="9123" class="nq ly je ne b gy oc ns l nt nu">// ...</span><span id="85af" class="nq ly je ne b gy oc ns l nt nu">validations: {<br/>   <!-- -->username: {<br/>      required,<br/>      minLength: minLength(4),<br/>      maxLength: maxLength(12),<br/>      alphaNum<br/>   }<br/>}</span></pre><p id="35b9" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">然后，就像我们之前做的那样，我们可以通过添加更多的div语句向用户提供一些反馈。</p><pre class="ni nj nk nl gt nm ne nn no aw np bi"><span id="bb86" class="nq ly je ne b gy nr ns l nt nu">&lt;div class="form__error" v-if='!$v.username.required'&gt;<br/>      *This field is required.<br/>&lt;/div&gt;<br/>&lt;div class="form__error" v-if='!$v.username.minLength'&gt;<br/>      *Username must be at least 4 characters<br/>&lt;/div&gt;<br/>&lt;div class="form__error" v-if='!$v.username.maxLength'&gt;<br/>      *Username must be 12 characters or less<br/>&lt;/div&gt;<br/>&lt;div class="form__error" v-if='!$v.username.alphaNum'&gt;<br/>      *Username must be alphanumberic with no whitespace<br/>&lt;/div&gt;</span></pre><p id="f663" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">对于内置验证器，我们不能做的一件事是确保用户名中没有空格。稍后，我们将添加一个自定义验证来检查这一点。</p><p id="dd1a" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd jf">电子邮件</strong></p><p id="9439" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">除了<code class="fe nb nc nd ne b">required</code>，这个输入需要的另一个主要验证器是<code class="fe nb nc nd ne b">email</code>，它决定这个值是否是一个有效的电子邮件地址。</p><pre class="ni nj nk nl gt nm ne nn no aw np bi"><span id="444d" class="nq ly je ne b gy nr ns l nt nu">email: {<br/>      required,<br/>      email<br/>}</span></pre><p id="1921" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd jf">密码</strong></p><p id="bdc9" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">对于这个例子，我们将保持它的基本性，并且说唯一的密码要求是它至少有6个字符长，所以我们将再次使用<code class="fe nb nc nd ne b">minLength</code>。</p><pre class="ni nj nk nl gt nm ne nn no aw np bi"><span id="9b93" class="nq ly je ne b gy nr ns l nt nu">password: {<br/>      required,<br/>      minLength: minLength(6)<br/>}</span></pre><p id="7e12" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在生产中，我们可以创建一个自定义验证来检查密码的强度，以确定它是否足够强。</p><p id="485e" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd jf">确认密码</strong></p><p id="4bfe" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">对<code class="fe nb nc nd ne b">confirmPassword</code>字段的唯一真正要求是它匹配第一个密码。所有其他要求(在我们的例子中是长度)都应该在第一次输入密码时考虑到。</p><p id="5151" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们可以使用<code class="fe nb nc nd ne b">sameAs</code>验证器检查两个输入之间的相等性，将密码验证对象(password)的名称作为它的参数。</p><pre class="ni nj nk nl gt nm ne nn no aw np bi"><span id="8a64" class="nq ly je ne b gy nr ns l nt nu">confirmPassword: {<br/>      required,<br/>      sameAs: sameAs('password')<br/>}</span></pre><h1 id="7dc7" class="lx ly je bd lz ma mb mc md me mf mg mh mi nf mk ml mm ng mo mp mq nh ms mt mu bi translated">提交我们的Vue表单</h1><p id="7cf6" class="pw-post-body-paragraph kb kc je kd b ke mv kg kh ki mw kk kl km mx ko kp kq my ks kt ku mz kw kx ky im bi translated"><strong class="kd jf">即使我们已经设置好了所有的</strong>验证器，也没有什么可以阻止人们提交表单。</p><p id="3e14" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">当我们尝试提交时，我们必须实际检查表单上是否有任何错误。</p><p id="2d51" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">幸运的是，使用<code class="fe nb nc nd ne b">$v.$anyError</code>属性非常简单。如果Vuelidator中的任何元素无效，则该布尔值为true，如果一切正常，则为false。</p><p id="d656" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在我们的<code class="fe nb nc nd ne b">submitForm</code>方法中，我们只需要检查表单上是否有错误。如果<code class="fe nb nc nd ne b">this.$v.$anyError</code>是假的，我们都乖乖就范！</p><pre class="ni nj nk nl gt nm ne nn no aw np bi"><span id="bc93" class="nq ly je ne b gy nr ns l nt nu">submitForm () {<br/>      if (!this.$v.$anyError) {<br/>        // actually submit form ...<br/>        alert('Form submitted')<br/>      } else {<br/>        alert('Please fix errors and try again.')<br/>      }<br/>}</span></pre><h1 id="5c59" class="lx ly je bd lz ma mb mc md me mf mg mh mi nf mk ml mm ng mo mp mq nh ms mt mu bi translated">先进的虚拟技术</h1><p id="3f7b" class="pw-post-body-paragraph kb kc je kd b ke mv kg kh ki mw kk kl km mx ko kp kq my ks kt ku mz kw kx ky im bi translated">完成了一个基本的Vuelidate示例后，让我们来看看一些更复杂的技术，我们可以用它们来处理更复杂的表单。</p><p id="e6fe" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在本教程中，我们将介绍Vuelidate的两个高级特性。</p><ul class=""><li id="ab94" class="kz la je kd b ke kf ki kj km lb kq lc ku ld ky le lf lg lh bi translated">制作自定义验证器</li><li id="b82a" class="kz la je kd b ke li ki lj km lk kq ll ku lm ky le lf lg lh bi translated">执行异步验证</li></ul><p id="eb8f" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">同样值得注意的是，表单验证可以提取到跨组件重用的和<a class="ae na" href="https://learnvue.co/2019/12/building-reusable-components-in-vuejs-tabs/" rel="noopener ugc nofollow" target="_blank">混合</a><a class="ae na" href="https://learnvue.co/2019/12/how-to-manage-mixins-in-vuejs/" rel="noopener ugc nofollow" target="_blank">中。</a></p><h1 id="f559" class="lx ly je bd lz ma mb mc md me mf mg mh mi nf mk ml mm ng mo mp mq nh ms mt mu bi translated">制作自定义验证器</h1><p id="8b52" class="pw-post-body-paragraph kb kc je kd b ke mv kg kh ki mw kk kl km mx ko kp kq my ks kt ku mz kw kx ky im bi translated"><strong class="kd jf">尽管有几十个内置的</strong>验证器，但是有时候这些并不能满足你的项目需求。</p><p id="be49" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">即使在我们简单的示例表单中，我认为拥有一个确认器来确保在<code class="fe nb nc nd ne b">username</code>输入中没有空白也是非常有用的。</p><p id="2d1d" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">要制作一个定制的验证器，我们所要做的就是编写一个普通的Javascript方法，返回一个布尔值。</p><p id="7f9e" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">例如，对于我们的无空白验证器，该方法如下所示。</p><pre class="ni nj nk nl gt nm ne nn no aw np bi"><span id="9ac6" class="nq ly je ne b gy nr ns l nt nu">const noWhitespace = (value) =&gt; value.indexOf(' ') === -1</span></pre><p id="bae4" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">然后，我们可以在用户名验证器中包含这个函数，就像内置的一样。</p><pre class="ni nj nk nl gt nm ne nn no aw np bi"><span id="cfd4" class="nq ly je ne b gy nr ns l nt nu">username: {<br/>      required,<br/>      minLength: minLength(4),<br/>      maxLength: maxLength(12),<br/>      alphaNum,<br/>      noWhitespace<br/>}</span></pre><p id="eef5" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">之后，它就像我们见过的所有其他验证器一样工作。</p><h1 id="c329" class="lx ly je bd lz ma mb mc md me mf mg mh mi nf mk ml mm ng mo mp mq nh ms mt mu bi translated">执行异步验证</h1><p id="7082" class="pw-post-body-paragraph kb kc je kd b ke mv kg kh ki mw kk kl km mx ko kp kq my ks kt ku mz kw kx ky im bi translated"><strong class="kd jf">对于大多数高级应用</strong>，你最终会需要异步验证——主要是当我们使用数据库时。这里有两个例子说明异步是必要的。</p><ul class=""><li id="d811" class="kz la je kd b ke kf ki kj km lb kq lc ku ld ky le lf lg lh bi translated">检查用户名是否可用</li><li id="6937" class="kz la je kd b ke li ki lj km lk kq ll ku lm ky le lf lg lh bi translated">检查电子邮件是否已经链接到帐户</li></ul><p id="4448" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">像使用定制验证器一样，我们必须编写一个Javascript方法。然而，这一次，我们要还一个承诺。</p><p id="626c" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">对于本例，我们将检查用户名是否可用。因为我们没有数据库，所以我们只使用<code class="fe nb nc nd ne b">setTimeout</code>和一些硬编码的值。</p><pre class="ni nj nk nl gt nm ne nn no aw np bi"><span id="820b" class="nq ly je ne b gy nr ns l nt nu">const isUsernameAvailable = (value) =&gt; {<br/>  <br/>  if (value === '') {<br/>    return true<br/>  }<br/>  const taken = ['username', 'matt', 'matthew']<br/>  return new Promise((resolve, reject) =&gt; {<br/>    setTimeout(() =&gt; {<br/>      resolve(!taken.includes(value))<br/>    }, 500)<br/>  })<br/>}</span></pre><p id="3235" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在，如果我们检查我们的数据库，我们将看到我们的硬编码的“used”用户名集将导致一个错误。</p><figure class="ni nj nk nl gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi od"><img src="../Images/723086597b02e5222efdbcf1218b2db3.png" data-original-src="https://miro.medium.com/v2/resize:fit:724/0*rGDCUrX5QAuh6ZbA.gif"/></div></div></figure><h1 id="3816" class="lx ly je bd lz ma mb mc md me mf mg mh mi nf mk ml mm ng mo mp mq nh ms mt mu bi translated">额外提示—设计您的表单</h1><p id="f4e6" class="pw-post-body-paragraph kb kc je kd b ke mv kg kh ki mw kk kl km mx ko kp kq my ks kt ku mz kw kx ky im bi translated">让你的表单更加用户友好的最好方法之一就是提供漂亮的视觉反馈。有几种直观的方法可以做到这一点。我们就在这里讨论几个。</p><h1 id="e599" class="lx ly je bd lz ma mb mc md me mf mg mh mi nf mk ml mm ng mo mp mq nh ms mt mu bi translated">1.向输入中添加一个错误类</h1><p id="f2c5" class="pw-post-body-paragraph kb kc je kd b ke mv kg kh ki mw kk kl km mx ko kp kq my ks kt ku mz kw kx ky im bi translated">就像我们之前看到的，Vuelidate中的每个验证属性都有一个<code class="fe nb nc nd ne b">$anyError </code>属性。</p><p id="5848" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果我们使用Vue的类绑定语法，我们可以根据<code class="fe nb nc nd ne b">$anyError</code>属性的值轻松地添加/删除一个错误类。</p><p id="9c0f" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">例如，如果我们想在一个值无效时添加一个<code class="fe nb nc nd ne b">form__input-error</code>类，我们可以这样做。</p><pre class="ni nj nk nl gt nm ne nn no aw np bi"><span id="e1fe" class="nq ly je ne b gy nr ns l nt nu">&lt;input <br/>      class="form__input" <br/>      :class='{"form__input-error": $v.email.$error}'<br/>      type='text' <br/>      placeholder='Email' <br/>      v-model.trim='$v.email.$model' <br/>/&gt;</span></pre><p id="12bc" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">然后，我们可以随心所欲地设计这个类<code class="fe nb nc nd ne b">form__input-error</code>的样式。</p><h1 id="1e5b" class="lx ly je bd lz ma mb mc md me mf mg mh mi nf mk ml mm ng mo mp mq nh ms mt mu bi translated">2.当一个值无效时增加一点震动</h1><p id="8668" class="pw-post-body-paragraph kb kc je kd b ke mv kg kh ki mw kk kl km mx ko kp kq my ks kt ku mz kw kx ky im bi translated">这比简单地添加一个类要复杂一点。首先，这是我们要做的</p><figure class="ni nj nk nl gt iv gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/3e69afb6444e11920eb25570be227bf5.png" data-original-src="https://miro.medium.com/v2/resize:fit:684/0*yCfFLmyohpbDEnFn.gif"/></div></figure><p id="7b8c" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">最好在<code class="fe nb nc nd ne b">blur</code>事件上执行这个视觉提示——这意味着输入失去了焦点。这样，用户的最后一个动作(编辑输入)就是导致错误的原因，这一点非常清楚。</p><p id="d055" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">为此，我们需要两样东西:</p><ol class=""><li id="04c0" class="kz la je kd b ke kf ki kj km lb kq lc ku ld ky nw lf lg lh bi translated">CSS动画</li><li id="f1b1" class="kz la je kd b ke li ki lj km lk kq ll ku lm ky nw lf lg lh bi translated">运行这个动画的CSS类</li></ol><p id="7a08" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">让我们将以下内容添加到我们的CSS代码中。</p><pre class="ni nj nk nl gt nm ne nn no aw np bi"><span id="578b" class="nq ly je ne b gy nr ns l nt nu">.form__input-shake {<br/>  animation: shake 0.2s;<br/>  animation-iteration-count: 3;<br/>}<br/><br/>@keyframes shake {<br/>  0% { transform: translateX(0px)  }<br/>  25% { transform: translateX(2px) }<br/>  50% { transform: translateX(0px)  }<br/>  75% { transform: translateX(-2px) }<br/>  100% { transform: translateX(0px)  }<br/>}</span></pre><p id="a424" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">接下来，让我们创建一个<code class="fe nb nc nd ne b">checkIsValid</code>函数来检查验证器是否有任何错误，如果有，它会将动画类添加到我们的元素中，等待动画完成(0.2s * 3 = 600ms)，然后移除该类，以便以后可以再次添加它。</p><pre class="ni nj nk nl gt nm ne nn no aw np bi"><span id="a809" class="nq ly je ne b gy nr ns l nt nu">checkIsValid (val, event) {<br/>      if (val.$anyError) {<br/>        event.target.classList.add('form__input-shake')<br/>        setTimeout(() =&gt; {<br/>          event.target.classList.remove('form__input-shake')<br/>        }, 600)<br/>      }<br/>}</span></pre><p id="00ae" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">最后，当我们的输入模糊时，我们必须调用这个函数。使用Vue的事件处理程序，有点像这样。</p><pre class="ni nj nk nl gt nm ne nn no aw np bi"><span id="343e" class="nq ly je ne b gy nr ns l nt nu">&lt;input <br/>      class="form__input" <br/>      :class='{"form__input-error": $v.email.$error}'<br/>      type='text' <br/>      placeholder='Email' <br/>      v-model.trim='$v.email.$model' <br/>      @blur='checkIsValid($v.email, $event)'<br/>/&gt;</span></pre><h1 id="2b1d" class="lx ly je bd lz ma mb mc md me mf mg mh mi nf mk ml mm ng mo mp mq nh ms mt mu bi translated">Vue表单验证的结论</h1><p id="55c9" class="pw-post-body-paragraph kb kc je kd b ke mv kg kh ki mw kk kl km mx ko kp kq my ks kt ku mz kw kx ky im bi translated">这就对了。</p><p id="f3cb" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">Vuelidate是一个非常强大的工具，可以让你不用自己编写复杂的反应系统。我个人在无数个人项目中使用过。</p><p id="fb38" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在，您应该知道如何开始使用Vuelidate了。我们涵盖了:</p><ul class=""><li id="3347" class="kz la je kd b ke kf ki kj km lb kq lc ku ld ky le lf lg lh bi translated">安装Vuelidate</li><li id="69bf" class="kz la je kd b ke li ki lj km lk kq ll ku lm ky le lf lg lh bi translated">构建示例表单</li><li id="d10f" class="kz la je kd b ke li ki lj km lk kq ll ku lm ky le lf lg lh bi translated">添加Vuelidate的一些高级功能</li><li id="b9d1" class="kz la je kd b ke li ki lj km lk kq ll ku lm ky le lf lg lh bi translated">设计表单样式以创造更好的用户体验</li></ul><p id="be8c" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">让我知道你是如何在你的项目中使用Vuelidate的。我很想听听你的创造性解决方案🙂</p></div><div class="ab cl of og hx oh" role="separator"><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok"/></div><div class="im in io ip iq"><p id="ed50" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><a class="ae na" href="https://learnvue.co/vue-3-essentials-cheatsheet/" rel="noopener ugc nofollow" target="_blank">如果你有兴趣了解更多关于Vue 3的知识，下载我的免费的Vue 3备忘单，里面有基本的知识，比如组合API、Vue 3模板语法和事件处理。</a></p></div><div class="ab cl of og hx oh" role="separator"><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok"/></div><div class="im in io ip iq"><p id="9497" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><em class="nv">原载于2020年1月29日https://learnvue.co</em><a class="ae na" href="https://learnvue.co/2020/01/getting-smart-with-vue-form-validation-vuelidate-tutorial/" rel="noopener ugc nofollow" target="_blank"><em class="nv"/></a><em class="nv">。</em></p></div></div>    
</body>
</html>