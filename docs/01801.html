<html>
<head>
<title>Vue.js with Rails 6 and Performing CRUD Operations</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Vue.jsä½¿ç”¨Rails 6å¹¶æ‰§è¡ŒCRUDæ“ä½œ</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://levelup.gitconnected.com/vue-js-with-rails-6-and-performing-crud-operations-b043ef3691f2?source=collection_archive---------0-----------------------#2020-01-30">https://levelup.gitconnected.com/vue-js-with-rails-6-and-performing-crud-operations-b043ef3691f2?source=collection_archive---------0-----------------------#2020-01-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/22970312aca7af8ddf34ec7ccf043cb5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BOZ9YejDdClB0FvjZdh1RQ.png"/></div></div></figure><p id="2703" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†å­¦ä¹ å¦‚ä½•ç”¨Rails 6è®¾ç½®Vuejså¹¶æ‰§è¡ŒCRUDæ“ä½œã€‚</p><p id="d6e5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">åœ¨æˆ‘ä»¬å¼€å§‹ä¹‹å‰ï¼Œæˆ‘å‡è®¾æ‚¨å·²ç»åœ¨æ‚¨çš„æœºå™¨ä¸Šå®‰è£…äº†<a class="ae kw" href="https://www.ruby-lang.org/en/" rel="noopener ugc nofollow" target="_blank"> Ruby </a>(ç‰ˆæœ¬é«˜äº2 . 6 . 0)<a class="ae kw" href="https://rubyonrails.org/" rel="noopener ugc nofollow" target="_blank">Rails 6</a>ã€<a class="ae kw" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank"> NodeJs </a>å’Œ<a class="ae kw" href="https://yarnpkg.com/lang/en/" rel="noopener ugc nofollow" target="_blank"> yarn </a>ã€‚</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="d923" class="lg lh iq lc b gy li lj l lk ll">rails new rails_vuejs --webpack=vue</span></pre><p id="1e2f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">è¿™å°†å®‰è£…ä¸€ä¸ªåŒ…å«Vue.jsçš„æ–°é¡¹ç›®ã€‚åŒ…æ˜¯Railå¯¹æˆ‘ä»¬æ·»åŠ åˆ°é¡¹ç›®ä¸­çš„ä»»ä½•JavaScriptçš„æœ¯è¯­ã€‚</p><p id="c03b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æ‰“å¼€é¡¹ç›®å¹¶æ£€æŸ¥Railsä¸ºæˆ‘ä»¬ç”Ÿæˆçš„JavascriptåŒ…ç›®å½•ï¼Œå³<code class="fe lm ln lo lc b">app/javascript/packs/hello_vue.js</code>ã€‚ä»<code class="fe lm ln lo lc b">hello_vue.js to main.js </code>é‡å‘½åè¯¥æ–‡ä»¶ï¼Œå¹¶ä½¿ç”¨javascript packæ ‡ç­¾å°†è¯¥æ–‡ä»¶åŒ…å«åœ¨ä¸»å¸ƒå±€æ–‡ä»¶ä¸­ï¼Œå³<code class="fe lm ln lo lc b">app/views/layouts/application.html.erb</code>ï¼Œæ–¹æ³•æ˜¯å°†ç‰‡æ®µ1.1ä¸­çš„å†…å®¹å¤åˆ¶ç²˜è´´åˆ°<code class="fe lm ln lo lc b">application.html.erb</code></p><figure class="kx ky kz la gt jr"><div class="bz fp l di"><div class="lp lq l"/></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk translated">ä»£ç ç‰‡æ®µ1.1: application.html.erb</figcaption></figure><p id="e413" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ç°åœ¨ï¼Œæˆ‘ä»¬é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤åˆ›å»ºä¸€ä¸ªå¸¦æœ‰ç´¢å¼•æ“ä½œçš„æ¬¢è¿æ§åˆ¶å™¨</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="b680" class="lg lh iq lc b gy li lj l lk ll">rails generate controller Welcome index</span></pre><p id="2def" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">å®ƒå°†åˆ›å»ºå‡ ä¸ªæ–‡ä»¶ã€‚æ‰“å¼€<code class="fe lm ln lo lc b">app/views/welcome/index.html.erb </code>åˆ é™¤æ–‡ä»¶ä¸­æ‰€æœ‰ç°æœ‰çš„ä»£ç å¹¶ä¿æŒå®ƒä¸ºç©ºã€‚è¿™å°†æ˜¯æˆ‘ä»¬çš„ä¸»é¡µï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬æ˜¾ç¤ºæˆ‘ä»¬çš„ç»„ä»¶ï¼Œåœ¨routes.rbæ–‡ä»¶ä¸­å°†ç´¢å¼•æ“ä½œURLæ›´æ”¹ä¸ºrootï¼Œå³<code class="fe lm ln lo lc b">config/routes.rb</code></p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="9516" class="lg lh iq lc b gy li lj l lk ll">root to: 'welcome#index'</span></pre><p id="5033" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ç°åœ¨ï¼Œæˆ‘ä»¬é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤åˆ›å»ºä¸€ä¸ªç”¨æˆ·æ§åˆ¶å™¨</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="9011" class="lg lh iq lc b gy li lj l lk ll">rails generate controller Users</span></pre><p id="1af5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">å°†route.rbæ–‡ä»¶ä¸­çš„è·¯çº¿æ·»åŠ ä¸º<code class="fe lm ln lo lc b">resources :users</code>,å¯¹äºç´¢å¼•æ“ä½œï¼Œä»£æ›¿ä½¿ç”¨ç”¨æˆ·è§†å›¾é¡µé¢ï¼Œå³<code class="fe lm ln lo lc b">app/views/users/index.html.erb </code>æ–‡ä»¶ï¼Œæˆ‘ä»¬éœ€è¦æ˜¾ç¤ºVueç»„ä»¶ï¼Œå³app.vueæ–‡ä»¶ã€‚å› æ­¤</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="928c" class="lg lh iq lc b gy li lj l lk ll">resources :users<br/>get 'app', to: 'users#index'</span></pre><p id="e0ef" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ç°åœ¨å¯åŠ¨ä¸¤å°æœåŠ¡å™¨<br/>åç«¯æœåŠ¡å™¨<code class="fe lm ln lo lc b">rails server</code>å’Œ<br/>å‰ç«¯æœåŠ¡å™¨<code class="fe lm ln lo lc b">bin/webpack-dev-server</code>å’Œ<br/>å¹¶è®¿é—®<code class="fe lm ln lo lc b"><a class="ae kw" href="http://localhost:3000" rel="noopener ugc nofollow" target="_blank">http://localhost:3000</a></code>ã€‚æ‚¨å°†çœ‹åˆ°å¦‚ä¸‹å›¾1.1æ‰€ç¤ºçš„å±å¹•</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lv"><img src="../Images/126849303747bcf12e94aa53fb3ed6c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Jqjwf67QP9dI_Xx8JmDRGw.png"/></div></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk translated">å›¾1.1:ä½ å¥½ï¼ŒVue</figcaption></figure><p id="f003" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">åœ¨main.jsæ–‡ä»¶ä¸­æ·»åŠ VuetifyåŠå…¶é…ç½®ã€‚æƒ³äº†è§£æ›´å¤šå…³äºVuetifyçš„ä¿¡æ¯ï¼Œè¯·è®¿é—®https://vuetifyjs.com/en/</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="a571" class="lg lh iq lc b gy li lj l lk ll">npm add vuetify</span></pre><p id="5cc9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦å‘Šè¯‰Vueä½¿ç”¨Vuetify(åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œåœ¨main.jsæ–‡ä»¶ä¸­),è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬å°†hello_vue.jsé‡å‘½åä¸ºmain.jsï¼Œå°†ä¸‹é¢ä»£ç ç‰‡æ®µä¸­çš„å†…å®¹å¤åˆ¶ç²˜è´´åˆ°<code class="fe lm ln lo lc b">main.js</code>ä¸­</p><figure class="kx ky kz la gt jr"><div class="bz fp l di"><div class="lp lq l"/></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk translated">ä»£ç ç‰‡æ®µ1.2: main.js</figcaption></figure><p id="11e0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ä¸€äº›ç»„ä»¶æ­£åœ¨ä½¿ç”¨å›¾æ ‡ï¼Œæˆ‘ä»¬åœ¨linkæ ‡ç­¾çš„ç¬¬8è¡Œå’Œç¬¬10è¡Œåˆ†åˆ«æ·»åŠ äº†snippet 1.1 application.html.erbä¸­çš„Google Fontså’ŒFont Awesomeé“¾æ¥ã€‚</p><p id="0f80" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æˆ‘ä»¬éœ€è¦æ˜¾ç¤ºä¸€ä¸ªè¡¨æ ¼ï¼Œä»¥é€‚å½“çš„æ ¼å¼æ˜¾ç¤ºæ•°æ®ã€‚æˆ‘ä»¬æ­£åœ¨ä½¿ç”¨Vuetifyæ•°æ®è¡¨ç»„ä»¶ã€‚è¦äº†è§£æ›´å¤šä¿¡æ¯ï¼Œè¯·è®¿é—®ä»¥ä¸‹é“¾æ¥:</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="0ae3" class="lg lh iq lc b gy li lj l lk ll"><a class="ae kw" href="https://vuetifyjs.com/en/components/data-tables#crud-actions" rel="noopener ugc nofollow" target="_blank">https://vuetifyjs.com/en/components/data-tables#crud-actions</a></span></pre><p id="7e0f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">åœ¨é¡¹ç›®çš„packsç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸ºcomponentsçš„ç›®å½•ï¼Œå³<code class="fe lm ln lo lc b">app/javascript/packs </code>ï¼Œåœ¨componentsç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª<code class="fe lm ln lo lc b">user.vue</code>ï¼Œå¤åˆ¶ç²˜è´´vuetifyæ•°æ®è¡¨ç»„ä»¶ä»£ç ã€‚</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div class="gh gi lw"><img src="../Images/a485c67d3a886ea85c1e421f63a4d6b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:568/format:webp/1*NGR-sqvmy6ury26go-7alQ.png"/></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk translated">å›¾1.2:æ·»åŠ user.vueå</figcaption></figure><p id="ee9d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ç°åœ¨ï¼Œå¯¼å…¥ä¸€ä¸ªç”¨æˆ·ç»„ä»¶ï¼Œå¹¶å°†ä»£ç ç‰‡æ®µ1.3ä¸­çš„å†…å®¹å¤åˆ¶ç²˜è´´åˆ°<code class="fe lm ln lo lc b">app.vue</code></p><figure class="kx ky kz la gt jr"><div class="bz fp l di"><div class="lp lq l"/></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk translated">ä»£ç ç‰‡æ®µ1.3: app.vue</figcaption></figure><p id="bcde" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">è¿è¡Œä¸¤ä¸ªæœåŠ¡å™¨å¹¶è®¿é—®<a class="ae kw" href="http://localhost:3000" rel="noopener ugc nofollow" target="_blank"> http://localhost:3000 </a>ï¼Œæ‚¨å°†çœ‹åˆ°å¦‚ä¸‹å›¾1.3æ‰€ç¤ºçš„å±å¹•</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lx"><img src="../Images/034ead821c68ab912f659311eaee4419.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4FHH-B6qUgK82FDe7WdDRA.png"/></div></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk translated">å›¾1.3:è™šæ‹ŸåŒ–æ•°æ®è¡¨</figcaption></figure><blockquote class="ly lz ma"><p id="dfdb" class="jy jz mb ka b kb kc kd ke kf kg kh ki mc kk kl km md ko kp kq me ks kt ku kv ij bi translated"><em class="iq">æ³¨:å¦‚æœæ¨¡å¼æœªæ‰“å¼€ï¼Œåˆ™æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æ˜¾ç¤ºè­¦å‘Šï¼Œå¦‚ä¸‹å›¾1.4æ‰€ç¤º</em></p></blockquote><figure class="kx ky kz la gt jr gh gi paragraph-image"><div class="gh gi mf"><img src="../Images/07c7bd7661312ee62bb5da9e3600096a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1364/format:webp/1*81UnJ2l3Slmf6xryBio9mw.png"/></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk translated">å›¾1.4:éªŒè¯é”™è¯¯</figcaption></figure><p id="522c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ç„¶åæ£€æŸ¥æ•´ä¸ªappéƒ½æ˜¯ç”¨<v-app> </v-app>åŒ…è£…çš„ã€‚å› ä¸ºåœ¨Vuetifyä¸­ä½ éœ€è¦åœ¨<v-app> </v-app>ä¸­åŒ…è£…ä½ çš„åº”ç”¨ã€‚v-appç»„ä»¶è®¾ç½®æ­¤æ•°æ®åº”ç”¨ç¨‹åºå±æ€§ã€‚</p><p id="afb9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">å®‰è£…Axios Httpå®¢æˆ·ç«¯<br/> </strong>ç°åœ¨è¯¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£…<code class="fe lm ln lo lc b"><a class="ae kw" href="https://github.com/axios/axios" rel="noopener ugc nofollow" target="_blank">Axios</a> </code>äº†:</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="d698" class="lg lh iq lc b gy li lj l lk ll">yarn add axios</span></pre><p id="b6bb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ç°åœ¨ï¼Œåœ¨ç”¨æˆ·ç»„ä»¶ä¸­å¯¼å…¥Axiosï¼Œå¹¶å°†ä»£ç ç‰‡æ®µ1.4ä¸­çš„ä»£ç æ›¿æ¢ä¸º<code class="fe lm ln lo lc b">user.vue</code></p><figure class="kx ky kz la gt jr"><div class="bz fp l di"><div class="lp lq l"/></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk translated">ä»£ç ç‰‡æ®µ1.4: user.vue</figcaption></figure><p id="6b60" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ç”±äºæˆ‘ä»¬é¡¹ç›®ä¸­çš„å½“å‰æ•°æ®æ˜¯é™æ€çš„ï¼Œæ˜¯æ—¶å€™ä»ä¸€äº›åç«¯å¼€å§‹äº†ã€‚æ‰€ä»¥ï¼Œè®©æˆ‘ä»¬å¼€å§‹å§ã€‚</p><p id="8f69" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤æ·»åŠ ç”¨æˆ·æ¨¡å‹</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="618f" class="lg lh iq lc b gy li lj l lk ll">rails g model User first_name:string last_name:string email:string    phone:integer address:string</span></pre><p id="2f3f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ä¹‹åè¿è¡Œ<code class="fe lm ln lo lc b">rails db:migrate </code> <br/>ä¸‹ä¸€æ­¥ï¼Œä»åç«¯æ·»åŠ ä¸€äº›æ•°æ®ï¼Œå³<code class="fe lm ln lo lc b">rails console.</code></p><p id="af05" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">åç«¯ç´¢å¼•API </strong></p><p id="c7da" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ç°åœ¨æˆ‘ä»¬å¼€å§‹ç¼–å†™APIã€‚æˆ‘ä»¬æœ‰ä¸åŒçš„ç»ˆç‚¹ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹/usersç«¯ç‚¹</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="6c1c" class="lg lh iq lc b gy li lj l lk ll">#app/controllers/users_controller.rb</span><span id="ca0e" class="lg lh iq lc b gy mg lj l lk ll">def index<br/>  @users = User.all<br/>  render json: @users <br/>end</span></pre><p id="d3cb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> Vueå’ŒAxiosè·å–ç¤ºä¾‹<br/> </strong>æ·»åŠ ä¸‹é¢çš„ä»£ç ï¼Œå› ä¸ºæˆ‘ä»¬ç°åœ¨ä»APIè·å–æ•°æ®ã€‚</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="c3fe" class="lg lh iq lc b gy li lj l lk ll">#<!-- -->app/javascript/packs/components/user.vue</span><span id="b78b" class="lg lh iq lc b gy mg lj l lk ll">initialize() {<br/>return axios<br/>  .get("http://localhost:3000/users")<br/>  .then(response =&gt; {<br/>     console.log(response.data);<br/>     this.desserts = response.data;<br/>   })<br/>  .catch(e =&gt; {<br/>     console.log(e);<br/>  });<br/>}</span></pre><p id="aa5c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Vuetify Datatableç»„ä»¶æä¾›äº†ä¸€ä¸ªè§‚å¯Ÿå±æ€§ã€‚è¿™ä¸ªåˆ›å»ºçš„å‡½æ•°æ˜¯Vuejsçš„ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œæ¯å½“ç»„ä»¶è¢«åˆ›å»ºæ—¶ï¼Œå®ƒå°±ä¼šè¢«è°ƒç”¨ã€‚è¿™å°†è°ƒç”¨initialize()æ–¹æ³•ï¼Œæˆ‘ä»¬ä»å“åº”ä¸­è·å–æ•°æ®ï¼Œç„¶åä»å‡½æ•°ä¸­è¿”å›ä¸€ä¸ªæ‰¿è¯ºï¼Œè¯¥æ‰¿è¯ºå°†è§£æä¸ºä¸€ä¸ªç”¨æˆ·æ•°ç»„æˆ–ä¸€ä¸ªé”™è¯¯ã€‚</p><p id="0a68" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œæ²¡æœ‰ä»»ä½•é”™è¯¯ï¼Œé‚£ä¹ˆæ¥è‡ªAPIè¯·æ±‚çš„è¡¨ä¸­çš„æ›´æ–°æ•°æ®å¦‚ä¸‹å›¾1.5æ‰€ç¤º</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mh"><img src="../Images/a66041ddc9ec9d805153e9b6d0eab35d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lEroy-rZNprn9ocaVQ7ltA.png"/></div></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk translated">å›¾1.5:æ¥è‡ªapiçš„ç´¢å¼•æ•°æ®</figcaption></figure><p id="aad6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æˆ‘ä»¬è¿˜éœ€è¦ä¸€ç§æ–¹æ³•ï¼Œé€šè¿‡ä½¿ç”¨idæˆ–ä¸»é”®æ¥æ˜¾ç¤ºå•ä¸ªç”¨æˆ·ã€‚è®©æˆ‘ä»¬æ·»åŠ é‚£ä¸ªæ–¹æ³•</p><p id="2864" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">åç«¯å±•ç¤ºAPI </strong></p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="3329" class="lg lh iq lc b gy li lj l lk ll">#app/controllers/users_controller.rb</span><span id="494e" class="lg lh iq lc b gy mg lj l lk ll">def show<br/>  @user = User.find(params[:id])<br/>  render json: { data: @user, status: :ok, message: 'Success' }<br/>end</span></pre><p id="e3bc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> Vueå’ŒAxiosè·å¾—ç¤ºä¾‹</strong></p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="6f16" class="lg lh iq lc b gy li lj l lk ll">#<!-- -->app/javascript/packs/components/user.vue</span><span id="f375" class="lg lh iq lc b gy mg lj l lk ll">getUser(item) {<br/>  axios.get(`https://localhost:3000/${item.id}`)<br/>   .then(response =&gt; {<br/>     this.dessert = response.data;<br/>    })<br/>   .catch(error =&gt; {<br/>    console.log(error);<br/>    })<br/>}</span></pre><p id="9c8a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">åŒæ ·ï¼Œè¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªæ‰¿è¯ºï¼Œè¯¥æ‰¿è¯ºå°†è§£æåˆ°å•ä¸ªç”¨æˆ·æˆ–é”™è¯¯ã€‚</p><p id="300b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">åç«¯æ›´æ–°API </strong></p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="46d3" class="lg lh iq lc b gy li lj l lk ll">#app/controllers/users_controller.rb</span><span id="6820" class="lg lh iq lc b gy mg lj l lk ll">def update<br/>  @user = User.find(params[:id])<br/>  if @user.update(user_params)<br/>    render json: { status: :ok, message: 'Success' }<br/>  else<br/>    render json: { json: @user.errors, status: :unprocessable_entity }<br/>  end<br/>end</span></pre><p id="567d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> Vueå’ŒAxiosæ‘†æ”¾ç¤ºä¾‹</strong></p><p id="fbf5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">è®©æˆ‘ä»¬æ¥çœ‹çœ‹åˆ›å»ºä¸€ä¸ªå¯ç”¨äºæ›´æ–°æ•°æ®çš„HTTP PUTæ–¹æ³•çš„ä»£ç ã€‚</p><p id="7992" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">åœ¨æ­¤ä¹‹å‰ï¼Œåœ¨ç”¨æˆ·ç»„ä»¶ä¸­æ·»åŠ ä»¥ä¸‹æ–¹æ³•ï¼Œä½¿æˆ‘ä»¬çš„æ¨¡å‹æ‰“å¼€</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="52c5" class="lg lh iq lc b gy li lj l lk ll">#<!-- -->app/javascript/packs/components/user.vue</span><span id="a9e6" class="lg lh iq lc b gy mg lj l lk ll">editItem(item) {<br/>  this.editedIndex = item.id;<br/>  this.editedItem = Object.assign({}, item);<br/>  this.dialog = true;<br/>}</span></pre><p id="a912" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Vueç»„ä»¶çš„data()æ–¹æ³•ä¸­æœ‰ä¸€ä¸ªå˜é‡editedIndexï¼Œå®ƒçš„é¢„å®šä¹‰å€¼ä¸º-1ã€‚å½“æˆ‘ä»¬å•å‡»ç¼–è¾‘å›¾æ ‡æ—¶ï¼Œæˆ‘ä»¬æ­£åœ¨å°†ä¸€ä¸ªitemå¯¹è±¡ä¼ é€’ç»™editItem(item)æ–¹æ³•ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨itemå¯¹è±¡idæ£€æŸ¥editedIndexå€¼ï¼Œä½¿å…¶å§‹ç»ˆå¤§äº-1ï¼Œæˆ‘ä»¬å°†itemå¯¹è±¡å€¼èµ‹ç»™editedItemï¼Œç”¨äºåœ¨æ¨¡å¼ä¸­æ˜¾ç¤ºè¯¥æ•°æ®ï¼Œå¹¶ä½¿å¯¹è¯æ¡†ä¸ºtrueã€‚</p><p id="85cb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ç°åœ¨å•å‡»savingï¼Œæˆ‘ä»¬é€šè¿‡å°†editedItemå€¼ä½œä¸ºå¯¹è±¡ä¼ é€’æ¥è°ƒç”¨saveæ–¹æ³•ã€‚å³<code class="fe lm ln lo lc b">save(editedItem).</code>åœ¨ç”¨æˆ·ç»„ä»¶ä¸­æ·»åŠ ä»¥ä¸‹æ–¹æ³•:</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="2200" class="lg lh iq lc b gy li lj l lk ll">#<!-- -->app/javascript/packs/components/user.vue</span><span id="7315" class="lg lh iq lc b gy mg lj l lk ll">save(item) {<br/>  if (this.editedIndex &gt; -1) {<br/>    axios<br/>      .put(`http://localhost:3000/users/${item.id}`, {<br/>        id: this.editedItem.id,<br/>        first_name: this.editedItem.first_name,<br/>        last_name: this.editedItem.last_name,<br/>        email: this.editedItem.email,<br/>        phone: this.editedItem.phone,<br/>        address: this.editedItem.address<br/>      })<br/>      .then(response =&gt; {<br/>       console.log(response);<br/>       this.initialize();<br/>      })<br/>      .catch(error =&gt; {<br/>       console.log(error);<br/>    });<br/>  } else {}<br/>  this.close();<br/>}</span></pre><p id="a1af" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">åœ¨save()æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ifæ¡ä»¶æ£€æŸ¥editedIndexå€¼ã€‚å¦‚æœå€¼å¤§äº-1ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä½¿ç”¨Axios.put()æ–¹æ³•å¯¹APIæœåŠ¡å™¨è¿›è¡ŒPUTè°ƒç”¨ã€‚</p><p id="e452" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ä¸è¦å¿˜è®°åœ¨ç§æœ‰æ–¹æ³•ä¸­æ·»åŠ å¼ºå‚æ•°</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="f8ed" class="lg lh iq lc b gy li lj l lk ll">#app/controllers/users_controller.rb</span><span id="7f69" class="lg lh iq lc b gy mg lj l lk ll">private<br/>def user_params<br/>  params.require(:user).permit(:id, :first_name, :last_name, :email,       :phone,:address)<br/>end</span></pre><blockquote class="ly lz ma"><p id="a114" class="jy jz mb ka b kb kc kd ke kf kg kh ki mc kk kl km md ko kp kq me ks kt ku kv ij bi translated">æ³¨æ„:æ›´æ–°æ•°æ®æ—¶ï¼Œæ‚¨å¯èƒ½ä¼šæ”¶åˆ°æ­¤é”™è¯¯æ— æ³•éªŒè¯CSRFä»¤ç‰Œçš„çœŸå®æ€§ï¼Œæ•°æ®å°†ä¸ä¼šæ›´æ–°ã€‚åªéœ€åœ¨ApplicationControllerä¸­æ·»åŠ ä¸‹é¢ä¸€è¡Œï¼Œå³<code class="fe lm ln lo lc b">app/controllers/application_controlle.rb</code>å³å¯è§£å†³é—®é¢˜ã€‚</p><p id="412d" class="jy jz mb ka b kb kc kd ke kf kg kh ki mc kk kl km md ko kp kq me ks kt ku kv ij bi translated">skip_before_action:éªŒè¯çœŸå®æ€§_ä»¤ç‰Œ</p></blockquote><p id="222e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">åç«¯åˆ›å»ºAPI </strong></p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="a6b0" class="lg lh iq lc b gy li lj l lk ll">#app/controllers/user_controller.rb</span><span id="1e3b" class="lg lh iq lc b gy mg lj l lk ll">def create<br/>  @user = User.new(user_params)<br/>  if @user.save<br/>    render json: { status: :ok, message: 'Success' }<br/>  else<br/>    render json: { json: @user.errors, status: :unprocessable_entity }<br/>  end<br/>end</span></pre><p id="8e88" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> Vueå’ŒAxioså‘å¸ƒç¤ºä¾‹</strong></p><p id="3b3a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ç°åœ¨è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•é€šè¿‡ä½¿ç”¨Axioså‘é€HTTP POSTè°ƒç”¨å°†æ•°æ®å‘é€åˆ°RESTful APIæœåŠ¡å™¨ã€‚<br/>è¿™é‡Œæˆ‘ä»¬åœ¨æ›´æ–°å’Œåˆ›å»ºè®°å½•æ—¶ä½¿ç”¨ç›¸åŒçš„æ–¹æ³•save()ï¼Œè¿™æ¬¡åœ¨save()æ–¹æ³•ä¸­ï¼Œå¦‚æœå˜ä¸ºå‡ï¼Œåˆ™<strong class="ka ir">æ¡ä»¶</strong> <strong class="ka ir">è¿›å…¥<strong class="ka ir">å¦åˆ™</strong>éƒ¨åˆ†ã€‚åœ¨save(item)æ–¹æ³•çš„elseéƒ¨åˆ†çš„ç”¨æˆ·ç»„ä»¶ä¸­æ·»åŠ ä»¥ä¸‹æ–¹æ³•</strong></p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="48b7" class="lg lh iq lc b gy li lj l lk ll">#<!-- -->app/javascript/packs/components/user.vue</span><span id="2245" class="lg lh iq lc b gy mg lj l lk ll">else {<br/> axios<br/>  .post(`http://localhost:3000/users/`, {<br/>     user: this.editedItem<br/>   })<br/>   .then(response =&gt; {<br/>     console.log(response);<br/>     console.log("Created!");<br/>     this.initialize();<br/>   })<br/>   .catch(error =&gt; {<br/>     console.log(error);<br/> });<em class="mb"><br/></em>}</span></pre><p id="e932" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">save(item)æ–¹æ³•è·å–ä¸€ä¸ªç”¨æˆ·å¯¹è±¡ï¼Œå¹¶ä½¿ç”¨Axios.post()æ–¹æ³•é€šè¿‡POSTè¯·æ±‚å‘é€å®ƒã€‚è¯¥å‡½æ•°è¿”å›ä¸€ä¸ªå¯ä»¥è§£æä¸ºæˆåŠŸæˆ–é”™è¯¯å“åº”çš„æ‰¿è¯ºã€‚</p><p id="eefc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">åç«¯åˆ é™¤API </strong></p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="0ae7" class="lg lh iq lc b gy li lj l lk ll">#app/controllers/users_controller.rb</span><span id="19eb" class="lg lh iq lc b gy mg lj l lk ll">def destroy<br/>  @user = User.find(params[:id])<br/>  if @user.destroy<br/>    render json: { json: 'User was successfully deleted.'}<br/>  else<br/>    render json: { json: @user.errors, status: :unprocessable_entity }<br/>  end<br/>end</span></pre><p id="9fbc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> Vueå’ŒAxiosåˆ é™¤ç¤ºä¾‹<br/> </strong>æˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•æ·»åŠ ä¸€ä¸ªåˆ é™¤ç”¨æˆ·çš„æ–¹æ³•ã€‚åœ¨ç”¨æˆ·ç»„ä»¶ä¸­æ·»åŠ ä»¥ä¸‹æ–¹æ³•</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="73a6" class="lg lh iq lc b gy li lj l lk ll">#<!-- -->app/javascript/packs/components/user.vue</span><span id="a60e" class="lg lh iq lc b gy mg lj l lk ll">deleteItem(item) {<br/>  const index = this.desserts.indexOf(item);<br/>  confirm("Are you sure you want to delete this item?"); <em class="mb"><br/>  </em>axios<br/>    .delete(`http://localhost:3000/users/${item.id}`)<br/>    .then(response =&gt; {<br/>      console.log(response);<br/>      console.log(response.data.json);<br/>      alert(response.data.json);<br/>      this.initialize();<br/>    })<br/>    .catch(error =&gt; {<br/>      console.log(error);<br/>    });<br/>    this.desserts.splice(index, 1);<br/>}</span></pre><p id="62fc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">delete()ä½¿ç”¨Axios.delete()æ–¹æ³•å‘APIæœåŠ¡å™¨å‘é€åˆ é™¤è¯·æ±‚ã€‚</p><p id="740a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">ç»“è®º<br/> </strong>åœ¨è¿™ä¸ªå…³äºVueå’ŒAxiosçš„æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å·²ç»çœ‹åˆ°äº†å¦‚ä½•ä½¿ç”¨Axios Httpå®¢æˆ·ç«¯å’ŒVue.jsä»¥åŠRails 6ä½œä¸ºREST APIæœåŠ¡å™¨æ¥å®ç°CRUD(åˆ›å»ºã€è¯»å–ã€æ›´æ–°å’Œåˆ é™¤)åŠŸèƒ½ã€‚</p><p id="04f7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æ‰€æœ‰çš„æºä»£ç éƒ½å¯ä»¥åœ¨<a class="ae kw" href="https://github.com/akshch/rails_vuejs" rel="noopener ugc nofollow" target="_blank">https://github.com/akshch/rails_vuejs</a>è·å¾—</p><p id="7a40" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mb">å¦‚æœä½ é¢ä¸´ä»»ä½•é—®é¢˜ï¼Œè¯·å‘è¡¨è¯„è®ºğŸ“ ğŸ‘‡æåˆ°è¿™ä¸ªé—®é¢˜ã€‚</em></p><p id="fab5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mb">å‡»ä¸­</em> <strong class="ka ir"> <em class="mb">ğŸ‘</em> </strong> <em class="mb">å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« æˆ–è€…å®ƒåœ¨æŸäº›æ–¹é¢å¸®åŠ©äº†ä½ ã€‚æŒå£°æ¿€åŠ±æˆ‘å†™æ›´å¤šè¿™æ ·çš„æ–‡ç« /æ•™ç¨‹ã€‚</em></p></div></div>    
</body>
</html>