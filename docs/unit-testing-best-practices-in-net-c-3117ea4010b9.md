# ä¸­çš„å•å…ƒæµ‹è¯•æœ€ä½³å®è·µã€‚NET C#

> åŸæ–‡ï¼š<https://levelup.gitconnected.com/unit-testing-best-practices-in-net-c-3117ea4010b9>

## æœ€ä½³å®è·µ

## ä¸­å•å…ƒæµ‹è¯•çš„æç¤ºã€æŠ€å·§å’Œæœ€ä½³å®è·µã€‚NET C#ä½¿ç”¨ NUnit å’Œ Moq

![](img/8baa488f7100302bc32612bc95a23abb.png)

ç”± [Unsplash](https://unsplash.com/?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) ä¸Š[æˆ´çº¢å¸½](https://unsplash.com/@girlwithredhat?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)çš„å¥³å­©æ‹æ‘„ï¼Œ [Ahmed Tarek](https://medium.com/@eng_ahmed.tarek) è°ƒæ•´

# èŒƒå›´

åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†é‡ç‚¹ä»‹ç»ä½¿ç”¨ [**NUnit**](https://nunit.org/) å’Œ [**Moq**](https://www.nuget.org/packages/Moq/) åº“æ¥è¦†ç›–æˆ‘ä»¬çš„**åº“æ—¶éœ€è¦éµå¾ªçš„ä¸€äº›é‡è¦æç¤ºå’ŒæŠ€å·§ã€‚å¸¦æœ‰å•å…ƒæµ‹è¯•çš„åº”ç”¨ç¨‹åºã€‚**

æ‚¨ä¸åº”è¯¥å°†æœ¬æ–‡ä½œä¸ºå•å…ƒæµ‹è¯•çš„æƒå¨æŒ‡å—ï¼Œå› ä¸ºè¿™ä¸æ˜¯æœ¬æ–‡çš„ç›®æ ‡æˆ–èŒƒå›´ã€‚ç„¶è€Œï¼Œåœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œä½ ä¼šå‘ç°ä¸€äº›é‡è¦çš„**æç¤º**ã€**æŠ€å·§**å’Œ**æœ€ä½³å®è·µ**æ¥å¸®åŠ©ä½ ç”¨ä½ çš„**è¾¾åˆ°æœ€ä½³æ•ˆæœã€‚NET C#** åº”ç”¨å•å…ƒæµ‹è¯•å’Œè¦†ç›–ã€‚

![](img/dae42316c04548aad197e34b378e3bf1.png)[](https://medium.com/subscribe/@eng_ahmed.tarek) [## ğŸ”¥è®¢é˜…è‰¾å“ˆè¿ˆå¾·çš„æ—¶äº‹é€šè®¯ğŸ”¥

### è®¢é˜…è‰¾å“ˆè¿ˆå¾·çš„æ—¶äº‹é€šè®¯ğŸ“°ç›´æ¥è·å¾—æœ€ä½³å®è·µã€æ•™ç¨‹ã€æç¤ºã€æŠ€å·§å’Œè®¸å¤šå…¶ä»–å¾ˆé…·çš„ä¸œè¥¿â€¦

medium.com](https://medium.com/subscribe/@eng_ahmed.tarek) ![](img/dae42316c04548aad197e34b378e3bf1.png)![](img/a96685b0cf9542013ca6471ad6db590b.png)

**ä½¿ç”¨çš„æ¡†æ¶**ã€‚ç”±[é˜¿å°”æ–¹æ–¯Â·è«æ‹‰è±æ–¯](https://unsplash.com/@alfonsmc10?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)åœ¨ [Unsplash](https://unsplash.com/?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) ä¸Šæ‹æ‘„ï¼Œç”±[è‰¾å“ˆè¿ˆå¾·Â·å¡”é›·å…‹](https://medium.com/@eng_ahmed.tarek)è°ƒæ•´

# ä½¿ç”¨çš„æ¡†æ¶

## å•å…ƒæµ‹è¯•æ¡†æ¶

![](img/f220d998f0614ade947e9d6ab5b1a844.png)

**åŠªå°¼ç‰¹**ã€‚ç”± [Ahmed Tarek](https://medium.com/@eng_ahmed.tarek) è°ƒæ•´çš„å›¾åƒ

æˆ‘ä»¬å°†ä½¿ç”¨ [**NUnit**](https://nunit.org/) ä½œä¸ºå•å…ƒæµ‹è¯•æ¡†æ¶ã€‚

ä½ å¯ä»¥åœ¨ [**è¿™ä¸ªé“¾æ¥**](https://docs.nunit.org/#user-documentation) æ‰¾åˆ°æ‰€æœ‰çš„ NUnit å®˜æ–¹æ–‡æ¡£ã€‚

è¿˜æœ‰ï¼Œä½ å¯ä»¥åœ¨è¿™ä¸ª [**æ–‡æ¡£é¡µ**](https://docs.nunit.org/articles/nunit/writing-tests/attributes.html) å…·ä½“æ‰¾åˆ° NUnit æä¾›çš„æ‰€æœ‰å±æ€§çš„æ–‡æ¡£ã€‚

## æ¨¡æ‹Ÿæ¡†æ¶

![](img/1a0789226d211abc0f21f146c79a140c.png)

**èµ·è®¢é‡**ã€‚ç”± [Ahmed Tarek](https://medium.com/@eng_ahmed.tarek) è°ƒæ•´çš„å›¾åƒ

æˆ‘ä»¬å°†ä½¿ç”¨ [**Moq**](https://www.nuget.org/packages/Moq/) ä½œä¸ºå˜²è®½æ¡†æ¶ã€‚Moq æ˜¯. NET æœ€æµè¡Œå’Œå‹å¥½çš„å˜²è®½æ¡†æ¶ã€‚

å¦‚æœä½ æƒ³å¯¹å¦‚ä½•å¼€å§‹ä½¿ç”¨ Moq æœ‰æ‰€å¸®åŠ©ï¼Œä½ å¯ä»¥åœ¨ [**è¿™ä¸ªé“¾æ¥**](https://github.com/Moq/moq4/wiki/Quickstart) ä¸Šæ‰¾åˆ°å¿«é€Ÿå…¥é—¨æŒ‡å—ã€‚

ä½ å¯ä»¥åœ¨ [**è¿™ä¸ªé“¾æ¥**](https://github.com/moq/moq4) æ‰¾åˆ°æ‰€æœ‰çš„ Moq å®˜æ–¹æ–‡æ¡£ã€‚

![](img/dae42316c04548aad197e34b378e3bf1.png)![](img/5645dcb49db18c02c165e823f05710c1.png)

æç¤ºå’Œæš—ç¤ºã€‚ç…§ç‰‡ç”±[å°¼å…‹Â·è´¹å› æ–¯](https://unsplash.com/@jannerboy62?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)åœ¨ [Unsplash](https://unsplash.com/?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) ä¸Šæ‹æ‘„ï¼Œç”±[è‰¾å“ˆè¿ˆå¾·Â·å¡”é›·å…‹](https://medium.com/@eng_ahmed.tarek)è°ƒæ•´

# æŠ€å·§å’Œæç¤º

åœ¨è¿™ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†è®¨è®ºä¸€äº›åœ¨ç¼–å†™å•å…ƒæµ‹è¯•æ—¶æœ‰ç”¨çš„æŠ€å·§å’Œæç¤ºã€‚

## è®¾ç½®å’Œæ‹†é™¤

å½“æˆ‘ä»¬ç¼–å†™å•å…ƒæµ‹è¯•æ—¶ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šåœ¨å•å…ƒæµ‹è¯•å‰ååšä¸€äº›å‡†å¤‡å’Œæ¸…ç†ä»£ç ã€‚

NUnit ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€äº›ç”¨äºè¿™äº›å‡†å¤‡å’Œæ¸…ç†ä»»åŠ¡çš„å±æ€§ã€‚

[**OneTimeSetup**](https://docs.nunit.org/articles/nunit/writing-tests/attributes/onetimesetup.html) :ç”¨äºè®¾ç½®ç¬¬ä¸€æ¬¡æµ‹è¯•å‰åªæ‰§è¡Œä¸€æ¬¡çš„ä»£ç ã€‚

[**è®¾ç½®**](https://docs.nunit.org/articles/nunit/writing-tests/attributes/setup.html) :ç”¨äºè®¾ç½®æ¯æ¬¡æµ‹è¯•å‰è¦æ‰§è¡Œçš„ä»£ç ã€‚

[](https://docs.nunit.org/articles/nunit/writing-tests/attributes/teardown.html)**:ç”¨äºè®¾ç½®æ¯æ¬¡æµ‹è¯•åè¦æ‰§è¡Œçš„ä»£ç ã€‚**

**[**OneTimeTearDown**](https://docs.nunit.org/articles/nunit/writing-tests/attributes/onetimeteardown.html) :ç”¨äºè®¾ç½®ä¸Šæ¬¡æµ‹è¯•ååªæ‰§è¡Œä¸€æ¬¡çš„ä»£ç ã€‚**

**å¦‚æœæˆ‘ä»¬æœ‰ä¸¤ä¸ªæµ‹è¯•ï¼Œæ‰§è¡Œé¡ºåºå¦‚ä¸‹:**

1.  **æµ‹è¯•#1 å‰çš„ä¸€æ¬¡æ€§è®¾ç½®**
2.  **æµ‹è¯•#1 å‰çš„è®¾ç½®**
3.  **æµ‹è¯•#1 åæ‹†å¸**
4.  **æµ‹è¯•#2 å‰çš„è®¾ç½®**
5.  **æµ‹è¯•#2 åæ‹†å¸**
6.  **æµ‹è¯•#2 åä¸€åˆ†é’Ÿä¸‹é™**

**![](img/dae42316c04548aad197e34b378e3bf1.png)**

## **æµ‹è¯•æ¡ˆä¾‹**

**å½“æˆ‘ä»¬ç¼–å†™å•å…ƒæµ‹è¯•æ—¶ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦ä»¥è¾“å…¥å’Œè¾“å‡ºå¯¹çš„å½¢å¼è¦†ç›–ä¸æ­¢ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹ã€‚**

**å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ NUnit æä¾›çš„ [**TestCase**](https://docs.nunit.org/articles/nunit/writing-tests/attributes/testcase.html) å±æ€§ï¼Œè€Œä¸æ˜¯ä¸ºæ¯ä¸ªæµ‹è¯•ç”¨ä¾‹ç¼–å†™å¤šä¸ªå•ç‹¬çš„æµ‹è¯•ã€‚**

**å¯ä»¥ä»¥å¤šç§æ ¼å¼ä½¿ç”¨ [**æµ‹è¯•ç”¨ä¾‹**](https://docs.nunit.org/articles/nunit/writing-tests/attributes/testcase.html) å±æ€§ã€‚**

**ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥è¿™æ ·ä½¿ç”¨å®ƒ:**

**æˆ–è€…ä½ å¯ä»¥è¿™æ ·ä½¿ç”¨å®ƒ:**

**ç”šè‡³åœ¨æ›´å¤šæ–¹é¢ã€‚ä½ å¯ä»¥éšæ—¶æŸ¥é˜…å®˜æ–¹æ–‡ä»¶ã€‚**

**![](img/dae42316c04548aad197e34b378e3bf1.png)**

## **æ¥è‡ªä¸€ä¸ªæºçš„æµ‹è¯•ç”¨ä¾‹**

**æœ‰æ—¶æˆ‘ä»¬éœ€è¦åœ¨å¤šä¸ªæµ‹è¯•ä¹‹é—´å…±äº«ç›¸åŒçš„æµ‹è¯•ç”¨ä¾‹ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ä½¿ç”¨ [**TestCase**](https://docs.nunit.org/articles/nunit/writing-tests/attributes/testcase.html) å±æ€§æ˜¯ä¸å¤Ÿçš„ã€‚**

**å› æ­¤ï¼ŒNUnit ä¸ºæˆ‘ä»¬æä¾›äº†[**test case source**](https://docs.nunit.org/articles/nunit/writing-tests/attributes/testcasesource.html)å±æ€§ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å°†æˆ‘ä»¬çš„æ¡ˆä¾‹è®¾ç½®åˆ°ä¸€ä¸ªå…±äº«æ¨¡å—ä¸­ï¼Œç„¶åå¼€å§‹åœ¨ä¸åŒçš„æµ‹è¯•ä¸­ä½¿ç”¨å®ƒã€‚**

**è¿™æ˜¯æˆ‘ä»¬å¯ä»¥ä½¿ç”¨[**test case source**](https://docs.nunit.org/articles/nunit/writing-tests/attributes/testcasesource.html)å±æ€§çš„æ–¹æ³•ä¹‹ä¸€:**

**å¦‚æœä½ æƒ³æ¢ç´¢å…¶ä»–çš„æ–¹æ³•ï¼Œä½ å¯ä»¥éšæ—¶æŸ¥é˜…å®˜æ–¹æ–‡ä»¶ã€‚**

**![](img/dae42316c04548aad197e34b378e3bf1.png)**

## **å¤šé‡å€¼**

**æœ‰æ—¶æˆ‘ä»¬éœ€è¦ä½¿ç”¨å¤šä¸ªå€¼ä½œä¸ºæµ‹è¯•çš„è¾“å…¥ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåªå¯¹æ¯ä¸ªå€¼é‡å¤æµ‹è¯•æ˜¯ä¸å¥½çš„ã€‚**

**ä½ å¯èƒ½ä¼šæƒ³åˆ°ä½¿ç”¨ [**æµ‹è¯•ç”¨ä¾‹**](https://docs.nunit.org/articles/nunit/writing-tests/attributes/testcase.html) å±æ€§ï¼Œè¿™æ ·å°±å¯ä»¥äº†ã€‚ç„¶è€Œï¼Œè¿™å°†æ˜¯ä¸€ç§çŸ«æ‰è¿‡æ­£ã€‚**

**æ­¤å¤–ï¼Œå¦‚æœæ‚¨æœ‰å¤šä¸ªè¾“å…¥ï¼Œå¹¶ä¸”æ¯ä¸ªè¾“å…¥éƒ½å¯èƒ½æ˜¯é€‰é¡¹åˆ—è¡¨ä¸­çš„ä¸€ä¸ªï¼Œè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿæ‚¨å¯èƒ½éœ€è¦ä¸ºæ¯ä¸ªç»„åˆæ·»åŠ ä¸€ä¸ª [**æµ‹è¯•ç”¨ä¾‹**](https://docs.nunit.org/articles/nunit/writing-tests/attributes/testcase.html) å±æ€§ã€‚è¿™å°†æ˜¯ä¸€ä¸ªå½»åº•çš„æ··ä¹±ã€‚**

**NUnit æ²¡æœ‰åšæ‰€æœ‰è¿™äº›ï¼Œè€Œæ˜¯ä¸ºæˆ‘ä»¬æä¾›äº† [**å€¼**](https://docs.nunit.org/articles/nunit/writing-tests/attributes/values.html) å±æ€§ã€‚**

**ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬å¦‚ä¸‹ä½¿ç”¨å®ƒ:**

**è¿™æ„å‘³ç€`MyTest`æµ‹è¯•å°†æ‰§è¡Œ 6 æ¬¡ï¼Œå¦‚ä¸‹æ‰€ç¤º:**

```
MyTest(1, "A")
MyTest(1, "B")
MyTest(2, "A")
MyTest(2, "B")
MyTest(3, "A")
MyTest(3, "B")
```

**çœ‹ï¼Œä½¿ç”¨ [**å€¼**](https://docs.nunit.org/articles/nunit/writing-tests/attributes/values.html) å±æ€§å¯ä»¥çœå»æˆ‘ä»¬æ˜¾å¼ç¼–å†™æ‰€æœ‰è¿™äº›æ¡ˆä¾‹çš„éº»çƒ¦ã€‚**

**![](img/dae42316c04548aad197e34b378e3bf1.png)**

## **ä¸€ç³»åˆ—**

**å¦‚æœæˆ‘ä»¬éœ€è¦åšåŒæ ·çš„äº‹æƒ…ï¼Œä½†æ˜¯æ²¡æœ‰æä¾›å®Œæ•´çš„å€¼åˆ—è¡¨ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿæˆ‘ä»¬åªæƒ³æä¾›ç¬¬ä¸€ä¸ªå€¼ã€æœ€åä¸€ä¸ªå€¼å’Œè¦ç§»åŠ¨çš„æ­¥éª¤ã€‚**

**å¯¹äºè¿™ç§æƒ…å†µï¼ŒNUnit ä¸ºæˆ‘ä»¬æä¾›äº† [**èŒƒå›´**](https://docs.nunit.org/articles/nunit/writing-tests/attributes/range.html) å±æ€§ã€‚**

**ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬å¦‚ä¸‹ä½¿ç”¨å®ƒ:**

**è¿™æ„å‘³ç€`MyTest`æµ‹è¯•å°†æ‰§è¡Œ 4 æ¬¡ï¼Œå¦‚ä¸‹æ‰€ç¤º:**

```
MyTest(0.2)
MyTest(0.4)
MyTest(0.6)
MyTest(0.8)
```

**çœ‹ï¼Œä½¿ç”¨ [**èŒƒå›´**](https://docs.nunit.org/articles/nunit/writing-tests/attributes/range.html) å±æ€§å¯ä»¥çœå»æˆ‘ä»¬æ˜¾å¼ç¼–å†™æ‰€æœ‰è¿™äº›æ¡ˆä¾‹çš„éº»çƒ¦ã€‚**

**è¿™é‡Œå€¼å¾—ä¸€æçš„æ˜¯ï¼Œ [**å€¼**](https://docs.nunit.org/articles/nunit/writing-tests/attributes/values.html) å’Œ [**èŒƒå›´**](https://docs.nunit.org/articles/nunit/writing-tests/attributes/range.html) å±æ€§å¯ä»¥ç»„åˆå¦‚ä¸‹:**

**è¿™æ„å‘³ç€`MyTest`æµ‹è¯•å°†è¢«æ‰§è¡Œ 9 æ¬¡ï¼Œå¦‚ä¸‹æ‰€ç¤º:**

```
MyTest(1, 0.2)
MyTest(1, 0.4)
MyTest(1, 0.6)
MyTest(2, 0.2)
MyTest(2, 0.4)
MyTest(2, 0.6)
MyTest(3, 0.2)
MyTest(3, 0.4)
MyTest(3, 0.6)
```

**ä¸é”™å§ã€‚**

**![](img/dae42316c04548aad197e34b378e3bf1.png)**

## **é‡å¤çš„**

**æœ‰æ—¶æˆ‘ä»¬å‘ç°è‡ªå·±éœ€è¦ä»¥è¿ç»­çš„æ–¹å¼å¤šæ¬¡é‡å¤è¿è¡Œå•å…ƒæµ‹è¯•ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦è¿™æ ·åšæ¥æµ‹è¯•æ€§èƒ½å½±å“æˆ–å¯¹ä¸€äº›ä»£ç è¿›è¡Œå‹åŠ›æµ‹è¯•ã€‚**

**æˆ‘è‡ªå·±ï¼Œåœ¨ä¸æ­¢ä¸€ä¸ªåœºåˆï¼Œæˆ‘éœ€è¦è¿™æ ·åšï¼Œå› ä¸ºæˆ‘ä»¬æœ‰ä¸€ä¸ªå•å…ƒæµ‹è¯•ï¼Œå®ƒâ€œæœ‰æ—¶â€ä¼šåœ¨æ„å»ºæœåŠ¡å™¨ä¸Šå¤±è´¥ã€‚æˆ‘æ€€ç–‘è¿™æ˜¯ç”±ä¸€äº›å‘ç”Ÿçš„æ¯”èµ›æˆ–ä¸€äº›èµ„æºæ²¡æœ‰å®Œå…¨æ§åˆ¶é€ æˆçš„ã€‚**

**å› æ­¤ï¼Œåœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä½¿ç”¨äº† NUnit ä¸ºæˆ‘ä»¬æä¾›çš„ [**é‡å¤**](https://docs.nunit.org/articles/nunit/writing-tests/attributes/repeat.html) å±æ€§ã€‚**

**ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬å¦‚ä¸‹ä½¿ç”¨å®ƒ:**

**è¿™å°†å¯¼è‡´`MyTest`æµ‹è¯•è¿ç»­è¿è¡Œ 25 æ¬¡ã€‚**

**ä½¿ç”¨ [**é‡å¤**](https://docs.nunit.org/articles/nunit/writing-tests/attributes/repeat.html) å±æ€§ä½¿å¾—æ£€æµ‹ä¸ç¨³å®šçš„æµ‹è¯•å’Œæ‰¾åˆ°å¤±è´¥çš„æ ¹æœ¬åŸå› å˜å¾—å¤ªå®¹æ˜“äº†ã€‚**

**![](img/dae42316c04548aad197e34b378e3bf1.png)**

## **é›†åˆæ–­è¨€**

**æœ‰æ—¶æˆ‘ä»¬éœ€è¦å¯¹é›†åˆåšä¸€äº›æ–­è¨€ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒNUnit ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€äº›æœ‰ç”¨çš„å®ç”¨ç¨‹åºã€‚**

****æ–­è¨€ã€‚IsEmpty:** å¯ç”¨äºæµ‹è¯•å­—ç¬¦ä¸²ã€é›†åˆæˆ– IEnumerableã€‚å½“ä¸å­—ç¬¦ä¸²ä¸€èµ·ä½¿ç”¨æ—¶ï¼Œå¦‚æœè¯¥å­—ç¬¦ä¸²æ˜¯ç©ºå­—ç¬¦ä¸²ï¼Œåˆ™æˆåŠŸã€‚ä¸é›†åˆä¸€èµ·ä½¿ç”¨æ—¶ï¼Œå¦‚æœé›†åˆä¸ºç©ºï¼Œåˆ™æˆåŠŸã€‚**

****æ–­è¨€ã€‚IsNotEmpty:** å¯ç”¨äºæµ‹è¯•å­—ç¬¦ä¸²ã€é›†åˆæˆ– IEnumerableã€‚å½“ä¸å­—ç¬¦ä¸²ä¸€èµ·ä½¿ç”¨æ—¶ï¼Œå¦‚æœè¯¥å­—ç¬¦ä¸²ä¸æ˜¯ç©ºå­—ç¬¦ä¸²ï¼Œåˆ™æˆåŠŸã€‚å½“ä¸é›†åˆä¸€èµ·ä½¿ç”¨æ—¶ï¼Œå¦‚æœé›†åˆä¸ä¸ºç©ºï¼Œåˆ™æˆåŠŸã€‚**

****æ–­è¨€ã€‚åŒ…å«:**ç”¨äºæµ‹è¯•ä¸€ä¸ªå¯¹è±¡æ˜¯å¦åŒ…å«åœ¨ä¸€ä¸ªé›†åˆä¸­ã€‚**

****CollectionAssertã€‚AllItemsAreInstancesOfType:**ç”¨äºæµ‹è¯•é›†åˆä¸­çš„æ‰€æœ‰é¡¹ç›®æ˜¯å¦éƒ½æ˜¯æŸä¸€ç±»å‹çš„å®ä¾‹ã€‚**

****CollectionAssertã€‚AllItemsAreNotNull:** ç”¨äºæµ‹è¯•é›†åˆä¸­çš„æ‰€æœ‰é¡¹ç›®æ˜¯å¦éƒ½ä¸ä¸ºç©ºã€‚**

****CollectionAssertã€‚AllItemsAreUnique:** ç”¨äºæµ‹è¯•é›†åˆä¸­çš„æ‰€æœ‰é¡¹ç›®æ˜¯å¦å”¯ä¸€ã€‚**

****CollectionAssertã€‚AreEqual:** ç”¨äºæµ‹è¯•ä¸€ä¸ªé›†åˆä¸­çš„æ¯ä¸€é¡¹æ˜¯å¦ç­‰äºå¦ä¸€ä¸ªé›†åˆä¸­å¯¹åº”çš„ä¸€é¡¹ã€‚é¡¹æ ¹æ®å®ƒä»¬åœ¨ä¸¤ä¸ªé›†åˆä¸­çš„é¡ºåºè¿›è¡Œæ¯”è¾ƒã€‚**

****æ”¶è—ã€‚AreEquivalent:** ç”¨äºæµ‹è¯•ä¸€ä¸ªé›†åˆä¸­çš„æ¯ä¸€é¡¹æ˜¯å¦ç­‰äºå¦ä¸€ä¸ªé›†åˆä¸­å¯¹åº”çš„ä¸€é¡¹ã€‚æ— è®ºé¡¹ç›®çš„é¡ºåºå¦‚ä½•ï¼Œéƒ½ä¼šè¿›è¡Œæ¯”è¾ƒã€‚**

**æ”¶è—è€…ã€‚AreNotEqual: æ˜¯ **CollectionAssert çš„åä¹‰è¯ã€‚éƒ½ç›¸ç­‰**ã€‚**

**æ”¶è—è€…ã€‚AreNotEquivalent: æ˜¯ **CollectionAssert çš„åä¹‰è¯ã€‚ç›¸å½“äº**ã€‚**

****CollectionAssertã€‚DoesNotContain:** ç”¨äºæµ‹è¯•é¡¹ç›®é›†åˆæ˜¯å¦ä¸åŒ…å«æŸä¸ªå¯¹è±¡ã€‚**

****é›†åˆæœåŠ¡å™¨ã€‚IsSubsetOf:** ç”¨äºæµ‹è¯•ä¸€ä¸ªé¡¹ç›®é›†åˆæ˜¯å¦æ˜¯å¦ä¸€ä¸ªé›†åˆçš„å­é›†ã€‚**

****CollectionAssertã€‚IsNotSubsetOf:** ç”¨äºæµ‹è¯•ä¸€ä¸ªé¡¹ç›®é›†åˆæ˜¯å¦ä¸æ˜¯å¦ä¸€ä¸ªé›†åˆçš„å­é›†ã€‚**

****CollectionAssertã€‚IsOrdered:** ç”¨äºæµ‹è¯•ä¸€ç»„é¡¹ç›®æ˜¯å¦æœ‰åºã€‚**

**è¦äº†è§£æ›´å¤šçš„ç»†èŠ‚ï¼Œä½ å¯ä»¥éšæ—¶æŸ¥é˜…å®˜æ–¹æ–‡ä»¶ã€‚**

**![](img/dae42316c04548aad197e34b378e3bf1.png)**

## **äº‹ä»¶å¤„ç†ç¨‹åº**

**æœ‰æ—¶ä½ éœ€è¦æµ‹è¯•ä½ çš„ä¸€äº›æ¨¡å—ï¼Œè¿™äº›æ¨¡å—å¤„ç†ç”±å…¶ä»–æ¨¡å—è§¦å‘çš„äº‹ä»¶ã€‚**

**åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œæœ€å¥½çš„å¤„ç†æ–¹æ³•æ˜¯æŠ½è±¡å‡ºè§¦å‘äº‹ä»¶çš„æ¨¡å—ï¼Œè¿™æ ·æ‚¨å°±å¯ä»¥æ¨¡æ‹Ÿå®ƒä»¬è¿›è¡Œæµ‹è¯•ã€‚è®©æˆ‘ç»™ä½ çœ‹ä¸€ä¸ªä¾‹å­ã€‚**

**å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªä¼ æ„Ÿå™¨ï¼Œå¯ä»¥è¯»å–æ±½è½¦æˆ–ä»»ä½•ç‰©ä½“çš„åŠ é€Ÿåº¦ã€‚**

**å¦‚æ‚¨æ‰€è§ï¼Œå®ƒåªæ˜¯ä¸€ä¸ªå¸¦æœ‰äº‹ä»¶çš„ç®€å•æ¥å£ã€‚å°½ç®¡ä¸ºäº†æˆ‘ä»¬çš„ä¾‹å­ï¼Œæˆ‘ä»¬å®é™…ä¸Šä¸éœ€è¦ä¸€ä¸ªå®ç°ï¼Œä½†ä¸ºäº†ç®€æ´èµ·è§ï¼Œæˆ‘åªæä¾›äº†ä¸€ä¸ªç®€å•çš„å®ç°ã€‚**

**ç°åœ¨ï¼Œå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ª`AccelerationDashboard`æ¨¡å—ï¼Œå®ƒä½¿ç”¨`IAccelerationSensor`æ¨¡å—æ€»æ˜¯è·å¾—æ›´æ–°çš„åŠ é€Ÿåº¦å€¼ã€‚**

**å¦‚ä½ æ‰€è§ï¼Œæˆ‘ä»¬çš„`AccelerationDashboard`ç±»ä¾èµ–äº`IAccelerationSensor`æ¨¡å—ï¼Œå¹¶æœŸæœ›å®ƒé€šè¿‡æ„é€ å‡½æ•°è¢«æ³¨å…¥ã€‚**

**æ­¤å¤–ï¼Œå®ƒåªå¤„ç†ç”±`IAccelerationSensor`æ¨¡å—å¼•å‘çš„`AccelerationChanged`äº‹ä»¶ã€‚**

**ç°åœ¨ï¼Œä¸ºäº†æµ‹è¯•`AccelerationDashboard`æ¨¡å—ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·åš:**

**çœ‹ï¼Œå°±æ˜¯è¿™ä¹ˆç®€å•ã€‚ä½¿ç”¨ **Moq** æˆ‘ä»¬å¯ä»¥æ¨¡ä»¿`IAccelerationSensor`æ¨¡å—å¹¶è§¦å‘`AccelerationChanged`äº‹ä»¶ï¼Œä»¥ä¾¿æ–­è¨€`AccelerationDashboard`æ¨¡å—ä¸Šçš„`Acceleration`å€¼ã€‚**

**![](img/dae42316c04548aad197e34b378e3bf1.png)**

## **å®šæ—¶å™¨**

**å½“æ‚¨çš„ç³»ç»Ÿä½¿ç”¨å®šæ—¶å™¨æ—¶ï¼Œæ‚¨å¯èƒ½é¢ä¸´çš„æŒ‘æˆ˜ä¹‹ä¸€æ˜¯å¦‚ä½•ç”¨å•å…ƒæµ‹è¯•å®Œå…¨è¦†ç›–æ‚¨çš„ç³»ç»Ÿã€‚**

**ä¸ºæ­¤ï¼Œæ‚¨éœ€è¦æŠ½è±¡å‡º`Timer`ç±»å¹¶åšä¸€äº›è°ƒæ•´æ¥å®ç°æ‚¨çš„ç›®æ ‡ã€‚**

**å…³äºè¿™ä¸€ç‚¹ï¼Œæˆ‘å·²ç»å‘è¡¨äº†ä¸€ç¯‡éå¸¸è¯¦ç»†çš„æ–‡ç« ã€‚å¦‚æœä½ å¯¹è¿™ä¸ªè¯é¢˜æ„Ÿå…´è¶£ï¼Œä½ å¯ä»¥æŸ¥çœ‹æˆ‘çš„æ–‡ç«  [**ä½¿ç”¨å®šæ—¶å™¨çš„æœ€ä½³å®è·µã€‚**NET c#](/best-practice-for-using-system-timers-timer-in-net-c-867ab6b5027?sk=df2c03aff9a8bddbd62ce4d342d55c71)ã€‚**

**![](img/dae42316c04548aad197e34b378e3bf1.png)**

## **æ—¥æœŸæ—¶é—´**

**æ­¤å¤–ï¼Œå¦‚æœæ‚¨çš„ç³»ç»Ÿä½¿ç”¨ **DateTime** æˆ– **DateTimeOffset** ï¼Œæ‚¨æœ€ç»ˆå°†é¢ä¸´ä¸€äº›æŒ‘æˆ˜ï¼Œç”¨å•å…ƒæµ‹è¯•å®Œå…¨è¦†ç›–æ‚¨çš„æ¨¡å—ã€‚**

**ä¸ºäº†å…‹æœè¿™äº›æŒ‘æˆ˜ï¼Œæ‚¨éœ€è¦å°†è¿™äº›ç±»æŠ½è±¡æˆæä¾›è€…ï¼Œå°†å®ƒä»¬å®šä¹‰ä¸ºä¾èµ–é¡¹ï¼Œç„¶åæ‚¨å°†èƒ½å¤Ÿæ ¹æ®éœ€è¦æ¨¡ä»¿å’Œå­˜æ ¹å®ƒä»¬ã€‚**

**å…³äºè¿™ä¸€ç‚¹ï¼Œæˆ‘å·²ç»å‘è¡¨äº†ä¸€ç¯‡éå¸¸è¯¦ç»†çš„æ–‡ç« ã€‚å¦‚æœä½ å¯¹è¿™ä¸ªè¯é¢˜æ„Ÿå…´è¶£ï¼Œå¯ä»¥æŸ¥çœ‹æˆ‘çš„æ–‡ç«  [**ä¸­çš„æ—¥æœŸæ—¶é—´æœ€ä½³å®è·µã€‚**NET c#](/datetime-best-practices-in-net-c-4c2679fcc9e0?sk=818404f760995c45e0b8b6f948dd3ff6)ã€‚**

**![](img/dae42316c04548aad197e34b378e3bf1.png)**

## **I/O æ–‡ä»¶å’Œæ–‡ä»¶å¤¹æ“ä½œ**

**å½“ç³»ç»Ÿä¸¥é‡ä¾èµ– I/O æ–‡ä»¶å’Œæ–‡ä»¶å¤¹æ“ä½œæ—¶ï¼Œè¿™æ˜¯è®¸å¤šå¼€å‘äººå‘˜é¢ä¸´çš„è‘—åæŒ‘æˆ˜ä¹‹ä¸€ã€‚**

**ä¸ºäº†ç”¨å•å…ƒæµ‹è¯•å®Œå…¨è¦†ç›–è¿™æ ·çš„ç³»ç»Ÿï¼Œå¼€å‘äººå‘˜å¿…é¡»è¶…è¶Šä»–å‡ ä¹æ˜¾è€Œæ˜“è§çš„éœ€æ±‚ã€‚ç³»ç»Ÿè®¾è®¡æœ¬èº«å¿…é¡»é€‚åº”ä¸€äº›æŠ½è±¡å±‚ï¼Œå…¶ä¸­æ¯ä¸€å±‚åœ¨æ•´ä¸ªç³»ç»Ÿä¸­éƒ½æœ‰ä¸€ä¸ªæ˜ç¡®å®šä¹‰çš„è§„åˆ™ã€‚**

**å…³äºè¿™ä¸€ç‚¹ï¼Œæˆ‘å·²ç»å‘è¡¨äº†ä¸€ç¯‡éå¸¸è¯¦ç»†çš„æ–‡ç« ã€‚å¦‚æœä½ å¯¹è¿™ä¸ªè¯é¢˜æ„Ÿå…´è¶£ï¼Œä½ å¯ä»¥æŸ¥çœ‹æˆ‘çš„æ–‡ç«  [**å¦‚ä½•å…¨é¢è¦†ç›–åŸºäº I/O æ–‡ä»¶çš„åº”ç”¨ã€‚NET C#å¸¦å•å…ƒæµ‹è¯•**](/how-to-fully-cover-i-o-file-based-applications-in-net-c-with-unit-tests-ca75c07f3b2c?sk=bc164097aca7c1d31e32e4dd35a60163) ã€‚**

**![](img/dae42316c04548aad197e34b378e3bf1.png)**

## **æ§åˆ¶å°ç³»ç»Ÿ**

**å½“å¤„ç†æ§åˆ¶å°ç³»ç»Ÿæ—¶ï¼Œå½“æˆ‘ä»¬çš„æ¨¡å—ç›´æ¥ä¾èµ–äº`System.Console`æ—¶ï¼Œç”¨å•å…ƒæµ‹è¯•è¦†ç›–æ•´ä¸ªç³»ç»Ÿå˜å¾—éå¸¸å›°éš¾ã€‚**

**è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬é¦–å…ˆéœ€è¦æŠ½è±¡æ§åˆ¶å° Apiï¼Œå¹¶å¼€å§‹å°†å®ƒä»¬ä½œä¸ºä¾èµ–é¡¹ä½¿ç”¨ã€‚è¿™æ ·ï¼Œç”¨å•å…ƒæµ‹è¯•è¦†ç›–æˆ‘ä»¬çš„æ§åˆ¶å°ç³»ç»Ÿå°±å®¹æ˜“å¤šäº†ã€‚**

**å…³äºè¿™ä¸€ç‚¹ï¼Œæˆ‘å·²ç»å‘è¡¨äº†ä¸€ç¯‡éå¸¸è¯¦ç»†çš„æ–‡ç« ã€‚å¦‚æœæœ‰å…´è¶£è¿›å…¥æ­£é¢˜ï¼Œå¯ä»¥æŸ¥çœ‹æˆ‘çš„æ–‡ç«  [**å¦‚ä½•å…¨é¢è¦†ç›–ã€‚å¸¦æœ‰å•å…ƒæµ‹è¯•çš„. NET C#æ§åˆ¶å°åº”ç”¨ç¨‹åº**](https://itnext.io/how-to-fully-cover-net-c-console-application-with-unit-tests-446927a4a793?sk=63c75b56de78903f09f0d0116df5fe3a) ã€‚**

**![](img/dae42316c04548aad197e34b378e3bf1.png)****![](img/76d4292a186dc4fa63b608550317e4fe.png)**

****æœ€ç»ˆæƒ³æ³•**ã€‚ç”± [Pietro Rampazzo](https://unsplash.com/@peterampazzo?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) åœ¨ [Unsplash](https://unsplash.com/?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) ä¸Šæ‹æ‘„ï¼Œç”± [Ahmed Tarek](https://medium.com/@eng_ahmed.tarek) è°ƒæ•´**

# **æœ€åçš„æƒ³æ³•**

**åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬è®¨è®ºäº†ä½¿ç”¨ [**NUnit**](https://nunit.org/) å’Œ [**Moq**](https://www.nuget.org/packages/Moq/) åº“æ¥è¦†ç›–æˆ‘ä»¬çš„**åº“æ—¶éœ€è¦éµå¾ªçš„ä¸€äº›é‡è¦æç¤ºã€æŠ€å·§å’Œæœ€ä½³å®è·µã€‚NET C#** å¸¦å•å…ƒæµ‹è¯•çš„åº”ç”¨ã€‚**

**æˆ‘ç»™ä½ çš„å»ºè®®æ˜¯åšä½ è‡ªå·±çš„ç ”ç©¶ï¼Œå¹¶å°è¯•å¯»æ‰¾å…¶ä»–èµ„æºï¼Œè¿™äº›èµ„æºå¯èƒ½å¸®åŠ©ä½ äº†è§£æ›´å¤šå…³äºæµ‹è¯•æŠ€æœ¯å’Œç›¸å…³çš„æœ€ä½³å®è·µã€‚**

**æœ€åï¼Œæˆ‘å¸Œæœ›ä½ è§‰å¾—è¯»è¿™ä¸ªæ•…äº‹å’Œæˆ‘å†™å®ƒä¸€æ ·æœ‰è¶£ã€‚**

**![](img/846628afe4d458feb09f819f4ec6b3ff.png)**

# **å¸Œæœ›è¿™äº›å†…å®¹å¯¹ä½ æœ‰ç”¨ã€‚å¦‚æœæ‚¨æƒ³æ”¯æŒ:**

**å¦‚æœæ‚¨è¿˜ä¸æ˜¯**ä¸­**ä¼šå‘˜ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ [**æˆ‘çš„æ¨èé“¾æ¥**](https://medium.com/@eng_ahmed.tarek/membership) ï¼Œè¿™æ ·æˆ‘å°±å¯ä»¥ä»**ä¸­**è·å¾—æ‚¨çš„ä¸€éƒ¨åˆ†è´¹ç”¨ï¼Œæ‚¨æ— éœ€æ”¯ä»˜ä»»ä½•é¢å¤–è´¹ç”¨ã€‚è®¢é˜… [**æˆ‘çš„ç®€è®¯**](https://medium.com/subscribe/@eng_ahmed.tarek) å°†æœ€ä½³å®è·µã€æ•™ç¨‹ã€æç¤ºã€æŠ€å·§å’Œè®¸å¤šå…¶ä»–æœ‰è¶£çš„ä¸œè¥¿ç›´æ¥å‘é€åˆ°æ‚¨çš„æ”¶ä»¶ç®±ã€‚**

**![](img/4f9017034da38b34f4034f54bdf8ee17.png)**

# **å…¶ä»–èµ„æº**

**è¿™äº›æ˜¯ä½ å¯èƒ½ä¼šå‘ç°æœ‰ç”¨çš„å…¶ä»–èµ„æºã€‚**

**[](/paging-partitioning-main-equations-to-make-it-easy-44fe89d5290b) [## åˆ†é¡µ/åˆ†åŒºâ€”ç®€åŒ–è¿™ä¸€è¿‡ç¨‹çš„ä¸»è¦ç­‰å¼

### æœ€åï¼Œè¿™æ˜¯æ‚¨ç†è§£åˆ†é¡µ/åˆ†åŒºä¸»è¦ç­‰å¼å¹¶å­¦ä¹ å¦‚ä½•åœ¨ä»£ç ä¸­åº”ç”¨å®ƒä»¬çš„æœºä¼šã€‚

levelup.gitconnected.com](/paging-partitioning-main-equations-to-make-it-easy-44fe89d5290b) [](https://itnext.io/when-string-gethashcode-in-net-c-drives-you-crazy-c97ac7507d7b) [## å½“å­—ç¬¦ä¸²ã€‚ä¸­çš„ GetHashCode()ã€‚NET C#è®©ä½ æŠ“ç‹‚

### çŸ¥é“ä»€ä¹ˆæ—¶å€™ä¾èµ–å­—ç¬¦ä¸²ã€‚ä¸­çš„ GetHashCode()ã€‚NET C#ï¼Œè€Œå½“ä¸æ˜¯ã€‚

itnext.io](https://itnext.io/when-string-gethashcode-in-net-c-drives-you-crazy-c97ac7507d7b) [](/useful-free-online-tools-for-developers-ed882d4761c1) [## å¯¹å¼€å‘è€…æœ‰ç”¨çš„å…è´¹åœ¨çº¿å·¥å…·

### è¿™æ˜¯ä¸€ä¸ªæœ‰ç”¨çš„å…è´¹åœ¨çº¿å·¥å…·åˆ—è¡¨ï¼Œå¯ä»¥å¸®åŠ©å¼€å‘è€…å®Œæˆæ—¥å¸¸ä»»åŠ¡ã€‚

levelup.gitconnected.com](/useful-free-online-tools-for-developers-ed882d4761c1) [](/mistakes-made-by-developers-79af38b070b7) [## å¼€å‘äººå‘˜çŠ¯çš„é”™è¯¯

### è¿™äº›æ˜¯å¼€å‘äººå‘˜æœ€å¸¸çŠ¯çš„é”™è¯¯ã€‚

levelup.gitconnected.com](/mistakes-made-by-developers-79af38b070b7) ![](img/4f9017034da38b34f4034f54bdf8ee17.png)**