<html>
<head>
<title>Conditional Props With Typescript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">带打字稿的条件道具</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/conditional-props-with-typescript-78590139aa39?source=collection_archive---------3-----------------------#2022-10-14">https://levelup.gitconnected.com/conditional-props-with-typescript-78590139aa39?source=collection_archive---------3-----------------------#2022-10-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/64414c481a9571e62544e6a985cb58cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fwsO-ytaBGTUVHTagM-uBQ.png"/></div></div></figure><p id="0006" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们将首先讨论我们需要使用typescript的条件道具的问题，然后我们将讨论它是如何为我们解决问题的。</p><blockquote class="kw kx ky"><p id="ebc6" class="jy jz kz ka b kb kc kd ke kf kg kh ki la kk kl km lb ko kp kq lc ks kt ku kv ij bi translated">仅当另一个属性具有特定值时才应设置的属性。</p></blockquote><h1 id="d94c" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated"><strong class="ak">问题陈述:</strong></h1><p id="f150" class="pw-post-body-paragraph jy jz iq ka b kb mb kd ke kf mc kh ki kj md kl km kn me kp kq kr mf kt ku kv ij bi translated">很多时候，我们将同一个组件用于多种不同的目的。</p><p id="88a2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">考虑CTA组件(行动号召)的例子，该组件可以充当</p><ul class=""><li id="bd50" class="mg mh iq ka b kb kc kf kg kj mi kn mj kr mk kv ml mm mn mo bi translated">打开另一页的按钮</li><li id="7c37" class="mg mh iq ka b kb mp kf mq kj mr kn ms kr mt kv ml mm mn mo bi translated">带有调用API的加载程序的按钮</li><li id="0bac" class="mg mh iq ka b kb mp kf mq kj mr kn ms kr mt kv ml mm mn mo bi translated">在web中打开链接的按钮</li><li id="c3cc" class="mg mh iq ka b kb mp kf mq kj mr kn ms kr mt kv ml mm mn mo bi translated">带图标的按钮</li></ul><p id="b61c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">还有更多…</p><p id="5d6f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当构建这样一个组件时，我们应该知道不是所有类型的道具组合都是有效的，并且应该避免开发人员在开发期间传递这样的组合。它可以被定义为<strong class="ka ir">冲突属性</strong>(你不能将href传递给一个普通的按钮或者禁用一个链接的属性)</p><figure class="mu mv mw mx gt jr"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="32ed" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这里，在上面的示例中，当您尝试为CTA组件传递href prop时，它不会引发任何错误。</p><p id="6488" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，让我们看看如何使用typescript作为解决方案，以及它如何帮助我们避免这样的问题。</p><h1 id="54f0" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated"><strong class="ak">解决方案:</strong></h1><p id="0e8c" class="pw-post-body-paragraph jy jz iq ka b kb mb kd ke kf mc kh ki kj md kl km kn me kp kq kr mf kt ku kv ij bi translated">让我们尝试为我们想要使用的特定组件分解props接口，如下所示:</p><figure class="mu mv mw mx gt jr"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="d382" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">首先，我们定义了公共props接口，用于我们想要支持的所有不同类型的CTA的所有公共属性，并且可以进一步扩展。</p><p id="edf6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">其次，我们为我们支持的不同CTA定义一组属性。</p><p id="49f1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">最后，为了避免用户传递所有的道具组合，我们使用了<a class="ae na" href="https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#union-types" rel="noopener ugc nofollow" target="_blank">联合类型</a>，这有助于我们为组件定义一组不同的有效道具，即CTA组件道具。</p><p id="d85b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">此外，从上面的示例中可以看出，我们在很久以后才基于<em class="kz"> kind </em> prop的类型对props进行解结构，这被称为t <a class="ae na" href="https://www.typescriptlang.org/docs/handbook/2/narrowing.html" rel="noopener ugc nofollow" target="_blank"> ypescript缩小</a>，以帮助开发人员使用IDE intellisense并避免开发期间的错误。</p><blockquote class="kw kx ky"><p id="db90" class="jy jz kz ka b kb kc kd ke kf kg kh ki la kk kl km lb ko kp kq lc ks kt ku kv ij bi translated"><strong class="ka ir">在typescript缩小的情况下，</strong> TypeScript遵循可能的执行路径，我们的程序可以采用这些路径来分析给定位置的值的最具体的可能类型</p></blockquote><p id="f952" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">正如你在下面的截图中看到的:</p><ol class=""><li id="3743" class="mg mh iq ka b kb kc kf kg kj mi kn mj kr mk kv nb mm mn mo bi translated">这里，对于作为“button”的种类属性，如果您尝试传递href属性，它会给出一个错误，指出该类型不存在。</li></ol><figure class="mu mv mw mx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nc"><img src="../Images/522606dd6e52a9ad45c9ae555a176fe1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8BJBfAoPPz5MZ4ACGDT8wg.png"/></div></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk translated">为按钮类型CTA传递额外属性时出错</figcaption></figure><p id="9acf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">2.在这里，对于作为“链接”的种类属性，它给出了一个错误，指出缺少href属性，并且它是一个必需的属性。</p><figure class="mu mv mw mx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nh"><img src="../Images/d905c98d12e9240ae0a11f037a95d3ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U2WexZ1S0XrtJ0gC8g63dg.png"/></div></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk translated">链接类型CTA缺少属性时出错</figcaption></figure><p id="8ae1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你可以看看<a class="ae na" href="https://codesandbox.io/s/condtional-props-with-typescript-forked-oue6il?file=/src/App_incorrect.tsx" rel="noopener ugc nofollow" target="_blank">代码沙箱</a>并玩玩它。</p><h1 id="8034" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">结论</h1><p id="5e48" class="pw-post-body-paragraph jy jz iq ka b kb mb kd ke kf mc kh ki kj md kl km kn me kp kq kr mf kt ku kv ij bi translated">本文主要总结了条件属性如何帮助您为组件定义一组正确的属性，并帮助您提供更好的开发体验。</p></div></div>    
</body>
</html>