<html>
<head>
<title>Euro 2020 Predictive Model Based On FIFA Ranking System</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">基于国际足联排名系统的2020年欧洲杯预测模型</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/euro-2020-predictive-model-based-on-fifa-ranking-system-70bc97167b99?source=collection_archive---------5-----------------------#2021-07-01">https://levelup.gitconnected.com/euro-2020-predictive-model-based-on-fifa-ranking-system-70bc97167b99?source=collection_archive---------5-----------------------#2021-07-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="98ee" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">举例说明如何估计每支球队赢得2020年欧洲杯的概率</h2></div><p id="d92d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在之前的帖子中，我们基于国际足联排名的<a class="ae le" href="https://www.fifa.com/fifa-world-ranking/men?dateId=id13295" rel="noopener ugc nofollow" target="_blank">建立了一个</a><a class="ae le" href="https://predictivehacks.com/who-is-going-to-win-the-euro-2020/" rel="noopener ugc nofollow" target="_blank">预测模型</a>，并假设积分遵循正态分布。如果我们更仔细地观察<a class="ae le" href="https://en.wikipedia.org/wiki/FIFA_World_Rankings" rel="noopener ugc nofollow" target="_blank">国际足联的排名模型</a>，我们会发现它是基于ELO体系的，比赛的预期结果可以从以下公式中得出:</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div class="gh gi lf"><img src="../Images/0fe6d983fbb9112389c39e61dfd2983c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1050/format:webp/1*xHusPAvD1lBp_KpiiD9s9Q.png"/></div></figure><h1 id="5536" class="ln lo it bd lp lq lr ls lt lu lv lw lx jz ly ka lz kc ma kd mb kf mc kg md me bi translated">根据预期结果模拟最终16阶段</h1><figure class="lg lh li lj gt lk gh gi paragraph-image"><div class="gh gi mf"><img src="../Images/9296a6ffc2609035df5e96b189613f61.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*xKcGdCTrsysGXjoD.jpeg"/></div></figure><p id="6d36" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们运行10000次模拟来估计2020年欧锦赛冠军的概率。</p><pre class="lg lh li lj gt mg mh mi mj aw mk bi"><span id="7093" class="ml lo it mh b gy mm mn l mo mp"># get the UEFA Ranking</span><span id="2c79" class="ml lo it mh b gy mq mn l mo mp">ranking&lt;-list(bel=1783,<br/>fra=1757,<br/>eng=1687,<br/>por=1666,<br/>esp=1648,<br/>ita=1642,<br/>den=1632,<br/>ger=1609,<br/>sui=1606,<br/>cro=1606,<br/>net=1598,<br/>wal=1570,<br/>swe=1570,<br/>aus=1523,<br/>ukr=1515,<br/>cze=1459)</span><span id="09b2" class="ml lo it mh b gy mq mn l mo mp">win_prob&lt;-function(a,b) {<br/>  <br/>  w_prob&lt;-1/(1+10^(-(a-b)/600))<br/>  outcome&lt;-sample(c(TRUE,FALSE), 1, prob=c(w_prob, 1-w_prob))<br/>  return(outcome)<br/>}</span><span id="ae12" class="ml lo it mh b gy mq mn l mo mp">sim_champion&lt;-c()<br/>final&lt;-c()</span><span id="e6d4" class="ml lo it mh b gy mq mn l mo mp"># number of simulations<br/>n&lt;-10000<br/>for (i in 1:10000) {</span><span id="d3dc" class="ml lo it mh b gy mq mn l mo mp">#######################<br/>#### Final 16<br/>#######################</span><span id="5016" class="ml lo it mh b gy mq mn l mo mp"># game bel vs por<br/>teams_game1&lt;-c("bel","por")<br/>game1&lt;-win_prob(ranking[[teams_game1[1]]], ranking[[teams_game1[2]]])<br/>if (game1) {<br/>  qualified_game1&lt;-teams_game1[1] <br/>  } else {<br/>  qualified_game1&lt;-teams_game1[2]}</span><span id="f854" class="ml lo it mh b gy mq mn l mo mp">qualified_game1</span><span id="1ffb" class="ml lo it mh b gy mq mn l mo mp"># game ita vs aus<br/>teams_game2&lt;-c("ita","aus")<br/>game2&lt;-win_prob(ranking[[teams_game2[1]]], ranking[[teams_game2[2]]])<br/>if (game2) {<br/>  qualified_game2&lt;-teams_game2[1] <br/>} else {<br/>  qualified_game2&lt;-teams_game2[2]}</span><span id="e469" class="ml lo it mh b gy mq mn l mo mp">qualified_game2</span><span id="a3cc" class="ml lo it mh b gy mq mn l mo mp"># game fra vs sui<br/>teams_game3&lt;-c("fra","sui")<br/>game3&lt;-win_prob(ranking[[teams_game3[1]]], ranking[[teams_game3[2]]])<br/>if (game3) {<br/>  qualified_game3&lt;-teams_game3[1] <br/>} else {<br/>  qualified_game3&lt;-teams_game3[2]}</span><span id="f2a4" class="ml lo it mh b gy mq mn l mo mp">qualified_game3</span><span id="6974" class="ml lo it mh b gy mq mn l mo mp"># game cro vs esp<br/>teams_game4&lt;-c("cro","esp")<br/>game4&lt;-win_prob(ranking[[teams_game4[1]]], ranking[[teams_game4[2]]])<br/>if (game4) {<br/>  qualified_game4&lt;-teams_game4[1] <br/>} else {<br/>  qualified_game4&lt;-teams_game4[2]}</span><span id="c50e" class="ml lo it mh b gy mq mn l mo mp">qualified_game4</span><span id="b46e" class="ml lo it mh b gy mq mn l mo mp"># game swe vs ukr<br/>teams_game5&lt;-c("swe","ukr")<br/>game5&lt;-win_prob(ranking[[teams_game5[1]]], ranking[[teams_game5[2]]])<br/>if (game5) {<br/>  qualified_game5&lt;-teams_game5[1] <br/>} else {<br/>  qualified_game5&lt;-teams_game5[2]}</span><span id="9195" class="ml lo it mh b gy mq mn l mo mp">qualified_game5</span><span id="a258" class="ml lo it mh b gy mq mn l mo mp"># game eng vs ger<br/>teams_game6&lt;-c("eng","ger")<br/>game6&lt;-win_prob(ranking[[teams_game6[1]]], ranking[[teams_game6[2]]])<br/>if (game6) {<br/>  qualified_game6&lt;-teams_game6[1] <br/>} else {<br/>  qualified_game6&lt;-teams_game6[2]}</span><span id="795e" class="ml lo it mh b gy mq mn l mo mp">qualified_game6</span><span id="ee57" class="ml lo it mh b gy mq mn l mo mp"># game net vs cze<br/>teams_game7&lt;-c("net","cze")<br/>game7&lt;-win_prob(ranking[[teams_game7[1]]], ranking[[teams_game7[2]]])<br/>if (game7) {<br/>  qualified_game7&lt;-teams_game7[1] <br/>} else {<br/>  qualified_game7&lt;-teams_game7[2]}</span><span id="8c19" class="ml lo it mh b gy mq mn l mo mp">qualified_game7</span><span id="204f" class="ml lo it mh b gy mq mn l mo mp"># game wal vs den<br/>teams_game8&lt;-c("wal","den")<br/>game8&lt;-win_prob(ranking[[teams_game8[1]]], ranking[[teams_game8[2]]])<br/>if (game8) {<br/>  qualified_game8&lt;-teams_game8[1] <br/>} else {<br/>  qualified_game8&lt;-teams_game8[2]}</span><span id="da1c" class="ml lo it mh b gy mq mn l mo mp">qualified_game8</span><span id="31a6" class="ml lo it mh b gy mq mn l mo mp">#######################<br/>#### Final 8<br/>#######################</span><span id="6a24" class="ml lo it mh b gy mq mn l mo mp">teams_f8_1&lt;-c(qualified_game1,qualified_game2)<br/>game_f8_1&lt;-win_prob(ranking[[teams_f8_1[1]]], ranking[[teams_f8_1[2]]])</span><span id="2334" class="ml lo it mh b gy mq mn l mo mp">if (game_f8_1) {<br/>  qualified_f8_1&lt;-teams_f8_1[1] <br/>} else {<br/>  qualified_f8_1&lt;-teams_f8_1[2]}</span><span id="dea0" class="ml lo it mh b gy mq mn l mo mp">qualified_f8_1</span><span id="6ef3" class="ml lo it mh b gy mq mn l mo mp">teams_f8_2&lt;-c(qualified_game3,qualified_game4)<br/>game_f8_2&lt;-win_prob(ranking[[teams_f8_2[1]]], ranking[[teams_f8_2[2]]])</span><span id="a96e" class="ml lo it mh b gy mq mn l mo mp">if (game_f8_2) {<br/>  qualified_f8_2&lt;-teams_f8_2[1] <br/>} else {<br/>  qualified_f8_2&lt;-teams_f8_2[2]}</span><span id="796f" class="ml lo it mh b gy mq mn l mo mp">qualified_f8_2</span><span id="a19e" class="ml lo it mh b gy mq mn l mo mp">teams_f8_3&lt;-c(qualified_game5,qualified_game6)<br/>game_f8_3&lt;-win_prob(ranking[[teams_f8_3[1]]], ranking[[teams_f8_3[2]]])</span><span id="a834" class="ml lo it mh b gy mq mn l mo mp">if (game_f8_3) {<br/>  qualified_f8_3&lt;-teams_f8_3[1] <br/>} else {<br/>  qualified_f8_3&lt;-teams_f8_3[2]}</span><span id="deee" class="ml lo it mh b gy mq mn l mo mp">qualified_f8_3</span><span id="d253" class="ml lo it mh b gy mq mn l mo mp">teams_f8_4&lt;-c(qualified_game7,qualified_game8)<br/>game_f8_4&lt;-win_prob(ranking[[teams_f8_4[1]]], ranking[[teams_f8_4[2]]])</span><span id="150a" class="ml lo it mh b gy mq mn l mo mp">if (game_f8_4) {<br/>  qualified_f8_4&lt;-teams_f8_4[1] <br/>} else {<br/>  qualified_f8_4&lt;-teams_f8_4[2]}</span><span id="810d" class="ml lo it mh b gy mq mn l mo mp">qualified_f8_4</span><span id="dd02" class="ml lo it mh b gy mq mn l mo mp">#######################<br/>#### Final 4<br/>#######################</span><span id="2d6e" class="ml lo it mh b gy mq mn l mo mp">teams_f4_1&lt;-c(qualified_f8_1,qualified_f8_2)<br/>game_f4_1&lt;-win_prob(ranking[[teams_f4_1[1]]], ranking[[teams_f4_1[2]]])</span><span id="61d2" class="ml lo it mh b gy mq mn l mo mp">if (game_f4_1) {<br/>  qualified_f4_1&lt;-teams_f4_1[1] <br/>} else {<br/>  qualified_f4_1&lt;-teams_f4_1[2]}</span><span id="73cf" class="ml lo it mh b gy mq mn l mo mp">qualified_f4_1</span><span id="ebfe" class="ml lo it mh b gy mq mn l mo mp">teams_f4_2&lt;-c(qualified_f8_3,qualified_f8_4)<br/>game_f4_2&lt;-win_prob(ranking[[teams_f4_2[1]]], ranking[[teams_f4_2[2]]])</span><span id="a652" class="ml lo it mh b gy mq mn l mo mp">if (game_f4_2) {<br/>  qualified_f4_2&lt;-teams_f4_2[1] <br/>} else {<br/>  qualified_f4_2&lt;-teams_f4_2[2]}</span><span id="c956" class="ml lo it mh b gy mq mn l mo mp">qualified_f4_2</span><span id="d9e7" class="ml lo it mh b gy mq mn l mo mp">#######################<br/>#### Final <br/>#######################</span><span id="85a9" class="ml lo it mh b gy mq mn l mo mp">teams_f&lt;-c(qualified_f4_1,qualified_f4_2)<br/>game_f&lt;-win_prob(ranking[[teams_f[1]]], ranking[[teams_f[2]]])</span><span id="d7a9" class="ml lo it mh b gy mq mn l mo mp">if (game_f) {<br/>  champion&lt;-teams_f[1] <br/>} else {<br/>  champion&lt;-teams_f[2]}</span><span id="bb3d" class="ml lo it mh b gy mq mn l mo mp">sim_champion&lt;-c(sim_champion,champion)<br/>final&lt;-c(final, teams_f)<br/>}</span><span id="63b0" class="ml lo it mh b gy mq mn l mo mp">prop.table(table(sim_champion))*100</span><span id="880d" class="ml lo it mh b gy mq mn l mo mp">sort(table(final), decreasing = FALSE)/10000</span></pre><h1 id="9619" class="ln lo it bd lp lq lr ls lt lu lv lw lx jz ly ka lz kc ma kd mb kf mc kg md me bi translated">估计获胜者</h1><p id="e6cb" class="pw-post-body-paragraph ki kj it kk b kl mr ju kn ko ms jx kq kr mt kt ku kv mu kx ky kz mv lb lc ld im bi translated">通过运行上面的模拟，我们可以估计每支球队赢得2020年欧洲杯的概率。</p><p id="3072" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">结果:</p><pre class="lg lh li lj gt mg mh mi mj aw mk bi"><span id="8c0e" class="ml lo it mh b gy mm mn l mo mp">sim_champion<br/>  aus   bel   cro   cze   den   eng   esp   fra   ger   ita   net   por   sui   swe   ukr   wal <br/> 1.68 16.22  3.74  1.33  7.64 10.17  6.53 14.70  4.75  6.83  5.99  6.21  3.38  4.37  2.28  4.18</span></pre><figure class="lg lh li lj gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="gh gi mw"><img src="../Images/228c3a83d28388edbb2805a809ba947f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rW0eUTig9qytTsvkAf1J_g.png"/></div></div></figure><p id="4ea4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">正如我们所见，<strong class="kk iu">比利时有16.22% </strong>赢得2020年欧洲杯，根据这种方法，它是最有希望的。</p><h1 id="1a2c" class="ln lo it bd lp lq lr ls lt lu lv lw lx jz ly ka lz kc ma kd mb kf mc kg md me bi translated">估计每个队进入决赛的概率</h1><p id="324e" class="pw-post-body-paragraph ki kj it kk b kl mr ju kn ko ms jx kq kr mt kt ku kv mu kx ky kz mv lb lc ld im bi translated">我们也可以估算一下每支队伍进入决赛的概率。</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="gh gi nb"><img src="../Images/0bc558a9898a1804a628d813a07eb6f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zfTJoJfiWvq5jj9rABZcdg.png"/></div></div></figure><p id="c6eb" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">正如我们所看到的，比利时和法国最有机会进入决赛，还有英格兰。比较比利时和法国赢得欧洲杯的机会(16.22%对10.17%)和进入决赛的机会(21.91%对21.63%)。这与英格兰的赛程比比利时和法国更“轻松”有关。当时间表起作用时，模拟的需要是最重要的。</p></div></div>    
</body>
</html>