<html>
<head>
<title>7 SQL Concepts You Should Know For Data Science</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">数据科学中你应该知道的7个SQL概念</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/7-sql-concepts-you-should-know-for-data-science-7521177a1919?source=collection_archive---------2-----------------------#2022-12-31">https://levelup.gitconnected.com/7-sql-concepts-you-should-know-for-data-science-7521177a1919?source=collection_archive---------2-----------------------#2022-12-31</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/b540793da1eeed133becb3e8bc4f98b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*QdGuu6BWuITP6dhA"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">卡斯帕·卡米尔·鲁宾在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="1697" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">你有没有发现自己在数据库中挖掘，试图提取你需要的信息，但感觉你只是在抓皮毛？这就是SQL的用武之地。</p><p id="1dc2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">SQL或结构化查询语言是一种强大的工具，它允许您与数据库进行通信，并以结构化和高效的方式提取您需要的数据。作为一名数据科学家，知道如何有效地使用SQL对于访问和分析数据至关重要。</p><p id="d52c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本文中，我们将讨论七个基本的SQL概念，它们将为您使用数据库打下坚实的基础。无论您是刚刚开始您的数据科学之旅，还是希望重温您的技能，这些概念都将为您的成功奠定基础。</p><p id="a685" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">所以让我们开始吧！</p><h1 id="41bd" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">选择指令</h1><ul class=""><li id="1442" class="mc md it ki b kj me kn mf kr mg kv mh kz mi ld mj mk ml mm bi translated">SELECT语句是从数据库中检索数据的基本工具。它允许您指定想要检索的列，或者使用<code class="fe mn mo mp mq b">*</code>选择所有列。您还可以使用WHERE子句和逻辑运算符(如and、OR和NOT)来过滤结果，以创建更复杂的过滤器。</li><li id="ccb6" class="mc md it ki b kj mr kn ms kr mt kv mu kz mv ld mj mk ml mm bi translated">例如，假设您想从“客户”表中检索居住在纽约市的所有客户:</li></ul><pre class="mw mx my mz gt na mq nb bn nc nd bi"><span id="f83a" class="ne lf it mq b be nf ng l nh ni">SELECT * FROM customers WHERE city = 'New York';</span></pre><p id="b4d2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">或者，假设您想要检索纽约州姓氏为“Smith”的客户的特定列:</p><pre class="mw mx my mz gt na mq nb bn nc nd bi"><span id="c2d3" class="ne lf it mq b be nf ng l nh ni">SELECT first_name, last_name, email FROM customers WHERE state = 'NY' AND last_name = 'Smith';</span></pre><p id="89a7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您还可以使用LIMIT关键字来限制返回的结果数。例如，如果您只想从“订单”表中检索前五个订单:</p><pre class="mw mx my mz gt na mq nb bn nc nd bi"><span id="6878" class="ne lf it mq b be nf ng l nh ni">SELECT * FROM orders LIMIT 5;</span></pre><p id="c590" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">SELECT语句是在SQL中使用数据库的基本部分，掌握它将允许您有效地检索和分析数据。</p><h1 id="8f71" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">加入</h1><p id="e768" class="pw-post-body-paragraph kg kh it ki b kj me kl km kn mf kp kq kr nj kt ku kv nk kx ky kz nl lb lc ld im bi translated">使用数据库时，通常需要合并多个表中的数据。这就是JOIN的用武之地。</p><p id="f9ec" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">有两种主要的联接类型:内部联接和外部联接。</p><ul class=""><li id="1ff4" class="mc md it ki b kj kk kn ko kr nm kv nn kz no ld mj mk ml mm bi translated">内部联接根据公共列中的匹配值组合两个或多个表中的行。它只返回在两个表中都找到匹配项的行。</li></ul><h2 id="30d6" class="np lf it bd lg nq nr dn lk ns nt dp lo kr nu nv ls kv nw nx lw kz ny nz ma oa bi translated">下面是一个内部联接的示例:</h2><pre class="mw mx my mz gt na mq nb bn nc nd bi"><span id="cd2a" class="ne lf it mq b be nf ng l nh ni">SELECT orders.order_id, customers.first_name, customers.last_name<br/>FROM orders<br/>INNER JOIN customers<br/>ON orders.customer_id = customers.customer_id;</span></pre><p id="85c9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">该语句检索已经下订单的客户的<code class="fe mn mo mp mq b">order_id</code>、<code class="fe mn mo mp mq b">first_name</code>和<code class="fe mn mo mp mq b">last_name</code>。内部连接基于<code class="fe mn mo mp mq b">customer_id</code>列，该列同时存在于“订单”和“客户”表中。</p><ul class=""><li id="e3b9" class="mc md it ki b kj kk kn ko kr nm kv nn kz no ld mj mk ml mm bi translated">外部联接合并两个或多个表中的行，包括在公共列中没有匹配值的行。有三种类型的外部联接:左联接、右联接和完全外部联接。</li><li id="38b0" class="mc md it ki b kj mr kn ms kr mt kv mu kz mv ld mj mk ml mm bi translated">LEFT JOIN返回左表中的所有行，以及右表中任何匹配的行。如果不匹配，空值将显示在右侧表的列中。</li><li id="f998" class="mc md it ki b kj mr kn ms kr mt kv mu kz mv ld mj mk ml mm bi translated">RIGHT JOIN返回右表中的所有行，以及左表中任何匹配的行。如果不匹配，空值将显示在左侧表的列中。</li><li id="dc61" class="mc md it ki b kj mr kn ms kr mt kv mu kz mv ld mj mk ml mm bi translated">完全外连接返回两个表中的所有行，不管公共列中是否有匹配项。如果不匹配，将为不匹配的列显示空值。</li></ul><h2 id="ed68" class="np lf it bd lg nq nr dn lk ns nt dp lo kr nu nv ls kv nw nx lw kz ny nz ma oa bi translated">以下是左连接的一个示例:</h2><pre class="mw mx my mz gt na mq nb bn nc nd bi"><span id="dfa1" class="ne lf it mq b be nf ng l nh ni">SELECT orders.order_id, customers.first_name, customers.last_name<br/>FROM orders<br/>LEFT JOIN customers<br/>ON orders.customer_id = customers.customer_id;</span></pre><p id="5cfe" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">该语句检索所有订单，以及相应客户的<code class="fe mn mo mp mq b">first_name</code>和<code class="fe mn mo mp mq b">last_name</code>(如果有的话)。如果订单不存在客户，空值将显示在<code class="fe mn mo mp mq b">first_name</code>和<code class="fe mn mo mp mq b">last_name</code>列中。</p><p id="ade0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">使用JOIN是组合多个表中的数据并执行更复杂查询的有效方法。</p><h1 id="93c8" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">聚合函数</h1><p id="5f02" class="pw-post-body-paragraph kg kh it ki b kj me kl km kn mf kp kq kr nj kt ku kv nk kx ky kz nl lb lc ld im bi translated">聚合函数用于对数据执行计算并返回单个结果。常见的聚合函数包括求和、AVG和计数。</p><ul class=""><li id="a2f6" class="mc md it ki b kj kk kn ko kr nm kv nn kz no ld mj mk ml mm bi translated">下面是一个使用SUM函数对“orders”表中的销售额进行合计的示例:</li></ul><pre class="mw mx my mz gt na mq nb bn nc nd bi"><span id="85c7" class="ne lf it mq b be nf ng l nh ni">SELECT SUM(amount) FROM orders;</span></pre><p id="7dbc" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">该语句返回<code class="fe mn mo mp mq b">amount</code>列中所有值的总和。</p><ul class=""><li id="da5d" class="mc md it ki b kj kk kn ko kr nm kv nn kz no ld mj mk ml mm bi translated">您也可以使用AVG函数来计算一组值的平均值:</li></ul><pre class="mw mx my mz gt na mq nb bn nc nd bi"><span id="2877" class="ne lf it mq b be nf ng l nh ni">SELECT AVG(amount) FROM orders;</span></pre><p id="0a1c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">该语句返回<code class="fe mn mo mp mq b">amount</code>列中所有值的平均值。</p><p id="2f8f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">COUNT函数可用于计算表中的行数或列中非空值的数量:</p><pre class="mw mx my mz gt na mq nb bn nc nd bi"><span id="b226" class="ne lf it mq b be nf ng l nh ni">SELECT COUNT(*) FROM orders;</span></pre><p id="1ab9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">该语句返回“订单”表中的总行数。</p><pre class="mw mx my mz gt na mq nb bn nc nd bi"><span id="c9bd" class="ne lf it mq b be nf ng l nh ni">SELECT COUNT(amount) FROM orders;</span></pre><p id="6dd8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">该语句返回<code class="fe mn mo mp mq b">amount</code>列中非空值的数量。</p><p id="9e9b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">还可以使用GROUP BY子句按一列或多列对聚合函数的结果进行分组。例如:</p><pre class="mw mx my mz gt na mq nb bn nc nd bi"><span id="4d7b" class="ne lf it mq b be nf ng l nh ni">SELECT COUNT(*), country FROM customers<br/>GROUP BY country;</span></pre><p id="63b7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">该语句返回每个国家的客户数量。</p><p id="8505" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">使用聚合函数是对数据执行计算并从结果中获得洞察力的有用方法。</p><h1 id="93d1" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">子查询</h1><p id="45ec" class="pw-post-body-paragraph kg kh it ki b kj me kl km kn mf kp kq kr nj kt ku kv nk kx ky kz nl lb lc ld im bi translated">子查询用于通过将SELECT语句嵌套在另一个SELECT、FROM、WHERE或HAVING子句中来创建更复杂的查询。</p><ul class=""><li id="97cb" class="mc md it ki b kj kk kn ko kr nm kv nn kz no ld mj mk ml mm bi translated">以下是在SELECT子句中使用子查询的示例:</li></ul><pre class="mw mx my mz gt na mq nb bn nc nd bi"><span id="140a" class="ne lf it mq b be nf ng l nh ni">SELECT first_name, last_name<br/>FROM customers<br/>WHERE customer_id = (SELECT customer_id FROM orders WHERE amount &gt; 100);</span></pre><p id="fc57" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">该语句为下了一个<code class="fe mn mo mp mq b">amount</code>大于100的订单的客户检索<code class="fe mn mo mp mq b">first_name</code>和<code class="fe mn mo mp mq b">last_name</code>。WHERE子句中的子查询为这些订单选择<code class="fe mn mo mp mq b">customer_id</code>，外部查询使用该信息检索相应的客户详细信息。</p><ul class=""><li id="03c4" class="mc md it ki b kj kk kn ko kr nm kv nn kz no ld mj mk ml mm bi translated">还可以在FROM子句中使用子查询来创建临时表，以便在主查询中使用:</li></ul><pre class="mw mx my mz gt na mq nb bn nc nd bi"><span id="85ba" class="ne lf it mq b be nf ng l nh ni">SELECT * FROM (SELECT * FROM customers WHERE city = 'New York') AS temp;</span></pre><p id="5d28" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">该语句创建一个名为“temp”的临时表，其中包含来自纽约市的所有客户。然后，主查询从这个临时表中选择所有列。</p><p id="3e50" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">子查询可用于创建更复杂的查询，并从数据库中提取特定数据。</p><h1 id="8475" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">联合和联合所有</h1><p id="1fbc" class="pw-post-body-paragraph kg kh it ki b kj me kl km kn mf kp kq kr nj kt ku kv nk kx ky kz nl lb lc ld im bi translated">UNION和UNION ALL用于将多个SELECT语句的结果组合成一个结果集。</p><p id="df65" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">UNION组合两个或多个SELECT语句的结果，并删除任何重复的行。</p><ul class=""><li id="7023" class="mc md it ki b kj kk kn ko kr nm kv nn kz no ld mj mk ml mm bi translated">下面是一个使用UNION的例子:</li></ul><pre class="mw mx my mz gt na mq nb bn nc nd bi"><span id="fcfe" class="ne lf it mq b be nf ng l nh ni">SELECT * FROM customers WHERE city = 'New York'<br/>UNION<br/>SELECT * FROM customers WHERE city = 'Los Angeles';</span></pre><p id="6a54" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">该语句检索纽约市和洛杉矶市的所有客户，并删除所有重复的客户。</p><p id="d881" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">UNION ALL组合两个或多个SELECT语句的结果，并包含所有行，包括重复行。</p><ul class=""><li id="0b75" class="mc md it ki b kj kk kn ko kr nm kv nn kz no ld mj mk ml mm bi translated">下面是一个使用UNION ALL的示例:</li></ul><pre class="mw mx my mz gt na mq nb bn nc nd bi"><span id="3df5" class="ne lf it mq b be nf ng l nh ni">SELECT * FROM customers WHERE city = 'New York'<br/>UNION ALL<br/>SELECT * FROM customers WHERE city = 'Los Angeles';</span></pre><p id="9165" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">该语句检索纽约市和洛杉矶市的所有客户，并包括所有重复的客户。</p><p id="16f9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">UNION和UNION ALL对于组合多个查询的结果以及处理组合的数据非常有用。</p><h1 id="6cd2" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">空值</h1><p id="a3a0" class="pw-post-body-paragraph kg kh it ki b kj me kl km kn mf kp kq kr nj kt ku kv nk kx ky kz nl lb lc ld im bi translated">空值表示数据库中缺失或未知的数据。它们不同于零(0)或空字符串，因为它们表示没有值。</p><p id="cae4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您可以使用IS NULL和IS NOT NULL运算符来筛选查询中的空值。</p><ul class=""><li id="7240" class="mc md it ki b kj kk kn ko kr nm kv nn kz no ld mj mk ml mm bi translated">下面是一个使用IS NULL的示例:</li></ul><pre class="mw mx my mz gt na mq nb bn nc nd bi"><span id="e089" class="ne lf it mq b be nf ng l nh ni">SELECT * FROM customers WHERE last_name IS NULL;</span></pre><p id="04d4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">该语句检索所有<code class="fe mn mo mp mq b">last_name</code>为空的客户。</p><ul class=""><li id="d4d5" class="mc md it ki b kj kk kn ko kr nm kv nn kz no ld mj mk ml mm bi translated">下面是一个使用IS NOT NULL的示例:</li></ul><pre class="mw mx my mz gt na mq nb bn nc nd bi"><span id="9f89" class="ne lf it mq b be nf ng l nh ni">SELECT * FROM customers WHERE last_name IS NOT NULL;</span></pre><p id="2844" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">该语句检索所有<code class="fe mn mo mp mq b">last_name</code>不为空的客户。</p><p id="9ba3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">使用数据库时，了解空值很重要，因为它们会影响查询的结果。</p></div><div class="ab cl ob oc hx od" role="separator"><span class="oe bw bk of og oh"/><span class="oe bw bk of og oh"/><span class="oe bw bk of og"/></div><div class="im in io ip iq"><p id="a424" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">恭喜你坚持到这篇文章的结尾！现在，您应该对数据科学的七个基本SQL概念有了坚实的基础:选择、连接、聚合函数、子查询、UNION和UNION ALL以及NULL值。</p><p id="b7c5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">掌握这些概念将允许您有效地与数据库通信，并提取您分析所需的数据。但是不要止步于此——对于SQL，总是有更多的东西需要学习和实践。</p><p id="86a5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果您喜欢这篇文章，并希望了解更多数据科学内容，请务必关注我的Medium！我定期发表各种数据相关主题的文章，我很乐意与您同行。</p><p id="8bf8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下次再见，查询愉快！</p></div></div>    
</body>
</html>