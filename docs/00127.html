<html>
<head>
<title>Making an animated nav component — WotW</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">制作动画导航组件— WotW</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/making-an-animated-nav-component-wotw-e94b6bca04c4?source=collection_archive---------0-----------------------#2018-05-16">https://levelup.gitconnected.com/making-an-animated-nav-component-wotw-e94b6bca04c4?source=collection_archive---------0-----------------------#2018-05-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/54965ccd8eccab3406137dd4fd92f6a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*quFDd0msiho5Ly-Q.jpeg"/></div></div></figure><p id="fc3b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">欢迎来到“每周小部件”系列，在这里我拍摄了令人敬畏的UI/UX组件的gif或视频，并用代码将它们赋予生命。</p><blockquote class="kw kx ky"><p id="a586" class="jy jz kz ka b kb kc kd ke kf kg kh ki la kk kl km lb ko kp kq lc ks kt ku kv ij bi translated">查看本周所有的<a class="ae ld" rel="noopener ugc nofollow" target="_blank" href="https://levelup.gitconnected.com/wotw/home"> Widget文章</a>，关注gitconnected，确保你不会错过任何Widget教程。</p></blockquote><p id="f061" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">今天轮到一个有四个彩色图标按钮的导航组件了。灵感来自<a class="ae ld" href="https://uimovement.com/ui/5563/navigation-interaction/" rel="noopener ugc nofollow" target="_blank">这个提交</a>，看起来是这样的:</p><figure class="lf lg lh li gt jr gh gi paragraph-image"><div class="gh gi le"><img src="../Images/b5a9e2eece18c7006d6330af2fef13e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/0*ibTIjCvR0aMUXon5.gif"/></div></figure><h2 id="7572" class="lj lk iq bd ll lm ln dn lo lp lq dp lr kj ls lt lu kn lv lw lx kr ly lz ma mb bi translated">准备</h2><p id="eb26" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr mg kt ku kv ij bi translated">对于今天的小部件，我们将使用<a class="ae ld" href="https://vuejs.org/" rel="noopener ugc nofollow" target="_blank"> Vue.js </a>进行交互，使用<a class="ae ld" href="https://greensock.com/tweenmax" rel="noopener ugc nofollow" target="_blank"> TweenMax </a>进行动画。如果你想跟进，你也可以派生这个已经有依赖关系的<a class="ae ld" href="https://codepen.io/ederdiaz/pen/bMLbNp" rel="noopener ugc nofollow" target="_blank"> codepen模板</a>。</p><p id="c15d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们还将使用<a class="ae ld" href="https://fontawesome.com/icons?d=gallery" rel="noopener ugc nofollow" target="_blank"> FontAwesome图标</a>，因此请确保您添加了此链接来导入它们:</p><pre class="lf lg lh li gt mh mi mj mk aw ml bi"><span id="8a36" class="lj lk iq mi b gy mm mn l mo mp">&lt;link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous"&gt;</span></pre><h2 id="f0b5" class="lj lk iq bd ll lm ln dn lo lp lq dp lr kj ls lt lu kn lv lw lx kr ly lz ma mb bi translated">初始标记</h2><p id="21d7" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr mg kt ku kv ij bi translated">我们将从HTML开始。对于这个组件，我们只需要一个容器和按钮。正如我上面提到的，我们将在按钮上使用FontAwesome图标，它们与最初提交的图标不完全相同，但已经足够好了。</p><pre class="lf lg lh li gt mh mi mj mk aw ml bi"><span id="8a13" class="lj lk iq mi b gy mm mn l mo mp">&lt;div id="app"&gt;<br/>  &lt;div class="btn-container"&gt;<br/>    &lt;div class="btn"&gt;<br/>      &lt;i class="fas fa-comment"&gt;&lt;/i&gt;<br/>    &lt;/div&gt;<br/>    &lt;div class="btn"&gt;<br/>      &lt;i class="fas fa-user"&gt;&lt;/i&gt;<br/>    &lt;/div&gt;<br/>    &lt;div class="btn"&gt;<br/>      &lt;i class="fas fa-map-marker"&gt;&lt;/i&gt;<br/>    &lt;/div&gt;<br/>    &lt;div class="btn"&gt;<br/>      &lt;i class="fas fa-cog"&gt;&lt;/i&gt;<br/>    &lt;/div&gt;<br/>  &lt;/div&gt;<br/>&lt;/div&gt;</span></pre><p id="07da" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在我们应该有了四个图标，是时候让它看起来更像最终产品了。</p><h2 id="4610" class="lj lk iq bd ll lm ln dn lo lp lq dp lr kj ls lt lu kn lv lw lx kr ly lz ma mb bi translated">式样</h2><p id="c5ba" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr mg kt ku kv ij bi translated">在容器中，我们需要一个背景颜色，我现在使用黑色，但是稍后我们会通过编程改变它。此外，我将使用“flex”和“justify-content”来水平居中元素，然后只是一些填充来垂直对齐它们。</p><pre class="lf lg lh li gt mh mi mj mk aw ml bi"><span id="52ec" class="lj lk iq mi b gy mm mn l mo mp">.btn-container {<br/>  display: flex;<br/>  background-color: black;<br/>  <br/>  /* center vertically */<br/>  padding-top: 150px;<br/>  padding-bottom: 150px;<br/>  /* center horizontally */<br/>  justify-content: center;<br/>}</span></pre><p id="6255" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">对于按钮来说，还需要做一些工作，我们将使用“内嵌块”来渲染它们。</p><p id="1eb1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们需要定义按钮及其内容的大小，以及一些默认的颜色，然后使用边框半径使它们成为圆形，还需要一些规则来正确对齐图标:</p><pre class="lf lg lh li gt mh mi mj mk aw ml bi"><span id="0d21" class="lj lk iq mi b gy mm mn l mo mp">.btn {<br/>  display: inline-block;<br/>  cursor: pointer;<br/>  width: 50px;<br/>  height: 50px;<br/>  margin: 5px;<br/>  font-size: 25px;<br/>  color: gray;<br/>  <br/>  /*  Circles  */<br/>  border-radius: 25px;<br/>  background-color: white;<br/><br/>  /* center icons */<br/>  text-align: center;<br/>  line-height: 50px;<br/>  <br/>  /* remove touch blue highlight on mobile */<br/>  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);<br/>}</span></pre><p id="587a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在我们应该有这样的东西:</p><figure class="lf lg lh li gt jr gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/cd7ed2ccc00d437a22dd9bd3cee2a584.png" data-original-src="https://miro.medium.com/v2/resize:fit:610/format:webp/0*mQsc6VUdpJ3x5XMC.png"/></div></figure><h2 id="c165" class="lj lk iq bd ll lm ln dn lo lp lq dp lr kj ls lt lu kn lv lw lx kr ly lz ma mb bi translated">行为</h2><p id="ac0a" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr mg kt ku kv ij bi translated">现在，在我们的Vue实例中，我们将开始声明我们需要在组件上使用的数据。使用颜色选择器，我为按钮和背景选择了不同的颜色，并将它们放入一个结构中，以便我们将来可以引用它们:</p><pre class="lf lg lh li gt mh mi mj mk aw ml bi"><span id="e600" class="lj lk iq mi b gy mm mn l mo mp">new Vue({<br/>  el: '#app',<br/>  data: {<br/>    buttons: [<br/>      {icon: 'comment', bgColor: '#DE9B00', color: '#EDB205'},<br/>      {icon: 'user', bgColor: '#3EAF6F', color: '#4BD389'},<br/>      {icon: 'map-marker', bgColor: '#BE0031', color: '#E61753'},<br/>      {icon: 'cog', bgColor: '#8E00AC', color: '#B32DD2'}<br/>    ],<br/>    selectedBgColor: '#DE9B00',<br/>    selectedId: 0<br/>  },<br/>})</span></pre><p id="ed16" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">此外，我已经声明了一个变量，该变量将具有当前的背景颜色和所选按钮的id。</p><p id="c245" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">由于按钮数组中也有图标数据，我们可以更改HTML代码，用<code class="fe mr ms mt mi b">v-for</code>呈现按钮，变得更加动态:</p><pre class="lf lg lh li gt mh mi mj mk aw ml bi"><span id="624f" class="lj lk iq mi b gy mm mn l mo mp">&lt;div id="app"&gt;<br/>  &lt;div class="btn-container" :style="{'backgroundColor': selectedBgColor}"&gt;<br/>    &lt;div v-for="(button, index) in buttons" <br/>         :key="index" <br/>         @click="selectButton(index)"<br/>         :ref="`button_${index}`"<br/>         class="btn"&gt;<br/>      &lt;i :class="['fas', `fa-${button.icon}`]"&gt;&lt;/i&gt;<br/>    &lt;/div&gt;<br/>  &lt;/div&gt;<br/>&lt;/div&gt;</span></pre><p id="5931" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这段代码也已经将背景色绑定到了<code class="fe mr ms mt mi b">btn-container</code> div样式。</p><figure class="lf lg lh li gt jr gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/8ae84ac3cfe37b1cd054a7577128446c.png" data-original-src="https://miro.medium.com/v2/resize:fit:608/format:webp/0*Cif5xTVZpeKFwinM.png"/></div></figure><p id="96a0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">请注意，我们添加了一个<code class="fe mr ms mt mi b">@click</code>处理程序，它将触发一个名为<code class="fe mr ms mt mi b">selectButton</code>的函数，<code class="fe mr ms mt mi b">ref</code>属性也将帮助我们在需要激活按钮时引用它们。</p><h2 id="2377" class="lj lk iq bd ll lm ln dn lo lp lq dp lr kj ls lt lu kn lv lw lx kr ly lz ma mb bi translated">单击按钮</h2><p id="9f20" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr mg kt ku kv ij bi translated">我们需要首先在Vue实例中声明“selectButton”方法:</p><pre class="lf lg lh li gt mh mi mj mk aw ml bi"><span id="1958" class="lj lk iq mi b gy mm mn l mo mp">// ... data,<br/>  methods: {<br/>    selectButton (id) {<br/>      this.selectedId = id<br/>    }<br/>  }</span></pre><p id="c72d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在这之后，<code class="fe mr ms mt mi b">selectedId</code>将在每次点击时改变到<code class="fe mr ms mt mi b">0-3</code>之间的值，但这似乎对我们的组件没有任何影响。我们需要开始制作动画了！</p><p id="d30a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们开始制作最简单的部分，背景色。为此，我们需要创建一个计算属性来获取选中的按钮数据，这将帮助我们获得相应的背景颜色。<br/>稍后当我们改变<code class="fe mr ms mt mi b">selectedId</code>时，我们将能够将颜色补间到当前选择的颜色。</p><pre class="lf lg lh li gt mh mi mj mk aw ml bi"><span id="1320" class="lj lk iq mi b gy mm mn l mo mp">// ... data<br/> methods: {<br/>    selectButton (id) {<br/>      this.selectedId = id<br/>      this.animateBgColor()<br/>    },<br/>    animateBgColor () {<br/>      TweenMax.to(this, 0.2, {<br/>        selectedBgColor: this.selectedButton.bgColor<br/>      })<br/>    }<br/>  },<br/>  computed: {<br/>    selectedButton () {<br/>      return this.buttons[this.selectedId]<br/>    }<br/>  }</span></pre><p id="9627" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们应该有一个工作过渡的背景色时，点击任何按钮。</p><h2 id="79a4" class="lj lk iq bd ll lm ln dn lo lp lq dp lr kj ls lt lu kn lv lw lx kr ly lz ma mb bi translated">制作按钮动画</h2><p id="2d7c" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr mg kt ku kv ij bi translated">按钮的动画将会更复杂一些。首先，我们需要保存对先前激活的按钮和下一个要激活的按钮的引用。</p><p id="d7d6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为此，我们可以在设置新按钮之前使用<code class="fe mr ms mt mi b">$refs</code>和所选按钮的索引，如下所示:</p><pre class="lf lg lh li gt mh mi mj mk aw ml bi"><span id="57c0" class="lj lk iq mi b gy mm mn l mo mp">// ... data<br/>  methods: {<br/>    selectButton (id) {<br/>      const previousButton = this.$refs[`button_${this.selectedId}`]<br/>      const nextButton = this.$refs[`button_${id}`]<br/>      // ... rest of code</span></pre><p id="9283" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在我们有了这些引用，我们应该能够运行两个方法，一个停用上一个按钮，另一个激活新按钮:</p><pre class="lf lg lh li gt mh mi mj mk aw ml bi"><span id="23c6" class="lj lk iq mi b gy mm mn l mo mp">// ... methods<br/>    selectButton (id) {<br/>      const previousButton = this.$refs[`button_${this.selectedId}`]<br/>      const nextButton = this.$refs[`button_${id}`]<br/>      <br/>      this.selectedId = id<br/>      this.animateBgColor()<br/>      <br/>      this.animateOut(previousButton)<br/>      this.animateIn(nextButton)<br/>    },<br/>    animateIn (btn) {      <br/>      // TODO activate button<br/>    },<br/>    animateOut (btn) {<br/>      // TODO deactivate button<br/>    }</span></pre><p id="d4fe" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在编写这部分代码之前，我们需要停下来想想按钮应该如何动画。如果我们分析gif，按钮动画可以分成两个变化，一个是按钮和图标的颜色，另一个是按钮的宽度。</p><p id="b7a5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">颜色转换看起来非常简单，按钮的背景在不活动时变成白色，在活动时变成<code class="fe mr ms mt mi b">color</code>属性。对于图标，它只是在<code class="fe mr ms mt mi b">gray</code>和<code class="fe mr ms mt mi b">white</code>之间变化。</p><p id="2389" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">有趣的是按钮宽度动画，它看起来有点“弹性”，因为它在结束时有点来回。</p><p id="f2cc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">玩<a class="ae ld" href="https://greensock.com/ease-visualizer" rel="noopener ugc nofollow" target="_blank"> GSAP放松可视化</a>我带来了与原始动画的放松非常匹配的道具。现在我们可以完成对<code class="fe mr ms mt mi b">animateIn</code>和<code class="fe mr ms mt mi b">animateOut</code>方法的编码了:</p><pre class="lf lg lh li gt mh mi mj mk aw ml bi"><span id="4c58" class="lj lk iq mi b gy mm mn l mo mp">// ... methods<br/>   animateIn (btn) {      <br/>      // animate icon &amp; bg color<br/>      TweenMax.to(btn, 0.3, {<br/>        backgroundColor: this.selectedButton.color,<br/>        color: 'white'<br/>      })<br/>                  <br/>      // animate button width<br/>      TweenMax.to(btn, 0.7, {<br/>        width: 100,<br/>        ease: Elastic.easeOut.config(1, 0.5)<br/>      })<br/>    },<br/>    animateOut (btn) {<br/>      // animate icon color<br/>      TweenMax.to(btn, 0.3, {<br/>        backgroundColor: 'white',<br/>        color: 'gray'<br/>      })<br/>      <br/>      // animate button width<br/>      TweenMax.to(btn, 0.7, {<br/>        width: 50,<br/>        ease: Elastic.easeOut.config(1, 0.5)<br/>      })<br/>    }<br/>  },</span></pre><p id="dea9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们快完成了，还有一个小细节。当应用程序启动时，组件看起来没有被选中的按钮。幸运的是，这可以通过调用<code class="fe mr ms mt mi b">mounted</code>钩子中的<code class="fe mr ms mt mi b">selectButton</code>方法来快速解决:</p><pre class="lf lg lh li gt mh mi mj mk aw ml bi"><span id="b4ad" class="lj lk iq mi b gy mm mn l mo mp">mounted () {<br/>    // initialize widget<br/>    this.selectButton(0)<br/>  }</span></pre><p id="14ae" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">而现在最后的结果！</p><figure class="lf lg lh li gt jr"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="3213" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这就是本周的<strong class="ka ir">小部件。</strong></p><p id="ee29" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你渴望更多，你可以检查其他WotW: <br/> — <a class="ae ld" href="http://ederdiaz.com/blog/2018/05/09/how-i-made-a-fluid-layout-component-wotw/" rel="noopener ugc nofollow" target="_blank">流体布局</a> <br/> — <a class="ae ld" href="http://ederdiaz.com/blog/2018/04/25/how-to-make-an-animated-wizard-component-wotw/" rel="noopener ugc nofollow" target="_blank">向导</a> <br/> — <a class="ae ld" href="http://ederdiaz.com/blog/2018/04/18/animated-card-slider-with-vue-gsap/" rel="noopener ugc nofollow" target="_blank">动画卡片滑块</a></p><p id="09b6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">另外，如果你想看下周的某个小部件，可以在评论区发表。</p><p id="188f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">下周见，关注<a class="ae ld" href="https://levelup.gitconnected.com" rel="noopener ugc nofollow" target="_blank"> gitconnected </a>获取每周小工具！</p></div><div class="ab cl mx my hu mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="ij ik il im in"><p id="cbe8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="kz">最初发表于</em> <a class="ae ld" href="http://ederdiaz.com/blog/2018/05/15/making-an-animated-nav-component-wotw/" rel="noopener ugc nofollow" target="_blank"> <em class="kz">埃德尔迪亚兹</em> </a> <em class="kz">。<br/>请</em> <a class="ae ld" href="https://ko-fi.com/ederdiaz" rel="noopener ugc nofollow" target="_blank"> <em class="kz">给我买杯咖啡，支持我写这些帖子！</em> </a></p></div></div>    
</body>
</html>