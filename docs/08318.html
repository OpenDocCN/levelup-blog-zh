<html>
<head>
<title>Tip of the Day: Manager Classes &amp; Singleton Pattern in Unity</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">日积月累:Unity中的管理类和单例模式</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/tip-of-the-day-manager-classes-singleton-pattern-in-unity-1bf3aafe9430?source=collection_archive---------1-----------------------#2021-04-21">https://levelup.gitconnected.com/tip-of-the-day-manager-classes-singleton-pattern-in-unity-1bf3aafe9430?source=collection_archive---------1-----------------------#2021-04-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="98ff" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在创建项目时，您会遇到这样的情况:您想要管理不同的玩家状态，控制游戏的音频，或者，例如，控制加载场景或控制UI。</p><p id="f7ee" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这些情况中的每一种(以及更多)都可以放在一个单独的管理器类中。比如:GameManager、UIManager、AudioManager等。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi kl"><img src="../Images/383a6058040d4c86923a684193a2a137.png" data-original-src="https://miro.medium.com/v2/resize:fit:318/format:webp/1*NnjL0czYw706tNCt1fLb9A.jpeg"/></div></figure><p id="dafa" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">通常这些管理器类在你的游戏中是持久的，它们会想要与游戏中的不同脚本进行通信。你可以让gameObject实例在你想使用它们的每个脚本中保存这些管理器，但是这样你会陷入太多的依赖，你的代码可能会容易出错。</p><p id="bbb5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了实现这一点，我们可以使用单例模式。这使得其他类可以很容易地访问Manager类，并且它们可以很容易地获得全局变量和方法。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi kt"><img src="../Images/355bde6ed1fd4cbdc11cd742d2dd8c0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eK_6YFRW8nSTjezvVIhPUQ.jpeg"/></div></div></figure><blockquote class="ky kz la"><p id="8a63" class="jn jo lb jp b jq jr js jt ju jv jw jx lc jz ka kb ld kd ke kf le kh ki kj kk ij bi translated">单一模式</p></blockquote><p id="5b2b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在manager类中，首先创建一个manager的私有静态实例，并为该实例创建一个公共getter。使它成为静态的将会被其他脚本访问。最后，在Awake方法中，将私有实例设置为这个manager类。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi lf"><img src="../Images/65027508d98ad3d52119f067d7037fa4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BptGhqUZimhzyy2734fBgg.png"/></div></div></figure><p id="c61a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，为了从其他脚本访问这个manager类，只需调用public实例。</p><pre class="km kn ko kp gt lg lh li lj aw lk bi"><span id="d403" class="ll lm iq lh b gy ln lo l lp lq">GameManager.Instance.(your public variable or public method);</span></pre><p id="568d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">但是必须为每一个模式输入这个单例可能会很乏味，那么我们如何简化它呢？</p><p id="5bcf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们可以创建一个单独的脚本来保存单例代码，然后管理器类可以继承这个单例类。因此，创建一个C#单例脚本。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi lr"><img src="../Images/08c602945f93b9f6a34a858e55ad6375.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mxVyLpJVg2FQIo6PprhqwA.png"/></div></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk translated">继承时将使用“T”组件来检查脚本组件。</figcaption></figure><p id="1a4d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，当创建管理器类时，只需继承单例脚本，就一切就绪了，您的管理器类现在是单例的了</p><pre class="km kn ko kp gt lg lh li lj aw lk bi"><span id="776a" class="ll lm iq lh b gy ln lo l lp lq">public class GameManager : Singleton&lt;GameManager&gt;<br/>{<br/>   void Start()<br/>    {<br/>    }<br/>   void Update()<br/>    {<br/>    }<br/>}</span></pre></div></div>    
</body>
</html>