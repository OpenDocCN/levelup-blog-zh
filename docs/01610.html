<html>
<head>
<title>What is the Difference Between Function Literal and Values in Scala</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Scala中函数文字和值的区别是什么</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/what-is-the-difference-between-function-literal-and-values-in-scala-7cced2e3867c?source=collection_archive---------17-----------------------#2020-01-15">https://levelup.gitconnected.com/what-is-the-difference-between-function-literal-and-values-in-scala-7cced2e3867c?source=collection_archive---------17-----------------------#2020-01-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/f85a811beb4ef417e1def6a140b9b986.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*tS6GnfFh_EGWNBGE.png"/></div></div></figure><p id="9b32" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">几周前，我在尝试使用部分应用的函数时遇到了一个bug。</p><p id="5462" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">部分应用的函数是部分创建的函数，留下一些未应用的参数。当您调用该函数时，您可以声明一些参数，并且在需要时提供左边的参数。</p><p id="1a64" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">以此为例:</p><pre class="kz la lb lc gt ld le lf lg aw lh bi"><span id="54c5" class="li lj it le b gy lk ll l lm ln">def add(a: Int, b: Int): Int = a + b </span><span id="04cb" class="li lj it le b gy lo ll l lm ln">val addition = add _</span><span id="f1da" class="li lj it le b gy lo ll l lm ln">addition(1,2) // 3</span></pre><p id="c931" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">然而，当我试图在函数文本中这样做时:</p><pre class="kz la lb lc gt ld le lf lg aw lh bi"><span id="0df5" class="li lj it le b gy lk ll l lm ln">val add = (a:Int,b:Int) =&gt; a+b<br/>// add: (Int, Int) =&gt; Int = $$Lambda$844/1630986748@1736c1e4</span><span id="df90" class="li lj it le b gy lo ll l lm ln">val addition = add _<br/>// addition: () =&gt; (Int, Int) =&gt; Int = $$Lambda$845/1518517336@4aab7195</span><span id="7df3" class="li lj it le b gy lo ll l lm ln">addition(1,2) // this doesn't work</span><span id="1e69" class="li lj it le b gy lo ll l lm ln">addition()(1,2) // 3</span></pre><p id="5f89" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这让我想知道函数字面量和函数值的区别。</p><p id="d619" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在Scala的书中，函数文字和函数值的定义是在编译和运行时。</p><p id="ad0d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">For函数literal(匿名函数或val函数)将被编译成Function2 trait。通常，他们用apply方法捕捉它，该方法也作为def函数(value函数)运行。</p><p id="7095" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">因此，如果你把一个val赋值为匿名函数，Scala会把它转换成一个应用了函数的singleton对象。</p><pre class="kz la lb lc gt ld le lf lg aw lh bi"><span id="f535" class="li lj it le b gy lk ll l lm ln">final class anonFun extends scala.runtime.AbstractFunction2 {<br/>    final def apply(a: Int, b:Int) = a + b<br/>}</span><span id="3899" class="li lj it le b gy lo ll l lm ln">val add = new anonFun();</span></pre><p id="c6cb" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">当您将函数文字作为<code class="fe lp lq lr le b">a</code>赋给另一个变量时，该变量也将由具有另一个<code class="fe lp lq lr le b">apply</code>方法的另一个对象创建，使其成为一个高阶函数<code class="fe lp lq lr le b">() =&gt; () =&gt; something</code>。</p><p id="633e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">但是Scala中的函数值(def function)是作为Java中的常规方法。因此，当您编写<code class="fe lp lq lr le b">def</code>并将其赋给另一个变量时，该变量将获得访问该类中其他成员变量的方法。因此，编译器不会创建一个<code class="fe lp lq lr le b">Function2</code>特征和一个应用方法。</p><p id="5a15" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">它创建对象的实例方法。</p><pre class="kz la lb lc gt ld le lf lg aw lh bi"><span id="3330" class="li lj it le b gy lk ll l lm ln">package &lt;empty&gt; {<br/>  object Main extends Object {<br/>    def add(a: Int, b:Int): Int = a.+(b);<br/>    def &lt;init&gt;(): Main.type = {<br/>      Main.super.&lt;init&gt;();<br/>      ()<br/>    }<br/>  }<br/>}</span></pre><h1 id="3ced" class="ls lj it bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">主要外卖:</h1><ul class=""><li id="2059" class="mp mq it kd b ke mr ki ms km mt kq mu ku mv ky mw mx my mz bi translated">函数文字(val function)在运行时实例化为函数值时编译成类。<em class="na">成为物体本身</em>。</li><li id="b980" class="mp mq it kd b ke nb ki nc km nd kq ne ku nf ky mw mx my mz bi translated">如果将另一个变量作为部分应用的函数赋给一个函数文本，它会创建另一个对象文本，其中包含一个apply方法。因此，它创建了一个高阶函数。</li><li id="d3b6" class="mp mq it kd b ke nb ki nc km nd kq ne ku nf ky mw mx my mz bi translated">如果使用函数值，def函数会编译成Java中的方法。所以变成了一个对象的<code class="fe lp lq lr le b">instance method</code>。</li></ul><h1 id="0b08" class="ls lj it bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">喜欢这篇文章？</h1><p id="3fda" class="pw-post-body-paragraph kb kc it kd b ke mr kg kh ki ms kk kl km ng ko kp kq nh ks kt ku ni kw kx ky im bi translated">注册我的<a class="ae nj" href="https://edward-huang.com/subscribe/" rel="noopener ugc nofollow" target="_blank">简讯</a>每周获取此内容！</p></div><div class="ab cl nk nl hx nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="im in io ip iq"><p id="6981" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><em class="na">原载于</em><a class="ae nj" href="https://edward-huang.com/programming/tech/scala/software-development/2020/01/14/what-is-the-difference-between-function-literal-and-values-in-scala/" rel="noopener ugc nofollow" target="_blank"><em class="na">https://edward-huang.com</em></a><em class="na">。</em></p></div></div>    
</body>
</html>