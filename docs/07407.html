<html>
<head>
<title>Animate a social share button using Implicit animations in Flutter</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Flutter中使用隐式动画制作社交分享按钮的动画</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/animate-a-social-share-button-using-implicit-animations-in-flutter-9b2b86dd6594?source=collection_archive---------18-----------------------#2021-02-15">https://levelup.gitconnected.com/animate-a-social-share-button-using-implicit-animations-in-flutter-9b2b86dd6594?source=collection_archive---------18-----------------------#2021-02-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/0f469882dec5df3135003d12d0fcbed1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w-_lrT1LMn3ZZaqqWaknnA.jpeg"/></div></div></figure><p id="913d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">好的动画使界面友好且富有创造性。用Flutter添加动画是一种福气！在Flutter中，有两种方法可以添加动画:</p><ol class=""><li id="b9ce" class="kw kx iq ka b kb kc kf kg kj ky kn kz kr la kv lb lc ld le bi translated">隐式动画</li><li id="44f7" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">明确的动画</li></ol><p id="cce9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">隐式动画</strong>隐藏内部复杂性，替你管理动画。另一方面，<strong class="ka ir">显式动画</strong>提供了更多的控制和定制，但有一个学习曲线。</p><p id="9e7b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这篇文章是关于利用隐式动画和创建如下所示的社交分享按钮动画</p><figure class="ll lm ln lo gt jr gh gi paragraph-image"><div class="gh gi lk"><img src="../Images/3a73ab47ac7935048115304ffc6e4a25.png" data-original-src="https://miro.medium.com/v2/resize:fit:948/1*1IPbJK6vVWkk3aQ-j-X_rg.gif"/></div></figure><h1 id="ad6f" class="lp lq iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">控制隐式动画:</h1><p id="dcc9" class="pw-post-body-paragraph jy jz iq ka b kb mn kd ke kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ij bi translated">为了控制你的动画，<code class="fe ms mt mu mv b">ImplicitlyAnimatedWidget</code>为你提供了3个属性:</p><ol class=""><li id="272d" class="kw kx iq ka b kb kc kf kg kj ky kn kz kr la kv lb lc ld le bi translated"><code class="fe ms mt mu mv b">duration</code> -动画的长度</li><li id="e81e" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated"><code class="fe ms mt mu mv b">curve</code> -给定持续时间内动画的变化率(<a class="ae mw" href="https://api.flutter.dev/flutter/animation/Curves-class.html" rel="noopener ugc nofollow" target="_blank">曲线列表</a>)</li><li id="07fa" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated"><code class="fe ms mt mu mv b">onEnd</code> -动画完成后调用的回调函数(可用于触发不同的动画或动画完成后移动到不同的路线)</li></ol><h1 id="808f" class="lp lq iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">让我们编码吧！</h1><p id="afbf" class="pw-post-body-paragraph jy jz iq ka b kb mn kd ke kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ij bi translated">考虑下面的代码片段:</p><figure class="ll lm ln lo gt jr"><div class="bz fp l di"><div class="mx my l"/></div><figcaption class="mz na gj gh gi nb nc bd b be z dk translated">分享_按钮.镖</figcaption></figure><p id="53a5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">势不可挡？不要担心，让我们试着用一个部件图来可视化上面的代码</p><figure class="ll lm ln lo gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nd"><img src="../Images/897cdac48a3e8c74dc53b67bfbe04ace.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Nib3s1s1IikoBLu9FBnglg.png"/></div></div><figcaption class="mz na gj gh gi nb nc bd b be z dk translated">小部件图</figcaption></figure><p id="18a8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Flutter的美妙之处在于一切都可以分解成小部件。让我们将整个小部件图分成3个部分，逐一研究每个小部件。</p><h2 id="6106" class="ne lq iq bd lr nf ng dn lv nh ni dp lz kj nj nk md kn nl nm mh kr nn no ml np bi translated">堆</h2><blockquote class="nq nr ns"><p id="4668" class="jy jz nt ka b kb kc kd ke kf kg kh ki nu kk kl km nv ko kp kq nw ks kt ku kv ij bi translated">相对于其盒子的边缘定位其子部件的小部件。</p></blockquote><p id="70a7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe ms mt mu mv b">Stack</code>在我们的例子中充当父部件。</p><p id="321b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果您想以简单的方式重叠几个子元素，那么Stack非常有用。我们已经堆叠了<code class="fe ms mt mu mv b">AnimatedContainer</code>(第1部分)<code class="fe ms mt mu mv b">Container</code>(第2部分)和<code class="fe ms mt mu mv b">AnimatedOpacity</code>(第3部分)，我们将在接下来讨论。</p><h1 id="18c5" class="lp lq iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">第一部分</h1><figure class="ll lm ln lo gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nx"><img src="../Images/a604be7cb3e60b21cfcc96cf0dab112b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p7U7oXvFmTHVdb5MrgqNTw.png"/></div></div><figcaption class="mz na gj gh gi nb nc bd b be z dk translated">第一部分。</figcaption></figure><h2 id="7a34" class="ne lq iq bd lr nf ng dn lv nh ni dp lz kj nj nk md kn nl nm mh kr nn no ml np bi translated">动画容器</h2><p id="9fba" class="pw-post-body-paragraph jy jz iq ka b kb mn kd ke kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ij bi translated"><code class="fe ms mt mu mv b">AnimatedContainer</code>顾名思义就是动画版的<a class="ae mw" href="https://api.flutter.dev/flutter/widgets/Container-class.html" rel="noopener ugc nofollow" target="_blank">容器</a>在一段时间内逐渐改变其值。</p><p id="8d98" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae mw" href="https://api.flutter.dev/flutter/widgets/AnimatedContainer-class.html" rel="noopener ugc nofollow" target="_blank"> AnimatedContainer </a>将使用提供的<code class="fe ms mt mu mv b">curve</code>和<code class="fe ms mt mu mv b">duration</code>在属性的新旧值之间自动动画。</p><pre class="ll lm ln lo gt ny mv nz oa aw ob bi"><span id="2e06" class="ne lq iq mv b gy oc od l oe of">AnimatedContainer(<br/>          duration: const Duration(milliseconds: 350),<br/>          curve: Curves.fastOutSlowIn,<br/>          width: isOpen ? 240 : 48,<br/>          height: 48,<br/>          decoration: ShapeDecoration(<br/>            color: Colors.grey[400],<br/>            shape: StadiumBorder(),<br/>          ),<br/>        )</span></pre><p id="efd1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你看，在我们的例子中，我们有一个灰色的盒子，里面装着Twitter、脸书和Instagram的股票期权。根据它的打开或关闭状态，我们使用曲线<code class="fe ms mt mu mv b">fastOutSlowIn</code>将宽度更改为<code class="fe ms mt mu mv b">240</code>或<code class="fe ms mt mu mv b">48</code>，并在<code class="fe ms mt mu mv b">350</code>毫秒的时间内将它动画化。</p></div><div class="ab cl og oh hu oi" role="separator"><span class="oj bw bk ok ol om"/><span class="oj bw bk ok ol om"/><span class="oj bw bk ok ol"/></div><div class="ij ik il im in"><h1 id="f5d8" class="lp lq iq bd lr ls on lu lv lw oo ly lz ma op mc md me oq mg mh mi or mk ml mm bi translated">第二部分</h1><figure class="ll lm ln lo gt jr gh gi paragraph-image"><div class="gh gi os"><img src="../Images/96354dad3efff410c8593e0b15de2d32.png" data-original-src="https://miro.medium.com/v2/resize:fit:1052/format:webp/1*aTxOVBkA_Za40zr1iRFqGA.png"/></div><figcaption class="mz na gj gh gi nb nc bd b be z dk translated">第二部分</figcaption></figure><h2 id="910c" class="ne lq iq bd lr nf ng dn lv nh ni dp lz kj nj nk md kn nl nm mh kr nn no ml np bi translated">容器</h2><blockquote class="nq nr ns"><p id="e834" class="jy jz nt ka b kb kc kd ke kf kg kh ki nu kk kl km nv ko kp kq nw ks kt ku kv ij bi translated">一个方便的小部件，结合了常见的绘画、定位和大小调整小部件。</p></blockquote><p id="ab13" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们使用<code class="fe ms mt mu mv b">Container</code>小部件来添加一个白色的圆形容器，它包装了我们接下来要讨论的<code class="fe ms mt mu mv b">AnimatedCrossFade</code>小部件。</p><pre class="ll lm ln lo gt ny mv nz oa aw ob bi"><span id="9b81" class="ne lq iq mv b gy oc od l oe of">Container(<br/>  width: 40,<br/>  margin: <em class="nt">const </em>EdgeInsets.only(left: 4),<br/>  decoration: BoxDecoration(<br/>    color: Colors.<em class="nt">white</em>,<br/>    shape: BoxShape.circle,<br/>  ),<br/>  child: AnimatedCrossFade(<br/>  ...</span></pre><h2 id="746a" class="ne lq iq bd lr nf ng dn lv nh ni dp lz kj nj nk md kn nl nm mh kr nn no ml np bi translated">动画交叉渐变</h2><blockquote class="nq nr ns"><p id="ba2a" class="jy jz nt ka b kb kc kd ke kf kg kh ki nu kk kl km nv ko kp kq nw ks kt ku kv ij bi translated">一个小部件，在两个给定的孩子之间交叉淡入淡出，并在他们的大小之间自动显示。</p></blockquote><p id="97db" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">对于我们的社交共享小部件的打开和关闭状态，我们需要显示一个共享图标或跨图标按钮。为了实现切换过渡，我们使用了<code class="fe ms mt mu mv b">AnimatedCrossFade</code>小部件。</p><pre class="ll lm ln lo gt ny mv nz oa aw ob bi"><span id="50bc" class="ne lq iq mv b gy oc od l oe of">AnimatedCrossFade(<br/>  duration: <em class="nt">const </em>Duration(milliseconds: 450),<br/>  firstChild: IconButton(<br/>    icon: Icon(Icons.<em class="nt">share</em>),<br/>    onPressed: () =&gt; _toggleShare(),<br/>  ),<br/>  secondChild: IconButton(<br/>    icon: Icon(Icons.<em class="nt">close</em>),<br/>    onPressed: () =&gt; _toggleShare(),<br/>  ),<br/>  crossFadeState: !isOpen<br/>      ? CrossFadeState.showFirst<br/>      : CrossFadeState.showSecond,<br/>),</span></pre><h2 id="93cd" class="ne lq iq bd lr nf ng dn lv nh ni dp lz kj nj nk md kn nl nm mh kr nn no ml np bi translated">图标按钮</h2><p id="91af" class="pw-post-body-paragraph jy jz iq ka b kb mn kd ke kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ij bi translated">因为我们需要在点击时切换打开和关闭状态，所以我们使用了<code class="fe ms mt mu mv b">IconButton</code>小部件。在<code class="fe ms mt mu mv b">onPressed</code>回调时，我们通过将<code class="fe ms mt mu mv b">isOpen</code>的值更改为<code class="fe ms mt mu mv b">true</code>或<code class="fe ms mt mu mv b">setState</code>内的<code class="fe ms mt mu mv b">false</code>来切换打开和关闭状态</p></div><div class="ab cl og oh hu oi" role="separator"><span class="oj bw bk ok ol om"/><span class="oj bw bk ok ol om"/><span class="oj bw bk ok ol"/></div><div class="ij ik il im in"><h1 id="0cf3" class="lp lq iq bd lr ls on lu lv lw oo ly lz ma op mc md me oq mg mh mi or mk ml mm bi translated">第三部分</h1><figure class="ll lm ln lo gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ot"><img src="../Images/1bb84edeabfc443d8fd6a1619cfc939a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oMjH68UrD7Jh1XXikpP7Iw.png"/></div></div><figcaption class="mz na gj gh gi nb nc bd b be z dk translated">第三部分</figcaption></figure><h2 id="63ca" class="ne lq iq bd lr nf ng dn lv nh ni dp lz kj nj nk md kn nl nm mh kr nn no ml np bi translated">动态容量</h2><blockquote class="nq nr ns"><p id="2427" class="jy jz nt ka b kb kc kd ke kf kg kh ki nu kk kl km nv ko kp kq nw ks kt ku kv ij bi translated"><code class="fe ms mt mu mv b">AnimatedOpacity</code>每当给定的不透明度改变时，在给定的持续时间内自动过渡子对象的不透明度。</p></blockquote><p id="b4f5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你仔细观察我们的例子，你会发现我们的分享项目(Twitter、脸书和Instagram)已经不透明了</p><p id="f712" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们通过使用<code class="fe ms mt mu mv b">AnimatedOpacity</code>小部件并根据打开或关闭状态将不透明度更改为<code class="fe ms mt mu mv b">1</code>或<code class="fe ms mt mu mv b">0</code>来实现这一点。</p><pre class="ll lm ln lo gt ny mv nz oa aw ob bi"><span id="b322" class="ne lq iq mv b gy oc od l oe of">AnimatedOpacity(<br/>  duration: <em class="nt">const </em>Duration(milliseconds: 450),<br/>  opacity: isOpen ? 1 : 0,<br/>  child: Container(<br/>  ...</span></pre><h2 id="ea0d" class="ne lq iq bd lr nf ng dn lv nh ni dp lz kj nj nk md kn nl nm mh kr nn no ml np bi translated">容器</h2><p id="5352" class="pw-post-body-paragraph jy jz iq ka b kb mn kd ke kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ij bi translated">为了布局3个分享选项——Twitter、脸书和Instagram，我们使用了另一个<code class="fe ms mt mu mv b">Container</code>小工具。</p><pre class="ll lm ln lo gt ny mv nz oa aw ob bi"><span id="6de8" class="ne lq iq mv b gy oc od l oe of">Container(<br/>  width: 240,<br/>  padding: <em class="nt">const </em>EdgeInsets.only(left: 40),<br/>  child: Row(<br/>  ...</span></pre><h2 id="0bb3" class="ne lq iq bd lr nf ng dn lv nh ni dp lz kj nj nk md kn nl nm mh kr nn no ml np bi translated">排</h2><blockquote class="nq nr ns"><p id="c02c" class="jy jz nt ka b kb kc kd ke kf kg kh ki nu kk kl km nv ko kp kq nw ks kt ku kv ij bi translated">以水平数组显示其子级的小部件。</p></blockquote><p id="9887" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为了调整我们的3个股票期权，我们使用了<code class="fe ms mt mu mv b">Row</code>小部件，为了平均分配空间，我们将<code class="fe ms mt mu mv b">mainAxisAlignment</code>设置为<code class="fe ms mt mu mv b">MainAxisAlignment.spaceAround</code></p><pre class="ll lm ln lo gt ny mv nz oa aw ob bi"><span id="ae61" class="ne lq iq mv b gy oc od l oe of">Row(<br/>  mainAxisAlignment: MainAxisAlignment.spaceAround,<br/>  children: [<br/>    IconButton(<br/>      icon: Icon(AntDesign.<em class="nt">twitter</em>),<br/>      onPressed: () {},<br/>    ),<br/>    IconButton(<br/>      icon:Icon(AntDesign.<em class="nt">facebook_square</em>),<br/>      onPressed: () {},<br/>    ),<br/>    IconButton(<br/>      icon: Icon(AntDesign.<em class="nt">instagram</em>),<br/>      onPressed: () {},<br/>    ),<br/>  ],<br/>),</span></pre><h2 id="738b" class="ne lq iq bd lr nf ng dn lv nh ni dp lz kj nj nk md kn nl nm mh kr nn no ml np bi translated">图标按钮</h2><p id="bdee" class="pw-post-body-paragraph jy jz iq ka b kb mn kd ke kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ij bi translated">我们的每一份个人股票期权都是一个<code class="fe ms mt mu mv b">IconButton</code>部件。您可以处理<code class="fe ms mt mu mv b">onPressed</code>回调来触发应用程序中的共享功能。</p></div><div class="ab cl og oh hu oi" role="separator"><span class="oj bw bk ok ol om"/><span class="oj bw bk ok ol om"/><span class="oj bw bk ok ol"/></div><div class="ij ik il im in"><p id="f401" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">瞧啊。您已经有了一个漂亮的动画共享按钮部件！</p><figure class="ll lm ln lo gt jr gh gi paragraph-image"><div class="gh gi lk"><img src="../Images/3a73ab47ac7935048115304ffc6e4a25.png" data-original-src="https://miro.medium.com/v2/resize:fit:948/1*1IPbJK6vVWkk3aQ-j-X_rg.gif"/></div></figure><p id="91f0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">谢谢你花时间滚动到最后😊</p><p id="db24" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">关注我，了解更多精彩内容。让我们连线一下- <a class="ae mw" href="https://twitter.com/satyam_saluja" rel="noopener ugc nofollow" target="_blank"> Twitter </a>、<a class="ae mw" href="https://www.linkedin.com/in/satyam04/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>或<a class="ae mw" href="https://github.com/satyam-dev" rel="noopener ugc nofollow" target="_blank"> Github </a></p><h2 id="bf7a" class="ne lq iq bd lr nf ng dn lv nh ni dp lz kj nj nk md kn nl nm mh kr nn no ml np bi translated">参考资料:</h2><div class="ou ov gp gr ow ox"><a href="https://www.raywenderlich.com/" rel="noopener  ugc nofollow" target="_blank"><div class="oy ab fo"><div class="oz ab pa cl cj pb"><h2 class="bd ir gy z fp pc fr fs pd fu fw ip bi translated">raywenderlich.com |高质量编程教程:iOS，Android，Swift，Kotlin，Flutter…</h2><div class="pe l"><h3 class="bd b gy z fp pc fr fs pd fu fw dk translated">了解iOS和Swift、Android和Kotlin &amp; Dart和Flutter开发，以及最大和最高质量的……</h3></div><div class="pf l"><p class="bd b dl z fp pc fr fs pd fu fw dk translated">www.raywenderlich.com</p></div></div><div class="pg l"><div class="ph l pi pj pk pg pl jw ox"/></div></div></a></div><div class="ou ov gp gr ow ox"><a href="https://api.flutter.dev/" rel="noopener  ugc nofollow" target="_blank"><div class="oy ab fo"><div class="oz ab pa cl cj pb"><h2 class="bd ir gy z fp pc fr fs pd fu fw ip bi translated">Flutter - Dart API文档</h2><div class="pe l"><h3 class="bd b gy z fp pc fr fs pd fu fw dk translated">Flutter API文档，用于Dart编程语言。</h3></div><div class="pf l"><p class="bd b dl z fp pc fr fs pd fu fw dk translated">api.flutter.dev</p></div></div></div></a></div></div></div>    
</body>
</html>