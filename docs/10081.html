<html>
<head>
<title>How to host your own private Packagist for free (or extremely cheap)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何免费(或极其便宜地)拥有自己的私人包装商</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-host-your-own-private-packagist-for-free-or-extremely-cheap-faf44eca3647?source=collection_archive---------5-----------------------#2021-10-24">https://levelup.gitconnected.com/how-to-host-your-own-private-packagist-for-free-or-extremely-cheap-faf44eca3647?source=collection_archive---------5-----------------------#2021-10-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="4f38" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">对于自由职业者或小公司来说，私人Packagist账户可能过于昂贵。为什么不举办自己的，免费的？</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/14c26a97142b1616e9d8b6cd0a1ee9c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5jaYvAvYlrDObFNM"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae ky" href="https://unsplash.com/@mildlee?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">小米勒</a>拍摄的照片</figcaption></figure><p id="8bf3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我不认为Composer和Packagist可以被认为是PHP历史上的一个转折点。由于能够更容易地在项目中包含包，社区聚集在一个工具周围，它很快成为PHP包管理的事实上的标准。</p><p id="f8de" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">没过多久，一个私有版本的市场就发展起来了，它允许我们托管自己的包，但不能公开发布。Packagist对此作出了回应，并创造了一种专用的Packagist产品，正是为了做到这一点——以高价安全地访问包裹。</p><p id="f25a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你能负担得起，价格是值得的，但我们这些不能或只想为个人项目或自由客户提供一些便利套餐的人怎么办？这就是我们今天要解决的问题。</p><h1 id="a168" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">为什么不直接用Packagist？</h1><p id="af07" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">在撰写本文时，Packagist提供了其私有Packagist产品的两个版本。面向€以上大型组织的自托管版本每年1，260英镑，云托管版本每月最低€49英镑，超过三个用户的每月每用户额外€14英镑。</p><p id="43d9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你需要Packagist提供的所有东西，这个价格可能正是你正在寻找的，如果是这样，你还不如放弃阅读，去注册。此外，如果我没有提到Packagist的人非常适合合作，那我就失职了，所以如果你对自己完成所有这些设置不感兴趣，<a class="ae ky" href="mailto:contact@packagist.com" rel="noopener ugc nofollow" target="_blank">可以联系他们</a>寻求一个未经宣传的单用户计划。</p><h1 id="369d" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">该项目</h1><p id="4009" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">然而，如果你像我一样，有时你想自己动手建造它。我给自己一个挑战，尽可能便宜地创建我的包存储库。在我的情况下，它不是免费的，但我会涵盖那些可选的费用，当我们到达他们。</p><p id="979d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个项目创建起来几乎不需要时间，只要你不经常使用，它可以免费托管在Heroku上。带宽成本是这类项目的杀手。</p><h1 id="f189" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">介绍Satis</h1><p id="4d70" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">Satis是一个开源的静态Composer库生成器。这是一种冗长的说法，Satis是一个程序，我们用它来生成所有必要的文件，使Composer将我们的网站识别为一个存储库。我们能手工完成所有这些吗？</p><p id="9928" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">大概吧。</p><p id="db59" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们会想要吗？</p><p id="bf1a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当然不是。我不知道你怎么想，但我完全是在自动化处理日常事务。这不就是我们建造这个的原因吗？</p><h1 id="0797" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">配置Satis</h1><p id="9f52" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">如果你像我最初一样，坚持阅读文档，设置Satis可能会令人困惑。幸运的是，你有我。</p><p id="1d73" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，我们将从创建Satis项目开始。为了使我们的部署过程简单，我们希望Satis成为我们的存储库的根——稍后将详细介绍。Composer为我们提供了一个简单明了的命令:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="8621" class="mx lw it mt b gy my mz l na nb">composer create-project composer/satis --stability=dev heroku-packagist</span></pre><p id="8ca0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">至少在撰写本文时，稳定性标志对于所有要安装的依赖项都是必不可少的。这将在您的当前目录中创建一个<code class="fe nc nd ne mt b">heroku-packagist</code>目录，其中将包含没有git存储库的项目。</p><p id="8ec9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我们开始修改项目之前，让我们创建:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="1399" class="mx lw it mt b gy my mz l na nb">cd heroku-packagist<br/>git init .<br/>git add .<br/>git commit -am"Unconfigured Satis project"</span></pre><p id="b6ef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，您应该有一个包含初始项目的主分支。我们开始配置吧，好吗？</p></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><p id="171e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="nm">喜欢这篇文章吗？</em> <a class="ae ky" href="https://travisweston.com/membership" rel="noopener ugc nofollow" target="_blank"> <em class="nm">成为会员</em> </a> <em class="nm">和</em> <a class="ae ky" href="https://travisweston.com/subscribe" rel="noopener ugc nofollow" target="_blank"> <em class="nm">订阅</em> </a> <em class="nm">获取更多类似这样的精彩内容！</em></p></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><h2 id="688d" class="mx lw it bd lx nn no dn mb np nq dp mf li nr ns mh lm nt nu mj lq nv nw ml nx bi translated">Satis配置</h2><p id="c4ad" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">Satis使用单个文件来配置静态站点的构建。因为这一个文件控制一切，它可以像你需要的那样复杂或简单。对于这个项目，我们将遵循KISS方法并保持简单，好吗？</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="0703" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们一次解决一个问题:</p><h2 id="be63" class="mx lw it bd lx nn no dn mb np nq dp mf li nr ns mh lm nt nu mj lq nv nw ml nx bi translated">名字</h2><p id="5b50" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated"><strong class="lb iu"> Name </strong>是您的Satis项目的名称。即使搜索Satis文档也会使您相信这可以是一个任意的字符串，但实际上，这个名称必须遵循与Composer包相同的命名约定。在这里，我使用我的Github用户名作为团队名称，将我们的测试包命名为<code class="fe nc nd ne mt b">heroku-packagist</code>。</p><h2 id="dfce" class="mx lw it bd lx nn no dn mb np nq dp mf li nr ns mh lm nt nu mj lq nv nw ml nx bi translated">主页</h2><p id="8505" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated"><strong class="lb iu">主页</strong>是我们将托管这些包的URL。我们还没有，但它将是我们下一步构建的Heroku应用程序的完整URL。</p><h2 id="26ea" class="mx lw it bd lx nn no dn mb np nq dp mf li nr ns mh lm nt nu mj lq nv nw ml nx bi translated">仓库</h2><p id="ba56" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated"><strong class="lb iu">储存库</strong>是一个储存库数组，我们希望将其下载并存储在我们的打包程序中。Satis将下载这些包，并为项目中需要这些包的人创建档案。</p><p id="036e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个数组的每个元素都是一个对象，至少包含字段<strong class="lb iu">类型</strong>和<strong class="lb iu"> url </strong>。这些字段通常会被设置为“vcs”和我们的Github库的URL。这个URL可以是git url或HTTPS url。</p><p id="fd85" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">或者，我们也可以在这里包含一个名称字段，其中包含包的名称。</p><h2 id="0076" class="mx lw it bd lx nn no dn mb np nq dp mf li nr ns mh lm nt nu mj lq nv nw ml nx bi translated">全部需要</h2><p id="f329" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">require-all字段告诉Satis下载软件包的所有可用版本，并为我们存储它们。如果您控制您将使用的所有项目，您可以删除它，并用格式与Composer require字段相同的Require字段替换它。</p><h2 id="4a6b" class="mx lw it bd lx nn no dn mb np nq dp mf li nr ns mh lm nt nu mj lq nv nw ml nx bi translated">档案馆</h2><p id="3336" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">archive字段接受一个带有许多可选字段的对象，但是告诉Satis在哪里创建包档案。在这个例子中，我们只使用<strong class="lb iu">目录的</strong>键来告诉Satis将档案存储在<code class="fe nc nd ne mt b">dist</code>目录中。稍后会详细介绍。</p><p id="c7bd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们已经创建了配置文件，我们可以保存它，提交到我们的存储库，然后继续到Heroku应用程序。</p><h1 id="0a43" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">创建Heroku应用程序</h1><p id="844a" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">你需要<a class="ae ky" href="https://signup.heroku.com/login" rel="noopener ugc nofollow" target="_blank">创建一个免费的Heroku账户</a>。完成后，登录并创建一个新应用。它会问你名字和国家。我们不需要将此应用程序添加到管道中。</p><p id="1484" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">创建您的应用程序后，您将看到的第一个屏幕是<strong class="lb iu">部署</strong>选项卡。在这个屏幕上，我们希望选择Github作为我们的部署方法。你被要求连接你的Github帐户，你需要这样做。</p><p id="828c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在搜索表单中输入存储库名称，然后点击search。如果我们做得对，您的存储库应该出现在表单下方，旁边有一个<strong class="lb iu"> Connect </strong>按钮。按那个按钮。</p><p id="74bf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">连接后，选择<strong class="lb iu">启用自动部署</strong>按钮，我们现在完成了Heroku的配置。您需要注意在屏幕顶部的<strong class="lb iu">打开应用</strong>按钮下链接的应用URL，并使用该URL更新您的Satis.json。之后，我们需要考虑保护我们的包裹。</p><h2 id="927a" class="mx lw it bd lx nn no dn mb np nq dp mf li nr ns mh lm nt nu mj lq nv nw ml nx bi translated">关于私有存储库的一句话</h2><p id="265f" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">这个项目的目标是创造一个免费或尽可能便宜的私人包装商。在我的项目中，我为我的包使用私有的Github库。这是4美元/月的费用，我不认为这是这个项目成本的一部分。</p><p id="4c11" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，如果你还没有订阅Github，你可以创建一个免费的Gitlab.com账户，并在那里托管你的私有库。上面详细描述的部署过程是设计用来使用Github完成的，但是您也可以安装Heroku CLI客户端并使用它进行部署。我在这里不是这么做的。</p><h1 id="ca95" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">保护您的包裹</h1><p id="40fa" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">这是这个项目中技术含量最高的部分。为了创建一个真正的私有包存储库，我们需要保护我们的包。我们可以用很多方法做到这一点，但是因为我们的目标不是创建一个销售给其他人的产品，所以我们将使用基本的Auth向我们的新静态站点添加一个简单的用户名和密码。</p><p id="3041" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了用Heroku做到这一点，我们将使用Apache2的<strong class="lb iu"> htaccess </strong>和<strong class="lb iu"> htpasswd </strong>文件。我们还将使用htaccess文件在部署后加载正确的目录，因为我们不想加载根Satis文件夹。</p><h2 id="7b4a" class="mx lw it bd lx nn no dn mb np nq dp mf li nr ns mh lm nt nu mj lq nv nw ml nx bi translated">htpasswd</h2><p id="a4d2" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">对于这个例子，我将装载一个装有<a class="ae ky" href="https://varyingvagrantvagrants.org/" rel="noopener ugc nofollow" target="_blank"> VVV </a>的流浪机器。您可以配置VVV加载您的Satis项目作为一个文件夹或创建您的文件并手动复制到您的项目根。</p><p id="c11c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，我们需要确保我们已经安装了<code class="fe nc nd ne mt b">apache2-utils</code>，因为它不是VVV默认的。</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="d946" class="mx lw it mt b gy my mz l na nb">apt install apache2-utils</span></pre><p id="7f38" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意:如果你遇到了一个<code class="fe nc nd ne mt b">dpkg</code>错误，就像我第一次这样做时遇到的一样，<a class="ae ky" href="https://askubuntu.com/questions/1109982/e-could-not-get-lock-var-lib-dpkg-lock-frontend-open-11-resource-temporari" rel="noopener ugc nofollow" target="_blank">你将需要纠正第一个</a>。</p><p id="b64e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们已经安装了Apache 2-utils，我们可以访问<code class="fe nc nd ne mt b">htpasswd</code>命令了。该命令将获取您选择的用户名，并要求输入密码，然后生成一个新的。htpasswd文件供我们使用。</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="9d16" class="mx lw it mt b gy my mz l na nb">htpasswd -c .htpasswd heroku-packagist</span></pre><p id="66fc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将在<code class="fe nc nd ne mt b">.htpasswd</code>文件中创建<code class="fe nc nd ne mt b">heroku-packagist</code>用户，出于我们的目的，为了简单起见，我使用了密码<code class="fe nc nd ne mt b">private</code>，但是您应该使用比这更安全的密码。</p><p id="425b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，将该文件复制到您的Satis项目的根目录，并提交它。</p><p id="202a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们需要使用它。</p><h2 id="abad" class="mx lw it bd lx nn no dn mb np nq dp mf li nr ns mh lm nt nu mj lq nv nw ml nx bi translated">htaccess</h2><p id="2d80" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">让Heroku为我们工作的真正关键是我们的htaccess文件。我们使用这个文件有两个目的:基本认证和使用<code class="fe nc nd ne mt b">web</code>目录作为我们的根目录，而不是项目根目录。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="940e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">看一下要点，第1–4行显示了如何启用基本身份验证，而第6–9行显示了如何使用重写规则来加载正确的目录。有很多文章讨论如何配置htaccess文件，所以我现在就不做讨论了。</p><p id="e07c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在是时候部署我们的项目了！将新的htaccess添加到存储库中，提交并推送！</p><h1 id="947f" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">部署项目</h1><p id="76b3" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">如果您还记得，在前面，我们单击了启用自动部署的按钮。在我们的推送之后，如果你查看Heroku的<strong class="lb iu">概览</strong>标签，你应该会看到一个<strong class="lb iu">最新活动</strong>提要。如果我们已经正确地完成了我们的工作，我们应该会看到一个全新的行来表达类似于<code class="fe nc nd ne mt b">your@email.com: Deploy 123abc45</code>的意思。</p><p id="10b3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果是这样的话，我们现在需要做的就是点击打开应用程序按钮。在新选项卡中，我们应该看到一个基本的身份验证登录弹出窗口。输入你选择的用户名和密码，瞧，你应该看到你的私人包装！</p><p id="da17" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果出于某种原因，您看到一行写着<strong class="lb iu"> Build failed </strong>，那么您的satis.json可能有问题。您可以在本地测试这个问题，方法是在您的机器上进行更改并运行Build命令，直到它在那里正常工作。一旦这样做了，您就可以再次将所有内容推送到您的存储库中。</p><h1 id="b94b" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">测试我们新的包存储库</h1><p id="fd5c" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">看来我们已经完成了任务。我们有Heroku免费招待我们的私人包装商！但是，如果它不安装包，它能工作吗？</p><p id="c226" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们来测试一下！</p><p id="56fe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，打开一个新文件夹，并初始化Composer:</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="d27d" class="mx lw it mt b gy my mz l na nb">composer init</span></pre><p id="9a9c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由于这只是一个测试，我们可以接受所有问题的默认设置，除非我们需要交互依赖。我们将手动操作。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="e9d6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们需要手动将我们的存储库添加到配置中的<strong class="lb iu">存储库</strong>键下。类型应该是<strong class="lb iu"> Composer，</strong>并且url应该是我们Heroku应用程序的URL。因为我们在Heroku上托管，所以我们有一个SSL密钥，这应该是我们需要的所有定制。</p><p id="8d51" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如我在例子中提到的，如果我们的包是开发包，我们将需要添加最小稳定性和首选稳定性键。但是，如果您的包不是开发包，您可以省略它们。</p><p id="d7f8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在运行composer install，应该会要求您输入用户名和密码。将用户名和密码存储在配置文件中通常不是一个好主意，但是因为我们使用的是基本的Auth，所以您也可以将它们作为一对<code class="fe nc nd ne mt b">username:password</code>添加到URL中。</p><h1 id="1092" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">结论</h1><p id="38a9" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">这就是创建一个简单的私有包存储库所需要的一切，它托管在Heroku上，在世界的任何地方都可以使用。这对于想要在具有构建管道的客户端项目上使用私有包的小团队或自由职业者来说非常好。</p><p id="5654" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最终，一个更强大的系统可能对更大的团队或机构更好。Spatie发布了一个详细的指南，使用Laravel和许可证密钥来保护这种类型的系统。这是一个很好的系统，如果你提供收费的软件包的话。如果没有，您可能会喜欢本文中基于Heroku的免费系统。</p></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><p id="1764" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你喜欢这篇文章吗？ <a class="ae ky" href="https://travisweston.com/membership" rel="noopener ugc nofollow" target="_blank"> <em class="nm">成为会员</em> </a> <em class="nm">准备好特拉维斯·韦斯顿写的所有东西——以及媒体上所有其他可用的东西。</em></p><p id="acae" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="nm">已经是会员了？</em> <a class="ae ky" href="https://travisweston.com/subscribe" rel="noopener ugc nofollow" target="_blank"> <em class="nm">订阅得到通知</em> </a> <em class="nm">特拉维斯·韦斯顿写的每一篇文章。</em></p></div></div>    
</body>
</html>