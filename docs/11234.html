<html>
<head>
<title>🔥 Building ⚛️ React Micro Frontends Monorepo with NX in 5 min</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">🔥用NX在5分钟内构建⚛️反应微前端Monorepo</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/building-%EF%B8%8F-react-micro-frontends-monorepo-with-nx-10bf564f03fe?source=collection_archive---------0-----------------------#2022-02-28">https://levelup.gitconnected.com/building-%EF%B8%8F-react-micro-frontends-monorepo-with-nx-10bf564f03fe?source=collection_archive---------0-----------------------#2022-02-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="ed3a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在本教程中，您将构建React微前端，而没有拥挤</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/322a78c86b23497b38b64cec640d4cc4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AM-PHM_9_a7zfbYmqYujWQ.png"/></div></div></figure><h1 id="e7ea" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated"><strong class="ak">内容</strong></h1><ul class=""><li id="0e3d" class="ly lz it js b jt ma jx mb kb mc kf md kj me kn mf mg mh mi bi translated"><a class="ae mj" href="#fc92" rel="noopener ugc nofollow"> <strong class="js iu">之前介绍</strong> </a></li><li id="f624" class="ly lz it js b jt mk jx ml kb mm kf mn kj mo kn mf mg mh mi bi translated"><a class="ae mj" href="#f950" rel="noopener ugc nofollow"> <strong class="js iu">简介</strong> </a></li><li id="5d6d" class="ly lz it js b jt mk jx ml kb mm kf mn kj mo kn mf mg mh mi bi translated"><a class="ae mj" href="#e43b" rel="noopener ugc nofollow"> <strong class="js iu">概念验证</strong> </a></li><li id="762a" class="ly lz it js b jt mk jx ml kb mm kf mn kj mo kn mf mg mh mi bi translated"><a class="ae mj" href="#b147" rel="noopener ugc nofollow"> <strong class="js iu">设置单一回购项目</strong> </a></li><li id="109e" class="ly lz it js b jt mk jx ml kb mm kf mn kj mo kn mf mg mh mi bi translated"><a class="ae mj" href="#f65d" rel="noopener ugc nofollow"> <strong class="js iu">配置外壳应用</strong> </a></li><li id="4c76" class="ly lz it js b jt mk jx ml kb mm kf mn kj mo kn mf mg mh mi bi translated"><a class="ae mj" href="#de09" rel="noopener ugc nofollow"> <strong class="js iu">配置远程应用</strong> </a></li><li id="b4fe" class="ly lz it js b jt mk jx ml kb mm kf mn kj mo kn mf mg mh mi bi translated"><a class="ae mj" href="#0a3b" rel="noopener ugc nofollow"> <strong class="js iu">连接微前端</strong> </a></li><li id="9445" class="ly lz it js b jt mk jx ml kb mm kf mn kj mo kn mf mg mh mi bi translated"><a class="ae mj" href="#13f8" rel="noopener ugc nofollow"> <strong class="js iu"> Github链接</strong> </a></li><li id="2407" class="ly lz it js b jt mk jx ml kb mm kf mn kj mo kn mf mg mh mi bi translated"><a class="ae mj" href="#470d" rel="noopener ugc nofollow"> <strong class="js iu">结论</strong> </a></li><li id="aa37" class="ly lz it js b jt mk jx ml kb mm kf mn kj mo kn mf mg mh mi bi translated"><a class="ae mj" href="#fdd8" rel="noopener ugc nofollow"> <strong class="js iu">了解更多</strong> </a></li></ul></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="fc92" class="la lb it bd lc ld mw lf lg lh mx lj lk ll my ln lo lp mz lr ls lt na lv lw lx bi translated">介绍前</h1><p id="3326" class="pw-post-body-paragraph jq jr it js b jt ma jv jw jx mb jz ka kb nb kd ke kf nc kh ki kj nd kl km kn im bi translated">嘿世界🌎在我们开始之前，我想对每一个和我分享❤️之爱的人说谢谢，我们已经有833个关注者了(02/22/2022)，而且我们还在快速成长。所有的帖子都是免费的，旨在提高人们对网络开发的好奇心。能量来自你的<strong class="js iu">拍手</strong>👏，<strong class="js iu">评论</strong>💬或者<a class="ae mj" href="https://easy-web.medium.com/subscribe" rel="noopener"> <strong class="js iu">订阅</strong> </a>。</p><p id="b7ff" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我是乌克兰的🇺🇦，每个人都知道现在发生了什么，如果不是这样，普京派出了整个军队来摧毁我的国家和我的人民。如果你想支持乌克兰，想赶走21世纪的希特勒。在你的社交媒体上发表意见。你也可以在下面找到捐赠链接。</p><p id="abc5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">1.通过NBU(乌克兰国家银行)的捐赠——https://lnkd.in/g32YRZPp<br/>2。Nova Ukraine，一个专注于人道主义援助的非营利组织—<a class="ae mj" href="https://novaukraine.org/" rel="noopener ugc nofollow" target="_blank">https://novaukraine.org/</a><br/>3。支持乌克兰的军事努力—<a class="ae mj" href="https://lnkd.in/gAp6WqKk" rel="noopener ugc nofollow" target="_blank">https://lnkd.in/gAp6WqKk</a></p></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="f950" class="la lb it bd lc ld mw lf lg lh mx lj lk ll my ln lo lp mz lr ls lt na lv lw lx bi translated">介绍</h1><p id="781b" class="pw-post-body-paragraph jq jr it js b jt ma jv jw jx mb jz ka kb nb kd ke kf nc kh ki kj nd kl km kn im bi translated">Nx，由于它的库，解决了微前端面临的所有主要问题:比如在微前端之间共享组件和状态。此外，Nx支持开箱即用的角度微前端原理图，让您使用命令行生成角度微前端应用程序。您可以在此处找到教程:</p><div class="ne nf gp gr ng nh"><a href="https://itnext.io/building-angular-micro-frontend-with-ngrx-state-sharing-and-nx-cli-7e9af10ebd03" rel="noopener  ugc nofollow" target="_blank"><div class="ni ab fo"><div class="nj ab nk cl cj nl"><h2 class="bd iu gy z fp nm fr fs nn fu fw is bi translated">🔥利用NgRx状态共享和NX cli构建角度微前端</h2><div class="no l"><h3 class="bd b gy z fp nm fr fs nn fu fw dk translated">如何在几乎不编码的情况下构建健壮的微前端架构；)</h3></div><div class="np l"><p class="bd b dl z fp nm fr fs nn fu fw dk translated">itnext.io</p></div></div><div class="nq l"><div class="nr l ns nt nu nq nv ky nh"/></div></div></a></div><div class="ne nf gp gr ng nh"><a href="https://itnext.io/building-beautiful-tiktok-clone-with-angular-and-micro-frontend-part-1-bdd189425695" rel="noopener  ugc nofollow" target="_blank"><div class="ni ab fo"><div class="nj ab nk cl cj nl"><h2 class="bd iu gy z fp nm fr fs nn fu fw is bi translated">🔥建造一个漂亮的抖音克隆体，有棱角和微前端</h2><div class="no l"><h3 class="bd b gy z fp nm fr fs nn fu fw dk translated">第1部分:不再有丑陋的教程，只有美丽的，真实世界的例子，通过构建抖音学习微前端</h3></div><div class="np l"><p class="bd b dl z fp nm fr fs nn fu fw dk translated">itnext.io</p></div></div><div class="nq l"><div class="nw l ns nt nu nq nv ky nh"/></div></div></a></div></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><p id="d545" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu"> ALERT </strong>:这个定制的实现有点问题，所以如果你需要更健壮的东西，看看这个版本:</p><div class="ne nf gp gr ng nh"><a rel="noopener  ugc nofollow" target="_blank" href="/building-react-micro-frontends-monorepo-with-state-management-using-nx-in-2-min-b8b04f9afee0"><div class="ni ab fo"><div class="nj ab nk cl cj nl"><h2 class="bd iu gy z fp nm fr fs nn fu fw is bi translated">🔥使用NX在2分钟内构建⚛反应微前端Monorepo和状态管理😅</h2><div class="no l"><h3 class="bd b gy z fp nm fr fs nn fu fw dk translated">甚至你的祖母也可以用NX构建react微前端</h3></div><div class="np l"><p class="bd b dl z fp nm fr fs nn fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="nq l"><div class="nx l ns nt nu nq nv ky nh"/></div></div></a></div></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="e43b" class="la lb it bd lc ld mw lf lg lh mx lj lk ll my ln lo lp mz lr ls lt na lv lw lx bi translated">概念证明</h1><p id="d887" class="pw-post-body-paragraph jq jr it js b jt ma jv jw jx mb jz ka kb nb kd ke kf nc kh ki kj nd kl km kn im bi translated">我们希望保留NX的所有特性，同时使用React框架。堆栈类似于上面的项目:</p><ul class=""><li id="28b9" class="ly lz it js b jt ju jx jy kb ny kf nz kj oa kn mf mg mh mi bi translated"><a class="ae mj" href="https://reactjs.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="js iu"> ⚛️ React </strong> </a> —有史以来排名前1的前端框架；</li><li id="a7ba" class="ly lz it js b jt mk jx ml kb mm kf mn kj mo kn mf mg mh mi bi translated"><a class="ae mj" href="https://nx.dev/" rel="noopener ugc nofollow" target="_blank"><strong class="js iu">NX</strong></a>—monorepo generator，让你像Google一样扩展应用；</li><li id="c097" class="ly lz it js b jt mk jx ml kb mm kf mn kj mo kn mf mg mh mi bi translated"><a class="ae mj" href="https://webpack.js.org/concepts/module-federation/" rel="noopener ugc nofollow" target="_blank"><strong class="js iu">web pack Module Federation</strong></a>—让您将实时构建合并到单个应用程序中；</li></ul><p id="df16" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">微前端应用程序将由一个<strong class="js iu">外壳</strong>应用程序和一个<strong class="js iu">远程</strong>应用程序组成。<strong class="js iu"> Shell </strong>是一个容器应用，会注入远程微前端:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ob"><img src="../Images/aa69546824449def6cbfe04cc8a8103a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K-acEwOeaf0HgDRnCDRPnw.png"/></div></div></figure><p id="2bbb" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">远程</strong>应用——单独托管并公开组件，可从<strong class="js iu">外壳</strong>应用访问。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi oc"><img src="../Images/a571b98fb7e6f815f4bd5bf55f698bee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HmAjvGJFp31TBdjTI2xzTw.png"/></div></div></figure><p id="e55c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们保持简单，直接进入实现🏃</p></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="b147" class="la lb it bd lc ld mw lf lg lh mx lj lk ll my ln lo lp mz lr ls lt na lv lw lx bi translated">建立Monorepo项目</h1><p id="e3a7" class="pw-post-body-paragraph jq jr it js b jt ma jv jw jx mb jz ka kb nb kd ke kf nc kh ki kj nd kl km kn im bi translated">建立monorepo从未如此简单。</p><ol class=""><li id="9af8" class="ly lz it js b jt ju jx jy kb ny kf nz kj oa kn od mg mh mi bi translated">使用名为<code class="fe oe of og oh b">mf-react</code>的空设置创建monorepo工作空间:</li></ol><pre class="kp kq kr ks gt oi oh oj ok aw ol bi"><span id="ad24" class="om lb it oh b gy on oo l op oq"><strong class="oh iu">npx create-nx-workspace --preset=empty</strong><strong class="oh iu"> mf-react<br/>cd mf-react</strong></span></pre><p id="1147" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">2.安装所有react依赖项:</p><pre class="kp kq kr ks gt oi oh oj ok aw ol bi"><span id="f25b" class="om lb it oh b gy on oo l op oq"><strong class="oh iu">npm install -D @nrwl/react</strong></span></pre><p id="aade" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">3.正在生成<strong class="js iu"> shell </strong> app:</p><pre class="kp kq kr ks gt oi oh oj ok aw ol bi"><span id="2629" class="om lb it oh b gy on oo l op oq"><strong class="oh iu">nx g @nrwl/react:app shell</strong></span></pre><p id="8491" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">4.最后，生成<strong class="js iu">远程</strong> app:</p><pre class="kp kq kr ks gt oi oh oj ok aw ol bi"><span id="3060" class="om lb it oh b gy on oo l op oq"><strong class="oh iu">nx g @nrwl/react:app remote</strong></span></pre></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="f65d" class="la lb it bd lc ld mw lf lg lh mx lj lk ll my ln lo lp mz lr ls lt na lv lw lx bi translated">配置外壳应用程序</h1><ol class=""><li id="fc55" class="ly lz it js b jt ma jx mb kb mc kf md kj me kn od mg mh mi bi translated">首先，让我们打开<code class="fe oe of og oh b">mf-react/apps/shell/src</code>，在这里做一些改动:</li></ol><ul class=""><li id="4c65" class="ly lz it js b jt ju jx jy kb ny kf nz kj oa kn mf mg mh mi bi translated">将<code class="fe oe of og oh b">main.tsx</code>更名为<code class="fe oe of og oh b">bootstrap.tsx</code>；</li><li id="86b6" class="ly lz it js b jt mk jx ml kb mm kf mn kj mo kn mf mg mh mi bi translated">用创造<code class="fe oe of og oh b">index.ts</code></li></ul><pre class="kp kq kr ks gt oi oh oj ok aw ol bi"><span id="5bff" class="om lb it oh b gy on oo l op oq">import('./bootstrap');</span></pre><p id="b782" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">它将建立一个异步边界，将代码分割成一个更大的块，以避免额外的往返并提高性能。您可以在此阅读更多详细信息:</p><div class="ne nf gp gr ng nh"><a href="https://webpack.js.org/concepts/module-federation/#uncaught-error-shared-module-is-not-available-for-eager-consumption" rel="noopener  ugc nofollow" target="_blank"><div class="ni ab fo"><div class="nj ab nk cl cj nl"><h2 class="bd iu gy z fp nm fr fs nn fu fw is bi translated">模块联盟|网络包</h2><div class="no l"><h3 class="bd b gy z fp nm fr fs nn fu fw dk translated">多个独立的构建应该形成一个应用程序。这些独立的版本之间不应该有依赖关系…</h3></div><div class="np l"><p class="bd b dl z fp nm fr fs nn fu fw dk translated">webpack.js.org</p></div></div><div class="nq l"><div class="or l ns nt nu nq nv ky nh"/></div></div></a></div><p id="738d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">2.接下来，我们需要调整<code class="fe oe of og oh b">mf-react/apps/shell/project.json</code>:</p><ul class=""><li id="d8f2" class="ly lz it js b jt ju jx jy kb ny kf nz kj oa kn mf mg mh mi bi translated"><code class="fe oe of og oh b">“main”: “apps/shell/src/index.ts”</code></li><li id="3c9e" class="ly lz it js b jt mk jx ml kb mm kf mn kj mo kn mf mg mh mi bi translated"><code class="fe oe of og oh b">“webpackConfig”: “apps/shell/webpack.config.js”</code> —使用自定义webpack配置；</li><li id="0d21" class="ly lz it js b jt mk jx ml kb mm kf mn kj mo kn mf mg mh mi bi translated"><code class="fe oe of og oh b">“hmr”: false</code> —避免异步远程应用导入的重载循环；</li></ul><p id="3633" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">完整的<code class="fe oe of og oh b">project.json</code>看起来是这样的:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="os ot l"/></div></figure><p id="95a5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">3.最后，让我们在<code class="fe oe of og oh b">mf-react/apps/shell</code>创造<code class="fe oe of og oh b">webpack.config.js</code></p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="os ot l"/></div></figure><p id="35b8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">重要的细节是增加了<code class="fe oe of og oh b">proxy</code>:</p><pre class="kp kq kr ks gt oi oh oj ok aw ol bi"><span id="56e7" class="om lb it oh b gy on oo l op oq">proxy: {<br/>    'http://localhost:3000': 'http://localhost:3000',<br/>},</span></pre><p id="5bea" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="ou">黑客警报</em>:原因是在异步模块加载过程中，webpack会尝试从<a class="ae mj" href="http://localhost:3000" rel="noopener ugc nofollow" target="_blank"> http://localhost:3000 </a>(远程app地址)加载远程条目。而当它没有准备好的时候，就会开始重定向到<a class="ae mj" href="http://localhost:5000" rel="noopener ugc nofollow" target="_blank">http://localhost:5000</a>(shell app地址)并抛出错误，那个主机下不存在那个chunk。我们需要强制编译器严格从远程主机<a class="ae mj" href="http://localhost:3000." rel="noopener ugc nofollow" target="_blank"> http://localhost:3000解析远程脚本。</a>它是hacky，所以在生产中不要考虑这样的实现。在生产中，我们将使用域名来代替<a class="ae mj" href="http://localhost:3000." rel="noopener ugc nofollow" target="_blank"> http://localhost:3000 </a>，它将没有任何问题。</p></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="de09" class="la lb it bd lc ld mw lf lg lh mx lj lk ll my ln lo lp mz lr ls lt na lv lw lx bi translated">配置远程应用程序</h1><p id="dc18" class="pw-post-body-paragraph jq jr it js b jt ma jv jw jx mb jz ka kb nb kd ke kf nc kh ki kj nd kl km kn im bi translated"><strong class="js iu"> remote </strong> app配置与<strong class="js iu"> shell </strong>非常相似，唯一的区别是在模块联合插件中公开组件。</p><ol class=""><li id="48dc" class="ly lz it js b jt ju jx jy kb ny kf nz kj oa kn od mg mh mi bi translated">在<code class="fe oe of og oh b">mf-react/apps/remote/src</code>中，将<code class="fe oe of og oh b">main.tsx</code>重命名为<code class="fe oe of og oh b">bootstrap.tsx</code>。创建<code class="fe oe of og oh b">index.ts</code>并导入模块。</li></ol><pre class="kp kq kr ks gt oi oh oj ok aw ol bi"><span id="e0f8" class="om lb it oh b gy on oo l op oq">import('./bootstrap');</span></pre><p id="0a32" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">2.在<code class="fe oe of og oh b">mf-react/apps/remote/project.json</code>中，我们需要改变两件事:<code class="fe oe of og oh b">“webpackConfig”: “apps/remote/webpack.config.js”</code>和入口点<code class="fe oe of og oh b">“main”: “apps/remote/src/index.ts”</code></p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="os ot l"/></div></figure><p id="296d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">3.现在，让我们在<code class="fe oe of og oh b">mf-react/apps/remote/</code>中创建<code class="fe oe of og oh b">webpack.config.js</code>并添加配置:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="os ot l"/></div></figure><p id="5c56" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe oe of og oh b">‘./RemoteEntry’: ‘./src/app/components/RemoteEntry’,</code>在这里，我们指定将要公开的组件的路径，让我们创建它。</p><p id="ed09" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">4.在<code class="fe oe of og oh b">mf-react/apps/remote/src/app/components/RemoteEntry.tsx</code>中创建外露组件:</p><pre class="kp kq kr ks gt oi oh oj ok aw ol bi"><span id="ce38" class="om lb it oh b gy on oo l op oq">function RemoteEntry() {<br/>    return (<br/>        &lt;div&gt;<br/>            &lt;h3&gt;Remote Entry&lt;/h3&gt;<br/>        &lt;/div&gt;<br/>);<br/>}</span><span id="cf80" class="om lb it oh b gy ov oo l op oq">export default RemoteEntry;</span></pre><p id="47a1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">5.最后，在<code class="fe oe of og oh b">mf-react/apps/remote/src/app/app.tsx</code>中加入<code class="fe oe of og oh b">RemoteEntry</code></p><pre class="kp kq kr ks gt oi oh oj ok aw ol bi"><span id="7f0c" class="om lb it oh b gy on oo l op oq">import RemoteEntry from './components/RemoteEntry';</span><span id="5ca2" class="om lb it oh b gy ov oo l op oq">export function App() {<br/>    return &lt;RemoteEntry&gt;&lt;/RemoteEntry&gt;;<br/>}</span><span id="5f75" class="om lb it oh b gy ov oo l op oq">export default App;</span></pre></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="0a3b" class="la lb it bd lc ld mw lf lg lh mx lj lk ll my ln lo lp mz lr ls lt na lv lw lx bi translated">连接微前端</h1><ol class=""><li id="aefb" class="ly lz it js b jt ma jx mb kb mc kf md kj me kn od mg mh mi bi translated">首先，我们启动3000端口下的<strong class="js iu">远程</strong> app:</li></ol><pre class="kp kq kr ks gt oi oh oj ok aw ol bi"><span id="115b" class="om lb it oh b gy on oo l op oq">nx serve --project=remote --port=3000</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ow"><img src="../Images/b2b163ee37826592a04cbaa34bd95cfb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IfXA2IWhg9iD_kwzXDUegw.png"/></div></div></figure><p id="0df5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">2.然后，我们需要为我们的远程模块创建一个类型，因为我们的编译器不知道它的存在。创建<code class="fe oe of og oh b">mf-react/apps/shell/declarations.d.ts</code>并添加类型:</p><pre class="kp kq kr ks gt oi oh oj ok aw ol bi"><span id="1778" class="om lb it oh b gy on oo l op oq">declare module 'remote/RemoteEntry';</span></pre><p id="8924" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">3.接下来是最后一步，将远程模块添加到<strong class="js iu"> shell </strong>应用程序中。在<code class="fe oe of og oh b">mf-react/apps/shell/src/app/app.tsx</code>中:</p><pre class="kp kq kr ks gt oi oh oj ok aw ol bi"><span id="cb94" class="om lb it oh b gy on oo l op oq">import React, { Suspense } from 'react';</span><span id="50f9" class="om lb it oh b gy ov oo l op oq">const RemoteEntry = React.lazy(() =&gt; import('remote/RemoteEntry'));</span><span id="3743" class="om lb it oh b gy ov oo l op oq">export function App() {<br/>    return (<br/>        &lt;&gt;<br/>            Shell App<br/>            &lt;Suspense fallback={&lt;div&gt;Loading...&lt;/div&gt;}&gt;<br/>                &lt;RemoteEntry&gt;&lt;/RemoteEntry&gt;<br/>            &lt;/Suspense&gt;<br/>        &lt;/&gt;<br/>    );<br/>}</span><span id="00f4" class="om lb it oh b gy ov oo l op oq">export default App;</span></pre><p id="7062" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在这里，我们可以看到我们的远程模块已成功导入🎉</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ox"><img src="../Images/1bc2f7ed4fe0d5ca24674b796de3a754.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XC7SkztN6AkQxNGtHwl5Eg.png"/></div></div></figure></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="13f8" class="la lb it bd lc ld mw lf lg lh mx lj lk ll my ln lo lp mz lr ls lt na lv lw lx bi translated">Github链接</h1><p id="35bb" class="pw-post-body-paragraph jq jr it js b jt ma jv jw jx mb jz ka kb nb kd ke kf nc kh ki kj nd kl km kn im bi translated">您可以在这里找到完整的项目设置:</p><div class="ne nf gp gr ng nh"><a href="https://github.com/Vitashev/mf-react" rel="noopener  ugc nofollow" target="_blank"><div class="ni ab fo"><div class="nj ab nk cl cj nl"><h2 class="bd iu gy z fp nm fr fs nn fu fw is bi translated">GitHub - Vitashev/mf-react:用Nx反应微前端Monorepo</h2><div class="no l"><h3 class="bd b gy z fp nm fr fs nn fu fw dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="np l"><p class="bd b dl z fp nm fr fs nn fu fw dk translated">github.com</p></div></div><div class="nq l"><div class="oy l ns nt nu nq nv ky nh"/></div></div></a></div></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="470d" class="la lb it bd lc ld mw lf lg lh mx lj lk ll my ln lo lp mz lr ls lt na lv lw lx bi translated">结论</h1><p id="dba8" class="pw-post-body-paragraph jq jr it js b jt ma jv jw jx mb jz ka kb nb kd ke kf nc kh ki kj nd kl km kn im bi translated">最终，您将拥有一个功能完整的微前端monorepo。更重要的是，你可以使用NX的所有特性，包括在微前端之间共享库:UI组件和状态。你可以在  <strong class="js iu">这里找到整个特性规范<a class="ae mj" href="https://nx.dev/getting-started/intro" rel="noopener ugc nofollow" target="_blank"> <strong class="js iu">。如果你想学习如何在react微前端之间共享状态，让我们收集1000👏我会迭代它。和往常一样，如果你学到了新东西，请在medium和</strong></a><a class="ae mj" href="https://twitter.com/easy_web_org" rel="noopener ugc nofollow" target="_blank"><strong class="js iu">Twitter</strong></a><strong class="js iu">上关注我😊</strong></strong></p><div class="ne nf gp gr ng nh"><a href="https://easy-web.medium.com/subscribe" rel="noopener follow" target="_blank"><div class="ni ab fo"><div class="nj ab nk cl cj nl"><h2 class="bd iu gy z fp nm fr fs nn fu fw is bi translated">每当维塔利·舍甫琴科发表文章时，就收到一封电子邮件。</h2><div class="no l"><h3 class="bd b gy z fp nm fr fs nn fu fw dk translated">每当维塔利·舍甫琴科发表文章时，就收到一封电子邮件。通过注册，您将创建一个中型帐户，如果您还没有…</h3></div><div class="np l"><p class="bd b dl z fp nm fr fs nn fu fw dk translated">easy-web.medium.com</p></div></div><div class="nq l"><div class="oz l ns nt nu nq nv ky nh"/></div></div></a></div><div class="ne nf gp gr ng nh"><a href="https://easy-web.medium.com/membership" rel="noopener follow" target="_blank"><div class="ni ab fo"><div class="nj ab nk cl cj nl"><h2 class="bd iu gy z fp nm fr fs nn fu fw is bi translated">通过我的推荐链接加入Medium维塔利·舍甫琴科</h2><div class="no l"><h3 class="bd b gy z fp nm fr fs nn fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="np l"><p class="bd b dl z fp nm fr fs nn fu fw dk translated">easy-web.medium.com</p></div></div><div class="nq l"><div class="pa l ns nt nu nq nv ky nh"/></div></div></a></div></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="fdd8" class="la lb it bd lc ld mw lf lg lh mx lj lk ll my ln lo lp mz lr ls lt na lv lw lx bi translated">了解更多信息</h1><div class="ne nf gp gr ng nh"><a href="https://itnext.io/how-micro-frontend-changes-the-future-of-angular-bb4deb2cfdad" rel="noopener  ugc nofollow" target="_blank"><div class="ni ab fo"><div class="nj ab nk cl cj nl"><h2 class="bd iu gy z fp nm fr fs nn fu fw is bi translated">🔥微前端如何改变Angular的未来？</h2><div class="no l"><h3 class="bd b gy z fp nm fr fs nn fu fw dk translated">让我们看看为什么Angular最适合微前端</h3></div><div class="np l"><p class="bd b dl z fp nm fr fs nn fu fw dk translated">itnext.io</p></div></div><div class="nq l"><div class="pb l ns nt nu nq nv ky nh"/></div></div></a></div><div class="ne nf gp gr ng nh"><a href="https://itnext.io/building-angular-micro-frontend-with-ngrx-state-sharing-and-nx-cli-7e9af10ebd03" rel="noopener  ugc nofollow" target="_blank"><div class="ni ab fo"><div class="nj ab nk cl cj nl"><h2 class="bd iu gy z fp nm fr fs nn fu fw is bi translated">🔥利用NgRx状态共享和NX cli构建角度微前端</h2><div class="no l"><h3 class="bd b gy z fp nm fr fs nn fu fw dk translated">如何在几乎不编码的情况下构建健壮的微前端架构；)</h3></div><div class="np l"><p class="bd b dl z fp nm fr fs nn fu fw dk translated">itnext.io</p></div></div><div class="nq l"><div class="nr l ns nt nu nq nv ky nh"/></div></div></a></div><div class="ne nf gp gr ng nh"><a href="https://itnext.io/building-beautiful-tiktok-clone-with-angular-and-micro-frontend-part-1-bdd189425695" rel="noopener  ugc nofollow" target="_blank"><div class="ni ab fo"><div class="nj ab nk cl cj nl"><h2 class="bd iu gy z fp nm fr fs nn fu fw is bi translated">🔥建造一个漂亮的抖音克隆体，有棱角和微前端</h2><div class="no l"><h3 class="bd b gy z fp nm fr fs nn fu fw dk translated">第1部分:不再有丑陋的教程，只有美丽的，真实世界的例子，通过构建抖音学习微前端</h3></div><div class="np l"><p class="bd b dl z fp nm fr fs nn fu fw dk translated">itnext.io</p></div></div><div class="nq l"><div class="nw l ns nt nu nq nv ky nh"/></div></div></a></div></div></div>    
</body>
</html>