<html>
<head>
<title>Download Million Of Images At Once Using Programming Skills</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用编程技巧一次下载数百万张图片</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/download-million-of-images-at-once-using-programming-skills-d95f6b707cec?source=collection_archive---------9-----------------------#2022-03-09">https://levelup.gitconnected.com/download-million-of-images-at-once-using-programming-skills-d95f6b707cec?source=collection_archive---------9-----------------------#2022-03-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="eddd" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">一个简单而有趣的小项目，添加到你的简历中</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/b7a35a7df76c44a0031b93a3f30e9061.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4NQlafSj73SYQnkvyE3bwA.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@goshua13?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">约书亚·阿拉贡</a>在<a class="ae ky" href="https://unsplash.com/s/photos/loading-screen?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</figcaption></figure><p id="1eb3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在网上冲浪时，我经常遇到需要从网上下载图片的情况。</p><p id="a8d1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">尽管通过右键单击然后从菜单中保存图像来下载图像是非常简单的。</p><p id="25b6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是，如果我需要下载更多的一个图像，更重要的是，全部批量或一次全部下载，该怎么办？</p><p id="c13f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这很简单，说实话，任何人都可以做到。</p><p id="8a30" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这篇文章中，我将和你分享如何使用Python从网上下载图片。</p><p id="4a74" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用python做这个任务时，我非常兴奋，因为这个过程可以变得多么动态和令人惊奇</p><p id="40c1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">仅仅因为我是用Python做的，我就可以从网上下载一张图片做无数不同的事情。</p><p id="7cac" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们进入激动人心的话题。</p><h1 id="c52b" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">准备好一切！</h1><p id="7004" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">你可能急于进入编码部分，但首先，我们需要执行一些导入和预置来实现我们的主要目标。</p><ol class=""><li id="c5c5" class="ms mt it lb b lc ld lf lg li mu lm mv lq mw lu mx my mz na bi translated">代码编辑器</li><li id="3d92" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated">下载</li></ol><h2 id="e9d3" class="ng lw it bd lx nh ni dn mb nj nk dp mf li nl nm mh lm nn no mj lq np nq ml nr bi translated">代码编辑器</h2><p id="5f62" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated"><a class="ae ky" href="https://www.jetbrains.com/pycharm/download/" rel="noopener ugc nofollow" target="_blank"> PyCharm </a>是我使用的Python IDE，每次我开始一个新项目，它都会为我创建一个虚拟环境。</p><p id="05bb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你第一次测试一个程序，虚拟环境是理想的，因为它提供了很大的灵活性和宽容性。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ns"><img src="../Images/e4199fb9a441c98d8a2ee6d7a5085833.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*TX8LhRP5lQv0gC15.png"/></div></div></figure><p id="75c8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意:在这个程序中，我们将关注如何从给定的链接列表中下载图像，这样就可以处理多个图像。</p><p id="ed7e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以，上网复制你想下载的图片链接，用你自己的图片下载程序下载。</p><h1 id="0c80" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">下载</h1><p id="231f" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">为了继续我们的项目，我们需要下载一些库。我们将使用pip下载它们。</p><p id="97b2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这很容易做到。你只需要在终端窗口输入<code class="fe nt nu nv nw b">pip install requests</code>，这个库就会被下载到你的电脑上。</p><blockquote class="nx ny nz"><p id="670c" class="kz la oa lb b lc ld ju le lf lg jx lh ob lj lk ll oc ln lo lp od lr ls lt lu im bi translated">注意:使用pycharm中提供的终端窗口仅在该环境中安装库。</p></blockquote><p id="3ca7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们总共需要下载两个库，如下所述:</p><ol class=""><li id="c283" class="ms mt it lb b lc ld lf lg li mu lm mv lq mw lu mx my mz na bi translated">要求</li><li id="fd88" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated">beautifulsoup4</li></ol><p id="3387" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是我们为什么需要这些图书馆呢？</p><h2 id="488d" class="ng lw it bd lx nh ni dn mb nj nk dp mf li nl nm mh lm nn no mj lq np nq ml nr bi translated">要求</h2><p id="05f6" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">发出HTTP请求是一项非常复杂的任务，有许多活动部件和需要小心的事情。</p><p id="f11c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> requests </strong>库是Python中最流行的HTTP请求库。</p><p id="fbaa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它将发出请求的困难和复杂性隐藏在一个漂亮、简单的API后面，使您可以专注于与服务交互和使用应用程序中的数据。</p><h2 id="9b99" class="ng lw it bd lx nh ni dn mb nj nk dp mf li nl nm mh lm nn no mj lq np nq ml nr bi translated">美味的汤</h2><p id="a37b" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">Beautiful Soup是一个Python包，用于从HTML和XML文件中提取数据以满足web抓取需求。</p><p id="f727" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它从页面源代码中生成一个树，可以用这个树以更清晰和层次化的方式提取数据。</p><h1 id="63bd" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">下载带有URL列表的多个图像</h1><p id="5851" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">下面列出了我的eg的网址，这是一张来自unsplash.com的无版权图片</p><pre class="kj kk kl km gt oe nw of og aw oh bi"><span id="863b" class="ng lw it nw b gy oi oj l ok ol"><a class="ae ky" href="https://images.unsplash.com/photo-1519060825752-c4832f2d400a?ixlib=rb-1.2.1&amp;ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&amp;auto=format&amp;fit=crop&amp;w=1170&amp;q=80" rel="noopener ugc nofollow" target="_blank">https://images.unsplash.com/photo-1519060825752-c4832f2d400a?ixlib=rb1.2.1&amp;ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&amp;auto=format&amp;fit=crop&amp;w=1170&amp;q=80</a></span></pre><p id="c9a6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这就是全部的代码。</p><p id="def4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我强烈建议继续阅读以完全理解代码，因为我将一步一步地阅读每一行。尽情享受吧！</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="om on l"/></div></figure><ol class=""><li id="89a9" class="ms mt it lb b lc ld lf lg li mu lm mv lq mw lu mx my mz na bi translated">这是我们为我们的项目所做的所有导入工作</li></ol><pre class="kj kk kl km gt oe nw of og aw oh bi"><span id="bed0" class="ng lw it nw b gy oi oj l ok ol">import requests<br/>import urllib.request<br/>from bs4 import BeautifulSoup</span></pre><p id="1430" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">2.包含您想要下载的图像链接的列表。</p><pre class="kj kk kl km gt oe nw of og aw oh bi"><span id="1d72" class="ng lw it nw b gy oi oj l ok ol"># A list is used so that multiple images can be downloaded with a loopUrls_img = [“URL for the file"] </span></pre><p id="f5f5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">linksUrls_faulty存储所有无法下载的图像的链接</p><pre class="kj kk kl km gt oe nw of og aw oh bi"><span id="9c17" class="ng lw it nw b gy oi oj l ok ol"># A list to store all the faulty <br/>linksUrls_faulty = []</span></pre><p id="20ee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">3.这是一个循环，遍历列表中提供的所有链接来下载图像。</p><pre class="kj kk kl km gt oe nw of og aw oh bi"><span id="3722" class="ng lw it nw b gy oi oj l ok ol">for image in Urls_img:</span><span id="3f9b" class="ng lw it nw b gy oo oj l ok ol">    count += 1<br/>    <br/>    #Naming the file using our counter variable<br/>    name = f"Image #{count}.png"<br/>    print(f"This is the image name: {name}")</span></pre><p id="fbb2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">计数器变量用于跟踪正在下载的当前图像编号。</p><p id="c76c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个计数变量也用于文件的命名。例如，如果计数变量在这里等于3，那么图像将被命名为<code class="fe nt nu nv nw b">Image #3</code></p><p id="e4fd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">4.在这一部分中，我们使用下载的请求库向每个链接发送HTTPS请求。</p><pre class="kj kk kl km gt oe nw of og aw oh bi"><span id="3629" class="ng lw it nw b gy oi oj l ok ol">req = requests.get(image, stream=True)</span></pre><p id="acba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nt nu nv nw b">req=request.get()</code>发送请求并存储从服务器接收的数据</p><p id="893b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">5.检查状态代码</p><pre class="kj kk kl km gt oe nw of og aw oh bi"><span id="dbc6" class="ng lw it nw b gy oi oj l ok ol"># We need to check that the status code is 200 before doing anything else<br/>    if req.status_code == 200:</span></pre><p id="91d6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nt nu nv nw b">If req.status_code==200</code>检查从服务器返回的状态。</p><p id="d25f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果收到的代码是200，这意味着连接到服务器时一切顺利。否则，在连接过程中会出现一些问题。</p><p id="037b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可能想知道这200个代码是关于什么的。</p><p id="fb53" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">HTTP响应状态代码显示特定的HTTP请求是否成功完成。</p><p id="2008" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">简而言之，这是传达HTTPS请求现状的通用方式。</p><p id="d440" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">还有一些其他代码，但我们不会深入讨论这些，<strong class="lb iu">如果你们都想让我写这些，请告诉我！</strong></p><p id="fad0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，你所看到的非常流行的404未找到状态码，它的意思就是未找到。</p><p id="3814" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">200码，发消息OK！，这意味着我们可以继续前进。</p><p id="d58b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因为我们已经检查了服务器状态，我们可以发送请求了</p><pre class="kj kk kl km gt oe nw of og aw oh bi"><span id="7817" class="ng lw it nw b gy oi oj l ok ol"># Now let's send a request to the image URL:<br/>    req = requests.get(image, stream=True)<br/></span></pre><p id="bdd5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">5.写文件</p><pre class="kj kk kl km gt oe nw of og aw oh bi"><span id="9513" class="ng lw it nw b gy oi oj l ok ol"># This command below will allow us to write the data to a file as binary<br/>        with open(name, 'wb') as f:<br/>            for data in req:<br/>                f.write(data)</span></pre><p id="d36b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是用Python打开文件的标准方式。</p><p id="fc2c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们使用内置的Python函数<code class="fe nt nu nv nw b">open()</code> <strong class="lb iu"> </strong>如果你想了解更多关于如何在Python中打开文件的信息，请查看我以前的帖子，专门讨论Python中的文件操作。</p><p id="145a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nt nu nv nw b">write()</code>函数在打开的文件中写入数据，写入的数据是使用。get()方法。</p><p id="3fdf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">6.存储故障链接</p><pre class="kj kk kl km gt oe nw of og aw oh bi"><span id="3fc0" class="ng lw it nw b gy oi oj l ok ol">else:<br/>        # We will write all the faulty URLs back to the Urls_faulty    list:<br/>        Urls_faulty.append(image)</span></pre><p id="4334" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这行代码中，我们只是添加了由于某种原因无法下载的URL。</p><h1 id="795c" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">结论</h1><blockquote class="op"><p id="f0c3" class="oq or it bd os ot ou ov ow ox oy lu dk translated">“想象力比知识更重要。知识有限。想象力环绕着世界。”</p><p id="3c55" class="oq or it bd os ot ou ov ow ox oy lu dk translated">——阿尔伯特·爱因斯坦</p></blockquote><p id="6916" class="pw-post-body-paragraph kz la it lb b lc oz ju le lf pa jx lh li pb lk ll lm pc lo lp lq pd ls lt lu im bi translated">编码可能很简单，做起来也很有趣。它帮助你发挥你的创造力，并帮助你学习很多东西。</p><p id="a515" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">也就是说，您现在可以通过Python批量下载图像。</p><p id="0486" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">谢谢你一直读到最后。如果你们想要这样的教程，请在下面的评论中联系我！</p><p id="acc3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我很高兴收到你们的来信，并将继续尽我所能为更多的人服务。再见！</p></div></div>    
</body>
</html>