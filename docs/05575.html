<html>
<head>
<title>Building an Expandable List Using UICollectionView: Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用UICollectionView构建可扩展列表:第1部分</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/building-an-expandable-list-using-uicollectionview-part-1-703312c2d773?source=collection_archive---------8-----------------------#2020-09-10">https://levelup.gitconnected.com/building-an-expandable-list-using-uicollectionview-part-1-703312c2d773?source=collection_archive---------8-----------------------#2020-09-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="ff10" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated"><strong class="ak">从来没有这么容易过！</strong></h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/e7078d945f696957175ce6db9bfc3e5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*MKVVIboN8dxdemTa"/></div></div></figure><p id="984b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><em class="lq">本文原载于2020年9月10日</em><a class="ae lr" href="https://swiftsenpai.com/development/collectionview-expandable-list-part1/" rel="noopener ugc nofollow" target="_blank"><em class="lq">https://swiftsenpai.com</em></a><em class="lq">。</em></p></div><div class="ab cl ls lt hx lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="im in io ip iq"><p id="d5af" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">可扩展列表或一些人可能称之为可扩展表格视图，是一种非常常见的用户界面设计，在各种各样的应用程序中使用。尽管UIKit如此受欢迎，但它没有任何支持这种布局的本地API。</p><p id="bb65" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">随着iOS 14的推出，这一点不再成立！</p><p id="8025" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">据苹果公司称，开发者现在可以通过使用新的<code class="fe lz ma mb mc b">UICollectionView</code>列表布局API轻松创建可扩展列表。不幸的是，在查看了苹果提供的<a class="ae lr" href="https://developer.apple.com/documentation/uikit/views_and_controls/collection_views/implementing_modern_collection_views" rel="noopener ugc nofollow" target="_blank">样本代码</a>后，我发现它极其混乱，非常难以理解。</p><p id="be5b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">因此，我想尝试写一篇文章，清楚地解释如何使用<code class="fe lz ma mb mc b">UICollectionView</code>有效地构建一个可扩展列表。</p><p id="084f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这是两篇博文的第一部分。在第一部分中，我们将着重于在单个部分的集合视图中构建一个可扩展的列表。在第二部分中，我们将尝试修改我们在第一部分中构建的列表，以便在多部分集合视图中显示相同的模型对象。到第2部分结束时，您应该能够清楚地理解创建可扩展列表所涉及的每个组件之间的关系。</p><p id="8b7a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在继续之前，如果您不熟悉<code class="fe lz ma mb mc b">UICollectionView</code>列表的基本概念，请务必阅读我以前的文章“<a class="ae lr" href="https://swiftsenpai.com/development/uicollectionview-list-basic/" rel="noopener ugc nofollow" target="_blank">在Swift中使用UICollectionView构建列表</a>”。</p><p id="7433" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">说了这么多，我们开始吧。</p></div><div class="ab cl ls lt hx lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="im in io ip iq"><h1 id="fa1a" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">示例应用程序</h1><p id="77c6" class="pw-post-body-paragraph ku kv it kw b kx mv ju kz la mw jx lc ld mx lf lg lh my lj lk ll mz ln lo lp im bi translated">下面的动画GIF展示了我们将要构建的示例应用程序。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi na"><img src="../Images/24a3a42c3b2747abcc03cb0b106c6cfc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*pHqk5jJl9eP3AFijKUxnPg.gif"/></div><figcaption class="nb nc gj gh gi nd ne bd b be z dk translated">示例应用程序</figcaption></figure><p id="45a6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如图所示，集合视图由一个部分组成。在该部分中，有标题单元格和符号单元格，负责显示根据类别分组的不同<code class="fe lz ma mb mc b">SFSymbol</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nf"><img src="../Images/388cc04cc56958df3c20682bf539baf9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*D_YKr8wT9puisv4Z"/></div></div><figcaption class="nb nc gj gh gi nd ne bd b be z dk translated">标题单元格和符号单元格</figcaption></figure></div><div class="ab cl ls lt hx lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="im in io ip iq"><h1 id="ec4a" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">定义所需的数据类型</h1><p id="a849" class="pw-post-body-paragraph ku kv it kw b kx mv ju kz la mw jx lc ld mx lf lg lh my lj lk ll mz ln lo lp im bi translated">在开始构建可扩展列表之前，我们必须首先定义所有需要的数据类型。</p><p id="a485" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们从定义集合视图部分开始。</p><pre class="kj kk kl km gt ng mc nh ni aw nj bi"><span id="36fc" class="nk me it mc b gy nl nm l nn no">enum Section {<br/>    case main<br/>}</span></pre><p id="a56f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">之后，让我们定义保存标题和符号单元数据的数据类型。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="ebc7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">接下来，我们将定义一个名为<code class="fe lz ma mb mc b">ListItem</code>的枚举。此枚举类型将充当集合视图的数据源项标识符类型。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="f534" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">此时，您可能想知道为什么我们需要使用<code class="fe lz ma mb mc b">ListItem</code>作为数据源项标识符类型。一旦我们开始配置集合视图的数据源，我将详细解释这一点。</p><p id="dc06" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">最后，让我们定义集合视图将使用的样本模型对象。请注意，在大多数情况下，模型对象将由后端服务器以JSON数据的形式提供。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="d694" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">所有需要的数据类型都准备好了，我们现在可以开始构建可扩展列表了。</p></div><div class="ab cl ls lt hx lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="im in io ip iq"><h1 id="191d" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">配置集合视图</h1><p id="0568" class="pw-post-body-paragraph ku kv it kw b kx mv ju kz la mw jx lc ld mx lf lg lh my lj lk ll mz ln lo lp im bi translated">首先，让我们设置集合视图来占据整个视图控制器的视图。像往常一样，我们将使用<code class="fe lz ma mb mc b">insetGrouped</code>作为我们的列表外观。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure></div><div class="ab cl ls lt hx lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="im in io ip iq"><h1 id="a9be" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">执行小区注册</h1><p id="d08f" class="pw-post-body-paragraph ku kv it kw b kx mv ju kz la mw jx lc ld mx lf lg lh my lj lk ll mz ln lo lp im bi translated">如前所述，我们的可扩展列表由两种类型的单元格组成— <strong class="kw iu">标题单元格</strong>和<strong class="kw iu">符号单元格</strong>。</p><p id="5e53" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">即使它们都是类型<code class="fe lz ma mb mc b">UICollectionViewListCell</code>，我们仍然需要创建两个不同的<code class="fe lz ma mb mc b">CellRegistration</code>实例。这是因为它们有不同的项目标识符类型和不同的行为。</p><p id="1862" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">标题单元格注册将使用<code class="fe lz ma mb mc b">HeaderItem</code>作为其项目标识符类型。同时，在单元格注册处理程序中，我们必须向标题单元格添加一个大纲显示附件。这是为了启用标题单元格的展开/折叠行为。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="95db" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">另一方面，符号单元注册将使用<code class="fe lz ma mb mc b">SFSymbolItem</code>作为其项目标识符类型。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="8d13" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">准备好标题和符号单元格注册后，我们可以继续配置集合视图数据源。</p></div><div class="ab cl ls lt hx lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="im in io ip iq"><h1 id="98ac" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">正在初始化数据源</h1><p id="581f" class="pw-post-body-paragraph ku kv it kw b kx mv ju kz la mw jx lc ld mx lf lg lh my lj lk ll mz ln lo lp im bi translated">还记得我们之前定义的<code class="fe lz ma mb mc b">ListItem</code>枚举吗？这就是它发挥作用的地方。</p><p id="dc9c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">您可能已经知道，<code class="fe lz ma mb mc b">UICollectionViewDiffableDataSource</code>只支持1种物品标识符类型。然而，在我们的可扩展列表中，我们有两种类型的数据- <code class="fe lz ma mb mc b">HeaderItem</code>和<code class="fe lz ma mb mc b">SFSymbolItem</code>。</p><p id="df20" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">为了解决这个问题，我们可以利用带有关联值的<a class="ae lr" href="https://docs.swift.org/swift-book/LanguageGuide/Enumerations.html#ID148" rel="noopener ugc nofollow" target="_blank">枚举将<code class="fe lz ma mb mc b">HeaderItem</code>和<code class="fe lz ma mb mc b">SFSymbolItem</code>包装成一个名为<code class="fe lz ma mb mc b">ListItem</code>的数据类型。这样，我们将能够使用<code class="fe lz ma mb mc b">ListItem</code>作为项目标识符类型来初始化<code class="fe lz ma mb mc b">UICollectionViewDiffableDataSource</code>。</a></p><p id="be66" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">由于<code class="fe lz ma mb mc b">ListItem</code>是一个枚举，我们现在可以在单元提供者闭包中使用<code class="fe lz ma mb mc b">switch</code>语句来检查所有可能的数据类型，并相应地将集合视图单元出队。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="9827" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">请注意，在将可重用单元出队时，必须始终将项目的数据类型与相应的单元注册项目标识符类型相匹配。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nf"><img src="../Images/12a81f940066a824c621a87c8188180a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8r7-FJxN4SnbzKKI"/></div></div><figcaption class="nb nc gj gh gi nd ne bd b be z dk translated">将项目的数据类型与小区注册项目标识符类型相匹配</figcaption></figure></div><div class="ab cl ls lt hx lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="im in io ip iq"><h1 id="fc5b" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">设置快照</h1><h2 id="b1f1" class="nk me it bd mf nr ns dn mj nt nu dp mn ld nv nw mp lh nx ny mr ll nz oa mt ob bi translated">了解不同种类的快照</h2><p id="2e44" class="pw-post-body-paragraph ku kv it kw b kx mv ju kz la mw jx lc ld mx lf lg lh my lj lk ll mz ln lo lp im bi translated">为了以可扩展的方式在集合视图中显示模型对象，我们将不得不使用<code class="fe lz ma mb mc b">NSDiffableDataSourceSnapshot</code>和<code class="fe lz ma mb mc b">NSDiffableDataSourceSectionSnapshot</code>。</p><p id="b952" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><code class="fe lz ma mb mc b"><strong class="kw iu">NSDiffableDataSourceSnapshot</strong></code>是iOS 13中引入的。一般来说，<code class="fe lz ma mb mc b">NSDiffableDataSourceSnapshot</code>是用来为集合视图(或者表格视图)提供数据的。我们可以使用它来定义集合视图部分，以及每个集合视图部分中的项目。</p><p id="fe3f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">另一方面，<code class="fe lz ma mb mc b"><strong class="kw iu">NSDiffableDataSourceSectionSnapshot</strong></code>与iOS 14一起在今年的WWDC上推出。用于为<strong class="kw iu">特定集合视图(或表格视图)部分</strong>提供数据。它的功能与<code class="fe lz ma mb mc b">NSDiffableDataSourceSnapshot</code>相似，我们可以用它来表示部分和项目。因此，我们可以将其视为集合视图(或表格视图)部分的迷你<code class="fe lz ma mb mc b">NSDiffableDataSourceSnapshot</code>。</p><p id="3465" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">总结一下:</p><ul class=""><li id="fbcf" class="oc od it kw b kx ky la lb ld oe lh of ll og lp oh oi oj ok bi translated">一个收藏视图只能有<strong class="kw iu">一个</strong>一个<code class="fe lz ma mb mc b">NSDiffableDataSourceSnapshot</code>。</li><li id="87ae" class="oc od it kw b kx ol la om ld on lh oo ll op lp oh oi oj ok bi translated">在一个集合视图内只能有一个<strong class="kw iu">一个</strong>一个<code class="fe lz ma mb mc b">NSDiffableDataSourceSectionSnapshot</code>。</li><li id="c3ab" class="oc od it kw b kx ol la om ld on lh oo ll op lp oh oi oj ok bi translated">一个集合视图可以有多个<code class="fe lz ma mb mc b">NSDiffableDataSourceSectionSnapshot</code><strong class="kw iu">。</strong></li><li id="2c76" class="oc od it kw b kx ol la om ld on lh oo ll op lp oh oi oj ok bi translated"><code class="fe lz ma mb mc b">NSDiffableDataSourceSectionSnapshot</code>与集合视图节无关，它用于定义集合视图节内的多节数据。<strong class="kw iu">如果在集合视图部分中没有多部分数据，则不需要创建</strong> <code class="fe lz ma mb mc b"><strong class="kw iu">NSDiffableDataSourceSectionSnapshot</strong></code>。</li></ul><p id="b052" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">好了，理论到此为止。是时候构建快照了。</p><h2 id="7046" class="nk me it bd mf nr ns dn mj nt nu dp mn ld nv nw mp lh nx ny mr ll nz oa mt ob bi translated">构建快照</h2><p id="eed4" class="pw-post-body-paragraph ku kv it kw b kx mv ju kz la mw jx lc ld mx lf lg lh my lj lk ll mz ln lo lp im bi translated">对于我们的示例应用程序，我们试图在集合视图部分中显示多部分数据。因此，我们将需要建造1座<code class="fe lz ma mb mc b">NSDiffableDataSourceSnapshot</code>和1座<code class="fe lz ma mb mc b">NSDiffableDataSourceSectionSnapshot</code>。</p><p id="5d81" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">下图说明了我们需要构建的快照的结构。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nf"><img src="../Images/4a11aff364da6ba550230003b9d4838f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*zlSblAraPOGpBMec"/></div></div><figcaption class="nb nc gj gh gi nd ne bd b be z dk translated">快照的结构</figcaption></figure><p id="8e17" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">构建<code class="fe lz ma mb mc b">NSDiffableDataSourceSnapshot</code>相当简单。由于集合视图只包含1个部分，我们只需要将<code class="fe lz ma mb mc b">main</code>部分添加到快照中，就这样。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="aa2e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">请注意，数据源快照和我们之前初始化的数据源必须具有相同的节标识符类型和项标识符类型。</p><p id="6027" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">接下来，让我们构造<code class="fe lz ma mb mc b">NSDiffableDataSourceSectionSnapshot</code>。我们是这样做的:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="77ba" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们详细检查一下上面的代码:</p><ol class=""><li id="347d" class="oc od it kw b kx ky la lb ld oe lh of ll og lp oq oi oj ok bi translated">创建一个截面快照，其项目标识符类型为<code class="fe lz ma mb mc b">ListItem</code>。请注意，节快照项标识符类型必须与数据源项标识符类型相匹配。</li><li id="440b" class="oc od it kw b kx ol la om ld on lh oo ll op lp oq oi oj ok bi translated">遍历<code class="fe lz ma mb mc b">modelObjects</code>中的每个<code class="fe lz ma mb mc b">HeaderItem</code>实例，以构建一个表示与<code class="fe lz ma mb mc b">modelObjects</code>相同的数据层次的部分快照。</li><li id="d841" class="oc od it kw b kx ol la om ld on lh oo ll op lp oq oi oj ok bi translated">用<code class="fe lz ma mb mc b">headerItem</code>创建一个<code class="fe lz ma mb mc b">ListItem</code>作为关联值，并将其附加到截面快照。这将在截面快照中创建一个截面。</li><li id="dd8a" class="oc od it kw b kx ol la om ld on lh oo ll op lp oq oi oj ok bi translated">将<code class="fe lz ma mb mc b">headerItem</code>的<code class="fe lz ma mb mc b">symbols</code>数组转换成<code class="fe lz ma mb mc b">ListItem</code>的数组，并附加到<code class="fe lz ma mb mc b">headerListItem</code>表示的部分。</li><li id="a85b" class="oc od it kw b kx ol la om ld on lh oo ll op lp oq oi oj ok bi translated">默认情况下，<code class="fe lz ma mb mc b">headerListItem</code>代表的部分应该展开。</li><li id="d7ff" class="oc od it kw b kx ol la om ld on lh oo ll op lp oq oi oj ok bi translated">通过将节快照应用于数据源的<code class="fe lz ma mb mc b">main</code>节，显示节快照中的数据。</li></ol><p id="9519" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">所以你有它！构建并运行示例代码，查看运行中的一切。</p><p id="4a82" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">你可以在这里获得完整的示例代码<a class="ae lr" href="https://github.com/LeeKahSeng/SwiftSenpai-UICollectionView-List" rel="noopener ugc nofollow" target="_blank">。</a></p></div><div class="ab cl ls lt hx lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="im in io ip iq"><h1 id="5f90" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">包扎</h1><p id="7a03" class="pw-post-body-paragraph ku kv it kw b kx mv ju kz la mw jx lc ld mx lf lg lh my lj lk ll mz ln lo lp im bi translated">这就结束了“<strong class="kw iu">使用UICollectionView </strong>构建可扩展列表”的第一部分。您可能已经注意到，我特意在单个部分的集合视图中创建可扩展列表，这样您就不会混淆集合视图部分和<code class="fe lz ma mb mc b">NSDiffableDataSourceSectionSnapshot</code>部分。</p><p id="c7bc" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在第二部分中，我们将修改到目前为止编写的代码，使用多节集合视图创建一个可扩展的列表。下面先睹为快，看看我们在<a class="ae lr" href="https://swiftsenpai.com/development/collectionview-expandable-list-part2/" rel="noopener ugc nofollow" target="_blank">第二部分</a>中试图构建的内容:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi or"><img src="../Images/c37ef5407aefdc16fd91c4d39346a9a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:544/0*WKBlsJn5xCc3CbGv"/></div><figcaption class="nb nc gj gh gi nd ne bd b be z dk translated">第2部分示例应用程序</figcaption></figure><p id="f26f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">敬请期待！</p><p id="641d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果你喜欢这篇文章，请随时关注我的<a class="ae lr" href="https://twitter.com/Lee_Kah_Seng" rel="noopener ugc nofollow" target="_blank"> Twitter </a>。</p><p id="dfd8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">感谢阅读。👨🏻‍💻</p><p id="4be2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">【更新日期:2020年9月22日】</strong></p><p id="827c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">您可以在这里找到本文的第2部分:</p><p id="8447" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">🔗<a class="ae lr" rel="noopener ugc nofollow" target="_blank" href="/building-an-expandable-list-using-uicollectionview-part-2-92a0836573dd">使用UICollectionView构建可扩展列表:第2部分</a></p></div><div class="ab cl ls lt hx lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="im in io ip iq"><h1 id="d012" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">进一步阅读</h1><ul class=""><li id="4925" class="oc od it kw b kx mv la mw ld os lh ot ll ou lp oh oi oj ok bi translated"><a class="ae lr" href="https://swiftsenpai.com/development/uicollectionview-list-basic/" rel="noopener ugc nofollow" target="_blank">使用Swift中的UICollectionView构建列表</a></li><li id="61de" class="oc od it kw b kx ol la om ld on lh oo ll op lp oh oi oj ok bi translated"><a class="ae lr" href="https://swiftsenpai.com/development/uicollectionview-list-custom-cell/" rel="noopener ugc nofollow" target="_blank">具有自定义单元格和自定义配置的UICollectionView列表</a></li><li id="eab1" class="oc od it kw b kx ol la om ld on lh oo ll op lp oh oi oj ok bi translated"><a class="ae lr" href="https://swiftsenpai.com/development/custom-uicollectionviewlistcell-in-ib/" rel="noopener ugc nofollow" target="_blank">在界面构建器中设计自定义UICollectionViewListCell</a></li><li id="09b4" class="oc od it kw b kx ol la om ld on lh oo ll op lp oh oi oj ok bi translated"><a class="ae lr" href="https://swiftsenpai.com/development/modern-ways-reload-cells/" rel="noopener ugc nofollow" target="_blank">重新加载表格和集合视图单元格的现代方法</a></li><li id="204b" class="oc od it kw b kx ol la om ld on lh oo ll op lp oh oi oj ok bi translated"><a class="ae lr" href="https://swiftsenpai.com/development/declarative-list-header-footer/" rel="noopener ugc nofollow" target="_blank">声明式UICollectionView列表页眉和页脚</a></li><li id="7c40" class="oc od it kw b kx ol la om ld on lh oo ll op lp oh oi oj ok bi translated"><a class="ae lr" href="https://swiftsenpai.com/development/list-interactive-custom-header/" rel="noopener ugc nofollow" target="_blank">带有交互式自定义标题的UICollectionView列表</a></li></ul></div></div>    
</body>
</html>