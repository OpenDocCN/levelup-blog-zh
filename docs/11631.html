<html>
<head>
<title>AWS + React.js Full Stack Development Tutorial — Build a Serverless Tournament Bracket Platform (Part 3: DevOps and Infrastructure)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">AWS + React.js全栈开发教程—构建无服务器锦标赛支架平台(第3部分:DevOps和基础设施)</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/aws-react-js-full-stack-development-tutorial-build-a-serverless-tournament-bracket-platform-9ff472a124a0?source=collection_archive---------7-----------------------#2022-04-01">https://levelup.gitconnected.com/aws-react-js-full-stack-development-tutorial-build-a-serverless-tournament-bracket-platform-9ff472a124a0?source=collection_archive---------7-----------------------#2022-04-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/95bda47d661bbbff718460a9c5094e1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*OSq4UwUL30EDMY21"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">照片由<a class="ae kc" href="https://unsplash.com/@christianw?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">克里斯蒂安·威迪格</a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><h1 id="113f" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">第3部分:DevOps和基础设施</h1><p id="d060" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">我们将混合使用Infastructure as Code (IaC)以及一些控制台操作步骤来将前端部署到公共互联网上。</p><h1 id="887f" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">为前端创建剩余的AWS资源</h1><p id="1890" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">通常我会提倡使用一个叫做AWS CloudFormation的工具来创建下一个部分，但是在web控制台中一步一步地学习是一个更好的学习体验。如果你想跳过下一部分，你可以使用下面的命令运行我在这里包含的模板<a class="ae kc" href="https://github.com/beatleboy501/Tournament-Brackets-Tutorial-Infra/blob/main/front-end.yaml" rel="noopener ugc nofollow" target="_blank"/>。</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="1811" class="mi ke iq me b gy mj mk l ml mm">$ aws cloudformation create-stack --stack-name tournament-brackets-front-end --template-body ./front-end.yml --capabilities "CAPABILITY_IAM" "CAPABILITY_NAMED_IAM" "CAPABILITY_AUTO_EXPAND" --profile TournamentBrackets</span></pre><p id="02fa" class="pw-post-body-paragraph lb lc iq ld b le mn lg lh li mo lk ll lm mp lo lp lq mq ls lt lu mr lw lx ly ij bi translated">无论您决定如何创建剩余的资源，都必须向AWS简单系统管理添加一个参数。一旦创建了Cognito用户池，需要注意的最重要的事情之一就是用户池的ID。您可以通过执行以下命令从命令行找到它:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="f091" class="mi ke iq me b gy mj mk l ml mm">$ aws cognito-idp list-user-pools --max-results 10 --profile TournamentBrackets<br/></span><span id="91e7" class="mi ke iq me b gy ms mk l ml mm">{</span><span id="02b7" class="mi ke iq me b gy ms mk l ml mm">  "UserPools": [</span><span id="4b3f" class="mi ke iq me b gy ms mk l ml mm">    {</span><span id="7f87" class="mi ke iq me b gy ms mk l ml mm">      "CreationDate": XXXXXXXXXX.XXX,</span><span id="7294" class="mi ke iq me b gy ms mk l ml mm">      "LastModifiedDate": XXXXXXXXXX.XXX,</span><span id="e784" class="mi ke iq me b gy ms mk l ml mm">      "LambdaConfig": {},</span><span id="cf64" class="mi ke iq me b gy ms mk l ml mm">      "Id": "<strong class="me ir">us-east-1_xXxXXXXxx</strong>",</span><span id="a9eb" class="mi ke iq me b gy ms mk l ml mm">      "Name": "TournamentBracketsUserPool"</span><span id="830c" class="mi ke iq me b gy ms mk l ml mm">    }</span><span id="66d6" class="mi ke iq me b gy ms mk l ml mm">  ]</span><span id="590a" class="mi ke iq me b gy ms mk l ml mm">}</span></pre><p id="15f7" class="pw-post-body-paragraph lb lc iq ld b le mn lg lh li mo lk ll lm mp lo lp lq mq ls lt lu mr lw lx ly ij bi translated">你也可以在https://console.aws.amazon.com/cognito/users的AWS管理控制台点击“TournamentBracketsUserPool”来找到它。</p><p id="7d27" class="pw-post-body-paragraph lb lc iq ld b le mn lg lh li mo lk ll lm mp lo lp lq mq ls lt lu mr lw lx ly ij bi translated">一旦你有了这个ID，打开https://console.aws.amazon.com/systems-manager/<a class="ae kc" href="https://console.aws.amazon.com/systems-manager/" rel="noopener ugc nofollow" target="_blank">的AWS简单系统管理器控制台。</a></p><p id="2043" class="pw-post-body-paragraph lb lc iq ld b le mn lg lh li mo lk ll lm mp lo lp lq mq ls lt lu mr lw lx ly ij bi translated">在左侧导航面板的“应用程序管理”下，单击“参数存储”。</p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/0576df3dd5e83093e7af142d0faa8860.png" data-original-src="https://miro.medium.com/v2/resize:fit:1172/format:webp/1*5vP7q47s4Nzfm6wlHGMGPw.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">应用程序管理下的参数存储选项</figcaption></figure><p id="dd46" class="pw-post-body-paragraph lb lc iq ld b le mn lg lh li mo lk ll lm mp lo lp lq mq ls lt lu mr lw lx ly ij bi translated">然后点击“创建参数”。</p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mu"><img src="../Images/c5371be53102e1353817f6c095322e0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gcQGPor2PsjGNfAms4S6AA.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">“创建参数”按钮</figcaption></figure><p id="e8e5" class="pw-post-body-paragraph lb lc iq ld b le mn lg lh li mo lk ll lm mp lo lp lq mq ls lt lu mr lw lx ly ij bi translated">对于名称，输入“<code class="fe mv mw mx me b">USER_POOL_ID</code>”，对于值，输入我们之前查找的ID。</p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mu"><img src="../Images/f7f280edcbd860c247eaeb1429166755.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T5rS2DbGjNcQprsAZ0uOrw.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">用于创建SSM字符串参数的web表单</figcaption></figure><p id="9e80" class="pw-post-body-paragraph lb lc iq ld b le mn lg lh li mo lk ll lm mp lo lp lq mq ls lt lu mr lw lx ly ij bi translated">输入数值后，点击“创建参数”。</p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi my"><img src="../Images/46da76bf2ceec2dbf746353d625c2163.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*snbqBs9WYW5cnmylh_TvEw.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">“创建参数”按钮</figcaption></figure><p id="d8e7" class="pw-post-body-paragraph lb lc iq ld b le mn lg lh li mo lk ll lm mp lo lp lq mq ls lt lu mr lw lx ly ij bi translated">现在，您应该看到您的字符串变量保存在系统管理器中。</p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mz"><img src="../Images/816828a461347cd478576c59f652203d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gijOLXpwT62nbQpS2ECV-g.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">保存在系统管理器中的变量</figcaption></figure><h1 id="1693" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">创建AWS代码提交报告</h1><p id="5db5" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">在<a class="ae kc" href="https://console.aws.amazon.com/codesuite/codecommit" rel="noopener ugc nofollow" target="_blank">https://console.aws.amazon.com/codesuite/codecommit</a>打开AWS代码提交控制台。点击“创建存储库”。对于存储库名称，输入“TournamentBracketsFrontend ”,然后单击“创建”。</p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi na"><img src="../Images/5d76418445e7ca2a20a159ce802af231.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7qfjObJ0DjyuJoQ1AkFxoQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">创建存储库按钮</figcaption></figure><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nb"><img src="../Images/452dbf01fc5c10161845cdbc11867f36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k3GpHCOA25S107WNZP44BQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">输入存储库名称</figcaption></figure><p id="42b5" class="pw-post-body-paragraph lb lc iq ld b le mn lg lh li mo lk ll lm mp lo lp lq mq ls lt lu mr lw lx ly ij bi translated">准备就绪后，单击创建。这将创建一个空存储库。我们稍后将需要配置AWS CLI git凭据帮助器，以便能够向它推送代码。</p><h1 id="8173" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">更新主机</h1><p id="280c" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">您可能已经注意到，在访问上一个实验中由Amplify CLI提供的UI端点时，出现了403禁止错误。要解决这个问题，我们可以进入https://s3.console.aws.amazon.com/s3/home<a class="ae kc" href="https://s3.console.aws.amazon.com/s3/home" rel="noopener ugc nofollow" target="_blank">的网络控制台。搜索您的存储桶名称(应该是类似于<code class="fe mv mw mx me b">tournament-bracket-hosting-bucket-xxxx</code>的内容)。找到桶后，单击它以查看桶中的内容</a></p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nc"><img src="../Images/c6b8ef180133aa4fb80fceb1b12b5d39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SWgRKzYXZRNCF6Bo_bPtmA.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">空桶</figcaption></figure><p id="d2f7" class="pw-post-body-paragraph lb lc iq ld b le mn lg lh li mo lk ll lm mp lo lp lq mq ls lt lu mr lw lx ly ij bi translated">如你所见，这里什么也没有。在下一部分中，我们将建立一个管道来构建前端资产并将其放入这个桶中。我们将从单击“权限”选项卡开始。</p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nd"><img src="../Images/787bfcb98d63273b6a3db62834831199.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3Ci4gNtRMad1MiOxB6VF9g.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">权限选项卡</figcaption></figure><p id="c330" class="pw-post-body-paragraph lb lc iq ld b le mn lg lh li mo lk ll lm mp lo lp lq mq ls lt lu mr lw lx ly ij bi translated">选择“编辑”，然后选择“阻止所有公共访问”，然后选择“保存”。亚马逊S3日志传送组不需要对此存储桶进行写访问。</p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ne"><img src="../Images/f40bdbcbed738646b0381bafe0f5f026.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RQJamjZM16C0dl1Ss7Mheg.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">阻止所有公共访问</figcaption></figure><p id="3a8b" class="pw-post-body-paragraph lb lc iq ld b le mn lg lh li mo lk ll lm mp lo lp lq mq ls lt lu mr lw lx ly ij bi translated">稍后，我们将通过AWS CloudFront CDN访问我们的网站。接下来，前往“属性”标签，向下滚动到“静态网站托管”部分。这里，我们希望将我们的Bucket网站端点复制到剪贴板，以便以后使用。</p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nf"><img src="../Images/151b7c5535cfbb632f36fc4b55a26e77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*V2Pf4-5pGBBJRdLu19zfWw.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">静态网站托管</figcaption></figure><h2 id="c589" class="mi ke iq bd kf ng nh dn kj ni nj dp kn lm nk nl kr lq nm nn kv lu no np kz nq bi translated">为管道阶段之间的托管工件创建S3存储桶</h2><p id="1025" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">在https://s3.console.aws.amazon.com/s3/home的<a class="ae kc" href="https://s3.console.aws.amazon.com/s3/home" rel="noopener ugc nofollow" target="_blank">打开AWS S3控制台。点击“创建存储桶”。对于存储桶名称，请键入“锦标赛-支架-管道-”，后跟您的AWS帐号。</a></p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mu"><img src="../Images/f41ad786541efca1c4e70ac6fa0ff242.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U9ZlaVhhNq5KOfBQgq0N7A.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">创建存储桶</figcaption></figure><p id="73d5" class="pw-post-body-paragraph lb lc iq ld b le mn lg lh li mo lk ll lm mp lo lp lq mq ls lt lu mr lw lx ly ij bi translated">接受剩余的默认配置并创建bucket。</p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mu"><img src="../Images/d62c5fa19e2fe0ca73e763e270ae8b14.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3vjuIUPqROl2pv6NTsN6AQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">默认配置</figcaption></figure><h2 id="3af8" class="mi ke iq bd kf ng nh dn kj ni nj dp kn lm nk nl kr lq nm nn kv lu no np kz nq bi translated">创建CloudFront发行版</h2><p id="a820" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">在<a class="ae kc" href="https://console.aws.amazon.com/cloudfront/" rel="noopener ugc nofollow" target="_blank">https://console.aws.amazon.com/cloudfront/</a>打开自动气象站云前控制台。点击“创建分销”。</p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mu"><img src="../Images/fe5d6ddc0b29c37de461fbd8654d0b88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h6Fkql-TFpyzpXXDFrH6Rw.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">创建分发</figcaption></figure><p id="5091" class="pw-post-body-paragraph lb lc iq ld b le mn lg lh li mo lk ll lm mp lo lp lq mq ls lt lu mr lw lx ly ij bi translated">对于“交付方式”，选择“网络”。</p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mu"><img src="../Images/e48ccab8b3798f4aac987bb13f34c0e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r9cvW466V9hYHeBVN2j0mQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">Web交付方法</figcaption></figure><p id="6b88" class="pw-post-body-paragraph lb lc iq ld b le mn lg lh li mo lk ll lm mp lo lp lq mq ls lt lu mr lw lx ly ij bi translated">在“原域名”内点击输入。这将弹出一个有效的S3桶的下拉列表，以用作原点。选择我们在前面步骤<code class="fe mv mw mx me b">tournament-bracket-hosting-bucket-xxxx</code>中创建的托管桶。</p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mu"><img src="../Images/c590c1405bc2d230a83428e6d9db7a77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*728K_n3wpsbZU-UwU5gQxA.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">原始域名</figcaption></figure><p id="7610" class="pw-post-body-paragraph lb lc iq ld b le mn lg lh li mo lk ll lm mp lo lp lq mq ls lt lu mr lw lx ly ij bi translated">对于“原始路径”,将其留空，并且不限制存储桶访问。对于“起点ID ”,输入“Bucket_Origin”。</p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mu"><img src="../Images/f01dd884360e7bd89553a8c2b17441fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A3pChVDPzJhBNbeoOWfdcQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">来源ID</figcaption></figure><p id="b45c" class="pw-post-body-paragraph lb lc iq ld b le mn lg lh li mo lk ll lm mp lo lp lq mq ls lt lu mr lw lx ly ij bi translated">在“默认缓存行为设置”下，为“查看器协议策略”选择“将HTTP重定向到HTTPS”。</p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mu"><img src="../Images/45b792d6fa237b554400a851a3be3ad3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lCxSkz43bH2HrHsWMkXkmQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">将HTTP重定向到HTTPS</figcaption></figure><p id="3663" class="pw-post-body-paragraph lb lc iq ld b le mn lg lh li mo lk ll lm mp lo lp lq mq ls lt lu mr lw lx ly ij bi translated">在“默认缓存行为设置”下，为“基于选定请求头的缓存”选择“白名单”。添加2个自定义标题，“访问控制允许来源”和“内容类型”。</p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mu"><img src="../Images/ce3d94a290d39d4000e3e174c7f7ba95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8MlD0TTLAbRxamEybUjeLw.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">白名单标题</figcaption></figure><p id="8a41" class="pw-post-body-paragraph lb lc iq ld b le mn lg lh li mo lk ll lm mp lo lp lq mq ls lt lu mr lw lx ly ij bi translated">在“默认缓存行为设置”下，为“对象缓存”选择“自定义”。对于“最小TTL”输入“86400”，对于“最大TTL”输入“31536000”，对于“默认TTL”输入“86400”。转发所有Cookies和查询字符串。</p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mu"><img src="../Images/4a18899a74eef55ff620d6650d0002af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qVvXHXyoTLYfnos1hAB5yw.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">分发设置</figcaption></figure><p id="f6f3" class="pw-post-body-paragraph lb lc iq ld b le mn lg lh li mo lk ll lm mp lo lp lq mq ls lt lu mr lw lx ly ij bi translated">最后，对于“默认根对象”，键入“index.html”。</p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mu"><img src="../Images/b329522365666146e74a2bf63b02efe1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_j6CKk791rzN0ze0IxwUfQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">默认根对象index.html</figcaption></figure><p id="7ee1" class="pw-post-body-paragraph lb lc iq ld b le mn lg lh li mo lk ll lm mp lo lp lq mq ls lt lu mr lw lx ly ij bi translated">接受其他所有内容的默认值，然后单击“Create Distribution”。创建发行版需要几分钟时间。</p><h2 id="5dc6" class="mi ke iq bd kf ng nh dn kj ni nj dp kn lm nk nl kr lq nm nn kv lu no np kz nq bi translated">创建代码构建IAM角色</h2><p id="5d82" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">在<a class="ae kc" href="https://console.aws.amazon.com/iam" rel="noopener ugc nofollow" target="_blank">https://console.aws.amazon.com/iam</a>打开AWS IAM控制台。单击左侧导航面板中的“角色”。然后点击“创建角色”。受信任实体的类型将是“AWS服务”,使用该角色的服务是“代码构建”。</p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mu"><img src="../Images/8c832e3c633ce63b477062c84d2cca63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aRY3NZwLll7tVaSOLsZpIQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">代码构建用例</figcaption></figure><p id="c824" class="pw-post-body-paragraph lb lc iq ld b le mn lg lh li mo lk ll lm mp lo lp lq mq ls lt lu mr lw lx ly ij bi translated">在下一页上，单击“创建策略”。</p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mu"><img src="../Images/939ca8d551042159a2db70a29f477392.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1gItUhPOi_GNRg9khzO3hw.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">创建新的IAM策略</figcaption></figure><p id="c569" class="pw-post-body-paragraph lb lc iq ld b le mn lg lh li mo lk ll lm mp lo lp lq mq ls lt lu mr lw lx ly ij bi translated">在“创建策略”屏幕上，单击“JSON”选项卡并在下面输入JSON，在适用的地方填写您的AWS帐户ID:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="64b6" class="mi ke iq me b gy mj mk l ml mm">{<br/>  "Version": "2012-10-17",<br/>  "Statement": [<br/>      {<br/>          "Action": [<br/>              "s3:GetObject",<br/>              "s3:GetObjectVersion",<br/>              "s3:GetBucketVersioning",<br/>              "s3:PutObject"<br/>          ],<br/>          "Resource": [<br/>              "arn:aws:s3:::tournament-brackets-pipeline-&lt;YOUR AWS ACCOUNT ID&gt;",<br/>              "arn:aws:s3:::tournament-brackets-pipeline-&lt;YOUR AWS ACCOUNT ID&gt;/*"<br/>          ],<br/>          "Effect": "Allow"<br/>      },<br/>      {<br/>          "Action": [<br/>              "s3:GetObject",<br/>              "s3:GetObjectVersion",<br/>              "s3:GetBucketVersioning",<br/>              "s3:PutObject",<br/>              "s3:PutObjectAcl"<br/>          ],<br/>          "Resource": [<br/>              "arn:aws:s3:::tournament-brackets-&lt;YOUR AWS ACCOUNT ID&gt;",<br/>              "arn:aws:s3:::tournament-brackets-&lt;YOUR AWS ACCOUNT ID&gt;/*"<br/>          ],<br/>          "Effect": "Allow"<br/>      },<br/>      {<br/>          "Action": [<br/>              "logs:CreateLogGroup",<br/>              "logs:CreateLogStream",<br/>              "logs:PutLogEvents",<br/>              "cloudfront:CreateInvalidation"<br/>          ],<br/>          "Resource": [<br/>              "*"<br/>          ],<br/>          "Effect": "Allow"<br/>      }<br/>  ]<br/>}</span></pre><p id="e49d" class="pw-post-body-paragraph lb lc iq ld b le mn lg lh li mo lk ll lm mp lo lp lq mq ls lt lu mr lw lx ly ij bi translated">点击“审查政策”。在“审查策略”页面上，输入“CodeBuildRoot”作为名称，然后单击“创建策略”。</p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mu"><img src="../Images/108d25660bf9e10406ad6bfde0079571.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YKicTrWyO8RagdbCgNIpoA.png"/></div></div></figure><p id="93b1" class="pw-post-body-paragraph lb lc iq ld b le mn lg lh li mo lk ll lm mp lo lp lq mq ls lt lu mr lw lx ly ij bi translated">一旦您返回到“创建角色”页面，您应该会看到您的新策略在列表中被选中。点击“下一页:标签”进入下一页。</p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mu"><img src="../Images/1107dd000f4c74695bd3be9e0a1fbc75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8F_2SxA7G_ROEcP_oLAhJw.png"/></div></div></figure><p id="c91b" class="pw-post-body-paragraph lb lc iq ld b le mn lg lh li mo lk ll lm mp lo lp lq mq ls lt lu mr lw lx ly ij bi translated">输入您希望附加的任何标签，然后单击“下一步:查看”。在“Review”页面上，为您的IAM角色输入一个名称，我们建议像“CodeBuildRole”这样简单的名称。准备好之后，点击“创建角色”。</p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mu"><img src="../Images/60b8dd0cb9ddd67e7a33546e93c4e7ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YaZlxzGjnJr-vj0j0QAYzg.png"/></div></div></figure><p id="7f9f" class="pw-post-body-paragraph lb lc iq ld b le mn lg lh li mo lk ll lm mp lo lp lq mq ls lt lu mr lw lx ly ij bi translated">接下来，我们将创建CodeBuild项目。在https://console.aws.amazon.com/codesuite/codebuild的<a class="ae kc" href="https://console.aws.amazon.com/codesuite/codebuild" rel="noopener ugc nofollow" target="_blank">打开AWS代码构建控制台。单击“创建项目”或“创建构建项目”。</a></p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/c3ce8cf59aa3a24cd9991c8ddb1db09c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1308/format:webp/1*CNJa7aDdHjNqHgiurteWIw.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">构建项目</figcaption></figure><p id="102f" class="pw-post-body-paragraph lb lc iq ld b le mn lg lh li mo lk ll lm mp lo lp lq mq ls lt lu mr lw lx ly ij bi translated">在“创建构建项目”屏幕上，为“项目名称”输入一些简单的东西，如“pingpongbracts-CodeBuild ”,并附上您想要的任何标签。</p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/843ddbb7fee937571f3f31bddcae2013.png" data-original-src="https://miro.medium.com/v2/resize:fit:1282/format:webp/1*jqJSHWcMtPhgTzIUrDzUfw.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">创建生成项目</figcaption></figure><p id="53a0" class="pw-post-body-paragraph lb lc iq ld b le mn lg lh li mo lk ll lm mp lo lp lq mq ls lt lu mr lw lx ly ij bi translated">对于“Source provider ”,输入“AWS CodeCommit”并选择您在步骤a中创建的存储库。</p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/6ed721ae916e314c095f0007dd267e30.png" data-original-src="https://miro.medium.com/v2/resize:fit:1270/format:webp/1*97sMVto_8TWNEdFVB_Ed_g.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">来源提供商</figcaption></figure><p id="e338" class="pw-post-body-paragraph lb lc iq ld b le mn lg lh li mo lk ll lm mp lo lp lq mq ls lt lu mr lw lx ly ij bi translated">在“环境”下，使用Ubuntu管理的映像(aws/codebuild/standard:2.0)和标准运行时。选择“总是使用此运行时版本的最新映像”。</p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/55ef918976d4d491a2e6fafe2ad44a56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1268/format:webp/1*t88iGxgmri50gCdzeO12aA.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">环境</figcaption></figure><p id="d647" class="pw-post-body-paragraph lb lc iq ld b le mn lg lh li mo lk ll lm mp lo lp lq mq ls lt lu mr lw lx ly ij bi translated">对于“服务角色”,使用现有的服务角色，并在“角色名称”下拉列表中选择我们在步骤E中创建的角色。允许AWS CodeBuild修改服务角色，以便它可以用于此生成项目。</p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/55255460d63779f9464b065495622391.png" data-original-src="https://miro.medium.com/v2/resize:fit:1276/format:webp/1*KmFpwf6HSunKtLuJhHJO5A.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">服务角色</figcaption></figure><p id="f786" class="pw-post-body-paragraph lb lc iq ld b le mn lg lh li mo lk ll lm mp lo lp lq mq ls lt lu mr lw lx ly ij bi translated">在“Buildspec”下选择“Insert build commands”并切换到编辑器视图。</p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nw"><img src="../Images/a3cc2abae63e337e7bef082942f808a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1274/format:webp/1*DNzm7N0I0V3IZ8_98NHNIQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">构建规范</figcaption></figure><p id="ca16" class="pw-post-body-paragraph lb lc iq ld b le mn lg lh li mo lk ll lm mp lo lp lq mq ls lt lu mr lw lx ly ij bi translated">在编辑器中粘贴以下构建规范(确保仔细检查缩进并在注明的地方替换您的bucket名称):</p><figure class="lz ma mb mc gt jr"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="45ee" class="pw-post-body-paragraph lb lc iq ld b le mn lg lh li mo lk ll lm mp lo lp lq mq ls lt lu mr lw lx ly ij bi translated">对于“工件”,选择“无工件”,并选中“CloudWatch日志”复选框。然后点击“创建构建项目”。</p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/700c4b87b31ae6e8c993fff750324dcf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1266/format:webp/1*8tS626Fm2lQvadL6Gy7yhQ.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">工件+日志</figcaption></figure><p id="f57f" class="pw-post-body-paragraph lb lc iq ld b le mn lg lh li mo lk ll lm mp lo lp lq mq ls lt lu mr lw lx ly ij bi translated">然后，我们将想要创建代码管道角色和管道。打开位于<a class="ae kc" href="https://console.aws.amazon.com/codesuite/codepipeline/pipelines" rel="noopener ugc nofollow" target="_blank">https://console . AWS . Amazon . com/code suite/code pipeline/pipelines</a>的AWS代码管道控制台。点击“创建管道”。</p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/82b4a645a78f9cbf1877119b3f2e032d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1286/format:webp/1*zcQ1p28S9DRHrpeUq2V4NQ.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">创建管道</figcaption></figure><p id="184e" class="pw-post-body-paragraph lb lc iq ld b le mn lg lh li mo lk ll lm mp lo lp lq mq ls lt lu mr lw lx ly ij bi translated">对于“管道名称”，输入易于识别的内容。我们建议您输入“pingpongbractspipeline-”,后跟您的AWS帐户Id。在“服务角色”下，选择“新服务角色”并选中“允许AWS代码管道创建服务角色，以便它可以与此新管道一起使用”。在“高级设置”下选择“自定义位置”,并给出我们在前面创建的桶。</p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/7ea5217d10f0acb418caff99bae3b352.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*FgcLKJyKZogkxSC_NQdHtg.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">管道设置</figcaption></figure><p id="2cb6" class="pw-post-body-paragraph lb lc iq ld b le mn lg lh li mo lk ll lm mp lo lp lq mq ls lt lu mr lw lx ly ij bi translated">在“添加源阶段”页面上，选择“AWS CodeCommit”作为源提供者。从本地终端的PingPongBrackets目录中，执行以下命令，替换您的区域ID(如果适用):</p><blockquote class="oc od oe"><p id="ecbf" class="lb lc of ld b le mn lg lh li mo lk ll og mp lo lp oh mq ls lt oi mr lw lx ly ij bi translated">git远程添加代码提交https://git-代码提交。<your aws="" region="" id="">. Amazon AWS . com/v1/repos/pingpongbracts</your></p></blockquote><p id="f588" class="pw-post-body-paragraph lb lc iq ld b le mn lg lh li mo lk ll lm mp lo lp lq mq ls lt lu mr lw lx ly ij bi translated">在你的<a class="ae kc" href="https://git-scm.com/docs/git-config" rel="noopener ugc nofollow" target="_blank">里。gitconfig </a>文件你将需要添加以下内容:</p><blockquote class="oc od oe"><p id="5bd3" class="lb lc of ld b le mn lg lh li mo lk ll og mp lo lp oh mq ls lt oi mr lw lx ly ij bi translated">[凭证]</p><p id="9e30" class="lb lc of ld b le mn lg lh li mo lk ll og mp lo lp oh mq ls lt oi mr lw lx ly ij bi translated">帮手=！aws —配置文件<your local="" aws="" profile="" name="">代码提交凭据-助手$@</your></p><p id="3039" class="lb lc of ld b le mn lg lh li mo lk ll og mp lo lp oh mq ls lt oi mr lw lx ly ij bi translated">UseHttpPath = true</p><p id="8a80" class="lb lc of ld b le mn lg lh li mo lk ll og mp lo lp oh mq ls lt oi mr lw lx ly ij bi translated">[用户]</p><p id="7ec5" class="lb lc of ld b le mn lg lh li mo lk ll og mp lo lp oh mq ls lt oi mr lw lx ly ij bi translated">name = <your first="" and="" last="" name=""/></p><p id="5dc2" class="lb lc of ld b le mn lg lh li mo lk ll og mp lo lp oh mq ls lt oi mr lw lx ly ij bi translated">电子邮件= <your email="" address=""/></p><p id="4f6b" class="lb lc of ld b le mn lg lh li mo lk ll og mp lo lp oh mq ls lt oi mr lw lx ly ij bi translated">[证书]</p><p id="8637" class="lb lc of ld b le mn lg lh li mo lk ll og mp lo lp oh mq ls lt oi mr lw lx ly ij bi translated">helper = UseHttpPath=true</p></blockquote><p id="adbc" class="pw-post-body-paragraph lb lc iq ld b le mn lg lh li mo lk ll lm mp lo lp lq mq ls lt lu mr lw lx ly ij bi translated">一旦完成，您就可以通过HTTPS将代码推送到您的AWS CodeCommit repo。为此，请从repo home中的终端执行以下操作:</p><blockquote class="oc od oe"><p id="0648" class="lb lc of ld b le mn lg lh li mo lk ll og mp lo lp oh mq ls lt oi mr lw lx ly ij bi translated">git推送代码提交主机</p></blockquote><p id="d3c9" class="pw-post-body-paragraph lb lc iq ld b le mn lg lh li mo lk ll lm mp lo lp lq mq ls lt lu mr lw lx ly ij bi translated">这将把React应用程序代码推送到AWS CodeCommit repo，并启动管道。要查看管道的运行情况，请打开位于<a class="ae kc" href="https://console.aws.amazon.com/codesuite/codepipeline/pipelines" rel="noopener ugc nofollow" target="_blank">https://console . AWS . Amazon . com/code suite/code pipeline/pipelines</a>的AWS代码管道控制台。</p><h1 id="ebc9" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">结论</h1><p id="875c" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">本教程的开发运维/基础架构部分到此结束。接下来，我们将填充后端功能的其余部分。</p></div></div>    
</body>
</html>