<html>
<head>
<title>Install GitLab &amp; Jenkins on CentOS 7</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在CentOS 7上安装GitLab &amp; Jenkins</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/install-gitlab-jenkins-on-centos-7-504df77fae4?source=collection_archive---------11-----------------------#2020-04-11">https://levelup.gitconnected.com/install-gitlab-jenkins-on-centos-7-504df77fae4?source=collection_archive---------11-----------------------#2020-04-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/24400ed80d285d002432905a8e340def.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IEr-0U0gDQbVDqomM2YRYg.jpeg"/></div></div></figure><p id="c8eb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果您是DevOps或CI/CD的新手，并希望在不配置多个服务器或网络的情况下开始使用这些工具，那么在同一台机器上安装GitLab和Jenkins可以加快您的配置，并允许您专注于学习工具本身。</p><p id="92ee" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="kw">免责声明:不建议将这种类型的配置用于生产，而是作为学习如何实施CI/CD的第一步。</em></p><p id="06d6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">到本文结束时，您将在同一个CentOS 7服务器上安装GitLab和Jenkins，GitLab监听默认HTTP端口(80)，Jenkins监听端口8081。</p><p id="3b5f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">之后，请看<a class="ae kx" href="https://medium.com/@gyfdev/jenkins-pipeline-with-gitlab-for-java-projects-d2e10c08e255" rel="noopener">这篇文章</a>来学习如何通过推送至GitLab库来自动触发Jenkins构建。</p></div><div class="ab cl ky kz hu la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ij ik il im in"><h1 id="ab0d" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">步骤1:安装GitLab</h1><p id="c27d" class="pw-post-body-paragraph jy jz iq ka b kb md kd ke kf me kh ki kj mf kl km kn mg kp kq kr mh kt ku kv ij bi translated">安装依赖项并配置系统防火墙以允许HTTP/S(尽管本教程只讨论HTTP):</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="d216" class="mr lg iq mn b gy ms mt l mu mv">sudo yum install -y curl policycoreutils-python openssh-server<br/>sudo systemctl enable sshd<br/>sudo systemctl start sshd<br/>sudo firewall-cmd --permanent --add-service=http<br/>sudo firewall-cmd --permanent --add-service=https<br/>sudo systemctl reload firewalld</span></pre><p id="4e08" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">添加GitLab包存储库:</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="fdda" class="mr lg iq mn b gy ms mt l mu mv">curl https://packages.gitlab.com/install/repositories/gitlab/gitlab-ee/script.rpm.sh | sudo bash</span></pre><p id="72aa" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">安装GitLab，传入您想要访问它的主机URL。在我们的例子中，它只是<a class="ae kx" href="http://localhost" rel="noopener ugc nofollow" target="_blank"> http://localhost </a>(默认端口80):</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="02fd" class="mr lg iq mn b gy ms mt l mu mv">sudo EXTERNAL_URL="<a class="ae kx" href="http://localhost" rel="noopener ugc nofollow" target="_blank">http://localhost</a>" yum install -y gitlab-ee</span></pre><p id="c44b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">通过在web浏览器中访问<a class="ae kx" href="http://localhost" rel="noopener ugc nofollow" target="_blank"> http://localhost </a>来验证安装。如果遇到错误，请确保没有其他服务正在侦听端口80。此外，端口8080应该是空闲的，因为这是内部Unicorn守护进程监听的端口。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/d8f4fec052e88c54999fab42c6fab99f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZsYc77n-lqVILlvKEQoTuQ.png"/></div></div></figure><p id="2e8d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">输入新密码，然后使用您刚刚创建的密码作为<strong class="ka ir"> root </strong>登录。然后，您应该会看到欢迎页面:</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mx"><img src="../Images/0719f33285cc888637afba5c1cae160f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UGT1gDRQU1UCr4pVUaqUZA.png"/></div></div></figure><h1 id="ff4a" class="lf lg iq bd lh li my lk ll lm mz lo lp lq na ls lt lu nb lw lx ly nc ma mb mc bi translated">步骤2:安装Jenkins</h1><p id="a2f0" class="pw-post-body-paragraph jy jz iq ka b kb md kd ke kf me kh ki kj mf kl km kn mg kp kq kr mh kt ku kv ij bi translated">安装Java，添加Jenkins包存储库，并安装Jenkins:</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="3fbb" class="mr lg iq mn b gy ms mt l mu mv">sudo yum install java-1.8.0-openjdk-devel -y<br/>curl --silent --location <a class="ae kx" href="http://pkg.jenkins-ci.org/redhat-stable/jenkins.repo" rel="noopener ugc nofollow" target="_blank">http://pkg.jenkins-ci.org/redhat-stable/jenkins.repo</a> | sudo tee /etc/yum.repos.d/jenkins.repo<br/>sudo rpm --import <a class="ae kx" href="https://jenkins-ci.org/redhat/jenkins-ci.org.key" rel="noopener ugc nofollow" target="_blank">https://jenkins-ci.org/redhat/jenkins-ci.org.key</a><br/>sudo yum install jenkins -y</span></pre><p id="11d3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">编辑Jenkins配置文件，以便Jenkins监听端口8081，而不是默认的8080:</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="a150" class="mr lg iq mn b gy ms mt l mu mv">sudo sed -i 's/JENKINS_PORT="8080"/JENKINS_PORT="8081"/g' /etc/sysconfig/jenkins</span></pre><p id="d0b9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">允许端口8081通过系统防火墙:</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="b350" class="mr lg iq mn b gy ms mt l mu mv">sudo firewall-cmd --permanent --zone=public --add-port=8081/tcp<br/>sudo firewall-cmd --reload</span></pre><p id="aa56" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">启动Jenkins服务:</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="7e2b" class="mr lg iq mn b gy ms mt l mu mv">sudo systemctl enable jenkins<br/>sudo systemctl start jenkins</span></pre><p id="7ce4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在您的网络浏览器中，转到<a class="ae kx" href="http://localhost:8081" rel="noopener ugc nofollow" target="_blank"> http://localhost:8081 </a></p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/1c7151780adad882b91fef9ace7c144f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7rbZKhlEGW6lBRewKgzXhw.png"/></div></div></figure><p id="77cc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">从指定位置复制管理员密码，并在中输入。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/8a75740c7b2f766dd5cf2e08d6920a6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*moKVKRcQd5H_15FjPmM4wg.png"/></div></div></figure><p id="2ec1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">点击<strong class="ka ir">安装建议插件</strong>并等待插件安装。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nd"><img src="../Images/37b82407f34b1b134c1e0aa3e210ead2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jkcUALoHaxFtAJGfE4MDEQ.png"/></div></div></figure><p id="724f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">创建管理员用户。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ne"><img src="../Images/73b956a329d53a41ea0786811c57bb0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fpzLE6oOkqASfMKZ64Haqw.png"/></div></div></figure><p id="0b9f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">确保Jenkins URL为<a class="ae kx" href="http://localhost:8081" rel="noopener ugc nofollow" target="_blank"> http://localhost:8081 </a>并点击<strong class="ka ir">保存并完成。</strong></p><p id="3f62" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">使用您的新管理员凭据登录，您应该会看到以下屏幕:</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ne"><img src="../Images/1009f9876709bbfb503923c46c3ea6dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Zjs0AdO_gr6nhCfBLX_Wbw.png"/></div></div></figure></div><div class="ab cl ky kz hu la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ij ik il im in"><p id="5cc0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">恭喜你！您已经在CentOS 7上成功安装了GitLab和Jenkins。参见<a class="ae kx" href="https://medium.com/@gyfdev/jenkins-pipeline-with-gitlab-for-java-projects-d2e10c08e255" rel="noopener">本帖</a>了解如何配置Jenkins从GitLab自动构建Java项目。</p><h2 id="f6a2" class="mr lg iq bd lh nf ng dn ll nh ni dp lp kj nj nk lt kn nl nm lx kr nn no mb np bi translated">来源:</h2><ul class=""><li id="54a9" class="nq nr iq ka b kb md kf me kj ns kn nt kr nu kv nv nw nx ny bi translated"><a class="ae kx" href="https://about.gitlab.com/install/#centos-7" rel="noopener ugc nofollow" target="_blank">https://about.gitlab.com/install/#centos-7</a></li><li id="cf78" class="nq nr iq ka b kb nz kf oa kj ob kn oc kr od kv nv nw nx ny bi translated"><a class="ae kx" href="https://linuxize.com/post/how-to-install-jenkins-on-centos-7/" rel="noopener ugc nofollow" target="_blank">https://linuxize . com/post/how-to-install-Jenkins-on-centos-7/</a></li></ul></div></div>    
</body>
</html>