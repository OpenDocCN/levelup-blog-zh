<html>
<head>
<title>Understand and Configure Absolute Import Paths in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">理解和配置JavaScript中的绝对导入路径</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/understand-and-configure-absolute-import-paths-in-javascript-5cde3be2630d?source=collection_archive---------1-----------------------#2020-03-02">https://levelup.gitconnected.com/understand-and-configure-absolute-import-paths-in-javascript-5cde3be2630d?source=collection_archive---------1-----------------------#2020-03-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="ef43" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">自动支持相对导入路径。绝对导入路径是如何配置的？</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/f0df78fa039bf68e9832bcfd0d5ea0df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kxkQV5CkObvl3JGzsX0RGw.jpeg"/></div></div></figure><p id="055b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">ES6模块是一个JavaScript文件，在它自己的范围内执行。模块中声明的变量、函数和类需要显式导出。所有要在其他文件中使用的模块必须由接收文件导入。</p><p id="4e69" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">正如我在另一篇文章中所描述的，导入路径可以写成:</p><pre class="kp kq kr ks gt lb lc ld le aw lf bi"><span id="a7e6" class="lg lh it lc b gy li lj l lk ll">import * as myImportModule from './myExports';</span></pre><p id="afd3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这里。/myExports '是一个模块名，它是用相对路径写的。模块名也可以用绝对路径来写，但是我们必须配置我们的项目来识别它。无论哪种方式，路径都指向一个. js。jsx，. d.ts，.ts，或者。包含要导入的模块的tsx文件。</p><p id="1d91" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">模块名也可以指向node_modules下的库，在这种情况下不需要路径(node_modules是根)。</p><pre class="kp kq kr ks gt lb lc ld le aw lf bi"><span id="f0c7" class="lg lh it lc b gy li lj l lk ll">import React from 'react';<br/>import { Provider } from 'react-redux';</span></pre><h1 id="8482" class="lm lh it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">什么是相对和绝对导入路径？</h1><p id="2c28" class="pw-post-body-paragraph jq jr it js b jt mj jv jw jx mk jz ka kb ml kd ke kf mm kh ki kj mn kl km kn im bi translated">让我们来看看下面的目录结构:</p><pre class="kp kq kr ks gt lb lc ld le aw lf bi"><span id="2df4" class="lg lh it lc b gy li lj l lk ll">src<br/> └─┬── folder1<br/>   |      └───── file1.js<br/>   |<br/>   ├── folder2<br/>   |      └───── folder5<br/>   |                └───── file3.js<br/>   |<br/>   ├── folder3<br/>   |      └───── file2.js<br/>   |<br/>   └── folder4<br/>          └───── folder6<br/>                    └───── folder7<br/>                              ├───── file4.js<br/>                              └───── file5.js</span></pre><p id="240c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">相对导入路径是相对于当前位置的路径。</p><p id="16de" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">对于file1.js，它可以通过这些相对路径导入其他模块:</p><pre class="kp kq kr ks gt lb lc ld le aw lf bi"><span id="700d" class="lg lh it lc b gy li lj l lk ll">import * as file2 from '../folder3/file2';<br/>import * as file3 from '../folder2/folder5/file3';<br/>import * as file4 from '../folder4/folder6/folder7/file4';<br/>import * as file5 from '../folder4/folder6/folder7/file5';</span></pre><p id="938c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">对于file5.js，它可以通过这些相对路径导入其他模块:</p><pre class="kp kq kr ks gt lb lc ld le aw lf bi"><span id="2526" class="lg lh it lc b gy li lj l lk ll">import * as file1 from '../../../folder1/file1';<br/>import * as file2 from '../../../folder3/file2';<br/>import * as file3 from '../../../folder2/folder5/file3';<br/>import * as file4 from './file4';</span></pre><p id="f1b7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">绝对导入路径是从根目录开始的路径，您需要首先定义一个根目录。在典型的JavaScript/TypeScript项目中，一个常见的根目录是<code class="fe mo mp mq lc b">src</code>目录。</p><p id="212c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">对于file1.js，它可以通过以下绝对路径从其他文件导入:</p><pre class="kp kq kr ks gt lb lc ld le aw lf bi"><span id="0780" class="lg lh it lc b gy li lj l lk ll">import * as file2 from 'folder3/file2';<br/>import * as file3 from 'folder2/folder5/file3';<br/>import * as file4 from 'folder4/folder6/folder7/file4';<br/>import * as file5 from 'folder4/folder6/folder7/file5';</span></pre><p id="90e7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">对于file5.js，它可以通过以下绝对路径从其他文件导入:</p><pre class="kp kq kr ks gt lb lc ld le aw lf bi"><span id="eb87" class="lg lh it lc b gy li lj l lk ll">import * as file1 from 'folder1/file1';<br/>import * as file2 from 'folder3/file2';<br/>import * as file3 from 'folder2/folder5/file3';<br/>import * as file4 from 'folder4/folder6/folder7/file4';</span></pre><p id="5287" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">下表比较了相对导入路径和绝对导入路径。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi mr"><img src="../Images/32e3bef9fc6f4c29b9d6e1f57794a673.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9NU1_UY8NB0m-DMNo47FcQ.png"/></div></div></figure><p id="717e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">相对和绝对导入路径各有利弊。一般来说，建议使用绝对导入路径来避免相对路径地狱，尽管这两种方式<a class="ae la" href="https://forums.meteor.com/t/import-absolute-or-relative-path/20595" rel="noopener ugc nofollow" target="_blank">可以共存，并且可以根据具体情况有选择地使用</a>。</p><p id="db72" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">对于file5.js，以下混合方式会产生最短的导入路径:</p><pre class="kp kq kr ks gt lb lc ld le aw lf bi"><span id="35ab" class="lg lh it lc b gy li lj l lk ll">import * as file1 from 'folder1/file1';<br/>import * as file2 from 'folder3/file2';<br/>import * as file3 from 'folder2/folder5/file3';<br/>import * as file4 from './file4';</span></pre><h1 id="46ee" class="lm lh it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">如何用绝对路径配置导入？</h1><p id="f5c9" class="pw-post-body-paragraph jq jr it js b jt mj jv jw jx mk jz ka kb ml kd ke kf mm kh ki kj mn kl km kn im bi translated">默认情况下不支持绝对路径。这些是我们用于由<a class="ae la" href="https://medium.com/better-programming/10-fun-facts-about-create-react-app-eb7124aa3785" rel="noopener"> Create React App </a>生成的项目的配置。<code class="fe mo mp mq lc b">src</code>是我们的根目录。</p><h2 id="1559" class="lg lh it bd ln ms mt dn lr mu mv dp lv kb mw mx lz kf my mz md kj na nb mh nc bi translated"><code class="fe mo mp mq lc b">jsconfig.json/tsconfig.json</code></h2><p id="7468" class="pw-post-body-paragraph jq jr it js b jt mj jv jw jx mk jz ka kb ml kd ke kf mm kh ki kj mn kl km kn im bi translated">对于JavaScript项目，<code class="fe mo mp mq lc b">jsconfig.json</code>的设置如下:</p><pre class="kp kq kr ks gt lb lc ld le aw lf bi"><span id="d8a9" class="lg lh it lc b gy li lj l lk ll">{<br/>  "compilerOptions": {<br/>    "baseUrl": "src" // "./src" works too<br/>  "include": ["src"]<br/>}</span></pre><p id="c826" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">对于TypeScript项目，<code class="fe mo mp mq lc b">tsconfig.json</code>的设置可以完全一样。</p><p id="d4d1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">随着配置文件的建立，构建过程将接受绝对路径。然后，应用程序正常运行。</p><h2 id="12c3" class="lg lh it bd ln ms mt dn lr mu mv dp lv kb mw mx lz kf my mz md kj na nb mh nc bi translated">. eslintrc.js</h2><p id="3d2a" class="pw-post-body-paragraph jq jr it js b jt mj jv jw jx mk jz ka kb ml kd ke kf mm kh ki kj mn kl km kn im bi translated">linter是一个静态代码分析工具，用于识别JavaScript代码中的问题模式。ESLint是最受欢迎的棉绒。您可以设置以下NPM脚本来运行lint。</p><pre class="kp kq kr ks gt lb lc ld le aw lf bi"><span id="0eb9" class="lg lh it lc b gy li lj l lk ll">"scripts": {<br/>  "lint": "npx eslint --max-warnings=0 --ext .tsx,.ts,.js,.jsx src/ --fix"<br/>}</span></pre><p id="ea8a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">lint脚本可以单独执行，也可以作为构建过程的一部分进行配置。</p><p id="9d5a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">为了让lint脚本接受绝对路径，也为了让IDE(如<a class="ae la" href="https://medium.com/better-programming/10-useful-plugins-for-visual-studio-code-6ab62c0b14ee" rel="noopener"> VSCode </a>)不在绝对路径上抛出lint错误，我们为JavaScript和TypeScript项目设置了如下的<code class="fe mo mp mq lc b">.eslintrc.js</code>:</p><pre class="kp kq kr ks gt lb lc ld le aw lf bi"><span id="ac2a" class="lg lh it lc b gy li lj l lk ll">module.exports = {<br/>  settings: {<br/>    'import/resolver': {<br/>      node: {<br/>        extensions: ['.js', '.jsx', '.d.ts', '.ts', '.tsx'],<br/>        moduleDirectory: ['node_modules', 'src'],<br/>      },<br/>    },<br/>  },<br/>  ...<br/>}</span></pre><p id="522a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">JavaScript项目不需要有<code class="fe mo mp mq lc b">‘.d.ts’, ‘.ts’, ‘.tsx’</code>,但是把它们留在那里没有坏处。</p><h2 id="b145" class="lg lh it bd ln ms mt dn lr mu mv dp lv kb mw mx lz kf my mz md kj na nb mh nc bi translated">jest.config.js</h2><p id="12c4" class="pw-post-body-paragraph jq jr it js b jt mj jv jw jx mk jz ka kb ml kd ke kf mm kh ki kj mn kl km kn im bi translated">我们使用Jest为JavaScript和TypeScript项目运行单元测试用例。为了让单元测试用例定位代码中的绝对路径，我们需要设置<code class="fe mo mp mq lc b">jest.config.js</code>以将<code class="fe mo mp mq lc b">src</code>作为根:</p><pre class="kp kq kr ks gt lb lc ld le aw lf bi"><span id="e226" class="lg lh it lc b gy li lj l lk ll">module.exports = {<br/>  moduleDirectories: ['node_modules', 'src'],<br/>  ...<br/>};</span></pre></div><div class="ab cl nd ne hx nf" role="separator"><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni"/></div><div class="im in io ip iq"><p id="5e67" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们在项目中使用了绝对导入路径，并且效果很好。你想试一试吗？</p><p id="ac57" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">感谢阅读。我希望这有所帮助。如果你有任何问题，请随时回复。你可以在这里看到我的其他媒体出版物<a class="ae la" href="https://medium.com/@jenniferfubook/jennifer-fus-web-development-publications-1a887e4454af" rel="noopener"/>。</p></div></div>    
</body>
</html>