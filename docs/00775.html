<html>
<head>
<title>React &amp; CSS-in-JS: ES6 Objects vs Tagged Template Literals</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React &amp; CSS-in-JS: ES6对象与标记模板文字</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/react-css-in-js-es6-objects-vs-tagged-template-literals-71670e78995f?source=collection_archive---------1-----------------------#2019-07-24">https://levelup.gitconnected.com/react-css-in-js-es6-objects-vs-tagged-template-literals-71670e78995f?source=collection_archive---------1-----------------------#2019-07-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/5032796e5176728b5d624d0055e8be75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jpgVOkJ6lfx8bWfSAmGK2Q.jpeg"/></div></div></figure><p id="ed97" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当谈到CSS-in-JS时，一个值得讨论的重要话题是使用标记模板文字(TTLs)来包含CSS语法与使用对象。我最近在<a class="ae kw" href="https://medium.com/@ESR360/why-i-dislike-existing-css-in-js-solutions-for-react-7b81786e0fd5" rel="noopener">的另一篇文章</a>中提到“我个人无法忍受TTLs”，但没有提供任何资格或理由。我没有意识到这个观点如此有争议…</p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi kx"><img src="../Images/3265eeda735b54491cd363dc0073279c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*dk1CFDWFsaKlmCsXbNRLWQ.gif"/></div></div></figure><p id="e0cd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我曾天真地认为，其他所有人都和我一样，认为他们有点不诚实，因此只不过是对一个没有更好解决方案的问题的一个可容忍的变通办法。事实上，很多人真的很喜欢它们，所以在这篇文章中，我想解释为什么我觉得在TTLs中使用对象是一种更好的Sass语法方法，但实际上，这确实取决于您的偏好以及您希望您的API是什么样的。</p><p id="94ff" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我想在TTLs中使用Objects而不是Sass的最初动机是，因为我使用JavaScript进行设计，所以对所有逻辑和抽象使用普通的JavaScript似乎更有意义，而不是在字符串中编写代码(从而编写逻辑),这本质上就是TTLs中的CSS。</p><p id="f950" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">尽管如此，考虑下面的伪代码利用TTLs来包含一些Sass语法:</p><figure class="ky kz la lb gt jr"><div class="bz fp l di"><div class="lc ld l"/></div></figure><p id="b966" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这段伪代码可能已经很好地适用于现有的解决方案，但是我想如果我发现自己在做这样的事情，我会问自己的第一件事是，为什么不直接使用Sass，因为它看起来是一样的？除了作用域样式的潜在好处(使用一些定制的Sass库，甚至像BEM这样的命名约定，也可以解决作用域的问题)，<a class="ae kw" href="https://spin.atomicobject.com/2018/12/28/css-in-javascript-benefits/" rel="noopener ugc nofollow" target="_blank">这篇文章</a>指出，人们可能选择CSS-in-JS而不是Sass的其他原因包括:</p><ul class=""><li id="9d2d" class="le lf iq ka b kb kc kf kg kj lg kn lh kr li kv lj lk ll lm bi translated">用普通的JavaScript定义你的助手函数</li><li id="8f5b" class="le lf iq ka b kb ln kf lo kj lp kn lq kr lr kv lj lk ll lm bi translated">将CSS和React组件放在一起</li><li id="1835" class="le lf iq ka b kb ln kf lo kj lp kn lq kr lr kv lj lk ll lm bi translated">类型检查和内联文档</li><li id="e09d" class="le lf iq ka b kb ln kf lo kj lp kn lq kr lr kv lj lk ll lm bi translated"><em class="ls">懒惰！</em></li></ul><p id="7438" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这些原因可能会(也可能不会)让某些人相信使用CSS-in-JS优于使用Sass，但这并不一定解释为什么如果要使用CSS-in-JS，他们会选择在API中使用包含Sass语法的标记模板文字。好的，当然，它<em class="ls">类似于</em> CSS/Sass，允许您从其他地方复制和粘贴一些现有的CSS/Sass代码，并使用允许您遵循熟悉的样式范例等的语法，这当然都是很好的理由，但让我们考虑一下，我们在这里使用JavaScript并做出反应…</p><p id="172e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">JavaScript，尤其是ES6语法和其他语法，提供了很多简洁的方法，我们可以加以利用。React还提供了许多做其他事情的简洁方法。由于我使用JavaScript处理我的样式，并结合使用React，我的第一个自然选择是利用这些工具已经提供给我的范例。</p><p id="121c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">所以我最初考虑的是JavaScript对象、箭头函数、React组件、状态、道具、上下文等等。这些是我希望我的理想样式API所基于的概念。如果我的样式API是基于选择器嵌套、层叠、div、类名等(即TTLs中的Sass语法)，我就需要担心另一个抽象层。而且不仅仅是在思维方面。您或您的解决方案需要获取React组件及其相应的状态/属性/上下文等，并以某种方式将它们映射到您的Sass声明，通常以类名的形式。用简单的英语来说，大概是这样的:</p><ol class=""><li id="d00d" class="le lf iq ka b kb kc kf kg kj lg kn lh kr li kv lt lk ll lm bi translated">(JSX)在这个组件上，如果<code class="fe lu lv lw lx b">props.someProp</code>为真，添加这个类名</li><li id="07e5" class="le lf iq ka b kb ln kf lo kj lp kn lq kr lr kv lt lk ll lm bi translated">(TTLs中的Sass)在此组件上，如果应用了此类名，请添加这些样式</li></ol><p id="cf5e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">…这似乎或多或少就是在使用React时使用TTLs来包含Sass语法时所发生的情况(或者，实际上，如果您也使用常规CSS/Sass)。</p><p id="739f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">考虑下面的代码，它将解决与前面的标记模板文本示例完全相同的问题(即，当满足相同的条件时，将相同的样式应用于相同的组件)，除了利用前面提到的概念(对象、箭头函数、组件、状态、上下文等):</p><figure class="ky kz la lb gt jr"><div class="bz fp l di"><div class="lc ld l"/></div></figure><p id="4107" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在这两个例子中，或多或少发生了相同的事情，以或多或少相同的方式。对我来说，后一个使用对象、箭头函数、状态和上下文等的例子更有吸引力。旅程现在变成了:</p><ol class=""><li id="808c" class="le lf iq ka b kb kc kf kg kj lg kn lh kr li kv lt lk ll lm bi translated">(JS对象)在这个组件上，如果<code class="fe lu lv lw lx b">props.someProp</code>为真，添加这些样式</li></ol><p id="ddd1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">…不再需要额外的抽象层(即第二步)。这几乎感觉像是API对React组件进行样式化的圣杯；感觉干净，务实，懂事。我还觉得，当使用后一个例子时，传递了更多有用的信息(可能是因为去除了抽象层)，而且<em class="ls">看起来比TTLs例子更好</em>(再次声明，这只是我的观点)。它还可以让你的JSX更干净。</p><p id="5940" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">看看提议的API，我们在这一点上不再真正处理CSS，没有级联的证据，所以我对将解决方案称为CSS-in-JS感到有些不安。它更像是JavaScript样式，或者JavaScript样式表(JSS…JSSS？).这个名字似乎已经被<a class="ae kw" href="https://cssinjs.org/?v=v10.0.0-alpha.23" rel="noopener ugc nofollow" target="_blank">占用了</a>(请注意，是由一个非常好的工具使用的)，所以尽管没有层叠，但继续把它看作CSS-in-JS解决方案可能更实际。</p><h2 id="e820" class="ly lz iq bd ma mb mc dn md me mf dp mg kj mh mi mj kn mk ml mm kr mn mo mp mq bi translated">结论</h2><p id="8f45" class="pw-post-body-paragraph jy jz iq ka b kb mr kd ke kf ms kh ki kj mt kl km kn mu kp kq kr mv kt ku kv ij bi translated">提议的使用对象的API的唯一有争议的缺点(我能想到的)是，它自然地推动使用内联样式，而不是真正的CSS，一些人认为这是一个交易破坏者(鉴于其他好处，我个人对此没有太多意见)。虽然性能很重要，但我需要做一些实际的基准测试，以确定大规模使用内联样式是否有任何明显的缺点。在我的书中，开发者体验的好处是显而易见的。在任何情况下，我确信一些向导可以采用提议的API，并且在必要的时候找到一种方法从它生成真正的CSS。</p><p id="edc5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果您喜欢这篇文章，请查看其他相关文章:</p><ul class=""><li id="d524" class="le lf iq ka b kb kc kf kg kj lg kn lh kr li kv lj lk ll lm bi translated"><a class="ae kw" href="https://medium.com/valtech-design/why-i-dislike-existing-css-in-js-solutions-for-react-7b81786e0fd5?source=your_stories_page---------------------------" rel="noopener">为什么我不喜欢React现有的CSS-in-JS解决方案💅🚫</a></li><li id="c8f1" class="le lf iq ka b kb ln kf lo kj lp kn lq kr lr kv lj lk ll lm bi translated"><a class="ae kw" href="https://medium.com/@ESR360/beautiful-state-context-based-styling-with-react-css-in-js-781a14cb2f9b?source=your_stories_page---------------------------" rel="noopener">美丽状态&amp;基于上下文的样式与React (CSS-in-JS) </a></li></ul></div><div class="ab cl mw mx hu my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="ij ik il im in"><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nd"><img src="../Images/0f4eaa82f76695a20f09ba4fa9fd37ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kbifSkjSDCs7zGgIwXMiwg.png"/></div></div><figcaption class="ne nf gj gh gi ng nh bd b be z dk translated"><a class="ae kw" href="https://twitter.com/esr360" rel="noopener ugc nofollow" target="_blank"> Twitter </a> | <a class="ae kw" href="https://github.com/esr360" rel="noopener ugc nofollow" target="_blank"> Github </a></figcaption></figure></div></div>    
</body>
</html>