<html>
<head>
<title>Solving a Hard Google Interview Question about Path Counting using Matrices</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用矩阵解决谷歌面试中关于路径计数的难题</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/solving-a-hard-google-interview-question-about-path-counting-using-matrices-f3149bfd6ff4?source=collection_archive---------11-----------------------#2022-07-11">https://levelup.gitconnected.com/solving-a-hard-google-interview-question-about-path-counting-using-matrices-f3149bfd6ff4?source=collection_archive---------11-----------------------#2022-07-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/629ea00975ffe03c25a48d86afa6a7c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FA03V3Bas07iER0NdADydQ.png"/></div></div></figure><div class=""/><p id="cd55" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在谷歌面试很难。用这个过去面试中有趣而富有挑战性的问题来测试你的编码和数学能力。</p><h1 id="bc93" class="kz la je bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">这个问题</h1><p id="1ed7" class="pw-post-body-paragraph kb kc je kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">给定一个图G，对于每对节点X和Y，计算从节点X到节点Y的唯一k步路径的数量。</p><figure class="md me mf mg gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mc"><img src="../Images/ff1a69ee97dfa56fe0001f582935f861.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f71-t9vQQlsogh8_88gmjw.png"/></div></div><figcaption class="mh mi gj gh gi mj mk bd b be z dk translated">样本图g</figcaption></figure><h1 id="62ad" class="kz la je bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">解决方案1</h1><p id="7446" class="pw-post-body-paragraph kb kc je kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">第一步是构造图的邻接矩阵。邻接矩阵是由1和0组成的矩阵，对图的连通性信息进行编码。如果存在边，则图中相应的条目为1，否则为0。</p><figure class="md me mf mg gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ml"><img src="../Images/c8b5e337488d2b46954f587f1593923c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FuYv52-5qoFva_0omRocIg.png"/></div></div></figure><figure class="md me mf mg gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mm"><img src="../Images/c98f9b57a74be5e9f5d79b3ad479a51b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1Nmzkup3zNo-y7ylMqLRLA.png"/></div></div></figure><p id="3b0b" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">上面给出的7个顶点上的样本图G的邻接矩阵是:</p><figure class="md me mf mg gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mn"><img src="../Images/19c9ede534e199dc15e08b312a7a5e53.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Hz6h1JDm6cM1kEqk9Q_JuQ.png"/></div></div><figcaption class="mh mi gj gh gi mj mk bd b be z dk translated">g的邻接矩阵A。</figcaption></figure><p id="265f" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在来看看诀窍:我们可以用邻接矩阵的矩阵幂来计算从一个节点到另一个节点的不同路径的数量。如果你需要复习矩阵乘法，请查看本页。</p><p id="edf7" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">对于k=2(两步路径)，我们可以对矩阵求平方，并考虑入口(I，j)。</p><figure class="md me mf mg gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mp"><img src="../Images/cc74eddad85fe1e6538b75e7634903de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3o18JotwBjKNNupWFQpPbA.png"/></div></div><figcaption class="mh mi gj gh gi mj mk bd b be z dk translated">A乘以A的第(I，j)项</figcaption></figure><p id="f485" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这个量正是我们想要的，因为它计算了节点I到中间节点k到节点j之间的路径数，其中k的范围在所有可能的中间节点k之间。如果边(I，k)和(k，j)都存在，则a_ik和a_kj都等于1，这将总和加1。如果其中一条边不存在，那么乘积为零，和不增加。</p><p id="03f4" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这个问题的一般版本的答案是</p><figure class="md me mf mg gt iv gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/f9d7c6502ada731c18794c4fa4fa4943.png" data-original-src="https://miro.medium.com/v2/resize:fit:1370/format:webp/1*IlJm4H5IdPOxM8LuOERczA.png"/></div><figcaption class="mh mi gj gh gi mj mk bd b be z dk translated">矩阵求幂(A乘以自身k次)。I，j指的是结果矩阵的条目(I，j)</figcaption></figure><p id="5665" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这可以用归纳法来证明。</p><h2 id="2f24" class="mr la je bd lb ms mt dn lf mu mv dp lj km mw mx ln kq my mz lr ku na nb lv nc bi translated">时间复杂性分析</h2><p id="a89e" class="pw-post-body-paragraph kb kc je kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">对于k步的情况，如果我们将矩阵一个接一个地相乘(例如使用For循环)，那么时间复杂度为</p><figure class="md me mf mg gt iv gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/e7fdafa4273cff1a14940618396223e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1334/format:webp/1*Lw8__U_iSpThb2PM4K4QjA.png"/></div><figcaption class="mh mi gj gh gi mj mk bd b be z dk translated">n是矩阵中的节点数，k是路径中的步数</figcaption></figure><p id="3231" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">因为矩阵乘法的时间复杂度是立方的。然而，这种解决方案是次优的，因为当k很大时，所需的操作相当大！</p><h1 id="f2c8" class="kz la je bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">解决方案2 —优化</h1><p id="4469" class="pw-post-body-paragraph kb kc je kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">我们可以应用<a class="ae mo" href="https://mathstats.uncg.edu/sites/pauli/112/HTML/secfastexp.html" rel="noopener ugc nofollow" target="_blank">快速取幂</a>，而不是天真地做乘法，这可以被视为动态编程、记忆或递归。我们通过递归地取a的较小幂来计算a的幂。例如，要计算⁶，我们可以写一个⁶ = (A⁸)(A⁸).然后A⁸ = (A⁴)(A⁴).然后是A⁴=(A)(一)。所以我们只需要做a，(a)，(A⁴)和(A⁸)，这是4次矩阵乘法，而不是15次！</p><p id="a929" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">时间复杂度是</p><figure class="md me mf mg gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ne"><img src="../Images/7335d6be4438c9047ee1e4550c2055ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*48Bu8nZk-xpXPoETOxxWAQ.png"/></div></div></figure><p id="96e3" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">相当不错！</p><h1 id="31c5" class="kz la je bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">解决方案3 —更快</h1><p id="10dc" class="pw-post-body-paragraph kb kc je kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">最佳解决方案是预先计算矩阵A的特殊分解:A的<a class="ae mo" href="https://en.wikipedia.org/wiki/Singular_value_decomposition" rel="noopener ugc nofollow" target="_blank">奇异值分解</a>。由于A是对称矩阵，这对应于正交分解</p><figure class="md me mf mg gt iv gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/c4bada1b6756ce6444fe1143bcae706c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1312/format:webp/1*Z5shHVGVIBuJ1D_GrXB0Dg.png"/></div></figure><p id="229c" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">其中D是对角矩阵，Q是正交矩阵。所有这些都是说A的k次方由下式给出</p><figure class="md me mf mg gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ng"><img src="../Images/d0cac431c852e772105696fd1cf9e0bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hzk5Ze4CoDEkxK-En691Uw.png"/></div></div></figure><p id="0869" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">因为D是对角线，所以可以快速计算！如果我们使用快速取幂技巧来计算D的对角元素的幂，我们也可以在对数时间内计算D的k次幂。</p><p id="f059" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">因为形成分解的时间复杂度是N的立方，所以该方法的总时间复杂度是</p><figure class="md me mf mg gt iv gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/9c6e9c45e39df8611c7b5e96cb73f1fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1388/format:webp/1*Gg7zO_uNNedlPxRVAuyz_Q.png"/></div></figure><h1 id="956c" class="kz la je bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">结论</h1><p id="b06d" class="pw-post-body-paragraph kb kc je kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">谷歌和其他科技公司喜欢通过询问时间复杂度(和空间复杂度)来跟进问题。在这个问题中，我们看到了大量的时间复杂度分析、矩阵代数和使用图的邻接矩阵的推理。</p></div><div class="ab cl ni nj hx nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="im in io ip iq"><h1 id="0035" class="kz la je bd lb lc np le lf lg nq li lj lk nr lm ln lo ns lq lr ls nt lu lv lw bi translated">分级编码</h1><p id="ed1c" class="pw-post-body-paragraph kb kc je kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">感谢您成为我们社区的一员！更多内容请参见<a class="ae mo" href="https://levelup.gitconnected.com/" rel="noopener ugc nofollow" target="_blank">升级编码出版物</a>。<br/>跟随:<a class="ae mo" href="https://twitter.com/gitconnected" rel="noopener ugc nofollow" target="_blank">推特</a>，<a class="ae mo" href="https://www.linkedin.com/company/gitconnected" rel="noopener ugc nofollow" target="_blank">领英</a>，<a class="ae mo" href="https://newsletter.levelup.dev/" rel="noopener ugc nofollow" target="_blank">通迅</a> <br/> <strong class="kd jf">升一级正在改造理工大招聘➡️ </strong> <a class="ae mo" href="https://jobs.levelup.dev/talent/welcome?referral=true" rel="noopener ugc nofollow" target="_blank"> <strong class="kd jf">加入我们的人才集体</strong> </a></p></div></div>    
</body>
</html>