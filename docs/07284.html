<html>
<head>
<title>Step by Step Slow Guide: Kubernetes Dashboard on Raspberry Pi Cluster (Part 1)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">循序渐进指南:树莓Pi集群上的Kubernetes仪表盘(第1部分)</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/step-by-step-slow-guide-kubernetes-dashboard-on-raspberry-pi-cluster-part-1-308456b69dba?source=collection_archive---------6-----------------------#2021-02-06">https://levelup.gitconnected.com/step-by-step-slow-guide-kubernetes-dashboard-on-raspberry-pi-cluster-part-1-308456b69dba?source=collection_archive---------6-----------------------#2021-02-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="f955" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如何安装和配置Kubernetes仪表板</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/2ffb424f8577a6839020488bf123a938.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*a_39yA18UKaIX5rJ"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">弗朗茨·哈文·阿西图纳在<a class="ae le" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</figcaption></figure><p id="bedc" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">距离我写关于在Raspberry Pi集群上设置Kubernetes的guid已经有一段时间了:</p><div class="lf lg gp gr lh li"><a rel="noopener  ugc nofollow" target="_blank" href="/step-by-step-slow-guide-kubernetes-cluster-on-raspberry-pi-4b-part-1-6e4179c89cbc"><div class="lj ab fo"><div class="lk ab ll cl cj lm"><h2 class="bd iu gy z fp ln fr fs lo fu fw is bi translated">循序渐进指南—树莓Pi 4B上的Kubernetes集群—第1部分</h2><div class="lp l"><h3 class="bd b gy z fp ln fr fs lo fu fw dk translated">基于RaspberryPi 4B、Containerd、Project Calico、MetalLB和Ubuntu Server的Kubernetes集群</h3></div><div class="lq l"><p class="bd b dl z fp ln fr fs lo fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="lr l"><div class="ls l lt lu lv lr lw ky li"/></div></div></a></div><p id="ea41" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">因此，现在是谈论监测的时候了。这次我们将讨论设置和配置Kubernetes Dashboard。</p></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><p id="e1af" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在开始之前，为了能够看到集群指标和图形，我们首先需要安装第一个MetricsServer。我已经写了一个关于它的安装的指南，所以在回来继续之前，让我们先浏览一下这个指南。</p><div class="lf lg gp gr lh li"><a rel="noopener  ugc nofollow" target="_blank" href="/setting-up-and-using-metrics-server-for-raspberrypi-kubernetes-cluster-de2e10bb9459"><div class="lj ab fo"><div class="lk ab ll cl cj lm"><h2 class="bd iu gy z fp ln fr fs lo fu fw is bi translated">为RaspberryPi Kubernetes集群设置和使用度量服务器</h2><div class="lp l"><h3 class="bd b gy z fp ln fr fs lo fu fw dk translated">如何安装和使用MetricsServer来获得Kubernetes集群的快速统计数据</h3></div><div class="lq l"><p class="bd b dl z fp ln fr fs lo fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="lr l"><div class="me l lt lu lv lr lw ky li"/></div></div></a></div></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><p id="6f8e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在，当这些完成后，让我们得到仪表板yaml文件。</p><pre class="kp kq kr ks gt mf mg mh mi aw mj bi"><span id="70b9" class="mk ml it mg b gy mm mn l mo mp">wget https://raw.githubusercontent.com/kubernetes/dashboard/v2.1.0/aio/deploy/recommended.yaml</span></pre><p id="683e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">并通过运行以下命令将其安装到我们的集群中:</p><pre class="kp kq kr ks gt mf mg mh mi aw mj bi"><span id="e49f" class="mk ml it mg b gy mm mn l mo mp">kubectl apply -f recommended.yaml</span></pre><p id="9206" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们通过运行以下命令来确保我们的仪表板部署正确:</p><pre class="kp kq kr ks gt mf mg mh mi aw mj bi"><span id="19ea" class="mk ml it mg b gy mm mn l mo mp">kubectl proxy</span></pre><p id="8963" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这将打开一个到我们控制面板的通道，通过在浏览器中打开:</p><pre class="kp kq kr ks gt mf mg mh mi aw mj bi"><span id="cbef" class="mk ml it mg b gy mm mn l mo mp"><a class="ae le" href="http://localhost:8001/api/v1/namespaces/kubernetes-dashboard/services/https:kubernetes-dashboard:/proxy/" rel="noopener ugc nofollow" target="_blank">http://localhost:8001/api/v1/namespaces/kubernetes-dashboard/services/https:kubernetes-dashboard:/proxy/</a></span></pre><p id="e949" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您应该会看到类似这样的内容:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi mq"><img src="../Images/8c9932c5836d210a9a05b9cc7bb0f0b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xvy22ZZCrEs4GoOqL8-DSA.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">Kubernetes仪表板运行</figcaption></figure><p id="59b6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们现在还不能访问它，我们需要首先创建适当的服务帐户。我们将创建一个名为kd-user-service.yaml的新文件，其内容如下:</p><pre class="kp kq kr ks gt mf mg mh mi aw mj bi"><span id="8f97" class="mk ml it mg b gy mm mn l mo mp">apiVersion: v1<br/>kind: ServiceAccount<br/>metadata:<br/>  name: kd-user<br/>  namespace: kubernetes-dashboard</span></pre><p id="733a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在，我们可以将它应用于:</p><pre class="kp kq kr ks gt mf mg mh mi aw mj bi"><span id="2702" class="mk ml it mg b gy mm mn l mo mp">kubectl apply -f kd-user-service.yaml</span></pre><p id="726a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">接下来，我们需要授予我们的用户一些权限，因此我们将创建ClusterRoleBinding并将我们的用户绑定到现有的集群管理角色。我们将创建一个名为cluster-role-binding.yaml的新文件，其内容如下:</p><pre class="kp kq kr ks gt mf mg mh mi aw mj bi"><span id="80fd" class="mk ml it mg b gy mm mn l mo mp">apiVersion: rbac.authorization.k8s.io/v1<br/>kind: ClusterRoleBinding<br/>metadata:<br/>  name: kd-user<br/>roleRef:<br/>  apiGroup: rbac.authorization.k8s.io<br/>  kind: ClusterRole<br/>  name: cluster-admin<br/>subjects:<br/>- kind: ServiceAccount<br/>  name: kd-user<br/>  namespace: kubernetes-dashboard</span></pre><p id="5e90" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们将把它应用到我们的集群:</p><pre class="kp kq kr ks gt mf mg mh mi aw mj bi"><span id="284a" class="mk ml it mg b gy mm mn l mo mp">kubectl apply -f cluster-role-binding.yaml</span></pre><p id="ed4a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">既然已经创建了用户，我们需要获取该用户的秘密令牌。我们将通过以下方式获取用户信息:</p><pre class="kp kq kr ks gt mf mg mh mi aw mj bi"><span id="eb0b" class="mk ml it mg b gy mm mn l mo mp">kubectl describe -n kubernetes-dashboard sa/kd-user</span></pre><p id="eb1d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这将为我们提供关于那个用户的秘密的信息:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi mr"><img src="../Images/757da945a8cd07e1ecefd0ab40538b71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-e_TLQfe_T3c8-M7rd_ubw.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">关于我们的Kubernetes服务帐户的信息</figcaption></figure><p id="a5ff" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">接下来，我们将通过运行以下命令来获取令牌:</p><pre class="kp kq kr ks gt mf mg mh mi aw mj bi"><span id="a7cf" class="mk ml it mg b gy mm mn l mo mp"># Please note that your secret name will be different, so you will<br/># need to replace it in command below</span><span id="458d" class="mk ml it mg b gy ms mn l mo mp">kubectl -n kubernetes-dashboard describe secret <strong class="mg iu">kd-user-token-46zl5</strong></span></pre></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><p id="06b7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">仅供参考…在Kubernetes文档中，获取令牌的方法是:</p><pre class="kp kq kr ks gt mf mg mh mi aw mj bi"><span id="0661" class="mk ml it mg b gy mm mn l mo mp">kubectl -n kubernetes-dashboard get secret $(kubectl -n kubernetes-dashboard get sa/kd-user -o jsonpath="{.secrets[0].name}") -o go-template="{{.data.token | base64decode}}"</span></pre><p id="3086" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">但这不是我想记住的事情。以前的方法很容易记住，并且很清楚到底发生了什么。</p></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><p id="ddfb" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在，我们可以使用收到的令牌，瞧！我们进去了。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi mq"><img src="../Images/f9b0dfafbdd92f894b9a7c9b692beebe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MtJ_Dg8SkZ9z92WvdILu-Q.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">工作Kubernetes仪表板</figcaption></figure></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><p id="c15f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这将很好地工作，但是最好通过负载均衡器公开我们的Kubernetes仪表板，并避免使用<code class="fe mt mu mv mg b">kubectl proxy</code>。我们接下来会谈到这一点。</p><div class="lf lg gp gr lh li"><a href="https://astrujic.medium.com/step-by-step-slow-guide-kubernetes-dashboard-on-raspberry-pi-cluster-part-2-acdc8f9b5b99" rel="noopener follow" target="_blank"><div class="lj ab fo"><div class="lk ab ll cl cj lm"><h2 class="bd iu gy z fp ln fr fs lo fu fw is bi translated">分步慢速指南—树莓Pi集群上的Kubernetes仪表盘—第2部分</h2><div class="lp l"><h3 class="bd b gy z fp ln fr fs lo fu fw dk translated">如何为Kubernetes Dashboard设置自签名证书并通过负载平衡器公开它</h3></div><div class="lq l"><p class="bd b dl z fp ln fr fs lo fu fw dk translated">astrujic.medium.com</p></div></div><div class="lr l"><div class="mw l lt lu lv lr lw ky li"/></div></div></a></div></div></div>    
</body>
</html>