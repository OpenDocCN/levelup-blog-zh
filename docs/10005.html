<html>
<head>
<title>Setup SSH between Jenkins and Github</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Jenkins和Github之间设置SSH</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/setup-ssh-between-jenkins-and-github-e4d7d226b271?source=collection_archive---------2-----------------------#2021-10-14">https://levelup.gitconnected.com/setup-ssh-between-jenkins-and-github-e4d7d226b271?source=collection_archive---------2-----------------------#2021-10-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/478a13fb882a65c4d34a91dfea6e6b03.png" data-original-src="https://miro.medium.com/v2/resize:fit:1116/format:webp/0*-glKKNMDf0w8I_cJ.png"/></div></figure><p id="2dcf" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在这个故事中，你将学习如何在<a class="ae ks" href="https://www.jenkins.io/" rel="noopener ugc nofollow" target="_blank">詹金斯</a>和<a class="ae ks" href="https://github.com/" rel="noopener ugc nofollow" target="_blank"> Github </a>之间设置SSH。使用这种方法，您不需要提供您的凭证来配置Jenkins作业中的git repo，并且您将实现无密码连接</p><p id="442e" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">最近，出于安全原因，其他方法已被弃用，这是新标准。</p><h1 id="20ac" class="kt ku iq bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">步伐</h1><ol class=""><li id="9d06" class="lr ls iq jw b jx lt kb lu kf lv kj lw kn lx kr ly lz ma mb bi translated">生成SSH密钥</li><li id="8a6d" class="lr ls iq jw b jx mc kb md kf me kj mf kn mg kr ly lz ma mb bi translated">复制Github中的公钥</li><li id="4d9d" class="lr ls iq jw b jx mc kb md kf me kj mf kn mg kr ly lz ma mb bi translated">在Jenkins凭据中配置</li><li id="ddba" class="lr ls iq jw b jx mc kb md kf me kj mf kn mg kr ly lz ma mb bi translated">使用SSH连接在Jenkins中配置一个示例作业</li></ol><h1 id="66d9" class="kt ku iq bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">配置Jenkins用户</h1><p id="f857" class="pw-post-body-paragraph ju jv iq jw b jx lt jz ka kb lu kd ke kf mh kh ki kj mi kl km kn mj kp kq kr ij bi translated">生成ssh密钥并确保ssh代理正在运行</p><pre class="mk ml mm mn gt mo mp mq mr aw ms bi"><span id="3c8a" class="mt ku iq mp b gy mu mv l mw mx">ssh-keygen<br/>sudo eval $(sudo ssh-agent -s)<br/>ssh-add ~/.ssh/id_rsa</span></pre><figure class="mk ml mm mn gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mz na di nb bf nc"><div class="gh gi my"><img src="../Images/e1696ebca5189d47c3faf250e0bbc03c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*GwQfgZsHyJ5KGnTm.png"/></div></div></figure><p id="631b" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">成功生成了一个SSH密钥，并允许您在Jenkins和Github之间实现无密码连接</p><p id="b5d8" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">使用下面的命令复制公钥(或任何时候你的)。ssh '文件夹并复制密钥)</p><p id="4ab8" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><code class="fe nd ne nf mp b">cat /home/ubuntu/.ssh/id_rsa.pub</code></p><figure class="mk ml mm mn gt jr gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/c4aee40698c256708926d2996df92470.png" data-original-src="https://miro.medium.com/v2/resize:fit:1376/format:webp/0*ar_I4-SdwwLi_iiq.png"/></div></figure><h1 id="04cd" class="kt ku iq bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">Github配置</h1><p id="8575" class="pw-post-body-paragraph ju jv iq jw b jx lt jz ka kb lu kd ke kf mh kh ki kj mi kl km kn mj kp kq kr ij bi translated">进入GitHub仓库-&gt;设置-&gt;添加部署密钥</p><figure class="mk ml mm mn gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mz na di nb bf nc"><div class="gh gi my"><img src="../Images/d120cf97d08e5ba91cd83b4f54b8ed35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*k-_QvRJHy7aJSaHj.png"/></div></div></figure><h1 id="42df" class="kt ku iq bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">配置Jenkins凭据</h1><p id="7f72" class="pw-post-body-paragraph ju jv iq jw b jx lt jz ka kb lu kd ke kf mh kh ki kj mi kl km kn mj kp kq kr ij bi translated">现在我们将在Jenkins配置中配置<code class="fe nd ne nf mp b">jenkins</code>用户的私钥</p><h1 id="9cfb" class="kt ku iq bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">在Jenkins内部添加SSH密钥</h1><ul class=""><li id="ae66" class="lr ls iq jw b jx lt kb lu kf lv kj lw kn lx kr nh lz ma mb bi translated">登录Jenkins</li><li id="9dbb" class="lr ls iq jw b jx mc kb md kf me kj mf kn mg kr nh lz ma mb bi translated">现在，从Jenkins控制台的左侧面板转到“管理Jenkins ”,然后单击“管理凭证”:</li></ul><figure class="mk ml mm mn gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mz na di nb bf nc"><div class="gh gi ni"><img src="../Images/57eba776374182a9ce9428515896d92e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*FjXBTQWnDJxdH0kg.png"/></div></div></figure><p id="09af" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">之后，选择“添加凭据”。这将为我们打开一个新的形式。在下拉列表中，选择“带私钥的SSH用户名”，然后为其命名。</p><p id="b994" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">从Jenkins服务器复制私钥。</p><figure class="mk ml mm mn gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mz na di nb bf nc"><div class="gh gi nj"><img src="../Images/7251ca292f6877103bc7b20246bbd30a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*1tMG_iHQCJzrWezi.png"/></div></div></figure><p id="0dc6" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">现在，您可以在这个Jenkins实例中克隆任何git repo。在Jenkins中配置作业时，您不需要提供凭据。</p><p id="8999" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">配置Jenkins作业</p><ul class=""><li id="415b" class="lr ls iq jw b jx jy kb kc kf nk kj nl kn nm kr nh lz ma mb bi translated">在詹金斯创建一个自由式工作</li><li id="8725" class="lr ls iq jw b jx mc kb md kf me kj mf kn mg kr nh lz ma mb bi translated">配置git repo的SSH URL</li></ul><figure class="mk ml mm mn gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mz na di nb bf nc"><div class="gh gi nn"><img src="../Images/b3c8a1046c2f75a79abc726dbc6d8b1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*jvPesLlsH1FUhVuK"/></div></div></figure><figure class="mk ml mm mn gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mz na di nb bf nc"><div class="gh gi no"><img src="../Images/f6cf549614d76b3a42f0828a1b8aced1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*74mEbIoD9dZinG8m"/></div></div></figure><h1 id="cbbe" class="kt ku iq bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">结论:</h1><p id="dd13" class="pw-post-body-paragraph ju jv iq jw b jx lt jz ka kb lu kd ke kf mh kh ki kj mi kl km kn mj kp kq kr ij bi translated">我们已经成功地在Jenkins和Github之间建立了SSH，实现了无密码连接。使用这种方法，您不需要提供您的凭证来配置Jenkins作业中的git repo。</p></div></div>    
</body>
</html>