<html>
<head>
<title>Theme System with Flutter</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">带颤动的主题系统</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/theme-system-with-flutter-91e14f9a3302?source=collection_archive---------12-----------------------#2020-06-11">https://levelup.gitconnected.com/theme-system-with-flutter-91e14f9a3302?source=collection_archive---------12-----------------------#2020-06-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="a3b9" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">为您的应用提供丰富多彩的用户体验指南</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/546fcdc79c30f46adbde3259543cb455.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QEgZ6Es85dZ4iMef-oawQA.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@rresenden?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Ricardo Resende </a>在<a class="ae ky" href="https://unsplash.com/s/photos/colorful?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="b78d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">随着跨平台框架(例如React Native和Flutter)及其设计模式的成熟，构建功能变得比以前更容易，这使得人们更加关注构建用户体验。</p><p id="bced" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">主题在用户体验中扮演着重要的角色，因为它出现在应用程序的每个屏幕上。</p><p id="bd15" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，建立一个用户友好的主题系统是一项重要的工作，包括:</p><ul class=""><li id="75e5" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">使其动态化(在应用程序中的主题之间切换)。</li><li id="adf0" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">构建用于配置主题的UI</li><li id="1193" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">使主题配置持久和可用</li></ul><p id="507e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我为我的副业项目构建一个主题系统时，在研究了现有的关于构建主题系统的教程后，我发现它们中的大多数只涵盖了故事的一个方面，这可能导致实践中不必要的反复试验。</p><p id="788a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，大多数现有的教程假设一个新的应用程序对学习者来说很好，但对开发者来说不切实际，因为UI/UX通常在核心功能之后。</p><p id="a4db" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这篇文章是在现有的Flutter应用中构建主题系统的一步一步的教程。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mj"><img src="../Images/65fb13b0e6f10e1528407d325ab67cca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-Ea2mV01OXo_OQ1D_JCdEg.png"/></div></div></figure><p id="143b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是重构后的应用预览:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mk ml l"/></div></figure><h1 id="df1c" class="mm mn it bd mo mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">构建主题系统的分步指南</h1><h2 id="9310" class="ne mn it bd mo nf ng dn ms nh ni dp mw li nj nk my lm nl nm na lq nn no nc np bi translated">步骤0:在服务中包装主题</h2><p id="f857" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">在Flutter中，主题以对象的形式存在，作为顶级应用程序的参数:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nv ml l"/></div></figure><p id="afb0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上面的例子中，我们可以看到很难(或不可能)在不同的主题之间动态切换，因为只有当应用程序重新加载时才会重建。</p><p id="c0cf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">更好的方法是将主题包装在服务中，而不是硬编码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nv ml l"/></div></figure><h2 id="ea1a" class="ne mn it bd mo nf ng dn ms nh ni dp mw li nj nk my lm nl nm na lq nn no nc np bi translated">步骤1:实现系统主题设置的逻辑</h2><p id="cbb4" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">在Flutter中，系统主题设置是可访问的，所以用户可能更喜欢系统主题设置而不是本地主题设置。</p><p id="d167" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以通过向主题服务添加一些逻辑来轻松实现这一点:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nv ml l"/></div></figure><p id="4f02" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上面的代码片段中，我们使用了一个布尔标志<code class="fe nw nx ny nz b">useSystem</code>，来控制应用程序是否应该遵循系统主题设置。</p><h2 id="1aa0" class="ne mn it bd mo nf ng dn ms nh ni dp mw li nj nk my lm nl nm na lq nn no nc np bi translated">步骤2:实现UI来与主题设置进行交互</h2><p id="2bba" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">有了上面的主题服务，我们可以通过调用<code class="fe nw nx ny nz b">theme.setTheme()</code>来动态切换主题。</p><p id="ea41" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下一步是构建一个UI，让用户与动态主题进行交互:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nv ml l"/></div></figure><p id="0549" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">上面的代码为我们提供了一个类似这样的用户界面，用户可以在不同的主题之间进行选择，或者使用系统主题设置:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/e84112ba8875754807925d5c99b369d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oaj_6O5sq00KRg60wvOgOg.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">添加上述代码后的UI</figcaption></figure><h2 id="4fae" class="ne mn it bd mo nf ng dn ms nh ni dp mw li nj nk my lm nl nm na lq nn no nc np bi translated">步骤3:实现设置持久性</h2><p id="ca0d" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">通过前面的步骤，我们有了一个动态变化的主题，并且可以很好地配合系统主题设置，但是如果我们的用户必须在每次应用程序重新加载时重新配置主题设置，那就不是很好了。</p><p id="905d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有几种持久化数据的方法，包括远程数据库、本地SQL数据库等。</p><p id="3866" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了优化应用程序加载时间和简化开发，我们将使用Hive，一个本地键值存储库。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nv ml l"/></div></figure><p id="a3f3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">添加了配置单元支持后，我们的主题设置可以在重新加载之间保持不变:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mk ml l"/></div></figure><h2 id="4608" class="ne mn it bd mo nf ng dn ms nh ni dp mw li nj nk my lm nl nm na lq nn no nc np bi translated">万岁！主题系统现在完成了！黑客快乐！</h2><p id="54ef" class="pw-post-body-paragraph kz la it lb b lc nq ju le lf nr jx lh li ns lk ll lm nt lo lp lq nu ls lt lu im bi translated">(奖金)这里有一个现场编码会议，引导你如何按照本文的步骤建立一个完整的主题系统(<a class="ae ky" href="https://youtu.be/UO8s7a_R5OI" rel="noopener ugc nofollow" target="_blank">在YouTube上观看</a>以获得更好的时间表):</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ob ml l"/></div></figure></div></div>    
</body>
</html>