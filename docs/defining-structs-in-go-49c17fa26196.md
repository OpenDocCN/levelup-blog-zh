# åœ¨ Go ä¸­å®šä¹‰ç»“æ„

> åŸæ–‡ï¼š<https://levelup.gitconnected.com/defining-structs-in-go-49c17fa26196>

## æœ€ç»ˆçš„æ—…è¡Œ

Go çš„*ç»“æ„*æ˜¯å­—æ®µçš„ç±»å‹é›†åˆã€‚å®ƒä»¬å¯¹äºå°†æ•°æ®ç»„åˆåœ¨ä¸€èµ·å½¢æˆè®°å½•å¾ˆæœ‰ç”¨ã€‚

![](img/8d27e10bc6200e706a9d9a6c4df26b67.png)

åŠ å¸ƒé‡ŒåŸƒæ‹‰Â·å…‹è±å°”Â·é©¬é‡Œè¯ºåœ¨ [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) ä¸Šæ‹æ‘„çš„ç…§ç‰‡

# åŸºç¡€çŸ¥è¯†:

Go çš„ç»“æ„æ˜¯å­—æ®µçš„ç±»å‹é›†åˆã€‚å®ƒä»¬å¯¹äºå°†æ•°æ®ç»„åˆåœ¨ä¸€èµ·å½¢æˆè®°å½•å¾ˆæœ‰ç”¨ã€‚åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹èŒƒä¾‹ä¸­ï¼Œç»“æ„å¯ä»¥ä¸ç±»ç›¸æ¯”è¾ƒã€‚å‡è®¾ struct æ˜¯ä¸€ä¸ªå£°æ˜å…¶å±æ€§ age å’Œ name çš„é›‡å‘˜ã€‚

ä¸€ä¸ªç»“æ„å¯ä»¥æœ‰ç›¸åŒæˆ–ä¸åŒæ•°æ®ç±»å‹çš„ä¸åŒå­—æ®µã€‚ä¾‹å¦‚ï¼ŒTom æ˜¯ä¸€ç§é›‡å‘˜ç±»å‹(ç»“æ„ç±»å‹),å…¶å±æ€§/å­—æ®µä¸º firstNameã€lastName å’Œ salaryã€‚

# **å®šä¹‰&åˆ›å»ºç»“æ„:**

è¦åˆ›å»ºä¸€ä¸ªç»“æ„ï¼Œå®ƒéœ€è¦ä¸€ä¸ªæè¿°è¯¥ç»“æ„åŒ…å«çš„å­—æ®µçš„è“å›¾ï¼Œå®šä¹‰ä»¥å…³é”®å­—`type`å¼€å§‹ï¼Œåè·Ÿç»“æ„çš„åç§°ã€‚åœ¨è¿™ä¹‹åï¼Œ`struct`å…³é”®å­—åè·Ÿä¸€å¯¹å¤§æ‹¬å·`{}`ï¼Œåœ¨è¿™é‡Œå£°æ˜è¯¥ç»“æ„å°†åŒ…å«çš„å­—æ®µã€‚

```
type StructName struct {
    field fieldType
}
```

ä¸€æ—¦å®šä¹‰äº†ç»“æ„ï¼Œå°±å¯ä»¥å£°æ˜ä½¿ç”¨è¯¥ç»“æ„å®šä¹‰çš„å˜é‡ã€‚æ­¤ç¤ºä¾‹å®šä¹‰å¹¶ä½¿ç”¨äº†ä¸€ä¸ªç»“æ„:

```
package main

import "fmt"

type Employee struct {
    FirstName string
    LasttName string
    Salary int
}

func main() {
	var e := Employee{
		FirstName: "Tommy",
	}
	fmt.Println(e.FirstName)
}

output
Tommy
```

æˆ‘ä»¬é¦–å…ˆåœ¨è¿™ä¸ªä¾‹å­ä¸­å®šä¹‰ä¸€ä¸ª`Employee`ç»“æ„ï¼ŒåŒ…å«ä¸€ä¸ª`string`ç±»å‹çš„`FirstName`å­—æ®µã€‚åœ¨`main`çš„ä¸»ä½“ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡åœ¨ç±»å‹åç§°`Employee`åæ”¾ç½®ä¸€å¯¹æ‹¬å·æ¥åˆ›å»º`Employee`çš„å®ä¾‹ï¼Œç„¶åä¸ºè¯¥å®ä¾‹çš„å­—æ®µæŒ‡å®šå€¼ã€‚`e`ä¸­çš„å®ä¾‹å°†æŠŠå®ƒçš„`FirstName`å­—æ®µè®¾ç½®ä¸ºâ€œTommyâ€ã€‚åœ¨`fmt.Println`å‡½æ•°è°ƒç”¨ä¸­ï¼Œæˆ‘ä»¬æ£€ç´¢å®ä¾‹å­—æ®µçš„å€¼ï¼Œæ–¹æ³•æ˜¯åœ¨åˆ›å»ºå®ä¾‹çš„å˜é‡ååŠ ä¸€ä¸ªå¥ç‚¹ï¼Œåè·Ÿæˆ‘ä»¬æƒ³è¦è®¿é—®çš„å­—æ®µçš„åç§°ã€‚ä¾‹å¦‚ï¼Œæœ¬ä¾‹ä¸­çš„`e.FirstName`è¿”å›`FirstName`å­—æ®µã€‚

> ğŸ’¡*ä½¿ç”¨ä¸Šè¿°è¯­æ³•åˆ›å»º struct æ—¶ï¼Œ* ***é€—å·*** *(ï¼Œ)åœ¨æœ€åä¸€ä¸ªå­—æ®µèµ‹å€¼åå¾ˆé‡è¦ã€‚*

# **æ›¿ä»£æ–¹æ³•**

æˆ‘ä»¬ä¹Ÿå¯ä»¥å¦‚ä¸‹å®šä¹‰ç»“æ„

```
package main

import "fmt"
type Employee struct {
    FirstName string
    LasttName string
    Salary int
}
func main() {
    var e Employee
    e.FirstName = "Tommy"
    fmt.Println(e.FirstName)
}
Output
Tommy
```

é¦–å…ˆæˆ‘ä»¬å£°æ˜ä¸€ä¸ªç±»å‹ä¸º`Employee`çš„å˜é‡`e`,å®ƒç°åœ¨å°†ä¿å­˜ç»“æ„çš„é›¶å€¼ã€‚(å¦‚æœä½ å–œæ¬¢é˜…è¯»ï¼Œè¿™æ˜¯ä¸€ä»½äº†è§£é›¶ä»·å€¼çš„å¥½ææ–™:[https://Dave . Cheney . net/2013/01/19/ä»€ä¹ˆæ˜¯é›¶ä»·å€¼ä»¥åŠå®ƒä¸ºä»€ä¹ˆæœ‰ç”¨](https://dave.cheney.net/2013/01/19/what-is-the-zero-value-and-why-is-it-useful))

## getter/setter:

è·å–å’Œè®¾ç½® struct å­—æ®µéå¸¸ç®€å•ã€‚å½“ä¸€ä¸ªç»“æ„å˜é‡è¢«åˆ›å»ºæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨`.` ( *ç‚¹*)æ“ä½œç¬¦æ¥è®¿é—®å®ƒçš„å­—æ®µã€‚

åœ¨ä¸Šé¢çš„ç¨‹åºä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªæœ‰ 3 ä¸ªå­—æ®µçš„ç»“æ„`e`ã€‚è¦ç»™å­—æ®µ`FirstName`èµ‹å€¼ï¼Œéœ€è¦ä½¿ç”¨è¯­æ³•`e.FirstName = "Tommy"`ã€‚`e`ä¸­çš„å®ä¾‹å°†æŠŠå®ƒçš„`FirstName`å­—æ®µè®¾ç½®ä¸ºâ€œTommyâ€ã€‚åœ¨`fmt.Println`å‡½æ•°è°ƒç”¨ä¸­ï¼Œæˆ‘ä»¬æ£€ç´¢å®ä¾‹å­—æ®µçš„å€¼ï¼Œæ–¹æ³•æ˜¯åœ¨åˆ›å»ºå®ä¾‹çš„å˜é‡ååŠ ä¸€ä¸ªå¥ç‚¹ï¼Œåè·Ÿæˆ‘ä»¬æƒ³è¦è®¿é—®çš„å­—æ®µçš„åç§°ã€‚ä¾‹å¦‚ï¼Œæœ¬ä¾‹ä¸­çš„`e.FirstName`è¿”å›`FirstName`å­—æ®µã€‚

# å†…åµŒç»“æ„

é™¤äº†å®šä¹‰ä¸€ä¸ªæ–°çš„ç±»å‹æ¥è¡¨ç¤ºä¸€ä¸ªç»“æ„ï¼Œè¿˜å¯ä»¥å®šä¹‰ä¸€ä¸ªå†…è”ç»“æ„ã€‚è¿™äº›åŠ¨æ€ç»“æ„å®šä¹‰åœ¨ç»“æ„çš„ä½œç”¨åŸŸè¶…å‡ºäº†å®ƒæ‰€æ“ä½œçš„å‡½æ•°çš„æƒ…å†µä¸‹æ˜¯æœ‰ç”¨çš„ã€‚ä¾‹å¦‚ï¼Œæµ‹è¯•é€šå¸¸ä½¿ç”¨ç»“æ„æ¥å®šä¹‰ç»„æˆç‰¹å®šæµ‹è¯•ç”¨ä¾‹çš„æ‰€æœ‰å‚æ•°ã€‚å½“ä½ çœ‹ä¸åˆ°ç»“æ„ä½“åœ¨å¤šä¸ªåœ°æ–¹è¢«ä½¿ç”¨æ—¶ï¼Œç®¡ç†ç»“æ„ä½“å°†ä¼šå¾ˆä¹å‘³ã€‚

å†…è”ç»“æ„å®šä¹‰å‡ºç°åœ¨å˜é‡èµ‹å€¼çš„å³ä¾§ã€‚å®ä¾‹åŒ–å¿…é¡»é€šè¿‡ä¸ºæ‚¨å®šä¹‰çš„æ¯ä¸ªå­—æ®µæä¾›ä¸€å¯¹é¢å¤–çš„å¤§æ‹¬å·æ¥ç«‹å³å‘ç”Ÿã€‚ä¸‹é¢çš„ç¤ºä¾‹æ˜¾ç¤ºäº†å†…è”ç»“æ„å®šä¹‰:

```
package main

import "fmt"

func main() {
	e := struct {
		FirstName string
		LastName string
	}{
		FirstName: "Tommy",
		LastName: "Aberdeen",
	}
	fmt.Println(e.FirstName, ",", e.LastName)
}

Output
Tommy,Aberdeen
```

è¿™ä¸ªä¾‹å­æ²¡æœ‰ç”¨å…³é”®å­—`type`å®šä¹‰ä¸€ä¸ªæè¿°æˆ‘ä»¬çš„ç»“æ„çš„æ–°ç±»å‹ï¼Œè€Œæ˜¯é€šè¿‡å°†`struct`å®šä¹‰æ”¾åœ¨çŸ­èµ‹å€¼æ“ä½œç¬¦`:=`ä¹‹åæ¥å®šä¹‰ä¸€ä¸ªå†…è”ç»“æ„ã€‚æˆ‘ä»¬å®šä¹‰ç»“æ„çš„å­—æ®µã€‚æ‚¨æœ€å¸¸çœ‹åˆ°å†…è”ç»“æ„å£°æ˜çš„åœ°æ–¹æ˜¯åœ¨æµ‹è¯•æœŸé—´ï¼Œå› ä¸ºé€šå¸¸ä¸€æ¬¡æ€§ç»“æ„è¢«å®šä¹‰ä¸ºåŒ…å«ç‰¹å®šæµ‹è¯•ç”¨ä¾‹çš„æ•°æ®å’ŒæœŸæœ›ã€‚

# æŒ‡å‘ç»“æ„çš„æŒ‡é’ˆ

æˆ‘ä»¬å¯ä»¥ä¸ç”¨åˆ›å»ºä¸€ä¸ªç»“æ„ä½“ï¼Œè€Œæ˜¯ç”¨ä¸€æ¡è¯­å¥åˆ›å»ºä¸€ä¸ªæŒ‡å‘ç»“æ„ä½“å€¼çš„æŒ‡é’ˆã€‚

åˆ›å»ºæŒ‡å‘ç»“æ„çš„æŒ‡é’ˆçš„è¯­æ³•å¦‚ä¸‹ã€‚

```
e := &StructType{...}
```

è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæŒ‡å‘ç»“æ„å€¼çš„æŒ‡é’ˆ`tommy`ã€‚

```
package main

import "fmt"

type Employee struct {
    FirstName string
    LasttName string
    Salary int
}

func main() {
	e := &Employee {
		FirstName: "Tommy"
		LastName: "Aberdeen"
	}
	fmt.Println("First name", (*e).FirstName)
}

Output
Tommy
```

åœ¨ä¸Šé¢çš„ç¨‹åºä¸­ï¼Œç”±äº eis æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨`*e` **è§£å¼•ç”¨è¯­æ³•**æ¥è·å–å®ƒæ‰€æŒ‡å‘çš„ç»“æ„çš„å®é™…å€¼ï¼Œå¹¶ä½¿ç”¨`(*e).FirstName`æ¥è®¿é—®è¯¥ç»“æ„å€¼çš„`FirstName`ã€‚

Go è¿˜æä¾›äº†å¦ä¸€ç§è®¿é—®å­—æ®µ**çš„è¯­æ³•ï¼Œæ— éœ€å…ˆè§£å¼•ç”¨å­—æ®µ**ï¼Œå¦‚ä¸‹æ‰€ç¤º

```
e := &Employee {
  FirstName: "Tommy"
  LastName: "Aberdeen"
 }
 fmt.Println("First name", e.FirstName) // e is a pointer
```

# åµŒå¥—ç»“æ„

ç»“æ„å­—æ®µå¯ä»¥æ˜¯ä»»ä½•æ•°æ®ç±»å‹ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªç»“æ„å­—æ®µä¿å­˜å¦ä¸€ä¸ªç»“æ„ã€‚å½“ç»“æ„å­—æ®µå…·æœ‰ç»“æ„å€¼æ—¶ï¼Œè¯¥ç»“æ„å€¼ç§°ä¸ºåµŒå¥—ç»“æ„ï¼Œå› ä¸ºå®ƒåµŒå¥—åœ¨çˆ¶ç»“æ„å†…ã€‚

**ä¾‹å¦‚:**

```
package main

import "fmt"

type Salary struct {
    TravelAllowance int
    OvertimeAmount int
    Base int
}

type Employee struct {
    FirstName string
    LasttName string
    Salary Salary
}

func main() {
	e := Employee {
		FirstName: "Tommy"
		LastName: "Aberdeen"
                Salary:   Salary{100, 10, 10}
	}
	fmt.Println("employee e firstname : ", e.FirstName)
        fmt.Println("employee e travel allowance: ", e.Salart.TravelAllowance)
}
```

åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ç»“æ„ç±»å‹`Salary`ï¼Œå®ƒå®šä¹‰äº†ä¸€ä¸ªé›‡å‘˜çš„è–ªæ°´ã€‚ç„¶åï¼Œæˆ‘ä»¬ä¿®æ”¹äº†`Employee` struct ç±»å‹çš„`salary`å­—æ®µï¼Œè¯¥å­—æ®µç°åœ¨ä¿å­˜ç±»å‹`Salary`çš„å€¼ã€‚

å½“åˆ›å»ºç±»å‹ä¸º`Employee`çš„`e`ç»“æ„æ—¶ï¼Œæˆ‘ä»¬åˆå§‹åŒ–äº†æ‰€æœ‰å­—æ®µã€‚ç”±äº`salary`å­—æ®µä¿å­˜äº†ç±»å‹`Salary`çš„ç»“æ„ï¼Œæˆ‘ä»¬åœ¨åˆå§‹åŒ–`salary`ç»“æ„æ—¶ä½¿ç”¨äº†ä¸€ç§æ’é™¤å­—æ®µåçš„ç®€å•æ–¹æ³•ç»™å®ƒåˆ†é…äº†ç»“æ„å€¼ã€‚

é€šå¸¸ï¼Œä½ ä¼šä½¿ç”¨`struct.field`è¯­æ³•è®¿é—®ä¸€ä¸ªç»“æ„çš„å­—æ®µï¼Œå°±åƒæˆ‘ä»¬ä¹‹å‰çœ‹åˆ°çš„é‚£æ ·ã€‚æ‚¨å¯ä»¥ç”¨ä¸è¿”å›ä¸€ä¸ª**ç»“æ„**çš„`e.Salary`ç›¸åŒçš„æ–¹å¼è®¿é—®`salary`å­—æ®µã€‚ç„¶åï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ç›¸åŒçš„æ–¹æ³•è®¿é—®è¿™ä¸ª**åµŒå¥—ç»“æ„**çš„å­—æ®µ(*æˆ–æ›´æ–°*)ï¼Œä¾‹å¦‚ï¼Œ`ross.Salary.TravelAllowance`

# **åµŒå¥—ç»“æ„â€”åŒ¿å:**

```
type Config struct {
    Server struct {
        Host string `json:"host"`
        Port string `json:"port"`
    } `json:"server"`
    Postgres struct {
        Host     string `json:"host"`
        User     string `json:"user"`
        Password string `json:"password"`
        DB       string `json:"db"`
    } `json:"postgres"`
}
```

åŸºæœ¬ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨åµŒå¥—çš„åŒ¿åç»“æ„å°† 3 ä¸ª`Config`ã€`Server`å’Œ`Postgres`ç»“æ„å£°æ˜ä¸ºå•ä¸€ç±»å‹ï¼Œè€Œä¸æ˜¯å£°æ˜å®ƒä»¬:

# å¯¼å‡ºçš„å­—æ®µ

ä»»ä½•ä»¥å¤§å†™å­—æ¯å¼€å¤´çš„å˜é‡æˆ–ç±»å‹éƒ½ä¼šä»è¯¥åŒ…ä¸­å¯¼å‡ºã€‚æ¯”å¦‚`Employee`ã€`Salary`

æˆ‘ä»¬è¿˜å¯ä»¥æ§åˆ¶å¯¼å‡ºç»“æ„çš„å“ªäº›å­—æ®µåœ¨åŒ…å¤–å¯è§(*æˆ–å¯¼å‡ºçš„*)ã€‚è¦å¯¼å‡ºä¸€ä¸ªç»“æ„çš„å­—æ®µåï¼Œæˆ‘ä»¬å¿…é¡»éµå¾ªåŒæ ·çš„**å¤§å†™å­—æ¯**æ–¹æ³•ã€‚

```
type Config struct {
    Server struct {
        Host string `json:"host"`
        port string `json:"port"`
    } `json:"server"`
    Postgres struct {
        Host     string `json:"host"`
        User     string `json:"user"`
        password string `json:"password"`
        DB       string `json:"db"`
    } `json:"postgres"`
}
```

åœ¨ä¸Šé¢çš„ç»“æ„ä¸­ï¼Œåªæœ‰`Host` `User`å’Œ`DB`è¢«å¯¼å‡ºåˆ°å¤–éƒ¨åŒ…

# ç»“æ„æ¯”è¾ƒ

å¦‚æœä¸¤ä¸ªç»“æ„å±äºåŒä¸€ç±»å‹å¹¶å…·æœ‰ç›¸åŒçš„å­—æ®µå€¼ï¼Œåˆ™å®ƒä»¬æ˜¯å¯æ¯”è¾ƒçš„ã€‚

```
package main

import "fmt"

type Salary struct {
    TravelAllowance int
    OvertimeAmount int
    Base int
}

type Employee struct {
    FirstName string
    LasttName string
    Salary Salary
}

func main() {
	Tommy := Employee {
		FirstName: "Tommy"
		LastName: "Aberdeen"
                Salary:   Salary{100, 10, 10}
	}
        Sammy := Employee {
          FirstName: "Sammy"
          LastName: "Nottingham"
                        Salary:   Salary{100, 10, 10}
         }
	fmt.Println(Tommy == Sammy)
}
```

ä¸Šé¢çš„ç¨‹åºæ‰“å°äº†`false`å› ä¸º`To`å’Œ`Sammy`å±äºç›¸åŒçš„ç»“æ„ç±»å‹`Employee`ä½†æ˜¯æœ‰ä¸åŒçš„å­—æ®µåï¼Œä½ å¯ä»¥è¯•ç€è®©æ‰€æœ‰çš„å­—æ®µåéƒ½ç›¸åŒå¹¶è¿›è¡Œæ¯”è¾ƒï¼Œå®ƒå°†æ‰“å°`true`

ä½†æ˜¯ï¼Œå¦‚æœä¸€ä¸ªç»“æ„æœ‰å¯ä»¥æ¯”è¾ƒçš„**æ˜ å°„**å­—æ®µç±»å‹ï¼Œä¾‹å¦‚ä¸å¯æ¯”è¾ƒçš„**æ˜ å°„**ï¼Œé‚£ä¹ˆè¿™ä¸ªç»“æ„å°±ä¸å¯æ¯”è¾ƒã€‚

ä¾‹å¦‚ï¼Œå¦‚æœ`Employee`ç»“æ„ç±»å‹æœ‰ä¸€ä¸ªæ•°æ®ç±»å‹ä¸º`map`çš„`leaves`å­—æ®µï¼Œæˆ‘ä»¬å°±ä¸èƒ½è¿›è¡Œä¸Šé¢çš„æ¯”è¾ƒã€‚

```
type Employee struct {
    FirstName string
    LasttName string
    SubjectEnrolled map[int]string
}
```

# ç»“è®º

ç»“æ„æ˜¯ç”¨äºç»„ç»‡ä¿¡æ¯çš„æ•°æ®é›†åˆã€‚å½“ç¨‹åºå¤„ç†å¤§é‡æ•°æ®å¹¶å…·æœ‰ç»“æ„æ—¶ï¼Œå°†å“ªäº›`string`æˆ–`int`å˜é‡å±äºä¸€èµ·æˆ–å“ªäº›ä¸åŒå˜å¾—æ›´å®¹æ˜“ã€‚ä¸‹ä¸€æ¬¡ï¼Œå¦‚æœä½ å‘ç°è‡ªå·±åœ¨å¤„ç†å¤šç»„å˜é‡ï¼Œé—®é—®è‡ªå·±æ˜¯å¦å¯ä»¥ä½¿ç”¨`struct`å°†è¿™äº›å˜é‡æ›´å¥½åœ°ç»„åˆåœ¨ä¸€èµ·ã€‚é‚£äº›å˜é‡å¯èƒ½ä¸€ç›´åœ¨æè¿°ä¸€ä¸ªå¯¹è±¡ç±»å‹ã€‚