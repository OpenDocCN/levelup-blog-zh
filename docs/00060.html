<html>
<head>
<title>Building A Tic-Tac-Toe Game App With JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用JavaScript构建井字游戏应用程序</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/building-a-tic-tac-toe-game-app-with-javascript-5916e58071fb?source=collection_archive---------0-----------------------#2018-01-05">https://levelup.gitconnected.com/building-a-tic-tac-toe-game-app-with-javascript-5916e58071fb?source=collection_archive---------0-----------------------#2018-01-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/df04d2b1caf3b2a1db8b487856aae1a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/1*kdY26OPGZbeNKJs60q0zUg.png"/></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk translated">tic_tac_toe.png</figcaption></figure><p id="de5b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我一直在研究<a class="kw kx ep" href="https://medium.com/u/8b318225c16a?source=post_page-----5916e58071fb--------------------------------" rel="noopener" target="_blank"> freeCodeCamp </a>的高级前端开发项目，我之前写过关于<a class="ae ky" href="https://medium.com/@ethanryan/lets-make-a-javascript-calculator-a81186cb912f" rel="noopener">制作一个JavaScript计算器</a>。今天我要写的是<a class="ae ky" href="https://www.freecodecamp.org/challenges/build-a-tic-tac-toe-game" rel="noopener ugc nofollow" target="_blank">制作井字游戏</a>。</p><p id="3ce4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">该应用的用户案例包括:</p><ol class=""><li id="25da" class="kz la iq ka b kb kc kf kg kj lb kn lc kr ld kv le lf lg lh bi translated"><strong class="ka ir">用户故事:</strong>我可以用电脑玩井字游戏。</li><li id="e099" class="kz la iq ka b kb li kf lj kj lk kn ll kr lm kv le lf lg lh bi translated"><strong class="ka ir">用户故事:</strong>我的游戏一结束就会重置，这样我就可以再玩了。</li><li id="b63b" class="kz la iq ka b kb li kf lj kj lk kn ll kr lm kv le lf lg lh bi translated"><strong class="ka ir">用户故事:</strong>我可以选择是想当X还是o。</li></ol><figure class="lo lp lq lr gt jr gh gi paragraph-image"><div class="gh gi ln"><img src="../Images/f1bd0426f71832870b1b1515be79cc56.png" data-original-src="https://miro.medium.com/v2/resize:fit:458/format:webp/1*wsksECEm5jBAr5VniWsMYg.png"/></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk translated">井字游戏，一步到位</figcaption></figure><p id="7cdc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我将这篇文章分成三个步骤:</p><ol class=""><li id="c97d" class="kz la iq ka b kb kc kf kg kj lb kn lc kr ld kv le lf lg lh bi translated">做对了，所以所有的用户故事都满足了</li><li id="6dde" class="kz la iq ka b kb li kf lj kj lk kn ll kr lm kv le lf lg lh bi translated">让它变得更好，重构代码，让它变得干燥、抽象、可读</li><li id="5b7e" class="kz la iq ka b kb li kf lj kj lk kn ll kr lm kv le lf lg lh bi translated">通过改善用户体验让它变得更酷</li></ol><p id="ab36" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们开始吧！</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="f839" class="lz ma iq bd mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw bi translated">第一步:做对</h1><p id="7b9a" class="pw-post-body-paragraph jy jz iq ka b kb mx kd ke kf my kh ki kj mz kl km kn na kp kq kr nb kt ku kv ij bi translated">下面是我这个井字游戏app的初稿:<a class="ae ky" href="https://codepen.io/ethanryan/pen/eydqNm" rel="noopener ugc nofollow" target="_blank">井字游戏，v1 </a>。</p><p id="248b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">它满足了所有用户故事的需求，但是它非常简单。</p><figure class="lo lp lq lr gt jr"><div class="bz fp l di"><div class="nc nd l"/></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk translated">井字游戏，v1</figcaption></figure><p id="5cea" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我的第一个版本满足了用户故事的要求，并考虑了一些问题，比如用户在计算机开始工作之前试图点击另一个网格单元。相对于其他版本，我预计完成第一个版本需要的时间最长。如果我有一个时间紧迫的客户，这个版本将足以满足要求。</p><p id="c101" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">但是我的代码需要重构。我有244行包含13个函数的JavaScript代码。更少的代码并不意味着更好的代码，但是在我的例子中，我知道我的JavaScript可以更简洁。我想把这些大函数分解成更小的辅助函数，这样我就不会重复了。</p><p id="bf04" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">比如，这是我的<code class="fe ne nf ng nh b">checkForWinner</code>函数:</p><pre class="lo lp lq lr gt ni nh nj nk aw nl bi"><span id="7411" class="nm ma iq nh b gy nn no l np nq">function checkForWinner() {<br/>  console.log("checking for winner...")<br/>  var winner<br/>  var playerOne = getPlayerOne() //playerOne is always blue!<br/>    //console.log('checkForWinner, playerOne is: ', playerOne)</span><span id="303a" class="nm ma iq nh b gy nr no l np nq">var computer = (playerOne === "X") ? "O" : "X"</span><span id="3add" class="nm ma iq nh b gy nr no l np nq">//there are 8 winningCombos: <br/>  //three rows, three columns, two diagonals<br/>  //refactor below.... this is not DRY!<br/>  var blueWin1 = $("#one.blue, #two.blue, #three.blue").length === 3<br/>  var blueWin2 = $("#four.blue, #five.blue, #six.blue").length === 3<br/>  var blueWin3 = $("#seven.blue, #eight.blue, #nine.blue").length === 3<br/>  var blueWin4 = $("#one.blue, #four.blue, #seven.blue").length === 3<br/>  var blueWin5 = $("#two.blue, #five.blue, #eight.blue").length === 3<br/>  var blueWin6 = $("#three.blue, #six.blue, #nine.blue").length === 3<br/>  var blueWin7 = $("#one.blue, #five.blue, #nine.blue").length === 3<br/>  var blueWin8 = $("#seven.blue, #five.blue, #three.blue").length === 3</span><span id="5a62" class="nm ma iq nh b gy nr no l np nq">var redWin1 = $("#one.red, #two.red, #three.red").length === 3<br/>  var redWin2 = $("#four.red, #five.red, #six.red").length === 3<br/>  var redWin3 = $("#seven.red, #eight.red, #nine.red").length === 3<br/>  var redWin4 = $("#one.red, #four.red, #seven.red").length === 3<br/>  var redWin5 = $("#two.red, #five.red, #eight.red").length === 3<br/>  var redWin6 = $("#three.red, #six.red, #nine.red").length === 3<br/>  var redWin7 = $("#one.red, #five.red, #nine.red").length === 3<br/>  var redWin8 = $("#seven.red, #five.red, #three.red").length === 3</span><span id="280c" class="nm ma iq nh b gy nr no l np nq">//var winningCombos = [x]<br/>  //refactor below too... not DRY at all!!!<br/>  //note: playerOne is always blue<br/>  var blueWins = (blueWin1 || blueWin2 || blueWin3 || blueWin4 || blueWin5 || blueWin6 || blueWin7 || blueWin8)</span><span id="2367" class="nm ma iq nh b gy nr no l np nq">var redWins = (redWin1 || redWin2 || redWin3 || redWin4 || redWin5 || redWin6 || redWin7 || redWin8)</span><span id="ea97" class="nm ma iq nh b gy nr no l np nq">var redCount = getRedCount()<br/>    //console.log('redCount is: ', redCount)<br/>  var blueCount = getBlueCount()<br/>    //console.log('blueCount is: ', blueCount)<br/>  var fullGrid = redCount + blueCount<br/>  console.log('fullGrid is: ', fullGrid)</span><span id="95bf" class="nm ma iq nh b gy nr no l np nq">var draw = (fullGrid === 9) &amp;&amp; (!blueWins) &amp;&amp; (!redWins)</span><span id="ba73" class="nm ma iq nh b gy nr no l np nq">if (blueWins) { //playerOne is always blue<br/>    winner = blueWins<br/>    console.log(`${playerOne} wins!`)<br/>    $("#gameResult, #congratsOrSorry").removeClass("displayNone")<br/>    $("#gameResult").html(`&lt;span class='yellowBig'&gt;${playerOne} wins!&lt;/span&gt;`)<br/>    $("#congratsOrSorry").html("&lt;span class='yellow'&gt;Congratulations! You won!&lt;/span&gt;")<br/>    $("#gameInfo").addClass("displayNone")<br/>    disableRemainingItems()<br/>    return winner<br/>  }<br/>  if (redWins) { //red is computer<br/>    winner = redWins<br/>    console.log(`${computer} wins!`)<br/>    $("#gameResult, #congratsOrSorry").removeClass("displayNone")<br/>    $("#gameResult").html(`&lt;span class='redBig'&gt;${computer} wins!&lt;/span&gt;`)<br/>    $("#congratsOrSorry").html("&lt;span class='red'&gt;Sorry, you lost.&lt;/span&gt;")<br/>    $("#gameInfo").addClass("displayNone")<br/>    disableRemainingItems()<br/>    return winner<br/>  }<br/>  if (draw) {<br/>    winner = draw<br/>    console.log('Draw game!')<br/>    $("#gameResult, #congratsOrSorry").removeClass("displayNone")<br/>    $("#gameResult").html(`&lt;span class='redBig'&gt;Game is a draw.&lt;/span&gt;`)<br/>    $("#congratsOrSorry").html("&lt;span&gt;Game ended in a draw.&lt;/span&gt;")<br/>    $("#gameInfo").addClass("displayNone")<br/>    disableRemainingItems()<br/>    return winner<br/>  } else {<br/>    console.log('game on...')<br/>  }<br/>}</span></pre><p id="e220" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">恶心！对于一个函数来说太长了。我可以做得更好。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="f577" class="lz ma iq bd mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw bi translated">第二步:做得更好</h1><p id="4bdd" class="pw-post-body-paragraph jy jz iq ka b kb mx kd ke kf my kh ki kj mz kl km kn na kp kq kr nb kt ku kv ij bi translated">是时候重构了。</p><figure class="lo lp lq lr gt jr gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/f46837ec7f72be30b06dda7258649280.png" data-original-src="https://miro.medium.com/v2/resize:fit:560/format:webp/1*Os7_ZZAvbfyCfPADC2k6dg.png"/></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk translated">井字游戏金字塔计划</figcaption></figure><p id="81ca" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为了重构，我仔细检查了我的代码，寻找重复多次的代码行。这些情况为创建较小的助手函数提供了机会，然后可以从其他函数调用这些函数。</p><blockquote class="nt nu nv"><p id="352e" class="jy jz nw ka b kb kc kd ke kf kg kh ki nx kk kl km ny ko kp kq nz ks kt ku kv ij bi translated">我想这是我可以抛出一些大词的地方，比如封装、多态和面向对象编程，但我不确定。也许这只是函数式编程的一个例子。</p></blockquote><p id="8db2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">例如，在上面那个大的<code class="fe ne nf ng nh b">checkForWinner</code>函数中，如果蓝色赢了(人类玩家之一是蓝色)，或者如果红色赢了(计算机是红色)，或者如果游戏以平局结束，我也在做类似的事情。</p><p id="0e71" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">因此，我删除了那些重复的代码行，并为checkForWinner构建了新的函数来调用:<code class="fe ne nf ng nh b">playerOneWins</code>、<code class="fe ne nf ng nh b">computerWins</code>和<code class="fe ne nf ng nh b">drawGame</code>。</p><p id="b017" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后，我从那些函数的<em class="nw">中删除了重复的代码，并创建了<em class="nw">另一个</em>辅助函数<code class="fe ne nf ng nh b">winLoseOrDraw</code>，供这些辅助函数中的每一个调用。</em></p><p id="c467" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">产生的新函数如下所示:</p><pre class="lo lp lq lr gt ni nh nj nk aw nl bi"><span id="8959" class="nm ma iq nh b gy nn no l np nq">function playerOneWins() {<br/> var playerOne = getPlayerOne()<br/> console.log(`${playerOne} wins!`)<br/>  $("#gameResult").html(`&lt;span class='yellowBig'&gt;${playerOne} wins!&lt;/span&gt;`)<br/>  $("#congratsOrSorry").html("&lt;span class='yellow'&gt;Congratulations! You won!&lt;/span&gt;")<br/>  winLoseOrDraw()<br/>}</span><span id="627b" class="nm ma iq nh b gy nr no l np nq">function computerWins() {<br/> var computer = getComputer()<br/>  console.log(`${computer} wins!`)<br/>  $("#gameResult").html(`&lt;span class='redBig'&gt;${computer} wins!&lt;/span&gt;`)<br/>  $("#congratsOrSorry").html("&lt;span class='red'&gt;Sorry, you lost.&lt;/span&gt;")<br/>  winLoseOrDraw()<br/>}</span><span id="aabd" class="nm ma iq nh b gy nr no l np nq">function drawGame() {<br/>  console.log('Draw game!')<br/>  $("#gameResult").html(`&lt;span class='redBig'&gt;Game is a draw.&lt;/span&gt;`)<br/>  $("#congratsOrSorry").html("&lt;span&gt;Game ended in a draw.&lt;/span&gt;")<br/>  winLoseOrDraw()<br/>}</span><span id="91f7" class="nm ma iq nh b gy nr no l np nq">function winLoseOrDraw() {<br/> $("#gameResult, #congratsOrSorry").removeClass("displayNone")<br/>  $("#gameInfo").addClass("displayNone")<br/>  disableRemainingItems()<br/>}</span></pre><p id="fbea" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">但是等等，还有呢！这只是我做的一些重构的一个例子。</p><p id="70a1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我真的不喜欢我为红蓝写的8个获奖组合:</p><pre class="lo lp lq lr gt ni nh nj nk aw nl bi"><span id="c3df" class="nm ma iq nh b gy nn no l np nq">var blueWin1 = $("#one.blue, #two.blue, #three.blue").length === 3<br/>var blueWin2 = $("#four.blue, #five.blue, #six.blue").length === 3<br/>var blueWin3 = $("#seven.blue, #eight.blue, #nine.blue").length === 3<br/>var blueWin4 = $("#one.blue, #four.blue, #seven.blue").length === 3<br/>var blueWin5 = $("#two.blue, #five.blue, #eight.blue").length === 3<br/>var blueWin6 = $("#three.blue, #six.blue, #nine.blue").length === 3<br/>var blueWin7 = $("#one.blue, #five.blue, #nine.blue").length === 3<br/>var blueWin8 = $("#seven.blue, #five.blue, #three.blue").length === 3</span><span id="968e" class="nm ma iq nh b gy nr no l np nq">var redWin1 = $("#one.red, #two.red, #three.red").length === 3<br/>var redWin2 = $("#four.red, #five.red, #six.red").length === 3<br/>var redWin3 = $("#seven.red, #eight.red, #nine.red").length === 3<br/>var redWin4 = $("#one.red, #four.red, #seven.red").length === 3<br/>var redWin5 = $("#two.red, #five.red, #eight.red").length === 3<br/>var redWin6 = $("#three.red, #six.red, #nine.red").length === 3<br/>var redWin7 = $("#one.red, #five.red, #nine.red").length === 3<br/>var redWin8 = $("#seven.red, #five.red, #three.red").length === 3</span><span id="1dba" class="nm ma iq nh b gy nr no l np nq">var blueWins = (blueWin1 || blueWin2 || blueWin3 || blueWin4 || blueWin5 || blueWin6 || blueWin7 || blueWin8)</span><span id="f3ba" class="nm ma iq nh b gy nr no l np nq">var redWins = (redWin1 || redWin2 || redWin3 || redWin4 || redWin5 || redWin6 || redWin7 || redWin8)</span></pre><p id="75a2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">那段代码很难看，而且超级重复——是DRY的反义词。它完成了工作，但是现在是时候重构，抽象它，使它变得更好。</p><p id="e982" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">有很多方法可以做到这一点，但我选择的方法是用几个map函数来创建两个数组，一个<code class="fe ne nf ng nh b">blueWinArray</code>和一个<code class="fe ne nf ng nh b">redWinArray</code>。这两个都映射到我的抽象的<code class="fe ne nf ng nh b">eightWinningCombos</code>字符串数组，用“红色”或“蓝色”替换“颜色”,然后检查任一数组是否以及何时从包含八个错误条件变为真条件，当这些数组中的一个确实包含一个获胜组合时。</p><pre class="lo lp lq lr gt ni nh nj nk aw nl bi"><span id="6451" class="nm ma iq nh b gy nn no l np nq">function checkForWinner() {<br/>  console.log("checking for winner...")<br/>  var winner<br/>  var playerOne = getPlayerOne() //playerOne is always blue<br/>  var computer = getComputer() //computer is always red</span><span id="95dc" class="nm ma iq nh b gy nr no l np nq">  var eightWinningCombos = [<br/>    "#one.COLOR, #two.COLOR, #three.COLOR",<br/>    "#four.COLOR, #five.COLOR, #six.COLOR",<br/>    "#seven.COLOR, #eight.COLOR, #nine.COLOR",<br/>    "#one.COLOR, #four.COLOR, #seven.COLOR",<br/>    "#two.COLOR, #five.COLOR, #eight.COLOR",<br/>    "#three.COLOR, #six.COLOR, #nine.COLOR",<br/>    "#one.COLOR, #five.COLOR, #nine.COLOR",<br/>    "#seven.COLOR, #five.COLOR, #three.COLOR"<br/>  ]</span><span id="64ed" class="nm ma iq nh b gy nr no l np nq">  var blueWinArray = eightWinningCombos.map(function(combo) {<br/>    var eachCombo = combo.replace(/COLOR/g, "blue")<br/>    return eachCombo = $(eachCombo).length === 3<br/>  })<br/>  <br/>  var redWinArray = eightWinningCombos.map(function(combo) {<br/>    var eachCombo = combo.replace(/COLOR/g, "red")<br/>    return eachCombo = $(eachCombo).length === 3<br/>  })</span><span id="9f5a" class="nm ma iq nh b gy nr no l np nq">  var blueWins = blueWinArray.includes(true)<br/>  var redWins = redWinArray.includes(true)</span><span id="f78b" class="nm ma iq nh b gy nr no l np nq">  var redCount = getRedCount()<br/>  var blueCount = getBlueCount()<br/>  var fullGrid = redCount + blueCount<br/>  var draw = (fullGrid === 9) &amp;&amp; (!blueWins) &amp;&amp; (!redWins)</span><span id="0d44" class="nm ma iq nh b gy nr no l np nq">  if (blueWins) { //playerOne is always blue<br/>    playerOneWins()<br/>    return winner = blueWins<br/>  }<br/>  if (redWins) { //red is computer<br/>    computerWins()<br/>    return winner = redWins<br/>  }<br/>  if (draw) {<br/>    drawGame()<br/>    return winner = draw<br/>  } else {<br/>    console.log('game on...')<br/>  }<br/>}</span></pre><p id="48bf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当然，这个函数还可以进一步重构，但是就我的目的而言，我很高兴它已经被抽象了一些，现在变得更简洁了。</p><p id="76bd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">啊，管它呢，让我们更抽象一点。</p><p id="9e96" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我可以将其中两个函数分解成两个辅助函数:</p><pre class="lo lp lq lr gt ni nh nj nk aw nl bi"><span id="cf95" class="nm ma iq nh b gy nn no l np nq">function getBlueWinArray(array) {<br/>  return array.map(function(combo) {<br/>    var eachCombo = combo.replace(/COLOR/g, "blue")<br/>    return eachCombo = $(eachCombo).length === 3<br/>  })<br/>}</span><span id="982f" class="nm ma iq nh b gy nr no l np nq">function getRedWinArray(array) {<br/>  return array.map(function(combo) {<br/>    var eachCombo = combo.replace(/COLOR/g, "red")<br/>    return eachCombo = $(eachCombo).length === 3<br/>  })<br/>}</span></pre><p id="253e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我可以将这两个函数重构为一个函数，它将一个字符串作为单独的参数:</p><pre class="lo lp lq lr gt ni nh nj nk aw nl bi"><span id="bbe4" class="nm ma iq nh b gy nn no l np nq">function getWinningArray(array, string) {<br/>  return array.map(function(combo) {<br/>    var eachCombo = combo.replace(/COLOR/g, string)<br/>    return eachCombo = $(eachCombo).length === 3<br/>  })<br/>}</span></pre><p id="5b77" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在我的<code class="fe ne nf ng nh b">checkForWinner</code>函数是这样的:</p><pre class="lo lp lq lr gt ni nh nj nk aw nl bi"><span id="8bd3" class="nm ma iq nh b gy nn no l np nq">function checkForWinner() {<br/>  console.log("checking for winner...")<br/>  var winner</span><span id="c835" class="nm ma iq nh b gy nr no l np nq">  var eightWinningCombos = [<br/>    "#one.COLOR, #two.COLOR, #three.COLOR",<br/>    "#four.COLOR, #five.COLOR, #six.COLOR",<br/>    "#seven.COLOR, #eight.COLOR, #nine.COLOR",<br/>    "#one.COLOR, #four.COLOR, #seven.COLOR",<br/>    "#two.COLOR, #five.COLOR, #eight.COLOR",<br/>    "#three.COLOR, #six.COLOR, #nine.COLOR",<br/>    "#one.COLOR, #five.COLOR, #nine.COLOR",<br/>    "#seven.COLOR, #five.COLOR, #three.COLOR"<br/>  ]</span><span id="52df" class="nm ma iq nh b gy nr no l np nq">  var blueWinArray = getWinningArray(eightWinningCombos, "blue")<br/>  var redWinArray = getWinningArray(eightWinningCombos, "red")<br/>  var blueWins = blueWinArray.includes(true)<br/>  var redWins = redWinArray.includes(true)<br/>  var fullGrid = getRedCount() + getBlueCount()<br/>  var draw = (fullGrid === 9) &amp;&amp; (!blueWins) &amp;&amp; (!redWins)<br/>  <br/>  if (blueWins) {<br/>    playerOneWins()<br/>    return winner = blueWins<br/>  }<br/>  if (redWins) {<br/>    computerWins()<br/>    return winner = redWins<br/>  }<br/>  if (draw) {<br/>    drawGame()<br/>    return winner = draw<br/>  } else {<br/>    console.log('game on...')<br/>  }<br/>}</span></pre><p id="69aa" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">还是长功能，不过现在干净多了。除了那个大的<code class="fe ne nf ng nh b">eightWinningCombos</code>数组，函数大部分是调用其他函数的变量，然后是一些<code class="fe ne nf ng nh b">if</code>语句。简洁多了。</p><p id="187f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我的应用程序现在有18个JavaScript函数，大约210行代码。</p><p id="2526" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">下面是<a class="ae ky" href="https://codepen.io/ethanryan/full/jYmVzN/" rel="noopener ugc nofollow" target="_blank">井字游戏v2 </a>的最终版本:</p><figure class="lo lp lq lr gt jr"><div class="bz fp l di"><div class="nc nd l"/></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk translated">井字游戏，v2</figcaption></figure></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><figure class="lo lp lq lr gt jr gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/8de8f2313e17ad5b5ef22ef22090548c.png" data-original-src="https://miro.medium.com/v2/resize:fit:476/format:webp/1*Vfs5nHIiLNrrNFA_ytz09Q.png"/></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk translated">Xs和Os</figcaption></figure><h1 id="7cd5" class="lz ma iq bd mb mc ob me mf mg oc mi mj mk od mm mn mo oe mq mr ms of mu mv mw bi translated">第三步:让它变酷</h1><p id="e14b" class="pw-post-body-paragraph jy jz iq ka b kb mx kd ke kf my kh ki kj mz kl km kn na kp kq kr nb kt ku kv ij bi translated">最后，现在我已经有了一个可以工作的应用程序，我对它进行了一点重构，使它更加易读和简洁。我想考虑用户体验，以及我如何改进游戏，使它在视觉上更有趣。</p><p id="d5c0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">颜色有很长的路要走，所以首先我会给我的游戏添加一些颜色，让它更有趣。</p><p id="1188" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">接下来，我给玩家一个选项，让他们在三种不同的游戏风格中进行选择:</p><ol class=""><li id="f790" class="kz la iq ka b kb kc kf kg kj lb kn lc kr ld kv le lf lg lh bi translated">经典(X和O)</li><li id="0432" class="kz la iq ka b kb li kf lj kj lk kn ll kr lm kv le lf lg lh bi translated">哥特(☠️和💀)</li><li id="03e1" class="kz la iq ka b kb li kf lj kj lk kn ll kr lm kv le lf lg lh bi translated">武器(⚔️和💣)</li></ol><p id="dd09" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">游戏是一样的，但是给了用户更多的选择，让游戏变得更有趣。说到游戏app，多点乐趣是好事！</p><figure class="lo lp lq lr gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="oh oi di oj bf ok"><div class="gh gi og"><img src="../Images/3406dcc51aeb77910d1e0ab1e793be4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CX5WuyCA_IHn8HHjwM4c4A.png"/></div></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk translated">哥特井字游戏</figcaption></figure><p id="7181" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这是我的井字游戏的最终版本，v3:</p><figure class="lo lp lq lr gt jr"><div class="bz fp l di"><div class="nc nd l"/></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk translated">井字游戏，v3</figcaption></figure><p id="7c94" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这里有一个快速演示:</p><figure class="lo lp lq lr gt jr"><div class="bz fp l di"><div class="ol nd l"/></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk translated">哥特井字游戏gif演示</figcaption></figure><p id="40bc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在这里玩<a class="ae ky" href="https://codepen.io/ethanryan/full/zpPxaR/" rel="noopener ugc nofollow" target="_blank">我最后的井字游戏版本</a>。</p><p id="32e9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">制作这个应用程序非常有趣。</p><p id="ae50" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">感谢阅读！</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><figure class="lo lp lq lr gt jr gh gi paragraph-image"><a href="https://levelup.gitconnected.com"><div class="gh gi om"><img src="../Images/9914c5dd23ac08b70eea6f4f9ba6fed2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E6CoI_MRyZ1JInNPsBSHtA.png"/></div></a></figure><div class="on oo gp gr op oq"><a href="https://gitconnected.com/learn/javascript" rel="noopener  ugc nofollow" target="_blank"><div class="or ab fo"><div class="os ab ot cl cj ou"><h2 class="bd ir gy z fp ov fr fs ow fu fw ip bi translated">学习JavaScript -最佳JavaScript教程(2019) | gitconnected</h2><div class="ox l"><h3 class="bd b gy z fp ov fr fs ow fu fw dk translated">前65名JavaScript教程-免费学习JavaScript。课程由开发人员提交并投票，从而实现…</h3></div><div class="oy l"><p class="bd b dl z fp ov fr fs ow fu fw dk translated">gitconnected.com</p></div></div><div class="oz l"><div class="pa l pb pc pd oz pe js oq"/></div></div></a></div></div></div>    
</body>
</html>