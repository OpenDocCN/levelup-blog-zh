<html>
<head>
<title>New and Exciting Features of Java 15 You Should Know About</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">您应该了解的Java 15的令人兴奋的新特性</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/new-and-exciting-features-of-java-15-you-should-know-about-d23c1c175176?source=collection_archive---------13-----------------------#2020-11-02">https://levelup.gitconnected.com/new-and-exciting-features-of-java-15-you-should-know-about-d23c1c175176?source=collection_archive---------13-----------------------#2020-11-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="c7d7" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Java 15中新特性的指南及代码示例</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/c0f9055ee0b7f5d141dbd1eb73a0bcdb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*LnPenNl2GkX0_pKr"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@asthetik?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">迈克·肯尼利</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="9e72" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Java在最近发布的Java 15中引入了一系列新特性。在本文中，我将讨论Java 15新引入的产品特性和一些我认为最有趣的预览特性。我们将研究的特性列表是文本块、记录、基于EdDSA的加密签名、隐藏类、instanceof操作符的模式匹配和Z垃圾收集器。所以让我们开始吧。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="3c81" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated"><strong class="ak">文本块</strong></h1><p id="0faf" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">文本块是一个多行文字字符串，它不需要大多数转义序列，如换行符和引号。文本块以三个双引号开始。</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="16d1" class="ne md it na b gy nf ng l nh ni">String example = """ This is a Text Block """;</span></pre><p id="e99b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">今天，文本块的主要用途是当开发人员想要一个包含HTML、XML、JSON或SQL片段的字符串值时。如果我们没有文本块，我们必须使用转义和连接来实现。文本块最初是作为JDK 13的预览功能引入的，现在在JDK 15中作为产品功能提供。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nj nk l"/></div></figure><h1 id="bb49" class="mc md it bd me mf nl mh mi mj nm ml mm jz nn ka mo kc no kd mq kf np kg ms mt bi translated">记录(第二次预览)</h1><p id="4539" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">Java记录是一种特殊类型的Java类，用于保存不可变的数据。记录在某些方面类似于Java枚举。所有记录的基类是<code class="fe nq nr ns na b">java.lang.Record</code>，就像<code class="fe nq nr ns na b">java.lang.Enum</code>是所有枚举的基类一样。下面是一个简单记录的例子。</p><p id="f2e2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是一个简单记录的例子。</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="4ee3" class="ne md it na b gy nf ng l nh ni">record Person (String firstName, String lastName) {}</span></pre><p id="d437" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当在没有任何构造函数声明的情况下编译记录时，它会自动获得一个规范的构造函数，该构造函数会将所有隐式声明的私有字段分配给实例化该记录的新表达式的相应参数。这意味着当上面的记录被编译时，它将看起来像下面的代码段。</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="a685" class="ne md it na b gy nf ng l nh ni">record <!-- -->Person<!-- -->(<!-- -->String firstName, String lastName<!-- -->) { <br/>    // Implicitly declared fields<br/>    private final <!-- -->String firstName<!-- -->;<br/>    private final <!-- -->String lastName<!-- -->;<br/><br/>    // Implicitly declared canonical constructor<br/>    <!-- -->Person<!-- -->(<!-- -->String firstName, String lastName<!-- -->) {<br/>        this.<!-- -->firstName <!-- -->= <!-- -->firstName<!-- -->;<br/>        this.<!-- -->lastName<!-- --> = <!-- -->lastName<!-- -->;<br/>    }<br/>}</span></pre><p id="f204" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Java Record的实例对于保存从数据库查询返回的记录、从远程服务调用返回的记录、从CSV文件读取的记录或类似的用例非常有用。</p><h1 id="5569" class="mc md it bd me mf nl mh mi mj nm ml mm jz nn ka mo kc no kd mq kf np kg ms mt bi translated">基于EdDSA的加密签名</h1><p id="9427" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">EdDSA是一个现代的椭圆曲线方案，比目前JDK的签名方案有更多的好处。数字签名允许我们验证签名的作者、日期和时间，并验证消息的内容。与其他签名方案相比，EdDSA具有更高的安全性和性能。</p><p id="8df8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是一个使用EdDSA生成密钥对和签名的示例。</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="5c62" class="ne md it na b gy nf ng l nh ni">KeyPairGenerator kpg = KeyPairGenerator.getInstance("Ed25519");<br/>KeyPair kp = kpg.generateKeyPair();<br/>Signature sig = Signature.getInstance("Ed25519");<br/>sig.initSign(kp.getPrivate());<br/>sig.update(msg);</span></pre><h1 id="d5b5" class="mc md it bd me mf nl mh mi mj nm ml mm jz nn ka mo kc no kd mq kf np kg ms mt bi translated">隐藏类</h1><p id="1b72" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">隐藏类是不能被其他类的字节码直接使用的类。它们旨在由运行时生成类的框架通过反射来使用。调用<code class="fe nq nr ns na b">ClassLoader::defineClass</code>会创建一个普通类，而调用<code class="fe nq nr ns na b">Lookup::defineHiddenClass</code>会创建一个隐藏类。JVM将从提供的字节中生成一个隐藏类，链接该隐藏类，并返回一个查找对象，该对象提供对隐藏类的反射访问。</p><p id="a8a3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以通过在返回的查找对象上调用<code class="fe nq nr ns na b">Lookup::lookupClass</code>来获得隐藏类的类对象。除了四个限制之外，隐藏类可以从类对象实例化，其成员可以像普通类一样被访问。这四种限制如下:</p><ul class=""><li id="43d5" class="nt nu it lb b lc ld lf lg li nv lm nw lq nx lu ny nz oa ob bi translated"><code class="fe nq nr ns na b">Class::getName</code>返回不是二进制名称的字符串</li><li id="8a93" class="nt nu it lb b lc oc lf od li oe lm of lq og lu ny nz oa ob bi translated"><code class="fe nq nr ns na b">Class::getCanonicalName</code>返回空值</li><li id="6d80" class="nt nu it lb b lc oc lf od li oe lm of lq og lu ny nz oa ob bi translated">隐藏类中声明的Final字段是不可修改的</li><li id="2bef" class="nt nu it lb b lc oc lf od li oe lm of lq og lu ny nz oa ob bi translated">该类对象不可由检测代理修改</li></ul><h1 id="6cfd" class="mc md it bd me mf nl mh mi mj nm ml mm jz nn ka mo kc no kd mq kf np kg ms mt bi translated"><strong class="ak">(第二次预览)</strong>实例的模式匹配</h1><p id="6066" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">Java 15中的<code class="fe nq nr ns na b">instanceof</code>操作符通过模式匹配得到了增强。为了理解这个特性是什么，让我们将它与操作符功能的原始实例进行比较。让我们看看下面传统的<code class="fe nq nr ns na b">instanceOf</code>操作符的示例代码。</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="dae0" class="ne md it na b gy nf ng l nh ni">if (vehicle instanceof Car) {<br/>    Car car = (Car) vehicle;<br/>    car.drive();<br/>} else if (vehicle instanceof Bike) {<br/>    Bike bike = (Bike) vehicle;<br/>    bike.drive();<br/>}</span></pre><p id="966a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们看看如何为<code class="fe nq nr ns na b">instanceof</code>操作符编写相同的带有模式匹配的代码。</p><pre class="kj kk kl km gt mz na nb nc aw nd bi"><span id="e6ee" class="ne md it na b gy nf ng l nh ni">if (vehicle instanceof Car car) {<br/>    car.drive();<br/>} else if(vehicle instanceof Bike bike) {<br/>    bike.drive();<br/>}</span></pre><p id="6c0d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从上面的例子中，您可以看到，使用模式匹配，我们可以避免样板代码，在样板代码中，我们用来检查对象的实例，并为相同的对象创建一个实例，并使用它进行进一步的操作。</p><h1 id="2458" class="mc md it bd me mf nl mh mi mj nm ml mm jz nn ka mo kc no kd mq kf np kg ms mt bi translated">z垃圾收集器(ZGC)</h1><p id="86ad" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">ZGC是一个可伸缩的低延迟垃圾收集器，最初是作为Java 11中的一个实验性特性引入的。如今，应用程序同时为成千上万的用户提供服务并不罕见，对于这样的应用程序，需要大量的内存。然而，管理所有这些内存很容易影响应用程序的性能。ZGC是作为这个问题的解决方案引入的，随着Java 15的推出，它现在已经成为一个产品特性。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="4acb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">本文到此为止。我希望你学到了新东西。如果你想在Java面试中脱颖而出，可以看看我写的关于棘手的Java面试问题的文章。</p><div class="oh oi gp gr oj ok"><a rel="noopener  ugc nofollow" target="_blank" href="/tricky-java-interview-questions-cfc546fd03ab"><div class="ol ab fo"><div class="om ab on cl cj oo"><h2 class="bd iu gy z fp op fr fs oq fu fw is bi translated">棘手的Java面试问题</h2><div class="or l"><h3 class="bd b gy z fp op fr fs oq fu fw dk translated">你知道答案吗？</h3></div><div class="os l"><p class="bd b dl z fp op fr fs oq fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="ot l"><div class="ou l ov ow ox ot oy ks ok"/></div></div></a></div><p id="2e33" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢您的阅读和快乐编码！</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="09cb" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">参考</h1><ul class=""><li id="638e" class="nt nu it lb b lc mu lf mv li oz lm pa lq pb lu ny nz oa ob bi translated"><a class="ae ky" href="https://openjdk.java.net/projects/jdk/15/" rel="noopener ugc nofollow" target="_blank">打开JDK </a></li><li id="fa2e" class="nt nu it lb b lc oc lf od li oe lm of lq og lu ny nz oa ob bi translated"><a class="ae ky" href="https://www.oracle.com/java/technologies/javase/15-relnote-issues.html" rel="noopener ugc nofollow" target="_blank"> JDK 15版本说明</a></li></ul></div></div>    
</body>
</html>