<html>
<head>
<title>How to Reduce Routine Work when Developing Microservices</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">开发微服务时如何减少常规工作</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-reduce-routine-work-when-developing-microservices-b915e27020b9?source=collection_archive---------4-----------------------#2022-07-30">https://levelup.gitconnected.com/how-to-reduce-routine-work-when-developing-microservices-b915e27020b9?source=collection_archive---------4-----------------------#2022-07-30</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="c131" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">自动库版本更新，自定义项目模板和Monorepo</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/18676e55dbd2738301725aa804ec4dc0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*dgEU9tGOdqiYrYyc"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/es/@possessedphotography?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">附身摄影</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</figcaption></figure><p id="ae98" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">每个项目的工作范围包括开发人员应该定期处理的一定量的日常工作。但是在被划分成许多存储库的微服务项目中，例行工作会多得多。</p><p id="c005" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们将查看微服务中日常工作的几个来源，以及尽可能将其最小化的方法。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="4386" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">使用Dependabot自动更新库版本</h1><p id="0210" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">几乎每个项目都使用一组封装了一些可重用逻辑的第三方和自定义库。在不同的包服务器(npm，NuGet…)上有无数的第三方库的例子。此外，当一些代码需要由位于不同存储库中的几个不同的微服务重用时，开发人员可以开发自己的库，并将其发布到私有的包服务器。</p><p id="ec37" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">越多的微服务使用同一套库，保持库版本<strong class="lb iu">最新</strong>和<strong class="lb iu">跨微服务一致</strong>就越困难。定期手动检查和更新版本可能会变得非常无聊和耗时，但不这样做会使开发过程变得复杂，并导致应用程序中出现奇怪的错误。</p><p id="6904" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">幸运的是，有一个叫做<a class="ae ky" href="https://github.com/dependabot" rel="noopener ugc nofollow" target="_blank">dependent bot</a>的很酷的工具，它可以几乎完全自动地将许多库中的库更新到新版本。一旦为您的存储库设置了Dependabot，它将定期执行例行检查，查看是否有更新的第三方或自定义库可用，并自动生成如下所示的拉请求:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mz"><img src="../Images/2f751102fb3d902e2b322e19d2450f87.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2JSGV0wBiq7lCu7IAY2ohg.png"/></div></div></figure><p id="faa7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">开发人员所要做的就是检查拉请求，批准它，并将其合并到主分支中。Dependabot工具对于包含许多包的单个项目也很有用，但是对于被分割成许多存储库的微服务项目，该工具几乎是不可或缺的。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="bbaf" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">自定义项目模板</h1><p id="1623" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">一旦大型微服务项目的开发开始，几乎每天或每周，开发团队都会创建一个新的存储库，其中包含一个新的项目。每个项目的结构缺乏严格的标准，这将导致许多不一致和相关的问题，例如:</p><ol class=""><li id="116d" class="na nb it lb b lc ld lf lg li nc lm nd lq ne lu nf ng nh ni bi translated">一个repo中的一个项目实现了洋葱架构，另一个repo中的另一个项目实现了垂直切片架构<strong class="lb iu"> — </strong>在两个项目中实现某些特性的开发人员将会花更多的时间来理解不同项目的结构。</li><li id="44ce" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">一个repo中的一个项目直接在根文件夹中包含一个单元测试项目，而另一个repo中的另一个项目在/Tests文件夹中包含一个单元测试项目<strong class="lb iu"> — </strong> DevOps工程师不能简单地重用同一个模板来为两个存储库构建CI管道，因为单元测试项目的路径是不同的。</li><li id="164c" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">这两个项目在如何处理传入的JWT令牌方面存在差异<strong class="lb iu"> — </strong>两个微服务和bug的行为不一致。</li></ol><p id="43d1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">开发人员可以通过在某个confluence页面上记录每个新项目的结构应该是什么，公共配置应该是什么样子，等等，来尝试缓解上述问题以及可能的其他问题。每当开发人员需要为新的微服务实现新项目时，他们都必须遵循该页面。但这是手工和多余的工作。</p><p id="a050" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">更好的方法是一次性创建一个项目模板，包括必要的结构、命名、基本的第三方和私有包、预配置通用特性，如授权、日志、缓存等。在积极发展阶段开始之前。</p><p id="0b60" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一个开发人员为一个新的微服务创建一个新的项目所需要的就是拿一个项目模板，把它放在新的存储库中，就这样。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="d250" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">把微服务挤压成Monorepo？</h1><p id="d40d" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">正如我们之前所说的，开发和维护一个被划分为许多存储库的微服务项目会导致大量的路由工作，这些工作可以通过应用各种技巧来减少，但是仍然需要纪律、熟练的领导者和其他努力。</p><p id="6a7f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果独立的存储库产生了大量的日常工作，开发人员也可以考虑对所有微服务使用monorepo。多存储库和monorepo之间的区别已经在我的另一篇文章中<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/how-many-repositories-do-you-need-for-a-microservices-project-b5c991aa440">讨论过了。Monorepo可以在某种程度上解决我们在这篇文章中提到的任何问题，但它也带来了其他挑战，你应该做好准备。</a></p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h2 id="22e9" class="no md it bd me np nq dn mi nr ns dp mm li nt nu mo lm nv nw mq lq nx ny ms nz bi translated">总结:</h2><ul class=""><li id="ab10" class="na nb it lb b lc mu lf mv li oa lm ob lq oc lu od ng nh ni bi translated">Dependabot可以极大地简化对新版本的库版本更新。</li><li id="c93e" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu od ng nh ni bi translated">创建自定义项目模板，以标准化组成应用程序的各种微服务项目。</li><li id="b23b" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu od ng nh ni bi translated">当维护单个存储库的成本太高时，可以考虑<a class="ae ky" href="https://medium.com/r?url=https%3A%2F%2Flevelup.gitconnected.com%2Fhow-many-repositories-do-you-need-for-a-microservices-project-b5c991aa440" rel="noopener"> Monorepo方法</a>。</li></ul></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="8cd7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读。如果你喜欢你所读到的，看看下面这个故事:</p><div class="oe of gp gr og oh"><a rel="noopener  ugc nofollow" target="_blank" href="/7-tricky-questions-to-ask-net-developer-in-a-job-interview-9cdb3789db54"><div class="oi ab fo"><div class="oj ab ok cl cj ol"><h2 class="bd iu gy z fp om fr fs on fu fw is bi translated">要问的7个棘手问题。NET开发人员在工作面试</h2><div class="oo l"><h3 class="bd b gy z fp om fr fs on fu fw dk translated">带着答案。</h3></div><div class="op l"><p class="bd b dl z fp om fr fs on fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="oq l"><div class="or l os ot ou oq ov ks oh"/></div></div></a></div></div></div>    
</body>
</html>