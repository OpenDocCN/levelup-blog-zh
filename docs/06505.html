<html>
<head>
<title>React-Redux</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">反应还原</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/react-redux-d6a88f99adff?source=collection_archive---------4-----------------------#2020-12-01">https://levelup.gitconnected.com/react-redux-d6a88f99adff?source=collection_archive---------4-----------------------#2020-12-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="a48b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kl">如果你想避免将属性从React父组件传递到其子组件或孙子组件的属性钻取，你一定要阅读这篇关于React-Redux的教程。</em></p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/65c351d1bcff99dd0f278d92b122fdaf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JMNBj5SS16PBH4kWD4v74Q.png"/></div></div></figure><h1 id="8362" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">Redux是什么？</h1><p id="febc" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">根据Redux <a class="ae mb" href="https://redux.js.org/tutorials/essentials/part-1-overview-concepts" rel="noopener ugc nofollow" target="_blank">文档</a>，Redux是一个管理和更新应用状态的模式和库，使用称为“动作”的事件。它充当需要在整个应用程序中使用的状态的集中存储，规则确保状态只能以可预测的方式更新。</p><p id="4907" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在本教程中，我们将建立我们的文件结构，如下图所示，并为reducers创建一个文件夹，我们稍后会谈到这个文件夹。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi mc"><img src="../Images/8e6f355e55bc864df023f6396760f6bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1084/format:webp/1*JljmCJVuUPxZkBC1kfTuxw.png"/></div></figure><p id="46c6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先，我们需要安装react-redux和redux的库:</p><p id="0379" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe md me mf mg b">npm install redux</code>和<code class="fe md me mf mg b">npm install react-redux</code>然后让我们从<strong class="jp ir"> index.js </strong>文件开始我们的旅程。</p><h2 id="124c" class="mh kz iq bd la mi mj dn le mk ml dp li jy mm mn lm kc mo mp lq kg mq mr lu ms bi translated"><strong class="ak"> index.js文件:</strong></h2><p id="d3ca" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">这里，我们从<code class="fe md me mf mg b">react-redux</code>引进了<code class="fe md me mf mg b">Provider Component</code>。什么是提供商？这是一个上下文包装器，我们将使用它来包装我们的整个应用程序，它接收<strong class="jp ir">商店</strong>作为属性。它的唯一目的是通过Redux的方法使<code class="fe md me mf mg b">Redux store</code>对我们应用程序的其余部分可用。</p><p id="c484" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，我们来谈谈<code class="fe md me mf mg b">Redux store</code>。<a class="ae mb" href="https://redux.js.org/tutorials/fundamentals/part-4-store" rel="noopener ugc nofollow" target="_blank"> Redux store </a>集合了组成应用程序的状态、动作和reducers。Store就像一个外部状态容器，每个React组件都可以访问它。非常重要的是，回想一下，在Redux应用程序中只有一个商店。</p><p id="4309" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">创建商店</strong></p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi mt"><img src="../Images/3cdef7722948756beae6ac7e0c0bb0d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BjzznWiWyk7RNPMQ6Kp0vQ.png"/></div></div></figure><p id="a524" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在第7行，我们从<code class="fe md me mf mg b">redux</code>导入了<code class="fe md me mf mg b">createStore</code>。CreateStore是一个函数，它创建一个<code class="fe md me mf mg b">Redux store</code>并将接受一个<code class="fe md me mf mg b">reducer</code>函数作为参数。在这段时间里，我们已经走过了<code class="fe md me mf mg b">rootReducer</code>。什么是rootReducer？这也是一个reducer函数，但是现在，让我们先把这个问题放一放，我们很快就会回来。在第10行，我们使用createStore函数创建Redux存储，并将其赋给变量<code class="fe md me mf mg b">store</code>。在第13行，我们将我们的存储作为道具或属性传递给提供者组件，这样Redux存储就可以通过一些Redux函数被整个应用程序的每个组件访问。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi mu"><img src="../Images/add4eba0b69956acdbb42f32080f08dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0VtNb1GB6Z4H7NDlbi_wAg.png"/></div></div></figure><h2 id="d487" class="mh kz iq bd la mi mj dn le mk ml dp li jy mm mn lm kc mo mp lq kg mq mr lu ms bi translated"><strong class="ak">减速器文件夹:</strong></h2><p id="060e" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">在这个文件夹中，有两个文件:<strong class="jp ir"> imageReducer.js </strong>和<strong class="jp ir"> rootReducer.js. </strong></p><p id="471e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae mb" href="https://redux.js.org/recipes/structuring-reducers/basic-reducer-structure#basic-reducer-structure" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir">什么是reduce</strong></a><strong class="jp ir">:</strong>redux是一个redux函数，会作为实参传入<code class="fe md me mf mg b">createStore</code>。<strong class="jp ir"> </strong>回想一下，你可以有许多减速器，但是你只能传递给<code class="fe md me mf mg b">createStore</code>一个减速器函数。我们稍后会在这个博客中讨论这个问题。</p><ol class=""><li id="a33d" class="mv mw iq jp b jq jr ju jv jy mx kc my kg mz kk na nb nc nd bi translated"><strong class="jp ir"> imageReducer.js: </strong>在这个文件的第1行，我们刚刚设置了一个<code class="fe md me mf mg b">initialState</code>，因为每个Reducer都需要一些初始状态。在第5行，我们将<code class="fe md me mf mg b">initialState</code>和<code class="fe md me mf mg b">action</code>作为参数传递给了我们的<code class="fe md me mf mg b">ImgReducer</code>函数。到目前为止，<code class="fe md me mf mg b">ImgReducer</code>是我们App唯一的减压器功能。要记住，reducers一般使用<a class="ae mb" href="https://redux.js.org/tutorials/fundamentals/part-3-state-actions-reducers" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> ES6默认参数语法</strong> </a>来提供初始状态:<code class="fe md me mf mg b">(state = initialState, action)</code>。</li></ol><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi ne"><img src="../Images/edafb41717f64599b8e5873f5da3f66c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zJOkCH_Uv8jYADDwCVheGw.png"/></div></div></figure><p id="ec00" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2.<strong class="jp ir"> rootReducer.js: </strong>在这个文件<code class="fe md me mf mg b">rootReducer.js</code>中，我们做的第一件事就是从<strong class="jp ir">导入<code class="fe md me mf mg b">ImgReducer</code>。/imageReducer "。</strong>在这里，我们有另一个减速器功能，即<code class="fe md me mf mg b">reducer</code>。如上所述，我们只能将一个缩减器作为参数传递给<code class="fe md me mf mg b">createStore</code>函数，因为我们有两个缩减器，我们需要另一个函数将我们的两个缩减器合并成一个。为此，我们必须从<code class="fe md me mf mg b">redux</code>导入<code class="fe md me mf mg b">combineReducers</code>功能。<code class="fe md me mf mg b"><a class="ae mb" href="https://redux.js.org/api/combinereducers" rel="noopener ugc nofollow" target="_blank">combineReducers</a></code>辅助函数将一个值为不同减函数的对象转换成一个可以传递给<code class="fe md me mf mg b">createStore</code>的减函数。</p><p id="936c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在第26行，我们将两个缩减器<code class="fe md me mf mg b">ImgReducer</code> &amp; <code class="fe md me mf mg b">reducer</code>传递给<code class="fe md me mf mg b">combineReducers</code>，并将其赋给变量<code class="fe md me mf mg b">rootReducer</code>，最后，我们使<code class="fe md me mf mg b">rootReducer</code>可导出。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi nf"><img src="../Images/d41d58e63acf00c4417dafad539a4cf3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lrGihOspw4Hofp5y52Z9zQ.png"/></div></div></figure><h2 id="d9f6" class="mh kz iq bd la mi mj dn le mk ml dp li jy mm mn lm kc mo mp lq kg mq mr lu ms bi translated"><strong class="ak">返回index.js文件:</strong></h2><p id="6c18" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">在第8行，我们在index.js文件中导入了<code class="fe md me mf mg b">rootReducer</code>。在第10行，我们将<code class="fe md me mf mg b">rootReducer</code>作为参数传递给<code class="fe md me mf mg b">createStore</code>函数，并将其分配给我们的<code class="fe md me mf mg b">Redux store</code>。此时，我们的<code class="fe md me mf mg b">Redux store</code>包含了我们的状态、动作和rootReducer (combineReducers)。最后，我们将该存储作为属性传递给提供者组件，以便在整个应用程序中，所有组件都可以访问它。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi ng"><img src="../Images/935cb644c6c66f49613c023f3352b7ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gtUFFOmKacr-ZHn_M7ZYrw.png"/></div></div></figure><h2 id="a630" class="mh kz iq bd la mi mj dn le mk ml dp li jy mm mn lm kc mo mp lq kg mq mr lu ms bi translated"><strong class="ak"> Count.js文件:</strong></h2><p id="7bc4" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated"><strong class="jp ir">组件如何访问Redux store的数据？</strong></p><p id="4774" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">React-redux为我们提供了另一个函数<code class="fe md me mf mg b">connect()</code>，组件可以使用这个函数来访问store的数据。<code class="fe md me mf mg b">connect()</code>函数将一个React组件连接到一个Redux存储。它有两个目的:它将组件连接到存储，以便从存储中获取数据，并将信息发送到存储。让我们把<code class="fe md me mf mg b">connect</code>看作React组件和Redux store之间的连接器或桥梁。</p><p id="5e6e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在让我们看看如何将我们的功能组件<strong class="jp ir">计数器</strong>连接到我们的Redux存储并从中获取can数据。首先，我们需要从<code class="fe md me mf mg b">'react-redux'</code>(第2行)导入<code class="fe md me mf mg b">connect</code>。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi nh"><img src="../Images/42c429f82b5d2e1dca27ff46007cf0b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C754nSm-yYViIILqGjPlOg.png"/></div></div></figure><p id="406e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe md me mf mg b"><a class="ae mb" href="https://react-redux.js.org/7.1/api/connect#connect" rel="noopener ugc nofollow" target="_blank">Connect</a></code>接受四个不同的参数，全部可选。按照惯例，它们被称为:</p><ol class=""><li id="cd5a" class="mv mw iq jp b jq jr ju jv jy mx kc my kg mz kk na nb nc nd bi translated"><code class="fe md me mf mg b">mapStateToProps?: Function</code></li><li id="e536" class="mv mw iq jp b jq ni ju nj jy nk kc nl kg nm kk na nb nc nd bi translated"><code class="fe md me mf mg b">mapDispatchToProps?: Function | Object</code></li><li id="93b0" class="mv mw iq jp b jq ni ju nj jy nk kc nl kg nm kk na nb nc nd bi translated"><code class="fe md me mf mg b">mergeProps?: Function</code></li><li id="c303" class="mv mw iq jp b jq ni ju nj jy nk kc nl kg nm kk na nb nc nd bi translated"><code class="fe md me mf mg b">options?: Object</code></li></ol><p id="d64b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这个例子中，我们将使用前两个:<code class="fe md me mf mg b">mapStateToProps</code>和<code class="fe md me mf mg b">mapDispatchToProps</code>。</p><h1 id="d69d" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated"><code class="fe md me mf mg b"><strong class="ak">mapStateToProps</strong></code></h1><p id="5200" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">这是一个函数，按照惯例，它将是<code class="fe md me mf mg b">connect</code>函数的第一个参数。您的<code class="fe md me mf mg b">mapStateToProps</code>函数应该返回一个对象。这个对象，通常被称为<code class="fe md me mf mg b"><a class="ae mb" href="https://react-redux.js.org/7.1/api/connect#connect" rel="noopener ugc nofollow" target="_blank">stateProps</a></code>，将作为道具合并到我们的连接组件，这里是计数器组件。</p><p id="f72a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因为我们使用<code class="fe md me mf mg b">connect()</code>将计数器组件连接到store，所以让我们将传递给<code class="fe md me mf mg b">mapStateToProps</code>的参数命名为store和<code class="fe md me mf mg b">console.log</code>(您可以随意命名)。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi nn"><img src="../Images/19bbead24af5ee5341174210f416c284.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kQCfh5KT3YDbisVw3ZenpA.png"/></div></div></figure><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi no"><img src="../Images/f74c8f18835dec5163ade05131135786.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nWwE-5omOz_x_S8fSS3aRw.png"/></div></div></figure><p id="fca3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">原来，我们的商店包含了我们所在州的<code class="fe md me mf mg b">rootReducer</code> ( <code class="fe md me mf mg b">ImgReducer</code>和<code class="fe md me mf mg b">reducer)</code>)。因为期望<code class="fe md me mf mg b">mapStateToProps</code>返回state，所以我们的目标是从<code class="fe md me mf mg b">rootReducer</code>访问state并返回它。</p><p id="6cda" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">从我们的减速器进入状态:</strong></p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi np"><img src="../Images/70f8aec279c98ba856d67ad8323f396a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WjuqQK89s3TGgLAdkMbF9A.png"/></div></div></figure><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi nq"><img src="../Images/453cd9b442627af740ce9dd93fcda4aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PpZVh79QXyi0U0YUGSYStg.png"/></div></div></figure><p id="0131" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">返回状态:</strong>对于这个组件，我们只需要计数器组件的<code class="fe md me mf mg b">count</code>字段，我们知道count在<code class="fe md me mf mg b">reducer</code>中，这将很容易检索。我们知道<code class="fe md me mf mg b">mapStateToProps</code>将返回一个对象，因此我们将这个对象的<code class="fe md me mf mg b">key</code>命名为<code class="fe md me mf mg b">count</code>，它的<code class="fe md me mf mg b">value</code>将为<code class="fe md me mf mg b">store.reducer.count.</code></p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi nr"><img src="../Images/2707641142ea011d43350c841ab5a6c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Kw6QEiLIh3lMkxYjOfj-Ng.png"/></div></div></figure><p id="dcea" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如上所述，无论什么样的<code class="fe md me mf mg b">mapStateToProps</code>回报都将是我们反制组件的道具。如果有什么道具的话，我们去开发者工具里面看看吧。正如你在下面看到的，我们的计数器组件现在有了<code class="fe md me mf mg b">count</code>作为道具。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi ns"><img src="../Images/0a2adb9d575fb7f122f5dced9fb7c5f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2EFafWlMiBuF6FDaTOZdBw.png"/></div></div></figure><h1 id="05e3" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated"><code class="fe md me mf mg b"><strong class="ak">mapDispatchToProps</strong></code></h1><p id="2c1b" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">按照惯例，<code class="fe md me mf mg b">connect()</code>采用的第二个参数是<code class="fe md me mf mg b">mapDispatchToProps</code>。回想一下，您的组件将默认接收<code class="fe md me mf mg b">dispatch</code>，例如您没有向<code class="fe md me mf mg b">connect()</code>提供第二个参数。</p><p id="fae3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你的<code class="fe md me mf mg b"><a class="ae mb" href="https://react-redux.js.org/7.1/api/connect#connect" rel="noopener ugc nofollow" target="_blank">mapDispatchToProps</a></code>被声明为一个带一个参数的函数，它将被赋予你的<code class="fe md me mf mg b">store.</code>的<code class="fe md me mf mg b">dispatch</code>。你的<code class="fe md me mf mg b"><a class="ae mb" href="https://react-redux.js.org/7.1/api/connect#connect" rel="noopener ugc nofollow" target="_blank">mapDispatchToProps</a></code>函数应该返回一个对象，对象的每个字段都应该是一个函数，调用它应该向商店发送一个动作。无论它返回什么，都将被合并为你的连接组件的道具，这里是计数器组件。</p><p id="b432" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe md me mf mg b">Dispatch</code>:作为参数<code class="fe md me mf mg b">action</code>。<a class="ae mb" href="https://redux.js.org/tutorials/fundamentals/part-3-state-actions-reducers" rel="noopener ugc nofollow" target="_blank">动作</a>是普通的JavaScript对象，有一个<code class="fe md me mf mg b">type</code>字段。您可以将动作视为描述应用程序中发生的事情的事件。最重要的是，<code class="fe md me mf mg b">actions</code>也有<code class="fe md me mf mg b">payload</code>字段，我们将描述正在发生的事情所需的任何额外数据放入<code class="fe md me mf mg b">action.payload</code>字段。这可能是一个数字、一个字符串或一个包含多个字段的对象。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi nt"><img src="../Images/897928131422752043f86970ed334727.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ttL0il0_TGll0cO5K9Ajkw.png"/></div></div></figure><p id="0277" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因为<code class="fe md me mf mg b">mapStateToProps</code>和<code class="fe md me mf mg b">mapDispatchToProps</code>函数的返回将作为道具合并到您连接的计数器组件中，所以让我们打开我们的DevTools来看看吧。下面我们可以看到我们的组件有一些道具:<code class="fe md me mf mg b">count</code>、<code class="fe md me mf mg b">decrement</code>和<code class="fe md me mf mg b">increment</code>。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi nu"><img src="../Images/80ccdc8b57e153d19b44c96df6f0a09c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZK3jFglEGNIPi8EZJQ7nRQ.png"/></div></div></figure><blockquote class="nv nw nx"><p id="4df3" class="jn jo kl jp b jq jr js jt ju jv jw jx ny jz ka kb nz kd ke kf oa kh ki kj kk ij bi translated">让我们通过使用connect函数将从<code class="fe md me mf mg b">mapStateToProps</code>和<code class="fe md me mf mg b">mapDispatchToProps</code>收到的那些道具记录到我们连接的计数器组件中。</p></blockquote><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi ob"><img src="../Images/a96712de5bf3deea1d873308f6e04ac2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CY5qT7CyMCqhO7eMMkESwA.png"/></div></div></figure><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi oc"><img src="../Images/42cc3607b4d15a05395d444e6e7c657c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W59o6j4FL_HQqGCWz1wv-Q.png"/></div></div></figure><h2 id="5c12" class="mh kz iq bd la mi mj dn le mk ml dp li jy mm mn lm kc mo mp lq kg mq mr lu ms bi translated">rootReducer.js:</h2><p id="f47b" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">让我向您介绍一下我们的减压器功能。它需要两个参数<code class="fe md me mf mg b">state</code>和<code class="fe md me mf mg b">action</code>。我们使用Switch case语句来检查条件，如果<code class="fe md me mf mg b">action.type</code>是“inc ”,我们希望我们的reducer函数首先返回当前状态，然后通过增加来更新<code class="fe md me mf mg b">count</code>字段。在这个例子中，我们使用了spread操作符来复制当前的<code class="fe md me mf mg b">(…state)</code>。另一方面，如果<code class="fe md me mf mg b">action.type</code>是“dec ”,我们希望我们的缩减器返回当前状态，并通过减少它来更新<code class="fe md me mf mg b">count</code>字段。如果这些条件都不满足，我们的reducer函数将默认返回当前状态。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi od"><img src="../Images/095232bbe677b885c9d8d2cecb073019.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OM-V4Kzsw-C8ZqOYdkq--w.png"/></div></div></figure><p id="2238" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">不过，在这一点上，我希望您可以看到Redux如何通过避免所谓的<a class="ae mb" href="https://medium.com/javascript-in-plain-english/how-to-avoid-prop-drilling-in-react-using-component-composition-c42adfcdde1b" rel="noopener"> Prop Drilling </a>来使我们的生活变得更加容易，所谓的Prop Drilling 就是通过遍历不需要数据的其他部分来将数据从React组件树的一部分传递到另一部分，而这些部分只是帮助传递数据</p><p id="81eb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你做到了这一步，感谢你的阅读！</p><p id="d293" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">PS:我在下面分享了<code class="fe md me mf mg b">ImgComponent</code>,我不会对它进行评论，因为我们已经通过<code class="fe md me mf mg b">counter Component.</code>在counter.js文件中介绍了相同的过程</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi oe"><img src="../Images/e4c3b81464542fafc58cb7f49e47322a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A3U539Q277ZR93LM7EawSw.png"/></div></div></figure><p id="2172" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">资源:<a class="ae mb" href="https://redux.js.org/introduction/getting-started" rel="noopener ugc nofollow" target="_blank">https://redux.js.org/introduction/getting-started</a>，</p><p id="e2ef" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae mb" href="https://redux.js.org/tutorials/fundamentals/part-3-state-actions-reducers" rel="noopener ugc nofollow" target="_blank">https://redux . js . org/tutorials/fundamentals/part-3-state-actions-reducers</a>，</p><p id="be16" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">https://react-redux.js.org/7.1/api/connect#connect，</p><p id="0642" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae mb" href="https://react-redux.js.org/7.1/introduction/why-use-react-redux" rel="noopener ugc nofollow" target="_blank">https://react-redux . js . org/7.1/introduction/why-use-react-redux</a></p></div></div>    
</body>
</html>