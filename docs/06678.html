<html>
<head>
<title>Deploying Kubeflow on a local Kubernetes cluster (minikube)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在本地Kubernetes集群(minikube)上部署Kubeflow</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/deploying-kubeflow-on-a-local-kubernetes-cluster-minikube-a08605d69729?source=collection_archive---------3-----------------------#2020-12-19">https://levelup.gitconnected.com/deploying-kubeflow-on-a-local-kubernetes-cluster-minikube-a08605d69729?source=collection_archive---------3-----------------------#2020-12-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="122b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">实习生，<a class="ae kl" href="https://www.canspirit.ai/" rel="noopener ugc nofollow" target="_blank">【can spirit . AI】</a>(导师——阿伦库马尔·奈尔先生<a class="km kn ep" href="https://medium.com/u/5843ab42d8c9?source=post_page-----a08605d69729--------------------------------" rel="noopener" target="_blank"> Canspirit AI </a> <a class="km kn ep" href="https://medium.com/u/e160ddd6842a?source=post_page-----a08605d69729--------------------------------" rel="noopener" target="_blank">阿伦·奈尔</a> ) <br/>学生，麻省理工学院欧洲早教学院——WPU(导师——维纳亚·戈霍卡尔博士<a class="km kn ep" href="https://medium.com/u/d11a50a07bce?source=post_page-----a08605d69729--------------------------------" rel="noopener" target="_blank"/>)</p><p id="a625" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是一个关于在本地Kubernetes集群上从头开始部署Kubeflow的教程。当我试图使用官方网站上的文档来部署它时，我遇到了很多错误，主要是兼容性问题，所以我在这里记录了这个过程，以供参考。</p><p id="7699" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们将首先创建一个Ubuntu虚拟机。我在GCP上创建了一个实例。</p><h2 id="66c3" class="ko kp iq bd kq kr ks dn kt ku kv dp kw jy kx ky kz kc la lb lc kg ld le lf lg bi translated">虚拟机要求:</h2><ol class=""><li id="10aa" class="lh li iq jp b jq lj ju lk jy ll kc lm kg ln kk lo lp lq lr bi translated">虚拟机操作系统— Ubuntu 20.04 LTS版</li><li id="06c6" class="lh li iq jp b jq ls ju lt jy lu kc lv kg lw kk lo lp lq lr bi translated">16 GB内存</li><li id="78d7" class="lh li iq jp b jq ls ju lt jy lu kc lv kg lw kk lo lp lq lr bi translated">4个虚拟CPU</li><li id="8b3d" class="lh li iq jp b jq ls ju lt jy lu kc lv kg lw kk lo lp lq lr bi translated">官方网站推荐250 GB存储的机器，我做了一个150 GB的。确保为根分配至少50GB的空间。</li></ol><h2 id="fc31" class="ko kp iq bd kq kr ks dn kt ku kv dp kw jy kx ky kz kc la lb lc kg ld le lf lg bi translated">先决条件:</h2><ol class=""><li id="569c" class="lh li iq jp b jq lj ju lk jy ll kc lm kg ln kk lo lp lq lr bi translated">Docker —版本1.19</li><li id="d811" class="lh li iq jp b jq ls ju lt jy lu kc lv kg lw kk lo lp lq lr bi translated">kubectl —版本1.15</li><li id="727b" class="lh li iq jp b jq ls ju lt jy lu kc lv kg lw kk lo lp lq lr bi translated">minikube —版本1.15</li></ol><p id="3348" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我使用NoMachine作为VM实例的GUI。这是必需的，因为我们需要访问Kubeflow，而kube flow不能从主机的浏览器访问。请随意使用其他方法，如PuTTY，来访问Kubeflow仪表板。</p><ul class=""><li id="8c95" class="lh li iq jp b jq jr ju jv jy lx kc ly kg lz kk ma lp lq lr bi translated"><a class="ae kl" href="https://www.nomachine.com/" rel="noopener ugc nofollow" target="_blank">https://download . no machine . com/download/6.9/Linux/no machine _ 6 . 9 . 2 _ 1 _ amd64 . deb</a></li><li id="8f4f" class="lh li iq jp b jq ls ju lt jy lu kc lv kg lw kk ma lp lq lr bi translated"><a class="ae kl" href="https://www.youtube.com/watch?v=eolNziYLe9Y&amp;feature=emb_logo" rel="noopener ugc nofollow" target="_blank">如何使用nomachine remote desktop在google cloud上设置Linux GUI |分步指南— YouTube </a></li></ul><h2 id="fac8" class="ko kp iq bd kq kr ks dn kt ku kv dp kw jy kx ky kz kc la lb lc kg ld le lf lg bi translated">1.安装Docker CE-</h2><p id="749b" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">运行以下命令来安装Docker CE:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="2d49" class="ko kp iq mj b gy mn mo l mp mq">apt-get update</span><span id="c25e" class="ko kp iq mj b gy mr mo l mp mq">apt-get install -y apt-transport-https ca-certificates curl software-properties-common</span><span id="a2a1" class="ko kp iq mj b gy mr mo l mp mq">curl -fsSL https://download.docker.com/linux/ubuntu/gpg | apt-key add -</span><span id="2195" class="ko kp iq mj b gy mr mo l mp mq">add-apt-repository \"deb [arch=amd64] https://download.docker.com/linux/ubuntu \$(lsb_release -cs) \stable"</span><span id="bd56" class="ko kp iq mj b gy mr mo l mp mq">apt-get update</span><span id="d952" class="ko kp iq mj b gy mr mo l mp mq">apt-get install docker-ce docker-ce-cli containerd.io</span></pre><p id="ec0a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">要验证您的安装，请运行:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="3e6f" class="ko kp iq mj b gy mn mo l mp mq">sudo docker run hello-world</span></pre><p id="9007" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">预期的输出如下所示:</p><figure class="me mf mg mh gt mt gh gi paragraph-image"><div role="button" tabindex="0" class="mu mv di mw bf mx"><div class="gh gi ms"><img src="../Images/8bfda43944e6b545be7a5235c75f4d80.png" data-original-src="https://miro.medium.com/v2/resize:fit:1068/format:webp/1*t3nt9jkHeLgorXA2G5nR7Q.png"/></div></div><figcaption class="na nb gj gh gi nc nd bd b be z dk translated">检查Docker安装</figcaption></figure><p id="ca23" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">可以随意查看Dockers官网:<a class="ae kl" href="https://docs.docker.com/install/linux/docker-ce/ubuntu/" rel="noopener ugc nofollow" target="_blank">https://docs.docker.com/install/linux/docker-ce/ubuntu/</a></p><h2 id="bce9" class="ko kp iq bd kq kr ks dn kt ku kv dp kw jy kx ky kz kc la lb lc kg ld le lf lg bi translated">2.正在安装kubectl-</h2><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="5d31" class="ko kp iq mj b gy mn mo l mp mq">curl -LO <a class="ae kl" href="https://storage.googleapis.com/kubernetes-release/release/v1.15.0/bin/linux/amd64/kubectl" rel="noopener ugc nofollow" target="_blank">https://storage.googleapis.com/kubernetes<br/>release/release/v1.15.0/bin/linux/amd64/kubectl</a></span><span id="41d4" class="ko kp iq mj b gy mr mo l mp mq">chmod +x ./kubectl</span><span id="1ded" class="ko kp iq mj b gy mr mo l mp mq">mv ./kubectl /usr/local/bin/kubectl</span></pre><p id="69ae" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">检查安装:</p><figure class="me mf mg mh gt mt gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/3865c308e85bd3a47bddb7c03d60f2da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1212/format:webp/1*kSl4Z-8tVCJspkPZRR2VxA.png"/></div><figcaption class="na nb gj gh gi nc nd bd b be z dk translated">检查kubectl安装</figcaption></figure><h2 id="08bd" class="ko kp iq bd kq kr ks dn kt ku kv dp kw jy kx ky kz kc la lb lc kg ld le lf lg bi translated">3.安装MiniKube–</h2><p id="31aa" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">我们将使用MiniKube创建一个本地Kubernetes集群。</p><figure class="me mf mg mh gt mt gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/a8988128b9d9af604a24fd23c0da73e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:776/format:webp/1*LwINqctOh1UsVWWVHm2cZw.png"/></div><figcaption class="na nb gj gh gi nc nd bd b be z dk translated"><a class="ae kl" href="https://www.kubeflow.org/docs/started/k8s/overview/#:~:text=Minimum%20system%20requirements%20%20%20%20Kubernetes%20Versions,%20%20compatible%20%204%20more%20rows%20" rel="noopener ugc nofollow" target="_blank">现有Kubernetes集群上的部署概述| Kubeflow </a></figcaption></figure><p id="9f2e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">安装minikube版本1.15，因为这与Kubeflow兼容。</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="7f6b" class="ko kp iq mj b gy mn mo l mp mq">curl -LO <a class="ae kl" href="https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64" rel="noopener ugc nofollow" target="_blank">https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64</a></span><span id="a361" class="ko kp iq mj b gy mr mo l mp mq">sudo install minikube-linux-amd64 /usr/local/bin/minikube</span></pre><p id="c80b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">检查安装:</p><figure class="me mf mg mh gt mt gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/ed5ae6eba61b9e2a6b9e1edba6e29229.png" data-original-src="https://miro.medium.com/v2/resize:fit:1206/format:webp/1*tpFoVkGvkWJ3VHEM0OnPQA.png"/></div><figcaption class="na nb gj gh gi nc nd bd b be z dk translated">检查minikube安装</figcaption></figure><h2 id="60be" class="ko kp iq bd kq kr ks dn kt ku kv dp kw jy kx ky kz kc la lb lc kg ld le lf lg bi translated">4.启动minikube-</h2><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="ba7c" class="ko kp iq mj b gy mn mo l mp mq">minikube start --cpus <strong class="mj ir">6</strong> --memory <strong class="mj ir">12288</strong> --disk-size<strong class="mj ir">=</strong>120g --extra-config<strong class="mj ir">=</strong>apiserver.service-account-issuer<strong class="mj ir">=</strong>api --extra-config<strong class="mj ir">=</strong>apiserver.service-account-signing-key-file<strong class="mj ir">=</strong>/var/lib/minikube/certs/apiserver.key --extra-config<strong class="mj ir">=</strong>apiserver.service-account-api-audiences<strong class="mj ir">=</strong>api</span></pre><p id="14c2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们希望指定6个CPU、12288内存、120G磁盘大小。</p><h2 id="fe5b" class="ko kp iq bd kq kr ks dn kt ku kv dp kw jy kx ky kz kc la lb lc kg ld le lf lg bi translated">5.安装Kubeflow-</h2><p id="bc9d" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">我们希望安装Kubeflow版本0.7，因为这是与Kubernetes兼容的稳定版本。首先，我们在终端输入<em class="nh"> sudo su </em>进入root。</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="f91e" class="ko kp iq mj b gy mn mo l mp mq">mkdir -p /root/kubeflow/v0.7</span><span id="276c" class="ko kp iq mj b gy mr mo l mp mq">cd /root/kubeflow/v0.7</span><span id="8ddb" class="ko kp iq mj b gy mr mo l mp mq">wget <a class="ae kl" href="https://github.com/kubeflow/kfctl/releases/download/v0.7.1/kfctl_v0.7.1-2-g55f9b2a_linux.tar.gz" rel="noopener ugc nofollow" target="_blank">https://github.com/kubeflow/kfctl/releases/download/v0.7.1/kfctl_v0.7.1-2-g55f9b2a_linux.tar.gz</a></span><span id="8e86" class="ko kp iq mj b gy mr mo l mp mq">tar -xvf<!-- --> <!-- -->kfctl_v0.7.1-2-g55f9b2a_linux.tar.gz</span><span id="e77a" class="ko kp iq mj b gy mr mo l mp mq">export PATH=$PATH:/root/kubeflow/v0.7</span><span id="f8ba" class="ko kp iq mj b gy mr mo l mp mq">export KF_NAME=my-kubeflow</span><span id="c05c" class="ko kp iq mj b gy mr mo l mp mq">export BASE_DIR=/root/kubeflow/v0.7</span><span id="5f7b" class="ko kp iq mj b gy mr mo l mp mq">export KF_DIR=${BASE_DIR}/${KF_NAME}</span><span id="8c2f" class="ko kp iq mj b gy mr mo l mp mq">mkdir -p ${KF_DIR}</span><span id="e876" class="ko kp iq mj b gy mr mo l mp mq">cd ${KF_DIR}</span><span id="a690" class="ko kp iq mj b gy mr mo l mp mq">kfctl apply -V -f <a class="ae kl" href="https://raw.githubusercontent.com/kubeflow/manifests/v0.7-branch/kfdef/kfctl_k8s_istio.0.7.1.yaml" rel="noopener ugc nofollow" target="_blank">https://raw.githubusercontent.com/kubeflow/manifests/v0.7-branch/kfdef/kfctl_k8s_istio.0.7.1.yaml</a></span></pre><p id="f502" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果您收到如下错误消息:</p><figure class="me mf mg mh gt mt gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/3d6e1a040a5235fc96b7fd0223c3ce3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1190/format:webp/1*Fkhu7R_1VA-3jVXcj0FBrw.png"/></div></figure><p id="30fc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后必须在nano中打开<code class="fe nj nk nl mj b">kfctl_k8s_istio.0.7.1.yaml</code>文件，不要做任何修改，只需保存(Ctrl+S)并退出(Ctrl+X)即可。然后执行以下statememt:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="2bad" class="ko kp iq mj b gy mn mo l mp mq">kfctl apply -V -f kfctl_k8s_istio.0.7.1.yaml</span></pre><p id="4352" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你应该得到一个运行中的东西的长列表，它将需要几分钟来执行。一旦完成，你就可以安全地进入下一步。</p><p id="5b86" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果此方法不起作用，请手动创建。yaml文件应该可以。以下方法的灵感来自这篇博客<a class="ae kl" href="https://medium.com/@andre.benea/setting-up-a-kubeflow-deployment-on-a-kubernetes-cluster-f1f5dc35d46a" rel="noopener">在Kubernetes集群上设置Kubeflow部署|作者Andre Benea | Medium </a>。请通读这篇教程，希望它能给你一个好的见解。</p><p id="961c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">输入以下内容并打开nano编辑器:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="4774" class="ko kp iq mj b gy mn mo l mp mq">nano kfctl_k8s_istio.yaml</span></pre><p id="541a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在文件中输入以下内容:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="ba08" class="ko kp iq mj b gy mn mo l mp mq">apiVersion: kfdef.apps.kubeflow.org/v1beta1<br/>kind: KfDef<br/>metadata:<br/>  creationTimestamp: null<br/>  namespace: kubeflow<br/>spec:<br/>  applications:<br/>  - kustomizeConfig:<br/>      parameters:<br/>      - name: namespace<br/>        value: istio-system<br/>      repoRef:<br/>        name: manifests<br/>        path: istio/istio-crds<br/>    name: istio-crds<br/>  - kustomizeConfig:<br/>      parameters:<br/>      - name: namespace<br/>        value: istio-system<br/>      repoRef:<br/>        name: manifests<br/>        path: istio/istio-install<br/>    name: istio-install<br/>  - kustomizeConfig:<br/>      parameters:<br/>      - name: clusterRbacConfig<br/>        value: "OFF"<br/>      repoRef:<br/>        name: manifests<br/>        path: istio/istio<br/>    name: istio<br/>  - kustomizeConfig:<br/>      repoRef:<br/>        name: manifests<br/>        path: application/application-crds<br/>    name: application-crds<br/>  - kustomizeConfig:<br/>      overlays:<br/>      - application<br/>      repoRef:<br/>        name: manifests<br/>        path: application/application<br/>    name: application<br/>  - kustomizeConfig:<br/>      repoRef:<br/>        name: manifests<br/>        path: metacontroller<br/>    name: metacontroller<br/>  - kustomizeConfig:<br/>      overlays:<br/>      - istio<br/>      - application<br/>      repoRef:<br/>        name: manifests<br/>        path: argo<br/>    name: argo<br/>  - kustomizeConfig:<br/>      repoRef:<br/>        name: manifests<br/>        path: kubeflow-roles<br/>    name: kubeflow-roles<br/>  - kustomizeConfig:<br/>      overlays:<br/>      - istio<br/>      - application<br/>      repoRef:<br/>        name: manifests<br/>        path: common/centraldashboard<br/>    name: centraldashboard<br/>  - kustomizeConfig:<br/>      overlays:<br/>      - application<br/>      repoRef:<br/>        name: manifests<br/>        path: admission-webhook/bootstrap<br/>    name: bootstrap<br/>  - kustomizeConfig:<br/>      overlays:<br/>      - application<br/>      repoRef:<br/>        name: manifests<br/>        path: admission-webhook/webhook<br/>    name: webhook<br/>  - kustomizeConfig:<br/>      overlays:<br/>      - istio<br/>      - application<br/>      repoRef:<br/>        name: manifests<br/>        path: jupyter/jupyter-web-app<br/>    name: jupyter-web-app<br/>  - kustomizeConfig:<br/>      overlays:<br/>      - istio<br/>      repoRef:<br/>        name: manifests<br/>        path: metadata<br/>    name: metadata<br/>  - kustomizeConfig:<br/>      overlays:<br/>      - istio<br/>      - application<br/>      repoRef:<br/>        name: manifests<br/>        path: jupyter/notebook-controller<br/>    name: notebook-controller<br/>  - kustomizeConfig:<br/>      overlays:<br/>      - application<br/>      repoRef:<br/>        name: manifests<br/>        path: pytorch-job/pytorch-job-crds<br/>    name: pytorch-job-crds<br/>  - kustomizeConfig:<br/>      overlays:<br/>      - application<br/>      repoRef:<br/>        name: manifests<br/>        path: pytorch-job/pytorch-operator<br/>    name: pytorch-operator<br/>  - kustomizeConfig:<br/>      overlays:<br/>      - application<br/>      parameters:<br/>      - name: namespace<br/>        value: knative-serving<br/>      repoRef:<br/>        name: manifests<br/>        path: knative/knative-serving-crds<br/>    name: knative-crds<br/>  - kustomizeConfig:<br/>      overlays:<br/>      - application<br/>      parameters:<br/>      - name: namespace<br/>        value: knative-serving<br/>      repoRef:<br/>        name: manifests<br/>        path: knative/knative-serving-install<br/>    name: knative-install<br/>  - kustomizeConfig:<br/>      overlays:<br/>      - application<br/>      repoRef:<br/>        name: manifests<br/>        path: kfserving/kfserving-crds<br/>    name: kfserving-crds<br/>  - kustomizeConfig:<br/>      overlays:<br/>      - application<br/>      repoRef:<br/>        name: manifests<br/>        path: kfserving/kfserving-install<br/>    name: kfserving-install<br/>  - kustomizeConfig:<br/>      overlays:<br/>      - application<br/>      parameters:<br/>      - name: usageId<br/>        value: &lt;randomly-generated-id&gt;<br/>      - name: reportUsage<br/>        value: "true"<br/>      repoRef:<br/>        name: manifests<br/>        path: common/spartakus<br/>    name: spartakus<br/>  - kustomizeConfig:<br/>      overlays:<br/>      - istio<br/>      repoRef:<br/>        name: manifests<br/>        path: tensorboard<br/>    name: tensorboard<br/>  - kustomizeConfig:<br/>      overlays:<br/>      - application<br/>      repoRef:<br/>        name: manifests<br/>        path: tf-training/tf-job-crds<br/>    name: tf-job-crds<br/>  - kustomizeConfig:<br/>      overlays:<br/>      - application<br/>      repoRef:<br/>        name: manifests<br/>        path: tf-training/tf-job-operator<br/>    name: tf-job-operator<br/>  - kustomizeConfig:<br/>      overlays:<br/>      - application<br/>      repoRef:<br/>        name: manifests<br/>        path: katib/katib-crds<br/>    name: katib-crds<br/>  - kustomizeConfig:<br/>      overlays:<br/>      - application<br/>      - istio<br/>      repoRef:<br/>        name: manifests<br/>        path: katib/katib-controller<br/>    name: katib-controller<br/>  - kustomizeConfig:<br/>      overlays:<br/>      - application<br/>      repoRef:<br/>        name: manifests<br/>        path: pipeline/api-service<br/>    name: api-service<br/>  - kustomizeConfig:<br/>      overlays:<br/>      - application<br/>      parameters:<br/>      - name: minioPvcName<br/>        value: minio-pv-claim<br/>      repoRef:<br/>        name: manifests<br/>        path: pipeline/minio<br/>    name: minio<br/>  - kustomizeConfig:<br/>      overlays:<br/>      - application<br/>      parameters:<br/>      - name: mysqlPvcName<br/>        value: mysql-pv-claim<br/>      repoRef:<br/>        name: manifests<br/>        path: pipeline/mysql<br/>    name: mysql<br/>  - kustomizeConfig:<br/>      overlays:<br/>      - application<br/>      repoRef:<br/>        name: manifests<br/>        path: pipeline/persistent-agent<br/>    name: persistent-agent<br/>  - kustomizeConfig:<br/>      overlays:<br/>      - application<br/>      repoRef:<br/>        name: manifests<br/>        path: pipeline/pipelines-runner<br/>    name: pipelines-runner<br/>  - kustomizeConfig:<br/>      overlays:<br/>      - istio<br/>      - application<br/>      repoRef:<br/>        name: manifests<br/>        path: pipeline/pipelines-ui<br/>    name: pipelines-ui<br/>  - kustomizeConfig:<br/>      overlays:<br/>      - application<br/>      repoRef:<br/>        name: manifests<br/>        path: pipeline/pipelines-viewer<br/>    name: pipelines-viewer<br/>  - kustomizeConfig:<br/>      overlays:<br/>      - application<br/>      repoRef:<br/>        name: manifests<br/>        path: pipeline/scheduledworkflow<br/>    name: scheduledworkflow<br/>  - kustomizeConfig:<br/>      overlays:<br/>      - application<br/>      repoRef:<br/>        name: manifests<br/>        path: pipeline/pipeline-visualization-service<br/>    name: pipeline-visualization-service<br/>  - kustomizeConfig:<br/>      overlays:<br/>      - application<br/>      - istio<br/>      parameters:<br/>      - name: admin<br/>        value: <a class="ae kl" href="mailto:johnDoe@acme.com" rel="noopener ugc nofollow" target="_blank">johnDoe@acme.com</a><br/>      repoRef:<br/>        name: manifests<br/>        path: profiles<br/>    name: profiles<br/>  - kustomizeConfig:<br/>      overlays:<br/>      - application<br/>      repoRef:<br/>        name: manifests<br/>        path: seldon/seldon-core-operator<br/>    name: seldon-core-operator<br/>  repos:<br/>  - name: manifests<br/>    uri: <a class="ae kl" href="https://github.com/kubeflow/manifests/archive/v0.7-branch.tar.gz" rel="noopener ugc nofollow" target="_blank">https://github.com/kubeflow/manifests/archive/v0.7-branch.tar.gz</a><br/>  version: master<br/>status: {}</span></pre><p id="4017" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Ctrl + S保存，Ctrl +X退出。<br/>输入:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="66cc" class="ko kp iq mj b gy mn mo l mp mq">kfctl apply -V -f kfctl_k8s_istio.yaml</span></pre><p id="1b35" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">即使在这之后它显示failed，执行下一步来查看pods是否正在运行。如果没有，请重新安装kfctl。我们可以尝试的另一件事是在nano上打开<code class="fe nj nk nl mj b">kfctl_k8s_istio.0.7.1.yaml file</code>文件，保存并退出，不做任何更改，然后执行下面的语句来检查pods是否正在运行。</p><h2 id="6090" class="ko kp iq bd kq kr ks dn kt ku kv dp kw jy kx ky kz kc la lb lc kg ld le lf lg bi translated">6.检查豆荚的状态-</h2><p id="0501" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">安装完成后，运行以下命令检查所有pod是否都处于运行状态:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="aca1" class="ko kp iq mj b gy mn mo l mp mq">kubectl get pod -n kubeflow</span></pre><p id="9595" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">输出应该如下所示:</p><figure class="me mf mg mh gt mt gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/a76b7b8627e1061c7f67a9765738d0bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*CIxRoVAjYiJdLjLXTjvpNg.png"/></div><figcaption class="na nb gj gh gi nc nd bd b be z dk translated">检查pod的状态</figcaption></figure><p id="42df" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我错误地创建了2个Kubeflow实例，所以我们可以看到2/2处于pod状态。你的应该在大多数的豆荚上显示1/1。</p><h2 id="0178" class="ko kp iq bd kq kr ks dn kt ku kv dp kw jy kx ky kz kc la lb lc kg ld le lf lg bi translated">7.启动Kubeflow仪表板-</h2><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="f54b" class="ko kp iq mj b gy mn mo l mp mq">export INGRESS_HOST<strong class="mj ir">=$(</strong>minikube ip<strong class="mj ir">)</strong></span><span id="42f1" class="ko kp iq mj b gy mr mo l mp mq">export INGRESS_PORT<strong class="mj ir">=$(</strong>kubectl -n istio-system get service istio-ingressgateway -o jsonpath<strong class="mj ir">=</strong>'{.spec.ports[?(@.name=="http2")].nodePort}'<strong class="mj ir">)</strong></span></pre><p id="d802" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">获取变量值:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="dde4" class="ko kp iq mj b gy mn mo l mp mq">echo $INGRESS_HOST</span><span id="6f2b" class="ko kp iq mj b gy mr mo l mp mq">echo $INGRESS_PORT</span></pre><p id="c59e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi">— — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — -</p><p id="4866" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="nh">或者，您可以将所有导出命令保存在bashrc文件中，这样这些变量是全局的，不会在以后丢失。</em></p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="b8d7" class="ko kp iq mj b gy mn mo l mp mq"><em class="nh">sudo nano ~/.bashrc</em></span></pre><p id="a904" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="nh">在文件中，输入并保存:</em></p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="c775" class="ko kp iq mj b gy mn mo l mp mq"><em class="nh">export INGRESS_HOST</em><strong class="mj ir"><em class="nh">=$(</em></strong><em class="nh">minikube ip</em><strong class="mj ir"><em class="nh">)</em></strong></span><span id="ace0" class="ko kp iq mj b gy mr mo l mp mq"><em class="nh">export INGRESS_PORT</em><strong class="mj ir"><em class="nh">=$(</em></strong><em class="nh">kubectl -n istio-system get service istio-ingressgateway -o jsonpath</em><strong class="mj ir"><em class="nh">=</em></strong><em class="nh">'{.spec.ports[?(@.name=="http2")].nodePort}'</em><strong class="mj ir"><em class="nh">)</em></strong></span></pre><p id="44bc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="nh">要执行命令，请执行:</em></p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="5f53" class="ko kp iq mj b gy mn mo l mp mq"><em class="nh">source ~/.bashrc</em></span></pre><p id="b5d2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi">— — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — -</p><h2 id="5288" class="ko kp iq bd kq kr ks dn kt ku kv dp kw jy kx ky kz kc la lb lc kg ld le lf lg bi translated">8.Kubeflow仪表板:</h2><p id="cdf9" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">在web浏览器上输入如下网址，然后访问Kubeflow。</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="c6f1" class="ko kp iq mj b gy mn mo l mp mq">http://&lt;INGRESS_HOST&gt;:&lt;INGRESS_PORT&gt;</span></pre><figure class="me mf mg mh gt mt gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/9f7959b6938cc4d3f6622498db74b2d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*PFQIQ52BZoBzzKuMAVA5nQ.png"/></div><figcaption class="na nb gj gh gi nc nd bd b be z dk translated">Kubeflow仪表板</figcaption></figure><h1 id="5c2e" class="nn kp iq bd kq no np nq kt nr ns nt kw nu nv nw kz nx ny nz lc oa ob oc lf od bi translated">安装后的故障排除</h1><p id="128a" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">有时我发现在执行<code class="fe nj nk nl mj b">minikube start</code>命令后，我无法访问我的Kubeflow仪表盘。</p><p id="319b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">到目前为止我所做的是使用<em class="nh"> rm </em>命令删除<em class="nh"> my-kubeflow目录</em>中的目录，并重新执行<em class="nh"> </em>中的所有语句<em class="nh"> </em>。yaml文件语句。Kubeflow仪表板的IP地址没有改变，我可以访问它。</p><p id="0017" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi">— — — — — — — — — — — — — — *** — — — — — — — — — — — — — — —</p><p id="4c83" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">但是我仍然需要找出解决这个问题的方法。我会继续更新我的博客，因为我正在寻找最好的解决方案。非常欢迎评论和建议。</p><p id="51c7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我现在是一名实习生，目前是我在ECE的第三年。所以我对这些技术还是陌生的。我希望我能帮助你完成这个安装。欢迎在下面评论，寻求帮助。我将设法尽早回来。</p><h1 id="fa99" class="nn kp iq bd kq no np nq kt nr ns nt kw nu nv nw kz nx ny nz lc oa ob oc lf od bi translated">一些有用的网站:</h1><p id="e09d" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated"><a class="ae kl" href="https://github.com/kubeflow/kubeflow/issues/4642" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> Kubeflow安装错误问题# 4642 kube flow/kube flow GitHub</strong></a></p></div></div>    
</body>
</html>