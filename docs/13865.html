<html>
<head>
<title>Common Mistake — Processing Big Data in a Transaction</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">常见错误—在交易中处理大数据</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/common-mistake-processing-big-data-in-a-transaction-2b276912a512?source=collection_archive---------11-----------------------#2022-10-12">https://levelup.gitconnected.com/common-mistake-processing-big-data-in-a-transaction-2b276912a512?source=collection_archive---------11-----------------------#2022-10-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="ff75" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph"><a class="ae ep" href="https://medium.com/@anasanjaria/list/databases-7ea27ca82ce1" rel="noopener">数据库</a></h2><div class=""/><figure class="gl gn jx jy jz ka gh gi paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="gh gi jw"><img src="../Images/72a253ceb3cbdd942c2e814dab787ae8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z2N_muHA5H1oAgsy9Kovxw.png"/></div></div><figcaption class="kh ki gj gh gi kj kk bd b be z dk translated">数据库系统中事务的概念——由作者使用https://app.diagrams.net/的<a class="ae kl" href="https://app.diagrams.net/" rel="noopener ugc nofollow" target="_blank">创建</a></figcaption></figure><p id="ded2" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">数据库系统中有一个事务的概念。意思是:</p><blockquote class="lk ll lm"><p id="2696" class="km kn ln ko b kp kq kr ks kt ku kv kw lo ky kz la lp lc ld le lq lg lh li lj ij bi translated">执行所有操作或不执行任何操作。</p></blockquote><p id="b87b" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">它确保了数据的完整性。但是你知道如何处理交易中的大数据吗？</p><p id="47c8" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">我遇到了一段代码，它在单个事务中执行大数据。</p><blockquote class="lk ll lm"><p id="dc56" class="km kn ln ko b kp kq kr ks kt ku kv kw lo ky kz la lp lc ld le lq lg lh li lj ij bi translated">在我看来，这是一种不好的做法。</p></blockquote><figure class="ls lt lu lv gt ka gh gi paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="gh gi lr"><img src="../Images/a084b4c94704ff8a61db147d8ff7ac10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vuS264ZNl_RP_kYwDZo3_Q.png"/></div></div><figcaption class="kh ki gj gh gi kj kk bd b be z dk translated">在单个事务中处理大数据——由作者使用https://app.diagrams.net/<a class="ae kl" href="https://app.diagrams.net/" rel="noopener ugc nofollow" target="_blank">创建</a></figcaption></figure><h1 id="4358" class="lw lx iq bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">原因—在单个事务中处理大数据是不良做法</h1><p id="a372" class="pw-post-body-paragraph km kn iq ko b kp mu kr ks kt mv kv kw kx mw kz la lb mx ld le lf my lh li lj ij bi translated">在单个事务中处理所有块的问题是不确定的执行时间。这意味着整体执行时间依赖于大数据，而大数据会随着数据的增长而增加。</p><blockquote class="lk ll lm"><p id="838e" class="km kn ln ko b kp kq kr ks kt ku kv kw lo ky kz la lp lc ld le lq lg lh li lj ij bi translated">通常，我们在生产环境中设置查询超时，这样我们的系统就不会永远等待执行数据库操作。</p></blockquote><p id="86a5" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">在这个特定的用例中，我们的系统将不断抛出超时异常，因为它不能在给定的时间框架内完成一个大的事务。</p><p id="2bfe" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">另一个问题是它可能会增加我们数据库系统的负载。</p><h1 id="554b" class="lw lx iq bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">在交易中处理大数据的推荐做法</h1><figure class="ls lt lu lv gt ka gh gi paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="gh gi mz"><img src="../Images/fc426d18cec6306dfab958ada691f4bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_i1thFHJFGaXmXWKILegIQ.png"/></div></div><figcaption class="kh ki gj gh gi kj kk bd b be z dk translated">处理事务中的每个块——由作者使用<a class="ae kl" href="https://app.diagrams.net/" rel="noopener ugc nofollow" target="_blank">https://app.diagrams.net/</a>创建</figcaption></figure><p id="e460" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">处理大数据的推荐方法是处理事务中的每个(同等大小的)数据块。这样的话，</p><ul class=""><li id="2d2f" class="na nb iq ko b kp kq kt ku kx nc lb nd lf ne lj nf ng nh ni bi translated">我们有一个确定的执行时间。</li><li id="ebaf" class="na nb iq ko b kp nj kt nk kx nl lb nm lf nn lj nf ng nh ni bi translated">它不会使我们的数据库系统超载。</li></ul><p id="4f90" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">感谢阅读。</p><p id="953f" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">如果你有任何问题，请随时提问。</p></div><div class="ab cl no np hu nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="ij ik il im in"><p id="3863" class="pw-post-body-paragraph km kn iq ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">如果你喜欢这篇文章，你可能也会喜欢下面的系列文章。</p><div class="nv nw gp gr nx"><div role="button" tabindex="0" class="ab bv gv cb fp ny nz bn oa kf ex"><div class="ob l"><div class="ab q"><div class="l di"><img alt="Anas Anjaria" class="l de bw oc od fe" src="../Images/89827307249a30f11a5732a9890e912d.png" width="20" height="20" loading="lazy" data-original-src="https://miro.medium.com/v2/resize:fill:40:40/1*uUIPYdjxGW5QbiWgjkhyDg.jpeg"/><div class="fb bw l oc od fc n aw fd"/></div><div class="hh l fo"><p class="bd b dl z fp fq fr fs ft fu fv fw dk translated"><a class="ae af ag ah ai aj ak al am an ao ap aq ar as" href="https://medium.com/@anasanjaria?source=post_page-----2b276912a512--------------------------------" rel="noopener follow" target="_top">阿纳斯·安贾里亚</a></p></div></div><div class="og oh gw l"><h2 class="bd ja uc na fp ud fr fs ue fu fw iz bi translated">数据库</h2></div><div class="ab q"><div class="l fo"><a class="bd b be z bi uf au ug uh ui qn uj an eh ei uk ul um el em eo de bk ep" href="https://medium.com/@anasanjaria/list/databases-7ea27ca82ce1?source=post_page-----2b276912a512--------------------------------" rel="noopener follow" target="_top">View list</a></div><div class="un l fo"><span class="bd b dl z dk">10 stories</span></div></div></div><div class="ot dh ou fp ab ov fo di"><div class="di ol bv om on"><div class="dh l"><img alt="Essential metrics to monitor continuous archiving &amp; point-in-time recovery" class="dh" src="../Images/218297210fc211ae26c0d6cc69260bb0.png" width="194" height="194" loading="lazy" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/1*IE5FIi4NRZ7iIGYk6siJzw.png"/></div></div><div class="di ol bv oo op oq"><div class="dh l"><img alt="" class="dh" src="../Images/0262a5898c2d67623c8ec17595785983.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/0*in5k9BeLfzsDj438"/></div></div><div class="di bv or os oq"><div class="dh l"><img alt="Restoring a node from backups stored in the AWS cloud" class="dh" src="../Images/516f3c5753301744288fac8ea13a78cf.png" width="194" height="194" loading="lazy" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/1*AenlYFoBsasZ-7j6gXYv5g.png"/></div></div></div></div></div><div class="nv nw gp gr nx"><div role="button" tabindex="0" class="ab bv gv cb fp ny nz bn oa kf ex"><div class="ob l"><div class="ab q"><div class="l di"><img alt="Anas Anjaria" class="l de bw oc od fe" src="../Images/89827307249a30f11a5732a9890e912d.png" width="20" height="20" loading="lazy" data-original-src="https://miro.medium.com/v2/resize:fill:40:40/1*uUIPYdjxGW5QbiWgjkhyDg.jpeg"/><div class="fb bw l oc od fc n aw fd"/></div><div class="hh l fo"><p class="bd b dl z fp fq fr fs ft fu fv fw dk translated"><a class="ae af ag ah ai aj ak al am an ao ap aq ar as" href="https://medium.com/@anasanjaria?source=post_page-----2b276912a512--------------------------------" rel="noopener follow" target="_top">阿纳斯·安贾里亚</a></p></div></div><div class="og oh gw l"><h2 class="bd ja uc na fp ud fr fs ue fu fw iz bi translated">现场可靠性工程</h2></div><div class="ab q"><div class="l fo"><a class="bd b be z bi uf au ug uh ui qn uj an eh ei uk ul um el em eo de bk ep" href="https://medium.com/@anasanjaria/list/site-reliability-engineering-fd4dc0eabf12?source=post_page-----2b276912a512--------------------------------" rel="noopener follow" target="_top">View list</a></div><div class="un l fo"><span class="bd b dl z dk">6 stories</span></div></div></div><div class="ot dh ou fp ab ov fo di"><div class="di ol bv om on"><div class="dh l"><img alt="Essential metrics to monitor continuous archiving &amp; point-in-time recovery" class="dh" src="../Images/218297210fc211ae26c0d6cc69260bb0.png" width="194" height="194" loading="lazy" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/1*IE5FIi4NRZ7iIGYk6siJzw.png"/></div></div><div class="di ol bv oo op oq"><div class="dh l"><img alt="Monitor Your System — Practical Guide. Site reliability engineering" class="dh" src="../Images/3d271359e6086a41f80bff2b638af676.png" width="194" height="194" loading="lazy" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/0*SOX9hjN4XpoQA8co"/></div></div><div class="di bv or os oq"><div class="dh l"><img alt="High level overview of collecting Postgres metrics using custom query" class="dh" src="../Images/d643efa963dab995deed8d0125948586.png" width="194" height="194" loading="lazy" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/1*wGBWHb2-SVt6p9m_GF4XTg.png"/></div></div></div></div></div></div><div class="ab cl no np hu nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="ij ik il im in"><pre class="ls lt lu lv gt pa pb pc pd aw oz bi"><span id="e689" class="pe lx iq pb b gy pf pg l ph pi"><strong class="pb ja">Want to connect?<br/></strong><a class="ae kl" href="https://www.facebook.com/anas.anjaria.kh" rel="noopener ugc nofollow" target="_blank">Facebook</a> | <a class="ae kl" href="https://www.linkedin.com/in/anasanjaria/" rel="noopener ugc nofollow" target="_blank">LinkedIn</a> | <a class="ae kl" href="https://twitter.com/anasanjaria" rel="noopener ugc nofollow" target="_blank">Twitter</a></span><span id="2b96" class="pe lx iq pb b gy pj pg l ph pi"><strong class="pb ja">Subscribe to get my work directly into your inbox.<br/></strong><a class="ae kl" href="https://medium.com/subscribe/@anasanjaria" rel="noopener">https://medium.com/subscribe/@anasanjaria</a></span></pre></div></div>    
</body>
</html>