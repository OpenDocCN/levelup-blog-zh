<html>
<head>
<title>Coffee Break Scripts: Restoring your local.settings.json</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">休息时间脚本:恢复您的local.settings.json</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/coffee-break-scripts-restoring-your-local-settings-json-d7e56344185c?source=collection_archive---------15-----------------------#2020-02-07">https://levelup.gitconnected.com/coffee-break-scripts-restoring-your-local-settings-json-d7e56344185c?source=collection_archive---------15-----------------------#2020-02-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="9576" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用PowerShell从Azure Functions实例</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/21e46279df61511211a172df223120ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bCMMMdDOzJfsZpXGqoAzTA.jpeg"/></div></div></figure><p id="9821" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">对于那些经常使用Azure函数的人来说，最平凡的任务之一就是必须在本地开发环境中不断修改和重新创建local.settings.json文件。有时候，你需要在不同的环境中调试一个功能应用程序，不断地改变你的本地配置是很痛苦的。如果你的功能app已经部署好了，为什么不让<strong class="kt ir"> <em class="ln"> PowerShell* </em> </strong>替你做所有的苦差事呢？</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lo lp l"/></div></figure><p id="9905" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">此函数将从已部署的函数应用程序中动态获取应用程序配置设置，并在您的本地计算机上以正确的格式重新创建local.settings.json。</p><p id="be5a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">它支持交互式和非交互式登录(前提是您拥有从指定帐户读取应用配置设置的适当权限)，如下所示:</p><pre class="kg kh ki kj gt lq lr ls lt aw lu bi"><span id="8c99" class="lv lw iq lr b gy lx ly l lz ma"># Interactive Sign-In</span><span id="a00d" class="lv lw iq lr b gy mb ly l lz ma">Restore-AzFunctionLocalSettingsJson -FunctionAppName &lt;function_app_name&gt; -FunctionAppResourceGroup &lt;function_app_resource_group&gt;</span><span id="3106" class="lv lw iq lr b gy mb ly l lz ma"># Non-Interactive Sign-In</span><span id="3529" class="lv lw iq lr b gy mb ly l lz ma">Restore-AzFunctionLocalSettingsJson -FunctionAppName &lt;function_app_name&gt; -FunctionAppResourceGroup &lt;function_app_resource_group&gt; -ServicePrincipalAppId &lt;service_principal_app_id&gt; -ServicePrincipalAppSecret &lt;service_principal_app_secret&gt; -AzureTenantId &lt;azure_tenant_id&gt; <br/>-NonInteractive</span></pre><p id="17c7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在使用MFA的交互式登录流时，我注意到的唯一稍微奇怪的功能是，Az CLI会引发稍微奇怪的错误——以下面的例子为例，其中的“警告”似乎是我实际上已经登录了。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mc"><img src="../Images/494df025f723325253e0f250fd9cea4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7rMTiUx6t7m5vRT2R5DQQw.png"/></div></div><figcaption class="md me gj gh gi mf mg bd b be z dk translated">任务警告成功</figcaption></figure><p id="b700" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然而，好消息是，这与代码本身的运行没有关系——对于那些不希望自己的日志被警告堵塞的人来说，这只是一个小小的烦恼！</p><p id="0620" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">希望你会发现这很有用(或者至少可以节省一点时间！)，祝你的Azure Functions之旅好运。</p><p id="c426" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"><em class="ln">*说实话，这主要是Azure CLI用PowerShell作为包装器来做所有的艰苦工作，所以请确保您的机器上有这个(您可以从这里的</em></strong><a class="ae mh" href="https://docs.microsoft.com/en-us/cli/azure/install-azure-cli?view=azure-cli-latest" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="ln"/></strong></a><strong class="kt ir"><em class="ln">下载)！</em> </strong></p></div></div>    
</body>
</html>