<html>
<head>
<title>Authenticate and Secure Next.js App Users with Auth0 and TypeScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Auth0和TypeScript验证和保护Next.js应用程序用户</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/secure-nextjs-app-users-with-auth0-and-typescript-3b0a6ac3a163?source=collection_archive---------3-----------------------#2020-01-17">https://levelup.gitconnected.com/secure-nextjs-app-users-with-auth0-and-typescript-3b0a6ac3a163?source=collection_archive---------3-----------------------#2020-01-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="627c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="ko">本文是一系列文章中的第一篇，这些文章旨在帮助前端开发人员使用我日常使用的工具构建应用程序，并取得了相当大的成功。</em></p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi kp"><img src="../Images/966a7ef4fb6a5e5c044ee4c052b89552.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t5CFOq45fU1qCmdgIksLnQ.jpeg"/></div></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">来自<a class="ae lf" href="https://www.pexels.com/" rel="noopener ugc nofollow" target="_blank">https://www.pexels.com/</a></figcaption></figure><p id="97e9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">作为构建web应用程序的前端工程师，您的应用程序可能需要通过对一些用户资源的认证访问来提供安全性。这通常以任何人都可以访问的登录页面和其他用户资源页面的形式出现，这些页面应该是安全的，只有经过身份验证的用户才能访问。</p><p id="9e20" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">auth 0(<a class="ae lf" href="https://auth0.com/" rel="noopener ugc nofollow" target="_blank">https://auth0.com/</a>)是领先的认证和授权服务之一。它支持B2C，B2B和B2E认证模式，所以你可以认证你的用户，无论他们来自哪里。</p><p id="ba32" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">next . js(<a class="ae lf" href="https://nextjs.org/" rel="noopener ugc nofollow" target="_blank">https://nextjs.org/</a>)是一个零配置、完全可扩展、生产就绪的React框架。它无缝处理SSR(服务器端渲染)应用程序，但也支持SSG(静态站点生成器)，这是我们在这一系列帖子中感兴趣的。</p><p id="563d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Auth0在Next网站上的例子主要集中在SSR应用上。所以我们将使用其中的一些，并为静态站点添加我们自己的自定义代码。</p><h1 id="aaa2" class="lg lh it bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">第一步。带有类型脚本的基本Next.js应用程序</h1><p id="01cb" class="pw-post-body-paragraph jq jr it js b jt me jv jw jx mf jz ka kb mg kd ke kf mh kh ki kj mi kl km kn im bi translated">让我们从一个简单的下一个应用开始。我们需要:</p><ul class=""><li id="4d08" class="mj mk it js b jt ju jx jy kb ml kf mm kj mn kn mo mp mq mr bi translated">创建文件夹</li><li id="e8c2" class="mj mk it js b jt ms jx mt kb mu kf mv kj mw kn mo mp mq mr bi translated">初始化我们的项目</li><li id="e32f" class="mj mk it js b jt ms jx mt kb mu kf mv kj mw kn mo mp mq mr bi translated">安装依赖项</li><li id="b514" class="mj mk it js b jt ms jx mt kb mu kf mv kj mw kn mo mp mq mr bi translated">创建一个<code class="fe mx my mz na b">src/pages</code>文件夹</li><li id="edf6" class="mj mk it js b jt ms jx mt kb mu kf mv kj mw kn mo mp mq mr bi translated">初始化TypeScript配置</li></ul><pre class="kq kr ks kt gt nb na nc nd aw ne bi"><span id="697b" class="nf lh it na b gy ng nh l ni nj">$ mkdir my-app<br/>$ cd my-app<br/>$ yarn init -y<br/>$ yarn add next react react-dom<br/>$ mkdir -p src/pages<br/>$ <!-- -->touch tsconfig.json</span></pre><p id="9542" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">向<code class="fe mx my mz na b">package.json</code>文件添加几个脚本:</p><pre class="kq kr ks kt gt nb na nc nd aw ne bi"><span id="b168" class="nf lh it na b gy ng nh l ni nj">{<br/>  "name": "my-app",<br/>  "version": "1.0.0",<br/>  "main": "index.js",<br/>  "license": "MIT",<br/>  <strong class="na iu">"scripts": {<br/>    "dev": "next",<br/>    "build": "next build",<br/>    "export": "next export"<br/>  },</strong><br/>  "dependencies": {<br/>    "next": "^9.1.7",<br/>    "react": "^16.12.0",<br/>    "react-dom": "^16.12.0"<br/>  }<br/>}</span></pre><p id="b9f5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">…和一个默认名称为<code class="fe mx my mz na b">index.tsx</code>的初始默认页面(使用TypeScript)</p><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="nk nl l"/></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">src/pages/index.tsx</figcaption></figure><p id="1915" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">一旦这些部分就绪，我们就可以安装TypeScript依赖项了:</p><pre class="kq kr ks kt gt nb na nc nd aw ne bi"><span id="8b43" class="nf lh it na b gy ng nh l ni nj">$ yarn add --dev <strong class="na iu">typescript @types/react @types/node</strong></span></pre><p id="663f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">并运行我们的应用程序:</p><pre class="kq kr ks kt gt nb na nc nd aw ne bi"><span id="9bd4" class="nf lh it na b gy ng nh l ni nj">$ yarn dev<br/>yarn run v1.21.1<br/>$ next<br/>[ wait ]  starting the development server ...<br/>[ info ]  waiting on <a class="ae lf" href="http://localhost:3000" rel="noopener ugc nofollow" target="_blank">http://localhost:3000</a> ...</span></pre><p id="e636" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">打开浏览器到<a class="ae lf" href="http://localhost:3000" rel="noopener ugc nofollow" target="_blank"> http://localhost:3000 </a>会给我们:</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi nm"><img src="../Images/327ed510a8ed9ebf351e29327a8687fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E2kDawUa2-nEUbZUWhEfVw.png"/></div></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">初始页面</figcaption></figure><p id="bd75" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在让我们添加第二页，这一页将被保护(最终)。</p><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="nk nl l"/></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">src/pages/dashboard.tsx</figcaption></figure><p id="dac2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们可以在<a class="ae lf" href="http://localhost:3000/dashboard" rel="noopener ugc nofollow" target="_blank">http://localhost:3000/dashboard</a>访问我们新创建的页面</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi nn"><img src="../Images/fd00d50f3aa445877d2236c111555725.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GEUL8en2-bEKhHGUkKJTog.png"/></div></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">仪表板(即将安装)</figcaption></figure><h1 id="1e2b" class="lg lh it bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">第二步。Auth0设置</h1><p id="f765" class="pw-post-body-paragraph jq jr it js b jt me jv jw jx mf jz ka kb mg kd ke kf mh kh ki kj mi kl km kn im bi translated">去<a class="ae lf" href="https://auth0.com" rel="noopener ugc nofollow" target="_blank">https://auth0.com</a>用邮箱和密码注册一个新账号，然后通过邮箱验证你的账号。</p><p id="bcc3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">创建一个应用并选择<strong class="js iu">单页Web应用</strong>。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi no"><img src="../Images/e303cd75a40715d7c99c40d600aaa2fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hXlHYwtT-rsqvsvfiecz1w.png"/></div></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">创建SPA</figcaption></figure><p id="a9ad" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">创建后，更改以下设置:</p><p id="670c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">允许的回调URL</strong>:<a class="ae lf" href="http://localhost:3000/callback" rel="noopener ugc nofollow" target="_blank">http://localhost:3000/Callback</a>auth 0进程将在成功和失败事件时重定向到此页面。</p><p id="6675" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">允许的Web来源</strong>:<a class="ae lf" href="http://localhost:3000" rel="noopener ugc nofollow" target="_blank">http://localhost:3000</a>允许Auth0只接受来自你的应用程序域的请求。</p><p id="c253" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">允许的注销URL</strong>:<a class="ae lf" href="http://localhost:3000" rel="noopener ugc nofollow" target="_blank">http://localhost:3000</a>一旦用户注销，Auth0会将他们重定向到此URL。</p><p id="317a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们还需要来自Auth0应用仪表板的以下信息:</p><ul class=""><li id="f040" class="mj mk it js b jt ju jx jy kb ml kf mm kj mn kn mo mp mq mr bi translated"><strong class="js iu">域</strong></li><li id="f8b9" class="mj mk it js b jt ms jx mt kb mu kf mv kj mw kn mo mp mq mr bi translated"><strong class="js iu">客户ID </strong></li></ul><h2 id="4e00" class="nf lh it bd li np nq dn lm nr ns dp lq kb nt nu lu kf nv nw ly kj nx ny mc nz bi translated">Auth0依赖关系</h2><p id="c4b2" class="pw-post-body-paragraph jq jr it js b jt me jv jw jx mf jz ka kb mg kd ke kf mh kh ki kj mi kl km kn im bi translated">通过以下方式安装Auth0 NPM依赖项:</p><pre class="kq kr ks kt gt nb na nc nd aw ne bi"><span id="dc6b" class="nf lh it na b gy ng nh l ni nj">$ yarn add <strong class="na iu">@auth0/auth0-spa-js</strong></span></pre><ul class=""><li id="824e" class="mj mk it js b jt ju jx jy kb ml kf mm kj mn kn mo mp mq mr bi translated">是Auth0的用于单页面应用的JavaScript SDK</li></ul><p id="7e99" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">作为Auth0文档的一部分，他们推荐React Hooks来更好地封装Auth0 SPA的功能，如:登录、注销、获取用户、检查是否通过身份验证等。</p><p id="53e1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我复制了相同的代码，并将其转换为TypeScript，支持Next.js页面类型和高阶函数(HOC ),以保护需要经过身份验证的用户的页面。</p><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="nk nl l"/></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">src/lib/auth0-spa.tsx</figcaption></figure><h1 id="b043" class="lg lh it bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">第三步。与Next集成</h1><p id="df03" class="pw-post-body-paragraph jq jr it js b jt me jv jw jx mf jz ka kb mg kd ke kf mh kh ki kj mi kl km kn im bi translated">在Next.js应用程序中集成Auth0助手钩子的一个好方法是在<code class="fe mx my mz na b">_app.tsx</code>文件中添加<code class="fe mx my mz na b">Auth0Provider</code>。</p><p id="265c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这个<code class="fe mx my mz na b">_app.tsx</code>文件是使用React上下文API的应用程序包装器。一个单独的组件，每次我们的应用程序被加载到浏览器中，它就被加载一次，并且包装所有的页面。有了这个，我们就可以在所有的应用程序页面和组件中使用<code class="fe mx my mz na b">useAuth0</code>钩子了。</p><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="nk nl l"/></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">src/pages/_app.tsx</figcaption></figure><p id="df22" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如您所见，所有页面组件现在都用<code class="fe mx my mz na b">Auth0Provider</code>包装，它在内部创建了一个Auth0 React上下文，其中包含大量有用的认证信息和函数。</p><p id="f4aa" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们还需要一个<code class="fe mx my mz na b">/callback</code>页面。这是一个我们在每次登录或注销尝试后都会被重定向到的页面。我们实际上不需要在其中放入任何内容。因为<code class="fe mx my mz na b">_app.tsx</code>上的App组件包装了所有页面，并且我们在该页面上包含了认证逻辑。</p><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="nk nl l"/></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">src/pages/callback.tsx</figcaption></figure><h1 id="8e5f" class="lg lh it bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">第四步。登录和注销</h1><p id="93d8" class="pw-post-body-paragraph jq jr it js b jt me jv jw jx mf jz ka kb mg kd ke kf mh kh ki kj mi kl km kn im bi translated">第一件事是使用Auth0登录和注销。</p><p id="e40d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在我们的索引页面上，我们将使用Auth0钩子并基于属性/函数来显示一个登录按钮或当前登录用户的名称和一个注销按钮。</p><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="nk nl l"/></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">src/pages/index.tsx</figcaption></figure><p id="4299" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这种行为当然可以封装在一个单独的组件中，比如导航条。</p><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="nk nl l"/></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">src/components/navigation bar . tsx</figcaption></figure><p id="0a75" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这样我们可以在任何页面上重用它。因此，让我们修改索引页面，使其具有一个<code class="fe mx my mz na b">NavigationBar</code></p><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="nk nl l"/></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">src/pages/index.tsx(使用导航栏)</figcaption></figure><p id="35bb" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们看看到目前为止身份验证是如何工作的:</p><pre class="kq kr ks kt gt nb na nc nd aw ne bi"><span id="3894" class="nf lh it na b gy ng nh l ni nj">$ yarn dev</span></pre><p id="7b33" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">并打开:<a class="ae lf" href="http://localhost:3000" rel="noopener ugc nofollow" target="_blank"> http://localhost:3000 </a></p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/76a5149e8cb8612e3382025b03fa48cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*KmN26O1x5ruAspJRo7NviA.gif"/></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">登录和注销</figcaption></figure><h1 id="242d" class="lg lh it bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">第五步。保护页面</h1><p id="b360" class="pw-post-body-paragraph jq jr it js b jt me jv jw jx mf jz ka kb mg kd ke kf mh kh ki kj mi kl km kn im bi translated">到目前为止，我们支持登录和退出。现在，我们需要支持其他用例，如获取用户信息和保护页面，以便未经身份验证的用户无法访问，迫使他们首先登录。</p><p id="3aa5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们创建一个从索引页面到仪表板页面的链接。一旦用户通过身份验证，他/她就可以转到控制面板。</p><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="nk nl l"/></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">src/pages/index.tsx(对仪表板的链接进行了身份验证)</figcaption></figure><p id="6345" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">仪表板页面通常用于管理用户的资源。因此，在大多数应用程序中，保护对它的访问是强制性的。</p><p id="1d4b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在，我们的仪表板页面将显示用户的照片。(我们还没有任何要管理的资源……)</p><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="nk nl l"/></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">src/page/dashboard . tsx</figcaption></figure><p id="61ff" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">有了这个仪表板页面和来自索引页面的链接，我们的应用程序身份验证开始有意义了。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/af8120bf073b5a15686059a71f48840d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*h9HAYLbORKER3aea9CkngQ.gif"/></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">登录、仪表板和退出。</figcaption></figure><p id="5778" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们还需要解决一个问题。如果我们有一个未经认证的用户进入我们的<code class="fe mx my mz na b">/dashboard</code>页面，他/她会看到这个。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi ob"><img src="../Images/fdec94de753fb554ea53b697dcf2210c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OMK1YVsNNKQGyAoUr-0krQ.png"/></div></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">未经身份验证的用户可以访问/仪表板页面</figcaption></figure><p id="5abc" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">为了限制这种访问，我们创建了一个名为<code class="fe mx my mz na b">requireUser</code>的高阶组件。为了保护一个页面，我们只需要用它来包装主要组件。</p><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="nk nl l"/></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">src/pages/dashboard.tsx(带有requireUser包装)</figcaption></figure><p id="0b34" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果用户试图访问用<code class="fe mx my mz na b">requireUser</code>保护的页面，它将被重定向到Auth0上的登录页面，如果注册成功，则被重定向回同一页面。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/d8bb327df30fae53178464f69ebe315e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*r95vBajIp1SkvVbjaJhOxw.gif"/></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">仪表板是安全的！</figcaption></figure><h1 id="b05e" class="lg lh it bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">结论</h1><ul class=""><li id="6ca7" class="mj mk it js b jt me jx mf kb oc kf od kj oe kn mo mp mq mr bi translated">Auth0是一个有效、简单、功能全面的身份验证/授权提供程序。</li><li id="5724" class="mj mk it js b jt ms jx mt kb mu kf mv kj mw kn mo mp mq mr bi translated">Next拥有对TypeScript的一流支持，并改进了Auth0库和钩子集成。</li><li id="5363" class="mj mk it js b jt ms jx mt kb mu kf mv kj mw kn mo mp mq mr bi translated">任何页面上的任何组件都可以通过<code class="fe mx my mz na b">useAuth0</code>钩子访问认证信息。</li><li id="4e82" class="mj mk it js b jt ms jx mt kb mu kf mv kj mw kn mo mp mq mr bi translated">使用<code class="fe mx my mz na b">requireUser</code> HOC来保护所有需要认证用户的页面。</li><li id="e4b5" class="mj mk it js b jt ms jx mt kb mu kf mv kj mw kn mo mp mq mr bi translated">在这篇文章中，我们没有涉及授权。还有很多Auth0认证API你可能想检查:<a class="ae lf" href="https://auth0.com/docs/api/authentication" rel="noopener ugc nofollow" target="_blank">https://auth0.com/docs/api/authentication</a></li><li id="4c90" class="mj mk it js b jt ms jx mt kb mu kf mv kj mw kn mo mp mq mr bi translated">使用这篇文章的代码作为从<a class="ae lf" href="https://github.com/outsrc/my-app" rel="noopener ugc nofollow" target="_blank">https://github.com/outsrc/my-app</a>开始的模板</li><li id="95f7" class="mj mk it js b jt ms jx mt kb mu kf mv kj mw kn mo mp mq mr bi translated">该代码还包括几个脚本<code class="fe mx my mz na b">build</code>和<code class="fe mx my mz na b">export</code>，允许您将该应用程序呈现为SSG(静态站点生成)。</li></ul></div></div>    
</body>
</html>