<html>
<head>
<title>Arbitrage and Graph Theory</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">套利和图论</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/arbitrage-and-graph-theory-ecd26391908b?source=collection_archive---------9-----------------------#2021-01-28">https://levelup.gitconnected.com/arbitrage-and-graph-theory-ecd26391908b?source=collection_archive---------9-----------------------#2021-01-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/abe04032d2cead55cba4ef36839c3c51.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Rvt1KRHX5kKlVEAt"/></div></div></figure><div class=""/></div><div class="ab cl kb kc hx kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="im in io ip iq"><p id="aa0d" class="pw-post-body-paragraph ki kj je kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf im bi translated">图论在各行各业的面试官中非常受欢迎。这里有一个在金融科技公司Jane Street问的关于图论的面试问题。</p><p id="c1b0" class="pw-post-body-paragraph ki kj je kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf im bi translated"><em class="lg">随意看看我们前面的一些</em><a class="ae lh" href="https://cppcodingzen.com/?p=2059" rel="noopener ugc nofollow" target="_blank"><em class="lg"/></a><em class="lg"/><a class="ae lh" href="https://cppcodingzen.com/?p=936" rel="noopener ugc nofollow" target="_blank"><em class="lg">图</em> </a> <em class="lg"> </em> <a class="ae lh" href="https://cppcodingzen.com/?p=143" rel="noopener ugc nofollow" target="_blank"> <em class="lg">论</em> </a> <em class="lg">的问题及其解决方法。</em></p></div><div class="ab cl kb kc hx kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="im in io ip iq"><h1 id="a5c8" class="li lj je bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">问题</h1><p id="8b0a" class="pw-post-body-paragraph ki kj je kk b kl mg kn ko kp mh kr ks kt mi kv kw kx mj kz la lb mk ld le lf im bi translated">假设您有一个货币兑换率表，用2D数组表示。确定是否存在可能的套利:也就是说，你是否可以进行某种顺序的交易，从任何货币的某个金额A开始，这样你就可以以某个大于该货币的A的金额结束交易。</p><p id="6635" class="pw-post-body-paragraph ki kj je kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf im bi translated">没有交易成本，你可以交易少量。</p><h1 id="671f" class="li lj je bd lk ll ml ln lo lp mm lr ls lt mn lv lw lx mo lz ma mb mp md me mf bi translated">解决办法</h1><p id="6d82" class="pw-post-body-paragraph ki kj je kk b kl mg kn ko kp mh kr ks kt mi kv kw kx mj kz la lb mk ld le lf im bi translated">你应该经常问的第一个问题是，“我对这个问题的理解是否足以解决它？”。几乎在所有情况下，通过一个例子来解决问题比什么都清楚。</p><p id="7121" class="pw-post-body-paragraph ki kj je kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf im bi translated"><em class="lg">原问题是否包含实例？你了解他们吗？在这种情况下，它不会！这意味着你必须拿出一个例子，并通过它来工作。下面是一个包含三种货币的简单示例，<strong class="kk jf"> A、B、</strong>和<strong class="kk jf"> C、</strong></em></p><figure class="mr ms mt mu gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mq"><img src="../Images/734d3afc93b7995317551a49d40dc2d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DJAHSqpCg6HnqtLjAk1cvQ.png"/></div></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated">A、B和C之间的货币换算表</figcaption></figure><p id="4762" class="pw-post-body-paragraph ki kj je kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf im bi translated">能够解释和阅读例子也很重要；并且能够克服它。下面是我们如何阅读上表:一个单位的货币<strong class="kk jf"> A </strong>可以兑换2个单位的货币<strong class="kk jf">b</strong>和一个单位的货币<strong class="kk jf"> C </strong>可以兑换0.2个单位的货币<strong class="kk jf">A</strong>有了这个表，很容易建立套利:</p><ul class=""><li id="97f3" class="mz na je kk b kl km kp kq kt nb kx nc lb nd lf ne nf ng nh bi translated"><strong class="kk jf">A</strong>—&gt;1台<strong class="kk jf">B</strong>2台</li><li id="d02a" class="mz na je kk b kl ni kp nj kt nk kx nl lb nm lf ne nf ng nh bi translated">2台<strong class="kk jf">B</strong>–&gt;2 * 3 = 6台<strong class="kk jf"> C </strong></li><li id="387e" class="mz na je kk b kl ni kp nj kt nk kx nl lb nm lf ne nf ng nh bi translated">6个单位的<strong class="kk jf">C</strong>–&gt;6 * 0.2 = 1.2个单位的<strong class="kk jf"> A </strong></li></ul><p id="0cba" class="pw-post-body-paragraph ki kj je kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf im bi translated">因此，我们可以从一个单位的A开始，通过两次交易(A-B交易所和B-C交易所)，最终可以得到1.2个单位——增加了0.2个单位！</p><p id="58d4" class="pw-post-body-paragraph ki kj je kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf im bi translated">作为一个旁注，请记住，真正的货币永远不会出现像标准货币交易所这样的套利机会。这是美元、欧元和日元之间的货币兑换表</p><figure class="mr ms mt mu gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mq"><img src="../Images/bd1d3812b65d9b119c6add23e53f78a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EQEQhCZJdANNrxy_WO_NnA.png"/></div></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated">实际货币之间的货币转换</figcaption></figure><p id="652b" class="pw-post-body-paragraph ki kj je kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf im bi translated">让我们仔细看看第一个例子。<em class="lg">为什么会有套利，如何发现？</em>一个关键的观察是将货币对表示为图形的边，汇率作为边的权重。因此，我们的图将包含一条权重为<code class="fe nn no np nq b">2.0</code>的边<code class="fe nn no np nq b">A --&gt; B</code>。考虑一下<code class="fe nn no np nq b">A --&gt; B --&gt; C --&gt; A</code>的周期。这个循环的边上的权重分别为<code class="fe nn no np nq b">(2.0, 3.0, 0.2)</code>。<strong class="kk jf"> <em class="lg">权重的乘积因此是1.2——大于1。</em> </strong>因此，</p><blockquote class="nr ns nt"><p id="e3f1" class="ki kj lg kk b kl km kn ko kp kq kr ks nu ku kv kw nv ky kz la nw lc ld le lf im bi translated"><em class="je">如果相应的图有一个具有“高权重属性”的循环(循环边的乘积大于1.0)，则货币兑换表包含一个套利机会。</em></p></blockquote><p id="8b3a" class="pw-post-body-paragraph ki kj je kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf im bi translated">可以通过简单的递归深度优先搜索(DFS)算法找到高权重循环，如下所示:</p><ul class=""><li id="72b1" class="mz na je kk b kl km kp kq kt nb kx nc lb nd lf ne nf ng nh bi translated">跟踪所探索的边的权重的当前乘积。</li><li id="ab23" class="mz na je kk b kl ni kp nj kt nk kx nl lb nm lf ne nf ng nh bi translated">还要保存两个不同的哈希表:</li><li id="fc8a" class="mz na je kk b kl ni kp nj kt nk kx nl lb nm lf ne nf ng nh bi translated"><code class="fe nn no np nq b">visited</code>表示包含给定货币的循环不具有高权重性质。</li><li id="6bca" class="mz na je kk b kl ni kp nj kt nk kx nl lb nm lf ne nf ng nh bi translated"><code class="fe nn no np nq b">in_process</code>表示包含给定货币的周期正在探索中。它们中的一个也可能具有期望的高权重属性！</li><li id="916f" class="mz na je kk b kl ni kp nj kt nk kx nl lb nm lf ne nf ng nh bi translated">每当我们访问<code class="fe nn no np nq b">in_process</code>表中的货币时，当<code class="fe nn no np nq b">weight</code>大于1时，我们就找到了期望的周期，从而找到了套利机会！</li></ul><p id="67bf" class="pw-post-body-paragraph ki kj je kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf im bi translated">下面是上述DFS算法在C++中的实现:</p><figure class="mr ms mt mu gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nx"><img src="../Images/f2e8c35b4ee7bd3d2d7604edec053593.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_lGFP68a-A4n7nNn3VZIIA.png"/></div></div></figure><h1 id="ca89" class="li lj je bd lk ll ml ln lo lp mm lr ls lt mn lv lw lx mo lz ma mb mp md me mf bi translated">复杂性</h1><p id="5e97" class="pw-post-body-paragraph ki kj je kk b kl mg kn ko kp mh kr ks kt mi kv kw kx mj kz la lb mk ld le lf im bi translated">标准DFS算法的复杂度是O(E + V)，其中E是图的边数，V是图的顶点数。对于N种货币，V = N，E = N。因此，算法的复杂度为O(N)。</p><p id="43f2" class="pw-post-body-paragraph ki kj je kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf im bi translated">我们也可以通过直接分析上面的代码来计算复杂度。在这段代码中，</p><ul class=""><li id="1e4f" class="mz na je kk b kl km kp kq kt nb kx nc lb nd lf ne nf ng nh bi translated">我们在<code class="fe nn no np nq b">visited</code>数组中插入一个<code class="fe nn no np nq b">currency_id</code>正好一次。(对那个<code class="fe nn no np nq b">currency_id</code>的所有其他引用在<code class="fe nn no np nq b">visited</code>数组中查找，并在常数时间内返回)。</li><li id="37c0" class="mz na je kk b kl ni kp nj kt nk kx nl lb nm lf ne nf ng nh bi translated"><code class="fe nn no np nq b">visited</code>中的每次插入都执行O(N)工作，遍历所有其他货币。</li></ul><p id="8b8e" class="pw-post-body-paragraph ki kj je kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf im bi translated">因此，总时间复杂度为O(N) * O(N) = O(N)。</p><h1 id="2740" class="li lj je bd lk ll ml ln lo lp mm lr ls lt mn lv lw lx mo lz ma mb mp md me mf bi translated">测试</h1><p id="4977" class="pw-post-body-paragraph ki kj je kk b kl mg kn ko kp mh kr ks kt mi kv kw kx mj kz la lb mk ld le lf im bi translated">让我们写几个测试测试零，一和两种货币。我们也来测试一下上面的两个例子。</p><figure class="mr ms mt mu gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mq"><img src="../Images/0eb85d7ef92337e785f97edad19e72e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*95ODjuKAzJFWuTE9bowk3w.png"/></div></div></figure></div><div class="ab cl kb kc hx kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="im in io ip iq"><p id="c59e" class="pw-post-body-paragraph ki kj je kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf im bi translated">【https://cppcodingzen.com】原载于2021年1月28日<a class="ae lh" href="https://cppcodingzen.com/?p=2333" rel="noopener ugc nofollow" target="_blank"><em class="lg"/></a><em class="lg">。</em></p></div></div>    
</body>
</html>