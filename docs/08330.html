<html>
<head>
<title>CDNs — A Deep Dive</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">CDNs——深度探索</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/cdns-a-deep-dive-1f1de5853386?source=collection_archive---------13-----------------------#2021-04-21">https://levelup.gitconnected.com/cdns-a-deep-dive-1f1de5853386?source=collection_archive---------13-----------------------#2021-04-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="467a" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">你以前用过它们，但你不完全确定它们是什么，这里有一些答案。</h2></div><p id="9edb" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">欢迎来到第一期的<strong class="kh ir"> D </strong> eep <strong class="kh ir"> D </strong> ives，在这里我们通过简单的解释获得关于一个话题的深入知识。</p><h2 id="24eb" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated"><a class="ae lu" href="https://jportella93.medium.com/dd-deep-dives-adb717e0709e" rel="noopener">🔛</a> <a class="ae lu" rel="noopener ugc nofollow" target="_blank" href="/using-svgs-on-the-web-a-deep-dive-d3de6b0cc5d5">⏩</a></h2><figure class="lw lx ly lz gt ma gh gi paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="gh gi lv"><img src="../Images/c5701b66aa8f91d934d0ed4a6551ff0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*a6-tH4GCnJQ3SlV0"/></div></div><figcaption class="mh mi gj gh gi mj mk bd b be z dk translated">单一服务器与内容交付网络(CDN)的对比</figcaption></figure><h1 id="9fc9" class="ml lc iq bd ld mm mn mo lg mp mq mr lj jw ms jx lm jz mt ka lp kc mu kd ls mv bi translated">什么是CDN？</h1><p id="0e07" class="pw-post-body-paragraph kf kg iq kh b ki mw jr kk kl mx ju kn ko my kq kr ks mz ku kv kw na ky kz la ij bi translated">一个<strong class="kh ir">内容分发</strong>(或交付)<strong class="kh ir">网络</strong> ( <strong class="kh ir"> CDN </strong>)是一组地理上分布的服务器，目的是提供互联网内容的快速交付。</p><p id="b813" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">CDN的服务器充当你的原始服务器的反向代理<a class="ae lu" href="https://jportella93.medium.com/1-minute-to-become-a-better-developer-17-75fd019f407c" rel="noopener">,在那里内容被托管。</a></p><p id="9d51" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">服务器包含在分布在全球的被称为<strong class="kh ir">存在点</strong> ( <strong class="kh ir"> PoP </strong>)的设施中。</p><h1 id="4d58" class="ml lc iq bd ld mm mn mo lg mp mq mr lj jw ms jx lm jz mt ka lp kc mu kd ls mv bi translated">CDN是如何工作的？</h1><p id="b3da" class="pw-post-body-paragraph kf kg iq kh b ki mw jr kk kl mx ju kn ko my kq kr ks mz ku kv kw na ky kz la ij bi translated">CDN中的服务器可以帮助提供更好的用户体验，方法是在离用户更近的地方缓存内容，而不是在原始服务器上交付。</p><p id="6503" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这减少了<strong class="kh ir">往返时间(RTT) </strong>，即浏览器发送请求和从服务器接收响应所需的毫秒数。</p><figure class="lw lx ly lz gt ma gh gi paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="gh gi nb"><img src="../Images/cb3aae687552e5a25992fe31c0d54217.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*SFYbhIQXyKNYJDSx"/></div></div><figcaption class="mh mi gj gh gi mj mk bd b be z dk translated"><a class="ae lu" href="https://www.imperva.com/learn/performance/what-is-cdn-how-it-works/" rel="noopener ugc nofollow" target="_blank"> Imperva </a>无CDN vs有CDN</figcaption></figure><h2 id="a6b2" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated"><strong class="ak">不带CDN </strong></h2><ol class=""><li id="b726" class="nc nd iq kh b ki mw kl mx ko ne ks nf kw ng la nh ni nj nk bi translated">西班牙巴塞罗纳的用户打开她的浏览器，导航到<a class="ae lu" href="http://example.com/" rel="noopener ugc nofollow" target="_blank">http://example.com/</a>。浏览器发出HTTP请求<code class="fe nl nm nn no b">GET http://example.com/index.html</code></li><li id="0530" class="nc nd iq kh b ki np kl nq ko nr ks ns kw nt la nh ni nj nk bi translated">该网站由位于美国波士顿的服务器托管，因此请求必须穿越大西洋，由原始服务器处理。然后，服务器的响应必须返回到巴塞罗那。</li><li id="4d96" class="nc nd iq kh b ki np kl nq ko nr ks ns kw nt la nh ni nj nk bi translated">这导致<strong class="kh ir">高RTT </strong>和<strong class="kh ir">次优UX </strong>。</li></ol><h2 id="89e5" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated"><strong class="ak">带CDN </strong></h2><ol class=""><li id="20a5" class="nc nd iq kh b ki mw kl mx ko ne ks nf kw ng la nh ni nj nk bi translated">西班牙巴塞罗纳的用户打开她的浏览器，导航到<a class="ae lu" href="http://example.com/" rel="noopener ugc nofollow" target="_blank">http://example.com/</a>。浏览器发出HTTP请求<code class="fe nl nm nn no b">GET <a class="ae lu" href="http://example.com/index.html" rel="noopener ugc nofollow" target="_blank">http://example.com/index.html</a></code></li><li id="16da" class="nc nd iq kh b ki np kl nq ko nr ks ns kw nt la nh ni nj nk bi translated">当用户请求资产时，DNS会将请求路由到性能最佳的PoP位置，该位置通常是地理上离客户端最近的位置。</li></ol><p id="16b7" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此时，有两种可能的结果:</p><ul class=""><li id="5f52" class="nc nd iq kh b ki kj kl km ko nu ks nv kw nw la nx ni nj nk bi translated"><strong class="kh ir">资产可用:</strong>所请求资产的非陈旧副本存在于PoP的缓存服务器中，因此资产被直接发送回用户，从而产生了更短的<strong class="kh ir">RTT</strong>，因此有了更好的UX。</li><li id="c0ed" class="nc nd iq kh b ki np kl nq ko nr ks ns kw nt la nx ni nj nk bi translated"><strong class="kh ir">资产不可用</strong>:PoP的服务器将请求重新路由到原始服务器，原始服务器发回资产的新版本。PoP的服务器缓存该资产并将其发送回用户。这一次RTT更长，但是对该区域中该资产的后续请求将更快，因为该资产现在在PoP的缓存服务器中是可用的。</li></ul><p id="acba" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">资产一直缓存在PoP的缓存服务器上，直到其HTTP头指定的<strong class="kh ir">生存时间(TTL) </strong>到期。</p><h1 id="4825" class="ml lc iq bd ld mm mn mo lg mp mq mr lj jw ms jx lm jz mt ka lp kc mu kd ls mv bi translated">使用CDN的利弊？</h1><p id="769b" class="pw-post-body-paragraph kf kg iq kh b ki mw jr kk kl mx ju kn ko my kq kr ks mz ku kv kw na ky kz la ij bi translated">最明显的好处是<strong class="kh ir">更好的UX </strong>，这是由于在用户附近使用缓存内容带来的<strong class="kh ir">更快的RTT </strong>。</p><p id="ff0a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">除此之外，使用CDN可以增加网站的正常运行时间。想象一下流量过载或硬件故障使您的原始服务器瘫痪。在分布式CDN的服务器上缓存内容可以防止终端用户的服务中断。此外，由于内容在CDN的服务器中是冗余的，所以一个PoP中的故障可以由另一个PoP中的内容来保存。</p><p id="9210" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">另一个好处是，通过提供缓存的内容，源服务器上的带宽成本降低了。然而，CDN提供商可能会收取大量的费用，使这种好处变得微不足道，所以对这一点<em class="ny">要有所保留</em>！</p><p id="7129" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，值得注意的是，一些CDN提供商通过利用反向代理配置，正在转向其他服务。一些使用CDNs分布式配置来提供针对 <strong class="kh ir">分布式拒绝服务</strong> <strong class="kh ir"> (DDOS)攻击</strong>的<strong class="kh ir">保护。此外，他们可能会实现负载平衡器，以避免大量流量使源服务器过载。</strong></p><h1 id="265f" class="ml lc iq bd ld mm mn mo lg mp mq mr lj jw ms jx lm jz mt ka lp kc mu kd ls mv bi translated">存在哪些类型的cdn？</h1><p id="fdec" class="pw-post-body-paragraph kf kg iq kh b ki mw jr kk kl mx ju kn ko my kq kr ks mz ku kv kw na ky kz la ij bi translated">在撰写本文时，CDN有6种主要类型:</p><ul class=""><li id="aac4" class="nc nd iq kh b ki kj kl km ko nu ks nv kw nw la nx ni nj nk bi translated">免费的cdn，它的任务是服务开源包。例如jsDelivr。</li><li id="2b6b" class="nc nd iq kh b ki np kl nq ko nr ks ns kw nt la nx ni nj nk bi translated"><strong class="kh ir">商业</strong>cdn，以一定的成本向公众提供服务。例如云闪。</li><li id="cb6b" class="nc nd iq kh b ki np kl nq ko nr ks ns kw nt la nx ni nj nk bi translated">内部CDN，由那些商业模式使得商业CDN选项得不偿失的公司推出，因此他们推出了自己的私有CDN。例如网飞。</li><li id="935c" class="nc nd iq kh b ki np kl nq ko nr ks ns kw nt la nx ni nj nk bi translated"><strong class="kh ir">Telco</strong>cdn，由电信服务提供商(tsp)推出，目的是在不租赁商业cdn的情况下提供自己的流媒体内容。它们类似于软管内cdn。例如威瑞森。</li><li id="65f9" class="nc nd iq kh b ki np kl nq ko nr ks ns kw nt la nx ni nj nk bi translated"><strong class="kh ir">Peer to Peer</strong>(P2P)cdn，用于在应用程序中拥有同等特权的个人或同行之间共享资产。例如BitTorrent。</li><li id="5af1" class="nc nd iq kh b ki np kl nq ko nr ks ns kw nt la nx ni nj nk bi translated"><strong class="kh ir">多</strong>cdn，借力其他几个cdn的力量。例如MetaCDN。</li></ul><h1 id="d183" class="ml lc iq bd ld mm mn mo lg mp mq mr lj jw ms jx lm jz mt ka lp kc mu kd ls mv bi translated">为什么cdn在虚拟主机中不会默认出现？</h1><p id="f7ce" class="pw-post-body-paragraph kf kg iq kh b ki mw jr kk kl mx ju kn ko my kq kr ks mz ku kv kw na ky kz la ij bi translated">当cdn在90年代末开始出现时，它们非常昂贵，所以不是所有的组织都买得起。</p><p id="22ef" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如今，成本的降低使得CDN成为一个更容易获得的选择，许多主机提供商实际上提供CDN服务作为复选框附加服务。</p><h1 id="9b18" class="ml lc iq bd ld mm mn mo lg mp mq mr lj jw ms jx lm jz mt ka lp kc mu kd ls mv bi translated">感谢阅读！</h1><p id="8d2f" class="pw-post-body-paragraph kf kg iq kh b ki mw jr kk kl mx ju kn ko my kq kr ks mz ku kv kw na ky kz la ij bi translated">希望你觉得有趣。如果你想了解更多，你可以在下一节找到我用来研究这个主题的资源。Imperva的真的很好解释。</p><p id="392e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">继续学习，祝你有美好的一天！</p><p id="9932" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">乔恩·波特拉</p></div><div class="ab cl nz oa hu ob" role="separator"><span class="oc bw bk od oe of"/><span class="oc bw bk od oe of"/><span class="oc bw bk od oe"/></div><div class="ij ik il im in"><h1 id="1201" class="ml lc iq bd ld mm og mo lg mp oh mr lj jw oi jx lm jz oj ka lp kc ok kd ls mv bi translated">资源</h1><p id="35b6" class="pw-post-body-paragraph kf kg iq kh b ki mw jr kk kl mx ju kn ko my kq kr ks mz ku kv kw na ky kz la ij bi translated"><a class="ae lu" href="https://en.wikipedia.org/wiki/Content_delivery_network" rel="noopener ugc nofollow" target="_blank">内容交付网络—维基百科</a></p><p id="e2b1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae lu" href="https://www.cloudflare.com/learning/cdn/what-is-a-cdn/" rel="noopener ugc nofollow" target="_blank">什么是CDN？| cdn是如何工作的？—云耀斑</a></p><p id="da16" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae lu" href="https://docs.microsoft.com/en-us/azure/cdn/cdn-overview" rel="noopener ugc nofollow" target="_blank">什么是内容分发网络(CDN)？—天蓝色</a></p><p id="9f2b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae lu" href="https://www.imperva.com/learn/performance/what-is-cdn-how-it-works/" rel="noopener ugc nofollow" target="_blank">什么是CDN？CDN是如何工作的？— Imperva </a></p><p id="1a49" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae lu" href="https://www.imperva.com/learn/performance/cdn-architecture" rel="noopener ugc nofollow" target="_blank"> CDN基础设施架构和拓扑——imper va</a></p><p id="f5f9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae lu" href="https://www.keycdn.com/support/what-is-a-multi-cdn" rel="noopener ugc nofollow" target="_blank">什么是多CDN？—key dn</a></p><h2 id="4e8a" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">如果你喜欢这篇文章，你可能也会喜欢</h2><div class="ol om gp gr on oo"><a href="https://jportella93.medium.com/1-minute-to-become-a-better-developer-17-75fd019f407c" rel="noopener follow" target="_blank"><div class="op ab fo"><div class="oq ab or cl cj os"><h2 class="bd ir gy z fp ot fr fs ou fu fw ip bi translated">代理——一个温和的介绍</h2><div class="ov l"><h3 class="bd b gy z fp ot fr fs ou fu fw dk translated">一分钟内了解正向和反向代理。</h3></div><div class="ow l"><p class="bd b dl z fp ot fr fs ou fu fw dk translated">jportella93.medium.com</p></div></div><div class="ox l"><div class="oy l oz pa pb ox pc mf oo"/></div></div></a></div><h2 id="481b" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated"><a class="ae lu" href="https://jportella93.medium.com/dd-deep-dives-adb717e0709e" rel="noopener">T19】🔛 </a> <a class="ae lu" rel="noopener ugc nofollow" target="_blank" href="/using-svgs-on-the-web-a-deep-dive-d3de6b0cc5d5"> <strong class="ak">⏩</strong>T25】</a></h2></div></div>    
</body>
</html>