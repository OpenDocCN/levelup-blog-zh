<html>
<head>
<title>10 Useful Tips for Data Scientists</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">数据科学家的10个有用提示</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/10-useful-tips-for-data-scientists-1b5762285086?source=collection_archive---------15-----------------------#2021-05-11">https://levelup.gitconnected.com/10-useful-tips-for-data-scientists-1b5762285086?source=collection_archive---------15-----------------------#2021-05-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="38f6" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">面向数据科学家的Python和R技巧和窍门</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/f5a77480aa4e9673e0dcbbe901a528e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*OQM6GdesKWoUSRLb"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://images.unsplash.com/photo-1471922694854-ff1b63b20054?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&amp;ixlib=rb-1.2.1&amp;auto=format&amp;fit=crop&amp;w=2252&amp;q=80" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的图像</figcaption></figure><p id="1aee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们已经开始为数据科学家撰写一系列关于技巧和诀窍的文章(主要在<strong class="lb iu"> Python </strong>和<strong class="lb iu"> R </strong>)。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="ca72" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">数据科学家过去的技巧和诀窍</h1><p id="a66d" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">如果你错过了:</p><p id="d2e2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">第一卷:</strong></p><div class="mz na gp gr nb nc"><a href="https://betterprogramming.pub/10tips-and-tricks-for-data-scientists-vol-1-a870455325da" rel="noopener  ugc nofollow" target="_blank"><div class="nd ab fo"><div class="ne ab nf cl cj ng"><h2 class="bd iu gy z fp nh fr fs ni fu fw is bi translated">数据科学家的10个技巧和诀窍</h2><div class="nj l"><h3 class="bd b gy z fp nh fr fs ni fu fw dk translated">R和Python中有用的代码片段</h3></div><div class="nk l"><p class="bd b dl z fp nh fr fs ni fu fw dk translated">better编程. pub</p></div></div><div class="nl l"><div class="nm l nn no np nl nq ks nc"/></div></div></a></div><p id="10c2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">第二卷:</strong></p><div class="mz na gp gr nb nc"><a href="https://betterprogramming.pub/10-tips-and-tricks-for-data-scientists-vol-2-5640ccd1aa5e" rel="noopener  ugc nofollow" target="_blank"><div class="nd ab fo"><div class="ne ab nf cl cj ng"><h2 class="bd iu gy z fp nh fr fs ni fu fw is bi translated">数据科学家的10个惊人技巧和诀窍</h2><div class="nj l"><h3 class="bd b gy z fp nh fr fs ni fu fw dk translated">一些更有用的R和Python代码片段</h3></div><div class="nk l"><p class="bd b dl z fp nh fr fs ni fu fw dk translated">better编程. pub</p></div></div><div class="nl l"><div class="nr l nn no np nl nq ks nc"/></div></div></a></div><p id="f7f4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">第三卷:</strong></p><div class="mz na gp gr nb nc"><a href="https://betterprogramming.pub/10-tips-and-tricks-for-data-scientists-part-3-52ffbddcba26" rel="noopener  ugc nofollow" target="_blank"><div class="nd ab fo"><div class="ne ab nf cl cj ng"><h2 class="bd iu gy z fp nh fr fs ni fu fw is bi translated">数据科学家会喜欢的10个真实世界的提示和技巧</h2><div class="nj l"><h3 class="bd b gy z fp nh fr fs ni fu fw dk translated">Python、R等语言中一些更有用的代码片段</h3></div><div class="nk l"><p class="bd b dl z fp nh fr fs ni fu fw dk translated">better编程. pub</p></div></div><div class="nl l"><div class="ns l nn no np nl nq ks nc"/></div></div></a></div><p id="1cfc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">第四卷:</strong></p><div class="mz na gp gr nb nc"><a href="https://betterprogramming.pub/10-tips-and-tricks-for-data-scientists-vol-4-76b0b732a94f" rel="noopener  ugc nofollow" target="_blank"><div class="nd ab fo"><div class="ne ab nf cl cj ng"><h2 class="bd iu gy z fp nh fr fs ni fu fw is bi translated">数据科学家的10个Python和R技巧</h2><div class="nj l"><h3 class="bd b gy z fp nh fr fs ni fu fw dk translated">在Pandas中输入缺失值，用mode替换分类变量，等等</h3></div><div class="nk l"><p class="bd b dl z fp nh fr fs ni fu fw dk translated">better编程. pub</p></div></div><div class="nl l"><div class="nt l nn no np nl nq ks nc"/></div></div></a></div><p id="7c43" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">第五卷:</strong></p><div class="mz na gp gr nb nc"><a href="https://betterprogramming.pub/10-tips-and-tricks-for-data-scientists-vol-5-ef86aea08b6c" rel="noopener  ugc nofollow" target="_blank"><div class="nd ab fo"><div class="ne ab nf cl cj ng"><h2 class="bd iu gy z fp nh fr fs ni fu fw is bi translated">数据科学家的10个更多提示和技巧(第5卷)</h2><div class="nj l"><h3 class="bd b gy z fp nh fr fs ni fu fw dk translated">对日常任务有用的代码片段</h3></div><div class="nk l"><p class="bd b dl z fp nh fr fs ni fu fw dk translated">better编程. pub</p></div></div><div class="nl l"><div class="nu l nn no np nl nq ks nc"/></div></div></a></div><p id="f299" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">第六卷:</strong></p><div class="mz na gp gr nb nc"><a href="https://betterprogramming.pub/5-powerful-python-and-r-tricks-for-data-scientists-e35dd9050750" rel="noopener  ugc nofollow" target="_blank"><div class="nd ab fo"><div class="ne ab nf cl cj ng"><h2 class="bd iu gy z fp nh fr fs ni fu fw is bi translated">数据科学家的5个强大的Python和R技巧</h2><div class="nj l"><h3 class="bd b gy z fp nh fr fs ni fu fw dk translated">R和Python中有用的代码片段</h3></div><div class="nk l"><p class="bd b dl z fp nh fr fs ni fu fw dk translated">better编程. pub</p></div></div><div class="nl l"><div class="nv l nn no np nl nq ks nc"/></div></div></a></div></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="1a29" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">计算机编程语言</h1><h2 id="8ccf" class="nw md it bd me nx ny dn mi nz oa dp mm li ob oc mo lm od oe mq lq of og ms oh bi translated">1.Numpy数组和Python列表的区别</h2><p id="8dc8" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">Numpy数组和Python列表之间有一些区别。我们将提供一些代数运算符的例子。</p><p id="376b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> '+'运算符</strong></p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="57c9" class="nw md it oj b gy on oo l op oq">import numpy as np<br/> <br/>alist = [1, 2, 3, 4, 5]   # Define a python list. It looks like an np array<br/>narray = np.array([1, 2, 3, 4]) # Define a numpy array<br/> <br/>print(narray + narray)<br/>print(alist + alist)</span></pre><p id="10ce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">输出:</strong></p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="b0ba" class="nw md it oj b gy on oo l op oq">[2 4 6 8]<br/>[1, 2, 3, 4, 5, 1, 2, 3, 4, 5]</span></pre><p id="d7c0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注意，NumPy数组上的<strong class="lb iu"> '+' </strong>操作符执行元素相加，而Python列表上的相同操作会导致列表串联。编码时要小心。知道这一点可以省去很多头疼的事。</p><p id="822b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> '* '运算符</strong></p><p id="729f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">与产品操作员<code class="fe or os ot oj b">*</code>相同。在第一种情况下，我们缩放向量，而在第二种情况下，我们连接三次相同的列表。</p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="6ddc" class="nw md it oj b gy on oo l op oq">print(narray * 3) <br/>print(alist * 3)</span></pre><p id="1686" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">输出:</strong></p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="84ef" class="nw md it oj b gy on oo l op oq">[ 3 6 9 12] <br/>[1, 2, 3, 4, 5, 1, 2, 3, 4, 5, 1, 2, 3, 4, 5]</span></pre><h2 id="8bfe" class="nw md it bd me nx ny dn mi nz oa dp mm li ob oc mo lm od oe mq lq of og ms oh bi translated">2.numpy数组之间的点积</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ou"><img src="../Images/8cb30f96244e4e8531708e75b07d70cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1Z7LQa4HyARdMTnh69Ne_Q.png"/></div></div></figure><p id="62a8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">点积接受两个向量并返回一个数字。</p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="2316" class="nw md it oj b gy on oo l op oq">nparray1 = np.array([0, 1, 2, 3]) # Define an array<br/>nparray2 = np.array([4, 5, 6, 7]) # Define an array</span><span id="97c4" class="nw md it oj b gy ov oo l op oq">flavor1 = np.dot(nparray1, nparray2) # Recommended way<br/>print(flavor1)</span><span id="4ead" class="nw md it oj b gy ov oo l op oq">flavor2 = np.sum(nparray1 * nparray2) # Ok way<br/>print(flavor2)</span><span id="58db" class="nw md it oj b gy ov oo l op oq">flavor3 = nparray1 @ nparray2         # Geeks way<br/>print(flavor3)</span><span id="4bb9" class="nw md it oj b gy ov oo l op oq"># As you never should do:             # Noobs way<br/>flavor4 = 0<br/>for a, b in zip(nparray1, nparray2):<br/>    flavor4 += a * b<br/>    <br/>print(flavor4)</span></pre><p id="2e12" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">输出:</strong></p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="8d7e" class="nw md it oj b gy on oo l op oq">38 <br/>38 <br/>38 <br/>38</span></pre><h2 id="72f6" class="nw md it bd me nx ny dn mi nz oa dp mm li ob oc mo lm od oe mq lq of og ms oh bi translated">3.获取numpy数组的行或列的平均值和总和</h2><p id="bea4" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">对矩阵执行的另一个常规操作是按行或按列求和。正如我们对功能规范所做的一样，<strong class="lb iu">轴</strong>参数控制操作的形式:</p><ul class=""><li id="2449" class="ow ox it lb b lc ld lf lg li oy lm oz lq pa lu pb pc pd pe bi translated"><strong class="lb iu"> axis=0 </strong>表示将每列的元素加在一起。</li><li id="0734" class="ow ox it lb b lc pf lf pg li ph lm pi lq pj lu pb pc pd pe bi translated"><strong class="lb iu"> axis=1 </strong>表示将每一行的元素加在一起。</li></ul><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="b4ca" class="nw md it oj b gy on oo l op oq">nparray2 = np.array([[1, -1], [2, -2], [3, -3]]) # Define a 3 x 2 matrix. <br/> <br/>sumByCols = np.sum(nparray2, axis=0) # Get the sum for each column. Returns 2 elements<br/>sumByRows = np.sum(nparray2, axis=1) # get the sum for each row. Returns 3 elements<br/> <br/>print('Sum by columns: ')<br/>print(sumByCols)<br/>print('Sum by rows:')<br/>print(sumByRows)</span></pre><p id="4035" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">输出:</strong></p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="d20c" class="nw md it oj b gy on oo l op oq">Sum by columns: <br/>[ 6 -6] <br/>Sum by rows: <br/>[0 0 0]</span></pre><p id="cc83" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">同样，对于平均值，您可以使用<code class="fe or os ot oj b">np.mean</code></p><h2 id="f59a" class="nw md it bd me nx ny dn mi nz oa dp mm li ob oc mo lm od oe mq lq of og ms oh bi translated">4.如何在Python中获取循环的索引</h2><p id="a1be" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">假设您有一个列表，并且除了列表元素之外，您还想获得元素的位置，即索引。对于这种情况，<strong class="lb iu">枚举</strong>函数将完成这一任务。例如:</p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="14d8" class="nw md it oj b gy on oo l op oq">mylist = [10,30,100] </span><span id="8ac0" class="nw md it oj b gy ov oo l op oq">for index, element in enumerate(mylist): <br/>    print(index, element)</span></pre><p id="b0c6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">输出:</strong></p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="8576" class="nw md it oj b gy on oo l op oq">0 10 <br/>1 30 <br/>2 100</span></pre><h2 id="9451" class="nw md it bd me nx ny dn mi nz oa dp mm li ob oc mo lm od oe mq lq of og ms oh bi translated">5.f字符串中的十进制位数</h2><p id="79f4" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">如果我们想返回f字符串中特定数量的十进制数字，我们可以使用<code class="fe or os ot oj b">f'{v:.2f}'</code>，其中<strong class="lb iu"> v </strong>是我们的变量。例如:</p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="baea" class="nw md it oj b gy on oo l op oq">import numpy as np<br/>my_random = np.random.rand(10)<br/> <br/>for i, n in enumerate(my_random):<br/>    print(f'The {i} number is {n}')</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pk"><img src="../Images/e94f91d5d6ad9aa4149776ba98a964bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:634/format:webp/0*fHBVT8r_YzCT7i0E.png"/></div></div></figure><p id="61ed" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，如果我们通过了<code class="fe or os ot oj b">:.2f</code>，我们将得到2个小数位。例如:</p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="4a66" class="nw md it oj b gy on oo l op oq">for i, n in enumerate(my_random):<br/>    print(f'The {i} number is {n:.2f}')</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pl"><img src="../Images/7a3902d74d5af33409244c247b2a518d.png" data-original-src="https://miro.medium.com/v2/resize:fit:382/format:webp/0*0HPf_KVzv9ZVpItX.png"/></div></figure><h2 id="587b" class="nw md it bd me nx ny dn mi nz oa dp mm li ob oc mo lm od oe mq lq of og ms oh bi translated">6.如何在Python中生成序列</h2><p id="4828" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">我们可以使用<code class="fe or os ot oj b">range</code>函数在Python中生成序列，但是它只支持整数。当然，我们可以生成一系列整数，然后将它们除以一个数，比如10，但是让我们讨论一些使用numpy的更直接的方法。</p><p id="626c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">排列</strong></p><p id="8b77" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以使用<code class="fe or os ot oj b">numpy arange</code>生成一个序列，如下所示:</p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="8d18" class="nw md it oj b gy on oo l op oq">import numpy as np<br/> <br/># start point = 0 , end point (not incl) is 1.05 and step is 0.05<br/>np.arange(0, 1.05, 0.05)</span></pre><p id="29eb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">输出:</strong></p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="c8d3" class="nw md it oj b gy on oo l op oq">array([0. , 0.05, 0.1 , 0.15, 0.2 , 0.25, 0.3 , 0.35, 0.4 , 0.45, 0.5 , 0.55, 0.6 , 0.65, 0.7 , 0.75, 0.8 , 0.85, 0.9 , 0.95, 1. ])</span></pre><p id="7b55" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">林空间</p><p id="d8a0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用<code class="fe or os ot oj b">numpy linspace</code>,我们可以指定起点、终点和要返回的点数，然后它估计步数。</p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="fc26" class="nw md it oj b gy on oo l op oq">np.linspace(0,1, 21)</span></pre><p id="bc77" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">输出:</strong></p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="1be8" class="nw md it oj b gy on oo l op oq">array([0. , 0.05, 0.1 , 0.15, 0.2 , 0.25, 0.3 , 0.35, 0.4 , 0.45, 0.5 , 0.55, 0.6 , 0.65, 0.7 , 0.75, 0.8 , 0.85, 0.9 , 0.95, 1. ])</span></pre><h2 id="d253" class="nw md it bd me nx ny dn mi nz oa dp mm li ob oc mo lm od oe mq lq of og ms oh bi translated">7.如何在Python中删除字符串中的换行符</h2><p id="ba39" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">新换行符可以是<code class="fe or os ot oj b">\n</code>或\ <code class="fe or os ot oj b">r</code>的形式，也可以是两种形式。我们可以使用<code class="fe or os ot oj b">strip()</code>方法将它们从字符串中移除。</p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="04e2" class="nw md it oj b gy on oo l op oq">'this is a string\n'.strip()</span></pre><p id="06ea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">输出:</strong></p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="291b" class="nw md it oj b gy on oo l op oq">'this is a string'</span></pre><p id="d72f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请注意，还有用于文本中空白的左右去除的<code class="fe or os ot oj b">lstrip()</code>和<code class="fe or os ot oj b">rstrip()</code>。我们还可以通过键入以下内容来更具体地说明:</p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="b8f4" class="nw md it oj b gy on oo l op oq">'this is a string\n'.strip("\n")</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="291d" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">稀有</h1><h2 id="d453" class="nw md it bd me nx ny dn mi nz oa dp mm li ob oc mo lm od oe mq lq of og ms oh bi translated">8.如何重命名和重新调整因子</h2><p id="3d92" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">R中的一个“特殊”数据结构是“因子”。我们将提供一些例子来说明如何重命名和重新调整这些因素。在接下来的示例中，我们将使用以下数据:</p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="b154" class="nw md it oj b gy on oo l op oq">df&lt;-data.frame(ID=c(1:10), Gender=factor(c("M","M","M","","F","F","M","","F","F" )), <br/>           AgeGroup=factor(c("[60+]", "[26-35]", "[NA]", "[36-45]", "[46-60]", "[26-35]", "[NA]", "[18-25]", "[26-35]", "[26-35]")))</span></pre><p id="2305" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">输出:</strong></p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="5db3" class="nw md it oj b gy on oo l op oq">&gt; df<br/>   ID Gender AgeGroup<br/>1   1      M    [60+]<br/>2   2      M  [26-35]<br/>3   3      M     [NA]<br/>4   4         [36-45]<br/>5   5      F  [46-60]<br/>6   6      F  [26-35]<br/>7   7      M     [NA]<br/>8   8         [18-25]<br/>9   9      F  [26-35]<br/>10 10      F  [26-35]</span></pre><p id="df49" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">重命名因子</strong></p><p id="e35a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设我要把性别的空字符串从未知转换成<strong class="lb iu">【U】</strong>。</p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="b33e" class="nw md it oj b gy on oo l op oq">levels(df$Gender)[levels(df$Gender)==""] ="U"</span></pre><p id="cdf6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设我们想合并年龄组。例如，新的类别将是<strong class="lb iu">、【18–35】、【35+】、【NA】、</strong></p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="d497" class="nw md it oj b gy on oo l op oq">levels(df$AgeGroup)[levels(df$AgeGroup)=="[18-25]"] = "[18-35]" levels(df$AgeGroup)[levels(df$AgeGroup)=="[26-35]"] = "[18-35]" levels(df$AgeGroup)[levels(df$AgeGroup)=="[36-45]"] = "[35+]" levels(df$AgeGroup)[levels(df$AgeGroup)=="[46-60]"] = "[35+]" levels(df$AgeGroup)[levels(df$AgeGroup)=="[60+]"] = "[35+]"</span></pre><p id="0d17" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请注意，我们本来可以一次完成，但这是非常冒险的，因为有时我们可能会遇到与预期不同的顺序。</p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="0a44" class="nw md it oj b gy on oo l op oq">levels(df$AgeGroup)&lt;-c("[18-35]","[18-35]","[35+]","[35+]","[35+]", "[NA]")</span></pre><p id="00ee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过应用我们之前提到的更改，我们获得了以下数据。</p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="53e7" class="nw md it oj b gy on oo l op oq">&gt; df<br/>   ID Gender AgeGroup<br/>1   1      M    [35+]<br/>2   2      M  [18-35]<br/>3   3      M     [NA]<br/>4   4      U    [35+]<br/>5   5      F    [35+]<br/>6   6      F  [18-35]<br/>7   7      M     [NA]<br/>8   8      U  [18-35]<br/>9   9      F  [18-35]<br/>10 10      F  [18-35]</span></pre><p id="0027" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">相关因素</strong></p><p id="c8bd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设我们希望<strong class="lb iu">【NA】</strong>年龄组先出现</p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="5444" class="nw md it oj b gy on oo l op oq">df$AgeGroup&lt;-factor(df$AgeGroup, c("[NA]", "[18-35]" ,"[35+]"))</span></pre><p id="6e4f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">另一种改变顺序的方法是使用<code class="fe or os ot oj b">relevel()</code>在列表中首先创建一个特定的级别。(这不适用于有序因子。).假设我们首先想要F性别。</p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="aeb4" class="nw md it oj b gy on oo l op oq">df$Gender&lt;-relevel(df$Gender, "F")</span></pre><p id="4d83" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过应用这些变化，我们可以看到这些因素是如何改变水平的。</p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="b3f7" class="nw md it oj b gy on oo l op oq">&gt; str(df)<br/>'data.frame': 10 obs. of  3 variables:<br/> $ ID      : int  1 2 3 4 5 6 7 8 9 10<br/> $ Gender  : Factor w/ 3 levels "F","U","M": 3 3 3 2 1 1 3 2 1 1<br/> $ AgeGroup: Factor w/ 3 levels "[NA]","[18-35]",..: 3 2 1 3 3 2 1 2 2 2</span></pre><h2 id="8dac" class="nw md it bd me nx ny dn mi nz oa dp mm li ob oc mo lm od oe mq lq of og ms oh bi translated">9.如何估算R中的缺失值</h2><p id="64d2" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在真实的数据世界中，处理缺失值(称为n as)是很常见的。有时，需要估算缺失值，最常见的方法是:</p><ul class=""><li id="17ea" class="ow ox it lb b lc ld lf lg li oy lm oz lq pa lu pb pc pd pe bi translated"><strong class="lb iu">数值数据</strong>:用<strong class="lb iu">均值</strong>或<strong class="lb iu">中值</strong>估算缺失值</li><li id="f9e7" class="ow ox it lb b lc pf lf pg li ph lm pi lq pj lu pb pc pd pe bi translated"><strong class="lb iu">分类数据</strong>:用<strong class="lb iu">模式</strong>估算缺失值</li></ul><p id="bd0a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们举例说明如何根据数据类型进行动态估算。</p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="2c4c" class="nw md it oj b gy on oo l op oq">library(tidyverse)<br/> <br/>df&lt;-tibble(id=seq(1,10), ColumnA=c(10,9,8,7,NA,NA,20,15,12,NA), <br/>           ColumnB=factor(c("A","B","A","A","","B","A","B","","A")),<br/>           ColumnC=factor(c("","BB","CC","BB","BB","CC","AA","BB","","AA")),<br/>           ColumnD=c(NA,20,18,22,18,17,19,NA,17,23)<br/>           )<br/> <br/>df</span></pre><p id="da64" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们得到:</p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="50e1" class="nw md it oj b gy on oo l op oq"># A tibble: 10 x 5<br/>      id ColumnA ColumnB ColumnC ColumnD<br/>   &lt;int&gt;   &lt;dbl&gt; &lt;fct&gt;   &lt;fct&gt;     &lt;dbl&gt;<br/> 1     1      10 "A"     ""           NA<br/> 2     2       9 "B"     "BB"         20<br/> 3     3       8 "A"     "CC"         18<br/> 4     4       7 "A"     "BB"         22<br/> 5     5      NA ""      "BB"         18<br/> 6     6      NA "B"     "CC"         17<br/> 7     7      20 "A"     "AA"         19<br/> 8     8      15 "B"     "BB"         NA<br/> 9     9      12 ""      ""           17<br/>10    10      NA "A"     "AA"         23</span></pre><p id="c9e4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于分类变量，我们将应用我们必须构建的“模式”函数，因为r没有提供它。</p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="05e6" class="nw md it oj b gy on oo l op oq">getmode &lt;- function(v){<br/>  v=v[nchar(as.character(v))&gt;0]<br/>  uniqv &lt;- unique(v)<br/>  uniqv[which.max(tabulate(match(v, uniqv)))]<br/>}</span></pre><p id="a933" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们有了“mode”函数，我们可以根据列的数据类型来估算数据帧中缺失的值。因此，如果列数据类型为“数字”，我们将使用“<strong class="lb iu">均值</strong>估算，否则使用“<strong class="lb iu">模式</strong>”估算。注意，在我们的脚本中，我们考虑了列名，并且“dplyr”包需要一个特殊的符号(<strong class="lb iu">！！cols:=</strong>T20】！！rlang::sym(colname) )动态选择列名。</p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="c494" class="nw md it oj b gy on oo l op oq">for (cols in colnames(df)) {<br/>  if (cols %in% names(df[,sapply(df, is.numeric)])) {<br/>    df&lt;-df%&gt;%mutate(!!cols := replace(!!rlang::sym(cols), is.na(!!rlang::sym(cols)), mean(!!rlang::sym(cols), na.rm=TRUE)))<br/>     <br/>  }<br/>  else {<br/>     <br/>    df&lt;-df%&gt;%mutate(!!cols := replace(!!rlang::sym(cols), !!rlang::sym(cols)=="", getmode(!!rlang::sym(cols))))<br/>     <br/>  }<br/>}<br/> <br/>df</span></pre><p id="0827" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">瞧啊</strong>！缺失值已被估算！</p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="70cb" class="nw md it oj b gy on oo l op oq">&gt; df<br/># A tibble: 10 x 5<br/>      id ColumnA ColumnB ColumnC ColumnD<br/>   &lt;dbl&gt;   &lt;dbl&gt; &lt;fct&gt;   &lt;fct&gt;     &lt;dbl&gt;<br/> 1     1    10   A       BB         19.2<br/> 2     2     9   B       BB         20  <br/> 3     3     8   A       CC         18  <br/> 4     4     7   A       BB         22  <br/> 5     5    11.6 A       BB         18  <br/> 6     6    11.6 B       CC         17  <br/> 7     7    20   A       AA         19  <br/> 8     8    15   B       BB         19.2<br/> 9     9    12   A       BB         17  <br/>10    10    11.6 A       AA         23</span></pre><h2 id="50d2" class="nw md it bd me nx ny dn mi nz oa dp mm li ob oc mo lm od oe mq lq of og ms oh bi translated">10.如何根据不同列的多个条件赋值</h2><p id="ed45" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在之前的<a class="ae ky" href="https://predictivehacks.com/pandas-how-to-assign-values-based-on-multiple-conditions-of-different-columns/" rel="noopener ugc nofollow" target="_blank">帖子</a>中，我们展示了如何根据不同列的多个条件在Pandas数据框中赋值。</p><p id="0c77" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">同样，我们将使用著名的<code class="fe or os ot oj b">titanic</code>数据集，我们的场景如下:</p><p id="cca8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">加载数据</strong></p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="bcd3" class="nw md it oj b gy on oo l op oq">library(dplyr)</span><span id="887a" class="nw md it oj b gy ov oo l op oq">url = '<a class="ae ky" href="https://gist.githubusercontent.com/michhar/2dfd2de0d4f8727f873422c5d959fff5/raw/ff414a1bcfcba32481e4d4e8db578e55872a2ca1/titanic.csv'" rel="noopener ugc nofollow" target="_blank">https://gist.githubusercontent.com/michhar/2dfd2de0d4f8727f873422c5d959fff5/raw/ff414a1bcfcba32481e4d4e8db578e55872a2ca1/titanic.csv'</a></span><span id="130d" class="nw md it oj b gy ov oo l op oq">df = read.csv(url, sep="\t")</span></pre><p id="b737" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">使用<em class="pm">case _ when<em class="pm">dplyr</em>T33</em>功能</strong></p><p id="ba9a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于该任务，我们将如下使用<code class="fe or os ot oj b">dplyr</code>的<code class="fe or os ot oj b">case_when</code>功能:</p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="1e7f" class="nw md it oj b gy on oo l op oq">df&lt;-df%&gt;%mutate(New_Column = case_when(<br/>  is.na(Age) &amp; Pclass==1 ~ 40,<br/>  is.na(Age) &amp; Pclass==2 ~ 30,<br/>  is.na(Age) &amp; Pclass==3 ~ 25,<br/>  TRUE~Age<br/>  ))</span></pre><p id="7842" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们看看我们创建的Age、Pclass和New_Column。</p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="c6ee" class="nw md it oj b gy on oo l op oq">df%&gt;%select(Age, Pclass, New_Column)</span></pre><p id="2604" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如我们所看到的，我们得到了预期的结果。</p><pre class="kj kk kl km gt oi oj ok ol aw om bi"><span id="0453" class="nw md it oj b gy on oo l op oq">Age Pclass New_Column<br/>1   22.00      3      22.00<br/>2   38.00      1      38.00<br/>3   26.00      3      26.00<br/>4   35.00      1      35.00<br/>5   35.00      3      35.00<br/>6      NA      3      25.00</span></pre></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="4357" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="pm">原载于</em><a class="ae ky" href="https://predictivehacks.com/10-tips-and-tricks-for-data-scientists-vol-7/" rel="noopener ugc nofollow" target="_blank"><em class="pm">https://predictivehacks.com</em></a><em class="pm">。</em></p></div></div>    
</body>
</html>