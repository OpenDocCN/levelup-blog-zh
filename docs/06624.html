<html>
<head>
<title>A React Front End with Material-UI (Part 1)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Material-UI的React前端(第1部分)</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/a-react-front-end-with-material-ui-part-1-add14caef2bf?source=collection_archive---------9-----------------------#2020-12-13">https://levelup.gitconnected.com/a-react-front-end-with-material-ui-part-1-add14caef2bf?source=collection_archive---------9-----------------------#2020-12-13</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9e2e" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">一次替换一个完整的应用程序。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/d8472fde44f596760263307ef42ff506.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oGFnnHMvLT6k7HypgGuXFA.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">图片由<a class="ae ky" href="https://pixabay.com/users/aitoff-388338/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=3672088" rel="noopener ugc nofollow" target="_blank">安德鲁·马丁</a>来自<a class="ae ky" href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=3672088" rel="noopener ugc nofollow" target="_blank"> Pixabay </a></figcaption></figure><p id="38fd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我经常听到全栈这个词，通常，它们指的是一种web编程风格，其中服务器生成填充有数据的HTML页面。虽然在一个应用程序中包含所有内容很方便，但这会导致许多问题。表示和数据逻辑不可避免地交织在一起。如果不做额外的工作，其他来源就无法获得数据。并且缩放是有问题的。</p><p id="eae8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">解决办法？让你的API和你的前端代码完全分离。就像在单独的存储库中，可能是单独的表达式语言，甚至是单独的编码员。但是在本文中，单独的存储库就足够了；我将做一个“葡萄酒和奶酪配对”数据后端的前端，我在<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/how-to-create-a-python-api-using-flask-connexion-4f3fc77e7f6e">如何用Flask和connection</a>创建一个Python API。所以你可以说我是一个全栈编码器；我只是用一种更灵活的方式编码。</p><p id="8d61" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个项目最初是一个传统的全栈PHP应用程序，我一点一点地对它进行了转换。最初的项目是用<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/modern-php-df3d3bf343f8">现代PHP </a>编写的。然后我想能够在不暴露数据库的情况下读取数据，于是我用PHP和Lumen 在<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/microservices-with-php-and-lumen-d9af0b915a71">微服务中写了一个简单的读取服务。最后，我在</a><a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/how-to-create-a-python-api-using-flask-connexion-4f3fc77e7f6e">如何使用Flask和Connexion </a>创建Python API中写了一整个API。这应该是我的最后一篇文章，用React UI替换原来PHP应用程序的UI方面。</p><p id="be5c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我的Python API需要JWT令牌来更新端点，所以我将从这开始。我使用<a class="ae ky" href="https://www.okta.com/" rel="noopener ugc nofollow" target="_blank"> Okta </a>作为第三方认证服务，因为没有人应该编写自己的认证服务。如果您有自己喜欢的认证服务，您可能也可以使用它，但是您必须弄清楚如何将它转换到我给出的代码中。</p><p id="c4a6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我将从最简单的应用程序开始，以确保身份验证正常工作。这与您运行React 'create app '命令得到的结果类似，但更简单。我发现，不用堆积太多东西，启动一个项目就已经够难了。再加上我们会有认证，总是很麻烦。</p><p id="75ed" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你需要安装一些东西来制作一个React应用程序。当然，你需要在全球范围内安装Node.js、NPM和Yarn。我的版本分别是14.4.0、6.14.8和1.22.4。如果您已经创建了一个React应用程序，那么您可能已经有了这些。因为我们的目标平台是云，所以你需要Docker。我在Mac电脑上使用Docker Desktop。如果你真的想在云中使用它，你需要一个云提供商的账户，可以为你提供一个普通的Linux虚拟机(我用过GCP和AWS，它们在免费层都有类似的产品)。你应该有一个由你控制的DNS域名，我使用一个免费HTTPS的<a class="ae ky" href="https://www.cloudflare.com/" rel="noopener ugc nofollow" target="_blank"> Cloudflare </a>账户。</p><p id="efee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，您可以为您的项目创建一个目录并运行<code class="fe lv lw lx ly b">git init</code>使其成为一个git库，添加通常的<code class="fe lv lw lx ly b">README.md</code>、<code class="fe lv lw lx ly b">.gitignore</code>等，并提交它。或者，您可以在GitHub上完成所有这些工作，方法是在那里创建一个新的存储库，然后在您的计算机上克隆生成的存储库。无论哪种方式，都可以切换到新目录，在那里您可以开始添加文件。</p><h2 id="3899" class="lz ma it bd mb mc md dn me mf mg dp mh li mi mj mk lm ml mm mn lq mo mp mq mr bi translated">证明</h2><p id="1a2f" class="pw-post-body-paragraph kz la it lb b lc ms ju le lf mt jx lh li mu lk ll lm mv lo lp lq mw ls lt lu im bi translated">但是在你添加文件之前，如果你还没有的话，注册一个免费的帐户。这里有一个设置<a class="ae ky" href="https://developer.okta.com/blog/2019/03/06/simple-user-authentication-in-react" rel="noopener ugc nofollow" target="_blank"> Okta认证</a>的指南。我们将在下面讨论我们的应用程序的细节，所以这里将重复一些指南。这一部分在我的文章<a class="ae ky" href="https://medium.com/swlh/the-blackbook-project-part-1-d93e1c16d1de" rel="noopener">black book Project Part 1</a>中的“安全”副标题下也有涉及。</p><p id="e15f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦你有了Okta账户，你就需要建立一个SPA(单页申请)。它为您提供了最合理的默认值，但是<code class="fe lv lw lx ly b">8080</code>端口应该改为<code class="fe lv lw lx ly b">3000</code>，因为React开发服务器就是在这个端口上运行的。完成应用程序注册后，您会发现一个客户端ID。然后，如果您返回Okta仪表板，您将找到他们为您创建的组织URL。</p><p id="98a4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，我们可以开始添加最少的文件来创建一个具有新授权的React应用程序。这是一个Node.js项目，因此您需要一个包含所有依赖项的<code class="fe lv lw lx ly b">package.json</code>文件。它应该是这样的:</p><pre class="kj kk kl km gt mx ly my mz aw na bi"><span id="3c07" class="lz ma it ly b gy nb nc l nd ne">{<br/>  "name": "winecheeseui",<br/>  "version": "0.1.0",<br/>  "private": true,<br/>  "dependencies": {<br/>    "<a class="ae ky" href="http://twitter.com/okta/okta-auth-js" rel="noopener ugc nofollow" target="_blank">@okta/okta-auth-js</a>": "^4.2.0",<br/>    "<a class="ae ky" href="http://twitter.com/okta/okta-react" rel="noopener ugc nofollow" target="_blank">@okta/okta-react</a>": "^4.0.0",<br/>    "dotenv": "^8.2.0",<br/>    "react": "^16.13.1",<br/>    "react-dom": "^16.13.1",<br/>    "react-router-dom": "^5.2.0",<br/>    "react-scripts": "^4.0.0"<br/>  },<br/>  "scripts": {<br/>    "start": "react-scripts start",<br/>    "build": "react-scripts build"<br/>  },<br/>  "eslintConfig": {<br/>    "extends": "react-app"<br/>  },<br/>  "browserslist": {<br/>    "production": [<br/>      "&gt;0.2%",<br/>      "not dead",<br/>      "not op_mini all"<br/>    ],<br/>    "development": [<br/>      "last 1 chrome version",<br/>      "last 1 firefox version",<br/>      "last 1 safari version"<br/>    ]<br/>  }<br/>}</span></pre><p id="353c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后是常用的目录，<code class="fe lv lw lx ly b">public</code>和<code class="fe lv lw lx ly b">src</code>。目前，<code class="fe lv lw lx ly b">public</code>目录将只包含您的<code class="fe lv lw lx ly b">index.html</code>:</p><pre class="kj kk kl km gt mx ly my mz aw na bi"><span id="6081" class="lz ma it ly b gy nb nc l nd ne">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;meta charset="utf-8"&gt;<br/>    &lt;meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"&gt;<br/>    &lt;meta name="theme-color" content="#000000"&gt;<br/>    &lt;link rel="manifest" href="%PUBLIC_URL%/manifest.json"&gt;<br/>    &lt;link rel="shortcut icon" href="%PUBLIC_URL%/favicon.ico"&gt;<br/>    &lt;title&gt;React App&lt;/title&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;noscript&gt;<br/>      You need to enable JavaScript to run this app.<br/>    &lt;/noscript&gt;<br/>    &lt;div id="root"&gt;&lt;/div&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="6c93" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这其中的主要部分就是<code class="fe lv lw lx ly b">&lt;div id=”root”&gt;&lt;/div&gt;</code>；这将被您的应用程序替换。注意这里还没有<code class="fe lv lw lx ly b">css</code>库。这是我的哲学，先盖房子，再粉刷。就目前而言，我不在乎它看起来是否丑陋，我只想让它工作，并且让它工作本身通常就足够困难了。如果编码正确，以后添加样式会很容易。</p><p id="158a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">根div的替换由<code class="fe lv lw lx ly b">src/index.js</code>完成。以下是我所知道的:</p><pre class="kj kk kl km gt mx ly my mz aw na bi"><span id="8086" class="lz ma it ly b gy nb nc l nd ne">import React from 'react'<br/>import ReactDOM from 'react-dom'<br/>import App from './App'</span><span id="016a" class="lz ma it ly b gy nf nc l nd ne">ReactDOM.render(&lt;App /&gt;, document.getElementById('root'))</span></pre><p id="3d4f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您的应用程序将位于<code class="fe lv lw lx ly b">src/App.jsx</code>中，如下所示:</p><pre class="kj kk kl km gt mx ly my mz aw na bi"><span id="f5da" class="lz ma it ly b gy nb nc l nd ne">import React from 'react';<br/>import { BrowserRouter as Router, Route, Switch } from 'react-router-dom';<br/>import { OktaAuth } from '<a class="ae ky" href="http://twitter.com/okta/okta-auth-js" rel="noopener ugc nofollow" target="_blank">@okta/okta-auth-js</a>';<br/>import { Security, LoginCallback } from '<a class="ae ky" href="http://twitter.com/okta/okta-react" rel="noopener ugc nofollow" target="_blank">@okta/okta-react</a>'<br/>import Home from './Home';</span><span id="20de" class="lz ma it ly b gy nf nc l nd ne">const CLIENT_ID = '&lt;your okta app client id'<br/>const ISSUER = '<a class="ae ky" href="https://dev-804011.okta.com/oauth2/default'" rel="noopener ugc nofollow" target="_blank">https://&lt;your okta url&gt;/oauth2/default'</a><br/>const REDIRECT_URI = `${window.location.origin}/implicit/callback`</span><span id="bac5" class="lz ma it ly b gy nf nc l nd ne">const config = {<br/>  oidc: {<br/>    clientId: CLIENT_ID,<br/>    issuer: ISSUER,<br/>    redirectUri: REDIRECT_URI,<br/>    scopes: ['openid', 'profile', 'email'],<br/>    pkce: true,<br/>    disableHttpsCheck: true<br/>  }<br/>}</span><span id="cba1" class="lz ma it ly b gy nf nc l nd ne">const oktaAuth = new OktaAuth(config.oidc);</span><span id="46e1" class="lz ma it ly b gy nf nc l nd ne">const App = () =&gt; (<br/>  &lt;Router&gt;<br/>    &lt;Security oktaAuth={oktaAuth}&gt;<br/>      &lt;Switch&gt;<br/>        &lt;Route path="/" exact component={Home} /&gt;<br/>        &lt;Route path="/implicit/callback" component={LoginCallback} /&gt;<br/>      &lt;/Switch&gt;<br/>    &lt;/Security&gt;<br/>  &lt;/Router&gt;<br/>);<br/>export default App</span></pre><p id="66ba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将建立一个安全上下文，并调用<code class="fe lv lw lx ly b">/implicit/callback</code>来调用Okta代码。这个<code class="fe lv lw lx ly b">REDIRECT_URL</code>不必是公共的，因为浏览器将使用<code class="fe lv lw lx ly b">302</code>重定向来访问它。如果URL有一个空的路径(这应该是常见的情况)，它将只转到<code class="fe lv lw lx ly b">Home</code>组件。</p><p id="1c29" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">确保您在设置Okta应用程序时设置了自己的<code class="fe lv lw lx ly b">CLIENT_ID</code>和<code class="fe lv lw lx ly b">ISSUER</code>。也不是秘密，事实上，前端没有什么应该是秘密的，因为当你第一次打开应用程序时，它会在浏览器中被发现。身份验证的关键是为您提供令牌的身份验证服务器和验证令牌是否来自身份验证服务器的API服务器。前端只是一个中间人。</p><p id="5a8f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">拼图的最后一块是<code class="fe lv lw lx ly b">src/Home.jsx</code>，它有一个登录按钮和一条简单的消息。它看起来是这样的:</p><pre class="kj kk kl km gt mx ly my mz aw na bi"><span id="36a3" class="lz ma it ly b gy nb nc l nd ne">import { useOktaAuth } from '<a class="ae ky" href="http://twitter.com/okta/okta-react" rel="noopener ugc nofollow" target="_blank">@okta/okta-react</a>'<br/>import React, { useState, useEffect } from 'react'</span><span id="8c1d" class="lz ma it ly b gy nf nc l nd ne">const Home = () =&gt; {<br/>  const { authState, oktaAuth } = useOktaAuth()<br/>  const [userInfo, setUserInfo] = useState(null)</span><span id="7566" class="lz ma it ly b gy nf nc l nd ne">useEffect(() =&gt; {<br/>    if (!authState.isAuthenticated) {<br/>      setUserInfo(null);<br/>    } else {<br/>      oktaAuth.getUser().then((info) =&gt; {<br/>        setUserInfo(info);<br/>      });<br/>    }<br/>  }, [authState, oktaAuth]) // Update if authState changes</span><span id="b15f" class="lz ma it ly b gy nf nc l nd ne">const login = async () =&gt; {<br/>    oktaAuth.signInWithRedirect();<br/>  }</span><span id="50d3" class="lz ma it ly b gy nf nc l nd ne">if (authState.isPending) {<br/>    return (<br/>      &lt;div&gt;Loading...&lt;/div&gt;<br/>    )<br/>  }</span><span id="00bf" class="lz ma it ly b gy nf nc l nd ne">return (<br/>    &lt;div&gt;<br/>      &lt;div&gt;<br/>        &lt;h1 as="h1"&gt;Wine &amp; Cheese Pairing App&lt;/h1&gt;</span><span id="e307" class="lz ma it ly b gy nf nc l nd ne">{ authState.isAuthenticated &amp;&amp; !userInfo<br/>        &amp;&amp; &lt;div&gt;Loading user information...&lt;/div&gt;}</span><span id="3fda" class="lz ma it ly b gy nf nc l nd ne">{authState.isAuthenticated &amp;&amp; userInfo<br/>        &amp;&amp; (<br/>        &lt;div&gt;<br/>          &lt;p&gt;<br/>            Welcome back,<br/>            {userInfo.name}<br/>            !<br/>          &lt;/p&gt;<br/>        &lt;/div&gt;<br/>        )}</span><span id="1259" class="lz ma it ly b gy nf nc l nd ne">{!authState.isAuthenticated<br/>        &amp;&amp; (<br/>        &lt;div&gt;<br/>          &lt;button id="login-button" primary onClick={login}&gt;Login&lt;/button&gt;<br/>        &lt;/div&gt;<br/>        )}</span><span id="a203" class="lz ma it ly b gy nf nc l nd ne">&lt;/div&gt;<br/>    &lt;/div&gt;<br/>  )<br/>}<br/>export default Home</span></pre><p id="f105" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们正在使用React钩子<code class="fe lv lw lx ly b">useState</code>和<code class="fe lv lw lx ly b">useEffect</code>。这些取代了旧的基于类的React组件中复杂的状态争论。我们将维护两个状态，一个是我们是否通过身份验证的标志，另一个是我们是否通过身份验证的用户信息。我们将把它们返回给我们的应用程序使用。</p><p id="66bc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们有足够的信息来启动我们的应用程序。首先，用<code class="fe lv lw lx ly b">yarn install</code>加载所有的依赖项。要开始运行<code class="fe lv lw lx ly b">yarn start</code>，它应该启动一个服务器并启动一个浏览器:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ng"><img src="../Images/999ea5512bdc4609b00e57614872b400.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SrNv1mlIVbpOhe6NZxhJoA.png"/></div></div></figure><p id="1874" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">按下登录按钮，您将进入Okta登录屏幕。您可以更改它来处理从您自己的站点登录，但我不打算这么做。我想知道一个可信的第三方来源正在处理认证。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nh"><img src="../Images/37163343db87fb6c67d1fd515c1b4075.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vqwznPymSG7vZNO0Oc4mww.png"/></div></div></figure><p id="8ebd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，是荣耀的主屏幕。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ni"><img src="../Images/9370dfccb0f95cb081cff250ab09fb71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wdGO_u1sBhvchN9NAK8-eA.png"/></div></div></figure><p id="c9dc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它可以用欢迎消息代替登录按钮，并从作为登录过程的一部分传回的用户信息中收集我的名字。让服务器保持运行，随着代码的每次更改，它都会自动更新页面。</p><h2 id="dff9" class="lz ma it bd mb mc md dn me mf mg dp mh li mi mj mk lm ml mm mn lq mo mp mq mr bi translated">将它连接到后端</h2><p id="a7f7" class="pw-post-body-paragraph kz la it lb b lc ms ju le lf mt jx lh li mu lk ll lm mv lo lp lq mw ls lt lu im bi translated">我们将使用的后端在我之前的文章<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/how-to-create-a-python-api-using-flask-connexion-4f3fc77e7f6e">如何创建Python API </a>中已经完成了。它目前正在https://phprest.kamradtfamily.net/api/pairing<a class="ae ky" href="https://phprest.kamradtfamily.net/api/pairing" rel="noopener ugc nofollow" target="_blank">的云上。只有<code class="fe lv lw lx ly b">GET</code>方法不受保护；其余的将需要认证令牌。因此，我们可以在您登录之前显示列表，只有当您想要添加/修改/删除项目时才需要登录。</a></p><p id="a2f3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当然，您必须通过遵循我的文章中的步骤或者创建自己的API来获得自己的API。它只是一个标准的RESTful API，不一定是Python，它可以是你最熟悉的任何后端语言。但是它应该在您刚刚创建的Okta SPA应用程序配置的授权头中接受JWT令牌。</p><p id="6564" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是SPA类型web应用程序的最大好处之一。数据是通过API保护的，所以我们的前端代码中没有任何错误可以改变这一点。前端所能做的最糟糕的事情就是显示一条令人讨厌的错误消息，如果你没有登录，我们应该能够通过禁用调用受保护端点的链接和按钮来防止这种情况。前端代码已经足够复杂，不用担心引入安全漏洞。而且，如果做得正确，前端和后端之间的划分应该消除从跨站点脚本到代码注入的一整类潜在的安全隐患。</p><p id="9f18" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由于葡萄酒/奶酪列表无需登录即可获得，我们可以先这样做。我将创建一个<code class="fe lv lw lx ly b">src/WineList.jsx</code>文件，并用以下内容填充它:</p><pre class="kj kk kl km gt mx ly my mz aw na bi"><span id="47af" class="lz ma it ly b gy nb nc l nd ne">import React, { useState, useEffect } from 'react'</span><span id="d885" class="lz ma it ly b gy nf nc l nd ne">const WineList = () =&gt; {<br/>  const [wineList, setWineList] = useState(null)<br/>  const [wineListError, setWineListError] = useState(false)</span><span id="851e" class="lz ma it ly b gy nf nc l nd ne">// fetch messages<br/>  useEffect(() =&gt; {<br/>      fetch('<a class="ae ky" href="https://phprest.kamradtfamily.net/api/pairing'" rel="noopener ugc nofollow" target="_blank">https://phprest.kamradtfamily.net/api/pairing'</a>)<br/>        .then((response) =&gt; {<br/>          if (!response.ok) {<br/>            return Promise.reject()<br/>          }<br/>          return response.json()<br/>        })<br/>        .then((data) =&gt; {<br/>          const pairings = data.map((pairing) =&gt; {<br/>            return {<br/>              wine: pairing.wine,<br/>              cheese: pairing.cheese,<br/>              id: `wine-pairing-${pairing.id}`,<br/>            }<br/>          })<br/>          setWineList(pairings)<br/>          setWineListError(false)<br/>        })<br/>        .catch((err) =&gt; {<br/>          setWineListError(true)<br/>          console.error(err)<br/>        })<br/>  }, [])</span><span id="1e47" class="lz ma it ly b gy nf nc l nd ne">return (<br/>    &lt;div&gt;<br/>      {wineListError &amp;&amp; &lt;p&gt;Error getting list&lt;/p&gt;}<br/>      {!wineList &amp;&amp; !wineListError &amp;&amp; &lt;p&gt;Accessing Server&lt;/p&gt;}<br/>      {wineList<br/>      &amp;&amp; (<br/>      &lt;div&gt;<br/>        &lt;table&gt;<br/>          &lt;thead&gt;<br/>            &lt;tr&gt;<br/>              &lt;th&gt;Wine&lt;/th&gt;<br/>              &lt;th&gt;Cheese&lt;/th&gt;<br/>            &lt;/tr&gt;<br/>          &lt;/thead&gt;<br/>          &lt;tbody&gt;<br/>            {wineList.map((pairing) =&gt; (<br/>              &lt;tr id={pairing.id}&gt;<br/>                &lt;td&gt;{pairing.wine}&lt;/td&gt;<br/>                &lt;td&gt;{pairing.cheese}&lt;/td&gt;<br/>              &lt;/tr&gt;<br/>            ))}<br/>          &lt;/tbody&gt;<br/>        &lt;/table&gt;<br/>      &lt;/div&gt;<br/>      )}<br/>    &lt;/div&gt;<br/>  );<br/>};</span><span id="8fc0" class="lz ma it ly b gy nf nc l nd ne">export default WineList</span></pre><p id="27d9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">很简单；阅读列表并使用普通的HTML来显示它。注意React钩子的使用是为了维护葡萄酒列表数据。关于React hooks是否可以取代Redux还有一些争论，对于这个非常简单的例子，是的，它可以。但是对于一个更复杂的站点，我们仍然希望使用Redux来维护一个关于状态和用户界面变化的真实的单一来源。</p><p id="5234" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将“登录”按钮移到列表下方。当用户登录时，我们可以用一个令牌“编辑”按钮来替换它。我有一些更详细的想法，但是添加编辑按钮有点像我们登录时不同选项的占位符。将登录按钮和欢迎消息移出<code class="fe lv lw lx ly b">src/Home.jsx</code>简化了它:</p><pre class="kj kk kl km gt mx ly my mz aw na bi"><span id="ae68" class="lz ma it ly b gy nb nc l nd ne">import WineList from './WineList'<br/>import EditButtons from './EditButtons'</span><span id="ab33" class="lz ma it ly b gy nf nc l nd ne">const Home = () =&gt; {<br/>  return (<br/>    &lt;div&gt;<br/>      &lt;h1&gt;Wine &amp; Cheese Pairing App&lt;/h1&gt;<br/>      &lt;WineList /&gt;<br/>      &lt;EditButtons /&gt;<br/>    &lt;/div&gt;<br/>  )<br/>}<br/>export default Home</span></pre><p id="9254" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在创建<code class="fe lv lw lx ly b">src/EditButtons.jsx</code>:</p><pre class="kj kk kl km gt mx ly my mz aw na bi"><span id="521e" class="lz ma it ly b gy nb nc l nd ne">import { useOktaAuth } from '<a class="ae ky" href="http://twitter.com/okta/okta-react" rel="noopener ugc nofollow" target="_blank">@okta/okta-react</a>'<br/>import React, { useState, useEffect } from 'react'</span><span id="2710" class="lz ma it ly b gy nf nc l nd ne">const EditButtons = () =&gt; {<br/>  const { authState, oktaAuth } = useOktaAuth()<br/>  const [userInfo, setUserInfo] = useState(null)</span><span id="0772" class="lz ma it ly b gy nf nc l nd ne">useEffect(() =&gt; {<br/>    if (!authState.isAuthenticated) {<br/>      setUserInfo(null);<br/>    } else {<br/>      oktaAuth.getUser().then((info) =&gt; {<br/>        setUserInfo(info)<br/>      })<br/>    }<br/>  }, [authState, oktaAuth]) // Update if authState changes</span><span id="b1dc" class="lz ma it ly b gy nf nc l nd ne">const login = async () =&gt; {<br/>    oktaAuth.signInWithRedirect()<br/>  }</span><span id="ec42" class="lz ma it ly b gy nf nc l nd ne">if (authState.isPending) {<br/>    return (<br/>      &lt;div&gt;Loading...&lt;/div&gt;<br/>    )<br/>  }</span><span id="6b2d" class="lz ma it ly b gy nf nc l nd ne">return (<br/>    &lt;div&gt;<br/>      { authState.isAuthenticated &amp;&amp; !userInfo<br/>        &amp;&amp; &lt;div&gt;Loading user information...&lt;/div&gt;}</span><span id="d6ec" class="lz ma it ly b gy nf nc l nd ne">{authState.isAuthenticated &amp;&amp; userInfo<br/>        &amp;&amp; (<br/>        &lt;div&gt;<br/>          &lt;p&gt;<br/>            Welcome back, {userInfo.name}!<br/>            &lt;button id='edit button'&gt;Edit&lt;/button&gt;<br/>          &lt;/p&gt;<br/>        &lt;/div&gt;<br/>      )}</span><span id="b4c6" class="lz ma it ly b gy nf nc l nd ne">{!authState.isAuthenticated<br/>        &amp;&amp; (<br/>        &lt;div&gt;<br/>          &lt;p&gt;Login to edit<br/>          &lt;button id="login-button" primary onClick={login}&gt;Login&lt;/button&gt;<br/>          &lt;/p&gt;<br/>        &lt;/div&gt;<br/>      )}</span><span id="2124" class="lz ma it ly b gy nf nc l nd ne">&lt;/div&gt;<br/>  )<br/>}</span><span id="85f4" class="lz ma it ly b gy nf nc l nd ne">export default EditButtons</span></pre><p id="2950" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们的屏幕看起来会像这样:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nj"><img src="../Images/f048cdb6872d154e51987a18ffb545de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jm07kqgtILdBv31DXwK8dw.png"/></div></div></figure><p id="b561" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">哇！太丑了！我不知道你怎么想，但我认为我们已经走得够远了，没有风格。此外，当我们进入编辑部分时，样式库将影响它应该如何工作。</p><h2 id="bfd2" class="lz ma it bd mb mc md dn me mf mg dp mh li mi mj mk lm ml mm mn lq mo mp mq mr bi translated">添加样式</h2><p id="a13e" class="pw-post-body-paragraph kz la it lb b lc ms ju le lf mt jx lh li mu lk ll lm mv lo lp lq mw ls lt lu im bi translated">我将使用<a class="ae ky" href="https://material-ui.com/" rel="noopener ugc nofollow" target="_blank"> Material-UI </a>来设计组件和布局。Material-UI用最少的实际CSS给你全功能的组件，这是我讨厌的。浏览器可能是人类给世界带来的最糟糕的UI平台。不幸的是，它无处不在，所以无法逃避。首先，让我们在public/index.html文件中添加几行代码:</p><pre class="kj kk kl km gt mx ly my mz aw na bi"><span id="cdc9" class="lz ma it ly b gy nb nc l nd ne">&lt;link rel="stylesheet" href="<a class="ae ky" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&amp;display=swap" rel="noopener ugc nofollow" target="_blank">https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&amp;display=swap</a>" /&gt;<br/>&lt;link rel="stylesheet" href="<a class="ae ky" href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="noopener ugc nofollow" target="_blank">https://fonts.googleapis.com/icon?family=Material+Icons</a>" /&gt;</span></pre><p id="3ca2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后我们可以安装一些组件:</p><pre class="kj kk kl km gt mx ly my mz aw na bi"><span id="e9c5" class="lz ma it ly b gy nb nc l nd ne">yarn add @material-ui/core<br/>yarn add @material-ui/icons</span></pre><p id="1344" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们准备添加到我们现有的代码。首先，打个<code class="fe lv lw lx ly b">src/themes.js</code>:</p><pre class="kj kk kl km gt mx ly my mz aw na bi"><span id="a136" class="lz ma it ly b gy nb nc l nd ne">import { createMuiTheme } from '<a class="ae ky" href="http://twitter.com/material" rel="noopener ugc nofollow" target="_blank">@material</a>-ui/core/styles';</span><span id="0641" class="lz ma it ly b gy nf nc l nd ne">// A custom theme for this app<br/>const theme = createMuiTheme({<br/>  palette: {<br/>    primary: {<br/>      main: '#206cff',<br/>    },<br/>    secondary: {<br/>      main: '#305022',<br/>    },<br/>    error: {<br/>      main: '#111111',<br/>    },<br/>    background: {<br/>      default: '#fff',<br/>    },<br/>  },<br/>});</span><span id="88df" class="lz ma it ly b gy nf nc l nd ne">export default theme;</span></pre><p id="20eb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后我们可以修改我们的<code class="fe lv lw lx ly b">src/index.js</code>来设置Material-UI以供使用:</p><pre class="kj kk kl km gt mx ly my mz aw na bi"><span id="44a4" class="lz ma it ly b gy nb nc l nd ne">import React from 'react'<br/>import ReactDOM from 'react-dom'<br/>import CssBaseline from '<a class="ae ky" href="http://twitter.com/material" rel="noopener ugc nofollow" target="_blank">@material</a>-ui/core/CssBaseline'<br/>import { ThemeProvider } from '<a class="ae ky" href="http://twitter.com/material" rel="noopener ugc nofollow" target="_blank">@material</a>-ui/core/styles'<br/>import App from './App'<br/>import theme from './theme'</span><span id="310b" class="lz ma it ly b gy nf nc l nd ne">ReactDOM.render(<br/>  &lt;ThemeProvider theme={theme}&gt;<br/>    &lt;CssBaseline /&gt;<br/>    &lt;App /&gt;<br/>  &lt;/ThemeProvider&gt;,<br/>  document.getElementById('root')<br/>)</span></pre><p id="0590" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这里，我们基于刚刚创建的<code class="fe lv lw lx ly b">src/theme.js</code>文件设置主题，并且设置CSS基线。现在我们准备开始造型了。</p><p id="65d5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将调整<code class="fe lv lw lx ly b">src/Home.jsx</code>，用一些材质UI创建的标签替换裸露的&lt; div &gt;标签:</p><pre class="kj kk kl km gt mx ly my mz aw na bi"><span id="b059" class="lz ma it ly b gy nb nc l nd ne">import WineList from './WineList'<br/>import EditButtons from './EditButtons'<br/>import Container from '<a class="ae ky" href="http://twitter.com/material" rel="noopener ugc nofollow" target="_blank">@material</a>-ui/core/Container';<br/>import Typography from '<a class="ae ky" href="http://twitter.com/material" rel="noopener ugc nofollow" target="_blank">@material</a>-ui/core/Typography';<br/>import Box from '<a class="ae ky" href="http://twitter.com/material" rel="noopener ugc nofollow" target="_blank">@material</a>-ui/core/Box';<br/>import Link from '<a class="ae ky" href="http://twitter.com/material" rel="noopener ugc nofollow" target="_blank">@material</a>-ui/core/Link';</span><span id="1d9b" class="lz ma it ly b gy nf nc l nd ne">function Copyright() {<br/>  return (<br/>    &lt;Typography variant="body2" color="textSecondary" align="center"&gt;<br/>      {'Copyright © '}<br/>      &lt;Link color="inherit" href="<a class="ae ky" href="https://material-ui.com/" rel="noopener ugc nofollow" target="_blank">https://material-ui.com/</a>"&gt;<br/>        Randal Kamradt<br/>      &lt;/Link&gt;{' '}<br/>      {new Date().getFullYear()}<br/>      {'.'}<br/>    &lt;/Typography&gt;<br/>  );<br/>}</span><span id="0f6a" class="lz ma it ly b gy nf nc l nd ne">const Home = () =&gt; {<br/>  return (<br/>    &lt;Container maxWidth="sm"&gt;<br/>      &lt;Box my={4}&gt;<br/>        &lt;Typography variant="h4" component="h1" gutterBottom&gt;<br/>          Wine &amp; Cheese Pairing App<br/>        &lt;/Typography&gt;<br/>        &lt;WineList /&gt;<br/>        &lt;EditButtons /&gt;<br/>        &lt;Copyright /&gt;<br/>      &lt;/Box&gt;<br/>    &lt;/Container&gt;<br/>  )<br/>}<br/>export default Home</span></pre><p id="263e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，我们的布局更加集中和灵活:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nk"><img src="../Images/09169fac62509f96249b624f41b4d685.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2-3VVmBqeL0TsVi-mjQV7Q.png"/></div></div></figure><p id="f550" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">仍然不是很漂亮，但我们正在努力。</p><p id="f418" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们制作一个漂亮的列表，给每个条目添加一个复选框和垃圾桶图标。所有这些都将发生在<code class="fe lv lw lx ly b">src/WineList.jsx</code>:</p><pre class="kj kk kl km gt mx ly my mz aw na bi"><span id="3cb8" class="lz ma it ly b gy nb nc l nd ne">import React, { useState, useEffect } from 'react'<br/>import { makeStyles } from '<a class="ae ky" href="http://twitter.com/material" rel="noopener ugc nofollow" target="_blank">@material</a>-ui/core/styles';<br/>import List from '<a class="ae ky" href="http://twitter.com/material" rel="noopener ugc nofollow" target="_blank">@material</a>-ui/core/List';<br/>import ListItem from '<a class="ae ky" href="http://twitter.com/material" rel="noopener ugc nofollow" target="_blank">@material</a>-ui/core/ListItem';<br/>import ListItemIcon from '<a class="ae ky" href="http://twitter.com/material" rel="noopener ugc nofollow" target="_blank">@material</a>-ui/core/ListItemIcon';<br/>import ListItemSecondaryAction from '<a class="ae ky" href="http://twitter.com/material" rel="noopener ugc nofollow" target="_blank">@material</a>-ui/core/ListItemSecondaryAction';<br/>import ListItemText from '<a class="ae ky" href="http://twitter.com/material" rel="noopener ugc nofollow" target="_blank">@material</a>-ui/core/ListItemText';<br/>import Checkbox from '<a class="ae ky" href="http://twitter.com/material" rel="noopener ugc nofollow" target="_blank">@material</a>-ui/core/Checkbox';<br/>import IconButton from '<a class="ae ky" href="http://twitter.com/material" rel="noopener ugc nofollow" target="_blank">@material</a>-ui/core/IconButton';<br/>import DeleteIcon from '<a class="ae ky" href="http://twitter.com/material" rel="noopener ugc nofollow" target="_blank">@material</a>-ui/icons/Delete';<br/>import Box from '<a class="ae ky" href="http://twitter.com/material" rel="noopener ugc nofollow" target="_blank">@material</a>-ui/core/Box';</span><span id="b4b4" class="lz ma it ly b gy nf nc l nd ne">const useStyles = makeStyles((theme) =&gt; ({<br/>  root: {<br/>    width: '100%',<br/>    maxWidth: 360,<br/>    backgroundColor: theme.palette.background.paper,<br/>  },<br/>}));</span><span id="a157" class="lz ma it ly b gy nf nc l nd ne">const WineList = () =&gt; {<br/>  const [wineList, setWineList] = useState(null)<br/>  const [wineListError, setWineListError] = useState(false)<br/>  const [checked, setChecked] = React.useState([0])<br/>  const classes = useStyles()</span><span id="cec1" class="lz ma it ly b gy nf nc l nd ne">const handleToggle = (value) =&gt; () =&gt; {<br/>    const currentIndex = checked.indexOf(value)<br/>    const newChecked = [...checked]</span><span id="1f11" class="lz ma it ly b gy nf nc l nd ne">if (currentIndex === -1) {<br/>      newChecked.push(value)<br/>    } else {<br/>      newChecked.splice(currentIndex, 1)<br/>    }</span><span id="3001" class="lz ma it ly b gy nf nc l nd ne">setChecked(newChecked)<br/>  }</span><span id="e5ec" class="lz ma it ly b gy nf nc l nd ne">// fetch messages<br/>  useEffect(() =&gt; {<br/>      fetch('<a class="ae ky" href="https://phprest.kamradtfamily.net/api/pairing'" rel="noopener ugc nofollow" target="_blank">https://phprest.kamradtfamily.net/api/pairing'</a>)<br/>        .then((response) =&gt; {<br/>          if (!response.ok) {<br/>            return Promise.reject()<br/>          }<br/>          return response.json()<br/>        })<br/>        .then((data) =&gt; {<br/>          const pairings = data.map((pairing) =&gt; {<br/>            return {<br/>              wine: pairing.wine,<br/>              cheese: pairing.cheese,<br/>              id: `wine-pairing-${pairing.id}`,<br/>            }<br/>          })<br/>          setWineList(pairings)<br/>          setWineListError(false)<br/>        })<br/>        .catch((err) =&gt; {<br/>          setWineListError(true)<br/>          console.error(err)<br/>        })<br/>  }, [wineList, wineListError])</span><span id="da61" class="lz ma it ly b gy nf nc l nd ne">return (<br/>    &lt;Box&gt;<br/>      {wineListError &amp;&amp; &lt;p&gt;Error getting list&lt;/p&gt;}<br/>      {!wineList &amp;&amp; !wineListError &amp;&amp; &lt;p&gt;Accessing Server&lt;/p&gt;}<br/>      {wineList<br/>      &amp;&amp; (<br/>        &lt;List className={classes.root}&gt;<br/>            {wineList.map((pairing) =&gt; (<br/>              &lt;ListItem key={pairing.id}<br/>                  role={undefined}<br/>                  dense<br/>                  button onClick={handleToggle(pairing.id)}&gt;<br/>                &lt;ListItemIcon&gt;<br/>                  &lt;Checkbox<br/>                    edge="start"<br/>                    tabIndex={-1}<br/>                    disableRipple<br/>                    inputProps={{ 'aria-labelledby': pairing.id }}<br/>                  /&gt;<br/>                &lt;/ListItemIcon&gt;<br/>                &lt;ListItemText id={pairing.id}<br/>                  primary={`${pairing.wine}/${pairing.cheese}`} /&gt;<br/>                &lt;ListItemSecondaryAction&gt;<br/>                  &lt;IconButton edge="end" aria-label="delete"&gt;<br/>                    &lt;DeleteIcon /&gt;<br/>                  &lt;/IconButton&gt;<br/>                &lt;/ListItemSecondaryAction&gt;<br/>              &lt;/ListItem&gt;<br/>            ))}<br/>        &lt;/List&gt;<br/>      )}<br/>    &lt;/Box&gt;<br/>  )<br/>}</span><span id="0d16" class="lz ma it ly b gy nf nc l nd ne">export default WineList</span></pre><p id="f791" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们开始有所进展了:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nl"><img src="../Images/dac3aff9be43e98ba5181d0d70ddca44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EwmIhHVPyoqM0BwG62Lomg.png"/></div></div></figure><p id="7eed" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们对变成欢迎消息的登录消息做些什么。这些都在<code class="fe lv lw lx ly b">src/EditButtons.jsx</code>中处理:</p><pre class="kj kk kl km gt mx ly my mz aw na bi"><span id="2be1" class="lz ma it ly b gy nb nc l nd ne">import { useOktaAuth } from '<a class="ae ky" href="http://twitter.com/okta/okta-react" rel="noopener ugc nofollow" target="_blank">@okta/okta-react</a>'<br/>import React, { useState, useEffect } from 'react'<br/>import { makeStyles } from '<a class="ae ky" href="http://twitter.com/material" rel="noopener ugc nofollow" target="_blank">@material</a>-ui/core/styles';<br/>import AppBar from '<a class="ae ky" href="http://twitter.com/material" rel="noopener ugc nofollow" target="_blank">@material</a>-ui/core/AppBar';<br/>import Toolbar from '<a class="ae ky" href="http://twitter.com/material" rel="noopener ugc nofollow" target="_blank">@material</a>-ui/core/Toolbar';<br/>import Typography from '<a class="ae ky" href="http://twitter.com/material" rel="noopener ugc nofollow" target="_blank">@material</a>-ui/core/Typography';<br/>import Button from '<a class="ae ky" href="http://twitter.com/material" rel="noopener ugc nofollow" target="_blank">@material</a>-ui/core/Button';<br/>import IconButton from '<a class="ae ky" href="http://twitter.com/material" rel="noopener ugc nofollow" target="_blank">@material</a>-ui/core/IconButton';<br/>import MenuIcon from '<a class="ae ky" href="http://twitter.com/material" rel="noopener ugc nofollow" target="_blank">@material</a>-ui/icons/Menu';</span><span id="148b" class="lz ma it ly b gy nf nc l nd ne">const useStyles = makeStyles((theme) =&gt; ({<br/>  root: {<br/>    flexGrow: 1,<br/>  },<br/>  menuButton: {<br/>    marginRight: theme.spacing(2),<br/>  },<br/>  title: {<br/>    flexGrow: 1,<br/>  },<br/>}));</span><span id="e3c2" class="lz ma it ly b gy nf nc l nd ne">const EditButtons = () =&gt; {<br/>  const { authState, oktaAuth } = useOktaAuth()<br/>  const [userInfo, setUserInfo] = useState(null)<br/>  const classes = useStyles();</span><span id="c607" class="lz ma it ly b gy nf nc l nd ne">useEffect(() =&gt; {<br/>    if (!authState.isAuthenticated) {<br/>      setUserInfo(null);<br/>    } else {<br/>      oktaAuth.getUser().then((info) =&gt; {<br/>        setUserInfo(info)<br/>      })<br/>    }<br/>  }, [authState, oktaAuth]) // Update if authState changes</span><span id="7ac9" class="lz ma it ly b gy nf nc l nd ne">const login = async () =&gt; {<br/>    oktaAuth.signInWithRedirect()<br/>  }</span><span id="dadd" class="lz ma it ly b gy nf nc l nd ne">if (authState.isPending) {<br/>    return (<br/>      &lt;div&gt;Loading...&lt;/div&gt;<br/>    )<br/>  }</span><span id="dd85" class="lz ma it ly b gy nf nc l nd ne">return (<br/>    &lt;AppBar position="static" style={{ background: '#55FFDD' }}&gt;<br/>      &lt;Toolbar&gt;<br/>        &lt;IconButton edge="start" className={classes.menuButton}<br/>            color="inherit"<br/>            aria-label="menu"&gt;<br/>          &lt;MenuIcon /&gt;<br/>        &lt;/IconButton&gt;</span><span id="020d" class="lz ma it ly b gy nf nc l nd ne">{ authState.isAuthenticated &amp;&amp; !userInfo<br/>          &amp;&amp; &lt;Typography variant="h6"<br/>               className={classes.title}&gt;<br/>               Loading user information...<br/>             &lt;/Typography&gt;}<br/>        { authState.isAuthenticated &amp;&amp; userInfo<br/>          &amp;&amp; &lt;Typography variant="h6"<br/>              className={classes.title}&gt;<br/>              Welcome back, {userInfo.name}!<br/>            &lt;/Typography&gt;}<br/>        { !authState.isAuthenticated &amp;&amp;<br/>          &lt;Button color="inherit"<br/>              onClick={login}&gt;<br/>            Login<br/>          &lt;/Button&gt;}<br/>      &lt;/Toolbar&gt;<br/>    &lt;/AppBar&gt;<br/>  )<br/>}</span><span id="f8b1" class="lz ma it ly b gy nf nc l nd ne">export default EditButtons</span></pre><p id="a2ab" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我否决了AppBar风格的背景颜色，因为我对任何类似脸书蓝的东西过敏(我肯定你们中的一些人对我选择的绿色感到不满)。我们将在<code class="fe lv lw lx ly b">src/Home.jsx</code>中将它移到顶部。这是我们现在所拥有的:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nm"><img src="../Images/7ea01e3d597df5d34eeb4ef2e45a2590.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fiMJ5HtRXP7qR9s5G8voyg.png"/></div></div></figure><p id="c0a7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它太白了，让我们给它一个有趣的背景。在我最初的应用程序中，我使用了一张褪色的照片。我会重新利用它。我将采用传统方式，只是在<code class="fe lv lw lx ly b">public/index.html</code>上添加一个<code class="fe lv lw lx ly b">&lt;img&gt;</code>标签，并增加一些样式:</p><pre class="kj kk kl km gt mx ly my mz aw na bi"><span id="69c9" class="lz ma it ly b gy nb nc l nd ne">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;meta charset="utf-8"&gt;<br/>    &lt;meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"&gt;<br/>    &lt;meta name="theme-color" content="#000000"&gt;<br/>    &lt;title&gt;Wine/Cheese Pairing&lt;/title&gt;<br/>    &lt;link rel="manifest" href="%PUBLIC_URL%/manifest.json"&gt;<br/>    &lt;link rel="shortcut icon" href="%PUBLIC_URL%/favicon.png"&gt;<br/>    &lt;link rel="stylesheet" href="<a class="ae ky" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&amp;display=swap" rel="noopener ugc nofollow" target="_blank">https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&amp;display=swap</a>" /&gt;<br/>    &lt;link rel="stylesheet" href="<a class="ae ky" href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="noopener ugc nofollow" target="_blank">https://fonts.googleapis.com/icon?family=Material+Icons</a>" /&gt;<br/>    &lt;style type="text/css"&gt;<br/>       #backgroundimage<br/>       {<br/>          height: auto;<br/>          left: 0;<br/>          margin: 0;<br/>          min-height: 100%;<br/>          min-width: 674px;<br/>          padding: 0;<br/>          position: fixed;<br/>          top: 0;<br/>          width: 100%;<br/>          z-index: -1;<br/>       }<br/>     &lt;/style&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;img id="backgroundimage" src='img/nos-small.JPG' border="0" alt=""&gt;<br/>    &lt;noscript&gt;<br/>      You need to enable JavaScript to run this app.<br/>    &lt;/noscript&gt;<br/>    &lt;div id="root"&gt;&lt;/div&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="ad8f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我没有添加替代文本，因为这只是为了美观，只会给需要替代文本的人增加页面的噪音。评论并告诉我，如果你认为我错了，我很乐意接受建议。</p><p id="cd31" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是最后的结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nn"><img src="../Images/7f60e6e533e78d79b476a1e60a8fd1a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yzZ6flWbsfM8zDYRCqisGg.png"/></div></div></figure><p id="8127" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们还没有完成，我们仍然需要连接添加/更新/删除功能，并将其发布到web上。但是现在，这已经足够了。我们将在本系列的第2部分中讨论其余的内容。</p><p id="9fa2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是本文附带的代码:</p><div class="no np gp gr nq nr"><a href="https://github.com/rkamradt/winecheeseui/tree/v0.2" rel="noopener  ugc nofollow" target="_blank"><div class="ns ab fo"><div class="nt ab nu cl cj nv"><h2 class="bd iu gy z fp nw fr fs nx fu fw is bi translated">rkamradt/wineceseui</h2><div class="ny l"><h3 class="bd b gy z fp nw fr fs nx fu fw dk translated">葡萄酒和奶酪配对应用的react UI dissolve GitHub是超过5000万开发人员的家园，他们共同努力…</h3></div><div class="nz l"><p class="bd b dl z fp nw fr fs nx fu fw dk translated">github.com</p></div></div><div class="oa l"><div class="ob l oc od oe oa of ks nr"/></div></div></a></div><p id="cb44" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">参考的其他文章:</p><div class="no np gp gr nq nr"><a rel="noopener  ugc nofollow" target="_blank" href="/how-to-create-a-python-api-using-flask-connexion-4f3fc77e7f6e"><div class="ns ab fo"><div class="nt ab nu cl cj nv"><h2 class="bd iu gy z fp nw fr fs nx fu fw is bi translated">如何使用Flask/connection创建Python API</h2><div class="ny l"><h3 class="bd b gy z fp nw fr fs nx fu fw dk translated">让经过认证的后端在云中运行</h3></div><div class="nz l"><p class="bd b dl z fp nw fr fs nx fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="oa l"><div class="og l oc od oe oa of ks nr"/></div></div></a></div><div class="no np gp gr nq nr"><a rel="noopener  ugc nofollow" target="_blank" href="/microservices-with-php-and-lumen-d9af0b915a71"><div class="ns ab fo"><div class="nt ab nu cl cj nv"><h2 class="bd iu gy z fp nw fr fs nx fu fw is bi translated">使用PHP和Lumen的微服务</h2><div class="ny l"><h3 class="bd b gy z fp nw fr fs nx fu fw dk translated">与PHP的过去决裂，而不破坏现有的应用程序</h3></div><div class="nz l"><p class="bd b dl z fp nw fr fs nx fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="oa l"><div class="oh l oc od oe oa of ks nr"/></div></div></a></div><div class="no np gp gr nq nr"><a rel="noopener  ugc nofollow" target="_blank" href="/modern-php-df3d3bf343f8"><div class="ns ab fo"><div class="nt ab nu cl cj nv"><h2 class="bd iu gy z fp nw fr fs nx fu fw is bi translated">现代PHP</h2><div class="ny l"><h3 class="bd b gy z fp nw fr fs nx fu fw dk translated">使用Upstart上最需要的项目语言之一开始你的自由职业生涯。</h3></div><div class="nz l"><p class="bd b dl z fp nw fr fs nx fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="oa l"><div class="oi l oc od oe oa of ks nr"/></div></div></a></div></div></div>    
</body>
</html>