<html>
<head>
<title>Compose, Pipe, and Curry from Scratch</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ä»å¤´å¼€å§‹ä½œæ›²ã€å¹ç¬›å­å’Œå’–å–±</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://levelup.gitconnected.com/compose-pipe-and-curry-from-scratch-99b417608d57?source=collection_archive---------1-----------------------#2020-11-13">https://levelup.gitconnected.com/compose-pipe-and-curry-from-scratch-99b417608d57?source=collection_archive---------1-----------------------#2020-11-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/e311cb91e9443b3ad05fafb1bd884f58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8jMFzunn7XGSehe9FHYBKw.jpeg"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated"><a class="ae jd" href="https://unsplash.com/photos/ImcUkZ72oUs" rel="noopener ugc nofollow" target="_blank">https://unsplash.com/photos/ImcUkZ72oUs</a></figcaption></figure><div class=""/><p id="10c7" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æœ‰å¾ˆå¤šæ–‡ç« è§£é‡Šä»€ä¹ˆæ˜¯çƒ¹é¥ªå’Œä½œæ›²ã€‚ç”šè‡³è¿˜æœ‰æˆ‘å†™çš„<a class="ae jd" href="https://medium.com/@rolandpeelen/function-composition-currying-in-real-life-e74c86302205" rel="noopener">ä¸€ä¸ª</a>ã€‚</p><p id="a713" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ä½†æ˜¯ï¼Œè™½ç„¶æˆ‘è§‰å¾—æˆ‘çš„æ–‡ç« å¾ˆå…¨é¢ï¼Œä½†æˆ‘è®¤ä¸ºä»æœ‰ä¸€äº›è§£é‡Šçš„ä½™åœ°ã€‚å½“çœ‹ç€å’–å–±å’Œç»„æˆï¼Œä»¥åŠå®é™…çš„å®ç°ï¼Œä»–ä»¬ä¼¼ä¹å¾ˆç®€æ´ï¼Œå¯èƒ½å¾ˆéš¾ç†è§£åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆã€‚æœ¬æ–‡çš„ç›®çš„æ˜¯å»ºç«‹ä¸€äº›ç›´è§‰ï¼Œä»å¤´å¼€å§‹åˆ›å»ºä¸€ä¸ª<code class="fe lb lc ld le b">compose</code>ã€<code class="fe lb lc ld le b">pipe</code>ã€<strong class="kf jh">ã€</strong>å’Œ<code class="fe lb lc ld le b">curry</code>å‡½æ•°ã€‚ä»æœ€åŸºæœ¬çš„ç‰ˆæœ¬å¼€å§‹ï¼Œåˆ°æœ€ç®€æ´/å¤æ‚ä½†ä¹Ÿæœ€çµæ´»çš„ç‰ˆæœ¬ç»“æŸã€‚</p><h1 id="f754" class="lf lg jg bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">å’–å–±</h1><blockquote class="md me mf"><p id="8a00" class="kd ke mg kf b kg kh ki kj kk kl km kn mh kp kq kr mi kt ku kv mj kx ky kz la ij bi translated">è®©å‡½æ•°ä¸€æ¬¡æ¥å—ä¸€ä¸ªå‚æ•°çš„è¿‡ç¨‹ã€‚</p></blockquote><p id="b9f1" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">è®©æˆ‘ä»¬çœ‹ä¸€äº›ä»£ç ã€‚</p><pre class="mk ml mm mn gt mo le mp mq aw mr bi"><span id="10ae" class="ms lg jg le b gy mt mu l mv mw">// Uncurried<br/>const add = (x, y) =&gt; x + y;<br/>[1,2,3].map(x =&gt; add(x, 4)); // [5, 6, 7]</span><span id="5f10" class="ms lg jg le b gy mx mu l mv mw">// Curried<br/>const add = x =&gt; y =&gt; x + y;<br/>[1,2,3].map(add(4)); // [5, 6, 7]</span></pre><p id="a3a3" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">å¦‚æ‚¨æ‰€è§ï¼Œè¿™æœ‰ä¸€äº›ä¼˜ç‚¹ï¼Œä¸é‚£ä¹ˆå†—é•¿ã€‚ç„¶è€Œï¼Œä»¥è¿™ç§æ–¹å¼ç¼–å†™å‡½æ•°æ˜¯ä»¤äººè®¨åŒçš„ï¼Œå¹¶ä¸”ä¸æ˜¯ç‰¹åˆ«çµæ´»(ç›¸å½“æç«¯çš„ä¾‹å­)ï¼›</p><pre class="mk ml mm mn gt mo le mp mq aw mr bi"><span id="adcb" class="ms lg jg le b gy mt mu l mv mw">// Curried<br/>const add5args = a =&gt; b =&gt; c =&gt; d =&gt; e =&gt; a + b + c + d + e;<br/>add5args(1)(2)(3)(4)(5); // 15</span><span id="3013" class="ms lg jg le b gy mx mu l mv mw">// Possible uncurried variant<br/>const add5args = (a,b,c,d,e) =&gt; a + b + c + d + e;<br/>add5args(1, 2, 3, 4, 5); // 15</span></pre><p id="0b13" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æœ‰ä¸€ä¸ªå‡½æ•°ä¼šå°†æˆ‘ä»¬çš„ç¬¬äºŒä¸ªå˜é‡è½¬æ¢æˆä¸€ä¸ªå¯ä»¥ä¸€æ¬¡æ¥å—ä¸€ä¸ªå˜é‡çš„å˜é‡ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨ä¾‹å¦‚<code class="fe lb lc ld le b">Array.map</code>ä¸­ä½¿ç”¨å®ƒã€‚</p><h1 id="843a" class="lf lg jg bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">åˆæˆå’Œç®¡é“åŠŸèƒ½(0çº§)</h1><blockquote class="md me mf"><p id="9536" class="kd ke mg kf b kg kh ki kj kk kl km kn mh kp kq kr mi kt ku kv mj kx ky kz la ij bi translated">å°†å¤šä¸ªå‡½æ•°é“¾æ¥åœ¨ä¸€èµ·ä»¥åˆ›å»ºä¸€ä¸ªæ–°å‡½æ•°è¿‡ç¨‹ã€‚</p></blockquote><p id="f116" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">è®©æˆ‘ä»¬çœ‹çœ‹è¿™æ˜¯å¦‚ä½•å·¥ä½œçš„ä¸€äº›ä»£ç ã€‚</p><pre class="mk ml mm mn gt mo le mp mq aw mr bi"><span id="796f" class="ms lg jg le b gy mt mu l mv mw">const add5 = x =&gt; x + 5;<br/>const multiply6 = x =&gt; x * 6;</span><span id="6a4c" class="ms lg jg le b gy mx mu l mv mw">const multiply6Add5 = compose(add, multiply);</span><span id="293d" class="ms lg jg le b gy mx mu l mv mw">multiply6Add5(2); // 17 ğŸ˜</span></pre><p id="5653" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æ‰€ä»¥ä»<code class="fe lb lc ld le b">add5</code>å’Œ<code class="fe lb lc ld le b">multiply6</code>ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œå®ƒæ˜¯ä¸¤è€…çš„<strong class="kf jh">ç»„åˆ</strong>ã€‚ç»™äº†æˆ‘ä»¬ä¸€ä¸ªæ—¢èƒ½ä¹˜ä»¥6åˆèƒ½åŠ ä¸Š5çš„æ–°å‡½æ•°ã€‚ä½†æ˜¯ä¸ºä»€ä¹ˆè¿™ä¸ªæ˜¯åçš„å‘¢ï¼Ÿ</p><p id="2ea9" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">å‡½æ•°åˆæˆçš„æ¦‚å¿µæ¥æºäºæ•°å­¦ã€‚åœ¨åŠ ã€ä¹˜ã€é™¤ä¹‹ç±»çš„ä¸œè¥¿æ—è¾¹ï¼Œæœ‰ä¸€ä¸ª<code class="fe lb lc ld le b">composition</code>æ“ä½œç¬¦ã€‚å®ƒæ˜¯ä¸€ä¸ªç‚¹ï¼Œä¸Šé¢æœ‰ä¸€ä¸ªæ´ã€‚</p><pre class="mk ml mm mn gt mo le mp mq aw mr bi"><span id="02ab" class="ms lg jg le b gy mt mu l mv mw">(f Â° g)(x) = f(g(x));</span></pre><p id="68ee" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">è¿™æ ·è¯»çš„è¯å°±æ˜¯xçš„gåçš„<strong class="kf jh">f</strong>å’Œå–<code class="fe lb lc ld le b">x</code>ï¼Œåº”ç”¨åˆ°<code class="fe lb lc ld le b">g</code>ï¼Œå†åº”ç”¨åˆ°<code class="fe lb lc ld le b">f</code>æ˜¯ä¸€æ ·çš„ã€‚æˆ‘ä»¬åœ¨è¿™é‡Œçœ‹åˆ°çš„æ˜¯ï¼Œåˆæˆä»¥ç›¸åçš„é¡ºåºè¿›è¡Œã€‚ç¬¬äºŒä¸ªåŠŸèƒ½(<code class="fe lb lc ld le b">g</code>)åœ¨ç¬¬ä¸€ä¸ªåŠŸèƒ½ä¹‹å‰åº”ç”¨ã€‚è¿™ä¹Ÿæ˜¯å‡½æ•°ç»„åˆåœ¨ç¼–ç¨‹ä¸­è½åçš„åŸå› ã€‚åœ¨ä»£ç ä¸­ï¼Œæˆ‘ä»¬å¼•å…¥äº†<code class="fe lb lc ld le b">pipe</code>å‡½æ•°çš„æ¦‚å¿µï¼Œè¯¥å‡½æ•°åè½¬åº”ç”¨ç¨‹åºï¼Œä½¿å…¶æˆä¸ºæˆ‘ä»¬ç›´è§‰è®¤ä¸ºçš„æ ·å­ã€‚</p><p id="478e" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">å› æ­¤ï¼Œè®©æˆ‘ä»¬ç¼–å†™è‡ªå·±çš„ç»„åˆå’Œç®¡é“å‡½æ•°ã€‚</p><pre class="mk ml mm mn gt mo le mp mq aw mr bi"><span id="2c5c" class="ms lg jg le b gy mt mu l mv mw">// Uncurried<br/>const composeU = (f, g, x) =&gt; f(g(x));<br/>const pipeU = (f, g, x) =&gt; g(f(x));</span><span id="18a4" class="ms lg jg le b gy mx mu l mv mw">// Curried<br/>const compose = f =&gt; g =&gt; x =&gt; f(g(x));<br/>const pipe = f =&gt; g =&gt; x =&gt; g(f(x));</span><span id="a49d" class="ms lg jg le b gy mx mu l mv mw">// Or reverse arguments for the pipe function<br/>const pipe = f =&gt; g =&gt; x =&gt; compose(g)(f)(x);</span></pre><p id="882c" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">å¦‚ä½ æ‰€è§ï¼Œè¿™ä¸æ•°å­¦ç¬¦å·éå¸¸ç›¸ä¼¼ã€‚æˆ‘ç”¨ä¸€ä¸ª<code class="fe lb lc ld le b">U</code>åœ¨åé¢å›ºå®šäº†æœªç»‘å®šçš„å‡½æ•°ï¼Œè¿™æ ·æˆ‘ä»¬ä»¥åå¯ä»¥åŒºåˆ†å®ƒä»¬ã€‚è®©æˆ‘ä»¬è¯•ç”¨ä¸€ä¸‹ã€‚</p><pre class="mk ml mm mn gt mo le mp mq aw mr bi"><span id="e493" class="ms lg jg le b gy mt mu l mv mw">const add5 = x =&gt; x + 5;<br/>const multiply6 = x =&gt; x * 6;</span><span id="1fc5" class="ms lg jg le b gy mx mu l mv mw">// Uncurried<br/>composeU(add, multiply, 2); // 17<br/>pipeU(add, multiply, 2); // 42</span><span id="c607" class="ms lg jg le b gy mx mu l mv mw">// Curried<br/>const multiply6Add5 = compose(add)(multiply);<br/>const add5Multiply6 = pipe(add)(multiply);</span><span id="092c" class="ms lg jg le b gy mx mu l mv mw">multiply6Add5(2); // 17<br/>add5Multiply6(2); // 42</span><span id="9ba2" class="ms lg jg le b gy mx mu l mv mw">[1,2,3].map(multiply6Add5) // [11, 17, 23]</span></pre><p id="42f2" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æœ‰æ—¶å€™ï¼Œèƒ½å¤Ÿå°†<a class="ae jd" href="https://en.wikipedia.org/wiki/Partial_application#:~:text=In%20computer%20science%2C%20partial%20application,producing%20a%20function%20of%20type%20." rel="noopener ugc nofollow" target="_blank">çš„ä¸¤ä¸ªå‡½æ•°éƒ¨åˆ†åº”ç”¨åˆ°</a>çš„ä½œå“ä¸­çœŸçš„å¾ˆå¥½ï¼Œè¿™æ ·ä»¥åå°±å¯ä»¥åœ¨<code class="fe lb lc ld le b">map</code>ä¸­ä½¿ç”¨å®ƒä»¬äº†ã€‚ç„¶è€Œï¼Œæœ‰æ—¶å€™ï¼Œèƒ½å¤Ÿåœ¨å®ƒä»¬çš„æœªå—å½±å“çš„å˜ä½“ä¸­ä½¿ç”¨å®ƒä»¬ä¹Ÿæ˜¯å¾ˆå¥½çš„ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¸Œæœ›æ‹¥æœ‰ä¸¤ä¸ªä¸–ç•Œçš„ä¼˜ç‚¹ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸æƒ³å†™ä¸¤æ¬¡å‡½æ•°ã€‚æ‰€ä»¥æˆ‘ä»¬æ¥åšä¸ªå¸®æ‰‹å§ã€‚</p><h1 id="1f43" class="lf lg jg bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">å’–å–±åŠŸèƒ½(0çº§)</h1><p id="a6fc" class="pw-post-body-paragraph kd ke jg kf b kg my ki kj kk mz km kn ko na kq kr ks nb ku kv kw nc ky kz la ij bi translated">æˆ‘ä»¬å°†ç›´æ¥è¿›å…¥æˆ‘ä»¬çš„åŸºæœ¬å’–å–±åŠŸèƒ½ã€‚</p><pre class="mk ml mm mn gt mo le mp mq aw mr bi"><span id="3621" class="ms lg jg le b gy mt mu l mv mw">const curry = fn =&gt; x =&gt; y =&gt; fn(x, y);</span><span id="946f" class="ms lg jg le b gy mx mu l mv mw">const addU = (x, y) =&gt; x + y;<br/>const add = curry(addU);</span><span id="80d0" class="ms lg jg le b gy mx mu l mv mw">addU(4, 2); // 6<br/>add(4)(2); // 6</span><span id="acd0" class="ms lg jg le b gy mx mu l mv mw">const add4 = add(4);<br/>add4(10) // 14</span></pre><p id="fba7" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æˆ‘ä»¬çš„curryå‡½æ•°åªæ˜¯æ¥å—å¦ä¸€ä¸ªå‡½æ•°ï¼Œç„¶åæ¥å—ä¸€äº›å‚æ•°ï¼Œå¹¶å°†å®ƒä»¬åº”ç”¨åˆ°å‚æ•°ä¸­ã€‚æ‰€ä»¥ç°åœ¨æˆ‘ä»¬åªéœ€è¦å®šä¹‰æˆ‘ä»¬çš„addUå‡½æ•°ï¼Œç„¶åæˆ‘ä»¬å¯ä»¥æ ¹æ®å¦ä¸€ä¸ªå‡½æ•°æ¥å®šä¹‰æˆ‘ä»¬çš„curriedç‰ˆæœ¬ã€‚ä¸é”™ï¼</p><h2 id="4708" class="ms lg jg bd lh nd ne dn ll nf ng dp lp ko nh ni lt ks nj nk lx kw nl nm mb nn bi translated">ä½†æ˜¯ç­‰ç­‰â€¦</h2><p id="a7dc" class="pw-post-body-paragraph kd ke jg kf b kg my ki kj kk mz km kn ko na kq kr ks nb ku kv kw nc ky kz la ij bi translated">å¦‚æœæˆ‘ä»¬æƒ³è¦ç»„åˆä¸¤ä¸ªä»¥ä¸Šçš„å‡½æ•°å‘¢ï¼Ÿè¿˜æ˜¯åº“é‡Œä¸€ä¸ªæœ‰ä¸‰ä¸ªå‚æ•°çš„å‡½æ•°ï¼Ÿ</p><h1 id="b95e" class="lf lg jg bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">æ’°å†™åŠŸèƒ½(ç¬¬1çº§)</h1><p id="cf21" class="pw-post-body-paragraph kd ke jg kf b kg my ki kj kk mz km kn ko na kq kr ks nb ku kv kw nc ky kz la ij bi translated">å†è¡¥å……å‡ ä¸ªç‰ˆæœ¬å§ã€‚</p><pre class="mk ml mm mn gt mo le mp mq aw mr bi"><span id="b492" class="ms lg jg le b gy mt mu l mv mw">const compose = f =&gt; g =&gt; x =&gt; f(g(x));<br/>const compose3 = f =&gt; g =&gt; h =&gt; x =&gt; f(g(h(x)));<br/>const compose4 = f =&gt; g =&gt; h =&gt; i =&gt; x =&gt; f(g(h(i(x))));<br/>// â€¦</span></pre><p id="dfc9" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">è™½ç„¶è¿™å¯è¡Œï¼Œä½†å¹¶ä¸ç†æƒ³ã€‚è®©æˆ‘ä»¬ä½¿ç”¨<a class="ae jd" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/rest_parameter" rel="noopener ugc nofollow" target="_blank"> restè¿ç®—ç¬¦</a>ã€‚</p><pre class="mk ml mm mn gt mo le mp mq aw mr bi"><span id="f71f" class="ms lg jg le b gy mt mu l mv mw">const composeU = (...fns) =&gt; x =&gt; {<br/> let val = x;<br/>   for (const fn of fns.reverse()) {<br/>     val = fn(val)<br/>   }<br/> return val;<br/>};</span><span id="f90a" class="ms lg jg le b gy mx mu l mv mw">const add3 = x =&gt; x + 3;<br/>const add4 = x =&gt; x + 4;<br/>const add5 = x =&gt; x + 5;</span><span id="2644" class="ms lg jg le b gy mx mu l mv mw">const add12 = compose(add3, add4, add5);</span><span id="bc5f" class="ms lg jg le b gy mx mu l mv mw">add12(2); // 14 ğŸ˜</span></pre><p id="2016" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æ‰€ä»¥è¿™å¤ªæ£’äº†ï¼æˆ‘ä»¬å–æˆ‘ä»¬çš„å‡½æ•°ï¼Œä»¥ç›¸åçš„é¡ºåºä¸€ä¸ªæ¥ä¸€ä¸ªåœ°æ£€æŸ¥å®ƒä»¬ï¼Œå¹¶å°†å‡½æ•°åº”ç”¨åˆ°æˆ‘ä»¬æƒ³è¦ä½¿ç”¨çš„å€¼ä¸Šã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬çš„å‡½æ•°æ˜¯éå¸¸å¿…è¦çš„ï¼Œæˆ‘ä»¬åœ¨åšä»»ä½•æ“ä½œä¹‹å‰éƒ½è¦åè½¬æ•´ä¸ªæ•°ç»„â€¦ä¹Ÿè®¸æˆ‘ä»¬å¯ä»¥åšäº›ä»€ä¹ˆã€‚ä»æ¦‚å¿µä¸Šè®²ï¼Œæˆ‘ä»¬æ¥å—ä¸€ä¸ªç±»ä¼¼æ•°ç»„çš„ä¸œè¥¿ï¼Œä¸€ä¸ªæ¥ä¸€ä¸ªåœ°éå†å®ƒï¼ŒæŠŠå®ƒç®€åŒ–æˆä¸€ä¸ªå€¼ã€‚å—¯â€¦â€¦<code class="fe lb lc ld le b">reduce</code>â€¦â€¦</p><pre class="mk ml mm mn gt mo le mp mq aw mr bi"><span id="c40e" class="ms lg jg le b gy mt mu l mv mw">const compose = (...fns) =&gt; x =&gt; fns.reduceRight((acc, fn) =&gt; fn(acc), x);</span></pre><p id="ce60" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">é‚£æ›´å¥½ã€‚æˆ‘ä»¬ä»å³åˆ°å·¦å‡å°‘æ•°ç»„ï¼Œå°†æ¯ä¸ªå‡½æ•°åº”ç”¨åˆ°ç´¯åŠ å™¨ï¼Œä»è¾“å…¥å€¼å¼€å§‹ã€‚ä½†æ˜¯ç°åœ¨æœ‰ä¸€ä¸ªé—®é¢˜â€¦</p><pre class="mk ml mm mn gt mo le mp mq aw mr bi"><span id="1206" class="ms lg jg le b gy mt mu l mv mw">const composeU = (...fns) =&gt; x =&gt; fns.reduceRight((acc, fn) =&gt; fn(acc), x);<br/>const compose = curry(composeU);</span><span id="bb86" class="ms lg jg le b gy mx mu l mv mw">const add3 = x =&gt; x + 3;<br/>const add4 = x =&gt; x + 4;<br/>const add5 = x =&gt; x + 5;</span><span id="c558" class="ms lg jg le b gy mx mu l mv mw">const add12 = compose(add3, add4, add5);</span><span id="788c" class="ms lg jg le b gy mx mu l mv mw">add12(2); // [Function] ğŸ˜¥</span></pre><p id="575b" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ä¼¼ä¹æˆ‘ä»¬çš„å’–å–±åŠŸèƒ½åäº†ï¼Œæˆ‘ä»¬ä¸èƒ½ä½¿ç”¨å®ƒä¸ç»„æˆâ€¦</p><h1 id="a44f" class="lf lg jg bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">å’–å–±åŠŸèƒ½(1çº§)</h1><p id="adb1" class="pw-post-body-paragraph kd ke jg kf b kg my ki kj kk mz km kn ko na kq kr ks nb ku kv kw nc ky kz la ij bi translated">å†è¡¥å……å‡ ä¸ªç‰ˆæœ¬å§ã€‚</p><pre class="mk ml mm mn gt mo le mp mq aw mr bi"><span id="c257" class="ms lg jg le b gy mt mu l mv mw">const curry = fn =&gt; x =&gt; y =&gt; fn(x, y);<br/>const curry3 = fn =&gt; x =&gt; y =&gt; z =&gt; fn(x, y, z);<br/>const curry4 = fn =&gt; x =&gt; y =&gt; =&gt; z =&gt; a =&gt; fn(x, y, z, a);<br/>// â€¦</span></pre><p id="bad1" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">è™½ç„¶è¿™ä¹Ÿå¯è¡Œï¼Œä½†ä¹Ÿè®¸æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨restå‚æ•°åšäº›ä»€ä¹ˆâ€¦</p><pre class="mk ml mm mn gt mo le mp mq aw mr bi"><span id="6966" class="ms lg jg le b gy mt mu l mv mw">const curry = fn =&gt; {<br/> return function curried (...args) {<br/>   if(args.length &gt;= fn.length) {<br/>     return fn.apply(null, args);<br/>   }<br/>   return curried.bind(null, ...args);<br/> };<br/>};</span></pre><p id="9872" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">è¿™åˆ°åº•æ˜¯æ€ä¹ˆå›äº‹ï¼Ÿæˆ‘ä»¬çš„curryå‡½æ•°éœ€è¦ä¸€ä¸ªå‡½æ•°ã€‚æ£€æŸ¥â€¦ä½†æ˜¯ç„¶åâ€¦ä»æ¦‚å¿µä¸Šæ¥è¯´ï¼Œå³ä½¿å®ƒä¸æ˜¯è¿™æ ·å®ç°çš„ï¼Œä¹Ÿè¦æŠŠå®ƒæƒ³è±¡æˆä¸€ä¸ªç¼“å†²åŒºã€‚æˆ‘ä»¬çš„<code class="fe lb lc ld le b">â€¦args</code>æ˜¯æ ¹æ®å®ƒä»¬çš„<code class="fe lb lc ld le b">length</code>(æˆ‘ä»¬å·²ç»æä¾›çš„æ•°é‡)æ¥æ£€æŸ¥çš„ï¼Œå¦‚æœæˆ‘ä»¬å·²ç»è¾¾åˆ°äº†æˆ‘ä»¬éœ€è¦çš„æ•°é‡(æˆ‘ä»¬å¯ä»¥é€šè¿‡æ£€æŸ¥<code class="fe lb lc ld le b">fn</code>çš„å‚æ•°æ•°é‡â€”æˆ–è€…<a class="ae jd" href="https://en.wikipedia.org/wiki/Arity#:~:text=Arity%20(%2F%CB%88%C3%A6r%C9%AAt,also%20called%20adicity%20and%20degree." rel="noopener ugc nofollow" target="_blank"> arity </a> â€”æ¥æ£€æŸ¥)ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°†æ‰€æœ‰çš„å‚æ•°åº”ç”¨åˆ°æœ€åˆæä¾›çš„å‡½æ•°(<code class="fe lb lc ld le b">fn</code>)å¹¶è¿”å›å®ƒã€‚å¦‚æœæ²¡æœ‰ï¼Œè¿”å›å†…éƒ¨å‡½æ•°ï¼Œä½†æ˜¯å°†æˆ‘ä»¬å·²ç»æ”¶åˆ°çš„å‚æ•°ç»‘å®šåˆ°å®ƒ(å‡†å¤‡æ¥æ”¶æ›´å¤š)ã€‚</p><p id="002b" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æ¢å¥è¯è¯´ï¼Œé€’å½’åœ°è¿”å›<code class="fe lb lc ld le b">curried</code>ï¼Œç›´åˆ°æˆ‘ä»¬é‡åˆ°æœ€åˆæä¾›çš„å‡½æ•°çš„arityã€‚</p><p id="894e" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">è¿™é‡Œæœ‰ä¸€ä¸ªæ¼‚äº®ç®€æ´çš„es6ç­‰ä»·ç‰©ã€‚</p><pre class="mk ml mm mn gt mo le mp mq aw mr bi"><span id="8089" class="ms lg jg le b gy mt mu l mv mw">const curry = fn =&gt; {<br/> const curried = (...args) =&gt;<br/>   args.length &gt;= fn.length<br/>     ? fn.apply(null, args)<br/>     : curried.bind(null, ...args);<br/> return curried;<br/>};</span></pre><p id="7cc7" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">è®©æˆ‘ä»¬ç”¨ä¹‹å‰çš„<code class="fe lb lc ld le b">add5args</code>å‡½æ•°æ¥çœ‹çœ‹å®ƒçš„ä½œç”¨ã€‚</p><pre class="mk ml mm mn gt mo le mp mq aw mr bi"><span id="43ae" class="ms lg jg le b gy mt mu l mv mw">const add5argsU = (a, b, c, d, e) =&gt; a + b + c + d + e;<br/>const add5args = curry(add5argsU);</span><span id="6b37" class="ms lg jg le b gy mx mu l mv mw">const a = add5args(1); // [Function] â€” 4 arguments left<br/>const b = a(2); // [Function] â€” 3 arguments left<br/>const c = b(3); // [Function] â€” 2 arguments left<br/>const d = c(4); // [Function] â€” 1 arguments left</span><span id="4c1c" class="ms lg jg le b gy mx mu l mv mw">a(2,3,4,5) // 15<br/>b(3,4,5) // 15<br/>c(4,5) // 15<br/>d(5); // 15</span></pre><p id="67c1" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">å¤ªæ£’äº†ï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥ä¸€æ¬¡æä¾›æ‰€æœ‰çš„å‚æ•°ï¼Œæˆ–è€…ä¸€åŠï¼Œæˆ–è€…åªæœ‰ä¸€ä¸ªï¼Œå¹¶ç»§ç»­æ·»åŠ ï¼Œç›´åˆ°æˆ‘ä»¬æœ‰äº†å®Œæ•´çš„å‡½æ•°ã€‚ä¸é”™ï¼è®©æˆ‘ä»¬çœ‹çœ‹æ˜¯å¦å¯ä»¥åœ¨æˆ‘ä»¬çš„composeå‡½æ•°ä¸­ä½¿ç”¨å®ƒã€‚</p><pre class="mk ml mm mn gt mo le mp mq aw mr bi"><span id="376b" class="ms lg jg le b gy mt mu l mv mw">// From earlier<br/>const composeU = (...fns) =&gt; x =&gt; fns.reduceRight((acc, fn) =&gt; fn(acc), x);<br/>const compose = curry(composeU);</span><span id="deae" class="ms lg jg le b gy mx mu l mv mw">const add1 = x =&gt; x + 1;<br/>const add2 = x =&gt; x + 2;<br/>const add3 = x =&gt; x + 3;<br/>const add4 = x =&gt; x + 4;</span><span id="06c8" class="ms lg jg le b gy mx mu l mv mw">const add5 = compose(add2, add3);<br/>const add7 = compose(add3, add4);<br/>const add11 = compose(add4, add4, add3);</span><span id="3291" class="ms lg jg le b gy mx mu l mv mw">add5(4); // 9<br/>add7(4); // 11<br/>add11(4); // 15</span><span id="aca0" class="ms lg jg le b gy mx mu l mv mw">const add12 = compose(add5, add7); // Already composed functions ğŸ˜<br/>add12(4); // 16</span></pre><p id="6f08" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ä¸é”™ï¼æ— è®ºæˆ‘ä»¬æä¾›å¤šå°‘å‚æ•°ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥æŒ‰ç…§è‡ªå·±å–œæ¬¢çš„æ–¹å¼ç»„åˆå‡½æ•°ï¼Œå¹¶åœ¨ä»¥åä½¿ç”¨å®ƒä»¬ã€‚æˆ‘ä»¬ç”šè‡³å¯ä»¥ç”¨å¦ä¸€ç¯‡ä½œæ–‡æ¥å®šä¹‰æˆ‘ä»¬çš„ä½œæ–‡ã€‚</p><h1 id="901d" class="lf lg jg bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">ç®¡é“åŠŸèƒ½(1çº§)</h1><p id="06d6" class="pw-post-body-paragraph kd ke jg kf b kg my ki kj kk mz km kn ko na kq kr ks nb ku kv kw nc ky kz la ij bi translated">æˆ‘ä»¬å¤ªå…´å¥‹äº†ï¼Œå®Œå…¨å¿˜è®°äº†æˆ‘ä»¬çš„<code class="fe lb lc ld le b">pipe</code>åŠŸèƒ½ã€‚è¿™å¾ˆå®¹æ˜“å®šä¹‰ã€‚</p><pre class="mk ml mm mn gt mo le mp mq aw mr bi"><span id="533a" class="ms lg jg le b gy mt mu l mv mw">const composeU = (...fns) =&gt; x =&gt; fns.reduceRight((acc, fn) =&gt; fn(acc), x);<br/>const pipeU = (...fns) =&gt; x =&gt; fns.reduce((acc, fn) =&gt; fn(acc), x);<br/>const compose = curry(composeU);<br/>const pipe = curry(pipeU);</span></pre><p id="d1f4" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">å¾ˆå¥½ã€‚å¯¹å—ï¼Ÿå—¯ï¼Œanal-retentive-meæœ‰ç‚¹æ¼ç«ï¼Œå› ä¸ºæˆ‘ä»¬å®é™…ä¸Šåœ¨ç®¡é“å‡½æ•°ä¸­é‡å¤äº†æˆ‘ä»¬çš„composeå‡½æ•°ï¼Œä½†åªæ˜¯å‚æ•°é¢ å€’äº†ã€‚ä¹Ÿè®¸æˆ‘ä»¬å¯ä»¥æ ¹æ®å½¼æ­¤æ¥å®šä¹‰å®ƒä»¬ã€‚æˆ‘ä»¬åº”è¯¥èƒ½å¤Ÿç®€å•åœ°åè½¬å‡½æ•°çš„å‚æ•°ï¼Œå¹¶ä¸”åšå¾—å¾ˆå¥½ã€‚å¯¹å—ï¼Ÿ</p><pre class="mk ml mm mn gt mo le mp mq aw mr bi"><span id="f774" class="ms lg jg le b gy mt mu l mv mw">const composeU = (...fns) =&gt; x =&gt; fns.reduceRight((acc, fn) =&gt; fn(acc), x);<br/>const pipeU = (...fns) =&gt; x =&gt; composeU(...fns.reverse())(x)<br/>const compose = curry(composeU);<br/>const pipe = curry(pipeU);</span></pre><p id="bac3" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">å¥½å¤šäº†ã€‚æˆ‘ä»¬ä¹Ÿæ¥è¿‘äº<code class="fe lb lc ld le b">pipeU</code>æ‹¥æœ‰å¦‚æ­¤å°‘çš„è¯­æ³•ï¼Œæˆ‘ä»¬å¯ä»¥å¼€å§‹çœç•¥å®ƒçš„ä¸€äº›æµ‹è¯•â€¦ <br/>ä½†ä¸æ˜¯ç°åœ¨ã€‚æˆ‘è®¤ä¸ºæˆ‘ä»¬å¯ä»¥èµ°å¾—æ›´è¿œã€‚</p><h1 id="b1e1" class="lf lg jg bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">å¥–é‡‘æ°´å¹³</h1><p id="f0e0" class="pw-post-body-paragraph kd ke jg kf b kg my ki kj kk mz km kn ko na kq kr ks nb ku kv kw nc ky kz la ij bi translated">è¿˜æœ‰ä¸€ä»¶äº‹å¾ˆçƒ¦ã€‚æˆ‘ä»¬æœ‰è¿™ä¸ªæ¼‚äº®çš„curryå‡½æ•°ï¼Œå½“æˆ‘ä»¬ç”¨å®ƒæŠŠæˆ‘ä»¬çš„<code class="fe lb lc ld le b">composeU</code>å˜æˆä¸€ä¸ªcurryå‡½æ•°æ—¶ï¼Œå®ƒå·²ç»ä»¥å•ç‹¬æ¥å—â€˜æ•°æ®â€™å‚æ•°çš„æ–¹å¼è¢«curryåŒ–äº†ã€‚å¦‚æœæˆ‘ä»¬èƒ½è®©å®ƒç›´æ¥å˜æˆcurriedï¼Œæˆ–è€…ç«‹åˆ»æ¥å—å®ƒçš„æ‰€æœ‰å‚æ•°ï¼Œé‚£å°±å¤ªå¥½äº†ï¼Œè¿™æ ·æˆ‘ä»¬è‡³å°‘æ„Ÿè§‰åˆ°æˆ‘ä»¬çš„<code class="fe lb lc ld le b">curry</code>å‡½æ•°åšäº†ä¸€äº›å¥½äº‹ã€‚æˆ–è®¸æˆ‘ä»¬å¯ä»¥è¯•è¯•:</p><pre class="mk ml mm mn gt mo le mp mq aw mr bi"><span id="217b" class="ms lg jg le b gy mt mu l mv mw">const composeU = (...fns, x) =&gt; fns.reduceRight((acc, fn) =&gt; fn(acc), x);</span></pre><p id="03fd" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ä½†æ˜¯æˆ‘ä»¬ä¸èƒ½â€¦</p><blockquote class="md me mf"><p id="9f44" class="kd ke mg kf b kg kh ki kj kk kl km kn mh kp kq kr mi kt ku kv mj kx ky kz la ij bi translated">è¯­æ³•é”™è¯¯:Restå‚æ•°å¿…é¡»æ˜¯æœ€åä¸€ä¸ªå½¢å‚ã€‚é‚£æ˜¯ä»¤äººå¤±æœ›çš„ã€‚</p></blockquote><p id="6576" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ç„¶è€Œã€‚è¿™è¿˜æ²¡å®Œâ€¦å¦‚æœæˆ‘ä»¬é˜…è¯»æ•°ç»„çš„å½’çº¦å‡½æ•°çš„<a class="ae jd" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce" rel="noopener ugc nofollow" target="_blank">æ–‡æ¡£ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°ä»¥ä¸‹å†…å®¹:</a></p><blockquote class="md me mf"><p id="0f97" class="kd ke mg kf b kg kh ki kj kk kl km kn mh kp kq kr mi kt ku kv mj kx ky kz la ij bi translated">initialValue <strong class="kf jh">å¯é€‰</strong> <br/>ä¸€ä¸ªå€¼ï¼Œç”¨ä½œå›è°ƒçš„ç¬¬ä¸€æ¬¡è°ƒç”¨çš„ç¬¬ä¸€ä¸ªå‚æ•°ã€‚å¦‚æœæœªæä¾›initialValueï¼Œæ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ å°†ç”¨ä½œåˆå§‹ç´¯åŠ å™¨å€¼ï¼Œå¹¶ä½œä¸ºcurrentValueè·³è¿‡ã€‚åœ¨æ²¡æœ‰initialValueçš„ç©ºæ•°ç»„ä¸Šè°ƒç”¨reduce()å°†å¼•å‘TypeErrorã€‚</p></blockquote><p id="5f40" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">å•Šå“ˆã€‚æ‰€ä»¥æ˜¯<strong class="kf jh">å¯é€‰</strong>ã€‚å¦‚æœæˆ‘ä»¬ä¸æä¾›å‚æ•°ï¼Œå®ƒä¼šè‡ªåŠ¨ä»æ•°ç»„ä¸­å–å‡ºç¬¬<strong class="kf jh">ä¸ª</strong>é¡¹ã€‚ä¹ä¸€çœ‹ï¼Œè¿™ä¼¼ä¹å¯¹æˆ‘ä»¬æ²¡æœ‰å¸®åŠ©ï¼Œå› ä¸ºæˆ‘ä»¬æä¾›çš„å‚æ•°æ˜¯æˆ‘ä»¬æƒ³è¦ä½¿ç”¨çš„<strong class="kf jh"> last </strong>ï¼Œæ‰€ä»¥å®ƒå°†æ˜¯æ•°ç»„ä¸­çš„æœ€åä¸€ä¸ªã€‚ä½†æ˜¯ï¼Œä»”ç»†ç ”ç©¶ä¸€ä¸‹ï¼Œå› ä¸ºæˆ‘ä»¬æ˜¯ä»å³è¾¹å¼€å§‹å‡å°‘çš„ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬åˆ°è¾¾é‚£é‡Œæ—¶ï¼Œå®ƒå®é™…ä¸Šæ˜¯ç¬¬ä¸€ä¸ªå…ƒç´ ï¼</p><p id="90f7" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æ‰€ä»¥æˆ‘ä»¬ä¸èƒ½æŠŠ<code class="fe lb lc ld le b">x</code>æ”¾åœ¨ç¬¬äºŒä¸ªä½ç½®ã€‚ä½†æ˜¯æˆ‘ä»¬å¯ä»¥å®Œå…¨å¿½ç•¥å®ƒã€‚ç”šè‡³æ›´å¥½ï¼</p><pre class="mk ml mm mn gt mo le mp mq aw mr bi"><span id="157a" class="ms lg jg le b gy mt mu l mv mw">const compose = (...fns) =&gt; fns.reduceRight((acc, fn) =&gt; fn(acc));<br/>const pipe = (...fns) =&gt; compose(...fns.reverse());</span></pre><p id="9903" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">å¾ˆå¥½â€¦é‚£æ­£åˆæˆ‘æ„ã€‚ç°åœ¨æˆ‘ä»¬çš„å‡½æ•°æœ‰äº†ä¸€ä¸ªå¯å˜çš„arityï¼Œæˆ‘ä»¬å°±ä¸ç”¨å»ä¿®é¥°å®ƒäº†ï¼</p><h1 id="a2e8" class="lf lg jg bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">ç»“æŸçš„</h1><p id="6251" class="pw-post-body-paragraph kd ke jg kf b kg my ki kj kk mz km kn ko na kq kr ks nb ku kv kw nc ky kz la ij bi translated">å› æ­¤ï¼Œæˆ‘ä»¬å·²ç»ç»å†äº†å‡ æ¬¡<code class="fe lb lc ld le b">compose</code>ã€<code class="fe lb lc ld le b">pipe</code>å’Œ<code class="fe lb lc ld le b">curry </code>å‡½æ•°çš„è¿­ä»£ã€‚ä»æœ€ç®€å•çš„å˜ä½“å¼€å§‹ï¼Œå»ºç«‹ä¸€äº›ç›´è§‰ï¼Œä»¥éå¸¸çµæ´»çš„æŠ½è±¡å˜ä½“ç»“æŸã€‚</p><pre class="mk ml mm mn gt mo le mp mq aw mr bi"><span id="2da5" class="ms lg jg le b gy mt mu l mv mw">const compose = (...fns) =&gt; fns.reduceRight((acc, fn) =&gt; fn(acc));<br/>const pipe = (...fns) =&gt; compose(...fns.reverse());</span><span id="5066" class="ms lg jg le b gy mx mu l mv mw">const curry = fn =&gt; {<br/> const curried = (...args) =&gt;<br/>   args.length &gt;= fn.length<br/>     ? fn.apply(null, args)<br/>     : curried.bind(null, ...args);<br/> return curried;<br/>};</span></pre></div></div>    
</body>
</html>