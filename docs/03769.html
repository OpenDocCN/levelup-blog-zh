<html>
<head>
<title>Dark Mode Tips for iOS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">iOS黑暗模式提示</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/dark-mode-one-year-later-d8b01c3a0d8c?source=collection_archive---------12-----------------------#2020-05-26">https://levelup.gitconnected.com/dark-mode-one-year-later-d8b01c3a0d8c?source=collection_archive---------12-----------------------#2020-05-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/ab5beda94bac11bebde6f845a961d9d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zTInBhoUwGdHy7Dcz3vk5g.jpeg"/></div></div></figure><p id="67f6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">自从iOS 13引入黑暗模式已经有一段时间了，已经有很多关于动态颜色、颜色集、动态图像/材质和其他工具的文章来支持这种新风格。</p><p id="615d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在面临一些挑战后，我想使用一些UIKit工具，这些工具可能对特殊需求有用。开始吧！🧑🏼‍💻💡</p></div><div class="ab cl kx ky hu kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="ij ik il im in"><h2 id="62b7" class="le lf iq bd lg lh li dn lj lk ll dp lm kj ln lo lp kn lq lr ls kr lt lu lv lw bi translated">基础:自定义动态颜色</h2><p id="801b" class="pw-post-body-paragraph jy jz iq ka b kb lx kd ke kf ly kh ki kj lz kl km kn ma kp kq kr mb kt ku kv ij bi translated">您可能已经知道，动态颜色可以通过3种不同的方式获得:通过使用系统定义的语义颜色(如<em class="kw"> systemBackground </em>、<em class="kw"> label </em>、<em class="kw"> systemRed </em>等)，通过在Assets.xcassets中定义自定义UIColor集，或者通过对动态颜色进行编码，如:</p><figure class="mc md me mf gt jr"><div class="bz fp l di"><div class="mg mh l"/></div></figure><h2 id="d7e1" class="le lf iq bd lg lh li dn lj lk ll dp lm kj ln lo lp kn lq lr ls kr lt lu lv lw bi translated">用户界面级别和特征</h2><p id="a844" class="pw-post-body-paragraph jy jz iq ka b kb lx kd ke kf ly kh ki kj lz kl km kn ma kp kq kr mb kt ku kv ij bi translated">想想黑暗模式下的苹果应用程序，比如Messages:同样的<em class="kw">背景色</em>在主视图上看起来是黑色的，但在采用新<code class="fe mi mj mk ml b">.automatic</code>模态风格的控制器上是深灰色的。这是一个小细节，给用户(结合动画)的<strong class="ka ir">感觉。通过在代码中定义您的自定义动态颜色，您能够获得相同的结果，只需使用UITraitCollection的<code class="fe mi mj mk ml b">userInterfaceLevel</code>属性和已知的<code class="fe mi mj mk ml b">userInterfaceStyle</code> <em class="kw"> </em>:</strong></p><pre class="mc md me mf gt mm ml mn mo aw mp bi"><span id="4aaa" class="le lf iq ml b gy mq mr l ms mt">case .dark: return traits.userInterfaceLevel == .elevated ? elevatedDark : dark</span></pre><p id="64c4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这些类型的定制不仅适用于颜色，还适用于其他UI元素，比如图像，您可能希望适应不同的样式。</p><p id="a0fd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">更一般地说，用户界面的风格和级别只是你可以用来使你的UI适应黑暗模式的最常见的特征，但是UITraitCollection提供了一套完整的工具来微调我们的UI，基于许多不同的环境条件:你可以在<a class="ae mu" href="https://developer.apple.com/documentation/uikit/uitraitcollection" rel="noopener ugc nofollow" target="_blank">官方文档</a>中找到更多关于它的信息。</p><h2 id="0811" class="le lf iq bd lg lh li dn lj lk ll dp lm kj ln lo lp kn lq lr ls kr lt lu lv lw bi translated">解析动态颜色/图像</h2><p id="e767" class="pw-post-body-paragraph jy jz iq ka b kb lx kd ke kf ly kh ki kj lz kl km kn ma kp kq kr mb kt ku kv ij bi translated">有些情况下，出于特殊需要，您可能需要知道动态颜色的当前RGB值；在其他一些用例中，比如使用CALayer，你必须知道动态颜色的当前值。在这些情况下，我们可以使用系统定义的API解析动态颜色(以及图像):</p><figure class="mc md me mf gt jr"><div class="bz fp l di"><div class="mg mh l"/></div></figure><h2 id="6dc6" class="le lf iq bd lg lh li dn lj lk ll dp lm kj ln lo lp kn lq lr ls kr lt lu lv lw bi translated">让用户选择(覆盖)</h2><p id="f37f" class="pw-post-body-paragraph jy jz iq ka b kb lx kd ke kf ly kh ki kj lz kl km kn ma kp kq kr mb kt ku kv ij bi translated">遵循系统定义的风格是适应我们应用程序风格的主要(并且总是好的)方法；但是，假设我们想让我们的用户自由选择应用程序应该采用哪种风格，是亮、暗还是系统，因为应用程序的特定类型，或者只是作为一个定制选项。Info.plist的<code class="fe mi mj mk ml b">UIUserInterfaceStyle</code> <em class="kw"> </em>键对我们没有帮助，因为它将UI锁定在单一样式。<code class="fe mi mj mk ml b">overrideUserInterfaceStyle</code> <em class="kw"> </em>方法覆盖了屏幕、窗口、视图和控制器(以及它们的后代)上的样式，但是我们如何有效地使用它呢？让我们看看这个非常简单的实现:</p><figure class="mc md me mf gt jr"><div class="bz fp l di"><div class="mg mh l"/></div></figure><ul class=""><li id="9c9b" class="mv mw iq ka b kb kc kf kg kj mx kn my kr mz kv na nb nc nd bi translated">用户可以选择浅色、深色和系统风格:最后一种是指UIScreen的<code class="fe mi mj mk ml b">userInterfaceStyle</code>，它总是系统级别的风格；</li><li id="491b" class="mv mw iq ka b kb ne kf nf kj ng kn nh kr ni kv na nb nc nd bi translated">当用户切换风格时，我们通过调用<code class="fe mi mj mk ml b">updateTheme</code> <em class="kw"> </em>函数来覆盖<code class="fe mi mj mk ml b">keyWindow</code>的<em class="kw"> </em>风格，因此这种变化会自动在整个应用程序中传播，并且我们会存储用户的偏好；</li><li id="e25b" class="mv mw iq ka b kb ne kf nf kj ng kn nh kr ni kv na nb nc nd bi translated">注意:如果你使用新的<code class="fe mi mj mk ml b">UISceneDelegate</code>来管理多个窗口，你应该依赖那个API而不是<code class="fe mi mj mk ml b">keyWindow</code>。</li></ul></div><div class="ab cl kx ky hu kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="ij ik il im in"><p id="d77a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">就这些了，感谢阅读！☕️你可以在以下链接找到一些关于黑暗模式的官方资源:</p><div class="nj nk gp gr nl nm"><a href="https://developer.apple.com/documentation/xcode/supporting_dark_mode_in_your_interface" rel="noopener  ugc nofollow" target="_blank"><div class="nn ab fo"><div class="no ab np cl cj nq"><h2 class="bd ir gy z fp nr fr fs ns fu fw ip bi translated">在你的界面中支持黑暗模式</h2><div class="nt l"><h3 class="bd b gy z fp nr fr fs ns fu fw dk translated">在macOS和iOS中，用户可以选择采用全系统的浅色或深色外观。黑暗的外表，被称为黑暗…</h3></div><div class="nu l"><p class="bd b dl z fp nr fr fs ns fu fw dk translated">developer.apple.com</p></div></div></div></a></div><div class="nj nk gp gr nl nm"><a href="https://developer.apple.com/design/human-interface-guidelines/ios/visual-design/dark-mode/" rel="noopener  ugc nofollow" target="_blank"><div class="nn ab fo"><div class="no ab np cl cj nq"><h2 class="bd ir gy z fp nr fr fs ns fu fw ip bi translated">黑暗模式-视觉设计- iOS -人机界面指南-苹果开发者</h2><div class="nt l"><h3 class="bd b gy z fp nr fr fs ns fu fw dk translated">在iOS 13.0和更高版本中，人们可以选择采用一种黑暗的全系统外观，称为黑暗模式。在黑暗模式下…</h3></div><div class="nu l"><p class="bd b dl z fp nr fr fs ns fu fw dk translated">developer.apple.com</p></div></div><div class="nv l"><div class="nw l nx ny nz nv oa jw nm"/></div></div></a></div></div></div>    
</body>
</html>