<html>
<head>
<title>Add new disk on LVM for Ubuntu 22.04 LTS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为Ubuntu 22.04 LTS版在LVM上添加新磁盘</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/add-new-disk-on-lvm-for-ubuntu-22-04-lts-9aabb45636a4?source=collection_archive---------2-----------------------#2022-12-08">https://levelup.gitconnected.com/add-new-disk-on-lvm-for-ubuntu-22-04-lts-9aabb45636a4?source=collection_archive---------2-----------------------#2022-12-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/95fe04e53aad2ade69fba2ba5bdb34d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6Nrgw7p-zsrMLsJm"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated"><a class="ae kf" href="https://images.unsplash.com/photo-1506452985227-70bc78385fb0?ixlib=rb-4.0.3&amp;ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&amp;auto=format&amp;fit=crop&amp;w=1470&amp;q=80" rel="noopener ugc nofollow" target="_blank">https://images . unsplash . com/photo-1506452985227-70bc 78385 fb0？IX lib = r b-4 . 0 . 3&amp;ixid = mnwxmja 3 fdb 8 mhxwag 90 by 1 wywdlfhx 8 fgvufdb 8 fhx 8&amp;auto = format&amp;fit = crop&amp;w = 1470&amp;q = 80</a></figcaption></figure><p id="c7ea" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这些说明将帮助您在Ubuntu 22.04上向现有的逻辑卷管理(LVM)添加额外的磁盘。LVM有助于跨多个物理磁盘设备轻松扩展存储。</p><p id="3092" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我准备了一个运行手册，这样你就可以按顺序运行所有的命令，而大多数文章你不能，必须运行额外的步骤。</p><h2 id="980d" class="le lf it bd lg lh li dn lj lk ll dp lm kr ln lo lp kv lq lr ls kz lt lu lv lw bi translated">先决条件</h2><ul class=""><li id="8298" class="lx ly it ki b kj lz kn ma kr mb kv mc kz md ld me mf mg mh bi translated">新磁盘已添加到实例中</li></ul><h2 id="5b67" class="le lf it bd lg lh li dn lj lk ll dp lm kr ln lo lp kv lq lr ls kz lt lu lv lw bi translated">安装ˌ使成形</h2><ol class=""><li id="74e1" class="lx ly it ki b kj lz kn ma kr mb kv mc kz md ld mi mf mg mh bi translated">找出您分配给LVM的磁盘</li></ol><pre class="mj mk ml mm gt mn mo mp bn mq mr bi"><span id="ccce" class="ms lf it mo b be mt mu l mv mw">$ sudo pvs<br/>  PV         VG        Fmt  Attr PSize    PFree<br/>  /dev/vda3  ubuntu-vg lvm2 a--    &lt;8.25g    0 <br/>  /dev/vdb   ubuntu-vg lvm2 a--   &lt;50.00g    0 </span></pre><p id="0e17" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">查看更详细的信息</p><pre class="mj mk ml mm gt mn mo mp bn mq mr bi"><span id="955c" class="ms lf it mo b be mt mu l mv mw">$ sudo pvdisplay<br/>  --- Physical volume ---<br/>  PV Name               /dev/vda3<br/>  VG Name               ubuntu-vg<br/>  PV Size               &lt;8.25 GiB / not usable 0   <br/>  Allocatable           yes (but full)<br/>  PE Size               4.00 MiB<br/>  Total PE              2111<br/>  Free PE               0<br/>  Allocated PE          2111<br/>  PV UUID               96Cnvs-1rYe-xWk8-lB2V-cLSd-ALqk-4ujiPc<br/>   <br/>  --- Physical volume ---<br/>  PV Name               /dev/vdb<br/>  VG Name               ubuntu-vg<br/>  PV Size               50.00 GiB / not usable 4.00 MiB<br/>  Allocatable           yes (but full)<br/>  PE Size               4.00 MiB<br/>  Total PE              12799<br/>  Free PE               0<br/>  Allocated PE          12799<br/>  PV UUID               Hle3gv-3FNW-jkoe-dRFf-CwWd-pdJx-MWy3Ad</span></pre><p id="528a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">2.获取LVM的设备路径</p><pre class="mj mk ml mm gt mn mo mp bn mq mr bi"><span id="b2fd" class="ms lf it mo b be mt mu l mv mw">$ sudo lvdisplay<br/>  --- Logical volume ---<br/>  LV Path                /dev/ubuntu-vg/ubuntu-lv</span></pre><p id="126f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">还会有更多的信息但我们只对“吕路径”感兴趣</p><p id="820c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">3.找到添加到实例的新磁盘</p><pre class="mj mk ml mm gt mn mo mp bn mq mr bi"><span id="8262" class="ms lf it mo b be mt mu l mv mw">$ sudo fdisk -l | grep '^Disk /dev/'<br/>Disk /dev/loop0: 63.24 MiB, 66314240 bytes, 129520 sectors<br/>Disk /dev/loop1: 63.23 MiB, 66301952 bytes, 129496 sectors<br/>Disk /dev/loop2: 79.95 MiB, 83832832 bytes, 163736 sectors<br/>Disk /dev/loop3: 102.98 MiB, 107986944 bytes, 210912 sectors<br/>Disk /dev/loop4: 49.62 MiB, 52031488 bytes, 101624 sectors<br/>Disk /dev/vda: 10 GiB, 10737418240 bytes, 20971520 sectors<br/>Disk /dev/vdb: 50 GiB, 53687091200 bytes, 104857600 sectors<br/>Disk /dev/vdc: 500 GiB, 536870912000 bytes, 1048576000 sectors<br/>Disk /dev/mapper/ubuntu--vg-ubuntu--lv: 558.24 GiB, 599403790336 bytes, 1170710528 sectors</span></pre><p id="05f2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本例中，它将是<em class="mx"> /dev/vdc </em>，因为我向该实例添加了一个500GB的磁盘驱动器。</p><p id="71d2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">4.在新磁盘驱动器上创建物理卷</p><pre class="mj mk ml mm gt mn mo mp bn mq mr bi"><span id="5ce4" class="ms lf it mo b be mt mu l mv mw">$ sudo pvcreate /dev/vdc<br/>  Physical volume "/dev/vdc" successfully created.</span></pre><p id="6030" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">5.扩展现有的卷组以包括这个新的磁盘驱动器</p><pre class="mj mk ml mm gt mn mo mp bn mq mr bi"><span id="173b" class="ms lf it mo b be mt mu l mv mw">$ sudo vgextend ubuntu-vg /dev/vdc<br/>  Volume group "ubuntu-vg" successfully extended</span></pre><p id="eaa1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">6.扩展LV大小以包括100%的新磁盘</p><pre class="mj mk ml mm gt mn mo mp bn mq mr bi"><span id="c248" class="ms lf it mo b be mt mu l mv mw">$ sudo lvm lvextend -l +100%FREE /dev/ubuntu-vg/ubuntu-lv<br/>  Size of logical volume ubuntu-vg/ubuntu-lv changed from 58.24 GiB (14910 extents) to &lt;558.24 GiB (142909 extents).<br/>  Logical volume ubuntu-vg/ubuntu-lv successfully resized.</span></pre><p id="9ae3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">7.现在您需要调整文件系统的大小以匹配新的大小</p><pre class="mj mk ml mm gt mn mo mp bn mq mr bi"><span id="1740" class="ms lf it mo b be mt mu l mv mw">$ sudo resize2fs -p /dev/ubuntu-vg/ubuntu-lv<br/>resize2fs 1.46.5 (30-Dec-2021)<br/>Filesystem at /dev/ubuntu-vg/ubuntu-lv is mounted on /; on-line resizing required<br/>old_desc_blocks = 8, new_desc_blocks = 70<br/>The filesystem on /dev/ubuntu-vg/ubuntu-lv is now 146338816 (4k) blocks long.</span></pre><p id="5f13" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">8.现在您可以使用df -kh进行验证</p><pre class="mj mk ml mm gt mn mo mp bn mq mr bi"><span id="a96f" class="ms lf it mo b be mt mu l mv mw">$ df -kh<br/>Filesystem                         Size  Used Avail Use% Mounted on<br/>tmpfs                              9.9G  1.6M  9.9G   1% /run<br/>/dev/mapper/ubuntu--vg-ubuntu--lv  550G  8.9G  519G   2% /<br/>tmpfs                               50G     0   50G   0% /dev/shm<br/>tmpfs                              5.0M     0  5.0M   0% /run/lock<br/>tmpfs                               50G     0   50G   0% /run/qemu<br/>/dev/vda2                          1.7G  247M  1.4G  16% /boot<br/>tmpfs                              9.9G  4.0K  9.9G   1% /run/user/1000</span></pre></div></div>    
</body>
</html>