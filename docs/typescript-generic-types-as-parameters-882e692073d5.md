# 将泛型类型作为参数

> 原文：<https://levelup.gitconnected.com/typescript-generic-types-as-parameters-882e692073d5>

![](img/ef55b752a742223cf1d3670c00dd6a9a.png)

在不断追求遵循 [D.R.Y.](https://en.wikipedia.org/wiki/Don%27t_repeat_yourself) 的原则和创建完美的动态、可重用代码的过程中，你可能会无意中发现泛型的概念。虽然在编程世界中这不是一个新概念，但如果你从 90 年代就开始编写 JavaScript，这肯定是一个新概念。TypeScript 是一个很棒的超级集合，它允许我们使用泛型的概念来编写漂亮的、动态的、可重用的代码。

通常情况下，您会遇到用多个数据模型来表示应用程序的情况。例如，假设我们正在创建一个应用程序来跟踪各种公司、他们销售的产品以及购买这些产品的买家。我们将创建一些类型脚本模型来表示这些不同的数据类:

我们产品跟踪应用的示例模型

出于这个例子的目的，我已经为每个类添加了几个静态道具。我已经定义了特定的`displayProp`字符串，用于确定显示什么模型属性。此外，我有一个`tableName`属性，您可以想象它是这个模型引用的数据库表的名称。

现在，我们想要一份我们所有公司、产品以及这些产品的买家的列表。我们可以为每个公司、产品和买家创建一个特定的列表组件，但是仅仅为了显示每个模型类型的列表，就会有大量的代码重复。这将是不可维护的，因为我们的应用程序越来越复杂，我们希望在一个列表中显示更多的数据类型！

# 创建动态列表组件

我们可以创建一个不关心数据类型的通用组件，而不是为每种数据类型创建一个列表。我将在这个例子中使用 Angular，但是这些概念也适用于其他框架(还有 VanillaJS！).

通用列表组件

您会注意到，我们已经通过在类名中添加`<T>`参数定义了一个泛型类。这允许我们在不同的类属性上使用泛型类型。但是，我们对各种型号的“名称”有不同的名称(例如，产品名称、公司名称、买方名称等。)，那么我们应该如何在我们的`<h4>`元素中引用这些属性呢？

# 我们需要能够像使用参数一样使用泛型类型！

您会注意到我的组件上的一个特殊属性，它是对泛型类型的引用，我们可以动态地使用它，就像它是一个实际的对象一样:

```
const modelType: { new(...args: any[]): T; };
```

语法很奇怪，但本质上我们是说`modelType`应该是一个通用对象，其中 new 关键字可以接受任意数量的属性。

这允许我们在通用组件中动态创建一个通用类型的新对象:

```
const newGenericObj = new modelType({});
```

对于我们的例子，我们只需要在`<h4>`标签中访问模型(static `displayProp`)中显示属性的静态属性，因此我们甚至不需要创建一个新的泛型对象，只需将对泛型类型的引用传递到我们的泛型列表组件中:

使用泛型列表组件和传入的泛型类型的例子

为了提高健壮性，我们可以创建一个接口来定义这个泛型类型参数设置，还可以定义我们期望从模型中得到的静态属性:

描述我们的通用参数方案的可重用接口

然后我们可以重构前面的例子，这样我们的`modelType`属性现在就是类型`IGenericModel<T>`。

这也不是唯一的方法。也许在前面的例子中创建那些“ref”属性感觉过于冗长。还有另一种方法可以定义我们的 modelType 属性:

```
//(data model is the class name of your model)
modelType: <T>({}) => T;
```

这意味着`modelType`将是一个返回我们的泛型类型的函数(本质上与我们之前的定义相同)。这允许我们简单地将类型引用传递给泛型列表组件，因此不用这样做:

```
[modelType]="productRef"
```

相反，我们可以只传入实际的类类型:

```
[modelType]="Product"
```

泛型可能会有点混乱，但是一旦你掌握了语法和整体概念，你就可以开始全面应用这个概念，以使你的 UI 组件数据不可知。希望使用类型作为参数的概念将帮助您编写更动态、更通用的组件！

[![](img/ff5028ba5a0041d2d76d2a155f00f05e.png)](https://levelup.gitconnected.com/)[](https://gitconnected.com/learn/typescript) [## 学习 TypeScript -最佳 TypeScript 教程(2019) | gitconnected

### 前 18 名打字稿教程。课程由开发者提交并投票，使您能够找到最好的…

gitconnected.com](https://gitconnected.com/learn/typescript)