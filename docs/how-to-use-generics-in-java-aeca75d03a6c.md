# 如何在 Java 中使用泛型

> 原文：<https://levelup.gitconnected.com/how-to-use-generics-in-java-aeca75d03a6c>

## Java 泛型完全指南

![](img/77eaa02e0241fb00915f7e1803296ee0.png)

照片由[亚历克斯·伊比](https://unsplash.com/@alexiby?utm_source=medium&utm_medium=referral)在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 拍摄

泛型是 Java 中的一个关键概念。大多数 Java 代码库都会用到它们。因此，不可避免的是，开发人员会在某个时候遇到它们。这就是为什么正确理解它们至关重要。正确理解泛型也会帮助你在 Java 面试中胜出。

在这篇文章中，我将讨论什么是泛型，如何在 Java 中使用它们，以及它们的优点是什么。

Java 5 中增加了泛型，以提供编译时类型检查，并消除使用集合类时常见的`ClassCastException`风险。Java 中的集合类用于存储和操作对象组。例如，ArrayList 集合类可以存储任何类型的对象。因为它被设计成 Java 的基类类型对象*的容器。*因此，ArrayList 对象可以保存字符串、整数或任何 Java 类型。没有办法在泛型之前创建一个只有字符串或整数的数组列表。使用泛型，我们可以定义数组列表可以容纳的对象类型。从而允许创建单一对象类型的数组列表。

正如你在上面的例子中看到的，泛型是通过使用尖括号来定义的。在这个例子中，只有字符串对象可以存储在数组列表中。Java 中的集合类现在有了泛型类型。现在让我们看看如何编写我们自己的泛型类、接口和方法。

# 通用类

在泛型类声明中，类名后跟类型参数部分。我们可以遵循相同的语法来创建通用接口。**类型参数**，也称为类型变量，是用于指定通用类型名的标识符。泛型类的类型参数部分可以包含一个或多个用逗号分隔的类型参数。这些类也称为参数化类。

在上面的例子中，测试类有两个类型参数，名为`K`和`V`。所以 Test 类的对象可以存储两种不同类型的值。

# 通用方法

如果我们能够编写一个**单个**排序方法，能够对一个整数数组、一个字符串数组或任何其他类型的支持排序的数组的元素进行排序，那就太棒了，对吗？Java 泛型方法允许我们用一个方法声明来指定一组相关的类型。您将能够编写一个可以用不同类型的参数调用的泛型方法声明。必须在方法返回类型之前指定类型参数部分。类型参数也可以用作方法的返回类型。

在上面的例子中，`printArray`方法可以用来打印任何类型数组的元素。

# 泛型中的有界类型参数

到目前为止，我们只看到了无界泛型类型参数。Unbounded 意味着我们的泛型类型参数可以是我们想要的任何类型。有时，您可能希望限制允许传递给 type 参数的类型。例如，操作数字的方法可能只想接受数字类或其子类的实例。为此使用了有界类型参数。要声明有界类型参数，首先列出类型参数的名称，然后是 extends 关键字，最后是上限。

在本例中，笼子类的通用类型必须始终是 Animal 或 Animal 类的子类。因此，我们可以将猫、狗或动物类作为泛型类型参数传递。

如果需要，我们还可以为泛型类型声明多个界限。所以上面例子中的抽象类可以修改如下。

`public abstract class Cage<T extends Animal & Comparable<T>>`

这里，类型参数现在必须考虑动物类和类似的接口。

# 泛型中的通配符和子类型

问号(？)是泛型中的通配符，表示未知类型。如果我们希望我们的泛型方法适用于所有类型，在这种情况下，可以使用一个**无界通配符**。无界通配符由`<?>`表示。我们也可以使用绑定通配符。有两种类型的有界通配符，上有界通配符**和下有界通配符**。****

上限通配符用于放宽对方法中变量类型的限制。例如，假设我们不知道一个列表是数字、整数还是双精度类型。那么我们如何得到列表中元素的和呢？我们可以使用上限通配符来解决这个问题。下面的例子展示了如何实现它。

下界通配符用于增加对方法中变量类型的限制。假设我们只想向一个列表中添加整数，然而我们也想接受一个整数的超类型列表。我们可以使用下限通配符来实现这一点。从下面的例子中，我们可以看到如何使用它。

虽然`Integer`在 Java 中是`Number`的子类型，但是`List<Integer>`并不是`List<Number>`的子类型。他们的共同父母是`List<?>`。所以泛型类中的子类型是用通配符完成的。下面的例子将帮助你理解这一点。

# 菱形算子(<>)

菱形运算符，也称为菱形语法，是 Java 7 中引入的一个新特性。菱形运算符的目的是在创建对象时简化泛型的使用。

`ArrayList<String> al = new ArrayList<>();`

通过使用菱形操作符，我们可以简化字符串数组列表的声明，如上所示。

# 泛型的优势

现在你知道了如何使用泛型，你一定在想为什么我们需要使用它们。我们使用它们有三个主要原因，

1.  **类型安全**
2.  **不需要类型转换**
3.  **可重用代码**

泛型确保编译时安全，这允许您在编译代码时捕捉无效类型。因此，您不需要担心运行时异常。不需要单独的类型转换是使用泛型的另一个优势。你定义初始类型，然后让代码为你做造型。我们还可以避免代码重复。如果没有泛型，我们必须复制和粘贴相同的代码，但用于不同的类型。有了泛型，我们就不必这么做了。

本文到此为止。希望大家已经学会了什么是 Java 泛型，以及如何使用，希望以后能给大家带来更多的 Java 知识。

非常感谢您的阅读和快乐编码！

# 参考

*   [关于泛型的 Oracle Java 文档](https://docs.oracle.com/javase/tutorial/java/generics/index.html)
*   [Java 泛型面试问题](https://www.baeldung.com/java-generics-interview-questions)