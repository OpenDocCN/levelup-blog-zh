<html>
<head>
<title>Creating a firework effect with CSS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用CSS创建烟火效果</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/creating-a-firework-effect-with-css-63181bedf841?source=collection_archive---------3-----------------------#2022-04-30">https://levelup.gitconnected.com/creating-a-firework-effect-with-css-63181bedf841?source=collection_archive---------3-----------------------#2022-04-30</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/df8d3c736df73d1be9b5e173ca23cb45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aq9FELwF2SbkZXgT3gQvCw.jpeg"/></div></div></figure><div class=""/><div class=""><h2 id="c959" class="pw-subtitle-paragraph kb jd je bd b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks dk translated">CSS和一个HTML元素的简单效果</h2></div><p id="dc62" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">上周我用CSS创建了一个烟火效果。它相对简单(每个烟花只需要一个HTML元素)并且可定制(它使用CSS定制属性来定制颜色、大小、位置……)</p><p id="7da9" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">下面是效果的演示(<a class="ae lp" href="https://codepen.io/alvaromontoro/full/MWrMEgW" rel="noopener ugc nofollow" target="_blank">见全屏</a>):</p><figure class="lq lr ls lt gt iv"><div class="bz fp l di"><div class="lu lv l"/></div></figure><blockquote class="lw lx ly"><p id="539a" class="kt ku lz kv b kw kx kf ky kz la ki lb ma ld le lf mb lh li lj mc ll lm ln lo im bi translated">在我继续之前，让我添加一些免责声明:首先，下面的代码是原始代码的简化版本，查看上面的演示以获得完整的可定制代码(但它可能有点复杂)。第二，开发demo很有趣，但从代码角度来看，这可能不是最有效的方法。</p></blockquote><h1 id="8cbf" class="md me je bd mf mg mh mi mj mk ml mm mn kk mo kl mp kn mq ko mr kq ms kr mt mu bi translated">它是如何工作的</h1><p id="df8c" class="pw-post-body-paragraph kt ku je kv b kw mv kf ky kz mw ki lb lc mx le lf lg my li lj lk mz lm ln lo im bi translated">想法是将一个<strong class="kv jf">小元素和绝对大小的背景放在不同的相对位置</strong>(例如，使用百分比)。这里绝对和相对的使用是必不可少的。拥有绝对大小的背景意味着它们的大小不会随着容器的大小而改变，但是它们的位置是相对的，所以当容器被调整大小时它会改变(或者给人以改变的印象)。</p><p id="6f29" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">这些点之间的相对距离始终是相同的。但是随着容器的增长，它们之间的绝对距离也会扩大——类似于真正的烟花的工作方式。</p><figure class="lq lr ls lt gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi na"><img src="../Images/9df39262d2cd05788014dd26bc7333a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iEP0ojkLMt2n-QvfhFV7Ag.png"/></div></div><figcaption class="nb nc gj gh gi nd ne bd b be z dk translated">粒子如何工作的简图</figcaption></figure><p id="e25e" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">看右边箭头所指的圆圈。它的位置是100%水平，50%垂直。容器很小的时候也是这样，但是随着容器的增长，它看起来会变得很大。然而，它仍然处于与之前相同的相对位置:100%水平，50%垂直。</p><h1 id="9d8d" class="md me je bd mf mg mh mi mj mk ml mm mn kk mo kl mp kn mq ko mr kq ms kr mt mu bi translated">代码</h1><p id="0fc0" class="pw-post-body-paragraph kt ku je kv b kw mv kf ky kz mw ki lb lc mx le lf lg my li lj lk mz lm ln lo im bi translated">在(简短地)描述了事情将如何工作之后，让我们来看看代码吧！学习的一个很好的方法就是去做。请随意按照步骤进行(您将需要自己添加一些东西，这将使您的烟花更加独特。)</p><h2 id="4fa3" class="nf me je bd mf ng nh dn mj ni nj dp mn lc nk nl mp lg nm nn mr lk no np mt nq bi translated">超文本标记语言</h2><p id="9d40" class="pw-post-body-paragraph kt ku je kv b kw mv kf ky kz mw ki lb lc mx le lf lg my li lj lk mz lm ln lo im bi translated">如上所述，HTML部分很简单:我们只需要每个烟花一个元素:</p><pre class="lq lr ls lt gt nr ns nt nu aw nv bi"><span id="e40e" class="nf me je ns b gy nw nx l ny nz">&lt;div class="firework"&gt;&lt;/div&gt;</span></pre><p id="94fd" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">我将它设为<code class="fe oa ob oc ns b">&lt;div&gt;</code>，但它也可以是任何其他元素。如果我们想让它更容易理解，我们可以添加一个“img”的<code class="fe oa ob oc ns b">role</code>来表明它是一个图像，以及一个带有简短描述的<code class="fe oa ob oc ns b">aria-label</code>:“一个烟花的动画卡通”但我们可以说，它是不需要的，因为它更表象化，已经是空的。所以，现在让我们保持简单。</p><h2 id="598a" class="nf me je bd mf ng nh dn mj ni nj dp mn lc nk nl mp lg nm nn mr lk no np mt nq bi translated">半铸钢ˌ钢性铸铁(Cast Semi-Steel)</h2><p id="f68f" class="pw-post-body-paragraph kt ku je kv b kw mv kf ky kz mw ki lb lc mx le lf lg my li lj lk mz lm ln lo im bi translated">我们首先为我们的firework定义基本的样式:一个简单的块容器绝对定位在屏幕上:</p><pre class="lq lr ls lt gt nr ns nt nu aw nv bi"><span id="2905" class="nf me je ns b gy nw nx l ny nz">.firework {<br/>  position: absolute;<br/>  top: 50%;<br/>  left: 50%;<br/>  transform: translate(-50%, -50%);<br/>  width: 0.5vmin;<br/>  aspect-ratio: 1;<br/>  background:<br/>      /* background intentionally blank */<br/>    ;<br/>  background-size: 0.5vmin 0.5vmin;<br/>  background-repeat: no-repeat;<br/>}</span></pre><p id="90cc" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">让我们一点一点地看看属性和值:</p><ul class=""><li id="4898" class="od oe je kv b kw kx kz la lc of lg og lk oh lo oi oj ok ol bi translated"><code class="fe oa ob oc ns b">position: absolute;</code>:元素将在屏幕上移动。在不影响其他元素的情况下，拥有一个绝对位置是最理想的。</li><li id="457a" class="od oe je kv b kw om kz on lc oo lg op lk oq lo oi oj ok ol bi translated">默认情况下，烟花会在绝对中心。我们可以在以后改变它(如果你已经深入研究了代码，你会看到这些从烟火到烟火的变化。)</li><li id="daec" class="od oe je kv b kw om kz on lc oo lg op lk oq lo oi oj ok ol bi translated"><code class="fe oa ob oc ns b">transform: translate(-50%, -50%);</code>:这个很重要。通过水平和垂直平移元素-50%,它将在所有方向上增长(而不是向底部右侧增长)。)当我们改变它的大小时。</li><li id="6d0d" class="od oe je kv b kw om kz on lc oo lg op lk oq lo oi oj ok ol bi translated"><code class="fe oa ob oc ns b">width: 0.5vmin; aspect-ratio: 1;</code>:元素将是一个微小的正方形。我使用了vmin单元，所以它的响应速度很快，但是你也可以使用px、rem或者你喜欢的CSS单元。</li><li id="10a7" class="od oe je kv b kw om kz on lc oo lg op lk oq lo oi oj ok ol bi translated"><code class="fe oa ob oc ns b">background-size: 0.5vmin 0.5vmin;</code>:这也很重要。我们设置了一个固定的背景尺寸，所以一旦我们定义了渐变(见下文)，它们将总是有相同的尺寸，与容器有多大无关。</li><li id="9385" class="od oe je kv b kw om kz on lc oo lg op lk oq lo oi oj ok ol bi translated"><code class="fe oa ob oc ns b">background-repeat: no-repeat;</code>:我们不希望渐变重复。否则，我们会有太多，它不会看起来很好。</li></ul><p id="827f" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">对于背景，我们将添加一些径向渐变，如下图所示:</p><pre class="lq lr ls lt gt nr ns nt nu aw nv bi"><span id="602f" class="nf me je ns b gy nw nx l ny nz">radial-gradient(circle, yellow 0.5vmin, #0000 0) 50% 0%</span></pre><blockquote class="lw lx ly"><p id="482c" class="kt ku lz kv b kw kx kf ky kz la ki lb ma ld le lf mb lh li lj mc ll lm ln lo im bi translated">注意:因为<code class="fe oa ob oc ns b">background-size</code>是方形的，所以我们的演示并不需要关键词<code class="fe oa ob oc ns b">circle</code>。我添加它以防我有不同大小的背景。</p></blockquote><p id="6458" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">这个渐变将在烟花元素的中心(50%)顶部(0%)放置一个大小为0.5vmin的圆。现在，我们将在不同的位置编码许多其他渐变。只要确保你把它们分布在整个容器中。不要一边是空的，一边是满的。试着均等地加入所有的象限(记住当容器膨胀时，一个“侧面的”烟花看起来会很奇怪。)我一共加了30个背景(每个象限7个)。作为一个建议，如果可以的话，避免弯角。它们是“离群值”,当动画处于活动状态时，它们看起来只是“咩”。</p><p id="4ace" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">说到动画，我们来定义一下动画吧！它将分为两个部分:烟花飞向天空(压缩)和烟花爆炸。</p><pre class="lq lr ls lt gt nr ns nt nu aw nv bi"><span id="e4a8" class="nf me je ns b gy nw nx l ny nz"><a class="ae lp" href="http://twitter.com/keyframes" rel="noopener ugc nofollow" target="_blank">@keyframes</a> firework {<br/>  0% { <br/>    transform: translate(-50%, 60vh);<br/>    width: 0.5vmin;<br/>    opacity: 1;<br/>  }<br/>  50% { <br/>    width: 0.5vmin;<br/>    opacity: 1;<br/>  }<br/>  100% { <br/>    width: 45vmin; <br/>    opacity: 0; <br/>  }<br/>}</span></pre><p id="0c02" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">它首先将烟花元素移到屏幕底部之外(<code class="fe oa ob oc ns b">translate(-50%, 60vh)</code>)，并保持其较小(<code class="fe oa ob oc ns b">width: 0.5vmin</code>)和可见(<code class="fe oa ob oc ns b">opacity: 1</code>)。元素中指定的转换是<code class="fe oa ob oc ns b">translate(-50%, -50%)</code>。因此，动画会将元素从底部转换到其原始位置(100%)。</p><p id="78e8" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">在动画进行到一半时，我们保持元素小且可见，从那时起，它将扩展到其最终大小(<code class="fe oa ob oc ns b">45vmin</code>)并与背景融合(通过设置<code class="fe oa ob oc ns b">0</code>的<code class="fe oa ob oc ns b">opacity</code>)。</p><pre class="lq lr ls lt gt nr ns nt nu aw nv bi"><span id="505b" class="nf me je ns b gy nw nx l ny nz">.firework {<br/>  animation: firework 2s infinite;<br/>  ...<br/>}</span></pre><p id="ff96" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">最后，我将相同的样式应用于烟花的<code class="fe oa ob oc ns b">::before</code>和<code class="fe oa ob oc ns b">::after</code>伪元素，然后对它们做了一些小的修改(旋转、缩放、使用3D旋转，你可以选择)，所以我有了三倍的粒子数量(并且在“不同的位置”)，而不必添加任何更多的背景或元素:</p><pre class="lq lr ls lt gt nr ns nt nu aw nv bi"><span id="4979" class="nf me je ns b gy nw nx l ny nz">.firework,<br/>.firework::before,<br/>.firework::after {<br/>  content: "";<br/>  ...<br/>}</span><span id="90c8" class="nf me je ns b gy or nx l ny nz">.firework::before {<br/>  transform: translate(-50%, -50%) rotate(25deg) !important; <br/>}</span><span id="9ba5" class="nf me je ns b gy or nx l ny nz">.firework::after {<br/>  transform: translate(-50%, -50%) rotate(-37deg) !important;<br/>}</span></pre><p id="62ef" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated"><code class="fe oa ob oc ns b">rotate()</code>的角度对于<code class="fe oa ob oc ns b">::before</code>和<code class="fe oa ob oc ns b">::after</code>都是随机的。<code class="fe oa ob oc ns b">!important</code>是覆盖动画中的一个所必需的。然而，没有它的效果可能看起来也很酷。请随意尝试和实验。</p><h2 id="6433" class="nf me je bd mf ng nh dn mj ni nj dp mn lc nk nl mp lg nm nn mr lk no np mt nq bi translated">结果呢</h2><p id="1b68" class="pw-post-body-paragraph kt ku je kv b kw mv kf ky kz mw ki lb lc mx le lf lg my li lj lk mz lm ln lo im bi translated">按照这些步骤，我们有一行HTML和50-60行CSS(取决于径向渐变的数量)。结果将如下所示:</p><figure class="lq lr ls lt gt iv"><div class="bz fp l di"><div class="lu lv l"/></div></figure><p id="52d3" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">比上面显示的要简单，但是代码也相当简单。是时候个性化它，让它成为你自己的了！</p><h1 id="f6aa" class="md me je bd mf mg mh mi mj mk ml mm mn kk mo kl mp kn mq ko mr kq ms kr mt mu bi translated">结论</h1><p id="9a29" class="pw-post-body-paragraph kt ku je kv b kw mv kf ky kz mw ki lb lc mx le lf lg my li lj lk mz lm ln lo im bi translated">最后，为了使事情更容易编辑(但有点复杂)，我用一些自定义属性替换了一些值。CSS变量使我可以更容易地包含其他fireworks，只需最少的代码更改。我没有将这部分添加到本文中，因为我想保持简单，但是您可以在本文开头的演示代码中看到这些变量。</p><p id="d62d" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">我希望你喜欢这篇文章。如果您开发了自己的版本或对以上版本进行了更改，请分享。我会喜欢检查它和探索代码:)</p></div><div class="ab cl os ot hx ou" role="separator"><span class="ov bw bk ow ox oy"/><span class="ov bw bk ow ox oy"/><span class="ov bw bk ow ox"/></div><div class="im in io ip iq"><p id="a816" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">文章图片由<a class="ae lp" href="https://unsplash.com/photos/WPTHZkA-M4I" rel="noopener ugc nofollow" target="_blank"> Erwan Hesry在Unsplash </a>上。</p></div></div>    
</body>
</html>