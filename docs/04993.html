<html>
<head>
<title>Concise Code: Meet the New Logical Assignment Operators in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">简明代码:了解JavaScript中新的逻辑赋值操作符</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/concise-code-meet-the-new-assignment-operators-in-javascript-7d39137eb42e?source=collection_archive---------4-----------------------#2020-07-28">https://levelup.gitconnected.com/concise-code-meet-the-new-assignment-operators-in-javascript-7d39137eb42e?source=collection_archive---------4-----------------------#2020-07-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="16ec" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在有了三个新的逻辑运算符:nullish、AND和OR</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/7fda77d9538b902fae9f8c5df3989769.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Gip4M9AkAuiJnLFHoJ7KIg.jpeg"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">选择，选择:幸福的无知||令人不快的真相</figcaption></figure><p id="63f4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">想少写代码？</p><p id="85fd" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们来看看JavaScript中可用的新赋值操作符，这些操作符在<a class="ae le" href="https://hacks.mozilla.org/2020/07/firefox-79/" rel="noopener ugc nofollow" target="_blank"> Firefox 79 </a>和<a class="ae le" href="https://blog.chromium.org/2020/07/chrome-85-upload-streaming-human.html" rel="noopener ugc nofollow" target="_blank">Chrome 85</a>(node . js中尚未提供)中随时可用。</p><p id="9bb7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><a class="ae le" href="https://github.com/tc39/proposal-logical-assignment" rel="noopener ugc nofollow" target="_blank">逻辑赋值操作符建议</a>指定了新的逻辑操作符来帮助快速编写更清晰的赋值JavaScript代码。</p><p id="5879" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">有QQ equals(逻辑零赋值)、And And Equals(逻辑And赋值)和Or Or Equals(逻辑Or赋值)，每一种都提供了一种更好的方法来使用简化的便利运算符更新和赋值。</p><p id="18a3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">新操作符与已经实现的现有通用逻辑操作</strong>具有相同的短路行为，例如加号等于(<code class="fe lf lg lh li b">+=</code>也称为加法赋值)和JavaScript必须提供的所有其他有用的复合赋值操作符。</p><p id="d521" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我认为这些新的操作符非常有用，因为只有在满足某些逻辑条件时，它们才提供了改变赋值的简便方法。</p><h2 id="2fcc" class="lj lk it bd ll lm ln dn lo lp lq dp lr kb ls lt lu kf lv lw lx kj ly lz ma mb bi translated">我们没有不必要的副作用，只是通过快速、简洁的操作将值合并成变量。</h2><p id="c903" class="pw-post-body-paragraph jq jr it js b jt mc jv jw jx md jz ka kb me kd ke kf mf kh ki kj mg kl km kn im bi translated">让我们看看三个新的操作符。</p></div><div class="ab cl mh mi hx mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="im in io ip iq"><h1 id="7c46" class="mo lk it bd ll mp mq mr lo ms mt mu lr mv mw mx lu my mz na lx nb nc nd ma ne bi translated">逻辑零赋值(？？=)</h1><p id="28c5" class="pw-post-body-paragraph jq jr it js b jt mc jv jw jx md jz ka kb me kd ke kf mf kh ki kj mg kl km kn im bi translated">第一个是<a class="ae le" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Logical_nullish_assignment" rel="noopener ugc nofollow" target="_blank">逻辑无效赋值</a>。逻辑nullish赋值只在左边的变量是nullish时赋值，在JavaScript中这意味着它要么是<code class="fe lf lg lh li b">null</code>要么是<code class="fe lf lg lh li b">undefined</code>。另见<a class="ae le" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Nullish_coalescing_operator" rel="noopener ugc nofollow" target="_blank">无效合并操作符</a>。</p><p id="e3d7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">通过写这个声明:</p><pre class="kp kq kr ks gt nf li ng nh aw ni bi"><span id="28d0" class="lj lk it li b gy nj nk l nl nm">x ??= y</span></pre><p id="901d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">等效的逻辑解释如下:</p><pre class="kp kq kr ks gt nf li ng nh aw ni bi"><span id="f857" class="lj lk it li b gy nj nk l nl nm">x ?? (x = y);</span></pre><h1 id="2239" class="mo lk it bd ll mp nn mr lo ms no mu lr mv np mx lu my nq na lx nb nr nd ma ne bi translated">例子</h1><pre class="kp kq kr ks gt nf li ng nh aw ni bi"><span id="065b" class="lj lk it li b gy nj nk l nl nm">const book = { title: 'Dogs' };<br/>​<br/>// book.title is NOT nullish<br/>book.title ??= 'Cats';<br/>console.log(book.title);<br/>// expected output: 'Dogs'<br/>​<br/>// book.author is nullish<br/>book.author ??= 'Cameron Manavian';<br/>console.log(book.author);<br/>// expected output: 'Cameron Manavian'</span></pre><p id="60db" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">所以如果<code class="fe lf lg lh li b">x</code>是nullish，这个操作符将更新这个值，但是如果<code class="fe lf lg lh li b">x</code>不是nullish，它将保持现有值不变。</p><h1 id="cca5" class="mo lk it bd ll mp nn mr lo ms no mu lr mv np mx lu my nq na lx nb nr nd ma ne bi translated">逻辑AND赋值(&amp;&amp;=)</h1><p id="40bd" class="pw-post-body-paragraph jq jr it js b jt mc jv jw jx md jz ka kb me kd ke kf mf kh ki kj mg kl km kn im bi translated">下一个运算符是<a class="ae le" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Logical_AND_assignment" rel="noopener ugc nofollow" target="_blank">逻辑and赋值</a>。只有当左边的变量是<a class="ae le" href="https://developer.mozilla.org/en-US/docs/Glossary/truthy" rel="noopener ugc nofollow" target="_blank">真值</a>时，逻辑AND赋值才会赋值，在JavaScript中，这意味着它是任何不是<a class="ae le" href="https://developer.mozilla.org/en-US/docs/Glossary/Falsy" rel="noopener ugc nofollow" target="_blank">假值</a>的东西——任何不是<code class="fe lf lg lh li b">false</code>、<code class="fe lf lg lh li b">0</code>、<code class="fe lf lg lh li b">""</code>、<code class="fe lf lg lh li b">null</code>、<code class="fe lf lg lh li b">undefined</code>和<code class="fe lf lg lh li b">NaN</code>以及其他一些值的东西。</p><p id="1993" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这就像你如何使用<a class="ae le" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Logical_AND" rel="noopener ugc nofollow" target="_blank">逻辑AND </a>一样，除非左边的表达式为真，否则<code class="fe lf lg lh li b">&amp;&amp;</code>的右边不会被求值。</p><p id="d760" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">通过写这个声明:</p><pre class="kp kq kr ks gt nf li ng nh aw ni bi"><span id="3676" class="lj lk it li b gy nj nk l nl nm">x &amp;&amp;= y</span></pre><p id="1933" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">等效的逻辑解释如下:</p><pre class="kp kq kr ks gt nf li ng nh aw ni bi"><span id="2004" class="lj lk it li b gy nj nk l nl nm">x &amp;&amp; (x = y);</span></pre><h1 id="1936" class="mo lk it bd ll mp nn mr lo ms no mu lr mv np mx lu my nq na lx nb nr nd ma ne bi translated">例子</h1><pre class="kp kq kr ks gt nf li ng nh aw ni bi"><span id="d84e" class="lj lk it li b gy nj nk l nl nm">const book = { title: 'Dogs', description: '' };<br/>​<br/>// book.title is truthy<br/>book.title &amp;&amp;= 'Cats and Dogs';<br/>console.log(book.title);<br/>// expected output: 'Cats and Dogs'<br/>​<br/>// book.author is falsy<br/>book.author &amp;&amp;= 'Cameron Manavian';<br/>console.log(book.author);<br/>// expected output: undefined<br/>​<br/>// book.description is falsy<br/>book.description &amp;&amp;= 'This is a short book!';<br/>console.log(book.description);<br/>// expected output: ''</span></pre><p id="9366" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">因此，如果<code class="fe lf lg lh li b">x</code>为true，这个操作符将更新值，但是如果<code class="fe lf lg lh li b">x</code>为falsy，它将保持现有值不变。</p><h1 id="9d85" class="mo lk it bd ll mp nn mr lo ms no mu lr mv np mx lu my nq na lx nb nr nd ma ne bi translated">逻辑OR赋值(||=)</h1><p id="ad95" class="pw-post-body-paragraph jq jr it js b jt mc jv jw jx md jz ka kb me kd ke kf mf kh ki kj mg kl km kn im bi translated">最后，我们有<a class="ae le" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Logical_OR_assignment" rel="noopener ugc nofollow" target="_blank">逻辑or赋值</a>。逻辑OR赋值只在左边的变量是<a class="ae le" href="https://developer.mozilla.org/en-US/docs/Glossary/Falsy" rel="noopener ugc nofollow" target="_blank"> falsy </a>时进行赋值——同样，任何等于<code class="fe lf lg lh li b">false</code>、<code class="fe lf lg lh li b">0</code>、<code class="fe lf lg lh li b">""</code>、<code class="fe lf lg lh li b">null</code>、<code class="fe lf lg lh li b">undefined</code>和<code class="fe lf lg lh li b">NaN</code>的值以及更多的值。</p><p id="69e6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这一个是与前一个操作符的完全相反的<em class="ns">，因此，也与布尔表达式中JavaScript逻辑大量使用的<a class="ae le" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Logical_OR" rel="noopener ugc nofollow" target="_blank">逻辑或</a>类似。</em></p><p id="82cb" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">通过写这个声明:</p><pre class="kp kq kr ks gt nf li ng nh aw ni bi"><span id="444e" class="lj lk it li b gy nj nk l nl nm">x ||= y</span></pre><p id="348f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">等效的逻辑解释如下:</p><pre class="kp kq kr ks gt nf li ng nh aw ni bi"><span id="9a6e" class="lj lk it li b gy nj nk l nl nm">x || (x = y);</span></pre><h1 id="ba82" class="mo lk it bd ll mp nn mr lo ms no mu lr mv np mx lu my nq na lx nb nr nd ma ne bi translated">例子</h1><pre class="kp kq kr ks gt nf li ng nh aw ni bi"><span id="d0ec" class="lj lk it li b gy nj nk l nl nm">const book = { title: 'Birds', author: '' };<br/>​<br/>// book.title is truthy<br/>book.title ||= 'Cats and Dogs';<br/>console.log(book.title);<br/>// expected output: 'Birds'<br/>​<br/>// book.author is falsy<br/>book.author ||= 'Cameron Manavian';<br/>console.log(book.author);<br/>// expected output: 'Cameron Manavian'<br/>​</span></pre><p id="2542" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">尽情享受吧！</p></div></div>    
</body>
</html>