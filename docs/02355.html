<html>
<head>
<title>Intro to Python Modules</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python模块简介</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/intro-to-python-modules-76d8c5648d2e?source=collection_archive---------7-----------------------#2020-03-08">https://levelup.gitconnected.com/intro-to-python-modules-76d8c5648d2e?source=collection_archive---------7-----------------------#2020-03-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/6fd853ffa92bdcfcc4858fca7944fd7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*aZgu_7qGCbW5F-yn"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">照片由<a class="ae kf" href="https://unsplash.com/@lazycreekimages?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Michael Dziedzic </a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a></figcaption></figure><p id="a19f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Python是一种方便的语言，通常用于脚本编写、数据科学和web开发。</p><p id="dbc5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本文中，我们将看看如何定义和使用模块将大程序分成小块。</p><h1 id="da60" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">导入模块</h1><p id="181e" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">大多数程序都不止几行。这意味着，为了便于管理，它们必须分成多个小块。</p><p id="ff99" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Python程序可以分成模块。每个模块都是一个Python程序。例如，<code class="fe mh mi mj mk b">math</code>模块有数学函数，<code class="fe mh mi mj mk b">random</code>模块有随机数相关的函数。</p><p id="82f3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要在另一个模块中使用Python模块，我们必须使用<code class="fe mh mi mj mk b">import</code>关键字和模块名。</p><p id="d07d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果我们想要导入多个模块，我们可以用逗号分隔模块名。</p><p id="dcb5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以导入<code class="fe mh mi mj mk b">random</code>模块，然后通过调用<code class="fe mh mi mj mk b">randrange</code>函数打印出一个随机生成的数字，如下所示:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="297a" class="mt lf it mk b gy mu mv l mw mx">import random<br/>print(random.randrange(0, 101, 2))</span></pre><p id="2fa4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在上面的代码中，我们导入了<code class="fe mh mi mj mk b">random</code>模块并调用了<code class="fe mh mi mj mk b">randrange</code>函数，将我们想要生成的数字的开始和结束数字作为前两个参数。</p><p id="174f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">结束编号不在可生成的编号范围内。</p><p id="d3cc" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最后一个参数是起始数字和结束数字之间要跳过的步骤数。</p><p id="84fe" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">上面的代码将生成一个0到100之间的偶数。</p><h1 id="7a1a" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">从导入语句</h1><p id="5994" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以用<code class="fe mh mi mj mk b">from</code>关键字导入Python模块的一个成员。</p><p id="a6a2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以从<code class="fe mh mi mj mk b">random</code>模块导入<code class="fe mh mi mj mk b">randrange</code>函数，如下所示:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="7afb" class="mt lf it mk b gy mu mv l mw mx">from random import randrange<br/>print(randrange(0, 101, 2))</span></pre><p id="2470" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在上面的代码中，我们只是导入了<code class="fe mh mi mj mk b">randrange</code>函数，而不是整个模块。</p><p id="f2cb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">但其余的逻辑是一样的。</p><p id="29bf" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这样效率更高，因为我们没有导入所有内容。</p><h1 id="9d8e" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">创建我们自己的模块</h1><p id="e06a" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">Python文件顶层的任何内容都可以从Python模块中导入。</p><p id="e95a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以如下创建一个名为<code class="fe mh mi mj mk b">foo.py</code>的模块:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="931f" class="mt lf it mk b gy mu mv l mw mx">x = 1</span></pre><p id="e136" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">那么在<code class="fe mh mi mj mk b">main.py</code>中，我们可以如下导入和使用它:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="65e5" class="mt lf it mk b gy mu mv l mw mx">import foo<br/>print(foo.x)</span></pre><p id="591e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们应该在屏幕上看到1，因为我们已经将<code class="fe mh mi mj mk b">x</code>设置为1并导入了它。</p><h1 id="03b6" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">模块搜索路径</h1><p id="bf3c" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">Python模块在代码目录、设置为<code class="fe mh mi mj mk b">PYTHONPATH</code>环境变量的值的路径以及安装Python时设置的默认目录中进行搜索。</p><h1 id="8a97" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated"><code class="fe mh mi mj mk b">dir()</code>功能</h1><p id="6a73" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated"><code class="fe mh mi mj mk b">dir</code>函数用于列出一个Python模块的成员。</p><p id="3914" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以打印一个<code class="fe mh mi mj mk b">math</code>模块的成员列表，如下所示:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="9b4d" class="mt lf it mk b gy mu mv l mw mx">import math<br/>print(dir(math))</span></pre><p id="bf62" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们在屏幕上看到以下内容:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="dc83" class="mt lf it mk b gy mu mv l mw mx">['__doc__', '__file__', '__loader__', '__name__', '__package__', '__spec__', 'acos', 'acosh', 'asin', 'asinh', 'atan', 'atan2', 'atanh', 'ceil', 'copysign', 'cos', 'cosh', 'degrees', 'e', 'erf', 'erfc', 'exp', 'expm1', 'fabs', 'factorial', 'floor', 'fmod', 'frexp', 'fsum', 'gamma', 'gcd', 'hypot', 'inf', 'isclose', 'isfinite', 'isinf', 'isnan', 'ldexp', 'lgamma', 'log', 'log10', 'log1p', 'log2', 'modf', 'nan', 'pi', 'pow', 'radians', 'remainder', 'sin', 'sinh', 'sqrt', 'tan', 'tanh', 'tau', 'trunc']</span></pre><p id="b0ef" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以从上面的数组中看到可以调用的函数。</p><figure class="ml mm mn mo gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi my"><img src="../Images/67e7cd9ba3852157f39e2e60439e2c7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0cZ81vaNT_cHWU9x"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">托比·斯托达特在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><h1 id="1652" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">包装</h1><p id="b461" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以将Python文件放在目录中，将它们组织成包。</p><p id="d8f5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以将<code class="fe mh mi mj mk b">foo.py</code>放在<code class="fe mh mi mj mk b">package</code>文件夹中，添加<code class="fe mh mi mj mk b">__init__.py</code>到其中。</p><p id="ce2c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们可以导入和使用包的成员，如下所示:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="cee0" class="mt lf it mk b gy mu mv l mw mx">from package import foo<br/>print(foo.x)</span></pre><h1 id="704d" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">从包中导入*</h1><p id="283d" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">星号字符表示我们从一个包中导入所有成员。</p><p id="57e0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，如果我们写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="d82b" class="mt lf it mk b gy mu mv l mw mx">from sound.effects import *</span></pre><p id="f9fa" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们从<code class="fe mh mi mj mk b">sound</code>包中的<code class="fe mh mi mj mk b">effects</code>模块导入所有成员。</p><p id="357a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这是一种不好的做法，因为代码是低效的，因为我们导入所有的东西。此外，我们可能会有冲突的名称，因为我们导入了比我们应该导入的更多的成员。</p><h1 id="bc7a" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">导入为</h1><p id="ddfa" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以使用<code class="fe mh mi mj mk b">as</code>关键字来导入一个有别名的模块。这有助于我们避免来自不同模块的名称冲突，因为我们的成员在不同的模块中有相同的名称。</p><p id="20d7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以编写以下代码:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="3a7a" class="mt lf it mk b gy mu mv l mw mx">import random as r<br/>print(r.randrange(0, 101, 2))</span></pre><p id="34b7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">导入别名为<code class="fe mh mi mj mk b">r</code>的<code class="fe mh mi mj mk b">random</code>模块，并引用它而不是<code class="fe mh mi mj mk b">random</code>。</p><p id="4cdf" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们还可以导入一个别名为的成员，如下所示:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="9bfa" class="mt lf it mk b gy mu mv l mw mx">from random import randrange as rr<br/>print(rr(0, 101, 2))</span></pre><p id="ee9a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以调用<code class="fe mh mi mj mk b">rr</code>而不是<code class="fe mh mi mj mk b">randrange</code>来调用<code class="fe mh mi mj mk b">randrange</code>。</p><h1 id="9a2b" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">结论</h1><p id="0ccf" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以通过创建Python代码文件来定义和导入Python模块，然后我们可以导入Python文件的成员。</p><p id="053e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这让我们可以将代码分成小块。</p><p id="c5bb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">此外，我们可以通过将模块文件放在文件夹中并将<code class="fe mh mi mj mk b">__init__.py</code>添加到每个目录来将Python模块组织成包。</p></div></div>    
</body>
</html>