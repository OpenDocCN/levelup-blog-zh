<html>
<head>
<title>Compose Your Android Navigation with Custom Arguments</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用自定义参数构建您的Android导航</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/compose-your-android-navigation-with-custom-arguments-20d4467b5dfd?source=collection_archive---------10-----------------------#2022-04-19">https://levelup.gitconnected.com/compose-your-android-navigation-with-custom-arguments-20d4467b5dfd?source=collection_archive---------10-----------------------#2022-04-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/debd56da6eae3bcb1a22390e93b2ff8e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xM5Wa_Df4WBk4WXkmWVPlQ.jpeg"/></div></div></figure><div class=""/><p id="52b6" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">即使在使用多个撰写应用程序后，使用Jetpack Compose导航也很容易变得混乱。尤其是，因为还没有一种方法可以做到这一点。</p><p id="2ed4" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">随着每个项目的建立，我学到了如何构建导航的一个新方面。在我当前的项目中，我需要在导航时提交<strong class="kd jf">自定义对象。</strong></p></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h2 id="7859" class="lg lh je bd li lj lk dn ll lm ln dp lo km lp lq lr kq ls lt lu ku lv lw lx ly bi translated">带有基本参数的导航</h2><p id="99c9" class="pw-post-body-paragraph kb kc je kd b ke lz kg kh ki ma kk kl km mb ko kp kq mc ks kt ku md kw kx ky im bi translated">在Android官方文档<a class="ae me" href="https://developer.android.com/jetpack/compose/navigation#nav-with-args" rel="noopener ugc nofollow" target="_blank">中很好地解释了带有基本参数的导航，如字符串、整数、布尔值等。</a></p><p id="e684" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">很自然地，我很想将我的自定义参数的所有相关字段都转换成这些基本类型，并向目的地添加一个扩展的参数列表。</p><p id="19ce" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这种方法实现起来很快。不幸的是，它也迅速升级。</p><p id="1c6f" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">因此，请继续阅读，学习如何干净快速地使用自定义参数。</p></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><h2 id="fb2e" class="lg lh je bd li lj lk dn ll lm ln dp lo km lp lq lr kq ls lt lu ku lv lw lx ly bi translated">带有自定义参数的导航</h2><p id="8696" class="pw-post-body-paragraph kb kc je kd b ke lz kg kh ki ma kk kl km mb ko kp kq mc ks kt ku md kw kx ky im bi translated">对于使用自定义对象作为参数的导航，首先必须确保您的自定义参数是可打包的。让我们以下面的<em class="mf">产品</em>类为例。</p><figure class="mg mh mi mj gt iv"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="de6f" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">然后你需要为你的类定义一个<code class="fe mm mn mo mp b">NavType</code>。让我们为我们的<em class="mf">产品</em>类这样做。</p><figure class="mg mh mi mj gt iv"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="44ee" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">实施<code class="fe mm mn mo mp b">NavType</code>时，您有几种选择:</p><ul class=""><li id="8521" class="mq mr je kd b ke kf ki kj km ms kq mt ku mu ky mv mw mx my bi translated">注意，我已经实现了作为伴随对象的<code class="fe mm mn mo mp b">NavType</code>。它帮助我保持我的<code class="fe mm mn mo mp b">NavTypes</code>结构化，因为它们通过伴随对象被分配给各自的数据类。你也可以把它实现为独立的类。</li><li id="30d4" class="mq mr je kd b ke mz ki na km nb kq nc ku nd ky mv mw mx my bi translated">注意，我使用<code class="fe mm mn mo mp b">Gson</code>将对象转换成JSON字符串。但是你可以使用你喜欢的转换器。</li><li id="e993" class="mq mr je kd b ke mz ki na km nb kq nc ku nd ky mv mw mx my bi translated">如果您的参数是可选的，则将<code class="fe mm mn mo mp b">isNullableAllowed</code>设置为<em class="mf">真</em>。</li></ul></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><p id="9db5" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">此时，我们已经告诉Compose我们的新导航类型应该是什么样子。接下来就是让<code class="fe mm mn mo mp b">NavHost</code>知道这件事了。</p><figure class="mg mh mi mj gt iv"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="21fa" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这一步类似于添加基本类型的参数。更多详细信息，请查看Android的文档。</p></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><p id="5548" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">最后但同样重要的是，在导航时，您必须解析JSON的自定义参数。意思是，你要用下面的方式调用<code class="fe mm mn mo mp b">navigate</code>:</p><figure class="mg mh mi mj gt iv"><div class="bz fp l di"><div class="mk ml l"/></div></figure></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><figure class="mg mh mi mj gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ne"><img src="../Images/b2a917eef1faaa188b837987cd65947f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n8F6yPqzIvvCmWUJvcWhLA.jpeg"/></div></div></figure><h2 id="2aec" class="lg lh je bd li lj lk dn ll lm ln dp lo km lp lq lr kq ls lt lu ku lv lw lx ly bi translated">关于导航逻辑的思考</h2><p id="e6ff" class="pw-post-body-paragraph kb kc je kd b ke lz kg kh ki ma kk kl km mb ko kp kq mc ks kt ku md kw kx ky im bi translated">所描述的代码片段被简化，以展示如何使用自定义参数进行导航。</p><p id="efbe" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">当在更大的应用程序中实现Jetpack Compose导航时，我通过使用<a class="ae me" href="https://developer.android.com/jetpack/compose/navigation#nested-nav" rel="noopener ugc nofollow" target="_blank">嵌套导航图</a>和远离NavHost的抽象路线、目的地和参数，以更高级的方式构建我的导航。此外，我添加了另一个层来防止在UI或ViewModel层中使用<code class="fe mm mn mo mp b">navController</code>。</p><p id="102e" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">您想了解更多关于嵌套导航逻辑的知识吗？乔·伯奇的这篇好文章<a class="ae me" href="https://hitherejoe.medium.com/nested-navigation-graphs-in-jetpack-compose-dc0ada1d4726" rel="noopener">是一个很好的起点。</a></p></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><p id="c6a3" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><em class="mf">你喜欢这个帖子吗？您想了解更多关于Jetpack撰写导航的信息吗？请在评论中或通过回应让我知道👏🏻这个故事。</em></p><p id="e80d" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><em class="mf">快乐编码！🧑‍💻</em></p></div></div>    
</body>
</html>