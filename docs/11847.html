<html>
<head>
<title>Error Handling Strategies In Go</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">围棋中的错误处理策略</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/error-handling-strategies-in-go-7759b3f73d0?source=collection_archive---------5-----------------------#2022-04-21">https://levelup.gitconnected.com/error-handling-strategies-in-go-7759b3f73d0?source=collection_archive---------5-----------------------#2022-04-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/0163a7799e5a590e8f6c688d83dca9a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*bVd4yMrpNgVq1hNm"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated"><a class="ae kf" href="https://unsplash.com/@possessedphotography?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">附身摄影</a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</figcaption></figure><p id="c09b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在Go中，当函数调用返回错误时，调用者有责任检查错误并采取适当的措施。可能有几种策略来处理它。</p><p id="e91f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这篇文章中，让我们来看看以下四个选项:</p><ul class=""><li id="534c" class="le lf it ki b kj kk kn ko kr lg kv lh kz li ld lj lk ll lm bi translated">繁殖</li><li id="effb" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated">重试</li><li id="a341" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated">记录并继续。</li><li id="ea9a" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated">记录并停止程序。</li></ul></div><div class="ab cl ls lt hx lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="im in io ip iq"><h1 id="5093" class="lz ma it bd mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw bi translated">繁殖</h1><p id="962f" class="pw-post-body-paragraph kg kh it ki b kj mx kl km kn my kp kq kr mz kt ku kv na kx ky kz nb lb lc ld im bi translated">最常见的方法是直接返回错误。因此子例程中的失败会传播到调用者。</p><p id="3991" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在下面的示例中，如果调用<code class="fe nc nd ne nf b">http.Get</code>失败，则返回HTTP错误，而不做进一步处理。</p><figure class="ng nh ni nj gt ju"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="4fe0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">有时，有必要错误地包装一些描述性信息，以便对我们有所帮助。</p><p id="ac17" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在下面的例子中，我们使用函数<code class="fe nc nd ne nf b">fmt.Errorf</code>用一个字符串包装错误消息。它包括请求URL和错误消息，URL是调试的重要信息。</p><figure class="ng nh ni nj gt ju"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="1e72" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">使用这种错误处理策略有三个最佳实践技巧。</p><ul class=""><li id="748a" class="le lf it ki b kj kk kn ko kr lg kv lh kz li ld lj lk ll lm bi translated">首先，错误消息应该有足够的描述性，以帮助用户理解问题。</li><li id="6a15" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated">第二，因为错误消息经常链接在一起，所以消息不应该大写，并且应该避免换行</li><li id="efb0" class="le lf it ki b kj ln kn lo kr lp kv lq kz lr ld lj lk ll lm bi translated">第三，函数调用者和被调用者有不同的责任来处理错误。被调用方报告尝试的操作和与错误上下文相关的参数值。调用者添加了更多的上下文，但是被调用者没有，比如上面<code class="fe nc nd ne nf b">html.Parse </code>案例中的URL。</li></ul><h1 id="aaed" class="lz ma it bd mb mc nm me mf mg nn mi mj mk no mm mn mo np mq mr ms nq mu mv mw bi translated">重试</h1><p id="ba8f" class="pw-post-body-paragraph kg kh it ki b kj mx kl km kn my kp kq kr mz kt ku kv na kx ky kz nb lb lc ld im bi translated">第二种错误处理策略是重试。它适用于暂时性错误的情况，调用方可以重试该操作。</p><p id="bfc7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">有许多重试策略，如固定退避、指数退避和随机退避。如果你对这个话题感兴趣，你可以通过搜索网页了解更多。</p><p id="16fe" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这里，我们实现了一个简单的重试策略，使用指数补偿进行重试，以演示目的。</p><figure class="ng nh ni nj gt ju"><div class="bz fp l di"><div class="nk nl l"/></div></figure><h1 id="fc1c" class="lz ma it bd mb mc nm me mf mg nn mi mj mk no mm mn mo np mq mr ms nq mu mv mw bi translated">记录错误并继续。</h1><p id="a47d" class="pw-post-body-paragraph kg kh it ki b kj mx kl km kn my kp kq kr mz kt ku kv na kx ky kz nb lb lc ld im bi translated">在某些情况下，容忍一个错误是可以的。在这种情况下，会记录错误，程序会继续运行。</p><figure class="ng nh ni nj gt ju"><div class="bz fp l di"><div class="nk nl l"/></div></figure><h1 id="5bce" class="lz ma it bd mb mc nm me mf mg nn mi mj mk no mm mn mo np mq mr ms nq mu mv mw bi translated">记录并停止程序。</h1><p id="59ae" class="pw-post-body-paragraph kg kh it ki b kj mx kl km kn my kp kq kr mz kt ku kv na kx ky kz nb lb lc ld im bi translated">第四个错误处理策略是停止程序。主函数一般应该使用这种策略来终止程序。</p><figure class="ng nh ni nj gt ju"><div class="bz fp l di"><div class="nk nl l"/></div></figure><h1 id="2c87" class="lz ma it bd mb mc nm me mf mg nn mi mj mk no mm mn mo np mq mr ms nq mu mv mw bi translated">摘要</h1><p id="f0a4" class="pw-post-body-paragraph kg kh it ki b kj mx kl km kn my kp kq kr mz kt ku kv na kx ky kz nb lb lc ld im bi translated">Go中的错误处理是必不可少的。现在，让我们开始享受用四种策略进行错误处理的快乐旅程。</p></div><div class="ab cl ls lt hx lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="im in io ip iq"><p id="c2b9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我希望你喜欢读这篇文章。如果你愿意支持我成为一名作家，考虑成为一名媒体成员。你还可以无限制地访问媒体上的每个故事。</p></div></div>    
</body>
</html>