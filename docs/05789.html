<html>
<head>
<title>How to use TensorBoard in an Amazon SageMaker Notebook Instance</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Amazon SageMaker笔记本实例中使用TensorBoard</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-use-tensorboard-in-an-amazon-sagemaker-notebook-instance-a41ce2fd973f?source=collection_archive---------1-----------------------#2020-10-02">https://levelup.gitconnected.com/how-to-use-tensorboard-in-an-amazon-sagemaker-notebook-instance-a41ce2fd973f?source=collection_archive---------1-----------------------#2020-10-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="b470" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在本文中，我将向您展示如何在amazon sagemaker笔记本实例中使用TensorBoard。</p><p id="1417" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在我最近的一个项目中，我需要在sagemaker笔记本实例中使用TensorBoard来可视化训练和验证损失。但是网上搜了一下，才知道很少有博客涉及这个话题。所以我写了这个循序渐进的教程，希望能帮到你。</p><p id="338d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们用一个简单的回归例子来深入这个话题。</p><h1 id="a44b" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated"><strong class="ak"> 1。创建样本数据</strong></h1><p id="907c" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">首先，我将使用NumPy创建一个样本数据集，并简单地创建一个名为x的变量，它是一个从0到2π的随机数据样本。然后我们会计算y，它是x的符号，其中x是一个随机数据。因此，x是我们的输入值，y将是我们数据集的真实值。</p><figure class="lo lp lq lr gt ls"><div class="bz fp l di"><div class="lt lu l"/></div></figure><p id="f9ad" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们可以把它画出来。蓝点代表我们的样本数据集。红线表示x的符号是什么。</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div class="gh gi lv"><img src="../Images/291af94d5d9a6f5b1b3ca3b7c51510df.png" data-original-src="https://miro.medium.com/v2/resize:fit:840/format:webp/1*TizQjHHb-mnv4u-c9gKXRA.png"/></div></figure><h1 id="5caf" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated"><strong class="ak"> 2。构建神经网络</strong></h1><p id="b5a8" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">那么我们来构建一个简单的全连接神经网络。这是一个非常简单的神经网络。它有两个隐藏层。我们将在第一个隐藏层使用100个节点，在第二个隐藏层使用50个节点。并对这些层中的每一层使用ReLu激活。</p><figure class="lo lp lq lr gt ls"><div class="bz fp l di"><div class="lt lu l"/></div></figure><p id="b7a8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果我们打印模型，我们可以看到模型的样子。</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div class="gh gi ly"><img src="../Images/1df26250e10221d5eca6e861015a0c7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*FViJx01_ujTzVASrJPXkWw.png"/></div></figure><p id="e223" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这并没有在视觉上向我们展示很多信息，但它给了我们每层有多少节点以及各层如何连接的信息。</p><h1 id="aa12" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">3.张量板模型可视化</h1><p id="5a25" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">让我们用TensorBoard来看看这个模型。</p><p id="c123" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为此，我们需要在一个单元中运行以下命令来安装TensorBoard。</p><pre class="lo lp lq lr gt lz ma mb mc aw md bi"><span id="d68e" class="me km iq ma b gy mf mg l mh mi">!pip install tensorboard</span></pre><p id="5e7c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后我们导入TensorBoard summary writer类。需要注意的是，如果没有预先安装TensorBoard，您将会得到如下错误👇🏻</p><pre class="lo lp lq lr gt lz ma mb mc aw md bi"><span id="2eab" class="me km iq ma b gy mf mg l mh mi">ModuleNotFoundError: No module named 'tensorboard'</span></pre><p id="1f2c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后，我们使用一个名为writer的变量实例化摘要writer类。我们应用一个名为add_graph的方法将这个图添加到我们的TensorBoard事件日志中。最后，我们关闭writer来完成它。</p><figure class="lo lp lq lr gt ls"><div class="bz fp l di"><div class="lt lu l"/></div></figure><p id="6a0b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们试着在这个笔记本上执行TensorBoard。我们调用扩展“load_ext tensorboard”，然后用log direct标志调用tensorboard。在这里，我们将其设置为“运行”文件夹。</p><p id="93f2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">开始了。</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi mj"><img src="../Images/a4d7e9b44afed9d8acebb266bb44750e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gCYurMpnq6d33RH3quvcxg.png"/></div></div></figure><p id="9bd8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">哎呀…怎么回事？？什么都没出现…</p><p id="dfcd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">关于这个结果，我问了一位学长，得到了他的如下回答:</p><blockquote class="mo mp mq"><p id="85de" class="jn jo mr jp b jq jr js jt ju jv jw jx ms jz ka kb mt kd ke kf mu kh ki kj kk ij bi translated"><em class="iq">“tensorboard似乎未安装在conda_pytorch_latest_p36实例中，Sagemaker Jupyter Lab或Jupyter Notebooks不支持嵌入tensor board应用程序。</em></p><p id="2173" class="jn jo mr jp b jq jr js jt ju jv jw jx ms jz ka kb mt kd ke kf mu kh ki kj kk ij bi translated"><em class="iq">您可以通过在单元中运行以下命令来安装tensor board:</em></p><p id="bcc5" class="jn jo mr jp b jq jr js jt ju jv jw jx ms jz ka kb mt kd ke kf mu kh ki kj kk ij bi translated"><em class="iq">！pip安装张量板</em></p></blockquote><p id="7106" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">但是在我调用扩展“load_ext tensorboard”之前，我已经通过这个命令安装了tensorboard，不是吗？🤔</p><p id="9f56" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">条条大路通罗马。我们为什么不试试另一条路？🧐</p><p id="2c5e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这次让我们打开终端并执行以下命令:</p><pre class="lo lp lq lr gt lz ma mb mc aw md bi"><span id="7a5f" class="me km iq ma b gy mf mg l mh mi">pip install tensorboard<br/>tensorboard --logdir runs/</span></pre><p id="366f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">需要注意的是，请确保您位于“runs”文件夹的根路径中。对我来说，我需要使用</p><pre class="lo lp lq lr gt lz ma mb mc aw md bi"><span id="622d" class="me km iq ma b gy mf mg l mh mi"><em class="mr">cd sagemaker</em></span></pre><p id="9aa9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">更改我当前的工作目录。</p><p id="808a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后你会得到回应:</p><pre class="lo lp lq lr gt lz ma mb mc aw md bi"><span id="ccb5" class="me km iq ma b gy mf mg l mh mi">...<br/>...<br/>TensorBoard 2.3.0 at <a class="ae mv" href="http://localhost:6007/" rel="noopener ugc nofollow" target="_blank">http://localhost:6006/</a> (Press CTRL+C to quit)</span></pre><p id="cd4c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">重点来了。</p><ol class=""><li id="45e8" class="mw mx iq jp b jq jr ju jv jy my kc mz kg na kk nb nc nd ne bi translated">获取您笔记本的URL。大概会是这样:<a class="ae mv" href="https://YOUR_NOTEBOOK_INSTANCE_NAME.aws/lab" rel="noopener ugc nofollow" target="_blank"><em class="mr">https://YOUR _ NOTEBOOK _ INSTANCE _ name . NOTEBOOK . AP-northeast-1 . sagemaker . AWS/lab</em></a></li></ol><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi mj"><img src="../Images/61b3916f59ef9dfb2742b445fc478e46.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sEmc4xf9UZNZDOdEg5pOqg.png"/></div></div></figure><p id="2fb2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2.将“lab”替换为“proxy/6006”。这里的6006是你从回答中得到的数字。所以新的网址应该是这样的:<a class="ae mv" href="https://YOUR_NOTEBOOK_INSTANCE_NAME.notebook.ap-northeast-1.sagemaker.aws/proxy/6006/" rel="noopener ugc nofollow" target="_blank"><em class="mr">https://YOUR _ NOTEBOOK _ INSTANCE _ name . NOTEBOOK . AP-northeast-1 . sage maker . AWS/proxy/6006/</em></a></p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi mj"><img src="../Images/a27b2c015cd81a6b9d45d9af356eccb6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Pn_P_njgO_zQ-dDU4MdnFg.png"/></div></div></figure><p id="6ad8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">3.然后在外部浏览器中访问该URL。</p><p id="ef64" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">开始了。冲浪板出现了！👏</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi nf"><img src="../Images/34a1c0ce0e0dd3d563de8d02cf2c1fef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lb32iyX9OTlG-TF_diRF5Q.png"/></div></div></figure><p id="ae44" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是描述我们网络的张量图。双击显示MyNet的地方，这将扩展到我们的网络的样子。我们可以上下滚动，还可以移动这个模型来调整它的大小，这样我们就可以看得很清楚了。我们也可以阅读右上角显示的信息，以检查有多少输入和输出。</p><figure class="lo lp lq lr gt ls"><div class="bz fp l di"><div class="ng lu l"/></div></figure></div></div>    
</body>
</html>