<html>
<head>
<title>Code Review Best Practices</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">代码评审最佳实践</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/code-review-best-practices-cf6f4bfeeb3e?source=collection_archive---------9-----------------------#2021-04-13">https://levelup.gitconnected.com/code-review-best-practices-cf6f4bfeeb3e?source=collection_archive---------9-----------------------#2021-04-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/b4f75fa2598d2b71018b43c262d6681e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_GZO1oEtSkFY405QQK02VA.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">马文·迈耶在<a class="ae kc" href="https://unsplash.com/s/photos/team?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><h1 id="1d0a" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">摘要</h1><p id="8f36" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">当您所在的开发团队中有多个参与者在共享代码库上工作时，代码评审是确保项目一致性和质量的重要工具。然而，为了成为一个有效的工具，开发人员需要以正确的态度对待代码评审。代码评审不是一个展示你有多聪明的论坛，也不是一个为代码库推动你私人议程的机会。当你有机会帮助改进代码库时，你最不想做的事情就是责备你的团队成员。这里有一些在您审查代码时要遵循的指导方针，以确保您和您的团队从审查代码中获得最大收益。</p><h1 id="9a47" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">推行团队标准，而不是你的观点</h1><p id="1b69" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">代码评审并不是一个让你实现你喜欢的命名约定的论坛。它也不是开始推动对代码基础的约定进行彻底改变的地方。确保清楚地区分你希望<em class="lz">看到的内容(因为这是你的观点)和你的团队在你评论代码时同意做的事情。</em></p><p id="d6e7" class="pw-post-body-paragraph lb lc iq ld b le ma lg lh li mb lk ll lm mc lo lp lq md ls lt lu me lw lx ly ij bi translated">例如，假设您的团队正在使用Node和Express开发一个微服务，您通常像这样定义您的路由:</p><pre class="mf mg mh mi gt mj mk ml mm aw mn bi"><span id="4977" class="mo ke iq mk b gy mp mq l mr ms">import * as myController from ‘../Controllers/myController’;</span><span id="83cf" class="mo ke iq mk b gy mt mq l mr ms">router<br/>    .route('/my-special-endpoint')<br/>    .get(myController.handleGetFromEndpoint);</span></pre><p id="2d9c" class="pw-post-body-paragraph lb lc iq ld b le ma lg lh li mb lk ll lm mc lo lp lq md ls lt lu me lw lx ly ij bi translated">如果你想开始引入一种新的模式，那很好，但是你不会通过请求改变PR并说:</p><blockquote class="mu mv mw"><p id="1d88" class="lb lc lz ld b le ma lg lh li mb lk ll mx mc lo lp my md ls lt mz me lw lx ly ij bi translated">路由处理程序应该使用类，而不是导出引用函数的对象。因为我们在这里实现了一个新的控制器，所以这是一个很好的地方，我们可以开始将它们转换为适当的结构。</p></blockquote><p id="d78c" class="pw-post-body-paragraph lb lc iq ld b le ma lg lh li mb lk ll lm mc lo lp lq md ls lt lu me lw lx ly ij bi translated">为了实现您想要推行的新标准，代码审查是阻碍团队成员工作的一个可怕的地方。这同样适用于团队成员、技术领导和首席技术官。在你阻止一个团队成员的工作之前，确保<em class="lz">每个人</em>都在相同的页面上，知道有什么约定和标准，以及代码库的发展方向。</p><p id="b060" class="pw-post-body-paragraph lb lc iq ld b le ma lg lh li mb lk ll lm mc lo lp lq md ls lt lu me lw lx ly ij bi translated">对于上面的例子，更合理的解释是:</p><blockquote class="mu mv mw"><p id="f4e2" class="lb lc lz ld b le ma lg lh li mb lk ll mx mc lo lp my md ls lt mz me lw lx ly ij bi translated">没有必要在此基础上保留这些代码，但是我希望看到我们开始使用这些路由处理程序的类。我认为这会给我们更多的灵活性和更好的可测试性。我认为这是一个行业趋势，我们可以从中受益。我将在下一次标准讨论中提出这个问题，让大家感受一下。</p></blockquote><p id="cf2a" class="pw-post-body-paragraph lb lc iq ld b le ma lg lh li mb lk ll lm mc lo lp lq md ls lt lu me lw lx ly ij bi translated">现在，您已经向您的团队成员展示了您认为团队可以改进的方式，但也表明代码很好，您将在另一个论坛上提出来进一步讨论。</p><h1 id="218a" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">不要老是评论同一件事</h1><p id="a525" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">如果你发现一个团队成员在24个地方违反了一个标准，请…为了所有通情达理的开发者，不要在每个实例上添加24个评论。任何开发人员看到他们的代码上有24条评论，都会变得沮丧、泄气，甚至有点怀疑。而是评论一两次，让开发者到处修。</p><p id="b0d6" class="pw-post-body-paragraph lb lc iq ld b le ma lg lh li mb lk ll lm mc lo lp lq md ls lt lu me lw lx ly ij bi translated">注意:我要提醒你的是，我曾经和难以相处的团队成员一起工作过，他们不会在没有明确要求的情况下改变任何事情。在这种情况下，你可能需要更明确一点，但如果你发现自己诉诸这一点，可能是时候与团队成员和团队领导进行一些直接对话了。</p><p id="483f" class="pw-post-body-paragraph lb lc iq ld b le ma lg lh li mb lk ll lm mc lo lp lq md ls lt lu me lw lx ly ij bi translated">作为一个虚构的例子，假设您的新团队成员不知道您的团队使用camel case变量名而不是snake case:</p><pre class="mf mg mh mi gt mj mk ml mm aw mn bi"><span id="ae1d" class="mo ke iq mk b gy mp mq l mr ms">first_variable = ‘A message for the user.’;<br/>second_variable = ‘Another message for the user.’;</span></pre><p id="c436" class="pw-post-body-paragraph lb lc iq ld b le ma lg lh li mb lk ll lm mc lo lp lq md ls lt lu me lw lx ly ij bi translated">请不要评论每一个这样的例子，当然也不要评论这两行。相反，对您看到的第一个实例进行一般性的评论，并提示团队成员在任何地方进行更改，最好带有一个链接，指向您的团队记录的显示此示例的标准。</p><blockquote class="mu mv mw"><p id="8f80" class="lb lc lz ld b le ma lg lh li mb lk ll mx mc lo lp my md ls lt mz me lw lx ly ij bi translated">一个简单的注意，我们的团队使用camelCase进行变量声明，所以确保所有的声明都遵循这个模式。如果你没有看过我们的项目编码指南，你可以在这里找到:{link_to_documented_standards}。</p></blockquote><h1 id="5bad" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">将评论保持在最低限度</h1><p id="7f2b" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">同样，如果你正在处理一个大的PR，试着把你的评论放在少数有用的项目上，强调你希望看到的代码的最重要的变化。一般来说，对于大型代码提交来说，5-10条评论就足够了。</p><p id="3abb" class="pw-post-body-paragraph lb lc iq ld b le ma lg lh li mb lk ll lm mc lo lp lq md ls lt lu me lw lx ly ij bi translated">如果你发现自己做了更多的评论，那么这是一个信号，表明你应该就代码的方向进行一次直接的对话，或者也许你在重复你自己。在一份简历中有太多的评论会让你很难辨别什么是重要的，什么是不重要的。</p><h1 id="ad48" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">在作者准备好之前不要评论</h1><p id="18ac" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">没有什么事情比在一个人完成工作之前批评他们更让他生气了。在Github中，如果一个PR被标记为草稿，那么从定义上来说，它还没有准备好供您审阅。签出文档:</p><p id="eaa4" class="pw-post-body-paragraph lb lc iq ld b le ma lg lh li mb lk ll lm mc lo lp lq md ls lt lu me lw lx ly ij bi translated"><a class="ae kc" href="https://docs.github.com/en/github/collaborating-with-issues-and-pull-requests/changing-the-stage-of-a-pull-request" rel="noopener ugc nofollow" target="_blank">https://docs . github . com/en/github/cooperating-with-issues-and-pull-requests/changing-the-stage-of-a-pull-request</a></p><p id="1eee" class="pw-post-body-paragraph lb lc iq ld b le ma lg lh li mb lk ll lm mc lo lp lq md ls lt lu me lw lx ly ij bi translated">Github在这里帮你…听听。在你开始讨厌他们正在进行的<em class="lz">工作之前，等待开发人员将它标记为准备评审。</em></p><h1 id="4347" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">最后的想法:当它是好的，而不是完美的时候，接受评审</h1><p id="ad1f" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">我所见过的关于代码评审的最好的指导方针之一是，当代码看起来不错，而不是完美的时候，就批准它。套用伏尔泰的话:</p><blockquote class="mu mv mw"><p id="0d9e" class="lb lc lz ld b le ma lg lh li mb lk ll mx mc lo lp my md ls lt mz me lw lx ly ij bi translated">“完美是好的敌人”</p></blockquote><p id="2be5" class="pw-post-body-paragraph lb lc iq ld b le ma lg lh li mb lk ll lm mc lo lp lq md ls lt lu me lw lx ly ij bi translated">记住…写代码很难，写完美的代码是不可能的。不要因为你认为代码可以调整得稍微好一点而耽误了功能。关注重要的事情:</p><ul class=""><li id="4fe7" class="na nb iq ld b le ma li mb lm nc lq nd lu ne ly nf ng nh ni bi translated">是否遵循项目标准？</li><li id="04e6" class="na nb iq ld b le nj li nk lm nl lq nm lu nn ly nf ng nh ni bi translated">测试是否正确？</li><li id="c9ee" class="na nb iq ld b le nj li nk lm nl lq nm lu nn ly nf ng nh ni bi translated"><strong class="ld ir">最重要的:</strong>管用吗？</li></ul><p id="bd68" class="pw-post-body-paragraph lb lc iq ld b le ma lg lh li mb lk ll lm mc lo lp lq md ls lt lu me lw lx ly ij bi translated">保持健康的观点，确保你的评论的目标是改善、教育和合作。清晰的交流对于确保每个人都能从你的代码评审中获得最大收益大有帮助。成为人们想要审查他们代码的人，而不是人们试图偷偷摸摸查看代码的人。</p></div></div>    
</body>
</html>