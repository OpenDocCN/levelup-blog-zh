<html>
<head>
<title>How to Transform Lists into Map Objects</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何将列表转换为地图对象</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-transform-lists-into-map-objects-a90c120dc385?source=collection_archive---------20-----------------------#2021-04-06">https://levelup.gitconnected.com/how-to-transform-lists-into-map-objects-a90c120dc385?source=collection_archive---------20-----------------------#2021-04-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="220f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您可能需要将对象数组转换为地图对象，反之亦然。在这篇文章中，我们将看看如何做到这一点。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/10c9278f6d32de79b0410d4932b66d5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*11by0aVeePnNJUrLJ6fRmQ.jpeg"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">作者照片</figcaption></figure><h1 id="77cf" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">将列表转换为地图对象</h1><p id="eb3c" class="pw-post-body-paragraph jq jr it js b jt mc jv jw jx md jz ka kb me kd ke kf mf kh ki kj mg kl km kn im bi translated">假设我们有一个游戏对象数组。每个游戏对象都有一个<code class="fe mh mi mj mk b">id</code>和一个<code class="fe mh mi mj mk b">name</code>。</p><pre class="kp kq kr ks gt ml mk mm mn aw mo bi"><span id="e58f" class="mp lf it mk b gy mq mr l ms mt">const games = [<br/>  {id:1, name: 'Fornite'},<br/>  {id:2, name: 'RDR2'},<br/>  {id:3, name: 'Cyberpunk 2077'}<br/>];</span></pre><p id="4e46" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们希望将游戏数据的数组转换成一个对象，将游戏的<code class="fe mh mi mj mk b">id</code>映射到<code class="fe mh mi mj mk b">name</code>。</p><pre class="kp kq kr ks gt ml mk mm mn aw mo bi"><span id="da50" class="mp lf it mk b gy mq mr l ms mt">{<br/>  1: "Fornite", <br/>  2: "RDR2", <br/>  3: "Cyberpunk 2077"<br/>}</span></pre><h2 id="d4b2" class="mp lf it bd lg mu mv dn lk mw mx dp lo kb my mz ls kf na nb lw kj nc nd ma ne bi translated">为每一个</h2><p id="a274" class="pw-post-body-paragraph jq jr it js b jt mc jv jw jx md jz ka kb me kd ke kf mf kh ki kj mg kl km kn im bi translated">一种解决方案是使用<code class="fe mh mi mj mk b">forEach</code>方法循环遍历数组并构建新的映射对象。对于输入数组中的每个游戏元素，我们在<code class="fe mh mi mj mk b">map</code>对象中创建一个新属性。属性键是游戏的<code class="fe mh mi mj mk b">id</code>，属性值是游戏的<code class="fe mh mi mj mk b">name</code>。</p><pre class="kp kq kr ks gt ml mk mm mn aw mo bi"><span id="36e1" class="mp lf it mk b gy mq mr l ms mt">const map = {};<br/>games.forEach(({id, name})=&gt;{<br/>  map[id] = name;<br/>});</span><span id="1bb1" class="mp lf it mk b gy nf mr l ms mt">console.log(map);<br/>//{1: "Fornite", <br/>// 2: "RDR2", <br/>// 3: "Cyberpunk 2077"}</span></pre><h2 id="c47c" class="mp lf it bd lg mu mv dn lk mw mx dp lo kb my mz ls kf na nb lw kj nc nd ma ne bi translated">减少</h2><p id="6d61" class="pw-post-body-paragraph jq jr it js b jt mc jv jw jx md jz ka kb me kd ke kf mf kh ki kj mg kl km kn im bi translated">我们可以通过使用<code class="fe mh mi mj mk b">reduce</code>数组方法实现类似的解决方案。</p><p id="ccb6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe mh mi mj mk b">reduce</code>将一系列值聚合成一个值。在我们的例子中，这个聚合值是一个对象文字。</p><pre class="kp kq kr ks gt ml mk mm mn aw mo bi"><span id="2b46" class="mp lf it mk b gy mq mr l ms mt">const map = games.reduce((map, {id, name}) =&gt; {<br/>  map[id] = name;<br/>  return map;<br/>}, {});</span></pre><p id="8f91" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">它从一个空映射开始，然后在每次迭代中添加一个新的键。</p><pre class="kp kq kr ks gt ml mk mm mn aw mo bi"><span id="e578" class="mp lf it mk b gy mq mr l ms mt">//initial -&gt; {}<br/>//game 1  -&gt; {1: "Fornite"}<br/>//game 2  -&gt; {1: "Fornite", 2: "RDR2"}<br/>//game 3. -&gt; {1: "Fornite", 2: "RDR2", 3: "Cyberpunk 2077"}</span></pre><p id="854f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们可以通过提取出一个带有意图揭示名称的函数的缩减器来提高可读性。</p><pre class="kp kq kr ks gt ml mk mm mn aw mo bi"><span id="4f1a" class="mp lf it mk b gy mq mr l ms mt">function toMappingObject(map, {id, name}) {<br/>  map[id] = name;<br/>  return map;<br/>}</span><span id="6310" class="mp lf it mk b gy nf mr l ms mt">const map = games.reduce(toMappingObject, {});</span></pre><h2 id="848d" class="mp lf it bd lg mu mv dn lk mw mx dp lo kb my mz ls kf na nb lw kj nc nd ma ne bi translated">对象. fromEntries</h2><p id="0185" class="pw-post-body-paragraph jq jr it js b jt mc jv jw jx md jz ka kb me kd ke kf mf kh ki kj mg kl km kn im bi translated">另一种选择是使用<code class="fe mh mi mj mk b">map</code>数组方法将数组转换成一个由<code class="fe mh mi mj mk b">[key, value]</code>对组成的列表</p><pre class="kp kq kr ks gt ml mk mm mn aw mo bi"><span id="80bd" class="mp lf it mk b gy mq mr l ms mt">const keyValuePairs = games.map(({id, name}) =&gt; [id, name]);<br/>console.log(keyValuePairs);<br/>//[<br/>//["1", "Fornite"],<br/>//["2", "RDR2"],<br/>//["3", "Cyberpunk 2077"]<br/>//]</span></pre><p id="fc3f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe mh mi mj mk b">map</code>使用映射函数将值列表转换为新的值列表。在我们的例子中，映射函数将一个游戏对象转换成一个<code class="fe mh mi mj mk b">[key, value]</code>对。</p><pre class="kp kq kr ks gt ml mk mm mn aw mo bi"><span id="a1bc" class="mp lf it mk b gy mq mr l ms mt">const mapToKeyValuePair = ({id, name}) =&gt; [id, name];</span></pre><p id="a261" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">然后我们可以使用<code class="fe mh mi mj mk b">Object.fromEntries</code>实用程序将该对列表转换成一个对象文字。</p><pre class="kp kq kr ks gt ml mk mm mn aw mo bi"><span id="0717" class="mp lf it mk b gy mq mr l ms mt">const map = Object.fromEntries(keyValuePairs);<br/>console.log(map);<br/>//{1: "Fornite", 2: "RDR2", 3: "Cyberpunk 2077"}</span></pre><h1 id="53a0" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">将地图对象转换为列表</h1><p id="ac4f" class="pw-post-body-paragraph jq jr it js b jt mc jv jw jx md jz ka kb me kd ke kf mf kh ki kj mg kl km kn im bi translated">现在让我们看看如何将地图对象转换成对象列表。</p><p id="52e5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">考虑以下将游戏id映射到游戏名称的对象。</p><pre class="kp kq kr ks gt ml mk mm mn aw mo bi"><span id="3ba9" class="mp lf it mk b gy mq mr l ms mt">const gamesMap = {<br/>  1: "Fornite", <br/>  2: "RDR2", <br/>  3: "Cyberpunk 2077"<br/>};</span></pre><p id="ceb4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们想把它转换成一个游戏对象列表，其中属性键成为游戏的<code class="fe mh mi mj mk b">id</code>，属性值成为游戏对象的<code class="fe mh mi mj mk b">name</code>。</p><pre class="kp kq kr ks gt ml mk mm mn aw mo bi"><span id="68f6" class="mp lf it mk b gy mq mr l ms mt">[<br/>  {id:1, name: 'Fornite'},<br/>  {id:2, name: 'RDR2'},<br/>  {id:3, name: 'Cyberpunk 2077'}<br/>]</span></pre><h2 id="d6ef" class="mp lf it bd lg mu mv dn lk mw mx dp lo kb my mz ls kf na nb lw kj nc nd ma ne bi translated">Object.entries()</h2><p id="fe55" class="pw-post-body-paragraph jq jr it js b jt mc jv jw jx md jz ka kb me kd ke kf mf kh ki kj mg kl km kn im bi translated"><code class="fe mh mi mj mk b">Object.entries()</code>从一个对象文本返回一个<code class="fe mh mi mj mk b">[key, value]</code>对列表。</p><p id="e543" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们首先做那件事。</p><pre class="kp kq kr ks gt ml mk mm mn aw mo bi"><span id="72a3" class="mp lf it mk b gy mq mr l ms mt">const keyValuePairs = Object.entries(gamesMap);<br/>console.log(keyValuePairs);<br/>//[<br/>//["1", "Fornite"],<br/>//["2", "RDR2"],<br/>//["3", "Cyberpunk 2077"]<br/>//]</span></pre><h2 id="ef9c" class="mp lf it bd lg mu mv dn lk mw mx dp lo kb my mz ls kf na nb lw kj nc nd ma ne bi translated">为每一个</h2><p id="4eca" class="pw-post-body-paragraph jq jr it js b jt mc jv jw jx md jz ka kb me kd ke kf mf kh ki kj mg kl km kn im bi translated">一旦我们有了<code class="fe mh mi mj mk b">[key, value]</code>对的列表，我们就可以使用<code class="fe mh mi mj mk b">forEach</code>数组方法循环遍历对象中的所有道具并构建对象列表。</p><p id="1322" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们从一个空列表<code class="fe mh mi mj mk b">[]</code>开始，并在每次迭代中添加一个新对象。</p><pre class="kp kq kr ks gt ml mk mm mn aw mo bi"><span id="13c7" class="mp lf it mk b gy mq mr l ms mt">const gamesArr = [];</span><span id="593f" class="mp lf it mk b gy nf mr l ms mt">Object<br/>  .entries(gamesMap)<br/>  .forEach(([key, value]) =&gt; {<br/>    gamesArr.push({<br/>      id: key, <br/>      name: value<br/>    });<br/> });</span><span id="a749" class="mp lf it mk b gy nf mr l ms mt">console.log(gamesArr);<br/>//[<br/>//{id:1, 'Fornite'},<br/>//{id:2: 'RDR2'},<br/>//{id:3: 'Cyberpunk 2077'}<br/>//];</span></pre><h2 id="47b4" class="mp lf it bd lg mu mv dn lk mw mx dp lo kb my mz ls kf na nb lw kj nc nd ma ne bi translated">地图</h2><p id="5215" class="pw-post-body-paragraph jq jr it js b jt mc jv jw jx md jz ka kb me kd ke kf mf kh ki kj mg kl km kn im bi translated">当你想到我们实际上正在做的是将一个<code class="fe mh mi mj mk b">[key, value]</code>对映射到一个游戏对象。映射事物的一个更好的选择是<code class="fe mh mi mj mk b">map()</code>数组方法。下面是我们如何重写前面的转换。</p><pre class="kp kq kr ks gt ml mk mm mn aw mo bi"><span id="b7b6" class="mp lf it mk b gy mq mr l ms mt">const gamesArr = Object<br/>  .entries(gamesMap)<br/>  .map(([key, value]) =&gt;({<br/>    id: key, <br/>    name: value<br/>  }));</span></pre><p id="4fff" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">通过提取映射函数并给出一个揭示意图的名称，可以提高可读性。</p><pre class="kp kq kr ks gt ml mk mm mn aw mo bi"><span id="fdc2" class="mp lf it mk b gy mq mr l ms mt">function toGameObject([key, value]){<br/>  return {<br/>    id: key, <br/>    name: value<br/>  };<br/>}</span><span id="4cc3" class="mp lf it mk b gy nf mr l ms mt">const gamesArr = Object<br/>  .entries(gamesMap)<br/>  .map(toGameObject);</span><span id="b567" class="mp lf it mk b gy nf mr l ms mt">console.log(gamesArr);</span></pre><h1 id="b766" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">关键注意事项</h1><p id="83e0" class="pw-post-body-paragraph jq jr it js b jt mc jv jw jx md jz ka kb me kd ke kf mf kh ki kj mg kl km kn im bi translated">对象可以转换成<code class="fe mh mi mj mk b">[key, value]</code>对，也可以从【】对创建。</p><p id="4a2f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">使用映射函数，<code class="fe mh mi mj mk b">map</code> array方法可以将一个对象数组转换成一个新的<code class="fe mh mi mj mk b">[key, value]</code>对数组。</p><p id="f8d1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">同样的<code class="fe mh mi mj mk b">map</code>方法可以用来将一个<code class="fe mh mi mj mk b">[key, value]</code>对的数组转换成一个<code class="fe mh mi mj mk b">{key, value}</code>对象的数组。</p><p id="d499" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">感谢阅读。</p></div></div>    
</body>
</html>