<html>
<head>
<title>Create Your Own Pipe in Angular 8</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Angular 8中创建自己的管道</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/create-your-own-pipe-in-angular-8-35f1f969ec49?source=collection_archive---------3-----------------------#2020-01-23">https://levelup.gitconnected.com/create-your-own-pipe-in-angular-8-35f1f969ec49?source=collection_archive---------3-----------------------#2020-01-23</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="3f98" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在Angular 8中构建自定义管道的指南</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/9ab95291e5468f18715a698b55ac7224.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ckGpwmMSVQdIE-5x"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@luis_tosta?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">路易斯·托斯塔</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><h1 id="a2df" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">什么是角管？</h1><p id="c7ed" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">角管道是一种编写显示值转换的方法，可以在HTML模板中声明。</p><p id="e74a" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在Angular应用程序中，从后端接收到的数据通常不会提供给用户。例如，用户更喜欢看到简单的日期格式，如<code class="fe ms mt mu mv b">January 22, 2020</code>，而不是原始的字符串格式<code class="fe ms mt mu mv b">Wed Jan 22 2020 00:00:00 GMT-0800 (Pacific Daylight Time)</code> <em class="mw">。</em></p><p id="7c9f" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">显然，数据在显示给用户之前需要一些修改。您可能认为数据的转换是样式。实际上，您可能想在HTML模板中应用它们，就像处理样式一样。这就是应用角管的地方。</p><p id="f84b" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在这个演示中，我们将在Angular 8中生成自定义管道。</p><h1 id="7c5d" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">创建新的角度应用程序</h1><p id="12fb" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">首先，运行以下命令创建一个新的应用程序，并导航到根文件夹。</p><pre class="kj kk kl km gt mx mv my mz aw na bi"><span id="3599" class="nb la it mv b gy nc nd l ne nf">ng new customPipe<br/>cd customPipe</span></pre><p id="2df2" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们将在应用程序中使用Bootstrap。可以参考这个<a class="ae ky" href="https://medium.com/javascript-in-plain-english/build-angular-8-project-with-bootstrap-7b89775e5764" rel="noopener">链接</a>安装Bootstrap。</p><h1 id="fde3" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">生成角形管道</h1><p id="5d1e" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">接下来，生成两个管道，分别叫做<strong class="lt iu">current pipe</strong>和<strong class="lt iu"> UserTitlePipe </strong>。</p><p id="04e8" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">对于<code class="fe ms mt mu mv b">CurrencyPipe</code>，我们将在数字的开头添加一个美元符号，<code class="fe ms mt mu mv b">UserTitlePipe</code>将用于添加“先生”或“小姐”，基于我们将发送给<code class="fe ms mt mu mv b">UserTitlePipe</code>的参数性别。</p><p id="e292" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">运行这些命令，在名为pipes的文件夹中生成上述管道。</p><pre class="kj kk kl km gt mx mv my mz aw na bi"><span id="68ca" class="nb la it mv b gy nc nd l ne nf">ng g pipe pipes/currency<br/>ng g pipe pipes/user-title</span></pre><p id="77ce" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">这是应用程序的文件夹结构。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/085102412f11950af134e04658dfb4a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:486/format:webp/1*ziNJ05bx63KsfcKyBL5QLA.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">文件夹结构</figcaption></figure><h1 id="371d" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">修改角形管道</h1><p id="522e" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">打开currency.pipe.ts和user-title.pipe.ts并添加下面的代码。</p><p id="1867" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu">货币管道</strong></p><pre class="kj kk kl km gt mx mv my mz aw na bi"><span id="3d34" class="nb la it mv b gy nc nd l ne nf">import { Pipe, PipeTransform } from '@angular/core';</span><span id="6143" class="nb la it mv b gy nh nd l ne nf">@Pipe({<br/>  name: 'currency'<br/>})</span><span id="5011" class="nb la it mv b gy nh nd l ne nf">export class CurrencyPipe implements PipeTransform {<br/>  transform(value: number): any {<br/>    return "$" + value;<br/>  }<br/>}</span></pre><p id="c31a" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">您可以根据需要修改管道的名称，以便在HTML模板中使用。至于现在，我们先把它作为‘货币’保存。</p><p id="1939" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu">用户标题.管道. ts </strong></p><pre class="kj kk kl km gt mx mv my mz aw na bi"><span id="0e14" class="nb la it mv b gy nc nd l ne nf">import { Pipe, PipeTransform } from '@angular/core';</span><span id="797c" class="nb la it mv b gy nh nd l ne nf">@Pipe({<br/>  name: 'userTitle'<br/>})</span><span id="68e8" class="nb la it mv b gy nh nd l ne nf">export class UserTitlePipe implements PipeTransform {<br/>  transform(name: string, gender: string): string {<br/>    if (gender === 'male')<br/>      return "Mr. " + name;<br/>    else<br/>      return "Miss " + name;<br/>  }<br/>}</span></pre><p id="33d0" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">这里，我们添加了另一个名为“性别”的参数作为比较值。</p><p id="ac01" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">不要忘记更新<strong class="lt iu"> app.module.ts </strong>如下。</p><pre class="kj kk kl km gt mx mv my mz aw na bi"><span id="a854" class="nb la it mv b gy nc nd l ne nf">import { BrowserModule } from '@angular/platform-browser';<br/>import { NgModule } from '@angular/core';<br/>import { AppRoutingModule } from './app-routing.module';<br/>import { AppComponent } from './app.component';<br/>import { ReactiveFormsModule } from "@angular/forms";<br/>import { UserTitlePipe } from './pipes/user-title.pipe';<br/>import { CurrencyPipe } from './pipes/currency.pipe';</span><span id="d391" class="nb la it mv b gy nh nd l ne nf">@NgModule({<br/> declarations: [<br/>  AppComponent,<br/>  UserTitlePipe,<br/>  CurrencyPipe<br/> ],<br/> imports: [<br/>  BrowserModule,<br/>  AppRoutingModule,<br/>  ReactiveFormsModule<br/> ],<br/> providers: [CurrencyPipe, UserTitlePipe],<br/> bootstrap: [AppComponent]<br/>})<br/>export class AppModule { }</span></pre><h1 id="67cd" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">应用角形管道</h1><p id="da0d" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">为了应用角形管道，我们将显示一个包含一些细节的用户配置文件——名字、姓氏、性别和帐户余额。</p><p id="2d01" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><code class="fe ms mt mu mv b">UserTitlePipe</code>应用于名字，而CurrencyPipe应用于帐户余额。</p><p id="6fd1" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu">app.component.html</strong></p><pre class="kj kk kl km gt mx mv my mz aw na bi"><span id="5dfa" class="nb la it mv b gy nc nd l ne nf">&lt;div class="container"&gt;<br/> &lt;div class="row py-4"&gt;<br/>  &lt;div class="col text-center"&gt;<br/>   &lt;h1&gt;User Profile&lt;/h1&gt;<br/>  &lt;/div&gt;<br/> &lt;/div&gt;</span><span id="1634" class="nb la it mv b gy nh nd l ne nf"> &lt;div class="row justify-content-center"&gt;<br/>  &lt;div class="col-md-6"&gt;<br/>   &lt;div class="form-group row"&gt;<br/>    &lt;label for="firstname" class="col-sm-6 col-form-label"&gt;First Name&lt;/label&gt;<br/>    &lt;div class="col-sm-6"&gt;<br/>     &lt;p&gt;:{{ user.firstname | userTitle:user.gender }}&lt;/p&gt;<br/>    &lt;/div&gt;<br/>   &lt;/div&gt;</span><span id="1c5d" class="nb la it mv b gy nh nd l ne nf">   &lt;div class="form-group row"&gt;<br/>    &lt;label for="lastname" class="col-sm-6 col-form-label"&gt;Last Name&lt;/label&gt;<br/>    &lt;div class="col-sm-6"&gt;<br/>     &lt;p&gt;:{{ user.lastname }}&lt;/p&gt;<br/>    &lt;/div&gt;<br/>   &lt;/div&gt;</span><span id="cdae" class="nb la it mv b gy nh nd l ne nf">   &lt;div class="form-group row"&gt;<br/>    &lt;label for="gender" class="col-sm-6 col-form-label"&gt;Gender&lt;/label&gt;<br/>    &lt;div class="col-sm-6"&gt;<br/>     &lt;p&gt;:{{ user.gender }}&lt;/p&gt;<br/>    &lt;/div&gt;<br/>   &lt;/div&gt;</span><span id="bfed" class="nb la it mv b gy nh nd l ne nf">   &lt;div class="form-group row"&gt;<br/>    &lt;label for="balance" class="col-sm-6 col-form-label"&gt;Account Balance&lt;/label&gt;<br/>    &lt;div class="col-sm-6"&gt;<br/>     &lt;p&gt;:{{ user.balance | currency}}&lt;/p&gt;<br/>    &lt;/div&gt;<br/>   &lt;/div&gt;<br/>  &lt;/div&gt;<br/> &lt;/div&gt;<br/>&lt;/div&gt;</span></pre><p id="a96b" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu"> app.component.ts </strong></p><pre class="kj kk kl km gt mx mv my mz aw na bi"><span id="3a20" class="nb la it mv b gy nc nd l ne nf">import { Component, OnInit } from '@angular/core';<br/>import { FormBuilder, FormGroup } from '@angular/forms';<br/>import { CurrencyPipe } from './pipes/currency.pipe';<br/>import { UserTitlePipe } from './pipes/user-title.pipe';</span><span id="cc53" class="nb la it mv b gy nh nd l ne nf">@Component({<br/> selector: 'app-root',<br/> templateUrl: './app.component.html',<br/> styleUrls: ['./app.component.scss']<br/>})</span><span id="0279" class="nb la it mv b gy nh nd l ne nf">export class AppComponent {<br/> title = 'customPipe';<br/> user = {<br/>  firstname: 'Aiman',<br/>  lastname: 'Rahmat',<br/>  gender: 'male',<br/>  balance: 500<br/> }; <br/>}</span></pre><p id="d1e5" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">这是我们应用管道后的最终效果。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/9a637154cd0ac797f7ec0063e8638cb0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1188/format:webp/1*agEI_WDJZ7ZdvJaigxnbnQ.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">决赛成绩</figcaption></figure></div><div class="ab cl nj nk hx nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="im in io ip iq"><h1 id="1248" class="kz la it bd lb lc nq le lf lg nr li lj jz ns ka ll kc nt kd ln kf nu kg lp lq bi translated">结论</h1><p id="951b" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">如果您想对应用程序中收到的原始数据进行一些修改，角形管道非常有用。将数据转换成用户喜欢看到的内容。</p><p id="12c7" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">编码快乐！</p></div><div class="ab cl nj nk hx nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="im in io ip iq"><h1 id="fc76" class="kz la it bd lb lc nq le lf lg nr li lj jz ns ka ll kc nt kd ln kf nu kg lp lq bi translated">资源</h1><ul class=""><li id="dcd5" class="nv nw it lt b lu lv lx ly ma nx me ny mi nz mm oa ob oc od bi translated"><a class="ae ky" href="https://angular.io/guide/pipes" rel="noopener ugc nofollow" target="_blank">棱角分明的文件</a></li></ul></div></div>    
</body>
</html>