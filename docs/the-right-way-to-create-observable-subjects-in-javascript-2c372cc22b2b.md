# ç”¨ JavaScript åˆ›å»ºå¯è§‚å¯Ÿä¸»é¢˜çš„æ­£ç¡®æ–¹æ³•

> åŸæ–‡ï¼š<https://levelup.gitconnected.com/the-right-way-to-create-observable-subjects-in-javascript-2c372cc22b2b>

## æç¤ºå’ŒæŠ€å·§

## å…³äºå¦‚ä½•åœ¨ JavaScript å¯¹è±¡ä¸­å®šä¹‰ä¸»é¢˜çš„æœ€ä½³å®è·µã€‚

![](img/44225991f6ec6d4b10d0e3e24ce462cc.png)

ç½—ä¼¯ç‰¹Â·é²æ°ç½—åœ¨ [Unsplash](https://unsplash.com/?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) ä¸Šçš„ç…§ç‰‡

åœ¨å¤„ç†æ‚¨çš„é…· JavaScript é¡¹ç›®æ—¶ï¼Œæ‚¨å¯èƒ½éœ€è¦å®ç°ä¸€ä¸ªç®¡ç†æ•°æ®æµçš„æœåŠ¡ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ é¦–å…ˆæƒ³åˆ°çš„æ˜¯ä½¿ç”¨**è§‚å¯Ÿå¯¹è±¡**æˆ–**ä¸»é¢˜**ã€‚

æ‚¨å¯ä»¥ä½¿ç”¨åƒ Rxjs è¿™æ ·çš„åº“æ¥å®ç°å®ƒï¼Œæˆ–è€…æ‚¨ç”šè‡³å¯ä»¥è‡ªå·±å®ç°å®ƒï¼Œå°±åƒæˆ‘ä¹‹å‰åœ¨æˆ‘çš„æ–‡ç«  [**å¦‚ä½•ä½¿ç”¨æ™®é€š JavaScript ä¸­çš„ Observables ä¸­å±•ç¤ºçš„é‚£æ ·ã€‚æ²¡æœ‰ä½¿ç”¨æ¡†æ¶ï¼Œåªæ˜¯çº¯ç²¹çš„æ™®é€š JavaScript**](https://javascript.plainenglish.io/how-to-use-observables-with-vanilla-javascript-aca40a7590ff?sk=21af550f3c383951c87c208da33226b6) ã€‚

æ— è®ºå“ªç§æ–¹å¼ï¼Œæœ€åä½ éƒ½éœ€è¦åœ¨ä½ çš„æœåŠ¡å¯¹è±¡ä¸­åŒ…è£…ä¸€ä¸ª**ä¸»é¢˜**ã€‚ç„¶è€Œï¼Œè¿™æ ·åšçš„æ–¹æ³•ä¸æ­¢ä¸€ç§ã€‚

åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†äº†è§£å¦‚ä½•å®ç°è¿™ä¸€ç‚¹çš„æœ€ä½³å®è·µã€‚

[](https://medium.com/subscribe/@eng_ahmed.tarek) [## è®¢é˜…è‰¾å“ˆè¿ˆå¾·çš„æ—¶äº‹é€šè®¯ï¼Ÿ

### è®¢é˜…è‰¾å“ˆè¿ˆå¾·çš„æ—¶äº‹é€šè®¯ğŸ“°ç›´æ¥è·å¾—æœ€ä½³å®è·µã€æ•™ç¨‹ã€æç¤ºã€æŠ€å·§å’Œè®¸å¤šå…¶ä»–å¾ˆé…·çš„ä¸œè¥¿â€¦

medium.com](https://medium.com/subscribe/@eng_ahmed.tarek) ![](img/5c63acf00277c662fb96b2ff7fafea0e.png)

å…‹é‡Œæ–¯Â·é‡Œå¾·åœ¨ [Unsplash](https://unsplash.com/?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) ä¸Šæ‹æ‘„çš„ç…§ç‰‡

# ç¼–ç æ—¶é—´åˆ°äº†

æˆ‘ä»¬æ¥ä¸¾ä¸ªç®€å•çš„ä¾‹å­ã€‚åœ¨æˆ‘ä»¬çš„è§£å†³æ–¹æ¡ˆä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ª**è®¤è¯æœåŠ¡**ï¼Œå®ƒå¤„ç†ç™»å½•ã€æ³¨é”€ã€è·å–å½“å‰ç™»å½•ç”¨æˆ·ç­‰ã€‚

æˆ‘ä»¬è¿˜æœ‰ä¸€äº›æ¨¡å—**å’Œ**ï¼Œå®ƒä»¬åšä¸€äº›æœ‰è¶£çš„äº‹æƒ…ï¼Œéœ€è¦åœ¨æŸä¸ªæ—¶å€™äº†è§£ç™»å½•çš„ç”¨æˆ·ã€‚

æˆ‘ä»¬å°†é€šè¿‡ç®€å•çš„æ­¥éª¤æ¥å®ç°è¿™ä¸ªè§£å†³æ–¹æ¡ˆï¼Œå¹¶çœ‹çœ‹å®ƒä¼šèµ°å‘ä½•æ–¹ã€‚

![](img/f0e72bdef0106eb02e33b29eeb16b4c6.png)

æ—èµ›Â·äº¨ä¼å¾·åœ¨ [Unsplash](https://unsplash.com/?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) ä¸Šæ‹æ‘„çš„ç…§ç‰‡

åœ¨æˆ‘ä»¬çš„è§£å†³æ–¹æ¡ˆä¸­ï¼Œæˆ‘å°†ä½¿ç”¨æˆ‘è‡ªå·±çš„**è®¢é˜…**å’Œ**ä¸»é¢˜**å¯¹è±¡çš„å®ç°ï¼Œæ­£å¦‚æˆ‘åœ¨æˆ‘çš„å¦ä¸€ç¯‡æ–‡ç«  ä¸­æ‰€è§£é‡Šçš„é‚£æ ·ã€‚

å› æ­¤ï¼Œä¸ºäº†ç®€æ´èµ·è§ï¼Œæˆ‘å°†æŠŠä»£ç æ”¾åœ¨è¿™é‡Œä½œä¸ºå¿«é€Ÿå‚è€ƒã€‚

## è®¤è¯æœåŠ¡

è¿™æ˜¯æˆ‘ä»¬åœ¨è¿™é‡Œå¯ä»¥æ³¨æ„åˆ°çš„:

1.  åœ¨`AuthenticationService`é‡Œé¢ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ª`loggedInUser`ï¼Œå®ƒæ˜¯ä¸€ä¸ª`Subject`ã€‚
2.  ä½¿ç”¨è¿™ä¸ª`loggedInUser`ï¼Œå…¶ä»–æ¨¡å—å¯ä»¥è®¢é˜…åº”ç”¨äºç™»å½•ç”¨æˆ·çš„å˜æ›´æµã€‚
3.  æˆ‘ä»¬è¿˜æœ‰`logIn`å‡½æ•°ï¼Œå®ƒæ‰§è¡Œä¸€äº› API è°ƒç”¨ï¼Œæœ€ç»ˆè®¾ç½®ç™»å½•ç”¨æˆ·å¹¶è§¦å‘`loggedInUser`ä¸»é¢˜ã€‚

## æ­£åœ¨åˆå§‹åŒ–èº«ä»½éªŒè¯æœåŠ¡

åœ¨ä¸»åº”ç”¨ç¨‹åºçš„æŸä¸ªåœ°æ–¹ï¼Œå°±è¿™ä¹ˆç®€å•ã€‚

`const authenticationService = new AuthenticationService();`

## ä¸€äº›æ¨¡å—

è¿™æ˜¯æˆ‘ä»¬åœ¨è¿™é‡Œå¯ä»¥æ³¨æ„åˆ°çš„:

1.  è¯¥æ¨¡å—è®¢é˜…`authenticationService.loggedInUser` **ä¸»é¢˜**æ¥è·å–å…³äºç™»å½•ç”¨æˆ·çš„æ›´æ–°ã€‚
2.  æ¯å½“æ›´æ–°å‘ç”Ÿæ—¶ï¼Œå°±ä¼šè®¾ç½®ä¸€ä¸ªåä¸º`loggedInUser`çš„å±€éƒ¨å˜é‡ã€‚
3.  åœ¨`DoSomeStuff`å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬è®°å½•å±€éƒ¨å˜é‡`loggedInUser`çš„å€¼ï¼Œè¯¥å€¼åº”è¯¥ä¸ **AuthenticationService** ä¸Šçš„æœ€æ–°æ›´æ–°ä¿æŒåŒæ­¥â€¦è¿˜æ˜¯ä¸åŒæ­¥ï¼Ÿ
4.  å…¶å®ä¸æ˜¯ã€‚é—®é¢˜æ˜¯ï¼Œå½“æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª **SomeModule** çš„å®ä¾‹æ—¶ï¼Œ **AuthenticationService** å·²ç»è¢«åˆ›å»ºå’Œåˆå§‹åŒ–äº†ã€‚
5.  è¿™æ„å‘³ç€åœ¨ä¸Šé¢ä»£ç çš„ç¬¬ 15 è¡Œï¼Œå±€éƒ¨å˜é‡`loggedInUser`ä»ç„¶æ˜¯`null`ï¼Œå› ä¸ºåˆ°é‚£æ—¶ä¸ºæ­¢ï¼Œå®ƒä»æœªè¢«è®¾ç½®ä¸ºå¦ä¸€ä¸ªå€¼ã€‚

![](img/d49a4ebc45e100126c7c8f56ba98b5b0.png)

ç”±[é©¬åº“æ–¯Â·æ–¯çš®æ–¯å…‹](https://unsplash.com/@markusspiske?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)åœ¨ [Unsplash](https://unsplash.com/?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) ä¸Šæ‹æ‘„çš„ç…§ç‰‡

# æ­£ç¡®çš„åšæ³•

å®é™…ä¸Šå¹¶æ²¡æœ‰é‚£ä¹ˆå¤æ‚ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹æœ‰ä¸€ç§æ¨¡å¼ï¼Œæˆ‘ç›¸ä¿¡ä½ ä»¥å‰è§è¿‡ã€‚å®ƒç”šè‡³åº”ç”¨äºä¸åŒçš„å®¢æˆ·ç«¯æ¡†æ¶ã€‚

è¯´å¤Ÿäº†ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹ä»£ç ã€‚

## å¢å¼ºå‹è®¤è¯æœåŠ¡

è¿™æ˜¯æˆ‘ä»¬åœ¨è¿™é‡Œå¯ä»¥æ³¨æ„åˆ°çš„:

1.  æˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ªåä¸º`snapshot`çš„æ–°æˆå‘˜ï¼Œå®ƒè¡¨ç¤ºä¸€ä¸ªå¯¹è±¡ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªç™»å½•ç”¨æˆ·ä½œä¸ºæˆå‘˜ã€‚
2.  æˆ‘ä»¬è¿˜æ›´æ–°äº†`logIn`å‡½æ•°çš„å®ç°ï¼Œå®ƒé¦–å…ˆæ›´æ–°`snapshot`å¯¹è±¡ï¼Œç„¶ååšå®ƒä»¥å‰åšçš„äº‹æƒ…ã€‚

## å¢å¼ºäº†ä¸€äº›æ¨¡å—

è¿™æ˜¯æˆ‘ä»¬åœ¨è¿™é‡Œå¯ä»¥æ³¨æ„åˆ°çš„:

1.  æˆ‘ä»¬æ›´æ–°äº†æœ¬åœ°å˜é‡`loggedInUser`çš„åˆå§‹åŒ–ï¼Œä»¥ä¾¿ä»`authenticationService.snapshot.loggedInUser`ä¸­è·å–å®ƒçš„å€¼ã€‚
2.  å› æ­¤ï¼Œåœ¨ä¸Šé¢ä»£ç çš„ç¬¬ 15 è¡Œï¼Œæœ¬åœ°å˜é‡`loggedInUser`çš„å€¼ä¸ä¼šä¸º nullï¼Œå®ƒå°†ä¿å­˜ç™»å½•ç”¨æˆ·çš„æœ€æ–°å€¼ã€‚

# å¸Œæœ›è¿™äº›å†…å®¹å¯¹ä½ æœ‰ç”¨ã€‚å¦‚æœæ‚¨æƒ³æ”¯æŒ:

å¦‚æœæ‚¨è¿˜ä¸æ˜¯**åª’ä»‹**ä¼šå‘˜ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ [**æˆ‘çš„æ¨èé“¾æ¥**](https://medium.com/@eng_ahmed.tarek/membership) ï¼Œè¿™æ ·æˆ‘å¯ä»¥ä»**åª’ä»‹**ä¸­è·å¾—æ‚¨çš„ä¸€éƒ¨åˆ†è´¹ç”¨ï¼Œæ‚¨æ— éœ€æ”¯ä»˜ä»»ä½•é¢å¤–è´¹ç”¨ã€‚
â–è®¢é˜… [**æˆ‘çš„ç®€è®¯**](https://medium.com/subscribe/@eng_ahmed.tarek) å°†æœ€ä½³å®è·µã€æ•™ç¨‹ã€æç¤ºã€æŠ€å·§å’Œè®¸å¤šå…¶ä»–å¾ˆé…·çš„ä¸œè¥¿ç›´æ¥å‘é€åˆ°æ‚¨çš„æ”¶ä»¶ç®±ã€‚

![](img/209d99e4bb363b45f81e070cb1f35eeb.png)

ç…§ç‰‡ç”±[æ ¼é›·ç“œå°”Â·è´æ‰˜](https://unsplash.com/@sirtook?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)åœ¨ [Unsplash](https://unsplash.com/?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) ä¸Šæ‹æ‘„

# å…¶ä»–èµ„æº

è¿™äº›æ˜¯æ‚¨å¯èƒ½ä¼šå–œæ¬¢å…¶ä»–èµ„æºã€‚

[](/paging-partitioning-main-equations-to-make-it-easy-44fe89d5290b) [## åˆ†é¡µ/åˆ†åŒºâ€”ç®€åŒ–è¿™ä¸€è¿‡ç¨‹çš„ä¸»è¦ç­‰å¼

### æœ€åï¼Œè¿™æ˜¯æ‚¨ç†è§£åˆ†é¡µ/åˆ†åŒºä¸»è¦ç­‰å¼å¹¶å­¦ä¹ å¦‚ä½•åœ¨ä»£ç ä¸­åº”ç”¨å®ƒä»¬çš„æœºä¼šã€‚

levelup.gitconnected.com](/paging-partitioning-main-equations-to-make-it-easy-44fe89d5290b) [](https://javascript.plainenglish.io/how-to-customize-webpages-ui-behavior-using-javascript-userscripts-7b6a090e0135) [## ä½¿ç”¨ JavaScript ç”¨æˆ·è„šæœ¬å®šåˆ¶ç½‘é¡µç”¨æˆ·ç•Œé¢/è¡Œä¸º

### å³ä½¿ä½ ä¸æ‹¥æœ‰è¿™ä¸ªç½‘é¡µï¼Œä½ ä»ç„¶å¯ä»¥é™„ä¸Šä½ çš„ JavaScript ç”¨æˆ·è„šæœ¬ã€‚

javascript.plainenglish.io](https://javascript.plainenglish.io/how-to-customize-webpages-ui-behavior-using-javascript-userscripts-7b6a090e0135) 

æœ€åï¼Œå¸Œæœ›ä½ è§‰å¾—è¯»è¿™ä¸ªæ•…äº‹å’Œæˆ‘å†™å®ƒä¸€æ ·æœ‰è¶£ã€‚