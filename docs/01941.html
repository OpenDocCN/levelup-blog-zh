<html>
<head>
<title>Object Labelling Tool in Vue.js (Part 2: Selecting and Removing Boxes)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Vue.js中的对象标签工具(第2部分:选择和移除框)</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/object-labelling-tool-on-vue-js-part-2-selecting-and-removing-boxes-8d7e820bdd4b?source=collection_archive---------12-----------------------#2020-02-07">https://levelup.gitconnected.com/object-labelling-tool-on-vue-js-part-2-selecting-and-removing-boxes-8d7e820bdd4b?source=collection_archive---------12-----------------------#2020-02-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="6367" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以，<a class="ae kl" rel="noopener ugc nofollow" target="_blank" href="/object-labelling-tool-on-vue-js-part-1-drawing-boxes-3e0b961aa680">现在</a>我们可以画多个盒子，但这几乎是我们唯一能做的事情。接下来的步骤应该是移除盒子并贴上标签。我更喜欢从移除开始。实现拖动和调整大小也很棒，但我们至少应该能够删除并再次创建一个框。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/ba323ad4b2aabd9e6a3365af95a1466a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*368TRD89AsHmKhDf5vdzPw.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated">这是我们将得到的</figcaption></figure><p id="7844" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先，让我们使我们的盒子可选择。在前一部分中，我创建了属性<code class="fe lc ld le lf b">active</code>来标记当前正在绘制的框。我将使用这个属性，并为<code class="fe lc ld le lf b">Box</code>组件添加相应的道具和方法。</p><pre class="kn ko kp kq gt lg lf lh li aw lj bi"><span id="6408" class="lk ll iq lf b gy lm ln l lo lp">&lt;template&gt;<br/>    &lt;div class="box-wrapper"&gt;<br/>        &lt;div class="box" :style="{<br/>                 top: bTop + 'px', <br/>                 left: bLeft + 'px', <br/>                 width: bWidth + 'px', <br/>                 height: bHeight + 'px'<br/>             }"<br/>             <strong class="lf ir">v-bind:class="{'active': bActive}"<br/>             @mousedown="selectBox"</strong><br/>        &gt;<br/>        &lt;/div&gt;<br/>    &lt;/div&gt;<br/>&lt;/template&gt;<br/><br/>&lt;script&gt;<br/>    export default {<br/>        name: "Box",<br/>        props: [<br/>            'b-top', 'b-left', 'b-width', 'b-height',<br/>            <strong class="lf ir">'on-select', 'b-active', 'b-index'</strong><br/>        ],<br/>        methods: {<br/>            <strong class="lf ir">selectBox() {<br/>                this.onSelect(this.bIndex)<br/>            },</strong><br/>        }<br/>    }<br/>&lt;/script&gt;<br/><br/>&lt;style lang="scss" scoped&gt;<br/>    .box {<br/>        position: absolute;<br/>        border: 2px #90ee90 solid;<br/><br/>        &amp;:hover, &amp;.active {<br/>            background-color: rgba(144, 238, 144, .2);<br/>        }<br/><br/>        z-index: 3;<br/>    }<br/>&lt;/style&gt;</span></pre><p id="26d6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">并将所有必要的数据从<code class="fe lc ld le lf b">App</code>传递到<code class="fe lc ld le lf b">Box</code></p><pre class="kn ko kp kq gt lg lf lh li aw lj bi"><span id="98ad" class="lk ll iq lf b gy lm ln l lo lp">&lt;template&gt;<br/>    &lt;div id="app"&gt;<br/>        &lt;div id="image-wrapper" :style="{backgroundImage: `url(caterpillar.jpg)`}"<br/>            @mousedown="startDrawingBox" <br/>            @mousemove="changeBox" <br/>            @mouseup="stopDrawingBox"&gt;<br/>            &lt;Box v-if="drawingBox.active"<br/>                 :b-width="drawingBox.width"<br/>                 :b-height="drawingBox.height"<br/>                 :b-top="drawingBox.top"<br/>                 :b-left="drawingBox.left"/&gt;<br/>            &lt;Box v-for="(<em class="lq">box</em>, <em class="lq">i</em>) in boxes" :key="<em class="lq">i</em>"<br/>                 :b-top="<em class="lq">box</em>.top" :b-left="<em class="lq">box</em>.left"<br/>                 :b-width="<em class="lq">box</em>.width" :b-height="<em class="lq">box</em>.height"<br/>                 <strong class="lf ir">:b-active="<em class="lq">i</em>===activeBoxIndex"<br/>                 :on-select="makeBoxActive" :b-index="<em class="lq">i</em>"</strong><br/>            /&gt;<br/>        &lt;/div&gt;<br/>    &lt;/div&gt;<br/>&lt;/template&gt;<br/>&lt;script&gt;<br/>...<br/>    methods: {<br/>        ...<br/>        <strong class="lf ir">makeBoxActive(i) {<br/>            this.activeBoxIndex = i;<br/>        },</strong><br/>    }<br/>...</span></pre><p id="354c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您会看到选中的框用浅绿色背景突出显示</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi lr"><img src="../Images/0b14f1b9145331487dec64ee1cd188dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*yHNEWbwdxmu3BdoNBaiqmw.gif"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated">不多，但这是诚实的工作:)</figcaption></figure><p id="d0ae" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，如果盒子是活动的，我们应该画一个红色的小叉</p><pre class="kn ko kp kq gt lg lf lh li aw lj bi"><span id="8035" class="lk ll iq lf b gy lm ln l lo lp">&lt;template&gt;<br/>    &lt;div class="box-wrapper"&gt;<br/>        <strong class="lf ir">&lt;a class="box-delete" <br/>           v-on:click="removeMyself" <br/>           v-if="bActive"<br/>           :style="{<br/>               top: (bTop - 18) +'px', <br/>               left: (bLeft + bWidth) + 'px'<br/>               }"&gt;<br/>            x<br/>        &lt;/a&gt;</strong><br/>        &lt;div class="box" :style="{<br/>                 top: bTop + 'px',<br/>                 left: bLeft + 'px',<br/>                 width: bWidth + 'px',<br/>                 height: bHeight + 'px'<br/>             }"<br/>             v-bind:class="{'active': bActive}"<br/>             @mousedown="selectBox"<br/>        &gt;<br/>        &lt;/div&gt;<br/>    &lt;/div&gt;<br/>&lt;/template&gt;<br/><br/>&lt;script&gt;<br/>    export default {<br/>        name: "Box",<br/>        props: [<br/>            'b-top', 'b-left', 'b-width', 'b-height',<br/>            'on-select', 'b-active', 'b-index', <strong class="lf ir">'on-delete'</strong><br/>        ],<br/>        methods: {<br/>            selectBox() {<br/>                this.onSelect(this.bIndex)<br/>            },<br/>            <strong class="lf ir">removeMyself() {<br/>                this.onDelete(this.bIndex)<br/>            },</strong><br/>        }<br/>    }<br/>&lt;/script&gt;<br/><br/>&lt;style lang="scss" scoped&gt;<br/>    .box {<br/>        position: absolute;<br/>        border: 2px #90ee90 solid;<br/><br/>        &amp;:hover, &amp;.active {<br/>            background-color: rgba(144, 238, 144, .2);<br/>        }<br/><br/>        z-index: 3;<br/>    }<br/>    <strong class="lf ir">.box-delete {<br/>        position: absolute;<br/>        z-index: 6;<br/>        font-weight: bold;<br/>        color: red;<br/>        cursor: pointer;<br/>        font-size: 24px;<br/>        font-weight: bold;<br/>    }</strong><br/>&lt;/style&gt;</span></pre><p id="268a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，我们将从<code class="fe lc ld le lf b">App</code>中的盒子数据中移除盒子索引的回调传递给<code class="fe lc ld le lf b">Box</code></p><pre class="kn ko kp kq gt lg lf lh li aw lj bi"><span id="1124" class="lk ll iq lf b gy lm ln l lo lp">&lt;template&gt;<br/>    &lt;div id="app"&gt;<br/>        &lt;div id="image-wrapper"...&gt;<br/>            &lt;Box v-if="drawingBox.active"<br/>                 :b-width="drawingBox.width"<br/>                 :b-height="drawingBox.height"<br/>                 :b-top="drawingBox.top"<br/>                 :b-left="drawingBox.left"/&gt;<br/>            &lt;Box v-for="(<em class="lq">box</em>, <em class="lq">i</em>) in boxes" :key="<em class="lq">i</em>"<br/>                 :b-top="<em class="lq">box</em>.top" :b-left="<em class="lq">box</em>.left"<br/>                 :b-width="<em class="lq">box</em>.width" :b-height="<em class="lq">box</em>.height"<br/>                 :b-active="<em class="lq">i</em>===activeBoxIndex"<br/>                 :on-select="makeBoxActive" :b-index="<em class="lq">i</em>"<br/>                 <strong class="lf ir">:on-delete="removeBox"</strong><br/>            /&gt;<br/>        &lt;/div&gt;<br/>    &lt;/div&gt;<br/>&lt;/template&gt;<br/>&lt;script&gt;<br/>...<br/>    methods: {<br/>        ...<br/>        makeBoxActive(i) {<br/>            this.activeBoxIndex = i;<br/>        },<br/>        <strong class="lf ir">removeBox(i) {<br/>            this.boxes = this.boxes.filter((elem, index) =&gt; {<br/>                return index !== i;<br/>            });<br/>            this.activeBoxIndex = null;<br/>        },</strong><br/>    }<br/>...</span></pre><p id="a04c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有用！</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi lr"><img src="../Images/839599cf4b98dec701c76f559c473400.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*7hcfaegCwXrULZEB_Z7LIw.gif"/></div></div></figure><p id="3b98" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果有什么不清楚的，可以下载<a class="ae kl" href="https://github.com/kate-kate/label-demo" rel="noopener ugc nofollow" target="_blank">我的回购</a>玩一玩:)</p></div></div>    
</body>
</html>