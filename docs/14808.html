<html>
<head>
<title>Rust: Option Type Explained</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ç”Ÿé”ˆ:é€‰é¡¹ç±»å‹è¯´æ˜</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://levelup.gitconnected.com/rust-option-type-explained-23fe4ccb841b?source=collection_archive---------9-----------------------#2022-12-26">https://levelup.gitconnected.com/rust-option-type-explained-23fe4ccb841b?source=collection_archive---------9-----------------------#2022-12-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="a995" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">äº†è§£Rustçš„<code class="fe ko kp kq kr b">Option</code>ç±»å‹ï¼Œå®ƒè¡¨ç¤ºå€¼çš„å­˜åœ¨æˆ–ä¸å­˜åœ¨ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨å®ƒæ¥å¤„ç†å¯èƒ½å­˜åœ¨æˆ–å¯èƒ½ä¸å­˜åœ¨çš„å€¼ã€‚</p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi ks"><img src="../Images/27f985263bba3747eabc6a34e4ea75cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0uJB2qBaaGR1biF82CBOgw.jpeg"/></div></div></figure><p id="fdd8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe ko kp kq kr b">Option</code>ç±»å‹æ˜¯Rustç¼–ç¨‹è¯­è¨€ä¸­çš„ä¸€ç§ç±»å‹ï¼Œè¡¨ç¤ºå€¼çš„å­˜åœ¨æˆ–ä¸å­˜åœ¨ã€‚å®ƒæ˜¯ä¸€ç§æšä¸¾ç±»å‹ï¼Œè¿™æ„å‘³ç€å®ƒæœ‰ä¸€ç»„å¯ä»¥æ¥å—çš„å›ºå®šå€¼ã€‚<code class="fe ko kp kq kr b">Option</code>çš„ä¸¤ä¸ªå˜ç§æ˜¯<code class="fe ko kp kq kr b">Some</code>å’Œ<code class="fe ko kp kq kr b">None</code>ã€‚</p><p id="1228" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">ä¸‹é¢æ˜¯ä½¿ç”¨<code class="fe ko kp kq kr b">Option</code>çš„ä¸€èˆ¬è¯­æ³•:</p><pre class="kt ku kv kw gt le kr lf bn lg lh bi"><span id="f430" class="li lj it kr b be lk ll l lm ln">let option: Option&lt;T&gt; = some_function_that_returns_an_option();</span></pre><p id="fd9a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe ko kp kq kr b">Option</code>ç±»å‹æœ‰ä¸€ä¸ªç±»å‹å‚æ•°:<code class="fe ko kp kq kr b">T</code>ã€‚<code class="fe ko kp kq kr b">T</code>è¡¨ç¤ºå¯èƒ½å­˜åœ¨ä¹Ÿå¯èƒ½ä¸å­˜åœ¨çš„å€¼çš„ç±»å‹ã€‚</p><p id="3a47" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼Œè¯´æ˜å¦‚ä½•ä½¿ç”¨<code class="fe ko kp kq kr b">Option</code>æ¥å¤„ç†ä¸€ä¸ªå‡½æ•°çš„ç»“æœï¼Œè¿™ä¸ªå‡½æ•°å¯èƒ½è¿”å›å€¼ï¼Œä¹Ÿå¯èƒ½ä¸è¿”å›å€¼:</p><pre class="kt ku kv kw gt le kr lf bn lg lh bi"><span id="597d" class="li lj it kr b be lk ll l lm ln">fn find(haystack: &amp;str, needle: char) -&gt; Option&lt;usize&gt; {<br/>    for (index, c) in haystack.char_indices() {<br/>        if c == needle {<br/>            return Some(index);<br/>        }<br/>    }<br/>    None<br/>}<br/><br/>fn main() {<br/>    let result = find("hello", 'l');<br/>    match result {<br/>        Some(index) =&gt; println!("Found at index {}", index),<br/>        None =&gt; println!("Not found"),<br/>    }<br/>}</span></pre><p id="6425" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">åœ¨æœ¬ä¾‹ä¸­ï¼Œ<code class="fe ko kp kq kr b">find</code>å‡½æ•°æ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²å’Œä¸€ä¸ªå­—ç¬¦ï¼Œå¹¶è¿”å›è¯¥å­—ç¬¦åœ¨å­—ç¬¦ä¸²ä¸­ç¬¬ä¸€æ¬¡å‡ºç°çš„ç´¢å¼•(å¦‚æœå­˜åœ¨)ã€‚å¦‚æœåœ¨å­—ç¬¦ä¸²ä¸­æ²¡æœ‰æ‰¾åˆ°è¯¥å­—ç¬¦ï¼Œåˆ™è¿”å›<code class="fe ko kp kq kr b">None</code>ã€‚</p><p id="b585" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">åœ¨<code class="fe ko kp kq kr b">main</code>å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ª<code class="fe ko kp kq kr b">match</code>è¡¨è¾¾å¼æ¥å¤„ç†<code class="fe ko kp kq kr b">find</code>å‡½æ•°è¿”å›çš„<code class="fe ko kp kq kr b">Option</code>å€¼ã€‚å¦‚æœå€¼æ˜¯<code class="fe ko kp kq kr b">Some</code>ï¼Œæˆ‘ä»¬æ‰“å°å­—ç¬¦çš„ç´¢å¼•ã€‚å¦‚æœå€¼æ˜¯<code class="fe ko kp kq kr b">None</code>ï¼Œæˆ‘ä»¬æ‰“å°ä¸€æ¡æ¶ˆæ¯ï¼ŒæŒ‡å‡ºæ²¡æœ‰æ‰¾åˆ°è¯¥å­—ç¬¦ã€‚</p><p id="952c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">æ‚¨è¿˜å¯ä»¥ä½¿ç”¨<code class="fe ko kp kq kr b">map</code>å’Œ<code class="fe ko kp kq kr b">map_or</code>åˆ†åˆ«è½¬æ¢<code class="fe ko kp kq kr b">Some</code>å˜é‡ä¸­çš„å€¼æˆ–ä¸º<code class="fe ko kp kq kr b">None</code>æä¾›é»˜è®¤å€¼ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨è¿™äº›æ–¹æ³•çš„ç¤ºä¾‹:</p><pre class="kt ku kv kw gt le kr lf bn lg lh bi"><span id="9df2" class="li lj it kr b be lk ll l lm ln">fn find(haystack: &amp;str, needle: char) -&gt; Option&lt;usize&gt; {<br/>    for (index, c) in haystack.char_indices() {<br/>        if c == needle {<br/>            return Some(index);<br/>        }<br/>    }<br/>    None<br/>}<br/><br/>fn main() {<br/>    let result = find("hello", 'l').map(|index| index + 1);<br/>    let index = result.map_or(0, |index| index);<br/>    println!("Index: {}", index);<br/>}</span></pre><p id="ceb7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨<code class="fe ko kp kq kr b">map</code>æ–¹æ³•å°†<code class="fe ko kp kq kr b">find</code>å‡½æ•°è¿”å›çš„<code class="fe ko kp kq kr b">Option</code>å€¼çš„<code class="fe ko kp kq kr b">Some</code>å˜é‡ä¸­çš„å€¼åŠ 1ã€‚ç„¶åï¼Œå¦‚æœ<code class="fe ko kp kq kr b">Option</code>å€¼ä¸º<code class="fe ko kp kq kr b">None</code>ï¼Œæˆ‘ä»¬ä½¿ç”¨<code class="fe ko kp kq kr b">map_or</code>æ–¹æ³•æä¾›é»˜è®¤å€¼0ã€‚<code class="fe ko kp kq kr b">index</code>çš„æœ€ç»ˆå€¼å°†æ˜¯<code class="fe ko kp kq kr b">Some</code>å˜é‡å†…çš„è½¬æ¢å€¼æˆ–é»˜è®¤å€¼0ã€‚</p><p id="d53c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">ä¹Ÿå¯ä»¥ä½¿ç”¨<code class="fe ko kp kq kr b">and_then</code>å°†<code class="fe ko kp kq kr b">Option</code>å€¼é“¾æ¥åœ¨ä¸€èµ·ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨<code class="fe ko kp kq kr b">and_then</code>çš„ä¾‹å­:</p><pre class="kt ku kv kw gt le kr lf bn lg lh bi"><span id="4663" class="li lj it kr b be lk ll l lm ln">fn parse_int(input: &amp;str) -&gt; Option&lt;i32&gt; {<br/>    match input.parse() {<br/>        Ok(number) =&gt; Some(number),<br/>        Err(_) =&gt; None,<br/>    }<br/>}<br/><br/>fn divide(numerator: i32, denominator: i32) -&gt; Option&lt;i32&gt; {<br/>    if denominator == 0 {<br/>        None<br/>    } else {<br/>        Some(numerator / denominator)<br/>    }<br/>}<br/><br/>fn main() {<br/>    let result = parse_int("10").and_then(|numerator| {<br/>        parse_int("0").and_then(|denominator| {<br/>            divide(numerator, denominator)<br/>        })<br/>    });<br/>    match result {<br/>        Some(result) =&gt; println!("Result: {}", result),<br/>        None =&gt; println!("Error"),<br/>    }<br/>}</span></pre><p id="1405" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸‰ä¸ªå‡½æ•°:<code class="fe ko kp kq kr b">parse_int</code>ï¼Œå®ƒå°†ä¸€ä¸ªå­—ç¬¦ä¸²è§£ææˆä¸€ä¸ª<code class="fe ko kp kq kr b">i32</code>å€¼ï¼Œå¹¶è¿”å›ä¸€ä¸ª<code class="fe ko kp kq kr b">Option</code>ï¼›<code class="fe ko kp kq kr b">divide</code>ï¼Œå°†ä¸€ä¸ª<code class="fe ko kp kq kr b">i32</code>å€¼é™¤ä»¥å¦ä¸€ä¸ªå€¼ï¼Œè¿”å›ä¸€ä¸ª<code class="fe ko kp kq kr b">Option</code>ï¼›å’Œ<code class="fe ko kp kq kr b">main</code>ï¼Œå®ƒä½¿ç”¨<code class="fe ko kp kq kr b">and_then</code>å°†è¿™ä¸¤ä¸ªå‡½æ•°é“¾æ¥åœ¨ä¸€èµ·ã€‚</p><p id="3097" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe ko kp kq kr b">parse_int</code>å‡½æ•°æ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸ºè¾“å…¥ï¼Œå¹¶å°†å…¶è§£æä¸ºä¸€ä¸ª<code class="fe ko kp kq kr b">i32</code>å€¼ã€‚å¦‚æœè§£ææˆåŠŸï¼Œå®ƒå°†è¿”å›ä¸€ä¸ªåŒ…å«<code class="fe ko kp kq kr b">i32</code>å€¼çš„<code class="fe ko kp kq kr b">Some</code>å˜é‡ã€‚å¦‚æœè§£æå¤±è´¥ï¼Œå®ƒè¿”å›ä¸€ä¸ª<code class="fe ko kp kq kr b">None</code>å˜é‡ã€‚</p><p id="6bcf" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe ko kp kq kr b">divide</code>å‡½æ•°å°†ä¸¤ä¸ª<code class="fe ko kp kq kr b">i32</code>å€¼ä½œä¸ºè¾“å…¥ï¼Œå¦‚æœåˆ†æ¯ä¸ä¸ºé›¶ï¼Œåˆ™è¿”å›ä¸€ä¸ªåŒ…å«é™¤æ³•ç»“æœçš„<code class="fe ko kp kq kr b">Some</code>å˜é‡ã€‚å¦‚æœåˆ†æ¯ä¸ºé›¶ï¼Œåˆ™è¿”å›ä¸€ä¸ª<code class="fe ko kp kq kr b">None</code>å˜é‡ã€‚</p><p id="a0a5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">åœ¨<code class="fe ko kp kq kr b">main</code>å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨<code class="fe ko kp kq kr b">and_then</code>å°†<code class="fe ko kp kq kr b">parse_int</code>å’Œ<code class="fe ko kp kq kr b">divide</code>å‡½æ•°çš„ç»“æœé“¾æ¥åœ¨ä¸€èµ·ã€‚å¦‚æœè¿™äº›å‡½æ•°ä¸­çš„ä»»ä½•ä¸€ä¸ªè¿”å›ä¸€ä¸ª<code class="fe ko kp kq kr b">None</code>å˜é‡ï¼Œæ•´ä¸ªé“¾å°†çŸ­è·¯å¹¶è¿”å›ä¸€ä¸ª<code class="fe ko kp kq kr b">None</code>å˜é‡ã€‚å¦‚æœä¸¤ä¸ªå‡½æ•°éƒ½è¿”å›ä¸€ä¸ª<code class="fe ko kp kq kr b">Some</code>å˜é‡ï¼Œæœ€ç»ˆç»“æœå°†æ˜¯ç”±<code class="fe ko kp kq kr b">divide</code>å‡½æ•°è¿”å›çš„<code class="fe ko kp kq kr b">Some</code>å˜é‡ã€‚</p><h2 id="e576" class="lo lj it bd lp lq lr dn ls lt lu dp lv kb lw lx ly kf lz ma mb kj mc md me mf bi translated">ä½ æƒ³è”ç³»å—ï¼Ÿ</h2><p id="6350" class="pw-post-body-paragraph jq jr it js b jt mg jv jw jx mh jz ka kb mi kd ke kf mj kh ki kj mk kl km kn im bi translated">å¦‚æœä½ æƒ³è”ç³»æˆ‘ï¼Œè¯·åœ¨LinkedInä¸Šç»™æˆ‘æ‰“ç”µè¯ã€‚</p><p id="c598" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">å¦å¤–ï¼Œè¯·éšæ„æŸ¥çœ‹<a class="ae ml" href="https://medium.com/@mr-pascal/my-book-recommendations-4b9f73bf961b" rel="noopener">æˆ‘çš„ä¹¦ç±æ¨è</a>ğŸ“šã€‚</p></div><div class="ab cl mm mn hx mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="im in io ip iq"><div class="kt ku kv kw gt mt"><a href="https://mr-pascal.medium.com/my-book-recommendations-4b9f73bf961b" rel="noopener follow" target="_blank"><div class="mu ab fo"><div class="mv ab mw cl cj mx"><h2 class="bd iu gy z fp my fr fs mz fu fw is bi translated">æˆ‘çš„ä¹¦ç±æ¨è</h2><div class="na l"><h3 class="bd b gy z fp my fr fs mz fu fw dk translated">åœ¨æ¥ä¸‹æ¥çš„ç« èŠ‚ä¸­ï¼Œä½ å¯ä»¥æ‰¾åˆ°æˆ‘å¯¹æ‰€æœ‰æ—¥å¸¸ç”Ÿæ´»è¯é¢˜çš„ä¹¦ç±æ¨èï¼Œå®ƒä»¬å¯¹æˆ‘å¸®åŠ©å¾ˆå¤§ã€‚</h3></div><div class="nb l"><p class="bd b dl z fp my fr fs mz fu fw dk translated">mr-pascal.medium.com</p></div></div><div class="nc l"><div class="nd l ne nf ng nc nh lc mt"/></div></div></a></div><div class="ni nj gp gr nk mt"><a href="https://mr-pascal.medium.com/membership" rel="noopener follow" target="_blank"><div class="mu ab fo"><div class="mv ab mw cl cj mx"><h2 class="bd iu gy z fp my fr fs mz fu fw is bi translated">é€šè¿‡æˆ‘çš„æ¨èé“¾æ¥åŠ å…¥Mediumâ€”Pascal Zwikirsch</h2><div class="na l"><h3 class="bd b gy z fp my fr fs mz fu fw dk translated">ä½œä¸ºä¸€ä¸ªåª’ä½“ä¼šå‘˜ï¼Œä½ çš„ä¼šå‘˜è´¹çš„ä¸€éƒ¨åˆ†ä¼šç»™ä½ é˜…è¯»çš„ä½œå®¶ï¼Œä½ å¯ä»¥å®Œå…¨æ¥è§¦åˆ°æ¯ä¸€ä¸ªæ•…äº‹â€¦</h3></div><div class="nb l"><p class="bd b dl z fp my fr fs mz fu fw dk translated">mr-pascal.medium.com</p></div></div><div class="nc l"><div class="nl l ne nf ng nc nh lc mt"/></div></div></a></div></div></div>    
</body>
</html>