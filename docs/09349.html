<html>
<head>
<title>Nodemailer with Gmail not working?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">带有Gmail的Nodemailer无法工作？</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/nodemailer-with-gmail-not-working-4ed254258ac?source=collection_archive---------3-----------------------#2021-07-30">https://levelup.gitconnected.com/nodemailer-with-gmail-not-working-4ed254258ac?source=collection_archive---------3-----------------------#2021-07-30</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="bb42" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">了解其工作原理第一部分:如何在Gmail中使用Nodemailer？…</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/c9641b6f2392a061ba1094ef4306457e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*V9DL6sxZH_-Kprm6INgxLw.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者:FAM</figcaption></figure><p id="6a18" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">您是否正在寻找一种在Node js应用程序中发送电子邮件的方法？你已经开始做这件事了吗？别担心，这篇文章会让你成功地发送你的第一封邮件！</p><p id="60d8" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">因为安全问题，这有点复杂。所以让我澄清一下关于通过Nodemailer发送电子邮件的所有事情！</p><h2 id="ae8a" class="lu lv it bd lw lx ly dn lz ma mb dp mc lh md me mf ll mg mh mi lp mj mk ml mm bi translated">要求</h2><ul class=""><li id="e3ba" class="mn mo it la b lb mp le mq lh mr ll ms lp mt lt mu mv mw mx bi translated">Nodemailer用于NodeJS apps，所以你需要<strong class="la iu"> </strong> <a class="ae my" href="https://nodejs.org/en/download/" rel="noopener ugc nofollow" target="_blank"> <strong class="la iu">安装它</strong> </a>。</li><li id="ca6d" class="mn mo it la b lb mz le na lh nb ll nc lp nd lt mu mv mw mx bi translated">Nodemailer帮你轻松的为你的node app发邮件，像做蛋糕一样。所以，当然，我们需要<a class="ae my" href="https://www.npmjs.com/package/nodemailer" rel="noopener ugc nofollow" target="_blank">用NPM或纱线安装</a>才能使用它。</li><li id="34db" class="mn mo it la b lb mz le na lh nb ll nc lp nd lt mu mv mw mx bi translated">为Gmail安装<a class="ae my" href="https://www.npmjs.com/package/googleapis" rel="noopener ugc nofollow" target="_blank">Google API</a>。</li></ul></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><p id="e31e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">有两种使用nodemailer的方法:</p><ul class=""><li id="d758" class="mn mo it la b lb lc le lf lh nl ll nm lp nn lt mu mv mw mx bi translated">简单快捷的方法。</li><li id="bbb8" class="mn mo it la b lb mz le na lh nb ll nc lp nd lt mu mv mw mx bi translated">OAuth2认证的安全方式。专业的方式。</li></ul></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><h1 id="b1c9" class="no lv it bd lw np nq nr lz ns nt nu mc jz nv ka mf kc nw kd mi kf nx kg ml ny bi translated">简单快捷的方法</h1><p id="5fda" class="pw-post-body-paragraph ky kz it la b lb mp ju ld le mq jx lg lh nz lj lk ll oa ln lo lp ob lr ls lt im bi translated">这种方式很快，但需要在您发送电子邮件的邮件帐户中激活不安全模式:</p><ul class=""><li id="455f" class="mn mo it la b lb lc le lf lh nl ll nm lp nn lt mu mv mw mx bi translated"><a class="ae my" href="http://www.google.com/accounts/DisplayUnlockCaptcha" rel="noopener ugc nofollow" target="_blank">http://www.google.com/accounts/DisplayUnlockCaptcha</a></li><li id="7820" class="mn mo it la b lb mz le na lh nb ll nc lp nd lt mu mv mw mx bi translated"><a class="ae my" href="https://www.google.com/settings/security/lesssecureapps" rel="noopener ugc nofollow" target="_blank">https://www.google.com/settings/security/lesssecureapps</a></li></ul><p id="043a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是正如您所看到的，这个解决方案并不是最优的。安全问题不是闹着玩的。这是我们在It界不能忽视的话题之一。</p><p id="87ea" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在某些情况下，您可能希望以这种方式使用它，因此这里有一篇文章向您展示了您需要遵循的步骤。</p><div class="oc od gp gr oe of"><a href="https://medium.com/geekculture/how-to-use-nodemailer-with-gmail-to-send-e-mails-7198e707025d" rel="noopener follow" target="_blank"><div class="og ab fo"><div class="oh ab oi cl cj oj"><h2 class="bd iu gy z fp ok fr fs ol fu fw is bi translated">如何配合Gmail使用Nodemailer发送邮件？</h2><div class="om l"><h3 class="bd b gy z fp ok fr fs ol fu fw dk translated">设置Nodemailer并开始发送电子邮件的步骤</h3></div><div class="on l"><p class="bd b dl z fp ok fr fs ol fu fw dk translated">medium.com</p></div></div><div class="oo l"><div class="op l oq or os oo ot ks of"/></div></div></a></div></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><h1 id="7f2c" class="no lv it bd lw np nq nr lz ns nt nu mc jz nv ka mf kc nw kd mi kf nx kg ml ny bi translated">OAuth2认证的安全方式</h1><p id="fd52" class="pw-post-body-paragraph ky kz it la b lb mp ju ld le mq jx lg lh nz lj lk ll oa ln lo lp ob lr ls lt im bi translated"><strong class="la iu"> <em class="ou"> /！\ —如果您已经理解了它是如何工作的，并且想要立即跳到代码，请随意这样做。</em> </strong></p><p id="909d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这种安全的方式将使您通过不激活低安全模式来保护您的电子邮件帐户，并通过验证您的web应用程序来使事情变得正确，因此除了您的应用程序之外，没有其他人有权通过您的电子邮件帐户发送电子邮件。</p><h2 id="e3e0" class="lu lv it bd lw lx ly dn lz ma mb dp mc lh md me mf ll mg mh mi lp mj mk ml mm bi translated">让我们先简单介绍一下OAuth2</h2><blockquote class="ov"><p id="057d" class="ow ox it bd oy oz pa pb pc pd pe lt dk translated">OAuth 2.0授权框架<strong class="ak">是一种协议，允许用户授权第三方网站或应用程序访问用户的受保护资源</strong>，而不必暴露他们的长期凭证甚至身份。</p></blockquote><p id="ae2c" class="pw-post-body-paragraph ky kz it la b lb pf ju ld le pg jx lg lh ph lj lk ll pi ln lo lp pj lr ls lt im bi translated">简单来说:</p><blockquote class="pk pl pm"><p id="557b" class="ky kz ou la b lb lc ju ld le lf jx lg pn li lj lk po lm ln lo pp lq lr ls lt im bi translated"><em class="it"> OAuth2是在两个服务之间进行通信的授权(例如您的应用程序和电子邮件服务(如Gmail、Outlook等)</em></p></blockquote><p id="12e4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果没有有效的身份验证，会发生以下情况:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pq"><img src="../Images/43dccb1c32163c0a562a150b96d01631.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*y4oznbGKs8zde0w2yWL9Vw.gif"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者:FAM</figcaption></figure><p id="3f61" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在，OAuth2协议或框架出现了！</p><p id="204f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">它是这样工作的:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pq"><img src="../Images/81f81896973e58897439da050760b03a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*THh-OSYem664zpIEfDDoAA.gif"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者:FAM</figcaption></figure><p id="2065" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们一步步分析这里发生了什么:</p><h1 id="1bf8" class="no lv it bd lw np pr nr lz ns ps nu mc jz pt ka mf kc pu kd mi kf pv kg ml ny bi translated">1-通过OAuth2进行身份验证(上面gif中的步骤4)</h1><h2 id="5e25" class="lu lv it bd lw lx ly dn lz ma mb dp mc lh md me mf ll mg mh mi lp mj mk ml mm bi translated">创建一个项目</h2><p id="aca6" class="pw-post-body-paragraph ky kz it la b lb mp ju ld le mq jx lg lh nz lj lk ll oa ln lo lp ob lr ls lt im bi translated">您需要创建一个项目来在Google控制台云上使用OAuth。</p><ul class=""><li id="60e0" class="mn mo it la b lb lc le lf lh nl ll nm lp nn lt mu mv mw mx bi translated">前往<a class="ae my" href="https://console.cloud.google.com/" rel="noopener ugc nofollow" target="_blank">https://console.cloud.google.com/</a></li><li id="065b" class="mn mo it la b lb mz le na lh nb ll nc lp nd lt mu mv mw mx bi translated">连接到Gmail帐户，您将从该帐户向您的用户发送电子邮件</li></ul><p id="4302" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">因为我们想要发送电子邮件，我们需要的只是Gmail API，所以我们需要添加到项目中来使用它:</p><ul class=""><li id="d336" class="mn mo it la b lb lc le lf lh nl ll nm lp nn lt mu mv mw mx bi translated">在您的项目仪表盘上，点击<strong class="la iu"><em class="ou">+启用API和服务。</em> </strong></li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pw"><img src="../Images/4272b31037eb6302efc62e2e4e616e47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AxAZeccDx_0TfvXtfYwTBA.png"/></div></div></figure><ul class=""><li id="e69a" class="mn mo it la b lb lc le lf lh nl ll nm lp nn lt mu mv mw mx bi translated">然后选择Gmail API后:</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi px"><img src="../Images/aa5010c62b0529a19d2af5f284694c99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A4ZntCq8u4JBvgBGxu_ytg.png"/></div></div></figure><p id="0533" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们已经完成了项目设置。我们现在需要创建应用凭据。</p><h2 id="d1d1" class="lu lv it bd lw lx ly dn lz ma mb dp mc lh md me mf ll mg mh mi lp mj mk ml mm bi translated">b-生成凭证</h2><p id="b394" class="pw-post-body-paragraph ky kz it la b lb mp ju ld le mq jx lg lh nz lj lk ll oa ln lo lp ob lr ls lt im bi translated"><strong class="la iu"> <em class="ou"> /！\-如果您已经为您的应用程序生成了凭据，请跳过此步骤！</em>T9】</strong></p><p id="b4d6" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这一步很重要。当你通过邮箱发送电子邮件时，首先要进行身份验证:输入你的电子邮件和密码。在这一步中，我们不想注册并以纯文本形式传递我们的密码。那一点也不安全。</p><blockquote class="ov"><p id="413e" class="ow ox it bd oy oz pa pb pc pd pe lt dk translated">为了避免使用纯文本的真实密码，我们需要为需要访问所需资源的应用程序生成凭据(客户端id和客户端密码)。</p></blockquote><p id="2b41" class="pw-post-body-paragraph ky kz it la b lb pf ju ld le pg jx lg lh ph lj lk ll pi ln lo lp pj lr ls lt im bi translated">凭据不是用来访问我们所有的电子邮件、联系人等。不，我们只需要有限访问的凭证，在这种情况下，我们的应用程序通过它向用户发送电子邮件。</p><p id="3ea0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果您尚未生成应用OAuth凭据，请遵循以下步骤:</p><div class="oc od gp gr oe of"><a href="https://medium.com/geekculture/how-do-i-get-an-oauth-credential-35d6d0e5d617" rel="noopener follow" target="_blank"><div class="og ab fo"><div class="oh ab oi cl cj oj"><h2 class="bd iu gy z fp ok fr fs ol fu fw is bi translated">我如何获得OAuth证书？</h2><div class="om l"><h3 class="bd b gy z fp ok fr fs ol fu fw dk translated">获取Google Oauth2客户端ID的步骤？</h3></div><div class="on l"><p class="bd b dl z fp ok fr fs ol fu fw dk translated">medium.com</p></div></div><div class="oo l"><div class="py l oq or os oo ot ks of"/></div></div></a></div></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><h1 id="4e1f" class="no lv it bd lw np nq nr lz ns nt nu mc jz nv ka mf kc nw kd mi kf nx kg ml ny bi translated">2-发送您的精彩电子邮件</h1><h2 id="e293" class="lu lv it bd lw lx ly dn lz ma mb dp mc lh md me mf ll mg mh mi lp mj mk ml mm bi translated">它是怎么工作的？</h2><p id="f319" class="pw-post-body-paragraph ky kz it la b lb mp ju ld le mq jx lg lh nz lj lk ll oa ln lo lp ob lr ls lt im bi translated">现在我们有了权利和授权，我们可以享受看到我们的用户收到他们想要的电子书。</p><p id="be82" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">好的，我们的朋友<strong class="la iu">节点邮件</strong>是如何工作的？</p><p id="99b1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这很简单，我们只需要:</p><ul class=""><li id="0f39" class="mn mo it la b lb lc le lf lh nl ll nm lp nn lt mu mv mw mx bi translated">电子邮件信封:使用传输机制(SMTP等)创建Transporter。)</li><li id="9e15" class="mn mo it la b lb mz le na lh nb ll nc lp nd lt mu mv mw mx bi translated">邮件正文:设置邮件选项</li><li id="6c58" class="mn mo it la b lb mz le na lh nb ll nc lp nd lt mu mv mw mx bi translated">发送电子邮件</li></ul><p id="67ce" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当然，第一部分是至关重要的，在这个过程中需要用到它:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pq"><img src="../Images/51d229df58eaa689736d3f03429a349d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*r6Tzn5GBtUIOVykIOb4e1A.gif"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">用nodemailer和Gmail API发送邮件的全过程</figcaption></figure><h2 id="59c0" class="lu lv it bd lw lx ly dn lz ma mb dp mc lh md me mf ll mg mh mi lp mj mk ml mm bi translated">b-行动时间，让我们编码</h2><p id="610f" class="pw-post-body-paragraph ky kz it la b lb mp ju ld le mq jx lg lh nz lj lk ll oa ln lo lp ob lr ls lt im bi translated">下面是使用nodemailer构建电子邮件的下一步。下面是编码部分:</p><div class="oc od gp gr oe of"><a href="https://javascript.plainenglish.io/sending-emails-with-nodemailer-with-gmail-and-oauth2-e0b609587b7a" rel="noopener  ugc nofollow" target="_blank"><div class="og ab fo"><div class="oh ab oi cl cj oj"><h2 class="bd iu gy z fp ok fr fs ol fu fw is bi translated">如何用Nodemailer和OAuth2发送Gmail邮件？</h2><div class="om l"><h3 class="bd b gy z fp ok fr fs ol fu fw dk translated">使用Node.js、OAuth2和nodemailer的编码部分</h3></div><div class="on l"><p class="bd b dl z fp ok fr fs ol fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="oo l"><div class="pz l oq or os oo ot ks of"/></div></div></a></div></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><p id="23d9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><em class="ou">我希望这是清楚而有用的。请鼓掌支持我，并分享你的反馈，❤ </em></p><h2 id="1f3f" class="lu lv it bd lw lx ly dn lz ma mb dp mc lh md me mf ll mg mh mi lp mj mk ml mm bi translated">有用的资源:</h2><ul class=""><li id="2604" class="mn mo it la b lb mp le mq lh mr ll ms lp mt lt mu mv mw mx bi translated"><a class="ae my" href="https://community.nodemailer.com/2-0-0-beta/using-oauth2/" rel="noopener ugc nofollow" target="_blank">https://community.nodemailer.com/2-0-0-beta/using-oauth2/</a></li><li id="47f2" class="mn mo it la b lb mz le na lh nb ll nc lp nd lt mu mv mw mx bi translated"><a class="ae my" href="https://developers.google.com/identity/protocols/oauth2/javascript-implicit-flow" rel="noopener ugc nofollow" target="_blank">https://developers . Google . com/identity/protocols/oauth 2/JavaScript-implicit-flow</a></li></ul></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><h2 id="f8e5" class="lu lv it bd lw lx ly dn lz ma mb dp mc lh md me mf ll mg mh mi lp mj mk ml mm bi translated">感谢您宝贵的时间，希望这对您有用！</h2><p id="2def" class="pw-post-body-paragraph ky kz it la b lb mp ju ld le mq jx lg lh nz lj lk ll oa ln lo lp ob lr ls lt im bi translated">亲爱的读者，我希望这是明确和有用的。我希望你无论在哪里都是安全的，你的家人也是！坚持住。明天会更好！</p><p id="0b33" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu">让我们在</strong> <a class="ae my" href="https://medium.com/@famzil/" rel="noopener"> <strong class="la iu">上取得联系</strong></a><strong class="la iu"/><a class="ae my" href="https://www.linkedin.com/in/fatima-amzil-9031ba95/" rel="noopener ugc nofollow" target="_blank"><strong class="la iu">Linkedin</strong></a><strong class="la iu"/><a class="ae my" href="https://www.facebook.com/The-Front-End-World" rel="noopener ugc nofollow" target="_blank"><strong class="la iu">脸书</strong></a><strong class="la iu"/><a class="ae my" href="https://www.instagram.com/the_frontend_world/" rel="noopener ugc nofollow" target="_blank"><strong class="la iu">insta gram</strong></a><strong class="la iu"/><a class="ae my" href="https://www.youtube.com/channel/UCaxr-f9r6P1u7Y7SKFHi12g" rel="noopener ugc nofollow" target="_blank"><strong class="la iu">Youtube</strong></a><strong class="la iu">或</strong> <a class="ae my" href="https://twitter.com/FatimaAMZIL9" rel="noopener ugc nofollow" target="_blank"/></p><p id="e0a6" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><a class="ae my" href="http://www.fam-front.com/" rel="noopener ugc nofollow" target="_blank">www.fam-front.com</a></p></div></div>    
</body>
</html>