<html>
<head>
<title>Deploy FastAPI with Hypercorn HTTP/2 ASGI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Hypercorn HTTP/2 ASGI部署FastAPI</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/deploy-fastapi-with-hypercorn-http-2-asgi-8cfc304e9e7a?source=collection_archive---------6-----------------------#2021-07-14">https://levelup.gitconnected.com/deploy-fastapi-with-hypercorn-http-2-asgi-8cfc304e9e7a?source=collection_archive---------6-----------------------#2021-07-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="2448" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">另一个支持HTTP/2和HTTP/3规范的ASGI web服务器</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/4cec848025270b568cf051434eb27cbd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rmATZYTozHqdoli0y6mnCQ.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</figcaption></figure><p id="e779" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我已经介绍了相当多的关于FastAPI的教程，在这些教程中，服务器是用Uvicorn部署的，Uvicorn是一种快速的ASGI web服务器。在撰写本文时，Uvicorn目前只支持HTTP/1.1和WebSockets。根据官方文档，对HTTP/2的支持是计划中的，但是没有估计完成的时间。</p><p id="f5da" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">HTTP/2是旧HTTP/1的继承者，它减少了延迟，同时保持了相同的高级语义(方法、头字段、状态代码等)。基于维基百科，它通过以下方式改善网页加载:</p><ul class=""><li id="e06e" class="lu lv it la b lb lc le lf lh lw ll lx lp ly lt lz ma mb mc bi translated"><a class="ae md" href="https://en.wikipedia.org/wiki/Data_compression" rel="noopener ugc nofollow" target="_blank">数据压缩</a>的<a class="ae md" href="https://en.wikipedia.org/wiki/HTTP_header" rel="noopener ugc nofollow" target="_blank"> HTTP头</a></li><li id="3d88" class="lu lv it la b lb me le mf lh mg ll mh lp mi lt lz ma mb mc bi translated"><a class="ae md" href="https://en.wikipedia.org/wiki/HTTP/2_Server_Push" rel="noopener ugc nofollow" target="_blank"> HTTP/2服务器推送</a></li><li id="2353" class="lu lv it la b lb me le mf lh mg ll mh lp mi lt lz ma mb mc bi translated"><a class="ae md" href="https://en.wikipedia.org/wiki/HTTP_pipelining" rel="noopener ugc nofollow" target="_blank">请求的流水线</a></li><li id="f4f3" class="lu lv it la b lb me le mf lh mg ll mh lp mi lt lz ma mb mc bi translated">修复HTTP 1.x中的<a class="ae md" href="https://en.wikipedia.org/wiki/Head-of-line_blocking" rel="noopener ugc nofollow" target="_blank">行首阻塞</a>问题</li><li id="06a7" class="lu lv it la b lb me le mf lh mg ll mh lp mi lt lz ma mb mc bi translated"><a class="ae md" href="https://en.wikipedia.org/wiki/Multiplexing" rel="noopener ugc nofollow" target="_blank">在单个<a class="ae md" href="https://en.wikipedia.org/wiki/Transmission_Control_Protocol" rel="noopener ugc nofollow" target="_blank"> TCP </a>连接上复用</a>多个请求</li></ul><p id="0401" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">本文介绍了使用另一个名为Hypercorn的ASGI web服务器为HTTP/2部署FastAPI服务器。告诉你吧，超级角是</p><blockquote class="mj mk ml"><p id="051a" class="ky kz mm la b lb lc ju ld le lf jx lg mn li lj lk mo lm ln lo mp lq lr ls lt im bi translated">…一个基于sans-io hyper、<a class="ae md" href="https://github.com/python-hyper/h11" rel="noopener ugc nofollow" target="_blank"> h11 </a>、<a class="ae md" href="https://github.com/python-hyper/hyper-h2" rel="noopener ugc nofollow" target="_blank"> h2 </a>和<a class="ae md" href="https://github.com/python-hyper/wsproto" rel="noopener ugc nofollow" target="_blank"> wsproto </a>库并受Gunicorn启发的<a class="ae md" href="https://github.com/django/asgiref/blob/master/specs/asgi.rst" rel="noopener ugc nofollow" target="_blank"> ASGI </a> web服务器。Hypercorn支持HTTP/1、HTTP/2、WebSockets(通过HTTP/1和HTTP/2)、ASGI/2和ASGI/3规范。Hypercorn可以使用asyncio、uvloop或trio工人类型。</p></blockquote><p id="c7a7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们继续下一部分，开始安装必要的模块。</p></div><div class="ab cl mq mr hx ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="im in io ip iq"><h1 id="276e" class="mx my it bd mz na nb nc nd ne nf ng nh jz ni ka nj kc nk kd nl kf nm kg nn no bi translated">设置</h1><p id="c269" class="pw-post-body-paragraph ky kz it la b lb np ju ld le nq jx lg lh nr lj lk ll ns ln lo lp nt lr ls lt im bi translated">强烈建议您在继续安装之前创建一个虚拟环境。激活虚拟环境，并通过<code class="fe nu nv nw nx b">pip install</code>继续安装必要的软件包。</p><h2 id="021c" class="ny my it bd mz nz oa dn nd ob oc dp nh lh od oe nj ll of og nl lp oh oi nn oj bi translated">FastAPI</h2><p id="f6b4" class="pw-post-body-paragraph ky kz it la b lb np ju ld le nq jx lg lh nr lj lk ll ns ln lo lp nt lr ls lt im bi translated">运行以下命令安装FastAPI:</p><pre class="kj kk kl km gt ok nx ol om aw on bi"><span id="91a5" class="ny my it nx b gy oo op l oq or">pip install fastapi</span></pre><h2 id="8a38" class="ny my it bd mz nz oa dn nd ob oc dp nh lh od oe nj ll of og nl lp oh oi nn oj bi translated">超角</h2><p id="32b9" class="pw-post-body-paragraph ky kz it la b lb np ju ld le nq jx lg lh nr lj lk ll ns ln lo lp nt lr ls lt im bi translated">按照以下步骤安装Hypercorn:</p><pre class="kj kk kl km gt ok nx ol om aw on bi"><span id="d74f" class="ny my it nx b gy oo op l oq or">pip install hypercorn</span></pre><h1 id="4a51" class="mx my it bd mz na os nc nd ne ot ng nh jz ou ka nj kc ov kd nl kf ow kg nn no bi translated">履行</h1><p id="c97b" class="pw-post-body-paragraph ky kz it la b lb np ju ld le nq jx lg lh nr lj lk ll ns ln lo lp nt lr ls lt im bi translated">在本节中，您将学习编写一个简单的FastAPI脚本，并使用Hypercorn运行它。</p><h2 id="0e3e" class="ny my it bd mz nz oa dn nd ob oc dp nh lh od oe nj ll of og nl lp oh oi nn oj bi translated">FastAPI服务器</h2><p id="cdc5" class="pw-post-body-paragraph ky kz it la b lb np ju ld le nq jx lg lh nr lj lk ll ns ln lo lp nt lr ls lt im bi translated">让我们用下面的代码在同一个工作目录中创建一个名为<code class="fe nu nv nw nx b">myapp.py</code>的新Python文件:</p><pre class="kj kk kl km gt ok nx ol om aw on bi"><span id="9225" class="ny my it nx b gy oo op l oq or">from fastapi import FastAPI</span><span id="9f39" class="ny my it nx b gy ox op l oq or">app = FastAPI()</span><span id="4413" class="ny my it nx b gy ox op l oq or">@app.get("/")<br/>async def root():<br/>    return {"message": "Hello world!"}</span></pre><h2 id="e594" class="ny my it bd mz nz oa dn nd ob oc dp nh lh od oe nj ll of og nl lp oh oi nn oj bi translated">使用Hypercorn部署</h2><p id="ed09" class="pw-post-body-paragraph ky kz it la b lb np ju ld le nq jx lg lh nr lj lk ll ns ln lo lp nt lr ls lt im bi translated">接下来，在终端运行以下命令来启动您的服务器。默认情况下，它将作为端口<code class="fe nu nv nw nx b">8000</code>上的<code class="fe nu nv nw nx b">localhost</code>运行。</p><pre class="kj kk kl km gt ok nx ol om aw on bi"><span id="03c9" class="ny my it nx b gy oo op l oq or">hypercorn myapp:app</span></pre><p id="2ac5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">与Uvicorn类似，Hypercorn使用以下语法</p><pre class="kj kk kl km gt ok nx ol om aw on bi"><span id="6207" class="ny my it nx b gy oo op l oq or">hypercorn &lt;module_name&gt;:&lt;variable_name&gt;</span></pre><ul class=""><li id="6195" class="lu lv it la b lb lc le lf lh lw ll lx lp ly lt lz ma mb mc bi translated"><code class="fe nu nv nw nx b">module_name</code> —模块的名称(文件名)</li><li id="f992" class="lu lv it la b lb me le mf lh mg ll mh lp mi lt lz ma mb mc bi translated"><code class="fe nu nv nw nx b">variable_name</code> —为FastAPI定义的变量的名称</li></ul><h2 id="cfd4" class="ny my it bd mz nz oa dn nd ob oc dp nh lh od oe nj ll of og nl lp oh oi nn oj bi translated">绑定到特定地址</h2><p id="150b" class="pw-post-body-paragraph ky kz it la b lb np ju ld le nq jx lg lh nr lj lk ll ns ln lo lp nt lr ls lt im bi translated">然而，配置或可用选项与Uvicorn相比有很大不同。例如，您必须使用<code class="fe nu nv nw nx b">bind</code>选项来指定主机和端口，如下所示:</p><pre class="kj kk kl km gt ok nx ol om aw on bi"><span id="83b9" class="ny my it nx b gy oo op l oq or"># Hypercorn<br/>hypercorn myapp:app --bind 0.0.0.0:8080</span><span id="057a" class="ny my it nx b gy ox op l oq or"># Uvicorn<br/>uvicorn myapp:app --host 0.0.0.0 --port 8080</span></pre><h2 id="f259" class="ny my it bd mz nz oa dn nd ob oc dp nh lh od oe nj ll of og nl lp oh oi nn oj bi translated">绑定到多个地址</h2><p id="16ee" class="pw-post-body-paragraph ky kz it la b lb np ju ld le nq jx lg lh nr lj lk ll ns ln lo lp nt lr ls lt im bi translated">事实上，您可以将它绑定到多个服务器，并同时为它们提供服务。当您需要同时在IPv4和IPv6上为服务器提供服务时，这非常有用。例如:</p><pre class="kj kk kl km gt ok nx ol om aw on bi"><span id="98a1" class="ny my it nx b gy oo op l oq or">hypercorn myapp:app --bind "0.0.0.0:5000" --bind "[::]:5000"</span></pre><h2 id="c0ee" class="ny my it bd mz nz oa dn nd ob oc dp nh lh od oe nj ll of og nl lp oh oi nn oj bi translated">其他配置选项</h2><p id="dc49" class="pw-post-body-paragraph ky kz it la b lb np ju ld le nq jx lg lh nr lj lk ll ns ln lo lp nt lr ls lt im bi translated">此外，在命令行中运行Hypercorn时，也可以使用以下选项。</p><ul class=""><li id="aeff" class="lu lv it la b lb lc le lf lh lw ll lx lp ly lt lz ma mb mc bi translated"><code class="fe nu nv nw nx b">--access-logformat</code> —访问日志的日志格式，参见<a class="ae md" href="https://pgjones.gitlab.io/hypercorn/how_to_guides/logging.html#how-to-log" rel="noopener ugc nofollow" target="_blank">日志</a>。</li><li id="c2a2" class="lu lv it la b lb me le mf lh mg ll mh lp mi lt lz ma mb mc bi translated"><code class="fe nu nv nw nx b">--access-logfile</code> —用于访问日志的目标记录器，使用<code class="fe nu nv nw nx b">-</code>用于标准输出。</li><li id="cafc" class="lu lv it la b lb me le mf lh mg ll mh lp mi lt lz ma mb mc bi translated"><code class="fe nu nv nw nx b">--backlog</code>—挂起连接的最大数量。</li><li id="93f7" class="lu lv it la b lb me le mf lh mg ll mh lp mi lt lz ma mb mc bi translated"><code class="fe nu nv nw nx b">--ca-certs</code>—SSL CA证书文件的路径。</li><li id="985d" class="lu lv it la b lb me le mf lh mg ll mh lp mi lt lz ma mb mc bi translated"><code class="fe nu nv nw nx b">--certfile</code>—SSL证书文件的路径。</li><li id="8ccf" class="lu lv it la b lb me le mf lh mg ll mh lp mi lt lz ma mb mc bi translated"><code class="fe nu nv nw nx b">--cipher</code> —用于SSL设置的密码。</li><li id="3db3" class="lu lv it la b lb me le mf lh mg ll mh lp mi lt lz ma mb mc bi translated"><code class="fe nu nv nw nx b">--debug </code> —启用调试模式，即额外记录和检查。</li><li id="97fa" class="lu lv it la b lb me le mf lh mg ll mh lp mi lt lz ma mb mc bi translated"><code class="fe nu nv nw nx b">--error-logfile --log-file </code> —错误日志的目标位置，用于stderr。</li><li id="f49c" class="lu lv it la b lb me le mf lh mg ll mh lp mi lt lz ma mb mc bi translated"><code class="fe nu nv nw nx b">--graceful-timeout</code> —在SIGTERM或Ctrl-C之后等待任何剩余请求(任务)完成的时间。</li><li id="2976" class="lu lv it la b lb me le mf lh mg ll mh lp mi lt lz ma mb mc bi translated"><code class="fe nu nv nw nx b">--keep-alive</code> —关闭前保持非活动连接活动的秒数。</li><li id="6b8c" class="lu lv it la b lb me le mf lh mg ll mh lp mi lt lz ma mb mc bi translated"><code class="fe nu nv nw nx b">--keyfile</code>—SSL密钥文件的路径。</li><li id="06e5" class="lu lv it la b lb me le mf lh mg ll mh lp mi lt lz ma mb mc bi translated"><code class="fe nu nv nw nx b">--log-config</code> —一个Python日志记录配置文件。</li><li id="3b3c" class="lu lv it la b lb me le mf lh mg ll mh lp mi lt lz ma mb mc bi translated"><code class="fe nu nv nw nx b">--log-level</code> —(错误)日志级别。</li><li id="7438" class="lu lv it la b lb me le mf lh mg ll mh lp mi lt lz ma mb mc bi translated"><code class="fe nu nv nw nx b">--pid</code> —写入PID(程序ID)的位置。</li><li id="8d2a" class="lu lv it la b lb me le mf lh mg ll mh lp mi lt lz ma mb mc bi translated"><code class="fe nu nv nw nx b">--reload</code>—启用代码更改时的自动重新加载。</li><li id="fcb8" class="lu lv it la b lb me le mf lh mg ll mh lp mi lt lz ma mb mc bi translated"><code class="fe nu nv nw nx b">--worker-class</code> —要使用的工人类型。选项包括asyncio、uvloop(需要<code class="fe nu nv nw nx b">pip install hypercorn[uvloop]</code>)和trio(需要<code class="fe nu nv nw nx b">pip install hypercorn[trio]</code>)。</li><li id="36ba" class="lu lv it la b lb me le mf lh mg ll mh lp mi lt lz ma mb mc bi translated"><code class="fe nu nv nw nx b">--workers</code>—要繁殖和使用的工蜂数量。</li></ul><h2 id="2929" class="ny my it bd mz nz oa dn nd ob oc dp nh lh od oe nj ll of og nl lp oh oi nn oj bi translated">结果</h2><p id="cc54" class="pw-post-body-paragraph ky kz it la b lb np ju ld le nq jx lg lh nr lj lk ll ns ln lo lp nt lr ls lt im bi translated">假设您已经运行了以下命令:</p><pre class="kj kk kl km gt ok nx ol om aw on bi"><span id="5626" class="ny my it nx b gy oo op l oq or">hypercorn myapp:app</span></pre><p id="abac" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当您运行它时，应该会在控制台得到以下输出:</p><pre class="kj kk kl km gt ok nx ol om aw on bi"><span id="1e1d" class="ny my it nx b gy oo op l oq or">[2021-07-10 21:24:19 +0800] [5464] [INFO] Running on <a class="ae md" href="http://127.0.0.1:8000" rel="noopener ugc nofollow" target="_blank">http://127.0.0.1:8000</a> (CTRL + C to quit)</span></pre><p id="0cef" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">打开浏览器，在控制台中转到以下URL提示:</p><pre class="kj kk kl km gt ok nx ol om aw on bi"><span id="308d" class="ny my it nx b gy oo op l oq or"><a class="ae md" href="http://localhost:8000/" rel="noopener ugc nofollow" target="_blank">http://localhost:8000/</a></span></pre><p id="5c7f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">输出应该如下所示:</p><pre class="kj kk kl km gt ok nx ol om aw on bi"><span id="ced3" class="ny my it nx b gy oo op l oq or">{"message":"Hello world!"}</span></pre><p id="4276" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是，响应头中指示的服务器是hypercorn-h11，它引用HTTP/1.1</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oy"><img src="../Images/e69d7a32eaf94339cb8167b0ecf007fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:770/format:webp/1*y0S_mFs6-pzEvyCt2dAlcA.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</figcaption></figure><p id="f676" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这主要是因为HTTP/2需要强制加密。即使你是以<code class="fe nu nv nw nx b">localhost</code>的名义经营，你也必须提供证书。</p><h2 id="a231" class="ny my it bd mz nz oa dn nd ob oc dp nh lh od oe nj ll of og nl lp oh oi nn oj bi translated">生成自签名证书</h2><p id="5f9a" class="pw-post-body-paragraph ky kz it la b lb np ju ld le nq jx lg lh nr lj lk ll ns ln lo lp nt lr ls lt im bi translated">让我们使用rsa创建一个为期365天的临时自签名证书。在命令行中运行以下命令:</p><pre class="kj kk kl km gt ok nx ol om aw on bi"><span id="a3c3" class="ny my it nx b gy oo op l oq or">openssl req -x509 -newkey rsa:4096 -keyout key.pem -out cert.pem -days 365 -nodes</span></pre><p id="b483" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果您在读取<code class="fe nu nv nw nx b">openssl.cnf</code>文件时遇到如下问题:</p><pre class="kj kk kl km gt ok nx ol om aw on bi"><span id="be24" class="ny my it nx b gy oo op l oq or">Can't open .../openssl.cnf for reading. No such file or directory</span></pre><p id="b220" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这仅仅意味着它很难找到配置文件。如果您已经安装了openssl附带的Git，只需使用<code class="fe nu nv nw nx b">-config</code>选项将它指向<code class="fe nu nv nw nx b">openssl.cnf</code>位置。例如:</p><pre class="kj kk kl km gt ok nx ol om aw on bi"><span id="5777" class="ny my it nx b gy oo op l oq or">openssl req -x509 -newkey rsa:4096 -keyout key.pem -out cert.pem -days 365 -nodes -config "C:\Program Files\Git\usr\ssl\openssl.cfg"</span></pre><p id="9e5f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">它将生成两个新文件:</p><ul class=""><li id="26e3" class="lu lv it la b lb lc le lf lh lw ll lx lp ly lt lz ma mb mc bi translated">key.pem</li><li id="a63d" class="lu lv it la b lb me le mf lh mg ll mh lp mi lt lz ma mb mc bi translated">cert.pem</li></ul><p id="42e2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">接下来，将这两个文件放在与myapp.py相同的目录中，并使用<code class="fe nu nv nw nx b">--keyfile</code>和<code class="fe nu nv nw nx b">--certfile</code>命令运行它:</p><pre class="kj kk kl km gt ok nx ol om aw on bi"><span id="2d3d" class="ny my it nx b gy oo op l oq or">hypercorn --keyfile key.pem --certfile cert.pem myapp:app</span></pre><p id="a383" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在您的浏览器上，重新加载页面，但这次使用https:</p><pre class="kj kk kl km gt ok nx ol om aw on bi"><span id="013f" class="ny my it nx b gy oo op l oq or"><a class="ae md" href="https://localhost:8000/" rel="noopener ugc nofollow" target="_blank">https://localhost:8000/</a></span></pre><p id="1d6f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">它应该提示一个警告页面指出(如果您使用自签名证书，这是正常的):</p><pre class="kj kk kl km gt ok nx ol om aw on bi"><span id="ca10" class="ny my it nx b gy oo op l oq or">localhost:8000 uses an invalid security certificate.<br/> <br/>The certificate is not trusted because it is self-signed.</span></pre><p id="6cb2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">接受风险并转到请求的URL。您应该得到以下响应头:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oz"><img src="../Images/82b151fef01c4e6c79c89b746a481451.png" data-original-src="https://miro.medium.com/v2/resize:fit:940/format:webp/1*fJWIYordaazSEX4qjxan_Q.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</figcaption></figure><p id="84de" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><code class="fe nu nv nw nx b">hypercorn-h2</code>表示服务器正在运行HTTP/2。对于生产服务器，建议使用有效的证书。您可以使用<a class="ae md" href="https://letsencrypt.org/" rel="noopener ugc nofollow" target="_blank">让我们加密</a>为您的网站获取免费证书。</p></div><div class="ab cl mq mr hx ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="im in io ip iq"><h1 id="7183" class="mx my it bd mz na nb nc nd ne nf ng nh jz ni ka nj kc nk kd nl kf nm kg nn no bi translated">结论</h1><p id="aa4d" class="pw-post-body-paragraph ky kz it la b lb np ju ld le nq jx lg lh nr lj lk ll ns ln lo lp nt lr ls lt im bi translated">让我们回顾一下你今天所学的内容。</p><p id="6334" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">本文首先简要解释了HTTP/2。它还介绍了对Uvicorn和Hypercorn ASGI服务器的HTTP/2支持。</p><p id="5ffe" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然后，通过<code class="fe nu nv nw nx b">pip install</code>进入安装过程。</p><p id="3761" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">接着是FastAPI服务器的标准样板文件，并在本地主机上运行。除此之外，还介绍了使用Hypercorn部署FastAPI服务器时可用的配置。</p><p id="40b3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">本教程还包括一个关于生成自签名证书的简单部分，因为HTTP/2在部署期间需要强制证书。</p><p id="4d52" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">感谢你阅读这篇文章。请随意查看我的其他文章。祝你有美好的一天！</p></div><div class="ab cl mq mr hx ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="im in io ip iq"><h1 id="819a" class="mx my it bd mz na nb nc nd ne nf ng nh jz ni ka nj kc nk kd nl kf nm kg nn no bi translated">参考</h1><ol class=""><li id="155c" class="lu lv it la b lb np le nq lh pa ll pb lp pc lt pd ma mb mc bi translated"><a class="ae md" href="https://fastapi.tiangolo.com/deployment/manually/" rel="noopener ugc nofollow" target="_blank"> FastAPI —手动部署</a></li><li id="50ca" class="lu lv it la b lb me le mf lh mg ll mh lp mi lt pd ma mb mc bi translated"><a class="ae md" href="https://gitlab.com/pgjones/hypercorn" rel="noopener ugc nofollow" target="_blank"> Hypercorn — Gitlab </a></li><li id="fd49" class="lu lv it la b lb me le mf lh mg ll mh lp mi lt pd ma mb mc bi translated"><a class="ae md" href="https://pgjones.gitlab.io/hypercorn/" rel="noopener ugc nofollow" target="_blank"> Hypercorn —文档</a></li><li id="c3bb" class="lu lv it la b lb me le mf lh mg ll mh lp mi lt pd ma mb mc bi translated"><a class="ae md" href="https://en.wikipedia.org/wiki/HTTP/2" rel="noopener ugc nofollow" target="_blank"> HTTP2 —维基百科</a></li></ol></div></div>    
</body>
</html>