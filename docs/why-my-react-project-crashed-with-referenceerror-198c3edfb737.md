# ä¸ºä»€ä¹ˆæˆ‘çš„ React é¡¹ç›®å› å¼•ç”¨é”™è¯¯è€Œå´©æºƒ

> åŸæ–‡ï¼š<https://levelup.gitconnected.com/why-my-react-project-crashed-with-referenceerror-198c3edfb737>

## ä½¿ç”¨ babel ä½†ä»æœ‰å¼•ç”¨é”™è¯¯:æœªå®šä¹‰é›†åˆ

![](img/d550f7a5f8860ae166025fe61bbda821.png)

# ä»‹ç»

é‚£æ˜¯ä¸€ä¸ªæ‚²ä¼¤çš„å¤œæ™šï¼Œåˆšåˆšä¸‹ç­ï¼Œæœ‰äººæŠ¥å‘Šè¯´æˆ‘å¼€å‘çš„é¡¹ç›®ä¼šåœ¨ä¸€äº›æ—§çš„ Android æ‰‹æœºä¸Šå´©æºƒã€‚é€šè¿‡`[adb](https://developer.android.com/studio/command-line/adb)`è¿œç¨‹è°ƒè¯•ï¼Œæˆ‘å‘ç°äº†é¡µé¢å´©æºƒçš„åŸå› :

![](img/33a005f0cd7d4df555b4169665b9aa5b.png)

ä¸æ”¯æŒçš„é›†åˆå´©æºƒ

è¿™è®©æˆ‘å¾ˆå›°æƒ‘ï¼Œæˆ‘åœ¨æˆ‘çš„é¡¹ç›®ä¸­ä½¿ç”¨äº† babelï¼Œå¹¶ä¸”åœ¨å…¥å£æ–‡ä»¶ä¸­æ‰‹åŠ¨å¯¼å…¥äº† [core-js](https://www.npmjs.com/package/core-js) ã€‚

![](img/2f5ae1427c838cc6e1ab4255f6553e4e.png)

æˆ‘çš„ React é¡¹ç›®çš„å…¥å£æ–‡ä»¶

# æœªå®šä¹‰é›†åˆçš„åŸå› 

ç”Ÿäº§ç¯å¢ƒçš„ä»£ç æ˜¯å‹ç¼©çš„ï¼Œä¸å®¹æ˜“è°ƒè¯•é—®é¢˜ï¼Œæˆ‘ä¿®æ”¹äº† [Webpack](https://webpack.js.org/configuration/optimization/#optimizationminimize) çš„é…ç½®ï¼Œå…³é—­äº†ä»£ç æœ€å°åŒ–ã€‚ç„¶ååœ¨æµ‹è¯•ç¯å¢ƒä¸­éƒ¨ç½²ä»£ç ã€‚

ç»è¿‡è°ƒè¯•ï¼Œæˆ‘å‘ç°åœ¨`react-dom`ä¸­ä½¿ç”¨äº†`Set`ï¼Œä½†æ˜¯`Set`è¿˜æ²¡æœ‰å¤šå¡«å……ã€‚è¿™ä¸ªæœ‰ç‚¹è¶…å‡ºæˆ‘çš„ç†è§£ï¼Œ`Set`æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œåº”è¯¥è¢«åŠèµ·æ¥ï¼Œä¸åº”è¯¥æ˜¯æœªå®šä¹‰çš„ã€‚

æƒ³äº†ä¸€ä¼šï¼Œè¿˜æ˜¯æƒ³ä¸æ˜ç™½ï¼Œåªèƒ½çœ‹`[core-js](https://github.com/zloirock/core-js)` polyfill `Set`æ€ä¹ˆå¡«ã€‚

![](img/b61d717d91d522f26949cea6af79cdfb.png)

èšåˆå¡«å……çš„æ­¥éª¤

åœ¨`core-js`çš„æºä»£ç ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°å®ƒä½¿ç”¨`Object.defineProperty`æ·»åŠ å…¨å±€å˜é‡ï¼Œæ‰€ä»¥**å¤šå¡«å……å˜é‡æ²¡æœ‰è¢«æå‡**ã€‚å¹¶ä¸”`react-dom`åœ¨`core-js`ä¹‹å‰æ‰§è¡Œï¼Œpolyfill è¿˜æ²¡æœ‰åˆå§‹åŒ–ï¼Œæ‰€ä»¥ JavaScript ä¼šæŠ›å‡ºé”™è¯¯ã€‚

# è§£å†³æ–¹æ¡ˆ

æˆ‘ä»¬çŸ¥é“ä»£ç æ‰§è¡Œé¡ºåºå¯¼è‡´äº†è¿™ä¸ªå¼‚å¸¸ï¼Œæˆ‘ä»¬åªéœ€è¦è°ƒæ•´å¯¼å…¥çš„é¡ºåºã€‚åœ¨æˆ‘çš„é¡¹ç›®ä¸­ï¼Œæˆ‘ä½¿ç”¨[eslint-plugin-simple-import-sortâ€”NPM(npmjs.com)](https://www.npmjs.com/package/eslint-plugin-simple-import-sort)ï¼Œå¦‚æœå…ˆå¯¼å…¥`core-js`ï¼Œä¼šå‡ºç°é”™è¯¯:

![](img/fd86c06a08d610c6b46cac502971da48.png)

æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¿å­˜è€Œä¸æ ¼å¼åŒ–æ–‡ä»¶æ¥å¿½ç•¥é”™è¯¯ï¼Œæˆ–è€…åªç¦ç”¨æ­¤è¡Œçš„è§„åˆ™(å•å‡»å¿«é€Ÿä¿®å¤å¯ä»¥è‡ªåŠ¨æ·»åŠ ):

![](img/631b50a32b282d13026bade7543541b8.png)

å¦ä¸€ç§æ–¹æ³•æ˜¯ä¿®æ”¹ Webpack é…ç½®ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å¯¼å…¥`core-js`çš„åœ°æ–¹åˆ›å»ºä¸€ä¸ªæ–°çš„ polyfill æ–‡ä»¶ï¼Œç„¶åæ·»åŠ åˆ°[æ¡ç›®](https://webpack.js.org/concepts/#entry):

```
{
    entry: ['./polyfill.js', './index.js'],
    output: {filename: 'bundle.js'}
}
```

# ç»“è®º

å½“æˆ‘ä»¬éœ€è¦èšåˆå¡«å……ä»£ç æ—¶ï¼Œéœ€è¦æ³¨æ„ npm æ¨¡å—çš„é¡ºåºã€‚å¦åˆ™ï¼Œå°½ç®¡æˆ‘ä»¬ä½¿ç”¨äº†`core-js`ï¼Œé¡µé¢ä»ç„¶ä¼šå› ä¸ºä¸æ”¯æŒ ES6 è¯­æ³•è€Œå´©æºƒã€‚

æ„Ÿè°¢é˜…è¯»ï¼Œå¸Œæœ›ä½ å†™çš„ä»£ç æ²¡æœ‰è¿™æ ·çš„é”™è¯¯

# åˆ†çº§ç¼–ç 

æ„Ÿè°¢æ‚¨æˆä¸ºæˆ‘ä»¬ç¤¾åŒºçš„ä¸€å‘˜ï¼åœ¨ä½ ç¦»å¼€ä¹‹å‰:

*   ğŸ‘ä¸ºæ•…äº‹é¼“æŒï¼Œè·Ÿç€ä½œè€…èµ°ğŸ‘‰
*   ğŸ“°æŸ¥çœ‹æ›´å¤šå†…å®¹è¯·å‚è§[å‡çº§ç¼–ç åˆŠç‰©](https://levelup.gitconnected.com/?utm_source=pub&utm_medium=post)
*   ğŸ””å…³æ³¨æˆ‘ä»¬:[Twitter](https://twitter.com/gitconnected)|[LinkedIn](https://www.linkedin.com/company/gitconnected)|[æ—¶äº‹é€šè®¯](https://newsletter.levelup.dev)

ğŸš€ğŸ‘‰ [**åŠ å…¥å‡çº§äººæ‰é›†ä½“ï¼Œæ‰¾åˆ°ä¸€ä»½ç¥å¥‡çš„å·¥ä½œ**](https://jobs.levelup.dev/talent/welcome?referral=true)