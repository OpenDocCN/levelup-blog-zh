<html>
<head>
<title>[item for item in List Comprehensions if you want to master it]</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">[如果你想掌握它，请在理解列表中逐项列出]</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/item-for-item-in-list-comprehensions-if-you-want-to-master-it-237e2f7213ee?source=collection_archive---------2-----------------------#2020-04-24">https://levelup.gitconnected.com/item-for-item-in-list-comprehensions-if-you-want-to-master-it-237e2f7213ee?source=collection_archive---------2-----------------------#2020-04-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="6405" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Python中这一有用特性的简单易懂的指南</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/a986530e481c05b82741367bf7fc4e84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*z4cjbVcSSc3gWOq9"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">在<a class="ae lb" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae lb" href="https://unsplash.com/@waldemarbrandt67w?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Waldemar Brandt </a>拍照</figcaption></figure><p id="a50b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">列表理解是Python编程中一个非常实用的特性，它不仅可以使代码更快，而且更容易编写和阅读。在本文中，您将学习Python中列表理解的基础知识和一些更高级的实现，并准备好充分利用它。</p><p id="ebf6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们从回顾列表的基本定义开始。列表是Python中一种非常丰富的数据结构。它们被定义为任意对象的有序集合，这些对象是可变的、动态的并且可以通过索引来访问。例如:</p><pre class="km kn ko kp gt lc ld le lf aw lg bi"><span id="c88e" class="lh li iq ld b gy lj lk l ll lm">my_list = [123,”look at this”, [1,2,3], {“list items can be”:”anything”}, True, (1,2,3)]</span><span id="532e" class="lh li iq ld b gy ln lk l ll lm">type(my_list)<br/>list</span><span id="8725" class="lh li iq ld b gy ln lk l ll lm">type(my_list[3])<br/>dict</span><span id="b937" class="lh li iq ld b gy ln lk l ll lm">type(my_list[5])<br/>tuple</span></pre><p id="9639" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如您所见，列表对象可以是任何类型——整数或浮点、字符串、其他列表、字典、布尔、元组。它们甚至可以包含函数、类和模块，每个对象都可以通过其索引来访问。这不是很方便吗？但是，本文不会关注Python中列表的所有优点，而是关注一种创建列表的方法——列表理解。如果你想学习更多关于列表的知识，我推荐这篇非常清晰有用的关于列表的<a class="ae lb" href="https://realpython.com/python-lists-tuples/" rel="noopener ugc nofollow" target="_blank">文章</a>和官方的<a class="ae lb" href="https://docs.python.org/3/tutorial/datastructures.html?#more-on-lists" rel="noopener ugc nofollow" target="_blank"> Python文档</a>。</p><p id="73ad" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">列表理解提供了一种创建列表的简洁方法，当您通过对来自<a class="ae lb" href="https://docs.python.org/3/glossary.html#term-iterable" rel="noopener ugc nofollow" target="_blank"> iterable </a>的每一项应用某种操作和/或根据某种条件过滤元素来创建列表时，它特别有用。它们通常比for循环或map()更pythonic化，因为它们需要更少的代码行，并且非常灵活，可以应用于广泛的情况。</p><h2 id="5117" class="lh li iq bd lo lp lq dn lr ls lt dp lu jy lv lw lx kc ly lz ma kg mb mc md me bi translated">列表理解结构</h2><p id="a2ad" class="pw-post-body-paragraph jn jo iq jp b jq mf js jt ju mg jw jx jy mh ka kb kc mi ke kf kg mj ki kj kk ij bi translated">如果你理解了列表理解的结构，你就能够通过简单地遵循它的逻辑来将它应用到大多数任务中。下面是列表理解的基本结构:</p><pre class="km kn ko kp gt lc ld le lf aw lg bi"><span id="a011" class="lh li iq ld b gy lj lk l ll lm">new_list = [ expression <strong class="ld ir">for</strong> item <strong class="ld ir">in</strong> iterable <strong class="ld ir">if</strong> condition ]</span></pre><p id="117e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们来分解一下:</p><ul class=""><li id="51ff" class="mk ml iq jp b jq jr ju jv jy mm kc mn kg mo kk mp mq mr ms bi translated"><strong class="jp ir">表达式</strong>可以仅仅是项本身，一个数学运算，一个字符串方法，一个函数，甚至包括一个条件语句或者是另一个列表的理解，应用于项。</li><li id="95a6" class="mk ml iq jp b jq mt ju mu jy mv kc mw kg mx kk mp mq mr ms bi translated"><strong class="jp ir"> Item </strong>是iterable中的每个单数对象或值。</li><li id="f96d" class="mk ml iq jp b jq mt ju mu jy mv kc mw kg mx kk mp mq mr ms bi translated"><strong class="jp ir"> Iterable </strong>是能够一次返回一个项目的任何Python对象。列表、字符串、集合、元组、字典、生成器等等都是可迭代的对象。</li><li id="2df2" class="mk ml iq jp b jq mt ju mu jy mv kc mw kg mx kk mp mq mr ms bi translated"><strong class="jp ir">条件</strong>使用if语句根据条件过滤列表项。你可以用这个，如果不需要也可以直接跳过。然而，其他三个部分对于理解列表总是必要的。</li></ul><p id="48ac" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们来看一些例子，这样会更容易掌握这个结构。为了帮助你形象化理解列表的每一部分，我总是用粗体字来区分它们。</p></div><div class="ab cl my mz hu na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="ij ik il im in"><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nf"><img src="../Images/6f9334caf6b05e7148bfb3361cd1ee30.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*hPZITlNQkqETtUcZ"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">照片由<a class="ae lb" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的<a class="ae lb" href="https://unsplash.com/@hjrc33?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Héctor J. Rivas </a>拍摄</figcaption></figure><h2 id="6d66" class="lh li iq bd lo lp lq dn lr ls lt dp lu jy lv lw lx kc ly lz ma kg mb mc md me bi translated">从iterable创建项目列表</h2><p id="ef25" class="pw-post-body-paragraph jn jo iq jp b jq mf js jt ju mg jw jx jy mh ka kb kc mi ke kf kg mj ki kj kk ij bi translated">列表理解的一个最简单的用途是当你需要创建一个简单的数字列表时，表达式部分几乎只需要调用iterable中的每一项:</p><pre class="km kn ko kp gt lc ld le lf aw lg bi"><span id="cf47" class="lh li iq ld b gy lj lk l ll lm">numbers = [number <strong class="ld ir">for</strong> number <strong class="ld ir">in</strong> range(1,11)]</span><span id="a500" class="lh li iq ld b gy ln lk l ll lm">[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]</span></pre><h2 id="e23c" class="lh li iq bd lo lp lq dn lr ls lt dp lu jy lv lw lx kc ly lz ma kg mb mc md me bi translated">创建执行操作的列表</h2><p id="76e3" class="pw-post-body-paragraph jn jo iq jp b jq mf js jt ju mg jw jx jy mh ka kb kc mi ke kf kg mj ki kj kk ij bi translated">现在让我们看一些例子，其中表达式执行一个操作或方法。假设你有一个数字列表，你想得到它们的等价平方:</p><pre class="km kn ko kp gt lc ld le lf aw lg bi"><span id="13aa" class="lh li iq ld b gy lj lk l ll lm">squares = [n * n <strong class="ld ir">for</strong> n <strong class="ld ir">in</strong> numbers]</span><span id="2cf5" class="lh li iq ld b gy ln lk l ll lm">[1, 4, 9, 16, 25, 36, 49, 64, 81, 100]</span></pre><h2 id="a935" class="lh li iq bd lo lp lq dn lr ls lt dp lu jy lv lw lx kc ly lz ma kg mb mc md me bi translated">创建一个对多个列表执行操作的列表</h2><p id="f563" class="pw-post-body-paragraph jn jo iq jp b jq mf js jt ju mg jw jx jy mh ka kb kc mi ke kf kg mj ki kj kk ij bi translated">你也可以在一个列表理解中使用多个列表中的项目。看这个例子，我想把我们两个不同列表中的每一项加起来:</p><pre class="km kn ko kp gt lc ld le lf aw lg bi"><span id="7a24" class="lh li iq ld b gy lj lk l ll lm">n_plus_square = [n + s <strong class="ld ir">for</strong> n, s <strong class="ld ir">in</strong> zip(numbers, squares)]</span><span id="dc02" class="lh li iq ld b gy ln lk l ll lm">[2, 6, 12, 20, 30, 42, 56, 72, 90, 110]</span></pre><h2 id="e76a" class="lh li iq bd lo lp lq dn lr ls lt dp lu jy lv lw lx kc ly lz ma kg mb mc md me bi translated">创建元组列表</h2><p id="05f0" class="pw-post-body-paragraph jn jo iq jp b jq mf js jt ju mg jw jx jy mh ka kb kc mi ke kf kg mj ki kj kk ij bi translated">列表理解也可以支持创建元组列表。假设您想要获取数字列表，并使用原始数字及其平方创建元组:</p><pre class="km kn ko kp gt lc ld le lf aw lg bi"><span id="3f82" class="lh li iq ld b gy lj lk l ll lm">list_of_tuples = [(n, n*n) <strong class="ld ir">for</strong> n <strong class="ld ir">in</strong> numbers]</span><span id="1463" class="lh li iq ld b gy ln lk l ll lm">[(1, 1),  (2, 4),  (3, 9),  (4, 16),  (5, 25),  (6, 36),  (7, 49),  (8, 64),  (9, 81),  (10, 100)]</span></pre><h2 id="9707" class="lh li iq bd lo lp lq dn lr ls lt dp lu jy lv lw lx kc ly lz ma kg mb mc md me bi translated">创建执行方法的列表</h2><p id="7fe8" class="pw-post-body-paragraph jn jo iq jp b jq mf js jt ju mg jw jx jy mh ka kb kc mi ke kf kg mj ki kj kk ij bi translated">表达式可以使用方法，也可以完成多项任务。假设你有一个电子邮件地址列表，除了最初创建该列表的人忘记添加“@gmail.com”。他们也没有用所有的小写字母标准化列表，所以你想纠正你的列表，在每个项目上执行这两个任务。您可以:</p><pre class="km kn ko kp gt lc ld le lf aw lg bi"><span id="a01d" class="lh li iq ld b gy lj lk l ll lm">emails = ['Maria123','keanureeves','nineties_songs','Smart.coder']</span><span id="fc1f" class="lh li iq ld b gy ln lk l ll lm">correct_emails = [email.lower()+'@gmail.com' <strong class="ld ir">for</strong> email <strong class="ld ir">in</strong> emails]</span><span id="addb" class="lh li iq ld b gy ln lk l ll lm">['<a class="ae lb" href="mailto:maria123@gmail.com" rel="noopener ugc nofollow" target="_blank">maria123@gmail.com</a>','<a class="ae lb" href="mailto:keanureeves@gmail.com" rel="noopener ugc nofollow" target="_blank">keanureeves@gmail.com</a>',<br/>'<a class="ae lb" href="mailto:nineties_songs@gmail.com" rel="noopener ugc nofollow" target="_blank">nineties_songs@gmail.com</a>','<a class="ae lb" href="mailto:smart.coder@gmail.com" rel="noopener ugc nofollow" target="_blank">smart.coder@gmail.com</a>']</span></pre><h2 id="48dc" class="lh li iq bd lo lp lq dn lr ls lt dp lu jy lv lw lx kc ly lz ma kg mb mc md me bi translated">应用函数创建列表</h2><p id="379e" class="pw-post-body-paragraph jn jo iq jp b jq mf js jt ju mg jw jx jy mh ka kb kc mi ke kf kg mj ki kj kk ij bi translated">在对旧列表中的每一项应用一个函数之后，您可以使用类似于<code class="fe ng nh ni ld b">list(map())</code>的东西来获得一个新列表，但是使用list comprehension也可以很容易地完成这个任务。列表理解表达式可以包含复杂表达式和嵌套函数。假设你想得到你的正方形列表，并得到一个新的列表，每个数字减去列表的平均值。这就是我们在列表理解表达式中使用函数<code class="fe ng nh ni ld b">eval(), sum() and len()</code>的方法:</p><pre class="km kn ko kp gt lc ld le lf aw lg bi"><span id="ad54" class="lh li iq ld b gy lj lk l ll lm">new_list = [eval('x - sum(squares)/len(squares)') <strong class="ld ir">for</strong> x <strong class="ld ir">in</strong> squares]</span><span id="4057" class="lh li iq ld b gy ln lk l ll lm">[-37.5, -34.5, -29.5, -22.5, -13.5, -2.5, 10.5, 25.5, 42.5, 61.5]</span></pre><h2 id="d752" class="lh li iq bd lo lp lq dn lr ls lt dp lu jy lv lw lx kc ly lz ma kg mb mc md me bi translated">使用if/else条件作为表达式创建列表</h2><p id="ca54" class="pw-post-body-paragraph jn jo iq jp b jq mf js jt ju mg jw jx jy mh ka kb kc mi ke kf kg mj ki kj kk ij bi translated">列表理解的表达式部分也可以包括if/else语句。假设我们想要获取新列表并保留正数，但是用负数代替0:</p><pre class="km kn ko kp gt lc ld le lf aw lg bi"><span id="9bb8" class="lh li iq ld b gy lj lk l ll lm">positives = [n if n &gt; 0 else 0 <strong class="ld ir">for</strong> n <strong class="ld ir">in</strong> new_list]</span><span id="5a80" class="lh li iq ld b gy ln lk l ll lm">[0, 0, 0, 0, 0, 0, 10.5, 25.5, 42.5, 61.5]</span></pre><h2 id="7439" class="lh li iq bd lo lp lq dn lr ls lt dp lu jy lv lw lx kc ly lz ma kg mb mc md me bi translated">使用另一个列表理解作为表达式创建列表</h2><p id="301c" class="pw-post-body-paragraph jn jo iq jp b jq mf js jt ju mg jw jx jy mh ka kb kc mi ke kf kg mj ki kj kk ij bi translated">您可以使用另一个列表理解作为您的列表理解表达式。当您想要访问列表中每个项目的元素时，这可能很有用。例如，假设您有一个单词列表，您想要一个包含所有单词的所有字母的新列表。以下是如何做到这一点:</p><pre class="km kn ko kp gt lc ld le lf aw lg bi"><span id="9926" class="lh li iq ld b gy lj lk l ll lm">list_of_words = ['let', 'the', 'sun', 'shine']</span><span id="b23a" class="lh li iq ld b gy ln lk l ll lm">letters = [letter <strong class="ld ir">for</strong> word <strong class="ld ir">in</strong> list_of_words <strong class="ld ir">for</strong> letter <strong class="ld ir">in</strong> word]</span><span id="99d4" class="lh li iq ld b gy ln lk l ll lm">['l','e','t','t','h','e','s','u','n','s','h','i','n','e']</span></pre><h2 id="0b91" class="lh li iq bd lo lp lq dn lr ls lt dp lu jy lv lw lx kc ly lz ma kg mb mc md me bi translated">用嵌套的列出的理解创建一个列表</h2><p id="a344" class="pw-post-body-paragraph jn jo iq jp b jq mf js jt ju mg jw jx jy mh ka kb kc mi ke kf kg mj ki kj kk ij bi translated">假设你想要的不是一个包含所有字母的列表，而是一个包含每个单词中所有字母的列表？这可以通过使用另一组括号嵌套列表理解来实现:</p><pre class="km kn ko kp gt lc ld le lf aw lg bi"><span id="b625" class="lh li iq ld b gy lj lk l ll lm">nested = [[letter <strong class="ld ir">for</strong> letter <strong class="ld ir">in</strong> word] <strong class="ld ir">for</strong> word <strong class="ld ir">in</strong> list_of_words]</span><span id="5e25" class="lh li iq ld b gy ln lk l ll lm">[['l','e','t'], ['t','h','e'], ['s','u','n'], ['s','h','i','n','e']]</span></pre><p id="e8b5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">嵌套列表理解的另一个便利用途是用它来创建矩阵。Python没有矩阵数据类型，但是我们可以将列表列表视为矩阵:</p><pre class="km kn ko kp gt lc ld le lf aw lg bi"><span id="bce3" class="lh li iq ld b gy lj lk l ll lm">matrix = [[0 <strong class="ld ir">for</strong> item <strong class="ld ir">in</strong> range(3)] <strong class="ld ir">for</strong> row <strong class="ld ir">in</strong> range(4)]</span><span id="bf36" class="lh li iq ld b gy ln lk l ll lm">[[0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0]]</span></pre><p id="1c25" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">嵌套列表理解对于转置矩阵也是有用的。让我们创建一个包含数字的新矩阵，这样我们可以更清楚地看到这一点，然后使用嵌套列表理解来转置它。</p><pre class="km kn ko kp gt lc ld le lf aw lg bi"><span id="b30c" class="lh li iq ld b gy lj lk l ll lm">X = [[item <strong class="ld ir">for</strong> item <strong class="ld ir">in</strong> range(4)] <strong class="ld ir">for</strong> row <strong class="ld ir">in</strong> range(2)]</span><span id="2dce" class="lh li iq ld b gy ln lk l ll lm">[[0, 1, 2, 3], [0, 1, 2, 3]]</span></pre><p id="fa64" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在让我们转置它:</p><pre class="km kn ko kp gt lc ld le lf aw lg bi"><span id="660b" class="lh li iq ld b gy lj lk l ll lm">X_t = [[X[j][i] <strong class="ld ir">for</strong> j <strong class="ld ir">in</strong> range(len(X))] <strong class="ld ir">for</strong> i <strong class="ld ir">in</strong> range(len(X[0]))]</span><span id="c7cb" class="lh li iq ld b gy ln lk l ll lm">[[0, 0], [1, 1], [2, 2], [3, 3]]</span></pre><h2 id="eb1b" class="lh li iq bd lo lp lq dn lr ls lt dp lu jy lv lw lx kc ly lz ma kg mb mc md me bi translated">创建带条件的列表</h2><p id="8dbb" class="pw-post-body-paragraph jn jo iq jp b jq mf js jt ju mg jw jx jy mh ka kb kc mi ke kf kg mj ki kj kk ij bi translated">到目前为止，我们还没有将列表理解末尾的<strong class="jp ir">条件</strong>元素应用到实例中。列表理解的最后一个元素可以用来根据条件过滤新列表中的元素。但是请注意，与在列表理解的<strong class="jp ir">表达式</strong>部分中使用条件不同，这里只能使用<code class="fe ng nh ni ld b">if</code>语句，而不能使用<code class="fe ng nh ni ld b">else</code>。</p><p id="fbd2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">回到我们的字母列表，假设你只想要辅音。您可以使用condition元素过滤掉元音:</p><pre class="km kn ko kp gt lc ld le lf aw lg bi"><span id="0ec8" class="lh li iq ld b gy lj lk l ll lm">consonants = [l <strong class="ld ir">for</strong> l <strong class="ld ir">in</strong> letters <strong class="ld ir">if</strong> l not in 'aeiou']</span><span id="0449" class="lh li iq ld b gy ln lk l ll lm">['l','t','t','h','s','n','s','h','n']</span></pre><h2 id="40e1" class="lh li iq bd lo lp lq dn lr ls lt dp lu jy lv lw lx kc ly lz ma kg mb mc md me bi translated"><strong class="ak">创建多条件列表</strong></h2><p id="6481" class="pw-post-body-paragraph jn jo iq jp b jq mf js jt ju mg jw jx jy mh ka kb kc mi ke kf kg mj ki kj kk ij bi translated">在你的列表理解中可以有不止一个条件。例如，假设您想要的数字是2或3的倍数，这也可以在<code class="fe ng nh ni ld b">if</code>语句中实现:</p><pre class="km kn ko kp gt lc ld le lf aw lg bi"><span id="11bf" class="lh li iq ld b gy lj lk l ll lm">numbers = [2,3,5,6,7,8,9,10,12,15,24,28,30]</span><span id="1863" class="lh li iq ld b gy ln lk l ll lm">multiples_2_or_3 = [n <strong class="ld ir">for</strong> n <strong class="ld ir">in</strong> numbers <strong class="ld ir">if</strong> n%2==0 or n%3==0]</span><span id="95b7" class="lh li iq ld b gy ln lk l ll lm">[2, 3, 6, 8, 9, 10, 12, 15, 24, 28, 30]</span></pre><h2 id="6faf" class="lh li iq bd lo lp lq dn lr ls lt dp lu jy lv lw lx kc ly lz ma kg mb mc md me bi translated">创建具有嵌套条件的列表</h2><p id="5ec9" class="pw-post-body-paragraph jn jo iq jp b jq mf js jt ju mg jw jx jy mh ka kb kc mi ke kf kg mj ki kj kk ij bi translated">你还会在列表理解中发现嵌套的条件，这意味着列表评估不止一个条件，并且只添加两个条件都满足的条目。<a class="ae lb" href="https://docs.python.org/2/reference/expressions.html#boolean-operations" rel="noopener ugc nofollow" target="_blank"> Python使用短路布尔求值</a>，这意味着你可以使用两个<code class="fe ng nh ni ld b">if</code>语句或<code class="fe ng nh ni ld b">and</code>在大约相同的计算时间内得到相同的结果:</p><pre class="km kn ko kp gt lc ld le lf aw lg bi"><span id="215b" class="lh li iq ld b gy lj lk l ll lm">multiples_2_and_3 = [n <strong class="ld ir">for</strong> n <strong class="ld ir">in</strong> numbers <strong class="ld ir">if</strong> n%2==0 <strong class="ld ir">if</strong> n%3==0]</span><span id="1cae" class="lh li iq ld b gy ln lk l ll lm">[6, 12, 24, 30]</span><span id="f1ea" class="lh li iq ld b gy ln lk l ll lm">#or</span><span id="da1b" class="lh li iq ld b gy ln lk l ll lm">multiples_2_and_3 = [n <strong class="ld ir">for</strong> n <strong class="ld ir">in</strong> numbers <strong class="ld ir">if</strong> n%2==0 and n%3==0]</span><span id="dcb3" class="lh li iq ld b gy ln lk l ll lm">[6, 12, 24, 30]</span></pre><p id="c6b5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然而，在列表理解中使用多个<code class="fe ng nh ni ld b">if</code>语句的能力对于用可选的if条件链接多个for-part是必不可少的。为了看这个例子，让我们回到从单词列表中获得的字母列表。假设现在您不仅希望新列表中只有辅音字母，而且还希望从列表中跳过单词“sun”。这是如何工作的:</p><pre class="km kn ko kp gt lc ld le lf aw lg bi"><span id="b1cc" class="lh li iq ld b gy lj lk l ll lm">list_of_words = ['let', 'the', 'sun', 'shine']</span><span id="be73" class="lh li iq ld b gy ln lk l ll lm">conditional_letters = [l <strong class="ld ir">for</strong> word <strong class="ld ir">in</strong> list_of_words <strong class="ld ir">if</strong> word != 'sun' <strong class="ld ir">for</strong> l <strong class="ld ir">in</strong> word <strong class="ld ir">if</strong> l not in 'aeiou']</span><span id="73b9" class="lh li iq ld b gy ln lk l ll lm">['l', 't', 't', 'h', 's', 'h', 'n']</span></pre><p id="d94d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">瞧啊。到现在为止，你可能已经对列表理解的惊人能力充满信心，并准备好使用它了。好消息是，同样的概念也适用于集合理解和字典理解。</p><p id="c529" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">不过，还是有一些注意事项！</p><p id="af1b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您可以为任何列表理解编写一个for循环，但是反过来就不正确了——不是每个for循环都可以变成列表理解。此外，如果你的列表理解太长太复杂，你的可读性会大打折扣，在这种情况下，列表理解很可能不是你任务的最佳选择。</p><p id="497f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">希望这篇文章对你有用。编码快乐！</p></div></div>    
</body>
</html>