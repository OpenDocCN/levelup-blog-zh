<html>
<head>
<title>Sidetable: An Efficient tool to Summarize Pandas Dataframe</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">侧表:总结熊猫数据框架的有效工具</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/sidetable-an-efficient-tool-to-summarize-pandas-dataframe-330958528a82?source=collection_archive---------3-----------------------#2021-08-08">https://levelup.gitconnected.com/sidetable-an-efficient-tool-to-summarize-pandas-dataframe-330958528a82?source=collection_archive---------3-----------------------#2021-08-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="2310" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">侧钻包装基本指南</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/7015671eace2db7df1fc0283d24bf3ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1VWBAyWLHqbnOZ8jZBYYJQ.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">图片来自<a class="ae ky" href="https://pixabay.com/?utm_source=link-attribution&amp;amp;utm_medium=referral&amp;amp;utm_campaign=image&amp;amp;utm_content=2037545" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>的<a class="ae ky" href="https://pixabay.com/users/coffeebeanworks-558718/?utm_source=link-attribution&amp;amp;utm_medium=referral&amp;amp;utm_campaign=image&amp;amp;utm_content=2037545" rel="noopener ugc nofollow" target="_blank">咖啡豆</a></figcaption></figure><p id="7473" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Pandas是数据科学社区中流行的Python包，它提供了许多函数和方法来分析和总结数据集。为了更好地理解数据，数据分析是数据科学模型开发生命周期的重要组成部分。</p><p id="1484" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Pandas提出了大量可用于执行数据分析和探索的API。虽然Pandas的功能对于数据分析来说足够高效，但定制的库为Pandas增加了更多价值。</p><p id="be8f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Sidetable就是这样一个库，它是pandas <code class="fe lv lw lx ly b"><strong class="lb iu">value_counts</strong></code> <strong class="lb iu"> </strong>加上<code class="fe lv lw lx ly b"><strong class="lb iu">crosstab</strong></code> <strong class="lb iu"> </strong>功能的组合。在本文中，我们将更多地讨论sidetable包并探索它的功能。</p><h1 id="5849" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">侧表:</h1><p id="4a2b" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated">Sidetable是一个开源的Python库，它为您的熊猫数据帧构建了简单而有用的汇总表。它是熊猫<code class="fe lv lw lx ly b"><strong class="lb iu">value_counts</strong></code> <strong class="lb iu"> </strong>加<code class="fe lv lw lx ly b"><strong class="lb iu">crosstab</strong></code> <strong class="lb iu"> </strong>功能的组合，也可以给你的数据框添加小计。Sidetable是一个对数据分析和探索有用的工具。</p><h2 id="ec2d" class="mw ma it bd mb mx my dn mf mz na dp mj li nb nc ml lm nd ne mn lq nf ng mp nh bi translated">安装:</h2><p id="47cf" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated">Sidetable可以从PyPI使用</p><pre class="kj kk kl km gt ni ly nj nk aw nl bi"><span id="2bb0" class="mw ma it ly b gy nm nn l no np">pip install sidetable</span></pre><p id="5aad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦使用<code class="fe lv lw lx ly b">import sidetable</code>安装和导入，侧表的功能可以使用<code class="fe lv lw lx ly b">.stb</code>访问器作为数据帧的访问器。</p><h1 id="0ad1" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">用法:</h1><blockquote class="nq nr ns"><p id="da85" class="kz la nt lb b lc ld ju le lf lg jx lh nu lj lk ll nv ln lo lp nw lr ls lt lu im bi translated">我们将使用从Kaggle 下载的<a class="ae ky" href="https://www.kaggle.com/c/titanic/data" rel="noopener ugc nofollow" target="_blank"> Titanic数据集来实现这个库。</a></p></blockquote><p id="7bac" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">sidetable的想法是减少数据分析所需的代码行数，并加快工作流程。对于任何数据集，都需要执行一些数据分析任务，包括可视化要素分布、频率计数、小计计数和缺失记录计数。</p><p id="b1a2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将使用Titanic数据集详细讨论sidetable库的特性。</p><h2 id="c56b" class="mw ma it bd mb mx my dn mf mz na dp mj li nb nc ml lm nd ne mn lq nf ng mp nh bi translated">(1.)频率:</h2><p id="ba7a" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated">熊猫想出了计算特征的频率计数的<code class="fe lv lw lx ly b">value_counts()</code>函数。熊猫可以计算分布计数和概率分布，但你可能会希望如果它更容易结合的价值。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/efd9dc6d7c75ccff60ad357a7fe09d61.png" data-original-src="https://miro.medium.com/v2/resize:fit:710/format:webp/1*4Y-vkzSOmxRq0r9CrQ14tw.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)，使用熊猫的“幸存”特征的分布</figcaption></figure><p id="d8ef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">分布计数和概率分布可以结合，但是需要大量的代码输入和记忆。</p><p id="222d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有了sidetable，使用<code class="fe lv lw lx ly b">freq()</code>函数用1行Python代码实现它就更简单了。您可以获得累计总数、百分比以及更多的灵活性。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/563a139af99f300ba84cfd851a267819.png" data-original-src="https://miro.medium.com/v2/resize:fit:1104/format:webp/1*Vb2xvabeaEhCtpfhhxBveg.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)，使用侧表分发“幸存”特征</figcaption></figure><p id="a9be" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">除此之外，您还可以对多个列进行分组，以可视化分组后的要素的分布。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/23a06c05ee98dfd00f47a8dc9ba2ccc3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*d1GTXLEAiw1kfHxF1gUAXw.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)，使用侧表分布多个特征</figcaption></figure><p id="4feb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以根据需要对列进行分组。默认情况下，sidetable计算数据的计数。您还可以使用参数<code class="fe lv lw lx ly b">value</code>指定一个特性列，以指示数据的分组“总和”应该基于特定的列。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/2d862d1cb9ec53301bc3836cdecd4b82.png" data-original-src="https://miro.medium.com/v2/resize:fit:1108/format:webp/1*5pzNis01D5CX4g7Ptt-OUw.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)，根据特征值的“Pclass”特征分布</figcaption></figure><p id="f437" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了更好地进行数据分析，还可以根据特定的阈值过滤侧表。这可以通过在<code class="fe lv lw lx ly b"><strong class="lb iu">thresh </strong></code>参数中提供阈值来实现，并将剩余的特征值归入其他类别。</p><pre class="kj kk kl km gt ni ly nj nk aw nl bi"><span id="276a" class="mw ma it ly b gy nm nn l no np"><strong class="ly iu">df.stb.freq(['class', 'who'], value='fare', thresh=80, other_label='All others')</strong></span></pre><h2 id="8750" class="mw ma it bd mb mx my dn mf mz na dp mj li nb nc ml lm nd ne mn lq nf ng mp nh bi translated">(2.)计数:</h2><p id="904c" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated">侧表中的<code class="fe lv lw lx ly b"><strong class="lb iu">counts()</strong></code>函数可以生成一个汇总表，该表可用于确定您需要视为分类或数值的要素，以便进一步分析和建模。<code class="fe lv lw lx ly b"><strong class="lb iu">counts()</strong></code>该函数显示特性的唯一值的数量以及最频繁和最不频繁的值。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/497d8c7b4479e10af3d44031f6b280ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ilgr1sK0nXHQwTyGkRP8cg.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)，使用Sidetable统计所有特征</figcaption></figure><p id="1de8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">可以使用exclude和include参数从数据集中排除或包含特定的数据类型。</p><h2 id="7296" class="mw ma it bd mb mx my dn mf mz na dp mj li nb nc ml lm nd ne mn lq nf ng mp nh bi translated">(3.)缺失:</h2><p id="52b1" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated"><code class="fe lv lw lx ly b"><strong class="lb iu">missing()</strong></code>side table实现中的函数生成一个汇总表，该表按每列缺失值总数和百分比显示缺失记录。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/41a7899766629dfc4959984ae6f0f7f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:642/format:webp/1*W0GsJ6IlgrDOBk3_fbY9oA.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)，使用侧表分布所有要素的缺失值</figcaption></figure><h2 id="cb0f" class="mw ma it bd mb mx my dn mf mz na dp mj li nb nc ml lm nd ne mn lq nf ng mp nh bi translated">(4.)小计:</h2><p id="c3c3" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated">【Sidetable中的函数最好与Pandas中的group by函数一起使用。它可用于计算数据框分组的一个或多个级别的小计。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi od"><img src="../Images/439036c64a51eecb1ac416ffbfd5502b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AwjerjnC0bqIkOZ47rg08A.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)，整个数据框的小计实施</figcaption></figure><p id="69f7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lv lw lx ly b"><strong class="lb iu">subtotal()</strong></code>功能可以将其添加到一个或多个级别的分组数据中。您需要首先使用<code class="fe lv lw lx ly b"><strong class="lb iu">groupby()</strong></code>函数对数据框进行分组，然后在每一层添加一个小计。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/42d4974feca5a846f3b805e55aa06254.png" data-original-src="https://miro.medium.com/v2/resize:fit:1092/format:webp/1*2rqXOqqzfVmIynmbM_SYZA.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)，Groupby函数的小计实现</figcaption></figure></div><div class="ab cl of og hx oh" role="separator"><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok"/></div><div class="im in io ip iq"><h1 id="ddab" class="lz ma it bd mb mc om me mf mg on mi mj jz oo ka ml kc op kd mn kf oq kg mp mq bi translated">结论:</h1><p id="21b0" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated">Sidetable是一款高效便捷的工具，结合了熊猫的<code class="fe lv lw lx ly b"><strong class="lb iu">value_counts</strong></code> <strong class="lb iu"> </strong>加上<code class="fe lv lw lx ly b"><strong class="lb iu">crosstab</strong></code> <strong class="lb iu"> </strong>的功能。它生成一个可解释且易于理解的汇总表，也可用于提供分析结果。语法的简单性使它成为一个更好的数据分析和探索库。</p><h1 id="01a3" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated">参考资料:</h1><p id="b748" class="pw-post-body-paragraph kz la it lb b lc mr ju le lf ms jx lh li mt lk ll lm mu lo lp lq mv ls lt lu im bi translated">[1]侧钻GitHub:<a class="ae ky" href="https://github.com/chris1610/sidetable" rel="noopener ugc nofollow" target="_blank">https://github.com/chris1610/sidetable</a></p><blockquote class="or"><p id="e9af" class="os ot it bd ou ov ow ox oy oz pa lu dk translated">感谢您的阅读</p></blockquote></div></div>    
</body>
</html>