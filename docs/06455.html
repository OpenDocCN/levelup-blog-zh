<html>
<head>
<title>Upload files to Firebase Cloud Storage using Vue.js and Node.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ä½¿ç”¨Vue.jså’ŒNode.jså°†æ–‡ä»¶ä¸Šä¼ åˆ°Firebaseäº‘å­˜å‚¨</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://levelup.gitconnected.com/upload-files-to-firebase-cloud-storage-using-vue-js-and-node-js-9b61ea3c77df?source=collection_archive---------2-----------------------#2020-11-26">https://levelup.gitconnected.com/upload-files-to-firebase-cloud-storage-using-vue-js-and-node-js-9b61ea3c77df?source=collection_archive---------2-----------------------#2020-11-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="6d5b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ–‡ä»¶ä¸Šä¼ æ˜¯ç°åœ¨webåº”ç”¨ç¨‹åºçš„é‡è¦ç»„æˆéƒ¨åˆ†ä¹‹ä¸€ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘å°†å‘æ‚¨å±•ç¤ºå¦‚ä½•ä½¿ç”¨Node.jså’ŒVue.jså°†æ–‡ä»¶ä¸Šä¼ åˆ°Firebaseäº‘å­˜å‚¨ã€‚</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/ed06c31e92ea5b8f1df860fb87c882e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U6EZyTb84TIVtDQSNEPtdw.jpeg"/></div></div></figure><h1 id="e92c" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">å»ºç«‹firebaseé¡¹ç›®</h1><p id="3e74" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">ä¸ºæ­¤ï¼Œæ‚¨éœ€è¦æœ‰ä¸€ä¸ªfirebaseå¸æˆ·ã€‚å¦‚æœæ²¡æœ‰ï¼Œå¯ä»¥åœ¨è¿™é‡Œåˆ›å»ºä¸€ä¸ª<a class="ae ma" href="https://firebase.google.com/" rel="noopener ugc nofollow" target="_blank">ã€‚åœ¨firebaseæ§åˆ¶å°ä¸­ï¼Œé€šè¿‡å•å‡»â€œæ·»åŠ æ–°é¡¹ç›®â€åˆ›å»ºä¸€ä¸ªæ–°çš„firebaseé¡¹ç›®ã€‚ä¸ºæ‚¨çš„é¡¹ç›®é€‰æ‹©ä¸€ä¸ªåç§°ã€‚ç„¶åFirebaseå°†è®¾ç½®æ‚¨çš„é¡¹ç›®ã€‚è¦å­˜å‚¨æ–‡ä»¶ï¼Œè¯·å•å‡»å·¦ä¾§å¯¼èˆªçª—æ ¼ä¸­çš„â€œå­˜å‚¨â€æŒ‰é’®ã€‚å•å‡»â€œå¼€å§‹â€æŒ‰é’®ï¼Œç„¶åå°†æ‰“å¼€ä¸€ä¸ªæ¨¡å¼ï¼Œå…¶ä¸­åŒ…å«æ‚¨çš„äº‘å­˜å‚¨çš„å®‰å…¨è§„åˆ™ã€‚ä½ å¯ä»¥åœ¨è¿™é‡Œ</a>äº†è§£æ›´å¤šå®‰å…¨è§„åˆ™<a class="ae ma" href="https://firebase.google.com/docs/storage/security/get-started?authuser=1#sample-rules" rel="noopener ugc nofollow" target="_blank">ã€‚ç‚¹å‡»ä¸‹ä¸€æ­¥ï¼Œé€‰æ‹©æ‚¨çš„ä½ç½®ï¼Œç„¶åç‚¹å‡»â€œå®Œæˆâ€ã€‚ç„¶åfirebaseä¼šä¸ºä½ åˆ›å»ºä¸€ä¸ªé»˜è®¤çš„bucketã€‚</a></p><p id="18fa" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç°åœ¨æˆ‘ä»¬éœ€è¦è¿æ¥åˆ°æˆ‘ä»¬çš„bucketï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªç§é’¥æ¥å®‰å…¨åœ°è¿æ¥åˆ°æˆ‘ä»¬çš„bucketã€‚ä¸ºæ­¤ï¼Œå•å‡»å·¦ä¾§å¯¼èˆªçª—æ ¼é¡¶éƒ¨çš„è®¾ç½®å›¾æ ‡ï¼Œç„¶åå•å‡»é¡¹ç›®è®¾ç½®ã€‚åœ¨â€œé¡¹ç›®è®¾ç½®â€é¡µé¢ä¸­ï¼Œå•å‡»â€œæœåŠ¡å¸æˆ·â€é€‰é¡¹å¡ï¼Œç„¶åå•å‡»â€œç”Ÿæˆç§é’¥â€æŒ‰é’®ã€‚è¿™å°†ç”Ÿæˆä¸€ä¸ªJSONæ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«æˆ‘ä»¬çš„firebaseå¸æˆ·çš„å‡­è¯ã€‚è¿™ä¸ªæ–‡ä»¶åº”è¯¥ä¿å¯†ï¼Œæ°¸è¿œä¸è¦å­˜å‚¨åœ¨å…¬å…±å­˜å‚¨åº“ä¸­ã€‚æˆ‘ä»¬å·²ç»å®Œæˆäº†firebaseé¡¹ç›®çš„è®¾ç½®ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥æ„å»ºNode.js APIæ¥å°†æ–‡ä»¶ä¸Šä¼ åˆ°äº‘å­˜å‚¨ã€‚</p><h1 id="9fb2" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated"><strong class="ak">æ„å»ºAPI </strong></h1><p id="b1cd" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">ä¸ºäº†ä¸Šä¼ æ–‡ä»¶ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä¸€ä¸ªåä¸º<a class="ae ma" href="https://www.npmjs.com/package/multer" rel="noopener ugc nofollow" target="_blank"> multer </a>çš„åŒ…ã€‚</p><p id="942f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å®‰è£…ä¾èµ–é¡¹</p><pre class="km kn ko kp gt mb mc md me aw mf bi"><span id="effa" class="mg ky iq mc b gy mh mi l mj mk">npm i express multer firebase-admin</span></pre><p id="76b7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç°åœ¨åˆ›å»ºä¸€ä¸ªwebæœåŠ¡å™¨å¹¶å¯¼å…¥ä¾èµ–é¡¹ã€‚ä¸ºæ­¤ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º<code class="fe ml mm mn mc b">index.js</code>çš„æ–‡ä»¶ï¼Œå¹¶æ·»åŠ ä»¥ä¸‹ä»£ç ã€‚</p><pre class="km kn ko kp gt mb mc md me aw mf bi"><span id="6909" class="mg ky iq mc b gy mh mi l mj mk">const express = require('express')<br/>const multer = require('multer')<br/>const app = express()</span><span id="67dd" class="mg ky iq mc b gy mo mi l mj mk">app.use(express.urlencoded({extended: false}))<br/>app.use(express.json({extended: false}))</span><span id="a98c" class="mg ky iq mc b gy mo mi l mj mk">app.post('/upload', (req, res) =&gt; {<br/>    console.log("File upload API")<br/>}</span><span id="83c0" class="mg ky iq mc b gy mo mi l mj mk">app.listen(5000, () =&gt; {<br/>    console.log('ğŸš€Server listening on port 5000')<br/>})</span></pre><p id="3eb6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘ä»¬ç°åœ¨æœ‰ä¸€ä¸ªè¿è¡Œåœ¨ç«¯å£5000ä¸Šçš„åŸºæœ¬webæœåŠ¡å™¨ã€‚</p><p id="2f51" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç°åœ¨æˆ‘ä»¬è¦æ„å»ºæˆ‘ä»¬çš„æ–‡ä»¶ä¸Šä¼ APIã€‚æˆ‘ä»¬å°†ä½¿ç”¨multerä¸Šä¼ æ–‡ä»¶ã€‚multerå°†æ‹¥æœ‰åŒ…å«ä¸Šä¼ æ–‡ä»¶çš„<code class="fe ml mm mn mc b">req.file</code>å¯¹è±¡å’ŒåŒ…å«æ–‡æœ¬å­—æ®µçš„<code class="fe ml mm mn mc b">req.body</code>å¯¹è±¡ã€‚æˆ‘ä»¬å°†ä½¿ç”¨multeræä¾›çš„<code class="fe ml mm mn mc b">MemoryStorage</code>ã€‚å†…å­˜å­˜å‚¨å¼•æ“å°†æ–‡ä»¶ä½œä¸º<code class="fe ml mm mn mc b">Buffer</code>å¯¹è±¡å­˜å‚¨åœ¨å†…å­˜ä¸­ã€‚</p><pre class="km kn ko kp gt mb mc md me aw mf bi"><span id="48ad" class="mg ky iq mc b gy mh mi l mj mk">const upload = multer({<br/>    storage: multer.memoryStorage()<br/>})</span><span id="d967" class="mg ky iq mc b gy mo mi l mj mk">app.use(upload.single())</span></pre><p id="4736" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç°åœ¨æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code class="fe ml mm mn mc b">req.file</code>è®¿é—®ä¸Šä¼ çš„æ–‡ä»¶ã€‚å¦‚æœä½ æœ‰å¤šä¸ªæ–‡ä»¶ï¼Œä½¿ç”¨<code class="fe ml mm mn mc b">upload.any()</code>è€Œä¸æ˜¯<code class="fe ml mm mn mc b">upload.single()</code>ã€‚å¦‚æœä½ ä½¿ç”¨çš„æ˜¯<code class="fe ml mm mn mc b">upload.any()</code>ï¼Œä½ åº”è¯¥ä½¿ç”¨<code class="fe ml mm mn mc b">req.files</code>ï¼Œå®ƒå°†æ˜¯ä¸€ä¸ªæ–‡ä»¶æ•°ç»„ã€‚</p><p id="b68a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç°åœ¨ä½ çš„<code class="fe ml mm mn mc b">index.js</code>ä¼šæ˜¯è¿™æ ·çš„</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="mp mq l"/></div></figure><p id="7eda" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">è¿æ¥åˆ°firebase </strong></p><p id="7376" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åˆ›å»ºä¸€ä¸ªåä¸º<code class="fe ml mm mn mc b">firebase.js</code>çš„æ–°æ–‡ä»¶ã€‚å¯¼å…¥firebaseä¾èµ–é¡¹å¹¶åˆå§‹åŒ–firebase admin SDKã€‚</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="mp mq l"/></div></figure><p id="363f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘ä»¬å·²ç»åœ¨åº”ç”¨ç¨‹åºä¸­åˆå§‹åŒ–äº†firebaseã€‚ç°åœ¨æˆ‘ä»¬å¯ä»¥ç§»åŠ¨åˆ°<code class="fe ml mm mn mc b">/upload</code>ç«¯ç‚¹ã€‚</p><p id="8b20" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å°†æ–‡ä»¶ä¸Šä¼ åˆ°firebase </p><p id="481e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å°†å‡ºå£æ¡¶ä»<code class="fe ml mm mn mc b">firebase.js</code>å¯¼å…¥åˆ°<code class="fe ml mm mn mc b">index.js</code></p><pre class="km kn ko kp gt mb mc md me aw mf bi"><span id="6e4a" class="mg ky iq mc b gy mh mi l mj mk">const firebase = require('./firebase')</span></pre><p id="2988" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦æ£€æŸ¥ä¼ å…¥çš„è¯·æ±‚å®é™…ä¸Šæ˜¯å¦åŒ…å«æ–‡ä»¶ï¼Œå¦‚æœè¯·æ±‚ä¸åŒ…å«ä»»ä½•æ–‡ä»¶ï¼Œæˆ‘ä»¬å°†å‘é€çŠ¶æ€ä¸º400çš„å“åº”ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼éªŒè¯è¯¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ã€‚<code class="fe ml mm mn mc b">/upload</code>ç«¯ç‚¹å†…ï¼Œ</p><pre class="km kn ko kp gt mb mc md me aw mf bi"><span id="0230" class="mg ky iq mc b gy mh mi l mj mk">if(!req.file) {<br/>        res.status(400).send("Error: No files found")<br/>}</span></pre><p id="2b6e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Firebaseä½¿ç”¨blobsæ¥å­˜å‚¨äºŒè¿›åˆ¶æ•°æ®ã€‚blobsæ˜¯äºŒè¿›åˆ¶å¤§å¯¹è±¡ï¼Œå®ƒæ˜¯ä½œä¸ºå•ä¸ªå®ä½“å­˜å‚¨åœ¨æ•°æ®åº“ä¸­çš„äºŒè¿›åˆ¶æ•°æ®çš„é›†åˆã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code class="fe ml mm mn mc b">bucket.file()</code>æ–¹æ³•é€šè¿‡ä¼ é€’æ–‡ä»¶åæ¥åˆ›å»ºä¸€ä¸ªæ–°çš„blobã€‚</p><pre class="km kn ko kp gt mb mc md me aw mf bi"><span id="51dd" class="mg ky iq mc b gy mh mi l mj mk">const blob = firebase.bucket.file(req.file.filename)</span></pre><p id="eecf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç°åœ¨æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªå¯å†™çš„æµæ¥å¤„ç†ä¼ å…¥çš„æ•°æ®ã€‚æµåŸºæœ¬ä¸Šæ˜¯æ•°æ®çš„é›†åˆï¼Œä½†å®ƒå¯èƒ½ä¸ä¼šä¸€æ¬¡å…¨éƒ¨å¯ç”¨ï¼Œæˆ‘ä»¬éœ€è¦ä¸€æ¬¡å¤„ç†ä¸€ä¸ªæ•°æ®å—ã€‚</p><p id="0f3a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ‚¨éœ€è¦å°†æ–‡ä»¶çš„mimetypeä½œä¸ºå…ƒæ•°æ®ä¼ é€’ï¼Œå¦åˆ™æ‚¨å°†æ— æ³•ä»¥æ­£ç¡®çš„æ ¼å¼è¯»å–æ•°æ®ã€‚</p><pre class="km kn ko kp gt mb mc md me aw mf bi"><span id="5d8d" class="mg ky iq mc b gy mh mi l mj mk">cosnt blobWriter = blob.createWriteStream({<br/>    metadata: {<br/>        contentType: req.file.mimetype<br/>    }<br/>})</span></pre><p id="4dcc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘ä»¬éœ€è¦åœ¨åˆ›å»ºå¯å†™æµæ—¶æ£€æŸ¥é”™è¯¯ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡<code class="fe ml mm mn mc b">blobWriter</code>ä¸Šçš„<code class="fe ml mm mn mc b">error</code>äº‹ä»¶åšåˆ°è¿™ä¸€ç‚¹</p><pre class="km kn ko kp gt mb mc md me aw mf bi"><span id="c9af" class="mg ky iq mc b gy mh mi l mj mk">blobWriter.on('error', (err) =&gt; {<br/>    console.log(err)<br/>})</span></pre><p id="b091" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åœ¨<code class="fe ml mm mn mc b">finish</code>äº‹ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å‘å®¢æˆ·ç«¯å‘é€æˆåŠŸå“åº”ã€‚</p><pre class="km kn ko kp gt mb mc md me aw mf bi"><span id="3e28" class="mg ky iq mc b gy mh mi l mj mk">blobWriter.on('finish', () =&gt; {<br/>    res.status(200).send("File uploaded.")<br/>})</span></pre><p id="4bb9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å½“æ•°æ®å¤„ç†å®Œæˆæ—¶ï¼Œå°†å‘å‡º<code class="fe ml mm mn mc b">end</code>äº‹ä»¶ã€‚</p><pre class="km kn ko kp gt mb mc md me aw mf bi"><span id="1598" class="mg ky iq mc b gy mh mi l mj mk">blobWriter.end(req.file.buffer)</span></pre><p id="820e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å°±æ˜¯è¿™æ ·ã€‚æˆ‘ä»¬å·²ç»åˆ›å»ºäº†Node.js APIæ¥å°†æ–‡ä»¶ä¸Šä¼ åˆ°firebaseäº‘å­˜å‚¨ã€‚ç°åœ¨ä½ çš„<code class="fe ml mm mn mc b">index.js</code>æ–‡ä»¶ä¼šæ˜¯è¿™æ ·çš„ã€‚</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="mp mq l"/></div></figure></div><div class="ab cl mr ms hu mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="ij ik il im in"><h1 id="efc0" class="kx ky iq bd kz la my lc ld le mz lg lh li na lk ll lm nb lo lp lq nc ls lt lu bi translated">æ„å»ºå‰ç«¯</h1><p id="e1dc" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">ç°åœ¨æˆ‘ä»¬éœ€è¦åˆ›å»ºå‰ç«¯æ¥é€‰æ‹©è¦ä¸Šä¼ çš„æ–‡ä»¶ã€‚æˆ‘ä»¬å°†åœ¨Vue.jsä¸­è¿›è¡Œ</p><p id="b6eb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä½¿ç”¨ç±»å‹æ–‡ä»¶å’ŒæŒ‰é’®åˆ›å»ºä¸€ä¸ª<code class="fe ml mm mn mc b">input</code>å­—æ®µï¼Œä»¥è°ƒç”¨APIè°ƒç”¨çš„å‡½æ•°ã€‚</p><pre class="km kn ko kp gt mb mc md me aw mf bi"><span id="f347" class="mg ky iq mc b gy mh mi l mj mk">&lt;input type="file" ref="file" v-on:change="handleUpload()"/&gt;<br/>&lt;button v-on:click="uploadFile()"&gt;Upload&lt;/button&gt;</span></pre><p id="5f43" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç°åœ¨æˆ‘ä»¬å·²ç»ç”¨fileç±»å‹åˆ›å»ºäº†ä¸€ä¸ªè¾“å…¥å­—æ®µã€‚æˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ª<code class="fe ml mm mn mc b">ref</code>å±æ€§ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥è®¿é—®è¾“å…¥æ–‡ä»¶ã€‚æˆ‘ä»¬è¿˜æ·»åŠ äº†ä¸€ä¸ª<code class="fe ml mm mn mc b">handleUpload</code>å‡½æ•°ï¼Œå®ƒå°†åœ¨ç”¨æˆ·é€‰æ‹©æ–‡ä»¶æ—¶è¢«è§¦å‘ã€‚è¿™ä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªå˜é‡æ¥ä¿å­˜ç”¨æˆ·é€‰æ‹©çš„æ–‡ä»¶çš„å€¼ã€‚ç°åœ¨æˆ‘ä»¬å°†ä½¿ç”¨<code class="fe ml mm mn mc b">FileList</code>å¯¹è±¡å°†è¾“å…¥æ–‡ä»¶ä¿å­˜åˆ°å˜é‡ä¸­ã€‚å½“ç”¨æˆ·é€‰æ‹©ä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œ<code class="fe ml mm mn mc b">handleUpload</code>å°†è¢«è§¦å‘ï¼Œè¾“å…¥æ–‡ä»¶å°†è¢«ä¿å­˜åˆ°å˜é‡ä¸­ã€‚ä¸ºæ­¤ï¼Œåœ¨æˆ‘ä»¬çš„<code class="fe ml mm mn mc b">script</code>éƒ¨åˆ†æ·»åŠ ä»¥ä¸‹å†…å®¹:</p><pre class="km kn ko kp gt mb mc md me aw mf bi"><span id="6fa3" class="mg ky iq mc b gy mh mi l mj mk">&lt;script&gt;<br/>  export default {<br/>    data() {<br/>        return {<br/>            file: ''<br/>        }<br/>    },<br/>    methods: {<br/>      handleFileUpload(){<br/>          this.file = this.$refs.file.files[0]<br/>      },<br/>      uploadFile(){<br/>          <br/>      }<br/>    }<br/>  }<br/>&lt;/script&gt;</span></pre><p id="5123" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘ä»¬å°†ä½¿ç”¨<code class="fe ml mm mn mc b">FormData</code>åˆ›å»ºä¸€ä¸ªä¿å­˜æ–‡ä»¶çš„å¯¹è±¡ã€‚ç”¨<code class="fe ml mm mn mc b">uploadFile</code>æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°çš„è¡¨å•æ•°æ®å¯¹è±¡</p><pre class="km kn ko kp gt mb mc md me aw mf bi"><span id="1f85" class="mg ky iq mc b gy mh mi l mj mk">const formData = new FormData()</span></pre><p id="c466" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç°åœ¨æˆ‘ä»¬éœ€è¦å°†æ–‡ä»¶æ·»åŠ åˆ°<code class="fe ml mm mn mc b">formData</code>å¯¹è±¡ä¸­ã€‚</p><pre class="km kn ko kp gt mb mc md me aw mf bi"><span id="f2d9" class="mg ky iq mc b gy mh mi l mj mk">formData.append("file", this.file)</span></pre><p id="c676" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åç«¯API <code class="fe ml mm mn mc b">upload.single(&lt;field name&gt;)</code>ä¸Šçš„å­—æ®µåå¿…é¡»ä¸æˆ‘ä»¬çš„<code class="fe ml mm mn mc b">formData</code>ä¸Šçš„å­—æ®µåç›¸åŒã€‚</p><p id="1486" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æœ€åï¼Œæˆ‘ä»¬å¯ä»¥å°†æ•°æ®å‘å¸ƒåˆ°åç«¯APIã€‚æˆ‘åœ¨ç”¨Axioså‘å¸ƒæ•°æ®ã€‚</p><pre class="km kn ko kp gt mb mc md me aw mf bi"><span id="3e8c" class="mg ky iq mc b gy mh mi l mj mk">axios.post('http://localhost:5000/upload', formData, {<br/>    headers: {<br/>        "Content-Type": "multipart/form-data"<br/>    }<br/>}).then(response =&gt; {<br/>    console.log(response.data)<br/>}).catch(error =&gt; {<br/>    console.log(error)<br/>})</span></pre><p id="fd08" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ‚¨æœ€ç»ˆçš„vue.jsæ–‡ä»¶å°†å¦‚ä¸‹æ‰€ç¤ºã€‚</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="mp mq l"/></div></figure><p id="8c3f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å°±æ˜¯è¿™æ ·ã€‚æˆ‘ä»¬æœ€ç»ˆä½¿ç”¨Node.jsã€Vue.jså’ŒFirebaseåˆ›å»ºäº†æ–‡ä»¶ä¸Šä¼ åº”ç”¨ç¨‹åºã€‚</p><p id="bf39" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä½ å¯ä»¥åœ¨è¿™é‡Œè·å¾—è¯¥é¡¹ç›®çš„å®Œæ•´ä»£ç ã€‚</p><div class="nd ne gp gr nf ng"><a href="https://github.com/amljs/node-vue-firebase-fileupload" rel="noopener  ugc nofollow" target="_blank"><div class="nh ab fo"><div class="ni ab nj cl cj nk"><h2 class="bd ir gy z fp nl fr fs nm fu fw ip bi translated">AML js/node-vue-fire base-file upload</h2><div class="nn l"><h3 class="bd b gy z fp nl fr fs nm fu fw dk translated">GitHubæ˜¯è¶…è¿‡5000ä¸‡å¼€å‘äººå‘˜çš„å®¶å›­ï¼Œä»–ä»¬ä¸€èµ·å·¥ä½œæ¥æ‰˜ç®¡å’Œå®¡æŸ¥ä»£ç ã€ç®¡ç†é¡¹ç›®å’Œæ„å»ºâ€¦</h3></div><div class="no l"><p class="bd b dl z fp nl fr fs nm fu fw dk translated">github.com</p></div></div><div class="np l"><div class="nq l nr ns nt np nu kv ng"/></div></div></a></div><p id="fd45" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å¦‚æœä½ æœ‰ä»»ä½•ç–‘é—®æˆ–éœ€è¦ä»»ä½•è¿›ä¸€æ­¥çš„æ¾„æ¸…ï¼Œè¯·åœ¨è¯„è®ºåŒºå‘Šè¯‰æˆ‘ã€‚æˆ‘å¾ˆä¹æ„å¸®åŠ©ä½ ã€‚</p><p id="55fe" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰å¸®åŠ©æˆ–è€…æœ‰è¶£ï¼Œå¯ä»¥è€ƒè™‘é¼“æŒã€‚</p><p id="aea3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç¼–ç å¿«ä¹ï¼ï¼ï¼</p></div></div>    
</body>
</html>