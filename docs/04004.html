<html>
<head>
<title>Animated Routes on Google Maps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">谷歌地图上的动画路线</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/animated-routes-on-google-maps-5de4f32261d7?source=collection_archive---------4-----------------------#2020-06-05">https://levelup.gitconnected.com/animated-routes-on-google-maps-5de4f32261d7?source=collection_archive---------4-----------------------#2020-06-05</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="c016" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用动画增强地图上的路线</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/e267318139ff1e28d65e656b650ffed7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*_9HGfiXqcW_OEgVqxOaX3g.gif"/></div></div></figure><h1 id="8922" class="ku kv it bd kw kx ky kz la lb lc ld le jz lf ka lg kc lh kd li kf lj kg lk ll bi translated">主要思想</h1><p id="def7" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">首先，在弄脏你的手之前，我们有两件事需要澄清。</p><blockquote class="mi mj mk"><p id="e01e" class="lm ln ml lo b lp mm ju lr ls mn jx lu mo mp lx ly mq mr mb mc ms mt mf mg mh im bi translated"><strong class="lo iu">GMS path</strong>:cllocationcoordinate 2d的不可变数组</p><p id="1e78" class="lm ln ml lo b lp mm ju lr ls mn jx lu mo mp lx ly mq mr mb mc ms mt mf mg mh im bi translated">GMSPolyline :在地图视图上绘制并显示的路线</p></blockquote><p id="cfa1" class="pw-post-body-paragraph lm ln it lo b lp mm ju lr ls mn jx lu lv mp lx ly lz mr mb mc md mt mf mg mh im bi translated">因此，我们将迭代一个<strong class="lo iu"> GMSPath </strong>上的每个位置，然后用新的颜色创建一个<strong class="lo iu"> new </strong> <strong class="lo iu"> GMSPath </strong>和<strong class="lo iu">new</strong><strong class="lo iu">GMSPolyline</strong>，使其看起来像一个动画</p><h1 id="b578" class="ku kv it bd kw kx ky kz la lb lc ld le jz lf ka lg kc lh kd li kf lj kg lk ll bi translated">实施</h1><h2 id="9532" class="mu kv it bd kw mv mw dn la mx my dp le lv mz na lg lz nb nc li md nd ne lk nf bi translated">获取路线</h2><p id="690b" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">这不是本文的主要部分，所以我们将快速进行。</p><p id="7003" class="pw-post-body-paragraph lm ln it lo b lp mm ju lr ls mn jx lu lv mp lx ly lz mr mb mc md mt mf mg mh im bi translated">Google支持美国Google Direction <a class="ae ng" href="https://developers.google.com/maps/documentation/directions/intro" rel="noopener ugc nofollow" target="_blank"> API </a>获取经过有效坐标的路线。调用完API后，你会得到一个路由数组，你可以选择一个，然后找到参数是<code class="fe nh ni nj nk b">overview_polyline</code>，你可以看到编码的路由，这就是它的样子。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nl"><img src="../Images/599fff52c7bfc23f3d33b2fe425ea686.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LnUi0Brhw_EhAU-pNLKD2A.png"/></div></div><figcaption class="nm nn gj gh gi no np bd b be z dk translated">请求google方向API时的编码路线</figcaption></figure><p id="4442" class="pw-post-body-paragraph lm ln it lo b lp mm ju lr ls mn jx lu lv mp lx ly lz mr mb mc md mt mf mg mh im bi translated">下面的例子让你对这一步有个大概的了解，完整的回购例子附在本文的底部</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nq nr l"/></div></figure><h2 id="6dc9" class="mu kv it bd kw mv mw dn la mx my dp le lv mz na lg lz nb nc li md nd ne lk nf bi translated">在地图上画一条路线</h2><p id="585b" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">现在，你得到了你的编码路线，让我们把它画在地图上。</p><p id="3ef1" class="pw-post-body-paragraph lm ln it lo b lp mm ju lr ls mn jx lu lv mp lx ly lz mr mb mc md mt mf mg mh im bi translated">通过以下方法创建路径(包含有效坐标的数组)</p><blockquote class="mi mj mk"><p id="c986" class="lm ln ml lo b lp mm ju lr ls mn jx lu mo mp lx ly mq mr mb mc ms mt mf mg mh im bi translated"><code class="fe nh ni nj nk b">GMSPath(fromEncodedPath: route)</code></p></blockquote><p id="cb44" class="pw-post-body-paragraph lm ln it lo b lp mm ju lr ls mn jx lu lv mp lx ly lz mr mb mc md mt mf mg mh im bi translated">并通过GMSPolyline创建一个UI路径</p><blockquote class="mi mj mk"><p id="3791" class="lm ln ml lo b lp mm ju lr ls mn jx lu mo mp lx ly mq mr mb mc ms mt mf mg mh im bi translated"><code class="fe nh ni nj nk b">GMSPolyline(path: path)</code></p></blockquote><p id="5202" class="pw-post-body-paragraph lm ln it lo b lp mm ju lr ls mn jx lu lv mp lx ly lz mr mb mc md mt mf mg mh im bi translated">完成这一步后，你就可以得到并在地图上正确显示路线了。下面的例子让你对这个步骤有一个大概的了解</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="8c15" class="pw-post-body-paragraph lm ln it lo b lp mm ju lr ls mn jx lu lv mp lx ly lz mr mb mc md mt mf mg mh im bi translated">现在，你的地图看起来就像一条普通的路线，没有动画</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ns"><img src="../Images/e3c36a314e302c93ec0cf2a1fbee35e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CHQEnI2zVHV7IZxkKp2gAQ.png"/></div></div></figure><h2 id="0aa7" class="mu kv it bd kw mv mw dn la mx my dp le lv mz na lg lz nb nc li md nd ne lk nf bi translated">动画显示路线</h2><p id="e1f0" class="pw-post-body-paragraph lm ln it lo b lp lq ju lr ls lt jx lu lv lw lx ly lz ma mb mc md me mf mg mh im bi translated">创建一个计时器，在x秒后更新一条新路线</p><p id="5fae" class="pw-post-body-paragraph lm ln it lo b lp mm ju lr ls mn jx lu lv mp lx ly lz mr mb mc md mt mf mg mh im bi translated">用下面这条线，我们将每0.01秒遍历路径上的每个坐标，并调用这个函数<code class="fe nh ni nj nk b">animatePolylinePath</code></p><blockquote class="mi mj mk"><p id="ec23" class="lm ln ml lo b lp mm ju lr ls mn jx lu mo mp lx ly mq mr mb mc ms mt mf mg mh im bi translated">timer = Timer.scheduledTimer(时间间隔:0.01，目标:<strong class="lo iu">自身</strong>，选择器:<strong class="lo iu">#选择器</strong> ( <strong class="lo iu">自身</strong>)。animatePolylinePath)，userInfo: <strong class="lo iu"> nil </strong>，repeats: <strong class="lo iu"> true </strong></p></blockquote><p id="51e8" class="pw-post-body-paragraph lm ln it lo b lp mm ju lr ls mn jx lu lv mp lx ly lz mr mb mc md mt mf mg mh im bi translated">如上所述，我们将创建一条<strong class="lo iu">新路径</strong>和一条<strong class="lo iu">新折线</strong>，然后将<strong class="lo iu">路径</strong>上的每个坐标添加到<strong class="lo iu">新路径</strong>中，并为<strong class="lo iu">新折线创建一种新样式或新颜色。</strong>完成迭代后，你可以再次重启定时器，让它无限动画化</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="3762" class="pw-post-body-paragraph lm ln it lo b lp mm ju lr ls mn jx lu lv mp lx ly lz mr mb mc md mt mf mg mh im bi translated">耶，现在我们有了一条从<strong class="lo iu"> <em class="ml">老特拉福德</em> </strong> <strong class="lo iu">球场</strong>到<strong class="lo iu"> <em class="ml">阿提哈德球场</em> </strong>的动画路线，就像这样</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/1e1b91ff8ced6e104a24c8b2dfbedcaf.png" data-original-src="https://miro.medium.com/v2/resize:fit:444/1*0wzfmOaPTcZoAJ3w1ZcA0A.gif"/></div></figure><p id="8bfa" class="pw-post-body-paragraph lm ln it lo b lp mm ju lr ls mn jx lu lv mp lx ly lz mr mb mc md mt mf mg mh im bi translated">让我们通过使用两种颜色的<a class="ae ng" href="https://developers.google.com/maps/documentation/ios-sdk/reference/interface_g_m_s_style_span?hl=vi" rel="noopener ugc nofollow" target="_blank"><strong class="lo iu">GMSStyleSpan</strong></a><strong class="lo iu"/>来尝试渐变路径和动画</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="8343" class="pw-post-body-paragraph lm ln it lo b lp mm ju lr ls mn jx lu lv mp lx ly lz mr mb mc md mt mf mg mh im bi translated">这是结果</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/3d302da0ccba3e6f8020b88f000f4970.png" data-original-src="https://miro.medium.com/v2/resize:fit:444/1*KBxXeAi2-NdAJF87Uzd3Tg.gif"/></div></figure><p id="4340" class="pw-post-body-paragraph lm ln it lo b lp mm ju lr ls mn jx lu lv mp lx ly lz mr mb mc md mt mf mg mh im bi translated"><strong class="lo iu">破折号动画</strong></p><p id="1bde" class="pw-post-body-paragraph lm ln it lo b lp mm ju lr ls mn jx lu lv mp lx ly lz mr mb mc md mt mf mg mh im bi translated">创建<strong class="lo iu">彩色虚线</strong>和<strong class="lo iu">透明虚线</strong>(每个虚线长度根据地图视图和缩放级别计算)</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="7ab8" class="pw-post-body-paragraph lm ln it lo b lp mm ju lr ls mn jx lu lv mp lx ly lz mr mb mc md mt mf mg mh im bi translated">这是结果</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/d06fa6ef21a257e12d31946ad46bb30f.png" data-original-src="https://miro.medium.com/v2/resize:fit:444/1*mIJHsyRC21Y_k9OjyLn5tg.gif"/></div></figure><p id="cf1e" class="pw-post-body-paragraph lm ln it lo b lp mm ju lr ls mn jx lu lv mp lx ly lz mr mb mc md mt mf mg mh im bi translated">完整的代码供您尝试</p><div class="nu nv gp gr nw nx"><a href="https://github.com/ryanisnhp/AnimatedRoute" rel="noopener  ugc nofollow" target="_blank"><div class="ny ab fo"><div class="nz ab oa cl cj ob"><h2 class="bd iu gy z fp oc fr fs od fu fw is bi translated">ryanisnhp/AnimatedRoute</h2><div class="oe l"><h3 class="bd b gy z fp oc fr fs od fu fw dk translated">使用动画增强地图上的路线。通过在…上创建帐户，为ryanisnhp/AnimatedRoute开发做出贡献</h3></div><div class="of l"><p class="bd b dl z fp oc fr fs od fu fw dk translated">github.com</p></div></div><div class="og l"><div class="oh l oi oj ok og ol ks nx"/></div></div></a></div></div></div>    
</body>
</html>