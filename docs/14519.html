<html>
<head>
<title>Kubernetes: Installing MicroK8s On Your Local Machine In 5 Minutes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">kubernetes:5分钟内在本地机器上安装MicroK8s</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/kubernetes-installing-microk8s-on-your-local-machine-in-5-minutes-30f9a7b48795?source=collection_archive---------6-----------------------#2022-12-04">https://levelup.gitconnected.com/kubernetes-installing-microk8s-on-your-local-machine-in-5-minutes-30f9a7b48795?source=collection_archive---------6-----------------------#2022-12-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="43e1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这篇简明的教程将向您展示如何在您的本地机器上使用MicroK8s，只需5分钟。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/c6ac425b8efc897f553825202cc0ec8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LVbXZ5bAq5sMEX0Rrh7NRA.png"/></div></div></figure><h1 id="0a48" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">什么是MicroK8s？</h1><p id="4fbe" class="pw-post-body-paragraph jq jr it js b jt ly jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj mc kl km kn im bi translated">MicroK8s是一个最小的、CNCF认证的Kubernetes发行版。MicroK8s足够轻量，可以在边缘运行Kubernetes，占用的CPU和内存非常少。此外，由于其重量轻，它启动非常快，特别是与相对较重(尽管也很强大)的Minikube相比。</p><p id="424c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">虽然MicroK8s拥有Kubernetes的所有核心组件，但它也坚持使用典型的Kubernetes插件，如DNS、Helm、registry、storage等。如果需要，可以用一个命令添加。</p><p id="11b1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">总的来说，MicroK8s是本地Kubernetes开发的一个很好的选择，因为它占用的资源少，安装和启动时间也快且简单。</p><h1 id="e6c8" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">装置</h1><p id="7548" class="pw-post-body-paragraph jq jr it js b jt ly jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj mc kl km kn im bi translated">在macOS上运行时，MicroK8s只需要两个命令。</p><pre class="kp kq kr ks gt md me mf bn mg mh bi"><span id="d445" class="mi lb it me b be mj mk l ml mm">brew install ubuntu/microk8s/microk8s<br/>microk8s install</span></pre><p id="add1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在Linux上也很容易，但是根据您已经存在的设置，您可能需要添加一些步骤。下面，我列出了所有必要的和可能必要的步骤。</p><pre class="kp kq kr ks gt md me mf bn mg mh bi"><span id="6cf5" class="mi lb it me b be mj mk l ml mm">sudo apt-get -y update<br/>sudo snap install core<br/>sudo snap install microk8s --classic<br/>sudo usermod -a -G microk8s $USER<br/>sudo chown -f -R $USER ~/.kube<br/>sudo microk8s config &gt; ~/.kube/config</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi mn"><img src="../Images/e1cf5320d8b61da41b12fb56603edeab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vOEd8AVuv0PkSn1UJPzPOA.png"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">microk8s安装</figcaption></figure><p id="c40e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">安装完成后，MicroK8s会自动启动。总的来说，安装MicroK8s并等待集群就绪只需要几分钟时间。</p><p id="a211" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">使用<code class="fe ms mt mu me b">microk8s status --wait-ready</code>您可以检查您的MicroK8s集群的状态，只有当集群启动并运行时才结束。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi mv"><img src="../Images/0cbf87f1ad77840530a61c66d5e30a83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DPI3dBZmU96zl8D4H13MXg.png"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated"><code class="fe ms mt mu me b">microk8s status --wait-ready</code></figcaption></figure><p id="646a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果需要，你可以很容易地从上面的截图中添加任何当前“禁用”的插件。</p><p id="346d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您可以使用以下命令来设置您的集群的Kubernetes Dashboard、CoreDNS、Istio或任何其他支持的插件。</p><pre class="kp kq kr ks gt md me mf bn mg mh bi"><span id="89fd" class="mi lb it me b be mj mk l ml mm">microk8s enable dashboard dns istio</span></pre><p id="3fbd" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">MicroK8s安装的一个非常好的额外好处是<code class="fe ms mt mu me b">kubectl</code>安装在引擎盖下。尽管不是直接通过<code class="fe ms mt mu me b">kubectl</code>而是通过<code class="fe ms mt mu me b">microk8s kubectl</code>获得。您可以像在任何其他集群上一样在MicroK8s集群上运行任何命令。在下面的截图中，您可以看到该命令是如何工作的。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi mw"><img src="../Images/82e9dccfa4dc31f4e767417aad1b0f47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LCBfPIWdOoAsMmQB_5csow.png"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">microk8s kubectl get all</figcaption></figure><p id="6929" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">因为总是键入<code class="fe ms mt mu me b">microk8s kubectl</code>非常麻烦(kubectl本身已经很长了)，所以官方建议创建一个别名。</p><p id="f88b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">你选择什么取决于你自己，但总的来说,<code class="fe ms mt mu me b">alias mkctl="microk8s kubectl"</code>是一种很好且容易理解的方式。</p><p id="3715" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果您使用了上述所有命令来设置您的MicoK8s集群，那么在您的<code class="fe ms mt mu me b">~/.kube/config</code>文件中也应该有一个条目。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi gj"><img src="../Images/f6e4af31220af46ce0020daf50731b75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TAhXWWoDBzFzi9cPYFKcsg.png"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">猫~/。kube/配置</figcaption></figure><p id="a452" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果没有，有两种简单的方法可以获得MicroK8s集群的配置:</p><pre class="kp kq kr ks gt md me mf bn mg mh bi"><span id="f421" class="mi lb it me b be mj mk l ml mm"># The "kubectl"-way<br/>mkctl config view --minify --raw<br/><br/># The direct microk8s way<br/>microk8s config</span></pre><p id="8cca" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">为了确保一切正常运行，可以使用下面的命令获取所有名称空间的所有资源。</p><pre class="kp kq kr ks gt md me mf bn mg mh bi"><span id="183b" class="mi lb it me b be mj mk l ml mm"># Get all resources for all namespaces<br/>mkctl get all --all-namespaces<br/><br/># Shorthand<br/>mkctl get all -A</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi mx"><img src="../Images/dfac4b64b820e5990868cbe08ee1b831.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tf4o4jgf0wMlLN4juMGo2g.png"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">得到全A</figcaption></figure><h2 id="1237" class="my lb it bd lc mz na dn lg nb nc dp lk kb nd ne lo kf nf ng ls kj nh ni lw nj bi translated">停止集群</h2><p id="1879" class="pw-post-body-paragraph jq jr it js b jt ly jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj mc kl km kn im bi translated">当然，只有当您正在本地机器上工作时，您才希望集群在本地机器上运行。因此，您需要不时地停止集群。另外，请注意，如果在关机时集群正在运行，那么在启动机器时集群会自动启动。因此，在关闭之前停止群集不会在重新启动时自动启动。</p><p id="6dcb" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">MicroK8s可以用一个命令停止，只需要几秒钟就可以完成。</p><pre class="kp kq kr ks gt md me mf bn mg mh bi"><span id="11b9" class="mi lb it me b be mj mk l ml mm">microk8s stop</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/39d91820b7594c1cfdc85eb3f4bb2755.png" data-original-src="https://miro.medium.com/v2/resize:fit:896/format:webp/1*JsFCErofRwfh9CbRxWAzHw.png"/></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">microk8s停止</figcaption></figure><h1 id="f126" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">清除</h1><p id="e89a" class="pw-post-body-paragraph jq jr it js b jt ly jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj mc kl km kn im bi translated">如果您对MicroK8s不满意，或者只是为了做一些实验才安装它，那么用一个简单的命令就可以把它从您的机器上删除。</p><pre class="kp kq kr ks gt md me mf bn mg mh bi"><span id="f3ea" class="mi lb it me b be mj mk l ml mm">sudo snap remove microk8s</span></pre><h2 id="a579" class="my lb it bd lc mz na dn lg nb nc dp lk kb nd ne lo kf nf ng ls kj nh ni lw nj bi translated">你想联系吗？</h2><p id="6350" class="pw-post-body-paragraph jq jr it js b jt ly jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj mc kl km kn im bi translated">如果你想联系我，请在LinkedIn上联系我。</p><p id="c598" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">另外，可以随意查看<a class="ae nl" href="https://medium.com/@mr-pascal/my-book-recommendations-4b9f73bf961b" rel="noopener">我的书籍推荐</a>📚。</p></div><div class="ab cl nm nn hx no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="im in io ip iq"><div class="kp kq kr ks gt nt"><a href="https://mr-pascal.medium.com/my-book-recommendations-4b9f73bf961b" rel="noopener follow" target="_blank"><div class="nu ab fo"><div class="nv ab nw cl cj nx"><h2 class="bd iu gy z fp ny fr fs nz fu fw is bi translated">我的书籍推荐</h2><div class="oa l"><h3 class="bd b gy z fp ny fr fs nz fu fw dk translated">在接下来的章节中，你可以找到我对所有日常生活话题的书籍推荐，它们对我帮助很大。</h3></div><div class="ob l"><p class="bd b dl z fp ny fr fs nz fu fw dk translated">mr-pascal.medium.com</p></div></div><div class="oc l"><div class="od l oe of og oc oh ky nt"/></div></div></a></div><div class="oi oj gp gr ok nt"><a href="https://mr-pascal.medium.com/membership" rel="noopener follow" target="_blank"><div class="nu ab fo"><div class="nv ab nw cl cj nx"><h2 class="bd iu gy z fp ny fr fs nz fu fw is bi translated">通过我的推荐链接加入Medium—Pascal Zwikirsch</h2><div class="oa l"><h3 class="bd b gy z fp ny fr fs nz fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="ob l"><p class="bd b dl z fp ny fr fs nz fu fw dk translated">mr-pascal.medium.com</p></div></div><div class="oc l"><div class="ol l oe of og oc oh ky nt"/></div></div></a></div></div></div>    
</body>
</html>