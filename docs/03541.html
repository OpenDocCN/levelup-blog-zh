<html>
<head>
<title>The Easiest Way to Host a Multi-page Dashboard using Python, Dash, and Linux for Beginners</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">对于初学者来说，使用Python、Dash和Linux托管多页仪表板的最简单方法</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/the-easiest-way-to-host-a-multi-page-dashboard-using-python-dash-and-linux-for-beginners-78a78e821ba?source=collection_archive---------0-----------------------#2020-05-15">https://levelup.gitconnected.com/the-easiest-way-to-host-a-multi-page-dashboard-using-python-dash-and-linux-for-beginners-78a78e821ba?source=collection_archive---------0-----------------------#2020-05-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="4c94" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用uWSGI和Nginx在CentOS上托管Dash应用程序</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/db349d060c149307a8a73f4b87e9f307.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DF_nLk50RVIXWEdYf0u0TQ.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://www.piqsels.com/en/public-domain-photo-jfwvh" rel="noopener ugc nofollow" target="_blank">https://www.piqsels.com/en/public-domain-photo-jfwvh</a></figcaption></figure><h1 id="79b9" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">为什么要托管仪表板？</h1><p id="9577" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我最喜欢数据分析的一个方面是分享我从数据中发现的见解。如果你懂一点Python，使用Dash创建一个仪表板来分享见解是很容易的，但是托管一个应用程序可能会有点棘手。我发誓，我第一次使用Linux服务器时，我花在解决错误上的时间可能比编写应用程序的时间还多！如果你试图进入数据行业，了解如何托管应用程序和仪表板可以让你轻松地与潜在雇主或客户分享项目组合。</p><p id="1ab1" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我将介绍在Linux服务器上托管Dash应用程序的最简单方法！<a class="ae ky" href="https://dash.plot.ly/" rel="noopener ugc nofollow" target="_blank"> Dash是一个基于Flask、Plotly.js和React.js编写的Python </a>开源框架。有多种方法可以托管Dash应用程序，我将介绍一种使用CentOS 7操作系统、Nginx(发音为engine x)和uWSGI向外部用户提供仪表板的方法。</p><h1 id="b293" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">哪里可以找到CentOS 7</h1><p id="5356" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated"><a class="ae ky" href="https://www.centos.org/" rel="noopener ugc nofollow" target="_blank"> CentOS是红帽企业版Linux的一个版本，可以免费下载</a>！如果你从未尝试过Linux，我推荐你使用甲骨文的免费VirtualBox软件在你自己的电脑上建立一个虚拟机。此外，云服务提供有竞争力的价格，如果你想探索这条路线，通常会提供积分来试用他们的服务。</p><h1 id="621b" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">仪表板应用程序</h1><p id="cec4" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">由于本文的重点是托管，所以我不会覆盖所有在Wine dashboard中使用的代码。如果您想使用自己的仪表板，我的步骤将适用于任何仪表板！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mt"><img src="../Images/600ab714d76c0790212fbf7c51b1fb23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Th5tBcyIFPCRO4iF68Bxpg.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">葡萄酒仪表板</figcaption></figure><p id="a477" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我的GitHub 上提供了<a class="ae ky" href="https://github.com/bendgame/DashApp" rel="noopener ugc nofollow" target="_blank">葡萄酒仪表盘，创建多页<em class="ms">葡萄酒仪表盘</em>的分步说明可以在我的<strong class="lt iu"> <em class="ms">仪表盘</em> </strong>介绍文章中找到。</a></p><div class="mu mv gp gr mw mx"><a href="https://medium.com/swlh/dashboards-in-python-for-beginners-and-everyone-else-using-dash-f0a045a86644" rel="noopener follow" target="_blank"><div class="my ab fo"><div class="mz ab na cl cj nb"><h2 class="bd iu gy z fp nc fr fs nd fu fw is bi translated">Python中的仪表盘，适用于初学者和使用Dash的其他人</h2><div class="ne l"><h3 class="bd b gy z fp nc fr fs nd fu fw dk translated">使用Python中的Dash初学者教程构建一个基本的和高级的仪表板</h3></div><div class="nf l"><p class="bd b dl z fp nc fr fs nd fu fw dk translated">medium.com</p></div></div><div class="ng l"><div class="nh l ni nj nk ng nl ks mx"/></div></div></a></div><h1 id="050e" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">文件结构</h1><p id="baff" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">Dash应用程序由多个页面构成，可以轻松添加功能，而不会影响其他布局或增加单个文件。我推荐以下文件结构:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/347b912c1f578337cc544c27cd80944f.png" data-original-src="https://miro.medium.com/v2/resize:fit:398/format:webp/1*DDzZA4Ie5XUUdnIXc58CdA.png"/></div></figure><h2 id="c89c" class="nn la it bd lb no np dn lf nq nr dp lj ma ns nt ll me nu nv ln mi nw nx lp ny bi translated">顶层文件夹</h2><p id="39a3" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">包含dash应用程序python文件以及资产、布局和数据库文件夹的文件夹。</p><h2 id="2a4d" class="nn la it bd lb no np dn lf nq nr dp lj ma ns nt ll me nu nv ln mi nw nx lp ny bi translated">索引. py</h2><p id="7980" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">这个文件包含dash应用程序运行的代码，并且包含所有的回调逻辑。回调使仪表板具有交互性。</p><h2 id="3159" class="nn la it bd lb no np dn lf nq nr dp lj ma ns nt ll me nu nv ln mi nw nx lp ny bi translated">资产文件夹</h2><p id="46d1" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">如果您想要包含像徽标这样的静态图像，Dash要求您将它们放在文件结构的Assets文件夹中！</p><h2 id="4aea" class="nn la it bd lb no np dn lf nq nr dp lj ma ns nt ll me nu nv ln mi nw nx lp ny bi translated">布局文件夹</h2><p id="a2b0" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">Dash应用程序的布局文件文件夹。Dash中的仪表板由一个称为布局的组件树组成。这是一个多页应用程序，因为有多个布局文件。</p><h2 id="37c0" class="nn la it bd lb no np dn lf nq nr dp lj ma ns nt ll me nu nv ln mi nw nx lp ny bi translated">数据库文件夹</h2><p id="b93e" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">包含sqlite数据库文件和用于任何预处理或数据转换的文件的文件夹。葡萄酒仪表盘中使用的数据可以在Kaggle上找到。为了方便起见，我已经将它清理干净并保存到一个sqlite文件中。</p></div><div class="ab cl nz oa hx ob" role="separator"><span class="oc bw bk od oe of"/><span class="oc bw bk od oe of"/><span class="oc bw bk od oe"/></div><div class="im in io ip iq"><h1 id="5b2e" class="kz la it bd lb lc og le lf lg oh li lj jz oi ka ll kc oj kd ln kf ok kg lp lq bi translated">托管应用程序</h1><p id="e5fb" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在Linux上托管dashboard很容易，因为Dash是基于Python的web框架<a class="ae ky" href="https://flask.palletsprojects.com/en/1.1.x/" rel="noopener ugc nofollow" target="_blank"> Flask </a>构建的。虽然我不知道所有的Linux技巧和诀窍，但我已经使用它托管了几个网页、数据库和数据科学管道。<a class="ae ky" href="http://robotsdodream.com/" rel="noopener ugc nofollow" target="_blank">比如，看看我用Ubuntu托管的葡萄酒推荐引擎</a>！</p><h2 id="bad2" class="nn la it bd lb no np dn lf nq nr dp lj ma ns nt ll me nu nv ln mi nw nx lp ny bi translated">uWSGI和Nginx是什么？</h2><p id="a225" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">向外部用户提供仪表板需要某种web服务器后端。<strong class="lt iu"> Nginx </strong>是一个快如闪电的开源web服务器，易于使用，非常适合这个用例。除了Nginx，我还使用<strong class="lt iu"> uWSGI </strong>来设置仪表板，使其在CentOS操作系统启动时作为一项服务在后台运行。您需要了解三个不同的WSGI术语:</p><p id="aa9c" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu"> uWSGI </strong>:用于开发和部署web应用和服务的应用服务器容器。利用这一点，我们可以将应用程序作为服务运行，而无需手动启动。</p><p id="f419" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu"> WSGI </strong>:一个<a class="ae ky" href="https://www.python.org/dev/peps/pep-0333/" rel="noopener ugc nofollow" target="_blank"> Python规范</a>，定义了一个应用程序或框架与应用程序/web服务器之间通信的标准接口。</p><p id="2214" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu">wsgi</strong>:uw SGI服务器实现的快速二进制协议，用于与web服务器通信。这将用于处理查看应用程序的web请求。</p><h1 id="8f8f" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">安装CentOS软件包</h1><p id="569f" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">从头开始安装CentOS，必须安装所有的东西，包括Python、Pip和其他必要的库以及操作系统的更新。下面是安装所有东西的控制台命令。出现所有提示时，按“y ”:</p><pre class="kj kk kl km gt ol om on oo aw op bi"><span id="0fa1" class="nn la it om b gy oq or l os ot">yum install epel-release<br/>yum install centos-release-scl<br/>yum install python-pip python-devel gcc nginx<br/>yum install rh-python36<br/>yum groupinstall 'Development Tools'<br/>yum install nano</span></pre><h2 id="5078" class="nn la it bd lb no np dn lf nq nr dp lj ma ns nt ll me nu nv ln mi nw nx lp ny bi translated">epel-释放</h2><p id="70d8" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">为CentOS安装包含我们需要完成未来安装的软件包。</p><h2 id="0b6f" class="nn la it bd lb no np dn lf nq nr dp lj ma ns nt ll me nu nv ln mi nw nx lp ny bi translated">Centos-release-scl</h2><p id="ae1d" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">python以上版本需要安装</p><h2 id="9e69" class="nn la it bd lb no np dn lf nq nr dp lj ma ns nt ll me nu nv ln mi nw nx lp ny bi translated">python-pip python-devel gcc nginx RH-python 36</h2><p id="75b8" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">安装python 3.6、pip、Git、Nginx和其他python相关的包，以便将来安装。</p><h2 id="106e" class="nn la it bd lb no np dn lf nq nr dp lj ma ns nt ll me nu nv ln mi nw nx lp ny bi translated">Groupinstall '开发工具'</h2><p id="abe9" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated"><a class="ae ky" href="https://support.eapps.com/index.php?/Knowledgebase/Article/View/438/55/user-guide---installing-the-centos-development-tools-gcc-flex-etc" rel="noopener ugc nofollow" target="_blank">安装centOS开发工具。</a></p><h2 id="8940" class="nn la it bd lb no np dn lf nq nr dp lj ma ns nt ll me nu nv ln mi nw nx lp ny bi translated">毫微；纤（10的负九次方）</h2><p id="f305" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">为文本编辑器Nano安装。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/5218c54f1c0902ce7451232ebb2d5a64.png" data-original-src="https://miro.medium.com/v2/resize:fit:490/format:webp/1*p6LbD7pppbY-MPVi_8c9_Q.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">【https://www.centos.org/ T2】号</figcaption></figure><h1 id="a0ac" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">安装Python包</h1><p id="759e" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">CentOS会默认用Python 2.x，我想用Python 3.6。因为我知道所有的代码都在那个版本中工作，我对它很满意。使用此命令在CentOS命令行中激活Python 3.6:</p><pre class="kj kk kl km gt ol om on oo aw op bi"><span id="7dac" class="nn la it om b gy oq or l os ot">scl enable rh-python36 bash</span></pre><p id="503f" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">使用<strong class="lt iu">pip 3T7<em class="ms">代替标准<em class="ms"> pip </em>安装以下软件包:</em></strong></p><pre class="kj kk kl km gt ol om on oo aw op bi"><span id="b0ca" class="nn la it om b gy oq or l os ot">#upgrade pip<br/>pip3 install --upgrade pip</span><span id="6ef5" class="nn la it om b gy ov or l os ot">#install python libraries<br/>pip3 install dash pandas dash-bootstrap-components uwsgi</span></pre><p id="5aa7" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">注意，我安装了python包uwsgi。<a class="ae ky" href="https://uwsgi-docs.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank">是用于全栈托管服务的Python WSGI库</a>。我还安装了加载Dash应用程序所需的其他Python库。</p><blockquote class="ow"><p id="f9cc" class="ox oy it bd oz pa pb pc pd pe pf mm dk translated">恭喜你！软件包已经安装好了！</p></blockquote><figure class="ph pi pj pk pl kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pg"><img src="../Images/aa6fa7477dd3696da57b75a716ffeddd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Jl9F84Oe8_9okjZbD48R6w.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://pxhere.com/en/photo/1550883" rel="noopener ugc nofollow" target="_blank">烟花</a></figcaption></figure><h1 id="fa62" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">将代码加载到服务器上</h1><p id="7d41" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">现在所有的包都已经安装好了，创建一个新的目录并将dash文件移动到其中。<a class="ae ky" href="https://towardsdatascience.com/a-simple-git-workflow-for-github-beginners-and-everyone-else-87e39b50ee08" rel="noopener" target="_blank">我建议将您的代码发布到GitHub之类的Git存储库中，并将该存储库克隆到Linux服务器中</a>。否则启动文本编辑器<strong class="lt iu"> <em class="ms"> nano </em> </strong>并手动创建文件。</p><p id="bf06" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu">提示</strong> : <em class="ms">点击tab将自动完成控制台中的字符串。</em></p><p id="120a" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">使用<strong class="lt iu">mkdir&lt;dir name&gt;创建一个新目录。<br/>  </strong>使用<strong class="lt iu"> <em class="ms"> cd进入新目录&lt;dir name&gt;/&lt;dir name&gt;/etc…<br/></em></strong><em class="ms">您可以使用</em> <strong class="lt iu"> <em class="ms"> cd返回1个目录..</em> </strong></p><p id="17a4" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">下面将创建一个新目录，加载代码，然后移动到该目录:</p><pre class="kj kk kl km gt ol om on oo aw op bi"><span id="1431" class="nn la it om b gy oq or l os ot">mkdir winedash<br/>cd winedash<br/>git clone <a class="ae ky" href="https://github.com/bendgame/DashApp.git" rel="noopener ugc nofollow" target="_blank">https://github.com/bendgame/DashApp.git</a><br/>cd DashApp/wineDash</span></pre><p id="35d5" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">控制台应该显示您位于正确的目录中:</p><pre class="kj kk kl km gt ol om on oo aw op bi"><span id="347b" class="nn la it om b gy oq or l os ot"><strong class="om iu">[root@Medium DashApp]#</strong></span></pre><p id="c960" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">如果一切安装正确，尝试运行index.py文件。</p><pre class="kj kk kl km gt ol om on oo aw op bi"><span id="5eeb" class="nn la it om b gy oq or l os ot"># python index.py</span></pre><p id="5f17" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">如果它出错，库可能会被遗漏。如果成功，命令行中应该是这样的:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pm"><img src="../Images/f6892ad0a07df2a1401aff4c3cb16574.png" data-original-src="https://miro.medium.com/v2/resize:fit:1036/format:webp/0*4LegJD-jvIiPDw9s.png"/></div></figure><p id="9a1a" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">请注意警告，该应用程序正在一个<strong class="lt iu"> <em class="ms">开发服务器上运行。</em> </strong>它说使用一个生产WSGI服务器来代替。这正是我们正在设置的！</p></div><div class="ab cl nz oa hx ob" role="separator"><span class="oc bw bk od oe of"/><span class="oc bw bk od oe of"/><span class="oc bw bk od oe"/></div><div class="im in io ip iq"><h1 id="5731" class="kz la it bd lb lc og le lf lg oh li lj jz oi ka ll kc oj kd ln kf ok kg lp lq bi translated">创建wsgi.py</h1><p id="7bd6" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">服务器需要与应用程序交互的指令。这就是wsgi.py文件的作用！在与索引相同的目录下创建wsgi.py文件，<strong class="lt iu"> DashApp/wineDash。</strong>激活纳米编辑器:</p><pre class="kj kk kl km gt ol om on oo aw op bi"><span id="524f" class="nn la it om b gy oq or l os ot">nano wsgi.py</span></pre><p id="dd7b" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">将这段代码粘贴到文件中。为了正常工作，它必须使用<strong class="lt iu"> application.run() </strong>:</p><pre class="kj kk kl km gt ol om on oo aw op bi"><span id="7592" class="nn la it om b gy oq or l os ot">from index import server as application<br/>if __name__ == '__main__':<br/>    application.run()</span></pre><p id="824b" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">保存文件并使用此命令测试应用程序是否可以通过uwsgi协议提供服务:</p><pre class="kj kk kl km gt ol om on oo aw op bi"><span id="75e5" class="nn la it om b gy oq or l os ot">uwsgi --socket 0.0.0.0:8050 --protocol=http -w wsgi</span></pre><p id="7143" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">如果您使用的是虚拟服务器，请在端口为8050的浏览器中输入IP地址，然后您就可以访问仪表板了。<strong class="lt iu">成功在控制台上看起来是这样的</strong>:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pn"><img src="../Images/ea791e0517bacff857470570d18075ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*jzMkhA3zdPQ29Vpu.png"/></div></div></figure><p id="d413" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">使用<strong class="lt iu"> <em class="ms"> ctrl + c </em> </strong>退出。只需要再配置几个文件和设置！</p></div><div class="ab cl nz oa hx ob" role="separator"><span class="oc bw bk od oe of"/><span class="oc bw bk od oe of"/><span class="oc bw bk od oe"/></div><div class="im in io ip iq"><h1 id="dfc8" class="kz la it bd lb lc og le lf lg oh li lj jz oi ka ll kc oj kd ln kf ok kg lp lq bi translated">创建index.ini</h1><p id="fa88" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">这是uWSGI配置文件，描述了如何从web传递请求。Nginx可以原生使用uwsgi协议，而且比使用HTTP更快更安全。</p><p id="2c34" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">使用nano编辑器在<strong class="lt iu"> DashApp/wineDash </strong>目录中创建文件:</p><pre class="kj kk kl km gt ol om on oo aw op bi"><span id="3fcb" class="nn la it om b gy oq or l os ot">nano index.ini</span></pre><p id="be5d" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">将此粘贴到文件中:</p><pre class="kj kk kl km gt ol om on oo aw op bi"><span id="c1b9" class="nn la it om b gy oq or l os ot">[uwsgi]<br/>module = wsgi<br/>master = true<br/>processes = 4<br/>socket = index.sock<br/>chmod-socket = 660<br/>vacuum = true<br/>die-on-term = true</span></pre><p id="98de" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><code class="fe po pp pq om b"><strong class="lt iu">[uwsgi]</strong></code>头告诉uWSGI应用文件中的设置。<br/>参照<code class="fe po pp pq om b">wsgi.py</code>文件指定<strong class="lt iu">模块</strong>。<br/>这是带有4个工作进程的<strong class="lt iu">主进程</strong>来处理请求。<br/><strong class="lt iu">真空=真</strong>选项有助于在过程停止时清理插座。<br/><strong class="lt iu">die-on-term = true</strong>选项确保系统的组件相互之间配合良好。</p><h1 id="4f1f" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">创建Index.service系统单元文件</h1><p id="75fa" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">当服务器启动时，CentOS的init系统需要此文件来自动启动uWSGI并运行仪表板。例如，windows等同于运行msconfig并查看服务。</p><p id="5779" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">使用以下路径打开一个名为<strong class="lt iu"> index.service </strong>的新文件。</p><pre class="kj kk kl km gt ol om on oo aw op bi"><span id="ec39" class="nn la it om b gy oq or l os ot">nano /etc/systemd/system/index.service</span></pre><p id="25cc" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">粘贴以下描述服务运行方式的代码。该文件指向目录和虚拟环境(如果正在使用的话)。</p><pre class="kj kk kl km gt ol om on oo aw op bi"><span id="397a" class="nn la it om b gy oq or l os ot">[Unit]<br/>Description=uWSGI instance to serve index<br/>After=network.target</span><span id="2810" class="nn la it om b gy ov or l os ot">[Service]<br/>User=root<br/>Group=nginx<br/>WorkingDirectory=/root/DashApp/wineDash<br/>ExecStart=/opt/rh/rh-python36/root/usr/bin/uwsgi --force-cwd /root/DashApp/wineDash --ini index.ini</span><span id="34b8" class="nn la it om b gy ov or l os ot">[Install]<br/>WantedBy = multi-user.target</span></pre><p id="32c1" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu">单元</strong>部分描述了元数据和依赖性。<br/><strong class="lt iu">服务</strong>部分描述了流程运行的用户和组。Nginx集团拥有它，因此它可以与uWSGI通信。<br/><strong class="lt iu">安装</strong>部分告诉Systemd在多用户系统启动时引导文件。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pr"><img src="../Images/1fa5b8636600a3ac2e5b96abf6542658.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*DoOSJIjz7Yh24rkl.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">index.service文件</figcaption></figure><p id="22df" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">记住，这个文件告诉服务在nginx组下作为根用户运行。它指向使用python 3.6运行应用程序的目录。</p></div><div class="ab cl nz oa hx ob" role="separator"><span class="oc bw bk od oe of"/><span class="oc bw bk od oe of"/><span class="oc bw bk od oe"/></div><div class="im in io ip iq"><h1 id="0596" class="kz la it bd lb lc og le lf lg oh li lj jz oi ka ll kc oj kd ln kf ok kg lp lq bi translated">配置Nginx</h1><p id="9326" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">既然服务已经配置好，并且将在CentOS启动时运行，那么必须设置<strong class="lt iu">Nginx</strong><strong class="lt iu"/>通过<strong class="lt iu"> uwsgi </strong>协议将来自web的请求传递给套接字。</p><p id="b755" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在nano中打开nginx.conf:</p><pre class="kj kk kl km gt ol om on oo aw op bi"><span id="f3d2" class="nn la it om b gy oq or l os ot">nano /etc/nginx/nginx.conf</span></pre><p id="6e26" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">请注意，文件中已经有一个服务器{}块。在原始服务器块上创建一个新的服务器块。使用虚拟机的IP，其中显示<strong class="lt iu"> <em class="ms"> &lt;输入IP &gt; </em> </strong>:</p><pre class="kj kk kl km gt ol om on oo aw op bi"><span id="0743" class="nn la it om b gy oq or l os ot">server {<br/>    listen 80;<br/>    server_name &lt;Enter IP&gt;;<br/>location / {<br/>        include uwsgi_params;<br/>        uwsgi_pass unix:/root/DashApp/wineDash/index.sock;<br/>    }<br/>}</span></pre><p id="6169" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">它看起来会像这样。请注意，我们将新的服务器块放在原始服务器块之前:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ps"><img src="../Images/c2809929921161894a360db2cb4ac243.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*9WLqIgSmcZQ7yp-Z.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">原始服务器块上方的新服务器块</figcaption></figure><p id="90c9" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">现在Nginx已经配置好了，启动一切并确保它正常工作:</p><pre class="kj kk kl km gt ol om on oo aw op bi"><span id="3a83" class="nn la it om b gy oq or l os ot">#Start the service<br/>systemctl daemon-reload<br/>systemctl start index.service<br/>systemctl enable index<br/>systemctl start nginx<br/>systemctl enable nginx</span></pre><p id="d8ee" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">检查索引服务的状态应该会返回活动(正在运行)状态:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pt"><img src="../Images/0496aa2b99d1336ee2f57d1538f4a5a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1240/format:webp/0*L0X1o0cW3j1gQ9qb.png"/></div></figure><p id="d322" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">这是完整的设置。转到您的虚拟服务器的IP地址来加载仪表板！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pu"><img src="../Images/ea3f6c2882d6f577241b31b3de6528ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*18_ZxejhKoKEruKIFmCCbg.png"/></div></div></figure><h1 id="7508" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">最后的想法和完整的代码</h1><p id="0ea4" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">虽然在这个过程中有一些乏味的时刻，但是在Linux上运行Dash应用程序是非常简单的。使用<a class="ae ky" href="https://uwsgi-docs.readthedocs.io/en/latest/Nginx.html" rel="noopener ugc nofollow" target="_blank"> uWSGI和Nginx </a>，可以使用快速安全的协议向全世界广播仪表板！学习托管应用程序很重要，因为它能让你分享见解或作品组合！</p><p id="10a1" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">如果你喜欢这个教程，看看我的其他关于编程和数据科学的教程！谢谢大家！</p><ul class=""><li id="b814" class="pv pw it lt b lu mn lx mo ma px me py mi pz mm qa qb qc qd bi translated"><em class="ms">如果你喜欢这个，</em> <a class="ae ky" href="https://medium.com/@erickleppen" rel="noopener"> <em class="ms">在Medium上关注我</em> </a> <em class="ms">了解更多</em></li><li id="a6a4" class="pv pw it lt b lu qe lx qf ma qg me qh mi qi mm qa qb qc qd bi translated"><a class="ae ky" href="https://erickleppen.medium.com/membership" rel="noopener"> <em class="ms">通过订阅</em> </a>获得对我的内容的完全访问和帮助支持</li><li id="d92f" class="pv pw it lt b lu qe lx qf ma qg me qh mi qi mm qa qb qc qd bi translated"><em class="ms">我们连线上</em><a class="ae ky" href="https://www.linkedin.com/in/erickleppen01/" rel="noopener ugc nofollow" target="_blank"><em class="ms">LinkedIn</em></a></li><li id="7dfb" class="pv pw it lt b lu qe lx qf ma qg me qh mi qi mm qa qb qc qd bi translated"><em class="ms">用Python分析数据？查看我的</em> <a class="ae ky" href="https://pythondashboards.com/" rel="noopener ugc nofollow" target="_blank"> <em class="ms">网站</em> </a></li></ul><p id="cf89" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><a class="ae ky" href="http://pythondashboards.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu"> —埃里克·克莱本</strong> </a></p><div class="mu mv gp gr mw mx"><a href="https://towardsdatascience.com/analyzing-wine-descriptions-using-the-natural-language-toolkit-in-python-497ac1e228d5" rel="noopener follow" target="_blank"><div class="my ab fo"><div class="mz ab na cl cj nb"><h2 class="bd iu gy z fp nc fr fs nd fu fw is bi translated">使用Python中的自然语言工具包分析葡萄酒描述</h2><div class="ne l"><h3 class="bd b gy z fp nc fr fs nd fu fw dk translated">用什么词来形容酒？</h3></div><div class="nf l"><p class="bd b dl z fp nc fr fs nd fu fw dk translated">towardsdatascience.com</p></div></div><div class="ng l"><div class="qj l ni nj nk ng nl ks mx"/></div></div></a></div><div class="mu mv gp gr mw mx"><a href="https://medium.com/datadriveninvestor/python-pandas-library-for-beginners-a-simplified-guide-for-getting-started-and-ditching-20992b7cd4da" rel="noopener follow" target="_blank"><div class="my ab fo"><div class="mz ab na cl cj nb"><h2 class="bd iu gy z fp nc fr fs nd fu fw is bi translated">Python熊猫初学者库:入门和开沟简化指南…</h2><div class="ne l"><h3 class="bd b gy z fp nc fr fs nd fu fw dk translated">学习熊猫的基础知识，使用Python来探索数据。数据透视表、分组、排序、添加新列和…</h3></div><div class="nf l"><p class="bd b dl z fp nc fr fs nd fu fw dk translated">medium.com</p></div></div><div class="ng l"><div class="qk l ni nj nk ng nl ks mx"/></div></div></a></div></div></div>    
</body>
</html>