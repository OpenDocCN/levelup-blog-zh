<html>
<head>
<title>TrickyCases #6. Scrape Highcharts plots</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">第六个难题。刮高图表绘图</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/trickycases-6-scrape-highcharts-plots-a6b3fc233fe6?source=collection_archive---------2-----------------------#2022-01-06">https://levelup.gitconnected.com/trickycases-6-scrape-highcharts-plots-a6b3fc233fe6?source=collection_archive---------2-----------------------#2022-01-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="2d2e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> <em class="kl">免责声明:</em></strong><em class="kl">【tricky cases】是一系列代码片段相对较短的帖子，在日常的ML实践中很有用。在这里你可以找到一些你想在StackOverflow中搜索的东西。</em></p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/b57edc186c5818487ceb905575ff6d48.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*mV0jmarVZAa8QZgl"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated">马库斯·温克勒在<a class="ae lc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="0774" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">图表通常包含有价值的数据，如果你和我一样是数据迷，你会想把这些数据带回家。我最近的一个发现是，解析用HighCharts.js模块绘制的数据是多么容易。</p><blockquote class="ld le lf"><p id="f984" class="jn jo kl jp b jq jr js jt ju jv jw jx lg jz ka kb lh kd ke kf li kh ki kj kk ij bi translated">你可以在这里找到我关于<a class="ae lc" href="https://bit.ly/3omBlaG" rel="noopener ugc nofollow" target="_blank">网页抓取的代码</a>，格式简单。</p></blockquote><p id="8b3f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在我们跳到刮擦部分之前，请确保:</p><ul class=""><li id="5bc7" class="lj lk iq jp b jq jr ju jv jy ll kc lm kg ln kk lo lp lq lr bi translated">你要抓取的站点没有通过API提供相同的数据。使用可编程接口总是更容易。</li><li id="7763" class="lj lk iq jp b jq ls ju lt jy lu kc lv kg lw kk lo lp lq lr bi translated">法律并没有禁止你刮这个网站。</li><li id="bc04" class="lj lk iq jp b jq ls ju lt jy lu kc lv kg lw kk lo lp lq lr bi translated">你没有给网站带来高负荷。</li></ul></div><div class="ab cl lx ly hu lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="ij ik il im in"><h1 id="2ce0" class="me mf iq bd mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb bi translated">我们刮的那部分</h1><p id="7b7d" class="pw-post-body-paragraph jn jo iq jp b jq nc js jt ju nd jw jx jy ne ka kb kc nf ke kf kg ng ki kj kk ij bi translated">正如承诺的那样，刮擦部分会相对简单。出于练习的目的，让我们拿一个像<a class="ae lc" href="https://www.worldweatheronline.com/brussels-weather-averages/be.aspx" rel="noopener ugc nofollow" target="_blank">这样的页面。向下滚动到名为“最高、最低和平均温度”的图表，你会看到自2009年以来布鲁塞尔每个月的平均温度(摄氏度)。现在打开浏览器控制台，运行以下脚本:</a></p><p id="470e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kl"> Highcharts.charts[0]。系列[0]。数据</em></p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi nh"><img src="../Images/f0cd1c019cf0520c4494645e60b4a2b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pkw6_3eR4QNKCJXF6TMqDw.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated">数据点</figcaption></figure><p id="cb92" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">经过一些检查后，您会发现现在您可以访问该图中的所有原始数据。此外，借助一些javascript知识，您甚至能够干净地打印数据。刮痧的诀窍是通过硒和熊猫的使用来自动化这个过程。</p><p id="6246" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下面我将与你分享这样一个脚本的简化版本，这样你就能抓住要点:</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="1d24" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这段代码中:</p><ol class=""><li id="699b" class="lj lk iq jp b jq jr ju jv jy ll kc lm kg ln kk nk lp lq lr bi translated">您将调用目标站点</li><li id="ea70" class="lj lk iq jp b jq ls ju lt jy lu kc lv kg lw kk nk lp lq lr bi translated">等待高图表出现</li><li id="2274" class="lj lk iq jp b jq ls ju lt jy lu kc lv kg lw kk nk lp lq lr bi translated">用链接的JS函数解析数据</li><li id="7ffe" class="lj lk iq jp b jq ls ju lt jy lu kc lv kg lw kk nk lp lq lr bi translated">将其存储到dataframe并保存到本地文件夹</li></ol><p id="6528" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">请注意，代码假设您已经安装、运行并提供了chromedriver。这里有一些很好的教程，教你如何在各种操作系统上做到这一点:</p><ul class=""><li id="1028" class="lj lk iq jp b jq jr ju jv jy ll kc lm kg ln kk lo lp lq lr bi translated"><a class="ae lc" href="https://tecadmin.net/setup-selenium-chromedriver-on-ubuntu/" rel="noopener ugc nofollow" target="_blank">在Ubuntu 20.04和18.04上</a></li><li id="b054" class="lj lk iq jp b jq ls ju lt jy lu kc lv kg lw kk lo lp lq lr bi translated"><a class="ae lc" href="https://www.edureka.co/community/52315/how-to-setup-chrome-driver-with-selenium-on-macos" rel="noopener ugc nofollow" target="_blank">在Macos上</a></li><li id="d6c9" class="lj lk iq jp b jq ls ju lt jy lu kc lv kg lw kk lo lp lq lr bi translated"><a class="ae lc" href="https://www.gregbrisebois.com/posts/chromedriver-in-wsl2/" rel="noopener ugc nofollow" target="_blank">在WSL上</a></li><li id="7729" class="lj lk iq jp b jq ls ju lt jy lu kc lv kg lw kk lo lp lq lr bi translated">*在Windows上安装非常简单，只需从<a class="ae lc" href="https://chromedriver.chromium.org/downloads" rel="noopener ugc nofollow" target="_blank">这里</a>下载一个正确的zip文件，然后通过安装即可。exe文件</li></ul><p id="3a4a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">像往常一样，我欢迎任何问题和评论。如果您在路上遇到任何麻烦，以及您如何在自动化任务中使用该脚本，请告诉我！</p></div></div>    
</body>
</html>