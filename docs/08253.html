<html>
<head>
<title>Using React Hook Form with Material-UI Components</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将React挂钩形式与材质UI组件一起使用</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/using-react-hook-form-with-material-ui-components-ba42ace9507a?source=collection_archive---------1-----------------------#2021-04-15">https://levelup.gitconnected.com/using-react-hook-form-with-material-ui-components-ba42ace9507a?source=collection_archive---------1-----------------------#2021-04-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="7533" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用Material-UI时处理表单数据的更好方法</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/ee1852acf1b460362b318e42d12f94da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*g6VEKU32hA1hLMbO"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">Jan Canty 在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="f262" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上一篇文章中，我向您展示了如何使用React和Material-UI创建一个基本的注册页面。在那篇文章中，我们使用了受控组件和<code class="fe lv lw lx ly b">useState</code>钩子来跟踪表单输入值。你可以看看下面这篇文章。</p><div class="lz ma gp gr mb mc"><a rel="noopener  ugc nofollow" target="_blank" href="/create-a-signup-page-with-react-and-material-ui-9b203d18cf3f"><div class="md ab fo"><div class="me ab mf cl cj mg"><h2 class="bd iu gy z fp mh fr fs mi fu fw is bi translated">用React和Material-UI创建一个注册页面</h2><div class="mj l"><h3 class="bd b gy z fp mh fr fs mi fu fw dk translated">了解如何为您的下一个网站创建一个对话框和表单</h3></div><div class="mk l"><p class="bd b dl z fp mh fr fs mi fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="ml l"><div class="mm l mn mo mp ml mq ks mc"/></div></div></a></div><p id="0ac1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在另一篇文章中，我们看了一个名为React Hook Form的库。我们学习了一种简单的方法来使用库处理基本形式的输入数据。</p><div class="lz ma gp gr mb mc"><a href="https://medium.com/dev-genius/the-easiest-way-to-deal-with-forms-in-react-ad6bc1250829" rel="noopener follow" target="_blank"><div class="md ab fo"><div class="me ab mf cl cj mg"><h2 class="bd iu gy z fp mh fr fs mi fu fw is bi translated">React中处理表单的最简单方法</h2><div class="mj l"><h3 class="bd b gy z fp mh fr fs mi fu fw dk translated">使用React钩子形式来提高应用程序的性能</h3></div><div class="mk l"><p class="bd b dl z fp mh fr fs mi fu fw dk translated">medium.com</p></div></div><div class="ml l"><div class="mr l mn mo mp ml mq ks mc"/></div></div></a></div><p id="1e60" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我们将结合我们对这两者的了解。我们将使用React Hook Form来处理使用Material-UI组件的表单的数据。这与我们使用普通的HTML <code class="fe lv lw lx ly b">&lt;input&gt;</code>标签有一点不同。</p><p id="9b56" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这篇文章来得正是时候，因为React Hook Form第7版刚刚发布。点击查看他们的网站<a class="ae ky" href="https://react-hook-form.com/" rel="noopener ugc nofollow" target="_blank">。</a></p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="dd69" class="mz na it bd nb nc nd ne nf ng nh ni nj jz nk ka nl kc nm kd nn kf no kg np nq bi translated">快速回顾</h1><p id="5b88" class="pw-post-body-paragraph kz la it lb b lc nr ju le lf ns jx lh li nt lk ll lm nu lo lp lq nv ls lt lu im bi translated">如果你错过了上一篇文章，让我们快速回顾一下。我们使用Material-UI创建了一个基本的注册页面，如下所示。该表单使用了Material-UI中的<code class="fe lv lw lx ly b">TextField</code>和<code class="fe lv lw lx ly b">Button</code>组件。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/e8b9a59a9986fd3a0845ec20cc5b723c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A1GTYmrAn2CZTJIoZMoe1A.png"/></div></div></figure><p id="020f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">目前，我们用React的<code class="fe lv lw lx ly b">useState</code>钩子将表单输入数据作为受控输入来处理。以下是名输入字段的示例。</p><p id="509d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe lv lw lx ly b">TextField</code>组件中，我们将该值设置为<code class="fe lv lw lx ly b">firstName</code>值，并使用<code class="fe lv lw lx ly b">onChange</code>属性更新该值。</p><pre class="kj kk kl km gt nx ly ny nz aw oa bi"><span id="912f" class="ob na it ly b gy oc od l oe of">const [firstName, setFirstName] = useState('');</span><span id="f161" class="ob na it ly b gy og od l oe of">&lt;TextField<br/>  label="First Name"<br/>  variant="filled"<br/>  required<br/>  value={firstName}<br/>  onChange={<em class="oh">e</em> =&gt; setFirstName(e.target.value)}<br/>/&gt;</span></pre><h1 id="8f38" class="mz na it bd nb nc oi ne nf ng oj ni nj jz ok ka nl kc ol kd nn kf om kg np nq bi translated">使用React挂钩形式</h1><p id="1208" class="pw-post-body-paragraph kz la it lb b lc nr ju le lf ns jx lh li nt lk ll lm nu lo lp lq nv ls lt lu im bi translated">相反，我们可以使用控制器包装组件来集成React Hook表单和Material-UI组件。</p><p id="ec40" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">React Hook表单被描述为<em class="oh">“具有易用验证的高性能、灵活和可扩展的表单。”</em></p><p id="5eec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们首先在我们的项目中安装这个库。</p><pre class="kj kk kl km gt nx ly ny nz aw oa bi"><span id="f9c2" class="ob na it ly b gy oc od l oe of">npm install react-hook-form</span></pre><p id="2921" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们需要从库中导入<code class="fe lv lw lx ly b">useForm</code>钩子和<code class="fe lv lw lx ly b">Controller</code>组件。</p><pre class="kj kk kl km gt nx ly ny nz aw oa bi"><span id="c510" class="ob na it ly b gy oc od l oe of">import { useForm, Controller } from "react-hook-form";</span></pre><p id="7547" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">从<code class="fe lv lw lx ly b">useForm</code>钩子中，我们需要得到<code class="fe lv lw lx ly b">handleSubmit</code>和<code class="fe lv lw lx ly b">control</code>对象。</p><pre class="kj kk kl km gt nx ly ny nz aw oa bi"><span id="dca5" class="ob na it ly b gy oc od l oe of">const { handleSubmit, control } = useForm();</span></pre><h1 id="7778" class="mz na it bd nb nc oi ne nf ng oj ni nj jz ok ka nl kc ol kd nn kf om kg np nq bi translated">控制器组件</h1><p id="1962" class="pw-post-body-paragraph kz la it lb b lc nr ju le lf ns jx lh li nt lk ll lm nu lo lp lq nv ls lt lu im bi translated"><a class="ae ky" href="https://react-hook-form.com/api/usecontroller/controller" rel="noopener ugc nofollow" target="_blank">控制器</a>组件是一个包装器组件，它使得React Hook Form与Material-UI一起使用变得容易。例如，让我们构建名字输入字段。</p><p id="75e6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">控制器组件接受名称、控件、默认值、规则和呈现属性。</p><pre class="kj kk kl km gt nx ly ny nz aw oa bi"><span id="5e64" class="ob na it ly b gy oc od l oe of">&lt;Controller<br/>  name="First Name"<br/>  control={control}<br/>  defaultValue=""<br/>  rules={{ required: 'First name required' }}</span><span id="1a16" class="ob na it ly b gy og od l oe of">  <em class="oh">// render to be explained in next section </em><br/>/&gt;</span></pre><p id="e08e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">名称—这将是输入的名称，并在提交表单时使用。</p><p id="9c08" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">control——我们将传递从<code class="fe lv lw lx ly b">useForm</code>钩子获得的控制对象。这将注册该输入，以便与React钩子表单一起使用。</p><p id="249f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">defaultValue —用作表单输入的默认值。</p><p id="9882" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">rules —我们可以在其中为输入指定验证规则的对象。您可以在这里看到您可以应用的规则列表<a class="ae ky" href="https://react-hook-form.com/api/useform/register" rel="noopener ugc nofollow" target="_blank">。例如，我们可以要求一个输入，并使用<code class="fe lv lw lx ly b">rules={{ required: 'First name required ' }}</code>设置一个错误消息。</a></p><h1 id="3cd2" class="mz na it bd nb nc oi ne nf ng oj ni nj jz ok ka nl kc ol kd nn kf om kg np nq bi translated">渲染道具</h1><p id="9f9a" class="pw-post-body-paragraph kz la it lb b lc nr ju le lf ns jx lh li nt lk ll lm nu lo lp lq nv ls lt lu im bi translated">我们将添加的最后一个道具是渲染道具。这是一个接受返回React元素的函数的属性。</p><p id="78ae" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在渲染道具中，我们将从<code class="fe lv lw lx ly b">field</code>对象中获取<code class="fe lv lw lx ly b">onChange</code>和<code class="fe lv lw lx ly b">value</code>属性。然后我们将添加Material-UI中的<code class="fe lv lw lx ly b">TextField</code>组件作为返回值。</p><p id="e1f0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe lv lw lx ly b">TextField</code>组件中，我们可以像往常一样添加常用的道具。在我们的例子中会添加<code class="fe lv lw lx ly b">label="First Name"</code>和<code class="fe lv lw lx ly b">variant="filled"</code>。对于<code class="fe lv lw lx ly b">value</code>和<code class="fe lv lw lx ly b">onChange</code>属性，我们将传递从field属性获得的对象。</p><p id="42f5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">名字的输入看起来像这样。</p><pre class="kj kk kl km gt nx ly ny nz aw oa bi"><span id="6864" class="ob na it ly b gy oc od l oe of">&lt;Controller<br/>  name="firstName"<br/>  control={control}<br/>  defaultValue=""<br/>  rules={{ required: 'First name required' }}<br/>  render={({ field: { <em class="oh">onChange</em>, <em class="oh">value</em> } }) =&gt; (<br/>    &lt;TextField<br/>      label="First Name"<br/>      variant="filled"<br/>      value={value}<br/>      onChange={onChange}<br/>    /&gt;<br/>  )}<br/>/&gt;</span></pre><h1 id="6ded" class="mz na it bd nb nc oi ne nf ng oj ni nj jz ok ka nl kc ol kd nn kf om kg np nq bi translated">添加验证</h1><p id="097a" class="pw-post-body-paragraph kz la it lb b lc nr ju le lf ns jx lh li nt lk ll lm nu lo lp lq nv ls lt lu im bi translated">我们总是希望确保表单有客户端验证。</p><p id="a90a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在render函数中，我们还可以从<code class="fe lv lw lx ly b">fieldState</code>对象中获得一个<code class="fe lv lw lx ly b">error</code>道具。这个错误对象将特定于输入，并且将来自我们前面编写的规则属性。</p><p id="8920" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了让我们的表单看起来更好，我们可以集成来自<code class="fe lv lw lx ly b">TextField</code>组件的一些属性。</p><p id="796c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，我们将添加一个错误道具。这个属性必须是一个布尔值，所以我们可以使用<code class="fe lv lw lx ly b">error={!!error}</code>根据错误是否有值来返回true或false。</p><p id="e0fd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们将验证错误消息作为帮助文本添加到组件中，如so <code class="fe lv lw lx ly b">helperText={error ? error.message : null}</code>。</p><p id="3e8b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，如果我们尝试提交没有名字的表单，我们将看到下面的错误。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi on"><img src="../Images/32746ad12c51b25d88677b669747c2aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AHs2uNAZrhEbdKg_d1CkwA.png"/></div></div></figure><h1 id="9398" class="mz na it bd nb nc oi ne nf ng oj ni nj jz ok ka nl kc ol kd nn kf om kg np nq bi translated">完成表格</h1><p id="22dd" class="pw-post-body-paragraph kz la it lb b lc nr ju le lf ns jx lh li nt lk ll lm nu lo lp lq nv ls lt lu im bi translated">为了完成我们的表单，我们可以对姓氏、电子邮件和密码输入做同样的事情。在邮件输入中，我们还可以将<code class="fe lv lw lx ly b">type="email"</code>作为道具添加到<code class="fe lv lw lx ly b">TextField</code>组件中，以增加另一层验证。在密码输入中，我们可以添加<code class="fe lv lw lx ly b">type="password"</code>来隐藏字符。</p><p id="45b3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了处理submit事件，它与我们在上一篇文章中所做的一样。您需要做的就是创建一个<code class="fe lv lw lx ly b">onSubmit</code>函数，它从我们添加了控制值的输入中接收数据。然后，在表单中添加一个<code class="fe lv lw lx ly b">onSubmit</code>监听器，使用React Hook表单中的<code class="fe lv lw lx ly b">handleSubmit</code>函数，并将<code class="fe lv lw lx ly b">onSubmit</code>函数作为参数传递。</p><p id="c905" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我们的例子中，我们只是将表单数据记录到控制台。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oo"><img src="../Images/c9de90a2e1091d08e4387a4a4e531a67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1392/format:webp/1*TsUW0wQaO_zMhKInj9eQVA.png"/></div></figure></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="3ddd" class="mz na it bd nb nc nd ne nf ng nh ni nj jz nk ka nl kc nm kd nn kf no kg np nq bi translated">包扎</h1><p id="523b" class="pw-post-body-paragraph kz la it lb b lc nr ju le lf ns jx lh li nt lk ll lm nu lo lp lq nv ls lt lu im bi translated">最终的Form.js文件将如下所示。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="op oq l"/></div></figure><p id="9a83" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读！如果您想查看该项目的完整源代码，请点击这里查看GitHub资源库。请务必查看react-hook-form分支，以查看本文的代码。</p><div class="lz ma gp gr mb mc"><a href="https://github.com/chadmuro/medium-signup/tree/react-hook-form" rel="noopener  ugc nofollow" target="_blank"><div class="md ab fo"><div class="me ab mf cl cj mg"><h2 class="bd iu gy z fp mh fr fs mi fu fw is bi translated">Chad muro/中型注册</h2><div class="mj l"><h3 class="bd b gy z fp mh fr fs mi fu fw dk translated">这个项目是用Create React App引导的。在项目目录中，您可以运行:在…中运行应用程序</h3></div><div class="mk l"><p class="bd b dl z fp mh fr fs mi fu fw dk translated">github.com</p></div></div><div class="ml l"><div class="or l mn mo mp ml mq ks mc"/></div></div></a></div></div></div>    
</body>
</html>