<html>
<head>
<title>Java Algorithms: Copy List with Random Pointer (LeetCode)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Java算法:用随机指针复制列表(LeetCode)</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/java-algorithms-copy-list-with-random-pointer-leetcode-55c127e4320a?source=collection_archive---------0-----------------------#2022-06-23">https://levelup.gitconnected.com/java-algorithms-copy-list-with-random-pointer-leetcode-55c127e4320a?source=collection_archive---------0-----------------------#2022-06-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/860b031d1ff53782cd0efa5ff7eb3e10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1336/format:webp/0*iLWuLpXOwrUJ_UKX.png"/></div></figure><h2 id="34cd" class="ju jv iq bd jw jx jy dn jz ka kb dp kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">任务描述:</h2><p id="5775" class="pw-post-body-paragraph kq kr iq ks b kt ku kv kw kx ky kz la kd lb lc ld kh le lf lg kl lh li lj lk ij bi translated">给定一个长度为<code class="fe ll lm ln lo b">n</code>的链表，使得每个节点包含一个额外的随机指针，它可以指向列表中的任何节点，或<code class="fe ll lm ln lo b">null</code>。</p><p id="053e" class="pw-post-body-paragraph kq kr iq ks b kt lp kv kw kx lq kz la kd lr lc ld kh ls lf lg kl lt li lj lk ij bi translated">构造一个<a class="ae lu" href="https://en.wikipedia.org/wiki/Object_copying#Deep_copy" rel="noopener ugc nofollow" target="_blank"> <strong class="ks ir">深度复制</strong> </a>的列表。深度副本应该完全由<code class="fe ll lm ln lo b">n</code> <strong class="ks ir">全新的</strong>节点组成，其中每个新节点的值都被设置为其对应的原始节点的值。新节点的<code class="fe ll lm ln lo b">next</code>和<code class="fe ll lm ln lo b">random</code>指针都应该指向复制列表中的新节点，使得原始列表和复制列表中的指针表示相同的列表状态。<strong class="ks ir">新列表中的指针不应指向原始列表中的节点</strong>。</p><p id="7cbe" class="pw-post-body-paragraph kq kr iq ks b kt lp kv kw kx lq kz la kd lr lc ld kh ls lf lg kl lt li lj lk ij bi translated">例如，如果原始列表中有两个节点<code class="fe ll lm ln lo b">X</code>和<code class="fe ll lm ln lo b">Y</code>，其中<code class="fe ll lm ln lo b">X.random --&gt; Y</code>，那么对于复制列表中对应的两个节点<code class="fe ll lm ln lo b">x</code>和<code class="fe ll lm ln lo b">y</code>，<code class="fe ll lm ln lo b">x.random --&gt; y</code>。</p><p id="6b39" class="pw-post-body-paragraph kq kr iq ks b kt lp kv kw kx lq kz la kd lr lc ld kh ls lf lg kl lt li lj lk ij bi translated">返回<em class="lv">复制的链表头</em>。</p><p id="a710" class="pw-post-body-paragraph kq kr iq ks b kt lp kv kw kx lq kz la kd lr lc ld kh ls lf lg kl lt li lj lk ij bi translated">链表在输入/输出中被表示为一列<code class="fe ll lm ln lo b">n</code>节点。每个节点被表示为一对<code class="fe ll lm ln lo b">[val, random_index]</code>,其中:</p><ul class=""><li id="fab8" class="lw lx iq ks b kt lp kx lq kd ly kh lz kl ma lk mb mc md me bi translated"><code class="fe ll lm ln lo b">val</code>:表示<code class="fe ll lm ln lo b">Node.val</code>的整数</li><li id="6a0d" class="lw lx iq ks b kt mf kx mg kd mh kh mi kl mj lk mb mc md me bi translated"><code class="fe ll lm ln lo b">random_index</code>:指针<code class="fe ll lm ln lo b">random</code>指向的节点(范围从<code class="fe ll lm ln lo b">0</code>到<code class="fe ll lm ln lo b">n-1</code>)的索引，如果没有指向任何节点，则为<code class="fe ll lm ln lo b">null</code>。</li></ul><p id="87a1" class="pw-post-body-paragraph kq kr iq ks b kt lp kv kw kx lq kz la kd lr lc ld kh ls lf lg kl lt li lj lk ij bi translated">你的代码将<strong class="ks ir">只有</strong>被赋予原始链表的<code class="fe ll lm ln lo b">head</code>。</p><p id="1e4c" class="pw-post-body-paragraph kq kr iq ks b kt lp kv kw kx lq kz la kd lr lc ld kh ls lf lg kl lt li lj lk ij bi translated"><strong class="ks ir">例1: </strong></p><figure class="ml mm mn mo gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi mk"><img src="../Images/33b6db8b7df3ea7f25a47dabfa6b5f81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*owh61ADI8slsiXY8.png"/></div></div></figure><pre class="ml mm mn mo gt mt lo mu mv aw mw bi"><span id="fd7f" class="ju jv iq lo b gy mx my l mz na"><strong class="lo ir">Input:</strong> head = [[7,null],[13,0],[11,4],[10,2],[1,0]]<br/><strong class="lo ir">Output:</strong> [[7,null],[13,0],[11,4],[10,2],[1,0]]</span></pre><p id="b084" class="pw-post-body-paragraph kq kr iq ks b kt lp kv kw kx lq kz la kd lr lc ld kh ls lf lg kl lt li lj lk ij bi translated"><strong class="ks ir">例二:</strong></p><figure class="ml mm mn mo gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi nb"><img src="../Images/f82cc237ee3aadc87e61d29e2831d3bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*0J_QlHhIdR3Cvh_d.png"/></div></div></figure><pre class="ml mm mn mo gt mt lo mu mv aw mw bi"><span id="fd44" class="ju jv iq lo b gy mx my l mz na"><strong class="lo ir">Input:</strong> head = [[1,1],[2,1]]<br/><strong class="lo ir">Output:</strong> [[1,1],[2,1]]</span></pre><p id="4f47" class="pw-post-body-paragraph kq kr iq ks b kt lp kv kw kx lq kz la kd lr lc ld kh ls lf lg kl lt li lj lk ij bi translated"><strong class="ks ir">例3: </strong></p><figure class="ml mm mn mo gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi nc"><img src="../Images/041f78b9b434cc21eede54e36ada4252.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*vilxqDtnvZXkXBKf.png"/></div></div></figure><pre class="ml mm mn mo gt mt lo mu mv aw mw bi"><span id="86de" class="ju jv iq lo b gy mx my l mz na"><strong class="lo ir">Input:</strong> head = [[3,null],[3,0],[3,null]]<br/><strong class="lo ir">Output:</strong> [[3,null],[3,0],[3,null]]</span></pre><p id="66b4" class="pw-post-body-paragraph kq kr iq ks b kt lp kv kw kx lq kz la kd lr lc ld kh ls lf lg kl lt li lj lk ij bi translated"><strong class="ks ir">约束:</strong></p><ul class=""><li id="aeb4" class="lw lx iq ks b kt lp kx lq kd ly kh lz kl ma lk mb mc md me bi translated"><code class="fe ll lm ln lo b">0 &lt;= n &lt;= 1000</code></li><li id="698b" class="lw lx iq ks b kt mf kx mg kd mh kh mi kl mj lk mb mc md me bi translated"><code class="fe ll lm ln lo b">-10^4 &lt;= Node.val &lt;= 10^4</code></li><li id="48b9" class="lw lx iq ks b kt mf kx mg kd mh kh mi kl mj lk mb mc md me bi translated"><code class="fe ll lm ln lo b">Node.random</code>是<code class="fe ll lm ln lo b">null</code>或者指向链表中的某个节点。</li></ul><h2 id="9619" class="ju jv iq bd jw jx jy dn jz ka kb dp kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">推理:</h2><p id="0b80" class="pw-post-body-paragraph kq kr iq ks b kt ku kv kw kx ky kz la kd lb lc ld kh le lf lg kl lh li lj lk ij bi translated">乍一看，这项任务似乎很难，但实际上并非如此。但是它有一个我们需要注意的属性，并围绕它建立一个习惯。每当你看到一个可以分成小问题的问题，就把它分开。这是你可以应用于几乎任何问题的基本模式之一。让我来帮你。让我们再次重读这个任务，并把它分成更小的子问题。</p><ol class=""><li id="5e14" class="lw lx iq ks b kt lp kx lq kd ly kh lz kl ma lk nd mc md me bi translated">我们需要用与原始节点相同的值创建每个节点的副本。</li><li id="1588" class="lw lx iq ks b kt mf kx mg kd mh kh mi kl mj lk nd mc md me bi translated">我们需要以与原始节点相同的方式设置指向下一个节点的指针</li><li id="e531" class="lw lx iq ks b kt mf kx mg kd mh kh mi kl mj lk nd mc md me bi translated">我们需要像在原始节点中一样设置指向随机节点的指针</li></ol><p id="7777" class="pw-post-body-paragraph kq kr iq ks b kt lp kv kw kx lq kz la kd lr lc ld kh ls lf lg kl lt li lj lk ij bi translated">在这一点上，你可以说，等待，而不是有一个问题，现在我们有3个。是的，你是对的，但是它们更容易解决。让我们跳到解决方案部分，我会证明给你看。</p><h2 id="c121" class="ju jv iq bd jw jx jy dn jz ka kb dp kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">先决条件:</h2><p id="6f68" class="pw-post-body-paragraph kq kr iq ks b kt ku kv kw kx ky kz la kd lb lc ld kh le lf lg kl lh li lj lk ij bi translated">如果你想调试你的代码，我个人推荐，你必须引入这个类</p><figure class="ml mm mn mo gt jr"><div class="bz fp l di"><div class="ne nf l"/></div><figcaption class="ng nh gj gh gi ni nj bd b be z dk translated">节点类</figcaption></figure><h2 id="1455" class="ju jv iq bd jw jx jy dn jz ka kb dp kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">解决方案:</h2><p id="e7f4" class="pw-post-body-paragraph kq kr iq ks b kt ku kv kw kx ky kz la kd lb lc ld kh le lf lg kl lh li lj lk ij bi translated">让我们从解决第一个子问题开始。让我们做一些简单的事情，遍历链表，为其中的每个节点创建一个副本。我选择HashMap来存储像旧节点-&gt;新节点这样的节点对。既然我们要从列表的头部迭代到尾部，那么我们也引入一个临时变量，并把它设置为列表的头部。</p><figure class="ml mm mn mo gt jr"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="1b00" class="pw-post-body-paragraph kq kr iq ks b kt lp kv kw kx lq kz la kd lr lc ld kh ls lf lg kl lt li lj lk ij bi translated">我们解决了第一个子问题。接下来的两个问题很容易解决，你会惊讶的。我们已经有了新旧节点之间的连接。我们只需要填充指向下一个节点的指针和随机指针。我们的地图已经储存了我们需要的所有信息。让我们再次将temp设置为列表的头部。让我们也引入新的虚拟节点，它将存储到我们新复制的头的链接。我们需要的最后一件事是prev指针，它将帮助我们设置关系节点-&gt;下一个节点</p><p id="cbd5" class="pw-post-body-paragraph kq kr iq ks b kt lp kv kw kx lq kz la kd lr lc ld kh ls lf lg kl lt li lj lk ij bi translated">我们的解决方案应该是这样的</p><figure class="ml mm mn mo gt jr"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="d026" class="pw-post-body-paragraph kq kr iq ks b kt lp kv kw kx lq kz la kd lr lc ld kh ls lf lg kl lt li lj lk ij bi translated">上面的代码给了我们线性的时间和空间复杂度。</p><figure class="ml mm mn mo gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi nk"><img src="../Images/fa1f7c27b81ec04f16756c5c46dce50c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pbXFIgIO2szMPRYys88GcQ.png"/></div></div></figure></div><div class="ab cl nl nm hu nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="ij ik il im in"><h1 id="bc22" class="ns jv iq bd jw nt nu nv jz nw nx ny kc nz oa ob kg oc od oe kk of og oh ko oi bi translated">分级编码</h1><p id="a425" class="pw-post-body-paragraph kq kr iq ks b kt ku kv kw kx ky kz la kd lb lc ld kh le lf lg kl lh li lj lk ij bi translated">感谢您成为我们社区的一员！更多内容见<a class="ae lu" href="https://levelup.gitconnected.com/" rel="noopener ugc nofollow" target="_blank">级编码出版物</a>。<br/>跟随:<a class="ae lu" href="https://twitter.com/gitconnected" rel="noopener ugc nofollow" target="_blank">推特</a>，<a class="ae lu" href="https://www.linkedin.com/company/gitconnected" rel="noopener ugc nofollow" target="_blank">领英</a>，<a class="ae lu" href="https://newsletter.levelup.dev/" rel="noopener ugc nofollow" target="_blank">通迅</a> <br/> <strong class="ks ir">升一级正在改造理工大招聘➡️ </strong> <a class="ae lu" href="https://jobs.levelup.dev/talent/welcome?referral=true" rel="noopener ugc nofollow" target="_blank"> <strong class="ks ir">加入我们的人才集体</strong> </a></p></div></div>    
</body>
</html>