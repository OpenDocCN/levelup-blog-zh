<html>
<head>
<title>Useful tricks you might not know about git log</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">你可能不知道的关于git日志的有用技巧</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/useful-tricks-you-might-not-know-about-git-log-ed5ac32625ef?source=collection_archive---------18-----------------------#2020-06-04">https://levelup.gitconnected.com/useful-tricks-you-might-not-know-about-git-log-ed5ac32625ef?source=collection_archive---------18-----------------------#2020-06-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div class="gh gi jq"><img src="../Images/2d2762f6101daa8afbcf62a469249184.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/0*nE5VsVBNT0tpdegu.gif"/></div></figure><p id="849b" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">如果你使用Git有一段时间了，你应该会遇到<code class="fe kv kw kx ky b">git log</code>。众所周知，git log是一个简单的命令，可以帮助我们查看变更或项目历史。</p><p id="3e6d" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">即使如此简单，它也是一个非常强大的工具，它提供了许多选项来帮助我们查看项目变更及其结构。我们将在本文中看到一些最常用的选项。</p><h2 id="294d" class="kz la it bd lb lc ld dn le lf lg dp lh ki li lj lk km ll lm ln kq lo lp lq lr bi translated">git log -oneline</h2><pre class="ls lt lu lv gt lw ky lx ly aw lz bi"><span id="1b44" class="kz la it ky b gy ma mb l mc md">git log --oneline</span></pre><p id="f86a" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">该命令帮助您以更清晰的方式查看提交。它将每个提交压缩为一行，并且只有最少的信息，如较短的提交散列、提交消息。</p><figure class="ls lt lu lv gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi me"><img src="../Images/db10a4eee3a560495d8b56c917edfac8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ZkvTH2Ltf35tDNT2.png"/></div></div></figure><h2 id="9eab" class="kz la it bd lb lc ld dn le lf lg dp lh ki li lj lk km ll lm ln kq lo lp lq lr bi translated">按时间段筛选提交</h2><p id="841c" class="pw-post-body-paragraph jx jy it jz b ka mj kc kd ke mk kg kh ki ml kk kl km mm ko kp kq mn ks kt ku im bi translated">这些命令将过滤掉给定时间段内的提交。例如，<strong class="jz iu"> -after </strong>只会过滤给定时间段之后的提交，<strong class="jz iu"> -before </strong>只会过滤给定时间段之前的提交。</p><pre class="ls lt lu lv gt lw ky lx ly aw lz bi"><span id="0a09" class="kz la it ky b gy ma mb l mc md">git log --after="2020-15-05"</span></pre><p id="093f" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">以上命令将只显示2020年5月15日之后的提交</p><pre class="ls lt lu lv gt lw ky lx ly aw lz bi"><span id="9f41" class="kz la it ky b gy ma mb l mc md">git log --after="2020-15-05" --before="2020-25-05"</span></pre><p id="8ab5" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">上面的命令将只显示从5月15日到5月25日的提交</p><p id="5657" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">您也可以使用以下日期格式</p><pre class="ls lt lu lv gt lw ky lx ly aw lz bi"><span id="2660" class="kz la it ky b gy ma mb l mc md">git log --after="yesterday" // shows only commits from yesterday</span><span id="57b4" class="kz la it ky b gy mo mb l mc md">git log --after="today" // shows only today commits </span><span id="0b1a" class="kz la it ky b gy mo mb l mc md">git log --before="10 day ago" // omits last 10 days commits </span><span id="9d26" class="kz la it ky b gy mo mb l mc md">git log --after="1 week ago" //show only commits from last week </span><span id="b7b9" class="kz la it ky b gy mo mb l mc md">git log --after="2 week ago" </span><span id="694c" class="kz la it ky b gy mo mb l mc md">git log --after="2 month ago" // shows only last 2 months commits</span></pre><h2 id="d11b" class="kz la it bd lb lc ld dn le lf lg dp lh ki li lj lk km ll lm ln kq lo lp lq lr bi translated">具有不同更改的git日志</h2><p id="082e" class="pw-post-body-paragraph jx jy it jz b ka mj kc kd ke mk kg kh ki ml kk kl km mm ko kp kq mn ks kt ku im bi translated">该命令将显示包含差异更改的日志。以便您可以知道每次提交中所做的更改。</p><figure class="ls lt lu lv gt ju gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/1d495687a4572f279a4d2985e496a023.png" data-original-src="https://miro.medium.com/v2/resize:fit:1240/format:webp/0*x5YdNojM7_QD4e3g.png"/></div></figure><p id="80dc" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">在上图中，您可以看到git diff的变化。</p><h2 id="e9ab" class="kz la it bd lb lc ld dn le lf lg dp lh ki li lj lk km ll lm ln kq lo lp lq lr bi translated">按作者筛选提交</h2><pre class="ls lt lu lv gt lw ky lx ly aw lz bi"><span id="3a4a" class="kz la it ky b gy ma mb l mc md">git log --author="Srebalaji"</span></pre><p id="dfea" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">上面的命令将过滤掉特定作者提交的内容。注意，Git通过正则表达式模式过滤掉。所以不要担心精确的名称匹配或区分大小写。</p><p id="d286" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">Git日志可以接受多个选项，因此您可以根据需要组合选项。举个例子，</p><pre class="ls lt lu lv gt lw ky lx ly aw lz bi"><span id="2524" class="kz la it ky b gy ma mb l mc md">git log --after="1 week ago" --author="srebalji" -p</span></pre><p id="4563" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">上面的命令将根据各自的作者过滤过去一周的提交，并显示差异变化。</p><h2 id="9c1a" class="kz la it bd lb lc ld dn le lf lg dp lh ki li lj lk km ll lm ln kq lo lp lq lr bi translated">按日志消息筛选提交</h2><p id="37ee" class="pw-post-body-paragraph jx jy it jz b ka mj kc kd ke mk kg kh ki ml kk kl km mm ko kp kq mn ks kt ku im bi translated">有时，您需要通过日志消息过滤提交。Git接受一个regex模式来搜索日志消息，并显示所有匹配的提交。</p><pre class="ls lt lu lv gt lw ky lx ly aw lz bi"><span id="9888" class="kz la it ky b gy ma mb l mc md">git log --grep="ISSUE-43560"</span></pre><p id="e566" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">上面的命令将根据各自的模式过滤提交。记住默认情况下是区分大小写的。</p><p id="4fbc" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">为了使搜索<strong class="jz iu">不区分大小写</strong>，可以传递<strong class="jz iu"> -i </strong>参数</p><pre class="ls lt lu lv gt lw ky lx ly aw lz bi"><span id="043d" class="kz la it ky b gy ma mb l mc md">git log -i --grep="issue-43560"</span></pre><p id="f98f" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">以下命令使用正则表达式模式搜索，并将搜索两个问题id。</p><pre class="ls lt lu lv gt lw ky lx ly aw lz bi"><span id="4a04" class="kz la it ky b gy ma mb l mc md">git log -i --grep="issue-43560\|issue-89786"</span></pre><h2 id="97bb" class="kz la it bd lb lc ld dn le lf lg dp lh ki li lj lk km ll lm ln kq lo lp lq lr bi translated">按文件筛选提交</h2><p id="7b63" class="pw-post-body-paragraph jx jy it jz b ka mj kc kd ke mk kg kh ki ml kk kl km mm ko kp kq mn ks kt ku im bi translated">有时，您需要所有影响某些特定文件的提交更改。这将在许多地方实现。</p><pre class="ls lt lu lv gt lw ky lx ly aw lz bi"><span id="9ffc" class="kz la it ky b gy ma mb l mc md">git log main.rb</span></pre><p id="128c" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">该命令将过滤对相应文件进行了更改的提交。</p><p id="0d00" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">您还可以向它传递多个文件。</p><pre class="ls lt lu lv gt lw ky lx ly aw lz bi"><span id="e562" class="kz la it ky b gy ma mb l mc md">git log main.rb search.rb login.rb</span></pre><p id="6d50" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">你可以看到我过滤掉了三个文件。</p><p id="4494" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">记住你也可以传递多个选项。</p><pre class="ls lt lu lv gt lw ky lx ly aw lz bi"><span id="d802" class="kz la it ky b gy ma mb l mc md">git log -i --grep="fix " main.rb search.rb</span></pre><p id="3eb2" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">该命令将过滤掉对指定文件所做的提交更改，还将按照给定的搜索模式匹配日志消息。</p><h2 id="37d0" class="kz la it bd lb lc ld dn le lf lg dp lh ki li lj lk km ll lm ln kq lo lp lq lr bi translated">按文件内容过滤提交</h2><p id="f84c" class="pw-post-body-paragraph jx jy it jz b ka mj kc kd ke mk kg kh ki ml kk kl km mm ko kp kq mn ks kt ku im bi translated">您可能需要在源代码中搜索已经添加到提交历史记录中的特定字符串。这可以通过以下方式实现</p><pre class="ls lt lu lv gt lw ky lx ly aw lz bi"><span id="b550" class="kz la it ky b gy ma mb l mc md">git log -S"function login()"</span></pre><p id="60a7" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">上面的命令将搜索字符串“function login()”。默认情况下，它区分大小写。</p><p id="eaf1" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">您可以通过添加<strong class="jz iu"> -i. </strong>使其不区分大小写，并且要查看内容，您可以查看差异变化。</p><pre class="ls lt lu lv gt lw ky lx ly aw lz bi"><span id="93de" class="kz la it ky b gy ma mb l mc md">git log -i -S"function login()" -p</span></pre><h2 id="553e" class="kz la it bd lb lc ld dn le lf lg dp lh ki li lj lk km ll lm ln kq lo lp lq lr bi translated">仅显示合并提交</h2><p id="cd69" class="pw-post-body-paragraph jx jy it jz b ka mj kc kd ke mk kg kh ki ml kk kl km mm ko kp kq mn ks kt ku im bi translated">这个命令帮助我们了解对当前分支所做的合并。</p><pre class="ls lt lu lv gt lw ky lx ly aw lz bi"><span id="87b0" class="kz la it ky b gy ma mb l mc md">git log --merges</span></pre><p id="8576" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">上面的命令将只显示当前分支中的合并提交。仅此而已。</p><h2 id="903d" class="kz la it bd lb lc ld dn le lf lg dp lh ki li lj lk km ll lm ln kq lo lp lq lr bi translated">显示分支之间的差异</h2><p id="cb39" class="pw-post-body-paragraph jx jy it jz b ka mj kc kd ke mk kg kh ki ml kk kl km mm ko kp kq mn ks kt ku im bi translated">我们已经在以前的一期杂志中看到过这个命令。</p><pre class="ls lt lu lv gt lw ky lx ly aw lz bi"><span id="fd46" class="kz la it ky b gy ma mb l mc md">git log master..develop</span></pre><p id="6128" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">这个命令将帮助您显示来自develop的所有提交，但是不在master分支中。通过这种方式，您可以知道有多少新的提交被添加到了开发分支中，而主分支中却没有。并确保在比较之前在本地有更新的更改。</p><h2 id="4148" class="kz la it bd lb lc ld dn le lf lg dp lh ki li lj lk km ll lm ln kq lo lp lq lr bi translated">自定义格式化日志消息</h2><p id="f7e2" class="pw-post-body-paragraph jx jy it jz b ka mj kc kd ke mk kg kh ki ml kk kl km mm ko kp kq mn ks kt ku im bi translated">Git还提供了定制日志消息格式的选项。你可以查看<a class="ae mq" href="https://www.git-scm.com/docs/git-log#_pretty_formats" rel="noopener ugc nofollow" target="_blank">自定义漂亮选项</a>获得更多选项。</p><p id="85a9" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">举个例子，</p><pre class="ls lt lu lv gt lw ky lx ly aw lz bi"><span id="eece" class="kz la it ky b gy ma mb l mc md">git log --pretty=format:"%Cred%an - %ar%n %Cblue %h -%Cgreen %s %n"</span></pre><figure class="ls lt lu lv gt ju gh gi paragraph-image"><div class="gh gi mr"><img src="../Images/37b86abe3673a3eb4a6f7dbd67550e23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1284/format:webp/0*i72mAarpWJtvhfIV.png"/></div></figure><p id="f451" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">在上图中可以看到，提交日志是定制格式的。如果您只想查看日志的特定细节，这非常简单而且非常方便。</p><p id="c549" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">希望你学到了什么:)</p><p id="02c1" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">如果你有任何技巧或疑问，可以在评论中留下反馈。</p><p id="7e2e" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated"><strong class="jz iu">你可以在这里找到我的其他git相关文章</strong></p><pre class="ls lt lu lv gt lw ky lx ly aw lz bi"><span id="ea25" class="kz la it ky b gy ma mb l mc md">1. <a class="ae mq" rel="noopener ugc nofollow" target="_blank" href="/how-git-revert-works-9b87b8b03dd3">How git revert works</a></span><span id="9d3b" class="kz la it ky b gy mo mb l mc md">2. <a class="ae mq" rel="noopener ugc nofollow" target="_blank" href="/what-is-git-cherry-pick-and-how-to-use-it-effectively-665247192442">How git cherry-pick works and how to use it effectively</a></span><span id="3369" class="kz la it ky b gy mo mb l mc md">3. <a class="ae mq" rel="noopener ugc nofollow" target="_blank" href="/automate-repetitive-tasks-with-custom-git-commands-76a4b71d262f">Automate repetitive tasks in Git</a></span><span id="1041" class="kz la it ky b gy mo mb l mc md">4. <a class="ae mq" rel="noopener ugc nofollow" target="_blank" href="/how-to-use-git-fetch-and-git-pull-effectively-c6a4becfbc16">Useful tricks of git fetch and git pull</a></span><span id="eb5f" class="kz la it ky b gy mo mb l mc md">5. <a class="ae mq" href="https://medium.com/@srebalaji/a-very-basic-intro-of-git-b9cab0e64153" rel="noopener">A very basic intro of Git</a></span></pre><p id="7f3a" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated"><strong class="jz iu">本帖原载于我的简讯</strong><a class="ae mq" href="https://gitbetter.substack.com/" rel="noopener ugc nofollow" target="_blank"><strong class="jz iu">GitBetter</strong></a><strong class="jz iu">。如果你已经来了这么久，那么我想你会对Git非常感兴趣。可以订阅</strong><a class="ae mq" href="https://gitbetter.substack.com/" rel="noopener ugc nofollow" target="_blank"><strong class="jz iu">Git better</strong></a><strong class="jz iu">获取Git的招数、技巧、高级话题。</strong></p><p id="3454" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">感谢您的阅读:)</p></div></div>    
</body>
</html>