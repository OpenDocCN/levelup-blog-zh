<html>
<head>
<title>React &amp; Typescript with Webpack</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Webpack反应和键入脚本</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/react-typescript-with-webpack-2fceebb8faf?source=collection_archive---------0-----------------------#2018-01-10">https://levelup.gitconnected.com/react-typescript-with-webpack-2fceebb8faf?source=collection_archive---------0-----------------------#2018-01-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/08c86e1303211ec321c0852a9321d4be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x6EnTlBhjcyu605VPDysZQ.jpeg"/></div></div></figure><div class=""/><p id="6ca2" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我花了很多时间在Angular 2上，喜欢用Typescirpt。因此，自从我决定学习React以来，我发现在没有类型定义、接口、枚举和Typescript附带的所有其他好东西的情况下编写“普通”Javascript很奇怪。我做了一些研究，想出了如何从零开始将Typescript合并到React项目中，并想在这篇文章中与其他想这样做的人分享我的发现。</p><p id="a3dc" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我已经写了一篇关于<a class="ae kw" href="https://medium.com/stratajet-tech/moving-from-gulp-to-webpack-9064b6cf2e08" rel="noopener">从Gulp到Webpack </a>的文章，如果你已经读过，你会在这里看到一些东西。如果你还没有读过它，并且想更好地理解webpack是如何工作的，我强烈建议你这样做。</p><h1 id="d21d" class="kx ky jb bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">我们开始吧</h1><p id="ece8" class="pw-post-body-paragraph jy jz jb ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">下面是这篇文章的视频版本，适合那些喜欢以这种方式学习的人。</p><figure class="ma mb mc md gt is"><div class="bz fp l di"><div class="me mf l"/></div></figure><blockquote class="mg mh mi"><p id="2297" class="jy jz mj ka b kb kc kd ke kf kg kh ki mk kk kl km ml ko kp kq mm ks kt ku kv ij bi translated">本教程假设您的机器上安装了Node版本8或更高版本，您对React的工作原理有所了解，并且对终端有所了解。</p></blockquote><p id="b04a" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在你的终端上输入，创建一个名为<strong class="ka jc"> react-typescript </strong>的文件夹。</p><pre class="ma mb mc md gt mn mo mp mq aw mr bi"><span id="38fe" class="ms ky jb mo b gy mt mu l mv mw">$ mkdir react-typescript</span></pre><p id="aacf" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在react-typescript中创建一个名为<strong class="ka jc"> src的文件夹。</strong>然后在你的终端键入；</p><pre class="ma mb mc md gt mn mo mp mq aw mr bi"><span id="2395" class="ms ky jb mo b gy mt mu l mv mw">$ touch webpack.config.js index.html</span><span id="c5b5" class="ms ky jb mo b gy mx mu l mv mw">$ npm init -y</span></pre><p id="4e42" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">最后一个命令使用默认设置创建了一个<strong class="ka jc"> package.json </strong>文件/如果需要，欢迎您更改该文件。项目的基本设置到此结束，现在让我们开始编辑文件。</p><p id="3d40" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">打开您创建的<strong class="ka jc"> webpack.config.js </strong>文件，并在其中放置一些简单的webpack启动代码。</p><figure class="ma mb mc md gt is"><div class="bz fp l di"><div class="my mf l"/></div></figure><p id="0cf9" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我已经在本文的<a class="ae kw" href="https://medium.com/stratajet-tech/moving-from-gulp-to-webpack-9064b6cf2e08" rel="noopener">中谈到了每件事的作用，但是其中很多都是不言自明的。</a></p><p id="e412" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们将一个名为<strong class="ka jc"> index.tsx </strong>的文件从<strong class="ka jc"> src </strong>文件夹添加到<strong class="ka jc">条目</strong>中，就像so’<strong class="ka jc">一样。/src/index.tsx </strong>'。我们还没有创建这个文件，但我们稍后会创建。<strong class="ka jc">。tsx </strong>扩展是<strong class="ka jc">的打字稿版本。jsx </strong>同理<strong class="ka jc">。使用ts </strong>代替<strong class="ka jc">。但是在本教程中我们不会用到这些。同样在<strong class="ka jc">输出中，</strong>让我们将所有内容放在一个名为<strong class="ka jc"> build </strong>的文件夹中，该文件夹将使用<strong class="ka jc">路径</strong>导出到项目的根目录，并将所有合并的js文件收集到一个<strong class="ka jc"> bundle.js. </strong>中</strong></p><figure class="ma mb mc md gt is"><div class="bz fp l di"><div class="my mf l"/></div></figure><p id="fd04" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">不是让我们在src文件夹中创建一个<strong class="ka jc"> index.tsx </strong>文件并添加这段代码。</p><figure class="ma mb mc md gt is"><div class="bz fp l di"><div class="my mf l"/></div></figure><p id="aed7" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你可能习惯于像这样在常规js文件中导入react</p><pre class="ma mb mc md gt mn mo mp mq aw mr bi"><span id="ec61" class="ms ky jb mo b gy mt mu l mv mw">import React from "react";</span></pre><p id="94be" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">但是对于Typescript，您必须将所有(*)作为React导入。您粘贴的代码片段是一个非常简单的React文件，它只是将单词“Hello”放在一个带有类“<strong class="ka jc">容器”</strong>的DOM节点中。让我们在项目根目录下的一个名为【index.html】的文件中创建这个节点。</p><figure class="ma mb mc md gt is"><div class="bz fp l di"><div class="my mf l"/></div></figure><p id="931a" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在我们需要安装我们引用的所有NPM。首先让我们安装react模块。</p><pre class="ma mb mc md gt mn mo mp mq aw mr bi"><span id="ba53" class="ms ky jb mo b gy mt mu l mv mw">$ npm i react react-dom</span></pre><p id="1175" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后是作为开发依赖的webpack库。</p><pre class="ma mb mc md gt mn mo mp mq aw mr bi"><span id="3f78" class="ms ky jb mo b gy mt mu l mv mw">$ npm i webpack webpack-dev-server@2.9.7 -D</span></pre><p id="e142" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你会注意到我们已经安装了一个特定版本的webpack-dev-server，因为在2.10.0版本中有一个<a class="ae kw" href="https://github.com/webpack/webpack-dev-server/issues/1259" rel="noopener ugc nofollow" target="_blank">突破错误</a>。如果你正经历着这种情况，当有一个新的版本出现时，我们非常欢迎你去尝试。</p><p id="9c9b" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">好的——我们有一个类型脚本文件，但是webpack不知道如何读取它。让我们赋予它这样做的能力。安装<strong class="ka jc">awesome-typescript-loader</strong>作为开发依赖项。</p><pre class="ma mb mc md gt mn mo mp mq aw mr bi"><span id="4b02" class="ms ky jb mo b gy mt mu l mv mw">$ npm i typescript awesome-typescript-loader -D</span></pre><p id="5b6b" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你可以在这里阅读<a class="ae kw" href="https://github.com/s-panferov/awesome-typescript-loader#differences-between-ts-loader" rel="noopener ugc nofollow" target="_blank"/>为什么比使用<a class="ae kw" href="https://github.com/TypeStrong/ts-loader" rel="noopener ugc nofollow" target="_blank"> <strong class="ka jc"> ts-loader </strong> </a>。通过向模块部分添加规则，相应地编辑<strong class="ka jc"> webpack.config </strong>文件。</p><figure class="ma mb mc md gt is"><div class="bz fp l di"><div class="my mf l"/></div></figure><p id="574e" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们快到了。在根目录下创建一个名为<strong class="ka jc"> tsconfig.json </strong>的文件，它告诉webpack在哪里搜索typescript文件。</p><figure class="ma mb mc md gt is"><div class="bz fp l di"><div class="my mf l"/></div></figure><p id="45c1" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在我们只需要再安装一些开发依赖项。默认情况下，我们的React安装没有关于包中方法类型的信息。我们可以安装包来生成React和React DOM的类型。</p><pre class="ma mb mc md gt mn mo mp mq aw mr bi"><span id="2ec8" class="ms ky jb mo b gy mt mu l mv mw">$ npm i <a class="ae kw" href="http://twitter.com/types/react" rel="noopener ugc nofollow" target="_blank">@types/react</a> <a class="ae kw" href="http://twitter.com/types/react-dom" rel="noopener ugc nofollow" target="_blank">@types/react-dom</a> -D</span></pre><p id="3f9a" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">最后需要的编辑是通过用下面这行代码替换脚本中的test来更新<strong class="ka jc"> package.json </strong>文件；</p><pre class="ma mb mc md gt mn mo mp mq aw mr bi"><span id="a742" class="ms ky jb mo b gy mt mu l mv mw">"start": "webpack-dev-server"</span></pre><p id="16a2" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，如果你在终端中点击<strong class="ka jc"> npm start </strong>(或者<strong class="ka jc"> yarn start </strong>如果你有<a class="ae kw" href="https://yarnpkg.com/en/" rel="noopener ugc nofollow" target="_blank"> Yarn </a>)来启动服务器。导航到<strong class="ka jc"> localhost:8080 </strong>，瞧，你应该在一个<strong class="ka jc"> h1 </strong>标签中看到“Hello”。</p><p id="946c" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">就是这样！您有一个基本的Typescirpt、webpack和React设置。对于一般的react项目，您可能希望拥有多个组件文件、用于调试的源代码映射、样式，并且可能希望能够不在索引中硬编码bundle.js文件。我们将在本教程的下一部分<a class="ae kw" href="https://medium.com/@richbray/react-typescript-with-webpack-part-2-aa02d150c59b" rel="noopener">中处理这个问题。</a></p></div></div>    
</body>
</html>