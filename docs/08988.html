<html>
<head>
<title>How to design a system to scale to your first 100 million users</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何设计一个系统来扩展到你的第一个1亿用户</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-design-a-system-to-scale-to-your-first-100-million-users-4450a2f9703d?source=collection_archive---------0-----------------------#2021-06-27">https://levelup.gitconnected.com/how-to-design-a-system-to-scale-to-your-first-100-million-users-4450a2f9703d?source=collection_archive---------0-----------------------#2021-06-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="4ac9" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">高性能系列</h2><div class=""/><div class=""><h2 id="d4f3" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">想<strong class="ak">大</strong>，做小，学快</h2></div><pre class="kr ks kt ku gt kv kw kx ky aw kz bi"><span id="b4d4" class="la lb it kw b gy lc ld l le lf"><em class="lg">In order to keep up with emerging techniques, I would like to update you on this story throughout the year.</em></span><span id="6452" class="la lb it kw b gy lh ld l le lf"><em class="lg">Last updated on 2021 Dec 23</em></span></pre><figure class="kr ks kt ku gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi li"><img src="../Images/c92530e7a689fe1c2ca27d2097edfe61.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*z3gY0E6tUsDOue7Q"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk translated">照片由<a class="ae lu" href="https://unsplash.com/@kirill2020?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">基里尔施</a>在<a class="ae lu" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</figcaption></figure><p id="a7a5" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">设计一个支持数亿用户的系统并不容易。对于软件架构师来说，这总是一个巨大的挑战(但是在阅读了我的文章之后，从今天开始，这将变得很容易🤣)</p><p id="c93e" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">以下是我在这篇文章中涉及的一些话题。</p><ul class=""><li id="82df" class="mr ms it lx b ly lz mb mc me mt mi mu mm mv mq mw mx my mz bi translated">先说最简单的:<em class="lg">全合一</em>。</li><li id="e69c" class="mr ms it lx b ly na mb nb me nc mi nd mm ne mq mw mx my mz bi translated">可伸缩性的艺术:<em class="lg">横向扩展，纵向扩展</em>。</li><li id="28c7" class="mr ms it lx b ly na mb nb me nc mi nd mm ne mq mw mx my mz bi translated">扩展关系数据库:<em class="lg">主-从复制、主-主复制、联合、分片、反规范化和SQL调优。</em></li><li id="3c4f" class="mr ms it lx b ly na mb nb me nc mi nd mm ne mq mw mx my mz bi translated">使用哪个数据库:<em class="lg"> NoSQL还是SQL </em>？</li><li id="ba3b" class="mr ms it lx b ly na mb nb me nc mi nd mm ne mq mw mx my mz bi translated">高级概念:<em class="lg">缓存、CDN、geoDNS。等。</em></li></ul><pre class="kr ks kt ku gt kv kw kx ky aw kz bi"><span id="3599" class="la lb it kw b gy lc ld l le lf">Today I don’t want to discuss general terms in high-performance computing such as fault tolerance, reliability, high availability., etc.</span></pre><p id="9d97" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">保持冷静，我们现在开始吧！</p><h1 id="a620" class="nf lb it bd ng nh ni nj nk nl nm nn no ki np kj nq kl nr km ns ko nt kp nu nv bi translated">从头开始</h1><p id="7a67" class="pw-post-body-paragraph lv lw it lx b ly nw kd ma mb nx kg md me ny mg mh mi nz mk ml mm oa mo mp mq im bi translated">在下图中，我想和一些用户一起设计一个基本的应用程序。<em class="lg">最简单的方法是在一台服务器上部署整个应用</em>。这可能是我们大多数人开始的方式。</p><ul class=""><li id="65dc" class="mr ms it lx b ly lz mb mc me mt mi mu mm mv mq mw mx my mz bi translated">一个网站(包括API)运行在Apache(或Tomcat)这样web服务器上。</li><li id="51bf" class="mr ms it lx b ly na mb nb me nc mi nd mm ne mq mw mx my mz bi translated">像甲骨文(或MySQL⁴).)这样的数据库</li></ul><figure class="kr ks kt ku gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi ob"><img src="../Images/341618ef923233374389cb67f3524d36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VWHA2hOVtQ9uFnd6-CU78A.png"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk translated">我们在同一个物理机器上有web服务器和数据库服务器</figcaption></figure><p id="f544" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">但是当前的体系结构有以下缺点。</p><ul class=""><li id="3c0b" class="mr ms it lx b ly lz mb mc me mt mi mu mm mv mq mw mx my mz bi translated">如果数据库失败，系统也会失败。</li><li id="3a5e" class="mr ms it lx b ly na mb nb me nc mi nd mm ne mq mw mx my mz bi translated">如果web服务器失败，整个系统都会失败。</li></ul><p id="3ce1" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">在这种情况下，我们没有故障转移和冗余。如果一台服务器宕机，所有服务器都会宕机。</p><h2 id="e21b" class="la lb it bd ng oc od dn nk oe of dp no me og oh nq mi oi oj ns mm ok ol nu iz bi translated">使用DNS服务器解析主机名和IP地址</h2><p id="5e4d" class="pw-post-body-paragraph lv lw it lx b ly nw kd ma mb nx kg md me ny mg mh mi nz mk ml mm oa mo mp mq im bi translated">在上图中，用户(或客户端)连接到DNS⁵系统，以获取托管我们系统的服务器的互联网协议(IP)地址。一旦获得IP地址，请求就被直接发送到我们的系统。</p><blockquote class="om"><p id="6e11" class="on oo it bd op oq or os ot ou ov mq dk translated">每次访问网站时，您的电脑都会执行DNS查找。</p></blockquote><p id="596d" class="pw-post-body-paragraph lv lw it lx b ly ow kd ma mb ox kg md me oy mg mh mi oz mk ml mm pa mo mp mq im bi translated">通常情况下，域名系统(DNS)服务器是作为托管公司提供的付费服务，并不运行在你自己的服务器上。</p><h1 id="ca15" class="nf lb it bd ng nh ni nj nk nl nm nn no ki np kj nq kl nr km ns ko nt kp nu nv bi translated">可伸缩性的艺术</h1><p id="02dc" class="pw-post-body-paragraph lv lw it lx b ly nw kd ma mb nx kg md me ny mg mh mi nz mk ml mm oa mo mp mq im bi translated">我们的系统可能必须进行扩展，原因有很多，比如数据量的增加、工作量的增加(例如，事务的数量)以及用户的增长。</p><pre class="kr ks kt ku gt kv kw kx ky aw kz bi"><span id="fcb9" class="la lb it kw b gy lc ld l le lf">Scalability usually means an ability to handle more users, clients, data, transactions, or requests without affecting the user experience by adding more resources.</span></pre><p id="7775" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">我们必须决定如何扩展这个系统。在这种情况下，有以下两种缩放类型:<code class="fe pb pc pd kw b">scale-up</code>和<code class="fe pb pc pd kw b">scale-out</code>。</p><figure class="kr ks kt ku gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi ob"><img src="../Images/b4f7914ac9b4656144b48bcebe87844f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AH9piaOcg3Y-quM-HL0lbg.png"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk translated">纵向扩展与横向扩展</figcaption></figure><h2 id="4cbf" class="la lb it bd ng oc od dn nk oe of dp no me og oh nq mi oi oj ns mm ok ol nu iz bi translated">纵向扩展:向现有服务器添加更多内存和CPU</h2><p id="b826" class="pw-post-body-paragraph lv lw it lx b ly nw kd ma mb nx kg md me ny mg mh mi nz mk ml mm oa mo mp mq im bi translated">这也称为“<code class="fe pb pc pd kw b">vertical scaling</code>”，它指的是系统的资源最大化，以扩展其处理不断增加的负载的能力——例如，我们通过添加RAM和CPU来增加我们服务器的功率。</p><pre class="kr ks kt ku gt kv kw kx ky aw kz bi"><span id="eb42" class="la lb it kw b gy lc ld l le lf">If we are running the server with 8GB of memory, it is easy to upgrade to 32GB or even 128GB by just replacing or adding the hardware.</span></pre><p id="a12b" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">垂直缩放有多种方式，如下所示。</p><ul class=""><li id="1af7" class="mr ms it lx b ly lz mb mc me mt mi mu mm mv mq mw mx my mz bi translated">通过在RAID阵列中添加更多硬盘来增加更多I/O容量。</li><li id="b0a7" class="mr ms it lx b ly na mb nb me nc mi nd mm ne mq mw mx my mz bi translated">通过切换到固态驱动器(SSD)来缩短I/O访问时间。</li><li id="45f9" class="mr ms it lx b ly na mb nb me nc mi nd mm ne mq mw mx my mz bi translated">切换到具有更多处理器的服务器。</li><li id="bea6" class="mr ms it lx b ly na mb nb me nc mi nd mm ne mq mw mx my mz bi translated">通过升级网络接口或安装额外的接口来提高网络吞吐量。</li><li id="2091" class="mr ms it lx b ly na mb nb me nc mi nd mm ne mq mw mx my mz bi translated">通过增加RAM来减少I/O操作。</li></ul><p id="78de" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">垂直扩展对于小型系统来说是一个很好的选择，可以负担得起硬件升级，但是它也有严重的局限性，如下所示。</p><ul class=""><li id="2c28" class="mr ms it lx b ly lz mb mc me mt mi mu mm mv mq mw mx my mz bi translated"><em class="lg">不可能给单个服务器增加无限的能力</em>。这主要取决于操作系统和服务器的内存总线宽度。</li><li id="56f7" class="mr ms it lx b ly na mb nb me nc mi nd mm ne mq mw mx my mz bi translated">当我们为系统升级RAM时，我们必须关闭服务器，因此，<em class="lg">如果系统只有一台服务器，停机是不可避免的</em>。</li><li id="e433" class="mr ms it lx b ly na mb nb me nc mi nd mm ne mq mw mx my mz bi translated">功能强大的机器通常比流行的硬件贵得多。</li></ul><p id="d42d" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">纵向扩展不仅适用于硬件，也适用于软件，例如，它包括优化查询和应用程序代码。</p><blockquote class="om"><p id="1135" class="on oo it bd op oq or os ot ou ov mq dk translated">相比之下，缩减指的是从现有服务器中移除现有资源，如CPU、内存和磁盘。</p></blockquote><h2 id="5727" class="la lb it bd ng oc pe dn nk oe pf dp no me pg oh nq mi ph oj ns mm pi ol nu iz bi translated">你需要一台以上的服务器吗？</h2><p id="59b7" class="pw-post-body-paragraph lv lw it lx b ly nw kd ma mb nx kg md me ny mg mh mi nz mk ml mm oa mo mp mq im bi translated">随着用户数量的增长，一台服务器永远不够用。我们需要考虑将一台服务器分离成多台服务器。</p><figure class="kr ks kt ku gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi ob"><img src="../Images/b6c1ce9b4a3d9317e54204cc7d2332fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qOD0QEDwOC-hMcIC0YCxfA.png"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk translated">随着用户数量的增长，一台服务器是远远不够的</figcaption></figure><p id="430d" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">使用这种架构，有如下一些优点。</p><ul class=""><li id="9344" class="mr ms it lx b ly lz mb mc me mt mi mu mm mv mq mw mx my mz bi translated">web服务器的调优方式可以不同于数据库服务器。</li><li id="3d6c" class="mr ms it lx b ly na mb nb me nc mi nd mm ne mq mw mx my mz bi translated">web服务器需要更好的CPU，而数据库服务器需要更多的RAM。</li><li id="aab3" class="mr ms it lx b ly na mb nb me nc mi nd mm ne mq mw mx my mz bi translated">对web层和数据层使用单独的服务器允许它们彼此独立地伸缩。</li></ul><h2 id="36c2" class="la lb it bd ng oc od dn nk oe of dp no me og oh nq mi oi oj ns mm ok ol nu iz bi translated">横向扩展:添加任意数量的硬件和软件实体</h2><p id="61a7" class="pw-post-body-paragraph lv lw it lx b ly nw kd ma mb nx kg md me ny mg mh mi nz mk ml mm oa mo mp mq im bi translated">它也被描述为“T1”，我们向我们的资源池中添加更多的实体(机器、服务)。实现水平扩展比垂直扩展更难，因为我们需要在构建系统之前考虑它。</p><p id="b9b5" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">水平扩展通常最初成本更高，因为我们需要更多的服务器来满足最基本的需求，但在后期会有回报。我们需要做权衡。</p><ul class=""><li id="449c" class="mr ms it lx b ly lz mb mc me mt mi mu mm mv mq mw mx my mz bi translated">增加服务器数量意味着需要维护更多的资源。</li><li id="1d16" class="mr ms it lx b ly na mb nb me nc mi nd mm ne mq mw mx my mz bi translated">系统的代码也需要修改，以允许并行性和在多个服务器之间分配工作。</li></ul><blockquote class="om"><p id="3720" class="on oo it bd op oq pj pk pl pm pn mq dk translated">相反，扩展指的是移除现有服务器的过程。</p></blockquote><h2 id="7683" class="la lb it bd ng oc pe dn nk oe pf dp no me pg oh nq mi ph oj ns mm pi ol nu iz bi translated">使用负载平衡器来平衡所有节点的流量</h2><p id="cc79" class="pw-post-body-paragraph lv lw it lx b ly nw kd ma mb nx kg md me ny mg mh mi nz mk ml mm oa mo mp mq im bi translated">负载平衡器是一种专门的硬件或软件组件，<em class="lg">帮助将流量分散到服务器集群中，以提高系统的响应能力和可用性</em>(包括但不限于应用程序、网站或数据库)。</p><figure class="kr ks kt ku gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi ob"><img src="../Images/e877529c60ec5b7150f40f11726730bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UZ-IzTDvZQacr61IyFbV5g.png"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk translated">使用负载平衡器来平衡所有节点的流量</figcaption></figure><p id="fd34" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">通常，负载平衡器位于<code class="fe pb pc pd kw b">client</code>和<code class="fe pb pc pd kw b">server</code>之间，接受传入的网络和应用流量，并使用各种算法在多个后端服务器之间分配流量。所以，它也可以用在各种地方，比如说；Web服务器和数据库服务器之间以及客户端和Web服务器之间。</p><pre class="kr ks kt ku gt kv kw kx ky aw kz bi"><span id="4662" class="la lb it kw b gy lc ld l le lf">HAProxy and NGINX are two popular open-source load balancing software.</span></pre><p id="6b41" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">负载平衡器技术是一种容错保证方法，可通过以下方式提高可用性。</p><ul class=""><li id="21dc" class="mr ms it lx b ly lz mb mc me mt mi mu mm mv mq mw mx my mz bi translated">如果服务器1脱机，所有流量都将被路由到服务器2和服务器3。网站不会下线。您还需要向服务器池中添加一个新的健康服务器来平衡负载。</li><li id="60d7" class="mr ms it lx b ly na mb nb me nc mi nd mm ne mq mw mx my mz bi translated">当流量快速增长时，您只需向web服务器池中添加更多服务器，负载平衡器就会为您路由流量。</li></ul><p id="b86e" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">负载平衡器采用各种策略和工作分配算法来优化负载分配，如下所示。</p><ul class=""><li id="554b" class="mr ms it lx b ly lz mb mc me mt mi mu mm mv mq mw mx my mz bi translated"><strong class="lx jd"> <em class="lg">循环调度</em> </strong>:在这种情况下，每个服务器按照类似于先进先出(FIFO)的顺序接收请求。</li><li id="5390" class="mr ms it lx b ly na mb nb me nc mi nd mm ne mq mw mx my mz bi translated"><strong class="lx jd"> <em class="lg">最少连接数</em> </strong>:连接数最少的服务器将被定向到请求。</li><li id="25e5" class="mr ms it lx b ly na mb nb me nc mi nd mm ne mq mw mx my mz bi translated"><strong class="lx jd"> <em class="lg">最快响应时间</em> </strong>:响应时间最快(最近或经常)的服务器将被定向到该请求。</li><li id="a08d" class="mr ms it lx b ly na mb nb me nc mi nd mm ne mq mw mx my mz bi translated"><strong class="lx jd"> <em class="lg">加权</em> </strong>:较强大的服务器会比较弱的服务器收到更多的请求，采用非加权策略。</li><li id="b34e" class="mr ms it lx b ly na mb nb me nc mi nd mm ne mq mw mx my mz bi translated"><strong class="lx jd"> <em class="lg"> IP Hash: </em> </strong>在这种情况下，计算客户端IP地址的Hash，将请求重定向到服务器。</li></ul><p id="f4dd" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">在多个服务器之间平衡请求的最直接的方法是使用硬件设备。</p><ul class=""><li id="9046" class="mr ms it lx b ly lz mb mc me mt mi mu mm mv mq mw mx my mz bi translated">从共享的IP地址中添加和删除真实的服务器是即时发生的。</li><li id="f357" class="mr ms it lx b ly na mb nb me nc mi nd mm ne mq mw mx my mz bi translated">可以根据需要进行负载平衡。</li></ul><p id="b82d" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">软件负载平衡是硬件负载平衡器的廉价替代品。它在第4层(<code class="fe pb pc pd kw b">network layer</code>)和第7层(<code class="fe pb pc pd kw b">application layer</code>)运行。</p><ul class=""><li id="af30" class="mr ms it lx b ly lz mb mc me mt mi mu mm mv mq mw mx my mz bi translated"><strong class="lx jd"> <em class="lg">第四层:</em> </strong>负载均衡器在网络层使用TCP提供的信息。在这一层，它通常不看请求的内容就选择服务器。</li><li id="c97e" class="mr ms it lx b ly na mb nb me nc mi nd mm ne mq mw mx my mz bi translated"><strong class="lx jd"> <em class="lg">第7层:</em> </strong>请求可以基于查询字符串、cookies或我们选择的任何报头中的信息以及包括源地址和目的地址在内的常规层信息来平衡。</li></ul><h1 id="753b" class="nf lb it bd ng nh ni nj nk nl nm nn no ki np kj nq kl nr km ns ko nt kp nu nv bi translated">扩展关系数据库</h1><p id="a60c" class="pw-post-body-paragraph lv lw it lx b ly nw kd ma mb nx kg md me ny mg mh mi nz mk ml mm oa mo mp mq im bi translated">通过一个简单的系统，我们可以使用Oracle或MySQL这样的RDBMS来保存数据项。但是关系数据库系统带来了挑战，尤其是当我们需要扩展它们的时候。</p><p id="a2b3" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">有许多技术可以扩展关系数据库:<code class="fe pb pc pd kw b">master-slave replication</code>、<code class="fe pb pc pd kw b">master-master replication</code>、<code class="fe pb pc pd kw b">federation</code>、<code class="fe pb pc pd kw b">sharding</code>、<code class="fe pb pc pd kw b">denormalization</code>和<code class="fe pb pc pd kw b">SQL tuning</code>。</p><ul class=""><li id="0f3c" class="mr ms it lx b ly lz mb mc me mt mi mu mm mv mq mw mx my mz bi translated"><strong class="lx jd"> <em class="lg">复制</em> </strong>通常指的是一种技术，它允许我们在不同的机器上存储相同数据的多个副本。</li><li id="5869" class="mr ms it lx b ly na mb nb me nc mi nd mm ne mq mw mx my mz bi translated"><strong class="lx jd"> <em class="lg">联邦</em> </strong>(或功能分区)按功能拆分数据库。</li><li id="ae44" class="mr ms it lx b ly na mb nb me nc mi nd mm ne mq mw mx my mz bi translated"><strong class="lx jd"> <em class="lg">分片</em> </strong>是一种与分区相关的数据库架构模式，通过将数据的不同部分放在不同的服务器上，不同的用户将访问数据集的不同部分</li><li id="1c22" class="mr ms it lx b ly na mb nb me nc mi nd mm ne mq mw mx my mz bi translated"><strong class="lx jd">..</strong></li><li id="3e0e" class="mr ms it lx b ly na mb nb me nc mi nd mm ne mq mw mx my mz bi translated"><strong class="lx jd">T27】SQL调优T29】。</strong></li></ul><h2 id="4c5a" class="la lb it bd ng oc od dn nk oe of dp no me og oh nq mi oi oj ns mm ok ol nu iz bi translated"><strong class="ak">主从复制</strong></h2><p id="cb3d" class="pw-post-body-paragraph lv lw it lx b ly nw kd ma mb nx kg md me ny mg mh mi nz mk ml mm oa mo mp mq im bi translated">主从复制技术允许将一个数据库服务器(主服务器)中的数据复制到一个或多个其他数据库服务器(从服务器)，如下图所示。</p><figure class="kr ks kt ku gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi ob"><img src="../Images/f527c3303686f148747e740c862ba874.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jqwAdhsKz2cQXCD5p3aM_g.png"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk translated">对主服务器进行的所有更新</figcaption></figure><ul class=""><li id="8627" class="mr ms it lx b ly lz mb mc me mt mi mu mm mv mq mw mx my mz bi translated">客户端将连接到主服务器并更新数据。</li><li id="a7e4" class="mr ms it lx b ly na mb nb me nc mi nd mm ne mq mw mx my mz bi translated">然后，数据将在从服务器中传播，直到所有数据在服务器中保持一致。</li></ul><p id="3450" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">实际上，这里仍然有一点瓶颈。</p><ul class=""><li id="89b8" class="mr ms it lx b ly lz mb mc me mt mi mu mm mv mq mw mx my mz bi translated">如果主服务器由于某种原因关闭，数据仍然可以通过从服务器获得，但是不可能进行新的写入。</li><li id="5a92" class="mr ms it lx b ly na mb nb me nc mi nd mm ne mq mw mx my mz bi translated">我们需要一个额外的算法来将从设备提升为主设备。</li></ul><p id="b3ad" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">以下是实现只有一台服务器可以处理更新请求的一些解决方案。</p><ul class=""><li id="983f" class="mr ms it lx b ly lz mb mc me mt mi mu mm mv mq mw mx my mz bi translated"><strong class="lx jd"> <em class="lg">同步解决方案</em> </strong>:数据修改事务直到被所有服务器接受后才提交(分布式事务)，因此在故障转移时不会丢失数据。</li><li id="ae1d" class="mr ms it lx b ly na mb nb me nc mi nd mm ne mq mw mx my mz bi translated"><strong class="lx jd"> <em class="lg">异步解决方案</em> </strong> <em class="lg"> : </em>提交- &gt;延迟- &gt;传播到集群中的其他服务器，因此一些数据更新可能会在故障转移时丢失。</li></ul><p id="15a5" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">请记住，如果同步解决方案太慢，请改用异步解决方案。</p><h2 id="b8de" class="la lb it bd ng oc od dn nk oe of dp no me og oh nq mi oi oj ns mm ok ol nu iz bi translated"><strong class="ak">主-主复制</strong></h2><p id="c445" class="pw-post-body-paragraph lv lw it lx b ly nw kd ma mb nx kg md me ny mg mh mi nz mk ml mm oa mo mp mq im bi translated">每个数据库服务器都可以充当主服务器，同时其他服务器也被视为主服务器。在某个时间点，所有主服务器同步，以确保它们都有正确的最新数据。</p><figure class="kr ks kt ku gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi ob"><img src="../Images/610c8bf07755c10864ff4ac9be466226.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZxE-GuE2V8D1CPgrt3aCyg.png"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk translated">所有节点读取和写入所有数据</figcaption></figure><p id="33cd" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">以下是主-主复制的一些优点。</p><ul class=""><li id="6179" class="mr ms it lx b ly lz mb mc me mt mi mu mm mv mq mw mx my mz bi translated">如果一个主服务器出现故障，其他数据库服务器可以正常运行，并接替备用服务器。当数据库服务器重新联机时，它将使用复制赶上进度。</li><li id="61ab" class="mr ms it lx b ly na mb nb me nc mi nd mm ne mq mw mx my mz bi translated">主设备可以位于几个物理站点，并且可以分布在网络中。</li><li id="756c" class="mr ms it lx b ly na mb nb me nc mi nd mm ne mq mw mx my mz bi translated">受限于主服务器处理更新的能力。</li></ul><h2 id="ffc7" class="la lb it bd ng oc od dn nk oe of dp no me og oh nq mi oi oj ns mm ok ol nu iz bi translated"><strong class="ak">联合会</strong></h2><p id="b8dd" class="pw-post-body-paragraph lv lw it lx b ly nw kd ma mb nx kg md me ny mg mh mi nz mk ml mm oa mo mp mq im bi translated">联邦(或功能分区)按功能分割数据库。例如，您可以有三个数据库，而不是一个单一的整体数据库:论坛、用户和产品，这样可以减少每个数据库的读写流量，从而减少复制延迟。</p><figure class="kr ks kt ku gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi ob"><img src="../Images/8516a1c0529cddbdbcdc96878bf8de30.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ISy_gtwkY9CWCFKQuf3bHA.png"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk translated">联邦按功能分割数据库</figcaption></figure><p id="b264" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">较小的数据库会产生更多可以放入内存的数据，这反过来又会由于缓存局部性的提高而导致更多的缓存命中。由于没有单个中央主机序列化写入，您可以并行写入，从而提高吞吐量。</p><h2 id="3360" class="la lb it bd ng oc od dn nk oe of dp no me og oh nq mi oi oj ns mm ok ol nu iz bi translated"><strong class="ak">分片</strong></h2><p id="3847" class="pw-post-body-paragraph lv lw it lx b ly nw kd ma mb nx kg md me ny mg mh mi nz mk ml mm oa mo mp mq im bi translated">分片(也称为<em class="lg">数据分区</em>)是一种将大型数据库分割成许多较小部分的技术，这样每个数据库只能管理数据的一个子集。</p><p id="8745" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">在理想情况下，我们有不同的用户与不同的数据库节点对话。它有助于提高系统的可管理性、性能、可用性和负载平衡。</p><ul class=""><li id="b8af" class="mr ms it lx b ly lz mb mc me mt mi mu mm mv mq mw mx my mz bi translated">每个用户只需与一台服务器通话，就能从该服务器获得快速响应。</li><li id="bf4e" class="mr ms it lx b ly na mb nb me nc mi nd mm ne mq mw mx my mz bi translated">负载在服务器之间平衡得很好——例如，如果我们有五台服务器，每台服务器只需处理20%的负载。</li></ul><p id="b079" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">实际上，有许多不同的技术可以将一个数据库分成多个更小的部分。</p><p id="937e" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated"><strong class="lx jd">水平分区</strong></p><p id="a827" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">在这种技术中，我们将不同的行放入不同的表中。例如，如果我们在一个表中存储用户的配置文件，我们可以决定将id小于1000的用户存储在一个表中，而将id大于1001且小于2000的用户存储在另一个表中</p><figure class="kr ks kt ku gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi ob"><img src="../Images/8c51e2a8934d2a67a63d1621c8992506.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*toqrsVPKK_oQ_oOVoEuEUg.png"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk translated">我们将不同的行放入不同的表中</figcaption></figure><p id="e141" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated"><strong class="lx jd">垂直分区</strong></p><p id="3a01" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">在这种情况下，我们将数据进行划分，将与特定特性相关的表存储在各自的服务器中。例如，如果我们正在构建一个类似Instagram的系统，我们需要在其中存储与用户、他们上传的照片和他们关注的人相关的数据，我们可以决定将用户资料信息放在一个DB服务器上，将朋友列表放在另一个服务器上，将照片放在第三个服务器上。</p><figure class="kr ks kt ku gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi ob"><img src="../Images/8947c0fdc53994747939484f0113a958.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D-965B3oT0gECnn8I7mjXg.png"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk translated">我们对数据进行划分，将与特定功能相关的表存储在各自的服务器中</figcaption></figure><p id="9d9f" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated"><strong class="lx jd">基于目录的分区</strong></p><p id="f068" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">解决这个问题的一个松散耦合的方法是创建一个查找服务，它知道您当前的分区模式，并保存每个实体的映射以及它存储在哪个数据库片上。</p><p id="ae63" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">当数据存储可能需要扩展到单个存储节点可用的资源之外，或者需要通过减少数据存储中的争用来提高性能时，我们可以使用这种方法。但是请记住，分片技术存在如下一些常见问题。</p><ul class=""><li id="80b1" class="mr ms it lx b ly lz mb mc me mt mi mu mm mv mq mw mx my mz bi translated">数据库<code class="fe pb pc pd kw b">joins</code>变得更加昂贵，在某些情况下不可行。</li><li id="6deb" class="mr ms it lx b ly na mb nb me nc mi nd mm ne mq mw mx my mz bi translated">分片会损害数据库引用<code class="fe pb pc pd kw b">integrity</code>。</li><li id="3220" class="mr ms it lx b ly na mb nb me nc mi nd mm ne mq mw mx my mz bi translated">数据库<code class="fe pb pc pd kw b">schema</code>的改变会变得极其昂贵。</li><li id="76d7" class="mr ms it lx b ly na mb nb me nc mi nd mm ne mq mw mx my mz bi translated">数据<code class="fe pb pc pd kw b">distribution</code>不统一，碎片上有很多负载。</li></ul><h2 id="dc3a" class="la lb it bd ng oc od dn nk oe of dp no me og oh nq mi oi oj ns mm ok ol nu iz bi translated"><strong class="ak">反规格化</strong></h2><p id="72e5" class="pw-post-body-paragraph lv lw it lx b ly nw kd ma mb nx kg md me ny mg mh mi nz mk ml mm oa mo mp mq im bi translated">反规范化试图以牺牲一些写性能为代价来提高读性能。数据的冗余副本被写入多个表中，以避免代价高昂的连接。</p><pre class="kr ks kt ku gt kv kw kx ky aw kz bi"><span id="b4fd" class="la lb it kw b gy lc ld l le lf">Once data becomes distributed with techniques such as federation and sharding, managing joins across data centers further increases complexity. Denormalization might circumvent the need for such complex joins.</span></pre><p id="a128" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">在大多数系统中，读取远远超过写入，比例为100:1，甚至1000:1。导致复杂数据库连接的读取可能非常昂贵，在磁盘操作上花费大量时间。</p><p id="df57" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">一些RDBMS如PostgreSQL和Oracle支持物化视图，物化视图处理存储冗余信息和保持冗余副本一致的工作。</p><p id="bc1d" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">Facebook的Ryan Mack在他的优秀文章中分享了相当多的Timeline自己的实现故事:<em class="lg">构建Timeline:通过使用反规范化的力量扩大规模以把握你的生活story⁶ </em>。</p><h1 id="97db" class="nf lb it bd ng nh ni nj nk nl nm nn no ki np kj nq kl nr km ns ko nt kp nu nv bi translated">使用哪个数据库？</h1><p id="529d" class="pw-post-body-paragraph lv lw it lx b ly nw kd ma mb nx kg md me ny mg mh mi nz mk ml mm oa mo mp mq im bi translated">在数据库领域，有两种主要的解决方案:SQL和NoSQL。两者的不同之处在于它们的构建方式、存储的信息种类以及使用的存储方法。</p><p id="0cb2" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated"><strong class="lx jd"> SQL </strong></p><p id="559c" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">关系数据库以行和列的形式存储数据。每行包含一个实体的所有信息，每列包含所有单独的数据点。</p><p id="e110" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">一些最流行的关系数据库是MySQL、Oracle、MS SQL Server、SQLite、Postgres和MariaDB。</p><h2 id="7dc4" class="la lb it bd ng oc od dn nk oe of dp no me og oh nq mi oi oj ns mm ok ol nu iz bi translated">NoSQL</h2><p id="1bae" class="pw-post-body-paragraph lv lw it lx b ly nw kd ma mb nx kg md me ny mg mh mi nz mk ml mm oa mo mp mq im bi translated">它也被称为非关系数据库。这些数据库通常分为五大类:键值、图形、列、文档和Blob存储。</p><p id="3079" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated"><strong class="lx jd">键值存储</strong></p><p id="a7ad" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">数据存储在一个键值对数组中。“<code class="fe pb pc pd kw b">key</code>”是一个链接到“<code class="fe pb pc pd kw b">value</code>”的属性名。</p><p id="3f5a" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">著名的键值存储包括Redis、伏地魔和迪纳摩。</p><p id="ed0a" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated"><strong class="lx jd">文档数据库</strong></p><p id="3d12" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">在这些数据库中，数据存储在文档中(而不是表中的行和列),这些文档在集合中组合在一起。每个文档可以有完全不同的结构。</p><p id="89bc" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">文档数据库包括CouchDB和MongoDB。</p><p id="a6b8" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated"><strong class="lx jd">宽列数据库</strong></p><p id="d289" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">在列式数据库中，我们用列族代替“表”，列族是行的容器。与关系数据库不同，我们不需要预先知道所有的列，每行也不需要有相同数量的列。</p><p id="aa90" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">列数据库最适合分析大型数据集，大牌包括Cassandra和HBase。</p><p id="14d9" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated"><strong class="lx jd">图形数据库</strong></p><p id="6f9e" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">这些数据库用于存储数据，这些数据的关系最好用图形来表示。数据保存在具有节点(实体)、属性(关于实体的信息)和线(实体之间的连接)的图形结构中。</p><p id="d255" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">图形数据库的例子包括Neo4J和InfiniteGraph。</p><p id="dd5a" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated"><strong class="lx jd">斑点数据库</strong></p><p id="2ea9" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">Blob更像是文件的键/值存储，通过亚马逊S3、Windows Azure Blob Storage、谷歌云存储、Rackspace Cloud Files或OpenStack Swift等API进行访问。</p><h2 id="df35" class="la lb it bd ng oc od dn nk oe of dp no me og oh nq mi oi oj ns mm ok ol nu iz bi translated">如何选择使用哪个数据库？</h2><pre class="kr ks kt ku gt kv kw kx ky aw kz bi"><span id="cc00" class="la lb it kw b gy lc ld l le lf">When it comes to database technology, there’s no one-size-fits-all solution. That’s why many businesses rely on both SQL and NosQL databases for different needs. </span></pre><p id="89b1" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">看我下面指导！</p><figure class="kr ks kt ku gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi ob"><img src="../Images/6608c56b22a5e03933f239a133efe78f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Mj2LqJrr-Xh3lyl3UskHQA.png"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk translated">使用哪个数据库？</figcaption></figure><h2 id="8d6d" class="la lb it bd ng oc od dn nk oe of dp no me og oh nq mi oi oj ns mm ok ol nu iz bi translated">水平扩展web层</h2><p id="f2b7" class="pw-post-body-paragraph lv lw it lx b ly nw kd ma mb nx kg md me ny mg mh mi nz mk ml mm oa mo mp mq im bi translated">我们已经扩展了数据层，现在我们还需要扩展web层。为此，我们需要通过将用户会话(状态)数据存储在关系数据库或NoSQL等数据库中，将它们移出web层。它也被称为无状态架构。</p><figure class="kr ks kt ku gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi ob"><img src="../Images/c765dda433cceb98cf97e7ed46997f51.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DPmfJe9lPPaix6uC_EqD8Q.png"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk translated">无状态系统很简单</figcaption></figure><pre class="kr ks kt ku gt kv kw kx ky aw kz bi"><span id="62c1" class="la lb it kw b gy lc ld l le lf">Don't use stateful architecture. <br/>We must choose stateless architecture whenever possible because the implementation of state limits scalability, decreases availability, and increase the cost.</span></pre><p id="b1d6" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">在上面的场景中，负载均衡器可以实现最高的效率，因为它可以选择任何服务器来实现最佳的请求处理。</p><h1 id="c450" class="nf lb it bd ng nh ni nj nk nl nm nn no ki np kj nq kl nr km ns ko nt kp nu nv bi translated">高级概念</h1><h2 id="ec11" class="la lb it bd ng oc od dn nk oe of dp no me og oh nq mi oi oj ns mm ok ol nu iz bi translated">贮藏</h2><p id="37ae" class="pw-post-body-paragraph lv lw it lx b ly nw kd ma mb nx kg md me ny mg mh mi nz mk ml mm oa mo mp mq im bi translated">负载平衡有助于您在数量不断增加的服务器之间进行水平扩展，但是缓存将使您能够更好地利用现有资源，以便在后续请求中更快地提供数据。</p><figure class="kr ks kt ku gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi ob"><img src="../Images/889f16be0b3dfbf45b83f1cf75ff8351.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ua7DootBbkjh8dKm3lxrhg.png"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk translated">如果数据不在缓存中，从数据库中获取，然后保存到缓存中并从中读取</figcaption></figure><p id="ccfc" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">通过在服务器上添加缓存，我们可以避免直接从服务器上读取网页或数据，从而减少响应时间和服务器上的负载。这有助于使我们的应用程序更具伸缩性。</p><p id="9ee7" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">缓存可以应用于许多层，如数据库层、web服务器层和网络层。</p><h2 id="c20d" class="la lb it bd ng oc od dn nk oe of dp no me og oh nq mi oi oj ns mm ok ol nu iz bi translated">内容交付网络(CDN)</h2><p id="6677" class="pw-post-body-paragraph lv lw it lx b ly nw kd ma mb nx kg md me ny mg mh mi nz mk ml mm oa mo mp mq im bi translated">CDN服务器保存内容(例如图像、网页等)的缓存副本。)并从最近的位置为他们服务。</p><p id="e759" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">CDN的使用缩短了用户的页面加载时间，因为数据是在离它最近的位置检索的。这也有助于提高内容的可用性，因为内容存储在多个位置。</p><figure class="kr ks kt ku gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi ob"><img src="../Images/aff57a98782eb705b8b14270429f7519.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YdWdRmUOAT6uN7Gs2gsfGw.png"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk translated">CDN的使用缩短了用户的页面加载时间，因为数据是在离它最近的位置检索的</figcaption></figure><p id="5c48" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">CDN服务器向我们的Web服务器发出请求，以验证缓存的内容，并在需要时进行更新。缓存的内容通常是静态的，如HTML页面、图像、JavaScript文件、CSS文件等。</p><h2 id="6128" class="la lb it bd ng oc od dn nk oe of dp no me og oh nq mi oi oj ns mm ok ol nu iz bi translated">走向全球</h2><p id="ab1f" class="pw-post-body-paragraph lv lw it lx b ly nw kd ma mb nx kg md me ny mg mh mi nz mk ml mm oa mo mp mq im bi translated">当你的应用程序走向全球时，你将拥有并运营世界各地的数据中心，以保持你的产品每周7天、每天24小时运行。基于GeoDNS，传入的请求被路由到“最佳”数据中心。</p><figure class="kr ks kt ku gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi po"><img src="../Images/7c44a77af5ae0e0d189f0037a9beb31c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xCizub9BeG41cbsRqIzqHw.png"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk translated">当你的应用走向全球</figcaption></figure><p id="fc00" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">GeoDNS是一种DNS服务，允许根据客户的位置将域名解析为IP地址。从亚洲连接的客户端可能会获得与从欧洲连接的客户端不同的IP地址。</p><h1 id="9316" class="nf lb it bd ng nh ni nj nk nl nm nn no ki np kj nq kl nr km ns ko nt kp nu nv bi translated">把所有的放在一起</h1><p id="3f03" class="pw-post-body-paragraph lv lw it lx b ly nw kd ma mb nx kg md me ny mg mh mi nz mk ml mm oa mo mp mq im bi translated">反复应用所有这些技术，我们可以轻松地将系统扩展到超过1亿用户，如无状态架构、应用负载平衡器、尽可能多地使用缓存数据、支持多个数据中心、在CDN上托管静态资产、通过分片扩展您的数据层。等。</p><figure class="kr ks kt ku gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi ob"><img src="../Images/37386b15f04d5a4317d4ca32f2aad920.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1kk4onc-nalDvx-LRjGhZw.png"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk translated">缩放是一个迭代过程</figcaption></figure><h1 id="647c" class="nf lb it bd ng nh ni nj nk nl nm nn no ki np kj nq kl nr km ns ko nt kp nu nv bi translated">后面会讨论哪些话题？</h1><p id="81e2" class="pw-post-body-paragraph lv lw it lx b ly nw kd ma mb nx kg md me ny mg mh mi nz mk ml mm oa mo mp mq im bi translated">有许多方法可以提高可伸缩性和高性能，如下所示。</p><ul class=""><li id="3200" class="mr ms it lx b ly lz mb mc me mt mi mu mm mv mq mw mx my mz bi translated">结合分片和复制技术。</li><li id="d980" class="mr ms it lx b ly na mb nb me nc mi nd mm ne mq mw mx my mz bi translated">长轮询vs Websockets vs服务器发送事件。</li><li id="1c40" class="mr ms it lx b ly na mb nb me nc mi nd mm ne mq mw mx my mz bi translated">索引和代理。</li><li id="404c" class="mr ms it lx b ly na mb nb me nc mi nd mm ne mq mw mx my mz bi translated">SQL优化。</li><li id="b3e4" class="mr ms it lx b ly na mb nb me nc mi nd mm ne mq mw mx my mz bi translated">弹性计算。</li></ul><p id="53ab" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">很简单，对吧？</p><p id="d3f7" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">在Medium上关注我，了解我的最新文章，如下所示。</p><div class="pp pq gp gr pr ps"><a rel="noopener  ugc nofollow" target="_blank" href="/top-10-github-repos-every-developer-must-know-9da14292e284"><div class="pt ab fo"><div class="pu ab pv cl cj pw"><h2 class="bd jd gy z fp px fr fs py fu fw jc bi translated">每个开发者都必须知道的前20+ Github Repos</h2><div class="pz l"><h3 class="bd b gy z fp px fr fs py fu fw dk translated">加速你成为程序员的道路</h3></div><div class="qa l"><p class="bd b dl z fp px fr fs py fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="qb l"><div class="qc l qd qe qf qb qg lo ps"/></div></div></a></div><div class="pp pq gp gr pr ps"><a rel="noopener  ugc nofollow" target="_blank" href="/software-architecture-the-important-architectural-patterns-you-need-to-know-a1f5ea7e4e3d"><div class="pt ab fo"><div class="pu ab pv cl cj pw"><h2 class="bd jd gy z fp px fr fs py fu fw jc bi translated">软件架构:你需要知道的最重要的架构模式</h2><div class="pz l"><h3 class="bd b gy z fp px fr fs py fu fw dk translated">解释常见的不同架构模式</h3></div><div class="qa l"><p class="bd b dl z fp px fr fs py fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="qb l"><div class="qh l qd qe qf qb qg lo ps"/></div></div></a></div><div class="pp pq gp gr pr ps"><a href="https://towardsdatascience.com/how-did-i-classify-50-chart-types-by-purpose-a6b0aa5b812d" rel="noopener follow" target="_blank"><div class="pt ab fo"><div class="pu ab pv cl cj pw"><h2 class="bd jd gy z fp px fr fs py fu fw jc bi translated">我是如何根据目的对50种图表类型进行分类的？</h2><div class="pz l"><h3 class="bd b gy z fp px fr fs py fu fw dk translated">可视化的目的是洞察力，而不是图片</h3></div><div class="qa l"><p class="bd b dl z fp px fr fs py fu fw dk translated">towardsdatascience.com</p></div></div><div class="qb l"><div class="qi l qd qe qf qb qg lo ps"/></div></div></a></div><div class="pp pq gp gr pr ps"><a href="https://medium.com/geekculture/how-do-tech-giants-design-and-implement-a-distributed-id-generator-bd618803035f" rel="noopener follow" target="_blank"><div class="pt ab fo"><div class="pu ab pv cl cj pw"><h2 class="bd jd gy z fp px fr fs py fu fw jc bi translated">科技巨头是如何设计和实现分布式ID生成器的</h2><div class="pz l"><h3 class="bd b gy z fp px fr fs py fu fw dk translated">由于现在太多的系统从小型到大型都需要唯一的全局标识符，这是一项重要的任务…</h3></div><div class="qa l"><p class="bd b dl z fp px fr fs py fu fw dk translated">medium.com</p></div></div><div class="qb l"><div class="qj l qd qe qf qb qg lo ps"/></div></div></a></div></div><div class="ab cl qk ql hx qm" role="separator"><span class="qn bw bk qo qp qq"/><span class="qn bw bk qo qp qq"/><span class="qn bw bk qo qp"/></div><div class="im in io ip iq"><h1 id="29d7" class="nf lb it bd ng nh qr nj nk nl qs nn no ki qt kj nq kl qu km ns ko qv kp nu nv bi translated">参考</h1><p id="a3d2" class="pw-post-body-paragraph lv lw it lx b ly nw kd ma mb nx kg md me ny mg mh mi nz mk ml mm oa mo mp mq im bi translated">[1]https://httpd.apache.org<a class="ae lu" href="https://httpd.apache.org" rel="noopener ugc nofollow" target="_blank"/></p><p id="c545" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">[2]http://tomcat.apache.org<a class="ae lu" href="http://tomcat.apache.org" rel="noopener ugc nofollow" target="_blank"/></p><p id="962f" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">[3]<a class="ae lu" href="https://www.oracle.com/database/" rel="noopener ugc nofollow" target="_blank">https://www.oracle.com/database/</a></p><p id="f914" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated"><a class="ae lu" href="https://www.mysql.com" rel="noopener ugc nofollow" target="_blank">https://www.mysql.com</a></p><p id="e622" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated"><a class="ae lu" href="https://en.wikipedia.org/wiki/Domain_Name_System" rel="noopener ugc nofollow" target="_blank">https://en.wikipedia.org/wiki/Domain_Name_System</a></p><p id="4980" class="pw-post-body-paragraph lv lw it lx b ly lz kd ma mb mc kg md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">[6]<a class="ae lu" href="https://www.facebook.com/note.php?note_id=10150468255628920" rel="noopener ugc nofollow" target="_blank">https://www.facebook.com/note.php?note_id=10150468255628920</a></p></div><div class="ab cl qk ql hx qm" role="separator"><span class="qn bw bk qo qp qq"/><span class="qn bw bk qo qp qq"/><span class="qn bw bk qo qp"/></div><div class="im in io ip iq"><h1 id="7e0f" class="nf lb it bd ng nh qr nj nk nl qs nn no ki qt kj nq kl qu km ns ko qv kp nu nv bi translated">分级编码</h1><p id="9489" class="pw-post-body-paragraph lv lw it lx b ly nw kd ma mb nx kg md me ny mg mh mi nz mk ml mm oa mo mp mq im bi translated">感谢您成为我们社区的一员！升级正在改变技术招聘。<a class="ae lu" href="https://jobs.levelup.dev/talent" rel="noopener ugc nofollow" target="_blank"> <strong class="lx jd">在最好的公司找到你的完美工作</strong></a><strong class="lx jd"/>。</p><div class="pp pq gp gr pr ps"><a href="https://jobs.levelup.dev/talent" rel="noopener  ugc nofollow" target="_blank"><div class="pt ab fo"><div class="pu ab pv cl cj pw"><h2 class="bd jd gy z fp px fr fs py fu fw jc bi translated">提升——改变招聘流程</h2><div class="pz l"><h3 class="bd b gy z fp px fr fs py fu fw dk translated">🔥让软件工程师找到他们热爱的完美角色🧠寻找人才是最痛苦的部分…</h3></div><div class="qa l"><p class="bd b dl z fp px fr fs py fu fw dk translated">作业. levelup.dev</p></div></div><div class="qb l"><div class="qw l qd qe qf qb qg lo ps"/></div></div></a></div></div></div>    
</body>
</html>