<html>
<head>
<title>Improve UX With the Skeleton Component in React and Material-UI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用React和Material-UI中的骨架组件改进UX</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/improve-ux-with-the-skeleton-component-in-react-and-material-ui-c0b14a446f26?source=collection_archive---------2-----------------------#2021-05-25">https://levelup.gitconnected.com/improve-ux-with-the-skeleton-component-in-react-and-material-ui-c0b14a446f26?source=collection_archive---------2-----------------------#2021-05-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="795d" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在加载数据之前显示内容的占位符预览</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/db70ec097be3b2982b75fae38a54f41c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-R7dM4GbA0r79J-p"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">马修·施瓦茨在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="83dc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Spinners和loader是显示内容正在被加载的传统方式。然而，为了改善用户体验，骨架在现代开发中被更多地使用。</p><p id="1179" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">什么是骨架？框架是一个UI组件，它在数据加载之前显示内容的占位符预览。骨架通过减少加载时的挫折提供了更好的用户体验。用户将看到内容的占位符预览，而不是盯着空白的屏幕或旋转器。</p><p id="6e55" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我们将了解以下内容:</p><ul class=""><li id="2bfa" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">Material-UI中的骨架组件是什么</li><li id="1441" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">我们如何在React应用程序中使用框架组件</li></ul></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="d1af" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">反应骨架成分</h1><p id="458f" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">材质界面中的<a class="ae ky" href="https://material-ui.com/components/skeleton/" rel="noopener ugc nofollow" target="_blank">骨骼</a>组件仍然是实验室的一部分。因此，为了使用它，我们需要安装Material-UI核心包和Material-UI实验室包。</p><pre class="kj kk kl km gt nn no np nq aw nr bi"><span id="67da" class="ns mr it no b gy nt nu l nv nw">// with npm<br/>npm install @material-ui/core @material-ui/lab</span><span id="32af" class="ns mr it no b gy nx nu l nv nw">// with yarn<br/>yarn add @material-ui/core @material-ui/lab</span></pre><h2 id="7123" class="ns mr it bd ms ny nz dn mw oa ob dp na li oc od nc lm oe of ne lq og oh ng oi bi translated">形状</h2><p id="9923" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">骨架组件有3种变体，<em class="oj">‘文本’</em>，<em class="oj">‘圆形’</em>，以及<em class="oj">‘矩形’</em>。我们可以通过向变量属性传递一个值来显示不同形状的骨架组件。</p><pre class="kj kk kl km gt nn no np nq aw nr bi"><span id="b7d9" class="ns mr it no b gy nt nu l nv nw">&lt;Skeleton variant="text" /&gt;<br/>&lt;Skeleton variant="circle" width={100} height={100} /&gt;<br/>&lt;Skeleton variant="rect" width={200} height={100} /&gt;</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/3e4fb93646a02f6d1230f4ef370b2fc8.png" data-original-src="https://miro.medium.com/v2/resize:fit:438/format:webp/1*G8TA6VdpCIDJpR3L-u9cyQ.png"/></div></figure><h2 id="ad7a" class="ns mr it bd ms ny nz dn mw oa ob dp na li oc od nc lm oe of ne lq og oh ng oi bi translated">动画片</h2><p id="f7c1" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">骨架组件也有一个动画道具。默认情况下，它将被设置为<em class="oj">‘脉动’。</em>您也可以将其更改为<em class="oj">‘wave’</em>，或者将其设置为<em class="oj">‘false’</em>将其禁用。</p><pre class="kj kk kl km gt nn no np nq aw nr bi"><span id="1042" class="ns mr it no b gy nt nu l nv nw">&lt;Skeleton variant="rect" width={200} height={100} /&gt;<br/>&lt;Skeleton variant="rect" width={200} height={100} animation={false} /&gt;<br/>&lt;Skeleton variant="rect" width={200} height={100} animation="wave" /&gt;</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/b4aac1a0112ebcd0d1cea79079eded21.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*fi8dXJjqeYVpuZfExvdzRg.gif"/></div></figure><h2 id="aca6" class="ns mr it bd ms ny nz dn mw oa ob dp na li oc od nc lm oe of ne lq og oh ng oi bi translated">作为子组件传递</h2><p id="e969" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">您可以通过将骨架作为子组件传递来推断其高度和宽度。例如，如果我们使用骨架作为排版组件的子组件，骨架的高度将由排版变体的高度来推断。</p><pre class="kj kk kl km gt nn no np nq aw nr bi"><span id="ab42" class="ns mr it no b gy nt nu l nv nw">&lt;Typography variant="h1"&gt;<br/>  &lt;Skeleton /&gt;<br/>&lt;/Typography&gt;<br/>&lt;Typography variant="h4"&gt;<br/>  &lt;Skeleton /&gt;<br/>&lt;/Typography&gt;<br/>&lt;Typography variant="body1"&gt;<br/>  &lt;Skeleton /&gt;<br/>&lt;/Typography&gt;</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi om"><img src="../Images/032ff99029d183302a760d86acb8058e.png" data-original-src="https://miro.medium.com/v2/resize:fit:836/format:webp/1*sbp66pVBdQvorSQvG2BOow.png"/></div></figure><h2 id="b65d" class="ns mr it bd ms ny nz dn mw oa ob dp na li oc od nc lm oe of ne lq og oh ng oi bi translated">传递子组件</h2><p id="d89e" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">也可以将子组件传递给骨架来推断尺寸。在下面的示例中，骨架上没有设置高度或宽度。化身组件具有默认的高度和宽度设置。所以骨架推断出这个高度和宽度。</p><pre class="kj kk kl km gt nn no np nq aw nr bi"><span id="71a2" class="ns mr it no b gy nt nu l nv nw">&lt;Skeleton variant="circle"&gt;<br/>  &lt;Avatar /&gt;<br/>&lt;/Skeleton&gt;</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi on"><img src="../Images/0eb87347d933a110b776903d243e8304.png" data-original-src="https://miro.medium.com/v2/resize:fit:128/format:webp/1*5m2C2a5wwijUw577OofW_g.png"/></div></figure><h1 id="6b7f" class="mq mr it bd ms mt oo mv mw mx op mz na jz oq ka nc kc or kd ne kf os kg ng nh bi translated">如何使用骨架组件的示例</h1><p id="ee5b" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">既然我们已经有了基础，让我们学习如何在一个真实的例子中使用它。在Material-UI <a class="ae ky" href="https://material-ui.com/components/skeleton/" rel="noopener ugc nofollow" target="_blank">文档</a>中，有很多使用骨架制作卡片组件的例子。因此，在我们的例子中，让我们通过创建一个表来改变事情。</p><p id="b5b8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该示例来自Material-UI中表格文档的<a class="ae ky" href="https://gist.github.com/chadmuro/aefad27cd235b79a68e6cfb21e561b2a" rel="noopener ugc nofollow" target="_blank">定制表格</a>部分。我们将创建如下表格:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ot"><img src="../Images/712c979079c1ab25075d578cb78488b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cR6wvVSvt5IQL_A8QjsCnA.png"/></div></div></figure><p id="29ed" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">表头包括<strong class="lb iu">姓名</strong>、<strong class="lb iu">用户名</strong>、<strong class="lb iu">电子邮件</strong>和<strong class="lb iu">电话</strong>栏。表体包含用户数据。我们还将每隔一行的行样式设置为浅灰色。</p><p id="33ef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这个组件中，我们将有两个状态:一个数组<code class="fe ou ov ow no b">users</code>，和一个布尔值来确定<code class="fe ou ov ow no b">loading</code>状态。</p><pre class="kj kk kl km gt nn no np nq aw nr bi"><span id="c914" class="ns mr it no b gy nt nu l nv nw">const [users, setUsers] = useState([]);<br/>const [loading, setLoading] = useState(true);</span></pre><p id="5b88" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将从JSON占位符中获取一个用户列表。</p><p id="4ebb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在一个<code class="fe ou ov ow no b">useEffect</code>钩子中使用fetch添加一个get请求。收到响应后，将响应数据设置到<code class="fe ou ov ow no b">users</code>数组，并将<code class="fe ou ov ow no b">loading</code>设置为假。</p><pre class="kj kk kl km gt nn no np nq aw nr bi"><span id="1de7" class="ns mr it no b gy nt nu l nv nw">useEffect(() =&gt; {<br/>  fetch('https://jsonplaceholder.typicode.com/users')<br/>    .then(<em class="oj">response</em> =&gt; response.json())<br/>    .then(<em class="oj">data</em> =&gt; {<br/>      setUsers(data);<br/>      setLoading(false);<br/>    });<br/>}, []);</span></pre><p id="f969" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我们的表体中，我们将根据<code class="fe ou ov ow no b">loading</code>和<code class="fe ou ov ow no b">users</code>的状态来决定渲染什么。如果<code class="fe ou ov ow no b">loading</code>为真，我们想要呈现一个十行表格的框架。下面的代码将生成一个包含十个项目的数组，我们可以通过映射来显示十行骨架:</p><pre class="kj kk kl km gt nn no np nq aw nr bi"><span id="97ab" class="ns mr it no b gy nt nu l nv nw">const skeletonArray = Array(10).fill('');</span></pre><p id="1bea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，我们将使用骨架组件作为<code class="fe ou ov ow no b">StyledTableCell</code>的子组件。</p><pre class="kj kk kl km gt nn no np nq aw nr bi"><span id="577f" class="ns mr it no b gy nt nu l nv nw">{loading &amp;&amp;<br/>  skeletonArray.map((<em class="oj">item</em>, <em class="oj">index</em>) =&gt; (<br/>    &lt;StyledTableRow key={index}&gt;<br/>      &lt;StyledTableCell component="th" scope="row"&gt;<br/>        &lt;Skeleton /&gt;<br/>      &lt;/StyledTableCell&gt;<br/>      &lt;StyledTableCell align="right"&gt;<br/>        &lt;Skeleton /&gt;<br/>      &lt;/StyledTableCell&gt;<br/>      &lt;StyledTableCell align="right"&gt;<br/>        &lt;Skeleton /&gt;<br/>      &lt;/StyledTableCell&gt;<br/>      &lt;StyledTableCell align="right"&gt;<br/>        &lt;Skeleton /&gt;<br/>      &lt;/StyledTableCell&gt;<br/>    &lt;/StyledTableRow&gt;<br/>))}</span></pre><p id="dd88" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦数据加载完毕，我们希望映射到<code class="fe ou ov ow no b">users</code>数组上，并在一行中显示数据。</p><pre class="kj kk kl km gt nn no np nq aw nr bi"><span id="4e87" class="ns mr it no b gy nt nu l nv nw">{users &amp;&amp;<br/>  users.map(<em class="oj">user</em> =&gt; (<br/>   &lt;StyledTableRow key={user.id}&gt;<br/>     &lt;StyledTableCell component="th" scope="row"&gt;<br/>        {user.name}<br/>      &lt;/StyledTableCell&gt;<br/>      &lt;StyledTableCell align="right"&gt;<br/>        {user.username}<br/>      &lt;/StyledTableCell&gt;<br/>      &lt;StyledTableCell align="right"&gt;<br/>        {user.email}<br/>      &lt;/StyledTableCell&gt;<br/>      &lt;StyledTableCell align="right"&gt;<br/>        {user.phone}<br/>      &lt;/StyledTableCell&gt;<br/>    &lt;/StyledTableRow&gt;<br/>))}</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/f7b675e44b036410057193fae970dfbc.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*I-C3MKrZnoK1_e45GdfBqQ.gif"/></div></figure><p id="19cb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如您所见，当数据仍在加载时，骨架组件正在被渲染。这看起来是不是比传统的旋转器或加载器好很多，或者更糟，一个空白屏幕？</p><p id="c873" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下代码片段显示了该表的完整源代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ox oy l"/></div></figure></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h1 id="8f25" class="mq mr it bd ms mt mu mv mw mx my mz na jz nb ka nc kc nd kd ne kf nf kg ng nh bi translated">结论</h1><p id="cc52" class="pw-post-body-paragraph kz la it lb b lc ni ju le lf nj jx lh li nk lk ll lm nl lo lp lq nm ls lt lu im bi translated">感谢阅读！我希望这篇文章对你开始使用Material-UI中的骨架组件有所帮助。</p><p id="55b4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在React中处理骨骼时，还有一些其他流行的库。您也可以查看<a class="ae ky" href="https://www.npmjs.com/package/react-content-loader" rel="noopener ugc nofollow" target="_blank">反应内容加载器</a>或<a class="ae ky" href="https://www.npmjs.com/package/react-loading-skeleton" rel="noopener ugc nofollow" target="_blank">反应加载框架</a>。</p><p id="9b23" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">无论您选择哪个选项，请考虑在您的下一个项目中使用框架来改善用户体验。</p><p id="32fb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您想了解关于另一个Material-UI组件的更多信息，请查看下面的文章。</p><div class="oz pa gp gr pb pc"><a href="https://medium.com/geekculture/what-really-happens-when-you-use-the-textfield-component-in-material-ui-1e62652196f" rel="noopener follow" target="_blank"><div class="pd ab fo"><div class="pe ab pf cl cj pg"><h2 class="bd iu gy z fp ph fr fs pi fu fw is bi translated">在Material-UI中使用TextField组件时，实际会发生什么？</h2><div class="pj l"><h3 class="bd b gy z fp ph fr fs pi fu fw dk translated">让我们更深入地调查一下</h3></div><div class="pk l"><p class="bd b dl z fp ph fr fs pi fu fw dk translated">medium.com</p></div></div><div class="pl l"><div class="pm l pn po pp pl pq ks pc"/></div></div></a></div></div></div>    
</body>
</html>