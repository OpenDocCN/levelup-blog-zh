<html>
<head>
<title>Android One-row Home Widget Tips</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Android单行主页小工具提示</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/android-one-row-home-widget-tips-811d8920a67d?source=collection_archive---------8-----------------------#2020-07-24">https://levelup.gitconnected.com/android-one-row-home-widget-tips-811d8920a67d?source=collection_archive---------8-----------------------#2020-07-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/6dc089fd137ba632b5c78b8b206c661a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*eYHKxk0Z0QoYv1gU"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">罗斯·乔伊纳在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="c5b9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">大家好，我想分享一下我在开发android widget时的经历。这篇文章将以故事的形式出现。随意跳入<a class="ae kc" href="#6383" rel="noopener ugc nofollow">TL；DR部分</a>如果你想直接去我的一行android home小工具上的提示。</p><p id="6659" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你现在有一个很好的应用程序，已经被成千上万的用户下载了。你的用户开始问他们是否能为你的应用程序获得一个插件。您快速开发了小部件，您的用户也很高兴。因为你听他们的歌，所以他们给你甜蜜的5颗星。然而，更多的要求来了。他们认为你的应用程序的小工具占用了太多的屏幕空间。你坐下来看你的应用。把这个部件做成一排不会有太多问题，48小时后你会对自己做错了什么感到困惑。</p><p id="4124" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们开始看看来自谷歌的关于android widget大小的官方指南。它说我们需要保守的高度和宽度的部件。让我们把建议放在桌面上。我们从appwidget-provider上的<strong class="kf ir"> 40dp和布局上的<strong class="kf ir"> 40dp开始。</strong>这是一个非常简单的hello world小部件布局的完整代码:</strong></p><figure class="lb lc ld le gt jr"><div class="bz fp l di"><div class="lf lg l"/></div></figure><p id="20e7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我们在几个不同屏幕尺寸的android设备上运行代码时，结果是:</p><figure class="lb lc ld le gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lh"><img src="../Images/551dc33de3d877b924e63c9ae7c5ea0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JvWPOIsyP64r0vGBZe7xZg.png"/></div></div></figure><p id="309b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">好吧，官方文件似乎是正确的。所有设备都显示单行小工具。然而，我们的hello world缺少“world”。实际上不是，因为世界因为新冠肺炎而暂停了(原谅我的双关语)。我想让我们把小部件的高度做得更高一些。让我们为appwidget-provider和布局设置<strong class="kf ir"> 80dp，它看起来像这样:</strong></p><figure class="lb lc ld le gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi li"><img src="../Images/192429b60c227bb218aa44c19a593f94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2NU3UujOcPLMMLJ6cpvW-w.png"/></div></div></figure><p id="5c27" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你感到困惑，请举手。中心的小部件大小和正确的设备是预期的。因为一行是40dp(基于官方文件)，所以如果我写80dp，它将是两行。然而，左边的设备仍然有一个单行小部件。为什么？</p><p id="22e2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">左边的设备是android nexus 7，右边的设备是nexus。这两款设备的像素密度都被归类为xhdpi。然而，他们每个人都有不同的高度。Nexus 7高度1920dp而Nexus只有1280dp。它们都有5排。正如我们可以看到的，nexus 7上的一行比nexus上的一行高，因此小工具的结果不同。</p><p id="4be3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">另一个问题是设备中间(像素3 xl)和右边的小工具的高度。两者上的widget高度几乎都是一行。我们能把它们排成一排吗？我们可能有一个问题，在小部件下面产生了那些空白空间。</p><p id="d71f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">好吧，让我们试试另一个不同的高度。这次让我们在appwidget-provider上设置4 <strong class="kf ir"> 0dp，在布局上设置80dp。</strong>结果将如下所示:</p><figure class="lb lc ld le gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi li"><img src="../Images/739570fd91f0f0bff34b6dfbee327426.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j6pZMhj_o0S-l3hZh4oNoA.png"/></div></div></figure><p id="cdde" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">中间和左边的设备现在是一排。但是，右边的设备在小部件上有垂直滚动条。根据这个实验我们可以得出结论。</p><p id="6383" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">TL；博士</strong></p><p id="b7a0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir"> appwidget-provider </strong>上的<strong class="kf ir"> minHeight </strong>是widget始终停留在一行<strong class="kf ir"> 40dp </strong>的关键。但是，小部件布局的高度不需要与最小高度相同。</p><p id="0ca6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">小部件的高度没有确切的公式。这取决于你的应用的设备目标。如果你包括更小的设备，那么你需要按照android官方文档的指示，对小部件本身的高度非常保守。</p><p id="1566" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">根据我的经验<strong class="kf ir">如果你想覆盖更小的设备，60dp </strong>是你可以放置的最大布局高度。如果你放得太多，那么就有垂直滚动出现的风险。不然可以放<strong class="kf ir"> 40dp </strong> - <strong class="kf ir"> 80dp </strong>(我更喜欢50dp) <strong class="kf ir">。</strong>它将使大多数设备显示一行，但在较小的设备上将显示两行。</p><p id="c9fa" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">感谢您的阅读。如果你有问题，请告诉我。</p><blockquote class="lj lk ll"><p id="bcea" class="kd ke lm kf b kg kh ki kj kk kl km kn ln kp kq kr lo kt ku kv lp kx ky kz la ij bi translated">分享是关心和爱你的邻居，就像爱你自己一样。</p></blockquote></div></div>    
</body>
</html>