<html>
<head>
<title>Dynamic Theming using Angular Material</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用角形材料的动态主题</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/dynamic-theming-using-angular-material-c0b7dc7a12d4?source=collection_archive---------2-----------------------#2021-04-26">https://levelup.gitconnected.com/dynamic-theming-using-angular-material-c0b7dc7a12d4?source=collection_archive---------2-----------------------#2021-04-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/c9764799bed35c6b98a9ec0f006ec0db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*stOukK_jMBWA84pcesjWMg.jpeg"/></div></div></figure><p id="ff90" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">不久前，我在做一个项目，在UI中使用Angular，在UI组件中使用Angular材质。这让我想到——如果我允许用户为应用程序选择一个亮或暗的主题会怎么样？</p><h1 id="fea0" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">首先:创建应用程序</h1><p id="d90c" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated"><em class="lz">如果您的应用已经创建，请跳过这一部分</em></p><p id="eda8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你知道该怎么做。要创建应用程序，请在终端中运行<code class="fe ma mb mc md b">ng new</code>命令。在执行应用程序创建过程之前，Angular CLI会问您几个问题，最后一个问题是要使用的样式表格式。因为我们需要使用<code class="fe ma mb mc md b">mixins</code>(稍后会详细介绍)，所以选择SCSS。</p><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi me"><img src="../Images/b480936d877889ec2a31799cb9b06121.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RGsOyB7-kA1NUKhIdFiLXg.png"/></div></div><figcaption class="mj mk gj gh gi ml mm bd b be z dk translated">选择SCSS作为样式表格式</figcaption></figure><p id="9639" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">完成后，Angular CLI将继续创建应用程序。</p><h1 id="09eb" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">将角形材料添加到项目中</h1><p id="56a9" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">由于我们使用Angular Material作为UI组件库，我们需要首先将它添加到项目中。为此，浏览到项目目录并运行以下命令</p><pre class="mf mg mh mi gt mn md mo mp aw mq bi"><span id="c0ec" class="mr kx iq md b gy ms mt l mu mv">ng add @angular/material</span></pre><p id="7590" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">CLI再次为您提供了一个提示列表。随意回答你想要的任何选项。</p><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/3f0aebeb26a7cc64361a5b91c3ca8ece.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VNJNvvQJP3liQ9z1rz4MdA.png"/></div></div><figcaption class="mj mk gj gh gi ml mm bd b be z dk translated"><code class="fe ma mb mc md b">ng add @angular/material</code></figcaption></figure><h1 id="10e7" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">现在，真正的交易</h1><p id="92d0" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">让我们看看如何在应用程序中实现动态主题化。为此，我们将使用<code class="fe ma mb mc md b">mixins</code>的概念，首先根据Angular Material提供的主题自定义主题。</p><figure class="mf mg mh mi gt jr"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="b4d2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">好吧，那里发生了很多事。让我们详细地看看这一切，了解这是怎么回事。</p><p id="fc53" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">首先我们进口<code class="fe ma mb mc md b">~@angular/material/theming</code>，包含<code class="fe ma mb mc md b">mat-core()</code>。这是为了让所有默认的材料设计风格复制到我们定义的主题。</p><p id="ada8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Nest，我们为主题定义调色板。根据Angular Material的方案，我们需要一种原色和一种强调色。为了定义主题的主色和强调色，我们使用了<code class="fe ma mb mc md b">mat-palette</code>方法。正如你所看到的，建议为强调色定义多种色调。一旦定义了颜色，我们就定义了主题本身，因为这是灯光主题，我们使用<code class="fe ma mb mc md b">mat-light-theme</code>方法来定义主题。最后，我们使用<code class="fe ma mb mc md b">include</code>将主题添加到应用程序中。</p><p id="8cb7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">一旦设置了默认主题，我们就定义了替换主题，在我们的例子中是黑暗主题。这里唯一的主要区别是我们在一个类中使用了<code class="fe ma mb mc md b">include</code>，我称之为<code class="fe ma mb mc md b">dark-theme</code>。我们这样做是为了只有当<code class="fe ma mb mc md b">dark</code>类被应用到应用程序时，黑暗主题才被应用。</p><p id="7ab4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在幕后，<code class="fe ma mb mc md b">mat-light-theme</code>和<code class="fe ma mb mc md b">mat-dark-theme</code>方法控制UI元素的颜色——例如，当使用<code class="fe ma mb mc md b">mat-light-theme</code>时，<code class="fe ma mb mc md b">mat-card</code>组件将为白色，而当使用<code class="fe ma mb mc md b">mat-dark-theme</code>时，它将为深灰色。</p><p id="3927" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">除了覆盖组件的主题化，比如<code class="fe ma mb mc md b">mat-dialog</code>、<code class="fe ma mb mc md b">mat-snackbar</code>等，这应该可以处理大部分的事情。为此，我们需要在模块级别设置应用程序主题，如下所示:</p><figure class="mf mg mh mi gt jr"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="04f5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">注意，我们已经静态地硬编码了主题名称。我们将在后面的步骤中使其动态化。</p><h1 id="c1bb" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated"><code class="fe ma mb mc md b">theme service</code></h1><p id="9028" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">既然样式和主题已经就绪，我们需要创建一个服务来控制应用程序主题。为什么是服务？因为它符合我们的要求——与组件不同，只创建了一个服务实例，这意味着我们对主题有一个中央控制。让我们使用Angular CLI来创建服务。浏览到项目目录并运行以下命令:</p><pre class="mf mg mh mi gt mn md mo mp aw mq bi"><span id="bac4" class="mr kx iq md b gy ms mt l mu mv">ng g s theme </span></pre><p id="d300" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">向服务中添加以下代码</p><figure class="mf mg mh mi gt jr"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="cab7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如您所见，我们已经用我们的主题名称声明了一个enum，这样我们就不必冒着拼写错误的风险一遍又一遍地拼写它。接下来，我们声明一个变量，其中存储了当前主题(<code class="fe ma mb mc md b">currentTheme</code>)和一个<a class="ae mz" href="https://rxjs-dev.firebaseapp.com/guide/subject" rel="noopener ugc nofollow" target="_blank">主题</a>，该主题将在当前主题发生变化(<code class="fe ma mb mc md b">currentThemeSubject</code>)时发出。接下来，我们声明两个方法——一个用于切换主题(<code class="fe ma mb mc md b">toggleTheme</code>)，另一个用于将主题subject作为应用程序可以监听的<a class="ae mz" href="https://rxjs-dev.firebaseapp.com/guide/observable" rel="noopener ugc nofollow" target="_blank">可观察对象</a>)返回(<code class="fe ma mb mc md b">getTheme</code>)。</p><p id="b650" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如前所述，现在我们必须使模块上的主题动态化。为此，对我们之前添加的代码进行以下更新。</p><figure class="mf mg mh mi gt jr"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="a86f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在我们唯一能做的就是。对应用程序有条件地应用黑暗主题。为此，我们转到App组件。我们首先向<code class="fe ma mb mc md b">app.component.ts</code>添加必要的代码。</p><figure class="mf mg mh mi gt jr"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="7f3f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在<code class="fe ma mb mc md b">app.component.html</code>文件中，我们在所有内容周围添加了一个包装div。</p><figure class="mf mg mh mi gt jr"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="d7d8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">就是这样。现在你应该有一个动态主题的Angular应用程序，主题颜色由你自定义。你现在需要做的就是添加某种控件，比如说，一个允许你切换主题的切换按钮，你可以将它连接到主题服务中的<code class="fe ma mb mc md b">toggleTheme</code>方法。</p><p id="5470" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我希望你喜欢这个故事，并且比你开始读这个故事的时候聪明一点。</p></div><div class="ab cl na nb hu nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="ij ik il im in"><blockquote class="nh"><p id="202c" class="ni nj iq bd nk nl nm nn no np nq kv dk translated">有兴趣和我就这个故事或Angular、Typescript和Javascript进行一对一的交谈吗？前往<a class="ae mz" href="https://www.hiretheauthor.com/ashwinSathian" rel="noopener ugc nofollow" target="_blank">雇佣作者</a>，让我们连线！</p></blockquote></div></div>    
</body>
</html>