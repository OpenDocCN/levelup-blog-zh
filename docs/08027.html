<html>
<head>
<title>Motion Layout and Motion Scene</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">运动布局和运动场景</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/motion-layout-and-motion-scene-ecd88e3ad499?source=collection_archive---------6-----------------------#2021-03-29">https://levelup.gitconnected.com/motion-layout-and-motion-scene-ecd88e3ad499?source=collection_archive---------6-----------------------#2021-03-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="4300" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">运动布局是一种帮助您管理视图对象的运动或创建动画的布局。<code class="fe kl km kn ko b">MotionLayout</code>弥合了布局过渡和复杂动作处理之间的差距，提供了<a class="ae kp" href="https://developer.android.com/guide/topics/graphics/prop-animation" rel="noopener ugc nofollow" target="_blank">属性动画框架</a>、<code class="fe kl km kn ko b"><a class="ae kp" href="https://developer.android.com/training/transitions" rel="noopener ugc nofollow" target="_blank">TransitionManager</a></code>和<code class="fe kl km kn ko b"><a class="ae kp" href="https://developer.android.com/reference/androidx/coordinatorlayout/widget/CoordinatorLayout" rel="noopener ugc nofollow" target="_blank">CoordinatorLayout</a></code>之间的混合功能。</p><p id="dd4e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在本文中，我将讨论如何通过<em class="kq"> MotionLayout </em> <strong class="jp ir">实现<em class="kq"> CollapsingToolBar </em>行为。</strong>如何创建<em class="kq"> MotionScene </em>以及每个属性的使用。</p><p id="4d68" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你可以使用任何一种简单的运动布局来实现复杂的动画。</p><h1 id="4426" class="kr ks iq bd kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">折叠工具栏垂直/垂直运动布局</h1><p id="c557" class="pw-post-body-paragraph jn jo iq jp b jq lp js jt ju lq jw jx jy lr ka kb kc ls ke kf kg lt ki kj kk ij bi translated"><strong class="jp ir">折叠工具栏:</strong>这是材料设计库的一部分。</p><figure class="lv lw lx ly gt lz gh gi paragraph-image"><div class="gh gi lu"><img src="../Images/92447a0df553cc26e6a2592aaf60d172.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/1*G36sFMry22pVHirNK1hhug.gif"/></div><figcaption class="mc md gj gh gi me mf bd b be z dk translated">什么是应用简介</figcaption></figure><p id="188a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下面是设计这种东西的示例代码:</p><figure class="lv lw lx ly gt lz"><div class="bz fp l di"><div class="mg mh l"/></div></figure><p id="d474" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，如果我们想改变工具栏的颜色并隐藏任何视图，我们必须在类文件中手动编写代码。</p><figure class="lv lw lx ly gt lz"><div class="bz fp l di"><div class="mg mh l"/></div></figure><p id="f8fb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">运行应用程序，当你滚动视图时，它会将工具栏颜色变为绿色，并将大图折叠到工具栏中。</p><p id="7f84" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在让我们使用<em class="kq">运动布局</em>做同样的行为。</p><h1 id="fa75" class="kr ks iq bd kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">运动布局:</h1><p id="144f" class="pw-post-body-paragraph jn jo iq jp b jq lp js jt ju lq jw jx jy lr ka kb kc ls ke kf kg lt ki kj kk ij bi translated">它是约束布局的一部分。</p><figure class="lv lw lx ly gt lz gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/36cfbc228530de514b2a3e7e30dc7e83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*H4vDmivcgIeV_yNZyarNxw.gif"/></div></figure><ol class=""><li id="6476" class="mj mk iq jp b jq jr ju jv jy ml kc mm kg mn kk mo mp mq mr bi translated"><strong class="jp ir">添加</strong> <code class="fe kl km kn ko b"><strong class="jp ir">ConstraintLayout</strong></code> <strong class="jp ir">依赖:</strong>在你的build.gradle文件中添加Constraint 2.0，支持运动布局。</li></ol><figure class="lv lw lx ly gt lz"><div class="bz fp l di"><div class="mg mh l"/></div></figure><p id="7c51" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2.<strong class="jp ir">创建一个</strong> <code class="fe kl km kn ko b"><strong class="jp ir">MotionLayout</strong></code> <strong class="jp ir">文件:</strong></p><figure class="lv lw lx ly gt lz"><div class="bz fp l di"><div class="mg mh l"/></div></figure><p id="d3ac" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">将父布局从ConstraintLayout替换为MotionLayout，所有属性将保持不变。在我们的布局XML文件中，我们将为我们希望在动画开始前看到的初始屏幕编写代码。</p><p id="3a54" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">3.<strong class="jp ir">创建一个运动场景:</strong>在之前的运动布局XML文件中我们有一个属性<code class="fe kl km kn ko b">app:layoutDescription</code>，我们在那里添加了运动场景文件。</p><figure class="lv lw lx ly gt lz"><div class="bz fp l di"><div class="mg mh l"/></div></figure><figure class="lv lw lx ly gt lz gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi ms"><img src="../Images/dc932a4ea96096ee4e5696a6050bd0c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*run6eC5JQupUfIG1Q90W5w.png"/></div></div><figcaption class="mc md gj gh gi me mf bd b be z dk translated">运动场景文件的路径</figcaption></figure><ul class=""><li id="69a5" class="mj mk iq jp b jq jr ju jv jy ml kc mm kg mn kk mx mp mq mr bi translated"><strong class="jp ir"> ConstraintSet </strong>:在这个部分，我们定义一个布局的约束，比如宽度、高度和对齐。在本例中,<code class="fe kl km kn ko b">app:layout_constraintEnd_toEndOf=”parent”, app:layout_constraintStart_toStartOf=”parent”, app:layout_constraintTop_toTopOf=”parent”</code>属性正在改变。</li><li id="5d3f" class="mj mk iq jp b jq my ju mz jy na kc nb kg nc kk mx mp mq mr bi translated"><strong class="jp ir">转换</strong>:包含运动的基本定义。<code class="fe kl km kn ko b">motion:constraintSetStart</code>和<code class="fe kl km kn ko b">motion:constraintSetEnd</code>是运动的起点和终点。正如你在关于文件中看到的<code class="fe kl km kn ko b">motion:constraintSetStart</code>包含了id<code class="fe kl km kn ko b">&lt;ConstraintSet android:id=”@+id/expand”&gt;</code>，这意味着它是动画的开始状态。<code class="fe kl km kn ko b">motion:constraintSetEnd</code>包含了<code class="fe kl km kn ko b">&lt;ConstraintSet android:id=”@+id/collapsed”&gt;</code>的id，这意味着当你滚动布局时，它会选择这个布局状态。还有一个属性<code class="fe kl km kn ko b">motion:duration</code>指定运动完成所需的毫秒数。</li><li id="631c" class="mj mk iq jp b jq my ju mz jy na kc nb kg nc kk mx mp mq mr bi translated"><strong class="jp ir"> OnSwipe </strong>:可以通过触摸来控制动作。<br/> <code class="fe kl km kn ko b">motion:touchAnchorId</code>指可以滑动拖动的视图。<br/> <code class="fe kl km kn ko b">motion:touchAnchorSide</code>表示我们从各自的侧面拖动视图。<br/>的<code class="fe kl km kn ko b">motion:dragDirection</code>指的是<em class="kq">前进方向的</em>拖动。例如，<code class="fe kl km kn ko b">motion:dragDirection="dragUp"</code>表示进度随着您向上拖动而增加。</li><li id="d36b" class="mj mk iq jp b jq my ju mz jy na kc nb kg nc kk mx mp mq mr bi translated"><strong class="jp ir"> CustomAttribute </strong>:我们在<code class="fe kl km kn ko b">Constraint</code>内部使用这个属性。这用于翻译与位置或视图属性无关的属性，如背景颜色、文本大小、文本颜色。</li></ul><pre class="lv lw lx ly gt nd ko ne nf aw ng bi"><span id="c6d6" class="nh ks iq ko b gy ni nj l nk nl">&lt;CustomAttribute<br/>    motion:attributeName="textColor"<br/>    motion:customColorValue="#FFFFFF" /&gt;</span></pre><p id="b401" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您必须提供的另一个属性基于值类型。从以下支持的类型中选择:</p><ul class=""><li id="9ab9" class="mj mk iq jp b jq jr ju jv jy ml kc mm kg mn kk mx mp mq mr bi translated"><code class="fe kl km kn ko b">motion:customColorValue</code>对于颜色</li><li id="9946" class="mj mk iq jp b jq my ju mz jy na kc nb kg nc kk mx mp mq mr bi translated"><code class="fe kl km kn ko b">motion:customIntegerValue</code>为整数</li><li id="dcb2" class="mj mk iq jp b jq my ju mz jy na kc nb kg nc kk mx mp mq mr bi translated"><code class="fe kl km kn ko b">motion:customFloatValue</code>用于浮动</li><li id="74d1" class="mj mk iq jp b jq my ju mz jy na kc nb kg nc kk mx mp mq mr bi translated"><code class="fe kl km kn ko b">motion:customStringValue</code>用于字符串</li><li id="d499" class="mj mk iq jp b jq my ju mz jy na kc nb kg nc kk mx mp mq mr bi translated"><code class="fe kl km kn ko b">motion:customDimension</code>尺寸</li><li id="a9bd" class="mj mk iq jp b jq my ju mz jy na kc nb kg nc kk mx mp mq mr bi translated"><code class="fe kl km kn ko b">motion:customBoolean</code>用于布尔值</li></ul><p id="36ef" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用运动布局，你可以在MotionScene文件中定义所有的动画，我们不需要在类文件中提供任何数据。它使得创建复杂的动画变得容易。</p><p id="96ed" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">它有一些其他插值属性，如缩放，阿尔法，可见性，海拔，旋转，平移。</p><p id="14de" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">感谢您的阅读。👏我希望这篇文章对你有所帮助。如果你有任何反馈，请给我回信，地址是karishma.agr1996@gmail.com。非常感谢你的鼓掌帮助其他人找到这篇文章😃。</p><figure class="lv lw lx ly gt lz gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/8cc9201c589f49c61db3ccfb8c0f87a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/0*gZnKdEUYdsHnLNUp.gif"/></div></figure></div></div>    
</body>
</html>