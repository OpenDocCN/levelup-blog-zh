# 构建用户界面的测试驱动开发

> 原文：<https://levelup.gitconnected.com/test-driven-development-for-building-user-interfaces-ac2f7cf70628>

## 可能吗？是啊！你应该这样做吗？也许吧！

![](img/600b9e1e1fc2b1f7d61202c76508c5ff.png)

TestProject 的 UI 设计人员为本文创建的原创作品

测试驱动开发(TDD)是一种编程范式，在这种范式中，首先编写测试，然后编写源代码。当你写的代码有清晰的输入和输出时，TDD 是完美的，比如纯函数或 API 端点。

但是在构建用户界面的时候呢？UI 开发可以做 TDD 吗？

你马上就会知道了！

在本文中，我们将探讨几个问题:

*   *我们可以用 TDD 来构建 ui 吗？*
*   *如果是的话， ***我们怎么*** 做呢？*
*   *最后，*我们是否应该使用 TDD 来构建 ui？**

# **背景动机**

**当与前端开发人员讨论测试驱动开发时，对话通常是这样的:**

**“是的，TDD 对于简单的功能或后端工作来说很棒，但是对于前端工作来说就没有意义了。当我构建我的 UI 时，我不知道我最终会写什么代码。我不知道我是否会在这里使用`div`或者`span`或者`p`元素。UIs 的 TDD 是不可行的。”**

**然而，我想说的是，使用 TDD 来构建 ui 并没有我们想象的那么难。**

# **TDD 的理想条件**

**理想情况下，当以下两个条件成立时，我们将使用 TDD 来编写代码:**

1.  **我们有明确的项目需求**
2.  **我们有明确的输入和输出**

**如果不满足这两个要求，就很难或者几乎不可能使用 TDD。因此，让我们在前端开发的上下文中检查这两个需求。**

## **明确项目要求**

**当你开发一个新功能时，你通常会得到一个 UX 设计师的模型。这些模型向您展示了该功能的外观和行为。例如，“当用户单击此按钮时，屏幕上会出现一个对话框模式。”**

**好的实体模型将阐明各种细节，例如当处于悬停或聚焦状态时，输入看起来如何，当内容丢失时，空状态看起来如何，以及对于桌面、笔记本电脑和移动屏幕大小，页面布局将如何改变。**

**您可能已经猜到了，模型提供了项目需求！我们确切地知道我们的 UI 应该是什么样子和行为。如果模型中有任何不清楚的地方，工程师应该向他们的 UX 设计师或产品经理提出澄清问题，这样需求就绝对清楚了。**

## **清除输入和输出**

**那么，清晰的输入和输出呢？**

**如今，大多数前端工程师都使用 UI 库或框架，如 React 或 Angular。像 React 这样的 UI 库允许您构建可重用的组件，以创建功能的小构建块，您可以将这些小构建块拼凑成一个应用程序。**

**现在，什么是组件？在 React 中，这是一个函数！组件只是返回 UI 的道具和状态的函数。所以我们有明确的输入和输出！**

**给定相同的道具和状态，组件将总是呈现相同的东西。组件是确定性的，只要它们不像发出 API 请求那样产生副作用，它们就是纯函数。**

# **实际问题**

**所以，理论上，使用 TDD 来构建 ui*应该是可行的*。我们的两个理想条件都满足了。**

**但是未知的呢？如上所述，我们仍然可能不知道一些事情:**

1.  **我们将使用的组件道具和状态**
2.  **我们给方法和函数起的名字**
3.  **我们将使用的 HTML 元素**

**但是我们*确实*知道用户界面应该是什么样子和行为。我认为未知的实现细节实际上并不重要。**

**这种过时的测试实现细节的思维方式很大程度上源于 Airbnb 的测试库[酵素](https://enzymejs.github.io/enzyme/)。Enzyme 允许您深入 React 组件的内部，触发类组件方法，并手动更新组件的属性和状态。**

**然而，这些都不是用户可以做的事情。用户只能通过您提供的界面与您的应用程序进行交互。例如，用户可以点击按钮或填写表单字段。**

**React 测试库的核心理念是我们应该以模拟用户行为的方式编写测试。通过测试用户实际能做什么，我们的测试更少地关注实现细节，更多地关注实际的用户界面，这导致更少的脆弱测试和更可靠的测试套件。**

**这里的关键是，React 测试库通过将焦点从实现细节上移开，实际上方便了使用 TDD 来构建 ui。**

**记住:未知的实现细节并不重要。重要的是 UI 的外观和行为。**

# **想了解更多？**

**如果你想看一个关于我们如何使用 TDD 构建 ui 的深入的真实生活演示，[在这里查看我的后续文章](https://blog.testproject.io/2021/03/23/test-driven-development-for-building-user-interfaces/)。我们将介绍如何将 UX 模型转化为测试用例，如何适应 UI 开发的“红、绿、重构”循环，并看看使用 TDD 构建 UI 到底有多可行。**

**[](https://blog.testproject.io/2021/03/23/test-driven-development-for-building-user-interfaces/) [## 构建用户界面的测试驱动开发| TestProject

### 测试驱动开发，或称 TDD，是一种编程范式，在这种范式中，首先编写测试，然后编写源代码…

blog.testproject.io](https://blog.testproject.io/2021/03/23/test-driven-development-for-building-user-interfaces/) 

编码快乐！** 

# **分级编码**

**感谢您成为我们社区的一员！[订阅我们的 YouTube 频道](https://www.youtube.com/channel/UC3v9kBR_ab4UHXXdknz8Fbg?sub_confirmation=1)或者加入 [**Skilled.dev 编码面试课程**](https://skilled.dev/) 。**

**[](https://skilled.dev) [## 编写面试问题+获得开发工作

### 掌握编码面试的过程

技术开发](https://skilled.dev)**