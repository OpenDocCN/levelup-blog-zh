<html>
<head>
<title>SQL or NoSQL, That is the Question!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">SQL还是NoSQL，这是个问题！</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/sql-or-nosql-that-is-the-question-8557b615e098?source=collection_archive---------15-----------------------#2021-03-28">https://levelup.gitconnected.com/sql-or-nosql-that-is-the-question-8557b615e098?source=collection_archive---------15-----------------------#2021-03-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="5dc0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">理解这两者之间的区别将有助于你的产品取得成功！</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/d384a5616e6666b1d948317ea4eec490.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lwKxKaA9nRsX7ltFny8u1Q.png"/></div></div></figure><p id="45d9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">设计软件产品最重要的方面是决定如何存储数据以及存储在哪里。设计良好的数据库对于保证信息一致性、消除冗余数据、高效执行查询和提高数据库性能至关重要。</p><p id="6a28" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">精心设计数据库可以避免浪费时间和在开发阶段受挫。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="kx ky l"/></div><figcaption class="kz la gj gh gi lb lc bd b be z dk translated">来源:<a class="ae ld" href="https://giphy.com/gifs/10o3Um2U3wa4DK/html5" rel="noopener ugc nofollow" target="_blank">吉菲</a></figcaption></figure><p id="4b3e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你将面临的最重要的问题是这篇文章的标题。如果你做出了正确的选择，你可能不会在发展阶段中途看起来像上面GIF中的乔治。让我们了解一下这两者，为你的项目做出正确的选择！</p><p id="9f67" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">页（page的缩写）s:我们不会讨论什么是SQL &amp; NoSQL的基础知识，因为如果你想决定使用什么类型的数据库，你可能已经对它们有一点了解了。</p><h1 id="870a" class="le lf iq bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">SQL数据库</h1><p id="70bc" class="pw-post-body-paragraph jn jo iq jp b jq mc js jt ju md jw jx jy me ka kb kc mf ke kf kg mg ki kj kk ij bi translated">已经使用过SQL数据库的人可能习惯于将数据存储在类似下面的表中:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/e4bb4acfc1aaf882f5183c31f85a3cb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1240/format:webp/1*rNF6T6hNGJAUfUTkPOzLqQ.png"/></div></figure><p id="d4a0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">每个表都有自己的模式，这意味着表中的每一行都有非常严格的定义。每行可以添加一组特定的列&amp;每一列都有严格的规则来决定应该添加哪种数据类型。考虑到上面的例子，如果您试图向<code class="fe mi mj mk ml b">age</code>列添加一个<code class="fe mi mj mk ml b">string</code>类型，您的数据库会因为您不遵守规则而对您大喊大叫。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/6d20dc248567d0d91cca97367510f500.png" data-original-src="https://miro.medium.com/v2/resize:fit:1240/format:webp/1*ovZhcPv-aFHv4uvfwm_kYA.png"/></div></figure><p id="4f95" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">就SQL数据库而言，规则不是用来打破的。</p><p id="6a35" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">由于这种非常严格的模式，管理员通常会在一个表中存储一种类型的对象(例如“用户”)。如果希望将用户与挂在另一个表中的对象相关联，可以通过定义另一个名为<code class="fe mi mj mk ml b">foreign_key</code>的列来实现，该列包含另一个表中另一个条目的惟一ID。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mm"><img src="../Images/74c049dc7c6ecf7bbb39c167d603344e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7ZbddQ-7amgP6OfSyrKf8A.png"/></div></div></figure><p id="a9c2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们假设我们正在构建一个餐馆评论应用程序。您可能将餐馆放在不同的表中，将评论放在另一个表中&amp;将用户放在另一个表中。</p><p id="d919" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您的餐馆信息屏幕可能需要来自所有三个表的数据来向您的用户显示足够的信息。因此，从包含餐馆外键和用户外键的reviews表中，您可以获得所有3个表的数据！</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mn"><img src="../Images/8c760479b978a6729ae115e23a4a73c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2AKo-UhvQP9sjHPNqrOWeA.png"/></div></div></figure><p id="ad7d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">虽然这看起来像是您需要在后端做的大量工作，但是SQL为您做了所有繁重的工作，让您轻松完成！</p><pre class="km kn ko kp gt mo ml mp mq aw mr bi"><span id="d203" class="ms lf iq ml b gy mt mu l mv mw">SELECT * FROM restaurants, reviews, users WHERE restaurant.id = 345 AND reviews.restaurant_fk = restaurant.id<br/>AND reviews.user_fk = user.id</span></pre><p id="576e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">SQL数据库要求对表中的列有严格的规则。由于表中的行和列之间的这些独特的结构化关系，当您需要ACID遵从性时，SQL数据库是最佳选择。酸代表:</p><ul class=""><li id="3e1c" class="mx my iq jp b jq jr ju jv jy mz kc na kg nb kk nc nd ne nf bi translated">原子性—每个事务要么完全成功，要么完全回滚。</li><li id="8125" class="mx my iq jp b jq ng ju nh jy ni kc nj kg nk kk nc nd ne nf bi translated">一致性—根据所有定义的规则，写入数据库的数据必须有效。</li><li id="9210" class="mx my iq jp b jq ng ju nh jy ni kc nj kg nk kk nc nd ne nf bi translated">隔离—当事务并发运行时，它们不会相互竞争，就好像它们是按顺序运行的一样。</li><li id="d1c5" class="mx my iq jp b jq ng ju nh jy ni kc nj kg nk kk nc nd ne nf bi translated">持久性—一旦事务被提交到数据库，它就被认为是永久的，即使在系统出现故障的情况下。</li></ul><p id="5bfe" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">另一点要考虑的是，SQL是一种流行的编程语言，已经存在了超过45年，所以它非常成熟和著名。它高效地执行查询，并快速检索和编辑数据。它非常轻量级和声明性，因此很容易学习。因此，查询可以由业务分析师和营销人员等技术含量较低的人员来执行。</p><p id="da41" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">但是，如果您的应用程序非常受欢迎，您如何扩展您的SQL数据库呢？</p><p id="c7a8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">SQL数据库是纵向扩展的，这意味着您需要增加单台服务器的容量(增加CPU、RAM或SSD)来扩展您的数据库。SQL数据库被设计为在单个服务器上运行，以保持数据的完整性，因此它们不容易扩展。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/26d5f782a4b9f108354ca6bb9856bd9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:614/format:webp/1*Abaue0XzyvbzxLYuZOg4Lg.png"/></div><figcaption class="kz la gj gh gi lb lc bd b be z dk translated">使用SQL数据库，您可以随着应用的增长不断增加存储、RAM和CPU！</figcaption></figure><p id="d5ae" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，让我们看看NoSQL的数据库！</p><h1 id="5dd9" class="le lf iq bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">NoSQL数据库</h1><p id="bfa2" class="pw-post-body-paragraph jn jo iq jp b jq mc js jt ju md jw jx jy me ka kb kc mf ke kf kg mg ki kj kk ij bi translated">在NoSQL世界，事情有点不同。您的数据不会像我们之前看到的那样存储在单独的表中。通常，NoSQL数据库中的数据存储在big ol' JSON对象中。</p><p id="4a4b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">NoSQL数据库是无模式的！这意味着在数据库中存储什么样的数据没有任何数据库级别的限制。因此，我们的餐馆集合可能有通常的名称、等级等，但是没有数据库级别的规则来控制存储的数据。</p><p id="532f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">很多开发者(包括我！)喜欢使用NoSQL数据库，因为这意味着他们可以根据需要通过添加或更改字段来轻松迭代他们的数据库设计，并且不一定会破坏你的应用程序。</p><p id="b6c5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">例如，如果我们开始添加一个二进制标志来了解某个特定的餐馆是否接受预订，并且我们开始只为新餐馆添加它，我们就不必为其他餐馆填充数据&amp;我们的NoSQL数据库不会崩溃！</p><p id="7cf2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">此外，这种无模式的结构也意味着您可以在集合中存储不是餐馆条目的数据！您还可以扩展您的应用程序以涵盖酒店！</p><p id="c2ec" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">但是，你可能希望在这里小心行事，因为没有办法知道什么数据可以通过你的数据库，你可能希望防御性地编码，特别是在移动客户端上，用户可能不总是使用你的应用程序的最新版本。</p><p id="c68d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">NoSQL数据库的另一个重要方面是(不用猜，就在名字里)，没有SQL！不再有花哨的连接和选择查询，它们会变得非常复杂，让您抓狂。</p><p id="f96a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在NoSQL世界中，如果您想要从3个不同的表中获取数据，就像我们的SQL示例中的表一样，您必须运行3个不同的查询，然后处理数据以获得您想要的结果。但是，这不是默认的前进方式。</p><p id="4f57" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">相反，你会想把你的数据放在你需要的时候可以立刻获取的地方。但也意味着您的数据库中可能有多个位置的重复数据。迷茫？让我们看一下我们的餐馆例子。</p><p id="3535" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">假设我们有一个餐馆收藏和一个评论收藏。用户将首先看到一个餐馆列表，然后用户可以深入查看特定餐馆的评论。到目前为止，我们可以在这里运行两个不同的查询。</p><ol class=""><li id="00a0" class="mx my iq jp b jq jr ju jv jy mz kc na kg nb kk nm nd ne nf bi translated">获取所有餐馆</li><li id="d24f" class="mx my iq jp b jq ng ju nh jy ni kc nj kg nk kk nm nd ne nf bi translated">获取评论的位置<code class="fe mi mj mk ml b">restaurant.id = ‘xyz’</code></li></ol><p id="170f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">但是，如果我们想显示一些关于该评论作者的信息，该怎么办呢？现在变得棘手了。即使您将作者的用户id存储在reviews文档中，数据库也无法自动获取用户信息。</p><p id="6cb4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们可能不得不为某个特定餐馆的每个评论查询用户集合，这似乎是一个低效的想法。</p><p id="d3a2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果我们想要自动获得这些信息，我们可能必须将用户数据复制到每个评审文档中。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nn"><img src="../Images/ffd1ae36f97a7d2029260add40ccba97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wnd6gW2YlBFLYEcCGvjxQg.png"/></div></div></figure><p id="4117" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，如果您来自我们之前讨论过的SQL领域，您可能会紧张不安。</p><p id="2992" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在SQL数据库中，规范化的概念(意味着特定的数据必须存在于数据库中的单一位置)是您首先要学习的东西之一，它有一定的道理。</p><p id="8648" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">假设我们的用户将个人资料图片和姓名复制到每个评论文档中，并且我们的一个用户决定更改他们的个人资料图片。哦，不。现在我们必须浏览每一个评论，并在那里更改个人资料图片，总有一个风险，我们没有在每个地方都更改它，突然我们的数据库有不一致的数据。😢</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nn"><img src="../Images/f0993b36f05028a370c6506419d96bba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VGgkiWN_nnAETOZdTMsxAg.png"/></div></div></figure><p id="28a1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这看起来确实是一个可怕的想法，那么为什么所有的宣传都围绕着NoSQL数据库呢？为什么开发人员要从这个标准化数据的干净世界转移到这个看似混乱的重复数据和可能不一致的数据库的世界？</p><p id="7182" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以，是的，每次用户更改个人资料图片，我们都需要去其他地方更改它。但另一方面，如果我们想要阅读评论，我们可以快速地一次获得所有数据，而无需运行连接和选择查询。</p><p id="30a6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以，如果你认真想想，在一个应用程序中，比如一个餐馆评论应用程序，人们会更多地阅读评论，而不是改变个人资料图片。一个用户可能一年更换一次个人资料照片，但是每天都会有几十个人在我们的应用上阅读餐馆评论。</p><p id="7808" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这种情况下，我们的读取远远超过了写入！因此，针对每天会发生数千次的情况，而不是每月会发生几次的情况，优化您的数据是有意义的。</p><p id="8f20" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">但是，可伸缩性如何呢？好吧，如果我们需要扩展到一个更大的数据库，NoSQL数据库可以很容易地将它们的数据分布到多台机器上，一切都很正常！</p><p id="cfae" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这就是所谓的水平缩放。因此，如果您正在使用像Google Cloud Platform或Amazon Web Services这样的托管云服务，您可以根据需要从数据库中添加或删除服务器，而您只需付出很少的努力。此外，水平扩展意味着几乎没有停机时间</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi no"><img src="../Images/5b9d1543ddf30b9934353db42617f465.png" data-original-src="https://miro.medium.com/v2/resize:fit:1182/format:webp/1*IVYSrLiOUtnDs6eKmi-yBg.png"/></div></figure><p id="67e5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">由于这些原因，越来越多的开发人员正在转向NoSQL数据库，特别是如果他们将使用云解决方案，如谷歌或亚马逊。</p><h1 id="e6bf" class="le lf iq bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">结论</h1><p id="2b4d" class="pw-post-body-paragraph jn jo iq jp b jq mc js jt ju md jw jx jy me ka kb kc mf ke kf kg mg ki kj kk ij bi translated">现在我们已经对SQL和NoSQL数据库有了足够的了解，我们可以最终决定在我们的产品中使用什么。就个人而言，我喜欢NoSQL数据库的简单性和无限制性。此外，在当今以信息为中心的世界中，许多应用程序都是读取密集型的，因此NoSQL可以针对它们进行很好的优化。</p><p id="6c78" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">但最终，这一切都归结为你的产品的需求。花时间选择正确的数据库可以避免以后的许多问题，所以请确保您不会在没有考虑太多的情况下放弃这个选择！</p></div></div>    
</body>
</html>