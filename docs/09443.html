<html>
<head>
<title>What’s Wrong With Your CRUD APIs— Besides Everything?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">除此之外，你的CRUD APIs有什么问题吗？</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/whats-wrong-with-your-crudy-interfaces-besides-everything-bde4f4c8cb8a?source=collection_archive---------1-----------------------#2021-08-11">https://levelup.gitconnected.com/whats-wrong-with-your-crudy-interfaces-besides-everything-bde4f4c8cb8a?source=collection_archive---------1-----------------------#2021-08-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="3791" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">固执己见的观点</h2><div class=""/><div class=""><h2 id="930c" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">所以…我听说你崇拜粗糙的REST接口。</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/a6fd1eaef8bc89d63300cd421b8188d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A-HIbO79ImSNFy8_bkCcLg.jpeg"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">图片由<a class="lh li ep" href="https://medium.com/u/7c7a43b3d9de?source=post_page-----bde4f4c8cb8a--------------------------------" rel="noopener" target="_blank">尼克拉斯·米勒德</a>提供</figcaption></figure><p id="e711" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">许多web开发人员默认以类似CRUD的方式实现REST APIs。他们太专注于坚持武断的、虚构的技术规则，完全忽视了业务和客户。</p><p id="0ead" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">CRUD over REST对于初学开发人员和创建POC来说可能很棒，因为它很容易上手，并且您可以在很大程度上忽略业务领域的某些方面。</p><p id="ea7e" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">好吧……让我马上声明这一点；我(大部分)对休息没有意见。</p><p id="49de" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">有一个关于<a class="ae mf" rel="noopener ugc nofollow" target="_blank" href="/why-are-you-still-creating-crud-apis-8790ca261bfb">开发者如何默认创建基于CRUD的REST API</a>的普遍问题。出于某种原因，开发人员都认为每个资源都必须有一组相似的预定操作。</p><p id="3381" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">但是除了初学者和PoC用例，您真的应该避免创建粗糙的REST APIs。</p><blockquote class="mk"><p id="f445" class="ml mm it bd mn mo mp mq mr ms mt me dk translated">您最后一次从获取、创建、更新或删除资源的角度考虑您的域是什么时候？</p></blockquote><p id="e5a1" class="pw-post-body-paragraph lj lk it ll b lm mu kd lo lp mv kg lr ls mw lu lv lw mx ly lz ma my mc md me im bi translated">我的大部分专业时间都花在构建现代REST API(in。NET)服务于我们的客户，如Stripe、Paysafe和许多其他支付服务提供商(PSP)，我有一段时间注意到类似CRUD的API是如何阻碍系统理解的。</p><p id="b9e8" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">REST(大部分)是可以的，但是当我们试图将CRUD模式应用到面向客户端的接口时，整个事情就崩溃了。</p></div><div class="ab cl mz na hx nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="im in io ip iq"><h2 id="d074" class="ng nh it bd ni nj nk dn nl nm nn dp no ls np nq nr lw ns nt nu ma nv nw nx iz bi translated">让我们花几秒钟来回顾一个典型的、糟糕的界面。</h2><p id="d1c3" class="pw-post-body-paragraph lj lk it ll b lm ny kd lo lp nz kg lr ls oa lu lv lw ob ly lz ma oc mc md me im bi translated">在我讨论CRUDy接口的问题之前，让我演示一种普遍存在的、懒惰的方法来实现REST接口。</p><p id="4027" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">我假设每个人都有使用聊天网络应用程序的经验，所以这就是我们要做的。我们的聊天app超级简单，只支持频道和消息。因此，频道只是一个“消息容器”，任何人都可以通过它发布匿名消息。我们将保持匿名，因为我很懒，不想让用户管理之类的事情过于复杂。</p><p id="2159" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">下面是我们面向客户的粗糙界面。很可怕，对吧？</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi od"><img src="../Images/3017790631873680dad3c6ccf4cb5868.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GYkjpJxIXFwXl69xQVQweg.png"/></div></div></figure><p id="0d35" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">如果你真的想把实体看作文档，就像REST最初设计的那样，那么通道和消息就是两个独立的“文档”，需要它们自己的根端点。</p><p id="33ba" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">铁杆CRUD-boys会告诉我这不是一个好的API，因为我错过了消息<code class="fe mg mh mi mj b">GET</code>操作。但是，完全没有必要这样做，因为孤立地查看单个消息没有意义。</p><p id="36fa" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">另外，请注意，我们遗漏了channels文档中用于访问消息的嵌套资源——有时称为子资源。稍后我将再次讨论这个问题。</p><p id="2cb4" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">这种API组织结构让我想起了许多开发人员表现出的“按类型分类”的坏习惯，在这种情况下，代码一般是按其类型而不是代码所属的特性来组织的。</p><p id="4fd8" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">不管怎样……现在已经解决了这个问题，让我来解释一下为什么粗糙的界面是不受欢迎的。</p><h2 id="6e3f" class="ng nh it bd ni nj nk dn nl nm nn dp no ls np nq nr lw ns nt nu ma nv nw nx iz bi translated">所以，你认为休息是一个标准…</h2><p id="de2b" class="pw-post-body-paragraph lj lk it ll b lm ny kd lo lp nz kg lr ls oa lu lv lw ob ly lz ma oc mc md me im bi translated">很多人把休息称为一种标准——事实并非如此。相反，REST只是一种架构风格，有一组约束，受一些工程指导方针的指导，比如一般性原则。</p><p id="9fe1" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">当然，有一些标准化REST的尝试，但是它们大多是模糊的想法，没有得到太多的关注，比如如何格式化<a class="ae mf" href="https://datatracker.ietf.org/doc/html/draft-kelly-json-hal-08" rel="noopener ugc nofollow" target="_blank"> HATEOAS链接</a>，一个<a class="ae mf" href="https://martinfowler.com/articles/richardsonMaturityModel.html" rel="noopener ugc nofollow" target="_blank"> Richardson成熟度模型</a>等等。</p><p id="370e" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">web开发人员中另一个有趣的话题是，您是否包含子资源的链接，或者它们是否应该有一个独立的“根”？在这一点上，我更倾向于子资源阵营，但我有所保留，因为它很容易失控。</p><p id="7652" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">哦，顺便说一下，任何使用cookies开发web应用程序的人都已经违反了REST原则。</p><h2 id="8899" class="ng nh it bd ni nj nk dn nl nm nn dp no ls np nq nr lw ns nt nu ma nv nw nx iz bi translated">粗糙的接口导致子资源嵌套地狱。</h2><p id="860b" class="pw-post-body-paragraph lj lk it ll b lm ny kd lo lp nz kg lr ls oa lu lv lw ob ly lz ma oc mc md me im bi translated">对，我之前提到过允许子资源很容易失控。现在让我来演示一下。</p><p id="673e" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">如果我们要使用子资源端点，那么我们可以在<code class="fe mg mh mi mj b">api/channels</code>中增加几个端点，如下面的代码片段所示。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi od"><img src="../Images/ca36f0ca1828435d04cd9d17685355b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eo1Dy8YtBNHK5ZKXaCy2GQ.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">子资源端点。</figcaption></figure><p id="ba39" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">现在，我们只需查询提供id的通道根，并导航到<code class="fe mg mh mi mj b">/messages</code>，就可以访问任何给定通道的所有消息。这很容易。</p><p id="3735" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">我对此没有任何异议，除了你必须<em class="oe">知道</em>应用程序遵循哪个REST约定。</p><p id="eacb" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">当在嵌套资源上执行操作时，事情开始变得棘手，比如允许线程——例如，在通道内回复消息。</p><p id="624d" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">你如何着手此事？你提供了另一个嵌套吗，或者这个功能你会放在<code class="fe mg mh mi mj b">/api/messages</code>根中吗？谁知道呢。真的没有标准。</p><p id="d4ce" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">让我们看看那会是什么样子。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi od"><img src="../Images/cb63fe9df4211a9f97c063050409f6eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*V7TuXy8t3ptPO8AW5Pxoww.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">子资源的新功能</figcaption></figure><p id="eab7" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">我已经展示了两个典型的例子，说明人们如何倾向于在嵌套资源上实现操作。</p><p id="528e" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">将它添加到聊天通道资源端点看起来很疯狂。将它添加到聊天消息资源有点打破了我们的模式。这些选项我都不喜欢，但我可能会选择第一个。</p><p id="b06f" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">通常，您会发现API支持这两种选择，从而提供了多种方式来与同一个“资源”进行交互，根据REST的想法，这完全没问题。</p><h2 id="27ea" class="ng nh it bd ni nj nk dn nl nm nn dp no ls np nq nr lw ns nt nu ma nv nw nx iz bi translated">但是等一下，你可能都没有休息…</h2><p id="6959" class="pw-post-body-paragraph lj lk it ll b lm ny kd lo lp nz kg lr ls oa lu lv lw ob ly lz ma oc mc md me im bi translated">我之前提到过HATEOAS，这是我反对CRUDy REST的下一个理由。</p><p id="14d4" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">你的“REST”API可能终究不是<em class="oe">那种</em> restful。不过这个完全看你问谁了(标准就这么多，嗯？).</p><p id="7394" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">想象一下你称之为<code class="fe mg mh mi mj b">GET api/channels/{id}</code>端点。</p><p id="7411" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">你期望得到什么？整个频道包括它包含的所有消息？只有与渠道本身相关的数据？你期待超媒体链接吗？</p><p id="4567" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">假设您获得了如下所示的数据。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi of"><img src="../Images/7335028807a8e26d08593b43651cc684.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T2vJTX1_8h3zn56287X0Eg.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">无休息反应。</figcaption></figure><p id="8644" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">这是明智的回应。但这真的是一种“宁静”的反应吗？</p><p id="2189" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">还是那句话，这取决于你问谁。许多开发人员可能会说不，他们将Richardson成熟度模型的第3级和Fielding的超媒体称为应用程序状态约束的引擎。</p><p id="534b" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">考虑到HATEOAS约束，我们会期待类似这样的结果。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi of"><img src="../Images/25e4b58e81ead4459e443ed5943d5858.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W3aZImOmiO-4RTMkyjr8ow.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">宁静的回应。</figcaption></figure><p id="0779" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">现在，响应中包含的链接有点像锚链接，但却是一种无GUI的方式。在我看来，这太疯狂了。</p><p id="9761" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">幸运的是，从我创建和使用许多不同API的经验来看，我很少遇到任何人在他们的API响应中包含这些链接。</p><h2 id="5b77" class="ng nh it bd ni nj nk dn nl nm nn dp no ls np nq nr lw ns nt nu ma nv nw nx iz bi translated">您的REST APIs非常健谈。</h2><p id="d327" class="pw-post-body-paragraph lj lk it ll b lm ny kd lo lp nz kg lr ls oa lu lv lw ob ly lz ma oc mc md me im bi translated">如果你真的做了粗糙的休息，那么你的应用程序肯定会变得过于喋喋不休。</p><p id="f763" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">在“资源”的基础上访问您的实体可能看起来是一个好主意。但是，随着您对领域理解的加深和需求的发展，您可能会发现自己陷入了我喜欢称之为“嵌套资源检索疯狂”的境地</p><p id="c75f" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">当您想要跨父级访问嵌套资源时，甚至当您需要初始调用无法检索到的嵌套资源细节时，就会产生这种疯狂。</p><p id="ef89" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">我们的聊天应用程序的API不能很好地展示我的观点，所以，我将使用一个用于组织管理的即兴API。</p><p id="095f" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">假设我们有如下所示的端点。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi of"><img src="../Images/5f546147c6cdbe2c7ef7968cf1b9b662.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jn2uaGMoPfQgtbVyjFTnyg.png"/></div></div></figure><p id="3eb8" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">假设根上的每个嵌套资源只提供相关的id，而不提供每个嵌套资源的细节，因为我们最初的想法是支持小数据包而不是大数据包。</p><p id="5744" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">现在假设您想要某个公司的所有员工。您是否循环各部门，并在部门级别上针对每个检索到的员工ID向<code class="fe mg mh mi mj b">api/employees/{id}</code>发出请求？</p><p id="8dc2" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">或者是粗糙的REST开始变得太麻烦，你开始通过创建像<code class="fe mg mh mi mj b">GET api/company/{id}/employees</code>或者甚至可能<code class="fe mg mh mi mj b">GET api/company/{id}/employees-with-details</code>这样的端点来发散。</p><p id="f1fc" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">这似乎是一个完全虚构的方法，但是我以前见过这样做的。</p><h2 id="3257" class="ng nh it bd ni nj nk dn nl nm nn dp no ls np nq nr lw ns nt nu ma nv nw nx iz bi translated">"但是其他人都在创建CRUD APIs！"</h2><p id="b519" class="pw-post-body-paragraph lj lk it ll b lm ny kd lo lp nz kg lr ls oa lu lv lw ob ly lz ma oc mc md me im bi translated">当然，他们是。</p><p id="a2f1" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">他们很可能在学校时就学会了这个粗俗的术语，也懒得去调查或实验不同的方法。</p><p id="a4e1" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">REST是为老派网站发明的，在老派网站中，导航的主要手段是锚链接——因此有了使用超媒体链接作为发现功能的手段的想法。它起到了一定的作用，减轻了过去真正的痛苦。“API”后来成为本周的流行语，出于某种原因，一些开发人员认为将CRUD模式应用于面向客户端的REST APIs是一件好事。</p><h1 id="3ff4" class="og nh it bd ni oh oi oj nl ok ol om no ki on kj nr kl oo km nu ko op kp nx oq bi translated">"那么，我们如何才能构建更好的web APIs呢？"</h1><p id="ad94" class="pw-post-body-paragraph lj lk it ll b lm ny kd lo lp nz kg lr ls oa lu lv lw ob ly lz ma oc mc md me im bi translated">我不能抨击一种方法而不至少提供一种替代方法。</p><h2 id="e3c5" class="ng nh it bd ni nj nk dn nl nm nn dp no ls np nq nr lw ns nt nu ma nv nw nx iz bi translated">基于任务的、以业务为中心的界面才是正确的选择。</h2><p id="fc29" class="pw-post-body-paragraph lj lk it ll b lm ny kd lo lp nz kg lr ls oa lu lv lw ob ly lz ma oc mc md me im bi translated">在我看来，无论你做什么，你都需要记住业务和客户。帮助企业为客户服务始终是重中之重。</p><p id="fc71" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">我不赞同武断的、虚构的技术规则，尤其是当它们纯粹植根于技术“智慧”而不是提供真正的商业价值时。</p><p id="000d" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">正如我在上一篇文章中提到的，你应该停止忽视你的客户，构建真正符合客户意图的API。</p><p id="a499" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">考虑到我们的聊天web应用程序，一个更好、更容易推理并且总体上更好的端点可能如下所示。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi of"><img src="../Images/7699a1da7f5cb4278c949207b6d62199.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iipcPAEnedKuqEW4ZkRM0w.png"/></div></div></figure><p id="ff9e" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">它们看起来确实像RPC，这很好。</p><p id="bc9b" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">请注意我们是多么注重功能。几乎毫无疑问，每个端点将做什么，但我们仍然可以很容易地遵守REST原则，如无状态、幂等运算、通用性原则等。</p><p id="4da3" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">不再需要HATEOAS，因为API现在已经很明显了。我认为HATEOAS的设计是出于对REST通用性的不满——Fielding自己也提到了这种关于应用程序特定需求的权衡。</p><h2 id="ee97" class="ng nh it bd ni nj nk dn nl nm nn dp no ls np nq nr lw ns nt nu ma nv nw nx iz bi translated">“但是资源应该有统一的接口！”</h2><p id="50f5" class="pw-post-body-paragraph lj lk it ll b lm ny kd lo lp nz kg lr ls oa lu lv lw ob ly lz ma oc mc md me im bi translated">现在，在我看来，统一接口约束被广泛误解为所有资源都必须符合某个通用模板，通常是GET (single and all)、POST、PATCH和DELETE。</p><p id="bbb9" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">在多次阅读Fielding的作品后，我确实认为这个通用模板就是他所想的——但是，作为他写作时一个基本上未经测试的想法，我认为统一接口约束的含义应该现代化，只考虑资源级别的端点，而不是所有资源必须符合完全相同的接口的应用范围的约束。</p><p id="d0c9" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">以完全相同的方式连接两个资源通常是没有意义的。例如，你想以两种完全不同的方式与聊天室和聊天信息互动。</p><h1 id="9f74" class="og nh it bd ni oh oi oj nl ok ol om no ki on kj nr kl oo km nu ko op kp nx oq bi translated">终于结束了。</h1><p id="afdb" class="pw-post-body-paragraph lj lk it ll b lm ny kd lo lp nz kg lr ls oa lu lv lw ob ly lz ma oc mc md me im bi translated">虽然REST是web APIs事实上的架构方法，但我认为还有改进的空间，我们应该允许自己探索与我们的业务领域如何运作更一致的新途径，而不是取悦REST之神。</p><p id="17c9" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">说到底，我们构建web APIs是为了支持我们的业务，而不是为了证明我们有能力遵循一个21岁的博士论文中提出的观点所强加的综合约束。无意冒犯菲尔丁或他的想法。它们无疑为HTTP上的现代API铺平了道路。</p><p id="04d1" class="pw-post-body-paragraph lj lk it ll b lm ln kd lo lp lq kg lr ls lt lu lv lw lx ly lz ma mb mc md me im bi translated">在我看来，忘掉武断的规则，开始构建以业务为中心的API，帮助支持客户的意图并完成他们的任务。</p></div><div class="ab cl mz na hx nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="im in io ip iq"><h1 id="8d83" class="og nh it bd ni oh or oj nl ok os om no ki ot kj nr kl ou km nu ko ov kp nx oq bi translated">我想你会喜欢类似的材料。</h1><ul class=""><li id="0bb9" class="ow ox it ll b lm ny lp nz ls oy lw oz ma pa me pb pc pd pe bi translated"><a class="ae mf" href="https://youtu.be/goVjlWLY9NQ" rel="noopener ugc nofollow" target="_blank">干净代码示例(YouTube) </a></li><li id="76a8" class="ow ox it ll b lm pf lp pg ls ph lw pi ma pj me pb pc pd pe bi translated"><a class="ae mf" rel="noopener ugc nofollow" target="_blank" href="/why-are-you-still-creating-crud-apis-8790ca261bfb">你为什么还在创建CRUD APIs？</a></li><li id="876b" class="ow ox it ll b lm pf lp pg ls ph lw pi ma pj me pb pc pd pe bi translated"><a class="ae mf" rel="noopener ugc nofollow" target="_blank" href="/remove-your-if-else-and-switch-cases-1ed2b625b4cf">拿掉你的If-Else和Switch Cases </a></li><li id="6916" class="ow ox it ll b lm pf lp pg ls ph lw pi ma pj me pb pc pd pe bi translated"><a class="ae mf" rel="noopener ugc nofollow" target="_blank" href="/why-cognitive-and-cyclomatic-complexity-matters-in-software-development-5fce1efb56ab">为什么认知和圈复杂度在软件开发中很重要</a></li><li id="4757" class="ow ox it ll b lm pf lp pg ls ph lw pi ma pj me pb pc pd pe bi translated"><a class="ae mf" rel="noopener ugc nofollow" target="_blank" href="/writing-cleaner-code-with-examples-69be2160b4c1">编写更干净的代码(附例子)</a></li></ul></div><div class="ab cl mz na hx nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="im in io ip iq"><h1 id="3e9f" class="og nh it bd ni oh or oj nl ok os om no ki ot kj nr kl ou km nu ko ov kp nx oq bi translated">好奇者的资源</h1><ul class=""><li id="8e73" class="ow ox it ll b lm ny lp nz ls oy lw oz ma pa me pb pc pd pe bi translated">📚<a class="ae mf" href="https://github.com/NMillard/SimpleWebApps/tree/master/src/GeneralPractices/CrudOrTaskBased/CrudApp" rel="noopener ugc nofollow" target="_blank">源代码【GitHub】</a>作者<a class="lh li ep" href="https://medium.com/u/7c7a43b3d9de?source=post_page-----bde4f4c8cb8a--------------------------------" rel="noopener" target="_blank">尼可拉斯·米勒德</a></li><li id="5e76" class="ow ox it ll b lm pf lp pg ls ph lw pi ma pj me pb pc pd pe bi translated">微软的RESTful API设计</li><li id="f685" class="ow ox it ll b lm pf lp pg ls ph lw pi ma pj me pb pc pd pe bi translated">架构风格和基于网络的软件架构的设计</li><li id="20b0" class="ow ox it ll b lm pf lp pg ls ph lw pi ma pj me pb pc pd pe bi translated"><a class="ae mf" href="https://www.codecademy.com/articles/what-is-rest" rel="noopener ugc nofollow" target="_blank">什么是代码学院的休息</a></li><li id="3f50" class="ow ox it ll b lm pf lp pg ls ph lw pi ma pj me pb pc pd pe bi translated"><a class="ae mf" href="https://www.infoq.com/news/2009/07/CRUDREST/" rel="noopener ugc nofollow" target="_blank">Crud对休息不好吗？</a>鲍里斯·卢布林斯基</li><li id="64d4" class="ow ox it ll b lm pf lp pg ls ph lw pi ma pj me pb pc pd pe bi translated">restfulapi.net的HATEOAS驱动的REST APIs</li><li id="434b" class="ow ox it ll b lm pf lp pg ls ph lw pi ma pj me pb pc pd pe bi translated"><a class="ae mf" href="https://www.e4developer.com/2018/02/16/hateoas-simple-explanation/" rel="noopener ugc nofollow" target="_blank">hate OAS——一个简单的解释</a>作者<a class="ae mf" href="https://www.e4developer.com/author/jedrus07/" rel="noopener ugc nofollow" target="_blank"> Bartosz Jedrzejewski </a></li><li id="0993" class="ow ox it ll b lm pf lp pg ls ph lw pi ma pj me pb pc pd pe bi translated"><a class="ae mf" href="https://medium.com/@andreasreiser94/why-hateoas-is-useless-and-what-that-means-for-rest-a65194471bc8" rel="noopener">为什么仇恨是无用的，它对休息意味着什么</a>作者<a class="lh li ep" href="https://medium.com/u/1b1409faa609?source=post_page-----bde4f4c8cb8a--------------------------------" rel="noopener" target="_blank">安德里亚斯·赖泽</a></li><li id="ef6d" class="ow ox it ll b lm pf lp pg ls ph lw pi ma pj me pb pc pd pe bi translated"><a class="ae mf" href="https://nurkiewicz.com/2015/07/restful-considered-harmful.html" rel="noopener ugc nofollow" target="_blank">被认为有害的宁静</a></li><li id="17b9" class="ow ox it ll b lm pf lp pg ls ph lw pi ma pj me pb pc pd pe bi translated">cqrs.wordpress.com上基于任务的用户界面</li><li id="8951" class="ow ox it ll b lm pf lp pg ls ph lw pi ma pj me pb pc pd pe bi translated">Mathias Verraes提出的CRUD是一个反模式</li><li id="322f" class="ow ox it ll b lm pf lp pg ls ph lw pi ma pj me pb pc pd pe bi translated">特洛伊·格里菲兹的《为什么休息很糟糕》</li></ul></div></div>    
</body>
</html>