<html>
<head>
<title>Tutorial: From HTML to Django in 10 minutes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">教程:10分钟从HTML到Django</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/from-html-to-django-6d8344da11d6?source=collection_archive---------0-----------------------#2020-10-09">https://levelup.gitconnected.com/from-html-to-django-6d8344da11d6?source=collection_archive---------0-----------------------#2020-10-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="3076" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">姜戈力学导论</h2></div><h1 id="bc5a" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">我们网站的介绍</h1><p id="8845" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">在本文中，我试图解释Django是什么，它如何组成和提供HTML文件，以及如何控制URL。</p><p id="9cf2" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">我们在这里所做的如下:</p><ol class=""><li id="750c" class="mb mc it lc b ld lw lg lx lj md ln me lr mf lv mg mh mi mj bi translated">为我们的新网站创建两个简单的HTML文件。我们从HTML开始，因为这很简单:)</li><li id="a828" class="mb mc it lc b ld mk lg ml lj mm ln mn lr mo lv mg mh mi mj bi translated">创建一个Django项目，设置并运行它。</li><li id="b4f6" class="mb mc it lc b ld mk lg ml lj mm ln mn lr mo lv mg mh mi mj bi translated">让两个URL导航到我们的两个HTML文件，这样你就能理解你的程序流是如何依赖于用户在URL栏中输入的内容的。</li><li id="c80c" class="mb mc it lc b ld mk lg ml lj mm ln mn lr mo lv mg mh mi mj bi translated">看看你如何与用户沟通——我们将创建一个简单的表单，询问用户想要订购哪种类型的披萨。</li></ol><p id="bb6f" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">为了简单起见，我们将不使用模型。我们将看到URL、处理表单和HTML呈现的机制。</p><p id="ed36" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">我们走吧！</p></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="27fb" class="ki kj it bd kk kl mw kn ko kp mx kr ks jz my ka ku kc mz kd kw kf na kg ky kz bi translated">创建一个包含两个HTML文件的文件夹</h1><p id="99f7" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">我们首先创建一个文件夹“formedium ”,在这个文件夹中，我们创建两个HTML文件:</p><ol class=""><li id="c3b1" class="mb mc it lc b ld lw lg lx lj md ln me lr mf lv mg mh mi mj bi translated">index.html</li></ol><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="51d2" class="nk kj it ng b gy nl nm l nn no">&lt;!DOCTYPE <strong class="ng iu">html</strong>&gt;<br/>&lt;<strong class="ng iu">html lang="en"</strong>&gt;<br/>&lt;<strong class="ng iu">head</strong>&gt;<br/>    &lt;<strong class="ng iu">meta charset="UTF-8"</strong>&gt;<br/>    &lt;<strong class="ng iu">title</strong>&gt;Page 1&lt;/<strong class="ng iu">title</strong>&gt;<br/>&lt;/<strong class="ng iu">head</strong>&gt;<br/>&lt;<strong class="ng iu">body</strong>&gt;<br/>    &lt;<strong class="ng iu">H1</strong>&gt;This is our first page&lt;/<strong class="ng iu">H1</strong>&gt;<br/>    &lt;<strong class="ng iu">p</strong>&gt;You may add a picture of a cat here.&lt;/<strong class="ng iu">p</strong>&gt;<br/>&lt;/<strong class="ng iu">body</strong>&gt;<br/>&lt;/<strong class="ng iu">html</strong>&gt;</span></pre><p id="1121" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">2.page2.html</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="fd6a" class="nk kj it ng b gy nl nm l nn no">&lt;!DOCTYPE <strong class="ng iu">html</strong>&gt;<br/>&lt;<strong class="ng iu">html lang="en"</strong>&gt;<br/>&lt;<strong class="ng iu">head</strong>&gt;<br/>    &lt;<strong class="ng iu">meta charset="UTF-8"</strong>&gt;<br/>    &lt;<strong class="ng iu">title</strong>&gt;Page 2&lt;/<strong class="ng iu">title</strong>&gt;<br/>&lt;/<strong class="ng iu">head</strong>&gt;<br/>&lt;<strong class="ng iu">body</strong>&gt;<br/>    &lt;<strong class="ng iu">H1</strong>&gt;This is our second page&lt;/<strong class="ng iu">H1</strong>&gt;<br/>    &lt;<strong class="ng iu">p</strong>&gt;You may add a picture of a house here.&lt;/<strong class="ng iu">p</strong>&gt;<br/>&lt;/<strong class="ng iu">body</strong>&gt;<br/>&lt;/<strong class="ng iu">html</strong>&gt;</span></pre><p id="fdb2" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">如果你有一些想象力，你甚至不必在浏览器中运行这些文件。</p></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="b259" class="ki kj it bd kk kl mw kn ko kp mx kr ks jz my ka ku kc mz kd kw kf na kg ky kz bi translated">创建Django项目</h1><p id="233b" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">现在，我们创建一个新的Django项目。</p><p id="ed47" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">这是通过几个步骤完成的:</p><ol class=""><li id="8d8d" class="mb mc it lc b ld lw lg lx lj md ln me lr mf lv mg mh mi mj bi translated">创建一个虚拟环境，安装Django</li><li id="ec67" class="mb mc it lc b ld mk lg ml lj mm ln mn lr mo lv mg mh mi mj bi translated">创建项目</li><li id="38cc" class="mb mc it lc b ld mk lg ml lj mm ln mn lr mo lv mg mh mi mj bi translated">创建应用程序</li></ol><p id="8f37" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">我们从虚拟环境开始。这一步是可选的。这是在终端中完成的:</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="2173" class="nk kj it ng b gy nl nm l nn no">$ python -m venv venv<br/>$ source ./venv/bin/activate</span></pre><p id="fb6f" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">安装Django:</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="871c" class="nk kj it ng b gy nl nm l nn no">$ pip install django</span></pre><p id="66f3" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">您应该会收到这样的消息:</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="6161" class="nk kj it ng b gy nl nm l nn no">Successfully installed asgiref-3.2.10 django-3.1.2 pytz-2020.1 sqlparse-0.4.1</span></pre><p id="817c" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">如果是，创建一个项目和一个应用程序:</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="c74a" class="nk kj it ng b gy nl nm l nn no">$ django-admin startproject formedium<br/>$ cd formedium<br/>$ django-admin startapp myapp</span></pre><p id="6646" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">因此，我们的文件夹应该如下所示:</p><figure class="nb nc nd ne gt nq gh gi paragraph-image"><div class="gh gi np"><img src="../Images/60b44a21b31406e043ef0b9611ad2b62.png" data-original-src="https://miro.medium.com/v2/resize:fit:696/format:webp/1*M35nSrHOD1F9UTdzyE_EBg.png"/></div></figure><p id="c5f8" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">我们差不多完成了。现在让我们在“myapp”中创建一个“template”文件夹，并将我们的HTML文件移入其中。我们现在应该有以下内容:</p><figure class="nb nc nd ne gt nq gh gi paragraph-image"><div role="button" tabindex="0" class="nt nu di nv bf nw"><div class="gh gi np"><img src="../Images/1b30b61b0a0f853e2c8e1c7da4773c3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:696/format:webp/1*7gi9Efju8kTWHNKnk7vCyw.png"/></div></div></figure><p id="d306" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">但是我们的“formedium”项目应该如何知道在哪里寻找模板呢？我们通过修改<strong class="lc iu"> setting.py </strong>文件来帮助它:</p><p id="36e4" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">添加我们的应用程序:</p><figure class="nb nc nd ne gt nq gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/577f2481eed03d6e11da5d0958e9dadd.png" data-original-src="https://miro.medium.com/v2/resize:fit:720/format:webp/1*wyIlU8LdQkT1dzSu0Y-yJw.png"/></div><figcaption class="ny nz gj gh gi oa ob bd b be z dk translated">添加此行</figcaption></figure><p id="a582" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">设置模板文件夹的名称:</p><figure class="nb nc nd ne gt nq gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/a71f86a9e9d0dd29802cc882b92b8ba7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1272/format:webp/1*vV55lQp_hLgSYLXJpU1UoQ.png"/></div><figcaption class="ny nz gj gh gi oa ob bd b be z dk translated">将此项添加到DIRS列表中</figcaption></figure><p id="e875" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">很好。我们已经准备好设置我们的项目了！</p><p id="be06" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">尝试运行它</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="096b" class="nk kj it ng b gy nl nm l nn no">$ python manage.py runserver</span></pre><p id="fc54" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">并在浏览器中运行“localhost:8000”。</p><figure class="nb nc nd ne gt nq gh gi paragraph-image"><div role="button" tabindex="0" class="nt nu di nv bf nw"><div class="gh gi od"><img src="../Images/6dde260b804b3ecfa5173ffe8dea2cae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rWD97ynmN8HAZbkvgPQccw.png"/></div></div><figcaption class="ny nz gj gh gi oa ob bd b be z dk translated">本地主机:8000</figcaption></figure></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="9d1f" class="ki kj it bd kk kl mw kn ko kp mx kr ks jz my ka ku kc mz kd kw kf na kg ky kz bi translated">将空URL指向index.html</h1><p id="4a92" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">什么是URL？</p><p id="44f7" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">比如说，你有一个叫medium.com的网站。</p><p id="fc49" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">如果用户在浏览器中键入“medium.com ”,则这是一个根URL。在这种情况下，我们说URL是空的。</p><p id="656f" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">如果用户键入“medium.com/help”，则URL为“/help”。</p><p id="ae5e" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">如果用户输入“medium . com/login？user = Jim Carrey &amp; password = monkey”，那么URL就是“/log in”，其余的我们都可以从get请求中得到，下面会讲到。</p><p id="1386" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">所以。每当URL为空时，我们都希望显示我们的index.html。我们如何做到这一点？在“formedium”文件夹中，有一个名为“urls.py”的文件，当有用户请求时，首先调用这个文件。</p><p id="1e8d" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">在这个文件中，我们改变了两件事:</p><ol class=""><li id="70fc" class="mb mc it lc b ld lw lg lx lj md ln me lr mf lv mg mh mi mj bi translated">导入我们的应用视图。</li><li id="2477" class="mb mc it lc b ld mk lg ml lj mm ln mn lr mo lv mg mh mi mj bi translated">比方说，如果URL为空，编辑<strong class="lc iu"> views.index </strong>函数。</li></ol><figure class="nb nc nd ne gt nq gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/78bf4d576d1ec1c5de7321f7543f39e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:752/format:webp/1*u3Yc_btfFExn3ow14MOMYA.png"/></div><figcaption class="ny nz gj gh gi oa ob bd b be z dk translated">当URL为空时，运行views.index函数</figcaption></figure><p id="916a" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">那么这个“<strong class="lc iu"> views.index </strong>”函数呢？当然，我们需要提供它。</p><p id="16a4" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">编辑“myapp/views.py”文件，如下所示:</p><figure class="nb nc nd ne gt nq gh gi paragraph-image"><div class="gh gi of"><img src="../Images/ecf1037699d26acacb9226d1fd56ffff.png" data-original-src="https://miro.medium.com/v2/resize:fit:772/format:webp/1*WTNY6zJQaXXu5Z-cdcbzww.png"/></div></figure><p id="0b1e" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">现在，尝试导航“localhost:8000”，您应该看到“index.html”文件的内容。</p><p id="645e" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">换句话说，Django就是这样处理用户请求的:</p><figure class="nb nc nd ne gt nq gh gi paragraph-image"><div class="gh gi og"><img src="../Images/fd65b71ea9eb1005147454325159891a.png" data-original-src="https://miro.medium.com/v2/resize:fit:866/format:webp/1*-hpAVnA4DI50B2jeaTVN6A.png"/></div></figure></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="2634" class="ki kj it bd kk kl mw kn ko kp mx kr ks jz my ka ku kc mz kd kw kf na kg ky kz bi translated">指向page2.html的点/房屋URL</h1><p id="4197" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">这对你来说应该是个练习。</p><p id="e975" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">您所需要的只是添加一个新的URL行和一个新的函数。</p><figure class="nb nc nd ne gt nq gh gi paragraph-image"><div role="button" tabindex="0" class="nt nu di nv bf nw"><div class="gh gi oh"><img src="../Images/f39a07ef3cccd00af85af61b7adb445b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W3GtqotkGFNjwsIpjjI0yQ.png"/></div></div></figure><p id="47ef" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">这样，你可以根据需要添加任意多的URL和HTML视图。为了使您的应用程序更加用户友好，请尝试将第二页的地址添加到index.html中:</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="dcb0" class="nk kj it ng b gy nl nm l nn no">&lt;a href="/house"&gt;See the second page&lt;/a&gt;</span></pre></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="46c3" class="ki kj it bd kk kl mw kn ko kp mx kr ks jz my ka ku kc mz kd kw kf na kg ky kz bi translated">将一些参数传递给HTML文件(上下文)</h1><p id="1576" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">比方说，您的服务器非常聪明，它可以计算复杂的数学表达式，现在我们需要将这些结果放入HTML文件中。</p><p id="fd53" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">对于这个，有个好听的东西叫<strong class="lc iu">语境:</strong></p><figure class="nb nc nd ne gt nq gh gi paragraph-image"><div role="button" tabindex="0" class="nt nu di nv bf nw"><div class="gh gi oi"><img src="../Images/f297108719a7e1c7b474a456ed73ad49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JD6c3UpqZEobHvZDlYevKA.png"/></div></div><figcaption class="ny nz gj gh gi oa ob bd b be z dk translated">如上编辑您的文件</figcaption></figure><p id="9048" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">上下文是一个普通的Python字典，它包含了需要传递给HTML的所有对象。在我们的例子中，我们已经使用“result”键传递了“a”的值。</p><p id="f32c" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">尝试在上下文中多添加一个键，并在房子网页上显示。</p></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="6f4d" class="ki kj it bd kk kl mw kn ko kp mx kr ks jz my ka ku kc mz kd kw kf na kg ky kz bi translated">将列表作为上下文传递</h1><p id="c492" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">只有一个值的变量很无聊。让我们将元素列表发送到HTML文件中！</p><p id="28a1" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">为此，模板解析器中有一个循环。</p><figure class="nb nc nd ne gt nq gh gi paragraph-image"><div role="button" tabindex="0" class="nt nu di nv bf nw"><div class="gh gi oj"><img src="../Images/69940657c85c9388237eb64dd1325970.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1g3VsJdoSDNXSwJxYJvqcA.png"/></div></div></figure><p id="1afb" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">参考<a class="ae ok" href="https://docs.djangoproject.com/en/3.0/ref/templates/language/" rel="noopener ugc nofollow" target="_blank">Django官方文档</a>来学习模板的所有特性。</p><p id="0dad" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">还有我的另一篇关于<a class="ae ok" rel="noopener ugc nofollow" target="_blank" href="/the-power-of-django-render-function-fc890e82b279">将Django渲染函数用于其他目的的文章</a>。</p></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="453f" class="ki kj it bd kk kl mw kn ko kp mx kr ks jz my ka ku kc mz kd kw kf na kg ky kz bi translated">从用户处获取数据</h1><p id="8867" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">我们的最后一步是获取用户发布的一些数据。</p><p id="edd5" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">为此，我们将使用标准的HTML表单:</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="ee6c" class="nk kj it ng b gy nl nm l nn no">&lt;!DOCTYPE <strong class="ng iu">html</strong>&gt;<br/>&lt;<strong class="ng iu">html lang="en"</strong>&gt;<br/>&lt;<strong class="ng iu">head</strong>&gt;<br/>    &lt;<strong class="ng iu">meta charset="UTF-8"</strong>&gt;<br/>    &lt;<strong class="ng iu">title</strong>&gt;Page 1&lt;/<strong class="ng iu">title</strong>&gt;<br/>&lt;/<strong class="ng iu">head</strong>&gt;<br/>&lt;<strong class="ng iu">body</strong>&gt;<br/>    &lt;<strong class="ng iu">form method="POST"</strong>&gt;<br/>        {% csrf_token %}<br/>        &lt;<strong class="ng iu">label for="password"</strong>&gt;Enter password&lt;/<strong class="ng iu">label</strong>&gt;<br/>        &lt;<strong class="ng iu">input id="password" name="password"</strong>&gt;&lt;/<strong class="ng iu">input</strong>&gt;<br/>        &lt;<strong class="ng iu">button type="submit"</strong>&gt;Send&lt;/<strong class="ng iu">button</strong>&gt;<br/>    &lt;/<strong class="ng iu">form</strong>&gt;<br/>    &lt;<strong class="ng iu">p style="color</strong>: <strong class="ng iu">red"</strong>&gt;{{message}}&lt;/<strong class="ng iu">p</strong>&gt;<br/>&lt;/<strong class="ng iu">body</strong>&gt;<br/>&lt;/<strong class="ng iu">html</strong>&gt;</span></pre><p id="ced1" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">注意这一行:</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="d2e0" class="nk kj it ng b gy nl nm l nn no">{% csrf_token %}</span></pre><p id="1489" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">你需要把它包含到你HTML中的每个表单中。这边姜戈会负责安全。如果你有兴趣的话，请在这里阅读更多内容。</p><p id="0048" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">当然，我们需要接收发布的数据，具体如下:</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="a919" class="nk kj it ng b gy nl nm l nn no"><strong class="ng iu">def </strong>index(request):<br/>    message = <strong class="ng iu">""<br/>    if </strong>request.method == <strong class="ng iu">"POST"</strong>:<br/>        <strong class="ng iu">if </strong>request.POST.get(<strong class="ng iu">"password"</strong>,<strong class="ng iu">""</strong>) == <strong class="ng iu">"123"</strong>:<br/>            <strong class="ng iu">return </strong>redirect(<strong class="ng iu">"/house"</strong>)<br/>        <strong class="ng iu">else</strong>:<br/>            message = <strong class="ng iu">"Incorrect password"<br/>    </strong>context = {<strong class="ng iu">"message"</strong>: message}<br/>    <strong class="ng iu">return </strong>render(request, <strong class="ng iu">"index.html"</strong>, context)</span></pre><p id="dabf" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">于是，有了<strong class="lc iu">的请求。POST.get </strong>函数，你可以得到输入字段中输入的任何内容。这里，在HTML表单中指定输入的"<strong class="lc iu">名称"</strong>字段是至关重要的，而不仅仅是<strong class="lc iu"> "id"s </strong>。</p><p id="ef84" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">因此，如果<strong class="lc iu"> request.method </strong>是<strong class="lc iu"> POST，</strong>并且如果密码为空或不正确，我们向上下文传递一条消息，它将显示在同一页面上。</p><p id="005a" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">如果密码正确，我们会将用户重定向到第二个页面。</p><p id="a882" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">注意:您不应该使用如上所示的任何手动身份验证实现。这只是一个例子。这里有一个<a class="ae ok" href="https://docs.djangoproject.com/en/3.1/topics/auth/" rel="noopener ugc nofollow" target="_blank">官方的正确的认证用户的方法</a>。比起基本认证，更高级的开发人员可能更喜欢<a class="ae ok" href="https://jpadilla.github.io/django-rest-framework-jwt/" rel="noopener ugc nofollow" target="_blank"> Django Rest框架JWT </a>。</p></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="508a" class="ki kj it bd kk kl mw kn ko kp mx kr ks jz my ka ku kc mz kd kw kf na kg ky kz bi translated">结论</h1><p id="7d13" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">本文旨在展示如何在Django中处理web用户的请求，即如何处理URL和HTML表单。对于一些基本的东西来说，这应该足够了，并且可以被认为是使用Django和Python进行Web开发的起步文章。</p><p id="83ff" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">在我的另一篇文章中，您可能会在Django中看到一些对性能有用的高级数据库查询:</p><div class="ol om gp gr on oo"><a rel="noopener  ugc nofollow" target="_blank" href="/optimizing-django-queries-28e96ad204de"><div class="op ab fo"><div class="oq ab or cl cj os"><h2 class="bd iu gy z fp ot fr fs ou fu fw is bi translated">优化Django查询</h2><div class="ov l"><h3 class="bd b gy z fp ot fr fs ou fu fw dk translated">使用批量查询、预加载外键等。</h3></div><div class="ow l"><p class="bd b dl z fp ot fr fs ou fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="ox l"><div class="oy l oz pa pb ox pc nr oo"/></div></div></a></div><p id="df9f" class="pw-post-body-paragraph la lb it lc b ld lw ju lf lg lx jx li lj ly ll lm ln lz lp lq lr ma lt lu lv im bi translated">别忘了和你的朋友分享这个教程！</p></div></div>    
</body>
</html>