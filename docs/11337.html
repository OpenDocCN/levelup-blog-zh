<html>
<head>
<title>How to install the Koa web framework with Typescript on AWS Elastic beanstalk</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在AWS Elastic beanstalk上安装带有Typescript的Koa web框架</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-install-the-koa-web-framework-with-typescript-on-aws-elastic-beanstalk-c339ddb0bc57?source=collection_archive---------11-----------------------#2022-03-08">https://levelup.gitconnected.com/how-to-install-the-koa-web-framework-with-typescript-on-aws-elastic-beanstalk-c339ddb0bc57?source=collection_archive---------11-----------------------#2022-03-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/ca4ca00d06c06445b4bcbbe70a29432b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PFaxZp1UDX1fgmZZ71x6Kg.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">在AWS弹性豆茎上带有TS的Kon</figcaption></figure><p id="a134" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">如何在AWS elastic beanstalk上安装带有typescript的<a class="ae ld" href="https://koajs.com/" rel="noopener ugc nofollow" target="_blank"> Koa web framework </a>的分步指南。</p><p id="18c7" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">简单总结一下我们要做的事情-</p><ol class=""><li id="394b" class="le lf it kh b ki kj km kn kq lg ku lh ky li lc lj lk ll lm bi translated">创建一个支持类型脚本的小节点应用程序</li><li id="aed7" class="le lf it kh b ki ln km lo kq lp ku lq ky lr lc lj lk ll lm bi translated">配置tsconfig.json</li><li id="9a90" class="le lf it kh b ki ln km lo kq lp ku lq ky lr lc lj lk ll lm bi translated">使用Koa.js编写几个端点</li><li id="0a2a" class="le lf it kh b ki ln km lo kq lp ku lq ky lr lc lj lk ll lm bi translated">安装Elasticbeanstalk CLI</li><li id="3ef0" class="le lf it kh b ki ln km lo kq lp ku lq ky lr lc lj lk ll lm bi translated">创建电子商务环境</li><li id="8620" class="le lf it kh b ki ln km lo kq lp ku lq ky lr lc lj lk ll lm bi translated">在EB上部署我们的节点应用程序</li><li id="1093" class="le lf it kh b ki ln km lo kq lp ku lq ky lr lc lj lk ll lm bi translated">终止环境</li></ol><p id="2234" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">但是在我们开始之前，一些文献📖论树袋熊&amp;弹性豆茎</p><p id="f1fe" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated"><strong class="kh iu">什么是KOA？</strong></p><blockquote class="ls lt lu"><p id="cd35" class="kf kg lv kh b ki kj kk kl km kn ko kp lw kr ks kt lx kv kw kx ly kz la lb lc im bi translated">Koa是由Express背后的团队设计的一个新的web框架，它的目标是成为一个更小、更有表现力、更健壮的web应用程序和API的基础。通过利用异步函数，Koa允许您放弃回调并大大提高错误处理能力。Koa在其核心中没有捆绑任何中间件，它提供了一套优雅的方法，使得编写服务器变得快速而愉快。</p><p id="7080" class="kf kg lv kh b ki kj kk kl km kn ko kp lw kr ks kt lx kv kw kx ly kz la lb lc im bi translated">出发地:<a class="ae ld" href="https://koajs.com/" rel="noopener ugc nofollow" target="_blank"> KoaJs </a></p></blockquote><p id="1ca2" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">给你带来Express developed Koa的是同一个开发者。Koa只是Express的一个更轻量级的版本，没有开箱即用的路由和模板。</p><p id="5a45" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">Express比Koa成熟多了。它的社区更加成熟。您将在Express上找到比Koa更多的文档/示例。</p><p id="0f07" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">虽然Koa使得编写中间件更加简洁，但是使用带有async/await的Express也避免了“回调地狱”,并实现了类似的语法。</p><p id="05fe" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">Koa与Express之间的一些主要差异在这里详细介绍-<a class="ae ld" href="https://github.com/koajs/koa/blob/master/docs/koa-vs-express.md" rel="noopener ugc nofollow" target="_blank">https://github . com/koajs/Koa/blob/master/docs/Koa-vs-Express . MD</a></p><p id="83aa" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated"><strong class="kh iu">什么是AWS豆茎？</strong></p><blockquote class="ls lt lu"><p id="31ca" class="kf kg lv kh b ki kj kk kl km kn ko kp lw kr ks kt lx kv kw kx ly kz la lb lc im bi translated">AWS Elastic Beanstalk是一个易于使用的服务，用于部署和扩展用Java开发的web应用程序和服务。NET、PHP、Node.js、Python、Ruby、Go、Docker在Apache、Nginx、Passenger、IIS等熟悉的服务器上。</p><p id="ed74" class="kf kg lv kh b ki kj kk kl km kn ko kp lw kr ks kt lx kv kw kx ly kz la lb lc im bi translated">您只需上传您的代码，Elastic Beanstalk就会自动处理部署，从容量供应、负载平衡、自动扩展到应用健康监控。同时，您保留了对驱动应用程序的AWS资源的完全控制，并且可以随时访问底层资源。</p><p id="4ca1" class="kf kg lv kh b ki kj kk kl km kn ko kp lw kr ks kt lx kv kw kx ly kz la lb lc im bi translated">Elastic Beanstalk不收取额外费用——您只需为存储和运行应用程序所需的AWS资源付费。</p><p id="61e8" class="kf kg lv kh b ki kj kk kl km kn ko kp lw kr ks kt lx kv kw kx ly kz la lb lc im bi translated">来自<a class="ae ld" href="https://aws.amazon.com/elasticbeanstalk/" rel="noopener ugc nofollow" target="_blank"> AWS </a></p></blockquote><p id="3c97" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated"><strong class="kh iu">第一步:创建支持类型脚本的节点应用</strong></p><figure class="lz ma mb mc gt ju"><div class="bz fp l di"><div class="md me l"/></div></figure><p id="a22e" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated"><a class="ae ld" href="https://www.npmjs.com/package/koa" rel="noopener ugc nofollow" target="_blank"> koa </a> : Koa框架<br/><a class="ae ld" href="https://www.npmjs.com/package/koa-router" rel="noopener ugc nofollow" target="_blank">Koa-Router</a>:Koa<br/><a class="ae ld" href="http://TypeScript is a language for application scale JavaScript development" rel="noopener ugc nofollow" target="_blank">打字稿的路由器中间件</a>:打字稿支持</p><figure class="lz ma mb mc gt ju"><div class="bz fp l di"><div class="md me l"/></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">package.json</figcaption></figure><p id="a7ff" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated"><strong class="kh iu">第二步:配置tsconfig.json </strong></p><figure class="lz ma mb mc gt ju"><div class="bz fp l di"><div class="md me l"/></div></figure><p id="d394" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated"><code class="fe mf mg mh mi b">tsconfig.json</code>是配置TypeScript编译器选项的地方。我们可以用几个选项集创建一个“tsconfig”。</p><ul class=""><li id="a069" class="le lf it kh b ki kj km kn kq lg ku lh ky li lc mj lk ll lm bi translated"><code class="fe mf mg mh mi b">rootDir</code>:这是TypeScript查找我们代码的地方。我们已经将其配置为在<code class="fe mf mg mh mi b">src/</code>文件夹中查找。那是我们写打字稿的地方。</li><li id="0306" class="le lf it kh b ki ln km lo kq lp ku lq ky lr lc mj lk ll lm bi translated">【TypeScript放我们编译好的代码的地方。我们希望它进入一个<code class="fe mf mg mh mi b">build/</code>文件夹。</li><li id="d66b" class="le lf it kh b ki ln km lo kq lp ku lq ky lr lc mj lk ll lm bi translated"><code class="fe mf mg mh mi b">esModuleInterop</code>:如果你在过去几年里一直在JavaScript领域工作，你可能已经意识到模块系统已经有点失控了(AMD、SystemJS、es模块等)。对于一个需要更长时间讨论的主题，如果我们使用<code class="fe mf mg mh mi b">commonjs</code>作为我们的模块系统(对于节点应用程序，你应该这样)，那么我们需要将它设置为<code class="fe mf mg mh mi b">true</code>。</li><li id="3671" class="le lf it kh b ki ln km lo kq lp ku lq ky lr lc mj lk ll lm bi translated"><code class="fe mf mg mh mi b">resolveJsonModule</code>:如果我们在这个项目中使用JSON，这个选项允许TypeScript使用它。</li><li id="cb82" class="le lf it kh b ki ln km lo kq lp ku lq ky lr lc mj lk ll lm bi translated"><code class="fe mf mg mh mi b">lib</code>:这个选项将<em class="lv">环境</em>类型添加到我们的项目中，允许我们依赖来自不同Ecmascript版本、测试库甚至浏览器DOM api的特性。我们想利用一些<code class="fe mf mg mh mi b">es6</code>语言特性。这些都被编译成<code class="fe mf mg mh mi b">es5</code>。</li><li id="7032" class="le lf it kh b ki ln km lo kq lp ku lq ky lr lc mj lk ll lm bi translated"><code class="fe mf mg mh mi b">module</code> : <code class="fe mf mg mh mi b">commonjs</code>是2019年的标准节点模块系统。让我们利用这一点。</li><li id="1cf9" class="le lf it kh b ki ln km lo kq lp ku lq ky lr lc mj lk ll lm bi translated"><code class="fe mf mg mh mi b">allowJs</code>:如果你正在将一个旧的JavaScript项目转换成TypeScript，这个选项将允许你在<code class="fe mf mg mh mi b">.ts</code>文件中包含<code class="fe mf mg mh mi b">.js</code>文件。</li><li id="c364" class="le lf it kh b ki ln km lo kq lp ku lq ky lr lc mj lk ll lm bi translated"><code class="fe mf mg mh mi b">noImplicitAny</code>:在类型脚本文件中，不允许不明确地指定类型。每个类型都需要有一个特定的类型或者被显式声明<code class="fe mf mg mh mi b">any</code>。没有隐含的<code class="fe mf mg mh mi b">any</code> s</li></ul><p id="7233" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">在根目录中运行上述命令后，您应该有一个新的tsconfig.json文件，它应该如下所示</p><figure class="lz ma mb mc gt ju"><div class="bz fp l di"><div class="md me l"/></div></figure><p id="58c9" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated"><strong class="kh iu">步骤3:使用Koa &amp; TS </strong>构建端点</p><figure class="lz ma mb mc gt ju"><div class="bz fp l di"><div class="md me l"/></div></figure><p id="1d4d" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">这是一个非常基本的设置，有几条路线。一旦部署完毕，我们应该能够在“/”和“/hello”端点上访问它们。</p><p id="9bda" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated"><strong class="kh iu">步骤4:安装Elasticbeanstalk CLI </strong></p><p id="2d7b" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">完成这里给出的步骤。https://github.com/aws/aws-elastic-beanstalk-cli-setup<a class="ae ld" href="https://github.com/aws/aws-elastic-beanstalk-cli-setup" rel="noopener ugc nofollow" target="_blank">。这是一个非常简单的设置，应该在几分钟内完成。</a></p><p id="ce98" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated"><strong class="kh iu">第五步:创建EB环境</strong></p><p id="dc59" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">现在，您已经安装了EB CLI，我们准备好部署我们的节点应用程序，但在此之前，我们需要注意几个步骤</p><ul class=""><li id="fe0e" class="le lf it kh b ki kj km kn kq lg ku lh ky li lc mj lk ll lm bi translated">在项目的根目录下添加一个. elasticbeanstalk文件夹。</li><li id="d8b3" class="le lf it kh b ki ln km lo kq lp ku lq ky lr lc mj lk ll lm bi translated">在该文件夹中添加一个source_compile.config文件，然后粘贴以下代码</li></ul><figure class="lz ma mb mc gt ju"><div class="bz fp l di"><div class="md me l"/></div></figure><p id="5fcd" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">这一点非常重要，否则您的typescript代码将无法构建。在运行启动脚本之前，这个命令在您的EB容器上运行。这里，我们运行build命令来生成您的输出目录。</p><ul class=""><li id="3f21" class="le lf it kh b ki kj km kn kq lg ku lh ky li lc mj lk ll lm bi translated">添加节点命令. config</li></ul><figure class="lz ma mb mc gt ju"><div class="bz fp l di"><div class="md me l"/></div></figure><p id="e8b5" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">这将在构建环境后运行，并将启动您的节点应用程序。</p><p id="11eb" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated"><strong class="kh iu">步骤6:在EB上部署我们的节点应用</strong></p><p id="e01d" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">现在，我们已经准备好部署我们的节点应用程序。确保在您的环境中正确设置了AWS_ACCESS_KEY_ID和AWS_SECRET_ACCESS_KEY。</p><ul class=""><li id="8e6d" class="le lf it kh b ki kj km kn kq lg ku lh ky li lc mj lk ll lm bi translated">初始化您的电子商务平台</li></ul><figure class="lz ma mb mc gt ju"><div class="bz fp l di"><div class="md me l"/></div></figure><ul class=""><li id="7734" class="le lf it kh b ki kj km kn kq lg ku lh ky li lc mj lk ll lm bi translated">创建您的电子商务环境</li></ul><figure class="lz ma mb mc gt ju"><div class="bz fp l di"><div class="md me l"/></div></figure><ul class=""><li id="a3ac" class="le lf it kh b ki kj km kn kq lg ku lh ky li lc mj lk ll lm bi translated">部署您的EB应用程序</li></ul><figure class="lz ma mb mc gt ju"><div class="bz fp l di"><div class="md me l"/></div></figure><ul class=""><li id="95f6" class="le lf it kh b ki kj km kn kq lg ku lh ky li lc mj lk ll lm bi translated">如果你打开AWS控制台，进入EB页面，你应该会看到类似这样的内容</li></ul><figure class="lz ma mb mc gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mk"><img src="../Images/e65d388c45762bb2d47816a36dfd0c83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Xo8m5g0Hgf6ruhmTePOlIg.png"/></div></div></figure><ul class=""><li id="1fc7" class="le lf it kh b ki kj km kn kq lg ku lh ky li lc mj lk ll lm bi translated">在浏览器上打开应用程序</li></ul><figure class="lz ma mb mc gt ju"><div class="bz fp l di"><div class="md me l"/></div></figure><p id="1113" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">🎉🎉🎉🎉用typescript编写的Koa应用程序已成功部署，并且端点是可访问的</p><figure class="lz ma mb mc gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ml"><img src="../Images/cbb7daf786114f7641c4fa0c10d7fd64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hYKYn_yDyVd1LokLOHTbwQ.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">KOA端点</figcaption></figure><p id="ea2e" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated"><strong class="kh iu">步骤7:终止环境</strong></p><p id="ed4e" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">如果您将此作为测试运行，并且不再需要它，那么您可以像这样轻松地终止整个环境</p><figure class="lz ma mb mc gt ju"><div class="bz fp l di"><div class="md me l"/></div></figure><p id="cc5d" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">这将负责删除ec2实例和所有其他相关服务。</p><p id="8cb1" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">你可以从这里查看这篇文章的代码<a class="ae ld" href="https://github.com/appletreeat56/koajs-example" rel="noopener ugc nofollow" target="_blank">https://github.com/appletreeat56/koajs-example</a></p><p id="e7d1" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated"><strong class="kh iu">参考</strong></p><ul class=""><li id="4d5d" class="le lf it kh b ki kj km kn kq lg ku lh ky li lc mj lk ll lm bi translated"><a class="ae ld" href="https://khalilstemmler.com/blogs/typescript/node-starter-project/#Create-a-tsconfigjson" rel="noopener ugc nofollow" target="_blank">https://khalilstemmler . com/blogs/typescript/node-starter-project/# Create-a-tsconfigjson</a></li><li id="3f91" class="le lf it kh b ki ln km lo kq lp ku lq ky lr lc mj lk ll lm bi translated"><a class="ae ld" href="https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/eb-cli3-install.html#eb-cli3-install.scripts" rel="noopener ugc nofollow" target="_blank">https://docs . AWS . Amazon . com/elastic beanstalk/latest/DG/e b-CLI 3-install . html # e b-CLI 3-install . scripts</a></li><li id="e97f" class="le lf it kh b ki ln km lo kq lp ku lq ky lr lc mj lk ll lm bi translated"><a class="ae ld" href="https://medium.com/@lhviet88/deploy-a-typescript-expressjs-into-elasticbeanstalk-nodejs-server-8381e00e7e52" rel="noopener">https://medium . com/@ lhviet 88/deploy-a-typescript-express js-into-elastic beanstalk-nodejs-server-8381 e00 e7e 52</a></li></ul></div><div class="ab cl mm mn hx mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="im in io ip iq"><p id="6f9f" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">感谢您的阅读，如果您想支持我，请关注我，成为会员来支持更广泛的社区<a class="ae ld" href="https://medium.com/@metacollective/membership" rel="noopener">https://medium.com/@metacollective/membership</a></p></div></div>    
</body>
</html>