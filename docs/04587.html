<html>
<head>
<title>Writing Your First REST API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">编写您的第一个REST API</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/writing-your-first-rest-api-b1f1ec7fd124?source=collection_archive---------1-----------------------#2020-07-05">https://levelup.gitconnected.com/writing-your-first-rest-api-b1f1ec7fd124?source=collection_archive---------1-----------------------#2020-07-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/3109b98b7b48145a9172f20313fe0c96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*UvDk5h6VuSjsCoAP"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">图为<a class="ae jd" href="https://unsplash.com/@tma?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">天马</a>在<a class="ae jd" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a></figcaption></figure><div class=""/><div class=""><h2 id="8be8" class="pw-subtitle-paragraph kd jf jg bd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dk translated">编写API的完整演练指南。</h2></div><p id="79ed" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">API(应用程序编程接口)是两个程序相互通信的一组规则。API可用于返回数据、文件和附加信息。简而言之，这是一个抽象概念，因此其他人可以在不了解业务逻辑的情况下利用该应用程序的功能。</p><p id="b106" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们举个例子来学习一下:假设你在一家餐厅，服务员是一个API，厨房是服务器。你给那个服务员点餐，然后那个服务员去厨房把你点的菜给厨师，然后厨师完成那个订单，服务员给你上那个订单。API就是这样工作的，它们提供了两个应用程序之间的接口。您请求端点，该端点为您提供该请求。但是在这整个过程中，你的程序在和另一个程序进行通信，所有的代码对你都是隐藏的。</p><p id="1543" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">REST代表代表性状态转移。这是一种设计API的架构风格，由Roy Fielding在2000年首次提出。在REST中，每个URL被称为一个<strong class="kx jh">请求</strong>，而您得到的数据被称为<strong class="kx jh">响应</strong>。这是一个设计指南，而不是工具或任何软件。</p><p id="6109" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在创建API之前，请确保您的计算机上安装了节点。要安装Node.js，请访问<a class="ae jd" href="https://nodejs.org/" rel="noopener ugc nofollow" target="_blank">节点网站</a>。</p></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><h1 id="69d6" class="ly lz jg bd ma mb mc md me mf mg mh mi km mj kn mk kp ml kq mm ks mn kt mo mp bi translated">用Express和Node.js创建REST API</h1><p id="8311" class="pw-post-body-paragraph kv kw jg kx b ky mq kh la lb mr kk ld le ms lg lh li mt lk ll lm mu lo lp lq ij bi translated">首先，创建一个用于存储文件和文件夹的文件夹。就叫test-api吧，你想怎么叫都行。现在转到该目录并在命令行中运行<code class="fe mv mw mx my b"><strong class="kx jh">npm init -y</strong></code>。它将初始化一个空目录用于node.js，并创建一个名为<strong class="kx jh"> package.json </strong>的文件。package.json文件包含了很多关于你的项目的信息，比如应用程序的名字，关于你的项目的描述，作者的名字，依赖关系，以及依赖关系。你可以随时改变它。所以，让我们改变一些信息:</p><figure class="mz na nb nc gt is"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="db2d" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在上面的脚本中，我们创建了一个命令运行，并将它用于npm。当你运行<code class="fe mv mw mx my b"><strong class="kx jh">npm start</strong></code>时，它将被执行为<code class="fe mv mw mx my b">node server.js</code>，其中server.js是我们应用程序的主文件，你可以随意命名。</p></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><p id="c1a9" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">让我们创建一个server.js文件。但是首先，我们必须安装express，运行给定命令:</p><p id="fc78" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><code class="fe mv mw mx my b">npm install express --save</code></p><p id="5464" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">它将安装express并保存到package.json。有一件事你已经注意到，另一个名为<strong class="kx jh"> node_modules </strong>的文件夹被创建。在node_modules文件夹中，将保存所有的库和包。</p></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><p id="2acb" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在让我们创建server.js文件并键入给定的代码。</p><figure class="mz na nb nc gt is"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="1985" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在上面，我们已经导入了express，然后通过调用express函数初始化了一个app，然后使用listen方法，我们已经在端口5000上创建了一个服务器。当您运行<code class="fe mv mw mx my b"><strong class="kx jh">npm run</strong></code>命令时，它将在端口5000上运行服务器。当你打开<a class="ae jd" href="https://localhost:5000/" rel="noopener ugc nofollow" target="_blank"> https://localhost:5000 </a>时，它将不会显示任何内容，因为我们还没有创建任何路由。我说的路线是指一条像https://github.com/rajeshberwal那样的路</p><p id="a5b1" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">但是在创建任何路由之前，首先要了解一些我们在web开发中使用的HTTP方法。</p><ol class=""><li id="21f5" class="nf ng jg kx b ky kz lb lc le nh li ni lm nj lq nk nl nm nn bi translated"><strong class="kx jh"> GET </strong> : get请求用于从web上检索数据，例如，当你打开我们的文章时，你发出一个GET请求。</li><li id="fb7a" class="nf ng jg kx b ky no lb np le nq li nr lm ns lq nk nl nm nn bi translated"><strong class="kx jh"> POST </strong> : post请求用于向服务器发送数据，例如用户信息，如密码、用户名或任何个人信息。</li><li id="3015" class="nf ng jg kx b ky no lb np le nq li nr lm ns lq nk nl nm nn bi translated"><strong class="kx jh"> PUT </strong>:用于更新服务器上的数据</li><li id="f23e" class="nf ng jg kx b ky no lb np le nq li nr lm ns lq nk nl nm nn bi translated"><strong class="kx jh">删除</strong>:用于从服务器上删除一条信息</li></ol></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><p id="3c35" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">因此，让我们创建一个对主页的get请求。</p><figure class="mz na nb nc gt is"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="7534" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在，再次运行<code class="fe mv mw mx my b"><strong class="kx jh">npm run</strong></code>命令，在浏览器中打开<a class="ae jd" href="http://localhost:5000/" rel="noopener ugc nofollow" target="_blank"> http://localhost:5000 </a>。然后你会看到<strong class="kx jh"> Hello world！在主页上。</strong></p><p id="f6b6" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在上面的代码中/表示我们的主主页路由，而在一个方法中，我们要先传递两个东西，一个是路由，一个是中间件函数。中间件功能用于为该路由创建功能。现在让我们创建一个用户路由。</p><p id="1f68" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">每当有人调用我们的用户路由，就会得到用户的信息。我们将把剩余的路线存储在<strong class="kx jh">路线</strong>文件夹中。你可以把它们保存在任何你想保存的地方。但是将路径存储在<strong class="kx jh"> routes </strong>文件夹中是一种标准的方式。</p></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><p id="6d43" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在当前目录中创建文件夹路由，并创建另一个名为users.js的文件。在用户文件中，我们将创建一些虚拟用户。</p><figure class="mz na nb nc gt is"><div class="bz fp l di"><div class="nd ne l"/></div></figure></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><p id="fa94" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在，将这条路径导入我们的主server.js文件。</p><figure class="mz na nb nc gt is"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="2994" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在users.js文件中，我们从express导入路由器。然后，我们创建了两条路线，第一条是<strong class="kx jh">/用户，</strong>，第二条是<strong class="kx jh">/用户/{用户id} </strong>。</p><p id="ce8f" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">当有人调用用户route时，他们将获得所有用户的数据，当他们使用id <code class="fe mv mw mx my b">user/1</code>指定用户时，他们将获得与该用户相关的数据。然后，我们导出了该路由器。我们已经在主server.js文件中导入了该路由。</p><p id="dd6c" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在server.js文件中，我们通过use方法使用了它。它接受两个参数，第一个是我们想要显示数据的路由，第二个是模块。</p><p id="1061" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">当我们运行命令<code class="fe mv mw mx my b"><strong class="kx jh">npm start</strong></code>时，我们可以在http://localhost:5000/users route上看到所有用户的信息，当我们指定一个id http://localhost:5000/users/1时，它将只返回该用户的数据，如果id不可用，它将显示<strong class="kx jh">“User not found”</strong></p><p id="4bfb" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在<a class="ae jd" href="http://localhost:5000/users" rel="noopener ugc nofollow" target="_blank">上http://localhost:5000/users </a></p><figure class="mz na nb nc gt is"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="8916" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果id可用，则:<a class="ae jd" href="http://localhost:5000/users/0" rel="noopener ugc nofollow" target="_blank">http://localhost:5000/users/0</a></p><figure class="mz na nb nc gt is"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="7494" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果无法识别:</p><figure class="mz na nb nc gt is"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="de0e" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">您已经使用Node.js和express创建了第一个API。您可以使用这些知识来开发您的应用程序。您可以使用其他HTTP方法来增加它的功能。</p></div></div>    
</body>
</html>