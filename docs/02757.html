<html>
<head>
<title>Improve the UX of your Next.js App in 3 Minutes with a Page Loading Indicator</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用页面加载指示器，在3分钟内提高Next.js应用程序的UX</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/improve-ux-of-your-next-js-app-in-3-minutes-with-page-loading-indicator-3a422113304d?source=collection_archive---------0-----------------------#2020-04-03">https://levelup.gitconnected.com/improve-ux-of-your-next-js-app-in-3-minutes-with-page-loading-indicator-3a422113304d?source=collection_archive---------0-----------------------#2020-04-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/0c9f6c1de217bf2e454cfda99afdfa27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hr2-7-up3aUzNw9jDUV53g.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">照片由<a class="ae kc" href="https://unsplash.com/@marcinjozwiak?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Marcin Jozwiak </a>在<a class="ae kc" href="https://unsplash.com/s/photos/clarity?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="e86b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Next.js成为构建React应用的标准之一。最近，我注意到next.js应用程序(以及其他SPA应用程序)中常见的一个UX问题。</p><p id="8d95" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">客户端导航是SPA应用程序的典型特征，它有很多优点。Next.js提供了一个易于使用的工具，比如使用客户端导航的<code class="fe lb lc ld le b">Link</code>组件和<code class="fe lb lc ld le b">Router</code>。但是尽管它有很多优点，它也有一个小小的UX缺点。</p><p id="5061" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">不触发浏览器的加载指示</strong>，这在多页面网站的情况下通常会发生。如果没有加载指示器，<strong class="kf ir">当页面只是通过JavaScript获取内容时，看起来好像页面被卡住了</strong>。这可能会让用户感到困惑，并对网站用户体验产生负面影响。</p><p id="2576" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您可以在下面的示例中看到这个问题:</p><figure class="lg lh li lj gt jr gh gi paragraph-image"><div class="gh gi lf"><img src="../Images/eec4d6cd89fde8942ead788c4771353e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1376/1*CbGpEiuPxe7YIZ5AbanJWQ.gif"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">Next.js应用程序中的客户端导航，不加载指示器</figcaption></figure><p id="7fb0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">添加自定义加载指示器解决了这个问题。看看添加了加载器的同一个应用程序。</p><figure class="lg lh li lj gt jr gh gi paragraph-image"><div class="gh gi lf"><img src="../Images/70e62d64380e0a4e8c5e3bce078932ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1376/1*MOL611sZuLF1Asdn-P9RBQ.gif"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">Next.js应用程序中带有加载指示器的客户端导航</figcaption></figure><p id="5085" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我想你注意到了不同之处。我将向你展示如何建立这个漂亮的进度条</p><h1 id="df1b" class="lk ll iq bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">将加载指示器添加到next.js项目中</h1><p id="8849" class="pw-post-body-paragraph kd ke iq kf b kg mi ki kj kk mj km kn ko mk kq kr ks ml ku kv kw mm ky kz la ij bi translated">这个过程非常简单:</p><ul class=""><li id="f9fe" class="mn mo iq kf b kg kh kk kl ko mp ks mq kw mr la ms mt mu mv bi translated">安装<code class="fe lb lc ld le b">nprogress</code>包</li><li id="482b" class="mn mo iq kf b kg mw kk mx ko my ks mz kw na la ms mt mu mv bi translated">将<code class="fe lb lc ld le b">nprogress</code>动画API绑定到Next.js路由器中的导航事件</li></ul><h2 id="a60a" class="nb ll iq bd lm nc nd dn lq ne nf dp lu ko ng nh ly ks ni nj mc kw nk nl mg nm bi translated">安装程序</h2><p id="d4f7" class="pw-post-body-paragraph kd ke iq kf b kg mi ki kj kk mj km kn ko mk kq kr ks ml ku kv kw mm ky kz la ij bi translated"><code class="fe lb lc ld le b">nprogress</code>是一个提供动画进度条的包。使用以下命令之一安装它</p><pre class="lg lh li lj gt nn le no np aw nq bi"><span id="2bff" class="nb ll iq le b gy nr ns l nt nu">npm i nprogress</span></pre><p id="92ca" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">或者</p><pre class="lg lh li lj gt nn le no np aw nq bi"><span id="3f33" class="nb ll iq le b gy nr ns l nt nu">yarn add nprogress</span></pre><h2 id="3613" class="nb ll iq bd lm nc nd dn lq ne nf dp lu ko ng nh ly ks ni nj mc kw nk nl mg nm bi translated">绑定到导航事件</h2><p id="046a" class="pw-post-body-paragraph kd ke iq kf b kg mi ki kj kk mj km kn ko mk kq kr ks ml ku kv kw mm ky kz la ij bi translated">我们需要在客户端导航启动时触发<code class="fe lb lc ld le b">nprogress </code>动画，并在导航完成时停止动画。我们可以使用next.js中内置的<code class="fe lb lc ld le b">Router </code>的事件来绑定它们。我将事件绑定在一个定制的<code class="fe lb lc ld le b">App</code>组件中，以保持代码有组织。</p><p id="a0a4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lb lc ld le b">_app.js</code></p><pre class="lg lh li lj gt nn le no np aw nq bi"><span id="817e" class="nb ll iq le b gy nr ns l nt nu">import Router from 'next/router';<br/>import NProgress from 'nprogress'; //nprogress module<br/>import 'nprogress/nprogress.css'; //styles of nprogress</span><span id="b478" class="nb ll iq le b gy nv ns l nt nu">//Binding events. <br/>Router.events.on('routeChangeStart', () =&gt; NProgress.start()); Router.events.on('routeChangeComplete', () =&gt; NProgress.done()); Router.events.on('routeChangeError', () =&gt; NProgress.done());</span><span id="4e3e" class="nb ll iq le b gy nv ns l nt nu">function MyApp({ Component, pageProps }) {<br/>    return &lt;Component {...pageProps} /&gt;<br/>}</span><span id="098b" class="nb ll iq le b gy nv ns l nt nu">export default MyApp;</span></pre><p id="5683" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">上面的代码非常简单明了。只要确保事件处理程序在组件之外绑定，以避免绑定几个处理程序。CSS在最新的Next.js v9.3中工作。如果你使用旧版本，你需要安装一个插件来加载CSS。我推荐用<code class="fe lb lc ld le b">@webdeb/next-styles</code></p><p id="d9a2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">就是这样！几分钟后，你提高了Next.js应用程序的UX。</p></div><div class="ab cl nw nx hu ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="ij ik il im in"><p id="39dd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">感谢阅读！:)</strong></p><p id="22a4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">我是Vova Pilipchatin，一名自由软件工程师和网页开发者。</strong></p><p id="14a0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">如果你喜欢这篇文章，请关注我的</strong> <a class="ae kc" href="https://twitter.com/VPilipchatin" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">推特</strong> </a> <strong class="kf ir">。</strong></p><p id="99ed" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">在那里，我分享了我在开发网络应用程序、启动SaaS项目和建立自由职业者业务方面所学到的知识:)</strong></p></div></div>    
</body>
</html>