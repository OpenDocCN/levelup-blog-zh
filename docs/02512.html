<html>
<head>
<title>Introduction to Closures in Swift</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Swift中的闭包介绍</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/introduction-to-closures-in-swift-ea75477e8f0b?source=collection_archive---------9-----------------------#2020-03-18">https://levelup.gitconnected.com/introduction-to-closures-in-swift-ea75477e8f0b?source=collection_archive---------9-----------------------#2020-03-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="1e46" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">新手对新手的终结</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/3931348226a00ac7634ac19ff70c158a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jn-g0Pc5pO-MxrmTjddHQg.png"/></div></div></figure><h2 id="8788" class="kr ks iq bd kt ku kv dn kw kx ky dp kz la lb lc ld le lf lg lh li lj lk ll lm bi translated"><strong class="ak">为什么您需要了解闭包？</strong></h2><p id="8c26" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv la lw lx ly le lz ma mb li mc md me mf ij bi translated">当您想要将一段代码作为参数传递给想要异步执行的方法时。</p><p id="35c6" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated">它们是Swift中特殊的一类函数，称为<strong class="lp ir">闭包，</strong>不用关键字<strong class="lp ir"> <em class="ml"> func </em> </strong>和函数名就可以定义。</p><h2 id="69a8" class="kr ks iq bd kt ku kv dn kw kx ky dp kz la lb lc ld le lf lg lh li lj lk ll lm bi translated"><strong class="ak">什么是闭包？</strong></h2><blockquote class="mm"><p id="1dde" class="mn mo iq bd mp mq mr ms mt mu mv mf dk translated"><em class="mw">“闭包</em>是自包含的功能块，可以在代码中传递和使用。”—苹果公司</p></blockquote><p id="41f2" class="pw-post-body-paragraph ln lo iq lp b lq mx jr ls lt my ju lv la mz lx ly le na ma mb li nb md me mf ij bi translated">闭包可以捕获和存储对任何常量(let)和变量(var)的引用。</p><p id="2ac7" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated">闭包的语法:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nc"><img src="../Images/e73b321066781a965b1aefb51ce80abe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LkI_0kqw9_4kZX0rgF9S5g.png"/></div></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk translated">句法</figcaption></figure><p id="5460" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated">让我用一个例子来解释一下</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nh"><img src="../Images/3fd9062b9f8bd01e31ff6341d92adebb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0HRYnWz2EeQ7EXzI5KwMnQ.png"/></div></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk translated">示例1</figcaption></figure><p id="991d" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated">这是一个简单的关闭它将打印<strong class="lp ir">‘只是爱关闭’</strong>。这里我们称闭包为<code class="fe ni nj nk nl b"><strong class="lp ir"><em class="ml">theClosure()</em></strong></code>，这个闭包不接受任何<strong class="lp ir"> </strong>参数，也不返回任何值，所以很简单。</p><p id="6710" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated">让我们看一个接受参数的闭包:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nm"><img src="../Images/4fc820117a289d4bfaf2ddeb63a08181.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i-hCkfF3wtJ8Z9DM7IqASg.png"/></div></div></figure><p id="658c" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated">这里我们将一个字符串传入<code class="fe ni nj nk nl b">theClosure</code>。(字符串)用于声明传递的值是一个字符串。在名称(变量)中声明传递的字符串</p><p id="f920" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated"><code class="fe ni nj nk nl b"><strong class="lp ir">in</strong></code>是将参数名与语句分开的关键字</p><p id="9c1c" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated"><code class="fe ni nj nk nl b"><strong class="lp ir"><em class="ml">-&gt;( )</em></strong></code>就是接受字符串，并返回我们需要的东西。</p><p id="3817" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated">糟糕..！我们在这里不返回任何东西，所以我们<code class="fe ni nj nk nl b"><strong class="lp ir">()</strong></code>把它留为空，否则我们会留下任何我们想要返回的数据类型。</p><p id="5ffd" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated">返回的另一个例子:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nn"><img src="../Images/d8011a24317052543d23cf19e1fc2a24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DBVSQApccn70PK16Mr1QhA.png"/></div></div></figure><p id="75ef" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated">这里我们传递一个字符串并返回一个字符串。</p><pre class="kg kh ki kj gt no nl np nq aw nr bi"><span id="4a67" class="kr ks iq nl b gy ns nt l nu nv">let resultingShit = ClosuretheHell("LOVEOFSWIFT")</span></pre><p id="e808" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated">这里用的这行是通过<code class="fe ni nj nk nl b">resultingShit</code>传递并得到返回值。</p><p id="255e" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated">希望你们理解，如果不遵循以下代码:</p><pre class="kg kh ki kj gt no nl np nq aw nr bi"><span id="dc8f" class="kr ks iq nl b gy ns nt l nu nv">while true {</span><span id="ba96" class="kr ks iq nl b gy nw nt l nu nv">  if you == "yes im understand"{</span><span id="376d" class="kr ks iq nl b gy nw nt l nu nv">    break</span><span id="b849" class="kr ks iq nl b gy nw nt l nu nv">  }</span><span id="8461" class="kr ks iq nl b gy nw nt l nu nv">}</span><span id="6417" class="kr ks iq nl b gy nw nt l nu nv">// come from first until you get it</span></pre><p id="e53a" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated">抱歉，如果我的基本知识让你感到厌烦，现在让我们再深入一点。</p><p id="0453" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated">将闭包作为函数参数传递</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nx"><img src="../Images/ff3b27027ca97112ce4538857beb951d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EH5V1MB8yeQn7Y4f4t_ivA.png"/></div></div></figure><p id="6db2" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated">这里第一个闭包类<strong class="lp ir"> func </strong> <code class="fe ni nj nk nl b">ClosurewithFunc</code>(函数)并打印(" 1 ")，然后它<strong class="lp ir">不会打印(" 2") </strong> <em class="ml">因为我们在这里没有调用闭包(</em>，所以它会有一种孤独的感觉并打印任何东西<em class="ml"/></p><p id="2c0b" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated">让我们看看同时调用<strong class="lp ir"> func和closure: </strong></p><pre class="kg kh ki kj gt no nl np nq aw nr bi"><span id="fbc8" class="kr ks iq nl b gy ns nt l nu nv">func ClosurewithFunc(Closure:()-&gt;()) {<br/>    print("1")<br/>    Closure()<br/>}<br/><br/>ClosurewithFunc(Closure:  {<br/><br/>    print("2")<br/>})</span></pre><p id="e9f5" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated">代码将打印(" 1 ")，然后在函数中我们调用closure作为<code class="fe ni nj nk nl b">Closure()</code>，所以现在closure也将打印(" 2 ")</p><p id="a11f" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated">现在向<strong class="lp ir">尾随关闭问好。</strong></p><h2 id="e672" class="kr ks iq bd kt ku kv dn kw kx ky dp kz la lb lc ld le lf lg lh li lj lk ll lm bi translated"><strong class="ak">什么是尾随闭包？</strong></h2><p id="fe1b" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv la lw lx ly le lz ma mb li mc md me mf ij bi translated">Swift允许您使用一种叫做<em class="ml">尾随闭包语法</em>的特殊语法。您不是将闭包作为参数传递，而是直接在大括号()内的函数之后传递它。这看起来很酷，尾随闭包语法在Swift中极其常见，所以值得习惯。</p><p id="4b30" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated">让我们举一个例子</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ny"><img src="../Images/44e0aef2bcfd8f35af1ac22f7b8049bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rKgQtAAfskEiRdf3Cc9JLA.png"/></div></div></figure><pre class="kg kh ki kj gt no nl np nq aw nr bi"><span id="f113" class="kr ks iq nl b gy ns nt l nu nv">here output be like </span><span id="1009" class="kr ks iq nl b gy nw nt l nu nv">1 </span><span id="313a" class="kr ks iq nl b gy nw nt l nu nv">2</span><span id="8fd2" class="kr ks iq nl b gy nw nt l nu nv">“end of function”</span></pre><p id="e9ec" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated">看这个例子</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nz"><img src="../Images/8dae0ff19287a7dc8d63ea0f8f30b1ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4Q7nr0ltUA-SHEf5htcpsA.png"/></div></div></figure><p id="97ed" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated">我们一直使用<code class="fe ni nj nk nl b">() -&gt; Void</code>来表示“不接受参数，不返回任何东西”，但是您可以继续使用您的闭包应该接受的任何参数的类型来填充<code class="fe ni nj nk nl b">()</code>。</p><pre class="kg kh ki kj gt no nl np nq aw nr bi"><span id="197f" class="kr ks iq nl b gy ns nt l nu nv">// OUTPUT BE LIKE <br/>1</span><span id="daee" class="kr ks iq nl b gy nw nt l nu nv">I'm passing value to closure here !!!!!!!!!!!!!!!!!!</span><span id="2208" class="kr ks iq nl b gy nw nt l nu nv">end of function </span></pre><p id="3d52" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated">嘿，来，让我们返回一些值，看看</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oa"><img src="../Images/178ea6d1e84d02c9c3369ee3864bb230.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pFyczEmSu0UmdIgM9mrP6w.png"/></div></div></figure><p id="5fea" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated">我们一直使用<code class="fe ni nj nk nl b">() -&gt; Void</code>来表示“不接受参数，不返回任何东西”，但是您可以用任何类型的数据来替换这个<code class="fe ni nj nk nl b">Void</code>，以强制闭包返回值。</p><h1 id="8807" class="ob ks iq bd kt oc od oe kw of og oh kz jw oi jx ld jz oj ka lh kc ok kd ll ol bi translated">速记参数名</h1><p id="3aab" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv la lw lx ly le lz ma mb li mc md me mf ij bi translated">Swift有一个速记语法，可以让你写得更短(哇，多么简单)。我们可以让Swift为闭包的参数自动命名，而不是编写<code class="fe ni nj nk nl b"><strong class="lp ir">string (variable) in</strong></code> <strong class="lp ir">，</strong>。这些是用美元符号命名的，然后是从0开始计数的数字。</p><p id="2dfe" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated">速记参数名称的示例:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi om"><img src="../Images/93cef34aa396007fbbd8b534f7af6ad9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_ighSMtA-bBSD1lhmktJBg.png"/></div></div></figure><p id="24f1" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated">**我们不需要任何变量来传递和返回值* *</p><pre class="kg kh ki kj gt no nl np nq aw nr bi"><span id="2135" class="kr ks iq nl b gy ns nt l nu nv">OUTPUT BE LIKE :<br/>“1”</span><span id="7b96" class="kr ks iq nl b gy nw nt l nu nv">“im catching “hai” and hai returning”</span><span id="a0fc" class="kr ks iq nl b gy nw nt l nu nv">“hai”</span></pre><h1 id="ff4c" class="ob ks iq bd kt oc od oe kw of og oh kz jw oi jx ld jz oj ka lh kc ok kd ll ol bi translated">多参数闭包</h1><p id="2db9" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv la lw lx ly le lz ma mb li mc md me mf ij bi translated"><strong class="lp ir"> (String，Int) </strong> String <strong class="lp ir"> - &gt; </strong>为第一个参数，<strong class="lp ir"> Int </strong> <strong class="lp ir"> - &gt; </strong>为第二个参数，依次类推。</p><p id="feb9" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated">例子</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi on"><img src="../Images/f72ee94da59be20cca94a0457de06acc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DvVkcYWRhAsZWWF_XiJlbw.png"/></div></div></figure><p id="1140" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated">并返回<strong class="lp ir"> $0，$1 </strong>，并根据您的需要继续返回多个参数。</p><blockquote class="mm"><p id="f034" class="mn mo iq bd mp mq mr ms mt mu mv mf dk translated">哦，结束，你就像曼莫汉·辛格博士一样简单</p></blockquote><p id="e014" class="pw-post-body-paragraph ln lo iq lp b lq mx jr ls lt my ju lv la mz lx ly le na ma mb li nb md me mf ij bi translated">好了，伙计们，让我停在这里。正如标题所示，我是一个新手，我从自己的错误中学到了很多，所以在这个博客中的任何错误，请通知我。</p></div><div class="ab cl oo op hu oq" role="separator"><span class="or bw bk os ot ou"/><span class="or bw bk os ot ou"/><span class="or bw bk os ot"/></div><div class="ij ik il im in"><p id="40b7" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated"><strong class="lp ir"> <em class="ml">觉得这本书好看吗？</em> </strong></p><p id="b8c3" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated"><em class="ml">推荐本帖(点击</em>👏<em class="ml">按钮)这样其他人也能看到……<br/></em>推特上联系我<em class="ml"/><a class="ae ov" href="https://twitter.com/Tonywilson_jpg" rel="noopener ugc nofollow" target="_blank"><strong class="lp ir"><em class="ml">托尼</em> </strong> </a></p></div></div>    
</body>
</html>