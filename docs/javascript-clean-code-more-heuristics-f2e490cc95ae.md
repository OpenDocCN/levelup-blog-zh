# JavaScript 干净代码—更多启发

> 原文：<https://levelup.gitconnected.com/javascript-clean-code-more-heuristics-f2e490cc95ae>

![](img/de2db174dd1132b1b25a09948fd3687c.png)

照片由[凯尔·格伦](https://unsplash.com/@kylejglenn?utm_source=medium&utm_medium=referral)在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄

糟糕的代码有很多独特的特征。在这篇文章中，我们将看看每一个和他们是什么。我们看更一般的代码味道。

# 不要武断

我们应该按照清晰的代码约定来构建我们的代码。不属于这个地方的代码不应该在那里。

如果一个团队对代码库有约定，那么每个人都应该遵守。否则，很快就会变得一团糟。

# 封装边界条件

边界条件应该放在函数或变量中，以便于访问和理解。

例如，如果我们想让变量`arr.length — 1`成为循环的结束索引变量，我们应该将它设置为如下:

```
const arr = [1, 2, 3];
const lastIndexOfArray = arr.length - 1;
for (let i = 0; i <= lastIndexOfArray; i++) {
  console.log(arr[i]);
}
```

我们可以看到，一旦我们把常数`lastIndexOfArray`赋值给`arr.length — 1`，那么我们就知道它是数组的最后一个索引。

我们不再需要考虑这意味着什么。从常量名，我们知道它的意思。

同样，对于其他边界情况，我们也应该这样做，这样我们就不必猜测为什么我们在不同的地方有`+1`或`-1`。

# 函数应该只下降一个抽象层次

这意味着函数应该只做一件事。如果我们要求它在不同的抽象层次上做另一件事，那么我们应该写一个新的函数并调用它。

因为函数应该很小，应该只做一件事，所以它们不应该在不同的层次上接触不同的东西。

# 保持高水平的可配置数据

将配置数据保持在一个较高的水平，让它们在我们的视线之内。因为我们在许多地方使用它们，所以它们处于高水平是有意义的。

如果我们把它们放在一个高层次上，那么它们也很容易改变。

# 避免传递导航

我们应该避免`A`引用`B`而`B`引用`C`的代码结构。

我们的大脑更难理解这种导航。此外，它向我们展示了更多耦合在一起的代码。

我们不应该公开我们不想公开的代码。

例如，类似于:

```
foo.getBar().getBaz().doSomething();
```

上面的代码不好，因为我们必须用`getBar`获得`Bar`实例，然后用`Bar`实例，我们必须用`getBaz`获得`Baz`实例。然后我们最终在`Baz`实例上调用`doSomething`。

这是脆弱的代码，因为如果链条中的任何一点断裂，整个链条都会断裂。

他们中的任何一个改变都会成为一个问题。我们应该通过改变实现来去掉这个可传递的导航代码，这样我们就没有这种结构了。

![](img/98a7517c307f79a6c5c018fdfd719f43.png)

[Dani Marroquin](https://unsplash.com/@daniimarr?utm_source=medium&utm_medium=referral) 在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄的照片

# 选择描述性名称

描述性地给事物命名很重要。名字告诉我们很多关于一段代码在做什么。因此，我们应该选择能说明它在存储什么或做什么的名字。

像`x`和`y`这样的名字并不是变量的好名字，因为它们没有告诉我们关于它们存储了什么。

另一方面，`numApples`和`numOranges`是更好的名字，因为它们告诉我们它们在做什么。

# 在适当的抽象层次上选择名称

当我们用名字给事物命名时，我们应该考虑代码的抽象层次。

例如，如果我们有下面的`Phone`类:

```
class Phone {
  dial() {}
}
```

然后，当我们实际上想要表达我们正在使用它来调用另一个人时，我们对`dial`方法的命名过于具体。

大多数手机已经没有拨号功能了，所以给它们起这样的名字没有任何意义。一些手机有键盘，智能手机有屏幕。

因此，我们应该将其重命名为更通用的名称，如下所示:

```
class Phone {
  call() {}
}
```

# 明确的名称

名字不应该模棱两可。它们不应该有双重含义，让人不得不去猜测这个名字的真实含义。

猜测是不好的，因为人们可能会得出错误的结论，并在更改代码时出错。

例如，如果我们想创建一个函数来重命名一个文件，我们不应该叫它`rename`，因为它没有告诉我们我们要重命名什么。取而代之的是`renameFile`更合适，因为我们知道这个函数是用来重命名文件的。

# 结论

当我们给事物命名时，我们应该清楚。名称应该是描述性的和明确的。

此外，我们应该在正确的抽象层次上命名事物，因此应该通用的名称应该通用，反之亦然。

可传递导航也不好，因为它会创建脆弱的代码。我们不应该为了做某件事而有一系列获取不同类型对象的函数调用。

最后，我们应该封装边界条件，以便我们清楚它是什么以及为什么我们有它。