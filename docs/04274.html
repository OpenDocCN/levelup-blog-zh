<html>
<head>
<title>DOM Manipulation — Changing Nodes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">DOM操作—更改节点</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/dom-manipulation-changing-nodes-184ab4b63ed1?source=collection_archive---------10-----------------------#2020-06-17">https://levelup.gitconnected.com/dom-manipulation-changing-nodes-184ab4b63ed1?source=collection_archive---------10-----------------------#2020-06-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/bd12dd8a529bcfbfeeb8fd241f2456f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*aVRmwIxkVbOq7ur3"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">照片由<a class="ae kf" href="https://unsplash.com/@amandakariella?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">阿曼达·卡瑞拉</a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="fca8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">JavaScript是世界上最流行的编程语言之一。为了有效地使用它，我们必须了解它的基本知识。</p><p id="c189" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本文中，我们将研究如何创建和操作节点。</p><h1 id="2f08" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">创建元素和文本节点</h1><p id="e4a0" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">有两种方法可以让我们创建节点。一个是<code class="fe mh mi mj mk b">createElement</code>来创建元素节点。还有创建文本节点的<code class="fe mh mi mj mk b">createTextNode</code>方法。</p><p id="fb3c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以使用<code class="fe mh mi mj mk b">createAttribute</code>方法创建属性，使用<code class="fe mh mi mj mk b">createComment</code>创建注释。</p><p id="bcfb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要创建一个元素，我们可以这样写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="b070" class="mt lf it mk b gy mu mv l mw mx">const elementNode = document.createElement('div');</span></pre><p id="880a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们创建一个div。</p><p id="af0b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了创建一个文本节点，我们编写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="d425" class="mt lf it mk b gy mu mv l mw mx">const textNode = document.createTextNode('hello');</span></pre><h1 id="b522" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">使用JavaScript字符串创建和添加元素和文本节点</h1><p id="34c9" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以通过用字符串设置<code class="fe mh mi mj mk b">innerHTML</code>方法来添加节点。</p><p id="3d6e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="9136" class="mt lf it mk b gy mu mv l mw mx">document.getElementById('foo').innerHTML = '&lt;strong&gt;foo&lt;/strong&gt;';</span></pre><p id="30b4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">将一个节点放入下面的div:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="98e1" class="mt lf it mk b gy mu mv l mw mx">&lt;div id="foo"&gt;&lt;/div&gt;</span></pre><p id="4bc7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们有ID为<code class="fe mh mi mj mk b">foo</code>的div。</p><p id="6f67" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">设置<code class="fe mh mi mj mk b">innerHTML</code>属性将创建<code class="fe mh mi mj mk b">strong</code>元素节点并将其放入div。</p><p id="da38" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要替换封闭节点，我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="f7ad" class="mt lf it mk b gy mu mv l mw mx">document.getElementById('foo').outerText = 'foo';</span></pre><p id="e61e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">用文本节点<code class="fe mh mi mj mk b">'foo'</code>替换div。</p><p id="a461" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">insertAdjancentHTML</code>方法只适用于元素节点。这比设置<code class="fe mh mi mj mk b">innerHTML</code>或创建一个新节点更精确。</p><p id="6533" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，如果我们有下面的HTML:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="6ad0" class="mt lf it mk b gy mu mv l mw mx">&lt;div id='foo'&gt;<br/>  &lt;p&gt;<br/>    foo<br/>  &lt;/p&gt;<br/>&lt;/div&gt;</span></pre><p id="944b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="7bf0" class="mt lf it mk b gy mu mv l mw mx">const foo = document.getElementById('foo');</span><span id="41ec" class="mt lf it mk b gy my mv l mw mx">foo.insertAdjacentHTML('beforebegin', '&lt;p&gt;bar&lt;/p&gt;');</span></pre><p id="36dd" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们在带有文本<code class="fe mh mi mj mk b">foo</code>的p元素前添加一个p标签。位置是第一个参数，内容是第二个参数。</p><p id="7f5e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">其他位置包括<code class="fe mh mi mj mk b">'afterbwegin'</code>、<code class="fe mh mi mj mk b">'beforeend'</code>和<code class="fe mh mi mj mk b">'afterend'</code>。</p><p id="a3d2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">innerHTML</code>将字符串中的HTML元素转换成实际的DOM节点。</p><p id="a6fb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">textContent</code>只能构造文本节点。</p><h1 id="a2e5" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">将DOM树的一部分提取为JavaScript字符串</h1><p id="2581" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated"><code class="fe mh mi mj mk b">innerHTML</code>、<code class="fe mh mi mj mk b">outerHTML</code>和<code class="fe mh mi mj mk b">textContent</code>是我们用来创建和添加节点的。</p><p id="94b1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们也可以用它们来获取内容。</p><p id="95b4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，如果我们有:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="09fb" class="mt lf it mk b gy mu mv l mw mx">&lt;div id='foo'&gt;<br/>  &lt;p&gt;<br/>    foo<br/>  &lt;/p&gt;<br/>&lt;/div&gt;</span></pre><p id="4379" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="62f2" class="mt lf it mk b gy mu mv l mw mx">console.log(document.getElementById('foo').innerHTML);</span></pre><p id="015e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">获取div的内容。</p><p id="5320" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">innerText</code>会给我们文本节点。例如，我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="5f8e" class="mt lf it mk b gy mu mv l mw mx">console.log(document.getElementById('foo').innerText);</span></pre><p id="4f74" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了得到<code class="fe mh mi mj mk b">foo</code>。</p><h1 id="bc61" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">向DOM添加节点对象</h1><p id="1d46" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated"><code class="fe mh mi mj mk b">appendChild</code>和<code class="fe mh mi mj mk b">insertBefore</code>可以用来向DOM添加节点对象。</p><p id="85ad" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">appendChild</code>是给给定的元素增加一个子元素。</p><p id="9606" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">insetBefore</code>让我们在当前元素之前添加一个元素。</p><p id="c68c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以通过编写来使用<code class="fe mh mi mj mk b">appendChild</code>:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="0ecf" class="mt lf it mk b gy mu mv l mw mx">const elementNode = document.createElement('p');<br/>elementNode.innerText = 'hello';</span><span id="c3a1" class="mt lf it mk b gy my mv l mw mx">document.getElementById('foo').appendChild(elementNode);</span></pre><p id="7cc4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">假设我们有下面的HTML:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="25a3" class="mt lf it mk b gy mu mv l mw mx">&lt;div id='foo'&gt;<br/>  foo<br/>&lt;/div&gt;</span></pre><p id="41d2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们在文本<code class="fe mh mi mj mk b">foo</code>后添加了一个新节点作为子节点。</p><p id="1012" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">insertBefore</code>接受两个参数。第一个是要插入的元素。</p><p id="dc44" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">第二个是我们要在第一个参数中的节点之前插入的元素。</p><p id="fe4d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们之前插入的节点必须是我们调用<code class="fe mh mi mj mk b">insertBefore</code>的节点的子节点。</p><p id="5ac6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">所以给定下面的HTML:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="0677" class="mt lf it mk b gy mu mv l mw mx">&lt;div id='foo'&gt;<br/>  &lt;p&gt;<br/>    foo<br/>  &lt;/p&gt;<br/>&lt;/div&gt;</span></pre><p id="a455" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以这样写，在p元素之前插入一个元素:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="8a4a" class="mt lf it mk b gy mu mv l mw mx">const elementNode = document.createElement('p');<br/>elementNode.innerText = 'hello';</span><span id="5a92" class="mt lf it mk b gy my mv l mw mx">const foo = document.getElementById('foo')<br/>foo.insertBefore(elementNode, foo.firstChild);</span></pre><p id="93eb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们用p元素创建了一个p元素，然后将它传递给<code class="fe mh mi mj mk b">insertBefore</code>方法。</p><p id="655c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">foo.firstChild</code>是p元素，因为父div是<code class="fe mh mi mj mk b">foo</code>。</p><p id="c5a1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们让<code class="fe mh mi mj mk b">hello</code>显示在<code class="fe mh mi mj mk b">foo</code>之前。</p><h1 id="24f4" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">使用removeChild()删除节点</h1><p id="db66" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">要删除一个子元素，我们可以使用<code class="fe mh mi mj mk b">removeChild</code>方法来删除一个子元素。</p><p id="9adb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，给定以下HTML:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="e75f" class="mt lf it mk b gy mu mv l mw mx">&lt;div id='foo'&gt;<br/>  &lt;p&gt;<br/>    foo<br/>  &lt;/p&gt;<br/>&lt;/div&gt;</span></pre><p id="2242" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="f3b6" class="mt lf it mk b gy mu mv l mw mx">const p = document.querySelector('p');<br/>p.parentNode.removeChild(p);</span></pre><p id="7457" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">从div中移除p元素。</p><p id="f236" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们得到了想要移除的元素的直接父元素，然后我们可以移除我们想要的元素。</p><h1 id="d2ba" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">用replaceChild()替换子元素</h1><p id="eaee" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated"><code class="fe mh mi mj mk b">replaceChild</code>方法与<code class="fe mh mi mj mk b">removeChild</code>相似。我们获取父项，然后调用<code class="fe mh mi mj mk b">replaceChild</code>来替换该项。</p><p id="26e0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，如果我们有:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="d221" class="mt lf it mk b gy mu mv l mw mx">&lt;div id='foo'&gt;<br/>  &lt;p&gt;<br/>    foo<br/>  &lt;/p&gt;<br/>&lt;/div&gt;</span></pre><p id="959e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="e79a" class="mt lf it mk b gy mu mv l mw mx">const p = document.querySelector('p');<br/>const bar = document.createTextNode('bar');</span><span id="7b63" class="mt lf it mk b gy my mv l mw mx">p.parentNode.replaceChild(bar, p);</span></pre><p id="c7b8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">用包含<code class="fe mh mi mj mk b">bar</code>的文本节点替换p元素。</p><p id="2f94" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">第一个参数是我们想要用来替换现有节点的新节点。</p><p id="cbc6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">第二个参数是我们想要替换的原始节点。</p><figure class="ml mm mn mo gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mz"><img src="../Images/d39e602e1310bacf8af50b6663fcec5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ZQtI0gtSo2vpnY2Z"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">兹登尼克·马赫亚克在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><h1 id="fdbf" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">结论</h1><p id="fab6" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以用内置的DOM节点方法创建文本和元素节点。</p><p id="e0a8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">此外，我们可以通过获取直接的父元素来移除和替换子元素，然后调用方法来移除或替换我们想要的元素。</p></div></div>    
</body>
</html>