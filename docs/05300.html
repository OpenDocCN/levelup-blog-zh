<html>
<head>
<title>Learning C++: Using Arrays</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">学习C++:使用数组</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/learning-c-using-arrays-2b7d95cd2a29?source=collection_archive---------19-----------------------#2020-08-17">https://levelup.gitconnected.com/learning-c-using-arrays-2b7d95cd2a29?source=collection_archive---------19-----------------------#2020-08-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/86915de8031a1592f16e23ea83f1211e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*IsZHMMU8YQWOIEcD"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">由<a class="ae kf" href="https://unsplash.com/@zburival?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">兹比内克·布里瓦尔</a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="dfeb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">数组是计算机科学中最常见的数据结构，因为它是每种编程语言的一部分，尽管在某些语言中它可能被称为其他东西，如列表。在这篇文章中，我将讨论如何在C++中创建和使用数组。我将把我的讨论限制在一维数组，我将在以后的文章中讨论多维数组。</p><h1 id="2be1" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">定义的数组</h1><p id="e4b8" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">数组是一组连续的内存地址，用于存储特定数据类型的数据。数组必须用名称、数据类型和大小来声明，即数组中要存储的数据元素的数量。</p><p id="d44c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在C++中，数组大小是固定的，当程序需要比最初分配的更多的存储空间时，这会产生问题。</p><p id="df3f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">通过元素在数组中的索引位置来访问数组元素。数组元素从位置0开始排序，最后一个元素存储在比数组中元素数小1的索引位置。</p><h1 id="5015" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">声明数组</h1><p id="9e92" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">正如我上面提到的，数组是用数据类型、名称和大小来声明的。通常为数组的大小指定一个常数，因为任何使用数组的程序都需要多次引用数组的大小。</p><p id="eb00" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您可以声明一个数组，而不指定要存储在数组中的数据，或者您可以提供一个包含数组数据的初始化列表。</p><p id="d7f8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下面是第一种数组声明的语法模板:</p><p id="1551" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="mh">数据类型数组名【元素个数】；</em></p><p id="75dd" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下面是第二种数组声明的语法模板:</p><p id="cd46" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="mh">数据类型array-name[(number-of-elements)]= {逗号分隔数据列表}；</em></p><p id="7b56" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">元素数量的说明在圆括号中，因为当提供初始化列表时你可以省略它，编译器将通过计算列表中元素的数量来确定数组的大小。</p><p id="2ae3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">以下是数组声明的第一种形式的一些示例:</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="402d" class="mr lf it mn b gy ms mt l mu mv">const int numElements = 10;<br/>int grades[numElements];<br/>string names[numElements];<br/>bool flags[numElements];<br/>char letters[numElements];</span></pre><p id="a4ba" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在让我们看看一些使用初始化列表的声明:</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="d2a1" class="mr lf it mn b gy ms mt l mu mv">const int numElements = 5;<br/>int numbers[numElements] = {1,2,3,4,5};<br/>const int numNames = 3;<br/>string names[] = {"Cynthia", "Jonathan", "Raymone"};<br/>cont int numFlags = 4;<br/>bool flags[] = {false, true, true, false};</span></pre><p id="00fc" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我写了几个声明，把元素的数量放在括号里，让编译器决定元素的数量。但是，即使您选择让编译器确定数组中的元素数量，您仍然应该用数组中的元素数量声明一个常数。</p><h1 id="8451" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">访问数组</h1><p id="4e3f" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">通过使用<code class="fe mw mx my mn b">[]</code>操作符指定想要的元素的索引位置来访问数组的元素。例如，下面是一些将一些数据分配到数组中的语句:</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="675e" class="mr lf it mn b gy ms mt l mu mv">numbers[0] = 101;<br/>numbers[1] = 103;<br/>numbers[2] = 105;</span></pre><p id="9d8a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">也使用<code class="fe mw mx my mn b">[]</code>操作符从数组中访问存储的数据。例如:</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="f49c" class="mr lf it mn b gy ms mt l mu mv">int subtotal = numbers[0] + numbers[1] + numbers[2];</span></pre><p id="9eef" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这里是数组访问的另一个例子，这次使用一个<code class="fe mw mx my mn b">for</code>循环用一组数字初始化一个数组:</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="6200" class="mr lf it mn b gy ms mt l mu mv">#include &lt;iostream&gt;<br/>using namespace std;</span><span id="233a" class="mr lf it mn b gy mz mt l mu mv">int main()<br/>{<br/>  const int numElements = 5;<br/>  int numbers[numElements];<br/>  for (int i = 0; i &lt; numElements; i++) {<br/>    numbers[i] = i + 1;<br/>  }<br/>  return 0;<br/>}</span></pre><p id="7fc5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下面是另一个使用<code class="fe mw mx my mn b">for</code>循环的例子，这次访问数组是计算平均值过程的一部分:</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="94e6" class="mr lf it mn b gy ms mt l mu mv">int main()<br/>{<br/>  const int numElements = 5;<br/>  int grades[numElements] = {81, 78, 91, 77, 66};<br/>  int total = 0;<br/>  for (int i = 0; i &lt; numElements; i++) {<br/>    total += grades[i];<br/>  }<br/>  double average = static_cast&lt;double&gt;(total) / numElements;<br/>  cout &lt;&lt; "The average grade is: " &lt;&lt; average &lt;&lt; endl;<br/>  return 0;<br/>}</span></pre><p id="4aa3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">以下是该程序的输出:</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="dbbd" class="mr lf it mn b gy ms mt l mu mv">The average grade is: 78.6</span></pre><p id="499f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因为这是一篇介绍性文章，所以我使用了<code class="fe mw mx my mn b">int</code>来初始化for循环控制变量。如果这是一篇更高级的文章，我会用<code class="fe mw mx my mn b">size_t</code>来代替。</p><p id="a67c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我还应该提到，当您想要访问每个元素时，从头到尾遍历一个数组的最佳方式是使用range <code class="fe mw mx my mn b">for</code>循环。考虑到这一点，下面是重新编写的程序:</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="3fc4" class="mr lf it mn b gy ms mt l mu mv">int main()<br/>{<br/>  const int numElements = 5;<br/>  int grades[numElements] = {81, 78, 91, 77, 66};<br/>  int total = 0;<br/>  for (auto grade : grades) {<br/>    total += grade;<br/>  }<br/>  double average = static_cast&lt;double&gt;(total) / numElements;<br/>  cout &lt;&lt; "The average grade is: " &lt;&lt; average &lt;&lt; endl;<br/>  return 0;<br/>}</span></pre><h1 id="3652" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">作为函数参数的数组</h1><p id="c410" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我强调了一点，你应该总是声明一个常量来保存数组中元素的数量。您需要这样做的第一个原因是，当您编写一个index <code class="fe mw mx my mn b">for</code>循环来遍历一个数组时，您将有一个常量可以让循环知道何时停止。</p><p id="297d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这很重要，因为C++数组没有边界检查，这意味着您可能会意外地访问数组外部的内存而不会触发错误。正如某个名人曾经说过的，“C++给你的绳子刚好够你上吊。”当这种情况发生时，新的语言会抛出一个异常，但是C++只是假设这就是你想要做的。</p><p id="c2b0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让常量保存数组元素数量的另一个原因是当您想要将数组传递给函数时。不能使用range <code class="fe mw mx my mn b">for</code>循环从函数体内访问数组元素，所以必须使用index <code class="fe mw mx my mn b">for</code>循环。这意味着您需要知道何时停止循环，常量参数提供了该值。</p><p id="0e3f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">知道了这一点，我就可以向你展示如何将数组传递给函数。我将用一个计算平均值的函数重写上面的分数平均程序:</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="4c87" class="mr lf it mn b gy ms mt l mu mv">double gradeAvg(int arr[], int arraySz) {<br/>  int total = 0;<br/>  for (int i = 0; i &lt; arraySz; i++) {<br/>    total += arr[i];<br/>  }<br/>  double average = static_cast&lt;double&gt;(total) / arraySz;<br/>  return average;<br/>}</span><span id="915b" class="mr lf it mn b gy mz mt l mu mv">int main()<br/>{<br/>  const int numElements = 5;<br/>  int grades[numElements] = {81, 78, 91, 77, 66};<br/>  int total = 0;<br/>  double average = gradeAvg(grades, numElements);<br/>  cout &lt;&lt; "The average grade is: " &lt;&lt; average &lt;&lt; endl;<br/>  return 0;<br/>}</span></pre><p id="1f80" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这个程序的输出是:</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="8ed5" class="mr lf it mn b gy ms mt l mu mv">The average grade is: 78.6</span></pre><p id="5af3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">数组也可以从函数中返回，但是这需要指针，所以我将不得不把这个讨论留到以后。</p><h1 id="5ac8" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">数组很棒，但向量可能更好</h1><p id="26ff" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">虽然我在这篇文章中解释了如何使用数组，但是大多数C++程序员现在使用向量作为存储顺序数据的首选数据结构。这有几个原因，包括标准模板库中的vector类实现现在非常高效，可能最重要的是，vector可以根据需要增长和收缩。在我的下一篇文章中，我将讨论如何在C++中使用向量，你将看到它们相对于数组的优势。</p><p id="cfe8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">感谢您的阅读，请给我发电子邮件提出意见和建议。如果你对我的在线计算机编程课程感兴趣，请访问<a class="ae kf" href="https://learningcpp.teachable.com" rel="noopener ugc nofollow" target="_blank">https://learningcpp.teachable.com</a>。</p></div></div>    
</body>
</html>