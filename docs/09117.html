<html>
<head>
<title>3 Helpful Gatsby CLI Commands</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">3个有用的Gatsby CLI命令</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/3-helpful-gatsby-cli-commands-1b559cf16f24?source=collection_archive---------10-----------------------#2021-07-07">https://levelup.gitconnected.com/3-helpful-gatsby-cli-commands-1b559cf16f24?source=collection_archive---------10-----------------------#2021-07-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/776b12efebc2b5f82321f04f64d153bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7T-0FZ0T0qC-aPjr5t5zvA.jpeg"/></div></div></figure><div class=""/><h1 id="6d4a" class="jy jz jb bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">盖茨比CLI</h1><p id="9433" class="pw-post-body-paragraph kw kx jb ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">使Gatsby成为强大的前端框架的部分原因是它通过<a class="ae lu" href="https://www.gatsbyjs.com/docs/reference/gatsby-cli/" rel="noopener ugc nofollow" target="_blank"> Gatsby CLI工具</a>内置的命令列表。像<code class="fe lv lw lx ly b">gatsby new</code>和<code class="fe lv lw lx ly b">gatsby build</code>这样的命令分别允许开发和部署的平滑体验。我们将超越这些常见的命令，探索一些鲜为人知的命令。</p><p id="edd6" class="pw-post-body-paragraph kw kx jb ky b kz lz lb lc ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt ij bi translated"><em class="me">注意:在继续操作之前，确保安装了</em> <code class="fe lv lw lx ly b"><em class="me">gatsby cli</em></code> <em class="me">。用</em> <code class="fe lv lw lx ly b"><em class="me">npm list -g | grep gatsby-cli</em></code> <em class="me">检查。如果没有安装，用</em> <code class="fe lv lw lx ly b"><em class="me">npm install -g gatsby-cli</em></code> <em class="me">安装。本文使用Gatsby 3 . 8 . 1版和Gatsby CLI 3 . 7 . 1版</em></p><h1 id="7445" class="jy jz jb bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">1)用“<code class="fe lv lw lx ly b">help"</code>发现其他命令</h1><p id="0ca3" class="pw-post-body-paragraph kw kx jb ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">与大多数CLI工具和包管理器一样，Gatsby CLI附带了一个<code class="fe lv lw lx ly b">help</code>命令来显示每个可用的命令。</p><figure class="mg mh mi mj gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mf"><img src="../Images/9595f2db8d83c252fab240624f6fb1da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*IrpxHB0WrwL0XZG3"/></div></div></figure><p id="b503" class="pw-post-body-paragraph kw kx jb ky b kz lz lb lc ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt ij bi translated">如上所示，有些命令除了有较长的版本之外，还有较短的版本。这包括<code class="fe lv lw lx ly b">help</code>:</p><p id="574f" class="pw-post-body-paragraph kw kx jb ky b kz lz lb lc ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt ij bi translated">大多数命令的名称在左边，简短描述在右边。<code class="fe lv lw lx ly b">help</code>命令对于快速参考很少使用的命令很有用。</p><h1 id="be0e" class="jy jz jb bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">2)查看"<code class="fe lv lw lx ly b">info"</code>关于项目和本地OS</h1><p id="1616" class="pw-post-body-paragraph kw kx jb ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">与<code class="fe lv lw lx ly b">help</code>类似，<code class="fe lv lw lx ly b">gatsby info</code>命令旨在显示有用的信息。重要的区别在于<code class="fe lv lw lx ly b">gatsby info</code>严格来说是用来显示信息的。</p><figure class="mg mh mi mj gt is gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/216d690973f33d5581b42701684fd942.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/0*0uElKzQBa27Fc-gj"/></div></figure><p id="419b" class="pw-post-body-paragraph kw kx jb ky b kz lz lb lc ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt ij bi translated">以下是运行时<code class="fe lv lw lx ly b">gatsby info</code>将显示的内容:</p><ul class=""><li id="9c6f" class="ml mm jb ky b kz lz ld ma lh mn ll mo lp mp lt mq mr ms mt bi translated"><code class="fe lv lw lx ly b">OS</code> -本地机器的操作系统</li><li id="3dcb" class="ml mm jb ky b kz mu ld mv lh mw ll mx lp my lt mq mr ms mt bi translated"><code class="fe lv lw lx ly b">CPU</code> -机器的加工信息</li><li id="8824" class="ml mm jb ky b kz mu ld mv lh mw ll mx lp my lt mq mr ms mt bi translated"><code class="fe lv lw lx ly b">Shell</code> -正在使用的shell的类型和版本(通常是<a class="ae lu" href="https://www.gnu.org/software/bash/" rel="noopener ugc nofollow" target="_blank"> bash </a>或<a class="ae lu" href="https://www.zsh.org/" rel="noopener ugc nofollow" target="_blank"> zsh </a>)</li><li id="15d8" class="ml mm jb ky b kz mu ld mv lh mw ll mx lp my lt mq mr ms mt bi translated"><code class="fe lv lw lx ly b">Binaries</code> -节点、npm和yarn等命令工具的位置和版本</li><li id="e8fb" class="ml mm jb ky b kz mu ld mv lh mw ll mx lp my lt mq mr ms mt bi translated"><code class="fe lv lw lx ly b">Languages</code> -本地安装的编程语言(Python等)的位置和版本。)</li><li id="e1ef" class="ml mm jb ky b kz mu ld mv lh mw ll mx lp my lt mq mr ms mt bi translated"><code class="fe lv lw lx ly b">Browsers</code> -已安装网络浏览器的名称和版本(Chrome、Safari等。)</li><li id="cacf" class="ml mm jb ky b kz mu ld mv lh mw ll mx lp my lt mq mr ms mt bi translated"><code class="fe lv lw lx ly b">npmPackages</code> -与Gatsby相关的包的名称和版本</li><li id="3200" class="ml mm jb ky b kz mu ld mv lh mw ll mx lp my lt mq mr ms mt bi translated"><code class="fe lv lw lx ly b">npmGlobalPackages</code> -全球安装包的名称和版本(Gatsby相关)</li></ul><p id="7d32" class="pw-post-body-paragraph kw kx jb ky b kz lz lb lc ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt ij bi translated">对于更好地理解Gatsby项目所处的本地系统环境来说，<code class="fe lv lw lx ly b">info</code>命令可以证明是有用的。</p><h1 id="1225" class="jy jz jb bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">3)用“repl”探索项目的环境</h1><p id="5e09" class="pw-post-body-paragraph kw kx jb ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">这最后一个命令很有趣。REPL(read-eval-print-loop)是一种允许在代码的指定点执行某些操作的环境。盖茨比REPL提供了一个交互式外壳，让我们在盖茨比环境中处理特殊变量。</p><p id="97ca" class="pw-post-body-paragraph kw kx jb ky b kz lz lb lc ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt ij bi translated">从Gatsby项目的根目录开始，在终端上运行<code class="fe lv lw lx ly b">gatsby repl</code>命令。将出现一个外壳，看起来应该是这样的:</p><figure class="mg mh mi mj gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mz"><img src="../Images/5e0fdbd5050ea5e788edf1bc15950f16.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Ra6uUpwQXgm4op0y"/></div></div></figure><p id="d748" class="pw-post-body-paragraph kw kx jb ky b kz lz lb lc ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt ij bi translated">随着一个新的交互式shell ( <code class="fe lv lw lx ly b">gatsby &gt;</code>)的打开，我们可以与Gatsby项目中的各种数据进行交互。以下是对盖茨比REPL中一些更有趣的变量的描述:</p><h2 id="68f1" class="na jz jb bd ka nb nc dn ke nd ne dp ki lh nf ng km ll nh ni kq lp nj nk ku nl bi translated">页</h2><p id="b364" class="pw-post-body-paragraph kw kx jb ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated"><code class="fe lv lw lx ly b">pages</code>返回包含分类为“页面”的组件信息的对象数组。使用<a class="ae lu" href="https://www.gatsbyjs.com/starters/gatsbyjs/gatsby-starter-default" rel="noopener ugc nofollow" target="_blank">默认的起始页面</a>，如果我们运行<code class="fe lv lw lx ly b">gatsby repl</code>并键入以下操作:</p><pre class="mg mh mi mj gt nm ly nn no aw np bi"><span id="84c9" class="na jz jb ly b gy nq nr l ns nt">gatsby &gt; for(p of pages) { console.log(p[1].internalComponentName + ' = ' + p[1].componentPath)} </span><span id="19dd" class="na jz jb ly b gy nu nr l ns nt">Component/dev-404-page/ = /Users/brandondusch/Desktop/projects/lets-try-gatsby-repl/.cache/dev-404-page.js <br/>Component/404/ = /Users/brandondusch/Desktop/projects/lets-try-gatsby-repl/src/pages/404.js <br/>Component/404.html = /Users/brandondusch/Desktop/projects/lets-try-gatsby-repl/src/pages/404.js <br/>ComponentIndex = /Users/brandondusch/Desktop/projects/lets-try-gatsby-repl/src/pages/index.js <br/>Component/page-2/ = /Users/brandondusch/Desktop/projects/lets-try-gatsby-repl/src/pages/page-2.js <br/>Component/using-typescript/ = /Users/brandondusch/Desktop/projects/lets-try-gatsby-repl/src/pages/using-typescript.tsx</span></pre><p id="3b90" class="pw-post-body-paragraph kw kx jb ky b kz lz lb lc ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt ij bi translated">在上面的例子中，我们用一个<code class="fe lv lw lx ly b">for</code>循环遍历了<code class="fe lv lw lx ly b">pages</code>，并打印出了关于页面的<code class="fe lv lw lx ly b">internalComponentName</code>和它们的<code class="fe lv lw lx ly b">componentPath</code>(绝对路径)的信息。</p><h2 id="7e60" class="na jz jb bd ka nb nc dn ke nd ne dp ki lh nf ng km ll nh ni kq lp nj nk ku nl bi translated">站点配置</h2><p id="1533" class="pw-post-body-paragraph kw kx jb ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated"><code class="fe lv lw lx ly b">siteConfig</code>返回一个对象，表示在<code class="fe lv lw lx ly b">gatsby-config.json</code>文件中找到的数据。这包括<code class="fe lv lw lx ly b">plugins</code>和<code class="fe lv lw lx ly b">siteMetaData</code>。这是查看Gatsby站点配置的另一种方式。</p><pre class="mg mh mi mj gt nm ly nn no aw np bi"><span id="5040" class="na jz jb ly b gy nq nr l ns nt">gatsby &gt; siteConfig <br/>{ <br/>  plugins: [ <br/>    { <br/>      resolve: 'gatsby-plugin-react-helmet', <br/>      options: {}, <br/>      parentDir: '/Users/brandondusch/Desktop/projects/lets-try-gatsby-repl' }, <br/>...</span></pre><h2 id="1ec4" class="na jz jb bd ka nb nc dn ke nd ne dp ki lh nf ng km ll nh ni kq lp nj nk ku nl bi translated">静态查询</h2><p id="70ae" class="pw-post-body-paragraph kw kx jb ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">在Gatsby中，在GraphQL的帮助下，我们可以从项目环境中的几乎任何位置查询数据。因此，盖茨比REPL提供了一个<code class="fe lv lw lx ly b">staticQuery</code>变量来表示那些现有的查询。例如，当使用默认设置创建新的Gatsby时，有两个预定义的静态查询。一个位于<code class="fe lv lw lx ly b">seo.js</code>组件中；另一个位于<code class="fe lv lw lx ly b">layout.js</code>组件中。这可以在使用<code class="fe lv lw lx ly b">staticQueries</code>时确认:</p><pre class="mg mh mi mj gt nm ly nn no aw np bi"><span id="e1f8" class="na jz jb ly b gy nq nr l ns nt">gatsby &gt; staticQueries <br/>Map(2) { <br/>  'sq--src-components-layout-js' =&gt; { }, <br/>  'sq--src-components-seo-js' =&gt; { } <br/>}</span></pre><p id="9d4d" class="pw-post-body-paragraph kw kx jb ky b kz lz lb lc ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt ij bi translated">下面是另一个例子，它利用REPL运算来很好地总结哪些组件有静态查询、它们的位置以及实际查询的数据:</p><pre class="mg mh mi mj gt nm ly nn no aw np bi"><span id="90f2" class="na jz jb ly b gy nq nr l ns nt">gatsby &gt; for(q of staticQueries.values()){ <br/>... console .log("Id: " + q.id) <br/>... console .log("Location: " + q.componentPath) <br/>... console .log("Query: " + q.query) <br/>... } </span><span id="6e4d" class="na jz jb ly b gy nu nr l ns nt">Id: sq--src-components-layout-js <br/>Location: /Users/brandondusch/Desktop/projects/lets-try-gatsby-repl/src/components/layout.js <br/>Query: query SiteTitleQuery { <br/>  site { <br/>    siteMetadata { <br/>      title <br/>    } <br/>  } <br/>} </span><span id="6718" class="na jz jb ly b gy nu nr l ns nt">Id: sq--src-components-seo-js <br/>Location: /Users/brandondusch/Desktop/projects/lets-try-gatsby-repl/src/components/seo.js <br/>Query: query usersbrandonduschDesktopprojectsletsTryGatsbyReplsrccomponentsseoJs63159454 { <br/>  site { <br/>    siteMetadata { <br/>      title <br/>      description <br/>      author <br/>    } <br/>  } <br/>}</span></pre><h1 id="648d" class="jy jz jb bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">总结</h1><p id="2c94" class="pw-post-body-paragraph kw kx jb ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">Gatsby CLI不仅仅能够运行服务器和启动新项目。在本文中，我们了解了以下内容:</p><ol class=""><li id="40fe" class="ml mm jb ky b kz lz ld ma lh mn ll mo lp mp lt nv mr ms mt bi translated">使用<code class="fe lv lw lx ly b">gatsby help</code>显示Gatsby CLI中可用命令的列表</li><li id="ad39" class="ml mm jb ky b kz mu ld mv lh mw ll mx lp my lt nv mr ms mt bi translated">用<code class="fe lv lw lx ly b">gatsby info</code>查找关于本地机器的信息</li><li id="da8a" class="ml mm jb ky b kz mu ld mv lh mw ll mx lp my lt nv mr ms mt bi translated">用<code class="fe lv lw lx ly b">gatsby repl</code>对选择的Gatsby环境变量执行REPL运算</li></ol><p id="08bb" class="pw-post-body-paragraph kw kx jb ky b kz lz lb lc ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt ij bi translated">要了解关于Gatsby CLI以及使用Gatsby REPL的更多信息，请参考“参考资料”一节中的链接。</p><p id="86b7" class="pw-post-body-paragraph kw kx jb ky b kz lz lb lc ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt ij bi translated">在那之前，编码快乐！</p><h1 id="8bec" class="jy jz jb bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">参考</h1><p id="4f75" class="pw-post-body-paragraph kw kx jb ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated"><a class="ae lu" href="https://www.gatsbyjs.com/docs/reference/gatsby-cli/" rel="noopener ugc nofollow" target="_blank">命令(盖茨比CLI) —盖茨比文档</a></p><p id="87a9" class="pw-post-body-paragraph kw kx jb ky b kz lz lb lc ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt ij bi translated"><a class="ae lu" href="https://www.gatsbyjs.com/docs/gatsby-repl/" rel="noopener ugc nofollow" target="_blank">盖茨比REPL —盖茨比文件</a></p></div><div class="ab cl nw nx hu ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="ij ik il im in"><p id="6681" class="pw-post-body-paragraph kw kx jb ky b kz lz lb lc ld ma lf lg lh mb lj lk ll mc ln lo lp md lr ls lt ij bi translated"><em class="me">最初发表于</em><a class="ae lu" href="https://blog.mydevdiary.net/3-helpful-gatsby-cli-commands-ckqrf3xxj03aqi2s14rwpho0r" rel="noopener ugc nofollow" target="_blank"><em class="me">https://blog.mydevdiary.net</em></a><em class="me">。</em></p></div></div>    
</body>
</html>