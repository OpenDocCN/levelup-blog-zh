<html>
<head>
<title>Custom Push Notifications in iOS — Swift 5</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">iOS中的自定义推送通知— Swift 5</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/custom-push-notification-in-ios-swift-5-210552643e86?source=collection_archive---------2-----------------------#2020-06-02">https://levelup.gitconnected.com/custom-push-notification-in-ios-swift-5-210552643e86?source=collection_archive---------2-----------------------#2020-06-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/1721fe5c197f782f9f6c9a54c8a4eb74.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WZ4mxOgOIm1NpJZ0k-JEEg.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">推送通知流</figcaption></figure><p id="71b8" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">通知是任何用户参与的应用程序的重要组成部分，在本文中，我们将以简单的方式探索推送通知的设置。</p><h2 id="dc30" class="la lb iq bd lc ld le dn lf lg lh dp li kn lj lk ll kr lm ln lo kv lp lq lr ls bi translated"><strong class="ak">推送通知的基本设置</strong></h2><p id="12bd" class="pw-post-body-paragraph kc kd iq ke b kf lt kh ki kj lu kl km kn lv kp kq kr lw kt ku kv lx kx ky kz ij bi translated">让我们开始创建一个单视图应用程序。输入您的项目名称并选择您的团队。对于推送通知，设置一个苹果开发者帐户是必须的，从这里我们将获得一个APNS(苹果推送通知服务)证书。</p><h2 id="4f5d" class="la lb iq bd lc ld le dn lf lg lh dp li kn lj lk ll kr lm ln lo kv lp lq lr ls bi translated"><strong class="ak">项目设置</strong></h2><p id="9f19" class="pw-post-body-paragraph kc kd iq ke b kf lt kh ki kj lu kl km kn lv kp kq kr lw kt ku kv lx kx ky kz ij bi translated">在Xcode中进入你的xcodeproj，点击添加功能，选择<strong class="ke ir">推送通知</strong>和<strong class="ke ir">后台模式</strong> &gt; <strong class="ke ir">远程通知</strong>。</p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ly"><img src="../Images/6f63fe2106be1d24de0cc68cdc21c64d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KrU6MPBBpjcok-AuRnb6mA.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">Xcode项目设置</figcaption></figure><h2 id="60f7" class="la lb iq bd lc ld le dn lf lg lh dp li kn lj lk ll kr lm ln lo kv lp lq lr ls bi translated"><strong class="ak"> APNS证书设置</strong></h2><p id="cfc0" class="pw-post-body-paragraph kc kd iq ke b kf lt kh ki kj lu kl km kn lv kp kq kr lw kt ku kv lx kx ky kz ij bi translated">登录苹果开发者账号，进入<strong class="ke ir">证书、标识符&amp;配置文件</strong> &gt; <strong class="ke ir">标识符</strong> &gt;选择你的app id &gt;推送通知&gt;配置&gt;选择文件</p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi md"><img src="../Images/fcf4c266c5597397a07a12bbe2946548.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mq8pdw0cKjs5gtz-8wrbWA.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">配置推送通知(1)</figcaption></figure><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi me"><img src="../Images/7cdc56885c33d7c177ca6cc50766e9c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UEv2472dTIHDBOEIOa0cSg.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">配置推送通知(2)</figcaption></figure><p id="3211" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我们需要创建一个CSR文件上传到苹果开发者账户。前往系统中的“钥匙串访问”,向证书颁发机构申请证书，然后选择“存储到磁盘”。现在回到苹果开发者账户，点击选择文件，选择我们创建的CSR文件。然后点击继续并下载该证书(app_development.cer ),然后通过双击该证书添加到钥匙串中。</p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mf"><img src="../Images/0d7c222dba43a7f8fbbe640c0d1ed933.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Mz2hTgLY5lOVz_8cM42wjg.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">请求CSR</figcaption></figure><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div class="gh gi mg"><img src="../Images/8fe5c173ea573620ac375fd60de4bff6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1064/format:webp/1*6sdHzGdDal5x4NClVSHe6w.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">添加证书</figcaption></figure><h2 id="7f06" class="la lb iq bd lc ld le dn lf lg lh dp li kn lj lk ll kr lm ln lo kv lp lq lr ls bi translated"><strong class="ak">让我们编码</strong></h2><p id="0163" class="pw-post-body-paragraph kc kd iq ke b kf lt kh ki kj lu kl km kn lv kp kq kr lw kt ku kv lx kx ky kz ij bi translated">转到app delegate，使用<strong class="ke ir">configure notification(application:ui application)</strong>配置通知，并将此方法调用到<strong class="ke ir"> didFinishLaunching方法中。</strong></p><figure class="lz ma mb mc gt jr"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="eb91" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">万岁，你已经在你的项目中实现了推送通知。</p><h2 id="6911" class="la lb iq bd lc ld le dn lf lg lh dp li kn lj lk ll kr lm ln lo kv lp lq lr ls bi translated"><strong class="ak">测试推送通知</strong></h2><p id="8139" class="pw-post-body-paragraph kc kd iq ke b kf lt kh ki kj lu kl km kn lv kp kq kr lw kt ku kv lx kx ky kz ij bi translated">为了测试推送通知，我们需要一个. p12或。pem文件。前往“钥匙串”,在“证书”中搜索您的应用id，并将其导出为. p12。它会要求输入密码(可选字段),然后按“确定”,您的p12文件就准备好了。</p><p id="54e4" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">用于转换。<strong class="ke ir"> p12 </strong>到。pem文件遵循以下代码:</p><pre class="lz ma mb mc gt mj mk ml mm aw mn bi"><span id="b328" class="la lb iq mk b gy mo mp l mq mr">openssl pkcs12 -in pushnotification.p12 -out pushnotification.pem -nodes -clcerts</span></pre><p id="e039" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">现在我们有了. p12，。pem文件和设备令牌，我们可以使用任何工具进行测试。我大多用<strong class="ke ir">APN tester</strong>—上传。pem文件，添加设备令牌和捆绑id，然后发送消息。它会像魔咒一样起作用。</p><p id="d368" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">通知的基本设置已经完成。只要您的应用程序在后台或被终止，iOS就会自动处理显示您的通知。但是如果app主动运行呢？然后你需要决定你想要发生什么。如果你想让iOS在你的应用在前台运行时显示你的通知，为此你需要实现这个委托:</p><figure class="lz ma mb mc gt jr"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="d7cc" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">让我们开始构建自定义通知。</p><p id="3fee" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">创建一个名为<strong class="ke ir">CustomNotificationDelegate</strong>的swift文件，并添加<strong class="ke ir"> willPresent </strong>和<strong class="ke ir"> didReceive </strong>方法<strong class="ke ir">。</strong>像这样:</p><figure class="lz ma mb mc gt jr"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="c042" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">之后，返回AppDelegate并创建一个常量<strong class="ke ir">CustomNotificationDelegate</strong>并在<strong class="ke ir"> configureNotification </strong>方法中更改代码。</p><p id="1be5" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">let notification delegate = CustomNotificationDelegate()</p><figure class="lz ma mb mc gt jr"><div class="bz fp l di"><div class="mh mi l"/></div></figure><h2 id="8f09" class="la lb iq bd lc ld le dn lf lg lh dp li kn lj lk ll kr lm ln lo kv lp lq lr ls bi translated"><strong class="ak">类别</strong></h2><p id="3b23" class="pw-post-body-paragraph kc kd iq ke b kf lt kh ki kj lu kl km kn lv kp kq kr lw kt ku kv lx kx ky kz ij bi translated">有时你想在通知中得到用户的回应，因为iOS可以选择在推送通知中附加按钮。为此，在appDelegate中创建一个常量，并像这样配置自定义操作:</p><pre class="lz ma mb mc gt mj mk ml mm aw mn bi"><span id="39de" class="la lb iq mk b gy mo mp l mq mr">private let categoryIdentifier = "YesOrNO"</span></pre><figure class="lz ma mb mc gt jr"><div class="bz fp l di"><div class="mh mi l"/></div></figure><figure class="lz ma mb mc gt jr"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="e33a" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">现在尝试以这种格式发送通知:</p><figure class="lz ma mb mc gt jr"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="8db8" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">现在，您需要在通知上进行3D触摸，您将看到附加的按钮为<strong class="ke ir">是</strong>和<strong class="ke ir">否</strong>。</p><p id="6ee1" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">如果用户点击这些按钮中的任何一个，它们都必须被跟踪，为此我们需要对<strong class="ke ir"> didReceive </strong>方法进行修改。</p><figure class="lz ma mb mc gt jr"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="6be7" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">希望你已经了解了<strong class="ke ir">类别</strong>的基本概念，现在你可以在项目中根据你的要求进行改进了。</p><h2 id="1437" class="la lb iq bd lc ld le dn lf lg lh dp li kn lj lk ll kr lm ln lo kv lp lq lr ls bi translated"><strong class="ak">通知服务扩展</strong></h2><p id="68f1" class="pw-post-body-paragraph kc kd iq ke b kf lt kh ki kj lu kl km kn lv kp kq kr lw kt ku kv lx kx ky kz ij bi translated">为了实现<strong class="ke ir">通知服务扩展</strong>，您需要添加一个<strong class="ke ir">扩展目标</strong>，以便您可以处理正在使用的加密。现在转到xcodeproj在xcode中选择<strong class="ke ir">文件&gt;新建&gt;目标&gt;通知服务扩展&gt;下一个&gt;产品名称(</strong>将其命名为<strong class="ke ir"> PayloadModification) &gt;完成&gt;活动方案弹出(</strong>如果出现则选择<strong class="ke ir">取消)。</strong></p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/be9036360fca543d6a127a87926770d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1152/format:webp/1*ie4-LWKMnS0rGT7xCnMYGg.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">选择目标</figcaption></figure><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mt"><img src="../Images/935e0caf568d28d8ab4c27ef40d11bad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H8n8Tx9XETNYtRMLpd2o7w.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">选择通知服务扩展</figcaption></figure><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/3587b4caa83413c085912595d1ef3d1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:834/format:webp/1*czLelU4rlej-AExqLoyiDA.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">活动方案弹出菜单</figcaption></figure><p id="ca9d" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">如果您转到项目导航器，您会看到有一个名为<strong class="ke ir"> ServiceExtension </strong>的新文件夹组，还有一个<strong class="ke ir">notification service . swift</strong>文件。在这个文件中已经有两个方法，一个是<strong class="ke ir"> didReceive </strong>，另一个是<strong class="ke ir">serviceextensiontimewillrexpire。</strong>当你得到通知时，<strong class="ke ir"> didReceive </strong>方法被调用，你有大约30秒的时间来执行任何任务，之后ios将调用<strong class="ke ir">serviceextensiontimewillrexpire</strong>方法，给你最后一次机会来完成任务。如果你正在使用一个糟糕的连接，那么<strong class="ke ir">serviceextensiontimewillerexpire</strong>方法可能会给你足够的时间来完成你的任务。在<strong class="ke ir">serviceextensiontimewillerexpire</strong>中，我们可以执行需要较少时间完成的任务。</p><p id="d2c0" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">现在构建您的应用程序，并发送一个带有额外键“<strong class="ke ir">可变内容</strong>”的有效负载。</p><figure class="lz ma mb mc gt jr"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="34b1" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">您将收到一个通知，其中包含额外的内容(已修改)，如下所示:</p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mv"><img src="../Images/a52fdcf5a06e3cae3225e81c4f7bdc49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jAg67z8PHSQQEecQa2KC2g.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">自定义通知</figcaption></figure><p id="ae4c" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">通知服务扩展的设置已完成。现在转到<strong class="ke ir">notification service . swift</strong>并写入任何其他内容，而不是[修改的]内容，您将在通知中看到修改的内容。我们将在下面代码的帮助下，通过更新有效载荷，在通知中添加一个图像。</p><figure class="lz ma mb mc gt jr"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="44b6" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">有效负载格式:</p><figure class="lz ma mb mc gt jr"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="86ca" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">注意:image_url应该是HTTPS，如果您想要添加HTTP URL，那么您必须将ServiceExtension的plist作为NSAPPTRANSPORTSECURITY修改为True。</p><p id="03e5" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">万岁，你已经实现了你的第一个自定义通知。</p><p id="6c94" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我们甚至可以使用<strong class="ke ir">定制界面</strong>定制通知本身的外观。</p><p id="9169" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">让我们开始构建用于通知的<strong class="ke ir">自定义界面</strong>。</p><h2 id="3437" class="la lb iq bd lc ld le dn lf lg lh dp li kn lj lk ll kr lm ln lo kv lp lq lr ls bi translated"><strong class="ak">为自定义接口配置Xcode】</strong></h2><p id="2816" class="pw-post-body-paragraph kc kd iq ke b kf lt kh ki kj lu kl km kn lv kp kq kr lw kt ku kv lx kx ky kz ij bi translated">这与设置<strong class="ke ir">通知服务扩展的过程相同。</strong>转到xcode选择<strong class="ke ir">文件&gt;新建&gt;目标&gt;通知内容扩展&gt;下一个&gt;产品名称(</strong>命名为<strong class="ke ir"> CustomUI) &gt;完成&gt;活动方案弹出(</strong>如果出现则选择<strong class="ke ir">取消)。</strong></p><p id="6ae5" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">每个<strong class="ke ir">自定义UI </strong>必须有其唯一的类别标识符。如果你去项目导航器，你会看到你有一个名为<strong class="ke ir"> CustomUI </strong>的新文件夹组，还有一个info.plist，打开info.plist，转到<strong class="ke ir">n extension，</strong>完全展开它。</p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ly"><img src="../Images/ca42cc8d5fa35c3692c03f2b6f3161ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JSeVMFqTgvuE70HavJeE9g.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">默认info.plist设置</figcaption></figure><p id="713b" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">UNNotificationExtensionCategory</strong>包含类别关键字如果您的推送通知包含与此匹配的关键字，将使用您的内容扩展的UI。如果您有多个类别使用相同的用户界面，那么将<strong class="ke ir">UNNotificationExtensionCategory</strong>从字符串改为数组，并在此列出每个类别的名称。</p><p id="dca1" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">unnotificationextensioninitialcontetsizeratio</strong>值默认为1，我们可以在这里设置0-1之间的任意值，它代表高度与宽度的比值。UI将从您在此给出的百分比的高度开始。您可以尝试用这个值进行更改。</p><p id="4758" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">添加<strong class="ke ir">UNNotificationExtensionDefaultContentHidden</strong>键，并将值设置为<strong class="ke ir"> YES。</strong>该设置将显示不带标题的自定义用户界面。</p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/2054bff34314520821c7f0fc6a6cc170.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H02GOb3sQEQqfFduflMAtA.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">更新的信息列表</figcaption></figure><p id="2dcd" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">转到<strong class="ke ir">main interface . story board</strong>并更改一些UI，在<strong class="ke ir">notification view controller</strong>中创建outlets并将<strong class="ke ir"> didReceive </strong>方法替换为</p><figure class="lz ma mb mc gt jr"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="2c24" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">出于安全原因，您不能在这里直接访问图像。您必须为它使用start和stop访问范围。</p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mx"><img src="../Images/72f040908c587f4e069dc6fafe8b0acd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fzHEaquF1Ho7AUTyingNRQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">自定义UI故事板</figcaption></figure><p id="4bfa" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">现在构建您的应用程序，并使用APNS测试器发送通知。</p><p id="8b5d" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">有效负载格式:</p><figure class="lz ma mb mc gt jr"><div class="bz fp l di"><div class="mh mi l"/></div></figure><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi my"><img src="../Images/db93f131d23538c664add04dd357161a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4UR76-9eNu79GvsZRGbODw.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">自定义UI推送通知</figcaption></figure><p id="f502" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">如果您想要在扩展和应用目标之间共享数据，那么您必须启用<strong class="ke ir">应用组。</strong></p><p id="9eef" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">要启用此功能，请转到<strong class="ke ir"> Xcode </strong>中的<strong class="ke ir"> xcodeproj </strong>，点击<strong class="ke ir">添加功能</strong>，并选择<strong class="ke ir">应用程序组。</strong>点击+图标，写下小组名称(始终使用最佳实践—小组。+ bundleID)并在<strong class="ke ir"> ServiceExtension </strong>目标中做同样的事情。选择您为应用程序目标选择的同一个<strong class="ke ir">应用程序组</strong>。</p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/9201ff246a0381401e72e80762a74589.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IohtL-6vWZFJPSSPhXHElg.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">应用程序组设置</figcaption></figure><p id="1ce1" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">现在，从主目标将您想要访问的任何文件添加到扩展中，选择该文件，并在<strong class="ke ir">目标成员身份</strong>部分选中如下复选框:</p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/6601e4d30b3169390d09080b4761f9db.png" data-original-src="https://miro.medium.com/v2/resize:fit:522/format:webp/1*rIJbe5t02g5m6KWuafTrQg.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">目标成员设置</figcaption></figure><p id="8ffb" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">推送通知到此为止。我希望我已经涵盖了自定义通知的所有主要内容。</p><p id="2d60" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">感谢您阅读这篇文章。如果你觉得这篇文章有帮助，请不要忘记鼓掌。</p></div></div>    
</body>
</html>