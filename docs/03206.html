<html>
<head>
<title>Styled Components — Write your CSS in React and Javascript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">样式组件——用React和Javascript编写您的CSS</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/styled-components-do-your-css-in-react-and-javascript-c34d00e45796?source=collection_archive---------5-----------------------#2020-04-25">https://levelup.gitconnected.com/styled-components-do-your-css-in-react-and-javascript-c34d00e45796?source=collection_archive---------5-----------------------#2020-04-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="5616" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">React Powered样式使设计可重用组件变得轻而易举。</p></div><div class="ab cl ko kp hx kq" role="separator"><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt"/></div><div class="im in io ip iq"><figure class="kw kx ky kz gt la gh gi paragraph-image"><div role="button" tabindex="0" class="lb lc di ld bf le"><div class="gh gi kv"><img src="../Images/d6b1839ade8a535365466740c4a415aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*w7Fl0rsEQjd13Fk_"/></div></div><figcaption class="lh li gj gh gi lj lk bd b be z dk translated">约书亚·阿拉贡在<a class="ae ll" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="5b98" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我最近在为我的一个React项目开发一个新特性，无意中发现了一个使用CSS包样式组件的简短教程。Styled Components是React的一个Javascript样式表(JSS)引擎，具有强大而直观的工具来制作很酷的动画、过渡和可重用的组件。</p><p id="8629" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我立刻意识到这种方法有一些真正的力量。这意味着您可以在Javascript文件中声明您的CSS，这意味着您可以通过将不同的样式文件分开来分离关注点，这对于重用样式和保持代码整洁肯定是有用的。</p><p id="35d6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">但是你可能在想，这和其他100个CSS框架有什么不同呢？的确，你可以使用css编译器，为不同的元素创建不同的CSS文件。的确，你可以使用SASS或更少的东西来组织你的CSS。或者你可以使用Bootstrap、SemanticUI、布尔玛或者任何以前做过这项工作的样式库。但是如果你想建立你自己的风格，并且创建你自己的可重用的风格化组件，一个最好和最干净的方法就是风格化组件。</p><p id="acd5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">样式化组件是用内联CSS编译的React组件。这种方法的一个很大的优点是，您可以用Javascript构建样式，然后将其提供给编译器。这意味着您可以插入属性、函数或值CSS变量。这使得代码更加简洁，在可重用、可打包的组件中尤其有用。</p><p id="3bf7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">下面是样式化组件实现的几个例子。</p><p id="37c7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我创建了一个起点，包含两个页面，分别是create-react-app、react-router和基本布局。您可以使用以下终端命令从github克隆。您将需要一个节点环境和一个代码编辑器。</p><pre class="kw kx ky kz gt lm ln lo lp aw lq bi"><span id="fdbd" class="lr ls it ln b gy lt lu l lv lw">git clone https://github.com/APTricou/styled-components-example.git<br/>cd styled-components-example<br/>git checkout startingpoint<br/>npm install<br/>npm start</span></pre><p id="d5b0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">启动应用程序后，在代码编辑器中打开它。进入src &gt; components &gt; page1 &gt; index.js。您将看到我们的主登录页面的结构，其中有一个容器、一个标题、一个链接和一个div，每个都有一个类名。在大型项目中，这可能会变得很乏味，因为您可能需要在全局名称空间中处理样式。打开src &gt; index.css下的index.css文件。</p><figure class="kw kx ky kz gt la gh gi paragraph-image"><div role="button" tabindex="0" class="lb lc di ld bf le"><div class="gh gi lx"><img src="../Images/7467d9c6a8665224d2cfb49a4fa0ec17.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5UBQSFxiQ3UZOqyFCagL4g.png"/></div></div><figcaption class="lh li gj gh gi lj lk bd b be z dk translated">第1页和它的CSS类并排</figcaption></figure><p id="ab94" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">你看到的是一些特定的CSS，和一些通用的类名。让我们制作第一个样式组件。首先我们需要安装库。在您的终端项目的根目录中:</p><pre class="kw kx ky kz gt lm ln lo lp aw lq bi"><span id="4131" class="lr ls it ln b gy lt lu l lv lw">npm install styled-components</span></pre><p id="ec4a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在在src &gt; components中创建一个名为styles的新文件夹。在该文件夹中创建一个名为StyledButton.js的文件，然后将以下代码放入其中:</p><pre class="kw kx ky kz gt lm ln lo lp aw lq bi"><span id="e156" class="lr ls it ln b gy lt lu l lv lw">import styled from 'styled-components'</span><span id="1e04" class="lr ls it ln b gy ly lu l lv lw">const StyledButton = styled.div`` //CSS goes here</span><span id="ae01" class="lr ls it ln b gy ly lu l lv lw">export default StyledButton</span></pre><p id="01c8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在将我们的CSS从index.css类styled-button直接复制粘贴到模板文本中。您已经创建了您的第一个样式组件！回到Page1的索引文件，用新样式的按钮替换代表按钮的div。</p><figure class="kw kx ky kz gt la gh gi paragraph-image"><div role="button" tabindex="0" class="lb lc di ld bf le"><div class="gh gi lz"><img src="../Images/297c66109f265432a3553217e56a3cbd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*07pZgTGn9u0zLO9542IBog.png"/></div></div></figure><p id="7c2f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您的按钮现在运行在它自己编译的CSS上。styled-components使用的CSS预处理程序是stylis。它在组件挂载时就地编译CSS。</p><p id="1747" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您可以对标题和容器执行相同的操作。最后的文件应该是这样的:</p><figure class="kw kx ky kz gt la gh gi paragraph-image"><div role="button" tabindex="0" class="lb lc di ld bf le"><div class="gh gi ma"><img src="../Images/4bd69626b05559a619f615ad8c3a3bb2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gKm4dcl2IJCsKHzaPbj7Ew.png"/></div></div><figcaption class="lh li gj gh gi lj lk bd b be z dk translated">更多样式的组件</figcaption></figure><p id="8be9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">已经进口了很多了。我们可以将这些项目合并成一个索引文件。一旦你这样做了，你就可以创建一个样式库了！如果您需要如何做的参考，请转到src &gt; components &gt; index.js。</p><p id="7ed1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">接下来让我们看看第2页。内联式道具？样式组件也需要这些。</p><figure class="kw kx ky kz gt la gh gi paragraph-image"><div role="button" tabindex="0" class="lb lc di ld bf le"><div class="gh gi mb"><img src="../Images/8234bed8bba2a710210208aba877f8c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x0C_l6PtlwFeJHhlciChDw.png"/></div></div><figcaption class="lh li gj gh gi lj lk bd b be z dk translated">带有样式对象输入的样式化组件</figcaption></figure><p id="9369" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在我们可以进入一些逻辑。因为我们是在React组件中编写，所以我们可以在CSS中插入状态。它将解释各种可能的状态，并在编译器中为每个状态创建不同的CSS类。</p><p id="0e5a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们这样做，当你点击消息框时，它会浮动到屏幕的右侧，并允许我们更有效地使用左侧。</p><p id="4951" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">将有状态布尔值传递给名为right的MessageBox。我们将能够在我们的CSS模板中使用它。给MessageBox一个onClick侦听器来切换状态。然后在“right”CSS属性中插入一个回调，根据right是真还是假返回一个不同的值。您还可以添加过渡属性。您的代码应该如下所示:</p><figure class="kw kx ky kz gt la gh gi paragraph-image"><div role="button" tabindex="0" class="lb lc di ld bf le"><div class="gh gi mb"><img src="../Images/3d8e5f7bafc9ba62e2d709c224197d3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f5PPowUx5djUd3nKlS19OA.png"/></div></div><figcaption class="lh li gj gh gi lj lk bd b be z dk translated">将状态插入CSS。您也可以在模板文本中这样做。</figcaption></figure><p id="849a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">访问CSS状态中的属性的方法是通过回调。编译器将道具传递给回调函数，这就是我们如何将条件信息传递给样式。</p><p id="a1ff" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在当你转到第2页时，点击消息框应该会在屏幕的右边显示出来。还有许多其他方法可以考虑改变风格。您可以隐藏组件，直到其他一些状态变得真实，通过使用<a class="ae ll" href="https://styled-components.com/docs/advanced#theming" rel="noopener ugc nofollow" target="_blank"> ThemeProvider </a>将主题颜色传递给它们以创建深色和浅色主题，给它们默认的道具以便它们在没有上下文的情况下运行，使用嵌套来设计子组件的样式，以及更多的调整和优化。</p><p id="ab38" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">对于这最后一节，让我们创建一个有趣的样式组件。采用以下代码，并更新或创建适当的文件。或者，您可以切换到“分支最终”来查看最终结果。</p><pre class="kw kx ky kz gt lm ln lo lp aw lq bi"><span id="74e6" class="lr ls it ln b gy lt lu l lv lw">// Page2.js<br/>import React, {useState, useEffect} from 'react'<br/>import {Page2Container, MessageBox, CoolBackground, BeatBar} from '../styles'</span><span id="e029" class="lr ls it ln b gy ly lu l lv lw">const Page2 = function (props) {<br/>const [right, setRight] = useState(false)<br/>const [heights, setHeights] = useState(new Array(15).fill(0))<br/>function randomHeight() {return Math.ceil(Math.random() * 100)}<br/>useEffect(() =&gt; {<br/>setInterval(() =&gt; setHeights(heights.map((x) =&gt; randomHeight())), 300)<br/>}, [])</span><span id="25cc" class="lr ls it ln b gy ly lu l lv lw">return (</span><span id="be96" class="lr ls it ln b gy ly lu l lv lw">&lt;Page2Container&gt;<br/>  &lt;MessageBox right={right} onClick={() =&gt; setRight(true)<br/>    &lt;h1&gt;Welcome to Page 2&lt;/h1&gt;<br/>    &lt;h3&gt;Let's make a Cool Animation&lt;/h3&gt;<br/>  &lt;/MessageBox&gt;<br/>  &lt;CoolBackground right={right}&gt;<br/>    {heights.map((height, index) =&gt; (<br/>      &lt;BeatBar key={index} height={height} /&gt;<br/>    ))}<br/>  &lt;/CoolBackground&gt;<br/>&lt;/Page2Container&gt;<br/>)}</span><span id="ebd8" class="lr ls it ln b gy ly lu l lv lw">export default Page2</span></pre><p id="c7d2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在样式组件文件中:</p><pre class="kw kx ky kz gt lm ln lo lp aw lq bi"><span id="8c04" class="lr ls it ln b gy lt lu l lv lw">// CoolBackground.js in styles folder</span><span id="ef1d" class="lr ls it ln b gy ly lu l lv lw">import styled from 'styled-components'<br/>const CoolBackground = styled.div`<br/>  width: 50%;<br/>  height: 90vh;<br/>  margin-top: 5vh;<br/>  margin-left: 5vw;<br/>  background: transparent;<br/>  display: ${(props) =&gt; (props.right ? 'flex' : 'none')};<br/>  flex-direction: row;<br/>  justify-content: center;<br/>  align-items: flex-end;<br/>  opacity: ${(props) =&gt; (props.right ? 1 : 0)};<br/>  transition: 1s all ease;<br/>  <br/>  h1 {<br/>    text-transform: uppercase;<br/>    color: black;<br/>  }<br/>`<br/>export default CoolBackground</span><span id="74a9" class="lr ls it ln b gy ly lu l lv lw">// BeatBar.js file in styles folder</span><span id="86b9" class="lr ls it ln b gy ly lu l lv lw">import styled from 'styled-components'</span><span id="0e31" class="lr ls it ln b gy ly lu l lv lw">const BeatBar = styled.div`<br/>background-color: rgb(${(props) =&gt; (props.height * 255) / 100}, 100, 100);<br/>margin: 0.1rem;<br/>height: ${(props) =&gt; props.height}%;<br/>width: 3rem;<br/>transition: 0.3s all ease-in-out;<br/>opacity: ${(props) =&gt; 0.5 + props.height / 200};<br/>border-radius: 1rem;<br/>`<br/>export default BeatBar</span><span id="e900" class="lr ls it ln b gy ly lu l lv lw">// index.js in styles folder</span><span id="52c0" class="lr ls it ln b gy ly lu l lv lw">export {default as StyledButton} from './StyledButton'<br/>export {default as FlexContainer} from './FlexContainer'<br/>export {default as StyledHeader} from './StyledHeader'<br/>export {default as Page2Container} from './Page2Container'<br/>export {default as MessageBox} from './MessageBox'<br/>export {default as CoolBackground} from './CoolBackground'<br/>export {default as BeatBar} from './BeatBar'</span></pre><p id="5a75" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在，当您转到应用程序的第2页时，您应该会看到类似这样的动画:</p><figure class="kw kx ky kz gt la gh gi paragraph-image"><div role="button" tabindex="0" class="lb lc di ld bf le"><div class="gh gi mc"><img src="../Images/b45af80f2885d9b74857f0474e3efcc0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CqxO3HNfJgixnv4i7_uh5w.png"/></div></div><figcaption class="lh li gj gh gi lj lk bd b be z dk translated">第2页已完成</figcaption></figure><p id="e4d2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">就是这样！用CSS和React探索的方向有很多。</p><p id="6769" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这是一个带有样式化组件的CSS的快速概述和教程。Styled-components是一个用于React的Javascript CSS编译器，它允许您编写模块化的CSS代码，并轻松、干净地向组件提供有状态转换。如果你想探索更多的风格组件，你可以查看他们的文档。</p></div></div>    
</body>
</html>