<html>
<head>
<title>Create Modules using CocoaPods</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用CocoaPods创建模块</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/create-modules-using-cocoapods-9483e5ccb00c?source=collection_archive---------5-----------------------#2022-05-13">https://levelup.gitconnected.com/create-modules-using-cocoapods-9483e5ccb00c?source=collection_archive---------5-----------------------#2022-05-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><h1 id="7586" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">开始前的简介</h1><p id="9332" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">不管你是初级、中级、高级还是iOS开发专家，我们都使用Cocoapods来管理我们的外部依赖，如果你从未听说过，我会给你一个上下文！！</p><blockquote class="lj lk ll"><p id="2383" class="kl km lm kn b ko ln kq kr ks lo ku kv lp lq ky kz lr ls lc ld lt lu lg lh li ij bi translated"><a class="ae lv" href="https://cocoapods.org" rel="noopener ugc nofollow" target="_blank"> CocoaPods是Swift和Objective-C Cocoa项目的依赖关系经理。它有超过89，000个库，在超过300万个应用程序中使用。CocoaPods可以帮助你优雅地扩展你的项目。</a></p></blockquote><p id="18d4" class="pw-post-body-paragraph kl km iq kn b ko ln kq kr ks lo ku kv kw lq ky kz la ls lc ld le lu lg lh li ij bi translated">你可能会问我们为什么要使用这个依赖管理器…这个问题很容易回答！</p><p id="6b27" class="pw-post-body-paragraph kl km iq kn b ko ln kq kr ks lo ku kv kw lq ky kz la ls lc ld le lu lg lh li ij bi translated">有了CocoaPods，我们可以重用一些开发人员或公司已经使用过的代码，因此开发变得更加容易和快速。一个简单的例子是网络层，使用CocoaPods可以更容易地执行API请求。</p><p id="886a" class="pw-post-body-paragraph kl km iq kn b ko ln kq kr ks lo ku kv kw lq ky kz la ls lc ld le lu lg lh li ij bi translated">但是在另一方面，协同概念在你的项目中可能是复杂的，比如:</p><ul class=""><li id="c72e" class="lw lx iq kn b ko ln ks lo kw ly la lz le ma li mb mc md me bi translated">如果团队没有相同版本的椰子恐龙。</li><li id="823c" class="lw lx iq kn b ko mf ks mg kw mh la mi le mj li mb mc md me bi translated">一些外部库已经过时，其中一些不再支持，所以如果你想在pod中加入新的东西，你必须手动扩展pod。</li><li id="c312" class="lw lx iq kn b ko mf ks mg kw mh la mi le mj li mb mc md me bi translated">如果你添加许多外部库，你的应用程序会变得更大更重。</li></ul></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><h1 id="7774" class="jn jo iq bd jp jq mr js jt ju ms jw jx jy mt ka kb kc mu ke kf kg mv ki kj kk bi translated">所以让我们来看看实际情况。</h1><p id="7b36" class="pw-post-body-paragraph kl km iq kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">为了让你更好地理解，我将把话题分开！</p><ol class=""><li id="c3a5" class="lw lx iq kn b ko ln ks lo kw ly la lz le ma li mw mc md me bi translated">如何创造</li><li id="5894" class="lw lx iq kn b ko mf ks mg kw mh la mi le mj li mw mc md me bi translated">如何配置Pod</li></ol><h1 id="348a" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">1.如何创造</h1><ul class=""><li id="0dd1" class="lw lx iq kn b ko kp ks kt kw mx la my le mz li mb mc md me bi translated">要创建新的CocoaPods (pod ),首先必须打开终端，转到保存pod的文件夹，然后运行以下命令</li></ul><pre class="na nb nc nd gt ne nf ng nh aw ni bi"><span id="7e7a" class="nj jo iq nf b gy nk nl l nm nn">pod lib create PodName</span></pre><ul class=""><li id="8fa0" class="lw lx iq kn b ko ln ks lo kw ly la lz le ma li mb mc md me bi translated">这样做时，终端会询问您一些问题，以便为您配置pod，例如:</li></ul><pre class="na nb nc nd gt ne nf ng nh aw ni bi"><span id="2f0f" class="nj jo iq nf b gy nk nl l nm nn">What platform do you want to use?? [ iOS / macOS ]<br/>&gt; iOS</span><span id="1b42" class="nj jo iq nf b gy no nl l nm nn">What language do you want to use?? [ Swift / ObjC ]<br/>&gt; Swift</span><span id="f46e" class="nj jo iq nf b gy no nl l nm nn">Would you like to include a demo application with your library? [ Yes / No ]<br/>&gt; Yes</span><span id="4d82" class="nj jo iq nf b gy no nl l nm nn">Which testing frameworks will you use? [ Quick / None ]<br/>&gt; None</span><span id="f558" class="nj jo iq nf b gy no nl l nm nn">Would you like to do view based testing? [ Yes / No ]<br/>&gt; No</span></pre><ul class=""><li id="d573" class="lw lx iq kn b ko ln ks lo kw ly la lz le ma li mb mc md me bi translated">我在上面的例子中给出的答案就是我将在本教程中介绍的答案！！</li></ul><p id="bde8" class="pw-post-body-paragraph kl km iq kn b ko ln kq kr ks lo ku kv kw lq ky kz la ls lc ld le lu lg lh li ij bi translated">如果一切顺利，xcode将打开您的示例应用程序，您的pod已经成功创建。</p><h1 id="8ea2" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">2.如何配置Pod</h1><h2 id="d8ee" class="nj jo iq bd jp np nq dn jt nr ns dp jx kw nt nu kb la nv nw kf le nx ny kj nz bi translated"><strong class="ak"> 2.1。Xcode配置</strong></h2><ul class=""><li id="67b9" class="lw lx iq kn b ko kp ks kt kw mx la my le mz li mb mc md me bi translated">正如你在下图中看到的，打开项目后，我们有一个警告标志。如果你点击它，Xcode会显示警告。</li><li id="bc22" class="lw lx iq kn b ko mf ks mg kw mh la mi le mj li mb mc md me bi translated">修复起来超级简单，只需点击“问题”，Xcode就会引导你。</li></ul><figure class="na nb nc nd gt ob gh gi paragraph-image"><div role="button" tabindex="0" class="oc od di oe bf of"><div class="gh gi oa"><img src="../Images/1bc508fe3b75de0bdecbebd78e709df0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Jm-Bzl2ftwdW-1sM7zwZHA.png"/></div></div></figure><h2 id="7588" class="nj jo iq bd jp np nq dn jt nr ns dp jx kw nt nu kb la nv nw kf le nx ny kj nz bi translated">2.2.Podspec</h2><ul class=""><li id="b0f6" class="lw lx iq kn b ko kp ks kt kw mx la my le mz li mb mc md me bi translated">PodSpec是关于您正在创建的pod的规范，第一眼看上去，您的podspec将如下图所示。</li></ul><blockquote class="lj lk ll"><p id="59d9" class="kl km lm kn b ko ln kq kr ks lo ku kv lp lq ky kz lr ls lc ld lt lu lg lh li ij bi translated"><a class="ae lv" href="https://guides.cocoapods.org/syntax/podspec.html" rel="noopener ugc nofollow" target="_blank">“一个规范描述了一个版本的Pod库。它包括有关应该从哪里获取源代码、使用什么文件、要应用的构建设置以及其他常规元数据(如名称、版本和描述)的详细信息。</a></p></blockquote><figure class="na nb nc nd gt ob gh gi paragraph-image"><div role="button" tabindex="0" class="oc od di oe bf of"><div class="gh gi oi"><img src="../Images/97267c36825ab7ac5537b58a38e6edbe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tMvYWenhDlt263Amm0cKKA.png"/></div></div></figure><h2 id="419a" class="nj jo iq bd jp np nq dn jt nr ns dp jx kw nt nu kb la nv nw kf le nx ny kj nz bi translated">定制</h2><ol class=""><li id="2cb5" class="lw lx iq kn b ko kp ks kt kw mx la my le mz li mw mc md me bi translated">我喜欢把|s|改成|spec|</li><li id="9b69" class="lw lx iq kn b ko mf ks mg kw mh la mi le mj li mw mc md me bi translated">使用以下命令<code class="fe oj ok ol nf b">spec.swift_version = '5.0'</code>设置您希望pod使用的Swift版本</li><li id="27dc" class="lw lx iq kn b ko mf ks mg kw mh la mi le mj li mw mc md me bi translated">用下面的命令<code class="fe oj ok ol nf b">spec.ios.deployment_target = '13.0'</code>为你的pod设置你想要的最低iOS开发目标(记住苹果建议在最后一个版本下最多使用2个iOS版本)</li></ol><ul class=""><li id="9a97" class="lw lx iq kn b ko ln ks lo kw ly la lz le ma li mb mc md me bi translated">上面的定制很简单，对吗？现在我们要做一些更高级的事情，这是我个人在使用pod时喜欢做的事情…我们要配置子空间！</li></ul><h2 id="cd5c" class="nj jo iq bd jp np nq dn jt nr ns dp jx kw nt nu kb la nv nw kf le nx ny kj nz bi translated">2.2.1.1亚种</h2><ul class=""><li id="0bfc" class="lw lx iq kn b ko kp ks kt kw mx la my le mz li mb mc md me bi translated">我喜欢使用subspecs，因为它们允许我们的pod有一个以上的配置……我个人更喜欢使用两个配置，即<code class="fe oj ok ol nf b">Debug</code>和<code class="fe oj ok ol nf b">Release</code>，所以当我们在pod中创建功能或任何其他内容时，我们使用<code class="fe oj ok ol nf b">Debug</code>，当我们与<strong class="kn ir">主应用程序</strong>集成时，我们使用<code class="fe oj ok ol nf b">Release</code>，这样我们正在处理的文件就不会显示在应用程序中，也不会弄乱lint或我们在<strong class="kn ir">主应用程序中配置的内容。</strong></li></ul><ol class=""><li id="0128" class="lw lx iq kn b ko ln ks lo kw ly la lz le ma li mw mc md me bi translated">为你的pod设置默认的子空间:<code class="fe oj ok ol nf b">spec.default_subspecs = 'Release'</code>，正如你所看到的，我选择了Release作为我的默认，但是你可以有多个默认子空间！</li><li id="0f73" class="lw lx iq kn b ko mf ks mg kw mh la mi le mj li mw mc md me bi translated">现在我们将配置两个子空间。<br/><strong class="kn ir">调试<br/></strong>为了创建我们的<code class="fe oj ok ol nf b">Debug</code>子空间，我们使用以下命令:</li></ol><pre class="na nb nc nd gt ne nf ng nh aw ni bi"><span id="cdda" class="nj jo iq nf b gy nk nl l nm nn">spec.subspec 'Debug' do |debug|<br/>    1   debug.source_files = 'Medium/Classes/**/*.{swift, h, m}', 'Medium/Information.swift'<br/>    2   debug.resources = 'Medium/Assets/**/*.{json, xml, storyboard, xib}', 'Medium/Information.swift'<br/>end</span></pre><ul class=""><li id="aaf4" class="lw lx iq kn b ko ln ks lo kw ly la lz le ma li mb mc md me bi translated">如您所见，我已经设置了文件和资产的路径，现在让我解释一下。<br/>数字<strong class="kn ir"> 1 </strong>负责设置我们的源文件的存放位置。编号<br/>2负责设置我们的资源文件的存放位置。在<code class="fe oj ok ol nf b">Debug</code>子空间上还有一个步骤，我想做的是启用单元测试。为此，我们必须稍微修改一下上面的代码:</li></ul><pre class="na nb nc nd gt ne nf ng nh aw ni bi"><span id="c589" class="nj jo iq nf b gy nk nl l nm nn">spec.subspec 'Debug' do |debug|<br/>      debug.source_files = 'Medium/Classes/**/*.{swift, h, m}', 'Medium/Information.swift'<br/>      debug.resources = 'Medium/Assets/**/*.{json, xml, storyboard, xib}', 'Medium/Information.swift'<br/>   3   debug.test_spec 'Tests' do |test_spec|<br/>   4         test_spec.source_files = 'Medium/Tests/**/*.{swift, h, m}', 'Medium/Information.swift'<br/>      end<br/>end</span></pre><ul class=""><li id="cb03" class="lw lx iq kn b ko ln ks lo kw ly la lz le ma li mb mc md me bi translated">编号<strong class="kn ir"> 3 </strong>负责创建我们的测试规范<br/>编号<strong class="kn ir"> 4 </strong>负责设置我们的测试源文件的存储位置。</li><li id="1123" class="lw lx iq kn b ko mf ks mg kw mh la mi le mj li mb mc md me bi translated"><strong class="kn ir">发布<br/> </strong>为了创建我们的<code class="fe oj ok ol nf b">Release</code>子空间，我们使用以下命令:</li></ul><pre class="na nb nc nd gt ne nf ng nh aw ni bi"><span id="89e2" class="nj jo iq nf b gy nk nl l nm nn">spec.subspec 'Release' do |release|<br/>   release.vendored_frameworks = 'Framework/Medium.framework'<br/>end</span></pre><ul class=""><li id="9b55" class="lw lx iq kn b ko ln ks lo kw ly la lz le ma li mb mc md me bi translated">比<code class="fe oj ok ol nf b">Debug</code>容易多了吧？</li></ul><p id="7c68" class="pw-post-body-paragraph kl km iq kn b ko ln kq kr ks lo ku kv kw lq ky kz la ls lc ld le lu lg lh li ij bi translated">最后，我们的podspec应该是这样的</p><figure class="na nb nc nd gt ob gh gi paragraph-image"><div role="button" tabindex="0" class="oc od di oe bf of"><div class="gh gi om"><img src="../Images/8d210d7fa26de59ebb4b7630afed6c5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*26MbpfO2dl83XBFw3kSySQ.png"/></div></div></figure><p id="1337" class="pw-post-body-paragraph kl km iq kn b ko ln kq kr ks lo ku kv kw lq ky kz la ls lc ld le lu lg lh li ij bi translated">最后一步是配置Podfile和文件夹结构</p><ul class=""><li id="286d" class="lw lx iq kn b ko ln ks lo kw ly la lz le ma li mb mc md me bi translated">第一眼看到你的Podfile，它是这样的</li></ul><figure class="na nb nc nd gt ob gh gi paragraph-image"><div class="gh gi on"><img src="../Images/68fe34237a8b117ee29db8024afeaa9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:732/format:webp/1*5GlGvSBm-PpaOsYbPbrtsA.png"/></div></figure><p id="18c1" class="pw-post-body-paragraph kl km iq kn b ko ln kq kr ks lo ku kv kw lq ky kz la ls lc ld le lu lg lh li ij bi translated">要执行我们在podspec上进行的配置，我们必须更改:</p><ol class=""><li id="28aa" class="lw lx iq kn b ko ln ks lo kw ly la lz le ma li mw mc md me bi translated"><code class="fe oj ok ol nf b">platform :ios, '9.0'</code>到<code class="fe oj ok ol nf b">plataform :ios, '13.0'</code>。</li><li id="4270" class="lw lx iq kn b ko mf ks mg kw mh la mi le mj li mw mc md me bi translated">以及<code class="fe oj ok ol nf b">pod 'Medium', :path =&gt; '../'</code>到<code class="fe oj ok ol nf b">pod 'Medium/Debug', :path =&gt; '../', testspecs =&gt; ['Tests']</code>。</li><li id="ff24" class="lw lx iq kn b ko mf ks mg kw mh la mi le mj li mw mc md me bi translated">我也喜欢输入的一个东西是<code class="fe oj ok ol nf b">install 'cocoapods', :deterministic_uuids =&gt; false</code>，使用这个命令<strong class="kn ir">uuid</strong>将不会重复。</li></ol><ul class=""><li id="d801" class="lw lx iq kn b ko ln ks lo kw ly la lz le ma li mb mc md me bi translated">更改后，您的Podfile应该看起来像下图。</li></ul><figure class="na nb nc nd gt ob gh gi paragraph-image"><div class="gh gi oo"><img src="../Images/3b7fda751f4f6351ee45fd7043f1b349.png" data-original-src="https://miro.medium.com/v2/resize:fit:1396/format:webp/1*M-OhwPU4rbPAS-SrSE4SlQ.png"/></div></figure><ul class=""><li id="d142" class="lw lx iq kn b ko ln ks lo kw ly la lz le ma li mb mc md me bi translated"><strong class="kn ir">文件夹结构<br/> </strong>第一眼看上去你的文件夹是这样的</li></ul><figure class="na nb nc nd gt ob gh gi paragraph-image"><div role="button" tabindex="0" class="oc od di oe bf of"><div class="gh gi op"><img src="../Images/e350ad11e68fdfb27b9c906b1819e894.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TWkrM0xs1GHV8RX6GegXKg.png"/></div></div></figure><p id="aa18" class="pw-post-body-paragraph kl km iq kn b ko ln kq kr ks lo ku kv kw lq ky kz la ls lc ld le lu lg lh li ij bi translated">要执行我们在podspec上进行的配置，我们必须更改:</p><ol class=""><li id="f44e" class="lw lx iq kn b ko ln ks lo kw ly la lz le ma li mw mc md me bi translated">创建测试文件夹</li><li id="824c" class="lw lx iq kn b ko mf ks mg kw mh la mi le mj li mw mc md me bi translated">创建<strong class="kn ir"> Information.swift </strong>文件</li></ol><p id="7864" class="pw-post-body-paragraph kl km iq kn b ko ln kq kr ks lo ku kv kw lq ky kz la ls lc ld le lu lg lh li ij bi translated">更改后，您的文件夹应该是这样的</p><figure class="na nb nc nd gt ob gh gi paragraph-image"><div role="button" tabindex="0" class="oc od di oe bf of"><div class="gh gi oq"><img src="../Images/c8a740881a9faceed2391d1802d48928.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3JpMC5jn6xZ0N1dpvU0QUw.png"/></div></div></figure><p id="d27c" class="pw-post-body-paragraph kl km iq kn b ko ln kq kr ks lo ku kv kw lq ky kz la ls lc ld le lu lg lh li ij bi translated">我也喜欢把一些文件放在文件夹里，只是为了看看里面的Xcode……完成后，你可以在终端上运行命令<code class="fe oj ok ol nf b">pod install</code>和<code class="fe oj ok ol nf b">open NameOffYorApp.xcworkspace</code></p><figure class="na nb nc nd gt ob gh gi paragraph-image"><div role="button" tabindex="0" class="oc od di oe bf of"><div class="gh gi or"><img src="../Images/78b38ae43f04d52a26d6530c98a5b362.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6TCC8kwlJgcC0BQG5Fk0CA.png"/></div></div></figure><p id="176a" class="pw-post-body-paragraph kl km iq kn b ko ln kq kr ks lo ku kv kw lq ky kz la ls lc ld le lu lg lh li ij bi translated">现在，您可以看到，在中型文件夹中，我们有<code class="fe oj ok ol nf b">Debug</code>假文件夹，在该文件夹中，我们有所有文件夹。我们确实有一个假的<code class="fe oj ok ol nf b">Tests</code>文件夹，请记住，我们必须在“真实”文件夹中创建文件和文件夹……“真实”文件夹是左下角没有<code class="fe oj ok ol nf b">arrow</code>的文件夹，如下图所示。</p><figure class="na nb nc nd gt ob gh gi paragraph-image"><div class="gh gi os"><img src="../Images/a011a3f5205ef4aa03969005ccfb1a6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:930/format:webp/1*8Nu-6mGGD4l-7EmR7Y-rOg.png"/></div></figure><p id="7c3c" class="pw-post-body-paragraph kl km iq kn b ko ln kq kr ks lo ku kv kw lq ky kz la ls lc ld le lu lg lh li ij bi translated">参考:<a class="ae lv" href="https://guides.cocoapods.org" rel="noopener ugc nofollow" target="_blank">https://guides.cocoapods.org</a></p><p id="61bf" class="pw-post-body-paragraph kl km iq kn b ko ln kq kr ks lo ku kv kw lq ky kz la ls lc ld le lu lg lh li ij bi translated">下一步:<a class="ae lv" href="https://medium.com/@danielgrisof/create-universal-framework-49039224dea1" rel="noopener"> <strong class="kn ir">创建通用框架</strong> </a></p><h1 id="3bfe" class="jn jo iq bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">就这些了，谢谢！😁</h1></div></div>    
</body>
</html>