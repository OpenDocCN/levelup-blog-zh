<html>
<head>
<title>Oracle Database 19.3c— Multitenant Architecture, Create CDB and PDB</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Oracle数据库19.3c—多租户架构，打造CDB和PDB</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/oracle-database-multitenant-architecture-create-cdb-and-pdb-4a9bb954803b?source=collection_archive---------5-----------------------#2020-11-05">https://levelup.gitconnected.com/oracle-database-multitenant-architecture-create-cdb-and-pdb-4a9bb954803b?source=collection_archive---------5-----------------------#2020-11-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/e17361badf3b18e714df4a44855ed892.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sFmJG09lsn090HvdfidyzQ.png"/></div></div></figure><p id="f5d9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在前面的故事中，我们介绍了如何在CentOS 7(<a class="ae kw" href="https://kalanaejayasuriya.medium.com/install-oracle-database-19-3c-on-centos-7-52036876436" rel="noopener"><strong class="ka ir">https://kalanaejayasuriya . medium . com/install-Oracle-database-19-3c-on-CentOS-7-52036876436</strong></a>)上安装oracle 19.3c。在这一部分中，我们将介绍CDB和PDB的安装。在开始安装之前，让我们来谈谈什么是CDB和PDB。</p><h1 id="cfce" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated"><strong class="ak">多租户架构</strong></h1><ul class=""><li id="9631" class="lv lw iq ka b kb lx kf ly kj lz kn ma kr mb kv mc md me mf bi translated">继Oracle 12c之后，Oracle推出了名为“多租户架构”的新架构</li><li id="45a1" class="lv lw iq ka b kb mg kf mh kj mi kn mj kr mk kv mc md me mf bi translated">在以前版本的Oracle数据库中，主要问题是，如果用户启动一个新实例，每个实例都有特定的后台进程。这个过程是一种内存浪费，严重影响系统性能。</li><li id="f11c" class="lv lw iq ka b kb mg kf mh kj mi kn mj kr mk kv mc md me mf bi translated">因此，Oracle提出了将不同的数据库连接成一种数据库技术的新思路。这个想法被称为“多租户架构”</li><li id="ac28" class="lv lw iq ka b kb mg kf mh kj mi kn mj kr mk kv mc md me mf bi translated">其中一个主数据库称为“CDB”(容器数据库)，用于连接主数据库的其他数据库称为“PDB”(可插拔数据库)</li></ul><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div class="gh gi ml"><img src="../Images/ac0c799fc55bb6f9f72b280c9e9a79ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1068/format:webp/1*IfrWnvgD0LtdbTlHhCSFww.png"/></div><figcaption class="mq mr gj gh gi ms mt bd b be z dk translated">(多租户架构示例)</figcaption></figure><h1 id="2d9e" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated"><strong class="ak">多租户架构的主要组件</strong></h1><ol class=""><li id="238d" class="lv lw iq ka b kb lx kf ly kj lz kn ma kr mb kv mu md me mf bi translated"><strong class="ka ir"> CDB </strong> —集装箱数据库</li></ol><ul class=""><li id="1063" class="lv lw iq ka b kb kc kf kg kj mv kn mw kr mx kv mc md me mf bi translated">这是母容器(主容器)。</li><li id="3e74" class="lv lw iq ka b kb mg kf mh kj mi kn mj kr mk kv mc md me mf bi translated">“控制文件”和“重做日志文件”是CDB的主要文件。</li></ul><p id="46ff" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> 2。CDB$Root </strong> —根容器</p><ul class=""><li id="ab6a" class="lv lw iq ka b kb kc kf kg kj mv kn mw kr mx kv mc md me mf bi translated">每个CDB都有一个根容器(CDB＄Root)。</li><li id="9e06" class="lv lw iq ka b kb mg kf mh kj mi kn mj kr mk kv mc md me mf bi translated">所有可插拔数据库(pdb)都由根容器控制和管理。</li><li id="0586" class="lv lw iq ka b kb mg kf mh kj mi kn mj kr mk kv mc md me mf bi translated">所有pdb都属于根容器。</li><li id="61ad" class="lv lw iq ka b kb mg kf mh kj mi kn mj kr mk kv mc md me mf bi translated">根容器不存储用户数据。</li></ul><p id="b1c3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> 3。PDB </strong> —可插拔数据库</p><ul class=""><li id="3478" class="lv lw iq ka b kb kc kf kg kj mv kn mw kr mx kv mc md me mf bi translated">可以将一个或多个pdb连接到容器数据库。</li><li id="060f" class="lv lw iq ka b kb mg kf mh kj mi kn mj kr mk kv mc md me mf bi translated">这是一个单独的数据库，由用户创建或为用户创建以存储特定数据。</li><li id="f24b" class="lv lw iq ka b kb mg kf mh kj mi kn mj kr mk kv mc md me mf bi translated">我们可以将数据存储在支持特定应用的pdb中。</li></ul><p id="b31c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> 4。PDB $种子</strong> —种子容器</p><ul class=""><li id="7287" class="lv lw iq ka b kb kc kf kg kj mv kn mw kr mx kv mc md me mf bi translated">这是系统提供的模板</li><li id="12d7" class="lv lw iq ka b kb mg kf mh kj mi kn mj kr mk kv mc md me mf bi translated">此模板可用于创建新的pdb。</li><li id="10bb" class="lv lw iq ka b kb mg kf mh kj mi kn mj kr mk kv mc md me mf bi translated">我们不能在种子容器(PDB＄Seed)中添加或修改对象。</li></ul><h1 id="0ff4" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated"><strong class="ak">多租户架构的优势</strong></h1><ul class=""><li id="e8f7" class="lv lw iq ka b kb lx kf ly kj lz kn ma kr mb kv mc md me mf bi translated">可以一次合并多个数据库</li><li id="a871" class="lv lw iq ka b kb mg kf mh kj mi kn mj kr mk kv mc md me mf bi translated">补丁和升级可以很容易地应用到CDB</li><li id="4c2a" class="lv lw iq ka b kb mg kf mh kj mi kn mj kr mk kv mc md me mf bi translated">pdb可以从一个CDB上拔下，并可以连接到另一个CDB上。</li><li id="3bf6" class="lv lw iq ka b kb mg kf mh kj mi kn mj kr mk kv mc md me mf bi translated">可以同时管理多个数据库。</li></ul><h1 id="ac83" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated"><strong class="ak">用PDB创建CDB—安装指南</strong></h1><p id="8843" class="pw-post-body-paragraph jy jz iq ka b kb lx kd ke kf ly kh ki kj my kl km kn mz kp kq kr na kt ku kv ij bi translated">第一步-:  1。第一步，您必须运行位于<strong class="ka ir"> Home/database/bin </strong>中的“dbca”向导。</p><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/909f7993d97d5164cc538f245dd7c41d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1148/format:webp/1*VFVV3SFv7a4Jg9w2fjHXaA.png"/></div></figure><p id="f2ff" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">步骤2 -: </strong>但是您不能直接运行向导。因此，你必须使用终端。和我一样做。打开终端并键入以下内容</p><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/b8763f1cc9178e52e0c284859a7e8384.png" data-original-src="https://miro.medium.com/v2/resize:fit:1034/format:webp/1*O_6o6JLhE3cxf4SrDfHPDg.png"/></div></figure><p id="030e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">步骤3 -: </strong>然后向导将在几秒钟内打开，看起来像这样。这是我们第一次。因此，选择<strong class="ka ir">“创建数据库”</strong></p><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/08b2126010271cb69410c49de6b372c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*VYcS70-AtQFJlM0uzibonw.png"/></div></figure><p id="13c9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">步骤4 -: </strong>选择高级配置，仅手动设置CDB和PDB。</p><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/cdca1d5e01e40eb6acb902e030222769.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*CNFfjUq2XFrSGMRj8niIDg.png"/></div></figure><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/95372ec3d24a020f9d19c8a6884c5c80.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*teFbHcq_ZtzauQ1omVtIpA.png"/></div></figure><p id="49f2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">第五步-: 下一步非常重要。在这里，我们必须设置CDB和PDB的名字。在我的例子中，我将我的名字(kalana)设置为CDB名，将“PDBTEST”设置为可插入的数据库名。</p><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/fe573ecffc4ba13a93d2493d6880b098.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*3asJ8xbEBrpW1bYezgYbRA.png"/></div></figure><p id="ad85" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后跟着我的步骤走，直到我们找到听众部分。</p><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ne"><img src="../Images/2f6f4306edd5031ef7f0b18784d4ce65.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZbWz1CUA9LP4tw2y4CqIHg.png"/></div></div></figure><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nf"><img src="../Images/42cd4b9fbaa6a4a4370f18481955d8eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m4ZJqijSq0wgn_aMPbpaww.png"/></div></div></figure><p id="a1de" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">步骤7 -: </strong>通常，每个人总是在安装期间创建，但是让我们尝试通过设置不同的端口号来手动配置监听器。因此，取消选中<strong class="ka ir">“创建新的监听器”</strong></p><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ng"><img src="../Images/9f4c7576bb073fd3cb2250902eec031e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yyWEJDH91toS1DEIFyezRw.png"/></div></div></figure><p id="a0b4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">步骤8 -: </strong>再次跟随我的步骤，直到我们遇到设置数据库凭证</p><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nh"><img src="../Images/56327481127e547eaecbd586e5f33cd3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*afo3wU3BhYzBr1cQlEZrZA.png"/></div></div></figure><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ni"><img src="../Images/9e7b6fa76c441f32905dfc89bcb363eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6vuKe6rT_f9z5cPA6D8VYA.png"/></div></div></figure><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ni"><img src="../Images/5a5fa1f1e770e0e95e4b4cf41b06911c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n2rJ3benvfCUnzYfARmqTA.png"/></div></div></figure><p id="f8b8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">第8步-: </strong>设置密码时，选择“对所有帐户使用相同的管理密码”并输入您记得的任何密码。</p><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nj"><img src="../Images/6310c8e180ac9ae7dc2f54fec39842c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h38krMwg25pNayRpPMFOhA.png"/></div></div></figure><p id="ce77" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">第9步-: </strong>然后和我一样，完成安装。</p><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nj"><img src="../Images/4cfa025ff52dbff9bce45e4042d326bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4XjIZ0JZG-yY4u7e7sAg5Q.png"/></div></div></figure><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ni"><img src="../Images/72af73462b2c8512d1c78e958846c71e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qds6DsS8f58UPRX7iuK9Rw.png"/></div></div></figure><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nf"><img src="../Images/16b52a89c1287c4063032a2475cca9e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AAN5ISKzojdZqIQ-XuiVaA.png"/></div></div></figure><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nj"><img src="../Images/503b23df2958ca57000579d39e5608dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JxLGSWeGMTY0r61T6sR6iw.png"/></div></div></figure><p id="eb39" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，您可以启动您的实例并检查新创建的PDB是否连接到系统。为此，打开终端并运行“<strong class="ka ir"> sqlplus / as sysdba”。</strong>之后，sqlplus将打开并键入<strong class="ka ir">“startup”</strong>来启动实例。然后输入<strong class="ka ir">“显示pdb”</strong>查看已经创建的pdb列表。</p><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nk"><img src="../Images/0cb1a237b9ae55b1655049df1d28dd30.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jEJ1JFQlZ6md10OIikx75A.png"/></div></div></figure><p id="c65c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">要关闭实例，请键入<strong class="ka ir">“shut down immediate”</strong>并输入。要退出sqlplus，请键入<strong class="ka ir">“exit”</strong>或<strong class="ka ir">“exit()”</strong>退出sqlplus。</p><figure class="mm mn mo mp gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nk"><img src="../Images/f409e4d10799f6a8c1187d610ae9f807.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7EbKhn44NsUW6NrSa8Wtag.png"/></div></div></figure><p id="5fa9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在本教程中，我们没有创建监听器。在下一个教程中，我将教你如何创建自定义监听器并注册PDB。谢谢大家！</p><ol class=""><li id="0baf" class="lv lw iq ka b kb kc kf kg kj mv kn mw kr mx kv mu md me mf bi translated"><em class="nl">第3部分</em> — <strong class="ka ir"> Oracle数据库—创建自定义监听器并将其注册到Oracle数据库19.3c中的PDB-:</strong><a class="ae kw" href="https://kalanaejayasuriya.medium.com/create-custom-listener-and-register-it-to-a-pdb-f6c709d23054" rel="noopener">https://kalanaejayasuriya . medium . com/Create-custom-Listener-and-register-it-to-a-PD b-f6c 709d 23054</a></li></ol></div></div>    
</body>
</html>