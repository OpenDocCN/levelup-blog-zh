<html>
<head>
<title>JavaScript Unit Testing for .NET Developers — Part 1 Environment Setup and Tooling</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript单元测试。NET开发人员—第1部分环境设置和工具</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/javascript-react-redux-unit-testing-for-net-developers-part-1-environment-setup-and-tooling-ad54411d9a28?source=collection_archive---------4-----------------------#2019-07-15">https://levelup.gitconnected.com/javascript-react-redux-unit-testing-for-net-developers-part-1-environment-setup-and-tooling-ad54411d9a28?source=collection_archive---------4-----------------------#2019-07-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/7442af772bacdc1096d4dff56060f6a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ph2m53htCsyzCqbKZwYJEg.jpeg"/></div></div></figure><div class=""/><h1 id="6c81" class="jy jz jb bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">介绍</h1><p id="24c8" class="pw-post-body-paragraph kw kx jb ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">这是一个单元测试指南，面向已经熟悉单元测试并熟悉在. NET环境中使用工具的开发人员。</p><p id="b135" class="pw-post-body-paragraph kw kx jb ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">Javascript的行为有相当多的差异，这可能会在创建可测试代码的过程中出现许多“陷阱”。在本指南中，我想向您展示一系列相似之处，这些相似之处可以转化为您已经熟悉的内容。</p><p id="d15f" class="pw-post-body-paragraph kw kx jb ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">我们将在本指南中介绍以下内容:</p><ul class=""><li id="6d99" class="lz ma jb ky b kz lu ld lv lh mb ll mc lp md lt me mf mg mh bi translated">环境、工具和设置。</li><li id="5077" class="lz ma jb ky b kz mi ld mj lh mk ll ml lp mm lt me mf mg mh bi translated">用玩笑来测试和嘲笑</li><li id="e3ed" class="lz ma jb ky b kz mi ld mj lh mk ll ml lp mm lt me mf mg mh bi translated">测试反应组件</li><li id="8027" class="lz ma jb ky b kz mi ld mj lh mk ll ml lp mm lt me mf mg mh bi translated">测试异步方法和Sagas以及Redux存储。</li></ul><p id="d0e8" class="pw-post-body-paragraph kw kx jb ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">我在本指南中不涉及的是我假设你已经熟悉的东西。这些是三A模式，即安排、行动、断言。设计模式和坚实的原则。我也不会讨论如何设置React和Redux，我假设您已经对这两者有所了解。我将在另一篇文章中介绍如何设置。</p><h1 id="ba9b" class="jy jz jb bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">环境设置和工具</h1><p id="e89d" class="pw-post-body-paragraph kw kx jb ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">我们将使用的代码编辑器是VSCode。这是一个很棒的编辑器，几乎提供了我们需要的所有功能。它有一些很棒的扩展，特别是最近对单元测试的一些非常优秀的扩展。</p><p id="5e4a" class="pw-post-body-paragraph kw kx jb ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">除了VSCode，我们还将使用Jest，它将作为我们的测试运行器、模拟和单元测试框架。Enzyme将用于测试React组件，Majestic用作测试UI，让熟悉Visual Studio测试工具的人松了一口气。</p><h1 id="9099" class="jy jz jb bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">设置笑话</h1><p id="702f" class="pw-post-body-paragraph kw kx jb ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">Jest在理想情况下应该是全局设置的，你可以在命令行输入<code class="fe mn mo mp mq b">npm install -g jest</code>来实现。</p><h1 id="e1c3" class="jy jz jb bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">设置酶</h1><p id="6808" class="pw-post-body-paragraph kw kx jb ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">Enzyme是一个重要的工具，它允许我们在内存中模拟react组件并查询React虚拟dom或将React虚拟dom转换为HTML dom并进行查询。</p><p id="1331" class="pw-post-body-paragraph kw kx jb ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">它能够做到这一点是因为在Enzyme的背后是另外两种强大的Javascript技术的结合。一个是JSDOM(<a class="ae mr" href="https://github.com/jsdom/jsdom" rel="noopener ugc nofollow" target="_blank">https://github.com/jsdom/jsdom</a>)，它可以被认为是一个内存无头浏览器，另一个是Cheerio(<a class="ae mr" href="https://github.com/cheeriojs/cheerio" rel="noopener ugc nofollow" target="_blank">https://github.com/cheeriojs/cheerio</a>)，它解析、选择和操作DOM。Cheerio使用CSS样式选择器选择JSDOM中的项目。</p><p id="0a1f" class="pw-post-body-paragraph kw kx jb ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">要安装Enzyme，请转到您的应用程序目录并运行命令<code class="fe mn mo mp mq b">npm i --save-dev enzyme</code>。除了Enzyme，你还需要安装允许Enzyme使用React的适配器，在编写React时，它的版本是16。运行命令<code class="fe mn mo mp mq b">npm i --save-dev enzyme enzyme-adapter-react-16</code></p><h1 id="74e0" class="jy jz jb bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">设置Majestic</h1><p id="bf87" class="pw-post-body-paragraph kw kx jb ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">Jest本身是一个很好的工具，但是目前你只能在命令行上运行测试，这对于一些人来说是可以的，但是如果你有很多测试失败，那么在命令窗口中看到这么多失败的单元测试并试图找出问题是很困难的。</p><figure class="mt mu mv mw gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ms"><img src="../Images/48abe77af835571aa36f6bb5ba38570d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1374/0*BeZU0-0SnyItGQt6"/></div></div></figure><p id="eddb" class="pw-post-body-paragraph kw kx jb ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">Majestic(<a class="ae mr" href="https://github.com/Raathigesh/majestic" rel="noopener ugc nofollow" target="_blank">https://github.com/Raathigesh/majestic</a>)是一个给你类似于Visual Studio测试浏览器体验的伟大工具。</p><p id="aeda" class="pw-post-body-paragraph kw kx jb ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">Majestic允许您以连续的可视化方式查看您的测试，它可以运行您的解决方案中的所有测试，或者只运行选定的测试，并允许您导航到失败的测试。它还获取了单元测试失败原因的信息，并以一种更加人性化的方式呈现出来。我推荐它的使用。</p><p id="9a19" class="pw-post-body-paragraph kw kx jb ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">要安装Majestic，您需要全局安装它，请运行npm install -g majestic。</p><h1 id="46d0" class="jy jz jb bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">设置Chrome调试</h1><p id="bdd7" class="pw-post-body-paragraph kw kx jb ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">应该安装VSCode的Chrome扩展，该扩展可以将自己附加到Chome dev tools调试器，并允许您在VSCode中进行调试。如果你还没有这样做，安装这个扩展。</p><p id="d208" class="pw-post-body-paragraph kw kx jb ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">为了能够在运行时调试您的应用程序，您需要修改解决方案目录下“vscode”文件夹中包含的launch.json文件。也可以通过在VSCode中进入“Debug”(Ctrl+Shift+D)并选择将打开launch.json文件的设置cog来找到它。在这里，您必须确保在configurations属性中存在以下json。</p><figure class="mt mu mv mw gt is"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="99a5" class="pw-post-body-paragraph kw kx jb ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">数组中的第一部分告诉VSCode，在调试时，您将在本地主机上的端口3000上启动应用程序(根据需要进行更改)。第二部分是当你想调试你的单元测试时需要做的事情。</p><h1 id="d300" class="jy jz jb bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">便捷的VSCode扩展</h1><p id="b4b3" class="pw-post-body-paragraph kw kx jb ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">以及其他一些可能会派上用场的扩展:</p><ul class=""><li id="d530" class="lz ma jb ky b kz lu ld lv lh mb ll mc lp md lt me mf mg mh bi translated">括号对着色程序——在代码中使用许多括号的可视化辅助工具。</li><li id="0e4b" class="lz ma jb ky b kz mi ld mj lh mk ll ml lp mm lt me mf mg mh bi translated">git Lens——为您提供类似于在Visual Studio中编写lens代码的体验，并在代码中显示谁是最后的作者。</li><li id="f84e" class="lz ma jb ky b kz mi ld mj lh mk ll ml lp mm lt me mf mg mh bi translated">代码拼写检查器—拼写检查</li><li id="300f" class="lz ma jb ky b kz mi ld mj lh mk ll ml lp mm lt me mf mg mh bi translated">材料图标主题——美观，给你好看的图标。</li></ul><h1 id="d12b" class="jy jz jb bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">摘要</h1><p id="6750" class="pw-post-body-paragraph kw kx jb ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">到目前为止，我们已经为VSCode安装了一些工具和扩展。我们已经讨论了这些工具在类似于Visual Studio的单元测试和调试体验方面给你带来了什么。</p><p id="e117" class="pw-post-body-paragraph kw kx jb ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">在下一集里，我们将真正尝试用Jest开始单元测试和模仿(是的，我说的是模仿JavaScript)。</p></div></div>    
</body>
</html>