# 最有效的 TDD

> 原文：<https://levelup.gitconnected.com/the-wrong-tdd-4d2f5199639c>

## 它专注于一种测试，这种测试驱动所有的开发，减少角色之间交流所浪费的时间，并提高领导力。钥匙？焦点。

![](img/1d60785e636ff11aff37dc13a3b472cd.png)

由[埃琳娜·塔拉年科](https://unsplash.com/@elenatrn?utm_source=medium&utm_medium=referral)在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄的照片

几个月前，我在房间的白板上写下了下面两句话:

*   使用 TDD，当你写完最后一行代码时，你就完成了，
*   没有 TDD，你才刚刚开始。

我是在参与一个很少或几乎没有有用测试的项目后写下这些句子的。遍历这些代码就像遍历一个雷区:每一个新的开发或变化都会产生新的错误，或者旧的错误。这与我习惯的体验完全相反:利用测试快速安全地更新代码。那次经历让我意识到一个好的 TDD 是多么的强大和快速，尽管看起来矛盾，但是从长远来看，不花时间在 TDD 上是对资源的浪费。

## 是否有错误的 TDD？

令人惊讶的是，这两个项目都应该是用 TDD 构建的，但是碰巧每个项目都是用不同风格的 TDD 构建的。第一个问题产生了糟糕的测试和难以维护的代码。第二个创建了有用和可靠的测试，结果是几乎没有技术债务的代码。

事实证明，有错误的 TDD 和良好的 TDD 之分。

## TDD 怎么会变成错误的 TDD？

好的 TDD 和错的 TDD 区别不大，只有一个概念:焦点。

错误的 TDD 专注于测试，而忽略了其他部分。这似乎违反直觉，因为 TDD 实际上是测试驱动的开发——你在名称中见过测试这个词吗？——测试是第一个词。但是测试只是 TDD 的一部分，剩下的就是我们如何用这些测试来驱动开发。这影响了我们的测试方式和整个产品开发。如果我们把注意力集中在 TDD 上，我们就陷入了错误的 TDD。

大多数开发人员专注于测试代码。这对他们来说是很自然的:他们知道什么，代码就是他们做什么。如果你是一个程序员，编写测试代码是很容易的，这是阻力最小的途径。沿着这条路走下去，当他们有一套测试代码的每个类、函数和方法的精彩测试时，开发就结束了。但不是应用程序的。

同样的问题也出现在 QA 工程师身上。这似乎很奇怪，因为 TDD 似乎并不适用于他们，但这是不真实的，因为他们构建测试代码。当他们专注于测试时，测试就失去了价值。

事实证明，当我们沉迷于 TDD 的测试部分时，它就变成了错误的 TDD。

> 这个测试有更多的价值。当我们关注 TDD 的测试时，我们忘记了测试中最有价值的部分。

## 测试值所在的位置

专注于测试并不足以做出好的 TDD。更具体地说，我们必须做驱动开发的测试。这有很多后果。

开发不仅仅是写几行代码，它跨越了整个过程，从某人想象一个新功能的那一刻，直到它上市。

测试不仅仅意味着开发人员，而是项目中的任何人。当想法开始时，可能是在项目的商业部分，它有一个目标。而且，如果它有一个目标，它是可以被测试的，只要想想聪明记忆法的衡量部分。这是我们的起点，也应该是测试的样子:一个测试表明产品完成了业务的目标。

想想看，将开发项目的所有阶段与项目目标完全结合起来是多么美妙的事情。这是 TDD 的真正目的，也是它发挥全部潜力的地方。

> 测试价值在好的 TDD 中增长，因为它使你的目标驱动所有的开发。

## 错误的 TDD 会给我带来什么损失？

在某些情况下，错误的 TDD 看起来一点也不坏。在最好的情况下，它提供了一个小的额外的安全层。在最坏的情况下，看起来我们正在失去时间；我们停止做 TDD。但是我们失去的不止这些。

错误的 TDD 的第一个受害者是敏捷性和开发速度。如果我们在做敏捷，拥有好的测试是必不可少的。每个变更、每个新开发、每个新特性都可能需要一些返工。好的测试是必不可少的，开发人员应该利用它们来创建新的更好的代码。没有它们，代码会恶化，开发速度会降低，大重构的幻影会开始出现。

第二个受害者是理解。使用错误的 TDD，目标对每个人来说都不一样清晰。业务可能有一个想法，开发人员可能理解不同的东西，而 QA 可能理解不同的东西。每个演员独立发挥，误解提高。开发人员必须更多地与业务沟通，或者对产品进行创新，QA 拒绝开发，因为他们与开发人员有不同的标准。有许多重做和返工，产品最终看起来像一个大妥协。

> 使用错误的 TDD，我们到处都在浪费时间，并且项目看起来缺乏领导。

## 好的 TDD 是怎样的？

好的 TDD 专注于目标。不是在应用程序中，不是在代码中，而是在为什么开发它的最终目标中。

开发人员必须忘记测试代码——函数、方法和类——他必须考虑目标。他写的测试应该是产品目标的反映。通过正确的测试，开发人员构建了他需要构建的东西，不多也不少。

> 注意:一段时间以前，我发现了一个简单而快速的论点来反驳那些认为必须测试每个公共接口、函数、方法的人:使用 TDD，代码在测试之前是不存在的，因此，如果没有公共接口、函数或方法，就不可能测试每个公共接口、函数或方法。

QA 工程师不得不认为他是一个开发人员，但是他不是写代码，而是写测试代码。他必须使用 TDD，这意味着他必须在开发人员完成之前开始编写测试。由于这一点，QA 工程师向开发人员提供了所有案例，更重要的是，使业务保持最新。

最后一个演员，商业。他定义目标，知道什么是真正相关的，什么是不相关的。在好的 TDD 中，他是开始编写测试的人。

> 业务是 TDD 中的基本角色。

## 如何将错误的 TDD 转换成好的 TDD？

业务是关键，他必须编写测试。这看起来很奇怪，但看起来很简单。当然，测试不需要用代码编写，但是它们必须足够清晰，以便在特性完成后知道要测试什么。

瀑布思维告诉我们要写大量的文档和规范。我们相信我们必须彻底地解释这些事情，这样其他人才能理解它们，但是尽管我们的常识是这样说的，但这是不切实际的。一旦我们写了一个文档，我们可以和其他人分享，但每个人都有自己的想法和看待世界的方式。我们不能保证项目中的任何人都能从相同的文本中理解相同的内容。事实上，我们可以保证任何可能被误解的东西都会被误解，更糟的是，可能其他东西也会被误解。

好的 TDD 背后的思想是将测试作为文档。但不是作为代码，而是作为事物如何工作的例子。例子是具体的东西，很难被误解，并且在整个过程中分享起来非常简单。企业应该写出那些使用的例子，那些与目标一致的例子，以及那些允许测量项目成功的例子。

一旦我们有了示例，其余的角色就遵循相同的示例。

开发人员不把更多的精力放在测试代码上，而是产品的目标上；因为测试是商业提供的范例。构建代码是因为这些示例需要这些更改才能工作。开发人员现在有一个直接的工作，从开始到结束，一条直线，他可以遵循，直到有结果。

QA 工程师现在确切地知道哪些案例是相关的。他甚至知道开发商知道这一点。两者是一致的，有着相同的目标。正因为如此，QA 工程师可以在开发结束前工作，并参与 TDD。

> 测试的主要价值是交流所有的角色，用例子，没有歧义，并保持每个人都在同一页。良好的 TDD 使其成为可能。

## 摘要

最有效的 TDD 是好的 TDD。好的 TDD 和错误的 TDD 之间的差别很小。很容易从错误的 TDD 开始，并且达到一个点，你认为你已经知道 TDD，甚至相信 TDD 不适合你。

更进一步，获得全局，因为好的 TDD 和错误的 TDD 之间的差异才是重点。

TDD 不仅仅是编码，而是整个产品开发。不要在每一步都浪费时间和资源。使用测试作为工具来沟通项目中的所有角色，并创建示例来保持每个人都在同一页面上。从商业开始。

*感谢阅读。如果你喜欢这篇文章，* [*查看我在媒体上最成功的故事*](https://drpicox.medium.com/my-most-viewed-stories-95b5d96ade0e) *阅读更多。访问本推荐链接* *也可以* [*成为中等会员。*](https://drpicox.medium.com/membership)