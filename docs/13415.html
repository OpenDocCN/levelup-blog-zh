<html>
<head>
<title>Eclipse: Testing, Run Configurations, and JVM Arguments</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Eclipse:测试、运行配置和JVM参数</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/eclipse-testing-run-configurations-and-jvm-arguments-e7e574439612?source=collection_archive---------14-----------------------#2022-09-02">https://levelup.gitconnected.com/eclipse-testing-run-configurations-and-jvm-arguments-e7e574439612?source=collection_archive---------14-----------------------#2022-09-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="d9da" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何将JVM参数传递给一个不存在的运行配置？</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/b8dc52267cafbb06e2df20753076706a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*S2pk6rVVZ6and489"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">马修·施瓦茨在Unsplash<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">上的照片</a></figcaption></figure><p id="2fad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">像Eclipse这样的IDE的一个优点是，在开发应用程序时，运行它是多么容易。Eclipse为此使用了运行配置的概念。运行配置定义了代码的入口点(即项目和主类)，以及运行的许多其他方面，包括要使用的JRE、类路径以及供应用程序使用的各种参数和变量。</p><p id="9db7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您是一个Eclipse用户，您可能已经创建了自己的运行配置。很简单。只需进入<em class="lv">运行</em> <em class="lv"> →运行配置… </em>菜单项。在出现的对话框中，单击左上方的新建图标，并创建您的新配置。</p><p id="692a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，您可以使用右边的大约六个选项卡来配置您的运行时环境。在<em class="lv"> Arguments </em>选项卡中，您可以配置的选项之一是要传递给应用程序的<em class="lv"> VM参数</em>。例如，我的一个web应用程序可以在不同的环境中运行；根据我是在开发、试运行还是生产模式下运行，某些设置会发生变化。因此，当我启动应用程序时，我传递一个<code class="fe lw lx ly lz b">-Dcom.taubler.env=x</code>参数(其中<em class="lv"> x </em>可能等于<em class="lv"> dev </em>、<em class="lv"> stage </em>或<em class="lv"> prod </em>)。当我通过命令行运行我的应用程序时，我只是将参数添加到我的启动脚本中。类似地，当我通过Eclipse运行我的应用程序时，我可以将参数添加到我的运行配置中，在<em class="lv"> Arguments </em>选项卡中。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ma"><img src="../Images/ce03a45ec29f9df6cef934ddb0051554.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KhuNGwcwEtpo9JStEk3J1w.png"/></div></div></figure><p id="23d2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这对于单次运行配置，或者至少少量的稳定运行配置非常有效。但是我在通过Eclipse运行单元测试时发现了一个问题。似乎每当您以特定的方式运行JUnit测试时(例如，右键单击一个测试类并选择<em class="lv">Run As</em><em class="lv">→JUnit Test</em>)，Eclipse都会隐式地为该测试创建一个运行配置。这可能会产生许多您甚至不知道自己已经创建的运行配置。这本身不是问题(除了不断增长的运行配置列表)。然而，如果您的应用程序代码期望传入某个JVM参数，那么在尚未创建运行配置的情况下，如何将该参数传入您的测试运行呢？</p><p id="12da" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我第一次遇到这个问题时，我找到了一个解决方案，但它的可扩展性不是很好。我将运行任何新的单元测试一次，允许Eclipse创建相关的运行配置，并让测试错误出来。然后我会打开运行配置窗口，找到新创建的配置，点击进入<em class="lv">参数</em>选项卡并添加我的<em class="lv"> -D </em>参数。此时，我可以成功地重新运行我的测试。</p><p id="86b4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">事实证明有更好的方法。您可以将Eclipse配置为无论何时启动特定的Java运行时环境，默认情况下总是包含一个或多个JVM参数。为此，打开Eclipse的首选项窗口。展开<em class="lv"> Java </em>部分并选择<em class="lv"> Installed JRE </em> s，然后在主内容窗口中，选择您用来运行项目的JRE，并单击<em class="lv"> Edit… </em>按钮。将出现一个对话框，带有一个标签为<em class="lv">默认虚拟机参数</em>的输入字段。您可以在那里输入JVM参数；比如<code class="fe lw lx ly lz b">-Dcom.taubler.env=stage</code>。关闭窗口，从那时起，您运行的任何单元测试都会自动将该参数传递给JVM。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mb"><img src="../Images/00961b5dc9e8e52fffb6607050ce4e49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yVgY1R9hA9b_5vjHoFDQtg.png"/></div></div></figure><p id="29ee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请注意，您可以传递任何JVM参数，您通常会在命令行上传递这些参数。例如，您可以输入<code class="fe lw lx ly lz b">-Xmx512m</code>来设置所有运行的最大内存分配。</p><p id="7c6b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当然也有一些缺点。首先，作为一种偏好，这个设置不会包含在您的项目中(当然，这也可以看作是一种好处)。其次，这种偏好与特定的JRE相关联，因此如果您使用多个JRE进行测试，您将需要复制所有JRE的参数。尽管如此，这显然是一个可行的、可扩展的解决方案。</p></div></div>    
</body>
</html>