<html>
<head>
<title>A Spacewalk with IPFS and Geeky Farmers</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">与IPFS和古怪的农民进行太空行走</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/a-spacewalk-with-ipfs-and-geeky-farmers-ab6a2ee14906?source=collection_archive---------7-----------------------#2022-01-15">https://levelup.gitconnected.com/a-spacewalk-with-ipfs-and-geeky-farmers-ab6a2ee14906?source=collection_archive---------7-----------------------#2022-01-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="2e5e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为分布式Web设计简单的AgTech应用程序</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/19ff6f6194a190c5dd282a5f431317f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*A3DWwdYas_X2-m_U"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated"><a class="ae lb" href="https://unsplash.com/@karsten_wuerth?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">卡斯登·沃思(➡️@卡斯登.伍尔特)</a>在<a class="ae lb" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="b1c7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">作为一名智能合约开发人员，最有趣的事情之一是意识到在集中式编程环境中，一些琐碎的决策是如何迅速变成头等大事的。例如，我应该在哪里存储我的文件，以便任何相关方可以看到它们并验证它们的完整性？如何确保没有人能够扣留我感兴趣的重要文件？</p><p id="cf93" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于许多应用程序来说，这类问题通常是无意义的。然而，这个问题曾经让我在构建DApps时感到尴尬。在过去，我试图完全避免参考文件的需要，或者只是在分类账上存储一个散列，并在网络参与者之间吐露亲属关系。这两种方法显然都不令人满意，所以我最终决定探索新技术，结束我的沮丧。</p><h2 id="f041" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated">介绍IPFS</h2><p id="b526" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">当我开始涉足IPFS时，我就处于这种状态，我意识到它有很大的潜力。那么什么是IPFS，它能有什么帮助呢？首先，IPFS古怪的全名是行星间文件系统。它是一种开源的对等文件存储技术，旨在取代分布式Web中的HTTP。IPFS本质上是一个由合作的对等节点组成的网络，这些节点共享上传数据的所有权，因此任何文件都可以被分发到任何节点，并且以后可以方便地被全世界访问，不管原始作者发生了什么。在IPFS上，文件CID扮演着核心角色，这是一个唯一的标识符，允许识别和查询任何内容，顺便提一下，它是由文件的散列组成的，因此它也用作完整性检查。</p><p id="10aa" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先，我浏览了快速入门教程，通过docker镜像运行了一个IPFS节点，并开始使用它的HTTPS API查询它。现在，每个节点都附带了一个有用的教程目录，通过向<em class="ma"> /api/v0/lis </em> t端点提交POST请求(请注意:您必须将查询参数<em class="ma"> arg </em>设置为所需的CID ),可以像浏览常规UNIX目录一样浏览该目录。对于快速入门目录，它将是<code class="fe mb mc md me b">QmYwAPJzv5CZsnA625s3Xf2nemtYgPpHdWEz79ojWnPbdG</code>。操作的结果如下:</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="mf mg l"/></div></figure><p id="6aba" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">每个链接代表存储在IPFS上的某些内容的唯一标识符。type属性表示值为<em class="ma"> 1 </em>的目录，并将<em class="ma"> 2 </em>用于文件。因此，如果我们试图列出一个文件，我们不会像预期的那样找到任何内部链接:</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="mf mg l"/></div></figure><h2 id="340a" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated">(分散的)机器的兴起</h2><p id="0c03" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">一旦对自己的成就感到满意，我决定是时候通过开始一个简单的项目来提升我的学习曲线了。</p><p id="e4d7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然而，找到一个合适的IPFS创意对我来说是一个巨大的第一世界问题。我目前专注于用SpringBoot在Kotlin中编写微服务，这种集中式模式在Web3和胖JS客户端中受到了不好的评价。如今，人们可以使用功能极其丰富和强大的设备，将智能手机上可以做的事情委托给模糊的第三方服务器是不合理的。然而，这并不适用于可以在<em class="ma"> DWeb </em>中运行的所有代理:由浏览器或移动应用程序提供给我们人类的UI对冰冷的机器来说并不真正有用。</p><p id="cd37" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对你们中的一些人来说，这可能听起来很奇怪，但我曾经读过的一句话让我记忆犹新:</p><p id="04ce" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">“最好的UX就是完全没有UI</strong>”</p><p id="57c1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">仔细想想，这是完全有道理的。如今，很多业务流程和操作都实现了自动化，自动化的根本目的是在没有真人干预的情况下创造价值。任何一个经理都可以证实，最好的员工是自我管理的员工。同样，一个正确自动化的过程不需要人工干预，排除关键决策点和错误出现的时候(我们都希望很少)。</p><p id="2b15" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">那会是什么样的应用？</p><h2 id="5b18" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated">土壤、作物和传感器</h2><p id="f254" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">假设我们的用户是某个地区的农民，他们收集精确的天气数据、耗水量或肥料生产率的信息。数据可以上传到IPFS，相关参与者可以得到活动通知并浏览报告，而无需依赖任何特定的第三方。最重要的是，IPFS提供了天生的重复数据删除功能，这对典型的传感器数据非常有帮助(更详细的解释可以在这篇<a class="ae lb" href="http://blog.klaehn.org/2018/06/10/efficient-telemetry-storage-on-ipfs/" rel="noopener ugc nofollow" target="_blank">文章</a>中找到)，并在挣扎中的网络和农民可用的最少传感器软件上蓬勃发展。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mh"><img src="../Images/1410bb5fd99fc0a0ecae1f0931abddeb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1lypv7NXD7XO3jKYcQ2PEA.jpeg"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">IPFS应用程序的基本解决方案概述</figcaption></figure><p id="9fd1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这甚至变得更好，因为任何人现在都可以提供新的顶层服务:例如，农民可以集体向以太坊上的提供商支付费用，以运行天气数据预报、预测水资源短缺和计划活动。</p><p id="1de9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后，提供商的应用程序需要下载原始传感器数据，理解这些数据，并与IPFS分享合理的预测，这样农民就可以根据新获得的知识采取行动。</p><h2 id="3fce" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated">起草一个快速解决方案</h2><p id="e79b" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">让我们为我们的用户起草一份必要的MVP特性的简短列表:</p><ol class=""><li id="a3fc" class="mi mj iq jp b jq jr ju jv jy mk kc ml kg mm kk mn mo mp mq bi translated">上传IPFS的传感器数据</li><li id="7531" class="mi mj iq jp b jq mr ju ms jy mt kc mu kg mv kk mn mo mp mq bi translated">要求提供商在特定时间间隔内开始分析数据</li><li id="cbe9" class="mi mj iq jp b jq mr ju ms jy mt kc mu kg mv kk mn mo mp mq bi translated">私下上传一些数据与某些用户分享</li></ol><p id="ee5b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用IPFS API可以轻松实现第一点。然而，我最初尝试将所有用户数据放在一个目录中，存储CID，然后列出并下载其中的文件。通过使用/ls和/cat API，这看起来是可行的。天真的我本能的觉得“<em class="ma">太棒了！用户可以随心所欲地创建任意多的目录，添加文件，删除文件，所有这些都由IPFS本地软件完成！我会立刻完成我的原型！</em>”。</p><p id="243f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然而，以这种方式在IPFS航行是一种误导。它不能像类UNIX文件系统那样工作，因为它是不可变的。从文档中可以看出，每个文件的散列都是从其自身的内容中计算出来的，同样，每个目录的散列也是以自下而上的方式从其条目散列中计算出来的。假设我们需要向IPFS添加一个目录，其结构如下:</p><pre class="km kn ko kp gt mw me mx my aw mz bi"><span id="55d8" class="lc ld iq me b gy na nb l nc nd">foo/<br/>├── bar<br/>│  └── baz<br/>└── baz</span></pre><p id="0874" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后我们可以通过运行<code class="fe mb mc md me b">$ ipfs add -r foo</code>将它提交给IPFS:</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="mf mg l"/></div></figure><p id="48e0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您是否注意到条目是从最里面的元素开始记录的？这不是巧合，这是IPFS用来创建这些条目的必要顺序。</p><p id="3ded" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这种机制的逻辑结论是不可能更改目录条目，因为这将使以前的CID计算无效并生成新的散列。本质上，我们会有一个全新的目录。当IPFS试图防止文件篡改时，这种固有的版本控制系统是一个很好的副作用。尽管如此，它在理解您的文件并根据特定领域的分组来组织它们时会产生一些问题。没问题，这只是意味着我们的高科技农民将依靠一种不同的机制。我想到了两个选择:</p><ul class=""><li id="14e5" class="mi mj iq jp b jq jr ju jv jy mk kc ml kg mm kk ne mo mp mq bi translated">使用IPNS:一个基于IPFS的域名解析系统。它可以为某个键创建一个IPFS目录的命名引用，然后编辑它的内容</li><li id="621b" class="mi mj iq jp b jq mr ju ms jy mt kc mu kg mv kk ne mo mp mq bi translated">只是创建一个内容的索引，并将其存储在数据库中</li></ul><p id="6a37" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我觉得第一种方法对我来说是不必要的，而且有点麻烦，特别是当用户随着时间的推移会产生大量不间断的原始数据流时。理论上，可以将索引存储在某种分布式数据库甚至区块链中，但是由于索引主要是一个供私人使用的实用工具，所以我选择将其存储在一些不错的老式本地存储技术上。</p><p id="ff03" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">其次，应该以某种方式通知提供者有关分析任务的信息，并接收要分析的文件的索引列表。匹配农民和数据专家不应该是一项特别困难的任务，并且可以在分散的或传统的平台上发生:所以我只是假设，在被选择之后，服务提供商通过REST API接收包含时间序列数据的CID块列表。</p><p id="12bb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，所执行的数据分析可能具有一定的价值，并且是有偿的，因此考虑周到的做法是将其视为保留事项:提供者只需使用上一步中收到的农民公钥对洞察进行加密，然后将其上传回IPFS。因此，通过在IPFS中添加一个简单的安全层，就有可能在保护可访问性的同时保护数据隐私。</p><h2 id="826c" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated">虽然不多，但这是诚实的工作</h2><p id="8e75" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">通过找出一个可能的用例来更多地了解IPFS很有趣，但我花了相当多的时间来设计一个远程有用的应用程序:想象分布式Web的解决方案仍然是一个未知的领域，至少对我来说是这样，但我相信这是一条非常有益的道路。</p><p id="f3c2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你也对Web3和AgTech感兴趣，请分享你的想法，我很想学习更多关于这些主题的知识！</p></div><div class="ab cl nf ng hu nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="ij ik il im in"><p id="c55b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae lb" href="https://blog.lorisocchipinti.com" rel="noopener ugc nofollow" target="_blank">加入我的时事通讯，了解更多类似的故事</a></p><h2 id="59e6" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated">来源</h2><ul class=""><li id="189a" class="mi mj iq jp b jq lv ju lw jy nm kc nn kg no kk ne mo mp mq bi translated">仓库:【https://github.com/Ipanov7/spacebox T2】</li><li id="bc5b" class="mi mj iq jp b jq mr ju ms jy mt kc mu kg mv kk ne mo mp mq bi translated">星际遥测压缩:<a class="ae lb" href="http://blog.klaehn.org/2018/06/10/efficient-telemetry-storage-on-ipfs/" rel="noopener ugc nofollow" target="_blank">http://blog . klaehn . org/2018/06/10/efficient-telemetry-storage-on-ipfs/</a></li><li id="b0c2" class="mi mj iq jp b jq mr ju ms jy mt kc mu kg mv kk ne mo mp mq bi translated">智能农业传感器:<a class="ae lb" href="https://www.mouser.it/applications/smart-agriculture-sensors/" rel="noopener ugc nofollow" target="_blank">https://www . mouser . it/applications/smart-agriculture-sensors/</a></li></ul></div></div>    
</body>
</html>