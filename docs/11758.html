<html>
<head>
<title>ForkJoin</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">叉连接</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/forkjoin-10e2ddf3e6ca?source=collection_archive---------2-----------------------#2022-04-14">https://levelup.gitconnected.com/forkjoin-10e2ddf3e6ca?source=collection_archive---------2-----------------------#2022-04-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="36af" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">forkJoin是最有用的RxJS操作符之一。让我们理解它。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/efc0eace6a5f321261ccff5443da9017.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FAgxBQJiRw4jngzgqVC0-A.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">forkJoin rxjs运算符</figcaption></figure><p id="237e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在有角度的表单中，我们需要填充下拉框/选择框。这些下拉列表包含通常不可变的主数据。假设我们有报告配置表单，它有两个下拉菜单，分别用于报告类型和报告格式，如下所示。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi lr"><img src="../Images/ea2777cbe23d2c83b5a60f2abf873c9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1274/format:webp/1*eG6C1CoQQmd4__bdg4I1pQ.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">ForkJoin运算符</figcaption></figure><p id="da5c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在，我们在组件中创建了一个表单，并为Dropdown1、Dropdown2和之前保存的配置调用了三个API。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="ddd8" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">显然，我们使用form并维护三个变量来显示html中的loader。一旦我们在各自的API中得到响应，我们就将这些变量设置为true。</p><pre class="kg kh ki kj gt lu lv lw lx aw ly bi"><span id="5433" class="lz ma iq lv b gy mb mc l md me"><em class="mf">isReportsAvailable=false;<br/></em>isReportFormatAvailable=false;<br/>isReportDataAvailable=false;</span></pre><p id="1e30" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在Html中，我们使用如下的加载器和表单。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="986d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在这里，我们在ng-container上使用if条件来显示从所有API获得响应后的加载器。</p><pre class="kg kh ki kj gt lu lv lw lx aw ly bi"><span id="9d76" class="lz ma iq lv b gy mb mc l md me">*ngIf=”isReportsAvailable &amp;&amp; isReportFormatAvailable &amp;&amp; isReportDataAvailable else loading”</span></pre><p id="78fa" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">它工作得很好，但是这个代码的问题是我们用变量来维护状态。想象一下有许多API，我们的代码库会因为不必要的变量而膨胀。发生这种情况是因为我们正在等待所有的API完成，并在它之后做一些操作。</p><p id="3710" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">ForkJoin运算符正是在这种情况下使用的。</p><h2 id="4ab5" class="lz ma iq bd mg mh mi dn mj mk ml dp mm le mn mo mp li mq mr ms lm mt mu mv mw bi translated">当我们想要并行调用我们的API，并且想要在接收到所有响应后进行操作时，我们使用forkJoin。</h2><p id="ba40" class="pw-post-body-paragraph kv kw iq kx b ky mx jr la lb my ju ld le mz lg lh li na lk ll lm nb lo lp lq ij bi translated">让我们重构代码。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="f16c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">显然，ForkJoin在一个数组中获取可观察值，在map操作符中，我们在所有可观察值完成后接收响应，我们还可以轻松地进行操作，如设置变量或维护状态。在Html中，我们只使用了一个变量，如下所示。</p><pre class="kg kh ki kj gt lu lv lw lx aw ly bi"><span id="0eaf" class="lz ma iq lv b gy mb mc l md me">&lt;ng-container *ngIf=”isAllDataAvailable else loading” [formGroup]=”form”&gt;</span></pre><p id="bc41" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我希望你学到了有用的东西。</p></div><div class="ab cl nc nd hu ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="ij ik il im in"><p id="5c28" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我在Udemy上创建了一个Angular课程，涵盖了Angular中的许多实际问题和解决方案，包括这个。这可能是你职业生涯的垫脚石。 <a class="ae nj" href="https://www.udemy.com/course/angular-practicals/?couponCode=F48E50E6ECF6D99AD500" rel="noopener ugc nofollow" target="_blank"> <strong class="kx ir"> <em class="mf">请看一看。</em> </strong> </a></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nk"><img src="../Images/2b539648c9e52f6017ff625f8686ca95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*zJn16C-dCeRj9UHE.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">角实践</figcaption></figure><p id="4b7d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">也可以观看/订阅我的免费<a class="ae nj" href="https://www.youtube.com/channel/UC30-Z9Lz8DWe_Vq93dOs-Gw" rel="noopener ugc nofollow" target="_blank"> <strong class="kx ir"> YouTube频道</strong> </a> <strong class="kx ir">。</strong></p></div><div class="ab cl nc nd hu ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="ij ik il im in"><p id="578b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">请订阅/关注/喜欢/鼓掌。</p></div></div>    
</body>
</html>