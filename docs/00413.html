<html>
<head>
<title>Ionic Currency Converter</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">离子货币转换器</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/ionic-currency-converter-8f33d3d76d2d?source=collection_archive---------3-----------------------#2019-02-12">https://levelup.gitconnected.com/ionic-currency-converter-8f33d3d76d2d?source=collection_archive---------3-----------------------#2019-02-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="ab60" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">让我们通过创建一个简单的实际应用程序来学习ionic。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/bfa505b7e1ae6c6bf8efec958f7bc8fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dKKXkrZz1CJ6I7RAXvtvCA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">学分:Pexels</figcaption></figure><p id="6e29" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">最近一直在用Angular开发web应用。因为我决定不仅扩展我在web开发方面的知识，还扩展我在移动应用程序开发方面的知识，所以我决定用Ionic框架构建一个应用程序。</p><p id="812c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我想用Ionic的原因是它完全是关于JavaScript的(我喜欢JavaScript)。此外，爱奥尼亚也遵循与角形相同的概念。</p><ul class=""><li id="7dfe" class="lr ls iq kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated">和Angular一样，它有自己的UI组件结构。</li><li id="b57a" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">它使用TypeScript，这是JavaScript的超集。</li><li id="eba4" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">它包含有棱角的特征。</li></ul><p id="5e93" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在我们跳到正题。你不能通过阅读或跟随教程来学习任何东西。为了学习任何编程语言或框架，您应该在现实世界中进行尝试。这就是我学习任何编程语言的基础。说了这么多，我将带你看一个我用Ionic框架写的应用程序。</p><p id="83f0" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">让我们建立一个简单的货币转换器。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mf mg l"/></div></figure><h1 id="482e" class="mh mi iq bd mj mk ml mm mn mo mp mq mr jw ms jx mt jz mu ka mv kc mw kd mx my bi translated">假设</h1><p id="98c7" class="pw-post-body-paragraph kv kw iq kx b ky mz jr la lb na ju ld le nb lg lh li nc lk ll lm nd lo lp lq ij bi translated">本文假设您事先了解</p><ul class=""><li id="d8c4" class="lr ls iq kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated">棱角分明的框架。</li><li id="c987" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">打字稿。</li></ul><p id="713f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">假设您对这些技术有一些基本的了解，我不会涵盖所有的基础知识。</p><h1 id="135c" class="mh mi iq bd mj mk ml mm mn mo mp mq mr jw ms jx mt jz mu ka mv kc mw kd mx my bi translated">入门指南</h1><p id="8fa4" class="pw-post-body-paragraph kv kw iq kx b ky mz jr la lb na ju ld le nb lg lh li nc lk ll lm nd lo lp lq ij bi translated">首先，让我们创建一个空白的ionic应用程序。在命令行中:</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="0875" class="nj mi iq nf b gy nk nl l nm nn">npm install -g cordova ionic</span></pre><p id="1fa9" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">该命令将安装Ionic CLI，它是Ionic的命令行工具。这样，您就可以创建一个ionic应用程序，在您的工作区文件夹中包含所有必需的文件。创建一个您想要维护工作空间的文件夹，从这个位置打开命令行并执行(<em class="no">我将为应用程序的未来增强创建标签</em>):</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="d6bc" class="nj mi iq nf b gy nk nl l nm nn">ionic start &lt;name of the application&gt; tabs</span></pre><h1 id="f305" class="mh mi iq bd mj mk ml mm mn mo mp mq mr jw ms jx mt jz mu ka mv kc mw kd mx my bi translated">创建布局</h1><p id="d1c4" class="pw-post-body-paragraph kv kw iq kx b ky mz jr la lb na ju ld le nb lg lh li nc lk ll lm nd lo lp lq ij bi translated">让我们先做一个布局，这样我们就可以开始编写功能和服务来从一个免费的API中获取值，该API可以立即提供货币汇率。导航到项目工作区中的以下位置，并将代码复制到文件中。</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="bdc9" class="nj mi iq nf b gy nk nl l nm nn"><em class="no">src/pages/home/home.html</em></span></pre><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="np mg l"/></div></figure><p id="7000" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">那我们就给它加点风格吧！转到:</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="f405" class="nj mi iq nf b gy nk nl l nm nn"><em class="no">src/pages/home/home.scss</em></span></pre><p id="4884" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">并将下面的代码复制到您的文件中。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="np mg l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/ed3b04ab9933e658796bbb69385b5da5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1066/format:webp/1*VeHkWPjZddVGZa7Nv65ErA.png"/></div></figure><p id="c35a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">为了给标签栏添加图标，让我们在src文件夹的index.html中添加以下标签(<em class="no"> 'src/index.html ' </em>)</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="29e8" class="nj mi iq nf b gy nk nl l nm nn">&lt;link rel=”stylesheet” href=”https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity=”sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/” crossorigin=”anonymous”&gt;</span></pre><p id="9234" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">然后添加</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="da18" class="nj mi iq nf b gy nk nl l nm nn">&lt;ion-tabs&gt;<br/>&lt;ion-tab [root]=”tab1Root” tabIcon=”logo-usd”&gt;&lt;/ion-tab&gt;<br/>&lt;ion-tab [root]=”tab2Root” tabIcon=”logo-bitcoin”&gt;&lt;/ion-tab&gt;<br/>&lt;/ion-tabs&gt;</span></pre><p id="9ed5" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在位于<em class="no">' src/pages/tabs/tabs . html '</em>内的<em class="no">tabs.html</em>中，然后让我们删除一个额外的选项卡。</p><h1 id="951b" class="mh mi iq bd mj mk ml mm mn mo mp mq mr jw ms jx mt jz mu ka mv kc mw kd mx my bi translated">正在创建服务类别</h1><p id="b2e4" class="pw-post-body-paragraph kv kw iq kx b ky mz jr la lb na ju ld le nb lg lh li nc lk ll lm nd lo lp lq ij bi translated">创建骨架后，让我们开始真正的工作。我们需要一种获取汇率的方法。不用担心，有一些API在一定的限制下免费提供给你。这是我在这个项目中使用的一个。</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="acf0" class="nj mi iq nf b gy nk nl l nm nn"><a class="ae nr" href="https://free.currencyconverterapi.com" rel="noopener ugc nofollow" target="_blank">https://free.currencyconverterapi.com</a></span></pre><p id="ce0b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果您访问这个URL，您可能会找到关于获取JSON格式的各种数据的说明。所以我们如何获取这些值才是真正的问题。您可以直接在<em class="no"> home.ts </em>文件中编写代码，但这根本不是一个好的做法。我们有一个解决方案，那就是服务。</p><p id="1cd8" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">服务是一个很好的实践，因为它极大地降低了代码的可重用性，并使代码更加通用，可以从任何地方访问。现在让我们创建一个服务类。在您的<em class="no"> pages </em>文件夹中，创建一个名为<em class="no"> services </em>的文件夹，并使用您喜欢的任何名称创建一个typescript文件。在这个项目中，我将其命名为<em class="no"> cu-service.ts. </em></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="np mg l"/></div></figure><p id="8621" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">服务类应该总是可导出和可注入的。现在你可能想知道<code class="fe ns nt nu nf b">@Injectable</code>到底是什么？它只不过是Angular中常用的依赖注入。<code class="fe ns nt nu nf b">@Injectable</code>的工作是将它标识为一个服务类，这个特定的CurrencyService类将在导入该类的任何地方可用。</p><p id="a607" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">摘要:通过使类<em class="no">可注入</em>，我们可以在代码中的任何地方使用服务类。如果我们看一下类内部，我们实现了两个新的函数，叫做<code class="fe ns nt nu nf b">getCountries()</code>和<code class="fe ns nt nu nf b">getExchangeRate()</code> <strong class="kx ir"> <em class="no">。</em> </strong>在这两个函数中，我们从那些特定的API中返回JSON数据，我们还将使用<code class="fe ns nt nu nf b">toPromise()</code> <em class="no"> </em>方法将它们作为承诺返回。默认情况下，<code class="fe ns nt nu nf b">HttpClient</code> <strong class="kx ir"> </strong>从HTTP方法调用中返回observables，但是将它们作为<strong class="kx ir">承诺</strong>返回的原因是这些承诺可以利用async/await功能。这有助于我们用javascript编写异步代码。</p><ul class=""><li id="69b9" class="lr ls iq kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated"><code class="fe ns nt nu nf b">getCountries()</code> : <em class="no">返回带有货币代码的国家列表。</em></li><li id="dba9" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated"><code class="fe ns nt nu nf b">getExchangeRate()</code> : <em class="no">返回两个特定国家的货币汇率。</em></li></ul><p id="b30e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">创建完服务类后，确保将它包含在app文件夹<em class="no">的<strong class="kx ir"><em class="no">app . module . ts</em></strong>文件中的<strong class="kx ir"> providers </strong>中。</em></p><p id="aa9b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">使用我们返回到服务类的承诺，我们可以获取必要的数据。为了和平地获取它们，让我们使用async/await。</p><h1 id="73b6" class="mh mi iq bd mj mk ml mm mn mo mp mq mr jw ms jx mt jz mu ka mv kc mw kd mx my bi translated">履行</h1><h2 id="085f" class="nj mi iq bd mj nv nw dn mn nx ny dp mr le nz oa mt li ob oc mv lm od oe mx of bi translated">异步/等待</h2><p id="65e4" class="pw-post-body-paragraph kv kw iq kx b ky mz jr la lb na ju ld le nb lg lh li nc lk ll lm nd lo lp lq ij bi translated">使用异步函数，您可以使用try/catch块平稳地处理来自承诺的未处理错误。Async关键字可以写在函数之前，async确保函数返回一个承诺，并且函数在事件循环中异步执行。在函数中使用await关键字，我们可以让javascript等待，直到函数返回的承诺得到解决。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="np mg l"/></div></figure><p id="d238" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">让我解释一下home.ts文件中的代码。</p><p id="5393" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><code class="fe ns nt nu nf b">fetchCountries()</code> : <strong class="kx ir"> </strong>这个函数<strong class="kx ir"> </strong>从服务中获取国家列表，它将一直等到承诺得到解决，因为我们在其中使用了<em class="no"> await </em>关键字。使用for循环，我将从JSON对象中返回的每一个值都压入，并且将货币名称压入映射。通过使用映射，我们可以拥有键值对。稍后，我们可以使用货币代码获得货币名称，货币代码是地图中的关键。</p><p id="7468" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><code class="fe ns nt nu nf b">getCurrencyRate()</code>:使用这个特殊的函数，我们可以获取两种特定货币的汇率。</p><p id="a856" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在应用程序启动时，为了获取货币汇率和货币代码列表，我们应该在<code class="fe ns nt nu nf b">ngOnInit()</code>函数中调用上述两个函数。</p><p id="9c45" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们现在几乎完成了！我们剩下要做的就是计算最终结果，即货币价值。为此，我们必须在<em class="no"> home.ts </em>文件中再添加两个函数。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="np mg l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">要添加到home.ts文件中的两个函数</figcaption></figure><p id="f11f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">通过调用这两个函数，我们可以立即以两种方式计算结果值。好吧，我们该怎么做？这就是我们接下来要看到的。</p><h2 id="c53a" class="nj mi iq bd mj nv nw dn mn nx ny dp mr le nz oa mt li ob oc mv lm od oe mx of bi translated">数据绑定和事件绑定</h2><p id="624e" class="pw-post-body-paragraph kv kw iq kx b ky mz jr la lb na ju ld le nb lg lh li nc lk ll lm nd lo lp lq ij bi translated">数据绑定在web应用程序中非常流行，因为它显示动态数据，这意味着它改变由用户或应用程序触发的值。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mf mg l"/></div></figure><p id="ce9a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们将使用数据绑定和事件绑定来实现一个货币转换器，如上面的gif所示。在HTML布局中，使用ngModel绑定我们在home.ts文件中创建的变量。通过这样做，用户在数字字段中输入的任何值都可以被动态使用。同样，为了在用户在输入字段中输入值时触发事件，我们可以使用事件绑定。在这种情况下，<a class="ae nr" href="https://developer.mozilla.org/en-US/docs/Web/Events/keyup" rel="noopener ugc nofollow" target="_blank"><em class="no">keyup</em></a><em class="no"/>事件会帮助我们。所以让我们用括号把它括起来，并调用必要的函数。你可以查看下面的代码来获得帮助。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="np mg l"/></div></figure><p id="a44f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">此外，我还附上了一张卡片，展示货币汇率和货币名称。现在要在浏览器中运行这个应用程序，请在您的终端中运行下面的命令。</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="144c" class="nj mi iq nf b gy nk nl l nm nn">ionic serve</span></pre><p id="a774" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这将构建应用程序并在您的默认浏览器中运行。你可以在iOS、Android、Windows等所有三个平台上查看这个应用的样子。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi og"><img src="../Images/db8f23f7445243ad6e90e167b13308e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z27aeeP-Zsx8_G45YpTinw.png"/></div></div></figure><h1 id="7d3f" class="mh mi iq bd mj mk ml mm mn mo mp mq mr jw ms jx mt jz mu ka mv kc mw kd mx my bi translated">结论</h1><p id="f965" class="pw-post-body-paragraph kv kw iq kx b ky mz jr la lb na ju ld le nb lg lh li nc lk ll lm nd lo lp lq ij bi translated">在这篇文章中，我们试图使这个教程尽可能简单。希望你能从这篇博文中学到一些东西。如果你在评论区遇到任何问题或错误，请随时告诉我。</p><blockquote class="oh oi oj"><p id="157f" class="kv kw no kx b ky kz jr la lb lc ju ld ok lf lg lh ol lj lk ll om ln lo lp lq ij bi translated">你可以在我的Github句柄中找到这个项目的源代码。</p></blockquote></div></div>    
</body>
</html>