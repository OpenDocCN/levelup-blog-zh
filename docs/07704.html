<html>
<head>
<title>Show Me the Money: How to Query TRON Account Balances</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">给我钱看:如何查询TRON账户余额</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/show-me-the-money-how-to-query-tron-account-balances-4d62ff54c67b?source=collection_archive---------15-----------------------#2021-03-06">https://levelup.gitconnected.com/show-me-the-money-how-to-query-tron-account-balances-4d62ff54c67b?source=collection_archive---------15-----------------------#2021-03-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="a2c1" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">就用R包tronr</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/3a4c61eef3e667059d52bb862d03cec6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*TbRD-RtIiAU95ZZs"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">迈克尔·朗米尔在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="7577" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi lv translated">账户余额是可以从区块链中收集到的最有趣和最重要的数据类型之一。这种类型的数据支持各种分析应用，例如了解资金如何在网络上分配、感兴趣的账户持有哪些资产、余额的动态性如何等。</p><p id="4349" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这篇文章展示了我最近发布的R包<code class="fe me mf mg mh b"><a class="ae ky" href="https://github.com/next-game-solutions/tronr" rel="noopener ugc nofollow" target="_blank">tronr</a></code>如何用于查询<a class="ae ky" href="https://tron.network/" rel="noopener ugc nofollow" target="_blank"> TRON区块链</a>上的账户余额(术语<em class="mi">账户</em>在这里指的是类似钱包的账户和智能合约)。查看这篇关于什么是<code class="fe me mf mg mh b">tronr</code>以及如何安装它的早期介绍文章:</p><div class="mj mk gp gr ml mm"><a rel="noopener  ugc nofollow" target="_blank" href="/introducing-tronr-an-r-package-to-explore-the-tron-blockchain-f0413f38b753"><div class="mn ab fo"><div class="mo ab mp cl cj mq"><h2 class="bd iu gy z fp mr fr fs ms fu fw is bi translated">介绍tronr，一个探索TRON区块链的R包</h2><div class="mt l"><h3 class="bd b gy z fp mr fr fs ms fu fw dk translated">查询账户余额、交易、代币转账等等。</h3></div><div class="mu l"><p class="bd b dl z fp mr fr fs ms fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="mv l"><div class="mw l mx my mz mv na ks mm"/></div></div></a></div><h1 id="4903" class="nb nc it bd nd ne nf ng nh ni nj nk nl jz nm ka nn kc no kd np kf nq kg nr ns bi translated">查询Tronix (TRX)余额</h1><p id="ca87" class="pw-post-body-paragraph kz la it lb b lc nt ju le lf nu jx lh li nv lk ll lm nw lo lp lq nx ls lt lu im bi translated">特隆尼克(TRX，又名特隆)是特隆区块链的本地货币。账户当前持有的TRX金额可以通过<code class="fe me mf mg mh b"><a class="ae ky" href="https://next-game-solutions.github.io/tronr/reference/get_account_trx_balance.html" rel="noopener ugc nofollow" target="_blank">get_account_trx_balance()</a></code>功能找回。该函数的主要参数是<code class="fe me mf mg mh b">address</code>，它(类似于所有将<code class="fe me mf mg mh b">address</code>作为其输入之一的<code class="fe me mf mg mh b">tronr</code>函数)接受<a class="ae ky" href="https://developers.tron.network/docs/account#address-format" rel="noopener ugc nofollow" target="_blank">地址</a>，格式为<a class="ae ky" href="https://bitcoin.stackexchange.com/questions/75527/eli5-what-is-base58check-encoding" rel="noopener ugc nofollow" target="_blank"> base58check </a>(以<code class="fe me mf mg mh b">T</code>开始)或十六进制格式(以<code class="fe me mf mg mh b">41</code>开始):</p><pre class="kj kk kl km gt ny mh nz oa aw ob bi"><span id="a867" class="oc nc it mh b gy od oe l of og">library(dplyr)<br/>library(tidyr)<br/>library(tronr)</span><span id="be20" class="oc nc it mh b gy oh oe l of og"># Using a human-readable base58check-formatted address:<br/>bal &lt;- <a class="ae ky" href="https://next-game-solutions.github.io/tronr/reference/get_account_trx_balance.html" rel="noopener ugc nofollow" target="_blank">get_account_trx_balance</a>(<br/>    address = "TQjaZ9FD473QBTdUzMLmSyoGB6Yz1CGpux"<br/>)</span><span id="969a" class="oc nc it mh b gy oh oe l of og">bal<br/>#&gt; # A tibble: 1 x 3<br/>#&gt;  request_time        address                        trx_balance<br/>#&gt;  &lt;dttm&gt;              &lt;chr&gt;                                &lt;dbl&gt;<br/>#&gt; 1 2021-03-06 21:58:02 TQjaZ9FD473QBTdUzMLmSyoGB6Yz1~    4888953.</span><span id="244e" class="oc nc it mh b gy oh oe l of og"><br/># Using the same address as above, but first converting it<br/># to hex format:<br/>hex_address &lt;- <a class="ae ky" href="https://next-game-solutions.github.io/tronr/reference/convert_address.html" rel="noopener ugc nofollow" target="_blank">convert_address</a>("TQjaZ9FD473QBTdUzMLmSyoGB6Yz1CGpux")</span><span id="63b8" class="oc nc it mh b gy oh oe l of og">hex_address<br/>#&gt; [1] "41a1f60e12be07004934ead89620f1ba0bebbe128e"</span><span id="6fdc" class="oc nc it mh b gy oh oe l of og">bal2 &lt;- <a class="ae ky" href="https://next-game-solutions.github.io/tronr/reference/get_account_trx_balance.html" rel="noopener ugc nofollow" target="_blank">get_account_trx_balance</a>(address = hex_address)</span><span id="b003" class="oc nc it mh b gy oh oe l of og">bal2<br/>#&gt; # A tibble: 1 x 3<br/>#&gt;  request_time        address                        trx_balance<br/>#&gt;  &lt;dttm&gt;              &lt;chr&gt;                                &lt;dbl&gt;<br/>#&gt; 1 2021-03-06 21:59:23 TQjaZ9FD473QBTdUzMLmSyoGB6Yz1~    4888953.</span></pre><p id="7281" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用<code class="fe me mf mg mh b"><a class="ae ky" href="https://next-game-solutions.github.io/tronr/reference/get_current_trx_price.html" rel="noopener ugc nofollow" target="_blank">get_current_trx_price()</a></code>函数可以将获得的TRX余额转换成法定货币，比如美元(在底层，该函数调用<a class="ae ky" href="https://www.coingecko.com/api/documentations/v3" rel="noopener ugc nofollow" target="_blank">coingeko API</a>来查询相应货币的当前TRX价格):</p><pre class="kj kk kl km gt ny mh nz oa aw ob bi"><span id="2c1f" class="oc nc it mh b gy od oe l of og">price &lt;- <a class="ae ky" href="https://next-game-solutions.github.io/tronr/reference/get_current_trx_price.html" rel="noopener ugc nofollow" target="_blank">get_current_trx_price</a>(vs_currencies = <a class="ae ky" href="https://rdrr.io/r/base/c.html" rel="noopener ugc nofollow" target="_blank">c</a>("usd"))<br/>bal$trx_balance * price$trx_price<br/>#&gt; [1] 244579.7</span></pre><div class="mj mk gp gr ml mm"><a rel="noopener  ugc nofollow" target="_blank" href="/an-easy-way-to-collect-market-data-for-tronix-trx-41e6e7c52555"><div class="mn ab fo"><div class="mo ab mp cl cj mq"><h2 class="bd iu gy z fp mr fr fs ms fu fw is bi translated">为Tronix (TRX)收集市场数据的简单方法</h2><div class="mt l"><h3 class="bd b gy z fp mr fr fs ms fu fw dk translated">就用R包tronr</h3></div><div class="mu l"><p class="bd b dl z fp mr fr fs ms fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="mv l"><div class="oi l mx my mz mv na ks mm"/></div></div></a></div><p id="fadc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">除了特定账户的TRX余额，还可以获得主要TRX持有者的列表(截至查询时):</p><pre class="kj kk kl km gt ny mh nz oa aw ob bi"><span id="5aa6" class="oc nc it mh b gy od oe l of og"># Getting a list of top-20 TRX holders:<br/><a class="ae ky" href="https://next-game-solutions.github.io/tronr/reference/list_top_trx_holders.html" rel="noopener ugc nofollow" target="_blank">list_top_trx_holders</a>(n = 20)</span><span id="e513" class="oc nc it mh b gy oh oe l of og">#&gt; # A tibble: 20 x 5                                            <br/>#&gt;    request_time        address   trx_balance total_tx tron_power<br/>#&gt;    &lt;dttm&gt;              &lt;chr&gt;           &lt;dbl&gt;    &lt;int&gt;      &lt;dbl&gt;<br/>#&gt;  1 2021-03-06 21:39:38 TNUC9Qb1~     1.47e10  1326915          0<br/>#&gt;  2 2021-03-06 21:39:38 TQcia2H2~     2.91e 9   269599          0<br/>#&gt;  3 2021-03-06 21:39:38 TA9FnQrL~     2.38e 9    57671   23000000<br/>#&gt;  4 2021-03-06 21:39:38 TNaRAoLU~     1.92e 9 12920348          0<br/>#&gt;  5 2021-03-06 21:39:38 TE2RzoSV~     1.78e 9   126235          0<br/>#&gt;  6 2021-03-06 21:39:38 TQn9Y2kh~     1.31e 9  3165150          0<br/>#&gt;  7 2021-03-06 21:39:38 TTd9qHyj~     1.26e 9    83813          0<br/>#&gt;  8 2021-03-06 21:39:38 TWd4WrZ9~     1.20e 9      598 3239581502<br/>#&gt;  9 2021-03-06 21:39:38 TKAtLoCB~     9.61e 8   204997          0<br/>#&gt; 10 2021-03-06 21:39:38 TA5vCXk4~     7.45e 8   343487          0<br/>#&gt; 11 2021-03-06 21:39:38 TLgzJvHD~     7.14e 8  1379806          0<br/>#&gt; 12 2021-03-06 21:39:38 TAUN6Fwr~     6.61e 8 18912015          0<br/>#&gt; 13 2021-03-06 21:39:38 TYukBQZ2~     6.45e 8   650231          0<br/>#&gt; 14 2021-03-06 21:39:38 TDDfvZoT~     6.16e 8     1245          0<br/>#&gt; 15 2021-03-06 21:39:38 TH2mEwTK~     6.03e 8   233316          0<br/>#&gt; 16 2021-03-06 21:39:38 TYN6Wh11~     5.79e 8   239220          0<br/>#&gt; 17 2021-03-06 21:39:38 TTCixdqA~     3.20e 8       47          0<br/>#&gt; 18 2021-03-06 21:39:38 TJ3yu4JJ~     2.56e 8      317  297738352<br/>#&gt; 19 2021-03-06 21:39:38 TPoWniNM~     2.38e 8       68          0<br/>#&gt; 20 2021-03-06 21:39:38 TVrZ3Pjj~     2.25e 8   119458          0</span></pre><h1 id="c0f1" class="nb nc it bd nd ne nf ng nh ni nj nk nl jz nm ka nn kc no kd np kf nq kg nr ns bi translated">查询完整的帐户详细信息</h1><p id="c028" class="pw-post-body-paragraph kz la it lb b lc nt ju le lf nu jx lh li nv lk ll lm nw lo lp lq nx ls lt lu im bi translated">使用<code class="fe me mf mg mh b"><a class="ae ky" href="https://next-game-solutions.github.io/tronr/reference/get_account_balance.html" rel="noopener ugc nofollow" target="_blank">get_account_balance()</a></code>函数可以获得帐户余额的更全面的视图，该函数返回一个<a class="ae ky" href="https://tidyr.tidyverse.org/articles/nest.html" rel="noopener ugc nofollow" target="_blank">嵌套tible</a>:</p><pre class="kj kk kl km gt ny mh nz oa aw ob bi"><span id="0319" class="oc nc it mh b gy od oe l of og">r &lt;- <a class="ae ky" href="https://next-game-solutions.github.io/tronr/reference/get_account_balance.html" rel="noopener ugc nofollow" target="_blank">get_account_balance</a>(<br/>    address = "TQjaZ9FD473QBTdUzMLmSyoGB6Yz1CGpux"<br/>)</span><span id="ef1b" class="oc nc it mh b gy oh oe l of og">glimpse(r)</span><span id="6914" class="oc nc it mh b gy oh oe l of og">#&gt; Rows: 1<br/>#&gt; Columns: 10<br/>#&gt; $ request_time &lt;dttm&gt; 2021-03-06 21:22:46<br/>#&gt; $ address      &lt;chr&gt; "TQjaZ9FD473QBTdUzMLmSyoGB6Yz1CGpux"<br/>#&gt; $ name         &lt;chr&gt; "SunTRXV3Pool"<br/>#&gt; $ total_tx     &lt;int&gt; 69046<br/>#&gt; $ bandwidth    &lt;list&gt; [&lt;tbl_df[1 x 20]&gt;]<br/>#&gt; $ trx_balance  &lt;dbl&gt; 4888953<br/>#&gt; $ n_trc20      &lt;int&gt; 16<br/>#&gt; $ trc20        &lt;list&gt; [&lt;tbl_df[16 x 7]&gt;]<br/>#&gt; $ n_trc10      &lt;int&gt; 12<br/>#&gt; $ trc10        &lt;list&gt; [&lt;tbl_df[12 x 8]&gt;]</span></pre><p id="f061" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe me mf mg mh b">bandwidth</code>(账户当前<a class="ae ky" href="https://tronprotocol.github.io/documentation-en/introduction/overview/#8-resource-model" rel="noopener ugc nofollow" target="_blank">能量和带宽资源</a>)、<code class="fe me mf mg mh b">trc20</code>(账户持有的<a class="ae ky" href="https://developers.tron.network/docs/trc20" rel="noopener ugc nofollow" target="_blank"> TRC-20令牌</a>)、<code class="fe me mf mg mh b">trc10</code>(账户持有的<a class="ae ky" href="https://developers.tron.network/docs/trc10" rel="noopener ugc nofollow" target="_blank"> TRC-10令牌</a>)列中可以看到该tibble的嵌套结构。这些列中的每一列都包含一个具有单个元素的列表——另一个列表包含相应的数据。这些嵌套数据可以通过使用标准R索引机制或应用<code class="fe me mf mg mh b"><a class="ae ky" href="https://tidyr.tidyverse.org/reference/nest.html" rel="noopener ugc nofollow" target="_blank">tidyr::unnest()</a></code>函数来检索:</p><pre class="kj kk kl km gt ny mh nz oa aw ob bi"><span id="ef9c" class="oc nc it mh b gy od oe l of og"># Extract data on the TRC-20 tokens held by the account,<br/># using the standard R indexing:<br/>r$trc20[[1]]</span><span id="9653" class="oc nc it mh b gy oh oe l of og">#&gt; # A tibble: 16 x 7<br/>#&gt;    token_contract_~ token_name token_abbr token_type balance<br/>#&gt;    &lt;chr&gt;            &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;        &lt;dbl&gt;<br/>#&gt;  1 TKkeiboTkxXKJpb~ SUN        SUN        trc20      3.28e+1<br/>#&gt;  2 TVogNDwsyGYuEcA~ 42 Defense 42D        trc20      1.00e-1<br/>#&gt;  3 TV2DYBjPY2SJuHQ~ AAA DeFi ~ AAA        trc20      1.00e+0<br/>#&gt;  4 TRZPqchWTRUzXNG~ AISwap     AIS        trc20      1.00e+0<br/>#&gt;  5 TDndaG9V79f3dVu~ ANB Finan~ ANB        trc20      1.12e-7<br/>#&gt;  6 TU7uTrWbnt9RVQJ~ CLAM HOLD~ CLAM       trc20      1.00e-6<br/>#&gt;  7 TMqgAJSuMEq5EQW~ EAB Finan~ EAB        trc20      1.00e-4<br/>#&gt;  8 THSjCwmYVeK1oLR~ EAB Finan~ EAB        trc20      1.11e-3<br/>#&gt;  9 TY2p1N32AEBtpqT~ GOLF Token GOLF       trc20      1.00e-2<br/>#&gt; 10 TQXhxDPNKVsgxYb~ GoldenEggs GLDE       trc20      2.00e-6<br/>#&gt; 11 TASrsr1Qsz8eUSa~ HYPE Token HYPE       trc20      1.25e-1<br/>#&gt; 12 TCwsQqyVfTNwNm5~ MAVRONA C~ MAVRONA    trc20      2.00e+0<br/>#&gt; 13 TM6oGQHC9Fq6d9t~ NEXA Token NEXA       trc20      4.12e-1<br/>#&gt; 14 THJPvg68wH4wbAk~ O K E X _~ OKU        trc20      1.00e-6<br/>#&gt; 15 TUAbNGTPe7uCMcd~ SNDCOIN    SNDC       trc20      1.00e-2<br/>#&gt; 16 TLvdAAh7hxDWvvh~ StakeAnbF~ SKE        trc20      1.00e-6<br/>#&gt; # ... with 2 more variables: token_price_in_trx &lt;dbl&gt;,<br/>#&gt; #   vip &lt;lgl&gt;</span><span id="c506" class="oc nc it mh b gy oh oe l of og"># The same result could be obtained with the following command:<br/># <!-- -->r %&gt;% <a class="ae ky" href="https://dplyr.tidyverse.org/reference/select.html" rel="noopener ugc nofollow" target="_blank">select</a>(trc20) %&gt;% <a class="ae ky" href="https://tidyr.tidyverse.org/reference/nest.html" rel="noopener ugc nofollow" target="_blank">unnest</a>(cols = trc20)</span></pre><h1 id="082e" class="nb nc it bd nd ne nf ng nh ni nj nk nl jz nm ka nn kc no kd np kf nq kg nr ns bi translated">结论</h1><p id="6999" class="pw-post-body-paragraph kz la it lb b lc nt ju le lf nu jx lh li nv lk ll lm nw lo lp lq nx ls lt lu im bi translated">本文展示了使用R包<code class="fe me mf mg mh b">tronr</code>查询TRON账户余额是多么容易。我将非常感谢来自这个包的用户的任何反馈、错误报告和贡献——详见该项目的<a class="ae ky" href="https://github.com/next-game-solutions/tronr" rel="noopener ugc nofollow" target="_blank"> Github库</a>。</p></div><div class="ab cl oj ok hx ol" role="separator"><span class="om bw bk on oo op"/><span class="om bw bk on oo op"/><span class="om bw bk on oo"/></div><div class="im in io ip iq"><h1 id="db52" class="nb nc it bd nd ne oq ng nh ni or nk nl jz os ka nn kc ot kd np kf ou kg nr ns bi translated">在你走之前</h1><p id="5b4f" class="pw-post-body-paragraph kz la it lb b lc nt ju le lf nu jx lh li nv lk ll lm nw lo lp lq nx ls lt lu im bi translated">我提供数据科学咨询服务。<a class="ae ky" href="mailto:sergey@nextgamesolutions.com" rel="noopener ugc nofollow" target="_blank">取得联系</a>！</p></div></div>    
</body>
</html>