# Lambda 冷启动，有什么问题？

> 原文：<https://levelup.gitconnected.com/lambda-cold-starts-d9489fbc4bf8>

## 冷起动不是问题，或者至少应该是问题

*由 DPG 媒体的 AWS 云解决方案架构师 Gert Leenders 撰写*

**当我说 Lambda 冷启动是一个受欢迎的讨论话题时，我在陈述明显的事实。DPG 媒体也不例外。我已经花了相当多的时间在 DPG 媒体的咖啡角进行冷启动讨论。所以为什么不写下来呢，对吗？**

我经常听到人们抱怨 Lambda 冷启动。这经常导致数小时的讨论和耗时的寻找答案。对我来说，Lambda 冷启动不是问题，或者至少应该是问题。请允许我解释这是为什么。

# 大数定律

语境决定一切。如果您的无服务器应用程序每八小时只需处理一个客户，那么是的，Lambda 冷启动可能会对您造成严重打击。至少不难想象它不会被忽视。另一方面，如果您运行一个平均处理 1000 个并发用户的服务，那么很有可能冷启动会迷失在人群中。我猜它甚至不会出现在你的 95%统计中。因此，在做出有利于 Lambdas 的架构决策时，请记住您的服务的上下文。

# 票据法律

谈论大数定律将我们无缝地带入第二个话题:[工具定律](https://en.wikipedia.org/wiki/Law_of_the_instrument)。

虽然我爱用 Lambda，但它不是金锤。如果冷启动严重伤害了你——特别是在请求数量很少的情况下——那么 Lambda 可能不是这项工作的合适工具。我同意，很可能这是最便宜的选择。但是为了捍卫价格，我认为您的时间太宝贵了，不应该投资于一个项目，因为额外的一便士购买一个 ECS Fargate 容器或一个 t3a.nano EC2 实例会导致交易失败。此外，在请求数量较少的情况下，可能不需要进行伸缩。因此，我们也可以将易于扩展的 Lambda 优势排除在外。

![](img/900133b8a705cd9f012b411f561ff254.png)

Todd Quackenbush 在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍照

# 冷启动与λ纠缠在一起

在这一点上，我已经应该让你相信冷启动是与λ纠缠在一起的。正如每项技术一样，它既有优点也有缺点。软件架构师的工作是考虑技术的各个方面，并为这项工作选择最好的工具。这是一种权衡，Lambda 以非常低的价格为您提供了强大的功能和可伸缩性。然而，这是以时不时的较慢响应为代价的…

# 供应的并发性如何？

[自 2019 年 12 月起，可以为 Lambda](https://aws.amazon.com/blogs/aws/new-provisioned-concurrency-for-lambda-functions/) 启用预配并发。对于某些用例来说，它无疑具有附加值。另一方面，你使用它会付出一些额外的代价，如果你跨过了配置的门槛，你会感到和以前一样的痛苦。

即使是现在，随着供应的并发可用，冷启动只是 Lambda 的一部分。我仍然相信，在大多数用例中，冷启动不会对您的应用程序产生明显的影响。如果是这样，您应该弄清楚好处(灵活性和易于扩展)是否超过冷启动。

# 编程语言的选择

最后，我想多花一分钟讨论一下关于编程语言对 Lambda 冷启动的影响的争论。在这场辩论中让我恼火的是，它跑题了。

在我见过的冷启动案例中，语言选择增加的延迟开销与 Lambda 源代码本身增加的延迟形成了鲜明对比。查询 AWS SSM 参数存储的一次往返已经比通过 Lambda 冷启动的最快和最慢语言之间的差异具有更大的影响。