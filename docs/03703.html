<html>
<head>
<title>Audible waves of Javascript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Javascript的可听波</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/audible-waves-of-javascript-fc8322c9f02?source=collection_archive---------8-----------------------#2020-05-23">https://levelup.gitconnected.com/audible-waves-of-javascript-fc8322c9f02?source=collection_archive---------8-----------------------#2020-05-23</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/52e0864b10a1ffdc66597074655b6d31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3ynzUZfOzHaY6Qpn0yeoJg.jpeg"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated"><a class="ae kf" href="https://en.wikipedia.org/wiki/A_Cart_on_the_Snowy_Road_at_Honfleur" rel="noopener ugc nofollow" target="_blank"> <em class="kg">翁弗勒</em> </a>雪道上的一辆马车(1865或1867)，莫奈的第一幅雪景。</figcaption></figure><h1 id="7a84" class="kh ki it bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated">使用网络音频API进行数字音频合成</h1><p id="24bd" class="pw-post-body-paragraph lf lg it lh b li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在人类正在研究合成人类意识的时候，音频合成听起来可能很原始。但是，我们难道不能同意，作为五种感官中的一种，声波在我们的日常生活中起着主导作用吗？</p><p id="8b82" class="pw-post-body-paragraph lf lg it lh b li md lk ll lm me lo lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">本文旨在探索数字音频合成的<strong class="lh iu"><em class="mi"/></strong>在一个<strong class="lh iu"> <em class="mi">开发者友好的环境</em> </strong>中使用<strong class="lh iu"><em class="mi"/></strong><a class="ae kf" href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API" rel="noopener ugc nofollow" target="_blank"><strong class="lh iu"><em class="mi">Web音频API </em> </strong> </a></p><p id="d15d" class="pw-post-body-paragraph lf lg it lh b li md lk ll lm me lo lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">为了了解Web Audio API有多强大，我试图构建一个在浏览器中运行的合成器，并设法将以下功能构建到“合成器”中。</p><ol class=""><li id="a41d" class="mj mk it lh b li md lm me lq ml lu mm ly mn mc mo mp mq mr bi translated">三个振荡器。</li><li id="261c" class="mj mk it lh b li ms lm mt lq mu lu mv ly mw mc mo mp mq mr bi translated">每个振荡器的音高控制。</li><li id="e862" class="mj mk it lh b li ms lm mt lq mu lu mv ly mw mc mo mp mq mr bi translated">三声道混频器。</li><li id="ef31" class="mj mk it lh b li ms lm mt lq mu lu mv ly mw mc mo mp mq mr bi translated">主通道上的混响效果。</li><li id="6910" class="mj mk it lh b li ms lm mt lq mu lu mv ly mw mc mo mp mq mr bi translated">键盘来演奏c大调音阶(这样我们就不会听起来很难听)。</li><li id="edab" class="mj mk it lh b li ms lm mt lq mu lu mv ly mw mc mo mp mq mr bi translated">按键释放的释放信封。</li><li id="a4a1" class="mj mk it lh b li ms lm mt lq mu lu mv ly mw mc mo mp mq mr bi translated">示波器(这样我们可以看到实际的波形)。</li></ol><p id="29b8" class="pw-post-body-paragraph lf lg it lh b li md lk ll lm me lo lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated"><strong class="lh iu">此处代码可用</strong><a class="ae kf" href="https://github.com/DumindaWijesinghe/web-audio-api-demo" rel="noopener ugc nofollow" target="_blank"><strong class="lh iu"/></a><strong class="lh iu">。</strong></p><div class="mx my gp gr mz na"><a href="https://github.com/DumindaWijesinghe/web-audio-api-demo" rel="noopener  ugc nofollow" target="_blank"><div class="nb ab fo"><div class="nc ab nd cl cj ne"><h2 class="bd iu gy z fp nf fr fs ng fu fw is bi translated">DumindaWijesinghe/we B- audio-API-demo</h2><div class="nh l"><h3 class="bd b gy z fp nf fr fs ng fu fw dk translated">为了了解Web Audio API有多强大，我尝试构建了一个在浏览器中运行的合成器，并成功构建了…</h3></div><div class="ni l"><p class="bd b dl z fp nf fr fs ng fu fw dk translated">github.com</p></div></div><div class="nj l"><div class="nk l nl nm nn nj no jz na"/></div></div></a></div><figure class="nq nr ns nt gt ju gh gi paragraph-image"><div class="gh gi np"><img src="../Images/a6c294c28266f40eba47908233269e8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1164/1*aJ1LgqpTBut9zja9t7LW1g.gif"/></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">“Release”故意拼错是为了引起你的注意:)</figcaption></figure><p id="ea8a" class="pw-post-body-paragraph lf lg it lh b li md lk ll lm me lo lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">我们可以使用<a class="ae kf" href="https://github.com/google/audion/wiki/How-to-Use" rel="noopener ugc nofollow" target="_blank">网络音频检查器</a>来查看发生了什么，这就是我们的设置。在调试代码时，查看哪个模块链接到哪个模块非常方便。</p><figure class="nq nr ns nt gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nu"><img src="../Images/ab05e4bb2e2cdb0b0e5fc98bb39c9ef3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t-nWDNP3sICbN70nPgTRkw.png"/></div></div></figure><p id="5e5a" class="pw-post-body-paragraph lf lg it lh b li md lk ll lm me lo lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">让我们简单看一下图中的模块。</p><h2 id="74cd" class="nv ki it bd kj nw nx dn kn ny nz dp kr lq oa ob kv lu oc od kz ly oe of ld og bi translated">音频环境</h2><p id="f68b" class="pw-post-body-paragraph lf lg it lh b li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated"><code class="fe oh oi oj ok b">AudioContext</code>是这里发生的一切的容器，或者我们可以称之为音频处理图。AudioContext处理图中每个节点的创建。</p><pre class="nq nr ns nt gt ol ok om on aw oo bi"><span id="746b" class="nv ki it ok b gy op oq l or os">audioCtx <strong class="ok iu">=</strong> <strong class="ok iu">new</strong> AudioContext();</span></pre><h2 id="dc9e" class="nv ki it bd kj nw nx dn kn ny nz dp kr lq oa ob kv lu oc od kz ly oe of ld og bi translated">振荡器</h2><p id="0bc1" class="pw-post-body-paragraph lf lg it lh b li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">振荡器节点负责生成波。我们可以从<code class="fe oh oi oj ok b">"sine"</code>、<code class="fe oh oi oj ok b">"square"</code>、<code class="fe oh oi oj ok b">"sawtooth"</code>、<code class="fe oh oi oj ok b">"triangle"</code>、<code class="fe oh oi oj ok b">"custom"</code>中选择。在我们的实现中，振荡器1使用了<code class="fe oh oi oj ok b">"sine"</code>，振荡器2使用了<code class="fe oh oi oj ok b">"square"</code>，振荡器3使用了<code class="fe oh oi oj ok b">"sawtooth"</code>。</p><pre class="nq nr ns nt gt ol ok om on aw oo bi"><span id="6f42" class="nv ki it ok b gy op oq l or os">osc1 <strong class="ok iu">=</strong> audioCtx.createOscillator();</span><span id="f229" class="nv ki it ok b gy ot oq l or os">osc1.type <strong class="ok iu">=</strong> "sine";</span><span id="2cb6" class="nv ki it ok b gy ot oq l or os">osc2 <strong class="ok iu">=</strong> audioCtx.createOscillator();</span><span id="06d8" class="nv ki it ok b gy ot oq l or os">osc2.type <strong class="ok iu">=</strong> "square";</span><span id="910c" class="nv ki it ok b gy ot oq l or os">osc3 <strong class="ok iu">=</strong> audioCtx.createOscillator();</span><span id="c2c4" class="nv ki it ok b gy ot oq l or os">osc3.type <strong class="ok iu">=</strong> "sawtooth";</span></pre><h2 id="d2af" class="nv ki it bd kj nw nx dn kn ny nz dp kr lq oa ob kv lu oc od kz ly oe of ld og bi translated">获得</h2><p id="0aac" class="pw-post-body-paragraph lf lg it lh b li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我们可以把增益节点想象成音量旋钮，它是我们用来构建混音器和释放包络的。</p><pre class="nq nr ns nt gt ol ok om on aw oo bi"><span id="5d97" class="nv ki it ok b gy op oq l or os">amp1 <strong class="ok iu">=</strong> audioCtx.createGain();</span><span id="8e30" class="nv ki it ok b gy ot oq l or os">amp2 <strong class="ok iu">=</strong> audioCtx.createGain();</span><span id="f843" class="nv ki it ok b gy ot oq l or os">amp3 <strong class="ok iu">=</strong> audioCtx.createGain();</span><span id="1207" class="nv ki it ok b gy ot oq l or os">master <strong class="ok iu">=</strong> audioCtx.createGain(); // Release envelop</span></pre><h2 id="a42b" class="nv ki it bd kj nw nx dn kn ny nz dp kr lq oa ob kv lu oc od kz ly oe of ld og bi translated">卷积器</h2><p id="3acc" class="pw-post-body-paragraph lf lg it lh b li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">这是我们用来实现混响效果的节点。</p><pre class="nq nr ns nt gt ol ok om on aw oo bi"><span id="9f66" class="nv ki it ok b gy op oq l or os">convolver <strong class="ok iu">=</strong> audioCtx.createConvolver();</span></pre><h2 id="634a" class="nv ki it bd kj nw nx dn kn ny nz dp kr lq oa ob kv lu oc od kz ly oe of ld og bi translated">分析者</h2><p id="4247" class="pw-post-body-paragraph lf lg it lh b li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">分析器节点可以提取用于分析和可视化目的的实时信息。</p><pre class="nq nr ns nt gt ol ok om on aw oo bi"><span id="1bb0" class="nv ki it ok b gy op oq l or os">analyser <strong class="ok iu">=</strong> audioCtx.createAnalyser();</span></pre><p id="19d2" class="pw-post-body-paragraph lf lg it lh b li md lk ll lm me lo lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">这是目前的全部设置。当然，我们还有很多可以改进的地方，但就概念验证而言，这太棒了。</p><p id="f788" class="pw-post-body-paragraph lf lg it lh b li md lk ll lm me lo lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">有了像<a class="ae kf" href="https://tonejs.github.io/" rel="noopener ugc nofollow" target="_blank"> Tone.js </a>这样的高级框架，Web Audio API在音频制作工作流程中的各种应用中都有很大的潜力。期待着修补程序，当我有东西要展示的时候，我会写下来的。</p><p id="ebf5" class="pw-post-body-paragraph lf lg it lh b li md lk ll lm me lo lp lq mf ls lt lu mg lw lx ly mh ma mb mc im bi translated">在那之前，继续黑吧…</p></div></div>    
</body>
</html>