<html>
<head>
<title>Making a Font Awesome Subset</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">制作字体超赞子集</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/making-a-font-awesome-subset-a7175a6d3e8c?source=collection_archive---------14-----------------------#2022-05-17">https://levelup.gitconnected.com/making-a-font-awesome-subset-a7175a6d3e8c?source=collection_archive---------14-----------------------#2022-05-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/07f6b4589a9961a18c7db54549d34f53.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pky8LvUNKaGzjdyL8rVajQ.png"/></div></div></figure><p id="7f8c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><a class="ae kz" href="https://fontawesome.com/" rel="noopener ugc nofollow" target="_blank"> Font Awesome </a>的确很棒——但是无法回避的事实是，如果你只想要几个图标，那么它就不是一个轻量级的软件包。</p><p id="388c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">四处寻找解决这个问题的方法，我发现<a class="ae kz" href="https://github.com/omacranger/" rel="noopener ugc nofollow" target="_blank"> Logan Graham </a>写了一个很好的JavaScript包来解决这个问题，名为<a class="ae kz" href="https://github.com/omacranger/fontawesome-subset" rel="noopener ugc nofollow" target="_blank"> fontawesome-subset </a>。</p><p id="7c36" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这将完成提取你想要的图标并重新打包成字体文件的工作，但是你仍然需要CSS文件来使用它们。</p><p id="fa12" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">它只适用于Font Awesome 5 . x——如果你想使用6，那么看起来你需要使用<a class="ae kz" href="https://fontawesome.com/plans" rel="noopener ugc nofollow" target="_blank"> Font Awesome Pro工具包</a>，或者<a class="ae kz" href="https://github.com/omacranger/fontawesome-subset/issues/16" rel="noopener ugc nofollow" target="_blank">在Github </a>上提出这个问题，并尝试解决它。:-)</p><p id="b97c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在几次尝试将它部署到网站上，却忘记复制或运行<em class="la">一些东西</em>之后，我决定是时候投资建立一个任务运行器了。</p><h1 id="80d8" class="lb lc it bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">哪个跑步者？</h1><p id="3260" class="pw-post-body-paragraph kb kc it kd b ke lz kg kh ki ma kk kl km mb ko kp kq mc ks kt ku md kw kx ky im bi translated">我肯定还有更多，但我见过的有<a class="ae kz" href="https://gulpjs.com" rel="noopener ugc nofollow" target="_blank">大口</a>和<a class="ae kz" href="https://gruntjs.com" rel="noopener ugc nofollow" target="_blank">咕噜</a>。我需要一些方法来决定选择哪一个，而GitHub repos实际上让这变得相当简单。</p><h1 id="2e9c" class="lb lc it bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">吞咽</h1><p id="1bd9" class="pw-post-body-paragraph kb kc it kd b ke lz kg kh ki ma kk kl km mb ko kp kq mc ks kt ku md kw kx ky im bi translated">Gulp自2021年年中以来一直没有更新，CI测试失败，并且它<a class="ae kz" href="https://github.com/gulpjs/gulp/issues/2654" rel="noopener ugc nofollow" target="_blank">不支持Node &gt; = 14 </a>。</p><h1 id="a1e7" class="lb lc it bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">咕哝</h1><p id="02fb" class="pw-post-body-paragraph kb kc it kd b ke lz kg kh ki ma kk kl km mb ko kp kq mc ks kt ku md kw kx ky im bi translated">Grunt最近一次更新是在3天前(撰写本文时)，并且已经通过了CI测试。</p><p id="8aaa" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">所以，就咕哝吧。</p><h1 id="e573" class="lb lc it bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">演示网页</h1><p id="b874" class="pw-post-body-paragraph kb kc it kd b ke lz kg kh ki ma kk kl km mb ko kp kq mc ks kt ku md kw kx ky im bi translated">请注意，这篇文章不会带你实际使用FA——这不是这里的重点。所以，如果下面的课程对你来说没有意义，去看看FA文档吧。</p><p id="c930" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这是页面:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="a377" class="mn lc it mj b gy mo mp l mq mr">&lt;html&gt;<br/>    &lt;head&gt;&lt;/head&gt;<br/>    &lt;body&gt;<br/>        &lt;form&gt;<br/>            &lt;label for="email"&gt;<br/>                &lt;i class="fas fa-envelope"&gt;&lt;/i&gt;<br/>                Email<br/>            &lt;/label&gt;<br/>            &lt;input type="email" id="email"/&gt;<br/>            &lt;label for="password"&gt;<br/>                &lt;i class="fas fa-lock"&gt;&lt;/i&gt;<br/>                Password<br/>            &lt;/label&gt;<br/>            &lt;input type="password" id="password"/&gt;<br/>            &lt;button type="submit"&gt;Click me&lt;/button&gt;<br/>        &lt;/form&gt;<br/>    &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="f08e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在我们看不到任何图标——我们还没有完成子集设置，也没有包含任何CSS文件。</p><figure class="me mf mg mh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ms"><img src="../Images/668455c438d47fe36211e37fdf3f0b5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aQ3-GQruBy5hVwi_tgBbgg.png"/></div></div></figure><p id="2862" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们将使用<code class="fe mt mu mv mj b">livereloadx</code>包来提供内容，因为我们不必编写任何代码来使用它。我们将把这个命令添加到<code class="fe mt mu mv mj b">package.json</code>中的脚本部分，以便于运行。</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="0803" class="mn lc it mj b gy mo mp l mq mr">"scripts": { "serve": "node ./node_modules/.bin/livereloadx -s ." }</span></pre><h1 id="f0af" class="lb lc it bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">如何划分文件子集</h1><p id="1336" class="pw-post-body-paragraph kb kc it kd b ke lz kg kh ki ma kk kl km mb ko kp kq mc ks kt ku md kw kx ky im bi translated">毕竟，如果我们不能解决这个问题，剩下的就没有意义了。幸运的是，自述文件中的用法部分让这个问题变得相当容易解决。</p><p id="60e7" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">导入<code class="fe mt mu mv mj b">fontawesomeSubset</code>功能:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="ef60" class="mn lc it mj b gy mo mp l mq mr">const { fontawesomeSubset } = require("fontawesome-subset");</span></pre><p id="88d3" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">然后我们用两个参数调用它。第一个是我们想要的图标的名称或名称数组(没有前缀<code class="fe mt mu mv mj b">fa-</code>)。第二个是它应该在哪里编写将要生成的字体文件。</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="6259" class="mn lc it mj b gy mo mp l mq mr">fontawesomeSubset([ 'envelope', 'lock', ], 'static/webfonts');</span></pre><p id="5e5c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">事实上，如果我们运行它，我们可以看到它的工作，或者至少产生一些输出。输出文件只是源文件大小的一小部分，这是令人鼓舞的。</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="ab56" class="mn lc it mj b gy mo mp l mq mr">$ node fa_subset.js<br/>$ fd . -t f static/<br/>static/webfonts/fa-solid-900.eot<br/>static/webfonts/fa-solid-900.svg<br/>static/webfonts/fa-solid-900.ttf<br/>static/webfonts/fa-solid-900.woff<br/>static/webfonts/fa-solid-900.woff2<br/>$ du -hs static/webfonts/<br/>20K	static/webfonts/</span></pre><h1 id="4e39" class="lb lc it bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">获取咕哝设置</h1><p id="e503" class="pw-post-body-paragraph kb kc it kd b ke lz kg kh ki ma kk kl km mb ko kp kq mc ks kt ku md kw kx ky im bi translated">首先让Grunt成功运行，即使它什么也不做。</p><p id="d960" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">Grunt config可以存在于不同的地方，但是我选择把它放在<code class="fe mt mu mv mj b">Gruntfile.js</code>来保持它的独立性。最简单的配置如下:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="7e90" class="mn lc it mj b gy mo mp l mq mr">module.exports = function (grunt) {<br/>  grunt.initConfig({<br/>    pkg: grunt.file.readJSON("package.json") })</span><span id="e155" class="mn lc it mj b gy mw mp l mq mr">    // We'll load any plugins here.</span><span id="07f6" class="mn lc it mj b gy mw mp l mq mr">    // 'default' is run if you run Grunt without arguments.<br/>    grunt.registerTask('default', []);<br/>}</span></pre><p id="e096" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">注意“默认”任务被注册，即使它不做任何事情。作为一个好的占位符，这也意味着如果你不带参数运行<code class="fe mt mu mv mj b">grunt</code>，它不会产生错误。我们稍后将回到这一点。</p><p id="9293" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">就这样，它活了——尽管不可否认它没有说太多。</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="66f0" class="mn lc it mj b gy mo mp l mq mr">$ grunt<br/><br/>Done.</span></pre><h1 id="756b" class="lb lc it bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">复制文件</h1><p id="8034" class="pw-post-body-paragraph kb kc it kd b ke lz kg kh ki ma kk kl km mb ko kp kq mc ks kt ku md kw kx ky im bi translated">为了使用网络字体，我们将使用字体Awesome包中的CSS文件。他们应该会自动加载我们提取的网络字体文件。提醒一下——这只适用于字体Awesome 5.x，不适用于6.x。</p><p id="4cdb" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">有一个<code class="fe mt mu mv mj b">grunt-contrib-copy</code>包教Grunt如何复制文件。安装后的第一件事就是在Grunt设置功能中加载。</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="d6cd" class="mn lc it mj b gy mo mp l mq mr">grunt.loadNpmTasks('grunt-contrib-copy');</span></pre><p id="1419" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">从<a class="ae kz" href="https://gruntjs.com/configuring-tasks#building-the-files-object-dynamically" rel="noopener ugc nofollow" target="_blank">的普通文档</a>中我们可以看到我们需要:</p><ul class=""><li id="dd4c" class="mx my it kd b ke kf ki kj km mz kq na ku nb ky nc nd ne nf bi translated"><code class="fe mt mu mv mj b">expand</code>选项，启用其他选项</li><li id="09b8" class="mx my it kd b ke ng ki nh km ni kq nj ku nk ky nc nd ne nf bi translated"><code class="fe mt mu mv mj b">flatten</code>选项，将目标结果展平到一个级别。</li><li id="d2de" class="mx my it kd b ke ng ki nh km ni kq nj ku nk ky nc nd ne nf bi translated"><code class="fe mt mu mv mj b">src</code>，列出源文件</li><li id="e2e5" class="mx my it kd b ke ng ki nh km ni kq nj ku nk ky nc nd ne nf bi translated"><code class="fe mt mu mv mj b">dest</code>，告诉Grunt把复制的文件放在哪里。</li></ul><p id="57ca" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">由此我们得到了一个像这样的配置对象。</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="1c1d" class="mn lc it mj b gy mo mp l mq mr">grunt.initConfig({<br/>  pkg: grunt.file.readJSON("package.json"),<br/>  copy: {<br/>    main: {<br/>      files: [<br/>        {<br/>          expand: true,<br/>          flatten: true,<br/>          src: [<br/>            'node_modules/@fortawesome/fontawesome-free/css/fontawesome.min.css',<br/>            'node_modules/@fortawesome/fontawesome-free/css/solid.min.css'<br/>          ],<br/>          dest: 'static/css/'<br/>        },<br/>      ]<br/>    }<br/>  }<br/>});</span></pre><p id="581e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们可以运行它，它说它复制了两个文件。让我们检查一下是否是正确的两个文件，它们在我们期望的地方。</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="7240" class="mn lc it mj b gy mo mp l mq mr">$ grunt copy<br/>Running "copy:main" (copy) task<br/>Copied 2 files<br/><br/>Done.<br/>$ fd . -t f static<br/>static/css/fontawesome.min.css<br/>static/css/solid.min.css</span></pre><p id="37c8" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">是的，看起来不错。</p><h1 id="84de" class="lb lc it bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">运行子集任务</h1><p id="a639" class="pw-post-body-paragraph kb kc it kd b ke lz kg kh ki ma kk kl km mb ko kp kq mc ks kt ku md kw kx ky im bi translated">现在让Grunt实际做子集设置。为此，我们将使用<a class="ae kz" href="https://gruntjs.com/creating-tasks#basic-tasks" rel="noopener ugc nofollow" target="_blank"> registerTask() </a>函数，它提供了一个通用的“运行此函数”任务。它有以下原型:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="a6e5" class="mn lc it mj b gy mo mp l mq mr">grunt.registerTask(name, description, function)</span></pre><p id="f6cb" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">所以，让我们试着插入我们之前写的函数。</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="f9d3" class="mn lc it mj b gy mo mp l mq mr">grunt.registerTask('fasubset', 'Subset the FA icons.', function() {<br/>  fontawesomeSubset([<br/>      'envelope',<br/>      'lock'<br/>    ],<br/>    'static/webfonts');<br/>});</span></pre><p id="66e7" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">而且……它起作用了。那几乎太容易了！</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="9417" class="mn lc it mj b gy mo mp l mq mr">$ rm -rf static<br/>$ grunt fasubset<br/>Running "fasubset" task<br/><br/>Done.<br/>$ fd . -t f static<br/>static/webfonts/fa-solid-900.eot<br/>static/webfonts/fa-solid-900.svg<br/>static/webfonts/fa-solid-900.ttf<br/>static/webfonts/fa-solid-900.woff<br/>static/webfonts/fa-solid-900.woff2</span></pre><h1 id="3c75" class="lb lc it bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">默认情况下运行任务</h1><p id="d880" class="pw-post-body-paragraph kb kc it kd b ke lz kg kh ki ma kk kl km mb ko kp kq mc ks kt ku md kw kx ky im bi translated">对于Grunt config的最后一点，让我们将默认任务改为运行copy和subset，这样我们以后就可以不带任何参数地运行<code class="fe mt mu mv mj b">grunt</code>。</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="ca06" class="mn lc it mj b gy mo mp l mq mr">grunt.registerTask('default', ['fasubset', 'copy']);</span></pre><h1 id="0976" class="lb lc it bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">将CSS文件添加到网页</h1><p id="b68d" class="pw-post-body-paragraph kb kc it kd b ke lz kg kh ki ma kk kl km mb ko kp kq mc ks kt ku md kw kx ky im bi translated">现在我们需要开始使用CSS文件，否则什么都不会发生。</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="2a7c" class="mn lc it mj b gy mo mp l mq mr">&lt;html&gt;<br/>  &lt;head&gt;<br/>    &lt;link rel="stylesheet" href="/static/css/fontawesome.min.css"&gt;<br/>    &lt;link rel="stylesheet" href="/static/css/solid.min.css"&gt;<br/>  &lt;/head&gt;<br/>[...]</span></pre><h1 id="47aa" class="lb lc it bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">检查结果</h1><p id="1269" class="pw-post-body-paragraph kb kc it kd b ke lz kg kh ki ma kk kl km mb ko kp kq mc ks kt ku md kw kx ky im bi translated">最后，让我们再次检查网页——我们应该看到我们的图标已经出现了。</p><figure class="me mf mg mh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nl"><img src="../Images/f942762b38d3d02f2eaff0fb258554d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qusPkaFQy56DSDlazh9q9A.png"/></div></div></figure><p id="683e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这就是全部了！我不得不承认，当我开始的时候，我预计会有更多的困难，但实际上Grunt设计得足够好，有意义，而且<code class="fe mt mu mv mj b">fontawesome-subset</code>工作正常。我喜欢那样的包装。</p><p id="b5ac" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">你呢？你有什么有用的软件包想在评论中分享吗？</p></div><div class="ab cl nm nn hx no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="im in io ip iq"><p id="982d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><em class="la">原载于2022年5月17日https://www.solarwinter.net</em><em class="la"/><a class="ae kz" href="https://www.solarwinter.net/making-a-subset-of-font-awesome/" rel="noopener ugc nofollow" target="_blank"><em class="la">。</em></a></p></div></div>    
</body>
</html>