<html>
<head>
<title>10 Advanced TypeScript Tips for Development</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用于开发的10个高级打字技巧</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/10-advanced-typescript-tips-for-development-2666298d50f?source=collection_archive---------2-----------------------#2022-11-06">https://levelup.gitconnected.com/10-advanced-typescript-tips-for-development-2666298d50f?source=collection_archive---------2-----------------------#2022-11-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="77c8" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">高级打字技巧</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/e49aa01b0af74fb8ccfc50d856d4d6d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CheOGagZaH9uS8WL8RhsAw.png"/></div></div></figure><p id="d9ae" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在使用了一段时间Typescript之后，我深深的感受到了Typescript在中大型项目中的必要性。可以提前避免很多编译期的bug，比如烦人的拼写问题。而且越来越多的包都在用TS，学习它势在必行。下面是我在工作中学到的一些更实用的打字技巧。</p><h2 id="c1b9" class="lq lr it bd ls lt lu dn lv lw lx dp ly ld lz ma mb lh mc md me ll mf mg mh mi bi translated">1.keyof</h2><p id="2c33" class="pw-post-body-paragraph ku kv it kw b kx mj ju kz la mk jx lc ld ml lf lg lh mm lj lk ll mn ln lo lp im bi translated"><code class="fe mo mp mq mr b">keyof</code>和<code class="fe mo mp mq mr b">Object.keys</code>略有相似，只是<code class="fe mo mp mq mr b">keyof</code>拿的是界面的按键。</p><pre class="kj kk kl km gt ms mr mt mu aw mv bi"><span id="da08" class="lq lr it mr b gy mw mx l my mz">interface Point {<br/>    x: number;<br/>    y: number;<br/>}</span><span id="c0ca" class="lq lr it mr b gy na mx l my mz">// type keys = "x" | "y"<br/>type keys = keyof Point;</span></pre><p id="9a1e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">假设我们有一个如下所示的<code class="fe mo mp mq mr b">object</code>，我们需要使用typescript实现一个<code class="fe mo mp mq mr b">get</code>函数来获取其属性值。</p><pre class="kj kk kl km gt ms mr mt mu aw mv bi"><span id="410d" class="lq lr it mr b gy mw mx l my mz">const data = {<br/>  a: 3,<br/>  hello: 'max'<br/>}</span><span id="932b" class="lq lr it mr b gy na mx l my mz">function get(o: object, name: string) {<br/>  return o[name]<br/>}</span></pre><p id="c06a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">一开始我们可能是这样写的，但是它有很多缺点:</p><ol class=""><li id="35d7" class="nb nc it kw b kx ky la lb ld nd lh ne ll nf lp ng nh ni nj bi translated">无法确认返回类型:这将失去ts的最大类型检查能力</li><li id="724d" class="nb nc it kw b kx nk la nl ld nm lh nn ll no lp ng nh ni nj bi translated">无法约束键:可能会出现拼写错误</li></ol><p id="9e3d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在这种情况下，可以使用<code class="fe mo mp mq mr b">keyof </code>来增强<code class="fe mo mp mq mr b">get </code>函数的<code class="fe mo mp mq mr b">type </code>函数，有兴趣的可以看看<code class="fe mo mp mq mr b">_.get</code>的类型标签及其实现。</p><pre class="kj kk kl km gt ms mr mt mu aw mv bi"><span id="c2de" class="lq lr it mr b gy mw mx l my mz">function get&lt;T extends object, K extends keyof T&gt;(o: T, name: K): T[K] {<br/>  return o[name]<br/>}</span></pre><h2 id="4396" class="lq lr it bd ls lt lu dn lv lw lx dp ly ld lz ma mb lh mc md me ll mf mg mh mi bi translated">2.必需&amp;部分&amp;挑选</h2><p id="c10f" class="pw-post-body-paragraph ku kv it kw b kx mj ju kz la mk jx lc ld ml lf lg lh mm lj lk ll mn ln lo lp im bi translated">现在你知道了<code class="fe mo mp mq mr b">keyof</code>，你可以用它对属性做一些扩展，比如实现<code class="fe mo mp mq mr b">Partial </code>和<code class="fe mo mp mq mr b">Pick</code>，<code class="fe mo mp mq mr b">Pick </code>一般用在<code class="fe mo mp mq mr b"> _.pick</code>中</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="93cb" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这些类型内置于Typescript中。</p><h2 id="4e09" class="lq lr it bd ls lt lu dn lv lw lx dp ly ld lz ma mb lh mc md me ll mf mg mh mi bi translated">3.条件类型</h2><p id="4b7e" class="pw-post-body-paragraph ku kv it kw b kx mj ju kz la mk jx lc ld ml lf lg lh mm lj lk ll mn ln lo lp im bi translated">它类似于。:运算符，可以用它来扩展一些基本类型。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><h2 id="cdca" class="lq lr it bd ls lt lu dn lv lw lx dp ly ld lz ma mb lh mc md me ll mf mg mh mi bi translated">4.从不&amp;排除&amp;忽略</h2><p id="47f4" class="pw-post-body-paragraph ku kv it kw b kx mj ju kz la mk jx lc ld ml lf lg lh mm lj lk ll mn ln lo lp im bi translated">never类型表示从不出现的值的类型。</p><p id="4f2b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">结合<code class="fe mo mp mq mr b">never </code>和<code class="fe mo mp mq mr b">conditional </code>类型可以引入很多有趣有用的类型，比如<code class="fe mo mp mq mr b">Omit</code></p><pre class="kj kk kl km gt ms mr mt mu aw mv bi"><span id="98dd" class="lq lr it mr b gy mw mx l my mz">type Exclude&lt;T, U&gt; = T extends U ? never : T;</span><span id="f27a" class="lq lr it mr b gy na mx l my mz">// Equivalent to: type A = 'a'<br/>type A = Exclude&lt;'x' | 'a', 'x' | 'y' | 'z'&gt;</span></pre><p id="9102" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">结合<code class="fe mo mp mq mr b">Exclude</code>可以介绍一下Omit的写作风格</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><h2 id="a555" class="lq lr it bd ls lt lu dn lv lw lx dp ly ld lz ma mb lh mc md me ll mf mg mh mi bi translated">5.类型of</h2><p id="f8b6" class="pw-post-body-paragraph ku kv it kw b kx mj ju kz la mk jx lc ld ml lf lg lh mm lj lk ll mn ln lo lp im bi translated">顾名思义，typeof表示采用某个值的类型，下面的示例显示了它们的用法</p><pre class="kj kk kl km gt ms mr mt mu aw mv bi"><span id="7ae4" class="lq lr it mr b gy mw mx l my mz">const a: number = 3</span><span id="b2ae" class="lq lr it mr b gy na mx l my mz">// Equivalent to: const b: number = 4<br/>const b: typeof a = 4</span></pre><p id="cee8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在一个典型的服务器端项目中，我们经常需要在<code class="fe mo mp mq mr b">context</code>中填充一些工具，比如config、logger、db models、utils等。，然后使用<code class="fe mo mp mq mr b">typeof</code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><h2 id="4b68" class="lq lr it bd ls lt lu dn lv lw lx dp ly ld lz ma mb lh mc md me ll mf mg mh mi bi translated">6.是</h2><p id="a2b3" class="pw-post-body-paragraph ku kv it kw b kx mj ju kz la mk jx lc ld ml lf lg lh mm lj lk ll mn ln lo lp im bi translated">在此之前，我们先来看一个<code class="fe mo mp mq mr b">koa</code>错误处理流程。这里是集中<code class="fe mo mp mq mr b">error</code>处理和识别<code class="fe mo mp mq mr b">code</code>的过程</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="7cc6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在<code class="fe mo mp mq mr b">err.code</code>处，它将编译一个错误，即属性<code class="fe mo mp mq mr b">‘code’</code>在类型<code class="fe mo mp mq mr b"> ‘Error’.ts(2339)</code>上不存在。<br/>在这种情况下，你可以使用<code class="fe mo mp mq mr b">as AxiosError</code>或者<code class="fe mo mp mq mr b">as any</code>来避免错误，但是强制类型转换不够友好！</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="f34e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在这种情况下，可以使用is来确定值的类型。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="f4c1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在GraphQL源代码中，有许多这样的用法来标识类型。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><h2 id="6b88" class="lq lr it bd ls lt lu dn lv lw lx dp ly ld lz ma mb lh mc md me ll mf mg mh mi bi translated">7.接口和类型</h2><p id="ff80" class="pw-post-body-paragraph ku kv it kw b kx mj ju kz la mk jx lc ld ml lf lg lh mm lj lk ll mn ln lo lp im bi translated">接口和类型有什么区别？这里的<a class="ae nr" href="https://stackoverflow.com/questions/37233735/interfaces-vs-types-in-typescript" rel="noopener ugc nofollow" target="_blank">可以参考</a>。</p><p id="d8ff" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">接口和类型的区别很小，比如下面两种写法都差不多。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="a313" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><code class="fe mo mp mq mr b">interface </code>可以如下合并，而<code class="fe mo mp mq mr b">type </code>只能使用&amp;类链接。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><h2 id="1f94" class="lq lr it bd ls lt lu dn lv lw lx dp ly ld lz ma mb lh mc md me ll mf mg mh mi bi translated">8.记录&amp;字典&amp;多</h2><p id="3f42" class="pw-post-body-paragraph ku kv it kw b kx mj ju kz la mk jx lc ld ml lf lg lh mm lj lk ll mn ln lo lp im bi translated">这些语法糖是从<code class="fe mo mp mq mr b">lodash</code>的类型源代码中学习来的，通常在工作场所中使用得相当频繁。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><h2 id="c798" class="lq lr it bd ls lt lu dn lv lw lx dp ly ld lz ma mb lh mc md me ll mf mg mh mi bi translated">9.用常量枚举维护常量表</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><h2 id="f06d" class="lq lr it bd ls lt lu dn lv lw lx dp ly ld lz ma mb lh mc md me ll mf mg mh mi bi translated">10.VS代码提示和类型脚本命令</h2><p id="8180" class="pw-post-body-paragraph ku kv it kw b kx mj ju kz la mk jx lc ld ml lf lg lh mm lj lk ll mn ln lo lp im bi translated">有时候用vs代码，用<code class="fe mo mp mq mr b">tsc </code>编译时出现的问题与VS代码提示的问题不匹配<br/>找到项目右下角的<code class="fe mo mp mq mr b">Typescript </code>字样，版本号显示在右侧，你可以点击它，选择<code class="fe mo mp mq mr b">Use Workspace Version</code>，表示它始终与项目所依赖的<code class="fe mo mp mq mr b">typescript </code>版本相同。</p><p id="747a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">或者编辑。<code class="fe mo mp mq mr b">vs-code/settings.json</code></p><pre class="kj kk kl km gt ms mr mt mu aw mv bi"><span id="5ab9" class="lq lr it mr b gy mw mx l my mz">{   <br/>    "typescript.tsdk": "node_modules/typescript/lib" <br/>}</span></pre></div><div class="ab cl ns nt hx nu" role="separator"><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx"/></div><div class="im in io ip iq"><p id="4780" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">简而言之，TypeScript增加了代码的可读性和可维护性，并使我们的开发更加优雅。如果你对我的文章感兴趣，可以关注我的<a class="ae nr" href="https://hyhwell.medium.com/" rel="noopener">媒体</a>或者<a class="ae nr" href="https://twitter.com/Maxwell_hyh" rel="noopener ugc nofollow" target="_blank">推特</a>。</p></div><div class="ab cl ns nt hx nu" role="separator"><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx"/></div><div class="im in io ip iq"><h1 id="181c" class="nz lr it bd ls oa ob oc lv od oe of ly jz og ka mb kc oh kd me kf oi kg mh oj bi translated">分级编码</h1><p id="f9ed" class="pw-post-body-paragraph ku kv it kw b kx mj ju kz la mk jx lc ld ml lf lg lh mm lj lk ll mn ln lo lp im bi translated">感谢您成为我们社区的一员！在你离开之前:</p><ul class=""><li id="4e91" class="nb nc it kw b kx ky la lb ld nd lh ne ll nf lp ok nh ni nj bi translated">👏为故事鼓掌，跟着作者走👉</li><li id="27f4" class="nb nc it kw b kx nk la nl ld nm lh nn ll no lp ok nh ni nj bi translated">📰查看更多内容请参见<a class="ae nr" href="https://levelup.gitconnected.com/?utm_source=pub&amp;utm_medium=post" rel="noopener ugc nofollow" target="_blank">升级编码刊物</a></li><li id="dfd0" class="nb nc it kw b kx nk la nl ld nm lh nn ll no lp ok nh ni nj bi translated">🔔关注我们:<a class="ae nr" href="https://twitter.com/gitconnected" rel="noopener ugc nofollow" target="_blank">Twitter</a>|<a class="ae nr" href="https://www.linkedin.com/company/gitconnected" rel="noopener ugc nofollow" target="_blank">LinkedIn</a>|<a class="ae nr" href="https://newsletter.levelup.dev" rel="noopener ugc nofollow" target="_blank">时事通讯</a></li></ul><p id="7ef7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">🚀👉<a class="ae nr" href="https://jobs.levelup.dev/talent/welcome?referral=true" rel="noopener ugc nofollow" target="_blank"> <strong class="kw iu">将像你这样的开发人员安置在顶级创业公司和科技公司</strong> </a></p></div></div>    
</body>
</html>