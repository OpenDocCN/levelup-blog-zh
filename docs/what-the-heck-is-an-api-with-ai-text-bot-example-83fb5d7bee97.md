# API 到底是什么？(用 AI 文字机器人举例)

> 原文：<https://levelup.gitconnected.com/what-the-heck-is-an-api-with-ai-text-bot-example-83fb5d7bee97>

如果你从头到尾读完这篇文章，你会明白:

1.  这个被过度使用的时髦词汇“API”到底是什么意思
2.  我们如何使用 API 轻松做到这一点:

![](img/23481b69b42d38ffcac9f1f7198aa4a0.png)

这篇文章**是为编程初学者**写的，但是如果你在这里是因为你的 CTO 不停地说“集成 API 以提高性能和节约成本”，我想你可能会发现接下来的几分钟也很有帮助。

# API 的模糊、无用的定义

三个字母“API”代表“应用程序编程接口”。以下是您可能习惯看到(但不理解)的定义类型:

> *API 是一种软件中介，允许两个应用程序相互对话*

现在这对我来说是有意义的，但是当我 4 年前写第一行代码时，这种类型的定义是模糊的，没有帮助的。我们需要比这更好的东西。

# 一个帮助我们的类比

API 就像你汽车的用户手册。

假设有一天晚上，你打开汽车，左前大灯熄灭了。真扫兴。在几分钟对你的不幸愤愤不平之后，你意识到你需要尽快解决这个问题以避免被开罚单。但是你需要买哪个灯泡呢？您实际上是如何修复它的？

你有两个选择来解决这些问题:

1.  打开你的汽车手册并阅读它
2.  向当地汽车配件商店的代表寻求帮助

为了这篇文章，我们将开始像真正的软件工程师一样阅读手册( [RTFM](https://en.wikipedia.org/wiki/RTFM) )。

如果我打开我的汽车手册，我会看到车上所有灯的一张漂亮的小图片:

![](img/03b49c7eee2b181c9bd16e533a7168b2.png)

我看到我要修理的灯泡是#2，如果我翻到手册的下一页，它会告诉我我需要的灯泡型号。

![](img/6f9aa0ed65b27943809496cf02222691.png)

作为一名软件工程师，几乎所有事情都是如此，答案通常会引发更多的问题。在这种情况下，我们需要 HID 灯还是卤素灯？既然这不是车辆保养教程，这里就不要深究了。我们会假设(我会确认，因为几周前我换了左前大灯)我们需要卤素灯。对于卤素灯，我们的手册指示我们购买产品编号为 H11 的 12 伏、55 瓦灯泡。在 AutoZone 网站上快速搜索一下，我们就能找到我们需要的东西:

![](img/a837010ceb7fce3f94f7f63bb64b67ed.png)

# 好了，我们差不多谈完车了

同样，这不是汽车维护教程，但是我们的类比对于谈论 API 有一些重要的含义。

我们的汽车手册并不令人兴奋，但它的存在是非常重要的。为了强调拥有汽车手册的重要性，想象以下虚构的场景:

*   2015 年生产 10，000 辆丰田花冠
*   其中 2500 个只能用 12V-65W 的 LED 大灯
*   其中 2500 个只能用 12V-35W 的 HID 大灯
*   其中 2500 只能用 12V-55W 卤素大灯
*   其中 2500 个可以使用任何类型的灯泡

你能想象这会引起怎样的噩梦吗？汽车修理工必须手动打开每一辆 2015 款丰田卡罗拉，看看需要哪种灯泡！

令人欣慰的是，汽车制造商理解“API”的概念，并定义了与每种汽车品牌/型号兼容的特定部件，以便车主、机械师和许多其他人可以用标准化的“语言”进行交流。

# 汽车手册是一个 API

虽然“应用编程接口”并不完全符合我们的类比，但它的*概念*符合。汽车手册展示了 API 的核心概念，并带来了一些主要好处:

*   通过定义一个“API”，一个对汽车内部结构知之甚少的人就能想出如何更换前灯。这个人不需要拆开汽车来搞清楚这一点，不需要“偷工减料”在一起，最重要的是**能够从复杂的汽车工程/设计中受益，而无需与细节互动。**
*   通过定义一个“API”，汽车制造商不需要销售汽车的每一个替换零件。独立的零件制造商可以阅读“API”，弄清楚大灯灯泡的规格，制造它，并销售它。作为车主，你通常有几个不同的灯泡品牌可供选择，这些品牌销售完全相同的零件。

此外，通过这种类比，我们可以讨论“API”的主要属性:

1.  **一个 API 很简单**——没人想拥有一辆需要 20 步才能换一个大灯的车。
2.  **API 是可预测的**——如果手册上说灯泡可以工作，那它最好能工作！
3.  **一个 API 是向后兼容的** —如果一辆 2015 款丰田卡罗拉发布时要求 12V-55W 卤素近光灯，那么它应该永远要求同样的灯光。如果制造商想要改变所需的灯光，他们将发布一款新的“版本”的汽车(即 2016 款丰田卡罗拉)。
4.  **API(通常)遵循标准**——没有人想买一辆与市场上其他汽车使用不同灯泡的汽车。这不仅会推高灯泡的价格，而且很难找到卖灯泡的地方。
5.  **API 是有据可查的** —虽然机械师比车主更有可能阅读汽车手册，但手册中描述所需零件和更换大灯的过程非常重要。如果这没有被记录下来，“API”更有可能被破坏，因为你会让业主和技工猜测他们应该如何更换灯泡。

虽然我从汽车的角度描述了这些属性，但是您很快就会发现它们也适用于软件 API。软件 API 也有汽车“API”所没有的属性，比如安全性、可伸缩性、原子性，以及其他一些我们不需要在本文中讨论的属性。

# 软件 API 可以是很多东西

虽然我们的汽车“API”传达了*概念*，但软件 API 有许多细微差别。在这篇文章的剩余部分，我将把我们从基本的汽车例子过渡到对应用程序编程接口的更精确的理解。当我们这样做的时候，让我们的汽车比喻在你的头脑中保持新鲜。以下是我们需要涵盖的一些内容:

1.  API 可以在不同的抽象层次上讨论
2.  API 可以遵循各种标准(SOAP、REST、RPC 等。)
3.  API 可以通过许多属性进行分类(开放、封闭、复合、合作伙伴等)。)

以上三点使得将这个概念归结为一个单一的定义极其困难(如果不是不可能的话)。此外，作为软件工程的新手，每一点中的许多细节对你来说不会也不应该是重要的。

下面是我对软件 API 的*一般*定义，我们可以回头来看，但要有所保留。就像上面讨论的那样，API 并不是生来平等的！

> *软件 API 可以被认为是“用户手册”,它允许开发者在不了解第三方软件/硬件内部工作原理的情况下，使用第三方软件/硬件做一些有用的事情。*

以上定义是我对 API 的看法。我认为每个开发人员对 API 的理解和定义都略有不同，你最终也会达到这一点。

停下来。我只想花一点时间问问你是否愿意加入我的邮件列表？这是免费的，如果你喜欢我的内容，这是保持联系的好方法:)谢谢。回到岗位👉

# API 和无限的抽象层次

这个概念不仅仅适用于 API。你写的软件越多，你就越能意识到你的大脑“抽象”概念的频率。

如果我们抓住主题，通过汽车类比来解释这一点，我们可以想到当今大多数汽车的自动变速器。

![](img/869ae1db0d8f9658e4f89292b6e7f7e7.png)

告诉我…需要多少脑力才能让你的车处于“驾驶”模式？

非常少。任何开了一段时间车的人都可以在换档时与乘客进行充分的交谈。作为一名司机，当你换挡时，你不需要知道汽车引擎盖下发生了什么——你只需要换挡！这是因为换档的行为是从驾驶员那里“抽象”出来的。如果你愿意，你可以沿着“抽象链”一路向下，直到制造汽车所需的最细微的细节。虽然汽车司机不需要了解自动变速器，但机械师需要。此外，机械师可能需要了解自动变速器如何工作，但不需要知道用于汽车零件的金属是如何从地球上提取的。更进一步说，从地球上提取金属的人可能不需要地质学博士学位。

就像我们可以在不同的抽象层次上谈论汽车的自动变速器一样，我们也可以在不同的抽象层次上谈论 API。以下是一些常见的抽象层次，你可能会听到有人提到某个 API(从最高到最低):

1.  **“我们公司使用 API 来连接我们的后端基础设施”(最高)** —在最高抽象级别，我们可以将 API 称为允许各种应用程序和基础设施进行通信的“技术”。在当今世界，一家公司可能会运行 50 个不同的应用程序，但如果没有 API，他们就无法共享数据和创建一个有凝聚力的软件生态系统。
2.  **“我的生产力应用程序使用谷歌日历 API 根据用户任务自动安排事件”** —在这种情况下，谷歌运行一个日历应用程序，该应用程序具有一个 API，其他开发人员可以使用该 API 以编程方式使用它。
3.  **“我需要通读这个代码库的 API，然后才能有效地使用它”** —假设我想使用 Express JS 框架为我的 web app 构建一个后端流程。该框架旨在以一种非常特定的方式使用，这通过他们的“API 参考”[这里的](https://expressjs.com/en/api.html)来记录。
4.  **“这个函数有一个由它的参数和返回值定义的非常特殊的 API”**—这里扔给你一点代码:

如果你真的要写一个抵押计算器函数，你需要几行代码。但是如果你只是在使用函数的*，你不应该关心它是如何实现的。你应该关心的是由函数的 API 定义的*输入*和*输出*。该函数要求您定义一个利率、房价和贷款期限，它们的数据类型都是`number`。这个函数返回一个代表你每月按揭付款的`number`。这些输入和输出定义代表了函数的 API。*

5.**我电脑上的硬件有一个特定的 API，所有代码语言都必须兼容“(最低)** —上面的代码需要转换成 1 和 0，才能在你用来读取这些内容的设备上实际运行。每台计算机(硬件设备)都有一个 API，它定义了应该如何调用低级操作系统函数。我们不会深入讨论这个问题，因为它会很快变得非常复杂。

正如你所看到的，两个人说“API”可能不是在说同一件事，更令人困惑的是，API 可以存在于其他 API 中。当这不可避免地让你感到沮丧时，只要记住我们对 API 的一般定义。

> *软件 API 可被视为“用户手册”,允许开发人员在不了解第三方软件/硬件内部工作原理的情况下，使用该软件/硬件做一些有用的事情。*

# API 标准

我们不会长时间讨论这个话题，但是当你开始开发软件时，你肯定会听到其他开发人员谈论 RESTful APIs，在某些情况下，还有 SOAP APIs 和 RPC apis。

当你听到有人谈论 REST(表述性状态转移)API 时，他们只是指创建 API 的标准化方法。

把这些当做“行业标准”。回到我们的汽车和灯泡的例子，如果所有的汽车制造商都需要完全独特的灯泡，就不会有足够的零件供应商来生产所有不同的灯泡。许多不同的汽车使用几个标准灯泡，整个行业就更有效率了。有了实现 API(如 REST)的标准化方法，软件行业可以更有效地运作，因为像你我这样的开发人员只需学习一些不同的标准，就可以开始使用各种 API，如 Google Calendar API(使用 RESTful APIs)。

# API 的许多分类

正如您在这里所了解到的，缩写“API”是一个很有内涵的话题，正因为如此，我们很难理解它也就不足为奇了。除了 API 可以遵循的标准和抽象级别之外，我们还可以将不同的 API 分成不同的类别。这里有 3 个相对常见且易于理解的分类，但肯定不能代表您可能找到的所有内容。

1.  开放 API(例如谷歌日历 API)
2.  专有 API(例如 Salesforce API)
3.  内部 API(例如，工程师编写自定义 API 来连接公司的许多软件系统)

与其描述它们，不如让我们问问为什么有人会创造这些。

## 为什么要创建开放 API？

假设你是谷歌的首席执行官，你必须决定谷歌日历 API 应该是开放的还是专有的。如果你把它做成专有的，用户会得到你公司能提供的体验，就这样。如果你让它开放/公开，全球的开发者可以将他们的产品与谷歌日历集成。

例如，一个生产力应用程序可能想要向用户显示他们的周计划，以及他们的待办事项和目标。如果谷歌有一个开放的 API，而 Outlook 没有，这个生产力应用程序最有可能将他们的产品与谷歌集成。当使用生产力应用程序的人看到这种集成时，他们更有可能继续使用或开始使用谷歌日历服务。对所有人来说都是双赢，从某种意义上来说，谷歌免费外包了开发者！

# 说到开放 API，是时候进行一些文本分析了

我们可以整天讨论 API 的分类方法，但是学习 API 的最好方法是看一个真实的例子。我将要向您展示的只是 API 的一个例子，但是它很好地展示了我们已经讨论过的概念。

如果你还记得前面的话，**API 允许开发者使用第三方软件*做一些有用的事情，而*不知道软件是如何实现的**。驾驶汽车的人不需要知道汽车的自动变速器如何工作来停车。

在这种情况下，我们将使用 Google Vision API，它由成千上万行我们从来不需要通读的代码组成！我们不需要成为机器学习专家——我们只需要学会如何使用 API。当我们完成后，我们将能够从图像中识别文本:

![](img/16021796145ac75cea9ea60098335fc5.png)

# 概述:什么是 Vision API？

谷歌视觉 API 是一个由谷歌维护的开源项目，它允许你做一些事情，比如在人群中检测人脸，检测地标，从图像中读取文本，检测图像中的标志，以及[等等](https://cloud.google.com/vision/docs/setup?hl=bg)。如果你对软件工程完全陌生，Vision 项目就是机器学习和人工智能的一个例子；类似于 Alexa 在你家里工作的概念。

我不会向您展示我为让 Vision API 正常工作而采取的一堆代码或详细步骤，但会重点介绍我为获得最终产品而采取的主要措施。

# 第一步:阅读文件

当开始使用任何新的 API 时，您总是要做的第一件事就是查看它们的文档。还记得我说过 API 的属性是好的文档吗？这就是房产发挥作用的地方。如果该 API 的文档很好，您应该能够在几分钟内开始运行。谷歌视觉 API 有一个很棒的[快速入门指南](https://cloud.google.com/vision/docs/quickstarts)，我用它在 20 分钟内提出了我的第一个 API 请求。

# 步骤 2:决定如何将 API 集成到项目中

在我的例子中，我想创建一个简单的 web 应用程序，就像你在上面的 GIF 中看到的那样。为此，我使用了以下工具，我已经知道如何使用这些工具。为了使用这个 API，我可以使用几种不同的编码语言和工具，但是这些恰好是我最熟悉的。

1.  快速框架(用于后端)
2.  角形框架(用于前端)
3.  角度材料库(用于造型)

我用`ng new`命令行工具搭建了一个新的 Angular 项目，并使用 [Google Vision 示例](https://cloud.google.com/vision/docs/libraries#using_the_client_library)和[参考文档](https://googleapis.dev/nodejs/vision/latest/v1.ImageAnnotatorClient.html#textDetection)创建了以下函数(如果您是软件新手，不要担心它是如何工作的):

用 Node SDK 实现 Google Vision API

信不信由你，这是我为了让 Google Vision API 工作而需要编写的唯一代码！我写的所有其他代码([这里是我的 Github repo](https://github.com/zachgoll/google-vision-api-example) )只是让 Angular 应用程序运行，与我的后端服务器对话，并设计应用程序的样式！

# 步骤 3:添加功能

虽然我保持这个例子简单，但是您可以使用 Google Vision API 向您的 web 应用程序添加大量其他功能。在 1000 个 API 请求之后，Google 会开始向你收费，但是 API 并不总是这样！有很多免费的 API 没有使用限制。

# 大图评论

虽然这篇文章涵盖了许多不同的主题，甚至提供了一个 API 的真实例子，但是请记住，API 更多的是一个*想法*而不是一个具体的*东西*。当你学习编码时，记住这一点，在适当的时候，你会更好地理解什么是 API，以及它如何应用于你的特定角色。

# 如果你喜欢这篇文章并且想要更多…

让您的旅程继续的一些额外服务:

*   加入[我的邮件列表](https://lists.zachgollwitzer.com/learn-to-code/)保持联系
*   另一个你可能会喜欢的帖子— [做程序员一定要数学好吗？](https://zach-gollwitzer.medium.com/do-you-have-to-be-good-at-math-to-become-a-programmer-cced7b61ed7b)
*   如果你正在学习编码，[这是一本很棒的书](https://amzn.to/3jGPyKO)

*原载于 2020 年 10 月 30 日 https://www.zachgollwitzer.com*[](https://www.zachgollwitzer.com/posts/what-is-an-api/)**。**