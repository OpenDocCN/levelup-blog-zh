<html>
<head>
<title>How To Download Google Images, Using Python (2021)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Python下载谷歌图片(2021)</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-download-google-images-using-python-2021-82e69c637d59?source=collection_archive---------0-----------------------#2021-01-21">https://levelup.gitconnected.com/how-to-download-google-images-using-python-2021-82e69c637d59?source=collection_archive---------0-----------------------#2021-01-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="53b2" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">我将向您展示如何使用Python中的几行代码在几秒钟内下载数百张Google图片</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/e4ac2f9644cdfe4aadc8e7ee5207ede5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A-R404h0y4zNG_ZqYQDPuA.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">照片来自Unsplash，作者:<a class="ae ky" href="https://unsplash.com/photos/QvMRSTkc518" rel="noopener ugc nofollow" target="_blank"> Philippe Oursel </a></figcaption></figure><p id="528d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可能和我在同一条船上。我需要谷歌图片中的一堆图片，但我懒得手动下载每一张。因此，我在网上搜寻答案，但一无所获。</p><p id="f353" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">那时，我决定尝试自己做这件事，并编写一个程序，从Google images下载多张图片。</p><p id="7763" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">令人惊讶的是，我成功地用Python编写了一段代码，可以在几秒钟内下载数百张图片。</p><p id="d447" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我想教你如何做同样的事，所以让我给你看…</p><p id="963d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">如何使用Python下载谷歌图片。</strong></p><h1 id="f027" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">步骤1:硒</h1><p id="a94e" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">首先，我下载这些图片的方法是使用一个名为Selenium的库。Selenium是一个库，允许您与网页进行交互，例如；向收件箱发送文本、点击按钮和自动滚动，所有这些都是通过代码实现的。</p><p id="f51a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，您需要做的第一步是安装Selenium和一个web驱动程序。</p><p id="9a1a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">没有必要担心，因为安装非常容易，我甚至制作了一个4分钟的短片，向你展示如何安装。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="05ca" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">看完视频，安装了Selenium并下载了web驱动程序后，您的前几行应该导入Selenium并启动驱动程序，如下所示…</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="1089" class="mz lw it mv b gy na nb l nc nd">#Imports Packages<br/>from selenium import webdriver<br/>from selenium.webdriver.common.keys import Keys<br/>import time </span><span id="3a2e" class="mz lw it mv b gy ne nb l nc nd">#Opens up web driver and goes to Google Images<br/>driver = webdriver.Chrome('C:/Web Scraping course/chromedriver.exe')<br/>driver.get('https://www.google.ca/imghp?hl=en&amp;tab=ri&amp;authuser=0&amp;ogbl')</span></pre><p id="77ff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当上面的代码行运行时，一个新的浏览器应该已经打开并转到Google Images网页。</p><h1 id="0da8" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">步骤2:与谷歌主页互动</h1><p id="96df" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">就像我上面说的，Selenium的伟大之处在于你可以通过下载的驱动程序与网页进行交互。因此，您将要编写的下一段代码会将文本输入到Google Images搜索栏中。</p><p id="ad03" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为此，您需要找到页面上搜索栏的位置。这是通过查找搜索栏的Xpath来完成的。</p><p id="beae" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要找到Xpath，您需要打开web页面的HTML，方法是单击页面上的任意位置，然后按inspect。</p><p id="5ded" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你这样做是正确的，你的网页应该看起来像下面的图片。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nf"><img src="../Images/9a4f74c79d82dc1cdab95c7281008ccc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GCYyzRYI05sXbkwEEu-wLw.jpeg"/></div></div></figure><p id="49d8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，您必须找到对应于Google搜索栏的HTML代码。为此，单击刚刚弹出的框左上角的图标。看起来是这样的…</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/9d6e0dffeaee3e78be5dcc925bb1cbaa.png" data-original-src="https://miro.medium.com/v2/resize:fit:200/format:webp/0*AaDPBfrzeqpH_9A2.png"/></div></figure><p id="2bd1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后点击谷歌图片搜索框。完成后，右边的HTML将会更新，一段HTML代码会以蓝色突出显示…</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nh"><img src="../Images/8e0285021d2db5e4fb3357de297082e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:814/format:webp/1*M3kHR7HiF-OqKUgTEBQWfQ.jpeg"/></div></div></figure><p id="ca84" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要获取搜索栏的Xpath，只需右击高亮显示的蓝色文本，然后按“复制Xpath”。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/c620459b6982fd830ba5195b40610ef5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1136/format:webp/1*GUJatSvSR6u7pT4Mbja_qQ.jpeg"/></div></figure><p id="cdd6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在你已经有了Google Image搜索栏的Xpath，回到Python，输入下面的代码，然后把你刚才复制的Xpath作为一个字符串粘贴到括号里。</p><p id="2a20" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">注意:</strong>当你粘贴Xpath时，它不会在一个字符串中，你必须在Xpath的开头和结尾加上逗号，使它成为一个字符串。</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="ee6c" class="mz lw it mv b gy na nb l nc nd">box = driver.find_element_by_xpath(#Paste Xpath here)</span></pre><p id="7f87" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它应该看起来像这样…</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="5cb3" class="mz lw it mv b gy na nb l nc nd">box = driver.find_element_by_xpath('//*[<a class="ae ky" href="http://twitter.com/id" rel="noopener ugc nofollow" target="_blank">@id</a>="sbtc"]/div/div[2]/input')</span></pre><h2 id="97c3" class="mz lw it bd lx nj nk dn mb nl nm dp mf li nn no mh lm np nq mj lq nr ns ml nt bi translated">选择主题</h2><p id="9b00" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">现在我们有了Google Image搜索框的Xpath，我们可以编写一些代码向其中输入文本。</p><p id="3c66" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设我想下载长颈鹿的图片。因此，这就是我要在搜索框中输入的内容。下面的代码会把长颈鹿输入搜索框，按回车键正式搜索。</p><p id="cf4a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要更改主题，只需将下面代码中的giraffe替换为您想要搜索的内容。</p><pre class="kj kk kl km gt mu mv mw mx aw my bi"><span id="5dc3" class="mz lw it mv b gy na nb l nc nd">box.send_keys('giraffe')<br/>box.send_keys(Keys.ENTER)</span></pre><h1 id="ad82" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">步骤3:向下滚动网页</h1><p id="8366" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">谷歌图片是一个无限滚动的网页。这意味着当你继续向下滚动网页时，新的图像会加载进来，直到没有图像了。</p><p id="2530" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，如果我们想下载数百张图片，我们必须首先通过向下滚动将它们加载到网页中。</p><p id="d5de" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">很明显，你不想手动操作，我也不想手动操作。因此，我创建了一个代码块，它将一直向下滚动网页，直到不再有图像需要加载。</p><p id="1aa4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">只需复制下面的代码，并将其粘贴到您的Python脚本中。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nu mt l"/></div></figure><h1 id="6558" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">步骤4:下载图像</h1><p id="bcb4" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">最后一步是正式下载图片，但我们不会真的下载它们，我们会截屏。</p><p id="7c2d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Selenium有一个名为screen down的特殊功能，可以将图像截图并保存到一个特定的文件中，就像你正在下载它们一样。</p><p id="accd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们需要获得的唯一信息是图像的Xpath。现在你已经知道怎么做了。</p><p id="5521" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">右键单击页面上的任意位置，然后按inspect。会弹出当前网页的HTML。然后选择我在步骤2中告诉你按下的图标，然后点击页面上的第一个图像。</p><p id="d4db" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果操作正确，HTML将会更新，并且会有一段HTML代码以蓝色突出显示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nv"><img src="../Images/c53f58090b075e31cdfcb7b33980c041.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FW13LmVCOpdLIoTqo1F2bg.jpeg"/></div></div></figure><p id="c6ce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如您在步骤2中所做的，复制用蓝色突出显示的代码的Xpath。</p><p id="6138" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在Xpath主要只用于第一幅图像。要获得其他图像的Xpath，我们所要做的就是改变1个数字。</p><p id="23b0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，您复制的Xpath应该如下所示:</p><ul class=""><li id="bee1" class="nw nx it lb b lc ld lf lg li ny lm nz lq oa lu ob oc od oe bi translated">//*[<a class="ae ky" href="http://twitter.com/id" rel="noopener ugc nofollow" target="_blank">@ id</a>= " islrg "]/div[1]/div[<strong class="lb iu">1</strong>]/a[1]/div[1]/img</li></ul><p id="4b48" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要切换到第二张图片的Xpath，您所要做的就是将上面加粗的数字改为2，就像这样。</p><ul class=""><li id="0046" class="nw nx it lb b lc ld lf lg li ny lm nz lq oa lu ob oc od oe bi translated">//*[<a class="ae ky" href="http://twitter.com/id" rel="noopener ugc nofollow" target="_blank">@ id</a>= " islrg "]/div[1]/div[<strong class="lb iu">2</strong>]/a[1]/div[1]/img</li></ul><p id="51b2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">…您继续这样做，以获得页面上第3、4、5、10张图像的Xpath。</p><p id="30bf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，我们将创建一个for循环，每次将这个数字增加1，以获得不同图像的Xpath。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nu mt l"/></div></figure><p id="cc5d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">既然上面的代码遍历了所有图像的Xpath，我们现在可以使用截图功能将它们保存在一个文件中。</p><p id="ab44" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们通过添加<strong class="lb iu">来做到这一点。截图()</strong>到我们的驱动程序行的末尾，输入一个文件路径到你想要保存图像的空括号中。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nu mt l"/></div></figure><p id="7a98" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">给你总结一下，上面的代码会对Google Images上的前100张图片进行截图(你可以通过改变for循环来改变这个数字)。然后，它会将每个图像保存在我指定的文件夹中，如长颈鹿(1)，长颈鹿(2)，长颈鹿(3)，等等。</p><p id="1a42" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，当我运行这段代码时，我保存图像的文件夹看起来像这样…</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi of"><img src="../Images/95102924101814931b252e1bbfa7e2b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8tWv7o04jINuFLRNJ8gbnA.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">有些可能并不完美，但大多数都是如此</figcaption></figure><p id="df1a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">祝贺你！</strong>如果你做的一切都正确，你现在应该可以使用Python下载谷歌图片了。</p><h1 id="b3d6" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">迷茫？想看这篇文章的视频吗</h1><p id="1a9b" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">如果你在阅读这篇文章的时候有一些困惑，你应该看看我在YouTube频道上发布的关于<strong class="lb iu">的一步一步的教程。</strong></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ms mt l"/></div></figure><h1 id="688d" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">访问此代码的干净版本</h1><p id="bd05" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">如果你想获得创建这篇文章所使用的代码的一个完全干净的评论版本，你可以加入我的群<strong class="lb iu"> "Clean Code Z" </strong>，通过加入，你将获得我在所有文章和视频中使用的代码的干净版本。</p><p id="8b55" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感受感受加入这里:<a class="ae ky" href="http://wondrous-originator-2391.ck.page/christopherzita/cleancodez" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">干净代码Z </strong> </a></p></div></div>    
</body>
</html>