<html>
<head>
<title>Making an interactive password validator — WotW</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">制作交互式密码验证器——WotW</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/making-an-interactive-password-validator-wotw-77b677548b75?source=collection_archive---------0-----------------------#2018-07-31">https://levelup.gitconnected.com/making-an-interactive-password-validator-wotw-77b677548b75?source=collection_archive---------0-----------------------#2018-07-31</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/6f347f63273f619aa2e285bc98e10085.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*JgdfiZOW6WozNVoY.jpg"/></div></div></figure><p id="439f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">欢迎来到“每周小部件”系列，在这里我拍摄了令人敬畏的UI/UX组件的gif或视频，并用代码将它们赋予生命。</p><p id="8704" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">今天，我们将创建一个密码提交表单，实时验证用户输入。</p><blockquote class="kw"><p id="4351" class="kx ky iq bd kz la lb lc ld le lf kv dk translated"><em class="lg">查看所有本周文章</em> <a class="ae lh" rel="noopener ugc nofollow" target="_blank" href="https://levelup.gitconnected.com/wotw/home"> <em class="lg">小部件</em> </a> <em class="lg">并关注gitconnected，确保您不会错过任何即将到来的JavaScript和CSS教程</em></p></blockquote><p id="2110" class="pw-post-body-paragraph jy jz iq ka b kb li kd ke kf lj kh ki kj lk kl km kn ll kp kq kr lm kt ku kv ij bi translated">灵感来自于由<a class="ae lh" href="https://dribbble.com/saptarshipr" rel="noopener ugc nofollow" target="_blank"> Saptarshi Prakash </a>创作的这个<a class="ae lh" href="https://dribbble.com/shots/4755212-Password-Guide" rel="noopener ugc nofollow" target="_blank">投稿</a>，看起来是这样的:</p><figure class="lo lp lq lr gt jr gh gi paragraph-image"><div class="gh gi ln"><img src="../Images/15c3122d0578744ec108f9bac1cc754e.png" data-original-src="https://miro.medium.com/v2/resize:fit:728/0*2-JnRN6ARKsvSZcW.gif"/></div></figure><h2 id="12dc" class="ls lt iq bd lu lv lw dn lx ly lz dp ma kj mb mc md kn me mf mg kr mh mi mj mk bi translated">准备</h2><p id="2f16" class="pw-post-body-paragraph jy jz iq ka b kb ml kd ke kf mm kh ki kj mn kl km kn mo kp kq kr mp kt ku kv ij bi translated">对于今天的小部件，我们将使用<a class="ae lh" href="https://vuejs.org/" rel="noopener ugc nofollow" target="_blank"> Vue.js </a>，对于一些动画，我们将使用<a class="ae lh" href="https://greensock.com/tweenmax" rel="noopener ugc nofollow" target="_blank"> TweenMax </a>。</p><p id="4d2f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你想继续，你可以派生这个已经有依赖关系的<a class="ae lh" href="https://codepen.io/ederdiaz/pen/gzyxWv" rel="noopener ugc nofollow" target="_blank"> codepen模板</a>。</p><h2 id="f91f" class="ls lt iq bd lu lv lw dn lx ly lz dp ma kj mb mc md kn me mf mg kr mh mi mj mk bi translated">加价</h2><p id="8bb9" class="pw-post-body-paragraph jy jz iq ka b kb ml kd ke kf mm kh ki kj mn kl km kn mo kp kq kr mp kt ku kv ij bi translated">我总是试图尽可能地匹配设计，但在这种情况下，有些图形无法完成，除非我花几个小时使用矢量编辑程序来生成它们，所以我会匹配最重要的交互和动画元素。</p><p id="9efa" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们首先为我们的主div设置一个<code class="fe mq mr ms mt b">app-container</code>类，因为我们需要对它进行样式化。下面我们应该有一个<code class="fe mq mr ms mt b">title</code>和<code class="fe mq mr ms mt b">subtitle</code>来对应我们的小部件的指令</p><pre class="lo lp lq lr gt mu mt mv mw aw mx bi"><span id="d841" class="ls lt iq mt b gy my mz l na nb">&lt;div id="app" class="app-container"&gt;<br/>  <br/>  &lt;h1 class="title"&gt;Set a Password&lt;/h1&gt;<br/>  &lt;p class="subtitle"&gt;Must contain at least&lt;/p&gt;</span></pre><p id="a850" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在对于规则列表，我们将制作一个<code class="fe mq mr ms mt b">rules-container</code>，然后为<code class="fe mq mr ms mt b">pink-line</code>制作一个空的div，这将使它看起来像一个笔记本工作表。</p><pre class="lo lp lq lr gt mu mt mv mw aw mx bi"><span id="bff6" class="ls lt iq mt b gy my mz l na nb">&lt;div class="rules-container"&gt;<br/>    &lt;div class="pink-line"&gt;&lt;/div&gt;</span></pre><p id="d394" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">接下来，我们将为我们的<code class="fe mq mr ms mt b">rules-list</code>使用一个无序列表。它将包含四个<code class="fe mq mr ms mt b">rules-items</code>,每个都有一个用于标签的<code class="fe mq mr ms mt b">rule-text</code>和一个空的<code class="fe mq mr ms mt b">green-line</code>,当满足时将越过规则。</p><pre class="lo lp lq lr gt mu mt mv mw aw mx bi"><span id="6ef0" class="ls lt iq mt b gy my mz l na nb">&lt;ul class="rules-list"&gt;<br/>      &lt;li class="rule-item"&gt;<br/>        &lt;div&gt;<br/>          &lt;span class="rule-text"&gt;1&lt;/span&gt;          <br/>        &lt;/div&gt;<br/>        &lt;div class="green-line"&gt;&lt;/div&gt;<br/>      &lt;/li&gt;<br/>      <br/>      &lt;li class="rule-item"&gt;<br/>        &lt;div&gt;<br/>          &lt;span class="rule-text"&gt;2&lt;/span&gt;          <br/>        &lt;/div&gt;<br/>        &lt;div class="green-line"&gt;&lt;/div&gt;<br/>      &lt;/li&gt;<br/>      <br/>      &lt;li class="rule-item"&gt;<br/>        &lt;div&gt;<br/>          &lt;span class="rule-text"&gt;3&lt;/span&gt;          <br/>        &lt;/div&gt;<br/>        &lt;div class="green-line"&gt;&lt;/div&gt;<br/>      &lt;/li&gt;<br/>      <br/>      &lt;li class="rule-item"&gt;<br/>        &lt;div&gt;<br/>          &lt;span class="rule-text"&gt;4&lt;/span&gt;          <br/>        &lt;/div&gt;<br/>        &lt;div class="green-line"&gt;&lt;/div&gt;<br/>      &lt;/li&gt;<br/>    &lt;/ul&gt;<br/>  &lt;/div&gt; &lt;!-- rules-container --&gt;</span></pre><p id="9120" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">最后但同样重要的是，我们将制作一个包含密码输入及其提交按钮的表单:</p><pre class="lo lp lq lr gt mu mt mv mw aw mx bi"><span id="977d" class="ls lt iq mt b gy my mz l na nb">&lt;form&gt;<br/>    &lt;input class="password-input" type="password"&gt;<br/>    &lt;button class="save-button" type="submit"&gt;<br/>      &lt;strong&gt;SAVE&lt;/strong&gt;<br/>    &lt;/button&gt;<br/>  &lt;/form&gt;<br/>  <br/>&lt;/div&gt; &lt;!-- app-container --&gt;</span></pre><p id="2906" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们应该有一个非常基本的无样式表单，就像这样:</p><figure class="lo lp lq lr gt jr gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/4e96f220212f1de80b329733ee92b21b.png" data-original-src="https://miro.medium.com/v2/resize:fit:880/format:webp/0*SHvfzDHolKnejQiK.png"/></div></figure><h2 id="6b58" class="ls lt iq bd lu lv lw dn lx ly lz dp ma kj mb mc md kn me mf mg kr mh mi mj mk bi translated">让它看起来很漂亮</h2><p id="7882" class="pw-post-body-paragraph jy jz iq ka b kb ml kd ke kf mm kh ki kj mn kl km kn mo kp kq kr mp kt ku kv ij bi translated">我们还有一些工作要做，因为现在我们的小部件看起来一点也不像最初的帖子。</p><p id="9ea0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们从<code class="fe mq mr ms mt b">app-container</code>开始。</p><p id="0e56" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我将宽度固定为<code class="fe mq mr ms mt b">320px</code>并居中。此外，我将设置文本的白色和字体。然后只是一个渐变的背景色来匹配参考。</p><pre class="lo lp lq lr gt mu mt mv mw aw mx bi"><span id="e425" class="ls lt iq mt b gy my mz l na nb">.app-container {<br/>  width: 320px;<br/>  margin: 0 auto; /* center */<br/>  color: white;<br/>  font-family: Arial, Helvetica, sans-serif;<br/>  background: linear-gradient(#553096, #40266D); /* purple gradient background */<br/>}</span></pre><p id="6b97" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">下一步是设计文本标题的样式。这实际上非常简单，我们只需要将它们居中并调整大小、边距和填充。</p><pre class="lo lp lq lr gt mu mt mv mw aw mx bi"><span id="d766" class="ls lt iq mt b gy my mz l na nb">.title {<br/>  text-align: center;<br/>  padding-top: 20px;<br/>  font-size: 20px;<br/>  margin-bottom: 0;<br/>}<br/>.subtitle {<br/>  text-align: center;<br/>  color: rgba(255, 255, 255, 0.5); /* semitransparent */<br/>  font-size: 14px;<br/>  margin: 0;<br/>}</span></pre><p id="dc9d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe mq mr ms mt b">rules-container</code>将是我们的“纸张”,所以它应该有一个白色的背景颜色，一些<code class="fe mq mr ms mt b">border-radius</code>用于圆角，固定宽度的<code class="fe mq mr ms mt b">200px</code>也将居中。它还应该有一个轻微的角度，<code class="fe mq mr ms mt b">transform: rotate</code>应该做到这一点:</p><pre class="lo lp lq lr gt mu mt mv mw aw mx bi"><span id="547b" class="ls lt iq mt b gy my mz l na nb">.rules-container {<br/>  width: 200px;<br/>  margin: 0 auto; /* center */<br/>  margin-bottom: 30px;<br/>  color: #2A1E49;<br/>  background-color: white;<br/>  border-radius: 5px;<br/>  transform: rotate(-3deg);<br/>}</span></pre><p id="cbd9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在对于规则，我们将使用填充和边距来设置间距。我们不想看到默认的列表要点，所以<code class="fe mq mr ms mt b">list-style-type: none</code>会处理好。蓝色的<code class="fe mq mr ms mt b">border-bottom</code>也有助于笔记本的线条。</p><pre class="lo lp lq lr gt mu mt mv mw aw mx bi"><span id="af7b" class="ls lt iq mt b gy my mz l na nb">.rules-list {<br/>  padding: 15px 0 10px 0;<br/>}<br/>.rule-item {<br/>  position: relative;<br/>  list-style-type: none; /* remove bullets */<br/>  width: 100%;<br/>  margin-bottom: 5px;<br/>  border-bottom: solid blue 1px;<br/>}<br/>.rule-text {<br/>  /* set text beside the pink line */<br/>  margin-left: 25px;<br/>}</span></pre><p id="a700" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在对于线条，两者都有一个绝对位置，因为它们需要自由地放置在元素之上。</p><p id="8d3c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">对于粉红色的线，高度是一种尝试和错误，因为它取决于规则的数量，所以如果您计划添加或删除规则，您应该改变它。</p><p id="2eea" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">绿线是不同的，因为它出现在每个规则中，应该准备好穿过它们，在这种情况下，我们将从没有穿过的规则开始，因此默认宽度将是<code class="fe mq mr ms mt b">0</code>。</p><pre class="lo lp lq lr gt mu mt mv mw aw mx bi"><span id="6742" class="ls lt iq mt b gy my mz l na nb">/* pink left line to make the list look like a notebook sheet */<br/>.pink-line {<br/>  position: absolute;<br/>  border-left: solid #f84194 1px;<br/>  height: 120px; /* depends on container height */<br/>  left: 18px;<br/>}<br/>/* line that croses each rule */<br/>.green-line {<br/>  position: absolute;<br/>  background-color: #32B997;<br/>  height: 3px;<br/>  top: 8px;<br/>  left: 22px;<br/>  transform: rotate(2deg);<br/>  width: 0; /* starting width so it doesn't show */<br/>}</span></pre><p id="1e90" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为了完成我们组件的样式，我们需要设置<code class="fe mq mr ms mt b">password-input</code>和<code class="fe mq mr ms mt b">save-button</code>的样式。它们有一些非常简单的规则，比如删除这些元素的默认边框和轮廓，计算中心，字体大小等等。最有趣的部分是关于<code class="fe mq mr ms mt b">save-button</code>，它有一个能够使背景颜色动画化的过渡属性，以及一个<code class="fe mq mr ms mt b">valid</code>类规则，当表单被验证并且没有问题时，该规则应该被改变。</p><pre class="lo lp lq lr gt mu mt mv mw aw mx bi"><span id="b655" class="ls lt iq mt b gy my mz l na nb">.password-input {<br/>  width: 220px;<br/>  outline: none;<br/>  border: none;<br/>  padding: 8px 10px 10px;<br/>  border-radius: 2px;<br/>  margin-bottom: 30px;<br/>  margin-left: calc(50% - 120px);<br/>  font-size: 20px;<br/>}<br/><br/>.save-button {<br/>  outline: none;<br/>  border: none;<br/>  width: 100%;<br/>  padding: 10px;<br/>  color: rgba(0, 0, 0, 0.4);<br/>  font-size: 17px;<br/>  background-color: #EDEDED;<br/>  transition: background-color .3s; /* will animate the backround color when the class changes*/<br/>}<br/>.save-button.valid {<br/>  background-color: #F9B800;<br/>  cursor: pointer;<br/>}</span></pre><p id="ec92" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们现在应该有一个外观漂亮的小部件，如下所示:</p><figure class="lo lp lq lr gt jr gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/ee44612585ada9e8e8bb5c980486b8ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:564/format:webp/0*wTW8Ls0O90aAQ4iy.png"/></div></figure><h2 id="5060" class="ls lt iq bd lu lv lw dn lx ly lz dp ma kj mb mc md kn me mf mg kr mh mi mj mk bi translated">互动</h2><p id="46ce" class="pw-post-body-paragraph jy jz iq ka b kb ml kd ke kf mm kh ki kj mn kl km kn mo kp kq kr mp kt ku kv ij bi translated">现在有趣的部分来了，让我们来编写小部件交互的代码。在进入Vue实例之前，我将创建一个对象来帮助我们使用密码验证规则。</p><p id="b1a3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在原始gif中，密码需要8个字符长，并且有1个特殊字符、1个大写字母和1个数字。第一条规则可以很容易地通过比较密码字符串的长度来检查，但是其余的规则需要一些正则表达式来很容易地检测密码是否包含这些字符。</p><pre class="lo lp lq lr gt mu mt mv mw aw mx bi"><span id="4ec6" class="ls lt iq mt b gy my mz l na nb">const specialCharsRegex = /[!@#$%^&amp;*()_+\-=\[\]{};':"\\|,.&lt;&gt;\/?]/<br/>const upperCaseRegex = /[A-Z]/<br/>const numberRegex = /[0-9]/<br/><br/>const validationRules = [<br/>  {<br/>    label: '8 Characters', <br/>    validate: input =&gt; input.length&gt;=8,<br/>    labelWidth: 100 // this depends on the label length<br/>  },<br/>  {<br/>    label: '1 Special Character', <br/>    validate: input =&gt; specialCharsRegex.test(input),<br/>    labelWidth: 150<br/>  },<br/>  {<br/>    label: '1 Upper Case', <br/>    validate: input =&gt; upperCaseRegex.test(input),<br/>    labelWidth: 110<br/>  },<br/>  { <br/>    label: '1 Number', <br/>    validate: input =&gt; numberRegex.test(input),<br/>    labelWidth: 80<br/>  }<br/>]</span></pre><p id="1837" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们也可以使用一种方法来检查每个字符并进行比较，但是RegEx的性能更好，我们需要在用户输入密码时进行实时比较。</p><p id="1811" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在我们有了一个带有验证器的规则列表，我们可以开始将它们绑定到Vue，并使用它们来填充HTML规则:</p><pre class="lo lp lq lr gt mu mt mv mw aw mx bi"><span id="ee8a" class="ls lt iq mt b gy my mz l na nb">new Vue({<br/>  el: '#app',<br/>  data: {<br/>    password: ''<br/>  },<br/>  computed: {<br/>    rules () {<br/>      return validationRules.map(rule =&gt; {<br/>        return {<br/>          label: rule.label,<br/>          isValid: rule.validate(this.password),<br/>          labelWidth: rule.labelWidth<br/>        }<br/>      })<br/>    }<br/>  }<br/>})</span></pre><p id="9c0c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如你所见，我们只声明了一个<code class="fe mq mr ms mt b">password</code>属性，它将保存用户输入的内容。之后，我们创建一个计算的<code class="fe mq mr ms mt b">rules</code>属性，它基本上采用了我们在上一步中使用的<code class="fe mq mr ms mt b">validationRules</code>，并将验证器应用于<code class="fe mq mr ms mt b">password</code>属性。</p><p id="95ad" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为了反映这些变化，我们需要用一个绑定到新的Vue计算属性的属性来替换<code class="fe mq mr ms mt b">rules-list</code>:</p><pre class="lo lp lq lr gt mu mt mv mw aw mx bi"><span id="7249" class="ls lt iq mt b gy my mz l na nb">&lt;ul class="rules-list"&gt;<br/><br/>      &lt;li v-for="(rule, index) in rules" :key="index" class="rule-item"&gt;<br/>        &lt;div :ref="`label_${index}`"&gt;<br/>          &lt;span class="rule-text"&gt;{{rule.label}}&lt;/span&gt;          <br/>        &lt;/div&gt;<br/>        &lt;div class="green-line" :ref="`line_${index}`"&gt;&lt;/div&gt;<br/>      &lt;/li&gt;<br/><br/>    &lt;/ul&gt;</span></pre><p id="28f0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">可能你已经注意到，除了循环浏览规则之外，我还为标签和绿线声明了几个<code class="fe mq mr ms mt b">refs</code>，它们将在以后制作动画时有用。</p><p id="8060" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在我们只需要另一个计算属性来知道表单是否有效，以及一个存根方法，当表单有效并被提交时将调用该方法。</p><pre class="lo lp lq lr gt mu mt mv mw aw mx bi"><span id="38a8" class="ls lt iq mt b gy my mz l na nb">// computed...<br/>    validForm () {<br/>      // returns false if at least one rule is invalid<br/>      return !this.rules.some(rule =&gt; !rule.isValid)<br/>    }<br/>  },<br/>  methods: {<br/>    submitForm() {<br/>      if(this.validForm) {<br/>        console.info('TODO: connect to your back-end');        <br/>      }<br/>    }<br/>  }</span></pre><p id="c530" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在HTML代码中，我们可以像这样将它们绑定到我们的表单:</p><pre class="lo lp lq lr gt mu mt mv mw aw mx bi"><span id="6706" class="ls lt iq mt b gy my mz l na nb">  &lt;form @submit.prevent="submitForm"&gt;<br/>    &lt;input class="password-input" type="password" v-model="password"&gt;<br/>    &lt;button class="save-button" :class="{'valid': validForm}" type="submit"&gt;<br/>      &lt;strong&gt;SAVE&lt;/strong&gt;<br/>    &lt;/button&gt;<br/>  &lt;/form&gt;</span></pre><p id="d705" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">注意<code class="fe mq mr ms mt b">@submit.prevent</code>部分，这是一个避免编写方法<code class="fe mq mr ms mt b">event.preventDefault()</code>的捷径，帮助我们在不刷新页面的情况下触发<code class="fe mq mr ms mt b">submitForm</code>方法。</p><p id="94f8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们就快成功了，实际上，如果您设置了一个满足所有这些要求的密码，您可以看到“保存”按钮会改变颜色:</p><figure class="lo lp lq lr gt jr gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/896b8edea50d54e40e82b3d5660760d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:628/format:webp/0*1dABDGyCtRvC-RBj.png"/></div></figure><h2 id="26ce" class="ls lt iq bd lu lv lw dn lx ly lz dp ma kj mb mc md kn me mf mg kr mh mi mj mk bi translated">动画</h2><p id="f13a" class="pw-post-body-paragraph jy jz iq ka b kb ml kd ke kf mm kh ki kj mn kl km kn mo kp kq kr mp kt ku kv ij bi translated">所以从技术上来说，这个小部件功能齐全，但是它仍然缺少动画来告诉你在输入密码时已经检查了哪条规则。</p><p id="250f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">首先，我们将创建一个方法，它将接受任何规则，并根据它是否有效来激活它。当有效时，绿线应该增加其宽度以穿透文本，同时文本应该具有一些透明度并水平移动一点。当它无效时，它应该恢复正常。</p><pre class="lo lp lq lr gt mu mt mv mw aw mx bi"><span id="ce38" class="ls lt iq mt b gy my mz l na nb">// methods ...<br/>    animateRule(index, isValid) {<br/>      const rule = this.rules[index]<br/>      const greenLine = this.$refs[`line_${index}`]<br/>      const ruleText = this.$refs[`label_${index}`]<br/>      <br/>      const greenLineWidth = isValid ? rule.labelWidth : 0<br/>      const textOpacity = isValid ? 0.6 : 1<br/>      const textPositionX = isValid ? 7 : -7<br/>      <br/>      // animate green line's width to strike element<br/>      TweenLite.to(greenLine, 0.3, {<br/>        width: greenLineWidth<br/>      })<br/>      <br/>      // animate text transparency<br/>      TweenLite.to(ruleText, 0.3, {<br/>        opacity: textOpacity<br/>      })<br/>      <br/>      // move the text to the side a little bit and then get back<br/>      TweenLite.to(ruleText, 0.15, {<br/>        x: textPositionX,<br/>        onComplete: () =&gt; { // when the animation finishes, get it back<br/>          TweenLite.to(ruleText, 0.15, {<br/>            x: 0<br/>          })<br/>        }<br/>      })<br/>    },</span></pre><p id="f046" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">基本上，我在那个方法中所做的是通过引用获得动画元素(还记得我们之前声明的“refs”吗？)，然后计算出他们每个人的最终状态。</p><p id="eee0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">之后，使用TweenLite，我只是将所需的属性补间到最终状态，或者在文本水平移动的情况下，通过在<code class="fe mq mr ms mt b">onComplete</code>方法中设置另一个TweenLite补间来来回移动。</p><p id="4085" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">要做到这一点，我们只需要为发生变化的规则触发动画，但是我们如何“检查”我们的规则，看看哪些是无效的，哪些是有效的，或者相反？</p><p id="cf4d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们可以用观察者来做。</p><p id="e59c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">观察器是一种方法，您可以在每次应用程序数据发生变化时执行它，它接收特定属性的旧值和新值。</p><p id="d27b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们创建一个比较规则值的观察器，如果它们的<code class="fe mq mr ms mt b">isValid</code>属性发生了变化，那么我们可以调用我们的<code class="fe mq mr ms mt b">animateRule</code>方法，只对发生变化的规则进行动画处理:</p><pre class="lo lp lq lr gt mu mt mv mw aw mx bi"><span id="dbdd" class="ls lt iq mt b gy my mz l na nb">watch: {<br/>    // method that triggers when computed rules change<br/>    rules: function (newRules, oldRules) {<br/>      newRules.forEach((newRule, index) =&gt; {<br/>        const oldRule = oldRules[index]<br/>        if(newRule.isValid !== oldRule.isValid) {<br/>          // rule changed its valid property<br/>          this.animateRule(index, newRule.isValid)<br/>        }<br/>      })<br/>    }<br/>  },</span></pre><p id="3d1b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">而现在最后的结果！</p><figure class="lo lp lq lr gt jr"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="5003" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这就是本周的<strong class="ka ir">小部件。下周见，关注<a class="ae lh" href="https://levelup.gitconnected.com" rel="noopener ugc nofollow" target="_blank"> gitconnected </a>获取每周小工具！</strong></p><p id="30ca" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你渴望更多，你可以检查其他WotW: <br/> — <a class="ae lh" rel="noopener ugc nofollow" target="_blank" href="/making-an-animated-slider-wotw-a98f71438b33">动画滑块控制</a> <br/> — <a class="ae lh" rel="noopener ugc nofollow" target="_blank" href="/making-a-3d-facing-widget-8ab51a9eb573"> 3D面对小工具</a> <br/> — <a class="ae lh" rel="noopener ugc nofollow" target="_blank" href="/cards-hover-animation-wotw-7d1304f16ec6">卡片悬停动画</a></p><p id="2d45" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">另外，如果你想看下周的某个小部件，可以在评论区发表。</p></div><div class="ab cl nh ni hu nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="ij ik il im in"><p id="60ff" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="no">最初发表于</em> <a class="ae lh" href="http://ederdiaz.com/blog/2018/07/31/making-an-interactive-password-validator-wotw/" rel="noopener ugc nofollow" target="_blank"> <em class="no">埃德尔迪亚兹</em> </a> <em class="no">。</em></p><figure class="lo lp lq lr gt jr gh gi paragraph-image"><a href="https://levelup.gitconnected.com"><div class="gh gi np"><img src="../Images/439094b9a664ef0239afbc4565c6ca49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S9uYu-fFL3hIQLGVu0o-EQ.png"/></div></a></figure><div class="nq nr gp gr ns nt"><a href="https://gitconnected.com/learn/vue-js" rel="noopener  ugc nofollow" target="_blank"><div class="nu ab fo"><div class="nv ab nw cl cj nx"><h2 class="bd ir gy z fp ny fr fs nz fu fw ip bi translated">学习Vue.js -最佳Vue.js教程(2018) | gitconnected</h2><div class="oa l"><h3 class="bd b gy z fp ny fr fs nz fu fw dk translated">排名前26的Vue.js教程。课程由开发者提交并投票，让你找到最好的Vue.js…</h3></div><div class="ob l"><p class="bd b dl z fp ny fr fs nz fu fw dk translated">gitconnected.com</p></div></div><div class="oc l"><div class="od l oe of og oc oh jw nt"/></div></div></a></div></div></div>    
</body>
</html>