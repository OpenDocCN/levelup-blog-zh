<html>
<head>
<title>Sign In with Facebook OAuth in Angular 8</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Angular 8和脸书·奥厄斯一起签到</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/sign-in-with-facebook-oauth-in-angular-8-3a1625eceab2?source=collection_archive---------1-----------------------#2019-12-30">https://levelup.gitconnected.com/sign-in-with-facebook-oauth-in-angular-8-3a1625eceab2?source=collection_archive---------1-----------------------#2019-12-30</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="4097" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用您的脸书帐户通过OAuth登录Angular应用程序</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/a193c6f7f255538cfdb1d7eda9ad3812.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Vmr_A4GzJNHtYfVTTTtWsg.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">与脸书一起登录</figcaption></figure><p id="69d1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">使用脸书登录应用程序要容易得多。用户可以简单地点击“用脸书登录”按钮，他们将被导航到脸书给应用程序权限。然后，用户将收到一个带有其他个人信息的令牌密钥。</p><p id="2f34" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在这个演示中，我们将使用<strong class="la iu">Angular x-social-log in</strong>Angular模块在我们的应用程序和脸书之间进行集成。</p><h1 id="1ad6" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">添加脸书应用程序</h1><p id="ea6e" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">首先，我们需要设置一个脸书应用程序并获取应用程序ID。导航到<a class="ae mr" href="https://developers.facebook.com/apps/" rel="noopener ugc nofollow" target="_blank">脸书的开发者仪表板</a>。确保使用您的帐户登录。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ms"><img src="../Images/98eb793f27e3b316a89288c101c64259.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Sjy17NAaK__fSm4tLfMqgA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">面向开发人员的脸书仪表板</figcaption></figure><p id="7b0f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">点击“添加新应用”并通过输入有效的显示名称和电子邮件创建新的应用ID。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mt"><img src="../Images/f0df7f6e445d0aff78d39247fdd99ba6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q7gCH9nTE9QDZfac6QHzqg.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">创建新的应用ID</figcaption></figure><p id="0eed" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然后，完成安全检查并单击提交。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mu"><img src="../Images/dedbb6fde7db298cc3e0e4575ef0f99b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zID01ta-o0oup6K3Q6YQQA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">脸书开发者仪表板中的产品列表</figcaption></figure><p id="2f66" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在显示的产品列表中，单击脸书登录的“设置”按钮。选择Web作为平台，并输入如下URL。此时，我们将在本地环境中测试我们的应用程序。单击保存并继续。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mv"><img src="../Images/4111efb3499ce9c5c2e6d9adacba9b4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ODsYdQXsaygYG28NCgPRjg.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">您的网站信息部分</figcaption></figure><p id="8a3e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">别忘了复制并保存你的应用ID。</p><h1 id="484b" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">设置角度应用</h1><p id="445a" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">要创建新的角度应用程序，只需运行以下命令:</p><pre class="kj kk kl km gt mw mx my mz aw na bi"><span id="6b1a" class="nb lv it mx b gy nc nd l ne nf">ng new newApp</span></pre><p id="31e1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">导航到根文件夹，使用下面的命令运行应用程序。</p><pre class="kj kk kl km gt mw mx my mz aw na bi"><span id="458b" class="nb lv it mx b gy nc nd l ne nf">cd newApp<br/>ng serve -o</span></pre><p id="118b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">接下来，我们将在我们的应用程序中安装<strong class="la iu"> angularx-social-login </strong>模块。</p><pre class="kj kk kl km gt mw mx my mz aw na bi"><span id="9458" class="nb lv it mx b gy nc nd l ne nf">npm install angularx-social-login --save</span></pre><p id="2cfb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如下更新我们的<strong class="la iu"> app.module.ts </strong>文件。</p><pre class="kj kk kl km gt mw mx my mz aw na bi"><span id="7c41" class="nb lv it mx b gy nc nd l ne nf">import { BrowserModule } from '@angular/platform-browser';<br/>import { NgModule } from '@angular/core';<br/>import { AppRoutingModule } from './app-routing.module';<br/>import { AppComponent } from './app.component';<br/>import { ReactiveFormsModule } from '@angular/forms';<br/>import { SocialLoginModule, AuthServiceConfig, FacebookLoginProvider } from 'angularx-social-login';</span><span id="c64b" class="nb lv it mx b gy ng nd l ne nf">const config = new AuthServiceConfig([<br/>  {<br/>    id: FacebookLoginProvider.PROVIDER_ID,<br/>    provider: new FacebookLoginProvider('YOUR-APP-ID')<br/>  }<br/>]);</span><span id="5dbb" class="nb lv it mx b gy ng nd l ne nf">export function provideConfig() {<br/>  return config;<br/>}</span><span id="d002" class="nb lv it mx b gy ng nd l ne nf">@NgModule({<br/>  declarations: [<br/>    AppComponent<br/>  ],<br/>  imports: [<br/>    BrowserModule,<br/>    AppRoutingModule,<br/>    ReactiveFormsModule,<br/>    SocialLoginModule<br/>  ],<br/>  providers: [<br/>    {<br/>      provide: AuthServiceConfig,<br/>      useFactory: provideConfig<br/>    }<br/>  ],<br/>  bootstrap: [AppComponent]<br/>})<br/>export class AppModule { }</span></pre><h1 id="cab4" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">在带有脸书按钮的表单中显示一个标志</h1><p id="ba8f" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">接下来，我们将设置一个带有脸书按钮的基本登录表单。我已经用Bootstrap初始化了应用程序。你可以查看这个<a class="ae mr" href="https://medium.com/javascript-in-plain-english/build-angular-8-project-with-bootstrap-7b89775e5764" rel="noopener">链接</a>来了解更多关于如何在Angular应用中安装Bootstrap的信息。</p><p id="4510" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">更新我们的<strong class="la iu">app.component.html</strong>和<strong class="la iu"> app.component.ts </strong>如下。</p><p id="084c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu">app.component.html</strong></p><pre class="kj kk kl km gt mw mx my mz aw na bi"><span id="3f6d" class="nb lv it mx b gy nc nd l ne nf">&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;meta charset="UTF-8"&gt;<br/>    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;<br/>    &lt;meta http-equiv="X-UA-Compatible" content="ie=edge"&gt;  <br/>    &lt;title&gt;Document&lt;/title&gt;<br/>  &lt;/head&gt;</span><span id="060d" class="nb lv it mx b gy ng nd l ne nf">&lt;body class="bg-light"&gt;<br/>  &lt;div class="container"&gt;<br/>    &lt;div class="row py-5 justify-content-center"&gt;<br/>      &lt;div class="col-md-8"&gt;<br/>        &lt;h1 class="text-center py-4"&gt;Sign In with Facebook in Angular 8&lt;/h1&gt;</span><span id="88d0" class="nb lv it mx b gy ng nd l ne nf">        &lt;div *ngIf="loggedIn===false"&gt;<br/>          &lt;form [formGroup]="signinForm"&gt;<br/>            &lt;div class="form-group"&gt;<br/>              &lt;label for="email"&gt;Email&lt;/label&gt;<br/>              &lt;input type="text" class="form-control" id="email" formControlName="email"&gt;<br/>            &lt;/div&gt;<br/>     <br/>            &lt;div class="form-group"&gt;<br/>              &lt;label for="password"&gt;Password&lt;/label&gt;<br/>              &lt;input type="password" class="form-control" id="password" formControlName="password" &gt;<br/>            &lt;/div&gt;<br/>          &lt;/form&gt;<br/>          &lt;div&gt;<br/>            &lt;p&gt;Or&lt;/p&gt;<br/>          &lt;/div&gt;<br/>          &lt;div&gt;<br/>            &lt;button type="button" (click)="signInWithFB()" class="btn btn-primary"&gt;Sign In With Facebook&lt;/button&gt;<br/>          &lt;/div&gt;<br/>        &lt;/div&gt;</span><span id="0ee7" class="nb lv it mx b gy ng nd l ne nf">        &lt;div *ngIf="loggedIn===true"&gt;<br/>          &lt;div class="form-group"&gt;<br/>            &lt;label for="firstname"&gt;First Name&lt;/label&gt;<br/>            &lt;input type="text" class="form-control" id="firstname" [value]="user.firstName" readonly &gt;<br/>          &lt;/div&gt;</span><span id="46c2" class="nb lv it mx b gy ng nd l ne nf">          &lt;div class="form-group"&gt;<br/>            &lt;label for="lastname"&gt;Last Name&lt;/label&gt;<br/>            &lt;input type="text" class="form-control" id="lastname" [value]="user.lastName" readonly &gt;<br/>          &lt;/div&gt;</span><span id="e455" class="nb lv it mx b gy ng nd l ne nf">          &lt;div class="form-group"&gt;<br/>            &lt;label for="email2"&gt;Email&lt;/label&gt;<br/>            &lt;input type="text" class="form-control" id="email2" [value]="user.email" readonly &gt;<br/>          &lt;/div&gt;<br/>        <br/>          &lt;button type="button" (click)="signOut()" class="btn btn-primary"&gt;Sign Out&lt;/button&gt;</span><span id="9d98" class="nb lv it mx b gy ng nd l ne nf">         &lt;/div&gt;<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;<br/>  &lt;/div&gt;<br/>&lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="567d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu">应用组件</strong></p><pre class="kj kk kl km gt mw mx my mz aw na bi"><span id="8148" class="nb lv it mx b gy nc nd l ne nf">import { Component, OnInit } from '@angular/core';<br/>import { FormGroup, FormBuilder, Validators } from '@angular/forms';<br/>import { AuthService, FacebookLoginProvider, SocialUser } from 'angularx-social-login';</span><span id="6177" class="nb lv it mx b gy ng nd l ne nf">@Component({<br/>  selector: 'app-root',<br/>  templateUrl: './app.component.html',<br/>  styleUrls: ['./app.component.scss']<br/>})<br/>export class AppComponent implements OnInit {<br/>  signinForm: FormGroup;<br/>  user: SocialUser;<br/>  loggedIn: boolean;</span><span id="7824" class="nb lv it mx b gy ng nd l ne nf">  constructor(private fb: FormBuilder, private authService: AuthService) { }</span><span id="3bf4" class="nb lv it mx b gy ng nd l ne nf">  ngOnInit() {<br/>    this.signinForm = this.fb.group({<br/>      email: ['', Validators.required],<br/>      password: ['', Validators.required]<br/>    });</span><span id="59e8" class="nb lv it mx b gy ng nd l ne nf">    this.authService.authState.subscribe((user) =&gt; {<br/>      this.user = user;<br/>      this.loggedIn = (user != null);<br/>      console.log(this.user);<br/>    });<br/>  }</span><span id="248f" class="nb lv it mx b gy ng nd l ne nf">  signInWithFB(): void {<br/>    this.authService.signIn(FacebookLoginProvider.PROVIDER_ID);<br/>  }</span><span id="c0b9" class="nb lv it mx b gy ng nd l ne nf">  signOut(): void {<br/>    this.authService.signOut();<br/>  }<br/>}</span></pre><p id="edaa" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">使用此命令运行应用程序。</p><pre class="kj kk kl km gt mw mx my mz aw na bi"><span id="b992" class="nb lv it mx b gy nc nd l ne nf">ng serve -o</span></pre><p id="993c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果您遇到如下图所示的问题“无法再从http页面调用该方法”,请查看此<a class="ae mr" rel="noopener ugc nofollow" target="_blank" href="/create-a-valid-ssl-in-localhost-for-angular-applications-ed05054ec2e7">链接</a>来解决它。这是因为来自脸书的方法只能从https页面调用。因此，您需要在本地主机中设置一个有效的SSL来解决这个问题。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nh"><img src="../Images/80df31a551e36c5de5d3c5fd508be984.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B7J7Qgf5yEIaEV0G-1f6rA.png"/></div></div></figure><p id="3169" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">通过执行以下命令重新运行您的应用程序:</p><pre class="kj kk kl km gt mw mx my mz aw na bi"><span id="01a8" class="nb lv it mx b gy nc nd l ne nf">ng serve --ssl</span></pre><p id="5518" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这是你点击“用脸书登录”按钮后的样子。您的脸书信息将显示在表单中。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ni"><img src="../Images/29b6d60d440889c3835b8f8645cfa5cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eEJNnk66U2KVp8yqNjVB0Q.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">用脸书表单登录结果</figcaption></figure><h1 id="1461" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">结论</h1><p id="d4fe" class="pw-post-body-paragraph ky kz it la b lb mm ju ld le mn jx lg lh mo lj lk ll mp ln lo lp mq lr ls lt im bi translated">在这篇文章中，我们学习了如何使用angularx-social-login Angular模块登录脸书的Angular应用程序。</p><p id="4e96" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果你认为这篇文章是有帮助的，不要忘记与你的朋友分享。</p></div><div class="ab cl nj nk hx nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="im in io ip iq"><h1 id="0e67" class="lu lv it bd lw lx nq lz ma mb nr md me jz ns ka mg kc nt kd mi kf nu kg mk ml bi translated">资源</h1><ol class=""><li id="3790" class="nv nw it la b lb mm le mn lh nx ll ny lp nz lt oa ob oc od bi translated"><a class="ae mr" href="https://www.djamware.com/post/5d4628d5721e1ce9d7dc95b0/angular-8-tutorial-facebook-login" rel="noopener ugc nofollow" target="_blank">https://www . djam ware . com/post/5d 4628d 5721 E1 ce 9d 7 DC 95 b 0/angular-8-教程-Facebook-登录</a></li></ol></div></div>    
</body>
</html>