<html>
<head>
<title>Use Sass in an ASP.NET MVC Application</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在ASP.NET MVC应用程序中使用Sass</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/use-sass-in-an-asp-net-mvc-application-207811b61048?source=collection_archive---------1-----------------------#2021-06-09">https://levelup.gitconnected.com/use-sass-in-an-asp-net-mvc-application-207811b61048?source=collection_archive---------1-----------------------#2021-06-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1fdb" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何创建一个ASP.NET MVC应用程序并使用Sass进行设计，而没有webpack或grunt的麻烦。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/fed675e7c07146c5c3b2a19522aca9d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Oa3ie-2OMPwtL94L.jpg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">图片由<a class="ae ky" href="https://silvawebdesigns.com/wp-content/uploads/2020/10/useful-sass-scss-mixins-for-every-website.jpg" rel="noopener ugc nofollow" target="_blank">Silvawebdesigns.com</a></figcaption></figure><h1 id="5e72" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">介绍</h1><p id="8dfe" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">默认的ASPNET MVC模板自带<a class="ae ky" href="https://getbootstrap.com/" rel="noopener ugc nofollow" target="_blank"> Bootstrap 4 </a>。这是一个已经编译好的Bootstrap版本。为了<a class="ae ky" href="https://getbootstrap.com/docs/4.5/getting-started/theming/" rel="noopener ugc nofollow" target="_blank">定制</a>Bootstrap元素的外观，您需要能够覆盖Bootstrap的默认值，并从Sass源代码编译Bootstrap。根据我自己的经验，我知道我喜欢使用源Sass文件并覆盖它们。</p><p id="1a44" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">不幸的是，在MVC应用程序中使用Sass并不像看起来那么简单。有一些使用webpack或grunt的教程。但这对我来说似乎有点过了。为什么不让我们的MVC应用程序来做所有的艰苦工作呢？由于我没有找到任何关于这个问题的教程，我决定自己来做。</p><h1 id="4246" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">目标</h1><p id="53e6" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我们的目标是:</p><ol class=""><li id="fac3" class="ms mt it lt b lu mn lx mo ma mu me mv mi mw mm mx my mz na bi translated">创建一个示例应用程序</li><li id="91eb" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">将Sass添加到项目中</li><li id="e1c6" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">将Sass编译为CSS</li></ol><p id="a426" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">对于示例项目，我想让你参考我的GitHub项目:<a class="ae ky" href="https://github.com/koenvzeijl/sass-aspnet-mvc" rel="noopener ugc nofollow" target="_blank">https://github.com/koenvzeijl/sass-aspnet-mvc</a></p><p id="eaae" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">顺便说一句，如果你只是想为C#使用SaSS编译器，你也可以使用我创建的这个包:<a class="ae ky" href="https://github.com/koenvzeijl/AspNetCore.SassCompiler" rel="noopener ugc nofollow" target="_blank">https://github.com/koenvzeijl/AspNetCore.SassCompiler</a></p><h1 id="cbd4" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">假设</h1><p id="8b48" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">本文假设如下:</p><ul class=""><li id="5b69" class="ms mt it lt b lu mn lx mo ma mu me mv mi mw mm ng my mz na bi translated">Node.js已安装。如果你没有它，先去<a class="ae ky" href="https://nodejs.org/" rel="noopener ugc nofollow" target="_blank">安装它</a>。</li><li id="eaf4" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm ng my mz na bi translated">您使用的IDE可以运行像Visual Studio或Rider这样的ASP.NET MVC应用程序</li></ul></div><div class="ab cl nh ni hx nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="im in io ip iq"><h1 id="c791" class="kz la it bd lb lc no le lf lg np li lj jz nq ka ll kc nr kd ln kf ns kg lp lq bi translated">创建一个示例应用程序</h1><p id="d5c2" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在开始所有的设置之前，我们需要创建一个示例应用程序。你有两个选择，你可以通过命令行或者在你喜欢的IDE中创建一个。对于这个示例项目，我将使用一个<strong class="lt iu">。NET 5.0 MVC </strong>应用。</p><p id="68c4" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">要从命令行创建MVC应用程序，请使用以下命令:</p><pre class="kj kk kl km gt nt nu nv nw aw nx bi"><span id="c95a" class="ny la it nu b gy nz oa l ob oc">dotnet new mvc --name ExampleApplication</span></pre><p id="df31" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">要使用Visual Studio创建示例应用程序，请按照下列步骤操作:</p><ul class=""><li id="c015" class="ms mt it lt b lu mn lx mo ma mu me mv mi mw mm ng my mz na bi translated">打开Visual Studio</li><li id="ef13" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm ng my mz na bi translated">点击“创建新项目”。</li><li id="b22c" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm ng my mz na bi translated">选择“ASP。NET核心Web应用程序”</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi od"><img src="../Images/62d77bab9f64d2f5a3dd8992113676fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*mRhJlPKi-qvI_TTr.png"/></div></div></figure><p id="47f1" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">然后选择。NET Core版本，然后单击创建。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oe"><img src="../Images/3ea8ce860638f8d23e9c23f99526d237.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IO9JsGRGvOog9J3eYWV7og.png"/></div></div></figure><p id="296c" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">现在我们有了一个示例应用程序，是时候添加我们的Sass样式了。在这个例子中，我们将对所有的<code class="fe of og oh nu b">.scss</code>文件使用<code class="fe of og oh nu b">/Styles</code>文件夹。首先，创建一个<code class="fe of og oh nu b">site.scss</code>，这将是我们项目的基础文件。在我的示例项目中，基本文件如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oi oj l"/></div></figure></div><div class="ab cl nh ni hx nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="im in io ip iq"><h1 id="240f" class="kz la it bd lb lc no le lf lg np li lj jz nq ka ll kc nr kd ln kf ns kg lp lq bi translated">使用NPM</h1><p id="b97a" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">是时候为我们的项目设置Sass了。即使我们正在编写一个MVC应用程序，我们也将使用<a class="ae ky" href="https://www.npmjs.com/" rel="noopener ugc nofollow" target="_blank">节点包管理器</a> (npm)来安装Sass所需的组件。为此，我们将在<code class="fe of og oh nu b">package.json</code>中添加包。需要将该文件添加到项目的根目录中，这可以通过在命令提示符下运行以下命令来完成。</p><pre class="kj kk kl km gt nt nu nv nw aw nx bi"><span id="983a" class="ny la it nu b gy nz oa l ob oc">npm init</span></pre><p id="7c03" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">现在我们有了一个<code class="fe of og oh nu b">package.json</code>，一次安装所有包的最简单方法是将所有这些包添加为devDependencies，然后运行<code class="fe of og oh nu b">npm install</code>:</p><pre class="kj kk kl km gt nt nu nv nw aw nx bi"><span id="ef80" class="ny la it nu b gy nz oa l ob oc">{</span><span id="be67" class="ny la it nu b gy ok oa l ob oc">    "autoprefixer": "^10.2.6",</span><span id="ca93" class="ny la it nu b gy ok oa l ob oc">    "cssnano": "^5.0.5",</span><span id="ae25" class="ny la it nu b gy ok oa l ob oc">    "cssnano-preset-advanced": "^5.1.2",</span><span id="a2b4" class="ny la it nu b gy ok oa l ob oc">    "postcss-cli": "^8.3.1",</span><span id="d9b8" class="ny la it nu b gy ok oa l ob oc">    "sass": "^1.34.1"</span><span id="660b" class="ny la it nu b gy ok oa l ob oc">}</span></pre><p id="d742" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu">设置postcss </strong></p><p id="44bf" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们需要做的另一件事是设置我们的postcss设置。为此，我们需要做的第一件事是在我们的<code class="fe of og oh nu b">package.json</code>中添加另一行:</p><pre class="kj kk kl km gt nt nu nv nw aw nx bi"><span id="fe50" class="ny la it nu b gy nz oa l ob oc">"main": "postcss.config.js"</span></pre><p id="6039" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">这一行将确保检查postcss设置的<code class="fe of og oh nu b">postcss.config.js</code>文件。有关<code class="fe of og oh nu b">package.json</code>中主要属性的更多信息，请查看<a class="ae ky" href="http://postcss.config.js" rel="noopener ugc nofollow" target="_blank">此链接</a>。</p><p id="296a" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">现在用以下内容创建一个<code class="fe of og oh nu b">postcss.config.js</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oi oj l"/></div></figure><p id="d51e" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">这将确保autoprefixer能够像我们期望的那样为老版本的浏览器工作。这就需要cssnano来做到这一点。</p><p id="0e4d" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">现在我们差不多完成了，我们需要在package.json中添加一些脚本，以允许我们的MVC应用程序实际生成。css文件。</p><p id="addc" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">完成后的package.json应该如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oi oj l"/></div></figure><p id="294a" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">这就是我们设置NPM所需的一切，让我们来看看我们的web应用程序。</p></div><div class="ab cl nh ni hx nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="im in io ip iq"><h1 id="6ca7" class="kz la it bd lb lc no le lf lg np li lj jz nq ka ll kc nr kd ln kf ns kg lp lq bi translated">设置MVC应用程序</h1><p id="5f8b" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在我们的web应用程序中，我们希望实现两件事，使开发尽可能愉快。首先，我们至少要确保<code class="fe of og oh nu b">.scss</code>文件是<strong class="lt iu">转换的</strong>到<code class="fe of og oh nu b">.css</code>文件。第二，为了让我们作为开发人员的生活稍微轻松一点，我们希望我们的应用程序能够在<code class="fe of og oh nu b">.scss</code>文件中有任何变化的时候<strong class="lt iu">自动生成</strong>文件。</p><p id="f7d1" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">如上所述，我们首先要确保生成了<code class="fe of og oh nu b">.css</code>文件。为此，我们需要将以下几行添加到我们的<code class="fe of og oh nu b">.csproj</code>文件中:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oi oj l"/></div></figure><p id="b672" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在上面的代码片段中，我们添加了两个任务。第一个任务是确保在构建项目之前，正确的包已经安装在npm中。当在同一个项目中与多人合作时，或者当在CI/CD管道中构建时，这尤其有用，因为他们不需要手动运行 <code class="fe of og oh nu b">npm install</code>。这段代码既适用于Linux，也适用于Windows。</p><p id="3cbc" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">第二部分将使用我们之前在<code class="fe of og oh nu b">package.json</code>中添加的<code class="fe of og oh nu b">build:css</code>脚本将<code class="fe of og oh nu b">.scss</code>文件转换为<code class="fe of og oh nu b">.css</code>文件。该脚本将查看我们之前创建的<code class="fe of og oh nu b">/Styles</code>文件夹，并在<code class="fe of og oh nu b">wwwroot/css</code>文件夹中生成适当的<code class="fe of og oh nu b">.css</code>文件。</p><p id="2be2" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在脚本执行之后，它还会将<code class="fe of og oh nu b">site.css</code>文件复制到publish文件夹中以自动包含它。</p><h1 id="c9a1" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">观察Sass变化</h1><p id="f740" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">正如前面已经提到的，我们希望开发尽可能简单。如果<code class="fe of og oh nu b">.scss</code>文件中有任何变化，我们希望我们的应用程序<strong class="lt iu">自动生成<code class="fe of og oh nu b">.css</code>文件</strong>。首先，我们需要创建一个文件监视器。为此，在项目的根目录下创建一个包含以下内容的<code class="fe of og oh nu b">NpmWatchHostedService.cs</code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oi oj l"/></div></figure><p id="900d" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">上面的代码片段将在调试模式下使用npm设置一个文件监视器，并在<code class="fe of og oh nu b">/Styles</code>文件夹中的任何内容发生变化时生成<code class="fe of og oh nu b">.css</code>文件。现在剩下的就是将<code class="fe of og oh nu b">NpmWatchHostedService</code>包含在我们的<code class="fe of og oh nu b">startup.cs</code>中，通过添加以下几行来完成:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oi oj l"/></div></figure></div><div class="ab cl nh ni hx nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="im in io ip iq"><h1 id="ee80" class="kz la it bd lb lc no le lf lg np li lj jz nq ka ll kc nr kd ln kf ns kg lp lq bi translated">结论</h1><p id="66ed" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">就是这样！你已经做到了。您成功地将Sass添加到您的ASP.NET MVC应用程序中，而不需要webpack或Grunt。现在让你的生活更简单，开始写Sass而不是CSS。我希望你从这个故事中学到了一些东西。</p><p id="ec95" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">快乐编码😊</p><p id="5149" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">对于示例项目:</p><div class="ol om gp gr on oo"><a href="https://github.com/koenvzeijl/sass-aspnet-mvc" rel="noopener  ugc nofollow" target="_blank"><div class="op ab fo"><div class="oq ab or cl cj os"><h2 class="bd iu gy z fp ot fr fs ou fu fw is bi translated">koenvzeijl/sass-aspnet-mvc</h2><div class="ov l"><h3 class="bd b gy z fp ot fr fs ou fu fw dk translated">在GitHub上创建一个帐户，为koenvzeijl/sass-aspnet-mvc开发做出贡献。</h3></div><div class="ow l"><p class="bd b dl z fp ot fr fs ou fu fw dk translated">github.com</p></div></div><div class="ox l"><div class="oy l oz pa pb ox pc ks oo"/></div></div></a></div></div></div>    
</body>
</html>