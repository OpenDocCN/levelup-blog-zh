<html>
<head>
<title>How to Troubleshoot Memory Leak in Java Application Deployed in VMware Tanzu(PCF)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何解决部署在VMware Tanzu(PCF)中的Java应用程序的内存泄漏问题</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-troubleshoot-memory-leak-in-java-application-deployed-in-vmware-tanzu-pcf-b159717bc7b0?source=collection_archive---------12-----------------------#2020-09-14">https://levelup.gitconnected.com/how-to-troubleshoot-memory-leak-in-java-application-deployed-in-vmware-tanzu-pcf-b159717bc7b0?source=collection_archive---------12-----------------------#2020-09-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="32b8" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">内存泄漏很难检测，并且会很快耗尽您的云资源。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/175818cf11aaec15712526573966c0fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*SMcxoC4bmT07lVI0"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">迈克尔·泽兹奇在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="c24c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们部署在VMware Tanzu(以前称为Pivotal Cloud Foundry或PCF)上的一个java应用程序每隔几个小时就开始崩溃。该应用程序每天处理近3000万个呼叫，响应时间不到一秒。</p><p id="701d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们最近没有进行新的部署。因此，应用程序的频繁崩溃对于团队来说是相当令人惊讶的。</p><p id="12ae" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Tanzu metrics屏幕确实有助于理解在应用程序开始变慢之前，内存一直达到其分配的90%左右。在几分钟的缓慢性能中，应用程序通常会崩溃。</p><p id="e620" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，它确认了应用程序的内存管理存在问题。下一步是找出内存问题是由于糟糕的应用程序代码还是由于使用了第三方API。</p><p id="d642" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">组织中大约有20个应用程序使用有问题的应用程序公开的服务。因此，团队需要快速找到问题的根本原因并解决它，以避免一些关键销售和CRM应用程序的停机。</p><p id="c051" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一旦团队确认问题与内存有关，下一步就是插入PCF节点并确定导致内存泄漏的原因。花了几个小时才发现问题的根本原因是由于呼叫量的指数增长导致资源利用率增加。团队很快解决了这个问题，以便更好地处理卷并部署更新的代码。该应用程序开始像一个魅力，即使有更高的音量。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><p id="01e5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我将详细介绍用于确定内存泄漏根本原因的工具和步骤。如果您在部署在VMware Tanzu (PCF)中的应用程序中面临类似的内存使用问题，这将有助于快速RCA和解决问题。</p><h1 id="77f9" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">PCF指标</h1><p id="792d" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">VMware Tanzu提供了一个设计良好的工具来跟踪您的应用的指标。设备跟踪以下项目的指标:</p><ul class=""><li id="a253" class="mw mx iq ky b kz la lc ld lf my lj mz ln na lr nb nc nd ne bi translated">平均请求延迟</li><li id="ca0e" class="mw mx iq ky b kz nf lc ng lf nh lj ni ln nj lr nb nc nd ne bi translated">每分钟请求数</li><li id="4c26" class="mw mx iq ky b kz nf lc ng lf nh lj ni ln nj lr nb nc nd ne bi translated">每分钟请求错误数</li><li id="cc56" class="mw mx iq ky b kz nf lc ng lf nh lj ni ln nj lr nb nc nd ne bi translated">CPU使用率</li><li id="b52d" class="mw mx iq ky b kz nf lc ng lf nh lj ni ln nj lr nb nc nd ne bi translated">唱片</li><li id="0104" class="mw mx iq ky b kz nf lc ng lf nh lj ni ln nj lr nb nc nd ne bi translated">记忆</li></ul><p id="c8fe" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里我们感兴趣的是“内存”指标。它给出了正在使用的内存量的明确指示。我们可以选择查看平均、最大、最小或总使用量与应用程序总分配内存的比较。</p><p id="beeb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面是PCF指标仪表板的屏幕截图，显示了资源的平均使用视图。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nk"><img src="../Images/97356f46f601390a8d795ecda95fa03e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gkgoKuH2DE9t9Lim946jAg.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">聚合指标仪表板。作者截图。</figcaption></figure><p id="e008" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在下图中，您可以看到为应用程序运行的每个实例的相同指标。这些图表清楚地显示了是所有节点都以相同的方式运行，还是只有少数异常值导致了问题。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nl"><img src="../Images/1fe229cd0c422df7d435fc3d209950e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GTLlkue04xqbhfscpKc3xQ.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">所有实例度量仪表板。作者截图。</figcaption></figure><p id="0bdf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我们的例子中，所有节点的行为或多或少都具有相同的模式，也就是说，它们在上次重启后的几个小时内都达到了90%的内存使用水平。</p><p id="8ffc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">查看上面的度量仪表板，团队确信内存利用率有问题。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="9ce4" class="lz ma iq bd mb mc nm me mf mg nn mi mj jw no jx ml jz np ka mn kc nq kd mp mq bi translated">启用JMX</h1><p id="c399" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">通常，与内存泄漏相关的问题是由于代码中对象的不正确处理而引起的。当应用程序代码创建用于保存数据的对象，但没有适当地释放它们时，java垃圾收集器不会考虑将它们用于垃圾收集。这些对象在应用程序完成使用后，会在内存中停留很长时间。随着时间的推移或在大容量的情况下，问题将在大小上外推，开始导致内存问题。</p><p id="37ca" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有几种方法可以找出导致内存问题的原因，以及哪些对象占用了内存。一种方法是获取实例的堆转储，以找出在进行转储的特定时间内哪些对象是活动的。</p><p id="189b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">另一种方法是启用JMX并直接连接到JVM。我更喜欢这种方法，因为它提供了对象如何在应用程序中形成的实时视图。它还提供了一种方法来捕获快照，并比较不同时间点之间的对象计数和使用的内存。</p><p id="92e4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面是为Tanzu平台上的节点启用JMX的步骤。</p><ul class=""><li id="6425" class="mw mx iq ky b kz la lc ld lf my lj mz ln na lr nb nc nd ne bi translated">通过管理控制台，在应用程序的“设置”菜单下的“用户提供的环境变量”中设置以下变量。</li></ul><pre class="kg kh ki kj gt nr ns nt nu aw nv bi"><span id="5ad5" class="nw ma iq ns b gy nx ny l nz oa">key = JBP_CONFIG_JMX  |  value = {enabled: true}</span></pre><ul class=""><li id="840d" class="mw mx iq ky b kz la lc ld lf my lj mz ln na lr nb nc nd ne bi translated">您可以通过cf CLI使用下面的命令完成同样的操作。</li></ul><pre class="kg kh ki kj gt nr ns nt nu aw nv bi"><span id="dd7c" class="nw ma iq ns b gy nx ny l nz oa">cf set-env rspusage JBP_CONFIG_JMX "{enabled: true}"</span></pre><ul class=""><li id="30bd" class="mw mx iq ky b kz la lc ld lf my lj mz ln na lr nb nc nd ne bi translated">保存设置后，您需要使用以下命令“重新启动”应用程序。重启应用程序对激活设置不起作用。</li></ul><pre class="kg kh ki kj gt nr ns nt nu aw nv bi"><span id="d9ea" class="nw ma iq ns b gy nx ny l nz oa">cf restage &lt;add your application name here&gt;</span></pre><ul class=""><li id="4a37" class="mw mx iq ky b kz la lc ld lf my lj mz ln na lr nb nc nd ne bi translated">现在，应用程序将允许您创建一个SSH隧道。在cf CLI中，从您的本地计算机运行以下命令。它将转到命令提示符的下一行，不做任何事情。检查几秒钟—如果提示没有抛出任何错误，则您已成功连接。</li></ul><pre class="kg kh ki kj gt nr ns nt nu aw nv bi"><span id="9480" class="nw ma iq ns b gy nx ny l nz oa">cf ssh -N -T -L 5000:localhost:5000 &lt;add your application name here&gt;</span></pre><p id="c5e9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">通过以上步骤，部署在Tanzu平台上的应用程序现在可以在JMX使用了。下一步是使用支持JMX的工具连接到本地端口。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="f261" class="lz ma iq bd mb mc nm me mf mg nn mi mj jw no jx ml jz np ka mn kc nq kd mp mq bi translated">连接到SSH端口以读取JVM统计信息</h1><p id="0a75" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">许多图形监控工具可以帮助您从本地系统监控JVM和java应用程序，例如JConsole、VisualVM等。</p><p id="366a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在解决内存问题时，我们使用VisualVM来监控Tanzu节点中的JVM。使用VisualVM连接到实例非常容易，它提供了一个简单的UI来查看各种指标。您可以从本文参考资料部分给出的链接下载最新的VisualVM软件。</p><ul class=""><li id="8709" class="mw mx iq ky b kz la lc ld lf my lj mz ln na lr nb nc nd ne bi translated">下载完软件后，解压下载文件并双击bin目录中的应用程序文件。它将在您的本地打开VisualVM应用程序。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ob"><img src="../Images/300cb913e67b134ce1616e59c6eed2f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RwG8lBa3OIAuWogVjm8wDg.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">VisualVM启动屏幕。作者截图。</figcaption></figure><ul class=""><li id="5f43" class="mw mx iq ky b kz la lc ld lf my lj mz ln na lr nb nc nd ne bi translated">在VisualVM应用程序中，单击文件&gt;添加JMX连接子菜单。它会给出一个对话框来输入SSH连接的详细信息。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oc"><img src="../Images/bde878138e50935fba09502215276753.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F2UR_cZNgIzhMoxmxsSjCg.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">作者截图。</figcaption></figure><ul class=""><li id="ec23" class="mw mx iq ky b kz la lc ld lf my lj mz ln na lr nb nc nd ne bi translated">在“添加JMX连接”页面中，输入“连接”字段值“本地主机:5000”。请记住，您已经在前面的步骤中使用了端口5000来打开到PCF实例的SSH连接。</li><li id="d5ef" class="mw mx iq ky b kz nf lc ng lf nh lj ni ln nj lr nb nc nd ne bi translated">您还可以将“显示名称”字段值更改为能够快速告诉您在VisualVM应用程序中连接到哪些应用程序实例的值。这将有助于您以后拍摄多个快照。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi od"><img src="../Images/11767b01655f256d474ad5f27b9e7259.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bnaccb3WlRh8QGxwg2pCFw.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">作者截图。</figcaption></figure><ul class=""><li id="8500" class="mw mx iq ky b kz la lc ld lf my lj mz ln na lr nb nc nd ne bi translated">您不需要输入任何其他详细信息。点击“确定”按钮。VisualVM应用程序将尝试通过连接到端口5000来添加JMX连接。添加连接通常需要几秒钟。一旦成功连接，它将在“应用程序”选项卡的“本地”菜单下显示新的连接。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oe"><img src="../Images/13a675fc1dbf4ccfe6c26f8284b6cd76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b9TN2X3gIrkw93tsKpu9IQ.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">作者截图。</figcaption></figure><ul class=""><li id="5ea3" class="mw mx iq ky b kz la lc ld lf my lj mz ln na lr nb nc nd ne bi translated">万一应用程序无法连接，它将抛出如下错误。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi of"><img src="../Images/a8bf0061711e3817f3c3320231ab796c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e6F4bigwdpUG4LDlyMlA6g.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">作者截图。</figcaption></figure><ul class=""><li id="515c" class="mw mx iq ky b kz la lc ld lf my lj mz ln na lr nb nc nd ne bi translated">返回到您打开SSH连接的命令提示符处，验证连接是否已终止。如果是这样，那么使用您第一次使用的相同的“cf ssh …”命令重新启动SSH连接。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi og"><img src="../Images/77cd8afb4c7317eff62e93ae9ce644a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Be6xe5f3K6PeQDQBX8HorQ.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">作者截图。</figcaption></figure><ul class=""><li id="96af" class="mw mx iq ky b kz la lc ld lf my lj mz ln na lr nb nc nd ne bi translated">既然您已经完成了VisualVM的设置，现在您可以打开刚刚添加的连接并开始监控了。右键单击连接名称并选择“打开”选项。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oh"><img src="../Images/72b3b5d8ee9ca5a023a67730ec40e090.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*psTEnhsemQd6SkIe2Tvb5g.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">作者截图。</figcaption></figure><ul class=""><li id="9731" class="mw mx iq ky b kz la lc ld lf my lj mz ln na lr nb nc nd ne bi translated">VisualVM将花费几秒钟来打开连接，然后将显示以下屏幕。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oi"><img src="../Images/36f3edd2273ccb41ab862ecbe0f938df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d-Kr0OWgSt1Wk2gUpJr1Vw.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">作者截图。</figcaption></figure><ul class=""><li id="be20" class="mw mx iq ky b kz la lc ld lf my lj mz ln na lr nb nc nd ne bi translated">“采样器”选项卡帮助您执行CPU和内存采样。单击选项卡后，需要几秒钟的时间进行分析，然后会显示一条消息，提示您所需资源的采样是否可用。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oj"><img src="../Images/a2974fab672d9b66322a24c6a3ed4de4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RSu4XudVsztmXtq2EdXDSQ.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">作者截图。</figcaption></figure><ul class=""><li id="adab" class="mw mx iq ky b kz la lc ld lf my lj mz ln na lr nb nc nd ne bi translated">接下来，单击“内存”按钮开始收集内存数据。现在，您将能够看到对象的实际使用情况。它将显示活动字节和活动对象的计数。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ok"><img src="../Images/147f2ee23d6e88f967f7463a1d4b219f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dExMaKAQlaE-QwQDuXJ6hw.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">作者截图。</figcaption></figure><ul class=""><li id="6080" class="mw mx iq ky b kz la lc ld lf my lj mz ln na lr nb nc nd ne bi translated">监视哪些对象在内存中累积而不被垃圾收集的最简单的方法是使用“Delta”选项。Delta视图显示了启动连接后JVM内存中对象的字节和计数的增加。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ol"><img src="../Images/7774473f11ec2b7eb79278c82d453d23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oLsHr53uGECsQCjZBOiZvw.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">作者截图。</figcaption></figure><ul class=""><li id="45be" class="mw mx iq ky b kz la lc ld lf my lj mz ln na lr nb nc nd ne bi translated">如果您继续看到特定对象的字节数和计数在增加，但没有随着时间的推移而重置，那么这是一个值得关注的问题。特别是如果顶部的对象是您的自定义对象，那么您需要检查使用这些对象的代码，以确定它们在使用后是否被成功释放。</li><li id="a53c" class="mw mx iq ky b kz nf lc ng lf nh lj ni ln nj lr nb nc nd ne bi translated">“Monitor”选项卡也是检查资源利用率的一个方便的地方。如果您的堆大小(橙色图形)随着时间不断增加，甚至在多次垃圾收集周期后也没有下降(如下图所示)，这就是查找内存泄漏的问题所在。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi om"><img src="../Images/e3de2c15523c52e978e2e6c780ab0fff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7gB0bablecPnh_xA8t9iOg.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">作者截图。</figcaption></figure><p id="9c60" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一旦使用上述步骤分析了内存利用率，您就能够查明是什么对象导致了内存泄漏问题。回到你的相关代码并重构它。确保您正在适当地释放所有未使用的对象。垃圾回收将无法要求内存，而您的代码仍然会引用该内存。因此，显式释放代码中在处理过程中不再需要的对象总是一个好的做法。</p><p id="8d31" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当您采用按使用付费模式时，云资源的低效利用可能会浪费您的资金，而不会为您的公司增加任何商业价值。即使在固定付费模式下，优化您的云资源利用率以最大化您的投资收益始终是一个好的做法。</p><p id="5d7a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">继续使用SSH连接和VisualVM工具，以便更好地理解您的应用程序JVM性能和资源利用过程。它将帮助您快速解决任何内存泄漏或其他与资源利用相关的问题。</p><p id="f6bf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">感谢您阅读文章。希望你觉得有用。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h2 id="9db6" class="nw ma iq bd mb on oo dn mf op oq dp mj lf or os ml lj ot ou mn ln ov ow mp ox bi translated">参考资料:</h2><ol class=""><li id="2211" class="mw mx iq ky b kz mr lc ms lf oy lj oz ln pa lr pb nc nd ne bi translated">下载VisualVM的链接—<a class="ae kv" href="https://visualvm.github.io/download.html" rel="noopener ugc nofollow" target="_blank">https://visualvm.github.io/download.html</a></li><li id="960a" class="mw mx iq ky b kz nf lc ng lf nh lj ni ln nj lr pb nc nd ne bi translated">链接到Tanzu网站—<a class="ae kv" href="https://tanzu.vmware.com/application-modernization-recipes/observability/enabling-jmx-for-pivotal-platform-java-apps" rel="noopener ugc nofollow" target="_blank">https://Tanzu . VMware . com/application-modernization-recipes/observability/enabling-JMX-for-pivotal-platform-Java-apps</a></li></ol></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h2 id="227b" class="nw ma iq bd mb on oo dn mf op oq dp mj lf or os ml lj ot ou mn ln ov ow mp ox bi translated">您可能也喜欢阅读:</h2><div class="pc pd gp gr pe pf"><a href="https://medium.com/illumination/google-career-certificates-6-months-professional-courses-is-set-to-replace-college-degrees-3b21c7e57b23" rel="noopener follow" target="_blank"><div class="pg ab fo"><div class="ph ab pi cl cj pj"><h2 class="bd ir gy z fp pk fr fs pl fu fw ip bi translated">谷歌职业证书:为期6个月的专业课程将取代大学学位</h2><div class="pm l"><h3 class="bd b gy z fp pk fr fs pl fu fw dk translated">谷歌将在招聘过程中考虑这些证书相当于相关工作岗位的四年制学位。</h3></div><div class="pn l"><p class="bd b dl z fp pk fr fs pl fu fw dk translated">medium.com</p></div></div><div class="po l"><div class="pp l pq pr ps po pt kp pf"/></div></div></a></div></div></div>    
</body>
</html>