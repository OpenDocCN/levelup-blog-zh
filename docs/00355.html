<html>
<head>
<title>A Beginner’s Guide to Webpack 4</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Webpack 4初学者指南</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/a-beginners-guide-to-webpack-4-a8cade06f092?source=collection_archive---------0-----------------------#2019-01-23">https://levelup.gitconnected.com/a-beginners-guide-to-webpack-4-a8cade06f092?source=collection_archive---------0-----------------------#2019-01-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="ea23" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在科技世界里，唯一不变的是变化。流行模块bundler Webpack经历了一次大规模更新，现已发布第4版。Webpack 4提供了巨大的性能改进，零配置，旨在减轻开发人员的工作。本教程将介绍Webpack的核心基础知识，帮助您入门。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/195c2e31092ae97bf81019c7eaef39d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*94ZhvvcXzyzCwuUVjxljhA.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">只是网络包的东西！</figcaption></figure><h1 id="7566" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">什么是Webpack？</h1><p id="5de5" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">Webpack是一个<strong class="jp ir">构建工具，它将所有的<em class="me">资产，包括Javascript、图像、字体和CSS，放到一个依赖图中。</em></strong> Webpack允许你在源代码中使用<code class="fe mf mg mh mi b">require()</code>指向本地文件，比如图像，并决定它们在最终的Javascript包中如何处理，比如用指向CDN的URL替换路径。</p><h1 id="6a82" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">依赖图的简史</h1><p id="7cc8" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">Webpack给了我们一个依赖图。那是什么意思？</p><p id="6a0c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在早期，我们通过以特定的顺序包含文件来“管理”Javascript依赖关系:</p><pre class="km kn ko kp gt mj mi mk ml aw mm bi"><span id="eff9" class="mn lc iq mi b gy mo mp l mq mr">&lt;script src="jquery.min.js"&gt;&lt;/script&gt;  <br/>&lt;script src="jquery.some.plugin.js"&gt;&lt;/script&gt;  <br/>&lt;script src="main.js"&gt;&lt;/script&gt;</span></pre><p id="2357" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这太慢了，因为它导致了过多的HTTP请求。然后我们发展到在构建步骤中连接和缩小我们的脚本:</p><pre class="km kn ko kp gt mj mi mk ml aw mm bi"><span id="07b3" class="mn lc iq mi b gy mo mp l mq mr">// build-script.js<br/>var scripts = [  <br/>    'jquery.min.js',<br/>    'jquery.some.plugin.js',<br/>    'main.js'<br/>].concat().uglify().writeTo('bundle.js');</span><span id="eebd" class="mn lc iq mi b gy ms mp l mq mr">// Everything our app needs!<br/>&lt;script src="bundle.js"&gt;&lt;/script&gt;</span></pre><p id="ed24" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这仍然<strong class="jp ir">依赖于串联文件</strong>的手动排序。更糟糕的是，代码只能通过全局变量进行通信！第一个脚本声明了一个全局<code class="fe mf mg mh mi b">jQuery</code>变量，然后<code class="fe mf mg mh mi b">jquery.some.plugin.js</code>创建了一个新的全局，或者修改了全局<code class="fe mf mg mh mi b">jQuery</code>对象。呸。</p><p id="8817" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们使用CommonJS或ES6模块将我们的Javascript放到一个真正的<strong class="jp ir">依赖图中。我们制作明确描述他们需求的小文件。这是一件好事！</strong></p><pre class="km kn ko kp gt mj mi mk ml aw mm bi"><span id="3568" class="mn lc iq mi b gy mo mp l mq mr">// Version.js<br/>module.exports = { version: 1.0 };</span><span id="13cd" class="mn lc iq mi b gy ms mp l mq mr">// App.js<br/>var config = require('./Version.js');  <br/>console.log('App Version:', config.version);</span></pre><p id="1056" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">浏览器不支持<code class="fe mf mg mh mi b">require()</code>，所以我们用一个构建工具将上述文件转换成浏览器可以正常执行的“捆绑”文件。</p><p id="c2b9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">像Browserify这样的工具已经解开了你的<code class="fe mf mg mh mi b">require()</code>调用，并构建了“捆绑”的Javascript文件发送给浏览器。Webpack在哪里出现？</p><h1 id="b249" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">快速启动</h1><ol class=""><li id="b984" class="mt mu iq jp b jq lz ju ma jy mv kc mw kg mx kk my mz na nb bi translated">让我们创建一个目录。</li></ol><pre class="km kn ko kp gt mj mi mk ml aw mm bi"><span id="a759" class="mn lc iq mi b gy mo mp l mq mr">mkdir webpack_demo &amp;&amp; cd webpack_demo</span></pre><p id="2d6e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2.初始化<code class="fe mf mg mh mi b">yarn</code>或<code class="fe mf mg mh mi b">npm</code>，随你喜欢。这将设置一个package.json。</p><pre class="km kn ko kp gt mj mi mk ml aw mm bi"><span id="dad2" class="mn lc iq mi b gy mo mp l mq mr">npm init</span><span id="71c5" class="mn lc iq mi b gy ms mp l mq mr">// OR</span><span id="fde8" class="mn lc iq mi b gy ms mp l mq mr">yarn init</span></pre><p id="1d30" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">3.在devDependencies中添加新的webpack 4.x</p><pre class="km kn ko kp gt mj mi mk ml aw mm bi"><span id="dcf6" class="mn lc iq mi b gy mo mp l mq mr">npm install --save-dev webpack webpack-cli</span><span id="246e" class="mn lc iq mi b gy ms mp l mq mr">// OR</span><span id="8791" class="mn lc iq mi b gy ms mp l mq mr">yarn add webpack webpack-cli --dev</span></pre><p id="230b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">4.现在打开<code class="fe mf mg mh mi b">package.json</code>和一个构建脚本。</p><pre class="km kn ko kp gt mj mi mk ml aw mm bi"><span id="16a2" class="mn lc iq mi b gy mo mp l mq mr">"scripts: {<br/>    "build": "webpack"<br/>}</span></pre><p id="26f8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">保存它，现在尝试运行</p><pre class="km kn ko kp gt mj mi mk ml aw mm bi"><span id="09cd" class="mn lc iq mi b gy mo mp l mq mr">npm run build</span></pre><p id="c5da" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当你按下命令时</p><pre class="km kn ko kp gt mj mi mk ml aw mm bi"><span id="711d" class="mn lc iq mi b gy mo mp l mq mr">ERROR <strong class="mi ir">in</strong> Entry module not found: Error: Can't resolve './src' in '~/webpack_demo'</span></pre><p id="b168" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Webpack正在寻找指向“”的入口点。/src ”,我们的项目中目前还没有<code class="fe mf mg mh mi b">src</code>目录。</p><p id="ad4c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">以前，我们需要在<code class="fe mf mg mh mi b">webpack.config.js</code>中指定这一点，但是如前所述，我们不需要在Webpack 4中定义入口点。因此，让我们将<code class="fe mf mg mh mi b">./src/index.js</code>创建为默认值，并键入以下代码。它会把这个包分成。/dist/main.js</p><pre class="km kn ko kp gt mj mi mk ml aw mm bi"><span id="2d14" class="mn lc iq mi b gy mo mp l mq mr"><strong class="mi ir"><em class="me">console</em></strong>.log('hello webpack');</span></pre><p id="67c9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在再试一次</p><pre class="km kn ko kp gt mj mi mk ml aw mm bi"><span id="9f1d" class="mn lc iq mi b gy mo mp l mq mr">npm run build</span></pre><p id="dcc1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，当你点击这个命令，你会遇到这个警告。</p><pre class="km kn ko kp gt mj mi mk ml aw mm bi"><span id="dab2" class="mn lc iq mi b gy mo mp l mq mr">WARNING in configuration<br/>The 'mode' option has not been set, webpack will fallback to 'production' for this value. Set 'mode' option to 'development' or<br/> 'production' to enable defaults for each environment.<br/>You can also set it to 'none' to disable any default behavior. Learn more: <a class="ae nc" href="https://webpack.js.org/concepts/mode/" rel="noopener ugc nofollow" target="_blank">https://webpack.js.org/concepts/mode/</a></span></pre><h1 id="c25a" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">网络包模式</h1><p id="c507" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">Webpack附带了两个配置文件。即。,</p><ul class=""><li id="274c" class="mt mu iq jp b jq jr ju jv jy nd kc ne kg nf kk ng mz na nb bi translated"><strong class="jp ir">开发</strong>配置——使用<code class="fe mf mg mh mi b">webpack-dev-server</code>(热重装)，调试启用等</li><li id="91f9" class="mt mu iq jp b jq nh ju ni jy nj kc nk kg nl kk ng mz na nb bi translated"><strong class="jp ir">Production</strong>config——这将产生一个在生产环境中使用的优化的、最小化的(丑陋的JS)source mapped包。</li></ul><p id="29fc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有了新的模式特性，Webpack 4通过简单地在命令中添加一个模式参数来默认处理这些问题。我们上面遇到的警告是缺少<code class="fe mf mg mh mi b">mode</code>。在你的<code class="fe mf mg mh mi b">package.json</code> Webpack中找不到确定正确构建路径的模式。要指定模式，只需将以下内容添加到package.json中:</p><pre class="km kn ko kp gt mj mi mk ml aw mm bi"><span id="7b69" class="mn lc iq mi b gy mo mp l mq mr">"scripts": {<br/>    "dev": "webpack --mode development",<br/>    "build": "webpack --mode production"<br/>}</span></pre><p id="5d25" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">生产模式允许许多现成的优化。包括缩小、范围提升、树抖动代码分割等等。另一方面，开发模式针对编译速度进行了优化，只不过提供了一个未缩小的包。</p><h1 id="15f5" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">用Babel 7传输Javascript ES6</h1><p id="b739" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">现代Javascript大部分是用ES6写的，但并不是每个浏览器都知道如何处理ES6。我们需要对它进行转换，以便代码可以在任何地方工作。</p><p id="3d5b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个转换步骤称为<strong class="jp ir">传输</strong>。Transpiling是采用ES6并使其能被旧浏览器理解的行为。</p><p id="d431" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Webpack不知道如何进行转换，但他的朋友称之为<strong class="jp ir"> loaders </strong>:变形金刚。</p><p id="2800" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> babel-loader </strong>是用于传输ES6及以上版本，下至ES5的webpack加载器。</p><p id="be70" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">要开始使用加载程序，我们需要安装一些依赖项。特别是:</p><ul class=""><li id="5fcb" class="mt mu iq jp b jq jr ju jv jy nd kc ne kg nf kk ng mz na nb bi translated">巴别塔核心</li><li id="231b" class="mt mu iq jp b jq nh ju ni jy nj kc nk kg nl kk ng mz na nb bi translated">巴贝尔装载机</li><li id="8a30" class="mt mu iq jp b jq nh ju ni jy nj kc nk kg nl kk ng mz na nb bi translated">babel预置env用于将Javascript ES6代码编译成ES5</li></ul><p id="0a30" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们开始吧:</p><pre class="km kn ko kp gt mj mi mk ml aw mm bi"><span id="e52b" class="mn lc iq mi b gy mo mp l mq mr">yarn add babel-core babel-loader babel-preset-env --dev</span><span id="9e36" class="mn lc iq mi b gy ms mp l mq mr">// OR</span><span id="abcf" class="mn lc iq mi b gy ms mp l mq mr">npm install @babel/core babel-loader @babel/preset-env --save-dev</span></pre><p id="7f4c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，通过创建一个名为<strong class="jp ir">的新文件来配置Babel。项目文件夹中的babelrc </strong>:</p><pre class="km kn ko kp gt mj mi mk ml aw mm bi"><span id="137b" class="mn lc iq mi b gy mo mp l mq mr">{<br/>    "presets": [<br/>        "env"<br/>    ]<br/>}<!-- --> </span></pre><p id="9981" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你在这一步面临一些问题，你可能需要更新。从旧预设到新预设的babelrc文件" @babel/preset-env "</p><pre class="km kn ko kp gt mj mi mk ml aw mm bi"><span id="51b1" class="mn lc iq mi b gy mo mp l mq mr">{<br/>    "presets": [<br/>        "@babel/preset-env"<br/>    ]<br/>}</span></pre><p id="d87b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们达到了分歧，我们有2个选项来配置babel-loader:</p><ul class=""><li id="cf9e" class="mt mu iq jp b jq jr ju jv jy nd kc ne kg nf kk ng mz na nb bi translated">使用webpack的配置文件</li><li id="5fd7" class="mt mu iq jp b jq nh ju ni jy nj kc nk kg nl kk ng mz na nb bi translated">使用—模块绑定您的npm脚本</li></ul><pre class="km kn ko kp gt mj mi mk ml aw mm bi"><span id="f681" class="mn lc iq mi b gy mo mp l mq mr">"scripts": {<br/>    "dev": "webpack --mode development --module-bind js=babel-loader",<br/>    "build": "webpack --mode production --module-bind js=babel-loader"<br/>}</span></pre><p id="3812" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">或</strong></p><p id="6bf9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">创建一个<code class="fe mf mg mh mi b">webpack.config.js</code></p><pre class="km kn ko kp gt mj mi mk ml aw mm bi"><span id="6b26" class="mn lc iq mi b gy mo mp l mq mr">module.exports = {<br/>  module: {<br/>    rules: [<br/>      {<br/>        test: /\.js$/,<br/>        exclude: /node_modules/,<br/>        use: {<br/>          loader: "babel-loader"<br/>        }<br/>      }<br/>    ]<br/>  }<br/>}</span></pre><p id="7752" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我选择创建一个<code class="fe mf mg mh mi b">webpack.config.js</code>,原因很简单——零配置适用于入口点、默认输出和指定模式。通过使用一个配置文件，它保持了<code class="fe mf mg mh mi b">npm</code>脚本的整洁和平静。</p><blockquote class="nm nn no"><p id="a60a" class="jn jo me jp b jq jr js jt ju jv jw jx np jz ka kb nq kd ke kf nr kh ki kj kk ij bi translated">没有必要指定入口点，除非您想要自定义它。</p></blockquote><p id="2060" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Webpack需要另外两个组件来处理HTML: h <code class="fe mf mg mh mi b">tml-webpack-plugin</code>和<code class="fe mf mg mh mi b">html-loader</code>。</p><p id="488f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">添加依赖项:</p><pre class="km kn ko kp gt mj mi mk ml aw mm bi"><span id="0b89" class="mn lc iq mi b gy mo mp l mq mr">npm install html-webpack-plugin html-loader --save-dev</span><span id="cfd5" class="mn lc iq mi b gy ms mp l mq mr">// OR</span><span id="73a8" class="mn lc iq mi b gy ms mp l mq mr">yarn add html-webpack-plugin html-loader --save-dev</span></pre><p id="d930" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在将以下内容添加到您的webpack.config.js中</p><pre class="km kn ko kp gt mj mi mk ml aw mm bi"><span id="66ce" class="mn lc iq mi b gy mo mp l mq mr">plugins: [<br/>    new HtmlWebPackPlugin({<br/>        template: "./src/index.html",<br/>        filename: "./index.html"<br/>    })<br/>]</span></pre><p id="0481" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在重新构建</p><pre class="km kn ko kp gt mj mi mk ml aw mm bi"><span id="d4d4" class="mn lc iq mi b gy mo mp l mq mr">npm run build</span></pre><p id="0f66" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">并且检查文件<code class="fe mf mg mh mi b">dist/index.html</code>你找到你的html minifed了吗？这就是Webpack能做到的！</p><h1 id="779e" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">将CSS提取到文件中</h1><p id="f668" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">现在我们在<code class="fe mf mg mh mi b">dist</code>目录中有了作为<code class="fe mf mg mh mi b">main.js</code>的小型JavaScript文件和作为<code class="fe mf mg mh mi b">index.html</code>的小型HTML文件，那么CSS呢？Webpack不知道将CSS提取到文件中。以前是<strong class="jp ir">extract-text-web pack-plugin</strong>的工作。但不幸的是，该插件不能很好地与Webpack 4兼容。</p><blockquote class="nm nn no"><p id="2dbe" class="jn jo me jp b jq jr js jt ju jv jw jx np jz ka kb nq kd ke kf nr kh ki kj kk ij bi translated"><em class="iq">extract-text-webpack-plugin已经到了维护它成为太多负担的地步，而且升级一个主要的web pack版本由于它的问题而变得复杂和麻烦也不是第一次了。迈克尔·辛尼亚斯基</em></p></blockquote><p id="bb23" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">但是，Webpack 4有一个新的选项，<a class="ae nc" href="https://github.com/webpack-contrib/mini-css-extract-plugin" rel="noopener ugc nofollow" target="_blank">mini-CSS-extract-plugin</a>，它将帮助我们克服这个问题。所以，让我们试试这个。</p><p id="2e5d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> <em class="me">注</em> </strong> <em class="me">:务必将Webpack更新到4.2.0版本。否则mini-css-extract-plugin就不行了！</em></p><p id="8719" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们首先需要安装的是<code class="fe mf mg mh mi b">css-loader</code>(目前)。我们现在使用的是普通的CSS，但是你可以选择你喜欢的。常见的装载机有<code class="fe mf mg mh mi b">scss-loader</code>、<code class="fe mf mg mh mi b">post-css-loader</code>等。要安装css-loader和mini-css-extract-plugin，只需运行以下命令。</p><pre class="km kn ko kp gt mj mi mk ml aw mm bi"><span id="9a93" class="mn lc iq mi b gy mo mp l mq mr">npm install mini-css-extract-plugin css-loader --save-dev</span></pre><p id="6184" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来我们需要的是一个CSS文件。在src目录中创建一个<code class="fe mf mg mh mi b">index.css</code>,添加下面的代码。</p><pre class="km kn ko kp gt mj mi mk ml aw mm bi"><span id="2f57" class="mn lc iq mi b gy mo mp l mq mr">h1 {<br/>    color: rebeccapurple;<br/>}</span></pre><p id="d3d1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，我们需要配置我们的新插件，所以在<code class="fe mf mg mh mi b">webpack.config.js</code>中添加以下代码</p><pre class="km kn ko kp gt mj mi mk ml aw mm bi"><span id="b81b" class="mn lc iq mi b gy mo mp l mq mr">const MiniCssExtractPlugin = require("mini-css-extract-plugin");<br/>plugins: [<br/>       new MiniCssExtractPlugin({<br/>        filename: "[name].css",<br/>        chunkFilename: "[id].css"<br/>    })<br/>]</span></pre><p id="fb7d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">整个<code class="fe mf mg mh mi b">webpack.config.js</code>会是这个样子。</p><pre class="km kn ko kp gt mj mi mk ml aw mm bi"><span id="f816" class="mn lc iq mi b gy mo mp l mq mr">const HtmlWebPackPlugin = require("html-webpack-plugin");<br/>const MiniCssExtractPlugin = require("mini-css-extract-plugin");<br/>module.exports = {<br/>    module: {<br/>        rules: [<br/>            {<br/>                test: /\.js$/,<br/>                exclude: /node_modules/,<br/>                use: {<br/>                    loader: "babel-loader"<br/>                }<br/>            },<br/>            {<br/>                test: /\.html$/,<br/>                use: [<br/>                    {<br/>                        loader: "html-loader",<br/>                        options: { minimize: true }<br/>                    }<br/>                ]<br/>            },<br/>            {<br/>                test: /\.css$/,<br/>                use: [MiniCssExtractPlugin.loader, "css-loader"]<br/>            }<br/>        ]<br/>    },<br/>    plugins: [<br/>        new HtmlWebPackPlugin({<br/>            template: "./src/index.html",<br/>            filename: "./index.html"<br/>        }),<br/>        new MiniCssExtractPlugin({<br/>            filename: "[name].css",<br/>            chunkFilename: "[id].css"<br/>        })<br/>    ]<br/>};</span></pre><p id="4f6b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，将CSS文件导入到主JS文件中</p><pre class="km kn ko kp gt mj mi mk ml aw mm bi"><span id="00bd" class="mn lc iq mi b gy mo mp l mq mr"><strong class="mi ir">import './index.css'</strong>;<br/><strong class="mi ir"><em class="me">console</em></strong>.log('hello webpack');</span></pre><p id="50eb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在运行构建</p><pre class="km kn ko kp gt mj mi mk ml aw mm bi"><span id="302d" class="mn lc iq mi b gy mo mp l mq mr">npm run build</span></pre><p id="bfe9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">检查<code class="fe mf mg mh mi b">dist</code>目录，你会看到<code class="fe mf mg mh mi b">main.css</code>。这个文件是由Webpack从我们导入的CSS文件中精心制作的。现在，检查索引页面，看看你的CSS现在工作了。</p><h1 id="e1cc" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">无需重新加载即可查看更改？</h1><p id="b477" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">每当你修改代码时，你需要执行<code class="fe mf mg mh mi b">npm run dev</code>吗？这远非理想。</p><p id="a3fb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">用Webpack配置开发服务器只需一分钟。</p><p id="e234" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一旦配置完毕<a class="ae nc" href="https://github.com/webpack/webpack-dev-server" rel="noopener ugc nofollow" target="_blank"> Webpack开发服务器</a>将在浏览器中启动你的应用程序。每当你改变一个文件时，它也会自动刷新浏览器的窗口。要设置Webpack开发服务器，请安装包含以下内容的软件包:</p><pre class="km kn ko kp gt mj mi mk ml aw mm bi"><span id="e233" class="mn lc iq mi b gy mo mp l mq mr">npm install webpack-dev-server --save-dev</span></pre><p id="2423" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">要在不手动重新加载页面的情况下查看更新，修改<code class="fe mf mg mh mi b">package.json</code>中的dev server命令</p><pre class="km kn ko kp gt mj mi mk ml aw mm bi"><span id="2faa" class="mn lc iq mi b gy mo mp l mq mr"><strong class="mi ir">"dev"</strong>: <strong class="mi ir">"NODE_ENV=development webpack-dev-server --content-base dist --hot --mode development"</strong>,<br/><strong class="mi ir">"build"</strong>: <strong class="mi ir">"webpack --mode production"</strong></span></pre><p id="bb0b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这使得Webpack中的热模块替换成为可能，它显示了代码中的新变化(在<code class="fe mf mg mh mi b">css</code>或<code class="fe mf mg mh mi b">js</code>或任何文件中，只要Webpack知道如何加载它),而无需完全重新加载页面。用<code class="fe mf mg mh mi b">npm run dev</code>重启服务器，尝试修改你的CSS。您会注意到页面中的变化，而不需要实际重新加载页面。</p><h2 id="8c82" class="mn lc iq bd ld ns nt dn lh nu nv dp ll jy nw nx lp kc ny nz lt kg oa ob lx oc bi translated">结论</h2><p id="d065" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">让我们回顾一下我们所学的内容:</p><ol class=""><li id="a0b3" class="mt mu iq jp b jq jr ju jv jy nd kc ne kg nf kk my mz na nb bi translated">什么是Webpack？</li><li id="8bc5" class="mt mu iq jp b jq nh ju ni jy nj kc nk kg nl kk my mz na nb bi translated">如何从Webpack开始？</li><li id="e791" class="mt mu iq jp b jq nh ju ni jy nj kc nk kg nl kk my mz na nb bi translated">什么是webpack模式？</li><li id="1793" class="mt mu iq jp b jq nh ju ni jy nj kc nk kg nl kk my mz na nb bi translated">什么是运输？如何用巴别塔7处理JavaScript ES6</li><li id="b79f" class="mt mu iq jp b jq nh ju ni jy nj kc nk kg nl kk my mz na nb bi translated">如何将CSS解压到一个文件？</li><li id="4b1c" class="mt mu iq jp b jq nh ju ni jy nj kc nk kg nl kk my mz na nb bi translated">什么是webpack-dev-server</li></ol><p id="42d8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">谢谢你花时间来看我的文章！</p><p id="a4a2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你喜欢这篇文章，放下一些掌声，<a class="ae nc" href="https://medium.com/@bhavikbamania" rel="noopener">在Medium上关注我</a>，也和你的朋友分享这篇文章。你也可以在<a class="ae nc" href="https://twitter.com/bhavikbamania" rel="noopener ugc nofollow" target="_blank"> twitter </a>和<a class="ae nc" href="https://www.instagram.com/bhavikbamania/" rel="noopener ugc nofollow" target="_blank"> instagram </a>上关注我。</p><p id="0532" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下次见！</p></div><div class="ab cl od oe hu of" role="separator"><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi"/></div><div class="ij ik il im in"><figure class="km kn ko kp gt kq gh gi paragraph-image"><a href="https://levelup.gitconnected.com"><div class="gh gi ok"><img src="../Images/9914c5dd23ac08b70eea6f4f9ba6fed2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E6CoI_MRyZ1JInNPsBSHtA.png"/></div></a></figure><div class="ol om gp gr on oo"><a href="https://gitconnected.com/learn/webpack" rel="noopener  ugc nofollow" target="_blank"><div class="op ab fo"><div class="oq ab or cl cj os"><h2 class="bd ir gy z fp ot fr fs ou fu fw ip bi translated">学习Webpack -最佳Webpack教程(2019) | gitconnected</h2><div class="ov l"><h3 class="bd b gy z fp ot fr fs ou fu fw dk translated">8大Webpack教程-免费学习Webpack。课程由开发人员提交并投票，使您能够…</h3></div><div class="ow l"><p class="bd b dl z fp ot fr fs ou fu fw dk translated">gitconnected.com</p></div></div><div class="ox l"><div class="oy l oz pa pb ox pc kv oo"/></div></div></a></div></div></div>    
</body>
</html>