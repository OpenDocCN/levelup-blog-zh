<html>
<head>
<title>Setting up MySQL with Ruby on Rails 7 on Ubuntu 20.04</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Ubuntu 20.04上用Ruby on Rails 7设置MySQL</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/setting-up-mysql-with-ruby-on-rails-7-on-ubuntu-20-04-f6bbbb833db9?source=collection_archive---------8-----------------------#2022-04-24">https://levelup.gitconnected.com/setting-up-mysql-with-ruby-on-rails-7-on-ubuntu-20-04-f6bbbb833db9?source=collection_archive---------8-----------------------#2022-04-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/4844325393ef9725400a6cd9ec829026.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0Ug6yQp90qha7heZJSNHMA.png"/></div></div></figure><p id="21df" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> MySQL </strong>是最流行的关系数据库系统之一。与Postgres不同，这是一个纯粹的关系数据库，有时RoR开发者更喜欢使用它。</p><p id="1028" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在本教程中，我将向您展示如何安装它，创建一个角色，并将数据库与Ruby on Rails应用程序链接起来。</p><p id="b8d4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们开始吧！</p></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><h1 id="ef59" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">第一步。安装MySQL</h1><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="5566" class="mk le iq mg b gy ml mm l mn mo">sudo apt-get update<br/>sudo apt-get install mysql-server mysql-client libmysqlclient-dev</span></pre><p id="12de" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe mp mq mr mg b">mysql-server</code>是一个通用数据库包。</p><p id="bd28" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe mp mq mr mg b">mysql-client</code>包含额外的实用程序和功能。</p><p id="e27f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe mp mq mr mg b">libmysqlclient-dev</code>用于编译C程序与MySQL通信。</p></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><h1 id="4391" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">第二步。创建用户</h1><p id="95a4" class="pw-post-body-paragraph jy jz iq ka b kb ms kd ke kf mt kh ki kj mu kl km kn mv kp kq kr mw kt ku kv ij bi translated">下面的命令旨在设置一些比默认的Ubuntu(和MySQL)安装更安全的初始参数。</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="82e0" class="mk le iq mg b gy ml mm l mn mo">sudo mysql_secure_installation</span></pre><p id="ccfc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">对于最快的设置，只需一步一步地按Enter键。</p><p id="e060" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">之后进入<code class="fe mp mq mr mg b">mysql</code>环境:</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="b1ff" class="mk le iq mg b gy ml mm l mn mo">sudo mysql</span></pre><p id="75c8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">要创建新角色，请使用您的用户名(替换为您的用户名)和密码输入以下命令:</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="c8df" class="mk le iq mg b gy ml mm l mn mo">CREATE USER '&lt;your_username&gt;'@'localhost' IDENTIFIED BY '&lt;your_password&gt;';</span></pre><p id="c6b1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">将所有权限授予该用户。</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="df61" class="mk le iq mg b gy ml mm l mn mo">GRANT ALL PRIVILEGES ON *.* TO '&lt;your_username&gt;'@'localhost' WITH GRANT OPTION;</span></pre><p id="d8d5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后跑</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="ae73" class="mk le iq mg b gy ml mm l mn mo">exit</span></pre><p id="032e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，尝试用新用户进入<code class="fe mp mq mr mg b">mysql</code>环境(并输入密码):</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="3e75" class="mk le iq mg b gy ml mm l mn mo">mysql -u &lt;your_username&gt; -p</span></pre><p id="155e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果它打开得好，再次退出mysql环境。</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="0c76" class="mk le iq mg b gy ml mm l mn mo">exit</span></pre></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><h1 id="528f" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">第三步。创建Rails应用程序</h1><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="a1ab" class="mk le iq mg b gy ml mm l mn mo">rails new app -d mysql<br/>cd app</span></pre><p id="4003" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在为Rails安装<strong class="ka ir"> MySQL适配器</strong>。</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="b251" class="mk le iq mg b gy ml mm l mn mo">gem install mysql2</span></pre><p id="6bfc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为了存储秘密，我使用了<a class="ae mx" href="https://blog.saeloun.com/2019/10/10/rails-6-adds-support-for-multi-environment-credentials.html" rel="noopener ugc nofollow" target="_blank">凭证</a>。</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="c5d5" class="mk le iq mg b gy ml mm l mn mo">EDITOR=nano rails credentials:edit</span></pre><p id="8ef8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">添加数据库用户名和密码。</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="9fcf" class="mk le iq mg b gy ml mm l mn mo">database:<br/>  username: &lt;your_username&gt;<br/>  password: &lt;your_password&gt;</span></pre><p id="c1c2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe mp mq mr mg b">Ctrl + X</code> <strong class="ka ir">、</strong> <code class="fe mp mq mr mg b">Y</code>和<code class="fe mp mq mr mg b">Enter</code>。</p><p id="dbe7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">更新<code class="fe mp mq mr mg b">database.yml</code></p><figure class="mb mc md me gt jr"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="f27e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">创建和迁移数据库</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="86ed" class="mk le iq mg b gy ml mm l mn mo">rails db:create db:migrate</span></pre><p id="032d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">最后一步—启动服务器。</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="3b04" class="mk le iq mg b gy ml mm l mn mo">rails s</span></pre></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><p id="6f0f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">万岁！🎉希望本教程能帮助你用Rails设置MySQL。在接下来的教程中再见。</p></div></div>    
</body>
</html>