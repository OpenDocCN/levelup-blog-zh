<html>
<head>
<title>Animate React with Framer Motion</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">动画反应与帧运动</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/animate-react-with-framer-motion-c761a7ad1c22?source=collection_archive---------0-----------------------#2019-07-24">https://levelup.gitconnected.com/animate-react-with-framer-motion-c761a7ad1c22?source=collection_archive---------0-----------------------#2019-07-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="f2a9" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">从基础到复杂的配合动画</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/4e281cb359fa9ccc556e05a95f750fef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*FrHs_jO6MczjNf6t.png"/></div></div></figure><p id="2da8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><a class="ae ln" href="https://www.framer.com/motion/" rel="noopener ugc nofollow" target="_blank"> Framer-motion </a>是一个为<a class="ae ln" href="https://www.framer.com/" rel="noopener ugc nofollow" target="_blank"> Framer </a>中的动画提供动力的库，它现在是一个独立的包，我们可以在React应用程序中使用。它有一个非常简单的声明式API，使得用最少的代码创建和编排复杂的动画变得容易。在这篇文章中，我们将从非常基础的动画开始，逐渐过渡到更高级的。</p><p id="391e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="lo">注意:由于GIF图像的帧速率较低，文章中的动画示例可能看起来不流畅。放心，真正的动画都是</em> <strong class="kt ir"> <em class="lo">油滑</em> </strong> <em class="lo">。你可以在</em> <a class="ae ln" href="https://codesandbox.io/s/framer-motion-intro-96bu3" rel="noopener ugc nofollow" target="_blank"> <em class="lo">沙盒这里</em> </a> <em class="lo">和他们一起玩。</em></p><h1 id="1b78" class="lp lq iq bd lr ls lt lu lv lw lx ly lz jw ma jx mb jz mc ka md kc me kd mf mg bi translated">设置</h1><p id="90ef" class="pw-post-body-paragraph kr ks iq kt b ku mh jr kw kx mi ju kz la mj lc ld le mk lg lh li ml lk ll lm ij bi translated">我们可以用<code class="fe mm mn mo mp b">yarn add framer-motion</code>命令安装framer-motion。</p><p id="a562" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">为了动画元素，我们需要抛弃原始的HTML元素(<code class="fe mm mn mo mp b">div</code>、<code class="fe mm mn mo mp b">span</code>、<code class="fe mm mn mo mp b">path</code>等)。)而支持他们的“注入运动”的同行——<code class="fe mm mn mo mp b">motion.div</code>、<code class="fe mm mn mo mp b">motion.span</code>、<code class="fe mm mn mo mp b">motion.path</code>等。这些元素暴露了我们添加动画所需的属性。</p><h1 id="34e5" class="lp lq iq bd lr ls lt lu lv lw lx ly lz jw ma jx mb jz mc ka md kc me kd mf mg bi translated">让事情动起来</h1><p id="fe4a" class="pw-post-body-paragraph kr ks iq kt b ku mh jr kw kx mi ju kz la mj lc ld le mk lg lh li ml lk ll lm ij bi translated">为了创建最简单的动画，我们可以指定<code class="fe mm mn mo mp b">animate</code>属性，该属性接受一个具有我们想要制作动画的CSS属性的对象。这就是我们如何制作<code class="fe mm mn mo mp b">div</code>的不透明度和背景颜色的动画:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mq mr l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/247debb118924f6ee1e543320bf205da.png" data-original-src="https://miro.medium.com/v2/resize:fit:272/0*8zDWpDRO3T7GAddY.gif"/></div><figcaption class="mt mu gj gh gi mv mw bd b be z dk translated">演示1:在装载时制作动画</figcaption></figure><p id="db9d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们传递给<code class="fe mm mn mo mp b">animate</code>的属性表示动画的最终状态<strong class="kt ir">。Framer-motion将根据指定的CSS属性或其默认值来推断初始状态。例如，CSS元素的默认不透明度是<code class="fe mm mn mo mp b">1</code>(即使我们没有明确设置它)，所以framer-motion知道如何将它动画到<code class="fe mm mn mo mp b">0.5</code>。</strong></p><p id="abf2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们也可以使用<code class="fe mm mn mo mp b">initial</code> prop来设置动画CSS属性的初始值。它还接受一个带有CSS属性的对象，告诉framer-motion初始值应该是什么样的。在下面的例子中，我们通过动画<code class="fe mm mn mo mp b">y</code>和<code class="fe mm mn mo mp b">opacity</code>属性淡入矩形:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mq mr l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/51e960e78d100b3d4aa64f3c7f7ce87c.png" data-original-src="https://miro.medium.com/v2/resize:fit:276/0*ygayMrZNlBbZnFS9.gif"/></div><figcaption class="mt mu gj gh gi mv mw bd b be z dk translated">演示2:使用初始状态制作动画</figcaption></figure><p id="3bf7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">值得一提的是，属性<code class="fe mm mn mo mp b">y</code>很特殊——它不是真正的CSS属性，但framer-motion理解它。有一堆与CSS <code class="fe mm mn mo mp b">transform</code>相关的属性在framer-motion中有快捷方式，所以当我们更改<code class="fe mm mn mo mp b">y</code>属性时，我们实际上是将动画应用于<code class="fe mm mn mo mp b">transform: translateY()</code>属性。同样，还有<code class="fe mm mn mo mp b">scale</code>、<code class="fe mm mn mo mp b">rotate</code>、<code class="fe mm mn mo mp b">scaleX</code>、<code class="fe mm mn mo mp b">scaleY</code>等一些属性，你可以在这里找到完整的列表<a class="ae ln" href="https://www.framer.com/api/motion/component/#transform" rel="noopener ugc nofollow" target="_blank">。</a></p><h1 id="09d2" class="lp lq iq bd lr ls lt lu lv lw lx ly lz jw ma jx mb jz mc ka md kc me kd mf mg bi translated">动画状态变化</h1><p id="b40e" class="pw-post-body-paragraph kr ks iq kt b ku mh jr kw kx mi ju kz la mj lc ld le mk lg lh li ml lk ll lm ij bi translated">到目前为止，我们所做的动画只在组件挂载时运行。现在让我们来看看当一些内部状态改变时，我们如何使元素动画化。</p><p id="1e51" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们可以根据内部状态将<code class="fe mm mn mo mp b">animation</code>属性设置为不同的值，当状态改变时，framer-motion将在这些值之间制作动画:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mq mr l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi my"><img src="../Images/3fd7b3bf81745750df1cf70d7789da63.png" data-original-src="https://miro.medium.com/v2/resize:fit:316/0*G-jAHfKvcyF5mE8b.gif"/></div><figcaption class="mt mu gj gh gi mv mw bd b be z dk translated">演示3:点击时动画div</figcaption></figure><p id="9178" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">请注意，组件仅在状态改变时重新渲染，而不是在每个动画帧上重新渲染，这使得动画非常高效。</p><h1 id="479f" class="lp lq iq bd lr ls lt lu lv lw lx ly lz jw ma jx mb jz mc ka md kc me kd mf mg bi translated">变体</h1><p id="7bdd" class="pw-post-body-paragraph kr ks iq kt b ku mh jr kw kx mi ju kz la mj lc ld le mk lg lh li ml lk ll lm ij bi translated">成帧器运动的真正力量来自于使用<strong class="kt ir">变体</strong>。让我们从探索如何重写前面的例子来使用变体开始。</p><p id="0e1c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们将开始从<code class="fe mm mn mo mp b">animate</code> prop提取动画属性的内联定义到一个单独的对象中。这个对象将包含键-值对，其中键是一些有意义的名称，我们给我们的动画属性，值是属性本身。然后我们可以将这个变体对象传递给<code class="fe mm mn mo mp b">variants</code> prop，在<code class="fe mm mn mo mp b">animation</code>中，我们可以根据我们给它们的字符串名称来切换动画:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mq mr l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi my"><img src="../Images/d1bf44677ba8331ced3338b832b167e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:316/0*XocuTq6UiiZ1xpGA.gif"/></div><figcaption class="mt mu gj gh gi mv mw bd b be z dk translated">演示4:点击时制作div动画(同样，但是使用变体)</figcaption></figure><p id="6ea2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这个例子可行，但不是很有用。变体的强大之处在于在整个组件树中编排复杂的动画，为了看到这一点，我们需要一个稍微大一点的例子。</p><p id="03f2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在下面的组件中，我们有一个容器<code class="fe mm mn mo mp b">div</code>，里面有三个子容器<code class="fe mm mn mo mp b">div</code>。容器<code class="fe mm mn mo mp b">div</code>使用了我们之前见过的相同的<code class="fe mm mn mo mp b">onClick</code>动画:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mq mr l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/73b1aab6a67e55924cfe09b1113d661d.png" data-original-src="https://miro.medium.com/v2/resize:fit:508/0*J0s9Gg9UY1yaTRYI.gif"/></div><figcaption class="mt mu gj gh gi mv mw bd b be z dk translated">演示5:动画div</figcaption></figure><p id="0162" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，我们可以通过设置子元素自己的variants对象，使子元素与父元素同时具有动画效果。当子动画的描述性名称与父动画的描述性名称匹配时，子动画将与父动画同时被触发。</p><p id="05a4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">请注意<code class="fe mm mn mo mp b">container</code>和<code class="fe mm mn mo mp b">box</code>变体如何拥有相同的键<code class="fe mm mn mo mp b">active</code>和<code class="fe mm mn mo mp b">disabled</code>:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mq mr l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi na"><img src="../Images/6dfb83315e14bef9ac5b8bafdd15cf6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:528/0*LOBR0bfofvOOm1dH.gif"/></div><figcaption class="mt mu gj gh gi mv mw bd b be z dk translated">演示6:用子元素制作div动画</figcaption></figure><h1 id="1665" class="lp lq iq bd lr ls lt lu lv lw lx ly lz jw ma jx mb jz mc ka md kc me kd mf mg bi translated">配置变体</h1><p id="d592" class="pw-post-body-paragraph kr ks iq kt b ku mh jr kw kx mi ju kz la mj lc ld le mk lg lh li ml lk ll lm ij bi translated">变体还允许我们编排子动画。我们可以通过在动画对象中提供<code class="fe mm mn mo mp b">transition</code>属性来实现。</p><p id="5c00" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">例如，我们可以设置<code class="fe mm mn mo mp b">staggerChildren</code> children属性，该属性指定子动画之间的延迟秒数:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mq mr l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi na"><img src="../Images/9aa4218df14c90ad606d8f318f281832.png" data-original-src="https://miro.medium.com/v2/resize:fit:528/0*maUlt_ScQOPq301m.gif"/></div><figcaption class="mt mu gj gh gi mv mw bd b be z dk translated">演示7:交错子元素</figcaption></figure><p id="6c11" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">请注意，仅当我们将<strong class="kt ir">转换为给定的变量</strong>时，才应用转换。由于我们在<code class="fe mm mn mo mp b">active</code>变量中定义了<code class="fe mm mn mo mp b">transition</code>属性，所以交错动画仅在我们从<code class="fe mm mn mo mp b">disabled</code> <strong class="kt ir">过渡到</strong> <code class="fe mm mn mo mp b">active</code>时应用，而在我们从<code class="fe mm mn mo mp b">active</code>过渡到<code class="fe mm mn mo mp b">disabled</code>时不应用。</p><p id="3531" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">默认情况下，变体同时开始为父元素及其子元素设置动画。我们可以使用<code class="fe mm mn mo mp b">when</code>属性来控制这种行为。我们可以将其设置为<code class="fe mm mn mo mp b">beforeChildren</code>以使父元素首先动画化，或者设置为<code class="fe mm mn mo mp b">afterChildren</code>以使父元素在其子元素之后动画化:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mq mr l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/38560937b5ac58c403af288596276d53.png" data-original-src="https://miro.medium.com/v2/resize:fit:504/0*iy2BHmEvd-5bmG7X.gif"/></div><figcaption class="mt mu gj gh gi mv mw bd b be z dk translated">演示8:在子对象之前激活父对象</figcaption></figure><p id="9749" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">使用这种配置，父元素<code class="fe mm mn mo mp b">div</code>首先改变背景颜色，然后子元素以交错的延迟旋转。</p><p id="dcff" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们可以控制更多的变量属性——动画延迟、交错方向等。你可以在framer-motion <a class="ae ln" href="https://www.framer.com/api/motion/animation/#variants" rel="noopener ugc nofollow" target="_blank">文档</a>中找到更多信息。</p><h1 id="bafd" class="lp lq iq bd lr ls lt lu lv lw lx ly lz jw ma jx mb jz mc ka md kc me kd mf mg bi translated">包扎</h1><p id="498b" class="pw-post-body-paragraph kr ks iq kt b ku mh jr kw kx mi ju kz la mj lc ld le mk lg lh li ml lk ll lm ij bi translated">在本文中，我们看到了使用framer-motion提供的声明性API来激活React组件是多么容易。然而，我们只是触及了表面，因为framer-motion还有很多功能——手势、拖动、使用SVG路径等等。如果您有兴趣了解更多信息，请查看我的新课程，它涵盖了framer-motion提供的所有强大功能:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><a href="https://octocourses.com/framer-motion"><div class="gh gi nc"><img src="../Images/9bc86b2ed01b29b4a747346ee4251cfb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nfjeNMYbX08EkOEHMsedPQ.png"/></div></a></figure></div><div class="ab cl nd ne hu nf" role="separator"><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni"/></div><div class="ij ik il im in"><p id="1a77" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="lo">最初发表于</em><a class="ae ln" href="https://konstantinlebedev.com/framer-motion-intro/" rel="noopener ugc nofollow" target="_blank"><em class="lo">https://konstantinlebedev.com</em></a><em class="lo">。</em></p></div><div class="ab cl nd ne hu nf" role="separator"><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni"/></div><div class="ij ik il im in"><div class="kg kh ki kj gt nk"><a href="https://gitconnected.com/learn/react" rel="noopener  ugc nofollow" target="_blank"><div class="nl ab fo"><div class="nm ab nn cl cj no"><h2 class="bd ir gy z fp np fr fs nq fu fw ip bi translated">学习React -最佳React教程(2019) | gitconnected</h2><div class="nr l"><h3 class="bd b gy z fp np fr fs nq fu fw dk translated">前57名React教程-免费学习React。课程由开发人员提交并投票，使您能够…</h3></div><div class="ns l"><p class="bd b dl z fp np fr fs nq fu fw dk translated">gitconnected.com</p></div></div><div class="nt l"><div class="nu l nv nw nx nt ny kp nk"/></div></div></a></div></div></div>    
</body>
</html>