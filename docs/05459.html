<html>
<head>
<title>Improving your Docker development experience with VSCode + Remote extension</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用VSCode +远程扩展改善您的Docker开发体验</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/improving-your-docker-development-experience-with-vscode-remote-containers-extension-da81d288e0c1?source=collection_archive---------7-----------------------#2020-08-31">https://levelup.gitconnected.com/improving-your-docker-development-experience-with-vscode-remote-containers-extension-da81d288e0c1?source=collection_archive---------7-----------------------#2020-08-31</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/0b9ebd124ace4df8920497efa867f9ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5kxe29xZlakgrZGt"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">照片由<a class="ae kf" href="https://unsplash.com/@clemhlrdt?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">克莱门特·H</a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><h2 id="113d" class="kg kh it bd ki kj kk dn kl km kn dp ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">Docker是编写和交付软件的革命性方式。然而，在某些情况下，创建您自己的图像的过程可能会很痛苦。</h2></div><div class="ab cl lc ld hx le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="im in io ip iq"><h2 id="83e1" class="kg kh it bd ki kj kk dn kl km kn dp ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">码头工人</h2><p id="2497" class="pw-post-body-paragraph lj lk it ll b lm ln lo lp lq lr ls lt kp lu lv lw kt lx ly lz kx ma mb mc md im bi translated">我喜欢来自他们自己的<a class="ae kf" href="https://www.docker.com/" rel="noopener ugc nofollow" target="_blank">网站</a>的Docker定义:</p><blockquote class="me mf mg"><p id="25d2" class="lj lk mh ll b lm mi lo lp lq mj ls lt mk ml lv lw mm mn ly lz mo mp mb mc md im bi translated">我们帮助开发者和开发团队构建和发布应用。</p></blockquote><p id="0e79" class="pw-post-body-paragraph lj lk it ll b lm mi lo lp lq mj ls lt kp ml lv lw kt mn ly lz kx mp mb mc md im bi translated">在我看来，那个定义是真的。除了这个平台带来的所有好处之外，作为一名软件开发人员，我想说主要的收获是可以非常快速地尝试新工具，并且不会搞乱我的本地环境。</p><p id="3432" class="pw-post-body-paragraph lj lk it ll b lm mi lo lp lq mj ls lt kp ml lv lw kt mn ly lz kx mp mb mc md im bi translated">然而，就像上面的所有东西一样，在多次使用和尝试不同的方法后，我们开始发现一些不使用该工具时不会出现的问题。例如，当我们需要创建Docker图像时。</p><h2 id="0b09" class="kg kh it bd ki kj kk dn kl km kn dp ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">创建Docker图像</h2><p id="9d44" class="pw-post-body-paragraph lj lk it ll b lm ln lo lp lq lr ls lt kp lu lv lw kt lx ly lz kx ma mb mc md im bi translated">这个过程本身非常简单，我们需要做的只是创建一个<em class="mh"> DockerFile </em>文件。<em class="mh"> </em>很简单吧？</p><p id="d8c5" class="pw-post-body-paragraph lj lk it ll b lm mi lo lp lq mj ls lt kp ml lv lw kt mn ly lz kx mp mb mc md im bi translated">所以，假设我想创建一个Docker映像来运行一个非常基本的<a class="ae kf" href="https://golang.org/" rel="noopener ugc nofollow" target="_blank"> Go </a>项目。</p><p id="6556" class="pw-post-body-paragraph lj lk it ll b lm mi lo lp lq mj ls lt kp ml lv lw kt mn ly lz kx mp mb mc md im bi translated">我们需要做的是创建两个文件。第一个是负责配置映像的Dockerfile，另一个是Go代码本身。</p><figure class="mq mr ms mt gt ju"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="356e" class="pw-post-body-paragraph lj lk it ll b lm mi lo lp lq mj ls lt kp ml lv lw kt mn ly lz kx mp mb mc md im bi translated">太棒了。现在，让我们运行它。</p><h2 id="146d" class="kg kh it bd ki kj kk dn kl km kn dp ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">构建和运行</h2><p id="64d7" class="pw-post-body-paragraph lj lk it ll b lm ln lo lp lq lr ls lt kp lu lv lw kt lx ly lz kx ma mb mc md im bi translated">这些步骤是:</p><ol class=""><li id="caa8" class="mw mx it ll b lm mi lq mj kp my kt mz kx na md nb nc nd ne bi translated">构建映像(假设我们将两个文件放在同一个目录中)</li></ol><pre class="mq mr ms mt gt nf ng nh ni aw nj bi"><span id="03d6" class="kg kh it ng b gy nk nl l nm nn">docker build -t mygoapp .</span></pre><p id="e0a6" class="pw-post-body-paragraph lj lk it ll b lm mi lo lp lq mj ls lt kp ml lv lw kt mn ly lz kx mp mb mc md im bi translated">2.运行它</p><pre class="mq mr ms mt gt nf ng nh ni aw nj bi"><span id="a697" class="kg kh it ng b gy nk nl l nm nn">docker run mygoapp</span></pre><p id="8ffe" class="pw-post-body-paragraph lj lk it ll b lm mi lo lp lq mj ls lt kp ml lv lw kt mn ly lz kx mp mb mc md im bi translated">就它而言，输出将是:</p><pre class="mq mr ms mt gt nf ng nh ni aw nj bi"><span id="ae03" class="kg kh it ng b gy nk nl l nm nn">hello!</span></pre><p id="5148" class="pw-post-body-paragraph lj lk it ll b lm mi lo lp lq mj ls lt kp ml lv lw kt mn ly lz kx mp mb mc md im bi translated">简单吗？那么，为什么会如此痛苦呢？</p><p id="61bf" class="pw-post-body-paragraph lj lk it ll b lm mi lo lp lq mj ls lt kp ml lv lw kt mn ly lz kx mp mb mc md im bi translated">假设我们想要更新代码，向容器添加更多资源，甚至调试它。您能想象在大型应用程序中实现它吗？试图识别问题，连续多次构建、运行和测试？</p><p id="6d88" class="pw-post-body-paragraph lj lk it ll b lm mi lo lp lq mj ls lt kp ml lv lw kt mn ly lz kx mp mb mc md im bi translated">幸运的是，有一个工具可以帮助我们以一种简单的方式解决这些问题。所以，我们来检查一下！</p></div><div class="ab cl lc ld hx le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="im in io ip iq"><h2 id="3246" class="kg kh it bd ki kj kk dn kl km kn dp ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">Visual Studio代码</h2><p id="b21b" class="pw-post-body-paragraph lj lk it ll b lm ln lo lp lq lr ls lt kp lu lv lw kt lx ly lz kx ma mb mc md im bi translated">我想说，如果你没有使用Visual Studio代码<a class="ae kf" href="https://code.visualstudio.com/" rel="noopener ugc nofollow" target="_blank">的话，你可以给它一个机会，它是一个很棒的工具(免费的),有很多插件和扩展。实际上，我这么说是有偏见的，因为我从第一个版本开始就一直在使用这个工具:)</a></p><p id="75b5" class="pw-post-body-paragraph lj lk it ll b lm mi lo lp lq mj ls lt kp ml lv lw kt mn ly lz kx mp mb mc md im bi translated">此外，在<a class="ae kf" href="https://insights.stackoverflow.com/survey/2019#development-environments-and-tools" rel="noopener ugc nofollow" target="_blank"> Stack Overflow 2019调查</a>中，Visual Studio代码被评为最受欢迎的开发人员环境工具。</p><p id="d600" class="pw-post-body-paragraph lj lk it ll b lm mi lo lp lq mj ls lt kp ml lv lw kt mn ly lz kx mp mb mc md im bi translated">然而，仅仅工具本身并不能帮助我们解决我们正在谈论的问题。正如我之前说过的，关于Visual Studio代码最有用的一点是大量的插件。我们将要使用的是远程开发。让我们检查一下。</p><h2 id="6b37" class="kg kh it bd ki kj kk dn kl km kn dp ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">Visual Studio远程开发扩展</h2><p id="0d77" class="pw-post-body-paragraph lj lk it ll b lm ln lo lp lq lr ls lt kp lu lv lw kt lx ly lz kx ma mb mc md im bi translated">来自扩展<a class="ae kf" href="https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.vscode-remote-extensionpack" rel="noopener ugc nofollow" target="_blank">网站</a>的定义:</p><blockquote class="me mf mg"><p id="ba26" class="lj lk mh ll b lm mi lo lp lq mj ls lt mk ml lv lw mm mn ly lz mo mp mb mc md im bi translated"><!-- -->远程开发扩展包允许你打开容器中的任何文件夹，在远程机器上，或者在Linux的Windows子系统(WSL)中，并且利用VS代码的全部特性集。</p></blockquote><p id="7803" class="pw-post-body-paragraph lj lk it ll b lm mi lo lp lq mj ls lt kp ml lv lw kt mn ly lz kx mp mb mc md im bi translated">基本上，我们可以直接在容器内部编辑代码。那么，让我们来看看它是如何工作的。我们需要什么:</p><ul class=""><li id="b431" class="mw mx it ll b lm mi lq mj kp my kt mz kx na md no nc nd ne bi translated"><a class="ae kf" href="https://code.visualstudio.com/" rel="noopener ugc nofollow" target="_blank"> Visual Studio代码</a></li><li id="f636" class="mw mx it ll b lm np lq nq kp nr kt ns kx nt md no nc nd ne bi translated"><a class="ae kf" href="https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.vscode-remote-extensionpack" rel="noopener ugc nofollow" target="_blank">远程开发</a></li></ul><h2 id="775e" class="kg kh it bd ki kj kk dn kl km kn dp ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">代码</h2><p id="0140" class="pw-post-body-paragraph lj lk it ll b lm ln lo lp lq lr ls lt kp lu lv lw kt lx ly lz kx ma mb mc md im bi translated">我们的文件夹结构非常简单，基本上我们需要的是docker文件和同一级别的源代码，就像这样:</p><pre class="mq mr ms mt gt nf ng nh ni aw nj bi"><span id="74fc" class="kg kh it ng b gy nk nl l nm nn">.</span><span id="e841" class="kg kh it ng b gy nu nl l nm nn">├── Dockerfile</span><span id="6de2" class="kg kh it ng b gy nu nl l nm nn">└── hello.go</span></pre><p id="7321" class="pw-post-body-paragraph lj lk it ll b lm mi lo lp lq mj ls lt kp ml lv lw kt mn ly lz kx mp mb mc md im bi translated">在Visual Studio中，您应该能够在左下角位置看到远程开发扩展。此外，系统会提示您选择打开当前文件夹的方式，让我们选择“在容器中重新打开”</p><figure class="mq mr ms mt gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nv"><img src="../Images/1a93b8f2669ced536f0b11a717e73e3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UIDmOqAkDrX_jrQCmeWi1A.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">打开容器中的当前文件夹</figcaption></figure><p id="a064" class="pw-post-body-paragraph lj lk it ll b lm mi lo lp lq mj ls lt kp ml lv lw kt mn ly lz kx mp mb mc md im bi translated">现在，我们将从“Dockerfile”中选择:</p><figure class="mq mr ms mt gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nw"><img src="../Images/5de3fee53dad7ab96f205f04e159bf63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E0x9ZgVas2cypxVMemp3Sw.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">容器选项</figcaption></figure><p id="6bcc" class="pw-post-body-paragraph lj lk it ll b lm mi lo lp lq mj ls lt kp ml lv lw kt mn ly lz kx mp mb mc md im bi translated">配置完成后，我们可以观察到一些情况:</p><figure class="mq mr ms mt gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nx"><img src="../Images/6ff501c0e4f15e36378007e8f63c6d8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iVdKrhbzv7bLmezKwmMEkg.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">远程容器</figcaption></figure><ul class=""><li id="6277" class="mw mx it ll b lm mi lq mj kp my kt mz kx na md no nc nd ne bi translated">。devcontainer文件夹:这个文件夹包含了<em class="mh"> devcontainer.json </em>。这个文件负责配置您的环境(更多细节<a class="ae kf" href="https://code.visualstudio.com/docs/remote/containers-tutorial#_devcontainerjson" rel="noopener ugc nofollow" target="_blank">在这里</a>)。</li><li id="f98e" class="mw mx it ll b lm np lq nq kp nr kt ns kx nt md no nc nd ne bi translated">终端:您以根用户身份登录</li><li id="c39b" class="mw mx it ll b lm np lq nq kp nr kt ns kx nt md no nc nd ne bi translated">Dev容器扩展:标签显示了您当前的环境</li></ul><h2 id="83c0" class="kg kh it bd ki kj kk dn kl km kn dp ko kp kq kr ks kt ku kv kw kx ky kz la lb bi translated">在容器内编辑</h2><p id="aa3d" class="pw-post-body-paragraph lj lk it ll b lm ln lo lp lq lr ls lt kp lu lv lw kt lx ly lz kx ma mb mc md im bi translated">现在我们能够直接在容器内部编辑:</p><figure class="mq mr ms mt gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ny"><img src="../Images/4ee4b030707db33797b213628a750ced.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C4UjUFDe9PF8BE7Gb-drrw.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">在容器内编辑</figcaption></figure><p id="d871" class="pw-post-body-paragraph lj lk it ll b lm mi lo lp lq mj ls lt kp ml lv lw kt mn ly lz kx mp mb mc md im bi translated">此外，您还有一些与容器本身相关的选项:</p><figure class="mq mr ms mt gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nz"><img src="../Images/87afa3ca136ea666cf5958fd603e8626.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ONoo8uESkZ38zYCNL2yRKg.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">容器选项</figcaption></figure><p id="9d38" class="pw-post-body-paragraph lj lk it ll b lm mi lo lp lq mj ls lt kp ml lv lw kt mn ly lz kx mp mb mc md im bi translated">在我的例子中，我更新了“工作目录”并选择了“重建容器”。</p><figure class="mq mr ms mt gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi oa"><img src="../Images/63692665454ac879f2cdc027c6f7c976.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dciJl3UAZp0O8QejLc9JQw.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">WORDIR已更新</figcaption></figure><p id="9234" class="pw-post-body-paragraph lj lk it ll b lm mi lo lp lq mj ls lt kp ml lv lw kt mn ly lz kx mp mb mc md im bi translated">正如你所看到的，我的WORKDIR已经被更改，我已经直接在Visual Studio代码中更新了。</p><p id="6114" class="pw-post-body-paragraph lj lk it ll b lm mi lo lp lq mj ls lt kp ml lv lw kt mn ly lz kx mp mb mc md im bi translated">值得注意的是，当您在容器中没有源代码时，或者甚至当您有一个仅包含应用程序构建的<a class="ae kf" href="https://docs.docker.com/develop/develop-images/multistage-build/" rel="noopener ugc nofollow" target="_blank">多阶段构建</a>时，这种方法就不能使用。但是，为什么不在你的发展阶段尝试一下呢？:)</p><p id="4065" class="pw-post-body-paragraph lj lk it ll b lm mi lo lp lq mj ls lt kp ml lv lw kt mn ly lz kx mp mb mc md im bi translated">我希望这种方法能像帮助我一样帮助你！</p><p id="596f" class="pw-post-body-paragraph lj lk it ll b lm mi lo lp lq mj ls lt kp ml lv lw kt mn ly lz kx mp mb mc md im bi translated">由于这只是一个简短的小场景，您可以使用更多链接来探索更多选项:</p><div class="ob oc gp gr od oe"><a href="https://code.visualstudio.com/docs/remote/remote-overview" rel="noopener  ugc nofollow" target="_blank"><div class="of ab fo"><div class="og ab oh cl cj oi"><h2 class="bd iu gy z fp oj fr fs ok fu fw is bi translated">Visual Studio代码远程开发</h2><div class="ol l"><h3 class="bd b gy z fp oj fr fs ok fu fw dk translated">Visual Studio代码远程开发允许您使用容器、远程机器或用于Linux的Windows子系统…</h3></div><div class="om l"><p class="bd b dl z fp oj fr fs ok fu fw dk translated">code.visualstudio.com</p></div></div><div class="on l"><div class="oo l op oq or on os jz oe"/></div></div></a></div><div class="ob oc gp gr od oe"><a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.vscode-remote-extensionpack" rel="noopener  ugc nofollow" target="_blank"><div class="of ab fo"><div class="og ab oh cl cj oi"><h2 class="bd iu gy z fp oj fr fs ok fu fw is bi translated">远程开发- Visual Studio市场</h2><div class="ol l"><h3 class="bd b gy z fp oj fr fs ok fu fw dk translated">远程开发扩展包允许您打开容器中的任何文件夹，在远程机器上，或在…</h3></div><div class="om l"><p class="bd b dl z fp oj fr fs ok fu fw dk translated">marketplace.visualstudio.com</p></div></div><div class="on l"><div class="ot l op oq or on os jz oe"/></div></div></a></div><div class="ob oc gp gr od oe"><a href="https://code.visualstudio.com/docs/remote/ssh" rel="noopener  ugc nofollow" target="_blank"><div class="of ab fo"><div class="og ab oh cl cj oi"><h2 class="bd iu gy z fp oj fr fs ok fu fw is bi translated">使用SSH和Visual Studio代码在远程机器上开发</h2><div class="ol l"><h3 class="bd b gy z fp oj fr fs ok fu fw dk translated">Visual Studio Code Remote - SSH扩展允许您打开任何远程机器上的远程文件夹，虚拟…</h3></div><div class="om l"><p class="bd b dl z fp oj fr fs ok fu fw dk translated">code.visualstudio.com</p></div></div><div class="on l"><div class="ou l op oq or on os jz oe"/></div></div></a></div><p id="f0c0" class="pw-post-body-paragraph lj lk it ll b lm mi lo lp lq mj ls lt kp ml lv lw kt mn ly lz kx mp mb mc md im bi translated">你觉得怎么样？这是你已经用过的东西吗？还是换个方式用了？请告诉我，我们非常感谢您的反馈。</p><p id="446a" class="pw-post-body-paragraph lj lk it ll b lm mi lo lp lq mj ls lt kp ml lv lw kt mn ly lz kx mp mb mc md im bi translated">非常感谢您的宝贵时间！</p></div></div>    
</body>
</html>