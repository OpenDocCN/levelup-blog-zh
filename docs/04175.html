<html>
<head>
<title>Create Web Apps That Listen! 👂</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创建监听的Web应用程序！👂</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/create-web-apps-that-listen-e44002e0b4dd?source=collection_archive---------17-----------------------#2020-06-12">https://levelup.gitconnected.com/create-web-apps-that-listen-e44002e0b4dd?source=collection_archive---------17-----------------------#2020-06-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="0397" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你的网络应用也可以有耳朵！</p><p id="55bf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">语音技术是下一件大事，它有巨大的潜力来减少后电晕世界的表面接触。在过去的几年里，我们已经看到谷歌和亚马逊等科技巨头进入虚拟语音助手领域，他们创造的产品不仅能听，还能理解并回复用户的需求。</p><p id="66b8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">虽然谷歌助手和亚马逊Alexa等产品拥有复杂的架构，能够理解用户所说的话，但它们都是从基础开始的，将用户的语音转录为文本。</p><p id="6827" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们看看如何让我们的网络应用程序能够倾听用户的心声。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/f69f972a35c579c5e0b50a466852c44c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BQjdyjPvuit3NYUvnmf5Lw.jpeg"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">倾听很重要。照片由Unsplash上的Alireza Attari拍摄</figcaption></figure><h2 id="6df6" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated">它是如何工作的</h2><p id="7008" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">从技术上来说，谷歌Chrome不执行开箱即用的语音识别。它将音频发送到谷歌的服务器，服务器执行转录并返回结果。这在<a class="ae lb" href="https://www.google.com/chrome/privacy/whitepaper.html#speech" rel="noopener ugc nofollow" target="_blank">谷歌Chrome隐私白皮书</a>中有所提及和澄清。</p><p id="d49e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因为<code class="fe ma mb mc md b">SpeechRecognition</code>使用服务器端API，你的用户必须在线才能使用它。让我们希望谷歌引入本地语音识别，但在此之前，这是一个限制，我们的用户将不得不接受。</p><h2 id="1e12" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated">入门指南</h2><p id="7ad0" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">让我们创建一些带有输入元素和按钮的HTML，它将开始监听用户。请确保您不会在页面加载后立即开始收听，以确保您的用户选择使用此服务。</p><p id="da40" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个starter HTML将给我们一个非常简单的视图，如下所示:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi me"><img src="../Images/7900a225661d7817796e075fca1c4040.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ARHfW1maubrE-u30Tontdg.png"/></div></div></figure><p id="de75" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，我们将添加JavaScript代码片段来启用语音识别&amp;自己看看结果吧！将以下代码添加到您的<code class="fe ma mb mc md b">body</code>元素的<code class="fe ma mb mc md b">script</code>标签中。</p><p id="0671" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这就是我们所需要的听力和语音转换成文本。现在，让我们浏览一下JavaScript代码片段。</p><p id="4ef5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在第2行，我们创建了一个<code class="fe ma mb mc md b">webkitSpeechRecognition</code> API的实例。然后我们创建一个布尔变量来知道浏览器是否应该监听。</p><p id="d565" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后我们定义3个函数，<code class="fe ma mb mc md b">start, stop, and onResult</code>，它们改变按钮的文本以反映正确的状态，并启动或停止识别服务。</p><p id="5cff" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">但是，<code class="fe ma mb mc md b">onResult</code>似乎在做别的事情。它似乎是编译语音识别结果并将其显示给我们的用户的方法。</p><p id="0c50" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当你运行代码并点击按钮开始收听时，Chrome会请求你允许使用麦克风。一旦你点击“允许”，Chrome就会开始听你说什么。一旦你停止讲话，你应该会看到一个<code class="fe ma mb mc md b">SpeechRecognitionEvent</code>贴在控制台上。让我们深入研究一下那个事件。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mf"><img src="../Images/54eb22dc07c639ccb42001e85c40d738.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1odnw1xqPvPRUeC8lmMiXA.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated"><code class="fe ma mb mc md b">The SpeechRecognitionResult event in the Developer Console</code></figcaption></figure><p id="c003" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最重要的属性是<code class="fe ma mb mc md b">results</code>，它是一个<code class="fe ma mb mc md b">SpeechRecognitionResult</code>对象的列表。这里只有一个结果，因为我们只说了一句话，然后就不再听了。</p><p id="ac98" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">结果对象包括一个<code class="fe ma mb mc md b">SpeechRecognitionAlternative</code>对象的列表，第一个对象包括您所说内容的副本和一个介于0和1之间的置信度值。置信度值有助于确定可用选项中哪一个是最正确的副本。</p><p id="d8cb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接收多个<code class="fe ma mb mc md b">SpeechRecognitionAlternative</code>对象在某些情况下会很有用，比如您希望用户选择最佳选项。</p><p id="d04c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe ma mb mc md b">recognition.continous</code>控制是捕获连续结果(<code class="fe ma mb mc md b">true</code>)，还是每次开始识别时只捕获一个结果(<code class="fe ma mb mc md b">false</code>)。</p><p id="c240" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe ma mb mc md b">recognition.interimResults</code>定义了语音识别系统是应该返回中间结果还是只返回最终结果。</p><p id="291f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">API在识别单词和句子方面确实很好，但在标点符号方面就不太好了。</p><h2 id="c8b9" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated">浏览器支持</h2><p id="a05d" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">对Web Speech API语音识别的支持目前仅限于Chrome for Desktop和Android——Chrome从版本33左右开始支持它，但带有前缀接口，因此我们使用<code class="fe ma mb mc md b">webkitSpeechRecognition</code>。</p><p id="b648" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">享受创建倾听的web应用程序的乐趣！👂 ❤️</p></div></div>    
</body>
</html>