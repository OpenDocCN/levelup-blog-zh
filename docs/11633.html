<html>
<head>
<title>How to Show Hue Motion Data on a Website</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在网站上显示色调运动数据</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-show-hue-motion-data-on-a-website-d575796c169?source=collection_archive---------9-----------------------#2022-04-01">https://levelup.gitconnected.com/how-to-show-hue-motion-data-on-a-website-d575796c169?source=collection_archive---------9-----------------------#2022-04-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="a09f" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">了解如何使用飞利浦Hue运动传感器做更多事情，并在网站上显示所有收集的信息</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/ecf12ea660662380bfac76085f1e6889.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*3ok8G2ESQDPGzKaR"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@jstrippa?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">詹姆斯·哈里逊</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</figcaption></figure><p id="dc01" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">也许你已经看过你的色相运动传感器，并认为:“我可以用这个做更多吗？”。你并不孤单。我有完全相同的想法，并开始思考什么是<strong class="lb iu">一个好的用例</strong>。由于飞利浦色调运动传感器捕捉的不仅仅是它是否看到运动的事实，我决定对所有信息做一些事情。</p><p id="6526" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是我决定创建一个网站来放置上的<strong class="lb iu">温度、运动和光照水平的时候。为了完成这个任务，我创建了一个C#。NET 6网站</strong>，可以在这个<a class="ae ky" href="https://github.com/koenvzeijl/HueMotion" rel="noopener ugc nofollow" target="_blank"> GitHub页面</a>找到。如果你想看不同的编程语言，请留下评论，这样我也可以用另一种语言来尝试。</p><h1 id="c9cf" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">1.介绍</h1><p id="31e8" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">在我们可以在网站上展示我们捕获的运动数据之前，我们需要做几件事情。首先，我们要创建一个新的<strong class="lb iu"> C# web应用</strong>。创建应用程序后，就该设置本地配置了。然后我们应该<strong class="lb iu">配置一个HttpClient </strong>来与您的本地桥对话，并创建<strong class="lb iu">适当的服务来使用这个HttpClient </strong>。最后，我们需要在网页上显示我们的运动数据。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ms"><img src="../Images/b7964f7f32c3870f7a0070cf92093750.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*TWpxkOkE4ZSTtGT1.jpg"/></div></div></figure><h1 id="87e8" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">2.创建web应用程序</h1><p id="718a" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">如果你没有这方面的任何经验，我想让你参考一下这个教程，确保你已经安装了Visual Studio。对于本教程，基本的web模板非常合适。为你的网站创建一个新文件夹，例如HueMotion，然后<strong class="lb iu">运行以下命令</strong>:</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="b485" class="my lw it mu b gy mz na l nb nc">dotnet new webapp</span></pre><p id="4f57" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将自动<strong class="lb iu">为您创建一个基本的新web应用程序</strong>。您也可以在Visual Studio 中的<strong class="lb iu">中完成此操作，方法是在启动应用程序后选择“创建新项目”。继续打开由命令或Visual studio创建的<code class="fe nd ne nf mu b">.csproj</code>文件。<strong class="lb iu">尝试运行应用程序</strong>，如果成功，您可以进入下一步。</strong></p><h1 id="33b4" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">3.改变配置</h1><p id="44fe" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">在C#应用程序中，您将配置添加到名为<code class="fe nd ne nf mu b">appsettings.json</code>的设置文件中。为了让这个应用程序工作，我们需要配置您的本地网桥IP和应用程序密钥。如果你还没有这些，请<a class="ae ky" href="https://morehue.com/easily-toggle-philips-hue-depending-on-your-pc-state-v2/" rel="noopener ugc nofollow" target="_blank">跟随这个教程</a>直到第二部分。现在将以下部分添加到appsettings.json中，并用自己的值替换这些值<strong class="lb iu">。</strong></p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="d5b3" class="my lw it mu b gy mz na l nb nc">{   <br/>    ///  <br/>    "HueApi": {<br/>       "BridgeIp": "YOUR_BRIDGE_ID",<br/>       "ApplicationKey": "YOUR_APPLICATION_KEY"<br/>   },<br/>   ///<br/>}</span></pre><h1 id="1319" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">4.配置HttpClient并创建服务</h1><p id="1f9f" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">为了尽可能保持应用程序的整洁，我们希望实现一个使用通用HTTP客户端的最佳实践。有关这个客户端HttpClientFactory的更多信息，请阅读本教程。在将HttpClient添加到<code class="fe nd ne nf mu b">program.cs</code>时，我们需要确保设置了正确的<strong class="lb iu">基址</strong>(带有桥IP)和<strong class="lb iu"> DefaultRequestHeaders </strong>(带有应用程序密钥)。基址现在看起来像这样:<strong class="lb iu"> https:// &lt;您的IP地址&gt; /clip/v2/resource </strong>这使得稍后调用端点更加容易。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="e3bb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如你所见，在本教程中，我们不验证证书并直接返回true。在GitHub项目中，我使用一个<a class="ae ky" href="https://github.com/koenvzeijl/HueMotion/blob/master/HueMotion/CertificateValidator.cs" rel="noopener ugc nofollow" target="_blank"> CertificateValidator </a>来验证从桥返回的证书。</p><p id="f948" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在是添加<a class="ae ky" href="https://github.com/koenvzeijl/HueMotion/blob/master/HueMotion/Services/HueApiService.cs" rel="noopener ugc nofollow" target="_blank"> HueApiService </a>的时候了。在这个服务中，我添加了3种方法来接收来自运动传感器的温度、运动和亮度数据。获取运动数据的示例如下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="0eee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如您在GitHub页面上看到的，该方法使用HttpClient从“/motion”端点获取数据。然后这被转换成一个<a class="ae ky" href="https://github.com/koenvzeijl/HueMotion/blob/master/HueMotion/Models/RootMotion.cs" rel="noopener ugc nofollow" target="_blank"> C#模型</a>并返回到<a class="ae ky" href="https://github.com/koenvzeijl/HueMotion/blob/master/HueMotion/Controllers/HueController.cs" rel="noopener ugc nofollow" target="_blank">控制器</a>。现在，要使用该服务，您需要在您的<code class="fe nd ne nf mu b">program.cs</code>中对其进行如下配置:</p><pre class="kj kk kl km gt mt mu mv mw aw mx bi"><span id="5f5d" class="my lw it mu b gy mz na l nb nc">builder.Services.AddScoped&lt;IHueApiService, HueApiService&gt;();</span></pre><h1 id="fe64" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">5.创建网页</h1><p id="6f9a" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">为了在web页面上显示捕获的数据，我创建了一个新的<a class="ae ky" href="https://github.com/koenvzeijl/HueMotion/blob/master/HueMotion/Controllers/HueController.cs" rel="noopener ugc nofollow" target="_blank"> HueController </a>，它包含3个方法。首先，我们有<code class="fe nd ne nf mu b">MotionSensor</code>方法，该方法<strong class="lb iu">返回实际视图</strong>。然后我们有<code class="fe nd ne nf mu b">GetHueMotionSensorDetails</code>方法来<strong class="lb iu">每20秒刷新一次数据</strong>。最后，我们有一个返回包含所有数据的视图模型的方法。该数据是通过服务中的不同方法获取的。在<a class="ae ky" href="https://github.com/koenvzeijl/HueMotion/blob/master/HueMotion/Views/Hue/MotionSensor.cshtml" rel="noopener ugc nofollow" target="_blank">视图</a>中，我们使用jQuery的这个位每20秒刷新一次数据:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="2a68" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就这样，启动您的应用程序，并在浏览器中看到它运行！如果它不能直接工作，请下载我的GitHub项目并寻找不同之处。</p><p id="2ec8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">提醒</strong>:请更换<code class="fe nd ne nf mu b">appsettings.json</code>的网桥IP和应用密钥</p><h1 id="9e0f" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">6.结论</h1><p id="36e5" class="pw-post-body-paragraph kz la it lb b lc mn ju le lf mo jx lh li mp lk ll lm mq lo lp lq mr ls lt lu im bi translated">在Hue应用程序的<strong class="lb iu">中，你可以用运动传感器</strong>做很多很酷的事情。但是这个传感器<strong class="lb iu">从应用程序中捕获的数据比显示的</strong>要多。在本指南中，我们创建了一个<strong class="lb iu">网站来提取所有数据点</strong>并在一个简单的网页上显示它们。以此为起点，充分发挥你的创造力。如果你想让我写一个不同的很酷的话题，请写在评论里。</p><p id="ba9e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">编码快乐！</p><p id="b1c1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">关于其他指南，请访问我的<a class="ae ky" href="https://morehue.com/category/guides/" rel="noopener ugc nofollow" target="_blank">指南页面</a>。</p></div><div class="ab cl ni nj hx nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="im in io ip iq"><p id="aa3f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">【https://morehue.com】原载于2022年4月1日<a class="ae ky" href="https://morehue.com/how-to-show-hue-motion-data-on-a-website/" rel="noopener ugc nofollow" target="_blank"><em class="np"/></a><em class="np">。</em></p></div></div>    
</body>
</html>