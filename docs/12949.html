<html>
<head>
<title>A step-by-step guide to setup Kubernetes cluster in VirtualBox Ubuntu 20.04 image</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">åœ¨VirtualBox Ubuntu 20.04æ˜ åƒä¸­è®¾ç½®Kubernetesé›†ç¾¤çš„åˆ†æ­¥æŒ‡å—</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://levelup.gitconnected.com/a-step-by-step-guide-to-setup-kubernetes-cluster-in-virtualbox-ubuntu-20-04-image-91d4510bbf1c?source=collection_archive---------0-----------------------#2022-07-26">https://levelup.gitconnected.com/a-step-by-step-guide-to-setup-kubernetes-cluster-in-virtualbox-ubuntu-20-04-image-91d4510bbf1c?source=collection_archive---------0-----------------------#2022-07-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="43cd" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">åªæ˜¯ä¸ºäº†å­¦ä¹ å»ºç«‹Kubernetes</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/7b48c92c98e23f0fe8c7f15da90c5a1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8zTwbTOV7D2jzwiwqwjmeA.jpeg"/></div></div></figure><h1 id="cd73" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">1) Ubuntuæ˜ åƒå‡†å¤‡</h1><p id="ebbd" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated"><strong class="ll ir">ä»Ubuntu <br/> </strong>ä¸‹è½½å›¾ç‰‡åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯<a class="ae mf" href="https://releases.ubuntu.com/20.04/ubuntu-20.04.4-live-server-amd64.iso" rel="noopener ugc nofollow" target="_blank">Ubuntu-20 . 04 . 4-live-server-amd64 . iso</a></p><p id="b49c" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated"><strong class="ll ir"> 1.1)åœ¨Oracle VirtualBoxä¸­è®¾ç½®Ubuntué•œåƒ</strong> <br/>æœ¬ä¾‹ä¸­ä½¿ç”¨çš„éœ€æ±‚:<br/> - RAM: 8Gb <br/> - CPU: 2 <br/> -å…¶ä½™ä¸ºé»˜è®¤<br/> <br/>ç½‘ç»œè®¾ç½®:<br/>é€‚é…å™¨1:åˆ›å»ºä¸€ä¸ªNATç½‘ç»œï¼Œè¿™æ ·k8sèŠ‚ç‚¹å°±å¯ä»¥é€šè¿‡è¿™ä¸ªç½‘ç»œåœ¨è™šæ‹Ÿæœº(VM)å†…éƒ¨è¿›è¡Œé€šä¿¡ã€‚</p><ul class=""><li id="8146" class="ml mm iq ll b lm mg lp mh ls mn lw mo ma mp me mq mr ms mt bi translated">è¦åˆ›å»ºNATç½‘ç»œï¼Œè¯·è½¬åˆ°æ–‡ä»¶-&gt;é¦–é€‰é¡¹-&gt;ç½‘ç»œ</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mu"><img src="../Images/6e931becc06092cc1b2e4ad624180554.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sKrEtnoESjakRDlXAcKt5g.png"/></div></div></figure><ul class=""><li id="5c2b" class="ml mm iq ll b lm mg lp mh ls mn lw mo ma mp me mq mr ms mt bi translated">è¦é€‰æ‹©ç½‘ç»œï¼Œè¯·å³é”®å•å‡»è™šæ‹Ÿæœº-&gt;è®¾ç½®-&gt;ç½‘ç»œ</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mv"><img src="../Images/3a25a93373ca941adbf9cc247e965064.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LRmNaaPeE4tk5b2YVluAxA.png"/></div></div></figure><p id="60fe" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated"><strong class="ll ir"> 1.2)å®‰è£…Ubuntué•œåƒ</strong></p><p id="9d13" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated">é¦–å…ˆé€‰æ‹©ä¹‹å‰ä¸‹è½½çš„isoé•œåƒã€‚<br/>é€‰æ‹©å…‰ç›˜ï¼Œå³é”®- &gt;è®¾ç½®- &gt;å­˜å‚¨- &gt;å…‰ç›˜é€‰æ‹©</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mw"><img src="../Images/a6aa4026fe92462fdc4d1fab88242a30.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h7GZ2qSqNjqa6FmLSks-zQ.png"/></div></div></figure><p id="863a" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated">éµå¾ªå®‰è£…æ­¥éª¤(åšæŒé»˜è®¤è®¾ç½®)ç›´åˆ°é…ç½®æ–‡ä»¶è®¾ç½®æ­¥éª¤ã€‚<br/>å¯¹äºä½ çš„ç¬¬ä¸€ä¸ªk8sèŠ‚ç‚¹ï¼Œåº”è¯¥æ˜¯æ§åˆ¶å¹³é¢èŠ‚ç‚¹ï¼Œæ‰€ä»¥å‘½åå¦‚ä¸‹:<br/> -ä½ çš„åå­—:k8scp <br/> -ä½ çš„æœåŠ¡å™¨åå­—:k8scp <br/> -æŒ‘ä¸€ä¸ªç”¨æˆ·å:k8s <br/> -é€‰æ‹©ä¸€ä¸ªå¯†ç :&lt;ä½ è‡ªå·±çš„å¯†ç &gt; <br/> -ç¡®è®¤ä½ çš„å¯†ç :&lt;ä½ è‡ªå·±çš„å¯†ç &gt;</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mx"><img src="../Images/29b7189505867bc0ebeaf04c7ad1d84b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MzYBZ9G587-x6uOJiSrDFA.png"/></div></div></figure><p id="c8f8" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated">æ¥ä¸‹æ¥ï¼Œåœ¨SSHè®¾ç½®æ­¥éª¤ä¹‹å‰ï¼Œå¦‚æœéœ€è¦é€šè¿‡SSHè®¿é—®èŠ‚ç‚¹ï¼Œè¯·é€‰æ‹©Install OpenSSH serverã€‚</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi my"><img src="../Images/7a7071a8f4663790904326f867e51fb7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wmUfLOLMqABGRXhhPa9r0g.png"/></div></div></figure><p id="67da" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated">ç§ï¼ŒUbuntuå®‰è£…å®Œæˆäº†ã€‚</p><h1 id="7d4d" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">2)åœ¨Ubuntuä¸­å®‰è£…Kubernetes</h1><p id="652c" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated"><strong class="ll ir"> 2.1)å·¥å…·å®‰è£…</strong></p><p id="97e4" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated">æˆ‘ä»¬å°†å®‰è£…Vimä¹‹ç±»çš„å·¥å…·ï¼Œç¨ååœ¨è®¾ç½®Kubernetesæ—¶ä¼šç”¨åˆ°è¿™äº›å·¥å…·ã€‚</p><pre class="kg kh ki kj gt mz na nb nc aw nd bi"><span id="23c4" class="ne ks iq na b gy nf ng l nh ni">sudo -i<br/>apt-get update &amp;&amp; apt-get upgrade -y<br/>apt-get install -y vim</span></pre><p id="2517" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated"><strong class="ll ir"> 2.2)å®¹å™¨è¿è¡Œæ—¶æ¥å£å®‰è£…</strong></p><p id="de56" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated">Kubernetesæ˜¯ä¸€ä¸ªå®¹å™¨ç¼–æ’å¹³å°ï¼ŒCRIæ˜¯ä¸€ä¸ªä¸ä¸åŒå®¹å™¨è¿è¡Œæ—¶äº¤äº’çš„Kubernetes APIã€‚å› æ­¤ï¼Œåœ¨å®‰è£…Kubernetesä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å®‰è£…ä¸€ä¸ªå®¹å™¨è¿è¡Œæ—¶ã€‚</p><p id="ea56" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated">è¿™ä¸ªä¾‹å­ä½¿ç”¨CRI-Oï¼Œä½†æ˜¯æˆ‘ä»¬ä¹Ÿå¯ä»¥å®‰è£…å…¶ä»–å®¹å™¨è¿è¡Œæ—¶ï¼Œæ¯”å¦‚ä½¿ç”¨containerdçš„Dockerã€‚</p><pre class="kg kh ki kj gt mz na nb nc aw nd bi"><span id="d850" class="ne ks iq na b gy nf ng l nh ni">modprobe overlay<br/>modprobe br_netfilter<br/>vim /etc/sysctl.d/k8s.conf<br/>   -&gt; Add the following content into k8s.conf<br/>      net.bridge.bridge-nf-call-iptables = 1 <br/>      net.ipv4.ip_forward = 1 <br/>      net.bridge.bridge-nf-call-ip6tables = 1<br/>sysctl --system</span><span id="ba4a" class="ne ks iq na b gy nj ng l nh ni">export OS=xUbuntu_20.04<br/>export VER=1.22<br/>export WEBSITE=http://download.opensuse.org</span><span id="abb9" class="ne ks iq na b gy nj ng l nh ni">echo "deb $WEBSITE/repositories/devel:/kubic:/libcontainers:/stable:/cri-o:/$VER/$OS/ /" | tee -a /etc/apt/sources.list.d/cri-0.list</span><span id="2d05" class="ne ks iq na b gy nj ng l nh ni">curl -L $WEBSITE/repositories/devel:/kubic:/libcontainers:/stable:/cri-o:/$VER/$OS/Release.key | apt-key add -</span><span id="5c3d" class="ne ks iq na b gy nj ng l nh ni">echo "deb $WEBSITE/repositories/devel:/kubic:/libcontainers:/stable/$OS/ /" | tee -a /etc/apt/sources.list.d/libcontainers.list</span><span id="bb6d" class="ne ks iq na b gy nj ng l nh ni">curl -L $WEBSITE/repositories/devel:/kubic:/libcontainers:/stable/$OS/Release.key | apt-key add -</span><span id="4a44" class="ne ks iq na b gy nj ng l nh ni">apt-get update<br/>apt-get install -y cri-o cri-o-runc</span><span id="9c32" class="ne ks iq na b gy nj ng l nh ni">systemctl daemon-reload<br/>systemctl enable crio<br/>systemctl start crio<br/>systemctl status crio</span></pre><p id="c250" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated"><strong class="ll ir"> 2.3) Kuberneteså®‰è£…</strong></p><p id="ffdc" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated">åœ¨å®‰è£…Kubernetesé›†ç¾¤èŠ‚ç‚¹æ—¶ï¼Œæ‚¨å°†éœ€è¦<code class="fe nk nl nm na b">kubeadm</code> <em class="nn">ã€</em>ã€<code class="fe nk nl nm na b">kubelet</code>å’Œ<code class="fe nk nl nm na b">kubectl</code>ã€‚<code class="fe nk nl nm na b">kubeadm</code>æ˜¯æˆ‘ä»¬å°†ç”¨æ¥<code class="fe nk nl nm na b">init</code>æ§åˆ¶å¹³é¢èŠ‚ç‚¹å’Œ<code class="fe nk nl nm na b">join</code>å·¥ä½œè€…èŠ‚ç‚¹çš„å·¥å…·ã€‚<code class="fe nk nl nm na b">kubelet</code>æ˜¯è¿è¡Œæ¯ä¸ªèŠ‚ç‚¹çš„ä¸»èŠ‚ç‚¹ä»£ç†ã€‚<code class="fe nk nl nm na b">kubectl</code>æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œå¯ä»¥å¯¹é›†ç¾¤è¿è¡Œå‘½ä»¤ã€‚</p><pre class="kg kh ki kj gt mz na nb nc aw nd bi"><span id="6f47" class="ne ks iq na b gy nf ng l nh ni">vim /etc/apt/sources.list.d/kubernetes.list<br/>   -&gt; Add the following content into kubernetes.list<br/>      deb http://apt.kubernetes.io/ kubernetes-xenial main</span><span id="eef8" class="ne ks iq na b gy nj ng l nh ni">curl -s <a class="ae mf" href="https://packages.cloud.google.com/apt/doc/apt-key.gpg" rel="noopener ugc nofollow" target="_blank">https://packages.cloud.google.com/apt/doc/apt-key.gpg</a> | apt-key add -</span><span id="3b5d" class="ne ks iq na b gy nj ng l nh ni">apt-get update</span><span id="6730" class="ne ks iq na b gy nj ng l nh ni">apt-get install -y kubeadm=1.22.1-00 kubelet=1.22.1-00 kubectl=1.22.1-00</span><span id="89b4" class="ne ks iq na b gy nj ng l nh ni">apt-mark hold kubelet kubeadm kubectl</span></pre><p id="d4d8" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated"><strong class="ll ir"> 2.4)è®¾ç½®ç½‘ç»œ</strong></p><p id="924d" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated">è®¾ç½®ç½‘ç»œï¼Œä»¥ä¾¿ä»¥åæ›´å®¹æ˜“ä½¿ç”¨ä¸»æœºåè€Œä¸æ˜¯IPåœ°å€ã€‚</p><pre class="kg kh ki kj gt mz na nb nc aw nd bi"><span id="8e77" class="ne ks iq na b gy nf ng l nh ni">ip addr show<br/>  -&gt; You will see output with 10.130.0.x <br/>     that will be the NAT Network IpAddress</span><span id="c771" class="ne ks iq na b gy nj ng l nh ni">vim /etc/hosts<br/>  -&gt; Add the following content <br/>     10.130.0.5 k8scp</span></pre><p id="852a" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated"><strong class="ll ir"> 2.5)åˆ›å»ºæ§åˆ¶å¹³é¢èŠ‚ç‚¹</strong></p><p id="7c0a" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated">è¿è¡Œ<code class="fe nk nl nm na b">kubeadm init</code>å°†åˆ›å»ºä¸€ä¸ªæ§åˆ¶å¹³é¢èŠ‚ç‚¹</p><pre class="kg kh ki kj gt mz na nb nc aw nd bi"><span id="5bef" class="ne ks iq na b gy nf ng l nh ni">kubeadm init --upload-certs | tee kubeadm-init.out</span></pre><p id="5d0e" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated"><strong class="ll ir"> 2.6)è®¾ç½®Kubernetesé…ç½®</strong></p><p id="0679" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated">æˆ‘ä»¬éœ€è¦è®¾ç½®ä¸€ä¸ªKubeé…ç½®æ¥è®¿é—®Kubernetesé›†ç¾¤ã€‚å¯¹äºæœ¬ä¾‹ï¼Œæˆ‘ä»¬ä½¿ç”¨é›†ç¾¤ç®¡ç†æƒé™è®¾ç½®Kubeé…ç½®ã€‚</p><pre class="kg kh ki kj gt mz na nb nc aw nd bi"><span id="10c9" class="ne ks iq na b gy nf ng l nh ni"># Exit from the root account<br/>mkdir -p $HOME/.kube<br/>sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config<br/>sudo chown $(id -u):$(id -g) $HOME/.kube/config<br/></span></pre><p id="bd4f" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated"><strong class="ll ir"> 2.7)è®¾ç½®å®¹å™¨ç½‘ç»œæ¥å£</strong></p><p id="ffd0" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated">å®ç°Kubernetesç½‘ç»œæ¨¡å‹éœ€è¦CNIæ’ä»¶ã€‚å¯¹äºè¿™ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬ä½¿ç”¨å°èŠ±æ£‰å¸ƒã€‚</p><pre class="kg kh ki kj gt mz na nb nc aw nd bi"><span id="a2f6" class="ne ks iq na b gy nf ng l nh ni">wget <a class="ae mf" href="https://docs.projectcalico.org/manifests/calico.yaml" rel="noopener ugc nofollow" target="_blank">https://docs.projectcalico.org/manifests/calico.yaml</a><br/>kubectl apply -f calico.yaml</span></pre><p id="70d2" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated"><strong class="ll ir"> 2.8)åˆ©ç”¨æ§åˆ¶å¹³é¢èŠ‚ç‚¹</strong></p><p id="7feb" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated">è¿™æ˜¯ä¸€ä¸ªå¯é€‰æ­¥éª¤ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œå‡ºäºå®è·µçš„ç›®çš„ï¼Œæˆ‘ä»¬å°†é€šè¿‡åˆ é™¤æ±¡ç‚¹NoScheduleæ¥åˆ©ç”¨æ§åˆ¶å¹³é¢ã€‚</p><pre class="kg kh ki kj gt mz na nb nc aw nd bi"><span id="5098" class="ne ks iq na b gy nf ng l nh ni">kubectl describe node | grep -i taint<br/>  -&gt; Default control plane will be set as NoSchedule<br/>     To utilize it we have to remove the taint(For practice purpose)</span><span id="5760" class="ne ks iq na b gy nj ng l nh ni">kubectl taint nodes --all node-role.kubernetes.io/master-</span></pre><h1 id="8382" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">3)æ·»åŠ å·¥äººèŠ‚ç‚¹</h1><p id="ff31" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated"><strong class="ll ir"> 3.1)é‡å¤æ•´ä¸ªæ­¥éª¤1 (Ubuntuæ˜ åƒå‡†å¤‡)</strong> <br/>å¯¹äºæ‚¨çš„ç¬¬äºŒä¸ªk8sèŠ‚ç‚¹ï¼Œå®ƒåº”è¯¥æ˜¯workerèŠ‚ç‚¹ï¼Œå› æ­¤å°†å…¶å‘½åå¦‚ä¸‹:<br/> -æ‚¨çš„å§“å:k8swoker01 <br/> -æ‚¨çš„æœåŠ¡å™¨çš„å§“å:k8swoker01 <br/> -é€‰æ‹©ç”¨æˆ·å:k8s <br/> -é€‰æ‹©å¯†ç :&lt;æ‚¨è‡ªå·±çš„å¯†ç &gt; <br/> -ç¡®è®¤æ‚¨è‡ªå·±çš„å¯†ç :&lt;æ‚¨è‡ªå·±çš„</p><p id="9ed3" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated"><strong class="ll ir"> 3.2)é‡å¤æ­¥éª¤2çš„ä¸€éƒ¨åˆ†(åœ¨Ubuntuä¸­å®‰è£…Kubernetes)</strong><br/>-å·¥å…·å®‰è£…<br/> -å®¹å™¨è¿è¡Œæ—¶æ¥å£å®‰è£…<br/> - Kuberneteså®‰è£…<br/> -è®¾ç½®ç½‘ç»œ(æ³¨æ„:æ ¹æ®æ§åˆ¶å¹³é¢èŠ‚ç‚¹è®¾ç½®IPåœ°å€å’Œä¸»æœºå)</p><p id="46a2" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated"><strong class="ll ir"> 3.3)åˆ›å»ºå·¥äººèŠ‚ç‚¹</strong></p><p id="648a" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated">å°†å·¥ä½œèŠ‚ç‚¹ä¸æ§åˆ¶å¹³é¢èŠ‚ç‚¹è¿æ¥èµ·æ¥ã€‚æˆ‘ä»¬å¿…é¡»ç”¨<code class="fe nk nl nm na b">kubeadm join</code>åˆ›å»ºä¸€ä¸ªä»¤ç‰Œï¼Œå¹¶ä»<strong class="ll ir">æ§åˆ¶å¹³é¢èŠ‚ç‚¹</strong>ç”Ÿæˆä¸€ä¸ªå®‰å…¨å¯†é’¥(æ³¨æ„:ä¸æ˜¯å½“å‰çš„å·¥ä½œèŠ‚ç‚¹)ã€‚ç„¶åç”¨<strong class="ll ir">å·¥ä½œè€…èŠ‚ç‚¹</strong>ä¸­çš„ä»¤ç‰Œå’Œå¯†é’¥å°†<code class="fe nk nl nm na b">kubeadm join</code>åŠ å…¥é›†ç¾¤ã€‚</p><pre class="kg kh ki kj gt mz na nb nc aw nd bi"><span id="79a3" class="ne ks iq na b gy nf ng l nh ni"># Go to CP node, it will output the token<br/>sudo kubeadm token create<br/> -&gt; output<br/>    gexp9v.w1oe77h0yyuls5nh</span><span id="7859" class="ne ks iq na b gy nj ng l nh ni"># Still at CP node, it will output a secure key<br/>openssl x509 -pubkey -in /etc/kubernetes/pki/ca.crt | openssl rsa -pubin -outform der 2&gt;/dev/null | openssl dgst -sha256 -hex | sed 's/Ë†.* //'<br/>  -&gt; output <br/>    6e7f23199360bba5fb80a98992913b417310b97718bb2fbf9ab99bd00b00e9b0</span><span id="5d6b" class="ne ks iq na b gy nj ng l nh ni"># Go to Worker node<br/>kubeadm join --token gexp9v.w1oe77h0yyuls5nh k8scp:6443 --discovery-token-ca-cert-hash sha256:6e7f23199360bba5fb80a98992913b417310b97718bb2fbf9ab99bd00b00e9b0</span></pre><p id="d7b5" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated">ç§ï¼Œä½ å·²ç»é…ç½®äº†ä¸€ä¸ªKubernetesé›†ç¾¤ã€‚</p><p id="30f7" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated"><strong class="ll ir">æ„Ÿè°¢æ‚¨çš„é˜…è¯»ï¼ï¼</strong></p></div><div class="ab cl no np hu nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="ij ik il im in"><h1 id="0e5f" class="kr ks iq bd kt ku nv kw kx ky nw la lb jw nx jx ld jz ny ka lf kc nz kd lh li bi translated">è®¿é—®é›†ç¾¤çš„å¯é€‰å·¥å…·</h1><p id="ba46" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">æˆ‘ç»å¸¸ä½¿ç”¨çš„è®¿é—®æœåŠ¡å™¨çš„å¯é€‰å·¥å…·æ˜¯MobaXtermã€‚å› æ­¤ï¼Œè¿™é‡Œæœ‰ä¸€äº›é¢å¤–çš„æŠ€å·§æ¥å¸®åŠ©è½»æ¾è®¿é—®é›†ç¾¤ã€‚</p><p id="7082" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated">ä¸ºäº†SSHåˆ°æ‚¨çš„UbuntuæœåŠ¡å™¨ï¼Œæˆ‘ä»¬å¿…é¡»å®‰è£…OpenSSHå¹¶è®¾ç½®ä¸»æœºé€‚é…å™¨ã€‚</p><p id="a507" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated">å¦‚æœæˆ‘ä»¬åœ¨å®‰è£…è¿‡ç¨‹ä¸­æ²¡æœ‰å®‰è£…OpenSSHï¼Œè¯·å®‰è£…å®ƒã€‚æˆ‘ä»¬å¯ä»¥ç™»å½•è™šæ‹Ÿæœºæ¥æ‰§è¡Œ<code class="fe nk nl nm na b">apt install openssh-server</code>ã€‚</p><pre class="kg kh ki kj gt mz na nb nc aw nd bi"><span id="b198" class="ne ks iq na b gy nf ng l nh ni">sudo -i<br/>apt-get update &amp;&amp; apt-get upgrade -y<br/>apt install openssh-server</span></pre><p id="8138" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated">ä¸ºäº†ä½¿å®ƒå¯ä»¥ä»ä¸»æœºè®¿é—®ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‰ç…§è®¾ç½®ã€‚æˆ‘ä»¬å¯ä»¥è½¬åˆ°VirtualBoxï¼Œå³é”®å•å‡»è™šæ‹Ÿæœº-&gt;è®¾ç½®-&gt;ç½‘ç»œ</p><p id="b943" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated">é€‚é…å™¨2:ä½¿ç”¨ä¸»æœºä¸“ç”¨é€‚é…å™¨ï¼Œä»¥ä¾¿ä¸»æœºèƒ½å¤Ÿè®¿é—®è™šæ‹Ÿæœºã€‚</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oa"><img src="../Images/c1635188f8d3495983a5e214c68e240c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QC6oIgGdDlypaRPXCyiokQ.png"/></div></div></figure><p id="88f5" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated">åœ¨Oracle VirtualBoxä¸­ï¼Œä»¥å¯æ‹†å¸æ¨¡å¼å¯åŠ¨æœåŠ¡å™¨<br/>è¦ä»¥å¯æ‹†å¸æ¨¡å¼å¯åŠ¨ï¼Œå³é”®VM- &gt;è®¾ç½®- &gt;å¯åŠ¨- &gt;å¯æ‹†å¸å¯åŠ¨ã€‚</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/b96ff6bb4364cf9c0459d00ac4e98253.png" data-original-src="https://miro.medium.com/v2/resize:fit:1310/format:webp/1*RCV9j2xgnAsoDp9sObc-gA.png"/></div></figure><p id="b93c" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated">æˆ‘ä»¬å°†ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤è·å–ç”±ä¸»æœºä¸“ç”¨é€‚é…å™¨åˆ†é…çš„IPåœ°å€ã€‚å¯¹äºè¿™ä¸ªä¾‹å­ï¼Œæˆ‘çš„IPåœ°å€æ˜¯192.168.56.105ï¼Œæ‰€ä»¥æˆ‘å°†ä½¿ç”¨è¿™ä¸ªåœ°å€é€šè¿‡MobaXtermè¿›è¡ŒSSHã€‚</p><pre class="kg kh ki kj gt mz na nb nc aw nd bi"><span id="09bb" class="ne ks iq na b gy nf ng l nh ni">ip addr show</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oc"><img src="../Images/339dd8beb5a6abcce1e59062f4cb1f37.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H4Nom8prKvvvVWr0ga-QGQ.png"/></div></div></figure><p id="c342" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated">æˆ‘ä»¬å¯ä»¥åœ¨æœåŠ¡å™¨å¯åŠ¨åå…³é—­è™šæ‹Ÿç›’å­çª—å£ï¼Œç»§ç»­åœ¨åå°è¿è¡Œã€‚</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi od"><img src="../Images/4906370d3a1aa6992f8e12eecded9132.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3k40Su_AZ2c9cqZMav8yzQ.png"/></div></div></figure><p id="83f7" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated">ä¸ºäº†è®¾ç½®MobaXtermä¼šè¯ï¼Œæˆ‘ä»¬å°†æä¾›è¿œç¨‹ä¸»æœºä¸­çš„IPåœ°å€å’Œä»¥å‰ç”¨äºè®¾ç½®UbuntuæœåŠ¡å™¨çš„ç”¨æˆ·åã€‚</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oe"><img src="../Images/9762034259f0749e556d14a3b60f4d61.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RPGPcIrTYg1ah5Fois1ZUA.png"/></div></div></figure><p id="0e03" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated">åœ¨ä¼šè¯è®¾ç½®ä¹‹åï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥é€šè¿‡MobaXtermè¿æ¥åˆ°æœåŠ¡å™¨ã€‚</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi of"><img src="../Images/461f777e1d8730d9ca4c9c755257ca91.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NfX9qdWPVOIv92mkbmli4g.png"/></div></div></figure></div><div class="ab cl no np hu nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="ij ik il im in"><h1 id="23a6" class="kr ks iq bd kt ku nv kw kx ky nw la lb jw nx jx ld jz ny ka lf kc nz kd lh li bi translated">åˆ†çº§ç¼–ç </h1><p id="fa81" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">æ„Ÿè°¢æ‚¨æˆä¸ºæˆ‘ä»¬ç¤¾åŒºçš„ä¸€å‘˜ï¼åœ¨ä½ ç¦»å¼€ä¹‹å‰:</p><ul class=""><li id="e5f3" class="ml mm iq ll b lm mg lp mh ls mn lw mo ma mp me mq mr ms mt bi translated">ğŸ‘ä¸ºæ•…äº‹é¼“æŒï¼Œè·Ÿç€ä½œè€…èµ°ğŸ‘‰</li><li id="e8e6" class="ml mm iq ll b lm og lp oh ls oi lw oj ma ok me mq mr ms mt bi translated">ğŸ“°æŸ¥çœ‹<a class="ae mf" href="https://levelup.gitconnected.com/?utm_source=pub&amp;utm_medium=post" rel="noopener ugc nofollow" target="_blank">çº§ç¼–ç å‡ºç‰ˆç‰©</a>ä¸­çš„æ›´å¤šå†…å®¹</li><li id="8149" class="ml mm iq ll b lm og lp oh ls oi lw oj ma ok me mq mr ms mt bi translated">ğŸ””å…³æ³¨æˆ‘ä»¬:<a class="ae mf" href="https://twitter.com/gitconnected" rel="noopener ugc nofollow" target="_blank">æ¨ç‰¹</a> | <a class="ae mf" href="https://www.linkedin.com/company/gitconnected" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a> | <a class="ae mf" href="https://newsletter.levelup.dev" rel="noopener ugc nofollow" target="_blank">æ—¶äº‹é€šè®¯</a></li></ul><p id="96db" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated">ğŸš€ğŸ‘‰<a class="ae mf" href="https://jobs.levelup.dev/jobs?utm_source=pub&amp;utm_medium=post" rel="noopener ugc nofollow" target="_blank"> <strong class="ll ir">è½¯ä»¶å·¥ç¨‹å¸ˆçš„é¡¶çº§å·¥ä½œ</strong> </a></p></div></div>    
</body>
</html>