<html>
<head>
<title>React Tips — Context, Hover, and Input Fields</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">反应提示—上下文、悬停和输入字段</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/react-tips-context-hover-and-input-fields-d055534826ab?source=collection_archive---------13-----------------------#2020-07-21">https://levelup.gitconnected.com/react-tips-context-hover-and-input-fields-d055534826ab?source=collection_archive---------13-----------------------#2020-07-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/de0b1a0597cc1286d2985004f98ec3ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ND1N1zr631aKAMn-"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">Ernesto Bruschi 在Unsplash<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">上拍摄的照片</a></figcaption></figure><p id="4902" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">React是一个用于创建web应用程序和移动应用程序的流行库。</p><p id="f2a2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本文中，我们将了解一些编写更好的React应用程序的技巧。</p><h1 id="804c" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">使用React获取输入字段的值</h1><p id="a560" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">为了用React获取输入字段的值，首先，我们将输入值设置为一个状态。</p><p id="ee27" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们从状态得到最新的值。</p><p id="22e8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="3598" class="mq lf it mm b gy mr ms l mt mu">class InputForm extends React.Component {<br/>  constructor(props) {<br/>    super(props);<br/>    this.state = {<br/>      val: ''<br/>    };<br/>  }</span><span id="1a5a" class="mq lf it mm b gy mv ms l mt mu">  render() {<br/>    return (<br/>      //...<br/>      &lt;input value={this.state.val} onChange={evt =&gt; this.updateInputValue(evt)}/&gt;<br/>      //...<br/>    );<br/>  },</span><span id="8856" class="mq lf it mm b gy mv ms l mt mu">  updateInputValue(evt) {<br/>    this.setState({<br/>      val: evt.target.value<br/>    });<br/>  }<br/>});</span></pre><p id="4614" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们创建了<code class="fe mw mx my mm b">updateInputValue</code>方法，该方法调用<code class="fe mw mx my mm b">setState</code>将输入字段的值设置为<code class="fe mw mx my mm b">val</code>状态的值。</p><p id="2761" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们将它传递给<code class="fe mw mx my mm b">onChange</code> prop。</p><p id="9da0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mw mx my mm b">value</code>道具有我们设定的<code class="fe mw mx my mm b">this.state.val</code>。</p><p id="9749" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">对于函数组件，我们使用<code class="fe mw mx my mm b">useState</code>钩子来设置值并检索它。</p><p id="dac8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="4499" class="mq lf it mm b gy mr ms l mt mu">import { useState } from 'react';</span><span id="210d" class="mq lf it mm b gy mv ms l mt mu">function InputForm() {<br/>  const [val, setVal] = useState(''); </span><span id="6c9a" class="mq lf it mm b gy mv ms l mt mu">  return (<br/>    &lt;div&gt;<br/>      &lt;input value={val} onInput={e =&gt; setVal(e.target.value)}/&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="03ee" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们用输入的初始值调用了<code class="fe mw mx my mm b">useState</code>函数。</p><p id="8e24" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们向<code class="fe mw mx my mm b">onInput</code> prop传递一个函数来运行它，以便在输入内容时将值设置为<code class="fe mw mx my mm b">val</code>状态。</p><p id="9125" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们用<code class="fe mw mx my mm b">val</code>变量得到最新的输入值。</p><h1 id="1ab2" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">将表单元素状态传递给同级或父元素</h1><p id="ea3b" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">对我们来说，在元素之间传递数据的最通用的方法是上下文APU。</p><p id="ea0b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="e8e0" class="mq lf it mm b gy mr ms l mt mu">import React, { useState, useContext } from "react";<br/>import ReactDOM from "react-dom";<br/><br/>const Context = React.createContext(null);</span><span id="2185" class="mq lf it mm b gy mv ms l mt mu">const initialAppState = {};</span><span id="991e" class="mq lf it mm b gy mv ms l mt mu">function App() {<br/>  const [appState, updateAppState] = useState(initialAppState);</span><span id="98af" class="mq lf it mm b gy mv ms l mt mu">return (<br/>    &lt;div&gt;<br/>      &lt;Context.Provider value={{ appState, updateAppState }}&gt;<br/>        &lt;Comment /&gt;<br/>      &lt;/Context.Provider&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span><span id="b870" class="mq lf it mm b gy mv ms l mt mu">function Comment() {<br/>  const { appState, updateAppState } = useContext(Context);</span><span id="40a4" class="mq lf it mm b gy mv ms l mt mu">  function handleCommentChange(e) {<br/>    updateAppState({ ...appState, comment: e.target.value });<br/>  }</span><span id="f15a" class="mq lf it mm b gy mv ms l mt mu">  return (<br/>    &lt;div className="book"&gt;<br/>      &lt;input<br/>        type="text"<br/>        value={appState.comment}<br/>        onChange={handleCommentChange}<br/>      /&gt;<br/>      &lt;br /&gt;<br/>      &lt;div&gt;<br/>        &lt;pre&gt;{JSON.stringify(appState, null, 2)}&lt;/pre&gt;<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="7094" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们使用<code class="fe mw mx my mm b">React.createContext</code>方法来创建上下文。</p><p id="0226" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后在<code class="fe mw mx my mm b">App</code>中，我们添加了<code class="fe mw mx my mm b">Context.Provider</code>，这样所有的子元素都可以访问上下文。</p><p id="001a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们创建了<code class="fe mw mx my mm b">Comment</code>组件，它调用<code class="fe mw mx my mm b">useContext</code>钩子来使用我们的<code class="fe mw mx my mm b">Context</code>上下文。在组件中，我们有一个输入来改变我们输入的东西的<code class="fe mw mx my mm b">appState</code>。这将反映在使用该上下文的所有组件中。</p><p id="ab74" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以在输入下面的字符串化JSON中看到我们输入的内容。</p><h1 id="83a5" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">如何在React中用内联CSS样式实现a:hover</h1><p id="404d" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以监听<code class="fe mw mx my mm b">mouseenter </code>和<code class="fe mw mx my mm b">mouseleave </code>事件来为悬停创建一个效果。</p><p id="88d9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="f780" class="mq lf it mm b gy mr ms l mt mu">class Foo extends React.Component {<br/>  constructor() {<br/>    this.state = { hover: false };<br/>  }</span><span id="be9e" class="mq lf it mm b gy mv ms l mt mu">  toggleHover(){<br/>    this.setState({ hover: !this.state.hover })<br/>  },</span><span id="77fa" class="mq lf it mm b gy mv ms l mt mu">  render() {<br/>    let linkStyle;<br/>    if (this.state.hover) {<br/>      linkStyle = { backgroundColor: 'red' }<br/>    } else {<br/>      linkStyle = { backgroundColor: 'green' }<br/>    }<br/>    return(<br/>      &lt;div&gt;<br/>        &lt;a style={linkStyle} onMouseEnter={this.toggleHover} onMouseLeave={this.toggleHover}&gt;Link&lt;/a&gt;<br/>      &lt;/div&gt;<br/>    )<br/>  }<br/>}</span></pre><p id="ad51" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们通过添加一个<code class="fe mw mx my mm b">a</code>元素来创建组件，该元素通过向<code class="fe mw mx my mm b">onMpuseEnter</code>和<code class="fe mw mx my mm b">onMouseLeave</code>道具传递方法来监听<code class="fe mw mx my mm b">mouseenter</code>和<code class="fe mw mx my mm b">mouseleave</code>事件。</p><p id="627e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mw mx my mm b">toggleHover</code>方法在<code class="fe mw mx my mm b">true</code>和<code class="fe mw mx my mm b">false</code>之间切换<code class="fe mw mx my mm b">hover</code>状态。</p><p id="f36e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后在<code class="fe mw mx my mm b">render</code>方法中，我们根据<code class="fe mw mx my mm b">hover</code>状态的真值设置<code class="fe mw mx my mm b">backgroundColor</code>属性。</p><p id="891f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">此外，我们可以使用style-it库，它允许我们将带有伪类的CSS嵌入到React组件中。</p><p id="f6b9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们通过运行以下命令来安装它:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="c6c8" class="mq lf it mm b gy mr ms l mt mu">npm install style-it --save</span></pre><p id="4839" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们可以写:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="84b8" class="mq lf it mm b gy mr ms l mt mu">import React from 'react';<br/>import Style from 'style-it';</span><span id="b1e4" class="mq lf it mm b gy mv ms l mt mu">class Foo  extends React.Component {<br/>  render() {<br/>    return Style.it(`<br/>      p:hover {<br/>        color: red;<br/>      }<br/>    `,<br/>      &lt;p&gt;hover me&lt;/p&gt;<br/>    );<br/>  }<br/>}</span></pre><p id="aaa6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们使用style-it库中的<code class="fe mw mx my mm b">Style.it</code>标签来设置元素的悬停状态。</p><p id="ff68" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们也可以使用<code class="fe mw mx my mm b">Style</code>组件来做同样的事情。</p><p id="606a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="c8a0" class="mq lf it mm b gy mr ms l mt mu">import React from 'react';<br/>import Style from 'style-it';</span><span id="4a49" class="mq lf it mm b gy mv ms l mt mu">class Foo extends React.Component {<br/>  render() {<br/>    return (<br/>      &lt;Style&gt;<br/>        {`<br/>          p:hover {<br/>            color: red;<br/>          }<br/>        `}<br/>        &lt;p&gt;hover me&lt;/p&gt;<br/>      &lt;/Style&gt;<br/>    );<br/>  }<br/>}</span></pre><p id="793e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们使用<code class="fe mw mx my mm b">Style</code>组件并在字符串中嵌入带有hover伪类的CSS。</p><p id="441e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后，当我们将鼠标悬停在p元素上时，我们会看到颜色发生变化。</p><figure class="mh mi mj mk gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mz"><img src="../Images/e5290e3a6a59d323b71571a954330d3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*kkZW-c0iPZH5Bff0"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated"><a class="ae kf" href="https://unsplash.com/@thefreak1337?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">瓦伦丁·彼得科夫</a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><h1 id="8bc6" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">结论</h1><p id="00ef" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以使用库或普通JavaScript来创建悬停效果。</p><p id="5d62" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">有多种方法可以获取输入字段值并在多个组件之间传递数据。</p></div></div>    
</body>
</html>