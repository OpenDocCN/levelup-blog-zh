# Java 第 2 章:为什么在面向对象编程中使用函数式编程

> 原文：<https://levelup.gitconnected.com/super-java-functional-programming-in-object-oriented-programming-84dab44a915f>

*请先阅读* [*我之前的帖子*](https://medium.com/swlh/super-basic-java-anonymous-class-functional-interface-and-lambda-expression-fba411a787) *再继续阅读。*

在我之前的文章中，我展示了如何使用函数接口和 Lambda 表达式给代码添加语法糖。这是我们应该考虑使用它们的充分理由。但是，他们提供的就这些吗？Java 引入这些概念肯定有更多的原因。

为了直接得到答案，函数接口和 Lambda 表达式允许我们在 Java 中采用函数式编程。等一下。Java 不是一种面向对象的编程语言吗？首先什么是函数式编程，为什么我们必须在 Java 中采用函数式编程？

在这篇文章中，我将从什么是面向对象编程语言开始，并探究在 Java 中采用函数式编程背后的动机。然后，我将概述函数式编程的一些关键概念。

![](img/a16ea7bb344eacee31c339f34b3646b6.png)

布莱克·迈耶在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄的照片

# 为什么在 Java 中使用函数式编程

Java 是一种面向对象的编程语言。面向对象编程到底是什么意思？你可能知道 OOP 是一种编程方式，我们用属性定义对象，分配数据，并使用方法操作数据。你可能也熟悉 OOP 的概念:封装、抽象、多态和继承。让我们回顾一下。

*   封装是将数据和代码包装在一个单元中进行操作。封装是通过数据隐藏来控制数据流实现的。
*   抽象就是隐藏逻辑。想想接口是如何工作。你不需要知道它是如何工作的，只需要知道它能做什么。
*   多态性是采取多种形式的能力。它允许以不同的方式执行相同的动作，这通常是通过继承实现的。
*   继承是扩展一个类。扩展超类的子类继承超类的公共方法和变量。

如果我们思考一下 ***为什么*** 我们会想到这些概念，我们就能更好地理解 OOP。因为 Java 对象中的数据是可变的，所以容易产生副作用和不希望的变化。这就是为什么我们使用封装和抽象来控制谁可以查看和编辑数据。由于 OOP 的构建块是一个对象，我们经常以大量样板代码来创建每一个对象而告终。这就是为什么我们使用多态性和继承来实现代码的可重用性和可扩展性。

如果有另一种方法来解决 OOP 中关于可变状态和长样本代码的一些潜在问题呢？这就是函数式编程发挥作用的地方。

## 函数式编程简介

函数式编程(FP)是将计算编程为数学函数的一种方式。FP 既没有状态也没有可变变量。这怎么可能呢？这类似于用 final 关键字使用所有变量。最初，FP 并没有受到太多的关注，因为 FP 使用了大量的内存来实现无状态，并且内存非常昂贵。但是，内存已经不贵了。更具有讽刺意味的是，这种特殊的特性使得 FP 更有吸引力。随着现代软件程序变得越来越复杂，对多线程和并行处理的需求也在增加。因为 FP 没有状态，所以不存在阻塞或并发问题。

FP 去除了移动部分，优化了操作，得到了简洁无错的代码。在 OOP 中采用这种特殊的编码方式(没有状态和可变变量)难道不会使代码更加有效和高效吗？

# 二。函数式编程如何工作

为了在 Java 中使用函数式编程，让我们深入函数式编程的基础。FP 的两个关键概念是一级函数和纯函数。

## 一流的功能

一等职能意味着职能被当作一等公民对待。一等公民支持所有的操作，比如赋值给变量、传递给参数、作为值返回。该属性支持高阶函数。高阶函数是接收一个函数作为参数并返回一个函数的函数。在 FP 中，高阶函数用于函数合成和 currying。

## 纯函数

当执行没有副作用，返回值只取决于输入时，函数就是纯函数。

当一个函数在函数之外改变状态时，它会产生副作用。如果一个函数的执行改变了一个类或一个对象的成员变量，甚至改变了一个外部系统，比如数据库，那么这个函数就会产生副作用。

让我们看一些例子。

```
public class Tiger {
   public String cry (String sound) {
      return "Tiger cries" + sound;
   }
}
```

cry 没有副作用，因为它不会改变函数之外的状态。返回值**只有**取决于输入的声音。

但是，下面的 cry2 有副作用。

```
public class Tiger {
   String tigerCry = "Tiger cries ";
   public String cry2 (String sound) {
      tigerCry += sound;
      return tigerCry;
   }
}
```

当我们执行 Tiger . cry 2(“roar”)时，它会将成员变量 tigerCry 更新为“Tiger cries roar”。这违背了纯函数不改变函数外部状态的特性。

```
Tiger tiger = new Tiger();
System.out.println(tiger.cry("roar")); 
```

也因为 tigerCry 的值被改变，下面代码的执行还“老虎叫吼嚎叫”这里，输出不仅取决于输入，还取决于成员变量 tigerCry。这违背了纯函数的特性，在纯函数中，返回值只取决于输入

```
System.out.println(tiger.cry("howl")); 
```

澄清一下，方法可以有局部变量，来临时存储它的状态，只是不能引用类或对象的任何成员变量。

# 三。Lambda 表达式和函数式编程

引入了 Java 中的 Lambda 表达式和函数接口，使函数式编程更容易在 Java 中采用。使用 Lambda 表达式，我们可以模仿函数式编程语法，将方法赋给变量或将其传递给参数。这几乎就像我们对待一等公民的职能。不过从技术上来说，lambda expression 还是实现了一个函数接口。因此，它是一个对象，而不是一个函数。

在我结束这篇文章之前，我想分享一段总结 OOP 和 FP 的引言。

> OO 通过封装移动部分使代码变得可以理解。FP 通过最大限度地减少可移动部分来使代码变得可理解。
> 
> 迈克尔·费哲

在我的下一篇文章中，我将提供使用 Lambda 表达式和函数接口的例子，以在 Java 中应用函数式编程概念。