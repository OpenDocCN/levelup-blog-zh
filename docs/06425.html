<html>
<head>
<title>Working with Dates and Times on Linux- or Unix-like Shells</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在类似Linux或Unix的Shells上处理日期和时间</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/working-with-dates-and-times-on-linux-or-unix-like-shells-daefc5c4090c?source=collection_archive---------19-----------------------#2020-11-23">https://levelup.gitconnected.com/working-with-dates-and-times-on-linux-or-unix-like-shells-daefc5c4090c?source=collection_archive---------19-----------------------#2020-11-23</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/a45d68fb625e9143a9ae6357fb1201fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*m8ZETNmPesh6HYiS"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">凯文·霍尔瓦特在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="2a1c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果您经常使用shell，您可能经常需要操作日期和时间。日期和时间可以用多种方式格式化，每种方式都有特殊的语法。因此，与他们合作并不容易。我使用一个macOS xnu内核，我将演示一些命令是如何工作的。关于日期和时间语法的更多细节，您也可以参考本文末尾的表格。</p><p id="acb3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们首先在shell中打印出当前的日期和时间。</p><pre class="le lf lg lh gt li lj lk ll aw lm bi"><span id="da70" class="ln lo it lj b gy lp lq l lr ls">$ date</span><span id="d457" class="ln lo it lj b gy lt lq l lr ls">Tue Nov 17 15:47:20 EST 2020</span></pre><p id="9e8e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">使用本文末尾表格中GNU和BSD的格式控制字符，您也可以控制它的格式化方式。从表中可以推断出，每个控制字符代表日期和/或时间的不同方面。下面的“加号”表示用户将指定格式。</p><pre class="le lf lg lh gt li lj lk ll aw lm bi"><span id="cd7f" class="ln lo it lj b gy lp lq l lr ls">$ date +"Right now it is %A, %B %d, %Y."</span><span id="24c8" class="ln lo it lj b gy lt lq l lr ls">Right now it is Tuesday, November 17, 2020.<br/>$ date +"%l:%M %p %Z"</span><span id="5de4" class="ln lo it lj b gy lt lq l lr ls">4:03 PM EST</span></pre><p id="d9bd" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您也可以将日期和时间保存在变量中。“echo”在下一行打印出任何变量。</p><pre class="le lf lg lh gt li lj lk ll aw lm bi"><span id="5aed" class="ln lo it lj b gy lp lq l lr ls">$ TODAY=$(date +"%D")<br/>$ echo $TODAY</span><span id="8da2" class="ln lo it lj b gy lt lq l lr ls">11/17/20</span></pre><p id="923e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在事情变得更加复杂和令人困惑。我们将保存用户指定的日期和时间。假设我们从2020年6月29日到7月2日每天从Twitter下载带有特定标签的推文。我们以YYYY-MM-DD (%F)的格式指定我们测量的第一秒以及我们测量的间隔之后的第一秒，并希望将它们保存为自1970–01–01 00:00:00 UTC(% s)以来的秒数。</p><pre class="le lf lg lh gt li lj lk ll aw lm bi"><span id="8973" class="ln lo it lj b gy lp lq l lr ls">$ first=$(date -j -f "%F" 2020-06-29 +"%s")<br/>$ echo $first</span><span id="1863" class="ln lo it lj b gy lt lq l lr ls">1593463202<br/>$ last=$(date -j -f "%F" 2020-07-03 +"%s")<br/>$ echo $last</span><span id="8987" class="ln lo it lj b gy lt lq l lr ls">1593808656</span></pre><p id="931e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们以这种格式保存这些日期，因为在Mac shell中，增加或减少时间的最佳方式是增加或减少秒数。我们以后总是可以用其他格式显示日期。因此，我们创建了一个名为SECONDS_IN_DAY的变量，我们将使用它将日期增加一天。</p><pre class="le lf lg lh gt li lj lk ll aw lm bi"><span id="8b23" class="ln lo it lj b gy lp lq l lr ls">SECONDS_IN_DAY=86400</span></pre><p id="f49e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最后，如前所述，我们遍历日期范围，以可读性更好的格式打印日期。</p><pre class="le lf lg lh gt li lj lk ll aw lm bi"><span id="2462" class="ln lo it lj b gy lp lq l lr ls">while [ "$first" != "$last" ]; do<br/>  start=$(date -j -f "%s" $first +"%Y.%m.%d 00:00")<br/>  first=$((first + $SECONDS_IN_DAY))<br/>  end=$(date -j -f "%s" $first +"%Y.%m.%d 00:00")<br/>  echo In the real script, this line of code would call Twitter to download tweets from $start to $end.<br/>done</span></pre><p id="9dd0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果所有变量都已正确初始化，则此循环的输出为:</p><pre class="le lf lg lh gt li lj lk ll aw lm bi"><span id="3688" class="ln lo it lj b gy lp lq l lr ls">In the real script, this line of code would call Twitter to download tweets from 2020.06.29 00:00 to 2020.06.30 00:00.</span><span id="d00d" class="ln lo it lj b gy lt lq l lr ls">In the real script, this line of code would call Twitter to download tweets from 2020.06.30 00:00 to 2020.07.01 00:00.</span><span id="4350" class="ln lo it lj b gy lt lq l lr ls">In the real script, this line of code would call Twitter to download tweets from 2020.07.01 00:00 to 2020.07.02 00:00.</span><span id="7a01" class="ln lo it lj b gy lt lq l lr ls">In the real script, this line of code would call Twitter to download tweets from 2020.07.02 00:00 to 2020.07.03 00:00.</span></pre><p id="47c0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这里是GNU中日期和时间的格式控制字符的完整列表。</p><figure class="le lf lg lh gt ju"><div class="bz fp l di"><div class="lu lv l"/></div></figure><p id="5785" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下面是BSD中日期和时间的格式控制字符的完整列表。</p><figure class="le lf lg lh gt ju"><div class="bz fp l di"><div class="lu lv l"/></div></figure><p id="060b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">快乐脚本！</p><figure class="le lf lg lh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/b055f8e6fe06f996c7223bf6fde0816d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*AzyqUXfg-UieDZvH"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上<a class="ae kf" href="https://unsplash.com/@vinayak_125?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Vinayak Sharma </a>拍摄的照片</figcaption></figure></div></div>    
</body>
</html>