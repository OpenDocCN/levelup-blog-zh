<html>
<head>
<title>How to Build a Real Estate Streamlit App in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Python构建房地产Streamlit应用程序</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-build-a-real-estate-streamlit-app-in-python-dd21b7c9ed4d?source=collection_archive---------0-----------------------#2022-12-13">https://levelup.gitconnected.com/how-to-build-a-real-estate-streamlit-app-in-python-dd21b7c9ed4d?source=collection_archive---------0-----------------------#2022-12-13</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="3d2f" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">在几分钟内构建一个web应用程序，不需要Google Colab的前端经验</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/33bfe9340b11977638a3feec88f071f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KHg2Gm26JrD6Q7CwSPQs1A.jpeg"/></div></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">格伦·卡斯滕斯-彼得斯在<a class="ae kz" href="https://unsplash.com/s/photos/web-application?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="51f0" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">浏览Zillow、Redfin或Realtor等网站上的待售房产是从MLS获取信息的一种简单方式。</p><p id="a1c6" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">但是我们怎么知道哪种房产最适合我们呢？</p><p id="1feb" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">房产定价过高吗？它与我们搜索的其他酒店相比如何？是否存在隐藏的机会？</p><p id="e59d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv"> <em class="lw"> Redfin提供了一种从网站直接下载房产列表到CSV文件的简单方法。</em> </strong></p><p id="646e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">搜索一个城市后，您可以向下滚动列表面板来下载列表。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj lx"><img src="../Images/265065462d625fb0ec918e765fe22fd7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CVeXA3CuyFCaetc3yaJrng.png"/></div></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated"><a class="ae kz" href="https://www.redfin.com/city/18142/FL/Tampa" rel="noopener ugc nofollow" target="_blank">Redfin.com</a>搜索截图(作者)</figcaption></figure><p id="225e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">现在我们有了一个可以在Excel中打开的CSV文件。那又怎样？</p><p id="36b1" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv"> <em class="lw">我们需要一种简单的方法从清单文件中提取信息。</em>T13】</strong></p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj ly"><img src="../Images/17489224594f7c08e0b8030982bfc9a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O97KC5J61o6AQCbJ3SIJzQ.jpeg"/></div></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">照片由<a class="ae kz" href="https://www.google.com/url?sa=i&amp;url=https%3A%2F%2Fwww.keenesystems.com%2Fblog%2F5-reasons-a-database-is-better-than-a-spreadsheet-for-business&amp;psig=AOvVaw2YAcSFQPn-jQ_86WerNmbc&amp;ust=1671045380862000&amp;source=images&amp;cd=vfe&amp;ved=0CA8QjRxqFwoTCJjZqKmn9_sCFQAAAAAdAAAAABAD" rel="noopener ugc nofollow" target="_blank">基恩系统公司</a>拍摄</figcaption></figure><p id="8d44" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">好的，我们可以读入Python Pandas中的数据，做一些转换，得出见解。但是，如果我们想在可重复的基础上做这件事，并且可以与他人分享呢？</p><p id="a64f" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这就是Streamlit的用武之地😁。</p><h2 id="69be" class="lz ma iu bd mb mc md dn me mf mg dp mh lj mi mj mk ln ml mm mn lr mo mp mq mr bi translated">关于细流</h2><blockquote class="ms mt mu"><p id="fe30" class="la lb lw lc b ld le jv lf lg lh jy li mv lk ll lm mw lo lp lq mx ls lt lu lv in bi translated">Streamlit是<strong class="lc iv">一个开源的Python库，它使得为机器学习和数据科学</strong>创建和分享漂亮的定制web应用变得容易。只需几分钟，您就可以构建和部署强大的数据应用程序。所以让我们开始吧！— <a class="ae kz" href="https://docs.streamlit.io/" rel="noopener ugc nofollow" target="_blank"> streamlit.io </a></p></blockquote><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj my"><img src="../Images/b47c8698e4a979e9b1f3e23e2a32155d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZXXPQbpl6I3eRiF3TSIjhA.png"/></div></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated"><a class="ae kz" href="https://www.redfin.com/" rel="noopener ugc nofollow" target="_blank">Redfin.com</a>主页截图(作者)</figcaption></figure><p id="801a" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这篇文章将讲述如何在Streamlit中构建一个简单的房地产web应用程序来分析来自Redfin的房地产列表。T29】</p><p id="c423" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在下面👇是我们将创建的web应用程序的一个示例。你也可以在这里检验成品<a class="ae kz" href="https://redfin.streamlit.app/" rel="noopener ugc nofollow" target="_blank">。</a></p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="mz na l"/></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">GIPHY(作者)</figcaption></figure></div><div class="ab cl nb nc hy nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="in io ip iq ir"><h1 id="c93e" class="ni ma iu bd mb nj nk nl me nm nn no mh ka np kb mk kd nq ke mn kg nr kh mq ns bi translated">问题陈述</h1><p id="66bc" class="pw-post-body-paragraph la lb iu lc b ld nt jv lf lg nu jy li lj nv ll lm ln nw lp lq lr nx lt lu lv in bi translated">我们有房产地址的档案。我们希望<em class="lw">处理文件</em>以收集关于属性的汇总统计数据和见解。</p><p id="a2b7" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这些指标应该包括平均标价、平均上市天数和每平方英尺的平均价格。我们应该能够可视化每个指标的分布。</p><p id="31ac" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这将允许我们分析与我们的搜索相关的属性。</p><p id="e633" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv"> <em class="lw">能否找到有机会的物业？</em>T12】</strong></p><p id="1afa" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">是的，我们将识别具有<em class="lw">增值机会</em>的物业。</p><h1 id="eaea" class="ni ma iu bd mb nj ny nl me nm nz no mh ka oa kb mk kd ob ke mn kg oc kh mq ns bi translated">支持视频</h1><p id="163b" class="pw-post-body-paragraph la lb iu lc b ld nt jv lf lg nu jy li lj nv ll lm ln nw lp lq lr nx lt lu lv in bi translated">跟随我的Python教程视频。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="od na l"/></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">YouTube教程(作者)</figcaption></figure></div><div class="ab cl nb nc hy nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="in io ip iq ir"><h1 id="66e6" class="ni ma iu bd mb nj nk nl me nm nn no mh ka np kb mk kd nq ke mn kg nr kh mq ns bi translated">Python教程</h1><p id="a807" class="pw-post-body-paragraph la lb iu lc b ld nt jv lf lg nu jy li lj nv ll lm ln nw lp lq lr nx lt lu lv in bi translated">如果您没有现有的Python环境，那么我强烈建议首先用<strong class="lc iv">克隆笔记本</strong>(在文章的底部)。</p><p id="1a4f" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这将允许您在Google Colab中运行Python代码(免费！).它是一个基于云的环境，让您无需在本地安装Python就可以运行代码。</p><h2 id="9ce6" class="lz ma iu bd mb mc md dn me mf mg dp mh lj mi mj mk ln ml mm mn lr mo mp mq mr bi translated">一.开始行动</h2><p id="67c0" class="pw-post-body-paragraph la lb iu lc b ld nt jv lf lg nu jy li lj nv ll lm ln nw lp lq lr nx lt lu lv in bi translated">在您的colab实例中安装必要的包:<code class="fe oe of og oh b">streamlit</code>和<code class="fe oe of og oh b">localtunnel</code>。</p><pre class="kk kl km kn gu oi oh oj bn ok ol bi"><span id="4ff6" class="om ma iu oh b be on oo l op oq">!pip install -q streamlit<br/>!npm install localtunnel</span></pre><p id="403f" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">接下来，创建一个新的单元，将我们的python代码写到一个<code class="fe oe of og oh b">app.py</code>文件中。我们的streamlit代码将存在于这个文件中。</p><p id="58a9" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">对于我们的初始代码，让我们<code class="fe oe of og oh b">import streamlit</code>并添加一个标题到我们的应用程序称为<em class="lw"> Hello World！</em>。</p><pre class="kk kl km kn gu oi oh oj bn ok ol bi"><span id="a98f" class="om ma iu oh b be on oo l op oq">%%writefile app.py<br/><br/>import streamlit as st<br/>st.title('Hello world!')</span></pre><p id="3815" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">创建一个新的单元格来运行streamlit中的<code class="fe oe of og oh b">app.py</code>文件。</p><pre class="kk kl km kn gu oi oh oj bn ok ol bi"><span id="799e" class="om ma iu oh b be on oo l op oq">!streamlit run /content/app.py &amp;&gt;/content/logs.txt &amp;</span></pre><p id="5eb4" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">创建一个新单元来本地运行我们的应用程序。这将在正常的默认端口8501上启动streamlit。</p><pre class="kk kl km kn gu oi oh oj bn ok ol bi"><span id="784a" class="om ma iu oh b be on oo l op oq">!npx localtunnel - port 8501</span></pre><p id="c926" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">自定义URL将出现在单元格的输出中。单击URL。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj or"><img src="../Images/ee53d218bb50deb86ce8a3048335f419.png" data-original-src="https://miro.medium.com/v2/resize:fit:1082/format:webp/1*TNO6AS7pprDQ40KPACph4g.png"/></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">截图(作者)</figcaption></figure><p id="32eb" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这将把我们带到一个预防措施网页。选择蓝色按钮<em class="lw">点击继续</em>。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj os"><img src="../Images/a1f345710d41bedaef52c1f590256ec3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-szTMw30Arn01dRBcJvqHA.png"/></div></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">截图(作者)</figcaption></figure><p id="eb61" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我们的应用程序正在运行！应用程序显示我们的标题<em class="lw">你好世界！</em>。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj ot"><img src="../Images/986b9c69f317fc88e2b016a9898d3e9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b-kjrmkAWizXlWum01TRSg.png"/></div></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">截图(作者)</figcaption></figure><blockquote class="ms mt mu"><p id="b1b7" class="la lb lw lc b ld le jv lf lg lh jy li mv lk ll lm mw lo lp lq mx ls lt lu lv in bi translated"><strong class="lc iv">注意</strong>:每次我们更改应用程序时，我们都需要停止npx本地隧道单元，并重新运行之前的单元。</p></blockquote><h2 id="af46" class="lz ma iu bd mb mc md dn me mf mg dp mh lj mi mj mk ln ml mm mn lr mo mp mq mr bi translated">二。主页</h2><p id="0ee7" class="pw-post-body-paragraph la lb iu lc b ld nt jv lf lg nu jy li lj nv ll lm ln nw lp lq lr nx lt lu lv in bi translated">在我们的<code class="fe oe of og oh b">import</code>部分，导入<a class="ae kz" href="https://pandas.pydata.org/" rel="noopener ugc nofollow" target="_blank">熊猫</a>进行数据分析。这将允许我们以数据框架的形式处理房产列表的CSV文件。</p><pre class="kk kl km kn gu oi oh oj bn ok ol bi"><span id="c362" class="om ma iu oh b be on oo l op oq">import pandas as pd</span></pre><p id="977f" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在这里，我们删除了<em class="lw"> Hello world </em>标题，并用<em class="lw">属性数据Redfin </em>替换它。你可以通过复制emojipedia.org的表情符号来添加表情符号。</p><p id="6976" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">通过引用<code class="fe oe of og oh b"><a class="ae kz" href="https://docs.streamlit.io/library/api-reference/widgets/st.file_uploader" rel="noopener ugc nofollow" target="_blank">st.file_uploader</a></code>输入小部件，我们可以为用户提供一种上传文件的方式。</p><p id="ae1e" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">上传的文件作为CSV文件读入，并转换成熊猫数据帧。</p><pre class="kk kl km kn gu oi oh oj bn ok ol bi"><span id="f004" class="om ma iu oh b be on oo l op oq">#####################################<br/>#            HOME PAGE              #<br/>#####################################<br/>st.title('Property Data Redfin 🏠')<br/>st.markdown('The purpose of this app is to provide summary stats 📊 based on your Redfin data search.')<br/>st.markdown("#### {0} :point_down:".format('Upload a CSV file'))<br/>uploaded_file = st.file_uploader("Choose a file")<br/>if uploaded_file is not None:<br/>    # read csv file<br/>    df = pd.read_csv(uploaded_file)</span></pre><p id="2569" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">要查看更改，请完成以下操作:</p><ul class=""><li id="3da5" class="ou ov iu lc b ld le lg lh lj ow ln ox lr oy lv oz pa pb pc bi translated">停止<em class="lw"> npx本地隧道</em>单元的运行</li><li id="dc43" class="ou ov iu lc b ld pd lg pe lj pf ln pg lr ph lv oz pa pb pc bi translated">重新运行笔记本</li><li id="c6ff" class="ou ov iu lc b ld pd lg pe lj pf ln pg lr ph lv oz pa pb pc bi translated">单击提供的新链接</li></ul><p id="ca6d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">输出:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj pi"><img src="../Images/942732e006a408347b60f3046aae11aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yJy8MqqQtqmStn9oroI9yw.png"/></div></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">截图(作者)</figcaption></figure><p id="dbf6" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">让我们测试一下我们的输入小部件，并查看我们文件的内容。</p><p id="ee14" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">将熊猫数据帧的前五行写入streamlit web应用程序。</p><pre class="kk kl km kn gu oi oh oj bn ok ol bi"><span id="860c" class="om ma iu oh b be on oo l op oq">st.write(df.head()) # write first 5 rows (remove after testing)</span></pre><p id="ec49" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果我们上传我们的物业列表文件，我们可以看到前五行出现在streamlit应用程序中。</p><p id="4f97" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">输出:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="mz na l"/></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">GIPHY(作者)</figcaption></figure><h2 id="ecfc" class="lz ma iu bd mb mc md dn me mf mg dp mh lj mi mj mk ln ml mm mn lr mo mp mq mr bi translated">三。韵律学</h2><p id="fcad" class="pw-post-body-paragraph la lb iu lc b ld nt jv lf lg nu jy li lj nv ll lm ln nw lp lq lr nx lt lu lv in bi translated">现在，让我们向我们的web应用程序添加指标，以帮助汇总我们的房产列表文件中的信息。</p><p id="1883" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我们可以使用<code class="fe oe of og oh b"><a class="ae kz" href="https://docs.streamlit.io/library/api-reference/data/st.metric" rel="noopener ugc nofollow" target="_blank">st.metric</a></code>数据显示元素以粗体显示指标。用<code class="fe oe of og oh b"><a class="ae kz" href="https://docs.streamlit.io/library/api-reference/layout/st.columns" rel="noopener ugc nofollow" target="_blank">st.columns</a> </code>容器将每个指标分割成自己的列。</p><p id="c6fa" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">Pandas允许我们快速汇总整个列的聚合度量。这里我们使用<code class="fe oe of og oh b">mean()</code>来获得每个指标的平均值。</p><pre class="kk kl km kn gu oi oh oj bn ok ol bi"><span id="c0e4" class="om ma iu oh b be on oo l op oq">    #####################################<br/>    #              METRICS              #<br/>    #####################################<br/>    st.markdown("## Property Metrics 🏙️")<br/>    col1, col2, col3, col4 = st.columns(4)<br/>    col1.metric('Total',  len(df), <br/>      help='Number of properties in search')<br/>    col2.metric('Avg Price', "${:,}".format(df['PRICE'].mean()).split(',')[0] + 'K', <br/>      help='Average sale price of properties in search')<br/>    col3.metric('Avg DOM', int(df['DAYS ON MARKET'].mean()), <br/>      help='Average days on market of properties in search')<br/>    col4.metric('Avg PPSQFT', "${:,}".format(int(df['$/SQUARE FEET'].mean())), <br/>      help='Average price per square foot of properties in search')</span></pre><p id="45f8" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><code class="fe oe of og oh b">st.metric</code>函数中的<code class="fe oe of og oh b">help</code>参数提供了一个工具提示，显示在度量标签的旁边。</p><p id="85f9" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">输出:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj pj"><img src="../Images/ecf9c87421ecbced4f9b957b60ed09c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*arYWvAcp9PbWHeFjeOTPZA.png"/></div></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">截图(作者)</figcaption></figure><h2 id="83c3" class="lz ma iu bd mb mc md dn me mf mg dp mh lj mi mj mk ln ml mm mn lr mo mp mq mr bi translated">四。图表</h2><p id="61bd" class="pw-post-body-paragraph la lb iu lc b ld nt jv lf lg nu jy li lj nv ll lm ln nw lp lq lr nx lt lu lv in bi translated">Streamlit在您可以使用的图表工具和库的类型方面非常灵活。</p><p id="7822" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">首先我们导入我最喜欢的<code class="fe oe of og oh b"><a class="ae kz" href="https://plotly.com/python/plotly-express/" rel="noopener ugc nofollow" target="_blank">plotly.express</a></code>！</p><pre class="kk kl km kn gu oi oh oj bn ok ol bi"><span id="eaac" class="om ma iu oh b be on oo l op oq">import plotly.express as px</span></pre><p id="bd5c" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">接下来，让我们创建三个图表来查看数据的分布情况:</p><ol class=""><li id="f2d6" class="ou ov iu lc b ld le lg lh lj ow ln ox lr oy lv pk pa pb pc bi translated"><strong class="lc iv">上市天数</strong>，柱状图</li><li id="8c00" class="ou ov iu lc b ld pd lg pe lj pf ln pg lr ph lv pk pa pb pc bi translated"><strong class="lc iv">价格</strong>，箱线图</li><li id="cc1f" class="ou ov iu lc b ld pd lg pe lj pf ln pg lr ph lv pk pa pb pc bi translated"><strong class="lc iv">每平方英尺价格</strong> —直方图</li></ol><p id="c17f" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在plotly.express中，我们可以用一行代码创建每个<code class="fe oe of og oh b">fig</code>。</p><p id="0ee8" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><code class="fe oe of og oh b">fig</code>对象作为图表元素被传入<code class="fe oe of og oh b"><a class="ae kz" href="https://docs.streamlit.io/library/api-reference/charts/st.plotly_chart" rel="noopener ugc nofollow" target="_blank">st.plotly_chart</a></code>以显示在我们的web应用程序上。</p><pre class="kk kl km kn gu oi oh oj bn ok ol bi"><span id="bc8e" class="om ma iu oh b be on oo l op oq">    #####################################<br/>    #             CHARTS                #<br/>    #####################################<br/>    with st.expander('Charts', expanded=True):<br/>      st.markdown("## Charts 📈")<br/>      fig = px.histogram(df, x="DAYS ON MARKET", <br/>          title="Days on Market Histogram Chart")<br/>      st.plotly_chart(fig, use_container_width=True)<br/><br/>      fig = px.box(df, x="PRICE", title="Price Box Plot Chart")<br/>      st.plotly_chart(fig, use_container_width=True)<br/><br/>      fig = px.histogram(df, x="$/SQUARE FEET", <br/>          title="Price per SQFT Histogram Chart")<br/>      st.plotly_chart(fig, use_container_width=True)</span></pre><p id="3ff1" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">通过在<code class="fe oe of og oh b"><a class="ae kz" href="https://docs.streamlit.io/library/api-reference/layout/st.expander" rel="noopener ugc nofollow" target="_blank">st.expander</a></code>中包装我们的图表代码块，我们可以很容易地展开和折叠这个部分。</p><p id="60fc" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">输出:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj pl"><img src="../Images/92267c9a63c7c1a969a101fb2303bab9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oUyOiriSXlfzT7E0YP9E6g.png"/></div></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">截图(作者)</figcaption></figure><h2 id="6ef9" class="lz ma iu bd mb mc md dn me mf mg dp mh lj mi mj mk ln ml mm mn lr mo mp mq mr bi translated">动词 （verb的缩写）特征</h2><p id="6fb5" class="pw-post-body-paragraph la lb iu lc b ld nt jv lf lg nu jy li lj nv ll lm ln nw lp lq lr nx lt lu lv in bi translated">从房产列表CSV文件中，我们希望快速确定一处房产是否有<em class="lw">机会</em>为住宅增值。</p><blockquote class="ms mt mu"><p id="879f" class="la lb lw lc b ld le jv lf lg lh jy li mv lk ll lm mw lo lp lq mx ls lt lu lv in bi translated"><a class="ae kz" href="https://www.mashvisor.com/blog/value-add-real-estate-guide-beginners/" rel="noopener ugc nofollow" target="_blank">房地产增值初学者指南</a></p></blockquote><p id="54bc" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我们将两个概念定义为<em class="lw">增值机会</em>:</p><ol class=""><li id="7758" class="ou ov iu lc b ld le lg lh lj ow ln ox lr oy lv pk pa pb pc bi translated"><strong class="lc iv">附加卧室</strong> —确定可以增加附加卧室以增加收入的房产。这包括将书房或餐厅改造成卧室。相对于卧室的数量来说，一处房产应该有很大的面积。</li><li id="c31e" class="ou ov iu lc b ld pd lg pe lj pf ln pg lr ph lv pk pa pb pc bi translated"><strong class="lc iv"> ADU(附加居住单元)</strong> —确定可容纳二级住房单元的独户住宅。这可以包括改造一个地下室或增加一个婆婆套房。</li></ol><p id="c303" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">下面的函数接受一个数据帧作为参数。每一个都通过一个<code class="fe oe of og oh b">if...else</code>声明来确定一个资产是否有<em class="lw">增值机会</em>。该函数返回<code class="fe oe of og oh b">true</code>或<code class="fe oe of og oh b">false</code>。</p><p id="3908" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在<code class="fe oe of og oh b">imports</code>之后的<code class="fe oe of og oh b">app.py</code>文件顶部添加每个函数。</p><pre class="kk kl km kn gu oi oh oj bn ok ol bi"><span id="63fa" class="om ma iu oh b be on oo l op oq">#####################################<br/>#            FUNCTIONS              #<br/>#####################################<br/>def additional_bedroom_opportunity(x):<br/>  try:<br/>    # 2bd &gt;= 1300 can usually fit an additional bd<br/>    # 3bd &gt;= 1950 can usually fit an additional bd<br/>    # 4bd &gt;= 2600 can usually fit an additional bd<br/>    if (x['ratio_sqft_bd'] &gt;= 650) and (x['ratio_sqft_bd'] is not None) and (x['BEDS'] &gt; 1) and (x['PROPERTY TYPE'] == 'Single Family Residential'):<br/>      return True<br/>    else:<br/>      return False<br/>  <br/>  except:<br/>    return False<br/><br/><br/>def adu_potential(x):<br/>  try:<br/>    if (x['ratio_lot_sqft'] &gt;= 5) and (x['ratio_lot_sqft'] is not None) and (x['HOA/MONTH'] is not None) and (x['PROPERTY TYPE'] == 'Single Family Residential'):<br/>      return True<br/>    else:<br/>      return False<br/>  except:<br/>    return False</span></pre><p id="82d2" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">让我们创建一些特征来识别一处房产是否有<em class="lw">增值机会</em>。</p><p id="bfdb" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">首先，我们计算一下<code class="fe oe of og oh b">ratio_sqft_bd</code>和<code class="fe oe of og oh b">ratio_lot_sqft</code>。然后，我们将DataFrame传递给每个函数，为每个属性在其各自的<em class="lw">增值机会</em>上返回一个<code class="fe oe of og oh b">true</code>或<code class="fe oe of og oh b">false</code>值。</p><pre class="kk kl km kn gu oi oh oj bn ok ol bi"><span id="e0aa" class="om ma iu oh b be on oo l op oq">    #####################################<br/>    #             FEATURES              #<br/>    #####################################<br/>    df_features = df.copy()<br/>    df_features['ratio_sqft_bd'] = df_features['SQUARE FEET'] / df_features['BEDS']<br/>    df_features['additional_bd_opp'] = df_features.apply(lambda x: <br/>      additional_bedroom_opportunity(x), axis=1)<br/>    df_features['ratio_lot_sqft'] =  df_features['LOT SIZE'] / df_features['SQUARE FEET']<br/>    df_features['adu_potential'] = df_features.apply(lambda x: <br/>      adu_potential(x), axis=1)</span></pre><p id="36e5" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我们需要一种方式向用户显示我们的特征化数据帧。</p><p id="e31b" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">让我们通过显示数据框架和提供下载来结束我们的应用程序🔽选项。 </p><h2 id="4c08" class="lz ma iu bd mb mc md dn me mf mg dp mh lj mi mj mk ln ml mm mn lr mo mp mq mr bi translated">不及物动词桌子</h2><p id="9ae2" class="pw-post-body-paragraph la lb iu lc b ld nt jv lf lg nu jy li lj nv ll lm ln nw lp lq lr nx lt lu lv in bi translated">Streamlit要求我们在下载时转换数据帧并将其编码为<code class="fe oe of og oh b">utf-8</code>。</p><p id="32ba" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这是一个将数据帧转换成CSV格式的快捷函数。</p><pre class="kk kl km kn gu oi oh oj bn ok ol bi"><span id="4b2d" class="om ma iu oh b be on oo l op oq">def convert_df(df):<br/>   return df.to_csv(index=False).encode('utf-8')</span></pre><p id="6efd" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在扩展器中，我们添加了一个<em class="lw">机会</em>部分。</p><p id="9992" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在这里，我们结合了我们已经使用过的Streamlit元素，包括:<code class="fe oe of og oh b">st.markdown</code>、<code class="fe oe of og oh b">st.write</code>和<code class="fe oe of og oh b">st.metric</code>。</p><p id="3723" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我们引用的附加Streamlit元素是<code class="fe oe of og oh b"><a class="ae kz" href="https://docs.streamlit.io/library/api-reference/widgets/st.download_button" rel="noopener ugc nofollow" target="_blank">st.download_button</a></code>。这是一种非常有用的方式，可以让用户直接从我们的应用程序下载文件。</p><pre class="kk kl km kn gu oi oh oj bn ok ol bi"><span id="915e" class="om ma iu oh b be on oo l op oq">    #####################################<br/>    #              TABLES               #<br/>    #####################################<br/>    with st.expander('Opportunities', expanded=True):<br/>        st.markdown("## Opportunities 💡")<br/>        df_add_bd = df_features.loc[df_features['additional_bd_opp'] == True]<br/>        df_adu = df_features.loc[df_features['adu_potential'] == True]<br/><br/>        col1, col2 = st.columns(2)<br/>        col1.metric('Total Add Bd', len(df_add_bd), <br/>            help='Number of properties with additonal bedroom opportunity')<br/>        col2.metric('Total ADU', len(df_adu), <br/>            help='Number of properties with ADU potential')<br/><br/>        st.markdown("#### Featurized Dataset")<br/>        st.write(df_features)<br/><br/>        # convert featurized dataset to csv<br/>        csv = convert_df(df_features)<br/><br/>        st.download_button(<br/>            "Download 🔽",<br/>            csv,<br/>            "property_dataset.csv",<br/>            "text/csv",<br/>            key='download-csv'<br/>        )</span></pre><p id="ffd7" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">太棒了。现在我们在Google Colab中有了一个使用Python的完整的应用程序。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj pm"><img src="../Images/a6668e8f93d2ee88c13735a7743e66ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*efiwGA49JOvWRSvtbOV47g.png"/></div></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">截图(作者)</figcaption></figure><h1 id="c816" class="ni ma iu bd mb nj ny nl me nm nz no mh ka oa kb mk kd ob ke mn kg oc kh mq ns bi translated">部署应用程序</h1><p id="8c4d" class="pw-post-body-paragraph la lb iu lc b ld nt jv lf lg nu jy li lj nv ll lm ln nw lp lq lr nx lt lu lv in bi translated">如果您想部署该应用程序供公众使用，那么您可以遵循Streamlit的<em class="lw"> how to </em>文档。</p><div class="pn po gq gs pp pq"><a href="https://docs.streamlit.io/streamlit-cloud/get-started/deploy-an-app" rel="noopener  ugc nofollow" target="_blank"><div class="pr ab fp"><div class="ps ab pt cl cj pu"><h2 class="bd iv gz z fq pv fs ft pw fv fx it bi translated">部署应用程序-简化文档</h2><div class="px l"><h3 class="bd b gz z fq pv fs ft pw fv fx dk translated">Streamlit Cloud让您只需点击一下即可部署您的应用，大多数应用只需几分钟即可部署完毕。如果你…</h3></div><div class="py l"><p class="bd b dl z fq pv fs ft pw fv fx dk translated">docs.streamlit.io</p></div></div><div class="pz l"><div class="qa l qb qc qd pz qe kt pq"/></div></div></a></div><p id="91e6" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我的资产现金流应用程序课程也涵盖了部署。通过本课程，您将<strong class="lc iv"> <em class="lw">学习如何构建一个应用程序来计算一处房产的现金流</em> </strong>。</p><div class="pn po gq gs pp pq"><a href="https://analyticsariel.teachable.com/p/property-cash-flow-app" rel="noopener  ugc nofollow" target="_blank"><div class="pr ab fp"><div class="ps ab pt cl cj pu"><h2 class="bd iv gz z fq pv fs ft pw fv fx it bi translated">房地产现金流应用程序</h2><div class="px l"><h3 class="bd b gz z fq pv fs ft pw fv fx dk translated">常见问题解答(FAQ)你将终身学习这门课程。我需要什么设备/工具来…</h3></div><div class="py l"><p class="bd b dl z fq pv fs ft pw fv fx dk translated">analyticsariel.teachable.com</p></div></div><div class="pz l"><div class="qf l qb qc qd pz qe kt pq"/></div></div></a></div><h1 id="89a4" class="ni ma iu bd mb nj ny nl me nm nz no mh ka oa kb mk kd ob ke mn kg oc kh mq ns bi translated">结论</h1><p id="ac7d" class="pw-post-body-paragraph la lb iu lc b ld nt jv lf lg nu jy li lj nv ll lm ln nw lp lq lr nx lt lu lv in bi translated">查看我的<a class="ae kz" href="https://youtube.com/c/analyticsariel" rel="noopener ugc nofollow" target="_blank"> YouTube频道——AnalyticsAriel</a>,获得更多关于房地产数据源和数据分析的见解！</p><h1 id="574e" class="ni ma iu bd mb nj ny nl me nm nz no mh ka oa kb mk kd ob ke mn kg oc kh mq ns bi translated">克隆笔记本</h1><div class="pn po gq gs pp pq"><a href="https://github.com/analyticsariel/projects/blob/master/web_applications/streamlit_redfin_property_data_app.ipynb" rel="noopener  ugc nofollow" target="_blank"><div class="pr ab fp"><div class="ps ab pt cl cj pu"><h2 class="bd iv gz z fq pv fs ft pw fv fx it bi translated">主analyticsariel/projects上的projects/streamlit _ redfin _ property _ data _ app . ipynb</h2><div class="px l"><h3 class="bd b gz z fq pv fs ft pw fv fx dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="py l"><p class="bd b dl z fq pv fs ft pw fv fx dk translated">github.com</p></div></div><div class="pz l"><div class="qg l qb qc qd pz qe kt pq"/></div></div></a></div><h1 id="31b0" class="ni ma iu bd mb nj ny nl me nm nz no mh ka oa kb mk kd ob ke mn kg oc kh mq ns bi translated">来源</h1><div class="pn po gq gs pp pq"><a href="https://docs.streamlit.io/streamlit-cloud/get-started" rel="noopener  ugc nofollow" target="_blank"><div class="pr ab fp"><div class="ps ab pt cl cj pu"><h2 class="bd iv gz z fq pv fs ft pw fv fx it bi translated">开始-简化文档</h2><div class="px l"><h3 class="bd b gz z fq pv fs ft pw fv fx dk translated">欢迎使用Streamlit云！首先，在开始使用Streamlit Cloud之前，您需要有一个…</h3></div><div class="py l"><p class="bd b dl z fq pv fs ft pw fv fx dk translated">docs.streamlit.io</p></div></div><div class="pz l"><div class="qh l qb qc qd pz qe kt pq"/></div></div></a></div></div></div>    
</body>
</html>