<html>
<head>
<title>Creating a snowfall effect with HTML and CSS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用HTML和CSS创建降雪效果</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/creating-a-snowfall-effect-with-html-and-css-a9b34de67d79?source=collection_archive---------14-----------------------#2021-02-18">https://levelup.gitconnected.com/creating-a-snowfall-effect-with-html-and-css-a9b34de67d79?source=collection_archive---------14-----------------------#2021-02-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/b190b945d0e25cbd801b55a4fef20ffc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*eo5foQBwWBqD6Byc.png"/></div></div></figure><div class=""/><p id="52ac" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">德克萨斯州最近一直在下雪和结冰(现在仍然如此)…这是这个用HTML和CSS在不到10分钟内完成的<a class="ae kz" href="https://www.youtube.com/watch?v=XO02P3QwENo" rel="noopener ugc nofollow" target="_blank">下雪的快速动画的灵感(视频在页面底部)。</a></p><blockquote class="la lb lc"><p id="8f6a" class="kb kc ld kd b ke kf kg kh ki kj kk kl le kn ko kp lf kr ks kt lg kv kw kx ky im bi translated"><em class="je">注:我们用</em> <a class="ae kz" href="https://pugjs.org/api/getting-started.html" rel="noopener ugc nofollow" target="_blank"> <em class="je"> Pug </em> </a> <em class="je">和</em><a class="ae kz" href="https://sass-lang.com/" rel="noopener ugc nofollow" target="_blank"><em class="je">Sass/SCSS</em></a><em class="je">分别简化了HTML和CSS的重复部分，但并不需要。您可以推断代码只有HTML和CSS(为了简单起见，我们将在本文中展示这两者。)</em></p></blockquote><p id="46d0" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这是我们的动画最终的样子(通过CodePen 进行<a class="ae kz" href="https://codepen.io/alvaromontoro/full/GRNmdzB" rel="noopener ugc nofollow" target="_blank">演示):</a></p><figure class="lh li lj lk gt iv"><div class="bz fp l di"><div class="ll lm l"/></div></figure><h1 id="ea8c" class="ln lo je bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">设置背景</h1><p id="9355" class="pw-post-body-paragraph kb kc je kd b ke ml kg kh ki mm kk kl km mn ko kp kq mo ks kt ku mp kw kx ky im bi translated">让我们从设置背景开始。这一步是可选的，可以通过多种方式完成。出于演示的目的，我们将仅限于用CSS制作一个黑色背景:</p><pre class="lh li lj lk gt mq mr ms mt aw mu bi"><span id="d115" class="mv lo je mr b gy mw mx l my mz">html, body {<br/>  padding: 0;<br/>  margin: 0;<br/>  width: 100vw;<br/>  height: 100vh;<br/>  position: relative;<br/>  overflow: hidden;<br/>  background: linear-gradient(#123, #111);<br/>}</span></pre><h1 id="909a" class="ln lo je bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">加入雪花</h1><p id="0445" class="pw-post-body-paragraph kb kc je kd b ke ml kg kh ki mm kk kl km mn ko kp kq mo ks kt ku mp kw kx ky im bi translated">然后我们将为屏幕上想要的每一片雪花创建一个<code class="fe na nb nc mr b">&lt;div&gt;</code>。我们可以这样做:</p><pre class="lh li lj lk gt mq mr ms mt aw mu bi"><span id="5f72" class="mv lo je mr b gy mw mx l my mz">&lt;div class="snowflake"&gt;&lt;/div&gt;<br/>...<br/>...<br/>...<br/>&lt;div class="snowflake"&gt;&lt;/div&gt;<br/>&lt;div class="snowflake"&gt;&lt;/div&gt; &lt;!-- 50 times! --&gt;</span></pre><p id="a695" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">但是为了简单起见，我们使用了PugJS，它允许我们对这些重复的任务使用循环:</p><pre class="lh li lj lk gt mq mr ms mt aw mu bi"><span id="b572" class="mv lo je mr b gy mw mx l my mz">- for (i = 0; i &lt; 50; i++)<br/>  div(class="snowflake")</span></pre><h1 id="5f0d" class="ln lo je bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">设计雪花</h1><p id="44e0" class="pw-post-body-paragraph kb kc je kd b ke ml kg kh ki mm kk kl km mn ko kp kq mo ks kt ku mp kw kx ky im bi translated">现在页面上已经有了所有的雪花，我们需要对它们进行样式化。他们将是小的，圆形的，白色的:</p><pre class="lh li lj lk gt mq mr ms mt aw mu bi"><span id="9a97" class="mv lo je mr b gy mw mx l my mz">.snowflake {<br/>  --size: 1vw;<br/>  width: var(--size);<br/>  height: var(--size);<br/>  background: white;<br/>  border-radius: 50%;<br/>  position: absolute;<br/>  top: -5vh;<br/>}</span></pre><p id="27e9" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们为宽度和高度使用了一个自定义属性(<code class="fe na nb nc mr b">--size</code>)，因为以后我们想要不同大小的雪花时会很方便。</p><p id="8c51" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">此外，我们将雪花放置在视图框架之外(从顶部)。我们将使它们落在视图框架的外部(从底部)。</p><h1 id="abc3" class="ln lo je bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">添加动画</h1><p id="26cf" class="pw-post-body-paragraph kb kc je kd b ke ml kg kh ki mm kk kl km mn ko kp kq mo ks kt ku mp kw kx ky im bi translated">为了制作这个秋天的动画，我们需要使用一个带有<code class="fe na nb nc mr b">@keyframes</code>的CSS动画。我们将从一些基本的东西开始，然后让它增长一点。</p><p id="c57c" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">首先，我们将使用<code class="fe na nb nc mr b">translate3d</code>让雪花垂直移动。因为这是一个3D转换，它将触发硬件加速，看起来比我们制作不同属性的动画更好，如<code class="fe na nb nc mr b">top</code>:</p><pre class="lh li lj lk gt mq mr ms mt aw mu bi"><span id="1263" class="mv lo je mr b gy mw mx l my mz">@keyframes snowfall {<br/>  0% {<br/>    transform: translate3d(0, 0, 0);<br/>  }<br/>  100% {<br/>    transform: translate3d(0, 110vh, 0);<br/>  }<br/>}</span></pre><p id="a0ab" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们可以通过添加以下属性将该动画应用于雪花类:</p><pre class="lh li lj lk gt mq mr ms mt aw mu bi"><span id="2831" class="mv lo je mr b gy mw mx l my mz">animation: snowfall 5s linear infinite;</span></pre><p id="d8a4" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">但是那样只会把雪花从上到下垂直移动，看起来不真实。再加上因为绝对定位，所有雪花都是重叠的，不好看。我们需要解决这个问题。</p><p id="7bcd" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们可以创建50种不同的规则，每种规则对应一片雪花，给它们分配不同的左边位置、角度、速度……虽然这在普通的CSS中是可能的，但这真的很乏味:</p><pre class="lh li lj lk gt mq mr ms mt aw mu bi"><span id="9492" class="mv lo je mr b gy mw mx l my mz">.snowflake:nth-child(1) {<br/>  --size: 0.6vw;<br/>  left: 55vw;<br/>  animation: snowfall 8s linear infinite;<br/>}<br/><br/>...<br/><br/>.snowflake:nth-child(49) {<br/>  --size: 1vw;<br/>  left: 78vw;<br/>  animation: snowfall 7s linear infinite;<br/>}<br/><br/>.snowflake:nth-child(50) {<br/>  --size: 1.5vw;<br/>  left: 20vw;<br/>  animation: snowfall 10s linear infinite;<br/>}</span></pre><p id="e058" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">用SCSS及其函数编码，然后使用生成的CSS代码更容易。因此，我们可以使用循环来大大简化开发，而不必编写数百行代码:</p><pre class="lh li lj lk gt mq mr ms mt aw mu bi"><span id="25e9" class="mv lo je mr b gy mw mx l my mz">@for $i from 1 through 50 {<br/>  .snowflake:nth-child(#{$i}) {<br/>    --size: #{random(5) * 0.2}vw; /* randomize size! */<br/>    left: #{random(100)}vw;<br/>    animation: snowfall #{5 + random(10)}s linear infinite;<br/>  }<br/>}</span></pre><p id="d1a3" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">嘣！那是7行代码，以后会编译成250行！我们不必担心会产生随机数，因为SCSS为此提供了<code class="fe na nb nc mr b"><a class="ae kz" href="https://blog.codepen.io/2013/08/26/random-function-in-sass/" rel="noopener ugc nofollow" target="_blank">random()</a></code> <a class="ae kz" href="https://blog.codepen.io/2013/08/26/random-function-in-sass/" rel="noopener ugc nofollow" target="_blank">函数</a>。</p><h1 id="cd4b" class="ln lo je bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">最后润色</h1><p id="9be3" class="pw-post-body-paragraph kb kc je kd b ke ml kg kh ki mm kk kl km mn ko kp kq mo ks kt ku mp kw kx ky im bi translated">雪花大小不同，移动速度也不同，但它们仍然只是垂直移动，这不太真实。我们可以将CSS变量与SCSS函数结合起来，添加一些<em class="ld">随机</em>横向移动:</p><pre class="lh li lj lk gt mq mr ms mt aw mu bi"><span id="7c63" class="mv lo je mr b gy mw mx l my mz">/* uses CSS variables to determine initial and final position */<br/>@keyframes snowfall {<br/>  0% {<br/>    transform: translate3d(var(--left-ini), 0, 0);<br/>  }<br/>  100% {<br/>    transform: translate3d(var(--left-end), 110vh, 0);<br/>  }<br/>}<br/><br/>@for $i from 1 through 50 {<br/>  .snowflake:nth-child(#{$i}) {<br/>    --size: #{random(5) * 0.2}vw;<br/>    --left-ini: #{random(20) - 10}vw; /* random initial translation */<br/>    --left-end: #{random(20) - 10}vw; /* random final translation */<br/>    left: #{random(100)}vw;<br/>    animation: snowfall #{5 + random(10)}s linear infinite;<br/>    animation-delay: -#{random(10)}s;<br/>  }<br/>}</span></pre><p id="fe31" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">作为最后的润色，我们添加了一个负片<code class="fe na nb nc mr b">animation-delay</code>，所以不是所有的雪花都在同一点开始动画。否则，它们会同时开始下降，看起来有点奇怪。</p><h1 id="b7c8" class="ln lo je bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">更新:将变量移动到HTML</h1><p id="b67b" class="pw-post-body-paragraph kb kc je kd b ke ml kg kh ki mm kk kl km mn ko kp kq mo ks kt ku mp kw kx ky im bi translated">上面的代码还可以，但是生成了很多重复的CSS规则，只是改变了一个很小的值。可以直接在<code class="fe na nb nc mr b">.snowflake</code>类中将其简化为一个(或两个)属性，并为每个元素使用CSS变量。</p><p id="ab42" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">想法是将CSS变量的声明从CSS移到HTML:</p><pre class="lh li lj lk gt mq mr ms mt aw mu bi"><span id="b4e3" class="mv lo je mr b gy mw mx l my mz">&lt;!-- 1 --&gt;<br/>&lt;div class="snowflake" style="--left: 69vw; --left-ini: -4vw; --left-end: 0vw; --speed: 8s; --size: 0.4vw; --delay: -10s;"&gt;&lt;/div&gt;<br/>...<br/>...<br/>...<br/>&lt;!-- 50 --&gt;<br/>&lt;div class="snowflake" style="--left: 83vw; --left-ini: 5vw; --left-end: 1vw; --speed: 10s; --size: 0.2vw; --delay: -6s;"&gt;&lt;/div&gt;</span></pre><p id="1b39" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在PugJS中，我们需要定义一个<code class="fe na nb nc mr b">random</code>函数，然后使用它为CSS变量设置值:</p><pre class="lh li lj lk gt mq mr ms mt aw mu bi"><span id="f389" class="mv lo je mr b gy mw mx l my mz">- function random(num) { return Math.floor(Math.random() * num) } <br/>- for (i = 0; i &lt; 50; i++) <br/>  div(class="snowflake", style=`--left: ${random(100)}vw; --left-ini: ${random(20) - 10}vw; --left-end: ${random(20) - 10}vw; --speed: ${5 + random(15)}s; --size: ${random(5) * 0.2}vw; --delay: -${random(15)}s;`)</span></pre><p id="e45a" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在我们已经有了HTML中的所有值，我们可以删除所有的CSS选择器，只保留动画属性直接在<code class="fe na nb nc mr b">.snowflake</code>定义中:</p><pre class="lh li lj lk gt mq mr ms mt aw mu bi"><span id="c790" class="mv lo je mr b gy mw mx l my mz">.snowflake {<br/>  width: var(--size);<br/>  height: var(--size);<br/>  background: white;<br/>  border-radius: 50%;<br/>  position: absolute;<br/>  top: -5vh;<br/>  left: var(--left);<br/>  animation: snowfall var(--speed) linear infinite;<br/>  animation-delay: var(--delay);<br/>}</span></pre><p id="0bc4" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这个解决方案使CSS变得更小更简单(从500行代码减少到34行代码！)同时给HTML增加了一点复杂性。<a class="ae kz" href="https://codepen.io/alvaromontoro/full/dyORQLy" rel="noopener ugc nofollow" target="_blank">你可以看到它在这里运行</a>。</p><h1 id="f0fb" class="ln lo je bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">结论</h1><p id="3cda" class="pw-post-body-paragraph kb kc je kd b ke ml kg kh ki mm kk kl km mn ko kp kq mo ks kt ku mp kw kx ky im bi translated">这是一个简单的动画，可以吸引眼球…但如果加入太多雪花，也会消耗CPU。慎用。</p><p id="8bdd" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">你可以在Youtube上观看动画开发的视频:</p><figure class="lh li lj lk gt iv"><div class="bz fp l di"><div class="nd lm l"/></div></figure><p id="0197" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><em class="ld">与此同时，你可以</em> <a class="ae kz" href="https://www.youtube.com/c/AlvaroMontoroCSS" rel="noopener ugc nofollow" target="_blank"> <em class="ld">订阅我的频道获取更多CSS视频</em> </a> <em class="ld"> :) </em></p></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><p id="9a0b" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><em class="ld">原载于2021年2月18日</em><a class="ae kz" href="https://dev.to/alvaromontoro/creating-a-snowfall-effect-with-html-and-css-1pp1" rel="noopener ugc nofollow" target="_blank"><em class="ld">https://dev . to</em></a><em class="ld">。</em></p></div></div>    
</body>
</html>