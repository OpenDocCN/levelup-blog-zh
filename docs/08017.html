<html>
<head>
<title>Stock Data Analysis and Visualization using PyStoxx</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用PyStoxx进行股票数据分析和可视化</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/stock-data-analysis-and-visualization-using-pystoxx-ca764d9fe8cc?source=collection_archive---------21-----------------------#2021-03-28">https://levelup.gitconnected.com/stock-data-analysis-and-visualization-using-pystoxx-ca764d9fe8cc?source=collection_archive---------21-----------------------#2021-03-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="591e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">使用PyStoxx库检索上市公司的当前数据和历史信息。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi ko"><img src="../Images/b0bf8738827c717ac4d19821f85eeb78.png" data-original-src="https://miro.medium.com/v2/resize:fit:896/format:webp/1*GjJoge4QQAJKPAuygjnmJw.png"/></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk translated">作者创造的形象。</figcaption></figure><p id="c72a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">数据科学领域最常见的应用之一是信息的检索、可视化和分析，尤其是股票市场的信息。鉴于最近发生的一些重大事件，如亚马逊(Amazon)的指数增长、Game Stop (GME)股票的做空，甚至是科技行业的整体趋势，密切关注战略收购随时间的变化从未像现在这样重要。</p><p id="37a7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">为了监控这些趋势，我们在2021年3月开发并发布了一个新的Python库，名为<a class="ae la" href="https://pypi.org/project/pystoxx/" rel="noopener ugc nofollow" target="_blank"> PyStoxx </a>。使用<a class="ae la" href="https://pypi.org/project/pystoxx/" rel="noopener ugc nofollow" target="_blank"> PyStoxx </a>，用户能够检索数据，例如:</p><ul class=""><li id="c293" class="lb lc it js b jt ju jx jy kb ld kf le kj lf kn lg lh li lj bi translated">当前和<strong class="js iu">历史定价</strong>数据(高、低、...)</li><li id="ff39" class="lb lc it js b jt lk jx ll kb lm kf ln kj lo kn lg lh li lj bi translated">当前和<strong class="js iu">历史新闻</strong> <strong class="js iu">情绪</strong>数据(正面、负面、…)</li><li id="7faf" class="lb lc it js b jt lk jx ll kb lm kf ln kj lo kn lg lh li lj bi translated">一般公司<strong class="js iu">信息</strong>(名称、地点、网站……)</li><li id="6ec9" class="lb lc it js b jt lk jx ll kb lm kf ln kj lo kn lg lh li lj bi translated">定价<strong class="js iu">报价</strong>(开盘、收盘……)</li><li id="453f" class="lb lc it js b jt lk jx ll kb lm kf ln kj lo kn lg lh li lj bi translated">已知公司<strong class="js iu">竞争</strong>(阿姆津、MSFT……)</li></ul><h2 id="7b48" class="lp lq it bd lr ls lt dn lu lv lw dp lx kb ly lz ma kf mb mc md kj me mf mg mh bi translated">快速入门指南:</h2><ol class=""><li id="aa5b" class="lb lc it js b jt mi jx mj kb mk kf ml kj mm kn mn lh li lj bi translated">使用Pip安装PyStoxx库:</li></ol><pre class="kp kq kr ks gt mo mp mq mr aw ms bi"><span id="2c3c" class="lp lq it mp b gy mt mu l mv mw">pip install pystoxx</span></pre><p id="c4c8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">2.导入PyStoxx库:</p><pre class="kp kq kr ks gt mo mp mq mr aw ms bi"><span id="9557" class="lp lq it mp b gy mt mu l mv mw">from pystoxx import Stoxx</span></pre><p id="6acc" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">3.创建一个stoxx对象，并使用RapidAPI扩展添加您的API令牌。通过访问RapidAPI主办的Recursiv的<a class="ae la" href="https://rapidapi.com/recursivllc/api/stoxx-by-recursiv" rel="noopener ugc nofollow" target="_blank"> Stoxx，注册一个没有信用卡的<strong class="js iu">免费计划。</strong></a></p><pre class="kp kq kr ks gt mo mp mq mr aw ms bi"><span id="8dca" class="lp lq it mp b gy mt mu l mv mw">stoxx = Stoxx()<br/>stoxx.RapidAPI("add-your-token-here")</span></pre><p id="ef96" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">4.开始查询历史价格等数据:</p><pre class="kp kq kr ks gt mo mp mq mr aw ms bi"><span id="f559" class="lp lq it mp b gy mt mu l mv mw">stoxx.get_historical_prices(ticker="msft", months=2)</span></pre><p id="c14a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">请参考我们关于Pip 的<a class="ae la" href="https://pypi.org/project/pystoxx/" rel="noopener ugc nofollow" target="_blank">文档，了解您可以查询的所有可用数据的详细信息。</a></p><h2 id="b034" class="lp lq it bd lr ls lt dn lu lv lw dp lx kb ly lz ma kf mb mc md kj me mf mg mh bi translated">检索和可视化股票数据:</h2><p id="9a22" class="pw-post-body-paragraph jq jr it js b jt mi jv jw jx mj jz ka kb mx kd ke kf my kh ki kj mz kl km kn im bi translated">使用PyStoxx既快速又简单。我们将从导入本教程所需的库开始。</p><pre class="kp kq kr ks gt mo mp mq mr aw ms bi"><span id="e2e8" class="lp lq it mp b gy mt mu l mv mw">from pystoxx import Stoxx</span><span id="8de3" class="lp lq it mp b gy na mu l mv mw">import pandas as pd<br/>from datetime import datetime<br/>import matplotlib.pyplot as plt<br/>import seaborn as sns</span></pre><p id="451c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">接下来，我们将检索一些关于感兴趣的股票的一般公司数据。我们可以通过从<em class="nb"> stoxx </em>对象中调用<em class="nb"> get_company_data() </em>函数来实现。</p><pre class="kp kq kr ks gt mo mp mq mr aw ms bi"><span id="f1e0" class="lp lq it mp b gy mt mu l mv mw">stoxx = Stoxx()<br/>stoxx.RapidAPI("add-your-token-here")</span><span id="ae09" class="lp lq it mp b gy na mu l mv mw">ticker = "tsla"<br/>company_Data = stoxx.get_company_data(ticker)<br/>pd.DataFrame.from_dict(company_Data, orient='index')</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/665f05eb019529bed2e50dfca60e877f.png" data-original-src="https://miro.medium.com/v2/resize:fit:692/format:webp/1*1McRiYCUhcVs_u8YOURNQQ.png"/></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk translated">作者创造的形象。</figcaption></figure><p id="6159" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们现在将通过从stoxx对象调用<em class="nb">get _ historical _ prices()</em>函数来检索给定股票的历史价格。让我们看看这些数据是什么样的:</p><pre class="kp kq kr ks gt mo mp mq mr aw ms bi"><span id="e553" class="lp lq it mp b gy mt mu l mv mw">msft_prices = stoxx.get_historical_prices(ticker=ticker, months=12)<br/>msft_prices = pd.DataFrame(msft_prices)<br/>msft_prices.head()</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/d409e94d8f2eeeadbb22a6423322dc39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1124/format:webp/1*2xka3cKfpeXyb0LZyl1wzw.png"/></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk translated">作者创造的形象。</figcaption></figure><p id="3505" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">为了使我们的数据更容易图形化，我们可以隔离我们感兴趣的列，并将日期设置为数据帧的索引。</p><pre class="kp kq kr ks gt mo mp mq mr aw ms bi"><span id="6d13" class="lp lq it mp b gy mt mu l mv mw">msft_prices["date"] = pd.to_datetime(msft_prices['date'], utc=True).dt.date<br/>msft_prices = msft_prices[["high", "low", "open", "close", "volume", "date"]]<br/>msft_prices = msft_prices.set_index('date')<br/>msft_prices.head()</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/dd7b33c52a3b1daecf307f3b3f5dda93.png" data-original-src="https://miro.medium.com/v2/resize:fit:670/format:webp/1*TyRKy9botVCtP9dseQGdnw.png"/></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk translated">作者创造的形象。</figcaption></figure><p id="a22e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在让我们继续绘制最高价、最低价和收盘价的图表。我们可以将收盘价作为我们的主要定位点，并通过绘制相对于该点的最高价和最低价来了解变化。</p><pre class="kp kq kr ks gt mo mp mq mr aw ms bi"><span id="e97e" class="lp lq it mp b gy mt mu l mv mw">plt.figure(figsize=(18,5))<br/>sns.set_style("darkgrid")<br/># sns.set(rc={'axes.facecolor':'navy', 'figure.facecolor':'white'})</span><span id="c64c" class="lp lq it mp b gy na mu l mv mw">plt.xlabel("Time (Days)")<br/>plt.ylabel("Price (USD)")<br/>plt.title(f"Stock Price History for Ticker", fontsize=20)</span><span id="47f1" class="lp lq it mp b gy na mu l mv mw">plt.plot(msft_prices["close"], "royalblue", linewidth=2)<br/>plt.plot(msft_prices["high"], linestyle="--", color="grey", linewidth=1)<br/>plt.plot(msft_prices["low"], linestyle="--", color="grey", linewidth=1)</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ng nh di ni bf nj"><div class="gh gi nf"><img src="../Images/b0bf68f043b2be06516b5646aacc105d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fnMcYd6Xs1A8Tb6MJtHjNA.png"/></div></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk translated">作者创造的形象。</figcaption></figure><p id="acb7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们可以很好地了解过去几个月的价格和公司业绩。然而，高点和低点并不像我们想象的那样有用。也许创建一些布林线可能证明对这个数据集更有用。</p><pre class="kp kq kr ks gt mo mp mq mr aw ms bi"><span id="433a" class="lp lq it mp b gy mt mu l mv mw">msft_prices['middle_band'] = msft_prices['close'].rolling(window=20).mean()<br/>msft_prices['upper_band'] = msft_prices['close'].rolling(window=20).mean() + msft_prices['close'].rolling(window=20).std()*3<br/>msft_prices['lower_band'] = msft_prices['close'].rolling(window=20).mean() - msft_prices['close'].rolling(window=20).std()*3</span><span id="0498" class="lp lq it mp b gy na mu l mv mw">plt.figure(figsize=(18,5))<br/>sns.set_style("darkgrid")<br/>plt.xlabel("Time (Days)")<br/>plt.ylabel("Price (USD)")<br/>plt.title(f"Stock Price History for Ticker", fontsize=20)</span><span id="f991" class="lp lq it mp b gy na mu l mv mw">plt.plot(msft_prices["close"], "royalblue")<br/>plt.plot(msft_prices["middle_band"], linestyle="--", color="grey", label="Middle Band")<br/>plt.plot(msft_prices["upper_band"], linestyle="--", color="green", label="Upper Band")<br/>plt.plot(msft_prices["lower_band"], linestyle="--", color="red", label="Lower Band")<br/>plt.legend()</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ng nh di ni bf nj"><div class="gh gi nk"><img src="../Images/c064ee141562106e43a9968915161203.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SyEIpMkd96_vX86kaBwTbQ.png"/></div></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk translated">作者创造的形象。</figcaption></figure><p id="5ffa" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们的图表看起来更好更有用了。波段使用两个参数:窗口和标准差，让我们更好地了解价格范围水平。监控价格时，将交易量作为分析的一部分也很重要。让我们继续绘制图表。</p><pre class="kp kq kr ks gt mo mp mq mr aw ms bi"><span id="37c6" class="lp lq it mp b gy mt mu l mv mw">plt.figure(figsize=(20,10))<br/>top_plt = plt.subplot2grid((5,4), (0, 0), rowspan=3, colspan=4)<br/>top_plt.plot(msft_prices["close"], "royalblue")<br/>top_plt.plot(msft_prices["middle_band"], linestyle="--", color="grey", label="Middle Band")<br/>top_plt.plot(msft_prices["upper_band"], linestyle="--", color="green", label="Upper Band")<br/>top_plt.plot(msft_prices["lower_band"], linestyle="--", color="red", label="Lower Band")</span><span id="90f7" class="lp lq it mp b gy na mu l mv mw">bottom_plt = plt.subplot2grid((5,4), (3,0), rowspan=1, colspan=4)<br/>bottom_plt.bar(msft_prices.index, msft_prices['volume'])</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ng nh di ni bf nj"><div class="gh gi nl"><img src="../Images/5242578313e78e419ee9caf3972c71ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*96Wwt2EbXoE3VJdcnnZL0w.png"/></div></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk translated">作者创造的形象。</figcaption></figure><h2 id="3d79" class="lp lq it bd lr ls lt dn lu lv lw dp lx kb ly lz ma kf mb mc md kj me mf mg mh bi translated">后续步骤:</h2><p id="1a62" class="pw-post-body-paragraph jq jr it js b jt mi jv jw jx mj jz ka kb mx kd ke kf my kh ki kj mz kl km kn im bi translated">系统化和程序化地监控感兴趣的股票数据的能力从未像现在这样迫切。然而，知道别人对某个股票行情的想法的能力同样重要，甚至更重要。为此，我们开发了一种叫做<em class="nb"> get_historical_news() </em>的方法，允许用户<strong class="js iu">检索当前和历史新闻文章的情感数据</strong>。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ng nh di ni bf nj"><div class="gh gi nm"><img src="../Images/7525c0bccd3ca51bf38079a6053ac076.png" data-original-src="https://miro.medium.com/v2/resize:fit:948/format:webp/1*ewKoCNUaa9D29KVkdam9Yg.png"/></div></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk translated">作者创造的形象。</figcaption></figure><p id="e4d4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">使用这些数据，用户能够开发仪表板来监控当前价格和他们各自的情绪，或者使用历史数据开发预测模型。我们希望在未来的文章中涵盖这些功能以及更多内容！</p><p id="6d3d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">披露方&amp;免责声明:</strong></p><p id="4bb4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">投资包含很大的风险。Recursiv LLC、作者或其各自的任何关联公司对使用Stoxx服务或pyStoxx图书馆提供的信息可能获得的任何结果不作任何保证或其他承诺。虽然可以使用Stoxx服务分析过去的性能，但过去的性能不应被视为未来性能的指示。在没有咨询个人财务顾问和仔细研究发行人的招股说明书和其他公开文件的情况下，不应做出投资决定。在法律允许的最大范围内，如果本服务提供的任何信息、评论、分析、意见、建议和/或推荐被证明是不准确、不完整或不可靠的，或导致任何投资或其他损失，作者及其各自的关联公司概不负责。本服务提供的任何和所有数据应被视为评论和意见，并可能随时更改。服务中提供的信息来自Recursiv LLC认为可靠的来源。然而，Recursiv LLC和提交人都没有独立核实或调查所有这些信息。Recursiv LLC、作者或其各自的附属公司均不保证任何此类信息的准确性或完整性。Recursiv LLC、作者或其各自的任何关联公司对所提供的任何信息中的任何错误或遗漏负责。</p></div></div>    
</body>
</html>