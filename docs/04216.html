<html>
<head>
<title>Learn I18N and How to Use it in React Project</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">学习I18N以及如何在React项目中使用它</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/learn-i18n-and-how-to-use-it-in-react-project-5a2f9c1fad6f?source=collection_archive---------10-----------------------#2020-06-15">https://levelup.gitconnected.com/learn-i18n-and-how-to-use-it-in-react-project-5a2f9c1fad6f?source=collection_archive---------10-----------------------#2020-06-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="ec06" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">国际化和本地化</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/f2daeaf857d63939e4e687b35afeff79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FIE8P92PI21P5FiV"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@flawlessophie?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">索菲</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="0444" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">国际化就是你如何让你的应用对任何客户开放，不管他们来自哪个国家。</p><p id="836c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这篇文章中，我将讨论i18n是什么，以及如何在React项目中以一种简单而容易的方式使用它。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="fd67" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">i18n简介</h1><p id="0178" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">“i18n”是“国际化”的缩写标识符。首末字母代表“国际化”的首末字母，18表示首末字母之间的字符数，“I”和“n”。</p><p id="01ad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是在您的web项目、应用程序项目或任何软件中将一种语言转换或翻译成另一种语言的过程。</p><h1 id="2ddc" class="mc md it bd me mf mz mh mi mj na ml mm jz nb ka mo kc nc kd mq kf nd kg ms mt bi translated">ECMAScript中的Intl接口</h1><p id="b296" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">ECMAScript内部有原生的国际化API模块，其中包含许多可能对某些人有用的方法。例如，<code class="fe ne nf ng nh b">Intl.Collator()</code>比较可比较的字符串，而<code class="fe ne nf ng nh b">Intl.DateTimeFormat</code>根据给定的语言类型将语言类型字符串格式化为<em class="ni">日期</em>类型字符串。</p><pre class="kj kk kl km gt nj nh nk nl aw nm bi"><span id="d195" class="nn md it nh b gy no np l nq nr">const date = new Date(Date.UTC(2012, 11, 20, 3, 0, 0));<br/>// Results below assume UTC timezone - your results may vary</span><span id="b13c" class="nn md it nh b gy ns np l nq nr">console.log(new Intl.DateTimeFormat('en-US').format(date));<br/>// expected output: "12/20/2012"</span><span id="bece" class="nn md it nh b gy ns np l nq nr">console.log(new Intl.DateTimeFormat('en-GB').format(date));<br/>// expected output: "20/12/2012"</span></pre><p id="cee2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个想法来自于语言敏感性，这意味着一种语言中的一些单词或习语或任何表达在另一种语言中可能有不同的意思，所以你应该知道你所在地区的<em class="ni">日期</em>格式在另一个地区可能会有不同的写法。</p><p id="1a4a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe ne nf ng nh b">Intl</code> API中的大多数方法都是关于格式化一些文本，比较一些值，或者类似的事情，这不是我们这次想要的。</p><h1 id="532f" class="mc md it bd me mf mz mh mi mj na ml mm jz nb ka mo kc nc kd mq kf nd kg ms mt bi translated">i18的基本概念下一步</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nt"><img src="../Images/212e85906c493b3c5b6cb7c344959bc8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7LR4lSwXGGCq33NK1p9xjg.png"/></div></div></figure><p id="0975" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">其工作原理的核心概念非常简单。在您的React项目中，您将i18next模块注入到项目中，以便根模块下的所有组件都可以访问它，并且这个注入的模块有一个对JSON对象的引用，每个对象都有关于要翻译的字符串的键值对的所有信息。</p><p id="a500" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦您的组件请求i18next模块获取一些匹配的键数据，i18next就会在JSON对象中查找对应于给定键的值。</p><p id="61e4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您应该在React项目中安装以下包。</p><ul class=""><li id="50d4" class="nu nv it lb b lc ld lf lg li nw lm nx lq ny lu nz oa ob oc bi translated"><code class="fe ne nf ng nh b"><a class="ae ky" href="https://www.npmjs.com/package/i18next" rel="noopener ugc nofollow" target="_blank">npm i -S i18next</a></code> <a class="ae ky" href="https://www.npmjs.com/package/i18next" rel="noopener ugc nofollow" target="_blank">或</a> <code class="fe ne nf ng nh b"><a class="ae ky" href="https://www.npmjs.com/package/i18next" rel="noopener ugc nofollow" target="_blank">yarn add i18next</a></code></li><li id="1efe" class="nu nv it lb b lc od lf oe li of lm og lq oh lu nz oa ob oc bi translated"><code class="fe ne nf ng nh b"><a class="ae ky" href="https://www.npmjs.com/package/react-i18next" rel="noopener ugc nofollow" target="_blank">npm i -S react-i18next</a></code> <a class="ae ky" href="https://www.npmjs.com/package/react-i18next" rel="noopener ugc nofollow" target="_blank">或</a> <code class="fe ne nf ng nh b"><a class="ae ky" href="https://www.npmjs.com/package/react-i18next" rel="noopener ugc nofollow" target="_blank">yarn add i18next</a></code></li></ul><p id="4503" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">i18next包是一个非常流行的通用语言国际化库，react-18next包是专门为react设计的，可以让你使用钩子或者其他方法。</p><h1 id="d827" class="mc md it bd me mf mz mh mi mj na ml mm jz nb ka mo kc nc kd mq kf nd kg ms mt bi translated">步骤1:创建JSON文件</h1><p id="2f1d" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">首先，您应该创建代表每种语言的JSON文件。在我做的示例项目中，我使用了英语和法语，所以需要2个JSON文件。</p><p id="94c3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe ne nf ng nh b">public/locales/{lang}/translation.json</code>创造它们。</p><pre class="kj kk kl km gt nj nh nk nl aw nm bi"><span id="a0a3" class="nn md it nh b gy no np l nq nr">// public/locales/en/translation.json</span><span id="e6bb" class="nn md it nh b gy ns np l nq nr">{<br/>  "figcaption": "Welcome to React and react-i18next"<br/>}</span></pre><p id="84b1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">并为法语创建另一个。</p><pre class="kj kk kl km gt nj nh nk nl aw nm bi"><span id="678d" class="nn md it nh b gy no np l nq nr">// public/locales/fr/translation.json</span><span id="f60f" class="nn md it nh b gy ns np l nq nr">{<br/>  "figcaption": "Bienvenue dans React et react-i18next"<br/>}</span></pre><p id="7c2a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可能会问“就这些吗？”</p><p id="f98e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">是的，就这些。😎</p><h1 id="c8b1" class="mc md it bd me mf mz mh mi mj na ml mm jz nb ka mo kc nc kd mq kf nd kg ms mt bi translated">步骤2:将i18n注入到项目中</h1><p id="7489" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">为了让React知道它可以调用i18n，我们应该在<code class="fe ne nf ng nh b">src/i18n.js</code>中创建一个新文件。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oi oj l"/></div></figure><pre class="kj kk kl km gt nj nh nk nl aw nm bi"><span id="b990" class="nn md it nh b gy no np l nq nr">import translationEN from '../translation.json';<br/>import translationFR from '../translation.json';</span><span id="a073" class="nn md it nh b gy ns np l nq nr">const resources = {<br/>  en: { translation: translationEN },<br/>  fr: { translation: transaltionFR },<br/>}</span></pre><p id="ae1f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，您应该创建一个对象来保存我们希望提供给用户的语言的翻译信息。这个对象是初始化i18n所必需的。</p><pre class="kj kk kl km gt nj nh nk nl aw nm bi"><span id="1328" class="nn md it nh b gy no np l nq nr">import i18n from 'i18next';<br/>import { initReactI18next } from 'react-i18next';</span><span id="6e65" class="nn md it nh b gy ns np l nq nr">i18n.use(initReactI18next)</span></pre><p id="31ec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你需要把<code class="fe ne nf ng nh b">initReactI18next</code>放到i18n中进行初始化。react-i18next的文档中说这个任务意味着你应该将i18n实例传递给react-18next，这样它就可以使用i18n了，但是听起来顺序应该反过来。</p><p id="b254" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不管怎样，重要的是你需要导入<code class="fe ne nf ng nh b">initReactI18next</code>并将其传递给<code class="fe ne nf ng nh b">i18n</code>。</p><pre class="kj kk kl km gt nj nh nk nl aw nm bi"><span id="00ba" class="nn md it nh b gy no np l nq nr">i18n<br/>  .use(initReactI18next)<br/>  .init({<br/>    resources, <br/>    lng: "en",<br/>    fallbackLng: "en",<br/>  });</span></pre><p id="041f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe ne nf ng nh b">resources</code>是我们前面做的关于翻译信息的对象。<code class="fe ne nf ng nh b">lng</code>表示默认语言，<code class="fe ne nf ng nh b">fallbackLng</code>表示当没有与您传递给i18n进行翻译的键相对应的值时，React将使用的语言。例如，当您的语言设置为法语，并且您想将JSON文件中的“很高兴见到您”翻译为法语时，如果React在法语JSON中找不到合适的语言，它将在英语JSON文件中查找。</p><h1 id="d8b6" class="mc md it bd me mf mz mh mi mj na ml mm jz nb ka mo kc nc kd mq kf nd kg ms mt bi translated">步骤3:使用useTranslation钩子(对于FC组件)</h1><p id="ea31" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">如果使用的是功能组件，可以使用react-i18next的钩子，名为<code class="fe ne nf ng nh b">useTranslation</code>。</p><pre class="kj kk kl km gt nj nh nk nl aw nm bi"><span id="9b2e" class="nn md it nh b gy no np l nq nr">import { useTranslation } from "react-i18next";</span><span id="c2ca" class="nn md it nh b gy ns np l nq nr">const Desc = () =&gt; {<br/>  const { t } = useTranslation();</span><span id="1410" class="nn md it nh b gy ns np l nq nr">return &lt;p&gt;{t("figcaption")}&lt;/p&gt;;<br/>}</span></pre><p id="f364" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以把钥匙从<code class="fe ne nf ng nh b">useTranslation</code>挂钩上递给<code class="fe ne nf ng nh b">t</code>。然后React将要求i18next查找键的正确值。</p><h1 id="0b7c" class="mc md it bd me mf mz mh mi mj na ml mm jz nb ka mo kc nc kd mq kf nd kg ms mt bi translated">例子</h1><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ok oj l"/></div></figure><h1 id="02d8" class="mc md it bd me mf mz mh mi mj na ml mm jz nb ka mo kc nc kd mq kf nd kg ms mt bi translated">结论</h1><p id="a40d" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">这种方法非常容易、简单、易懂，但并不总是正确的答案。因为您的项目必须拥有所有用于转换的JSON文件，所以它可能会增加您的包的总大小。</p><p id="1577" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有人说你可以把这些静态文件上传到某个服务器上，但是我想告诉你这应该是你的决定。</p><h1 id="5945" class="mc md it bd me mf mz mh mi mj na ml mm jz nb ka mo kc nc kd mq kf nd kg ms mt bi translated">资源</h1><ul class=""><li id="8728" class="nu nv it lb b lc mu lf mv li ol lm om lq on lu nz oa ob oc bi translated"><a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl" rel="noopener ugc nofollow" target="_blank"> Intl — MDN </a></li><li id="0d6c" class="nu nv it lb b lc od lf oe li of lm og lq oh lu nz oa ob oc bi translated"><a class="ae ky" href="https://react.i18next.com/legacy-v9/step-by-step-guide" rel="noopener ugc nofollow" target="_blank">反应过来i18n一步一步引导</a></li><li id="883c" class="nu nv it lb b lc od lf oe li of lm og lq oh lu nz oa ob oc bi translated"><a class="ae ky" href="https://react.i18next.com/" rel="noopener ugc nofollow" target="_blank">反应i18下一步</a></li><li id="b8fb" class="nu nv it lb b lc od lf oe li of lm og lq oh lu nz oa ob oc bi translated"><a class="ae ky" href="https://www.i18next.com/" rel="noopener ugc nofollow" target="_blank">i18下一个文档</a></li></ul></div></div>    
</body>
</html>