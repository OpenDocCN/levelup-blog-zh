<html>
<head>
<title>How to translate SwiftUI applications</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何翻译SwiftUI应用程序</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-translate-swiftui-applications-c1726dbded3f?source=collection_archive---------11-----------------------#2021-07-12">https://levelup.gitconnected.com/how-to-translate-swiftui-applications-c1726dbded3f?source=collection_archive---------11-----------------------#2021-07-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="f60b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">本地化我们的应用程序比我们想象的更重要。我们通常坚持把英语作为主要语言。世界上78亿居民中只有4.9%说英语。大多数人的母语不是英语。总的来说，只有3.6亿人把英语作为他们的第一语言。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/b22410e29e09964ecf3da68f025c455e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U-pq7DHNIuz2dvJ2wEmw7Q.jpeg"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">Amy Humphries 在<a class="ae le" href="https://unsplash.com/?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片。</figcaption></figure><p id="2af1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">SwiftUI为我们提供了出色且易于使用的选项，可以将我们的应用程序翻译成多种语言。我们可能都熟悉存放所有翻译的<code class="fe lf lg lh li b">Localizable.strings</code>文件。我不打算为您的项目创建这个。</p><p id="a61d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">此外，Xcode可以选择更改构建设置和默认语言，而无需更改系统语言本身。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi lj"><img src="../Images/2bc0391a200a6f3d0e9f5460d979befd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*yEGdw3sOle_2seP1.png"/></div></div></figure><p id="1e0e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在本文中，我们将讨论如何通过检查内置功能来翻译我们的SwiftUI应用程序。我们还将看到如何翻译动态变化的文本。</p><h1 id="336d" class="lk ll it bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">文本方法</h1><p id="9153" class="pw-post-body-paragraph jq jr it js b jt mi jv jw jx mj jz ka kb mk kd ke kf ml kh ki kj mm kl km kn im bi translated">几乎所有的SwiftUI构建块，像<code class="fe lf lg lh li b">Text</code>、<code class="fe lf lg lh li b">Button</code>、<code class="fe lf lg lh li b">TextField</code>等等，都带有在幕后使用本地化的初始化器。</p><p id="6323" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">例如，假设我们创建了一个标题为<code class="fe lf lg lh li b">Name</code>的<code class="fe lf lg lh li b">Text</code>视图。我们可以把它添加到<code class="fe lf lg lh li b">Localizable.strings</code>文件中，这样我们什么都不用做就能翻译出来。如果没有提供翻译，它将回到指定的默认标题。我们可以说SwiftUI负责翻译我们的应用程序，而不需要我们做额外的工作。</p><p id="d662" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们更深入一点，检查一下<code class="fe lf lg lh li b">Text</code>初始化器。</p><pre class="kp kq kr ks gt mn li mo mp aw mq bi"><span id="6260" class="mr ll it li b gy ms mt l mu mv">init(_ key: LocalizedStringKey, tableName: String? = nil, bundle: Bundle? = nil, comment: StaticString? = nil)</span></pre><p id="1bcc" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们可以看到第一个参数是<code class="fe lf lg lh li b">LocalizedStringKey</code>。让我们来探索一下。</p><h1 id="dc9c" class="lk ll it bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">什么是LocalizedStringKey？</h1><p id="490f" class="pw-post-body-paragraph jq jr it js b jt mi jv jw jx mj jz ka kb mk kd ke kf ml kh ki kj mm kl km kn im bi translated"><code class="fe lf lg lh li b">LocalizedStringKey</code>是为我们SwiftUI应用中的所有翻译提供动力的魔法。它所做的是在<code class="fe lf lg lh li b">Localizable.strings</code>文件中查找并检查是否有这个键的翻译。它符合<code class="fe lf lg lh li b">ExpressibleByStringLiteral</code>，这就是为什么我们可以在SwiftUI视图初始化器中使用它。</p><p id="a38f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">使用<code class="fe lf lg lh li b">LocalizedStringKey</code>的另一种方式是将翻译传递给视图。假设我们有一个greetings视图，它接受一个问候文本作为参数。在这种情况下，我们需要创建一个类型为<code class="fe lf lg lh li b">LocalizedStringKey</code>的参数。当构造这个时，我们传入的不是<code class="fe lf lg lh li b">String</code>值，而是通过使用<code class="fe lf lg lh li b">LocalizedStringKey(_ value: String)</code>初始化器初始化的<code class="fe lf lg lh li b">LocalizedStringKey</code>。在这种情况下，它不仅仅被视为文本，而是翻译字符串文件中的一个键。</p><h1 id="e630" class="lk ll it bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">字符串插值</h1><p id="5355" class="pw-post-body-paragraph jq jr it js b jt mi jv jw jx mj jz ka kb mk kd ke kf ml kh ki kj mm kl km kn im bi translated">现在我们知道了静态翻译是如何工作的，但是它是如何处理动态创建的文本的呢？例如，我们有一个文本视图，可以显示带有用户提供的名称的问候语。它将是<code class="fe lf lg lh li b">Hello, Mary!</code>，但是<code class="fe lf lg lh li b">Mary</code>将被替换为来自文本字段的条目。要翻译这类文本，我们应该使用字符串插值。</p><p id="1d3a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在上面的例子中，我们应该添加<code class="fe lf lg lh li b">Localizable.strings</code>文件条目<code class="fe lf lg lh li b">Hello, %@!</code>，并且<code class="fe lf lg lh li b">%@</code>将是我们在创建<code class="fe lf lg lh li b">LocalizedStringKey</code>时传递的一个<code class="fe lf lg lh li b">String</code>参数，如下所示:</p><pre class="kp kq kr ks gt mn li mo mp aw mq bi"><span id="a037" class="mr ll it li b gy ms mt l mu mv">Text("Hello, \(name)!")</span></pre><p id="a098" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在幕后，它使用字符串格式，可以格式化数字、日期、货币等，并考虑到用户的地区。在这篇博文中，我们不打算深入探讨这个话题。</p><h1 id="ee6f" class="lk ll it bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">TL；速度三角形定位法(dead reckoning)</h1><p id="0fca" class="pw-post-body-paragraph jq jr it js b jt mi jv jw jx mj jz ka kb mk kd ke kf ml kh ki kj mm kl km kn im bi translated">地球上只有4.9%的人把英语作为第一语言。这意味着我们必须翻译我们的应用程序，以达到更广泛的受众，使他们更容易理解。</p><p id="cb89" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">SwiftUI有一套很好的内置功能来促进翻译。大多数视图元素可以通过向<code class="fe lf lg lh li b">Localizable.strings</code>文件添加翻译来翻译。</p><p id="7e1f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">对于动态文本，我们应该使用字符串插值并相应地格式化它，要么在参数中传递的是文本、数字或日期。SwiftUI将按照用户定义的语言环境对其进行格式化。</p><h1 id="a5e1" class="lk ll it bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">链接</h1><ul class=""><li id="eb00" class="mw mx it js b jt mi jx mj kb my kf mz kj na kn nb nc nd ne bi translated"><a class="ae le" href="https://github.com/fassko/SwiftUILocalization" rel="noopener ugc nofollow" target="_blank">样本代码</a></li><li id="5ca8" class="mw mx it js b jt nf jx ng kb nh kf ni kj nj kn nb nc nd ne bi translated"><a class="ae le" href="https://developer.apple.com/documentation/xcode/localization" rel="noopener ugc nofollow" target="_blank">苹果本地化指南</a></li><li id="2b75" class="mw mx it js b jt nf jx ng kb nh kf ni kj nj kn nb nc nd ne bi translated"><a class="ae le" href="https://swiftwithmajid.com/2019/10/16/localization-in-swiftui/" rel="noopener ugc nofollow" target="_blank">swift ui中的本地化</a></li><li id="dea5" class="mw mx it js b jt nf jx ng kb nh kf ni kj nj kn nb nc nd ne bi translated"><a class="ae le" href="https://developer.apple.com/forums/thread/650492" rel="noopener ugc nofollow" target="_blank">swift ui论坛线程中的本地化</a></li><li id="3122" class="mw mx it js b jt nf jx ng kb nh kf ni kj nj kn nb nc nd ne bi translated"><a class="ae le" href="https://benoitpasquier.com/localization-swiftui-how-top-preview-localized-content/" rel="noopener ugc nofollow" target="_blank">本地化使用SwiftUI，如何预览您的本地化内容</a></li><li id="a849" class="mw mx it js b jt nf jx ng kb nh kf ni kj nj kn nb nc nd ne bi translated"><a class="ae le" href="https://www.empowerapps.show/96" rel="noopener ugc nofollow" target="_blank">扎克布拉斯本地化</a></li><li id="956a" class="mw mx it js b jt nf jx ng kb nh kf ni kj nj kn nb nc nd ne bi translated"><a class="ae le" href="https://www.ibabbleon.com/swiftui_localization_tutorial.html" rel="noopener ugc nofollow" target="_blank">swift ui本地化教程介绍</a></li><li id="23e8" class="mw mx it js b jt nf jx ng kb nh kf ni kj nj kn nb nc nd ne bi translated"><a class="ae le" href="https://developer.apple.com/videos/play/wwdc2021-10220" rel="noopener ugc nofollow" target="_blank">本地化您的SwiftUI应用程序WWDC对话</a></li><li id="2f93" class="mw mx it js b jt nf jx ng kb nh kf ni kj nj kn nb nc nd ne bi translated"><a class="ae le" href="https://developer.apple.com/documentation/swiftui/preparing-views-for-localization" rel="noopener ugc nofollow" target="_blank">准备本地化视图</a></li></ul></div></div>    
</body>
</html>