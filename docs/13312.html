<html>
<head>
<title>How to Read and Write Files in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Python中读写文件</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-read-and-write-files-in-python-75ed4aa6fbf7?source=collection_archive---------9-----------------------#2022-08-25">https://levelup.gitconnected.com/how-to-read-and-write-files-in-python-75ed4aa6fbf7?source=collection_archive---------9-----------------------#2022-08-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="403f" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何在Python中处理文件的教程</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/a6b5f09dc95cffdd8a5a2890f942e32a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*PSAff6wYcdT890qv"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@mvdheuvel?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">马丁·范·登·霍维尔</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</figcaption></figure><div class="kz la gp gr lb lc"><a href="https://jorgepit-14189.medium.com/membership" rel="noopener follow" target="_blank"><div class="ld ab fo"><div class="le ab lf cl cj lg"><h2 class="bd iu gy z fp lh fr fs li fu fw is bi translated">用我的推荐链接加入媒体-乔治皮皮斯</h2><div class="lj l"><h3 class="bd b gy z fp lh fr fs li fu fw dk translated">阅读乔治·皮皮斯(以及媒体上成千上万的其他作家)的每一个故事。您的会员费直接支持…</h3></div><div class="lk l"><p class="bd b dl z fp lh fr fs li fu fw dk translated">jorgepit-14189.medium.com</p></div></div><div class="ll l"><div class="lm l ln lo lp ll lq ks lc"/></div></div></a></div><p id="a2eb" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">大多数数据科学家使用Pandas来读取文件，前提是数据是结构化的。在本教程中，我们将使用带有两个参数的“open”内置函数，例如文件名和模式。模式指示需要什么动作，如读、写或创建，它还定义了格式，如文本或二进制。下面，我们描述这些模式。</p><h1 id="e873" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">文件模式</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nf"><img src="../Images/b5a6c1b68d4187abf6894f8e640ca8f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MCTmH9klAi_YlwLMyMiGPA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">来源<a class="ae ky" href="https://pynative.com/python/file-handling/" rel="noopener ugc nofollow" target="_blank"> PYnative </a></figcaption></figure><h1 id="503b" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">读取文件</h1><p id="803c" class="pw-post-body-paragraph lr ls it lt b lu ng ju lw lx nh jx lz ma ni mc md me nj mg mh mi nk mk ml mm im bi translated">对于本教程，我们创建了一个名为<code class="fe nl nm nn no b">myfile.txt</code>的简单txt文件，其内容如下:</p><pre class="kj kk kl km gt np no nq nr aw ns bi"><span id="28cf" class="nt mo it no b gy nu nv l nw nx">This is the first line<br/>This is the second line<br/>This is the third line<br/>This is the forth line<br/>and this is the fith and final line</span></pre><p id="dc7e" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我们来看看怎么读。</p><h2 id="b4c7" class="nt mo it bd mp ny nz dn mt oa ob dp mx ma oc od mz me oe of nb mi og oh nd oi bi translated">使用打开功能</h2><p id="da42" class="pw-post-body-paragraph lr ls it lt b lu ng ju lw lx nh jx lz ma ni mc md me nj mg mh mi nk mk ml mm im bi translated">我们可以使用“打开”功能读取文件，如下所示:</p><pre class="kj kk kl km gt np no nq nr aw ns bi"><span id="1008" class="nt mo it no b gy nu nv l nw nx"># open the file with the mode r which means "read"<br/>my_file = open('myfile.txt', mode = 'r')</span><span id="63a8" class="nt mo it no b gy oj nv l nw nx"># read the content of the file storing <br/># it in a variable called data<br/>data = my_file.read()</span><span id="50d3" class="nt mo it no b gy oj nv l nw nx">print(data)</span><span id="2616" class="nt mo it no b gy oj nv l nw nx"># close the connection<br/>my_file.close()</span></pre><p id="c58d" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">输出:</p><pre class="kj kk kl km gt np no nq nr aw ns bi"><span id="c335" class="nt mo it no b gy nu nv l nw nx">This is the first line<br/>This is the second line<br/>This is the third line<br/>This is the forth line<br/>and this is the fith and final line</span></pre><h2 id="2062" class="nt mo it bd mp ny nz dn mt oa ob dp mx ma oc od mz me oe of nb mi og oh nd oi bi translated"><strong class="ak">使用带开放功能的</strong></h2><p id="289b" class="pw-post-body-paragraph lr ls it lt b lu ng ju lw lx nh jx lz ma ni mc md me nj mg mh mi nk mk ml mm im bi translated">或者，我们可以使用“打开”功能。主要区别是它自动关闭连接，这对文件和处理非常有帮助。我们来编码吧！</p><pre class="kj kk kl km gt np no nq nr aw ns bi"><span id="1365" class="nt mo it no b gy nu nv l nw nx">with open('myfile.txt', mode = 'r') as my_file:<br/>    data = my_file.read()<br/>    print(data)</span></pre><p id="9c8a" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">输出:</p><pre class="kj kk kl km gt np no nq nr aw ns bi"><span id="e8c6" class="nt mo it no b gy nu nv l nw nx">This is the first line<br/>This is the second line<br/>This is the third line<br/>This is the forth line<br/>and this is the fith and final line</span></pre><h1 id="3d94" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">读取文件的三种方法</h1><p id="a097" class="pw-post-body-paragraph lr ls it lt b lu ng ju lw lx nh jx lz ma ni mc md me nj mg mh mi nk mk ml mm im bi translated">使用open函数在Python中读取文件的三种方法是:</p><h2 id="016d" class="nt mo it bd mp ny nz dn mt oa ob dp mx ma oc od mz me oe of nb mi og oh nd oi bi translated">阅读()</h2><p id="123c" class="pw-post-body-paragraph lr ls it lt b lu ng ju lw lx nh jx lz ma ni mc md me nj mg mh mi nk mk ml mm im bi translated">它将文件的全部内容作为包含所有字符的字符串返回。还可以传入一个整数，以便只返回文件中指定数量的字符。例如，让我们返回<strong class="lt iu">的前10个字符</strong>。</p><pre class="kj kk kl km gt np no nq nr aw ns bi"><span id="fd62" class="nt mo it no b gy nu nv l nw nx">with open('myfile.txt', mode = 'r') as my_file:<br/>    <br/>    # read the 10 first characters<br/>    data = my_file.read(10)<br/>    print(data)</span></pre><p id="a90a" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">输出:</p><pre class="kj kk kl km gt np no nq nr aw ns bi"><span id="2df5" class="nt mo it no b gy nu nv l nw nx">This is th</span></pre><h2 id="5b95" class="nt mo it bd mp ny nz dn mt oa ob dp mx ma oc od mz me oe of nb mi og oh nd oi bi translated">读取线()</h2><p id="e0a5" class="pw-post-body-paragraph lr ls it lt b lu ng ju lw lx nh jx lz ma ni mc md me nj mg mh mi nk mk ml mm im bi translated">它返回文件的第一行。例如:</p><pre class="kj kk kl km gt np no nq nr aw ns bi"><span id="093d" class="nt mo it no b gy nu nv l nw nx">with open('myfile.txt', mode = 'r') as my_file:<br/>    <br/>    data = my_file.readline()<br/>    print(data)</span></pre><p id="dc5b" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">输出:</p><pre class="kj kk kl km gt np no nq nr aw ns bi"><span id="e9c3" class="nt mo it no b gy nu nv l nw nx">This is the first line</span></pre><p id="3cd1" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">请注意，readline()函数可以接受一个整数参数来返回第一行的特定数量的字符。</p><h2 id="b4ad" class="nt mo it bd mp ny nz dn mt oa ob dp mx ma oc od mz me oe of nb mi og oh nd oi bi translated">读取行()</h2><p id="4806" class="pw-post-body-paragraph lr ls it lt b lu ng ju lw lx nh jx lz ma ni mc md me nj mg mh mi nk mk ml mm im bi translated">它以列表的形式返回全部内容，其中每个元素对应一行。例如:</p><pre class="kj kk kl km gt np no nq nr aw ns bi"><span id="9d2c" class="nt mo it no b gy nu nv l nw nx">with open('myfile.txt', mode = 'r') as my_file:<br/>    <br/>    data = my_file.readlines()<br/>    print(data)</span></pre><p id="b5fb" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">输出:</p><pre class="kj kk kl km gt np no nq nr aw ns bi"><span id="7d12" class="nt mo it no b gy nu nv l nw nx">['This is the first line\n', 'This is the second line\n', 'This is the third line\n', 'This is the forth line\n', 'and this is the fith and final line\n']</span></pre><h1 id="d9cf" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">写文件</h1><p id="28ba" class="pw-post-body-paragraph lr ls it lt b lu ng ju lw lx nh jx lz ma ni mc md me nj mg mh mi nk mk ml mm im bi translated">通过改变打开功能中的模式，我们可以创建文件。让我们创建一个名为“newfile.txt”的新的空文件。</p><pre class="kj kk kl km gt np no nq nr aw ns bi"><span id="f914" class="nt mo it no b gy nu nv l nw nx"># the 'w' mode is for write<br/>with open('newfile.txt', mode='w') as my_file:<br/>    pass</span></pre><h2 id="96e0" class="nt mo it bd mp ny nz dn mt oa ob dp mx ma oc od mz me oe of nb mi og oh nd oi bi translated">write()方法</h2><p id="d528" class="pw-post-body-paragraph lr ls it lt b lu ng ju lw lx nh jx lz ma ni mc md me nj mg mh mi nk mk ml mm im bi translated">我们已经创建了一个名为“newfile.txt”的空文件。让我们看看如何向新文件添加内容。</p><pre class="kj kk kl km gt np no nq nr aw ns bi"><span id="6a2c" class="nt mo it no b gy nu nv l nw nx"># the 'w' mode is for write<br/>with open('newfile.txt', mode='w') as my_file:<br/>    <br/>    # add text to the new file<br/>    my_file.write('I write the first line')</span></pre><p id="f006" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">于是“newfile.txt”就有了“我写第一行”这一行。</p><h2 id="6138" class="nt mo it bd mp ny nz dn mt oa ob dp mx ma oc od mz me oe of nb mi og oh nd oi bi translated">writelines()方法</h2><p id="e3fc" class="pw-post-body-paragraph lr ls it lt b lu ng ju lw lx nh jx lz ma ni mc md me nj mg mh mi nk mk ml mm im bi translated">我们可以使用writelines方法并传递一个列表来一次写多行。比如说。</p><pre class="kj kk kl km gt np no nq nr aw ns bi"><span id="44ee" class="nt mo it no b gy nu nv l nw nx"># the 'w' mode is for write<br/>with open('newfile.txt', mode='w') as my_file:<br/>    <br/>    # add text as a list and add the \n for the new lines<br/>    my_file.writelines(['first line\n', 'second line\n', 'third line\n'])</span></pre><p id="a112" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">让我们看看文件的内容:</p><pre class="kj kk kl km gt np no nq nr aw ns bi"><span id="793e" class="nt mo it no b gy nu nv l nw nx">cat newfile.txt</span><span id="889e" class="nt mo it no b gy oj nv l nw nx">first line<br/>second line<br/>third line</span></pre><p id="ab59" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">注意，每次我们用“w”模式运行open函数时，它都会覆盖文件。</p><h1 id="5be0" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">追加新行</h1><p id="197a" class="pw-post-body-paragraph lr ls it lt b lu ng ju lw lx nh jx lz ma ni mc md me nj mg mh mi nk mk ml mm im bi translated">我们可以使用append中的<code class="fe nl nm nn no b">a</code>模式添加新行。例如，让我们在前面的文件中再添加三行。</p><pre class="kj kk kl km gt np no nq nr aw ns bi"><span id="8932" class="nt mo it no b gy nu nv l nw nx"># the 'w' mode is for write<br/>with open('newfile.txt', mode='a') as my_file:<br/>    <br/>    # append new lines<br/>    my_file.writelines(['forth line\n', 'fifth line\n', 'sixth line\n'])</span></pre><p id="2332" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">让我们看看文件的内容。</p><pre class="kj kk kl km gt np no nq nr aw ns bi"><span id="d267" class="nt mo it no b gy nu nv l nw nx">cat newfile.txt</span><span id="a3cd" class="nt mo it no b gy oj nv l nw nx">first line<br/>second line<br/>third line<br/>forth line<br/>fifth line<br/>sixth line</span></pre><h1 id="8b88" class="mn mo it bd mp mq mr ms mt mu mv mw mx jz my ka mz kc na kd nb kf nc kg nd ne bi translated">错误处理</h1><p id="6a1d" class="pw-post-body-paragraph lr ls it lt b lu ng ju lw lx nh jx lz ma ni mc md me nj mg mh mi nk mk ml mm im bi translated">在数据工程管道中，读取有时由于某种原因不存在的文件是很常见的。所以，有必要用异常来<a class="ae ky" href="https://predictivehacks.com/exceptions-in-python/" rel="noopener ugc nofollow" target="_blank">处理错误。例如，假设我们试图打开一个不存在的文件。</a></p><pre class="kj kk kl km gt np no nq nr aw ns bi"><span id="cf3d" class="nt mo it no b gy nu nv l nw nx">with open('nonexisting.txt', mode = 'r') as my_file:<br/>    <br/>    data = my_file.readline()<br/>    print(data)</span></pre><p id="0750" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">输出:</p><pre class="kj kk kl km gt np no nq nr aw ns bi"><span id="3b21" class="nt mo it no b gy nu nv l nw nx">---------------------------------------------------------------------------<br/>FileNotFoundError                         Traceback (most recent call last)<br/>~\AppData\Local\Temp\ipykernel_21724\2298896326.py in &lt;module&gt;<br/>----&gt; 1 with open('nonexisting.txt', mode = 'r') as my_file:<br/>      2 <br/>      3     # read the 10 first characters<br/>      4     data = my_file.readline()<br/>      5     print(data)</span><span id="6674" class="nt mo it no b gy oj nv l nw nx">FileNotFoundError: [Errno 2] No such file or directory: 'nonexisting.txt'</span></pre><p id="395b" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">正如我们所看到的，我们得到了“FileNotFoundError”错误。让我们看看如何处理这个尝试-除了？</p><pre class="kj kk kl km gt np no nq nr aw ns bi"><span id="36ee" class="nt mo it no b gy nu nv l nw nx">try:<br/>    with open('nonexisting.txt', mode = 'r') as my_file:</span><span id="71a6" class="nt mo it no b gy oj nv l nw nx">        # read the 10 first characters<br/>        data = my_file.readline()<br/>        print(data)<br/>except FileNotFoundError as e:<br/>    print ('Error', e)</span></pre><p id="2c01" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">输出:</p><pre class="kj kk kl km gt np no nq nr aw ns bi"><span id="6cad" class="nt mo it no b gy nu nv l nw nx">Error [Errno 2] No such file or directory: 'nonexisting.txt'</span></pre></div><div class="ab cl ok ol hx om" role="separator"><span class="on bw bk oo op oq"/><span class="on bw bk oo op oq"/><span class="on bw bk oo op"/></div><div class="im in io ip iq"><p id="a028" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">最初由<a class="ae ky" href="https://predictivehacks.com/how-to-read-and-write-files-in-python/" rel="noopener ugc nofollow" target="_blank">预测黑客</a>发布</p></div><div class="ab cl ok ol hx om" role="separator"><span class="on bw bk oo op oq"/><span class="on bw bk oo op oq"/><span class="on bw bk oo op"/></div><div class="im in io ip iq"><h1 id="31cc" class="mn mo it bd mp mq or ms mt mu os mw mx jz ot ka mz kc ou kd nb kf ov kg nd ne bi translated">分级编码</h1><p id="8d7b" class="pw-post-body-paragraph lr ls it lt b lu ng ju lw lx nh jx lz ma ni mc md me nj mg mh mi nk mk ml mm im bi translated">感谢您成为我们社区的一员！在你离开之前:</p><ul class=""><li id="3db3" class="ow ox it lt b lu lv lx ly ma oy me oz mi pa mm pb pc pd pe bi translated">👏为故事鼓掌，跟着作者走👉</li><li id="1ce1" class="ow ox it lt b lu pf lx pg ma ph me pi mi pj mm pb pc pd pe bi translated">📰查看<a class="ae ky" href="https://levelup.gitconnected.com/?utm_source=pub&amp;utm_medium=post" rel="noopener ugc nofollow" target="_blank">升级编码出版物</a>中的更多内容</li><li id="ac59" class="ow ox it lt b lu pf lx pg ma ph me pi mi pj mm pb pc pd pe bi translated">🔔关注我们:<a class="ae ky" href="https://twitter.com/gitconnected" rel="noopener ugc nofollow" target="_blank">Twitter</a>|<a class="ae ky" href="https://www.linkedin.com/company/gitconnected" rel="noopener ugc nofollow" target="_blank">LinkedIn</a>|<a class="ae ky" href="https://newsletter.levelup.dev" rel="noopener ugc nofollow" target="_blank">时事通讯</a></li></ul><p id="4ec1" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">🚀👉<a class="ae ky" href="https://jobs.levelup.dev/talent/welcome?referral=true" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu">加入升级人才集体，找到一份神奇的工作</strong> </a></p></div></div>    
</body>
</html>