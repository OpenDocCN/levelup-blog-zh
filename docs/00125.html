<html>
<head>
<title>A one week stand with React Native — Or, how deep do we plunge?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">与React Native的一周对峙——或者说，我们会陷入多深？</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/a-one-week-stand-with-react-native-or-how-deep-do-we-plunge-cbb6ca44bb54?source=collection_archive---------0-----------------------#2018-05-13">https://levelup.gitconnected.com/a-one-week-stand-with-react-native-or-how-deep-do-we-plunge-cbb6ca44bb54?source=collection_archive---------0-----------------------#2018-05-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/931b96217edf127652c127ae626792af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PapSJP84ew9_YPmLRrOGlw.jpeg"/></div></div></figure><div class=""/><div class=""><h2 id="d4b4" class="pw-subtitle-paragraph jy ja jb bd b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp dk translated">我们团队在尝试React Native并将其集成到我们的工作流中的经验</h2></div><p id="1dec" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">我们的团队挤在一堵黑色的墙周围，墙上散落着神秘的彩色便利贴。它似乎有一些表格的性质，但它们是规定性的，而不是限制性的。一些笔记逃脱了遮蔽胶带栏的限制。人们没有实体的头的图片贴在各种各样的笔记上，表明他们对有组织的混乱的各个组成部分有某种占有。</p><p id="6004" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">现在，你可能已经猜到了。我们将要进行古老的仪式<code class="fe lm ln lo lp b">stand-up</code>。百万(？)多年的进化让我们走到了这一步——手里拿着咖啡杯，这是不容错过的。</p><p id="51e9" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">这是一天如何从画板开始的。几个“早上好”传来传去，我们为那天远程工作的人安排了一个住处——也许有人会把休伊举到镜头前。</p><figure class="ls lt lu lv gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi lr"><img src="../Images/052e70ec5de140a992a816868bb8d729.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KLQaozte5HAk8ZikNSvdbQ.png"/></div></div><figcaption class="lw lx gj gh gi ly lz bd b be z dk translated">休易。</figcaption></figure><p id="9222" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">我们正在建立<a class="ae ma" href="https://www.drawboard.com/bullclip/" rel="noopener ugc nofollow" target="_blank">bull clip</a>——一个设计和建筑行业的合作平台——部分技术挑战是跨多个平台开发。目前，我们在UWP(通用视窗平台)、iOS和网络上。当我们在不同平台上推进功能对等时，我们总是在寻找协作的方式，并帮助彼此将东西推出门外。</p></div><div class="ab cl mb mc hu md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ij ik il im in"><p id="737e" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">走路时反应自然。</p><p id="3cd4" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">在过去一年左右的时间里，我一直在偷懒地关注RN的进展，我唯一的真实经历是在我以前的雇主iress参加了半天的黑客马拉松。我们为移动设备构建了一个简单的金融市场数据应用程序，连接到GraphQL后端。我对我们如此迅速地启动并运行它印象深刻，但我没有进一步推动对RN的兴趣。</p><p id="202e" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">但是意识到我们有两个热情的web开发人员渴望开发一些很酷的东西(包括我自己)，以及一些被大量要求为iOS开发的功能——在纸面上，RN看起来很诱人。</p><p id="9a36" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">那天下午，我们走进一个房间，讨论了几个想法。20分钟后，我有一些时间来探索React Native是否适合我们的目的。</p><p id="e62c" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">剧透一下——我很兴奋。</p><p id="c6dd" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">第二个剧透警告——我没有编写原生移动代码的经验。<a class="ae ma" href="https://en.wikipedia.org/wiki/Swift_(programming_language)" rel="noopener ugc nofollow" target="_blank"> Swift </a>的意思是快速，而<a class="ae ma" href="https://en.wikipedia.org/wiki/Objective-C" rel="noopener ugc nofollow" target="_blank"> Objective-C </a>是公正的<a class="ae ma" href="https://en.wikipedia.org/wiki/List_of_seas" rel="noopener ugc nofollow" target="_blank">大西洋</a>——这两种编程语言我都不懂🤷。</p><p id="5d2e" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">但是如果有足够的咖啡因、网络连接和一段时间，我准备尝试一下。</p><p id="8080" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">我的第一个行动是在谷歌上输入:</p><blockquote class="mi"><p id="f463" class="mj mk jb bd ml mm mn mo mp mq mr ll dk translated">将react native集成到现有的iOS应用程序中</p></blockquote><figure class="ms mt mu mv mw is"><div class="bz fp l di"><div class="mx my l"/></div><figcaption class="lw lx gj gh gi ly lz bd b be z dk translated">提心吊胆地等待互联网长老理事会回应我的呼吁</figcaption></figure><p id="945b" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">我发现了这个。</p><p id="470f" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">我很兴奋。</p><p id="a460" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">由于不知道这是否可行——混淆了RN和本地代码——发现这是可能的是令人鼓舞的。</p><p id="d465" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">所以，我开始跟踪它。我到处碰壁<em class="lq"/>。</p><p id="0e76" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">这该死的东西无法编译。我们有冲突的Podfile需求，XCode对我大喊大叫，让我加快速度。当我试图将它导入Swift时，它找不到React它不知道我在说什么，并且拒绝花时间理解我的感受。Yaaaaarg！</p><p id="bfe4" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">半天的抨击浓缩成一句话:我必须使用最新版本之外的版本(<code class="fe lm ln lo lp b">0.51.0</code>为我们工作)，我必须从我们不断增长的依赖列表中剔除多余的部分。</p><p id="d2a5" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">每当我不得不写一些本地代码时，这一点上的阻挡者就像是在黑暗中行走。幸运的是，我们的iOS工程师能够多次解锁我。我们设法在正确的位置添加了打开React本地视图的按钮。(我个人更喜欢进入一个神奇的javascript土地的门户，在那里詹姆斯感到舒适和安全，但无论如何。)</p><p id="11bd" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">事情是这样开始的:</p><figure class="ls lt lu lv gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mz"><img src="../Images/c91b42de94e52cb63419e3d4680cb0d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bqFGt_T085hnDI5mpXxKpg.png"/></div></div><figcaption class="lw lx gj gh gi ly lz bd b be z dk translated">从指南中打开高分屏幕</figcaption></figure><p id="4d08" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">是的，我写这篇文章的时候是凌晨4:26。🦉</p><p id="31f6" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">下一步是尝试在我们的iOS应用中开发一个我们已经想了一段时间的功能，但还没有能力进行优先排序。这是我们的时间线/评论源，用于与标记绘图的其他人交流。</p><p id="9bec" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">如果我们要在没有疯狂难度的情况下建造它，就意味着要找到以下技术问题的解决方案:</p><ul class=""><li id="d3bf" class="na nb jb ks b kt ku kw kx kz nc ld nd lh ne ll nf ng nh ni bi translated">无需调用本机代码即可处理经过身份验证的网络IO</li><li id="e0c7" class="na nb jb ks b kt nj kw nk kz nl ld nm lh nn ll nf ng nh ni bi translated">从我们现有的web应用程序的全部或部分代码重用。</li><li id="6970" class="na nb jb ks b kt nj kw nk kz nl ld nm lh nn ll nf ng nh ni bi translated">本机组件和react视图的高性能集成</li><li id="61db" class="na nb jb ks b kt nj kw nk kz nl ld nm lh nn ll nf ng nh ni bi translated">调试能力。(例如，有类似的网络开发经验)</li><li id="0657" class="na nb jb ks b kt nj kw nk kz nl ld nm lh nn ll nf ng nh ni bi translated">能够在本地视图和反应视图之间轻松切换</li></ul><p id="d280" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">剧透:目前为止，我已经确定5个中有4个是可能的。</p><p id="f065" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">一旦我进入javascript运行时，我的第一个目标就是看看从我们的后端获取数据并在屏幕上显示它是多么容易。</p><p id="e82e" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">事实证明这非常简单！最大的问题是当我不得不编写一些swift代码来将无记名令牌放入JS运行时时，但是我们的iOS工程师再次介入来解除对我的封锁。</p><p id="f080" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">我们的web应用程序99%是以函数式风格编写的，所以代码重用是2%的复制粘贴，98%的webpack/babel配置魔术。(我想要<a class="ae ma" href="https://github.com/react-community/create-react-native-app/issues/171#issuecomment-316994039" rel="noopener ugc nofollow" target="_blank">绝对进口</a>)。这个勾选了2号框。一个重要的警告是视图逻辑，因为我们到处都有<code class="fe lm ln lo lp b">divs</code>和<code class="fe lm ln lo lp b">spans</code>，在这一点上是不可共享的。目前这很好，但是如果我们超级热衷于整个“写一次”的想法，我们可能会有一些障碍要解决。想想<a class="ae ma" href="https://github.com/necolas/react-native-web" rel="noopener ugc nofollow" target="_blank"> react-native-web </a>。</p><p id="6133" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">现在我们开始调试。是的，web式热重装调试魔法是可行的！也是开箱即用！</p><div class="ip iq gp gr ir no"><a href="https://github.com/jhen0409/react-native-debugger" rel="noopener  ugc nofollow" target="_blank"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd jc gy z fp nt fr fs nu fu fw ja bi translated">jhen 0409/react-native-调试器</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">react-native-debugger -基于React Native官方调试器的独立应用程序，包括React Inspector /…</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">github.com</p></div></div><div class="nx l"><div class="ny l nz oa ob nx oc ix no"/></div></div></a></div><p id="2ec3" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">你只需轻触几个开关，就能进入游戏。太不可思议了。</p><figure class="ls lt lu lv gt is"><div class="bz fp l di"><div class="od my l"/></div><figcaption class="lw lx gj gh gi ly lz bd b be z dk translated">灯亮着，但没人在家。让我们开始建造吧！</figcaption></figure></div><div class="ab cl mb mc hu md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ij ik il im in"><p id="5d88" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">检查完构建工具后，是时候写一个特性了。</p><figure class="ls lt lu lv gt is gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/eedc6732ae07d5006f7ed0b22793b58c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1356/1*ntWjZnjgFzIY-CuucanrTw.gif"/></div></figure><p id="de72" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">当然，我必须确保用户知道功能是什么——所以他们当然会点击按钮。</p><p id="9424" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">找出奇怪的一个。点击它。</p><p id="d04e" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">这是react本机视图的另一个“入口”。它打开了一个非常基本的、漏洞百出的时间线，但它是一个成功的概念证明，表明我们确实可以在react native中构建小功能。</p><p id="daec" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">这里最大的障碍是告诉本机运行时，我想从javascript中隐藏react本机视图。</p><p id="e576" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">我最初是使用<a class="ae ma" href="https://developer.apple.com/documentation/foundation/notificationcenter" rel="noopener ugc nofollow" target="_blank"> NotificationCenter </a>实现的——因为没有任何干净的导航栈可供弹出和关闭。</p><p id="49ec" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">但基本上，我通过以下方式向javascript公开了一个swift函数:</p><div class="ip iq gp gr ir no"><a href="https://facebook.github.io/react-native/docs/native-modules-ios.html#exporting-swift" rel="noopener  ugc nofollow" target="_blank"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd jc gy z fp nt fr fs nu fu fw ja bi translated">本机模块反应本机</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">有时候一个app需要访问平台API，React Native还没有对应的模块。也许你想要…</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">facebook.github.io</p></div></div><div class="nx l"><div class="of l nz oa ob nx oc ix no"/></div></div></a></div></div><div class="ab cl mb mc hu md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ij ik il im in"><p id="3b3f" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">我认为我们还没有准备好一头扎进深水区，进行一次彻底的重写。我也不认为这是明智之举。但是现在，在react native中构建小的、孤立的特性对我们来说非常有意义。网络平台比iOS或Windows走得更远，所以如果我们在网络前沿停下脚步，不存在落后的问题。</p><p id="27b6" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">我需要解决的几件事包括:</p><ul class=""><li id="ae0f" class="na nb jb ks b kt ku kw kx kz nc ld nd lh ne ll nf ng nh ni bi translated">屏幕尺寸不同。</li><li id="c805" class="na nb jb ks b kt nj kw nk kz nl ld nm lh nn ll nf ng nh ni bi translated">部署</li><li id="b17a" class="na nb jb ks b kt nj kw nk kz nl ld nm lh nn ll nf ng nh ni bi translated">运行特性</li></ul><p id="5939" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">但我没有预见到任何疯狂的路障。</p><p id="2afd" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">如果我做了什么傻事，或者如果你对react native对我们有任何疑问，请在下面的评论中HMU。</p></div><div class="ab cl mb mc hu md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ij ik il im in"><p id="8d37" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">顺便说一句——我们在招人！来Drawboard和我一起工作吧！我们有饼干。</p><p id="afa6" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">我们正在寻找一个iOS开发人员(或两个)。我们是远程友好的，我们有一大堆有趣的技术问题要解决。<a class="ae ma" href="https://stackoverflow.com/jobs/companies/drawboard" rel="noopener ugc nofollow" target="_blank">https://stackoverflow.com/jobs/companies/drawboard</a></p></div></div>    
</body>
</html>