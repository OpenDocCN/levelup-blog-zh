<html>
<head>
<title>How to Gracefully Use Environment Variables in a React Native App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在React本机应用程序中优雅地使用环境变量</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-gracefully-use-environment-variables-in-a-react-native-app-7f1600446116?source=collection_archive---------0-----------------------#2019-07-09">https://levelup.gitconnected.com/how-to-gracefully-use-environment-variables-in-a-react-native-app-7f1600446116?source=collection_archive---------0-----------------------#2019-07-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/c01aa4a484ffc1937b3c2d61b7fff681.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2EWodBExzADFPzkxwEZSXQ.png"/></div></div></figure><p id="f710" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">API密钥和秘密总是包含一些敏感数据或令牌，需要优雅地保存。为不同的环境(比如开发或生产)管理不同的键是JavaScript开发人员的一种常见做法。因此，<code class="fe kw kx ky kz b">.env</code>文件的机制存在。</p><p id="60d2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">React本机应用程序中有一种方法可以在不集成任何本机代码的情况下保存API密钥和其他敏感信息。在这篇短文中，您将学习如何安装和集成一个小的库，帮助您使用环境变量而不暴露敏感信息。</p><p id="ad99" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">请注意，本文中提到的安装和集成<code class="fe kw kx ky kz b"><a class="ae la" href="https://www.npmjs.com/package/react-native-dotenv" rel="noopener ugc nofollow" target="_blank">react-native-dotenv</a></code>的步骤可以以类似于下面描述的方式用于Expo项目。</p><h1 id="f061" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">要求</h1><p id="fec3" class="pw-post-body-paragraph jy jz iq ka b kb lz kd ke kf ma kh ki kj mb kl km kn mc kp kq kr md kt ku kv ij bi translated">要学习本教程，请确保您在本地开发环境中安装了以下软件，并且能够访问下面提到的服务。</p><ul class=""><li id="caea" class="me mf iq ka b kb kc kf kg kj mg kn mh kr mi kv mj mk ml mm bi translated"><a class="ae la" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank">安装了npm/yarn的Nodejs </a> ( &gt; = 8.x.x)</li><li id="451f" class="me mf iq ka b kb mn kf mo kj mp kn mq kr mr kv mj mk ml mm bi translated"><a class="ae la" href="https://www.npmjs.com/package/react-native-cli" rel="noopener ugc nofollow" target="_blank"> react-native-cli </a></li><li id="371a" class="me mf iq ka b kb mn kf mo kj mp kn mq kr mr kv mj mk ml mm bi translated"><code class="fe kw kx ky kz b">watchman</code>:React原生项目的文件变更监视器</li></ul><h1 id="3b57" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">入门指南</h1><p id="9618" class="pw-post-body-paragraph jy jz iq ka b kb lz kd ke kf ma kh ki kj mb kl km kn mc kp kq kr md kt ku kv ij bi translated">首先，在终端窗口中使用<code class="fe kw kx ky kz b">react-native-cli</code>创建一个新项目。</p><pre class="ms mt mu mv gt mw kz mx my aw mz bi"><span id="4fe7" class="na lc iq kz b gy nb nc l nd ne">react-native init RNEnvVariables<br/><br/># navigate inside the project directory<br/>cd RNEnvVariables</span></pre><p id="5e0c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">创建项目目录后，导航到该目录。创建一个名为<code class="fe kw kx ky kz b">.env</code>的新文件。该文件将保存所有API密钥或任何敏感信息。确保将这个文件添加到<code class="fe kw kx ky kz b">.gitignore</code>中，这样你就不会在Github这样的版本控制网站上暴露任何秘密密钥。</p><p id="150d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">首先，让我们向文件<code class="fe kw kx ky kz b">.env</code>添加一个名为<code class="fe kw kx ky kz b">SOME_KEY</code>的模拟密钥。</p><pre class="ms mt mu mv gt mw kz mx my aw mz bi"><span id="4e94" class="na lc iq kz b gy nb nc l nd ne">SOME_KEY=something</span></pre><p id="5b18" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">请注意<code class="fe kw kx ky kz b">.env</code>文件认为任何引号内的字符串都是有效的。此外，用大写字母写<code class="fe kw kx ky kz b">SOME_KEY</code>只是一个非常普遍遵循的命名约定。</p><h1 id="3946" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">安装react-native-dotenv</h1><p id="e2a0" class="pw-post-body-paragraph jy jz iq ka b kb lz kd ke kf ma kh ki kj mb kl km kn mc kp kq kr md kt ku kv ij bi translated">接下来，安装依赖项<code class="fe kw kx ky kz b"><a class="ae la" href="https://www.npmjs.com/package/react-native-dotenv" rel="noopener ugc nofollow" target="_blank">react-native-dotenv</a></code>，它将帮助您在整个应用程序中优雅地管理您的环境变量。转到终端窗口，并执行以下命令。</p><pre class="ms mt mu mv gt mw kz mx my aw mz bi"><span id="0061" class="na lc iq kz b gy nb nc l nd ne">yarn add react-native-dotenv</span></pre><p id="2ed6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">模块<code class="fe kw kx ky kz b">react-native-dotenv</code>允许您从<code class="fe kw kx ky kz b">.env</code>文件导入环境变量。要使它工作，打开<code class="fe kw kx ky kz b">babel.config.js</code>文件并修改<code class="fe kw kx ky kz b">presets</code>，如下所示。</p><pre class="ms mt mu mv gt mw kz mx my aw mz bi"><span id="8d4b" class="na lc iq kz b gy nb nc l nd ne">module.exports = {<br/>  presets: [<br/>    'module:metro-react-native-babel-preset',<br/>    'module:react-native-dotenv'<br/>  ]<br/>}</span></pre><h1 id="bc66" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">运行应用程序</h1><p id="1582" class="pw-post-body-paragraph jy jz iq ka b kb lz kd ke kf ma kh ki kj mb kl km kn mc kp kq kr md kt ku kv ij bi translated">要验证它是否工作，打开<code class="fe kw kx ky kz b">App.js</code>并从包本身导入<code class="fe kw kx ky kz b">SOME_KEY</code>。<code class="fe kw kx ky kz b">react-native-dotenv</code>解析<code class="fe kw kx ky kz b">.env</code>文件，让您导入文件中提到的环境变量。</p><pre class="ms mt mu mv gt mw kz mx my aw mz bi"><span id="fc14" class="na lc iq kz b gy nb nc l nd ne">// after other imports<br/><br/>import { SOME_KEY } from 'react-native-dotenv'</span></pre><p id="ecae" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果您使用iOS模拟器或Android模拟器在当前状态下打开此演示React本机应用程序，您将看到以下屏幕。</p><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nf"><img src="../Images/cca0191b7fa4bfcd3d01da71585f3da4.png" data-original-src="https://miro.medium.com/v2/resize:fit:700/format:webp/1*ZISAEh-BOnnS3fe9ELSFlA.png"/></div></div></figure><p id="d25f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">使用环境变量编辑<code class="fe kw kx ky kz b">App.js</code>文件中显示<strong class="ka ir">步骤一</strong>的那一行，如下所示。</p><pre class="ms mt mu mv gt mw kz mx my aw mz bi"><span id="c861" class="na lc iq kz b gy nb nc l nd ne">&lt;Text style={styles.sectionTitle}&gt;{SOME_KEY}&lt;/Text&gt;</span></pre><p id="5175" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在回到模拟器，你会注意到变化。</p><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nf"><img src="../Images/eca23b55de660ab30fa9556a1978440c.png" data-original-src="https://miro.medium.com/v2/resize:fit:700/format:webp/1*vHCK4XMZdnDKuFT1IDdhZg.png"/></div></div></figure><h1 id="a5e3" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="59b0" class="pw-post-body-paragraph jy jz iq ka b kb lz kd ke kf ma kh ki kj mb kl km kn mc kp kq kr md kt ku kv ij bi translated">使用<code class="fe kw kx ky kz b">react-native-dotenv</code>就是这么简单。您不必添加任何本机代码来分别集成每个移动操作系统平台。对于一个更实际的例子，你可以查看我最近关于React Native和Expo应用程序中的<a class="ae la" href="https://heartbeat.fritz.ai/how-to-build-an-email-authentication-app-with-firebase-firestore-and-react-native-a18a8ba78574" rel="noopener ugc nofollow" target="_blank"> Firebase认证的帖子</a>。您会注意到，在Expo应用程序中使用我们上面讨论过的相同模块。</p></div><div class="ab cl ng nh hu ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="ij ik il im in"><p id="69c8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我在<strong class="ka ir">有空🐦</strong> <a class="ae la" href="https://twitter.com/amanhimself" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir"> Twitter </strong> </a>并运行一个免费的每周简讯(已经有600多个开发者加入)，在里面我会分享Nodejs、Reactjs、GraphQL和React Native上的技巧和新帖子。</p><p id="4475" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> ✉️ </strong> <a class="ae la" href="https://tinyletter.com/amanhimself" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir">加入每周时事通讯。</strong>T25】</a></p></div></div>    
</body>
</html>