<html>
<head>
<title>Application Monitoring Using Spring Boot Actuators (Part 1)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Spring Boot执行器的应用监控(第一部分)</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/application-monitoring-using-spring-boot-actuators-part-1-dab8576f4db6?source=collection_archive---------1-----------------------#2020-03-09">https://levelup.gitconnected.com/application-monitoring-using-spring-boot-actuators-part-1-dab8576f4db6?source=collection_archive---------1-----------------------#2020-03-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/aa77062801fe46ff9c07d1d29ad40b7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EfaJ4zHyEo3FNhwlmU7Xvw.png"/></div></div></figure><p id="085d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在本系列中，我们将创建两个Spring Boot应用程序，一个是带有REST APIs的客户端应用程序，另一个将提供随时可用的UI来监控客户端应用程序的使用情况、指标和性能。</p><p id="882f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在本文中，我们将创建包含REST APIs的客户端应用程序，并探索Spring Boot执行器来监控应用程序的连接、使用和API。让我们从使用<a class="ae kw" href="https://start.spring.io/" rel="noopener ugc nofollow" target="_blank"> Spring Initializer </a>创建一个应用程序开始。</p><ul class=""><li id="f4cf" class="kx ky iq ka b kb kc kf kg kj kz kn la kr lb kv lc ld le lf bi translated"><strong class="ka ir">使用Spring Boot执行器的应用监控(第一部分)</strong></li><li id="1ee7" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated"><a class="ae kw" href="https://medium.com/@patelromil/application-monitoring-using-spring-boot-admin-part-2-ed14178c6964" rel="noopener"> <strong class="ka ir">应用程序监控使用Spring Boot管理(第二部分)</strong> </a></li><li id="61c6" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated"><a class="ae kw" href="https://medium.com/@patelromil/application-monitoring-with-prometheus-and-grafana-part-3-1c4ad5e1b042" rel="noopener"> <strong class="ka ir">应用监控使用Prometheus和Grafana(第三部分)</strong> </a></li></ul><h1 id="30f5" class="ll lm iq bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">客户端应用程序(REST APIs)</h1><p id="806a" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">我们将使用以下依赖关系来监控客户端应用程序</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="0e8d" class="mx lm iq mt b gy my mz l na nb"><strong class="mt ir"><em class="nc">For Maven Project</em></strong></span><span id="7ea2" class="mx lm iq mt b gy nd mz l na nb">&lt;dependency&gt;<br/>&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;<br/>&lt;artifactId&gt;<strong class="mt ir">spring-boot-starter-actuator</strong>&lt;/artifactId&gt;<br/>&lt;/dependency&gt;</span><span id="f38c" class="mx lm iq mt b gy nd mz l na nb"><strong class="mt ir"><em class="nc">For Gradle Project</em></strong></span><span id="a89a" class="mx lm iq mt b gy nd mz l na nb">compile group: 'org.springframework.boot', <br/>name: '<strong class="mt ir">spring-boot-starter-actuator</strong>', version: '2.2.5.RELEASE'</span></pre><h2 id="2a22" class="mx lm iq bd ln ne nf dn lr ng nh dp lv kj ni nj lz kn nk nl md kr nm nn mh no bi translated">Spring Boot执行器</h2><p id="40b5" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">执行器端点有助于我们监控应用并与之交互。它提供了内置端点的数量。对于<em class="nc"> web </em> <strong class="ka ir"> /health </strong>和<strong class="ka ir"> /info </strong>是默认的暴露端点。</p><p id="01d7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为了<strong class="ka ir"> <em class="nc">暴露并启用</em> </strong>其他端点，我们必须在<strong class="ka ir">应用属性</strong>或<strong class="ka ir"> application.yml </strong>中设置以下属性</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="f8f7" class="mx lm iq mt b gy my mz l na nb">-&gt; To enable the endpoint</span><span id="4039" class="mx lm iq mt b gy nd mz l na nb"><strong class="mt ir">management.endpoint.&lt;id&gt;.enabled = true<br/></strong>management.endpoint.metrics.enabled = true</span><span id="9c6b" class="mx lm iq mt b gy nd mz l na nb">-&gt; To expose the endpoint</span><span id="0f2a" class="mx lm iq mt b gy nd mz l na nb"><strong class="mt ir">management.endpoints.web.exposure.include = &lt;id&gt;<br/></strong>management.endpoints.web.exposure.include = metrics</span><span id="b5ce" class="mx lm iq mt b gy nd mz l na nb">-&gt; To expose all endponits (be aware before exponsing all endpoints for producation)</span><span id="074c" class="mx lm iq mt b gy nd mz l na nb"><strong class="mt ir">management.endpoints.web.exposure.include = *</strong></span></pre><p id="4bdd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe np nq nr mt b"><a class="ae kw" href="http://localhost:8080/actuator" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir">http://localhost:8080/actuator</strong></a></code></p><ul class=""><li id="7e1b" class="kx ky iq ka b kb kc kf kg kj kz kn la kr lb kv lc ld le lf bi translated"><strong class="ka ir">健康</strong>:显示应用健康信息<code class="fe np nq nr mt b">(DOWN, OUT_OF_SERVICE, UP, UNKNOWN)</code></li><li id="60ed" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated"><strong class="ka ir">信息:</strong>显示任意应用程序信息(为提交id、配置文件等配置git插件。)</li><li id="17d8" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated"><strong class="ka ir">度量</strong>:提供tomcat、API、JVM等的度量细节。</li><li id="ec11" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated"><strong class="ka ir"> env </strong>:显示应用程序的配置，如端口、活动概要、JVM细节等。</li><li id="8a93" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated"><strong class="ka ir">映射</strong>:显示整个应用程序的所有<code class="fe np nq nr mt b">@RequestMapping</code>路径的列表</li><li id="d202" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated"><strong class="ka ir">预定任务:</strong>显示应用程序的预定任务，如<code class="fe np nq nr mt b">cron, fixedDelay, fixedRate, custom</code></li><li id="2d3d" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated"><strong class="ka ir">bean</strong>:显示应用程序中所有Spring beans的完整列表</li></ul><p id="449c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">其他有用的内置端点有<strong class="ka ir">会话、关闭、缓存、条件、HTTP跟踪、记录器、liquibase、线程转储、flyway。</strong></p></div><div class="ab cl ns nt hu nu" role="separator"><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx"/></div><div class="ij ik il im in"><h2 id="9372" class="mx lm iq bd ln ne nf dn lr ng nh dp lv kj ni nj lz kn nk nl md kr nm nn mh no bi translated">监控应用程序的运行状况</h2><p id="3d54" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">为了检查我们的应用程序是否正常运行，我们可以使用<strong class="ka ir"> /health </strong>端点。让我们点击一下来检查我们的应用程序的健康状况。</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="547c" class="mx lm iq mt b gy my mz l na nb">{<br/>    <strong class="mt ir">"status": "UP"</strong><br/>}</span></pre><p id="0b24" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">默认情况下，它将只显示应用程序的状态<code class="fe np nq nr mt b">DOWN, OUT_OF_SERVICE, UP, UNKNOWN.</code>要获得更多细节，如数据库连接状态、磁盘空间状态，我们必须将以下内容添加到我们的<em class="nc"> application.properties </em>文件中，并再次访问同一个端点。<code class="fe np nq nr mt b"><strong class="ka ir">management.endpoint.health.show-details = always</strong></code></p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="27f1" class="mx lm iq mt b gy my mz l na nb">{<br/>    "status": "UP",<br/>    "components": {<br/>        "<strong class="mt ir">db</strong>": {<br/>            <strong class="mt ir">"status": "UP",</strong><br/>            "details": {<br/>                "database": "MySQL",<br/>                "result": 1,<br/>                "validationQuery": "/* ping */ SELECT 1"<br/>            }<br/>        },<br/>        "<strong class="mt ir">diskSpace</strong>": {<br/>            <strong class="mt ir">"status": "UP",</strong><br/>            "details": {<br/>                "total": 467848392704,<br/>                "free": 8225312768,<br/>                "threshold": 10485760<br/>            }<br/>        },<br/>        "<strong class="mt ir">ping</strong>": {<br/>            "status": "UP"<br/>        }<br/>    }<br/>}</span></pre><figure class="mo mp mq mr gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nz"><img src="../Images/07636628ba0411215bb76e006c075b63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cdorVD9x9gigvUz4xMqmaw.png"/></div></div><figcaption class="oa ob gj gh gi oc od bd b be z dk translated">健康配置</figcaption></figure></div><div class="ab cl ns nt hu nu" role="separator"><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx"/></div><div class="ij ik il im in"><h2 id="9431" class="mx lm iq bd ln ne nf dn lr ng nh dp lv kj ni nj lz kn nk nl md kr nm nn mh no bi translated">使用指标监控REST APIs、JVM、光和Tomcat连接</h2><p id="d2e1" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">这里我们将关注<strong class="ka ir">/指标</strong>端点<strong class="ka ir"> </strong>将为<strong class="ka ir">REST API、JVM进程、光连接、JDBC连接、Tomcat会话等提供指标。</strong></p><p id="5a61" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们可以在<code class="fe np nq nr mt b"><strong class="ka ir">host:port/actuator/&lt;id&gt;</strong></code> <strong class="ka ir">访问端点。</strong>要查看指标，让我们向<code class="fe np nq nr mt b">localhost:8080/actuator/metrics.</code>发出一个请求，我们将使用<strong class="ka ir">“http . server . requests”</strong>来监控REST APIs，并将与Spring Boot管理员一起探索其他指标。</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="8655" class="mx lm iq mt b gy my mz l na nb">{<br/>"names": [<br/>"jvm.memory.max",<br/>"jvm.threads.states",<br/>"jdbc.connections.active",<br/>"jvm.gc.memory.promoted",<br/>"jvm.memory.used",<br/>"jvm.gc.max.data.size",<br/>"jdbc.connections.max",<br/>"jdbc.connections.min",<br/>"jvm.gc.pause",<br/>"jvm.memory.committed",<br/>"system.cpu.count",<br/>"logback.events",<br/>"jvm.buffer.memory.used",<br/>"tomcat.sessions.created",<br/>"jvm.threads.daemon",<br/>"system.cpu.usage",<br/><strong class="mt ir">"http.server.requests"</strong>,<br/>"jvm.gc.memory.allocated",<br/>"hikaricp.connections.idle",<br/>"hikaricp.connections.pending",<br/>"jdbc.connections.idle",<br/>"tomcat.sessions.expired",<br/>"hikaricp.connections",<br/>"jvm.threads.live",<br/>"jvm.threads.peak",<br/>"hikaricp.connections.active",<br/>"hikaricp.connections.creation",<br/>"process.uptime",<br/>"tomcat.sessions.rejected",<br/>"process.cpu.usage",<br/>"jvm.classes.loaded",<br/>"hikaricp.connections.max",<br/>"hikaricp.connections.min",<br/>"jvm.classes.unloaded",<br/>"tomcat.sessions.active.current",<br/>"tomcat.sessions.alive.max",<br/>"jvm.gc.live.data.size",<br/>"hikaricp.connections.usage",<br/>"hikaricp.connections.timeout",<br/>"jvm.buffer.count",<br/>"jvm.buffer.total.capacity",<br/>"tomcat.sessions.active.max",<br/>"hikaricp.connections.acquire",<br/>"process.start.time"<br/>   ]<br/>}</span></pre><p id="f750" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在让我们点击<code class="fe np nq nr mt b"><strong class="ka ir">http.server.requests</strong></code> <strong class="ka ir"> </strong>，它将为REST APIs提供度量、统计和其他标签细节。</p><ul class=""><li id="136d" class="kx ky iq ka b kb kc kf kg kj kz kn la kr lb kv lc ld le lf bi translated"><code class="fe np nq nr mt b">localhost:8080/actuator/metrics/http.server.requests</code></li></ul><figure class="mo mp mq mr gt jr gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/3878a8727d153cc571611374c69d9a94.png" data-original-src="https://miro.medium.com/v2/resize:fit:736/format:webp/1*6HT0865c5y7pMdwISf8j2w.png"/></div><figcaption class="oa ob gj gh gi oc od bd b be z dk translated">原料药的测量</figcaption></figure><ul class=""><li id="266b" class="kx ky iq ka b kb kc kf kg kj kz kn la kr lb kv lc ld le lf bi translated"><strong class="ka ir">计数:</strong>应用程序处理的请求数</li><li id="ee2d" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">TOTAL_TIME:处理所有请求所花费的时间</li><li id="456a" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated"><strong class="ka ir">MAX:</strong>API在特定时间间隔内花费的最长时间</li></ul><figure class="mo mp mq mr gt jr gh gi paragraph-image"><div class="gh gi of"><img src="../Images/9e90ec05c7fa1d1a2966ab2bc3f29b86.png" data-original-src="https://miro.medium.com/v2/resize:fit:740/format:webp/1*Biod69Yze5sYnR_oyv9IaQ.png"/></div><figcaption class="oa ob gj gh gi oc od bd b be z dk translated">API的标签</figcaption></figure><ul class=""><li id="8c29" class="kx ky iq ka b kb kc kf kg kj kz kn la kr lb kv lc ld le lf bi translated"><strong class="ka ir">异常</strong>:应用程序产生异常</li><li id="6e4b" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated"><strong class="ka ir">方法</strong>:请求API的方法</li><li id="0268" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated"><strong class="ka ir"> uri </strong>:请求的API的端点</li><li id="c4f5" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated"><strong class="ka ir">结果</strong>:API的响应，如SUCCESS、CLIENT_ERROR等。</li><li id="1341" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated"><strong class="ka ir">状态</strong>:API的Http状态</li></ul><p id="a641" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，让我们快速创建带有所需响应、状态代码和异常的API。</p><p id="cc5a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">User.java</strong></p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="b038" class="mx lm iq mt b gy my mz l na nb">@Entity<br/>@Data<br/>@Table(name = "user")<br/>public class <strong class="mt ir">User </strong>{</span><span id="b27e" class="mx lm iq mt b gy nd mz l na nb">@Id<br/>@GeneratedValue<br/>private Long id;<br/>private String firstname;<br/>private String lastname;<br/>private String contact;</span><span id="62e6" class="mx lm iq mt b gy nd mz l na nb">}</span></pre><p id="bdce" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">【UserController.java T42】</p><p id="c24a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这里，我创建了带有GET、POST和DELETE的API，其中“/user/{id}”对无效的用户id生成400错误请求。还有两个get映射生成了parse和io异常。</p><figure class="mo mp mq mr gt jr"><div class="bz fp l di"><div class="og oh l"/></div></figure><p id="4603" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">好吧！让我们向API发出一些请求，用不同的状态代码、异常和方法生成响应，并使用执行器监控行为。</p><p id="8ad0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这显示了一个应用程序的所有API的详细信息，如果我们想获得特定API的详细信息，我们可以监控单个API的行为吗？是的，我们可以。为了过滤响应度量，我们可以使用<strong class="ka ir">可用标签</strong>，例如<strong class="ka ir">方法</strong>、<strong class="ka ir"> uri </strong>、<strong class="ka ir">异常</strong>、<strong class="ka ir">状态、</strong>和<strong class="ka ir">结果</strong>。我们可以使用<strong class="ka ir"> </strong> <code class="fe np nq nr mt b"><strong class="ka ir">?tag=&lt;tag_name&gt;:&lt;tag_value&gt;.</strong></code> <strong class="ka ir"> </strong>过滤指标，以使用<code class="fe np nq nr mt b"><strong class="ka ir">?tag=&lt;tag_name_1&gt;:&lt;tag_value_1&gt;&amp;tag=&lt;tag_name_2&gt;:&lt;tag_value_2&gt;</strong></code>基于<em class="nc">多个</em>参数进行过滤</p><h2 id="4b81" class="mx lm iq bd ln ne nf dn lr ng nh dp lv kj ni nj lz kn nk nl md kr nm nn mh no bi translated">获取单个API的指标</h2><ul class=""><li id="e427" class="kx ky iq ka b kb mj kf mk kj oi kn oj kr ok kv lc ld le lf bi translated"><code class="fe np nq nr mt b"><strong class="ka ir">tag=uri:&lt;endPoint&gt;</strong></code></li></ul><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="fb1e" class="mx lm iq mt b gy my mz l na nb"><strong class="mt ir">localhost:8080/actuator/metrics/http.server.requests<br/>?tag=uri&lt;endPoint&gt;</strong></span><span id="51fb" class="mx lm iq mt b gy nd mz l na nb">localhost:8080/actuator/metrics/http.server.requests?tag=uri:/users/user/{id}</span></pre><h2 id="40eb" class="mx lm iq bd ln ne nf dn lr ng nh dp lv kj ni nj lz kn nk nl md kr nm nn mh no bi translated">根据响应的状态代码获取API的指标</h2><ul class=""><li id="dc69" class="kx ky iq ka b kb mj kf mk kj oi kn oj kr ok kv lc ld le lf bi translated"><code class="fe np nq nr mt b"><strong class="ka ir">tag=status:&lt;HTTP Status Code&gt;</strong></code></li></ul><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="6b67" class="mx lm iq mt b gy my mz l na nb"><strong class="mt ir">localhost:8080/actuator/metrics/http.server.requests<br/>?tag=status:&lt;Http Status Code&gt;</strong></span><span id="7518" class="mx lm iq mt b gy nd mz l na nb">localhost:8080/actuator/metrics/http.server.requests?tag=status:200<br/>localhost:8080/actuator/metrics/http.server.requests?tag=status:400</span></pre><h2 id="0fe1" class="mx lm iq bd ln ne nf dn lr ng nh dp lv kj ni nj lz kn nk nl md kr nm nn mh no bi translated">基于请求方法获取API的指标</h2><ul class=""><li id="299d" class="kx ky iq ka b kb mj kf mk kj oi kn oj kr ok kv lc ld le lf bi translated"><code class="fe np nq nr mt b"><strong class="ka ir">tag=method:&lt;HTTP Method&gt;</strong></code></li></ul><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="45c1" class="mx lm iq mt b gy my mz l na nb"><strong class="mt ir">localhost:8080/actuator/metrics/http.server.requests<br/>?tag=method:&lt;HTTP Method&gt;</strong></span><span id="082c" class="mx lm iq mt b gy nd mz l na nb">localhost:8080/actuator/metrics/http.server.requests?tag=method:GET<br/>localhost:8080/actuator/metrics/http.server.requests?tag=method:POST</span></pre><h2 id="11b3" class="mx lm iq bd ln ne nf dn lr ng nh dp lv kj ni nj lz kn nk nl md kr nm nn mh no bi translated">基于多个标签获取API的指标</h2><ul class=""><li id="8140" class="kx ky iq ka b kb mj kf mk kj oi kn oj kr ok kv lc ld le lf bi translated"><code class="fe np nq nr mt b"><strong class="ka ir">tag=uri:&lt;endPoint&gt;&amp;tag=method:&lt;HTTP Method&gt;</strong></code> <strong class="ka ir">(端点，方法)</strong></li></ul><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="3c1c" class="mx lm iq mt b gy my mz l na nb">localhost:8080/actuator/metrics/http.server.requests<br/>?tag=uri:/users/user/{id}&amp;tag=status:200</span></pre></div><div class="ab cl ns nt hu nu" role="separator"><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx"/></div><div class="ij ik il im in"><h2 id="a8a9" class="mx lm iq bd ln ne nf dn lr ng nh dp lv kj ni nj lz kn nk nl md kr nm nn mh no bi translated">获取环境详细信息</h2><p id="584c" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">获取系统配置、JVM细节、属性配置(如数据库、安全性、管理等)的已部署应用程序。</p><p id="7b7a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">来自<code class="fe np nq nr mt b">/env </code>的回应(为更加清晰起见，删除了一些细节)</p><h2 id="e03e" class="mx lm iq bd ln ne nf dn lr ng nh dp lv kj ni nj lz kn nk nl md kr nm nn mh no bi translated">获取应用程序的预定任务</h2><p id="e137" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">我们可能已经创建了向用户发送通知的调度任务、缓存管理任务等。我们可以使用<code class="fe np nq nr mt b"><a class="ae kw" href="http://localhost:8080/actuator/scheduledtasks" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/actuator/scheduledtasks</a></code>获得相同的详细信息。这里我创建了三个计划任务进行演示。</p></div><div class="ab cl ns nt hu nu" role="separator"><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx"/></div><div class="ij ik il im in"><h2 id="7b88" class="mx lm iq bd ln ne nf dn lr ng nh dp lv kj ni nj lz kn nk nl md kr nm nn mh no bi translated">一切都好！</h2><p id="26e3" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated">Spring Boot执行器监控应用程序，并以JSON格式返回信息。为了进行监控，我们需要UI来进行分析。我们可以使用<a class="ae kw" href="https://medium.com/@patelromil/application-monitoring-using-spring-boot-admin-part-2-ed14178c6964" rel="noopener"> <strong class="ka ir"> Spring Boot管理</strong> </a>，它使用来自执行器的信息，并提供图形、REST APIs分析、日志配置等等。<a class="ae kw" href="https://medium.com/@patelromil/application-monitoring-using-spring-boot-admin-part-2-ed14178c6964" rel="noopener">在下一篇文章中，我们将探索<em class="nc"> Spring Boot管理员、普罗米修斯和格拉夫纳。</em> </a></p><h2 id="993f" class="mx lm iq bd ln ne nf dn lr ng nh dp lv kj ni nj lz kn nk nl md kr nm nn mh no bi translated">下载源代码:</h2><p id="935b" class="pw-post-body-paragraph jy jz iq ka b kb mj kd ke kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv ij bi translated"><a class="ae kw" href="https://github.com/romilptl/spring-boot-actuator" rel="noopener ugc nofollow" target="_blank">客户端应用</a>，<a class="ae kw" href="https://github.com/romilptl/spring-boot-admin" rel="noopener ugc nofollow" target="_blank">服务器应用</a></p></div></div>    
</body>
</html>