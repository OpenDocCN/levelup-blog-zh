<html>
<head>
<title>Learn how to Internationalize (i18n) React with i18next</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">了解如何国际化(i18n)接下来使用i18n进行反应</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/learn-how-to-translate-react-with-i18next-a8ec4a8b737d?source=collection_archive---------4-----------------------#2020-03-12">https://levelup.gitconnected.com/learn-how-to-translate-react-with-i18next-a8ec4a8b737d?source=collection_archive---------4-----------------------#2020-03-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/a2f80fbec985c6a0ba6dd3e62e19ac5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UnW60LuN1uOx39vIBb46DQ.png"/></div></div></figure><p id="8247" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">继续我们关于不同javascript框架中的国际化(i18n)的系列，今天我们将讨论使用i18next库翻译React app。</p><p id="f455" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">对于那些对学习如何翻译Angular应用程序感兴趣的人，可以看看我以前的文章:</p><ul class=""><li id="1f25" class="kw kx iq ka b kb kc kf kg kj ky kn kz kr la kv lb lc ld le bi translated"><a class="ae lf" rel="noopener ugc nofollow" target="_blank" href="/angular-internationalization-i18n-with-ngx-translate-8f89005cb337">了解如何使用ngx-translate国际化Angular】</a></li></ul><figure class="lh li lj lk gt jr gh gi paragraph-image"><div class="gh gi lg"><img src="../Images/fc0ce39fa28cdb850d339e12a85f6933.png" data-original-src="https://miro.medium.com/v2/resize:fit:484/format:webp/1*9sHmPkO4MnQilTFXSO9eVg.png"/></div></figure><p id="dbce" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在本文中，我们将学习如何:</p><ul class=""><li id="6428" class="kw kx iq ka b kb kc kf kg kj ky kn kz kr la kv lb lc ld le bi translated">创建React应用程序</li><li id="0897" class="kw kx iq ka b kb ll kf lm kj ln kn lo kr lp kv lb lc ld le bi translated">安装并配置i18next和react-i18next</li><li id="2b0b" class="kw kx iq ka b kb ll kf lm kj ln kn lo kr lp kv lb lc ld le bi translated">加载开发转换密钥(dev.json)</li><li id="45bf" class="kw kx iq ka b kb ll kf lm kj ln kn lo kr lp kv lb lc ld le bi translated">添加新语言(英语、法语……)</li><li id="5600" class="kw kx iq ka b kb ll kf lm kj ln kn lo kr lp kv lb lc ld le bi translated">改变语言</li></ul><h1 id="b27a" class="lq lr iq bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">创建React应用程序</h1><p id="d2d4" class="pw-post-body-paragraph jy jz iq ka b kb mo kd ke kf mp kh ki kj mq kl km kn mr kp kq kr ms kt ku kv ij bi translated">为了初始化、开发、搭建和维护React应用程序，我们将使用“创建React应用程序”。</p><p id="f971" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">要在开发服务器上创建、构建和服务一个新的React项目，请转到工作区的父目录并使用以下命令:</p><pre class="lh li lj lk gt mt mu mv mw aw mx bi"><span id="d0ee" class="my lr iq mu b gy mz na l nb nc">npx create-react-app react-i18next-translations<br/>cd react-i18next-translations<br/>npm start</span></pre><blockquote class="nd ne nf"><p id="6818" class="jy jz ng ka b kb kc kd ke kf kg kh ki nh kk kl km ni ko kp kq nj ks kt ku kv ij bi translated">NPX是NPM 5.2+自带的包运行器工具，允许你使用最新版本的创建-反应-应用工具。</p></blockquote><p id="afa1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">首先，您需要修改几个文件。为此，您必须打开<strong class="ka ir"> <em class="ng"> App.js </em> </strong>，并将内容替换为:</p><figure class="lh li lj lk gt jr"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="e57e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后，打开<strong class="ka ir"> <em class="ng"> App.css </em> </strong>添加这段代码:</p><figure class="lh li lj lk gt jr"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="de8c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">保存所有更改后，假设您的应用程序正在使用<strong class="ka ir"> npm run </strong>命令，转到您的浏览器，打开<a class="ae lf" href="http://localhost:3000/" rel="noopener ugc nofollow" target="_blank"> localhost:3000 </a>，您应该会看到这个网页:</p><figure class="lh li lj lk gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nm"><img src="../Images/4eee23e93253b05a3d8d2d081e88c503.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XPSwY3p-sDq4LffBrCdcTA.png"/></div></div></figure><h1 id="1c34" class="lq lr iq bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">安装和配置i18接下来</h1><p id="ac7c" class="pw-post-body-paragraph jy jz iq ka b kb mo kd ke kf mp kh ki kj mq kl km kn mr kp kq kr ms kt ku kv ij bi translated">为了帮助我们进行国际化，我们将使用i18next国际化(i18n)库。</p><p id="1e84" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">要安装库，请在您的工作区内运行以下命令:</p><pre class="lh li lj lk gt mt mu mv mw aw mx bi"><span id="2b54" class="my lr iq mu b gy mz na l nb nc">npm install i18next i18next-xhr-backend react-i18next --save</span></pre><blockquote class="nd ne nf"><p id="3b77" class="jy jz ng ka b kb kc kd ke kf kg kh ki nh kk kl km ni ko kp kq nj ks kt ku kv ij bi translated">在企业级项目中，我们将构建自己的加载器和定制逻辑，但是为了让您更容易理解本文，我们将使用现有的i18next-xhr-backend资源加载器。</p></blockquote><p id="4158" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在<em class="ng"> src </em>文件夹中创建<strong class="ka ir"> i18n.js </strong>文件并添加内容:</p><figure class="lh li lj lk gt jr"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="c245" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">通过将文件导入index.js文件并添加悬念来初始化i18n:</p><figure class="lh li lj lk gt jr"><div class="bz fp l di"><div class="nk nl l"/></div></figure><h1 id="3870" class="lq lr iq bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">加载开发转换密钥(dev.json)</h1><p id="3839" class="pw-post-body-paragraph jy jz iq ka b kb mo kd ke kf mp kh ki kj mq kl km kn mr kp kq kr ms kt ku kv ij bi translated">拥有一个开发翻译文件(<strong class="ka ir"> dev.json </strong>)有助于我们开发新特性、修复错误等。该文件主要在开发应用程序时使用，但也可以用作应用程序的默认后备语言。</p><blockquote class="nd ne nf"><p id="bcc0" class="jy jz ng ka b kb kc kd ke kf kg kh ki nh kk kl km ni ko kp kq nj ks kt ku kv ij bi translated">由于没有在i18n.init({})配置中定义fallbackLng，默认语言被设置为“dev”。</p></blockquote><p id="efa6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在<em class="ng">公共</em>文件夹中新建文件夹<em class="ng">翻译</em>并添加文件<strong class="ka ir"> dev.json </strong>:</p><figure class="lh li lj lk gt jr gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/ec27dd6912df54eb8222bc6243d0f62f.png" data-original-src="https://miro.medium.com/v2/resize:fit:528/format:webp/1*umP1rDGCKYYS92HFnRh9_w.png"/></div></figure><figure class="lh li lj lk gt jr"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="1f4c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们将使用<em class="ng"> useTranslation hook </em>来获取功能组件中的<em class="ng"> t </em>函数。也可以使用<em class="ng">和Translation HOC </em>通过props获得<em class="ng"> t </em>功能。然后，用dev.json中新创建的键替换所有静态值:</p><figure class="lh li lj lk gt jr"><div class="bz fp l di"><div class="nk nl l"/></div></figure><h1 id="8155" class="lq lr iq bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">添加新语言(英语、法语……)</h1><p id="0c83" class="pw-post-body-paragraph jy jz iq ka b kb mo kd ke kf mp kh ki kj mq kl km kn mr kp kq kr ms kt ku kv ij bi translated">我们将使用相同的<em class="ng"> public/translations </em>文件夹来提供语言文件(<strong class="ka ir"> en.json </strong>，<strong class="ka ir"> fr.json </strong>)。</p><p id="f2ad" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">创建两个名为<strong class="ka ir"> en.json </strong>和<strong class="ka ir"> fr.json </strong>的新文件。</p><figure class="lh li lj lk gt jr gh gi paragraph-image"><div class="gh gi no"><img src="../Images/5cd9f5d7a69b9514def0c3c8d4fd3d04.png" data-original-src="https://miro.medium.com/v2/resize:fit:514/format:webp/1*jHnJSI0kV31XSg2HH41bGQ.png"/></div></figure><p id="658b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们现在将更新<strong class="ka ir"> i18n.js </strong>文件，以支持加载新创建的语言文件:</p><figure class="lh li lj lk gt jr"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="11e6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们正在加载我们的<strong class="ka ir"> dev.json </strong>文件和基于本地存储中设置的值的特定语言文件。</p><h1 id="2463" class="lq lr iq bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">改变语言</h1><p id="af87" class="pw-post-body-paragraph jy jz iq ka b kb mo kd ke kf mp kh ki kj mq kl km kn mr kp kq kr ms kt ku kv ij bi translated">为了能够改变语言，我们需要添加一个函数来处理它。</p><p id="9c53" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在<strong class="ka ir"> <em class="ng"> App.js </em> </strong>中创建一个函数，改变点击按钮时调用的语言:</p><figure class="lh li lj lk gt jr"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="b2dc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">正如您所注意到的，我们使用了一种技术来设置localStorage中的变量并重新加载应用程序。我们在<strong class="ka ir"> <em class="ng"> i18n.js </em> </strong>中的逻辑会用这个参数来决定加载哪个语言文件。</p><p id="ecd4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">有多种技术可以使用，如翻译的实时重新加载，重新加载页面和重定向到不同的网址，如somesite.com/fr/等。改变语言的最好方法可能是使用重新加载应用程序并重新引导的方法。这种方法尤其适用于更复杂的应用程序，在这些应用程序中，需要在引导过程中进行更多配置，例如:</p><ul class=""><li id="5083" class="kw kx iq ka b kb kc kf kg kj ky kn kz kr la kv lb lc ld le bi translated">从CMS中为新的语言环境提取新的内容</li><li id="6a44" class="kw kx iq ka b kb ll kf lm kj ln kn lo kr lp kv lb lc ld le bi translated">加载和注册React Locale数据，用于以本地格式显示日期、数字、货币</li><li id="858b" class="kw kx iq ka b kb ll kf lm kj ln kn lo kr lp kv lb lc ld le bi translated">基于区域设置从API获取新数据</li></ul></div><div class="ab cl np nq hu nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="ij ik il im in"><h1 id="16fd" class="lq lr iq bd ls lt nw lv lw lx nx lz ma mb ny md me mf nz mh mi mj oa ml mm mn bi translated">试试看！</h1><p id="fbb3" class="pw-post-body-paragraph jy jz iq ka b kb mo kd ke kf mp kh ki kj mq kl km kn mr kp kq kr ms kt ku kv ij bi translated">修改<strong class="ka ir"> fr.json </strong>文件以覆盖某些关键字的翻译，以测试翻译更改是否有效:</p><figure class="lh li lj lk gt jr"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="6453" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">保存文件，改变语言，看看会发生什么！</p><figure class="lh li lj lk gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ob"><img src="../Images/fa30ce9ad2435b988e0b6b179d1a8415.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*C_tIuunS7tMrmxY4Dso6FA.gif"/></div></div></figure><blockquote class="nd ne nf"><p id="5723" class="jy jz ng ka b kb kc kd ke kf kg kh ki nh kk kl km ni ko kp kq nj ks kt ku kv ij bi translated">你可以看到我们没有翻译<strong class="ka ir"> fr.json </strong>中的所有键。如前所述，<strong class="ka ir"> dev.json </strong>是默认的后备，这意味着不在<strong class="ka ir"> fr.json </strong>中的所有键都将从<strong class="ka ir"> dev.json </strong>中使用，如果它们存在的话。</p></blockquote><h1 id="3974" class="lq lr iq bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">结论</h1><p id="7f40" class="pw-post-body-paragraph jy jz iq ka b kb mo kd ke kf mp kh ki kj mq kl km kn mr kp kq kr ms kt ku kv ij bi translated">在本文中，我们讨论了如何在i18next库的帮助下设置和翻译React应用程序。</p><p id="3c10" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在下一篇文章中，你将学习如何用vue-i18n翻译Vue.js。</p><p id="f380" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">示例代码可以在<a class="ae lf" href="https://github.com/ivanmiletic/react-i18next-translations" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir"><em class="ng">GitHub</em></strong></a><strong class="ka ir"><em class="ng">上找到。</em>T9】</strong></p></div></div>    
</body>
</html>