<html>
<head>
<title>Customize the Ant Design Select Component</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">自定义Ant设计选择组件</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/customize-ant-design-select-component-511ab289f052?source=collection_archive---------0-----------------------#2019-10-28">https://levelup.gitconnected.com/customize-ant-design-select-component-511ab289f052?source=collection_archive---------0-----------------------#2019-10-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/5a667bcb9f2d2abfc76d768c198d8f96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9m3PUCJjSrpQaywO9vBC0w.jpeg"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">由<a class="ae kf" href="https://unsplash.com/@max_duz?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Max Duzij </a>在<a class="ae kf" href="https://unsplash.com/s/photos/code?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="c413" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我最近回答了一个关于<a class="ae kf" href="https://stackoverflow.com/questions/58492391/how-to-set-custom-style-to-antd-select/58493382#58493382" rel="noopener ugc nofollow" target="_blank">堆栈溢出</a>的问题，一个用户试图定制他们的Ant Design <code class="fe le lf lg lh b"><a class="ae kf" href="https://ant.design/components/select/" rel="noopener ugc nofollow" target="_blank">Select</a></code>组件的布局/风格。下面是预期的行为。</p><figure class="lj lk ll lm gt ju gh gi paragraph-image"><div class="gh gi li"><img src="../Images/b1565b412381c3bd5a87e90672edda8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:328/1*qxf4EK-gWIGiDq-NPdPKQA.gif"/></div></figure><p id="54d7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这是实际的行为。</p><figure class="lj lk ll lm gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ln"><img src="../Images/c5e5c83aca63e6e5eefe422901a26e4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:330/1*PgGfdJcMGyMqLRw5b8cyUA.gif"/></div></div></figure><p id="d653" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">本质上，理想行为有三个方面。</p><ol class=""><li id="bfd7" class="lo lp it ki b kj kk kn ko kr lq kv lr kz ls ld lt lu lv lw bi translated">正确对齐<code class="fe le lf lg lh b">Select</code>选项中的文本</li><li id="2f2c" class="lo lp it ki b kj lx kn ly kr lz kv ma kz mb ld lt lu lv lw bi translated">菜单打开时只显示描述(即<code class="fe le lf lg lh b">LESS CONTAINER LOAD</code>)。</li><li id="56cf" class="lo lp it ki b kj lx kn ly kr lz kv ma kz mb ld lt lu lv lw bi translated">仅显示下拉列表中当前未选中的选项。</li></ol><p id="661f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们先解决造型问题。Ant Design的HTML结构由许多深度嵌套的<code class="fe le lf lg lh b">div</code>、<code class="fe le lf lg lh b">span</code>等组成。具有Ant设计库特有的类。</p><p id="e75e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下面是用户到目前为止的自定义CSS，意在覆盖Ant Design的一些内置风格。</p><pre class="lj lk ll lm gt mc lh md me aw mf bi"><span id="9814" class="mg mh it lh b gy mi mj l mk ml">.ant-select-selection.ant-select-selection--single {<br/>    border-radius: 0px 8px 8px 0px;<br/>    height: 53px;<br/>}<br/><br/>.ant-select-selection-selected-value {<br/>    height: 53px;<br/>    padding: 0px;<br/>    margin: 0px;<br/>}<br/><br/>.ant-select-selection__rendered {<br/>    padding: 0px;<br/>    margin: 0px;<br/>}<br/><br/>.ant-select-dropdown-menu.ant-select-dropdown-menu-root.ant-select-dropdown-menu-vertical {<br/>    padding: 0px;<br/>    margin: 0px;<br/>}<br/><br/>.ant-select-dropdown-menu-item {<br/>    padding: 0px;<br/>    margin: 0px;<br/>}</span></pre><p id="a444" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">他们的方向是正确的，但这还不够。首先，我们可以使用<a class="ae kf" href="https://medium.com/better-programming/understanding-css-combinators-a36e013b1bed" rel="noopener">组合子</a>来达到那些我们需要调整样式的深度嵌套的<code class="fe le lf lg lh b">div</code>。</p><pre class="lj lk ll lm gt mc lh md me aw mf bi"><span id="22e4" class="mg mh it lh b gy mi mj l mk ml">.ant-select-selection.ant-select-selection--single<br/>&gt; div &gt; div &gt; div &gt; div + div {<br/>   margin-top: -5px;<br/>   padding: 4px 5px 5px 14px !important;<br/>}</span></pre><p id="432a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这段代码可以帮助我们瞄准<code class="fe le lf lg lh b">Select</code>组件的下面部分，并沿着中间更好地对齐它。</p><figure class="lj lk ll lm gt ju gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/1c1e0d6dce57c8720107bb31f59ecdc5.png" data-original-src="https://miro.medium.com/v2/resize:fit:458/format:webp/1*jomLfgW8yiijVzFPWLCi8Q.png"/></div></figure><p id="87dc" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">除了这个CSS，我们还可以隐藏下拉选项的描述，直到下拉被打开。我们可以通过添加以下内容来定位/隐藏下拉列表的这一部分</p><pre class="lj lk ll lm gt mc lh md me aw mf bi"><span id="e98f" class="mg mh it lh b gy mi mj l mk ml">.ant-select-selection.ant-select-selection--single <br/>&gt; div &gt; div &gt; div &gt; div {<br/>    margin-top: -20px;<br/>}</span></pre><p id="90da" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这将指向前一个<code class="fe le lf lg lh b">div</code>的前一个兄弟，并将其向上移出视图。没有它，我们将会像这样结束。</p><figure class="lj lk ll lm gt ju gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/fb80f018baf024987c29e90dbd852112.png" data-original-src="https://miro.medium.com/v2/resize:fit:346/format:webp/1*pjMUuT5iDaKCwctOc3w2sw.png"/></div></figure><p id="b341" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然而，当菜单打开时，描述应该在那里。那么我们该如何应对呢？见下文。</p><pre class="lj lk ll lm gt mc lh md me aw mf bi"><span id="7560" class="mg mh it lh b gy mi mj l mk ml">.ant-select-selection.ant-select-selection--single[aria-expanded="true"]<br/>&gt; div &gt; div &gt; div &gt; div {<br/>   margin-top: -10px;<br/>}</span></pre><p id="076d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当<code class="fe le lf lg lh b">Select</code>组件展开时，这将使<code class="fe le lf lg lh b">div</code>回到视图中。<code class="fe le lf lg lh b"><a class="ae kf" href="https://www.accessibility-developer-guide.com/examples/sensible-aria-usage/expanded/" rel="noopener ugc nofollow" target="_blank">aria-expanded</a></code>属性是Ant Design用来传达元素的可见性可以切换的。所以上面的CSS目标是<code class="fe le lf lg lh b">div</code>，如果<code class="fe le lf lg lh b">aria-expanded="true"</code>应用样式，否则使用之前的CSS。我们也可以将<code class="fe le lf lg lh b">aria-expanded="true"</code>方法应用到我们的第一个<code class="fe le lf lg lh b">div</code>中，因为我们需要调整它的边距。如果我们没有，那么它就会和前面的<code class="fe le lf lg lh b">div</code>一起被推倒。让我们添加下面的CSS。</p><pre class="lj lk ll lm gt mc lh md me aw mf bi"><span id="1ea2" class="mg mh it lh b gy mi mj l mk ml">.ant-select-selection.ant-select-selection--single[aria-expanded="true"]<br/>&gt; div &gt; div &gt; div &gt; div + div {<br/>    margin-top: -15px;<br/>}</span></pre><p id="1c33" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">通过减少<code class="fe le lf lg lh b">margin-top</code>,我们可以将标签拉得更靠近顶部描述，这样在显示描述的同时保持对齐。</p><figure class="lj lk ll lm gt ju gh gi paragraph-image"><div class="gh gi ln"><img src="../Images/e77a22d1e5ecac581d065020b595d0f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:330/format:webp/1*aEbW5wsGhsivIjIss6QVXQ.png"/></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">选择被展开。</figcaption></figure><p id="36e2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">厉害！这就是我们需要的CSS。现在我们需要解决布局的第二个需求:<em class="mo">只显示当前没有选择的选项</em>。</p><figure class="lj lk ll lm gt ju gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/0492252113b086ce1ebd8cf69a05f021.png" data-original-src="https://miro.medium.com/v2/resize:fit:996/format:webp/1*A5GpMOIMcjZsBgwUeG-9IQ.png"/></div></figure><p id="c92f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了实现这一点，我们需要对JavaScript做一些修改。通过利用组件<code class="fe le lf lg lh b">state</code>，一个将被应用到<code class="fe le lf lg lh b">Select</code>组件的<code class="fe le lf lg lh b">onChange</code>属性的<code class="fe le lf lg lh b">handleChange</code>方法，以及对组件的渲染做一些调整，可以完成上面的布局。先说<code class="fe le lf lg lh b">state</code>。</p><pre class="lj lk ll lm gt mc lh md me aw mf bi"><span id="e7ad" class="mg mh it lh b gy mi mj l mk ml">this.state = {<br/>     shipmentArr: [],<br/>     shipmentType: {<br/>        sea: [<br/>          { name: "FCL", desc: "FULL CONTAINER LOAD" },<br/>          { name: "LCL", desc: "LESS CONTAINER LOAD" }<br/>        ],<br/>        air: [{ name: "AIR", desc: "AIR DELIVERY" }]<br/>     }<br/>  };</span><span id="70eb" class="mg mh it lh b gy mq mj l mk ml"><strong class="lh iu">//The user didn't appear to be using shipmentType.air for their component.</strong></span></pre><p id="4332" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe le lf lg lh b"><strong class="ki iu">shipmentType</strong></code>是最初提供给<code class="fe le lf lg lh b">Select</code>组件的数据。</p><p id="9489" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe le lf lg lh b"><strong class="ki iu">shipmentArr</strong></code> <strong class="ki iu"> </strong>将作为<code class="fe le lf lg lh b">Select</code>组件的<strong class="ki iu">新</strong>数据，并将在<code class="fe le lf lg lh b">componentDidMount</code>中初始化。在此之前，让我们看看我们的<code class="fe le lf lg lh b">Select</code>组件。</p><pre class="lj lk ll lm gt mc lh md me aw mf bi"><span id="6847" class="mg mh it lh b gy mi mj l mk ml">&lt;Select<br/>    className="container-dropdown"<br/>    onChange={this.handleChange}<br/>    defaultValue={<br/>      &lt;DisplayContainer data={this.state.shipmentType.sea[0]} /&gt;<br/>    }<br/>&gt;<br/>    {this.state.shipmentArr.map(x =&gt; {<br/>      return (<br/>        &lt;Option value={x.name}&gt;<br/>          &lt;DisplayContainer data={x} /&gt; <br/>         <strong class="lh iu"> </strong><strong class="lh iu">{/* Aside from icon logic, </strong><strong class="lh iu">DisplayContainer doesn't contain pertinent code and thus has been omitted in this post.*/}</strong><br/>        &lt;/Option&gt;<br/>      );<br/>    })}<br/>&lt;/Select&gt;<!-- --> </span></pre><p id="2465" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">上面的代码类似于用户的代码，除了一个关键的区别:<strong class="ki iu">提供给</strong> <code class="fe le lf lg lh b"><strong class="ki iu">Select</strong></code>的数据。<code class="fe le lf lg lh b">defaultValue</code>是<code class="fe le lf lg lh b">this.state.shipmentType.sea</code>的第一个结果，也就是<code class="fe le lf lg lh b">{name: "FCL", desc: "FULL CONTAINER LOAD"}</code>。然后我们映射<code class="fe le lf lg lh b">this.state.shipmentArr</code>并渲染下拉选项，省略<code class="fe le lf lg lh b">this.state.shipmentType.sea[0]</code>。这就引出了我们的<code class="fe le lf lg lh b">onChange</code>函数。</p><pre class="lj lk ll lm gt mc lh md me aw mf bi"><span id="d415" class="mg mh it lh b gy mi mj l mk ml">handleChange = value =&gt; {<br/>   var newShipmentType = this.state.shipmentType.sea.filter(x =&gt; {<br/>      return x.name !== value;<br/>   });</span><span id="467f" class="mg mh it lh b gy mq mj l mk ml">   this.setState({<br/>     shipmentArr: newShipmentType<br/>   });</span><span id="a6f2" class="mg mh it lh b gy mq mj l mk ml">};</span></pre><p id="02f4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这里我们设置<code class="fe le lf lg lh b">this.state.shipmentArr</code>的值等于<code class="fe le lf lg lh b">this.state.shipmentType.sea</code>，这里省略了<code class="fe le lf lg lh b">name</code>等于<code class="fe le lf lg lh b">value</code>的对象。如果<code class="fe le lf lg lh b">value</code>是<code class="fe le lf lg lh b">"FCL"</code>，这个过滤将给出结果<code class="fe le lf lg lh b">[{ name: "LCL", desc: "LESS CONTAINER LOAD" }]</code>。</p><p id="cbaa" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因为我们用这个新信息更新状态，我们的下拉选项将重新呈现以反映新过滤的选项。这允许我们的<code class="fe le lf lg lh b">Select</code>选项保持动态，并根据当前选择的内容进行更新。这让我们回到了我们的<code class="fe le lf lg lh b">componentDidMount</code>。</p><pre class="lj lk ll lm gt mc lh md me aw mf bi"><span id="5fad" class="mg mh it lh b gy mi mj l mk ml">componentDidMount = () =&gt; {<br/>    <!-- -->this.handleChange(this.state.shipmentType.sea[0].name);<br/>};</span></pre><p id="647e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这里我们调用<code class="fe le lf lg lh b">this.handleChange</code>并传递给它<code class="fe le lf lg lh b">this.state.shipmentType.sea</code>中第一项的<code class="fe le lf lg lh b">name</code>。这与我们用于组件<code class="fe le lf lg lh b">Select</code>的<code class="fe le lf lg lh b">defaultValue</code>道具的<code class="fe le lf lg lh b">name</code>相同。这将允许我们的组件呈现第一个项目，然后更新<code class="fe le lf lg lh b">this.state.shipmentArr</code>以包含其他所有内容。</p><p id="0d14" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下面是最终结果。</p><figure class="lj lk ll lm gt ju gh gi paragraph-image"><div class="gh gi mr"><img src="../Images/34efa82ca2e3ad83c5103f190b87c833.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*xcjwszdR4ywb_9L5siA4Hg.gif"/></div></figure><p id="ec5c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我添加了<code class="fe le lf lg lh b">test</code>来确保功能足够动态，可以接受任意数量的选项。下拉选项现在风格一致<strong class="ki iu">和</strong>更新以省略用户当前选择的内容。我已经将<a class="ae kf" href="https://stackoverflow.com/questions/58492391/how-to-set-custom-style-to-antd-select/58493382#58493382" rel="noopener ugc nofollow" target="_blank">原始问题</a>和解决方案的<a class="ae kf" href="https://codesandbox.io/s/flamboyant-goldwasser-bk393?fontsize=14" rel="noopener ugc nofollow" target="_blank">代码沙箱</a>包含在我的参考资料中。</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><p id="b47f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在此  <em class="mo">将您的免费媒体会员升级为付费会员，每月只需5美元，您就可以收到来自各种出版物上数千名作家的无限量无广告故事。这是一个附属链接，你的会员资格的一部分帮助我为我创造的内容获得奖励。谢谢大家！</em></p><h1 id="3986" class="mz mh it bd na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv bi translated">参考</h1><div class="nw nx gp gr ny nz"><a href="https://stackoverflow.com/questions/58492391/how-to-set-custom-style-to-antd-select/58493382#58493382" rel="noopener  ugc nofollow" target="_blank"><div class="oa ab fo"><div class="ob ab oc cl cj od"><h2 class="bd iu gy z fp oe fr fs of fu fw is bi translated">如何将自定义样式设置为antd Select？</h2><div class="og l"><h3 class="bd b gy z fp oe fr fs of fu fw dk translated">我相信我已经能够非常接近你所期望达到的目标。下面是更新后的custom-antd.css…</h3></div><div class="oh l"><p class="bd b dl z fp oe fr fs of fu fw dk translated">stackoverflow.com</p></div></div><div class="oi l"><div class="oj l ok ol om oi on jz nz"/></div></div></a></div><div class="nw nx gp gr ny nz"><a href="https://ant.design/components/select/" rel="noopener  ugc nofollow" target="_blank"><div class="oa ab fo"><div class="ob ab oc cl cj od"><h2 class="bd iu gy z fp oe fr fs of fu fw is bi translated">选择蚂蚁设计</h2><div class="og l"><h3 class="bd b gy z fp oe fr fs of fu fw dk translated">选择组件以从选项中选择值。</h3></div><div class="oh l"><p class="bd b dl z fp oe fr fs of fu fw dk translated">蚂蚁设计</p></div></div><div class="oi l"><div class="oo l ok ol om oi on jz nz"/></div></div></a></div><div class="nw nx gp gr ny nz"><a href="https://medium.com/better-programming/understanding-css-combinators-a36e013b1bed" rel="noopener follow" target="_blank"><div class="oa ab fo"><div class="ob ab oc cl cj od"><h2 class="bd iu gy z fp oe fr fs of fu fw is bi translated">理解CSS组合子</h2><div class="og l"><h3 class="bd b gy z fp oe fr fs of fu fw dk translated">如何使用它们，为什么</h3></div><div class="oh l"><p class="bd b dl z fp oe fr fs of fu fw dk translated">medium.com</p></div></div><div class="oi l"><div class="op l ok ol om oi on jz nz"/></div></div></a></div><div class="nw nx gp gr ny nz"><a href="https://www.accessibility-developer-guide.com/examples/sensible-aria-usage/expanded/" rel="noopener  ugc nofollow" target="_blank"><div class="oa ab fo"><div class="ob ab oc cl cj od"><h2 class="bd iu gy z fp oe fr fs of fu fw is bi translated">使用aria可扩展的标记元素-扩展</h2><div class="og l"><h3 class="bd b gy z fp oe fr fs of fu fw dk translated">ARIA提供了一个属性，该属性允许描述元素的可扩展性状态。它工作起来相当一致…</h3></div><div class="oh l"><p class="bd b dl z fp oe fr fs of fu fw dk translated">www.accessibility-developer-guide.com</p></div></div><div class="oi l"><div class="oq l ok ol om oi on jz nz"/></div></div></a></div><figure class="lj lk ll lm gt ju"><div class="bz fp l di"><div class="or os l"/></div></figure></div></div>    
</body>
</html>