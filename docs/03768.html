<html>
<head>
<title>JavaScript Best Practices — Conditionals</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript最佳实践—条件</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/javascript-best-practices-conditionals-f1dd694b8f9e?source=collection_archive---------11-----------------------#2020-05-26">https://levelup.gitconnected.com/javascript-best-practices-conditionals-f1dd694b8f9e?source=collection_archive---------11-----------------------#2020-05-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/42b376732343805b45092498468d117a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*CcTUMMWtFHGIerHh"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">马库斯·斯皮斯克在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="683c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">JavaScript是一种非常宽容的语言。编写可以运行但存在问题的代码很容易。</p><p id="bcf5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本文中，我们将看看如何在JavaScript程序中编写条件语句。</p><h1 id="578a" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">首先编写代码中的正常路径</h1><p id="a028" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们应该首先考虑正常的路径，然后写出异常的情况。</p><p id="b836" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因此，我们应该检查比罕见的边缘情况更频繁遇到的情况。</p><h1 id="7fbe" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">确保我们在平等问题上分支正确</h1><p id="e0d7" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated"><code class="fe mh mi mj mk b">&gt;=</code>不同于<code class="fe mh mi mj mk b">&gt;</code>，<code class="fe mh mi mj mk b">&lt;=</code>也不同于<code class="fe mh mi mj mk b">&lt;</code>。</p><p id="98c3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因此，我们应该确保通过使用正确的方法来避免一个接一个的错误。</p><h1 id="47b8" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">将正常情况放在if之后，而不是else之后</h1><p id="1bb6" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">在<code class="fe mh mi mj mk b">if</code>之后，正常情况会更好，因为它让我们运行的代码比放在<code class="fe mh mi mj mk b">else</code>中少。</p><p id="1c36" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">短路评估意味着我们只是运行<code class="fe mh mi mj mk b">if</code>语句，而不是检查<code class="fe mh mi mj mk b">if</code>语句，然后转到<code class="fe mh mi mj mk b">else</code>。</p><p id="7005" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果大多数案例都是成功的，那么我们应该把成功的案例放在<code class="fe mh mi mj mk b">if</code>之后，而不是放在<code class="fe mh mi mj mk b">else</code>之后。</p><p id="52f3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，不写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="1c93" class="mt lf it mk b gy mu mv l mw mx">if (status === 'error') {<br/>  //...<br/>} else if (status === 'success') {<br/>  //...<br/>} else {<br/>  //...<br/>}</span></pre><p id="937d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们通过书写来翻转案例:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="3729" class="mt lf it mk b gy mu mv l mw mx">if (status === 'success') {<br/>  //...<br/>} else if (status === 'error') {<br/>  //...<br/>} else {<br/>  //...<br/>}</span></pre><p id="5b16" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果状态为<code class="fe mh mi mj mk b">'success'</code>，错误案例在顶部，我们可以跳过所有需要检查的错误案例。</p><p id="e7ce" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们还知道，如果我们遵循这个惯例，<code class="fe mh mi mj mk b">if</code>案例总是正常的成功案例。</p><h1 id="a7de" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">在if子句后加上一个有意义的陈述</h1><p id="812c" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们不应该有一个什么也不做的<code class="fe mh mi mj mk b">if</code>块。所以与其写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="4a24" class="mt lf it mk b gy mu mv l mw mx">if (condition) {</span><span id="0daf" class="mt lf it mk b gy my mv l mw mx">} else {<br/>  // ...<br/>}</span></pre><p id="ffef" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们应该改为写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="ecc7" class="mt lf it mk b gy mu mv l mw mx">if (!condition) {<br/>  //...<br/>}</span></pre><h1 id="651b" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">考虑else子句</h1><p id="084f" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以使用<code class="fe mh mi mj mk b">else</code>子句，以便考虑在<code class="fe mh mi mj mk b">if</code>块中没有考虑的条件。</p><p id="f39b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可能想写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="9416" class="mt lf it mk b gy mu mv l mw mx">if (MIN &lt;= value &amp;&amp; value &lt;= MAX) {<br/>  // do something ...<br/>} else {<br/>  // invalid value, do nothing<br/>}</span></pre><p id="a680" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果不满足<code class="fe mh mi mj mk b">if</code>中的条件，我们可能希望让<code class="fe mh mi mj mk b">else</code>块解释为什么我们什么都不做。</p><p id="595d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这样，我们确保没有忽略与<code class="fe mh mi mj mk b">if</code>程序块中的条件相反的情况。</p><h1 id="4757" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">测试else子句的正确性</h1><p id="2892" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们想在程序中测试所有案例的正确性。</p><p id="d1c6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">所以除了测试<code class="fe mh mi mj mk b">if</code>子句之外，我们还应该测试<code class="fe mh mi mj mk b">else</code>子句。</p><h1 id="366b" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">检查if和else子句的反转</h1><p id="2667" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">如果我们翻转<code class="fe mh mi mj mk b">if</code>和<code class="fe mh mi mj mk b">else</code>条款，我们会得到意想不到的结果。</p><p id="633b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因此，我们应该检查那些条款是否被颠倒了。</p><figure class="ml mm mn mo gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/d61c3de26bbb24b51892cdc6e0c72552.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*XSKGWhvs-wMvWDdW"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">马库斯·斯皮斯克在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><h1 id="0432" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">用布尔函数调用简化复杂的测试</h1><p id="c66d" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">如果我们的条件中有复杂的测试，我们应该把表达式放在一个函数中，这样我们就可以调用这个函数。</p><p id="727d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">函数名也让每个人都清楚检查在做什么。</p><p id="e6e0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以编写以下代码来实现这一点:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="1402" class="mt lf it mk b gy mu mv l mw mx">const inRange = (min, max, value) =&gt; (min &lt;= value &amp;&amp; value &lt;= max);<br/>if (inRange(min, max, value)) {<br/>  // ...<br/>} else {<br/>  //...<br/>}</span></pre><p id="98aa" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们将范围检查代码放入一个函数中，然后调用它。</p><p id="8808" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在我们知道布尔表达式正在检查<code class="fe mh mi mj mk b">value</code>是否在由<code class="fe mh mi mj mk b">min</code>和<code class="fe mh mi mj mk b">max</code>限定的给定数字范围内。</p><h1 id="5b95" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">将最常见的案例放在第一位</h1><p id="ea68" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">因为最常见的情况是最经常遇到的，所以我们应该把它们放在第一位，这样在大多数情况下，不经常遇到的情况就不必检查了。</p><p id="6c1b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，如果字母是ou <code class="fe mh mi mj mk b">if</code>语句中最常见的字符，那么我们可以把它作为第一种情况:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="aa26" class="mt lf it mk b gy mu mv l mw mx">if (isLetter(input)) {<br/>  //...<br/>} else if (isNumber(input)) {<br/>  ///...<br/>} else {<br/>  //...<br/>}</span></pre><p id="c8c0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这样，第一种情况将是最常见的，我们的程序必须更少地运行<code class="fe mh mi mj mk b">else</code>子句。</p><h1 id="99e7" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">结论</h1><p id="aeb6" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以通过将最常遇到的情况放在最前面来编写更有效的条件语句。</p><p id="2d9d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">还有，我们想把复杂的布尔表达式放到自己的函数里，让它们更清晰。</p><p id="0a07" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">正常情况应该优先考虑，因为它遇到的频率更高。</p><p id="f31a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们还应该使用正确的运算符进行比较，以减少一个接一个的错误。</p></div></div>    
</body>
</html>