<html>
<head>
<title>Fluttering Dart: The Flow</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">飞舞的飞镖:流动</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/fluttering-dart-the-flow-7be2080763ad?source=collection_archive---------3-----------------------#2019-11-29">https://levelup.gitconnected.com/fluttering-dart-the-flow-7be2080763ad?source=collection_archive---------3-----------------------#2019-11-29</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="b92e" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph"><a class="ae ep" rel="noopener ugc nofollow" target="_blank" href="https://levelup.gitconnected.com/fluttering-dart/home">飘动的飞镖</a></h2><div class=""/><div class=""><h2 id="978c" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">所有关于控制流的语句</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/0beb971ea5a5858e5d4176778b89f2a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7LaZNH0sKSBvErYK_iDRcA.jpeg"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">由<a class="ae lh" href="https://unsplash.com/@blakeverdoorn?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">布雷克·理查德·凡尔登</a>在<a class="ae lh" href="https://unsplash.com/s/photos/flow?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="24e2" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><a class="ae lh" href="https://flutter.dev" rel="noopener ugc nofollow" target="_blank"> Flutter </a>项目可以使用特定平台和跨平台代码。后者是用<a class="ae lh" href="https://dart.dev" rel="noopener ugc nofollow" target="_blank"> Dart </a>写的，而且，构建Flutter apps，需要一些Dart的基础知识。</p><p id="50dc" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><a class="ae lh" href="https://medium.com/tag/fluttering-dart/archive" rel="noopener"/></p><p id="5647" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在本系列的前几部分中，我们介绍了Dart<a class="ae lh" href="https://medium.com/@constanting/fluttering-dart-9a3e74b0d9c5" rel="noopener"><strong class="lk jd"/></a><strong class="lk jd"/><a class="ae lh" href="https://medium.com/@constanting/fluttering-dart-b37110f4d1bf" rel="noopener"><strong class="lk jd">函数</strong> </a> <strong class="lk jd"> </strong>和<strong class="lk jd"> </strong> <a class="ae lh" href="https://medium.com/@constanting/fluttering-dart-ee493f4b0440" rel="noopener"> <strong class="lk jd">运算符</strong> </a>。</p><p id="92c2" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在这一部分，我们将发现如何编写和使用控制流语句。</p><p id="25f3" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">可以使用<a class="ae lh" href="https://dartpad.dev" rel="noopener ugc nofollow" target="_blank"><strong class="lk jd"/></a>试一试一些代码示例。</p><h2 id="87a8" class="me mf it bd mg mh mi dn mj mk ml dp mm lr mn mo mp lv mq mr ms lz mt mu mv iz bi translated">控制流语句</h2><p id="5707" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">如果您来自另一种命令式编程语言，您将熟悉Dart中的控制流语句。</p><p id="a655" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">有条件语句:<strong class="lk jd"> if </strong> — <strong class="lk jd"> else </strong>和<strong class="lk jd"> switch </strong> — <strong class="lk jd"> case </strong>，迭代语句:<strong class="lk jd"> for </strong>、<strong class="lk jd"> for </strong> — <strong class="lk jd"> in </strong>、<strong class="lk jd"> forEach </strong>、<strong class="lk jd"> while </strong>、<strong class="lk jd">do</strong>—<strong class="lk jd">while</strong>loop。还有一些“帮助者”语句:<strong class="lk jd">中断</strong>、<strong class="lk jd">继续</strong>、<strong class="lk jd">断言</strong>。不要忘记，不久前当我们讨论<a class="ae lh" href="https://medium.com/@constanting/fluttering-dart-b37110f4d1bf" rel="noopener">函数</a>时，我们也讨论过<strong class="lk jd"> try </strong> — <strong class="lk jd"> catch </strong>和<strong class="lk jd"> throw </strong>语句。</p><h2 id="fc62" class="me mf it bd mg mh mi dn mj mk ml dp mm lr mn mo mp lv mq mr ms lz mt mu mv iz bi translated">条件语句</h2><p id="d7b0" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">这些用于基于满足/匹配某些布尔条件来决定动作(更具体地说是代码的执行)。</p><p id="08d4" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">Dart支持带有可选<strong class="lk jd"> else </strong>元素的<strong class="lk jd"> if </strong>语句:</p><pre class="ks kt ku kv gt nb nc nd ne aw nf bi"><span id="5d68" class="me mf it nc b gy ng nh l ni nj"><strong class="nc jd">if</strong>(myCat.meowing) {<br/>  feed(myCat);<br/>} <strong class="nc jd">else if</strong>(!myCat.sleepy) {<br/>  pet(myCat);<br/>} <strong class="nc jd">else</strong> {<br/>  // don't disturb the cat<br/>  takePicturesOf(myCat);<br/>}</span></pre><p id="966e" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">如果你还记得<a class="ae lh" href="https://medium.com/@constanting/fluttering-dart-ee493f4b0440" rel="noopener">条件操作符</a>，它几乎是一个<strong class="lk jd"> if </strong> — <strong class="lk jd"> else </strong>语句(<code class="fe nk nl nm nc b">condition ? expr1 : expr2</code>)的速记符号。</p><p id="1f53" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">上面例子中的一个衬垫是:</p><pre class="ks kt ku kv gt nb nc nd ne aw nf bi"><span id="d094" class="me mf it nc b gy ng nh l ni nj">myCat.meowing <strong class="nc jd">? </strong>feed(myCat) <strong class="nc jd">: ( </strong>!myCat.sleepy <strong class="nc jd">? </strong>pet(myCat) <strong class="nc jd">: </strong>takePicturesOf(myCat) <strong class="nc jd">)</strong>;</span></pre><p id="99aa" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们不应该用这种方式编码，因为这样可读性更差。</p><p id="4575" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">条件<strong class="lk jd">必须</strong>只使用布尔值(<strong class="lk jd"> bool </strong>赋值返回<strong class="lk jd"> bool </strong>的类型化对象或表达式)。</p><p id="dd2c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd"> Switch </strong>语句可以比较整数、字符串或编译时常量，使用<code class="fe nk nl nm nc b">==</code>。被比较的对象必须都是同一个类，没有<a class="ae lh" href="https://medium.com/@constanting/fluttering-dart-ee493f4b0440" rel="noopener">覆盖<code class="fe nk nl nm nc b">==</code>操作符的</a>。<a class="ae lh" href="https://medium.com/@constanting/fluttering-dart-9a3e74b0d9c5" rel="noopener">列举类型</a>与<strong class="lk jd">开关</strong>一起使用时，非常适合:</p><pre class="ks kt ku kv gt nb nc nd ne aw nf bi"><span id="80e5" class="me mf it nc b gy ng nh l ni nj">enum CatMoods = {meowing, sleepy, playful, curious, angry};</span><span id="fe32" class="me mf it nc b gy nn nh l ni nj"><strong class="nc jd">switch</strong>(myCat.mood) {<br/>  <strong class="nc jd">case</strong> meowing:<br/>    feed(myCat);<br/>    break;<br/>  <strong class="nc jd">catAngerManagement</strong>:  <br/>  <strong class="nc jd">case</strong> playful:<br/>  <strong class="nc jd">case</strong> curious:<br/>    pet(myCat);<br/>    break;<br/>  <strong class="nc jd">case</strong> angry:<br/>    <strong class="nc jd">continue catAngerManagement<br/>  case</strong> sleepy:<br/>    continue;<br/>  <strong class="nc jd">default</strong>:<br/>    takePictures(myCat);<br/>}</span></pre><p id="f149" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在<strong class="lk jd"> switch </strong>语句中使用<strong class="lk jd"> enum </strong> s迫使你处理所有可能的情况。</p><p id="1562" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">非空的<strong class="lk jd"> case </strong>子句通常以<strong class="lk jd"> break </strong>语句结束。也可以以<strong class="lk jd">继续</strong>、<strong class="lk jd">抛出</strong>或<strong class="lk jd">返回</strong>结束。不结束这样的子句会产生错误。</p><p id="3ef5" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">正如我们在上面的例子中看到的，Dart也支持空case子句(<code class="fe nk nl nm nc b">case playful:</code>)。还有一个有趣的<strong class="lk jd">继续</strong>到自定义标签(<code class="fe nk nl nm nc b">catAngerManagement</code>)。</p><p id="5941" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在<strong class="lk jd"> case </strong>语句中声明的任何局部变量只在该子句的范围内可见。</p><p id="7548" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">请注意，<strong class="lk jd"> switch </strong>语句并不像我们预期的那样灵活，那是因为它们<strong class="lk jd">是为有限的环境</strong>设计的，比如在解释器或扫描仪中。</p><h2 id="7182" class="me mf it bd mg mh mi dn mj mk ml dp mm lr mn mo mp lv mq mr ms lz mt mu mv iz bi translated">循环语句</h2><p id="daf2" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">循环允许我们多次运行一段代码。这样做，我们重用代码。</p><p id="bdd5" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">使用<strong class="lk jd"> for </strong>循环可以运行指定的次数:</p><pre class="ks kt ku kv gt nb nc nd ne aw nf bi"><span id="3fb8" class="me mf it nc b gy ng nh l ni nj">import 'dart:math';</span><span id="d803" class="me mf it nc b gy nn nh l ni nj">void weirdMeow() {</span><span id="30c3" class="me mf it nc b gy nn nh l ni nj">  var meow = StringBuffer('M');</span><span id="fd32" class="me mf it nc b gy nn nh l ni nj">  var random = Random.secure();<br/>  <br/>  List&lt;String&gt; meows = &lt;String&gt;['m','e','o', 'w'];<br/>  <br/>  meows.forEach((String m) {<br/>    int l = 1 + random.nextInt(5);<br/>    for (int i = 0; i &lt; l; i++) {<br/>      meow.write(m);<br/>    }<br/>  });<br/>  print('$meow!');<br/>  // prints something like:<br/>  // Mmmmmeeeeeoooooww!</span><span id="4331" class="me mf it nc b gy nn nh l ni nj">}</span></pre><p id="fafa" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">上面，我们已经定义了<strong class="lk jd">古怪喵</strong>函数，每次都会产生不同的<strong class="lk jd">喵</strong>。为此，我们使用一个随机生成器和两种风格的<strong class="lk jd">用于</strong>循环:<strong class="lk jd">用于</strong>和<strong class="lk jd">用于每个</strong>。</p><p id="e340" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">后者可用于一个<strong class="lk jd">可迭代</strong>对象。当我们不需要知道迭代计数器时，使用<strong class="lk jd"> forEach() </strong>非常有用。</p><p id="d048" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd"> Iterable </strong>对象还支持第三种风格的<strong class="lk jd">用于</strong>循环，<strong class="lk jd">用于</strong>—中的<strong class="lk jd">。上述<strong class="lk jd"> forEach </strong>示例变成:</strong></p><pre class="ks kt ku kv gt nb nc nd ne aw nf bi"><span id="a379" class="me mf it nc b gy ng nh l ni nj">// ...<br/>for(String m in meows) {<br/>  int l = 1 + random.nextInt(5);<br/>  for(int i = 0; i &lt; l; i++) {<br/>    meow.write(m);<br/>  }<br/>}<br/>// ...</span></pre><p id="8018" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">使用<strong class="lk jd"> while </strong>循环也可以进行多次迭代。这有两种方式:</p><ul class=""><li id="461f" class="no np it lk b ll lm lo lp lr nq lv nr lz ns md nt nu nv nw bi translated">简单的<strong class="lk jd"> while </strong>循环——在循环之前评估条件，并运行零到任意次数以满足条件</li><li id="a8d8" class="no np it lk b ll nx lo ny lr nz lv oa lz ob md nt nu nv nw bi translated">以及一个<strong class="lk jd">执行</strong> — <strong class="lk jd">同时</strong>循环——该循环评估循环后的条件，至少运行一次</li></ul><pre class="ks kt ku kv gt nb nc nd ne aw nf bi"><span id="61b2" class="me mf it nc b gy ng nh l ni nj">// simple while<br/>while(isTooDark()) {<br/>  bringUpTheLevelOfLightBy(10); <br/>}</span><span id="93fd" class="me mf it nc b gy nn nh l ni nj">// do-while<br/>do {<br/>   bringUpTheLevelOfLightBy(10);<br/>} while(isTooDark());</span></pre><p id="aacd" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">简单的<strong class="lk jd"> while </strong>只会在太暗的情况下提升亮度，相比之下<strong class="lk jd"> do </strong> — <strong class="lk jd"> while </strong>无论如何都会将亮度提升至少10。</p><p id="b4ee" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">中断</strong>和<strong class="lk jd">继续</strong>用于停止循环，或者分别跳到下一次循环迭代。</p><pre class="ks kt ku kv gt nb nc nd ne aw nf bi"><span id="f6c3" class="me mf it nc b gy ng nh l ni nj">&lt;Cat&gt;List cats = &lt;Cat&gt;[simba, micuta, klein, saki];</span><span id="57be" class="me mf it nc b gy nn nh l ni nj">for(Cat currentCat in cats) {<br/>  if(!currentCat.isHungry) {<br/>    <strong class="nc jd">continue</strong>;<br/>  }<br/>  feed(currentCat);<br/>}</span></pre><p id="d928" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在前面的例子中，我们将遍历我们的猫，只喂养饥饿的猫。其他的，我们跳过。</p><p id="fdca" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在开发过程中，我们可以使用以下语法的<strong class="lk jd">断言</strong>语句:</p><pre class="ks kt ku kv gt nb nc nd ne aw nf bi"><span id="8047" class="me mf it nc b gy ng nh l ni nj">assert(<em class="oc">condition</em>, <em class="oc">optionalMessage</em>)<!-- -->;</span></pre><p id="3e6c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在我们的<a class="ae lh" href="https://medium.com/tag/fluttering-dart/archive" rel="noopener">飞镖</a>旅程中，我们已经多次使用它来中断正常的执行，如果布尔条件为假的话。</p><p id="8046" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">如果表达式的值为真，断言成功，执行继续。如果为false，断言将失败并出现异常。</p><p id="8203" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">Flutter在调试模式下启用断言，而诸如<a class="ae lh" href="https://dart.dev/tools/dart2js" rel="noopener ugc nofollow" target="_blank"> <strong class="lk jd"> dart2js </strong> </a>(用于构建web平台)等工具通过命令行标志<code class="fe nk nl nm nc b">--enable-asserts</code>支持断言。</p><p id="81a2" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在生产代码中，断言被忽略，并且不计算<code class="fe nk nl nm nc b">assert</code>的参数</p></div><div class="ab cl od oe hx of" role="separator"><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi"/></div><div class="im in io ip iq"><p id="147e" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在<a class="ae lh" href="https://medium.com/tag/fluttering-dart/archive" rel="noopener"><strong class="lk jd">flying Dart</strong></a>系列的下一部分，我们将深入研究Dart的<a class="ae lh" href="https://medium.com/@constanting/fluttering-dart-oop-8b92cd89a7f0" rel="noopener">类、对象和其他面向对象编程</a>方面。</p><div class="ok ol gp gr om on"><a href="https://medium.com/@constanting/fluttering-dart-oop-8b92cd89a7f0" rel="noopener follow" target="_blank"><div class="oo ab fo"><div class="op ab oq cl cj or"><h2 class="bd jd gy z fp os fr fs ot fu fw jc bi translated">飞舞的飞镖:噢</h2><div class="ou l"><h3 class="bd b gy z fp os fr fs ot fu fw dk translated">类、对象、接口等等</h3></div><div class="ov l"><p class="bd b dl z fp os fr fs ot fu fw dk translated">medium.com</p></div></div><div class="ow l"><div class="ox l oy oz pa ow pb lb on"/></div></div></a></div><p id="f25e" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">就这些！</p></div></div>    
</body>
</html>