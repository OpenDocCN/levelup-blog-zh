<html>
<head>
<title>Making an Ammo System for Your Unity Game</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为你的Unity游戏制作弹药系统</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/making-an-ammo-system-for-your-unity-game-9a6d30789df6?source=collection_archive---------6-----------------------#2021-07-10">https://levelup.gitconnected.com/making-an-ammo-system-for-your-unity-game-9a6d30789df6?source=collection_archive---------6-----------------------#2021-07-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/8b416dd280a008bcf91f6c9603468ca9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Uq2d2Gj5dY69uXLGZq0DEw.gif"/></div></div></figure><div class=""/><p id="72ba" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">开始使用Unity游戏的弹药系统非常简单。现在，玩家可以发射无限量的炮弹。我今天的<strong class="kd jf">目标</strong>是<strong class="kd jf">限制</strong>玩家到<strong class="kd jf"> 15轮</strong>的弹药，同时有一个<strong class="kd jf"> UI元素</strong>反映玩家当前的<strong class="kd jf">弹药量</strong>。</p><p id="e869" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">第一步是创建弹药<strong class="kd jf">限制</strong>。在我的<strong class="kd jf">玩家类</strong> <em class="kz">(脚本)</em>的顶部，我创建了<strong class="kd jf">变量</strong>来存储<strong class="kd jf">值</strong>，这些值表示玩家可以拥有的<strong class="kd jf">最大值</strong><em class="kz">(maxtuskmamy)</em>和<strong class="kd jf">最小值</strong><em class="kz">(mintuskmamy)</em>弹药量，以及<strong class="kd jf">当前值</strong><em class="kz">(currenttuskmamy)</em>我<strong class="kd jf">将<strong class="kd jf">字段</strong>序列化为<strong class="kd jf">最大值</strong>和<strong class="kd jf">当前值</strong>，因为我希望能够在游戏运行时<strong class="kd jf">调整</strong>或者至少<strong class="kd jf">在<strong class="kd jf">检查器</strong>中查看</strong>它们。</strong></p><figure class="lb lc ld le gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi la"><img src="../Images/17d57170d51df7a6e1cc1b06ad2f643e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KDAAjhzvDZQNvsOfiOv5SA.png"/></div></div></figure><p id="0ced" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在我有一些变量要处理，我需要<strong class="kd jf">分配</strong>我的<strong class="kd jf">当前</strong>弹药值为<strong class="kd jf">无效开始</strong>中的<strong class="kd jf">最大</strong>值，这样玩家在游戏开始时就满载了。</p><figure class="lb lc ld le gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi lf"><img src="../Images/9333966d1b56b8b2c3b96a5f6c6a7629.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Xoxs4omhu3RGxuC6AHk02g.png"/></div></div></figure><p id="211d" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">下一步是向下导航到<strong class="kd jf"> FireWeapon </strong>方法。我目前只需要满足一个条件就可以发射我的<strong class="kd jf">三连发</strong>，所以我增加一个现在需要满足的<strong class="kd jf">第二个条件</strong>。现在，三重射击技能需要激活<strong class="kd jf">和</strong><em class="kz">(&amp;&amp;)</em><strong class="kd jf">当前</strong>弹药数需要比<strong class="kd jf">最小</strong>弹药数<em class="kz"> (0) </em>大<strong class="kd jf">。这样，如果玩家没有弹药了，什么都不会发射。</strong></p><figure class="lb lc ld le gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi lg"><img src="../Images/1bd4a91da3273eb35bf1a992a3b45b91.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eUFs9wkmXOAMqeCED7XiQQ.png"/></div></div></figure><p id="6866" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我论证的<strong class="kd jf">如果</strong>部分是处理三连击，<strong class="kd jf">如果</strong>三连击是<strong class="kd jf">主动</strong>。我之前有一个<strong class="kd jf"> else </strong>语句来处理我的<strong class="kd jf">默认獠牙</strong>炮弹，现在我把它改成了一个<strong class="kd jf"> else if </strong>语句，声明如果当前弹药数比<strong class="kd jf">最小</strong>弹药数<strong class="kd jf">大</strong>，常规獠牙就会发射<strong class="kd jf">，就像三重獠牙一样。</strong></p><figure class="lb lc ld le gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi lh"><img src="../Images/8e20a70f03ae0b0e785e1a4d0c032587.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2yy4qpItsnPd3LU1_jz-eQ.png"/></div></div></figure><p id="f682" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我用一个<strong class="kd jf"> else </strong>语句来处理如果玩家在弹药耗尽时试图开火会发生什么。现在，我发送一个<strong class="kd jf">调试。记录</strong>消息到控制台，告诉开发者玩家没有弹药了。然后我有一些<strong class="kd jf">伪代码</strong>来跟进关于<strong class="kd jf">播放</strong>一个<strong class="kd jf">声音剪辑</strong>当玩家没有弹药并且继续射击的时候。</p><figure class="lb lc ld le gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi li"><img src="../Images/d93c9d1dd21dcd80637614df9274f9e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pqxEJgv0JI4ejwlXJuzFXw.png"/></div></div></figure><p id="e5ed" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在那些<strong class="kd jf"> if else </strong>语句之后，但仍然在我的<strong class="kd jf"> FireWeapon </strong>方法内，我用一行简短的代码从<strong class="kd jf">当前</strong>弹药计数中减去1 。</p><figure class="lb lc ld le gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi lj"><img src="../Images/1e2610852c41994e57040af073bdd714.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PklxyXQmGlSDas76b0hlFA.png"/></div></div></figure><p id="eff1" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我不想让弹药计数进入负的T38中，所以在上面处理减法的代码中，我做了一个T40局部变量T41来保存我的T44当前T45弹药计数的<strong class="kd jf">箝位值T43。<strong class="kd jf"> Mathf。夹具</strong>用于保持我的<strong class="kd jf">current amo</strong>变量锁定在声明的<strong class="kd jf">最小值</strong>和<strong class="kd jf">最大值</strong>之间。</strong></p><figure class="lb lc ld le gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi lk"><img src="../Images/879bca13890643d4066cb6c71b3cf7a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n1u99L2X2UEG0eY1oMPcCA.png"/></div></div></figure><p id="16d7" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我<strong class="kd jf">测试</strong>我的游戏，看看是否一切都<strong class="kd jf">正常</strong>由<strong class="kd jf">监视</strong>由<strong class="kd jf">检查员</strong>。正如你在这里看到的，当我<strong class="kd jf">开火</strong>时<strong class="kd jf">当前</strong>弹药数下降到<strong class="kd jf">零</strong>，并且当我继续开火时不会变成负数。</p><figure class="lb lc ld le gt iv gh gi paragraph-image"><div class="gh gi ll"><img src="../Images/ff209bde5361c3d20ac4371a83e6f17f.png" data-original-src="https://miro.medium.com/v2/resize:fit:688/1*xd6UBS1knxafMwPLus_2-A.gif"/></div></figure></div><div class="ab cl lm ln hx lo" role="separator"><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr"/></div><div class="im in io ip iq"><p id="8cd3" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在我的<strong class="kd jf">目标</strong>是添加一些<strong class="kd jf"> UI视觉效果</strong>给玩家展示他们在玩游戏时的<strong class="kd jf">当前</strong>弹药数量。在我的<strong class="kd jf">层级</strong>中，我选择我的<strong class="kd jf">画布</strong>并添加一个<strong class="kd jf">新UI Text Mesh Pro </strong>游戏对象。我把它命名为<strong class="kd jf">象牙弹药文本</strong>。</p><figure class="lb lc ld le gt iv gh gi paragraph-image"><div class="gh gi lt"><img src="../Images/cdaebdec6d68156b7f86f40f133c86dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:552/format:webp/1*HBGiIyn6uAU72IBWHka7HA.png"/></div></figure><p id="6c9e" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">然后<strong class="kd jf">将</strong>固定在左下方，然后<strong class="kd jf">将</strong>定位在我想要的位置。</p><figure class="lb lc ld le gt iv gh gi paragraph-image"><div class="gh gi lu"><img src="../Images/86fc2d25fac710a03477863d67f270a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:664/format:webp/1*GNWeCJm-JUqY7gW3RcWXPA.png"/></div></figure><p id="0a6a" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我在<strong class="kd jf">文本输入</strong>对话框中设置<strong class="kd jf">默认</strong>文本为<em class="kz">"象牙:00" </em>，然后<strong class="kd jf">通过拖拽将</strong>我想要的<strong class="kd jf">字体</strong> <em class="kz"> (Showcard Gothic) </em>分配到<strong class="kd jf">字体资产</strong>槽中。我还调整字体大小来匹配我的其他文本。</p><figure class="lb lc ld le gt iv gh gi paragraph-image"><div class="gh gi lv"><img src="../Images/6db49048749f449de2d4118d75299e6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:684/format:webp/1*i7BbAq6PzzEcE_JbdvIPaA.png"/></div></figure><p id="9631" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我现在准备打开Visual Studio，在我的<strong class="kd jf"> UI Manager类</strong> <em class="kz">【脚本】</em>的顶部添加一个<strong class="kd jf">TMP _ Pro</strong><em class="kz">(Text Mesh Pro)</em><strong class="kd jf">变量</strong>。</p><figure class="lb lc ld le gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi lw"><img src="../Images/cf7e137d30b3805a7c1b0cf227ee385a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jbBVUpE3koViml5LPtfLLw.png"/></div></div></figure><p id="35f1" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在Visual Studio中<strong class="kd jf">保存</strong>之后，我可以返回Unity，并<strong class="kd jf">将<strong class="kd jf">弹药文本</strong>分配给我的<strong class="kd jf"> UI管理器脚本</strong>，方法是将其从<strong class="kd jf">层级</strong>拖放到<strong class="kd jf">检查器</strong>中。</strong></p><figure class="lb lc ld le gt iv gh gi paragraph-image"><div class="gh gi lx"><img src="../Images/783cc4d47f73028df61b28745d11dc44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1246/1*AQ1F_7cNcphnpILLj4eDEg.gif"/></div></figure><p id="d3f7" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">完成任务后，我回到Visual Studio开始工作。我在我的<strong class="kd jf"> UI管理器类</strong>中创建了一个<strong class="kd jf">公共方法</strong>，玩家可以调用它来更新弹药文本。该方法需要传递一个<strong class="kd jf"> int </strong>值来调用它。一旦方法被调用，我就引用<strong class="kd jf">弹药文本</strong>，并使用一些<strong class="kd jf">字符串插值</strong>来告诉它我想要<em class="kz">象牙:</em>被打出，然后插入<strong class="kd jf">当前</strong>象牙计数变量。</p><figure class="lb lc ld le gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ly"><img src="../Images/aaa496b54ddb8cc7a47acb3ba70e1c42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MiSyoZOUcqNvtGPZaIQjYA.png"/></div></div></figure></div><div class="ab cl lm ln hx lo" role="separator"><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr"/></div><div class="im in io ip iq"><p id="5039" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">回到我的<strong class="kd jf">播放器类</strong>，我导航到我的<strong class="kd jf"> FireWeapon </strong>方法的底部，并添加最后的代码。我联系<strong class="kd jf"> UI管理器</strong>，调用<strong class="kd jf">更新弹药</strong>方法并传递<strong class="kd jf">当前弹药</strong>值。我还将这一行代码放在<strong class="kd jf">无效开始</strong>中，就在我<strong class="kd jf">将<strong class="kd jf">弹药数</strong>分配给<strong class="kd jf">最大</strong>的位置之下，因此<strong class="kd jf"> UI </strong>反映了游戏开始时的<strong class="kd jf">最大</strong>弹药数。</strong></p><figure class="lb lc ld le gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi lz"><img src="../Images/1ffec8759d830ea6d7ffea442aa740f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_v94f_CkuaFijv2iYDLAuQ.png"/></div></div></figure><p id="a644" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这是目前为止一切看起来的样子！</p><figure class="lb lc ld le gt iv gh gi paragraph-image"><div class="gh gi ma"><img src="../Images/f9687baeb8a54b439a8430b2063fcfac.png" data-original-src="https://miro.medium.com/v2/resize:fit:886/1*xl56fc4VAbVLHyfie0wyCQ.gif"/></div></figure><p id="efc6" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在我的下一篇文章中，我将展示如何增强与玩家弹药数量相关的UI视觉效果。感谢阅读！</p></div></div>    
</body>
</html>