<html>
<head>
<title>JavaScript Problems — Show/Hide Elements with React, Emitting Custom Events, and More</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript问题——用React显示/隐藏元素，发出自定义事件，等等</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/javascript-problems-show-hide-elements-with-react-emitting-custom-events-and-more-f9f1868611d9?source=collection_archive---------8-----------------------#2020-07-03">https://levelup.gitconnected.com/javascript-problems-show-hide-elements-with-react-emitting-custom-events-and-more-f9f1868611d9?source=collection_archive---------8-----------------------#2020-07-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/8d7928a30bc5edb2e7624c274d4a5f37.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0p5EIGPAoXyKxJQ5"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">卡洛斯·阿方索在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="2a1e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">像任何类型的应用程序一样，当我们编写JavaScript应用程序时，有一些困难的问题需要解决。</p><p id="96a1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本文中，我们将研究一些常见JavaScript问题的解决方案。</p><h1 id="3a25" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">在React中显示或隐藏元素</h1><p id="aeb9" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">要在React中显示或隐藏元素，我们可以设置显示或隐藏状态。</p><p id="fed5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们可以写一个布尔表达式来显示结果。</p><p id="5569" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="b356" class="mq lf it mm b gy mr ms l mt mu">const Results = () =&gt; (<br/>  &lt;div&gt;<br/>    Some Results<br/>  &lt;/div&gt;<br/>)</span><span id="46c5" class="mq lf it mm b gy mv ms l mt mu">const Search = () =&gt; {<br/>  const [showResults, setShowResults] = React.useState(false)<br/>  const onClick = () =&gt; setShowResults(true)<br/>  return (<br/>    &lt;div&gt;<br/>      &lt;button onClick={onClick}&gt;show results&lt;/button&gt;<br/>      { showResults ? &lt;Results /&gt; : undefined }<br/>    &lt;/div&gt;<br/>  )<br/>}</span></pre><p id="1be5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们已经有了我们想要显示的组件。</p><p id="4d98" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们有了带有开关的<code class="fe mw mx my mm b">Search</code>组件来显示<code class="fe mw mx my mm b">Results</code>组件。</p><p id="027f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">只有当<code class="fe mw mx my mm b">showResults</code>是<code class="fe mw mx my mm b">true</code>时才会显示，因为我们有:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="690c" class="mq lf it mm b gy mr ms l mt mu">showResults ? &lt;Results /&gt; : undefined</span></pre><p id="45dc" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">设置某个东西到<code class="fe mw mx my mm b">undefined</code>会让它消失。</p><p id="eec0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mw mx my mm b">useState</code>返回一个数组，第一个条目保存状态值，第二个条目包含设置状态的函数。</p><h1 id="7483" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">获取字符串的最后一个字符</h1><p id="e8ef" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">要获得字符串的最后一个字符，我们可以使用<code class="fe mw mx my mm b">slice</code>方法。</p><p id="9331" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="1ed1" class="mq lf it mm b gy mr ms l mt mu">str.slice(-1);</span></pre><p id="846d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">获取字符串的最后一个字符。</p><p id="0b65" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">-1表示字符串的最后一个索引。</p><p id="6879" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们也可以写:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="0e1f" class="mq lf it mm b gy mr ms l mt mu">str.charAt(str.length - 1)</span></pre><p id="067b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">或者:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="7489" class="mq lf it mm b gy mr ms l mt mu">str[str.length - 1];</span></pre><p id="b741" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">获取最后一个字符。</p><p id="2cf2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们也可以用<code class="fe mw mx my mm b">endWith</code>方法检查最后一个字符是否是给定的字符:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="025c" class="mq lf it mm b gy mr ms l mt mu">str.endsWith("e")</span></pre><h1 id="da9a" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">按关键字对JavaScript对象排序</h1><p id="c277" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以在遍历键时对对象的键进行排序。</p><p id="0b12" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">使用<code class="fe mw mx my mm b">Object.keys</code>，我们得到一个包含对象的所有非继承字符串键的数组。</p><p id="f04d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因此，我们可以对它调用<code class="fe mw mx my mm b">sort</code>方法，按照我们喜欢的方式进行排序。</p><p id="0d91" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="3a42" class="mq lf it mm b gy mr ms l mt mu">Object.keys(unordered)<br/>.sort()<br/>.forEach((key) =&gt; {<br/>  ordered[key] = unordered[key];<br/>});</span></pre><p id="bbbb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">由于非数字键是按照插入顺序排序的，我们可以像以前一样使用<code class="fe mw mx my mm b">forEach</code>将它们插入到一个新的对象中，这个对象的键是有序的。</p><p id="df10" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">对象键的排序顺序是所有数组索引优先。</p><p id="c8b5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后所有不是数组的字符串键按照它们被插入的顺序进行索引。</p><p id="0b05" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们就有了所有符号键的插入顺序。</p><h1 id="8b35" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">触发一个事件</h1><p id="500c" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以通过使用<code class="fe mw mx my mm b">CustomEvent</code>构造函数来触发一个自定义事件。</p><p id="ebc8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以传入数据，用它来发出事件</p><p id="4bc1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="fc53" class="mq lf it mm b gy mr ms l mt mu">const event = new CustomEvent("cat", {<br/>  detail: {<br/>    isFluffy: true<br/>  }<br/>});<br/>obj.dispatchEvent(event);</span></pre><p id="bde5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们用带有第二个参数的对象发出了<code class="fe mw mx my mm b">cat</code>事件。</p><p id="d869" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们可以通过写来听:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="ecd7" class="mq lf it mm b gy mr ms l mt mu">document.addEventListener("cat", (e) =&gt; {<br/>  console.log(e.detail); <br/>});</span></pre><p id="8f77" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们为带有<code class="fe mw mx my mm b">addEventListener</code>的<code class="fe mw mx my mm b">cat</code>事件添加了一个事件监听器。</p><p id="5b3f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">第二个参数是一个回调函数，我们将事件对象作为第二个参数传递给了<code class="fe mw mx my mm b">CustomEvent</code>构造函数。</p><p id="936c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">所以我们可以用<code class="fe mw mx my mm b">detail</code>属性获取值。</p><h1 id="967a" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">检查某个数组索引处是否存在值</h1><p id="39c4" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以通过使用<code class="fe mw mx my mm b">typeof</code>操作符来检查一个值是否存在于给定的数组索引中。</p><p id="f1ab" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="a1a4" class="mq lf it mm b gy mr ms l mt mu">if (typeof array[index] !== 'undefined') {<br/>  //...<br/>}</span></pre><p id="8b8e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">检查给定索引处的项目是否不是<code class="fe mw mx my mm b">'undefined'</code>。</p><p id="0d04" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们还可以通过写下以下内容来检查它是否是<code class="fe mw mx my mm b">undefined</code>而不是<code class="fe mw mx my mm b">null</code>:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="25b8" class="mq lf it mm b gy mr ms l mt mu">if (typeof array[index] !== 'undefined' &amp;&amp; array[index] !== null) {<br/>  //...<br/>}</span></pre><p id="beea" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在我们知道数组在给定的<code class="fe mw mx my mm b">index</code>处有一个值，在我们运行任何东西来处理那个项目之前。</p><h1 id="d2e0" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">计算一个字符在字符串中出现的次数</h1><p id="6f4d" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以用几种方法来搜索字符串中某个字符出现的次数。</p><p id="18aa" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一种方法是使用<code class="fe mw mx my mm b">match</code>方法。</p><p id="b214" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="930b" class="mq lf it mm b gy mr ms l mt mu">"foo,bar.baz".match(/,/g)</span></pre><p id="0c29" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后，我们搜索逗号出现的次数，因为我们使用<code class="fe mw mx my mm b">/,/g</code>作为模式。</p><p id="8c40" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mw mx my mm b">g</code>表示我们搜索一个模式的所有实例。</p><p id="7710" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">同样，我们可以使用<code class="fe mw mx my mm b">RegExp</code>构造函数:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="69ea" class="mq lf it mm b gy mr ms l mt mu">"foo,bar.baz".match(new RegExp(',', 'g')))</span></pre><p id="3f8b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们得到了同样的结果。</p><figure class="mh mi mj mk gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mz"><img src="../Images/51fb08da7b10a8ed06a34ab4e6844588.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ueqx5PaoqiB93cAJ"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">照片由<a class="ae kf" href="https://unsplash.com/@kkk7799?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Kosuke Noma </a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</figcaption></figure><h1 id="1d7c" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">结论</h1><p id="463b" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以通过设置一个状态并添加一个布尔表达式来显示或隐藏React元素。</p><p id="a770" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要获得字符串的最后一个字符，我们可以使用<code class="fe mw mx my mm b">slice</code>或<code class="fe mw mx my mm b">charAt</code>。</p><p id="e04a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">也有一些方法可以检查一个元素是否存在于给定的数组索引中。</p></div></div>    
</body>
</html>