<html>
<head>
<title>React UX: Master the Scroll</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">反应UX:掌握卷轴</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/react-ux-master-the-scroll-1bb636995ae4?source=collection_archive---------6-----------------------#2020-04-27">https://levelup.gitconnected.com/react-ux-master-the-scroll-1bb636995ae4?source=collection_archive---------6-----------------------#2020-04-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="9d03" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">用React钩子漂亮地滚动</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/dc959a352c4d54a876368c6211f58fa8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*o2mqp-ozeBUewjLT0FO-lw.gif"/></div></div></figure><h2 id="5545" class="kr ks iq bd kt ku kv dn kw kx ky dp kz la lb lc ld le lf lg lh li lj lk ll lm bi translated"><strong class="ak">滚动，这是一个在改善我们的应用程序用户体验时经常被忽视的领域。</strong></h2><p id="66e5" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv la lw lx ly le lz ma mb li mc md me mf ij bi translated">看一下上面的前后。“Before”示例是滚动到一个部分的经典<code class="fe mg mh mi mj b">&lt;a href="#______"&gt;</code>方法。当用户选择侧边栏上的链接时，屏幕会快速跳到所选的部分。我们已经完全失去了我们在页面上的位置，就好像我们在看一个全新的页面。部分之间的任何上下文都会丢失，从而影响用户的体验和控制感。</p><p id="9e11" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv la mm lx ly le mn ma mb li mo md me mf ij bi translated">为了保持该部分的上下文公开，我们可以平滑地从一个部分滚动到另一个部分(我们将很快学会如何做)。看一下“之后”的例子。在这里，我们使用React钩子优雅地从一部分滑到另一部分。现在，如果用户点击“联系”，他们将在途中瞥见“关于”部分。通过这样做，用户可以知道他们在页面上的位置，并确保他们在导航时不会错过潜在的有趣的“关于”部分。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/3d40c3659f4dfc173e04d9eaff770bfd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*S-hcK_zN-KjoDlNoawStqA.gif"/></div></div></figure><p id="3c49" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv la mm lx ly le mn ma mb li mo md me mf ij bi translated">看一下上面的例子。两个旋转木马做着完全相同的动作，但是底部的感觉好多了。这是为什么呢？</p><p id="fa90" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv la mm lx ly le mn ma mb li mo md me mf ij bi translated">在“之前”传送带上，用户按下“下一步”按钮，传送带跳转。看起来他有了一套全新的面孔，但我们实际上只移动了一张面孔。这是由于快速直接跳转到下一个项目，这使得我们看起来像是移动到了人脸的“下一页”。这种旋转木马看起来和感觉都很丑，最终会迷惑用户。</p><p id="61d2" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv la mm lx ly le mn ma mb li mo md me mf ij bi translated">在“After”carousel上，通过简单地动画化容器上的scroll属性，我们可以在选择之间得到一个清晰的过渡。一个真正的旋转木马。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mp"><img src="../Images/524ab3edd68fd6933ac0cbe54ebd2513.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*peYYt9Cwa0HkgWS3SYDTLw.png"/></div></div></figure><h2 id="31a2" class="kr ks iq bd kt ku kv dn kw kx ky dp kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">我怎样才能跳过<a href="">转到更友好的钩子滚动方式呢？</a></h2><p id="e132" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv la lw lx ly le lz ma mb li mc md me mf ij bi translated">让我们一步一步地看看，我们如何在我们的React应用程序中实现这项技能(不需要库🎉)</p><p id="9e5d" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv la mm lx ly le mn ma mb li mo md me mf ij bi translated">首先，让我们创建一个react应用程序:</p><p id="cc6d" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv la mm lx ly le mn ma mb li mo md me mf ij bi translated"><code class="fe mg mh mi mj b">npx create-react-app scrolling</code></p><p id="c649" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv la mm lx ly le mn ma mb li mo md me mf ij bi translated">现在导航到<code class="fe mg mh mi mj b">src/App.js</code>，删除返回函数中的所有内容。App.js现在应该是这样的:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="9821" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv la mm lx ly le mn ma mb li mo md me mf ij bi translated">现在让我们给div一些样式并创建三个部分。每个部分将只是一个高度为<code class="fe mg mh mi mj b">100vh</code>的<code class="fe mg mh mi mj b">&lt;h1&gt;</code>。</p><p id="e90d" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv la mm lx ly le mn ma mb li mo md me mf ij bi translated">以下是App.js目前的样子:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="d1e4" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv la mm lx ly le mn ma mb li mo md me mf ij bi translated">这是我们的应用程序目前的样子:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/290da5f29ad2df4e463db3d87cb2ab18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Du0ryWRG0ojrsM0O-c9c6A.gif"/></div></div></figure><p id="b82f" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv la mm lx ly le mn ma mb li mo md me mf ij bi translated">现在我们必须给每个部分一个标识符。在React中，用<code class="fe mg mh mi mj b">ref</code>标识组件比给div一个id更合适。然后可以引用这个<code class="fe mg mh mi mj b">ref</code>来获得关于div的细节，在我们的例子中，我们将检索每个<code class="fe mg mh mi mj b">&lt;h1&gt;</code>的<code class="fe mg mh mi mj b">offsetTop</code>。</p><p id="02e9" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv la mm lx ly le mn ma mb li mo md me mf ij bi translated">为此，我们将使用<code class="fe mg mh mi mj b">useRef</code>钩子。很直白。在文件顶部，更改以下导入内容:</p><p id="972d" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv la mm lx ly le mn ma mb li mo md me mf ij bi translated"><code class="fe mg mh mi mj b">import React from “react”</code></p><p id="d192" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv la mm lx ly le mn ma mb li mo md me mf ij bi translated">收件人:</p><p id="a04d" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv la mm lx ly le mn ma mb li mo md me mf ij bi translated"><code class="fe mg mh mi mj b">import React, { useRef } from “react”</code></p><p id="d09c" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv la mm lx ly le mn ma mb li mo md me mf ij bi translated">现在，我们将在App()函数体中启动三个refs。</p><pre class="kg kh ki kj gt ms mj mt mu aw mv bi"><span id="4245" class="kr ks iq mj b gy mw mx l my mz">function App() {<br/>  const section1Ref = useRef(null)<br/>  const section2Ref = useRef(null)<br/>  const section3Ref = useRef(null)<br/>  <br/>  return (<br/>  ...</span></pre><p id="5119" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv la mm lx ly le mn ma mb li mo md me mf ij bi translated">然后，我们将ref分配给它们对应的部分，这非常简单:</p><pre class="kg kh ki kj gt ms mj mt mu aw mv bi"><span id="95e2" class="kr ks iq mj b gy mw mx l my mz">&lt;h1 ref={section1Ref}&gt;</span></pre><p id="ceaa" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv la mm lx ly le mn ma mb li mo md me mf ij bi translated">App.js现在应该是这样的:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="f967" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv la mm lx ly le mn ma mb li mo md me mf ij bi translated">太好了，现在我们已经拥有了滚动功能的一切。在App()函数的主体中，我们将创建一个滚动函数。它会以一个<code class="fe mg mh mi mj b">ref</code>为参数，将窗口滚动到当前<code class="fe mg mh mi mj b">ref</code>的<code class="fe mg mh mi mj b">offsetTop</code>。<br/>引用的顶部偏移量是指它与其父容器顶部的距离。</p><pre class="kg kh ki kj gt ms mj mt mu aw mv bi"><span id="9402" class="kr ks iq mj b gy mw mx l my mz">function App() {<br/>  const section1Ref = useRef(null)<br/>  const section2Ref = useRef(null)<br/>  const section3Ref = useRef(null)</span><span id="33ea" class="kr ks iq mj b gy na mx l my mz">  const scrollTo = (ref) =&gt; {<br/>    window.scroll({<br/>      top: ref.current.offsetTop,<br/>      behavior: "smooth",<br/>    });<br/>  }</span><span id="07ac" class="kr ks iq mj b gy na mx l my mz">  return (<br/>  ...</span></pre><p id="5124" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv la mm lx ly le mn ma mb li mo md me mf ij bi translated">我们将<code class="fe mg mh mi mj b">behavior</code>属性设置为<code class="fe mg mh mi mj b">smooth</code>来获得漂亮的动画过渡。</p><p id="d834" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv la mm lx ly le mn ma mb li mo md me mf ij bi translated">现在剩下要做的就是触发这个函数并传递给它一个ref。因此，让我们创建一个有三个按钮的固定div，当我们单击它时，它会将我们滚动到一个部分。这是一个示例按钮的外观:</p><pre class="kg kh ki kj gt ms mj mt mu aw mv bi"><span id="0065" class="kr ks iq mj b gy mw mx l my mz">&lt;button onClick={() =&gt; scrollTo(section1Ref)}&gt;Section 1&lt;/button&gt;</span></pre><p id="36c6" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv la mm lx ly le mn ma mb li mo md me mf ij bi translated">单击时，我们调用scrollTo函数并传递给它我们之前声明的<code class="fe mg mh mi mj b">section1Ref</code>。</p><p id="9ba1" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv la mm lx ly le mn ma mb li mo md me mf ij bi translated">就是这样！App.js现在应该是这样的:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mq mr l"/></div><figcaption class="nb nc gj gh gi nd ne bd b be z dk translated">44行代码之后，您现在已经学会了如何在React应用程序中优雅地滚动！</figcaption></figure><p id="3ed7" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv la mm lx ly le mn ma mb li mo md me mf ij bi translated">这个应用程序现在看起来像这样:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/16520cd31acff734a5d5fd1388ecd9c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*RmIj2yFTKY9GzibMbEcAxw.gif"/></div></div></figure><p id="478a" class="pw-post-body-paragraph ln lo iq lp b lq mk jr ls lt ml ju lv la mm lx ly le mn ma mb li mo md me mf ij bi translated">你可以在我的Github 上找到最终代码<a class="ae nf" href="https://github.com/deeayeen/medium-scrolling" rel="noopener ugc nofollow" target="_blank">🎉</a></p><h1 id="2602" class="ng ks iq bd kt nh ni nj kw nk nl nm kz jw nn jx ld jz no ka lh kc np kd ll nq bi translated">滚动只是React UX技能中的一个工具，如果你想了解更多的策略，这里有一篇很棒的文章可供参考:</h1><div class="nr ns gp gr nt nu"><a rel="noopener  ugc nofollow" target="_blank" href="/master-ux-with-react-in-2020-four-ways-to-upgrade-your-react-app-user-experience-a053b3ffbf59"><div class="nv ab fo"><div class="nw ab nx cl cj ny"><h2 class="bd ir gy z fp nz fr fs oa fu fw ip bi translated">2020年React掌握UX:升级React应用用户体验的四种方式</h2><div class="ob l"><h3 class="bd b gy z fp nz fr fs oa fu fw dk translated">如果你的应用程序给用户良好的感觉，他们更有可能继续使用它。</h3></div><div class="oc l"><p class="bd b dl z fp nz fr fs oa fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="od l"><div class="oe l of og oh od oi kp nu"/></div></div></a></div></div></div>    
</body>
</html>