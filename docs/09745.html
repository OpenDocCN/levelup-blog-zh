<html>
<head>
<title>An experiment to reverse engineer a database into an ERD using plantUML</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用plantUML将数据库逆向工程为ERD的实验</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/an-experiment-to-reverse-engineer-a-database-into-an-erd-using-plantuml-9606bd08f961?source=collection_archive---------7-----------------------#2021-09-09">https://levelup.gitconnected.com/an-experiment-to-reverse-engineer-a-database-into-an-erd-using-plantuml-9606bd08f961?source=collection_archive---------7-----------------------#2021-09-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="4f5d" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">活文档在实践中有多容易？</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/19d196255340c3d63c989fdf7d131a0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*O0BM-JFJroNte2P2"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的<a class="ae ky" href="https://unsplash.com/@chuttersnap?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> CHUTTERSNAP </a>拍摄</figcaption></figure><p id="9e42" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://medium.com/geekculture/living-documentation-brief-history-and-evolution-of-the-concept-4492fafb5d7" rel="noopener">live documentation</a>是一个用来描述软件实现、设计及其代表性文档之间的强耦合的术语。这通常是通过使用工具包中的各种部件来自动解析信息并将其从一种格式转换为另一种格式，从而可以将其呈现为图表来实现的。</p><p id="d62e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">问题是:</p><blockquote class="lv lw lx"><p id="6abb" class="kz la ly lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated">在实践中有多容易做到？</p></blockquote><p id="0f29" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，我决定通过对数据库(而不是代码)进行逆向工程的实验来了解这些复杂性和问题。</p><h1 id="feba" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">目标</h1><p id="4cb5" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">绘制一个<a class="ae ky" href="https://www.visual-paradigm.com/guide/data-modeling/what-is-entity-relationship-diagram/" rel="noopener ugc nofollow" target="_blank">实体关系图</a> (ERD)显示SQL数据库的模式，使用现有的标准和脚本，并根据需要添加一些定制的粘合代码。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mz"><img src="../Images/9ed230fd85acb1cff1fb3c8161f47b66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fnxQCpTrNdOwNY3o2QXyaw.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">文章作者图片</figcaption></figure><h1 id="40c0" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">建还是买？</h1><p id="5ea1" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">第一步是看看我能找到什么工具来完成整个工作或部分工作。</p><p id="ea88" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一次互联网搜索发现了一些工具，它们可以连接到一个正在运行的数据库(一个非常特殊的类型)并生成一个图表，但是我想从模式中生成一个图表。这将允许在数据库实现之前记录设计，并且在数据库创建之后记录数据库。这开启了未来全往返工程的可能性。</p><p id="4400" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将<a class="ae ky" href="https://en.wikipedia.org/wiki/Data_definition_language" rel="noopener ugc nofollow" target="_blank"> SQL DDL </a>从数据库中转储出来以获得模式是相对简单的，因此这将是一个起点。</p><p id="c1e0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设SQL可以被解析成某种类型的<a class="ae ky" href="https://www.markdownguide.org/basic-syntax/" rel="noopener ugc nofollow" target="_blank"> markdown </a>并存储为一个文件，那么可以使用可用的脚本和<a class="ae ky" href="https://doctoolchain.github.io/docToolchain/" rel="noopener ugc nofollow" target="_blank">工具</a>之一将其呈现为一个图像或富文档。</p><p id="229d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有几个常见的降价标准可供选择:</p><ul class=""><li id="b8e5" class="na nb it lb b lc ld lf lg li nc lm nd lq ne lu nf ng nh ni bi translated"><a class="ae ky" href="https://www.markdownguide.org/basic-syntax/" rel="noopener ugc nofollow" target="_blank">降价</a>以文本格式显示一组<strong class="lb iu">基本</strong>表格信息</li><li id="2a5c" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">markdown带有<a class="ae ky" href="https://mermaid-js.github.io/mermaid/#/" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu">人鱼</strong> </a>扩展支持显示图表</li><li id="5006" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">用<a class="ae ky" href="https://plantuml.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu"> plantUML </strong> </a>扩展支持显示图表</li></ul><p id="5e38" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因为我想创建一个实体关系图来显示表、它们的列以及与其他表的关系，所以我选择了<a class="ae ky" href="https://plantuml.com/" rel="noopener ugc nofollow" target="_blank"> plantUML </a>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mz"><img src="../Images/1eda10a7dcdac513898b81aa6ecb89fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B_5JbTvtRGg-3Tp6evpnSw.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">文章作者图片</figcaption></figure><h1 id="ed6a" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">设计方法和原则</h1><p id="ee43" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated"><strong class="lb iu">决策1 </strong>:用哪种语言编写软件来解析SQL？</p><p id="cfc1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我决定使用模式处理语言，假设输入文件到输出文件的映射很简单，几乎是1:1的转换。</p><p id="af72" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://en.wikipedia.org/wiki/AWK" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu"> awk </strong> </a>是一种脚本语言，即使用任何文本编辑器或IDE进行解释以创建文件。它是为文本处理而设计的，是unix/linux系统的标准特性，类似于C。</p><p id="cac5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">决策2 </strong>:解决方案设计</p><p id="edd8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由于这是一个简单的实验，我提出了一个非常简单的结构，它基于这样一个假设，即一个SQL命令可以一次性处理到相应的一行或多行降价文本。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mz"><img src="../Images/7b28a09766f411d8567a63074850d59c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GoMA4Q2c_qTd_kv7FNeDrg.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">文章作者图片</figcaption></figure><h1 id="5a62" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">准备</h1><p id="c71c" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">通过检查版本(-V标志)来检查awk是否已安装/可用</p><pre class="kj kk kl km gt no np nq nr aw ns bi"><span id="42c1" class="nt md it np b gy nu nv l nw nx">awk -V</span></pre><p id="d102" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在Windows上使用WSL，看看结果</p><pre class="kj kk kl km gt no np nq nr aw ns bi"><span id="b713" class="nt md it np b gy nu nv l nw nx">awk -V<br/>GNU Awk 5.0.1, API: 2.0 (GNU MPFR 4.0.2, GNU MP 6.2.0)<br/>Copyright (C) 1989, 1991-2019 Free Software Foundation.</span><span id="b048" class="nt md it np b gy ny nv l nw nx">This program is free software; you can redistribute it and/or modify<br/>it under the terms of the GNU General Public License as published by<br/>the Free Software Foundation; either version 3 of the License, or<br/>(at your option) any later version.</span><span id="ca1b" class="nt md it np b gy ny nv l nw nx">This program is distributed in the hope that it will be useful,<br/>but WITHOUT ANY WARRANTY; without even the implied warranty of<br/>MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the<br/>GNU General Public License for more details.</span><span id="3c44" class="nt md it np b gy ny nv l nw nx">You should have received a copy of the GNU General Public License<br/>along with this program. If not, see <a class="ae ky" href="http://www.gnu.org/licenses/" rel="noopener ugc nofollow" target="_blank">http://www.gnu.org/licenses/</a>.</span></pre><p id="9c04" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">或者在windows上使用Gnu版本，<a class="ae ky" href="http://gnuwin32.sourceforge.net/packages/gawk.htm" rel="noopener ugc nofollow" target="_blank">呆呆</a></p><h1 id="949f" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">履行</h1><p id="97fc" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">awk文件写得很快，在一个文件中只包含几个函数(<em class="ly"> sql2puml.awk </em>)，代码可以被重构为更压缩、更易读的格式，但这一步没有完成。</p><p id="015d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这段代码处理了一个SQL命令，间隔了几行，但只是为了处理sqlite格式的SQL而构建的，因为这只是一个原则测试。</p><p id="7b60" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了使最终图像的样式更加简单，使用了plantuml函数，所有的样式元素都在一个地方预先定义好了。</p><p id="eb99" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，解析SQL命令只需将命令分解成组成部分。主要重点是扫描CREATE TABLE命令支持plantuml格式的输出文本:</p><pre class="kj kk kl km gt no np nq nr aw ns bi"><span id="d763" class="nt md it np b gy nu nv l nw nx">define_primary_key(x)- to style a column that holds a primary key<br/>define foreign_key(x) - to style a column that holds a foreign key<br/>define_column(x) - to define a column in a table<br/>define_table(x) - to define a table</span></pre><p id="0a8e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，在plantuml中，单个表可以描述为:</p><pre class="kj kk kl km gt no np nq nr aw ns bi"><span id="84f1" class="nt md it np b gy nu nv l nw nx">table( table4_3_cols_and_pk ) { <br/>primary_key ( id ): INT<br/>column ( firstname ): VARCHAR(100<br/>column ( lastname ): VARCHAR(100)<br/>}</span></pre><p id="645f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后将呈现为:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/9d8f36f2d03a1caf67eb1d8173011766.png" data-original-src="https://miro.medium.com/v2/resize:fit:474/format:webp/1*_DakNxkbj4_Pggwh6MVfPw.jpeg"/></div></figure><p id="9e0b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通过使用<a class="ae ky" href="http://plantuml.com/guide" rel="noopener ugc nofollow" target="_blank"> <em class="ly"> skinparam </em> </a>命令应用样式规则，渲染图像可以从默认颜色改变:</p><pre class="kj kk kl km gt no np nq nr aw ns bi"><span id="f3ef" class="nt md it np b gy nu nv l nw nx">skinparam roundcorner 5<br/>skinparam linetype ortho<br/>skinparam shadowing false<br/>skinparam handwritten false<br/>skinparam class {<br/> BackgroundColor white<br/> ArrowColor #2688d4<br/> BorderColor #2688d4<br/>}</span></pre><p id="d644" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，它呈现为:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/67e959f88d36d7a3124dcdbd0b6d2d5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:474/format:webp/1*vOfCtEbq80xGjgPb-ryf5g.jpeg"/></div></figure><p id="6791" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">两个表之间的关系将用plantuml语法描述如下:</p><pre class="kj kk kl km gt no np nq nr aw ns bi"><span id="f630" class="nt md it np b gy nu nv l nw nx">table1  }|--|| table2</span></pre><p id="8b85" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">完整的文件可以在https://github.com/gbmav/sql2puml<a class="ae ky" href="https://github.com/gbmav/sql2puml" rel="noopener ugc nofollow" target="_blank"/>的github上获得</p><h1 id="f667" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">试验</h1><p id="b969" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">为了确保代码可以处理一些基本的图表，我创建了一个测试向量文件，显示各种表格组合。</p><pre class="kj kk kl km gt no np nq nr aw ns bi"><span id="3168" class="nt md it np b gy nu nv l nw nx">CREATE TABLE table1_single_column (id <em class="ly">INT </em>);<br/>CREATE TABLE table2_single_column_multi_line_sql (<br/>id <em class="ly">INT </em>);<br/><br/>CREATE TABLE table3_3_cols (id1 <em class="ly">INT </em>, firstname2 <em class="ly">VARCHAR</em>(100), lastname3 <em class="ly">VARCHAR</em>(100) );<br/>CREATE TABLE table4_3_cols_and_pk (id <em class="ly">INT </em>PRIMARY KEY, firstname <em class="ly">VARCHAR</em>(100), lastname <em class="ly">VARCHAR</em>(100) );<br/>CREATE TABLE table5_3_cols_pk_in_last_col ( firstname <em class="ly">VARCHAR</em>(100), lastname <em class="ly">VARCHAR</em>(100), id <em class="ly">INT </em>PRIMARY KEY );<br/><br/>CREATE TABLE table11 ( id <em class="ly">INT</em>, townname <em class="ly">VARCHAR </em>(100), county <em class="ly">VARCHAR</em>(100) );<br/>CREATE TABLE table10_pk_and_fk (id <em class="ly">INT </em>PRIMARY KEY, firstname <em class="ly">VARCHAR</em>(100), lastname <em class="ly">VARCHAR</em>(100) , town_id <em class="ly">INT</em>, FOREIGN KEY (town_id) REFERENCES table11(id));<br/><br/><br/>CREATE TABLE table14 ( id <em class="ly">INT</em>, country <em class="ly">VARCHAR </em>(100));<br/>CREATE TABLE table13_fk ( id <em class="ly">INT</em>, townname <em class="ly">VARCHAR </em>(100), county <em class="ly">VARCHAR</em>(100), country_id <em class="ly">INT </em>, FOREIGN KEY (country_id) REFERENCES table14(id) );<br/>CREATE TABLE table12_fk (id <em class="ly">INT </em>PRIMARY KEY, firstname <em class="ly">VARCHAR</em>(100), lastname <em class="ly">VARCHAR</em>(100) , town_id <em class="ly">INT </em>,FOREIGN KEY (town_id) REFERENCES table13_fk(id));<br/><br/>CREATE TABLE table15_fk_to_missing_table (id <em class="ly">INT </em>PRIMARY KEY,first_name <em class="ly">VARCHAR</em>(100) NOT NULL,last_name <em class="ly">VARCHAR</em>(100) NOT NULL,city_id <em class="ly">INT </em>,FOREIGN KEY (city_id) REFERENCES city(id) );</span></pre><h1 id="8104" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">执行</h1><p id="972c" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">该软件是使用</p><pre class="kj kk kl km gt no np nq nr aw ns bi"><span id="33f2" class="nt md it np b gy nu nv l nw nx">awk -f sql2puml.awk sql-test-vectors.sql &gt; sql-test-vectors.puml</span></pre><h1 id="9495" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">实验结果</h1><p id="d1ee" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">然后，通过在带有相关插件(例如pycharm、Visual Studio)的IDE中打开文件或使用plantuml网站，可以将输出文件作为渲染图像进行查看。</p><p id="29fe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面的<a class="ae ky" href="http://www.plantuml.com/plantuml/proxy?cache=no&amp;src=https://raw.githubusercontent.com/gbmav/sql2puml/master/sql-test-vectors.puml" rel="noopener ugc nofollow" target="_blank">命令</a>发送输出文件(。puml扩展)到plantuml服务器，以作为图像呈现。</p><pre class="kj kk kl km gt no np nq nr aw ns bi"><span id="5533" class="nt md it np b gy nu nv l nw nx"><a class="ae ky" href="http://www.plantuml.com/plantuml/proxy?cache=no&amp;src=https://raw.githubusercontent.com/gbmav/sql2puml/master/sql-test-vectors.puml" rel="noopener ugc nofollow" target="_blank">http://www.plantuml.com/plantuml/proxy?cache=no&amp;src=https://raw.githubusercontent.com/gbmav/sql2puml/master/sql-test-vectors.puml</a></span></pre><p id="ab87" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">plantuml站点laso有一个<a class="ae ky" href="http://www.plantuml.com/plantuml/uml/pLLTQzim57tthxYZC19OQPoF4eenpVgolUoXbBqAnP8J4LdAf1iSq_I_JugJr8uCtc259I_nlUVeV0ZYHulKuAwGaUGv0cemOhL6OCBm38LMaTq8jQM65c3qJh5C6yKDp1fpAHJ7Qij16rphniAkATEbK2l8gRIyiLbJnKeZ4BaATfcari9h15zfjbaTHP-qr0RAjK0UmS8ONTQJc_7zVCwc3geDuwOzV8i-CPuxRx0reg2c8XjU3VP3I9PfaddemyroFh-FtUDdjqgJk-CqXNrojqmlx5mRBbRgp3vJwV4JK2yqDzWLgidWkVywHi6PeBUkOEUwYufqARbdSeK2AzX3ai3WvKlTm13IDAeXDJ8crdKiEQabOGYl49r-3q0m63x0znylhf0MRTocaM8dKH1_cSJ-adzwoeHC_04smCTdmcMM2sDHqOAF_Uhduldfs-9v48z6xn19QyJa2Z6ybfsUP0bLZ6mtjNhZdbkMGmUz1lhqPoTzfqs48fxcdsiV_qAlEqjGVnm7nGUfKPVgIkDzcUcTmgelRZpoGNtN-STttNPEcjaxtC3RuVRsS3ZNqROzxMsdBi0q6mZ2JxpEHzGSkEWAEmbJJjl-nl_7hOn3ezvxs-lCJGXgKWZh_tx8SVetvacF-m0HL2smg-TkPvSydXKzSiNyk_8t" rel="noopener ugc nofollow" target="_blank">交互式在线编辑器</a>，用于输入降价文本并显示相应的图像，这对于在将样式更改编码到软件中之前测试样式更改非常有用。</p><div class="oa ob gp gr oc od"><a href="http://www.plantuml.com/plantuml/uml/pLLTQzim57tthxYZC19OQPoF4eenpVgolUoXbBqAnP8J4LdAf1iSq_I_JugJr8uCtc259I_nlUVeV0ZYHulKuAwGaUGv0cemOhL6OCBm38LMaTq8jQM65c3qJh5C6yKDp1fpAHJ7Qij16rphniAkATEbK2l8gRIyiLbJnKeZ4BaATfcari9h15zfjbaTHP-qr0RAjK0UmS8ONTQJc_7zVCwc3geDuwOzV8i-CPuxRx0reg2c8XjU3VP3I9PfaddemyroFh-FtUDdjqgJk-CqXNrojqmlx5mRBbRgp3vJwV4JK2yqDzWLgidWkVywHi6PeBUkOEUwYufqARbdSeK2AzX3ai3WvKlTm13IDAeXDJ8crdKiEQabOGYl49r-3q0m63x0znylhf0MRTocaM8dKH1_cSJ-adzwoeHC_04smCTdmcMM2sDHqOAF_Uhduldfs-9v48z6xn19QyJa2Z6ybfsUP0bLZ6mtjNhZdbkMGmUz1lhqPoTzfqs48fxcdsiV_qAlEqjGVnm7nGUfKPVgIkDzcUcTmgelRZpoGNtN-STttNPEcjaxtC3RuVRsS3ZNqROzxMsdBi0q6mZ2JxpEHzGSkEWAEmbJJjl-nl_7hOn3ezvxs-lCJGXgKWZh_tx8SVetvacF-m0HL2smg-TkPvSydXKzSiNyk_8t" rel="noopener  ugc nofollow" target="_blank"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd iu gy z fp oi fr fs oj fu fw is bi translated">PlantUML Web服务器</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">借助PlantUML Web服务器，从浏览器中简单自由地创建UML图。只需输入一个文本图表，然后…</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">www.plantuml.com</p></div></div><div class="om l"><div class="on l oo op oq om or ks od"/></div></div></a></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi os"><img src="../Images/fe4a366c388bebf613d7583bd0b6b4c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h0-16UOUpxzpToMedyXuTg.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">文章作者图片</figcaption></figure><ul class=""><li id="5e66" class="na nb it lb b lc ld lf lg li nc lm nd lq ne lu nf ng nh ni bi translated">输出减价被渲染成可视图像。</li><li id="81a8" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">表示表格的图表框可以使用plantUMl命令进行样式化。</li><li id="57cb" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">ERD的基础-表、列和关系可以使用这种方法来表示。</li><li id="a5aa" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">样式的使用使得图表更容易阅读。</li></ul><h1 id="fd83" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">实验总结</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mz"><img src="../Images/a1affd946dc0e186b29fa19129c8bf98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OeMfL_iko2-qJ8CvsJul8w.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">文章作者图片</figcaption></figure><h1 id="f291" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">反思和后续步骤</h1><p id="09cf" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">在建立了这个模型并证明了这个概念的可行性之后，我很想开始用更多的改进来更新它，但是我决定是时候停下来回顾一下到目前为止的结果和选择了。</p><ul class=""><li id="e354" class="na nb it lb b lc ld lf lg li nc lm nd lq ne lu nf ng nh ni bi translated">当表有关系，并且关系与另一个还没有定义的表相关时，将单行作为原子单位的简单处理是不够的。</li><li id="d362" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">SQL中的错误(如与缺失表的关系)可以得到更好的处理，并清楚地显示在结果输出中。</li><li id="d1d2" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">该软件并没有真正使用awk的模式处理能力，因此可能更适合用不同的语言编写。</li><li id="527b" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">产生各种各样的输出格式(markdown tables、mermaid或plantuml)将是相当直接的，这将给软件带来更多的吸引力和灵活性。</li><li id="471c" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">该软件仅使用针对<a class="ae ky" href="https://www.sqlite.org/index.html" rel="noopener ugc nofollow" target="_blank"> <strong class="lb iu"> sqlite数据库</strong> </a>格式化的SQL进行了测试，因此需要针对其他风格的SQL进行测试和功能增强，以使其更加通用。</li><li id="a1e6" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">代码没有进行重构，也没有用非常清晰的变量命名来编写，并且包含了大量注释掉的代码片段和调试，这些代码在实验结束时没有被删除。</li><li id="9f01" class="na nb it lb b lc nj lf nk li nl lm nm lq nn lu nf ng nh ni bi translated">作者没有花很长时间就得到一个可以实现这个实验目标的工作软件。</li></ul><p id="477e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">总的来说，编写软件来处理SQL文件并生成ERD是非常容易的，该软件可以显示为图像，或者基于markdown格式进一步转换为其他文档格式(例如Microsoft Word)来描述表格和关系。考虑到像这样的工具的好处，令人惊讶的是还没有可以执行这项任务的东西，这表明活文档没有被广泛地实现。脚本和工具包的可用性表明，爱好者或积极的个人可以快速组装必要的解决方案，但它还没有下架。</p><h1 id="6b28" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">进一步阅读</h1><ul class=""><li id="9db5" class="na nb it lb b lc mu lf mv li ot lm ou lq ov lu nf ng nh ni bi translated">本文中的代码和测试文件可以在https://github.com/gbmav/sql2puml<a class="ae ky" href="https://github.com/gbmav/sql2puml" rel="noopener ugc nofollow" target="_blank">的github上获得</a></li></ul><div class="oa ob gp gr oc od"><a href="https://medium.com/geekculture/are-there-any-living-documentation-tools-for-databases-220cee7dc8f6" rel="noopener follow" target="_blank"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd iu gy z fp oi fr fs oj fu fw is bi translated">有没有什么活的数据库文档工具？</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">如何记录新的设计和逆向工程现有的数据库和表格</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">medium.com</p></div></div><div class="om l"><div class="ow l oo op oq om or ks od"/></div></div></a></div><div class="oa ob gp gr oc od"><a href="https://medium.com/geekculture/code-as-diagrams-whats-the-point-13dbe6053738" rel="noopener follow" target="_blank"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd iu gy z fp oi fr fs oj fu fw is bi translated">以图表形式编码——有什么意义？</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">活文档—第3部分</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">medium.com</p></div></div><div class="om l"><div class="ox l oo op oq om or ks od"/></div></div></a></div><div class="oa ob gp gr oc od"><a href="https://medium.com/geekculture/living-documentation-brief-history-and-evolution-of-the-concept-4492fafb5d7" rel="noopener follow" target="_blank"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd iu gy z fp oi fr fs oj fu fw is bi translated">活文档——概念的简史和演变</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">第一部分</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">medium.com</p></div></div><div class="om l"><div class="oy l oo op oq om or ks od"/></div></div></a></div><h1 id="a391" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">关于作者的更多信息</h1><p id="71a9" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated"><strong class="lb iu"> Greg </strong>是一名经验丰富的软件专业人士，也是<a class="ae ky" href="https://outsource.dev/" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu">outsource . dev</strong></a><strong class="lb iu">，</strong>的首席技术官，他曾在多家公司工作过，现在热衷于帮助他人在软件开发、管理和外包方面取得成功。他刚刚写了一本名为“<a class="ae ky" href="https://www.amazon.co.uk/dp/B09CRXYK36/ref=as_sl_pc_qf_sp_asin_til?tag=osduk0a-21&amp;linkCode=w00&amp;linkId=d2a648c5bb793e3ed7b3bd6f5290f329&amp;creativeASIN=B09CRXYK36" rel="noopener ugc nofollow" target="_blank"><strong class="lb iu"/></a>”的短篇小说。</p><p id="53fb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你喜欢这篇文章，请鼓掌👏和<strong class="lb iu">关注</strong>我或者<a class="ae ky" href="https://greg-billington.medium.com/subscribe" rel="noopener"> <strong class="lb iu">订阅</strong> </a>一封邮件✉️。</p></div></div>    
</body>
</html>