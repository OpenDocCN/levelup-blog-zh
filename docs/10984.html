<html>
<head>
<title>Advanced tips for SpecFlow and Behavior-Driven Development in .NET</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">中SpecFlow和行为驱动开发的高级技巧。网</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/advanced-tips-for-specflow-and-behavior-driven-development-in-net-3dcf93dc2655?source=collection_archive---------15-----------------------#2022-02-02">https://levelup.gitconnected.com/advanced-tips-for-specflow-and-behavior-driven-development-in-net-3dcf93dc2655?source=collection_archive---------15-----------------------#2022-02-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="13f9" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">SpecFlow和您的C#代码的专业技巧！</h2><div class=""/><div class=""><h2 id="8b57" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">我们将关注场景上下文、安装和拆卸、ide中的导航，以及在步骤定义中使用参数。</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/a4fc25a8a63b444745725b3eeaf00d83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ZS_YH_QWcpRjHzkq"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">马库斯·斯皮斯克在<a class="ae lh" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="f799" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">你可能已经看过我的另一篇关于行为驱动开发的文章。NET，这是一个关于如何为你设置它的教程。在这篇文章中，除了基础知识之外，我将给出更多的技巧，来提高你编写好的测试和更快地调试失败测试的能力。</p><div class="me mf gp gr mg mh"><a href="https://xeladu.medium.com/behaviour-driven-development-bdd-with-c-and-specflow-1bb2deb13024" rel="noopener follow" target="_blank"><div class="mi ab fo"><div class="mj ab mk cl cj ml"><h2 class="bd jd gy z fp mm fr fs mn fu fw jc bi translated">使用C#和SpecFlow的行为驱动开发(BDD)</h2><div class="mo l"><h3 class="bd b gy z fp mm fr fs mn fu fw dk translated">这是一个关于如何在. NET应用程序中使用C#和SpecFlow的行为驱动开发(BDD)的介绍指南。</h3></div><div class="mp l"><p class="bd b dl z fp mm fr fs mn fu fw dk translated">xeladu.medium.com</p></div></div><div class="mq l"><div class="mr l ms mt mu mq mv lb mh"/></div></div></a></div><h2 id="2715" class="mw mx it bd my mz na dn nb nc nd dp ne lr nf ng nh lv ni nj nk lz nl nm nn iz bi translated">使用场景上下文/功能上下文</h2><p id="6631" class="pw-post-body-paragraph li lj it lk b ll no kd ln lo np kg lq lr nq lt lu lv nr lx ly lz ns mb mc md im bi translated"><a class="ae lh" href="https://docs.specflow.org/projects/specflow/en/latest/Bindings/ScenarioContext.html#scenariocontext" rel="noopener ugc nofollow" target="_blank"> ScenarioContext </a>是一个状态对象，只要场景运行，它就存在。您可以使用它作为一个<code class="fe nt nu nv nw b">Dictionary&lt;string, object&gt;</code>在步骤之间传递数据，这样您就不需要在您的步骤类中定义私有字段。<br/>要访问ScenarioContext，将其注入绑定类并保存对它的引用。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="1450" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">ScenarioContext的一个有用属性是<code class="fe nt nu nv nw b">CurrentScenarioBlock </code>属性。它允许你区分<code class="fe nt nu nv nw b">Given</code>、<code class="fe nt nu nv nw b">When</code>和<code class="fe nt nu nv nw b">Then</code>块。<br/>有一个类似的对象<a class="ae lh" href="https://docs.specflow.org/projects/specflow/en/latest/Bindings/FeatureContext.html" rel="noopener ugc nofollow" target="_blank"> FeatureContext </a>，和ScenarioContext基本相同，但是只要特性运行它就存在。如果您有与几个场景相关的数据，那么您可以使用FeatureContext。</p><h2 id="4fd3" class="mw mx it bd my mz na dn nb nc nd dp ne lr nf ng nh lv ni nj nk lz nl nm nn iz bi translated">安装和拆卸的可能性</h2><p id="d5e1" class="pw-post-body-paragraph li lj it lk b ll no kd ln lo np kg lq lr nq lt lu lv nr lx ly lz ns mb mc md im bi translated">典型的单元测试框架，如MsTest或NUnit，允许您为每个测试和每个测试类定义安装和拆卸方法。SpecFlow提供了相同的功能，它们被称为<a class="ae lh" href="https://docs.specflow.org/projects/specflow/en/latest/Bindings/Hooks.html" rel="noopener ugc nofollow" target="_blank">钩子</a>。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="nx ny l"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">SpecFlow测试中所有可用的挂钩类型</figcaption></figure><p id="14dc" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">为了准备一个数据库，您可能会选择<code class="fe nt nu nv nw b">[BeforeTestRun]</code>和<code class="fe nt nu nv nw b">[AfterTestRun]</code>属性。在每个特性或场景之前，你可能想要重置数据，所以你应该使用<code class="fe nt nu nv nw b">[BeforeFeature]/[BeforeScenario]</code>和<code class="fe nt nu nv nw b">[AfterFeature]/[AfterScenario]</code>属性。</p><h2 id="a713" class="mw mx it bd my mz na dn nb nc nd dp ne lr nf ng nh lv ni nj nk lz nl nm nn iz bi translated">使用IDE</h2><p id="fb42" class="pw-post-body-paragraph li lj it lk b ll no kd ln lo np kg lq lr nq lt lu lv nr lx ly lz ns mb mc md im bi translated"><a class="ae lh" href="https://marketplace.visualstudio.com/items?itemName=TechTalkSpecFlowTeam.SpecFlowForVisualStudio2022" rel="noopener ugc nofollow" target="_blank"> SpecFlow </a>扩展添加了一些不错的特性，您应该使用它们来提高工作效率。</p><ul class=""><li id="b722" class="nz oa it lk b ll lm lo lp lr ob lv oc lz od md oe of og oh bi translated">当您在功能文件的某一行中单击并按F12键(或CTRL + Click)时，IDE会直接跳转到绑定方法。</li><li id="9a81" class="nz oa it lk b ll oi lo oj lr ok lv ol lz om md oe of og oh bi translated">要查找一个绑定方法的所有引用，右键单击该方法并选择<strong class="lk jd">查找步骤定义用法</strong>。</li><li id="d01d" class="nz oa it lk b ll oi lo oj lr ok lv ol lz om md oe of og oh bi translated">没有绑定方法的特征文件中的线具有不同的文本颜色。在编辑器中点击右键，选择<strong class="lk jd">定义步骤</strong>，即可生成方法。</li><li id="db40" class="nz oa it lk b ll oi lo oj lr ok lv ol lz om md oe of og oh bi translated">您可以在特性文件中放置断点，测试执行将在该步骤执行之前停止。</li></ul><h2 id="96ad" class="mw mx it bd my mz na dn nb nc nd dp ne lr nf ng nh lv ni nj nk lz nl nm nn iz bi translated">在步骤定义中使用多个参数</h2><p id="6356" class="pw-post-body-paragraph li lj it lk b ll no kd ln lo np kg lq lr nq lt lu lv nr lx ly lz ns mb mc md im bi translated">要将多个值作为参数传递给步骤定义，您需要在您的特征文件中定义一个<a class="ae lh" href="https://docs.specflow.org/projects/specflow/en/latest/Gherkin/Gherkin-Reference.html#data-tables" rel="noopener ugc nofollow" target="_blank">数据表</a>。请参见下面的示例。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="nx ny l"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">带有数据表的特征文件</figcaption></figure><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="nx ny l"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">访问数据表的项</figcaption></figure><h2 id="2e63" class="mw mx it bd my mz na dn nb nc nd dp ne lr nf ng nh lv ni nj nk lz nl nm nn iz bi translated">运行具有不同参数的方案</h2><p id="7975" class="pw-post-body-paragraph li lj it lk b ll no kd ln lo np kg lq lr nq lt lu lv nr lx ly lz ns mb mc md im bi translated">要使用不同的参数多次运行一个场景，您需要定义一个<a class="ae lh" href="https://docs.specflow.org/projects/specflow/en/latest/Gherkin/Gherkin-Reference.html#scenario-outline" rel="noopener ugc nofollow" target="_blank">场景大纲</a>。每个占位符必须匹配<code class="fe nt nu nv nw b">Examples</code>表中的一列。请参见下面的示例。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="nx ny l"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">使用表定义多个方案运行。</figcaption></figure><p id="a057" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">该场景将针对表中的每一行运行。因此，如果您需要更多的测试用例，只需再添加一行即可。</p><h2 id="5f0b" class="mw mx it bd my mz na dn nb nc nd dp ne lr nf ng nh lv ni nj nk lz nl nm nn iz bi translated">结论</h2><p id="b983" class="pw-post-body-paragraph li lj it lk b ll no kd ln lo np kg lq lr nq lt lu lv nr lx ly lz ns mb mc md im bi translated">这些是我在编写测试时使用SpecFlow提高生产率的高级技巧。如果你喜欢这篇文章，我会很高兴得到掌声👏另外，如果你还没跟上我，我也很感激。</p><p id="667a" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">🌲<a class="ae lh" href="https://linktr.ee/xeladu" rel="noopener ugc nofollow" target="_blank"> linktr.ee </a> |☕ <a class="ae lh" href="https://www.buymeacoffee.com/xeladu" rel="noopener ugc nofollow" target="_blank">咖啡</a> |🎁<a class="ae lh" href="https://www.paypal.com/donate/?hosted_button_id=JPWK39GGPAAFQ" rel="noopener ugc nofollow" target="_blank">捐赠</a> |💻GitHub  |🔔<a class="ae lh" href="https://xeladu.medium.com/subscribe" rel="noopener">订阅</a></p><p id="1886" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">顺便说一句:如果你还没有Medium会员，我推荐你使用<a class="ae lh" href="https://medium.com/@xeladu/membership" rel="noopener">│我的推荐链接◀ </a> <strong class="lk jd"> <em class="on"> </em> </strong>，因为它会让你访问Medium上的所有内容，并以一小部分费用支持我，而不会为你带来任何额外费用。谢谢大家！✨</p></div></div>    
</body>
</html>