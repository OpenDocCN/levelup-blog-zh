<html>
<head>
<title>A practical guide on using TensorFlow.js models in offline applications</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在脱机应用程序中使用TensorFlow.js模型的实用指南</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/use-tensorflow-js-models-in-offline-applications-a7b5b0c67d4?source=collection_archive---------1-----------------------#2022-02-01">https://levelup.gitconnected.com/use-tensorflow-js-models-in-offline-applications-a7b5b0c67d4?source=collection_archive---------1-----------------------#2022-02-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/6f40a6193ae3eeb0d953b9e55f085707.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G04w28H-lQAN522msq9Tcg.jpeg"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">安妮·斯普拉特的封面图片</figcaption></figure><div class=""/><p id="ed1c" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">TensorFlow.js (TFJS)是一款令人惊叹的软件。虽然有大量优秀的文档可用，但开发人员的一个常见问题似乎是:</p><blockquote class="lb"><p id="f72a" class="lc ld jg bd le lf lg lh li lj lk la dk translated"><strong class="ak">如何让TensorFlow.js模型像</strong> <a class="ae jd" href="https://github.com/tensorflow/tfjs-models/tree/master/pose-detection" rel="noopener ugc nofollow" target="_blank"> <strong class="ak"> PoseNet </strong> </a> <strong class="ak">或者</strong><a class="ae jd" href="https://github.com/tensorflow/tfjs-models/tree/master/hand-pose-detection" rel="noopener ugc nofollow" target="_blank"><strong class="ak">hand pose</strong></a><strong class="ak">在离线应用中工作？</strong></p></blockquote><p id="b9e4" class="pw-post-body-paragraph kd ke jg kf b kg ll ki kj kk lm km kn ko ln kq kr ks lo ku kv kw lp ky kz la ij bi translated">在许多真实的场景中，您希望离线部署TFJS支持的应用程序，例如:</p><ul class=""><li id="377e" class="lq lr jg kf b kg kh kk kl ko ls ks lt kw lu la lv lw lx ly bi translated">Kiosk应用</li><li id="9edb" class="lq lr jg kf b kg lz kk ma ko mb ks mc kw md la lv lw lx ly bi translated">嵌入式应用</li><li id="5ea3" class="lq lr jg kf b kg lz kk ma ko mb ks mc kw md la lv lw lx ly bi translated">比赛</li></ul><p id="0875" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本指南中，我将向您展示如何将TensorFlow.js模型打包到您的应用程序中，并离线运行它们。</p><p id="776b" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="me">TL；DR，如果你只是为了源代码而来，你可以从我下面的库中下载一个完全可用的例子👇👇👇</em></p><div class="ip iq gp gr ir mf"><a href="https://github.com/andypotato/tfjs-electron-template" rel="noopener  ugc nofollow" target="_blank"><div class="mg ab fo"><div class="mh ab mi cl cj mj"><h2 class="bd jh gy z fp mk fr fs ml fu fw jf bi translated">GitHub-andypotato/tfjs-Electron-template:如何在电子邮件中使用TensorFlow.js的示例…</h2><div class="mm l"><h3 class="bd b gy z fp mk fr fs ml fu fw dk translated">这是一个完整的工作示例，说明如何将TensorFlow.js模型打包到您的电子应用程序中以供离线使用…</h3></div><div class="mn l"><p class="bd b dl z fp mk fr fs ml fu fw dk translated">github.com</p></div></div><div class="mo l"><div class="mp l mq mr ms mo mt ix mf"/></div></div></a></div><h1 id="82a3" class="mu mv jg bd mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr bi translated">解释了离线应用程序面临的挑战</h1><p id="1107" class="pw-post-body-paragraph kd ke jg kf b kg ns ki kj kk nt km kn ko nu kq kr ks nv ku kv kw nw ky kz la ij bi translated">大多数人首先会尝试创建一个简单的HTML / JS包，然后从本地文件系统运行它。这通常会失败，并显示如下错误消息:</p><pre class="nx ny nz oa gt ob oc od oe aw of bi"><span id="29d4" class="og mv jg oc b gy oh oi l oj ok">index.js:2 Fetch API cannot load file:///... URL scheme “file” is not supported. (anonymous)</span></pre><p id="f1ea" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf jh">为什么会失败？</strong></p><p id="16f0" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf jh">简短回答:</strong>您的模型将使用web浏览器的<a class="ae jd" href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API" rel="noopener ugc nofollow" target="_blank">获取API </a>在后台下载额外的资源文件(模型权重)，这对于本地资源不起作用。</p><p id="12e3" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf jh">如果对你来说这已经足够说明了，那么</strong> <a class="ae jd" href="#cfcd" rel="noopener ugc nofollow"> <strong class="kf jh">跳到下一节</strong> </a> <strong class="kf jh">。否则，留下来听我更深入的解释。</strong></p></div><div class="ab cl ol om hu on" role="separator"><span class="oo bw bk op oq or"/><span class="oo bw bk op oq or"/><span class="oo bw bk op oq"/></div><div class="ij ik il im in"><p id="4816" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了理解这个错误来自哪里，你必须知道大多数流行的TensorFlow.js模型包需要额外的资源才能工作——所谓的<a class="ae jd" href="https://hackernoon.com/everything-you-need-to-know-about-neural-networks-8988c3ee4491" rel="noopener ugc nofollow" target="_blank">模型权重</a>。当您包含模型包时，权重通常会从<a class="ae jd" href="https://tfhub.dev/" rel="noopener ugc nofollow" target="_blank"> TensorFlow Hub </a>网站自动下载。</p><p id="a5cc" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">打开开发者工具中的“网络”选项卡，查看详细信息:</p><figure class="nx ny nz oa gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi os"><img src="../Images/b3e8dd8926624f24b8e838af3f5f677d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TkI0fVSj5LRz1LnvvE09zg.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">浏览器从TensorFlow Hub下载模型权重</figcaption></figure><p id="48d6" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从上面的日志中，您可以看到通过Fetch API下载了额外的资源。只要资源是通过HTTP(s)提供的，这种方法就可以很好地工作，但是如果出现以下任何一种情况，这种方法就会失败:</p><ol class=""><li id="7b1f" class="lq lr jg kf b kg kh kk kl ko ls ks lt kw lu la ot lw lx ly bi translated">请求是从“文件://”URL发起的，或者</li><li id="0e4e" class="lq lr jg kf b kg lz kk ma ko mb ks mc kw md la ot lw lx ly bi translated">请求的文件通过“文件://”协议加载</li></ol><p id="48ed" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了解决这个问题，我们需要找到一种方法来解决这些限制，并将模型权重与我们的应用程序捆绑在一起。</p><h1 id="cfcd" class="mu mv jg bd mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr bi translated">使用电子创建您的离线应用程序</h1><p id="b3d3" class="pw-post-body-paragraph kd ke jg kf b kg ns ki kj kk nt km kn ko nu kq kr ks nv ku kv kw nw ky kz la ij bi translated">Electron是一个框架，可以将基于HTML5 / JavaScript的应用程序打包成一个独立的桌面应用程序，用于多种平台(Windows / macOS / Linux)。</p><figure class="nx ny nz oa gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ou"><img src="../Images/c9b288619dded3aa9126a025ce09ff78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JX3Tl491Unjj1FrXUgV72w.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">电子堆栈</figcaption></figure><blockquote class="ov ow ox"><p id="4da6" class="kd ke me kf b kg kh ki kj kk kl km kn oy kp kq kr oz kt ku kv pa kx ky kz la ij bi translated">如果你想了解更多关于electronic的知识，你可以查看我不久前发表的关于用electronic构建kiosk应用程序的文章。</p></blockquote><h2 id="b005" class="og mv jg bd mw pb pc dn na pd pe dp ne ko pf pg ni ks ph pi nm kw pj pk nq pl bi translated">建立你的电子项目</h2><p id="cb44" class="pw-post-body-paragraph kd ke jg kf b kg ns ki kj kk nt km kn ko nu kq kr ks nv ku kv kw nw ky kz la ij bi translated">对于本指南，我将使用方便的“<a class="ae jd" href="https://www.electronforge.io/" rel="noopener ugc nofollow" target="_blank">电子锻造</a>”工具，它会让一个新项目立即启动并运行。</p><p id="3732" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Electron Forge提供了一个方便的命令行安装程序，也允许您从一些预定义的模板中进行选择。我喜欢使用<a class="ae jd" href="https://www.electronforge.io/templates/webpack-template" rel="noopener ugc nofollow" target="_blank"> Webpack模板</a>，因为它使得后期的配置更加容易。</p><p id="8d14" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf jh">用</strong>初始化您的新项目</p><pre class="nx ny nz oa gt ob oc od oe aw of bi"><span id="f06c" class="og mv jg oc b gy oh oi l oj ok">npx create-electron-app tfjs-electron-example --template=webpack</span></pre><p id="4b19" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要验证您的项目正在运行，请进入您的新项目目录并启动开发版本:</p><pre class="nx ny nz oa gt ob oc od oe aw of bi"><span id="66ca" class="og mv jg oc b gy oh oi l oj ok">cd tfjs-electron-example<br/>npm run start</span></pre><p id="4cdd" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果一切安装正确，那么你应该看到一个“Hello World”应用程序在一个新窗口中运行。</p><figure class="nx ny nz oa gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi pm"><img src="../Images/9ff1da940b048774e9cc1f5a887b2311.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0e9WIfpnu4iUAlDp3H88Ng.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">向你的电子应用问好！</figcaption></figure><h2 id="b6b3" class="og mv jg bd mw pb pc dn na pd pe dp ne ko pf pg ni ks ph pi nm kw pj pk nq pl bi translated">下载您的TensorFlow.js模型</h2><p id="09a8" class="pw-post-body-paragraph kd ke jg kf b kg ns ki kj kk nt km kn ko nu kq kr ks nv ku kv kw nw ky kz la ij bi translated">我将以<a class="ae jd" href="https://github.com/tensorflow/tfjs-models/tree/master/pose-detection/src/movenet" rel="noopener ugc nofollow" target="_blank"> MoveNet模型</a>为例，向您展示如何下载和安装模型包和模型权重文件。同样的过程也适用于大多数其他流行的模型，这些模型可以在<a class="ae jd" href="https://github.com/tensorflow/tfjs-models/tree/master" rel="noopener ugc nofollow" target="_blank"> TFJS模型库</a>中找到。</p><p id="65c1" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf jh">第一步:通过NPM或纱线安装模型包</strong></p><pre class="nx ny nz oa gt ob oc od oe aw of bi"><span id="c328" class="og mv jg oc b gy oh oi l oj ok">npm i --save @tensorflow-models/pose-detection<br/>npm i --save @tensorflow/tfjs-core @tensorflow/tfjs-converter</span></pre><p id="2581" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf jh">第二步:安装GPU(推荐)或WASM后端</strong></p><pre class="nx ny nz oa gt ob oc od oe aw of bi"><span id="d3c1" class="og mv jg oc b gy oh oi l oj ok">npm i --save @tensorflow/tfjs-backend-webgl<br/>- or alternatively -<br/>npm i --save @tensorflow/tfjs-backend-wasm</span></pre><p id="54dc" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf jh">第三步:从TensorFlow Hub下载模型权重</strong></p><p id="8b98" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于这一步，您首先需要选择要使用哪个版本的MoveNet。目前，MoveNet提供三种选择:</p><ul class=""><li id="fd5c" class="lq lr jg kf b kg kh kk kl ko ls ks lt kw lu la lv lw lx ly bi translated">单一姿态检测/闪电后端(更快，默认精度)</li><li id="12f9" class="lq lr jg kf b kg lz kk ma ko mb ks mc kw md la lv lw lx ly bi translated">单一姿态检测/ Thunder后端(速度更慢，精确度更高)</li><li id="7e56" class="lq lr jg kf b kg lz kk ma ko mb ks mc kw md la lv lw lx ly bi translated">多姿态探测/闪电后端</li></ul><p id="41c2" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">进入<a class="ae jd" href="https://tfhub.dev/" rel="noopener ugc nofollow" target="_blank"> TensorFlow Hub网站</a>，搜索“movenet”。您将找到上述三种型号的<a class="ae jd" href="https://tfhub.dev/s?deployment-format=tfjs&amp;q=movenet" rel="noopener ugc nofollow" target="_blank">搜索结果</a>:</p><figure class="nx ny nz oa gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi pn"><img src="../Images/c566243bd30998857351393dd79fb036.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h8pZ4otatgLWXROaFFgLaA.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">tfhub.dev上的MoveNet模型</figcaption></figure><p id="b932" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">单击您希望使用的型号。在接下来的页面中选择“.”。JS”选项卡下的“模型格式”并单击“下载”按钮。</p><figure class="nx ny nz oa gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi po"><img src="../Images/511f89e1f970f21d36b256002e2d9322.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZElHlTBFSE2XXZ4Nl7ENgA.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">从TensorFlow Hub下载模型权重</figcaption></figure><h2 id="6229" class="og mv jg bd mw pb pc dn na pd pe dp ne ko pf pg ni ks ph pi nm kw pj pk nq pl bi translated">将模型权重添加到应用程序包中</h2><p id="1794" class="pw-post-body-paragraph kd ke jg kf b kg ns ki kj kk nt km kn ko nu kq kr ks nv ku kv kw nw ky kz la ij bi translated">在应用程序的<code class="fe pp pq pr oc b">src</code>文件夹中创建一个名为<code class="fe pp pq pr oc b">models</code>的新文件夹，并将刚刚下载的文件内容解压到一个名为<code class="fe pp pq pr oc b">movenet</code>的新子文件夹中。</p><blockquote class="ov ow ox"><p id="c357" class="kd ke me kf b kg kh ki kj kk kl km kn oy kp kq kr oz kt ku kv pa kx ky kz la ij bi translated"><strong class="kf jh">注意:</strong>如果您使用不同的文件夹名称，那么您还必须在下一步中更改路径配置。</p></blockquote><p id="5466" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您应该得到如下所示的文件/文件夹结构:</p><pre class="nx ny nz oa gt ob oc od oe aw of bi"><span id="b847" class="og mv jg oc b gy oh oi l oj ok">+- src<br/>|<br/>+--+- models<br/>|  |<br/>|  +--+- movenet<br/>|  |  |<br/>|  |  +--+- group1-shard1of2.bin<br/>|  |     +- group1-shard2of2.bin<br/>|  |     +- model.json</span></pre><h2 id="7f43" class="og mv jg bd mw pb pc dn na pd pe dp ne ko pf pg ni ks ph pi nm kw pj pk nq pl bi translated">使您的应用程序能够加载静态模型文件</h2><p id="3a62" class="pw-post-body-paragraph kd ke jg kf b kg ns ki kj kk nt km kn ko nu kq kr ks nv ku kv kw nw ky kz la ij bi translated">默认情况下，electronic受到与web浏览器相同的限制，因此它不能通过Fetch API加载本地文件。然而，我们可以<a class="ae jd" href="https://www.electronjs.org/docs/latest/api/protocol" rel="noopener ugc nofollow" target="_blank">在Electron中注册定制的文件加载器协议</a>，这允许更细粒度的安全设置。</p><blockquote class="ov ow ox"><p id="32ec" class="kd ke me kf b kg kh ki kj kk kl km kn oy kp kq kr oz kt ku kv pa kx ky kz la ij bi translated"><strong class="kf jh">注意:</strong>在开发过程中，电子会在后台启动<a class="ae jd" href="https://webpack.js.org/configuration/dev-server/" rel="noopener ugc nofollow" target="_blank"> Webpack DevServer </a>，通过HTTP协议为你的所有文件提供服务。这将“神奇地”使您的应用程序在开发过程中工作。但是，如果没有此配置，它将无法在打包后加载模型权重！</p></blockquote><p id="7b94" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf jh">第一步:更新网络包配置</strong></p><p id="e73a" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">安装<code class="fe pp pq pr oc b">CopyWebpackPlugin</code></p><pre class="nx ny nz oa gt ob oc od oe aw of bi"><span id="ee5e" class="og mv jg oc b gy oh oi l oj ok">npm i --save-dev copy-webpack-plugin</span></pre><p id="1097" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，编辑应用程序的Webpack配置，从<code class="fe pp pq pr oc b">/src/models</code>目录加载静态文件——这是您之前将模型权重文件提取到的目录。</p><figure class="nx ny nz oa gt is"><div class="bz fp l di"><div class="ps pt l"/></div></figure><blockquote class="ov ow ox"><p id="c577" class="kd ke me kf b kg kh ki kj kk kl km kn oy kp kq kr oz kt ku kv pa kx ky kz la ij bi translated">确保第8行中的<code class="fe pp pq pr oc b">assets</code>数组包含<code class="fe pp pq pr oc b">models</code>目录，该目录将映射到应用程序中的<code class="fe pp pq pr oc b">src/models</code>。如果您使用不同的文件夹名称，那么您必须相应地更新这一行。</p></blockquote><p id="e1c5" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf jh">步骤2:在电子系统中创建文件加载协议</strong></p><p id="403e" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在第一步中，我们配置了模型路径，所以我们的应用程序知道<strong class="kf jh"> <em class="me">在哪里</em> </strong>寻找模型文件。现在我们需要告诉Electron<strong class="kf jh"><em class="me"/></strong>它应该如何加载我们的文件，更具体地说是<strong class="kf jh">应该应用哪些安全设置</strong>。</p><p id="71f5" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">更新<code class="fe pp pq pr oc b">/src/main.js</code>的开头，如下例所示:</p><figure class="nx ny nz oa gt is"><div class="bz fp l di"><div class="ps pt l"/></div></figure><p id="3c7e" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">方法<code class="fe pp pq pr oc b">registerSchemeAsPrivileged</code>(第4行)将声明我们使用一个名为<code class="fe pp pq pr oc b">static</code>的定制协议，这个协议应该像一个支持Fetch API的标准协议一样。</p><p id="5de9" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">实际的<code class="fe pp pq pr oc b">static</code>协议是使用<code class="fe pp pq pr oc b">registerFileProtocol</code>方法在下面几行(第23行)定义的。这将指示Electron在我们的Webpack配置中设置的位置查找静态文件。</p><p id="1743" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有了这样的配置，我们现在可以使用像<code class="fe pp pq pr oc b">static://models/movenet/model.json</code>这样的定制URL加载静态文件了——太棒了！</p><h2 id="aba9" class="og mv jg bd mw pb pc dn na pd pe dp ne ko pf pg ni ks ph pi nm kw pj pk nq pl bi translated">配置您的TensorFlow.js模型</h2><p id="627c" class="pw-post-body-paragraph kd ke jg kf b kg ns ki kj kk nt km kn ko nu kq kr ks nv ku kv kw nw ky kz la ij bi translated">在最后一步中，我们需要配置模型，从我们的本地应用程序包而不是从TensorFlow Hub加载其模型权重。</p><p id="7ce7" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您通常可以在模型文档中找到必要的配置参数。对于我们的MoveNet示例，<a class="ae jd" href="https://github.com/tensorflow/tfjs-models/tree/master/pose-detection/src/posenet#create-a-detector" rel="noopener ugc nofollow" target="_blank">文档</a>指出:</p><blockquote class="ov ow ox"><p id="2169" class="kd ke me kf b kg kh ki kj kk kl km kn oy kp kq kr oz kt ku kv pa kx ky kz la ij bi translated"><em class="jg"> modelUrl </em>(可选):可选字符串，指定MoveNet模型的自定义Url。如果没有提供，它将从tf.hub加载由<em class="jg"> modelType </em>指定的模型</p></blockquote><p id="2697" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，在我们的示例项目中，我们可以使用以下模型配置:</p><figure class="nx ny nz oa gt is"><div class="bz fp l di"><div class="ps pt l"/></div></figure><p id="df7c" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">就这样，现在您应该能够直接从您的应用程序包中加载MoveNet模型，而不需要互联网连接。</p><h2 id="654a" class="og mv jg bd mw pb pc dn na pd pe dp ne ko pf pg ni ks ph pi nm kw pj pk nq pl bi translated">打包您的应用程序</h2><p id="0c23" class="pw-post-body-paragraph kd ke jg kf b kg ns ki kj kk nt km kn ko nu kq kr ks nv ku kv kw nw ky kz la ij bi translated">完成应用程序开发后，您可以使用以下命令为目标操作系统创建一个包:</p><pre class="nx ny nz oa gt ob oc od oe aw of bi"><span id="9293" class="og mv jg oc b gy oh oi l oj ok">npm run package</span></pre><p id="b77e" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">构建过程完成后，您可以在<code class="fe pp pq pr oc b">/out</code>文件夹中找到您的操作系统的应用程序包。对于大多数用途来说，这个包应该是开箱即用的，但是您可以使用<a class="ae jd" href="https://www.electronforge.io/config/makers" rel="noopener ugc nofollow" target="_blank"> Makers配置</a>来配置和定制构建。</p></div><div class="ab cl ol om hu on" role="separator"><span class="oo bw bk op oq or"/><span class="oo bw bk op oq or"/><span class="oo bw bk op oq"/></div><div class="ij ik il im in"><p id="0ae0" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我的教程到此结束。请随意使用我的源代码作为您自己的应用程序的基础。如果您有任何意见、问题或建议，请在评论中开始对话。</p><p id="9961" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">也可以看看我的另一篇关于如何使用ElectronJS创建kiosk应用程序的教程。</p><div class="ip iq gp gr ir mf"><a href="https://medium.com/@andreas.schallwig/building-html5-kiosk-applications-with-vue-js-and-electron-c64ac928b59f" rel="noopener follow" target="_blank"><div class="mg ab fo"><div class="mh ab mi cl cj mj"><h2 class="bd jh gy z fp mk fr fs ml fu fw jf bi translated">使用Vue.js和Electron构建HTML5 kiosk应用程序</h2><div class="mm l"><h3 class="bd b gy z fp mk fr fs ml fu fw dk translated">如何构建和部署您的第一个基于电子的kiosk应用程序——包含许多最佳实践的完整教程。</h3></div><div class="mn l"><p class="bd b dl z fp mk fr fs ml fu fw dk translated">medium.com</p></div></div><div class="mo l"><div class="pu l mq mr ms mo mt ix mf"/></div></div></a></div><p id="7e3f" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">非常感谢您阅读本教程！给我留点掌声👏如果你喜欢的话——我很想看看你想出的所有酷的东西！️❤️ </p></div></div>    
</body>
</html>