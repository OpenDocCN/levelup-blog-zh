<html>
<head>
<title>Publishing debug symbols — Making debugging available to the masses</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">发布调试符号—使调试对大众可用</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/publishing-debug-symbols-making-debugging-available-to-the-masses-54e7d8428bfa?source=collection_archive---------7-----------------------#2021-11-19">https://levelup.gitconnected.com/publishing-debug-symbols-making-debugging-available-to-the-masses-54e7d8428bfa?source=collection_archive---------7-----------------------#2021-11-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="943f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">发布NuGet包和调试符号让每个使用它们的人的生活变得更容易。如果你不确定如何做到这一点，请继续阅读！</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi kp"><img src="../Images/f6683d4176b070cda0508d6b1d7f8814.png" data-original-src="https://miro.medium.com/v2/resize:fit:956/format:webp/1*Rr9V0Ww9G-UVlCb2qlqaXw.png"/></div></figure></div><div class="ab cl kx ky hx kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="im in io ip iq"><h1 id="3996" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">背景</h1><p id="c7d0" class="pw-post-body-paragraph jq jr it js b jt mc jv jw jx md jz ka kb me kd ke kf mf kh ki kj mg kl km kn im bi translated">如果您是. NET开发人员，在将第三方包导入到您自己的项目中后，您可能会遇到的第一件事就是您无法单步执行该包的代码…除非您已经设法找到了它的调试符号。</p><p id="028a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">奇怪的是，这似乎是我工作过的许多公司倾向于忽视的东西——在花费大量时间编写供开发人员使用的库时，没有人想到包括调试这些包的简单方法。</p><p id="a50d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在本文中，我将简要介绍您需要做些什么来确保您的符号与您的NuGet包一起发布。</p><p id="7511" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">为了演示，我编写了下面的库:</p><div class="mh mi gp gr mj mk"><a href="https://github.com/therealjordanlee/JL.Test.Package" rel="noopener  ugc nofollow" target="_blank"><div class="ml ab fo"><div class="mm ab mn cl cj mo"><h2 class="bd iu gy z fp mp fr fs mq fu fw is bi translated">GitHub - therealjordanlee/JL。测试包</h2><div class="mr l"><h3 class="bd b gy z fp mp fr fs mq fu fw dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="ms l"><p class="bd b dl z fp mp fr fs mq fu fw dk translated">github.com</p></div></div><div class="mt l"><div class="mu l mv mw mx mt my kv mk"/></div></div></a></div><p id="b110" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这包含单个字符串扩展方法:</p><pre class="kq kr ks kt gt mz na nb nc aw nd bi"><span id="094b" class="ne lf it na b gy nf ng l nh ni">public static class StringExtensions<br/>{<br/>    public static void Repeat(this string x, int times)<br/>    {<br/>        if (times &lt;= 0)<br/>            throw new ArgumentOutOfRangeException(nameof(times), "Argument must be greater than 0");</span><span id="b63c" class="ne lf it na b gy nj ng l nh ni">for (int i = 0; i &lt; times; i++)<br/>        {<br/>            Console.WriteLine(x);<br/>        }<br/>    }<br/>}</span></pre><p id="bd20" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我将介绍如何将包和符号发布到NuGet提要，网址是:</p><ul class=""><li id="f671" class="nk nl it js b jt ju jx jy kb nm kf nn kj no kn np nq nr ns bi translated">nuget.org</li><li id="758d" class="nk nl it js b jt nt jx nu kb nv kf nw kj nx kn np nq nr ns bi translated">天蓝色的艺术品</li></ul></div><div class="ab cl kx ky hx kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="im in io ip iq"><h1 id="686e" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">NuGet.org</h1><p id="75e4" class="pw-post-body-paragraph jq jr it js b jt mc jv jw jx md jz ka kb me kd ke kf mf kh ki kj mg kl km kn im bi translated">nuget既是一个nuget feed，也是一个符号服务器。</p><p id="eafd" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">出版非常简单:</p><ul class=""><li id="1a38" class="nk nl it js b jt ju jx jy kb nm kf nn kj no kn np nq nr ns bi translated">nuget包在*。nupkg格式</li><li id="fa7b" class="nk nl it js b jt nt jx nu kb nv kf nw kj nx kn np nq nr ns bi translated">符号包在*。snupkg格式</li></ul><h2 id="30f4" class="ne lf it bd lg ny nz dn lk oa ob dp lo kb oc od ls kf oe of lw kj og oh ma oi bi translated">打包您的代码</h2><p id="7072" class="pw-post-body-paragraph jq jr it js b jt mc jv jw jx md jz ka kb me kd ke kf mf kh ki kj mg kl km kn im bi translated"><code class="fe oj ok ol na b">dotnet</code> CLI可以用来创建这两个包:</p><pre class="kq kr ks kt gt mz na nb nc aw nd bi"><span id="c638" class="ne lf it na b gy nf ng l nh ni">dotnet pack -o [output directory] --configuration Release -p:PackageVersion=[semver]-p:SymbolPackageFormat=snupkg</span></pre><p id="411b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">下面是对我的示例库运行该命令的输出示例:</p><pre class="kq kr ks kt gt mz na nb nc aw nd bi"><span id="add5" class="ne lf it na b gy nf ng l nh ni">PS C:\Git\JL.Test.Package\src&gt; dotnet pack -o C:\Temp\build --configuration Release -p:PackageVersion=0.0.1-d --include-source -p:SymbolPackageFormat=snupkg<br/>Microsoft (R) Build Engine version 17.0.0+c9eb9dd64 for .NET<br/>Copyright (C) Microsoft Corporation. All rights reserved.</span><span id="9f9e" class="ne lf it na b gy nj ng l nh ni">Determining projects to restore...<br/>  Restored C:\Git\JL.Test.Package\src\JL.Test.Package\JL.Test.Package.csproj (in 117 ms).<br/>  JL.Test.Package -&gt; C:\Git\JL.Test.Package\src\JL.Test.Package\bin\Release\netstandard2.1\JL.Test.Package.dll<br/>  Successfully created package 'C:\Temp\build\JL.Test.Package.0.0.1-d.nupkg'.<br/>  Successfully created package 'C:\Temp\build\JL.Test.Package.0.0.1-d.snupkg'.</span></pre><p id="b23d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您会注意到，运行这个命令会创建<code class="fe oj ok ol na b">nupkg</code>和<code class="fe oj ok ol na b">snupkg</code>文件。</p><h2 id="005d" class="ne lf it bd lg ny nz dn lk oa ob dp lo kb oc od ls kf oe of lw kj og oh ma oi bi translated">推销你的包裹</h2><p id="94c0" class="pw-post-body-paragraph jq jr it js b jt mc jv jw jx md jz ka kb me kd ke kf mf kh ki kj mg kl km kn im bi translated"><code class="fe oj ok ol na b">dotnet</code> CLI也可用于将两个包发布到NuGet.org:</p><pre class="kq kr ks kt gt mz na nb nc aw nd bi"><span id="124a" class="ne lf it na b gy nf ng l nh ni">dotnet nuget push [package name].nupkg -k [API Key] -s <a class="ae om" href="https://api.nuget.org/v3/index.json" rel="noopener ugc nofollow" target="_blank">https://api.nuget.org/v3/index.json</a></span></pre><p id="0e41" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您可以通过登录<a class="ae om" href="https://www.nuget.org/" rel="noopener ugc nofollow" target="_blank">nuget.org</a>并在下拉菜单中选择<strong class="js iu"> API密钥</strong>来创建API密钥。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi on"><img src="../Images/368b321ede0eb9909ba78bec34c326eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:580/format:webp/1*5dhfimxQqnL-xHtbewBtYg.png"/></div></figure><p id="74f5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">以下是在我的机器上运行该命令的输出:</p><pre class="kq kr ks kt gt mz na nb nc aw nd bi"><span id="827e" class="ne lf it na b gy nf ng l nh ni">PS C:\Temp\build&gt; dotnet nuget push JL.Test.Package.0.0.1-d.nupkg -k oy2...bu -s <a class="ae om" href="https://api.nuget.org/v3/index.json" rel="noopener ugc nofollow" target="_blank">https://api.nuget.org/v3/index.json</a><br/>Pushing JL.Test.Package.0.0.1-d.nupkg to '<a class="ae om" href="https://www.nuget.org/api/v2/package'" rel="noopener ugc nofollow" target="_blank">https://www.nuget.org/api/v2/package'</a>...<br/>  PUT <a class="ae om" href="https://www.nuget.org/api/v2/package/" rel="noopener ugc nofollow" target="_blank">https://www.nuget.org/api/v2/package/</a><br/>warn : All published packages should have license information specified. Learn more: <a class="ae om" href="https://aka.ms/deprecateLicenseUrl" rel="noopener ugc nofollow" target="_blank">https://aka.ms/deprecateLicenseUrl</a>.<br/>  Created <a class="ae om" href="https://www.nuget.org/api/v2/package/" rel="noopener ugc nofollow" target="_blank">https://www.nuget.org/api/v2/package/</a> 1334ms<br/>Your package was pushed.<br/>Pushing JL.Test.Package.0.0.1-d.snupkg to '<a class="ae om" href="https://www.nuget.org/api/v2/symbolpackage'" rel="noopener ugc nofollow" target="_blank">https://www.nuget.org/api/v2/symbolpackage'</a>...<br/>  PUT <a class="ae om" href="https://www.nuget.org/api/v2/symbolpackage/" rel="noopener ugc nofollow" target="_blank">https://www.nuget.org/api/v2/symbolpackage/</a><br/>  Created <a class="ae om" href="https://www.nuget.org/api/v2/symbolpackage/" rel="noopener ugc nofollow" target="_blank">https://www.nuget.org/api/v2/symbolpackage/</a> 659ms<br/>Your package was pushed.</span></pre><p id="92b1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">注意，尽管我只指定了<code class="fe oj ok ol na b">.nupkg</code>文件，但是从输出中可以看到<code class="fe oj ok ol na b">.nupkg</code>和<code class="fe oj ok ol na b">.snupkg</code>文件都被推送了。</p><p id="a34c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">一旦完成，你需要等待符号被索引。如果您在Nuget.org检查包裹状态，您会看到以下消息:</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="op oq di or bf os"><div class="gh gi oo"><img src="../Images/4c0f2487f113b5f52c4c12929180c57d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A75xF1p7Zau0M2jz8pZelw.png"/></div></div></figure><p id="1af7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">索引完成后，上面的警告信息将消失，您现在可以选择下载符号:</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/a1ba366ffea4b2daab118abf4b2be8b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:616/format:webp/1*OFKEx-CvOsF46JvobchXxw.png"/></div></figure></div><div class="ab cl kx ky hx kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="im in io ip iq"><h1 id="cb71" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">设置Visual Studio以使用NuGet.org符号服务器</h1><p id="2555" class="pw-post-body-paragraph jq jr it js b jt mc jv jw jx md jz ka kb me kd ke kf mf kh ki kj mg kl km kn im bi translated">在Visual Studio中，转到<strong class="js iu">工具|选项|调试|符号</strong>并添加符号服务器URL: <code class="fe oj ok ol na b">https://symbols.nuget.org/download/symbols</code>。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/802fd75346f606022ce35c0864e93bc5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1166/format:webp/1*xPOSc1Qc-Kop3TK6Iexdqg.png"/></div></figure><p id="63e4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这不是必需的，但是你可能想要选择<strong class="js iu">只加载指定的模块</strong>，否则你将会等待Visual Studio尝试为你的项目中的每个DLL下载符号。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi ov"><img src="../Images/7e7273422c46b30b19ed438995e1bf36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1050/format:webp/1*egP4uZBdN6q4l1nRjANfKg.png"/></div></figure><p id="da1f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">然后转到<strong class="js iu">工具|选项|调试|常规</strong>，并确保:</p><ul class=""><li id="980e" class="nk nl it js b jt ju jx jy kb nm kf nn kj no kn np nq nr ns bi translated"><strong class="js iu">启用仅我的代码</strong>:禁用</li><li id="57e0" class="nk nl it js b jt nt jx nu kb nv kf nw kj nx kn np nq nr ns bi translated"><strong class="js iu">启用源服务器支持</strong>:已启用</li><li id="d227" class="nk nl it js b jt nt jx nu kb nv kf nw kj nx kn np nq nr ns bi translated"><strong class="js iu">启用源链接支持</strong>:已启用</li></ul><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="op oq di or bf os"><div class="gh gi ow"><img src="../Images/ed7968d6ce20ef390c7c1462825e67fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KRdbJ9YfNYdLhg874TQhwQ.png"/></div></div></figure><p id="6829" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在设置一个断点并开始调试。如果您之前设置了上面的<strong class="js iu">加载指定模块</strong>选项，符号应该会自动下载。您可以通过浏览符号缓存文件夹并确认符号已下载来检查这一点。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi ox"><img src="../Images/4c2b66ed277da1d8c03a4e2f1e0f9e52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1100/format:webp/1*3Nx51hwL2KaptgqcCrcY4Q.png"/></div></figure><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi oy"><img src="../Images/010ec9a38abbd86a59a73fe022b6f0a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1044/format:webp/1*FOFWF7HIXRz2pnY6zPWgSQ.png"/></div></figure><p id="91fc" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果您没有指定自动加载包的符号，则需要手动加载它们。</p><p id="1f9f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">转到<strong class="js iu">调试|窗口|模块</strong></p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi oz"><img src="../Images/b3f0535ed8d03694c4d02fe1cd48ba83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1284/format:webp/1*7TGKmeKY2zT-Z74BKeVnZQ.png"/></div></figure><p id="c9d2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在模块窗口中，右击包并选择<strong class="js iu">加载符号</strong>。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi pa"><img src="../Images/fdb73db95b04017de5d6cf5488a55f06.png" data-original-src="https://miro.medium.com/v2/resize:fit:976/format:webp/1*C_Dfd502tZVZtQWwtM_SCA.png"/></div></figure><p id="e515" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果一切设置正确，您应该在状态栏中看到<strong class="js iu">符号已加载</strong>。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="op oq di or bf os"><div class="gh gi pb"><img src="../Images/501b8cda29768c946834ba0977e24801.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tN0p_ZypgrfKzxtDB91-bw.png"/></div></div></figure><p id="78e2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您还会看到调试信息已经加载到解决方案资源管理器的外部源下:</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi pc"><img src="../Images/110549dbf93e6e38e3a7e3665ec0bf44.png" data-original-src="https://miro.medium.com/v2/resize:fit:554/format:webp/1*7Bvwmo_DNrr0VypCMhsm4w.png"/></div></figure><p id="c49b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在，您应该能够单步执行包中的代码了</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi pd"><img src="../Images/d370149ef3322d99d6bed9715393d315.png" data-original-src="https://miro.medium.com/v2/resize:fit:862/format:webp/1*NxFEZ0-OfjWiPS-jWFIUhA.png"/></div></figure><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="op oq di or bf os"><div class="gh gi pe"><img src="../Images/6099889cb24986c4e5c833e4f6c10fb3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Xy7kHGQ0qY1FBNJNDDeACA.png"/></div></div></figure></div><div class="ab cl kx ky hx kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="im in io ip iq"><h1 id="b08a" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">天蓝色的艺术品</h1><p id="6bc9" class="pw-post-body-paragraph jq jr it js b jt mc jv jw jx md jz ka kb me kd ke kf mf kh ki kj mg kl km kn im bi translated">Azure工件也可以用作nuget提要和符号服务器，但是关于符号服务器的使用有一些警告。</p><p id="a422" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">具体来说，索引和发布符号的构建步骤如下:</p><div class="mh mi gp gr mj mk"><a href="https://docs.microsoft.com/en-us/azure/devops/pipelines/tasks/build/index-sources-publish-symbols?view=azure-devops" rel="noopener  ugc nofollow" target="_blank"><div class="ml ab fo"><div class="mm ab mn cl cj mo"><h2 class="bd iu gy z fp mp fr fs mq fu fw is bi translated">索引源和发布符号- Azure管道</h2><div class="mr l"><h3 class="bd b gy z fp mp fr fs mq fu fw dk translated">注意符号服务器可用于Azure Artifacts中的包管理，与Visual Studio 2017.4配合使用效果最佳…</h3></div><div class="ms l"><p class="bd b dl z fp mp fr fs mq fu fw dk translated">docs.microsoft.com</p></div></div><div class="mt l"><div class="pf l mv mw mx mt my kv mk"/></div></div></a></div><blockquote class="pg ph pi"><p id="6109" class="jq jr ko js b jt ju jv jw jx jy jz ka pj kc kd ke pk kg kh ki pl kk kl km kn im bi translated">此构建任务仅适用于:</p><p id="cd8b" class="jq jr ko js b jt ju jv jw jx jy jz ka pj kc kd ke pk kg kh ki pl kk kl km kn im bi translated">对于存储在Team Foundation Server (TFS)或Azure Repos中的Git或TFVC代码。它不适用于任何其他类型的存储库。</p></blockquote><p id="fc4d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">由于我不使用Azure Repos(也绝不会选择它而不是GitHub)，我无法让符号发布工作。</p><p id="814f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">然而，有一个可行的替代方法——在包中嵌入符号。</p><p id="103b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这将增加您的包的大小，因此根据最小化包的大小对您的重要性，这种方法可能不适合您。</p><p id="e2fb" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">下面记录了这些步骤。</p><h2 id="1f34" class="ne lf it bd lg ny nz dn lk oa ob dp lo kb oc od ls kf oe of lw kj og oh ma oi bi translated">安装Azure工件凭据提供程序</h2><p id="52d8" class="pw-post-body-paragraph jq jr it js b jt mc jv jw jx md jz ka kb me kd ke kf mf kh ki kj mg kl km kn im bi translated">Azure Artifacts凭据提供程序用于通过Azure Artifacts nuget源进行身份验证:</p><p id="a7a4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><a class="ae om" href="https://github.com/Microsoft/artifacts-credprovider" rel="noopener ugc nofollow" target="_blank">https://github.com/Microsoft/artifacts-credprovider</a></p><pre class="kq kr ks kt gt mz na nb nc aw nd bi"><span id="58b1" class="ne lf it na b gy nf ng l nh ni">iex "&amp; { $(irm https://aka.ms/install-artifacts-credprovider.ps1) } -AddNetfx"</span></pre><h2 id="4b0a" class="ne lf it bd lg ny nz dn lk oa ob dp lo kb oc od ls kf oe of lw kj og oh ma oi bi translated">更新csproj文件以启用嵌入式调试</h2><p id="ce14" class="pw-post-body-paragraph jq jr it js b jt mc jv jw jx md jz ka kb me kd ke kf mf kh ki kj mg kl km kn im bi translated">您可以通过将<code class="fe oj ok ol na b">&lt;DebugType&gt;embedded&lt;/DebugType&gt;</code>属性添加到csproj文件中的第一个<strong class="js iu">属性组</strong>部分来实现这一点。</p><pre class="kq kr ks kt gt mz na nb nc aw nd bi"><span id="bb59" class="ne lf it na b gy nf ng l nh ni">&lt;PropertyGroup&gt;<br/>    &lt;TargetFramework&gt;netstandard2.1&lt;/TargetFramework&gt;<br/>    &lt;Nullable&gt;enable&lt;/Nullable&gt;<br/>    &lt;DebugType&gt;embedded&lt;/DebugType&gt;<br/>  &lt;/PropertyGroup&gt;</span></pre><h2 id="3711" class="ne lf it bd lg ny nz dn lk oa ob dp lo kb oc od ls kf oe of lw kj og oh ma oi bi translated">打包代码</h2><p id="fccd" class="pw-post-body-paragraph jq jr it js b jt mc jv jw jx md jz ka kb me kd ke kf mf kh ki kj mg kl km kn im bi translated">和前面一样，使用<code class="fe oj ok ol na b">dotnet</code> CLI创建<code class="fe oj ok ol na b">nupkg</code>文件。</p><pre class="kq kr ks kt gt mz na nb nc aw nd bi"><span id="ef4b" class="ne lf it na b gy nf ng l nh ni">dotnet pack -o [output directory] --configuration Release -p:PackageVersion=[semver]</span></pre><p id="4aa5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我的机器输出示例:</p><pre class="kq kr ks kt gt mz na nb nc aw nd bi"><span id="9edc" class="ne lf it na b gy nf ng l nh ni">PS C:\Git\JL.Test.Package\src&gt; dotnet pack -o C:\Temp\build --configuration Release -p:PackageVersion=0.0.2-e<br/>Microsoft (R) Build Engine version 17.0.0+c9eb9dd64 for .NET<br/>Copyright (C) Microsoft Corporation. All rights reserved.</span><span id="fc2c" class="ne lf it na b gy nj ng l nh ni">Determining projects to restore...<br/>  Restored C:\Git\JL.Test.Package\src\JL.Test.Package\JL.Test.Package.csproj (in 181 ms).<br/>  JL.Test.Package -&gt; C:\Git\JL.Test.Package\src\JL.Test.Package\bin\Release\netstandard2.1\JL.Test.Package.dll<br/>  Successfully created package 'C:\Temp\build\JL.Test.Package.0.0.2-e.nupkg'.</span></pre><h2 id="fafc" class="ne lf it bd lg ny nz dn lk oa ob dp lo kb oc od ls kf oe of lw kj og oh ma oi bi translated">推送至Azure工件</h2><p id="1474" class="pw-post-body-paragraph jq jr it js b jt mc jv jw jx md jz ka kb me kd ke kf mf kh ki kj mg kl km kn im bi translated">这一步需要Azure工件凭证提供者。</p><pre class="kq kr ks kt gt mz na nb nc aw nd bi"><span id="51df" class="ne lf it na b gy nf ng l nh ni">dotnet nuget push [package name].nupkg -k placeholder -s <a class="ae om" href="https://pkgs.dev.azure.com/jordanleenet/_packaging/jordanleenet/nuget/v3/index.json" rel="noopener ugc nofollow" target="_blank">https://pkgs.dev.azure.com/jordanleenet/_packaging/jordanleenet/nuget/v3/index.json</a> --interactive</span></pre><ul class=""><li id="bc26" class="nk nl it js b jt ju jx jy kb nm kf nn kj no kn np nq nr ns bi translated">这个实例中的API键可以是任何值(在这个例子中，我使用值‘placeholder’)</li><li id="a129" class="nk nl it js b jt nt jx nu kb nv kf nw kj nx kn np nq nr ns bi translated">只有当你第一次使用Azure Artifacts认证时，才需要<code class="fe oj ok ol na b">--interactive</code>选项。系统会提示您打开Azure Devops的链接以设置初始身份验证。</li></ul><p id="b25f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我的机器的输出如下所示。</p><pre class="kq kr ks kt gt mz na nb nc aw nd bi"><span id="7688" class="ne lf it na b gy nf ng l nh ni">PS C:\Temp\build&gt; dotnet nuget push JL.Test.Package.0.0.2-e.nupkg -k placeholder -s <a class="ae om" href="https://pkgs.dev.azure.com/jordanleenet/_packaging/jordanleenet/nuget/v3/index.json" rel="noopener ugc nofollow" target="_blank">https://pkgs.dev.azure.com/jordanleenet/_packaging/jordanleenet/nuget/v3/index.json</a><br/>Pushing JL.Test.Package.0.0.2-e.nupkg to '<a class="ae om" href="https://pkgs.dev.azure.com/jordanleenet/_packaging/8b6a50dd-3e7b-4a55-a352-3bf3d250a9f3/nuget/v2/'" rel="noopener ugc nofollow" target="_blank">https://pkgs.dev.azure.com/jordanleenet/_packaging/8b6a50dd-3e7b-4a55-a352-3bf3d250a9f3/nuget/v2/'</a>...<br/>  PUT <a class="ae om" href="https://pkgs.dev.azure.com/jordanleenet/_packaging/8b6a50dd-3e7b-4a55-a352-3bf3d250a9f3/nuget/v2/" rel="noopener ugc nofollow" target="_blank">https://pkgs.dev.azure.com/jordanleenet/_packaging/8b6a50dd-3e7b-4a55-a352-3bf3d250a9f3/nuget/v2/</a><br/>  Accepted <a class="ae om" href="https://pkgs.dev.azure.com/jordanleenet/_packaging/8b6a50dd-3e7b-4a55-a352-3bf3d250a9f3/nuget/v2/" rel="noopener ugc nofollow" target="_blank">https://pkgs.dev.azure.com/jordanleenet/_packaging/8b6a50dd-3e7b-4a55-a352-3bf3d250a9f3/nuget/v2/</a> 1126ms<br/>Your package was pushed.</span></pre><h2 id="3439" class="ne lf it bd lg ny nz dn lk oa ob dp lo kb oc od ls kf oe of lw kj og oh ma oi bi translated">在Visual Studio中使用嵌入符号</h2><p id="9dcf" class="pw-post-body-paragraph jq jr it js b jt mc jv jw jx md jz ka kb me kd ke kf mf kh ki kj mg kl km kn im bi translated">与符号服务器不同，嵌入符号不需要您设置符号服务器。</p><p id="aea9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">设置断点并开始调试。在<strong class="js iu"> Debug | Windows | Modules </strong>窗口中，你会注意到<strong class="js iu">符号文件</strong>列将显示嵌入的符号。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="op oq di or bf os"><div class="gh gi pm"><img src="../Images/0c8bad12ce041914de336ac5e951da49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1PID2okGvAchbL9brCuoLw.png"/></div></div></figure><p id="fae7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您应该能够单步执行包代码，就像从符号服务器加载符号一样。</p></div></div>    
</body>
</html>