# 对于拉式请求批准，您应该三思

> 原文：<https://levelup.gitconnected.com/you-should-think-twice-about-pull-request-approvals-9eb9948b145f>

## 看门人代码审查表明缺乏信任，没有效率，并减慢团队的速度。

![](img/93f9e77dadcb668d203459d6b3a429c5.png)

照片由 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上的[agency followeb](https://unsplash.com/@olloweb?utm_source=medium&utm_medium=referral)拍摄

你有没有遇到过这样的情况，当你的团队因为没有时间做代码评审，而有很多拉取请求在等待的时候，你的工作速度会大大降低？

你有没有一天大部分时间都花在审核队友的拉动请求上？

如果是这样的话，你的团队中存在一些严重的信任问题。如果没有，为什么新特性的交付会被代码评审阻止？

# 为什么存在信任问题

## 技能差距

显然，主要原因是团队中可能有一些人不如其他人熟练。

技能差距需要弥补。如果你的团队存在技能差距，而你又不愿意为此做些什么，你应该问自己一些问题:

*   如果你认为有人达不到你的期望，你怎么能期望高质量的工作被交付呢？
*   如果你的团队中有人不愿意改进，为什么他们还在团队中？
*   你可以在拉式请求评审中把关代码变更吗？
*   拉取请求网关守护会消耗多少时间？
*   你为什么愿意在一个不能信任队友的环境下工作？

## 代码所有权

有些人爱上了他们的代码，以至于他们不允许任何人接触它，当然，他们也不会相信任何人会修改它。

如果你发现自己爱上了你的代码，你应该问自己一些问题:

*   别人修改你的代码会对你有什么影响？对你有什么危害？
*   你保护你的代码是因为你希望它总是完美的吗？
*   别人修改你的代码会使你付出的努力无效吗？
*   别人修改你的代码是否伤害了你的自尊心，因为你知道它不够好，必须修改？

人们过度保护他们的代码的原因是他们太认同它，他们认为当有人需要改变他们的代码是个人的，这是关于他们的，而不是代码。

如果你个人正在修改你的代码，请记住，你的代码不是你无助的孩子，不是你的延伸，如果有人认为需要修改你的代码，也不会自动使你成为一个糟糕的开发人员。

允许他人更改您的代码。

如果你认识一些保护自己代码的人，我认为你应该向他们表明代码的改变与他们无关。

## 错位的责任感

有些人觉得确保其他人做好自己的工作是他们的工作，这是他们的责任。

当你觉得对别人做的工作负有责任时，你可能会开始不那么信任他们，因为，毕竟，你是最能履行自己职责的人。

剧透一下，我也经历过。稍后会详细介绍。

信任问题的存在可能有数不清的原因。然而，有一件事是肯定的——一个有信任问题的团队不是一个有效的团队，它甚至不是一个团队。信任是团队存在的基础。

# 看门人

在一个人们不被信任的团队中，决策是由极少数人来做的。

当不是每个人都能做决定时，你在团队中就有了一个新的角色:看门人…或者保姆，或者你想叫它什么都行。守门人对其他人进行微观管理，你可以想象，这会消耗他们大量的时间，以至于他们自己停止做任何工作，只进行微观管理。

守门人也劝阻其他人。告诉我，如果有人密切关注你的每一步，并不断告诉你你的决定是糟糕的，你的自信心会发生什么变化？我很确定从长远来看你会不再相信自己。

# 摧毁看门人的角色

很明显，照看孩子对团队不利。团队应该是一个每个人的决定都很重要的团体，团队应该建立在合作的基础上，团队应该建立在信任的基础上。

这个角色不会在一夜之间消失，但是你可以采取一些措施至少开始消除它。

## 你不是唯一一个对团队负责的人

我承认，我扮演过看门人的角色。我可以说我不喜欢。

我最终成为那个角色的原因是我觉得对团队太负责了，我觉得如果一些错误的决定或错误的代码被我发现了，那就意味着我没有做好我的工作。

然后我意识到，每个人都要对团队负责。

守卫别人不是你的工作，做他们的工作也不是你的工作。就这么简单。如果做出了错误的决定，责任不会落在你身上，除非你有意识地任其发展。

当我觉得对团队责任太大时，我花了太多时间关注别人在做什么，而忘记了我的优先事项——我应该做的工作。结果，我的生产力下降了。

如果你放弃看门人的角色，世界不会爆炸。每个看门人都需要明白这一点。

理解这一点是摆脱看门人的第一步。

## 开始缩小技能差距

说起来容易做起来难。缩小技能差距需要时间，这是一项巨大的投资。

如果有人不够资格做好自己的工作，也不愿意改进，那么你应该分道扬镳，毕竟，你为什么要留下一个不能带来价值的人呢？

即使开始着手解决技能问题也可能会不舒服，因为至少有一个人需要明白他们需要提高，而且他们可能会认为这是针对个人的。这种可能性可能会阻止问题被指出，如果不承认，你甚至不能开始解决它。

## 更加信任别人

人为什么不信任别人？信任包含风险。有些人就是不能接受这种风险。

有时候你只需要冒险，相信别人在做什么。信任不需要证明别人会达到你的期望。如果你需要证据来信任别人，那就不是信任，而是偏执。

信任是需要赢得的，你不给别人机会，别人又怎么能赢得你的信任呢？

## 拉动式请求审查不是发现错误的唯一方法

你现在可能在想"*无论某人多么合格，没有人是完美的，每个人都会犯错误，这就是为什么我们需要审查拉式请求*"。

我明白，有些领域需要更多的关注和更多的官僚作风。在某些领域，一个小小的错误可能会非常糟糕。有些域名就是不允许你信任，他们要求你验证一切。然而，并不是所有的领域都是这样，事实上，大多数都不是。

如果你有一个不错的自动化测试套件，你可以不需要看门人拉请求。如果你有检查最重要的事情的测试，你可以信任你的团队。一些小错误可能会过去，但是小错误很容易改正。

寻找小错误只会浪费大量本可以用来做更有成效的事情的时间。

当然，在很多项目中，自动化测试不是一件事，更改一行代码就会导致整个系统爆炸。通常，在这种情况下，技术债务是如此之大，以至于即使是拉式请求审查也无济于事，因为系统崩溃的方式实际上是人类无法预测的。这样的系统是建立在希望的基础上的，你只要往里面扔东西，希望世界不会爆炸。

我相信，如果你的团队足够熟练，你可以信任人们，不再需要批准来合并拉取请求。

# 如何跟上变化取决于你自己

如果你认为你需要通过拉请求来跟上项目中发生的事情，没关系，每个人都有自己的方式来保持最新。

我想说的是，需要批准的拉式请求会给整个工作流带来瓶颈。

# 结论

很多信任问题归结于技能差距，人们不愿意承认这一点。信任问题导致守门，这减慢了整个团队的速度。

摆脱守门要求你在团队中建立信任，为了建立信任，你必须缩小技能差距。如果你信任你的团队，那么就没有理由拒绝他们做出的改变。

把关拉取请求不是一种有效的工作方式。作为一个经常参与拉式请求评审的人，我认为这是最糟糕的工作方式(除非你正在做一个开源项目)。

本文的目标不是告诉您如何处理代码审查过程。这篇文章的目的是通过代码评审让你更多地考虑信任和微观管理。你应该自己得出结论。