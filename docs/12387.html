<html>
<head>
<title>Node.js — Converting Strings to Buffers and Vice Versa</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Node.js —将字符串转换为缓冲区，反之亦然</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/node-js-converting-strings-to-buffers-and-vice-versa-5fd279815da7?source=collection_archive---------8-----------------------#2022-06-06">https://levelup.gitconnected.com/node-js-converting-strings-to-buffers-and-vice-versa-5fd279815da7?source=collection_archive---------8-----------------------#2022-06-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="d887" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在Node.js中使用一行程序轻松地将字符串转换为缓冲区，将缓冲区转换为字符串。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/7ac00ae084e41c6b7febc6566bd2bf5e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Jw9V__6jYhm2amP74D_0lw.png"/></div></div></figure><p id="5e7a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">幸运的是，Node.js自带了现成的工具，可以使用全局<code class="fe la lb lc ld b">Buffer</code>对象来处理缓冲区。所以你不需要任何外部库。</p><h2 id="619a" class="le lf it bd lg lh li dn lj lk ll dp lm kb ln lo lp kf lq lr ls kj lt lu lv lw bi translated">将字符串转换为缓冲区</h2><p id="8dcd" class="pw-post-body-paragraph jq jr it js b jt lx jv jw jx ly jz ka kb lz kd ke kf ma kh ki kj mb kl km kn im bi translated">要从字符串创建缓冲区，可以使用<code class="fe la lb lc ld b">Buffer.from(...)</code>方法。您不必显式地导入/要求它，<code class="fe la lb lc ld b">Buffer</code>对象在全局范围内是可用的。</p><p id="0575" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果由于某种原因，您的Node.js版本因为您没有导入它而抛出错误，您仍然可以使用以下命令显式导入它:</p><pre class="kp kq kr ks gt mc ld md me aw mf bi"><span id="cb9a" class="le lf it ld b gy mg mh l mi mj">const { Buffer } = require('buffer');<br/>// OR<br/>import { Buffer } from 'buffer';</span></pre><p id="0541" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">下面的代码片段显示了字符串的初始化及其到缓冲区的转换。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="e0ec" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">作为第一个参数，<code class="fe la lb lc ld b">Buffer.from(...)</code>方法接受一个字符串。即使静态方法被重载，其他输入类型也是可能的。当您决定输入字符串时，第二个参数需要一个可选的编码。在大多数情况下，当使用字符串时，你会想要使用<code class="fe la lb lc ld b">utf-8</code>。尽管你不必显式地将<code class="fe la lb lc ld b">utf-8</code>设置为编码，因为这是默认设置。</p><p id="0c11" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">最终的方法签名如下:<code class="fe la lb lc ld b">Buffer.from(string[, encoding])</code></p><h2 id="36d9" class="le lf it bd lg lh li dn lj lk ll dp lm kb ln lo lp kf lq lr ls kj lt lu lv lw bi translated">把黄油变成细绳</h2><p id="27af" class="pw-post-body-paragraph jq jr it js b jt lx jv jw jx ly jz ka kb lz kd ke kf ma kh ki kj mb kl km kn im bi translated">当你想把一个缓冲区转换回一个字符串的时候，它是简单明了的，并且是受支持的。</p><p id="56eb" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">创建的buffer对象有一个<code class="fe la lb lc ld b">toString(...)</code>方法，将缓冲区转换回字符串。</p><p id="83a4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">例如，在下面的代码片段中，您可以看到我们如何从一个字符串创建一个新的缓冲区，同上，然后使用<code class="fe la lb lc ld b">toString(...)</code>方法将缓冲区转换回我们的初始字符串。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="907e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">类似于<code class="fe la lb lc ld b">Buffer.from(...)</code>方法，<code class="fe la lb lc ld b">toString(...)</code>方法也有一个可选的<code class="fe la lb lc ld b">encoding</code>参数，此外还有一些其他可选的参数。</p><p id="7d5a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">该方法的默认编码也是<code class="fe la lb lc ld b">utf-8</code>。</p><p id="d097" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">所以<code class="fe la lb lc ld b">toString()</code>和<code class="fe la lb lc ld b">toString("utf-8")</code>一样。</p><h2 id="739d" class="le lf it bd lg lh li dn lj lk ll dp lm kb ln lo lp kf lq lr ls kj lt lu lv lw bi translated">你想联系吗？</h2><p id="6350" class="pw-post-body-paragraph jq jr it js b jt lx jv jw jx ly jz ka kb lz kd ke kf ma kh ki kj mb kl km kn im bi translated">如果你想联系我，请在LinkedIn上给我打电话。</p><p id="c598" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">另外，请随意查看我的书籍推荐📚。</p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><div class="kp kq kr ks gt mu"><a href="https://mr-pascal.medium.com/my-book-recommendations-4b9f73bf961b" rel="noopener follow" target="_blank"><div class="mv ab fo"><div class="mw ab mx cl cj my"><h2 class="bd iu gy z fp mz fr fs na fu fw is bi translated">我的书籍推荐</h2><div class="nb l"><h3 class="bd b gy z fp mz fr fs na fu fw dk translated">在接下来的章节中，你可以找到我对所有日常生活话题的书籍推荐，它们对我帮助很大。</h3></div><div class="nc l"><p class="bd b dl z fp mz fr fs na fu fw dk translated">mr-pascal.medium.com</p></div></div><div class="nd l"><div class="ne l nf ng nh nd ni ky mu"/></div></div></a></div><div class="nj nk gp gr nl mu"><a href="https://mr-pascal.medium.com/membership" rel="noopener follow" target="_blank"><div class="mv ab fo"><div class="mw ab mx cl cj my"><h2 class="bd iu gy z fp mz fr fs na fu fw is bi translated">通过我的推荐链接加入Medium—Pascal Zwikirsch</h2><div class="nb l"><h3 class="bd b gy z fp mz fr fs na fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="nc l"><p class="bd b dl z fp mz fr fs na fu fw dk translated">mr-pascal.medium.com</p></div></div><div class="nd l"><div class="nm l nf ng nh nd ni ky mu"/></div></div></a></div></div></div>    
</body>
</html>