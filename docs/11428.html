<html>
<head>
<title>Knative : Serving and Eventing tutorial</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Knative:服务和事件教程</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/knative-serving-and-eventing-tutorial-586b41099dd2?source=collection_archive---------9-----------------------#2022-03-15">https://levelup.gitconnected.com/knative-serving-and-eventing-tutorial-586b41099dd2?source=collection_archive---------9-----------------------#2022-03-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/74862361c4918d13ae6577bd8e8d01c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Xv4VnUu4-dgYkesH3hQvRg.jpeg"/></div></div></figure><p id="7bfb" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">本教程有两个简单的先决条件:</p><ul class=""><li id="6be1" class="kz la it kd b ke kf ki kj km lb kq lc ku ld ky le lf lg lh bi translated">已安装的Knative服务操作员(<a class="ae li" href="https://docs.openshift.com/container-platform/4.3/serverless/installing_serverless/installing-knative-serving.html" rel="noopener ugc nofollow" target="_blank">https://docs . open shift . com/container-platform/4.3/server less/installing _ server less/installing-knative-serving . html</a></li><li id="9962" class="kz la it kd b ke lj ki lk km ll kq lm ku ln ky le lf lg lh bi translated">已安装Knative Eventing操作员(<a class="ae li" href="https://docs.openshift.com/container-platform/4.3/serverless/installing_serverless/installing-knative-eventing.html#installing-knative-eventing" rel="noopener ugc nofollow" target="_blank">https://docs . open shift . com/container-platform/4.3/server less/installing _ server less/installing-knative-Eventing . html # installing-knative-Eventing</a>)</li></ul><p id="ba9c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">一旦两个先决条件都得到满足。我们将从演示开始。</p><blockquote class="lo lp lq"><p id="1def" class="kb kc lr kd b ke kf kg kh ki kj kk kl ls kn ko kp lt kr ks kt lu kv kw kx ky im bi translated">另外，在开始这个演示之前，您可以先尝试一下<strong class="kd iu">Kafka</strong>入门演示！<a class="ae li" href="https://medium.com/swlh/getting-started-with-kafka-on-openshift-c44c0fdec384" rel="noopener">https://medium . com/swlh/getting-started-with-Kafka-on-open shift-c 44 c 0 fdec 384</a></p></blockquote><p id="8b91" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们首先创建一个新项目:</p><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="4ea9" class="me mf it ma b gy mg mh l mi mj">oc new-project knative-demo</span></pre><h2 id="92f3" class="me mf it bd mk ml mm dn mn mo mp dp mq km mr ms mt kq mu mv mw ku mx my mz na bi translated">有创意的服务</h2><p id="7eac" class="pw-post-body-paragraph kb kc it kd b ke nb kg kh ki nc kk kl km nd ko kp kq ne ks kt ku nf kw kx ky im bi translated">要开始本教程，我们需要创建一个图像。您可以点击此链接<a class="ae li" href="https://medium.com/gitconnected/uploading-your-first-docker-image-using-podman-87713e2043a0" rel="noopener">上传您的第一张Docker图片，使用Podman | Neeharika Kompala | Level Up Coding(medium.com)</a>创建图片并上传至docker.io或quaoy.io</p><p id="8c26" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">准备好映像后，我们开始编写service.yaml文件，该文件将包含连接映像和部署映像的详细信息。</p><figure class="lv lw lx ly gt ju"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="4311" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在上面的YAML文件中，您需要根据您已经创建并正在使用的图像文件更新<strong class="kd iu">名称</strong>和<strong class="kd iu">图像</strong>细节。<strong class="kd iu">名称空间</strong>是您在演示的第一步中创建的项目的名称。</p><p id="8be3" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">转到保存service.yaml文件的位置(这里service.yaml在我的knative-serving文件夹中) :</p><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="d48b" class="me mf it ma b gy mg mh l mi mj">oc apply -f knative-serving/service.yaml</span></pre><p id="183b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">创建服务后，您可以运行oc get pods命令来查看pod是否启动并运行。现在运行下面的命令，更改的名称，你会得到一个URL，你需要把这个URL添加到你的etc/hosts文件中。</p><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="e73c" class="me mf it ma b gy mg mh l mi mj">oc get ksvc python-helloworld-demo — output=custom-columns=NAME:.metadata.name,URL:.status.url</span></pre><p id="f309" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">将URL添加到etc/hosts文件后，现在您可以在web浏览器中打开链接。在你的浏览器中打开链接，你会看到“Hello World！”。</p><figure class="lv lw lx ly gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ni"><img src="../Images/23a9eeb20c0db8e29afb97e0301294cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QutL1qUg7wcWi1buNunn5g.png"/></div></div></figure><h2 id="e1f4" class="me mf it bd mk ml mm dn mn mo mp dp mq km mr ms mt kq mu mv mw ku mx my mz na bi translated">失败事件</h2><p id="8dc2" class="pw-post-body-paragraph kb kc it kd b ke nb kg kh ki nc kk kl km nd ko kp kq ne ks kt ku nf kw kx ky im bi translated">现在我们将处理事件，我们首先部署一个服务来显示来自事件源的事件。</p><figure class="lv lw lx ly gt ju"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="cd44" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">转到保存event-display.yaml文件的位置(此处event-display.yaml位于我的knative-eventing文件夹中) :</p><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="bfa0" class="me mf it ma b gy mg mh l mi mj">oc apply -f knative-eventing/event-display.yaml</span></pre><p id="0b9c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在你的事件欢迎将被创建，它是上面YAML文件中提到的名字。</p><p id="9f97" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们使用Cronjob事件源定期发送事件。事件数据被发送到已配置的接收器。</p><p id="070b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">要部署事件源，</p><figure class="lv lw lx ly gt ju"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="db96" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">转到保存event-source.yaml文件的位置(此处event-source.yaml位于我的knative-eventing文件夹中) :</p><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="73d0" class="me mf it ma b gy mg mh l mi mj">oc apply -f knative-eventing/event-source.yaml</span></pre><p id="9899" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在，一旦创建了event-greeter-cronjob-source，就可以检查cronjob的状态了:</p><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="ba69" class="me mf it ma b gy mg mh l mi mj">oc get cronjobsources.sources.eventing.knative.dev</span></pre><figure class="lv lw lx ly gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nj"><img src="../Images/5a8f13904163380231c2bdc02fd3c457.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BPzczvWrU-5yhUGntDKZiQ.png"/></div></div></figure><p id="138c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">你可以在Openshift控制台中查看日志，你得到了Knative-Demo pod并查看事件欢迎程序的日志</p><figure class="lv lw lx ly gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nk"><img src="../Images/dd47c25fd29c1a81be1fc290f98db3bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jJob7zGSyS-8NdkU_-5Qzw.png"/></div></div></figure><p id="89b8" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">Knative非常适合分析，在我接下来的文章中，我们将进一步讨论容器化分析和其他使用Kafka和Knative执行的工作。</p></div></div>    
</body>
</html>