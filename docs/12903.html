<html>
<head>
<title>Hot Reloading a SceneDelegate in Swift</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Swift中热重装SceneDelegate</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/hot-reloading-a-scenedelegate-in-swift-cd9c23fcdf5e?source=collection_archive---------7-----------------------#2022-07-19">https://levelup.gitconnected.com/hot-reloading-a-scenedelegate-in-swift-cd9c23fcdf5e?source=collection_archive---------7-----------------------#2022-07-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/33561474c0ba02f1a0a99e3f375bc437.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*v2lGni4wx53--fhz"/></div></div></figure><p id="6027" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在我之前的博客文章中，我告诉过你关于热重装SwiftUI应用程序的事情。</p><p id="8b1f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在这篇博文中，我将告诉你如何注入没有绑定到UI表示的代码。示例:在基于UIKit的应用程序中测试自定义URL的处理时，您需要更改场景委托中的代码。</p><p id="1978" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您需要相同的工具:</p><ul class=""><li id="40c6" class="kx ky iq ka b kb kc kf kg kj kz kn la kr lb kv lc ld le lf bi translated">由Krzysztof Zabł ocki创建的Swift包</li><li id="9ea3" class="kx ky iq ka b kb lk kf ll kj lm kn ln kr lo kv lc ld le lf bi translated"><code class="fe lg lh li lj b">InjectionIII</code>，这是一个macOS应用程序，用于执行繁重的工作(即，监视修改后的源代码并插入新功能，就好像它已被编译到SwiftUI应用程序中一样)</li></ul><p id="5ec1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我假设你在你的应用程序(<code class="fe lg lh li lj b">-Xlinker -interposable</code>)的构建设置中做了必要的配置，并且在你的Mac上运行了<code class="fe lg lh li lj b">InjectIII.app</code>。</p><p id="e3a6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">关键的区别在于我们没有使用<code class="fe lg lh li lj b">Inject.ViewControllerHost(...)</code>或<code class="fe lg lh li lj b">Inject.ViewHost(...)</code>。相反，我们调用AppDelegate中的惰性属性<code class="fe lg lh li lj b">Inject.load</code>,这样<code class="fe lg lh li lj b">InjectIII.app</code>将从应用程序开始就监视文件的更改。</p><pre class="lp lq lr ls gt lt lj lu lv aw lw bi"><span id="9171" class="lx ly iq lj b gy lz ma l mb mc">import UIKit<br/>import Inject</span><span id="a4d3" class="lx ly iq lj b gy md ma l mb mc"><a class="ae kw" href="http://twitter.com/main" rel="noopener ugc nofollow" target="_blank">@main</a><br/>class AppDelegate: UIResponder, UIApplicationDelegate {</span><span id="351a" class="lx ly iq lj b gy md ma l mb mc">func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?) -&gt; Bool {<br/>        Inject.load // connects running iOS simulator with InjectIII.app<br/>        return true<br/>    }<br/>    // ...<br/>}</span></pre><p id="6800" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">就是这样！</p><figure class="lp lq lr ls gt jr"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="a5ea" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在我的视频中，我还证明了当iOS生命周期处理调用时，对<code class="fe lg lh li lj b">SceneDelegate.swift</code>的更改将被注入并最终执行。</p><p id="1c5a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">对于我的视频，我在<code class="fe lg lh li lj b">Info.plist</code>中注册了一个URL方案。</p><p id="d3ff" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在运行app之前，我给<code class="fe lg lh li lj b">SceneDelegate</code>类<em class="mg">添加了以下函数。</em></p><pre class="lp lq lr ls gt lt lj lu lv aw lw bi"><span id="fb8a" class="lx ly iq lj b gy lz ma l mb mc">func scene(_ scene: UIScene, openURLContexts URLContexts: Set&lt;UIOpenURLContext&gt;) {<br/>    for context in URLContexts {<br/>        print("url: \(context.url.absoluteURL)")<br/>        print("scheme: \(String(describing: context.url.scheme))")<br/>        print("host: \(String(describing: context.url.host))")<br/>        print("path: \(context.url.path)")<br/>        print("components: \(context.url.pathComponents)")<br/>    }<br/>}</span></pre><p id="c824" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">一旦应用程序开始在iOS模拟器中运行，我会更改<code class="fe lg lh li lj b">scene(_:openURLContexts:)</code>的实现</p><p id="8416" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">使用终端命令<code class="fe lg lh li lj b">xcrun simctl openurl booted &lt;myCustomURLScheme&gt;</code>，我在运行的iOS模拟器中调用一个定制的URL，我看到注入的代码被执行。</p></div><div class="ab cl mh mi hu mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ij ik il im in"><p id="247f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mg">原载于</em><a class="ae kw" href="https://blog.eidinger.info/hot-reloading-a-scenedelegate-in-swift" rel="noopener ugc nofollow" target="_blank"><em class="mg">https://blog . ei dinger . info</em></a><em class="mg">。</em></p></div><div class="ab cl mh mi hu mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ij ik il im in"><h1 id="106e" class="mo ly iq bd mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk bi translated">分级编码</h1><p id="2a8a" class="pw-post-body-paragraph jy jz iq ka b kb nl kd ke kf nm kh ki kj nn kl km kn no kp kq kr np kt ku kv ij bi translated">感谢您成为我们社区的一员！在你离开之前:</p><ul class=""><li id="61ae" class="kx ky iq ka b kb kc kf kg kj kz kn la kr lb kv lc ld le lf bi translated">👏为故事鼓掌，跟着作者走👉</li><li id="93cd" class="kx ky iq ka b kb lk kf ll kj lm kn ln kr lo kv lc ld le lf bi translated">📰查看<a class="ae kw" href="https://levelup.gitconnected.com/" rel="noopener ugc nofollow" target="_blank">级别提升编码</a>中的更多内容</li><li id="eac6" class="kx ky iq ka b kb lk kf ll kj lm kn ln kr lo kv lc ld le lf bi translated">🔔关注我们:<a class="ae kw" href="https://twitter.com/gitconnected" rel="noopener ugc nofollow" target="_blank"> Twitter </a> | <a class="ae kw" href="https://www.linkedin.com/company/gitconnected" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a></li><li id="f3d4" class="kx ky iq ka b kb lk kf ll kj lm kn ln kr lo kv lc ld le lf bi translated">🚀👉<a class="ae kw" href="https://jobs.levelup.dev/" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir">软件工程师的顶级职位</strong> </a></li></ul></div></div>    
</body>
</html>