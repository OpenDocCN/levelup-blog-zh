<html>
<head>
<title>Face recognition with OpenCV</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">基于OpenCV的人脸识别</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/face-recognition-with-opencv-e93350876c84?source=collection_archive---------7-----------------------#2022-09-27">https://levelup.gitconnected.com/face-recognition-with-opencv-e93350876c84?source=collection_archive---------7-----------------------#2022-09-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="96f8" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">比较两张图像，确定两张图像上的人是否是同一个人</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/4df656a92f1541c6d1f419e40636ea1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rJIvXutdS7rLsBwR-QNV-w.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">金德尔传媒摄影:<a class="ae ky" href="https://www.pexels.com/photo/person-drawing-smiling-sun-on-sand-7938450/" rel="noopener ugc nofollow" target="_blank">https://www . pexels . com/photo/person-drawing-smiling-sun-on-sand-7938450/</a></figcaption></figure><p id="9c78" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在之前的一篇文章中，我写了如何在Mac电脑上设置OpenCV。</p><div class="lv lw gp gr lx ly"><a href="https://remy-villulles.medium.com/setup-opencv-for-python-on-mac-aeb898c28adf" rel="noopener follow" target="_blank"><div class="lz ab fo"><div class="ma ab mb cl cj mc"><h2 class="bd iu gy z fp md fr fs me fu fw is bi translated">在Mac上为Python设置OpenCV</h2><div class="mf l"><h3 class="bd b gy z fp md fr fs me fu fw dk translated">一种对M1和英特尔都有效的特殊方法！</h3></div><div class="mg l"><p class="bd b dl z fp md fr fs me fu fw dk translated">remy-villulles.medium.com</p></div></div><div class="mh l"><div class="mi l mj mk ml mh mm ks ly"/></div></div></a></div><p id="66f2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">今天我们就来看看OpenCV的用法之一:<strong class="lb iu">图像上的人脸识别</strong>。</p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h2 id="3bd1" class="mu mv it bd mw mx my dn mz na nb dp nc li nd ne nf lm ng nh ni lq nj nk nl nm bi translated">安装附加依赖项</h2><p id="c896" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">由于这篇文章部分基于我的上一篇文章。我假设你已经安装了<strong class="lb iu"> miniforge和<strong class="lb iu">兼容的python版本</strong> (3.8或3.9也可以)</strong></p><p id="5fe7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，让我们打开一个终端并<strong class="lb iu">激活</strong>我们的环境:</p><pre class="kj kk kl km gt ns nt nu nv aw nw bi"><span id="3c07" class="mu mv it nt b gy nx ny l nz oa">conda activate cv</span></pre><p id="c49f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦完成，我们将安装我们需要的<strong class="lb iu">两个依赖项</strong>:</p><pre class="kj kk kl km gt ns nt nu nv aw nw bi"><span id="65a9" class="mu mv it nt b gy nx ny l nz oa">conda install -c conda-forge opencv-python face_recognition</span></pre><p id="6e84" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就是这样！我们拥有完成这篇文章所需的所有工具。让我们开始编码吧！</p></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h2 id="9617" class="mu mv it bd mw mx my dn mz na nb dp nc li nd ne nf lm ng nh ni lq nj nk nl nm bi translated">从图像中提取数据</h2><p id="6f78" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">对于这篇文章，我们需要<strong class="lb iu">三张图片</strong>。<strong class="lb iu">同一个人的两张</strong>(但图像不同)第三张<strong class="lb iu">来自别人</strong>。我选择用《奇异博士》作为我的两张图，托尼·斯塔克作为第三张！</p><p id="beb4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，我们需要用OpenCV 打开并分析图像。我们将导入它并调用<code class="fe ob oc od nt b"><strong class="lb iu">imdread</strong></code>函数，将执行脚本的<strong class="lb iu">相对路径</strong>作为参数:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oe"><img src="../Images/9d590108083e62c08df4111ca1a41421.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_e4l--6IjfyQV9yhOCNHtw.png"/></div></div></figure><p id="b06c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">很好，现在我们需要“简化”图像，使人脸识别脚本更容易识别这个人的脸。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi of"><img src="../Images/b17afa5718e9c11c3718019e317ab958.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Zh761MVQDohz_ZYNVK3a4Q.png"/></div></div></figure><p id="dea5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，一旦图像被简化，我们希望通过使用我们的<code class="fe ob oc od nt b"><strong class="lb iu">face_recognition</strong></code>库对面部进行编码，以<strong class="lb iu">检测面部</strong>并将其转换为<strong class="lb iu">数据</strong>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi og"><img src="../Images/7a8c916f57c05fe7b44f525c78e5e584.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZAE3aLCuQ4aFmNowSfvYNQ.png"/></div></div></figure><blockquote class="oh oi oj"><p id="22ec" class="kz la ok lb b lc ld ju le lf lg jx lh ol lj lk ll om ln lo lp on lr ls lt lu im bi translated">因为我们在这里只使用了<strong class="lb iu">一张人脸</strong>，我们只是得到了由<code class="fe ob oc od nt b"><strong class="lb iu">face_encodings</strong></code>返回的编码数组的<strong class="lb iu">第一个元素，然而在我们想要识别多张人脸的情况下，你可能想要做不同的事情</strong></p></blockquote></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><h2 id="e533" class="mu mv it bd mw mx my dn mz na nb dp nc li nd ne nf lm ng nh ni lq nj nk nl nm bi translated">比较这两幅图像</h2><p id="e4be" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">现在我们的<code class="fe ob oc od nt b"><strong class="lb iu">readImage</strong></code>函数已经完成，我们将处理第二个函数，该函数将<strong class="lb iu">使用由<code class="fe ob oc od nt b"><strong class="lb iu">readImage</strong></code>和<strong class="lb iu">返回的来自两幅图像</strong>的数据，将它们匹配在一起</strong>。</p><p id="56d2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们创建一个名为<code class="fe ob oc od nt b">recognise</code>的函数，并在其中运行以下代码:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oo"><img src="../Images/4776ece5eb26ce8709d0c733be3dff66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YbkYJIixJS3soLc5DNV4kg.png"/></div></div></figure><p id="89f3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，我们将匹配这些数据</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi op"><img src="../Images/1c0214f7659505fa2edf0d13ff25f96f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Gb-j0nuDQMG4lGCDXNgcVA.png"/></div></div></figure><p id="a9b0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所以，<code class="fe ob oc od nt b">compare_faces</code>需要两个参数:</p><ul class=""><li id="572c" class="oq or it lb b lc ld lf lg li os lm ot lq ou lu ov ow ox oy bi translated">编码的<strong class="lb iu">数组</strong></li><li id="85af" class="oq or it lb b lc oz lf pa li pb lm pc lq pd lu ov ow ox oy bi translated">一个<strong class="lb iu">单个</strong>编码</li></ul><p id="c49c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这意味着我们总是<strong class="lb iu">将X个编码</strong>与<strong class="lb iu">匹配，只有一个</strong>。</p><p id="a4d3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们一起来看看代码</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pe"><img src="../Images/cbe688640a26fc359f2a74a1109b15e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eh41aFBphciHORqkIqgbPw.png"/></div></div></figure><p id="b2fb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">开始了。如果您运行这段代码，您将能够在控制台中看到<strong class="lb iu">【真】</strong>或<strong class="lb iu">【假】</strong></p><blockquote class="oh oi oj"><p id="f800" class="kz la ok lb b lc ld ju le lf lg jx lh ol lj lk ll om ln lo lp on lr ls lt lu im bi translated">当我们比较<strong class="lb iu"> X编码和</strong>X编码时，我们得到了一个<strong class="lb iu">布尔值</strong>数组。</p></blockquote></div><div class="ab cl mn mo hx mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="im in io ip iq"><p id="b58d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">而这就是你如何不费吹灰之力就能做到简单的人脸识别！</p><p id="d14d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我希望这篇文章对你有用！留下一个掌声或跟随，如果它这样做，这将是非常有益的！</p><p id="9055" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢您的阅读！</p></div></div>    
</body>
</html>