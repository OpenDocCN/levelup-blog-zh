<html>
<head>
<title>Django: How to build a login view in 1 minute</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Django:如何在1分钟内构建一个登录视图</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/django-how-to-build-a-login-view-in-1-minute-1a6bead2a3bd?source=collection_archive---------16-----------------------#2021-03-29">https://levelup.gitconnected.com/django-how-to-build-a-login-view-in-1-minute-1a6bead2a3bd?source=collection_archive---------16-----------------------#2021-03-29</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="591d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">快速技巧:如何重用Django内置的身份验证表单</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi ko"><img src="../Images/34846527310bbf01885fee64104efa41.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*Ef8fPJ4qiY3WFk5Nc9NMJw.png"/></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk translated">Django默认登录视图</figcaption></figure><p id="44f8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您是否需要验证您的用户，但不想用CSS编写HTML，为此添加视图，并将该视图添加到urls.py？</p><p id="a1b2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我知道这种感觉，我是来帮你的！</p><p id="eeeb" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">很可能，您的url模式中已经有了这个路径:</p><pre class="kp kq kr ks gt la lb lc ld aw le bi"><span id="0fac" class="lf lg it lb b gy lh li l lj lk">path(<strong class="lb iu">'admin/'</strong>, admin.site.urls),</span></pre><p id="bd7e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在，只需将此添加到您的任何视图中:</p><pre class="kp kq kr ks gt la lb lc ld aw le bi"><span id="bd95" class="lf lg it lb b gy lh li l lj lk"><strong class="lb iu">def </strong>index(request):<br/>    <strong class="lb iu">if </strong>request.user.is_anonymous:<br/>        <strong class="lb iu">return </strong>redirect(<strong class="lb iu">"/admin/login/?next=/"</strong>)<br/>    ...</span></pre><p id="4f7c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">因此，如果用户没有通过身份验证，他/她将被重定向到Django系统的默认登录视图，然后，在登录之后，用户将被重定向到您在？next=参数。在这种情况下，它会将用户重定向到根目录。</p></div><div class="ab cl ll lm hx ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="im in io ip iq"><p id="26f5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我只答应登录。注销有点复杂，您需要为此添加一个URL:</p><pre class="kp kq kr ks gt la lb lc ld aw le bi"><span id="7f87" class="lf lg it lb b gy lh li l lj lk">urlpatterns = [<br/>    ...<br/>    path(<strong class="lb iu">'logout'</strong>, views.logout_view),<br/>    ...<br/>]</span></pre><p id="7cd7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在视图中，只需添加这个注销功能:</p><pre class="kp kq kr ks gt la lb lc ld aw le bi"><span id="957d" class="lf lg it lb b gy lh li l lj lk"><strong class="lb iu">def </strong>logout_view(request):<br/>    logout(request)<br/>    <strong class="lb iu">return </strong>redirect(<strong class="lb iu">"/"</strong>)</span></pre><p id="ec6a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">就是这样！我敢打赌，你花了更多的时间来阅读这个比实现它。</p><p id="0017" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">参见我关于Django和Python的其他文章。</p></div></div>    
</body>
</html>