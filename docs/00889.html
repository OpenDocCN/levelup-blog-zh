<html>
<head>
<title>Write a native module to enable full-screen mode in React Native (Android)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">编写一个原生模块，在React Native (Android)中启用全屏模式</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/write-your-own-react-native-module-to-enable-full-screen-mode-android-cfe246329740?source=collection_archive---------4-----------------------#2019-09-04">https://levelup.gitconnected.com/write-your-own-react-native-module-to-enable-full-screen-mode-android-cfe246329740?source=collection_archive---------4-----------------------#2019-09-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div class="gh gi jq"><img src="../Images/602a7777db09f1b358c2121e21df81a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1156/format:webp/1*stjXvPREQFHtX_oXcML4iA.png"/></div><figcaption class="jx jy gj gh gi jz ka bd b be z dk translated">图片提供:android docs</figcaption></figure><p id="2324" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">有些情况下，屏幕需要处于全屏模式，以最大限度地利用屏幕空间或避免用户意外退出应用程序。然而，React Native没有内置的解决方案来进入或退出全屏模式，隐藏系统导航栏，或隐藏系统状态栏。</p><p id="1f75" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我见过一些开发人员使用一些类似<a class="ae kz" href="https://github.com/mockingbot/react-native-immersive" rel="noopener ugc nofollow" target="_blank"> react-native-immersive </a>的模块来启用全屏沉浸式模式，但我认为这将是一个编写我的第一个原生模块并将其桥接到React Native的绝佳机会。</p><p id="73d4" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我建议仔细阅读React Native docs中提供的“Toast示例”,以了解如何将平台API桥接到JS。</p><p id="f2d5" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在让我们从如何启用全屏模式的<a class="ae kz" href="https://developer.android.com/training/system-ui/immersive#EnableFullscreen" rel="noopener ugc nofollow" target="_blank"> android文档开始。</a>快速阅读后，我意识到它使用了<code class="fe la lb lc ld b">View</code>类中的<code class="fe la lb lc ld b"><strong class="kd iu">setSystemUiVisibility()</strong></code> <strong class="kd iu"> </strong>以及<strong class="kd iu"> </strong>系统UI标志，如<code class="fe la lb lc ld b">SYSTEM_UI_FLAG_LAYOUT_STABLE</code>、<code class="fe la lb lc ld b">SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION</code>、<br/>、<code class="fe la lb lc ld b">SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN</code>、<code class="fe la lb lc ld b"> SYSTEM_UI_FLAG_HIDE_NAVIGATION</code> <br/> <code class="fe la lb lc ld b">SYSTEM_UI_FLAG_FULLSCREEN</code>等。</p><p id="01d2" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">让我们在<code class="fe la lb lc ld b">android/app/src/main/java/com/your-app-name/</code>中创建一个新文件<code class="fe la lb lc ld b">FullScreenModule.java</code>，并使用android文档中提到的函数<code class="fe la lb lc ld b"><strong class="kd iu">setSystemUiVisibility()</strong></code> <strong class="kd iu"> </strong>。</p><figure class="le lf lg lh gt ju"><div class="bz fp l di"><div class="li lj l"/></div><figcaption class="jx jy gj gh gi jz ka bd b be z dk translated">FullScreenModule.java</figcaption></figure><p id="cf72" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">下一步是使用<code class="fe la lb lc ld b">createNativeModules()</code>注册模块。在<code class="fe la lb lc ld b">android/app/src/main/java/com/your-app-name/</code>中创建一个文件<code class="fe la lb lc ld b">FullScreenPackage.java</code>，内容如下:</p><figure class="le lf lg lh gt ju"><div class="bz fp l di"><div class="li lj l"/></div><figcaption class="jx jy gj gh gi jz ka bd b be z dk translated">FullScreenPackage.java</figcaption></figure><p id="05e4" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在将<code class="fe la lb lc ld b">FullScreenPackage</code>连接到<code class="fe la lb lc ld b"><strong class="kd iu">MainApplication.java</strong></code>内的<code class="fe la lb lc ld b">getPackages()</code>:</p><pre class="le lf lg lh gt lk ld ll lm aw ln bi"><span id="6ae4" class="lo lp it ld b gy lq lr l ls lt">// MainApplication.java<br/>............</span><span id="14e5" class="lo lp it ld b gy lu lr l ls lt">import com.appname.FullScreenPackage; // add package Name</span><span id="dfeb" class="lo lp it ld b gy lu lr l ls lt">............<br/>protected List&lt;ReactPackage&gt; getPackages() {<br/>  @SuppressWarnings("UnnecessaryLocalVariable")<br/>  List&lt;ReactPackage&gt; packages = new PackageList(this).getPackages();</span><span id="5ea0" class="lo lp it ld b gy lu lr l ls lt">  // ... add the next line<br/>  packages.add(new FullScreenPackage());<br/>  return packages;<br/>}</span></pre><p id="bad6" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">最后一步是用JavaScript封装本机模块。创建一个名为<strong class="kd iu"> FullScreen.js </strong>的新文件</p><pre class="le lf lg lh gt lk ld ll lm aw ln bi"><span id="87c3" class="lo lp it ld b gy lq lr l ls lt">// FullScreen.js</span><span id="2595" class="lo lp it ld b gy lu lr l ls lt">import {NativeModules} from 'react-native';<br/>module.exports = NativeModules.FullScreen;</span></pre><p id="37bb" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在您可以启用或禁用全屏:</p><pre class="le lf lg lh gt lk ld ll lm aw ln bi"><span id="1ba9" class="lo lp it ld b gy lq lr l ls lt">import FullScreen from "../utils/FullScreen";</span><span id="3648" class="lo lp it ld b gy lu lr l ls lt">FullScreen.enable();<br/>FullScreen.disable();</span></pre><p id="4101" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">点击查看<a class="ae kz" href="https://github.com/neonsec/react-native-full-screen-demo" rel="noopener ugc nofollow" target="_blank"> repo的工作演示。</a></p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><div class="le lf lg lh gt mc"><a href="https://gitconnected.com/learn/react-native" rel="noopener  ugc nofollow" target="_blank"><div class="md ab fo"><div class="me ab mf cl cj mg"><h2 class="bd iu gy z fp mh fr fs mi fu fw is bi translated">学习React Native -最佳React Native教程(2019) | gitconnected</h2><div class="mj l"><h3 class="bd b gy z fp mh fr fs mi fu fw dk translated">十大React Native教程-免费学习React Native。课程由开发者提交并投票…</h3></div><div class="mk l"><p class="bd b dl z fp mh fr fs mi fu fw dk translated">gitconnected.com</p></div></div><div class="ml l"><div class="mm l mn mo mp ml mq jv mc"/></div></div></a></div></div></div>    
</body>
</html>