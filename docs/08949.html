<html>
<head>
<title>How to Implement reCAPTCHA in a React Application</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在React应用程序中实现reCAPTCHA</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-implement-recaptcha-in-a-react-application-6098c506d750?source=collection_archive---------2-----------------------#2021-06-22">https://levelup.gitconnected.com/how-to-implement-recaptcha-in-a-react-application-6098c506d750?source=collection_archive---------2-----------------------#2021-06-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="fc5b" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">reCAPTCHA和React Google reCAPTCHA库简介</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/3ded0f82154f7173737a3488cbbbb6b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ARkqXQkuO-1YeBlu"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@agk42?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">亚历山大·奈特</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</figcaption></figure><p id="6773" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">验证码<em class="lv">(区分计算机和人类的全自动公共图灵测试)</em>是一种用于确定用户是人还是机器人的测试。如果您正在处理一个机器人，验证码可以用于以下情况:</p><ul class=""><li id="3aed" class="lw lx it lb b lc ld lf lg li ly lm lz lq ma lu mb mc md me bi translated">限制服务注册</li><li id="75c0" class="lw lx it lb b lc mf lf mg li mh lm mi lq mj lu mb mc md me bi translated">防止大量购票</li><li id="77ad" class="lw lx it lb b lc mf lf mg li mh lm mi lq mj lu mb mc md me bi translated">防止虚假评论</li></ul><p id="8467" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">验证码最常见的形式是reCAPTCHA，这是谷歌的一项服务。我相信你以前在浏览互联网时遇到过这种情况。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/aa3ee2050c975de2793f3b57bbc64efa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1216/format:webp/1*2vT01_SCHG2HO6f836w2ZQ.png"/></div></figure><p id="011f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我们将了解reCAPTCHA，并学习如何在React应用程序中实现它。</p></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><h1 id="2298" class="ms mt it bd mu mv mw mx my mz na nb nc jz nd ka ne kc nf kd ng kf nh kg ni nj bi translated">什么是reCAPTCHA</h1><blockquote class="nk nl nm"><p id="b0bd" class="kz la lv lb b lc ld ju le lf lg jx lh nn lj lk ll no ln lo lp np lr ls lt lu im bi translated"><a class="ae ky" href="https://www.google.com/recaptcha/about/" rel="noopener ugc nofollow" target="_blank"> reCAPTCHA </a>使用高级风险分析引擎和适应性挑战来阻止恶意软件在您的网站上从事滥用活动。与此同时，合法用户将能够登录、购物、浏览网页或创建账户，而假冒用户将被屏蔽。</p></blockquote><p id="20b9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最初的reCAPTCHA v1挑战发布于2007年。它看起来像这样。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/af2c457dc87e71716a327fe8d97265cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:638/format:webp/1*ljcHgIN43_xUurV4e_bbMQ.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://developers.google.com/recaptcha/old/docs/customization" rel="noopener ugc nofollow" target="_blank">https://developers . Google . com/recaptcha/old/docs/customization</a></figcaption></figure><p id="adfe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个版本的reCAPTCHA在2018年被关闭。</p><h1 id="9207" class="ms mt it bd mu mv nr mx my mz ns nb nc jz nt ka ne kc nu kd ng kf nv kg ni nj bi translated">reCAPTCHA v2与reCAPTCHA v3</h1><p id="0e22" class="pw-post-body-paragraph kz la it lb b lc nw ju le lf nx jx lh li ny lk ll lm nz lo lp lq oa ls lt lu im bi translated">目前，reCAPTCHA有两个版本，版本2和版本3。</p><p id="5568" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">reCAPTCHA的最新版本是2018年发布的第3版。reCAPTCHA v3根据与机器人交互的可能性为每个请求返回一个分数。根据收到的分数，您可以配置要采取的操作。</p><p id="6d47" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然v3是最新版本，但reCAPTCHA更常见的形式是版本2。这是2014年发布的。</p><p id="2e88" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">reCAPTCHA v2有两个选项，复选框或不可见。</p><p id="e637" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">复选框</strong> —如下图所示显示一个复选框。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/aa3ee2050c975de2793f3b57bbc64efa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1216/format:webp/1*2vT01_SCHG2HO6f836w2ZQ.png"/></div></figure><p id="8db5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有时，你需要采取额外的步骤来验证你是否是人而不是机器人。这将是一个涉及选择正确图像的挑战。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/0c03919c2bae5bf00bb5dda4c2c7ec16.png" data-original-src="https://miro.medium.com/v2/resize:fit:1010/format:webp/1*LlYueym7lhk1fynyYXONGw.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://support.google.com/recaptcha/" rel="noopener ugc nofollow" target="_blank">https://support.google.com/recaptcha/</a></figcaption></figure><p id="3ba2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">不可见</strong> —显示徽章，reCAPTCHA在后台运行。如果它检测到一个机器人，上面的挑战将出现。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/cb90c9d2a7fe122173a4df79f9bbec59.png" data-original-src="https://miro.medium.com/v2/resize:fit:816/format:webp/1*zG0qLrvbTKLTXCqU9mblbA@2x.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://www.google.com/recaptcha/about/" rel="noopener ugc nofollow" target="_blank">https://www.google.com/recaptcha/about/</a></figcaption></figure><h1 id="9b25" class="ms mt it bd mu mv nr mx my mz ns nb nc jz nt ka ne kc nu kd ng kf nv kg ni nj bi translated">React应用程序中的实现</h1><p id="520b" class="pw-post-body-paragraph kz la it lb b lc nw ju le lf nx jx lh li ny lk ll lm nz lo lp lq oa ls lt lu im bi translated">现在我们已经了解了什么是reCAPTCHA，我们将在React应用程序中创建一个简单的示例。对于这个例子，我们将使用来自<code class="fe od oe of og b">create-react-app</code>的样板应用程序。</p><h2 id="ab45" class="oh mt it bd mu oi oj dn my ok ol dp nc li om on ne lm oo op ng lq oq or ni os bi translated">获取谷歌密钥</h2><p id="1762" class="pw-post-body-paragraph kz la it lb b lc nw ju le lf nx jx lh li ny lk ll lm nz lo lp lq oa ls lt lu im bi translated">我们需要的第一件事是从谷歌的reCAPTCHA密钥。访问他们的首页<a class="ae ky" href="https://www.google.com/recaptcha/about/" rel="noopener ugc nofollow" target="_blank">这里</a>，并前往管理控制台。</p><p id="c4e8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您将被带到下一页。为您的reCAPTCHA键添加标签。然后选择您想要使用的版本。对于我们的例子，我们将使用版本2复选框。我们还需要添加我们将使用这个reCAPTCHA的任何域名。注册仅限于您在此输入的域，以及任何子域。对于我们的例子，我们将只使用<code class="fe od oe of og b">localhost</code>在我们的本地环境中进行测试。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ot"><img src="../Images/216ec22c9a8ffe1aca2c8c63f17c3402.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m1tKEEwvSEZ-_YJiXKhiAg.png"/></div></div></figure><p id="c5b3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">创建后，您将收到两个密钥。一个是站点密钥，一个是秘密密钥。客户端需要站点密钥来识别您的注册。密钥将用于在服务器端验证用户的响应。这是一个秘密密钥，不应该在客户端共享。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ou"><img src="../Images/70ecb41c05a1efb64488c43e3954ccd3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YCSaFoq2V5U30V6HYlmSgA.png"/></div></div></figure><h2 id="a010" class="oh mt it bd mu oi oj dn my ok ol dp nc li om on ne lm oo op ng lq oq or ni os bi translated">安装react-google-recaptcha</h2><p id="9f05" class="pw-post-body-paragraph kz la it lb b lc nw ju le lf nx jx lh li ny lk ll lm nz lo lp lq oa ls lt lu im bi translated">收到密钥后，我们将把<a class="ae ky" href="https://www.npmjs.com/package/react-google-recaptcha" rel="noopener ugc nofollow" target="_blank"> react-google-recaptcha </a>安装到我们的项目中。这是一个可靠的图书馆，每周下载量超过270，000次。这个库为我们提供了一个React组件，用于Google reCAPTCHA v2。</p><p id="4229" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe od oe of og b">import ReCAPTCHA from ‘react-google-recaptcha’</code>一经安装。</p><p id="694d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要渲染组件，您只需要以下道具:</p><ul class=""><li id="5280" class="lw lx it lb b lc ld lf lg li ly lm lz lq ma lu mb mc md me bi translated"><strong class="lb iu"> sitekey </strong> —来自Google的API客户端密钥</li><li id="fc51" class="lw lx it lb b lc mf lf mg li mh lm mi lq mj lu mb mc md me bi translated"><strong class="lb iu"> onChange </strong> —用户完成验证码时的回调函数</li></ul><pre class="kj kk kl km gt ov og ow ox aw oy bi"><span id="6db1" class="oh mt it og b gy oz pa l pb pc">import ReCAPTCHA from ‘react-google-recaptcha’</span><span id="a5fd" class="oh mt it og b gy pd pa l pb pc">const App = () =&gt; {<br/>  function onChange(<em class="lv">value</em>) {<br/>    console.log('Captcha value:', <em class="lv">value</em>);<br/>  }</span><span id="1353" class="oh mt it og b gy pd pa l pb pc">  return (<br/>    &lt;div <em class="lv">className</em>="App"&gt;<br/>      &lt;<em class="lv">ReCAPTCHA<br/>        sitekey</em>="YOUR-SITE-KEY"<br/>        <em class="lv">onChange</em>={onChange}<br/>      /&gt;<br/>    &lt;/div&gt;<br/>  );<br/>};</span></pre><p id="db31" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们将上面的代码呈现在屏幕上，我们应该会看到下面的reCAPTCHA复选框呈现在我们的应用程序中。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/aa3ee2050c975de2793f3b57bbc64efa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1216/format:webp/1*2vT01_SCHG2HO6f836w2ZQ.png"/></div></figure><p id="5479" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">ReCAPTCHA组件还采用了以下可选属性，以及其他属性:</p><ul class=""><li id="eca3" class="lw lx it lb b lc ld lf lg li ly lm lz lq ma lu mb mc md me bi translated"><strong class="lb iu">主题</strong> — ( <em class="lv">亮</em>或<em class="lv">暗)</em>改变小工具的主题</li><li id="ee8b" class="lw lx it lb b lc mf lf mg li mh lm mi lq mj lu mb mc md me bi translated"><strong class="lb iu">大小</strong> —( <em class="lv">紧凑</em>、<em class="lv">正常</em>或<em class="lv">不可见)</em>改变验证码的大小或类型</li><li id="eee9" class="lw lx it lb b lc mf lf mg li mh lm mi lq mj lu mb mc md me bi translated"><strong class="lb iu"> onErrored </strong> —发生挑战错误时的回调函数</li><li id="2203" class="lw lx it lb b lc mf lf mg li mh lm mi lq mj lu mb mc md me bi translated"><strong class="lb iu">徽章</strong> — ( <em class="lv">右下</em>、<em class="lv">左下</em>或<em class="lv">内联)</em>改变加盖徽章的位置</li></ul><p id="5909" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">查看<a class="ae ky" href="https://github.com/dozoisch/react-google-recaptcha" rel="noopener ugc nofollow" target="_blank">文档</a>以了解更多可选道具。</p><h1 id="61f7" class="ms mt it bd mu mv nr mx my mz ns nb nc jz nt ka ne kc nu kd ng kf nv kg ni nj bi translated">后续步骤</h1><p id="7bf9" class="pw-post-body-paragraph kz la it lb b lc nw ju le lf nx jx lh li ny lk ll lm nz lo lp lq oa ls lt lu im bi translated">完成验证码挑战后，您将收到一个响应令牌。这个令牌将在两分钟内有效。</p><p id="152a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有了这个令牌，您将需要向Google的服务器发出请求来验证密钥。查看文档<a class="ae ky" href="https://developers.google.com/recaptcha/docs/verify" rel="noopener ugc nofollow" target="_blank">这里</a>了解更多关于如何做到这一点。</p></div><div class="ab cl ml mm hx mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="im in io ip iq"><h1 id="cc26" class="ms mt it bd mu mv mw mx my mz na nb nc jz nd ka ne kc nf kd ng kf nh kg ni nj bi translated">结论</h1><p id="8636" class="pw-post-body-paragraph kz la it lb b lc nw ju le lf nx jx lh li ny lk ll lm nz lo lp lq oa ls lt lu im bi translated">感谢阅读！我希望你能够在这篇文章中了解到CAPTCHA和reCAPTCHA。在React应用程序中实现它很容易，并且它可以为您的应用程序提供另一层针对僵尸程序的安全性。</p><p id="09d1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要了解如何在React应用程序中设置Google OAuth，请查看下面的文章。</p><div class="pe pf gp gr pg ph"><a href="https://javascript.plainenglish.io/how-to-set-up-google-oauth-in-react-with-react-google-login-9c6538389fde" rel="noopener  ugc nofollow" target="_blank"><div class="pi ab fo"><div class="pj ab pk cl cj pl"><h2 class="bd iu gy z fp pm fr fs pn fu fw is bi translated">如何在React中设置Google OAuth</h2><div class="po l"><h3 class="bd b gy z fp pm fr fs pn fu fw dk translated">在React中创建一个Google OAuth登录组件。</h3></div><div class="pp l"><p class="bd b dl z fp pm fr fs pn fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="pq l"><div class="pr l ps pt pu pq pv ks ph"/></div></div></a></div></div></div>    
</body>
</html>