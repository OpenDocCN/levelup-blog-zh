# JavaScript 代码样式最佳实践—最大深度和行数

> 原文：<https://levelup.gitconnected.com/javascript-code-styling-best-practices-maximum-depth-and-lines-e89bd591186c>

![](img/0117216a4a2887cdb91b2ed660ae1322.png)

Deanna Lewis 在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 拍摄的照片

JavaScript 是一种非常宽容的语言。编写可以运行但有错误的代码很容易。

在本文中，我们将研究嵌套的最大深度、最大行长度和最大文件长度。

# 最大嵌套深度

我们应该尽可能地消除嵌套。嵌套代码很难阅读。

这适用于对象、`if`块、`try...catch`、循环或任何其他可以嵌套的对象。

例如，如果我们有以下代码:

```
if (true) {
   while (true) {
     if (true) {
       if (true) {
         if (true) {}
       }
     }
   }
 }
```

那就太多嵌套了。我们有 5 层嵌套，这太多了。

2 或 3 可能是最佳的最大深度。越少越好。

我们可以通过使用 guard 子句而不是嵌套`if`语句来减少这些块的嵌套深度。

guard 子句是指我们检查一些条件，如果是`true`，就提前返回。

这样，在运行任何东西之前，我们不必嵌套`if`块来检查某些东西。

例如，我们可以替换如下内容:

```
const foo = () => {
  const x = true;
  const y = true;
  if (x) {
    //...
    if (y) {
      //...
    }
  }
}
```

类似于:

```
const foo = () => {
  const x = true;
  const y = true;
  if (!x) {
    return;
  } //...
  if (!y) {
    return;
  } //...
}
```

在上面的代码中，我们检查`x`是否为`false`，如果是则停止运行该函数，然后运行某个仅依赖于`x`在`true`之后的函数。

然后我们检查`y`是否为`false`，如果`y`为`false.`我们就停止运行我们的函数，然后运行依赖于`y`为`true`或者依赖于`x`和`y`都为`true`的代码。

然后，我们消除了前面代码示例中的嵌套。

同样，如果我们正在创建自己的对象，我们也应该消除嵌套。例如，我们应该创建如下所示的对象文字:

```
const obj = {
  a: {
    b: {
      c: {
        d: {
          e: 1
        }
      }
    }
  }
}
```

这种嵌套非常难读，应该尽可能避免。

相反，我们应该通过编写类似如下的代码来消除嵌套:

```
const obj = {
  a: 1
}
```

同样，嵌套越少，我们的代码越易读。

# 不要超过最大行长度

代码的行长度应该足够短，这样就可以在大多数人的屏幕上显示，不需要水平滚动。

在大多数情况下，这大约是 100 个字符，包括大小屏幕以及它们在各种操作系统中的显示方式。

长字符串应该连接在一起或者分解成更小的字符串。

此外，减少嵌套深度也有助于减少长线长度。

我们应该保持较短的行长度，这样大部分人不用水平滚动就能看到整行。

![](img/e9bc2444fc61ea7f4bb9a5af915a221a.png)

帕特丽夏·塞尔纳在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上的照片

# 最大文件长度

我们不应该拥有由人类程序员生成的大型代码文件。

一个长文件可能意味着它做的太多了。这并不好，因为一个文件做得越多，它就越混乱。

长代码文件不可读，因为跟踪工作流很困难。调试也很难，因为我们必须在文件中上下跳转。

如果一个文件很长，那么它应该被分解成小的模块。每个模块应该只做一件事。

这样，我们就不会因为代码太长而遇到可读性问题。

它所做的只是一件事，我们在看它的内容之前就知道它在做什么。

做多件事的代码文件太长。

# 结论

我们不应该编写嵌套过多的代码。深度嵌套的代码很难阅读。

如果我们必须嵌套条件块，那么我们应该通过使用 guard 子句来减少嵌套。

此外，我们不应该创建嵌套过多的对象文字。

最大文件长度不应太长。如果它做的不止一件事，那么它就太长了。

最后，代码文件中的行长度应该适合大多数人的屏幕，因此在大多数情况下，每行 100 个字符左右可能是合适的。