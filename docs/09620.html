<html>
<head>
<title>Creating a Distraction System in Unity</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Unity中创建一个分散注意力的系统</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/creating-a-distraction-system-in-unity-38c9dd6c3f07?source=collection_archive---------14-----------------------#2021-08-26">https://levelup.gitconnected.com/creating-a-distraction-system-in-unity-38c9dd6c3f07?source=collection_archive---------14-----------------------#2021-08-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/f35b353606bbc47fc8822ee3a7cb7134.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yxm26st_Y27WXxWwHNW9gA.jpeg"/></div></div></figure><p id="8d72" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们需要为玩家创造一种方法来分散守卫的注意力。为了通过他们，我们可以让我们的玩家扔一枚硬币，并将守卫的<strong class="ka ir">navmeshemagent组件</strong>重定向到它那里。</p><p id="8f73" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在我们的<strong class="ka ir">更新方法</strong>中，我们可以运行一个名为<strong class="ka ir"> ClickToThrow </strong>的方法，这将检测鼠标右键<strong class="ka ir">是否被按下。如果是这样，我们可以启动一个<strong class="ka ir">协程</strong>来运行投掷硬币的序列。我们也只希望玩家有一个硬币，所以我们可以创建一个bool。</strong></p><p id="5e37" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在<strong class="ka ir">协程中，</strong>很像我们的<strong class="ka ir">左键移动</strong>，我们要用一个<strong class="ka ir">光线投射</strong>来检测鼠标在哪里，以便有一个位置<strong class="ka ir">实例化</strong>我们的硬币。</p><p id="44b0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在我们<strong class="ka ir">实例化</strong>硬币之前，我们可以设置一个<strong class="ka ir">动画触发器</strong>来将状态切换到我们的<strong class="ka ir">投掷动画。</strong>这可以从<strong class="ka ir">任何状态</strong>进入，然后根据<strong class="ka ir">行走杆</strong>将返回到适当的状态。</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi kw"><img src="../Images/b5d068152a4823c7e93349017a134809.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3pRuzps5sTnzXXLgikOMzQ.png"/></div></div></figure><p id="2c4f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后我们想要得到这个<strong class="ka ir">动画剪辑</strong>的长度，并在<strong class="ka ir">实例化</strong>我们的硬币预置之前，用它作为<strong class="ka ir">等待秒的时间变量。</strong></p><p id="89fd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">此外，我还为<strong class="ka ir"> NavMeshAgent </strong>设置了在投掷动画出现时停止的bool，这可以防止在行走动画不出现时任何不必要的移动到目的地。</p><p id="d936" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">对于<strong class="ka ir">音效</strong>，我使用的是<strong class="ka ir"> Wwise </strong>，所以我需要<strong class="ka ir">发布</strong>这个<strong class="ka ir"> Wwise事件，</strong>并且对于这个声音，我希望它与硬币被扔向的位置相关联，因此我<strong class="ka ir">在硬币上发布</strong>它。</p><p id="203e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">最后，我需要让守卫知道硬币的事。</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lb"><img src="../Images/69ad9a56710b7ccd9cb1e67876a431d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DR84ruGwK8PGF9GcENJ1QA.png"/></div></div></figure><p id="de98" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为了分散守卫的注意力，我们可以创建一个<strong class="ka ir">数组</strong>来存储所有带有适当标签的游戏对象。然后，使用一个<strong class="ka ir"> foreach循环</strong>我们可以访问每个守卫的<strong class="ka ir"> AI脚本，</strong>并调用一个函数，传入硬币的位置。</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lb"><img src="../Images/17b9524af1cee12a82ed767f7ff1e061.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mV4q-7U9P_SVACguU2CzFA.png"/></div></div></figure><p id="9e39" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在我们的<strong class="ka ir"> GuardAI脚本中，</strong>我们的<strong class="ka ir">公共方法</strong>接收硬币位置，将其存储在本地私有变量中，并将alerted bool设置为true。</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lb"><img src="../Images/8d1fb953bf3758e2fad24f328ecfaabc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U4VKjK52D2bOmoO5U5MwMQ.png"/></div></div></figure><p id="d817" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">从这里，我们可以调整我们现有的航点系统。首先，我们需要将现有的<strong class="ka ir"> WayPointMovement方法</strong>放在一个用于检查报警bool的<strong class="ka ir"> if语句</strong>中。</p><p id="0f39" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果警报为真，我们可以改为<strong class="ka ir">将目的地</strong>设置为硬币位置。然后，在运行我们的<strong class="ka ir"> IdleTime协程</strong>之前，我们可以检查我们离目的地的距离。</p><p id="b745" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在我们的<strong class="ka ir">协程</strong>中，我们可以再次将所有内容存储在一个<strong class="ka ir"> if语句中，</strong>因为我们想增加守卫查看硬币时的<strong class="ka ir">等待秒时间</strong>。从这里，我们返回警告bool为假，并继续获得下一个航路点。</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lb"><img src="../Images/9ada9f1b6f231e3e4c381b3393743a01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IGNcdb4uWtICwYGAYcYNBw.png"/></div></div></figure><figure class="kx ky kz la gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi kw"><img src="../Images/1a4a0a344e2bfa5eccc31ce8f01181cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*4RdcVp10RMEZwKjzz6OkQg.gif"/></div></div></figure><p id="2213" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在守卫分心的情况下，我们可能应该让<strong class="ka ir">用户</strong>知道他们实际上可以扔硬币。幸运的是，我们有一个画外音来告诉达伦该做什么。我们可以设置另一个box collider触发器来运行模块化的<strong class="ka ir">画外音脚本。</strong></p><div class="kx ky kz la gt ab cb"><figure class="lc jr ld le lf lg lh paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><img src="../Images/bfe6d1f81c25ce6a8850dd49bc486f73.png" data-original-src="https://miro.medium.com/v2/resize:fit:1704/format:webp/1*G5ZErVPwTnxIija4Zv7FKg.png"/></div></figure><figure class="lc jr li le lf lg lh paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><img src="../Images/132c6f66b6e7dd87c9d54dee01476c6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:298/format:webp/1*czVaFAGwB53XQwwxZz9LCg.png"/></div></figure></div><p id="93ed" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在我们的<strong class="ka ir">脚本</strong>中，我们简单地创建了一个<strong class="ka ir"> Wwise事件</strong>的句柄，然后当玩家进入触发器时<strong class="ka ir">将它发布到主摄像头上</strong>。</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lj"><img src="../Images/467d392b64d4a6ed7ead56ab198343f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7BQpyasZmWmdrfl6-zxVIA.png"/></div></div></figure></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><p id="665e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">最后，我们想让音频更加身临其境。实际上，我们可能每次都能获得相同的音效，因为我们不能一个接一个地投掷多个硬币。</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lr"><img src="../Images/72492fa51d7329188518b26799f95fd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t7BKaOtvaDxS7U7USWSOPw.png"/></div></div></figure><p id="e12d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">无论哪种方式，我都使用了<strong class="ka ir"> Wwise </strong>不仅随机化了音高，还为硬币弹跳创建了不同的平移路径。</p><p id="4f0a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为此，我们可以访问<strong class="ka ir">定位选项卡</strong>并创建<strong class="ka ir">自动化。然后我们可以创建随机选择的多条路径进行平移。这在第一人称中非常明显，但即使在我们的游戏中，它也创造了一些不错的变化。</strong></p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ls"><img src="../Images/971311f11b8b672461baa9ada43cfc19.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*KGmpkaKCKGE2k98mTwi7lQ.gif"/></div></div></figure></div></div>    
</body>
</html>