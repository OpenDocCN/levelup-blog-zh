<html>
<head>
<title>Package-lock.json and Yarn.lock Are Your Best Friends</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Package-lock.json和Yarn.lock是你最好的朋友</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/package-lock-json-and-yarn-lock-are-your-best-friends-7ec63c24fbe5?source=collection_archive---------4-----------------------#2020-03-20">https://levelup.gitconnected.com/package-lock-json-and-yarn-lock-are-your-best-friends-7ec63c24fbe5?source=collection_archive---------4-----------------------#2020-03-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="c0dc" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">为什么你想把它们留在身边，什么时候你想扔掉它们</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/7811d81dc19aecc2c42b1ee9d67d033e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*41eoYJLV5IZw6M0XKWA5vw.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">图片由<a class="ae ky" href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=155722" rel="noopener ugc nofollow" target="_blank">皮克斯拜</a>的Gerd Altmann 提供</figcaption></figure><h1 id="4de7" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">是否听过或<em class="lr">说过以下</em>中的任何一句话？</h1><ul class=""><li id="7337" class="ls lt it lu b lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">什么是package-lock.json(或者yarn.lock)？</li><li id="ba02" class="ls lt it lu b lv mk lx ml lz mm mb mn md mo mf mg mh mi mj bi translated">我们为什么需要它？</li><li id="c988" class="ls lt it lu b lv mk lx ml lz mm mb mn md mo mf mg mh mi mj bi translated">我的package-lock.json文件中有冲突</li><li id="c41c" class="ls lt it lu b lv mk lx ml lz mm mb mn md mo mf mg mh mi mj bi translated">它在我的拉取请求中占据了太多的屏幕！</li><li id="32de" class="ls lt it lu b lv mk lx ml lz mm mb mn md mo mf mg mh mi mj bi translated">我提交时会忽略它</li><li id="2ac2" class="ls lt it lu b lv mk lx ml lz mm mb mn md mo mf mg mh mi mj bi translated"><strong class="lu iu"> <em class="mp">我正要删除它</em> </strong></li></ul><p id="4142" class="pw-post-body-paragraph mq mr it lu b lv ms ju mt lx mu jx mv lz mw mx my mb mz na nb md nc nd ne mf im bi translated">对我来说一切都是。</p><p id="5e5a" class="pw-post-body-paragraph mq mr it lu b lv ms ju mt lx mu jx mv lz mw mx my mb mz na nb md nc nd ne mf im bi translated">更糟糕的是，也许你已经删除了它，并提交了你的拉取请求或直接推送到master！</p><p id="67f3" class="pw-post-body-paragraph mq mr it lu b lv ms ju mt lx mu jx mv lz mw mx my mb mz na nb md nc nd ne mf im bi translated">如果是这样的话，那么你已经修改了比你预期的大得多的源代码块。</p><blockquote class="nf"><p id="2fd0" class="ng nh it bd ni nj nk nl nm nn no mf dk translated">您可以控制自己的源代码，但是package-lock.json和yarn.lock文件可以确保您的第三方代码不会在提交之间发生变化</p></blockquote><h1 id="b68d" class="kz la it bd lb lc ld le lf lg lh li lj jz np ka ll kc nq kd ln kf nr kg lp lq bi translated">将第三方软件包视为一等公民</h1><p id="a0fa" class="pw-post-body-paragraph mq mr it lu b lv lw ju mt lx ly jx mv lz ns mx my mb nt na nb md nu nd ne mf im bi translated">这是解开包锁文件之谜时需要理解的关键思想。许多开发人员只考虑他们自己的源代码的变化，但是通过包管理器安装的第三方代码，像npm和Yarn同样重要，如果不是更重要的话。</p><p id="3a22" class="pw-post-body-paragraph mq mr it lu b lv ms ju mt lx mu jx mv lz mw mx my mb mz na nb md nc nd ne mf im bi translated">为什么？因为它们有能力导致很难追踪的错误。</p><p id="083e" class="pw-post-body-paragraph mq mr it lu b lv ms ju mt lx mu jx mv lz mw mx my mb mz na nb md nc nd ne mf im bi translated">换句话说，如果没有锁文件，您将不知道代码中发生了什么变化，从而产生了您可能观察到的错误。你可能会盯着提交之间的代码差异挠头几个小时，认为这些变化<em class="mp">不会</em>导致<em class="mp">发出<em class="mp">。</em></em></p><p id="5bf3" class="pw-post-body-paragraph mq mr it lu b lv ms ju mt lx mu jx mv lz mw mx my mb mz na nb md nc nd ne mf im bi translated">你是对的，是你看不到的代码导致了问题。</p><p id="c436" class="pw-post-body-paragraph mq mr it lu b lv ms ju mt lx mu jx mv lz mw mx my mb mz na nb md nc nd ne mf im bi translated">给你的第三方包应有的尊重，把它们当成你自己的代码。</p><blockquote class="nf"><p id="9be3" class="ng nh it bd ni nj nk nl nm nn no mf dk translated">把你的包想象成由多个开发者提交给你的项目的二进制代码，就好像它是开源的一样</p></blockquote></div><div class="ab cl nv nw hx nx" role="separator"><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa"/></div><div class="im in io ip iq"><p id="009d" class="pw-post-body-paragraph mq mr it lu b lv ms ju mt lx mu jx mv lz mw mx my mb mz na nb md nc nd ne mf im bi translated">让我们解决上述问题。</p><h1 id="7fb6" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">什么是包锁文件？水果和蔬菜的类比</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oc"><img src="../Images/8619b7c88c4a604952c00ed4cc0f9719.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-C2U-TjFAc5PiCDO"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@deanxavier?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">迪安·泽维尔</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="e7c9" class="pw-post-body-paragraph mq mr it lu b lv ms ju mt lx mu jx mv lz mw mx my mb mz na nb md nc nd ne mf im bi translated">这样想吧。你喜欢吃水果和蔬菜。你知道每周你都需要买水果和蔬菜，所以你有一个很少改变的标准购物清单:</p><pre class="kj kk kl km gt od oe of og aw oh bi"><span id="e5e8" class="oi la it oe b gy oj ok l ol om"><strong class="oe iu">Weekly Shopping List</strong></span><span id="0d80" class="oi la it oe b gy on ok l ol om">Fruit<br/>Veg</span></pre><p id="b1b5" class="pw-post-body-paragraph mq mr it lu b lv ms ju mt lx mu jx mv lz mw mx my mb mz na nb md nc nd ne mf im bi translated">现在，你实际上喜欢某些种类的水果和蔬菜，所以你想让你的清单更具体一点:</p><pre class="kj kk kl km gt od oe of og aw oh bi"><span id="6f47" class="oi la it oe b gy oj ok l ol om"><strong class="oe iu">Weekly Shopping List</strong></span><span id="0dae" class="oi la it oe b gy on ok l ol om">Fruit<br/>    Apples    <br/>    Grapes<br/>    Tomatoes (they <em class="mp">are </em>a fruit)</span><span id="7e48" class="oi la it oe b gy on ok l ol om">Veg<br/>    Onions<br/>    Potatoes<br/>    Pumpkins</span></pre><p id="dcfb" class="pw-post-body-paragraph mq mr it lu b lv ms ju mt lx mu jx mv lz mw mx my mb mz na nb md nc nd ne mf im bi translated">你知道你的口味比这个好一点，所以你添加了一些关于每种水果和蔬菜的细节:</p><pre class="kj kk kl km gt od oe of og aw oh bi"><span id="debf" class="oi la it oe b gy oj ok l ol om"><strong class="oe iu">Weekly Shopping List</strong></span><span id="c705" class="oi la it oe b gy on ok l ol om">Fruit<br/>    Apples: Red<br/>    Grapes: White<br/>    Tomatoes: Roma</span><span id="50be" class="oi la it oe b gy on ok l ol om">Veg<br/>    Onions: White, red or brown<br/>    Potatoes: Washed or brushed<br/>    Pumpkins: Any kind</span></pre><p id="909c" class="pw-post-body-paragraph mq mr it lu b lv ms ju mt lx mu jx mv lz mw mx my mb mz na nb md nc nd ne mf im bi translated">好了，我们有了清单，它相当详细，但是我们的一些水果和蔬菜留有一点变化的空间。所以我们出去买清单上的东西，最后我们得到一张收据:</p><pre class="kj kk kl km gt od oe of og aw oh bi"><span id="e3bc" class="oi la it oe b gy oj ok l ol om"><strong class="oe iu">Receipt - 01/01/2020</strong></span><span id="c8c6" class="oi la it oe b gy on ok l ol om">Apples - Fuji<br/>Grapes - White<br/>Tomatoes - Roma<br/>Onions - Brown<br/>Potatoes - Washed<br/>Pumpkins - Kabocha</span></pre><p id="6d2f" class="pw-post-body-paragraph mq mr it lu b lv ms ju mt lx mu jx mv lz mw mx my mb mz na nb md nc nd ne mf im bi translated">看到这里发生了什么吗？尽管我们没有指定某些水果和蔬菜的确切种类，但我们不得不购买确切种类的。</p><p id="4601" class="pw-post-body-paragraph mq mr it lu b lv ms ju mt lx mu jx mv lz mw mx my mb mz na nb md nc nd ne mf im bi translated">现在，当我们回到家，吃了我们的苹果，煮了我们所有的蔬菜，我们对我们选择的非常满意，所以我们保留了收据，下次购物时带着它，还有我们的清单。</p><blockquote class="nf"><p id="25de" class="ng nh it bd ni nj nk nl nm nn no mf dk translated">因为我们有收据，上面准确地列出了我们上周买的东西，所以我们这周买了完全一样的东西</p></blockquote><p id="20d0" class="pw-post-body-paragraph mq mr it lu b lv oo ju mt lx op jx mv lz oq mx my mb or na nb md os nd ne mf im bi translated">这种情况可能会永远持续下去，但假设我们对苹果的口味发生了变化，那么我们会写一个新的列表:</p><pre class="kj kk kl km gt od oe of og aw oh bi"><span id="4649" class="oi la it oe b gy oj ok l ol om"><strong class="oe iu">Weekly Shopping List</strong></span><span id="cf31" class="oi la it oe b gy on ok l ol om">Fruit<br/>    Apples: Green<br/>    Grapes: White<br/>    Tomatoes: Roma</span><span id="ff3a" class="oi la it oe b gy on ok l ol om">Veg<br/>    Onions: White, red or brown<br/>    Potatoes: Washed or brushed<br/>    Pumpkins: Any kind</span></pre><p id="761c" class="pw-post-body-paragraph mq mr it lu b lv ms ju mt lx mu jx mv lz mw mx my mb mz na nb md nc nd ne mf im bi translated">现在当我们去购物时，我们必须买某种绿色的苹果。我们出去，最后拿着下面的收据:</p><pre class="kj kk kl km gt od oe of og aw oh bi"><span id="8ca6" class="oi la it oe b gy oj ok l ol om"><strong class="oe iu">Receipt - 02/01/2020</strong></span><span id="4a99" class="oi la it oe b gy on ok l ol om">Apples - Granny Smith<br/>Grapes - White<br/>Tomatoes - Roma<br/>Onions - Brown<br/>Potatoes - Washed<br/>Pumpkins - Kabocha</span></pre><p id="2b1b" class="pw-post-body-paragraph mq mr it lu b lv ms ju mt lx mu jx mv lz mw mx my mb mz na nb md nc nd ne mf im bi translated">我们买了和上周一模一样的东西，只是我们的苹果换成了史密斯奶奶。</p><p id="b99c" class="pw-post-body-paragraph mq mr it lu b lv ms ju mt lx mu jx mv lz mw mx my mb mz na nb md nc nd ne mf im bi translated">因为我们保留了收据，我们能够记住所有我们喜欢的水果和蔬菜，并继续购买同样的水果和蔬菜。</p><blockquote class="ot ou ov"><p id="8237" class="mq mr mp lu b lv ms ju mt lx mu jx mv ow mw mx my ox mz na nb oy nc nd ne mf im bi translated">但是如果我们扔掉了收据呢？我们不得不从头开始，最后可能会吃到我们不喜欢的水果和蔬菜。</p></blockquote><h2 id="0d17" class="oi la it bd lb oz pa dn lf pb pc dp lj lz pd pe ll mb pf pg ln md ph pi lp pj bi translated">明白了。购物清单、收据、水果和蔬菜，但我认为这是一篇软件工程文章？</h2><p id="47ec" class="pw-post-body-paragraph mq mr it lu b lv lw ju mt lx ly jx mv lz ns mx my mb nt na nb md nu nd ne mf im bi translated">让我们回到软件的角度:</p><ol class=""><li id="98be" class="ls lt it lu b lv ms lx mu lz pk mb pl md pm mf pn mh mi mj bi translated"><code class="fe po pp pq oe b">shopping list</code>代表你的<code class="fe po pp pq oe b"><strong class="lu iu">package.json</strong></code>文件</li><li id="2c6c" class="ls lt it lu b lv mk lx ml lz mm mb mn md mo mf pn mh mi mj bi translated">每个<code class="fe po pp pq oe b">fruit</code>和<code class="fe po pp pq oe b">vegetable</code>代表一个<code class="fe po pp pq oe b">package</code></li><li id="ae81" class="ls lt it lu b lv mk lx ml lz mm mb mn md mo mf pn mh mi mj bi translated">水果或蔬菜的<em class="mp">类型</em>代表该包装的<em class="mp">精确版本</em>或<em class="mp">可接受版本范围</em></li><li id="e8c4" class="ls lt it lu b lv mk lx ml lz mm mb mn md mo mf pn mh mi mj bi translated"><code class="fe po pp pq oe b">receipt</code>代表您的<code class="fe po pp pq oe b"><strong class="lu iu">package-lock.json</strong></code>或<code class="fe po pp pq oe b"><strong class="lu iu">yarn.lock</strong></code>文件</li></ol><p id="a92f" class="pw-post-body-paragraph mq mr it lu b lv ms ju mt lx mu jx mv lz mw mx my mb mz na nb md nc nd ne mf im bi translated">当我们保持我们的<code class="fe po pp pq oe b">receipt</code>，也就是我们的<code class="fe po pp pq oe b">package lock file</code>，我们能够确保我们每周都得到相同包的相同版本，直到我们的<code class="fe po pp pq oe b">shopping list</code>，也就是我们的<code class="fe po pp pq oe b">package.json</code>，文件改变。</p><p id="ecd2" class="pw-post-body-paragraph mq mr it lu b lv ms ju mt lx mu jx mv lz mw mx my mb mz na nb md nc nd ne mf im bi translated">如果我们扔掉我们的<code class="fe po pp pq oe b">package lock file</code>，有可能我们最终得到的包不是我们所期望的。</p><h2 id="457c" class="oi la it bd lb oz pa dn lf pb pc dp lj lz pd pe ll mb pf pg ln md ph pi lp pj bi translated">包锁文件使您的提交保持不变</h2><p id="9ad5" class="pw-post-body-paragraph mq mr it lu b lv lw ju mt lx ly jx mv lz ns mx my mb nt na nb md nu nd ne mf im bi translated">如果您在您选择的版本控制工具中打开提交图，图上的每个点代表一个版本的代码，如果被检索(拉取),它应该是不可变的——无论谁在何时检索它，它都应该是相同的。</p><p id="76f3" class="pw-post-body-paragraph mq mr it lu b lv ms ju mt lx mu jx mv lz mw mx my mb mz na nb md nc nd ne mf im bi translated">如果你的代码库包含一个带有<code class="fe po pp pq oe b">dependencies</code>的<code class="fe po pp pq oe b">package.json</code>文件，而不是一个<code class="fe po pp pq oe b">package-lock.json</code>或者<code class="fe po pp pq oe b">yarn.lock</code>文件(或者其他包管理器用来锁定包版本的另一个文件)，那么这是<strong class="lu iu">而不是</strong>的情况。如上所述，如果在不同的时间访问提交，我们可能会得到不同版本的包。</p><p id="2e9a" class="pw-post-body-paragraph mq mr it lu b lv ms ju mt lx mu jx mv lz mw mx my mb mz na nb md nc nd ne mf im bi translated">这是因为软件包的新版本一直在发布，我们已经考虑到我们将接受的一些版本中的差异。例如:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="pr ps l"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">Angular应用程序的package.json文件示例</figcaption></figure><p id="0ad4" class="pw-post-body-paragraph mq mr it lu b lv ms ju mt lx mu jx mv lz mw mx my mb mz na nb md nc nd ne mf im bi translated">注意到所有的<code class="fe po pp pq oe b">~</code>和<code class="fe po pp pq oe b">^</code>了吗？如果在不同的时间安装，任何这些都可能导致下载这些软件包的不同版本。</p><blockquote class="ot ou ov"><p id="81b5" class="mq mr mp lu b lv ms ju mt lx mu jx mv ow mw mx my ox mz na nb oy nc nd ne mf im bi translated">保留package-lock.json或yarn.lock文件将锁定这些版本，尽管允许package.json文件中存在差异。</p></blockquote><p id="fbdf" class="pw-post-body-paragraph mq mr it lu b lv ms ju mt lx mu jx mv lz mw mx my mb mz na nb md nc nd ne mf im bi translated">我让一些数字来说话:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pt"><img src="../Images/6297df9ce1875a6ae7878c42f1ab8b10.png" data-original-src="https://miro.medium.com/v2/resize:fit:564/format:webp/1*X3IfMag0FYF90Q7ARui3zw.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">在<strong class="bd lb">初始纱线安装</strong>后，node_modules文件夹中文件的大小和数量</figcaption></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pt"><img src="../Images/6297df9ce1875a6ae7878c42f1ab8b10.png" data-original-src="https://miro.medium.com/v2/resize:fit:564/format:webp/1*X3IfMag0FYF90Q7ARui3zw.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">删除node_modules重新安装后的文件大小和数量，<strong class="bd lb">保留yarn.lock </strong></figcaption></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pu"><img src="../Images/bfe2f3251d17ed9b805030e6f5340db7.png" data-original-src="https://miro.medium.com/v2/resize:fit:542/format:webp/1*6LeJeXqXqQomepzfPapXYQ.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">删除node_modules并重新安装后的文件大小和数量，<strong class="bd lb">删除yarn.lock </strong></figcaption></figure><p id="3d5a" class="pw-post-body-paragraph mq mr it lu b lv ms ju mt lx mu jx mv lz mw mx my mb mz na nb md nc nd ne mf im bi translated">上面的故障告诉我们，在仅仅删除我们的node_modules并重新安装我们的包之后，我们的node_modules文件夹在任何方面都没有<strong class="lu iu">而不是</strong>改变。</p><p id="3aff" class="pw-post-body-paragraph mq mr it lu b lv ms ju mt lx mu jx mv lz mw mx my mb mz na nb md nc nd ne mf im bi translated">然而，在删除了我们的node_modules文件夹<strong class="lu iu">和</strong>我们的yarn.lock文件之后，还有一个额外的<strong class="lu iu"> 1507文件</strong>加起来超过了<strong class="lu iu"> 7mb </strong>。</p><p id="12be" class="pw-post-body-paragraph mq mr it lu b lv ms ju mt lx mu jx mv lz mw mx my mb mz na nb md nc nd ne mf im bi translated">那些额外的文件到底是什么？它们中的一些会进入我们应用程序的运行代码吗？可怕的是我们可能永远不会知道。</p><blockquote class="nf"><p id="ac95" class="ng nh it bd ni nj nk nl nm nn no mf dk translated">删除或不提交您的包——lock . JSON或yarn.lock就像说“提交我的代码并随机修改我们剩余源代码的X%”</p></blockquote></div><div class="ab cl nv nw hx nx" role="separator"><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa"/></div><div class="im in io ip iq"><h1 id="f6de" class="kz la it bd lb lc pv le lf lg pw li lj jz px ka ll kc py kd ln kf pz kg lp lq bi translated">删除包锁文件安全吗？</h1><p id="91f0" class="pw-post-body-paragraph mq mr it lu b lv lw ju mt lx ly jx mv lz ns mx my mb nt na nb md nu nd ne mf im bi translated">你曾经对你的代码库进行过大规模的重构吗？也许你已经<em class="mp">有意</em>更新了一个主要的库，比如你的前端框架，而你不确定是否有任何东西可能会崩溃，所以你对你的应用程序进行了全面的回归测试？</p><p id="8afd" class="pw-post-body-paragraph mq mr it lu b lv ms ju mt lx mu jx mv lz mw mx my mb mz na nb md nc nd ne mf im bi translated">嗯，如果你要删除你的包锁文件，我可能会推荐同样的过程。为什么？因为很有可能你已经在不知不觉中修改了一些代码。</p><blockquote class="nf"><p id="8393" class="ng nh it bd ni nj nk nl nm nn no mf dk translated">如果更改代码的大部分会导致您运行完整的回归测试，那么也应该更改第三方代码的大部分</p></blockquote><p id="7241" class="pw-post-body-paragraph mq mr it lu b lv oo ju mt lx op jx mv lz oq mx my mb or na nb md os nd ne mf im bi translated">如果你确实想根据你的<code class="fe po pp pq oe b">package.json</code>文件得到最新最好的包(所有的<code class="fe po pp pq oe b">~</code>和<code class="fe po pp pq oe b">^</code>都可以更新到最新的补丁和次要版本)，那么你可以删除你的包锁文件。</p><blockquote class="ot ou ov"><p id="3826" class="mq mr mp lu b lv ms ju mt lx mu jx mv ow mw mx my ox mz na nb oy nc nd ne mf im bi translated">删除包锁文件可能是利用package.json文件的强大功能的好方法，但是要准备好运行完整的回归测试或者修复任何意外的行为</p></blockquote><h1 id="3608" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">结论</h1><p id="9be4" class="pw-post-body-paragraph mq mr it lu b lv lw ju mt lx ly jx mv lz ns mx my mb nt na nb md nu nd ne mf im bi translated">除了在某些极端情况下，npm包不会被删除，任何给定的版本也不会被修改。它们是不可改变的。</p><p id="d9c3" class="pw-post-body-paragraph mq mr it lu b lv ms ju mt lx mu jx mv lz mw mx my mb mz na nb md nc nd ne mf im bi translated">对于任何给定的提交，您自己的代码也应该是不可变的，如果为<a class="ae ky" href="https://yarnpkg.com/" rel="noopener ugc nofollow" target="_blank"> Yarn </a>用户使用<a class="ae ky" href="https://www.npmjs.com/" rel="noopener ugc nofollow" target="_blank"> npm </a>或<code class="fe po pp pq oe b">yarn.lock</code>，则允许这种情况的机制称为<code class="fe po pp pq oe b">package-lock.json</code> <strong class="lu iu"> </strong>文件。</p><p id="4358" class="pw-post-body-paragraph mq mr it lu b lv ms ju mt lx mu jx mv lz mw mx my mb mz na nb md nc nd ne mf im bi translated">该文件的存在确保了为给定的提交安装相同的包版本，这样您自己的源代码和您的第三方打包代码都是相同的，无论谁在何时使用它。</p><p id="4636" class="pw-post-body-paragraph mq mr it lu b lv ms ju mt lx mu jx mv lz mw mx my mb mz na nb md nc nd ne mf im bi translated">删除或不提交这些文件会导致您的应用程序出现不可预测的行为，因为对于相同的提交，实际安装的软件包版本可能会随着时间的推移而发生变化，并且如果这些错误是由错误的软件包引起的，则可能很难追踪到所观察到的错误的来源。</p><p id="6a09" class="pw-post-body-paragraph mq mr it lu b lv ms ju mt lx mu jx mv lz mw mx my mb mz na nb md nc nd ne mf im bi translated">因此，建议您<strong class="lu iu">提交</strong>并且<strong class="lu iu">不要删除</strong>这些文件，除非您打算根据您的<code class="fe po pp pq oe b">package.json</code>规范更新您的包，并且您准备运行彻底的测试或者快速修复您在生产中观察到的任何bug。</p><p id="4f3b" class="pw-post-body-paragraph mq mr it lu b lv ms ju mt lx mu jx mv lz mw mx my mb mz na nb md nc nd ne mf im bi translated">感谢阅读，我希望这能为你们中的一些人解释<code class="fe po pp pq oe b">package-lock.json</code>和<code class="fe po pp pq oe b">yarn.lock</code>文件。</p><h2 id="14a6" class="oi la it bd lb oz pa dn lf pb pc dp lj lz pd pe ll mb pf pg ln md ph pi lp pj bi translated">资源</h2><ol class=""><li id="158b" class="ls lt it lu b lv lw lx ly lz ma mb mc md me mf pn mh mi mj bi translated"><a class="ae ky" href="https://www.npmjs.com/" rel="noopener ugc nofollow" target="_blank">国家预防机制</a></li><li id="8a12" class="ls lt it lu b lv mk lx ml lz mm mb mn md mo mf pn mh mi mj bi translated"><a class="ae ky" href="https://yarnpkg.com/" rel="noopener ugc nofollow" target="_blank">纱线</a></li><li id="85ea" class="ls lt it lu b lv mk lx ml lz mm mb mn md mo mf pn mh mi mj bi translated"><a class="ae ky" href="https://docs.npmjs.com/configuring-npm/package-lock-json.html" rel="noopener ugc nofollow" target="_blank"> package-lock.json </a></li><li id="4be2" class="ls lt it lu b lv mk lx ml lz mm mb mn md mo mf pn mh mi mj bi translated"><a class="ae ky" href="https://classic.yarnpkg.com/en/docs/yarn-lock/" rel="noopener ugc nofollow" target="_blank"> yarn.lock </a></li><li id="dfbe" class="ls lt it lu b lv mk lx ml lz mm mb mn md mo mf pn mh mi mj bi translated"><a class="ae ky" href="https://www.nightlife.com.au" rel="noopener ugc nofollow" target="_blank">夜生活音乐</a></li></ol></div></div>    
</body>
</html>