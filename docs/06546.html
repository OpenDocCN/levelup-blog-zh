<html>
<head>
<title>Cligol &amp; Gifeegol</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">克里戈尔-吉菲戈尔公司</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/cligol-and-gifeegol-d5509a154bf6?source=collection_archive---------11-----------------------#2020-12-04">https://levelup.gitconnected.com/cligol-and-gifeegol-d5509a154bf6?source=collection_archive---------11-----------------------#2020-12-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="ce9b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你点击了这篇文章的标题，我很抱歉让你失望了:我不会写一部基于斯米戈尔的霍比特表兄弟中土世界冒险的《指环王》衍生剧。我<em class="kl">将要做的</em>是向你展示我是如何将我的github个人资料的时间线转变成每天更新的生活游戏的。因此，请装满您的向导管道，加入我的编程冒险吧！</p><p id="f745" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">以下是最终产品最初几次迭代的截图:</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/e7d031ca34724825be55cd2bd0f3adce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*dQvB8DLsygF3iAW8yilL-w.gif"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated">穿过github的信号。</figcaption></figure></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h1 id="68ed" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">克里戈尔</h1><p id="32fc" class="pw-post-body-paragraph jn jo iq jp b jq mh js jt ju mi jw jx jy mj ka kb kc mk ke kf kg ml ki kj kk ij bi translated">我旅程的第一步是锻造<a class="ae mm" href="https://github.com/lucasreta/cligol" rel="noopener ugc nofollow" target="_blank"> cligol </a>(生活的命令行界面游戏)，这是一个小型C脚本，负责根据我们的要求生成模拟。我通常不写C程序，所以我从玛丽·雪莱的医生书里拿了一页，用我在网上找到的许多尸体创造了一个小怪物。</p><p id="694e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">它的主干全部来自于<a class="ae mm" href="https://rosettacode.org/wiki/Conway%27s_Game_of_Life#C" rel="noopener ugc nofollow" target="_blank"> Rosetta代码</a>和<a class="ae mm" href="https://codereview.stackexchange.com/questions/143167/game-of-life-in-c" rel="noopener ugc nofollow" target="_blank">这个代码评审帖子</a>的混合。经过整理以保持风格一致，并添加了一些存储和调试功能，最终结果如下:</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mn mo l"/></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated">cligol的main.c文件的截断版本。</figcaption></figure><p id="1160" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们主要功能的流程相对简单:</p><ol class=""><li id="d254" class="mp mq iq jp b jq jr ju jv jy mr kc ms kg mt kk mu mv mw mx bi translated">从文件加载电路板，如果电路板不存在，则创建一个新的电路板。</li><li id="fce5" class="mp mq iq jp b jq my ju mz jy na kc nb kg nc kk mu mv mw mx bi translated">检查收到的参数。</li><li id="61d9" class="mp mq iq jp b jq my ju mz jy na kc nb kg nc kk mu mv mw mx bi translated">如果第一个参数<em class="kl"> display </em>不存在或者不等于1，我们调用<code class="fe nd ne nf ng b">move</code>方法，该方法遍历我们的网格并为下一轮游戏生成结果。如果<em class="kl"> display </em>参数设置为1，它将进入<code class="fe nd ne nf ng b">display_loop</code>方法，该方法处理棋盘和可控选项的渲染，与我们当前的目标无关。</li><li id="2d4b" class="mp mq iq jp b jq my ju mz jy na kc nb kg nc kk mu mv mw mx bi translated">将游戏的新状态写入本地文件进行存储。</li></ol><p id="235e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以一旦我们编译了我们的脚本(<code class="fe nd ne nf ng b">gcc main.c -o cligol</code>)，我们就可以调用<code class="fe nd ne nf ng b">./cligol</code>来一次推进我们的游戏一个回合。文件<code class="fe nd ne nf ng b">data/board.txt</code>将在第一次运行时创建，并在随后的每次运行时更新。</p><p id="2df7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我调整了提升后的代码，以便添加一个<code class="fe nd ne nf ng b">config.h</code>文件，在这里我们可以设置电路板的宽度、高度和一个伪布尔标志，以指示我们的电路板是否应该表现为环形表面。这似乎是一个不错的补充，因为github的网格非常有限，如果没有它，我们的生命形式会很快脱离我们的7x 52板。</p><p id="686f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">此时，我们有了一个正常工作的CLI程序，该程序将创建和更新一个文件，其格式如下:</p><pre class="kn ko kp kq gt nh ng ni nj aw nk bi"><span id="bde6" class="nl lk iq ng b gy nm nn l no np">0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 1<br/>0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0<br/>0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 1 0 0 0 0 0 0 0 0 0 0 0<br/>0 0 1 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 1 1 0 0 0 0 0 0 0 0 0 0 0 0<br/>0 0 0 0 0 0 0 0 0 0 0 0 1 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0<br/>0 0 0 0 0 0 0 0 0 0 0 0 1 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0<br/>0 0 0 0 0 0 1 0 0 0 0 0 0 1 0 0 0 0 0 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0<br/>0 0 0 0 0 1 0 1 0 0 0 0 0 0 0 0 0 0 0 1 1 0 0 0 0 0 0 0 0 0 0 0 0 1<br/>0 0 0 0 0 1 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 1</span></pre><p id="6808" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在是时候破解一个又长又脏的bash脚本了，它可以把这个文件的内容变成github配置文件中一个漂亮的绿色网格。</p></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h1 id="9b50" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">吉菲戈尔</h1><p id="7332" class="pw-post-body-paragraph jn jo iq jp b jq mh js jt ju mi jw jx jy mj ka kb kc mk ke kf kg ml ki kj kk ij bi translated">进入<a class="ae mm" href="https://github.com/lucasreta/gifeegol/tree/main" rel="noopener ugc nofollow" target="_blank"> gifeegol </a> (Github生命游戏)，我们的cligol调用，文件读取，提交垃圾邮件，默认分支改变bash脚本。该描述以简洁的方式解释了我们的脚本需要做的事情，按照它们必须完成的顺序:</p><ol class=""><li id="92ce" class="mp mq iq jp b jq jr ju jv jy mr kc ms kg mt kk mu mv mw mx bi translated">调用cligol生成新的棋盘，或者将现有的棋盘迭代到下一回合。</li><li id="742d" class="mp mq iq jp b jq my ju mz jy na kc nb kg nc kk mu mv mw mx bi translated">读取更新文件的内容。</li><li id="d832" class="mp mq iq jp b jq my ju mz jy na kc nb kg nc kk mu mv mw mx bi translated">在我们的回购中创建新的分支。</li><li id="7622" class="mp mq iq jp b jq my ju mz jy na kc nb kg nc kk mu mv mw mx bi translated">开始遍历网格，将每个单元格匹配到特定的日期。</li><li id="645d" class="mp mq iq jp b jq my ju mz jy na kc nb kg nc kk mu mv mw mx bi translated">每当单元格值等于1时，写入在匹配日期创作的50个提交。如果值为零，则不执行任何操作。</li><li id="7b81" class="mp mq iq jp b jq my ju mz jy na kc nb kg nc kk mu mv mw mx bi translated">将我们的变更推进到新的分支。</li><li id="27cb" class="mp mq iq jp b jq my ju mz jy na kc nb kg nc kk mu mv mw mx bi translated">使用github的API修补我们的存储库，将我们刚刚推送的分支设置为默认分支。</li></ol><p id="d3d7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">该脚本比我一开始设想的要简单，这在很大程度上要归功于bash的<code class="fe nd ne nf ng b">date</code>命令:最初我错误地走上了一条道路，以一种更加不稳定和手动的方式处理日期，这导致了许多行和丑陋的代码(出于好奇，这在第一次提交中仍然可以看到)。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mn mo l"/></div></figure><p id="9e5f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了能够运行最后一个CURL请求，我们首先需要从github生成一个公共访问令牌，这可以通过github的<a class="ae mm" href="https://github.com/settings/tokens" rel="noopener ugc nofollow" target="_blank">设置</a>轻松完成。一旦我们有了令牌，我们就可以设置一个cron来每天、每小时或您认为合适的任何时候运行脚本(相应地替换<strong class="jp ir">$变量</strong>和<strong class="jp ir"> /path/ </strong>):</p><pre class="kn ko kp kq gt nh ng ni nj aw nk bi"><span id="328b" class="nl lk iq ng b gy nm nn l no np">0 0 * * * USERNAME=$username ACCESS_TOKEN=$token REPOSITORY=$repo /path/to/repo/move.sh</span></pre><p id="4e9a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">就是这样，我们有一个工作gifeegol供我们使用！</p></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h1 id="d41e" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">然后再回来</h1><p id="0b78" class="pw-post-body-paragraph jn jo iq jp b jq mh js jt ju mi jw jx jy mj ka kb kc mk ke kf kg ml ki kj kk ij bi translated">我不怎么写bash脚本(更不用说用C编写代码了)，所以我确信我的代码充满了bug &amp;糟糕的实践。我很高兴地欢迎任何和所有的反馈。</p><p id="82dc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">感谢你阅读我的第一篇文章，希望你喜欢。</p><p id="48ea" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> <em class="kl">关于我:</em> </strong> <em class="kl">我是一名拥有超过7年经验的全栈式web开发人员，目前正在寻找新的机会。你可以查看</em> <a class="ae mm" href="https://lucasreta.com/en/" rel="noopener ugc nofollow" target="_blank"> <em class="kl">我的网站</em> </a> <em class="kl">进一步参考或者直接写信给我</em>【1.lucasreta@gmail.com】<em class="kl"/></p></div></div>    
</body>
</html>