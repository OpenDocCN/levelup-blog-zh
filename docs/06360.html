<html>
<head>
<title>Using Flows for Form Validation in Android.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Android中使用流进行表单验证。</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/using-flows-for-form-validation-in-android-79016b00c079?source=collection_archive---------1-----------------------#2020-11-18">https://levelup.gitconnected.com/using-flows-for-form-validation-in-android-79016b00c079?source=collection_archive---------1-----------------------#2020-11-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/3dc6f8ce16b39357a9b569bfe8d95080.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PgnbqJIGiWrrzqMLd5WlIg.jpeg"/></div></div></figure><p id="9d27" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在本文中，我们将使用最新的<em class="kw">Stateflow API</em>来创建一个验证表单。</p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div class="gh gi kx"><img src="../Images/e139916b7c2f9e68c51639bfb1341e9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:680/1*jEyN0GNfJ1Rt3BU2QWRqaA.gif"/></div></figure><p id="e7ab" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们将创建一个有3个输入文本字段的屏幕</p><ul class=""><li id="0c52" class="lc ld iq ka b kb kc kf kg kj le kn lf kr lg kv lh li lj lk bi translated">名字-该字段仅接受字母。</li><li id="fddc" class="lc ld iq ka b kb ll kf lm kj ln kn lo kr lp kv lh li lj lk bi translated">密码—密码长度应大于8个字符。</li><li id="4cac" class="lc ld iq ka b kb ll kf lm kj ln kn lo kr lp kv lh li lj lk bi translated">用户ID —此字段需要包含下划线(_)。</li></ul><p id="d203" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">只有当所有三个字段都被正确填写时，<strong class="ka ir">提交按钮</strong>才被激活。</p><h1 id="1576" class="lq lr iq bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">设置视图模型</h1><p id="cb73" class="pw-post-body-paragraph jy jz iq ka b kb mo kd ke kf mp kh ki kj mq kl km kn mr kp kq kr ms kt ku kv ij bi translated">在Viewmodel中，为每个输入字段初始化val。</p><figure class="ky kz la lb gt jr"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="a0c0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在为每个输入字段创建一个setter函数，这个函数将在编辑字段时被调用。使用这些函数设置上述变量的值。</p><figure class="ky kz la lb gt jr"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="a6d0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在是时候创建一个流程来表示<strong class="ka ir">提交</strong>按钮的状态了(<em class="kw">启用/禁用</em>)。</p><figure class="ky kz la lb gt jr"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="962a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">使用<strong class="ka ir"> <em class="kw">合并</em> </strong>操作符合并<strong class="ka ir">_名字</strong>流、<strong class="ka ir">_密码</strong>流和<strong class="ka ir">_用户Id </strong>流。只要它们中的任何一个发出一个值，这个函数就会被调用。检查该运算符中的所有三个字段是否有效，并返回它们是否正确(<em class="kw">真</em>)或不正确(<em class="kw">假</em>)。</p><h1 id="74c8" class="lq lr iq bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated"><strong class="ak">设置活动/视图</strong></h1><p id="215e" class="pw-post-body-paragraph jy jz iq ka b kb mo kd ke kf mp kh ki kj mq kl km kn mr kp kq kr ms kt ku kv ij bi translated">现在，在视图中，向所有三个输入编辑文本添加文本更改监听器。每当它们中的任何一个发生变化时，调用viewmodel中的setter函数。</p><figure class="ky kz la lb gt jr"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="6efd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们需要从viewmodel中收集流，并根据流来改变按钮的状态。</p><figure class="ky kz la lb gt jr"><div class="bz fp l di"><div class="mt mu l"/></div></figure><h1 id="efc3" class="lq lr iq bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated"><strong class="ak">就是这样！✅ </strong></h1><p id="8183" class="pw-post-body-paragraph jy jz iq ka b kb mo kd ke kf mp kh ki kj mq kl km kn mr kp kq kr ms kt ku kv ij bi translated">你可以在Github上找到这个应用，以及其他使用flows构建反应式android应用的例子。</p><div class="mv mw gp gr mx my"><a href="https://github.com/Shivamdhuria/stateFlows" rel="noopener  ugc nofollow" target="_blank"><div class="mz ab fo"><div class="na ab nb cl cj nc"><h2 class="bd ir gy z fp nd fr fs ne fu fw ip bi translated">shivamdhuria/Stateflow</h2><div class="nf l"><h3 class="bd b gy z fp nd fr fs ne fu fw dk translated">一个完全用Kotlin编写的Android应用程序，探索了流和协程在真实应用程序中的各种用法…</h3></div><div class="ng l"><p class="bd b dl z fp nd fr fs ne fu fw dk translated">github.com</p></div></div><div class="nh l"><div class="ni l nj nk nl nh nm jw my"/></div></div></a></div></div></div>    
</body>
</html>