<html>
<head>
<title>Introducing tronr, an R package to explore the TRON blockchain</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">介绍tronr，一个探索TRON区块链的R包</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/introducing-tronr-an-r-package-to-explore-the-tron-blockchain-f0413f38b753?source=collection_archive---------38-----------------------#2021-02-22">https://levelup.gitconnected.com/introducing-tronr-an-r-package-to-explore-the-tron-blockchain-f0413f38b753?source=collection_archive---------38-----------------------#2021-02-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="5ff6" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">查询账户余额、交易、代币转账等等。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/676b01221ceb52492ef2d4602f8a28f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DoZim3NQgvCUdRdIWwEsSg.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">图片由谢尔盖·马斯蒂斯基提供。这张图片中的TRON徽标(“红色钻石”)源自官方图标包，可在TRON基金会的网站(<a class="ae ky" href="https://tron.network/" rel="noopener ugc nofollow" target="_blank"> https://tron.network </a>)下载并免费使用</figcaption></figure><h1 id="e446" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">动机</h1><p id="6bc8" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">由<a class="ae ky" href="https://en.wikipedia.org/wiki/Justin_Sun" rel="noopener ugc nofollow" target="_blank"> Justin Sun </a>和<a class="mn mo ep" href="https://medium.com/u/7c2f78c9d321?source=post_page-----f0413f38b753--------------------------------" rel="noopener" target="_blank"> TRON Foundation </a>于2017年创立，如今<a class="ae ky" href="https://tron.network/" rel="noopener ugc nofollow" target="_blank"> TRON </a>是区块链最受欢迎的项目之一。它越来越受欢迎主要是因为它的速度和低交易成本，允许开发健壮的分散应用程序(<a class="ae ky" href="https://www.dapp.com/" rel="noopener ugc nofollow" target="_blank"> dApps </a>)，尤其是在线游戏。因此，该项目最近获得了很大的吸引力和几个高调的合作伙伴关系，包括与<a class="ae ky" href="https://www.bittorrent.com/blog/2018/07/23/its-official-bittorrent-is-now-part-of-tron/" rel="noopener ugc nofollow" target="_blank"> BitTorrent </a>、<a class="ae ky" href="https://uk.news.yahoo.com/samsung-adds-tron-dapps-galaxy-172152733.html" rel="noopener ugc nofollow" target="_blank">三星</a>、<a class="ae ky" href="https://tronfoundation.medium.com/trons-bittorrent-partnered-with-huawei-c6e6921356b9" rel="noopener">华为</a>、<a class="ae ky" href="https://www.financemagnates.com/cryptocurrency/news/opera-integrates-tron-wallet-on-all-web-browsers/" rel="noopener ugc nofollow" target="_blank"> Opera </a>等公司的合资企业。2021年2月，<a class="ae ky" href="https://tron.network/trx?lng=en" rel="noopener ugc nofollow" target="_blank"> Tronix (TRX) </a>、TRON的原生货币<a class="ae ky" href="https://www.coingecko.com/en/coins/tron" rel="noopener ugc nofollow" target="_blank">市值超过42亿美元</a>。</p><p id="9772" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma mr mc md me ms mg mh mi mt mk ml mm im bi translated">TRON上构建的大量应用程序使该区块链成为一个有趣且有价值的数据源，可以为各种分析和数据科学产品提供支持。当然，要构建这样的产品，需要一种以编程方式从区块链中提取数据的方法。TRON确实提供了几个API和客户端库来与其网络交互并执行各种查询。然而，尽管R语言在数据科学社区中很流行，但是到目前为止还没有R包出现在这些客户端库中。本文提供了对<code class="fe mu mv mw mx b">tronr</code>的快速介绍，这是一个R包，旨在填补这一空白，并希望让R用户更容易访问TRON提供的丰富数据。这个包是我最近参与的几个项目的成果，涉及到TRON数据的收集和分析。</p><h1 id="6053" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">装置</h1><p id="6c8d" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">目前，<code class="fe mu mv mw mx b">tronr</code>仅在GitHub上可用，可以与以下软件一起安装:</p><pre class="kj kk kl km gt my mx mz na aw nb bi"><span id="051d" class="nc la it mx b gy nd ne l nf ng"># install.packages("devtools")<br/>devtools::install_github("next-game-solutions/tronr")</span></pre><p id="9d02" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma mr mc md me ms mg mh mi mt mk ml mm im bi translated">一旦我收集并整合了第一批用户的反馈，我也会在CRAN上发布。</p><h1 id="7cc3" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">例子</h1><p id="4dcd" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">该软件包允许人们收集区块链的账户、交易、令牌转移和智能合约事件的数据。此外，用户可以查询Tronix (TRX)的当前和历史市场状态。如何使用<code class="fe mu mv mw mx b">tronr</code>的几个详细例子可以在它的<a class="ae ky" href="https://next-game-solutions.github.io/tronr/" rel="noopener ugc nofollow" target="_blank">在线文档</a>中找到。我还计划在Medium上发布一系列额外的例子。下面提供的只是几个问题，以便读者可以感受一下什么是可能的。</p><pre class="kj kk kl km gt my mx mz na aw nb bi"><span id="858a" class="nc la it mx b gy nd ne l nf ng">library(tronr)<br/>library(dplyr)<br/>library(ggplot2)<br/><br/># Current price of TRX expressed in USD, EUR and BTC (Bitcoin):</span><span id="f5e3" class="nc la it mx b gy nh ne l nf ng">get_current_trx_price(vs_currencies = c("usd", "eur", "btc"))<br/>#&gt; # A tibble: 3 x 3<br/>#&gt;    trx_price vs_currency last_updated_at    <br/>#&gt;        &lt;dbl&gt; &lt;chr&gt;       &lt;dttm&gt;             <br/>#&gt; 1 0.0599     usd         2021-02-21 15:57:13<br/>#&gt; 2 0.0494     eur         2021-02-21 15:57:13<br/>#&gt; 3 0.00000104 btc         2021-02-21 15:57:13<br/><br/><br/># Querying the TRX market data for a historical period, and <br/># plotting the evolution of price:</span><span id="25c5" class="nc la it mx b gy nh ne l nf ng">(min_timestamp &lt;- as.POSIXct("2020-01-01 00:00:00") %&gt;% <br/>   to_unix_timestamp()<br/>)<br/>#&gt; [1] "1577836800000"</span><span id="b8da" class="nc la it mx b gy nh ne l nf ng">(max_timestamp = as.POSIXct("2020-05-01 00:00:00") %&gt;%<br/>   to_unix_timestamp()<br/>)<br/>#&gt; [1] "1588287600000"<br/><br/>price_history &lt;- get_trx_market_data_for_time_range(<br/>  vs_currency = "usd",<br/>  min_timestamp = min_timestamp,<br/>  max_timestamp = max_timestamp<br/>)<br/><br/>glimpse(price_history)<br/>#&gt; Rows: 121<br/>#&gt; Columns: 5<br/>#&gt; $ timestamp         &lt;dttm&gt; 2020-01-01, 2020-01-02, 2020-01-03,...<br/>#&gt; $ vs_currency       &lt;chr&gt; "usd", "usd", "usd", "usd", "usd",...<br/>#&gt; $ price             &lt;dbl&gt; 0.01329452, 0.01319943, 0.01284472,...<br/>#&gt; $ total_trading_vol &lt;dbl&gt; 1134528759, 1032624901, 1056549454,...<br/>#&gt; $ market_cap        &lt;dbl&gt; 877119319, 872350811, 848482045,...<br/><br/>price_history %&gt;% <br/>  ggplot(aes(timestamp, price)) +<br/>  geom_line() +<br/>  theme_minimal()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/8aa10d0275ec1f08fa2d8d2ab9ffedc1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ytMdMtGyI_dI6NoWn8phNw.png"/></div></figure><pre class="kj kk kl km gt my mx mz na aw nb bi"><span id="fdb9" class="nc la it mx b gy nd ne l nf ng"># Information on the latest block generated on the chain:</span><span id="13fd" class="nc la it mx b gy nh ne l nf ng">get_block_info(latest = TRUE) %&gt;% <br/>  glimpse()<br/>#&gt; Rows: 1<br/>#&gt; Columns: 11<br/>#&gt; $ request_time    &lt;dttm&gt; 2021-02-21 15:57:33<br/>#&gt; $ block_number    &lt;chr&gt; "27844966"<br/>#&gt; $ timestamp       &lt;dttm&gt; 2021-02-21 15:56:24<br/>#&gt; $ hash            &lt;chr&gt; "0000000001a8e1666864254248f7f8d4b2e41...<br/>#&gt; $ parent_hash     &lt;chr&gt; "0000000001a8e1657f864801f99717577b481...<br/>#&gt; $ tx_trie_root    &lt;chr&gt; "uLCTnmEGhvpmUeqcZM3VvMxZjiPUd8sr8FPwK...<br/>#&gt; $ confirmed       &lt;lgl&gt; TRUE<br/>#&gt; $ size            &lt;int&gt; 34298<br/>#&gt; $ witness_address &lt;chr&gt; "TWkpg1ZQ4fTv7sj41zBUTMo1kuJEUWTere"<br/>#&gt; $ tx_count        &lt;int&gt; 135<br/>#&gt; $ tx              &lt;list&gt; [&lt;tbl_df[135 x 4]&gt;]<br/><br/><br/># Current balance of an account:</span><span id="d59e" class="nc la it mx b gy nh ne l nf ng">get_account_balance("TQjaZ9FD473QBTdUzMLmSyoGB6Yz1CGpux") %&gt;% <br/>  glimpse()<br/>#&gt; Rows: 1<br/>#&gt; Columns: 10<br/>#&gt; $ request_time &lt;dttm&gt; 2021-02-21 15:57:36<br/>#&gt; $ address      &lt;chr&gt; "TQjaZ9FD473QBTdUzMLmSyoGB6Yz1CGpux"<br/>#&gt; $ name         &lt;chr&gt; "SunTRXV3Pool"<br/>#&gt; $ total_tx     &lt;int&gt; 69012<br/>#&gt; $ bandwidth    &lt;list&gt; [&lt;tbl_df[1 x 20]&gt;]<br/>#&gt; $ trx_balance  &lt;dbl&gt; 5628275<br/>#&gt; $ n_trc20      &lt;int&gt; 16<br/>#&gt; $ trc20        &lt;list&gt; [&lt;tbl_df[16 x 7]&gt;]<br/>#&gt; $ n_trc10      &lt;int&gt; 12<br/>#&gt; $ trc10        &lt;list&gt; [&lt;tbl_df[12 x 8]&gt;]<br/><br/><br/># TRC-10 asset transfers to / from an account within a time range:</span><span id="0e19" class="nc la it mx b gy nh ne l nf ng">get_trc10_transfers(<br/>  related_address = "TMaBqmMRekKZMQEq3u3QrJpGDwPYZZo87V",<br/>  min_timestamp = "1577837400000",<br/>  max_timestamp = "1577837430000"<br/>) %&gt;% glimpse()<br/>#&gt; Rows: 2<br/>#&gt; Columns: 13<br/>#&gt; $ tx_id                    &lt;chr&gt; "675a3606a414f0ea09979688889df0237911d368d...<br/>#&gt; $ block_number             &lt;chr&gt; "15860788", "15860784"<br/>#&gt; $ timestamp                &lt;dttm&gt; 2020-01-01 00:10:27, 2020-01...<br/>#&gt; $ from_address             &lt;chr&gt; "TMaBqmMRekKZMQEq3u3QrJpGDwPY...<br/>#&gt; $ to_address               &lt;chr&gt; "TT5W8MPbYJih9R586kTszb4Loybz...<br/>#&gt; $ is_contract_from_address &lt;lgl&gt; FALSE, FALSE<br/>#&gt; $ is_contract_to_address   &lt;lgl&gt; FALSE, FALSE<br/>#&gt; $ contract_result          &lt;chr&gt; "SUCCESS", "SUCCESS"<br/>#&gt; $ confirmed                &lt;lgl&gt; TRUE, TRUE<br/>#&gt; $ amount                   &lt;dbl&gt; 10, 10<br/>#&gt; $ token_id                 &lt;chr&gt; "1002830", "1002830"<br/>#&gt; $ token_name               &lt;chr&gt; "AUP", "AUP"<br/>#&gt; $ token_abbr               &lt;chr&gt; "AUP", "AUP"</span></pre><h1 id="da1e" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">使用tronr时需要注意的事项</h1><p id="c9db" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">这个包的设计是相当固执己见的，这在其他方面意味着如下。</p><p id="2094" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma mr mc md me ms mg mh mi mt mk ml mm im bi translated">在幕后，大多数与交易相关的数据都是通过一个公共API在<code class="fe mu mv mw mx b">tronr</code>中查询的，该API支持<a class="ae ky" href="https://tronscan.org/" rel="noopener ugc nofollow" target="_blank"> Tronscan网站</a>。这有几个重要的含义:</p><ul class=""><li id="b09f" class="nj nk it lt b lu mp lx mq ma nl me nm mi nn mm no np nq nr bi translated"><a class="ae ky" href="https://github.com/tronscan/tronscan-frontend/blob/master/document/api.md" rel="noopener ugc nofollow" target="_blank"> Tronscan API </a>比<a class="ae ky" href="https://www.trongrid.io/" rel="noopener ugc nofollow" target="_blank"> TronGrid API </a>要慢得多，TronGrid API 是需要计算高效且健壮的机制来从TRON区块链提取大量数据的用例的推荐工具。然而，选择Tronscan API是因为它返回了更丰富、更符合模式的数据。随着TronGrid API的成熟，可能会重新考虑在<code class="fe mu mv mw mx b">tronr</code>使用Tronscan API的决定。</li><li id="e20d" class="nj nk it lt b lu ns lx nt ma nu me nv mi nw mm no np nq nr bi translated">使用<code class="fe mu mv mw mx b">tronr</code>从同一IP地址执行频繁和/或“繁重”查询的尝试可能会被Tronscan服务器视为<a class="ae ky" href="https://www.cloudflare.com/en-gb/learning/ddos/glossary/denial-of-service/" rel="noopener ugc nofollow" target="_blank">拒绝服务攻击</a>，并导致该IP地址被列入黑名单。因此，恳请<code class="fe mu mv mw mx b">tronr</code>的用户考虑周到，并在他们的代码中实现相应的保护措施(例如，将查询分成更小的块，中间有停顿)。</li><li id="4e8d" class="nj nk it lt b lu ns lx nt ma nu me nv mi nw mm no np nq nr bi translated">由于前面两点，<code class="fe mu mv mw mx b">tronr</code>是<em class="nx">而不是</em>打算用于高负载分析应用程序的开发。</li></ul><p id="0ed7" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma mr mc md me ms mg mh mi mt mk ml mm im bi translated">许多<code class="fe mu mv mw mx b">tronr</code>函数以<a class="ae ky" href="https://tidyr.tidyverse.org/articles/nest.html" rel="noopener ugc nofollow" target="_blank">嵌套表</a>的形式返回数据(参见上面的例子)。可以说，鉴于这些数据的层次结构，这是它们的自然选择。选择嵌套tibbles也是因为它们代表了与<code class="fe mu mv mw mx b"><a class="ae ky" href="https://www.tidyverse.org/" rel="noopener ugc nofollow" target="_blank">tidyverse</a></code>工具包兼容的“整洁”数据格式。诚然，不是所有的R用户都喜欢使用<code class="fe mu mv mw mx b">tidyverse</code>工具，这使得<code class="fe mu mv mw mx b">tronr</code>对这些用户来说不那么容易接近和有吸引力。</p><h1 id="0b27" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">结论</h1><p id="f990" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">TRON是一个令人兴奋的区块链项目，其受欢迎程度和影响力都在不断增长。在该区块链上生成的数据为分析应用提供了许多可能性(例如，监控趋势、记录账户间货币资产的移动、预测代币价格、识别流行的dApps和异常活跃的用户等)。).本文中介绍的<code class="fe mu mv mw mx b">tronr</code>包将帮助R用户以熟悉的格式从TRON区块链收集数据，为下游分析做好准备。我将非常感谢来自这个包的用户的任何反馈、错误报告和贡献——详见该项目的<a class="ae ky" href="https://github.com/next-game-solutions/tronr" rel="noopener ugc nofollow" target="_blank"> Github库</a>。</p></div><div class="ab cl ny nz hx oa" role="separator"><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od"/></div><div class="im in io ip iq"><h1 id="c9d6" class="kz la it bd lb lc of le lf lg og li lj jz oh ka ll kc oi kd ln kf oj kg lp lq bi translated">在你走之前</h1><p id="d5ef" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我提供数据科学咨询服务。<a class="ae ky" href="mailto:sergey@nextgamesolutions.com" rel="noopener ugc nofollow" target="_blank">取得联系</a>！</p></div></div>    
</body>
</html>