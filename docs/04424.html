<html>
<head>
<title>JavaScript and the Web — Form Fields and Client-Side Storage</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript和Web——表单域和客户端存储</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/javascript-and-the-web-form-fields-and-client-side-storage-dc0557ec767c?source=collection_archive---------16-----------------------#2020-06-25">https://levelup.gitconnected.com/javascript-and-the-web-form-fields-and-client-side-storage-dc0557ec767c?source=collection_archive---------16-----------------------#2020-06-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/3824736a8809d974a90a0dd8dd421ae0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FKqW8Guz-LcVxHWz"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">尼古拉斯·雷蒙在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="8a58" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">JavaScript是世界上最流行的编程语言之一。为了有效地使用它，我们必须了解它的基本知识。</p><p id="c189" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本文中，我们将了解如何使用表单字段和本地存储。</p><p id="78ef" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们还将了解如何使用会话存储来读取文件和存储数据。</p><h1 id="0b45" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">挑选</h1><p id="0fdc" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">select元素让我们像单选按钮一样选择一样东西。</p><p id="765f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">他们让用户从一组选项中选择。</p><p id="2849" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">单选按钮将选项的布局置于我们的控制之下，但是选择元素的外观由浏览器决定。</p><p id="ae85" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">选择字段有一个类似复选框的变体。</p><p id="bc9d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以添加<code class="fe mh mi mj mk b">multiple</code>属性，让用户选择多个选项。</p><p id="cce7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">显示方式不同于普通的选择字段，后者显示为下拉列表。</p><p id="6463" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">option</code>标签有一个值。每个值都有一个<code class="fe mh mi mj mk b">value</code>属性。</p><p id="147e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果没有添加<code class="fe mh mi mj mk b">value</code>属性，选项内的文本将被计为值。</p><p id="da3f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">对于一个<code class="fe mh mi mj mk b">multiple</code>领域来说，<code class="fe mh mi mj mk b">value</code>属性帮不了我们太多。</p><p id="bea2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果我们有一个可以保存多个选择的select元素，我们可以访问选项标签的<code class="fe mh mi mj mk b">selected</code>属性。</p><p id="309c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，给定以下select元素:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="1c1e" class="mt lf it mk b gy mu mv l mw mx">&lt;select multiple&gt;<br/>  &lt;option&gt;apple&lt;/option&gt;<br/>  &lt;option&gt;orange&lt;/option&gt;<br/>  &lt;option&gt;banana&lt;/option&gt;<br/>  &lt;option&gt;grape&lt;/option&gt;<br/>&lt;/select&gt;</span><span id="198e" class="mt lf it mk b gy my mv l mw mx">&lt;p&gt;</span><span id="431b" class="mt lf it mk b gy my mv l mw mx">&lt;/p&gt;</span></pre><p id="99fe" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="6994" class="mt lf it mk b gy mu mv l mw mx">const select = document.querySelector("select");<br/>const p = document.querySelector("p");<br/>select.addEventListener("change", () =&gt; {<br/>  const selected = [...select.options]<br/>    .filter(o =&gt; o.selected)<br/>    .map(o =&gt; o.value)<br/>    .join(', ');<br/>  p.textContent = selected;<br/>});</span></pre><p id="ae36" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们获取select元素，然后将<code class="fe mh mi mj mk b">select.options</code>转换成一个数组。</p><p id="2995" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们使用<code class="fe mh mi mj mk b">filter</code>方法来获取选中的选项元素。</p><p id="1b37" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后用<code class="fe mh mi mj mk b">map</code>将它们的值放入一个数组。</p><p id="b192" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们将它们连接在一起，并用它填充<code class="fe mh mi mj mk b">p</code>元素。</p><h1 id="5eb4" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">文件字段</h1><p id="2eb5" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">文件字段允许我们通过表单从用户的机器上传文件。</p><p id="2a41" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">田地让我们得到田地，做我们想做的事情。</p><p id="b309" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以添加以下文件字段:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="06ec" class="mt lf it mk b gy mu mv l mw mx">&lt;input type="file"&gt;</span></pre><p id="8e92" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后，我们可以通过编写以下内容来获取文件值:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="ce33" class="mt lf it mk b gy mu mv l mw mx">const input = document.querySelector("input");<br/>input.addEventListener("change", () =&gt; {<br/>  if (input.files.length &gt; 0) {<br/>    const {<br/>      name,<br/>      type<br/>    } = input.files[0];<br/>    console.log(name, type);<br/>  }<br/>});</span></pre><p id="bf79" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">文件对象具有带有文件名和类型的<code class="fe mh mi mj mk b">name</code>和<code class="fe mh mi mj mk b">type</code>属性。</p><p id="7748" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">type</code>类似于<code class="fe mh mi mj mk b">text/plain</code>。</p><p id="efea" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一个文件字段可以支持使用<code class="fe mh mi mj mk b">multiple</code>属性的多个文件提交。</p><p id="2b61" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以用<code class="fe mh mi mj mk b">FileReader</code>构造函数读取文件的内容。</p><p id="c819" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="da92" class="mt lf it mk b gy mu mv l mw mx">const input = document.querySelector("input");<br/>input.addEventListener("change", () =&gt; {<br/>  for (const file of [...input.files]) {<br/>    const reader = new FileReader();<br/>    reader.addEventListener("load", () =&gt; {<br/>      console.log(reader.result);<br/>    });<br/>    reader.readAsText(file);<br/>  }<br/>});</span></pre><p id="59f2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们获取用<code class="fe mh mi mj mk b">input.files</code>选择的文件，并用spread操作符将其转换成一个数组。</p><p id="003e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们使用<code class="fe mh mi mj mk b">FileReader</code>创建一个对象，我们可以监听文件的<code class="fe mh mi mj mk b">load</code>事件。</p><p id="3eae" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们使用创建的<code class="fe mh mi mj mk b">reader</code>对象上的<code class="fe mh mi mj mk b">readAsText</code>来读取文件。</p><h1 id="0d7b" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">在客户端存储数据</h1><p id="4a54" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以用本地存储在客户端存储数据。</p><p id="f72f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为此，我们可以使用<code class="fe mh mi mj mk b">localStorage</code>对象。</p><p id="6594" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，要添加一个条目，我们可以使用<code class="fe mh mi mj mk b">setItem</code>方法:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="211e" class="mt lf it mk b gy mu mv l mw mx">localStorage.setItem("fruit", "orange");</span></pre><p id="fba2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">第一个参数是键，第二个是值。</p><p id="754b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">该值必须是字符串。</p><p id="5bf9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们就可以通过使用<code class="fe mh mi mj mk b">getItem</code>得到物品了:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="7d82" class="mt lf it mk b gy mu mv l mw mx">localStorage.getItem("fruit");</span></pre><p id="f430" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">该值会一直存在，直到被覆盖、被<code class="fe mh mi mj mk b">removeItem</code>删除或数据被清除。</p><p id="1c43" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">浏览器对网站可以存储在本地存储器中的数据大小进行限制。</p><p id="0f83" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这可以防止数据占用太多空间。</p><p id="661a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">还有一个类似于<code class="fe mh mi mj mk b">localStorage</code>的物体叫做<code class="fe mh mi mj mk b">sessionStorage</code>。</p><p id="a718" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">两者的区别在于<code class="fe mh mi mj mk b">sessionStorage</code>的内容在每次会话结束时都会被遗忘。</p><p id="1242" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这意味着当浏览器关闭时是清楚的。</p><figure class="ml mm mn mo gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mz"><img src="../Images/5cef8f51f559c869dbcd1264958b7ace.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*u5eSmt7t8MJv8ASw"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">安妮·斯普拉特在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><h1 id="2e8d" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">结论</h1><p id="f1a9" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">选择字段可以让用户选择一个或多个选项。</p><p id="365f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">文件字段让我们从用户那里获取文件。我们可以使用<code class="fe mh mi mj mk b">FileReader</code>对象来读取文件。</p><p id="8b1c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">本地存储允许我们在浏览器上存储数据，直到它被清除。</p><p id="150a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">会话存储数据，直到会话关闭。</p></div></div>    
</body>
</html>