<html>
<head>
<title/>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1/>
<blockquote>原文：<a href="https://levelup.gitconnected.com/o-1-reloading-with-create-react-app-and-snowpack-8ae2fd73b5f6?source=collection_archive---------13-----------------------#2020-07-19">https://levelup.gitconnected.com/o-1-reloading-with-create-react-app-and-snowpack-8ae2fd73b5f6?source=collection_archive---------13-----------------------#2020-07-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="ir is gp gr it iu gh gi paragraph-image"><div class="ab gu cl iv"><img src="../Images/66f9bc04fc5133c8796d7b2e48fa7e45.png" data-original-src="https://miro.medium.com/v2/0*toI4CSZ85dY1TqB1"/></div></figure><blockquote class="iy iz ja"><p id="3cb1" class="jb jc jd je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz im bi translated"><strong class="je ka">编辑(28/10/2020) </strong>:本教程已更新，可与<code class="fe kb kc kd ke b">npm 7,</code> <code class="fe kb kc kd ke b"><em class="kf">create-react-app@4.0.0</em></code>和<code class="fe kb kc kd ke b"><em class="kf">snowpack@2.15.1</em></code>一起使用。</p><p id="de04" class="jb jc jd je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz im bi translated">你可以在<a class="ae kg" href="https://github.com/okeeffed/cra-4-snowpack" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上找到完成的项目。</p><p id="0401" class="jb jc jd je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz im bi translated">这篇文章中的一些评论可能不再适用于CRA 4。我是应别人要求更新的！</p><p id="191f" class="jb jc jd je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz im bi translated">这篇文章已经发表几个月了，所以请关注Snowpack的新内容，它将深入研究如何使用Webpack 5和TypeScript 4运行Snowpack。</p></blockquote><p id="8f0d" class="pw-post-body-paragraph jb jc kf je b jf jg jh ji jj jk jl jm kh jo jp jq ki js jt ju kj jw jx jy jz im bi translated">近年来，捆绑器已经成为web开发的标准，但是随着应用程序规模的增长，捆绑时间也在增长。这给开发人员带来了问题，耗费了每个人宝贵的时间。</p><p id="d17d" class="pw-post-body-paragraph jb jc kf je b jf jg jh ji jj jk jl jm kh jo jp jq ki js jt ju kj jw jx jy jz im bi translated">Snowpack是一个构建工具，它通过提供一个非捆绑应用程序来解决这个问题。他们有一篇很棒的博文解释了他们是如何得到第二版的。</p><p id="ba16" class="pw-post-body-paragraph jb jc kf je b jf jg jh ji jj jk jl jm kh jo jp jq ki js jt ju kj jw jx jy jz im bi translated">在我自己的工作中，我对建造时间感到难以置信的沮丧，并且非常热衷于探索积雪场。起初，我用他们的<a class="ae kg" href="https://github.com/pikapkg/create-snowpack-app" rel="noopener ugc nofollow" target="_blank">Create Snowpack App</a>starter玩了一圈，但是我想知道如何用<a class="ae kg" href="https://github.com/facebook/create-react-app" rel="noopener ugc nofollow" target="_blank"> Create React App </a>运行并添加snow pack。</p><p id="0bc2" class="pw-post-body-paragraph jb jc kf je b jf jg jh ji jj jk jl jm kh jo jp jq ki js jt ju kj jw jx jy jz im bi translated">关于如何做到这一点，真的没有很多帖子可用，所以我决定自己尝试一些错误。下面是一些简单的步骤，你可以在O(1)构建时间内开始开发一个新的Create React应用程序项目！</p><blockquote class="iy iz ja"><p id="1222" class="jb jc jd je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz im bi translated">注:本教程与<code class="fe kb kc kd ke b">create-react-app@4.0.0</code>和<code class="fe kb kc kd ke b">snowpack@2.15.1</code>一起运行。</p></blockquote><h2 id="7881" class="kk kl kf bd km kn ko dn kp kq kr dp ks kh kt ku kv ki kw kx ky kj kz la lb lc bi translated">入门指南</h2><p id="8e3e" class="pw-post-body-paragraph jb jc kf je b jf ld jh ji jj le jl jm kh lf jp jq ki lg jt ju kj lh jx jy jz im bi translated">使用以下内容创建一个新的React项目:</p><figure class="li lj lk ll gt iu"><div class="bz fp l di"><div class="lm ln l"/></div></figure><p id="150a" class="pw-post-body-paragraph jb jc kf je b jf jg jh ji jj jk jl jm kh jo jp jq ki js jt ju kj jw jx jy jz im bi translated">这将在<code class="fe kb kc kd ke b">snowpack-uplift</code>文件夹中创建默认的<code class="fe kb kc kd ke b">create-react-app</code>设置。</p><h2 id="2da2" class="kk kl kf bd km kn ko dn kp kq kr dp ks kh kt ku kv ki kw kx ky kj kz la lb lc bi translated">Babel运行命令文件</h2><p id="005f" class="pw-post-body-paragraph jb jc kf je b jf ld jh ji jj le jl jm kh lf jp jq ki lg jt ju kj lh jx jy jz im bi translated">将一个<code class="fe kb kc kd ke b">.babelrc</code>文件添加到您的根目录，并添加以下内容:</p><figure class="li lj lk ll gt iu"><div class="bz fp l di"><div class="lm ln l"/></div></figure><h2 id="8051" class="kk kl kf bd km kn ko dn kp kq kr dp ks kh kt ku kv ki kw kx ky kj kz la lb lc bi translated">index.html</h2><p id="5dc9" class="pw-post-body-paragraph jb jc kf je b jf ld jh ji jj le jl jm kh lf jp jq ki lg jt ju kj lh jx jy jz im bi translated">我们需要将<code class="fe kb kc kd ke b">&lt;script type="module" src="https//localhost:8080/_dist_/index.js"&gt;&lt;/script&gt;</code>标签添加到我们的<code class="fe kb kc kd ke b">public/index.html</code>文件中。</p><p id="25c3" class="pw-post-body-paragraph jb jc kf je b jf jg jh ji jj jk jl jm kh jo jp jq ki js jt ju kj jw jx jy jz im bi translated">我的看起来如下:</p><figure class="li lj lk ll gt iu"><div class="bz fp l di"><div class="lm ln l"/></div></figure><h2 id="2363" class="kk kl kf bd km kn ko dn kp kq kr dp ks kh kt ku kv ki kw kx ky kj kz la lb lc bi translated">添加依赖关系</h2><p id="5697" class="pw-post-body-paragraph jb jc kf je b jf ld jh ji jj le jl jm kh lf jp jq ki lg jt ju kj lh jx jy jz im bi translated">让我们为应用程序添加开发依赖项！这将安装Snowpack和我在这个过程中发现的一些其他依赖项，看起来是必需的。</p><blockquote class="iy iz ja"><p id="33b1" class="jb jc jd je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz im bi translated">注意:在npm 7中，如果对等依赖没有像预期的那样解析，您可能需要使用<code class="fe kb kc kd ke b">--legacy-peer-deps</code>标志来运行它。现在我将更新要点来反映这一点。</p></blockquote><figure class="li lj lk ll gt iu"><div class="bz fp l di"><div class="lm ln l"/></div></figure><h2 id="cb4d" class="kk kl kf bd km kn ko dn kp kq kr dp ks kh kt ku kv ki kw kx ky kj kz la lb lc bi translated">package.json</h2><p id="4be8" class="pw-post-body-paragraph jb jc kf je b jf ld jh ji jj le jl jm kh lf jp jq ki lg jt ju kj lh jx jy jz im bi translated">将以下脚本添加到我们可以在开发期间将<code class="fe kb kc kd ke b">dev</code>作为npm脚本运行。这不是必需的，但可以节省时间。</p><figure class="li lj lk ll gt iu"><div class="bz fp l di"><div class="lm ln l"/></div></figure><h2 id="7dc1" class="kk kl kf bd km kn ko dn kp kq kr dp ks kh kt ku kv ki kw kx ky kj kz la lb lc bi translated">积雪场配置</h2><p id="9b21" class="pw-post-body-paragraph jb jc kf je b jf ld jh ji jj le jl jm kh lf jp jq ki lg jt ju kj lh jx jy jz im bi translated">最后，在根目录下创建一个<code class="fe kb kc kd ke b">snowpack.config.js</code>文件，并添加以下内容:</p><figure class="li lj lk ll gt iu"><div class="bz fp l di"><div class="lm ln l"/></div></figure><p id="eeec" class="pw-post-body-paragraph jb jc kf je b jf jg jh ji jj jk jl jm kh jo jp jq ki js jt ju kj jw jx jy jz im bi translated">这些选项是我从<code class="fe kb kc kd ke b">Create Snowpack App</code> starter应用程序继承来的。可能不需要<code class="fe kb kc kd ke b">devOptions</code>，尽管我发现在添加<code class="fe kb kc kd ke b">fallback: "public/index.html"</code>到这些选项之前构建会失败。</p><h2 id="19c7" class="kk kl kf bd km kn ko dn kp kq kr dp ks kh kt ku kv ki kw kx ky kj kz la lb lc bi translated">Create-React-App 4.0的重要更新</h2><p id="2290" class="pw-post-body-paragraph jb jc kf je b jf ld jh ji jj le jl jm kh lf jp jq ki lg jt ju kj lh jx jy jz im bi translated">在CRA 4 <code class="fe kb kc kd ke b">src/App.js</code>文件中，你会注意到<strong class="je ka">没有为你导入React</strong>。如果你想使用Snowpack，你需要在文件的顶部添加<code class="fe kb kc kd ke b">import React from 'react'</code>。</p><h2 id="ab47" class="kk kl kf bd km kn ko dn kp kq kr dp ks kh kt ku kv ki kw kx ky kj kz la lb lc bi translated">运行应用程序</h2><p id="90e1" class="pw-post-body-paragraph jb jc kf je b jf ld jh ji jj le jl jm kh lf jp jq ki lg jt ju kj lh jx jy jz im bi translated">现在运行<code class="fe kb kc kd ke b">yarn dev</code>或<code class="fe kb kc kd ke b">npm run dev</code>启动它！应用程序将在端口8080上加载。</p><p id="1718" class="pw-post-body-paragraph jb jc kf je b jf jg jh ji jj jk jl jm kh jo jp jq ki js jt ju kj jw jx jy jz im bi translated">为了看到一些整齐的速度变化，将<code class="fe kb kc kd ke b">App.js</code>和<code class="fe kb kc kd ke b">App.css</code>复制到文件<code class="fe kb kc kd ke b">Alt.js</code>和<code class="fe kb kc kd ke b">Alt.css</code>中。摆弄这些设置，这样你就可以看到变化。</p><p id="e2b3" class="pw-post-body-paragraph jb jc kf je b jf jg jh ji jj jk jl jm kh jo jp jq ki js jt ju kj jw jx jy jz im bi translated">我更新了<code class="fe kb kc kd ke b">Alt.css</code>来改变一些颜色:</p><figure class="li lj lk ll gt iu"><div class="bz fp l di"><div class="lm ln l"/></div></figure><p id="3a28" class="pw-post-body-paragraph jb jc kf je b jf jg jh ji jj jk jl jm kh jo jp jq ki js jt ju kj jw jx jy jz im bi translated">对<code class="fe kb kc kd ke b">Alt.js</code>做一些简单的修改，以使用<code class="fe kb kc kd ke b">Alt.css</code>并有一些不同的文本:</p><figure class="li lj lk ll gt iu"><div class="bz fp l di"><div class="lm ln l"/></div></figure><h2 id="7449" class="kk kl kf bd km kn ko dn kp kq kr dp ks kh kt ku kv ki kw kx ky kj kz la lb lc bi translated">看到速度的变化</h2><p id="1204" class="pw-post-body-paragraph jb jc kf je b jf ld jh ji jj le jl jm kh lf jp jq ki lg jt ju kj lh jx jy jz im bi translated">在<code class="fe kb kc kd ke b">index.js</code>中导入<code class="fe kb kc kd ke b">Alt.js</code>，并开始与<code class="fe kb kc kd ke b">&lt;App /&gt;</code>来回交换，以查看一些快速变化！</p><figure class="li lj lk ll gt iu"><div class="bz fp l di"><div class="lm ln l"/></div></figure><figure class="li lj lk ll gt iu gh gi paragraph-image"><div class="ab gu cl iv"><img src="../Images/d6e4d42f563103766e91b1f3889abd16.png" data-original-src="https://miro.medium.com/v2/0*MT36ENFWh6UkMBZu"/></div><figcaption class="lo lp gj gh gi lq lr bd b be z dk translated">O(1)行动中的建设</figcaption></figure><p id="7bd6" class="pw-post-body-paragraph jb jc kf je b jf jg jh ji jj jk jl jm kh jo jp jq ki js jt ju kj jw jx jy jz im bi translated">运行CRA的美妙之处在于我们实际上可以和默认设置进行比较！停止Snowpack服务器，启动<code class="fe kb kc kd ke b">yarn start</code>或<code class="fe kb kc kd ke b">npm run start</code>让基本应用程序与捆绑器一起运行。请注意以下事项:</p><ol class=""><li id="f289" class="ls lt kf je b jf jg jj jk kh lu ki lv kj lw jz lx ly lz ma bi translated">服务器启动速度有多慢。</li><li id="bc47" class="ls lt kf je b jf mb jj mc kh md ki me kj mf jz lx ly lz ma bi translated">在<code class="fe kb kc kd ke b">&lt;Alt /&gt;</code>和<code class="fe kb kc kd ke b">&lt;App /&gt;</code>之间切换时，重新加载应用程序的时间越长。</li></ol><p id="4c39" class="pw-post-body-paragraph jb jc kf je b jf jg jh ji jj jk jl jm kh jo jp jq ki js jt ju kj jw jx jy jz im bi translated">这里需要特别注意的是，这个应用程序仍然非常非常小，所以随着我们把应用程序变得越来越大，捆绑的时间只会越来越长！那将是积雪真正发光的时候。</p><h2 id="4dc6" class="kk kl kf bd km kn ko dn kp kq kr dp ks kh kt ku kv ki kw kx ky kj kz la lb lc bi translated">结论</h2><p id="1bf3" class="pw-post-body-paragraph jb jc kf je b jf ld jh ji jj le jl jm kh lf jp jq ki lg jt ju kj lh jx jy jz im bi translated">我们在5分钟内用Snowpack启动并运行，并有很好的机会比较这两者！O(1)构建工具是真正的新鲜空气！</p><p id="7a00" class="pw-post-body-paragraph jb jc kf je b jf jg jh ji jj jk jl jm kh jo jp jq ki js jt ju kj jw jx jy jz im bi translated">如果你喜欢这个简短的教程，你将会喜欢我的下一个教程，在那里我将深入研究Webpack Federation的远程微前端。</p><h2 id="76c8" class="kk kl kf bd km kn ko dn kp kq kr dp ks kh kt ku kv ki kw kx ky kj kz la lb lc bi translated">资源和进一步阅读</h2><ol class=""><li id="e9c1" class="ls lt kf je b jf ld jj le kh mg ki mh kj mi jz lx ly lz ma bi translated"><a class="ae kg" href="https://github.com/okeeffed/cra-4-snowpack" rel="noopener ugc nofollow" target="_blank">完工项目</a></li><li id="75a4" class="ls lt kf je b jf mb jj mc kh md ki me kj mf jz lx ly lz ma bi translated"><a class="ae kg" href="https://www.snowpack.dev/posts/2020-05-26-snowpack-2-0-release/" rel="noopener ugc nofollow" target="_blank">通往积雪场2的道路</a></li><li id="6e52" class="ls lt kf je b jf mb jj mc kh md ki me kj mf jz lx ly lz ma bi translated"><a class="ae kg" href="https://github.com/pikapkg/create-snowpack-app" rel="noopener ugc nofollow" target="_blank">创建Snowpack App </a></li><li id="3928" class="ls lt kf je b jf mb jj mc kh md ki me kj mf jz lx ly lz ma bi translated"><a class="ae kg" href="https://github.com/facebook/create-react-app" rel="noopener ugc nofollow" target="_blank">创建React应用</a></li></ol><p id="c36d" class="pw-post-body-paragraph jb jc kf je b jf jg jh ji jj jk jl jm kh jo jp jq ki js jt ju kj jw jx jy jz im bi translated"><em class="jd">图片来源:</em> <a class="ae kg" href="https://unsplash.com/@katiemoum" rel="noopener ugc nofollow" target="_blank"> <em class="jd">凯蒂·穆姆</em> </a></p><p id="44f0" class="pw-post-body-paragraph jb jc kf je b jf jg jh ji jj jk jl jm kh jo jp jq ki js jt ju kj jw jx jy jz im bi translated"><em class="jd">原贴于我的</em> <a class="ae kg" href="https://blog.dennisokeeffe.com/blog/2020-07-19-cra-with-snowpack/" rel="noopener ugc nofollow" target="_blank"> <em class="jd">博客</em> </a> <em class="jd">。</em></p></div></div>    
</body>
</html>