<html>
<head>
<title>Add Google Analytics to React/Next in 5 minutes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">添加Google Analytics以在5分钟内做出反应/下一步</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/add-google-analytics-to-react-next-in-5-minutes-1ddb890dd226?source=collection_archive---------0-----------------------#2022-11-26">https://levelup.gitconnected.com/add-google-analytics-to-react-next-in-5-minutes-1ddb890dd226?source=collection_archive---------0-----------------------#2022-11-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/16a34e0927b1936b0a3b18485cfa362b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ZV6IVPHmTEf4Hyra.png"/></div></div></figure><h1 id="12c9" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">介绍</h1><p id="91d8" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">网站和应用程序有大量的追踪器，但是它们服务于许多目的，有些是好的目的。</p><p id="9d37" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">假设您想要跟踪有多少用户访问了您的网站，有多少用户实际使用了某个功能，或者有多少用户在执行某些操作时掉线。</p><p id="dd93" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">谷歌分析是最出色的跟踪工具之一。因此，我写这篇文章是为了向你展示如何将谷歌分析整合到你的React应用中。</p><h1 id="4f12" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">建立</h1><p id="636e" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">首先，你需要创建一个谷歌账户，你可能已经有了。</p><p id="8f5e" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">然后你需要为你的应用程序注入一些谷歌标签管理器的脚本:</p><pre class="lz ma mb mc gt md me mf bn mg mh bi"><span id="0bc3" class="mi jz iq me b be mj mk l ml mm">      &lt;Script<br/>        async<br/>        strategy="afterInteractive"<br/>        src="https://www.googletagmanager.com/gtag/js?id=YOUR ID"<br/>      &gt;&lt;/Script&gt;<br/>      &lt;Script strategy="afterInteractive" id="gtm"&gt;<br/>        {`<br/>           window.dataLayer = window.dataLayer || [];<br/>           function gtag(){dataLayer.push(arguments);}<br/>           gtag('js', new Date());<br/>           gtag('config', YOUR ID,{ 'debug_mode':true });<br/>        `}<br/>      &lt;/Script&gt;</span></pre><p id="838a" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">第一个脚本标记是安装GTM，第二个标记是配置Google标记，您需要提供您的GTM id，您可以启用调试模式来检查操作。</p><h1 id="a0ee" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">发送事件</h1><p id="ebd2" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">虽然默认情况下，谷歌提供了一些内置事件，如页面浏览事件或滚动到底部事件。我们可以在仪表板上创建自定义事件</p><p id="d6f7" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">但是在我看来，为了更好的行为定制，我们应该从我们的代码中触发定制事件。所以我为此创建了一个实用程序:</p><pre class="lz ma mb mc gt md me mf bn mg mh bi"><span id="f9d8" class="mi jz iq me b be mj mk l ml mm">type WindowWithDataLayer = Window &amp; {<br/>  gtag: Function;<br/>};<br/><br/>declare const window: WindowWithDataLayer;<br/><br/>type TrackerProps = {<br/>  eventName: string;<br/>};<br/><br/>export const tracker = ({ eventName }: TrackerProps) =&gt; {<br/>  window.gtag('event', eventName);<br/>};</span></pre><p id="4ee1" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">使用<code class="fe mn mo mp me b">tracker</code>函数，我们将能够使用自定义的事件名称触发任何我们喜欢的事件(您甚至可以提供参数，只需自定义上面的我的函数)。这就是它的名称:</p><pre class="lz ma mb mc gt md me mf bn mg mh bi"><span id="7387" class="mi jz iq me b be mj mk l ml mm">          onClick={() =&gt; {<br/>            tracker({ eventName: 'open_projects' });<br/>            set(open =&gt; !open);<br/>          }}</span></pre><p id="0860" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">我在click上触发了一个名为<code class="fe mn mo mp me b">open_projects</code>的事件。</p><figure class="lz ma mb mc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mq"><img src="../Images/50ad90617bbe9764f3bd2916348e8ef7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tw4m9mcW_eQ8uDf0GPyhsg.png"/></div></div></figure><p id="4257" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">我多次尝试触发该事件，以查看它是否工作，正如您所见，它工作得非常完美。</p><h1 id="d987" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">结论</h1><p id="2ca4" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">这只是一个非常基本的教程，告诉你如何在你的应用程序中实现谷歌分析，你可以修改上面的例子来发送参数，或者去谷歌的仪表板创建高级事件。</p><h1 id="dad0" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">遗言</h1><p id="eafd" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">虽然我的内容对每个人都是免费的，但是如果你觉得这篇文章有帮助，<a class="ae mr" href="https://www.buymeacoffee.com/kylele19" rel="noopener ugc nofollow" target="_blank">你可以在这里给我买杯咖啡</a></p></div></div>    
</body>
</html>