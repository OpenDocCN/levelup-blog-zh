<html>
<head>
<title>Dart Null Safety must be improved!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Dart Null安全性必须提高！</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/dart-null-safety-is-trash-right-now-fbd5942838a4?source=collection_archive---------1-----------------------#2022-12-22">https://levelup.gitconnected.com/dart-null-safety-is-trash-right-now-fbd5942838a4?source=collection_archive---------1-----------------------#2022-12-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="0dd0" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">只是现在还不够好</h2><div class=""/><div class=""><h2 id="1ce4" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">我看不到好处，对坏处感到愤怒。它需要尽快改进。</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/6e7f88033a045fa8b2184af3a9cee4c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*BbSOmwqMwvgMne5b"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">由<a class="ae lh" href="https://unsplash.com/@cajugos?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">卡尤·戈麦斯</a>在<a class="ae lh" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</figcaption></figure><p id="6337" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">有一篇<a class="ae lh" href="https://medium.com/lost-but-coding/what-has-null-safety-given-us-really-9d3cc49bb8ac" rel="noopener">文章</a>是作者同事<a class="me mf ep" href="https://medium.com/u/426137a1abbf?source=post_page-----fbd5942838a4--------------------------------" rel="noopener" target="_blank"> Andrew Zuo </a>写的，他谈到了Flutter null安全性。他对目前的状况不满意，但期望将来会有所改善。</p><div class="mg mh gp gr mi mj"><a href="https://medium.com/lost-but-coding/what-has-null-safety-given-us-really-9d3cc49bb8ac" rel="noopener follow" target="_blank"><div class="mk ab fo"><div class="ml ab mm cl cj mn"><h2 class="bd jd gy z fp mo fr fs mp fu fw jc bi translated">零安全到底给了我们什么？</h2><div class="mq l"><h3 class="bd b gy z fp mo fr fs mp fu fw dk translated">所以我想写一段时间。但这似乎从来都不是一个有趣的概念。就像，当…</h3></div><div class="mr l"><p class="bd b dl z fp mo fr fs mp fu fw dk translated">medium.com</p></div></div><div class="ms l"><div class="mt l mu mv mw ms mx lb mj"/></div></div></a></div><p id="504d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我读了这篇文章，我几乎能理解他所说的一切。首先，我想，没那么糟糕。但是所有这些小事情累积起来最后都变坏了。Dart代码比C#代码更难读，这只是因为无效的安全攻击。</p><h2 id="01c8" class="my mz it bd na nb nc dn nd ne nf dp ng lr nh ni nj lv nk nl nm lz nn no np iz bi translated">零安全有什么好处？</h2><p id="bfce" class="pw-post-body-paragraph li lj it lk b ll nq kd ln lo nr kg lq lr ns lt lu lv nt lx ly lz nu mb mc md im bi translated">它旨在防止应用程序中出现空引用错误。有用吗？嗯，至少目前对我来说不是。静态代码分析器不够好，显示的警告非常烦人，因为它们是错误的。属性是一个真正的问题:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nv"><img src="../Images/8cbaac3aaa10d3f1615f5009c1d8136e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1236/format:webp/1*psZV14NKJenhuG5I8OrPzQ.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">只是我的应用程序中一个无用的编译器错误…</figcaption></figure><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/2ffc825140237f9974ac53bdac729e1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1118/format:webp/1*3jIhQBpn_KErH-ljkGMf2A.png"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">为什么我们还要做空检查？！</figcaption></figure><p id="c6b2" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">简直可笑。</p><pre class="ks kt ku kv gt nx ny nz bn oa ob bi"><span id="1ff1" class="oc mz it ny b be od oe l of og">🔔 Get a short summary of my Medium content on the 1st of every month in your inbox. Save time and pick what you like to read!<br/><br/>Click <a class="ae lh" href="http://medium-newsletter.quickcoder.org/" rel="noopener ugc nofollow" target="_blank">HERE</a> to subscribe for free!</span></pre><p id="e809" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我认为自己是一个相当好的程序员。人无完人，包括我在内的每个人都会犯错。因此，遇到空引用错误对我来说是可能的，但可能不会像其他开发人员那样频繁。我在没有空安全的情况下编码了15年，我已经适应了空检查和防御性编程的情况。</p><p id="a630" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">但是现在，零安全让一切变得更好，对吗？🙃</p><h2 id="fbe0" class="my mz it bd na nb nc dn nd ne nf dp ng lr nh ni nj lv nk nl nm lz nn no np iz bi translated">迟到和！</h2><p id="d855" class="pw-post-body-paragraph li lj it lk b ll nq kd ln lo nr kg lq lr ns lt lu lv nt lx ly lz nu mb mc md im bi translated">不，因为你可以用<code class="fe oh oi oj ny b">!</code>操作符破坏系统。它告诉编译器忽略这个位置可能的空错误，我们又回到了开始的地方。事实上，我看到人们通过将操作符包含在任何可能的代码段中，将他们飘忽不定的应用程序“迁移”到零安全性。你不会相信它看起来有多糟糕。</p><p id="cd88" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">下面是我现在不喜欢Dart的两个进一步的例子:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/ad1445df3e4930d9796a5e37388c34d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1148/format:webp/1*JDmWvN00RYrLoy0lU8byrQ.png"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">要么使用late关键字，让编译器忽略错误…</figcaption></figure><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/c4260ae0fea2e903fa4649debff25511.png" data-original-src="https://miro.medium.com/v2/resize:fit:1162/format:webp/1*y7lVO9Ymu8lc0jcBJ-InHw.png"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">或者使用？还有！运算符组合</figcaption></figure><p id="7e9f" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">所以你要么使用<code class="fe oh oi oj ny b">late</code>关键字来关闭编译器。我说的闭嘴是指，你可以在你的类中自由使用这些字段，不会得到任何暗示，它们可能是空的。或者你跟<code class="fe oh oi oj ny b">?</code> ( <strong class="lk jd">你好，我可以是null </strong>)和<code class="fe oh oi oj ny b">!</code> ( <strong class="lk jd">不过别担心，我不是</strong>)的疯狂组合。下一个缺点是，每次访问字段或变量时，您都需要使用<code class="fe oh oi oj ny b">!</code>操作符<strong class="lk jd">。这很愚蠢，代码看起来也很难看。老实说，我并不喜欢这两种方式。有人可能会说我应该直接注入服务，但这不是我的观点。空安全应该是无缝的，但事实并非如此。</strong></p><p id="4c49" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">C#也有同样的空安全语言特性，这并没有让我感到很困扰。它也不完美，但是他们有更好的代码分析器和一些有用的关键字。<code class="fe oh oi oj ny b">readonly</code>关键字迫使程序员在构造函数代码完成之前给一个字段或属性赋值。在那之后，您不会像Dart那样收到值可能为空的恼人警告。这样好多了。</p><h2 id="ee2b" class="my mz it bd na nb nc dn nd ne nf dp ng lr nh ni nj lv nk nl nm lz nn no np iz bi translated">如何改善？</h2><p id="2cd7" class="pw-post-body-paragraph li lj it lk b ll nq kd ln lo nr kg lq lr ns lt lu lv nt lx ly lz nu mb mc md im bi translated">我不知道。我不是语言设计师，也不太了解开发过程(这在GitHub  btw上<a class="ae lh" href="https://github.com/dart-lang" rel="noopener ugc nofollow" target="_blank">公开可见)。目前，我经常使用<code class="fe oh oi oj ny b">late</code>关键词，但感觉就像开车时没有系安全带。对我来说，拥有像C#这样的<code class="fe oh oi oj ny b">readonly</code>关键字会很酷。这就像Dart的<code class="fe oh oi oj ny b">final</code>，但是你可以在构造函数中初始化值。当然，这只有在代码分析器比现在理解更多的上下文时才有效。</a></p><p id="2416" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">也许我们应该向ChatGPT寻求解决方案😄</p><h2 id="575a" class="my mz it bd na nb nc dn nd ne nf dp ng lr nh ni nj lv nk nl nm lz nn no np iz bi translated">结论</h2><p id="5d8b" class="pw-post-body-paragraph li lj it lk b ll nq kd ln lo nr kg lq lr ns lt lu lv nt lx ly lz nu mb mc md im bi translated">Dart中的空安全现在不是很好。但是我很希望有一天它能和C#处于同一水平，如果开发人员继续像以前一样努力的话。感觉有点像“伙计，你没有比这更大的问题吗？”我可能不知道。也许2-3年后，我们都会嘲笑这篇文章。</p></div><div class="ab cl om on hx oo" role="separator"><span class="op bw bk oq or os"/><span class="op bw bk oq or os"/><span class="op bw bk oq or"/></div><div class="im in io ip iq"><p id="28df" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><a class="ae lh" href="https://medium.com/@xeladu/membership" rel="noopener"> <strong class="lk jd"> <em class="ot">通过我的推荐链接加入成千上万的媒体会员，每月只需5美元就可以阅读你想阅读的文章！</em> </strong> </a></p><div class="mg mh gp gr mi mj"><a href="https://medium.com/@xeladu/membership" rel="noopener follow" target="_blank"><div class="mk ab fo"><div class="ml ab mm cl cj mn"><h2 class="bd jd gy z fp mo fr fs mp fu fw jc bi translated">通过我的推荐链接加入Medium-xela du</h2><div class="mq l"><h3 class="bd b gy z fp mo fr fs mp fu fw dk translated">只需点击一下，就可以通过会员资格访问数千篇文章！您的会员资格只需5美元一张…</h3></div><div class="mr l"><p class="bd b dl z fp mo fr fs mp fu fw dk translated">medium.com</p></div></div><div class="ms l"><div class="ou l mu mv mw ms mx lb mj"/></div></div></a></div><p id="0146" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">点击<a class="ae lh" href="http://medium-newsletter.quickcoder.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="lk jd">此处</strong> </a>每月一次获取我所有的中篇文章汇总🔔<br/>浏览<a class="ae lh" href="https://xeladu.gumroad.com/" rel="noopener ugc nofollow" target="_blank">我的口香糖商店</a>寻找有趣的编程素材🏬</p></div><div class="ab cl om on hx oo" role="separator"><span class="op bw bk oq or os"/><span class="op bw bk oq or os"/><span class="op bw bk oq or"/></div><div class="im in io ip iq"><div class="ks kt ku kv gt"><div role="button" tabindex="0" class="ab bv gv cb fp ov ow bn ox lb ex"><div class="oy l"><div class="ab q"><div class="l di"><img alt="xeladu" class="l de bw oz pa fe" src="../Images/c6d3049714795a7a8169ac0957f05cfe.png" width="20" height="20" loading="lazy" data-original-src="https://miro.medium.com/v2/resize:fill:40:40/1*zDQIuT_7N15cT_wzRxjc4g.jpeg"/><div class="fb bw l oz pa fc n aw fd"/></div><div class="hh l fo"><p class="bd b dl z fp fq fr fs ft fu fv fw dk translated"><a class="ae af ag ah ai aj ak al am an ao ap aq ar as" href="https://xeladu.medium.com/?source=post_page-----fbd5942838a4--------------------------------" rel="noopener follow" target="_top">赛拉杜</a></p></div></div><div class="pd pe gw l"><h2 class="bd jd ug uh fp ui fr fs mp fu fw jc bi translated">来自软件开发人员生活的感悟</h2></div><div class="ab q"><div class="l fo"><a class="bd b be z bi uj au uk ul um qx un an eh ei uo up uq el em eo de bk ep" href="https://xeladu.medium.com/list/insights-from-the-life-of-a-software-developer-e1959ecf59e6?source=post_page-----fbd5942838a4--------------------------------" rel="noopener follow" target="_top">View list</a></div><div class="ur l fo"><span class="bd b dl z dk">8 stories</span></div></div></div><div class="pq dh pr fp ab ps fo di"><div class="di pi bv pj pk"><div class="dh l"><img alt="" class="dh" src="../Images/3b18f484145343528a2e4807f2da8b7e.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/0*zdIdo3QQGOzrjzcv"/></div></div><div class="di pi bv pl pm pn"><div class="dh l"><img alt="" class="dh" src="../Images/fd485d5976fbc7c7ec7ddf7cc6c3edd9.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/0*BbSOmwqMwvgMne5b"/></div></div><div class="di bv po pp pn"><div class="dh l"><img alt="" class="dh" src="../Images/facc2edbf30321fa38af077dba3ed072.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/0*scPXMvGZnTanw-SZ"/></div></div></div></div></div><div class="mg mh gp gr mi"><div role="button" tabindex="0" class="ab bv gv cb fp ov ow bn ox lb ex"><div class="oy l"><div class="ab q"><div class="l di"><img alt="xeladu" class="l de bw oz pa fe" src="../Images/c6d3049714795a7a8169ac0957f05cfe.png" width="20" height="20" loading="lazy" data-original-src="https://miro.medium.com/v2/resize:fill:40:40/1*zDQIuT_7N15cT_wzRxjc4g.jpeg"/><div class="fb bw l oz pa fc n aw fd"/></div><div class="hh l fo"><p class="bd b dl z fp fq fr fs ft fu fv fw dk translated"><a class="ae af ag ah ai aj ak al am an ao ap aq ar as" href="https://xeladu.medium.com/?source=post_page-----fbd5942838a4--------------------------------" rel="noopener follow" target="_top">赛拉杜</a></p></div></div><div class="pd pe gw l"><h2 class="bd jd ug uh fp ui fr fs mp fu fw jc bi translated">软件工程师的高级颤振文章</h2></div><div class="ab q"><div class="l fo"><a class="bd b be z bi uj au uk ul um qx un an eh ei uo up uq el em eo de bk ep" href="https://xeladu.medium.com/list/advanced-flutter-articles-for-software-engineers-f074879fdef3?source=post_page-----fbd5942838a4--------------------------------" rel="noopener follow" target="_top">View list</a></div><div class="ur l fo"><span class="bd b dl z dk">9 stories</span></div></div></div><div class="pq dh pr fp ab ps fo di"><div class="di pi bv pj pk"><div class="dh l"><img alt="" class="dh" src="../Images/e5774d314e770573e2601ca542dbc4de.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/0*lySym3EjJw93S_Fa"/></div></div><div class="di pi bv pl pm pn"><div class="dh l"><img alt="" class="dh" src="../Images/5289da1df3e789a8ca1d3f6024c01f4b.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/0*s6ys37P9D8ddVnW_"/></div></div><div class="di bv po pp pn"><div class="dh l"><img alt="" class="dh" src="../Images/642d00374fa0d6e6971120398fbbeb90.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/0*JNMh3UEdihkfQWl9"/></div></div></div></div></div></div></div>    
</body>
</html>