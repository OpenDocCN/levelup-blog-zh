<html>
<head>
<title>How To Test S3 with Terraform using LocalStack</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用LocalStack用Terraform测试S3</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-test-s3-with-terraform-using-localstack-585d2366fa13?source=collection_archive---------4-----------------------#2022-04-05">https://levelup.gitconnected.com/how-to-test-s3-with-terraform-using-localstack-585d2366fa13?source=collection_archive---------4-----------------------#2022-04-05</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="8a2c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">LocalStack简化了AWS服务的测试</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/f9215e52b74851433e70f7c584a2675e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H6PepL9eJLxYjh3x4--rcA.jpeg"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">作者图片</figcaption></figure><p id="4c1b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">新手在学习AWS时面临的主要挑战是如何维护基础设施并在本地测试它。下面是发生在两位开发人员之间的类似对话，他们在学习AWS服务时试图相互理解和帮助。</p><h1 id="c3ec" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">什么是Terraform？</h1><p id="ba21" class="pw-post-body-paragraph jq jr it js b jt mc jv jw jx md jz ka kb me kd ke kf mf kh ki kj mg kl km kn im bi translated">Terraform是一个基础设施，作为一个代码工具，帮助我们在云服务上创建和管理资源。</p><ul class=""><li id="ee0d" class="mh mi it js b jt ju jx jy kb mj kf mk kj ml kn mm mn mo mp bi translated">通过维护状态文件来跟踪基础设施，状态文件是您环境的真实来源。</li><li id="2010" class="mh mi it js b jt mq jx mr kb ms kf mt kj mu kn mm mn mo mp bi translated">自动化的变化，它有助于检测资源的依赖关系，并帮助用户不必担心一步一步的指令来创建资源。</li></ul><h2 id="dc0d" class="mv lf it bd lg mw mx dn lk my mz dp lo kb na nb ls kf nc nd lw kj ne nf ma ng bi translated">地形状态</h2><ul class=""><li id="b211" class="mh mi it js b jt mc jx md kb nh kf ni kj nj kn mm mn mo mp bi translated"><strong class="js iu"> <em class="nk"> Init </em> </strong> <br/>以下命令帮助初始化当前工作目录以使用terraform。</li></ul><pre class="kp kq kr ks gt nl nm nn no aw np bi"><span id="76fc" class="mv lf it nm b gy nq nr l ns nt">terraform init </span></pre><ul class=""><li id="e741" class="mh mi it js b jt ju jx jy kb mj kf mk kj ml kn mm mn mo mp bi translated"><strong class="js iu"> <em class="nk">计划</em> </strong> <br/>它根据配置文件创建一个执行计划来创建、更新或销毁资源。</li></ul><pre class="kp kq kr ks gt nl nm nn no aw np bi"><span id="8a9e" class="mv lf it nm b gy nq nr l ns nt">terraform plan</span></pre><ul class=""><li id="d3ea" class="mh mi it js b jt ju jx jy kb mj kf mk kj ml kn mm mn mo mp bi translated"><strong class="js iu"> <em class="nk">应用</em> </strong> <br/>它根据在执行计划中创建的资源依赖关系图，在terraform计划中应用更改。</li></ul><pre class="kp kq kr ks gt nl nm nn no aw np bi"><span id="d2bb" class="mv lf it nm b gy nq nr l ns nt">terraform apply</span></pre><h1 id="560f" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">如何创建一个S3桶使用地形？</h1><p id="0cdf" class="pw-post-body-paragraph jq jr it js b jt mc jv jw jx md jz ka kb me kd ke kf mf kh ki kj mg kl km kn im bi translated">AWS简单存储服务(也称为S3)是一种基于云的服务，可随时帮助存储、备份、归档和检索数据。它是S3，为对象提供99.999999999%的持久性，是一种对象存储服务。我们只支付在S3使用的费用。</p><h1 id="2bf1" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">先决条件</h1><ul class=""><li id="3f35" class="mh mi it js b jt mc jx md kb nh kf ni kj nj kn mm mn mo mp bi translated">安装<a class="ae nu" href="https://learn.hashicorp.com/tutorials/terraform/install-cli" rel="noopener ugc nofollow" target="_blank">地形</a></li><li id="2ea6" class="mh mi it js b jt mq jx mr kb ms kf mt kj mu kn mm mn mo mp bi translated">安装<a class="ae nu" href="https://docs.docker.com/desktop/mac/install/" rel="noopener ugc nofollow" target="_blank"> Docker桌面</a></li><li id="141f" class="mh mi it js b jt mq jx mr kb ms kf mt kj mu kn mm mn mo mp bi translated">安装<a class="ae nu" href="https://docs.aws.amazon.com/cli/latest/userguide/getting-started-install.html" rel="noopener ugc nofollow" target="_blank"> AWS CLI </a></li></ul><h2 id="3ea0" class="mv lf it bd lg mw mx dn lk my mz dp lo kb na nb ls kf nc nd lw kj ne nf ma ng bi translated">步骤#1编写配置文件</h2><p id="5c6f" class="pw-post-body-paragraph jq jr it js b jt mc jv jw jx md jz ka kb me kd ke kf mf kh ki kj mg kl km kn im bi translated">下面的文件创建了一个名为<code class="fe nv nw nx nm b">my-bucket</code>的S3存储桶，并将IAM角色设置为<code class="fe nv nw nx nm b">List Buckets</code>。IAM角色有助于定义S3时段上允许的操作。这是一个非常简单的配置，我们可以添加许多类似<code class="fe nv nw nx nm b">versioning and ACL.</code> <br/> S3 <code class="fe nv nw nx nm b">Standard</code>的功能，因为存储类型将是默认存储。有关使用terraform启用功能的更多信息，请参考<a class="ae nu" href="https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/s3_bucket" rel="noopener ugc nofollow" target="_blank">链接</a>。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="ny nz l"/></div></figure><h2 id="9b19" class="mv lf it bd lg mw mx dn lk my mz dp lo kb na nb ls kf nc nd lw kj ne nf ma ng bi translated">步骤2配置本地堆栈</h2><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/f1e5a357039d3a7ba267dbbcad596c43.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FAty_vSVJ46YwwuQvzZBvw.jpeg"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">作者图片</figcaption></figure><p id="1777" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Localstack是一个云服务模拟器，帮助运行S3、Dynamodb、Kinesis等AWS服务。<br/> Terraform配置通过<code class="fe nv nw nx nm b">provider</code>与本地堆栈交互，通过<code class="fe nv nw nx nm b">access_key and secret_key</code>与端口<code class="fe nv nw nx nm b">4566</code>的端点交互</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="04a2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu"> <em class="nk">选项#1 </em> </strong>使用<code class="fe nv nw nx nm b">docker run</code>执行Localstack。</p><pre class="kp kq kr ks gt nl nm nn no aw np bi"><span id="8105" class="mv lf it nm b gy nq nr l ns nt">$ docker run --rm -it -p 4566:4566 -p 4571:4571 localstack/localstack</span></pre><p id="457b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu"> <em class="nk">选项#2 </em> </strong>使用<code class="fe nv nw nx nm b">docker-compose.yaml</code>执行Localstack。</p><pre class="kp kq kr ks gt nl nm nn no aw np bi"><span id="fda4" class="mv lf it nm b gy nq nr l ns nt">docker-compose up -d</span></pre><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="2c35" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu"> <em class="nk">输出:</em> </strong></p><pre class="kp kq kr ks gt nl nm nn no aw np bi"><span id="0cfe" class="mv lf it nm b gy nq nr l ns nt">Creating localstack_main ... done</span><span id="3f92" class="mv lf it nm b gy oa nr l ns nt">Attaching to localstack_main</span><span id="bb6e" class="mv lf it nm b gy oa nr l ns nt">localstack_main | Waiting for all LocalStack services to be ready</span><span id="b5e4" class="mv lf it nm b gy oa nr l ns nt">localstack_main | 2022-04-04 21:05:58,042 CRIT Supervisor is running as root.  Privileges were not dropped because no user is specified in the config file.  If you intend to run as root, you can set user=root in the config file to avoid this message.</span><span id="87f2" class="mv lf it nm b gy oa nr l ns nt">localstack_main | 2022-04-04 21:05:58,047 INFO supervisord started with pid 14</span><span id="5cdd" class="mv lf it nm b gy oa nr l ns nt">localstack_main | 2022-04-04 21:05:59,057 INFO spawned: 'infra' with pid 20</span><span id="9e2b" class="mv lf it nm b gy oa nr l ns nt">localstack_main | 2022-04-04 21:06:00,060 INFO success: infra entered RUNNING state, process has stayed up for &gt; than 1 seconds (startsecs)</span><span id="e7d7" class="mv lf it nm b gy oa nr l ns nt">localstack_main |</span><span id="6330" class="mv lf it nm b gy oa nr l ns nt">localstack_main | LocalStack version: 0.14.2</span><span id="0b40" class="mv lf it nm b gy oa nr l ns nt">localstack_main | LocalStack Docker container id: 960f3dbe8b0d</span><span id="90c5" class="mv lf it nm b gy oa nr l ns nt">localstack_main | LocalStack build date: 2022-04-02</span><span id="31d0" class="mv lf it nm b gy oa nr l ns nt">localstack_main | LocalStack build git hash: 8f73e14e</span><span id="0d24" class="mv lf it nm b gy oa nr l ns nt">localstack_main |</span><span id="eb84" class="mv lf it nm b gy oa nr l ns nt">localstack_main | Starting edge router (https port 4566)...</span><span id="990b" class="mv lf it nm b gy oa nr l ns nt">localstack_main | Ready.</span><span id="4602" class="mv lf it nm b gy oa nr l ns nt">localstack_main | [2022-04-04 21:06:00 +0000] [20] [INFO] Running on https://0.0.0.0:4566 (CTRL + C to quit)</span><span id="af15" class="mv lf it nm b gy oa nr l ns nt">localstack_main | 2022-04-04T21:06:00.774:INFO:hypercorn.error: Running on https://0.0.0.0:4566 (CTRL + C to quit)</span></pre><h2 id="b555" class="mv lf it bd lg mw mx dn lk my mz dp lo kb na nb ls kf nc nd lw kj ne nf ma ng bi translated">步骤3:执行地形计划</h2><p id="c1ec" class="pw-post-body-paragraph jq jr it js b jt mc jv jw jx md jz ka kb me kd ke kf mf kh ki kj mg kl km kn im bi translated">我们现在需要我们的三个步骤<br/> <strong class="js iu"> <em class="nk"> #1初始化地形</em> </strong></p><pre class="kp kq kr ks gt nl nm nn no aw np bi"><span id="cbab" class="mv lf it nm b gy nq nr l ns nt">terraform init</span></pre><p id="c109" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu"> <em class="nk"> #2执行计划</em> </strong></p><p id="c740" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">正如我们在下面的输出中看到的，两个资源<code class="fe nv nw nx nm b">s3 bucket</code>和<code class="fe nv nw nx nm b">iam role</code>。</p><pre class="kp kq kr ks gt nl nm nn no aw np bi"><span id="91eb" class="mv lf it nm b gy nq nr l ns nt">terraform plan</span><span id="ce6d" class="mv lf it nm b gy oa nr l ns nt">Output:</span><span id="97c8" class="mv lf it nm b gy oa nr l ns nt">Terraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:</span><span id="129d" class="mv lf it nm b gy oa nr l ns nt">+ create</span><span id="66aa" class="mv lf it nm b gy oa nr l ns nt">Terraform will perform the following actions:</span><span id="01a4" class="mv lf it nm b gy oa nr l ns nt"><strong class="nm iu"># aws_iam_role.invocation_role</strong> will be created</span><span id="e014" class="mv lf it nm b gy oa nr l ns nt">+ resource "aws_iam_role" "invocation_role" {</span><span id="3fcf" class="mv lf it nm b gy oa nr l ns nt">+ arn                   = (known after apply)</span><span id="cf93" class="mv lf it nm b gy oa nr l ns nt">+ assume_role_policy    = jsonencode(</span><span id="4e93" class="mv lf it nm b gy oa nr l ns nt">{</span><span id="d54b" class="mv lf it nm b gy oa nr l ns nt">+ Statement = {</span><span id="38e6" class="mv lf it nm b gy oa nr l ns nt">+ Action   = "s3:ListBucket"</span><span id="aa2c" class="mv lf it nm b gy oa nr l ns nt">+ Effect   = "Allow"</span><span id="e243" class="mv lf it nm b gy oa nr l ns nt">+ Resource = "arn:aws:s3:::test-bucket"</span><span id="f912" class="mv lf it nm b gy oa nr l ns nt">}</span><span id="9a72" class="mv lf it nm b gy oa nr l ns nt">+ Version   = "2012-10-17"</span><span id="c118" class="mv lf it nm b gy oa nr l ns nt">}</span><span id="4e17" class="mv lf it nm b gy oa nr l ns nt">)</span><span id="37a8" class="mv lf it nm b gy oa nr l ns nt">+ create_date           = (known after apply)</span><span id="28d7" class="mv lf it nm b gy oa nr l ns nt">+ force_detach_policies = false</span><span id="3af9" class="mv lf it nm b gy oa nr l ns nt">+ id                    = (known after apply)</span><span id="36a2" class="mv lf it nm b gy oa nr l ns nt">+ managed_policy_arns   = (known after apply)</span><span id="d635" class="mv lf it nm b gy oa nr l ns nt">+ max_session_duration  = 3600</span><span id="c117" class="mv lf it nm b gy oa nr l ns nt">+ name                  = "api_gateway_auth_invocation"</span><span id="9ea0" class="mv lf it nm b gy oa nr l ns nt">+ name_prefix           = (known after apply)</span><span id="28f9" class="mv lf it nm b gy oa nr l ns nt">+ path                  = "/"</span><span id="ce24" class="mv lf it nm b gy oa nr l ns nt">+ tags_all              = (known after apply)</span><span id="db30" class="mv lf it nm b gy oa nr l ns nt">+ unique_id             = (known after apply)</span><span id="6485" class="mv lf it nm b gy oa nr l ns nt">+ inline_policy {</span><span id="88fe" class="mv lf it nm b gy oa nr l ns nt">+ name   = (known after apply)</span><span id="1488" class="mv lf it nm b gy oa nr l ns nt">+ policy = (known after apply)</span><span id="fcf8" class="mv lf it nm b gy oa nr l ns nt">}</span><span id="5299" class="mv lf it nm b gy oa nr l ns nt">}</span><span id="5f74" class="mv lf it nm b gy oa nr l ns nt"><strong class="nm iu"># aws_s3_bucket.test-bucket</strong> will be created</span><span id="424c" class="mv lf it nm b gy oa nr l ns nt">+ resource "aws_s3_bucket" "test-bucket" {</span><span id="36a0" class="mv lf it nm b gy oa nr l ns nt">+ acceleration_status                  = (known after apply)</span><span id="c658" class="mv lf it nm b gy oa nr l ns nt">+ acl                                  = (known after apply)</span><span id="f643" class="mv lf it nm b gy oa nr l ns nt">+ arn                                  = (known after apply)</span><span id="0a3c" class="mv lf it nm b gy oa nr l ns nt">+ bucket                               = "my-bucket"</span><span id="4298" class="mv lf it nm b gy oa nr l ns nt">+ bucket_domain_name                   = (known after apply)</span><span id="686d" class="mv lf it nm b gy oa nr l ns nt">+ bucket_regional_domain_name          = (known after apply)</span><span id="61e6" class="mv lf it nm b gy oa nr l ns nt">+ cors_rule                            = (known after apply)</span><span id="2976" class="mv lf it nm b gy oa nr l ns nt">+ force_destroy                        = false</span><span id="e8e0" class="mv lf it nm b gy oa nr l ns nt">+ grant                                = (known after apply)</span><span id="ec0b" class="mv lf it nm b gy oa nr l ns nt">+ hosted_zone_id                       = (known after apply)</span><span id="21a0" class="mv lf it nm b gy oa nr l ns nt">+ id                                   = (known after apply)</span><span id="081d" class="mv lf it nm b gy oa nr l ns nt">+ lifecycle_rule                       = (known after apply)</span><span id="ec60" class="mv lf it nm b gy oa nr l ns nt">+ logging                              = (known after apply)</span><span id="d9ed" class="mv lf it nm b gy oa nr l ns nt">+ object_lock_enabled                  = (known after apply)</span><span id="59bb" class="mv lf it nm b gy oa nr l ns nt">+ policy                               = (known after apply)</span><span id="a154" class="mv lf it nm b gy oa nr l ns nt">+ region                               = (known after apply)</span><span id="47d2" class="mv lf it nm b gy oa nr l ns nt">+ replication_configuration            = (known after apply)</span><span id="a65a" class="mv lf it nm b gy oa nr l ns nt">+ request_payer                        = (known after apply)</span><span id="ce1c" class="mv lf it nm b gy oa nr l ns nt">+ server_side_encryption_configuration = (known after apply)</span><span id="9cf8" class="mv lf it nm b gy oa nr l ns nt">+ tags_all                             = (known after apply)</span><span id="2ecf" class="mv lf it nm b gy oa nr l ns nt">+ versioning                           = (known after apply)</span><span id="4abb" class="mv lf it nm b gy oa nr l ns nt">+ website                              = (known after apply)</span><span id="1f43" class="mv lf it nm b gy oa nr l ns nt">+ website_domain                       = (known after apply)</span><span id="e389" class="mv lf it nm b gy oa nr l ns nt">+ website_endpoint                     = (known after apply)</span><span id="31fd" class="mv lf it nm b gy oa nr l ns nt">+ object_lock_configuration {</span><span id="a40a" class="mv lf it nm b gy oa nr l ns nt">+ object_lock_enabled = (known after apply)</span><span id="e409" class="mv lf it nm b gy oa nr l ns nt">+ rule                = (known after apply)</span><span id="5663" class="mv lf it nm b gy oa nr l ns nt">}</span><span id="fe0a" class="mv lf it nm b gy oa nr l ns nt">}</span><span id="d084" class="mv lf it nm b gy oa nr l ns nt"><strong class="nm iu">Plan:</strong> 2 to add, 0 to change, 0 to destroy.</span><span id="345f" class="mv lf it nm b gy oa nr l ns nt">╷</span><span id="4880" class="mv lf it nm b gy oa nr l ns nt">│ <strong class="nm iu">Warning: Argument is deprecated</strong></span><span id="47c3" class="mv lf it nm b gy oa nr l ns nt">│</span><span id="1c2c" class="mv lf it nm b gy oa nr l ns nt">│   with provider["registry.terraform.io/hashicorp/aws"],</span><span id="83d2" class="mv lf it nm b gy oa nr l ns nt">│   on main.tf line 5, in provider "aws":</span><span id="7148" class="mv lf it nm b gy oa nr l ns nt">│    5:   s3_force_path_style         = true</span><span id="9374" class="mv lf it nm b gy oa nr l ns nt">│</span><span id="c278" class="mv lf it nm b gy oa nr l ns nt">│ Use s3_use_path_style instead.</span><span id="ad9f" class="mv lf it nm b gy oa nr l ns nt">│</span><span id="4ce7" class="mv lf it nm b gy oa nr l ns nt">│ (and one more similar warning elsewhere)</span></pre><p id="c721" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu"> <em class="nk"> #3应用修改</em> </strong></p><pre class="kp kq kr ks gt nl nm nn no aw np bi"><span id="319c" class="mv lf it nm b gy nq nr l ns nt">terraform apply</span><span id="f6a5" class="mv lf it nm b gy oa nr l ns nt">Output:</span><span id="3f82" class="mv lf it nm b gy oa nr l ns nt">.....<br/><strong class="nm iu">Do you want to perform these actions?</strong></span><span id="6ebf" class="mv lf it nm b gy oa nr l ns nt">Terraform will perform the actions described above.</span><span id="7919" class="mv lf it nm b gy oa nr l ns nt">Only 'yes' will be accepted to approve.</span><span id="5869" class="mv lf it nm b gy oa nr l ns nt"><strong class="nm iu">Enter a value:</strong> yes</span><span id="f36f" class="mv lf it nm b gy oa nr l ns nt"><strong class="nm iu">aws_iam_role.invocation_role: Creating...</strong></span><span id="7dda" class="mv lf it nm b gy oa nr l ns nt"><strong class="nm iu">aws_s3_bucket.test-bucket: Creating...</strong></span><span id="9f54" class="mv lf it nm b gy oa nr l ns nt"><strong class="nm iu">aws_s3_bucket.test-bucket: Creation complete after 0s [id=my-bucket]</strong></span><span id="a23e" class="mv lf it nm b gy oa nr l ns nt"><strong class="nm iu">aws_iam_role.invocation_role: Creation complete after 1s [id=api_gateway_auth_invocation]</strong></span></pre><h2 id="5284" class="mv lf it bd lg mw mx dn lk my mz dp lo kb na nb ls kf nc nd lw kj ne nf ma ng bi translated">步骤4 S3铲斗操作</h2><p id="c2f6" class="pw-post-body-paragraph jq jr it js b jt mc jv jw jx md jz ka kb me kd ke kf mf kh ki kj mg kl km kn im bi translated">注意:我使用<code class="fe nv nw nx nm b">aws-cli</code>运行命令，也可以使用<code class="fe nv nw nx nm b"><a class="ae nu" href="https://github.com/localstack/localstack" rel="noopener ugc nofollow" target="_blank">pip</a></code>安装Localstack。</p><p id="b9be" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu"> <em class="nk"> #1列表桶</em> </strong></p><pre class="kp kq kr ks gt nl nm nn no aw np bi"><span id="fbaf" class="mv lf it nm b gy nq nr l ns nt">aws --endpoint-url=http://localhost:4566 s3 ls<br/>Output</span><span id="6dad" class="mv lf it nm b gy oa nr l ns nt">2022-04-04 23:31:10 my-bucket</span></pre><p id="37ae" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu"> <em class="nk"> #2创建一个简单的文本文件如下图</em> </strong></p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="b954" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu"> <em class="nk"> #3执行</em> </strong> <code class="fe nv nw nx nm b"><strong class="js iu"><em class="nk">s3 cp</em></strong></code> <strong class="js iu"> <em class="nk">命令</em> </strong></p><pre class="kp kq kr ks gt nl nm nn no aw np bi"><span id="3d82" class="mv lf it nm b gy nq nr l ns nt">aws --endpoint-url=http://localhost:4566 s3 cp test.txt s3://my-bucket</span><span id="f3a6" class="mv lf it nm b gy oa nr l ns nt"><strong class="nm iu">Output</strong><br/>upload: ./test.txt to s3://my-bucket/test.txt</span></pre><p id="a03d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu"> <em class="nk"> #4检查铲斗的内容</em> </strong></p><pre class="kp kq kr ks gt nl nm nn no aw np bi"><span id="bf7d" class="mv lf it nm b gy nq nr l ns nt">aws --endpoint-url=http://localhost:4566 s3 ls s3://my-bucket</span><span id="2919" class="mv lf it nm b gy oa nr l ns nt">2022-04-05 00:13:34         22 test.txt</span></pre><p id="d16f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">请参考我的<a class="ae nu" href="https://github.com/pgolani28/terraform_localstack_demo" rel="noopener ugc nofollow" target="_blank"> Github repo </a>获取代码，也请参考我的博客来创建你自己的公共库</p><div class="ob oc gp gr od oe"><a href="https://faun.pub/how-to-create-your-first-git-hub-repo-mac-f3df63398c94" rel="noopener  ugc nofollow" target="_blank"><div class="of ab fo"><div class="og ab oh cl cj oi"><h2 class="bd iu gy z fp oj fr fs ok fu fw is bi translated">如何创建你的第一个Git Hub Repo — Mac</h2><div class="ol l"><h3 class="bd b gy z fp oj fr fs ok fu fw dk translated">通往Git Hub仓库的5个简单步骤</h3></div><div class="om l"><p class="bd b dl z fp oj fr fs ok fu fw dk translated">faun.pub</p></div></div><div class="on l"><div class="oo l op oq or on os ky oe"/></div></div></a></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/2ba41c1fa77a6caa81aefed7c222c197.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SV0rorin_ft9SnWTFYxd5A.jpeg"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">作者图片</figcaption></figure><h1 id="8722" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated"><strong class="ak"> <em class="ot">结论</em> </strong></h1><p id="c550" class="pw-post-body-paragraph jq jr it js b jt mc jv jw jx md jz ka kb me kd ke kf mf kh ki kj mg kl km kn im bi translated">希望这篇文章对AWS服务入门有用。</p><p id="2200" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu"> <em class="nk">走之前</em></strong>……<em class="nk">如果你喜欢我的故事，想支持我的写作，</em> <a class="ae nu" href="https://medium.com/@prernagolani21/membership" rel="noopener"> <em class="nk">就在这里</em> </a> <em class="nk">成为一个中等会员。一个月5美元，你就可以获得无限的故事，我会赚一点佣金，不需要你额外付费。谢谢你看我的故事，支持我对写作的热爱。</em></p><p id="3518" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">请关注我/ <a class="ae nu" href="https://medium.com/subscribe/@prernagolani21" rel="noopener">订阅电子邮件</a>，这样我的下一篇文章一出来，你就会知道。</p><h1 id="8d3e" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">参考</h1><p id="cabb" class="pw-post-body-paragraph jq jr it js b jt mc jv jw jx md jz ka kb me kd ke kf mf kh ki kj mg kl km kn im bi translated">【https://registry . terraform . io/providers/hashi corp/AWS/latest/docs/resources/S3 _ bucket<br/>T5】https://docs.localstack.cloud/integrations/terraform/<br/><a class="ae nu" href="https://github.com/localstack/localstack" rel="noopener ugc nofollow" target="_blank">https://github.com/localstack/localstack</a></p></div></div>    
</body>
</html>