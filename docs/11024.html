<html>
<head>
<title>How to take backup of a database through SSH tunneling</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何通过SSH隧道备份数据库</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-take-backup-of-a-database-through-ssh-tunneling-451a6cccecda?source=collection_archive---------21-----------------------#2022-02-07">https://levelup.gitconnected.com/how-to-take-backup-of-a-database-through-ssh-tunneling-451a6cccecda?source=collection_archive---------21-----------------------#2022-02-07</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="35ef" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如何通过ssh隧道进行数据库备份的分步指南</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/30a61e4c190ee7a46f46cf58f7975943.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XnMFV4pho6Cnw8UJYY1Kfw.png"/></div></div></figure><p id="57f9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">有些情况下，我们必须备份只能通过ssh访问的数据库，如果您不知道步骤，这可能是一个挑战。一个这样的例子是只能通过跳转框访问的数据库(想想只能通过ec2实例访问的VPC中的AWS RDS，其中这个ec2实例的端口22对世界开放)</p><blockquote class="la lb lc"><p id="3842" class="jq jr ld js b jt ju jv jw jx jy jz ka le kc kd ke lf kg kh ki lg kk kl km kn im bi translated">对于本教程，我的示例设置是这样的-</p></blockquote><ol class=""><li id="5e0d" class="lh li it js b jt ju jx jy kb lj kf lk kj ll kn lm ln lo lp bi translated">数据库是AWS的RDS(关系数据库系统)Aurora，位于VPC(虚拟私有云)内</li></ol><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi lq"><img src="../Images/b5ff842e710c7612e6bfa37e143059be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CbwEUd4mnF1J7Cc8FFY4Dg.png"/></div></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk translated">VPC内的典型AWS RDS设置</figcaption></figure><blockquote class="la lb lc"><p id="9871" class="jq jr ld js b jt ju jv jw jx jy jz ka le kc kd ke lf kg kh ki lg kk kl km kn im bi translated">步骤1:打开一个终端，通过ec2实例(或者您拥有的任何其他服务器)连接到您的数据库实例</p></blockquote><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="lv lw l"/></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk translated">通过服务器连接到数据库</figcaption></figure><p id="4959" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在上面的命令中，我们使用密钥文件和用户名通过端口22(默认)连接到服务器，一旦完成，我们就连接到数据库服务器。在上面的例子中，我通过本地机器的端口9001 连接到端口5432上的Postgres数据库。您可以使它适应您的数据库的端口(对于MySQL等是3306……)和本地机器上任何其他可用的端口。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi lx"><img src="../Images/e1a5c4c3c383e427ff51ba281ba7e672.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zBS-7353xbBn-EHY8GsKWA.png"/></div></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk translated">建立了从堡垒服务器到数据库服务器的连接</figcaption></figure><blockquote class="la lb lc"><p id="e3bd" class="jq jr ld js b jt ju jv jw jx jy jz ka le kc kd ke lf kg kh ki lg kk kl km kn im bi translated">步骤2:在同一终端上打开一个新的选项卡，并通过端口9001运行db backup命令</p></blockquote><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="f5bf" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在，您在连接的数据库服务器上运行命令(不仅仅是备份，您可以对数据库用户做任何允许的事情)。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ly"><img src="../Images/52be5e28706943962b2ba6bd2c5886a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l2NtrpJmsqA64l5sWoAdJA.png"/></div></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk translated">对连接的数据库运行备份命令</figcaption></figure><p id="0351" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">完成后，您将在本地计算机上拥有一个备份文件🙌 🎆 🎉</p></div><div class="ab cl lz ma hx mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="im in io ip iq"><p id="e5da" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">感谢您的阅读，如果您想支持我，请关注我，成为会员，支持更广泛的社区。</p><div class="mg mh gp gr mi mj"><a href="https://medium.com/@metacollective/membership" rel="noopener follow" target="_blank"><div class="mk ab fo"><div class="ml ab mm cl cj mn"><h2 class="bd iu gy z fp mo fr fs mp fu fw is bi translated">通过我的推荐链接加入媒体Meta Collective</h2><div class="mq l"><h3 class="bd b gy z fp mo fr fs mp fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="mr l"><p class="bd b dl z fp mo fr fs mp fu fw dk translated">medium.com</p></div></div><div class="ms l"><div class="mt l mu mv mw ms mx ky mj"/></div></div></a></div></div></div>    
</body>
</html>