<html>
<head>
<title>Handling number values in HTML inputs</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">处理HTML输入中的数值</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/handling-number-values-in-html-inputs-3a43cb6e6c44?source=collection_archive---------9-----------------------#2021-11-07">https://levelup.gitconnected.com/handling-number-values-in-html-inputs-3a43cb6e6c44?source=collection_archive---------9-----------------------#2021-11-07</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="c6cc" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">阅读文档并保存代码行</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/e96f5467e7a80c75c3093196a47d3e81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*oLkFtzwecbfEtpXc"/></div></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">由<a class="ae kz" href="https://unsplash.com/@queirozmm?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">马修·奎罗斯</a>在<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="8fa3" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">当建立一个网站时，你会遇到建立一个表单的必要性。你知道这样的事情:</p><pre class="kk kl km kn gu lw lx ly lz aw ma bi"><span id="b80f" class="mb mc iu lx b gz md me l mf mg">&lt;form&gt;<br/>  &lt;input type='text' placeholder='Enter your name'/&gt;<br/>&lt;/form&gt;</span></pre><p id="bfe7" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">要访问表单内部输入的值，通常要根据每次更改时触发的事件来访问它的值:</p><pre class="kk kl km kn gu lw lx ly lz aw ma bi"><span id="bcfe" class="mb mc iu lx b gz md me l mf mg">const input = document.querySelector('input')<br/>input.addEventListener(event =&gt; console.log(event.target.value))</span></pre><p id="2be9" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">很简单，对吗？</p><p id="28d7" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">当输入代表一个数字时，“问题”就出现了。您通常会这样声明输入:</p><pre class="kk kl km kn gu lw lx ly lz aw ma bi"><span id="a26b" class="mb mc iu lx b gz md me l mf mg">&lt;input type='number' placeholder='Enter your age' /&gt;</span></pre><p id="da10" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">使用上面的事件监听器仍然很容易访问该值。</p><p id="fb2d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">您使用API将该值发送到DB，DB抱怨它期望一个数字，但是您发送了一个字符串。<strong class="lc iv">对，一串！</strong></p><p id="1dfa" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">您感到困惑，并开始记录您的值的类型，如下所示:</p><pre class="kk kl km kn gu lw lx ly lz aw ma bi"><span id="decd" class="mb mc iu lx b gz md me l mf mg">input.addEventListener(event =&gt; {<br/>  const value = event.target.value<br/>  console.log(typeof(value))<br/>})</span></pre><p id="eb11" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">而且惊喜惊喜它打印出<strong class="lc iv">字符串</strong>。您现在检查HTML输入的<a class="ae kz" href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLInputElement" rel="noopener ugc nofollow" target="_blank">文档，并意识到输入事件的值将始终是一个字符串。</a></p><p id="6ad4" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">所以你很想做这样的事情:</p><pre class="kk kl km kn gu lw lx ly lz aw ma bi"><span id="9104" class="mb mc iu lx b gz md me l mf mg">input.addEventListener(event =&gt; {<br/>  const value = event.target.value<br/>  const valueAsNumber = parseInt(value) // or parseFloat<br/>  console.log(typeof(value))<br/>})</span></pre><p id="b29d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">现在你的值是一个数字，你的DB很高兴。</p><p id="d044" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">事情是这样的，没有必要使用<code class="fe mh mi mj lx b">parseInt/parseFloat</code>来获取数值。向下滚动HTML输入的<a class="ae kz" href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLInputElement" rel="noopener ugc nofollow" target="_blank">文档，您会看到一个名为<code class="fe mh mi mj lx b">valueAsNumber</code>的属性，它将尝试按顺序返回值:时间值、数字或NaN。</a></p><p id="087d" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">因此，您的代码现在看起来像这样:</p><pre class="kk kl km kn gu lw lx ly lz aw ma bi"><span id="541a" class="mb mc iu lx b gz md me l mf mg">input.addEventListener(event =&gt; {<br/>  const value = event.target.valueAsNumber<br/>  console.log(typeof(value))<br/>})</span></pre><p id="2caf" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这可能看起来是一个很小的变化，也许没有必要，但是你需要写的代码越少，你的代码库中的维护或错误就越少。</p><div class="mk ml gq gs mm mn"><a href="https://blog.jagonzalr.com/membership" rel="noopener  ugc nofollow" target="_blank"><div class="mo ab fp"><div class="mp ab mq cl cj mr"><h2 class="bd iv gz z fq ms fs ft mt fv fx it bi translated">加入我的介绍链接媒体-何塞安东尼奥冈萨雷斯罗德里格斯</h2><div class="mu l"><h3 class="bd b gz z fq ms fs ft mt fv fx dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="mv l"><p class="bd b dl z fq ms fs ft mt fv fx dk translated">blog.jagonzalr.com</p></div></div><div class="mw l"><div class="mx l my mz na mw nb kt mn"/></div></div></a></div></div></div>    
</body>
</html>