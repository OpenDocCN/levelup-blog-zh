<html>
<head>
<title>Use JavaScript to Make Your Browser Speak</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用JavaScript让你的浏览器说话</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/use-javascript-to-make-your-browser-speak-cf29483efeb7?source=collection_archive---------21-----------------------#2020-05-04">https://levelup.gitconnected.com/use-javascript-to-make-your-browser-speak-cf29483efeb7?source=collection_archive---------21-----------------------#2020-05-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="53e9" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">让我们来看看大多数浏览器都有的内置API，让它们说话！</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/a15eea352f0fe8c1450fe4288153989c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*HfnlQTKcHEd8cu4H"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">Ashim D'Silva 在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="7745" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最近在开发一个个人项目时，我有了尝试让我的浏览器说出一个句子的想法。不知道如何着手做这件事，我开始上网。我在MDN网络文档上找到了我的答案。让我们看看如何使用普通的JavaScript将一些东西组合在一起，让我们的浏览器说话！</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="ebfb" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">最简单的例子</h1><p id="005a" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">让我们创建一个基本的函数，它可以接受我们想要说出的一个句子或一个单词，然后让我们的浏览器实际说出这个单词。我们将使用所有现代浏览器上都有的本地API。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">创建使用语音合成API的函数的基本说明</figcaption></figure><p id="17be" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">信不信由你，以上就是让大多数网络浏览器说出一个句子所需要的全部内容！让我们讨论一下这里发生了什么。</p><p id="07e8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们正在创建一个<code class="fe mw mx my mz b">speak()</code>函数，它将我们的句子作为参数。我们创建了一个<code class="fe mw mx my mz b">utterance</code>对象，它本质上是一个语音请求对象，包含了必须说什么以及如何说的所有相关数据。这个对象被传递给<code class="fe mw mx my mz b">speechSynthesis</code>对象上的<code class="fe mw mx my mz b">speak()</code>函数，它将产生声音！</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="2614" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">自定义速率和音高</h1><p id="99a0" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">让我们举一个稍微复杂一点的例子，试着改变单词的语速和音高——因为出于某种原因，这是我们需要的。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="7b94" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在上面的例子中，我们通过在参数签名中添加<code class="fe mw mx my mz b">pitch</code>和<code class="fe mw mx my mz b">rate</code>参数构建了前面的代码片段。在我们创建了我们的<code class="fe mw mx my mz b">utterance</code>对象之后，我们可以直接在对象上设置这些属性。不幸的是，目前还没有通过构造函数或setter方法设置这些属性的方法。</p><p id="dbe2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe mw mx my mz b">pitch</code>是一个介于0和2之间的浮点值——尽管这可能会受到所使用的引擎或语音的限制。音高默认为1。</p><p id="852d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe mw mx my mz b">rate</code>是一个介于0.1和10之间的浮点值，默认为1。</p><p id="a36f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们的浏览器现在应该以正常的速度和音调说出下面的句子，如果我们用一个简单的句子调用上面的片段，比如下面的</p><pre class="kg kh ki kj gt nc mz nd ne aw nf bi"><span id="bef6" class="ng ma iq mz b gy nh ni l nj nk">speak('Hello there - General Kenobe', 1, 1)</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nl"><img src="../Images/79632a974e4efcc1befb15c44970be2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*h8czgb_czGae_LRm"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">由<a class="ae kv" href="https://unsplash.com/@mikeanywhere?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">迈克·刘易斯HeadSmart媒体</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><h1 id="56ae" class="lz ma iq bd mb mc nm me mf mg nn mi mj jw no jx ml jz np ka mn kc nq kd mp mq bi translated">音量呢？</h1><p id="3f36" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">我们也可以像调节音高和节奏一样调节音量。让我们快速看一下这个实现—</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="d513" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">修改前面的片段，我们现在传递我们想要用于演讲的音量。音量是一个介于0和1之间的浮点值，如果没有指定值，默认为0.5。</p><p id="0c32" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">不幸的是，目前还没有办法通过构造函数或任何setter方法来设置卷。</p><p id="25ad" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当我们现在用一个简单的句子和0到1之间的音量调用我们的<code class="fe mw mx my mz b">speak()</code>函数时，我们将听到我们的结果！</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="2adb" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">需要注意的功能</h1><p id="a172" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">在<code class="fe mw mx my mz b">speechSynthesis</code>对象上有一些函数可以派上用场。我们能够暂停、恢复甚至取消这个过程。让我们快速看一下—</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="43aa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">上面的片段将开始说我们的句子，然后演讲将暂停，恢复，最后取消。您可以通过实例化话语并调用<code class="fe mw mx my mz b">speak()</code>，然后在浏览器的开发工具中暂停、恢复和取消话语，来自己测试一下。</p><p id="8a0a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们还可以通过直接检查<code class="fe mw mx my mz b">speechSynthesis</code>对象的<code class="fe mw mx my mz b">paused</code>属性来检查演讲是否被暂停。这将返回一个布尔值，表明讲话是否已经暂停。</p><pre class="kg kh ki kj gt nc mz nd ne aw nf bi"><span id="b67e" class="ng ma iq mz b gy nh ni l nj nk">window.speechSynthesis.paused // Boolean</span></pre><p id="5e21" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果有一大堆句子需要说呢？还有一个检查来确定是否有任何未决的话语等待被说出。这也将返回一个布尔值，指示是否有未决的话语。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="fb4a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">上面的代码片段实际上将这两个话语排队，并按顺序播放它们。当访问<code class="fe mw mx my mz b">pending</code>属性时，返回的值将是<code class="fe mw mx my mz b">true</code>,因为还有第二个话语等待开始。</p><p id="8794" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">注意——如果你只有一句话，那么pending的值将保持为<code class="fe mw mx my mz b">false</code>,因为没有其他东西排队等待播放。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="791b" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">听事件</h1><p id="d148" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">使用这个API时，我们可以监听一些有用的事件。让我们看一看——</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="e1c3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">上面的代码片段展示了一些在<code class="fe mw mx my mz b">utterance</code>对象上可用的有用事件。</p><p id="550a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了确定<code class="fe mw mx my mz b">speechSynthesis</code>对象的变化，需要检查属性，就像我们在前面的段落中所做的那样。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/c6136e7370b10c76f5952caf1778b213.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qMPxw5gBmS2Annch"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">泰勒·利奥波德在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><h1 id="25ea" class="lz ma iq bd mb mc nm me mf mg nn mi mj jw no jx ml jz np ka mn kc nq kd mp mq bi translated">最后一个结论！</h1><p id="dae2" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">这应该给你足够的信息，开始在你的浏览器中玩语音游戏。您现在可以开始、停止和暂停讲话，以及调整讲话的速度、音调和音量。</p><p id="b7d0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">感谢您的阅读。我希望你喜欢这篇文章，并学到了一些东西。如果你碰巧有任何反馈、批评或贡献，请随意写在下面的评论区。</p><p id="4148" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">再见了。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="8bb8" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">参考</h1><p id="f802" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">如果您希望了解更多或者开始在自己的项目中实现语音合成，这里有一些可能会引起您兴趣的参考资料！</p><p id="89b9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/API/SpeechSynthesisUtterance" rel="noopener ugc nofollow" target="_blank"> MDN语音合成</a> <br/> <a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/API/SpeechSynthesis" rel="noopener ugc nofollow" target="_blank"> MDN语音合成</a></p></div></div>    
</body>
</html>