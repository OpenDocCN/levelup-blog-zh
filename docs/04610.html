<html>
<head>
<title>How to Sync Medium with WeChat</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何与微信同步媒体</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-sync-medium-with-wechat-315f43391515?source=collection_archive---------24-----------------------#2020-07-05">https://levelup.gitconnected.com/how-to-sync-medium-with-wechat-315f43391515?source=collection_archive---------24-----------------------#2020-07-05</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="7950" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">一次编写，随处发布</h2></div><p id="cc19" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在过去的两个月里，Charlene每天都在Medium上写作。因为她用普通话写作，她的主要读者是美国和台湾说普通话的人。我们知道高质量的内容将使<strong class="kk iu">100多倍的Mainland China人</strong>受益，所以我们开始研究中国的媒体市场。</p><h2 id="a453" class="lf lg it bd lh li lj dn lk ll lm dp ln kr lo lp lq kv lr ls lt kz lu lv lw lx bi translated">用户亮点</h2><ol class=""><li id="7929" class="ly lz it kk b kl ma ko mb kr mc kv md kz me ld mf mg mh mi bi translated"><strong class="kk iu">媒体被防火长城拦截</strong>。</li><li id="a6b0" class="ly lz it kk b kl mj ko mk kr ml kv mm kz mn ld mf mg mh mi bi translated"><strong class="kk iu">微信占&gt;中国用户花费</strong>时间的80%。</li><li id="a7ce" class="ly lz it kk b kl mj ko mk kr ml kv mm kz mn ld mf mg mh mi bi translated">由于学校教授简体字，大多数大陆用户无法轻松阅读繁体字。</li></ol><p id="9660" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">有了这些用户洞察，我们决定将夏琳的中帖翻译成微信中的<strong class="kk iu">简体汉字</strong>和<strong class="kk iu">帖子。</strong></p><p id="f367" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这个项目给了我一个完美的机会来展示我的编程能力。</p><h2 id="b762" class="lf lg it bd lh li lj dn lk ll lm dp ln kr lo lp lq kv lr ls lt kz lu lv lw lx bi translated">在本帖中，我将带您浏览以下主题:</h2><ol class=""><li id="8149" class="ly lz it kk b kl ma ko mb kr mc kv md kz me ld mf mg mh mi bi translated">用<strong class="kk iu"> Python </strong> <a class="ae le" href="https://requests.readthedocs.io/en/master/" rel="noopener ugc nofollow" target="_blank"> <strong class="kk iu">请求</strong> </a>抓取介质</li><li id="fbbe" class="ly lz it kk b kl mj ko mk kr ml kv mm kz mn ld mf mg mh mi bi translated">解析<strong class="kk iu">媒体的JSON数据</strong></li><li id="477f" class="ly lz it kk b kl mj ko mk kr ml kv mm kz mn ld mf mg mh mi bi translated">用<a class="ae le" href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/" rel="noopener ugc nofollow" target="_blank"><strong class="kk iu">beautiful soup</strong></a>处理HTML</li><li id="ad1c" class="ly lz it kk b kl mj ko mk kr ml kv mm kz mn ld mf mg mh mi bi translated">用<a class="ae le" href="https://pypi.org/project/zhconv/" rel="noopener ugc nofollow" target="_blank"> <strong class="kk iu"> zhconv </strong> </a>将繁体转换成简体</li><li id="cbeb" class="ly lz it kk b kl mj ko mk kr ml kv mm kz mn ld mf mg mh mi bi translated">用<a class="ae le" href="https://developers.weixin.qq.com/doc/offiaccount/en/Asset_Management/Adding_Permanent_Assets.html" rel="noopener ugc nofollow" target="_blank"> <strong class="kk iu">微信API </strong> </a>上传图片和帖子</li><li id="c18d" class="ly lz it kk b kl mj ko mk kr ml kv mm kz mn ld mf mg mh mi bi translated"><a class="ae le" href="https://github.com/ChrisXLiu/medium-to-wechat" rel="noopener ugc nofollow" target="_blank">T35】我的GithubT37】最终代码</a></li></ol></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h2 id="0f3c" class="lf lg it bd lh li lj dn lk ll lm dp ln kr lo lp lq kv lr ls lt kz lu lv lw lx bi translated">中等API支持</h2><p id="987c" class="pw-post-body-paragraph ki kj it kk b kl ma ju kn ko mb jx kq kr mv kt ku kv mw kx ky kz mx lb lc ld im bi translated"><em class="my">挑战</em></p><ul class=""><li id="d815" class="ly lz it kk b kl km ko kp kr mz kv na kz nb ld nc mg mh mi bi translated">介质API是只写的。没有<strong class="kk iu">API</strong>获取帖子。</li><li id="4162" class="ly lz it kk b kl mj ko mk kr ml kv mm kz mn ld nc mg mh mi bi translated">Medium的RSS feed不提供<strong class="kk iu">文章级内容</strong>。</li><li id="b491" class="ly lz it kk b kl mj ko mk kr ml kv mm kz mn ld nc mg mh mi bi translated">Medium的<strong class="kk iu">付费墙</strong>阻止爬行。</li></ul><p id="069c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="my">解决方案</em></p><p id="e21c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们最好的办法是<strong class="kk iu">抓取带有中等好友链接的帖子</strong>。我检查了一个示例媒体帖子的源代码。令我惊讶的是，媒体1)页面是由客户端<strong class="kk iu">呈现的2)内容是以JSON格式</strong>高度结构化的。</p><h2 id="1722" class="lf lg it bd lh li lj dn lk ll lm dp ln kr lo lp lq kv lr ls lt kz lu lv lw lx bi translated">微信API支持</h2><p id="f5aa" class="pw-post-body-paragraph ki kj it kk b kl ma ju kn ko mb jx kq kr mv kt ku kv mw kx ky kz mx lb lc ld im bi translated">微信API同时支持写和取。</p><p id="18eb" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我使用它的编辑工具创建了一个测试帖子，发现API以HTML片段的形式返回文章内容。这种混乱的HTML结构似乎很难解析。</p><h2 id="3de0" class="lf lg it bd lh li lj dn lk ll lm dp ln kr lo lp lq kv lr ls lt kz lu lv lw lx bi translated">系统图</h2><figure class="ne nf ng nh gt ni gh gi paragraph-image"><div role="button" tabindex="0" class="nj nk di nl bf nm"><div class="gh gi nd"><img src="../Images/79a177ec16cb45a024bfe0b8df46b21f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*YLAo6_HIO9FJTY7V.png"/></div></div></figure><h2 id="f4be" class="lf lg it bd lh li lj dn lk ll lm dp ln kr lo lp lq kv lr ls lt kz lu lv lw lx bi translated">微信设置</h2><p id="010a" class="pw-post-body-paragraph ki kj it kk b kl ma ju kn ko mb jx kq kr mv kt ku kv mw kx ky kz mx lb lc ld im bi translated"><strong class="kk iu">第一步:</strong>在<a class="ae le" href="http://mp.weixin.qq.com/" rel="noopener ugc nofollow" target="_blank">http://mp.weixin.qq.com/</a>注册一个<strong class="kk iu">订阅账户</strong>。</p><p id="3368" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">步骤2: </strong>转到开发/基本配置页面:</p><figure class="ne nf ng nh gt ni gh gi paragraph-image"><div class="gh gi np"><img src="../Images/98f9f926a4408c964071b14f345e3e44.png" data-original-src="https://miro.medium.com/v2/resize:fit:676/format:webp/0*2NGz5VdrqVbutPXs.png"/></div></figure><p id="8d7a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">第三步:</strong>用AppSecret检索开发者ID和开发者密码。将你的IP加入白名单:<a class="ae le" href="https://www.google.com/search?q=what%27s+my+ip" rel="noopener ugc nofollow" target="_blank">在这里找到你的公共IP</a>。</p><figure class="ne nf ng nh gt ni gh gi paragraph-image"><div role="button" tabindex="0" class="nj nk di nl bf nm"><div class="gh gi nq"><img src="../Images/8242df4a5738c80e26be2d8525ecdaed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*kJ49JFwgYClMzDeO.png"/></div></div></figure><h2 id="bcb1" class="lf lg it bd lh li lj dn lk ll lm dp ln kr lo lp lq kv lr ls lt kz lu lv lw lx bi translated">中等帖子搜索</h2><p id="e83a" class="pw-post-body-paragraph ki kj it kk b kl ma ju kn ko mb jx kq kr mv kt ku kv mw kx ky kz mx lb lc ld im bi translated">从媒体获取朋友链接:</p><figure class="ne nf ng nh gt ni gh gi paragraph-image"><div role="button" tabindex="0" class="nj nk di nl bf nm"><div class="gh gi nr"><img src="../Images/00129553f7da19668fe7284bf4a22766.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*uJ3EzunTciHE44ry.png"/></div></div></figure><pre class="ne nf ng nh gt ns nt nu nv aw nw bi"><span id="1cd2" class="lf lg it nt b gy nx ny l nz oa">import requests<br/>from bs4 import BeautifulSoup<br/>import redef crawl_medium(url):<br/>    page = requests.get(url)<br/>    soup = BeautifulSoup(page.text, 'html.parser')</span><span id="0e83" class="lf lg it nt b gy ob ny l nz oa">    # Format assumed:<br/>    # &lt;script&gt;window.__APOLLO_STATE__ = {...JSON...}&lt;/script&gt;<br/>    script_tag = soup.find('script',\<br/>        string=re.compile('__APOLLO_STATE__'))<br/>    <br/>    json_data = script_tag.string.split('__APOLLO_STATE__ = ')\<br/>        [1].split('&lt;/script&gt;')[0]    return parse(json.loads(json_data))</span></pre><h2 id="cb5b" class="lf lg it bd lh li lj dn lk ll lm dp ln kr lo lp lq kv lr ls lt kz lu lv lw lx bi translated">中型JSON数据解析</h2><p id="b7cd" class="pw-post-body-paragraph ki kj it kk b kl ma ju kn ko mb jx kq kr mv kt ku kv mw kx ky kz mx lb lc ld im bi translated">我从Medium创建了一个简化的JSON模式:</p><figure class="ne nf ng nh gt ni gh gi paragraph-image"><div role="button" tabindex="0" class="nj nk di nl bf nm"><div class="gh gi oc"><img src="../Images/298075bb3ade6d409ceaf39fc6bfc322.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*2BMIxx5IiEyBMvOF.png"/></div></div></figure><pre class="ne nf ng nh gt ns nt nu nv aw nw bi"><span id="bdfb" class="lf lg it nt b gy nx ny l nz oa">IMG_BASE_URL = 'https://miro.medium.com/max/1200/'<br/></span><span id="1b49" class="lf lg it nt b gy ob ny l nz oa">def parse(data):<br/>    <em class="my">"""<br/>        Parses the raw JSON data from Medium post pages to our own format.</em></span><span id="29ce" class="lf lg it nt b gy ob ny l nz oa"><em class="my">        Parameters:<br/>        data (dict): JSON data for a Medium post</em></span><span id="3346" class="lf lg it nt b gy ob ny l nz oa"><em class="my">        Returns:<br/>        dict<br/>    """<br/>    </em>paragraph_list = []<br/>    markup_dict = {}<br/>    for k, p in data.items():<br/>        if p.get('__typename', '') == 'Paragraph':<br/>            paragraph_list.append(p)<br/>        if p.get('__typename', '') == 'Markup':<br/>            markup_dict[k] = p</span><span id="6e79" class="lf lg it nt b gy ob ny l nz oa">    paragraphs = []<br/>    for p in paragraph_list:<br/>        paragraph_type = p['type']<br/>        if paragraph_type == 'IMG':<br/>            img_filename = p['metadata']['id'].split(\<br/>                'ImageMetadata:')[1]<br/>            # Medium returns 403 for the default user-agent<br/>            opener = urllib.request.build_opener()<br/>            opener.addheaders = [('User-agent', 'Mozilla/5.0\<br/>                (Macintosh; Intel Mac OS X 10_15_4)\<br/>                AppleWebKit/537.36 (KHTML, like Gecko)\<br/>                Chrome/81.0.4044.129 Safari/537.36')]<br/>            urllib.request.install_opener(opener)<br/>            urllib.request.urlretrieve(<br/>                IMG_BASE_URL + img_filename, img_filename)<br/>            paragraphs.append({<br/>                'type': paragraph_type,<br/>                'img_filename': img_filename<br/>            })<br/>        else:<br/>            text = p['text']<br/>            markups = []<br/>            for markup_reference in p['markups']:<br/>                markup = markup_dict[markup_reference['id']]<br/>                start = markup['start']<br/>                end = markup['end']<br/>                markup_type = markup['type']<br/>                markups.append({<br/>                    'type': markup_type,<br/>                    'start': start,<br/>                    'end': end<br/>                })<br/>            paragraphs.append({<br/>                'type': paragraph_type,<br/>                'text': text,<br/>                'markups': markups<br/>            })</span><span id="df12" class="lf lg it nt b gy ob ny l nz oa">    # Medium treats title as its first paragraph, of type 'H3'.<br/>    # It treats the optional subtitle as an optional second <br/>    # paragraph, of type 'H4'.<br/>    title = paragraphs.pop(0)['text']<br/>    subtitle = None<br/>    if paragraphs[0]['type'] == 'H4':<br/>        subtitle = paragraphs.pop(0)['text']</span><span id="7761" class="lf lg it nt b gy ob ny l nz oa">    return {<br/>        'title': title,<br/>        'subtitle': subtitle,<br/>        'paragraphs': paragraphs<br/>    }</span></pre><h2 id="51e3" class="lf lg it bd lh li lj dn lk ll lm dp ln kr lo lp lq kv lr ls lt kz lu lv lw lx bi translated">构成表示</h2><pre class="ne nf ng nh gt ns nt nu nv aw nw bi"><span id="0c18" class="lf lg it nt b gy nx ny l nz oa">def compose(article, upload_image_func, styler, footer_decorator,<br/>            content_modifiers):<br/>    soup = BeautifulSoup('&lt;div&gt;&lt;/div&gt;')<br/>    root = soup.div</span><span id="0ce4" class="lf lg it nt b gy ob ny l nz oa">    title = article['title']<br/>    subtitle = article['subtitle']<br/>    for modifier in content_modifiers:<br/>        title = modifier.modify(title)<br/>        if subtitle is not None:<br/>            subtitle = modifier.modify(subtitle)<br/>    paragraphs = article['paragraphs']</span><span id="dec4" class="lf lg it nt b gy ob ny l nz oa">    # Keep track of the current context:<br/>    # 1) None<br/>    # 2) in &lt;ul&gt;<br/>    # 3) in &lt;ol&gt;<br/>    # Embedded contexts are not allowed.<br/>    context = None<br/>    for p in paragraphs:<br/>        if p['type'] == 'IMG':<br/>            img_filename = p['img_filename']<br/>            uploaded_url = upload_image_func(img_filename)<br/>            img_tag = soup.new_tag('img')<br/>            img_tag['src'] = uploaded_url<br/>            styler.style(img_tag)<br/>            root.append(img_tag)<br/>        else:<br/>            new_context = None<br/>            if p['type'] == 'OLI':<br/>                tag_type = 'li'<br/>                new_context = 'ol'<br/>            elif p['type'] == 'ULI':<br/>                tag_type = 'li'<br/>                new_context = 'ul'<br/>            elif p['type'] == 'H3':<br/>                tag_type = 'h3'<br/>            elif p['type'] == 'H4':<br/>                tag_type = 'h4'<br/>            else:<em class="my"><br/>                </em>tag_type = 'p'</span><span id="0774" class="lf lg it nt b gy ob ny l nz oa">            if new_context != context:<br/>                # Backtrack from either &lt;ul&gt; or &lt;ol&gt;<br/>                if context is not None:<br/>                    root = root.parent<br/>                # Enter either &lt;ul&gt; or &lt;ol&gt;<br/>                if new_context is not None:<br/>                    new_root = soup.new_tag(new_context)<br/>                    root.append(new_root)<br/>                    styler.style(new_root)<br/>                    root = new_root<br/>                context = new_context</span><span id="bb9d" class="lf lg it nt b gy ob ny l nz oa">            text_content = p['text']<br/>            for modifier in content_modifiers:<br/>                text_content = modifier.modify(text_content)<br/>            markups = p['markups']<br/>            new_tag = <strong class="nt iu">process_content</strong>(text_content, markups, soup,<br/>                styler, tag_type)<br/>            styler.style(new_tag)<br/>            root.append(new_tag)</span><span id="9221" class="lf lg it nt b gy ob ny l nz oa">    if footer_decorator is not None:<br/>        footer_decorator.add_footer(soup, root)</span><span id="2a4c" class="lf lg it nt b gy ob ny l nz oa">    # soup: &lt;html&gt;&lt;body&gt;&lt;div&gt;real content&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;<br/>    return {'title': title, 'subtitle': subtitle,<br/>        'content': str(soup.div)}</span></pre><p id="fa61" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我为你创建了一些抽象来定制行为</p><ul class=""><li id="8072" class="ly lz it kk b kl km ko kp kr mz kv na kz nb ld nc mg mh mi bi translated"><em class="my"> upload_image_func </em>:针对平台特定要求或您选择的CDN</li><li id="bd22" class="ly lz it kk b kl mj ko mk kr ml kv mm kz mn ld nc mg mh mi bi translated"><em class="my"> styler </em>:用于定制样式(如CSS)，以讲述您的品牌故事，让您的内容脱颖而出</li><li id="8667" class="ly lz it kk b kl mj ko mk kr ml kv mm kz mn ld nc mg mh mi bi translated"><em class="my"> footer_decorator </em>:用于自动填充你在每篇文章结尾的签名</li><li id="693f" class="ly lz it kk b kl mj ko mk kr ml kv mm kz mn ld nc mg mh mi bi translated"><em class="my"> content_modifiers </em>:用于内容处理。在我的例子中，我用zhconv库将繁体字转换成简体字。你也可以使用谷歌翻译API把英文文章翻译成中文。</li></ul><h2 id="868a" class="lf lg it bd lh li lj dn lk ll lm dp ln kr lo lp lq kv lr ls lt kz lu lv lw lx bi translated">处理标记</h2><pre class="ne nf ng nh gt ns nt nu nv aw nw bi"><span id="89d4" class="lf lg it nt b gy nx ny l nz oa">def process_content(text_content, markups, soup, styler, tag_type):<br/>    <em class="my">"""<br/>        Creates an element from text_content and markups into<br/>        the content_tag.<br/>        E.g.<br/>        text_content = "this is cool"<br/>        markups = [{"start": 8, "end": 12, "type": "STRONG"}]<br/>        tag_type = "p"<br/>        Returns "&lt;p&gt;this is &lt;strong&gt;cool&lt;/strong&gt;&lt;/p&gt;"<br/>    """<br/>    </em>content_tag = soup.new_tag(tag_type)<br/>    last_end = 0<br/>    for markup in markups:<br/>        start = markup['start']<br/>        end = markup['end']<br/>        inner_tag = None<br/>        if markup['type'] == 'STRONG':<br/>            inner_tag = 'strong'<br/>        if markup['type'] == 'EM':<br/>            inner_tag = 'i'<br/>        if inner_tag is not None:<br/>            content_tag.append(text_content[last_end:start])<br/>            markup_tag = soup.new_tag(inner_tag)<br/>            markup_tag.string = text_content[start:end]<br/>            styler.style(markup_tag)<br/>            content_tag.append(markup_tag)<br/>            text_content = text_content[end:]<br/>            last_end = end<br/>    if len(text_content) &gt; 0:<br/>        content_tag.append(text_content)<br/>    return content_tag</span></pre><h2 id="1ba6" class="lf lg it bd lh li lj dn lk ll lm dp ln kr lo lp lq kv lr ls lt kz lu lv lw lx bi translated">调用微信API</h2><pre class="ne nf ng nh gt ns nt nu nv aw nw bi"><span id="8ada" class="lf lg it nt b gy nx ny l nz oa">from settings import SETTINGS<br/></span><span id="55a0" class="lf lg it nt b gy ob ny l nz oa">def get_access_token():<br/>    response = requests.get(<br/>        'https://api.weixin.qq.com/cgi-bin/token?\<br/>        grant_type=client_credential&amp;appid=%s&amp;secret=%s' % (<br/>            SETTINGS['account_id'], SETTINGS['secret_key']))<br/>    return json.loads(response.text)['access_token']<br/></span><span id="4454" class="lf lg it nt b gy ob ny l nz oa">def upload_image(img_filename):<br/>    files = {'media': open(img_filename, 'rb')}<br/>    response = requests.post(<br/>        'https://api.weixin.qq.com/cgi-bin/material/add_material?\<br/>        access_token=' + get_access_token(),<br/>        files=files)<br/>    return json.loads(response.text)['url']<br/></span><span id="5d60" class="lf lg it nt b gy ob ny l nz oa">def upload_article(article):<br/>    title = article['title']<br/>    content = article['content']<br/>    author = '人生经理Charlene'<br/>    thumb_media_id = 'Tbt5DXSqC3bfid5UxqErjLRd9i4NQfbQSaTu73gTVYs'<br/>    post_url = 'https://api.weixin.qq.com/cgi-bin/material/\<br/>        add_news?access_token=' + get_access_token()<br/>    post_body = {<br/>        "articles": [{<br/>            "title": title,<br/>            "thumb_media_id": thumb_media_id,<br/>            "author": author,<br/>            "show_cover_pic": 0,<br/>            "content": content,<br/>            "content_source_url": '',<br/>        },<br/>        ],<br/>    }<br/>    headers = {<br/>        "Content-type": "application/json", "charset": "UTF-8"}<br/>    response = requests.post(<br/>        post_url,<br/>        <strong class="nt iu">data=bytes(json.dumps(post_body, ensure_ascii=False),<br/>            encoding='utf-8'), headers=headers)</strong></span></pre><p id="f307" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">注意最后一步<strong class="kk iu">将字典转换成utf-8编码的字节</strong>。正确处理中文是关键。</p><h2 id="6bd1" class="lf lg it bd lh li lj dn lk ll lm dp ln kr lo lp lq kv lr ls lt kz lu lv lw lx bi translated">拼凑在一起</h2><pre class="ne nf ng nh gt ns nt nu nv aw nw bi"><span id="9fd1" class="lf lg it nt b gy nx ny l nz oa">from crawler import crawl_medium<br/>from composer import compose<br/>from wechat_client import upload_image, upload_article<br/>import styler<br/>import footer_decorator<br/>import zh_converter</span><span id="7272" class="lf lg it nt b gy ob ny l nz oa">url = 'https://bit.ly/eating-eng-mindset'<br/>article_data = crawl_medium(url)<br/>article = compose(article_data, upload_image, styler,<br/>    footer_decorator, [zh_converter])<br/>upload_article(article)</span></pre><blockquote class="od"><p id="38a3" class="oe of it bd og oh oi oj ok ol om ld dk translated">就是这样！在我的Github 上查看<a class="ae le" href="https://github.com/ChrisXLiu/medium-to-wechat" rel="noopener ugc nofollow" target="_blank">最终代码</a></p></blockquote></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><p id="69bd" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在我已经有了正确的<strong class="kk iu">抽象</strong>，我只需要定制组件(例如Composer和API Client)并与其他API集成。</p><p id="21b4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">另外，作为这个练习的一部分，我发现了JSON 的两个优点:</p><ul class=""><li id="157c" class="ly lz it kk b kl km ko kp kr mz kv na kz nb ld nc mg mh mi bi translated">JSON模式生成器:<a class="ae le" href="https://jsonschema.net/home" rel="noopener ugc nofollow" target="_blank">https://jsonschema.net/home</a></li><li id="baa2" class="ly lz it kk b kl mj ko mk kr ml kv mm kz mn ld nc mg mh mi bi translated">JSON模式查看器:<a class="ae le" href="https://navneethg.github.io/jsonschemaviewer/" rel="noopener ugc nofollow" target="_blank">https://navneethg.github.io/jsonschemaviewer/</a></li></ul><p id="a8ab" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">希望这有所帮助！</p></div></div>    
</body>
</html>