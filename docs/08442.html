<html>
<head>
<title>Prepare your Flutter code for the WidgetRef implementation of RiverPod</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为RiverPod的WidgetRef实现准备您的Flutter代码</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/prepare-your-flutter-code-for-the-widgetreference-implementation-of-riverpod-ebf8af4e8d00?source=collection_archive---------6-----------------------#2021-05-03">https://levelup.gitconnected.com/prepare-your-flutter-code-for-the-widgetreference-implementation-of-riverpod-ebf8af4e8d00?source=collection_archive---------6-----------------------#2021-05-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="394f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2021年6月19日，在开发该功能的过程中，<code class="fe kl km kn ko b">WidgetReference</code>被重命名为<code class="fe kl km kn ko b">WidgetRef</code></p><p id="7d7d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">RiverPod是一个针对Dart的编译安全依赖注入器，它与Remi Rousselet 开发的Flutter完美配合。尽管作为一个状态管理器很强大，但它将在接下来的几周内遭受一些突破性的变化(这些变化仍在开发中)。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/2ae433f40e1fd46f8aef630d7dd0d1ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*dngzQ4Ymp0vFr0sQ.png"/></div></div></figure><p id="c46b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">变更的完整解释在GitHub库的RFC 335中。</p><div class="ld le gp gr lf lg"><a href="https://github.com/rrousselGit/river_pod/issues/335" rel="noopener  ugc nofollow" target="_blank"><div class="lh ab fo"><div class="li ab lj cl cj lk"><h2 class="bd ir gy z fp ll fr fs lm fu fw ip bi translated">[RFC]监听提供者的统一语法(v2)问题#335 rrousselGit/river_pod</h2><div class="ln l"><h3 class="bd b gy z fp ll fr fs lm fu fw dk translated">本RFC是#246的后续，提案略有不同。问题是一样的:Riverpod需要一种方法来…</h3></div><div class="lo l"><p class="bd b dl z fp ll fr fs lm fu fw dk translated">github.com</p></div></div><div class="lp l"><div class="lq l lr ls lt lp lu lb lg"/></div></div></a></div><p id="2152" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">基本上，主要的更新是<code class="fe kl km kn ko b">ConsumerWidget</code>、<code class="fe kl km kn ko b">Consumer</code>和<code class="fe kl km kn ko b">useProvider</code>将如何工作。</p><pre class="ks kt ku kv gt lv ko lw lx aw ly bi"><span id="a3f5" class="lz ma iq ko b gy mb mc l md me">class MyWidget extends ConsumerWidget {<br/>  const MyWidget({Key? key}) : super(key: key);</span><span id="6084" class="lz ma iq ko b gy mf mc l md me">  @override<br/>  Widget build(BuildContext context, WidgetRef ref) {<br/>    final counter = ref.watch(myCounterProvider);<br/>    return Text('$counter');<br/>  }</span></pre><p id="6343" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因此，<code class="fe kl km kn ko b">Consumer</code>小部件将按如下方式工作:</p><pre class="ks kt ku kv gt lv ko lw lx aw ly bi"><span id="7de0" class="lz ma iq ko b gy mb mc l md me">Consumer(<br/>  builder: (context, ref, child) {<br/>    final counter = ref.watch(counterProvider);<br/>    return GestureDetector(<br/>      onTap: () =&gt; ref.read(counterProvider.notifier).increment(),<br/>      child: Column(<br/>        children: [<br/>          child,<br/>          Text('$counter),<br/>        ],<br/>      ),<br/>    );<br/>  },<br/>  child: Text('Tap me'),<br/>}</span></pre><p id="614c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">并且<code class="fe kl km kn ko b">useProvider</code>将会消失，而<code class="fe kl km kn ko b">HookConsumerWidget</code>和<code class="fe kl km kn ko b">HookConsumer</code>将会被创建。这些将分别作为<code class="fe kl km kn ko b">ConsumerWidget</code>和<code class="fe kl km kn ko b">Consumer</code>工作，但支持<code class="fe kl km kn ko b">hook</code> s。</p><p id="5117" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您还可以在GitHub中看到WIP实现:</p><div class="ld le gp gr lf lg"><a href="https://github.com/rrousselGit/river_pod/pull/462" rel="noopener  ugc nofollow" target="_blank"><div class="lh ab fo"><div class="li ab lj cl cj lk"><h2 class="bd ir gy z fp ll fr fs lm fu fw ip bi translated">通过rrousselGit拉请求#462 rrousselGit/river_pod实施RFC 335</h2><div class="ln l"><h3 class="bd b gy z fp ll fr fs lm fu fw dk translated">implements # 335 TODO:Update Consumer/Consumer widget Remove use provider Add hook Consumer/hook Consumer widget Update docs…</h3></div><div class="lo l"><p class="bd b dl z fp ll fr fs lm fu fw dk translated">github.com</p></div></div><div class="lp l"><div class="mg l lr ls lt lp lu lb lg"/></div></div></a></div><p id="a09d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果您在您的项目中使用<code class="fe kl km kn ko b">RiverPod</code>，您可能更喜欢现在进行迁移，因为稍后它将代表更多的工作。如果是的话，我为你准备了下面的代码。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="d5ff" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">不导入<code class="fe kl km kn ko b">hooks_riverpod</code>或<code class="fe kl km kn ko b">flutter_hooks</code>，而是导入该文件。下一个版本发布时，您只需编辑这个文件，删除所有代码，只导出两个包中的一个。🎉</p><pre class="ks kt ku kv gt lv ko lw lx aw ly bi"><span id="8f2a" class="lz ma iq ko b gy mb mc l md me">//export 'package:flutter_riverpod/flutter_riverpod.dart';<br/>export 'package:hooks_riverpod/hooks_riverpod.dart';</span></pre></div><div class="ab cl mj mk hu ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="ij ik il im in"><p id="4c28" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在GitHub中跟随我😃</p><div class="ld le gp gr lf lg"><a href="https://github.com/kranfix/" rel="noopener  ugc nofollow" target="_blank"><div class="lh ab fo"><div class="li ab lj cl cj lk"><h2 class="bd ir gy z fp ll fr fs lm fu fw ip bi translated">kranfix -概述</h2><div class="ln l"><h3 class="bd b gy z fp ll fr fs lm fu fw dk translated">一个用C和Java写的扩展卡尔曼滤波器。五月六月七月八月九月十月十一月…</h3></div><div class="lo l"><p class="bd b dl z fp ll fr fs lm fu fw dk translated">github.com</p></div></div><div class="lp l"><div class="mq l lr ls lt lp lu lb lg"/></div></div></a></div></div></div>    
</body>
</html>