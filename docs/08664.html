<html>
<head>
<title>Creating a Custom Editor/Menu-Item in Unity</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Unity中创建自定义编辑器/菜单项</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/creating-a-custom-editor-menu-item-in-unity-483ec5ea15c4?source=collection_archive---------2-----------------------#2021-05-23">https://levelup.gitconnected.com/creating-a-custom-editor-menu-item-in-unity-483ec5ea15c4?source=collection_archive---------2-----------------------#2021-05-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="3c00" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">今天我想谈谈一些不同的东西，一些大多数Unity开发者不知道他们能做的或者认为太复杂而不能做的东西。我是后者，我知道你可以在Unity中创建自定义编辑器窗口，但我从未在我的项目中看到它们的用途，我有点害怕在Unity中打开编辑器窗口的大门。</p><p id="b203" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当我有机会为WildLife Studio完成三项任务时，这一切都改变了，这需要我创建一些自定义编辑器窗口。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/35e24f888e2698833101586489371db0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ofvz7qaf2kSZNcF8746V9g.jpeg"/></div></div></figure><blockquote class="kx ky kz"><p id="fcc4" class="jn jo la jp b jq jr js jt ju jv jw jx lb jz ka kb lc kd ke kf ld kh ki kj kk ij bi translated">那么什么是自定义编辑器、菜单项和编辑器窗口呢？你是如何创造它们的？它们是用来做什么的？</p></blockquote><p id="f523" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi le translated">自定义编辑器是您创建的新窗口，其行为类似于unity的任何默认窗口。根据<a class="ae ln" href="https://docs.unity3d.com/Manual/editor-EditorWindows.html" rel="noopener ugc nofollow" target="_blank"> Unity Docs </a> : <em class="la">的说法，“这些行为就像检查员、场景或任何其他内置的一样。这是为你的游戏添加一个用户界面到一个子系统的好方法。”</em></p><p id="6cae" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">创建自定义编辑器时，您应该始终遵循以下三个步骤:</p><ol class=""><li id="d035" class="lo lp iq jp b jq jr ju jv jy lq kc lr kg ls kk lt lu lv lw bi translated">创建一个继承自编辑器或编辑器窗口类的C#脚本，<strong class="jp ir">并且该脚本必须放在一个名为“Editor”</strong>的文件夹中，否则这一切都将不起作用。</li><li id="bdf2" class="lo lp iq jp b jq lx ju ly jy lz kc ma kg mb kk lt lu lv lw bi translated">使用代码触发自定义编辑器窗口的打开。</li><li id="c392" class="lo lp iq jp b jq lx ju ly jy lz kc ma kg mb kk lt lu lv lw bi translated">为您的工具实现GUI代码(UI元素)。</li></ol><p id="651a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">自定义编辑器有很多用途，例如你可以创建一个编辑器，允许你立即创建一个带有特定组件的游戏对象，或者你可以在自定义编辑器窗口中跟踪你有多少物品。自定义编辑器窗口的使用受到您想象力的限制。</p><p id="abe5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们看一个现实生活中的例子。</p><blockquote class="kx ky kz"><p id="5308" class="jn jo la jp b jq jr js jt ju jv jw jx lb jz ka kb lc kd ke kf ld kh ki kj kk ij bi translated">O <strong class="jp ir">目的</strong>:需要一个定制的编辑器来允许设计者从分配给他们的游戏对象中删除C#脚本，而不会破坏游戏对象。</p></blockquote><p id="7740" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们遵循这三个步骤。</p><p id="b125" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">A.在资产中创建一个文件夹，并将其命名为“<em class="la"> Editor </em>”。在这个文件夹中创建一个C#脚本，命名为"<em class="la"> ScriptCleaner </em>"，移除<em class="la"> Monobehaviour </em>继承并添加" Editor "来代替。还要确保添加名称空间“<em class="la"> UnityEditor </em>”。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mc"><img src="../Images/2c8d18671e6658b0a33c143123e48832.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ij5lFbEjB1tjbCT3pc_jkQ.png"/></div></div></figure><p id="102b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">B.代码:</p><p id="f3b9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以我们想在Unity的顶栏中添加一个菜单项，并且在右键单击层级中的游戏对象时添加它，这样我们就可以执行我们想要的方法。我们可以通过添加一个属性来做到这一点，就像添加一个可脚本化的对象一样。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi md"><img src="../Images/f41433633af93ff1d4f5a43962bec7b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rH5Z44P0TtgLu_eKvROGZQ.png"/></div></div></figure><p id="08a1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">字符串“GameObject”将直接在其下添加方法到顶部菜单GameObject，并创建一个名为Automation的子文件夹。bool false将确保菜单项在您需要的任何时候都可用，int“-1”是该子菜单的优先级，当右键单击层级中的游戏对象时，该子菜单将允许该项出现。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi me"><img src="../Images/23519bbc4ee5fc8d5da32864f4568a75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1176/format:webp/1*YRT9lo5UFHUFlgVRnf06-g.png"/></div></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated">清除顶部菜单栏中的脚本方法和子菜单。</figcaption></figure><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/b7a1e306f66c248b16127ac3e3069149.png" data-original-src="https://miro.medium.com/v2/resize:fit:942/format:webp/1*lmbtEOdlwHSwBhIPnuV6iQ.png"/></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated">清除脚本方法和层次结构中的子菜单。</figcaption></figure><p id="e729" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">完成删除脚本任务的代码非常简单。获取父gameObject和其子game object中的所有MonoBehaviour组件，如果有，删除它们。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mk"><img src="../Images/a3059c239fdd159cf8836fc319cd9240.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Vnn87f9nXKPcfleUa0a6jw.png"/></div></div></figure><p id="d9b2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">C.至于实现GUI代码的第三步，在这个例子中，它是在执行这个方法之后显示的一个新的编辑器窗口。代码驻留在一个独立的C#脚本中，该脚本继承自EditorWindow类，而不仅仅是Editor类。(但也必须放在编辑器文件夹中)。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mk"><img src="../Images/ab11a201199b6b81dc126e60a3f3828f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AZ2JJTSU1oPM_gL6d64njw.png"/></div></div></figure><p id="e747" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这两个脚本是编辑器脚本，因此您不必将它们放在场景中的任何实例上。</p><p id="8a33" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下面是他们的行动== &gt;</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ml"><img src="../Images/19d8dba90f0f7a6ee9bb4631c2f4814a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*dFKXvOpORILyS1reCY-rEg.gif"/></div></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated">脚本清理编辑器</figcaption></figure><p id="0e75" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这只是您可以使用定制编辑器做的事情的皮毛。但无论你是独立开发者，还是Unity的软件工程师，定制编辑器都值得你花时间。你应该花时间去学习它们，并将它们应用到你的项目中。</p></div></div>    
</body>
</html>