<html>
<head>
<title>Enums with JPA and SpringBoot</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">带JPA和SpringBoot的枚举</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/enums-with-jpa-and-springboot-f4351a85216d?source=collection_archive---------2-----------------------#2020-08-14">https://levelup.gitconnected.com/enums-with-jpa-and-springboot-f4351a85216d?source=collection_archive---------2-----------------------#2020-08-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="a3fd" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">上周，我在一个项目(<a class="ae ko" href="https://sefglobal.org/academix/" rel="noopener ugc nofollow" target="_blank"> SEF学院</a>)的后端工作，这个项目使用了JPA和spring boot。在那里，我必须将数据的翻译也添加到数据库中。(实际上，我们已经在最初的项目中创建了相关的表)有一个单独的语言表和一个单独的翻译表。这个我肯定不清楚。这是一张图表。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi kp"><img src="../Images/e089b6be55ff8cc58f9cf72b31b5d0c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QO5tjcJtpypejP3cnSpHQw.png"/></div></div></figure><p id="5fec" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">几天前，我们发现了一些我们忽略的东西，那就是我们不需要一个单独的语言表，因为我们希望只使用两种语言。所以我们讨论了一下，决定用枚举来表示语言。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi lb"><img src="../Images/139d769eca2ef4d71a6317dd584934e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1054/format:webp/1*3RMW7UbUm8IzFsq_FjCRNA.png"/></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">桌子</figcaption></figure><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi lg"><img src="../Images/1dd3a3ea1ebb8084ba598948c2fd5235.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ng5kwWK88UQEsTL0eyb6-Q.jpeg"/></div></div></figure></div><div class="ab cl lh li hx lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="im in io ip iq"><h1 id="fb14" class="lo lp it bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">什么是枚举？</h1><blockquote class="mm mn mo"><p id="b05b" class="jq jr mp js b jt ju jv jw jx jy jz ka mq kc kd ke mr kg kh ki ms kk kl km kn im bi translated">枚举是常数列表。当您需要一个预定义的值列表来表示某种数字或文本数据时，您应该使用枚举。(它必须是一小组可能的值)</p></blockquote><p id="8910" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">所以在这种情况下，我们的预定义语言是🇱🇰 SI_LK和TA_LK。</p><pre class="kq kr ks kt gt mt mu mv mw aw mx bi"><span id="6967" class="my lp it mu b gy mz na l nb nc">public enum Language {<br/>    SI_LK,<br/>    TA_LK<br/>}</span></pre><p id="12d4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">然后我给相关实体添加了enums。</p><pre class="kq kr ks kt gt mt mu mv mw aw mx bi"><span id="a795" class="my lp it mu b gy mz na l nb nc">@Enumerated<br/>@Column(name = "language", length = 5)<br/>private Language language;</span><span id="f0d7" class="my lp it mu b gy nd na l nb nc">//getter and setter</span></pre><p id="0401" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">完整代码<a class="ae ko" href="https://github.com/sef-global/sef-core/blob/efb5e1fc84b7b99f68e8314a095b00f1060a1be5/backend/src/main/java/org/sefglobal/core/academix/model/CategoryTranslation.java" rel="noopener ugc nofollow" target="_blank">此处</a>。</p><p id="a843" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这里我们必须使用<strong class="js iu"> @Enumerated </strong>注释来说明这是一个枚举。<br/>此外，我们可以在注释中使用枚举类型。有两种类型。</p><ul class=""><li id="7e1e" class="ne nf it js b jt ju jx jy kb ng kf nh kj ni kn nj nk nl nm bi translated"><em class="mp">枚举类型。序数</em></li><li id="360e" class="ne nf it js b jt nn jx no kb np kf nq kj nr kn nj nk nl nm bi translated"><em class="mp">枚举类型。字符串</em></li></ul><p id="334a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="mp">事实:枚举类型也是枚举</em></p><h2 id="a0c2" class="my lp it bd lq ns nt dn lu nu nv dp ly kb nw nx mc kf ny nz mg kj oa ob mk oc bi translated">序数</h2><p id="c548" class="pw-post-body-paragraph jq jr it js b jt od jv jw jx oe jz ka kb of kd ke kf og kh ki kj oh kl km kn im bi translated">序数是默认类型。这将只映射枚举的索引，该索引取自枚举列表的顺序。因此，首先定义的枚举值被映射到0，第二个被映射到1，依此类推。因此，它在数据库中只保存一个整数。这是有效的，但可读性是最低的。</p><h2 id="9f02" class="my lp it bd lq ns nt dn lu nu nv dp ly kb nw nx mc kf ny nz mg kj oa ob mk oc bi translated">线</h2><p id="1a61" class="pw-post-body-paragraph jq jr it js b jt od jv jw jx oe jz ka kb of kd ke kf og kh ki kj oh kl km kn im bi translated">这将在数据库中保存枚举的字符串值。因此，如果我们使用这种方法，数据库的可读性会更好，但效率并不高。</p><p id="74ba" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我选择了第二个选项。EnumTupe。字符串，这样我们就可以在数据库中得到一个可读的表。</p><pre class="kq kr ks kt gt mt mu mv mw aw mx bi"><span id="3aa6" class="my lp it mu b gy mz na l nb nc">@Enumerated(EnumType.STRING)<br/>@Column(name = "language", length = 5)<br/>private Language language;</span><span id="d584" class="my lp it mu b gy nd na l nb nc">//getter and setter</span></pre><p id="287c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在数据存储在这样的转换表中:</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi oi"><img src="../Images/d5cfea394af21246778e3d60970f3c7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1304/format:webp/1*gIo1uME8rrDCT5rUm5KAhg.png"/></div></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">简式记帐</figcaption></figure><p id="61f7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">并且也有可能使用Enum的定制值。</p><p id="85b4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="mp">你知道吗？—在JPA的早期版本中，他们不允许我们使用枚举作为组合键。但是现在有可能了。正常使用就好。</em></p><p id="0fc4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">今天到此为止。感谢阅读。</p></div></div>    
</body>
</html>