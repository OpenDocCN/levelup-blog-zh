<html>
<head>
<title>Using HTML Audio and Video Elements</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用HTML音频和视频元素</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/using-html-audio-and-video-elements-af66ee5ae0c5?source=collection_archive---------9-----------------------#2020-01-31">https://levelup.gitconnected.com/using-html-audio-and-video-elements-af66ee5ae0c5?source=collection_archive---------9-----------------------#2020-01-31</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/89345ced569fdd2c9ec26dfdeff396e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*4n4sh-jpOBZ3CJiV"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated"><a class="ae kf" href="https://unsplash.com/@aperture_andy?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">李安迪</a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="eceb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">HTML5为我们提供了许多工具和标签来处理多媒体。HTML5的一个新特性是能够嵌入音频和视频，而不需要像Flash这样的插件。</p><p id="b5e0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本文中，我们将了解如何向网页添加音频和视频元素，并使用JavaScript控制它们。</p><h1 id="51e5" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">添加音频或视频元素</h1><p id="fe1d" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">为了添加音频和视频元素，我们分别使用了<code class="fe mh mi mj mk b">audio</code>和<code class="fe mh mi mj mk b">video</code>标签。它们有一些属性。它们是:</p><ul class=""><li id="95f3" class="ml mm it ki b kj kk kn ko kr mn kv mo kz mp ld mq mr ms mt bi translated"><code class="fe mh mi mj mk b">autoplay</code> —指定是否自动播放音频或视频</li><li id="aec1" class="ml mm it ki b kj mu kn mv kr mw kv mx kz my ld mq mr ms mt bi translated"><code class="fe mh mi mj mk b">controls</code> —指定是否显示回放控件</li><li id="1992" class="ml mm it ki b kj mu kn mv kr mw kv mx kz my ld mq mr ms mt bi translated"><code class="fe mh mi mj mk b">loop</code> —指定剪辑结束后是否要再次播放</li><li id="611b" class="ml mm it ki b kj mu kn mv kr mw kv mx kz my ld mq mr ms mt bi translated"><code class="fe mh mi mj mk b">muted</code> —指定是否播放声音</li><li id="2725" class="ml mm it ki b kj mu kn mv kr mw kv mx kz my ld mq mr ms mt bi translated"><code class="fe mh mi mj mk b">preload</code> —指定剪辑的哪一部分应该预加载。它可以是加载所有内容的<code class="fe mh mi mj mk b">auto</code>，仅加载元数据的<code class="fe mh mi mj mk b">metadata</code>，或者不加载任何内容的<code class="fe mh mi mj mk b">none</code></li><li id="e7f6" class="ml mm it ki b kj mu kn mv kr mw kv mx kz my ld mq mr ms mt bi translated"><code class="fe mh mi mj mk b">src</code> —剪辑的URL</li></ul><p id="b244" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要在我们的网页中嵌入音频，我们可以编写以下代码:</p><pre class="mz na nb nc gt nd mk ne nf aw ng bi"><span id="6afa" class="nh lf it mk b gy ni nj l nk nl">&lt;audio controls&gt;<br/>  &lt;source src="<a class="ae kf" href="https://file-examples.com/wp-content/uploads/2017/11/file_example_OOG_1MG.ogg" rel="noopener ugc nofollow" target="_blank">https://file-examples.com/wp-content/uploads/2017/11/file_example_OOG_1MG.ogg</a>" type="audio/ogg"&gt;<br/>  &lt;source src="<a class="ae kf" href="https://file-examples.com/wp-content/uploads/2017/11/file_example_MP3_700KB.mp3" rel="noopener ugc nofollow" target="_blank">https://file-examples.com/wp-content/uploads/2017/11/file_example_MP3_700KB.mp3</a>" type="audio/mpeg"&gt;<br/>  Your browser does not support the audio tag.<br/>&lt;/audio&gt;</span></pre><p id="16fb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在上面的代码中，我们指定了我们想要加载的不同格式的音频。</p><p id="007b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">同样，我们可以对视频做同样的事情:</p><pre class="mz na nb nc gt nd mk ne nf aw ng bi"><span id="d78a" class="nh lf it mk b gy ni nj l nk nl">&lt;video controls width="250"&gt;<br/>  &lt;source src="<a class="ae kf" href="https://sample-videos.com/video123/mp4/240/big_buck_bunny_240p_30mb.mp4" rel="noopener ugc nofollow" target="_blank">https://sample-videos.com/video123/mp4/240/big_buck_bunny_240p_30mb.mp4</a>" type="video/mp4"&gt;<br/>  Your browser does not support the video tag.<br/>&lt;/video&gt;</span></pre><p id="fcfc" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这两段代码中，标签中的文本是在浏览器不支持这些标签时的后备文本。</p><h1 id="312f" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">用JavaScript控制元素</h1><p id="9b11" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以用JavaScript代码定制音频或视频元素的功能。以下是可用于控制音频或视频元素回放的方法:</p><ul class=""><li id="4bed" class="ml mm it ki b kj kk kn ko kr mn kv mo kz mp ld mq mr ms mt bi translated"><code class="fe mh mi mj mk b">play</code> —开始播放音频或视频</li><li id="e4a4" class="ml mm it ki b kj mu kn mv kr mw kv mx kz my ld mq mr ms mt bi translated"><code class="fe mh mi mj mk b">pause</code> —暂停音频或视频</li><li id="82be" class="ml mm it ki b kj mu kn mv kr mw kv mx kz my ld mq mr ms mt bi translated"><code class="fe mh mi mj mk b">load</code> —重新加载音频或视频元素</li><li id="3b7a" class="ml mm it ki b kj mu kn mv kr mw kv mx kz my ld mq mr ms mt bi translated"><code class="fe mh mi mj mk b">addTextTrack</code> —为音频或视频添加文本轨道</li><li id="10a6" class="ml mm it ki b kj mu kn mv kr mw kv mx kz my ld mq mr ms mt bi translated"><code class="fe mh mi mj mk b">canPlayType</code> —检查浏览器是否可以播放指定类型的音频或视频</li></ul><p id="b7d1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们还可以设置一些属性来控制音频或视频播放:</p><ul class=""><li id="24b4" class="ml mm it ki b kj kk kn ko kr mn kv mo kz mp ld mq mr ms mt bi translated"><code class="fe mh mi mj mk b">currentTime</code> —以秒为单位设置音频或视频的当前时间</li><li id="36e3" class="ml mm it ki b kj mu kn mv kr mw kv mx kz my ld mq mr ms mt bi translated"><code class="fe mh mi mj mk b">defaultMuted</code> —指示音频输出是否默认静音</li><li id="5222" class="ml mm it ki b kj mu kn mv kr mw kv mx kz my ld mq mr ms mt bi translated"><code class="fe mh mi mj mk b">defaultPlaybackRate</code> —表示媒体默认播放的数字</li><li id="d6a6" class="ml mm it ki b kj mu kn mv kr mw kv mx kz my ld mq mr ms mt bi translated"><code class="fe mh mi mj mk b">loop</code> —布尔值，表示播放结束后是否要重新开始播放</li><li id="6f07" class="ml mm it ki b kj mu kn mv kr mw kv mx kz my ld mq mr ms mt bi translated"><code class="fe mh mi mj mk b">muted</code> —我们可以设置静音的布尔型</li><li id="47da" class="ml mm it ki b kj mu kn mv kr mw kv mx kz my ld mq mr ms mt bi translated"><code class="fe mh mi mj mk b">playbackRate</code> —设置剪辑的回放速度</li><li id="9f70" class="ml mm it ki b kj mu kn mv kr mw kv mx kz my ld mq mr ms mt bi translated"><code class="fe mh mi mj mk b">volume</code> —更改音频或视频的音量</li></ul><p id="fc3a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以如下使用这些方法和值属性。首先，我们将剪辑添加到HTML代码中:</p><pre class="mz na nb nc gt nd mk ne nf aw ng bi"><span id="9743" class="nh lf it mk b gy ni nj l nk nl">&lt;video controls width="250"&gt;<br/>  &lt;source src="<a class="ae kf" href="https://sample-videos.com/video123/mp4/240/big_buck_bunny_240p_30mb.mp4" rel="noopener ugc nofollow" target="_blank">https://sample-videos.com/video123/mp4/240/big_buck_bunny_240p_30mb.mp4</a>" type="video/mp4"&gt;<br/>  Sorry, your browser doesn't support embedded videos.<br/>&lt;/video&gt;</span></pre><p id="651d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后，我们可以添加按钮来改变各种事情，如回放速度或静音音频如下。首先，我们添加一些按钮，让我们通过单击来更改设置:</p><pre class="mz na nb nc gt nd mk ne nf aw ng bi"><span id="63a2" class="nh lf it mk b gy ni nj l nk nl">&lt;button id='fast-button'&gt;1.5x speed<br/>&lt;/button&gt;</span><span id="7ab4" class="nh lf it mk b gy nm nj l nk nl">&lt;button id='fastest-button'&gt;2x speed<br/>&lt;/button&gt;</span><span id="e42c" class="nh lf it mk b gy nm nj l nk nl">&lt;button id='mute'&gt;Toggle Mute<br/>&lt;/button&gt;</span></pre><p id="1c93" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后，我们添加一些代码来获取按钮和视频元素，并相应地设置设置。</p><pre class="mz na nb nc gt nd mk ne nf aw ng bi"><span id="68f1" class="nh lf it mk b gy ni nj l nk nl">const fastButton = document.querySelector('#fast-button');<br/>const fastestButton = document.querySelector('#fastest-button');<br/>const muteButton = document.querySelector('#mute');<br/>const video = document.querySelector('video');</span><span id="8a7a" class="nh lf it mk b gy nm nj l nk nl">fastButton.onclick = () =&gt; {<br/>  video.playbackRate = 1.5<br/>}</span><span id="0c7d" class="nh lf it mk b gy nm nj l nk nl">fastestButton.onclick = () =&gt; {<br/>  video.playbackRate = 2<br/>}</span><span id="81e1" class="nh lf it mk b gy nm nj l nk nl">muteButton.onclick = () =&gt; {<br/>  video.muted = !video.muted;<br/>}</span></pre><p id="9e32" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在上面的代码中，我们获取了元素，然后在按钮的click事件处理程序中，我们设置了视频的<code class="fe mh mi mj mk b">playbackRate</code>和<code class="fe mh mi mj mk b">muted</code>属性。</p><p id="20cf" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以用这些方法做一些类似的事情。例如，我们可以添加以下按钮:</p><pre class="mz na nb nc gt nd mk ne nf aw ng bi"><span id="d980" class="nh lf it mk b gy ni nj l nk nl">&lt;button id='play'&gt;Play<br/>&lt;/button&gt;</span><span id="4dae" class="nh lf it mk b gy nm nj l nk nl">&lt;button id='pause'&gt;Pause<br/>&lt;/button&gt;</span></pre><p id="40ef" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后，我们可以添加以下按钮单击处理程序，以编程方式播放和暂停剪辑:</p><pre class="mz na nb nc gt nd mk ne nf aw ng bi"><span id="e15a" class="nh lf it mk b gy ni nj l nk nl">playButton.onclick = () =&gt; {<br/>  video.play();<br/>}</span><span id="b350" class="nh lf it mk b gy nm nj l nk nl">pauseButton.onclick = () =&gt; {<br/>  video.pause();<br/>}</span></pre><p id="ef58" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这对于创建不使用默认浏览器风格的定制视频和音频播放器，以及显示或隐藏控件的<code class="fe mh mi mj mk b">controls</code>属性非常方便。</p><p id="b9d3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">另一个例子是为我们的剪辑制作一个搜索栏。我们可以通过添加一个范围滑块来实现，如下所示:</p><pre class="mz na nb nc gt nd mk ne nf aw ng bi"><span id="a364" class="nh lf it mk b gy ni nj l nk nl">&lt;input type="range" name="time" id='time' min='0'&gt;</span></pre><p id="7b8a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后，我们可以将滑块的<code class="fe mh mi mj mk b">max</code>属性设置为剪辑的持续时间，并添加一个<code class="fe mh mi mj mk b">onchange</code>事件处理程序，如下所示:</p><pre class="mz na nb nc gt nd mk ne nf aw ng bi"><span id="13ce" class="nh lf it mk b gy ni nj l nk nl">timeInput.max = video.duration<br/>timeInput.onchange = (e) =&gt; {<br/>  video.currentTime = e.target.value;<br/>}</span></pre><p id="356c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当我们用滑块前后滑动时，让我们从视频的开始到结束寻找任何地方。</p><figure class="mz na nb nc gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nn"><img src="../Images/a4da35a19480dc980c277e4353894c40.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*hMqFI0te5bTZ4PBH"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">照片由<a class="ae kf" href="https://unsplash.com/@priscilladupreez?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">普里西拉·杜·普里兹</a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><h1 id="3b75" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">事件</h1><p id="2096" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">音频和视频元素也触发了以下事件，因此我们可以使用我们希望的事件处理程序来处理它们:</p><ul class=""><li id="e33a" class="ml mm it ki b kj kk kn ko kr mn kv mo kz mp ld mq mr ms mt bi translated"><code class="fe mh mi mj mk b">canplay</code> —浏览器可以播放媒体，但估计没有足够的数据可以在不停止缓冲的情况下完成播放。</li><li id="cc6c" class="ml mm it ki b kj mu kn mv kr mw kv mx kz my ld mq mr ms mt bi translated"><code class="fe mh mi mj mk b">canplaythrough</code> —浏览器估计回放结束，无需停止以获得更多缓冲</li><li id="a3fd" class="ml mm it ki b kj mu kn mv kr mw kv mx kz my ld mq mr ms mt bi translated"><code class="fe mh mi mj mk b">complete</code> —播放结束</li><li id="1a2b" class="ml mm it ki b kj mu kn mv kr mw kv mx kz my ld mq mr ms mt bi translated"><code class="fe mh mi mj mk b">durationchange</code> —持续时间已更新</li><li id="9846" class="ml mm it ki b kj mu kn mv kr mw kv mx kz my ld mq mr ms mt bi translated"><code class="fe mh mi mj mk b">emptied</code> —介质已变空</li><li id="322a" class="ml mm it ki b kj mu kn mv kr mw kv mx kz my ld mq mr ms mt bi translated"><code class="fe mh mi mj mk b">ended</code> —播放在剪辑结束前结束</li><li id="731b" class="ml mm it ki b kj mu kn mv kr mw kv mx kz my ld mq mr ms mt bi translated"><code class="fe mh mi mj mk b">loadeddata</code> —第一帧已经加载完毕</li><li id="c561" class="ml mm it ki b kj mu kn mv kr mw kv mx kz my ld mq mr ms mt bi translated"><code class="fe mh mi mj mk b">loadedmetadata </code> —元数据已加载</li><li id="0edd" class="ml mm it ki b kj mu kn mv kr mw kv mx kz my ld mq mr ms mt bi translated"><code class="fe mh mi mj mk b">pause</code> —播放暂停</li><li id="6884" class="ml mm it ki b kj mu kn mv kr mw kv mx kz my ld mq mr ms mt bi translated"><code class="fe mh mi mj mk b">play</code> —播放开始</li><li id="ab6e" class="ml mm it ki b kj mu kn mv kr mw kv mx kz my ld mq mr ms mt bi translated"><code class="fe mh mi mj mk b">playing</code> —回放因缺少数据而暂停或延迟后，准备开始</li><li id="4002" class="ml mm it ki b kj mu kn mv kr mw kv mx kz my ld mq mr ms mt bi translated"><code class="fe mh mi mj mk b">progress</code> —浏览器加载资源时定期触发</li><li id="abb1" class="ml mm it ki b kj mu kn mv kr mw kv mx kz my ld mq mr ms mt bi translated"><code class="fe mh mi mj mk b">ratechange</code> —回放速率改变</li><li id="0100" class="ml mm it ki b kj mu kn mv kr mw kv mx kz my ld mq mr ms mt bi translated"><code class="fe mh mi mj mk b">seeked</code>—寻道操作完成</li><li id="daa2" class="ml mm it ki b kj mu kn mv kr mw kv mx kz my ld mq mr ms mt bi translated"><code class="fe mh mi mj mk b">seeking</code> —寻道操作开始</li><li id="fa13" class="ml mm it ki b kj mu kn mv kr mw kv mx kz my ld mq mr ms mt bi translated"><code class="fe mh mi mj mk b">stalled</code>—一个用户代理试图获取媒体数据，但没有任何内容传入</li><li id="0468" class="ml mm it ki b kj mu kn mv kr mw kv mx kz my ld mq mr ms mt bi translated"><code class="fe mh mi mj mk b">suspend</code> —媒体数据加载已暂停</li><li id="fd78" class="ml mm it ki b kj mu kn mv kr mw kv mx kz my ld mq mr ms mt bi translated"><code class="fe mh mi mj mk b">timeupdate</code>—<code class="fe mh mi mj mk b">currentTime</code>属性指示的时间已经更新</li><li id="c388" class="ml mm it ki b kj mu kn mv kr mw kv mx kz my ld mq mr ms mt bi translated"><code class="fe mh mi mj mk b">volumechange</code> —音量已改变</li><li id="2da5" class="ml mm it ki b kj mu kn mv kr mw kv mx kz my ld mq mr ms mt bi translated"><code class="fe mh mi mj mk b">waiting</code> —由于暂时缺少数据，回放停止</li></ul></div></div>    
</body>
</html>