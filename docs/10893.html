<html>
<head>
<title>Adding Video Chat or Live Streaming to Your Website in 5 lines of Code Using the Agora Web UIKit</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Agora Web UIKit，用5行代码将视频聊天或直播添加到您的网站</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/adding-video-chat-or-live-streaming-to-your-website-in-5-lines-of-code-using-the-agora-web-uikit-ab1d2b0e5c61?source=collection_archive---------1-----------------------#2022-01-21">https://levelup.gitconnected.com/adding-video-chat-or-live-streaming-to-your-website-in-5-lines-of-code-using-the-agora-web-uikit-ab1d2b0e5c61?source=collection_archive---------1-----------------------#2022-01-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/76a4ce50ca9637ab021cc580c2786a1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fsc_hu4IDCZ3bX9yqW3xeA.png"/></div></div></figure><p id="7f6c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当你用Agora建立一个直播视频流或视频会议网站时，一些技术步骤可能会让你慢下来。现在有了Agora Web UIKit，您只需5行代码就可以轻松地将视频通话添加到您的网站上！它具有完整的启动功能，易于定制，并且可以扩展。</p><p id="b770" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">可以看一下<a class="ae kw" href="https://ekaansh.medium.com/agora-web-uikit-add-video-calling-or-live-streaming-to-your-website-in-minutes-2b635bb2601a" rel="noopener">发布博客</a>。如果你想深入了解技术，请继续阅读！</p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi kx"><img src="../Images/d887eacf3911e1490bf4fc0cd9d97f94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QZVzK_pHsQd0dV2S-E03Dw.png"/></div></div></figure><h1 id="e251" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">特征</h1><ul class=""><li id="7ffd" class="ma mb iq ka b kb mc kf md kj me kn mf kr mg kv mh mi mj mk bi translated">支持视频会议和直播</li><li id="7578" class="ma mb iq ka b kb ml kf mm kj mn kn mo kr mp kv mh mi mj mk bi translated">即插即用，开箱后无水印或商标</li><li id="24f1" class="ma mb iq ka b kb ml kf mm kj mn kn mo kr mp kv mh mi mj mk bi translated">桌面和移动设备的响应式布局</li><li id="f087" class="ma mb iq ka b kb ml kf mm kj mn kn mo kr mp kv mh mi mj mk bi translated">使用React属性的可定制UI和功能</li><li id="e9a3" class="ma mb iq ka b kb ml kf mm kj mn kn mo kr mp kv mh mi mj mk bi translated">自动管理令牌(使用双击服务器部署)</li><li id="4428" class="ma mb iq ka b kb ml kf mm kj mn kn mo kr mp kv mh mi mj mk bi translated">双流模式和主动说话人检测</li><li id="cd27" class="ma mb iq ka b kb ml kf mm kj mn kn mo kr mp kv mh mi mj mk bi translated">使用可重组的模块化功能组件构建</li><li id="47e6" class="ma mb iq ka b kb ml kf mm kj mn kn mo kr mp kv mh mi mj mk bi translated">类型脚本支持，没有第三方依赖性</li><li id="e1ac" class="ma mb iq ka b kb ml kf mm kj mn kn mo kr mp kv mh mi mj mk bi translated">支持用作web组件</li><li id="e424" class="ma mb iq ka b kb ml kf mm kj mn kn mo kr mp kv mh mi mj mk bi translated">每月10，000分钟免费通话</li></ul><p id="4705" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Agora Web UIKit是基于React构建的。如果你的网站使用普通JavaScript或不同的框架，如Svelte、Vue或Angular，你可以使用<a class="ae kw" href="https://github.com/AgoraIO-Community/Web-React-UIKit/tree/main/web-component" rel="noopener ugc nofollow" target="_blank"> UIKit作为web组件</a>！您可以跳到最后一节了解更多信息。</p><h1 id="c6b6" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">先决条件</h1><ul class=""><li id="4026" class="ma mb iq ka b kb mc kf md kj me kn mf kr mg kv mh mi mj mk bi translated">一个Agora开发者账户(免费–<a class="ae kw" href="https://sso.agora.io/en/signup?utm_source=medium&amp;utm_medium=blog&amp;utm_campaign=web-uikit-release-blog" rel="noopener ugc nofollow" target="_blank">在这里注册</a>！)</li><li id="15f7" class="ma mb iq ka b kb ml kf mm kj mn kn mo kr mp kv mh mi mj mk bi translated">Node.js LTS版本</li><li id="8ff6" class="ma mb iq ka b kb ml kf mm kj mn kn mo kr mp kv mh mi mj mk bi translated">使用React构建的网站</li><li id="70e9" class="ma mb iq ka b kb ml kf mm kj mn kn mo kr mp kv mh mi mj mk bi translated">现代网络浏览器</li></ul><h1 id="eaba" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">设置</h1><p id="0391" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj mq kl km kn mr kp kq kr ms kt ku kv ij bi translated">您可以在GitHub 上获得<a class="ae kw" href="https://github.com/AgoraIO-Community/Web-React-UIKit/tree/main/example" rel="noopener ugc nofollow" target="_blank">示例的代码。要使用Typescript创建React项目，您可以打开一个终端并执行:</a></p><pre class="ky kz la lb gt mt mu mv mw aw mx bi"><span id="09e9" class="my ld iq mu b gy mz na l nb nc">npx create-react-app demo --template typescript<br/>cd demo</span></pre><p id="2c87" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">也可以用自己的项目。安装来自NPM<a class="ae kw" href="https://www.npmjs.com/package/agora-react-uikit" rel="noopener ugc nofollow" target="_blank">的Agora Web UIKit】:</a></p><pre class="ky kz la lb gt mt mu mv mw aw mx bi"><span id="fe20" class="my ld iq mu b gy mz na l nb nc">npm i agora-react-uikit</span></pre><blockquote class="nd ne nf"><p id="1960" class="jy jz ng ka b kb kc kd ke kf kg kh ki nh kk kl km ni ko kp kq nj ks kt ku kv ij bi translated"><em class="iq">注:撰写本帖时，当前</em> <code class="fe nk nl nm mu b">agora-react-uikit</code> <em class="iq">发布为</em> <code class="fe nk nl nm mu b"><em class="iq">v0.0.5</em></code> <em class="iq">，当前</em> <code class="fe nk nl nm mu b">agora-rtc-sdk-ng</code> <em class="iq">发布为</em> <code class="fe nk nl nm mu b"><em class="iq">v4.8.1</em></code> <em class="iq">。</em></p></blockquote><p id="a0fd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这就是设计。您现在可以运行<code class="fe nk nl nm mu b">npm start</code>来启动React服务器，并在<code class="fe nk nl nm mu b">localhost:3000</code>访问hello world应用程序。</p><h1 id="8659" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">添加视频流</h1><p id="2a28" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj mq kl km kn mr kp kq kr ms kt ku kv ij bi translated">这个UIKit易于设置，包含一个名为<code class="fe nk nl nm mu b">AgoraUIKit</code>的高级组件。该组件处理我们实时视频体验的逻辑和UI。我们可以向组件传递属性来定制行为和功能。让我们清除<code class="fe nk nl nm mu b">App.tsx</code>文件，开始编写构建视频聊天应用程序的代码:</p><figure class="ky kz la lb gt jr"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="a166" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们正在从<code class="fe nk nl nm mu b">agora-react-uikit</code>包中导入<code class="fe nk nl nm mu b">AgoraUIKit</code>组件。在App组件内部，我们有一个状态变量<code class="fe nk nl nm mu b">videoCall</code>。我们将在UIKit组件设置为true时呈现它，当它为false时卸载它。我们在<code class="fe nk nl nm mu b">rtcProps</code>对象中定义Agora应用ID和频道名称以及我们的角色。同一信道上的用户可以相互通信。您可以使用任何字母数字字符串作为频道名称。</p><blockquote class="nd ne nf"><p id="f0b5" class="jy jz ng ka b kb kc kd ke kf kg kh ki nh kk kl km ni ko kp kq nj ks kt ku kv ij bi translated"><em class="iq">注意:</em>如果你的应用处于安全模式，你可以从Agora控制台生成一个令牌，并将其传入进行测试。我们一会儿会详细讨论如何使用令牌。</p></blockquote><p id="3da8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe nk nl nm mu b">callbacks</code>对象包含RTC事件作为键，回调函数作为它们的值——我们使用<code class="fe nk nl nm mu b">EndCall</code>事件来更新状态并卸载<code class="fe nk nl nm mu b">AgoraUIKit</code>组件:</p><figure class="ky kz la lb gt jr"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="55d2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在return语句中，我们用<code class="fe nk nl nm mu b">rtcProps</code>和<code class="fe nk nl nm mu b">callbacks</code>对象来呈现<code class="fe nk nl nm mu b">AgoraUIKit</code>组件。(卸载AgoraUIKit组件会自动执行所需的清理。)</p><p id="3a63" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">UIKit组件还接受第三个属性，称为<code class="fe nk nl nm mu b">styleProps</code>，可以通过编写React样式来定制应用程序的外观。您可以用自己的样式覆盖UIKit的每个部分(如按钮、视频和容器)的默认样式。</p><h1 id="dbc9" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">直播呢？</h1><p id="2c66" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj mq kl km kn mr kp kq kr ms kt ku kv ij bi translated">我们有一个视频会议网站准备发货。但现在让我们看看如何将它转换成一个直播应用程序，用户可以作为主持人或观众加入。主持人可以与频道中的每个人共享他们的音频和视频，而观众只能从其他主持人那里接收视频和音频:</p><figure class="ky kz la lb gt jr"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="213d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们添加两个新的状态变量:<code class="fe nk nl nm mu b">isHost</code>和<code class="fe nk nl nm mu b">isPinned</code>。<code class="fe nk nl nm mu b">isHost</code>变量将跟踪用户是主持人还是观众，而<code class="fe nk nl nm mu b">isPinned</code>变量用于在两个预先构建的布局之间切换:</p><figure class="ky kz la lb gt jr"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="d2c5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们可以用我们的状态来定义我们的<code class="fe nk nl nm mu b">rtcProps</code>。我们将角色道具添加到主持人和观众之间的<code class="fe nk nl nm mu b">rtcProps</code>开关中(默认角色是主持人)。UIKit道具是动态的。如果您更新了作为道具传递的状态，UIKit将对其做出反应(就像标准的react设计模式一样)。我们正在使用<code class="fe nk nl nm mu b">styleProps</code>改变底部工具条的背景颜色，这样我们就可以看到它是如何工作的了:</p><figure class="ky kz la lb gt jr"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="d9ca" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们将更新我们的UI来添加切换状态的按钮。我们还将把<code class="fe nk nl nm mu b">styleProps</code>添加到UIKit中。当我们的视频通话状态为假时，我们不返回null，而是添加一个<code class="fe nk nl nm mu b">&lt;h3&gt;</code>标签，以便在通话结束后通过更新我们的状态来开始通话。</p><p id="562c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你想跟进，这里有更新的样式:</p><figure class="ky kz la lb gt jr"><div class="bz fp l di"><div class="nn no l"/></div></figure><h1 id="bca5" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated"><strong class="ak">使用RtcProps定制功能</strong></h1><p id="fb3a" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj mq kl km kn mr kp kq kr ms kt ku kv ij bi translated">RtcProps对象允许您自定义UIKit的工作方式。您可以选择功能和布局。使用RtcProps可以定制的东西越来越多。对象类型定义可以在<a class="ae kw" href="https://agoraio-community.github.io/Web-React-UIKit/interfaces/RtcPropsInterface.html" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><h1 id="1068" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">令牌管理</h1><p id="e8bb" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj mq kl km kn mr kp kq kr ms kt ku kv ij bi translated">如果您在生产中使用Agora Web UIKit，我们强烈建议使用令牌来保护您的应用程序。有两种方法可以使用它们:如果您已经设置了一个令牌服务器，那么您可以使用<a class="ae kw" href="https://agoraio-community.github.io/Web-React-UIKit/interfaces/RtcPropsInterface.html#token" rel="noopener ugc nofollow" target="_blank">令牌</a>属性向UIKit手动提供一个令牌。</p><p id="490b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果没有令牌服务器，可以使用<a class="ae kw" href="https://agoraio-community.github.io/Web-React-UIKit/interfaces/RtcPropsInterface.html#tokenUrl" rel="noopener ugc nofollow" target="_blank"> tokenUrl </a>属性。这可用于自动获取信道的新接入令牌，并在令牌即将到期时对其进行更新。请求新令牌的功能要求令牌遵循GitHub上预建的Golang令牌服务器中的URL方案:<a class="ae kw" href="https://github.com/AgoraIO-Community/agora-token-service" rel="noopener ugc nofollow" target="_blank">AgoraIO-Community/agora-token-service</a>。你可以使用<a class="ae kw" href="https://www.heroku.com/deploy/?template=https://github.com/AgoraIO-Community/agora-token-service" rel="noopener ugc nofollow" target="_blank">这个链接</a>将它部署到Heroku。</p></div><div class="ab cl np nq hu nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="ij ik il im in"><h2 id="eec2" class="my ld iq bd le nw nx dn li ny nz dp lm kj oa ob lq kn oc od lu kr oe of ly og bi translated">使用不带React的Web UIKit</h2><p id="6aa8" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj mq kl km kn mr kp kq kr ms kt ku kv ij bi translated">Agora Web UIKit也可以作为一个Web组件，用于使用普通JavaScript或Angular、Vue或Avelte等框架构建的网站。要在您的网站上添加视频通话，只需将web组件作为脚本导入即可。然后，您可以通过传入Agora应用程序ID和频道名称来使用DOM中的web组件:</p><figure class="ky kz la lb gt jr"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="4a54" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您可以访问JS中的web组件元素并更新对象属性。这允许您以编程方式更新props，例如，这在构建按钮以更新实时流中的用户角色时非常有用。您可以为end call按钮添加事件侦听器，以处理用户单击该按钮时发生的事情。我们期待您的反馈，您可以为我们打开一个功能请求，以便在web组件版本中添加更多RTC事件。</p><p id="fc1c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">目前，web组件有一些限制。到目前为止，我们讨论的所有内容都是受支持的，但是下一部分是特定于React的。根据您的反馈，我们将在react版本中继续添加特性并支持这个版本的UIKit。</p></div><div class="ab cl np nq hu nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="ij ik il im in"><h1 id="dabd" class="lc ld iq bd le lf oh lh li lj oi ll lm ln oj lp lq lr ok lt lu lv ol lx ly lz bi translated">高级:重新组合UIKit</h1><p id="d136" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj mq kl km kn mr kp kq kr ms kt ku kv ij bi translated">如果您需要更好的控制，或者想要为您的应用程序构建一个定制的布局，而<code class="fe nk nl nm mu b">AgoraUIKit</code>组件还不支持，您可以提取并使用组成UIKit的各个组件，然后将它们重新组合在一起，构建您自己的定制解决方案，而不用担心管理SDK。</p><p id="93bb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">UIKit并不局限于使用<code class="fe nk nl nm mu b">AgoraUIKit</code>组件。它是由其他几个模块化组件组成的高级组件，很容易上手。您可以导入并使用各个部分来编写应用程序。</p><h2 id="5e5f" class="my ld iq bd le nw nx dn li ny nz dp lm kj oa ob lq kn oc od lu kr oe of ly og bi translated">RTC配置</h2><p id="d74c" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj mq kl km kn mr kp kq kr ms kt ku kv ij bi translated"><code class="fe nk nl nm mu b">RtcConfigure</code>组件包含视频呼叫的所有逻辑。它处理所有的SDK事件并维护应用程序的状态。您可以将其他UIKit组件包装在<code class="fe nk nl nm mu b">RtcConfigure</code>组件中，以访问用户对象。</p><p id="90d8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">它还设置了可用于访问Web SDK客户端对象的<code class="fe nk nl nm mu b">RtcContext</code>和包含远程轨道和本地轨道的<code class="fe nk nl nm mu b">mediaStore</code>(以及改变状态的调度函数)。</p><h2 id="c06a" class="my ld iq bd le nw nx dn li ny nz dp lm kj oa ob lq kn oc od lu kr oe of ly og bi translated">轨道配置</h2><p id="7107" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj mq kl km kn mr kp kq kr ms kt ku kv ij bi translated"><code class="fe nk nl nm mu b">TrackConfigure</code>组件处理为应用程序创建音频和视频轨道。</p><h2 id="b07f" class="my ld iq bd le nw nx dn li ny nz dp lm kj oa ob lq kn oc od lu kr oe of ly og bi translated">控制</h2><p id="2d20" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj mq kl km kn mr kp kq kr ms kt ku kv ij bi translated">UIKit导出一个包装了<code class="fe nk nl nm mu b">LocalAudioMute</code>、<code class="fe nk nl nm mu b">LocalVideoMute</code>和<code class="fe nk nl nm mu b">EndCall</code>按钮组件的<code class="fe nk nl nm mu b">LocalControls</code>组件。该库有一个<code class="fe nk nl nm mu b">RemoteAudioMute</code>、一个<code class="fe nk nl nm mu b">RemoteVideoMute</code>和一个<code class="fe nk nl nm mu b">SwapUser</code>(用最大用户交换用户)按钮。这些组件接受用户对象作为道具。</p><figure class="ky kz la lb gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi om"><img src="../Images/15ae8026808060721d5ffb8309ddfe93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-dAoGX4Fcec_oVV8H4NdPw.png"/></div></div></figure><blockquote class="nd ne nf"><p id="d35e" class="jy jz ng ka b kb kc kd ke kf kg kh ki nh kk kl km ni ko kp kq nj ks kt ku kv ij bi translated"><em class="iq">注:</em>遥控器只能在本地静音远程用户的音频和视频。这种变化不会反映给通话中的其他任何人。</p></blockquote><h2 id="a2c7" class="my ld iq bd le nw nx dn li ny nz dp lm kj oa ob lq kn oc od lu kr oe of ly og bi translated">视频视图</h2><p id="e295" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj mq kl km kn mr kp kq kr ms kt ku kv ij bi translated">为了渲染一个用户的视频，我们有两个组件:<code class="fe nk nl nm mu b">MaxVideoView</code>和<code class="fe nk nl nm mu b">MinVideoView</code>。两者都需要一个用户对象作为道具。用户数据分为两个不同的数组:<code class="fe nk nl nm mu b">MaxUser</code>和<code class="fe nk nl nm mu b">MinUser</code>。<code class="fe nk nl nm mu b">MaxUser</code>数组总是只包含一个用户；其他用户包含在<code class="fe nk nl nm mu b">MinUser</code>数组中。在固定布局的情况下，我们可以使用一个数组来呈现大视图，使用另一个数组来呈现视频列表。你不必与国家直接互动。例如，如果您想交换一个用户，您可以使用<code class="fe nk nl nm mu b">SwapUser</code>按钮，这将在内部改变状态。</p><p id="3437" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果您不想使用视图构建自己的布局，我们还提供了<code class="fe nk nl nm mu b">gridLayout</code>和<code class="fe nk nl nm mu b">pinnedLayout</code>组件。</p><h2 id="8c71" class="my ld iq bd le nw nx dn li ny nz dp lm kj oa ob lq kn oc od lu kr oe of ly og bi translated">道具上下文</h2><p id="40a4" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj mq kl km kn mr kp kq kr ms kt ku kv ij bi translated"><code class="fe nk nl nm mu b">PropsContext</code>使用React <a class="ae kw" href="https://reactjs.org/docs/context.html" rel="noopener ugc nofollow" target="_blank">上下文API </a>，它允许您访问提供者和消费者组件。总的来说，这些允许您访问我们传递给组件树中其他组件的属性。库用它来传递组件树中的<code class="fe nk nl nm mu b">rtcProps</code>、<code class="fe nk nl nm mu b">styleProps</code>和<code class="fe nk nl nm mu b">callbacks</code>。</p><h2 id="4859" class="my ld iq bd le nw nx dn li ny nz dp lm kj oa ob lq kn oc od lu kr oe of ly og bi translated">用户上下文</h2><p id="d737" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj mq kl km kn mr kp kq kr ms kt ku kv ij bi translated">通过<code class="fe nk nl nm mu b">MaxUidContext</code>，您可以在<code class="fe nk nl nm mu b">MaxView</code>(浮动布局中的主视图)中访问包含用户对象的数组。<code class="fe nk nl nm mu b">MinUidContext</code>让您可以访问<code class="fe nk nl nm mu b">MinView</code>中用户的对象数组(浮动布局中的顶部浮动视图)。<code class="fe nk nl nm mu b">LocalUserContext</code>让您可以访问本地用户的状态。</p><h1 id="d80a" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">重新作曲的示例</h1><p id="70b9" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj mq kl km kn mr kp kq kr ms kt ku kv ij bi translated">让我们通过构建自己的高级组件来看看所有这些组件的运行情况。为了清楚和便于解释，下面的例子省略了琐碎的细节(比如定义道具和样式)。如果需要更多信息，可以查看<code class="fe nk nl nm mu b">AgoraUIKit</code>组件。</p><figure class="ky kz la lb gt jr"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="0e74" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们将应用程序包装在<code class="fe nk nl nm mu b">&lt;PropsProvider&gt;</code>中，让其他组件访问props。如果用户是主持人，我们将<code class="fe nk nl nm mu b">&lt;VideoCallUI&gt;</code>包装在<code class="fe nk nl nm mu b">&lt;TracksConfigure&gt;</code>组件中，该组件创建并传递麦克风和摄像机轨迹。</p><p id="8d80" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe nk nl nm mu b">&lt;VideoCallUI&gt;</code>由<code class="fe nk nl nm mu b">&lt;RtcConfigure&gt;</code>包装，它包含我们视频通话或直播流的所有逻辑，还设置本地或远程用户状态。我们使用访问用户上下文的<code class="fe nk nl nm mu b">&lt;RenderVideos&gt;</code>组件旁边的<code class="fe nk nl nm mu b">&lt;LocalControls&gt;</code>来呈现控件底部栏，并使用映射到每个用户的<code class="fe nk nl nm mu b">&lt;MaxVideoView&gt;</code>组件来呈现视频。</p><h1 id="5be3" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">结论</h1><p id="3fc6" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj mq kl km kn mr kp kq kr ms kt ku kv ij bi translated">我们期待你的贡献。如果您有功能请求，请打开一个拉取请求。如果发现bug，请在GitHub问题上报告。我们也为<a class="ae kw" href="https://github.com/AgoraIO-Community/Android-UIKit" rel="noopener ugc nofollow" target="_blank"> Android </a>、<a class="ae kw" href="https://github.com/AgoraIO-Community/iOS-UIKit" rel="noopener ugc nofollow" target="_blank"> iOS </a>、<a class="ae kw" href="https://github.com/AgoraIO-Community/ReactNative-UIKit" rel="noopener ugc nofollow" target="_blank"> React Native </a>和<a class="ae kw" href="https://github.com/AgoraIO-Community/Flutter-UIKit" rel="noopener ugc nofollow" target="_blank"> Flutter </a>提供了类似的UIKits，所以也请务必查看这些UIKits。</p><p id="ebdd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果您在使用Web UIKit时有任何问题，我邀请您加入<a class="ae kw" href="https://agora.io/en/join-slack" rel="noopener ugc nofollow" target="_blank"> Agora开发者Slack社区</a>，您可以在<code class="fe nk nl nm mu b">#web-help-me channel</code>中提问。请随意在<a class="ae kw" href="https://github.com/AgoraIO-Community/Web-React-UIKit/issues" rel="noopener ugc nofollow" target="_blank"> GitHub Repo </a>上提出问题或报告错误。或者你可以在推特上联系我。</p></div></div>    
</body>
</html>