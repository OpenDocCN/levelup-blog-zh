<html>
<head>
<title>Learn how to create and deploy the angular application to AWS Serverless S3</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">了解如何创建angular应用程序并将其部署到AWS无服务器S3</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/learn-how-to-create-and-deploy-the-angular-application-to-aws-serverless-s3-81f8a838b563?source=collection_archive---------0-----------------------#2020-06-06">https://levelup.gitconnected.com/learn-how-to-create-and-deploy-the-angular-application-to-aws-serverless-s3-81f8a838b563?source=collection_archive---------0-----------------------#2020-06-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/5f86fac0656ef0ebb943d57b1d0c6b24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QDOjVHe5U-pTqeVSHZL3CA.png"/></div></div></figure><div class=""/><p id="b181" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在本帖中，我们将学习如何创建一个基本的angular应用程序，并在AWS S3服务中托管它们。</p><p id="9cce" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd jf">先决条件</strong></p><p id="b0fe" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">角度CLI</p><p id="3589" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">AWS帐户</p><p id="134d" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd jf">创建角度应用</strong></p><p id="4373" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">让我们从创建angular项目开始。首先，我们需要通过运行以下命令来安装最新版本的Angular CLI。</p><p id="bf3b" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd jf"> npm安装-g @angular/CLI </strong></p><p id="ad36" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">运行以上命令后，您可以通过运行ng版本来验证最新的CLI版本。它将显示如下版本</p><figure class="la lb lc ld gt iv gh gi paragraph-image"><div class="gh gi kz"><img src="../Images/6aea741fac5a584be8dbb9bbd9d741d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1172/format:webp/1*UnAjdrYV3Rxai1YS8W5v0A.png"/></div></figure><p id="e84d" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在，让我们创建一个新的角度应用程序。您可以导航到您想要创建角度项目的工作空间，并在下面运行命令</p><p id="5e15" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd jf"> ng新的MyFirstAngularApp </strong></p><p id="a951" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">它会提示你问两件事</p><p id="d29d" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">1)您是否想要添加路由Y/N？</p><p id="6d47" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">2)您希望使用哪种样式表格式？</p><p id="214d" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">对于这个例子，我们不会添加路由，我们将使用SCSS格式的样式表</p><p id="6e97" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">Angular CLI将开始安装所有必要的npm软件包，并在选定的工作区下创建Angular应用程序。如果您正在使用VS代码进行开发，您可以查看如下所示的工作区以及所有必要的文件</p><p id="a0a8" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">package.json文件具有所有必需的依赖项</p><p id="44da" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">angular.json文件包含所有必要的配置，以及输出文件和CSS样式路径</p><p id="f975" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">tsconfig.json定义编译typescript文件所需的编译器选项</p><p id="4c25" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">main.ts是启动应用程序的应用程序入口点</p><p id="55c0" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">将添加用于显示应用程序登录页面的初始app.component和app.module文件</p><figure class="la lb lc ld gt iv gh gi paragraph-image"><div class="gh gi le"><img src="../Images/94c8d7bf7f25ee8ae67ea217e4c709d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:854/format:webp/1*u7P8Sm3Tbo7y6rl61m1xxQ.png"/></div></figure><p id="c5e9" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd jf">构建应用程序并生成输出文件夹</strong></p><p id="ce4d" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们可以通过运行下面的命令来生成构建文件。它将生成angular.json文件中指定的输出文件夹。这个文件夹将用于AWS S3桶，我们将在本文后面看到。</p><p id="cfa9" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd jf">不良建造-生产</strong></p><p id="2efe" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">您可以验证angular.json文件中配置的输出路径</p><figure class="la lb lc ld gt iv gh gi paragraph-image"><div class="gh gi lf"><img src="../Images/ed4b3c7f922a233a8024674fd56e70e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:896/format:webp/1*gNOOpOHZ29wvTHvuqwCD9g.png"/></div></figure><p id="e8d3" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">成功构建应用程序后，dist/MyFirstAngularApp将输出如下文件</p><figure class="la lb lc ld gt iv gh gi paragraph-image"><div class="gh gi lg"><img src="../Images/1d2ee6d3a0e1ca27228a007760f9d256.png" data-original-src="https://miro.medium.com/v2/resize:fit:546/format:webp/1*7kR3IA-4v7Svj0shQ9MMog.png"/></div></figure><p id="33b7" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd jf">在本地主机上提供应用</strong></p><p id="796d" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">转到工作区，运行ng serve命令来构建应用程序，并在本地主机上启动开发服务器。通常，它在<a class="ae lh" href="http://localhost:4200/" rel="noopener ugc nofollow" target="_blank"> http://localhost:4200/ </a>上启动应用程序</p><p id="c610" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">您可以在浏览器中打开链接，并验证登录页面，如下所示</p><figure class="la lb lc ld gt iv gh gi paragraph-image"><div class="gh gi li"><img src="../Images/69d7b72c16abb4d4c9541c9b4da2d89a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*AAPdQ3ZBZ2ZDDZZDgT1hOA.png"/></div></figure><p id="0504" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd jf">将Angular app部署到AWS S3服务</strong></p><p id="920d" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">接下来，让我们将angular应用程序部署到无服务器S3服务中。为了继续，您需要一个AWS帐户。您可以在<a class="ae lh" href="https://aws.amazon.com/console/" rel="noopener ugc nofollow" target="_blank">https://aws.amazon.com/console/</a>上创建一个免费账户。根据他们的免费等级，他们在第一年提供许多免费服务。特别是对于S3，你可以在第一年免费获得以下内容</p><figure class="la lb lc ld gt iv gh gi paragraph-image"><div class="gh gi lj"><img src="../Images/fb3340ef1cf1096f8cf83727409862ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:554/format:webp/1*Ps1GHD_-t2wWPxG6oOcteg.png"/></div></figure><p id="87fa" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">成功创建帐户并登录后，您可以在服务-&gt;存储选项下导航到S3。第一步是创建一个S3存储段名称。存储桶名称在所有AWS帐户中都是唯一的，因此不应该选择通用名称，因为它可能会被采用。</p><p id="5a9c" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">此外，您需要明智地选择存储桶名称，因为S3以下面的格式公开URL</p><p id="c806" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">[存储桶名称]. S3-网站。【桶区】. amazonaws.com</p><p id="7bb2" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在存储段名称之后，您需要选择区域。选择更接近用户位置的区域是有意义的，这将为用户提供更快的应用性能。下面是我为我的铲斗定义的配置。</p><figure class="la lb lc ld gt iv gh gi paragraph-image"><div class="gh gi li"><img src="../Images/8220be14d036361231899c83907f9459.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*JSoiAtSVcWC7SA2J-bH9qQ.png"/></div></figure><p id="bfb3" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">让我们点击创建按钮，最终创建我们的S3桶。成功创建存储桶后，您可以在S3存储桶列表中找到它，如下所示</p><figure class="la lb lc ld gt iv gh gi paragraph-image"><div class="gh gi li"><img src="../Images/c1e1e16070f1617641f140588b5fed86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*D_KNVVgde8PPsUjosWZMXg.png"/></div></figure><p id="2886" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">单击新创建的bucket，然后单击properties选项卡。您将看到一个卡片列表。</p><figure class="la lb lc ld gt iv gh gi paragraph-image"><div class="gh gi li"><img src="../Images/a41b0707743ea021dd9a017b4d4a6f80.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*5GRvoFBh50CCYr2J-ZM2Ug.png"/></div></figure><p id="daff" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">点击“静态网站托管”卡，为我们的应用程序定义进入页面和错误页面。</p><p id="48ec" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">你会看到有三个选项，你需要选择“使用这个桶来托管一个网站”。这里，您需要定义索引和错误文档。在我们的例子中，我们将文档定义为一个index.html页面。</p><p id="9b4a" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">此外，您可以看到将在浏览器中启动应用程序的端点URL。</p><figure class="la lb lc ld gt iv gh gi paragraph-image"><div class="gh gi lk"><img src="../Images/6eef4793830e3c1ab53ec4fa7b6fb25b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1078/format:webp/1*g1W-pALFb-krcT1SQdfTxw.png"/></div></figure><p id="c85f" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">让我们单击Save并点击带有给定端点URL的浏览器。在这个阶段，我们得到了以下403个禁止的错误。原因是默认情况下，所有S3存储桶策略都是私有的，这将使所有用户都无法访问应用程序。</p><figure class="la lb lc ld gt iv gh gi paragraph-image"><div class="gh gi li"><img src="../Images/7c0f29bbc8b5933942398131fb310823.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*NYHIUg1cYuY6siJ567G3vg.png"/></div></figure><p id="bdbf" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们可以在“bucket policy”选项卡下管理bucket策略，并向所有用户授予公共访问权限。</p><p id="cbd9" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">首先，让我们转到“权限”选项卡，然后单击“编辑”按钮。这里，以下两个选项“通过新公共桶阻止公共访问”和“通过新公共桶阻止公共和跨帐户访问”默认设置为真。让我们取消选中它们，然后单击保存。</p><figure class="la lb lc ld gt iv gh gi paragraph-image"><div class="gh gi li"><img src="../Images/67c07cef4026c3640615967f0bc19de9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*__S8C4q0YxyA-BnlNC572g.png"/></div></figure><p id="d63f" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">接下来，您需要应用一个策略，允许匿名用户访问我们的数据。我们可以复制以下策略，并将其粘贴到“管理存储桶策略”部分。您需要在JSON对象的Resource属性中使用当前已有的bucket来更改bucket名称。</p><figure class="la lb lc ld gt iv gh gi paragraph-image"><div class="gh gi ll"><img src="../Images/86e9f10c07432a6145e6bd86b695eca9.png" data-original-src="https://miro.medium.com/v2/resize:fit:978/format:webp/1*7VSIFYKdu5X25qvwI5Oc8Q.png"/></div></figure><p id="c20b" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我已经更新了存储桶策略，如下所示。此外，为了防止任何安全问题，只授予用户<strong class="kd jf"> GetObject </strong>权限，而不授予上传、删除等任何类型的编辑权限，这一点非常重要。</p><figure class="la lb lc ld gt iv gh gi paragraph-image"><div class="gh gi li"><img src="../Images/eb0ec42d6d134f51ed399d7eb636fd6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*L34LKvxTOYAa5-XrlclV0A.png"/></div></figure><p id="c9ac" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd jf">展开角形构建</strong></p><p id="d72c" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在让我们复制我们最初在文章中讨论的在dist/MyFirstAngularApp路径下生成的angular构建输出，并将其上传到S3。</p><figure class="la lb lc ld gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi li"><img src="../Images/8efa3fe4717e564232b1852bd1b8612b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*iirb6qkelPlL2lK-A9Ajrg.png"/></div></div></figure><figure class="la lb lc ld gt iv gh gi paragraph-image"><div class="gh gi li"><img src="../Images/bf1bb28787dfeb88700a006b3b42bfeb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*YdSnndatSuVLEKzBq4MgTw.png"/></div></figure><p id="6963" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">文件成功上传后，您可以导航到S3端点URL，并验证应用程序是否启动并运行</p><p id="1cbb" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><a class="ae lh" rel="noopener ugc nofollow" target="_blank" href="/[Your-BucketName].s3-website-[Your-BucketRegion].amazonaws.com/">[Your-bucket name]. S3-website-[Your-bucket region]. Amazon AWS . com</a></p><figure class="la lb lc ld gt iv gh gi paragraph-image"><div class="gh gi lm"><img src="../Images/56933dcf2f9c2e602728fede9e3a8e76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1246/format:webp/1*EkybyDiCpctr5bVpEizQEA.png"/></div></figure><p id="35dd" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">恭喜，我们刚刚创建了我们的第一个angular应用程序，并将其部署在AWS无服务器S3。我希望你喜欢这篇文章。</p></div></div>    
</body>
</html>