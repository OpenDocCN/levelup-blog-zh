<html>
<head>
<title>Useful JavaScript Tips — Variables, File Names, and Console</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">有用的JavaScript技巧—变量、文件名和控制台</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/useful-javascript-tips-variables-file-names-and-console-f1534bc6b44d?source=collection_archive---------33-----------------------#2020-06-29">https://levelup.gitconnected.com/useful-javascript-tips-variables-file-names-and-console-f1534bc6b44d?source=collection_archive---------33-----------------------#2020-06-29</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/75a635a63c15057f263a258b7b4628ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2qjosI7FmSXQv0oj"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">照片由<a class="ae kf" href="https://unsplash.com/@s1awek?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Slawek</a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="938a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">像任何类型的应用程序一样，JavaScript应用程序也必须写得很好。否则，我们以后会遇到各种各样的问题。</p><p id="96a1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本文中，我们将了解一些应该遵循的技巧，以便更快更好地编写JavaScript代码。</p><h1 id="3c50" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">var和let</h1><p id="d108" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated"><code class="fe mh mi mj mk b">var</code>是函数范围的，<code class="fe mh mi mj mk b">let</code>是块范围的。</p><p id="5225" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">var</code>被吊起<code class="fe mh mi mj mk b">let</code>未被吊起。</p><p id="c7ff" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">只提升了变量，但没有提升值。</p><p id="7edc" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，如果我们有:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="9ca6" class="mt lf it mk b gy mu mv l mw mx">console.log(x);<br/>var x = 1;</span></pre><p id="30a9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">那么<code class="fe mh mi mj mk b">x</code>将是<code class="fe mh mi mj mk b">undefined</code>，因为<code class="fe mh mi mj mk b">var x</code>被提升而1没有被提升。</p><p id="d91a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">另一方面，我们不能用<code class="fe mh mi mj mk b">let</code>做同样的事情:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="3f2b" class="mt lf it mk b gy mu mv l mw mx">console.log(x);<br/>let x = 1;</span></pre><p id="450e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">上面的代码会出错，因为我们不能使用<code class="fe mh mi mj mk b">let</code>变量，除非它们已经被声明。</p><p id="b221" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了减少混乱，我们应该使用<code class="fe mh mi mj mk b">let</code>变量。</p><h1 id="1048" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">中断forEach迭代</h1><p id="0840" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以在传递给<code class="fe mh mi mj mk b">forEach</code>的回调函数中返回<code class="fe mh mi mj mk b">true</code>来跳过一次迭代。</p><p id="07db" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这样，我们可以拥有与<code class="fe mh mi mj mk b">continue</code>相同的功能。</p><p id="bba3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="e40b" class="mt lf it mk b gy mu mv l mw mx">[0, 1, 2, 3, 4].forEach((val, i) =&gt; {<br/>  if (val === 2) {<br/>    return true;<br/>  }<br/>  console.log(val);<br/>});</span></pre><p id="7585" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">关于的代码将跳过2，因为当<code class="fe mh mi mj mk b">val</code>为2时，我们返回<code class="fe mh mi mj mk b">true</code>。,</p><p id="5af6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">所以我们跳过了它下面的控制台日志。</p><h1 id="34e0" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">使用切片</h1><p id="96e4" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated"><code class="fe mh mi mj mk b">slice</code>方法可用于从数组中获取数组条目。</p><p id="69ab" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以从负索引开始，从右边而不是左边返回数组条目。</p><p id="a732" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">所以如果我们有:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="de7d" class="mt lf it mk b gy mu mv l mw mx">const arr = [1, 2, 3];</span></pre><p id="1d6f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="b9ff" class="mt lf it mk b gy mu mv l mw mx">arr.slice(-1)</span></pre><p id="8540" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">返回<code class="fe mh mi mj mk b">[3]</code>。</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="1b77" class="mt lf it mk b gy mu mv l mw mx">arr.slice(-2))</span></pre><p id="092e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">返回<code class="fe mh mi mj mk b">[2, 3]</code>。</p><p id="1808" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">并且:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="6723" class="mt lf it mk b gy mu mv l mw mx">arr.slice(-3)</span></pre><p id="96f1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">返回原始数组。</p><p id="8371" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这是因为<code class="fe mh mi mj mk b">-1</code>是数组最后一个元素的索引。</p><p id="6040" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">-2</code>是倒数第二等等。</p><h1 id="2fc5" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">短路条件</h1><p id="c041" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">短路条件很方便，因为我们可以用<code class="fe mh mi mj mk b">&amp;&amp;</code>和<code class="fe mh mi mj mk b">||</code>做一些我们可能想不到的事情。</p><p id="f02e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，不写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="5148" class="mt lf it mk b gy mu mv l mw mx">if(condition){<br/>    dosomething();<br/>}</span></pre><p id="009a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="4299" class="mt lf it mk b gy mu mv l mw mx">condition &amp;&amp; dosomething();</span></pre><p id="c33c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因为<code class="fe mh mi mj mk b">doSomething</code>仅在<code class="fe mh mi mj mk b">condition</code>与<code class="fe mh mi mj mk b">&amp;&amp;</code>操作器一致时运行。</p><p id="6f86" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">同样，我们可以利用<code class="fe mh mi mj mk b">||</code>操作符的短路。</p><p id="4ce3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="6bf4" class="mt lf it mk b gy mu mv l mw mx">a = a || 'default';</span></pre><p id="13c1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因为如果<code class="fe mh mi mj mk b">a</code>为真，则<code class="fe mh mi mj mk b">a</code>被分配给<code class="fe mh mi mj mk b">a</code>。</p><p id="9e7f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">否则，<code class="fe mh mi mj mk b">'default'</code>被分配给<code class="fe mh mi mj mk b">a</code>。</p><h1 id="a95f" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">使用可选参数</h1><p id="6ad4" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以用默认的参数语法使参数可选。</p><p id="a88d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="b7f9" class="mt lf it mk b gy mu mv l mw mx">const divide = (a, b = 1) =&gt; a / b;</span></pre><p id="5025" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果我们跳过参数，那么<code class="fe mh mi mj mk b">b</code>将被赋值为1。</p><p id="30ea" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">所以<code class="fe mh mi mj mk b">divide(2)</code>应该是2。</p><h1 id="9eaa" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">将内容复制到剪贴板</h1><p id="5159" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以从剪贴板中获取元素，并通过编写以下内容来复制其内容:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="022b" class="mt lf it mk b gy mu mv l mw mx">document.querySelector('#foo').select();<br/>document.execCommand('copy');</span></pre><p id="6f02" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">第一行选择ID为<code class="fe mh mi mj mk b">foo</code>的元素。</p><p id="daca" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后第二行进行复制。</p><h1 id="03ff" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">从文件名中提取文件扩展名</h1><p id="0514" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">有几种方法可以从文件名中提取文件扩展名</p><h2 id="d9e2" class="mt lf it bd lg my mz dn lk na nb dp lo kr nc nd ls kv ne nf lw kz ng nh ma ni bi translated">正则表达式</h2><p id="a203" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">例如，我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="7d71" class="mt lf it mk b gy mu mv l mw mx">const getExt = (filename) =&gt; {<br/>  return (/[.]/.exec(filename)) ? /[^.]+$/.exec(filename)[0] : undefined;<br/>}</span></pre><p id="878a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们有一个正则表达式来按点分割文件名。然后我们得到带<code class="fe mh mi mj mk b">/[^.]+$/.exec(filename)[0]</code>的点之后的部分，如果没有点，则得到<code class="fe mh mi mj mk b">undefined</code>的部分。</p><h2 id="18c9" class="mt lf it bd lg my mz dn lk na nb dp lo kr nc nd ls kv ne nf lw kz ng nh ma ni bi translated">使分离</h2><p id="bff7" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">此外，我们可以使用<code class="fe mh mi mj mk b">split</code>方法按点分割文件名。</p><p id="6b87" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="fbb9" class="mt lf it mk b gy mu mv l mw mx">const getExt = (filename) =&gt; {<br/>  return filename.split('.').pop();<br/>}</span></pre><p id="6615" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一个字符串有一个<code class="fe mh mi mj mk b">split</code>方法，它可以用分隔符分割一个字符串，并将其作为一个字符串数组返回。</p><p id="a61c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们调用<code class="fe mh mi mj mk b">pop</code>移除拆分字符串的最后一部分并返回。</p><p id="58a0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因此，我们得到了扩展。</p><h1 id="432f" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">控制台日志技巧</h1><p id="c815" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以使用<code class="fe mh mi mj mk b">&amp;&amp;</code>在计算控制台日志之后的表达式之前运行控制台日志。</p><p id="048a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因为<code class="fe mh mi mj mk b">console.log</code>返回<code class="fe mh mi mj mk b">undefined</code>，所以右操作数总是被求值。</p><p id="7dbe" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">所以我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="7a60" class="mt lf it mk b gy mu mv l mw mx">console.log(foo) &amp;&amp; false</span></pre><p id="d0f9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们在一个表达式中记录了<code class="fe mh mi mj mk b">foo</code>的值并返回了<code class="fe mh mi mj mk b">false</code>。</p><h1 id="a492" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">将功能打印到控制台</h1><p id="de6f" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以将一个函数转换成一个字符串来打印出函数的代码。</p><p id="e6c3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="9115" class="mt lf it mk b gy mu mv l mw mx">console.log(func.toString());</span></pre><p id="5800" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这样，我们可以在控制台日志中看到该函数的代码。</p><figure class="ml mm mn mo gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nj"><img src="../Images/80ab425b2cb6d9e262abb370155d85f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*YOcCNLpmdiE2-FjL"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated"><a class="ae kf" href="https://unsplash.com/@j_b_foto?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">拍摄的照片</a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上</figcaption></figure><h1 id="4847" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">结论</h1><p id="5f49" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以用<code class="fe mh mi mj mk b">toString</code>和<code class="fe mh mi mj mk b">console.log</code>方法记录一个函数的代码。</p><p id="211c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">此外，我们可以使用<code class="fe mh mi mj mk b">&amp;&amp;</code>操作符在计算其他表达式之前记录一个值。</p><p id="d191" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">从文件名中获取文件扩展名也有多种方法。</p><p id="6e96" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最后，要尽量使用<code class="fe mh mi mj mk b">let</code>来声明变量。</p></div></div>    
</body>
</html>