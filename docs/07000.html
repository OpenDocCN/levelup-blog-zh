<html>
<head>
<title>Learning SQL: Querying Data with Joins Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">学习SQL:用连接查询数据第1部分</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/learning-sql-querying-data-with-joins-part-1-9efcf1ce8666?source=collection_archive---------24-----------------------#2021-01-17">https://levelup.gitconnected.com/learning-sql-querying-data-with-joins-part-1-9efcf1ce8666?source=collection_archive---------24-----------------------#2021-01-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/6ff92c5d7da9db131a3b851cf393ae81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6pd6TGoA2ZxHgV6A"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated"><a class="ae kf" href="https://unsplash.com/@mangofantasy?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">蒂姆·约翰逊</a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</figcaption></figure><p id="2bb7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">到目前为止，在我学习SQL的文章中，我已经演示了如何只使用一个表来查询数据。但是SQL的主要特性之一是能够查询存储在多个表中的数据。在SQL中执行这些类型的查询的方式是使用一个<em class="le">连接</em>。联接是一种查询，它使用组合相关的多个表中的列来返回单个行结果集。在本文中，我将介绍JOIN子句以及如何在SELECT语句中使用它。</p><h1 id="a45e" class="lf lg it bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">为连接准备好数据库</h1><p id="c72b" class="pw-post-body-paragraph kg kh it ki b kj md kl km kn me kp kq kr mf kt ku kv mg kx ky kz mh lb lc ld im bi translated">到目前为止，我只开发了学生数据库中的一个表——人口统计表。我至少需要再添加几个表，以使我的连接示例有意义。我要创建的第一个表是一个courses taken表，它列出了一个学生所学的所有课程。下面是我为添加该表而编写的SQL:</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="9313" class="mr lg it mn b gy ms mt l mu mv">sqlite&gt; create table courses_taken (<br/>...&gt; id int not null,<br/>...&gt; course_id text not null);</span></pre><p id="f227" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这是我创建的另一个表，它存储了每门课程的更多信息:</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="8d04" class="mr lg it mn b gy ms mt l mu mv">sqlite&gt; create table course_info (<br/>...&gt; course_id text not null,<br/>...&gt; course_title text not null,<br/>...&gt; course_instructor text not null);</span></pre><h1 id="37b7" class="lf lg it bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">连接如何工作</h1><p id="9de0" class="pw-post-body-paragraph kg kh it ki b kj md kl km kn me kp kq kr mf kt ku kv mg kx ky kz mh lb lc ld im bi translated">联接用于通过使用相关列来组合两个或多个不同表中的数据。例如，通过使用id列将demographics表与courses_taken相结合，我可以得到一个包含学生姓名和他或她所学课程的结果集。</p><p id="d73a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最常见的连接类型称为<em class="le">内部连接</em>。对于内部联接，比较运算符用于根据两个表中的公共值来匹配这两个表中的行。我将在本文中关注内部连接，并在以后的文章中讨论一些其他的连接类型。</p><p id="a4a2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">有两种方法可以执行内部联接。第一种方法是使用INNER JOIN子句。以下是该表单的语法模板:</p><p id="af5a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="le">在column-from-table 1 = column-from-table 2</em>上从表1 <br/>内连接表2 <br/>中选择列<br/></p><p id="a035" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">执行内部连接的第二种方法是使用WHERE子句。以下是这种连接形式的语法模板:</p><p id="4494" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="le">从表1别名1、表2别名2 <br/>中选择列<br/>，其中column-from-table 1 = column-from-table 2</em></p><p id="9a97" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这是第一个例子。我的查询将使用WHERE子句返回在courses_taken表中有条目的所有学生的姓氏和课程id(目前只有两个学生，但我将添加更多)。以下是查询和结果集:</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="6460" class="mr lg it mn b gy ms mt l mu mv">sqlite&gt; select last_name, course_id from demographics d, <br/>courses_taken c<br/>...&gt; where d.id = c.id;<br/>Fehrenbach|BIOL1004<br/>Fehrenbach|ENGL1003<br/>Fehrenbach|MATH1003<br/>Fehrenbach|PHIL1003<br/>Stanton|ENGL1003<br/>Stanton|ENGL1013<br/>Stanton|MATH1003</span></pre><p id="ef04" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">请注意，我使用单个字母作为表别名。这不是必需的，您可以使用任何想要的别名。我倾向于使用单个字母来保持查询的简洁和易读。您可能希望使用更具描述性的别名，这当然是可以接受的(甚至可能是需要的)。</p><p id="bf9a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，我将使用INNER JOIN子句编写相同的查询。以下是查询和结果集:</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="26d8" class="mr lg it mn b gy ms mt l mu mv">sqlite&gt; select last_name, course_id from demographics d<br/>...&gt; inner join courses_taken c<br/>...&gt; on d.id = c.id;<br/>Fehrenbach|BIOL1004<br/>Fehrenbach|ENGL1003<br/>Fehrenbach|MATH1003<br/>Fehrenbach|PHIL1003<br/>Stanton|ENGL1003<br/>Stanton|ENGL1013<br/>Stanton|MATH1003</span></pre><p id="dea4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这两种版本都可以接受，如何编写连接完全取决于您的个人偏好。</p><h1 id="7464" class="lf lg it bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">用USING子句连接表</h1><p id="72de" class="pw-post-body-paragraph kg kh it ki b kj md kl km kn me kp kq kr mf kt ku kv mg kx ky kz mh lb lc ld im bi translated">编写join语句的另一种方法是使用USING子句。这种类型的连接的语法模板如下所示:</p><p id="99c6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="le">使用(列名)</em>从表名<br/>内部连接表名<br/>中选择列名<br/></p><p id="8261" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们使用这个表单直接重写上面的查询。下面是语句和结果集:</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="f9c4" class="mr lg it mn b gy ms mt l mu mv">sqlite&gt; select last_name, course_id<br/>...&gt; from demographics<br/>...&gt; inner join courses_taken<br/>...&gt; using (id);<br/>Fehrenbach|BIOL1004<br/>Fehrenbach|ENGL1003<br/>Fehrenbach|MATH1003<br/>Fehrenbach|PHIL1003<br/>Stanton|ENGL1003<br/>Stanton|ENGL1013<br/>Stanton|MATH1003</span></pre><p id="72bc" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这是另一个例子。这一次，我将把courses_taken表与course_info表连接起来，以查看到目前为止哪些教师教授学生所学的课程:</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="f50d" class="mr lg it mn b gy ms mt l mu mv">sqlite&gt; select course_id, course_title, course_instructor<br/>...&gt; from course_info<br/>...&gt; inner join courses_taken<br/>...&gt; using (course_id);<br/>ENGL1003|English Comp 1|Oliver<br/>ENGL1003|English Comp 1|Oliver<br/>ENGL1013|English Comp 2|Purkiss<br/>MATH1003|College Algebra|Rathfon<br/>MATH1003|College Algebra|Rathfon<br/>BIOL1004|Biology 1|Rains</span></pre><h1 id="a715" class="lf lg it bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">交叉连接</h1><p id="a9a1" class="pw-post-body-paragraph kg kh it ki b kj md kl km kn me kp kq kr mf kt ku kv mg kx ky kz mh lb lc ld im bi translated">交叉联接是返回两个表的行的所有不同可能组合的联接。结果返回第一个表中的所有行，第一个表中的每一行都与第二个表中的所有行相结合。</p><p id="30d3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下面是交叉连接的语法模板:</p><p id="0595" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="le">从表1 <br/>交叉连接表2 </em>中选择列<br/></p><p id="f65e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了演示交叉连接的结果，我将首先显示我将用于交叉连接的两个表的行:</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="0740" class="mr lg it mn b gy ms mt l mu mv">sqlite&gt; select * from demographics;<br/>1234|Cynthia|Fehrenbach|Little Rock|1988-02-09|Graphic Arts|3.64|45<br/>1231|Raymond|Williams|Sheridan|1985-12-07|Classics|2.43|32<br/>2314|Danny|Martin|Greenbrier|1978-06-12|Information Technology|3.27|43<br/>2143|Jonathan|Childs|Hot Springs|1988-05-13|Film and Sound|3.52|27<br/>3124|Meredith|Stanton|Maumelle|1985-06-03|English|3.72|53<br/>2341|Jessica|Wise|North Little Rock|1984-08-01|English|3.55|14<br/>4213|Mindy|Hodges|North Little Rock|1984-12-23|Economics|3.71|24<br/>3214|Dorothy|Martin|Greenbrier|1979-10-11|Classics|3.11|17<br/>4321|Kate|Earney|Little Rock|1985-01-02|Economics|3.55|23<br/>4231|Logan|Oliver|North Little Rock|1983-03-30|Graphic Arts|3.07|33<br/>5123|Jeff|Williams|Maumelle|1979-12-22|Philosophy|3.99|43</span><span id="d1a7" class="mr lg it mn b gy mw mt l mu mv">sqlite&gt; select * from course_info;<br/>ENGL1003|English Comp 1|Oliver<br/>ENGL1013|English Comp 2|Purkiss<br/>MATH1003|College Algebra|Rathfon<br/>MATH1013|Trigonometry|Hammett<br/>BIOL1004|Biology 1|Rains<br/>BIOL1014|Biology 2|Querns</span></pre><p id="8ff5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下面是我交叉连接人口统计表和course_info表时的查询和结果:</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="6963" class="mr lg it mn b gy ms mt l mu mv">sqlite&gt; select last_name, course_id, course_title<br/>...&gt; from demographics<br/>...&gt; cross join course_info<br/>...&gt; ;<br/>Fehrenbach|ENGL1003|English Comp 1<br/>Fehrenbach|ENGL1013|English Comp 2<br/>Fehrenbach|MATH1003|College Algebra<br/>Fehrenbach|MATH1013|Trigonometry<br/>Fehrenbach|BIOL1004|Biology 1<br/>Fehrenbach|BIOL1014|Biology 2<br/>Williams|ENGL1003|English Comp 1<br/>Williams|ENGL1013|English Comp 2<br/>Williams|MATH1003|College Algebra<br/>Williams|MATH1013|Trigonometry<br/>Williams|BIOL1004|Biology 1<br/>Williams|BIOL1014|Biology 2<br/>Martin|ENGL1003|English Comp 1<br/>Martin|ENGL1013|English Comp 2<br/>Martin|MATH1003|College Algebra<br/>Martin|MATH1013|Trigonometry<br/>Martin|BIOL1004|Biology 1<br/>Martin|BIOL1014|Biology 2<br/>Childs|ENGL1003|English Comp 1<br/>Childs|ENGL1013|English Comp 2<br/>Childs|MATH1003|College Algebra<br/>Childs|MATH1013|Trigonometry<br/>Childs|BIOL1004|Biology 1<br/>Childs|BIOL1014|Biology 2<br/>Stanton|ENGL1013|English Comp 2<br/>Stanton|MATH1003|College Algebra<br/>Stanton|MATH1013|Trigonometry<br/>Stanton|BIOL1004|Biology 1<br/>Stanton|BIOL1014|Biology 2<br/>Wise|ENGL1003|English Comp 1<br/>Wise|ENGL1013|English Comp 2<br/>Wise|MATH1003|College Algebra<br/>Wise|MATH1013|Trigonometry<br/>Wise|BIOL1004|Biology 1<br/>Wise|BIOL1014|Biology 2<br/>Hodges|ENGL1003|English Comp 1<br/>Hodges|ENGL1013|English Comp 2<br/>Hodges|MATH1003|College Algebra<br/>Hodges|MATH1013|Trigonometry<br/>Hodges|BIOL1014|Biology 2<br/>Martin|ENGL1003|English Comp 1<br/>Martin|ENGL1013|English Comp 2<br/>Martin|MATH1003|College Algebra<br/>Martin|MATH1013|Trigonometry<br/>Martin|BIOL1004|Biology 1<br/>Martin|BIOL1014|Biology 2<br/>Earney|ENGL1003|English Comp 1<br/>Earney|ENGL1013|English Comp 2<br/>Earney|MATH1003|College Algebra<br/>Earney|MATH1013|Trigonometry<br/>Earney|BIOL1004|Biology 1<br/>Earney|BIOL1014|Biology 2<br/>Oliver|ENGL1003|English Comp 1<br/>Oliver|ENGL1013|English Comp 2<br/>Oliver|MATH1003|College Algebra<br/>Oliver|MATH1013|Trigonometry<br/>Oliver|BIOL1004|Biology 1<br/>Oliver|BIOL1014|Biology 2<br/>Williams|ENGL1003|English Comp 1<br/>Williams|ENGL1013|English Comp 2<br/>Williams|MATH1013|Trigonometry<br/>Williams|BIOL1004|Biology 1<br/>Williams|BIOL1014|Biology 2</span></pre><p id="2b65" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">交叉连接在实践中不常使用，因为结果集很麻烦，输出很难理解和解释。很少使用交叉连接的另一个原因是因为结果集通常很大，即使对于只有少量记录的表也是如此。</p><p id="04b9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">但是，在执行更好的查询之前，交叉连接有时用于中间结果。</p><p id="3497" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这是关于SQL连接的第一篇文章。在我的下一篇文章中，我将讨论更复杂、更有用的SQL连接查询。</p><p id="84d5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">感谢您的阅读，请回复本文或发邮件至mmmcmillan1@att.net<a class="ae kf" href="mailto:mmmcmillan1@att.net" rel="noopener ugc nofollow" target="_blank">告诉我您的意见和建议。</a></p></div></div>    
</body>
</html>