<html>
<head>
<title>Utilize Port Forwarding to Access MySQL Database in Another Private Network</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">利用端口转发访问另一个专用网络中的MySQL数据库</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/utilize-port-forwarding-to-access-mysql-database-in-another-private-network-d58d2e4f358c?source=collection_archive---------4-----------------------#2021-04-05">https://levelup.gitconnected.com/utilize-port-forwarding-to-access-mysql-database-in-another-private-network-d58d2e4f358c?source=collection_archive---------4-----------------------#2021-04-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="5c09" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">动手操作您的Golang应用程序如何做到这一点</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/cbf98ee9f8aaae974a82f25ef8608b82.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*TfoQgaOHFzghc-9J"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@gaellemarcel?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">盖尔·马塞尔</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="b300" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有时，您必须开发一个应用程序，在一些专用网络中与数据库进行交互。您的开发服务器不能直接访问数据库(在本例中是MySQL ),因为它位于另一个私有网络中。要访问它，您必须首先在专用网络中使用公共IP访问另一个服务器，然后从那里，您可以远程访问数据库服务器。为了更容易理解，这里是我们讨论的条件的图表。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ls"><img src="../Images/071fefada1abde4ca1aca517de1a5976.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KHPaOG5mNyNRf6C0I7AJhA.png"/></div></div></figure><p id="0d82" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这篇文章中，我将演示如何在你的应用中访问数据库。在这种情况下，我将使用Golang 。这里按部就班地说:</p><h2 id="2a91" class="lt lu iq bd lv lw lx dn ly lz ma dp mb lf mc md me lj mf mg mh ln mi mj mk ml bi translated"><strong class="ak">做一个SSH隧道</strong></h2><p id="250e" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf mo lh li lj mp ll lm ln mq lp lq lr ij bi translated">在这种情况下，我们将使用端口转发。命令是</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="73b3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里的<code class="fe mt mu mv mw b">-L</code>意味着我们将为这个隧道绑定<code class="fe mt mu mv mw b">local_port</code>，这里的<code class="fe mt mu mv mw b">3306</code>是MySQL的默认端口。如果你的MySQL使用不同的端口，就用那个端口代替<code class="fe mt mu mv mw b">3306</code>。<code class="fe mt mu mv mw b">database_local_ip</code>是私有网络中数据库服务器的IP地址。<strong class="ky ir">如果MySQL在公共服务器上，命令是</strong></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="a4f5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">想象一下，你在公共IP的服务器上运行应用程序。从那个服务器的角度来看数据库服务器IP是什么，那就是你如何确定<code class="fe mt mu mv mw b">database_local_ip</code>。</p><p id="e779" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当您运行这个命令时，<strong class="ky ir">到您的开发服务器<strong class="ky ir">的本地主机中的</strong> <code class="fe mt mu mv mw b">local_port</code>的所有连接将被定向到私有网络</strong>中的数据库服务器。</p><p id="dc8b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">额外提示</strong>当您使用SSH成功连接时，运行<code class="fe mt mu mv mw b">ping google.com</code>，或者ping您想要的任何地址，<strong class="ky ir">以保持连接有效</strong>。</p><h2 id="e29f" class="lt lu iq bd lv lw lx dn ly lz ma dp mb lf mc md me lj mf mg mh ln mi mj mk ml bi translated">编写通过本地主机访问数据库的代码</h2><p id="4253" class="pw-post-body-paragraph kw kx iq ky b kz mm jr lb lc mn ju le lf mo lh li lj mp ll lm ln mq lp lq lr ij bi translated">网络端的所有准备工作都完成了，现在我们写代码。使用Go玩MySQL的主要代码是</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="bfcc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">将<code class="fe mt mu mv mw b">line 12</code>改为这个</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="8aa3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">其中<code class="fe mt mu mv mw b">local_port</code>与前面SSH命令中的<code class="fe mt mu mv mw b">local_port</code>相同。<code class="fe mt mu mv mw b">username</code>和<code class="fe mt mu mv mw b">password</code>是MySQL的用户名和密码。因此，当你的应用通过<code class="fe mt mu mv mw b">local_port</code>、<strong class="ky ir">端口中的本地主机连接时，该连接将通过端口3306被定向到</strong>(假设你的MySQL使用默认端口)。看起来你试图连接你的本地MySQL，但事实并非如此。</p><p id="b682" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这就是如何从另一个私有网络访问MySQL。另一个提示是<strong class="ky ir">如果端口转发失败，那么无论什么查询</strong>，结果查询都将返回nil。我不会进一步阐述，因为这是题外话，需要比这个话题更多的解释。我们将在另一篇文章中保存关于Go和MySQL的主题。</p></div></div>    
</body>
</html>