<html>
<head>
<title>MERN stack CRUD operations</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">MERN堆栈积垢操作</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/mern-stack-crud-operations-2a95448de78c?source=collection_archive---------1-----------------------#2020-10-03">https://levelup.gitconnected.com/mern-stack-crud-operations-2a95448de78c?source=collection_archive---------1-----------------------#2020-10-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="3902" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">github:-<a class="ae kl" href="https://github.com/swati1707/MERN-stack-CRUD-operations" rel="noopener ugc nofollow" target="_blank">https://github.com/swati1707/MERN-stack-CRUD-operations</a></p><p id="ce1d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个博客解释了如何在MERN堆栈中执行基本的CRUD操作。</p><ul class=""><li id="f9a0" class="km kn iq jp b jq jr ju jv jy ko kc kp kg kq kk kr ks kt ku bi translated"><strong class="jp ir"> MongoDB </strong>:面向文档的非SQL数据库，用于存储应用程序数据。</li><li id="bf3c" class="km kn iq jp b jq kv ju kw jy kx kc ky kg kz kk kr ks kt ku bi translated"><strong class="jp ir"> NodeJS </strong>:它是一个开源、跨平台、后端的JavaScript运行时环境，在web浏览器之外执行JavaScript代码</li><li id="ca9b" class="km kn iq jp b jq kv ju kw jy kx kc ky kg kz kk kr ks kt ku bi translated">express js:node . js的后端web应用框架</li><li id="4be2" class="km kn iq jp b jq kv ju kw jy kx kc ky kg kz kk kr ks kt ku bi translated"><strong class="jp ir"> ReactJS </strong>:用于构建UI组件，创建单页面web应用程序的用户界面。</li></ul><p id="ddec" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们开始吧…</p><p id="76d6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">第一步:-创建一个帐户并登录到mongoDB Atlas:-<a class="ae kl" href="https://www.mongodb.com/cloud/atlas" rel="noopener ugc nofollow" target="_blank">https://www.mongodb.com/cloud/atlas</a>。然后构建一个集群，你会得到一个连接字符串。我们的应用程序将有两个集合，即<strong class="jp ir">练习</strong>和<strong class="jp ir">用户</strong>。</p><p id="cdf3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">步骤2:-创建一个react应用</strong></p><p id="4e63" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">运行以下命令:</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="dbf9" class="lj lk iq lf b gy ll lm l ln lo">npx create-react-app mern-exercise-tracker</span></pre><p id="b659" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先，让我们创建后端，然后我们再回到前端。</p><p id="575a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">步骤3:-创建后端。</strong></p><p id="d6bc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为后端创建新目录，并运行以下命令:</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="1037" class="lj lk iq lf b gy ll lm l ln lo">mkdir backend<br/>cd backend<br/>npm init -y</span></pre><p id="0bc9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这将是文件夹结构:</p><figure class="la lb lc ld gt lq gh gi paragraph-image"><div class="gh gi lp"><img src="../Images/d7f8e83a4bcb0546a4be3055639e2e3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:514/format:webp/1*E_4Z9LUEI6Jwev6mOj7aZA.png"/></div></figure><p id="16ab" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在安装以下依赖项:</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="5ca0" class="lj lk iq lf b gy ll lm l ln lo">npm install express cors mongoose dotenv nodemon</span></pre><p id="c9a4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">步骤4:-创建服务器</p><p id="4c92" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">创建文件server.js并添加以下代码:</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="28fb" class="lj lk iq lf b gy ll lm l ln lo">const express = require('express');</span><span id="3007" class="lj lk iq lf b gy lt lm l ln lo">const cors = require('cors');</span><span id="8ddc" class="lj lk iq lf b gy lt lm l ln lo">const mongoose = require('mongoose');</span><span id="3c65" class="lj lk iq lf b gy lt lm l ln lo">require('dotenv').config();</span><span id="0e8b" class="lj lk iq lf b gy lt lm l ln lo">const app = express();</span><span id="0b3b" class="lj lk iq lf b gy lt lm l ln lo">const port = process.env.PORT || 5000;</span><span id="f44a" class="lj lk iq lf b gy lt lm l ln lo">app.use(cors());</span><span id="e242" class="lj lk iq lf b gy lt lm l ln lo">app.use(express.json());</span><span id="e954" class="lj lk iq lf b gy lt lm l ln lo">const uri = process.env.ATLAS_URI;</span><span id="a34f" class="lj lk iq lf b gy lt lm l ln lo">mongoose.connect(uri, { useNewUrlParser: true, useCreateIndex: true, useUnifiedTopology: true });</span><span id="da11" class="lj lk iq lf b gy lt lm l ln lo">const connection= mongoose.connection;</span><span id="f499" class="lj lk iq lf b gy lt lm l ln lo">connection.once('open', () =&gt; {</span><span id="00fd" class="lj lk iq lf b gy lt lm l ln lo">console.log("Mongodb database connection established successfully !!");</span><span id="eef4" class="lj lk iq lf b gy lt lm l ln lo">})</span><span id="2e9c" class="lj lk iq lf b gy lt lm l ln lo">const exercisesRouter = require('./routes/exercises');</span><span id="fb5b" class="lj lk iq lf b gy lt lm l ln lo">const usersRouter = require('./routes/users');</span><span id="a3ca" class="lj lk iq lf b gy lt lm l ln lo">app.use('/exercises', exercisesRouter);</span><span id="39b9" class="lj lk iq lf b gy lt lm l ln lo">app.use('/users', usersRouter);</span><span id="1cbe" class="lj lk iq lf b gy lt lm l ln lo">app.listen(port, () =&gt; {</span><span id="c34b" class="lj lk iq lf b gy lt lm l ln lo">console.log(`Server is running on port: ${port}`);</span><span id="8cc7" class="lj lk iq lf b gy lt lm l ln lo">});</span></pre><p id="51a5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在运行命令:</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="0dc5" class="lj lk iq lf b gy ll lm l ln lo">nodemon server</span></pre><p id="1d4a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来创建一个名为。env并添加您将从mongoDB Atlas中获得的连接字符串。</p><p id="2916" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这将创建一个服务器并建立与mongoDB的连接。</p><p id="7d49" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">步骤5:-创建模式</strong></p><p id="5046" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">创建一个名为models的新目录，其中包含两个文件，即:- exercise.model.js和user.model.js，用于练习和用户实体。</p><p id="6dda" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> exercise.model.js </strong></p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="d695" class="lj lk iq lf b gy ll lm l ln lo">const mongoose = require('mongoose');</span><span id="75a4" class="lj lk iq lf b gy lt lm l ln lo">const Schema = mongoose.Schema;<br/></span><span id="86d2" class="lj lk iq lf b gy lt lm l ln lo">const exerciseSchema = new Schema({</span><span id="13e0" class="lj lk iq lf b gy lt lm l ln lo">username: {type: String, required: true},</span><span id="cee6" class="lj lk iq lf b gy lt lm l ln lo">description: {type: String, required: true},</span><span id="385f" class="lj lk iq lf b gy lt lm l ln lo">duration: {type: Number, required: true},</span><span id="19dd" class="lj lk iq lf b gy lt lm l ln lo">date: {type: Date,required: true}</span><span id="7951" class="lj lk iq lf b gy lt lm l ln lo">}, {</span><span id="32db" class="lj lk iq lf b gy lt lm l ln lo">timestamps: true</span><span id="ec30" class="lj lk iq lf b gy lt lm l ln lo">});</span><span id="e56c" class="lj lk iq lf b gy lt lm l ln lo">const Exercise = mongoose.model('Exercise', exerciseSchema);</span><span id="f967" class="lj lk iq lf b gy lt lm l ln lo">module.exports = Exercise;</span></pre><p id="eaef" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">练习模式将有四个字段以及如上所述的变量。</p><p id="c92a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> user.model.js </strong></p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="fc47" class="lj lk iq lf b gy ll lm l ln lo">const mongoose = require('mongoose');</span><span id="9d10" class="lj lk iq lf b gy lt lm l ln lo">const Schema = mongoose.Schema;</span><span id="611c" class="lj lk iq lf b gy lt lm l ln lo">const userSchema = new Schema({</span><span id="141f" class="lj lk iq lf b gy lt lm l ln lo">username: {</span><span id="0cd1" class="lj lk iq lf b gy lt lm l ln lo">type: String,</span><span id="f014" class="lj lk iq lf b gy lt lm l ln lo">required: true,</span><span id="e95e" class="lj lk iq lf b gy lt lm l ln lo">unique: true,</span><span id="d792" class="lj lk iq lf b gy lt lm l ln lo">trim: true,</span><span id="f0a7" class="lj lk iq lf b gy lt lm l ln lo">minlwngth: 3</span><span id="f715" class="lj lk iq lf b gy lt lm l ln lo">},</span><span id="8732" class="lj lk iq lf b gy lt lm l ln lo">}, {</span><span id="c3ee" class="lj lk iq lf b gy lt lm l ln lo">timestamps: true</span><span id="7228" class="lj lk iq lf b gy lt lm l ln lo">});</span><span id="5354" class="lj lk iq lf b gy lt lm l ln lo">const User = mongoose.model('User', userSchema);</span><span id="e853" class="lj lk iq lf b gy lt lm l ln lo">module.exports = User;</span></pre><p id="8e1a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">正如您在上面的代码中看到的那样，用户模式将只有带一些验证的字段。</p><p id="be52" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">步骤6:-积垢操作逻辑</strong></p><p id="0bac" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">创建一个名为routes的新目录。它将包含两个文件</p><p id="688c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> users.js </strong></p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="ed5d" class="lj lk iq lf b gy ll lm l ln lo">const router = require('express').Router();</span><span id="fb73" class="lj lk iq lf b gy lt lm l ln lo">let User = require('../models/user.model');</span><span id="1236" class="lj lk iq lf b gy lt lm l ln lo">router.route('/').get((req,res) =&gt; {</span><span id="f8f0" class="lj lk iq lf b gy lt lm l ln lo">User.find()</span><span id="44a6" class="lj lk iq lf b gy lt lm l ln lo">.then(users =&gt; res.json(users))</span><span id="73a9" class="lj lk iq lf b gy lt lm l ln lo">.catch(err =&gt; res.status(400).json('Error: ' +err));</span><span id="7853" class="lj lk iq lf b gy lt lm l ln lo">});</span><span id="3abd" class="lj lk iq lf b gy lt lm l ln lo">router.route('/add').post((req,res) =&gt; {</span><span id="21ab" class="lj lk iq lf b gy lt lm l ln lo">const username = req.body.username;</span><span id="9dc9" class="lj lk iq lf b gy lt lm l ln lo">const newUser = new User({username});</span><span id="800e" class="lj lk iq lf b gy lt lm l ln lo">newUser.save()</span><span id="b397" class="lj lk iq lf b gy lt lm l ln lo">.then(() =&gt; res.json('User added!'))</span><span id="80b2" class="lj lk iq lf b gy lt lm l ln lo">.catch(err =&gt; res.status(400).json('Error: '+err));</span><span id="44f5" class="lj lk iq lf b gy lt lm l ln lo">});</span><span id="b6b7" class="lj lk iq lf b gy lt lm l ln lo">module.exports = router;</span></pre><p id="9feb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">该文件将包含检索用户列表和添加新用户的逻辑。</p><p id="1fba" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> exercises.js </strong></p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="25a8" class="lj lk iq lf b gy ll lm l ln lo">const router = require('express').Router();</span><span id="0d08" class="lj lk iq lf b gy lt lm l ln lo">let Exercise = require('../models/exercise.model');</span><span id="e746" class="lj lk iq lf b gy lt lm l ln lo">router.route('/').get((req,res) =&gt; {</span><span id="7719" class="lj lk iq lf b gy lt lm l ln lo">Exercise.find()</span><span id="bc4f" class="lj lk iq lf b gy lt lm l ln lo">.then(exercises =&gt; res.json(exercises))</span><span id="7288" class="lj lk iq lf b gy lt lm l ln lo">.catch(err =&gt; res.status(400).json('Error: ' +err));</span><span id="4101" class="lj lk iq lf b gy lt lm l ln lo">});</span><span id="e9af" class="lj lk iq lf b gy lt lm l ln lo">router.route('/add').post((req,res) =&gt; {</span><span id="0c2d" class="lj lk iq lf b gy lt lm l ln lo">const username = req.body.username;</span><span id="5b6d" class="lj lk iq lf b gy lt lm l ln lo">const description = req.body.description;</span><span id="78f2" class="lj lk iq lf b gy lt lm l ln lo">const duration = Number(req.body.duration);</span><span id="b10e" class="lj lk iq lf b gy lt lm l ln lo">const date = Date.parse(req.body.date);</span><span id="9ed7" class="lj lk iq lf b gy lt lm l ln lo">const newExercise = new Exercise({username, description, duration, date});</span><span id="7d5c" class="lj lk iq lf b gy lt lm l ln lo">newExercise.save()</span><span id="ace0" class="lj lk iq lf b gy lt lm l ln lo">.then(() =&gt; res.json('Exercise added!'))</span><span id="a039" class="lj lk iq lf b gy lt lm l ln lo">.catch(err =&gt; res.status(400).json('Error: '+err));</span><span id="1f8c" class="lj lk iq lf b gy lt lm l ln lo">});</span><span id="4830" class="lj lk iq lf b gy lt lm l ln lo">router.route('/:id').get((req,res) =&gt; {</span><span id="65b2" class="lj lk iq lf b gy lt lm l ln lo">Exercise.findById(req.params.id)</span><span id="3398" class="lj lk iq lf b gy lt lm l ln lo">.then(exercise =&gt; res.json(exercise))</span><span id="b683" class="lj lk iq lf b gy lt lm l ln lo">.catch(err =&gt; res.status(400).json('Error: '+err));</span><span id="ca82" class="lj lk iq lf b gy lt lm l ln lo">});</span><span id="502e" class="lj lk iq lf b gy lt lm l ln lo">router.route('/:id').delete((req,res) =&gt; {</span><span id="fe5d" class="lj lk iq lf b gy lt lm l ln lo">Exercise.findByIdAndDelete(req.params.id)</span><span id="3d3b" class="lj lk iq lf b gy lt lm l ln lo">.then(exercise =&gt; res.json('Exercise deleted'))</span><span id="503b" class="lj lk iq lf b gy lt lm l ln lo">.catch(err =&gt; res.status(400).json('Error: '+err));</span><span id="c004" class="lj lk iq lf b gy lt lm l ln lo">});</span><span id="9b14" class="lj lk iq lf b gy lt lm l ln lo">router.route('/update/:id').post((req,res) =&gt; {</span><span id="7d5d" class="lj lk iq lf b gy lt lm l ln lo">Exercise.findById(req.params.id)</span><span id="d200" class="lj lk iq lf b gy lt lm l ln lo">.then(exercise =&gt; {</span><span id="66d9" class="lj lk iq lf b gy lt lm l ln lo">exercise.username = req.body.username;</span><span id="60ff" class="lj lk iq lf b gy lt lm l ln lo">exercise.description = req.body.description;</span><span id="33bc" class="lj lk iq lf b gy lt lm l ln lo">exercise.duration = Number(req.body.duration);</span><span id="b868" class="lj lk iq lf b gy lt lm l ln lo">exercise.date = Date.parse(req.body.date);</span><span id="e21c" class="lj lk iq lf b gy lt lm l ln lo">exercise.save()</span><span id="f406" class="lj lk iq lf b gy lt lm l ln lo">.then(() =&gt; res.json('Exercise updated !'))</span><span id="a01d" class="lj lk iq lf b gy lt lm l ln lo">.catch(err =&gt; res.status(400).json('Error: '+err));</span><span id="6f31" class="lj lk iq lf b gy lt lm l ln lo">})</span><span id="7dc2" class="lj lk iq lf b gy lt lm l ln lo">.catch(err =&gt; res.status(400).json('Error: '+err));</span><span id="e022" class="lj lk iq lf b gy lt lm l ln lo">});</span><span id="2770" class="lj lk iq lf b gy lt lm l ln lo">module.exports = router;</span></pre><p id="5e30" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">该文件包含用于检索练习列表以及创建新练习、更新和删除练习的逻辑。</p><p id="91f3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">第7步:-创建前端。</strong></p><p id="31f2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">先说App.js文件。</p><p id="2694" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> App.js </strong></p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="a714" class="lj lk iq lf b gy ll lm l ln lo">import React from 'react';</span><span id="be1a" class="lj lk iq lf b gy lt lm l ln lo">import { BrowserRouter, Route } from "react-router-dom";</span><span id="50b0" class="lj lk iq lf b gy lt lm l ln lo">import Navbar from "./components/Navbar";</span><span id="968a" class="lj lk iq lf b gy lt lm l ln lo">import ExercisesList from "./components/ExercisesList";</span><span id="1158" class="lj lk iq lf b gy lt lm l ln lo">import EditExercise from "./components/EditExercise";</span><span id="3d04" class="lj lk iq lf b gy lt lm l ln lo">import CreateExercise from "./components/CreateExercise";</span><span id="9b82" class="lj lk iq lf b gy lt lm l ln lo">import CreateUser from "./components/CreateUser";</span><span id="2401" class="lj lk iq lf b gy lt lm l ln lo">function App() {</span><span id="678f" class="lj lk iq lf b gy lt lm l ln lo">return (</span><span id="870b" class="lj lk iq lf b gy lt lm l ln lo">&lt;BrowserRouter&gt;</span><span id="364b" class="lj lk iq lf b gy lt lm l ln lo">&lt;Navbar /&gt;</span><span id="c37e" class="lj lk iq lf b gy lt lm l ln lo">&lt;br /&gt;</span><span id="994c" class="lj lk iq lf b gy lt lm l ln lo">&lt;Route exact path="/" component={ExercisesList} /&gt;</span><span id="20fa" class="lj lk iq lf b gy lt lm l ln lo">&lt;Route path="/edit/:id" component={EditExercise} /&gt;</span><span id="ab89" class="lj lk iq lf b gy lt lm l ln lo">&lt;Route path="/create" component={CreateExercise} /&gt;</span><span id="62cc" class="lj lk iq lf b gy lt lm l ln lo">&lt;Route path="/user" component={CreateUser} /&gt;</span><span id="dc8e" class="lj lk iq lf b gy lt lm l ln lo">&lt;/BrowserRouter&gt;</span><span id="f896" class="lj lk iq lf b gy lt lm l ln lo">);</span><span id="677a" class="lj lk iq lf b gy lt lm l ln lo">}</span><span id="44e9" class="lj lk iq lf b gy lt lm l ln lo">export default App;</span></pre><p id="bd5d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个应用程序将导入所有需要的组件。</p><p id="dd01" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先让我们创建导航条组件。</p><p id="a879" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> Navbar.js </strong></p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="bdc7" class="lj lk iq lf b gy ll lm l ln lo">import React, { Component } from "react";</span><span id="f517" class="lj lk iq lf b gy lt lm l ln lo">import { Link } from "react-router-dom";</span><span id="6382" class="lj lk iq lf b gy lt lm l ln lo">class Navbar extends Component { </span><span id="624e" class="lj lk iq lf b gy lt lm l ln lo">render() {</span><span id="8e09" class="lj lk iq lf b gy lt lm l ln lo">return (</span><span id="83ce" class="lj lk iq lf b gy lt lm l ln lo">&lt;nav className="navbar navbar-dark bg-dark navbar-expand-lg"&gt;</span><span id="fdf1" class="lj lk iq lf b gy lt lm l ln lo">&lt;Link to="/" className="navbar-brand"&gt;ExerciseTracker&lt;/Link&gt;</span><span id="8937" class="lj lk iq lf b gy lt lm l ln lo">&lt;div className="collapse navbar-collapse"&gt;</span><span id="c2a7" class="lj lk iq lf b gy lt lm l ln lo">&lt;ul className="navbar-nav"&gt;</span><span id="50c0" class="lj lk iq lf b gy lt lm l ln lo">&lt;li className="navbar-item"&gt;</span><span id="1405" class="lj lk iq lf b gy lt lm l ln lo">&lt;Link to="/" className="nav-link"&gt;Exercises&lt;/Link&gt;</span><span id="4548" class="lj lk iq lf b gy lt lm l ln lo">&lt;/li&gt;</span><span id="ceda" class="lj lk iq lf b gy lt lm l ln lo">&lt;li className="navbar-item"&gt;</span><span id="2369" class="lj lk iq lf b gy lt lm l ln lo">&lt;Link to="/create" className="nav-link"&gt;Create Exercise&lt;/Link&gt;</span><span id="f0b6" class="lj lk iq lf b gy lt lm l ln lo">&lt;/li&gt;</span><span id="e54d" class="lj lk iq lf b gy lt lm l ln lo">&lt;li className="navbar-item"&gt;</span><span id="d1b1" class="lj lk iq lf b gy lt lm l ln lo">&lt;Link to="/user" className="nav-link"&gt;Create User&lt;/Link&gt;</span><span id="9b06" class="lj lk iq lf b gy lt lm l ln lo">&lt;/li&gt;</span><span id="38e0" class="lj lk iq lf b gy lt lm l ln lo">&lt;/ul&gt;</span><span id="eade" class="lj lk iq lf b gy lt lm l ln lo">&lt;/div&gt;</span><span id="e518" class="lj lk iq lf b gy lt lm l ln lo">&lt;/nav&gt;</span><span id="0ae8" class="lj lk iq lf b gy lt lm l ln lo">);</span><span id="b846" class="lj lk iq lf b gy lt lm l ln lo">}</span><span id="ad15" class="lj lk iq lf b gy lt lm l ln lo">}</span><span id="011b" class="lj lk iq lf b gy lt lm l ln lo">export default Navbar;</span></pre><p id="44d1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有四个主要组成部分，即:-创建练习，创建用户，编辑练习，练习列表。</p><p id="20ee" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> CreateExercise.jsx </strong></p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="7035" class="lj lk iq lf b gy ll lm l ln lo">import React, { Component } from 'react';</span><span id="60e1" class="lj lk iq lf b gy lt lm l ln lo">import axios from "axios";</span><span id="4b91" class="lj lk iq lf b gy lt lm l ln lo">import DatePicker from "react-datepicker";</span><span id="95c5" class="lj lk iq lf b gy lt lm l ln lo">import "react-datepicker/dist/react-datepicker.css";</span><span id="d6e2" class="lj lk iq lf b gy lt lm l ln lo">class CreateExercise extends Component {</span><span id="6775" class="lj lk iq lf b gy lt lm l ln lo">constructor(props){</span><span id="8c6a" class="lj lk iq lf b gy lt lm l ln lo">super();</span><span id="2e3a" class="lj lk iq lf b gy lt lm l ln lo">this.state = {</span><span id="e6e1" class="lj lk iq lf b gy lt lm l ln lo">username: "",</span><span id="dfb1" class="lj lk iq lf b gy lt lm l ln lo">description: "",</span><span id="455b" class="lj lk iq lf b gy lt lm l ln lo">duration: 0,</span><span id="0012" class="lj lk iq lf b gy lt lm l ln lo">date: new Date(),</span><span id="1660" class="lj lk iq lf b gy lt lm l ln lo">users: []</span><span id="aa10" class="lj lk iq lf b gy lt lm l ln lo">}</span><span id="792a" class="lj lk iq lf b gy lt lm l ln lo">this.onChangeUsername = this.onChangeUsername.bind(this);</span><span id="6562" class="lj lk iq lf b gy lt lm l ln lo">this.onChangeDescription = this.onChangeDescription.bind(this);</span><span id="d27e" class="lj lk iq lf b gy lt lm l ln lo">this.onChangeDuration = this.onChangeDuration.bind(this);</span><span id="4578" class="lj lk iq lf b gy lt lm l ln lo">this.onChangeDate = this.onChangeDate.bind(this);</span><span id="661c" class="lj lk iq lf b gy lt lm l ln lo">this.onSubmit = this.onSubmit.bind(this);</span><span id="86db" class="lj lk iq lf b gy lt lm l ln lo">}</span><span id="96b3" class="lj lk iq lf b gy lt lm l ln lo">componentDidMount() {</span><span id="ada7" class="lj lk iq lf b gy lt lm l ln lo">axios.get('http://localhost:5000/users/')</span><span id="4ee7" class="lj lk iq lf b gy lt lm l ln lo">.then(response =&gt; {</span><span id="8d63" class="lj lk iq lf b gy lt lm l ln lo">if(response.data.length &gt; 0) {</span><span id="f6ae" class="lj lk iq lf b gy lt lm l ln lo">this.setState({</span><span id="4785" class="lj lk iq lf b gy lt lm l ln lo">users: response.data.map(user =&gt; user.username),</span><span id="4e86" class="lj lk iq lf b gy lt lm l ln lo">username: response.data[0].username</span><span id="cc74" class="lj lk iq lf b gy lt lm l ln lo">});</span><span id="8707" class="lj lk iq lf b gy lt lm l ln lo">}</span><span id="3d58" class="lj lk iq lf b gy lt lm l ln lo">})</span><span id="affb" class="lj lk iq lf b gy lt lm l ln lo">}</span><span id="e3bf" class="lj lk iq lf b gy lt lm l ln lo">onChangeUsername(e) {</span><span id="2d15" class="lj lk iq lf b gy lt lm l ln lo">this.setState({ username: e.target.value})</span><span id="5d57" class="lj lk iq lf b gy lt lm l ln lo">}</span><span id="5926" class="lj lk iq lf b gy lt lm l ln lo">onChangeDescription(e) {</span><span id="ce25" class="lj lk iq lf b gy lt lm l ln lo">this.setState({ description: e.target.value})</span><span id="bbca" class="lj lk iq lf b gy lt lm l ln lo">}</span><span id="7d80" class="lj lk iq lf b gy lt lm l ln lo">onChangeDuration(e) {</span><span id="b5ab" class="lj lk iq lf b gy lt lm l ln lo">this.setState({ duration: e.target.value})</span><span id="4c24" class="lj lk iq lf b gy lt lm l ln lo">}</span><span id="bed0" class="lj lk iq lf b gy lt lm l ln lo">onChangeDate(date) {</span><span id="58e6" class="lj lk iq lf b gy lt lm l ln lo">this.setState({ date: date})</span><span id="b8ad" class="lj lk iq lf b gy lt lm l ln lo">}</span><span id="0e61" class="lj lk iq lf b gy lt lm l ln lo">onSubmit(e) {</span><span id="7579" class="lj lk iq lf b gy lt lm l ln lo">e.preventDefault();</span><span id="4e3e" class="lj lk iq lf b gy lt lm l ln lo">const exercise = {</span><span id="dc45" class="lj lk iq lf b gy lt lm l ln lo">username: this.state.username,</span><span id="d15f" class="lj lk iq lf b gy lt lm l ln lo">description: this.state.description,</span><span id="18d0" class="lj lk iq lf b gy lt lm l ln lo">duration: this.state.duration,</span><span id="7991" class="lj lk iq lf b gy lt lm l ln lo">date: this.state.date</span><span id="5cf7" class="lj lk iq lf b gy lt lm l ln lo">}</span><span id="1bae" class="lj lk iq lf b gy lt lm l ln lo">console.log(exercise);</span><span id="1892" class="lj lk iq lf b gy lt lm l ln lo">axios.post('http://localhost:5000/exercises/add', exercise)</span><span id="25d3" class="lj lk iq lf b gy lt lm l ln lo">.then(res =&gt; console.log(res.data));</span><span id="8319" class="lj lk iq lf b gy lt lm l ln lo">window.location = "/";</span><span id="591e" class="lj lk iq lf b gy lt lm l ln lo">}</span><span id="aac2" class="lj lk iq lf b gy lt lm l ln lo">render() {</span><span id="b5a2" class="lj lk iq lf b gy lt lm l ln lo">return (</span><span id="94f0" class="lj lk iq lf b gy lt lm l ln lo">&lt;div className="container"&gt;</span><span id="6b6b" class="lj lk iq lf b gy lt lm l ln lo">&lt;h3&gt;Create New Exercise Log&lt;/h3&gt;</span><span id="5f86" class="lj lk iq lf b gy lt lm l ln lo">&lt;form onSubmit={this.onSubmit}&gt;</span><span id="d9a8" class="lj lk iq lf b gy lt lm l ln lo">&lt;div className="form-group"&gt;</span><span id="2a4e" class="lj lk iq lf b gy lt lm l ln lo">&lt;label&gt;Username: &lt;/label&gt;</span><span id="b53e" class="lj lk iq lf b gy lt lm l ln lo">&lt;select ref="userInput"</span><span id="47a8" class="lj lk iq lf b gy lt lm l ln lo">required</span><span id="2eb4" class="lj lk iq lf b gy lt lm l ln lo">className="form-control"</span><span id="22e2" class="lj lk iq lf b gy lt lm l ln lo">value={this.state.username}</span><span id="3ab0" class="lj lk iq lf b gy lt lm l ln lo">onChange={this.onChangeUsername} &gt;</span><span id="43db" class="lj lk iq lf b gy lt lm l ln lo">{</span><span id="8712" class="lj lk iq lf b gy lt lm l ln lo">this.state.users.map(function(user) {</span><span id="a164" class="lj lk iq lf b gy lt lm l ln lo">return &lt;option key={user} value={user}&gt;{user}&lt;/option&gt;;</span><span id="64cf" class="lj lk iq lf b gy lt lm l ln lo">})</span><span id="4807" class="lj lk iq lf b gy lt lm l ln lo">}</span><span id="f1c9" class="lj lk iq lf b gy lt lm l ln lo">&lt;/select&gt;</span><span id="d010" class="lj lk iq lf b gy lt lm l ln lo">&lt;/div&gt;</span><span id="08bb" class="lj lk iq lf b gy lt lm l ln lo">&lt;div className="form-group"&gt;</span><span id="04b8" class="lj lk iq lf b gy lt lm l ln lo">&lt;label&gt;Description: &lt;/label&gt;</span><span id="572d" class="lj lk iq lf b gy lt lm l ln lo">&lt;input</span><span id="e98a" class="lj lk iq lf b gy lt lm l ln lo">type="text" required</span><span id="e57d" class="lj lk iq lf b gy lt lm l ln lo">className="form-control"</span><span id="a9f4" class="lj lk iq lf b gy lt lm l ln lo">value={this.state.description}</span><span id="0ba2" class="lj lk iq lf b gy lt lm l ln lo">onChange={this.onChangeDescription}</span><span id="65d6" class="lj lk iq lf b gy lt lm l ln lo">/&gt;</span><span id="d24f" class="lj lk iq lf b gy lt lm l ln lo">&lt;/div&gt;</span><span id="99c7" class="lj lk iq lf b gy lt lm l ln lo">&lt;div className="form-group"&gt;</span><span id="5603" class="lj lk iq lf b gy lt lm l ln lo">&lt;label&gt;Duration(in minutes): &lt;/label&gt;</span><span id="7566" class="lj lk iq lf b gy lt lm l ln lo">&lt;input</span><span id="5d69" class="lj lk iq lf b gy lt lm l ln lo">type="text"</span><span id="4b28" class="lj lk iq lf b gy lt lm l ln lo">className="form-control"</span><span id="0265" class="lj lk iq lf b gy lt lm l ln lo">value={this.state.duration}</span><span id="f023" class="lj lk iq lf b gy lt lm l ln lo">onChange={this.onChangeDuration}</span><span id="e926" class="lj lk iq lf b gy lt lm l ln lo">/&gt;</span><span id="02e9" class="lj lk iq lf b gy lt lm l ln lo">&lt;/div&gt;</span><span id="aee3" class="lj lk iq lf b gy lt lm l ln lo">&lt;div className="form-group"&gt;</span><span id="8f07" class="lj lk iq lf b gy lt lm l ln lo">&lt;label&gt;Date: &lt;/label&gt;</span><span id="e272" class="lj lk iq lf b gy lt lm l ln lo">&lt;div&gt;</span><span id="69b5" class="lj lk iq lf b gy lt lm l ln lo">&lt;DatePicker</span><span id="02c1" class="lj lk iq lf b gy lt lm l ln lo">selected={this.state.date}</span><span id="27fb" class="lj lk iq lf b gy lt lm l ln lo">onChange={this.onChangeDate}</span><span id="a927" class="lj lk iq lf b gy lt lm l ln lo">/&gt;</span><span id="62b2" class="lj lk iq lf b gy lt lm l ln lo">&lt;/div&gt;</span><span id="e516" class="lj lk iq lf b gy lt lm l ln lo">&lt;/div&gt;</span><span id="19ea" class="lj lk iq lf b gy lt lm l ln lo">&lt;div className="form-group"&gt;</span><span id="805f" class="lj lk iq lf b gy lt lm l ln lo">&lt;input type="submit" value="Create Exercise Log" className="btn btn-primary" /&gt;</span><span id="b268" class="lj lk iq lf b gy lt lm l ln lo">&lt;/div&gt;</span><span id="b9e0" class="lj lk iq lf b gy lt lm l ln lo">&lt;/form&gt;</span><span id="72f9" class="lj lk iq lf b gy lt lm l ln lo">&lt;/div&gt;</span><span id="075f" class="lj lk iq lf b gy lt lm l ln lo">);</span><span id="9283" class="lj lk iq lf b gy lt lm l ln lo">}</span><span id="17d0" class="lj lk iq lf b gy lt lm l ln lo">}</span><span id="aab8" class="lj lk iq lf b gy lt lm l ln lo">export default CreateExercise;</span></pre><p id="2651" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> CreateUser.jsx </strong></p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="ab53" class="lj lk iq lf b gy ll lm l ln lo">import React, { Component } from 'react';</span><span id="0e55" class="lj lk iq lf b gy lt lm l ln lo">import axios from "axios";</span><span id="552e" class="lj lk iq lf b gy lt lm l ln lo">class CreateUser extends Component {</span><span id="6a11" class="lj lk iq lf b gy lt lm l ln lo">constructor(props){</span><span id="ec15" class="lj lk iq lf b gy lt lm l ln lo">super();</span><span id="f7c4" class="lj lk iq lf b gy lt lm l ln lo">this.state = {</span><span id="bbd5" class="lj lk iq lf b gy lt lm l ln lo">username: ""</span><span id="4f4d" class="lj lk iq lf b gy lt lm l ln lo">}</span><span id="d106" class="lj lk iq lf b gy lt lm l ln lo">this.onChangeUsername = this.onChangeUsername.bind(this);</span><span id="4949" class="lj lk iq lf b gy lt lm l ln lo">this.onSubmit = this.onSubmit.bind(this);</span><span id="0976" class="lj lk iq lf b gy lt lm l ln lo">}</span><span id="0882" class="lj lk iq lf b gy lt lm l ln lo">onChangeUsername(e) {</span><span id="6eaf" class="lj lk iq lf b gy lt lm l ln lo">this.setState({ username: e.target.value})</span><span id="1708" class="lj lk iq lf b gy lt lm l ln lo">}</span><span id="2b02" class="lj lk iq lf b gy lt lm l ln lo">onSubmit(e) {</span><span id="edd0" class="lj lk iq lf b gy lt lm l ln lo">e.preventDefault();</span><span id="c3fa" class="lj lk iq lf b gy lt lm l ln lo">const user = {</span><span id="aa34" class="lj lk iq lf b gy lt lm l ln lo">username: this.state.username,</span><span id="24e0" class="lj lk iq lf b gy lt lm l ln lo">}</span><span id="d75a" class="lj lk iq lf b gy lt lm l ln lo">console.log(user);</span><span id="2044" class="lj lk iq lf b gy lt lm l ln lo">axios.post('http://localhost:5000/users/add', user)</span><span id="a8c0" class="lj lk iq lf b gy lt lm l ln lo">.then(res =&gt; console.log(res.data));</span><span id="0724" class="lj lk iq lf b gy lt lm l ln lo">this.setState({</span><span id="1412" class="lj lk iq lf b gy lt lm l ln lo">username: ''</span><span id="f153" class="lj lk iq lf b gy lt lm l ln lo">})</span><span id="576a" class="lj lk iq lf b gy lt lm l ln lo">}<br/></span><span id="99b1" class="lj lk iq lf b gy lt lm l ln lo">render() {</span><span id="dae6" class="lj lk iq lf b gy lt lm l ln lo">return (</span><span id="a99c" class="lj lk iq lf b gy lt lm l ln lo">&lt;div className="container"&gt;</span><span id="d5bd" class="lj lk iq lf b gy lt lm l ln lo">&lt;h3&gt;Create New User&lt;/h3&gt;</span><span id="813b" class="lj lk iq lf b gy lt lm l ln lo">&lt;form onSubmit={this.onSubmit}&gt;</span><span id="9253" class="lj lk iq lf b gy lt lm l ln lo">&lt;div className="form-group"&gt;</span><span id="a307" class="lj lk iq lf b gy lt lm l ln lo">&lt;label&gt;Username: &lt;/label&gt;</span><span id="42d5" class="lj lk iq lf b gy lt lm l ln lo">&lt;input</span><span id="6905" class="lj lk iq lf b gy lt lm l ln lo">type="text" required</span><span id="afe1" class="lj lk iq lf b gy lt lm l ln lo">className="form-control"</span><span id="02a0" class="lj lk iq lf b gy lt lm l ln lo">value={this.state.username}</span><span id="c9e9" class="lj lk iq lf b gy lt lm l ln lo">onChange={this.onChangeUsername}</span><span id="c5ca" class="lj lk iq lf b gy lt lm l ln lo">/&gt;</span><span id="6653" class="lj lk iq lf b gy lt lm l ln lo">&lt;/div&gt;</span><span id="9606" class="lj lk iq lf b gy lt lm l ln lo">&lt;div className="form-group"&gt;</span><span id="dd90" class="lj lk iq lf b gy lt lm l ln lo">&lt;input type="submit" value="Create User" className="btn btn-primary" /&gt;</span><span id="0049" class="lj lk iq lf b gy lt lm l ln lo">&lt;/div&gt;</span><span id="9abe" class="lj lk iq lf b gy lt lm l ln lo">&lt;/form&gt;</span><span id="eba5" class="lj lk iq lf b gy lt lm l ln lo">&lt;/div&gt;</span><span id="b0f5" class="lj lk iq lf b gy lt lm l ln lo">);</span><span id="adb2" class="lj lk iq lf b gy lt lm l ln lo">}</span><span id="aed5" class="lj lk iq lf b gy lt lm l ln lo">}</span><span id="474a" class="lj lk iq lf b gy lt lm l ln lo">export default CreateUser;</span></pre><p id="1bb8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">edit execution . jsx</strong></p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="faba" class="lj lk iq lf b gy ll lm l ln lo">import React, { Component } from 'react';</span><span id="c77b" class="lj lk iq lf b gy lt lm l ln lo">import axios from "axios";</span><span id="7752" class="lj lk iq lf b gy lt lm l ln lo">import DatePicker from "react-datepicker";</span><span id="8313" class="lj lk iq lf b gy lt lm l ln lo">import "react-datepicker/dist/react-datepicker.css";</span><span id="5c4a" class="lj lk iq lf b gy lt lm l ln lo">class EditExercise extends Component {</span><span id="e8b9" class="lj lk iq lf b gy lt lm l ln lo">constructor(props){</span><span id="ee74" class="lj lk iq lf b gy lt lm l ln lo">super();</span><span id="44d8" class="lj lk iq lf b gy lt lm l ln lo">this.state = {</span><span id="7c98" class="lj lk iq lf b gy lt lm l ln lo">username: "",</span><span id="3fca" class="lj lk iq lf b gy lt lm l ln lo">description: "",</span><span id="b842" class="lj lk iq lf b gy lt lm l ln lo">duration: 0,</span><span id="d2fb" class="lj lk iq lf b gy lt lm l ln lo">date: new Date(),</span><span id="9397" class="lj lk iq lf b gy lt lm l ln lo">users: []</span><span id="d17c" class="lj lk iq lf b gy lt lm l ln lo">}</span><span id="c16a" class="lj lk iq lf b gy lt lm l ln lo">this.onChangeUsername = this.onChangeUsername.bind(this);</span><span id="41e1" class="lj lk iq lf b gy lt lm l ln lo">this.onChangeDescription = this.onChangeDescription.bind(this);</span><span id="4fc5" class="lj lk iq lf b gy lt lm l ln lo">this.onChangeDuration = this.onChangeDuration.bind(this);</span><span id="9ce8" class="lj lk iq lf b gy lt lm l ln lo">this.onChangeDate = this.onChangeDate.bind(this);</span><span id="8c6e" class="lj lk iq lf b gy lt lm l ln lo">this.onSubmit = this.onSubmit.bind(this);</span><span id="56f5" class="lj lk iq lf b gy lt lm l ln lo">}</span><span id="7150" class="lj lk iq lf b gy lt lm l ln lo">componentDidMount() {</span><span id="ab86" class="lj lk iq lf b gy lt lm l ln lo">axios.get('http://localhost:5000/exercises/'+this.props.match.params.id)</span><span id="f599" class="lj lk iq lf b gy lt lm l ln lo">.then(res =&gt; {</span><span id="5c2f" class="lj lk iq lf b gy lt lm l ln lo">this.setState({</span><span id="b223" class="lj lk iq lf b gy lt lm l ln lo">username: res.data.username,</span><span id="6d08" class="lj lk iq lf b gy lt lm l ln lo">description: res.data.description,</span><span id="a93e" class="lj lk iq lf b gy lt lm l ln lo">duration: res.data.duration,</span><span id="1e77" class="lj lk iq lf b gy lt lm l ln lo">date: new Date(res.data.date),</span><span id="bf89" class="lj lk iq lf b gy lt lm l ln lo">})</span><span id="660c" class="lj lk iq lf b gy lt lm l ln lo">})</span><span id="79f9" class="lj lk iq lf b gy lt lm l ln lo">.catch(function (error){</span><span id="1439" class="lj lk iq lf b gy lt lm l ln lo">console.log(error);</span><span id="1a4d" class="lj lk iq lf b gy lt lm l ln lo">})</span><span id="648a" class="lj lk iq lf b gy lt lm l ln lo">axios.get('http://localhost:5000/users/') </span><span id="648b" class="lj lk iq lf b gy lt lm l ln lo">.then(response =&gt; {</span><span id="b151" class="lj lk iq lf b gy lt lm l ln lo">if(response.data.length &gt; 0) {</span><span id="266a" class="lj lk iq lf b gy lt lm l ln lo">this.setState({</span><span id="5e59" class="lj lk iq lf b gy lt lm l ln lo">users: response.data.map(user =&gt; user.username)</span><span id="34c4" class="lj lk iq lf b gy lt lm l ln lo">});</span><span id="5f6a" class="lj lk iq lf b gy lt lm l ln lo">}</span><span id="28a6" class="lj lk iq lf b gy lt lm l ln lo">})</span><span id="d4c9" class="lj lk iq lf b gy lt lm l ln lo">}</span><span id="9dc5" class="lj lk iq lf b gy lt lm l ln lo">onChangeUsername(e) {</span><span id="2a15" class="lj lk iq lf b gy lt lm l ln lo">this.setState({ username: e.target.value})</span><span id="c285" class="lj lk iq lf b gy lt lm l ln lo">}</span><span id="67d2" class="lj lk iq lf b gy lt lm l ln lo">onChangeDescription(e) {</span><span id="7810" class="lj lk iq lf b gy lt lm l ln lo">this.setState({ description: e.target.value})</span><span id="7ae4" class="lj lk iq lf b gy lt lm l ln lo">}</span><span id="31e7" class="lj lk iq lf b gy lt lm l ln lo">onChangeDuration(e) {</span><span id="5345" class="lj lk iq lf b gy lt lm l ln lo">this.setState({ duration: e.target.value})</span><span id="18a5" class="lj lk iq lf b gy lt lm l ln lo">}</span><span id="1537" class="lj lk iq lf b gy lt lm l ln lo">onChangeDate(date) {</span><span id="3f5b" class="lj lk iq lf b gy lt lm l ln lo">this.setState({ date: date})</span><span id="8e5f" class="lj lk iq lf b gy lt lm l ln lo">}</span><span id="5eb6" class="lj lk iq lf b gy lt lm l ln lo">onSubmit(e) {</span><span id="69be" class="lj lk iq lf b gy lt lm l ln lo">e.preventDefault();</span><span id="fd95" class="lj lk iq lf b gy lt lm l ln lo">const exercise = {</span><span id="9072" class="lj lk iq lf b gy lt lm l ln lo">username: this.state.username,</span><span id="ba62" class="lj lk iq lf b gy lt lm l ln lo">description: this.state.description,</span><span id="e347" class="lj lk iq lf b gy lt lm l ln lo">duration: this.state.duration,</span><span id="e0a3" class="lj lk iq lf b gy lt lm l ln lo">date: this.state.date</span><span id="fc3b" class="lj lk iq lf b gy lt lm l ln lo">}</span><span id="b887" class="lj lk iq lf b gy lt lm l ln lo">console.log(exercise);</span><span id="23f9" class="lj lk iq lf b gy lt lm l ln lo">axios.post('http://localhost:5000/exercises/update/'+this.props.match.params.id, exercise)</span><span id="985a" class="lj lk iq lf b gy lt lm l ln lo">.then(res =&gt; console.log(res.data));</span><span id="2b77" class="lj lk iq lf b gy lt lm l ln lo">window.location = "/";</span><span id="1da4" class="lj lk iq lf b gy lt lm l ln lo">}</span><span id="f5c9" class="lj lk iq lf b gy lt lm l ln lo">render() {</span><span id="4591" class="lj lk iq lf b gy lt lm l ln lo">return (</span><span id="2ef0" class="lj lk iq lf b gy lt lm l ln lo">&lt;div className="container"&gt;</span><span id="857f" class="lj lk iq lf b gy lt lm l ln lo">&lt;h3&gt;Edit Exercise Log&lt;/h3&gt;</span><span id="9488" class="lj lk iq lf b gy lt lm l ln lo">&lt;form onSubmit={this.onSubmit}&gt;</span><span id="0efc" class="lj lk iq lf b gy lt lm l ln lo">&lt;div className="form-group"&gt;</span><span id="5d25" class="lj lk iq lf b gy lt lm l ln lo">&lt;label&gt;Username: &lt;/label&gt;</span><span id="09ec" class="lj lk iq lf b gy lt lm l ln lo">&lt;select</span><span id="da44" class="lj lk iq lf b gy lt lm l ln lo">required</span><span id="e8ae" class="lj lk iq lf b gy lt lm l ln lo">className="form-control"</span><span id="1e63" class="lj lk iq lf b gy lt lm l ln lo">value={this.state.username}</span><span id="bbc8" class="lj lk iq lf b gy lt lm l ln lo">onChange={this.onChangeUsername} &gt;</span><span id="79d1" class="lj lk iq lf b gy lt lm l ln lo">{</span><span id="3c4a" class="lj lk iq lf b gy lt lm l ln lo">this.state.users.map(function(user) {</span><span id="1e08" class="lj lk iq lf b gy lt lm l ln lo">return &lt;option key={user} value={user}&gt;{user}&lt;/option&gt;;</span><span id="2647" class="lj lk iq lf b gy lt lm l ln lo">})</span><span id="6511" class="lj lk iq lf b gy lt lm l ln lo">}</span><span id="a830" class="lj lk iq lf b gy lt lm l ln lo">&lt;/select&gt;</span><span id="8b4f" class="lj lk iq lf b gy lt lm l ln lo">&lt;/div&gt;</span><span id="6267" class="lj lk iq lf b gy lt lm l ln lo">&lt;div className="form-group"&gt;</span><span id="465c" class="lj lk iq lf b gy lt lm l ln lo">&lt;label&gt;Description: &lt;/label&gt;</span><span id="c77e" class="lj lk iq lf b gy lt lm l ln lo">&lt;input</span><span id="95f8" class="lj lk iq lf b gy lt lm l ln lo">type="text" required</span><span id="d49e" class="lj lk iq lf b gy lt lm l ln lo">className="form-control"</span><span id="e401" class="lj lk iq lf b gy lt lm l ln lo">value={this.state.description}</span><span id="372d" class="lj lk iq lf b gy lt lm l ln lo">onChange={this.onChangeDescription}</span><span id="04c1" class="lj lk iq lf b gy lt lm l ln lo">/&gt;</span><span id="ab2d" class="lj lk iq lf b gy lt lm l ln lo">&lt;/div&gt;</span><span id="4a8a" class="lj lk iq lf b gy lt lm l ln lo">&lt;div className="form-group"&gt;</span><span id="1de0" class="lj lk iq lf b gy lt lm l ln lo">&lt;label&gt;Duration(in minutes): &lt;/label&gt;</span><span id="bdb3" class="lj lk iq lf b gy lt lm l ln lo">&lt;input</span><span id="05d8" class="lj lk iq lf b gy lt lm l ln lo">type="text"</span><span id="e8d7" class="lj lk iq lf b gy lt lm l ln lo">className="form-control"</span><span id="2ef8" class="lj lk iq lf b gy lt lm l ln lo">value={this.state.duration}</span><span id="68bf" class="lj lk iq lf b gy lt lm l ln lo">onChange={this.onChangeDuration}</span><span id="c38d" class="lj lk iq lf b gy lt lm l ln lo">/&gt;</span><span id="1549" class="lj lk iq lf b gy lt lm l ln lo">&lt;/div&gt;</span><span id="d2d4" class="lj lk iq lf b gy lt lm l ln lo">&lt;div className="form-group"&gt;</span><span id="c52c" class="lj lk iq lf b gy lt lm l ln lo">&lt;label&gt;Date: &lt;/label&gt;</span><span id="d750" class="lj lk iq lf b gy lt lm l ln lo">&lt;div&gt;</span><span id="5ada" class="lj lk iq lf b gy lt lm l ln lo">&lt;DatePicker</span><span id="1b28" class="lj lk iq lf b gy lt lm l ln lo">selected={this.state.date}</span><span id="1b78" class="lj lk iq lf b gy lt lm l ln lo">onChange={this.onChangeDate}</span><span id="a445" class="lj lk iq lf b gy lt lm l ln lo">/&gt;</span><span id="138e" class="lj lk iq lf b gy lt lm l ln lo">&lt;/div&gt;</span><span id="11e1" class="lj lk iq lf b gy lt lm l ln lo">&lt;/div&gt;</span><span id="af42" class="lj lk iq lf b gy lt lm l ln lo">&lt;div className="form-group"&gt;</span><span id="f0f5" class="lj lk iq lf b gy lt lm l ln lo">&lt;input type="submit" value="Edit Exercise Log" className="btn btn-primary" /&gt;</span><span id="14c8" class="lj lk iq lf b gy lt lm l ln lo">&lt;/div&gt;</span><span id="613e" class="lj lk iq lf b gy lt lm l ln lo">&lt;/form&gt;</span><span id="f8b6" class="lj lk iq lf b gy lt lm l ln lo">&lt;/div&gt;</span><span id="4637" class="lj lk iq lf b gy lt lm l ln lo">);</span><span id="09ee" class="lj lk iq lf b gy lt lm l ln lo">}</span><span id="70bd" class="lj lk iq lf b gy lt lm l ln lo">}</span><span id="f00d" class="lj lk iq lf b gy lt lm l ln lo">export default EditExercise;</span></pre><p id="b382" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">exercise list . jsx</strong></p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="0028" class="lj lk iq lf b gy ll lm l ln lo">import React, { Component } from 'react';</span><span id="7829" class="lj lk iq lf b gy lt lm l ln lo">import { Link } from "react-router-dom";</span><span id="de4b" class="lj lk iq lf b gy lt lm l ln lo">import axios from "axios";</span><span id="f45d" class="lj lk iq lf b gy lt lm l ln lo">const Exercise = props =&gt; (</span><span id="3ec7" class="lj lk iq lf b gy lt lm l ln lo">&lt;tr&gt;</span><span id="dcc8" class="lj lk iq lf b gy lt lm l ln lo">&lt;td&gt;{props.exercise.username}&lt;/td&gt;</span><span id="84d9" class="lj lk iq lf b gy lt lm l ln lo">&lt;td&gt;{props.exercise.description}&lt;/td&gt;</span><span id="afef" class="lj lk iq lf b gy lt lm l ln lo">&lt;td&gt;{props.exercise.duration}&lt;/td&gt;</span><span id="f59a" class="lj lk iq lf b gy lt lm l ln lo">&lt;td&gt;{props.exercise.date.substring(0,10)}&lt;/td&gt;</span><span id="6071" class="lj lk iq lf b gy lt lm l ln lo">&lt;td&gt;</span><span id="cdc5" class="lj lk iq lf b gy lt lm l ln lo">&lt;button className="btn btn-secondary"&gt;&lt;Link to={"/edit/"+props.exercise._id} style={{color:"white"}}&gt;Edit&lt;/Link&gt;&lt;/button&gt; | &lt;button className="btn btn-danger" onClick={() =&gt; {props.deleteExercise(props.exercise._id) }}&gt;Delete&lt;/button&gt;</span><span id="8694" class="lj lk iq lf b gy lt lm l ln lo">&lt;/td&gt;</span><span id="8790" class="lj lk iq lf b gy lt lm l ln lo">&lt;/tr&gt;</span><span id="3881" class="lj lk iq lf b gy lt lm l ln lo">)</span><span id="e078" class="lj lk iq lf b gy lt lm l ln lo">class ExercisesList extends Component {</span><span id="b166" class="lj lk iq lf b gy lt lm l ln lo">constructor(props) {</span><span id="6d1a" class="lj lk iq lf b gy lt lm l ln lo">super(props);</span><span id="fd08" class="lj lk iq lf b gy lt lm l ln lo">this.state = {</span><span id="8a6d" class="lj lk iq lf b gy lt lm l ln lo">exercises: []</span><span id="5edd" class="lj lk iq lf b gy lt lm l ln lo">}</span><span id="5b41" class="lj lk iq lf b gy lt lm l ln lo">this.deleteExercise = this.deleteExercise.bind(this);</span><span id="67bb" class="lj lk iq lf b gy lt lm l ln lo">}</span><span id="d955" class="lj lk iq lf b gy lt lm l ln lo">componentDidMount() {</span><span id="a7e0" class="lj lk iq lf b gy lt lm l ln lo">axios.get('http://localhost:5000/exercises/')</span><span id="a6f5" class="lj lk iq lf b gy lt lm l ln lo">.then(res =&gt; {</span><span id="64e6" class="lj lk iq lf b gy lt lm l ln lo">this.setState({ exercises: res.data })</span><span id="bdf9" class="lj lk iq lf b gy lt lm l ln lo">})</span><span id="4359" class="lj lk iq lf b gy lt lm l ln lo">.catch(error =&gt; console.log(error));</span><span id="c61b" class="lj lk iq lf b gy lt lm l ln lo">}</span><span id="4235" class="lj lk iq lf b gy lt lm l ln lo">deleteExercise(id) {</span><span id="be3f" class="lj lk iq lf b gy lt lm l ln lo">axios.delete('http://localhost:5000/exercises/' +id)</span><span id="0b74" class="lj lk iq lf b gy lt lm l ln lo">.then(res =&gt; console.log(res.data));</span><span id="f60e" class="lj lk iq lf b gy lt lm l ln lo">this.setState({ exercises: this.state.exercises.filter(el =&gt; el._id !== id)})</span><span id="8c58" class="lj lk iq lf b gy lt lm l ln lo">}</span><span id="4c20" class="lj lk iq lf b gy lt lm l ln lo">exercisesList() {</span><span id="63cb" class="lj lk iq lf b gy lt lm l ln lo">return this.state.exercises.map(currentexercise =&gt; {</span><span id="53ce" class="lj lk iq lf b gy lt lm l ln lo">return &lt;Exercise exercise={currentexercise} deleteExercise={this.deleteExercise} key={currentexercise._id} /&gt;</span><span id="b136" class="lj lk iq lf b gy lt lm l ln lo">})</span><span id="1ada" class="lj lk iq lf b gy lt lm l ln lo">}</span><span id="e94a" class="lj lk iq lf b gy lt lm l ln lo">render() {</span><span id="eeba" class="lj lk iq lf b gy lt lm l ln lo">return (</span><span id="6eeb" class="lj lk iq lf b gy lt lm l ln lo">&lt;div className="container"&gt;</span><span id="5598" class="lj lk iq lf b gy lt lm l ln lo">&lt;h3&gt;Logged Exercises&lt;/h3&gt;</span><span id="dada" class="lj lk iq lf b gy lt lm l ln lo">&lt;table className="table"&gt;</span><span id="ee99" class="lj lk iq lf b gy lt lm l ln lo">&lt;thead className="thead-light"&gt;</span><span id="abd3" class="lj lk iq lf b gy lt lm l ln lo">&lt;tr&gt;</span><span id="2b26" class="lj lk iq lf b gy lt lm l ln lo">&lt;th&gt;Username&lt;/th&gt;</span><span id="5318" class="lj lk iq lf b gy lt lm l ln lo">&lt;th&gt;Description&lt;/th&gt;</span><span id="3f76" class="lj lk iq lf b gy lt lm l ln lo">&lt;th&gt;Duration&lt;/th&gt;</span><span id="36dc" class="lj lk iq lf b gy lt lm l ln lo">&lt;th&gt;Date&lt;/th&gt;</span><span id="d0c2" class="lj lk iq lf b gy lt lm l ln lo">&lt;th&gt;Action&lt;/th&gt;</span><span id="39a5" class="lj lk iq lf b gy lt lm l ln lo">&lt;/tr&gt;</span><span id="9959" class="lj lk iq lf b gy lt lm l ln lo">&lt;/thead&gt;</span><span id="297a" class="lj lk iq lf b gy lt lm l ln lo">&lt;tbody&gt;</span><span id="0650" class="lj lk iq lf b gy lt lm l ln lo">{this.exercisesList()}</span><span id="d1ad" class="lj lk iq lf b gy lt lm l ln lo">&lt;/tbody&gt;</span><span id="1e14" class="lj lk iq lf b gy lt lm l ln lo">&lt;/table&gt;</span><span id="0f60" class="lj lk iq lf b gy lt lm l ln lo">&lt;/div&gt;</span><span id="35e5" class="lj lk iq lf b gy lt lm l ln lo">);</span><span id="8941" class="lj lk iq lf b gy lt lm l ln lo">}</span><span id="5096" class="lj lk iq lf b gy lt lm l ln lo">}</span><span id="c779" class="lj lk iq lf b gy lt lm l ln lo">export default ExercisesList;</span></pre><figure class="la lb lc ld gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi lu"><img src="../Images/c5ada1f4d477efad30cd07efb8046361.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PeUHRd7aAi6swpX6Oac8kQ.png"/></div></div></figure><figure class="la lb lc ld gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi lu"><img src="../Images/0ea3e0f4e73baec026d74b0c1001e158.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bGcz5jInZ-hwB-GW9819Nw.png"/></div></div></figure><p id="b4ef" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">就这样…我们已经成功地用MERN堆栈创建了一个演示CRUD操作的应用程序。</p></div></div>    
</body>
</html>