<html>
<head>
<title>🌹The Rosebox project</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">🌹Rosebox项目</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/the-rosebox-project-30b01e7b3a12?source=collection_archive---------18-----------------------#2020-07-19">https://levelup.gitconnected.com/the-rosebox-project-30b01e7b3a12?source=collection_archive---------18-----------------------#2020-07-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="2f2a" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">介绍</h2><div class=""/><div class=""><h2 id="a76d" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">一个实验性的Javascript样式库</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/a1a19656cddf1a5c5527f301bf89b88f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lRJzBDQn72VHfL9YyOrNdg.jpeg"/></div></div></figure><p id="137c" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi lz translated"><span class="l ma mb mc bm md me mf mg mh di">随着今天的web应用，我们发现我们越来越多地创作基于状态的样式，这为“CSS-in-JS”方法的诞生铺平了道路，其本质是<strong class="lf jd">使用Javascript API来创作样式。</strong></span></p><p id="a352" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">Rosebox是一个实验性的CSS-in-JS库，专注于以利用TS类型系统功能的方式在Typescript中建模CSS，提供强表达类型和结构化的改进语法。说了这么多，让我们讨论一下Rosebox的两个主要焦点领域。</p></div><div class="ab cl mi mj hx mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="im in io ip iq"><h1 id="2d4d" class="mp mq it bd mr ms mt mu mv mw mx my mz ki na kj nb kl nc km nd ko ne kp nf ng bi translated">1.🧰强类型API</h1><p id="c02f" class="pw-post-body-paragraph ld le it lf b lg nh kd li lj ni kg ll lm nj lo lp lq nk ls lt lu nl lw lx ly im bi translated">Rosebox使用类型和类型别名将CSS的数据类型映射到Typescript中，这样可以减少打字错误，使样式更具表现力。CSS的一些数据类型直接映射到Typescript的内部类型(<code class="fe nm nn no np b"><a class="ae nq" href="https://www.rosebox.dev/api/#rb-type-time" rel="noopener ugc nofollow" target="_blank">s</a>tring</code>和<code class="fe nm nn no np b"><a class="ae nq" href="https://www.rosebox.dev/api/#rb-type-time" rel="noopener ugc nofollow" target="_blank">n</a>umber</code>)，因此使用类型别名来表示，其他的则映射到RB类型，如<code class="fe nm nn no np b"><a class="ae nq" href="https://www.rosebox.dev/api/#rb-type-time" rel="noopener ugc nofollow" target="_blank">Time</a></code>、<code class="fe nm nn no np b"><a class="ae nq" href="https://www.rosebox.dev/api/#rb-type-transformfunction" rel="noopener ugc nofollow" target="_blank">TransformationFunction</a></code>和<code class="fe nm nn no np b"><a class="ae nq" href="https://www.rosebox.dev/api/#rb-type-length" rel="noopener ugc nofollow" target="_blank">Leng</a>th</code>。</p><p id="bd62" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">让我们来看看下面这个RB中样式对象的例子:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nr"><img src="../Images/83a3e0977ef8f870b417fc6061482f01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_XpjaGmm4g8IhqU8eCw8sQ.png"/></div></div></figure><p id="ca32" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">在CSS中，<code class="fe nm nn no np b">font-size</code>属性的值具有以下值定义:</p><pre class="ks kt ku kv gt ns np nt nu aw nv bi"><span id="678c" class="nw mq it np b gy nx ny l nz oa"><a class="ae nq" href="https://www.w3.org/TR/css-fonts-3/#absolute-size-value" rel="noopener ugc nofollow" target="_blank">&lt;absolute-size&gt;</a> <a class="ae nq" href="https://www.w3.org/TR/css-values-4/#comb-one" rel="noopener ugc nofollow" target="_blank">|</a> <a class="ae nq" href="https://www.w3.org/TR/css-fonts-3/#relative-size-value" rel="noopener ugc nofollow" target="_blank">&lt;relative-size&gt;</a> | <a class="ae nq" href="https://www.w3.org/TR/css-values-4/#typedef-length-percentage" rel="noopener ugc nofollow" target="_blank">&lt;length-percentage&gt;</a></span></pre><p id="76ad" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated"><code class="fe nm nn no np b">&lt;absolute-size&gt;</code>和<code class="fe nm nn no np b">&lt;relative-size&gt;</code>是CSS中的<code class="fe nm nn no np b">keyword</code>数据类型，映射到<code class="fe nm nn no np b">stringLiteral</code>类型。CSS中的<code class="fe nm nn no np b">&lt;length-percentage&gt;</code>数据类型映射到…好吧，RB的<code class="fe nm nn no np b">LengthPercentage</code>只是<code class="fe nm nn no np b">Length</code>和<code class="fe nm nn no np b">Percentage</code>的联合类型。</p><p id="e8f7" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">在上面的例子中，我们使用<code class="fe nm nn no np b">px</code>值构造函数创建了一个类型为<code class="fe nm nn no np b">Length</code>的值，它具有像素单元。值构造函数只是一个与特定类型相关联的函数，它构造该类型的值。值构造器的另一个例子是<code class="fe nm nn no np b">rgb</code>，它创建了一个<code class="fe nm nn no np b">Color</code>类型的rgb值。</p><blockquote class="ob oc od"><p id="65f8" class="ld le oe lf b lg lh kd li lj lk kg ll of ln lo lp og lr ls lt oh lv lw lx ly im bi translated">值构造函数只是一个与特定类型相关联的函数，它构造该类型的值。</p></blockquote><p id="463e" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">你可以在这里查看所有实现的类型<a class="ae nq" href="https://www.rosebox.dev/api/" rel="noopener ugc nofollow" target="_blank">https://www.rosebox.dev/api/</a></p><h1 id="9db2" class="mp mq it bd mr ms oi mu mv mw oj my mz ki ok kj nb kl ol km nd ko om kp nf ng bi translated">2.🔤语法简化和清晰</h1><p id="de1f" class="pw-post-body-paragraph ld le it lf b lg nh kd li lj ni kg ll lm nj lo lp lq nk ls lt lu nl lw lx ly im bi translated">如果我们查看速记属性<code class="fe nm nn no np b">background-position</code>的文档，我们会发现<code class="fe nm nn no np b">&lt;bg-position&gt;</code>的<em class="oe"> </em>值定义如下:</p><pre class="ks kt ku kv gt ns np nt nu aw nv bi"><span id="405a" class="nw mq it np b gy nx ny l nz oa"><a class="ae nq" href="https://www.w3.org/TR/css-backgrounds-3/#typedef-bg-position" rel="noopener ugc nofollow" target="_blank">&lt;bg-position&gt;</a> = [  [ left <a class="ae nq" href="https://www.w3.org/TR/css3-values/#comb-one" rel="noopener ugc nofollow" target="_blank">|</a> center <a class="ae nq" href="https://www.w3.org/TR/css3-values/#comb-one" rel="noopener ugc nofollow" target="_blank">|</a> right <a class="ae nq" href="https://www.w3.org/TR/css3-values/#comb-one" rel="noopener ugc nofollow" target="_blank">|</a> top <a class="ae nq" href="https://www.w3.org/TR/css3-values/#comb-one" rel="noopener ugc nofollow" target="_blank">|</a> bottom <a class="ae nq" href="https://www.w3.org/TR/css3-values/#comb-one" rel="noopener ugc nofollow" target="_blank">|</a> <a class="ae nq" href="https://www.w3.org/TR/css3-values/#typedef-length-percentage" rel="noopener ugc nofollow" target="_blank">&lt;length-percentage&gt;</a> ]<br/><a class="ae nq" href="https://www.w3.org/TR/css3-values/#comb-one" rel="noopener ugc nofollow" target="_blank">|</a><br/>  [ left <a class="ae nq" href="https://www.w3.org/TR/css3-values/#comb-one" rel="noopener ugc nofollow" target="_blank">|</a> center <a class="ae nq" href="https://www.w3.org/TR/css3-values/#comb-one" rel="noopener ugc nofollow" target="_blank">|</a> right <a class="ae nq" href="https://www.w3.org/TR/css3-values/#comb-one" rel="noopener ugc nofollow" target="_blank">|</a> <a class="ae nq" href="https://www.w3.org/TR/css3-values/#typedef-length-percentage" rel="noopener ugc nofollow" target="_blank">&lt;length-percentage&gt;</a> ]<br/>  [ top <a class="ae nq" href="https://www.w3.org/TR/css3-values/#comb-one" rel="noopener ugc nofollow" target="_blank">|</a> center <a class="ae nq" href="https://www.w3.org/TR/css3-values/#comb-one" rel="noopener ugc nofollow" target="_blank">|</a> bottom <a class="ae nq" href="https://www.w3.org/TR/css3-values/#comb-one" rel="noopener ugc nofollow" target="_blank">|</a> <a class="ae nq" href="https://www.w3.org/TR/css3-values/#typedef-length-percentage" rel="noopener ugc nofollow" target="_blank">&lt;length-percentage&gt;</a> ]<br/><a class="ae nq" href="https://www.w3.org/TR/css3-values/#comb-one" rel="noopener ugc nofollow" target="_blank">|</a><br/>  [ center <a class="ae nq" href="https://www.w3.org/TR/css3-values/#comb-one" rel="noopener ugc nofollow" target="_blank">|</a> [ left <a class="ae nq" href="https://www.w3.org/TR/css3-values/#comb-one" rel="noopener ugc nofollow" target="_blank">|</a> right ] <a class="ae nq" href="https://www.w3.org/TR/css3-values/#typedef-length-percentage" rel="noopener ugc nofollow" target="_blank">&lt;length-percentage&gt;</a><a class="ae nq" href="https://www.w3.org/TR/css3-values/#mult-opt" rel="noopener ugc nofollow" target="_blank">?</a> ] <a class="ae nq" href="https://www.w3.org/TR/css3-values/#comb-all" rel="noopener ugc nofollow" target="_blank">&amp;&amp;</a><br/>  [ center <a class="ae nq" href="https://www.w3.org/TR/css3-values/#comb-one" rel="noopener ugc nofollow" target="_blank">|</a> [ top <a class="ae nq" href="https://www.w3.org/TR/css3-values/#comb-one" rel="noopener ugc nofollow" target="_blank">|</a> bottom ] <a class="ae nq" href="https://www.w3.org/TR/css3-values/#typedef-length-percentage" rel="noopener ugc nofollow" target="_blank">&lt;length-percentage&gt;</a><a class="ae nq" href="https://www.w3.org/TR/css3-values/#mult-opt" rel="noopener ugc nofollow" target="_blank">?</a> ]<br/>]</span></pre><p id="37e1" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">这意味着下列值是有效的:</p><pre class="ks kt ku kv gt ns np nt nu aw nv bi"><span id="1f4b" class="nw mq it np b gy nx ny l nz oa">left  // The second value is omitted<br/>right 60%<br/>center top 60%<br/>top 50% left // changing the order of axes</span></pre><p id="0913" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">太多的选项涉及省略值和颠倒轴的顺序…如果你问我，我会觉得困惑，没有明显的优势。</p><p id="322f" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">在RB中，<code class="fe nm nn no np b">&lt;bg-position&gt;</code>有一个非常简单的对应类型叫做<code class="fe nm nn no np b">Position</code>，它描述了一个元素在2D空间中的位置。它只接受<code class="fe nm nn no np b">Length</code>或<code class="fe nm nn no np b">Percentage</code>值，并且总是以相同的预期顺序(x，y)取值。为了构造这种类型的值，您调用它的值构造器<code class="fe nm nn no np b">pos(x, y)</code>。</p><p id="5bde" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">示例:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi on"><img src="../Images/76da239ad570a46b7055cc0556af525d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-fp57gCots8YGJAOHd_qhQ.png"/></div></div></figure><blockquote class="ob oc od"><p id="01ab" class="ld le oe lf b lg lh kd li lj lk kg ll of ln lo lp og lr ls lt oh lv lw lx ly im bi translated">只要有机会在不真正牺牲表达性或准确性的情况下简化语法或减少歧义，我们就会这样做。</p></blockquote></div><div class="ab cl mi mj hx mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="im in io ip iq"><p id="86f8" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">如果我们继续阅读<code class="fe nm nn no np b">&lt;bg-position&gt;</code>的文档，我们会发现以下注释:</p><blockquote class="ob oc od"><p id="1e3c" class="ld le oe lf b lg lh kd li lj lk kg ll of ln lo lp og lr ls lt oh lv lw lx ly im bi translated">如果只指定了一个值，第二个值被假定为<a class="ae nq" href="https://www.w3.org/TR/css-backgrounds-3/#valdef-background-position-center" rel="noopener ugc nofollow" target="_blank">中心</a></p></blockquote><p id="68ff" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">在这里我敢说:</p><blockquote class="oo"><p id="8e24" class="op oq it bd or os ot ou ov ow ox ly dk translated"><strong class="ak">编程中的隐含性导致认知开销和不确定性</strong>。</p></blockquote><p id="0e95" class="pw-post-body-paragraph ld le it lf b lg oy kd li lj oz kg ll lm pa lo lp lq pb ls lt lu pc lw lx ly im bi translated">每当开发人员在代码中发现一个类似的不包含所有值的松散的速记属性时，他/她就会想:“缺少的值将默认为什么？”<em class="oe">。</em>更糟糕的是，像<code class="fe nm nn no np b">overflow</code>这样的简写属性将第一个提供的值复制到其他缺少的值中，而不是默认为某个值。所以现在我们有两种处理省略值的方法:<strong class="lf jd">复制</strong>和<strong class="lf jd">默认</strong>。</p><p id="eeff" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">作为RB的一般经验法则，如果CSS中的一个速记属性可以接受多个值(例如<code class="fe nm nn no np b">padding: 8px 16px 40px</code>)，但只有一个是强制的(例如<code class="fe nm nn no np b">padding: 5px</code>)，其他缺少的值可以是从提供的值中复制的<strong class="lf jd"/>(<code class="fe nm nn no np b">padding: 5px</code>相当于<code class="fe nm nn no np b">padding: 5px 5px 5px 5px</code>)，那么RB将提供一个单值语法和一个多值语法。另一方面，如果缺少的值将<strong class="lf jd">默认</strong>为某个其他值，那么RB将使所有的值都是强制的。这种方法在简洁和清晰之间取得了平衡。</p><blockquote class="ob oc od"><p id="bf91" class="ld le oe lf b lg lh kd li lj lk kg ll of ln lo lp og lr ls lt oh lv lw lx ly im bi translated">如果CSS中的一个速记属性可以接受多个值，但只有一个值是强制的，并且它使用<strong class="lf jd">复制</strong>来获得缺失的值，那么RB将提供一个单值语法和一个多值语法，否则<strong class="lf jd">，</strong> RB将使所有的值都是强制的。</p></blockquote><h1 id="7756" class="mp mq it bd mr ms oi mu mv mw oj my mz ki ok kj nb kl ol km nd ko om kp nf ng bi translated">✍️最后的话</h1><p id="0566" class="pw-post-body-paragraph ld le it lf b lg nh kd li lj ni kg ll lm nj lo lp lq nk ls lt lu nl lw lx ly im bi translated">Rosebox仍然非常年轻，处于实验阶段，许多属性和CSS函数仍然没有实现，虽然你仍然可以使用它们，但是它们现在还没有得到类型系统的支持。</p><p id="b2a8" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">在下面，您可以找到与项目相关的不同链接:</p><p id="4911" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">github:<a class="ae nq" href="https://github.com/hugonteifeh/rosebox" rel="noopener ugc nofollow" target="_blank">https://github.com/hugonteifeh/rosebox</a></p><p id="f87c" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">网址:<a class="ae nq" href="https://www.rosebox.dev/" rel="noopener ugc nofollow" target="_blank">https://www.rosebox.dev/</a></p><blockquote class="ob oc od"><p id="8960" class="ld le oe lf b lg lh kd li lj lk kg ll of ln lo lp og lr ls lt oh lv lw lx ly im bi translated">如果它没有意义，继续重塑它，直到它有意义</p></blockquote></div></div>    
</body>
</html>