<html>
<head>
<title>Rematch with Hooks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用钩子重赛</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/rematch-with-hooks-50a8380c46e4?source=collection_archive---------4-----------------------#2019-06-24">https://levelup.gitconnected.com/rematch-with-hooks-50a8380c46e4?source=collection_archive---------4-----------------------#2019-06-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/39f8cea2224cf85306d48eb453496293.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iiWOkCDauiCyMHG51ifqVw.png"/></div></div></figure><p id="163c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果您一直在使用Rematch来管理应用程序中的状态，那么最新发布的添加了钩子支持的<code class="fe kw kx ky kz b">react-redux</code>应该会让您非常兴奋。</p><p id="0a4f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Rematch一直试图保持与现有的<code class="fe kw kx ky kz b">react-redux</code> API的兼容性，对于新发布的支持钩子的版本也是如此！</p><blockquote class="la"><p id="ba71" class="lb lc iq bd ld le lf lg lh li lj kv dk translated"><em class="lk">除了有更多可读和可重用的代码，钩子允许我们在用TypeScript添加类型安全时做更少的工作。</em></p></blockquote><p id="bbc8" class="pw-post-body-paragraph jy jz iq ka b kb ll kd ke kf lm kh ki kj ln kl km kn lo kp kq kr lp kt ku kv ij bi translated">我们来看一个“老办法”做事的例子。下面是一个组件，它将用户列表存储在Redux store中，并在安装组件时加载用户:</p><figure class="lq lr ls lt gt jr"><div class="bz fp l di"><div class="lu lv l"/></div></figure><p id="d9a3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这段代码看起来和运行起来都很好，但是有几个问题是我们在hook出现之前无法解决的。其中之一就是与打字有关的<code class="fe kw kx ky kz b">connect</code>组件。众所周知，高阶组件很难正确地输入类型，因为很难推断传递给内部组件的属性的类型。为了解决这个问题，我们必须单独定义传递给组件<code class="fe kw kx ky kz b">(type UsersProps)</code>的道具的类型，然后为组件<code class="fe kw kx ky kz b">(FC&lt;UsersProps&gt;)</code>手动设置它们。</p><p id="f485" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">有了钩子，我们可以用<code class="fe kw kx ky kz b">useSelector</code>钩子代替<code class="fe kw kx ky kz b">mapState</code>函数，用<code class="fe kw kx ky kz b">useDispatch</code>代替<code class="fe kw kx ky kz b">mapDispatch</code>函数，并且我们可以完全放弃难以键入的<code class="fe kw kx ky kz b">connect</code> HOC，留给我们简洁且完全类型化的代码:</p><figure class="lq lr ls lt gt jr"><div class="bz fp l di"><div class="lu lv l"/></div></figure><p id="09bc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果我们需要处理多个动作，我们可以创建一个定制的<code class="fe kw kx ky kz b">useRematchDispatch</code>钩子，这样我们就可以使用我们编写<code class="fe kw kx ky kz b">mapDispatch</code>函数时所熟悉的语法:</p><figure class="lq lr ls lt gt jr"><div class="bz fp l di"><div class="lu lv l"/></div></figure><p id="7e4e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe kw kx ky kz b">useRematchDispatch</code>如果我们想要重构现有的重匹配应用程序，hook也可以派上用场，因为它允许我们以最小的改动复制<code class="fe kw kx ky kz b">mapDispatch</code>函数。</p><p id="dcbd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你想了解更多关于复赛的知识，可以看看我在YouTube 上的<a class="ae lw" href="https://www.youtube.com/playlist?list=PLNG2YBDrzK-w1VSeDpMxdGwkb4L6hDy8Z" rel="noopener ugc nofollow" target="_blank">免费课程。</a></p></div><div class="ab cl lx ly hu lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="ij ik il im in"><p id="3ff0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="me">原载于https://konstantinlebedev.com</em><a class="ae lw" href="https://konstantinlebedev.com/rematch-with-hooks/" rel="noopener ugc nofollow" target="_blank"><em class="me"/></a><em class="me">。</em></p></div></div>    
</body>
</html>