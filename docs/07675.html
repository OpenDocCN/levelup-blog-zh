<html>
<head>
<title>Experimental study of the state of a gas</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">对气体状态的实验研究</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/experimental-study-of-the-state-of-a-gas-b0326ef8f8f?source=collection_archive---------6-----------------------#2021-03-04">https://levelup.gitconnected.com/experimental-study-of-the-state-of-a-gas-b0326ef8f8f?source=collection_archive---------6-----------------------#2021-03-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="66da" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用Arduino，我们可以测量气体的温度和压力，并研究其状态方程</h2></div></div><div class="ab cl ki kj hx kk" role="separator"><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn"/></div><div class="im in io ip iq"><p id="4bb1" class="pw-post-body-paragraph kp kq it kr b ks kt ju ku kv kw jx kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">在我的上一篇文章中，我展示了如何通过BLE从Arduino获取实验数据。正如所承诺的，我现在开始收集和解释这些数据，在实验中，气体经历<strong class="kr iu">等容</strong>过程，即压力<em class="lm"> p </em>和温度<em class="lm"> T </em>可以变化，而体积<em class="lm"> V </em>保持不变的过程。</p><p id="f4c1" class="pw-post-body-paragraph kp kq it kr b ks kt ju ku kv kw jx kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">这个实验确实非常简单。你只需要一个支持BLE的Arduino板，一个气压和温度传感器，一个电源和一个罐子。我使用了一个连接到BME180传感器的Arduino MKR 1010 WiFi。作为电源，我刚刚使用了一个电源组。</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi ln"><img src="../Images/671a7731f316ae4cc87e3bc8519a1b4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YkgcNcd1lMxLjuNX4ALdUg.png"/></div></div><figcaption class="lz ma gj gh gi mb mc bd b be z dk translated">一个装有Arduino MKR 1010 WiFi、BME180传感器和电源组的罐子。</figcaption></figure><p id="410d" class="pw-post-body-paragraph kp kq it kr b ks kt ju ku kv kw jx kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">罐子里的气体量相当稳定，至少在相对较大的压力和温度区间内是如此。容器不是完全密封的，因此，当内部压力过高或过低时，气体泄漏是可能的，当温度变得过低或过高时也是如此。<em class="lm">低</em>和<em class="lm">高</em>在这里的含义，取决于罐子类型。由于热膨胀，容器的体积也可能改变。然而，如果实验在离正常条件不远的地方进行(p=101.325 kPa，T = 20°C)，像图中这样的罐子就可以完美地工作，尤其是在过程足够慢的情况下。</p><p id="74cf" class="pw-post-body-paragraph kp kq it kr b ks kt ju ku kv kw jx kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">在我做的实验中，我只是把罐子放在冰箱里一会儿，然后从里面拿出来，等着它随着室温变热。事实上，热量是由罐子里的电子设备释放出来的。这样的热量有助于提高温度，但是，当然，它没有害处。</p><p id="2fda" class="pw-post-body-paragraph kp kq it kr b ks kt ju ku kv kw jx kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated"><strong class="kr iu">从BLE <br/> </strong>读取数据使用任何BLE扫描仪(智能手机和电脑都有应用程序)，人们可以很容易地找到设备的地址，通常是类似于MAC地址的形式(例如A5:B3:C2:24:15:16)或类似于UUID的形式(例如A8 D7 a4 f 1–3d 94–4A7D-9D3C-3d 17607 c 3515)。</p><p id="8d03" class="pw-post-body-paragraph kp kq it kr b ks kt ju ku kv kw jx kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">下面的代码部分是从<a class="ae ll" href="https://medium.com/@baldengineer/about" rel="noopener">詹姆斯·刘易斯</a>提供的例子中剽窃来的。我不是异步流程方面的专家，所以下面的内容可能不会太严谨。如果你发现一些令人不安的事情，请通过电子邮件或在评论中给我留言。</p><p id="70d6" class="pw-post-body-paragraph kp kq it kr b ks kt ju ku kv kw jx kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">首先，我们需要创建一个对象，该对象等待一个异步事件(包括来自BLE数据源的数据的可用性),如果检测到该事件，就对其做出反应。这是按如下方式完成的。</p><pre class="lo lp lq lr gt md me mf mg aw mh bi"><span id="0469" class="mi mj it me b gy mk ml l mm mn">import asyncio</span><span id="61b2" class="mi mj it me b gy mo ml l mm mn">address = ("A8D7A4F1-3D94-4A7D-9D3C-3D17607C3515")</span><span id="586e" class="mi mj it me b gy mo ml l mm mn">if __name__ == “__main__”:<br/>  loop = asyncio.get_event_loop()<br/>  loop.run_until_complete(run(address))</span></pre><p id="187a" class="pw-post-body-paragraph kp kq it kr b ks kt ju ku kv kw jx kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">这里，<code class="fe mp mq mr me b">loop</code>是一个持有所谓循环的对象(你可以把它想象成一个无限循环轮询一个事件)。在最后一行，循环被指示以<code class="fe mp mq mr me b">address</code>作为参数调用函数<code class="fe mp mq mr me b">run</code>。后者是一个格式如上的字符串(如果运行在MAC或Linux上，则为UUID；作为MAC地址，如果您在Windows上运行)。反过来，<code class="fe mp mq mr me b">run()</code>被定义为</p><pre class="lo lp lq lr gt md me mf mg aw mh bi"><span id="3932" class="mi mj it me b gy mk ml l mm mn">from bleak import BleakClient<br/>CH_UUID = "555a0002-0020-467a-9538-01f0652c74e8"</span><span id="4c80" class="mi mj it me b gy mo ml l mm mn">async def run(address):<br/>    async with BleakClient(address) as client:<br/>        x = await client.is_connected()<br/>        await client.start_notify(CH_UUID, notification_handler)<br/>        await asyncio.sleep(600)<br/>        await client.stop_notify(CH_UUID)</span></pre><p id="f2b8" class="pw-post-body-paragraph kp kq it kr b ks kt ju ku kv kw jx kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated"><code class="fe mp mq mr me b">async with EXPR as VAR</code>块可以这样读:<code class="fe mp mq mr me b">BleakClient(address)</code>尝试连接到给定的地址。如果成功，那么在块中产生的BLE客户端被标识为<code class="fe mp mq mr me b">client</code>,并执行后者。它要求<code class="fe mp mq mr me b">client</code>提供关于新的可用数据的通知，其中<code class="fe mp mq mr me b">CH_UUID</code>作为UUID，然后休眠600秒，然后停止通知。在通知新数据时，将调用<code class="fe mp mq mr me b">notification_handler</code>，定义如下。</p><pre class="lo lp lq lr gt md me mf mg aw mh bi"><span id="557e" class="mi mj it me b gy mk ml l mm mn">def notification_handler(sender, data):<br/>    array = bytearray(data)</span><span id="8c7e" class="mi mj it me b gy mo ml l mm mn">    t  = struct.unpack('f', array[0:4])<br/>    p = struct.unpack('f', array[4:8])<br/>    T = struct.unpack('f', array[8:12])<br/>    print(f'{t[0]}, {p[0]}, {T[0]}')<br/>    f = open('pT.csv', 'a')<br/>    f.write(f'{t[0]}, {p[0]}, {T[0]}\n')<br/>    f.flush()<br/>    f.close()</span></pre><p id="3ebf" class="pw-post-body-paragraph kp kq it kr b ks kt ju ku kv kw jx kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">它将从BLE客户端接收的<code class="fe mp mq mr me b">data</code>解释为一个字节数组。然后，它从数组中提取前四个字节，并将它们用作变量<code class="fe mp mq mr me b">t</code>的内容。第二组四个字节被解释为浮点并分配给<code class="fe mp mq mr me b">p</code>，而最后一组四个字节代表温度<code class="fe mp mq mr me b">T</code>。事实上，我指示运行在Arduino上的客户端将这三个值打包到发送到连接设备的数组中(参见<a class="ae ll" href="https://giovanni-organtini.medium.com/arduino-ble-programming-4fa97506cf6a" rel="noopener">相应的帖子</a>)。</p><p id="998c" class="pw-post-body-paragraph kp kq it kr b ks kt ju ku kv kw jx kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">剩下的就很简单了:数据被打印在屏幕上，并写入一个名为<code class="fe mp mq mr me b">pT.csv</code>的文件，在<em class="lm">追加</em>模式下打开。</p><p id="1d5a" class="pw-post-body-paragraph kp kq it kr b ks kt ju ku kv kw jx kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated"><strong class="kr iu">数据分析<br/> </strong>一旦如上所述收集了数据，我们就可以从CSV文件中读取<em class="lm"> p </em>和<em class="lm"> V </em>并对其进行分析，例如，绘制作为温度函数的压力图。结果以及线性拟合如下所示。</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/6ccaac7905b989bcebf172d32c01bd33.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*lHyV4BoCD1sg1s-jp26lIA.png"/></div></figure><p id="94d6" class="pw-post-body-paragraph kp kq it kr b ks kt ju ku kv kw jx kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">正如所料，压力<em class="lm"> p </em>作为体积<em class="lm"> V </em>的函数遵循一条直线。对直线拟合数据，我们得到截距<em class="lm"> q </em>。后者允许我们估计绝对温标的零点。实际上，理想气体的状态方程可以写成<em class="lm"> pV=nRT </em>，当<em class="lm"> T </em>用开尔文表示时。如果用摄氏度来表示(关于温标的讨论，也参见<a class="ae ll" href="https://medium.com/cantors-paradise/temperature-scales-42d6cdb6e2be" rel="noopener">这篇文章</a>)，等式读作<em class="lm"> pV=nR(T+T₀) </em>和<em class="lm"> q=nRT₀/V </em>。因此，T₀的值是从<em class="lm"> q </em>的值和直线的斜率<em class="lm"> m </em>获得的(<em class="lm"> m=nR/V </em>)。</p><p id="4d28" class="pw-post-body-paragraph kp kq it kr b ks kt ju ku kv kw jx kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">事实上，结果并不坏。我们发现t₀=−265 2°c，实际上是已知值273°c的四倍，但我们必须考虑到，该实验是在资源有限且未对传感器进行适当校准的情况下完成的。在这些条件下，几个sigmas的差异是非常好的结果。</p><p id="a778" class="pw-post-body-paragraph kp kq it kr b ks kt ju ku kv kw jx kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">从这样的结果中，人们可以继续研究，例如，过程的可逆性。如果这个过程足够慢，温度的来回变化会导致pV平面遵循相同的曲线(直线)。如果温度变化非常快(例如，当离开冰箱时，将罐子放入热水中)，该过程可能变得不可逆(即，它由一连串非平衡态的状态组成)，并且pV平面中的轨迹可能明显不同。</p><p id="128a" class="pw-post-body-paragraph kp kq it kr b ks kt ju ku kv kw jx kx ky kz la lb lc ld le lf lg lh li lj lk im bi translated">根据我的经验，这样的观察对于阐明可逆和不可逆过程的区别是很重要的。你仍然可以测量压力、温度和体积，然而，远离平衡，它们不满足状态方程。因此，气体的状态不能用pV平面上的一个点来表示。</p></div></div>    
</body>
</html>