<html>
<head>
<title>Visualization in Python — Creating Word Cloud</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中的可视化——创建单词云</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/visualization-in-python-creating-word-cloud-a3e1e73e7adb?source=collection_archive---------1-----------------------#2022-01-05">https://levelup.gitconnected.com/visualization-in-python-creating-word-cloud-a3e1e73e7adb?source=collection_archive---------1-----------------------#2022-01-05</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="c9b1" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用单词云来可视化文本内容</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/37ac063f0ef5187a7f69258c5d913d6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1332/format:webp/1*eWGAf348yiO39SjqFf-LWA.png"/></div><figcaption class="kq kr gj gh gi ks kt bd b be z dk translated">作者图片</figcaption></figure><p id="b0c8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">每当提到Python中的可视化，大多数人都会想到条形图、饼状图等。如果您的数据围绕着一组项目，那么这些确实是您经常创建的可视化类型。但是如果你正在处理文字和文本呢？视觉上表现一段文字中包含的关键信息的最佳方式是什么？</p><p id="08f5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">答案是<strong class="kw iu"> <em class="lq">字云</em> </strong>。</p><p id="577f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">简单来说，<em class="lq">字云</em>就是包含以不同大小显示的字的图像。单词的大小决定了单词的重要性——单词越大、越粗，在给定的文本块中出现的频率就越高。</p><h1 id="07bc" class="lr ls it bd lt lu lv lw lx ly lz ma mb jz mc ka md kc me kd mf kf mg kg mh mi bi translated">安装模块</h1><p id="6702" class="pw-post-body-paragraph ku kv it kw b kx mj ju kz la mk jx lc ld ml lf lg lh mm lj lk ll mn ln lo lp im bi translated">要安装生成单词云所需的模块，请在Jupyter Notebook中运行以下命令:</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="c754" class="mt ls it mp b gy mu mv l mw mx">!pip install wordcloud</span></pre><p id="9e1a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们利用位于<a class="ae my" href="https://www.kaggle.com/lakshmi25npathi/imdb-dataset-of-50k-movie-reviews/version/1" rel="noopener ugc nofollow" target="_blank">https://www . ka ggle . com/Lakshmi 25 npathi/IMDB-dataset-of-50k-movie-reviews/version/1</a>的IMBD数据集。</p><p id="4ea7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">使用Pandas，将数据集作为数据帧加载:</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="6e89" class="mt ls it mp b gy mu mv l mw mx">import pandas as pd<br/>import numpy as np</span><span id="ca38" class="mt ls it mp b gy mz mv l mw mx">df = pd.read_csv('IMDB Dataset.csv')<br/>df</span></pre><p id="6fd0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">数据帧有2列和50，000行:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi na"><img src="../Images/07ba0da80020c0144d73a4256d1b0d5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/1*4iAKEjOxFR2Q-UUe-Kv0hw.png"/></div></figure><p id="41d8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们对第一行进行采样，并打印出内容:</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="6038" class="mt ls it mp b gy mu mv l mw mx">display(df.iloc[0,0])   # review<br/>display(df.iloc[0,1])   # sentiment</span></pre><p id="c8c5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">该行的第一列包含电影的评论:</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="2c42" class="mt ls it mp b gy mu mv l mw mx">"One of the other reviewers has mentioned that after watching just 1 Oz episode you'll be hooked. They are right, as this is exactly what happened with me.&lt;br /&gt;&lt;br /&gt;The first thing that struck me about Oz was its brutality and unflinching scenes of violence, which set in right from the word GO. Trust me, this is not a show for the faint hearted or timid. This show pulls no punches with regards to drugs, sex or violence. Its is hardcore, in the classic use of the word.&lt;br /&gt;&lt;br /&gt;It is called OZ as that is the nickname given to the Oswald Maximum Security State Penitentary. It focuses mainly on Emerald City, an experimental section of the prison where all the cells have glass fronts and face inwards, so privacy is not high on the agenda. Em City is home to many..Aryans, Muslims, gangstas, Latinos, Christians, Italians, Irish and more....so scuffles, death stares, dodgy dealings and shady agreements are never far away.&lt;br /&gt;&lt;br /&gt;I would say the main appeal of the show is due to the fact that it goes where other shows wouldn't dare. Forget pretty pictures painted for mainstream audiences, forget charm, forget romance...OZ doesn't mess around. The first episode I ever saw struck me as so nasty it was surreal, I couldn't say I was ready for it, but as I watched more, I developed a taste for Oz, and got accustomed to the high levels of graphic violence. Not just violence, but injustice (crooked guards who'll be sold out for a nickel, inmates who'll kill on order and get away with it, well mannered, middle class inmates being turned into prison bitches due to their lack of street skills or prison experience) Watching Oz, you may become comfortable with what is uncomfortable viewing....thats if you can get in touch with your darker side."</span></pre><p id="5cf4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">第二列表示评论的情绪(无论是正面评论还是负面评论):</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="6bb1" class="mt ls it mp b gy mu mv l mw mx">'positive'</span></pre><h1 id="8133" class="lr ls it bd lt lu lv lw lx ly lz ma mb jz mc ka md kc me kd mf kf mg kg mh mi bi translated">绘制单词Cloud</h1><p id="344e" class="pw-post-body-paragraph ku kv it kw b kx mj ju kz la mk jx lc ld ml lf lg lh mm lj lk ll mn ln lo lp im bi translated">我们将使用的<strong class="kw iu">单词云</strong>模块生成一个单词云作为图像。为了显示图像，我们可以使用matplotlib。为此，让我们定义一个名为<code class="fe nb nc nd mp b">draw_wordcloud()</code>的函数:</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="e515" class="mt ls it mp b gy mu mv l mw mx">import matplotlib.pyplot as plt</span><span id="fd14" class="mt ls it mp b gy mz mv l mw mx">def draw_wordcloud(wordcloud, size):<br/>    plt.figure(figsize = size)<br/>    plt.imshow(wordcloud) <br/>    plt.axis("off")</span></pre><p id="db6b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">该函数接受两个参数——第一个参数包含单词云图像，第二个参数是要绘制的图像的大小(包含宽度和高度的元组)。</p><p id="50f1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">接下来，让我们导入<code class="fe nb nc nd mp b">WordCloud</code>类和<code class="fe nb nc nd mp b">STOPWORDS</code>集，以及<code class="fe nb nc nd mp b">random</code>模块。</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="eac2" class="mt ls it mp b gy mu mv l mw mx">from wordcloud import WordCloud, STOPWORDS<br/>import random</span></pre><p id="367e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">停用词基本上是任何语言中的常用词。<code class="fe nb nc nd mp b">STOPWORDS</code>集合包含常用单词列表:</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="1d7a" class="mt ls it mp b gy mu mv l mw mx"><strong class="mp iu">STOPWORDS</strong><br/>{'&lt;br /&gt;',<br/> '&lt;br&gt;',<br/> 'a',<br/> 'about',<br/> 'above',<br/> 'after',<br/> 'again',<br/> 'against',<br/> 'all',<br/> 'also',<br/> 'am',<br/> 'an',<br/> 'and',<br/> 'any',</span><span id="6875" class="mt ls it mp b gy mz mv l mw mx"> ...<br/> ...</span><span id="a822" class="mt ls it mp b gy mz mv l mw mx">'you',<br/> "you'd",<br/> "you'll",<br/> "you're",<br/> "you've",<br/> 'your',<br/> 'yours',<br/> 'yourself',<br/> 'yourselves'}</span></pre><p id="66c3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">从我们之前看到的回顾文本中，有几个类似于"<code class="fe nb nc nd mp b">&lt;br/&gt;</code>"、"<code class="fe nb nc nd mp b">&lt;br&gt;</code>"和<code class="fe nb nc nd mp b">br</code>的单词实例，所以让我们将它们添加到我们的<code class="fe nb nc nd mp b">STOPWORDS</code>变量中:</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="3f45" class="mt ls it mp b gy mu mv l mw mx"># add additional stop words<br/>STOPWORDS.add('&lt;br /&gt;')<br/>STOPWORDS.add('&lt;br&gt;')<br/>STOPWORDS.add('br')</span></pre><p id="ff19" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们还想从我们的数据框架中随机选择一篇评论:</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="f4a5" class="mt ls it mp b gy mu mv l mw mx"># randomly select a review<br/>row = random.randint(0, df.shape[0])<br/>review = df.iloc[row,0]<br/>rating = df.iloc[row,1]</span></pre><p id="5649" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">最后，通过创建一个<code class="fe nb nc nd mp b">WordCloud</code>类的实例，然后调用它的<code class="fe nb nc nd mp b">generate()</code>方法，生成单词cloud:</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="f745" class="mt ls it mp b gy mu mv l mw mx">wordcloud = WordCloud(width = 1500, <br/>                      height = 1000, <br/>                      random_state = 42, <br/>                      collocations = False, <br/>                      background_color = 'lightgreen', <br/>                      colormap = 'tab10', <br/>                      stopwords = STOPWORDS).generate(review)</span></pre><p id="4192" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">注意为<code class="fe nb nc nd mp b">WordCloud</code>类的初始化器提供的各种参数:</p><ul class=""><li id="e6e3" class="ne nf it kw b kx ky la lb ld ng lh nh ll ni lp nj nk nl nm bi translated"><code class="fe nb nc nd mp b">width</code>和<code class="fe nb nc nd mp b">height</code>参数以像素为单位指定你的单词云的尺寸。</li><li id="d240" class="ne nf it kw b kx nn la no ld np lh nq ll nr lp nj nk nl nm bi translated"><code class="fe nb nc nd mp b">random_state</code>参数保证你用同样的文字生成的词云始终是一样的。如果没有设置这个参数，那么每次运行代码时都会得到不同的单词云。</li><li id="8bc9" class="ne nf it kw b kx nn la no ld np lh nq ll nr lp nj nk nl nm bi translated"><code class="fe nb nc nd mp b">collocations</code>参数被设置为<code class="fe nb nc nd mp b">False</code>，使得单词云不包含二元模型或重复单词。</li></ul><blockquote class="ns nt nu"><p id="2cac" class="ku kv lq kw b kx ky ju kz la lb jx lc nv le lf lg nw li lj lk nx lm ln lo lp im bi translated">二元模型是一对连续的书面单位，如字母、音节或单词。例如“旧金山”、“慢慢走”和“刷牙”都是二元模型的例子。</p></blockquote><ul class=""><li id="9c0f" class="ne nf it kw b kx ky la lb ld ng lh nh ll ni lp nj nk nl nm bi translated"><code class="fe nb nc nd mp b">background_color</code>参数设置单词云的背景颜色。</li><li id="7150" class="ne nf it kw b kx nn la no ld np lh nq ll nr lp nj nk nl nm bi translated"><code class="fe nb nc nd mp b">colormap</code>参数设置用于显示单词云中单词的颜色图。请参考<a class="ae my" href="https://matplotlib.org/stable/tutorials/colors/colormaps.html" rel="noopener ugc nofollow" target="_blank">https://matplotlib . org/stable/tutorials/colors/colormaps . html</a>获取您可以使用的颜色地图列表。</li><li id="5f9f" class="ne nf it kw b kx nn la no ld np lh nq ll nr lp nj nk nl nm bi translated"><code class="fe nb nc nd mp b">stopwords</code>参数设置词云的停止词。在这种情况下，生成的词云将排除提供的停用词列表(<code class="fe nb nc nd mp b">STOPWORDS</code>)。移除词云中的停用词可以让我们专注于重要的词。</li></ul><p id="ec8f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">以下是matplotlib中色彩映射表的示例:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/7e3a575d5d2015f56909493f178f75da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*eaDbor9T8wok44Ost1jAHQ.png"/></div><figcaption class="kq kr gj gh gi ks kt bd b be z dk translated">来源:<a class="ae my" href="https://matplotlib.org/stable/tutorials/colors/colormaps.html" rel="noopener ugc nofollow" target="_blank">https://matplotlib . org/stable/tutorials/colors/colormaps . html</a></figcaption></figure><p id="1e69" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">单词云一旦生成，就需要显示出来。您将利用您之前定义的<code class="fe nb nc nd mp b">draw_wordcloud()</code>函数:</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="bff2" class="mt ls it mp b gy mu mv l mw mx">draw_wordcloud(wordcloud, (12,8))</span></pre><p id="e39b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">云这个词看起来是这样的:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/dc80c302e9e5e279a3148c6c437122dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1332/format:webp/1*zexuwRcsawS3sBtXfEY9Vw.png"/></div></figure><p id="d541" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">您也可以使用<code class="fe nb nc nd mp b">to_file()</code>方法将word cloud保存到文件中:</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="ac78" class="mt ls it mp b gy mu mv l mw mx">wordcloud.to_file('wordcloud.png')</span></pre><h1 id="cf6d" class="lr ls it bd lt lu lv lw lx ly lz ma mb jz mc ka md kc me kd mf kf mg kg mh mi bi translated">基于评论情绪定制词云</h1><p id="1313" class="pw-post-body-paragraph ku kv it kw b kx mj ju kz la mk jx lc ld ml lf lg lh mm lj lk ll mn ln lo lp im bi translated">记住，每个评论都有一种情绪——积极的或消极的。让我们按<code class="fe nb nc nd mp b">sentiment</code>对数据框架进行分组，然后抽取两个正面和两个负面评论，并为每个评论绘制一个词云。为了区分正面评价和负面评价，我们将执行以下操作:</p><ul class=""><li id="116c" class="ne nf it kw b kx ky la lb ld ng lh nh ll ni lp nj nk nl nm bi translated">为负面评价设置粉色背景，为正面评价设置黑色背景</li><li id="a25a" class="ne nf it kw b kx nn la no ld np lh nq ll nr lp nj nk nl nm bi translated">使用<code class="fe nb nc nd mp b">Set1</code>色图进行负面评价，使用<code class="fe nb nc nd mp b">Paired</code>色图进行正面评价</li></ul><p id="ce2e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">以下代码片段为四个电影评论生成单词clouds:</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="77c4" class="mt ls it mp b gy mu mv l mw mx"># stratified sampling based on sentiment<br/>df_samples = df.groupby('sentiment').apply(lambda x: x.sample(2))</span><span id="2aae" class="mt ls it mp b gy mz mv l mw mx">for i in range(4):<br/>    review = df_samples.iloc[i,0]<br/>    review_sentiment = df_samples.iloc[i,1]</span><span id="a627" class="mt ls it mp b gy mz mv l mw mx">    wordcloud = WordCloud(<br/>                    width = 1500, <br/>                    height = 1000, <br/>                    random_state = 42, <br/>                    background_color = 'black' <br/>                      if review_sentiment == 'positive' else <br/>                                             'pink', <br/>                    colormap = 'Paired' <br/>                      if review_sentiment == 'positive' else <br/>                                             'Set1', <br/>                    collocations = False, <br/>                    stopwords = STOPWORDS).generate(review)</span><span id="be6c" class="mt ls it mp b gy mz mv l mw mx">    draw_wordcloud(wordcloud, (12,8))</span></pre><p id="5119" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">以下两个字云是负面评价:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/6a10414eb1d0934b9e68ee1e6b60e21d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1332/format:webp/1*Ns4o0AcVkXRH3JG2l-aqWA.png"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/3d1d89f7d4d4c4779ef27f83914e4856.png" data-original-src="https://miro.medium.com/v2/resize:fit:1332/format:webp/1*ME6RFJrAQwkirYt8sTjoEw.png"/></div></figure><p id="e87e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">接下来的两个词云是正面评价:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/37ac063f0ef5187a7f69258c5d913d6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1332/format:webp/1*eWGAf348yiO39SjqFf-LWA.png"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/b86b7b80b3fb873bfbeaa137cc47e6fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1332/format:webp/1*8X9bjYSyooVD_HRnuoRAQQ.png"/></div></figure><h1 id="2150" class="lr ls it bd lt lu lv lw lx ly lz ma mb jz mc ka md kc me kd mf kf mg kg mh mi bi translated">对单词云使用掩码</h1><p id="6ed2" class="pw-post-body-paragraph ku kv it kw b kx mj ju kz la mk jx lc ld ml lf lg lh mm lj lk ll mn ln lo lp im bi translated"><strong class="kw iu">单词云</strong>模块有一些非常棒的功能，你可以用它们来突出你的单词云——你可以应用一个遮罩来生成任意形状的单词云。</p><blockquote class="ns nt nu"><p id="2487" class="ku kv lq kw b kx ky ju kz la lb jx lc nv le lf lg nw li lj lk nx lm ln lo lp im bi translated">理想情况下，你应该在图像是纯黑白的地方使用蒙版。</p></blockquote><p id="c410" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">作为成像基础知识的复习:</p><ul class=""><li id="e3ad" class="ne nf it kw b kx ky la lb ld ng lh nh ll ni lp nj nk nl nm bi translated">对于一个黑色的像素，它的RGB值都是0</li><li id="12fd" class="ne nf it kw b kx nn la no ld np lh nq ll nr lp nj nk nl nm bi translated">对于一个<strong class="kw iu">白色</strong>像素，其RGB值都是255</li></ul><p id="0445" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">为什么知道这一点很重要？嗯，单词云将仅在非白色的像素上绘制，即任何非(255，255，255)的像素将用于绘制单词云。</p><p id="2209" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们使用这张Medium徽标图片来尝试一下:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="oa ob di oc bf od"><div class="gh gi nz"><img src="../Images/0907e8308cda8251bc12fe807e4153a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yXekMSnAwIh2s0ZoB6BiFg.png"/></div></div><figcaption class="kq kr gj gh gi ks kt bd b be z dk translated">来源:<a class="ae my" href="https://medium.com/blogging-guide/mediums-new-logo-2020-unfinished-ellipses-logomark-e24c059871e7" rel="noopener">https://medium . com/blogging-guide/medicines-new-logo-2020-unfinished-ellipses-logo mark-e24c 059871 E7</a></figcaption></figure><p id="e3d6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">以下代码片段将中等图像作为NumPy数组加载，然后将其传递给<code class="fe nb nc nd mp b">WordCloud</code>类的<code class="fe nb nc nd mp b">mask</code>参数:</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="5768" class="mt ls it mp b gy mu mv l mw mx"><strong class="mp iu">import numpy as np<br/>from PIL import Image</strong></span><span id="b475" class="mt ls it mp b gy mz mv l mw mx"><strong class="mp iu">mask = np.array(Image.open('medium.png'))</strong></span><span id="3626" class="mt ls it mp b gy mz mv l mw mx">wordcloud = WordCloud(<br/>                random_state = 42, <br/>                background_color = 'black', <br/>                colormap = 'tab20',                       <br/>                collocations = False, <br/>                stopwords = STOPWORDS, <br/><strong class="mp iu">                mask = mask,</strong><br/><strong class="mp iu">                contour_width = 5, <br/>                contour_color='yellow'</strong>).generate(review)</span><span id="fcea" class="mt ls it mp b gy mz mv l mw mx">draw_wordcloud(wordcloud, (14,10))</span></pre><p id="f43c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">请注意，当您使用遮罩来生成单词云时，不再需要<code class="fe nb nc nd mp b">width</code>和<code class="fe nb nc nd mp b">height</code>参数，因为单词云的大小现在将基于遮罩的大小。您将看到以下输出:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="oa ob di oc bf od"><div class="gh gi oe"><img src="../Images/76f1a9fa21f805c7b0a754cb6f93c500.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1MaTuToowa8s7XIFZohHUQ.png"/></div></div></figure><p id="a584" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">作为另一个例子，考虑下面的图像:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="oa ob di oc bf od"><div class="gh gi of"><img src="../Images/9f330086c6ab58d10929d0c18570a36a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SCoduVrIfSRlSKrPO9pPKA.jpeg"/></div></div><figcaption class="kq kr gj gh gi ks kt bd b be z dk translated">图片来源:<a class="ae my" href="https://en.wiktionary.org/wiki/globe" rel="noopener ugc nofollow" target="_blank">https://en.wiktionary.org/wiki/globe</a></figcaption></figure><p id="ee5e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们将应用此图像作为要生成的单词云的遮罩:</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="aaab" class="mt ls it mp b gy mu mv l mw mx"><strong class="mp iu">import numpy as np<br/>from PIL import Image</strong></span><span id="c3d2" class="mt ls it mp b gy mz mv l mw mx"><strong class="mp iu">mask = np.array(Image.open(<br/>    'John_Newton_and_William_Palmer_SLNSW_globe_1782.jpg'))</strong></span><span id="fca2" class="mt ls it mp b gy mz mv l mw mx">wordcloud = WordCloud(<br/>                random_state = 42, <br/>                background_color = 'black', <br/>                colormap = 'tab20',                       <br/>                collocations = False, <br/>                stopwords = STOPWORDS, <br/><strong class="mp iu">                mask = mask,</strong><br/><strong class="mp iu">                contour_width = 2, </strong><br/><strong class="mp iu">                contour_color='yellow'</strong>).generate(review)</span><span id="b688" class="mt ls it mp b gy mz mv l mw mx">draw_wordcloud(wordcloud, (14,10))</span></pre><p id="dc9e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">单词cloud将是这样的:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi og"><img src="../Images/c6632f86bb693d2d2ef5c1435c427b72.png" data-original-src="https://miro.medium.com/v2/resize:fit:918/format:webp/1*dNOA8lDzZrd-vHzCBi9Zmw.png"/></div></figure><h1 id="1921" class="lr ls it bd lt lu lv lw lx ly lz ma mb jz mc ka md kc me kd mf kf mg kg mh mi bi translated">为奥巴马和特朗普的胜利演讲创建单词云</h1><p id="c6f5" class="pw-post-body-paragraph ku kv it kw b kx mj ju kz la mk jx lc ld ml lf lg lh mm lj lk ll mn ln lo lp im bi translated">我将通过为奥巴马和特朗普的胜利演讲生成单词云来结束这篇文章。他们的演讲可以在这里找到:</p><ul class=""><li id="593a" class="ne nf it kw b kx ky la lb ld ng lh nh ll ni lp nj nk nl nm bi translated"><strong class="kw iu">奥巴马2012年的演讲</strong>——<a class="ae my" href="https://www.theguardian.com/world/2012/nov/07/barack-obama-speech-full-text" rel="noopener ugc nofollow" target="_blank">https://www . the guardian . com/world/2012/nov/07/巴拉克-奥巴马-演讲-全文</a></li><li id="6c1d" class="ne nf it kw b kx nn la no ld np lh nq ll nr lp nj nk nl nm bi translated"><strong class="kw iu">唐纳德·特朗普2016年演讲</strong>—<a class="ae my" href="https://edition.cnn.com/2016/11/09/politics/donald-trump-victory-speech/index.html" rel="noopener ugc nofollow" target="_blank">https://edition . CNN . com/2016/11/09/politics/唐纳德-特朗普-胜利-演讲/index.html </a></li></ul><p id="f2db" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我所做的是提取他们的发言，并保存到两个单独的文本文件中:</p><ul class=""><li id="f500" class="ne nf it kw b kx ky la lb ld ng lh nh ll ni lp nj nk nl nm bi translated"><strong class="kw iu">奥巴马演讲2012.txt </strong></li><li id="d2f2" class="ne nf it kw b kx nn la no ld np lh nq ll nr lp nj nk nl nm bi translated"><strong class="kw iu">特朗普演讲2016.txt </strong></li></ul><p id="4b7e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们为奥巴马2012年的获胜演讲生成单词云:</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="b61e" class="mt ls it mp b gy mu mv l mw mx">with open('Obama Speech 2012.txt') as f:<br/>    lines = f.readlines()<br/>speech = " ".join(lines)</span><span id="5b56" class="mt ls it mp b gy mz mv l mw mx">STOPWORDS.add('\n')</span><span id="773c" class="mt ls it mp b gy mz mv l mw mx">wordcloud = WordCloud(width = 1500, <br/>                      height = 1000, <br/>                      random_state = 42, <br/>                      background_color = 'lightgreen', <br/>                      colormap = 'tab10', <br/>                      collocations = False, <br/>                      stopwords = STOPWORDS).generate(speech)</span><span id="8d94" class="mt ls it mp b gy mz mv l mw mx">draw_wordcloud(wordcloud, (12,8))</span></pre><p id="8a11" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这里有一句话云:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/5af18d2dcb4a66f78915d61f0d11d552.png" data-original-src="https://miro.medium.com/v2/resize:fit:1332/format:webp/1*crp5RY2gvflt00xbLFbrdw.png"/></div></figure><p id="f089" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">接下来，为唐纳德·特朗普2016年的胜利演讲生成单词云:</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="7b65" class="mt ls it mp b gy mu mv l mw mx">with open('Trump Speech 2016.txt') as f:<br/>    lines = f.readlines()<br/>speech = " ".join(lines)</span><span id="60a3" class="mt ls it mp b gy mz mv l mw mx">STOPWORDS.add('\n')</span><span id="0d90" class="mt ls it mp b gy mz mv l mw mx">wordcloud = WordCloud(width = 1500, <br/>                      height = 1000, <br/>                      random_state = 42, <br/>                      background_color = 'lightgreen', <br/>                      colormap = 'tab10', <br/>                      collocations = False, <br/>                      stopwords = STOPWORDS).generate(speech)</span><span id="0243" class="mt ls it mp b gy mz mv l mw mx">draw_wordcloud(wordcloud, (12,8))</span></pre><p id="740e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这里有一句话云:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/3e684cf493b5846212100231bc2482fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1332/format:webp/1*TmVZqgNWqeQ04JKmY91PFQ.png"/></div></figure><p id="50ae" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果您想要单词及其相对频率(与其他单词)的列表，请使用生成的单词云的<code class="fe nb nc nd mp b">words_</code>属性:</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="366e" class="mt ls it mp b gy mu mv l mw mx">display(wordcloud.<strong class="mp iu">words_</strong>)</span></pre><p id="02e6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">您将看到如下列表:</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="0710" class="mt ls it mp b gy mu mv l mw mx">{'will': 1.0,<br/> 'people': 0.8571428571428571,<br/> 'great': 0.75,<br/> 'Thank': 0.7142857142857143,<br/> 'want': 0.4642857142857143,<br/> 'much': 0.32142857142857145,<br/> 'country': 0.32142857142857145,</span><span id="3257" class="mt ls it mp b gy mz mv l mw mx"> ...</span><span id="8231" class="mt ls it mp b gy mz mv l mw mx"> 'highways': 0.03571428571428571,<br/> 'bridges': 0.03571428571428571,<br/> 'tunnels': 0.03571428571428571,<br/> 'airports': 0.03571428571428571}</span></pre><p id="876f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果你只是简单的想要演讲中使用的词的频数，你甚至不需要生成一个词云；只需创建一个<code class="fe nb nc nd mp b">WordCloud</code>类的实例并调用<code class="fe nb nc nd mp b">process_text()</code>方法:</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="bc24" class="mt ls it mp b gy mu mv l mw mx">display(WordCloud().process_text(speech))</span></pre><p id="2b38" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">您将看到如下列表:</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="40a4" class="mt ls it mp b gy mu mv l mw mx">{'Thank': 20,<br/> 'much': 9,<br/> 'everybody': 1,<br/> 'Sorry': 1,<br/> 'keep': 1,<br/> 'waiting': 1,</span><span id="b42d" class="mt ls it mp b gy mz mv l mw mx"> ...</span><span id="91bd" class="mt ls it mp b gy mz mv l mw mx"> 'eight': 1,<br/> 'proud': 3,<br/> 'immediately': 1,<br/> 'evening': 1,<br/> 'year': 5,<br/> 'Pence': 1}</span></pre><p id="0128" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">享受单词云带来的乐趣！</p><div class="oh oi gp gr oj ok"><a href="https://weimenglee.medium.com/membership" rel="noopener follow" target="_blank"><div class="ol ab fo"><div class="om ab on cl cj oo"><h2 class="bd iu gy z fp op fr fs oq fu fw is bi translated">加入媒介与我的介绍链接-李伟孟</h2><div class="or l"><h3 class="bd b gy z fp op fr fs oq fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="os l"><p class="bd b dl z fp op fr fs oq fu fw dk translated">weimenglee.medium.com</p></div></div><div class="ot l"><div class="ou l ov ow ox ot oy ko ok"/></div></div></a></div></div></div>    
</body>
</html>