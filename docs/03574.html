<html>
<head>
<title>Localization with SwiftUI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用SwiftUI进行本地化</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/localization-with-swiftui-5abbeb275d5?source=collection_archive---------5-----------------------#2020-05-17">https://levelup.gitconnected.com/localization-with-swiftui-5abbeb275d5?source=collection_archive---------5-----------------------#2020-05-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="58e4" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何添加本地化？如何调试错误？</h2></div><p id="2b56" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">SwiftUI代码中的本地化就像写字符串一样简单。要了解如何设置可本地化的文件，需要学习关于本地化的其他基础知识(可以忽略与UIKit相关的代码):</p><div class="le lf gp gr lg lh"><a href="https://medium.com/lean-localization/ios-localization-tutorial-938231f9f881" rel="noopener follow" target="_blank"><div class="li ab fo"><div class="lj ab lk cl cj ll"><h2 class="bd iu gy z fp lm fr fs ln fu fw is bi translated">iOS本地化教程</h2><div class="lo l"><h3 class="bd b gy z fp lm fr fs ln fu fw dk translated">本地化是使您的应用程序支持其他语言的过程。在许多情况下，你用英语制作你的应用程序…</h3></div><div class="lp l"><p class="bd b dl z fp lm fr fs ln fu fw dk translated">medium.com</p></div></div><div class="lq l"><div class="lr l ls lt lu lq lv lw lh"/></div></div></a></div><p id="b389" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">对于SwiftUI本地化，我们将使用以下可本地化的设置:</p><figure class="lx ly lz ma gt mb"><div class="bz fp l di"><div class="mc md l"/></div><figcaption class="me mf gj gh gi mg mh bd b be z dk">🇬🇧</figcaption></figure><figure class="lx ly lz ma gt mb"><div class="bz fp l di"><div class="mc md l"/></div><figcaption class="me mf gj gh gi mg mh bd b be z dk">🇷🇺</figcaption></figure><figure class="lx ly lz ma gt mb"><div class="bz fp l di"><div class="mc md l"/></div><figcaption class="me mf gj gh gi mg mh bd b be z dk translated">🇬🇧Plural</figcaption></figure><figure class="lx ly lz ma gt mb"><div class="bz fp l di"><div class="mc md l"/></div><figcaption class="me mf gj gh gi mg mh bd b be z dk translated">🇷🇺Plural</figcaption></figure><p id="48d2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">SwiftUI localisable与<a class="ae mi" href="https://www.hackingwithswift.com/read/0/5/string-interpolation" rel="noopener ugc nofollow" target="_blank">字符串插值</a>一起工作。SwiftUI文本有一个默认初始化器:</p><pre class="lx ly lz ma gt mj mk ml mm aw mn bi"><span id="c245" class="mo mp it mk b gy mq mr l ms mt"><strong class="mk iu">public </strong>init(_ key: LocalizedStringKey, <strong class="mk iu">//localisation key</strong><br/>             tableName: String? = nil, <strong class="mk iu">//table name if nil takes Localisable.strings and Localisable.stringsDict</strong><br/>             bundle: Bundle? = nil, <strong class="mk iu">//default main bundle</strong><br/>             comment: StaticString? = nil)</span></pre><p id="414f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以使用本地化键直接初始化文本，如下所示:</p><pre class="lx ly lz ma gt mj mk ml mm aw mn bi"><span id="a70f" class="mo mp it mk b gy mq mr l ms mt">Text(<strong class="mk iu">"Quotes"</strong>)</span><span id="471d" class="mo mp it mk b gy mu mr l ms mt">//renders: <br/>/* <br/>   English: Quotes<br/>   Russian: Котировки<br/>*/</span><span id="d045" class="mo mp it mk b gy mu mr l ms mt">---------------------------------------------------------------</span><span id="31ea" class="mo mp it mk b gy mu mr l ms mt">let author = "Jhon Doe"<br/>Text("<strong class="mk iu">Author_Name</strong> \(<strong class="mk iu">self</strong>.author)")<br/>//renders: <br/>/* <br/>   English: Author Name: Jhon Doe<br/>   Russian: Имя автора: Jhon Doe<br/>*/</span><span id="8514" class="mo mp it mk b gy mu mr l ms mt">---------------------------------------------------------------</span><span id="957a" class="mo mp it mk b gy mu mr l ms mt"><strong class="mk iu">let</strong> likes: UInt = 10<br/>Text("\(<strong class="mk iu">self.</strong>likes) <strong class="mk iu">Like(s)</strong>")<br/>//renders: <br/>/* <br/>   English: 10 Likes<br/>   Russian: 10 Лайков<br/>*/</span></pre><p id="ca90" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">轻松干净！</p><figure class="lx ly lz ma gt mb"><div class="bz fp l di"><div class="mc md l"/></div></figure><div class="lx ly lz ma gt ab cb"><figure class="mv mb mw mx my mz na paragraph-image"><div role="button" tabindex="0" class="nb nc di nd bf ne"><img src="../Images/155f9bcd1be08ac77436d74f1b62a011.png" data-original-src="https://miro.medium.com/v2/resize:fit:928/format:webp/1*NZmBhgcAVsWDK02Bqs1hAw.png"/></div></figure><figure class="mv mb ng mx my mz na paragraph-image"><div role="button" tabindex="0" class="nb nc di nd bf ne"><img src="../Images/b1c488d66416364c46b829c1ae8703f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1074/format:webp/1*YO4jwfsx1CI7fThik-d7TA.png"/></div><figcaption class="me mf gj gh gi mg mh bd b be z dk nh di ni nj translated">茹恩</figcaption></figure></div><p id="f48c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">调试错误:</strong></p><ul class=""><li id="8506" class="nk nl it kk b kl km ko kp kr nm kv nn kz no ld np nq nr ns bi translated"><strong class="kk iu">用逐字文本初始化器处理，</strong>文本有两个初始化器。</li></ul><pre class="lx ly lz ma gt mj mk ml mm aw mn bi"><span id="9e2f" class="mo mp it mk b gy mq mr l ms mt">init(verbatim content: String)  <strong class="mk iu">//this keeps string literal i.e. No localisation<br/></strong></span><span id="0f0e" class="mo mp it mk b gy mu mr l ms mt"><strong class="mk iu">//Use For Localization</strong><br/>init(_ key: LocalizedStringKey, <br/>             tableName: String? = nil,<br/>             bundle: Bundle? = nil, <br/>             comment: StaticString? = nil)</span></pre><ul class=""><li id="920e" class="nk nl it kk b kl km ko kp kr nm kv nn kz no ld np nq nr ns bi translated"><strong class="kk iu">用本地化字符串键</strong> <strong class="kk iu">初始化器处理。</strong> LocalizedStringKey有两到三个初始化器。都有不同的目的:</li></ul><pre class="lx ly lz ma gt mj mk ml mm aw mn bi"><span id="0be1" class="mo mp it mk b gy mq mr l ms mt"><strong class="mk iu">init</strong>(stringLiteral value: String)<br/>//<strong class="mk iu">as parameter name suggest, it does not interpolate and try  to <br/>// to localize string as it is</strong><br/>//Text(<strong class="mk iu">"Quotes"</strong>) -&gt; <strong class="mk iu">Works!</strong><br/>//Text("<strong class="mk iu">Author_Name</strong> \(<strong class="mk iu">self</strong>.author)") -&gt; <strong class="mk iu">Will not</strong> <strong class="mk iu">Work.</strong><br/>//Text("\(<strong class="mk iu">self.</strong>likes) <strong class="mk iu">Like(s)</strong>") -&gt; <strong class="mk iu">Will not</strong> <strong class="mk iu">Work.<br/>_________________________________________________________</strong></span><span id="c595" class="mo mp it mk b gy mu mr l ms mt"><strong class="mk iu">init</strong>(<strong class="mk iu">_</strong> value: String)<br/>//All type of Localizable key work with this initialiser <br/>_________________________________________________________<br/></span><span id="c0cb" class="mo mp it mk b gy mu mr l ms mt"><strong class="mk iu">init</strong>(stringInterpolation: LocalizedStringKey.StringInterpolation)<br/>// this requires manual and </span></pre><ul class=""><li id="e793" class="nk nl it kk b kl km ko kp kr nm kv nn kz no ld np nq nr ns bi translated"><strong class="kk iu">错误/不同的插值值类型。</strong>插值发生在编译时，编译器可能以不同的格式插值变量。这可能导致不连续的定位。</li></ul><pre class="lx ly lz ma gt mj mk ml mm aw mn bi"><span id="a8c8" class="mo mp it mk b gy mq mr l ms mt">let <strong class="mk iu">likes</strong>: UInt = 10<br/>print(LocalizedStringKey(<strong class="mk iu">"</strong>\(<strong class="mk iu">likes) Like(s)"</strong>))</span><span id="1c9f" class="mo mp it mk b gy mu mr l ms mt"><strong class="mk iu">LocalizedStringKey(key: "%llu Like(s)", hasFormatting: true, arguments: [SwiftUI.LocalizedStringKey.FormatArgument(value: 10, formatter: nil)])<br/>------------------------------------------------</strong></span><span id="bbdd" class="mo mp it mk b gy mu mr l ms mt"><br/>let like = 10<br/>print(LocalizedStringKey(<strong class="mk iu">"</strong>\(<strong class="mk iu">like) Like(s)"</strong>))</span><span id="e274" class="mo mp it mk b gy mu mr l ms mt"><strong class="mk iu">LocalizedStringKey(key: "%lld Like(s)", hasFormatting: true, arguments: [SwiftUI.LocalizedStringKey.FormatArgument(value: 10, formatter: nil)])<br/></strong>//this will not localize as <strong class="mk iu">%lld </strong>is not part of our expected localizable key.</span></pre><p id="06d7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">限制:</strong></p><p id="ed76" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">SwiftUI canvas无法呈现<strong class="kk iu">可插值的</strong>局部变量。</p><pre class="lx ly lz ma gt mj mk ml mm aw mn bi"><span id="3494" class="mo mp it mk b gy mq mr l ms mt">//Text(<strong class="mk iu">"Quotes"</strong>) -&gt; <strong class="mk iu">Works on canvas!</strong><br/>//Text("<strong class="mk iu">Author_Name</strong> \(<strong class="mk iu">self</strong>.author)") -&gt; <strong class="mk iu">Will not</strong> <strong class="mk iu">render on canvas.</strong><br/>//Text("\(<strong class="mk iu">self.</strong>likes) <strong class="mk iu">Like(s)</strong>") -&gt; <strong class="mk iu">Will not</strong> <strong class="mk iu">render on canvas.</strong></span></pre><p id="ffcd" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">演示:</strong></p><div class="le lf gp gr lg lh"><a href="https://github.com/prafullakumar/SwiftUiProj" rel="noopener  ugc nofollow" target="_blank"><div class="li ab fo"><div class="lj ab lk cl cj ll"><h2 class="bd iu gy z fp lm fr fs ln fu fw is bi translated">prafullakumar/SwiftUiProj</h2><div class="lo l"><h3 class="bd b gy z fp lm fr fs ln fu fw dk translated">通过在GitHub上创建一个帐户，为prafullakumar/SwiftUiProj开发做出贡献。</h3></div><div class="lp l"><p class="bd b dl z fp lm fr fs ln fu fw dk translated">github.com</p></div></div><div class="lq l"><div class="nt l ls lt lu lq lv lw lh"/></div></div></a></div><p id="423d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">参考:</strong></p><div class="le lf gp gr lg lh"><a href="https://developer.apple.com/videos/play/wwdc2019/402/" rel="noopener  ugc nofollow" target="_blank"><div class="li ab fo"><div class="lj ab lk cl cj ll"><h2 class="bd iu gy z fp lm fr fs ln fu fw is bi translated">Swift新功能- WWDC 2019 -视频-苹果开发者</h2><div class="lo l"><h3 class="bd b gy z fp lm fr fs ln fu fw dk translated">Swift现在是苹果所有平台上许多主要框架的首选语言，包括…</h3></div><div class="lp l"><p class="bd b dl z fp lm fr fs ln fu fw dk translated">developer.apple.com</p></div></div><div class="lq l"><div class="nu l ls lt lu lq lv lw lh"/></div></div></a></div></div></div>    
</body>
</html>