<html>
<head>
<title>Swift: 9 Filtering Combine Operators You Should Know</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Swift:你应该知道的9个过滤组合运算符</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/9-filtering-combine-operators-you-should-know-9c1ef2911352?source=collection_archive---------9-----------------------#2020-06-16">https://levelup.gitconnected.com/9-filtering-combine-operators-you-should-know-9c1ef2911352?source=collection_archive---------9-----------------------#2020-06-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="673c" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">用清晰的例子</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/d0ce31eab8b418e03f6a80635f50d72c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*XUso-1KLNNR9i8rK"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@ultralinx?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Oliur </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="76fe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我们将探索和掌握Xcode操场上9个有用的过滤组合操作符。</p><p id="8eee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">源代码可以在文章的底部找到。</p><h1 id="91f5" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">我们开始吧</h1><h2 id="a708" class="mn lw it bd lx mo mp dn mb mq mr dp mf li ms mt mh lm mu mv mj lq mw mx ml my bi translated">1)过滤器</h2><p id="d5ca" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">如果我们只想接受那些符合特定条件的元素，我们就使用<code class="fe ne nf ng nh b">.filter</code>操作符:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="0731" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里我们只打印那些包含“o”字母的<code class="fe ne nf ng nh b">String</code>值，忽略其他的:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/71af865aff8f31f4ad328485b86e3b1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1304/format:webp/1*KxGXNuGsoNAGzXGXQwZEUw.png"/></div></figure></div><div class="ab cl nl nm hx nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="im in io ip iq"><h2 id="e6ee" class="mn lw it bd lx mo mp dn mb mq mr dp mf li ms mt mh lm mu mv mj lq mw mx ml my bi translated">2)删除重复项</h2><p id="b881" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated"><code class="fe ne nf ng nh b">.removeDuplicates</code>运算符，顾名思义，只允许我们获得唯一的值:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="179b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">结果，我们打印出了以下整数:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ns"><img src="../Images/b9dc2ed73301320cdb2126ec8bcb3272.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eOPuLniIVHBJwNvdDWpYVA.png"/></div></div></figure></div><div class="ab cl nl nm hx nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="im in io ip iq"><h2 id="628c" class="mn lw it bd lx mo mp dn mb mq mr dp mf li ms mt mh lm mu mv mj lq mw mx ml my bi translated">3)紧凑地图</h2><p id="d0cb" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">如果你曾经在反应式编程中处理过选项，那么你可能会喜欢<code class="fe ne nf ng nh b">.compactMap</code>操作符。它只允许我们获得非零值:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="2851" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以看到，“Hello World”到<code class="fe ne nf ng nh b">Int</code>的转换返回<code class="fe ne nf ng nh b">nil</code>，所以我们没有看到它打印在控制台中:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nt"><img src="../Images/741dd40ebe0ea7d76c09d6380ef74017.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1WOhhAp6ZYGN5HenC5L1XQ.png"/></div></div></figure></div><div class="ab cl nl nm hx nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="im in io ip iq"><h2 id="8b26" class="mn lw it bd lx mo mp dn mb mq mr dp mf li ms mt mh lm mu mv mj lq mw mx ml my bi translated">4)忽略输出</h2><p id="84db" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">顾名思义，<code class="fe ne nf ng nh b">.ignoreOutput</code>操作符忽略所有上游事件。但是，它会传递一个完成状态(完成或失败)。当您不关心值，只需要知道发布者是否已经完成时，这是很有用的:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="223d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以看到只打印了完成事件:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/3d71f056f2364e357a8bc3a7e1357390.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Mf3beVLgBnKZ-7Bu7IKIsQ.png"/></div></div></figure></div><div class="ab cl nl nm hx nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="im in io ip iq"><h2 id="5d8d" class="mn lw it bd lx mo mp dn mb mq mr dp mf li ms mt mh lm mu mv mj lq mw mx ml my bi translated">5)首先(其中:)</h2><p id="69bd" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">我们使用<code class="fe ne nf ng nh b">.first(where:)</code>操作符获取订阅中第一个符合我们标准的值:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="0bf3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们可以看到“lorem”和“ipsum”都是以小写字母开头的。“Dolor”字符串满足条件，因此它被打印出来，并且发布者完成:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nv"><img src="../Images/3fcc0f70fd2b4669a04402f44f43dc71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5h9shLV9z-zVML8fKCU0Lg.png"/></div></div></figure></div><div class="ab cl nl nm hx nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="im in io ip iq"><h2 id="4387" class="mn lw it bd lx mo mp dn mb mq mr dp mf li ms mt mh lm mu mv mj lq mw mx ml my bi translated">6) dropFirst(计数:)</h2><p id="6bf1" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated"><code class="fe ne nf ng nh b">.dropFirst(count:)</code>操作符允许我们忽略一些作为参数传递的元素:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="92d3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，我们在控制台中只显示了“Hello World”和“5 ”:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/b5a56bd3201cad4398171d1cf7abb23a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FsxtbU2tvg_gwyXEuNPn_w.png"/></div></div></figure></div><div class="ab cl nl nm hx nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="im in io ip iq"><h2 id="8be0" class="mn lw it bd lx mo mp dn mb mq mr dp mf li ms mt mh lm mu mv mj lq mw mx ml my bi translated">7)丢弃(当:)</h2><p id="12a0" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">该运算符忽略元素，直到不满足给定的谓词:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="afe9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里我们省略元素，直到我们有一个少于三个字符的<code class="fe ne nf ng nh b">String</code>。在我们的例子中，它是“Sit ”,因此，打印“Sit”和“amet ”:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/52615f9e0fe152c0206d9074b69617aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3a874Or8OVOZ3nUISHLmoQ.png"/></div></div></figure></div><div class="ab cl nl nm hx nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="im in io ip iq"><h2 id="ebdc" class="mn lw it bd lx mo mp dn mb mq mr dp mf li ms mt mh lm mu mv mj lq mw mx ml my bi translated">8) drop(untilOutputFrom:)</h2><p id="c620" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">当我们希望拥有一个允许源发布者发出值的“触发”发布者时，我们使用这个版本的<code class="fe ne nf ng nh b">.drop</code>操作符。一旦值被发送到“触发器”发布者，源发布者就被允许执行:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="2a81" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里我们创建了一个<a class="ae ky" href="https://medium.com/cleansoftware/swift-how-to-create-a-timer-in-combine-43192dab4d3" rel="noopener">定时器</a>发布器，一旦<code class="fe ne nf ng nh b">startTrigger</code>主体接收到信号，它就被允许发出事件。三秒钟后，我们向<code class="fe ne nf ng nh b">startTrigger</code>主题发送一个<code class="fe ne nf ng nh b">Void</code>值，因此我们让计时器仅从第四秒开始打印值:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/32508308c5f7a218719655d112cb0e1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NwIDPoIZrzC4gLCN04TBOA.png"/></div></div></figure></div><div class="ab cl nl nm hx nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="im in io ip iq"><h2 id="7786" class="mn lw it bd lx mo mp dn mb mq mr dp mf li ms mt mh lm mu mv mj lq mw mx ml my bi translated">9) .前缀(untilOutputFrom:)</h2><p id="0641" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">这篇文章的最后一个运算符是<code class="fe ne nf ng nh b">.drop(untilOutputFrom:)</code>的反义词。一旦触发器发布者接收到值，我们就停止从源发布者接收值:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="66ae" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，计时器打印三秒钟，一旦我们向<code class="fe ne nf ng nh b">stopTrigger</code>主题发送一个值，计时器立即停止:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nz"><img src="../Images/ed5655de4d961f1cd24ebb9897e97c3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sqxxy7ODvozNlO7wksKEqQ.png"/></div></div></figure></div><div class="ab cl nl nm hx nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="im in io ip iq"><h1 id="4068" class="lv lw it bd lx ly oa ma mb mc ob me mf jz oc ka mh kc od kd mj kf oe kg ml mm bi translated">资源</h1><p id="c687" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">源代码可以在<a class="ae ky" href="https://gist.github.com/zafarivaev/f9dcc6ab75243661e18a751927950f36" rel="noopener ugc nofollow" target="_blank">要点</a>中找到。</p><h1 id="1bde" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">包扎</h1><p id="e7fb" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">想了解更多关于联合收割机的信息吗？查看我的其他相关文章:</p><div class="of og gp gr oh oi"><a href="https://medium.com/better-programming/7-sequential-operators-you-should-know-from-swift-combine-1775ce3c47c8" rel="noopener follow" target="_blank"><div class="oj ab fo"><div class="ok ab ol cl cj om"><h2 class="bd iu gy z fp on fr fs oo fu fw is bi translated">Swift Combine中您应该知道的7个顺序运算符</h2><div class="op l"><h3 class="bd b gy z fp on fr fs oo fu fw dk translated">第一个、最后一个、计数、包含、全部满足、减少等等</h3></div><div class="oq l"><p class="bd b dl z fp on fr fs oo fu fw dk translated">medium.com</p></div></div><div class="or l"><div class="os l ot ou ov or ow ks oi"/></div></div></a></div><div class="of og gp gr oh oi"><a href="https://medium.com/better-programming/replace-delegation-with-combine-in-swift-5-e4c193655e7b" rel="noopener follow" target="_blank"><div class="oj ab fo"><div class="ok ab ol cl cj om"><h2 class="bd iu gy z fp on fr fs oo fu fw is bi translated">在Swift 5中将委托替换为组合</h2><div class="op l"><h3 class="bd b gy z fp on fr fs oo fu fw dk translated">摆脱这种冗长的协议一致性</h3></div><div class="oq l"><p class="bd b dl z fp on fr fs oo fu fw dk translated">medium.com</p></div></div><div class="or l"><div class="ox l ot ou ov or ow ks oi"/></div></div></a></div><div class="of og gp gr oh oi"><a href="https://medium.com/better-programming/5-transforming-combine-operators-you-should-know-4603fe112d74" rel="noopener follow" target="_blank"><div class="oj ab fo"><div class="ok ab ol cl cj om"><h2 class="bd iu gy z fp on fr fs oo fu fw is bi translated">5你应该知道的变换组合运算符</h2><div class="op l"><h3 class="bd b gy z fp on fr fs oo fu fw dk translated">用清晰的例子</h3></div><div class="oq l"><p class="bd b dl z fp on fr fs oo fu fw dk translated">medium.com</p></div></div><div class="or l"><div class="oy l ot ou ov or ow ks oi"/></div></div></a></div><div class="of og gp gr oh oi"><a href="https://medium.com/better-programming/how-to-create-your-own-combine-subscriber-in-swift-5-702b3f9c68c4" rel="noopener follow" target="_blank"><div class="oj ab fo"><div class="ok ab ol cl cj om"><h2 class="bd iu gy z fp on fr fs oo fu fw is bi translated">如何在Swift 5中创建自己的联合收割机订户</h2><div class="op l"><h3 class="bd b gy z fp on fr fs oo fu fw dk translated">将逻辑封装在单独的类中</h3></div><div class="oq l"><p class="bd b dl z fp on fr fs oo fu fw dk translated">medium.com</p></div></div><div class="or l"><div class="oz l ot ou ov or ow ks oi"/></div></div></a></div><p id="4988" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感谢阅读！</p></div></div>    
</body>
</html>