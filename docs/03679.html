<html>
<head>
<title>Eventual Consistency and Strong Consistency</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">最终一致性和强一致性</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/eventual-consistency-and-strong-consistency-d0b882133ca5?source=collection_archive---------7-----------------------#2020-05-22">https://levelup.gitconnected.com/eventual-consistency-and-strong-consistency-d0b882133ca5?source=collection_archive---------7-----------------------#2020-05-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/6117320c93433f3782ea4be5d8d0c737.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*OOZhYebg99KSuDj9"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">丹尼斯·库默在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="06f2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在讨论最终一致性和强一致性之间的区别之前，让我们首先理解分布式系统中的一致性。</p><p id="ce77" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一致的分布式系统是指所有节点同时看到相同数据的系统。换句话说，如果我们在多次写操作之后执行读操作，那么一致的系统应该为所有读操作返回相同的值，并且返回最近一次写操作的值。</p><p id="7fb8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了正确理解这个概念，我强烈推荐阅读一下<a class="ae kc" href="https://intmain.co/what-is-cap-theorem-and-where-is-it-used/" rel="noopener ugc nofollow" target="_blank"> CAP定理。</a></p><h2 id="b9a2" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">最终一致性</h2><p id="88ff" class="pw-post-body-paragraph kd ke iq kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">最终一致性保证了如果对节点(比如节点N)的数据进行更新，那么更新的值将<strong class="kf ir">最终</strong>传播到该节点的所有副本，并且最终所有副本将变得与原始节点(N)一致。节点将最终保持一致，这意味着更新到达其他副本需要时间。</p><p id="44bf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，最终一致性是用于实现高可用性的一致性模型，并且是弱一致性模型。</p><p id="72c9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">已经实现最终一致性的节点通常被称为已经<strong class="kf ir">收敛</strong>，或者实现了<strong class="kf ir">副本收敛。</strong></p><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lz"><img src="../Images/05dfe2c5823de3a3b4b7d04cface8adc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7bz-_1XTHd68wfO6d2rYMg.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">最终一致性</figcaption></figure><p id="4aba" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最终的一致性提供了高可用性(低延迟),但存在返回陈旧数据的风险。</p><p id="ee1e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">实现最终一致性的最流行的系统是<a class="ae kc" href="https://www.cloudflare.com/learning/dns/what-is-dns/" rel="noopener ugc nofollow" target="_blank"> DNS </a>(域名系统)。根据配置的模式并结合时间控制的高速缓存来分发对域名的更新；最终，所有客户端将变得一致或看到更新。</p><h2 id="760c" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">强一致性</h2><p id="982b" class="pw-post-body-paragraph kd ke iq kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">与最终一致性相反，强一致性保证如果对一个节点(比如说N)进行更新，那么更新后的值将立即传播到节点(N)的所有副本(N1和N2 ),换句话说，在更新完成后，任何后续访问(对N、N1或N2)将总是返回更新后的值。</p><p id="73c7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">注意:在用新数据更新这些复制副本期间，对这些复制副本的任何读/写请求都会延迟，因为所有复制副本都忙于保持彼此一致，一旦它们与原始节点一致，它们将再次开始接受读/写请求。</p><p id="9425" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">与强一致性中的最终一致性相反，总是只能观察到一个一致状态。</p><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi me"><img src="../Images/53d5c74f8409aab39db5a41942be48c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*01hgWws5Ox4fecFsGwDwxA.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">强一致性</figcaption></figure><p id="5bcc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最终一致性提供低可用性(高延迟)，但总是返回新鲜/更新的数据。</p><p id="ca2e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">实现最终一致性的最流行的系统是关系数据库。这意味着在关系数据库中，更新后立即查看的数据对所有观察者来说是相同的。</p><p id="74a6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">进一步阅读</p><ol class=""><li id="5e15" class="mf mg iq kf b kg kh kk kl ko mh ks mi kw mj la mk ml mm mn bi translated"><a class="ae kc" href="https://intmain.co/what-is-cap-theorem-and-where-is-it-used/" rel="noopener ugc nofollow" target="_blank">上限定理</a></li><li id="71d2" class="mf mg iq kf b kg mo kk mp ko mq ks mr kw ms la mk ml mm mn bi translated"><a class="ae kc" href="https://intmain.co/what-is-database-sharding-and-how-is-it-done/" rel="noopener ugc nofollow" target="_blank">数据库分片</a></li></ol></div><div class="ab cl mt mu hu mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="ij ik il im in"><p id="75e0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="na">最初发表于intmain.co</em><a class="ae kc" href="https://intmain.co/eventual-consistency-and-strong-consistency/" rel="noopener ugc nofollow" target="_blank"><em class="na"/></a><em class="na">，我强烈推荐你去看看这个博客。</em></p></div></div>    
</body>
</html>