<html>
<head>
<title>Introduction to LINQ in C#</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">C#中的LINQ简介</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/introduction-to-linq-in-c-b6cd4cea297e?source=collection_archive---------5-----------------------#2021-05-28">https://levelup.gitconnected.com/introduction-to-linq-in-c-b6cd4cea297e?source=collection_archive---------5-----------------------#2021-05-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="4793" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi kl translated">INQ是对代码优化最有用的C#库之一，它可以让你的代码更短、更清晰、更易读。为了理解LINQ的概念，你应该首先理解<a class="ae ku" href="https://medium.com/codex/intermediate-c-oop-structs-delegates-4ffd0cd70cf" rel="noopener"> <strong class="jp ir">什么是委托和扩展函数</strong> </a>。</p><figure class="kw kx ky kz gt la gh gi paragraph-image"><div role="button" tabindex="0" class="lb lc di ld bf le"><div class="gh gi kv"><img src="../Images/318132dc2709f4d1d77436846985a76d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kqtEhonEwAkx3GlkdvvoiA.png"/></div></div></figure></div><div class="ab cl lh li hu lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="ij ik il im in"><h1 id="245a" class="lo lp iq bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated"><strong class="ak">什么是Linq？</strong></h1><p id="cade" class="pw-post-body-paragraph jn jo iq jp b jq mm js jt ju mn jw jx jy mo ka kb kc mp ke kf kg mq ki kj kk ij bi translated">LINQ是一个系统库，它为IEnumerable接口添加了扩展。在LINQ，我们可以找到许多委托函数，它们为我们提供了有用的函数结构，我们可以使用委托来满足我们的需求。</p><p id="7719" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">LINQ扩展的一个例子是Sum函数。我们以Builder类为例。</p><pre class="kw kx ky kz gt mr ms mt mu aw mv bi"><span id="9590" class="mw lp iq ms b gy mx my l mz na">public class Builder<br/>{<br/>   public string builderName { get; set; }<br/>   public double builderSalary { get; set; }<br/>   public int builderAge { get; set; }<br/>}</span></pre><p id="f7b9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果没有LINQ，如果我们想要合计所有建筑商的工资，我们必须执行以下操作:</p><pre class="kw kx ky kz gt mr ms mt mu aw mv bi"><span id="9c05" class="mw lp iq ms b gy mx my l mz na">public static double GetFullSalary(Builder[] builders_)<br/>{<br/>   double fullSalary = 0.0d;<br/>  <br/>   for(int i = 0; i &lt; builders_.Length; i++)<br/>   {<br/>     fullSalary += builders_[i].builderSalary;<br/>   }<br/>   <br/>   return fullSalary;<br/>}</span></pre><p id="9769" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然而，Linq已经有了一个名为Sum的扩展函数，它的结构与GetFullSalary相同。</p><p id="d095" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">下面的代码是我对真正的C# Sum函数实现的建议，它不一定是真正的实现</strong></p><pre class="kw kx ky kz gt mr ms mt mu aw mv bi"><span id="6846" class="mw lp iq ms b gy mx my l mz na">/*<br/>Because the following code contains some advanced concepts here is a shortcut of what it means:<br/>Step 1 - We create an extention for IEnumerable&lt;T&gt;.<br/>Step 2 - We check to see if the struct we accepted is a numeric type or not. If it's not a numeric type we check if the class\struct supports the addition operator using operator overloading, if both cases fail then we return the default value of the type (Step 2 - Everything between the region "Check_If_Its_Number").<br/>Step 3 - After we know it's a numeric type or a class\struct that supports addition we can sum all the elements and return the result.<br/>*/</span><span id="9288" class="mw lp iq ms b gy nb my l mz na">public static class LINQExtensions<br/>{<br/>        public static T Sum&lt;T&gt;(this IEnumerable&lt;T&gt; li, Func&lt;T, T&gt; func_) where T: struct //we use T:struct because numerics are //structs<br/>        {<br/>            T full = default; //gives 'full' the default value of T</span><span id="95d8" class="mw lp iq ms b gy nb my l mz na">#region Check_If_Its_Number<br/>            try<br/>            {<br/>                sbyte mySByte = (sbyte)((dynamic)(default(T))); <br/>                //if we can cast to sbyte then it's a number type.<br/>            }<br/>            catch<br/>            {                               <br/>//if the class overloads the addition operator we can also make a sum<br/>           if(!(typeof(T).GetMethods().Any(x =&gt; x.Name == "op_Addition"))) /*Any is a LINQ function that checks in that case if there is a function called op_Addition which means that the class/struct supports the addition operator.*/<br/>                {<br/>                    Console.WriteLine("The following object cannot use addition operator.");<br/>                    return default(T); /*if can't cast and the class/struct doesn't support addition return the default value of T*/<br/>                }<br/>            }<br/>#endregion</span><span id="1b46" class="mw lp iq ms b gy nb my l mz na">            for (int i = 0; i &lt; li.Count(); i++)<br/>            {<br/>                full += (dynamic)(func_(li.ElementAt(i))); <br/>                //sums all the elements<br/>            }</span><span id="37e0" class="mw lp iq ms b gy nb my l mz na">            return full;<br/>        }<br/>    }</span></pre><p id="995a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这意味着我们可以简单地写而不是写GetFullSalary函数。</p><pre class="kw kx ky kz gt mr ms mt mu aw mv bi"><span id="c80f" class="mw lp iq ms b gy mx my l mz na">using System.Linq;<br/>...<br/>double fullSalary = builders_.Sum(x =&gt; x.builderSalary);</span></pre><p id="7622" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">正如你在上面的例子中看到的，LINQ扩展使我们更容易使用它，因为我们可以使用它，而不必构建GetFullSalary函数。</p></div><div class="ab cl lh li hu lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="ij ik il im in"><h1 id="d8da" class="lo lp iq bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated"><strong class="ak">更多LINQ结构</strong></h1><h2 id="72b9" class="mw lp iq bd lq nc nd dn lu ne nf dp ly jy ng nh mc kc ni nj mg kg nk nl mk nm bi translated">挑选</h2><p id="fc8d" class="pw-post-body-paragraph jn jo iq jp b jq mm js jt ju mn jw jx jy mo ka kb kc mp ke kf kg mq ki kj kk ij bi translated">select函数返回一个新的IEnumerable，其大小与调用IEnumerable的大小相同。该函数对IEnumerable中的每个元素进行委托操作。</p><pre class="kw kx ky kz gt mr ms mt mu aw mv bi"><span id="e6d4" class="mw lp iq ms b gy mx my l mz na">Builder[] builders = <br/>{<br/>  new Builder() { builderName = "David" },<br/>  new Builder() { builderName = "John" }, <br/>  new Builder() { builderName = "Mikel"}<br/>};</span><span id="5e25" class="mw lp iq ms b gy nb my l mz na">string[] builderNames = builders.Select(x =&gt; x.builderName).ToArray();<br/>//builderName = ["David", "John", "Mikel"]</span><span id="a9fd" class="mw lp iq ms b gy nb my l mz na">/*--Possible Implementation of Select method--</span><span id="2989" class="mw lp iq ms b gy nb my l mz na">public static class LINQExtensions<br/>{<br/>   public static IEnumerable&lt;TResult&gt; Select&lt;T,TResult&gt;(this IEnumerable&lt;T&gt; li, Func&lt;T, TResult&gt; func_)<br/>   {<br/>      foreach(var item in li)<br/>      {<br/>         yield return func_(item);//adds current item to returned IEnumerable<br/>      }<br/>   }<br/>}*/</span></pre><p id="a788" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在上面的例子中，对于数组中的每个构建器，我们将返回构建器的名称。</p><h2 id="17df" class="mw lp iq bd lq nc nd dn lu ne nf dp ly jy ng nh mc kc ni nj mg kg nk nl mk nm bi translated">在哪里</h2><p id="3532" class="pw-post-body-paragraph jn jo iq jp b jq mm js jt ju mn jw jx jy mo ka kb kc mp ke kf kg mq ki kj kk ij bi translated">where函数筛选IEnumerable中的元素，并返回一个新的IEnumerable，它只包含通过条件的元素。</p><pre class="kw kx ky kz gt mr ms mt mu aw mv bi"><span id="8e80" class="mw lp iq ms b gy mx my l mz na">Builder[] builders = <br/>{<br/>  new Builder() { builderName = "David", builderSalary = 45.0d },<br/>  new Builder() { builderName = "Mark", builderSalary = 450_000 },<br/>  new Builder() { builderName = "Smith", builderSalary = 100_000}<br/>};</span><span id="9c69" class="mw lp iq ms b gy nb my l mz na">IEnumerable&lt;Builder&gt; a = builders.Where(x =&gt; x.builderSalary &lt; 100).ToArray();<br/>// a will contain only David because he is the only one with a salary that's below 100</span><span id="b017" class="mw lp iq ms b gy nb my l mz na">/*--possible implementation of Where method--<br/>public static class LINQExtensions<br/>{<br/>public static IEnumerable&lt;T&gt; Where&lt;T&gt;(this IEnumerable&lt;T&gt; li, Func&lt;T, bool&gt; func_)<br/>    {<br/>        foreach (var item in li)<br/>        {<br/>            if(func_(item))<br/>               yield return item;//adds current item to the returned IEnumerable<br/>        }<br/>    }<br/>}*/</span></pre><h2 id="fa01" class="mw lp iq bd lq nc nd dn lu ne nf dp ly jy ng nh mc kc ni nj mg kg nk nl mk nm bi translated">任何和所有</h2><p id="9040" class="pw-post-body-paragraph jn jo iq jp b jq mm js jt ju mn jw jx jy mo ka kb kc mp ke kf kg mq ki kj kk ij bi translated">如果IEnumerable中有支持该条件的元素，则任何函数都返回true。如果在没有参数的情况下调用Any，它将确定IEnumerable的长度是否为0。</p><p id="58ca" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果IEnumerable中的所有元素都满足某个条件，All函数将返回true。</p><pre class="kw kx ky kz gt mr ms mt mu aw mv bi"><span id="1def" class="mw lp iq ms b gy mx my l mz na">int[] arr = {1,2,3,4};</span><span id="f2ea" class="mw lp iq ms b gy nb my l mz na">bool biggerThan5 = arr.Any(x =&gt; x &gt; 5); //false<br/>bool any = arr.Any(); //true<br/>bool all = arr.All(x =&gt; x &lt; 5); //true</span></pre><h2 id="b032" class="mw lp iq bd lq nc nd dn lu ne nf dp ly jy ng nh mc kc ni nj mg kg nk nl mk nm bi translated">最大&amp;最小&amp;平均</h2><p id="d35c" class="pw-post-body-paragraph jn jo iq jp b jq mm js jt ju mn jw jx jy mo ka kb kc mp ke kf kg mq ki kj kk ij bi translated">max和min函数将返回IEnumerable中的最大/最小值</p><p id="14cd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Average返回元素的平均值。</p><pre class="kw kx ky kz gt mr ms mt mu aw mv bi"><span id="0f3b" class="mw lp iq ms b gy mx my l mz na">int[] arr = { 1, 2, 30, 100, 5, 10 };<br/>int max_value = arr.Max(); //100<br/>int min_value = arr.Min(); //1<br/>int average_ = arr.Average();</span><span id="cd78" class="mw lp iq ms b gy nb my l mz na">int minSalaryBuilder = builders.Min(x =&gt; x.builderSalary); //45<br/>int maxSalaryBuilder = builders.Max(x =&gt; x.builderSalary); //450,000<br/>double averageSalary = builders.Average(x =&gt; x.builderSalary); //183348.333333</span></pre><h2 id="4651" class="mw lp iq bd lq nc nd dn lu ne nf dp ly jy ng nh mc kc ni nj mg kg nk nl mk nm bi translated">姓氏和名字</h2><p id="13ee" class="pw-post-body-paragraph jn jo iq jp b jq mm js jt ju mn jw jx jy mo ka kb kc mp ke kf kg mq ki kj kk ij bi translated">返回条件的最后/第一个匹配项，如果没有条件，将返回IEnumerable的最后/第一个元素。</p><pre class="kw kx ky kz gt mr ms mt mu aw mv bi"><span id="8b07" class="mw lp iq ms b gy mx my l mz na">int[] arr = { 1, 2, 3, 4, 5, 100, 200, 3, 50 };<br/>int last_ = arr.Last(x =&gt; x &gt; 50); //200<br/>int last_element = arr.Last(); // 50<br/>int first_ = arr.First(x =&gt; x &gt; 50); //100<br/>int first_element = arr.First(); //1</span></pre><h2 id="1a08" class="mw lp iq bd lq nc nd dn lu ne nf dp ly jy ng nh mc kc ni nj mg kg nk nl mk nm bi translated">横断</h2><p id="146c" class="pw-post-body-paragraph jn jo iq jp b jq mm js jt ju mn jw jx jy mo ka kb kc mp ke kf kg mq ki kj kk ij bi translated">Intersect函数将IEnumerable作为参数，并返回一个新的IEnumerable，其中只保留两个列表共有的元素。</p><p id="5623" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">新列表中公共元素的顺序将与调用IEnumerable(不是参数)的顺序相同。</p><pre class="kw kx ky kz gt mr ms mt mu aw mv bi"><span id="9387" class="mw lp iq ms b gy mx my l mz na">int[] arr = { 1, 2, 3, 4, 6 };<br/>int[] other_ = { 1, 2, 3, 4, 5 };</span><span id="ba60" class="mw lp iq ms b gy nb my l mz na">arr = arr.Intersect(other_).ToArray(); //[1,2,3,4]</span><span id="b9d6" class="mw lp iq ms b gy nb my l mz na">arr = { 1, 2, 3, 5, 4, 6 };<br/>other_ = { 6 , 2, 3, 4, 7 };</span><span id="7ec3" class="mw lp iq ms b gy nb my l mz na">arr = arr.Intersect(other_); //[2,3,4,6]</span></pre><h2 id="d6e3" class="mw lp iq bd lq nc nd dn lu ne nf dp ly jy ng nh mc kc ni nj mg kg nk nl mk nm bi translated">前置和追加</h2><p id="20f1" class="pw-post-body-paragraph jn jo iq jp b jq mm js jt ju mn jw jx jy mo ka kb kc mp ke kf kg mq ki kj kk ij bi translated">Prepend函数接受一个参数并返回一个新的IEnumerable，其中参数位于IEnumerable的开头。</p><p id="ec44" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Append函数接受一个参数并返回一个新的IEnumerable，其中参数位于IEnumerable的末尾。</p><pre class="kw kx ky kz gt mr ms mt mu aw mv bi"><span id="a569" class="mw lp iq ms b gy mx my l mz na">int[] arr = { 1, 2, 3, 4 };</span><span id="dacd" class="mw lp iq ms b gy nb my l mz na">arr = arr.Prepend(0).ToArray(); //arr = [0,1,2,3,4]<br/>arr = arr.Append(5).ToArray(); //arr = [0,1,2,3,4,5]</span></pre><h2 id="2912" class="mw lp iq bd lq nc nd dn lu ne nf dp ly jy ng nh mc kc ni nj mg kg nk nl mk nm bi translated">分组依据</h2><p id="17db" class="pw-post-body-paragraph jn jo iq jp b jq mm js jt ju mn jw jx jy mo ka kb kc mp ke kf kg mq ki kj kk ij bi translated">GroupBy函数允许我们创建共享相同标识符的元素组。例如，如果我们有一个工作列表，我们可以组成一组程序员和一组建筑工人。</p><pre class="kw kx ky kz gt mr ms mt mu aw mv bi"><span id="1bbc" class="mw lp iq ms b gy mx my l mz na">Person[] arr =<br/>{<br/>   new Person(){ job_ = Job.Builder, Name = "Dan"},<br/>   new Person(){ job_ = Job.Builder, Name = "Frank"},<br/>   new Person(){ job_ = Job.Programmer, Name = "Dave"},<br/>};</span><span id="eb6c" class="mw lp iq ms b gy nb my l mz na">var group_ = arr.GroupBy(x =&gt; x.job_).ToDictionary(x =&gt; x.Key);<br/>/*group_ = [(Job.Builder):[Person Dan, Person Frank], (Job.Programmer):[Person Dave]]*/</span></pre><h2 id="640d" class="mw lp iq bd lq nc nd dn lu ne nf dp ly jy ng nh mc kc ni nj mg kg nk nl mk nm bi translated">OrderBy</h2><p id="7929" class="pw-post-body-paragraph jn jo iq jp b jq mm js jt ju mn jw jx jy mo ka kb kc mp ke kf kg mq ki kj kk ij bi translated">OrderBy函数按委托参数以升序对IEnumerable进行排序。</p><pre class="kw kx ky kz gt mr ms mt mu aw mv bi"><span id="1ced" class="mw lp iq ms b gy mx my l mz na">int[] myArr = {4,3,2,1};<br/>myArr = myArr.OrderBy(x =&gt; x).ToArray(); //[1,2,3,4]</span><span id="a5e2" class="mw lp iq ms b gy nb my l mz na">Builder[] arr =<br/>{<br/>   new Builder() { Name = "David", Salary = 180 },<br/>   new Builder() { Name = "Frank", Salary = 120 },<br/>   new Builder() { Name = "Jake", Salary = 150 },<br/>};</span><span id="3663" class="mw lp iq ms b gy nb my l mz na">arr = arr.OrderBy(x =&gt; x.Salary).ToArray(); /*[Builder Frank, Builder Jake, Builder David]*/</span></pre><h2 id="6488" class="mw lp iq bd lq nc nd dn lu ne nf dp ly jy ng nh mc kc ni nj mg kg nk nl mk nm bi translated">order by降序</h2><p id="869c" class="pw-post-body-paragraph jn jo iq jp b jq mm js jt ju mn jw jx jy mo ka kb kc mp ke kf kg mq ki kj kk ij bi translated">OrderByDescending函数按委托参数以降序对IEnumerable进行排序。</p><pre class="kw kx ky kz gt mr ms mt mu aw mv bi"><span id="97b4" class="mw lp iq ms b gy mx my l mz na">int[] myArr = {1,2,3,4};<br/>myArr = myArr.OrderByDescending(x =&gt; x).ToArray(); //[4,3,2,1]</span><span id="7f09" class="mw lp iq ms b gy nb my l mz na">Builder[] arr =<br/>{<br/>    new Builder() { Name = "David", Salary = 180 },<br/>    new Builder() { Name = "Frank", Salary = 120 },<br/>    new Builder() { Name = "Jake", Salary = 150 },<br/> };</span><span id="bbb1" class="mw lp iq ms b gy nb my l mz na">arr = arr.OrderByDescending(x =&gt; x.Salary).ToArray();<br/>//[Builder David, Builder Jake, Builder Frank]</span></pre></div><div class="ab cl lh li hu lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="ij ik il im in"><h1 id="b8f5" class="lo lp iq bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">LINQ没有代表也能运作</h1><h2 id="3869" class="mw lp iq bd lq nc nd dn lu ne nf dp ly jy ng nh mc kc ni nj mg kg nk nl mk nm bi translated">明显的</h2><p id="89d1" class="pw-post-body-paragraph jn jo iq jp b jq mm js jt ju mn jw jx jy mo ka kb kc mp ke kf kg mq ki kj kk ij bi translated">Distinct函数删除所有重复的元素。</p><pre class="kw kx ky kz gt mr ms mt mu aw mv bi"><span id="ca11" class="mw lp iq ms b gy mx my l mz na">int[] arr = {1,2,1};<br/>arr = arr.Distinct().ToArray(); //[1,2]</span></pre><h2 id="b67e" class="mw lp iq bd lq nc nd dn lu ne nf dp ly jy ng nh mc kc ni nj mg kg nk nl mk nm bi translated">反面的</h2><p id="0f76" class="pw-post-body-paragraph jn jo iq jp b jq mm js jt ju mn jw jx jy mo ka kb kc mp ke kf kg mq ki kj kk ij bi translated">Reverse函数反转IEnumerable中元素的位置。</p><pre class="kw kx ky kz gt mr ms mt mu aw mv bi"><span id="1b79" class="mw lp iq ms b gy mx my l mz na">int[] arr = {1,5,6,7};<br/>int[] reversed_ = arr.Reverse().ToArray(); //[7,6,5,1]</span></pre></div><div class="ab cl lh li hu lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="ij ik il im in"><h1 id="1106" class="lo lp iq bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">LINQ询问</h1><p id="ca96" class="pw-post-body-paragraph jn jo iq jp b jq mm js jt ju mn jw jx jy mo ka kb kc mp ke kf kg mq ki kj kk ij bi translated">我们可以使用LINQ提供的关键字进行Linq查询。</p><p id="557b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们举个例子:</p><pre class="kw kx ky kz gt mr ms mt mu aw mv bi"><span id="9bb4" class="mw lp iq ms b gy mx my l mz na">int[] arr = { 1, 2, 3, 4, 5 };</span><span id="1647" class="mw lp iq ms b gy nb my l mz na">var get_element = from i in arr<br/>                  select i;</span><span id="0d27" class="mw lp iq ms b gy nb my l mz na">//----------------------------------------------------<br/>//Equivalent to</span><span id="966a" class="mw lp iq ms b gy nb my l mz na">public static IEnumerable&lt;T&gt; Copy&lt;T&gt;(IEnumerable&lt;T&gt; arr)<br/>{<br/>   foreach(var item in arr)<br/>   { <br/>     yield return item; <br/>   }<br/>}</span></pre><p id="88b7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在上面的例子中，I是foreach循环中的项，arr是我们对其进行foreach循环的IEnumerable，我们在每次迭代中选择项。</p><p id="cd63" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因此，上面的例子只是将arr的元素复制到get_element中。</p><p id="e533" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">'<strong class="jp ir"> where </strong>关键字可以帮助我们过滤元素，只将符合条件的元素放入新的IEnumerable中。</p><pre class="kw kx ky kz gt mr ms mt mu aw mv bi"><span id="0b9c" class="mw lp iq ms b gy mx my l mz na">int[] arr = { 1, 2, 3, 4, 5 };</span><span id="8b85" class="mw lp iq ms b gy nb my l mz na">var new_ = from i in arr<br/>           where i &lt; 3<br/>           select i; //[1,2]</span></pre><p id="cf99" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">“<strong class="jp ir"> let </strong>关键字允许我们在查询中创建一个额外的变量。</p><pre class="kw kx ky kz gt mr ms mt mu aw mv bi"><span id="e94e" class="mw lp iq ms b gy mx my l mz na">int[] arr = {1, 2, 3, 4, 5};</span><span id="19c9" class="mw lp iq ms b gy nb my l mz na">var new_ = from i in arr<br/>           where i &lt; 3<br/>           let num_ = i + 1<br/>           select num_; //[2,3]</span></pre><p id="a554" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">'<strong class="jp ir"> orderby </strong>'关键字允许我们按照升序\降序对IEnumerable中的元素进行排序。</p><pre class="kw kx ky kz gt mr ms mt mu aw mv bi"><span id="4468" class="mw lp iq ms b gy mx my l mz na">int[] arr = {1, 2, 3, 10, 5};</span><span id="b1c7" class="mw lp iq ms b gy nb my l mz na">var new_ = from i in arr<br/>           orderby i descending<br/>           select i; //[10,5,3,2,1]<br/>new_ = from i in arr<br/>       orderby i ascending<br/>       select i + 1;//[2,3,4,6,11]</span><span id="eddc" class="mw lp iq ms b gy nb my l mz na">new_ = from i in arr<br/>       where i &lt; 3<br/>       orderby i descending<br/>       select i + 1;//[3,2]</span></pre><p id="fafd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">“<strong class="jp ir"> group &amp; by </strong>”关键字允许我们按键对IEnumerable进行分组。</p><pre class="kw kx ky kz gt mr ms mt mu aw mv bi"><span id="edda" class="mw lp iq ms b gy mx my l mz na">`Person[] myPerson =<br/> {<br/>   new Person(){ job_ = Job.Builder, Name = "Mike" },<br/>   new Person(){ job_ = Job.Builder, Name = "Jack"},<br/>   new Person(){ job_ = Job.Teacher, Name = "David"},<br/>   new Person(){ job_ = Job.Programmer, Name = "Ben"}<br/> };</span><span id="ea39" class="mw lp iq ms b gy nb my l mz na">var groups_ = (from i in myPerson<br/>              group i by i.job_).ToDictionary(x =&gt; x.Key); </span><span id="e1ae" class="mw lp iq ms b gy nb my l mz na">/*Now we have a group of Builders, Programmers and teachers. [(Job.Builder):[Person Mike, Person Jack], (Job.Teacher):[Person David],(Job.Programmer):[Person Ben]]*/</span></pre><p id="9920" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们可以使用'<strong class="jp ir"> into </strong>'关键字将组的值保存到查询中的变量中。</p><pre class="kw kx ky kz gt mr ms mt mu aw mv bi"><span id="02ea" class="mw lp iq ms b gy mx my l mz na">var groups_ = (from i in myPerson<br/>              group i by i.job_ into myProj //myProj stores group<br/>              where myProj.Count() == 1<br/>              select myProj).ToDictionary(x =&gt; x.Key); <br/>//[(Job.Teacher):[Person David],(Job.Programmer):[Person Ben]]</span></pre></div><div class="ab cl lh li hu lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="ij ik il im in"><p id="4d7a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">恭喜你。您已经完成了LINQ简介！:)</p></div><div class="ab cl lh li hu lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="ij ik il im in"><h1 id="6590" class="lo lp iq bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">分级编码</h1><p id="6cf3" class="pw-post-body-paragraph jn jo iq jp b jq mm js jt ju mn jw jx jy mo ka kb kc mp ke kf kg mq ki kj kk ij bi translated">感谢您成为我们社区的一员！<a class="ae ku" href="https://www.youtube.com/channel/UC3v9kBR_ab4UHXXdknz8Fbg?sub_confirmation=1" rel="noopener ugc nofollow" target="_blank">订阅我们的YouTube频道</a>或者加入<a class="ae ku" href="https://skilled.dev/" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> Skilled.dev编码面试课程</strong> </a>。</p><div class="nn no gp gr np nq"><a href="https://skilled.dev" rel="noopener  ugc nofollow" target="_blank"><div class="nr ab fo"><div class="ns ab nt cl cj nu"><h2 class="bd ir gy z fp nv fr fs nw fu fw ip bi translated">编写面试问题+获得开发工作</h2><div class="nx l"><h3 class="bd b gy z fp nv fr fs nw fu fw dk translated">掌握编码面试的过程</h3></div><div class="ny l"><p class="bd b dl z fp nv fr fs nw fu fw dk translated">技术开发</p></div></div><div class="nz l"><div class="oa l ob oc od nz oe lf nq"/></div></div></a></div></div></div>    
</body>
</html>