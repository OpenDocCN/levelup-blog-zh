<html>
<head>
<title>Installing PostgreSQL from Source — Ubuntu EC2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从源安装PostgreSQL—Ubuntu EC2</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/installing-postgresql-from-source-ubuntu-ec2-420a3612119b?source=collection_archive---------15-----------------------#2020-01-29">https://levelup.gitconnected.com/installing-postgresql-from-source-ubuntu-ec2-420a3612119b?source=collection_archive---------15-----------------------#2020-01-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/7a486a099ef1d0ddf43f96d827905fb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rzJtXEetdwO96c9OMwH8Kw.png"/></div></div></figure><div class=""/><p id="3a8e" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们最近有一个需求，要测试AWS DB迁移工具是否适合我们的特定用例，将数据从我们的生产PostgreSQL服务器移动到我们的生产MS SQL服务器(都托管在EC2上)。剧透一下——没有，PostgreSQL可以用作源，但MS SQL <a class="ae kw" href="https://docs.aws.amazon.com/SchemaConversionTool/latest/userguide/CHAP_Source.PostgreSQL.html" rel="noopener ugc nofollow" target="_blank">不是可用的目标之一。</a></p><p id="9580" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我构建了几个EC2实例来测试这一点。从apt存储库安装PostgreSQL非常简单，但是我想通过从源代码安装PostgreSQL的特定版本来尽可能地镜像我们的生产服务器。</p><p id="767e" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我是这样做的——我们在在AWS上创建了EC2实例后，马上进入<em class="kx">,所以如果你需要这方面的指导，那么这篇博客不适合你！</em></p></div><div class="ab cl ky kz hu la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ij ik il im in"><h2 id="0345" class="lf lg jb bd lh li lj dn lk ll lm dp ln kj lo lp lq kn lr ls lt kr lu lv lw lx bi translated"><strong class="ak">语境</strong></h2><ul class=""><li id="e357" class="ly lz jb ka b kb ma kf mb kj mc kn md kr me kv mf mg mh mi bi translated">我使用PuTTY从我的Windows机器上SSH到AWS上托管的Ubuntu 18.04服务器</li><li id="0617" class="ly lz jb ka b kb mj kf mk kj ml kn mm kr mn kv mf mg mh mi bi translated">我将添加一个图形用户界面，因为这将使以后的事情更容易</li></ul></div><div class="ab cl ky kz hu la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ij ik il im in"><h2 id="6463" class="lf lg jb bd lh li lj dn lk ll lm dp ln kj lo lp lq kn lr ls lt kr lu lv lw lx bi translated"><strong class="ak">#安装Gnome </strong></h2><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="3723" class="lf lg jb mt b gy mx my l mz na">$ sudo apt install tasksel<br/>$ sudo tasksel install ubuntu-desktop<br/>$ sudo apt install xrdp<br/>$ sudo systemctl reboot<br/>$ sudo passwd ubuntu</span></pre><p id="8bab" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在你已经安装了标准的Gnome GUI并给你的用户分配了一个密码，RDP进入你的实例来建立基本目录(文档，下载，等等)。).</p><h2 id="1283" class="lf lg jb bd lh li lj dn lk ll lm dp ln kj lo lp lq kn lr ls lt kr lu lv lw lx bi translated"><strong class="ak">#从源安装的安装依赖项</strong></h2><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="f008" class="lf lg jb mt b gy mx my l mz na">$ sudo apt install build-essential zlib1g-dev libreadline-dev -y</span></pre><p id="cf00" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">解压和构建PostgreSQL所必需的一切。我们要去拿的焦油文件。</p><h2 id="b400" class="lf lg jb bd lh li lj dn lk ll lm dp ln kj lo lp lq kn lr ls lt kr lu lv lw lx bi translated"><strong class="ak">#从源URL下载安装文件到你的下载文件夹</strong></h2><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="c687" class="lf lg jb mt b gy mx my l mz na">$ wget <a class="ae kw" href="https://ftp.postgresql.org/pub/source/v10.6/postgresql-10.6.tar.gz" rel="noopener ugc nofollow" target="_blank">https://ftp.postgresql.org/pub/source/v10.6/postgresql-10.6.tar.gz</a></span></pre><p id="1ebd" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">很可能您需要一个不同版本的PostgreSQL。可以查看<a class="ae kw" href="https://www.postgresql.org/ftp/source/" rel="noopener ugc nofollow" target="_blank">官方PostgreSQL FTP服务器</a>，复制你需要的版本的网址(确保右击. tar.gz文件和‘复制链接地址’)。wget是在您指定的URL下载文件的命令。</p><h2 id="e5a3" class="lf lg jb bd lh li lj dn lk ll lm dp ln kj lo lp lq kn lr ls lt kr lu lv lw lx bi translated"><strong class="ak"> #解压tar文件</strong></h2><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="a853" class="lf lg jb mt b gy mx my l mz na">$ tar xvfz postgresql-10.6.tar.gz</span></pre><p id="f9bb" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">运行这个程序时，您需要位于下载目录中(假设这是您下载文件的地方)。这将创建一个解压缩版本，供您配置。tar之后的“xvfz”标志执行以下操作:</p><ul class=""><li id="d6e4" class="ly lz jb ka b kb kc kf kg kj nb kn nc kr nd kv mf mg mh mi bi translated">x:指示tar从档案中提取</li><li id="1e08" class="ly lz jb ka b kb mj kf mk kj ml kn mm kr mn kv mf mg mh mi bi translated">v:详细列出要处理的文件</li><li id="c83a" class="ly lz jb ka b kb mj kf mk kj ml kn mm kr mn kv mf mg mh mi bi translated">f:表示文件名跟在后面</li><li id="5162" class="ly lz jb ka b kb mj kf mk kj ml kn mm kr mn kv mf mg mh mi bi translated">z:通过gzip过滤操作(解压缩文件——这是. tar.gz文件所必需的，而不是。焦油文件)</li></ul><h2 id="a6cb" class="lf lg jb bd lh li lj dn lk ll lm dp ln kj lo lp lq kn lr ls lt kr lu lv lw lx bi translated"><strong class="ak"> #Configure &amp;安装它(在您保存tar文件的文件夹中)</strong></h2><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="7006" class="lf lg jb mt b gy mx my l mz na">$ cd postgresql-10.6<br/>$ ./configure<br/>$ make<br/>$ sudo make install</span></pre><p id="12e0" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在这里，您将目录更改为解压缩后的文件，然后运行必要的命令来使用该文件安装PostgreSQL。</p></div><div class="ab cl ky kz hu la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ij ik il im in"><p id="231f" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">至于从源代码安装PostgreSQL瞧！你完了。你可能想测试它的工作原理。为此，我们需要一个postgres用户，并访问psql命令。您可以在下一篇文章中了解我是如何做到这一点的。</p></div></div>    
</body>
</html>