<html>
<head>
<title>Format Currency in Angular</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">以角度格式表示货币</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/format-currency-in-angular-86b3babd3878?source=collection_archive---------0-----------------------#2019-10-29">https://levelup.gitconnected.com/format-currency-in-angular-86b3babd3878?source=collection_archive---------0-----------------------#2019-10-29</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="c968" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">有角的</h2><div class=""/><div class=""><h2 id="68db" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">在Angular中将数字转换成格式化货币的指南</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/d8f300dfc673b0de05f3ebeb24bb97b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*lBnC844n7A0v6S1j.jpg"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">Cyril Saulnier在Unsplash上拍摄的照片</figcaption></figure><p id="b593" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">在这篇文章中，我将向你展示如何处理Angular中的货币。</p><ol class=""><li id="81a2" class="md me it lj b lk ll ln lo lq mf lu mg ly mh mc mi mj mk ml bi translated">当前管道</li><li id="1796" class="md me it lj b lk mm ln mn lq mo lu mp ly mq mc mi mj mk ml bi translated">在HTML中使用CurrencyPipe</li><li id="f07e" class="md me it lj b lk mm ln mn lq mo lu mp ly mq mc mi mj mk ml bi translated">在TypeScript中使用CurrencyPipe</li></ol><p id="0113" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">更多类似的内容，请查看https://betterfullstack.com的 <a class="ae ms" href="https://betterfullstack.com" rel="noopener ugc nofollow" target="_blank"/></p><h1 id="18c9" class="mt mu it bd mv mw mx my mz na nb nc nd ki ne kj nf kl ng km nh ko ni kp nj nk bi translated">当前管道</h1><p id="1c45" class="pw-post-body-paragraph lh li it lj b lk nl kd lm ln nm kg lp lq nn ls lt lu no lw lx ly np ma mb mc im bi translated"><code class="fe nq nr ns nt b">CurrencyPipe</code>将一个数字转换成货币字符串，根据地区规则进行格式化。这决定了组大小和分隔符、小数点字符以及其他特定于区域设置的配置。</p><p id="95bb" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">下面是来自<code class="fe nq nr ns nt b">@angular/common</code>的实现:</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="nu nv l"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">@angular/common中的电流管</figcaption></figure><p id="90f7" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">您可以阅读上面的描述，以了解每个参数的更多信息。</p><h1 id="de80" class="mt mu it bd mv mw mx my mz na nb nc nd ki ne kj nf kl ng km nh ko ni kp nj nk bi translated">在HTML中使用CurrencyPipe</h1><p id="efb3" class="pw-post-body-paragraph lh li it lj b lk nl kd lm ln nm kg lp lq nn ls lt lu no lw lx ly np ma mb mc im bi translated">在这一节中，我将提供货币管道如何在Angular HTML模板中工作的例子。</p><p id="39dd" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">每个示例都将使用相同的模板设置:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nw"><img src="../Images/73140db8fee6e05966e653c7ca3e2f08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Fg3522-igrbjfw6D.png"/></div></div></figure><p id="44fd" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">首先，让我们将<code class="fe nq nr ns nt b">claimMoney</code>设置为<code class="fe nq nr ns nt b">1</code>。它将产生以下结果:</p><pre class="ks kt ku kv gt nx nt ny nz aw oa bi"><span id="0be2" class="ob mu it nt b gy oc od l oe of">1<br/>$1.00<br/>₫1<br/>VND0,001.00 // this because I set min integer to 4<br/>₫0,001.00 // this because I set min integer to 4<br/>₫0,001.00 // this because I set min integer to 4</span></pre><p id="e9ea" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">现在将<code class="fe nq nr ns nt b">claimMoney</code>设置为<code class="fe nq nr ns nt b">1000</code>。</p><pre class="ks kt ku kv gt nx nt ny nz aw oa bi"><span id="8677" class="ob mu it nt b gy oc od l oe of">1000<br/>$1,000.00<br/>₫1,000<br/>VND1,000.00<br/>₫1,000.00<br/>₫1,000.00</span></pre><p id="6127" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">最后将<code class="fe nq nr ns nt b">claimMoney</code>设置为<code class="fe nq nr ns nt b">'1,000'</code>。<code class="fe nq nr ns nt b">CurrencyPipe</code>期望该值是一个数字，或者使用JavaScript强制为一个数字。由于我们的字符串中有一个逗号<code class="fe nq nr ns nt b">,</code>，它不会被识别为数字，在解析时会变成<code class="fe nq nr ns nt b">NaN</code>。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi og"><img src="../Images/2a2fb2e8246e1ca0e1d7fa046b37a4fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1328/format:webp/0*ZKYgK2I2f0jtD1Z7.png"/></div></figure><p id="d421" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我得到一个错误。表示<code class="fe nq nr ns nt b">CurrencyPipe</code>不接受上面<code class="fe nq nr ns nt b">value:any</code>中的逗号。</p><h1 id="9539" class="mt mu it bd mv mw mx my mz na nb nc nd ki ne kj nf kl ng km nh ko ni kp nj nk bi translated">在TypeScript中使用CurrencyPipe</h1><p id="1e6c" class="pw-post-body-paragraph lh li it lj b lk nl kd lm ln nm kg lp lq nn ls lt lu no lw lx ly np ma mb mc im bi translated">很多时候我不得不在一个角度组件中处理货币，这个角度组件是一个<code class="fe nq nr ns nt b">.ts</code>文件。</p><p id="e5c6" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">这里有一个样例问题。我调用一个API，它返回一个数字，格式是<code class="fe nq nr ns nt b">1110.5</code>。然后我必须把它插入到一个表格中。然后，我允许用户编辑该数字，并将结果提交给服务器。</p><p id="6195" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">首先将<code class="fe nq nr ns nt b">CurrencyPipe</code>注入<code class="fe nq nr ns nt b">constructor</code>:</p><pre class="ks kt ku kv gt nx nt ny nz aw oa bi"><span id="d2af" class="ob mu it nt b gy oc od l oe of">constructor(private currencyPipe : CurrencyPipe, private fb: FormBuilder){}</span></pre><p id="24bd" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">然后，我将数字格式化，并将该值插入到<code class="fe nq nr ns nt b">ngOnInit()</code>生命周期的表单中:</p><pre class="ks kt ku kv gt nx nt ny nz aw oa bi"><span id="96c2" class="ob mu it nt b gy oc od l oe of">ngOnInit() {<br/>    this.claimMoney = 1000.12; // this value get from API<br/>    this.claimForm = this.fb.group({<br/>      total: [ this.formatMoney(this.claimMoney), Validators.required]<br/>    });<br/>}<br/><br/>formatMoney(value) {<br/>    const temp = `${value}`.replace(/\,/g, "");<br/>    return this.currencyPipe.transform(temp).replace("$", "");<br/>}</span></pre><p id="60e2" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">为了获得转换后的结果，我添加了一个名为<code class="fe nq nr ns nt b">transformTotal()</code>的方法:</p><pre class="ks kt ku kv gt nx nt ny nz aw oa bi"><span id="8f1c" class="ob mu it nt b gy oc od l oe of">transformTotal() {<br/>    const value = this.claimForm.controls.total.value;<br/>    this.claimForm.controls.total.setValue(<br/>      this.formatMoney(value.replace(/\,/g, "")), <br/>      {emitEvent: false}<br/>    );<br/>}</span></pre><p id="fd05" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">这个将从组件模板的输入中调用。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/a40e84420be83b4231b23e596fd3a50a.png" data-original-src="https://miro.medium.com/v2/resize:fit:694/0*Ao5znz-XhZkgYjdO.gif"/></div></figure><h1 id="b8d6" class="mt mu it bd mv mw mx my mz na nb nc nd ki ne kj nf kl ng km nh ko ni kp nj nk bi translated">摘要</h1><p id="e441" class="pw-post-body-paragraph lh li it lj b lk nl kd lm ln nm kg lp lq nn ls lt lu no lw lx ly np ma mb mc im bi translated">这篇文章提供了一个简单的方法来处理Angular中的货币。这有助于减少开发人员在应用程序中实现<strong class="lj jd">格式货币</strong>的时间和错误。</p><p id="eae4" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我希望这篇文章对你有用！你可以在我的网站上找到我。欢迎在下面的评论中留下任何问题。我很乐意帮忙！</p><p id="b792" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">点击此处查看源代码。</p><div class="oi oj gp gr ok ol"><a href="https://stackblitz.com/edit/angular-currency-1?embed=1&amp;file=src/app/app.component.html" rel="noopener  ugc nofollow" target="_blank"><div class="om ab fo"><div class="on ab oo cl cj op"><h2 class="bd jd gy z fp oq fr fs or fu fw jc bi translated">角-货币-1 -堆叠</h2><div class="os l"><h3 class="bd b gy z fp oq fr fs or fu fw dk translated">导出到Angular CLI的Angular应用程序的启动项目</h3></div><div class="ot l"><p class="bd b dl z fp oq fr fs or fu fw dk translated">stackblitz.com</p></div></div><div class="ou l"><div class="ov l ow ox oy ou oz lb ol"/></div></div></a></div><h1 id="b178" class="mt mu it bd mv mw mx my mz na nb nc nd ki ne kj nf kl ng km nh ko ni kp nj nk bi translated">资源/参考资料</h1><p id="f135" class="pw-post-body-paragraph lh li it lj b lk nl kd lm ln nm kg lp lq nn ls lt lu no lw lx ly np ma mb mc im bi translated">[ <a class="ae ms" href="https://www.hoangtran.co/assets/2-angular-currency/cover.jpg" rel="noopener ugc nofollow" target="_blank"> 1 </a>:角流管【https://angular.io/api/common/CurrencyPipe#ngmodule】T4</p></div><div class="ab cl pa pb hx pc" role="separator"><span class="pd bw bk pe pf pg"/><span class="pd bw bk pe pf pg"/><span class="pd bw bk pe pf"/></div><div class="im in io ip iq"><div class="ks kt ku kv gt ol"><a href="https://betterfullstack.com/stories/" rel="noopener  ugc nofollow" target="_blank"><div class="om ab fo"><div class="on ab oo cl cj op"><h2 class="bd jd gy z fp oq fr fs or fu fw jc bi translated">故事-更好的全栈</h2><div class="os l"><h3 class="bd b gy z fp oq fr fs or fu fw dk translated">关于JavaScript、Python和Wordpress的有用文章，有助于开发人员减少开发时间并提高…</h3></div><div class="ot l"><p class="bd b dl z fp oq fr fs or fu fw dk translated">betterfullstack.com</p></div></div><div class="ou l"><div class="ph l ow ox oy ou oz lb ol"/></div></div></a></div></div></div>    
</body>
</html>