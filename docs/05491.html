<html>
<head>
<title>How to Send an SMS with Ionic</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用爱奥尼亚发送手机短信</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-send-an-sms-with-ionic-74927d96a2aa?source=collection_archive---------12-----------------------#2020-09-02">https://levelup.gitconnected.com/how-to-send-an-sms-with-ionic-74927d96a2aa?source=collection_archive---------12-----------------------#2020-09-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/0cf854499faaf124ec7c67f284979a0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nQAyktTRUcT4nmsVnNhfIA.png"/></div></div></figure><figure class="jz ka kb kc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jy"><img src="../Images/d8bc31aa9caeda0daea331ce08c029ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*txCh7UdhYP5efoHQ"/></div></div></figure><p id="af9b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">开发跨平台移动应用程序和连接第三方API是技术领域非常需要的技能。今天我将向您展示如何构建一个基本的Ionic移动应用程序，连接到Vonage SMS API来发送SMS消息！</p><p id="e202" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还将构建一个准系统hapi 后端来帮助我们的Ionic应用程序发送SMS消息。</p><h1 id="788c" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">先决条件</h1><p id="2acf" class="pw-post-body-paragraph kd ke iq kf b kg ma ki kj kk mb km kn ko mc kq kr ks md ku kv kw me ky kz la ij bi translated">要开始，您需要:</p><ul class=""><li id="8dbe" class="mf mg iq kf b kg kh kk kl ko mh ks mi kw mj la mk ml mm mn bi translated">像Visual Studio Code、WebStorm或Sublime Text这样出色的IDE</li><li id="4dc3" class="mf mg iq kf b kg mo kk mp ko mq ks mr kw ms la mk ml mm mn bi translated">Node.js的最新LTS版本</li></ul><h1 id="aa4c" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">Vonage API帐户</h1><p id="0201" class="pw-post-body-paragraph kd ke iq kf b kg ma ki kj kk mb km kn ko mc kq kr ks md ku kv kw me ky kz la ij bi translated">要完成这个教程，你需要一个<a class="ae lb" href="http://developer.nexmo.com/ed?c=blog_text&amp;ct=2020-08-19-how-to-send-an-sms-with-ionic-dr" rel="noopener ugc nofollow" target="_blank"> Vonage API账户</a>。如果你还没有，你可以今天就<a class="ae lb" href="http://developer.nexmo.com/ed?c=blog_text&amp;ct=2020-08-19-how-to-send-an-sms-with-ionic-dr" rel="noopener ugc nofollow" target="_blank">注册</a>并开始用免费积分进行构建。一旦你有了一个帐户，你可以在<a class="ae lb" href="http://developer.nexmo.com/ed?c=blog_text&amp;ct=2020-08-19-how-to-send-an-sms-with-ionic-dr" rel="noopener ugc nofollow" target="_blank"> Vonage API仪表板</a>的顶部找到你的API密匙和API秘密。</p><h1 id="8eef" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">创建离子应用程序</h1><p id="2985" class="pw-post-body-paragraph kd ke iq kf b kg ma ki kj kk mb km kn ko mc kq kr ks md ku kv kw me ky kz la ij bi translated">Ionic是一个成熟的框架和工具套件，可以帮助您快速构建跨平台的移动应用。可以用Angular，Vue.js或者React。这是web开发人员的梦想！</p><h2 id="522a" class="mt ld iq bd le mu mv dn li mw mx dp lm ko my mz lq ks na nb lu kw nc nd ly ne bi translated">安装离子</h2><p id="5f51" class="pw-post-body-paragraph kd ke iq kf b kg ma ki kj kk mb km kn ko mc kq kr ks md ku kv kw me ky kz la ij bi translated">在修改一些代码之前，我们需要安装Ionic CLI。</p><p id="2866" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在控制台中，执行以下命令:</p><figure class="jz ka kb kc gt jr"><div class="bz fp l di"><div class="nf ng l"/></div></figure><h2 id="738b" class="mt ld iq bd le mu mv dn li mw mx dp lm ko my mz lq ks na nb lu kw nc nd ly ne bi translated">让我们建造它！</h2><p id="bfcf" class="pw-post-body-paragraph kd ke iq kf b kg ma ki kj kk mb km kn ko mc kq kr ks md ku kv kw me ky kz la ij bi translated">Ionic附带了一些内置模板来帮助您开始使用一个不错的样板应用程序。您可以选择生成一个在UI底部有选项卡、有侧菜单或只有空白画布的应用程序。今天，我们将使用空白模板。</p><p id="0ee1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如前所述，Ionic为您提供了使用多种web框架构建跨平台移动应用程序的选项。今天，我们将使用Angular。</p><p id="3909" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在控制台中，执行:</p><figure class="jz ka kb kc gt jr"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="3a9f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您将被要求输入项目名称。随便你怎么命名。我已经把我的项目命名为<code class="fe nh ni nj nk b">mobile</code>。</p><p id="529a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，将提示您选择一个web框架。选择<em class="nl">角度</em>。</p><p id="41b7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，一个包含所有应用程序模板的列表将可供您选择。选择<em class="nl">空白</em>模板。</p><p id="6d3f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你可能会被要求参与向谷歌发送有关你使用Angular的匿名数据。这取决于你的选择😉。</p><h2 id="1611" class="mt ld iq bd le mu mv dn li mw mx dp lm ko my mz lq ks na nb lu kw nc nd ly ne bi translated">安装特定角度的软件包</h2><p id="e39d" class="pw-post-body-paragraph kd ke iq kf b kg ma ki kj kk mb km kn ko mc kq kr ks md ku kv kw me ky kz la ij bi translated">一旦所有东西都下载并安装好了，你还有最后一步来安装所有东西。还有一个包，其中包含了大量的Angular离子特定的好东西。</p><p id="e82a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">首先，导航到为您的项目创建的文件夹ionic。我不得不使用以下控制台命令:</p><figure class="jz ka kb kc gt jr"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="380f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要安装额外的软件包，请在控制台中执行以下操作:</p><figure class="jz ka kb kc gt jr"><div class="bz fp l di"><div class="nf ng l"/></div></figure><h2 id="b7e5" class="mt ld iq bd le mu mv dn li mw mx dp lm ko my mz lq ks na nb lu kw nc nd ly ne bi translated">运行它！</h2><p id="95b8" class="pw-post-body-paragraph kd ke iq kf b kg ma ki kj kk mb km kn ko mc kq kr ks md ku kv kw me ky kz la ij bi translated">为了确保一切顺利，请在您的控制台中执行以下命令:</p><figure class="jz ka kb kc gt jr"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="4537" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这将在互联网浏览器中运行您的样板应用程序。您可以在看到空白应用程序后关闭它。</p><p id="6e45" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在更高级的场景中，你可以在模拟器中测试你的应用，甚至可以在连接到你电脑的移动设备上测试。但那是以后的事了。</p><h2 id="963f" class="mt ld iq bd le mu mv dn li mw mx dp lm ko my mz lq ks na nb lu kw nc nd ly ne bi translated">配置Angular的HttpClient</h2><p id="5c98" class="pw-post-body-paragraph kd ke iq kf b kg ma ki kj kk mb km kn ko mc kq kr ks md ku kv kw me ky kz la ij bi translated">Angular附带了一个内置的<code class="fe nh ni nj nk b">HttpClient</code>类，它将允许我们以“Angular方式”发出HTTP请求。对于今天的教程，我们将使用内置的<code class="fe nh ni nj nk b">HttpClient</code>向我们的后端发送请求。但是，也可以使用其他流行的HTTP客户端库，比如<a class="ae lb" href="https://github.com/axios/axios" rel="noopener ugc nofollow" target="_blank"> axios </a>。</p><p id="c17f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">首先，我们需要“告诉”Angular我们打算发出HTTP请求。<code class="fe nh ni nj nk b">HttpClientModule</code>将帮助我们做到这一点。要安装<code class="fe nh ni nj nk b">HttpClientModule</code>，打开<code class="fe nh ni nj nk b">src/app/app.module.ts</code>。</p><p id="49a6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，在文件顶部添加以下TypeScript导入:</p><figure class="jz ka kb kc gt jr"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="c854" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，在<code class="fe nh ni nj nk b">@NgModule</code>装饰器中，将<code class="fe nh ni nj nk b">HttpClientModule</code>添加到<code class="fe nh ni nj nk b">imports</code>属性中:</p><figure class="jz ka kb kc gt jr"><div class="bz fp l di"><div class="nf ng l"/></div></figure><h1 id="4d5a" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">构建一个漂亮的用户界面</h1><p id="2c16" class="pw-post-body-paragraph kd ke iq kf b kg ma ki kj kk mb km kn ko mc kq kr ks md ku kv kw me ky kz la ij bi translated">我们的样板应用程序已经在<code class="fe nh ni nj nk b">src/app/home/home.page.html</code>为我们创建了一个页面。</p><p id="1daf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">打开它，用以下部件替换<code class="fe nh ni nj nk b">&lt;div id="container"&gt;</code>的内部:</p><figure class="jz ka kb kc gt jr"><div class="bz fp l di"><div class="nf ng l"/></div></figure><h2 id="5d8d" class="mt ld iq bd le mu mv dn li mw mx dp lm ko my mz lq ks na nb lu kw nc nd ly ne bi translated">UI页面代码隐藏</h2><p id="7ae1" class="pw-post-body-paragraph kd ke iq kf b kg ma ki kj kk mb km kn ko mc kq kr ks md ku kv kw me ky kz la ij bi translated">接下来，我们需要将我们的UI页面连接到我们的后端。在<code class="fe nh ni nj nk b">src/app/home/home.page.ts</code>打开文件。</p><p id="f715" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">再说一次，我已经为你做了繁重的工作！只需将文件内容替换为以下内容:</p><figure class="jz ka kb kc gt jr"><div class="bz fp l di"><div class="nf ng l"/></div></figure><h2 id="9826" class="mt ld iq bd le mu mv dn li mw mx dp lm ko my mz lq ks na nb lu kw nc nd ly ne bi translated">测试一下！</h2><p id="f768" class="pw-post-body-paragraph kd ke iq kf b kg ma ki kj kk mb km kn ko mc kq kr ks md ku kv kw me ky kz la ij bi translated">通过在控制台中执行<code class="fe nh ni nj nk b">ionic serve</code>来运行应用程序，以确保您可以看到应用程序正在运行。</p><h1 id="1431" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">使用哈比神的后端</h1><p id="9052" class="pw-post-body-paragraph kd ke iq kf b kg ma ki kj kk mb km kn ko mc kq kr ks md ku kv kw me ky kz la ij bi translated">让我们使用hapi创建我们的后端！</p><p id="5f64" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">首先，通过从项目的根文件夹运行<code class="fe nh ni nj nk b">mkdir backend &amp;&amp; cd backend</code>为后端代码创建一个目录。</p><p id="cff3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，运行<code class="fe nh ni nj nk b">npm install @hapi/hapi nexmo</code>来安装hapi和Vonage API客户端。</p><h2 id="114e" class="mt ld iq bd le mu mv dn li mw mx dp lm ko my mz lq ks na nb lu kw nc nd ly ne bi translated">基本HTTP服务器</h2><p id="54f4" class="pw-post-body-paragraph kd ke iq kf b kg ma ki kj kk mb km kn ko mc kq kr ks md ku kv kw me ky kz la ij bi translated">创建一个文件<code class="fe nh ni nj nk b">/backend/index.js</code>，并填入以下内容:</p><figure class="jz ka kb kc gt jr"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="f347" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">确保您替换了您的API密钥和密码！</p><h2 id="6580" class="mt ld iq bd le mu mv dn li mw mx dp lm ko my mz lq ks na nb lu kw nc nd ly ne bi translated">可怕的CORS</h2><p id="4f1f" class="pw-post-body-paragraph kd ke iq kf b kg ma ki kj kk mb km kn ko mc kq kr ks md ku kv kw me ky kz la ij bi translated">当您将一个Ionic应用程序连接到一个位于<code class="fe nh ni nj nk b">localhost</code>上的后端API时，您会遇到一些与CORS相关的问题。</p><p id="c3eb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要在开发过程中解决这个问题，您必须以管理员身份打开您的hosts文件。在Windows 10上，它位于<code class="fe nh ni nj nk b">C:\Windows\System32\drivers\etc\hosts</code>。在Linux机器上，它通常在<code class="fe nh ni nj nk b">/etc/hosts</code>。</p><p id="b8d1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">添加以下一行:</p><p id="d65f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe nh ni nj nk b">127.0.0.1 sms.com</code></p><p id="47f8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">每当我们导航到<code class="fe nh ni nj nk b">sms.com</code>时，我们的本地机器会将这个HTTP请求重新路由到<code class="fe nh ni nj nk b">localhost</code>。我们只是在欺骗我们的网络浏览器，让它以为自己进入了一个真实的域名。</p><h1 id="6e73" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">让我们运行它！</h1><p id="634e" class="pw-post-body-paragraph kd ke iq kf b kg ma ki kj kk mb km kn ko mc kq kr ks md ku kv kw me ky kz la ij bi translated">好吧！打开两个控制台。</p><p id="3fe3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在一个中，导航到<code class="fe nh ni nj nk b">/mobile</code>并运行<code class="fe nh ni nj nk b">ionic serve</code>。</p><p id="a450" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">另一方面，导航到<code class="fe nh ni nj nk b">/backend</code>并运行<code class="fe nh ni nj nk b">node index.js</code>。</p><p id="b272" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用您的Vonage仪表板上提供的<a class="ae lb" href="https://dashboard.nexmo.com/getting-started/sms" rel="noopener ugc nofollow" target="_blank">测试号码，尝试发送短信！</a></p></div><div class="ab cl nm nn hu no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="ij ik il im in"><p id="504f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="nl">最初发布于</em><a class="ae lb" href="https://www.nexmo.com/blog/2020/08/19/how-to-send-an-sms-with-ionic-dr" rel="noopener ugc nofollow" target="_blank"><em class="nl">https://www . NEX mo . com/blog/2020/08/19/how-to-send-an-SMS-with-ionic-dr</em></a></p></div></div>    
</body>
</html>