<html>
<head>
<title>How to Make Your Matplotlib Plots Interactive</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使你的Matplotlib图具有交互性</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-make-your-matplotlib-plots-interactive-587f5a0db293?source=collection_archive---------4-----------------------#2021-09-16">https://levelup.gitconnected.com/how-to-make-your-matplotlib-plots-interactive-587f5a0db293?source=collection_archive---------4-----------------------#2021-09-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="b83c" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">利用Matplotlib小部件扩展使您的绘图具有交互性、动态性和信息性</h2></div><p id="0b07" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Matplotlib已经成为许多数据科学家的主要可视化库。它被一些更受欢迎的库广泛用作后端可视化引擎，比如seaborn和pandas。因此，在这一领域有许多进展也就不足为奇了，尤其是在努力使Matplotlib具有交互性和更加用户友好性方面。介绍<code class="fe le lf lg lh b">ipympl</code>，一个Matplotlib的Jupyter扩展，它为你的静态绘图添加了小部件和交互功能！</p><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi li"><img src="../Images/79a147b8426c7ef386d0609310c8919d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*bbpeuZ234ab5ZNJh"/></div></div><figcaption class="lu lv gj gh gi lw lx bd b be z dk translated">由<a class="ae ly" href="https://unsplash.com/@kobuagency?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> KOBU机构</a>在<a class="ae ly" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="c8a7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这篇文章中，我们将学习如何使用Matplotlib的小部件功能和一些基本功能来简化我们的可视化任务。</p><pre class="lj lk ll lm gt lz lh ma mb aw mc bi"><span id="280e" class="md me it lh b gy mf mg l mh mi"><strong class="lh iu">Table of Content<br/></strong>1. Setup<br/>2. Interaction with Pandas<br/>3. Interaction with Geopandas</span></pre><blockquote class="mj mk ml"><p id="fdc1" class="ki kj mm kk b kl km ju kn ko kp jx kq mn ks kt ku mo kw kx ky mp la lb lc ld im bi translated">请订阅我的<a class="ae ly" href="https://tinyurl.com/2npw2fnz" rel="noopener ugc nofollow" target="_blank"> <strong class="kk iu">电子邮件简讯</strong> </a>，在那里我会定期用简单的英语和漂亮的可视化语言总结编程技巧和人工智能研究论文。</p></blockquote></div><div class="ab cl mq mr hx ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="im in io ip iq"><h1 id="3dfa" class="mx me it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">设置</h1><p id="25e2" class="pw-post-body-paragraph ki kj it kk b kl no ju kn ko np jx kq kr nq kt ku kv nr kx ky kz ns lb lc ld im bi translated">我们首先需要通过<code class="fe le lf lg lh b">conda</code>或<code class="fe le lf lg lh b">pip</code>安装<code class="fe le lf lg lh b">ipympl</code>。我总是建议使用<code class="fe le lf lg lh b">conda</code>来防止任何依赖冲突。</p><ul class=""><li id="c8f3" class="nt nu it kk b kl km ko kp kr nv kv nw kz nx ld ny nz oa ob bi translated">使用<code class="fe le lf lg lh b">conda</code></li></ul><pre class="lj lk ll lm gt lz lh ma mb aw mc bi"><span id="72fd" class="md me it lh b gy mf mg l mh mi">conda install -c conda-forge ipympl</span></pre><ul class=""><li id="1372" class="nt nu it kk b kl km ko kp kr nv kv nw kz nx ld ny nz oa ob bi translated">使用<code class="fe le lf lg lh b">pip</code></li></ul><pre class="lj lk ll lm gt lz lh ma mb aw mc bi"><span id="f6d1" class="md me it lh b gy mf mg l mh mi">pip install ipympl</span></pre><p id="33a1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了能够激活matplotlib的小部件功能，我们需要这样启用它:</p><pre class="lj lk ll lm gt lz lh ma mb aw mc bi"><span id="2539" class="md me it lh b gy mf mg l mh mi">jupyter nbextension enable --py widgetsnbextension</span></pre><p id="fd28" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">安装完成后，我们可以通过打开一个新笔记本来导入本教程所需的库:</p><pre class="lj lk ll lm gt lz lh ma mb aw mc bi"><span id="051a" class="md me it lh b gy mf mg l mh mi">import pandas as pd<br/>import geopandas as gpd<br/>import matplotlib.pyplot as plt</span></pre><p id="2964" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">而在笔记本本身，我们可以用下面的命令来修饰它:</p><pre class="lj lk ll lm gt lz lh ma mb aw mc bi"><span id="46db" class="md me it lh b gy mf mg l mh mi">%matplotlib widget</span></pre><p id="5ae4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在一切都完成了，我们可以开始教程了。</p></div><div class="ab cl mq mr hx ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="im in io ip iq"><h1 id="8ab7" class="mx me it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">与熊猫的互动</h1><p id="8471" class="pw-post-body-paragraph ki kj it kk b kl no ju kn ko np jx kq kr nq kt ku kv nr kx ky kz ns lb lc ld im bi translated">我们将学习如何与熊猫互动，以建立我们的matplotlib互动情节。</p><p id="4aa0" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">首先，我们需要从在线源加载数据集。在这种情况下，我们将使用流行的<code class="fe le lf lg lh b">Iris</code>数据集来描述不同种类鸢尾花的特征。</p><pre class="lj lk ll lm gt lz lh ma mb aw mc bi"><span id="8986" class="md me it lh b gy mf mg l mh mi">iris = pd.read_csv('https://raw.githubusercontent.com/mwaskom/seaborn-data/master/iris.csv')</span><span id="a3f5" class="md me it lh b gy oc mg l mh mi">iris.head()</span></pre><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div class="gh gi od"><img src="../Images/08c2e7c93e26fdef5dc6b65fa21884e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1002/format:webp/1*tjY0hU3sF1F-5z8pusLbXQ.png"/></div><figcaption class="lu lv gj gh gi lw lx bd b be z dk translated">我们的虹膜数据集(图片来自作者)</figcaption></figure><p id="627d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们能够检查描述一种特殊鸢尾花的不同特征，包括它的<code class="fe le lf lg lh b">sepal_length</code>或<code class="fe le lf lg lh b">petal_width</code>。</p><p id="c5c3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在让我们使用Matplotlib按常规绘制上面的数据帧。如果你不太熟悉这个库，我已经为你创建了一个简单的cheatsheet开始！</p><div class="oe of gp gr og oh"><a rel="noopener  ugc nofollow" target="_blank" href="/matplotlib-ultimate-cheat-sheet-2021-2bcd1646f41e"><div class="oi ab fo"><div class="oj ab ok cl cj ol"><h2 class="bd iu gy z fp om fr fs on fu fw is bi translated">Matplotlib终极备忘单(2021)</h2><div class="oo l"><h3 class="bd b gy z fp om fr fs on fu fw dk translated">Python中Matplotlib的完整指南，满足您的绘图需求</h3></div><div class="op l"><p class="bd b dl z fp om fr fs on fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="oq l"><div class="or l os ot ou oq ov ls oh"/></div></div></a></div><pre class="lj lk ll lm gt lz lh ma mb aw mc bi"><span id="23f4" class="md me it lh b gy mf mg l mh mi">plt.scatter('sepal_length', 'petal_width', data=iris)<br/>plt.xlabel('Sepal Length')<br/>plt.ylabel('Petal Width')<br/>plt.show()</span></pre><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/1dc6e0da0d47943208e0a1b4d74d0856.png" data-original-src="https://miro.medium.com/v2/resize:fit:1294/1*WbSGvxZG4SBf2nbKnIR10Q.gif"/></div><figcaption class="lu lv gj gh gi lw lx bd b be z dk translated">与熊猫的互动(图片来自作者)</figcaption></figure><p id="6ab8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">做得好！我们可以放大并与之前使用小部件功能生成的图进行交互。</p><p id="b203" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您还可以通过隐藏工具栏、标题或具有调整画布大小的功能来自定义如何查看交互式绘图。</p><pre class="lj lk ll lm gt lz lh ma mb aw mc bi"><span id="a882" class="md me it lh b gy mf mg l mh mi">fig.canvas.toolbar_visible = True<br/>fig.canvas.header_visible = False<strong class="lh iu"><br/></strong>fig.canvas.resizable = False</span></pre><p id="2cf0" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">不同的地块类型</strong></p><p id="3d3b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">关于<code class="fe le lf lg lh b">ipympl</code>的强大之处在于它能够很好地与<code class="fe le lf lg lh b">pandas</code>底层的其他绘图功能协同工作。</p><p id="8951" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们将通过一些同行，包括线阴谋！</p><pre class="lj lk ll lm gt lz lh ma mb aw mc bi"><span id="6c8a" class="md me it lh b gy mf mg l mh mi">iris.plot()</span></pre><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/0db0ffa954a8c92ed3037d0186435b4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1294/1*xkpwCRnBD7OePmbTvGnMiA.gif"/></div><figcaption class="lu lv gj gh gi lw lx bd b be z dk translated">线图交互(图片来自作者)</figcaption></figure><p id="85cf" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果现在我们想使用<code class="fe le lf lg lh b">geopandas</code>绘制地理空间位置呢？下一节将处理这个问题！</p></div><div class="ab cl mq mr hx ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="im in io ip iq"><h1 id="c394" class="mx me it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">与地质公园的互动</h1><p id="3d49" class="pw-post-body-paragraph ki kj it kk b kl no ju kn ko np jx kq kr nq kt ku kv nr kx ky kz ns lb lc ld im bi translated">Geopandas类似于pandas，但它是专门为地理空间数据集构建的。该库还支持matplotlib作为其可视化引擎，因此，绘制交互式地理空间图表应该同样容易。</p><p id="6e26" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本教程中，我们将使用区域平均汽车共享使用的开源数据集。</p><pre class="lj lk ll lm gt lz lh ma mb aw mc bi"><span id="e4c9" class="md me it lh b gy mf mg l mh mi">car = pd.read_csv("https://raw.githubusercontent.com/plotly/datasets/master/carshare.csv")</span></pre><p id="dbcd" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以通过简单地调用<code class="fe le lf lg lh b">GeoDataframe()</code>方法将我们的pandas数据帧转换成geopandas，在这里我们指定包含<code class="fe le lf lg lh b">geometry</code>信息和投影<code class="fe le lf lg lh b">crs</code>的列。</p><pre class="lj lk ll lm gt lz lh ma mb aw mc bi"><span id="5d53" class="md me it lh b gy mf mg l mh mi">gdf = gpd.GeoDataFrame(car,geometry=gpd.points_from_xy(car.centroid_lon, car.centroid_lat), crs="EPSG:4326")</span></pre><p id="4cf5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一个简短的数据子集将会给我们</p><pre class="lj lk ll lm gt lz lh ma mb aw mc bi"><span id="ce01" class="md me it lh b gy mf mg l mh mi">gdf.head()</span></pre><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div class="gh gi ox"><img src="../Images/6a850e4f9a474c9dc46d3b8b0af0bf45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1242/format:webp/1*seBZ4T5d2MDtH2IVZs1lIw.png"/></div><figcaption class="lu lv gj gh gi lw lx bd b be z dk translated">我们的geopandas数据集(图片来自作者)</figcaption></figure><p id="1ca4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后，我们将能够轻松地绘制我们的<code class="fe le lf lg lh b">GeoDataframe</code>数据。</p><pre class="lj lk ll lm gt lz lh ma mb aw mc bi"><span id="53e7" class="md me it lh b gy mf mg l mh mi">gdf.plot()</span></pre><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/653a7cf35f8cd5fc8f09c606ce8424ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1294/1*pYpkr67Iv29ZgCH7Lv6jTQ.gif"/></div><figcaption class="lu lv gj gh gi lw lx bd b be z dk translated">地理数据框架交互式可视化(图片来自作者)</figcaption></figure><p id="cef5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果您想添加底图，请在此处使用<code class="fe le lf lg lh b">mpl_toolkits</code><a class="ae ly" href="https://matplotlib.org/basemap/users/examples.html" rel="noopener ugc nofollow" target="_blank"/>查看如何添加。</p><h1 id="43a4" class="mx me it bd my mz oy nb nc nd oz nf ng jz pa ka ni kc pb kd nk kf pc kg nm nn bi translated"><strong class="ak">结论</strong></h1><p id="7826" class="pw-post-body-paragraph ki kj it kk b kl no ju kn ko np jx kq kr nq kt ku kv nr kx ky kz ns lb lc ld im bi translated">我们已经学习了如何在Jupyter笔记本环境中设置并激活<code class="fe le lf lg lh b">ipympl</code>库。此外，我们还演示了如何使用<code class="fe le lf lg lh b">pandas</code>和<code class="fe le lf lg lh b">geopandas</code>数据帧生成交互式图形。这种交互非常有用，尤其是当我们必须对某些数据进行子集划分或者以更深入的方式对特定的子群进行诊断时。我希望你和我学得一样多！一如既往，如果您有任何反馈，请随时留下回应！</p></div></div>    
</body>
</html>