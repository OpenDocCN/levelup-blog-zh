<html>
<head>
<title>Configure NextJS with Storybook and TailwindCSS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Storybook和TailwindCSS配置NextJS</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/configure-nextjs-with-storybook-and-tailwindcss-by-andrea-vassallo-21786844ebdd?source=collection_archive---------7-----------------------#2020-12-21">https://levelup.gitconnected.com/configure-nextjs-with-storybook-and-tailwindcss-by-andrea-vassallo-21786844ebdd?source=collection_archive---------7-----------------------#2020-12-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="70c2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kl">最初发布于</em><a class="ae km" href="https://nebulab.it/blog/nextjs-tailwind-storybook/" rel="noopener ugc nofollow" target="_blank"><em class="kl">https://nebulab . it</em></a><em class="kl">。</em></p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi kn"><img src="../Images/a8cad7cf6b6263afd1ab4cd6309a2aa3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lvLRuYxNtEqGtCfYl__EDA.jpeg"/></div></div></figure><p id="2bb4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在本文中，我们将展示如何使用<a class="ae km" href="https://storybook.js.org/" rel="noopener ugc nofollow" target="_blank"> Storybook </a>和<a class="ae km" href="https://tailwindcss.com/" rel="noopener ugc nofollow" target="_blank"> TailwindCSS </a>创建一个<a class="ae km" href="https://nextjs.org/" rel="noopener ugc nofollow" target="_blank"> NextJs </a>项目。</p><p id="6b8f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在开始之前，我想解释谁是参与者，以及为什么将他们添加到我们的前端应用程序会更好。</p><h1 id="ce2e" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">NextJS</h1><p id="f663" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated"><a class="ae km" href="https://nextjs.org/" rel="noopener ugc nofollow" target="_blank"> NextJS </a>不需要很多演示。如果你在这里，你可能已经知道什么是NextJS，以及为什么我们应该用它来构建健壮的应用程序。</p><p id="4eea" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">NextJS 是一个很棒的<a class="ae km" href="https://it.reactjs.org/" rel="noopener ugc nofollow" target="_blank"> React </a>前端框架，它主要用于构建SEO友好的应用程序，因为你可以使用三种不同类型的渲染/预渲染方法:</p><ul class=""><li id="da98" class="mc md iq jp b jq jr ju jv jy me kc mf kg mg kk mh mi mj mk bi translated">SSG(静态站点生成)HTML是在构建时生成的，将在每个请求中重用</li><li id="410b" class="mc md iq jp b jq ml ju mm jy mn kc mo kg mp kk mh mi mj mk bi translated">SSR(服务器端呈现)使用节点服务器为每个请求生成HTML，因此响应是SEO友好的</li><li id="b323" class="mc md iq jp b jq ml ju mm jy mn kc mo kg mp kk mh mi mj mk bi translated">CSR(客户端渲染)normale <a class="ae km" href="https://it.reactjs.org/" rel="noopener ugc nofollow" target="_blank"> React </a>行为，响应只是客户端运行的Javascript</li></ul><h1 id="67e8" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">尾翼CSS</h1><p id="809b" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">Tailwind是使用HTML类构建应用程序风格的最强大的库之一。TailwindCSS 实现了大量的动态类，这些类将不同的样式规则应用到你的应用程序中，并且它完全可以使用配置文件进行定制！</p><p id="a6aa" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最初，你需要花时间去理解哪些是你需要用来构建你的界面的正确的类，但是在Tailwind中最酷的事情之一是它的超级文档。</p><p id="f523" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">顺便说一下，2.0版本最近发布了许多新功能。</p><h1 id="1295" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">故事书</h1><p id="5b46" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated"><a class="ae km" href="https://storybook.js.org/" rel="noopener ugc nofollow" target="_blank"> Storybook </a>是一个很棒的库，主要用于在<a class="ae km" href="https://nextjs.org/" rel="noopener ugc nofollow" target="_blank"> NextJs </a>环境之外呈现我们的应用程序组件。这意味着您可以检查您的组件UI，而无需进行真正的查询或获取数据。您还可以根据传递的属性判断出应用程序组件是如何变化的。</p><p id="5915" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae km" href="https://storybook.js.org/" rel="noopener ugc nofollow" target="_blank"> Storybook </a>在使用组织良好的组件时更加强大，例如，使用<a class="ae km" href="https://bradfrost.com/blog/post/atomic-web-design/" rel="noopener ugc nofollow" target="_blank">原子设计</a>。</p><p id="178f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">示例</strong></p><p id="0bef" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您可能会在您的项目中创建自定义的<code class="fe mq mr ms mt b">Button</code>组件，该组件将基于传递的属性或获取的数据以不同的方式呈现。有了<a class="ae km" href="https://storybook.js.org/" rel="noopener ugc nofollow" target="_blank">故事书</a>，你可以通过应用<a class="ae km" href="https://storybook.js.org/" rel="noopener ugc nofollow" target="_blank">故事书</a>面板中的自定义道具或者删除你所有的请求来检查所有的UI更改。</p><h1 id="073f" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">TL；速度三角形定位法(dead reckoning)</h1><p id="2ca8" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">在这里你可以找到完整配置的<a class="ae km" href="https://github.com/nebulab/nextjs-storybook-tailwindcss" rel="noopener ugc nofollow" target="_blank">项目</a></p><h1 id="c721" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">开始吧！</h1><p id="f700" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">对于本文，为了更直接，我不会将应用程序分成组件。最好在真实的应用程序中这样做，以避免直接使用<code class="fe mq mr ms mt b">index.js</code>页面。</p><p id="040a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最佳实践是编写组件，使用一个很好的文件结构按上下文将它们分开:</p><ul class=""><li id="9208" class="mc md iq jp b jq jr ju jv jy me kc mf kg mg kk mh mi mj mk bi translated">关于组件的React文档:<a class="ae km" href="https://it.reactjs.org/docs/components-and-props.html#extracting-components" rel="noopener ugc nofollow" target="_blank">链接</a></li><li id="7cf2" class="mc md iq jp b jq ml ju mm jy mn kc mo kg mp kk mh mi mj mk bi translated">关于组件结构的原子设计模式:<a class="ae km" href="https://bradfrost.com/blog/post/atomic-web-design/" rel="noopener ugc nofollow" target="_blank">链接</a></li></ul><h1 id="6345" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">创建NextJS应用程序</h1><p id="a7f4" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">首先，运行这个命令来创建您的<a class="ae km" href="https://nextjs.org/" rel="noopener ugc nofollow" target="_blank"> NextJS </a>项目:</p><pre class="ko kp kq kr gt mu mt mv mw aw mx bi"><span id="3e52" class="my la iq mt b gy mz na l nb nc">npx create-next-app --use-npm nextjs-storybook-tailwindcss</span></pre><p id="6b64" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">并使用<code class="fe mq mr ms mt b">cd nextjs-storybook-tailwindcss</code>在项目目录中导航。</p><h1 id="da8e" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">运行应用程序</h1><pre class="ko kp kq kr gt mu mt mv mw aw mx bi"><span id="42cc" class="my la iq mt b gy mz na l nb nc">npm run dev</span></pre><h1 id="0577" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">重构默认代码</h1><p id="70b9" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">因为我们将使用<a class="ae km" href="https://tailwindcss.com/" rel="noopener ugc nofollow" target="_blank"> TailwindCSS </a>来构建我们的风格，所以<code class="fe mq mr ms mt b">create-next-app</code>命令创建了带有一些不必要配置的项目。</p><p id="8765" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">将<code class="fe mq mr ms mt b">pages/index.js</code>中的内容替换为:</p><pre class="ko kp kq kr gt mu mt mv mw aw mx bi"><span id="489a" class="my la iq mt b gy mz na l nb nc"><strong class="mt ir">const</strong> Home <strong class="mt ir">=</strong> ({ article, showImage }) <strong class="mt ir">=&gt;</strong> {<br/>  <strong class="mt ir">if</strong> (<strong class="mt ir">!</strong>article) <strong class="mt ir">return</strong> "The article wasn't found!"<br/><br/>  <strong class="mt ir">const</strong> {author, company, image_url, content} <strong class="mt ir">=</strong> article<br/><br/>  <strong class="mt ir">const</strong> Image <strong class="mt ir">=</strong> showImage ? (&lt;img className="w-24 h-24 rounded-full mx-auto md:flex md:self-center"<br/>    src={image_url} alt="A beautiful cat" width="200" height="200" /&gt;) : ''<br/><br/>  <strong class="mt ir">return</strong> (<br/>    &lt;div className="w-96 mx-auto"&gt;<br/>      &lt;div className="h-screen flex items-center"&gt;<br/>        &lt;figure className="lg:flex bg-gray-200 rounded-xl p-8 lg:p-4"&gt;<br/>          {Image}<br/>          &lt;div className="pt-6 lg:p-4 text-center lg:text-left space-y-4"&gt;<br/>            &lt;p className="text-lg font-semibold"&gt;{content}&lt;/p&gt;<br/>            &lt;figcaption className="font-medium"&gt;<br/>              &lt;div className="text-blue-600"&gt;{author}&lt;/div&gt;<br/>              &lt;div className="text-gray-500"&gt;{company}&lt;/div&gt;<br/>            &lt;/figcaption&gt;<br/>          &lt;/div&gt;<br/>        &lt;/figure&gt;<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;<br/>  )<br/>}<br/><br/>Home.defaultProps <strong class="mt ir">=</strong> {<br/>  showImage: <strong class="mt ir">true</strong><br/>}<br/><br/><strong class="mt ir">export</strong> <strong class="mt ir">const</strong> getServerSideProps <strong class="mt ir">=</strong> async () <strong class="mt ir">=&gt;</strong> {<br/>  <strong class="mt ir">const</strong> response <strong class="mt ir">=</strong> await fetch('http://localhost:3000/api/article')<br/>  <strong class="mt ir">const</strong> data <strong class="mt ir">=</strong> await response.json()<br/><br/>  <strong class="mt ir">if</strong> (<strong class="mt ir">!</strong>data) <strong class="mt ir">return</strong> { props: {}}<br/><br/>  <strong class="mt ir">return</strong> {<br/>    props: {<br/>      article: data<br/>    }<br/>  }<br/>}<br/><br/><strong class="mt ir">export</strong> <strong class="mt ir">default</strong> Home</span></pre><p id="dafb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">添加创建该文件的第一个API<code class="fe mq mr ms mt b">pages/api/article.js</code>:</p><pre class="ko kp kq kr gt mu mt mv mw aw mx bi"><span id="0b1c" class="my la iq mt b gy mz na l nb nc"><strong class="mt ir">const</strong> Article <strong class="mt ir">=</strong> (_, res) <strong class="mt ir">=&gt;</strong> {<br/>  res.statusCode <strong class="mt ir">=</strong> 200<br/>  res.json({<br/>    id: 1,<br/>    author: 'Andrea Vassallo',<br/>    company: 'Nebulab',<br/>    image_url: 'http://placekitten.com/200/200',<br/>    content: 'The cat is a domestic species of small carnivorous mammal.'<br/>  })<br/>}<br/><br/><strong class="mt ir">export</strong> <strong class="mt ir">default</strong> Article</span></pre><p id="d2f8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">删除CSS文件:<code class="fe mq mr ms mt b">styles/Home.module.css</code>:</p><pre class="ko kp kq kr gt mu mt mv mw aw mx bi"><span id="226c" class="my la iq mt b gy mz na l nb nc">rm styles/Home.module.css</span></pre><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/a478789ab25f82caac96af068424e019.png" data-original-src="https://miro.medium.com/v2/resize:fit:1074/format:webp/0*CAJpCAv3jwy8Hz8J.png"/></div></figure><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/316362a019837b9f161cb4bdaf373cea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/0*43Jwtdke0simNUL1.gif"/></div></figure><p id="31ed" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">结果是一个丑陋和无聊的HTML页面。</p><h2 id="9535" class="my la iq bd lb nf ng dn lf nh ni dp lj jy nj nk ln kc nl nm lr kg nn no lv np bi translated"><strong class="ak">我们去应用我们牛逼的风格吧。</strong></h2><h1 id="8a65" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">安装尾翼CSS</h1><p id="0125" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated"><em class="kl">为什么在这种情况下文档不够？</em></p><p id="aff7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kl">因为</em><a class="ae km" href="https://nextjs.org/" rel="noopener ugc nofollow" target="_blank"><em class="kl">next js</em></a><em class="kl">想出了一堆预先配置好的服务比如巴别塔</em><a class="ae km" href="https://postcss.org/" rel="noopener ugc nofollow" target="_blank"><em class="kl">PostCSS</em></a><em class="kl">我们还得</em><a class="ae km" href="https://tailwindcss.com/" rel="noopener ugc nofollow" target="_blank"><em class="kl">TailwindCSS</em></a><em class="kl">跟他们一起</em>。</p><p id="3de7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">阅读<a class="ae km" href="https://tailwindcss.com/" rel="noopener ugc nofollow" target="_blank"> TailwindCSS </a>文档，您会发现我们需要三个不同的库来完成安装:</p><p id="ebc9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们不需要安装<code class="fe mq mr ms mt b">postcss</code>和<code class="fe mq mr ms mt b">autoprefixer</code>库，因为它们已经安装在<a class="ae km" href="https://nextjs.org/" rel="noopener ugc nofollow" target="_blank"> NextJs </a>中。</p><p id="05f6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">运行这些命令来安装<a class="ae km" href="https://tailwindcss.com/" rel="noopener ugc nofollow" target="_blank"> TailwindCSS </a></p><pre class="ko kp kq kr gt mu mt mv mw aw mx bi"><span id="250e" class="my la iq mt b gy mz na l nb nc">npm install --save-dev tailwindcss</span></pre><p id="e5be" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">不幸的是，我们不能使用<code class="fe mq mr ms mt b">npx tailwind init</code>来创建配置文件，因为它会检查你是否安装了<code class="fe mq mr ms mt b">autoprefixer</code>库。</p><p id="317d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们创建添加了<code class="fe mq mr ms mt b">tailwind.config.js</code>文件的配置文件</p><pre class="ko kp kq kr gt mu mt mv mw aw mx bi"><span id="292e" class="my la iq mt b gy mz na l nb nc">touch tailwind.config.js</span></pre><p id="d7ae" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用默认配置:</p><pre class="ko kp kq kr gt mu mt mv mw aw mx bi"><span id="74ef" class="my la iq mt b gy mz na l nb nc">module.exports <strong class="mt ir">=</strong> {<br/>  purge: [<br/>    <em class="kl">// This is not present inside the default configuration</em><br/>    <em class="kl">// but it's good to build your production application</em><br/>    <em class="kl">// Read more about this here: https://tailwindcss.com/docs/installation#building-your-css</em><br/>    './pages/**/*.js',<br/>  ],<br/>  darkMode: <strong class="mt ir">false</strong>,<br/>  theme: {<br/>    extend: {},<br/>  },<br/>  variants: {<br/>    extend: {},<br/>  },<br/>  plugins: [],<br/>}</span></pre><h1 id="7a3f" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">配置PostCSS</h1><p id="3134" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">要配置PostCSS，我们必须覆盖<a class="ae km" href="https://nextjs.org/docs/advanced-features/customizing-postcss-config" rel="noopener ugc nofollow" target="_blank"> NextJs默认设置</a>:</p><p id="32e8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">安装依赖项:</p><pre class="ko kp kq kr gt mu mt mv mw aw mx bi"><span id="b247" class="my la iq mt b gy mz na l nb nc">npm install --save-dev postcss-flexbugs-fixes postcss-preset-env</span></pre><p id="e2e7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">创建<code class="fe mq mr ms mt b">postcss.config.js</code>文件</p><pre class="ko kp kq kr gt mu mt mv mw aw mx bi"><span id="195f" class="my la iq mt b gy mz na l nb nc">touch postcss.config.js</span></pre><p id="358d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">并用默认配置填充它:</p><pre class="ko kp kq kr gt mu mt mv mw aw mx bi"><span id="b956" class="my la iq mt b gy mz na l nb nc">module.exports <strong class="mt ir">=</strong> {<br/>  plugins: {<br/>    'postcss-flexbugs-fixes': {},<br/>    'postcss-preset-env': {<br/>      autoprefixer: {<br/>        flexbox: 'no-2009',<br/>      },<br/>      stage: 3,<br/>      features: {<br/>        'custom-properties': <strong class="mt ir">false</strong>,<br/>      },<br/>    },<br/>  },<br/>}</span></pre><p id="6384" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">将<code class="fe mq mr ms mt b">tailwindcss</code>插件添加到插件列表的顶部:</p><pre class="ko kp kq kr gt mu mt mv mw aw mx bi"><span id="9f7b" class="my la iq mt b gy mz na l nb nc">module.exports <strong class="mt ir">=</strong> {<br/>  plugins: {<br/>    tailwindcss: {},<br/>    ...<br/>  },<br/>}</span></pre><h1 id="21dc" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">在你的CSS中包含顺风</h1><p id="6ed5" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">将这三行代码添加到这个文件的顶部:<code class="fe mq mr ms mt b">styles/globals.css</code></p><pre class="ko kp kq kr gt mu mt mv mw aw mx bi"><span id="5363" class="my la iq mt b gy mz na l nb nc"><strong class="mt ir">@tailwind</strong> base;<br/><strong class="mt ir">@tailwind</strong> components;<br/><strong class="mt ir">@tailwind</strong> utilities;</span></pre><h1 id="e1a4" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">我们成功了</h1><p id="8bd3" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">查看你的申请主页；结果应该与此类似:</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/f8d7caafeba780c00111b283b19c0d5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:970/format:webp/0*IZ6e2yVTvm2hD4tq.png"/></div></figure><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/5188d33ad333b8d7a943a4b8dd2127c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*XnrEkN3wpoXe1Dn5.gif"/></div></figure><h1 id="8dfa" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">心情</h1><p id="24f1" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">从现在开始，利用顺风构建漂亮的组件将变得轻而易举，但是我们需要回答几个关于测试的问题:</p><ol class=""><li id="525d" class="mc md iq jp b jq jr ju jv jy me kc mf kg mg kk ns mi mj mk bi translated">当没有找到文章数据时，这个组件是如何呈现的？</li><li id="3a1b" class="mc md iq jp b jq ml ju mm jy mn kc mo kg mp kk ns mi mj mk bi translated">我们如何在不改变代码的情况下随时检查所有的组件变量？</li></ol><p id="3bc9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">故事书将帮助我们实现这两个目标。</p><h1 id="974d" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">安装故事书</h1><p id="034f" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">官方文档中使用的默认命令<code class="fe mq mr ms mt b">npx sb init</code>安装了我们不需要的库，并添加了一堆我们不使用的文件。</p><p id="51a8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">出于这个原因，我通常更喜欢使用<code class="fe mq mr ms mt b">from scratch</code>配置。</p><pre class="ko kp kq kr gt mu mt mv mw aw mx bi"><span id="367a" class="my la iq mt b gy mz na l nb nc">npm install --save-dev @storybook/addon-actions @storybook/addon-essentials @storybook/addon-links @storybook/react</span></pre><p id="9de2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe mq mr ms mt b">package.json</code>T3内添加<a class="ae km" href="https://storybook.js.org/" rel="noopener ugc nofollow" target="_blank">故事书</a>命令:</p><pre class="ko kp kq kr gt mu mt mv mw aw mx bi"><span id="a7dd" class="my la iq mt b gy mz na l nb nc">"scripts": {<br/>  "dev": "next dev",<br/>  "build": "next build",<br/>  "start": "next start",<br/>  "storybook": "start-storybook -p 6006",<br/>  "storybook:build": "build-storybook"<br/>}</span></pre><p id="121d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">将这段代码复制到<code class="fe mq mr ms mt b">.storybook/main.js</code>文件中</p><pre class="ko kp kq kr gt mu mt mv mw aw mx bi"><span id="7766" class="my la iq mt b gy mz na l nb nc">module.exports <strong class="mt ir">=</strong> {<br/>  "stories": [<br/>    <em class="kl">// Paths to the story files</em><br/>    "../pages/*.stories.mdx",<br/>    "../pages/*.stories.js",<br/>  ],<br/>  "addons": [<br/>    "@storybook/addon-links",<br/>    "@storybook/addon-essentials"<br/>  ]<br/>}</span></pre><p id="a587" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">将这段代码复制到<code class="fe mq mr ms mt b">.storybook/preview.js</code>文件中</p><pre class="ko kp kq kr gt mu mt mv mw aw mx bi"><span id="b4ac" class="my la iq mt b gy mz na l nb nc"><em class="kl">// Import the global style enabling tailwind classes</em><br/><strong class="mt ir">import</strong> '../styles/globals.css'<br/><br/><strong class="mt ir">export</strong> <strong class="mt ir">const</strong> parameters <strong class="mt ir">=</strong> {<br/>  actions: { argTypesRegex: "^on[A-Z].*" },<br/>}</span></pre><h1 id="9745" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">添加一个故事</h1><p id="989c" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">对于我们希望使用<code class="fe mq mr ms mt b">story</code>来<code class="fe mq mr ms mt b">tell</code>的每个页面或组件，我们需要创建一个名为<code class="fe mq mr ms mt b">component-name.stories.js</code>的文件。</p><p id="9ae9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这种情况下，我们希望在<code class="fe mq mr ms mt b">pages</code>目录中创建<code class="fe mq mr ms mt b">index.stories.js</code>:</p><pre class="ko kp kq kr gt mu mt mv mw aw mx bi"><span id="d113" class="my la iq mt b gy mz na l nb nc"><strong class="mt ir">import</strong> Article from './index';<br/><br/><strong class="mt ir">const</strong> articleMock <strong class="mt ir">=</strong> {<br/>  id: 3,<br/>  author: 'Dave Canterbury',<br/>  company: 'Bushcraft 101',<br/>  image_url: 'https://via.placeholder.com/200/200',<br/>  content: 'David Michael Canterbury born September 19, 1963 is a survival expert'<br/>}<br/><br/><strong class="mt ir">const</strong> Story <strong class="mt ir">=</strong> (props) <strong class="mt ir">=&gt;</strong> <strong class="mt ir">&lt;</strong>Article {...props} /&gt;<br/><br/><em class="kl">// Here we export a variant of the default template passing props</em><br/><strong class="mt ir">export</strong> <strong class="mt ir">const</strong> ArticleStory <strong class="mt ir">=</strong> Story.bind({})<br/>ArticleStory.args <strong class="mt ir">=</strong> {<br/>  article: articleMock,<br/>};<br/><br/><em class="kl">// Here we export a variant of the default template passing props</em><br/><strong class="mt ir">export</strong> <strong class="mt ir">const</strong> EmptyArticleStory <strong class="mt ir">=</strong> Story.bind({})<br/>EmptyArticleStory.args <strong class="mt ir">=</strong> {<br/>  article: <strong class="mt ir">null</strong>,<br/>};<br/><br/><em class="kl">// Here we export the default component that</em><br/><em class="kl">// will be used by Storybook to show it inside the sidebar</em><br/><strong class="mt ir">export</strong> <strong class="mt ir">default</strong> {<br/>  title: 'Article',<br/>  component: Article,<br/>  argTypes: {<br/>    showImage: { control: 'boolean' },<br/>  },<br/>};</span></pre><h1 id="12ed" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">运行故事书服务器</h1><pre class="ko kp kq kr gt mu mt mv mw aw mx bi"><span id="4df7" class="my la iq mt b gy mz na l nb nc">npm run storybook</span></pre><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi nt"><img src="../Images/8d322f9f8e4152687109b1df94f05bc5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*HkthFhVNdIeA-gEU.png"/></div></div></figure><p id="556e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在写这篇文章的时候，你可能会碰到这个<a class="ae km" href="https://github.com/storybookjs/storybook/issues/12668" rel="noopener ugc nofollow" target="_blank">错误</a>。你可以用这个<a class="ae km" href="https://tailwindcss.com/docs/installation#post-css-7-compatibility-build" rel="noopener ugc nofollow" target="_blank">解决方案</a>解决。</p><h1 id="2e75" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">就这样</h1><p id="7c14" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">您的项目已经准备好使用一个健壮的框架和漂亮的风格来构建，并且有一个简单的方法来单独检查组件的行为！</p><p id="43ad" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我希望这篇文章对你有所帮助，并且易于阅读。</p><p id="bbfe" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">需要<a class="ae km" href="https://www.typescriptlang.org/" rel="noopener ugc nofollow" target="_blank">打字稿</a>版本吗？请留言告诉我们。</p><h1 id="dac1" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">跟进故事——与SCSS一起使用TailwindCSS和故事书</h1><p id="8226" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">这不是问题，你只需要使用<code class="fe mq mr ms mt b">npm</code>安装<code class="fe mq mr ms mt b">scss</code>库。</p><pre class="ko kp kq kr gt mu mt mv mw aw mx bi"><span id="4ab5" class="my la iq mt b gy mz na l nb nc">npm install sass</span></pre><p id="b32f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">将<code class="fe mq mr ms mt b">styles/globals.css</code>重命名为<code class="fe mq mr ms mt b">styles/globals.scss</code>并修复<code class="fe mq mr ms mt b">_app.js</code>和<code class="fe mq mr ms mt b">.storybook/preview.js</code>样式导入。</p><p id="c4b9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">并替换由此导入的TailwindCSS样式:</p><pre class="ko kp kq kr gt mu mt mv mw aw mx bi"><span id="9baa" class="my la iq mt b gy mz na l nb nc"><strong class="mt ir">@tailwind</strong> base;<br/><strong class="mt ir">@tailwind</strong> components;<br/><strong class="mt ir">@tailwind</strong> utilities;</span></pre><p id="d70b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对此:</p><pre class="ko kp kq kr gt mu mt mv mw aw mx bi"><span id="1947" class="my la iq mt b gy mz na l nb nc"><strong class="mt ir">@import</strong> "tailwindcss/base";<br/><strong class="mt ir">@import</strong> "tailwindcss/components";<br/><strong class="mt ir">@import</strong> "tailwindcss/utilities";</span></pre><h2 id="6e54" class="my la iq bd lb nf ng dn lf nh ni dp lj jy nj nk ln kc nl nm lr kg nn no lv np bi translated"><strong class="ak">还有故事书？</strong></h2><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi nu"><img src="../Images/0bddea6098735f2545098c33301f5951.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*miTRuliZivie4VuE.png"/></div></div></figure><p id="8fa6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">看来<a class="ae km" href="https://storybook.js.org/" rel="noopener ugc nofollow" target="_blank">故事书</a>不识别SCSS语法，为此，我们需要扩展库<a class="ae km" href="https://webpack.js.org/" rel="noopener ugc nofollow" target="_blank"> Webpack </a>配置，添加<code class="fe mq mr ms mt b">sass loader</code>。</p><p id="d403" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">从末尾开始使用<a class="ae km" href="https://webpack.js.org/" rel="noopener ugc nofollow" target="_blank"> Webpack </a>加载器，这意味着<code class="fe mq mr ms mt b">sass-loader</code>应该添加到加载器列表的末尾。</p><p id="0877" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这里您可以找到带有正确配置的<code class="fe mq mr ms mt b">.storybook/main.js</code>文件:</p><pre class="ko kp kq kr gt mu mt mv mw aw mx bi"><span id="2d5e" class="my la iq mt b gy mz na l nb nc">module.exports <strong class="mt ir">=</strong> {<br/>  stories: [<br/>    <em class="kl">// Paths to the story files</em><br/>    "../pages/*.stories.mdx",<br/>    "../pages/*.stories.js",<br/>  ],<br/>  addons: ["@storybook/addon-links", "@storybook/addon-essentials"],<br/>  webpackFinal: async (config) <strong class="mt ir">=&gt;</strong> {<br/>    config.module.rules.push({<br/>      test: /\.scss$/,<br/>      use: [<br/>        "style-loader",<br/>        "css-loader",<br/>        "postcss-loader",<br/>        <em class="kl">// Add the sass loader to process scss files</em><br/>        "sass-loader",<br/>      ],<br/>    })<br/><br/>    <strong class="mt ir">return</strong> config<br/>  },<br/>};</span></pre></div></div>    
</body>
</html>