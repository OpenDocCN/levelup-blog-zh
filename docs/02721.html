<html>
<head>
<title>Linux: File Permissions and Ownership</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Linux:文件权限和所有权</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/linux-file-permissions-ownership-20b84fbb2340?source=collection_archive---------9-----------------------#2020-03-31">https://levelup.gitconnected.com/linux-file-permissions-ownership-20b84fbb2340?source=collection_archive---------9-----------------------#2020-03-31</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6a53" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用chmod和chown处理权限和所有权</h2></div><p id="b512" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi le translated">熟悉基于Linux的操作系统的用户在终端中执行一些命令时，应该至少遇到过一次与<code class="fe ln lo lp lq b">Permission denied</code>相关的问题。本文旨在阐明与文件和目录相关的用户权限和所有权。</p></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><p id="03d4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了获得权限和所有权的介绍，在<strong class="kk iu">终端</strong>中，导航到文件驻留的位置并执行<code class="fe ln lo lp lq b">ls -al</code>以列出文件和目录以及所有相关的详细信息。</p><pre class="ly lz ma mb gt mc lq md me aw mf bi"><span id="8143" class="mg mh it lq b gy mi mj l mk ml"><strong class="lq iu">drwxr-xr-x</strong>  12 bibi         staff     384 16 Mar 11:19 public<br/><strong class="lq iu">-rw-r--r--</strong>   1 bibi         staff    1660 16 Mar 11:51 note.txt</span></pre><p id="ddda" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们来分解这些条目的每个部分代表什么:</p><figure class="ly lz ma mb gt mn gh gi paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="gh gi mm"><img src="../Images/347b87010268fee5521ac1e036c15206.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PG1z_TGx_OIeIZjTkKAJcg.jpeg"/></div></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk translated">文件上<strong class="bd my"> ls命令</strong>的输出</figcaption></figure><p id="b92a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">注意</strong>:文件类型可以是<code class="fe ln lo lp lq b">-</code>文件，也可以是<code class="fe ln lo lp lq b">d</code>目录。</p></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><h1 id="4bf4" class="mz mh it bd my na nb nc nd ne nf ng nh jz ni ka nj kc nk kd nl kf nm kg nn no bi translated">文件权限:</h1><p id="f9b3" class="pw-post-body-paragraph ki kj it kk b kl np ju kn ko nq jx kq kr nr kt ku kv ns kx ky kz nt lb lc ld im bi translated">本节试图捕捉更多关于上面介绍的<strong class="kk iu">权限</strong>块，以及权限在基于Linux的操作系统中是如何有用的。</p><h2 id="88f0" class="mg mh it bd my nu nv dn nd nw nx dp nh kr ny nz nj kv oa ob nl kz oc od nn oe bi translated"><strong class="ak">用户类型包括:</strong></h2><ul class=""><li id="8382" class="of og it kk b kl np ko nq kr oh kv oi kz oj ld ok ol om on bi translated">用户 →文件所有者。除非以后更改，否则文件的创建者将是所有者。</li><li id="2985" class="of og it kk b kl oo ko op kr oq kv or kz os ld ok ol om on bi translated"><strong class="kk iu">组</strong> →文件的用户组，还应包括文件的所有者。</li><li id="5f78" class="of og it kk b kl oo ko op kr oq kv or kz os ld ok ol om on bi translated"><strong class="kk iu">其他</strong> →除上述两类以外的所有其他用户或组。</li></ul><h2 id="51c5" class="mg mh it bd my nu nv dn nd nw nx dp nh kr ny nz nj kv oa ob nl kz oc od nn oe bi translated">权限类型包括:</h2><ul class=""><li id="870a" class="of og it kk b kl np ko nq kr oh kv oi kz oj ld ok ol om on bi translated"><strong class="kk iu">读</strong> → <strong class="kk iu">文件</strong>:查看或复制文件，<strong class="kk iu">目录</strong>:列出或复制文件</li><li id="4d00" class="of og it kk b kl oo ko op kr oq kv or kz os ld ok ol om on bi translated"><strong class="kk iu">写</strong> → <strong class="kk iu">文件</strong>:修改文件，<strong class="kk iu">目录</strong>:添加或删除文件</li><li id="3864" class="of og it kk b kl oo ko op kr oq kv or kz os ld ok ol om on bi translated"><strong class="kk iu">对文件</strong>执行 → <strong class="kk iu">:可执行则运行，对目录</strong>执行<strong class="kk iu">:进入目录</strong></li></ul><p id="b9a2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当考虑文件和目录时，有3种类型的用户和3种类型的权限。因此，应该使用9种组合来表达文件或目录如何与给定的用户和给定的权限交互。</p><p id="e432" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因此，9个字符可以定义每个用户的权限类型，这将<strong class="kk iu">定义每个用户对给定文件或目录的访问级别</strong>。</p><figure class="ly lz ma mb gt mn gh gi paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="gh gi ot"><img src="../Images/5e79a57f1c82d100fdbb8c974ae6121b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FiCjuBrYu8gKfu-GagkjuQ.jpeg"/></div></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk translated">start.sh脚本的权限</figcaption></figure><p id="f75e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">按照这个例子，如果许可被授予，将通过字母值显示，如<code class="fe ln lo lp lq b">r</code>、<code class="fe ln lo lp lq b">w</code>、<code class="fe ln lo lp lq b">x</code>，如果相关许可未被授予，则通过<code class="fe ln lo lp lq b">-</code>表示。对于这个例子:</p><ul class=""><li id="683b" class="of og it kk b kl km ko kp kr ou kv ov kz ow ld ok ol om on bi translated"><strong class="kk iu">用户</strong>拥有<strong class="kk iu">读</strong>、<strong class="kk iu">写</strong>和<strong class="kk iu">执行</strong>的权限。因此，所有者可以阅读、编辑和执行该脚本。</li><li id="d082" class="of og it kk b kl oo ko op kr oq kv or kz os ld ok ol om on bi translated"><strong class="kk iu">组</strong>拥有<strong class="kk iu">读</strong>、<strong class="kk iu">写</strong>的权限但没有执行权限。因此，组中的用户只能读取、编辑脚本，但不能执行脚本。</li><li id="99fb" class="of og it kk b kl oo ko op kr oq kv or kz os ld ok ol om on bi translated"><strong class="kk iu">其他</strong>只有<strong class="kk iu">读取</strong>权限，任何非所有者或所有者组中的其他用户只能读取脚本内容。</li></ul></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><h2 id="f676" class="mg mh it bd my nu nv dn nd nw nx dp nh kr ny nz nj kv oa ob nl kz oc od nn oe bi translated">使用chmod命令更改权限:</h2><p id="0aac" class="pw-post-body-paragraph ki kj it kk b kl np ju kn ko nq jx kq kr nr kt ku kv ns kx ky kz nt lb lc ld im bi translated">可以根据需要改变文件权限，并使用<code class="fe ln lo lp lq b">chmod</code>命令。这里的<code class="fe ln lo lp lq b">chmod</code>简单来说就是<strong class="kk iu">改变模式</strong>。</p><h2 id="7bb2" class="mg mh it bd my nu nv dn nd nw nx dp nh kr ny nz nj kv oa ob nl kz oc od nn oe bi translated"><strong class="ak"> 1。使用带有符号值的chmod】</strong></h2><p id="7ebb" class="pw-post-body-paragraph ki kj it kk b kl np ju kn ko nq jx kq kr nr kt ku kv ns kx ky kz nt lb lc ld im bi translated"><strong class="kk iu">用户类型</strong>定义如下:用户→ <code class="fe ln lo lp lq b">u</code>、群组→ <code class="fe ln lo lp lq b">g</code>、其他→ <code class="fe ln lo lp lq b">o</code>、全部→ <code class="fe ln lo lp lq b">a</code>。</p><p id="4afc" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">权限类型</strong>定义如下:读取→ <code class="fe ln lo lp lq b">r</code>，写入→ <code class="fe ln lo lp lq b">w</code>，执行→ <code class="fe ln lo lp lq b">x</code></p><p id="70ac" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">也可以使用多个运算符，如下所示:添加新权限→ <code class="fe ln lo lp lq b">+</code>,删除现有权限→ <code class="fe ln lo lp lq b">-</code>,设置确切权限→ <code class="fe ln lo lp lq b">=</code>。</p><p id="5dad" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们接着看一些例子:</p><ul class=""><li id="d283" class="of og it kk b kl km ko kp kr ou kv ov kz ow ld ok ol om on bi translated"><code class="fe ln lo lp lq b">chmod <strong class="kk iu">g+x</strong> abc.sh</code> →这将<strong class="kk iu">向<strong class="kk iu">组</strong>添加</strong> <strong class="kk iu">可执行</strong>权限，该组的其他读写权限值保持不变。</li><li id="d728" class="of og it kk b kl oo ko op kr oq kv or kz os ld ok ol om on bi translated"><code class="fe ln lo lp lq b">chmod <strong class="kk iu">o=r</strong> abc.txt</code> →这将<strong class="kk iu">为<strong class="kk iu">其他</strong>设置精确的</strong>权限，其中仅附加读取权限，并将删除写入和执行值。</li><li id="8e49" class="of og it kk b kl oo ko op kr oq kv or kz os ld ok ol om on bi translated"><code class="fe ln lo lp lq b">chmod <strong class="kk iu">a-w</strong> abc.sh</code> →这将<strong class="kk iu">从<strong class="kk iu">所有</strong>中移除</strong>写权限，并且不改变与用户相关的读或执行权限。</li></ul><p id="23ec" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了便于使用，也可以一次更改多个用户和权限:</p><pre class="ly lz ma mb gt mc lq md me aw mf bi"><span id="9b5b" class="mg mh it lq b gy mi mj l mk ml">chmod <strong class="lq iu">u=rwx,g=rx,o=r</strong> start.sh</span></pre><p id="4ab3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">注意:</strong>从堆栈溢出回答中，你可能遇到过类似<code class="fe ln lo lp lq b"><strong class="kk iu">chmod +x ./command.sh</strong></code>的命令，它只是表示<code class="fe ln lo lp lq b"><strong class="kk iu">a+x</strong></code>命令。</p></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><h2 id="9fb5" class="mg mh it bd my nu nv dn nd nw nx dp nh kr ny nz nj kv oa ob nl kz oc od nn oe bi translated"><strong class="ak"> 2。使用带有八进制值的chmod】</strong></h2><p id="afb5" class="pw-post-body-paragraph ki kj it kk b kl np ju kn ko nq jx kq kr nr kt ku kv ns kx ky kz nt lb lc ld im bi translated">每个用户权限都使用三位二进制值声明，如果该权限被授予，则包含<code class="fe ln lo lp lq b">1</code>，否则为<code class="fe ln lo lp lq b">0</code>。由于使用了3位数字，因此可以用从0到7的八进制值来解释。然后3个八进制值用于解释用户、组和其他人的权限。</p><figure class="ly lz ma mb gt mn gh gi paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="gh gi ox"><img src="../Images/4e5e7cde09bbba3cefb511d509bbd4b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q4MKI7xjKvhHCRhyGlO3vA.jpeg"/></div></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk translated">权限的二进制计算</figcaption></figure><p id="fb47" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这里的二进制组合包括如下。<code class="fe ln lo lp lq b">read = 1</code>、<code class="fe ln lo lp lq b">write = 0</code>、<code class="fe ln lo lp lq b">execute = 0</code>。这建立了<code class="fe ln lo lp lq b">110</code>二进制值，如果你熟悉二进制，可以看到这对应于值<code class="fe ln lo lp lq b">6</code>。即使不熟悉二进制转换，也可以使用<code class="fe ln lo lp lq b">x 4</code>、<code class="fe ln lo lp lq b">x 2</code>或<code class="fe ln lo lp lq b">x 1</code>进行乘法运算，并对<code class="fe ln lo lp lq b">6</code>的值求和。</p><p id="3c6e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">应该对每个用户的所有权限重复这一过程，以最终值结束。这个看似3位数的值可以解释所有哪些用户类型的哪些权限类型:</p><figure class="ly lz ma mb gt mn gh gi paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="gh gi oy"><img src="../Images/ca0a74e88563c3386a341b6cf249f278.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Yy3lvM8RwSqI0quBp-AXgw.jpeg"/></div></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk translated">权限的八进制值</figcaption></figure><p id="0888" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">所以让我们分解命令<code class="fe ln lo lp lq b">chmod 764 command.sh</code>:</p><ul class=""><li id="1b9e" class="of og it kk b kl km ko kp kr ou kv ov kz ow ld ok ol om on bi translated"><strong class="kk iu">用户</strong>的数字是7。二进制是111，所以有<code class="fe ln lo lp lq b">r</code>、<code class="fe ln lo lp lq b">w</code>、<code class="fe ln lo lp lq b">x</code> → <code class="fe ln lo lp lq b">u=rwx</code></li><li id="ad19" class="of og it kk b kl oo ko op kr oq kv or kz os ld ok ol om on bi translated"><strong class="kk iu">组</strong>的数字为6。二进制是110，所以有<code class="fe ln lo lp lq b">r</code>、<code class="fe ln lo lp lq b">w</code> → <code class="fe ln lo lp lq b">g=rw</code></li><li id="0226" class="of og it kk b kl oo ko op kr oq kv or kz os ld ok ol om on bi translated"><strong class="kk iu">其他</strong>有4为数字。二进制是100，因此<code class="fe ln lo lp lq b">r</code> → <code class="fe ln lo lp lq b">o=r</code></li></ul><p id="0f1f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe ln lo lp lq b">ls -l command.sh</code>应该按照之前的学习返回<code class="fe ln lo lp lq b"><strong class="kk iu">— rwx rw- r--</strong></code> <strong class="kk iu"> </strong>。</p><p id="2c81" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">注意:</strong>细粒度的访问可以通过给定的用户权限图获得，因此像<code class="fe ln lo lp lq b">chmod 777</code>那样授予所有访问权限不是一个好的做法，这会导致安全漏洞。</p><p id="5bbb" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">注:</strong>为了给整个目录的内容添加权限，可以这样使用递归<code class="fe ln lo lp lq b">chmod -R 764 public/</code>。但是，这不同于只更改父目录<code class="fe ln lo lp lq b">chmod 764 public</code>的权限，而不更改其内容。</p><p id="8722" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">注:</strong>与<code class="fe ln lo lp lq b">ls -l</code>类似，Linux status命令也可以像<code class="fe ln lo lp lq b">stat run.sh</code>一样用于检查权限和所有权细节</p></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><p id="30a2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">让我们通过一个练习来跟进权限变更:</strong></p><ul class=""><li id="178e" class="of og it kk b kl km ko kp kr ou kv ov kz ow ld ok ol om on bi translated">使用<code class="fe ln lo lp lq b">nano run.sh</code>创建shell脚本，并添加简单的命令:</li></ul><pre class="ly lz ma mb gt mc lq md me aw mf bi"><span id="c8ba" class="mg mh it lq b gy mi mj l mk ml">#!/bin/bash<br/><strong class="lq iu">echo "Executed...!"</strong></span></pre><ul class=""><li id="6bd7" class="of og it kk b kl km ko kp kr ou kv ov kz ow ld ok ol om on bi translated">使用<code class="fe ln lo lp lq b">ls -l run.sh</code>或<code class="fe ln lo lp lq b">stat run.sh</code>检查现有权限</li></ul><pre class="ly lz ma mb gt mc lq md me aw mf bi"><span id="dc10" class="mg mh it lq b gy mi mj l mk ml">- <strong class="lq iu">rw- r-- r--</strong></span></pre><ul class=""><li id="afef" class="of og it kk b kl km ko kp kr ou kv ov kz ow ld ok ol om on bi translated">为了便于练习，我们将只使用文件所有者的当前用户。</li><li id="ca3b" class="of og it kk b kl oo ko op kr oq kv or kz os ld ok ol om on bi translated">删除用户的所有权限:<code class="fe ln lo lp lq b">chmod 000 run.sh</code>，并使用前面的命令:<code class="fe ln lo lp lq b">--- --- ---</code>检查权限列表。</li><li id="3054" class="of og it kk b kl oo ko op kr oq kv or kz os ld ok ol om on bi translated">尝试使用<code class="fe ln lo lp lq b">less run.sh</code> → <code class="fe ln lo lp lq b">run.sh: Permission denied</code>读取<code class="fe ln lo lp lq b">run.sh</code>。</li><li id="a28b" class="of og it kk b kl oo ko op kr oq kv or kz os ld ok ol om on bi translated">使用<code class="fe ln lo lp lq b">chmod 400 run.sh</code>授予读取权限，并检查是否可以读取。</li><li id="8fd1" class="of og it kk b kl oo ko op kr oq kv or kz os ld ok ol om on bi translated">尝试使用<code class="fe ln lo lp lq b">nano run.sh</code>写入<code class="fe ln lo lp lq b">run.sh</code>,进行更改并尝试保存→ <code class="fe ln lo lp lq b">[Error writing run.sh: Permission denied]</code>。</li><li id="dc11" class="of og it kk b kl oo ko op kr oq kv or kz os ld ok ol om on bi translated">通过<code class="fe ln lo lp lq b">chmod 600 run.sh</code>授予写权限，并检查您是否可以编辑。</li><li id="b58e" class="of og it kk b kl oo ko op kr oq kv or kz os ld ok ol om on bi translated">尝试使用<code class="fe ln lo lp lq b">./run.sh</code>执行<code class="fe ln lo lp lq b">run.sh</code>→</li></ul><pre class="ly lz ma mb gt mc lq md me aw mf bi"><span id="a597" class="mg mh it lq b gy mi mj l mk ml">-bash: ./run.sh: Permission denied</span></pre><ul class=""><li id="a32a" class="of og it kk b kl km ko kp kr ou kv ov kz ow ld ok ol om on bi translated">通过<code class="fe ln lo lp lq b">chmod 700 run.sh</code>授予执行权限，执行<code class="fe ln lo lp lq b">Executed...!</code>输出的脚本。</li><li id="06d9" class="of og it kk b kl oo ko op kr oq kv or kz os ld ok ol om on bi translated">使用<code class="fe ln lo lp lq b">stat run.sh</code> → <code class="fe ln lo lp lq b">rwx --- ---</code>检查文件权限</li></ul></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><h1 id="71df" class="mz mh it bd my na nb nc nd ne nf ng nh jz ni ka nj kc nk kd nl kf nm kg nn no bi translated">文件所有权</h1><p id="3b22" class="pw-post-body-paragraph ki kj it kk b kl np ju kn ko nq jx kq kr nr kt ku kv ns kx ky kz nt lb lc ld im bi translated">从上面对文件权限和<code class="fe ln lo lp lq b">chmod</code>命令的介绍来看，可以是<strong class="kk iu">所有者</strong>和<strong class="kk iu">群组</strong>的权限。因此，研究一下这些所有者、组，以及如果需要的话如何改变它是很重要的。</p><ul class=""><li id="6583" class="of og it kk b kl km ko kp kr ou kv ov kz ow ld ok ol om on bi translated"><strong class="kk iu">所有者</strong> →指拥有给定文件或目录的用户。通常文件的创建者作为其所有者被附加，直到它被改变。</li><li id="54ad" class="of og it kk b kl oo ko op kr oq kv or kz os ld ok ol om on bi translated"><strong class="kk iu">组</strong> →指拥有给定文件或目录的组。通常，用户创建者可以是多个组的一部分，但将拥有主要组。当用户创建文件或目录时，将默认设置该组。</li></ul><p id="beee" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">基于Linux的系统中的用户和组用于适当地管理安全性，这是这里要讨论的高级主题。但是在终端中，一个简单的命令如<code class="fe ln lo lp lq b">groups</code>将列出当前用户所属的所有组。</p><p id="a4c1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">考虑到文件是目录，从<code class="fe ln lo lp lq b">ls -l</code>的输出可以看出<strong class="kk iu">权限</strong>和<strong class="kk iu">所有权</strong>，输出示例如下:</p><pre class="ly lz ma mb gt mc lq md me aw mf bi"><span id="2388" class="mg mh it lq b gy mi mj l mk ml">-rw-r--r--  1 <strong class="lq iu">bibi</strong>  <strong class="lq iu">staff</strong>     272 12 Mar 12:00 assets.json</span></pre><p id="492a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这里<code class="fe ln lo lp lq b">bibi</code>是<strong class="kk iu"> assets.json </strong>的所有者，<code class="fe ln lo lp lq b">staff</code>是该文件的组所有者。此外，我们可以理解权限是如何附加的:<code class="fe ln lo lp lq b">— <strong class="kk iu">rw-</strong> <strong class="kk iu">r--</strong> r--</code>。因此作为所有者的用户<code class="fe ln lo lp lq b">bibi</code>被赋予了对该文件的读写权限<code class="fe ln lo lp lq b">rw-</code>，因此该用户将拥有对该文件的读写权限，但没有执行权限。组<code class="fe ln lo lp lq b">staff</code>中的用户被附加了<code class="fe ln lo lp lq b">r--</code>权限，在这里它只能读取文件。</p><p id="b1d6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">注:</strong>更改权限或所有权的一个用例是使用<code class="fe ln lo lp lq b">scp</code>复制到服务器或使用<code class="fe ln lo lp lq b">ssh</code>访问服务器。在这里，复制脚本的用户可能无权执行更新后的脚本。因此，要么需要更改脚本的权限，以便当前用户可以执行，要么将脚本的所有权更改为现有用户，以便可以执行。</p></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><h2 id="9c69" class="mg mh it bd my nu nv dn nd nw nx dp nh kr ny nz nj kv oa ob nl kz oc od nn oe bi translated">使用chown命令更改所有权:</h2><p id="497a" class="pw-post-body-paragraph ki kj it kk b kl np ju kn ko nq jx kq kr nr kt ku kv ns kx ky kz nt lb lc ld im bi translated">类似于之前使用的<code class="fe ln lo lp lq b">chmod</code>命令，还有<code class="fe ln lo lp lq b">chown</code>命令来改变文件或目录的所有权。这里的<code class="fe ln lo lp lq b">chown</code>简单来说就是<strong class="kk iu">换主人</strong>。</p><ul class=""><li id="6b16" class="of og it kk b kl km ko kp kr ou kv ov kz ow ld ok ol om on bi translated"><code class="fe ln lo lp lq b">chown <strong class="kk iu">bibi</strong> assets.json</code> →这将把<strong class="kk iu">仅用户</strong>的所有权更改为该文件或目录的给定用户。</li><li id="67d1" class="of og it kk b kl oo ko op kr oq kv or kz os ld ok ol om on bi translated"><code class="fe ln lo lp lq b">chown <strong class="kk iu">bibi:staff</strong> assets.json</code> →这将把<strong class="kk iu">用户</strong>所有权<strong class="kk iu">和</strong>组<strong class="kk iu">所有权更改为该文件或目录的给定用户和给定组。</strong></li><li id="baed" class="of og it kk b kl oo ko op kr oq kv or kz os ld ok ol om on bi translated"><code class="fe ln lo lp lq b">chown <strong class="kk iu">:staff</strong> assets.json</code> →这将仅将<strong class="kk iu">组</strong>的所有权更改为给定的员工。或者<code class="fe ln lo lp lq b">chgrp</code>命令也可用于仅改变组，如<code class="fe ln lo lp lq b">chgrp staff assets.json</code>所示。</li></ul><p id="3b19" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">让我们通过练习来跟进所有权变更:</strong></p><ul class=""><li id="8f5f" class="of og it kk b kl km ko kp kr ou kv ov kz ow ld ok ol om on bi translated">通过<code class="fe ln lo lp lq b">su root</code>切换到<code class="fe ln lo lp lq b">root</code>用户，使用<code class="fe ln lo lp lq b">nano note.txt</code>创建一个包含一些内容的文本文件。使用用户<code class="fe ln lo lp lq b">root</code>的<code class="fe ln lo lp lq b">stat note.txt</code> <strong class="kk iu"> → </strong> <code class="fe ln lo lp lq b">rw-</code>权限，验证其是否附属于<code class="fe ln lo lp lq b">root</code>的当前用户</li></ul><pre class="ly lz ma mb gt mc lq md me aw mf bi"><span id="e21d" class="mg mh it lq b gy mi mj l mk ml">-<strong class="lq iu">rw-</strong>r--r--  1 <strong class="lq iu">root</strong>  staff</span></pre><ul class=""><li id="f1b4" class="of og it kk b kl km ko kp kr ou kv ov kz ow ld ok ol om on bi translated">通过退出<code class="fe ln lo lp lq b">root</code>的终端切换回用户<code class="fe ln lo lp lq b">bibi</code>，并尝试使用<code class="fe ln lo lp lq b">nano note.txt</code> → <strong class="kk iu"> </strong> <code class="fe ln lo lp lq b"><strong class="kk iu">Permission denied</strong></code>从<code class="fe ln lo lp lq b">bibi</code>编辑该文件</li><li id="2e4a" class="of og it kk b kl oo ko op kr oq kv or kz os ld ok ol om on bi translated">尝试使用<code class="fe ln lo lp lq b">chown</code>将当前所有者从<code class="fe ln lo lp lq b">root</code>更改为<code class="fe ln lo lp lq b">bibi</code>，这样当前用户将继承<code class="fe ln lo lp lq b">rw-</code>吃东西的权限:<code class="fe ln lo lp lq b">chown bibi note.txt</code> →</li></ul><pre class="ly lz ma mb gt mc lq md me aw mf bi"><span id="52c7" class="mg mh it lq b gy mi mj l mk ml">chown: note.txt: Operation not permitted</span></pre><ul class=""><li id="4e74" class="of og it kk b kl km ko kp kr ou kv ov kz ow ld ok ol om on bi translated">由于安全因素，这是受限制的，因为这可能导致用户改变所有权来修改未被授权的文件。</li><li id="5ea2" class="of og it kk b kl oo ko op kr oq kv or kz os ld ok ol om on bi translated">因此，这可以通过<code class="fe ln lo lp lq b">chown bibi note.txt</code>的<code class="fe ln lo lp lq b">root</code>端子或使用<code class="fe ln lo lp lq b">bibi</code>端子的<code class="fe ln lo lp lq b">sudo chown bibi note.txt</code>进行更改。</li><li id="5450" class="of og it kk b kl oo ko op kr oq kv or kz os ld ok ol om on bi translated">验证用户所有权是否已更改为<code class="fe ln lo lp lq b">bibi</code>:</li></ul><pre class="ly lz ma mb gt mc lq md me aw mf bi"><span id="77de" class="mg mh it lq b gy mi mj l mk ml">-<strong class="lq iu">rw-</strong>r--r--  1 <strong class="lq iu">bibi</strong>  staff</span></pre><ul class=""><li id="2fd4" class="of og it kk b kl km ko kp kr ou kv ov kz ow ld ok ol om on bi translated">使用<code class="fe ln lo lp lq b">nano note.txt</code>从<code class="fe ln lo lp lq b">bibi</code>用户处编辑，以验证已保存的更改没有任何问题。</li></ul></div><div class="ab cl lr ls hx lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="im in io ip iq"><p id="bb39" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我希望这篇文章能够深入了解Linux中的<strong class="kk iu">权限</strong>和<strong class="kk iu">所有权</strong>，并使用<code class="fe ln lo lp lq b"><strong class="kk iu">chmod</strong></code>和<code class="fe ln lo lp lq b"><strong class="kk iu">chown</strong></code>命令来改变<strong class="kk iu">文件</strong>和<strong class="kk iu">目录</strong>的权限和所有者。</p></div></div>    
</body>
</html>