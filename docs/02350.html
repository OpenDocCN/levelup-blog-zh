<html>
<head>
<title>A/B Testing in React Native Has Never Been So Easy: Firebase Is Here</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React Native中的A/B测试从未如此简单:Firebase就在这里</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/a-b-testing-in-react-native-has-never-so-easy-firebase-is-here-67836a35e0d3?source=collection_archive---------2-----------------------#2020-03-08">https://levelup.gitconnected.com/a-b-testing-in-react-native-has-never-so-easy-firebase-is-here-67836a35e0d3?source=collection_archive---------2-----------------------#2020-03-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/05ca0a6eec9cf561d174d800c46d1d1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F0RAk6gTsGnlG9QKqXUDDw.jpeg"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">实验</figcaption></figure><p id="07f6" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">首先，<strong class="kh iu">什么是A/B测试实验</strong>？如果你到了这里，你可能已经有了一个想法，但为了以防万一，让我们来解释一下:</p><blockquote class="ld le lf"><p id="da0d" class="kf kg lg kh b ki kj kk kl km kn ko kp lh kr ks kt li kv kw kx lj kz la lb lc im bi translated"><strong class="kh iu">A/B测试</strong>是一种用户体验研究方法，由两个变量<strong class="kh iu"> A </strong>和<strong class="kh iu"> B </strong>的随机实验组成。是一种比较单个变量的两个版本的方法，通常是通过测试一个<strong class="kh iu">受试者对<strong class="kh iu"> </strong>变量A和变量B的反应</strong>，并确定两个变量中哪个<strong class="kh iu">更有效</strong>。另一种说法是使用术语<strong class="kh iu">分割测试</strong>，尽管后者指的是具有两个以上变量的测试。”</p></blockquote><p id="46c6" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">好了，现在我们可以说A/B测试只有<strong class="kh iu">两个变量</strong>，而分割测试有<strong class="kh iu">两个以上的变量</strong>。很好，但是现在:<em class="lg">我该如何开始实验呢？</em></p><p id="1d24" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">有很多简单的方法可以将实验构建到网络环境中，但是在<strong class="kh iu">React Native</strong><strong class="kh iu">Apps</strong>中就不那么容易了。我们面临一个问题——发布。幸运的是我们还有选择，其中之一就是<a class="ae lk" href="https://firebase.google.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="kh iu"> Firebase </strong> </a>。</p><blockquote class="ld le lf"><p id="60b7" class="kf kg lg kh b ki kj kk kl km kn ko kp lh kr ks kt li kv kw kx lj kz la lb lc im bi translated"><strong class="kh iu"> Firebase </strong>是一个位于云端的移动和web应用开发平台，与Google云平台集成，使用一套工具进行项目的创建和同步。</p></blockquote><p id="e05f" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">Firebase提供了两个我们将会用到的特性。其中一个是<strong class="kh iu">“远程配置值”</strong>，它只不过是Firebase cloud中的变量，我们可以从我们的应用程序中访问；另一个是<strong class="kh iu">“A/B测试”</strong>工具，它将负责划分用户，并根据需要更改每个用户的远程配置变量值。在我们的应用程序方面，<strong class="kh iu">我们将简单地负责根据变量</strong>的值来调节代码，就这么简单。</p><h1 id="061d" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">1.装置</h1><p id="21c6" class="pw-post-body-paragraph kf kg it kh b ki mj kk kl km mk ko kp kq ml ks kt ku mm kw kx ky mn la lb lc im bi translated">为了在我们的React Native应用中实现Firebase，我们必须安装<a class="ae lk" href="https://www.npmjs.com/package/@react-native-firebase/app" rel="noopener ugc nofollow" target="_blank"><strong class="kh iu">@ React-Native-Firebase/app</strong></a>，然后，再安装一个额外的库来使用“远程配置”功能<a class="ae lk" href="https://www.npmjs.com/package/@react-native-firebase/remote-config" rel="noopener ugc nofollow" target="_blank"><strong class="kh iu">@ React-Native-Firebase/Remote-Config</strong></a>。<strong class="kh iu"> </strong>在本文中我就不赘述安装和初始配置了，因为在官方文档中有很好的解释:<a class="ae lk" href="https://invertase.io/oss/react-native-firebase/v6/app/quick-start" rel="noopener ugc nofollow" target="_blank"> <strong class="kh iu"> App快速启动</strong> </a>和<a class="ae lk" href="https://invertase.io/oss/react-native-firebase/v6/remote-config/quick-start" rel="noopener ugc nofollow" target="_blank"> <strong class="kh iu">远程配置快速启动</strong> </a> <strong class="kh iu">。</strong></p><h1 id="e242" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">2.创建方法</h1><p id="1d64" class="pw-post-body-paragraph kf kg it kh b ki mj kk kl km mk ko kp kq ml ks kt ku mm kw kx ky mn la lb lc im bi translated">我强烈建议在我们的<strong class="kh iu"> "/src" </strong> <em class="lg">(如果你还没有)</em>中创建一个<strong class="kh iu"> "/services" </strong>文件夹，用可重用的方法或钩子来定位这个和其他文件。因此，我们将有类似于"<strong class="kh iu">src/services/firebase . js "</strong>的东西，在这里，我们将有三个方法:</p><figure class="mo mp mq mr gt ju"><div class="bz fp l di"><div class="ms mt l"/></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">Firebase远程配置挂钩示例</figcaption></figure><p id="45ce" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">如您所见，我们有一个"<strong class="kh iu"> fetchConfig()" </strong>，它将负责使用"<strong class="kh iu"> setConfigSettings()"，</strong>设置初始配置，并使用<strong class="kh iu"> "fetchAndActivate()" </strong>从Firebase获取值，它应该在" App.js "、" Index.js "或我们应用程序中的某个初始位置运行一次。请注意，它不需要异步，但是如果您想在成功获取值时对它们做一些事情，这是一个很好的选择。</p><p id="3b21" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我们还有一个<strong class="kh iu">“refresh config()”</strong>，它将用于重新获取值。这是必要的，因为如果我们激活一个实验，而用户从来没有重新打开应用程序，新的值永远不会被提取。(理想情况下，它应该运行在我们的应用程序被刷新的地方)。</p><p id="64da" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">最后，我们有一个<strong class="kh iu"> "getRemoteValue()" </strong>，它接收一个" key "(远程配置变量名)并返回值。请注意，它不获取任何东西，它只是访问之前在我们的<strong class="kh iu"> fetchConfig </strong>和<strong class="kh iu"> refreshConfig </strong>中获取的值。</p><h1 id="7995" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">3.创建远程配置值</h1><figure class="mo mp mq mr gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mu"><img src="../Images/71b2c6305d648011359b2b1df0af7a6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v0FVfiqdSuDzkmbrUnMlWg.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">Firebase控制台(远程配置)</figcaption></figure><p id="9ea0" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">正如你所看到的，这就像去<strong class="kh iu"> Firebase </strong> &gt; <strong class="kh iu">远程配置</strong> &gt; <strong class="kh iu">添加参数&gt; </strong>写<strong class="kh iu">键<em class="lg">(名称)</em> </strong>和<strong class="kh iu">值&gt;发布更改</strong>，瞧！我们有一个远程配置变量。</p><p id="5b26" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">请记住，对于本文，我将创建一个名为"<strong class="kh iu"> experiment_1" </strong>的变量，它将是一个<em class="lg">布尔值</em>，其值将是<strong class="kh iu"> <em class="lg"> false </em> </strong></p><h1 id="3ce9" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">4.获取和访问远程配置值</h1><p id="fcbe" class="pw-post-body-paragraph kf kg it kh b ki mj kk kl km mk ko kp kq ml ks kt ku mm kw kx ky mn la lb lc im bi translated">正如我之前在《T21》中所说的，我们创造了三种方法，但是现在我们必须利用它们。为此，我将在App.js中展示一个示例:</p><figure class="mo mp mq mr gt ju"><div class="bz fp l di"><div class="ms mt l"/></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">App.js中的示例</figcaption></figure><p id="6f04" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我们只是做了几件事，但总而言之:</p><ul class=""><li id="25db" class="mv mw it kh b ki kj km kn kq mx ku my ky mz lc na nb nc nd bi translated">我们执行我们的<strong class="kh iu"> fetchConfig </strong>方法来初始化设置和获取值。</li><li id="d8be" class="mv mw it kh b ki ne km nf kq ng ku nh ky ni lc na nb nc nd bi translated">我们向用户显示一个“刷新值”按钮(来执行我们的<strong class="kh iu"> refreshConfig </strong>，但是我稍后会向您展示)。</li><li id="fff5" class="mv mw it kh b ki ne km nf kq ng ku nh ky ni lc na nb nc nd bi translated">我们用<strong class="kh iu"> React Navigation </strong>设置了三条路线，将用户带到另一个实验屏幕。</li></ul><p id="193b" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">所有这些看起来是这样的:</p><figure class="mo mp mq mr gt ju gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/6e3851851df0189259c25c1176d3e797.png" data-original-src="https://miro.medium.com/v2/resize:fit:554/format:webp/1*_fil_3fzVr3e4Jksh3bugA.png"/></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">App.js(截图)</figcaption></figure><p id="6a77" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我们必须访问值，所以我将在测试#1中向您展示一个示例(我不会显示所有的测试屏幕，以免文章太长，但我在这里将repo 留给您，以防您希望看到它完成)。</p><p id="17c1" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">让我们继续测试#1:</p><figure class="mo mp mq mr gt ju"><div class="bz fp l di"><div class="ms mt l"/></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">Test1.js中的示例</figcaption></figure><p id="2cfe" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">这里我们只是对一个图像进行条件化，如果实验<strong class="kh iu">为真</strong>，我们显示<strong class="kh iu">路易吉的图像</strong>，否则，我们显示<strong class="kh iu">马里奥的图像</strong>。为此，我们从<strong class="kh iu">远程配置</strong>中访问<strong class="kh iu">"实验_1" </strong> <em class="lg">(这是一个布尔值)</em>，并将其值保存在常量"<strong class="kh iu">实验"中。</strong>现在根据<strong class="kh iu">【实验】</strong>来调节渲染就这么简单。</p><p id="f007" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">看起来是这样的:</p><figure class="mo mp mq mr gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nk"><img src="../Images/6ce18ad13f6fdf942cd74792002ea480.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h_xVeYPm7XcTovUdEnGyTg.png"/></div></div></figure><p id="e0ff" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">但是等等！对于现在你总是看到马里奥，因为<strong class="kh iu">【实验_ 1】</strong>对于大家来说是<strong class="kh iu"> <em class="lg">假</em> </strong>。现在我们必须在<strong class="kh iu"> Firebase </strong>中创建一个<strong class="kh iu"> A/B测试实验</strong>来处理这个问题。</p><h1 id="d2e0" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">5.创建A/B测试实验</h1><figure class="mo mp mq mr gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mu"><img src="../Images/20a2da1f62744de5e4282ddc48208e78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pjYQhq9snC4nCVvdi0gCfg.png"/></div></div></figure><p id="3e08" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">此时，我们只需转到我们的<strong class="kh iu"> Firebase项目</strong> &gt; <strong class="kh iu"> A/B测试</strong> &gt; <strong class="kh iu">创建实验</strong> &gt; <strong class="kh iu">远程配置</strong>并开始填写表单。在这里，我们可以配置参与我们实验的用户百分比<strong class="kh iu">、<strong class="kh iu">激活事件</strong>和<strong class="kh iu">变量</strong>。对于变量，您会注意到，我们必须选择我们的远程配置变量，我们将始终有一个名为“控制组”的变量，在实验中我们可能会也可能不会更改它。然而，理想的方法是保持这个变体不变，并开始在以后的变体中修改它，就像这样:</strong></p><figure class="mo mp mq mr gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nl"><img src="../Images/b4136fc8754d40151c42a6599292f87d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0dO2w14uM0pgmo7C6Xm-1w.png"/></div></div></figure><p id="5fde" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">所以现在，我们只需要点击<strong class="kh iu">“开始实验”</strong>就可以了，Firebase会对我们的用户进行划分，每个用户都有一个特定的远程配置值变量，在这种情况下，可以是<strong class="kh iu">控制组<em class="lg">(假)</em> </strong>或<strong class="kh iu">变量A <em class="lg">(真)。</em> </strong></p><h1 id="9d49" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">6.刷新远程配置值</h1><p id="18eb" class="pw-post-body-paragraph kf kg it kh b ki mj kk kl km mk ko kp kq ml ks kt ku mm kw kx ky mn la lb lc im bi translated">还记得<strong class="kh iu">刷新配置</strong>按钮吗？很好，在这里:</p><figure class="mo mp mq mr gt ju"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="ec48" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">它只是负责运行我们的<strong class="kh iu"> refreshConfig </strong>，<strong class="kh iu"> </strong>，重新获取所有远程配置值。这很有用，因为如果我们在我们的应用程序中，并且我们激活了一个实验，如果我们不关闭和打开我们的应用程序，我们将不会看到它的运行，但是这个按钮解决了我们的问题。(在生产应用程序中，在我们的应用程序重新加载时运行它是有意义的)。</p><p id="59cf" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">这就是我们在我们的<strong class="kh iu"> React原生应用</strong>和<strong class="kh iu"> Firebase </strong>中进行A/B测试实验的方式！</p><p id="b3e9" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我推荐你阅读Firebase 的官方文档，在那里你可以找到很多关于远程配置和A/B测试的内容。除了<a class="ae lk" href="https://invertase.io/oss/react-native-firebase/" rel="noopener ugc nofollow" target="_blank"> React Native Firebase </a>和<a class="ae lk" href="https://invertase.io/oss/react-native-firebase/v6/remote-config" rel="noopener ugc nofollow" target="_blank"> React Native Firebase远程配置</a>的官方文档。</p><p id="f26f" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">最后，我把这些代码和更多的代码留在这里:<a class="ae lk" href="https://github.com/fervailanti/fbrn-ab-testing-demo" rel="noopener ugc nofollow" target="_blank"> fbrn-ab-testing-demo </a>。看一看！</p><p id="9b43" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">感谢阅读…🙏</p></div></div>    
</body>
</html>