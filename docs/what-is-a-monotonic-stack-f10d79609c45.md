# 什么是单调堆栈？

> 原文：<https://levelup.gitconnected.com/what-is-a-monotonic-stack-f10d79609c45>

![](img/32396933c5c360f78a9fe36e46e51591.png)

照片由[马尔特·赫尔姆霍尔德](https://unsplash.com/@maltehelmhold?utm_source=medium&utm_medium=referral)在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄

单调堆栈是堆栈数据结构的一种变体，其中的元素总是以特定的顺序排序。在单调堆栈中，元素必须都是单调递增或单调递减的。单调堆栈经常出现在编码访谈中，使它们成为受访者理解的一个重要概念。在本文中，我们将讨论什么是单调堆栈，它们是如何工作的，以及它们的一些应用。

## 用例

单调堆栈通常用于跟踪数据集中的最大或最小元素。例如，假设你有一个整数数组，你想跟踪数组中每个索引处的最大整数。您可以为此使用单调堆栈。堆栈总是按降序排序，堆栈的顶部元素将是数组中直到该索引的最大整数。

当您想要根据某种顺序操作数据时，单调堆栈也很有用。例如，如果您想确保数组总是按升序排序，您可以使用单调堆栈来实现这一点。

## 一个著名的例子

一个著名的单调堆栈面试问题是日落景观问题。在这个问题中，给你一个建筑物阵列，每个建筑物用它的高度来表示。这些建筑相互成一条直线，这意味着如果一座建筑比另一座建筑高，它们将被阻挡，看不到日落。太阳向右侧落下。你的目标是找到所有能看到日落的建筑。

这是一组建筑物及其高度的示例:

```
let buildings = [18, 14, 13, 16, 12];
```

由于太阳向右侧落下，我们需要确定哪些建筑物能够观看日落。从视觉上，我们可以看到 18 能够看到所有其他建筑。当我们检查 14 时，我们看到它被高度为 16 的 4 号建筑挡住了。继续检查我们的建筑物将导致确定只有在指数 0，3 和 4 的建筑物能看见日落。

虽然从概念上和视觉上确定答案应该是什么很容易，但可能很难找出如何编码一个算法来有效地解决这个问题。这就是单调堆栈的用武之地。我们可以利用一个递减的单调堆栈，它允许我们弹出任何看不到日落的建筑。

![](img/f489df7e325864080d04fe54aa5f732e.png)

照片由[阿米莉娅·巴特利特](https://unsplash.com/@ameliabartlett?utm_source=medium&utm_medium=referral)在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 拍摄

## 利用单调堆栈

下面的代码片段演示了我们如何使用单调堆栈来解决日落问题。

当我们遍历建筑数组时，我们首先检查当前建筑是否比堆栈顶部的建筑高。如果是，我们知道当前建筑挡住了栈顶的建筑。因此，我们可以移除堆栈顶部的建筑。我们继续这样做，直到我们找到一个比当前建筑更高的建筑。此时，我们知道堆栈是单调递减的，这意味着它们都可以看到日落。

在遍历整个数组后，我们的堆栈将包含所有可以看到日落的建筑。在本例中，我们的最终堆栈将是[0，3，4]，这是可以看到日落的建筑物的索引。

## 时间复杂度

当涉及到我们算法的时间复杂度时，单调堆栈提供了很大的好处。在上面的例子中，我们的时间复杂度是 O(n ),因为我们只遍历了一次建筑数组。单调堆栈允许我们实现这种时间复杂度，因为我们能够有效地移除任何无法在一次通过中看到日落的建筑物。

## 结论

当我们需要维护数据的某种顺序时，单调堆栈是一个很好的工具。它们允许我们有效地删除任何不符合我们标准的元素，并可用于解决时间复杂的问题，否则很难实现。

我希望这篇文章能教会你一些东西。祝你的编码面试好运！