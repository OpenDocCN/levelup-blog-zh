<html>
<head>
<title>I Struggled To Configure AEM User Permissions and Access</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我努力配置AEM用户权限和访问</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/i-struggled-to-configure-aem-user-permissions-and-access-eb9ba2e2e5f9?source=collection_archive---------8-----------------------#2020-10-26">https://levelup.gitconnected.com/i-struggled-to-configure-aem-user-permissions-and-access-eb9ba2e2e5f9?source=collection_archive---------8-----------------------#2020-10-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="40db" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">AEM用户权限配置我犯了错误，所以你不必</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi ko"><img src="../Images/258ddd4297508de4966e6d0ca10c049b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ZzYnVfjfHw-FrRY8"/></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk translated">图片由格伦·霍德森拍摄</figcaption></figure><p id="3868" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我记得我必须完成的第一个用户权限故事——<em class="lb">设计并实现用户权限矩阵</em>。简单地说，我的任务是创建用户组、组织用户组、分配权限以及创建用户。这听起来直截了当，直到我开始工作，发现自己花的时间比我预期的要多得多。</p><h1 id="8699" class="lc ld it bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">配置用户权限的两种不同界面</h1><p id="6b7c" class="pw-post-body-paragraph jq jr it js b jt ma jv jw jx mb jz ka kb mc kd ke kf md kh ki kj me kl km kn im bi translated">有经典UI视图和触摸UI视图。后者是2019年末才推出的。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="gh gi mf"><img src="../Images/50e3eae95dfa10428398681991abc867.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*YmPp2BAzHbgNNMG1.png"/></div></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk translated">经典UI权限视图</figcaption></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="gh gi mk"><img src="../Images/1a5398a0f30cb5e877eaaa8d7b261f1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*GNmP43kw8OQEF7ys.png"/></div></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk translated">触摸UI权限视图</figcaption></figure><p id="bd70" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我最初选择在经典UI上工作，因为我不必进入三个独立的页面，不像触摸UI视图:</p><p id="70ff" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">对于经典UI，你只需进入<br/><em class="lb">localhost:4502/user admin</em></p><p id="3d17" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">对于触摸用户界面，你必须进入<br/><em class="lb">localhost:4502/security/users . html<br/>localhost:4502/security/groups . html<br/>localhost:4502/security/permissions . html</em></p><p id="0844" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我成功创建了用户组和用户，万岁！然而，事实证明，许可是一团乱麻。原因是…</p><h1 id="f7a7" class="lc ld it bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">经典用户界面上看似无害的取消选中</h1><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="gh gi ml"><img src="../Images/72a90398d675d8a3ea38b18a7ee040be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*SM0kTQkZ_z4fzOYx"/></div></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk translated">授予经典用户界面权限</figcaption></figure><p id="5283" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">你可能会想，如果贡献者不需要访问路径<em class="lb"> conf/templates </em>下的模板，你只需要取消选中那个框。实际上，这样做是为了创建一个明确的拒绝。</p><p id="869b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">你可能会问，明确否认有什么错。</p><h1 id="43ce" class="lc ld it bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">将用户分配给多个角色时，将会继承显式拒绝</h1><p id="3d92" class="pw-post-body-paragraph jq jr it js b jt ma jv jw jx mb jz ka kb mc kd ke kf md kh ki kj me kl km kn im bi translated">如果该特定用户是拒绝了<em class="lb">配置/模板</em>的贡献者组的一部分，同时也是选中了<em class="lb">配置/模板</em>的模板编辑者组的一部分，则由于该明确拒绝，他/她将无法访问<em class="lb">配置/模板</em>。</p><p id="d648" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">那么，怎样做才是正确的呢？</p><h1 id="923f" class="lc ld it bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">使用触摸界面上的主体权限视图，记住这条违反直觉的规则</h1><p id="eac9" class="pw-post-body-paragraph jq jr it js b jt ma jv jw jx mb jz ka kb mc kd ke kf md kh ki kj me kl km kn im bi translated">如果你不希望某个路径被允许，就不要显式地允许它——例如，如果我从来没有为贡献者显式地允许<em class="lb">/conf/templates</em>, AEM会认为它不被允许，并在没有显式拒绝的情况下实现“拒绝”效果。</p><p id="49c7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这样，如果该特定用户是拥有<em class="lb"> conf/templates </em>隐式拒绝<em class="lb"> </em>的贡献者组的一部分，并且也是拥有<em class="lb"> conf/templates </em>允许的模板编辑者组的一部分，则该用户将能够在他/她被分配到的用户组中获得最高级别的权限，如预期的那样。</p><h1 id="6d7d" class="lc ld it bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">在某些情况下，您可能需要明确拒绝。不要忘记明确的允许</h1><p id="a5f5" class="pw-post-body-paragraph jq jr it js b jt ma jv jw jx mb jz ka kb mc kd ke kf md kh ki kj me kl km kn im bi translated">有些情况下，您可能需要对某些超级组<em class="lb">(等等)应用一些限制。披萨公司非管理员超级用户组)</em>其中有很多用户组。你需要确保替代用户群<em class="lb">(等等。披萨公司Admin超级用户组)</em>有明确的允许覆盖目的。</p><p id="f050" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">此后，如果用户既是非管理子组的一部分，又是管理子组的一部分，则该用户将不会受到显式拒绝的影响，因为显式允许，并且能够在他/她被分配到的用户组中获得最高级别的权限，如预期的那样。</p><h1 id="d274" class="lc ld it bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">您还需要绝对路径(或绝对路径的子字符串)来允许/阻止该路径，但仍有无法找到的URL</h1><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="gh gi ml"><img src="../Images/28ab8c0de1fb8996e56d5385e55ca2a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_DZN9iBdYPuljjR8"/></div></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk translated">ACL及其路径定义的详细示例</figcaption></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="gh gi mm"><img src="../Images/8b7dd55ffbd36484c6d9757680237f6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7nh8jDRx35Pego3mmKcOww.png"/></div></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk translated">配置用户权限时的文件导航器</figcaption></figure><p id="c85b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">有一些页面类似于<em class="lb">localhost:4502/communities/sites</em>，但是你会从文件导航器中意识到路径并不存在。这意味着它是一个虚构的URL，而不是一个实际的路径。</p><p id="8f30" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">要找到它的实际路径，请转到<em class="lb">localhost:4502/system/console/JCR resolver</em>，然后复制并粘贴虚路径——您将能够找到实际路径。对于社区来说，它们位于路径<em class="lb">localhost:4502/libs/social/XXX下。</em></p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="gh gi mn"><img src="../Images/093c90b6037060aaab506f7cdd5a01c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FI2lZe8ZZyxJsHjI1XLVkw.png"/></div></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk translated">JCR解析器视图</figcaption></figure><p id="a2c0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如您所见，您从JCR解析器获得的这个新路径确实存在于文件导航器中。然后我们可以继续我们的允许/拒绝。</p><h1 id="8c66" class="lc ld it bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">每次我处理用户权限时，我简直就像做了一场噩梦</h1><p id="511f" class="pw-post-body-paragraph jq jr it js b jt ma jv jw jx mb jz ka kb mc kd ke kf md kh ki kj me kl km kn im bi translated">随时对配置进行编码。至少我不用去<em class="lb">“为什么要这么设计”。</em></p><p id="10f5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">关于AEM用户权限和访问的对话很少，这也是我决定写这篇文章的最重要的原因之一。</p><blockquote class="mo"><p id="a608" class="mp mq it bd mr ms mt mu mv mw mx kn dk translated">对于正在阅读这篇文章的你，我希望有了这篇分享，你不必再为AEM用户权限和访问而苦苦挣扎或做任何噩梦。安静点。✌🏼</p></blockquote></div></div>    
</body>
</html>