# Java å¼€å‘äººå‘˜è½¬å‘ Kotlin

> åŸæ–‡ï¼š<https://levelup.gitconnected.com/switching-to-kotlin-for-java-developers-1ce67aa08094>

## ç®€æ´ã€å®‰å…¨ã€å¯äº’æ“ä½œä¸”å·¥å…·å‹å¥½

![](img/31016a167c7766a3406b2f8a9ba534e6.png)

æ¥è‡ªç§‘ç‰¹æ—çš„æœ€æ–°æ¶ˆæ¯(æˆªæ­¢åˆ° 2020 å¹´ 6 æœˆ 23 æ—¥)

Java æ˜¯æœ€å¤è€å’Œæœ€æµè¡Œçš„ç¼–ç¨‹è¯­è¨€ä¹‹ä¸€ã€‚å®ƒå·²ç»è¢«ç»„ç»‡ç”¨äºè½¯ä»¶å¼€å‘å¾ˆå¤šå¹´äº†ã€‚ç„¶è€Œï¼Œåœ¨ç°ä»£è½¯ä»¶å¼€å‘åœºæ™¯ä¸­ï¼Œè¿™ç§çªå‡ºçš„è¯­è¨€æ˜¯æ»åçš„ã€‚

![](img/aad264eb3d4d14f08ee20c218cecd88e.png)

# ç§‘ç‰¹æ—æ˜¯ä»€ä¹ˆï¼Ÿ

2011 å¹´ï¼ŒJetBrains å®£å¸ƒå¼€å‘ Kotlin ç¼–ç¨‹è¯­è¨€ï¼Œè¿™æ˜¯ä¸€ç§æ›¿ä»£ç”¨ Java æˆ– Scala ç­‰è¯­è¨€ç¼–å†™ä»£ç ä»¥åœ¨ Java è™šæ‹Ÿæœºä¸Šè¿è¡Œçš„è¯­è¨€ã€‚å…­å¹´åï¼Œè°·æ­Œå®£å¸ƒ Kotlin å°†æˆä¸º Android æ“ä½œç³»ç»Ÿçš„å®˜æ–¹æ”¯æŒå¼€å‘è·¯å¾„ã€‚

# æˆ‘ä»¬ä¸ºä»€ä¹ˆè¦çˆ±ç§‘ç‰¹æ—ï¼Ÿ

ä½¿ç”¨ Kotlin å¼€å‘ç¨‹åºçš„å¼€å‘äººå‘˜ä¸ä»…å–œæ¬¢è¿™ç§è¯­è¨€ï¼Œè€Œä¸”çƒ­çˆ±å®ƒğŸ˜ã€‚åŸå› æ˜¯ä»€ä¹ˆï¼Ÿ

Kotlin æ˜¯å°‘æ•°å‡ ç§å¯ç”¨äºæœåŠ¡å™¨ç«¯ã€å‰ç«¯å¼€å‘å’Œç§»åŠ¨åº”ç”¨çš„è¯­è¨€ä¹‹ä¸€ã€‚æºä»£ç å¯ä»¥ç¼–è¯‘æˆ Java å­—èŠ‚ç ï¼Œä¹Ÿå¯ä»¥è½¬æ¢æˆ JavaScriptã€‚å®ƒè¿˜æ”¯æŒåŒ…æ‹¬ iOSã€macOSã€Linuxã€windows åœ¨å†…çš„ç›®æ ‡å¹³å°å°†æºä»£ç ç¼–è¯‘æˆæœ¬åœ°äºŒè¿›åˆ¶æ–‡ä»¶ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Kotlin è¿›è¡Œå…¨æ ˆå¼€å‘ã€‚

Kotlinï¼Œæ›´å¥½çš„ Javaã€‚Kotlin åœ¨ Java ä¸Šæä¾›äº†å¾ˆå¤šåŠŸèƒ½ï¼Œä½†æ²¡æœ‰å¸¦èµ°ä»»ä½•ä¸œè¥¿ã€‚

Kotlin ä»ç¬¬ä¸€å¤©èµ·å°±æœ‰å‡ºè‰²çš„ IDE æ”¯æŒ Kotlin æ¥è‡ª JetBrainsï¼Œä»–ä»¬è¿˜å¼€å‘äº†ä¸€ä¸ªè‘—åçš„ Java é›†æˆå¼€å‘ç¯å¢ƒ(IDE): IntelliJ IDEAã€‚JetBrains çš„å¼€å‘äººå‘˜ç¡®ä¿ Kotlin åœ¨ IDEA ä¸­æœ‰ä¸€æµçš„æ”¯æŒã€‚

# ä» Java åˆ‡æ¢åˆ° Kotlin

æœ‰ç»éªŒçš„ Java å¼€å‘äººå‘˜åœ¨å­¦ä¹  Kotlin çš„ç»†å¾®å·®åˆ«æ—¶ï¼Œä¸å¾—ä¸æ”¾å¼ƒä¸€äº› Java å®è·µã€‚

## ä½ ä¼šå°‘æ‰“å­—

***åˆ†å·åœ¨ Kotlin ä¸­æ˜¯å¯é€‰çš„ã€‚*** ç¼–è¯‘å™¨å¯ä»¥è®¡ç®—å‡ºè¯¥è¡Œçš„ç»“æŸä½ç½®ã€‚äº‹å®ä¸Šï¼Œå¦‚æœæ‚¨åœ¨è¡Œå°¾æ”¾ç½®åˆ†å·ï¼Œæ‚¨ä¼šå¾—åˆ°ä¸€ä¸ªç¼–è¯‘å™¨è­¦å‘Šã€‚

ä»¥ä¸‹ç¤ºä¾‹æ˜¯ Kotlin ä¸­çš„æœ‰æ•ˆè¯­æ³•ï¼Œå¯ä»¥ç‹¬ç«‹ç¼–å†™ã€‚

```
println(â€œHello, world!â€)
```

ä¸ä»… Kotlinï¼ŒPython ä¹Ÿä¸éœ€è¦åˆ†å·ã€‚

***å¯å˜ç±»å‹è§„æ ¼åœ¨ Kotlin ä¸­æ˜¯å¯é€‰çš„ã€‚åœ¨ Java ä¸­ï¼Œä½ ç”¨ä¸€ä¸ªç±»å‹å¼€å§‹ä¸€ä¸ªå˜é‡å£°æ˜ã€‚è¿™å¯¹ Kotlin ä¸èµ·ä½œç”¨ï¼Œå› ä¸ºå®ƒå…è®¸æ‚¨ä»è®¸å¤šå˜é‡å£°æ˜ä¸­çœç•¥ç±»å‹ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ä¸æŒ‡å®šç±»å‹çš„æƒ…å†µä¸‹å®šä¹‰ä¸€ä¸ªå˜é‡ï¼Œç„¶ååƒä¸‹é¢è¿™æ ·è¯·æ±‚è¯¥å˜é‡çš„ç±»å‹ã€‚***

```
valâ€‹ greet = â€‹"hello"println(greet)â€‹ // hello
println(greet::â€‹classâ€‹)â€‹ // class kotlin.String**â€‹**
println(greet.javaClass) // class java.lang.String
```

Kotlin å…·æœ‰ smarts ç±»å‹æ¨ç†ï¼Œå¯ä»¥æ ¹æ®ä¸Šä¸‹æ–‡ç¡®å®šå˜é‡çš„ç±»å‹ã€‚ä½†æ˜¯å¦‚æœæ‚¨æ„¿æ„ï¼Œä¹Ÿå¯ä»¥æ˜¾å¼æŒ‡å®šç±»å‹ã€‚

```
val greet: String = â€œhelloâ€
```

***åœ¨ Kotlin ä¸­ï¼Œç±»å’Œå‡½æ•°æ˜¯å¯é€‰çš„ã€‚*** ä¸ Java ä¹‹ç±»çš„è¯­è¨€ä¸åŒï¼ŒKotlin ä¸è¦æ±‚ä¸€ä¸ªè¯­å¥æˆ–è¡¨è¾¾å¼å±äºä¸€ä¸ªæ–¹æ³•ï¼Œä¸€ä¸ªæ–¹æ³•å±äºä¸€ä¸ªç±»ï¼Œè‡³å°‘åœ¨æˆ‘ä»¬å†™çš„æºä»£ç ä¸­æ˜¯è¿™æ ·ã€‚

åœ¨ä¸‹é¢çš„æºä»£ç ä¸­ï¼Œå‡½æ•°ä¸å±äºæŸä¸ªç±»ï¼Œå‡½æ•°ä¸‹é¢çš„ä»£ç æ˜¯ç‹¬ç«‹çš„ï¼Œä¸å±äºä»»ä½•å‡½æ•°ã€‚

```
fun hello(name: String) {
    println("hello $name")
}
```

***åœ¨ Kotlin ä¸­ï¼ŒTry-catch æ˜¯å¯é€‰çš„ã€‚Kotlin ä¸å¼ºè¿«ä½ æ•æ‰ä»»ä½•æ£€æŸ¥è¿‡æˆ–æœªæ£€æŸ¥è¿‡çš„å¼‚å¸¸ã€‚å¦‚æœæ‚¨æ²¡æœ‰åœ¨å‡½æ•°è°ƒç”¨å‘¨å›´æ”¾ç½®ä¸€ä¸ª try-catchï¼Œå¹¶ä¸”å¦‚æœè¯¥å‡½æ•°å¤±è´¥ï¼Œå¼‚å¸¸ä¼šè‡ªåŠ¨ä¼ æ’­åˆ°æ‚¨çš„å‡½æ•°æˆ–ä»£ç çš„è°ƒç”¨æ–¹ã€‚å¦‚æœä¸€ä¸ªå¼‚å¸¸æ²¡æœ‰è¢«å¤„ç†ï¼Œå®ƒå°†å¯¼è‡´ä½ çš„ç¨‹åºè‡´å‘½çš„ç»ˆæ­¢ã€‚***

ä¾‹å¦‚ï¼Œåœ¨ Java ä¸­ï¼Œ`Thread class`çš„`sleep()`æ–¹æ³•æŠ›å‡ºä¸€ä¸ªæ£€æŸ¥è¿‡çš„å¼‚å¸¸ï¼Œç¼–è¯‘å™¨å¼ºè¿«æˆ‘ä»¬å¤„ç†å®ƒã€‚ä½†æ˜¯åœ¨ç§‘ç‰¹æ—ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·å†™ã€‚

```
Thread.sleep(500)
```

ä»¥ä¸Šã€‚ä»£ç æ²¡æœ‰ä»»ä½• try å’Œ catch å…³é”®å­—ã€‚

## Kotlin ç¼–è¯‘å™¨åœ¨ç»™å‡ºè­¦å‘Šæ—¶æ˜¯æ˜æ™ºçš„

ä¾‹å¦‚ï¼Œå¦‚æœåœ¨å‡½æ•°æˆ–æ–¹æ³•ä¸­æ”¶åˆ°çš„å‚æ•°æ²¡æœ‰è¢«ä½¿ç”¨ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨ä¼šç»™å‡ºè­¦å‘Šã€‚

```
funâ€‹ â€‹computeâ€‹(n: Int) = 0â€‹ â€‹ 
println(compute(4))
```

å½“æ‚¨è¿è¡Œè¿™ä¸ªè„šæœ¬æ—¶ï¼Œé™¤äº†æ˜¾ç¤ºç»“æœä¹‹å¤–ï¼ŒKotlin è¿˜ä¼šæŠ¥å‘Šä»»ä½•å…³äºæœªä½¿ç”¨å‚æ•°çš„è­¦å‘Šã€‚

```
0â€‹ 
unused.kts:1:13: warning: parameter â€™nâ€™ is never usedâ€‹ 
fun compute(n: Int) = 0â€‹ 
      ^
```

## **æ›´å–œæ¬¢ val è€Œä¸æ˜¯ var**

è¦å®šä¹‰ä¸€ä¸ªä¸å¯å˜çš„å˜é‡ï¼Œä¹Ÿå°±æ˜¯å¸¸é‡æˆ–å€¼ï¼Œä½¿ç”¨`val`å…³é”®å­—ã€‚

```
valâ€‹ pi = 3.14
```

`pi`çš„å€¼å¯ä»¥ä¿®æ”¹ï¼Œ`val`å…³é”®å­—å°±åƒ Java ä¸­çš„`final`å…³é”®å­—ã€‚

å¦‚æœä½ æƒ³æ”¹å˜ä¸€ä¸ªå˜é‡çš„å€¼å‘¢ï¼Ÿè®©æˆ‘ä»¬ä½¿ç”¨ var å…³é”®å­—ã€‚å°±åƒä¸‹é¢çš„ä¾‹å­ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå¯å˜å˜é‡ï¼Œç„¶åä¿®æ”¹å®ƒçš„å€¼ã€‚

```
varâ€‹ length = 10
println(length) â€‹//10â€‹**â€‹   â€‹** length = 15println(length) â€‹//15
```

å¤šå˜æ€§ä½¿å¾—ä»£ç éš¾ä»¥æ¨ç†ã€‚å…·æœ‰å¯å˜æ€§çš„ä»£ç ä¹Ÿæœ‰æ›´é«˜çš„å‡ºé”™å‡ ç‡ã€‚å…·æœ‰å¯å˜æ€§çš„ä»£ç æ›´éš¾å¹¶è¡ŒåŒ–ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå°½é‡ä½¿ç”¨`val`è€Œä¸æ˜¯`var`ã€‚åœ¨ Kotlin ä¸­ï¼Œé»˜è®¤ä¸º val å’Œä¸å˜æ€§ã€‚

ä½¿ç”¨`val`ï¼Œå®ƒåªä½¿å˜é‡æˆ–å¼•ç”¨æˆä¸ºå¸¸é‡ï¼Œè€Œä¸æ˜¯è¢«å¼•ç”¨çš„å¯¹è±¡ã€‚æ‰€ä»¥`val`åªä¿è¯å¼•ç”¨çš„ä¸å˜æ€§ï¼Œå¹¶ä¸é˜»æ­¢å¯¹è±¡çš„æ”¹å˜ã€‚

```
valâ€‹ message = StringBuilder(â€‹"hello"â€‹)â€‹ â€‹ â€‹
//message = StringBuilder("another") // ERRORâ€‹â€‹ â€‹ 
message.append(â€‹"there")
```

ç®€è€Œè¨€ä¹‹ï¼Œ`val`åªå…³æ³¨æ‰‹å¤´çš„å˜é‡æˆ–å¼•ç”¨ï¼Œè€Œä¸å…³æ³¨å®ƒæ‰€å¼•ç”¨çš„å†…å®¹ã€‚ç„¶è€Œï¼Œå°½å¯èƒ½é€‰æ‹©`val`è€Œä¸æ˜¯`var`ã€‚

## æ”¹è¿›çš„ç›¸ç­‰æ£€æŸ¥

å°±åƒ Java ä¸€æ ·ï¼Œåœ¨ Kotlin ä¸­æœ‰ä¸¤ç§ç±»å‹çš„ç­‰å¼ã€‚

*   ç»“æ„ç›¸ç­‰(Java ä¸­çš„`equals()`æ–¹æ³•ï¼Œæˆ–è€… Kotlin ä¸­çš„`==`æ“ä½œç¬¦)ï¼Œæ˜¯å€¼çš„æ¯”è¾ƒã€‚
*   å¼•ç”¨ç›¸ç­‰(Java ä¸­çš„`==`æ“ä½œç¬¦ï¼Œæˆ–è€… Kotlin ä¸­çš„`===`)æ˜¯å¼•ç”¨çš„æ¯”è¾ƒã€‚

ä½†æ˜¯ Kotlin ä¸­çš„ç»“æ„ç­‰å¼è¿ç®—ç¬¦`==`æ¯” Java ä¸­çš„`equals()` æ–¹æ³•å¤šã€‚æ¯”å¦‚ä½ è¡¨æ¼”`a.equals(b)`ï¼›åœ¨ Java ä¸­ï¼Œå¦‚æœå¼•ç”¨`a`æ˜¯`null`ï¼Œä½ å¯èƒ½ä¼šé‡åˆ°ä¸€ä¸ª`NullPointerException`ã€‚å½“ä½ åœ¨ Kotlin ä¸­ä½¿ç”¨`==`æ—¶å°±ä¸æ˜¯è¿™æ ·äº†ã€‚æŒ‰ç…§æƒ¯ä¾‹ï¼ŒKotlin ä¸­ç±»ä¼¼`a == b`çš„è¡¨è¾¾å¼è¢«ç¿»è¯‘æˆã€‚

```
a?.equals(b) ?: (b === null)
```

å¦‚æœ`a`ä¸ä¸º`null`ï¼Œåˆ™è°ƒç”¨`equals(Any?)`å‡½æ•°ï¼Œå¦åˆ™(å³`a`ä¸º`null`)æ£€æŸ¥`b`æ˜¯å¦ç­‰äº`null`ã€‚

## ç§‘ç‰¹æ—çš„å¼¦ä¹

å’Œ Java ä¸€æ ·ï¼ŒKotlin ä¸­çš„å­—ç¬¦ä¸²æ˜¯ä¸å¯å˜çš„ã€‚è¿™æ„å‘³ç€ä¸€æ—¦å­—ç¬¦ä¸²è¢«åˆ›å»ºï¼Œæˆ‘ä»¬å°±æ²¡æœ‰åŠæ³•æ”¹å˜å®ƒçš„å•ä¸ªå­—ç¬¦ã€‚

```
var myString = "Hello"
myString[0] = 'h' // ERROR
```

ç„¶è€Œï¼Œæˆ‘ä»¬å¯ä»¥ä»ä¸€ä¸ªç»™å®šçš„å­—ç¬¦ä¸²å¯¼å‡ºå¦ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚Kotlin ç”¨é¢å¤–çš„åŠŸèƒ½ä¸°å¯Œäº† Java String ç±»ã€‚ä¾‹å¦‚ï¼Œæ–¹æ³•`padEnd()`å…è®¸æˆ‘ä»¬æ ¼å¼åŒ–ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä»¥ä¾¿è¡¨è¾¾å¼ã€‚

```
"Hello".padEnd(10, '!') // â€œHello!!!!!â€
```

æˆ–è€…æˆ‘ä»¬å¯ä»¥é‡æ–°åˆ†é…ä¸€ä¸ªå­—ç¬¦ä¸²å˜é‡ï¼Œå¦‚æœä½ ä½¿ç”¨å…³é”®å­—`var`å£°æ˜å˜é‡çš„è¯ã€‚

```
var myString = "Hey!" // Hey!
myString = "Hello!" // Hello!
```

## å­—ç¬¦ä¸²æ¨¡æ¿

Kotlin æœ‰ä¸€ä¸ªå¾ˆæ£’çš„ç‰¹æ€§å«åšå­—ç¬¦ä¸²æ¨¡æ¿ï¼Œå®ƒå…è®¸å­—ç¬¦ä¸²åŒ…å«æ¨¡æ¿è¡¨è¾¾å¼ã€‚å­—ç¬¦ä¸²æ¨¡æ¿è¡¨è¾¾å¼ä»¥ç¾å…ƒç¬¦å·`$`å¼€å§‹ã€‚

```
val myInt = 5
val myString = "myInt = $myInt"
println(myString) //myInt = 5
```

å­—ç¬¦ä¸²æ¨¡æ¿ä¸­å¯ä»¥ä½¿ç”¨ä»»ä½•æœ‰æ•ˆçš„ Kotlin è¡¨è¾¾å¼ã€‚

```
val n = 5
val message = "n + 1 = ${n + 1}" // n + 1 = 6
```

## åŸå§‹å­—ç¬¦ä¸²

æ­¤å¤–ï¼Œåœ¨ Kotlin ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸‰é‡å¼•ç”¨çš„åŸå§‹å­—ç¬¦ä¸²ï¼Œå¯ä»¥åŒ…å«ç‰¹æ®Šå­—ç¬¦ï¼Œè€Œä¸éœ€è¦å¯¹å®ƒä»¬è¿›è¡Œè½¬ä¹‰ã€‚

```
valâ€‹ raw = â€‹â€â€â€My friend asked, â€œHow are you today, $name?â€â€â€â€â€‹
```

æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™ç§ç¬¦å·æ¥åˆ›å»ºå¤šè¡Œå­—ç¬¦ä¸²ã€‚

```
val receipt = """Item 1: $1.00
Item 2: $0.50"""
```

## å¤šè¡¨è¾¾ï¼Œå°‘é™ˆè¿°

åƒ Javaã€C#å’Œ JavaScript è¿™æ ·çš„è¯­è¨€ï¼Œè¯­å¥æ¯”è¡¨è¾¾å¼å¤š(if è¯­å¥ã€for è¯­å¥ã€try ç­‰ç­‰)ã€‚å¦ä¸€æ–¹é¢ï¼Œåƒ Rubyã€F#ã€Groovyã€Haskell å’Œè®¸å¤šå…¶ä»–è¯­è¨€çš„è¡¨è¾¾å¼æ¯”è¯­å¥å¤šã€‚

è®©æˆ‘ä»¬ç¼–å†™ä¸€æ®µ Kotlin ä»£ç ï¼Œå°±åƒåœ¨ Java ç­‰è¯­è¨€ä¸­ä¸€æ ·ã€‚

```
fun canVoteâ€‹(name: String, age: Int): String {
    â€‹
    var â€‹ status: String
    ifâ€‹ (age > 17) {
        status = â€‹"yes, please vote"â€‹
    } elseâ€‹ {
        status = â€‹"nope, please come back"â€‹
    }
    returnâ€‹ â€‹"$name, $status"â€‹
}
```

è®©æˆ‘ä»¬é‡æ–°ç¼–å†™å‰é¢çš„ä»£ç ï¼Œä½¿ç”¨ if ä½œä¸ºè¡¨è¾¾å¼è€Œä¸æ˜¯è¯­å¥ã€‚

```
valâ€‹ status = â€‹ifâ€‹ (age > 17) â€‹â€yes, please voteâ€â€‹ â€‹elseâ€‹ â€‹â€nope, please come backâ€â€‹â€‹ â€‹ 
â€‹returnâ€‹ â€‹â€$name, $statusâ€â€‹
```

# ç»“è®º

åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬è€ƒè™‘äº† Java ä¸­æ²¡æœ‰çš„ Kotlin è¯­è¨€çš„ä¸€ä¸ªç‰¹æ€§ã€‚

å¾ˆç®€å•ï¼Œå¯¹å§ï¼Ÿ

# å‚è€ƒ

[1][https://blog . jetbrains . com/kot Lin/2011/08/why-jetbrains-needs-kot Lin/](https://blog.jetbrains.com/kotlin/2011/08/why-jetbrains-needs-kotlin/)

[2][https://blog . jetbrains . com/kot Lin/2017/05/kot Lin-on-Android-now-official/](https://blog.jetbrains.com/kotlin/2017/05/kotlin-on-android-now-official/)