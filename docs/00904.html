<html>
<head>
<title>Add internationalization (i18n) to an Angular app</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">向Angular应用程序添加国际化(i18n)</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/add-internationalization-i18n-to-an-angular-app-b8fa8b51deea?source=collection_archive---------0-----------------------#2019-09-10">https://levelup.gitconnected.com/add-internationalization-i18n-to-an-angular-app-b8fa8b51deea?source=collection_archive---------0-----------------------#2019-09-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="d28a" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">以3种不同方式将国际化和本地化添加到Angular应用程序的指南</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/f18c546713b945c0cd904e4c5cbeb4ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TmV2HZBALfzZr8liKHCUwQ.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@demidearest?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Demi DeHerrera </a>在<a class="ae ky" href="https://unsplash.com/search/photos/coffee?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="050d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我将提供3种方法来为Angular 8应用程序添加国际化。</p><ol class=""><li id="199a" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">使用<code class="fe me mf mg mh b">ng xi18n</code></li><li id="f082" class="lv lw it lb b lc mi lf mj li mk lm ml lq mm lu ma mb mc md bi translated">安装<code class="fe me mf mg mh b">ngx-translate</code></li><li id="588e" class="lv lw it lb b lc mi lf mj li mk lm ml lq mm lu ma mb mc md bi translated">创建自己的解决方案(无库)</li></ol><p id="6a5f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="mn">更多类似内容，请查看</em><a class="ae ky" href="https://betterfullstack.com/stories/" rel="noopener ugc nofollow" target="_blank"><em class="mn">https://betterfullstack.com</em></a></p><p id="ac10" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在入门之前，我们需要先了解什么是<strong class="lb iu">国际化</strong><em class="mn"/><strong class="lb iu">本地化</strong> <em class="mn">什么是</em>。</p><p id="c90c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">国际化</strong>是指设计和准备您的应用程序以供不同语言使用的过程。</p><p id="22cb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">本地化</strong>是将你的国际化应用程序翻译成特定语言的过程。</p><h1 id="ad56" class="mo mp it bd mq mr ms mt mu mv mw mx my jz mz ka na kc nb kd nc kf nd kg ne nf bi translated">使用xi18n</h1><p id="c4af" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">对于本地化，您可以使用<a class="ae ky" href="https://angular.io/cli" rel="noopener ugc nofollow" target="_blank"> Angular CLI </a>来生成为翻译人员创建文件和以多种语言发布应用程序所需的大部分样板文件。将应用程序设置为使用i18n后，CLI可以帮助您完成以下步骤:</p><ul class=""><li id="7cff" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu nl mb mc md bi translated">将可本地化的文本提取到一个可以发送出去进行翻译的文件中。</li><li id="03c4" class="lv lw it lb b lc mi lf mj li mk lm ml lq mm lu nl mb mc md bi translated">使用翻译后的文本为给定的语言环境构建和提供应用程序。</li><li id="0648" class="lv lw it lb b lc mi lf mj li mk lm ml lq mm lu nl mb mc md bi translated">创建应用程序的多语言版本。</li></ul><p id="5a41" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为此，在元素中添加一个<code class="fe me mf mg mh b">i18n</code>管道。只需运行以下命令:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/fd2f95ad1bacafdbf4630cfcc5805412.png" data-original-src="https://miro.medium.com/v2/resize:fit:856/format:webp/1*-CWJVSqd2frPhlmpfyBTjQ.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">生成区域设置文件</figcaption></figure><p id="642a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">默认情况下，Angular使用区域设置<code class="fe me mf mg mh b">en-US</code>，这是美国使用的英语。</p><p id="fa04" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，我们可以通过运行以下命令来添加另一种语言:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nn"><img src="../Images/838eb8910a6a729e441be69d37d5ed3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6HOSWvvA3SZ43n7v-e1ThQ.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">添加vi语言</figcaption></figure><p id="4f0c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后我们去<code class="fe me mf mg mh b">messages.vi.xlf</code>修改那里的文本。为第二语言添加一个<a class="ae ky" href="https://angular.io/guide/i18n#merge-with-the-aot-compiler" rel="noopener ugc nofollow" target="_blank">配置</a>至<code class="fe me mf mg mh b">angular.json</code>。</p><p id="ace2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在运行<code class="fe me mf mg mh b">ng serve configuration=vi</code>。你可以在这里查看样品<a class="ae ky" href="https://github.com/hoangtranson/sample-xi18n-angular" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="8e35" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你必须为每种语言构建每一次，并为你的语言指定一个不同的<code class="fe me mf mg mh b">base-href</code>。这让我有时很不舒服。此外，<code class="fe me mf mg mh b">.xlf</code>文件也很难读取。</p><p id="a824" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们再来看另一个添加i18n的选项。</p><h1 id="17c0" class="mo mp it bd mq mr ms mt mu mv mw mx my jz mz ka na kc nb kd nc kf nd kg ne nf bi translated">使用ngx-翻译</h1><p id="daac" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated"><code class="fe me mf mg mh b">ngx-translate</code>是Angular的国际化(i18n)库。这个库很容易安装和使用。</p><p id="3470" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我已经使用这个图书馆很长时间了。每当我开始一个新的大型项目时，我都会使用这个库，因为它有很多好处。</p><ol class=""><li id="1448" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">它们提供了获取模板和组件文件翻译的方法。</li><li id="d565" class="lv lw it lb b lc mi lf mj li mk lm ml lq mm lu ma mb mc md bi translated">它们支持多个JSON属性级别。</li><li id="794b" class="lv lw it lb b lc mi lf mj li mk lm ml lq mm lu ma mb mc md bi translated">他们提供了许多方法来使用。</li><li id="8f00" class="lv lw it lb b lc mi lf mj li mk lm ml lq mm lu ma mb mc md bi translated">它们允许你定制你自己的加载器。</li><li id="535f" class="lv lw it lb b lc mi lf mj li mk lm ml lq mm lu ma mb mc md bi translated">在缺少翻译的情况下，我们可以添加一个值。</li><li id="fc62" class="lv lw it lb b lc mi lf mj li mk lm ml lq mm lu ma mb mc md bi translated">它们支持生产模式下的AOT编译。</li></ol><p id="2a9d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">安装:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi no"><img src="../Images/ee3e4ce1d7477c8d6ebf79daf6c9fadb.png" data-original-src="https://miro.medium.com/v2/resize:fit:976/format:webp/1*Jjtxj9vomMpxhqAqdI9mGQ.png"/></div></figure><p id="d951" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe me mf mg mh b">@ngx-translate/core</code>包含翻译的核心例程——<code class="fe me mf mg mh b">TranslateService</code>和一些管道。</p><p id="efb5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe me mf mg mh b">@ngx-translate/http-loader</code>从您的服务器加载翻译文件。</p><p id="6e66" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">更新代码:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">应用程序模块</figcaption></figure><p id="b1c1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">项目中的AOT(提前)编译需要<code class="fe me mf mg mh b">HttpLoaderFactory</code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="2085" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在<code class="fe me mf mg mh b">app.component.ts</code>将默认语言设置为<code class="fe me mf mg mh b">en</code></p><p id="1d49" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">问题:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nr"><img src="../Images/6e04a5b219049680406371462cde6451.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G8nXC3hoKXqLuA0NH38M3A.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">HttpClient没有提供程序</figcaption></figure><p id="3400" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我导入了<code class="fe me mf mg mh b">HttpClientModule</code>来解决这个问题。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ns"><img src="../Images/03909c0b393cdaeac45b4b6a007ac1c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1uHm_sk5vd28FzreivC1JQ.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="http://localhost:4200/assets/i18n/en.json" rel="noopener ugc nofollow" target="_blank">http://localhost:4200/assets/i18n/en . JSON</a>404(未找到)</figcaption></figure><p id="376a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我按照URL创建了<code class="fe me mf mg mh b">en.json</code>。你可以在这里阅读更多关于这个伟大图书馆的信息。</p><h1 id="62fe" class="mo mp it bd mq mr ms mt mu mv mw mx my jz mz ka na kc nb kd nc kf nd kg ne nf bi translated">创建自己的解决方案(无库)</h1><p id="9c4f" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">对于简单的角度项目和任何只需要基本翻译的项目，我总是使用这种方法。此外，从头开始构建一些东西也是一个好主意，可以更多地了解我们正在解决的问题。</p><p id="2f6c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们的想法是手动添加一个本地JSON文件，并通过HTTP加载该文件。然后，在模板中，我们将一个转换键传递给一个管道，该管道将把该键传递给一个对象，以获取该属性的值。</p><p id="fde0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">步骤如下:</p><ol class=""><li id="2f33" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">在<code class="fe me mf mg mh b">assets</code>文件夹中创建一个<code class="fe me mf mg mh b">locale</code>文件夹。</li><li id="4673" class="lv lw it lb b lc mi lf mj li mk lm ml lq mm lu ma mb mc md bi translated">创建<code class="fe me mf mg mh b"><strong class="lb iu">TranslateService</strong></code>并使用<code class="fe me mf mg mh b"><strong class="lb iu">HttpClient</strong></code>加载语言环境文件。添加一个公共变量<code class="fe me mf mg mh b"><strong class="lb iu">translateObject</strong></code>在管道文件中调用它。</li><li id="a54e" class="lv lw it lb b lc mi lf mj li mk lm ml lq mm lu ma mb mc md bi translated">创建一个<code class="fe me mf mg mh b"><strong class="lb iu">TranslatePipe</strong></code>，它从模板中接收一个关键字，并从<code class="fe me mf mg mh b"><strong class="lb iu">TranslateService</strong></code>将它映射到<code class="fe me mf mg mh b"><strong class="lb iu">translateObject</strong></code>。</li></ol><p id="9b55" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你可以在这里查看源代码<a class="ae ky" href="https://github.com/hoangtranson/simple-translation-angular" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="0fdb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这很简单，我通常将它用于登陆页面或简单的项目。但是它不能有像<code class="fe me mf mg mh b">ngx-trsnlate</code>这样的嵌套属性，也不能为翻译绑定动态值。</p><p id="50c5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于那些想尝试新库的人，可以去看看<a class="ae ky" href="https://github.com/ngneat/transloco/" rel="noopener ugc nofollow" target="_blank"> transcolo </a>。那是由<a class="ae ky" href="https://netbasal.com/@NetanelBasal" rel="noopener ugc nofollow" target="_blank"> Netanel Basal </a>建造的。</p><h1 id="3cd7" class="mo mp it bd mq mr ms mt mu mv mw mx my jz mz ka na kc nb kd nc kf nd kg ne nf bi translated">摘要</h1><p id="8049" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">国际化和本地化是应用程序的重要组成部分。我们可以使用angular-cli来支持它，或者安装一个库来节省您的时间。</p><p id="6475" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于基本的web应用程序，我们可以创建自己的翻译系统。这也是了解其工作原理的好方法。</p><p id="0b9b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我希望这篇文章对你有用！可以跟着我上<a class="ae ky" href="https://medium.com/@transonhoang" rel="noopener">媒</a>。我也在推特上。欢迎在下面的评论中留下任何问题。我很乐意帮忙！</p><h1 id="4d0c" class="mo mp it bd mq mr ms mt mu mv mw mx my jz mz ka na kc nb kd nc kf nd kg ne nf bi translated">资源/参考资料</h1><p id="46fb" class="pw-post-body-paragraph kz la it lb b lc ng ju le lf nh jx lh li ni lk ll lm nj lo lp lq nk ls lt lu im bi translated">[1]:i18n<a class="ae ky" href="https://angular.io/guide/i18n" rel="noopener ugc nofollow" target="_blank">https://angular.io/guide/i18n</a></p><p id="7499" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">[2]:ngx-翻译库<a class="ae ky" href="https://github.com/ngx-translate/core" rel="noopener ugc nofollow" target="_blank">https://github.com/ngx-translate/core</a></p></div><div class="ab cl nt nu hx nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="im in io ip iq"><div class="kj kk kl km gt oa"><a href="https://gitconnected.com/learn/angular" rel="noopener  ugc nofollow" target="_blank"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd iu gy z fp of fr fs og fu fw is bi translated">学习角度-最佳角度教程(2019) | gitconnected</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">50大角度教程-免费学习角度。课程由开发人员提交和投票，使您能够…</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">gitconnected.com</p></div></div><div class="oj l"><div class="ok l ol om on oj oo ks oa"/></div></div></a></div><div class="op oq gp gr or oa"><a href="https://betterfullstack.com/stories/" rel="noopener  ugc nofollow" target="_blank"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd iu gy z fp of fr fs og fu fw is bi translated">故事-更好的全栈</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">关于JavaScript、Python和Wordpress的有用文章，有助于开发人员减少开发时间并提高…</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">betterfullstack.com</p></div></div><div class="oj l"><div class="os l ol om on oj oo ks oa"/></div></div></a></div></div></div>    
</body>
</html>