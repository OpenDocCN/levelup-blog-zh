<html>
<head>
<title>How to get Gatsby to work in Internet Explorer 11</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何让盖茨比在Internet Explorer 11中工作</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-get-gatsby-to-work-in-internet-explorer-11-7aecedcb22ba?source=collection_archive---------16-----------------------#2020-05-04">https://levelup.gitconnected.com/how-to-get-gatsby-to-work-in-internet-explorer-11-7aecedcb22ba?source=collection_archive---------16-----------------------#2020-05-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div class="gh gi jq"><img src="../Images/8a260d987a078478f3a3b4f383852b6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:450/format:webp/1*Y8cHDwdf8KCPIcHECDZmHQ.jpeg"/></div><figcaption class="jx jy gj gh gi jz ka bd b be z dk translated">这是真的吗</figcaption></figure><p id="9cee" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我发现自己正在使用<a class="ae kz" href="http://gatsbyjs.org/" rel="noopener ugc nofollow" target="_blank"> Gatsby </a>做一个志愿者项目，这是一个非常棒的包装器，它将<a class="ae kz" href="https://reactjs.org/" rel="noopener ugc nofollow" target="_blank"> React.js </a>与<a class="ae kz" href="https://www.freecodecamp.org/news/what-exactly-is-client-side-rendering-and-hows-it-different-from-server-side-rendering-bd5c786b340d/" rel="noopener ugc nofollow" target="_blank">服务器端渲染</a>和流行的脸书制造的API <a class="ae kz" href="https://graphql.org/" rel="noopener ugc nofollow" target="_blank"> GraphQL </a>打包在一起。盖茨比真的很棒，我写了一个完全不同的博客，关于为什么你应该使用它，但是，如果你不想读它，基本上它很快，对那些想要在各种互联网连接上容易加载的网站的人来说真的很好。</p><p id="2295" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">然而，使用这种高级前端JavaScript框架的代价是，并不是每个用户都使用可以处理代码的浏览器！</p><figure class="lb lc ld le gt ju gh gi paragraph-image"><div class="gh gi la"><img src="../Images/e7a2f301f29fe494522e59b1c0316165.png" data-original-src="https://miro.medium.com/v2/resize:fit:958/format:webp/1*eKVn75EDQGpx46C_YnR7Qg.png"/></div><figcaption class="jx jy gj gh gi jz ka bd b be z dk translated">Gatsby的浏览器默认预设。</figcaption></figure><p id="85b8" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">以上是盖茨比<a class="ae kz" href="https://babeljs.io/docs/en/plugins/" rel="noopener ugc nofollow" target="_blank">巴别塔插件</a>的预置。巴别塔是另一篇博文的主题，但基本上，它有助于为旧浏览器翻译或“移植”更现代的代码。</p><p id="7f33" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">简介:作为网络编程语言，JavaScript处于一个奇怪而独特的位置。因为如此多的网站依赖于它，并且许多网站很少维护，<a class="ae kz" href="https://www.cnn.com/2020/04/08/business/coronavirus-cobol-programmers-new-jersey-trnd/index.html" rel="noopener ugc nofollow" target="_blank">参见最近围绕COBOL的kerflufffle</a>，对JavaScript的任何更改都有可能破坏整个互联网。解决像<a class="ae kz" href="https://www.w3schools.com/js/js_datatypes.asp" rel="noopener ugc nofollow" target="_blank">“null”是一个对象</a>这样的问题是困难的，对JS的大多数改变实际上是“语法糖”，这意味着它们只是做JS已经可以用更长的代码做的事情的捷径。但是，即使这些“糖”检修，使目前的代码在一些浏览器中断。</p><p id="a8ed" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">那么上面的代码是什么意思呢？</p><p id="8ecd" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这意味着，如果巴别塔检测到，只要有超过1%的客户在使用浏览器，或者浏览器“没有死亡”，巴别塔将什么也不做。但是如果它看到一个旧的浏览器，它会尝试将你的代码转换到一个旧版本的JS中，这个版本的JS可以在它的浏览器中运行。</p><p id="dac0" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">然而，即使有了这些预设，我们的网站，一个帮助在家的人找到视频集体疗法的志愿者项目，在Internet Explorer 11上出现了错误，这是一个现在大多数人都反对的浏览器(被微软Edge所取代)，但从技术上来说，应该得到盖茨比的支持。</p><p id="cee0" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">那么，发生了什么，我们做了什么？</p><figure class="lb lc ld le gt ju gh gi paragraph-image"><div class="gh gi lf"><img src="../Images/228a3ca2e95774d403d3e3c384c30410.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*-NHrDpPtxGl3bN3O.jpg"/></div><figcaption class="jx jy gj gh gi jz ka bd b be z dk translated">这篇博客的专栏部分</figcaption></figure><p id="62bf" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我和杰出的程序员<a class="lg lh ep" href="https://medium.com/u/6212b5c2848e?source=post_page-----7aecedcb22ba--------------------------------" rel="noopener" target="_blank">马克·绍尔·乌特利</a>一起工作过，所以请雇佣他，尽管他已经有工作了，他是个天才，没有他我永远也不会过去。</p><p id="9510" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">首先，我们只是得到一个空白页面，没有加载任何东西。</p><p id="fa92" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">原来这是因为我们使用了“gatsby develop”而不是“gatsby build ”,这意味着在我们的开发环境中，我们不能用Babel正确地传输代码。</p><p id="1c8f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">幸运的是，通过将我们的代码“构建”到生产环境中，我们能够获得编译过的代码，但是我们仍然需要服务它！</p><p id="203f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们最终使用<a class="ae kz" href="https://www.npmjs.com/package/serve" rel="noopener ugc nofollow" target="_blank"> NPM服务包</a>和<a class="ae kz" href="http://ngrok.io/" rel="noopener ugc nofollow" target="_blank"> NGROK </a>从mac上为网站提供服务，并在PC上进行测试(这是一种测试IE11的简单方法，IE11在新电脑上默认是隐藏的，因为它很糟糕)。对于Gatsby的默认端口，结果是:</p><pre class="lb lc ld le gt li lj lk ll aw lm bi"><span id="b641" class="ln lo it lj b gy lp lq l lr ls">npx serve -s -p 8000 public</span></pre><p id="a9b2" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这允许我们用指定的端口提供Gatsby的静态公共目录。</p><p id="7191" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">然而，这导致了另一个错误。</p><p id="483a" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们得到的错误是:</p><pre class="lb lc ld le gt li lj lk ll aw lm bi"><span id="fd95" class="ln lo it lj b gy lp lq l lr ls">fetch is not defined.</span></pre><p id="2af0" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们的网站无法加载。</p><figure class="lb lc ld le gt ju gh gi paragraph-image"><div class="gh gi lt"><img src="../Images/3c423413324910c6391019637ce88a93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/0*-wtviaIOCynWX2QU.jpg"/></div><figcaption class="jx jy gj gh gi jz ka bd b be z dk translated">我认识古怪的盖蒂图片社的人。我们也很沮丧！</figcaption></figure><p id="917e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">原来这是《盖茨比》的一个已知错误，尽管《盖茨比》主要是为了制作类似静态的网站这一想法可以原谅它，但它似乎仍然是一个重大的错误。</p><p id="4088" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">马克和我尝试了很多事情，包括</p><ul class=""><li id="8e34" class="lu lv it kd b ke kf ki kj km lw kq lx ku ly ky lz ma mb mc bi translated">盖茨比的Polyfill-io插件</li><li id="aec6" class="lu lv it kd b ke md ki me km mf kq mg ku mh ky lz ma mb mc bi translated">对“Gatsby-node”文件进行更改，以更改W <a class="ae kz" href="https://webpack.js.org/" rel="noopener ugc nofollow" target="_blank"> ebpack </a>配置，使其显式地转换为ES5代码。</li><li id="6319" class="lu lv it kd b ke md ki me km mf kq mg ku mh ky lz ma mb mc bi translated">更改“package.json”或中的配置。babelrc”文件手动添加“IE 11”。</li></ul><p id="881f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">诸如此类。</p><p id="9e59" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">最终，我们所做的工作是马克的聪明才智、我们的同事马克·贝洛良好的代码编写实践的结合。</p><p id="c1f7" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们最终使用了<a class="ae kz" href="https://www.npmjs.com/package/isomorphic-fetch" rel="noopener ugc nofollow" target="_blank"> NPM同构获取包</a>以及来自<a class="ae kz" href="https://www.npmjs.com/package/es6-promise" rel="noopener ugc nofollow" target="_blank"> NPM es6-promise包</a>的“polyfill”函数。</p><p id="a9c1" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们用这个替换了原本应该在IE11中不工作的<a class="ae kz" href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API" rel="noopener ugc nofollow" target="_blank">原生浏览器“获取”API </a>，用一个“同构”获取，或者一个无论在哪里被调用都可以工作的获取。这和一个帮助传输<a class="ae kz" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="noopener ugc nofollow" target="_blank">“promises”</a>的函数一起，是JS后来增加的一个用于获取的功能，使我们的网站最终能够工作。</p><p id="f70c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这听起来很容易，但这可能是一场噩梦！在许多React代码库中，fetch在整个应用程序的不同位置使用，以从API端点获取数据！幸运的是，Mark Bello将所有的获取抽象为一个类！这意味着我们可以简单地转到“apiRequest”类(所有获取都是从该类导入的),并使用以下代码行:</p><pre class="lb lc ld le gt li lj lk ll aw lm bi"><span id="5794" class="ln lo it lj b gy lp lq l lr ls"><em class="mi">import</em> fetch <em class="mi">from</em> 'isomorphic-fetch';</span><span id="f3fd" class="ln lo it lj b gy mj lq l lr ls"><em class="mi">import</em> { polyfill } <em class="mi">from</em> "es6-promise";</span><span id="e710" class="ln lo it lj b gy mj lq l lr ls"><em class="mi">polyfill</em>()</span></pre><p id="76c0" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">就这样了！奇迹般地，它现在适用于IE11！多好的旅程啊！</p></div><div class="ab cl mk ml hx mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="im in io ip iq"><figure class="lb lc ld le gt ju gh gi paragraph-image"><div class="gh gi mr"><img src="../Images/358ddd7087e617018befd29c6620be9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1286/format:webp/1*35nsiEwTw-T0zqTlMRvm0g.png"/></div><figcaption class="jx jy gj gh gi jz ka bd b be z dk translated">温斯顿。</figcaption></figure><p id="e1e0" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">另一个旅行者是兔子温斯顿。通常我在这些博客中只关注小狗，但对温斯顿来说，它的每一小步都是一次旅程。</p><p id="e890" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">值得为IE11调试盖茨比来看看那些失败。</p><p id="3212" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">再见了，</p><p id="be72" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">网络信息中心(Network Information Center)ˌ网路界面卡(Network Interface Card)ˌ全国工业理事会(National Industrial Council)ˌ航行情报中心(Navigation Information Center)</p></div></div>    
</body>
</html>