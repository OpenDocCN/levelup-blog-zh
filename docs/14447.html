<html>
<head>
<title>4 Different Examples of the useState Hook in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React中使用状态钩子的4个不同例子</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/4-different-examples-of-the-usestate-hook-in-react-5504ce011a20?source=collection_archive---------23-----------------------#2022-11-28">https://levelup.gitconnected.com/4-different-examples-of-the-usestate-hook-in-react-5504ce011a20?source=collection_archive---------23-----------------------#2022-11-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/78165755afcdb6db0ea5ed574aa61bfd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Nr90Dbpz1AobB6FB"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">阿诺德·弗朗西斯卡在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="3ec3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lb lc ld le b">useState</code>是React中广泛使用的钩子。在React中开发的几乎每个组件都涉及状态。在这篇文章中，我将向你展示<code class="fe lb lc ld le b">useState</code>钩子的四个不同的用例。</p><p id="627a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我假设你对反应和状态有基本的了解。如果没有，请访问<a class="ae kc" href="https://reactjs.org/docs/getting-started.html" rel="noopener ugc nofollow" target="_blank">文档</a>开始。</p><h1 id="220c" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">初始化状态</h1><p id="53ad" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">作为提醒，我将回顾如何初始化状态。首先，导入<code class="fe lb lc ld le b">useState</code>，然后用下面的方式声明你的状态变量。</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="2093" class="mq lg iq le b gy mr ms l mt mu">import { useState } from 'react'</span><span id="59ef" class="mq lg iq le b gy mv ms l mt mu">const [name, setName] = useState('kunal')</span></pre><p id="9317" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lb lc ld le b">setName</code>是用于设置状态的功能，即<code class="fe lb lc ld le b">name</code>。它有一个默认值。</p><p id="81b7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">不要直接设置状态，总是使用函数。看<a class="ae kc" href="https://medium.com/analytics-vidhya/why-we-should-never-update-react-state-directly-c1b794fac59b" rel="noopener">这个</a>就知道为什么了。</p></div><div class="ab cl mw mx hu my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="ij ik il im in"><p id="7e7f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，我们来看一些用例。</p><h2 id="6db2" class="mq lg iq bd lh nd ne dn ll nf ng dp lp ko nh ni lt ks nj nk lx kw nl nm mb nn bi translated">1.条件渲染</h2><p id="1f32" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">假设您的应用程序有一个用户，您希望根据该用户是否是管理员来显示一些内容。您可以通过条件渲染来实现这一点。</p><p id="95b9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这个例子中，我们有一组所有用户都能看到的记录。但是，管理员用户可以选择编辑每条记录。首先，将用户定义为state。</p><pre class="mi mj mk ml gt mm le no bn np nq bi"><span id="05db" class="nr lg iq le b be ns nt l nu mu">const [user, setUser] = useState({<br/>    name: 'kunal',<br/>    isAdmin: false<br/>})  </span></pre><p id="2735" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，呈现记录。<code class="fe lb lc ld le b">tableData</code>有要显示的记录。</p><pre class="mi mj mk ml gt mm le no bn np nq bi"><span id="76c4" class="nr lg iq le b be ns nt l nu mu">return (<br/>  &lt;div&gt;<br/>      &lt;table&gt;<br/>          &lt;tr&gt;<br/>              &lt;th&gt;id&lt;/th&gt;<br/>              &lt;th&gt;First Name&lt;/th&gt;<br/>              &lt;th&gt;City&lt;/th&gt;<br/>              {user.isAdmin &amp;&amp;  &lt;th&gt;Action&lt;/th&gt;}<br/>          &lt;/tr&gt;<br/>          {tableData.map(data =&gt; (<br/>              &lt;tr&gt;<br/>                  &lt;td&gt; {data.id} &lt;/td&gt;<br/>                  &lt;td&gt; {data.first_name} &lt;/td&gt;<br/>                  &lt;td&gt; {data.city} &lt;/td&gt;<br/>                  {user.isAdmin &amp;&amp;  <br/>                      &lt;td&gt;<br/>                          &lt;button&gt; Edit &lt;/button&gt;<br/>                      &lt;/td&gt;<br/>                  }<br/><br/>              &lt;/tr&gt;<br/>          ))}<br/>      &lt;/table&gt;<br/>  &lt;/div&gt;<br/>)</span></pre><p id="7832" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这里，普通用户只能看到前三列。但是，管理员用户还会看到包含编辑按钮的第4列。</p><p id="1143" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果<code class="fe lb lc ld le b">isAdmin</code>属性是<code class="fe lb lc ld le b">false</code>，那么该列将不可见。</p><p id="2a8a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们再举一个例子。您有两个表，并且您只想一次呈现一个。</p><p id="4951" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有一个状态<code class="fe lb lc ld le b">toggleTable</code>来决定显示哪个表。您可以通过点击按钮在表格之间切换。</p><pre class="mi mj mk ml gt mm le no bn np nq bi"><span id="cabe" class="nr lg iq le b be ns nt l nu mu">const [toggleTables, setToggleTables] = useState(false)</span></pre><p id="26bc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这两个表显示不同的数据，并且可以通过使用条件表达式根据状态值来呈现。</p><pre class="mi mj mk ml gt mm le no bn np nq bi"><span id="7b7c" class="nr lg iq le b be ns nt l nu mu">return (<br/>    &lt;div&gt;<br/>        &lt;div&gt;<br/>            &lt;button onClick={handleClick} &gt;<br/>                Show the other table<br/>            &lt;/button&gt;<br/>        &lt;/div&gt;<br/>        &lt;div&gt;<br/>            {<br/>                toggleTables ? <br/>            <br/>                    &lt;table&gt;<br/>                        &lt;tr&gt;<br/>                            &lt;th&gt;id&lt;/th&gt;<br/>                            &lt;th&gt;First Name&lt;/th&gt;<br/>                            &lt;th&gt;Last Name&lt;/th&gt;<br/>                            &lt;th&gt;City&lt;/th&gt;<br/>                        &lt;/tr&gt;<br/>                        {tableData1.map(data =&gt; (<br/>                            &lt;tr&gt;<br/>                                &lt;td&gt; {data.id} &lt;/td&gt;<br/>                                &lt;td&gt; {data.first_name} &lt;/td&gt;<br/>                                &lt;td&gt; {data.last_name} &lt;/td&gt;<br/>                                &lt;td&gt; {data.city} &lt;/td&gt;<br/><br/>                            &lt;/tr&gt;<br/>                        ))}<br/>                    &lt;/table&gt;<br/>                :  <br/>                    &lt;table&gt;<br/>                        &lt;tr&gt;<br/>                            &lt;th&gt;id&lt;/th&gt;<br/>                            &lt;th&gt;First Name&lt;/th&gt;<br/>                            &lt;th&gt;City&lt;/th&gt;<br/>                            &lt;th&gt;Bitcoin Address&lt;/th&gt;<br/>                            &lt;th&gt;Credit Card&lt;/th&gt;<br/>                            &lt;th&gt;Card Type&lt;/th&gt;<br/>                            &lt;th&gt;Currency&lt;/th&gt;<br/>                        &lt;/tr&gt;<br/>                        {tableData2.map(data =&gt; (<br/>                            &lt;tr&gt;<br/>                                &lt;td&gt; {data.id} &lt;/td&gt;<br/>                                &lt;td&gt; {data.first_name} &lt;/td&gt;<br/>                                &lt;td&gt; {data.city} &lt;/td&gt;<br/>                                &lt;td&gt; {data.bitcoin_address} &lt;/td&gt;<br/>                                &lt;td&gt; {data.credit_card} &lt;/td&gt;<br/>                                &lt;td&gt; {data.card_type} &lt;/td&gt;<br/>                                &lt;td&gt; {data.currency} &lt;/td&gt;<br/>                            &lt;/tr&gt;<br/>                        ))}<br/>                    &lt;/table&gt;<br/>            } <br/>        &lt;/div&gt;                 <br/>    &lt;/div&gt;<br/>  )</span></pre><p id="6905" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这里是我们改变状态的<code class="fe lb lc ld le b">handleClick</code>函数。</p><pre class="mi mj mk ml gt mm le no bn np nq bi"><span id="5ab1" class="nr lg iq le b be ns nt l nu mu">const handleClick = () =&gt; {<br/>    setToggleTables(!toggleTables);<br/>}</span></pre><h2 id="debb" class="mq lg iq bd lh nd ne dn ll nf ng dp lp ko nh ni lt ks nj nk lx kw nl nm mb nn bi translated">2.计数器</h2><p id="df9d" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">状态也可用于实现计数器。这包括跟踪以前的状态。首先，将count作为state，默认值为0。</p><pre class="mi mj mk ml gt mm le no bn np nq bi"><span id="52fd" class="nr lg iq le b be ns nt l nu mu">const [count, setCount] = useState(0)  </span></pre><p id="ae48" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，渲染相同的，有两个按钮用<code class="fe lb lc ld le b">onClick</code>处理程序递增和递减。</p><pre class="mi mj mk ml gt mm le no bn np nq bi"><span id="af5f" class="nr lg iq le b be ns nt l nu mu">&lt;h2&gt; {count} &lt;/h2&gt;<br/>&lt;div&gt;<br/>    &lt;button onClick={() =&gt; { setCounter(-1) }} &gt; Decrement &lt;/button&gt;<br/>    &lt;button onClick={() =&gt; { setCounter(1) }}&gt; Increment &lt;/button&gt;<br/>&lt;/div&gt;</span></pre><p id="b75a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">实现处理函数。</p><pre class="mi mj mk ml gt mm le no bn np nq bi"><span id="ef20" class="nr lg iq le b be ns nt l nu mu">function setCounter(value) {<br/>    setCount(count+value);<br/>}</span></pre><p id="feac" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们也有一个输入字段来控制计数器增加或减少多少。</p><pre class="mi mj mk ml gt mm le no bn np nq bi"><span id="4a3d" class="nr lg iq le b be ns nt l nu mu">&lt;div&gt;<br/>    &lt;form onSubmit={handleSubmit}&gt;<br/>        &lt;label&gt; Enter a value to increment by &lt;/label&gt;<br/>        &lt;input type='number' /&gt;<br/>        &lt;button type='submit' &gt; Submit &lt;/button&gt;<br/>    &lt;/form&gt;<br/>&lt;/div&gt;</span></pre><p id="4ef7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">实现处理函数。使用相同的<code class="fe lb lc ld le b">setCounter</code>功能，根据用户给定的值设置状态值。</p><pre class="mi mj mk ml gt mm le no bn np nq bi"><span id="f40d" class="nr lg iq le b be ns nt l nu mu">const handleSubmit = (event) =&gt; {<br/>    event.preventDefault();<br/>    setCounter(parseInt(event.target[0].value));<br/>}</span></pre><p id="c6da" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">提交表单时使用<code class="fe lb lc ld le b">event.preventDefault()</code>。点击阅读更多相关信息<a class="ae kc" href="https://www.w3schools.com/jsref/event_preventdefault.asp" rel="noopener ugc nofollow" target="_blank">。</a></p><h2 id="0e09" class="mq lg iq bd lh nd ne dn ll nf ng dp lp ko nh ni lt ks nj nk lx kw nl nm mb nn bi translated">3.表单处理</h2><p id="4497" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">表单处理是<code class="fe lb lc ld le b">useState</code>钩子的一个非常重要的用例。你在任何地方都会遇到这种情况。</p><p id="c930" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们有一个具有以下字段的基本表单。根据需要填写每个字段。</p><pre class="mi mj mk ml gt mm le no bn np nq bi"><span id="4cfd" class="nr lg iq le b be ns nt l nu mu"> &lt;form onSubmit={handleSubmit}&gt;<br/>        &lt;input placeholder='Enter name' <br/>               onChange={(e) =&gt; {setName(e.target.value)}} <br/>               value={name} required/&gt;        <br/>        &lt;br/&gt;<br/>        &lt;input type='email' placeholder='Enter email' value={email}<br/>                 onChange={(e) =&gt; {setEmail(e.target.value)}} required/&gt;<br/>        &lt;br/&gt;<br/>        &lt;input type='password' placeholder='Enter password' value={password}<br/>                 onChange={(e) =&gt; {setPassword(e.target.value)}} required/&gt;<br/>        &lt;br/&gt;<br/>        &lt;label&gt;Gender&lt;/label&gt;<br/>        &lt;select onChange={(e) =&gt; {setGender(e.target.value)}} value={gender}<br/>                required&gt;<br/>            &lt;option&gt;Male&lt;/option&gt;<br/>            &lt;option&gt;Female&lt;/option&gt;<br/>        &lt;/select&gt;<br/>        &lt;br/&gt;<br/><br/>        &lt;button type='submit'&gt;Submit&lt;/button&gt;<br/><br/>&lt;/form&gt;</span></pre><p id="ec4c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为同一定义以下状态变量。</p><pre class="mi mj mk ml gt mm le no bn np nq bi"><span id="a31f" class="nr lg iq le b be ns nt l nu mu">const [name, setName] = useState('')<br/>const [email, setEmail] = useState('')<br/>const [password, setPassword] = useState('')<br/>const [gender, setGender] = useState('')</span></pre><p id="e65f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这些状态变量保存表单字段的值。您希望它们随着用户输入而更新。这是使用input元素的<code class="fe lb lc ld le b">onChange</code>属性完成的。</p><p id="5db7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在实时应用程序中，表单提交通常需要一些时间。因此，向用户显示表单正在被提交是很重要的。你可以使用另一个状态变量。</p><pre class="mi mj mk ml gt mm le no bn np nq bi"><span id="11f2" class="nr lg iq le b be ns nt l nu mu">const [isSubmitting, setIsSubmitting] = useState(false)</span></pre><p id="1a72" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">点击提交按钮后，将<code class="fe lb lc ld le b">isSubmitting</code>置为<code class="fe lb lc ld le b">true</code>，提交后再置为<code class="fe lb lc ld le b">false</code>。同时，向用户显示一条消息。在这里，没有什么会阻碍表单提交，所以您看不到消息。</p><p id="d980" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们模拟一下这种行为。</p><pre class="mi mj mk ml gt mm le no bn np nq bi"><span id="2026" class="nr lg iq le b be ns nt l nu mu">const handleSubmit = (event) =&gt; {<br/>    event.preventDefault();<br/>    <br/>    setIsSubmitting(true)<br/>    setTimeout(() =&gt; {<br/>        setIsSubmitting(false);<br/>        alert("Form submission successful")<br/>    }, 3000);<br/>}</span></pre><p id="a1a1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用<code class="fe lb lc ld le b">setTimeout</code>在表单提交前等待几秒钟。并在提交按钮的正下方显示一条消息。</p><pre class="mi mj mk ml gt mm le no bn np nq bi"><span id="c5b2" class="nr lg iq le b be ns nt l nu mu">{isSubmitting &amp;&amp; 'Submitting...'}</span></pre></div><div class="ab cl mw mx hu my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="ij ik il im in"><h2 id="144e" class="mq lg iq bd lh nd ne dn ll nf ng dp lp ko nh ni lt ks nj nk lx kw nl nm mb nn bi translated">4.待办事项列表</h2><p id="a557" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated"><code class="fe lb lc ld le b">useState</code>钩子的一个最简单的用例是一个简单的待办事项列表。我将向您展示如何实现添加、更新和删除功能。</p><p id="d525" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">首先，有一个输入字段和一个用于添加任务的按钮。将用户输入保持在一个状态。</p><pre class="mi mj mk ml gt mm le no bn np nq bi"><span id="3dae" class="nr lg iq le b be ns nt l nu mu">const [taskInput, setTaskInput] = useState('')</span></pre><pre class="nv mm le no bn np nq bi"><span id="a971" class="nr lg iq le b be ns nt l nu mu">&lt;input type='text' placeholder="Name your task" value={taskInput}<br/>                    onChange={(e) =&gt; { setTaskInput(e.target.value) }}/&gt;<br/>&lt;button onClick={handleSubmit} &gt;Add item&lt;/button&gt;</span></pre><p id="5502" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，有一个状态来保存整个待办事项列表。</p><pre class="mi mj mk ml gt mm le no bn np nq bi"><span id="062a" class="nr lg iq le b be ns nt l nu mu">const [todoList, setTodoList] = useState([])</span></pre><p id="dafc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，实现添加按钮的<code class="fe lb lc ld le b">handleClick</code>功能。</p><pre class="mi mj mk ml gt mm le no bn np nq bi"><span id="be72" class="nr lg iq le b be ns nt l nu mu">const handleSubmit = () =&gt; {<br/>    const newTodo = {<br/>        id: new Date().getTime(),<br/>        task: taskInput,<br/>        updateFlag: false<br/>    }<br/>    setTodoList([...todoList, newTodo]);<br/>    setTaskInput('')<br/>}</span></pre><p id="9c0b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">创建一个新的todo对象，将当前时间戳作为它的<code class="fe lb lc ld le b">id</code>。<code class="fe lb lc ld le b">updateFlag</code>字段确定当前项目是否正在更新。现在，显示带有更新和删除选项的列表。</p><pre class="mi mj mk ml gt mm le no bn np nq bi"><span id="0a56" class="nr lg iq le b be ns nt l nu mu">&lt;ul&gt;<br/>  {todoList.map(todo =&gt; (<br/>      &lt;li key={todo.id}&gt;<br/>          {todo.task}<br/>          &lt;button onClick={() =&gt; {handleUpdate(todo.id)}}&gt;Update&lt;/button&gt;<br/>          &lt;button onClick={() =&gt; {handleDelete(todo.id)}}&gt;Delete&lt;/button&gt;<br/>      &lt;/li&gt;<br/>  ))}<br/>&lt;/ul&gt;</span></pre><p id="8707" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于<code class="fe lb lc ld le b">handleDelete</code>，使用filter方法从基于<code class="fe lb lc ld le b">id</code>的状态数组中移除一个元素(保持其唯一性非常重要)。</p><pre class="mi mj mk ml gt mm le no bn np nq bi"><span id="511c" class="nr lg iq le b be ns nt l nu mu">function handleDelete(id) {<br/>     setTodoList(todoList.filter(todo =&gt;  todo.id !== id));<br/>}</span></pre><p id="93c4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了更新元素，用户需要一个输入字段来输入更新后的值。因此，使用<code class="fe lb lc ld le b">updateFlag</code>在显示和更新项目之间切换。对于列表中的每个项目，请执行以下操作:</p><pre class="mi mj mk ml gt mm le no bn np nq bi"><span id="46e5" class="nr lg iq le b be ns nt l nu mu">{todo.updateFlag == true<br/>    ? &lt;input type='text' defaultValue={todo.task} <br/>            onChange={(e) =&gt; { setUpdateTaskInput(e.target.value) }}/&gt;<br/>    : todo.task<br/>}</span></pre><p id="0b29" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，使用另一个状态变量来存储更新后的输入值。</p><pre class="mi mj mk ml gt mm le no bn np nq bi"><span id="ffa4" class="nr lg iq le b be ns nt l nu mu">const [updateTaskInput, setUpdateTaskInput] = useState()</span></pre><p id="c54a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果<code class="fe lb lc ld le b">updateFlag</code>为真，该项目将显示一个表单以输入新值。</p><p id="1934" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，实现<code class="fe lb lc ld le b">handleUpdate</code>函数。该函数将<code class="fe lb lc ld le b">todo</code>的<code class="fe lb lc ld le b">id</code>作为参数。如果更新后的值为空，则返回。</p><pre class="mi mj mk ml gt mm le no bn np nq bi"><span id="1d04" class="nr lg iq le b be ns nt l nu mu">function handleUpdate(id) {<br/>    if(updateTaskInput == '') return;<br/>          ...<br/>}</span></pre><p id="ccc3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这里的更新包括更改对象的单个字段。首先，使用<code class="fe lb lc ld le b">id</code>从列表中获取元素，并创建另一个过滤掉该元素的列表。</p><pre class="mi mj mk ml gt mm le no bn np nq bi"><span id="c654" class="nr lg iq le b be ns nt l nu mu">const todo = todoList.find(todo =&gt; todo.id === id)<br/>const updatedList = todoList.filter(todo =&gt;  todo.id !== id)</span></pre><p id="8253" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，如果<code class="fe lb lc ld le b">updateFlag</code>为假，将其设置为真以显示输入字段。</p><pre class="mi mj mk ml gt mm le no bn np nq bi"><span id="e831" class="nr lg iq le b be ns nt l nu mu">if(todo.updateFlag == false) {<br/>    updatedList.push({...todo, updateFlag: true})<br/>    setTodoList(updatedList)<br/>    return;<br/>}</span></pre><p id="7886" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，输入新值后，用户再次单击update按钮。在相同的函数中更新任务名称，但条件相反。</p><pre class="mi mj mk ml gt mm le no bn np nq bi"><span id="4b88" class="nr lg iq le b be ns nt l nu mu">updatedList.push({...todo, <br/>    task: updateTaskInput,<br/>    updateFlag: false<br/>})<br/><br/>setTodoList(updatedList);<br/><br/>setUpdateTaskInput('') </span></pre></div><div class="ab cl mw mx hu my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="ij ik il im in"><p id="f1dd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你可以在我的<a class="ae kc" href="https://github.com/KunalN25/usestate-examples" rel="noopener ugc nofollow" target="_blank"> Git </a> repo里找到代码。</p><h1 id="f97d" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">结论</h1><p id="7cdc" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">在这篇文章中，我向你展示了使用<code class="fe lb lc ld le b">useState</code>钩子的不同例子。在React项目中，您会经常遇到前三个用例。</p><p id="507f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第四个是一个非常常见的例子，它向您展示了如何在不同的场景中处理状态更新。如果有任何不正确的地方，一定要让我知道。</p><p id="9dc7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果您无法理解内容或对解释不满意，请在下面评论您的想法。新想法总是受欢迎的！如果你喜欢这篇文章，请鼓掌。<strong class="kf ir">订阅</strong>和<strong class="kf ir">关注</strong>我的每周内容。如果你想讨论什么，请随时在LinkedIn上给我发信息。到那时，再见！</p></div><div class="ab cl mw mx hu my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="ij ik il im in"><h1 id="dca5" class="lf lg iq bd lh li nw lk ll lm nx lo lp lq ny ls lt lu nz lw lx ly oa ma mb mc bi translated">分级编码</h1><p id="8a66" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">感谢您成为我们社区的一员！在你离开之前:</p><ul class=""><li id="9033" class="ob oc iq kf b kg kh kk kl ko od ks oe kw of la og oh oi oj bi translated">👏为故事鼓掌，跟着作者走👉</li><li id="b957" class="ob oc iq kf b kg ok kk ol ko om ks on kw oo la og oh oi oj bi translated">📰查看<a class="ae kc" href="https://levelup.gitconnected.com/?utm_source=pub&amp;utm_medium=post" rel="noopener ugc nofollow" target="_blank">升级编码出版物</a>中的更多内容</li><li id="ddfd" class="ob oc iq kf b kg ok kk ol ko om ks on kw oo la og oh oi oj bi translated">🔔关注我们:<a class="ae kc" href="https://twitter.com/gitconnected" rel="noopener ugc nofollow" target="_blank">Twitter</a>|<a class="ae kc" href="https://www.linkedin.com/company/gitconnected" rel="noopener ugc nofollow" target="_blank">LinkedIn</a>|<a class="ae kc" href="https://newsletter.levelup.dev" rel="noopener ugc nofollow" target="_blank">时事通讯</a></li></ul><p id="380c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">🚀👉<a class="ae kc" href="https://jobs.levelup.dev/talent/welcome?referral=true" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">加入升级人才集体，找到一份惊艳的工作</strong> </a></p></div></div>    
</body>
</html>