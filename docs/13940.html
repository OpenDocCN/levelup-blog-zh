<html>
<head>
<title>Start building your first GitLab CI Pipeline in under 5 minutes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在5分钟内开始构建您的第一个GitLab CI管道</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/start-building-your-first-gitlab-ci-pipeline-in-under-5-minutes-793fe161c071?source=collection_archive---------10-----------------------#2022-10-18">https://levelup.gitconnected.com/start-building-your-first-gitlab-ci-pipeline-in-under-5-minutes-793fe161c071?source=collection_archive---------10-----------------------#2022-10-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/b77bf4ec1e3fa97ff354f10fed3ec46a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ViBbxdA3Vpj69Knm.png"/></div></div></figure><p id="0b78" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">CI或持续集成是一种软件开发实践，其中运行自动化测试和构建。</p><p id="8433" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">开发人员每天都会推送代码变更，一天多次。对于每次向存储库的推送，您可以创建一组脚本来自动构建和测试您的应用程序。这些脚本有助于减少您在应用程序中引入错误的机会。</p><p id="70c3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">今天，我将撰写一篇关于如何为前端应用程序编写GitLab CI的简明教程，其中包含3个基本步骤:</p><ul class=""><li id="6328" class="kw kx iq ka b kb kc kf kg kj ky kn kz kr la kv lb lc ld le bi translated">安装依赖项</li><li id="a5f1" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">构建包</li><li id="2056" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">运行单元测试</li></ul><p id="f2e6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">首先，让我们创建<code class="fe lk ll lm ln b">.gitlab-ci.yml</code>文件，并为配置项和工作流输入一个图像</p><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div class="gh gi lo"><img src="../Images/68fda8933853acbd7677ca373cceec47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1030/format:webp/1*pZ6aeTztAUQGnWF7rKDlLg.png"/></div></figure><p id="1787" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe lk ll lm ln b">image</code>关键字是Docker执行器用来运行CI/CD作业的Docker映像的名称。在本教程中，我将<code class="fe lk ll lm ln b">image</code>设置为<code class="fe lk ll lm ln b">node:16</code>，这意味着项目将在节点版本16上运行。</p><p id="1f62" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">而<code class="fe lk ll lm ln b">workflow</code>是控制何时创建管道。我设置了规则，所以只有当用户提交或创建合并请求时才创建管道(但不是在<code class="fe lk ll lm ln b">main</code>分支上)</p><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div class="gh gi lo"><img src="../Images/d3c0a475d50cd013e4c4d01fa154df64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1030/format:webp/1*IkaN9pM9HXyhvMWiB4BpCA.png"/></div></figure><p id="70d0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这是<code class="fe lk ll lm ln b">.gitlab-ci.yml</code>文件的其余部分。后面我会解释<code class="fe lk ll lm ln b">cache</code>部分。首先，我们必须为我们的管道定义3个直接的阶段。</p><p id="add5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">对于每个阶段，我们必须定义<code class="fe lk ll lm ln b">stage</code>和<code class="fe lk ll lm ln b">script</code>。如果你熟悉<code class="fe lk ll lm ln b">yarn</code>，这些非常容易理解:</p><ul class=""><li id="2906" class="kw kx iq ka b kb kc kf kg kj ky kn kz kr la kv lb lc ld le bi translated"><code class="fe lk ll lm ln b">yarn</code>是安装需要的依赖项</li><li id="be24" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated"><code class="fe lk ll lm ln b">yarn build</code>是构建到项目</li><li id="40b9" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated"><code class="fe lk ll lm ln b">yarn test:jest</code>我的脚本要用我的标志运行<code class="fe lk ll lm ln b">jest</code>吗</li></ul><p id="9db7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe lk ll lm ln b">interruptible</code>允许用户中断阶段。好了，我们现在完成了，让我们看看管道是否运行正常</p><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lt"><img src="../Images/1703213c48b8b257bdfa42bd7fdecc4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VbJ45aBMbcC6vaMH4QtCVA.png"/></div></div></figure><p id="76db" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">不用Vercel就不要烦<code class="fe lk ll lm ln b">Vercel</code>这个工作了。</p><p id="8cf9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在为了理解上面的<code class="fe lk ll lm ln b">cache</code>部分是如何工作的，让我们看看<code class="fe lk ll lm ln b">install_dependencies</code>作业</p><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div class="gh gi lu"><img src="../Images/e37151ce3119ab1e53f7e5187ede85ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:678/format:webp/1*hePKBpDSU-6SVd_UgrRQYQ.png"/></div></figure><p id="de3a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">差不多要19秒才能完成。但这只是第一次，通过为<code class="fe lk ll lm ln b">node_modules</code>定义<code class="fe lk ll lm ln b">cache</code></p><p id="2e08" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这是为后来的管道后的结果:</p><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div class="gh gi lv"><img src="../Images/711ed42f86f64a45dcadc4345b6686ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:658/format:webp/1*rEAg0iD3dP1o37xBDxvaHQ.png"/></div></figure><p id="ae0e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">不到一秒钟，很了不起吧？如果您添加了新的依赖项，请不要担心，<code class="fe lk ll lm ln b">install-dependencies</code>任务会解决这个问题。</p><p id="b4a9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这只是一个关于如何编写GitLab CI的基本教程，您可以添加更多的作业、更多的规则或其他图像，只需找到编写CI管道的最佳方式，您可以使用<a class="ae lw" href="https://docs.gitlab.com/ee/ci/yaml/" rel="noopener ugc nofollow" target="_blank">文档</a>进行深入挖掘</p><h1 id="e192" class="lx ly iq bd lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu bi translated">遗言</h1><p id="bcfa" class="pw-post-body-paragraph jy jz iq ka b kb mv kd ke kf mw kh ki kj mx kl km kn my kp kq kr mz kt ku kv ij bi translated">虽然我的内容对每个人都是免费的，但是如果你觉得这篇文章有帮助，<a class="ae lw" href="https://www.buymeacoffee.com/kylele19" rel="noopener ugc nofollow" target="_blank">你可以在这里给我买杯咖啡</a></p></div></div>    
</body>
</html>