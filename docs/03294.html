<html>
<head>
<title>Plain JavaScript of Lodash Array Methods</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Lodash数组方法的普通JavaScript</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/plain-javascript-of-lodash-array-methods-2ab6a21a1f57?source=collection_archive---------9-----------------------#2020-04-30">https://levelup.gitconnected.com/plain-javascript-of-lodash-array-methods-2ab6a21a1f57?source=collection_archive---------9-----------------------#2020-04-30</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/ca03f61875c497ce8b5e57768e9b28d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*LQtdCYRAqvTs3Kwf"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">照片由<a class="ae kf" href="https://unsplash.com/@thedavis42?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">乔丹·戴维斯</a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="b695" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Lodash是一个非常有用的工具库，让我们可以轻松地处理对象和数组。</p><p id="7fcc" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然而，现在JavaScript标准库正在赶上诸如Lodash之类的库，我们可以用简单的方法实现许多功能。</p><p id="be7f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本文中，我们将看看如何用普通JavaScript实现一些Lodash方法。</p><h1 id="cdc1" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">dropRightWhile</h1><p id="458b" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated"><code class="fe mh mi mj mk b">dropRightWhile</code>函数让我们从右边开始创建数组的一部分，直到满足一个条件。条件由回调决定。</p><p id="362a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以用如下的普通JavaScript实现它:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="8a78" class="mt lf it mk b gy mu mv l mw mx">const dropRightWhile = (arr, condition) =&gt; {<br/>  const newArr = [];<br/>  for (let i = arr.length - 1; i &gt;= 0; i--) {<br/>    if (condition(arr[i])) {<br/>      return newArr;<br/>    }<br/>    newArr.push(arr[i]);<br/>  }<br/>  return newArr;<br/>}</span></pre><p id="d2b4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在上面的代码中，我们有一个反向循环的<code class="fe mh mi mj mk b">for</code>循环。如果将一个数组条目作为值的<code class="fe mh mi mj mk b">condition</code>函数返回<code class="fe mh mi mj mk b">true</code>，那么我们返回<code class="fe mh mi mj mk b">newArr</code>，它有我们想要保留的被推入数组的条目。</p><p id="7401" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果循环结束而没有返回<code class="fe mh mi mj mk b">newArr</code>，那么它也将返回<code class="fe mh mi mj mk b">newArr</code>。</p><p id="823f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因此，当我们有:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="d793" class="mt lf it mk b gy mu mv l mw mx">const arr = [1, 2, 3]<br/>const dropped = dropRightWhile(arr, (a) =&gt; a === 2)</span></pre><p id="5340" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们得到<code class="fe mh mi mj mk b">dropped</code>是<code class="fe mh mi mj mk b">[3]</code>，因为我们在满足回调条件时停止了函数，也就是当数组条目为2时。</p><p id="ddd2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">dropRightWhile</code>也可以带键名的字符串，在返回切片数组之前检查它是否是<code class="fe mh mi mj mk b">true</code>。</p><p id="488e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以用下面的代码轻松地添加检查:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="d28a" class="mt lf it mk b gy mu mv l mw mx">const dropWhile = (arr, key) =&gt; {<br/>  const newArr = [];<br/>  for (let i = arr.length - 1; i &gt;= 0; i--) {<br/>    if (arr[i][key]) {<br/>      return newArr;<br/>    }<br/>    newArr.push(arr[i]);<br/>  }<br/>  return newArr;<br/>}</span></pre><p id="12a0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后当我们有了下面的数组并如下调用它:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="c420" class="mt lf it mk b gy mu mv l mw mx">const arr = [{<br/>    name: 'foo',<br/>    active: false<br/>  },<br/>  {<br/>    name: 'bar',<br/>    active: true<br/>  },<br/>  {<br/>    name: 'baz',<br/>    active: false<br/>  }<br/>]<br/>const dropped = dropRightWhile(arr, 'active');</span></pre><p id="f09e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们得到:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="e0f4" class="mt lf it mk b gy mu mv l mw mx">[<br/>  {<br/>    "name": "foo",<br/>    "active": false<br/>  }<br/>]</span></pre><p id="6cef" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因为我们返回数组，我们从右边开始推送条目，直到<code class="fe mh mi mj mk b">active</code>为<code class="fe mh mi mj mk b">true</code>。</p><h1 id="b704" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">下降时间</h1><p id="9c83" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated"><code class="fe mh mi mj mk b">dropWhile</code>是<code class="fe mh mi mj mk b">dropRightWhile</code>的反义词。它通过从头开始并将这些项推入一个新的数组来获取数组的一部分，并在循环结束时或回调中的条件返回时返回它<code class="fe mh mi mj mk b">true</code>。</p><p id="5aa7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">像<code class="fe mh mi mj mk b">dropRightWhile</code>一样，回调使用一个数组条目。例如，我们可以自己实现它，如下所示:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="2614" class="mt lf it mk b gy mu mv l mw mx">const dropWhile = (arr, condition) =&gt; {<br/>  const newArr = [];<br/>  for (const a of arr) {<br/>    if (condition(a)) {<br/>      return newArr;<br/>    }<br/>    newArr.push(a);<br/>  }<br/>  return newArr;<br/>}</span></pre><p id="ed45" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在上面的代码中，我们使用了<code class="fe mh mi mj mk b">for...of</code>循环而不是常规的<code class="fe mh mi mj mk b">for</code>循环，因为我们只是通过<code class="fe mh mi mj mk b">arr</code>向前循环，这可以通过<code class="fe mh mi mj mk b">for</code>循环轻松完成。</p><p id="4a6c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">dropWhile</code>也可以在返回切片数组之前，取一个带有键名的字符串来检查它是否是<code class="fe mh mi mj mk b">true</code>。</p><p id="e60f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以用下面的代码轻松地添加检查:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="f3af" class="mt lf it mk b gy mu mv l mw mx">const dropWhile = (arr, key) =&gt; {<br/>  const newArr = [];<br/>  for (const a of arr) {<br/>    if (a[key]) {<br/>      return newArr;<br/>    }<br/>    newArr.push(a);<br/>  }<br/>  return newArr;<br/>}</span></pre><p id="da42" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后当我们有了下面的数组并如下调用它:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="ff86" class="mt lf it mk b gy mu mv l mw mx">const arr = [{<br/>    name: 'foo',<br/>    active: false<br/>  },<br/>  {<br/>    name: 'bar',<br/>    active: true<br/>  },<br/>  {<br/>    name: 'baz',<br/>    active: false<br/>  }<br/>]<br/>const dropped = dropWhile(arr, 'active');</span></pre><p id="11fe" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们得到:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="4e1e" class="mt lf it mk b gy mu mv l mw mx">[<br/>  {<br/>    "name": "foo",<br/>    "active": false<br/>  }<br/>]</span></pre><p id="f80d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因为我们返回数组，我们将条目放入其中，直到<code class="fe mh mi mj mk b">active</code>为<code class="fe mh mi mj mk b">true</code>。</p><figure class="ml mm mn mo gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi my"><img src="../Images/8c31e05b92d8eb6c860cdf40c6208835.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tNtYPRjmiW6pfu5C"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated"><a class="ae kf" href="https://unsplash.com/@katejoie?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Kate Joie </a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><h1 id="8828" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">充满</h1><p id="7458" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated"><code class="fe mh mi mj mk b">fill</code>方法通过用我们提供的从起始索引开始到结束索引结束的值替换原始数组中的值，用从起始索引开始但不到结束索引的值填充数组的元素。</p><p id="c84e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以如下实现<code class="fe mh mi mj mk b">fill</code>:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="7b2d" class="mt lf it mk b gy mu mv l mw mx">const fill = (arr, value, start, end) =&gt; arr.fill(valu, start, end)</span></pre><p id="2d3b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在上面的代码中，我们有4个像Lodash的<code class="fe mh mi mj mk b">fill</code>方法一样的参数，它们是原始数组的<code class="fe mh mi mj mk b">arr</code>，<code class="fe mh mi mj mk b">value</code>是我们想要填充数组的值。<code class="fe mh mi mj mk b">start</code>，这是我们要替换的数组条目的起始索引，以及<code class="fe mh mi mj mk b">end</code>，这是我们要替换的数组的结束索引。</p><p id="4334" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">那么当我们调用<code class="fe mh mi mj mk b">fill</code>时如下:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="cd91" class="mt lf it mk b gy mu mv l mw mx">const filled = fill([1, 2, 3, 4, 5], 8, 0, 3);</span></pre><p id="1d63" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们得出<code class="fe mh mi mj mk b">filled</code>是:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="be92" class="mt lf it mk b gy mu mv l mw mx">[8, 8, 8, 4, 5]</span></pre><p id="fe65" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">正如我们所见，数组实例的<code class="fe mh mi mj mk b">fill</code>方法与Lodash的<code class="fe mh mi mj mk b">fill</code>方法做同样的工作。</p><h1 id="15c4" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">结论</h1><p id="d7b1" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以用普通JavaScript的数组方法轻松实现<code class="fe mh mi mj mk b">dropWhile</code>、<code class="fe mh mi mj mk b">dropRightWhile</code>和<code class="fe mh mi mj mk b">fill</code>。通过几行代码，我们消除了使用Lodash数组方法的需要。</p></div></div>    
</body>
</html>