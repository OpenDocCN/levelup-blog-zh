# 不要讨厌你的同事干涉你的代码库

> 原文：<https://levelup.gitconnected.com/dont-hate-your-coworkers-for-meddling-in-your-codebase-3e0334f70fad>

## 相反，讨厌你的组织

![](img/f1ff104082f9b8834a1ee800e7c32800.png)

阿菲夫·库苏马在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄的照片

如果你曾经是一家规模可观的公司的工程师，那么你肯定经历过这种情况:

您属于拥有一些应用程序或服务的团队。因为你的团队设计和开发了它们，所以你对它们了如指掌。代码是原始的——或者至少是易读的和可维护的——并且生产事故很少。

现在，其他一些团队需要对您的服务进行更改。您的团队正忙于自己的高优先级工作，因此无法进行更改。不幸的是，其他团队的工作是同等重要的。所以另一个团队的工程师自己承担起了改变的责任。

另一个工程师以他们工作的快速提议开始，不幸的是，这显示了对如何在你的团队的代码库中工作缺乏理解。所以你最终安排了一系列的代码走查和设计会议，从中产生了一个可行的计划(最终大部分由你来写)。然而，即使有了那个计划，你发现你自己的工作经常被其他工程师的问题打断。尽管你试图变得有耐心，但你还是忍不住对这些打扰越来越恼火。

也许感觉到了这种恼怒，工程师最终自己完成了这项工作。最终，您会收到一个紧急邀请，要求您查看他们的拉动式请求。一个大的、复杂的拉式请求不仅不符合你的团队的标准，而且与你最初创建的设计背道而驰。你想重写工作，但另一个团队在最后期限。迫于避免妨碍他们工作的压力，你在做了最少的、主要是表面上的修改后，勉强批准了公关。

然而，你的参与还没有结束。您的团队拥有服务，因此您的团队需要部署它。同样，他们的项目是高优先级的。因此，您再次将自己的工作放在一边来部署服务。幸运的话，这一幕到此结束。但有时不会。有时，您不情愿地允许合并和部署的代码会破坏一些东西。现在，您的团队必须解决“您的服务”造成的任何网站事故。

所有这些都让你怀疑另一个工程师的神经。他们不仅进入了你的代码库，而且还占用了你大量的时间，使你的服务处于不稳定的状态(他们只是搬进了他们的生活，让你负责他们的烂摊子)。除了你的鄙视和蔑视，他们什么都不值得，对吗？

或者，这个场景更像是你的经历:

你被分配到一个高优先级的项目。不幸的是，这个项目需要对其他团队拥有的服务进行重大修改。你问服务的所有者他们是否能做这项工作，但是他们的回答是响亮的“不”。他们有自己的高优先级工作要做。

所以在轻微的恐慌中，你告诉你的经理你被屏蔽了。如果另一个团队不更新他们的服务，你就无法完成你的工作。你经理的解决方案？*你*将改变另一队的发球。

尽管您对这项服务知之甚少，但您已经准备好了用您提议的更改来生成设计文档。你用你有限的知识尽你所能，向其他团队展示你的设计。反过来，他们会攻击你的设计，解释它是多么的不可行。最终，他们几乎重写了整个文档。(*为什么*，你在这一点上感到疑惑，*他们不是刚开始就创建了设计文档吗？*)

您随后尽最大努力实现他们的设计。但是你正在学习代码库。你已经尝试寻求帮助，但是很明显你占用了其他工程师的很多时间。所以你要在规定的时间内尽力而为。在紧要关头，你与另一个团队的工程师一起建立了一个代码演练。他们有很多评论——几乎所有的评论都是负面的、批评性的。

你尽可能多地改变他们，直到你得到他们集体勉强的认可。然后，您请求团队为您部署服务。确实如此。但这还不是结束。因为不久之后，团队会联系你。您的更改破坏了生产中的某些东西。他们已经为你修好了，但是下次请更加小心。

令人沮丧。毕竟，你只是想让一个重要的项目按时完成。但是在你的后脑勺，你会忍不住疑惑:*也许是我* ***把*** *搞砸了……也许是对方队伍* ***应该*** *对我不爽*。

我们可能会考虑这些情况，并把责任归咎于不同的参与者。也许代码更改工程师很粗心。也许他们没有足够仔细地阅读文档。或者，就此而言，可能是另一个团队没有提供足够的文档。或者他们没有像需要的那样彻底地检查代码。

然而，真正的问题是，我们首先不应该需要在别人的代码基础上工作。当这种情况发生时——至少，如果它以某种频率发生——这是我们的组织结构有问题的迹象。具体来说，我们有一个混乱的所有权模型。

# 所有权模式不佳的原因

如果上面的例子代表了混乱的所有权模型，那么它们的混乱是什么…我们能做些什么？为此，我们可以求助于软件工程的最佳实践*高内聚*和*松耦合*，并将它们应用到我们的组织结构中。

## 内聚力

本质上，内聚性指的是一个模块中的元素属于一起的程度。一个内聚的系统保持对它试图实现的目标的关注。反过来，它也有助于确保如果一个项目发生变化，那么所有同样需要变化的依赖项就在那里，在同一个模块中。

我们许多人从软件开发的角度理解这一点。当然，我们都感受过试图维护一个低内聚力的代码库的痛苦。问题是，这种痛苦也可以在组织层面上感受到。当单个项目或特性需要跨多个团队的变更时，我们的团队结构就会受到低内聚力的影响。

我们讨厌忍受我们的软件如此低的内聚力。那么，为什么我们的团队结构允许这样做呢？

***好吧，那么“团队”到底是什么？*** 让我们暂停片刻。我们一直在使用“团队”这个词…但是它真正的意思是什么呢？

以 asq.org 提供的定义为例:

> 执行相互依赖的任务的一组人，为完成共同的使命或特定的目标而努力

换句话说，团队是一群拥有不同技能的人，他们共同努力实现一个目标。这似乎是相当明显的。

不幸的是，我们在工程组织中并不经常带着目标、使命或目的来组建我们的团队。相反，我们根据更随意的标准来形成它们，例如:

*   报告结构(向同一个经理报告的人属于同一个团队)
*   技术技能(所有编写 Android 代码的人因此都属于 Android 工程团队)。

然而，现实是这些团队的成员很少真正朝着同一个目标努力。

我们通常称这样的团队结构为*水平团队*。这是因为团队是横向分配的，跨越职能或报告线。

![](img/6ba204b3ed98968bef61374bc720b556.png)

一个“后端工程”团队，沿着水平/功能线形成

相比之下，垂直团队是那些横切功能(通常是报告)行的团队，而不是按产品或业务领域排列的团队。

![](img/8b9db34a30001ecdd66f545c11d2f3cf.png)

专注于特定产品或业务领域的垂直团队，由跨职能部门的成员组成

## 连接

*耦合*描述了独立软件系统(模块、代码库、服务等)之间的相互依赖程度。紧密耦合的系统——也就是说，它们具有高度的相互依赖性——通常被认为更脆弱，更难维护。

事实是，团队可以以同样的方式结合。例如，我们的团队可能围绕某个特定的产品垂直组建。支持该产品的每项服务和应用都归我们的团队所有。因此，添加到该产品的任何新功能都可以完全由我们的团队来处理。

太好了。但是在我们的组织中可能有其他的团队依赖于我们产品的数据。每当我们对产品做出重大改变时，其他团队的服务也需要更新。

这个场景代表了跨团队的紧密耦合(事实上，跨那些团队所拥有的服务)。这也会导致工程师定期更新属于其他团队的代码库的情况。

## 那我们该怎么办？

这些问题的解决方案通常超越了我们作为单个工程师——甚至单个经理/主管——所能实现的。相反，它们涉及到对我们的组织结构和架构的根本改变。

例如，为了解决我们团队之间的低凝聚力，[我们应该根据业务领域、](https://dt-23597.medium.com/what-do-i-mean-by-horizontal-versus-vertical-engineering-teams-5c07bd34cf82)[垂直组建我们的团队，而不是根据职能或报告结构(*注:这是*](https://dt-23597.medium.com/what-do-i-mean-by-horizontal-versus-vertical-engineering-teams-5c07bd34cf82) [*跨职能团队*](https://medium.datadriveninvestor.com/what-is-a-cross-functional-team-anyway-d9bae35023d7) *背后的概念。*)这样，我们的团队将专注于一个目标，而不是试图为其他团队解决多个问题。

另一方面，紧密耦合的团队通常是由紧密耦合的架构引起的。一般来说，单个垂直领域内的服务之间的紧密耦合是好的，因为这些服务由单个团队控制。一旦我们从一个团队跨越到另一个团队，我们应该以松散耦合的服务为目标。这通常通过最小化团队服务之间的同步调用来实现，而不是通过服务总线使用异步的、事件驱动的通信，例如 [Kafka](/kafka-for-engineers-975feaea6067) ( *注意:这是* [*有界上下文*](https://medium.datadriveninvestor.com/if-youre-building-microservices-you-need-to-understand-what-a-bounded-context-is-30cbe51d5085) *背后的概念)。*)

# 结论

毫无疑问，作为一名工程师，你经历过别人弄乱了你的代码库…或者你弄乱了别人的代码库。也许你正在你目前的公司里经历这些问题。

那么，作为一名工程师，你能做些什么来对你的组织进行必要的彻底改变呢？当然，这取决于组织本身。因为这需要每个人的参与，而不仅仅是少数人。但是如果你的组织足够小，并且愿意听取新的想法，那么你可能有机会做出积极的改变。

如果不是呢？那么至少你能认识到团队之间的痛苦和摩擦不是你的错，也不是你的工程师同事的错。也许你会给他们——和你自己——一个喘息的机会。

*喜欢这个故事？想多读点？只需* [*在这里订阅*](https://dt-23597.medium.com/subscribe) *就能把我的最新故事直接发到你的收件箱里。*

*你也可以通过* [*成为今天的*](https://dt-23597.medium.com/membership) *媒体会员来支持我和我的写作，并获得无限量的故事。*

# 分级编码

感谢您成为我们社区的一员！在你离开之前:

*   👏为故事鼓掌，跟着作者走👉
*   📰查看[升级编码出版物](https://levelup.gitconnected.com/?utm_source=pub&utm_medium=post)中的更多内容
*   🔔关注我们:[Twitter](https://twitter.com/gitconnected)|[LinkedIn](https://www.linkedin.com/company/gitconnected)|[时事通讯](https://newsletter.levelup.dev)

🚀👉 [**加入升级人才集体，找到一份惊艳的工作**](https://jobs.levelup.dev/talent/welcome?referral=true)