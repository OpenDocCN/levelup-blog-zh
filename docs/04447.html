<html>
<head>
<title>Solving Common Vue Problems — Classes, Binding and More</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">解决常见的Vue问题——类、绑定等等</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/solving-common-vue-problems-classes-binding-and-more-4d4292daa66d?source=collection_archive---------9-----------------------#2020-06-27">https://levelup.gitconnected.com/solving-common-vue-problems-classes-binding-and-more-4d4292daa66d?source=collection_archive---------9-----------------------#2020-06-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/98256a4e3ac32db18653ba56e5486828.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8FZG4khzugY9nbMR"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated"><a class="ae kf" href="https://unsplash.com/@ilumire?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Jelleke Vanooteghem </a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="4a14" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Vue.js让开发前端应用变得简单。然而，我们仍有可能遇到问题。</p><p id="0df2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这篇文章中，我们将看看一些常见的问题，并看看如何解决它们。</p><h1 id="394a" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">条件类样式绑定</h1><p id="5749" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">有多种方法可以动态改变元素的类名。</p><p id="17c0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以使用<code class="fe mh mi mj mk b">:class</code>或<code class="fe mh mi mj mk b">v-bind:class</code>绑定。</p><p id="61e5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="d2c2" class="mt lf it mk b gy mu mv l mw mx">&lt;div <!-- -->v-bind:class="getClass()"&gt;&lt;/div&gt;</span></pre><p id="0b36" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后在<code class="fe mh mi mj mk b">getClass</code>中，我们可以返回一个对象，将类名作为属性键，并将它们显示为值:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="bf74" class="mt lf it mk b gy mu mv l mw mx">methods:{<br/>  getClass(){<br/>    return {<br/>      'checked': this.content.shouldCheck,  <br/>      'unchecked': !this.content.shouldCheck<br/>    }<br/>  }<br/>}</span></pre><p id="f7b5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果<code class="fe mh mi mj mk b">this.content.shouldCheck</code>是<code class="fe mh mi mj mk b">true</code>，我们将<code class="fe mh mi mj mk b">checked</code>类应用于div。否则，如果<code class="fe mh mi mj mk b">this.content.shouldCheck</code>是<code class="fe mh mi mj mk b">false</code>，我们就应用<code class="fe mh mi mj mk b">unchecked</code>类。</p><p id="c4e2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们也可以传入任何我们想要的参数:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="db6b" class="mt lf it mk b gy mu mv l mw mx">methods:{<br/>  getClass(prop){<br/>    return {<br/>      'checked': this.content[prop],  <br/>      'unchecked': !this.content[prop]<br/>    }<br/>  }<br/>}</span></pre><p id="8e93" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="7b97" class="mt lf it mk b gy mu mv l mw mx">&lt;div v-bind:class="getClass(prop)"&gt;&lt;/div&gt;</span></pre><p id="d64d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在我们的模板中通过属性名<code class="fe mh mi mj mk b">this.content</code>返回类名。此外，我们可以编写任何表达式，返回带有我们想要应用的类名的字符串。</p><p id="45cb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="6c80" class="mt lf it mk b gy mu mv l mw mx">&lt;div v-bind:class="checked"&gt;&lt;/div&gt;</span></pre><p id="b9f8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">其中<code class="fe mh mi mj mk b">checked</code>是一个计算属性:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="3b24" class="mt lf it mk b gy mu mv l mw mx">computed: {<br/>  checked() {<br/>    return this.content.checked ? 'checked' : 'unchecked';<br/>  }<br/>}</span></pre><p id="aa2d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">checked</code>是一个计算属性，根据<code class="fe mh mi mj mk b">this.content.checked</code>的值返回带有我们想要的类名的字符串。</p><h1 id="2941" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">不要在Vue.js for循环中使用Index作为键</h1><p id="419f" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">当我们使用<code class="fe mh mi mj mk b">v-for</code>时，我们应该为每个条目传递一个唯一的ID来表示<code class="fe mh mi mj mk b">key</code>属性的值。这样，如果我们以任何方式重新排列数组条目，key prop的值都不会受到影响。</p><p id="088a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当我们重新排列或删除条目时，索引可能会改变，所以使用索引不会帮助Vue跟踪它们。</p><p id="bab5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因此，我们应该始终使用唯一的ID作为<code class="fe mh mi mj mk b">key</code>属性的值。</p><h1 id="92dd" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">在页面之间共享数据</h1><p id="dc5c" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以通过使用Vuex在页面之间共享数据。使用Vuex，我们可以定义一个商店来存储应用范围内可用的状态。</p><p id="38dd" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">所以我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="b4e2" class="mt lf it mk b gy mu mv l mw mx">import Vue from 'vue'<br/>import Vuex from 'vuex'</span><span id="64ec" class="mt lf it mk b gy my mv l mw mx">Vue.use(Vuex)</span><span id="a616" class="mt lf it mk b gy my mv l mw mx">const store = new Vuex.Store({<br/>  state: {<br/>    count: 0<br/>  },<br/>  mutations: {<br/>    increment(state) {<br/>      state.count++<br/>    }<br/>  }<br/>})</span></pre><p id="847c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">将全局<code class="fe mh mi mj mk b">count</code>状态存储在存储器中。</p><p id="c56b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后，为了更新<code class="fe mh mi mj mk b">count</code>状态的值，我们可以通过编写以下代码对其调用<code class="fe mh mi mj mk b">this.$store.commit</code>:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="9d9f" class="mt lf it mk b gy mu mv l mw mx">this.$store.commit('increment')</span></pre><p id="7004" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这可以在组件中调用。</p><p id="1dc0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">那么我们可以通过写下得到这个值:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="24df" class="mt lf it mk b gy mu mv l mw mx">this.$store.state.count</span></pre><p id="b09d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在组件中。</p><h1 id="fd69" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">v-model和v-bind的区别</h1><p id="0e02" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">让我们将数据从输入绑定到状态变量。</p><p id="0ebd" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，如果我们有:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="a4e4" class="mt lf it mk b gy mu mv l mw mx">&lt;input v-model="value"&gt;</span></pre><p id="79d6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后输入的值被自动设置为<code class="fe mh mi mj mk b">value</code>的值。同样，如果我们设置了<code class="fe mh mi mj mk b">value</code>的值，那么输入的值也被设置。</p><p id="89cf" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">v-model</code>是<code class="fe mh mi mj mk b">v-bind:value</code>和<code class="fe mh mi mj mk b">v-on:input</code>合在一起的简称。</p><p id="a7d6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因此，我们也可以这样写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="ca71" class="mt lf it mk b gy mu mv l mw mx">&lt;input<br/>   v-bind:value="value"<br/>   v-on:input="value= $event.target.value"<br/>&gt;</span></pre><p id="24d4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">或者:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="705f" class="mt lf it mk b gy mu mv l mw mx">&lt;input<br/>  :value="value"<br/>  @input="value= $event.target.value"<br/>&gt;</span></pre><p id="4fcf" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当我们输入时，输入会发出<code class="fe mh mi mj mk b">input</code>事件。发出时，具有输入值的<code class="fe mh mi mj mk b">$event.target.value</code>被设置为<code class="fe mh mi mj mk b">value</code>的值。</p><p id="ef13" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后，我们用以下方式将值属性绑定到<code class="fe mh mi mj mk b">value</code>:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="6ebc" class="mt lf it mk b gy mu mv l mw mx">:value="value"</span></pre><p id="08ab" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">或者:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="7729" class="mt lf it mk b gy mu mv l mw mx">v-bind:value="value"</span></pre><p id="391b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">任何发出<code class="fe mh mi mj mk b">input</code>事件并具有<code class="fe mh mi mj mk b">value</code>属性的组件都可以替代输入元素。这使得用Vue.js创建我们的定制输入组件变得容易。</p><p id="2bb7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">从上面的例子中我们可以看到，我们用<code class="fe mh mi mj mk b">v-bind</code>或简称<code class="fe mh mi mj mk b">:</code>将<code class="fe mh mi mj mk b">value</code>状态的值传递给输入。</p><h1 id="7521" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">监听组件上的本机事件</h1><p id="3f6a" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以在<code class="fe mh mi mj mk b">v-on:click</code>指令上添加<code class="fe mh mi mj mk b">native</code>修饰符来监听本地点击事件。</p><p id="0979" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="3890" class="mt lf it mk b gy mu mv l mw mx">&lt;foo v-on:click.native="testFunction"&gt;&lt;/foo&gt;</span></pre><p id="16ee" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们用<code class="fe mh mi mj mk b">v-on:click.native</code>而不是<code class="fe mh mi mj mk b">v-on:click</code>来监听<code class="fe mh mi mj mk b">foo</code>组件上的点击事件。</p><p id="a12d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">同样，我们也可以把它写得更短:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="a8fa" class="mt lf it mk b gy mu mv l mw mx">&lt;foo @click.native="testFunction"&gt;&lt;/foo&gt;</span></pre><figure class="ml mm mn mo gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mz"><img src="../Images/a33a5c3e9b66c7392b95ac1897895b5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*bZWnNt2JgU6Z45LJ"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">照片由<a class="ae kf" href="https://unsplash.com/@hessamnbv?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">海萨姆·纳巴维</a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><h1 id="9a9c" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">结论</h1><p id="915d" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以用<code class="fe mh mi mj mk b">native</code>修饰语来听本地事件。</p><p id="5c51" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">此外，我们可以通过返回一个对象或一个包含我们想要的类的字符串来有条件地应用类。</p><p id="ad56" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">v-bind</code>进行从父到子的单向数据绑定，<code class="fe mh mi mj mk b">v-model</code>启用双向数据绑定。</p></div></div>    
</body>
</html>