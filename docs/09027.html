<html>
<head>
<title>How to make a multi-language application in C</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用C语言制作多语言应用程序</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-make-a-multi-language-localized-application-in-c-8862e1d1f64f?source=collection_archive---------12-----------------------#2021-06-29">https://levelup.gitconnected.com/how-to-make-a-multi-language-localized-application-in-c-8862e1d1f64f?source=collection_archive---------12-----------------------#2021-06-29</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8918" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用Gettext和Localazy翻译GTK应用程序</h2></div><p id="8267" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">通常，当你开始开发一个新的应用程序时，它的界面是用一种特定的语言编写的，如果你想接触到国际观众，可能是英语。通过将你的应用翻译成其他人类语言，你可以增加安装、使用和推荐它的人数。</p><p id="6985" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">几周前，我开始学习C编程语言。改变C对软件工程的思考方式是相当具有挑战性的。在学习如何处理字符串时，我想知道如何解决多语言应用程序的问题。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi le"><img src="../Images/78e808125e16ed67c84bd219362300e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9Oue9ZWvbO0gKP0nbZqBIA.png"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk translated">除非另有说明，文中所有图片均为作者。</figcaption></figure><p id="7340" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这篇文章中，我将向你展示如何使用Gettext函数来翻译一个终端应用程序和一个GUI(使用GTK制作)。我将向您展示如何使用环境变量测试这个解决方案。最后，我将向您展示如何管理多种翻译，甚至如何使用<a class="ae lu" href="https://localazy.com/" rel="noopener ugc nofollow" target="_blank"> Localazy </a>来帮助自己进行机器翻译。</p><p id="a0b9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要理解这篇文章，你需要的只是C语言的基础知识，可能还需要熟悉一些make工具。</p><p id="928c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae lu" href="https://fischerbach.medium.com/membership" rel="noopener">🔔想要更多这样的文章？在这里签名。</a></p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="3cc3" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">源代码</h1><p id="597a" class="pw-post-body-paragraph ki kj it kk b kl mu ju kn ko mv jx kq kr mw kt ku kv mx kx ky kz my lb lc ld im bi translated">为文章准备的知识库:</p><p id="5c34" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae lu" href="https://github.com/fischerbach/C-localization" rel="noopener ugc nofollow" target="_blank">https://github.com/fischerbach/C-localization</a></p><p id="d39c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">每个部分都有自己的分支。<code class="fe mz na nb nc b">master</code>分支包含最终源代码。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="d249" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">终端应用</h1><p id="cbdf" class="pw-post-body-paragraph ki kj it kk b kl mu ju kn ko mv jx kq kr mw kt ku kv mx kx ky kz my lb lc ld im bi translated">让我们首先处理一个简单的终端应用程序。</p><figure class="lf lg lh li gt lj"><div class="bz fp l di"><div class="nd ne l"/></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk translated"><a class="ae lu" href="https://github.com/fischerbach/C-localization/blob/step-0/terminal-app/do_nothing.c" rel="noopener ugc nofollow" target="_blank">https://github . com/fischer Bach/C-localization/blob/step-0/terminal-app/do _ nothing . C</a></figcaption></figure><p id="f3c9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">源代码中散布着几个包含消息的字符串。第一个想法是将它们收集到一个数组中。</p><figure class="lf lg lh li gt lj"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="33b3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，它们可以很容易地被翻译并存储在单独的变量中。然后我们可以使用条件编译并将适当的语言传递给构建工具:</p><figure class="lf lg lh li gt lj"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="e1ff" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这种解决方案有几个缺点。</p><p id="5a69" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">首先，在编译阶段，你必须选择语言版本。生成的二进制文件将只包含一种语言。在资源有限的环境中，例如嵌入式，这可能是有意义的。但是最终用户必须下载适合他们的版本。</p><p id="e81c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">其次，只要只有几个固定的字符串，这很容易管理。但是如果软件继续被开发，这个数字可能会迅速增加。此外，一些标签可能会停止使用。那么它们会不必要地占用内存。</p><p id="4a3b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最后，第三，它降低了代码的可读性。什么可读性更强？</p><figure class="lf lg lh li gt lj"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="751c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您可以尝试通过使用哈希表来解决这个问题，但是这有点重复劳动，并且不能解决前面提到的限制。幸运的是，有一个现成的解决方案——<code class="fe mz na nb nc b">Gettext</code>库和工具。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="8e35" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">Gettext</h1><p id="4c72" class="pw-post-body-paragraph ki kj it kk b kl mu ju kn ko mv jx kq kr mw kt ku kv mx kx ky kz my lb lc ld im bi translated">GNU gettext是一个通用的工具集，用于生成多语言消息。它提供了一个框架，以最小的努力支持翻译的消息字符串。它支持多种语言。</p><p id="1fb4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在上一篇文章中，我描述了如何在Python中使用它:</p><div class="nf ng gp gr nh ni"><a href="https://blog.devgenius.io/how-to-build-a-multi-language-dashboard-with-streamlit-9bc087dd4243" rel="noopener  ugc nofollow" target="_blank"><div class="nj ab fo"><div class="nk ab nl cl cj nm"><h2 class="bd iu gy z fp nn fr fs no fu fw is bi translated">如何使用Streamlit构建多语言仪表板</h2><div class="np l"><h3 class="bd b gy z fp nn fr fs no fu fw dk translated">Streamlit + Gettext + Localazy</h3></div><div class="nq l"><p class="bd b dl z fp nn fr fs no fu fw dk translated">blog.devgenius.io</p></div></div><div class="nr l"><div class="ns l nt nu nv nr nw lo ni"/></div></div></a></div><p id="4027" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">使用模式非常简单。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi nx"><img src="../Images/89f9672ae0e70c2560517457372dfd51.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FOJCTZY3F1RTxN-t5jI1rQ.png"/></div></div></figure><p id="5ebd" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">首先，我们需要修改源代码并标记要翻译的字符串。</p><figure class="lf lg lh li gt lj"><div class="bz fp l di"><div class="nd ne l"/></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk translated"><a class="ae lu" href="https://github.com/fischerbach/C-localization/blob/step-1/gui-app/do_nothing_gui.c" rel="noopener ugc nofollow" target="_blank">https://github . com/fischer Bach/C-localization/blob/step-1/GUI-app/do _ nothing _ GUI . C</a></figcaption></figure><p id="a172" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">注意，我们添加了一个预处理宏来将<code class="fe mz na nb nc b">gettext</code>函数缩短为<code class="fe mz na nb nc b">_</code>。这是标记本地化字符串的常用方法。接下来，我们从应用程序源代码生成一个文件，其中包含标记为要翻译的字符串。</p><pre class="lf lg lh li gt ny nc nz oa aw ob bi"><span id="f6e5" class="oc md it nc b gy od oe l of og">xgettext -k_ -o locales/base.pot — language=C do_nothing.c</span></pre><p id="760c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">通常<code class="fe mz na nb nc b">xgettext</code>会寻找文本周围的<code class="fe mz na nb nc b">gettext</code>功能，所以我们需要使用<code class="fe mz na nb nc b">-k_</code>选项来确定一个新的名称。输出是模板POT(可移植对象模板)文件。</p><figure class="lf lg lh li gt lj"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="1692" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">它包含每一个本地化的文本。我们用它来创建包含其他语言版本的文件。</p><pre class="lf lg lh li gt ny nc nz oa aw ob bi"><span id="409a" class="oc md it nc b gy od oe l of og">msginit --input=locales/base.pot --locale=pl --output=locales/pl/base.po</span></pre><p id="148e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这些是PO(可移植对象)文件，包含翻译文本。</p><figure class="lf lg lh li gt lj"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="998a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最后，为了在我们的应用程序中使用翻译，这些PO文件被转换成MO(机器对象)文件。</p><pre class="lf lg lh li gt ny nc nz oa aw ob bi"><span id="4cea" class="oc md it nc b gy od oe l of og">msgfmt --output-file=locales/pl/LC_MESSAGES/base.mo locales/pl/base.po</span></pre><p id="8b80" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这听起来可能很复杂，但基本上可以归结为使用几个基本命令，然后可以将其内置到<code class="fe mz na nb nc b">Makefile</code>中。</p><p id="205c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">注意目录结构的保存(尤其是<code class="fe mz na nb nc b">LC_MESSAGES</code>):</p><figure class="lf lg lh li gt lj"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="b4be" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">本节的源代码在</strong> <code class="fe mz na nb nc b"><strong class="kk iu">step-1</strong></code> <strong class="kk iu">分支中。</strong></p><p id="940a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">作为一个练习，fork repository，尝试创建到您的母语的翻译(也许创建拉请求😉).</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="57a3" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">测试</h1><p id="5611" class="pw-post-body-paragraph ki kj it kk b kl mu ju kn ko mv jx kq kr mw kt ku kv mx kx ky kz my lb lc ld im bi translated">为了在终端中测试我们的解决方案，我们需要设置“locale”变量。UNIX平台使用环境变量:</p><ul class=""><li id="0bb7" class="oh oi it kk b kl km ko kp kr oj kv ok kz ol ld om on oo op bi translated"><code class="fe mz na nb nc b">LANG</code></li><li id="ce0b" class="oh oi it kk b kl oq ko or kr os kv ot kz ou ld om on oo op bi translated"><code class="fe mz na nb nc b">LANGUAGE</code></li><li id="3f72" class="oh oi it kk b kl oq ko or kr os kv ot kz ou ld om on oo op bi translated"><code class="fe mz na nb nc b">LC_COLLATE</code>、<code class="fe mz na nb nc b">LC_CTYPE</code>、<code class="fe mz na nb nc b">LC_MESSAGES</code>、<code class="fe mz na nb nc b">LC_MONETARY</code>、<code class="fe mz na nb nc b">LC_NUMERIC</code>、<code class="fe mz na nb nc b">LC_TIME</code></li></ul><p id="b52e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">以确定要使用哪个区域设置。</p><p id="7f34" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当应用程序启动时，它会查看LANG环境变量的值。通过在输出可执行文件的名称前设置LANG变量，可以临时更改终端会话中的语言环境:</p><pre class="lf lg lh li gt ny nc nz oa aw ob bi"><span id="e717" class="oc md it nc b gy od oe l of og">LANG=pl ./do_nothing</span></pre><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi ov"><img src="../Images/55795d1a5c62f0c3dcdd1d6121393206.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nd9JPsjru8XjNoEt3j3Sdg.png"/></div></div></figure><p id="d330" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如您所见，我们的应用程序现在尊重用户的地区设置。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="b033" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">GTK 2.0</h1><p id="0c09" class="pw-post-body-paragraph ki kj it kk b kl mu ju kn ko mv jx kq kr mw kt ku kv mx kx ky kz my lb lc ld im bi translated">我们要看的下一个应用程序有一个使用GTK+2.0库实现的GUI。请注意，这是一个相当古老的GTK版本。然而，我们的应用程序非常简单，甚至可以使用更新的3.0版本进行编译。此外，就翻译而言，无论使用什么库和版本，过程都是相似的。</p><figure class="lf lg lh li gt lj"><div class="bz fp l di"><div class="nd ne l"/></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk translated"><a class="ae lu" href="https://github.com/fischerbach/C-localization/blob/step-1/gui-app/do_nothing_gui.c" rel="noopener ugc nofollow" target="_blank">https://github . com/fischer Bach/C-localization/blob/step-1/GUI-app/do _ nothing _ GUI . C</a></figcaption></figure><p id="ea53" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">该应用程序与以前的终端应用程序具有类似的“功能”，但具有一些图形界面。</p><figure class="lf lg lh li gt lj"><div class="bz fp l di"><div class="ow ne l"/></div></figure><p id="8845" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">有些行可能会造成困难，例如HTML格式的标签。</p><figure class="lf lg lh li gt lj"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="c406" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">用<code class="fe mz na nb nc b">Gettext</code>和<code class="fe mz na nb nc b">GTK</code>没多大区别。</p><figure class="lf lg lh li gt lj"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="b68c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Glib提供了一个<code class="fe mz na nb nc b">gi18n</code>头文件，我们包含了这个头文件。本地化文本的标记与上一个示例完全相同。</p><p id="9873" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">结果:</p><figure class="lf lg lh li gt lj"><div class="bz fp l di"><div class="ow ne l"/></div></figure><p id="c88e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">奇妙的是，GTK还自动翻译内置对话窗口标签的标签！</p><p id="8822" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">本节的源代码在</strong> <code class="fe mz na nb nc b"><strong class="kk iu">step-2</strong></code> <strong class="kk iu">分支中。</strong></p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="fd72" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">可能的问题</h1><p id="7b4f" class="pw-post-body-paragraph ki kj it kk b kl mu ju kn ko mv jx kq kr mw kt ku kv mx kx ky kz my lb lc ld im bi translated">在工作过程中，我遇到了一些棘手的问题。</p><h2 id="cc12" class="oc md it bd me ox oy dn mi oz pa dp mm kr pb pc mo kv pd pe mq kz pf pg ms ph bi translated">字符集编码</h2><p id="8ba3" class="pw-post-body-paragraph ki kj it kk b kl mu ju kn ko mv jx kq kr mw kt ku kv mx kx ky kz my lb lc ld im bi translated">如果您的语言使用扩展字符集，请记住在PO文件头中设置UTF-8(或另一个合适的字符集)。</p><p id="b83d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae lu" href="https://gist.github.com/fischerbach/e4cbe6b4531cb174f192a7df71b83488" rel="noopener ugc nofollow" target="_blank">https://gist . github . com/fischer Bach/E4 cbe6b 4531 CB 174 f 192 a 7 df 71 b 83488</a></p><h2 id="420a" class="oc md it bd me ox oy dn mi oz pa dp mm kr pb pc mo kv pd pe mq kz pf pg ms ph bi translated">正确的区域目录结构</h2><p id="a7be" class="pw-post-body-paragraph ki kj it kk b kl mu ju kn ko mv jx kq kr mw kt ku kv mx kx ky kz my lb lc ld im bi translated">保持目录结构能够被<code class="fe mz na nb nc b">Gettext</code>理解是很重要的。</p><p id="67ef" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">尤其是<code class="fe mz na nb nc b">LC_MESSAGES</code>子目录。</p><figure class="lf lg lh li gt lj"><div class="bz fp l di"><div class="nd ne l"/></div></figure><h2 id="7027" class="oc md it bd me ox oy dn mi oz pa dp mm kr pb pc mo kv pd pe mq kz pf pg ms ph bi translated">复杂的工作流程</h2><p id="b747" class="pw-post-body-paragraph ki kj it kk b kl mu ju kn ko mv jx kq kr mw kt ku kv mx kx ky kz my lb lc ld im bi translated">记住所有生成翻译文件的命令可能会很繁琐，所以在<code class="fe mz na nb nc b">step-3</code>分支中，您会发现简单的bash脚本和<code class="fe mz na nb nc b">Makefile</code>修改来自动化这个过程。</p><h2 id="2a2a" class="oc md it bd me ox oy dn mi oz pa dp mm kr pb pc mo kv pd pe mq kz pf pg ms ph bi translated">每次都需要重新生成采购订单文件</h2><p id="8bb0" class="pw-post-body-paragraph ki kj it kk b kl mu ju kn ko mv jx kq kr mw kt ku kv mx kx ky kz my lb lc ld im bi translated">重新生成PO文件时要小心，因为您可能会丢失已经翻译的部分。合并新标签和它们的翻译可能具有挑战性。因此，在下一段中，您将了解一个web应用程序，它使创建新的语言版本变得尽可能容易。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="7fc3" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">Localazy</h1><p id="ec98" class="pw-post-body-paragraph ki kj it kk b kl mu ju kn ko mv jx kq kr mw kt ku kv mx kx ky kz my lb lc ld im bi translated"><a class="ae lu" href="https://localazy.com/" rel="noopener ugc nofollow" target="_blank"> Localazy </a>是一款非常棒的软件，它让通常糟糕的翻译体验变得可以忍受，甚至近乎愉悦。它支持许多框架和本地化文件格式，并为构建自动化提供CLI工具。我最喜欢的功能是机器建议翻译和自动管理翻译文件的变化。</p><p id="17e5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因此，让我们将我们的报告与Localazy结合起来。首先，创建一个Localazy帐户并<a class="ae lu" href="https://localazy.com/docs/cli/installation" rel="noopener ugc nofollow" target="_blank">安装Localazy CLI。</a>然后，创建一个新应用程序。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi pi"><img src="../Images/e7a4809502f5d29f8e6caf5e5be9a592.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XEYp2iq34IDq5vHzKWg-jQ.png"/></div></div></figure><p id="a662" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">确保将应用程序类型设置为私人应用程序。如果您的应用程序不包含敏感数据，您可以放心地将其公开。然后，从可用文件格式中选择POT文件。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi pj"><img src="../Images/b6bf3edc64b6879ba4781fc88724c530.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gK2k5XGPe6j5mTsxTb9SXw.png"/></div></div></figure><p id="6bcf" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您将看到一个模板配置文件<code class="fe mz na nb nc b">localazy.json</code>。将其复制到<code class="fe mz na nb nc b">gui-app</code>主文件夹。请记住修改语言环境文件夹路径。现在，您可以将POT文件上传到Localazy:</p><pre class="lf lg lh li gt ny nc nz oa aw ob bi"><span id="02a0" class="oc md it nc b gy od oe l of og">localazy upload</span></pre><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi ov"><img src="../Images/a2bd600f8853e16e5704f0ec468a2c4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w0agBMcxgCdX8r1P52ixFg.png"/></div></div></figure><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi pk"><img src="../Images/4cc49917d88bdeab406688569b0cbf5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xRG7fLXj6vxmTz1xylkKJg.png"/></div></div></figure><p id="645d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后，转到Localazy中的应用程序，添加一些新语言。过一会儿，你会看到一个列表，列出了应用程序中每种语言需要翻译的短语。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi pl"><img src="../Images/fea0b955e7e71c16a50462a8ba059f57.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-uCfbGNRR-cj8qbc9b1uDw.png"/></div></div></figure><p id="bec7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">顶部的樱桃，每个短语都有机器翻译建议和以前用过的建议。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi pm"><img src="../Images/c30ce1684c02f6375d784f1056e3202b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PA2ydcAB0V3hsnlAAnMHaA.png"/></div></div></figure><p id="f715" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">接受或创建所有翻译后，您可以将它们下载到您的应用程序中，并重新生成二进制MO文件:</p><pre class="lf lg lh li gt ny nc nz oa aw ob bi"><span id="125c" class="oc md it nc b gy od oe l of og">localazy download</span><span id="a503" class="oc md it nc b gy pn oe l of og">make locales -B</span></pre><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi ov"><img src="../Images/0a26f5c71998c6e9f150a5b94af2e785.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NhqBFTAyRFFZbvstxfui5w.png"/></div></div></figure><p id="c1fe" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">结果:</p><figure class="lf lg lh li gt lj"><div class="bz fp l di"><div class="ow ne l"/></div></figure><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi po"><img src="../Images/85834cf89d1d3689a360d49c03f77bab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fFblhpQUeeo8N2x2v9iJeg.png"/></div></div></figure><p id="4d4f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我得说这是完全可以接受的。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><h1 id="fe2d" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">外卖食品</h1><p id="3a82" class="pw-post-body-paragraph ki kj it kk b kl mu ju kn ko mv jx kq kr mw kt ku kv mx kx ky kz my lb lc ld im bi translated">为您的应用程序提供更多语言版本不仅会增加潜在的用户群，还会有助于可访问性和平等性。同时，随着应用程序的发展，翻译每个标签并跟踪变化是非常困难的。</p><p id="f32b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Gettext和Localazy是本地化问题的灵活解决方案。每一个都解决了不同的工作负载来源，它们互为补充。</p><p id="d295" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">对于C语言，字符串本地化的主题非常广泛，所以我建议看看下面的参考资料。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi pp"><img src="../Images/22e1b0bc54a738bc156fba54cff2eda0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nwZvfADZ0PWLBXDCdIWjBg.png"/></div></div></figure><h1 id="bb46" class="mc md it bd me mf pq mh mi mj pr ml mm jz ps ka mo kc pt kd mq kf pu kg ms mt bi translated">参考</h1><p id="c9e2" class="pw-post-body-paragraph ki kj it kk b kl mu ju kn ko mv jx kq kr mw kt ku kv mx kx ky kz my lb lc ld im bi translated">GNU Gettext:<br/><a class="ae lu" href="https://www.gnu.org/software/gettext/" rel="noopener ugc nofollow" target="_blank">https://www.gnu.org/software/gettext/</a></p><p id="4b00" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当地:<br/><a class="ae lu" href="https://localazy.com/" rel="noopener ugc nofollow" target="_blank">https://localazy.com/</a></p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="5c14" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae lu" href="https://www.gnu.org/prep/standards/html_node/Internationalization.html" rel="noopener ugc nofollow" target="_blank">https://www . GNU . org/prep/standards/html _ node/国际化. html </a></p><p id="2c62" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae lu" href="https://ptomato.github.io/advanced-gtk-techniques/html/gettext-project.html" rel="noopener ugc nofollow" target="_blank">https://ptomato . github . io/advanced-GTK-techniques/html/gettext-project . html</a></p><p id="b4d6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae lu" href="https://barrgroup.com/embedded-systems/how-to/firmware-internationalization" rel="noopener ugc nofollow" target="_blank">https://Barr group . com/embedded-systems/how-to/firmware-国际化</a></p><p id="8214" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">【https://docs.oracle.com/cd/E23824_01/html/E26033/glmha.html T4】</p><p id="4265" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae lu" href="https://www.labri.fr/perso/fleury/posts/programming/a-quick-gettext-tutorial.html" rel="noopener ugc nofollow" target="_blank">https://www . labri . fr/perso/fleury/posts/programming/a-quick-gettext-tutorial . html</a></p><p id="7e0b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae lu" href="https://developer.gnome.org/glib/stable/glib-I18N.html" rel="noopener ugc nofollow" target="_blank">https://developer.gnome.org/glib/stable/glib-I18N.html</a></p></div></div>    
</body>
</html>