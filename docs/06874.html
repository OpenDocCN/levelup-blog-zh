<html>
<head>
<title>Create Tables with Virtual Scrolling in a React App with the react-window Library</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用react窗口库在React应用程序中创建带有虚拟滚动的表格</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/create-tables-with-virtual-scrolling-in-a-react-app-with-the-react-window-library-5487ca3aaf90?source=collection_archive---------3-----------------------#2021-01-10">https://levelup.gitconnected.com/create-tables-with-virtual-scrolling-in-a-react-app-with-the-react-window-library-5487ca3aaf90?source=collection_archive---------3-----------------------#2021-01-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/9bbef9ed55a6d313216c3b9784bb6ad2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*d6iE4cdjM54AY8oO"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated"><a class="ae kf" href="https://unsplash.com/@keithmisner?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">基思·米斯纳</a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="758d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本文中，我们将了解如何使用react-window库创建表格。</p><h1 id="92aa" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">装置</h1><p id="e22f" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以通过运行以下命令来安装该软件包:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="d925" class="mq lf it mm b gy mr ms l mt mu">yarn add react-window</span></pre><p id="d2e9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">或者</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="de61" class="mq lf it mm b gy mr ms l mt mu">npm install --save react-window</span></pre><h1 id="0d50" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">创建表</h1><p id="6c01" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以通过编写以下内容来创建一个简单的表:</p><p id="01a5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mv mw mx mm b">App.js</code></p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="c197" class="mq lf it mm b gy mr ms l mt mu">import React from "react";<br/>import { FixedSizeList as List } from "react-window";<br/>import AutoSizer from "react-virtualized-auto-sizer";<br/>import "./styles.css";</span><span id="29b8" class="mq lf it mm b gy my ms l mt mu">const Row = ({ index, style }) =&gt; (<br/>  &lt;div className={index % 2 ? "ListItemOdd" : "ListItemEven"} style={style}&gt;<br/>    Row {index}<br/>  &lt;/div&gt;<br/>);</span><span id="9bd5" class="mq lf it mm b gy my ms l mt mu">const Table = () =&gt; (<br/>  &lt;AutoSizer&gt;<br/>    {({ height, width }) =&gt; (<br/>      &lt;List<br/>        className="List"<br/>        height={height}<br/>        itemCount={1000}<br/>        itemSize={35}<br/>        width={width}<br/>      &gt;<br/>        {Row}<br/>      &lt;/List&gt;<br/>    )}<br/>  &lt;/AutoSizer&gt;<br/>);</span><span id="239b" class="mq lf it mm b gy my ms l mt mu">export default function App() {<br/>  return (<br/>    &lt;div className="App" style={{ height: 300 }}&gt;<br/>      &lt;Table /&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="c7ce" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mv mw mx mm b">style.css</code></p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="43a1" class="mq lf it mm b gy mr ms l mt mu">.List {<br/>  border: 1px solid yellow;<br/>}</span><span id="f868" class="mq lf it mm b gy my ms l mt mu">.ListItemEven,<br/>.ListItemOdd {<br/>  display: flex;<br/>  align-items: center;<br/>  justify-content: center;<br/>}</span><span id="c464" class="mq lf it mm b gy my ms l mt mu">.ListItemEven {<br/>  background-color: yellow;<br/>}</span></pre><p id="fe23" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们创建了<code class="fe mv mw mx mm b">Row</code>组件，并将它用作行。它将<code class="fe mv mw mx mm b">index</code>和<code class="fe mv mw mx mm b">style</code>道具分别与条目索引和样式关联。</p><p id="e235" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mv mw mx mm b">Table</code>组件使用来自<code class="fe mv mw mx mm b">react-virtualized-auto-sizer</code>的<code class="fe mv mw mx mm b">AutoSizer</code>组件来适当地调整列表及其项目的大小。</p><p id="1d80" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mv mw mx mm b">className</code>是列表的类名。</p><p id="f780" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mv mw mx mm b">height</code>是列表的高度，由<code class="fe mv mw mx mm b">AutoSizer</code>自动计算。</p><p id="8d3e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mv mw mx mm b">itemCount</code>有行数。</p><p id="4a29" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mv mw mx mm b">itemSize</code>有每次要加载的项目数。</p><p id="b9b0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mv mw mx mm b">width</code>具有行的宽度，这也是自动计算的。</p><p id="efd7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">将<code class="fe mv mw mx mm b">Row</code>组件添加为<code class="fe mv mw mx mm b">List</code>的子组件以显示它。</p><p id="d40a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们在<code class="fe mv mw mx mm b">App</code>中设置div的<code class="fe mv mw mx mm b">height</code>来显示列表。</p><h1 id="e462" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">创建表格</h1><p id="bc19" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以使用<code class="fe mv mw mx mm b">Grid</code>组件创建一个表格。</p><p id="a4ee" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="73a1" class="mq lf it mm b gy mr ms l mt mu">import React, { forwardRef } from "react";<br/>import { FixedSizeGrid as Grid } from "react-window";<br/>import "./styles.css";<br/>const GUTTER_SIZE = 5;<br/>const COLUMN_WIDTH = 100;<br/>const ROW_HEIGHT = 35;</span><span id="11a6" class="mq lf it mm b gy my ms l mt mu">const Cell = ({ columnIndex, rowIndex, style }) =&gt; (<br/>  &lt;div<br/>    className="GridItem"<br/>    style={{<br/>      ...style,<br/>      left: style.left + GUTTER_SIZE,<br/>      top: style.top + GUTTER_SIZE,<br/>      width: style.width - GUTTER_SIZE,<br/>      height: style.height - GUTTER_SIZE<br/>    }}<br/>  &gt;<br/>    row {rowIndex}, col {columnIndex}<br/>  &lt;/div&gt;<br/>);</span><span id="788c" class="mq lf it mm b gy my ms l mt mu">const Table = () =&gt; (<br/>  &lt;Grid<br/>    className="Grid"<br/>    columnCount={20}<br/>    columnWidth={COLUMN_WIDTH + GUTTER_SIZE}<br/>    height={300}<br/>    innerElementType={innerElementType}<br/>    rowCount={100}<br/>    rowHeight={ROW_HEIGHT + GUTTER_SIZE}<br/>    width={400}<br/>  &gt;<br/>    {Cell}<br/>  &lt;/Grid&gt;<br/>);</span><span id="2922" class="mq lf it mm b gy my ms l mt mu">const innerElementType = forwardRef(({ style, ...rest }, ref) =&gt; (<br/>  &lt;div<br/>    ref={ref}<br/>    style={{<br/>      ...style,<br/>      paddingLeft: GUTTER_SIZE,<br/>      paddingTop: GUTTER_SIZE<br/>    }}<br/>    {...rest}<br/>  /&gt;<br/>));</span><span id="9e45" class="mq lf it mm b gy my ms l mt mu">export default function App() {<br/>  return (<br/>    &lt;div className="App" style={{ height: 500 }}&gt;<br/>      &lt;Table /&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="242a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们通过获取<code class="fe mv mw mx mm b">coumnIndex</code>、<code class="fe mv mw mx mm b">rowIndex</code>和<code class="fe mv mw mx mm b">style</code>来为表格创建<code class="fe mv mw mx mm b">Cell</code>组件。<code class="fe mv mw mx mm b">style</code>被传递给<code class="fe mv mw mx mm b">style</code>道具。</p><p id="3454" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">此外，我们通过将<code class="fe mv mw mx mm b">GUTTER_SIZE</code>添加到<code class="fe mv mw mx mm b">left</code>和<code class="fe mv mw mx mm b">top</code>并从<code class="fe mv mw mx mm b">width</code>和<code class="fe mv mw mx mm b">height</code>中减去它来制作一个檐槽。</p><p id="b8d5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们显示<code class="fe mv mw mx mm b">rowIndex</code>和<code class="fe mv mw mx mm b">columnIndex</code>作为内容。</p><p id="7953" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mv mw mx mm b">Cell</code>用于<code class="fe mv mw mx mm b">Grid</code>组件。</p><p id="0d22" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们设置<code class="fe mv mw mx mm b">columnCount</code>来设置要显示的列数。</p><p id="6406" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mv mw mx mm b">columnWidth</code>设置列的宽度。</p><p id="a476" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mv mw mx mm b">height</code>有桌子的高度。</p><p id="ec9b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mv mw mx mm b">innerElementType</code>是对单元格容器所用网格的给定样式的组件的引用。</p><p id="2800" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mv mw mx mm b">rowCount</code>有行数。</p><p id="6728" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mv mw mx mm b">rowHeight</code>有行的高度。</p><p id="3e62" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mv mw mx mm b">width</code>拥有桌子的宽度。</p><p id="4d78" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们在我们的<code class="fe mv mw mx mm b">App</code>组件中使用<code class="fe mv mw mx mm b">Table</code>组件。</p><p id="1fc6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在我们应该会看到一个400像素乘300像素的表格。</p><h1 id="ad19" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">结论</h1><p id="ecbe" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以用react-window组件创建一个表格，方法是将计算的维度设置为单元格和表格容器。</p></div></div>    
</body>
</html>