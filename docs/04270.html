<html>
<head>
<title>Supabase — The Open-source Firebase Alternative</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">supabase——开源Firebase的替代方案</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/supabase-the-open-source-firebase-alternative-dab5ac10cb?source=collection_archive---------6-----------------------#2020-06-17">https://levelup.gitconnected.com/supabase-the-open-source-firebase-alternative-dab5ac10cb?source=collection_archive---------6-----------------------#2020-06-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div class="gh gi jq"><img src="../Images/379a2c6f5d06decbf8c72615de33f433.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*jtNrdKpSqS2E1sofI-E5wg.png"/></div><figcaption class="jx jy gj gh gi jz ka bd b be z dk translated">Supabase标志</figcaption></figure><p id="8b5c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果你读过我的其他文章，你会注意到我是<a class="ae kz" href="https://firebase.google.com/" rel="noopener ugc nofollow" target="_blank"> Firebase </a>的超级粉丝。他们的团队让应用程序的启动和运行变得极其容易，无需编写大量后端代码。即使是他们最接近的竞争对手，<a class="ae kz" href="https://aws.amazon.com/amplify/" rel="noopener ugc nofollow" target="_blank"> AWS Amplify </a>，也有相当长的学习曲线。</p><p id="8587" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">尽管如此，我相信我可能已经找到了一个数据库的替代方案。事不宜迟，我给你介绍<a class="ae kz" href="https://supabase.io/" rel="noopener ugc nofollow" target="_blank"> Supabase </a>。那么什么是Supabase呢？</p><p id="cb86" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">Supabase是一个PostgreSQL数据库，提供即时RESTful API。除此之外，它还通过websockets提供实时功能。而且，有了SQL数据库，我们可以执行连接和编写存储过程。您所要做的就是注册、登录、创建您的表/进程，剩下的事情由Supabase来处理。他们甚至有一个npm包，采用了与Firebase非常相似的方法。</p><p id="ac5e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">不幸的是，<strong class="kd iu"> Supabase还处于Alpha </strong>阶段，还没有准备好投入生产。但是，这意味着这只是一个开始，我相信这将是一个伟大的产品。到目前为止，他们的托管服务是免费的(最终会付费)，他们有一个开源版本，需要你自己的托管服务(<a class="ae kz" href="https://supabase.io/docs/postgres/postgres-intro" rel="noopener ugc nofollow" target="_blank">自托管安装文档</a>)。</p><p id="02a3" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">好了，炒作够了。让我们来看一个小演示。</p><h1 id="7d6f" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">创建表格</h1><p id="167c" class="pw-post-body-paragraph kb kc it kd b ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku mc kw kx ky im bi translated">创建帐户并登录后，首先进入的是SQL编辑器。在编辑器中，他们会给你一些预置的命令，比如创建一个表。</p><figure class="me mf mg mh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi md"><img src="../Images/0926acd2236898f273be501792d83536.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WIHbLRdSilbpHyHAN5nNHA.png"/></div></div><figcaption class="jx jy gj gh gi jz ka bd b be z dk translated">Supabase SQL编辑器</figcaption></figure><p id="e6e9" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">单击Create Table，然后编辑SQL以创建一个用户表。</p><pre class="me mf mg mh gt mm mn mo mp aw mq bi"><span id="fa58" class="mr lb it mn b gy ms mt l mu mv">CREATE TABLE users (<br/>  id bigint GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,<br/>  firstName text,<br/>  lastName text,<br/>  userName text,<br/>  email text  <br/>);</span></pre><p id="7a41" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在数据库菜单下，您现在应该看到用户表</p><figure class="me mf mg mh gt ju gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/0100dfe0e838c63c00bee1698285e0cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1196/format:webp/1*NFlz3VG_BgmEpIRnaR9WOg.png"/></div><figcaption class="jx jy gj gh gi jz ka bd b be z dk translated">用户表</figcaption></figure><h1 id="f6ff" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">自动生成的文档</h1><p id="f329" class="pw-post-body-paragraph kb kc it kd b ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku mc kw kx ky im bi translated">Supabase最令人印象深刻的一个方面是它的自动生成文档。当您构建表格时，您的文档实际上是自己构建的。你所要做的就是点击菜单上的文档图标。</p><figure class="me mf mg mh gt ju gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/071926ea897c80f7cd07bfbcdbe405dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:606/format:webp/1*mFcKk9hiXoR57aOr9oe3Lw.png"/></div><figcaption class="jx jy gj gh gi jz ka bd b be z dk translated">超级文档</figcaption></figure><h1 id="af03" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">从前端初始化超级数据库</h1><p id="fff2" class="pw-post-body-paragraph kb kc it kd b ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku mc kw kx ky im bi translated">现在挑选你喜欢的前端框架(React、Vue、Angular等)。在文档的简介选项卡下，您将看到如何初始化Supabase:</p><h2 id="5260" class="mr lb it bd lc my mz dn lg na nb dp lk km nc nd lo kq ne nf ls ku ng nh lw ni bi translated">安装</h2><pre class="me mf mg mh gt mm mn mo mp aw mq bi"><span id="c4bb" class="mr lb it mn b gy ms mt l mu mv">npm install --save @supabase/supabase-js</span></pre><h2 id="3dd3" class="mr lb it bd lc my mz dn lg na nb dp lk km nc nd lo kq ne nf ls ku ng nh lw ni bi translated">正在初始化</h2><pre class="me mf mg mh gt mm mn mo mp aw mq bi"><span id="cf90" class="mr lb it mn b gy ms mt l mu mv"><em class="nj">import</em> <em class="nj">from</em> '@supabase/supabase-js'</span><span id="d42e" class="mr lb it mn b gy nk mt l mu mv"><em class="nj">const</em> supabaseUrl = 'https://&lt;YOUR_DATABASE_URL&gt;.supabase.co'<br/><em class="nj">const</em> supabaseKey = process.env.SUPABASE_KEY<br/><em class="nj">const</em> supabase = createClient(supabaseUrl, supabaseKey)</span></pre><h1 id="d33c" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">RESTful API</h1><p id="4a69" class="pw-post-body-paragraph kb kc it kd b ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku mc kw kx ky im bi translated">在我们文档的表和视图部分，您会看到我们的用户表。如果您点击它，您将得到您的表模式和文档，用于在users表上执行CRUD操作。</p><h2 id="2ea3" class="mr lb it bd lc my mz dn lg na nb dp lk km nc nd lo kq ne nf ls ku ng nh lw ni bi translated">创造</h2><p id="cb22" class="pw-post-body-paragraph kb kc it kd b ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku mc kw kx ky im bi translated">要在我们的用户表中插入一条记录，我们可以运行下面的代码:</p><pre class="me mf mg mh gt mm mn mo mp aw mq bi"><span id="880a" class="mr lb it mn b gy ms mt l mu mv">const createUser = async () =&gt; {<br/> try {<br/>  let user = await supabase<br/>  .from('users')<br/>  .insert([<br/>   {<br/>     firstName:'Diligent', <br/>     lastName: 'Dev, <br/>     username: 'DDev', <br/>     email: 'TheDiligentDev'<br/>   }<br/>  ])<br/>  <br/>  return user;<br/> } catch (error) {<br/>  console.log('Error: ', error)<br/> }<br/>}</span></pre><p id="58cb" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">要插入多条记录，您可以在插入数组中添加任意数量的用户对象。</p><h2 id="5c03" class="mr lb it bd lc my mz dn lg na nb dp lk km nc nd lo kq ne nf ls ku ng nh lw ni bi translated">阅读</h2><p id="9b66" class="pw-post-body-paragraph kb kc it kd b ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku mc kw kx ky im bi translated">要查询users表中的所有列,运行以下命令:</p><pre class="me mf mg mh gt mm mn mo mp aw mq bi"><span id="f795" class="mr lb it mn b gy ms mt l mu mv">const getUsers = async () =&gt; {<br/> try {<br/>  let user = await supabase<br/>  .from('users')<br/>  .select('*')<br/>  <br/>  return user;<br/> } catch (error) {<br/>  console.log('Error: ', error)<br/> }<br/>}</span></pre><p id="b827" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">要查询users表中的特定列,运行以下命令:</p><pre class="me mf mg mh gt mm mn mo mp aw mq bi"><span id="3fcd" class="mr lb it mn b gy ms mt l mu mv">const getUsers = async () =&gt; {<br/> try {<br/>  let user = await supabase<br/>  .from('users')<br/>  .select('firstName, email')<br/>  <br/>  return user;<br/> } catch (error) {<br/>  console.log('Error: ', error)<br/> }<br/>}</span></pre><h2 id="f891" class="mr lb it bd lc my mz dn lg na nb dp lk km nc nd lo kq ne nf ls ku ng nh lw ni bi translated">更新</h2><p id="f86f" class="pw-post-body-paragraph kb kc it kd b ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku mc kw kx ky im bi translated">要更新用户，您可以运行以下命令:</p><pre class="me mf mg mh gt mm mn mo mp aw mq bi"><span id="07e9" class="mr lb it mn b gy ms mt l mu mv">const getUsers = async () =&gt; {<br/> try {<br/>  let user = await supabase<br/>  .from('users')<br/>  .update({firstName: 'Developer'})<br/>  .match({ name: 'Diligent' })</span><span id="c167" class="mr lb it mn b gy nk mt l mu mv">   return user;<br/> } catch (error) {<br/>  console.log('Error: ', error)<br/> }<br/>}</span></pre><h2 id="2c30" class="mr lb it bd lc my mz dn lg na nb dp lk km nc nd lo kq ne nf ls ku ng nh lw ni bi translated">删除</h2><p id="ede8" class="pw-post-body-paragraph kb kc it kd b ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku mc kw kx ky im bi translated">要删除用户，您可以运行以下命令:</p><pre class="me mf mg mh gt mm mn mo mp aw mq bi"><span id="a9d9" class="mr lb it mn b gy ms mt l mu mv">const deleteUser = async () =&gt; {<br/> try {<br/>  let values = await supabase<br/>  .from('users')<br/>  .match({ id: 1})<br/>  .delete()</span><span id="7b62" class="mr lb it mn b gy nk mt l mu mv">  return values;<br/> } catch (error) {<br/>  console.log('Error: ', error)<br/> }<br/>}</span></pre><h1 id="2263" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">订阅更改</h1><h2 id="c6cb" class="mr lb it bd lc my mz dn lg na nb dp lk km nc nd lo kq ne nf ls ku ng nh lw ni bi translated">订阅所有事件</h2><pre class="me mf mg mh gt mm mn mo mp aw mq bi"><span id="0fad" class="mr lb it mn b gy ms mt l mu mv"><em class="nj">const</em> users = supabase<br/> .<em class="nj">from</em>('users')<br/> .on('*', payload =&gt; {<br/>   console.log('Change received!', payload)<br/>}).subscribe()</span></pre><h2 id="1572" class="mr lb it bd lc my mz dn lg na nb dp lk km nc nd lo kq ne nf ls ku ng nh lw ni bi translated">订阅插页</h2><pre class="me mf mg mh gt mm mn mo mp aw mq bi"><span id="1d3b" class="mr lb it mn b gy ms mt l mu mv"><em class="nj">const</em> users = supabase<br/> .<em class="nj">from</em>('users')<br/> .on('INSERT', payload =&gt; {<br/>   console.log('Change received!', payload)<br/>}).subscribe()</span></pre><h2 id="6d33" class="mr lb it bd lc my mz dn lg na nb dp lk km nc nd lo kq ne nf ls ku ng nh lw ni bi translated">订阅更新</h2><pre class="me mf mg mh gt mm mn mo mp aw mq bi"><span id="d674" class="mr lb it mn b gy ms mt l mu mv"><em class="nj">const</em> users = supabase<br/> .<em class="nj">from</em>('users')<br/> .on('UPDATE', payload =&gt; {<br/>   console.log('Change received!', payload)<br/>}).subscribe()</span></pre><h2 id="d287" class="mr lb it bd lc my mz dn lg na nb dp lk km nc nd lo kq ne nf ls ku ng nh lw ni bi translated">订阅删除</h2><pre class="me mf mg mh gt mm mn mo mp aw mq bi"><span id="6cf8" class="mr lb it mn b gy ms mt l mu mv"><em class="nj">const</em> users = supabase<br/> .<em class="nj">from</em>('users')<br/> .on('UPDATE', payload =&gt; {<br/>   console.log('Change received!', payload)<br/>}).subscribe()</span></pre><h2 id="3a93" class="mr lb it bd lc my mz dn lg na nb dp lk km nc nd lo kq ne nf ls ku ng nh lw ni bi translated">订阅特定的行</h2><pre class="me mf mg mh gt mm mn mo mp aw mq bi"><span id="232c" class="mr lb it mn b gy ms mt l mu mv"><em class="nj">const</em> users = supabase<br/> .<em class="nj">from</em>('users')<br/> .eq('column_name', 'someValue')<br/> .on('UPDATE', payload =&gt; {<br/>   console.log('Change received!', payload)<br/> }).subscribe()</span></pre><h1 id="6f41" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">存储过程</h1><p id="f1fd" class="pw-post-body-paragraph kb kc it kd b ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku mc kw kx ky im bi translated">您还可以使用Supabase执行存储过程。例如，假设我们有一个名为“echo_users”的存储过程，它采用firstName参数。要执行它，我们可以运行以下命令:</p><pre class="me mf mg mh gt mm mn mo mp aw mq bi"><span id="547b" class="mr lb it mn b gy ms mt l mu mv">const echoUsers = async () =&gt; {<br/> try{<br/>  let users = await supabase<br/>   .rpc('echo_users', { firstName: 'Diligent' })<br/>  <br/>  return users<br/>  } catch (error) {<br/>    console.log('Error: ', error)<br/>  }<br/> }<br/>}</span></pre><h1 id="2f55" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">视频演示</h1><figure class="me mf mg mh gt ju"><div class="bz fp l di"><div class="nl nm l"/></div><figcaption class="jx jy gj gh gi jz ka bd b be z dk translated">Supabase的视频演示</figcaption></figure><h1 id="99fb" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">最后的想法</h1><p id="7a86" class="pw-post-body-paragraph kb kc it kd b ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku mc kw kx ky im bi translated">我相信在Alpha发布之后，会有很多人采用这项技术。我喜欢Firebase的易用性和SQL数据库的强大功能。我个人计划在我的下一个兼职项目中使用它。</p><p id="2bae" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我很想听听你的想法。你会把它作为Firebase的替代品吗？请在下面留言，让我知道你的想法。一如既往，祝您编码愉快！</p></div></div>    
</body>
</html>