# 代码中有异味

> 原文：<https://levelup.gitconnected.com/bad-smells-in-code-267b989256a6>

![](img/ec5740945ce5e44ac295acca7efc987f.png)

布鲁克·卡吉尔在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上的照片

写软件很难。只有几种方法可以把事情做好，但有很多方法会做错，让我们的生活变得艰难。

在这篇文章中，我们将通过观察一些代码气味来研究一些编写糟糕代码的方法。

# 重复代码

重复的代码几乎总是不好的。如果我们在多个地方看到相同的代码结构，那么我们必须通过统一它们然后引用那段代码来改变它。

例如，如果我们在同一个类的两个方法中有两个表达式，那么我们可以把重复的表达式放在它们自己的方法中。

当我们在两个兄弟子类中有两个表达式时，我们可以把重复的表达式放在超类中。

如果我们在两个不相关的类中复制了代码，那么如果语言允许我们编写独立的函数，我们可以将它们放入它们自己的类或顶级函数中。

# 长方法

我们可以把一个长方法分成做一件事的更小的方法。

这样，我们可以更容易地阅读每个方法，并知道它们在做什么。

程序越长，我们就越难理解。因此，我们应该将它们分解成几行长的更小的方法。

我们也可以通过用较短的表达式替换较长的表达式来清理代码。

例如，我们可以用做同样事情的数组方法代替 JavaScript 循环。

# 大班

一个大班试图做太多。它可能有许多实例变量和方法。

因此，我们应该通过将一个大类分成做同样事情的更小的类来减少它们。

我们可以将大班提取成只做一件事的小班。

这样，我们可以让内容更容易阅读和理解。

例如，如果我们正在编写 web 应用程序，那么我们需要将表示逻辑与业务逻辑分开。

然后我们有两段代码，它们做自己的事情。我们还必须保持它们的松散耦合，不要过多地引用彼此的实现。

# 长参数列表

函数中长长的参数列表需要减少。如果我们有超过 5 个，那么我们必须想办法减少它们。

参数越少，功能越好。

更多的参数意味着在传递参数时更容易出错，

一种方法是把所有东西都放在一个对象中，这样我们就不必把不同的东西作为单独的参数传入。

# 发散变化

如果我们有多个以不同方式改变但共享相同代码的类，我们可以将它们之间的公共代码移动到一个位置，然后在那里引用它们。

这样，只有不同的代码在它们自己的地方，而相同的代码在一个地方。

![](img/fade697423a152bf61e3c57e1837792d.png)

丹尼尔·阿波达卡在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄的照片

# 猎枪手术

霰弹枪手术在不同的班级改变不同的代码。他们都很难找到，很容易错过一个重要的变化。

我们可以通过将共享代码移动到它们自己的位置来处理这个问题，我们可以一次对那个部分进行所有的更改，这样我们就不必到处进行小的更改。

# 特征羡慕

这是一种代码味道，我们从许多不同的地方获得所有的数据，并将它们放在一起以获得一些结果。

这使得类之间的耦合紧密，因此任何更改都有风险。

我们不应该引用代码的许多部分，而是应该通过创建一个方法来引用原始类中的所有代码，然后使用该方法来获得我们想要的结果，从而减少耦合。

数据通常都在一个类中，但是我们不想以松散耦合的方式访问它们。

# 数据块

我们可能经常在许多不同的地方看到相同的几条数据。

如果数据块显示为字段，那么我们可以将这些数据块转换成它自己的对象，这样我们就可以在任何地方引用它们。

如果数据块作为参数传递给函数，那么我们可以将它们组合成一个对象参数，以避免作为多个参数传递。

相反，我们有一个可以在任何地方使用的对象参数/

# 结论

正如我们所看到的，有很多方法可以用混乱的方式编写代码。

应该合并重复的代码。多个数据块应该合并成一个，这样我们就可以一起使用它们。

紧密耦合应该大部分解耦，以降低破坏事物的风险。