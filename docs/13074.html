<html>
<head>
<title>Development History of Java Logging</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Java日志记录的发展历史</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/development-history-of-java-logging-767e8955b553?source=collection_archive---------7-----------------------#2022-08-04">https://levelup.gitconnected.com/development-history-of-java-logging-767e8955b553?source=collection_archive---------7-----------------------#2022-08-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="833d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在有这么多Java日志框架。它们之间是什么关系，我们应该如何使用它们？</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/146acf61b1a8c8928b0ce0da02c042ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MG4Kt0UpKUy71mPGeCKt4g.jpeg"/></div></div></figure><p id="0996" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">日志对于Java开发者来说太熟悉了，但是相信很多人都有这样的疑惑。Java中有几个日志框架，比如Log4j、Logback、JCL和slf4j。这些日志框架之间有什么区别和联系？我们应该如何使用它们？本文将着眼于Java世界日志系统的开发。</p><h2 id="d75a" class="la lb it bd lc ld le dn lf lg lh dp li kb lj lk ll kf lm ln lo kj lp lq lr ls bi translated">原始阶段</h2><p id="bee7" class="pw-post-body-paragraph jq jr it js b jt lt jv jw jx lu jz ka kb lv kd ke kf lw kh ki kj lx kl km kn im bi translated">在早期，没有日志框架。大家用最原始最粗糙的方式记录日志。如<code class="fe ly lz ma mb b">System.out.println</code>、<code class="fe ly lz ma mb b">System.err.println</code>。虽然这种原始方法也可以解决基本的日志记录问题，但是这种方法有许多缺点。</p><ul class=""><li id="064e" class="mc md it js b jt ju jx jy kb me kf mf kj mg kn mh mi mj mk bi translated">系统的标准输出是同步的。我们可以看到<code class="fe ly lz ma mb b">println()</code>的源代码。</li></ul><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="ml mm l"/></div></figure><p id="2d21" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们可以看到源代码使用了synchronization关键字，对象锁是<code class="fe ly lz ma mb b">PrintStream</code>。如果在高并发环境下输出大量日志，会导致大量应用线程因日志而被阻塞，严重影响系统性能。</p><ul class=""><li id="1397" class="mc md it js b jt ju jx jy kb me kf mf kj mg kn mh mi mj mk bi translated">日志粒度太粗，只有信息和错误级别。</li><li id="0726" class="mc md it js b jt mn jx mo kb mp kf mq kj mr kn mh mi mj mk bi translated">无法根据环境确定是否输出日志。</li></ul><h2 id="9514" class="la lb it bd lc ld le dn lf lg lh dp li kb lj lk ll kf lm ln lo kj lp lq lr ls bi translated">Log4j诞生了</h2><p id="e4ea" class="pw-post-body-paragraph jq jr it js b jt lt jv jw jx lu jz ka kb lv kd ke kf lw kh ki kj lx kl km kn im bi translated">出于这些原因，ceki Gulcü在2001年开发了log4j。Log4j一出现就赢得了开发者的青睐，后来成为Apache基金会的顶级项目。Log4j是Java日志框架发展的里程碑。提出了<code class="fe ly lz ma mb b">Appender</code>、<code class="fe ly lz ma mb b">Level</code>、<code class="fe ly lz ma mb b">Logger</code>等概念，为测井框架奠定了基础。到目前为止，log4j仍然是许多开发人员首选的日志框架。Apache曾经建议sun团队将log4j作为JDK的首选日志框架，但是sun直接拒绝了(我猜是嫉妒)。</p><h2 id="2290" class="la lb it bd lc ld le dn lf lg lh dp li kb lj lk ll kf lm ln lo kj lp lq lr ls bi translated">七月</h2><p id="a6a1" class="pw-post-body-paragraph jq jr it js b jt lt jv jw jx lu jz ka kb lv kd ke kf lw kh ki kj lx kl km kn im bi translated">后来Sun公司借鉴log4j开发了自己的日志标准库JUL (Java util logging)。但由于API不完善，对开发者不友好，开发者需要自己编写Appenders(被sun称为处理程序)，只有两个处理程序可用(控制台和文件)，很少使用。Log4j仍然是Java开发者的首选。但毕竟JUC是一个官方的日志框架，仍然被一些人使用。这时候，就出现了一个问题。系统中存在两种不同的日志框架。应该用哪个？</p><h2 id="a376" class="la lb it bd lc ld le dn lf lg lh dp li kb lj lk ll kf lm ln lo kj lp lq lr ls bi translated">作业控制语言</h2><p id="5ce1" class="pw-post-body-paragraph jq jr it js b jt lt jv jw jx lu jz ka kb lv kd ke kf lw kh ki kj lx kl km kn im bi translated">为了统一日志标准，Apache推出了JCL (Jakarta common logging)，这是一个日志门面接口，避免了系统与具体日志框架的直接耦合，类似于JDBC接口。将来，业务应用程序只需要使用JCL接口来打印日志。JCL可以动态地找到当前使用的日志框架，动态地决定是使用log4j还是JUL，如果不是，就使用默认的<code class="fe ly lz ma mb b">SimpleLog</code>。但是JCL对日志框架的配置兼容性很差，而且由于JCL是通过定制类加载器来判断并加载类路径下的日志框架，所以很容易造成内存泄漏。</p><h2 id="13d5" class="la lb it bd lc ld le dn lf lg lh dp li kb lj lk ll kf lm ln lo kj lp lq lr ls bi translated">Slf4j</h2><p id="94b7" class="pw-post-body-paragraph jq jr it js b jt lt jv jw jx lu jz ka kb lv kd ke kf lw kh ki kj lx kl km kn im bi translated">基于以上问题，log4j的作者ceki Gulcü开发了新的日志标准接口规范slf4j(Java的简单日志门面)，后来又开发了logback日志框架。为了方便开发者统一使用slf4j，他还开发了各种桥接SDK。到目前为止，无论您的系统使用多少日志框架，您都可以桥接到slf4j，最终，您可以使用统一的日志框架。</p><h2 id="00ea" class="la lb it bd lc ld le dn lf lg lh dp li kb lj lk ll kf lm ln lo kj lp lq lr ls bi translated">Java日志记录最佳实践</h2><p id="26b7" class="pw-post-body-paragraph jq jr it js b jt lt jv jw jx lu jz ka kb lv kd ke kf lw kh ki kj lx kl km kn im bi translated">这么多日志框架，用哪个？答案不是依赖特定的日志实现而是使用facade日志接口slf4j，强烈建议使用slf4j+logback。为了与其他日志框架兼容，您可以使用slf4j的桥接库通过logback打印日志。Maven依赖于以下内容。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="ml mm l"/></div></figure></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><p id="924c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">终于，Java日志记录的历史结束了。本文还给出Java日志记录的最佳实践。希望这篇文章能帮助你了解Java日志系统。感谢您的阅读。</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="e96c" class="mz lb it bd lc na nb nc lf nd ne nf li ng nh ni ll nj nk nl lo nm nn no lr np bi translated">分级编码</h1><p id="2c8f" class="pw-post-body-paragraph jq jr it js b jt lt jv jw jx lu jz ka kb lv kd ke kf lw kh ki kj lx kl km kn im bi translated">感谢您成为我们社区的一员！在你离开之前:</p><ul class=""><li id="b4a5" class="mc md it js b jt ju jx jy kb me kf mf kj mg kn mh mi mj mk bi translated">👏为故事鼓掌，跟着作者走👉</li><li id="0b6a" class="mc md it js b jt mn jx mo kb mp kf mq kj mr kn mh mi mj mk bi translated">📰查看<a class="ae nq" href="https://levelup.gitconnected.com/?utm_source=pub&amp;utm_medium=post" rel="noopener ugc nofollow" target="_blank">升级编码出版物</a>中的更多内容</li><li id="7510" class="mc md it js b jt mn jx mo kb mp kf mq kj mr kn mh mi mj mk bi translated">🔔关注我们:<a class="ae nq" href="https://twitter.com/gitconnected" rel="noopener ugc nofollow" target="_blank">Twitter</a>|<a class="ae nq" href="https://www.linkedin.com/company/gitconnected" rel="noopener ugc nofollow" target="_blank">LinkedIn</a>|<a class="ae nq" href="https://newsletter.levelup.dev" rel="noopener ugc nofollow" target="_blank">时事通讯</a></li></ul><p id="5172" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">🚀👉<a class="ae nq" href="https://jobs.levelup.dev/talent/welcome?referral=true" rel="noopener ugc nofollow" target="_blank"> <strong class="js iu">加入升级人才集体，找到一份惊艳的工作</strong> </a></p></div></div>    
</body>
</html>