<html>
<head>
<title>The Ultimate Guide for Developing a Full Stack Java Web Application with Spring</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Spring开发全栈Java Web应用程序的终极指南</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/the-ultimate-guide-for-developing-a-full-stack-java-web-application-with-spring-cd385759172?source=collection_archive---------2-----------------------#2021-03-29">https://levelup.gitconnected.com/the-ultimate-guide-for-developing-a-full-stack-java-web-application-with-spring-cd385759172?source=collection_archive---------2-----------------------#2021-03-29</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="6a4d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在本文中，我们将使用Spring framework开发一个完整的java web应用程序:一个非常简单的在线书店。首先，我们将设置我们的开发环境。接下来，我们将构建我们的数据模型，Spring将使用它来生成我们的数据库。之后，我们将实现一个控制器来从数据库中检索我们的数据，最后我们将使用Thymeleaf来格式化数据，并使用内置的Tomcat服务器将数据提供给客户端。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/22974d1961313b8f290b9e9356190f88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8R5B_LRuli6JjogWugLV9Q.png"/></div></div></figure><p id="16a6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Spring框架在工业中被广泛用于开发各种web应用程序。一些公司仅使用它来开发他们的后端，而另一些公司在他们的后端和前端都采用它。在本教程中，我们将探索如何使用Spring框架用Java为书店编写一个全栈web应用程序。这个应用程序将允许用户连接到服务器，并检索书籍的详细信息。所以事不宜迟，让我们从设置开发环境开始。</p><p id="0346" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">设置开发环境</strong></p><p id="1a54" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">要开始实现Java应用程序，您需要在开发和运行时环境中安装Java开发工具包。你可以从<a class="ae la" href="https://www.oracle.com/java/technologies/javase-downloads.html" rel="noopener ugc nofollow" target="_blank">官网</a>下载JDK 1.8或更高版本。</p><p id="7b0f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">接下来，您将使用以下两种构建工具之一:</p><ul class=""><li id="92b9" class="lb lc it js b jt ju jx jy kb ld kf le kj lf kn lg lh li lj bi translated"><a class="ae la" href="https://gradle.org/install/" rel="noopener ugc nofollow" target="_blank"> <strong class="js iu"> Gradle 4+ </strong> </a></li><li id="2b5c" class="lb lc it js b jt lk jx ll kb lm kf ln kj lo kn lg lh li lj bi translated"><a class="ae la" href="https://maven.apache.org/download.cgi" rel="noopener ugc nofollow" target="_blank"> <strong class="js iu"> Maven 3.2+ </strong> </a></li></ul><p id="d167" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在本教程中，我们将使用Maven。这种选择是完全随意的，您可以用这两种工具获得相同的结果。Gradle和Maven是主要用于Java项目的构建自动化工具。所以每次你想编译和启动你的Spring项目的时候，这些工具会解析所有的依赖，编译你的代码并打包。如果你想了解更多关于Gradle或Maven的知识，你可以参考他们写得非常好的官方文档。</p><p id="aa4d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您最不需要的就是IDE。对于Java，我建议您使用IntelliJ IDE。你可以从JetBrains官网下载。您也可以使用其他ide，如Eclipse或NetBeans，它们与Java配合得非常好。</p><p id="2c3a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在我们已经有了所有必要的工具，让我们开始创建我们的项目。</p><p id="875b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">使用Spring Initializr创建项目</strong></p><p id="bfa4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">回溯几年，春天立项是很痛苦的。您必须手动包含所有依赖项，并正确设置项目目录。谢天谢地，现在我们有了一个叫做Spring Initializr的工具可以帮我们做到这一点。Initializr是一个开源软件，所以你可以在Github的这里查看<a class="ae la" href="https://github.com/spring-io/initializr" rel="noopener ugc nofollow" target="_blank">。最棒的是有一个实现Initializr的web应用:</a><a class="ae la" href="http://start.spring.io" rel="noopener ugc nofollow" target="_blank"> start.spring.io </a></p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi lp"><img src="../Images/6fc185dcc49f6408cc1f4df49d3d00f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qUys3yfKw8jmfqAS-FvRUw.png"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk translated">使用start.spring.io生成Spring项目</figcaption></figure><p id="60b2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">选择Maven项目、Java和您想要使用的SpringBoot版本。如上所示，填写您的项目的详细信息。我们将使用Jar打包和Java 11。您仍然可以使用Java 8，因为在本教程中我们不会使用任何新特性。您需要做的最后一件事是为您的项目选择依赖项。我们将在这个项目中使用4个依赖项:</p><ul class=""><li id="2506" class="lb lc it js b jt ju jx jy kb ld kf le kj lf kn lg lh li lj bi translated">Spring Web for web development:这种依赖来自一个内置的Tomcat服务器，它将简化很多服务器配置。它将帮助我们构建web路由并将其连接到我们的应用程序。</li><li id="5fc5" class="lb lc it js b jt lk jx ll kb lm kf ln kj lo kn lg lh li lj bi translated">Spring Data JPA:这种依赖将帮助我们构建数据模型，并且在没有任何SQL的情况下轻松操作数据库查询。</li><li id="13dc" class="lb lc it js b jt lk jx ll kb lm kf ln kj lo kn lg lh li lj bi translated">H2数据库:这是我们将存储数据的数据库。</li><li id="54c6" class="lb lc it js b jt lk jx ll kb lm kf ln kj lo kn lg lh li lj bi translated">这种依赖将帮助我们构建动态HTML页面，将查询结果提供给客户端。</li></ul><p id="b4e3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们现在可以点击<strong class="js iu"> Generate </strong>来下载包含我们的项目样本目录的归档文件。</p><p id="1adb" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">探索项目目录</strong></p><p id="fcad" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们从探索我们的目录开始，以便更好地理解我们的Spring项目的不同组件。</p><p id="45e3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe lu lv lw lx b">.mvn</code>:这个目录包含将用于编译的特定于Maven的文件。</p><p id="c735" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe lu lv lw lx b">src/main/java</code>:这个目录将包含我们应用程序的实际Java代码。</p><p id="ed34" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe lu lv lw lx b">src/main/resources</code>:这个目录将包含我们使用百里香叶构建的动态HTML文件</p><p id="7530" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe lu lv lw lx b">mvn</code>和<code class="fe lu lv lw lx b">mvnw.cmd</code>:这些文件分别是Unix和Windows的Maven可执行文件，以防我们想在命令行中使用Maven。</p><p id="4205" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe lu lv lw lx b">pom.xml</code>:这是Spring的配置文件，包含了所有的依赖项。如果您仔细检查它，您会看到我们之前在项目中包含的4个依赖项。如果以后想添加更多的依赖项，可以在这个配置文件中添加，Maven将在下一次构建时解决这些依赖项。</p><p id="5125" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在我们对项目结构更加熟悉了，让我们从创建一个简单的html页面开始，并将其提供给我们的客户。</p><p id="441a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">为客户端提供静态HTML页面</strong></p><p id="7c54" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">为了使用内置的Tomcat服务器提供一个简单的html页面，我们需要实现我们的后端和前端。</p><p id="3023" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">后端</p><p id="37b9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们将使用控制器将路线映射到我们的应用程序。控制器的目标是实现向用户提供数据背后的逻辑。Spring MVC实现了MVC设计模式或模型、视图、控制器模式。该模式允许开发人员在开发过程中分离关注点，这意味着从数据库中检索数据的代码将完全独立于向用户提供数据的代码。同样，这两个单元将独立于向用户显示数据的前端或视图。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi ly"><img src="../Images/a43da5d5f74852967c74d491ef2164e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1142/format:webp/1*hoAOy3b_Ltv6vQTHBBFDrw.png"/></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk translated">MVC设计模式</figcaption></figure><p id="661d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">要编写第一个控制器，请转到<code class="fe lu lv lw lx b">src/main/java/com/springframework/bookstore</code>并创建一个名为<code class="fe lu lv lw lx b">controllers</code>的包。在这个包中，创建下面的<code class="fe lu lv lw lx b">HelloController</code>:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="lz ma l"/></div></figure><p id="628c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe lu lv lw lx b">@Controller</code>将告诉Spring考虑将<code class="fe lu lv lw lx b">HelloController</code>类作为控制器。</p><p id="25b5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe lu lv lw lx b">@RequestMapping</code>将把路线<code class="fe lu lv lw lx b">'/'</code>映射到功能<code class="fe lu lv lw lx b">helloMessage()</code>。所以每次一个GET请求被发送到<code class="fe lu lv lw lx b">'/'</code>，函数<code class="fe lu lv lw lx b">helloMessage()</code>就被调用。</p><p id="a32b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">返回值是一个名为<code class="fe lu lv lw lx b">books/hello</code>的模板。这个字符串是对我们将在下一段中构建的html模板的引用。</p><p id="acf5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">前端</p><p id="1eb8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">要创建提供给客户端的模板，请转到<code class="fe lu lv lw lx b">src/main/resources/templates</code>并创建一个名为<code class="fe lu lv lw lx b">books</code>的包。在此包中，添加以下HTML文件:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="lz ma l"/></div></figure><p id="68e9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在，在您的IDE中运行该应用程序，并检查日志以验证Tomcat web服务器已经在端口8080上启动。在您的浏览器中转至<code class="fe lu lv lw lx b">localhost:8080/</code>，查看提供的hello模板！</p><p id="f2ab" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">建立数据模型</strong></p><p id="8dc7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">为了给我们的web应用程序添加更多的功能，我们想要创建一个数据模型。这是我们项目中上面讨论的MVC框架中缺失的部分。为此，我们首先为书籍和作者构建类。这些类将作为H2数据库的模型。然后，我们将使用依赖Spring数据JPA来构建我们的数据库，并在不使用任何SQL查询的情况下添加样本数据。</p><p id="a89e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">为了构建书籍和作者的模型，我们需要首先编写定义一个<code class="fe lu lv lw lx b">Book</code>对象和一个<code class="fe lu lv lw lx b">Author</code>对象的类。这些类将保存与相应对象相关联的字段的详细信息，例如:</p><ul class=""><li id="a304" class="lb lc it js b jt ju jx jy kb ld kf le kj lf kn lg lh li lj bi translated"><strong class="js iu">每个作者:</strong>名、姓和写的书</li><li id="4ec7" class="lb lc it js b jt lk jx ll kb lm kf ln kj lo kn lg lh li lj bi translated"><strong class="js iu">每本书:</strong>书名、识别号和作者</li></ul><p id="8b9a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">你可以看到我们在书籍和作者之间有着多对多的关系。这意味着每本书可以有多个作者，每个作者可以写很多本书。</p><p id="fbba" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">要创建这些类，请到<code class="fe lu lv lw lx b">src/main/java/com/springframework/bookstore</code>并创建一个名为<code class="fe lu lv lw lx b">domain</code>的包。在这个包中，为书籍和作者添加以下两个类。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="lz ma l"/></div></figure><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="lz ma l"/></div></figure><p id="7558" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这两个类都非常简单，因为它们不包含任何功能。他们只是为书籍和作者指定已经提到的有趣的领域。剩下的只是像getters和setters这样的实用函数。你必须注意的事情:</p><ul class=""><li id="ccae" class="lb lc it js b jt ju jx jy kb ld kf le kj lf kn lg lh li lj bi translated"><code class="fe lu lv lw lx b">@Entity</code>:这告诉Spring将下面的类视为数据模型</li><li id="4f00" class="lb lc it js b jt lk jx ll kb lm kf ln kj lo kn lg lh li lj bi translated"><code class="fe lu lv lw lx b">@Id</code>和<code class="fe lu lv lw lx b">@GeneratedValue</code>:我们添加字段<code class="fe lu lv lw lx b">id</code>作为这两个对象插入数据库时的主键。该字段将自动生成。</li><li id="08cb" class="lb lc it js b jt lk jx ll kb lm kf ln kj lo kn lg lh li lj bi translated"><code class="fe lu lv lw lx b">@ManyToMany</code>:这将在两个对象Author和Book之间创建一个关系，当我们开始向数据库中插入authors和Book时，这个关系最终将变成表。</li></ul><p id="9469" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">正如我们定义的类一样，我们现在需要编写方法来插入、修改或删除数据库中的书籍和作者。幸运的是，Spring自动做到了这一点。它为我们提供了完成所有数据库操作所需的所有方法。我们唯一需要做的事情是定义我们将用来查询数据库的对象。</p><p id="e566" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">转到<code class="fe lu lv lw lx b">src/main/java/com/springframework/bookstore</code>并创建一个名为<code class="fe lu lv lw lx b">repositories</code>的包。在这个包中，添加以下接口，我们将使用这些接口来查询我们的H2数据库。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="lz ma l"/></div></figure><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="lz ma l"/></div></figure><p id="89ea" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在让我们为测试目的向数据库添加几个字段。为此，转到<code class="fe lu lv lw lx b">src/main/java/com/springframework/bookstore</code>并创建一个名为<code class="fe lu lv lw lx b">bootstrap</code>的包。在这个包中，添加下面的Java类<code class="fe lu lv lw lx b">BootStrapData</code>，它扩展了<code class="fe lu lv lw lx b">CommandLineRunner</code>。这将告诉Spring在我们启动项目时执行<code class="fe lu lv lw lx b">run</code>方法。在这个方法中，我们初始化一些作者和书籍，并将它们添加到数据库中。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="lz ma l"/></div></figure><p id="cfcf" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">使用百里香叶创建动态HTML页面</strong></p><p id="0e7c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">要创建动态HTML页面，请转到<code class="fe lu lv lw lx b">src/main/resources/templates/books</code>并添加以下HTML文件。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="lz ma l"/></div></figure><p id="ed92" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在第2行，我们告诉Spring使用Timeleaf根据数据库查询结果生成动态HTML。查询在第14行和第16行之间。对于<code class="fe lu lv lw lx b">${books}</code>数据库中的每个<code class="fe lu lv lw lx b">book</code>，Spring都会创建一个包含<code class="fe lu lv lw lx b">book.id</code>和<code class="fe lu lv lw lx b">book.title</code>的行。</p><p id="d87b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">完成后，回到你的<code class="fe lu lv lw lx b">components</code>包，创建一个<code class="fe lu lv lw lx b">BookController</code>和<code class="fe lu lv lw lx b">HelloController</code>一模一样，但是映射到路径<code class="fe lu lv lw lx b">/books</code>。</p><p id="97d3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">启动您的Spring应用程序，并在浏览器中转至<code class="fe lu lv lw lx b">localhost:8080/books</code>。您将看到您的表格，其中有我们添加到数据库中的两本书！</p></div><div class="ab cl mb mc hx md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="im in io ip iq"><p id="fae0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我希望这篇教程是进入Spring应用程序世界的一个简单的切入点。我们一起学习了如何将所有不同的部分组合在一起:模型、视图和控制器，以构建一个功能完整的全栈Java应用程序。</p></div></div>    
</body>
</html>