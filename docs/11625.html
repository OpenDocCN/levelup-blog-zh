<html>
<head>
<title>API Tutorial: How to use Bing Web Search API in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">API教程:如何在Python中使用Bing Web搜索API</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/api-tutorial-how-to-use-bing-web-search-api-in-python-4165d5592a7e?source=collection_archive---------1-----------------------#2022-04-01">https://levelup.gitconnected.com/api-tutorial-how-to-use-bing-web-search-api-in-python-4165d5592a7e?source=collection_archive---------1-----------------------#2022-04-01</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="b7bd" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">关于如何获得网络搜索结果的Python教程</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj kj"><img src="../Images/355cdad84ec43c04980eb6512b8dfb2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:726/0*ANk-CLmU6I-mCbMT"/></div><figcaption class="kr ks gk gi gj kt ku bd b be z dk translated"><a class="ae kv" href="https://img-prod-cms-rt-microsoft-com.akamaized.net/cms/api/am/imageFileData/RE4Dd58" rel="noopener ugc nofollow" target="_blank">网络搜索API |微软必应</a></figcaption></figure><p id="46b1" class="pw-post-body-paragraph kw kx iu ky b kz la jv lb lc ld jy le lf lg lh li lj lk ll lm ln lo lp lq lr in bi ls translated">需要快速获得网络搜索结果吗？微软Bing的网络搜索API正是这方面的合适应用。<a class="ae kv" href="https://www.microsoft.com/en-us/bing/apis/bing-web-search-api" rel="noopener ugc nofollow" target="_blank">必应的网络搜索API </a>通过一个API调用就能梳理数十亿的网页、图片、视频和新闻。</p><p id="553e" class="pw-post-body-paragraph kw kx iu ky b kz la jv lb lc ld jy le lf lg lh li lj lk ll lm ln lo lp lq lr in bi translated">Bing Web搜索API是一个RESTful Web服务，与大多数编程语言兼容。在本文中，我们将介绍如何使用Python调用API。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gi gj mb"><img src="../Images/f8e8f93db28ea6689667faf2efc2dab5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*sjh0PzMGXCt9dQJa.jpg"/></div></div><figcaption class="kr ks gk gi gj kt ku bd b be z dk translated"><a class="ae kv" href="https://www.google.com/url?sa=i&amp;url=https%3A%2F%2Fwww.pcmag.com%2Fnews%2F20-reasons-to-search-with-bing&amp;psig=AOvVaw0HJAfTo3PHu1459B2sFsa4&amp;ust=1648865784845000&amp;source=images&amp;cd=vfe&amp;ved=0CAsQjRxqFwoTCNDY5-3l8fYCFQAAAAAdAAAAABAD" rel="noopener ugc nofollow" target="_blank">必应搜索</a></figcaption></figure><h2 id="555a" class="mg mh iu bd mi mj mk dn ml mm mn dp mo lf mp mq mr lj ms mt mu ln mv mw mx my bi translated">用例</h2><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gi gj mz"><img src="../Images/050c8929663b0d6cfcd74b2568d4d01d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*47MuK74EmY3MAJar"/></div></div></figure><p id="7147" class="pw-post-body-paragraph kw kx iu ky b kz la jv lb lc ld jy le lf lg lh li lj lk ll lm ln lo lp lq lr in bi translated">对于我们的用例，我们将从Zillow列出的属性中提取ZPID字段。ZPID是Zillow网站上所列物业的唯一标识符。</p><p id="af1e" class="pw-post-body-paragraph kw kx iu ky b kz la jv lb lc ld jy le lf lg lh li lj lk ll lm ln lo lp lq lr in bi translated">房地产投资者和批发商需要财产细节来评估交易。通常使用场外物业，这些物业的信息可能有限。</p><blockquote class="na nb nc"><p id="7133" class="kw kx nd ky b kz la jv lb lc ld jy le ne lg lh li nf lk ll lm ng lo lp lq lr in bi translated">场外房产是不出售的房屋，或者是出售但没有公开上市的房屋。— <a class="ae kv" href="https://bungalow.com/articles/off-market-properties-what-are-they-and-how-to-buy" rel="noopener ugc nofollow" target="_blank">平房</a></p></blockquote><p id="18ad" class="pw-post-body-paragraph kw kx iu ky b kz la jv lb lc ld jy le lf lg lh li lj lk ll lm ln lo lp lq lr in bi translated">这可能是一份丧失抵押品赎回权前的房主名单，他们有出售房屋的动机。投资者会收到一份丧失抵押品赎回权前的房产清单，但需要更多的房产细节。</p><p id="a20f" class="pw-post-body-paragraph kw kx iu ky b kz la jv lb lc ld jy le lf lg lh li lj lk ll lm ln lo lp lq lr in bi translated">像价格历史、地段大小和区域划分这样的房产细节可以在像<a class="ae kv" href="https://apify.com/industries/real-estate" rel="noopener ugc nofollow" target="_blank"> Apify </a>这样的网络抓取工具中找到。</p><div class="nh ni gq gs nj nk"><a href="https://apify.com/petr_cermak/zillow-api-scraper#features" rel="noopener  ugc nofollow" target="_blank"><div class="nl ab fp"><div class="nm ab nn cl cj no"><h2 class="bd iv gz z fq np fs ft nq fv fx it bi translated">刮Zillow房地产上市🏘️阿皮菲</h2><div class="nr l"><h3 class="bd b gz z fq np fs ft nq fv fx dk translated">我们免费的Zillow scraper可以让你使用Zillow API提取Zillow上待售和出租的房产数据，但是…</h3></div><div class="ns l"><p class="bd b dl z fq np fs ft nq fv fx dk translated">apify.com</p></div></div><div class="nt l"><div class="nu l nv nw nx nt ny kp nk"/></div></div></a></div><p id="60f3" class="pw-post-body-paragraph kw kx iu ky b kz la jv lb lc ld jy le lf lg lh li lj lk ll lm ln lo lp lq lr in bi translated">为了获得地址的Zillow属性细节，ZPID是必需的。这就是Bing网络搜索API的用武之地！:)</p></div><div class="ab cl nz oa hy ob" role="separator"><span class="oc bw bk od oe of"/><span class="oc bw bk od oe of"/><span class="oc bw bk od oe"/></div><div class="in io ip iq ir"><h2 id="263a" class="mg mh iu bd mi mj mk dn ml mm mn dp mo lf mp mq mr lj ms mt mu ln mv mw mx my bi translated">设置</h2><p id="c836" class="pw-post-body-paragraph kw kx iu ky b kz og jv lb lc oh jy le lf oi lh li lj oj ll lm ln ok lp lq lr in bi translated">要开始，您需要:</p><ol class=""><li id="5efd" class="ol om iu ky b kz la lc ld lf on lj oo ln op lr oq or os ot bi translated"><a class="ae kv" href="https://www.microsoft.com/en-us/bing/apis/bing-web-search-api" rel="noopener ugc nofollow" target="_blank"> Bing网络搜索API </a>订阅密钥</li></ol><h2 id="c9ed" class="mg mh iu bd mi mj mk dn ml mm mn dp mo lf mp mq mr lj ms mt mu ln mv mw mx my bi translated">注册Bing网络搜索API</h2><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gi gj ou"><img src="../Images/a431899d14a64e12f7d913f87fb63b4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_Cxa9Vz5t7OjM60jUqVlfg.png"/></div></div><figcaption class="kr ks gk gi gj kt ku bd b be z dk translated"><a class="ae kv" href="https://www.microsoft.com/en-us/bing/apis/bing-web-search-api" rel="noopener ugc nofollow" target="_blank">必应网页搜索API </a></figcaption></figure><ul class=""><li id="ae34" class="ol om iu ky b kz la lc ld lf on lj oo ln op lr ov or os ot bi translated">进入<a class="ae kv" href="https://www.microsoft.com/en-us/bing/apis/bing-web-search-api" rel="noopener ugc nofollow" target="_blank"> Bing网页搜索API </a>，点击<strong class="ky iv">“立即试用”</strong></li><li id="0575" class="ol om iu ky b kz ow lc ox lf oy lj oz ln pa lr ov or os ot bi translated">登录您的Microsoft Azure帐户或创建一个新帐户</li></ul><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gi gj pb"><img src="../Images/64cd7eb8571c189814d4022a21c04d4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2nQ9qIKP4PcI_PC-qGyNhg.png"/></div></div></figure><ul class=""><li id="1725" class="ol om iu ky b kz la lc ld lf on lj oo ln op lr ov or os ot bi translated">选择“从Azure免费试用开始”</li><li id="aef4" class="ol om iu ky b kz ow lc ox lf oy lj oz ln pa lr ov or os ot bi translated">如果出现提示，请同意“订阅协议”</li><li id="6d95" class="ol om iu ky b kz ow lc ox lf oy lj oz ln pa lr ov or os ot bi translated">添加一种支付方式<em class="nd">(如果您在免费试用范围内，将不会被收费——每月1000次API调用)</em></li><li id="34fe" class="ol om iu ky b kz ow lc ox lf oy lj oz ln pa lr ov or os ot bi translated">命名您的Bing搜索API资源</li></ul><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gi gj pc"><img src="../Images/fcc25720c8ed12e35268174f09858f31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jz0vMTRjwqwcdf7tW-Zj2w.png"/></div></div><figcaption class="kr ks gk gi gj kt ku bd b be z dk translated">Azure API</figcaption></figure><ul class=""><li id="593c" class="ol om iu ky b kz la lc ld lf on lj oo ln op lr ov or os ot bi translated">在您的资源主页上，转到“管理密钥”</li></ul><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gi gj pd"><img src="../Images/7dc7e65d29e06d05e1a4338748288a2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TFzVDKfkcyR5A8rBuqYktw.png"/></div></div><figcaption class="kr ks gk gi gj kt ku bd b be z dk translated">Bing管理密钥</figcaption></figure><ul class=""><li id="1646" class="ol om iu ky b kz la lc ld lf on lj oo ln op lr ov or os ot bi translated">在“管理密钥”下，单击“显示密钥”并复制密钥1</li><li id="cd4d" class="ol om iu ky b kz ow lc ox lf oy lj oz ln pa lr ov or os ot bi translated">密钥1将成为您的<strong class="ky iv">订阅密钥</strong></li></ul><h2 id="8806" class="mg mh iu bd mi mj mk dn ml mm mn dp mo lf mp mq mr lj ms mt mu ln mv mw mx my bi translated">设置Python环境</h2><p id="983b" class="pw-post-body-paragraph kw kx iu ky b kz og jv lb lc oh jy le lf oi lh li lj oj ll lm ln ok lp lq lr in bi translated">为了调用API，我们需要一个环境来编写Python代码。</p><p id="2b31" class="pw-post-body-paragraph kw kx iu ky b kz la jv lb lc ld jy le lf lg lh li lj lk ll lm ln lo lp lq lr in bi translated">我强烈建议使用<a class="ae kv" href="https://research.google.com/colaboratory/faq.html" rel="noopener ugc nofollow" target="_blank"> Google Colab </a>。这是一个基于云的环境，可以免费使用。不需要本地设置。跟随<a class="ae kv" href="https://towardsdatascience.com/getting-started-with-google-colab-f2fff97f594c" rel="noopener" target="_blank">Google Colab入门教程</a>获取更多信息。</p><h1 id="a9f3" class="pe mh iu bd mi pf pg ph ml pi pj pk mo ka pl kb mr kd pm ke mu kg pn kh mx po bi translated">Python教程</h1><p id="8ffa" class="pw-post-body-paragraph kw kx iu ky b kz og jv lb lc oh jy le lf oi lh li lj oj ll lm ln ok lp lq lr in bi translated">查看<a class="ae kv" href="https://docs.microsoft.com/en-us/bing/search-apis/bing-web-search/quickstarts/rest/python" rel="noopener ugc nofollow" target="_blank">快速入门:使用Python调用Bing Web搜索API </a>获取更多信息。</p><h2 id="cb22" class="mg mh iu bd mi mj mk dn ml mm mn dp mo lf mp mq mr lj ms mt mu ln mv mw mx my bi translated">一.安装包</h2><pre class="kk kl km kn gu pp pq pr ps aw pt bi"><span id="56f3" class="mg mh iu pq b gz pu pv l pw px">!pip install requests</span></pre><h2 id="adcd" class="mg mh iu bd mi mj mk dn ml mm mn dp mo lf mp mq mr lj ms mt mu ln mv mw mx my bi translated">二。导入包</h2><pre class="kk kl km kn gu pp pq pr ps aw pt bi"><span id="15c0" class="mg mh iu pq b gz pu pv l pw px"><em class="nd"># HTTP library - </em><a class="ae kv" href="https://docs.python-requests.org/en/latest/" rel="noopener ugc nofollow" target="_blank">https://docs.python-requests.org/en/latest/</a><br/><strong class="pq iv">import </strong>requests</span></pre><h2 id="115f" class="mg mh iu bd mi mj mk dn ml mm mn dp mo lf mp mq mr lj ms mt mu ln mv mw mx my bi translated">三。局部变量和常量</h2><p id="f91c" class="pw-post-body-paragraph kw kx iu ky b kz og jv lb lc oh jy le lf oi lh li lj oj ll lm ln ok lp lq lr in bi translated">创建一个变量，将您的API键存储为一个<em class="nd">字符串类型</em>对象<em class="nd">。</em></p><pre class="kk kl km kn gu pp pq pr ps aw pt bi"><span id="29c0" class="mg mh iu pq b gz pu pv l pw px"><em class="nd"># subscription key</em><br/>bing_subscription_key = <em class="nd">&lt;enter your key here&gt;</em></span></pre><h2 id="f466" class="mg mh iu bd mi mj mk dn ml mm mn dp mo lf mp mq mr lj ms mt mu ln mv mw mx my bi translated">不及物动词功能</h2><p id="cd61" class="pw-post-body-paragraph kw kx iu ky b kz og jv lb lc oh jy le lf oi lh li lj oj ll lm ln ok lp lq lr in bi translated">创建一个需要两个参数的函数:</p><ol class=""><li id="c01a" class="ol om iu ky b kz la lc ld lf on lj oo ln op lr oq or os ot bi translated">订阅密钥—特定于资源</li><li id="f653" class="ol om iu ky b kz ow lc ox lf oy lj oz ln pa lr oq or os ot bi translated">查询—您自己的web搜索字符串</li></ol><pre class="kk kl km kn gu pp pq pr ps aw pt bi"><span id="88c8" class="mg mh iu pq b gz pu pv l pw px"><strong class="pq iv">def</strong> bing_web_search(subscription_key, query):<br/>    # set parameters<br/>    search_url = "https://api.bing.microsoft.com/v7.0/search"<br/>    headers = {"Ocp-Apim-Subscription-Key": subscription_key}<br/>    params = {<br/>        "q": query,<br/>        "textDecorations": True,<br/>        "textFormat": "HTML"}</span><span id="470b" class="mg mh iu pq b gz py pv l pw px">    # get response<br/>    response = requests.get(search_url, headers=headers, params=params)<br/>    response.raise_for_status()<br/>    return response.json()</span></pre><h2 id="090c" class="mg mh iu bd mi mj mk dn ml mm mn dp mo lf mp mq mr lj ms mt mu ln mv mw mx my bi translated">动词 （verb的缩写）API调用</h2><p id="ccf7" class="pw-post-body-paragraph kw kx iu ky b kz og jv lb lc oh jy le lf oi lh li lj oj ll lm ln ok lp lq lr in bi translated">我们想得到ZPID。它位于属性URL的末尾:</p><p id="e11f" class="pw-post-body-paragraph kw kx iu ky b kz la jv lb lc ld jy le lf lg lh li lj lk ll lm ln lo lp lq lr in bi translated"><a class="ae kv" href="https://www.zillow.com/homedetails/11226-Spring-Point-Cir-Riverview-FL-33579/125824629_zpid/" rel="noopener ugc nofollow" target="_blank">“https://www . zillow . com/home details/11226-Spring-Point-Cir-Riverview-FL-33579/125824629 _ zpid/</a>”</p><p id="98fe" class="pw-post-body-paragraph kw kx iu ky b kz la jv lb lc ld jy le lf lg lh li lj lk ll lm ln lo lp lq lr in bi translated">该属性的ZPID是125824629。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gi gj pz"><img src="../Images/7695728bebaf236d3f97d69e7946bf1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D0ZJvvHn2TQ5Sxv5lkn5-A.png"/></div></div><figcaption class="kr ks gk gi gj kt ku bd b be z dk translated"><a class="ae kv" href="https://www.zillow.com/homedetails/11226-Spring-Point-Cir-Riverview-FL-33579/125824629_zpid/" rel="noopener ugc nofollow" target="_blank"> Zillow Property </a></figcaption></figure><p id="a748" class="pw-post-body-paragraph kw kx iu ky b kz la jv lb lc ld jy le lf lg lh li lj lk ll lm ln lo lp lq lr in bi translated">接下来，为家庭地址创建一个字符串对象。将<em class="nd">“zillow home details”</em>添加到字符串的末尾。这将把Zillow结果排在搜索列表的顶部。</p><p id="9aef" class="pw-post-body-paragraph kw kx iu ky b kz la jv lb lc ld jy le lf lg lh li lj lk ll lm ln lo lp lq lr in bi translated">用两个参数调用API。</p><pre class="kk kl km kn gu pp pq pr ps aw pt bi"><span id="f6be" class="mg mh iu pq b gz pu pv l pw px"><em class="nd"># call API<br/></em>home_address = '11226 Spring Point Cir, Riverview, FL 33579'<br/>search_results = bing_web_search(<br/>    subscription_key, <br/>    query= home_address + ' zillow home details')</span></pre><p id="10f4" class="pw-post-body-paragraph kw kx iu ky b kz la jv lb lc ld jy le lf lg lh li lj lk ll lm ln lo lp lq lr in bi translated">在搜索结果中，选择URL列表中的第一个URL。应该是Zillow属性链接。</p><pre class="kk kl km kn gu pp pq pr ps aw pt bi"><span id="0660" class="mg mh iu pq b gz pu pv l pw px">url = search_results['webPages']['value'][0]['url']</span></pre><p id="6b70" class="pw-post-body-paragraph kw kx iu ky b kz la jv lb lc ld jy le lf lg lh li lj lk ll lm ln lo lp lq lr in bi translated">接下来，通过分割URL获取列表中的最后一个元素来获取ZPID。</p><pre class="kk kl km kn gu pp pq pr ps aw pt bi"><span id="212a" class="mg mh iu pq b gz pu pv l pw px">zpid = [x for x in url.split('/') if 'zpid' in x][0].split('_')[0]</span></pre><p id="0910" class="pw-post-body-paragraph kw kx iu ky b kz la jv lb lc ld jy le lf lg lh li lj lk ll lm ln lo lp lq lr in bi translated">输出:</p><pre class="kk kl km kn gu pp pq pr ps aw pt bi"><span id="1f44" class="mg mh iu pq b gz pu pv l pw px">zpid = '125824629'</span></pre><p id="2f81" class="pw-post-body-paragraph kw kx iu ky b kz la jv lb lc ld jy le lf lg lh li lj lk ll lm ln lo lp lq lr in bi translated">厉害！我们现在有了在Bing Web搜索API中搜索的酒店地址的ZPID。</p><h1 id="086c" class="pe mh iu bd mi pf pg ph ml pi pj pk mo ka pl kb mr kd pm ke mu kg pn kh mx po bi translated">结论</h1><p id="b4ac" class="pw-post-body-paragraph kw kx iu ky b kz og jv lb lc oh jy le lf oi lh li lj oj ll lm ln ok lp lq lr in bi translated">Bing的网络搜索API是接收搜索结果信息的绝佳资源。它是免费使用的高容量搜索定价层的选项。</p><p id="5826" class="pw-post-body-paragraph kw kx iu ky b kz la jv lb lc ld jy le lf lg lh li lj lk ll lm ln lo lp lq lr in bi translated">查看Bing的资源页面，了解更多关于定价层级的信息:</p><div class="nh ni gq gs nj nk"><a href="https://www.microsoft.com/en-us/bing/apis/pricing" rel="noopener  ugc nofollow" target="_blank"><div class="nl ab fp"><div class="nm ab nn cl cj no"><h2 class="bd iv gz z fq np fs ft nq fv fx it bi translated">必应搜索API定价|微软必应</h2><div class="nr l"><h3 class="bd b gz z fq np fs ft nq fv fx dk translated">Bing搜索API v7定价详细信息日本定价将适用于响应中的BingAPIs市场参数…</h3></div><div class="ns l"><p class="bd b dl z fq np fs ft nq fv fx dk translated">www.microsoft.com</p></div></div><div class="nt l"><div class="qa l nv nw nx nt ny kp nk"/></div></div></a></div></div></div>    
</body>
</html>