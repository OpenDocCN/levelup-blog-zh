<html>
<head>
<title>Using tuist for building a workspace</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用tuist构建工作空间</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/using-tuist-for-building-a-workspace-bdd5ccefbaa5?source=collection_archive---------12-----------------------#2021-03-15">https://levelup.gitconnected.com/using-tuist-for-building-a-workspace-bdd5ccefbaa5?source=collection_archive---------12-----------------------#2021-03-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="552b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">虽然<a class="ae kl" href="https://tuist.io" rel="noopener ugc nofollow" target="_blank"> tuist </a>是一个非常有用的工具，但是文档中缺少一些展示工作空间设置方式的例子。可以用tuist创建的默认项目本身只是创建一个工作区，其中各种目标是下面的文件夹。</p><p id="4426" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然而，当考虑框架时，最好有一个Xcode工作空间，其中每个框架都是一个单独的Xcode项目。我花了一些努力才弄明白这是如何实现的。Pedro Buendia的视频提供了最后的线索，最后，非常简单。</p><p id="0720" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以，让我来解释一下该怎么做，以便节省你一些时间。</p><p id="a7ef" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我假设您知道如何使用终端，并且已经使用tuist完成了第一步。因为我将把重点放在tuist方面，所以我不会深入讨论这个演示应用程序及其框架所使用的代码。</p></div><div class="ab cl km kn hu ko" role="separator"><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr"/></div><div class="ij ik il im in"><p id="6197" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先，我们需要一个可以工作的文件夹。拿起终端，创建一个文件夹<code class="fe kt ku kv kw b">tmp</code>。执行<code class="fe kt ku kv kw b">tuist init</code>，以便相应地设置文件夹。最后，执行一个<code class="fe kt ku kv kw b">tuist edit -P</code>来获得一个持久的清单项目，我们可以很容易地打开和编辑它。</p></div><div class="ab cl km kn hu ko" role="separator"><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr"/></div><div class="ij ik il im in"><p id="79db" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，我们需要一个工作空间定义。在manifest文件夹中创建一个文件<code class="fe kt ku kv kw b">Workspace.swift</code>，并将该内容放入:</p><figure class="kx ky kz la gt lb"><div class="bz fp l di"><div class="lc ld l"/></div></figure><p id="0c7a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这定义了一个名为<code class="fe kt ku kv kw b">MyAppWS</code>的工作区，其中包含三个名为<code class="fe kt ku kv kw b">TmpApp</code>、<code class="fe kt ku kv kw b">A</code>和<code class="fe kt ku kv kw b">B</code>的项目，其中一个是app(猜猜是哪个…)，另外两个是框架。</p><p id="43a2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在Xcode中打开清单时，创建一些组和文件，如下所示:</p><figure class="kx ky kz la gt lb gh gi paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="gh gi le"><img src="../Images/ca8ce499f13be4639fa068073eaa6d22.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YoITJoPeD5Us6LJhMBthQg.png"/></div></div></figure><p id="0b44" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了解释这个步骤:我们创建一个文件夹“Projects”，并为我们想要创建的每个项目创建子文件夹(“TmpApp”、“A”和“B”)。我们需要在每个文件中创建一个<code class="fe kt ku kv kw b">Project.swift</code>文件；我们一会儿会回到这个话题。</p><p id="e4b9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">“源”文件夹需要提供作为项目一部分的源。但是，它们必须存在于磁盘上，而不一定存在于Manifests项目中；我们这样做只是为了本文的目的。</p></div><div class="ab cl km kn hu ko" role="separator"><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr"/></div><div class="ij ik il im in"><p id="d90a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们有了需要的基本结构，我们需要项目清单中的一些内容。</p><p id="ab53" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先，应用程序的清单:</p><figure class="kx ky kz la gt lb"><div class="bz fp l di"><div class="lc ld l"/></div></figure><p id="832f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这只是一个标准的项目定义；重要的部分是我们设置为a <code class="fe kt ku kv kw b">.project</code>的<code class="fe kt ku kv kw b">dependencies</code>属性，在本例中是“A”，因为我们需要框架“A”来运行应用程序。该路径相对于清单。</p><p id="f0f0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，我们提供框架“A”的清单:</p><figure class="kx ky kz la gt lb"><div class="bz fp l di"><div class="lc ld l"/></div></figure><p id="3086" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这里，和以前一样的游戏，但不是像以前一样作为产品<code class="fe kt ku kv kw b">.app</code>，而是作为<code class="fe kt ku kv kw b">.framework</code>。因为“A”需要“B”才能工作，所以我们在这里也添加了一个依赖项，方式和前面一样。</p><p id="6da1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，框架“B”的清单:</p><figure class="kx ky kz la gt lb"><div class="bz fp l di"><div class="lc ld l"/></div></figure><p id="52ca" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们只是稍微改变了一下，在这里使用了一个<code class="fe kt ku kv kw b">.staticFramework</code>，没有更多的依赖。</p><p id="d769" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于生产代码(即应用程序和框架本身的Swift文件)，您可以随意放置。</p></div><div class="ab cl km kn hu ko" role="separator"><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr"/></div><div class="ij ik il im in"><p id="9a5e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以现在，当执行一个<code class="fe kt ku kv kw b">tuist generate --open</code>时，你会看到这个结果:</p><figure class="kx ky kz la gt lb gh gi paragraph-image"><div class="gh gi ll"><img src="../Images/44647b1517edfae62a0a60072efa7c79.png" data-original-src="https://miro.medium.com/v2/resize:fit:832/format:webp/1*SxvZiQDESTkC752UE6yssw.png"/></div></figure><p id="f612" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一个漂亮、干净的工作区结构，每个项目、应用程序和框架都有一个项目。当在<code class="fe kt ku kv kw b">App.swift</code>代码中执行一个<code class="fe kt ku kv kw b">import A</code>，在<code class="fe kt ku kv kw b">A.swift</code>代码中执行一个<code class="fe kt ku kv kw b">import B</code>时，这将完美地构建。</p><p id="e38a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一个不错的副作用是，您可以使用tuist通过执行<code class="fe kt ku kv kw b">tuist graph</code>来生成依赖关系的概览图:</p><figure class="kx ky kz la gt lb gh gi paragraph-image"><div class="gh gi lm"><img src="../Images/6bdb19dd4e0a19830fea08a485917b92.png" data-original-src="https://miro.medium.com/v2/resize:fit:198/format:webp/1*6IA1FVf9BY3v4wqVAuHNwQ.png"/></div></figure></div><div class="ab cl km kn hu ko" role="separator"><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr"/></div><div class="ij ik il im in"><p id="6de8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以，我们结束了。当您尝试重建我所做的事情时，您可能会注意到我们必须处理清单文件的目标成员。</p><p id="841a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">虽然<code class="fe kt ku kv kw b">Workspace.swift</code>文件必须是<code class="fe kt ku kv kw b">*Manifests</code>目标的成员，但是项目的<code class="fe kt ku kv kw b">Project.swift</code>文件不能是任何目标的成员。否则，由于文件名重复，将会出现Xcode错误。</p><p id="8423" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我还注意到Xcode的语法突出显示和代码完成功能适用于顶级清单文件，但不适用于项目中的低级清单。我假设这是一种错误，但也许有不同的原因——如果你知道如何修复它，请告诉我！</p></div><div class="ab cl km kn hu ko" role="separator"><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr"/></div><div class="ij ik il im in"><p id="be13" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">谢谢你看了这篇小文章，如果你觉得有用，请别忘了鼓掌。</p></div></div>    
</body>
</html>