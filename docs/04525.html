<html>
<head>
<title>SpringBoot AMQP with RabbitMQ in Kubernetes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">库伯内特斯的AMQP跳羚和兔子</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/springboot-amqp-with-rabbitmq-in-kubernetes-390a8039d5c4?source=collection_archive---------12-----------------------#2020-06-30">https://levelup.gitconnected.com/springboot-amqp-with-rabbitmq-in-kubernetes-390a8039d5c4?source=collection_archive---------12-----------------------#2020-06-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/695a654329f8822a581d431e0c9677b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*x90tLZJ2KsjPMgo-.png"/></div></div></figure><p id="6c30" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">和我以前的博客一样，我们使用本地docker桌面kubernetes设置和helm来安装该功能。</p><p id="a2d3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">使用helm将rabbitmq安装到K8s上。</p><blockquote class="kw kx ky"><p id="dff7" class="jy jz kz ka b kb kc kd ke kf kg kh ki la kk kl km lb ko kp kq lc ks kt ku kv ij bi translated"><em class="iq">helm install—name rab—set auth . username = admin，auth.password=admin，metrics . enabled = true stable/rabbit MQ</em></p></blockquote><p id="87d7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">将密码固定为这个(<strong class="ka ir">注意:</strong> rabbitmq不喜欢短密码，它会在这个设置中接受它们，但你将无法登录)。</p><blockquote class="kw kx ky"><p id="cd18" class="jy jz kz ka b kb kc kd ke kf kg kh ki la kk kl km lb ko kp kq lc ks kt ku kv ij bi translated"><em class="iq">helm upgrade—set auth . username = admin，auth.password=secretpassword，metrics . enabled = true rab bitnami/rabbit MQ</em></p></blockquote><p id="e5e4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">否则，默认用户名为user，密码如下:</p><blockquote class="kw kx ky"><p id="593c" class="jy jz kz ka b kb kc kd ke kf kg kh ki la kk kl km lb ko kp kq lc ks kt ku kv ij bi translated"><em class="iq">echo " Password:$(ku bectl get secret rab-rabbit MQ-o JSON path = " { . data . rabbit MQ-Password } " | base64—decode)"</em></p></blockquote><p id="daab" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">RabbitMQ可以在集群中访问</p><p id="49b7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe ld le lf lg b">rab-rabbitmq.default.svc.cluster.local</code></p><p id="8cb5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">要从群集外部访问，请执行以下步骤:</p><p id="df76" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">要访问RabbitMQ AMQP端口:</p><blockquote class="kw kx ky"><p id="cecf" class="jy jz kz ka b kb kc kd ke kf kg kh ki la kk kl km lb ko kp kq lc ks kt ku kv ij bi translated"><em class="iq"> kubectl端口转发svc/rab-rabbitmq 5672:5672 </em></p></blockquote><p id="08e4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">echo " URL:amqp://127 . 0 . 0 . 1:5672/"</p><p id="64b2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">要访问RabbitMQ管理界面:</p><blockquote class="kw kx ky"><p id="d4dd" class="jy jz kz ka b kb kc kd ke kf kg kh ki la kk kl km lb ko kp kq lc ks kt ku kv ij bi translated"><em class="iq"> kubectl端口转发SVC/rab-rabbit MQ 15672:15672</em></p></blockquote><p id="1946" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae lh" href="http://127.0.0.1:15672/#/" rel="noopener ugc nofollow" target="_blank">http://127 . 0 . 0 . 1:15672/#/</a></p><figure class="lj lk ll lm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi li"><img src="../Images/2f7d9dd4a3a9f18ee49a6b0ad268ce60.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Oxh5YjpHnKrm_BX3.png"/></div></div></figure><p id="776d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在admin选项卡下，创建用户名和密码<strong class="ka ir"> guest/guest </strong>，这是spring rabbitmq的默认设置。有一些属性设置可以用来改变这些，或者使用环境变量并在K8s中进行设置，由spring选择，例如:</p><pre class="lj lk ll lm gt ln lg lo lp aw lq bi"><span id="d470" class="lr ls iq lg b gy lt lu l lv lw">spring.rabbitmq.username=${RABBITMQ_USER:guest}<br/>spring.rabbitmq.password=${RABBITMQ_PASS:guest}</span></pre><p id="2f1e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">RABBITMQ_USER和RABBITMQ_PASS可以在k8s部署属性中设置。</p><h1 id="13b7" class="lx ls iq bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">春季AMPQ电码</h1><p id="b537" class="pw-post-body-paragraph jy jz iq ka b kb mu kd ke kf mv kh ki kj mw kl km kn mx kp kq kr my kt ku kv ij bi translated">春季初始zr</p><p id="d79d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae lh" href="https://start.spring.io/#!type=maven-project&amp;language=java&amp;platformVersion=2.3.1.RELEASE&amp;packaging=jar&amp;jvmVersion=1.8&amp;groupId=uk.co.actualcode&amp;artifactId=vadal-mq&amp;name=vadal-mq&amp;description=Demo%20project%20for%20Spring%20Boot&amp;packageName=uk.co.actualcode.vadal-mq&amp;dependencies=amqp,web" rel="noopener ugc nofollow" target="_blank">https://start.spring.io/#!type=maven-project&amp;language = Java&amp;platform version = 2 . 3 . 1 . release&amp;packaging = jar&amp;JVM version = 1.8&amp;groupId = uk . co . actual code&amp;artifactId = vadal-MQ&amp;name = vadal-MQ&amp;description = Demo % 20 project % 20 for % 20 spring % 20 boot&amp;package name = uk . co . actual code . vadal-MQ&amp;</a></p><p id="09a7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Pom需要以下内容:</p><pre class="lj lk ll lm gt ln lg lo lp aw lq bi"><span id="2762" class="lr ls iq lg b gy lt lu l lv lw">&lt;dependencies&gt;<br/>  &lt;dependency&gt;<br/>   &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;<br/>   &lt;artifactId&gt;spring-boot-starter-amqp&lt;/artifactId&gt;<br/>  &lt;/dependency&gt;<br/>  &lt;dependency&gt;<br/>   &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;<br/>   &lt;artifactId&gt;spring-boot-starter-data-rest&lt;/artifactId&gt;<br/>  &lt;/dependency&gt;<br/>  &lt;dependency&gt;<br/>   &lt;groupId&gt;org.springframework.amqp&lt;/groupId&gt;<br/>   &lt;artifactId&gt;spring-rabbit-test&lt;/artifactId&gt;<br/>   &lt;scope&gt;test&lt;/scope&gt;<br/>  &lt;/dependency&gt;<br/>  &lt;dependency&gt;<br/>   &lt;groupId&gt;io.micrometer&lt;/groupId&gt;<br/>   &lt;artifactId&gt;micrometer-registry-prometheus&lt;/artifactId&gt;<br/>   &lt;scope&gt;runtime&lt;/scope&gt;<br/>  &lt;/dependency&gt;<br/> &lt;/dependencies&gt;</span></pre><p id="3d19" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">普罗米修斯已经被添加，这样我们以后就可以通过grafana来监控这项服务了。</p><p id="943f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">应用程序. yml</p><pre class="lj lk ll lm gt ln lg lo lp aw lq bi"><span id="00f5" class="lr ls iq lg b gy lt lu l lv lw">spring.rabbitmq.host: rab-rabbitmq.default.svc.cluster.local</span><span id="77e5" class="lr ls iq lg b gy mz lu l lv lw">server.port: 7777</span><span id="932e" class="lr ls iq lg b gy mz lu l lv lw">management:<br/>  endpoints:<br/>    web:<br/>      exposure:<br/>        include: "*"</span></pre><p id="fafb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Vadal-mq-sender应用程序</p><pre class="lj lk ll lm gt ln lg lo lp aw lq bi"><span id="1afc" class="lr ls iq lg b gy lt lu l lv lw">@SpringBootApplication<br/>@RestController<br/>@Slf4j<br/>public class VadalMqApplication {</span><span id="0925" class="lr ls iq lg b gy mz lu l lv lw">private static final String VADALQ = "vadalQ";</span><span id="23de" class="lr ls iq lg b gy mz lu l lv lw">  public static void main(String[] args) {<br/>     SpringApplication.run(VadalMqApplication.class, args);<br/>  }</span><span id="b160" class="lr ls iq lg b gy mz lu l lv lw">  @Autowired<br/>  RabbitTemplate rabbitTemplate;</span><span id="0c11" class="lr ls iq lg b gy mz lu l lv lw">  @Bean<br/>  public Queue vadalQueue() {<br/>    return new Queue(VADALQ, false);<br/>  }</span><span id="f576" class="lr ls iq lg b gy mz lu l lv lw">  @GetMapping("/m/{m}")<br/>  public void send(@PathVariable String m) {<br/>     rabbitTemplate.convertAndSend(VADALQ, m);<br/>  }<br/>}</span></pre><p id="60b4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">创建图像</p><blockquote class="kw kx ky"><p id="120c" class="jy jz kz ka b kb kc kd ke kf kg kh ki la kk kl km lb ko kp kq lc ks kt ku kv ij bi translated"><em class="iq"> mvn spring-boot:构建映像</em></p></blockquote><p id="6112" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">部署映像</p><blockquote class="kw kx ky"><p id="04bb" class="jy jz kz ka b kb kc kd ke kf kg kh ki la kk kl km lb ko kp kq lc ks kt ku kv ij bi translated"><em class="iq"> kubectl创建部署vadal-MQ-sender-image = vadal-MQ-sender:0 . 0 . 1-SNAPSHOT</em></p><p id="a877" class="jy jz kz ka b kb kc kd ke kf kg kh ki la kk kl km lb ko kp kq lc ks kt ku kv ij bi translated"><em class="iq">deployment.apps/vadal-mq-sender创造了</em></p></blockquote><h1 id="3496" class="lx ls iq bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">暴露内部端口7777</h1><blockquote class="kw kx ky"><p id="1bd7" class="jy jz kz ka b kb kc kd ke kf kg kh ki la kk kl km lb ko kp kq lc ks kt ku kv ij bi translated"><em class="iq">ku bectl expose deployment vadal-MQ-sender-type node port-port 8889-target-port 7777</em></p></blockquote><p id="9ab7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果您已经有了一个现有的图像，请像这样更新它:</p><blockquote class="kw kx ky"><p id="56d5" class="jy jz kz ka b kb kc kd ke kf kg kh ki la kk kl km lb ko kp kq lc ks kt ku kv ij bi translated"><em class="iq"> kubectl补丁部署vadal-MQ-receiver-p ' { " spec ":{ " template ":{ " spec ":{ " terminationgraceperiodes ":31 } } } '</em></p></blockquote><p id="3ed7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">找到发送者的端口。</p><blockquote class="kw kx ky"><p id="386d" class="jy jz kz ka b kb kc kd ke kf kg kh ki la kk kl km lb ko kp kq lc ks kt ku kv ij bi translated"><em class="iq">ku bectl get SVC vadal-MQ-sender<br/>NAME TYPE CLUSTER-IP EXTERNAL-IP PORT AGE<br/>vadal-MQ-sender node PORT 10 . 108 . 231 . 116 8889:31498/TCP 3d</em></p></blockquote><p id="481a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">发送方端点端口是31498，发送消息hi</p><p id="ef13" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae lh" href="http://localhost:8889/m/hi" rel="noopener ugc nofollow" target="_blank">http://localhost:31498/m/hi</a></p><p id="1a83" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在是接收器。这将接收消息并将它们存储在数据库中，以便可以根据需要检索它们。</p><p id="9db2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">春季初始zr</p><p id="d44f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae lh" href="https://start.spring.io/#!type=maven-project&amp;language=java&amp;platformVersion=2.3.1.RELEASE&amp;packaging=jar&amp;jvmVersion=1.8&amp;groupId=uk.co.actualcode&amp;artifactId=vadal-mq-receiver&amp;name=vadal-mq-receiver&amp;description=Demo%20project%20for%20Spring%20Boot&amp;packageName=uk.co.actualcode.vadal-mq-receiver&amp;dependencies=amqp,data-rest,h2,prometheus" rel="noopener ugc nofollow" target="_blank">https://start.spring.io/#!type=maven-project&amp;language = Java&amp;platform version = 2 . 3 . 1 . release&amp;packaging = jar&amp;JVM version = 1.8&amp;groupId = uk . co . actual code&amp;artifactId = vadal-MQ-receiver&amp;name = vadal-MQ-receiver&amp;description = Demo % 20 project % 20 for % 20 spring % 20 boot&amp;package name = uk . co . actual code . vadal</a></p><p id="6b72" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Pom也类似</p><pre class="lj lk ll lm gt ln lg lo lp aw lq bi"><span id="f882" class="lr ls iq lg b gy lt lu l lv lw">&lt;dependencies&gt;<br/>  &lt;dependency&gt;<br/>   &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;<br/>   &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;<br/>  &lt;/dependency&gt;<br/>  &lt;dependency&gt;<br/>   &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;<br/>   &lt;artifactId&gt;spring-boot-starter-amqp&lt;/artifactId&gt;<br/>  &lt;/dependency&gt;<br/>  &lt;dependency&gt;<br/>   &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;<br/>   &lt;artifactId&gt;spring-boot-starter-data-rest&lt;/artifactId&gt;<br/>  &lt;/dependency&gt;</span><span id="8643" class="lr ls iq lg b gy mz lu l lv lw">&lt;dependency&gt;<br/>   &lt;groupId&gt;com.h2database&lt;/groupId&gt;<br/>   &lt;artifactId&gt;h2&lt;/artifactId&gt;<br/>   &lt;scope&gt;runtime&lt;/scope&gt;<br/>  &lt;/dependency&gt;<br/>  &lt;dependency&gt;<br/>   &lt;groupId&gt;io.micrometer&lt;/groupId&gt;<br/>   &lt;artifactId&gt;micrometer-registry-prometheus&lt;/artifactId&gt;<br/>   &lt;scope&gt;runtime&lt;/scope&gt;<br/>  &lt;/dependency&gt;<br/> &lt;/dependencies&gt;</span></pre><p id="f44a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们还利用了spring data rest和内存中的H2数据库。</p><p id="0e5e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Application.yml也类似:</p><pre class="lj lk ll lm gt ln lg lo lp aw lq bi"><span id="8838" class="lr ls iq lg b gy lt lu l lv lw">spring:<br/>  application:<br/>    name: vadalmqreceiver<br/>  rabbitmq.host: rab-rabbitmq.default.svc.cluster.local</span><span id="c350" class="lr ls iq lg b gy mz lu l lv lw">server.port: 7777</span><span id="d458" class="lr ls iq lg b gy mz lu l lv lw">management:<br/>  endpoints:<br/>    web:<br/>      exposure:<br/>        include: "*"</span></pre><p id="afec" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">应用程序如下:</p><pre class="lj lk ll lm gt ln lg lo lp aw lq bi"><span id="b411" class="lr ls iq lg b gy lt lu l lv lw">@SpringBootApplication<br/>@RestController<br/>@Slf4j<br/>public class VadalMqReceiverApplication {</span><span id="c7dd" class="lr ls iq lg b gy mz lu l lv lw">  private static final String VADALQ = "vadalQ";</span><span id="3bef" class="lr ls iq lg b gy mz lu l lv lw">  public static void main(String[] args) {<br/>    SpringApplication.run(VadalMqReceiverApplication.class, args);<br/>  }</span><span id="d433" class="lr ls iq lg b gy mz lu l lv lw">  @Autowired<br/>  public MsgRepo msgRepo;</span><span id="98f5" class="lr ls iq lg b gy mz lu l lv lw">  @Bean<br/>  public Queue vadalQueue() {<br/>     return new Queue(VADALQ, false);<br/>  }</span><span id="70f0" class="lr ls iq lg b gy mz lu l lv lw">  @RabbitListener(queues = VADALQ)<br/>  public void listen(String in) {<br/>     log.info("Message read from vadalQ : " + in);<br/>     msgRepo.save(new Msg(in));<br/>  }</span><span id="67ce" class="lr ls iq lg b gy mz lu l lv lw">  @GetMapping("/put/{p}")<br/>  public String put(@PathVariable String p) {<br/>     Msg save = msgRepo.save(new Msg(p));<br/>     return save.toString();<br/>  }</span><span id="e4d3" class="lr ls iq lg b gy mz lu l lv lw">  @GetMapping("/get")<br/>   public Iterable&lt;Msg&gt; get() {<br/>     Iterable&lt;Msg&gt; all = msgRepo.findAll();<br/>     msgRepo.deleteAll();<br/>     return all;<br/>  }</span><span id="5669" class="lr ls iq lg b gy mz lu l lv lw">}</span></pre><p id="bbf9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">它监听消息队列，并将任何收到的消息保存到数据库中。可以使用/get端点检索消息。</p><p id="fdb5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">创建图像。</p><blockquote class="kw kx ky"><p id="5b36" class="jy jz kz ka b kb kc kd ke kf kg kh ki la kk kl km lb ko kp kq lc ks kt ku kv ij bi translated"><em class="iq"> mvn spring-boot:构建映像</em></p></blockquote><p id="8084" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">部署它并公开端口</p><blockquote class="kw kx ky"><p id="8829" class="jy jz kz ka b kb kc kd ke kf kg kh ki la kk kl km lb ko kp kq lc ks kt ku kv ij bi translated"><em class="iq"> kubectl创建部署vadal-MQ-receiver-image = vadal-MQ-receiver:0 . 0 . 1-SNAPSHOT</em></p><p id="6ec0" class="jy jz kz ka b kb kc kd ke kf kg kh ki la kk kl km lb ko kp kq lc ks kt ku kv ij bi translated"><em class="iq">ku bectl expose deployment vadal-MQ-receiver-type node port-port 8899-target-port 7777</em></p></blockquote><p id="71c6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">检查端口</p><blockquote class="kw kx ky"><p id="1ddc" class="jy jz kz ka b kb kc kd ke kf kg kh ki la kk kl km lb ko kp kq lc ks kt ku kv ij bi translated"><em class="iq">ku bectl get SVC vadal-MQ-receiver<br/>NAME TYPE CLUSTER-IP EXTERNAL-IP PORT AGE<br/>vadal-MQ-receiver NodePort 10 . 96 . 60 . 154 8899:30676/TCP 10d</em></p></blockquote><p id="3d16" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae lh" href="http://localhost:30676/get" rel="noopener ugc nofollow" target="_blank">http://localhost:30676/get</a></p><pre class="lj lk ll lm gt ln lg lo lp aw lq bi"><span id="a643" class="lr ls iq lg b gy lt lu l lv lw">[ { "id": 3, "m": "hi" }, { "id": 4, "m": "this is" }, { "id": 5, "m": "a rabbitmq" }, { "id": 6, "m": "message" } ]<!-- --> </span></pre><p id="9026" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">rabbitmq管理UI提供了队列流量的视图。</p><figure class="lj lk ll lm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi na"><img src="../Images/b906aec2f6073321fa05b862412bf3fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*wPnPxLJ-hzPZV80B.png"/></div></div></figure><h1 id="d0e7" class="lx ls iq bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">结论</h1><p id="eb1a" class="pw-post-body-paragraph jy jz iq ka b kb mu kd ke kf mv kh ki kj mw kl km kn mx kp kq kr my kt ku kv ij bi translated">我们在docker桌面kubernetes本地基础设施上安装了RabbitMQ。我们使用spring boot starter依赖项创建了一个发送者和一个接收者服务，并且我们能够发布和监听k8s中运行的rabbit mq broker队列。</p><p id="e60f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这个博客的代码可以在</p><p id="0d55" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae lh" href="https://gitlab.com/lightphos/spring/vadal" rel="noopener ugc nofollow" target="_blank">https://gitlab.com/lightphos/spring/vadal</a></p></div><div class="ab cl nb nc hu nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ij ik il im in"><p id="4648" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="kz">原载于2020年6月30日</em><a class="ae lh" href="https://blog.ramjee.uk/rabbitmq-spring-k8s/" rel="noopener ugc nofollow" target="_blank"><em class="kz">https://blog . ramjee . uk</em></a><em class="kz">。</em></p></div></div>    
</body>
</html>