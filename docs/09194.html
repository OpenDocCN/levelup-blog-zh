<html>
<head>
<title>Ethereum — Playing with Python web3 library and eth serialization Ethereum</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">以太坊—使用Python web3库和eth序列化以太坊</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/ethereum-playing-with-python-web3-library-and-eth-serialization-ethereum-676efc8b1346?source=collection_archive---------21-----------------------#2021-07-14">https://levelup.gitconnected.com/ethereum-playing-with-python-web3-library-and-eth-serialization-ethereum-676efc8b1346?source=collection_archive---------21-----------------------#2021-07-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="3845" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">以太坊节点系列III —如何使用Python和web3.py连接到以太坊网络</h2></div><p id="b5e8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这篇文章中，我们将学习如何在你的Ubuntu机器上安装Python，安装web3库并连接到以太坊网络。本文假设您已经具备以下条件:</p><ul class=""><li id="5714" class="le lf it kk b kl km ko kp kr lg kv lh kz li ld lj lk ll lm bi translated">运行在Ubuntu上的以太坊节点。查看这篇文章，我解释了如何在Ubuntu AWS上部署以太坊节点</li><li id="1dc5" class="le lf it kk b kl lo ko lp kr lq kv lr kz ls ld lj lk ll lm bi translated">您已经知道了一些使用Etehreum网络的命令。查看这篇文章，在那里我谈到了一些<a class="ae ln" rel="noopener ugc nofollow" target="_blank" href="/exploring-the-ethereum-block-9fa3a68e42d8">命令来探索以太坊块</a></li><li id="c662" class="le lf it kk b kl lo ko lp kr lq kv lr kz ls ld lj lk ll lm bi translated">你知道什么是🦄就是！😇</li></ul><p id="562c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Python是一种很好的编程语言，可以用来研究区块链和其他技术，如机器学习、人工智能和数据分析。将它作为一种非常容易阅读和理解的通用编程语言放在您的工具包中是一件好事。此外，Python中有许多Fintech应用程序，如果你在这个行业，这非常重要！不，与其他Python相反，Python代码不咬人！这是一种可读性很强的语言，同样，开发区块链应用程序和利用它的web3库也很简单。</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi lt"><img src="../Images/d223521faf34f5afe74713ba2b7af319.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ioMIjqbvYtUI1I7YCN0KqQ.jpeg"/></div></div></figure><h2 id="0973" class="mf mg it bd mh mi mj dn mk ml mm dp mn kr mo mp mq kv mr ms mt kz mu mv mw mx bi translated">什么是Web2和Web3？</h2><p id="03bb" class="pw-post-body-paragraph ki kj it kk b kl my ju kn ko mz jx kq kr na kt ku kv nb kx ky kz nc lb lc ld im bi translated">Web2基本上是我们大多数人现在使用的互联网。集中式互联网通常由大数据中心和大型云提供商托管和控制。Web2通常由服务器、Web服务器、集中式HTTP APIs和数据库组成。</p><p id="84c7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">另一方面，Web3是去中心化的互联网。越来越多的开发者选择在Web3上开发他们的应用程序(以太坊是Web3最大的推动者之一),因为它是无权限的，没有人可以阻止或拒绝访问Web3，它有内置的支付功能(像ETH一样),而且因为以太坊是<a class="ae ln" rel="noopener ugc nofollow" target="_blank" href="/smart-contracts-can-we-just-get-straight-to-the-point-4c904d97630?source=your_stories_page-------------------------------------"> <strong class="kk iu">转完全</strong> </a>，你几乎可以开发任何东西！web3是dApps、DeFi和NFT生活的世界！这么多哇！🐕</p><h2 id="3236" class="mf mg it bd mh mi mj dn mk ml mm dp mn kr mo mp mq kv mr ms mt kz mu mv mw mx bi translated">安装Python和Python web3库</h2><p id="d759" class="pw-post-body-paragraph ki kj it kk b kl my ju kn ko mz jx kq kr na kt ku kv nb kx ky kz nc lb lc ld im bi translated">我们现在需要在Ubuntu实例中安装Python，并安装eth-rlp库来访问一些附加功能。</p><p id="ac7b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在Ubuntu命令行中，输入</p><pre class="lu lv lw lx gt nd ne nf ng aw nh bi"><span id="872e" class="mf mg it ne b gy ni nj l nk nl">sudo apt install python3-pip</span></pre><p id="917e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一旦安装了Python，让我们安装允许我们进行序列化的库。</p><pre class="lu lv lw lx gt nd ne nf ng aw nh bi"><span id="e0d8" class="mf mg it ne b gy ni nj l nk nl">pip3 install eth-rlp</span></pre><p id="3a7a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们将使用这个库来序列化块头数据并创建一个块散列。这将帮助我们处理数据，使其适合哈希算法。</p><p id="5d10" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">接下来，我们需要安装一个Python散列后端和加密库，即<a class="ae ln" href="https://pypi.org/project/pycryptodome/" rel="noopener ugc nofollow" target="_blank"> Cryptodome </a> pysha3。如果你需要的话，这个库会给你像AES，椭圆曲线，SHA哈希，ECDSA，密码保护容器(PKCS#8)，RSA，DSA和其他很酷的加密技术:</p><pre class="lu lv lw lx gt nd ne nf ng aw nh bi"><span id="6ef4" class="mf mg it ne b gy ni nj l nk nl">pip3 install pycryptodome pysha3</span></pre><p id="9291" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们安装Web3库。Web3是一个JavaScript库，它与以太网区块链交互。它也被称为下一代万维网，它提供了一个分散的网络，允许我们使用HTTP和IPC连接与其他以太坊节点进行交互。它还支持发送交易、检索用户帐户以及与智能合同进行交互。让我们安装它。</p><pre class="lu lv lw lx gt nd ne nf ng aw nh bi"><span id="5785" class="mf mg it ne b gy ni nj l nk nl">pip3 install web3</span><span id="c725" class="mf mg it ne b gy nm nj l nk nl">sudo pip3 install pyethash</span></pre><p id="d417" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们还需要pyethash用于ethash算法。这将允许我们生成工作证明</p><p id="038f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在我们有了所有需要安装的东西，让我们进入以太坊节点路径。以太坊/并运行python。这里我假设你已经有了一个以太坊节点。如果没有，跳到文章开头。按如下方式键入命令:</p><pre class="lu lv lw lx gt nd ne nf ng aw nh bi"><span id="3755" class="mf mg it ne b gy ni nj l nk nl">cd .ethereum/</span></pre><p id="6cb3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后，键入</p><pre class="lu lv lw lx gt nd ne nf ng aw nh bi"><span id="6ed0" class="mf mg it ne b gy ni nj l nk nl">python3</span></pre><p id="4eb8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">欢迎来到Python3控制台！让我们导入一些我们需要的工具，从Web3的IPC提供程序开始。每次退出Python3，您都必须重复接下来的两个命令。<strong class="kk iu">注意:要完成这项工作，您需要使用之前看到的geth命令并行运行以太坊节点。</strong></p><pre class="lu lv lw lx gt nd ne nf ng aw nh bi"><span id="ba0e" class="mf mg it ne b gy ni nj l nk nl">from web3 import IPCProvider, Web3</span></pre><p id="7855" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">IPC提供程序将允许您的节点通过IPC连接进行连接。以太坊Geth也允许HTTP和WebSocket连接，但是IPC应该更安全。</p><p id="5eca" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一旦这样做了，我们需要确保它的工作，我们可以获取数据。让我们用下面的命令调用一个对象w3(你可以称它为任何东西)。类型:</p><pre class="lu lv lw lx gt nd ne nf ng aw nh bi"><span id="c4a6" class="mf mg it ne b gy ni nj l nk nl">w3 = Web3(IPCProvider())</span></pre><p id="5163" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，如果你输入，例如，<em class="nn"> w3.eth </em>。并按tab键两次，您将获得命令列表。请注意，这最后两个命令可能需要几秒钟才能生效。</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div class="gh gi no"><img src="../Images/39ae08819f1bf0e5b0efcbc78ff35a61.png" data-original-src="https://miro.medium.com/v2/resize:fit:922/format:webp/1*qslNFkeeoqw2k353zkvJmw.png"/></div></figure><p id="e419" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">几秒钟后(有时您可能需要等待一分钟让它连接上)，您也应该能够键入任何命令，如</p><pre class="lu lv lw lx gt nd ne nf ng aw nh bi"><span id="78bb" class="mf mg it ne b gy ni nj l nk nl">w3.eth.getBlock(987654)</span></pre><p id="79a3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">得到我们之前看到的相同的块，但是是原始格式:</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div class="gh gi np"><img src="../Images/c7b2b9e417802c64af4ae5d20bd20448.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*NlA3YzxVG0tSTbfkYDsApA.png"/></div></figure><p id="827e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这与我们在之前看到的<a class="ae ln" rel="noopener ugc nofollow" target="_blank" href="/exploring-the-ethereum-block-9fa3a68e42d8">完全相同，但是可读性稍差一些。这是原始的狗数据。酷吧？🚀🏴‍☠️🚀</a></p><p id="7e51" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现实情况是，这些原始数据并不容易阅读，但是如果我们要找一个特定的数据，我们可以要求:</p><p id="3057" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这里，您可以看到一些示例，其中，如果您正在寻找块的难度、随机数或挖掘器，您可以分别键入以下命令:</p><pre class="lu lv lw lx gt nd ne nf ng aw nh bi"><span id="e3a5" class="mf mg it ne b gy ni nj l nk nl">w3.eth.getBlock(987654)[“difficulty”]</span><span id="634f" class="mf mg it ne b gy nm nj l nk nl">w3.eth.getBlock(987654)[“nonce”]</span><span id="1c89" class="mf mg it ne b gy nm nj l nk nl">w3.eth.getBlock(987654)[“miner”]</span></pre><p id="faa5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">提高raw块可读性的另一个方法是将每个值分隔在不同的行中。</p><p id="17b3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以通过以下方式实现这一目标:</p><pre class="lu lv lw lx gt nd ne nf ng aw nh bi"><span id="2e6b" class="mf mg it ne b gy ni nj l nk nl">myBlock = w3.eth.getBlock(987654)</span><span id="cdf6" class="mf mg it ne b gy nm nj l nk nl">print(*myBlock.items(), sep=’\n’)</span></pre><p id="4e2b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在更明白了！🤟🏻💖</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div class="gh gi np"><img src="../Images/8a5c82f07985b6c423de6c3a1a634d39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*rid6PiqvVyWMDoXKTTz3kg.png"/></div></figure><p id="cb59" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我在这里只展示了一部分，因为你已经看到了剩下的部分。🦄</p><p id="a07f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我希望你喜欢它！下一篇文章，我们继续玩python，用Python脚本计算以太坊难度！敬请关注！</p><p id="3037" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">🚀关注我，也请查看我的🧱区块链课程:</strong></p><p id="b2fb" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">🐶</strong> <a class="ae ln" href="https://www.udemy.com/course/-dogecoin-course-the-first-complete-dogecoin-course/?referralCode=9416B1408224CE309DD8" rel="noopener ugc nofollow" target="_blank"> <strong class="kk iu">有史以来第一次Dogecoin课程</strong> </a></p><p id="923a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">👨‍🎓</strong> <a class="ae ln" href="https://www.udemy.com/course/fintech-technologies-cloud-and-cybersecurity/?referralCode=F1D4EA005A2881735A36" rel="noopener ugc nofollow" target="_blank"> <strong class="kk iu"> Fintech、云和网络安全课程</strong> </a></p><p id="a7f0" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">📖</strong><a class="ae ln" href="https://www.amazon.com/dp/B091CYTX37/ref=sr_1_1?dchild=1&amp;keywords=unblockchain&amp;qid=1617186443&amp;s=digital-text&amp;sr=1-1" rel="noopener ugc nofollow" target="_blank"><strong class="kk iu"/></a><a class="ae ln" href="https://www.udemy.com/course/the-complete-nft-course-learn-everything-about-nfts/?referralCode=AAEE908D13D0E2276B19" rel="noopener ugc nofollow" target="_blank"><strong class="kk iu">完整的NFTs教程</strong> </a></p><p id="f7c6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">👨‍🎓</strong> <a class="ae ln" href="https://www.udemy.com/course/blockchain-deep-dive-from-bitcoin-to-ethereum-to-crypto/?referralCode=B8463EE382E6D313304B" rel="noopener ugc nofollow" target="_blank"> <strong class="kk iu"> Unblockchain课程</strong> </a> <strong class="kk iu"> —脑洞大开的区块链课程</strong></p></div></div>    
</body>
</html>