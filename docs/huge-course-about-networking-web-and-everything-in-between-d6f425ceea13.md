# åºžå¤§çš„ç½‘ç»œè¯¾ç¨‹ï¼Œç½‘ç»œå’Œå…¶é—´çš„ä¸€åˆ‡

> åŽŸæ–‡ï¼š<https://levelup.gitconnected.com/huge-course-about-networking-web-and-everything-in-between-d6f425ceea13>

å“¦ï¼Œæˆ‘äº²çˆ±çš„ learnersâœŒï¸.ä½ æƒ³äº†è§£æ›´å¤šå…³äºŽç½‘ç»œå’Œ web: OSIï¼ŒARPï¼ŒMACï¼ŒDNS ç­‰å—ï¼Ÿç„¶åŽé˜…è¯»è¿™ç¯‡æ–‡ç« ï¼Œé€šè¿‡ä¾‹å­äº†è§£å¤§é‡æ–°ä¿¡æ¯ã€‚

æˆ‘æƒ³å¯¹ [OSI æ¨¡åž‹](https://medium.com/u/e4cbe924ccb#7424)å’Œ:
-[PDU](https://medium.com/p/d6f425ceea13#5347)
-[ARP](https://medium.com/p/d6f425ceea13#6ed1)
-[NAT](https://medium.com/p/d6f425ceea13#254c)
-[å…¬æœ‰ä¸Žç§æœ‰ IP åœ°å€](https://medium.com/p/d6f425ceea13#acb4)
- [TCP/IP è§†é¢‘é“¾æŽ¥](https://medium.com/p/d6f425ceea13#24dd)

*   [åŸŸåç³»ç»Ÿ](https://medium.com/p/d6f425ceea13#49fd)*   [TCP å’Œ UDP åè®®](https://medium.com/p/d6f425ceea13#ba3f)*   [TCP æ¡æ‰‹](https://medium.com/p/d6f425ceea13#4f67)*   [HTTP](https://medium.com/p/d6f425ceea13#1707) åŒ:
    -[HTTP 1.0](https://medium.com/p/d6f425ceea13#46fe)
    -[HTTP 1.1](https://medium.com/p/d6f425ceea13#b596)
    -[HTTP 2](https://medium.com/p/d6f425ceea13#5401)
    -[HTTP 3](https://medium.com/p/d6f425ceea13#1b46)
    -[GET VS POST](https://medium.com/p/d6f425ceea13#b61e)*   [å¸¦æœ‰ç”µå­æ ‡ç­¾çš„ HTTP ç¼“å­˜](https://medium.com/p/d6f425ceea13#00b2)*   [TLS](https://medium.com/p/d6f425ceea13#891a) :
    - [verã€‚1.2](https://medium.com/p/d6f425ceea13#013d)-[ç‰ˆæœ¬ 1.3](https://medium.com/p/d6f425ceea13#46c3)-[DNS over HTTPS åˆå DoH](https://medium.com/p/d6f425ceea13#8122)*   [è¯ä¹¦å’Œè¯ä¹¦é¢å‘æœºæž„](https://medium.com/p/d6f425ceea13#27f5)*   [SNIï¼ŒåŸƒæ–¯å°¼](https://medium.com/p/d6f425ceea13#f252)*   [Web æœåŠ¡å™¨](https://medium.com/p/d6f425ceea13#f42d)å’Œ
    - [æœ‰çŠ¶æ€ä¸Žæ— çŠ¶æ€åº”ç”¨](https://medium.com/p/d6f425ceea13#fa80)*   CORS +é£žè¡Œå‰è¯·æ±‚*   [HTTP cookie](https://medium.com/p/d6f425ceea13#fcca)*   [ä»£ç† vs åå‘ä»£ç†](https://medium.com/p/d6f425ceea13#92ed)å’Œ:
    - [L4 vs L7 è´Ÿè½½å¹³è¡¡å™¨](https://medium.com/p/d6f425ceea13#3728)
    - [TLS/SSL ç»ˆæ­¢](https://medium.com/p/d6f425ceea13#0c67)
    - [TLS ç›´é€š](https://medium.com/p/d6f425ceea13#d655)*   [HSTS](https://medium.com/p/d6f425ceea13#ccdb)*   [å“‘å‰§å—…æŽ¢](https://medium.com/p/d6f425ceea13#74e5)![](img/f02eae277476a65c2055663266579bf6.png)

ç…§ç‰‡ç”±[ç¦è’‚æ–¯Â·ç¦æ‰˜æ™®æ´›æ–¯](https://unsplash.com/@ffstop?utm_source=medium&utm_medium=referral)åœ¨ [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) æ‹æ‘„

# ç®€ä»‹å’Œå…è´£å£°æ˜Ž

æœ€è¿‘ï¼Œä½œä¸ºä¸€åè½¯ä»¶å·¥ç¨‹å¸ˆï¼Œæˆ‘åœ¨å½“å‰çš„å·¥ä½œä¸­é‡åˆ°äº†ä¸€ä¸ªé—®é¢˜:æˆ‘éœ€è¦ä¸ºä¸€ä¸ªè´Ÿè´£è´Ÿè½½æµ‹è¯•çš„ç³»ç»Ÿè¿›è¡Œè®¾ç½®ã€‚åˆåæ‰®æ¼” DevOps å·¥ç¨‹å¸ˆã€‚ç„¶è€Œï¼Œåœ¨å¼€å§‹ä¹‹å‰ï¼Œæˆ‘çš„å›¢é˜Ÿé¢†å¯¼å‘Šè¯‰æˆ‘:æŽ’ç»ƒ/å­¦ä¹  OSIã€L4 ä¸Ž L7 è´Ÿè½½å¹³è¡¡å™¨ã€SNI ä¹‹ç±»çš„ä¸œè¥¿ã€‚å—¯ï¼Œæˆ‘æƒ³å¤§æ¦‚è¦èŠ±å‡ å¤©æ—¶é—´ã€‚ä½†æ˜¯ OSI æŠŠæˆ‘å¼•åˆ°äº† NATï¼ŒARP ç­‰ç­‰ã€‚æ€»ä¹‹ï¼Œæˆ‘æ¯å¤©èŠ± 2.5 å‘¨çš„æ—¶é—´å­¦ä¹ ç½‘ç»œå’Œç½‘ç»œç›¸å…³çš„ä¸œè¥¿ã€‚

è™½ç„¶æˆ‘èŠ±äº†å‡ åä¸ªå°æ—¶ï¼Œä½†æˆ‘åªè§¦åŠäº†è¡¨é¢ï¼Œå› ä¸ºæˆ‘çŽ°åœ¨ä¸éœ€è¦æ·±å…¥ç ”ç©¶ä¸€äº›ä¸»é¢˜ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä¸ä¼šè®¨è®ºâ€œç¬¬äºŒå±‚çš„ç‰‡æ®µå¦‚ä½•å˜å½¢ä¸ºç¬¬ä¸€å±‚â€çš„åŽŸå› ï¼Œå› ä¸ºæˆ‘æ ¹æœ¬ä¸éœ€è¦å®ƒ+æˆ‘è¿˜æœ‰å…¶ä»–å¯¹ nowâ€¼ï¸æ›´é‡è¦çš„ä¸œè¥¿è¦å­¦

ä½†æ˜¯ï¼Œå¦‚æžœä½ åœ¨æ–‡ç« ä¸­å‘çŽ°ä»»ä½•é”™è¯¯æˆ–è€…æƒ³é—®ä»»ä½•é—®é¢˜ï¼Œè¯·éšæ—¶åœ¨è¯„è®ºä¸­ç»™æˆ‘ç•™è¨€æˆ–è€…é€šè¿‡æ–‡ç« æœ«å°¾æä¾›çš„æ¥æºç»™æˆ‘å†™ä¿¡ðŸ“£

æ­¤å¤–ï¼Œæˆ‘å°†åœ¨æ¯ä¸ªéƒ¨åˆ†æä¾›ç›¸åº”çš„èµ„æºã€‚é€šå¸¸ï¼Œè¿™æ˜¯ä¾¯èµ›å› Â·çº³èµ›å°”çš„è§†é¢‘ðŸ’»

# 1.å¸¦æœ‰ ARPã€NATã€å…¬æœ‰ä¸Žç§æœ‰ IP åœ°å€çš„ OSI æ¨¡åž‹

## 1.å¼€æ”¾å¼ç³»ç»Ÿäº’è”å‚è€ƒæ¨¡åž‹(Open System Interconnect Reference Model)

è§†é¢‘ 1:[T3ã€https://www.youtube.com/watch?v=7IS7gigunyIã€‘T5](https://www.youtube.com/watch?v=7IS7gigunyI)

è§†é¢‘äºŒ:[**https://www.youtube.com/watch?v=eNF9z5JNl-A**](https://www.youtube.com/watch?v=eNF9z5JNl-A)

è¿›ä¸€æ­¥é˜…è¯»ä»¥æ›´å¥½åœ°ç†è§£ **MAC åœ°å€**:

 [## mac åœ°å€

### åœ¨è®¡ç®—æœºç½‘ç»œä¸­ï¼Œåª’ä½“è®¿é—®æŽ§åˆ¶(MAC)åœ°å€ä¸Ž IP åœ°å€ä¸€æ ·é‡è¦ã€‚åœ¨â€¦ä¸­å­¦ä¹ 

people.richland.edu](https://people.richland.edu/dkirby/141macaddress.htm#:~:text=The%20MAC%20address%20is%20an,like%20TCP%2FIP%20to%20function) 

**OSI** â€”å¼€æ”¾ç³»ç»Ÿäº’é€šæ¨¡åž‹ã€‚å®ƒæ˜¯ä¸€ä¸ªæ¨¡åž‹ï¼Œè´Ÿè´£å®šä¹‰æ•°æ®å¦‚ä½•ä»Žæœ€é«˜å±‚(ä¾‹å¦‚ï¼Œå½“æˆ‘ä»¬å‘å‡º GET è¯·æ±‚æ—¶)æµå‘æœ€åº•å±‚(è·¨è¶Šå…¨çƒçš„ç‰©ç†ç”µç¼†)ã€‚

æ¨¡åž‹ä¸­æœ‰ 7 å±‚ï¼Œå…¶ä¸­ 1 å±‚æ˜¯æœ€ä½Žå±‚(ä¹Ÿç§°ä¸ºç‰©ç†å±‚)ï¼Œç¬¬ 7 å±‚æ˜¯æœ€é«˜å±‚(ä¹Ÿç§°ä¸ºåº”ç”¨å±‚)ã€‚å¯¹äºŽè½¯ä»¶å·¥ç¨‹å¸ˆæ¥è¯´ï¼Œæœ€é‡è¦çš„æ˜¯ç¬¬ 7 å±‚å’Œç¬¬ 4 å±‚ã€‚æˆ‘ä»¬å¯ä»¥è¯´æ¯ä¸€å±‚éƒ½ç»™æ•°æ®æ·»åŠ äº†ä¸€äº›å¤´ã€‚

è®©æˆ‘ä»¬æ¥çœ‹çœ‹æ‰€æœ‰çš„ orderâž¿:

![](img/7cf88401d184705a9778968a89b51736.png)

**OSI** æ¨¡åž‹å›¾åƒ

7.ç¬¬ 7 å±‚â€”åº”ç”¨å±‚ã€‚è¿™æ˜¯æˆ‘ä»¬åœ¨åº”ç”¨ç¨‹åºä¸­å‘å‡º HTTP/HTTPS åè®®è¯·æ±‚çš„å±‚ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å‘å‡º GET è¯·æ±‚(æ‰€æœ‰è¿™äº›ä¸œè¥¿éƒ½æ¥è‡ªä¸åŒçš„å±‚ï¼Œä½†å®ƒçœ‹èµ·æ¥å°±åƒä½ ä»Žä½ çš„åº”ç”¨ç¨‹åºå‘é€ä¸€äº›è¯·æ±‚):

*   GET/ â€”è¯·æ±‚çš„ç±»åž‹
*   **HTTP åè®®** +å¸¦æœ‰ cookies çš„æ ‡é¢˜ï¼Œå†…å®¹ç±»åž‹

å¦‚æžœæˆ‘ä»¬å‘é€ POST/ requestï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¹Ÿåœ¨è¿™ä¸ªçº§åˆ«ä¸Šåºåˆ—åŒ–æ•°æ®ã€‚

6.ç¬¬ 6 å±‚â€”è¡¨ç¤ºå±‚ã€‚è¿™ä¸€å±‚è´Ÿè´£:

*   ç”¨ ASCII ç¼–ç 
*   **åŠ å¯†/è§£å¯†:SSLï¼ŒTCL** (ä½†è¿™æ˜¯ç°è‰²åœ°å¸¦)
*   åŽ‹ç¼©

å®žé™…ä¸Šï¼ŒTLS ä»‹äºŽ 4 å±‚å’Œ 7 å±‚ä¹‹é—´:ä»‹äºŽ TCP å’Œ HTTP ä¹‹é—´ã€‚å› æ­¤ï¼Œä»¥ä¸Šæ‰€æœ‰æ•°æ®(æœ€å¤š 7 å±‚)å°†è¢«åŠ å¯†ã€‚

5.ç¬¬ 5 å±‚â€”ä¼šè¯å±‚ã€‚è¯¥å±‚æ ‡è®°æ•°æ®ä»¥è¿›ä¸€æ­¥è¯†åˆ«å®ƒã€‚ä¾‹å¦‚ï¼Œå½“æ•°æ®å°†æ¥è‡ªç¬¬ 1 å±‚åˆ°ç¬¬ 7 å±‚æ—¶ï¼Œè¿™ä¸€å±‚æ£€æŸ¥å®ƒæ˜¯å¦æ˜¯è¯¥ TCP è¿žæŽ¥çš„ä¼šè¯ï¼Œå› ä¸ºå¯èƒ½æœ‰åˆ°å•ä¸ªæœåŠ¡å™¨çš„å¤šä¸ª TCP è¿žæŽ¥ã€‚

4.ç¬¬ 4 å±‚â€”ä¼ è¾“å±‚ã€‚åœ¨è¿™ä¸€å±‚ä¹‹å‰ï¼Œæ‰€æœ‰çš„è¯·æ±‚éƒ½æ˜¯ä¸€ä¸ªæ•°æ®å—ã€‚åœ¨è¿™ä¸€å±‚ï¼Œå®ƒå°†è¢«åˆ†å‰²æˆ**æ®µ**ã€‚æ­¤å¤–ï¼Œåœ¨è¿™ä¸€å±‚ï¼Œæ‰€æœ‰çš„æ•°æ®æ®µéƒ½è¢«*å‰ç½®*å’Œ*åˆ†åˆ«é™„åŠ *æºç«¯å£å’Œç›®çš„ç«¯å£ã€‚çœ‹èµ·æ¥åƒæ˜¯:**æºç«¯å£æ®µç›®çš„ç«¯å£**ã€‚æ­¤å¤–ï¼Œè¯¥å±‚æ·»åŠ åºåˆ—ï¼Œä»¥ä¾¿åœ¨æŽ¥æ”¶åˆ°è¿™äº›*æ®µ*æ—¶å¯¹å…¶è¿›è¡ŒæŽ’åºã€‚ä¸ºäº†æ·»åŠ è¿™ä¸ªåºåˆ—ï¼Œä½ éœ€è¦**æ ‡é¢˜**

3.ç¬¬ 3 å±‚â€”ç½‘ç»œå±‚(IP åè®®)ã€‚è¿™ä¸€å±‚åªæ˜¯æŽ¥æ”¶æ¥è‡ª**ä¼ è¾“å±‚**çš„æ•°æ®æ®µ(è€Œä¸”ï¼Œå®ƒå¯¹ç«¯å£ä¸€æ— æ‰€çŸ¥)å¹¶æ·»åŠ æ›´å¤šçš„å¤´:ç«¯å£ã€‚æ‰€ä»¥ï¼Œè¿™ä¸€å±‚ä¹‹åŽçš„æ•°æ®å°†ä¼šæ˜¯è¿™æ ·çš„:

`**source IP Address â€” IP Packet â€” destination IP Address**`

åœ¨è¿™ä¸€å±‚ï¼Œæˆ‘ä»¬å°†æ•°æ®ç§°ä¸º **IP æ•°æ®åŒ…**(åœ¨ç¬¬ 4 å±‚ï¼Œå®ƒæ˜¯æ•°æ®æ®µ)ã€‚

2.ç¬¬ 2 å±‚â€”æ•°æ®é“¾è·¯ã€‚åœ¨è¿™ä¸€å±‚ï¼ŒIP æ•°æ®åŒ…è¢«åˆ†æˆæ›´å°çš„éƒ¨åˆ†ã€‚åœ¨è¿™ä¸€å±‚ä¸Šï¼Œæˆ‘ä»¬å½¢æˆæ‰€è°“çš„**å¸§**ï¼Œçœ‹èµ·æ¥åƒ:

`**MAC Source â€” IP PACKET â€” MAC Destination**`

æ­¤å¤–ï¼Œè¿™æ˜¯å”¯ä¸€ä¸€å±‚æœ‰ä¸€ä¸ªæ‹–è½¦:å®ƒåŒ…å«é”™è¯¯æ£€æµ‹å’Œé”™è¯¯çº æ­£ä½ã€‚å®ƒä¹Ÿè¢«ç§°ä¸ºå¸§æ ¡éªŒåºåˆ—(FCS)ã€‚

æŽ¥ä¸‹æ¥ï¼Œåƒ`01100010`è¿™æ ·çš„æ¯”ç‰¹è¢«æŽ¨åˆ°æœ€ä½Žå±‚ã€‚

*   åƒå¾€å¸¸ä¸€æ ·ï¼Œå¦‚æžœ IP åŒ…å¾ˆå¤§ï¼Œå¾ˆå®¹æ˜“å‡ºçŽ°å¤šä¸ª T21 ç¢Žç‰‡
*   å¦‚æžœæˆ‘ä»¬ä¸çŸ¥é“ **MAC çš„**åœ°å€ï¼Œé‚£ä¹ˆå°±è®© [**ARP** **è¯·æ±‚**](https://medium.com/@SleeplessChallenger/d6f425ceea13#684b) æ‰¾åˆ°ç›®çš„åœ°çš„ç½‘å…³
*   å¦‚æžœè¯·æ±‚ä¸å‘é€åˆ°æˆ‘ä»¬çš„å­ç½‘ï¼Œé‚£ä¹ˆè¿žæŽ¥æˆ‘ä»¬å’Œå¤–éƒ¨ä¸–ç•Œçš„è·¯ç”±å™¨çš„ MAC åœ°å€ã€‚

1.  ç¬¬ 1 å±‚â€”ç‰©ç†å±‚ã€‚å®ƒæŽ¥å—æ¥è‡ªç¬¬äºŒå±‚çš„**å¸§**,å¹¶å°†å®ƒä»¬æ”¾å…¥ç‰©ç†è®¾å¤‡ä¸­:ä»¥å¤ªç½‘ä¹Ÿå°±æ˜¯ç”µç¼†ï¼ŒWiFi ä¹Ÿå°±æ˜¯æ— çº¿ç”µæ³¢ã€‚

## **PDU**

åè®®æ•°æ®å•å…ƒã€‚å®ƒæè¿°äº†ä¸åŒçº§åˆ«çš„æ•°æ®:

*   7â€“5:*æ•°æ®*
*   4 â€”å¦‚æžœæ˜¯ UDPï¼Œé‚£ä¹ˆ*æ•°æ®æŠ¥*ã€‚å¦‚æžœæ˜¯ TCP é‚£ä¹ˆ*æ®µ*
*   3: *æ•°æ®åŒ…*
*   2: *æ¡†æž¶*

å› æ­¤ï¼Œè¿™ç§**PDU**åœ¨ä¸€æ¬¡è¿žæŽ¥ä¸­æ•°é‡å¾ˆå¤§ã€‚ç„¶åŽï¼Œåœ¨ç¬¬ 3 å±‚ï¼Œæˆ‘ä»¬å°†è¿™äº›**PDU**åˆ†å‰²æˆæ›´å°çš„éƒ¨åˆ†â€”â€”**ç‰‡æ®µ**ã€‚å¯¹äºŽæ¯ä¸ªè¢«è®¤ä¸ºå·²ä¼ é€çš„æ•°æ®åŒ…ï¼Œæ‰€æœ‰çš„**ç‰‡æ®µ**éƒ½å¿…é¡»ä¼ é€ã€‚

## 2.ç©ºè¢­é¢„é˜²æŽªæ–½

## åœ°å€åˆ†è¾¨åè®®

è§†é¢‘:[https://youtu.be/mqWEWye-8m8](https://youtu.be/mqWEWye-8m8)

è¿˜è®°å¾—æˆ‘è¯´è¿‡è¦ä»Ž OSI æ¨¡åž‹çš„ç¬¬ 3 å±‚åˆ°ç¬¬ 2 å±‚ï¼Œæˆ‘ä»¬éœ€è¦å¾—åˆ°ç›®çš„åœ°çš„ **MAC åœ°å€**å—ï¼Ÿä½†æ˜¯ï¼Œæ€Žä¹ˆå¯èƒ½å¾—åˆ°é‚£ä¸€ä¸ªå‘¢ï¼Ÿ **ARP** æ˜¯ä¸ºç»™å®šçš„ **IP åœ°å€**æ‰¾åˆ° **MAC** çš„ä¸œè¥¿ã€‚

æ¯å°æœºå™¨éƒ½æœ‰ ARP è¡¨ï¼ŒARP è¡¨æœ‰æ˜ å°„: **IP åœ°å€â€” MAC åœ°å€**ã€‚ä½†æ˜¯å¦‚æžœæˆ‘ä»¬çŽ°åœ¨çš„ IP æ²¡æœ‰ MAC å‘¢ï¼Ÿæ²¡é—®é¢˜ï¼

æˆ‘æƒ³çœ‹çœ‹ä¸¤ä¸ªæ¡ˆä¾‹ðŸ”ï¼š

1.  åœ¨æˆ‘ä»¬çš„å­ç½‘å†…

![](img/22b949a9bd91692b0ccd76bdf9bef7b9.png)

è·¯ç”±å™¨çš„ ARP ç¤ºä¾‹

*   åœ¨ä¸Šå›¾ä¸­ï¼Œä½ å¯ä»¥çœ‹åˆ°æ¯å°æœºå™¨æ—è¾¹çš„ ARP è¡¨ã€‚
*   é¦–å…ˆï¼Œæœºå™¨å‘è·¯ç”±å™¨è¯·æ±‚æ‰€éœ€çš„ **IP åœ°å€**ã€‚
*   è·¯ç”±å™¨é€šçŸ¥å­ç½‘ä¸­çš„æ‰€æœ‰æœºå™¨ï¼Œå¦‚æžœæˆåŠŸï¼Œå…¶ä¸­ä¸€å°æœºå™¨ç”¨ **MAC åœ°å€**è¿›è¡Œå“åº”ã€‚
*   è·¯ç”±å™¨ç»™æˆ‘ä»¬è¿™ä¸ª MAC åœ°å€ï¼Œæˆ‘ä»¬å°†å®ƒç¼“å­˜åœ¨ **ARP è¡¨**ä¸­ã€‚
*   è€Œæˆ‘ä»¬çš„æœºå™¨å¯ä»¥å‘ç»™å®šçš„ **MAC åœ°å€**å‘é€æ•°æ®(çœ‹ OSI ç¬¬äºŒå±‚å’Œç¬¬ä¸€å±‚)

2.åœ¨æˆ‘ä»¬çš„å­ç½‘ä¹‹å¤–:

**è¿™é‡Œæœ‰ç‚¹ä¸åŒ**

*   å½“æˆ‘ä»¬å‘å¤–éƒ¨å­ç½‘å‘é€æ•°æ®æ—¶(æˆ‘ä»¬é€šè¿‡è®¡ç®—ç›®çš„ IP åœ°å€çš„æŽ©ç çŸ¥é“è¿™ä¸€ç‚¹)ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡è·¯ç”±å™¨æ¥å®Œæˆã€‚
*   é¦–å…ˆå‘è·¯ç”±å™¨å‘å‡º ARP è¯·æ±‚ï¼ŒæŽ¥æ”¶è·¯ç”±å™¨çš„ MAC åœ°å€å¹¶ç¼“å­˜åœ¨è¡¨ä¸­ã€‚
*   ä½¿ç”¨è¿™ä¸ª **MAC** åœ°å€æž„å»ºè¯·æ±‚(åˆåæ¥è‡ª OSI ç¬¬ 2 å±‚çš„**ç‰‡æ®µ**)å¹¶å‘é€ç»™è·¯ç”±å™¨ã€‚
*   è·¯ç”±å™¨åœ¨ç¬¬ 2 å±‚è§£å°è£…æ•°æ®ï¼Œç„¶åŽç§»åŠ¨åˆ°ç¬¬ 3 å±‚ã€‚å®ƒæŸ¥çœ‹ **IP åœ°å€**ã€‚
*   è·¯ç”±å™¨äº¤æ¢æˆ‘ä»¬æœºå™¨çš„ IP åœ°å€å¹¶æŠŠå®ƒè‡ªå·±ã€‚å› æ­¤ï¼Œå®ƒä»£è¡¨è‡ªå·±å‘å¤–éƒ¨ä¸–ç•Œå‘å‡ºè¯·æ±‚ã€‚ä¸ºäº†åŒ¹é…å›žæ¥ï¼Œå®ƒéœ€è¦ [**NAT**](https://medium.com/p/d6f425ceea13#2d26) ã€‚

æ‰€ä»¥ï¼Œè·¯ç”±å™¨ä¸ä½¿ç”¨ **MAC** ï¼Œè€Œæ˜¯ä½¿ç”¨ **IP** ã€‚å®ƒä½¿ç”¨å­˜å‚¨åœ¨å…¶*è·¯ç”±è¡¨*ä¸­çš„æ¯ä¸€ä¸ª*å­ç½‘æŽ©ç *ï¼Œå¹¶å¼€å§‹è®¡ç®—å¯»æ‰¾å‡ºç«™ IP çš„åŒ¹é…ã€‚

è·¯ç”±è¡¨åŒ…æ‹¬:1 . **DNA** 2ã€‚**ä¸‹ä¸€è·³** 3ã€‚**å…¬åˆ¶**

å› æ­¤ï¼Œå¦‚æžœè·¯ç”±å™¨æ²¡æœ‰æ‰¾åˆ°ä¸Žç›®çš„ IP åŒ¹é…çš„ **DNA** ï¼Œå®ƒå°†ä½¿ç”¨`0.0.0.0`çš„ DNA

PS: **MITM** (ä¸­é—´äººæ”»å‡»)å¯èƒ½å‘ç”Ÿåœ¨æœ‰äººä¼ªè£…æˆè·¯ç”±å™¨çš„æƒ…å†µä¸‹ã€‚åœ¨ä¸‹ä¸€èŠ‚ä¸­é˜…è¯»å…³äºŽ[çš„æ›´å¤šä¿¡æ¯](https://medium.com/p/d6f425ceea13#27f5)

## 3.ç²¾çµ

## ç½‘ç»œåœ°å€è½¬æ¢

è§†é¢‘:[**https://www.youtube.com/watch?v=RG97rvw1eUo**](https://www.youtube.com/watch?v=RG97rvw1eUo)

å»¶ä¼¸é˜…è¯»:

*   ã€https://serverfault.com/a/14587 
*   [https://networkengineering.stackexchange.com/a/3342](https://networkengineering.stackexchange.com/a/3342)

å®ƒæ˜¯å°†ä¸€ä¸ª **IP åœ°å€**æ˜ å°„åˆ°å¦ä¸€ä¸ª **IP åœ°å€**çš„è¿‡ç¨‹ã€‚äº‹å®žä¸Šï¼Œè¿™æ›´å›°éš¾ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦æ·±å…¥ç ”ç©¶ã€‚

é¦–å…ˆï¼Œâš™ï¸:å›½å®¶å…¬å›­çš„ç›®çš„æ˜¯ä»€ä¹ˆ

*   ç§æœ‰åˆ°å…¬å…± IP è½¬æ¢(è§£å†³ IPV4 åœ°å€ä¸è¶³çš„é—®é¢˜)
*   ç«¯å£è½¬å‘
*   L4 è´Ÿè½½å¹³è¡¡

![](img/b603b4155dc8fed3b6be3db1ddfc323c.png)

**NAT** ç¤ºä¾‹

1.  å­ç½‘ä¸­çš„æœºå™¨å‘å­ç½‘å¤–çš„æœºå™¨å‘å‡ºè¯·æ±‚ã€‚å®ƒä»Žè®¡ç®—æŽ©ç ä¸­çŸ¥é“ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬ä¸èƒ½å‘æˆ‘ä»¬ç½‘ç»œå¤–çš„æœºå™¨å‘å‡º **ARP è¯·æ±‚**ã€‚
2.  é¦–å…ˆï¼Œæˆ‘ä»¬çš„æœºå™¨å‘è·¯ç”±å™¨å‘å‡º **ARP è¯·æ±‚** ( [é˜…è¯»ä¸Šæ–‡](https://medium.com/p/d6f425ceea13#6ed1))ã€‚
3.  ç„¶åŽæˆ‘ä»¬æŠŠæ•°æ®å‘ç»™è·¯ç”±å™¨(ä¹Ÿå«**é»˜è®¤ç½‘å…³**)ã€‚è·¯ç”±å™¨å°†**æº IP åœ°å€**æ¢æˆè‡ªå·±çš„:

*   *æ¥æº***IP åœ°å€:ç«¯å£â†’è·¯ç”±å™¨ IP åœ°å€:ç«¯å£(ç«¯å£å¯ä»¥ä¸Žç¬¬ä¸€ä¸ªç›¸åŒï¼Œä¹Ÿå¯ä»¥ä¸åŒ)*è¿˜æœ‰ï¼Œè·¯ç”±å™¨äº’æ¢ **IP åœ°å€**ç”¨äºŽå¤–ç½‘(è·¯ç”±å™¨æœ‰ **IP åœ°å€**ç”¨äºŽå†…ç½‘ï¼Œç”¨äºŽå¤–ç½‘)ï¼Œè€Œä¸æ˜¯å­ç½‘ã€‚*
*   **è·¯ç”±å™¨ IP åœ°å€:ç«¯å£â†’ç›®çš„ IP åœ°å€:ç«¯å£**

*å› æ­¤ï¼Œè·¯ç”±å™¨æœ‰è¿™ä¸ªè¡¨ï¼Œå®ƒå¯ä»¥å°†å“åº”åŒ¹é…å›žå­ç½‘ä¸­æœºå™¨çš„ **IP** ã€‚å¦‚æžœä»€ä¹ˆä¹Ÿæ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™è¡¨æ˜Žè¿™å°æœºå™¨å®žé™…ä¸Šæ²¡æœ‰å‘é€ä»»ä½•ä¸œè¥¿ã€‚*

## *4.å…¬å…±ä¸Žç§æœ‰ IP åœ°å€*

*è§†é¢‘:ã€https://www.youtube.com/watch?v=92b-jjBURkw *

*å»¶ä¼¸é˜…è¯»:*

*   *[https://superuser.com/a/801107](https://superuser.com/a/801107)*
*   *[https://superuser.com/a/801321](https://superuser.com/a/801321)*

***å…¬å…± IP åœ°å€**å¦‚ä»Šç›¸å½“æ˜‚è´µï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ä¸€ä¸ªè¯¡è®¡:è´­ä¹°ä¸€ä¸ª**å…¬å…± IP åœ°å€**å¹¶åˆ›å»ºä¸€å †**ç§æœ‰ IP åœ°å€**ï¼Œå®ƒä»¬åœ¨å†…éƒ¨ç½‘ç»œ/å­ç½‘(LAN)ä¸­çš„å…¬å…± IP åœ°å€ä¹‹åŽã€‚å½“ç„¶ï¼Œè·¯ç”±å™¨ä¹Ÿæœ‰**ç§æœ‰ IP** åœ°å€ï¼Œä¾›å­ç½‘ä¸­çš„æœºå™¨ç›¸äº’é€šä¿¡ã€‚*

*![](img/c506686a06727074e84d2db037a552a1.png)*

*å…¬æœ‰å’Œç§æœ‰ IP åœ°å€ç¤ºä¾‹*

*ä¸ºäº†è¾¨åˆ«æ¥è‡ªå¤–éƒ¨ä¸–ç•Œçš„è¯·æ±‚çš„å†…éƒ¨æœºå™¨ï¼Œæˆ‘ä»¬ç»™æ¯å°æœºå™¨åˆ†é…å”¯ä¸€çš„ç«¯å£ã€‚æ‰€ä»¥ï¼Œå«åš**ç«¯å£è½¬å‘**ã€‚å¼•æ“Žç›–ä¸‹ä½¿ç”¨ [**NAT**](https://medium.com/p/d6f425ceea13#254c) ã€‚*

*ç®¡é“:*è·¯ç”±å™¨å…¬ç½‘ IP åœ°å€+ 8080* ä»Žå¤–ç•Œè°ƒç”¨â†’ 192.168.x.x:8080(åˆåå†…éƒ¨æœº)*

*é¡ºä¾¿è¯´ä¸€ä¸‹ï¼Œå†…éƒ¨å­ç½‘ä¸­çš„æœºå™¨æœ‰ä¸åŒçš„ **IP åœ°å€**ã€‚*

## *5.ä¼ è¾“æŽ§åˆ¶åè®®*

*ä¹Ÿè®¸ï¼Œä½ å¬è¯´è¿‡ TCP/IP æ¨¡åž‹ï¼Œæƒ³äº†è§£æ›´å¤šã€‚ç„¶åŽç»™è¿™ä¸ªé…·å“¥ä¸€ä¸ªæ‰‹è¡¨:*

# *2.åŸŸåæœåŠ¡å™¨(Domain Name Server)*

*è§†é¢‘:[https://www.youtube.com/watch?v=tgWx81_NGcg](https://www.youtube.com/watch?v=tgWx81_NGcg)*

*æ›´å¤šé˜…è¯»:[**https://superuser.com/a/1075081**](https://superuser.com/a/1075081)*

***DNS** â€”åŸŸåç³»ç»Ÿã€‚è¿™æ˜¯ä¸€ä¸ªç³»ç»Ÿæ¥å¯»æ‰¾æˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸­è¾“å…¥çš„åŸŸåçš„ IP åœ°å€ã€‚ä¸ºä»€ä¹ˆè¿™æ ·åšï¼Ÿæˆ‘ä»¬äº²çˆ±çš„æœºå™¨ä¸èƒ½é˜…è¯»æ–‡æœ¬å¹¶å°†å…¶è½¬æ¢æˆæ•°æ®ï¼Œæ‰€ä»¥å®ƒä»¬éœ€è¦ä¸€äº›æ•°å­—æ¥å·¥ä½œã€‚å›žæƒ³ä¸€ä¸‹ OSI æ¨¡åž‹ï¼Œæˆ‘ä»¬ä¹Ÿä¸å¤„ç†æ–‡æœ¬ï¼Œè€Œæ˜¯å¤„ç†ç«¯å£ã€IPã€MAC ç­‰ã€‚*

*DNS ä½œä¸ºä¸€ä¸ªæ•°æ®åº“å·¥ä½œ(å®žé™…ä¸Šæ˜¯ä¸€ä¸ªæ•°æ®åº“)ï¼Œä½†æ˜¯éžå¸¸èªæ˜Žå’Œè®¾è®¡è‰¯å¥½ã€‚å¦‚æžœä¸æ˜¯è¿™æ ·ï¼Œæƒ³è±¡ä¸€ä¸‹å¤„ç†ä¸€ä¸ªè¯·æ±‚éœ€è¦å¤šé•¿æ—¶é—´ã€‚*

> *â€œè¦å¤„ç†æ•°åäº¿è¡Œï¼Œä½ éœ€è¦é¿å…å¤„ç†æ•°åäº¿è¡Œâ€â€”â€”ä½œè€… [TCP æ¡æ‰‹](https://medium.com/u/e4cbe924ccb#4f67)çš„å†…å®¹*
> 
> *   ***ä¿è¯äº¤ä»˜:**å¦‚æžœæ²¡æœ‰ç¡®è®¤ï¼Œé‚£ä¹ˆå®ƒå°†é‡æ–°å‘é€ä¿¡æ¯(è¦ä¹ˆæ•°æ®åŒ…æ²¡æœ‰åˆ°è¾¾ï¼Œè¦ä¹ˆå®ƒä»¬å·²æŸå)**   ***åŸºäºŽè¿žæŽ¥:** *å®¢æˆ·ç«¯-æœåŠ¡å™¨*éœ€è¦åœ¨å®ƒä»¬ä¹‹é—´å»ºç«‹å”¯ä¸€çš„è¿žæŽ¥**   ***æ‹¥å¡žæŽ§åˆ¶:**åœ¨èƒ½å¤Ÿå¤„ç†æ•°æ®æ—¶å‘é€æ•°æ®ï¼Œå¦åˆ™ç­‰å¾…**   ***æœ‰åºæ•°æ®åŒ…:**æ•°æ®å°†è¢«åˆ†å‰²æˆæ— åºçš„æ•°æ®åŒ…ã€‚ä¹Ÿåœ¨ [TCP æ¡æ‰‹](https://medium.com/p/d6f425ceea13#4f67)ä¸­è®¨è®º*
> 
> *ç¼ºç‚¹:*
> 
> *   *æ‰€æœ‰æ¥è‡ªä¸“ä¸šçš„ä¸œè¥¿éƒ½æ˜¯å°åŒ…*
> *   *æ›´å¤šå¸¦å®½*
> *   *æ¯” UDP æ…¢*
> *   ***æœ‰çŠ¶æ€:**å¦‚æžœ*å®¢æˆ·ç«¯*å·²è¿žæŽ¥ï¼Œå¹¶ä¸”æ‚¨é”€æ¯äº†*æœåŠ¡å™¨*â€”â€”è¿žæŽ¥å…³é—­ã€‚æ— çŠ¶æ€æ„å‘³ç€è¿™æ ·çš„æ“ä½œä¸ä¼šç ´åè¿žæŽ¥*
> *   ***æœåŠ¡å™¨å†…å­˜**(æ˜“å— **DOS** â€”æ‹’ç»æœåŠ¡æ”»å‡»):*æœåŠ¡å™¨*éœ€è¦ä¸ºæ¯ä¸ªè¿žæŽ¥åˆ†é…å†…å­˜= >é™åˆ¶è¿žæŽ¥æ•°ã€‚ä»€ä¹ˆï¼ŸæœåŠ¡å™¨å’Œè¿žæŽ¥ï¼Ÿé˜…è¯»[ç½‘ç»œæœåŠ¡å™¨ç« èŠ‚](https://medium.com/p/d6f425ceea13#f42d)*
> 
> ***UDP** â€”ç”¨æˆ·æ•°æ®æŠ¥åè®®*
> 
> ***ç¼ºç‚¹:***
> 
> *   *æ²¡æœ‰ç¡®è®¤*
> *   ***æ²¡æœ‰ä¿è¯äº¤ä»˜:**åªæœ‰ä¸€äº›æ ¡éªŒå’Œæ¥åˆ¤æ–­æ•°æ®åŒ…æ˜¯åè¿˜æ˜¯å¥½*
> *   ***æ— è¿žæŽ¥:**å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´æ²¡æœ‰ç‰©ç†è¿žæŽ¥*
> *   *æ— æ‹¥å¡žæŽ§åˆ¶*
> *   *æ²¡æœ‰æœ‰åºçš„æ•°æ®åŒ…*
> *   ***å®‰å…¨æ€§:**ä¸ä¿¡ä»»è¿žæŽ¥ï¼Œå› ä¸ºå®žé™…ä¸Šæ²¡æœ‰è¿žæŽ¥*
> 
> ***ä¼˜ç‚¹:***
> 
> *   *è¾ƒå°çš„æ•°æ®åŒ…*
> *   *æ›´å°‘çš„å¸¦å®½*
> *   *æ— å›½ç±çš„*
> 
> **å…³äºŽ TCP å’Œ UDP çš„æ³¨æ„äº‹é¡¹:**
> 
> *   *åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ•°æ®åº“ä¸èƒ½ä½¿ç”¨ **UDP***
> *   ***UDP** æ˜¯å¯æ‰©å±•çš„(å› ä¸ºæ‚¨å¯ä»¥åœ¨æ²¡æœ‰çœŸå®žè¿žæŽ¥å’Œ TCP çš„æƒ…å†µä¸‹å‘æœåŠ¡å™¨å‘é€æ•°æ®â€” **æœ‰çŠ¶æ€çš„**)*
> 
> # *4.TCP æ¡æ‰‹*
> 
> *è§†é¢‘:[https://www.youtube.com/watch?v=bW_BILl7n0Y](https://www.youtube.com/watch?v=bW_BILl7n0Y)*
> 
> *æˆ‘ä»¬åœ¨ä¸Šé¢è®¨è®ºäº† TCP çš„ä¸€èˆ¬æƒ…å†µã€‚çŽ°åœ¨æˆ‘æƒ³å‘æ‚¨å±•ç¤ºå®žé™…ä¸Šæ˜¯å¦‚ä½•åœ¨ TCP ä¸­å»ºç«‹è¿žæŽ¥çš„(è®°ä½ï¼ŒUDP æ˜¯æ— çŠ¶æ€çš„)ã€‚å›žæƒ³ä¸€ä¸‹ **TCP** æ˜¯ OSI ä¸­çš„ç¬¬ 4 å±‚ã€‚*
> 
> *å¿«é€Ÿæ¦‚è¿°ðŸŒªï¼š*
> 
> 1.  **å®¢æˆ·ç«¯*å‘é€è¯·æ±‚ï¼Œä¾‹å¦‚ï¼Œé€šè¿‡`CURL GET/`ã€‚*
> 2.  *æ•°æ®å°†è¢«åˆ†æˆ**ä¸ªåŒ…**
>     -æ¯ä¸ª**ä¸ªåŒ…**éƒ½æœ‰ä¸€ä¸ª ***åºåˆ—å·*** ä»¥ä¾¿åœ¨å®ƒä»¬è¢«åˆ†å‰²å’Œç½‘æ ¼åŒ–åŽå¯¹åŒ…è¿›è¡ŒæŽ’åºï¼Œå› ä¸º web ä¸èƒ½ä¿è¯å®ƒä»¬çš„ä¸¥æ ¼æŽ’åºå’Œäº¤ä»˜
>     - *æœåŠ¡å™¨*åœ¨æ”¶åˆ°æ¯ä¸ª**åŒ…**åŽå¯¹*å®¢æˆ·ç«¯*åšå‡ºå“åº”â€” **ç¡®è®¤**(å›žå¿†ä¸Šä¸€èŠ‚)ã€‚å¦‚æžœæ²¡æœ‰æ”¶åˆ°â€”é‡æ–°å‘é€ã€‚å–Šå‡º**ä¿è¯é€è´§ä¸Šé—¨ã€‚***
> 3.  *æœåŠ¡å™¨å°†ç­‰å¾…æ‰€æœ‰**æ•°æ®åŒ…**åˆ°è¾¾*
> 
> *æ›´æ·±å…¥çš„æ¦‚è¿°:*
> 
> *![](img/094eac5967efa518984cbde8d55da95a.png)*
> 
> *TCP æ¡æ‰‹ç¤ºä¾‹:å‰ 3 æ­¥*
> 
> *ä½†æ˜¯*æœåŠ¡å™¨*æ€Žä¹ˆç†è§£è¿™ä¸ªåºåˆ—æ˜¯ä»¥ **x** å¼€å§‹ï¼Œä»¥ **y** ç»“æŸï¼Ÿ= > *æœåŠ¡å™¨*å’Œ*å®¢æˆ·ç«¯*éœ€è¦å°±è¿™äº›**åºåˆ—å·** â€” **åŒæ­¥**è¾¾æˆä¸€è‡´*
> 
> 1.  **å®¢æˆ·ç«¯*æƒ³å‡ºäº†ä¸€ä¸ª**åºåˆ—**â€”â€”éšæœºæ€§æ¥ä¿æŠ¤å…å—æ”»å‡»ã€‚å³è¿™ä¸ªæ•°å­—æ˜¯ 700*
> 2.  **å®¢æˆ·ç«¯*å‘é€ **syn åºåˆ—å·:700***
> 3.  **æœåŠ¡å™¨*å“åº”:
>     - **syn å¦ä¸€ä¸ªåºåˆ—å·:å³ 200
>     -ç¡®è®¤**:*å®¢æˆ·ç«¯*çš„ **syn åºåˆ—å·**+æ­¤ç¬¬ä¸€ä¸ªè¯·æ±‚ä¸­ä¸º 1 çš„æ•°æ®åŒ…é•¿åº¦= > 701*
> 4.  *çŽ°åœ¨*å®¢æˆ·ç«¯*å‘é€**ç¡®è®¤** : *æœåŠ¡å™¨* **syn åºåˆ—å·** +æ•°æ®åŒ…**çš„é•¿åº¦**ï¼Œä¹Ÿæ˜¯ 1ï¼Œå› ä¸ºå®ƒæ˜¯æ¥è‡ª*æœåŠ¡å™¨= > 201* çš„ç¬¬ä¸€ä¸ªè¯·æ±‚*
> 
> ***é‡è¦æç¤º:**ç¬¬ 3 æ­¥ç”± 2 ä¸ªè¯·æ±‚ç»„æˆ 1 ä¸ªè¯·æ±‚ã€‚å®ƒè¢«ç§°ä¸º **syn/ack** ï¼Œæ‰€ä»¥ç»“æžœä¸­æœ‰ä¸€ä¸ª**åŒ…**ã€‚*
> 
> *= >åœ¨æ‰€æœ‰è¿™äº›ä¹‹åŽ:ç¬¬ä¸€ä¸ªçœŸæ­£çš„ GET è¯·æ±‚(æˆ–è€… POSTï¼Œä½ å¾—åˆ°äº†å®ƒ)*
> 
> 1.  *GET(æ•°æ®åŒ…é•¿åº¦ä¸º 10)å’Œ **syn åºåˆ—å·** 701*
> 2.  *æœåŠ¡å™¨å‘é€å›žä¸€ä¸ªç¡®è®¤:701 +æ•°æ®åŒ…çš„é•¿åº¦ï¼Œåœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­æ˜¯ 10*
> 
> # *5.è¶…æ–‡æœ¬ä¼ é€åè®®*
> 
> *è§†é¢‘ 1:[**https://www.youtube.com/watch?v=0OrmKCB0UrQ**](https://www.youtube.com/watch?v=0OrmKCB0UrQ)*
> 
> *è§†é¢‘ 2(å…³äºŽ HTTP 2 çš„æ¨¡å¼):[**https://www.youtube.com/watch?v=fVKPrDrEwTI&list = WL&index = 10**](https://www.youtube.com/watch?v=fVKPrDrEwTI&list=WL&index=10)*
> 
> ## *1.ä¸€èˆ¬å…³äºŽ HTTP:*
> 
> ***HTTP** ä»£è¡¨è¶…æ–‡æœ¬ä¼ è¾“åè®®:*
> 
> *   ***HTTP** è¯·æ±‚å±žæ€§:URLã€æ–¹æ³•ç±»åž‹ã€å¤´(å†…å®¹çš„ç§ç±»ã€cookiesã€ä¸»æœº)ã€ä¸»ä½“(å¯¹äºŽæŸäº›æ–¹æ³•ç±»åž‹)*
> *   ***HTTP** å“åº”:çŠ¶æ€ç ã€æ ‡é¢˜ã€æ­£æ–‡*
> 
> *ç•¥è°ˆ **HTTP** èšä¼šðŸ’¨ **:***
> 
> *   **å®¢æˆ·ç«¯*(ä¾‹å¦‚ Java åº”ç”¨)å‘å‡ºè¯·æ±‚*
> *   **HTTP æœåŠ¡å™¨*(éœ€è¦çŸ¥é“å¦‚ä½•å¤„ç† HTTP è¯·æ±‚çš„æœåŠ¡å™¨)æŽ¥å—è¯·æ±‚*
> *   *HTTP æ˜¯ OSI æ¨¡åž‹çš„ç¬¬ 7 å±‚åè®®*
> *   ***TCP** æ˜¯ä¸€ç§ä¸ºæˆ‘ä»¬ä¼ è¾“å­—ç¬¦ä¸²(æ•°æ®)çš„å·¥å…·ï¼Œä¹Ÿå°±æ˜¯ **HTTP** ï¼Œå› ä¸º TCP æ˜¯ç¬¬ 4 å±‚ï¼ŒHTTP æ˜¯ç¬¬ 7 å±‚*
> 
> *ç®€è¦ä»‹ç»ä¸€ä¸‹ **HTTP** ä¸­çš„æ•°æ®äº¤æ¢:*
> 
> 1.  *æ‰“å¼€å®¢æˆ·ç«¯ä¸ŽæœåŠ¡å™¨çš„è¿žæŽ¥: **GET/some-step.com** ã€‚å›žå¿† [**TCP æ¡æ‰‹**](https://medium.com/p/d6f425ceea13#4f67)*
> 2.  *è¯¥å­—ç¬¦ä¸²å°†è¢«è½¬æ¢ä¸º 101010 ä½*
> 3.  **æœåŠ¡å™¨*å¤„ç†è¯·æ±‚å¹¶é€šè¿‡ **TCP** è¿žæŽ¥å‘é€å“åº”:**å¤´**ã€**ã€‚html** æ–‡ä»¶ã€‚
>     -å½“ **TCP** å°†æ•°æ®åˆ†æˆ**ä¸ªæ•°æ®åŒ…**æ—¶ï¼Œå¯èƒ½ä¼šæœ‰å¤šä¸ªæ•°æ®åŒ…ã€‚å›žå¿†å…³äºŽ[çš„ç« èŠ‚**TCP**](https://medium.com/p/d6f425ceea13#ba3f)*
> 4.  *å¦‚æžœæ²¡æœ‰æ›´å¤šçš„è¯·æ±‚ï¼Œè¯·å…³é—­è¿žæŽ¥*
> 
> *é‚£ä¹ˆ **HTTPS** å‘¢ï¼Ÿæ˜¯æ€Žä¹ˆåšåˆ°çš„ï¼Ÿå“¦ï¼Œå­©å­ï¼Œè¿™æ˜¯ä¸€ä¸ªç›¸å½“æ²‰é‡çš„ä¸œè¥¿ï¼Œå› æ­¤å®ƒæ˜¯ä¸€ä¸ªå•ç‹¬çš„éƒ¨åˆ†ï¼Œå°†åœ¨ä¸‹é¢ã€‚ä½†æ˜¯å¦‚æžœä½ ä¸è€çƒ¦ï¼Œé‚£ä¹ˆè®¿é—®å…³äºŽ [TLS](https://medium.com/p/d6f425ceea13#891a) çš„éƒ¨åˆ†*
> 
> **HTTP ç‰ˆæœ¬:**
> 
> *   ***HTTP 1.0** :*
> 
> **è¯·æ±‚/å“åº”å¦‚ä½•å·¥ä½œ:*
> -è¯·æ±‚: **GET /index.html.
> -** å“åº”
> -è¿žæŽ¥å…³é—­ã€‚*
> 
> *= >æ¯æ¬¡è¯·æ±‚/å“åº”åŽï¼Œæˆ‘ä»¬éƒ½ä¼šå…³é—­è¿žæŽ¥ã€‚
> ä½†æ˜¯æƒ³è±¡ä¸€ä¸‹åœ¨å‰é¢æ­¥éª¤ä¸­å‘é€çš„**index.html**é¡µé¢ä¸­æœ‰ä¸€ä¸ªå›¾åƒã€‚ä½ å†åšä¸€ä¸ªè¯·æ±‚æ¥å¾—åˆ°å®ƒ: **GET /image1.jpg** = >è®°ä½ **TCP** é»˜è®¤æƒ…å†µä¸‹å¯åŠ¨å¾ˆæ…¢ï¼Œè¿™é‡Œæˆ‘ä»¬æœ‰è¿™ä¹ˆå¤šæ‰“å¼€/å…³é—­ã€‚*
> 
> *   ***HTTP 1.1***
> 
> **å’Œ HTTP 1.0 ç›¸æ¯”æœ‰ä»€ä¹ˆåŒºåˆ«:*
> â€”â€”å®ƒå‘æ˜Žäº† **keep-alive å¤´**ï¼Œè¿™ä¸ªå¤´ä»Ž*å®¢æˆ·ç«¯*å‘é€åˆ°*æœåŠ¡å™¨* = >æˆ‘ä»¬ä¸ä¼šåœ¨æ¯ä¸ªè¯·æ±‚/å“åº”å‘¨æœŸåŽå…³é—­è¿žæŽ¥ï¼Œè€Œæ˜¯ä¿æŒè¿žæŽ¥æ‰“å¼€ã€‚*
> 
> **è¯·æ±‚/å“åº”å¦‚ä½•å·¥ä½œ:*
> -è¯·æ±‚: **GET /index.html
> -** å“åº”
> - **ä¿æŒè¿žæŽ¥æ‰“å¼€
> -** æœ€ç»ˆå®ŒæˆåŽå…³é—­è¿žæŽ¥*
> 
> **HTTP 1.1 ä¸­çš„æ›´å¤šå†…å®¹:*
> -è¿˜å¼•å…¥äº†ç¼“å­˜ã€ [**ç”µå­æ ‡ç­¾**](https://medium.com/p/d6f425ceea13#00b2) **-å¸¦åˆ†å—ä¼ è¾“çš„æµ**:ä¸€æ—¦ *html é¡µé¢*çš„ä¸€éƒ¨åˆ†å‡†å¤‡å¥½ï¼Œå°±å¼€å§‹åˆ†å—å‘é€**é¡µé¢**:ç¬¬ 1 éƒ¨åˆ†ã€ç¬¬ 2 éƒ¨åˆ†ç­‰
> -çŽ°ä»£æµè§ˆå™¨å…è®¸æ¯ä¸ªè¯·æ±‚ 6 ä¸ª TCP è¿žæŽ¥ã€‚ä¸ºä»€ä¹ˆè¿™ä¹ˆå¤šï¼Ÿåœ¨å¯¹é¡µé¢çš„ä¸€ä¸ªè¯·æ±‚ä¸­ï¼Œå®ƒå®žé™…ä¸Šæœ‰è®¸å¤šå…¶ä»–è¯·æ±‚æ¥æ£€ç´¢é¡µé¢çš„æ•°æ®ã€‚çœ‹çœ‹ä¸€ä¸ªç®€å•çš„é¡µé¢åŠ è½½æ˜¯ä»€ä¹ˆæ ·å­çš„:*
> 
> *![](img/8aaaf844b652c5bb0197ee4ae9f2b235.png)*
> 
> *ç¤ºä¾‹ä¸€ä¸ªè¯·æ±‚å¦‚ä½•è§¦å‘é¡µé¢ä¸Šçš„å¤šä¸ªè¯·æ±‚*
> 
> *   ***HTTP 2** (åˆå **SPDY** )*
> 
> ***ä¼˜ç‚¹:***
> 
> *   ***å¤ç”¨:**å¤šä¸ªè¯·æ±‚è¢«æŒ¤å…¥ä¸€ä¸ªé€šé“= >ç»“æžœä¸€ä¸ªè¯·æ±‚(ä½†æ˜¯åœ¨ **TCP** ä¸­ç…§å¸¸æœ‰å¾ˆå¤š**åŒ…**)ã€‚å³ï¼Œæ‚¨å‘å‡º 6 ä¸ª GET è¯·æ±‚æ¥èŽ·å–ä¸åŒçš„èµ„æºã€‚æ¯ä¸ª HTTP **æ•°æ®åŒ…**å°†è¢«æ ‡è®°ä¸º**æµ id** (å› ä¸ºä¸€ä¸ªè¯·æ±‚æœ‰å¤šä¸ª**æ•°æ®åŒ…**)ï¼Œå®ƒå…è®¸*æœåŠ¡å™¨*å°†å“åº”æ˜ å°„å›žç‰¹å®šè¯·æ±‚ã€‚å’Œ*å®¢æˆ·ç«¯*æ¥ç†è§£å“ªä¸ªå“åº”æ˜ å°„åˆ°åˆå§‹è¯·æ±‚ã€‚*
> 
> *![](img/720e13cdbda1690072bb94b84e2b36aa.png)*
> 
> *å¤šè·¯å¤ç”¨ç¤ºä¾‹*
> 
> *   ***åŽ‹ç¼©:**åè®®ç¼“å†²åŒº(åˆåäºŒè¿›åˆ¶æ ¼å¼)å…è®¸è¿™æ ·åšã€‚ç”±äºŽ**æµ id** åœ¨ ***å¤ç”¨*** ä¸­ï¼Œæˆ‘ä»¬ç”šè‡³å¯ä»¥åŽ‹ç¼©**å¤´**(åœ¨ HTTP 1.1 ä¸­æ— æ³•åšåˆ°)*
> *   ***æœåŠ¡å™¨æŽ¨é€**(é»˜è®¤ç¦ç”¨)â€”â€”ä½ ä¸å¿…ç­‰å¾…å“åº”ï¼Œå› ä¸ºæœåŠ¡å™¨ä¼šè¿™ä¹ˆåšã€‚
>     *å®¢æˆ·ç«¯*è¦æ±‚**index.html**:å¾—åˆ° index.htmlã€‚å¦‚æžœ*æœåŠ¡å™¨*é…ç½®æ­£ç¡®ï¼Œå®ƒä¸ä»…å¯ä»¥æŽ¨é€è¯¥æ–‡ä»¶ï¼Œè¿˜å¯ä»¥æŽ¨é€`main.js`ã€ `main.css`ç­‰ã€‚å°½ç®¡å¦‚æ­¤ï¼Œ*å®¢æˆ·ç«¯*å¿…é¡»æ”¯æŒ **HTTP 2** æ¥å®Œæˆè¿™ä¸ªåŠ¨ä½œã€‚*
> *   *é»˜è®¤å®‰å…¨: **HTTPS***
> *   *åœ¨ [**TLS**](https://medium.com/p/d6f425ceea13#891a) æœŸé—´çš„åè®®åå•†ç”±äºŽä¸€äº›è€æœåŠ¡å™¨ä¸æ”¯æŒ**HTTP 2.0**(NPN/ALPN)
>     â€”â€”è¿™ä¸ªä¸œè¥¿å…è®¸*æœåŠ¡å™¨*åœ¨ [**TLS æ¡æ‰‹**](https://medium.com/p/d6f425ceea13#891a) = >æœŸé—´å‘Šè¯‰*å®¢æˆ·ç«¯*å®ƒæ”¯æŒ **HTTP 2** ä¸éœ€è¦å¦å¤–è¯·æ±‚å‡çº§åˆ° **HTTP 2***
> 
> ***ç¼ºç‚¹:***
> 
> *   **æœåŠ¡å™¨*æŽ¨é€å¯èƒ½è¢«æ»¥ç”¨:å¦‚æžœ*å®¢æˆ·ç«¯*ä¸éœ€è¦é¢å¤–æ•°æ®ï¼Œå¹¶ä¸”*æœåŠ¡å™¨*é…ç½®ä¸æ­£ç¡®= >é¢å¤–å¸¦å®½*
> *   *åœ¨æ··åˆæ¨¡å¼ä¸‹å¯èƒ½ä¼šæ…¢ä¸€äº›(åŽç«¯æ˜¯ **HTTP 2** ï¼Œä½†è´Ÿè½½å¹³è¡¡å™¨æ˜¯ **HTTP 1** ï¼Œåä¹‹äº¦ç„¶)ã€‚å¿«é€Ÿè§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨*ç¬¬ 4 å±‚ HTTP ä»£ç†**
> 
> *å“‡ï¼Œç”šè‡³ HTTP 3 ä¹Ÿå­˜åœ¨ï¼Œè€Œä¸”å®ƒå®žé™…ä¸Šæ˜¯é€šè¿‡ UDPï¼Œè€Œä¸æ˜¯ TCPã€‚æ˜¯å•Šï¼Œå¤ªç–¯ç‹‚äº†ã€‚å°±å‡ ä¸ªè¯ã€‚*
> 
> *   ***HTTP 3(åˆå HTTP 2 over QUIC):**
>     -ç”¨ QUIC(å¸¦æ‹¥å¡žæŽ§åˆ¶çš„ UDP)æ›¿æ¢ TCP
>     -æ‰€æœ‰ HTTP 2 ç‰¹æ€§*
> 
> ## *2.HTTP ä¸­çš„ POST ä¸Ž GET è¯·æ±‚*
> 
> *è§†é¢‘:[https://www.youtube.com/watch?v=K8HJ6DN23zI](https://www.youtube.com/watch?v=K8HJ6DN23zI)*
> 
> *å¦‚æžœä½ å¯¹ HTTP åŠ¨è¯ä¸€æ— æ‰€çŸ¥ï¼Œé‚£å°±åŽ»çœ‹çœ‹ MDN:[https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods)*
> 
> *çŽ°åœ¨ï¼Œå¦‚æžœæ‚¨æƒ³æ€»ç»“ GET å’Œ POST ä¹‹é—´çš„åŒºåˆ«:*
> 
> *![](img/12fc286e44733c753d8f46a94595634a.png)*
> 
> *POST ä¸Ž GET è¯·æ±‚*
> 
> # *6.ä½¿ç”¨ç”µå­æ ‡ç­¾çš„ HTTP ç¼“å­˜*
> 
> *è§†é¢‘:[https://www.youtube.com/watch?v=TgZnpp5wJWU](https://www.youtube.com/watch?v=TgZnpp5wJWU)*
> 
> ***ç”µå­æ ‡ç­¾** â€”éªŒè¯ç½‘ç»œç¼“å­˜ä»¥æé«˜æ€§èƒ½çš„æœºåˆ¶ã€‚*
> 
> *å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ðŸ§:*
> 
> 1.  **å®¢æˆ·ç«¯*å‘å‡ºè¯·æ±‚:**èŽ·å–/ç”¨æˆ·/é²å‹ƒ***
> 2.  *[*ç½‘ç»œæœåŠ¡å™¨*](https://medium.com/p/d6f425ceea13#f42d) åœ¨**ç”µå­æ ‡ç­¾**å‡ºçŽ°çš„åœ°æ–¹ç”¨ JSON å“åº”*
> 
> *   ***ç”µå­æ ‡ç­¾**:â€œ10c 32â€“434g-cregâ€(åªæ˜¯ä¸€ä¸ªä¾‹å­)*
> *   **å®¢æˆ·ç«¯*è´£ä»»(æ— è®ºæ˜¯æˆ‘ä»¬ç¼–å†™çš„**æµè§ˆå™¨**è¿˜æ˜¯ **HTTP** å®¢æˆ·ç«¯)æ¥åšæŒå®ƒ*
> 
> *3.ä¸‹æ¬¡æˆ‘ä»¬è¯·æ±‚ç›¸åŒçš„*ç«¯ç‚¹*æ—¶ï¼Œæ·»åŠ **å¤´****ã€If-None-Match:" 10c 32â€“434g-creg "ã€‘
> -ç¤ºä¾‹:GET /user/bob** +å¤´**ã€If-None-Match:" 10 vfv-34cd-23f "ã€‘***
> 
> *4.å¦‚æžœæ–‡ä»¶æœªæ›´æ”¹ï¼ŒæœåŠ¡å™¨å°†ä»¥å“åº”ä»£ç : **304 æœªä¿®æ”¹**è¿›è¡Œå“åº”*
> 
> ***ä¼˜ç‚¹:***
> 
> *   *å¿«é€Ÿå“åº”*
> *   *æ›´å°‘çš„å¸¦å®½*
> *   *æ•°æ®åº“çš„ä¸€è‡´æ€§:å¦‚æžœå¤šä¸ªäº‹åŠ¡ä¸ä¿®æ”¹åŒä¸€ä¸ªèµ„æºï¼Œå¯ä»¥å¹¶è¡Œæ‰§è¡Œ*
> 
> ***ç¼ºç‚¹:***
> 
> *   ***ç”µå­æ ‡ç­¾**ç”±æ¯å°æœåŠ¡å™¨ç”Ÿæˆï¼Œå› æ­¤ï¼Œå¦‚æžœæ‚¨æœ‰:*
> 
> ```
> *client â€” load balancer
>           /          \
>       server 1      server 2*
> ```
> 
> *=> *å®¢æˆ·ç«¯*ä»Ž ***æœåŠ¡å™¨ 1*** èŽ·å–**ç”µå­æ ‡ç­¾**ã€‚ç”±äºŽ*è´Ÿè½½å¹³è¡¡å™¨*ï¼Œå…·æœ‰ç›¸åŒ**ç«¯ç‚¹**å’Œå…·æœ‰ **If-None-Match** çš„ä¸‹ä¸€ä¸ªè¯·æ±‚å°†è¢«é‡å®šå‘åˆ°å¦ä¸€ä¸ª*æœåŠ¡å™¨*ã€‚è€Œ**æœåŠ¡å™¨ 2** æ²¡æœ‰è¿™ä¸ª**ç”µå­æ ‡ç­¾** = >å®ƒä¼šè‡ªå·±ç”Ÿæˆã€‚
> é€šè¿‡å°†æœåŠ¡å™¨é…ç½®ä¸ºè·¨æœåŠ¡å™¨å…·æœ‰ç›¸ä¼¼çš„ç”µå­æ ‡ç­¾ï¼Œè¿™æ˜¯å¯ä»¥è§£å†³çš„*
> 
> *   ***ç”µå­æ ‡ç­¾**å…è®¸*æœåŠ¡å™¨*é€šè¿‡æ€»æ˜¯å‘é€æœªä¿®æ”¹çš„**304**æ¥è·Ÿè¸ª*å®¢æˆ·ç«¯*ï¼Œå› ä¸º**ç”µå­æ ‡ç­¾**å­˜åœ¨äºŽæµè§ˆå™¨ä¸­*
> 
> # *7.å¦å…‹æ¿€å…‰çž„å‡†é•œï¼ˆTank Laser-Sight çš„ç¼©å†™ï¼‰ðŸ”‘*
> 
> *è§†é¢‘ 1:**[**https://www.youtube.com/watch?v=Z3FwixsBE94**](https://www.youtube.com/watch?v=Z3FwixsBE94)***
> 
> ***è§†é¢‘äºŒ:[https://www.youtube.com/watch?v=AlE5X1NlHgg](https://www.youtube.com/watch?v=AlE5X1NlHgg)***
> 
> ***è§†é¢‘ä¸‰:[**https://www.youtube.com/watch?v=ntytZy3i-Jo**](https://www.youtube.com/watch?v=ntytZy3i-Jo)***
> 
> ***æ›´å¤šå¯ä¾›é˜…è¯»çš„èµ„æº:***
> 
> *   ***ç”²éª¨æ–‡ç½‘ç«™:[https://docs . Oracle . com/CD/e 19509-01/820-3503/gg bgc/index . html](https://docs.oracle.com/cd/E19509-01/820-3503/ggbgc/index.html)***
> 
> ## ***å¯¹ç§°ä¸Žéžå¯¹ç§°åŠ å¯†***
> 
> ***è¯´ç™½äº†ï¼Œå¦‚æžœæˆ‘ä»¬ä½¿ç”¨å¯¹ç§°åŠ å¯†ï¼Œé‚£ä¹ˆå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å°†ä½¿ç”¨ç›¸åŒçš„å¯†é’¥â†’ä¸å®‰å…¨ï¼Œå› ä¸ºæœ‰äººå¯ä»¥æ‹¦æˆªå¯†é’¥ã€‚***
> 
> ***ç„¶è€Œï¼Œåœ¨éžå¯¹ç§°åŠ å¯†ä¸­:å…¬é’¥ç”¨äºŽåŠ å¯†æ¶ˆæ¯ï¼Œç§é’¥ç”¨äºŽè§£å¯†æ¶ˆæ¯ã€‚***
> 
> ***åœ¨ TLS ä¸­ï¼Œæˆ‘ä»¬ä¸¤è€…éƒ½æœ‰ã€‚é˜…è¯»ä¸‹é¢çš„[**ã€SNIã€‘**](https://medium.com/u/d53dd768d047#f252)ä»ç„¶æ˜¯ ISP å±è”½ä½ çš„æœ‰æ•ˆé€”å¾„= > [**ESNI**](https://medium.com/p/d6f425ceea13#f252) æ˜¯ä¸€æ¡è·¯è¦èµ°***
> 
> # ***8.**è¯ä¹¦å’Œè¯ä¹¦é¢å‘æœºæž„**ðŸ“***
> 
> ***è§†é¢‘ 1:[**https://www.youtube.com/watch?v=x_I6Qc35PuQ**](https://www.youtube.com/watch?v=x_I6Qc35PuQ)***
> 
> ***è§†é¢‘äºŒ:[**https://www.youtube.com/watch?v=r1nJT63BFQ0**](https://www.youtube.com/watch?v=r1nJT63BFQ0)***
> 
> ***å½“*å®¢æˆ·ç«¯ hello* ä»Ž*å®¢æˆ·ç«¯*åˆ°*æœåŠ¡å™¨*æ—¶ï¼Œå¯ä»¥è¢«æ‹¦æˆªã€‚è¿™å°±æ˜¯ä¼—æ‰€å‘¨çŸ¥çš„ä¸­é—´äººæ”»å‡»ï¼Œä¹Ÿå°±æ˜¯ MITMã€‚å®ƒå‘ç”Ÿåœ¨ OSI æ¨¡åž‹çš„ç¬¬ 4 å±‚ã€‚***
> 
> ***![](img/b8dac0b8a98e322cd414951810bb94cc.png)***
> 
> ***MITM çš„ä¾‹å­***
> 
> ***ç„¶åŽï¼Œåæ´¾ç”¨è°·æ­Œçš„ **IP åœ°å€**æ¥å›žåº”(ä»£è¡¨è°·æ­Œ)ã€‚çŽ°åœ¨ï¼Œè¿™ä¸ªå“åº”åˆå¤šäº†ä¸€ä¸ª **TLS params** (ç”¨æ¥å†’å…… Google)ã€‚
> ***è€Œä¸”ï¼Œ*** åæ´¾ä¼šæœ‰åŒé¢äº¤é™…:***
> 
> *   ***ä½¿ç”¨è°·æ­Œ(ä½¿ç”¨é”®)***
> *   ***ä½¿ç”¨*å®¢æˆ·ç«¯*(ä½¿ç”¨å¦ä¸€ä¸ªé”®)***
> 
> ***= >æ‰€ä»¥ï¼Œå®ƒå……å½“äº†éšå½¢ä»£ç†***
> 
> ***æˆ‘ä»¬éœ€è¦ä¸€äº›ç¬¬ä¸‰æ–¹æ¥éªŒè¯æœåŠ¡å™¨æ˜¯åˆæ³•çš„ã€‚å®ƒè¢«ç§°ä¸º**è®¤è¯æœºæž„ï¼Œåˆå CAã€‚*****
> 
> ***å³è°·æ­Œï¼Œè¦å¯åŠ¨*æœåŠ¡å™¨*ï¼Œéœ€è¦æŸç§**è¯ä¹¦**ã€‚***
> 
> 1.  ***å®ƒè¯´:â€œè¿™æ˜¯æˆ‘çš„*å…¬é’¥*å’Œæˆ‘çš„ä¿¡æ¯ã€‚ç»™æˆ‘ä¸€ä¸ª**è¯ä¹¦**ã€‚â€***
> 2.  *****CA** èŽ·å–è¿™äº›ä¿¡æ¯ï¼Œç”¨å®ƒçš„*ç§é’¥*åŠ å¯†(ä¹Ÿå°±æ˜¯ç­¾å)å¹¶åé¦ˆç»™ Google ( *æœåŠ¡å™¨*)***
> 3.  *****ç”¨æœåŠ¡å™¨çš„*å…¬é’¥*ç­¾ç½²è¯ä¹¦**ã€‚***
> 
> ***ç»§ç»­ä¹‹å‰ï¼Œè¯·é˜…è¯»ä¸Šé¢å…³äºŽ [**TLS**](https://medium.com/p/d6f425ceea13#891a) çš„ç« èŠ‚***
> 
> ***![](img/af3da056042ecf9ef5cbef674248c418.png)***
> 
> *****CA** è¯ä¹¦ç¤ºä¾‹***
> 
> ***1.*å®¢æˆ·ç«¯*æŽ¥æ”¶åˆ°*æœåŠ¡å™¨ hello* å¸¦**è¯ä¹¦**çš„*å…¬é’¥*åŽï¼Œéœ€è¦éªŒè¯ã€‚
> 2ã€‚å®ƒéœ€è¦æœåŠ¡å™¨
> 3 çš„*å…¬é’¥*ã€‚æŸ¥çœ‹*è¯ä¹¦*ä¸­çš„ **CA** ï¼Œè½¬åˆ° CAã€CA è¯ä¹¦ã€‘4 çš„**è¯ä¹¦**ã€‚ä½¿ç”¨ **CA** çš„*å…¬é’¥*ï¼ŒåŠ å¯†*æœåŠ¡å™¨*çš„*å…¬é’¥*:***
> 
> *   ***æŸ¥çœ‹å®ƒæ˜¯å¦ä¸Žåˆå§‹çš„*æœåŠ¡å™¨è¯ä¹¦*åŒ¹é…***
> *   ***å¦ä¸€ç§æ–¹æ³•:å– **CA** çš„*å…¬é’¥*ï¼Œè§£å¯†æœåŠ¡å™¨çš„è¯ä¹¦ï¼Œçœ‹æœåŠ¡å™¨çš„*å…¬é’¥*æ˜¯å¦ä¸Ž*æœåŠ¡å™¨*ç»™å‡ºçš„ç›¸åŒ¹é…***
> *   ***ä¸Ž**æ ¹è¯ä¹¦**çš„è¿‡ç¨‹ç›¸åŒï¼Œæ ¹è¯ä¹¦åœ¨ **CA è¯ä¹¦**ä¹‹åŽã€‚å®žé™…ä¸Šï¼Œ**æ ¹è¯ä¹¦**å®‰è£…åœ¨æˆ‘ä»¬çš„æœºå™¨ä¸Šã€‚***
> 
> ***ä¸ºä»€ä¹ˆä¸Šé¢æœ‰ **CA** çš„è¿‡ç¨‹ç”šè‡³æ˜¯åˆæ ¼çš„:æ²¡æœ‰äººèƒ½ä¼ªé€ ç­¾åï¼Œå› ä¸ºæ²¡æœ‰äººæœ‰ **CA** çš„*ç§é’¥*ã€‚***
> 
> # ***9.ðŸ—***
> 
> *****SNI** â€”æœåŠ¡å™¨åç§°æŒ‡ç¤º***
> 
> ***è§†é¢‘ 1:[**https://www.youtube.com/watch?v=t0zlO5-NWFU**](https://www.youtube.com/watch?v=t0zlO5-NWFU)***
> 
> ***è§†é¢‘äºŒ:[**https://www.youtube.com/watch?v=manTiXESYG0**](https://www.youtube.com/watch?v=manTiXESYG0)***
> 
> *****SNI** æ˜¯ä¸€ä¸ª **TLS æ‰©å±•**ï¼Œå®ƒå…è®¸*å®¢æˆ·ç«¯*åœ¨ **TLS æ¡æ‰‹** = >æœŸé—´æŒ‡å®šå®ƒæƒ³è¦è¿žæŽ¥å“ªä¸ª*ä¸»æœº*å¤šä¸ªç½‘ç«™/åŸŸè¢«æ‰˜ç®¡åœ¨å•ä¸ª*å…¬å…±* **IP åœ°å€**ä¸­ã€‚[å›žå¿†å…³äºŽå…¬å…±/ç§æœ‰ IP åœ°å€çš„ç« èŠ‚](https://medium.com/p/d6f425ceea13#acb4)ã€‚***
> 
> ****ä¸ºä»€ä¹ˆæ˜¯ SNI:****
> 
> *   *****å…¬å…± IP** æ˜‚è´µ:å¤šä¸ªç½‘ç«™åˆå¹¶æˆä¸€ä¸ª*å…¬å…± IP åœ°å€*:
>     â€”â€”ä½¿ **TCP** ä¸Ž*æœåŠ¡å™¨*çš„*å…¬å…± IP åœ°å€*è¿žæŽ¥***
> *   ********HTTP 1.1**ä¸­çš„*** ä¸»æœºå¤´è¢«å¼•å…¥ï¼ŒçŽ°åœ¨ä½ å¯ä»¥æŒ‡å®šä½ æƒ³è¦è¿žæŽ¥çš„ä¸»æœºã€‚è¿™æ˜¯ä¸€ä¸ªæ™®é€šçš„æ ‡é¢˜ã€‚***
> 
> ***= >ä¸å®‰å…¨ã€‚æˆ‘ä»¬éœ€è¦ HTTPSã€‚ä½†æ˜¯åœ¨ **TLS** æœŸé—´æˆ‘ä»¬æ²¡æœ‰ä»»ä½•ä¿¡æ¯ã€‚***
> 
> ***æµç¨‹:***
> 
> 1.  *****ä¸‹é¢æœªåŠ å¯†**åˆåæ™®é€š HTTP:
>     -é¦–å…ˆæˆ‘ä»¬å‘é€è¯·æ±‚ï¼Œå³**GET/a.com
>     -**åœ¨ **DNS** ä¸­æˆ‘ä»¬æ‰¾åˆ°æœåŠ¡å™¨çš„*IP*+æˆ‘ä»¬ä¹Ÿå‘é€*å¤´:{HOST â€” site domain}* ã€‚
>     -ç„¶åŽæˆ‘ä»¬å»ºç«‹ **TCP** ã€‚æˆ‘ä»¬è·¯ç”±åˆ°*æœåŠ¡å™¨*ã€‚
>     -æƒ³è±¡ä¸€ä¸ª *IP åœ°å€*æœ‰å¤šä¸ªåŸŸ:1.2.3.4/a.com; 1.2.3.4/b.com.ï¼Œå› æ­¤*æŠ¥å¤´*å°†å¯¼èˆªæˆ‘ä»¬åˆ°å•ä¸ªå…¬å…± *IP åœ°å€*ä¸­çš„æœŸæœ›åŸŸã€‚***
> 2.  *****åŠ å¯†**åˆå HTTPS:
>     -å»ºç«‹ TLS(çœ‹ä¸Šé¢è¿™ä¸ª)
>     - **ä½†æ˜¯:**ä¸æ˜¯ç®€å•çš„*å®¢æˆ·ç«¯ä½ å¥½*ï¼Œè€Œæ˜¯*å®¢æˆ·ç«¯ä½ å¥½* +é‚£ä¸ª*å…¬å…± IP åœ°å€*å†…çš„ç‰¹å®šç½‘ç«™ã€‚å³ TLS + SNI(a.com)
>     - *æœåŠ¡å™¨*å°†ä»Ž **SNI** å‘å›ž*a.com*çš„**è¯ä¹¦**ã€‚å¦‚æžœæˆ‘ä»¬æŒ‡å®š b.comâ†’b.com*çš„è¯ä¹¦*ã€‚[**TLS 1.3**](https://medium.com/@SleeplessChallenger/d6f425ceea13#891a)**ä¸œè¥¿ç…§å¸¸ï¼Œä½†æ˜¯æœ‰äº†é‚£ä¸ªç‰¹åˆ«çš„*æœåŠ¡å™¨*ã€‚
>     - *å®¢æˆ·ç«¯*é™¤äº† SNI ä¼šå‘Šè¯‰å“ªä¸ª**åŠ å¯†**å®ƒä¸æ”¯æŒ*****
> 
> *****![](img/982443289201e251a68070a2c1bbff8b.png)*****
> 
> *****HTTP/HTTPS è¿›ç¨‹ä¸­çš„ SNI*****
> 
> *******SNI é—®é¢˜:*******
> 
> *   *******SNI** ä»¥æ˜Žæ–‡å‘é€ä¸»æœºå*****
> *   *****æ²¡æœ‰éšç§(å¤§å®¶å¯ä»¥çœ‹çœ‹*å®¢æˆ·ç«¯æ‚¨å¥½*)*****
> 
> *****é‡è§ **ESNI:*******
> 
> *   *****åŠ å¯†*å®¢æˆ·ç«¯ä½ å¥½******
> *   *****ä»Ž **DNS** æŽ¥æ”¶*æœåŠ¡å™¨*çš„*å…¬é’¥*ã€‚*å®¢æˆ·ç«¯ä½ å¥½*ç”¨å®ƒåŠ å¯†*****
> *   *******ESNI** å¿…é¡»é€šè¿‡ **DoH/DoT** å®Œæˆï¼Œå› ä¸ºå¯¹ **DNS** çš„è¯·æ±‚æ˜¯æœªåŠ å¯†çš„â€”â€”UDP*****
> 
> # *****10.Web æœåŠ¡å™¨å’Œåº”ç”¨ç¨‹åºçš„çŠ¶æ€*****
> 
> ## *****1.ç½‘ç»œæœåŠ¡å™¨ðŸ—ƒ*****
> 
> *****è§†é¢‘:[**https://www.youtube.com/watch?v=JhpUch6lWMw**](https://www.youtube.com/watch?v=JhpUch6lWMw)*****
> 
> *****ä»€ä¹ˆæ˜¯*ç½‘ç»œæœåŠ¡å™¨*:*****
> 
> *   *****æä¾›ç½‘é¡µå†…å®¹çš„è½¯ä»¶:html é¡µé¢ã€å›¾åƒã€éŸ³é¢‘ã€è§†é¢‘ç­‰ã€‚ç”±çŸ¥é“å¦‚ä½•å¤„ç†ç‰¹å®šå†…å®¹çš„*å®¢æˆ·ç«¯*ä½¿ç”¨*****
> *   *****ä½¿ç”¨ HTTP åè®®â€” **ç¬¬ 7 å±‚*******
> *   *****æœ‰ 2 ç§ç±»åž‹çš„å†…å®¹:
>     - *é™æ€å†…å®¹* : htmlã€js ä»£ç ã€pdfã€css
>     - *åŠ¨æ€å†…å®¹*:åšå®¢å¸–å­â€”æŸ¥è¯¢åˆ°æ¯ä¸ªäººéƒ½æœ‰ä¸åŒå†…å®¹çš„æ•°æ®åº“ã€‚å†…å®¹å–å†³äºŽå¾ˆå¤šå› ç´ :åœ°ç‚¹ã€ç”¨æˆ·ç­‰*****
> *   *****ç”¨äºŽæ‰˜ç®¡ç½‘é¡µã€åšå®¢ã€æž„å»º API*****
> 
> ******ç½‘ç»œæœåŠ¡å™¨å¦‚ä½•å·¥ä½œ:******
> 
> *****![](img/3901f788243a0e76fe4e5c2d4b251ef5.png)*****
> 
> *****å®¢æˆ·ç«¯-æœåŠ¡å™¨é€šä¿¡*****
> 
> *   ******å®¢æˆ·ç«¯*ï¼Œä¾‹å¦‚åœ¨*å…¬å…± IP*44.1.1.1 ä¸Šï¼Œå‘å‡ºè¯·æ±‚: **GET /index.html** ã€‚*****
> *   ******æœåŠ¡å™¨*ï¼Œä¾‹å¦‚å…·æœ‰åŸŸå’Œç«¯å£ example.com:80ï¼Œä½¿ç”¨ *html é¡µé¢*å’Œ*æ ‡é¢˜*åšå‡ºå“åº”*****
> *   *****ç”±äºŽ **TCP** ï¼Œ*æœåŠ¡å™¨*åœ¨å†…å­˜ä¸­ä¸ºè¿™ä¸ª*è¿žæŽ¥/å®¢æˆ·ç«¯* : **TCP å¥—æŽ¥å­—**ä¿ç•™ä½ç½®*****
> *   *****å¦‚æžœå¦ä¸€ä¸ª*å®¢æˆ·ç«¯*å‘å‡ºè¯·æ±‚:ä¸ºè¿™ä¸ª*å®¢æˆ·ç«¯*å»ºç«‹æ–°çš„ **TCP è¿žæŽ¥**(çŽ°åœ¨æœ‰ 2 ä¸ªè¿žæŽ¥)å¹¶ä¸”*æœåŠ¡å™¨*ä¸ºè¿™ä¸ªç¬¬äºŒä¸ª*å®¢æˆ·ç«¯*ä¿ç•™ç¬¬äºŒä¸ª **TCP å¥—æŽ¥å­—**ã€‚*****
> *   *****åœ¨é˜»å¡žå•çº¿ç¨‹*æœåŠ¡å™¨*æ—¶ï¼Œå®ƒä¸€æ¬¡åªå¤„ç†ä¸€ä¸ª TCP å¥—æŽ¥å­—*****
> 
> ## *****2.æœ‰çŠ¶æ€ä¸Žæ— çŠ¶æ€åº”ç”¨ç¨‹åº*****
> 
> *****è§†é¢‘:[**https://www.youtube.com/watch?v=nFPzI_Qg3FU&æ¦œå•=WL &æŒ‡æ•°=16**](https://www.youtube.com/watch?v=nFPzI_Qg3FU&list=WL&index=16)*****
> 
> *****æœ‰çŠ¶æ€:*****
> 
> *****![](img/1c0f0d05dd9e912281835545056ed74f.png)*****
> 
> *****æœ‰çŠ¶æ€åº”ç”¨ç¨‹åº*****
> 
> 1.  ******å®¢æˆ·ç«¯*å‘é€ç™»å½•è¯·æ±‚*****
> 2.  ******æœåŠ¡å™¨*åœ¨æ•°æ®åº“çš„å¸®åŠ©ä¸‹è®¤è¯ç”¨æˆ·ï¼Œå¹¶ä¸ºè¯¥ç”¨æˆ·äº¤æ¢æ ‡å¿—*****
> 3.  *****ä½†æ˜¯ï¼Œå¦‚æžœæˆ‘ä»¬æœ‰ **LB** å¹¶ä¸”ç”¨æˆ·çš„ä¸‹ä¸€ä¸ªè°ƒç”¨ï¼Œå³æŸ¥çœ‹ä»–çš„ç®€æ¡£ï¼Œå°†è¢«é‡å®šå‘åˆ°ç¬¬äºŒä¸ªæœåŠ¡å™¨ï¼Œè¯¥æ€Žä¹ˆåŠžå‘¢ï¼Ÿ= > **å¤±è´¥*******
> 
> *****= >æ‰€ä»¥ï¼Œå½“æˆ‘ä»¬æœ‰ä¸€å°æœºå™¨æ—¶ï¼Œ**æœ‰çŠ¶æ€çš„**æ˜¯æ²¡é—®é¢˜çš„ã€‚å®ƒèŠ‚çœäº†ä¸€äº›å¯¹æ•°æ®åº“çš„è°ƒç”¨ï¼Œå› ä¸ºä½ ä¸éœ€è¦è¿›è¡Œé¢å¤–çš„è°ƒç”¨ï¼Œåªéœ€è¦åœ¨æœåŠ¡å™¨ç«¯ä¿å­˜ä¸€äº›æ•°æ®ã€‚ä½†æ˜¯ä½ ä¸èƒ½æ‰©å±•*****
> 
> *****æ— çŠ¶æ€:*****
> 
> *****![](img/7073c33cc17b2206c3fa23bd23b452e1.png)*****
> 
> *****æ— çŠ¶æ€åº”ç”¨ç¨‹åº*****
> 
> 1.  ******å®¢æˆ·ç«¯*å‘é€ç™»å½•è¯·æ±‚*****
> 2.  *******LB** è®¤è¯å¹¶ä½¿ç”¨**ä»¤ç‰Œ**å“åº”ç”¨æˆ·*****
> 3.  *****ä¸‹æ¬¡*å®¢æˆ·ç«¯*å°†å‘å‡ºè¯·æ±‚æ—¶ï¼Œä»–éœ€è¦å°†**ä»¤ç‰Œ**æ·»åŠ åˆ°è°ƒç”¨ä¸­*****
> 4.  *******LB** â†’ **æœåŠ¡å™¨**ï¼Œå…¶ä¸­*æœåŠ¡å™¨*æŸ¥è¯¢æ•°æ®åº“ä»¥æ£€æŸ¥**ä»¤ç‰Œ**æ˜¯å¦æœ‰æ•ˆ
>     â€”â€”ä¸€èˆ¬æ¥è¯´ï¼Œ**ä»¤ç‰Œ**æœ‰åˆ°æœŸæ—¥æœŸï¼Œè€Œ*å®¢æˆ·ç«¯*å¿…é¡»èŽ·å–æ–°çš„
>     - **æ— çŠ¶æ€**â€”â€”åœ¨åŽç«¯æ¯”**æœ‰çŠ¶æ€**æ…¢ï¼Œä½†**æ›´å…·å¯ä¼¸ç¼©æ€§ã€‚ä¾‹å¦‚ä¼‘æ¯å°±æ˜¯ä¸€ä¸ªä¾‹å­*******
> 
> # *****11.å…‹-å¥¥äºŒæ°åˆ†çº§é‡è¡¨*****
> 
> *****è§†é¢‘:[**https://www.youtube.com/watch?v=Ka8vG5miErk&æ¦œå•=WL &æŒ‡æ•°=15**](https://www.youtube.com/watch?v=Ka8vG5miErk&list=WL&index=15)*****
> 
> *****é»˜è®¤æƒ…å†µä¸‹ï¼ŒCORS æ˜¯å…³é—­çš„ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ CORS æ˜¯å¦å¼€å¯*****
> 
> *****å»¶ä¼¸é˜…è¯»:*****
> 
> *   *****[**https://developer . Mozilla . org/en-US/docs/Glossary/Preflight _ request**](https://developer.mozilla.org/en-US/docs/Glossary/Preflight_request)*****
> *   *****[**https://stackoverflow.com/a/29954326/16543524**](https://stackoverflow.com/a/29954326/16543524)*****
> *   *****[https://stackoverflow.com/a/35850184/16543524**T4**](https://stackoverflow.com/a/35850184/16543524)*****
> 
> *******CORS** â€”è·¨äº§åœ°èµ„æºå…±äº«ã€‚*****
> 
> *******CORS** â€”æä¾›é…ç½®ä»¥é…ç½®å¯¹å…±äº«èµ„æºçš„è®¿é—®çš„æœºåˆ¶ã€‚ **CORS** é€‚ç”¨äºŽå½“*ç½‘é¡µ*å‘å¦ä¸€ä¸ª*æœåŠ¡å™¨*è€Œä¸æ˜¯å…¶*æºæœåŠ¡å™¨*å‘å‡ºè¯·æ±‚æ—¶ï¼Œè¿™å¯èƒ½æ„å‘³ç€**åŸŸ**ã€**åè®®**æˆ–**ç«¯å£**ä¸åŒã€‚*****
> 
> 1.  *****é™¤éžæ‚¨è®¾ç½®äº†å¤´:**â€œè®¿é—®-æŽ§åˆ¶-å…è®¸-æ¥æºâ€**ï¼Œå¦åˆ™å°†ç¦æ­¢è®¿é—®å…¶ä»–ç«™ç‚¹èµ„æºã€‚è¿™æ„å‘³ç€è¯·æ±‚æ–¹å¯ä»¥è®¿é—®è¢«è¯·æ±‚æ–¹ã€‚*****
> 
> *****å¦‚æžœä¸æŒ‡å®šï¼Œå°†å‡ºçŽ°é”™è¯¯:*****
> 
> *****![](img/6d3e97669d4f5a68847bebc07906ec5d.png)*****
> 
> *****å¦‚æžœæ²¡æœ‰æ ‡é¢˜ï¼Œåˆ™å‡ºçŽ°é”™è¯¯*****
> 
> *****2.å¦‚æžœå‘çŽ°ç±»ä¼¼äºŽ**" Access-Control-Allow-Origin "**çš„é”™è¯¯ï¼Œå¹¶ä¸”æ²¡æœ‰å½“å‰åŸŸï¼Œè¿™ä½¿å¾—è¯·æ±‚è¢«æŒ‡å®šï¼Œé‚£ä¹ˆæ‚¨éœ€è¦æˆ–è€…å†™å®ƒæˆ–è€…ç”šè‡³åœ¨å¤´å€¼ä¸­ä½¿ç”¨ **"*"** æ¥å…è®¸æ¯ä¸ªäººã€‚*****
> 
> *****![](img/b6fa2577da38b921cf852b0819030c61.png)*****
> 
> *****ä¸º**è®¿é—®æŽ§åˆ¶å…è®¸æ¥æº**æŒ‡å®šåŸŸ*****
> 
> *****3.å¦‚æžœä½ å‘é€ä¸€äº›*å¤æ‚çš„è¯·æ±‚*(æœ‰ç®€å•è¯·æ±‚çš„åˆ—è¡¨)ï¼Œé‚£ä¹ˆæµè§ˆå™¨é¦–å…ˆä¼šå‘å‡ºæ‰€è°“çš„ ***é¢„æ£€è¯·æ±‚*** â€” **CORS** è¯·æ±‚ï¼Œçœ‹çœ‹è¯¥è¯·æ±‚æ˜¯å¦åˆæ ¼ã€‚åœ¨æˆ‘ä»¬çš„ç®€å•ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åšå¦‚ä¸‹çš„äº‹æƒ…(å¦‚æžœéœ€è¦çš„è¯ï¼Œä½ éœ€è¦**Access-Control-Allow-Origin**å’Œå…¶ä»–å¤´):*****
> 
> *****![](img/de9d726321d269348e75e0f6a1f51549.png)*****
> 
> *****é€‰é¡¹è¯·æ±‚*****
> 
> *****ç®€å•çš„è¯·æ±‚:*****
> 
> *****[](https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS#simple_requests) [## è·¨æ¥æºèµ„æºå…±äº«(CORS) - HTTP | MDN
> 
> ### è·¨æºèµ„æºå…±äº«(CORS)æ˜¯ä¸€ç§åŸºäºŽ HTTP å¤´çš„æœºåˆ¶ï¼Œå…è®¸æœåŠ¡å™¨æŒ‡ç¤ºä»»ä½•æºâ€¦
> 
> developer.mozilla.org](https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS#simple_requests) 
> 
> # 12.HTTP cookiesðŸª
> 
> è§†é¢‘:[https://www.youtube.com/watch?v=sovAIX4doOET42](https://www.youtube.com/watch?v=sovAIX4doOE)
> 
> å…³äºŽ`samesite`é¥¼å¹²çš„è§†é¢‘:[**https://www.youtube.com/watch?v=aUF2QCEudPo&æ¦œå•=WL &æŒ‡æ•°=18**](https://www.youtube.com/watch?v=aUF2QCEudPo&list=WL&index=18)
> 
> å…³äºŽåƒµå°¸é¥¼å¹²çš„è§†é¢‘:[https://www.youtube.com/watch?v=lq6ZimHh-j4&æ¦œå•=WL &æŒ‡æ•°=17](https://www.youtube.com/watch?v=lq6ZimHh-j4&list=WL&index=17)
> 
> **Cookies** â€”ä½œä¸ºå­˜å‚¨ä»‹è´¨çš„æ•°æ®ç‰‡æ®µï¼Œéšæ¯ä¸ªè¯·æ±‚å‘é€åˆ°æœåŠ¡å™¨ã€‚ç”¨äºŽä¼šè¯ç®¡ç†ã€‚
> 
> 1.  åˆ›å»º cookies:
> 
> åˆ›å»º cookies æœ‰ä¸¤ç§æ–¹æ³•:
> 
> *   æµè§ˆå™¨æŽ§åˆ¶å°ä¸­çš„ Javascript æ–¹å¼:`document.cookie = â€œsomeName=76â€`
> *   Web æœåŠ¡å™¨æ–¹å¼(cookie å¤´):
> 
> 2.Cookie å±žæ€§
> 
> *   cookie èŒƒå›´:
>     1ã€‚åŸŸ:**super.example.com**ä¼šæœ‰ä¸€ä¸ª ***æ¡¶*** å¸¦ cookiesã€‚**example.com**ä¼šæœ‰**å¦ä¸€ä¸ªæ–—ä¼šæœ‰**ã€‚[www.super.example.com](http://www.super.example.com)æ˜¯å¦ä¸€ä¸ªå¸¦æœ‰ cookies
>     - **çš„åŸŸï¼Œä½†æ˜¯:**å¦‚æžœä½ ä½¿`document.cookie = â€œsomeName=76; domain = .example.comâ€`-å°†ä½¿å®ƒå¯¹ ***æ‰€æœ‰å­åŸŸ*** å¯ç”¨ã€‚
>     -ç”±äºŽ HTTP æ˜¯æ— çŠ¶æ€çš„**ï¼Œæ‰€æœ‰çš„ cookies éƒ½å°†ä¸Žæ¯ä¸ªè¯·æ±‚
>     ä¸€èµ·å‘é€*2ã€‚è·¯å¾„:/app1 å°†æœ‰ç‰¹å®šçš„ cookieï¼Œ/app2 å°†æœ‰å¦ä¸€ä¸ª cookie =>éœ€è¦æ›´å°‘çš„å¸¦å®½:`document.cookie = â€œsomeName = 76; **path** = /path1*â€*`***
> *   **`Expires` *ï¼Œ* `Max-age`ã€‚å¦‚æžœä¸æŒ‡å®šè¿™äº›å±žæ€§ï¼Œæµè§ˆå™¨å…³é—­åŽ cookies å°†è¢«é”€æ¯ã€‚å¦‚æžœæ‚¨æŒ‡å®šï¼Œé‚£ä¹ˆ cookie å°±è¢«ç§°ä¸º**æ°¸ä¹… cookie**(æ˜¯çš„ï¼Œå¾ˆå¥‡æ€ªï¼Œä½†æ˜¯ MDN è¿™æ ·ç§°å‘¼å®ƒä»¬)ã€‚ç„¶åŽï¼Œå¦‚æžœä½ **å…³é—­æµè§ˆå™¨**ï¼Œcookies ä»ç„¶å­˜åœ¨:`document.cookie = â€œsomeName = 76; max-age = 3minâ€`**
> *   **`samesite` cookies:
>     - `document.cookie = â€œsomeName=76; samesite=strictâ€`:å¦‚æžœä½ ç‚¹å‡»äº†æŸä¸ªå¯ç–‘ç½‘ç«™çš„é“¾æŽ¥ï¼Œä½ çš„ **cookies** ä¹Ÿä¼šè¢«å‘é€ã€‚ä½†æ˜¯å¦‚æžœæ‚¨æŒ‡å®šäº† **samesite=strict** ï¼Œé‚£ä¹ˆæ‚¨å°†æ°¸è¿œæ— æ³•ä»Žè¯¥ç«™ç‚¹èŽ·å¾— cookies(å®ƒä»¬ä¸ä¼šè¢«å‘é€åˆ°æœåŠ¡å™¨)ï¼Œé™¤éžæ‚¨åœ¨è¯¥ç«™ç‚¹ä¸Šã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æžœä½ ç›´æŽ¥ä»Žæµè§ˆå™¨è®¿é—®é“¾æŽ¥ï¼Œä½ ä¼šå¾—åˆ° cookiesã€‚ä½†æ˜¯å¦‚æžœä½ ç‚¹å‡»äº†æŸä¸ªç½‘ç«™çš„é“¾æŽ¥ï¼Œè¿™ä¸ªé“¾æŽ¥æŒ‡å‘äº†è¿™ä¸ªç½‘ç«™â€”â€”**æ²¡æœ‰ cookiesã€‚** **-** `document.cookie = â€œsomeName=76; samesite=laxâ€` : *è¿™ä¸ª cookie ä¼šå‘*ã€‚ç„¶è€Œï¼Œå³å›¾åƒï¼Œä¸ä¼šå‡ºçŽ°åœ¨ç½‘ç«™ä¸Šï¼Œå› ä¸ºå®ƒæ˜¯åœ¨å¦ä¸€ä¸ªé¢†åŸŸã€‚**
> 
> **![](img/40dc96d9743257c03bb01ad735da8152.png)**
> 
> **ä½¿ç”¨`***samesite=lax***`æ—¶å›¾åƒå°†ä¼šæ˜¯ä»€ä¹ˆæ ·å­**
> 
> **å°½ç®¡å¦‚æ­¤ï¼Œç‚¹å‡»é“¾æŽ¥å°†å¯¼èˆªåˆ°è¿™ä¸ªé¡µé¢ã€‚å› æ­¤ï¼Œæ‚¨ä¸èƒ½ä»Žå…¶ä»–ç«™ç‚¹/åŸŸæ£€ç´¢æ•°æ®ï¼Œä½†æ˜¯æ‚¨å¯ä»¥è®¿é—®å®ƒä»¬å’Œé‚£é‡Œçš„è§‚å¯Ÿè€…æ•°æ®ã€‚`samesite=lax` *==å®Œå…¨æ²¡æœ‰ç›¸åŒçš„åœ°ç‚¹*ã€‚å¦‚æžœ`samesite=none` = >çœŸçš„æ²¡æœ‰ã€‚æ‰€ä»¥ï¼Œä½ åœ¨æŸä¸ªç½‘ç«™ä¸Šï¼Œå›¾åƒè¢«åŠ è½½åˆ°å…¶ä¸­:**
> 
> **![](img/6520ed404d3e0c7781c0439c7c745c76.png)**
> 
> **æ²¡æœ‰ç›¸åŒçš„ç«™ç‚¹ç¤ºä¾‹**
> 
> **3.Cookie ç±»åž‹**
> 
> *   **ä¼šè¯ cookie
>     -æ²¡æœ‰`max-age`ï¼Œ`expires`-æµè§ˆå™¨å…³é—­= >éšç€ä¼šè¯ç»“æŸè€Œé”€æ¯**
> *   **æ°¸ä¹…é¥¼å¹²
>     -æœ‰`expires`ã€`max-age`**
> *   **Httponly åªèƒ½ä»ŽæœåŠ¡å™¨
>     è®¾ç½®-æµè§ˆå™¨ä¸èƒ½è¯»å–å®ƒä»¬(å®‰å…¨é—®é¢˜)
>     -ä¸èƒ½ä»Žæµè§ˆå™¨ç«¯çš„`document.cookie`è®¿é—®**
> 
> **= >å¦‚æžœä½ è¾“å…¥`document.cookie` = >è¿™ä¸ª cookie å°±çœ‹ä¸åˆ°äº†ã€‚ä½ å¯ä»¥åœ¨å¼€å‘è€…å·¥å…·çš„ cookies éƒ¨åˆ†çœ‹åˆ°å®ƒä»¬ï¼Œä½†æ˜¯ **JS æ— æ³•è¯»å–å®ƒä»¬**ã€‚ä»¤ç‰Œã€ä¼šè¯ id å¾ˆé…·**
> 
> *   **å®‰å…¨ cookie:ä»…é€‚ç”¨äºŽ HTTPS ç½‘ç«™ã€‚æ¢å¥è¯è¯´â€”â€”æ™®é€šé¥¼å¹²**
> *   **ç¬¬ä¸‰æ–¹ cookies:ç”¨äºŽè·Ÿè¸ªæœåŠ¡ã€‚ä»–ä»¬æ¥è‡ªå…¶ä»–ç½‘ç«™ï¼Œä½†ååœ¨ä½ çš„é¢†åŸŸ(ä¾‹å¦‚ï¼Œä»Žä¸€äº›æ·»åŠ é¡µé¢)ã€‚ä»–ä»¬ä¸èƒ½è®¿é—®ä½ çš„é¢†åŸŸï¼Œä½†ä»–ä»¬çŸ¥é“ä»–ä»¬åœ¨ä½ çš„é¢†åŸŸ:è·Ÿè¸ªä½ çš„ IPï¼Œç½‘ç«™ã€‚é€šå¸¸ç”¨äºŽåˆ†æžç­‰**
> *   ****åƒµå°¸ cookies:** å¦‚æžœä½ åˆ é™¤å®ƒä»¬ï¼Œå®ƒä»¬ä¼šç”¨ç›¸åŒçš„å€¼é‡æ–°åˆ›å»ºè‡ªå·±ã€‚å®ƒä»¬æœ‰å¾ˆå¤šå®žçŽ°æ–¹å¼ï¼Œä½†å…¶ä¸­ä¹‹ä¸€æ˜¯é€šè¿‡ç”µå­æ ‡ç­¾ã€‚[å¦‚æžœæ‚¨é”™è¿‡äº†](https://medium.com/p/d6f425ceea13#00b2)ï¼Œè¯·é˜…è¯»ä¸Šé¢çš„éƒ¨åˆ†ã€‚å¦ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨å…¶ä»–å­˜å‚¨ææ–™:æœ¬åœ°å­˜å‚¨ã€ä¼šè¯å­˜å‚¨ã€ç´¢å¼•æ•°æ®åº“ã€Web SQL**
> 
> **4.å®‰å…¨æ€§**
> 
> *   **çªƒå– cookies:è¯»å–`document.cookie`å¹¶å‘é€åˆ°æŸå¤„çš„åº”ç”¨ç¨‹åº**
> *   **è·¨ç«™ç‚¹è¯·æ±‚ä¼ªé€ :`samesite` å°±æ˜¯ä¸ºäº†å®‰å…¨èµ·è§è€Œå¼€å‘å‡ºæ¥çš„ã€‚å¦åˆ™:ä½ ç‚¹å‡»äº†ä¸€äº›å¯ç–‘ç½‘ç«™çš„é“¾æŽ¥ã€‚æ­¤é“¾æŽ¥å¯¼è‡´ï¼Œå³é“¶è¡Œç½‘ç«™ï¼Œæµè§ˆå™¨å°†å¬å›žæ‚¨çš„ cookiesï¼Œå¦‚æžœå­˜åœ¨= >å:((**
> 
> # **13.ä»£ç†å’Œåå‘ Proxyâ›“**
> 
> ## **1.ä»£ç†å’Œåå‘ä»£ç†**
> 
> **è§†é¢‘:[https://www.youtube.com/watch?v=SqqrOspasag](https://www.youtube.com/watch?v=SqqrOspasag)**
> 
> **è§†é¢‘å¤§æ¦‚åªæœ‰åå‘ä»£ç†:[**https://www.youtube.com/watch?v=ylkAc9wmKhc**](https://www.youtube.com/watch?v=ylkAc9wmKhc)**
> 
> **å…³äºŽè´Ÿè½½å‡è¡¡å™¨çš„è§†é¢‘:[**https://www.youtube.com/watch?v=aKMLgFVxZYk**](https://www.youtube.com/watch?v=aKMLgFVxZYk)**
> 
> **å…³äºŽ TLS/SSL ç»ˆæ­¢çš„è§†é¢‘:ã€https://www.youtube.com/watch?v=H0bkLsUe3noã€‘**
> 
> ****å…³äºŽ TLS ç©¿è¶Šçš„è§†é¢‘:[**https://www.youtube.com/watch?v=iLHhL-vAPqo**](https://www.youtube.com/watch?v=iLHhL-vAPqo)****
> 
> ******ä»£ç†** â€”ä»£è¡¨å®¢æˆ·ç«¯å‘å‡ºè¯·æ±‚çš„è½¯ä»¶ã€‚****
> 
> ******å®¢æˆ·ç«¯â†’ä»£ç†** â†’ **æœåŠ¡å™¨******
> 
> ****![](img/5ff35230c68ab75f7faccd20f11a37e8.png)****
> 
> ****ä»£ç†çš„ä¾‹å­****
> 
> *   ****åœ¨ä¸€äº›ç»„ç»‡ä¸­ï¼Œä»£ç†æœåŠ¡å™¨ä¼šé˜»æ­¢ä½ è®¿é—®æŸäº›ç½‘ç«™****
> *   ****å¦ä¸€ä¸ªå®¢æˆ·ç«¯ä½¿ç”¨ç›¸åŒçš„ä»£ç†å¹¶è¯·æ±‚ç›¸åŒçš„ä¿¡æ¯ã€‚**ä»£ç†**å°†ä»Žç¼“å­˜ä¸­å–å‡ºå®ƒï¼Œè€Œä¸æ˜¯å†æ¬¡å‘å‡ºè¯·æ±‚ã€‚****
> *   ****ç”¨ä¾‹:1ã€‚ç¼“å­˜ 2ã€‚åŒ¿å 3ã€‚è®°å½• 4ã€‚é˜»æ­¢ç«™ç‚¹ 5ã€‚å¾®æœåŠ¡:å³è¾¹è½¦ä»£ç†****
> 
> ******åå‘ä»£ç†** â€”ä¸º*å®¢æˆ·ç«¯*éšè—æœ€ç»ˆç›®çš„åœ°çš„è½¯ä»¶ã€‚å› æ­¤ï¼Œ*å®¢æˆ·ç«¯*ä¸çŸ¥é“è¯·æ±‚çš„ç¡®åˆ‡ä½ç½®ã€‚å®žé™…ä¸Šï¼Œ*å®¢æˆ·ç«¯*è®¤ä¸ºä»–çŸ¥é“åŽ»å“ªé‡Œï¼Œä½†å®žé™…ä¸Šè¯·æ±‚è¢«æ˜ å°„åˆ°å¦ä¸€ä¸ª*æœåŠ¡å™¨*ã€‚****
> 
> ****![](img/8556ad5ba6551fefe426a60571bcbe4d.png)****
> 
> ****åå‘ä»£ç†ç¤ºä¾‹****
> 
> *   ****ç”¨ä¾‹:1ã€‚ç¼“å­˜(**åå‘** **ä»£ç†**ä¼šå›žå¤å®¢æˆ·ç«¯è€Œä¸ä¼šå®žé™…è®¿é—®åŽç«¯)2 .è´Ÿè½½å¹³è¡¡ 3ã€‚å…¥å£:Kubernetes çš„ä¸œè¥¿ 4ã€‚é‡‘ä¸é›€éƒ¨ç½² 5ã€‚å¾®æœåŠ¡:ä»£ç†å’Œåå‘ä»£ç†çš„ sidecar****
> *   ****æœåŠ¡ç½‘æ ¼(ä¾§è½¦ä»£ç†)â€”ä»£ç†å’Œåå‘ä»£ç†åŒæ—¶ä½¿ç”¨****
> 
> ## ****2.ç¬¬ 4 çº§ä¸Žç¬¬ 7 çº§è´Ÿè½½å¹³è¡¡å™¨****
> 
> ******è´Ÿè½½å¹³è¡¡å™¨(ç®€ç§° LB)**â€”å°†è´Ÿè½½(åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­æ˜¯è¯·æ±‚)åˆ†é…ç»™å¤šä¸ªæœåŠ¡å™¨ä»¥é˜²æ­¢è¿‡è½½çš„è½¯ä»¶ã€‚é€šå¸¸ï¼Œ**åå‘ä»£ç†**ä¹Ÿè¢«ç”¨ä½œè´Ÿè½½å¹³è¡¡å™¨(å³ NGINX)ã€‚****
> 
> ****ç¬¬äºŒä¸ªå®šä¹‰: **LB** é€šè¿‡å„ç§æŠ€æœ¯å°†è´Ÿè½½åˆ†æˆä¸åŒçš„*æœåŠ¡å™¨*ã€‚å³*å¾ªçŽ¯èµ›*****
> 
> ****åœ¨æœ¬èŠ‚å¼€å§‹ä¹‹å‰ï¼Œè¯·åŠ¡å¿…æŸ¥çœ‹å…³äºŽ OSI çš„[ç¬¬ä¸€èŠ‚ã€‚](https://medium.com/p/d6f425ceea13#29d5)****
> 
> ****ä¸‹é¢å°†æœ‰ 2 ä¸ªå…³äºŽ L4 å’Œ L7 çš„ç›¸ä¼¼ç»„å—ï¼ŒåŒ…å«å„ç§ä¿¡æ¯ã€‚çœ‹çœ‹å§ã€‚****
> 
> ****æ€»è€Œè¨€ä¹‹:****
> 
> 1.  ****TCP ç«¯æŽ¥:ç¬¬ 4 å±‚(åœ¨ç¬¬ 7 å±‚å¾ˆæ˜Žæ˜¾)****
> 2.  ****TLS ç»ˆæ­¢:ç¬¬ 4 å±‚â€”ä»…ä»£ç†æµé‡(åŠ å¯†æˆ–è§£å¯†)ã€‚ç¬¬ 7 å±‚â€”æ”¶é›†æ‰€æœ‰æ•°æ®åŒ…ï¼Œç„¶åŽå†³å®šå¦‚ä½•å¤„ç†ã€‚****
> 3.  ****TCP ç©¿è¶Š:ç¬¬ 4 å±‚****
> 4.  ****TLS ç›´é€š:ç¬¬ 4 å±‚å’Œç¬¬ 7 å±‚â€”â€”ä»ç„¶**è§£å¯†**æµé‡****
> 
> ******ç¬¬ä¸€å¤§å—:******
> 
> ******ç¬¬ä¸ƒå±‚******
> 
> 1.  ****å‘**åå‘ä»£ç†
>     -ä¸Ž**åå‘ä»£ç†**å»ºç«‹çš„ TLS** å‘é€è¯·æ±‚****
> 2.  **è¯·æ±‚æ˜¯ä¸€ä¸ªåŒ…å«**æ•°æ®åŒ…**å’Œ
>     çš„å¤åˆç‰©â€”â€”åªæœ‰åœ¨**åå‘ä»£ç†**æ”¶åˆ°æ‰€æœ‰**æ•°æ®åŒ…**åŽï¼Œè¯·æ±‚æ‰å®Œæˆ**
> 3.  **ç”±äºŽæ˜¯ç¬¬ä¸ƒå±‚***åå‘ä»£ç†**ç»ˆæ­¢ **TLS** ðŸ“› ðŸ“› ðŸ“› ðŸ“› ðŸ“›
>     åœ¨è¿™ä¸€å±‚æˆ‘ä»¬ä¹Ÿå¯ä»¥åš**ç©¿è¶Š**ðŸ“› ðŸ“› ðŸ“› ðŸ“› ðŸ“›***
> 4.  ***æŽ¥ä¸‹æ¥ï¼Œ**åå‘ä»£ç†**å°†å‘é€æ–°çš„**æ•°æ®åŒ…**åˆ°æœåŠ¡å™¨ N
>     ï¼Œä¸Ž*å®¢æˆ·ç«¯*ä½¿ç”¨**åå‘ä»£ç†**åšåŒæ ·çš„äº‹æƒ…***
> 
> *****ç¬¬å››å±‚*****
> 
> ***ðŸ“› ðŸ“› ðŸ“› ðŸ“› ðŸ“›***
> 
> *****æ›´æ–°:**ä½†æ˜¯ï¼Œæ‚¨å¯ä»¥æ‰§è¡Œ **TCP ç»ˆæ­¢**ï¼Œå› æ­¤æ‚¨ä¹Ÿå°†æ‹¥æœ‰ 2 ä¸ª TCP è¿žæŽ¥ã€‚ä½†æ˜¯æ²¡æœ‰æ™ºèƒ½å¹³è¡¡***
> 
> ***ðŸ“› ðŸ“› ðŸ“› ðŸ“› ðŸ“›***
> 
> 1.  ***å‘**åå‘ä»£ç†å‘é€è¯·æ±‚** : ***æ•°æ®åŒ…
>     -*-**ç¬¬ 4 å±‚ç§°ä¸º**-*æ•°æ®åŒ…çº§ä»£ç†
>     -*-**å®ƒä¸æŸ¥çœ‹æ•°æ®ï¼Œå› ä¸ºå®ƒæ˜¯**åŠ å¯†çš„**åœ¨è¿™ä¸€çº§***
> 2.  ***åœ¨ç¬¬ä¸€ä¸ª**æ•°æ®åŒ…**è¢«**åå‘ä»£ç†**æŽ¥æ”¶åŽï¼Œå®ƒå°†è¢«å‘é€åˆ°*æœåŠ¡å™¨ N* ï¼Œè€Œä¸ç­‰å¾…ç¬¬äºŒä¸ª**æ•°æ®åŒ…**ã€‚æŽ¥ä¸‹æ¥ï¼Œç¬¬äºŒä¸ª**æ•°æ®åŒ…**å°†åšåŒæ ·çš„äº‹æƒ…ï¼Œç¬¬ä¸‰ä¸ª
>     ä¹Ÿæ˜¯å¦‚æ­¤â€”â€”å½“å®¢æˆ·ç«¯ IP åœ°å€ç›¸åŒæ—¶ï¼Œ**åå‘ä»£ç†**å°†å§‹ç»ˆå‘åŒä¸€æœåŠ¡å™¨å‘é€æ•°æ®
>     â€”â€”å“åº”ä»¥åŒæ ·çš„æ–¹å¼å®Œæˆ:**æ•°æ®åŒ…**å°†è¢«å‘é€åˆ°**åå‘ä»£ç†**ï¼Œç„¶åŽå‘é€åˆ°*å®¢æˆ·ç«¯*ã€‚ç„¶åŽï¼Œä¸‹ä¸€ä¸ªæ•°æ®åŒ…ç­‰ç­‰***
> 3.  ***ç¬¬ 4 å±‚ä¸éœ€è¦ç†è§£è¯·æ±‚/å“åº”ã€‚
>     å½“ä½ ä¸æƒ³/ä¸éœ€è¦**åå‘ä»£ç†**ç†è§£åè®®æ—¶ï¼Œè¿™æ˜¯å¥½çš„:å³ **gRPC** æ˜¯å¯ä»¥çš„***
> 
> *****ç¬¬äºŒå—:*****
> 
> ***ç¬¬ 4 å±‚**è´Ÿè½½å‡è¡¡å™¨**:æˆ‘ä»¬åªçŸ¥é“ **IP åœ°å€**å’Œ**ç«¯å£**:***
> 
> *   ***å°† **IP åœ°å€**ä»Žå…¶è‡ªèº«æ›´æ”¹ä¸ºå…¶ä¸­ä¸€ä¸ªæœåŠ¡å™¨ã€‚å®ƒæ˜¯é€šè¿‡**NAT**([read section above](https://medium.com/p/d6f425ceea13#254c)):æº IP(å®¢æˆ·ç«¯çš„â€”â€”å›¾ä¸Šæ˜¯ 44.1.1.1)åˆ°æ•°æ®ç›®çš„ IP(å›¾ä¸Šæ˜¯ 44 . 3 . 3 . 3)â€”â€”ä¸€ä¸ª **TCP** è¿žæŽ¥ä»Ž*å®¢æˆ·ç«¯*åˆ°*æœåŠ¡å™¨****
> 
> ***![](img/101328c5f5734824433c14039f8c016d.png)***
> 
> ***L4 è´Ÿè½½å¹³è¡¡å™¨ç¤ºä¾‹***
> 
> *   ****å®¢æˆ·ç«¯*ä¸çŸ¥é“è¯·æ±‚è¢«è½¬å‘åˆ°å“ªé‡Œï¼Œå› ä¸ºå®ƒæ˜¯åå‘ä»£ç†***
> 
> ***ä¼˜ç‚¹:***
> 
> *   ***æ›´ç®€å•çš„**è´Ÿè½½å‡è¡¡**(ä¸éœ€è¦çœ‹æ•°æ®)***
> *   ***é«˜æ•ˆ(ä¸éœ€è¦çœ‹æ•°æ®)***
> *   ***æ›´å®‰å…¨ï¼Œå› ä¸ºæ²¡æœ‰ **TLS ç»ˆæ­¢*****
> *   ***ä¸€ä¸ª TCP è¿žæŽ¥***
> 
> ***ç¼ºç‚¹:***
> 
> *   ***æ²¡æœ‰æ™ºèƒ½**è´Ÿè½½å¹³è¡¡**:æ²¡æœ‰ URL é‡å†™ï¼Œå› ä¸ºä½ åªçŸ¥é“ IP åœ°å€***
> *   ***ä¸é€‚ç”¨äºŽå¾®æœåŠ¡(å³å…¥å£ä½¿ç”¨è·¯å¾„è½¬å‘åˆ°å„ç§æœåŠ¡)***
> *   ***å¤šç”¨æˆ·æ— ç¼“å­˜***
> 
> ***ç¬¬ä¸ƒå±‚**è´Ÿè½½å‡è¡¡å™¨:*****
> 
> ***![](img/da0df771162305f919512a0428af5377.png)***
> 
> ***ä»Žå®¢æˆ·ç«¯åˆ° LB çš„ TCP è¿žæŽ¥***
> 
> ***![](img/6b76249504d5f661f71baaf55ea44f3a.png)***
> 
> ***ä»Ž LB åˆ°æœåŠ¡å™¨çš„ TCP è¿žæŽ¥***
> 
> *   ****å®¢æˆ·ç«¯*å‘**è´Ÿè½½å‡è¡¡å™¨**å‘å‡ºè¯·æ±‚:**IP _ address**_**source***GET/pictures***IP _ address _ destination**:ä¸€ä¸ªåˆ°**è´Ÿè½½å‡è¡¡å™¨**çš„ TCP è¿žæŽ¥ï¼Œå¦ä¸€ä¸ªä»Ž**è´Ÿè½½å‡è¡¡å™¨**åˆ°*æœåŠ¡å™¨*çš„ TCP è¿žæŽ¥(ä¸€æ¡è·¯å¾„å¯èƒ½æœ‰å¤šä¸ªï¼Œå³ 7 ä¸ªæœåŠ¡å™¨ç”¨äºŽ/image***
> *   ***æ‰€ä»¥ï¼Œ **2 ä¸ªè¿žæŽ¥**çœ‹ä¼¼ä¸º**ä¸€ä¸ªè¿žæŽ¥*****
> 
> ***ä¼˜ç‚¹:***
> 
> *   ***æ™ºèƒ½**è´Ÿè½½å¹³è¡¡**(åŸºäºŽä¸€å®šçš„é€»è¾‘ï¼›å³è¡¨å¤´)***
> *   ***è´®è—***
> *   ***éžå¸¸é€‚åˆå¾®æœåŠ¡***
> 
> ***ç¼ºç‚¹:***
> 
> *   ***æ˜‚è´µ(å°†æ•°æ®è§†ä¸º TLS ç»ˆæ­¢)***
> *   ***è§£å¯†(ç»ˆæ­¢ TLS)***
> *   ***ä¸¤ä¸ª TCP è¿žæŽ¥***
> *   ***å¿…é¡»å…±äº« TLS è¯ä¹¦:å³å®¢æˆ·ç«¯åˆ°è´Ÿè½½å¹³è¡¡å™¨***
> 
> ***åœ¨**ä¸­æ³¨æ„ã€‚cfg** æ–‡ä»¶:å¦‚æžœç¬¬ 4 å±‚-ç”±äºŽ TCP æ˜¯è¿žç»­çš„ï¼Œæ‰€ä»¥ä¸ä¼šå¾ªçŽ¯è°ƒåº¦ï¼Œè€Œåœ¨ç¬¬ 7 å±‚-ç”±äºŽå¾ªçŽ¯è°ƒåº¦æ˜¯æ´»åŠ¨çš„ï¼Œæ‰€ä»¥ä¼šä¸æ–­å˜åŒ–ã€‚***
> 
> ***ä¸‹é¢ä½ å¯ä»¥çœ‹åˆ°ç¬¬ 7 å±‚ LB (HAProxy)çš„ä¾‹å­***
> 
> ***ç¬¬ 7 å±‚é…ç½®***
> 
> ## ***3.TLS/SSL terminationâš”ï¸***
> 
> *****TLS ç»ˆæ­¢** â€”ç»“æŸ TLS è¿žæŽ¥å¹¶å‘ä¸»æœåŠ¡å™¨å‘é€æœªåŠ å¯†æ•°æ®çš„è¿‡ç¨‹ã€‚åªæœ‰åœ¨**ç¬¬ 7 å±‚**å’Œ**ç¬¬ 4 å±‚**æ•°æ®åŠ å¯†æ—¶æ‰æœ‰å¯èƒ½ã€‚***
> 
> ***`Client <-> Load Balancer (Reverse Proxy) <-> Original Server`***
> 
> ****å®¢æˆ·ç«¯*å’Œ**åå‘ä»£ç†**ä¹‹é—´æœ‰ TLSã€‚
> ä¸ºäº†è®©*æœåŠ¡å™¨*å¸®åŠ©*å®¢æˆ·ç«¯*:ç¼“å­˜æ•°æ®ï¼Œé€‰æ‹©æ›´å¥½çš„æœåŠ¡å™¨(å¦‚æžœæœ‰å¤šä¸ª)ï¼Œéœ€è¦**ç»ˆæ­¢ TLS** åˆåè§£å¯†æ•°æ®ã€‚***
> 
> *****TLS è½¬å‘ä»£ç†**â€”â€”è§£å¯†æ¥è‡ª*å®¢æˆ·ç«¯*çš„æ•°æ®ï¼Œç„¶åŽ**å†æ¬¡åŠ å¯†**å‘é€åˆ°*åŽŸæœåŠ¡å™¨*çš„è¿‡ç¨‹ã€‚è¿™è¢«è®¤ä¸ºæ˜¯ **TLS ç»ˆæ­¢**çš„ä¸€ç§æ–¹å¼ï¼Œä½†æ›´å®‰å…¨ï¼Œå› ä¸º**åå‘ä»£ç†**å’Œ**åŽŸå§‹æœåŠ¡å™¨**ä¹‹é—´çš„æ•°æ®æ˜¯å®‰å…¨çš„ã€‚***
> 
> ***`*Client <-> Load Balancer (Reverse Proxy)*` â€”å®ƒä»¬ä¹‹é—´æœ‰ TLS è¿žæŽ¥ã€‚***
> 
> ***`*Proxy <-> Original Server*` â€”ä¹Ÿæœ‰å®‰å…¨è¿žæŽ¥ï¼Œä½†ä¸æ˜¯ç¬¬ä¸€ç§ã€‚***
> 
> ***æˆ‘ä»¬å¯ä»¥åœ¨æˆ‘ä»¬çš„**ä»£ç†**ä¸­æ”¾å…¥å„ç§ä¸œè¥¿:å…¥ä¾µæ£€æµ‹ç³»ç»Ÿï¼Œhttp åŠ é€Ÿå™¨å®Œæˆå·¥ä½œ(åƒ Varnish)ï¼ŒKafka è§¦å‘ä¸€äº›äº‹ä»¶â€”â€”å› ä¸ºæ•°æ®æ˜¯æœªåŠ å¯†çš„ã€‚***
> 
> *****TLS ç»ˆæ­¢/TLS è½¬å‘ä»£ç†çš„ä¼˜ç‚¹**:***
> 
> *   ***å°†ä»£ç†æ”¾åœ¨æ¯”çœŸå®žæœåŠ¡å™¨æ›´é è¿‘å®¢æˆ·ç«¯çš„ä½ç½®***
> *   ***ä½œä¸ºè§£å¯†æ•°æ®çš„ HTTP åŠ é€Ÿå™¨(å³ Varnish)***
> *   ***å…¥ä¾µæ£€æµ‹ç³»ç»Ÿ:å—…æŽ¢æ•°æ®ä»¥æ£€æµ‹æ­¤ç±»é—®é¢˜***
> *   ***ç¬¬ 7 å±‚/æœåŠ¡ç½‘æ ¼çš„è´Ÿè½½å¹³è¡¡***
> 
> ***ç¼ºç‚¹:***
> 
> *   ***æ•°æ®å¯èƒ½ä¼šå—åˆ°å±å®³***
> 
> ## ***4.TLS ç›´é€š***
> 
> ***åŒæ ·ï¼Œ**ç¬¬å››å±‚ä»£ç†**åªèƒ½æŸ¥çœ‹ IP åœ°å€å’Œç«¯å£ã€‚***
> 
> *****é¢„æ¼”ä¸Šä¸€èŠ‚:** *å®¢æˆ·ç«¯*å‘*æœåŠ¡å™¨*å‘å‡ºè¯·æ±‚ã€‚**åå‘ä»£ç†**å°†:***
> 
> *   ***ç¬¬ä¸€ç§å˜ä½“:ä»…ä»…å‘åŽç«¯ä¹‹ä¸€å‘é€è¯·æ±‚(ä¾‹å¦‚ï¼Œé€šè¿‡å¾ªçŽ¯æ³•)â€”â€”ä¸€ä¸ªæ²¡æœ‰ç»ˆæ­¢çš„ **TCP è¿žæŽ¥*****
> *   ***ç¬¬äºŒç§å˜ä½“:å»ºç«‹ä¸Ž*å®¢æˆ·ç«¯*åŠå…¶è‡ªèº«çš„è¿žæŽ¥(å› æ­¤ï¼Œæ‚¨å°†è¯ä¹¦æ”¾åœ¨*åå‘ä»£ç†*ä¸­)ã€‚ç„¶åŽå»ºç«‹ä¸Žè‡ªèº«å’Œå…¶ä¸­ä¸€ä¸ª*æœåŠ¡å™¨*çš„å¦ä¸€ä¸ª **TCP è¿žæŽ¥*****
> 
> *****TLS ç›´é€š:*****
> 
> *****åœ¨ç¬¬ 4 å±‚å’Œç¬¬ 7 å±‚å¯ç”¨*****
> 
> *   *****åå‘ä»£ç†**å°†ç ´è§£*å®¢æˆ·ç«¯ä½ å¥½*æŸ¥çœ‹ **SNI** å‚æ•°æ‰¾åˆ°åŸŸå***
> *   ***ä¼ é€’åˆ°æœŸæœ›çš„åŸŸï¼Œä½†**è¢«åŠ å¯†*****
> *   ***æŽ¥æ”¶æ¥è‡ª*æœåŠ¡å™¨*ä¹‹ä¸€çš„å“åº”ï¼Œä½†ä»€ä¹ˆéƒ½ä¸æ˜Žç™½***
> *   ***çŽ°åœ¨ï¼Œ**åå‘ä»£ç†**åªæ˜¯åœ¨*å®¢æˆ·ç«¯*å’Œ*æœåŠ¡å™¨*ä¹‹é—´è½¬å‘æ¶ˆæ¯ï¼Œè€Œä¸ç†è§£å†…å®¹***
> 
> ***= >ç¬¬ 4 å±‚åå‘ä»£ç†***
> 
> ***è¿˜æœ‰ï¼Œæˆ‘æŽ¨èçœ‹ä¸‹é¢çš„è§†é¢‘ï¼Œè‡ªå·±è¯•ç€ç”¨ HAProxy çŽ©:[**https://www.youtube.com/watch?v=qYnA2DFEELw**](https://www.youtube.com/watch?v=qYnA2DFEELw)***
> 
> # ***14.HSTSðŸ”©***
> 
> *****HSTS** â€” http ä¸¥æ ¼çš„è¿è¾“å®‰å…¨***
> 
> *****SSL å‰¥ç¦»:*****
> 
> *   ***å¤§å¤šæ•°*ç½‘ç»œæœåŠ¡å™¨*æ”¯æŒ HTTP å’Œ HTTPS***
> *   ***å¦‚æžœ*å®¢æˆ·ç«¯*ä¸Ž HTTP è¿žæŽ¥ï¼Œä»–å°†è¢«æœåŠ¡å™¨é‡å®šå‘åˆ° HTTPS***
> *   ***é—®é¢˜:åœ¨æ¥è‡ª*å®¢æˆ·ç«¯*çš„ç¬¬ä¸€ä¸ª HTTP è¯·æ±‚æœŸé—´ï¼Œè¯·æ±‚å¯èƒ½ä¼šè¢« **MITM** å¤„ç†ï¼Œæ”»å‡»è€…ä¼šå°†è¯·æ±‚é‡å®šå‘åˆ°ä»–çš„ç«™ç‚¹ï¼Œçœ‹èµ·æ¥å¾ˆåƒï¼Œä¹Ÿå¯èƒ½æ˜¯ HTTPS***
> 
> ***= >è§£å†³æ–¹æ¡ˆæ˜¯ **HSTS*****
> 
> *   ***æµè§ˆå™¨ä¿å­˜ç€æ‰€æœ‰å¼ºè¿«ç”¨æˆ·åœ¨ HTTPS å·¥ä½œçš„ç½‘ç«™åˆ—è¡¨ã€‚å®ƒå«åš **HSTS æŽ’è¡Œæ¦œ*****
> *   ***æ‰€ä»¥ï¼Œå¦‚æžœä½ è¾“å…¥ *http site* ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨æŠŠä½ è¿žæŽ¥åˆ° HTTPS ç‰ˆæœ¬***
> *   ***ä½ ç½‘ç«™åº”è¯¥è¿”å›ž**ä¸¥æ ¼ä¼ è¾“å®‰å…¨**å¤´ï¼Œè®©æµè§ˆå™¨æ›´æ–° HSTS åˆ—è¡¨***
> *   ***å³ä½¿ä½ çš„ä¸€äº›ç½‘é¡µåœ¨ HTTP ä¸Šï¼Œå…¶ä»–ç½‘é¡µåœ¨ HTTPS = >ä¹Ÿè¦é€šè¿‡ HTTPS ä¸Žç½‘ç«™è¿žæŽ¥***
> 
> ***å±€é™æ€§:***
> 
> *   ***è¯·æ±‚çš„é€Ÿåº¦è¾ƒä½Ž***
> *   ***é™çº§æ”»å‡»(TLS)
>     ä¸èµ·ä½œç”¨â€”â€”æ”»å‡»è€…æ‹¦æˆª**å®¢æˆ·ç«¯ hello** æ¥é™çº§*å®¢æˆ·ç«¯*çš„åŠ å¯†ç®—æ³•ï¼Œä½¿*æœåŠ¡å™¨*æ— æ³•é€‰æ‹©æœ€æ–°æœ€å¥½çš„åŠ å¯†ç®—æ³•***
> *   ***å¦‚æžœ*å®¢æˆ·ç«¯*ç¬¬ä¸€æ¬¡åŽ»ç«™ç‚¹ï¼Œå¯ä»¥æ”¯æŒ HTTPSï¼Œä½†æ˜¯*å®¢æˆ·ç«¯*åŽ» HTTP ç‰ˆâ†’æµè§ˆå™¨åœ¨ **HSTS åˆ—è¡¨ä¸­æ²¡æœ‰è¿™ä¸ªç«™ç‚¹** = > **MITM** å¯èƒ½æ€§( **ARP ä¸­æ¯’**ï¼Œå‡†ç¡®çš„è¯´ã€‚[é˜…è¯»ä¸Šä¸€èŠ‚](https://medium.com/p/d6f425ceea13#6ed1)ä¸­å…³äºŽ ARP çš„å†…å®¹ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¦çœ‹è¯ä¹¦(å¿…é¡»ç”±æˆ‘ä»¬è¿›å…¥çš„**éžå¸¸ç«™ç‚¹**å‡ºå…·ï¼Œå³ google.com[T42](http://google.com)***
> 
> # ***15.å“‘å‰§å—…æŽ¢ðŸŒ«***
> 
> ***è§†é¢‘:[https://www.youtube.com/watch?v=eq6R6dxRuiU](https://www.youtube.com/watch?v=eq6R6dxRuiU)***
> 
> ***å»¶ä¼¸é˜…è¯»:[**https://www . coal fire . com/the-coal fire-blog/mime-snughing-in-browsers-and-the-security**](https://www.coalfire.com/the-coalfire-blog/mime-sniffing-in-browsers-and-the-security)***
> 
> *****MIME** â€”å¤šç”¨é€”äº’è”ç½‘é‚®ä»¶äº¤æ¢***
> 
> *****MIME å—…æŽ¢**æ˜¯æµè§ˆå™¨ç”¨æ¥è¯†åˆ«æ‰€æä¾›å†…å®¹ç±»åž‹çš„ä¸€ç§æ–¹æ³•ã€‚æµè§ˆå™¨ä¾é è¿™ä¸ª*å†…å®¹ç±»åž‹*æ¥çŸ¥é“åšä»€ä¹ˆã€‚***
> 
> ***å¦‚æžœä½ ä¸æŒ‡å®šè¿”å›žå†…å®¹çš„**ç±»åž‹ï¼Œé‚£ä¹ˆæµè§ˆå™¨ä¸çŸ¥é“è¯¥åšä»€ä¹ˆã€‚å› æ­¤ï¼Œå®ƒè¯•å›¾å—…å‡ºå†…å®¹çš„ä¸»ä½“ï¼Œå¹¶è§£æžå®ƒä»¥çŸ¥é“è¯¥åšä»€ä¹ˆã€‚*****
> 
> ***è®©æˆ‘ä»¬çœ‹çœ‹ä¸‹å›¾:***
> 
> *   ***æ‰©å±•æ˜¯ä¸€ä¸ªç®€å•çš„è·¯å¾„ï¼Œå®ƒä¸æŒ‡å®šä»»ä½•ä¸œè¥¿(æˆ‘çš„æ„æ€æ˜¯å†…å®¹ç±»åž‹)***
> 
> ***![](img/973d86cba4f96fb3b7cc19228261fe0c.png)***
> 
> ***èµ„æºè¯·æ±‚***
> 
> *****ä½†æ˜¯** : *å®¢æˆ·ç«¯*è¯·æ±‚èµ„æºï¼Œ*æœåŠ¡å™¨*å“åº” *html* é¡µé¢ï¼Œå…¶ä¸­æ²¡æœ‰æŒ‡å®š**å†…å®¹ç±»åž‹**ã€‚æµè§ˆå™¨è¯•å›¾è§£æžå®ƒï¼Œå‘çŽ°å®ƒæ˜¯ *html* ã€‚ä½†æ˜¯åœ¨é‚£ä¸ª *html* é‡Œé¢æœ‰ä¸€ä¸ªç³Ÿç³•çš„ javascript ä»£ç ã€‚**ä½ è¢«é»‘äº†*****
> 
> ***![](img/1ad7793bfc79e29f3acadfffc286aef3.png)***
> 
> ***æ¥è‡ªæœåŠ¡å™¨çš„å“åº”***
> 
> # ***ç»“å°¾éƒ¨åˆ†ðŸ™Œ***
> 
> ***å¦‚æžœä½ åˆ°äº†è¿™ä¸€æ­¥ï¼Œé‚£ä¹ˆéžå¸¸æ„Ÿè°¢ä½ çš„è€å¿ƒå’Œå¯¹ä½ å¥½å¥‡å¿ƒçš„è®¤å¯ðŸŽ‰ã€‚è¯·éšæ„å†™è¯„è®ºæˆ–é€šè¿‡æä¾›çš„èµ„æºè”ç³»æˆ‘ðŸ“©ï¼š***
> 
> *   ***é¢†è‹±:[www.linkedin.com/in/sleeplesschallenger](http://www.linkedin.com/in/sleeplesschallenger)***
> *   ***GitHub:[https://github.com/SleeplessChallenger](https://github.com/SleeplessChallenger)***
> *   ***leet code:ã€https://leetcode.com/SleeplessChallenger/ã€‘T21***
> *   ***ç”µæŠ¥:@æ— çœ æŒ‘æˆ˜è€…********