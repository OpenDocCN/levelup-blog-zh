<html>
<head>
<title>How to use git patch effectively</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何有效使用git补丁</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-use-git-patch-effectively-98650a631bdf?source=collection_archive---------21-----------------------#2020-07-27">https://levelup.gitconnected.com/how-to-use-git-patch-effectively-98650a631bdf?source=collection_archive---------21-----------------------#2020-07-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div class="gh gi jq"><img src="../Images/ea1f1d1e0d63f624226d20c869dc5fbe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/0*GOxjbw-xS1kno7lX.jpeg"/></div></figure><p id="b8a0" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">Git提供了创建补丁文件的选项。这些补丁文件包含可以在其他地方使用的更改。</p><p id="ed61" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">例如，您可以在本地存储库中创建一个补丁文件。然后，您可以将它发送给其他人，以便在他们的本地使用该修补程序。</p><p id="93f6" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">有些人还会创建一个补丁，以备后用。</p><h2 id="12f4" class="kv kw it bd kx ky kz dn la lb lc dp ld ki le lf lg km lh li lj kq lk ll lm ln bi translated">创建git补丁</h2><pre class="lo lp lq lr gt ls lt lu lv aw lw bi"><span id="1605" class="kv kw it lt b gy lx ly l lz ma">git format-patch &lt;target-branch&gt;</span></pre><figure class="lo lp lq lr gt ju gh gi paragraph-image"><div class="gh gi mb"><img src="../Images/de6556592c4f8196702110b94eb3ef83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1258/format:webp/0*6sjeAFwzZ7e6r_Al.png"/></div></figure><p id="c0e0" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">在上面的例子中，你可以看到我提到了<strong class="jz iu"> master </strong>作为目标分支。所以Git将从当前分支(develop)获取所有在master之前的提交。</p><p id="0cb2" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">然后，它为每次提交创建一个补丁文件。如您所见，创建了八个补丁文件。</p><p id="d1b7" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated"><strong class="jz iu">为多次提交创建一个补丁文件</strong></p><pre class="lo lp lq lr gt ls lt lu lv aw lw bi"><span id="ded0" class="kv kw it lt b gy lx ly l lz ma">git format-patch &lt;target-branch&gt; --stdout patch_name.patch</span></pre><figure class="lo lp lq lr gt ju gh gi paragraph-image"><div class="gh gi mc"><img src="../Images/a89d36b3935ba179519cc6bf2a4ad369.png" data-original-src="https://miro.medium.com/v2/resize:fit:1266/format:webp/0*aYMvs-ftuTmTsiv6.png"/></div></figure><p id="3393" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">在上面的示例中，为所有提交创建了一个具有给定名称的补丁文件。</p><p id="516d" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated"><strong class="jz iu">从git创建补丁提交</strong></p><p id="220c" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">有时，您会对从选择性提交创建补丁感兴趣。在这种情况下，您可以使用</p><pre class="lo lp lq lr gt ls lt lu lv aw lw bi"><span id="132e" class="kv kw it lt b gy lx ly l lz ma">git format-patch -1 &lt;commit-hash&gt;</span></pre><p id="3eb1" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">上面的命令将只考虑各自的提交散列来制作补丁。</p><h2 id="6354" class="kv kw it bd kx ky kz dn la lb lc dp ld ki le lf lg km lh li lj kq lk ll lm ln bi translated">应用git补丁</h2><p id="96ee" class="pw-post-body-paragraph jx jy it jz b ka md kc kd ke me kg kh ki mf kk kl km mg ko kp kq mh ks kt ku im bi translated">现在你知道如何创建一个补丁文件。让我们看看如何应用git补丁，如果你有一个的话。</p><figure class="lo lp lq lr gt ju gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/ccc0d879f09f57e880569b4fc9898e11.png" data-original-src="https://miro.medium.com/v2/resize:fit:1294/format:webp/0*xP3hrWIDS5uaL92h.png"/></div></figure><p id="fe68" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">您可以看到，我已经从指定路径应用了一个补丁文件。然后应用补丁文件中的更改。然后，您可以检查这些更改并提交。</p><pre class="lo lp lq lr gt ls lt lu lv aw lw bi"><span id="e02a" class="kv kw it lt b gy lx ly l lz ma">git apply --stat &lt;patch_file_path&gt;</span></pre><p id="f783" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">该命令不会应用补丁，但会显示更改状态。</p><figure class="lo lp lq lr gt ju gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/e0d36e9aeef68739d3ca119c1e90d32d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1386/format:webp/0*T7137WDacRMnqJBi.png"/></div></figure><p id="a9cf" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated"><strong class="jz iu">使用git am </strong></p><p id="d957" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">该命令将应用补丁，并根据更改创建新的提交。与<strong class="jz iu">应用</strong>不同，它不仅仅用于预览更改。git am 将创建新的提交。</p><p id="1470" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">如果您想在不使用集中式repo的情况下与其他人共享代码，补丁是很有帮助的。备份你的作品以备后用也很有用。</p><p id="62da" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">感谢你的阅读，希望你学到了新的东西:)</p><p id="3cee" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated"><strong class="jz iu">你可以在这里找到我的其他git相关文章</strong></p><pre class="lo lp lq lr gt ls lt lu lv aw lw bi"><span id="d43b" class="kv kw it lt b gy lx ly l lz ma">1. <a class="ae mk" rel="noopener ugc nofollow" target="_blank" href="/how-to-use-git-stash-effectively-d4e04870cc2b">How to use git stash effectively</a></span><span id="3483" class="kv kw it lt b gy ml ly l lz ma">2. <a class="ae mk" rel="noopener ugc nofollow" target="_blank" href="/how-to-use-git-blame-effectively-6228f3f7da5d">How to use git blame effectively</a></span><span id="dcfa" class="kv kw it lt b gy ml ly l lz ma">3. <a class="ae mk" rel="noopener ugc nofollow" target="_blank" href="/how-to-squash-git-commits-9a095c1bc1fc">How to squash git commits</a></span><span id="90a7" class="kv kw it lt b gy ml ly l lz ma">4. <a class="ae mk" rel="noopener ugc nofollow" target="_blank" href="/how-to-rewrite-the-latest-commit-with-git-amend-48a8d5f27758">How to rewrite the latest commit with git amend</a></span><span id="0fca" class="kv kw it lt b gy ml ly l lz ma">5. <a class="ae mk" rel="noopener ugc nofollow" target="_blank" href="/useful-tricks-you-might-not-know-about-git-log-ed5ac32625ef">Useful tricks you might not know about git log</a></span><span id="15fe" class="kv kw it lt b gy ml ly l lz ma">6. <a class="ae mk" rel="noopener ugc nofollow" target="_blank" href="/how-git-revert-works-9b87b8b03dd3">How git revert works</a></span><span id="7ac4" class="kv kw it lt b gy ml ly l lz ma">7. <a class="ae mk" rel="noopener ugc nofollow" target="_blank" href="/what-is-git-cherry-pick-and-how-to-use-it-effectively-665247192442">How git cherry-pick works and how to use it effectively</a></span><span id="91c6" class="kv kw it lt b gy ml ly l lz ma">8. <a class="ae mk" rel="noopener ugc nofollow" target="_blank" href="/automate-repetitive-tasks-with-custom-git-commands-76a4b71d262f">Automate repetitive tasks in Git</a></span><span id="a631" class="kv kw it lt b gy ml ly l lz ma">9. <a class="ae mk" rel="noopener ugc nofollow" target="_blank" href="/how-to-use-git-fetch-and-git-pull-effectively-c6a4becfbc16">Useful tricks of git fetch and git pull</a></span><span id="86ea" class="kv kw it lt b gy ml ly l lz ma">10. <a class="ae mk" href="https://medium.com/@srebalaji/a-very-basic-intro-of-git-b9cab0e64153" rel="noopener">A very basic intro of Git</a></span></pre><blockquote class="mm mn mo"><p id="1890" class="jx jy mp jz b ka kb kc kd ke kf kg kh mq kj kk kl mr kn ko kp ms kr ks kt ku im bi translated">如果你已经来了这么久，那么我想你会对Git非常感兴趣。你可以订阅我的时事通讯<a class="ae mk" href="https://gitbetter.substack.com/" rel="noopener ugc nofollow" target="_blank"> GitBetter </a>来获得Git的技巧、提示和高级主题。</p></blockquote></div></div>    
</body>
</html>