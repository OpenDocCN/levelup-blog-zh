<html>
<head>
<title>Usage of Python map and reduce</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python地图和reduce的使用</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/average-length-of-words-3a070878b0b8?source=collection_archive---------12-----------------------#2022-11-29">https://levelup.gitconnected.com/average-length-of-words-3a070878b0b8?source=collection_archive---------12-----------------------#2022-11-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="9bc2" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated"><em class="kf">测试您的Python技能，使用map和reduce函数计算一个句子中单词的长度，并将其聚合以找到总长度</em></h2></div><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi kg"><img src="../Images/cfbc54dc6b6fa45d8524a5ac2491cff3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Dm_GErRGD2GYr8m_"/></div></div><figcaption class="ks kt gj gh gi ku kv bd b be z dk translated">由<a class="ae kw" href="https://unsplash.com/@alexpadurariu?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Alex Padurariu </a>在<a class="ae kw" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="cbd0" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">本文展示了Python map和reduce函数的用法。这是通过展示map和reduce如何用于计算句子中单词的平均长度来实现的。</p><p id="e7d3" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">节目中用的句子是“我看见猫和老鼠了！”。</p><p id="388c" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">这个句子有6个单词。除了感叹号，单词的总长度是18个——我(1)看见(3)猫(3)和(3)老鼠！(5).因此，平均长度应计算为3，即18/6。让我们看看它是如何完成的。</p><p id="3133" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">程序从输入句子开始。</p><pre class="kh ki kj kk gt lt lu lv bn lw lx bi"><span id="d206" class="ly lz iq lu b be ma mb l mc md">sentence = 'I see the cat and mouse!'<br/>print('The sentence is \'{}\' and object type is {}'.format(sentence, type(sentence))</span></pre><pre class="me lt lu lv bn lw lx bi"><span id="8021" class="ly lz iq lu b be ma mb l mc md">The sentence is 'I see the cat and mouse!' and object type is &lt;class 'str'&gt;</span></pre><p id="f2a3" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">接下来，特殊字符喜欢！从存储在列表中的句子和单词中删除。</p><pre class="kh ki kj kk gt lt lu lv bn lw lx bi"><span id="2b4c" class="ly lz iq lu b be ma mb l mc md">import re<br/>words = re.split('\s', re.sub('[\.\?!,:;\'\-\{\}\[\]\(\)]{1}', '', sentence))<br/>print('The words in the sentence are {} and object type is {}'.format(words, type(words)))</span></pre><pre class="me lt lu lv bn lw lx bi"><span id="1154" class="ly lz iq lu b be ma mb l mf md">The words in the sentence are ['I', 'see', 'the', 'cat', 'and', 'mouse'] and object type is &lt;class 'list'&gt;</span></pre><p id="b87c" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">接下来，使用map函数计算单词长度，然后将输出存储在一个列表中</p><pre class="kh ki kj kk gt lt lu lv bn lw lx bi"><span id="a443" class="ly lz iq lu b be ma mb l mc md">word_lens = list(map(lambda word: len(word), words))<br/>print('The word lengths are {}'.format(word_lens))</span></pre><pre class="me lt lu lv bn lw lx bi"><span id="60f7" class="ly lz iq lu b be ma mb l mf md">The word lengths are [1, 3, 3, 3, 3, 5]</span></pre><p id="6333" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">接下来，使用reduce函数对单词长度求和</p><pre class="kh ki kj kk gt lt lu lv bn lw lx bi"><span id="59a2" class="ly lz iq lu b be ma mb l mc md">import functools<br/>tot_len = functools.reduce(lambda a, b: a + b, word_lens)<br/>print('The total length is {}'.format(tot_len))</span></pre><pre class="me lt lu lv bn lw lx bi"><span id="d7df" class="ly lz iq lu b be ma mb l mf md">The total length is 18</span></pre><p id="8f3e" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">或者，可以用一行代码调用上面的map和reduce</p><pre class="kh ki kj kk gt lt lu lv bn lw lx bi"><span id="1a13" class="ly lz iq lu b be ma mb l mc md">tot_len = functools.reduce(lambda a, b: a + b, list(map(lambda word: len(word), words)))<br/>print('The total length is {}'.format(tot_len))</span></pre><pre class="me lt lu lv bn lw lx bi"><span id="f862" class="ly lz iq lu b be ma mb l mf md">The total length is 18</span></pre><p id="114a" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">最后，计算句子中单词的平均长度</p><pre class="kh ki kj kk gt lt lu lv bn lw lx bi"><span id="a4f7" class="ly lz iq lu b be ma mb l mc md">print('Average word length is: {}'.format(round(tot_len / len(words)*1.0, 2)))</span></pre><pre class="me lt lu lv bn lw lx bi"><span id="9a18" class="ly lz iq lu b be ma mb l mf md">Average word length is: 3.0</span></pre><p id="f4b7" class="pw-post-body-paragraph kx ky iq kz b la lb jr lc ld le ju lf lg lh li lj lk ll lm ln lo lp lq lr ls ij bi translated">编码快乐！</p></div></div>    
</body>
</html>