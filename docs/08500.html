<html>
<head>
<title>Docker Commands Cookbook</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Docker命令食谱</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/docker-commands-cookbook-959bfb8261f4?source=collection_archive---------23-----------------------#2021-05-06">https://levelup.gitconnected.com/docker-commands-cookbook-959bfb8261f4?source=collection_archive---------23-----------------------#2021-05-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="3823" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">给初学者的码头烹饪书</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/a9f0d783ff1e31ec5367257d4c129000.png" data-original-src="https://miro.medium.com/v2/resize:fit:1202/format:webp/0*pM1C_-Nd-qSNxuIe.png"/></div><figcaption class="kq kr gj gh gi ks kt bd b be z dk translated"><a class="ae ku" href="https://www.underworldcode.org/content/images/size/w600/2020/08/Moby-logo-1.png" rel="noopener ugc nofollow" target="_blank">黑社会地球动力学社团</a></figcaption></figure><p id="78e1" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">获取所有Docker命令的列表:</p><pre class="kj kk kl km gt lr ls lt lu aw lv bi"><span id="f698" class="lw lx it ls b gy ly lz l ma mb">docker -h</span></pre><h1 id="4597" class="mc lx it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">管理命令:</h1><ul class=""><li id="8754" class="mt mu it kx b ky mv lb mw le mx li my lm mz lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">builder</code>管理构建</li><li id="d07a" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">config</code>管理Docker配置</li><li id="25cb" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">container</code>管理集装箱</li><li id="58e3" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">engine</code>管理docker引擎</li><li id="b111" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">image</code>管理图像</li><li id="19e6" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">network</code>管理网络</li><li id="6cad" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">node</code>管理群节点</li><li id="9062" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">plugin</code>管理插件</li><li id="02a7" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">secret</code>管理码头工人机密</li><li id="cec6" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">service</code>管理服务</li><li id="138e" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">stack</code>管理Docker堆栈</li><li id="c3ed" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">swarm</code>管理蜂群</li><li id="2e49" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">system</code>管理码头工人</li><li id="8de9" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">trust</code>管理对Docker图像的信任</li><li id="b677" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">volume</code>管理卷</li></ul><h1 id="fd59" class="mc lx it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated"><code class="fe ne nf ng ls b">docker image</code></h1><ul class=""><li id="43d8" class="mt mu it kx b ky mv lb mw le mx li my lm mz lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">build</code>从dockerfile文件构建映像</li><li id="bef5" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">history</code>显示图像的历史</li><li id="48a6" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">import</code>从tarball导入内容以创建文件系统映像</li><li id="5c8e" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">inspect</code>在一个或多个图像上显示详细信息</li><li id="66be" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">load</code>从tar文件或标准输入中加载图像</li><li id="e411" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">ls</code>列表图片</li><li id="aeb2" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">prune</code>删除未使用的图像</li><li id="3be6" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">pull</code>从注册表中提取图像或存储库</li><li id="a9db" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">push</code>将图像或存储库推送到注册表</li><li id="c58d" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">rm</code>删除一个或多个图像</li><li id="5dcc" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">save</code>将一个或多个图像保存到一个tar文件中(默认情况下传输到标准输出)</li><li id="a588" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">tag</code>创建一个引用源图像的标记目标图像</li></ul><h1 id="ae95" class="mc lx it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated"><code class="fe ne nf ng ls b">docker container</code></h1><ul class=""><li id="28bc" class="mt mu it kx b ky mv lb mw le mx li my lm mz lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">attach</code>将本地标准输入、输出和错误流附加到正在运行的容器中</li><li id="2695" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">commit</code>根据容器的更改创建新图像</li><li id="05af" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">cp</code>在容器和本地文件系统之间复制文件/文件夹</li><li id="4d0b" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">create</code>创建新的容器</li><li id="fdda" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">diff</code>检查容器文件系统中文件或目录的变化</li><li id="a65b" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">exec</code>在运行容器中运行命令</li><li id="dae5" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated">将容器的文件系统导出为tar归档文件</li><li id="6eac" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">inspect</code>显示一个或多个容器的详细信息</li><li id="54f8" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">kill</code>杀死一个或多个正在运行的容器</li><li id="8014" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">logs</code>取出集装箱中的原木</li><li id="cfcc" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">ls</code>列出容器</li><li id="b75f" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">pause</code>暂停一个或多个容器中的所有流程</li><li id="74cb" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">port</code>列出端口映射或容器的特定映射</li><li id="3e38" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">prune</code>移除所有停止的容器</li><li id="d4d7" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">rename</code>重命名容器</li><li id="6c2c" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">restart</code>重启一个或多个容器</li><li id="634e" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">rm</code>移除一个或多个容器</li><li id="425f" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">run</code>在新容器中运行命令</li><li id="6267" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">start</code>启动一个或多个停止的容器</li><li id="1191" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">stats</code>显示容器资源使用统计的实时流</li><li id="5702" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">stop</code>停止一个或多个运行中的容器</li><li id="55b5" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">top</code>显示容器的运行过程</li><li id="5a81" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">unpause</code>取消暂停一个或多个容器中的所有进程</li><li id="8e25" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">update</code>更新一个或多个容器的配置</li><li id="7f2d" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">wait</code>阻塞直到一个或多个集装箱停止，然后打印它们的退出代码</li></ul><h1 id="4b2f" class="mc lx it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated"><code class="fe ne nf ng ls b">docker container run</code></h1><ul class=""><li id="f9d3" class="mt mu it kx b ky mv lb mw le mx li my lm mz lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">--help</code>打印用法</li><li id="55d9" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">--rm</code>退出时自动移除容器</li><li id="52eb" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">-d</code>、<code class="fe ne nf ng ls b">--detach</code>后台运行容器并打印容器ID</li><li id="103b" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">-i</code>，<code class="fe ne nf ng ls b">--interactive</code>保持STDIN打开，即使没有连接</li><li id="2d76" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">--name string</code>给容器指定一个名称</li><li id="c3ae" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">-p</code>，<code class="fe ne nf ng ls b">--publish list</code>向主机发布容器的端口</li><li id="1fb8" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">-t</code>、<code class="fe ne nf ng ls b">--tty</code>分配一个伪TTY</li><li id="7056" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">-v</code>、<code class="fe ne nf ng ls b">--volume list</code>挂载卷(挂载的绑定类型)</li><li id="4ae1" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">--mount mount</code>将文件系统挂载到容器</li><li id="2d93" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">--network string</code>将容器连接到网络(默认为“默认”)</li></ul><p id="4079" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">创建一个容器并附加到它:</p><pre class="kj kk kl km gt lr ls lt lu aw lv bi"><span id="0fef" class="lw lx it ls b gy ly lz l ma mb">docker container run -it busybox</span></pre><p id="5548" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">创建一个容器并在后台运行它:</p><pre class="kj kk kl km gt lr ls lt lu aw lv bi"><span id="5a27" class="lw lx it ls b gy ly lz l ma mb">docker container run -d nginx</span></pre><p id="539b" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">创建一个您命名的容器，并在后台运行它:</p><pre class="kj kk kl km gt lr ls lt lu aw lv bi"><span id="a3d1" class="lw lx it ls b gy ly lz l ma mb">docker container run -d -name myContainer busybox</span></pre><h1 id="a7ae" class="mc lx it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">公开和发布容器端口</h1><p id="de7d" class="pw-post-body-paragraph kv kw it kx b ky mv ju la lb mw jx ld le nm lg lh li nn lk ll lm no lo lp lq im bi translated">如何公开容器上的端口，以及如何发布它们。</p><h1 id="ef7f" class="mc lx it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">暴露:</h1><ul class=""><li id="2c5a" class="mt mu it kx b ky mv lb mw le mx li my lm mz lq na nb nc nd bi translated">公开一个端口或一系列端口</li><li id="35ef" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated">这不会发布端口</li><li id="3dbb" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated">使用<code class="fe ne nf ng ls b">--expose [PORT]</code></li></ul><pre class="kj kk kl km gt lr ls lt lu aw lv bi"><span id="394b" class="lw lx it ls b gy ly lz l ma mb">docker container run --expose 1234 [IMAGE]</span></pre><h1 id="5255" class="mc lx it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">发布:</h1><ul class=""><li id="b853" class="mt mu it kx b ky mv lb mw le mx li my lm mz lq na nb nc nd bi translated">将容器的端口映射到主机的端口</li><li id="fc1e" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">-p</code>或<code class="fe ne nf ng ls b">--publish</code>向主机发布容器的端口</li><li id="d838" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">-P</code>或<code class="fe ne nf ng ls b">--publish-all</code>将所有暴露的端口发布给随机端口</li></ul><pre class="kj kk kl km gt lr ls lt lu aw lv bi"><span id="58ce" class="lw lx it ls b gy ly lz l ma mb">docker container run -p [HOST_PORT]:[CONTAINER_PORT] [IMAGE]</span><span id="b672" class="lw lx it ls b gy np lz l ma mb">docker container run -p [HOST_PORT]:[CONTAINER_PORT]/tcp -p [HOST_PORT]:[CONTAINER_PORT]/udp [IMAGE]</span><span id="c6d7" class="lw lx it ls b gy np lz l ma mb">docker container run -P</span></pre><p id="f6a1" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">列出容器的所有端口映射或特定映射:</p><pre class="kj kk kl km gt lr ls lt lu aw lv bi"><span id="a9d3" class="lw lx it ls b gy ly lz l ma mb">docker container port [Container_NAME]</span></pre><h1 id="ef39" class="mc lx it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">执行容器命令</h1><p id="0d52" class="pw-post-body-paragraph kv kw it kx b ky mv ju la lb mw jx ld le nm lg lh li nn lk ll lm no lo lp lq im bi translated">让我们看看在容器上执行命令的三种不同方式。</p><h2 id="8635" class="lw lx it bd md nq nr dn mh ns nt dp ml le nu nv mn li nw nx mp lm ny nz mr oa bi translated">执行命令:</h2><ul class=""><li id="063c" class="mt mu it kx b ky mv lb mw le mx li my lm mz lq na nb nc nd bi translated">Dockerfile文件</li><li id="e98f" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated">在码头运行期间</li><li id="fbcd" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated">使用exec命令</li></ul><p id="cf9a" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">命令可以是:</p><ul class=""><li id="2a89" class="mt mu it kx b ky kz lb lc le ob li oc lm od lq na nb nc nd bi translated">一个和完成命令</li><li id="f980" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated">长时间运行的命令</li></ul><p id="087d" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">使用命令启动容器:</p><pre class="kj kk kl km gt lr ls lt lu aw lv bi"><span id="b34b" class="lw lx it ls b gy ly lz l ma mb">docker container run [IMAGE] [CMD]</span></pre><p id="6e73" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">在容器上执行命令:</p><pre class="kj kk kl km gt lr ls lt lu aw lv bi"><span id="013e" class="lw lx it ls b gy ly lz l ma mb">docker container exec -it [NAME] [CMD]</span></pre><p id="f5be" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">示例:</p><pre class="kj kk kl km gt lr ls lt lu aw lv bi"><span id="a911" class="lw lx it ls b gy ly lz l ma mb">docker container run -d -p 8080:80 nginx docker container ps docker container exec -it [NAME] /bin/bash docker container exec -it [NAME] ls /usr/share/nginx/html/</span></pre><h1 id="7152" class="mc lx it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">音量命令</h1><p id="0867" class="pw-post-body-paragraph kv kw it kx b ky mv ju la lb mw jx ld le nm lg lh li nn lk ll lm no lo lp lq im bi translated">列出所有Docker音量命令:</p><pre class="kj kk kl km gt lr ls lt lu aw lv bi"><span id="ab71" class="lw lx it ls b gy ly lz l ma mb">docker volume -h</span></pre><ul class=""><li id="44f9" class="mt mu it kx b ky kz lb lc le ob li oc lm od lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">create</code>:创建一个卷。</li><li id="9e0d" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">inspect</code>:显示一个或多个卷的详细信息。</li><li id="0bad" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">ls</code>:列出卷。</li><li id="2676" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">prune</code>:移除所有未使用的本地卷。</li><li id="dbc6" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">rm</code>:移除一个或多个卷。</li></ul><p id="f204" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">创建新卷:</p><pre class="kj kk kl km gt lr ls lt lu aw lv bi"><span id="dd56" class="lw lx it ls b gy ly lz l ma mb">docker volume create test-volume</span></pre><p id="de25" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">创建卷时获取可用标志:</p><pre class="kj kk kl km gt lr ls lt lu aw lv bi"><span id="2fbd" class="lw lx it ls b gy ly lz l ma mb">docker volume create -h</span></pre><p id="ca0d" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">检查卷:</p><pre class="kj kk kl km gt lr ls lt lu aw lv bi"><span id="42bd" class="lw lx it ls b gy ly lz l ma mb">docker volume inspect test-volume</span></pre><p id="bdf2" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">删除卷:</p><pre class="kj kk kl km gt lr ls lt lu aw lv bi"><span id="123f" class="lw lx it ls b gy ly lz l ma mb">docker volume rm test-volume</span></pre><p id="ac95" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">删除所有未使用的卷:</p><pre class="kj kk kl km gt lr ls lt lu aw lv bi"><span id="e7b2" class="lw lx it ls b gy ly lz l ma mb">docker volume prune</span></pre><h1 id="62e5" class="mc lx it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">绑定安装</h1><p id="656f" class="pw-post-body-paragraph kv kw it kx b ky mv ju la lb mw jx ld le nm lg lh li nn lk ll lm no lo lp lq im bi translated">绑定挂载从Docker早期就已经出现了。与卷相比，它们的功能有限。使用绑定装载，主机上的文件或目录被装载到容器中。</p><p id="ca52" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">卷使用在主机上Docker的存储目录中创建的新目录，Docker管理该目录的内容。</p><p id="2e11" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated"><strong class="kx iu">使用挂载标志:</strong></p><pre class="kj kk kl km gt lr ls lt lu aw lv bi"><span id="87f7" class="lw lx it ls b gy ly lz l ma mb">docker container run -d --name &lt;NAME&gt; --mount type=bind, source=&lt;SOURCE&gt;, target=&lt;TARGET&gt; &lt;IMAGE&gt;</span></pre><p id="298f" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated"><strong class="kx iu">使用音量标志:</strong></p><pre class="kj kk kl km gt lr ls lt lu aw lv bi"><span id="6eaf" class="lw lx it ls b gy ly lz l ma mb">docker container run -d --name &lt;NAME&gt; -v &lt;SOURCE&gt;:&lt;TARGET&gt; &lt;IMAGE&gt;</span></pre><h1 id="b96a" class="mc lx it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">文档文件</h1><p id="89a8" class="pw-post-body-paragraph kv kw it kx b ky mv ju la lb mw jx ld le nm lg lh li nn lk ll lm no lo lp lq im bi translated"><code class="fe ne nf ng ls b">FROM</code>:初始化新的构建阶段并设置基础映像</p><p id="54b4" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated"><code class="fe ne nf ng ls b">RUN</code>:将执行新图层中的任何命令</p><p id="0c97" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated"><code class="fe ne nf ng ls b">CMD</code>:为执行容器提供默认值。docker文件中只能有一条CMD指令</p><p id="8fa5" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated"><code class="fe ne nf ng ls b">LABEL</code>:向图像添加元数据</p><p id="1d6f" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated"><code class="fe ne nf ng ls b">EXPOSE</code>:通知Docker容器在运行时监听指定的网络端口</p><p id="1739" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated"><code class="fe ne nf ng ls b">ENV</code>:将环境变量<code class="fe ne nf ng ls b">&lt;key&gt;</code>设置为值<code class="fe ne nf ng ls b">&lt;value&gt;</code></p><p id="99b1" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated"><code class="fe ne nf ng ls b">ADD</code>:从<code class="fe ne nf ng ls b">&lt;src&gt;</code>复制新文件、目录或远程文件URL，并将其添加到路径<code class="fe ne nf ng ls b">&lt;dest&gt;</code>的镜像文件系统中。</p><p id="69f6" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated"><code class="fe ne nf ng ls b">COPY</code>:从<code class="fe ne nf ng ls b">&lt;src&gt;</code>复制新的文件或目录，并将它们添加到路径<code class="fe ne nf ng ls b">&lt;dest&gt;</code>的容器的文件系统中。</p><p id="609d" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated"><code class="fe ne nf ng ls b">ENTRYPOINT</code>:允许配置将作为可执行文件运行的容器</p><p id="b889" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated"><code class="fe ne nf ng ls b">VOLUME</code>:创建具有指定名称的挂载点，并将其标记为保存来自本机主机或其他容器的外部挂载卷</p><p id="49e8" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated"><code class="fe ne nf ng ls b">USER</code>:设置用户名(或UID)和可选的用户组(或GID ),以在运行映像时使用，并用于docker文件中其后的任何<code class="fe ne nf ng ls b">RUN</code>、<code class="fe ne nf ng ls b">CMD</code>和<code class="fe ne nf ng ls b">ENTRYPOINT</code>指令</p><p id="105c" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated"><code class="fe ne nf ng ls b">WORKDIR</code>:为Dockerfile中跟随其后的<code class="fe ne nf ng ls b">RUN</code>、<code class="fe ne nf ng ls b">CMD</code>、<code class="fe ne nf ng ls b">ENTRYPOINT</code>、<code class="fe ne nf ng ls b">COPY</code>和<code class="fe ne nf ng ls b">ADD</code>指令设置工作目录</p><p id="a05a" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated"><code class="fe ne nf ng ls b">ARG</code>:定义一个变量，用户可以在构建时用<code class="fe ne nf ng ls b">docker build</code>命令传递给构建器，使用<code class="fe ne nf ng ls b">--build-arg &lt;varname&gt;=&lt;value&gt;</code>标志</p><p id="6db7" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated"><code class="fe ne nf ng ls b">ONBUILD</code>:当图像用作另一个构建的基础时，向图像添加将在以后执行的触发指令</p><p id="d812" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated"><code class="fe ne nf ng ls b">HEALTHCHECK</code>:告诉码头工人如何测试一个集装箱，以检查它是否还在工作</p><p id="30f8" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated"><code class="fe ne nf ng ls b">SHELL</code>:允许用于命令外壳形式的默认外壳被覆盖</p><h1 id="9d6c" class="mc lx it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">如何从Dockerfie构建图像:</h1><pre class="kj kk kl km gt lr ls lt lu aw lv bi"><span id="8e4d" class="lw lx it ls b gy ly lz l ma mb">docker image build -t [NAME]:[TAG] .</span></pre><p id="cc0f" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated">有用的标志:</p><ul class=""><li id="8b6b" class="mt mu it kx b ky kz lb lc le ob li oc lm od lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">-f</code>、<code class="fe ne nf ng ls b">--file string</code>:这是Dockerfile文件的名称(默认为<code class="fe ne nf ng ls b">PATH/Dockerfile</code>)。</li><li id="5e40" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">--force-rm</code>:务必取出中间容器。</li><li id="1d9f" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">--label list</code>:设置图像的元数据。</li><li id="715a" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">--rm</code>:成功构建后移除中间容器(默认为<code class="fe ne nf ng ls b">true</code>)。</li><li id="6a00" class="mt mu it kx b ky nh lb ni le nj li nk lm nl lq na nb nc nd bi translated"><code class="fe ne nf ng ls b">--ulimit ulimit</code>:设置<code class="fe ne nf ng ls b">ulimit</code>选项(默认为[])。</li></ul><h1 id="c7b8" class="mc lx it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">使用URL构建图像:</h1><pre class="kj kk kl km gt lr ls lt lu aw lv bi"><span id="43c8" class="lw lx it ls b gy ly lz l ma mb">docker image build -t &lt;NAME&gt;:&lt;TAG&gt; &lt;GIT_URL&gt;#&lt;REF&gt;</span><span id="584b" class="lw lx it ls b gy np lz l ma mb">docker image build -t &lt;NAME&gt;:&lt;TAG&gt; &lt;GIT_URL&gt;#:&lt;DIRECTORY&gt;</span><span id="1cff" class="lw lx it ls b gy np lz l ma mb">docker image build -t &lt;NAME&gt;:&lt;TAG&gt; &lt;GIT_URL&gt;#&lt;REF&gt;:&lt;DIRECTORY&gt;</span></pre><h1 id="9995" class="mc lx it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">从zip文件构建图像:</h1><pre class="kj kk kl km gt lr ls lt lu aw lv bi"><span id="6933" class="lw lx it ls b gy ly lz l ma mb">docker image build -t &lt;NAME&gt;:&lt;TAG&gt; - &lt; &lt;FILE&gt;.tar.gz</span></pre><h1 id="b5b8" class="mc lx it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">在Docker Hub上分发图像</h1><p id="a69f" class="pw-post-body-paragraph kv kw it kx b ky mv ju la lb mw jx ld le nm lg lh li nn lk ll lm no lo lp lq im bi translated"><a class="ae ku" href="https://hub.docker.com/" rel="noopener ugc nofollow" target="_blank">创建Docker Hub账户</a></p><h1 id="aa85" class="mc lx it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">码头推送:</h1><pre class="kj kk kl km gt lr ls lt lu aw lv bi"><span id="5250" class="lw lx it ls b gy ly lz l ma mb">docker image push &lt;USERNAME&gt;/&lt;IMAGE_NAME&gt;:&lt;TAG&gt;</span></pre><h1 id="6a3f" class="mc lx it bd md me mf mg mh mi mj mk ml jz mm ka mn kc mo kd mp kf mq kg mr ms bi translated">参考资料:</h1><p id="f646" class="pw-post-body-paragraph kv kw it kx b ky mv ju la lb mw jx ld le nm lg lh li nn lk ll lm no lo lp lq im bi translated">[1] <a class="ae ku" href="https://linuxacademy.com/cp/courses/lesson/course/3823/lesson/1/module/314" rel="noopener ugc nofollow" target="_blank"> Linux </a> <a class="ae ku" href="https://linuxacademy.com/cp/modules/view/id/314" rel="noopener ugc nofollow" target="_blank"> </a> <a class="ae ku" href="https://linuxacademy.com/cp/courses/lesson/course/3823/lesson/1/module/314" rel="noopener ugc nofollow" target="_blank">学院</a></p></div><div class="ab cl oe of hx og" role="separator"><span class="oh bw bk oi oj ok"/><span class="oh bw bk oi oj ok"/><span class="oh bw bk oi oj"/></div><div class="im in io ip iq"><p id="0a2c" class="pw-post-body-paragraph kv kw it kx b ky kz ju la lb lc jx ld le lf lg lh li lj lk ll lm ln lo lp lq im bi translated"><em class="ol">原载于</em><a class="ae ku" href="https://predictivehacks.com/?all-tips=docker-commands-cookbook" rel="noopener ugc nofollow" target="_blank"><em class="ol">https://predictivehacks.com</em></a><em class="ol">。</em></p></div></div>    
</body>
</html>