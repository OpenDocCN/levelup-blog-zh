<html>
<head>
<title>Build time travel debugging in Redux from scratch</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ä»å¤´å¼€å§‹åœ¨Reduxä¸­æ„å»ºæ—¶é—´æ—…è¡Œè°ƒè¯•</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://levelup.gitconnected.com/build-time-travel-debugging-in-redux-from-scratch-665fea8fc6cc?source=collection_archive---------0-----------------------#2018-05-07">https://levelup.gitconnected.com/build-time-travel-debugging-in-redux-from-scratch-665fea8fc6cc?source=collection_archive---------0-----------------------#2018-05-07</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/5edd54efebebb0c2198582ca55896b1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WoJnfVeCnfT2cGzlsgAjJw.jpeg"/></div></div></figure><p id="66c1" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†ä¸€æ­¥ä¸€æ­¥ä»å¤´å¼€å§‹æ„å»ºæ—¶é—´æ—…è¡Œè°ƒè¯•ã€‚æˆ‘ä»¬å°†é¦–å…ˆä»‹ç»Reduxçš„æ ¸å¿ƒåŸåˆ™ï¼Œä»¥åŠå®ƒä»¬å¦‚ä½•æ”¯æŒæ„å»ºå¦‚æ­¤å¼ºå¤§çš„åŠŸèƒ½ã€‚ç„¶åï¼Œæˆ‘ä»¬å°†ç”¨çº¯JavaScriptæ„å»ºReduxæ ¸å¿ƒåº“å’Œæ—¶é—´æ—…è¡Œè°ƒè¯•ï¼Œå¹¶å°†å…¶è¿æ¥åˆ°ä¸€ä¸ªç®€å•çš„HTMLåº”ç”¨ç¨‹åºï¼Œè€Œä¸ä½¿ç”¨ä»»ä½•Reactã€‚</p><figure class="la lb lc ld gt ju gh gi paragraph-image"><div class="gh gi kz"><img src="../Images/7d142cbc2671e0c8d733e84622a07fbf.png" data-original-src="https://miro.medium.com/v2/resize:fit:712/1*cRt1u7SCt376nCWu_Ae7mA.gif"/></div></figure><h1 id="592e" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">Reduxæ—¶é—´æ—…è¡Œçš„åŸºæœ¬åŸç†</h1><p id="8f5e" class="pw-post-body-paragraph kb kc it kd b ke mc kg kh ki md kk kl km me ko kp kq mf ks kt ku mg kw kx ky im bi translated">æ—¶é—´æ—…è¡Œè°ƒè¯•æŒ‡çš„æ˜¯åœ¨åº”ç”¨ç¨‹åºçš„çŠ¶æ€ä¸­å‰è¿›å’Œåé€€çš„èƒ½åŠ›ï¼Œä½¿å¼€å‘äººå‘˜èƒ½å¤Ÿå‡†ç¡®ç†è§£åœ¨åº”ç”¨ç¨‹åºç”Ÿå‘½å‘¨æœŸçš„ä»»ä½•ä¸€ç‚¹ä¸Šæ­£åœ¨å‘ç”Ÿçš„äº‹æƒ…ã€‚</p><div class="mh mi gp gr mj mk"><a href="https://gitconnected.com/learn/react" rel="noopener  ugc nofollow" target="_blank"><div class="ml ab fo"><div class="mm ab mn cl cj mo"><h2 class="bd iu gy z fp mp fr fs mq fu fw is bi translated">å­¦ä¹ React -æœ€ä½³Reactæ•™ç¨‹(2018) | gitconnected</h2><div class="mr l"><h3 class="bd b gy z fp mp fr fs mq fu fw dk translated">Reactçš„å‰48é—¨è¯¾ç¨‹ã€‚æ•™ç¨‹ç”±å¼€å‘è€…æäº¤å¹¶æŠ•ç¥¨ï¼Œè®©ä½ æ‰¾åˆ°æœ€å¥½çš„ååº”â€¦</h3></div><div class="ms l"><p class="bd b dl z fp mp fr fs mq fu fw dk translated">gitconnected.com</p></div></div><div class="mt l"><div class="mu l mv mw mx mt my jz mk"/></div></div></a></div><p id="d0f5" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">Reduxæ˜¯é€šé‡æ¨¡å¼çš„æ‰©å±•ï¼Œå®ƒå¼ºåˆ¶å•å‘æ•°æ®æµã€‚æ­¤å¤–ï¼ŒReduxä¸ºfluxç†å¿µå¢åŠ äº†3ä¸ªåŸåˆ™ã€‚</p><ol class=""><li id="e1fb" class="mz na it kd b ke kf ki kj km nb kq nc ku nd ky ne nf ng nh bi translated">å›½å®¶çœŸç›¸çš„å•ä¸€æ¥æºã€‚åº”ç”¨ç¨‹åºçš„æ•´ä¸ªçŠ¶æ€å­˜å‚¨åœ¨ä¸€ä¸ªJavaScriptå¯¹è±¡ä¸­ã€‚</li><li id="c6d5" class="mz na it kd b ke ni ki nj km nk kq nl ku nm ky ne nf ng nh bi translated"><strong class="kd iu">çŠ¶æ€ä¸ºåªè¯»</strong>ã€‚è¿™å°±æ˜¯ä¸å˜æ€§çš„æ¦‚å¿µã€‚çŠ¶æ€æ°¸è¿œä¸ä¼šæ”¹å˜ï¼Œä½†æ˜¯æ¯ä¸ªåŠ¨ä½œéƒ½ä¼šç”Ÿæˆä¸€ä¸ªå…¨æ–°çš„çŠ¶æ€å¯¹è±¡ï¼Œå–ä»£æ—§çš„çŠ¶æ€å¯¹è±¡ã€‚</li><li id="f584" class="mz na it kd b ke ni ki nj km nk kq nl ku nm ky ne nf ng nh bi translated"><strong class="kd iu">çº¯åŠŸèƒ½å˜åŒ–</strong>ã€‚è¿™æ„å‘³ç€ä»»ä½•æ—¶å€™äº§ç”Ÿä¸€ä¸ªæ–°çš„çŠ¶æ€ï¼Œå®ƒéƒ½ä¸ä¼šè§¦å‘ä»»ä½•å…¶ä»–å‰¯ä½œç”¨ã€‚</li></ol><p id="4891" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">é€šè¿‡åˆ©ç”¨Reduxåº”ç”¨ç¨‹åºçš„çŠ¶æ€æ˜¯åœ¨è¿™ä¸ªçº¿æ€§ä¸”å¯é¢„æµ‹çš„æ—¶é—´çº¿ä¸­ç”Ÿæˆçš„åŸºæœ¬æ¦‚å¿µï¼Œæ—¶é—´æ—…è¡Œè°ƒè¯•é€šè¿‡å­˜å‚¨æ¯ä¸ªè¢«è§¦å‘çš„åŠ¨ä½œæ‰€ç”Ÿæˆçš„çŠ¶æ€æ ‘çš„å‰¯æœ¬æ¥æ‰©å±•è¿™ä¸ªæ¦‚å¿µã€‚</p><p id="bdde" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">UIå¯ä»¥è¢«è®¤ä¸ºæ˜¯ReduxçŠ¶æ€çš„ä¸€ä¸ªçº¯å‡½æ•°ã€‚æ—¶é—´æ—…è¡Œå…è®¸æˆ‘ä»¬å°†åº”ç”¨ç¨‹åºçš„çŠ¶æ€è®¾ç½®ä¸ºæ‰€éœ€çš„å€¼ï¼Œå¹¶ç”Ÿæˆå°†åœ¨è¿™äº›æ¡ä»¶ä¸‹åˆ›å»ºçš„ç²¾ç¡®UIã€‚è¿™ç§åº”ç”¨ç¨‹åºçš„å¯è§æ€§å’Œé€æ˜æ€§å¯¹äºå¼€å‘äººå‘˜æ¥è¯´æ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„å·¥å…·ï¼Œå¯ä»¥å¸®åŠ©ä»–ä»¬å……åˆ†äº†è§£åº”ç”¨ç¨‹åºå†…éƒ¨å‘ç”Ÿçš„äº‹æƒ…ï¼Œå¹¶æ˜¾è‘—å‡å°‘è°ƒè¯•å·¥ä½œã€‚</p><h1 id="4cd6" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">ä½¿ç”¨Reduxå’Œæ—¶é—´æ—…è¡Œè°ƒè¯•æ„å»ºç®€å•çš„åº”ç”¨ç¨‹åº</h1><p id="c89a" class="pw-post-body-paragraph kb kc it kd b ke mc kg kh ki md kk kl km me ko kp kq mf ks kt ku mg kw kx ky im bi translated">æˆ‘ä»¬å°†æ„å»ºä¸€ä¸ªç®€å•çš„HTMLåº”ç”¨ç¨‹åºï¼Œå®ƒåœ¨å•å‡»æ—¶ç”Ÿæˆä¸€ä¸ªéšæœºçš„èƒŒæ™¯é¢œè‰²ï¼Œå¹¶ä½¿ç”¨Reduxæ¥å­˜å‚¨RGBå€¼ã€‚æˆ‘ä»¬è¿˜å°†åˆ›å»ºä¸€ä¸ªæ—¶é—´æ—…è¡Œæ‰©å±•ï¼Œè¿™å°†å…è®¸æˆ‘ä»¬é‡æ”¾åº”ç”¨ç¨‹åºçš„æ¯ä¸ªçŠ¶æ€ï¼Œå¹¶ç›´è§‚åœ°çœ‹åˆ°æ¯ä¸€æ­¥çš„èƒŒæ™¯å˜åŒ–ã€‚</p><h2 id="045a" class="nn lf it bd lg no np dn lk nq nr dp lo km ns nt ls kq nu nv lw ku nw nx ma ny bi translated">æ„å»ºReduxæ ¸å¿ƒåº“</h2><p id="4da2" class="pw-post-body-paragraph kb kc it kd b ke mc kg kh ki md kk kl km me ko kp kq mf ks kt ku mg kw kx ky im bi translated">å¦‚æœæ‚¨å¯¹æ„å»ºæ—¶é—´æ—…è¡Œè°ƒè¯•æ„Ÿå…´è¶£ï¼Œæˆ‘ä¹Ÿå‡è®¾æ‚¨ç†Ÿæ‚‰Reduxã€‚å¦‚æœä½ æ˜¯Reduxçš„æ–°æ‰‹ï¼Œæˆ–è€…éœ€è¦å¤ä¹ ä¸€ä¸‹æ‚¬æŒ‚ç‰©å’Œå‡é€Ÿå™¨ï¼Œåœ¨ç»§ç»­è¯¦ç»†è§£é‡Šä¹‹å‰ï¼Œè¯·å‚è€ƒæœ¬æ–‡<a class="ae nz" rel="noopener ugc nofollow" target="_blank" href="/learn-redux-by-building-redux-from-scratch-dcbcbd31b0d0?source=user_profile---------8----------------">ä¸­çš„</a>ã€‚åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæ‚¨å°†ä¸€æ­¥ä¸€æ­¥åœ°æ„å»º<code class="fe oa ob oc od b">createStore</code>å’Œreducersã€‚</p><p id="7372" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">Reduxæ ¸å¿ƒåº“æ˜¯<code class="fe oa ob oc od b">createStore</code>å‡½æ•°ã€‚Reduxå­˜å‚¨ç®¡ç†è¡¨ç¤ºåº”ç”¨ç¨‹åºæ•´ä¸ªçŠ¶æ€çš„çŠ¶æ€å¯¹è±¡ï¼Œå¹¶å…¬å¼€è¯»å–å’Œæ›´æ–°çŠ¶æ€æ‰€éœ€çš„æ–¹æ³•ã€‚è°ƒç”¨<code class="fe oa ob oc od b">createStore</code>åˆå§‹åŒ–çŠ¶æ€å¹¶è¿”å›ä¸€ä¸ªåŒ…å«<code class="fe oa ob oc od b">getState()</code>ã€<code class="fe oa ob oc od b">subscribe()</code>å’Œ<code class="fe oa ob oc od b">dispatch()</code>æ–¹æ³•çš„å¯¹è±¡ã€‚</p><p id="eab7" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><code class="fe oa ob oc od b">createStore</code>å‡½æ•°æ¥å—ä¸€ä¸ªå¿…éœ€çš„å‚æ•°ï¼Œå³reducerå‡½æ•°ï¼Œå¹¶ä¸”å¯ä»¥é€‰æ‹©æ¥å—ä¸€ä¸ª<code class="fe oa ob oc od b">initialState</code>å‚æ•°ã€‚<code class="fe oa ob oc od b">createStore</code>çš„å…¨éƒ¨å†…å®¹å¦‚ä¸‹(ç–¯ç‹‚å®ƒæœ‰å¤šå°ï¼Œå¯¹å§ï¼Ÿ):</p><figure class="la lb lc ld gt ju"><div class="bz fp l di"><div class="oe of l"/></div></figure><h2 id="6e32" class="nn lf it bd lg no np dn lk nq nr dp lo km ns nt ls kq nu nv lw ku nw nx ma ny bi translated">å®ç°æ—¶é—´æ—…è¡Œè°ƒè¯•</h2><p id="fd0e" class="pw-post-body-paragraph kb kc it kd b ke mc kg kh ki md kk kl km me ko kp kq mf ks kt ku mg kw kx ky im bi translated">æˆ‘ä»¬å°†é€šè¿‡ä¸ºReduxå­˜å‚¨è®¢é˜…ä¸€ä¸ªæ–°çš„ä¾¦å¬å™¨å¹¶æ‰©å±•å­˜å‚¨çš„åŠŸèƒ½æ¥å®ç°æ—¶é—´æ—…è¡Œã€‚çŠ¶æ€çš„æ¯ä¸€æ¬¡å˜åŒ–éƒ½å°†è¢«æ·»åŠ åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œä¸ºæˆ‘ä»¬æä¾›åº”ç”¨ç¨‹åºçŠ¶æ€çš„æ¯ä¸€æ¬¡å˜åŒ–çš„åŒæ­¥è¡¨ç¤ºã€‚ä¸ºäº†æ¸…æ¥šèµ·è§ï¼Œæˆ‘ä»¬å°†æŠŠçŠ¶æ€åˆ—è¡¨æ‰“å°åˆ°DOMä¸­ã€‚</p><p id="5eab" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">é¦–å…ˆï¼Œæˆ‘ä»¬åˆå§‹åŒ–å†å²ä¸­æ´»åŠ¨çŠ¶æ€çš„æ—¶é—´çº¿å’Œç´¢å¼•(ç¬¬1â€“2è¡Œ)ã€‚æˆ‘ä»¬è¿˜åˆ›å»ºäº†ä¸€ä¸ª<code class="fe oa ob oc od b">saveTimeline</code>å‡½æ•°ï¼Œå®ƒå°†å½“å‰çŠ¶æ€æ·»åŠ åˆ°æ—¶é—´è½´æ•°ç»„ï¼Œå°†çŠ¶æ€æ‰“å°åˆ°DOMï¼Œå¹¶å¢åŠ åº”ç”¨ç¨‹åºæ­£åœ¨å‘ˆç°çš„ç»™å®šçŠ¶æ€æ ‘çš„ç´¢å¼•ã€‚ä¸ºäº†ç¡®ä¿æ•æ‰åˆ°æ¯ä¸ªçŠ¶æ€å˜åŒ–ï¼Œæˆ‘ä»¬è®¢é˜…äº†<code class="fe oa ob oc od b">saveTimeline</code>å‡½æ•°ä½œä¸ºReduxå­˜å‚¨çš„ç›‘å¬å™¨ã€‚</p><pre class="la lb lc ld gt og od oh oi aw oj bi"><span id="6b5b" class="nn lf it od b gy ok ol l om on">const timeline = [];<br/>let activeItem = 0;</span><span id="4d57" class="nn lf it od b gy oo ol l om on">const saveTimeline = () =&gt; {<br/>  timeline.push(store.getState());<br/>  timelineNode.innerHTML = timeline<br/>    .map(item =&gt; JSON.stringify(item))<br/>    .join('&lt;br/&gt;');<br/>  activeItem = timeline.length - 1;<br/>};</span><span id="e19f" class="nn lf it od b gy oo ol l om on">store.subscribe(saveTimeline);</span></pre><p id="fa56" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">æ¥ä¸‹æ¥å‘å•†åº—æ·»åŠ ä¸€ä¸ªæ–°åŠŸèƒ½â€” <code class="fe oa ob oc od b">setState</code>ã€‚è¿™å°†å…è®¸æˆ‘ä»¬å°†ä»»ä½•çŠ¶æ€æ³¨å…¥Reduxå­˜å‚¨ã€‚å½“æˆ‘ä»¬ä½¿ç”¨DOMä¸Šçš„æŒ‰é’®åœ¨çŠ¶æ€é—´è¿›è¡Œæ—¶é—´æ—…è¡Œæ—¶ï¼Œå°†è°ƒç”¨å®ƒï¼Œæˆ‘ä»¬å°†åœ¨ä¸‹ä¸€èŠ‚ä¸­åˆ›å»ºDOMã€‚ä¸‹é¢æ˜¯<code class="fe oa ob oc od b">setState</code>åŠŸèƒ½åœ¨å•†åº—ä¸Šçš„å®ç°ã€‚</p><pre class="la lb lc ld gt og od oh oi aw oj bi"><span id="7381" class="nn lf it od b gy ok ol l om on">// FOR DEBUGGING PURPOSES ONLY<br/>store.setState = desiredState =&gt; {<br/>  store.state = desiredState;</span><span id="9263" class="nn lf it od b gy oo ol l om on">// Assume the debugger is injected last. We don't want to update<br/>// the saved states as we are debugging, so we slice it off.<br/>  const applicationListeners = store.listeners.slice(0, -1);<br/>  applicationListeners.forEach(listener =&gt; listener());<br/>};</span></pre><blockquote class="op oq or"><p id="a377" class="kb kc os kd b ke kf kg kh ki kj kk kl ot kn ko kp ou kr ks kt ov kv kw kx ky im bi translated">è¯·è®°ä½ï¼Œè¿™åªæ˜¯å‡ºäºæ•™è‚²ç›®çš„ã€‚æ‚¨ä¸åº”è¯¥ä»¥è¿™ç§æ–¹å¼æ‰©å±•Reduxå­˜å‚¨æˆ–è®¾ç½®çŠ¶æ€ã€‚</p></blockquote><p id="0194" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">å½“æˆ‘ä»¬åœ¨ä¸‹ä¸€èŠ‚æ„å»ºå®Œæ•´çš„åº”ç”¨ç¨‹åºæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿå°†æ„å»ºDOMã€‚ç°åœ¨ï¼Œä½ æ‰€éœ€è¦çŸ¥é“çš„æ˜¯å°†ä¼šæœ‰ä¸€ä¸ªâ€œä¸Šä¸€é¡µâ€å’Œä¸€ä¸ªâ€œä¸‹ä¸€é¡µâ€æŒ‰é’®æ¥å¯åŠ¨æ—¶é—´æ—…è¡Œã€‚è¿™äº›æŒ‰é’®å°†æ›´æ–°æ­£åœ¨æ˜¾ç¤ºçš„æ—¶é—´çº¿çŠ¶æ€çš„æ´»åŠ¨ç´¢å¼•ï¼Œä½¿æˆ‘ä»¬èƒ½å¤Ÿè½»æ¾åœ°åœ¨çŠ¶æ€å˜åŒ–ä¸­å‘å‰å’Œå‘åç§»åŠ¨ã€‚ä¸‹é¢æ˜¾ç¤ºäº†æˆ‘ä»¬å¦‚ä½•æ³¨å†Œäº‹ä»¶ä¾¦å¬å™¨æ¥å¯¼èˆªæ—¶é—´è½´:</p><pre class="la lb lc ld gt og od oh oi aw oj bi"><span id="ba21" class="nn lf it od b gy ok ol l om on">const previous = document.getElementById('previous');<br/>const next = document.getElementById('next');</span><span id="809e" class="nn lf it od b gy oo ol l om on">previous.addEventListener('click', e =&gt; {<br/>  e.preventDefault();<br/>  e.stopPropagation();</span><span id="18ba" class="nn lf it od b gy oo ol l om on">  let index = activeItem - 1;<br/>  index = index &lt;= 0 ? 0 : index;<br/>  activeItem = index;</span><span id="4831" class="nn lf it od b gy oo ol l om on">  const desiredState = timeline[index];<br/>  store.setState(desiredState);<br/>});</span><span id="580a" class="nn lf it od b gy oo ol l om on">next.addEventListener('click', e =&gt; {<br/>  e.preventDefault();<br/>  e.stopPropagation();</span><span id="4c3c" class="nn lf it od b gy oo ol l om on">  let index = activeItem + 1;<br/>  index = index &gt;= timeline.length - 1 ? <br/>    timeline.length - 1 :   index;<br/>  activeItem = index;</span><span id="8e9a" class="nn lf it od b gy oo ol l om on">  const desiredState = timeline[index];<br/>  store.setState(desiredState);<br/>});</span></pre><p id="f6e8" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">å°†æ‰€æœ‰è¿™äº›æ”¾åœ¨ä¸€èµ·ä¼šäº§ç”Ÿä¸‹é¢çš„ä»£ç æ¥åˆ›å»ºæ—¶é—´æ—…è¡Œè°ƒè¯•ã€‚</p><figure class="la lb lc ld gt ju"><div class="bz fp l di"><div class="oe of l"/></div></figure><h2 id="f05a" class="nn lf it bd lg no np dn lk nq nr dp lo km ns nt ls kq nu nv lw ku nw nx ma ny bi translated">ä½¿ç”¨æ—¶é—´æ—…è¡Œè°ƒè¯•æ„å»ºåº”ç”¨ç¨‹åº</h2><p id="7180" class="pw-post-body-paragraph kb kc it kd b ke mc kg kh ki md kk kl km me ko kp kq mf ks kt ku mg kw kx ky im bi translated">æˆ‘ä»¬ç°åœ¨å°†åˆ›å»ºä¸€ä¸ªå¯è§†åŒ–è¡¨ç¤ºæ¥ç†è§£æ—¶é—´æ—…è¡Œè°ƒè¯•ã€‚æˆ‘ä»¬å‘æ–‡æ¡£ä¸»ä½“æ·»åŠ äº†ä¸€ä¸ªäº‹ä»¶ç›‘å¬å™¨ï¼Œå®ƒå°†ç”Ÿæˆä¸‰ä¸ªä»‹äº0â€“255ä¹‹é—´çš„éšæœºæ•°ï¼Œå¹¶å°†å®ƒä»¬ä¿å­˜ä¸ºReduxå­˜å‚¨ä¸­çš„<code class="fe oa ob oc od b">r</code>ã€<code class="fe oa ob oc od b">g</code>å’Œ<code class="fe oa ob oc od b">b</code>ã€‚å•†åº—è®¢é˜…çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œå®ƒå°†æ›´æ–°èƒŒæ™¯é¢œè‰²ï¼Œå¹¶åœ¨å±å¹•ä¸Šæ˜¾ç¤ºå½“å‰çš„RGBå€¼ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬çš„æ—¶é—´æ—…è¡Œè°ƒè¯•å™¨å°†è®¢é˜…çŠ¶æ€æ›´æ”¹ï¼Œå¹¶å°†æ¯ä¸ªæ›´æ”¹æ·»åŠ åˆ°æ—¶é—´çº¿ã€‚</p><figure class="la lb lc ld gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ow"><img src="../Images/aced8a676f6e35c5f7a618a71ff5fd7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TLAWV1AQAnbMj9Ravbgq7A.png"/></div></div></figure><div class="mh mi gp gr mj mk"><a href="https://gitconnected.com/portfolio-api" rel="noopener  ugc nofollow" target="_blank"><div class="ml ab fo"><div class="mm ab mn cl cj mo"><h2 class="bd iu gy z fp mp fr fs mq fu fw is bi translated">ç»„åˆAPI â€”è½»æ¾å‘å±•æ‚¨çš„ç¼–ç äº‹ä¸š| gitconnected</h2><div class="mr l"><h3 class="bd b gy z fp mp fr fs mq fu fw dk translated">æ¶ˆé™¤åœ¨æ¯ä¸ªå•ç‹¬ä½ç½®æ‰‹åŠ¨æ›´æ–°æ‚¨çš„è¯¦ç»†ä¿¡æ¯çš„ç—›è‹¦ã€‚åªéœ€åœ¨æ‚¨çš„ä¸­æ›´æ”¹ä¸€æ¬¡æ•°æ®â€¦</h3></div><div class="ms l"><p class="bd b dl z fp mp fr fs mq fu fw dk translated">gitconnected.com</p></div></div><div class="mt l"><div class="ox l mv mw mx mt my jz mk"/></div></div></a></div><figure class="la lb lc ld gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ow"><img src="../Images/aced8a676f6e35c5f7a618a71ff5fd7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TLAWV1AQAnbMj9Ravbgq7A.png"/></div></div></figure><p id="5fc9" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">æˆ‘ä»¬ä»å¦‚ä¸‹åˆå§‹åŒ–HTMLæ–‡æ¡£å¼€å§‹ã€‚</p><pre class="la lb lc ld gt og od oh oi aw oj bi"><span id="a17c" class="nn lf it od b gy ok ol l om on">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;<br/>  &lt;head&gt;<br/>    &lt;meta charset="utf-8"&gt;<br/>    &lt;title&gt;&lt;/title&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div&gt;My background color is &lt;span id="background"&gt;&lt;/span&gt;&lt;/div&gt;<br/>    &lt;div id="debugger"&gt;<br/>      &lt;div&gt;<br/>        &lt;button id="previous"&gt;<br/>          previous<br/>        &lt;/button&gt;<br/>        &lt;button id="next"&gt;<br/>          next<br/>        &lt;/button&gt;<br/>      &lt;/div&gt;<br/>      &lt;div id="timeline"&gt;&lt;/div&gt;<br/>    &lt;/div&gt;<br/>    &lt;style&gt;<br/>      html, body {<br/>        width: 100vw;<br/>        height: 100vh;<br/>      }</span><span id="634d" class="nn lf it od b gy oo ol l om on">    #debugger {<br/>        margin-top: 30px;<br/>      }<br/>    &lt;/style&gt;<br/>    &lt;script&gt;<br/>      // Application logic will be added here...<br/>    &lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="d93b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">æ³¨æ„ï¼Œæˆ‘ä»¬è¿˜ä¸ºè°ƒè¯•å™¨åˆ›å»ºäº†ä¸€ä¸ª<code class="fe oa ob oc od b">&lt;div&gt;</code>ã€‚æœ‰å¯¼èˆªä¸åŒçŠ¶æ€çš„æŒ‰é’®å’Œåˆ—å‡ºçŠ¶æ€ä¸­æ¯ä¸ªæ›´æ–°çš„èŠ‚ç‚¹ã€‚</p><p id="8fb6" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">åœ¨è„šæœ¬å†…éƒ¨ï¼Œæˆ‘ä»¬ä»å¼•ç”¨DOMèŠ‚ç‚¹å’Œæˆ‘ä»¬çš„<code class="fe oa ob oc od b">createStore</code>å¼€å§‹ã€‚</p><pre class="la lb lc ld gt og od oh oi aw oj bi"><span id="79d9" class="nn lf it od b gy ok ol l om on">const textNode = document.getElementById('background');<br/>const timelineNode = document.getElementById('timeline');</span><span id="34f6" class="nn lf it od b gy oo ol l om on">const createStore = (reducer, initialState) =&gt; {<br/>  const store = {};<br/>  store.state = initialState;<br/>  store.listeners = [];</span><span id="0ef8" class="nn lf it od b gy oo ol l om on">  store.getState = () =&gt; store.state;</span><span id="2171" class="nn lf it od b gy oo ol l om on">  store.subscribe = listener =&gt; {<br/>    store.listeners.push(listener);<br/>  };</span><span id="f47a" class="nn lf it od b gy oo ol l om on">  store.dispatch = action =&gt; {<br/>    console.log('&gt; Action', action);<br/>    store.state = reducer(store.state, action);<br/>    store.listeners.forEach(listener =&gt; listener());<br/>  };</span><span id="2d89" class="nn lf it od b gy oo ol l om on">  return store;<br/>};</span></pre><p id="f9c5" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åˆ›å»ºreduceræ¥è·Ÿè¸ªRGBå€¼å¹¶åˆå§‹åŒ–å­˜å‚¨ã€‚åˆå§‹çŠ¶æ€å°†æ˜¯ç™½è‰²èƒŒæ™¯ã€‚</p><pre class="la lb lc ld gt og od oh oi aw oj bi"><span id="c047" class="nn lf it od b gy ok ol l om on">const getInitialState = () =&gt; {<br/>  return {<br/>    r: 255,<br/>    g: 255,<br/>    b: 255,<br/>  };<br/>};</span><span id="6bc3" class="nn lf it od b gy oo ol l om on">const reducer = (state = getInitialState(), action) =&gt; {<br/>  switch (action.type) {<br/>    case 'SET_RGB':<br/>      return {<br/>        r: action.payload.r,<br/>        g: action.payload.g,<br/>        b: action.payload.b,<br/>      };<br/>    default:<br/>      return state;<br/>  }<br/>};</span><span id="a4e1" class="nn lf it od b gy oo ol l om on">const store = createStore(reducer);</span></pre><p id="ec10" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºå•†åº—è®¢é˜…ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°å°†è®¾ç½®èƒŒæ™¯è‰²å¹¶å°†æ–‡æœ¬RGBå€¼æ·»åŠ åˆ°DOMä¸­ã€‚è¿™æ˜¯å› ä¸ºå¯¹çŠ¶æ€çš„ä»»ä½•æ›´æ–°éƒ½è¦åœ¨æˆ‘ä»¬çš„UIä¸­è¡¨ç¤ºå‡ºæ¥ã€‚</p><pre class="la lb lc ld gt og od oh oi aw oj bi"><span id="0a48" class="nn lf it od b gy ok ol l om on">const setBackgroundColor = () =&gt; {<br/>  const state = store.getState();<br/>  const { r, g, b } = state;<br/>  const rgb = `rgb(${r}, ${g}, ${b})`;</span><span id="461b" class="nn lf it od b gy oo ol l om on">  document.body.style.backgroundColor = rgb;<br/>  textNode.innerHTML = rgb;<br/>};</span><span id="5dd5" class="nn lf it od b gy oo ol l om on">store.subscribe(setBackgroundColor);</span></pre><p id="142a" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">æœ€åï¼Œæˆ‘ä»¬æ·»åŠ ä¸€ä¸ªå‡½æ•°æ¥ç”Ÿæˆä¸€ä¸ª0â€“255çš„éšæœºæ•°å’Œä¸€ä¸ª<code class="fe oa ob oc od b">onClick</code>äº‹ä»¶ç›‘å¬å™¨ï¼Œå®ƒå°†å‘å•†åº—å‘é€ä¸€ä¸ªæ–°çš„RGBå€¼ã€‚</p><pre class="la lb lc ld gt og od oh oi aw oj bi"><span id="c310" class="nn lf it od b gy ok ol l om on">const generateRandomColor = () =&gt; {<br/>  return Math.floor(Math.random() * 255);<br/>};</span><span id="be56" class="nn lf it od b gy oo ol l om on">// A simple event to dispatch changes<br/>document.addEventListener('click', () =&gt; {<br/>  console.log('----- Previous state', store.getState());<br/>  store.dispatch({<br/>    type: 'SET_RGB',<br/>    payload: {<br/>      r: generateRandomColor(),<br/>      g: generateRandomColor(),<br/>      b: generateRandomColor(),<br/>    },<br/>  });<br/>  console.log('+++++ New state', store.getState());<br/>});</span></pre><p id="2323" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">è¿™æ˜¯æˆ‘ä»¬åº”ç”¨ç¨‹åºé€»è¾‘çš„å…¨éƒ¨ã€‚æˆ‘ä»¬åœ¨ä¸‹é¢çš„è„šæœ¬æ ‡ç­¾è°ƒç”¨<code class="fe oa ob oc od b">store.dispatch({})</code>çš„åº•éƒ¨æ·»åŠ ä¸Šä¸€èŠ‚ä¸­çš„æ—¶é—´æ—…è¡Œä»£ç æ¥ç”Ÿæˆåˆå§‹çŠ¶æ€ã€‚</p><figure class="la lb lc ld gt ju gh gi paragraph-image"><div class="gh gi kz"><img src="../Images/e7a20435c8b702f687f578e8ca7b2797.png" data-original-src="https://miro.medium.com/v2/resize:fit:712/1*i3L6QvShxky5wkcloijdqA.gif"/></div></figure><p id="6954" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">ä¸‹é¢æ˜¯è¯¥åº”ç”¨ç¨‹åºçš„å®Œæ•´å·¥ä½œä»£ç ã€‚</p><figure class="la lb lc ld gt ju"><div class="bz fp l di"><div class="oe of l"/></div></figure><h1 id="69fb" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">åŒ…è£¹</h1><p id="6e4e" class="pw-post-body-paragraph kb kc it kd b ke mc kg kh ki md kk kl km me ko kp kq mf ks kt ku mg kw kx ky im bi translated">æˆ‘ä»¬çš„æ—¶é—´æ—…è¡Œè°ƒè¯•æ•™è‚²å®ç°æç»˜äº†Reduxçš„æ ¸å¿ƒåŸåˆ™ã€‚æˆ‘ä»¬å¯ä»¥æ¯«ä¸è´¹åŠ›åœ°è·Ÿè¸ªæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºæ­£åœ¨è¿›è¡Œçš„çŠ¶æ€ï¼Œä½¿å¾—è°ƒè¯•å’Œå®Œå…¨ç†è§£æ­£åœ¨å‘ç”Ÿçš„äº‹æƒ…å˜å¾—å®¹æ˜“ã€‚</p><figure class="la lb lc ld gt ju gh gi paragraph-image"><a href="https://levelup.gitconnected.com/"><div class="gh gi oy"><img src="../Images/439094b9a664ef0239afbc4565c6ca49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S9uYu-fFL3hIQLGVu0o-EQ.png"/></div></a></figure></div><div class="ab cl oz pa hx pb" role="separator"><span class="pc bw bk pd pe pf"/><span class="pc bw bk pd pe pf"/><span class="pc bw bk pd pe"/></div><div class="im in io ip iq"><p id="c347" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><em class="os">å¦‚æœæ‚¨è§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹å‡»</em>ğŸ‘<em class="os">ã€‚</em> <a class="ae nz" href="https://medium.com/@treyhuffine" rel="noopener"> <em class="os">å…³æ³¨æˆ‘</em> </a> <em class="os">äº†è§£æ›´å¤šå…³äºåŒºå—é“¾ã€Reactã€Node.jsã€JavaScriptå’Œå¼€æºè½¯ä»¶çš„æ–‡ç« ï¼ä¹Ÿå¯ä»¥åœ¨</em><a class="ae nz" href="https://twitter.com/treyhuffine" rel="noopener ugc nofollow" target="_blank"><em class="os">Twitter</em></a><em class="os">æˆ–è€…</em><a class="ae nz" href="https://gitconnected.com/treyhuffine" rel="noopener ugc nofollow" target="_blank"><em class="os">git connected</em></a><em class="os">ä¸Šæ‰¾åˆ°æˆ‘ã€‚</em></p><h2 id="7379" class="nn lf it bd lg no np dn lk nq nr dp lo km ns nt ls kq nu nv lw ku nw nx ma ny bi translated"><a class="ae nz" href="https://blockace.io" rel="noopener ugc nofollow" target="_blank">åœ¨åŒºå—é“¾æ‰¾å·¥ä½œå’ŒåŠ å¯†è´§å¸&gt; </a></h2></div></div>    
</body>
</html>