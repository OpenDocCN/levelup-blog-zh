<html>
<head>
<title>How to Deal with Configuration and Credential files in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Python中处理配置和凭证文件</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-deal-with-configuration-and-credential-files-in-python-db4412506b5e?source=collection_archive---------1-----------------------#2021-10-10">https://levelup.gitconnected.com/how-to-deal-with-configuration-and-credential-files-in-python-db4412506b5e?source=collection_archive---------1-----------------------#2021-10-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="a38a" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在一个文件中处理不同连接的有效方法！</h2></div><div class="ki kj gp gr kk kl"><a href="https://jorgepit-14189.medium.com/membership" rel="noopener follow" target="_blank"><div class="km ab fo"><div class="kn ab ko cl cj kp"><h2 class="bd iu gy z fp kq fr fs kr fu fw is bi translated">用我的推荐链接加入媒体-乔治皮皮斯</h2><div class="ks l"><h3 class="bd b gy z fp kq fr fs kr fu fw dk translated">阅读乔治·皮皮斯(以及媒体上成千上万的其他作家)的每一个故事。您的会员费直接支持…</h3></div><div class="kt l"><p class="bd b dl z fp kq fr fs kr fu fw dk translated">jorgepit-14189.medium.com</p></div></div><div class="ku l"><div class="kv l kw kx ky ku kz la kl"/></div></div></a></div><p id="a217" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">数据科学家和数据工程师可能需要同时访问许多系统。例如，在ETL/ELT工作中，有机会从Hadoop、BigQuery、MySQL、PostgreSQL、Redshift、Snowflake等不同来源中提取和存储数据。此外，可能有不同的用户拥有不同的凭据，最后，可能有不同的环境，如测试、试运行和生产环境。在本帖中，我们将解释如何使用一个配置文件在Python中处理不同的凭证。</p><h1 id="e030" class="lx ly it bd lz ma mb mc md me mf mg mh jz mi ka mj kc mk kd ml kf mm kg mn mo bi translated">configparser模块</h1><p id="6d32" class="pw-post-body-paragraph lb lc it ld b le mp ju lg lh mq jx lj lk mr lm ln lo ms lq lr ls mt lu lv lw im bi translated">构建<a class="ae mu" href="https://docs.python.org/3/library/configparser.html" rel="noopener ugc nofollow" target="_blank"> configparser </a>模块是为了在一个文件中处理不同的凭证。让我们看看如何以编程方式创建配置文件。我们的目标是创建不同连接的凭证。</p><h2 id="159b" class="mv ly it bd lz mw mx dn md my mz dp mh lk na nb mj lo nc nd ml ls ne nf mn ng bi translated">创建配置文件</h2><pre class="nh ni nj nk gt nl nm nn no aw np bi"><span id="d7d7" class="mv ly it nm b gy nq nr l ns nt">import configparser</span><span id="76e7" class="mv ly it nm b gy nu nr l ns nt">config = configparser.ConfigParser()</span><span id="201b" class="mv ly it nm b gy nu nr l ns nt"># Connection for the user George<br/>config['George'] = {'username': 'george',<br/>                     'password': 'AStrongPassword01'}</span><span id="a343" class="mv ly it nm b gy nu nr l ns nt"># Connection for the user Billy<br/>config['Billy'] = {'username': 'billy',<br/>                     'password': 'AStrongPassword02'}</span><span id="5eae" class="mv ly it nm b gy nu nr l ns nt"># connection to the database<br/>config['DB'] = {'username': 'DataScientist',<br/>                'password': 'AStrongPassword03',<br/>                'db': 'PredictiveHacks',<br/>                'host': 'predictivehacks.com',<br/>                'port':1234}</span><span id="d268" class="mv ly it nm b gy nu nr l ns nt"># write the <br/>with open('my_config.ini', 'w') as configfile:<br/>    config.write(configfile)</span></pre><p id="a275" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">运行脚本后，创建了“<strong class="ld iu"> my_config.ini </strong>”文件，如下所示:</p><figure class="nh ni nj nk gt nw gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/4beee4c31b8a769cff4114b5a0d0bfdf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1348/format:webp/0*zX3S_REjRFHZi-IF.png"/></div></figure><p id="43ff" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">或者，我们可以使用文本编辑器创建配置文件。例如“<strong class="ld iu"> my_config.ini </strong>”:</p><pre class="nh ni nj nk gt nl nm nn no aw np bi"><span id="3800" class="mv ly it nm b gy nq nr l ns nt">[George]<br/>username = george<br/>password = AStrongPassword01</span><span id="e791" class="mv ly it nm b gy nu nr l ns nt">[Billy]<br/>username = billy<br/>password = AStrongPassword02</span><span id="11af" class="mv ly it nm b gy nu nr l ns nt">[DB]<br/>username = DataScientist<br/>password = AStrongPassword03<br/>db = PredictiveHacks<br/>host = predictivehacks.com<br/>port = 1234</span></pre><h2 id="9ae7" class="mv ly it bd lz mw mx dn md my mz dp mh lk na nb mj lo nc nd ml ls ne nf mn ng bi translated">使用配置文件</h2><p id="cac1" class="pw-post-body-paragraph lb lc it ld b le mp ju lg lh mq jx lj lk mr lm ln lo ms lq lr ls mt lu lv lw im bi translated">让我们看看如何使用Python获得凭证。首先，我们将看看如何获得配置文件的所有连接。</p><pre class="nh ni nj nk gt nl nm nn no aw np bi"><span id="68c4" class="mv ly it nm b gy nq nr l ns nt">import configparser</span><span id="8379" class="mv ly it nm b gy nu nr l ns nt">config = configparser.ConfigParser()</span><span id="efa7" class="mv ly it nm b gy nu nr l ns nt"># read the configuration file<br/>config.read('my_config.ini')</span><span id="1ade" class="mv ly it nm b gy nu nr l ns nt"># get all the connections<br/>config.sections()</span></pre><p id="163f" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated"><strong class="ld iu">输出:</strong></p><pre class="nh ni nj nk gt nl nm nn no aw np bi"><span id="eb78" class="mv ly it nm b gy nq nr l ns nt">['George', 'Billy', 'DB']</span></pre><p id="4c59" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">现在，我们将获得“乔治”的用户名和密码</p><pre class="nh ni nj nk gt nl nm nn no aw np bi"><span id="ecab" class="mv ly it nm b gy nq nr l ns nt">username = config.get('George', 'username')<br/>password = config.get('George', 'password')</span><span id="6820" class="mv ly it nm b gy nu nr l ns nt">print(f'The username is {username} and the passowrd is {password}')</span></pre><p id="b6d6" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated"><strong class="ld iu">输出:</strong></p><pre class="nh ni nj nk gt nl nm nn no aw np bi"><span id="5894" class="mv ly it nm b gy nq nr l ns nt">The username is george and the passowrd is AStrongPassword01</span></pre><p id="8af0" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">或者，您可以按如下方式获取凭据:</p><pre class="nh ni nj nk gt nl nm nn no aw np bi"><span id="f351" class="mv ly it nm b gy nq nr l ns nt">username = config['George']['username']<br/>password = config['George']['password']</span><span id="4c62" class="mv ly it nm b gy nu nr l ns nt">print(f'The username is {username} and the passowrd is {password}')</span></pre><p id="7ba2" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated"><strong class="ld iu">输出:</strong></p><pre class="nh ni nj nk gt nl nm nn no aw np bi"><span id="474a" class="mv ly it nm b gy nq nr l ns nt">The username is george and the passowrd is AStrongPassword01</span></pre><p id="4a52" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">显然，按照与上面相同的逻辑，我们可以获得其他连接的凭证，如“<strong class="ld iu"> Billy </strong>”和“<strong class="ld iu"> DB </strong>”。</p></div><div class="ab cl ny nz hx oa" role="separator"><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od"/></div><div class="im in io ip iq"><p id="6b40" class="pw-post-body-paragraph lb lc it ld b le lf ju lg lh li jx lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">最初发布于<a class="ae mu" href="https://predictivehacks.com/?all-tips=how-to-deal-with-configuration-and-credential-files-in-python" rel="noopener ugc nofollow" target="_blank">预测黑客</a></p></div></div>    
</body>
</html>