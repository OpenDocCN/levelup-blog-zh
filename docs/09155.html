<html>
<head>
<title>Method Chaining In Golang</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Golang的方法链接</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/method-chaining-in-golang-1de7cd9efa74?source=collection_archive---------1-----------------------#2021-07-12">https://levelup.gitconnected.com/method-chaining-in-golang-1de7cd9efa74?source=collection_archive---------1-----------------------#2021-07-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/cbbdfadb7a99b7112961f98724af4f27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mhCoWKDF8Zhp9GmIoQ78bA.png"/></div></div></figure><p id="8862" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">方法链接</strong>是在单个表达式中调用不同的方法，而不是分别调用具有相同对象引用的不同方法的做法。如下所述</p><pre class="kw kx ky kz gt la lb lc ld aw le bi"><span id="7e1b" class="lf lg iq lb b gy lh li l lj lk">dialogue := AlrtDilagoue{}<br/>dialogue.SetTitle(" Warning ").<br/>        SetMessage("Do you really want to delete this ?").<br/>        Show();</span></pre><p id="cf9e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">为什么首选方法链接？<br/> </strong>我要说这也取决于开发者，我们经常在java、c#、php等其他语言中看到这种情况。在Go中，像<a class="ae ll" href="https://github.com/jinzhu/gorm" rel="noopener ugc nofollow" target="_blank"> GORM </a>这样的库依靠方法链来构建更复杂的SQL查询。</p><p id="7259" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">一些开发人员将方法链作为一种提高源代码可读性的良好实践来推广。冗余的临时变量和代码重复被消除，表达式变得像自然语言文本一样易于从左向右阅读。</p><p id="3edf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">对于其他一些方法来说，方法链接通常被认为是一种不好的实践。在<em class="lm"> StackOverflow的线程中，即</em> <a class="ae ll" href="https://stackoverflow.com/questions/1103985/method-chaining-why-is-it-a-good-practice-or-not" rel="noopener ugc nofollow" target="_blank"> <em class="lm">方法链接——为什么这是一个好的实践，或者不是？</em> </a> <em class="lm"> </em>很多帖子声称方法链接恶化了可读性。</p><p id="1b3c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">但是方法链接仍然在ORM中被大量使用。</p><p id="e3a6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">在Golang中实现方法链接</strong> <br/>让我们试着实现它，因为我喜欢在一些情况下使用它，比如在API上写一个包装器。</p><pre class="kw kx ky kz gt la lb lc ld aw le bi"><span id="0ac5" class="lf lg iq lb b gy lh li l lj lk">package main</span><span id="a749" class="lf lg iq lb b gy ln li l lj lk">import "fmt"</span><span id="183c" class="lf lg iq lb b gy ln li l lj lk">type Card struct {<br/>    amount   float64<br/>    currency string<br/>    address  string<br/>}</span><span id="846f" class="lf lg iq lb b gy ln li l lj lk">func (c *Card) Charge(amount float64) *Card {</span><span id="a2d9" class="lf lg iq lb b gy ln li l lj lk">    c.amount = amount<br/>    return c<br/>}</span><span id="6f06" class="lf lg iq lb b gy ln li l lj lk">func (c *Card) WithCurrency(currency string) *Card {</span><span id="d9ad" class="lf lg iq lb b gy ln li l lj lk">    c.currency = currency<br/>    return c<br/>}</span><span id="753e" class="lf lg iq lb b gy ln li l lj lk">func (c *Card) WithAddress(address string) *Card {</span><span id="e8ea" class="lf lg iq lb b gy ln li l lj lk">    c.address = address<br/>    return c<br/>}</span><span id="7709" class="lf lg iq lb b gy ln li l lj lk">func (c *Card) Execute() {</span><span id="58f9" class="lf lg iq lb b gy ln li l lj lk">    fmt.Printf("Dear Customer, \n%s %v is Debited from your account ", c.currency, c.amount)</span><span id="9864" class="lf lg iq lb b gy ln li l lj lk">}</span></pre><p id="d7e2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在Golang中，要使一个方法成为可链接的，你所要做的就是返回一个接收者。没有必要像代码中的Execute()方法一样，在链中使用的最后一个方法上返回任何东西</p><pre class="kw kx ky kz gt la lb lc ld aw le bi"><span id="2881" class="lf lg iq lb b gy lh li l lj lk">func main() {</span><span id="ee8a" class="lf lg iq lb b gy ln li l lj lk">card := Card{}<br/>    card.Charge(10.4).<br/>        WithCurrency("USD").<br/>        WithAddress("Gulshan Karachi").<br/>        Execute()</span><span id="734f" class="lf lg iq lb b gy ln li l lj lk">// you can write it as below as well in a single line</span><span id="b8ba" class="lf lg iq lb b gy ln li l lj lk">card.Charge(10.4).WithCurrency("PKR").WithAddress("Gulshan Karachi").Execute()</span><span id="50d7" class="lf lg iq lb b gy ln li l lj lk">}</span></pre><p id="8af3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">它在Golang有一些缺点吗？<br/><br/>像Java、Python这样的语言能够侥幸成功，是因为它们习惯性地通过异常传递错误，而异常会立即停止方法链，并跳转到相关的异常处理程序。</p><h2 id="619c" class="lf lg iq bd lo lp lq dn lr ls lt dp lu kj lv lw lx kn ly lz ma kr mb mc md me bi translated">如果这篇文章有帮助，请点击拍手👏按钮下面几下，以示你对作者的支持！⬇</h2></div></div>    
</body>
</html>