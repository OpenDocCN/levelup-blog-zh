<html>
<head>
<title>Sprite Flipping in Unity for 2D Animations</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">2D动画中的精灵翻转</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/sprite-flipping-in-unity-for-2d-animations-f5c33d3e8f71?source=collection_archive---------0-----------------------#2021-07-06">https://levelup.gitconnected.com/sprite-flipping-in-unity-for-2d-animations-f5c33d3e8f71?source=collection_archive---------0-----------------------#2021-07-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="bf03" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">Unity快速提示</h2><div class=""/><p id="5357" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">//轻松控制精灵方向。</p><figure class="ky kz la lb gt lc gh gi paragraph-image"><div class="gh gi kx"><img src="../Images/475302271b73885d61d3d0e7558592fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1386/1*o8pgL6o6NUhOiK1UPrXNgw.gif"/></div><figcaption class="lf lg gj gh gi lh li bd b be z dk translated">快速改变精灵面对的方向</figcaption></figure><p id="07ba" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">今天的邮件很快。通常当我们在2D游戏中工作时，我们希望能够改变精灵面对的方向，给我们一个更加完美的动画。一如既往，Unity让我们的工作变得非常简单。</p><p id="7f5b" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">如果你在互联网上查看一些旧的精灵表，你会发现在过去，为每个方向创建精灵表动画是很常见的。举个例子:</p><figure class="ky kz la lb gt lc gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi lj"><img src="../Images/edc1042d3e032df2455c11a4a04d5088.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6bXzk34IJtgGdLtvpyFi_g.png"/></div></div><figcaption class="lf lg gj gh gi lh li bd b be z dk translated">Pinterest ( <a class="ae lo" href="https://www.pinterest.com/pin/469922542349678919/" rel="noopener ugc nofollow" target="_blank">图钉动画教程(pinterest.com)</a>中的精灵表示例</figcaption></figure><p id="4b5a" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">在这种情况下，左右移动是有意义的，因为它从左右两边看着玩家，他的服装使它更加优雅。然而，在我正在开发的手机冒险游戏中，我们只有一个面向右边的精灵。Unity让我们直接在Sprite渲染器中处理这个问题。</p><figure class="ky kz la lb gt lc gh gi paragraph-image"><div class="gh gi lp"><img src="../Images/f7a1da7fb1e5304ecd3b41d12768cfae.png" data-original-src="https://miro.medium.com/v2/resize:fit:760/format:webp/1*Ak7ooSFlbkrcjn6WEunAVw.png"/></div><figcaption class="lf lg gj gh gi lh li bd b be z dk translated">检查器中的渲染器</figcaption></figure><p id="7b9e" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">请注意，精灵渲染器有一个名为Flip的设置，带有X和y选项。这意味着我们可以在代码中轻松翻转精灵，以处理从左向右的过渡。让我们看一下完成这个任务所需的代码。</p><p id="8fc7" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">我的动画类中有精灵翻转代码(下面是完整的代码),因为它对我来说是动画的一部分。</p><p id="71cf" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">首先，我们需要一个脚本中的sprite渲染器的句柄，以便于访问。所以我们创建了一个类变量:</p><pre class="ky kz la lb gt lq lr ls lt aw lu bi"><span id="dbb4" class="lv lw it lr b gy lx ly l lz ma">private SpriteRenderer _renderer;</span></pre><p id="de14" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">接下来，我们需要初始化新的变量，所以我们在Start()中处理它</p><pre class="ky kz la lb gt lq lr ls lt aw lu bi"><span id="5153" class="lv lw it lr b gy lx ly l lz ma">void <strong class="lr jd">Start</strong>()<br/>{<br/>    _renderer = GetComponent&lt;SpriteRenderer&gt;();<br/>    if (_renderer == null)<br/>    {<br/>        Debug.LogError("Player Sprite is missing a renderer");<br/>    }<br/>}</span></pre><p id="b317" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">最后，在Update()方法中，我们使用水平输入上的GetAxisRaw()检查玩家运动方向的状态，并根据结果翻转X轴。</p><pre class="ky kz la lb gt lq lr ls lt aw lu bi"><span id="66ff" class="lv lw it lr b gy lx ly l lz ma">void <strong class="lr jd">Update</strong>()<br/>{<br/>    if (Input.GetAxisRaw("Horizontal") &gt; 0)<br/>    {<br/>        _renderer.flipX = false;<br/>    }<br/>    else if (Input.GetAxisRaw("Horizontal") &lt; 0)<br/>    {<br/>        _renderer.flipX = true;<br/>    }   <br/>}</span></pre><p id="4431" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">就是这样。现在，当我们玩游戏时，我们的玩家将翻转到他面对的方向。</p><p id="0eca" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">重要的是要注意，如果你太关注它，它看起来确实有点笨重。在我的例子中，玩家总是把他的剑放在离屏幕最近的手里，所以当他翻转时，就好像他把剑换到了另一只手上。这可能会打破一些玩家的沉浸感，但当你有一个左右两边几乎相同的精灵(想想马里奥或索尼克)时，翻转效果几乎不明显。</p><p id="ed54" class="pw-post-body-paragraph jz ka it kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw im bi translated">正如所承诺的，这里是动画类的当前完整代码。</p><pre class="ky kz la lb gt lq lr ls lt aw lu bi"><span id="5769" class="lv lw it lr b gy lx ly l lz ma">using UnityEngine;<br/><br/>public class <strong class="lr jd">Player_Animation_Contoller </strong>: MonoBehaviour<br/>{<br/>    private Animator _animator;<br/>    private SpriteRenderer _renderer;<br/>    private static readonly int MovementSpeed = Animator.StringToHash("MovementSpeed");<br/><br/>    <em class="mb">// Start is called before the first frame update<br/>    </em>void <strong class="lr jd">Start</strong>()<br/>    {<br/>        _animator = GetComponent&lt;Animator&gt;();<br/>        if (_animator == null)<br/>        {<br/>            Debug.LogError("The player sprite is missing an Animator Component");<br/>        }<br/><br/>        _renderer = GetComponent&lt;SpriteRenderer&gt;();<br/>        if (_renderer == null)<br/>        {<br/>            Debug.LogError("Player Sprite is missing a renderer");<br/>        }<br/>    }<br/><br/>    <em class="mb">// Update is called once per frame<br/>    </em>void <strong class="lr jd">Update</strong>()<br/>    {<br/>        if (Input.GetAxisRaw("Horizontal") &gt; 0)<br/>        {<br/>            _renderer.flipX = false;<br/>        }<br/>        else if (Input.GetAxisRaw("Horizontal") &lt; 0)<br/>        {<br/>            _renderer.flipX = true;<br/>        }<br/>        _animator.SetFloat(MovementSpeed, Mathf.Abs(Input.GetAxisRaw("Horizontal")));<br/>    }<br/>}</span></pre></div></div>    
</body>
</html>