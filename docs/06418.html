<html>
<head>
<title>Accelerating Web 3.0 with The Graph</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用图表加速Web 3.0</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/accelerating-web-3-0-with-the-graph-afb29aa078ee?source=collection_archive---------12-----------------------#2020-11-23">https://levelup.gitconnected.com/accelerating-web-3-0-with-the-graph-afb29aa078ee?source=collection_archive---------12-----------------------#2020-11-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="9192" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">他们的基本查询基础设施的运行状况</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi kf"><img src="../Images/53d60c949e3e1a21dc2a3c55723178af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1390/format:webp/1*a3kN-j2PwcXoNFSswa0gIA.png"/></div></figure><p id="1415" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">去中心化应用和Web 3的未来将由支持它的基础设施层决定。以前，dapp必须构建自己的查询逻辑，并为输出(在区块链上)找到存储，而我们已经阻止了dapp可能的创新。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi lj"><img src="../Images/c4a5cbbb71e9836e79795ef3f440b3df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*UrAo7xRASsrzg0l5QkHwdA.png"/></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk translated"><a class="ae lo" href="http://www.thegraph.com" rel="noopener ugc nofollow" target="_blank">www.thegraph.com</a></figcaption></figure><p id="7bec" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated"><a class="ae lo" href="http://www.thegraph.com" rel="noopener ugc nofollow" target="_blank">图表</a>为dApp的建设者提供了加速上市和早期创新的加速器</p><p id="59d0" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">虽然有些数据很容易从像<a class="ae lo" href="http://www.ethereum.org" rel="noopener ugc nofollow" target="_blank">以太坊</a>这样的区块链中查询到，但随着查询变得更加具体/细化，这变得更加具有挑战性。在某些情况下，被请求的数据可能需要一定程度的转换/聚合，这可能是耗时且昂贵的构建，经常是一遍又一遍地进行(由多个独立的团队进行)。</p><p id="4d9e" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">该图及其子图提供了这个问题的解决方案。</p><p id="0b0d" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">他们解决方案的核心是“图形节点”。</p><h1 id="b186" class="lp lq iq bd lr ls lt lu lv lw lx ly lz jw ma jx mb jz mc ka md kc me kd mf mg bi translated">图形节点</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/402be757fff5c15d1f3a6c06f343981a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UwSXMnuersrAtf7SWY2-eg.png"/></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk translated"><a class="ae lo" href="https://thegraph.com/docs/introduction#what-the-graph-is" rel="noopener ugc nofollow" target="_blank">https://thegraph.com/docs/introduction#what-the-graph-is</a></figcaption></figure><p id="fcc3" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">图节点与区块链节点(即Geth，以太坊上下文中的奇偶校验),并通过使用“子图”准确地提供在每个块中提取的信息。</p><p id="44f5" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">同样，Google会对给定查询的最相关的搜索结果进行管理，因此图表协议上的管理将允许索引器(运行图表节点的个人)只对最相关的子图表进行索引。然而，与谷歌不同的是，Graph的目标是去中心化，而不是由一个中心实体来执行监管，而是由许多监管者来执行，这些监管者(像他们的索引器兄弟一样)将因他们的角色而获得报酬。</p><p id="091e" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">子图定义了图将从以太坊索引哪些数据，以及如何存储这些数据。可以为每个项目或应用程序创建子图(即uni WAP/Compound)都运行在以太坊上。</p><p id="177d" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">Graph已经发布了一套全面的文档标准，可以从他们的网站上获得(例如<a class="ae lo" href="https://thegraph.com/docs/define-a-subgraph#the-subgraph-manifest" rel="noopener ugc nofollow" target="_blank">子图清单</a>、<a class="ae lo" href="https://thegraph.com/docs/define-a-subgraph#writing-mappings" rel="noopener ugc nofollow" target="_blank">映射</a>)。</p><p id="b0f7" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">可以使用节点的GraphQL端点来查询图形节点。</p><h1 id="4d36" class="lp lq iq bd lr ls lt lu lv lw lx ly lz jw ma jx mb jz mc ka md kc me kd mf mg bi translated">GraphQL</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi mi"><img src="../Images/cd13765826b198a99e8e2f081f1d8b1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pz7SLwuVrLZ9tivW2o_Zng.png"/></div></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk translated"><a class="ae lo" href="http://www.graphql.com" rel="noopener ugc nofollow" target="_blank">www.graphql.com</a></figcaption></figure><p id="100f" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">GraphQL是一种开源的数据查询和操作语言。自2012年以来，脸书的移动应用程序一直由GraphQL提供支持。</p><p id="868f" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">GraphQL规范在2015年开源，现在可以在许多环境中使用，并被各种规模的团队使用。</p><p id="69b3" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">Graph节点将GraphQL命令翻译成对其底层数据存储的查询，以获取数据。GraphQL是语言不可知的，你可以使用任何编程语言。它存在于您的客户机和数据源之间，这使得它非常灵活。</p><p id="1536" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">GraphQL有一个基于浏览器的开发环境，用于研究GraphQL查询，这对于编写提取和转换数据的查询非常有用。语言语法不同于SQL，因为它们看起来更像JavaScript对象。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/46f7f47fe451fcdf1216f01d9f2a0731.png" data-original-src="https://miro.medium.com/v2/resize:fit:958/format:webp/1*jI_OwrlBBexrHfR-5NWcPA.png"/></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk translated">GraphQL查询快速/稳定，并且总是返回可预测的结果</figcaption></figure><p id="8aca" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">GraphQL APIs按照类型和字段进行组织，您可以从单个端点访问数据的全部功能。GraphQL使用类型来确保dApps只询问什么是可能的，并提供清晰和有用的错误。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/45f0c1288d872009d27a79f3edaf0fd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:996/format:webp/1*6zOjZxi79VEwXy0CG_rbxQ.png"/></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk translated">应用程序可以使用类型来避免编写手动解析代码。</figcaption></figure><p id="d27c" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">GraphQL为您的整个dApp创建了一个统一的API，不受特定存储引擎的限制，为您提供了一个简单明了的流程:</p><blockquote class="mp mq mr"><p id="0475" class="kn ko ms kp b kq kr jr ks kt ku ju kv mt kx ky kz mu lb lc ld mv lf lg lh li ij bi translated">描述您的数据</p><p id="09b5" class="kn ko ms kp b kq kr jr ks kt ku ju kv mt kx ky kz mu lb lc ld mv lf lg lh li ij bi translated">要求你想要的</p><p id="875d" class="kn ko ms kp b kq kr jr ks kt ku ju kv mt kx ky kz mu lb lc ld mv lf lg lh li ij bi translated">获得可预测的结果</p></blockquote><p id="d2ce" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">利用GraphQL，图协议引入了“子图”。</p><h1 id="4b82" class="lp lq iq bd lr ls lt lu lv lw lx ly lz jw ma jx mb jz mc ka md kc me kd mf mg bi translated">[数]子图</h1><p id="d983" class="pw-post-body-paragraph kn ko iq kp b kq mw jr ks kt mx ju kv kw my ky kz la mz lc ld le na lg lh li ij bi translated">由于在查询之前对原始区块链数据进行计算，子图提供了快速响应时间；允许根据需要快速提供索引数据。由于预先计算和强大的基础设施，子图可以执行复杂的粒度查询(允许根据需要索引特定的合同、方法和事件)。它们还提供了在任何给定块高度开始索引的自由，这有助于减少同步和索引子图所需的时间。</p><p id="49e1" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">公开的子图允许任何应用程序/用户查询它们包含的索引数据。因此，多个应用程序可以利用同一组子图，从而减少复制和重复/冗余的开发时间。</p><p id="aa3a" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">开发人员可以确保他们正在访问的子图将通过图的冗余分散网络保持在线，该网络不依赖于任何单个索引器。</p><p id="4662" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">子图由三个主要部分组成，它们包括:</p><blockquote class="mp mq mr"><p id="c174" class="kn ko ms kp b kq kr jr ks kt ku ju kv mt kx ky kz mu lb lc ld mv lf lg lh li ij bi translated"><strong class="kp ir">清单</strong> —定义智能合约、事件、块和调用的文件(YAML)。此外，它还将事件数据映射到实体和那些包含数据的对象</p></blockquote><p id="cc5b" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">清单是评估子图有效性的好地方，通过确保正确引用合同、正确的事件/调用处理程序和使用最新的ABI文件。它还提供了关于原始数据如何映射到已定义的实体集合的视图，以及这样的命名约定是否易于理解。</p><blockquote class="mp mq mr"><p id="bcb7" class="kn ko ms kp b kq kr jr ks kt ku ju kv mt kx ky kz mu lb lc ld mv lf lg lh li ij bi translated"><strong class="kp ir">模式</strong> —一个文件(GraphQL ),它组织存储在实体中的数据，并支持如何表示数据的规范</p></blockquote><p id="a88c" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">该模式提供了关于子图有多完整和有用的视图。对模式的评估可以确定缺失的数据集，尽管这应该总是在子图要实现的目标的上下文中来看待。</p><blockquote class="mp mq mr"><p id="27ca" class="kn ko ms kp b kq kr jr ks kt ku ju kv mt kx ky kz mu lb lc ld mv lf lg lh li ij bi translated"><strong class="kp ir"> Mappings </strong> —一个将低级以太坊数据转换成GraphQL模式文件中指定的所需实体的文件</p></blockquote><p id="1318" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">映射文件为那些熟悉AssemblyScript语言的人提供了一个视图，一个基于原始数据的子图的复杂性和有用性的视图，以及它是如何被转换的。</p><p id="e070" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">现在，一个“子图”可能看起来像什么，你会去哪里找到它…</p><h1 id="01fa" class="lp lq iq bd lr ls lt lu lv lw lx ly lz jw ma jx mb jz mc ka md kc me kd mf mg bi translated">在野外寻找子图</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi nb"><img src="../Images/3ac8ec72a21ede2af9234876cbf88610.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qkvQrfuBxg6EG9nNwTUdeA.png"/></div></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk translated">从参观https://thegraph.com/explorer/<a class="ae lo" href="https://thegraph.com/explorer/" rel="noopener ugc nofollow" target="_blank">开始</a></figcaption></figure><p id="6826" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">在浏览器中，从提供的列表中选择一个子图，在本例中，我们选择复合协议子图。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi nc"><img src="../Images/27bdb52ce1835c698538d31373f3dda5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*srNxgdCG2Xj6phm9F4HC_g.png"/></div></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk translated"><a class="ae lo" href="https://thegraph.com/explorer/subgraph/graphprotocol/compound-v2" rel="noopener ugc nofollow" target="_blank">https://the graph . com/explorer/subgraph/graph protocol/compound-v2</a></figcaption></figure><p id="928e" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">现在让我们浏览一下子图，以提高您对其组件的熟悉程度。</p><p id="fb72" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">子图页面的亮点包括:</p><ul class=""><li id="e34e" class="nd ne iq kp b kq kr kt ku kw nf la ng le nh li ni nj nk nl bi translated">它所在的以太坊网络(即。Mainnet)</li><li id="81db" class="nd ne iq kp b kq nm kt nn kw no la np le nq li ni nj nk nl bi translated">上次更新时间</li><li id="aca3" class="nd ne iq kp b kq nm kt nn kw no la np le nq li ni nj nk nl bi translated">原始创建日期</li><li id="872b" class="nd ne iq kp b kq nm kt nn kw no la np le nq li ni nj nk nl bi translated">实体的数量(即包含数据的对象)</li><li id="f63d" class="nd ne iq kp b kq nm kt nn kw no la np le nq li ni nj nk nl bi translated">是否与最新的以太坊块高度完全同步</li><li id="07bf" class="nd ne iq kp b kq nm kt nn kw no la np le nq li ni nj nk nl bi translated">Github URL</li><li id="7b23" class="nd ne iq kp b kq nm kt nn kw no la np le nq li ni nj nk nl bi translated">IPFS身份证</li><li id="e9d5" class="nd ne iq kp b kq nm kt nn kw no la np le nq li ni nj nk nl bi translated">查询(HTTP)地址</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi nr"><img src="../Images/2535540d50615ed68440012e701e952c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ReWDAjyRrGlbY9hhcR4EGg.png"/></div></div></figure><p id="b22d" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">从上图中，你可以看到子图中不同的实体，并测试简单的查询。通常已经有一些示例查询可用。这使您能够对数据、其功能和局限性有所了解。此外，您可以从模式(数据模型)中找出哪些实体具有哪些属性。</p><p id="28f4" class="pw-post-body-paragraph kn ko iq kp b kq kr jr ks kt ku ju kv kw kx ky kz la lb lc ld le lf lg lh li ij bi translated">现在就交给你去探索“子图游乐场”了…</p><h1 id="c415" class="lp lq iq bd lr ls lt lu lv lw lx ly lz jw ma jx mb jz mc ka md kc me kd mf mg bi translated">结论</h1><p id="1168" class="pw-post-body-paragraph kn ko iq kp b kq mw jr ks kt mx ju kv kw my ky kz la mz lc ld le na lg lh li ij bi translated">我希望这个简短的指南已经为你提供了一个高层次的视图，展示了图形的可能性，以及它强大的工具包，为dApps和他们的用户提供了一个去中心化的Web 3世界。</p></div></div>    
</body>
</html>