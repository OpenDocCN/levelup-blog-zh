<html>
<head>
<title>Starting with the Swing App (Part 4)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从Swing应用程序开始(第4部分)</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/starting-with-the-swing-app-part-4-7b9395a5960c?source=collection_archive---------15-----------------------#2021-03-21">https://levelup.gitconnected.com/starting-with-the-swing-app-part-4-7b9395a5960c?source=collection_archive---------15-----------------------#2021-03-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jn jo jp jq gh gi paragraph-image"><div class="ab gu cl jr"><img src="../Images/f56304e6a017e72d558bcf5f3e3cd1fe.png" data-original-src="https://miro.medium.com/v2/format:webp/0*55eLFcyH1xpMZ5Mf.png"/></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk translated">礼貌:timeanddate.com</figcaption></figure><p id="1e98" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">欢迎来到本系列的第4篇教程。从上3节教程开始，我们一直在关注我们的核心秒表类。我们努力让它越来越好，尽可能减少客户端代码。现在是时候继续关注在我们的Swing应用程序中使用这个秒表类了。</p><h1 id="7f53" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">之前的教程</h1><p id="7c2b" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">如果您是第一次阅读这一部分，那么您一定要看看本系列的第3部分。</p><ul class=""><li id="e587" class="lz ma iq ka b kb kc kf kg kj mb kn mc kr md kv me mf mg mh bi translated"><a class="ae mi" href="https://github.com/rajtilakls2510/Stopwatch/tree/S3_Applying_Observer_Pattern" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir">代号</strong> </a>直到现在。</li><li id="8714" class="lz ma iq ka b kb mj kf mk kj ml kn mm kr mn kv me mf mg mh bi translated"><a class="ae mi" href="https://rajtilakls2510.medium.com/applying-the-observer-pattern-part-3-e46ce30c2d32" rel="noopener">第三部</a></li></ul></div><div class="ab cl mo mp hu mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="ij ik il im in"><p id="f0df" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在深入研究任何代码之前，让我们先来看看我们要做什么。</p><figure class="mw mx my mz gt jq gh gi paragraph-image"><div class="gh gi mv"><img src="../Images/56cfdab615e60d59291a6f290729dd99.png" data-original-src="https://miro.medium.com/v2/resize:fit:558/format:webp/1*hO4vFzfH-d4YhM32NCwdZQ.png"/></div></figure><p id="98f6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这是我们的应用程序在本教程结束后的样子。这里有三个主要部件:<strong class="ka ir">定时显示</strong>、<strong class="ka ir">开始按钮、</strong>和<strong class="ka ir">停止按钮</strong>。</p><p id="dce4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">注意:时间仍然是以毫秒为单位的，我希望您弄清楚格式逻辑。</p><p id="7697" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们更深入地了解一下我们在这里使用的组件。这里的主要组件是JFrame。这个JFrame将包含所有其他组件。</p><figure class="mw mx my mz gt jq gh gi paragraph-image"><div role="button" tabindex="0" class="nb nc di nd bf ne"><div class="gh gi na"><img src="../Images/98e3d91b0033b4e0e555caba70fbdf76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MJh-dX2u3SdyXm3dgk3FiQ.png"/></div></div></figure><p id="123b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这个JFrame的布局是2行1列的<strong class="ka ir"> GridLayout </strong>。</p><figure class="mw mx my mz gt jq gh gi paragraph-image"><div role="button" tabindex="0" class="nb nc di nd bf ne"><div class="gh gi na"><img src="../Images/67d1f7aa65b11946a4aa4700ffeaef13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kDV0XauYFQ7dnmY0uD1e8g.png"/></div></div></figure><p id="721a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">GridLayout的每个元素都有一个带有FlowLayout的JPanel。</p><figure class="mw mx my mz gt jq gh gi paragraph-image"><div role="button" tabindex="0" class="nb nc di nd bf ne"><div class="gh gi na"><img src="../Images/a13448c62a716e80d9d84a63e7522139.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VONk_VH-DFRSVtLutRjkVg.png"/></div></div></figure><p id="665a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在第一个JPanel中有一个名为“timerDisplay”的JLabel，在第二个JPanel中有两个按钮:Start和Stop。</p><p id="e6c5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们将保持这个应用程序尽可能简单。用户可以用这个秒表做的唯一事情就是启动和停止它。在我们的UI构建好并准备好之后，我们可以添加更多的特性。但是，现在，让我们开始做这个吧。</p><p id="f5dd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们将从创建应用程序的主类开始。创建一个新的java文件，并将其命名为“StopwatchSwing.java”</p><pre class="mw mx my mz gt nf ng nh ni aw nj bi"><span id="7742" class="nk kx iq ng b gy nl nm l nn no">public class StopwatchSwing {<br/>}</span></pre><p id="2973" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">接下来，我们将创建main()方法，并让swing知道这是我们应用程序的主类(不要忘记导入)。</p><pre class="mw mx my mz gt nf ng nh ni aw nj bi"><span id="72c0" class="nk kx iq ng b gy nl nm l nn no">import java.awt.*;<br/>import javax.swing.*;</span><span id="bd7e" class="nk kx iq ng b gy np nm l nn no">public class StopwatchSwing {<br/><br/><br/>    public static void main(String[] args) {<br/>        SwingUtilities.<em class="nq">invokeLater</em>(new Runnable() {<br/>            @Override<br/>            public void run() {<br/>                new StopwatchSwing();<br/>            }<br/>        });<br/>    }<br/><br/>}</span></pre><p id="beef" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们给我们的类添加一些UI小部件。</p><pre class="mw mx my mz gt nf ng nh ni aw nj bi"><span id="6c7d" class="nk kx iq ng b gy nl nm l nn no">public class StopwatchSwing {<br/>    JFrame frame;<br/>    JPanel panel1, panel2;<br/>    JLabel timerDisplay;<br/>    JButton start, stop;<br/>    <br/>    .....</span><span id="f5dc" class="nk kx iq ng b gy np nm l nn no">}</span></pre><p id="79c9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">注意，我们添加了主JFrame、2个JPanels、timerDisplay JLabel以及Start和Stop JButtons。现在让我们在这个类的构造函数中设置UI。</p><pre class="mw mx my mz gt nf ng nh ni aw nj bi"><span id="06a3" class="nk kx iq ng b gy nl nm l nn no">public class StopwatchSwing {<br/><br/>    ....<br/><br/>    StopwatchSwing()<br/>    {</span><span id="6c21" class="nk kx iq ng b gy np nm l nn no">        <em class="nq">// Initializing the JFrame<br/>        </em>frame = new JFrame("Stopwatch");<br/>        frame.setSize(300,300);<br/>        frame.setMinimumSize(new Dimension(300,300));<br/>        frame.setLayout(new GridLayout(2,1));<br/>        frame.setDefaultCloseOperation(JFrame.<em class="nq">EXIT_ON_CLOSE</em>);</span><span id="0851" class="nk kx iq ng b gy np nm l nn no">    }<br/>}</span></pre><p id="5d36" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您可以看到，我们正在通过创建一个新的JFrame对象并将其命名为“秒表”来初始化我们的“框架”。这将是我们应用程序窗口的标题。然后，我们将帧的初始大小设置为300，300像素。我们给窗口增加了一个最小尺寸，这样用户就不能把窗口缩小到这个尺寸以下。接下来，我们添加框架的布局。我们在这里使用2行1列的GridLayout。最后，我们将这个框架的默认关闭操作设置为EXIT_ON_CLOSE。</p><p id="b602" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">接下来，我们将在每个网格元素中设置JPanels。</p><pre class="mw mx my mz gt nf ng nh ni aw nj bi"><span id="c849" class="nk kx iq ng b gy nl nm l nn no">StopwatchSwing()<br/>{<br/>    <em class="nq">// Initializing the JFrame<br/>    </em>frame = new JFrame("Stopwatch");<br/>    frame.setSize(300,300);<br/>    frame.setMinimumSize(new Dimension(300,300));<br/>    frame.setLayout(new GridLayout(2,1));<br/>    frame.setDefaultCloseOperation(JFrame.<em class="nq">EXIT_ON_CLOSE</em>);<br/><br/>    <em class="nq">// Setting Up Panels<br/>    </em>panel1 = new JPanel();<br/>    panel1.setLayout(new FlowLayout(FlowLayout.<em class="nq">CENTER</em>, 0, 50));<br/><br/>    panel2 = new JPanel();<br/>    panel2.setLayout(new FlowLayout(FlowLayout.<em class="nq">CENTER</em>));<br/>}<br/></span></pre><p id="4537" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们正在创建两个JPanels，并将它们的布局设置为FlowLayouts。现在让我们制作JLabel“timer display”并将其添加到“panel1”中。</p><pre class="mw mx my mz gt nf ng nh ni aw nj bi"><span id="21cc" class="nk kx iq ng b gy nl nm l nn no">StopwatchSwing()<br/>{<br/>    ...</span><span id="6004" class="nk kx iq ng b gy np nm l nn no">    <em class="nq">// Setting Up Panels<br/>    </em>panel1 = new JPanel();<br/>    panel1.setLayout(new FlowLayout(FlowLayout.<em class="nq">CENTER</em>, 0, 50));<br/><br/>    timerDisplay = new JLabel("Time: 000");<br/>    Font font = timerDisplay.getFont();<br/>    timerDisplay.setFont(new Font(font.getFontName(), font.getStyle(), 18));<br/><br/>    panel1.add(timerDisplay);<br/><br/><br/>    panel2 = new JPanel();<br/>    panel2.setLayout(new FlowLayout(FlowLayout.<em class="nq">CENTER</em>));<br/>}</span></pre><p id="d97b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们用一个新的JLabel对象初始化timerDisplay，并给它一个初始文本“Time: 000”。然后，我们将字体大小改为18。最后，我们将计时器显示添加到panel1。接下来，我们制作两个按钮，并将它们添加到panel2中。</p><pre class="mw mx my mz gt nf ng nh ni aw nj bi"><span id="58dc" class="nk kx iq ng b gy nl nm l nn no">StopwatchSwing()<br/>{<br/>    ...<br/><br/>    panel2 = new JPanel();<br/>    panel2.setLayout(new FlowLayout(FlowLayout.<em class="nq">CENTER</em>));<br/>    start = new JButton("Start");<br/>    stop = new JButton("Stop");<br/>    panel2.add(start);<br/>    panel2.add(stop);<br/>}</span></pre><p id="bc4c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们正在创建两个按钮并将它们添加到panel2。这里只剩下两样东西。将两个面板添加到JFrame并使框架可见。</p><pre class="mw mx my mz gt nf ng nh ni aw nj bi"><span id="0966" class="nk kx iq ng b gy nl nm l nn no">StopwatchSwing()<br/>{<br/>    <em class="nq">// Initializing the JFrame<br/>    </em>frame = new JFrame("Stopwatch");<br/>    frame.setSize(300,300);<br/>    frame.setMinimumSize(new Dimension(300,300));<br/>    frame.setLayout(new GridLayout(2,1));<br/>    frame.setDefaultCloseOperation(JFrame.<em class="nq">EXIT_ON_CLOSE</em>);<br/><br/>    <em class="nq">// Setting Up Panels<br/>    </em>panel1 = new JPanel();<br/>    panel1.setLayout(new FlowLayout(FlowLayout.<em class="nq">CENTER</em>, 0, 50));<br/><br/>    timerDisplay = new JLabel("Time: 000");<br/>    Font font = timerDisplay.getFont();<br/>    timerDisplay.setFont(new Font(font.getFontName(), font.getStyle(), 18));<br/><br/>    panel1.add(timerDisplay);<br/><br/><br/>    panel2 = new JPanel();<br/>    panel2.setLayout(new FlowLayout(FlowLayout.<em class="nq">CENTER</em>));<br/>    start = new JButton("Start");<br/>    stop = new JButton("Stop");<br/>    panel2.add(start);<br/>    panel2.add(stop);<br/><br/>    frame.add(panel1);<br/>    frame.add(panel2);<br/><br/>    frame.setVisible(true);<br/>}</span></pre><p id="8e68" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这是构造函数的完整代码。最后，我们将两个面板添加到框架中，并使用setVisible()方法使框架可见。</p><figure class="mw mx my mz gt jq gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/ab4c007505f03a1940ee1cecd0fbe19e.png" data-original-src="https://miro.medium.com/v2/resize:fit:568/format:webp/1*IGvDTUprbimo1nrUVEM7ww.png"/></div></figure><p id="c8c5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">此时，我们的应用程序看起来像这样。注意，点击Start和Stop按钮并不能做任何显而易见的事情，因为我们还没有任何监听器连接到它。</p><p id="2b6c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为了给按钮附加一个监听器，我们必须使用JButton类的addActionListener()方法。我们可以在按钮创建后添加侦听器，因此添加侦听器的好地方是构造函数。转到构造函数的末尾，像这样添加侦听器。</p><pre class="mw mx my mz gt nf ng nh ni aw nj bi"><span id="1ffc" class="nk kx iq ng b gy nl nm l nn no">import javax.swing.*;<br/>import java.awt.*;<br/>import java.awt.event.ActionEvent;<br/>import java.awt.event.ActionListener;<br/><br/>public class StopwatchSwing {<br/><br/>    ...<br/><br/>    StopwatchSwing()<br/>    {<br/>        ....<br/><br/>        frame.setVisible(true);<br/><br/>        <em class="nq">// Adding Listeners to the Buttons<br/><br/>        </em>start.addActionListener(new ActionListener() {<br/>            @Override<br/>            public void actionPerformed(ActionEvent e) {<br/><br/>            }<br/>        });<br/><br/>        stop.addActionListener(new ActionListener() {<br/>            @Override<br/>            public void actionPerformed(ActionEvent e) {<br/><br/>            }<br/>        });<br/><br/>    }<br/>}</span></pre><p id="2418" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这里，我们向每个按钮添加一个ActionListener。点击按钮时将执行的代码需要编写在每个ActionListener的actionPerformed()方法中。现在，我们将打印出一条关于点击Start和Stop方法的消息。</p><pre class="mw mx my mz gt nf ng nh ni aw nj bi"><span id="1c28" class="nk kx iq ng b gy nl nm l nn no">start.addActionListener(new ActionListener() {<br/>            @Override<br/>            public void actionPerformed(ActionEvent e) {<br/>                System.<em class="nq">out</em>.println("Start Pressed");<br/><em class="nq"><br/>            </em>}<br/>        });<br/><br/>stop.addActionListener(new ActionListener() {<br/>            @Override<br/>            public void actionPerformed(ActionEvent e) {<br/>                System.<em class="nq">out</em>.println("Stop Pressed");<em class="nq"><br/>            </em>}<br/>        });</span></pre><p id="fcf0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">编写完这段代码后，运行这段代码并点击几次Start和Stop方法，您将会看到相应的消息正在控制台上打印出来。</p><figure class="mw mx my mz gt jq gh gi paragraph-image"><div role="button" tabindex="0" class="nb nc di nd bf ne"><div class="gh gi ns"><img src="../Images/9d0a0b5e248a7b619f1a10e00ee6d940.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mFy2AIM8TFmHdjt8rNsu8A.png"/></div></div></figure><p id="93bf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在让我们继续将秒表添加到这个类中。我们将从使这个类成为观察者开始，因为这个类将观察秒表对象。</p><pre class="mw mx my mz gt nf ng nh ni aw nj bi"><span id="4402" class="nk kx iq ng b gy nl nm l nn no">public class StopwatchSwing implements Observer {<br/><br/>    <em class="nq">...</em><br/><br/>    @Override<br/>    public void update(long time) {<br/>        timerDisplay.setText("Time: "+time);<br/>    }<br/>}</span></pre><p id="5249" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">需要覆盖update()方法，在其中，我们将显示使用timerDisplay JLabel的setText()方法接收的时间。接下来，我们将秒表添加到我们的类中。</p><pre class="mw mx my mz gt nf ng nh ni aw nj bi"><span id="fbf2" class="nk kx iq ng b gy nl nm l nn no">public class StopwatchSwing implements Observer {<br/><br/>    Stopwatch sw;<br/>    .....</span><span id="d10e" class="nk kx iq ng b gy np nm l nn no"><br/>    StopwatchSwing()<br/>    {<br/>        sw = new Stopwatch();<br/>        sw.registerObserver(this);<br/>        .....<br/>    }<br/>}</span></pre><p id="b7fb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们正在创建一个新的秒表对象，并注册一个观察者，这个观察者就是StopwatchSwing类本身。按下开始按钮时，我们应该启动秒表，按下停止按钮时，我们应该停止秒表。因此，我们必须改变听众。</p><pre class="mw mx my mz gt nf ng nh ni aw nj bi"><span id="3b7a" class="nk kx iq ng b gy nl nm l nn no">start.addActionListener(new ActionListener() {<br/>            @Override<br/>            public void actionPerformed(ActionEvent e) {<br/>                sw.start();<em class="nq"><br/>            </em>}<br/>        });<br/><br/>        stop.addActionListener(new ActionListener() {<br/>            @Override<br/>            public void actionPerformed(ActionEvent e) {<br/>                sw.stop();<em class="nq"><br/>            </em>}<br/>        });</span></pre><p id="c7b7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在启动监听器中，我们只是添加了sw.start()来启动秒表，在停止监听器中，我们只是添加了sw.stop()来暂停秒表。</p><p id="46a0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，将按钮侦听器的逻辑保留在另一个函数中是一个很好的做法。在下一篇教程中，当按钮监听器逻辑变得更加复杂时，您将会理解这一点的必要性。</p><pre class="mw mx my mz gt nf ng nh ni aw nj bi"><span id="22b8" class="nk kx iq ng b gy nl nm l nn no">StopwatchSwing()<br/>{<br/>    ....<br/><br/><br/>    <em class="nq">// Adding Listeners to the Buttons<br/><br/>    </em>start.addActionListener(new ActionListener() {<br/>        @Override<br/>        public void actionPerformed(ActionEvent e) {<br/>            handleStartPress();<br/>        }<br/>    });<br/><br/>    stop.addActionListener(new ActionListener() {<br/>        @Override<br/>        public void actionPerformed(ActionEvent e) {<br/>            handleStopPress();<br/>        }<br/>    });<br/><br/><br/>}<br/><br/>private void handleStartPress() {<br/>    sw.start();<br/>}<br/>private void handleStopPress(){<br/>    sw.stop();<br/>}</span></pre><p id="38ff" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们制作了两个方法:handleStartPress()和handleStopPress()，它们将负责处理适当的按钮按压。</p><p id="1b58" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">记住我们到目前为止做了什么。</p><ul class=""><li id="6985" class="lz ma iq ka b kb kc kf kg kj mb kn mc kr md kv me mf mg mh bi translated">我们正在创建一个秒表对象，并将StopwatchSwing对象注册为观察者。</li><li id="24fa" class="lz ma iq ka b kb mj kf mk kj ml kn mm kr mn kv me mf mg mh bi translated">当点击start按钮时，秒表的Start()方法被调用。</li><li id="a67c" class="lz ma iq ka b kb mj kf mk kj ml kn mm kr mn kv me mf mg mh bi translated">start()方法创建一个新线程并启动该线程。</li><li id="eccf" class="lz ma iq ka b kb mj kf mk kj ml kn mm kr mn kv me mf mg mh bi translated">线程每隔10毫秒开始向所有观察者通知时间。</li><li id="2472" class="lz ma iq ka b kb mj kf mk kj ml kn mm kr mn kv me mf mg mh bi translated">因为我们的StopwatchSwing类是这个秒表的观察者，所以它的update()方法每隔10毫秒被调用一次，update()方法用从秒表类接收的时间更新timerDisplay中的时间。</li></ul><p id="fb9b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在运行您的代码。点击开始按钮时，您的秒表应该开始更新timerDisplay JLabel。按下停止按钮时，秒表将暂停。再次点击Start，它将恢复。我们重置秒表的唯一方法是再次启动应用程序。</p><figure class="mw mx my mz gt jq gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/a54d2b8858d9958958a5babe49e3827f.png" data-original-src="https://miro.medium.com/v2/resize:fit:578/format:webp/1*CVRGolltoMqGqHQmnbnKZw.png"/></div></figure><p id="0950" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">当然，我们不希望通过一次又一次重启应用程序来重置秒表。事实上，我们必须为用户提供启动、暂停、恢复和停止的功能。如果没有这些特性，我们的秒表应用程序就毫无用处。请记住，核心秒表类并没有实现所有这些特性。它只能暂停和恢复。向用户提供这些功能是StopwatchSwing类的责任。这是我们将在下一个教程中解决的问题。</strong></p><h1 id="3336" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">下一个教程:</h1><p id="1e53" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated"><a class="ae mi" href="https://rajtilakls2510.medium.com/adding-start-pause-resume-and-stop-to-our-app-part-5-dd562d82d0a3" rel="noopener">为我们的应用程序添加开始、暂停、恢复和停止功能。</a></p><h1 id="e1b5" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">完整代码</h1><p id="f3f3" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated"><a class="ae mi" href="https://github.com/rajtilakls2510/Stopwatch/tree/S4_Setting_up_the_UI_of_Swing_App" rel="noopener ugc nofollow" target="_blank">完整的代码在这里。</a></p><p id="febe" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">StopwatchSwing.java</p><pre class="mw mx my mz gt nf ng nh ni aw nj bi"><span id="f568" class="nk kx iq ng b gy nl nm l nn no">import javax.swing.*;<br/>import java.awt.*;<br/>import java.awt.event.ActionEvent;<br/>import java.awt.event.ActionListener;<br/><br/>public class StopwatchSwing implements Observer {<br/><br/>    Stopwatch sw;<br/>    JFrame frame;<br/>    JPanel panel1, panel2;<br/>    JLabel timerDisplay;<br/>    JButton start, stop;<br/><br/>    StopwatchSwing()<br/>    {<br/>        sw = new Stopwatch();<br/>        sw.registerObserver(this);<br/><br/>        <em class="nq">// Initializing the JFrame<br/>        </em>frame = new JFrame("Stopwatch");<br/>        frame.setSize(300,300);<br/>        frame.setMinimumSize(new Dimension(300,300));<br/>        frame.setLayout(new GridLayout(2,1));<br/>        frame.setDefaultCloseOperation(JFrame.<em class="nq">EXIT_ON_CLOSE</em>);<br/><br/>        <em class="nq">// Setting Up Panels<br/>        </em>panel1 = new JPanel();<br/>        panel1.setLayout(new FlowLayout(FlowLayout.<em class="nq">CENTER</em>, 0, 50));<br/><br/>        timerDisplay = new JLabel("Time: 000");<br/>        Font font = timerDisplay.getFont();<br/>        timerDisplay.setFont(new Font(font.getFontName(), font.getStyle(), 18));<br/><br/>        panel1.add(timerDisplay);<br/><br/><br/>        panel2 = new JPanel();<br/>        panel2.setLayout(new FlowLayout(FlowLayout.<em class="nq">CENTER</em>));<br/>        start = new JButton("Start");<br/>        stop = new JButton("Stop");<br/>        panel2.add(start);<br/>        panel2.add(stop);<br/><br/>        frame.add(panel1);<br/>        frame.add(panel2);<br/><br/>        frame.setVisible(true);<br/><br/><br/>        <em class="nq">// Adding Listeners to the Buttons<br/><br/>        </em>start.addActionListener(new ActionListener() {<br/>            @Override<br/>            public void actionPerformed(ActionEvent e) {<br/>                handleStartPress();<br/>            }<br/>        });<br/><br/>        stop.addActionListener(new ActionListener() {<br/>            @Override<br/>            public void actionPerformed(ActionEvent e) {<br/>                handleStopPress();<br/>            }<br/>        });<br/><br/><br/>    }<br/><br/>    private void handleStartPress() {<br/>        sw.start();<br/>    }<br/>    private void handleStopPress(){<br/>        sw.stop();<br/>    }<br/><br/>    public static void main(String[] args) {<br/>        SwingUtilities.<em class="nq">invokeLater</em>(new Runnable() {<br/>            @Override<br/>            public void run() {<br/>                new StopwatchSwing();<br/>            }<br/>        });<br/>    }<br/><br/><br/>    @Override<br/>    public void update(long time) {<br/>        timerDisplay.setText("Time: "+time);<br/>    }<br/>}</span></pre><h1 id="9d55" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">参考资料:</h1><ul class=""><li id="9f89" class="lz ma iq ka b kb lu kf lv kj nu kn nv kr nw kv me mf mg mh bi translated">书籍:<a class="ae mi" href="https://www.oreilly.com/library/view/head-first-design/0596007124/" rel="noopener ugc nofollow" target="_blank"> Head First设计模式</a>，作者埃里克·弗里曼、伊丽莎白·罗布森、伯特·贝茨、凯西·塞拉。</li></ul></div></div>    
</body>
</html>