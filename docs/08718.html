<html>
<head>
<title>Flutter Widget Lifecycle</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Flutter小部件生命周期</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/flutter-widget-lifecycle-33cb67459d0?source=collection_archive---------0-----------------------#2021-05-29">https://levelup.gitconnected.com/flutter-widget-lifecycle-33cb67459d0?source=collection_archive---------0-----------------------#2021-05-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="0be5" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">在Flutter中探索小部件生命周期方法</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/788ed7a48302cfcf76fc08a40f54299c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MYp9iYKFPRp8bumjR6KWRA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">Flutter小部件生命周期</figcaption></figure><p id="8f64" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">像应用程序生命周期一样，flutter中的小部件也有与之相关的生命周期方法。在本文中，我们将看看flutter中的小部件生命周期方法。</p><p id="81b7" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果你正在寻找Flutter应用程序生命周期的方法，请查看这篇文章:</p><div class="lr ls gp gr lt lu"><a rel="noopener  ugc nofollow" target="_blank" href="/app-lifecycle-in-flutter-e4ba686d16fe"><div class="lv ab fo"><div class="lw ab lx cl cj ly"><h2 class="bd ir gy z fp lz fr fs ma fu fw ip bi translated">颤振中的应用生命周期</h2><div class="mb l"><h3 class="bd b gy z fp lz fr fs ma fu fw dk translated">探索具有可重用逻辑的应用生命周期方法</h3></div><div class="mc l"><p class="bd b dl z fp lz fr fs ma fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="md l"><div class="me l mf mg mh md mi kp lu"/></div></div></a></div><h1 id="aaee" class="mj mk iq bd ml mm mn mo mp mq mr ms mt jw mu jx mv jz mw ka mx kc my kd mz na bi translated">小部件生命周期方法</h1><p id="051f" class="pw-post-body-paragraph kv kw iq kx b ky nb jr la lb nc ju ld le nd lg lh li ne lk ll lm nf lo lp lq ij bi translated">Flutter中的小部件有以下相关的生命周期方法:</p><ul class=""><li id="e369" class="ng nh iq kx b ky kz lb lc le ni li nj lm nk lq nl nm nn no bi translated">initState: 当这个对象被插入到树中时，这个方法被调用。这将对每个状态对象调用一次。这里我们可以初始化小部件所需的变量，比如<em class="np"> AnimationController </em>。</li><li id="4971" class="ng nh iq kx b ky nq lb nr le ns li nt lm nu lq nl nm nn no bi translated"><strong class="kx ir"> build: </strong>每次重新构建小部件时都会调用这个方法。这可以在调用<em class="np"> initState </em>、<em class="np"> didChangeDependencies、diddupdatewidget</em>之后，或者通过调用<em class="np"> setState来改变状态。</em></li><li id="876e" class="ng nh iq kx b ky nq lb nr le ns li nt lm nu lq nl nm nn no bi translated"><strong class="kx ir"> didChangeDependencies: </strong>在<em class="np"> initState </em>之后，当状态对象的依赖关系通过InheritedWidget改变时，立即调用该方法。</li><li id="e466" class="ng nh iq kx b ky nq lb nr le ns li nt lm nu lq nl nm nn no bi translated"><strong class="kx ir"> didUpdateWidget: </strong>每当小部件配置发生变化时，就会调用这个方法。一个典型的例子是当一个父部件通过构造函数传递一些变量给子部件。</li><li id="0455" class="ng nh iq kx b ky nq lb nr le ns li nt lm nu lq nl nm nn no bi translated"><strong class="kx ir">停用:</strong>当对象从树中移除时，调用该方法。</li><li id="9841" class="ng nh iq kx b ky nq lb nr le ns li nt lm nu lq nl nm nn no bi translated"><strong class="kx ir"> dispose: </strong>当这个对象从树中永久移除时，这个方法被调用。这里我们应该释放这个对象保留的任何资源，比如停止动画。调用该方法的一个例子是使用导航器的<em class="np"> pushReplacement() </em>用一个新的小部件替换当前的小部件。</li></ul><p id="2440" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">让我们借助一个简单的例子来更好地理解它。</p></div><div class="ab cl nv nw hu nx" role="separator"><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa"/></div><div class="ij ik il im in"><h1 id="185d" class="mj mk iq bd ml mm oc mo mp mq od ms mt jw oe jx mv jz of ka mx kc og kd mz na bi translated">履行</h1><p id="5eea" class="pw-post-body-paragraph kv kw iq kx b ky nb jr la lb nc ju ld le nd lg lh li ne lk ll lm nf lo lp lq ij bi translated">让我们首先设置项目，这样我们就可以更多地关注小部件生命周期方面。</p><p id="5872" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">使用以下代码在<code class="fe oh oi oj ok b">main.dart</code>文件中创建一个新的有状态小部件<code class="fe oh oi oj ok b">MyApp</code>:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ol om l"/></div></figure><p id="cd8c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这里我们创建一个整型变量<code class="fe oh oi oj ok b">counter</code>，初始值设为0。我们还有<code class="fe oh oi oj ok b">resetCounter()</code>，它将值重置为0。我们把柜台递给<code class="fe oh oi oj ok b">MyHomePage</code>。这里没什么特别的。</p><p id="7dff" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">让我们继续创建一条新路线<code class="fe oh oi oj ok b">ExamplePage</code>。这只是为了让我们可以看到<code class="fe oh oi oj ok b">deactivate</code>和<code class="fe oh oi oj ok b">dispose</code>的动作。</p><p id="737a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">向其中添加以下代码:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ol om l"/></div></figure><p id="7ba1" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我希望代码是不言自明的。让我们进入主要部分。</p><p id="1a28" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">用一个整数<code class="fe oh oi oj ok b">counter</code>和一个最终函数<code class="fe oh oi oj ok b">onPress</code>创建一个新的有状态小部件<code class="fe oh oi oj ok b">MyHomePage</code>。还要加上<code class="fe oh oi oj ok b">AnimationController</code>需要的<code class="fe oh oi oj ok b">SingleTickerProviderStateMixin</code>。添加一个私有方法<code class="fe oh oi oj ok b">_incrementCounter</code>，它将计数器的值增加1。代码应该如下所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ol om l"/></div></figure><blockquote class="on oo op"><p id="66a4" class="kv kw np kx b ky kz jr la lb lc ju ld oq lf lg lh or lj lk ll os ln lo lp lq ij bi translated">从不可变类扩展而来的类中不应该有非最终字段(在这个例子中是 <code class="fe oh oi oj ok b"><strong class="kx ir"><em class="iq">counter</em></strong></code> <strong class="kx ir">变量)。这只是用于演示目的。</strong></p></blockquote><p id="5d65" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在让我们覆盖所有的小部件生命周期方法，如下所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ol om l"/></div></figure><blockquote class="on oo op"><p id="4f44" class="kv kw np kx b ky kz jr la lb lc ju ld oq lf lg lh or lj lk ll os ln lo lp lq ij bi translated"><strong class="kx ir">为简洁起见，本文仅包含必要的代码，您可以在文章末尾找到GitHub到完整源代码库的链接。</strong></p></blockquote><p id="812f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这里我们在<code class="fe oh oi oj ok b">initState()</code>中初始化<code class="fe oh oi oj ok b">AnimationController</code>，并在<code class="fe oh oi oj ok b">dispose()</code>中处理它，如开始所述。我们只是提供了用于日志记录的打印语句，并调用适当的<code class="fe oh oi oj ok b">super()</code>构造函数。</p><p id="78f9" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在<code class="fe oh oi oj ok b">didUpdateWidget</code>中，我们检查从父小部件接收的当前计数器值与当前小部件的值是否相等。如果不同，我们只需记录它。</p><p id="bb76" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">让我们检查一下构建方法:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ol om l"/></div></figure><p id="f132" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">当按下<code class="fe oh oi oj ok b">floatingActionButton</code>时，我们提供来自父节点的初始值并增加1。我们还有一个重置按钮，它将父节点的值重置为0。这样，我们就可以看到<code class="fe oh oi oj ok b">didUpdateWidget</code>在起作用。</p><p id="0c46" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这是用户界面的样子:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ot"><img src="../Images/4e49a942417dc65e14e2c6b0a10f1dc7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TTetn3VdoxgGWQGGFHa2jQ.png"/></div></div></figure><p id="1ee2" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">当你打开应用程序时，你会看到<code class="fe oh oi oj ok b">initState</code>和<code class="fe oh oi oj ok b">didChangeDependencies</code>方法被调用。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ou"><img src="../Images/733659b62b4e0c2dfe19243a9b9c31f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sCMWB-Da1RIY6j7Y-1n2oQ.png"/></div></div></figure><p id="4d06" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">点击浮动动作按钮增加计数器，然后按下<em class="np">重置计数</em>按钮。您将看到调用了<code class="fe oh oi oj ok b">didUpdateWidget</code>方法，因为我们正在从父节点重置计数器值。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ov"><img src="../Images/8408249d44db8fe862adcbd3a0fec2c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Dtru7Wcshm_0_2Tpihc6sQ.png"/></div></div></figure><p id="2b29" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在，点击<em class="np">导航到新路线</em>按钮，您将看到<code class="fe oh oi oj ok b">deactivate</code>和<code class="fe oh oi oj ok b">dispose</code>被调用。这也将处理掉我们创建的<code class="fe oh oi oj ok b">AnimationController</code>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ow"><img src="../Images/866301609def424fdd8e59608fbb1f8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A3Sr1zaKb80TrdpWUqn5nA.png"/></div></div></figure></div><div class="ab cl nv nw hu nx" role="separator"><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa"/></div><div class="ij ik il im in"><h1 id="4f4b" class="mj mk iq bd ml mm oc mo mp mq od ms mt jw oe jx mv jz of ka mx kc og kd mz na bi translated">结论</h1><p id="a36c" class="pw-post-body-paragraph kv kw iq kx b ky nb jr la lb nc ju ld le nd lg lh li ne lk ll lm nf lo lp lq ij bi translated">在本文中，我们通过一个简单的例子探索了Flutter中不同的小部件生命周期方法。</p><p id="c3a1" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">完整的源代码可以在下面的链接中找到:</p><div class="lr ls gp gr lt lu"><a href="https://github.com/harshshinde07/Flutter-Widget-Lifecycle" rel="noopener  ugc nofollow" target="_blank"><div class="lv ab fo"><div class="lw ab lx cl cj ly"><h2 class="bd ir gy z fp lz fr fs ma fu fw ip bi translated">harsh shinde 07/Flutter-Widget-生命周期</h2><div class="mb l"><h3 class="bd b gy z fp lz fr fs ma fu fw dk translated">这个项目是一个Flutter应用程序的起点。一个…</h3></div><div class="mc l"><p class="bd b dl z fp lz fr fs ma fu fw dk translated">github.com</p></div></div><div class="md l"><div class="ox l mf mg mh md mi kp lu"/></div></div></a></div></div><div class="ab cl nv nw hu nx" role="separator"><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa"/></div><div class="ij ik il im in"><h2 id="ca4c" class="oy mk iq bd ml oz pa dn mp pb pc dp mt le pd pe mv li pf pg mx lm ph pi mz pj bi translated">感谢您阅读这篇文章。如果你喜欢这篇文章或者学到了新的东西，尽可能多地鼓掌以示支持。👏</h2><h2 id="eedf" class="oy mk iq bd ml oz pa dn mp pb pc dp mt le pd pe mv li pf pg mx lm ph pi mz pj bi translated">这真的激励我继续写更多！:)</h2><h2 id="ff21" class="oy mk iq bd ml oz pa dn mp pb pc dp mt le pd pe mv li pf pg mx lm ph pi mz pj bi translated">如果有错误，请随时纠正。</h2><h2 id="d21c" class="oy mk iq bd ml oz pa dn mp pb pc dp mt le pd pe mv li pf pg mx lm ph pi mz pj bi translated">我们来连线:</h2><ul class=""><li id="344f" class="ng nh iq kx b ky nb lb nc le pk li pl lm pm lq nl nm nn no bi translated"><a class="ae pn" href="https://github.com/harshshinde07/" rel="noopener ugc nofollow" target="_blank"> GitHub </a></li><li id="c9de" class="ng nh iq kx b ky nq lb nr le ns li nt lm nu lq nl nm nn no bi translated"><a class="ae pn" href="https://www.linkedin.com/in/harshshinde07/" rel="noopener ugc nofollow" target="_blank">领英</a></li></ul></div><div class="ab cl nv nw hu nx" role="separator"><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa"/></div><div class="ij ik il im in"><h1 id="6391" class="mj mk iq bd ml mm oc mo mp mq od ms mt jw oe jx mv jz of ka mx kc og kd mz na bi translated">分级编码</h1><p id="fe23" class="pw-post-body-paragraph kv kw iq kx b ky nb jr la lb nc ju ld le nd lg lh li ne lk ll lm nf lo lp lq ij bi translated">感谢您成为我们社区的一员！<a class="ae pn" href="https://www.youtube.com/channel/UC3v9kBR_ab4UHXXdknz8Fbg?sub_confirmation=1" rel="noopener ugc nofollow" target="_blank">订阅我们的YouTube频道</a>或者加入<a class="ae pn" href="https://skilled.dev/" rel="noopener ugc nofollow" target="_blank"> <strong class="kx ir"> Skilled.dev编码面试课程</strong> </a>。</p><div class="lr ls gp gr lt lu"><a href="https://skilled.dev" rel="noopener  ugc nofollow" target="_blank"><div class="lv ab fo"><div class="lw ab lx cl cj ly"><h2 class="bd ir gy z fp lz fr fs ma fu fw ip bi translated">编写面试问题+获得开发工作</h2><div class="mb l"><h3 class="bd b gy z fp lz fr fs ma fu fw dk translated">掌握编码面试的过程</h3></div><div class="mc l"><p class="bd b dl z fp lz fr fs ma fu fw dk translated">技术开发</p></div></div><div class="md l"><div class="po l mf mg mh md mi kp lu"/></div></div></a></div></div></div>    
</body>
</html>