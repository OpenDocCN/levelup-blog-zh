# Swift 提示:在功能上从异步到同步

> 原文：<https://levelup.gitconnected.com/tip-for-swift-from-async-to-sync-in-function-1-c1337f0d60b3>

我之前的故事 [**12 个让 Swift 少代码的小技巧**](https://medium.com/@zhuyp/12-tips-to-make-swift-more-concise-4f4ed63f3063) 一直受到开发者的喜爱，不断鼓励我分享更多的经验。这个故事是关于多任务的，我期待着帮助开发人员。

![](img/ff14a99ef5554575f01c45a6c2a4dda6.png)

苹果公司

*问:如何实现多个异步任务之间的同步？*

例如，我们有一个登录任务。此任务需要 3 个异步子任务，它们之间有一个序列。任务 2 将在任务 1 成功后执行，任务 3 将在任务 2 成功后执行，登录操作将在三个子任务全部成功执行后完成。

# **第一部分**

在早期，我通常这样做:

使用块

虽然做到了以上要求，但是会带来一个问题，就是代码难读，以至于后期很难排错。想象一下，未来会有更多的异步方法需要同步，这是一场灾难。我们可以在上面的代码片段中看到被称为**末日金字塔**的可怕东西，这是我们作为开发者不喜欢做/看到的事情。

# 第二部分

是的，代码应该是为人类写的，而不是机器。

所以我们可以:

使用调度信号量

如您所见，这将减少代码。**使用*调度信号量*阻塞异步操作实现同步**。请注意，不要在主队列中直接调用这些方法，否则您的应用程序将不会响应 UI 的事件。

# 较好的

上面的代码确实变得更容易阅读，但是功能还不够强大。例如，如果您需要显示确切的错误信息。从上面来看，方法只返回一个 Bool 类型的值，显然不能满足需求。

我们可以使用异常抛出。

# 请跟我来。让我们在接下来的帖子中见面。

以前的故事:

1.  [**UICollectionView:经常出现的错误**](https://medium.com/@zhuyp/uicollectionview-an-error-that-often-occurs-a494ca70fc4b)
2.  [**12 招使迅捷少码**](https://medium.com/@zhuyp/12-tips-to-make-swift-more-concise-4f4ed63f3063)
3.  [**IOS 还是 IOS？**](https://medium.com/@zhuyp/ios-or-ios-7c7d23905c35)

> ***关于我:***我是 iOS 的开发者，曾经在 XAG 工作。现在我想在 medium 上分享故事，总结自己的经验来帮助别人。如果你有任何问题，请给我反馈，我会积极给你我的答复。目前，我的期望是获得 100 名追随者。需要你的善意支持，谢谢。