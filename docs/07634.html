<html>
<head>
<title>Master Forms in React with Formik 2 and Typescript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Formik 2和Typescript反应中的母版表单</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/master-forms-in-react-with-formik-2-and-typescript-fed3b89f03?source=collection_archive---------4-----------------------#2021-03-02">https://levelup.gitconnected.com/master-forms-in-react-with-formik-2-and-typescript-fed3b89f03?source=collection_archive---------4-----------------------#2021-03-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="d50a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi ko translated"><span class="l kp kq kr bm ks kt ku kv kw di">我</span>最近花了很多时间重构一个基于Formik的项目。除了升级所有旧的React功能，我还享受了Formik 2带来的所有好东西。</p><p id="00dd" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果您正在处理表单(大的或小的),并且珍惜自己宝贵的生命时间，我强烈推荐您去看看那个库。</p><figure class="ky kz la lb gt lc gh gi paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="gh gi kx"><img src="../Images/81c6153515595ebf46eb974f2b900647.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*scIxkWKTvleBeYCm5QZfxw.png"/></div></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk translated">在<a class="ae ln" href="https://unsplash.com/@kellysikkema?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">凯莉·西克玛</a>的帮助下<a class="ae ln" href="https://unsplash.com/s/photos/paper?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a></figcaption></figure><h1 id="a743" class="lo lp it bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">福米克有什么用？</h1><p id="9632" class="pw-post-body-paragraph jq jr it js b jt mm jv jw jx mn jz ka kb mo kd ke kf mp kh ki kj mq kl km kn im bi translated">简而言之，如果您还没有使用过Formik，它可以帮您完成以下繁琐的任务:</p><ul class=""><li id="813a" class="mr ms it js b jt ju jx jy kb mt kf mu kj mv kn mw mx my mz bi translated">与表单组件交互时管理状态</li><li id="6f46" class="mr ms it js b jt na jx nb kb nc kf nd kj ne kn mw mx my mz bi translated">嵌套表单</li><li id="bb36" class="mr ms it js b jt na jx nb kb nc kf nd kj ne kn mw mx my mz bi translated">提交生命周期</li><li id="4b2a" class="mr ms it js b jt na jx nb kb nc kf nd kj ne kn mw mx my mz bi translated">错误处理和验证</li><li id="7293" class="mr ms it js b jt na jx nb kb nc kf nd kj ne kn mw mx my mz bi translated">从属字段</li></ul><p id="42a3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">两年没有接触过Formik，我再次意识到它是一个真正令人敬畏的库，可以在React中管理表单而不会有通常的头痛。如果你还没有读过Formik，我强烈建议你<a class="ae ln" href="https://formik.org/docs/overview" rel="noopener ugc nofollow" target="_blank">去这里</a>看看介绍。</p><h1 id="509a" class="lo lp it bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">那个不太基础的Formik类型脚本示例</h1><p id="0602" class="pw-post-body-paragraph jq jr it js b jt mm jv jw jx mn jz ka kb mo kd ke kf mp kh ki kj mq kl km kn im bi translated">关于如何设置Formik的指南，我建议你查看一下<a class="ae ln" href="https://formik.org/docs/overview" rel="noopener ugc nofollow" target="_blank">他们的文档</a>。相反，我将直接进入一个更完整的示例，它是完全键入的，并且使用日期字段而不是通常的文本输入:</p><figure class="ky kz la lb gt lc"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="4978" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这是一个更好的“Hello World”示例，它展示了Formik如何通过标识表单字段来连接到您的状态。</p><p id="1d71" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">最重要的是,<code class="fe nh ni nj nk b">onSubmit</code>函数模拟异步表单提交，您可以看到Formik提供的内置支持有多好。这会给我们带来这个漂亮的用户界面:</p><figure class="ky kz la lb gt lc gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/88f18a4900c8313aa3caf991aba5c4e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1256/format:webp/1*7B-K60ODvMErnGHXjgjyYA.png"/></div></figure><p id="bf7f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果你运行这个例子，你会看到所有的事情都处理得很好，而不需要我们到处写处理程序。到目前为止，一切顺利。</p><h1 id="adc5" class="lo lp it bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">如何设置这些字段的样式？</h1><p id="0ca0" class="pw-post-body-paragraph jq jr it js b jt mm jv jw jx mn jz ka kb mo kd ke kf mp kh ki kj mq kl km kn im bi translated">现在这个表单没有太多的设计。当然，您总是可以使用一些全局CSS来定位这些字段，但是Formik实际上为您提供了一种简单的方法来设置您自己的字段样式。</p><p id="5051" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">使用上面的<code class="fe nh ni nj nk b">Field</code>组件，您实际上可以将一个组件作为道具:</p><figure class="ky kz la lb gt lc"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="4663" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我不是设计师，但这能完成工作:</p><figure class="ky kz la lb gt lc gh gi paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="gh gi nm"><img src="../Images/0f22bb300694f1ca3c2dbd8e8ee5cdd1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dRl_jm22sBRx7qsqpACeiw.png"/></div></div></figure><p id="4e86" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">多满足啊！我们现在有了集中的输入风格，自动的状态处理和一些看起来像真实表单的东西。</p><h1 id="b8e6" class="lo lp it bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">嵌套的Formik表单呢？</h1><p id="d7ff" class="pw-post-body-paragraph jq jr it js b jt mm jv jw jx mn jz ka kb mo kd ke kf mp kh ki kj mq kl km kn im bi translated">我听到了。在现实中，表单很少是作为一个单一的组件构建的，而是随着复杂性的增加而分裂成许多组件。</p><p id="3d88" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">幸运的是，Formik也没有让您失望，它提供了三种集成嵌套表单的方法:</p><ul class=""><li id="ae90" class="mr ms it js b jt ju jx jy kb mt kf mu kj mv kn mw mx my mz bi translated">根据您所在州的形状使用字段命名约定</li><li id="de0c" class="mr ms it js b jt na jx nb kb nc kf nd kj ne kn mw mx my mz bi translated">把二传手作为道具传下来</li><li id="1719" class="mr ms it js b jt na jx nb kb nc kf nd kj ne kn mw mx my mz bi translated">我将在下一节讨论这个问题</li></ul><p id="9512" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们看看第一个:</p><figure class="ky kz la lb gt lc"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="9497" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">简单吧。我们所要做的就是根据我们所在州的属性路径来命名我们的字段，Formik将自动映射该字段！</p><p id="8825" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果您希望保持表单组件的自治性或者使用外部库，那么您可能希望查看Formik的处理程序:</p><figure class="ky kz la lb gt lc"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="8bf2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">使用Formik <code class="fe nh ni nj nk b">props</code>的<code class="fe nh ni nj nk b">setFieldValue</code>可以让您轻松干净地处理封装组件。</p><p id="4946" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这就是我们现在的情况:</p><figure class="ky kz la lb gt lc gh gi paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="gh gi nn"><img src="../Images/1e3ea9f0182401aedf7cb4ab977cbadd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WzdH6n4nblcp4_3n5HqWOw.png"/></div></div></figure><h1 id="d6f2" class="lo lp it bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">useFormikContext的完全灵活性</h1><p id="7fc4" class="pw-post-body-paragraph jq jr it js b jt mm jv jw jx mn jz ka kb mo kd ke kf mp kh ki kj mq kl km kn im bi translated">您可能会遇到这样的情况，其中一个子窗体变得非常复杂，您需要额外的灵活性。这就是<code class="fe nh ni nj nk b">useFormikContext</code>发挥作用的地方。</p><p id="b137" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这实际上是从React的上下文中获取的整个Formik实例。这是一个简单的标签编辑器，它独立存在于我们的表单中，甚至可以用单独的键进行定制:</p><figure class="ky kz la lb gt lc"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="e44f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们自由的小鸟来了:</p><figure class="ky kz la lb gt lc gh gi paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="gh gi no"><img src="../Images/9a5f457e4df8971e56135daa04c29588.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Db2DeLLl-oxSu-4Su0BYAw.png"/></div></div></figure><p id="c01c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">显然，你可以走得更远，因为<code class="fe nh ni nj nk b">useFormikContext()</code>向你开放了所有的生命周期方法和助手。</p><h1 id="e827" class="lo lp it bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">字段数组</h1><p id="14b8" class="pw-post-body-paragraph jq jr it js b jt mm jv jw jx mn jz ka kb mo kd ke kf mp kh ki kj mq kl km kn im bi translated">我对表单的最后一点看法是:列表。保持表单项目的有序和同步很容易陷入一种“宝贝再见”的境地(看到我做了什么吗？).</p><p id="76b6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我不会在这里发布一个关于字段数组的例子，因为在Formik的文档中已经很好地介绍了这个功能。我强烈推荐去看看，它让我的生活变得更轻松。</p></div><div class="ab cl np nq hx nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="im in io ip iq"><p id="c7ce" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="nw">大家好，我是弗里德里希！我在工作中是一名经理和开发人员，在家里是一名业余爱好者——厨师、音乐家、数据和语言爱好者。你可以在</em><a class="ae ln" href="https://bit.ly/3m0DXaT" rel="noopener ugc nofollow" target="_blank"><em class="nw">LinkedIn</em></a><em class="nw">上找我。</em></p></div></div>    
</body>
</html>