<html>
<head>
<title>Improving Vim Workflow With fzf</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用fzf改进Vim工作流</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/improving-vim-workflow-with-fzf-3f8bedaca1b2?source=collection_archive---------4-----------------------#2020-11-18">https://levelup.gitconnected.com/improving-vim-workflow-with-fzf-3f8bedaca1b2?source=collection_archive---------4-----------------------#2020-11-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/ab8e5a480dafeb0e30d47cccff25f1d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tAk48iaOO6DV9cK-o42YQQ.jpeg"/></div></div></figure><p id="7bb7" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果你从未听说过<a class="ae kz" href="https://github.com/junegunn/fzf" rel="noopener ugc nofollow" target="_blank"> fzf </a>，它是一个非常方便的通用命令行模糊查找器。除了命令行，它也是一个流行的Vim插件。如果你想知道，模糊查找器是一个工具，它可以帮助你找到你要找的东西，而不需要写全名。</p><p id="96c9" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">作为一个Vim用户，我总是痴迷于尽可能少的击键次数。拥有在Vim中快速打开文件的能力对我来说超级有用，你很快就会明白为什么。</p><p id="9524" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">但是，你知道这个模糊查找器——fzf，能做的比你想象的多得多吗？哦，是的，模糊搜索只是冰山一角。它像酒；你把它留在你的电脑上的时间越长，它从命令行中积累的味道和甜蜜就越多。让我们深入研究一下，看看如何在Vim中使用fzf来提高您的工作效率。</p><h1 id="b597" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">出发</h1><p id="b454" class="pw-post-body-paragraph kb kc it kd b ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku mc kw kx ky im bi translated">为了能够做我在这篇博文中所做的事情，你需要几个插件。如果你没有使用<a class="ae kz" href="https://github.com/junegunn/vim-plug" rel="noopener ugc nofollow" target="_blank"> vim-plug </a>来安装其他vim插件，那么你就错过了。继续进行设置，您可以添加以下内容:</p><pre class="md me mf mg gt mh mi mj mk aw ml bi"><span id="618a" class="mm lb it mi b gy mn mo l mp mq">Plug 'junegunn/fzf' , { 'do' : { - &gt; fzf#install ( ) } } <br/>Plug 'junegunn/fzf.vim'</span></pre><p id="b3b6" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">然后，用<code class="fe mr ms mt mi b">:PlugInstall</code>安装这些插件或者用我用的这个快捷键:</p><pre class="md me mf mg gt mh mi mj mk aw ml bi"><span id="8e7d" class="mm lb it mi b gy mn mo l mp mq">nnoremap &lt; silent &gt; &lt;leader&gt; 1 : source ~/ .vimrc \| :PlugInstall&lt;CR&gt;</span></pre><p id="91da" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">然后，您可以按下leader键和数字1来安装并应用您的<code class="fe mr ms mt mi b">.vimrc</code>中的所有更改。</p><p id="5911" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在，到了最酷的部分！</p><h1 id="887d" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">神奇的发现者</h1><p id="3329" class="pw-post-body-paragraph kb kc it kd b ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku mc kw kx ky im bi translated">需要的都装好了，就可以到实用的部分了。正如我们之前所说，fzf是一个模糊查找器，如果你想的话，它是一个文件选择器。让我们马上尝试一下这个特性。要打开文件选择器，在Vim会话中键入<code class="fe mr ms mt mi b">:Files</code>。您应该得到这样的结果:</p><figure class="md me mf mg gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mu"><img src="../Images/f6a1ac89052ecd864ee60e845fc00f23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R74pmwo3eQ692DltILhy-g.png"/></div></div></figure><p id="fd69" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">fzf在底部打开了一个小窗口，显示我们目录中的文件。如果您查看新打开的窗口，您将会看到文件列表，并且在窗口右侧会显示当前所选文件的<strong class="kd iu">预览</strong>。所以你的文件在左边，预览在右边。你已经和我一样印象深刻了吗？酷，我们继续。</p><p id="743a" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果你不喜欢这个窗口，你可以通过fzf定制选项进行微调。但是如果你想要全屏显示任何fzf命令，你可以在命令的末尾加上<code class="fe mr ms mt mi b">!</code>。例如，让我们做<code class="fe mr ms mt mi b">:Files!</code>，你应该看到以下内容:</p><figure class="md me mf mg gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mv"><img src="../Images/404618669db25522e21ea8977fcaf593.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ceX-Mlq5oy3gLwh2MZbQZw.png"/></div></div></figure><p id="40d9" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">但是，我不常使用<code class="fe mr ms mt mi b">:Files</code>。事实上，我只用fzf的<code class="fe mr ms mt mi b">:GFiles</code>命令。<code class="fe mr ms mt mi b">:GFiles</code>将为你的Git文件打开一个文件选择器，忽略<code class="fe mr ms mt mi b">.gitignore</code>中的文件。在JavaScript项目中使用它非常简洁，在这些项目中，<code class="fe mr ms mt mi b">node_modules</code>文件往往会破坏运行<code class="fe mr ms mt mi b">:Files</code>时的气氛。让我们用<code class="fe mr ms mt mi b">:Files</code>和<code class="fe mr ms mt mi b">:GFiles</code>命令来比较同一个项目:</p><figure class="md me mf mg gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mv"><img src="../Images/fe3e2e86fb61dc3c5f2fa90da2540145.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e5EyqaTnii_CCH5AWaIsvw.png"/></div></div><figcaption class="mw mx gj gh gi my mz bd b be z dk translated"><em class="na">呸！到处都是“节点模块”。</em></figcaption></figure><figure class="md me mf mg gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nb"><img src="../Images/8e27ce1957a6854c6d6cbef9bac5826e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bNVFz37QO7ON7LXBri2ZSQ.png"/></div></div><figcaption class="mw mx gj gh gi my mz bd b be z dk translated"><em class="na">啊，这样更好。</em></figcaption></figure><p id="2d9d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">注意到区别了吗？没有那些<code class="fe mr ms mt mi b">node_modules/**</code>文件弹出来，我感觉就像背上掉了一个沉重的背包。无论如何，让我们看看这个坏男孩在搜索要编辑的文件时的行动。</p><figure class="md me mf mg gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nc"><img src="../Images/7324f8319e79af8c14e618fdfb22c5da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*vMhLKg1vzxpdC0jP.gif"/></div></div></figure><p id="1dec" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">就这样，看起来很不错。我不喜欢使用<code class="fe mr ms mt mi b">:GFiles</code>的唯一一点是，它不会包含你的新文件，除非你用<code class="fe mr ms mt mi b">git add</code>把它们添加到Git索引中。此外，我希望预览文件时有一些现成的语法突出显示，但我们将在另一篇博客文章中讨论这一点。同时，考虑订阅<a class="ae kz" href="https://pragmaticpineapple.com/improving-vim-workflow-with-fzf/newsletter" rel="noopener ugc nofollow" target="_blank">时事通讯</a>来获得类似的帖子。</p><p id="0ae7" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">综上所述，fzf在搜索文件时很有用，快如闪电。正如下面的Drake所说，求助于使用<code class="fe mr ms mt mi b">:GFiles</code>或尝试配置<code class="fe mr ms mt mi b">:Files</code>来忽略某些文件和路径。</p><figure class="md me mf mg gt ju gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/571ce27f3ea5eaecbf648ddd015a0b86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*ZD0cGMn9jkJIT8r_qk2Z6w.jpeg"/></div></figure><p id="a45c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">为了让这变得更快，你可以创建一个快捷方式。我用CTRL + p打开<code class="fe mr ms mt mi b">:GFiles</code>，这是我从传说中的<a class="ae kz" href="https://github.com/kien/ctrlp.vim" rel="noopener ugc nofollow" target="_blank"> ctrlp </a>插件中得到的。要使<code class="fe mr ms mt mi b">:GFiles</code>连接起来，以便用CTRL + p打开它，您可以将以下内容添加到您的<code class="fe mr ms mt mi b">.vimrc</code>中:</p><pre class="md me mf mg gt mh mi mj mk aw ml bi"><span id="3aca" class="mm lb it mi b gy mn mo l mp mq">nnoremap &lt;C-p&gt; :GFiles&lt;Cr&gt;</span></pre><h1 id="091c" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">快速搜索您的项目</h1><p id="db2f" class="pw-post-body-paragraph kb kc it kd b ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku mc kw kx ky im bi translated">不时让我震惊的是，在Vim中你可以用fzf做的其他事情。例如，您可以将<a class="ae kz" href="https://github.com/ggreer/the_silver_searcher" rel="noopener ugc nofollow" target="_blank">银搜索器</a>或<a class="ae kz" href="https://github.com/BurntSushi/ripgrep" rel="noopener ugc nofollow" target="_blank"> ripgrep </a>与fzf配合使用。要使用Silver Searcher进行搜索，请键入<code class="fe mr ms mt mi b">:Ag</code>和您想要搜索的术语。并且，要使用ripgrep进行搜索，请键入<code class="fe mr ms mt mi b">:Rg</code>和术语。当然，要让这些命令工作，您需要在您的环境中安装相应的库。</p><p id="c48b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我用的是<code class="fe mr ms mt mi b">:Ag</code>，效果非常好。它为我连线到CTRL + g，所以我快速访问它。要进行这种或类似的设置，请将以下内容添加到您的<code class="fe mr ms mt mi b">.vimrc</code>:</p><pre class="md me mf mg gt mh mi mj mk aw ml bi"><span id="5465" class="mm lb it mi b gy mn mo l mp mq">nnoremap &lt;C-g&gt; :Ag&lt;Cr&gt;</span></pre><p id="3f3c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">上面的快捷方式将在底部打开<code class="fe mr ms mt mi b">:Ag</code>搜索窗口，并预览文件。当我需要在一个项目中搜索一个单词时，我发现它非常有用和快捷。让我们看看<code class="fe mr ms mt mi b">:Ag</code>的行动。</p><figure class="md me mf mg gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nc"><img src="../Images/fb619bfa6a13ba00cffbff2b3b5ae4f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ycMPRa_w-I1ftfQ5.gif"/></div></div></figure><h1 id="b824" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">擦亮</h1><p id="ab08" class="pw-post-body-paragraph kb kc it kd b ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku mc kw kx ky im bi translated">您可以通过键入<code class="fe mr ms mt mi b">:Buffers</code>使用fzf搜索所有打开的缓冲区。我在我的leader键(空格键，BTW) + b处保留了一个快捷键，就像这样:</p><pre class="md me mf mg gt mh mi mj mk aw ml bi"><span id="d67b" class="mm lb it mi b gy mn mo l mp mq">nnoremap &lt;silent&gt;&lt;leader&gt;l :Buffers&lt;CR&gt;</span></pre><p id="3596" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">使用该命令，您将获得一个buffers explorer，您可以在打开的文件之间快速切换。我希望那有帮助。让我们看看它是什么样子的:</p><figure class="md me mf mg gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ne"><img src="../Images/456d98ad205a582a953e9bf738126eee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y3Lsuyd-t7sngFHYTAtflg.png"/></div></div></figure><h1 id="4f3a" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">ASCII艺术(一种)</h1><p id="eca7" class="pw-post-body-paragraph kb kc it kd b ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku mc kw kx ky im bi translated">如果你是一个在航站楼内画画的爱好者，那么你一定会喜欢这个。如果您使用的是<a class="ae kz" href="https://github.com/tpope/vim-fugitive" rel="noopener ugc nofollow" target="_blank">vim-逃犯</a>插件，请尝试键入<code class="fe mr ms mt mi b">:Commits</code>。这个插件本身就是一个非常棒的Git包装器，如果你不想离开你的Vim会话的话。不管怎样，如果你输入<code class="fe mr ms mt mi b">:Commits</code>，你应该得到一个项目提交树，如下所示:</p><figure class="md me mf mg gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mu"><img src="../Images/5e9540ef053e8e315d2fdf6af891c5fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TO95V-YEeVWUTGlZMOgIBA.png"/></div></div></figure><p id="2760" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">很酷吧。您可以在每次提交时上下滚动并签出更改。您甚至可以输入您感兴趣的提交，并检查那里所做的更改。多亏了<code class="fe mr ms mt mi b">vim-fugitive</code>，所有这些都成为可能，所以来看看吧。关于在Vim内部使用Git的博文来了，一定要订阅<a class="ae kz" href="https://pragmaticpineapple.com/newsletter" rel="noopener ugc nofollow" target="_blank">时事通讯</a>。</p><h1 id="b588" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">快速总结</h1><p id="e5d6" class="pw-post-body-paragraph kb kc it kd b ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku mc kw kx ky im bi translated">Vim生态系统有很多插件，fzf是一个很棒的插件。可以用<code class="fe mr ms mt mi b">:GFiles</code>和<code class="fe mr ms mt mi b">:Files</code>搜索文件。如果你想做文本搜索，尝试使用<code class="fe mr ms mt mi b">:Ag</code>或<code class="fe mr ms mt mi b">:Rg</code>，它们分别使用Silver Searcher和ripgrep。厌倦了开放缓冲区之间的缓慢切换-尝试<code class="fe mr ms mt mi b">:Buffers</code>。或者，如果您想要一些好的提交信息，请执行<code class="fe mr ms mt mi b">:Commits</code>。</p><p id="2b81" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这些只是fzf的几个命令和技巧，请务必查看它们的自述文件以获取更多信息。另外，请继续关注我发的更多类似的帖子，并考虑订阅<a class="ae kz" href="https://pragmaticpineapple.com/newsletter" rel="noopener ugc nofollow" target="_blank">时事通讯</a>。如果你觉得这篇博文很有趣，一定要传播出去，与你的朋友和同事分享:</p><figure class="md me mf mg gt ju"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="70ab" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">直到下一个，干杯！</p></div><div class="ab cl nh ni hx nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="im in io ip iq"><p id="817d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><em class="no">最初发表于</em><a class="ae kz" href="https://pragmaticpineapple.com/improving-vim-workflow-with-fzf/" rel="noopener ugc nofollow" target="_blank"><em class="no">https://pragmaticpineapple.com</em></a><em class="no">。</em></p></div></div>    
</body>
</html>