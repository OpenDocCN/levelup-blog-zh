<html>
<head>
<title>Two simple ways to scrape text from Wikipedia in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python从维基百科中抓取文本的两种简单方法</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/two-simple-ways-to-scrape-text-from-wikipedia-in-python-9ce07426579b?source=collection_archive---------0-----------------------#2020-06-20">https://levelup.gitconnected.com/two-simple-ways-to-scrape-text-from-wikipedia-in-python-9ce07426579b?source=collection_archive---------0-----------------------#2020-06-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="16e5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这篇文章将首先展示一个<strong class="js iu">的简单方法</strong>，用几行代码从维基百科中抓取文本，然后用一个更<strong class="js iu">的通用方法</strong>提取相同的文本，该方法可以应用于其他网站。</p><p id="1048" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们将从“约翰·d·亨特”的<a class="ae ko" href="https://en.wikipedia.org/wiki/John_D._Hunter" rel="noopener ugc nofollow" target="_blank">维基百科页面上抓取文本内容</a>💎他是Python开发的传奇先驱之一，也是M <a class="ae ko" href="https://matplotlib.org/" rel="noopener ugc nofollow" target="_blank"> atplotlib </a>的创造者，这是一个强大的可视化软件包。如果你想更多地了解他和他从中年时期学到的东西，看看这篇有见地、有见识的<a class="ae ko" href="https://www.youtube.com/watch?v=e3lTby5RI54" rel="noopener ugc nofollow" target="_blank">演讲</a>。尽管视频质量很差，我还是非常喜欢看他的演讲。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi kp"><img src="../Images/c291e570fa8a18fddcae8ffec036d139.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yRf3BnXowyp9agTmg5Md8Q.png"/></div></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">来自<a class="ae ko" href="https://towardsdatascience.com/simple-wordcloud-in-python-2ae54a9f58e5" rel="noopener" target="_blank">的单词云“Python中的简单单词云”</a></figcaption></figure></div><div class="ab cl lf lg hx lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="im in io ip iq"><h1 id="284b" class="lm ln it bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">0.Python设置🔧</h1><p id="3a06" class="pw-post-body-paragraph jq jr it js b jt mk jv jw jx ml jz ka kb mm kd ke kf mn kh ki kj mo kl km kn im bi translated">我假设读者(👀是的，你！)可以访问并熟悉Python，包括安装包、定义函数和其他基本任务。如果你是Python的新手，<a class="ae ko" href="https://www.python.org/about/gettingstarted/" rel="noopener ugc nofollow" target="_blank">这个</a>是一个很好的起点。</p><p id="d87a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我已经在Jupyter Notebook中使用并测试了Python 3.7.1中的脚本。</p><p id="9cab" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在我们开始之前让我们确定你已经安装了以下库:<br/> ◻ <strong class="js iu">简易方式:</strong> <em class="mp">维基百科、<br/> </em> ◻ <strong class="js iu">通用方式:</strong> <em class="mp"> urllib </em>和<em class="mp"> BeautifulSoup </em></p></div><div class="ab cl lf lg hx lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="im in io ip iq"><h1 id="39af" class="lm ln it bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">1.使用维基百科的简单方法🍰</h1><p id="fea2" class="pw-post-body-paragraph jq jr it js b jt mk jv jw jx ml jz ka kb mm kd ke kf mn kh ki kj mo kl km kn im bi translated">维基百科包旨在使从维基百科中提取数据变得容易和简单，它确实做到了这一点。👏</p><p id="7735" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们可以使用几行代码从维基百科页面中提取文本内容:</p><pre class="kq kr ks kt gt mq mr ms mt aw mu bi"><span id="b489" class="mv ln it mr b gy mw mx l my mz"># Import package<br/>import wikipedia</span><span id="0bb2" class="mv ln it mr b gy na mx l my mz"># Specify the title of the Wikipedia page<br/>wiki = wikipedia.page('John D. Hunter')</span><span id="1a3e" class="mv ln it mr b gy na mx l my mz"># Extract the plain text content of the page<br/>text = wiki.content<br/>text</span></pre><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi nb"><img src="../Images/5e8f48a6c7a973939a7d83c13d8d351d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8-Loco9S0OMbBiFgwyQmTA.png"/></div></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">文本</figcaption></figure><p id="311f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Ta-da❕我们刚刚提取了文本内容！看到有多简单了吗？如果您在最后一行使用<code class="fe nc nd ne mr b">print(text)</code>而不是<code class="fe nc nd ne mr b">text</code>，您会注意到它被很好地格式化为新的行和标题。</p><p id="0737" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">假设我们只想保留每个段落的主体，而不想保留其他内容，那么我们必须做一些清理:<br/> ◼️删除由“==”包围的标题:<code class="fe nc nd ne mr b">re.sub(r'==.*?==+', '', text)<br/></code> ◼️用“”(一个空字符串)替换“\n”(一个新行):<code class="fe nc nd ne mr b">.replace('\n', '')<br/></code>输出<em class="mp">文本</em>是一个字符串(可以使用<code class="fe nc nd ne mr b">type(text)</code>进行检查)，这允许我们利用字符串方法或任何其他可以在字符串上使用的操作。</p><pre class="kq kr ks kt gt mq mr ms mt aw mu bi"><span id="0e2d" class="mv ln it mr b gy mw mx l my mz"># Import package<br/>import re</span><span id="a83b" class="mv ln it mr b gy na mx l my mz"># Clean text<br/>text = re.sub(r'==.*?==+', '', text)<br/>text = text.replace('\n', '')<br/>text</span></pre><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi nb"><img src="../Images/db3f5c8cf3761ac5c48239d9e79cb3f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8VDn3yUAAQOEJRbuAGez9A.png"/></div></div></figure><p id="fde3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">就这样，我们刚刚从维基百科上搜集了一些文本。简单的方法，滴答。✅</p><p id="8963" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="mp">如果你想了解更多关于这个包的信息，这里的</em><a class="ae ko" href="https://wikipedia.readthedocs.io/en/latest/code.html#api" rel="noopener ugc nofollow" target="_blank"><em class="mp"/></a><em class="mp">就是文档。</em></p></div><div class="ab cl lf lg hx lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="im in io ip iq"><h1 id="d92a" class="lm ln it bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">2.使用urllib和BeautifulSoup的一般方法🍜</h1><p id="8f02" class="pw-post-body-paragraph jq jr it js b jt mk jv jw jx ml jz ka kb mm kd ke kf mn kh ki kj mo kl km kn im bi translated">让我们使用一种更通用的方法来提取相同的数据，这种方法可以用于其他网站。</p><pre class="kq kr ks kt gt mq mr ms mt aw mu bi"><span id="074a" class="mv ln it mr b gy mw mx l my mz"># Import packages<br/>from urllib.request import urlopen<br/>from bs4 import BeautifulSoup</span><span id="1845" class="mv ln it mr b gy na mx l my mz"># Specify url of the web page<br/>source = urlopen('<a class="ae ko" href="https://en.wikipedia.org/wiki/John_D._Hunter').read()" rel="noopener ugc nofollow" target="_blank">https://en.wikipedia.org/wiki/John_D._Hunter').read()</a></span><span id="a27a" class="mv ln it mr b gy na mx l my mz"># Make a soup <br/>soup = BeautifulSoup(source,'lxml')<br/>soup</span></pre><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi nf"><img src="../Images/b793430a5c37d53472f8568f1f1d3965.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6ZLD2giotL22OtEhuJ-XIg.png"/></div></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">汤的样本提取物</figcaption></figure><p id="d3e2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="mp"> soup </em>的这种看起来像胡言乱语的输出有什么意义吗？让我们一起试着理解它。</p><p id="bbb2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="mp">汤</em>包含页面上的所有内容，由更小的元素组成，其中大部分是我们不需要的(例如表格、引用)。使用下面的脚本，我们可以找出<em class="mp">汤</em>中有哪组元素:</p><pre class="kq kr ks kt gt mq mr ms mt aw mu bi"><span id="2700" class="mv ln it mr b gy mw mx l my mz">print(set([text.parent.name for text in soup.find_all(text=True)]))</span></pre><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi ng"><img src="../Images/ce2ef385cc60d4d13a15ee4908716f0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qb9Zi-Z5x-T9R3lONehOhA.png"/></div></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">元素</figcaption></figure><p id="6d3b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在我们的例子中，我们感兴趣的是那些被标记为<em class="mp"> &lt; p &gt; </em>的段落，它代表<em class="mp">段落。我们可以使用下面的脚本找到所有段落:</em></p><p id="25d4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="mp"> Psst，如果你好奇想了解更多关于其他元素的信息，试着用集合中的另一个元素来改变‘p’(参考上面的元素集合)。</em></p><pre class="kq kr ks kt gt mq mr ms mt aw mu bi"><span id="a8d9" class="mv ln it mr b gy mw mx l my mz"># Extract the plain text content from paragraphs<br/>text = ''<br/>for paragraph in soup.find_all('p'):<br/>    text += paragraph.text<br/>    <br/>text</span></pre><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi nh"><img src="../Images/0d76f55a10036cec03cc32feb1d396f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ppentDc4IzRd424MbSGovg.png"/></div></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">文本</figcaption></figure><p id="632c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们快到了。让我们做一点清理，以获得前一部分的准确输出:<br/> ◼️删除括号中的脚注上标:<code class="fe nc nd ne mr b">re.sub(r'\[.*?\]+', '', text)<br/></code> ◼️用' '(空字符串)替换' \n '(新行):<code class="fe nc nd ne mr b">.replace('\n', '')</code></p><pre class="kq kr ks kt gt mq mr ms mt aw mu bi"><span id="2928" class="mv ln it mr b gy mw mx l my mz"># Import package<br/>import re</span><span id="33a4" class="mv ln it mr b gy na mx l my mz"># Clean text<br/>text = re.sub(r'\[.*?\]+', '', text)<br/>text = text.replace('\n', '')<br/>text</span></pre><p id="a71c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Yay❕:我们用一种更通用的方法提取了完全相同的文本。一般方式，打勾。✅</p></div><div class="ab cl lf lg hx lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="im in io ip iq"><h1 id="4d5a" class="lm ln it bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">3.最终代码📃</h1><p id="d974" class="pw-post-body-paragraph jq jr it js b jt mk jv jw jx ml jz ka kb mm kd ke kf mn kh ki kj mo kl km kn im bi translated">这个最终的代码是一个略有不同的版本，其中脚本被调整为保留段落标题，因此这两种方法都有两个可用的示例可供参考。这可能比整理前面章节中已经显示的代码更有用。</p><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="e2bc" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">结束之前的最后一点:如果您想知道如何在gist的第38行中找到正确的名称和属性，我是这样做的:<br/> 1)我运行下面的脚本并滚动输出，直到我找到一些段落标题的文本，比如说传记，并发现它们的父名称是<code class="fe nc nd ne mr b">span</code>。请记住寻找传记的第二个实例，因为第一个实例将用于内容表。在这种情况下，它们都有相同的标签。</p><pre class="kq kr ks kt gt mq mr ms mt aw mu bi"><span id="74e1" class="mv ln it mr b gy mw mx l my mz">for s in soup.find_all(text=True):<br/>    # Check out the parent name<br/>    print(f'Parent name: {s.parent.name}')<br/>    # Check the text<br/>    print(s)</span></pre><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/6b9aeed97fe4c2d509c1c196f4f70534.png" data-original-src="https://miro.medium.com/v2/resize:fit:288/format:webp/1*nlvvukRNiTm4JciqPfT83w.png"/></div></figure><p id="badd" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">2)我使用下面的脚本研究了所有的<span>标签及其细节。我再次滚动输出，找到一些段落标题的文本，比如传记(记得参考第二个实例)，并发现标题有<code class="fe nc nd ne mr b">class="mw-editsection"</code>。</span></p><pre class="kq kr ks kt gt mq mr ms mt aw mu bi"><span id="1789" class="mv ln it mr b gy mw mx l my mz">for s in soup.find_all('span'):<br/>    # Check out the parent name<br/>    print(f'Parent name: {s.parent.name}')<br/>    # Check the text<br/>    print(s)<br/></span></pre><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/bfa9ec86f1a8c6e2a59b9760acfd66fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:898/format:webp/1*viIonGz1YjX0l9MlR-lC6g.png"/></div></figure><p id="6d17" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这是一个尝试和错误，但我很高兴这样做。我希望你也是！</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi nm"><img src="../Images/8e10ac0252cc796d1069f8df8c9f3238.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*caNhfGrpS3x52cBK"/></div></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">照片由<a class="ae ko" href="https://unsplash.com/@domenicoloia?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">多梅尼科·洛亚</a>在<a class="ae ko" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</figcaption></figure><p id="1ddd" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="mp">您想访问更多这样的内容吗？媒体会员可以无限制地访问媒体上的任何文章。如果您使用</em> <a class="ae ko" href="https://zluvsand.medium.com/membership" rel="noopener"> <em class="mp">我的推荐链接</em> </a>，<em class="mp">成为会员，您的一部分会费将直接用于支持我。</em></p></div><div class="ab cl lf lg hx lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="im in io ip iq"><p id="add4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">谢谢你看我的帖子。我希望你已经学到了一些东西，✂️.如果你感兴趣，这里有我的其他帖子的链接:<br/>◼️<a class="ae ko" href="https://towardsdatascience.com/simple-wordcloud-in-python-2ae54a9f58e5" rel="noopener" target="_blank">Python中的简单单词云</a><br/>◼️️<a class="ae ko" href="https://towardsdatascience.com/introduction-to-nlp-part-1-preprocessing-text-in-python-8f007d44ca96" rel="noopener" target="_blank">NLP简介-第1部分:python中的预处理文本</a><br/>◼️<a class="ae ko" href="https://medium.com/@zluvsand/introduction-to-nlp-part-2-difference-between-lemmatisation-and-stemming-3789be1c55bc" rel="noopener">NLP简介-第2部分:词条满足和词干的区别</a><br/>◼️<a class="ae ko" href="https://medium.com/@zluvsand/introduction-to-nlp-part-3-tf-idf-explained-cedb1fc1f7dc" rel="noopener">NLP简介-第3部分:TF-IDF解释</a><br/>◼️<a class="ae ko" href="https://medium.com/@zluvsand/introduction-to-nlp-part-4-supervised-text-classification-model-in-python-96e9709b4267" rel="noopener">NLP简介-第4部分:监督</a></p><p id="a5d5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">再见🏃💨</p></div></div>    
</body>
</html>