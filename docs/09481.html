<html>
<head>
<title>How to add a custom ESLint configuration to a Create React App project</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何向Create React应用程序项目添加自定义ESLint配置</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-add-a-custom-eslint-configuration-to-a-create-react-app-project-aea3f7c1d7af?source=collection_archive---------0-----------------------#2021-08-15">https://levelup.gitconnected.com/how-to-add-a-custom-eslint-configuration-to-a-create-react-app-project-aea3f7c1d7af?source=collection_archive---------0-----------------------#2021-08-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/0ceccae093f1a7c30ec2acd49fe1babe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j32lk541VB7qNNWbmUd-dQ@2x.png"/></div></div></figure><h1 id="8af7" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">背景</h1><p id="db7e" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">每个前端项目都应该有某种静态代码分析工具。这将确保您的团队坚持一种编码风格，并在开发中避免已知的反模式。</p><p id="fb1c" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">可以说，JavaScript项目最好的lint工具之一是<a class="ae lz" href="https://eslint.org/" rel="noopener ugc nofollow" target="_blank"> ESLint </a>。它支持各种插件来扩展功能，并有丰富的易于使用的文档。ESLint也可以被配置为使用TypeScript项目，因此以前占主导地位的<a class="ae lz" href="https://palantir.github.io/tslint/" rel="noopener ugc nofollow" target="_blank"> TSLint </a>被弃用，取而代之的是ESLint。</p><p id="7b27" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">在这篇文章中，我们将看看ESLint在基于JavaScript和TypeScript的React项目上的集成，这些项目是用<a class="ae lz" href="https://create-react-app.dev/" rel="noopener ugc nofollow" target="_blank"> Create React App </a> (CRA)样板创建的。</p><p id="d204" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated"><strong class="ky ir">我需要定制ESLint配置吗？</strong></p><p id="e8b3" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">大概不会。因为Create React App自带ESLint已经集成。他们使用自己的<a class="ae lz" href="https://github.com/facebook/create-react-app/tree/v4.0.3/packages/eslint-config-react-app" rel="noopener ugc nofollow" target="_blank">可共享ESLint配置</a>，这可以在<code class="fe ma mb mc md b">package.json</code>中的<strong class="ky ir"> eslintConfig </strong>对象下找到。</p><figure class="me mf mg mh gt jr"><div class="bz fp l di"><div class="mi mj l"/></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk translated">package.json</figcaption></figure><p id="00a3" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">如果您喜欢使用样板文件中提供的配置，现在可以跳过阅读🙃。</p><blockquote class="mo mp mq"><p id="5749" class="kw kx mr ky b kz lu lb lc ld lv lf lg ms lw lj lk mt lx ln lo mu ly lr ls lt ij bi translated">要检查<strong class="ky ir"> react-app </strong> ESLint配置中使用的规则和插件，请点击<a class="ae lz" href="https://github.com/facebook/create-react-app/blob/v4.0.3/packages/eslint-config-react-app/index.js" rel="noopener ugc nofollow" target="_blank">此处</a>。</p></blockquote><p id="28fe" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated"><strong class="ky ir">为什么要使用定制配置？</strong></p><p id="081c" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">请注意，大多数ESLint规则是为特定的个人或团队量身定制的。例如，使用<em class="mr">单引号</em>而不是<em class="mr">双引号</em>将取决于偏好。</p><p id="ad71" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">如果你在做一个长期项目，最好根据你/团队的偏好来定义你自己的规则。</p><h1 id="148e" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">先决条件</h1><ol class=""><li id="9a5e" class="mv mw iq ky b kz la ld le lh mx ll my lp mz lt na nb nc nd bi translated"><a class="ae lz" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank">NodeJS</a>T29<a class="ae lz" href="https://www.npmjs.com/" rel="noopener ugc nofollow" target="_blank">NPM</a>。</li><li id="3ef9" class="mv mw iq ky b kz ne ld nf lh ng ll nh lp ni lt na nb nc nd bi translated">用<a class="ae lz" href="https://create-react-app.dev/" rel="noopener ugc nofollow" target="_blank"> Create React App </a>样板文件创建的应用。</li><li id="2d98" class="mv mw iq ky b kz ne ld nf lh ng ll nh lp ni lt na nb nc nd bi translated">在IDE/编辑器中配置的ESLint插件。(<a class="ae lz" href="https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint" rel="noopener ugc nofollow" target="_blank"> VSCode插件</a> | <a class="ae lz" href="https://www.jetbrains.com/help/webstorm/eslint.html" rel="noopener ugc nofollow" target="_blank"> WebStorm插件</a>)</li></ol><h1 id="c432" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">我们开始吧</h1><h2 id="df06" class="nj jz iq bd ka nk nl dn ke nm nn dp ki lh no np km ll nq nr kq lp ns nt ku nu bi translated">移除现有配置</h2><p id="a584" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">转到项目根目录下的<code class="fe ma mb mc md b">package.json</code>，移除<strong class="ky ir"> eslintConfig </strong>对象<strong class="ky ir">。</strong></p><figure class="me mf mg mh gt jr"><div class="bz fp l di"><div class="mi mj l"/></div></figure><h2 id="316d" class="nj jz iq bd ka nk nl dn ke nm nn dp ki lh no np km ll nq nr kq lp ns nt ku nu bi translated">添加ESLint配置</h2><p id="0c56" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">在根目录内，让我们创建一个<code class="fe ma mb mc md b">.eslintrc.js</code> <strong class="ky ir"> </strong>文件。还有其他格式，但我个人更喜欢JS格式。</p><pre class="me mf mg mh gt nv md nw nx aw ny bi"><span id="bfad" class="nj jz iq md b gy nz oa l ob oc"># from the root directory<br/>touch .eslintrc.js</span></pre><p id="97ba" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">先说下面的基本配置。</p><figure class="me mf mg mh gt jr"><div class="bz fp l di"><div class="mi mj l"/></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk translated">基本ESLint配置</figcaption></figure><p id="d388" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">这将基本上定义环境和解析器选项。</p><p id="7adf" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">现在，我们将通过添加一些有用的可共享配置和插件来改进配置。</p><p id="4f9d" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated"><strong class="ky ir">添加可共享的配置(预设)</strong></p><p id="72f4" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">✅·伊斯林:推荐</p><p id="7b13" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">启用<a class="ae lz" href="https://eslint.org/docs/rules/" rel="noopener ugc nofollow" target="_blank"> ESLint规则手册</a>中的一些关键规则。</p><p id="5dae" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">✅插件:反应/推荐</p><p id="dbe4" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">启用<a class="ae lz" href="https://www.npmjs.com/package/eslint-plugin-react" rel="noopener ugc nofollow" target="_blank"> eslint-plugin-react </a>中<a class="ae lz" href="https://www.npmjs.com/package/eslint-plugin-react#recommended" rel="noopener ugc nofollow" target="_blank">推荐的</a> React规则集。</p><p id="a7ce" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">✅插件:jsx-a11y/推荐</p><p id="e64d" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">启用<a class="ae lz" href="https://www.npmjs.com/package/eslint-plugin-jsx-a11y" rel="noopener ugc nofollow" target="_blank"> eslint-plugin-jsx-a11y </a>中推荐的可访问性规则。</p><p id="be2b" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">✅插件:react-hooks/推荐</p><p id="144d" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">启用在<a class="ae lz" href="https://www.npmjs.com/package/eslint-plugin-react-hooks" rel="noopener ugc nofollow" target="_blank">eslint-plugin-React-Hooks</a>中设置的React Hooks最佳实践规则。</p><p id="bb1e" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">✅插件:jest/推荐</p><p id="a17c" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">启用<a class="ae lz" href="https://www.npmjs.com/package/eslint-plugin-jest" rel="noopener ugc nofollow" target="_blank"> eslint-plugin-jest </a>中的推荐规则</p><p id="6dcb" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">✅插件:测试-库/反应</p><p id="4762" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">启用<a class="ae lz" href="https://www.npmjs.com/package/eslint-plugin-testing-library" rel="noopener ugc nofollow" target="_blank">eslint-plugin-testing-library</a>中的推荐设置</p><figure class="me mf mg mh gt jr"><div class="bz fp l di"><div class="mi mj l"/></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk translated">ESLint预设</figcaption></figure><p id="97d3" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated"><strong class="ky ir">添加插件</strong></p><p id="897b" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">✅电子商务-插件-导入</p><p id="862a" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">此插件旨在支持ES2015+ (ES6+)导入/导出语法的林挺，并防止文件路径和导入名称拼写错误的问题。</p><figure class="me mf mg mh gt jr"><div class="bz fp l di"><div class="mi mj l"/></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk translated">ESLint插件</figcaption></figure><p id="dede" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated"><strong class="ky ir">添加规则</strong></p><p id="c0d2" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">您可以根据自己的喜好覆盖预设中定义的规则。我喜欢使用<strong class="ky ir"> 4 </strong>空格缩进、<strong class="ky ir">双引号、</strong>等等。我现在可以在<strong class="ky ir">规则对象</strong>中指定，如下所示。</p><figure class="me mf mg mh gt jr"><div class="bz fp l di"><div class="mi mj l"/></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk translated">缩进和报价规则</figcaption></figure><p id="b99f" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">此外，我将定义导入的排序顺序。这条规则由我们在上一步中添加的<code class="fe ma mb mc md b">eslint-plugin-import</code>插件提供。</p><figure class="me mf mg mh gt jr"><div class="bz fp l di"><div class="mi mj l"/></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk translated">导入规则</figcaption></figure><blockquote class="mo mp mq"><p id="5093" class="kw kx mr ky b kz lu lb lc ld lv lf lg ms lw lj lk mt lx ln lo mu ly lr ls lt ij bi translated">也可以使用<strong class="ky ir">插件:导入/推荐</strong> <em class="iq"> </em>作为预置但是我喜欢自己定义排序方式。查看<a class="ae lz" href="https://www.npmjs.com/package/eslint-plugin-import" rel="noopener ugc nofollow" target="_blank">文档</a>了解更多信息。</p></blockquote><p id="51c1" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated"><strong class="ky ir">可选的</strong>:如果您在项目中使用<a class="ae lz" href="https://lodash.com/" rel="noopener ugc nofollow" target="_blank"> lodash </a>并且您的构建系统支持树抖动，那么您可以使用下面的规则来限制CommonJS导入和非树抖动模块的使用。</p><figure class="me mf mg mh gt jr"><div class="bz fp l di"><div class="mi mj l"/></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk translated">限制进口</figcaption></figure><p id="9383" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">以下是最终配置🎉。我根据自己的喜好启用了更多的规则，并且可以根据您的需求随意修改它们。</p><figure class="me mf mg mh gt jr"><div class="bz fp l di"><div class="mi mj l"/></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk translated">最终JavaScript ESLint配置</figcaption></figure><h2 id="dd12" class="nj jz iq bd ka nk nl dn ke nm nn dp ki lh no np km ll nq nr kq lp ns nt ku nu bi translated">TypeScript项目的配置</h2><p id="45ca" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">如果您使用CRA类型脚本模板创建了类型脚本项目，请使用配置中的<a class="ae lz" href="https://eslint.org/docs/user-guide/configuring/configuration-files#how-do-overrides-work" rel="noopener ugc nofollow" target="_blank">覆盖</a>对象将规则应用于类型脚本文件。</p><figure class="me mf mg mh gt jr"><div class="bz fp l di"><div class="mi mj l"/></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk translated">类型脚本配置</figcaption></figure><blockquote class="mo mp mq"><p id="7e0f" class="kw kx mr ky b kz lu lb lc ld lv lf lg ms lw lj lk mt lx ln lo mu ly lr ls lt ij bi translated">如果基本ESLint规则不支持TypeScript，或者您只想将某个规则添加到TypeScript文件中，则只需将规则添加到此部分。大多数规则对TypeScript和JavaScript都适用。</p></blockquote><h2 id="8fef" class="nj jz iq bd ka nk nl dn ke nm nn dp ki lh no np km ll nq nr kq lp ns nt ku nu bi translated">添加ESLint忽略文件</h2><p id="6e85" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">创建一个<code class="fe ma mb mc md b">.eslintignore</code>文件来忽略来自林挺的某些文件/文件夹。您可以忽略node_modules、分发文件夹、缓存文件夹等。</p><pre class="me mf mg mh gt nv md nw nx aw ny bi"><span id="cf9a" class="nj jz iq md b gy nz oa l ob oc"># from the root directory<br/>touch .eslintignore</span></pre><figure class="me mf mg mh gt jr"><div class="bz fp l di"><div class="mi mj l"/></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk translated">ESLint忽略文件</figcaption></figure><h2 id="aac9" class="nj jz iq bd ka nk nl dn ke nm nn dp ki lh no np km ll nq nr kq lp ns nt ku nu bi translated">添加帮助程序npm脚本</h2><p id="e5c5" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">当你运行应用程序时，CRA通常会在终端显示Lint警告/错误。</p><p id="a7a7" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">此外，如果您在编辑器或IDE中正确配置了ESLint插件，错误/警告将会以内联方式显示。</p><p id="ee73" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">但是最好还是创建npm脚本，这样您也可以在CI系统中使用它们。</p><p id="d805" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">对于JavaScript 项目，使用下面的npm脚本。</p><figure class="me mf mg mh gt jr"><div class="bz fp l di"><div class="mi mj l"/></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk translated">JavaScript项目的npm脚本。</figcaption></figure><p id="ac30" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">对于TypeScript项目，请使用以下npm脚本。</p><figure class="me mf mg mh gt jr"><div class="bz fp l di"><div class="mi mj l"/></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk translated">TypeScript项目的npm脚本。</figcaption></figure><p id="7d8a" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated"><strong class="ky ir">运行脚本</strong></p><p id="35d4" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">以下命令将运行项目的linter，并报告是否有任何问题。</p><pre class="me mf mg mh gt nv md nw nx aw ny bi"><span id="699b" class="nj jz iq md b gy nz oa l ob oc">npm run lint</span></pre><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi od"><img src="../Images/49a64da9f88d74b46cccdcf449b91e72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QdthOmmdeSYlASN7ARjrfw.png"/></div></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk translated">终端上的ESLint错误</figcaption></figure><p id="2520" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">下面的脚本将<a class="ae lz" href="https://eslint.org/docs/user-guide/command-line-interface#fixing-problems" rel="noopener ugc nofollow" target="_blank">自动修复</a>可能出现的错误。</p><pre class="me mf mg mh gt nv md nw nx aw ny bi"><span id="53a6" class="nj jz iq md b gy nz oa l ob oc">npm run lint:fix</span></pre><p id="a11c" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">现在您已经有了一个带有ESLint配置的工作应用程序。如果需要，请查看以下可选步骤来进一步配置您的设置。</p><h1 id="3678" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">可选步骤</h1><p id="d9f2" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">作为一个额外的步骤，我喜欢确保任何违反我们的ESLint配置的代码不会被推到代码库。所以基本上，我需要在Git提交之前强制运行ESLint。</p><p id="2d03" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">我们可以使用<a class="ae lz" href="https://www.npmjs.com/package/husky" rel="noopener ugc nofollow" target="_blank"> husky </a>和<a class="ae lz" href="https://www.npmjs.com/package/lint-staged" rel="noopener ugc nofollow" target="_blank"> lint-staged </a>轻松完成要求。</p><p id="f3ff" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated"><strong class="ky ir">什么是哈士奇？</strong></p><p id="d610" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">Husky可用于在执行某些Git挂钩之前运行脚本。阅读<a class="ae lz" href="https://typicode.github.io/husky/#/" rel="noopener ugc nofollow" target="_blank">文档</a>。</p><p id="cb0f" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated"><strong class="ky ir">什么是Lint Staged？</strong></p><p id="717c" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">对暂存的git文件运行linters。</p><h2 id="1f43" class="nj jz iq bd ka nk nl dn ke nm nn dp ki lh no np km ll nq nr kq lp ns nt ku nu bi translated">安装</h2><ol class=""><li id="6a67" class="mv mw iq ky b kz la ld le lh mx ll my lp mz lt na nb nc nd bi translated">安装Husky</li></ol><pre class="me mf mg mh gt nv md nw nx aw ny bi"><span id="21ef" class="nj jz iq md b gy nz oa l ob oc">npx husky-init &amp;&amp; npm install</span></pre><p id="1b8d" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">2.安装lint-staged。</p><pre class="me mf mg mh gt nv md nw nx aw ny bi"><span id="6a4b" class="nj jz iq md b gy nz oa l ob oc">npm install --save-dev lint-staged</span></pre><p id="b125" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">3.创建lint暂存的配置文件。</p><pre class="me mf mg mh gt nv md nw nx aw ny bi"><span id="3fcd" class="nj jz iq md b gy nz oa l ob oc">touch lint-staged.config.js</span></pre><blockquote class="mo mp mq"><p id="297d" class="kw kx mr ky b kz lu lb lc ld lv lf lg ms lw lj lk mt lx ln lo mu ly lr ls lt ij bi translated">有许多方法可以添加配置文件。我更喜欢JS配置。查看<a class="ae lz" href="https://github.com/okonet/lint-staged#configuration" rel="noopener ugc nofollow" target="_blank">文档</a>以了解替代方案。</p></blockquote><p id="a23f" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">4.添加lint暂存配置。</p><figure class="me mf mg mh gt jr"><div class="bz fp l di"><div class="mi mj l"/></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk translated">Lint分级配置</figcaption></figure><p id="d994" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">对于TypeScript项目，添加<code class="fe ma mb mc md b">ts</code>和<code class="fe ma mb mc md b">tsx</code> <strong class="ky ir"> </strong>以及blob模式<strong class="ky ir">。</strong></p><pre class="me mf mg mh gt nv md nw nx aw ny bi"><span id="4263" class="nj jz iq md b gy nz oa l ob oc">“*.+(js|jsx|ts|tsx)”</span></pre><p id="aeaa" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">5.添加npm脚本以运行lint staged。</p><p id="9132" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">在<code class="fe ma mb mc md b">package.json</code>的<strong class="ky ir">脚本</strong>部分添加以下脚本。</p><pre class="me mf mg mh gt nv md nw nx aw ny bi"><span id="11d4" class="nj jz iq md b gy nz oa l ob oc">"lint:staged": "lint-staged",</span></pre><blockquote class="mo mp mq"><p id="6860" class="kw kx mr ky b kz lu lb lc ld lv lf lg ms lw lj lk mt lx ln lo mu ly lr ls lt ij bi translated">否则，husky会抱怨lint暂存命令丢失。我猜您可以使用npx来运行lint staged，但在我看来这种方法更简洁😉。</p></blockquote><p id="f792" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">6.添加一个提交前挂钩。</p><pre class="me mf mg mh gt nv md nw nx aw ny bi"><span id="9dd4" class="nj jz iq md b gy nz oa l ob oc">npx husky add .husky/pre-commit "npm run lint:staged"</span></pre><h2 id="d6d7" class="nj jz iq bd ka nk nl dn ke nm nn dp ki lh no np km ll nq nr kq lp ns nt ku nu bi translated">测试流量</h2><p id="3810" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">我在<code class="fe ma mb mc md b">App.js</code>中故意犯了lint违例，并试图提交一个文件。</p><p id="22dc" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">我得到了预期的错误，不允许我提交到存储库。</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oe"><img src="../Images/250c62bee28d2b358f3abfba83a40075.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JOGUU2R4F1og_Xs0lksQDw.png"/></div></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk translated">哈士奇和林特上演行动</figcaption></figure><h1 id="d893" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">结论</h1><p id="a47a" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">希望这篇博文对你有用。请随意尝试，如果你对博客有任何建议，你可以在<a class="ae lz" href="https://github.com/brionmario/blog-resources/issues" rel="noopener ugc nofollow" target="_blank">这个报告</a>中记录问题。</p><h2 id="e25f" class="nj jz iq bd ka nk nl dn ke nm nn dp ki lh no np km ll nq nr kq lp ns nt ku nu bi translated">链接</h2><ul class=""><li id="ed10" class="mv mw iq ky b kz la ld le lh mx ll my lp mz lt of nb nc nd bi translated"><a class="ae lz" href="https://github.com/brionmario/blog-resources/blob/master/technical/how-to-add-a-custom-eslint-configuration-to-a-create-react-app-project/code/javascript/.eslintrc.js" rel="noopener ugc nofollow" target="_blank"> JavaScript配置</a></li><li id="5563" class="mv mw iq ky b kz ne ld nf lh ng ll nh lp ni lt of nb nc nd bi translated"><a class="ae lz" href="https://github.com/brionmario/blog-resources/blob/master/technical/how-to-add-a-custom-eslint-configuration-to-a-create-react-app-project/code/typescript/.eslintrc.js" rel="noopener ugc nofollow" target="_blank">打字稿配置</a></li><li id="6ccc" class="mv mw iq ky b kz ne ld nf lh ng ll nh lp ni lt of nb nc nd bi translated"><a class="ae lz" href="https://github.com/brionmario/blog-resources/tree/master/technical/how-to-add-a-custom-eslint-configuration-to-a-create-react-app-project/code/javascript" rel="noopener ugc nofollow" target="_blank"> JavaScript演示App源代码</a></li><li id="49dc" class="mv mw iq ky b kz ne ld nf lh ng ll nh lp ni lt of nb nc nd bi translated"><a class="ae lz" href="https://github.com/brionmario/blog-resources/tree/master/technical/how-to-add-a-custom-eslint-configuration-to-a-create-react-app-project/code/typescript" rel="noopener ugc nofollow" target="_blank">打字稿演示App源代码</a></li></ul><p id="97c7" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">结束……✌️❤️</p></div></div>    
</body>
</html>