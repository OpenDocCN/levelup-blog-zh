<html>
<head>
<title>It’s Sed-ementary, Dear Watson</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">这是必须的，亲爱的华生</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/its-sed-ementary-dear-watson-c6a0a95959e7?source=collection_archive---------25-----------------------#2020-07-29">https://levelup.gitconnected.com/its-sed-ementary-dear-watson-c6a0a95959e7?source=collection_archive---------25-----------------------#2020-07-29</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><figure class="it iu gq gs iv iw gi gj paragraph-image"><div role="button" tabindex="0" class="ix iy di iz bf ja"><div class="gi gj is"><img src="../Images/84dd7c080fbd5a4f30ce85bce5200e86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*GTzgkTIORr5jVbJE"/></div></div><figcaption class="jd je gk gi gj jf jg bd b be z dk translated">照片由<a class="ae jh" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的<a class="ae jh" href="https://unsplash.com/@centelm?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">clment Falize</a>拍摄</figcaption></figure><h2 id="d995" class="ji jj jk bd b dl jl jm jn jo jp jq dk jr translated" aria-label="kicker paragraph">echo $title | sed -e "s/Sed-/El "</h2><div class=""/><div class=""><h2 id="68f7" class="pw-subtitle-paragraph kq jt jk bd b kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh dk translated">这个<strong class="ak"> sed </strong>程序员在说什么？你如何使用它？</h2></div><p id="9f0a" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi me translated">inux是一个很棒的工具。如果你以前从未在里面工作过，为什么不去看看呢？你可以不用双引导或者用Docker设置一个虚拟机器(它很像一个虚拟机，但是不同)就能做到。我写了一篇关于它的教程，你可以在这里阅读。</p><p id="c66b" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">如果你以前使用过Linux，并且已经找到了命令行的方法，你可能听说过一个叫做<code class="fe mn mo mp mq b">sed</code>的小工具。<code class="fe mn mo mp mq b">sed</code>代表<strong class="lk ju">S</strong>stream<strong class="lk ju">Ed</strong>itor，对于输入流的文本转换非常有用。</p><p id="e558" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">让我们探索以下场景:</p><blockquote class="mr ms mt"><p id="ff58" class="li lj mu lk b ll lm ku ln lo lp kx lq mv ls lt lu mw lw lx ly mx ma mb mc md in bi translated">您的供应商刚刚向您发送了一个压缩的资产文件，其中包含一个引用压缩内容和引用文件的文本文件(因此您可以在您的站点内部重新构建资产)。如果文件是用Windows发送的，但是您的构建脚本只运行Linux文件，则可能会出现“\n\r”回车符问题。你会如何解决这个问题？</p></blockquote><p id="def5" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">另一个例子:</p><blockquote class="mr ms mt"><p id="be0a" class="li lj mu lk b ll lm ku ln lo lp kx lq mv ls lt lu mw lw lx ly mx ma mb mc md in bi translated">您注意到将要发送给客户的CSV文件插入了错误的时间。我们正在讨论，有400多张纸都写着错误的日期。这将打乱客户的计算。你怎么能把它们都更新并重写更新后的正确日期呢？</p></blockquote><p id="3677" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">我们该怎么做？</p><blockquote class="my"><p id="4373" class="mz na jk bd nb nc nd ne nf ng nh md dk translated">SED</p></blockquote></div><div class="ab cl ni nj hy nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="in io ip iq ir"><figure class="nq nr ns nt gu iw gi gj paragraph-image"><div role="button" tabindex="0" class="ix iy di iz bf ja"><div class="gi gj np"><img src="../Images/69e58310e56da2102818f74a14fdafeb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*vIsGClIQ9lXXoOTF"/></div></div><figcaption class="jd je gk gi gj jf jg bd b be z dk translated">由<a class="ae jh" href="https://unsplash.com/@wesleyphotography?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">韦斯利·廷吉</a>在<a class="ae jh" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="06d2" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">我们拿上面的例子来分解一下:</p><h2 id="789c" class="nu nv jk bd nw nx ny dn nz oa ob dp oc lr od oe of lv og oh oi lz oj ok ol jq bi translated">拆下车窗支架-返回</h2><p id="8802" class="pw-post-body-paragraph li lj jk lk b ll om ku ln lo on kx lq lr oo lt lu lv op lx ly lz oq mb mc md in bi translated">要删除Windows回车，只需构建下面的<code class="fe mn mo mp mq b">sed</code>命令:</p><p id="7a0d" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated"><code class="fe mn mo mp mq b">$ sed "s?\r$?\n?" &lt;&lt;&lt; /path/to/file.txt</code></p><p id="bfaf" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">或者您可以将shell回显到stdout中:</p><p id="be92" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated"><code class="fe mn mo mp mq b">$ cat /path/to/file.txt | sed "s?\r$?\n?"</code></p><p id="3fce" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">这个命令就是命令:<code class="fe mn mo mp mq b"><strong class="lk ju">s</strong>ubstitute [?:delimiter] [\r$: regex] [?] [\n: replacement] [?]</code>。分隔符可以是跟在<code class="fe mn mo mp mq b">s</code>后面的任何字符。可以使用的好字符是通常不出现在文件名或文件中的字符。一些例子是:</p><ul class=""><li id="4d45" class="or os jk lk b ll lm lo lp lr ot lv ou lz ov md ow ox oy oz bi">!</li><li id="176b" class="or os jk lk b ll pa lo pb lr pc lv pd lz pe md ow ox oy oz bi">@</li><li id="f31a" class="or os jk lk b ll pa lo pb lr pc lv pd lz pe md ow ox oy oz bi">#</li><li id="eb9b" class="or os jk lk b ll pa lo pb lr pc lv pd lz pe md ow ox oy oz bi">$</li><li id="6682" class="or os jk lk b ll pa lo pb lr pc lv pd lz pe md ow ox oy oz bi">|</li><li id="fb43" class="or os jk lk b ll pa lo pb lr pc lv pd lz pe md ow ox oy oz bi">_</li><li id="2510" class="or os jk lk b ll pa lo pb lr pc lv pd lz pe md ow ox oy oz bi translated">‘’(是的，甚至空格)</li></ul><p id="aecc" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">明智地选择你的武器。</p><h2 id="7892" class="nu nv jk bd nw nx ny dn nz oa ob dp oc lr od oe of lv og oh oi lz oj ok ol jq bi translated">更新多个CSV文件</h2><p id="3396" class="pw-post-body-paragraph li lj jk lk b ll om ku ln lo on kx lq lr oo lt lu lv op lx ly lz oq mb mc md in bi translated">为了解决需要更新的多个CSV文件的问题，我们可以做得更好一些，这样我们就可以正确地格式化。要更新多个文件，可以将它们作为空格分隔的列表附加到命令中。</p><p id="10d7" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated"><code class="fe mn mo mp mq b">$ date=`$(date -R)` sed "s|[0-9]{4}/[0-9]{2}/[0-9]{2}|${date}|g" file1.csv file2.csv ...</code></p><p id="780b" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">首先，我们设置<code class="fe mn mo mp mq b">date</code>变量以RFC 5322格式输出日期和时间。然后我们运行<code class="fe mn mo mp mq b">sed</code>命令，替换所有匹配“0000/00/00”的字符串，并用我们之前设置的<code class="fe mn mo mp mq b">date</code>变量替换它们。最后，我们对在脚本定义后以空格分隔的方式插入的所有文件运行此操作。</p><p id="e58e" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">就这么简单！</p><h1 id="500f" class="pf nv jk bd nw pg ph pi nz pj pk pl oc kz pm la of lc pn ld oi lf po lg ol pp bi translated">资源</h1><p id="7ea4" class="pw-post-body-paragraph li lj jk lk b ll om ku ln lo on kx lq lr oo lt lu lv op lx ly lz oq mb mc md in bi translated"><a class="ae jh" href="https://linux.die.net/man/1/sed" rel="noopener ugc nofollow" target="_blank">https://linux.die.net/man/1/sed</a><br/><a class="ae jh" href="https://pubs.opengroup.org/onlinepubs/009695399/utilities/sed.html" rel="noopener ugc nofollow" target="_blank">https://pubs . open group . org/online pubs/009695399/utilities/sed . html</a><br/><a class="ae jh" href="https://unix.stackexchange.com/questions/13711/differences-between-sed-on-mac-osx-and-other-standard-sed" rel="noopener ugc nofollow" target="_blank">https://UNIX . stack exchange . com/questions/13711/differences-between-sed-on-MAC-OS x-and-other-standard-sed</a></p></div><div class="ab cl ni nj hy nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="in io ip iq ir"><figure class="nq nr ns nt gu iw gi gj paragraph-image"><div role="button" tabindex="0" class="ix iy di iz bf ja"><div class="gi gj pq"><img src="../Images/72a495b48064de5009d1fe20865d85f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0DPVgQnZUh7f5jqC"/></div></div><figcaption class="jd je gk gi gj jf jg bd b be z dk translated">由<a class="ae jh" href="https://unsplash.com/@arget?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">目标</a>在<a class="ae jh" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">未飞溅</a>上拍摄的照片</figcaption></figure><p id="fa24" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">你还在等什么？出去吧。开始编写一些很酷的项目，扩展你的知识面。<code class="fe mn mo mp mq b">Sed</code>是继今天之后你工具箱中的又一个工具，这是一件值得骄傲的事情。</p></div><div class="ab cl ni nj hy nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="in io ip iq ir"><p id="1cde" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">希望你喜欢这本书。我以前曾不时地使用过<code class="fe mn mo mp mq b">sed</code>，但它是一个我会继续使用的工具，因为它可以在如此多的*nix系统上使用。也许在接下来的一两个项目中，你会学到你在这里学到的东西。不管怎样，希望你玩得开心！</p><p id="f055" class="pw-post-body-paragraph li lj jk lk b ll lm ku ln lo lp kx lq lr ls lt lu lv lw lx ly lz ma mb mc md in bi translated">祝一切顺利，保持安全——斯潘塞</p></div></div>    
</body>
</html>