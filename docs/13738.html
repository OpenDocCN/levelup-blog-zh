<html>
<head>
<title>Create Positive Expected Margin Betting Opportunities with BeautifulSoup and Python Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用BeautifulSoup和Python创造积极的预期保证金下注机会第1部分</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/create-positive-expected-margin-betting-opportunities-with-beautifulsoup-and-python-bed1b4164183?source=collection_archive---------1-----------------------#2022-10-01">https://levelup.gitconnected.com/create-positive-expected-margin-betting-opportunities-with-beautifulsoup-and-python-bed1b4164183?source=collection_archive---------1-----------------------#2022-10-01</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><p id="7bff" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">这篇文章在2022年5月10日更新了新的功能。</p><p id="a675" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">我已经删除了这篇文章之前的大部分代码，如果你想了解更多，包括购买整个项目，包括在你的机器上本地运行的应用程序，请通过电子邮件联系paulcorcoran1992@gmail.com</p><p id="2342" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">博彩公司非常擅长为足球比赛定价，理论上，保证金的存在意味着随着时间的推移，他们“应该”不会输。自然数学方差意味着，随着时间的推移，如果客户支持包含5%保证金(也称为vig、overround或juice)的选择，那么博彩公司应该至少占其总赌注的5%。</p><p id="7dc3" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">如果我们可以使用python和一些网络抓取来发现下降的可能性，并突出显示没有调整的书籍，这意味着我们可以将优势转化为我们的优势，那会怎么样。这可以通过一些网络抓取和多个book maker帐户来实现。</p><figure class="kq kr ks kt gu ku gi gj paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gi gj kp"><img src="../Images/86c1458f3ac5a46d6b81306f5680af64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*vW2lxPfIQiwGd76s.jpg"/></div></div><figcaption class="lb lc gk gi gj ld le bd b be z dk translated">来源:http://inspiring-speaker.com/10-ways-help-beat-odds/</figcaption></figure><p id="9211" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">有许多oddschecking网站取消博彩公司的赔率，并作为比较网站发布，如<a class="ae lf" href="https://www.oddschecker.com/" rel="noopener ugc nofollow" target="_blank"> Oddschecker </a>、<a class="ae lf" href="https://www.oddsportal.com/" rel="noopener ugc nofollow" target="_blank"> Oddsportal </a>、Oddsjam(如果你在美国，尽管我相信这已经消失了！)</p><p id="0ae7" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">但有一个网站在页面上为多种运动提供了“赔率运动”标签。Betexplorer 提供多个联赛和运动的结果/表格/表单和收盘价格。足球(或英式足球)是人们感兴趣的运动，它们迎合了良好的刮擦可能性，我称之为“下降刮擦”或简称DOS。在我深入研究该网站及其可用于抓取的关键属性之前，我将强调这是一项正在进行的工作，最终的DOS应用程序将必须更加复杂，以便提供更强的下注机会。</p><p id="6dce" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">在我开始这个项目之前，我强调了一些关键的项目目标。承担这一任务的理由背后的原因、内容和方式。Max Shron (Shron 2014)在《用数据思考》一书中为数据分析项目提供了一个很好的框架。他陈述了在开始任何项目之前要遵循的4个关键过程。我浏览了下面图1中的每个过程，将它们与这个项目联系起来。</p><p id="9973" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated"><em class="lg">在上下文中，您定义了您试图实现的目标，以及哪些利益相关方对该问题感兴趣。定义更高层次的目标。</em></p><p id="859e" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">需求是你陈述如果成功，项目将增加什么价值的地方。在实践层面上理解这个问题的关键。</p><p id="d7a0" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated"><em class="lg">设想，结果是什么样的？还要定义解决方案逻辑。</em></p><p id="0cef" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated"><em class="lg">胜负，最重要。结果将如何使用。</em></p><figure class="kq kr ks kt gu ku gi gj paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gi gj lh"><img src="../Images/d9358f5d734eab715d3af2b7a452622a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*euvkSHiKhgd2dAparpxc-g.png"/></div></div><figcaption class="lb lc gk gi gj ld le bd b be z dk translated">作者创建的图像。</figcaption></figure><p id="7a4a" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">在这一点上，路线图和目标是明确的，现在对网站的实际刮。文章末尾提供了完整的代码。下面的图1提供了目标url。可以观察到，该网站提供了一个api，该API从博彩公司获取并返回1x2的平均价格，也就是每场比赛的主场、平局和客场获胜概率。最佳赌注部分突出了哪本书太高，他们提供的赔率是多少。这些都是关键信息，通过提取该页面及其主要数据点，我们可以创建一个数据框架，显示哪家博彩公司的报价高于市场价格。</p><figure class="kq kr ks kt gu ku gi gj paragraph-image"><div class="gi gj li"><img src="../Images/74500d5b27be783bf64980388059c7b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1324/format:webp/1*K9WWRuzHI79fI7QMnJY3WA.png"/></div><figcaption class="lb lc gk gi gj ld le bd b be z dk translated">图1:目标URL。</figcaption></figure><p id="1f35" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">通过使用谷歌Chrome网站开发工具和检查页面，可以观察到大多数数据都在这个“table-main__tt”表下，如比赛文本、比赛时间和赔率/最佳赌注登记经纪人。</p><figure class="kq kr ks kt gu ku gi gj paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gi gj lj"><img src="../Images/b55a535b75bee10fa3e034f11cfe94a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ha3M9KOoZmboRwXq3i5SWQ.png"/></div></div></figure><p id="22b8" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">现在我们开始编码！加载的默认页面用于最近12小时内的投递，并且在任何时间日期范围内匹配。</p><ol class=""><li id="de34" class="lk ll iu jt b ju jv jy jz kc lm kg ln kk lo ko lp lq lr ls bi translated">库是进口的，熊猫，请求和beautifulsoup都是需要的。</li><li id="6c42" class="lk ll iu jt b ju lt jy lu kc lv kg lw kk lx ko lp lq lr ls bi translated">指定url并初始化，以获取目标页面的内容。</li><li id="aca3" class="lk ll iu jt b ju lt jy lu kc lv kg lw kk lx ko lp lq lr ls bi translated">我使用bs4找到每个匹配的所有url链接，并设置为变量matches</li><li id="c7f1" class="lk ll iu jt b ju lt jy lu kc lv kg lw kk lx ko lp lq lr ls bi translated">为了最好的赌注，我也这样做</li><li id="9877" class="lk ll iu jt b ju lt jy lu kc lv kg lw kk lx ko lp lq lr ls bi translated">为了检索具有最佳赔率的博彩公司的名称，我搜索bestbet-logo类。</li><li id="d597" class="lk ll iu jt b ju lt jy lu kc lv kg lw kk lx ko lp lq lr ls bi translated">我也搜索了日期，但是在我写作的时候还没有添加到最终的df中。</li><li id="c03a" class="lk ll iu jt b ju lt jy lu kc lv kg lw kk lx ko lp lq lr ls bi translated">设置一个空列表来存储数据，我使用一个for循环来选择与table-main__tt相关的所有数据，然后添加匹配名称、时间和赔率的文本，最初作为3xnumofmatcheslist返回。</li></ol><p id="67b9" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">第二段代码创建了best odds/bookietitle变量，并将url链接附加到一个新列表中。然后我继续用熊猫创建数据框架。为了分离赔率列表并提取每个元素，我使用了lambda函数。例如，odds[0]与主队获胜赔率相关联，并遵循平局和客场的逻辑。然后，我用1除以概率，将概率转换成不同观点的百分比。</p><p id="abea" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">总的来说，最终的数据帧看起来像这样一个csv。</p><figure class="kq kr ks kt gu ku gi gj paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gi gj ly"><img src="../Images/46ab1844e040232b0b1c8de8aaf581e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DFztCo6Csm2-UAtm1NvIfw.png"/></div></div></figure><p id="98e8" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">使用这个例子，我们可以看到Betfair为Mechelen女子俱乐部对布鲁日女子俱乐部提供的赔率为17.0，高于市场平均水平13.1。</p><p id="5db7" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">编辑:2022年5月10日。我修正了原始帖子中提到的斜体改进。数据框现在包含一个预期保证金列，它是最高赔率相对于选择所指赔率的差值。我还添加了哪些赌注与哪些选择相关。</p><h1 id="3130" class="lz ma iu bd mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw bi translated">后续步骤/改进</h1><p id="38c2" class="pw-post-body-paragraph jr js iu jt b ju mx jw jx jy my ka kb kc mz ke kf kg na ki kj kk nb km kn ko in bi translated">目前，项目正处于一个良好的起点，为了提高监督事务司的效率，必须指出以下几点。</p><ul class=""><li id="221c" class="lk ll iu jt b ju jv jy jz kc lm kg ln kk lo ko nc lq lr ls bi translated">它是静态的，这意味着它只在本地运行，基于云的服务将有助于实现自动化。</li><li id="f47b" class="lk ll iu jt b ju lt jy lu kc lv kg lw kk lx ko nc lq lr ls bi translated">代码中没有电子邮件/电报功能来自动将这些结果发送给用户。</li><li id="8573" class="lk ll iu jt b ju lt jy lu kc lv kg lw kk lx ko nc lq lr ls bi translated">绝不是一个保证赚钱的人，但通过获得高于平均水平的赔率，它可以帮助增加利润。</li><li id="82e4" class="lk ll iu jt b ju lt jy lu kc lv kg lw kk lx ko nc lq lr ls bi translated">市场波动相当大，尤其是在价格信心较低的低级别足球上。在以色列联赛中，一支球队前一天被逼到1.67，但在比赛前却变得飘忽不定，这是很常见的。应该考虑游戏时间和市场移动百分比有多远。</li><li id="508d" class="lk ll iu jt b ju lt jy lu kc lv kg lw kk lx ko nc lq lr ls bi translated">与这一点相关，Betexplorer有一个延迟，所以它可能是陈旧的价格显示已经移动。这确实是一个迅速行动的问题。</li><li id="a6ab" class="lk ll iu jt b ju lt jy lu kc lv kg lw kk lx ko nc lq lr ls bi translated"><em class="lg">目前的准则没有提供哪种选择与最佳赔率相关，因此需要敏锐的眼光和对赔率的理解。此外，脚本中没有计算预期利润，它在雷达上等待添加。</em></li><li id="24a1" class="lk ll iu jt b ju lt jy lu kc lv kg lw kk lx ko nc lq lr ls bi translated">selenium和webdriver的使用被吹捧为通过在抓取时提供所有博彩公司单独行的更多细节来改善这一点，以提供更多的洞察力。这将是DOS的自然发展。</li></ul><p id="4f9d" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">我希望你喜欢阅读，并且这个项目可能会启发你做一些你自己的网络搜集！代码提供如下。任何想法或问题都是受欢迎的，并一如既往地关注我更多的内容和这个项目的持续进展。</p><p id="79e4" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated"><strong class="jt iv">编辑:我已经添加了关于体育/国家/联盟数据的细节，并修复了时间栏，它比格林尼治时间提前了一个小时，因为我在爱尔兰，这意味着数据提前了一个小时。</strong></p><figure class="kq kr ks kt gu ku"><div class="bz fq l di"><div class="nd ne l"/></div></figure><p id="fbf3" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">第二部分可用<a class="ae lf" href="https://medium.com/p/b6734cfe3f25" rel="noopener">此处</a>。</p><h1 id="be05" class="lz ma iu bd mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw bi translated">参考</h1><p id="164b" class="pw-post-body-paragraph jr js iu jt b ju mx jw jx jy my ka kb kc mz ke kf kg na ki kj kk nb km kn ko in bi translated">史隆麦克斯。2014.<em class="lg">用数据思考:如何将信息转化为洞察</em>。</p></div></div>    
</body>
</html>