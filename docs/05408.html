<html>
<head>
<title>Terraform CLI shortcuts</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Terraform CLI快捷方式</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/terraform-cli-shortcuts-bb68627b42a2?source=collection_archive---------10-----------------------#2020-08-25">https://levelup.gitconnected.com/terraform-cli-shortcuts-bb68627b42a2?source=collection_archive---------10-----------------------#2020-08-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="7b36" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用这些快捷方式简化日常地形使用</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/04852cd8fab768bf21137ff3bec089b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*FSDXFSnOeop4V3HK.jpg"/></div></div></figure><p id="850e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我想分享一些我日常使用的CLI快捷方式，以简化和加快我的Terraform工作流程。需求——bash兼容的解释器，因为下面描述的别名和函数将与bash、zsh和ohmyzsh一起工作。</p><p id="4f64" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">为了使用所描述的任何一个函数的别名，您需要将它放在您的<code class="fe lq lr ls lt b">~/.bashrc</code>或<code class="fe lq lr ls lt b">~/.zshrc</code>文件中(或者您为shell准备的任何其他配置文件中)。</p><p id="6474" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">然后只需将这个文件作为源文件，例如:<code class="fe lq lr ls lt b">source ~/.zshrc</code></p><h1 id="ca71" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">函数:列出给定模块的输出和变量</h1><p id="40ce" class="pw-post-body-paragraph ku kv it kw b kx mm ju kz la mn jx lc ld mo lf lg lh mp lj lk ll mq ln lo lp im bi translated">你需要提供模块目录的路径，这个函数将列出模块所有声明的变量和输出。当你记不住所有的单词，只需要快速浏览一下的时候，它会非常有用。</p><pre class="kj kk kl km gt mr lt ms mt aw mu bi"><span id="5999" class="mv lv it lt b gy mw mx l my mz"># TerraForm MOdule Explained<br/>function tfmoe {<br/>  echo -e "\nOutputs:"<br/>  grep -r "output \".*\"" $1 |awk '{print "\t",$2}' |tr -d '"'<br/>  echo -e "\nVariables:"<br/>  grep -r "variable \".*\"" $1 |awk '{print "\t",$2}' |tr -d '"'<br/>}</span></pre><p id="75da" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">示例用法:</p><pre class="kj kk kl km gt mr lt ms mt aw mu bi"><span id="007d" class="mv lv it lt b gy mw mx l my mz">user@localhost $: tfmoe ./module_alb</span><span id="ec20" class="mv lv it lt b gy na mx l my mz">Outputs:<br/>  alb_arn</span><span id="c4ad" class="mv lv it lt b gy na mx l my mz">Variables:<br/>  acm_certificate_arn<br/>  lb_name<br/>  alb_sg_list<br/>  subnets_id_list<br/>  tags</span></pre><h1 id="fde9" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">功能:用配置文件预填充模块目录</h1><p id="d3a6" class="pw-post-body-paragraph ku kv it kw b kx mm ju kz la mn jx lc ld mo lf lg lh mp lj lk ll mq ln lo lp im bi translated">你需要提供一个模块目录的路径，这个函数会创建一堆空的‘默认’。tf文件在里面。</p><pre class="kj kk kl km gt mr lt ms mt aw mu bi"><span id="6022" class="mv lv it lt b gy mw mx l my mz">#TerraForm MOdule Initialize<br/>function tfmoi {<br/>  touch $1/variables.tf<br/>  touch $1/outputs.tf<br/>  touch $1/versions.tf<br/>  touch $1/main.tf<br/>}</span></pre><p id="d646" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">示例用法:</p><pre class="kj kk kl km gt mr lt ms mt aw mu bi"><span id="2a1e" class="mv lv it lt b gy mw mx l my mz">user@localhost $: mkdir ./module_foo &amp;&amp; temoi $_</span><span id="d0f5" class="mv lv it lt b gy na mx l my mz">user@localhost $: ls ./module_foo<br/>main.tf      outputs.tf   variables.tf versions.tf</span></pre><h1 id="98e0" class="lu lv it bd lw lx ly lz ma mb mc md me jz mf ka mg kc mh kd mi kf mj kg mk ml bi translated">别名</h1><p id="f3e7" class="pw-post-body-paragraph ku kv it kw b kx mm ju kz la mn jx lc ld mo lf lg lh mp lj lk ll mq ln lo lp im bi translated">这些别名的目的只是防止您在执行简单操作时输入长命令。</p><pre class="kj kk kl km gt mr lt ms mt aw mu bi"><span id="4f0d" class="mv lv it lt b gy mw mx l my mz">alias tf='terraform'</span><span id="5d33" class="mv lv it lt b gy na mx l my mz">alias tfv='terraform validate'</span><span id="1410" class="mv lv it lt b gy na mx l my mz">alias tfi='terraform init'</span><span id="cf37" class="mv lv it lt b gy na mx l my mz">alias tfp='terraform plan'</span></pre><p id="7f5b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这是有用的，因为它使格式工具深入(递归)通过目录。</p><pre class="kj kk kl km gt mr lt ms mt aw mu bi"><span id="5423" class="mv lv it lt b gy mw mx l my mz">alias tfm='terraform fmt -recursive'</span></pre><p id="2205" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">示例用法:</p><pre class="kj kk kl km gt mr lt ms mt aw mu bi"><span id="20d0" class="mv lv it lt b gy mw mx l my mz">user@localhost $: tfm <br/>module_ecs_cluster/ecs.tf<br/>module_alb/alb.tf</span></pre></div><div class="ab cl nb nc hx nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="im in io ip iq"><p id="e249" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><em class="ni">如果你喜欢这篇文章，你也可以在</em> <a class="ae nj" href="https://twitter.com/vasylenko" rel="noopener ugc nofollow" target="_blank"> <em class="ni"> Twitter </em> </a> <em class="ni">上关注我，我偶尔会在那里发布我对AWS、Terraform、Ansible和其他DevOps相关事物的发现</em></p></div></div>    
</body>
</html>