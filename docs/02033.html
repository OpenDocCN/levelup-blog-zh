<html>
<head>
<title>End-to-end testing with Cypress.io — Programmer Den</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Cypress.io进行端到端测试——程序员书房</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/end-to-end-testing-with-cypress-io-programmer-den-289fe1e483a4?source=collection_archive---------9-----------------------#2020-02-13">https://levelup.gitconnected.com/end-to-end-testing-with-cypress-io-programmer-den-289fe1e483a4?source=collection_archive---------9-----------------------#2020-02-13</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="71f4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">前端web开发在过去的十年中发展迅速，导致单页面应用程序成为向最终用户提供web应用程序的标准。因此，像Angular和React这样的JavaScript框架在开发客户端web应用程序方面获得了极大的欢迎。许多繁重的计算和复杂的逻辑实现已经从后端转移到浏览器，导致对我们的应用程序的集成测试的需求不断增长。</p><p id="664a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">过去，QA工程师通过在浏览器中手动测试应用程序来测试新实现的前端功能，如果一切正常，该功能将被接受并准备交付生产。对于小型应用程序来说，这似乎是一个足够的解决方案，但是，随着应用程序的增长，这种测试方法不能很好地扩展。想象一个中型到大型的应用程序，有多个开发人员在开发多个不同的特性。在新开发的功能发布到生产环境之前，确保它不会破坏应用程序中任何已存在的功能是至关重要的。手动测试所有特性以确保每次实现新特性时它们都不会受到影响几乎是不可能的，更不用说还容易出现人为错误。</p><p id="f22a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们如何解决这个问题？<a class="ae ko" href="http://cypress.io" rel="noopener ugc nofollow" target="_blank"> Cypress.io </a> —端到端测试框架是<em class="kp">“每个开发人员和QA工程师都需要的前端测试新标准”</em>。你可能听说过其他端到端测试解决方案，尤其是<a class="ae ko" href="https://en.wikipedia.org/wiki/Selenium_(software)" rel="noopener ugc nofollow" target="_blank"> Selenium </a>是过去几年中最流行的框架之一。然而，开发人员经常回避使用Selenium编写测试，因为设置它是多么令人生畏，更不用说用它编写测试了。Cypress的主要目标之一是确保设置、编写、运行和调试测试都很容易。</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi kq"><img src="../Images/95e3551c049283ba9ddb506137ef3e96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*1L62nad5xCLEtOJk.png"/></div></div></figure><p id="6493" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">因此，让我们开始使用Cypress编写我们的第一个测试吧！</p><p id="2f41" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">注意:</strong>因为这篇博文的目的是让您开始了解Cypress，所以我不会详细介绍我是如何设置这个示例应用程序的。您可以从我的GitHub <a class="ae ko" href="https://github.com/DennisDurairaj/react-weather-cypress" rel="noopener ugc nofollow" target="_blank">库</a>中获取源代码。一旦您对Cypress的工作原理有了基本的了解，您就可以使用它为您自己的应用程序编写测试。</p><p id="800b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们将测试的应用程序是一个简单的天气预报应用程序，获取特定城市的天气信息。为了简单起见，我使用<a class="ae ko" href="https://github.com/typicode/json-server" rel="noopener ugc nofollow" target="_blank"> json-server </a>创建了一个模拟API，其中包含三个城市的固定数据库。天气详情从<a class="ae ko" href="https://openweathermap.org/api" rel="noopener ugc nofollow" target="_blank"> OpenWeatherAPI </a>获取。整个应用都是用<a class="ae ko" href="https://reactjs.org/" rel="noopener ugc nofollow" target="_blank"> React </a>编写的。</p><h1 id="73dc" class="lc ld it bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">设置应用程序</h1><p id="8713" class="pw-post-body-paragraph jq jr it js b jt ma jv jw jx mb jz ka kb mc kd ke kf md kh ki kj me kl km kn im bi translated"><strong class="js iu">注意:</strong>要完成本教程，您需要安装Node.js。你可以在这里下载最新的稳定版本<a class="ae ko" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank">。</a></p><pre class="kr ks kt ku gt mf mg mh mi aw mj bi"><span id="43b2" class="mk ld it mg b gy ml mm l mn mo"># Clone the github repo to your local machine <br/>git clone <a class="ae ko" href="https://github.com/DennisDurairaj/react-weather-cypress.git" rel="noopener ugc nofollow" target="_blank">https://github.com/DennisDurairaj/react-weather-cypress.git</a> </span><span id="b5e9" class="mk ld it mg b gy mp mm l mn mo"># Switch to the app directory <br/>cd react-weather-cypress </span><span id="3b75" class="mk ld it mg b gy mp mm l mn mo"># Install npm dependencies <br/>npm install</span></pre><p id="fad7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">一旦你完成了上面的步骤，在你的代码编辑器中打开它，你应该会看到一个如下所示的文件夹结构——我选择的代码编辑器是<a class="ae ko" href="https://code.visualstudio.com/" rel="noopener ugc nofollow" target="_blank"> Visual Studio Code </a></p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/2f2ea62787258dcc2e70a52f04a2b7af.png" data-original-src="https://miro.medium.com/v2/resize:fit:490/format:webp/0*Q8hXMt0A_J55xqmp.png"/></div></figure><p id="8b5f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">与我们相关的文件的简要说明-</p><ul class=""><li id="73c6" class="mr ms it js b jt ju jx jy kb mt kf mu kj mv kn mw mx my mz bi translated">这是我们React应用程序的入口点</li><li id="e419" class="mr ms it js b jt na jx nb kb nc kf nd kj ne kn mw mx my mz bi translated"><strong class="js iu"> App.js </strong> —我们的应用程序的容器组件。这是由index.js文件呈现的组件</li><li id="1c4b" class="mr ms it js b jt na jx nb kb nc kf nd kj ne kn mw mx my mz bi translated"><strong class="js iu">db . JSON</strong>——被<a class="ae ko" href="https://github.com/typicode/json-server" rel="noopener ugc nofollow" target="_blank"> json-server </a>用来模拟一个API后端服务器，其中包含三个城市的天气信息。</li><li id="5626" class="mr ms it js b jt na jx nb kb nc kf nd kj ne kn mw mx my mz bi translated"><strong class="js iu"> api.js </strong> —我们的api调用所在的文件。</li><li id="5184" class="mr ms it js b jt na jx nb kb nc kf nd kj ne kn mw mx my mz bi translated">package.json  —包含我们的应用程序依赖项列表和可以为我们的应用程序运行的各种脚本。</li></ul><p id="bcde" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们运行应用程序，以确保它正常工作。在您的终端中运行以下命令-</p><p id="1032" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果您查看package.json文件中的脚本配置，您会看到这个命令触发了另外两个命令— <code class="fe nf ng nh mg b">npm run mockAPI</code>和<code class="fe nf ng nh mg b">react-scripts start</code>。<code class="fe nf ng nh mg b">npm run mockAPI</code>，顾名思义，在端口3050上启动我们的模拟API后端服务器。<code class="fe nf ng nh mg b">react-scripts start </code>在端口3000上启动我们的天气预报应用程序。</p><p id="b76c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">一旦应用程序在浏览器中加载，您应该会看到如下所示的主页</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi kq"><img src="../Images/a1fcc1eb9761dcc8e19b4fef9aca7630.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*T5cGYngIzUbx2VxP.png"/></div></div></figure><p id="46c5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">非常简约。为了简单起见，应用程序只支持获取db.json文件中三个预定义城市的信息。伦敦、巴黎和阿姆斯特丹。</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi ni"><img src="../Images/b4b88795759fe5cf00895e1f916ecc9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*bFIbhh85wo8zOJG8.png"/></div></div></figure><p id="a211" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">请求任何其他城市会显示一条消息，表明在数据库中找不到该城市。</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi nj"><img src="../Images/f4e1d6e2eff7ffe02d8843d88aede73c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*4OPnN27fQmh08GTm.png"/></div></div></figure><p id="40e7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">好了，我们已经建立并运行了我们的应用程序，现在我们如何实际测试它呢？让我们从设置Cypress开始，这样我们就可以开始编写我们的自动化测试。</p><h1 id="629c" class="lc ld it bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">系统需求</h1><p id="3e73" class="pw-post-body-paragraph jq jr it js b jt ma jv jw jx mb jz ka kb mc kd ke kf md kh ki kj me kl km kn im bi translated">Cypress是安装在您电脑上的桌面应用程序。桌面应用程序支持以下操作系统:</p><ul class=""><li id="98d3" class="mr ms it js b jt ju jx jy kb mt kf mu kj mv kn mw mx my mz bi translated">macOS 10.9及以上版本(仅限64位)</li><li id="cd17" class="mr ms it js b jt na jx nb kb nc kf nd kj ne kn mw mx my mz bi translated">Linux Ubuntu 12.04及以上，Fedora 21和Debian 8(仅限64位)</li><li id="1bc9" class="mr ms it js b jt na jx nb kb nc kf nd kj ne kn mw mx my mz bi translated">Windows 7及更高版本</li></ul><p id="160f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们为我们的应用程序安装cypress作为一个开发依赖项</p><pre class="kr ks kt ku gt mf mg mh mi aw mj bi"><span id="3744" class="mk ld it mg b gy ml mm l mn mo">npm install cypress --save-dev</span></pre><p id="ece8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">就这样，Cypress现在已经安装好了，可以使用了！简单。</p><p id="8a2b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在我们编写测试之前，我们需要决定测试的规范是什么。如果你熟悉<a class="ae ko" href="https://stackify.com/agile-methodology/" rel="noopener ugc nofollow" target="_blank">敏捷</a>方法，用户故事遵循这样的格式:“作为一个用户，我想<strong class="js iu">执行</strong>一个动作，这个动作给出一个确定的<strong class="js iu">结果</strong>”</p><p id="a143" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这可以为构建端到端测试打下良好的基础。测试应该模拟用户应该执行的操作，并断言操作后的应用程序状态与预期的结果相匹配。</p><p id="54c8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">通常，大多数前端测试可以分为以下步骤-</p><ul class=""><li id="59cf" class="mr ms it js b jt ju jx jy kb mt kf mu kj mv kn mw mx my mz bi translated">访问应用程序的URL</li><li id="fb02" class="mr ms it js b jt na jx nb kb nc kf nd kj ne kn mw mx my mz bi translated">查询页面上的元素，可以是输入框、链接、按钮等。</li><li id="8d6d" class="mr ms it js b jt na jx nb kb nc kf nd kj ne kn mw mx my mz bi translated">与元素交互，例如在输入框中输入文本，单击按钮等。</li><li id="2062" class="mr ms it js b jt na jx nb kb nc kf nd kj ne kn mw mx my mz bi translated">检查应用程序的新状态是否与预期的一致</li></ul><p id="8aea" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">记住这一点，让我们分析我们的应用程序，并列出用户可以与我们的应用程序交互的所有场景。我们的应用程序有两个功能-</p><ul class=""><li id="4f96" class="mr ms it js b jt ju jx jy kb mt kf mu kj mv kn mw mx my mz bi translated">用户在输入中输入一个城市名称，如果该城市出现在数据库中，它将返回该城市的天气</li><li id="5c20" class="mr ms it js b jt na jx nb kb nc kf nd kj ne kn mw mx my mz bi translated">用户输入了数据库中不存在的城市名称，导致屏幕上显示“数据库中未找到城市”消息</li></ul><p id="e0d4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在我们有了我们的场景，让我们编写我们的第一个测试！</p><p id="ac36" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">创建一个文件夹来存放我们所有的Cypress测试-</p><pre class="kr ks kt ku gt mf mg mh mi aw mj bi"><span id="8435" class="mk ld it mg b gy ml mm l mn mo">mkdir cypress &amp;&amp; cd cypress mkdir integration &amp;&amp; cd integration</span></pre><p id="80a0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们的Cypress测试将存在于<code class="fe nf ng nh mg b">/integration</code>文件夹中。</p><p id="5cbd" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Cypress需要在应用程序目录的根目录下有一个<code class="fe nf ng nh mg b">cypress.json</code>配置文件才能启动，所以让我们添加一个。现在我们的<code class="fe nf ng nh mg b">cypress.json</code>文件返回一个带有默认配置的空对象。</p><h2 id="2a7d" class="mk ld it bd le nk nl dn li nm nn dp lm kb no np lq kf nq nr lu kj ns nt ly nu bi translated">测试场景1</h2><p id="26e8" class="pw-post-body-paragraph jq jr it js b jt ma jv jw jx mb jz ka kb mc kd ke kf md kh ki kj me kl km kn im bi translated"><em class="kp">当用户访问应用程序时，在搜索框中键入有效的城市名称，用户应该会看到该城市的天气信息。</em></p><p id="8bf3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在<code class="fe nf ng nh mg b">/integration</code>文件夹中，我们创建一个名为<code class="fe nf ng nh mg b">weather_search.spec.js</code>的新文件</p><figure class="kr ks kt ku gt kv"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="8884" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">与我们之前定义的步骤进行比较，让我们通过上面的测试，看看它是如何匹配的。</p><ul class=""><li id="f638" class="mr ms it js b jt ju jx jy kb mt kf mu kj mv kn mw mx my mz bi translated">第3行:访问应用程序的URL</li><li id="1137" class="mr ms it js b jt na jx nb kb nc kf nd kj ne kn mw mx my mz bi translated">第4行:查询页面上的一个元素，与之交互(输入)</li><li id="d42d" class="mr ms it js b jt na jx nb kb nc kf nd kj ne kn mw mx my mz bi translated">第5行:查询页面上的一个元素，与之交互(点击)</li><li id="c6be" class="mr ms it js b jt na jx nb kb nc kf nd kj ne kn mw mx my mz bi translated">第6行:检查应用程序的新状态是否如预期的那样</li></ul><p id="54f1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您可能已经注意到，我们告诉Cypress用属性<code class="fe nf ng nh mg b">[data-cy='attributeName']</code>来“获取”元素。如果您查看我们的<code class="fe nf ng nh mg b">App.js</code>文件，您会看到我们的选择器元素上有<code class="fe nf ng nh mg b">data-cy</code>属性。使用<code class="fe nf ng nh mg b">data-*</code>属性为我们的选择器提供上下文，并将它们与CSS或JS变化隔离开来，这被认为是一种最佳实践。你可以在这里了解更多信息<a class="ae ko" href="https://docs.cypress.io/guides/references/best-practices.html#Selecting-Elements" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="0c47" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在我们的<code class="fe nf ng nh mg b">package.json</code>文件中，让我们添加两个脚本来运行我们的测试</p><figure class="kr ks kt ku gt kv"><div class="bz fp l di"><div class="nv nw l"/></div></figure><ul class=""><li id="165a" class="mr ms it js b jt ju jx jy kb mt kf mu kj mv kn mw mx my mz bi translated"><code class="fe nf ng nh mg b">e2e-test</code> -以无头模式运行我们的测试</li><li id="1240" class="mr ms it js b jt na jx nb kb nc kf nd kj ne kn mw mx my mz bi translated"><code class="fe nf ng nh mg b">cypress:open</code> -在浏览器中运行我们的测试</li></ul><p id="6aa9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们进行测试。在终端运行<code class="fe nf ng nh mg b">npm run e2e-test</code>。Cypress查看了<code class="fe nf ng nh mg b">/integration</code>文件夹，并运行了文件夹中的所有测试。现在我们有一个文件<code class="fe nf ng nh mg b">weather_search.spec.js</code></p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi nx"><img src="../Images/dddc6693aeeac6aeeb990b91c237edd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*6xTMP46iMt-aKvtH.png"/></div></div></figure><p id="2500" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如您所见，Cypress运行了我们的测试，并成功通过。</p><p id="fda7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">然而，还有另一种方法来运行我们的测试。它们可以在用户界面中运行，用户界面会启动一个浏览器来实时查看我们正在测试的应用程序。</p><p id="71bb" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果您运行脚本<code class="fe nf ng nh mg b">npm run cypress:open</code>，Cypress UI将会打开-</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi ny"><img src="../Images/f093b5530ff11b8665a8a17290b6f9b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*XXteAfYyVRPypqUC.png"/></div></div></figure><p id="10c6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">点击“运行所有规格”或特定规格的名称，以打开测试浏览器，在我们的示例中，我们有一个名为<code class="fe nf ng nh mg b">weather_search.spec.js</code>的测试</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi nz"><img src="../Images/b1c5c6ade54f8263d9726d633bd1f545.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*UPivNYkhEPq0vYw-.png"/></div></div></figure><p id="72aa" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在左侧，您可以查看您的测试套件中已经通过或者失败的所有测试。在右边，您可以查看Cypress执行每个测试时应用程序的状态。</p><p id="b102" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">通过这个测试，我们已经能够断言，当用户搜索一个有效的城市时，预期的结果会显示在屏幕上。</p><h2 id="20fc" class="mk ld it bd le nk nl dn li nm nn dp lm kb no np lq kf nq nr lu kj ns nt ly nu bi translated">测试场景2</h2><p id="6534" class="pw-post-body-paragraph jq jr it js b jt ma jv jw jx mb jz ka kb mc kd ke kf md kh ki kj me kl km kn im bi translated"><em class="kp">当用户访问应用程序时，在搜索框中键入一个无效的城市名称，用户应该会看到一条消息说“城市不在数据库中”</em></p><p id="aff8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们在我们的<code class="fe nf ng nh mg b">cypress/integration</code>文件夹中创建另一个测试文件，我们将其命名为<code class="fe nf ng nh mg b">weather_search_invalid.spec.js</code></p><figure class="kr ks kt ku gt kv"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="0fb8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">一旦我们保存了它，新的测试将会在我们的Cypress UI测试套件中自动可见。</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi oa"><img src="../Images/5d0a7712d2e1f2bcb5eea8f897b26e9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*bgeCOICTZKmaCZ1E.png"/></div></div></figure><p id="f022" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">当你运行测试时，你应该看到它通过了-</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi kq"><img src="../Images/2b7d386e574e3205a1c5e4d38a51c6ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*n-AgG4KUEEUvvLlG.png"/></div></div></figure><p id="4090" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这就是开始为您的前端应用程序编写测试是多么容易！</p><h1 id="ed49" class="lc ld it bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">结论</h1><p id="daef" class="pw-post-body-paragraph jq jr it js b jt ma jv jw jx mb jz ka kb mc kd ke kf md kh ki kj me kl km kn im bi translated">您已经看到了Cypress是如何通过使开发人员和QA工程师易于实现来简化我们的应用程序的测试编写过程的。我们几乎没有探索Cypress的能力和它提供的一些特性。</p><p id="d633" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">例如，Cypress拍摄测试过程的快照和视频，创建存根来模拟API响应，在测试前后运行钩子来清理应用程序的状态，等等。</p><p id="f974" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">编写良好的端到端测试可以节省数小时的开发时间，并有助于捕捉生产中出现的意外错误。您可以通过探索<a class="ae ko" href="https://docs.cypress.io/guides/overview/why-cypress.html#In-a-nutshell" rel="noopener ugc nofollow" target="_blank">文档</a>开始您的Cypress之旅，直到您足够舒适地开始编写自己的测试。</p></div><div class="ab cl ob oc hx od" role="separator"><span class="oe bw bk of og oh"/><span class="oe bw bk of og oh"/><span class="oe bw bk of og"/></div><div class="im in io ip iq"><p id="c9cb" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="kp">原载于2020年2月13日</em><a class="ae ko" href="https://programmerden.com/2020/02/13/end-to-end-testing-with-cypress-io/" rel="noopener ugc nofollow" target="_blank"><em class="kp">【https://programmerden.com】</em></a><em class="kp">。</em></p></div></div>    
</body>
</html>