<html>
<head>
<title>How to Use OpenAPI for Secure and Robust API Integration</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用OpenAPI实现安全可靠的API集成</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-use-openapi-for-secure-and-robust-api-integration-df1bb37b569d?source=collection_archive---------19-----------------------#2021-10-26">https://levelup.gitconnected.com/how-to-use-openapi-for-secure-and-robust-api-integration-df1bb37b569d?source=collection_archive---------19-----------------------#2021-10-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="d6ea" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">标准很牛逼。</p><p id="0f39" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果编程语言允许<code class="fe ko kp kq kr b">()</code>和<code class="fe ko kp kq kr b">[]</code>和<code class="fe ko kp kq kr b">{}</code>互换使用，甚至混合在一起，这将是一个什么样的世界？混乱会接踵而至。</p><p id="7676" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果计算机侧面的端口只是一堆松散的电线和触点，等待您找到正确的连接组合来启动您的网络摄像头，会怎么样？感谢USB标准。</p><p id="3fa7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">API也需要标准。</strong>在不可预测和不可靠的API上构建你的应用程序是浪费时间的。只是一个接一个的头疼。这就是为什么<strong class="js iu"> API开发已经转向广泛采用</strong> <a class="ae ks" href="https://spec.openapis.org/oas/latest.html" rel="noopener ugc nofollow" target="_blank"> <strong class="js iu"> OpenAPI规范(OAS)——</strong></a>API的构建者<em class="kt">和消费者</em>都使用的行业标准。</p><p id="5e7c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">当您构建使用API的系统时，OAS会有什么帮助？通过使用遵循OAS的API，您将避免哪些陷阱？</strong></p><p id="7d39" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">最终，当一个API符合一个标准时，它是最有用的。除了符合OAS的API更易于使用之外，OAS还带来了几个工具，如<a class="ae ks" href="https://swagger.io/" rel="noopener ugc nofollow" target="_blank"> Swagger </a>和<a class="ae ks" href="https://apiclarity.io/" rel="noopener ugc nofollow" target="_blank"> APIClarity </a>，为开发人员更好地理解他们正在使用的API而构建。Swagger包括一套用于API的设计、开发、文档和测试的工具。APIClarity观察进出API的实时流量，然后将<em class="kt">实际</em>使用情况与API规范进行比较。</p><p id="3ea8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们看看OpenAPI规范是如何产生的，然后深入研究采用OAS将如何消除令人头痛的问题，并为您的第三方API集成带来信心。</p><h1 id="ff0a" class="ku kv it bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">什么是OpenAPI倡议？</h1><p id="e95a" class="pw-post-body-paragraph jq jr it js b jt ls jv jw jx lt jz ka kb lu kd ke kf lv kh ki kj lw kl km kn im bi translated">OpenAPI Initiative (OAI)是“<em class="kt">一个由前瞻性行业专家组成的联盟，他们认识到了API描述标准化的巨大价值</em>财团成员包括IBM、谷歌、甲骨文、微软和孔等重量级公司。</p><figure class="ly lz ma mb gt mc gh gi paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="gh gi lx"><img src="../Images/b8d43c548dd3595364eb3ed00c5252fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*QnxGHiPLB8IXyrXd.png"/></div></div><figcaption class="mj mk gj gh gi ml mm bd b be z dk translated">截至2021年10月的OAI成员(<a class="ae ks" href="https://www.openapis.org/membership/members" rel="noopener ugc nofollow" target="_blank">来源</a>)</figcaption></figure><p id="4ea9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">建立标准时，OAI的目标是为API双方的开发者带来价值。</p><p id="d1da" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">对于构建API的开发人员来说，该标准提供了一个框架来构建可靠的服务，与其他服务进行交互。该框架将您推向安全性和面向未来的开发的最佳实践。你<em class="kt">构建的APIs】可以变得可预测和可靠。通过使用标准格式来记录您的API，您的API变得更容易被发现。</em></p><p id="7ab4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">对于使用API</strong>的开发人员来说，好处甚至更大:与符合标准的API进行交互可以确保您<em class="kt">使用的API</em>将是<strong class="js iu">可预测的</strong>和<strong class="js iu">可靠的</strong>。你<em class="kt">也</em>获得API <strong class="js iu">可发现性</strong>的好处，因为根据OAS记录的API将更容易在API市场或交易中找到。</p><p id="9170" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">OAI在Linux基金会下运营，是许多行业领先公司的合作伙伴。遵循OAS的API的开发者和消费者可以放心地知道这些API是厂商中立的，并且依赖于众所周知的web技术。</p><p id="6cd0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">OAS本身最初是基于<a class="ae ks" href="https://swagger.io/" rel="noopener ugc nofollow" target="_blank"> Swagger规范</a>的，并继续从Swagger流行的API文档工具中汲取许多元素。此外，OAS的目标是RESTful API开发和资源驱动的API模型。</p><figure class="ly lz ma mb gt mc gh gi paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="gh gi lx"><img src="../Images/afa51795899c68c74a7dcb92ddf31fef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*cnJo9grnd6Ed5L87.png"/></div></div><figcaption class="mj mk gj gh gi ml mm bd b be z dk translated">“Swagger Petstore”是OpenAPI规范的“Hello World”(<a class="ae ks" href="https://app.swaggerhub.com/apis/Colon-Org/Swagger-PetStore-3.0/1.1" rel="noopener ugc nofollow" target="_blank">source</a>)</figcaption></figure><h1 id="775f" class="ku kv it bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">为什么使用OAS？</h1><p id="a0ab" class="pw-post-body-paragraph jq jr it js b jt ls jv jw jx lt jz ka kb lu kd ke kf lv kh ki kj lw kl km kn im bi translated">当一个API按照一个标准被设计、构建和使用时，这对维护者和API的用户都有好处。不再有浪费时间或猜测的工作，试图找出参数是否应该在查询字符串或请求正文中，或者头中的身份验证是基本身份验证还是载体身份验证。开发者的信心和速度——对于构建者和消费者——增加了，因为约定导致了代码的一致性。</p><p id="0e69" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">有了OpenAPI规范，开发人员可以享受许多好处，并避免常见的陷阱。</p><h1 id="2998" class="ku kv it bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">享受的福利</h1><p id="6c05" class="pw-post-body-paragraph jq jr it js b jt ls jv jw jx lt jz ka kb lu kd ke kf lv kh ki kj lw kl km kn im bi translated">OAS最大的好处之一是定义了一个约定——一个标准的、与语言无关的接口。符合OAS的API可以用任何语言实现，并且可以使用任何数量的底层服务。该规范与它所描述的API的实现细节完全分离。规范只是详细描述了API的功能。</p><p id="939c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这种与实现的分离对API服务的开发者和消费者都有好处，因为它<strong class="js iu">简化了系统</strong>不同功能的可发现性。有了规范在手，API消费者可以<strong class="js iu">轻松理解API </strong>，而无需了解开发API的语言或框架。消费者不需要访问任何源代码或专门的文档。例如，<a class="ae ks" href="https://dev.twitch.tv/docs/api" rel="noopener ugc nofollow" target="_blank"> Twitch API </a>的消费者将从OAS文档中获得他们使用API所需要的一切，而不需要学习Ruby on Rails或Go，它们是Twitch技术堆栈的一部分。同样，<a class="ae ks" href="https://developer.spotify.com/documentation/web-api/" rel="noopener ugc nofollow" target="_blank"> Spotify API </a>的用户不需要学习Python或Java来使用该API。这就是OAS与语言无关的好处。</p><p id="0cc7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">因为OpenAPI规范在整个行业得到了广泛的使用和认可，所以大量的<strong class="js iu">工具被用来简化API开发的任务</strong>。有验证请求的工具(如<a class="ae ks" href="https://dredd.org/en/latest/" rel="noopener ugc nofollow" target="_blank"> Dredd </a>或<a class="ae ks" href="https://github.com/isa-group/RESTest" rel="noopener ugc nofollow" target="_blank"> RESTest </a>)，自动化编写API文档的工具(如<a class="ae ks" href="https://stoplight.io/api-documentation/" rel="noopener ugc nofollow" target="_blank"> Stoplight </a>或<a class="ae ks" href="https://developerhub.io/api-docs" rel="noopener ugc nofollow" target="_blank"> DeveloperHub </a>)，甚至为许多客户端语言生成SDK代码(如<a class="ae ks" href="https://www.apimatic.io/continuous-code-generation/" rel="noopener ugc nofollow" target="_blank"> APIMatic CodeGen </a>或<a class="ae ks" href="https://openapi-generator.tech/" rel="noopener ugc nofollow" target="_blank"> OpenAPI Generator </a>)。虽然API开发人员当然可以独自完成构建，而不需要任何帮助，但是在构建符合OAS的API时，拥有许多工具链选项当然很有帮助。</p><h1 id="55f4" class="ku kv it bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">避免的陷阱</h1><p id="9c5b" class="pw-post-body-paragraph jq jr it js b jt ls jv jw jx lt jz ka kb lu kd ke kf lv kh ki kj lw kl km kn im bi translated">此外，使用符合OAS的API可以确保您不会成为许多常见陷阱的受害者。<strong class="js iu">跨API的端点被保证是一致的</strong>，因为该标准确保了HTTP方法的使用。</p><p id="f311" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您也不需要担心遇到不推荐的API(有时称为“僵尸API”)，因为<strong class="js iu">标准确保了API </strong>的合理版本。符合OAS的API不会在同一版本中引入突破性的变化；相反，突破性的改变需要API中的版本改变。</p><p id="7db8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">当使用符合OAS的API时，也要避免未记录的API(或“影子API”)，因为该标准要求开发人员<strong class="js iu">在他们的API中使用可理解的和一致同意的结构</strong>。</p><h1 id="a2da" class="ku kv it bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">强制遵守OAS</h1><p id="feaa" class="pw-post-body-paragraph jq jr it js b jt ls jv jw jx lt jz ka kb lu kd ke kf lv kh ki kj lw kl km kn im bi translated">尽管OpenAPI规范做出了种种承诺，但确保您使用的API符合OAS标准似乎令人望而生畏。构建一个遵循OAS的API的任务似乎同样艰巨。</p><p id="81e9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">不需要这样。</p><p id="e47c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">首先，围绕OpenAPI规范的工具对于从事该领域工作的任何开发人员来说都是一笔巨大的资产。因为OAS最初是基于Swagger规范的，所以仍然有来自Swagger的<a class="ae ks" href="https://swagger.io/tools/" rel="noopener ugc nofollow" target="_blank">许多工具</a>可以帮助任何开发API的开发者。</p><p id="cb10" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">对于API开发者来说，OpenAPI倡议提供了一个<a class="ae ks" href="https://openapi.tools/" rel="noopener ugc nofollow" target="_blank">工具列表</a>，用于构建健壮的符合OAS的API。无论您需要代码生成还是文档帮助，这里都可能有您需要的东西。</p><p id="c887" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">当构建使用API的客户端应用程序时，有用的工具包括那些用于<a class="ae ks" href="https://openapi.tools/#learning" rel="noopener ugc nofollow" target="_blank">了解更多关于您使用的API的工具</a>。其中一些工具可以针对您想要使用的API运行，根据OAS标准生成API的描述。</p><p id="86a2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">例如，<a class="ae ks" href="https://apiclarity.io/" rel="noopener ugc nofollow" target="_blank"> APIClarity </a>是一个观察Kubernetes环境中所有API流量的工具。基于流量观察，APIClarity推断出这些API的OpenAPI描述。如果API创建者从未定义或提供过这样的描述，这一点尤其有用。它也暴露了现有API的潜在问题，比如对未记录的、影子API的请求，或者继续使用已废弃的、僵尸API。如果您正在开始OAS遵从的道路上，那么像APIClarity这样的工具可以成为洞察力和可观察性的重要来源。</p><figure class="ly lz ma mb gt mc gh gi paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="gh gi lx"><img src="../Images/8b91eab05b05e31f44e259ac6d0cdbdd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*QBPoIB47w1hInDnQ.gif"/></div></div></figure><h1 id="1a56" class="ku kv it bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">结论</h1><p id="1b1f" class="pw-post-body-paragraph jq jr it js b jt ls jv jw jx lt jz ka kb lu kd ke kf lv kh ki kj lw kl km kn im bi translated">总之，OpenAPI规范的存在是为了让开发人员的工作变得更加容易——无论他们是构建还是使用API。不要根据过去的经验匆忙做出设计决策，您可以利用行业专家的共同智慧来开发一个优秀的API或客户端应用程序。<a class="ae ks" href="https://oai.github.io/Documentation/start-here.html" rel="noopener ugc nofollow" target="_blank">开始使用OAS标准构建API</a>并非遥不可及，您今天就可以开始！</p></div></div>    
</body>
</html>