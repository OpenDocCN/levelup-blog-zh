<html>
<head>
<title>Implement AdMob in React Native with Firebase</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在React Native中实现AdMob与Firebase</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/implement-admob-in-react-native-with-firebase-f6a2558d7f66?source=collection_archive---------15-----------------------#2020-05-18">https://levelup.gitconnected.com/implement-admob-in-react-native-with-firebase-f6a2558d7f66?source=collection_archive---------15-----------------------#2020-05-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/139802a81c80da1376b4ec8feea31fa5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oOaKMDLmGlWI6fHiCFOQFA.png"/></div></div></figure><p id="64d4" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在这篇文章中，你将学习如何在React本地应用中实现<strong class="kd iu"> AdMob功能，</strong>即谷歌广告。我们将在一个简单的React本地应用程序中实现这一点，并在iOS模拟器上进行测试。</p><p id="e799" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">众所周知，广告是谷歌、脸书、推特等科技巨头的主要收入来源。谷歌广告是最受欢迎的广告之一，谷歌广告的移动版本被称为AdMob。</p><figure class="la lb lc ld gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi kz"><img src="../Images/57cc0eff7115d67d6738a6d2a1ecf4fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aD95WfvKex9OdEP0B6GWqg.jpeg"/></div></div><figcaption class="le lf gj gh gi lg lh bd b be z dk translated">Google AdMob广告的一个例子。广告提示用户安装某个应用程序</figcaption></figure><h2 id="6b38" class="li lj it bd lk ll lm dn ln lo lp dp lq km lr ls lt kq lu lv lw ku lx ly lz ma bi translated">AdMob广告类型</h2><p id="97fe" class="pw-post-body-paragraph kb kc it kd b ke mb kg kh ki mc kk kl km md ko kp kq me ks kt ku mf kw kx ky im bi translated"><strong class="kd iu">横幅</strong>:出现在设备屏幕顶部&amp;底部的基本广告格式。</p><p id="a0fe" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu">插页</strong>:整版广告出现在自然间断&amp;过渡处，比如关卡完成。支持视频内容。</p><p id="e668" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu">奖励</strong>:整页广告奖励用户观看短视频并与可播放的广告和调查互动。有利于免费游戏用户的货币化。支持视频内容。</p><p id="35ce" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu">原生</strong>:可定制的广告格式，与你的应用的外观&amp;相匹配。广告与应用程序内容一起出现。支持视频内容。目前，原生广告只能在原生应用中出现，而不能在基于Ionic或React Native的混合应用中出现。</p><p id="f894" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">让我们看看这篇文章的基本框架。<strong class="kd iu">如果你熟悉React Native和Firebase，跳过这些部分，直接看这篇文章的代码部分。</strong></p><h1 id="b6ca" class="mg lj it bd lk mh mi mj ln mk ml mm lq mn mo mp lt mq mr ms lw mt mu mv lz mw bi translated">什么是反应原生的</h1><p id="0fc5" class="pw-post-body-paragraph kb kc it kd b ke mb kg kh ki mc kk kl km md ko kp kq me ks kt ku mf kw kx ky im bi translated">在我们进入博客之前，让我们先澄清一下我们使用的是什么框架。我们正在使用React Native，这是众多可用的混合应用框架之一。React Native最接近的对手是Flutter和Ionic。</p><p id="e27d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu">TLDR；</strong> — React Native (RN)应用比Cordova / Ionic开发的web视图应用更“本土”。React Native crates应用程序的实际Java和Swift代码，不像web-view应用程序本质上运行在一个… web-view中。</p><p id="d619" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">React Native是一个JavaScript框架，用于编写本地呈现的移动应用程序。它基于React，脸书用于构建用户界面的JavaScript库，但它的目标不是浏览器，而是移动平台。因为您编写的大部分代码可以在平台之间共享，React Native使同时为Android和iOS开发变得很容易。</p><p id="de54" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">React原生应用程序使用真正的移动用户界面组件进行渲染，<em class="mx">而不是</em>网络视图，看起来和感觉起来就像任何其他原生移动应用程序。React Native还为平台API公开了JavaScript接口，因此React Native应用程序可以访问手机摄像头或用户位置等平台功能。<a class="ae my" href="http://bit.ly/1YipO7A" rel="noopener ugc nofollow" target="_blank"/>，<a class="ae my" href="http://bit.ly/1PPEiZH" rel="noopener ugc nofollow" target="_blank"> Palantir </a>，<a class="ae my" href="http://bit.ly/1PPEjNg" rel="noopener ugc nofollow" target="_blank"> TaskRabbit </a>等已经在面向用户的应用中使用它。</p><h1 id="2afa" class="mg lj it bd lk mh mi mj ln mk ml mm lq mn mo mp lt mq mr ms lw mt mu mv lz mw bi translated">什么是Firebase</h1><p id="0089" class="pw-post-body-paragraph kb kc it kd b ke mb kg kh ki mc kk kl km md ko kp kq me ks kt ku mf kw kx ky im bi translated">如果你不太了解Firebase …你需要了解最新的技术新闻。Firebase是当今市场上的热门产品。人们可以使用Firebase来创建快速的移动应用程序后端，具有大量内置和易于集成的功能。</p><p id="17b0" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">Firebase提供的一些快速集成包括</p><ul class=""><li id="ea04" class="mz na it kd b ke kf ki kj km nb kq nc ku nd ky ne nf ng nh bi translated">电子邮件认证</li><li id="9a39" class="mz na it kd b ke ni ki nj km nk kq nl ku nm ky ne nf ng nh bi translated">社交登录</li><li id="3453" class="mz na it kd b ke ni ki nj km nk kq nl ku nm ky ne nf ng nh bi translated">实时数据库</li><li id="196a" class="mz na it kd b ke ni ki nj km nk kq nl ku nm ky ne nf ng nh bi translated">分析学</li><li id="c42f" class="mz na it kd b ke ni ki nj km nk kq nl ku nm ky ne nf ng nh bi translated">碰撞分析</li><li id="3f0f" class="mz na it kd b ke ni ki nj km nk kq nl ku nm ky ne nf ng nh bi translated">推送通知</li><li id="fe08" class="mz na it kd b ke ni ki nj km nk kq nl ku nm ky ne nf ng nh bi translated">应用内消息</li><li id="a7e6" class="mz na it kd b ke ni ki nj km nk kq nl ku nm ky ne nf ng nh bi translated">远程配置</li></ul><p id="074f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">还有更多。Firebase正在迅速成长为最受欢迎的移动应用后端平台。</p><h1 id="e4be" class="mg lj it bd lk mh mi mj ln mk ml mm lq mn mo mp lt mq mr ms lw mt mu mv lz mw bi translated">那么，为什么要用AdMob搭配Firebase呢？</h1><p id="0714" class="pw-post-body-paragraph kb kc it kd b ke mb kg kh ki mc kk kl km md ko kp kq me ks kt ku mf kw kx ky im bi translated">嗯，对AdMob来说没有必要使用Firebase。你可以独立于Firebase在你的应用中集成AdMob。我使用Firebase connected AdMob有两个原因</p><ul class=""><li id="c7d5" class="mz na it kd b ke kf ki kj km nb kq nc ku nd ky ne nf ng nh bi translated">我使用转化酶反应原生Firebase插件已经有一段时间了。他们有很好的文档，所以我信任他们的产品。反过来，它们对AdMob的依赖依赖于React-Native Firebase。因此。</li><li id="6c87" class="mz na it kd b ke ni ki nj km nk kq nl ku nm ky ne nf ng nh bi translated">连接Firebase和AdMob后，您可以查看关于您的AdMob活动的详细信息。如需解释，请参考视频<a class="ae my" href="https://youtu.be/EPKmYheOmiw" rel="noopener ugc nofollow" target="_blank">此处</a>。</li></ul><p id="cba7" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">或者，您可以使用其他React-Native AdMob依赖项在React Native应用程序中显示广告。稍后我可能会在我的博客中涉及其中一个。</p><p id="23c6" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">故事讲够了，让我们深入——如何在React原生应用中实现AdMob</p><h1 id="a3b0" class="mg lj it bd lk mh mi mj ln mk ml mm lq mn mo mp lt mq mr ms lw mt mu mv lz mw bi translated">职位结构</h1><p id="3480" class="pw-post-body-paragraph kb kc it kd b ke mb kg kh ki mc kk kl km md ko kp kq me ks kt ku mf kw kx ky im bi translated">我们将逐步探索AdMob特性的实现。这是我的博客分解</p><p id="1a45" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu">步骤</strong></p><ol class=""><li id="6b47" class="mz na it kd b ke kf ki kj km nb kq nc ku nd ky nn nf ng nh bi translated">创建一个Firebase项目并获取所需的信息</li><li id="c394" class="mz na it kd b ke ni ki nj km nk kq nl ku nm ky nn nf ng nh bi translated">创建一个简单的React本机应用程序</li><li id="d628" class="mz na it kd b ke ni ki nj km nk kq nl ku nm ky nn nf ng nh bi translated">设置您的AdMob帐户</li><li id="e24a" class="mz na it kd b ke ni ki nj km nk kq nl ku nm ky nn nf ng nh bi translated">设置AdMob相关性</li><li id="ab56" class="mz na it kd b ke ni ki nj km nk kq nl ku nm ky nn nf ng nh bi translated">在你的注册护士应用中实施不同类型的广告</li><li id="3666" class="mz na it kd b ke ni ki nj km nk kq nl ku nm ky nn nf ng nh bi translated">在iOS设备上构建应用程序并进行测试</li></ol><p id="08cb" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">所以让我们开始吧！</p><figure class="la lb lc ld gt ju gh gi paragraph-image"><div class="gh gi no"><img src="../Images/2b5df1c5ab3b92f538af6276da75e877.png" data-original-src="https://miro.medium.com/v2/resize:fit:700/1*ERffcqfeSC19qC5l50L94w.gif"/></div><figcaption class="le lf gj gh gi lg lh bd b be z dk translated">我让你笑了…不是吗？😆</figcaption></figure><h1 id="5996" class="mg lj it bd lk mh mi mj ln mk ml mm lq mn mo mp lt mq mr ms lw mt mu mv lz mw bi translated">步骤1 —创建Firebase项目</h1><p id="5f83" class="pw-post-body-paragraph kb kc it kd b ke mb kg kh ki mc kk kl km md ko kp kq me ks kt ku mf kw kx ky im bi translated">对于Admob实现，我们从Firebase项目中需要的只是— <code class="fe np nq nr ns b">GoogleService-Info.plist</code>文件(对于iOS)或<code class="fe np nq nr ns b">google-services.json</code>文件(对于Android)</p><p id="23ac" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">遵循以下步骤</p><ul class=""><li id="a7b4" class="mz na it kd b ke kf ki kj km nb kq nc ku nd ky ne nf ng nh bi translated">登录<a class="ae my" href="http://console.firebase.google.com" rel="noopener ugc nofollow" target="_blank"> Firebase控制台</a></li><li id="4103" class="mz na it kd b ke ni ki nj km nk kq nl ku nm ky ne nf ng nh bi translated">创建Firebase项目</li><li id="2a0c" class="mz na it kd b ke ni ki nj km nk kq nl ku nm ky ne nf ng nh bi translated">添加一个iOS应用程序(或Android应用程序)，注册捆绑包id，并为您的应用程序命名</li><li id="1234" class="mz na it kd b ke ni ki nj km nk kq nl ku nm ky ne nf ng nh bi translated">下载<code class="fe np nq nr ns b">GoogleService-Info.plist</code>。我们将在项目的后期需要这个文件</li></ul><p id="f4ed" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果你需要，按照<a class="ae my" href="https://youtu.be/6juww5Lmvgo" rel="noopener ugc nofollow" target="_blank">这个</a>视频进行以上步骤。</p><h1 id="f56c" class="mg lj it bd lk mh mi mj ln mk ml mm lq mn mo mp lt mq mr ms lw mt mu mv lz mw bi translated">步骤2 —创建基本的React本机应用程序</h1><p id="9b4d" class="pw-post-body-paragraph kb kc it kd b ke mb kg kh ki mc kk kl km md ko kp kq me ks kt ku mf kw kx ky im bi translated">首先，根据<a class="ae my" href="https://facebook.github.io/react-native/docs/getting-started.html" rel="noopener ugc nofollow" target="_blank">官方文档</a>，确保你具备创建react-native应用的所有先决条件。</p><blockquote class="nt nu nv"><p id="5518" class="kb kc mx kd b ke kf kg kh ki kj kk kl nw kn ko kp nx kr ks kt ny kv kw kx ky im bi translated"><strong class="kd iu"> <em class="it">在发这个帖子的时候，我已经React-Native版本0.62 &amp;节点12 . 14 . 0</em>T10】</strong></p></blockquote><p id="f921" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">创建一个空白的react-native应用程序</p><pre class="la lb lc ld gt nz ns oa ob aw oc bi"><span id="b6c0" class="li lj it ns b gy od oe l of og">$ react-native init AdMob</span></pre><p id="4f66" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这将创建一个基本的React-native应用程序，您可以在设备或模拟器中运行它。(安卓或iOS)</p><p id="7bb3" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们将创建一个简单的页面，几个按钮将触发广告。虽然横幅广告一般不需要触发器，但插播广告和奖励广告需要触发器。这些触发器通常是游戏应用程序中某个关卡的完成等。我的广告页面的基本用户界面如下所示</p><figure class="la lb lc ld gt ju gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/1c5d05682ec0c53f962764d5fe19ef97.png" data-original-src="https://miro.medium.com/v2/resize:fit:674/format:webp/1*8m4Hiq2RE02Q3oAEDUG2uw.png"/></div><figcaption class="le lf gj gh gi lg lh bd b be z dk translated">React Native-iOS中AdMob实现的基本用户界面</figcaption></figure><h1 id="b55b" class="mg lj it bd lk mh mi mj ln mk ml mm lq mn mo mp lt mq mr ms lw mt mu mv lz mw bi translated">步骤3 —设置您的Admob帐户</h1><ul class=""><li id="2f65" class="mz na it kd b ke mb ki mc km oi kq oj ku ok ky ne nf ng nh bi translated">注册然后在<a class="ae my" href="https://apps.admob.com/?utm_source=internal&amp;utm_medium=et&amp;utm_campaign=helpcentrecontextualopt&amp;utm_term=http://goo.gl/6Xkfcf&amp;subid=ww-ww-et-amhelpv4" rel="noopener ugc nofollow" target="_blank">https://apps.admob.com</a>登录您的AdMob账户。</li><li id="3f16" class="mz na it kd b ke ni ki nj km nk kq nl ku nm ky ne nf ng nh bi translated">点击侧边栏中的<strong class="kd iu">应用</strong>。</li><li id="63c6" class="mz na it kd b ke ni ki nj km nk kq nl ku nm ky ne nf ng nh bi translated">点击<strong class="kd iu">添加应用</strong>添加新应用，或点击<strong class="kd iu">查看所有应用</strong>搜索您添加到AdMob的所有应用列表。</li><li id="f52c" class="mz na it kd b ke ni ki nj km nk kq nl ku nm ky ne nf ng nh bi translated">在<strong class="kd iu">应用设置</strong>选项中，您可以看到您的<strong class="kd iu">应用ID </strong>。这是您将应用程序连接到React原生应用程序中的Google AdMob所需的ID。</li></ul><figure class="la lb lc ld gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ol"><img src="../Images/85e8f18622c9976901d1d3cfc70ce534.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JoDnyDkki68npDr77EitSw.png"/></div></div><figcaption class="le lf gj gh gi lg lh bd b be z dk translated">在Google AdMob的应用程序设置中记下你的应用程序ID</figcaption></figure><ul class=""><li id="4bc8" class="mz na it kd b ke kf ki kj km nb kq nc ku nd ky ne nf ng nh bi translated">在<strong class="kd iu">广告单元</strong>部分，您可以添加多种类型的广告单元。有关添加广告单元的更多详细信息，请查看以下详细的分步说明</li></ul><p id="2c44" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">— <a class="ae my" href="https://support.google.com/admob/answer/7311346?hl=en" rel="noopener ugc nofollow" target="_blank">横幅广告</a></p><p id="a79f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><a class="ae my" href="https://support.google.com/admob/answer/7311435?hl=en&amp;ref_topic=7382891" rel="noopener ugc nofollow" target="_blank"> —插播广告</a></p><p id="aded" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">— <a class="ae my" href="https://support.google.com/admob/answer/7311747?hl=en&amp;ref_topic=7382891" rel="noopener ugc nofollow" target="_blank">悬赏广告</a></p><p id="2327" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">AdMob有很多其他的设置，比如你的广告应该如何、何时以及在哪里出现，但这些都是以后的事了。在本帖中，我们将讨论限制在<strong class="kd iu">“如何在React原生应用中显示基本广告单元”</strong></p><h1 id="7b1a" class="mg lj it bd lk mh mi mj ln mk ml mm lq mn mo mp lt mq mr ms lw mt mu mv lz mw bi translated">步骤4 —安装AdMob依赖项并实施</h1><p id="e185" class="pw-post-body-paragraph kb kc it kd b ke mb kg kh ki mc kk kl km md ko kp kq me ks kt ku mf kw kx ky im bi translated">在这篇文章中，正如我之前解释的，我们使用AdMob和Firebase。我们为此使用的依赖项是<a class="ae my" href="https://invertase.io/oss/react-native-firebase/" rel="noopener ugc nofollow" target="_blank"> React-Native Firebase </a>。这个主依赖项包含几个服务模块，AdMob是其中之一。</p><h2 id="7a8e" class="li lj it bd lk ll lm dn ln lo lp dp lq km lr ls lt kq lu lv lw ku lx ly lz ma bi translated">4.1为iOS安装React-Native Firebase</h2><p id="2697" class="pw-post-body-paragraph kb kc it kd b ke mb kg kh ki mc kk kl km md ko kp kq me ks kt ku mf kw kx ky im bi translated">在您现有的React本机应用程序中，使用</p><pre class="la lb lc ld gt nz ns oa ob aw oc bi"><span id="a657" class="li lj it ns b gy od oe l of og"><strong class="ns iu">$ yarn add @react-native-firebase/app<br/></strong># For iOS<!-- --> <br/><strong class="ns iu">cd ios &amp;&amp; pod install</strong></span></pre><h2 id="fe49" class="li lj it bd lk ll lm dn ln lo lp dp lq km lr ls lt kq lu lv lw ku lx ly lz ma bi translated">4.2在Xcode中导入Firebase配置文件</h2><p id="3f34" class="pw-post-body-paragraph kb kc it kd b ke mb kg kh ki mc kk kl km md ko kp kq me ks kt ku mf kw kx ky im bi translated">接下来，在Xcode编辑器中打开项目(<code class="fe np nq nr ns b">/ios/{projectName}.xcworkspace</code>)。通过右键单击项目名称并将“Add files”添加到项目中，将您的<code class="fe np nq nr ns b">GoogleService-Info.plist</code>文件添加到项目中，如下所示。确保“如果需要，复制项目”复选框已启用。</p><figure class="la lb lc ld gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi om"><img src="../Images/792d7445372e8df4a19240c6c3f994b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gGBtQtlVgvtETCZbiXxg4g.png"/></div></div></figure><h2 id="69e4" class="li lj it bd lk ll lm dn ln lo lp dp lq km lr ls lt kq lu lv lw ku lx ly lz ma bi translated">4.3在Xcode中初始化Firebase</h2><p id="8626" class="pw-post-body-paragraph kb kc it kd b ke mb kg kh ki mc kk kl km md ko kp kq me ks kt ku mf kw kx ky im bi translated">在您的项目<code class="fe np nq nr ns b">/ios/{projectName}/AppDelegate.m</code>中打开AppDelegate文件。在文件的顶部导入Firebase模块:</p><pre class="la lb lc ld gt nz ns oa ob aw oc bi"><span id="39f2" class="li lj it ns b gy od oe l of og">#import &lt;Firebase.h&gt;</span></pre><p id="8296" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在<code class="fe np nq nr ns b">didFinishLaunchingWithOptions</code>方法中，添加<code class="fe np nq nr ns b">configure</code>方法:</p><pre class="la lb lc ld gt nz ns oa ob aw oc bi"><span id="958c" class="li lj it ns b gy od oe l of og">- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {<br/><strong class="ns iu">if ([FIRApp defaultApp] == nil) {<br/>  [FIRApp configure];<br/>}</strong><strong class="ns iu"> </strong><br/>....</span></pre><p id="ae68" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">通过运行命令重新生成项目</p><pre class="la lb lc ld gt nz ns oa ob aw oc bi"><span id="fda0" class="li lj it ns b gy od oe l of og">$ cd ios/<br/>$ pod install --repo-update</span></pre><h2 id="3717" class="li lj it bd lk ll lm dn ln lo lp dp lq km lr ls lt kq lu lv lw ku lx ly lz ma bi translated">4.4安装AdMob依赖项</h2><p id="0da5" class="pw-post-body-paragraph kb kc it kd b ke mb kg kh ki mc kk kl km md ko kp kq me ks kt ku mf kw kx ky im bi translated">使用安装模块</p><pre class="la lb lc ld gt nz ns oa ob aw oc bi"><span id="938d" class="li lj it ns b gy od oe l of og">$ yarn add @react-native-firebase/admob<br/># For iOS<br/>cd ios/ &amp;&amp; pod install</span></pre><p id="3534" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">完成后，使用以下命令在iOS设备中重新运行您的项目</p><pre class="la lb lc ld gt nz ns oa ob aw oc bi"><span id="06b2" class="li lj it ns b gy od oe l of og">$ react-native run-ios</span></pre><p id="31bb" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">或者使用Xcode运行。</p><p id="2818" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">以上步骤经常会导致一些小错误。如果应用程序启动不好，检查这些</p><ul class=""><li id="2b9a" class="mz na it kd b ke kf ki kj km nb kq nc ku nd ky ne nf ng nh bi translated">清理您的项目并重新构建</li><li id="4f73" class="mz na it kd b ke ni ki nj km nk kq nl ku nm ky ne nf ng nh bi translated">确保您拥有最新的CocoaPods版本</li><li id="4953" class="mz na it kd b ke ni ki nj km nk kq nl ku nm ky ne nf ng nh bi translated">确保您的PodFile将依赖关系描述为</li></ul><pre class="la lb lc ld gt nz ns oa ob aw oc bi"><span id="2743" class="li lj it ns b gy od oe l of og">pod ‘RNFBAdMob’, :path =&gt; ‘../node_modules/@react-native-firebase/admob’</span></pre><h2 id="1d55" class="li lj it bd lk ll lm dn ln lo lp dp lq km lr ls lt kq lu lv lw ku lx ly lz ma bi translated">4.5添加您的AdMob应用ID</h2><p id="30d3" class="pw-post-body-paragraph kb kc it kd b ke mb kg kh ki mc kk kl km md ko kp kq me ks kt ku mf kw kx ky im bi translated">AdMob模块需要使用我们在<strong class="kd iu">步骤3 </strong>中记下的应用ID连接到您自己的Google AdMob帐户</p><p id="2966" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">将ID添加到您的根级<code class="fe np nq nr ns b">firebase.json</code>文件(在<code class="fe np nq nr ns b">react-native</code>对象下创建一个)中，如下所示</p><pre class="la lb lc ld gt nz ns oa ob aw oc bi"><span id="107b" class="li lj it ns b gy od oe l of og">{<br/>"react-native": {<br/>  "admob_android_app_id": "ca-app-pub-xxxxxxxx~xxxxxxxx",<br/>  "admob_ios_app_id": "ca-app-pub-xxxxxxxx~xxxxxxxx"<!-- --> <br/> <!-- -->}<br/>}</span></pre><p id="72d0" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">重新构建应用程序以使更改生效。</p><h1 id="de7b" class="mg lj it bd lk mh mi mj ln mk ml mm lq mn mo mp lt mq mr ms lw mt mu mv lz mw bi translated">第5步——在应用程序中实现不同类型的广告</h1><p id="5f19" class="pw-post-body-paragraph kb kc it kd b ke mb kg kh ki mc kk kl km md ko kp kq me ks kt ku mf kw kx ky im bi translated">一旦一切都设置好了，让我们在应用程序中实现不同类型的广告。</p><h2 id="180e" class="li lj it bd lk ll lm dn ln lo lp dp lq km lr ls lt kq lu lv lw ku lx ly lz ma bi translated">横幅广告</h2><p id="2870" class="pw-post-body-paragraph kb kc it kd b ke mb kg kh ki mc kk kl km md ko kp kq me ks kt ku mf kw kx ky im bi translated">横幅广告本身就是一个<code class="fe np nq nr ns b">&lt;BannerAd&gt;</code>标签。你可以把它放在你的React本地应用中，就像其他标签一样。确保您导入了依赖项</p><pre class="la lb lc ld gt nz ns oa ob aw oc bi"><span id="bf27" class="li lj it ns b gy od oe l of og">import { TestIds, BannerAd, BannerAdSize} from '@react-native-firebase/admob';</span></pre><p id="426b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我在页面底部的<code class="fe np nq nr ns b">View</code>位置导入了横幅广告，如下图所示</p><pre class="la lb lc ld gt nz ns oa ob aw oc bi"><span id="6e4c" class="li lj it ns b gy od oe l of og">&lt;<strong class="ns iu">BannerAd</strong><br/> unitId={TestIds.BANNER}<br/> size={BannerAdSize.SMART_BANNER}<br/> requestOptions={{<br/> requestNonPersonalizedAdsOnly: true,}}<br/> onAdLoaded={() =&gt; {<br/> console.log('Advert loaded');}}<br/> onAdFailedToLoad={(error) =&gt; {<br/> console.error('Advert failed to load: ', error);}}<br/>/&gt;</span></pre><p id="cdac" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在这里，我使用了一个测试ID <code class="fe np nq nr ns b">TestIds.BANNER</code>。这使用AdMob提供的默认测试ID。当您发布应用程序时，您将使用您的制作广告单位ID替换它</p><blockquote class="nt nu nv"><p id="0368" class="kb kc mx kd b ke kf kg kh ki kj kk kl nw kn ko kp nx kr ks kt ny kv kw kx ky im bi translated"><strong class="kd iu">不要在您的生产应用程序中使用测试ID，也不要在开发应用程序时使用您的生产广告单元ID</strong></p></blockquote><p id="ab11" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">最终的广告看起来像这样</p><figure class="la lb lc ld gt ju gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/d4d3b0ff651783a22ec4b17c22ae3885.png" data-original-src="https://miro.medium.com/v2/resize:fit:674/format:webp/1*D7RwqLBPwxWjaDlgDoSfaQ.png"/></div><figcaption class="le lf gj gh gi lg lh bd b be z dk translated">React本地应用中的AdMob横幅广告</figcaption></figure><h2 id="a420" class="li lj it bd lk ll lm dn ln lo lp dp lq km lr ls lt kq lu lv lw ku lx ly lz ma bi translated">间隙广告</h2><p id="67f8" class="pw-post-body-paragraph kb kc it kd b ke mb kg kh ki mc kk kl km md ko kp kq me ks kt ku mf kw kx ky im bi translated">插播广告是一个触发器。因为这些是全页广告，所以它们并不总是作为横幅广告出现。</p><p id="a374" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">要实现间隙广告，请导入所需的依赖项并遵循下面的代码</p><figure class="la lb lc ld gt ju"><div class="bz fp l di"><div class="on oo l"/></div><figcaption class="le lf gj gh gi lg lh bd b be z dk translated">react原生应用中的间隙Admob广告</figcaption></figure><p id="5504" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">同样，<code class="fe np nq nr ns b">TestIds.INTERSTITIAL</code>是一个测试ID。发布应用程序时，将其替换为生产广告ID。</p><p id="4f3b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><code class="fe np nq nr ns b">.load()</code>方法加载广告。这个广告需要一些时间来加载。这就是为什么<code class="fe np nq nr ns b">.show()</code>在<code class="fe np nq nr ns b">LOADED</code>事件中被调用。如果你在<code class="fe np nq nr ns b">.load()</code>之后立即调用<code class="fe np nq nr ns b">.show()</code>方法，这个app就会崩溃。</p><p id="33b7" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">最后<code class="fe np nq nr ns b">.show()</code>全屏显示广告，如下图</p><figure class="la lb lc ld gt ju gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/22e3033c4953fdd7752ed67f6d52581e.png" data-original-src="https://miro.medium.com/v2/resize:fit:674/format:webp/1*UWEB_sg7FfKntt8d5xmfZQ.png"/></div><figcaption class="le lf gj gh gi lg lh bd b be z dk translated">React本机应用程序中的Admob间隙广告</figcaption></figure><h2 id="3425" class="li lj it bd lk ll lm dn ln lo lp dp lq km lr ls lt kq lu lv lw ku lx ly lz ma bi translated">奖励广告</h2><p id="146c" class="pw-post-body-paragraph kb kc it kd b ke mb kg kh ki mc kk kl km md ko kp kq me ks kt ku mf kw kx ky im bi translated">还是那句话，悬赏广告在触发机制上类似于插播广告。要实现，请导入所需的依赖项并遵循下面的代码</p><figure class="la lb lc ld gt ju"><div class="bz fp l di"><div class="on oo l"/></div></figure><p id="e470" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">同样，<code class="fe np nq nr ns b">TestIds.REWARDED</code>是一个测试ID。发布应用程序时，将其替换为生产广告ID。</p><p id="9255" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><code class="fe np nq nr ns b">.load()</code>加载广告的方法。这个广告需要一些时间来加载。这就是为什么在<code class="fe np nq nr ns b">LOADED</code>事件中调用<code class="fe np nq nr ns b">.show()</code>的原因。如果在<code class="fe np nq nr ns b">.load()</code>之后立即调用<code class="fe np nq nr ns b">.show()</code>方法，app会崩溃。</p><p id="c515" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">奖励广告也有一个<code class="fe np nq nr ns b">.EARNED_REWARD</code>事件，当奖励广告抛出回调时(通常是当用户已经看到广告的所需长度时)调用该事件。在这次回调之后，你可以向用户提供奖励。</p><p id="e6db" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">最后<code class="fe np nq nr ns b">.show()</code>全屏显示广告。悬赏广告会是这样的</p><figure class="la lb lc ld gt ju gh gi paragraph-image"><div class="gh gi op"><img src="../Images/7b5fb04bf2202384265d24f343bdd81a.png" data-original-src="https://miro.medium.com/v2/resize:fit:752/1*96WzM5SBJ8a4GDQQCQte-g.gif"/></div><figcaption class="le lf gj gh gi lg lh bd b be z dk translated">React原生应用中的Admob奖励广告</figcaption></figure><h1 id="1f83" class="mg lj it bd lk mh mi mj ln mk ml mm lq mn mo mp lt mq mr ms lw mt mu mv lz mw bi translated">步骤6:在设备上测试应用程序</h1><p id="838b" class="pw-post-body-paragraph kb kc it kd b ke mb kg kh ki mc kk kl km md ko kp kq me ks kt ku mf kw kx ky im bi translated">要运行iOS应用程序，您应该指定模拟器</p><pre class="la lb lc ld gt nz ns oa ob aw oc bi"><span id="b815" class="li lj it ns b gy od oe l of og">$ react-native run-ios --simulator=”iPhone X”</span></pre><p id="9a4b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">要运行Android应用程序，您应该首先通过Android Studio或<code class="fe np nq nr ns b">adb</code>启动模拟器(或连接设备)，然后调用</p><pre class="la lb lc ld gt nz ns oa ob aw oc bi"><span id="9e48" class="li lj it ns b gy od oe l of og">$ react-native run-android</span></pre><p id="4c18" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">Tada！你已经学会了如何在你的React原生应用中实现AdMob广告。🎉</p><h1 id="7a48" class="mg lj it bd lk mh mi mj ln mk ml mm lq mn mo mp lt mq mr ms lw mt mu mv lz mw bi translated">结论</h1><p id="7b07" class="pw-post-body-paragraph kb kc it kd b ke mb kg kh ki mc kk kl km md ko kp kq me ks kt ku mf kw kx ky im bi translated">在这篇博客中，我们学习了如何在React Native app中实现Google AdMob功能。对于用户希望从广告点击中获得一些收入的应用程序来说，AdMob功能是必不可少的。当你的应用程序有大量用户，并且你不为应用程序中的任何东西向用户收费时，这就很方便了。所以广告成为你的直接收入来源。你也可以将插播广告和奖励广告与应用内奖励相结合，如游戏升级、额外生命等。</p><blockquote class="nt nu nv"><p id="d788" class="kb kc mx kd b ke kf kg kh ki kj kk kl nw kn ko kp nx kr ks kt ny kv kw kx ky im bi translated"><strong class="kd iu"> <em class="it">本教程的完整源代码可见于</em></strong><a class="ae my" href="https://github.com/rathoreabhijeet/react-native-admob" rel="noopener ugc nofollow" target="_blank"><strong class="kd iu"><em class="it">react-native-admob</em></strong></a></p></blockquote><p id="5a71" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">本文最初发表于<a class="ae my" href="https://enappd.com" rel="noopener ugc nofollow" target="_blank"> Enappd </a>。</p></div><div class="ab cl oq or hx os" role="separator"><span class="ot bw bk ou ov ow"/><span class="ot bw bk ou ov ow"/><span class="ot bw bk ou ov"/></div><div class="im in io ip iq"><div class="la lb lc ld gt ox"><a href="https://skilled.dev" rel="noopener  ugc nofollow" target="_blank"><div class="oy ab fo"><div class="oz ab pa cl cj pb"><h2 class="bd iu gy z fp pc fr fs pd fu fw is bi translated">编写面试问题</h2><div class="pe l"><h3 class="bd b gy z fp pc fr fs pd fu fw dk translated">一个完整的平台，在这里我会教你找到下一份工作所需的一切，以及…</h3></div><div class="pf l"><p class="bd b dl z fp pc fr fs pd fu fw dk translated">技术开发</p></div></div><div class="pg l"><div class="ph l pi pj pk pg pl jz ox"/></div></div></a></div></div></div>    
</body>
</html>