<html>
<head>
<title>Enums Features You Should Know in TypeScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">列举您在TypeScript中应该知道的功能</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/enums-features-you-must-know-in-typescript-d5b6a1288b42?source=collection_archive---------4-----------------------#2022-04-10">https://levelup.gitconnected.com/enums-features-you-must-know-in-typescript-d5b6a1288b42?source=collection_archive---------4-----------------------#2022-04-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="a6b7" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">让你的打字稿代码更清晰易读。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/86dc0f75e732d0d6f8bfb53dbd2176ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TrA1BM54xu8f4tpVFp7LzQ.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">作者图片</figcaption></figure><p id="66ca" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">本文将介绍<code class="fe lu lv lw lx b">enum</code>在TypeScript中那些你需要知道的特性。</p><p id="e6cd" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">枚举是TypeScript添加到JavaScript的少数几个特性之一。它允许开发人员定义一组命名的常量，这在特性上类似于JavaScript中的<code class="fe lu lv lw lx b">object</code>或<code class="fe lu lv lw lx b">Map</code>，但是它更能表达文档化的意图，更有语义，也更简洁明了。</p><p id="ed0f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">TypeScript既支持基于数字的枚举，也支持基于字符串的枚举，所以让我们从这一点开始。</p><h1 id="2d82" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">数字枚举</h1><p id="42b8" class="pw-post-body-paragraph ky kz it la b lb mq ju ld le mr jx lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">可以使用关键字<code class="fe lu lv lw lx b">enum</code>定义枚举。对于数字枚举，它具有以下特性:</p><h2 id="693f" class="mv lz it bd ma mw mx dn me my mz dp mi lh na nb mk ll nc nd mm lp ne nf mo ng bi translated">自动增量</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="441c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">当我们不关心成员值本身，而只关心每个值在当前枚举中是否唯一时，这种自动递增行为会很有用。</p><p id="0f32" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是这种自动递增行为本身并不能保证稳定性，就像上面的第三个代码块一样。<strong class="la iu">因为它只保证当前赋值项后的值递增而不考虑整体增量</strong>，所以很容易在我们的代码中造成逻辑错误。</p><p id="bd9a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">除此之外，请注意<code class="fe lu lv lw lx b">Block-4</code>，它告诉我们，如果我们需要利用数值枚举的incrementality，<strong class="la iu">初始化器只能是一个数值常量或其他常量枚举成员初始化的数值枚举，而不是一个计算成员</strong>(计算成员和常量成员的区别在下面的小节中描述)。</p><h2 id="c8b2" class="mv lz it bd ma mw mx dn me my mz dp mi lh na nb mk ll nc nd mm lp ne nf mo ng bi translated">反向映射</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="a544" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">数值枚举(非<code class="fe lu lv lw lx b">const</code>)在编译成JavaScript代码时会创建正向(<code class="fe lu lv lw lx b">name</code>-&gt;-<code class="fe lu lv lw lx b">value</code>)和反向(<code class="fe lu lv lw lx b">value</code>-&gt;-<code class="fe lu lv lw lx b">name</code>)映射对象。</p><h1 id="e87e" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">字符串枚举</h1><p id="cd9a" class="pw-post-body-paragraph ky kz it la b lb mq ju ld le mr jx lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">顾名思义，字符串枚举是由一个字符串或另一个字符串枚举的成员组成的枚举。</p><p id="9a77" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但它与数值枚举的不同之处在于，字符串枚举没有自动递增行为，也不向后映射。</p><p id="7e8c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但它比数值枚举有优势，我个人认为有两点:</p><ol class=""><li id="e748" class="nj nk it la b lb lc le lf lh nl ll nm lp nn lt no np nq nr bi translated">它很好地“序列化”了。与在运行时不传达有用含义的数值枚举不同，字符串枚举可以在运行时提供有意义且可读的值，而不管枚举成员本身的名称如何。</li><li id="8523" class="nj nk it la b lb ns le nt lh nu ll nv lp nw lt no np nq nr bi translated">当其成员被用作类型时，只有自身可以被赋给它。当一个数字枚举成员被用作类型时，所有的数字都可以赋给它。</li></ol><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><h1 id="1b04" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">异质枚举</h1><p id="3b15" class="pw-post-body-paragraph ky kz it la b lb mq ju ld le mr jx lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">从技术上来说，enum成员可以混合字符串和数字，但是这种情况很混乱，除非有特殊需要，否则不建议使用。</p><pre class="kj kk kl km gt nx lx ny nz aw oa bi"><span id="8304" class="mv lz it lx b gy ob oc l od oe">enum BooleanLikeHeterogeneousEnum {<br/>    No = 0,<br/>    Yes = 'YES',<br/>}</span></pre><h1 id="6e8d" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">计算成员和常量成员</h1><p id="9700" class="pw-post-body-paragraph ky kz it la b lb mq ju ld le mr jx lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">如在数字枚举中已经介绍的，第一项不使用初始值设定项，或者当枚举成员被认为是常数枚举时，枚举成员是数字常数。此外，当枚举成员使用常量枚举表达式初始化时，也被认为是常量枚举。</p><p id="385c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">常量枚举表达式是可以在编译时完全计算的TypeScript表达式的子集。如果表达式满足以下条件，则它是常量枚举表达式:</p><ol class=""><li id="4d70" class="nj nk it la b lb lc le lf lh nl ll nm lp nn lt no np nq nr bi translated">文字枚举表达式(基本上是字符串文字或数值文字)</li><li id="8c9c" class="nj nk it la b lb ns le nt lh nu ll nv lp nw lt no np nq nr bi translated">对以前定义的常量枚举成员(可以源自不同的枚举)的引用</li><li id="fd60" class="nj nk it la b lb ns le nt lh nu ll nv lp nw lt no np nq nr bi translated">带括号的常量枚举表达式</li><li id="9449" class="nj nk it la b lb ns le nt lh nu ll nv lp nw lt no np nq nr bi translated">应用于常量枚举表达式的<code class="fe lu lv lw lx b">+</code>、<code class="fe lu lv lw lx b">-</code>、<code class="fe lu lv lw lx b">~</code>一元运算符之一</li><li id="c748" class="nj nk it la b lb ns le nt lh nu ll nv lp nw lt no np nq nr bi translated"><code class="fe lu lv lw lx b">+</code>、<code class="fe lu lv lw lx b">-</code>、<code class="fe lu lv lw lx b">*</code>、<code class="fe lu lv lw lx b">/</code>、<code class="fe lu lv lw lx b">%</code>、<code class="fe lu lv lw lx b">&lt;&lt;</code>、<code class="fe lu lv lw lx b">&gt;&gt;</code>、<code class="fe lu lv lw lx b">&gt;&gt;&gt;</code>、<code class="fe lu lv lw lx b">&amp;</code>、<code class="fe lu lv lw lx b">|</code>、<code class="fe lu lv lw lx b">^</code>以常量枚举表达式为操作数的二元运算符</li></ol><p id="6d62" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">常量枚举表达式被求值为<code class="fe lu lv lw lx b">NaN</code>或<code class="fe lu lv lw lx b">Infinity</code>是一个编译时错误。</p><p id="6c89" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">除上述情况外，在所有情况下，枚举成员都被视为计算成员。</p><pre class="kj kk kl km gt nx lx ny nz aw oa bi"><span id="6012" class="mv lz it lx b gy ob oc l od oe">enum FileAccess {<br/>  // constant members<br/>  None,<br/>  Read = 1 &lt;&lt; 1,<br/>  Write = 1 &lt;&lt; 2,<br/>  ReadWrite = Read | Write,<br/>  // computed member<br/>  G = "123".length,<br/>}</span></pre><h1 id="8c40" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">常数枚举</h1><p id="17c0" class="pw-post-body-paragraph ky kz it la b lb mq ju ld le mr jx lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated"><code class="fe lu lv lw lx b">const</code>枚举和常规枚举的区别在于，它们在编译时被移除，使用它们的地方被替换为相应的值。但是这也限制了<code class="fe lu lv lw lx b">const</code>枚举只能使用常量成员，而不能使用计算成员。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><p id="1cd0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">与常规枚举生成一个对象相比，<code class="fe lu lv lw lx b">const</code>枚举只会替换值，所以<code class="fe lu lv lw lx b">const</code>更严格，不能使用<code class="fe lu lv lw lx b">Object</code>上的方法。</p><p id="5cf7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是我们也不需要支付生成enum映射代码的成本，所以建议优先使用<code class="fe lu lv lw lx b">const</code>enum。</p><h1 id="eefc" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated"><code class="fe lu lv lw lx b">preserveConstEnums</code>编译选项</h1><p id="27fc" class="pw-post-body-paragraph ky kz it la b lb mq ju ld le mr jx lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">还有一点需要注意的是，当<a class="ae of" href="https://www.typescriptlang.org/tsconfig/#preserveConstEnums" rel="noopener ugc nofollow" target="_blank">preserve consensums</a>打开时，TypeScript不会删除<code class="fe lu lv lw lx b">const</code>枚举的代码。但是我们仍然不能在它上面使用<code class="fe lu lv lw lx b">Object</code>上的方法。</p><pre class="kj kk kl km gt nx lx ny nz aw oa bi"><span id="3262" class="mv lz it lx b gy ob oc l od oe">{<br/>  "compilerOptions": {<br/>    "target": "ESNext",<br/>    <strong class="lx iu">"preserveConstEnums": true</strong><br/>  }<br/>}</span></pre><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nh ni l"/></div></figure><h1 id="1b21" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">参考</h1><p id="457d" class="pw-post-body-paragraph ky kz it la b lb mq ju ld le mr jx lg lh ms lj lk ll mt ln lo lp mu lr ls lt im bi translated">[1]https://www.typescriptlang.org/docs/handbook/enums.html<a class="ae of" href="https://www.typescriptlang.org/docs/handbook/enums.html" rel="noopener ugc nofollow" target="_blank"/></p></div><div class="ab cl og oh hx oi" role="separator"><span class="oj bw bk ok ol om"/><span class="oj bw bk ok ol om"/><span class="oj bw bk ok ol"/></div><div class="im in io ip iq"><p id="5eae" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">今天就到这里。我是Zachary，我将继续输出与web开发相关的故事。如果你喜欢这样的故事，想支持我，请考虑成为 <a class="ae of" href="https://medium.com/@islizeqiang/membership" rel="noopener"> <em class="on">中会员</em> </a> <em class="on">。每月5美元，你可以无限制地访问媒体内容。如果你通过</em> <a class="ae of" href="https://medium.com/@islizeqiang/membership" rel="noopener"> <em class="on">我的链接</em> </a> <em class="on">报名，我会得到一点佣金。</em></p><p id="e8a3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你的支持对我来说很重要——谢谢。</p></div></div>    
</body>
</html>