<html>
<head>
<title>What I’ve learned from porting my first app ever to Android and iOS with Xamarin</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我从用Xamarin将我的第一个应用移植到Android和iOS系统中学到了什么</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/what-ive-learned-from-porting-my-first-app-ever-to-android-and-ios-with-xamarin-f3ac43c13f94?source=collection_archive---------7-----------------------#2019-11-19">https://levelup.gitconnected.com/what-ive-learned-from-porting-my-first-app-ever-to-android-and-ios-with-xamarin-f3ac43c13f94?source=collection_archive---------7-----------------------#2019-11-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/9b5714a58f16090c9a4f480f662bdc63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*sVoh4iGsBHJ09bTA.jpg"/></div></div></figure><p id="18af" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我终于完成了我的第一个应用程序从Windows Phone到Android和iOS的移植——“钓鱼结+”现在已经在谷歌Play商店和苹果应用商店发布。这篇文章总结了我在移植过程中学到的东西。</p><h1 id="095c" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">这个应用程序是关于什么的？</h1><p id="58f1" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">这个应用程序是关于钓鱼结的。对大多数人来说，这听起来很无聊，但对我来说，这个应用程序让我成为了一名开发人员。我对它有某种情感上的联系。那是在Windows Phone 7又新又热的时候。这是微软新推出的闪亮操作系统，但它明显缺乏iOS和Android上可用的应用程序。那时候我也在德国设法拿到了钓鱼执照。</p><p id="3f66" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">由于我很难记住如何打钓鱼结，所以我搜了一下商店，什么也没找到。我对这个事实感到非常愤怒，部分原因是这意味着我当时必须使用一个静态网站，但更沮丧的是存在这个应用程序差距的事实(WP7用户会记得)。因此，我最终决定学习如何为Windows Phone编写代码，并在几个月的自学后编写了我的第一个应用程序。</p><h1 id="7a65" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">为什么要移植</h1><p id="f1ca" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">写代码很快成为我最喜欢的业余活动，有效地取代了钓鱼。就这样，几年过去了，我开发了更多的应用程序(其中大部分是为Windows Phone开发的)，并设法成为了一名开发人员。过了一段时间，s·纳德拉成了微软的CEO，手机用Windows也就死了。</p><p id="0e2a" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">所以我创造了我所有的“宝贝”，现在它们就像Windows Phone/Mobile一样被设定为死亡。不接受这一点，我开始创建一个计划，将我的应用程序移植到其余的移动平台上。在脸书有效地扼杀了我最成功的应用程序(UniShare——不过，那是另一个故事)之后，我停止了移植那个应用程序，开始用“钓鱼结+”。</p><h1 id="47a4" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">阅读你自己的旧代码可能会有伤害</h1><p id="ae69" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">当我开始分析代码的哪些部分可以重用时，我有点震惊。当然，我知道有这样一段代码是我在不了解它的情况下编写的，但是我拒绝研究它并重构它(从今天的角度来看，原因很明显)。当时我违反了许多最佳实践，其中最突出的是:</p><ul class=""><li id="8006" class="mc md it kd b ke kf ki kj km me kq mf ku mg ky mh mi mj mk bi translated">没有MVVM</li><li id="067a" class="mc md it kd b ke ml ki mm km mn kq mo ku mp ky mh mi mj mk bi translated">一遍又一遍地重复我自己</li><li id="ae25" class="mc md it kd b ke ml ki mm km mn kq mo ku mp ky mh mi mj mk bi translated">包含超过100行的怪物方法</li></ul><p id="2922" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">最后，我做了唯一正确的事情，没有重用任何一行旧代码。</p><h1 id="671f" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">重用概念而不重用旧代码</h1><p id="b160" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">在我做出不使用旧代码库的正确决定后，我需要从旧应用中抽象出概念，并将其转化为我所知道的最佳实践和MVVM。然而，我并没有立即开始实现。</p><p id="958b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我做的第一件事是在一张纸上画出这个概念。我在草图中使用了一种无代码语言，并问我的家人是否理解这款应用背后的想法(你也可以问你的非技术朋友)。这种方法帮助我确定了该应用的3大特点:</p><ul class=""><li id="3433" class="mc md it kd b ke kf ki kj km me kq mf ku mg ky mh mi mj mk bi translated">每个结的可控动画</li><li id="9813" class="mc md it kd b ke ml ki mm km mn kq mo ku mp ky mh mi mj mk bi translated">每个结都有简单易懂的3步说明</li><li id="4c93" class="mc md it kd b ke ml ki mm km mn kq mo ku mp ky mh mi mj mk bi translated">说明的朗读功能</li></ul><p id="5a25" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在定义了所谓的“<em class="mq">最小可行产品”</em>之后，我准备考虑实现了。</p><h1 id="530a" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">新的实现</h1><p id="b4bb" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">找到正确的实现并不总是一帆风顺的。我写的第一个东西是自定义控件，它为幕后的可控动画提供动力。完成后，我将它打包到一个Nuget包中，并在一个独立的解决方案中脱离了上下文。这也是整个应用程序中最复杂的部分。它在<code class="fe mr ms mt mu b">Xamarin.Forms</code>中使用一个通用的API，并为Android和iOS使用定制的渲染器。由于性能原因，我不得不走这条路——这是我从移植中学到的一点。</p><p id="e3a8" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">很明显，我将在新版本中使用MVVM模式。所以我用自己的Nuget包设置了一些基本的东西，这些包是我在其他基于Xamarin的项目中编写的。</p><p id="a09c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">当谈到我的应用程序的整体结构时，我认为一个主/细节实现就可以了。然而，这种感觉总是不对，所以我转向了Shell(这是一个非常新的领域，所以我尝试了一下)。最后，我采用了一种更加定制的方法。该应用程序使用一个带有3个标签的标签页，一个是动画，第二个是3步教程，最后但并非最不重要的是设置/关于页面。前两个页面共享一个自定义的自顶向下菜单实现，为其项目和选择绑定到同一个ViewModel。</p><h1 id="9095" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">更多的Xamarin。我学会的形体特征(去爱)</h1><p id="4723" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">Xamarin和Xamarin。自从我用表单为Telefonicá Germany编写第一个Xamarin应用程序以来，表单本身已经非常强大，并且已经成熟了很多。以下是我开始使用的(高级)功能列表:</p><ul class=""><li id="c3d2" class="mc md it kd b ke kf ki kj km me kq mf ku mg ky mh mi mj mk bi translated"><strong class="kd iu"> Xamarin。essentials</strong>——启动你的应用程序的库——真的！</li><li id="8147" class="mc md it kd b ke ml ki mm km mn kq mo ku mp ky mh mi mj mk bi translated"><strong class="kd iu"> Xamarin Forms Animations </strong> —在用户界面中添加一些好看的视觉活动，美化你的应用程序的外观</li><li id="9d85" class="mc md it kd b ke ml ki mm km mn kq mo ku mp ky mh mi mj mk bi translated"><strong class="kd iu"> Xamarin Forms Effects </strong> —轻松修改/增强现有控件，无需创建成熟的自定义渲染器</li><li id="4a69" class="mc md it kd b ke ml ki mm km mn kq mo ku mp ky mh mi mj mk bi translated">xa marin Forms VisualStateManager——使基于属性改变来改变用户界面(有时)变得更加容易</li><li id="d4b4" class="mc md it kd b ke ml ki mm km mn kq mo ku mp ky mh mi mj mk bi translated"><strong class="kd iu"> Xamarin。表单触发器</strong> —基于属性更改修改UI的替代方法(但不限于此)</li></ul><h1 id="9bd2" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">三个火枪手</h1><p id="6c7f" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">因为Xamarin和Xamarin。表格是如此强大的工具，你可能会遇到需要帮助/更多信息的情况。我的三个火枪手获得缺失的信息、实施帮助或解决思路:</p><ul class=""><li id="3753" class="mc md it kd b ke kf ki kj km me kq mf ku mg ky mh mi mj mk bi translated"><strong class="kd iu">微软Xamarin文档</strong>—Xamarin的文档非常广泛，通过阅读它们(甚至再次阅读)，我经常会有这样的“明白了！”-时刻</li><li id="183d" class="mc md it kd b ke ml ki mm km mn kq mo ku mp ky mh mi mj mk bi translated">Github——如果这些文档没有帮助，Github可以。无论是在Xamarin(.表单)或研究呈现器，Github对我的帮助就像文档一样大。</li><li id="c80a" class="mc md it kd b ke ml ki mm km mn kq mo ku mp ky mh mi mj mk bi translated"><strong class="kd iu">网络搜索</strong>——很有可能有人解决了类似的问题/想法，并就此写了一篇博客。我不盲目照搬那些解决方案。<em class="mq">首先我读它们，然后我试着理解它们，最后，我实现我自己的抽象。这样，我就处于一个稳定的学习过程中。</em></li></ul><h1 id="cd90" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">学习理解本机实现</h1><p id="65dc" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">我保证你会遇到这样的情况，当你只关注Xamarin的时候，火枪手帮不上忙。接受Xamarin位于其他人的本机代码之上并为我们完成大量转换的情况。学会阅读Objective-C、Swift、Java和Kotlin代码，并翻译成C#代码。一旦你在本地样本、博客文章或文档中找到了可能的解决方案，你会发现它们中的大多数都很容易翻译成Xamarin代码。不要回避Xamarin开发的这一部分，相信我，它会在将来帮助你。</p><h1 id="4d20" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">结论</h1><p id="85c5" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">将我的第一个应用移植到Android和iOS上不仅给我带来了很多乐趣，也让我学到了很多东西。有些是行为性质的，有些是代码实现。这篇文章是关于行为部分的——我将在接下来的博客文章中写一些实现。</p><p id="6f80" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我希望你喜欢阅读这篇文章。如果你有问题或有类似的经历，并希望讨论，请随时在这个帖子上留下评论或通过社交媒体与我联系。</p><h2 id="d98b" class="mv la it bd lb mw mx dn lf my mz dp lj km na nb ln kq nc nd lr ku ne nf lv ng bi translated">直到下一个帖子，编码快乐！</h2><h1 id="876c" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">有用的链接:</h1><ul class=""><li id="57e4" class="mc md it kd b ke lx ki ly km nh kq ni ku nj ky mh mi mj mk bi translated"><a class="ae nk" href="https://docs.microsoft.com/en-us/xamarin/" rel="noopener ugc nofollow" target="_blank">https://docs.microsoft.com/en-us/xamarin/</a></li><li id="921b" class="mc md it kd b ke ml ki mm km mn kq mo ku mp ky mh mi mj mk bi translated"><a class="ae nk" href="https://github.com/xamarin" rel="noopener ugc nofollow" target="_blank">https://github.com/xamarin</a></li><li id="a943" class="mc md it kd b ke ml ki mm km mn kq mo ku mp ky mh mi mj mk bi translated"><a class="ae nk" href="https://docs.microsoft.com/en-us/xamarin/essentials/" rel="noopener ugc nofollow" target="_blank">https://docs.microsoft.com/en-us/xamarin/essentials/</a></li><li id="2d1b" class="mc md it kd b ke ml ki mm km mn kq mo ku mp ky mh mi mj mk bi translated"><a class="ae nk" href="https://docs.microsoft.com/en-us/xamarin/xamarin-forms/app-fundamentals/effects/" rel="noopener ugc nofollow" target="_blank">https://docs . Microsoft . com/en-us/xa marin/xa marin-forms/app-fundamentals/effects/</a></li><li id="9d9a" class="mc md it kd b ke ml ki mm km mn kq mo ku mp ky mh mi mj mk bi translated"><a class="ae nk" href="https://docs.microsoft.com/en-us/xamarin/xamarin-forms/user-interface/animation/" rel="noopener ugc nofollow" target="_blank">https://docs . Microsoft . com/en-us/xa marin/xa marin-forms/user-interface/animation/</a></li><li id="e982" class="mc md it kd b ke ml ki mm km mn kq mo ku mp ky mh mi mj mk bi translated"><a class="ae nk" href="https://docs.microsoft.com/en-us/xamarin/xamarin-forms/user-interface/visual-state-manager" rel="noopener ugc nofollow" target="_blank">https://docs . Microsoft . com/en-us/xa marin/xa marin-forms/user-interface/visual-state-manager</a></li><li id="a5c1" class="mc md it kd b ke ml ki mm km mn kq mo ku mp ky mh mi mj mk bi translated"><a class="ae nk" href="https://docs.microsoft.com/en-us/xamarin/xamarin-forms/app-fundamentals/triggers" rel="noopener ugc nofollow" target="_blank">https://docs . Microsoft . com/en-us/xa marin/xa marin-forms/app-fundamentals/triggers</a></li><li id="c2d4" class="mc md it kd b ke ml ki mm km mn kq mo ku mp ky mh mi mj mk bi translated">https://developer.android.com/docs/<a class="ae nk" href="https://developer.android.com/docs/" rel="noopener ugc nofollow" target="_blank"/></li><li id="53d7" class="mc md it kd b ke ml ki mm km mn kq mo ku mp ky mh mi mj mk bi translated">【https://developer.apple.com/documentation T4】</li></ul></div><div class="ab cl nl nm hx nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="im in io ip iq"><p id="54b3" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><em class="mq">原载于2019年11月19日</em><a class="ae nk" href="https://msicc.net/what-ive-learned-from-porting-my-first-app-ever-to-android-and-ios-with-xamarin/" rel="noopener ugc nofollow" target="_blank"><em class="mq">https://msicc.net</em></a><em class="mq">。</em></p></div></div>    
</body>
</html>