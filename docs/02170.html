<html>
<head>
<title>What is SSH?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">什么是宋承宪？</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/what-is-ssh-103f89e3e4b8?source=collection_archive---------1-----------------------#2020-02-24">https://levelup.gitconnected.com/what-is-ssh-103f89e3e4b8?source=collection_archive---------1-----------------------#2020-02-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/5ea0934be827197b236b3259942542d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NfrC9urk9a69PqAioUrvaw.jpeg"/></div></div></figure><div class=""/><div class=""><h2 id="af15" class="pw-subtitle-paragraph jy ja jb bd b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp dk translated">安全外壳简介</h2></div><p id="066c" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">SSH或Secure Shell是一种网络协议，它允许一台计算机通过不安全的网络(如互联网)安全地连接到另一台计算机，共享如何通信的协议。SSH是一个<a class="ae lm" href="https://en.wikipedia.org/wiki/Application_layer" rel="noopener ugc nofollow" target="_blank">应用层</a>协议，它是<a class="ae lm" href="https://en.wikipedia.org/wiki/OSI_model" rel="noopener ugc nofollow" target="_blank"> OSI模型</a>的第7层。</p><p id="37ff" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">SSH非常有用，因为您不必物理访问另一台机器；你可以简单地通过互联网连接到它。这允许我们远程控制服务器。</p><p id="d20d" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">SSH最早出现在90年代中期，被设计用来替代<a class="ae lm" href="https://en.wikipedia.org/wiki/Telnet" rel="noopener ugc nofollow" target="_blank"> Telnet </a>，后者也是一种不加密传输数据的应用层协议。在没有加密的情况下，数据以明文形式在互联网上传输。任何在你和远程机器之间有数据包嗅探器的人都可以看到你传输的所有数据和你做的所有事情。</p><figure class="lo lp lq lr gt is gh gi paragraph-image"><div class="gh gi ln"><img src="../Images/b882e481275ce89e5a2c599224148d39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1058/format:webp/1*6pBEv-RCAtvDUkyFzhzwrA.jpeg"/></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk translated">可以看到纯文本传输的数据</figcaption></figure><p id="845a" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">加密是一种隐藏数据的方法，除非您知道如何解码或解密数据，否则无法读取数据。SSH是作为一种安全的通信方式创建的，它通过隧道对数据进行加密，因此在传输过程中不良行为者无法检索数据。使用SSH，您仍然可以看到正在传输的数据以及传输了多少数据，但是您看不到数据是什么。</p><figure class="lo lp lq lr gt is gh gi paragraph-image"><div class="gh gi lw"><img src="../Images/03d8e2b48e1ea6c3af5d3ce95f4451b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1170/format:webp/1*CnqUlXuJgEHXni-SZYE0jA.jpeg"/></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk translated">加密的数据不能被中间人读取</figcaption></figure><p id="6ce7" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">SSH通常使用<strong class="ks jc">客户机-服务器模型</strong>来实现。一台计算机被称为<strong class="ks jc"> SSH客户端</strong>，另一台计算机充当<strong class="ks jc"> SSH服务器</strong>，或<strong class="ks jc">主机</strong>。</p><p id="c0f4" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated"><a class="ae lm" href="https://en.wikipedia.org/wiki/HTTPS" rel="noopener ugc nofollow" target="_blank"> <strong class="ks jc"> HTTPS </strong> </a>，即超文本传输协议Secure，也是另一种加密数据的协议。那么宋承宪和HTTPS的区别是什么呢？HTTPS允许网络浏览器与服务器通信来显示网站。SSH允许<a class="ae lm" href="http://linuxcommand.org/lc3_lts0010.php" rel="noopener ugc nofollow" target="_blank">外壳</a>实现两个设备之间的数据交换或通信，而不仅仅是浏览器和服务器。Shells允许您与操作系统对话。</p><p id="2718" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">当您连接到SSH服务器时，您将进入一个shell。这个shell可以是Linux终端shell或Windows命令提示符shell，您可以在所连接的机器上执行命令。当您使用终端或命令行时，您是在与您的操作系统对话。使用SSH，您也可以与远程操作系统对话。</p><h2 id="4c0e" class="lx ly jb bd lz ma mb dn mc md me dp mf kz mg mh mi ld mj mk ml lh mm mn mo mp bi translated">用SSH可以传输什么？</h2><p id="aa1d" class="pw-post-body-paragraph kq kr jb ks b kt mq kc kv kw mr kf ky kz ms lb lc ld mt lf lg lh mu lj lk ll ij bi translated">SSH可用于传输:</p><ul class=""><li id="2ab3" class="mv mw jb ks b kt ku kw kx kz mx ld my lh mz ll na nb nc nd bi translated">数据</li><li id="8cb7" class="mv mw jb ks b kt ne kw nf kz ng ld nh lh ni ll na nb nc nd bi translated">命令</li><li id="1fec" class="mv mw jb ks b kt ne kw nf kz ng ld nh lh ni ll na nb nc nd bi translated">文本</li><li id="2084" class="mv mw jb ks b kt ne kw nf kz ng ld nh lh ni ll na nb nc nd bi translated">文件(使用SFTP:安全文件传输协议，基本上是FTP的加密版本，使得中间人攻击是不可能的)</li></ul><h1 id="b3d6" class="nj ly jb bd lz nk nl nm mc nn no np mf kh nq ki mi kk nr kl ml kn ns ko mo nt bi translated">SSH是如何工作的？</h1><p id="bf7e" class="pw-post-body-paragraph kq kr jb ks b kt mq kc kv kw mr kf ky kz ms lb lc ld mt lf lg lh mu lj lk ll ij bi translated">SSH将数据分解成一系列数据包。像任何数据包传输一样，开头有几个字段。</p><figure class="lo lp lq lr gt is gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/1f48f3f1911f801f0e6c0621983a6781.png" data-original-src="https://miro.medium.com/v2/resize:fit:322/format:webp/1*yfog0z6lfC7P1J5wVELYcg.png"/></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk translated">一包</figcaption></figure><p id="5420" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">在顶部，<strong class="ks jc">数据包长度</strong>告诉你数据包有多大。之后，你有另一个字节，<strong class="ks jc">填充量</strong>，告诉你有多少填充。然后你有你的数据，<strong class="ks jc">有效载荷</strong>。在有效载荷之后，你有<strong class="ks jc">填充</strong>。这些填充是随机字节，没有任何意义，但与有效载荷一起加密，使检测数据更加困难，因为您已经加入了这些随机的额外数据。最后，您有一个<strong class="ks jc">消息认证码</strong>，这样您就可以确保数据没有被篡改。</p><p id="a0b6" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">有效载荷也可以使用标准压缩算法进行压缩。整个包，不包括长度和认证码，然后被加密。</p><figure class="lo lp lq lr gt is gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/3440b81634be4bed36e0d1766793b68d.png" data-original-src="https://miro.medium.com/v2/resize:fit:322/format:webp/1*xPDMsaiF-BxhLHfy-7wMhw.jpeg"/></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk translated">加密的数据包</figcaption></figure><p id="8fbb" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">然后数据包被发送到服务器。服务器解密数据包并解压缩有效载荷以提取数据。对通过连接发送的每个数据包执行相同的过程。</p><p id="eedd" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">为了保证SSH的安全，SSH在传输的不同阶段使用三种不同类型的数据操作技术。SSH中使用的三种技术是:</p><ol class=""><li id="0a47" class="mv mw jb ks b kt ku kw kx kz mx ld my lh mz ll nv nb nc nd bi translated">对称加密</li><li id="336c" class="mv mw jb ks b kt ne kw nf kz ng ld nh lh ni ll nv nb nc nd bi translated">不对称加密</li><li id="0186" class="mv mw jb ks b kt ne kw nf kz ng ld nh lh ni ll nv nb nc nd bi translated">散列法</li></ol><h2 id="22d8" class="lx ly jb bd lz ma mb dn mc md me dp mf kz mg mh mi ld mj mk ml lh mm mn mo mp bi translated">对称加密</h2><p id="3772" class="pw-post-body-paragraph kq kr jb ks b kt mq kc kv kw mr kf ky kz ms lb lc ld mt lf lg lh mu lj lk ll ij bi translated">对称加密是一种加密类型，其中一个密钥可用于加密发送到目的地的消息，也可用于解密目的地收到的消息。这种加密方案也被称为<strong class="ks jc"> <em class="nw">共享秘密加密</em> </strong>，或者<strong class="ks jc"> <em class="nw">共享密钥加密</em> </strong>。</p><figure class="lo lp lq lr gt is gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/b4d2353d3677e3962fdb7356dd971449.png" data-original-src="https://miro.medium.com/v2/resize:fit:962/format:webp/1*f-qgbmIGK_LwcfKWZhPPMQ.jpeg"/></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk translated">图1:对称加密</figcaption></figure><p id="4325" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">两台设备使用相同的密钥来加密发送的数据和解密接收的数据。秘密密钥是特定于每个SSH会话的。这是用于加密整个SSH连接的加密类型，以防止中间人攻击读取数据，因为他们没有这个密钥。</p><p id="6342" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">出现的一个问题是初始密钥交换。如果第三方在密钥交换过程中监听，他们现在就会知道密钥，并能够解密我们所有的消息。防止这种情况的一种方法是使用密钥交换算法。</p><p id="c8fa" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated"><strong class="ks jc">密钥交换算法</strong>是一种不被拦截的交换密钥的安全方式。这是通过两台计算机交换公共数据，然后独立处理这些数据以获得密钥来实现的。为了实现密钥交换算法，我们需要非对称加密。</p><h2 id="91f1" class="lx ly jb bd lz ma mb dn mc md me dp mf kz mg mh mi ld mj mk ml lh mm mn mo mp bi translated">不对称加密</h2><p id="7608" class="pw-post-body-paragraph kq kr jb ks b kt mq kc kv kw mr kf ky kz ms lb lc ld mt lf lg lh mu lj lk ll ij bi translated">不对称加密是通过使用两个单独的密钥进行加密和解密的加密，一个公钥和一个私钥。公钥可以与任何人共享，但私钥永远不会被共享。一个公钥和一个私钥组成一个<strong class="ks jc"> <em class="nw">密钥对</em> </strong>。用机器的公钥加密的消息只能用它的私钥解密。公钥存储在SSH服务器上，私钥存储在SSH客户机上。</p><figure class="lo lp lq lr gt is gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/d49ddb92f851129f079383acdee86c35.png" data-original-src="https://miro.medium.com/v2/resize:fit:962/format:webp/1*5Ms9thTLefM_fD7HORL8xA.jpeg"/></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk translated">图2:不对称加密</figcaption></figure><p id="081e" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">如果我给你我的公钥，你可以用我的公钥加密给我发消息。然后我就可以用我的私钥解密来阅读它。</p><figure class="lo lp lq lr gt is gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/4d27250950677884a7b6668769921c9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:962/format:webp/1*I9oQmLi70txKytFoIiP_nA.jpeg"/></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk translated">图3:非对称加密密钥交换</figcaption></figure><p id="4253" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">即使第三方设法获得了公钥，他们也无法解密任何消息，因为他们没有私钥。只要私钥不被发送出去，并且在你的设备上是安全的，你的信息就不能被解密。</p><p id="9613" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">SSH在一些地方使用非对称加密，比如用于设置对称加密的密钥交换算法。非对称加密也用作不使用密码就可以通过SSH进入服务器的密钥。我们交换算法来生成用于加密和解密消息的密钥(图1中的黄色密钥)。</p><p id="0c8d" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">两个设备都生成临时公钥和私钥，并共享它们各自的公钥。然后，它们独立生成一个新的对称密钥，两台设备都将使用该密钥来加密和解密消息。这个生成是使用<a class="ae lm" href="https://en.wikipedia.org/wiki/Diffie%E2%80%93Hellman_key_exchange" rel="noopener ugc nofollow" target="_blank"> <strong class="ks jc"> Diffie Hellman密钥交换</strong> </a>完成的。</p><p id="6954" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">在Diffie Hellman密钥交换开始时，两个设备需要就它们将用于密钥交换的几个参数达成一致:</p><ul class=""><li id="17e3" class="mv mw jb ks b kt ku kw kx kz mx ld my lh mz ll na nb nc nd bi translated"><strong class="ks jc">发电机</strong>T0】</li><li id="6656" class="mv mw jb ks b kt ne kw nf kz ng ld nh lh ni ll na nb nc nd bi translated"><strong class="ks jc">质数</strong>质数<code class="fe ny nz oa ob b"><strong class="ks jc">n</strong></code></li></ul><p id="90ce" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">每个设备将使用<code class="fe ny nz oa ob b"><strong class="ks jc">g</strong></code>和它们的私钥来生成一个公钥。</p><p id="8079" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">如果你想知道Diffie Hellman背后的数学，请观看这个视频。</p><p id="3c86" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">一旦建立了安全的对称通信，服务器就使用客户端的公钥生成一个<strong class="ks jc">挑战</strong>，并将其发送给客户端进行认证。如果客户机能够成功地解密这个挑战，这意味着它拥有连接所需的私钥，SSH会话就开始了。</p><h2 id="9c98" class="lx ly jb bd lz ma mb dn mc md me dp mf kz mg mh mi ld mj mk ml lh mm mn mo mp bi translated">散列法</h2><p id="5676" class="pw-post-body-paragraph kq kr jb ks b kt mq kc kv kw mr kf ky kz ms lb lc ld mt lf lg lh mu lj lk ll ij bi translated">哈希是另一种加密形式，用于保护外壳连接。哈希允许您创建一组信息的签名或摘要。这是一个单向过程，哈希数据永远不会被解密。但是这有什么用呢？</p><p id="d6d2" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">如果第三方设法欺骗客户端和主机，他们可以篡改消息。SSH使用<a class="ae lm" href="https://en.wikipedia.org/wiki/HMAC" rel="noopener ugc nofollow" target="_blank"><strong class="ks jc">【HMAC】</strong></a>(<strong class="ks jc">基于哈希的消息认证码</strong>)。HMACs确保发送的消息以完整且未经修改的形式被接收。</p><p id="7d96" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">使用散列函数，传输的每条消息都必须包含一个称为MAC的东西。此MAC是根据对称密钥、数据包序列号和发送的消息内容生成的哈希。将这三个元素组合起来作为哈希函数的输入，这个哈希函数将输出一些没有意义的字符串。这个字符串，或<strong class="ks jc"> <em class="nw">签名</em> </strong>，被发送到主机。</p><p id="b979" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">现在，主机如何检查消息是否被篡改？</p><p id="dd1e" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">因为主机拥有相同的信息(对称密钥、数据包序列号和消息内容)，所以它们也可以使用相同的哈希函数来生成哈希。如果生成的哈希与接收到的哈希匹配，则验证客户端的<strong class="ks jc"> <em class="nw">签名</em> </strong>。</p><p id="9a18" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">这是可行的，因为如果数据以任何方式改变，即使是像大写字母这样的小事，哈希也会完全不同。</p></div><div class="ab cl oc od hu oe" role="separator"><span class="of bw bk og oh oi"/><span class="of bw bk og oh oi"/><span class="of bw bk og oh"/></div><div class="ij ik il im in"><p id="33d7" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">我希望这个快速概述能让您对SSH有更好的理解。如果您感兴趣，我列出了以下参考资料，可以用来更深入地研究SSH。</p><p id="bf8f" class="pw-post-body-paragraph kq kr jb ks b kt ku kc kv kw kx kf ky kz la lb lc ld le lf lg lh li lj lk ll ij bi translated">感谢阅读！</p><h2 id="9b8c" class="lx ly jb bd lz ma mb dn mc md me dp mf kz mg mh mi ld mj mk ml lh mm mn mo mp bi translated">参考</h2><div class="ip iq gp gr ir oj"><a href="https://www.ssh.com/ssh/protocol" rel="noopener  ugc nofollow" target="_blank"><div class="ok ab fo"><div class="ol ab om cl cj on"><h2 class="bd jc gy z fp oo fr fs op fu fw ja bi translated">SSH协议</h2><div class="oq l"><h3 class="bd b gy z fp oo fr fs op fu fw dk translated">这个页面是关于SSH协议的。背后的公司，看SSH通信安全。对于使用Linux…</h3></div><div class="or l"><p class="bd b dl z fp oo fr fs op fu fw dk translated">www.ssh.com</p></div></div></div></a></div><div class="ip iq gp gr ir oj"><a href="https://www.hostinger.com/tutorials/ssh-tutorial-how-does-ssh-work" rel="noopener  ugc nofollow" target="_blank"><div class="ok ab fo"><div class="ol ab om cl cj on"><h2 class="bd jc gy z fp oo fr fs op fu fw ja bi translated">SSH初学者教程——SSH是如何工作的</h2><div class="oq l"><h3 class="bd b gy z fp oo fr fs op fu fw dk translated">SSH或Secure Shell是一种远程管理协议，允许用户控制和修改他们的远程服务器…</h3></div><div class="or l"><p class="bd b dl z fp oo fr fs op fu fw dk translated">www.hostinger.com</p></div></div><div class="os l"><div class="ot l ou ov ow os ox ix oj"/></div></div></a></div><figure class="lo lp lq lr gt is"><div class="bz fp l di"><div class="oy oz l"/></div></figure><figure class="lo lp lq lr gt is"><div class="bz fp l di"><div class="oy oz l"/></div></figure><figure class="lo lp lq lr gt is"><div class="bz fp l di"><div class="oy oz l"/></div></figure><figure class="lo lp lq lr gt is"><div class="bz fp l di"><div class="oy oz l"/></div></figure></div></div>    
</body>
</html>