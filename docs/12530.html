<html>
<head>
<title>How to use SED to manipulate text files (Part 2: pattern, regular expression)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用SED操作文本文件(第2部分:模式、正则表达式)</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-use-sed-to-manipulate-text-files-part-2-pattern-regular-expression-77d2472a2043?source=collection_archive---------3-----------------------#2022-06-17">https://levelup.gitconnected.com/how-to-use-sed-to-manipulate-text-files-part-2-pattern-regular-expression-77d2472a2043?source=collection_archive---------3-----------------------#2022-06-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/></div><div class="ab cl jn jo hu jp" role="separator"><span class="jq bw bk jr js jt"/><span class="jq bw bk jr js jt"/><span class="jq bw bk jr js"/></div><div class="ij ik il im in"><p id="f78a" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">这是我的SED备忘单的第2部分(希望是最后一部分),在这里，我将解释SED中的模式匹配和正则表达式。所以让我们直入主题吧。</p><p id="0ee1" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">让我们考虑一下我们在第1部分中使用的同一个文件。此处给出了第1部分的链接<a class="ae ks" href="https://afnanmostafa.medium.com/how-to-use-sed-to-manipulate-text-files-part-1-print-delete-append-aa444143c4bd" rel="noopener">。</a></p><h1 id="e2d3" class="kt ku iq bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">图案:</h1><p id="c45e" class="pw-post-body-paragraph ju jv iq jw b jx lr jz ka kb ls kd ke kf lt kh ki kj lu kl km kn lv kp kq kr ij bi translated"><strong class="jw ir">区分大小写:</strong></p><blockquote class="lw lx ly"><p id="0a39" class="ju jv lz jw b jx jy jz ka kb kc kd ke ma kg kh ki mb kk kl km mc ko kp kq kr ij bi translated">sed -n '/lammps/p' foo.data</p></blockquote><ul class=""><li id="5410" class="md me iq jw b jx jy kb kc kf mf kj mg kn mh kr mi mj mk ml bi translated"><strong class="jw ir"> /lammps/ </strong> =包含图案/单词lammps的线条</li><li id="ca40" class="md me iq jw b jx mm kb mn kf mo kj mp kn mq kr mi mj mk ml bi translated"><strong class="jw ir"> p </strong> =打印匹配图案的线条</li></ul><figure class="ms mt mu mv gt mw gh gi paragraph-image"><div class="gh gi mr"><img src="../Images/75dc11f33469e41151a20cb493c9262f.png" data-original-src="https://miro.medium.com/v2/resize:fit:980/format:webp/1*Vfi8iAumaEc6PZydJviEBQ.jpeg"/></div></figure><p id="2bc5" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">不区分大小写:<br/> </strong>如果我们要做一个不区分大小写的搜索呢？</p><blockquote class="lw lx ly"><p id="6b24" class="ju jv lz jw b jx jy jz ka kb kc kd ke ma kg kh ki mb kk kl km mc ko kp kq kr ij bi translated">sed -n '/lammps/Ip' foo.data</p></blockquote><ul class=""><li id="2c6a" class="md me iq jw b jx jy kb kc kf mf kj mg kn mh kr mi mj mk ml bi translated"><strong class="jw ir"> I = </strong>不区分大小写的搜索</li></ul><figure class="ms mt mu mv gt mw gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/34dcf763ae8bcfd4ef0f47fbd5560570.png" data-original-src="https://miro.medium.com/v2/resize:fit:986/format:webp/1*R5TV9r-txJvfjGNVuFXFHw.jpeg"/></div></figure><blockquote class="lw lx ly"><p id="7d37" class="ju jv lz jw b jx jy jz ka kb kc kd ke ma kg kh ki mb kk kl km mc ko kp kq kr ij bi translated">sed '/lammps/d' foo.data</p></blockquote><ul class=""><li id="434b" class="md me iq jw b jx jy kb kc kf mf kj mg kn mh kr mi mj mk ml bi translated">删除包含lammps的行</li></ul><p id="6858" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我们可以看到包含lammps的行被删除了。</p><figure class="ms mt mu mv gt mw gh gi paragraph-image"><div class="gh gi na"><img src="../Images/d4f8765254472639bb46fe32548ce034.png" data-original-src="https://miro.medium.com/v2/resize:fit:1040/format:webp/1*1Y22nP8R7QRLdBe6v17SUA.jpeg"/></div></figure><blockquote class="lw lx ly"><p id="8651" class="ju jv lz jw b jx jy jz ka kb kc kd ke ma kg kh ki mb kk kl km mc ko kp kq kr ij bi translated">sed -n '/lammps/d' foo.data</p></blockquote><ul class=""><li id="ba29" class="md me iq jw b jx jy kb kc kf mf kj mg kn mh kr mi mj mk ml bi translated">这不会打印文件内容。此外，要从主文件中删除这一行，我们需要使用-i</li></ul><blockquote class="lw lx ly"><p id="07fd" class="ju jv lz jw b jx jy jz ka kb kc kd ke ma kg kh ki mb kk kl km mc ko kp kq kr ij bi translated">sed -i '/lammps/d' foo.data</p></blockquote><h2 id="f3e4" class="nb ku iq bd kv nc nd dn kz ne nf dp ld kf ng nh lh kj ni nj ll kn nk nl lp nm bi translated">两个图案之间的线条:</h2><p id="0aef" class="pw-post-body-paragraph ju jv iq jw b jx lr jz ka kb ls kd ke kf lt kh ki kj lu kl km kn lv kp kq kr ij bi translated">此外，我们可以得到两种模式之间的一系列线条:</p><blockquote class="lw lx ly"><p id="578d" class="ju jv lz jw b jx jy jz ka kb kc kd ke ma kg kh ki mb kk kl km mc ko kp kq kr ij bi translated">sed -n '/software/，/computers/p' foo.data</p></blockquote><figure class="ms mt mu mv gt mw gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/4e65c08d0028d9807104aa10bed5cc4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1044/format:webp/1*1ynH3im5oXorOlo2yyELMQ.jpeg"/></div></figure><p id="cd63" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">该命令打印出两个图案之间的线条(从带有“软件”的线条开始，到带有“计算机”的线条结束)。</p><h2 id="ec52" class="nb ku iq bd kv nc nd dn kz ne nf dp ld kf ng nh lh kj ni nj ll kn nk nl lp nm bi translated">忽略两个图案之间的线条:</h2><blockquote class="lw lx ly"><p id="6645" class="ju jv lz jw b jx jy jz ka kb kc kd ke ma kg kh ki mb kk kl km mc ko kp kq kr ij bi translated">sed -n '/software/，/computers/ <strong class="jw ir">！</strong> p' foo.data</p></blockquote><ul class=""><li id="28a2" class="md me iq jw b jx jy kb kc kf mf kj mg kn mh kr mi mj mk ml bi translated">它将打印出不在这两种模式之间的行(“软件”和“计算机”)。</li></ul><figure class="ms mt mu mv gt mw gh gi paragraph-image"><div class="gh gi no"><img src="../Images/fad3ccd1c90729d40952f0732ee98d62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1074/format:webp/1*HakdxDSLllRiRamasD_uEA.jpeg"/></div></figure><blockquote class="lw lx ly"><p id="50e1" class="ju jv lz jw b jx jy jz ka kb kc kd ke ma kg kh ki mb kk kl km mc ko kp kq kr ij bi translated">sed '$ <strong class="jw ir">！</strong> d' foo.data</p></blockquote><ul class=""><li id="a365" class="md me iq jw b jx jy kb kc kf mf kj mg kn mh kr mi mj mk ml bi translated">这将删除除最后一行之外的所有行。这种编辑只是终端才有的，要对原始文本文件进行修改，我们需要使用:<br/> <strong class="jw ir"> <em class="lz"> sed -i '$！d ' foo . data</em>T23】</strong></li></ul><blockquote class="lw lx ly"><p id="7ad5" class="ju jv lz jw b jx jy jz ka kb kc kd ke ma kg kh ki mb kk kl km mc ko kp kq kr ij bi translated">sed -n '$ <strong class="jw ir">！</strong> p' foo.data</p></blockquote><ul class=""><li id="c4a1" class="md me iq jw b jx jy kb kc kf mf kj mg kn mh kr mi mj mk ml bi translated">这将打印除最后一行之外的所有行。</li></ul><h1 id="88fe" class="kt ku iq bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">替换:</h1><blockquote class="lw lx ly"><p id="e829" class="ju jv lz jw b jx jy jz ka kb kc kd ke ma kg kh ki mb kk kl km mc ko kp kq kr ij bi translated">sed 's/lammps/VMD/Ig' foo.data</p></blockquote><ul class=""><li id="45fe" class="md me iq jw b jx jy kb kc kf mf kj mg kn mh kr mi mj mk ml bi translated">这段代码将使用不区分大小写的全局搜索用VMD替换lammps:<br/>s = substitute<br/>Ig = case-<strong class="jw ir">不区分大小写</strong>和<strong class="jw ir">全局</strong>搜索</li><li id="6ed2" class="md me iq jw b jx mm kb mn kf mo kj mp kn mq kr mi mj mk ml bi translated">g代表全局；这意味着每行中的所有实例。<br/>如果使用了<strong class="jw ir"><em class="lz">sed ' s/lammps/VMD/I2 ' foo . data</em></strong>，那么只有每行中的第二个' lammps '会被替换。自己试试吧，超级简单。</li><li id="85c6" class="md me iq jw b jx mm kb mn kf mo kj mp kn mq kr mi mj mk ml bi translated"><strong class="jw ir"><em class="lz">sed ' 3s/lammps/VMD/Ig ' foo . data</em></strong>将只替换第三行的内容。</li><li id="3dc4" class="md me iq jw b jx mm kb mn kf mo kj mp kn mq kr mi mj mk ml bi translated"><strong class="jw ir"> <em class="lz"> sed '3，$ s/lammps/VMD/Ig ' foo . data</em></strong>将从第3行开始替换到最后一行。</li></ul><h2 id="1509" class="nb ku iq bd kv nc nd dn kz ne nf dp ld kf ng nh lh kj ni nj ll kn nk nl lp nm bi translated">使用变量:</h2><blockquote class="lw lx ly"><p id="83cc" class="ju jv lz jw b jx jy jz ka kb kc kd ke ma kg kh ki mb kk kl km mc ko kp kq kr ij bi translated">variable = " lammps "<br/>sed " s/$ variable/VMD/Ig " foo . data</p></blockquote><p id="20c8" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">或者使用管道工具，</p><blockquote class="lw lx ly"><p id="bd8c" class="ju jv lz jw b jx jy jz ka kb kc kd ke ma kg kh ki mb kk kl km mc ko kp kq kr ij bi translated">$ variable = " lammps "<strong class="jw ir">|</strong>sed " s/$ variable/VMD/Ig " foo . data</p></blockquote><p id="5b96" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">对于变量，我们需要使用双引号" "而不是单引号" "，因为POSIX shells不能很好地读取单引号中的变量。</p><figure class="ms mt mu mv gt mw gh gi paragraph-image"><div class="gh gi np"><img src="../Images/4769cebd57b3a2b3ef8159229b00ec1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1026/format:webp/1*JAPs0kdWpknsMTnJFsYIWQ.jpeg"/></div></figure><h1 id="6558" class="kt ku iq bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">其他:</h1><blockquote class="lw lx ly"><p id="685d" class="ju jv lz jw b jx jy jz ka kb kc kd ke ma kg kh ki mb kk kl km mc ko kp kq kr ij bi translated">sed -n 's/[aeiou]/\$/gp' foo.data</p></blockquote><ul class=""><li id="cf8c" class="md me iq jw b jx jy kb kc kf mf kj mg kn mh kr mi mj mk ml bi translated">这将用$替换所有元音。$表示最后一行，但是我们必须用\对它进行转义，以确保我们希望SED不把它看作最后一行，而是一个符号。</li></ul><blockquote class="lw lx ly"><p id="f0ee" class="ju jv lz jw b jx jy jz ka kb kc kd ke ma kg kh ki mb kk kl km mc ko kp kq kr ij bi translated">sed 's/[^aeiou]/*/g'美食数据</p></blockquote><ul class=""><li id="64e9" class="md me iq jw b jx jy kb kc kf mf kj mg kn mh kr mi mj mk ml bi translated">这将用星号*替换所有辅音(非元音= [^aeiou])</li></ul><p id="9aea" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在第3部分中，我将展示如何使用sed和awk来操作LAMMPS的日志文件。这就是现在的全部内容，我希望你能愉快地阅读这篇文章。谢谢大家！！</p></div></div>    
</body>
</html>