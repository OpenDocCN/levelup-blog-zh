<html>
<head>
<title>How to Build RESTFul APIs with NodeJS and Express</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用NodeJS和Express构建RESTFul APIs</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-build-restful-api-with-nodejs-and-express-475bfb6bedff?source=collection_archive---------17-----------------------#2021-10-26">https://levelup.gitconnected.com/how-to-build-restful-api-with-nodejs-and-express-475bfb6bedff?source=collection_archive---------17-----------------------#2021-10-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="5659" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">学习如何用Node和<strong class="ak"> Express </strong>构建一个<strong class="ak"> REST API </strong></h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/40a177bffdd393c65091038dcb62a375.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t-wsX5fqusVvbzCsYMehrw.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">图片由Expressjs.com拍摄</figcaption></figure><p id="f1cc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">REST(表述性状态转移)是一种软件架构风格，被创建来指导万维网架构的设计和开发。REST为互联网规模的分布式超媒体系统(如Web)的架构应该如何表现定义了一组约束。</p><p id="694a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">简单来说，REST允许两个计算机系统通过HTTP web协议进行通信。REST非常方便，尤其是当我们想要构建RESTFul的API时。</p><h2 id="93a0" class="lu lv it bd lw lx ly dn lz ma mb dp mc lh md me mf ll mg mh mi lp mj mk ml mm bi translated"><strong class="ak">入门</strong></h2><p id="ab04" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">要启动并运行，您需要在开发环境中安装NodeJS。Nodejs将使我们能够在服务器上编写和执行JavaScript代码。</p><p id="a031" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">对于本文，我们将使用一个称为Expressjs的Nodejs框架。Express是一个简单的、极简的框架，但在用Nodejs构建应用程序时功能强大。</p><h2 id="b07c" class="lu lv it bd lw lx ly dn lz ma mb dp mc lh md me mf ll mg mh mi lp mj mk ml mm bi translated"><strong class="ak">初始化项目</strong></h2><p id="7731" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">首先，我们需要初始化一个新项目，我们的开发环境将在这里运行。导航到您想要作为您的开发服务器的目录，并运行下面的命令。</p><p id="85dd" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu"> NPM </strong></p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="a6e6" class="lu lv it mt b gy mx my l mz na">npm init</span></pre><p id="1ac9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">根据您的工作环境和偏好，系统会提示您输入一些信息。</p><p id="fee4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果您想跳过初始化过程，您可以提供如下所示的<code class="fe nb nc nd mt b">-y</code>标志。</p><p id="a81a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">NPM</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="66d6" class="lu lv it mt b gy mx my l mz na">npm init -y</span></pre><h2 id="effb" class="lu lv it bd lw lx ly dn lz ma mb dp mc lh md me mf ll mg mh mi lp mj mk ml mm bi translated"><strong class="ak">安装Expressjs </strong></h2><p id="2ad0" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">现在我们有了我们的应用程序框架，我们需要安装和配置express。根据您首选的软件包管理器，您可以使用以下命令安装Express。</p><p id="51ee" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu"> NPM </strong></p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="2f8e" class="lu lv it mt b gy mx my l mz na">npm i express</span></pre><p id="487b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu">纱线</strong></p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="f744" class="lu lv it mt b gy mx my l mz na">yarn add express</span></pre><p id="78ec" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">上面的命令将在我们的开发环境中安装express。</p><h2 id="2aad" class="lu lv it bd lw lx ly dn lz ma mb dp mc lh md me mf ll mg mh mi lp mj mk ml mm bi translated"><strong class="ak">配置Expressjs </strong></h2><p id="2db7" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">现在我们已经在开发系统中安装了expressjs，现在我们想要配置它来开始开发我们的RESTFul API。</p><p id="43df" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在你的根目录下，创建一个文件夹，命名为<strong class="la iu"> <em class="ne"> src </em> </strong>。在<strong class="la iu"> <em class="ne"> src </em> </strong>文件夹内，创建一个文件，命名为index.js，这将是我们应用实例的入口点。</p><p id="f24b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在<strong class="la iu"> <em class="ne"> index.js </em> </strong>文件内部，包含以下代码。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="2957" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">代码上的注释解释了正在发生的事情。</p><p id="498f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在，要运行您的应用程序，您需要打开您的开发终端并运行命令。</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="f7fe" class="lu lv it mt b gy mx my l mz na">node src/index.js</span></pre><p id="f5dc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在，在您的浏览器上导航到<strong class="la iu"><em class="ne">http://localhost:3000/</em></strong>，您将看到我们的应用程序显示。</p><p id="503f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们将在根目录中包含入口点文件index.js，但是为了对我们的逻辑和关注点进行分组，我们将它放在了<strong class="la iu"> <em class="ne"> src </em> </strong>文件夹中。</p><h2 id="326d" class="lu lv it bd lw lx ly dn lz ma mb dp mc lh md me mf ll mg mh mi lp mj mk ml mm bi translated"><strong class="ak">发送JSON响应</strong></h2><p id="3af5" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">到目前为止，我们已经看到了如何向客户机发送普通的字符串信息。当我们想发送一个JSON类型的响应给客户端时呢？</p><p id="ae5b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这也很方便，尤其是当我们希望用户获取信息并将其显示在各种应用程序实例上时。如果您曾经在构建应用程序时使用过API，那么这对您来说可能非常简单。</p><p id="658e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Express使我们能够通过JSON (data)方法发送JSON数据。它接受数组或对象形式的数据，并将其转换成JSON数据。</p><p id="3362" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu">简单的例子</strong></p><p id="ede9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">假设我们有一些与各个国家相关的数据，我们想将这些数据以JSON格式发送给客户机。</p><p id="07b9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们可以利用这一点，如下面的代码片段所示。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="e1db" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在，当我们的客户机对home端点执行get请求时，他将获得我们提供的数据的JSON信息。您可以通过重启您的开发服务器并检查您的<a class="ae nh" href="http://localhost:3000/" rel="noopener ugc nofollow" target="_blank"> http://localhost:3000/ </a>来测试这一点。</p><h2 id="5545" class="lu lv it bd lw lx ly dn lz ma mb dp mc lh md me mf ll mg mh mi lp mj mk ml mm bi translated"><strong class="ak">配置CORS(跨源资源共享)</strong></h2><p id="8b8d" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">现在我们的应用程序已经启动并运行，客户端可以执行get请求并获得数据的JSON响应。需要注意的是，不是每个人都能访问JSON响应信息。我们的服务器可能会阻止一些人获取信息。</p><p id="29f9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">为了管理它并允许任何系统上的每个人访问信息，我们需要设置CORS来允许来自任何域或服务器的请求。</p><p id="6c6a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们将利用一个叫做CORS的方案。</p><p id="97a9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在您的开发终端上，运行以下命令来安装cors。</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="ff18" class="lu lv it mt b gy mx my l mz na">npm i cors</span></pre><h2 id="1780" class="lu lv it bd lw lx ly dn lz ma mb dp mc lh md me mf ll mg mh mi lp mj mk ml mm bi translated"><strong class="ak">配置CORS </strong></h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="1de9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在，我们的请求可以不受限制地提供给任何域或服务器上的任何人。</p><h2 id="d1bc" class="lu lv it bd lw lx ly dn lz ma mb dp mc lh md me mf ll mg mh mi lp mj mk ml mm bi translated"><strong class="ak">结论</strong></h2><p id="521c" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">Express为构建应用程序提供了一个简单的设置。它的另一面也很强大，有一个很棒的社区随时准备加入并帮助我们。</p><p id="f490" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">感谢您花时间通读这篇文章。</p><h2 id="9565" class="lu lv it bd lw lx ly dn lz ma mb dp mc lh md me mf ll mg mh mi lp mj mk ml mm bi translated"><strong class="ak">更多阅读量</strong></h2><div class="ni nj gp gr nk nl"><a rel="noopener  ugc nofollow" target="_blank" href="/how-to-add-dark-mode-to-your-nuxtjs-project-d8f016c2211f"><div class="nm ab fo"><div class="nn ab no cl cj np"><h2 class="bd iu gy z fp nq fr fs nr fu fw is bi translated">如何在你的NuxtJS项目中加入黑暗模式</h2><div class="ns l"><h3 class="bd b gy z fp nq fr fs nr fu fw dk translated">如何用@nuxtjs/color-mode和tailwindCSS给一个Nuxt.js网站添加黑暗模式</h3></div><div class="nt l"><p class="bd b dl z fp nq fr fs nr fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="nu l"><div class="nv l nw nx ny nu nz ks nl"/></div></div></a></div><div class="ni nj gp gr nk nl"><a rel="noopener  ugc nofollow" target="_blank" href="/my-struggles-as-a-programmer-7bf1e1bf344d"><div class="nm ab fo"><div class="nn ab no cl cj np"><h2 class="bd iu gy z fp nq fr fs nr fu fw is bi translated">我作为程序员的挣扎。</h2><div class="ns l"><h3 class="bd b gy z fp nq fr fs nr fu fw dk translated">一个程序员的日常生活奋斗。</h3></div><div class="nt l"><p class="bd b dl z fp nq fr fs nr fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="nu l"><div class="oa l nw nx ny nu nz ks nl"/></div></div></a></div></div></div>    
</body>
</html>