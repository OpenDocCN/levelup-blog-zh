<html>
<head>
<title>Calculator-Python with GUI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">带有GUI的Python计算器</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/calculator-python-with-gui-f26fca223c6e?source=collection_archive---------11-----------------------#2020-12-02">https://levelup.gitconnected.com/calculator-python-with-gui-f26fca223c6e?source=collection_archive---------11-----------------------#2020-12-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/262333ad4234d9fd6f9f319b313ec8a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*BdXkBo-VrSuZp6sO.jpg"/></div></div></figure><p id="635a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">不要被代码吓倒，大部分代码都是我在使用终端将我的UI文件从QtDesigner转换成python代码时生成的(并滚动查看描述)。</p><pre class="kw kx ky kz gt la lb lc ld aw le bi"><span id="2983" class="lf lg iq lb b gy lh li l lj lk">valids = {'x': '[\'x\', \'+\', \'÷\', \'^\']', '+': '[\'x\', \'+\', \'÷\', \'^\']',<br/>          '/': '[\'x\', \'+\', \'÷\', \'^\']',<br/>          '^': '[\'x\', \'+\', \'÷\', \'^\']', '-': '[\'x\',\'÷\', \'^\']',<br/>          '(': '[\'x\', \'+\', \'÷\', \'^\',\'(\']'}</span><span id="fde5" class="lf lg iq lb b gy ll li l lj lk">from PyQt5 import QtCore, QtGui, QtWidgets<br/>from PyQt5.QtWidgets import QMainWindow<br/><br/><br/>class Ui_MainWindow(QMainWindow):<br/>    def setupUi(self, MainWindow):<br/>        MainWindow.setObjectName("MainWindow")<br/>        MainWindow.resize(300, 450)<br/>        palette = QtGui.QPalette()<br/>        brush = QtGui.QBrush(QtGui.QColor(165, 163, 158))<br/>        brush.setStyle(QtCore.Qt.SolidPattern)<br/><br/>        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.WindowText, brush)<br/>        brush = QtGui.QBrush(QtGui.QColor(255, 255, 255))<br/>        brush.setStyle(QtCore.Qt.SolidPattern)<br/><br/>        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.Base, brush)<br/>        brush = QtGui.QBrush(QtGui.QColor(146, 146, 152))<br/>        brush.setStyle(QtCore.Qt.SolidPattern)<br/><br/>        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.Window, brush)<br/>        brush = QtGui.QBrush(QtGui.QColor(165, 163, 158))<br/>        brush.setStyle(QtCore.Qt.SolidPattern)<br/><br/>        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.WindowText, brush)<br/>        brush = QtGui.QBrush(QtGui.QColor(255, 255, 255))<br/>        brush.setStyle(QtCore.Qt.SolidPattern)<br/><br/>        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.Base, brush)<br/>        brush = QtGui.QBrush(QtGui.QColor(146, 146, 152))<br/>        brush.setStyle(QtCore.Qt.SolidPattern)<br/><br/>        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.Window, brush)<br/>        brush = QtGui.QBrush(QtGui.QColor(120, 120, 120))<br/>        brush.setStyle(QtCore.Qt.SolidPattern)<br/><br/>        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.WindowText, brush)<br/>        brush = QtGui.QBrush(QtGui.QColor(146, 146, 152))<br/>        brush.setStyle(QtCore.Qt.SolidPattern)<br/><br/>        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.Base, brush)<br/>        brush = QtGui.QBrush(QtGui.QColor(146, 146, 152))<br/>        brush.setStyle(QtCore.Qt.SolidPattern)<br/><br/>        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.Window, brush)<br/>        MainWindow.setPalette(palette)<br/>        MainWindow.setAutoFillBackground(False)<br/><br/>        self.centralwidget = QtWidgets.QWidget(MainWindow)<br/>        self.centralwidget.setObjectName("centralwidget")<br/>        self.CalcScreen = QtWidgets.QLabel(self.centralwidget)<br/>        self.CalcScreen.setGeometry(QtCore.QRect(10, 15, 280, 91))<br/>        palette = QtGui.QPalette()<br/>        brush = QtGui.QBrush(QtGui.QColor(0, 0, 0))<br/>        brush.setStyle(QtCore.Qt.SolidPattern)<br/>        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.WindowText, brush)<br/>        brush = QtGui.QBrush(QtGui.QColor(211, 211, 240))<br/>        brush.setStyle(QtCore.Qt.SolidPattern)<br/>        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.Button, brush)<br/>        brush = QtGui.QBrush(QtGui.QColor(255, 255, 255))<br/>        brush.setStyle(QtCore.Qt.SolidPattern)<br/>        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.Light, brush)<br/>        brush = QtGui.QBrush(QtGui.QColor(233, 233, 247))<br/>        brush.setStyle(QtCore.Qt.SolidPattern)<br/>        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.Midlight, brush)<br/>        brush = QtGui.QBrush(QtGui.QColor(105, 105, 120))<br/>        brush.setStyle(QtCore.Qt.SolidPattern)<br/>        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.Dark, brush)<br/>        brush = QtGui.QBrush(QtGui.QColor(141, 141, 160))<br/>        brush.setStyle(QtCore.Qt.SolidPattern)<br/>        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.Mid, brush)<br/>        brush = QtGui.QBrush(QtGui.QColor(0, 0, 0))<br/>        brush.setStyle(QtCore.Qt.SolidPattern)<br/>        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.Text, brush)<br/>        brush = QtGui.QBrush(QtGui.QColor(255, 255, 255))<br/>        brush.setStyle(QtCore.Qt.SolidPattern)<br/>        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.BrightText, brush)<br/>        brush = QtGui.QBrush(QtGui.QColor(0, 0, 0))<br/>        brush.setStyle(QtCore.Qt.SolidPattern)<br/>        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.ButtonText, brush)<br/>        brush = QtGui.QBrush(QtGui.QColor(255, 255, 255))<br/>        brush.setStyle(QtCore.Qt.SolidPattern)<br/>        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.Base, brush)<br/>        brush = QtGui.QBrush(QtGui.QColor(211, 211, 240))<br/>        brush.setStyle(QtCore.Qt.SolidPattern)<br/>        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.Window, brush)<br/>        brush = QtGui.QBrush(QtGui.QColor(0, 0, 0))<br/>        brush.setStyle(QtCore.Qt.SolidPattern)<br/>        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.Shadow, brush)<br/>        brush = QtGui.QBrush(QtGui.QColor(233, 233, 247))<br/>        brush.setStyle(QtCore.Qt.SolidPattern)<br/>        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.AlternateBase, brush)<br/>        brush = QtGui.QBrush(QtGui.QColor(255, 255, 220))<br/>        brush.setStyle(QtCore.Qt.SolidPattern)<br/>        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.ToolTipBase, brush)<br/>        brush = QtGui.QBrush(QtGui.QColor(0, 0, 0))<br/>        brush.setStyle(QtCore.Qt.SolidPattern)<br/>        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.ToolTipText, brush)<br/>        brush = QtGui.QBrush(QtGui.QColor(0, 0, 0))<br/>        brush.setStyle(QtCore.Qt.SolidPattern)<br/>        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.WindowText, brush)<br/>        brush = QtGui.QBrush(QtGui.QColor(211, 211, 240))<br/>        brush.setStyle(QtCore.Qt.SolidPattern)<br/>        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.Button, brush)<br/>        brush = QtGui.QBrush(QtGui.QColor(255, 255, 255))<br/>        brush.setStyle(QtCore.Qt.SolidPattern)<br/>        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.Light, brush)<br/>        brush = QtGui.QBrush(QtGui.QColor(233, 233, 247))<br/>        brush.setStyle(QtCore.Qt.SolidPattern)<br/>        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.Midlight, brush)<br/>        brush = QtGui.QBrush(QtGui.QColor(105, 105, 120))<br/>        brush.setStyle(QtCore.Qt.SolidPattern)<br/>        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.Dark, brush)<br/>        brush = QtGui.QBrush(QtGui.QColor(141, 141, 160))<br/>        brush.setStyle(QtCore.Qt.SolidPattern)<br/>        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.Mid, brush)<br/>        brush = QtGui.QBrush(QtGui.QColor(0, 0, 0))<br/>        brush.setStyle(QtCore.Qt.SolidPattern)<br/>        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.Text, brush)<br/>        brush = QtGui.QBrush(QtGui.QColor(255, 255, 255))<br/>        brush.setStyle(QtCore.Qt.SolidPattern)<br/>        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.BrightText, brush)<br/>        brush = QtGui.QBrush(QtGui.QColor(0, 0, 0))<br/>        brush.setStyle(QtCore.Qt.SolidPattern)<br/>        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.ButtonText, brush)<br/>        brush = QtGui.QBrush(QtGui.QColor(255, 255, 255))<br/>        brush.setStyle(QtCore.Qt.SolidPattern)<br/>        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.Base, brush)<br/>        brush = QtGui.QBrush(QtGui.QColor(211, 211, 240))<br/>        brush.setStyle(QtCore.Qt.SolidPattern)<br/>        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.Window, brush)<br/>        brush = QtGui.QBrush(QtGui.QColor(0, 0, 0))<br/>        brush.setStyle(QtCore.Qt.SolidPattern)<br/>        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.Shadow, brush)<br/>        brush = QtGui.QBrush(QtGui.QColor(233, 233, 247))<br/>        brush.setStyle(QtCore.Qt.SolidPattern)<br/>        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.AlternateBase, brush)<br/>        brush = QtGui.QBrush(QtGui.QColor(255, 255, 220))<br/>        brush.setStyle(QtCore.Qt.SolidPattern)<br/>        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.ToolTipBase, brush)<br/>        brush = QtGui.QBrush(QtGui.QColor(0, 0, 0))<br/>        brush.setStyle(QtCore.Qt.SolidPattern)<br/>        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.ToolTipText, brush)<br/>        brush = QtGui.QBrush(QtGui.QColor(105, 105, 120))<br/>        brush.setStyle(QtCore.Qt.SolidPattern)<br/>        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.WindowText, brush)<br/>        brush = QtGui.QBrush(QtGui.QColor(211, 211, 240))<br/>        brush.setStyle(QtCore.Qt.SolidPattern)<br/>        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.Button, brush)<br/>        brush = QtGui.QBrush(QtGui.QColor(255, 255, 255))<br/>        brush.setStyle(QtCore.Qt.SolidPattern)<br/>        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.Light, brush)<br/>        brush = QtGui.QBrush(QtGui.QColor(233, 233, 247))<br/>        brush.setStyle(QtCore.Qt.SolidPattern)<br/>        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.Midlight, brush)<br/>        brush = QtGui.QBrush(QtGui.QColor(105, 105, 120))<br/>        brush.setStyle(QtCore.Qt.SolidPattern)<br/>        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.Dark, brush)<br/>        brush = QtGui.QBrush(QtGui.QColor(141, 141, 160))<br/>        brush.setStyle(QtCore.Qt.SolidPattern)<br/>        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.Mid, brush)<br/>        brush = QtGui.QBrush(QtGui.QColor(105, 105, 120))<br/>        brush.setStyle(QtCore.Qt.SolidPattern)<br/>        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.Text, brush)<br/>        brush = QtGui.QBrush(QtGui.QColor(255, 255, 255))<br/>        brush.setStyle(QtCore.Qt.SolidPattern)<br/>        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.BrightText, brush)<br/>        brush = QtGui.QBrush(QtGui.QColor(105, 105, 120))<br/>        brush.setStyle(QtCore.Qt.SolidPattern)<br/>        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.ButtonText, brush)<br/>        brush = QtGui.QBrush(QtGui.QColor(211, 211, 240))<br/>        brush.setStyle(QtCore.Qt.SolidPattern)<br/>        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.Base, brush)<br/>        brush = QtGui.QBrush(QtGui.QColor(211, 211, 240))<br/>        brush.setStyle(QtCore.Qt.SolidPattern)<br/>        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.Window, brush)<br/>        brush = QtGui.QBrush(QtGui.QColor(0, 0, 0))<br/>        brush.setStyle(QtCore.Qt.SolidPattern)<br/>        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.Shadow, brush)<br/>        brush = QtGui.QBrush(QtGui.QColor(211, 211, 240))<br/>        brush.setStyle(QtCore.Qt.SolidPattern)<br/>        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.AlternateBase, brush)<br/>        brush = QtGui.QBrush(QtGui.QColor(255, 255, 220))<br/>        brush.setStyle(QtCore.Qt.SolidPattern)<br/>        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.ToolTipBase, brush)<br/>        brush = QtGui.QBrush(QtGui.QColor(0, 0, 0))<br/>        brush.setStyle(QtCore.Qt.SolidPattern)<br/>        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.ToolTipText, brush)<br/>        self.CalcScreen.setPalette(palette)<br/>        font = QtGui.QFont()<br/>        font.setPointSize(15)<br/>        font.setBold(False)<br/>        font.setItalic(False)<br/>        font.setWeight(50)<br/>        font.setStrikeOut(False)<br/>        font.setKerning(True)<br/>        self.CalcScreen.setFont(font)<br/>        self.CalcScreen.setAutoFillBackground(True)<br/>        self.CalcScreen.setFrameShape(QtWidgets.QFrame.WinPanel)<br/>        self.CalcScreen.setFrameShadow(QtWidgets.QFrame.Plain)<br/>        self.CalcScreen.setLineWidth(1)<br/>        self.CalcScreen.setMidLineWidth(0)<br/>        self.CalcScreen.setText("")<br/>        self.CalcScreen.setObjectName("CalcScreen")<br/><br/>        self.Calc1 = QtWidgets.QPushButton(self.centralwidget)<br/>        self.Calc1.setGeometry(QtCore.QRect(10, 120, 50, 40))<br/>        self.Calc1.setAutoRepeat(False)<br/>        self.Calc1.setObjectName("Calc1")<br/><br/>        self.Calc2 = QtWidgets.QPushButton(self.centralwidget)<br/>        self.Calc2.setGeometry(QtCore.QRect(70, 120, 50, 40))<br/>        self.Calc2.setAutoRepeat(False)<br/>        self.Calc2.setObjectName("Calc2")<br/><br/>        self.Calc3 = QtWidgets.QPushButton(self.centralwidget)<br/>        self.Calc3.setGeometry(QtCore.QRect(130, 120, 50, 40))<br/>        self.Calc3.setAutoRepeat(False)<br/>        self.Calc3.setObjectName("Calc3")<br/><br/>        self.Calc4 = QtWidgets.QPushButton(self.centralwidget)<br/>        self.Calc4.setGeometry(QtCore.QRect(10, 170, 50, 40))<br/>        self.Calc4.setAutoRepeat(False)<br/>        self.Calc4.setObjectName("Calc4")<br/><br/>        self.Calc5 = QtWidgets.QPushButton(self.centralwidget)<br/>        self.Calc5.setGeometry(QtCore.QRect(70, 170, 50, 40))<br/>        self.Calc5.setAutoRepeat(False)<br/>        self.Calc5.setObjectName("Calc5")<br/><br/>        self.Calc6 = QtWidgets.QPushButton(self.centralwidget)<br/>        self.Calc6.setGeometry(QtCore.QRect(130, 170, 50, 40))<br/>        self.Calc6.setAutoRepeat(False)<br/>        self.Calc6.setObjectName("Calc6")<br/><br/>        self.Calc7 = QtWidgets.QPushButton(self.centralwidget)<br/>        self.Calc7.setGeometry(QtCore.QRect(10, 220, 50, 40))<br/>        self.Calc7.setAutoRepeat(False)<br/>        self.Calc7.setObjectName("Calc7")<br/><br/>        self.Calc8 = QtWidgets.QPushButton(self.centralwidget)<br/>        self.Calc8.setGeometry(QtCore.QRect(70, 220, 50, 40))<br/>        self.Calc8.setAutoRepeat(False)<br/>        self.Calc8.setObjectName("Calc8")<br/><br/>        self.Calc9 = QtWidgets.QPushButton(self.centralwidget)<br/>        self.Calc9.setGeometry(QtCore.QRect(130, 220, 50, 40))<br/>        self.Calc9.setAutoRepeat(False)<br/>        self.Calc9.setObjectName("Calc9")<br/><br/>        self.Calc0 = QtWidgets.QPushButton(self.centralwidget)<br/>        self.Calc0.setGeometry(QtCore.QRect(70, 270, 50, 40))<br/>        self.Calc0.setAutoRepeat(False)<br/>        self.Calc0.setObjectName("Calc0")<br/><br/>        self.Enter = QtWidgets.QPushButton(self.centralwidget)<br/>        self.Enter.setGeometry(QtCore.QRect(240, 120, 50, 40))<br/>        self.Enter.setAutoRepeat(False)<br/>        self.Enter.setObjectName("Enter")<br/><br/>        self.WDivide = QtWidgets.QPushButton(self.centralwidget)<br/>        self.WDivide.setGeometry(QtCore.QRect(240, 160, 50, 40))<br/>        self.WDivide.setAutoRepeat(False)<br/>        self.WDivide.setObjectName("WDivide")<br/><br/>        self.WMinus = QtWidgets.QPushButton(self.centralwidget)<br/>        self.WMinus.setGeometry(QtCore.QRect(240, 200, 50, 40))<br/>        self.WMinus.setAutoRepeat(False)<br/>        self.WMinus.setObjectName("WMinus")<br/><br/>        self.WCBracket = QtWidgets.QPushButton(self.centralwidget)<br/>        self.WCBracket.setGeometry(QtCore.QRect(240, 240, 50, 40))<br/>        self.WCBracket.setAutoRepeat(False)<br/>        self.WCBracket.setObjectName("WCBracket")<br/><br/>        self.Backspace = QtWidgets.QPushButton(self.centralwidget)<br/>        self.Backspace.setGeometry(QtCore.QRect(190, 120, 50, 40))<br/>        font = QtGui.QFont()<br/>        font.setPointSize(6)<br/>        self.Backspace.setFont(font)<br/>        self.Backspace.setAutoRepeat(False)<br/>        self.Backspace.setObjectName("Backspace")<br/><br/>        self.WMultiply = QtWidgets.QPushButton(self.centralwidget)<br/>        self.WMultiply.setGeometry(QtCore.QRect(190, 160, 50, 40))<br/>        self.WMultiply.setAutoRepeat(False)<br/>        self.WMultiply.setObjectName("WMultiply")<br/><br/>        self.WPlus = QtWidgets.QPushButton(self.centralwidget)<br/>        self.WPlus.setGeometry(QtCore.QRect(190, 200, 50, 40))<br/>        self.WPlus.setAutoRepeat(False)<br/>        self.WPlus.setObjectName("WPlus")<br/><br/>        self.WOBracket = QtWidgets.QPushButton(self.centralwidget)<br/>        self.WOBracket.setGeometry(QtCore.QRect(190, 240, 50, 40))<br/>        self.WOBracket.setAutoRepeat(False)<br/>        self.WOBracket.setObjectName("WOBracket")<br/><br/>        self.CalcDecimal = QtWidgets.QPushButton(self.centralwidget)<br/>        self.CalcDecimal.setGeometry(QtCore.QRect(130, 270, 50, 40))<br/>        self.CalcDecimal.setAutoRepeat(False)<br/>        self.CalcDecimal.setObjectName("CalcDecimal")<br/><br/>        self.WExponent = QtWidgets.QPushButton(self.centralwidget)<br/>        self.WExponent.setGeometry(QtCore.QRect(210, 280, 50, 40))<br/>        self.WExponent.setAutoRepeat(False)<br/>        self.WExponent.setObjectName("WExponent")<br/><br/>        MainWindow.setCentralWidget(self.centralwidget)<br/>        self.statusbar = QtWidgets.QStatusBar(MainWindow)<br/>        self.statusbar.setObjectName("statusbar")<br/>        MainWindow.setStatusBar(self.statusbar)<br/><br/>        self.message = ''<br/><br/>        self.retranslateUi(MainWindow)<br/>        QtCore.QMetaObject.connectSlotsByName(MainWindow)<br/><br/>    def retranslateUi(self, MainWindow):<br/>        _translate = QtCore.QCoreApplication.translate<br/>        MainWindow.setWindowTitle(_translate("MainWindow", "Calculator"))<br/>        self.CalcScreen.setStatusTip(_translate("MainWindow", "Calculator Screen"))<br/>        self.CalcScreen.setWhatsThis(_translate("MainWindow", "Screen"))<br/><br/>        self.Calc1.setStatusTip(_translate("MainWindow", "Number 1"))<br/>        self.Calc1.setText(_translate("MainWindow", "1"))<br/>        self.Calc1.setShortcut(_translate("MainWindow", "1"))<br/>        self.Calc1.clicked.connect(self.clicked)<br/><br/><br/>        self.Calc2.setStatusTip(_translate("MainWindow", "Number 2"))<br/>        self.Calc2.setText(_translate("MainWindow", "2"))<br/>        self.Calc2.setShortcut(_translate("MainWindow", "2"))<br/>        self.Calc2.clicked.connect(self.clicked)<br/><br/><br/>        self.Calc3.setStatusTip(_translate("MainWindow", "Number 3"))<br/>        self.Calc3.setText(_translate("MainWindow", "3"))<br/>        self.Calc3.setShortcut(_translate("MainWindow", "3"))<br/>        self.Calc3.clicked.connect(self.clicked)<br/><br/><br/>        self.Calc4.setStatusTip(_translate("MainWindow", "Number 4"))<br/>        self.Calc4.setText(_translate("MainWindow", "4"))<br/>        self.Calc4.setShortcut(_translate("MainWindow", "4"))<br/>        self.Calc4.clicked.connect(self.clicked)<br/><br/><br/>        self.Calc5.setStatusTip(_translate("MainWindow", "Number 5"))<br/>        self.Calc5.setText(_translate("MainWindow", "5"))<br/>        self.Calc5.setShortcut(_translate("MainWindow", "5"))<br/>        self.Calc5.clicked.connect(self.clicked)<br/><br/><br/>        self.Calc6.setStatusTip(_translate("MainWindow", "Number 6"))<br/>        self.Calc6.setText(_translate("MainWindow", "6"))<br/>        self.Calc6.setShortcut(_translate("MainWindow", "6"))<br/>        self.Calc6.clicked.connect(self.clicked)<br/><br/><br/>        self.Calc7.setStatusTip(_translate("MainWindow", "Number 7"))<br/>        self.Calc7.setText(_translate("MainWindow", "7"))<br/>        self.Calc7.setShortcut(_translate("MainWindow", "7"))<br/>        self.Calc7.clicked.connect(self.clicked)<br/><br/><br/>        self.Calc8.setStatusTip(_translate("MainWindow", "Number 8"))<br/>        self.Calc8.setText(_translate("MainWindow", "8"))<br/>        self.Calc8.setShortcut(_translate("MainWindow", "8"))<br/>        self.Calc8.clicked.connect(self.clicked)<br/><br/><br/>        self.Calc9.setStatusTip(_translate("MainWindow", "Number 9"))<br/>        self.Calc9.setText(_translate("MainWindow", "9"))<br/>        self.Calc9.setShortcut(_translate("MainWindow", "9"))<br/>        self.Calc9.clicked.connect(self.clicked)<br/><br/><br/>        self.Calc0.setStatusTip(_translate("MainWindow", "Number 0"))<br/>        self.Calc0.setText(_translate("MainWindow", "0"))<br/>        self.Calc0.setShortcut(_translate("MainWindow", "0"))<br/>        self.Calc0.clicked.connect(self.clicked)<br/><br/><br/>        self.Enter.setStatusTip(_translate("MainWindow", "Enter"))<br/>        self.Enter.setText(_translate("MainWindow", "Enter"))<br/>        self.Enter.clicked.connect(self.Calculate)<br/><br/><br/>        self.Enter.setShortcut(_translate("MainWindow", "Return"))<br/><br/><br/>        self.WDivide.setStatusTip(_translate("MainWindow", "Divide"))<br/>        self.WDivide.setText(_translate("MainWindow", "÷"))<br/>        self.WDivide.clicked.connect(self.clicked)<br/><br/><br/>        self.WDivide.setShortcut(_translate("MainWindow", "/"))<br/>        self.WMinus.setStatusTip(_translate("MainWindow", "Minus"))<br/><br/><br/>        self.WMinus.setText(_translate("MainWindow", "-"))<br/>        self.WMinus.setShortcut(_translate("MainWindow", "-"))<br/>        self.WMinus.clicked.connect(self.clicked)<br/><br/><br/>        self.WCBracket.setStatusTip(_translate("MainWindow", "Closing Bracket"))<br/>        self.WCBracket.setText(_translate("MainWindow", ")"))<br/>        self.WCBracket.setShortcut(_translate("MainWindow", ")"))<br/>        self.WCBracket.clicked.connect(self.clicked)<br/><br/><br/>        self.Backspace.setStatusTip(_translate("MainWindow", "Backspace"))<br/>        self.Backspace.setText(_translate("MainWindow", "Backspace"))<br/>        self.Backspace.setShortcut(_translate("MainWindow", "Backspace"))<br/>        self.Backspace.clicked.connect(self.delete)<br/><br/><br/>        self.WMultiply.setStatusTip(_translate("MainWindow", "Multiply"))<br/>        self.WMultiply.setText(_translate("MainWindow", "x"))<br/>        self.WMultiply.setShortcut(_translate("MainWindow", "X"))<br/>        self.WMultiply.clicked.connect(self.clicked)<br/><br/><br/>        self.WPlus.setStatusTip(_translate("MainWindow", "Plus"))<br/>        self.WPlus.setText(_translate("MainWindow", "+"))<br/>        self.WPlus.setShortcut(_translate("MainWindow", "+"))<br/>        self.WPlus.clicked.connect(self.clicked)<br/><br/><br/>        self.WOBracket.setStatusTip(_translate("MainWindow", "Open Bracket"))<br/>        self.WOBracket.setText(_translate("MainWindow", "("))<br/>        self.WOBracket.setShortcut(_translate("MainWindow", "("))<br/>        self.WOBracket.clicked.connect(self.clicked)<br/><br/><br/>        self.CalcDecimal.setStatusTip(_translate("MainWindow", "Decimal"))<br/>        self.CalcDecimal.setText(_translate("MainWindow", "."))<br/>        self.CalcDecimal.setShortcut(_translate("MainWindow", "."))<br/>        self.CalcDecimal.clicked.connect(self.clicked)<br/><br/><br/>        self.WExponent.setStatusTip(_translate("MainWindow", "Exponent"))<br/>        self.WExponent.setText(_translate("MainWindow", "^"))<br/>        self.WExponent.setShortcut(_translate("MainWindow", "^"))<br/>        self.WExponent.clicked.connect(self.clicked)<br/><br/>    def clicked(self):<br/>        sender = self.sender()<br/>        self.message += sender.text()<br/>        self.CalcScreen.setText(self.message)<br/><br/>    def delete(self):<br/>        self.message=self.message[:-1]<br/>        self.CalcScreen.setText(self.message)<br/><br/>    def Calculate(self):<br/>        state = True<br/>        calculation = self.message<br/>        for i, v in enumerate(calculation):  # iterates through the calc string<br/>            if v in ['x', '+', '-', '÷', '^', '(']:  # doing a sign check<br/>                if i + 1 == len(calculation):   # validating that the sign use is legal<br/>                    state = False<br/>                if calculation[i + 1] in valids:<br/>                    state = False<br/>                if calculation[-1] in ['x', '+', '-', '÷', '^','(']:<br/>                        state = False<br/>                if calculation.count('(') != calculation.count(')'):<br/>                    state = False<br/><br/>        if state:<br/>            self.maths()<br/>        else:<br/>            self.CalcScreen.setText("Invalid Input")<br/>            self.message = ''<br/><br/><br/>    def maths(self):<br/>        calculation = '('+ str(self.message)+')'<br/>        for i in range(len(calculation)):<br/>            if (calculation[i]=='(' and calculation[i-1] not in ['x', '+', '-', '÷', '^', '(']) and (i != 0):<br/>                calculation = calculation[:i]+'x'+calculation[i:]<br/>                print(calculation)<br/>        calculation = calculation.replace('x', '*')<br/>        calculation = calculation.replace('÷', '/')<br/>        calculation = calculation.replace('^', '**')<br/><br/>        ans = eval(calculation)<br/>        print(ans)<br/>        self.CalcScreen.setText(str(ans))<br/><br/>        self.message = ''<br/><br/><br/>if __name__ == "__main__":<br/>    import sys<br/>    app = QtWidgets.QApplication(sys.argv)<br/>    MainWindow = QtWidgets.QMainWindow()<br/>    ui = Ui_MainWindow()<br/>    ui.setupUi(MainWindow)<br/>    MainWindow.show()<br/>    sys.exit(app.exec_())</span></pre><p id="3e1d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">一位用户的计算顾问建议我用GUI制作一个计算器，这是我的尝试。请注意，这段代码的大部分是由Qt Designer创建的(这是PyQt附带的一个UI设计应用程序，所以我不知道这些代码部分具体做什么)。</p><p id="9dd8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">设计这个计算器的主要挑战是将所有这些按钮连接到显示计算器显示的主标签上，实际上是求解答案，因为输入将是一个字符串。真正的方法是创建一个抽象语法树，这本身就意味着你需要进入递归；python有一个eval()函数，这意味着你可以运行一个计算，所以我利用了它。</p><p id="e02a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">由于代码相当广泛，我不会像往常一样一行一行地看，但我会谈谈代码的主要部分。</p><figure class="kw kx ky kz gt jr"><div class="bz fp l di"><div class="lm ln l"/></div></figure><p id="b92c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我跟随的PyQt教程是PyQt上的Tech by Time 5集播放列表。虽然它没有深入到发送者和如何做程序的计算器部分，但它解释了标签和按钮的许多基础知识，以及如何将它们连接到函数。</p><p id="34e7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">注意:如果你自己尝试这样做，PyQt还没有得到最好的调试，这意味着如果程序在你的PyQt窗口运行时由于错误而崩溃，你得到的唯一信息是“错误代码:……”，为了尝试定位你的错误，我建议在你的代码中偶尔放置打印语句，这样当它运行时，你可以检查终端以查看它在哪个打印语句处结束，这意味着错误必须在打印语句之间。</strong></p><pre class="kw kx ky kz gt la lb lc ld aw le bi"><span id="d2e0" class="lf lg iq lb b gy lh li l lj lk">valids = {'x': '[\'x\', \'+\', \'÷\', \'^\']', '+': '[\'x\', \'+\', \'÷\', \'^\']',<br/>          '/': '[\'x\', \'+\', \'÷\', \'^\']',<br/>          '^': '[\'x\', \'+\', \'÷\', \'^\']', '-': '[\'x\',\'÷\', \'^\']',<br/>          '(': '[\'x\', \'+\', \'÷\', \'^\',\'(\']'}</span></pre><p id="8ff6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这个valids字典非常重要，因为验证你的输入是这个程序的一个非常重要的部分，我已经设置了这个字典，所以每个值都不能跟在它的键后面。</p><p id="95af" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">接下来的300多行代码都是Qt Designer自动生成的代码。如果你下载了QtDesigner，它会让你画出你的标签和按钮，并设置它们的变量名，快捷方式，位置，它们实际上说什么等等。所以如果你运行我的代码，你看到的覆盖图是我在QtDesigner上创建的。</p><h1 id="7e46" class="lo lg iq bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">将用户界面转换为Python:</h1><p id="57c4" class="pw-post-body-paragraph jy jz iq ka b kb ml kd ke kf mm kh ki kj mn kl km kn mo kp kq kr mp kt ku kv ij bi translated">这实际上比你想象的要简单得多。转到UI文件的目录(所以无论您在文件中保存了它)，然后通过文件管理器加载命令提示符，以确保它在正确的目录中。然后，您将编写以下命令:</p><p id="7fe4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">py UIC 5-x(UI文件的名称)。ui-o(python文件的名称)。巴拉圭</p><p id="d9d9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">例如:</p><p id="85ab" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">&gt;&gt;$</strong>pyu ic5-x calcoverlay . ui-o calculator . py</p><p id="0e26" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在终端执行之后，您应该会在与转换后的代码所在的UI文件相同的目录中找到一个新的python文件。</p><figure class="kw kx ky kz gt jr"><div class="bz fp l di"><div class="lm ln l"/></div></figure><p id="0941" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">如果你想用Tim的视觉效果更好地解释，就去9:00</strong></p><h1 id="1004" class="lo lg iq bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">点击事件:</h1><pre class="kw kx ky kz gt la lb lc ld aw le bi"><span id="bd1a" class="lf lg iq lb b gy lh li l lj lk">def clicked(self):<br/>        sender = self.sender()<br/>        self.message += sender.text()<br/>        self.CalcScreen.setText(self.message)</span></pre><p id="56c5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这个函数允许我们对被点击的按钮做出反应。许多人可能会遇到一个问题，因为他们试图将一个参数传递给被单击的函数，然而，PyQt显然不喜欢这样。这个问题花了我一天时间才解决，直到我读到一页关于sender()方法的内容。问题是所有可点击的按钮必须使用相同的功能，所以代码必须有一种方法来区分哪个按钮被点击了，这就是解决方案。</p><p id="21b2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">self.sender()将返回被单击的按钮的文本值。这意味着我们可以将它添加到消息(计算器屏幕上的内容)中，然后使用setText函数显示它们。请注意，当使用setText时，您必须连接到string，而程序不会为您这样做，因此当稍后执行eval()时，您必须再次转换回string。</p><pre class="kw kx ky kz gt la lb lc ld aw le bi"><span id="c6af" class="lf lg iq lb b gy lh li l lj lk">self.WOBracket.clicked.connect(self.clicked)</span></pre><p id="0beb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">对于每个按钮，我们现在添加这段代码，它基本上是说当有一个点击事件时(当按钮被点击时)运行被点击的函数。我很确定你不会用括号()写self.clicked，因为编译器可能会把它误认为实际运行了函数，所以我们不使用括号。</p><pre class="kw kx ky kz gt la lb lc ld aw le bi"><span id="27ae" class="lf lg iq lb b gy lh li l lj lk">def delete(self):<br/>        self.message=self.message[:-1]<br/>        self.CalcScreen.setText(self.message)</span></pre><p id="38de" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">删除功能也有类似的目的，但现在我们需要它以防用户出错。这段代码非常简单明了，我们索引出消息的最后一个值，然后显示结果。</p><pre class="kw kx ky kz gt la lb lc ld aw le bi"><span id="961b" class="lf lg iq lb b gy lh li l lj lk">def Calculate(self):<br/>        state = True<br/>        calculation = self.message<br/>        for i, v in enumerate(calculation):  # iterates through the calc string<br/>            if v in ['x', '+', '-', '÷', '^', '(']:  # doing a sign check<br/>                if i + 1 == len(calculation):   # validating that the sign use is legal<br/>                    state = False<br/>                if calculation[i + 1] in valids:<br/>                    state = False<br/>                if calculation[-1] in ['x', '+', '-', '÷', '^','(']:<br/>                        state = False<br/>                if calculation.count('(') != calculation.count(')'):<br/>                    state = False<br/><br/>        if state:<br/>            self.maths()<br/>        else:<br/>            self.CalcScreen.setText("Invalid Input")<br/>            self.message = ''</span></pre><p id="618f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我为这种格式道歉，因为medium的线长与pythons不同，所以这些看起来很奇怪。这个calculate函数在用户单击enter时运行，这是代码的验证部分。这负责确保输入在数学术语上是“合法的”。我们首先将状态设置为True，这就是我如何跟踪数学是否有效。真=数学是正确的，假=有些东西行不通。我继续通过一组测试来运行它，你们可以看到，如果它们没有通过测试，它们的状态将被重置回false。在测试结束时，如果state仍然为真，我运行数学函数来进行实际计算。否则，我会显示无效的无效输入并清除消息，如果你愿意，你可以在这里输入时间，在“无效输入”处暂停程序一秒钟，然后将文本重置回消息，而不是重置它，但这只是偏好。</p><pre class="kw kx ky kz gt la lb lc ld aw le bi"><span id="4d4b" class="lf lg iq lb b gy lh li l lj lk">def maths(self):<br/>        calculation = '('+ str(self.message)+')'<br/>        for i in range(len(calculation)):<br/>            if (calculation[i]=='(' and calculation[i-1] not in ['x', '+', '-', '÷', '^', '(']) and (i != 0):<br/>                calculation = calculation[:i]+'x'+calculation[i:]<br/>                print(calculation)<br/>        calculation = calculation.replace('x', '*')<br/>        calculation = calculation.replace('÷', '/')<br/>        calculation = calculation.replace('^', '**')<br/><br/>        ans = eval(calculation)<br/>        print(ans)<br/>        self.CalcScreen.setText(str(ans))<br/><br/>        self.message = ''</span></pre><p id="7019" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">最后的计算得出了答案。首先，我意识到eval()对带括号的计算有奇怪的反应。如果你运行3(3+6 ),它会崩溃，因为它没有直观地意识到在(之前会有乘法，因此我们需要将它添加到计算本身。这就是我为函数的前4行所做的。之后，我需要将输入中所有用户友好的字符转换成计算机能够理解的字符。这意味着我们需要把“x”换成“*”，把“'^'”换成“**”，等等。</p><p id="5c86" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">完成后，我们可以评估答案，然后将计算显示设置为该答案，这样就完成了。</p><p id="a27a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">挑战:使用import math，在GUI上添加一个pi按钮，让用户在计算中使用pi。这应该遵循我在这里解释的完全相同的逻辑。</p></div></div>    
</body>
</html>