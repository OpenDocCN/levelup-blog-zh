<html>
<head>
<title>GitHub Discovered 7 Vulnerabilities in NodeJS — What Does This Mean For You?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">GitHub在NodeJS中发现了7个漏洞——这对你意味着什么？</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/7-nodejs-vulnerabilities-149094e441c2?source=collection_archive---------12-----------------------#2021-09-14">https://levelup.gitconnected.com/7-nodejs-vulnerabilities-149094e441c2?source=collection_archive---------12-----------------------#2021-09-14</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><h2 id="540d" class="is it iu bd b dl iv iw ix iy iz ja dk jb translated" aria-label="kicker paragraph"><a class="ae ep" href="https://rakiabensassi.medium.com/list/software-engineering-7a179a23ebfd" rel="noopener">网页开发</a></h2><div class=""/><div class=""><h2 id="7855" class="pw-subtitle-paragraph ka jd iu bd b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr dk translated">漏洞演练和给用户的建议</h2></div><figure class="kt ku kv kw gu kx gi gj paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gi gj ks"><img src="../Images/441ba7e1d6f76a1c8a6bbc86e3b7b20c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QYyOjfaq8cMTdSU8CfQ85Q.jpeg"/></div></div><figcaption class="le lf gk gi gj lg lh bd b be z dk translated">来自<a class="ae li" href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=2964100" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>的<a class="ae li" href="https://pixabay.com/users/methodshop-1460919/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=2964100" rel="noopener ugc nofollow" target="_blank">方法商店</a>的图像</figcaption></figure><p id="9ab2" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">一年前，从2018年开始已经属于微软的GitHub接管了JavaScript包管理器<code class="fe mf mg mh mi b">npm</code>。2021年9月8日，该公司已经承认在<code class="fe mf mg mh mi b"><a class="ae li" href="https://www.npmjs.com/package/tar" rel="noopener ugc nofollow" target="_blank">tar</a></code>和<code class="fe mf mg mh mi b"><a class="ae li" href="https://www.npmjs.com/package/@npmcli/arborist" rel="noopener ugc nofollow" target="_blank">@npmcli/arborist</a></code> Node.js包中存在7个漏洞。</p><p id="d329" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">今天，我们将探讨这些漏洞是什么，它们意味着什么，以及您应该如何避免受到影响和保护您的项目。但是在我们开始之前，让我们解决一下<code class="fe mf mg mh mi b"><a class="ae li" href="https://www.npmjs.com/package/tar" rel="noopener ugc nofollow" target="_blank">tar</a></code>和<code class="fe mf mg mh mi b"><a class="ae li" href="https://www.npmjs.com/package/@npmcli/arborist" rel="noopener ugc nofollow" target="_blank">@npmcli/arborist</a></code>包到底是什么。</p></div><div class="ab cl mj mk hy ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="in io ip iq ir"><h1 id="d22f" class="mq mr iu bd ms mt mu mv mw mx my mz na kj nb kk nc km nd kn ne kp nf kq ng nh bi translated">焦油是什么？</h1><p id="6ffb" class="pw-post-body-paragraph lj lk iu ll b lm ni ke lo lp nj kh lr ls nk lu lv lw nl ly lz ma nm mc md me in bi translated"><code class="fe mf mg mh mi b">tar</code>是一个API，用于在Unix系统上模拟<code class="fe mf mg mh mi b">tar(1)</code>的行为。</p><p id="d4ca" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">“tar文件”或“tarball”是文件系统条目的存档，如目录、文件和链接。这个名字来源于<strong class="ll je">磁带档案馆</strong>。如果您在Unix命令行上运行<code class="fe mf mg mh mi b">man tar</code>,您将获得如下所示的更多细节:</p><figure class="kt ku kv kw gu kx gi gj paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gi gj nn"><img src="../Images/e2a9ba2ce983bb00ca480a99775d9956.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sFxgfweJzKHTMaoKpQCLbg.png"/></div></div><figcaption class="le lf gk gi gj lg lh bd b be z dk translated">tar(1) manual:在Mac上运行“man tar”命令的输出(作者截图)</figcaption></figure><p id="12b7" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated"><code class="fe mf mg mh mi b">tar</code>有5个主要顶层命令:</p><ul class=""><li id="9d6c" class="no np iu ll b lm ln lp lq ls nq lw nr ma ns me nt nu nv nw bi translated"><code class="fe mf mg mh mi b">c</code>创建一个档案。</li><li id="5ec8" class="no np iu ll b lm nx lp ny ls nz lw oa ma ob me nt nu nv nw bi translated"><code class="fe mf mg mh mi b">r</code>替换一个档案内的条目。</li><li id="8b12" class="no np iu ll b lm nx lp ny ls nz lw oa ma ob me nt nu nv nw bi translated"><code class="fe mf mg mh mi b">u</code>更新档案中的条目。</li><li id="4445" class="no np iu ll b lm nx lp ny ls nz lw oa ma ob me nt nu nv nw bi translated"><code class="fe mf mg mh mi b">t</code>列出一个档案的内容。</li><li id="f065" class="no np iu ll b lm nx lp ny ls nz lw oa ma ob me nt nu nv nw bi translated"><code class="fe mf mg mh mi b">x</code>将一个归档文件解压到磁盘。</li></ul><p id="65a1" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">还有其他标志和选项可以改变这些顶级命令的工作方式。</p><p id="8619" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">开发人员每周下载<code class="fe mf mg mh mi b">tar</code>数千万次，因为它用于提取和安装npm包，并作为npm CLI之外的数千个其他项目的核心依赖。</p><h1 id="2f72" class="mq mr iu bd ms mt oc mv mw mx od mz na kj oe kk nc km of kn ne kp og kq ng nh bi translated">什么是树木学家？</h1><p id="552d" class="pw-post-body-paragraph lj lk iu ll b lm ni ke lo lp nj kh lr ls nk lu lv lw nl ly lz ma nm mc md me in bi translated"><code class="fe mf mg mh mi b">@npmcli/arborist</code>是npm CLI的核心依赖项，用于管理<code class="fe mf mg mh mi b">node_modules</code>树。</p><div class="kt ku kv kw gu ab cb"><figure class="oh kx oi oj ok ol om paragraph-image"><img src="../Images/a983e334729d49c64db16d0b1fa86b7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:930/format:webp/1*Ieu2lrGNPR8kinzh66pdnA.png"/></figure><figure class="oh kx on oj ok ol om paragraph-image"><img src="../Images/b0653d5eb81dc4a2945d3a18ad0c94b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:956/format:webp/1*MSWwVZJe0eRJ9viKtc5V6g.png"/><figcaption class="le lf gk gi gj lg lh bd b be z dk oo di op oq translated">@ NPM CLI/树师在左(<a class="ae li" href="https://github.com/npm/arborist" rel="noopener ugc nofollow" target="_blank">树师图片来源</a>，右图作者)</figcaption></figure></div><p id="306c" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated"><code class="fe mf mg mh mi b">node_modules</code>文件夹实际上是一个依赖图，而不是一个依赖树。因为您在项目中使用的包之间的关系实际上是一个具有循环和重叠连接的<em class="or">图</em>。</p><p id="0a3e" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">包管理器考虑依赖约束声明，找到解决约束的图，然后将该图具体化到磁盘上。磁盘上的模块看起来像一个离散的文件树，程序将在运行时加载这些文件，并根据它们创建一个图形。</p><p id="4589" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">Arborist的角色是构建满足依赖图的树。</p><blockquote class="os ot ou"><p id="9925" class="lj lk or ll b lm ln ke lo lp lq kh lr ov lt lu lv ow lx ly lz ox mb mc md me in bi translated">“树构建方法建立在npm v3引入前期重复数据删除时由丽贝卡·图尔纳开发的“最大化原始重复数据删除”方法的基础上，但增加了两个新功能。</p><p id="7733" class="lj lk or ll b lm ln ke lo lp lq kh lr ov lt lu lv ow lx ly lz ox mb mc md me in bi translated">简而言之，最大朴素重复数据删除从树中的给定节点(通常是根节点)开始，并创建当前缺失或无效的依赖关系队列。然后，对于每个节点，它从节点的<code class="fe mf mg mh mi b">node_modules</code>文件夹开始，沿着树向上走到根，找到不会引起任何冲突的最浅的放置位置。新放置的节点被添加到队列中，因此<em class="iu">可以放置它的</em>依赖项，并且该过程继续。”— <a class="ae li" href="https://blog.npmjs.org/post/618653678433435649/npm-v7-series-arborist-deep-dive.html" rel="noopener ugc nofollow" target="_blank">树木学家深潜</a></p></blockquote><figure class="kt ku kv kw gu kx gi gj paragraph-image"><div class="gi gj oy"><img src="../Images/b5187b39690f9622f98f5c3a67671cbe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1396/format:webp/1*uyGyQGOLC_Uhyw-GStCP7A.png"/></div><figcaption class="le lf gk gi gj lg lh bd b be z dk translated">npm依赖关系树示例(作者图片)</figcaption></figure></div><div class="ab cl mj mk hy ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="in io ip iq ir"><h1 id="ff30" class="mq mr iu bd ms mt mu mv mw mx my mz na kj nb kk nc km nd kn ne kp nf kq ng nh bi translated">有哪些漏洞，它们意味着什么？</h1><p id="f13a" class="pw-post-body-paragraph lj lk iu ll b lm ni ke lo lp nj kh lr ls nk lu lv lw nl ly lz ma nm mc md me in bi translated">GitHub已经确认了与<code class="fe mf mg mh mi b">tar</code>和<code class="fe mf mg mh mi b">@npmcli/arborist</code>相关的7个常见漏洞和暴露(CVE)，其中4个是针对npm CLI的:</p><ul class=""><li id="d5a9" class="no np iu ll b lm ln lp lq ls nq lw nr ma ns me nt nu nv nw bi translated"><a class="ae li" href="https://github.com/npm/node-tar/security/advisories/GHSA-r628-mhmh-qjhw" rel="noopener ugc nofollow" target="_blank">CVE-2021–32803</a></li><li id="e452" class="no np iu ll b lm nx lp ny ls nz lw oa ma ob me nt nu nv nw bi translated"><a class="ae li" href="https://github.com/npm/node-tar/security/advisories/GHSA-3jfq-g458-7qm9" rel="noopener ugc nofollow" target="_blank">CVE-2021–32804</a></li><li id="ba5e" class="no np iu ll b lm nx lp ny ls nz lw oa ma ob me nt nu nv nw bi translated">CVE-2021–37701</li><li id="dc46" class="no np iu ll b lm nx lp ny ls nz lw oa ma ob me nt nu nv nw bi translated"><a class="ae li" href="https://github.com/npm/node-tar/security/advisories/GHSA-qq89-hq3f-393p" rel="noopener ugc nofollow" target="_blank">CVE-2021–37712</a></li><li id="1153" class="no np iu ll b lm nx lp ny ls nz lw oa ma ob me nt nu nv nw bi translated"><a class="ae li" href="https://github.com/npm/node-tar/security/advisories/GHSA-5955-9wpr-37jh" rel="noopener ugc nofollow" target="_blank">CVE-2021–37713</a></li><li id="ebae" class="no np iu ll b lm nx lp ny ls nz lw oa ma ob me nt nu nv nw bi translated"><a class="ae li" href="https://github.com/npm/arborist/security/advisories/GHSA-2h3h-q99f-3fhc" rel="noopener ugc nofollow" target="_blank">CVE-2021–39134</a></li><li id="afef" class="no np iu ll b lm nx lp ny ls nz lw oa ma ob me nt nu nv nw bi translated"><a class="ae li" href="https://github.com/npm/arborist/security/advisories/GHSA-gmw6-94gg-2rc2" rel="noopener ugc nofollow" target="_blank">CVE-2021–39135</a></li></ul><p id="95cb" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">npm CLI应该确保在安装软件包时，软件包的内容只出现在<code class="fe mf mg mh mi b">node_modules</code>目录层次结构中的相应文件夹中。但是，一些安全漏洞可能会超过这个限制。</p><p id="3aa6" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">如果在某些文件系统条件下使用<code class="fe mf mg mh mi b">tar</code>提取不受信任的tar文件，使用npm CLI安装不受信任的npm软件包，这可能会导致文件被覆盖和意外/任意代码执行，即使您使用<code class="fe mf mg mh mi b">--ignore-scripts</code>标志来阻止软件包生命周期脚本的处理。</p><h1 id="f910" class="mq mr iu bd ms mt oc mv mw mx od mz na kj oe kk nc km of kn ne kp og kq ng nh bi translated">给用户的建议</h1><p id="5250" class="pw-post-body-paragraph lj lk iu ll b lm ni ke lo lp nj kh lr ls nk lu lv lw nl ly lz ma nm mc md me in bi translated">2021年7月29日，GitHub开始阻止发布带有符号链接、硬链接或绝对路径的npm包。</p><p id="c72c" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">它还推出了漏洞修复程序，并向可能受影响的用户发送了1670万条依赖机器人警报和180万条通知。</p><ul class=""><li id="4268" class="no np iu ll b lm ln lp lq ls nq lw nr ma ns me nt nu nv nw bi translated">GitHub建议将npm CLI升级到版本6.14.15、7.21.0或更高版本。</li><li id="7328" class="no np iu ll b lm nx lp ny ls nz lw oa ma ob me nt nu nv nw bi translated">如果使用<code class="fe mf mg mh mi b">tar</code>依赖，需要更新到4.4.19、5.0.11、6.1.10或更高版本。</li><li id="7729" class="no np iu ll b lm nx lp ny ls nz lw oa ma ob me nt nu nv nw bi translated">因为<code class="fe mf mg mh mi b">tar</code>的v3分支被弃用，你应该用v6。</li><li id="a8f1" class="no np iu ll b lm nx lp ny ls nz lw oa ma ob me nt nu nv nw bi translated">npm团队也用一条推文作出了回应，要求npm用户将Node.js更新到版本12、14或16，或将npm更新到版本6或7，并更新你可能对<code class="fe mf mg mh mi b">tar</code>的任何依赖。</li></ul><figure class="kt ku kv kw gu kx"><div class="bz fq l di"><div class="oz pa l"/></div></figure><p id="2bdf" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">你可以在GitHub博客上找到关于所有简历的更多细节。</p></div><div class="ab cl mj mk hy ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="in io ip iq ir"><p id="ffb4" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated">🧠💡我为一群聪明、好奇的人写关于工程、技术和领导力的文章。<a class="ae li" href="https://rakiabensassi.substack.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="ll je">加入我的免费电子邮件简讯，独家获取</strong> </a> <strong class="ll je"> </strong>或在此报名媒体<a class="ae li" href="https://rakiabensassi.medium.com/membership" rel="noopener"/>。</p><p id="c6c8" class="pw-post-body-paragraph lj lk iu ll b lm ln ke lo lp lq kh lr ls lt lu lv lw lx ly lz ma mb mc md me in bi translated"><em class="or">可以在Udemy上查看我的</em> <strong class="ll je"> <em class="or">视频课程</em></strong><em class="or">:</em><a class="ae li" href="https://www.udemy.com/course/identify-and-fix-javascript-memory-leaks/" rel="noopener ugc nofollow" target="_blank"><em class="or">如何识别、诊断、修复Web Apps中的内存泄漏</em> </a> <em class="or">。</em></p><div class="pb pc gq gs pd pe"><a rel="noopener  ugc nofollow" target="_blank" href="/features-in-the-new-typescript-release-e5ef6ebba750"><div class="pf ab fp"><div class="pg ab ph cl cj pi"><h2 class="bd je gz z fq pj fs ft pk fv fx jd bi translated">TypeScript 4.4中的新功能和突破性变化</h2><div class="pl l"><h3 class="bd b gz z fq pj fs ft pk fv fx dk translated">控制流分析、作为索引签名的符号、拼写建议等等</h3></div><div class="pm l"><p class="bd b dl z fq pj fs ft pk fv fx dk translated">levelup.gitconnected.com</p></div></div><div class="pn l"><div class="po l pp pq pr pn ps lc pe"/></div></div></a></div><div class="pb pc gq gs pd pe"><a href="https://betterprogramming.pub/programming-buzzwords-9e94a3544eed" rel="noopener  ugc nofollow" target="_blank"><div class="pf ab fp"><div class="pg ab ph cl cj pi"><h2 class="bd je gz z fq pj fs ft pk fv fx jd bi translated">作为网络开发人员，你的老板希望你知道的11个流行词汇</h2><div class="pl l"><h3 class="bd b gz z fq pj fs ft pk fv fx dk translated">获得关于工具箱中术语的更多见解</h3></div><div class="pm l"><p class="bd b dl z fq pj fs ft pk fv fx dk translated">better编程. pub</p></div></div><div class="pn l"><div class="pt l pp pq pr pn ps lc pe"/></div></div></a></div></div></div>    
</body>
</html>