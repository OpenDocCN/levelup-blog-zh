<html>
<head>
<title>The Simplest Way to Add Swagger to a Node.js Project</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">向Node.js项目添加Swagger的最简单方法</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/the-simplest-way-to-add-swagger-to-a-node-js-project-c2a4aa895a3c?source=collection_archive---------0-----------------------#2020-01-20">https://levelup.gitconnected.com/the-simplest-way-to-add-swagger-to-a-node-js-project-c2a4aa895a3c?source=collection_archive---------0-----------------------#2020-01-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="26e4" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">Nodejs</h2><div class=""/><div class=""><h2 id="dd16" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">为Node.js项目添加和编写可维护REST API文档的端到端指南。</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/0916d3feda3c476d4adfad4f558faba2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PuPjJu8o5LI-mj1KeykjWQ.jpeg"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">安妮·斯普拉特在<a class="ae lh" href="https://unsplash.com/s/photos/coffee?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="5f3e" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">本文是关于安装OpenAPI以及如何使用<a class="ae lh" href="https://expressjs.com/" rel="noopener ugc nofollow" target="_blank"> Express </a>和<a class="ae lh" href="https://www.typescriptlang.org/index.html" rel="noopener ugc nofollow" target="_blank"> Typescript </a>在<a class="ae lh" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank"> Node.js </a>项目中使用它的简单指南。</p><ol class=""><li id="a3df" class="me mf it lk b ll lm lo lp lr mg lv mh lz mi md mj mk ml mm bi translated">什么是Swagger和OpenAPI？</li><li id="92e7" class="me mf it lk b ll mn lo mo lr mp lv mq lz mr md mj mk ml mm bi translated">在现有项目中安装OpenAPI</li><li id="ab39" class="me mf it lk b ll mn lo mo lr mp lv mq lz mr md mj mk ml mm bi translated">编写优秀文档的简单指南</li></ol><p id="0d51" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><em class="ms">更多类似内容，请查看</em><a class="ae lh" href="https://betterfullstack.com" rel="noopener ugc nofollow" target="_blank"><em class="ms">https://betterfullstack.com</em></a></p></div><div class="ab cl mt mu hx mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="im in io ip iq"><h1 id="1750" class="na nb it bd nc nd ne nf ng nh ni nj nk ki nl kj nm kl nn km no ko np kp nq nr bi translated">什么是Swagger和OpenAPI？</h1><p id="6bb9" class="pw-post-body-paragraph li lj it lk b ll ns kd ln lo nt kg lq lr nu lt lu lv nv lx ly lz nw mb mc md im bi translated">什么是霸气？</p><blockquote class="nx ny nz"><p id="3d0b" class="li lj ms lk b ll lm kd ln lo lp kg lq oa ls lt lu ob lw lx ly oc ma mb mc md im bi translated"><strong class="lk jd"> Swagger </strong>是一套围绕<strong class="lk jd"> OpenAPI规范</strong>构建的开源工具，可以帮助你设计、构建、文档化和消费REST APIs。</p></blockquote><p id="6f0c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">什么是OpenAPI？</p><blockquote class="nx ny nz"><p id="468a" class="li lj ms lk b ll lm kd ln lo lp kg lq oa ls lt lu ob lw lx ly oc ma mb mc md im bi translated"><strong class="lk jd"> OpenAPI规范</strong>(原Swagger规范)是REST APIs的API描述格式。</p></blockquote><p id="8647" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">根据上面的定义，你可以看到Swagger和OpenAPI之间的不同点。</p><p id="cf7f" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在OpenAPI之前，我们使用swagger作为API描述格式。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi od"><img src="../Images/521eb6148347f89f1fd60ad3a5016b91.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WL-4WQTc1DRNdrdgXMT4Ow.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated"><a class="ae lh" href="https://petstore.swagger.io/v2/swagger.json" rel="noopener ugc nofollow" target="_blank">https://petstore.swagger.io/v2/swagger.json</a></figcaption></figure><p id="e0af" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">然而，现在我们对文档使用OpenAPI规范。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi oe"><img src="../Images/321a9588620fc13e77da7e407c78e226.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p7nbgmfx8m23KXU9TwphPQ.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated"><a class="ae lh" href="https://swagger.io/docs/specification/basic-structure/" rel="noopener ugc nofollow" target="_blank">https://swagger.io/docs/specification/basic-structure/</a></figcaption></figure></div><div class="ab cl mt mu hx mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="im in io ip iq"><h1 id="42e9" class="na nb it bd nc nd ne nf ng nh ni nj nk ki nl kj nm kl nn km no ko np kp nq nr bi translated">将OpenAPI安装到现有项目中</h1><p id="f072" class="pw-post-body-paragraph li lj it lk b ll ns kd ln lo nt kg lq lr nu lt lu lv nv lx ly lz nw mb mc md im bi translated">本节将指导您使用<a class="ae lh" href="https://www.npmjs.com/package/swagger-ui-express" rel="noopener ugc nofollow" target="_blank"> Swagger UI Express </a>在Node.js项目中安装Swagger。</p><p id="76f6" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们有如下一些步骤:</p><ol class=""><li id="fac5" class="me mf it lk b ll lm lo lp lr mg lv mh lz mi md mj mk ml mm bi translated">安装库</li><li id="a090" class="me mf it lk b ll mn lo mo lr mp lv mq lz mr md mj mk ml mm bi translated">添加Swagger文档</li><li id="6d6c" class="me mf it lk b ll mn lo mo lr mp lv mq lz mr md mj mk ml mm bi translated">将文档注入到项目中</li></ol><p id="7d3b" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">安装库</strong></p><p id="6249" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">运行<code class="fe of og oh oi b">npm i swagger-ui-express</code>安装<strong class="lk jd"> Swagger UI Express。</strong></p><p id="1f10" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">添加招摇文件</strong></p><p id="78cd" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这里有两种格式可供选择:</p><ul class=""><li id="7372" class="me mf it lk b ll lm lo lp lr mg lv mh lz mi md oj mk ml mm bi translated">JSON</li><li id="98a4" class="me mf it lk b ll mn lo mo lr mp lv mq lz mr md oj mk ml mm bi translated">打字稿扩展</li></ul><p id="139e" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我更喜欢使用Typescript扩展来创建一个良好的可重用和可读的swagger文档。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="ok ol l"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">第一版swagger.ts</figcaption></figure><p id="34cd" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><strong class="lk jd">将文件注入到项目中</strong></p><p id="d532" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们只需要将库<code class="fe of og oh oi b">swagger-ui-express</code>和你的<strong class="lk jd"> </strong> <code class="fe of og oh oi b">swagger.ts</code> <strong class="lk jd"> </strong>文件导入到你的服务器。</p><p id="edf8" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在这里，我按照<a class="ae lh" href="https://www.npmjs.com/package/swagger-ui-express" rel="noopener ugc nofollow" target="_blank">他们的包</a>中的指导方针，使用URL <code class="fe of og oh oi b">/api-docs</code>将它添加到项目中。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi om"><img src="../Images/8bf6b00b5a59bd295c0ad1f7ab8de1e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VSw60C5V2YD-xDJyovLeUg.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">初始化当前服务器/服务的swagger文档</figcaption></figure></div><div class="ab cl mt mu hx mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="im in io ip iq"><h1 id="0763" class="na nb it bd nc nd ne nf ng nh ni nj nk ki nl kj nm kl nn km no ko np kp nq nr bi translated">编写优秀文档的简单指南</h1><p id="9127" class="pw-post-body-paragraph li lj it lk b ll ns kd ln lo nt kg lq lr nu lt lu lv nv lx ly lz nw mb mc md im bi translated">在这一节中，我将向您展示为什么我对Swagger文件使用TypeScript格式——它允许您根据业务逻辑将大文件分解成小文件。</p><p id="a6e0" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">为了给服务器添加更多信息，我们为我们的API服务准备了开发、测试、UAT，也许还有预生产环境。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="ok ol l"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">API的特定服务器信息</figcaption></figure><p id="42ab" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">如果您想要动态端口、环境名和基本路径，该怎么办？这个我们可以申请<code class="fe of og oh oi b">variables</code>。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="ok ol l"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">使用服务器变量对象设置API文档的环境、端口和基本路径</figcaption></figure><p id="c290" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">如何给Swagger添加授权？</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="ok ol l"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">添加JWT的授权</figcaption></figure><p id="7426" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">上面的示例代码用于将JWT添加到请求头中，以授权用户的权限。</p><p id="5d2c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们还有其他身份验证类型，如:</p><ul class=""><li id="4210" class="me mf it lk b ll lm lo lp lr mg lv mh lz mi md oj mk ml mm bi translated">基本认证</li></ul><pre class="ks kt ku kv gt on oi oo op aw oq bi"><span id="4b03" class="or nb it oi b gy os ot l ou ov">{<br/>  "type": "http",<br/>  "scheme": "basic"<br/>}</span></pre><ul class=""><li id="f786" class="me mf it lk b ll lm lo lp lr mg lv mh lz mi md oj mk ml mm bi translated">API密钥</li></ul><pre class="ks kt ku kv gt on oi oo op aw oq bi"><span id="f2e2" class="or nb it oi b gy os ot l ou ov">{<br/>  "type": "apiKey",<br/>  "name": "api_key",<br/>  "in": "header"<br/>}</span></pre><ul class=""><li id="443c" class="me mf it lk b ll lm lo lp lr mg lv mh lz mi md oj mk ml mm bi translated">隐式OAuth2</li></ul><pre class="ks kt ku kv gt on oi oo op aw oq bi"><span id="a4d8" class="or nb it oi b gy os ot l ou ov">{<br/>  "type": "oauth2",<br/>  "flows": {<br/>    "implicit": {<br/>      "authorizationUrl": "https://example.com/api/oauth/dialog",<br/>      "scopes": {<br/>        "write:pets": "modify pets in your account",<br/>        "read:pets": "read your pets"<br/>      }<br/>    }<br/>  }<br/>}</span></pre><p id="8562" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">最后，我们将这个大摇大摆的文件分割成更小的文件。</p><ul class=""><li id="e3b3" class="me mf it lk b ll lm lo lp lr mg lv mh lz mi md oj mk ml mm bi translated">在<code class="fe of og oh oi b">src/openAPI</code>中创建一个名为<code class="fe of og oh oi b">pets.swagger.ts</code>的文件</li></ul><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="ok ol l"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">getPets inside <code class="fe of og oh oi b">pets.swagger.ts</code></figcaption></figure><ul class=""><li id="b51c" class="me mf it lk b ll lm lo lp lr mg lv mh lz mi md oj mk ml mm bi translated">将<code class="fe of og oh oi b">getPets</code>导入到<code class="fe of og oh oi b">swagger.ts</code></li></ul><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="ok ol l"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">将getPets导入swagger.js</figcaption></figure><p id="eff1" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">通过使用Typescript，我们可以根据业务逻辑将文档分割成许多小文件。这使得我们的swagger文档更具可读性和可维护性。</p><h1 id="3145" class="na nb it bd nc nd ow nf ng nh ox nj nk ki oy kj nm kl oz km no ko pa kp nq nr bi translated">结论</h1><p id="6dd4" class="pw-post-body-paragraph li lj it lk b ll ns kd ln lo nt kg lq lr nu lt lu lv nv lx ly lz nw mb mc md im bi translated">在本文中，我们看到了如何使用Express和TypeScript在节点项目中安装Swagger</p><p id="dd52" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">通过使用TypeScript，我们发现可以根据业务逻辑将一个大文件分割成较小的文件，然后将它们导入主Swagger文件。</p><p id="2611" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我希望这篇文章对你有用！可以跟着我上<a class="ae lh" href="https://medium.com/@transonhoang?source=post_page---------------------------" rel="noopener">媒</a>。我也在推特上。欢迎在下面的评论中留下任何问题。我很乐意帮忙！</p></div><div class="ab cl mt mu hx mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="im in io ip iq"><div class="ks kt ku kv gt pb"><a href="https://betterfullstack.com/stories/" rel="noopener  ugc nofollow" target="_blank"><div class="pc ab fo"><div class="pd ab pe cl cj pf"><h2 class="bd jd gy z fp pg fr fs ph fu fw jc bi translated">故事-更好的全栈</h2><div class="pi l"><h3 class="bd b gy z fp pg fr fs ph fu fw dk translated">关于JavaScript、Python和Wordpress的有用文章，有助于开发人员减少开发时间并提高…</h3></div><div class="pj l"><p class="bd b dl z fp pg fr fs ph fu fw dk translated">betterfullstack.com</p></div></div><div class="pk l"><div class="pl l pm pn po pk pp lb pb"/></div></div></a></div></div></div>    
</body>
</html>