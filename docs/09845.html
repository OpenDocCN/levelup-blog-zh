<html>
<head>
<title>Set up a Tezos smart contract IDE with SmartPy and Taquito</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用SmartPy和Taquito设置Tezos智能合约IDE</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/set-up-a-tezos-smart-contract-ide-with-smartpy-and-taquito-32fe445d274?source=collection_archive---------0-----------------------#2021-09-21">https://levelup.gitconnected.com/set-up-a-tezos-smart-contract-ide-with-smartpy-and-taquito-32fe445d274?source=collection_archive---------0-----------------------#2021-09-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="63d5" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">循序渐进的指南。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/2426d63ee34f4aa6daa4b5975d59f100.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ED-RYIp8aZRXsawiF-RTGA.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">由<a class="ae kv" href="https://u.today/tezos-ecosystem-starts-six-grant-programs-invites-developers-to-build-on-tezos-xtz" rel="noopener ugc nofollow" target="_blank"> u.today </a>提供</figcaption></figure><p id="92ac" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">以太坊(或统称为EVM)智能合约开发者拥有难以置信的便利开发环境，如<a class="ae kv" href="http://hardhat.org/" rel="noopener ugc nofollow" target="_blank"> Hardhat </a>。Tezos(还)没有严格的对等物，但是建立一个环境来编译、测试和部署Tezos智能契约实际上非常简单。</p><p id="cc7e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这篇文章中，我提供了一个循序渐进的指导。</p><h2 id="f406" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated"><strong class="ak">设置</strong></h2><p id="6a61" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">首先，安装<a class="ae kv" href="https://smartpy.io/" rel="noopener ugc nofollow" target="_blank"> SmartPy </a>，这是一个用于编写和测试Tezos智能合约的Python库。<em class="mq">注意:SmartPy的一个打字版本(名为</em><a class="ae kv" href="https://smartpy.io/ts-ide" rel="noopener ugc nofollow" target="_blank"><em class="mq">SmartTS</em></a><em class="mq">)目前处于测试阶段。🚀</em></p><pre class="kg kh ki kj gt mr ms mt mu aw mv bi"><span id="7e76" class="ls lt iq ms b gy mw mx l my mz">$ sh &lt;(curl -s <a class="ae kv" href="https://smartpy.io/cli/install.sh" rel="noopener ugc nofollow" target="_blank">https://smartpy.io/cli/install.sh</a>)</span></pre><p id="6174" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以通过运行以下命令来验证它是否已正确安装:</p><pre class="kg kh ki kj gt mr ms mt mu aw mv bi"><span id="947e" class="ls lt iq ms b gy mw mx l my mz">$ ~/smartpy-cli/SmartPy.sh — version</span></pre><p id="09ac" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，用三个文件夹初始化一个<code class="fe na nb nc ms b">npm</code>项目:<code class="fe na nb nc ms b">build</code>、<code class="fe na nb nc ms b">contracts</code>和<code class="fe na nb nc ms b">deployment</code>。</p><pre class="kg kh ki kj gt mr ms mt mu aw mv bi"><span id="576f" class="ls lt iq ms b gy mw mx l my mz">$ <!-- -->npm init --yes<br/>$ mdkir build contracts deployment</span></pre><p id="cd76" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，安装一些必需的依赖项:</p><pre class="kg kh ki kj gt mr ms mt mu aw mv bi"><span id="7e2a" class="ls lt iq ms b gy mw mx l my mz">$ npm install @taquito/taquito @taquito/signer ts-node dotenv</span></pre><h2 id="aad2" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated"><strong class="ak">合同</strong></h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/ad185a008f559aca02f19c99aa6e93c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:840/format:webp/1*u0xoV9IzrjZPLwY7mhVFsQ.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">由媒体上的<a class="ae kv" href="https://smartpy-io.medium.com/" rel="noopener"> SmartPy.io </a>提供。</figcaption></figure><p id="0804" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">出于本文的目的，我们将使用一个简单的“反向”契约。</p><p id="6c8d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<code class="fe na nb nc ms b">contracts</code>文件夹中创建一个文件<code class="fe na nb nc ms b">counter.py</code>。该文件还可以包含测试，这是SmartPy提供的一个强大而方便的功能。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="fcc5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="mq">注意下一步所需的</em> <code class="fe na nb nc ms b"><em class="mq">sp.add_compilation_target</em></code> <em class="mq">。</em></p><h2 id="27a7" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">汇编</h2><p id="a753" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">为了让Tezos虚拟机理解，我们的SmartPy契约必须向下编译到迈克尔逊。这是最(句法)无糖的一步——双关语。</p><p id="1283" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">简单地创建一个文件<code class="fe na nb nc ms b">compile.sh</code>并复制粘贴这个<a class="ae kv" href="https://gist.github.com/kalouo/b80e4761c94c7768bbc295939a0688d8?file=compile.sh" rel="noopener ugc nofollow" target="_blank"> bash脚本</a>。它是基于哈弗实验室编写的一个脚本，这个团队是“先驱者”和“科利布里”的幕后团队。</p><p id="e3a5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">向您的<code class="fe na nb nc ms b">package-json</code>文件的<code class="fe na nb nc ms b">scripts</code>对象添加一个命令<code class="fe na nb nc ms b">"compile-contracts"</code>，运行<code class="fe na nb nc ms b">./compile.sh</code>。您将需要通过运行<code class="fe na nb nc ms b">chmod +x compile.sh</code>使您的文件可执行(一次)。</p><p id="2663" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，使用以下命令编译您的契约:</p><pre class="kg kh ki kj gt mr ms mt mu aw mv bi"><span id="13f4" class="ls lt iq ms b gy mw mx l my mz">$ npm run compile-contracts counter </span></pre><p id="796f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这将输出两个文件到<code class="fe na nb nc ms b">/build</code>文件夹:</p><ul class=""><li id="7cb6" class="ng nh iq ky b kz la lc ld lf ni lj nj ln nk lr nl nm nn no bi translated"><code class="fe na nb nc ms b">counter.json</code>:编制好的迈克尔逊合同。</li><li id="8401" class="ng nh iq ky b kz np lc nq lf nr lj ns ln nt lr nl nm nn no bi translated"><code class="fe na nb nc ms b">counter_storage.json</code>:上述编译目标(<code class="fe na nb nc ms b">sp.add_compilation_target</code>)中定义的初始契约存储。</li></ul><p id="db45" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它还将运行您编写的任何测试。</p><h2 id="12a3" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">部署</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/7bd8b6c55150ef9ae3b72e790ce845d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/1*weIpAKzB-g_qXNEBNAztgg.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">由<a class="ae kv" href="https://twitter.com/TezosTaquito/photo" rel="noopener ugc nofollow" target="_blank">塔奎托</a>提供</figcaption></figure><p id="24ca" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要部署智能合同，您需要定义一个节点，通过该节点您可以与Tezos区块链进行交互，还需要定义一个帐户来签署部署交易并支付燃气费。用以下变量创建一个<code class="fe na nb nc ms b">.env</code>文件:</p><pre class="kg kh ki kj gt mr ms mt mu aw mv bi"><span id="fa03" class="ls lt iq ms b gy mw mx l my mz">TEZOS_RPC_URL=&lt;PUBLIC_NODE_URL&gt;<br/>DEPLOYER_PRIVATE_KEY=&lt;YOUR_PRIVATE_KEY&gt;</span></pre><p id="3bab" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Taquito提供了一个<a class="ae kv" href="https://tezostaquito.io/docs/rpc_nodes/" rel="noopener ugc nofollow" target="_blank">有用的社区运营节点列表</a>。您可以通过<code class="fe na nb nc ms b">Settings</code> &gt; <code class="fe na nb nc ms b">Reveal Private Key</code>导出您在Temple Wallet上的私钥。</p><blockquote class="nv nw nx"><p id="6bb4" class="kw kx mq ky b kz la jr lb lc ld ju le ny lg lh li nz lk ll lm oa lo lp lq lr ij bi translated">如果你在testnet上部署，最便捷的方式是通过Telegram上的<a class="ae kv" href="https://t.me/tezos_faucet_bot" rel="noopener ugc nofollow" target="_blank"> Tezos水龙头机器人</a>向你的testnet XTZ账户提供资金。</p></blockquote><p id="9b6b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，在<code class="fe na nb nc ms b">/deploy</code>文件夹中创建一个文件<code class="fe na nb nc ms b">deploy.ts</code>:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="cd23" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，将命令<code class="fe na nb nc ms b">"deploy-contracts”</code>添加到您的<code class="fe na nb nc ms b">package.json</code>中，运行<code class="fe na nb nc ms b">ts-node deployment/deploy.ts</code>。您现在可以通过以下方式部署您的合同:</p><pre class="kg kh ki kj gt mr ms mt mu aw mv bi"><span id="b0cb" class="ls lt iq ms b gy mw mx l my mz">$ npm run deploy-contracts</span></pre><p id="05b2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="mq"> Et voilà，</em>契约的地址应该在命令行上可见，你可以通过<a class="ae kv" href="https://better-call.dev/" rel="noopener ugc nofollow" target="_blank"> <em class="mq">与之交互更好的调用Dev </em> </a> <em class="mq">。</em></p><p id="122c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了进一步参考，你可以在这里看到完整的GitHub库<a class="ae kv" href="https://github.com/kalouo/tezos-ide" rel="noopener ugc nofollow" target="_blank">。</a><a class="ae kv" href="https://tezostaquito.io/docs/quick_start" rel="noopener ugc nofollow" target="_blank"> Taquito </a>和<a class="ae kv" href="https://smartpy.io/reference.html" rel="noopener ugc nofollow" target="_blank"> SmartPy </a>都是有据可查的，在Telegram上的<code class="fe na nb nc ms b">Tezos Developers</code> <a class="ae kv" href="https://t.me/TezosDevelopers" rel="noopener ugc nofollow" target="_blank">频道</a>随时可以提问。</p><p id="218b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我希望这个指南对你有用。</p><p id="f3f6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">快乐编码🚀 🚀 🚀</p></div></div>    
</body>
</html>