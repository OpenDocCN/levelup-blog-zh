# 列举您在 TypeScript 中应该知道的功能

> 原文：<https://levelup.gitconnected.com/enums-features-you-must-know-in-typescript-d5b6a1288b42>

## 让你的打字稿代码更清晰易读。

![](img/86dc0f75e732d0d6f8bfb53dbd2176ee.png)

作者图片

本文将介绍`enum`在 TypeScript 中那些你需要知道的特性。

枚举是 TypeScript 添加到 JavaScript 的少数几个特性之一。它允许开发人员定义一组命名的常量，这在特性上类似于 JavaScript 中的`object`或`Map`，但是它更能表达文档化的意图，更有语义，也更简洁明了。

TypeScript 既支持基于数字的枚举，也支持基于字符串的枚举，所以让我们从这一点开始。

# 数字枚举

可以使用关键字`enum`定义枚举。对于数字枚举，它具有以下特性:

## 自动增量

当我们不关心成员值本身，而只关心每个值在当前枚举中是否唯一时，这种自动递增行为会很有用。

但是这种自动递增行为本身并不能保证稳定性，就像上面的第三个代码块一样。**因为它只保证当前赋值项后的值递增而不考虑整体增量**，所以很容易在我们的代码中造成逻辑错误。

除此之外，请注意`Block-4`，它告诉我们，如果我们需要利用数值枚举的 incrementality，**初始化器只能是一个数值常量或其他常量枚举成员初始化的数值枚举，而不是一个计算成员**(计算成员和常量成员的区别在下面的小节中描述)。

## 反向映射

数值枚举(非`const`)在编译成 JavaScript 代码时会创建正向(`name`->-`value`)和反向(`value`->-`name`)映射对象。

# 字符串枚举

顾名思义，字符串枚举是由一个字符串或另一个字符串枚举的成员组成的枚举。

但它与数值枚举的不同之处在于，字符串枚举没有自动递增行为，也不向后映射。

但它比数值枚举有优势，我个人认为有两点:

1.  它很好地“序列化”了。与在运行时不传达有用含义的数值枚举不同，字符串枚举可以在运行时提供有意义且可读的值，而不管枚举成员本身的名称如何。
2.  当其成员被用作类型时，只有自身可以被赋给它。当一个数字枚举成员被用作类型时，所有的数字都可以赋给它。

# 异质枚举

从技术上来说，enum 成员可以混合字符串和数字，但是这种情况很混乱，除非有特殊需要，否则不建议使用。

```
enum BooleanLikeHeterogeneousEnum {
    No = 0,
    Yes = 'YES',
}
```

# 计算成员和常量成员

如在数字枚举中已经介绍的，第一项不使用初始值设定项，或者当枚举成员被认为是常数枚举时，枚举成员是数字常数。此外，当枚举成员使用常量枚举表达式初始化时，也被认为是常量枚举。

常量枚举表达式是可以在编译时完全计算的 TypeScript 表达式的子集。如果表达式满足以下条件，则它是常量枚举表达式:

1.  文字枚举表达式(基本上是字符串文字或数值文字)
2.  对以前定义的常量枚举成员(可以源自不同的枚举)的引用
3.  带括号的常量枚举表达式
4.  应用于常量枚举表达式的`+`、`-`、`~`一元运算符之一
5.  `+`、`-`、`*`、`/`、`%`、`<<`、`>>`、`>>>`、`&`、`|`、`^`以常量枚举表达式为操作数的二元运算符

常量枚举表达式被求值为`NaN`或`Infinity`是一个编译时错误。

除上述情况外，在所有情况下，枚举成员都被视为计算成员。

```
enum FileAccess {
  // constant members
  None,
  Read = 1 << 1,
  Write = 1 << 2,
  ReadWrite = Read | Write,
  // computed member
  G = "123".length,
}
```

# 常数枚举

`const`枚举和常规枚举的区别在于，它们在编译时被移除，使用它们的地方被替换为相应的值。但是这也限制了`const`枚举只能使用常量成员，而不能使用计算成员。

与常规枚举生成一个对象相比，`const`枚举只会替换值，所以`const`更严格，不能使用`Object`上的方法。

但是我们也不需要支付生成 enum 映射代码的成本，所以建议优先使用`const`enum。

# `preserveConstEnums`编译选项

还有一点需要注意的是，当[preserve consensums](https://www.typescriptlang.org/tsconfig/#preserveConstEnums)打开时，TypeScript 不会删除`const`枚举的代码。但是我们仍然不能在它上面使用`Object`上的方法。

```
{
  "compilerOptions": {
    "target": "ESNext",
    **"preserveConstEnums": true**
  }
}
```

# 参考

[1]https://www.typescriptlang.org/docs/handbook/enums.html

今天就到这里。我是 Zachary，我将继续输出与 web 开发相关的故事。如果你喜欢这样的故事，想支持我，请考虑成为 [*中会员*](https://medium.com/@islizeqiang/membership) *。每月 5 美元，你可以无限制地访问媒体内容。如果你通过* [*我的链接*](https://medium.com/@islizeqiang/membership) *报名，我会得到一点佣金。*

你的支持对我来说很重要——谢谢。