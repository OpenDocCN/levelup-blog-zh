<html>
<head>
<title>A Case Study on the Yocto Project</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Yoctoé¡¹ç›®æ¡ˆä¾‹ç ”ç©¶</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://levelup.gitconnected.com/a-case-study-on-the-yocto-project-947bfe58eb0c?source=collection_archive---------5-----------------------#2022-08-19">https://levelup.gitconnected.com/a-case-study-on-the-yocto-project-947bfe58eb0c?source=collection_archive---------5-----------------------#2022-08-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/ea8be94e63737a363084b463e86502c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*avF6XoD8ktOL8oEz.jpeg"/></div></div></figure><p id="35ce" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†é€šè¿‡æ„å»ºä¸€ä¸ªçœŸå®çš„ä¾‹å­æ¥è§£é‡Šä»€ä¹ˆæ˜¯Yoctoé¡¹ç›®â€”â€”æ¡å½¢ç é˜…è¯»å™¨ã€‚æ‰€ä»¥æˆ‘ä»¬å¼€å§‹å§ï¼</p><h1 id="4137" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">ä»‹ç»</h1><p id="0879" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">ä»¥ä¸‹æ‘˜å½•æ‘˜è‡ªç»´åŸºç™¾ç§‘å…³äºYoctoé¡¹ç›®çš„æ–‡ç« ã€‚</p><blockquote class="lz ma mb"><p id="b4db" class="jy jz mc ka b kb kc kd ke kf kg kh ki md kk kl km me ko kp kq mf ks kt ku kv ij bi translated">Yoctoé¡¹ç›®æ˜¯ä¸€ä¸ªLinuxåŸºé‡‘ä¼šåˆä½œå¼€æºé¡¹ç›®ï¼Œå…¶ç›®æ ‡æ˜¯å¼€å‘å·¥å…·å’Œæµç¨‹ï¼Œä¸ºç‹¬ç«‹äºåµŒå…¥å¼ç¡¬ä»¶åº•å±‚æ¶æ„çš„åµŒå…¥å¼å’Œç‰©è”ç½‘è½¯ä»¶åˆ›å»ºLinuxå‘è¡Œç‰ˆã€‚è¯¥é¡¹ç›®ç”±LinuxåŸºé‡‘ä¼šåœ¨2010å¹´å®£å¸ƒï¼Œå¹¶äº2011å¹´3æœˆä¸åŒ…æ‹¬OpenEmbeddedåœ¨å†…çš„22ä¸ªç»„ç»‡åˆä½œå¯åŠ¨ã€‚</p></blockquote><p id="4bad" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">è¿™ç›´æ¥å°†æˆ‘ä»¬å¼•å‘OpenEmbeddedæ„å»ºç³»ç»Ÿã€‚é‚£ä¹ˆä»€ä¹ˆæ˜¯OpenEmbeddedå’ŒOpenEmbedded build systemå‘¢ï¼Ÿä»¥ä¸‹æ‘˜å½•æ‘˜è‡ªOpenEmbeddedä¸Šçš„ç»´åŸºç™¾ç§‘æ–‡ç« ã€‚</p><blockquote class="lz ma mb"><p id="64d6" class="jy jz mc ka b kb kc kd ke kf kg kh ki md kk kl km me ko kp kq mf ks kt ku kv ij bi translated"><em class="iq"> OpenEmbeddedæ˜¯ä¸€ä¸ªæ„å»ºè‡ªåŠ¨åŒ–æ¡†æ¶å’Œäº¤å‰ç¼–è¯‘ç¯å¢ƒï¼Œç”¨äºä¸ºåµŒå…¥å¼è®¾å¤‡åˆ›å»ºLinuxå‘è¡Œç‰ˆã€‚OpenEmbeddedæ¡†æ¶ç”±OpenEmbeddedç¤¾åŒºå¼€å‘ï¼Œè¯¥ç¤¾åŒºäº2003å¹´æ­£å¼æˆç«‹ã€‚OpenEmbeddedæ˜¯Yoctoé¡¹ç›®çš„æ¨èæ„å»ºç³»ç»Ÿï¼Œyo CTOé¡¹ç›®æ˜¯ä¸€ä¸ªLinuxåŸºé‡‘ä¼šå·¥ä½œç»„ï¼Œå¸®åŠ©å•†ä¸šå…¬å¸ä¸ºåµŒå…¥å¼äº§å“å¼€å‘åŸºäºLinuxçš„ç³»ç»Ÿã€‚</em></p><p id="3065" class="jy jz mc ka b kb kc kd ke kf kg kh ki md kk kl km me ko kp kq mf ks kt ku kv ij bi translated"><em class="iq">æ„å»ºç³»ç»Ÿæ˜¯åŸºäºBitBakeâ€œé£Ÿè°±â€çš„ï¼Œå®ƒæŒ‡å®šäº†å¦‚ä½•æ„å»ºä¸€ä¸ªç‰¹å®šçš„åŒ…ï¼Œä½†ä¹ŸåŒ…æ‹¬ä¾èµ–é¡¹å’Œæºä»£ç ä½ç½®çš„åˆ—è¡¨ï¼Œä»¥åŠå¦‚ä½•å®‰è£…å’Œåˆ é™¤ç¼–è¯‘åçš„åŒ…çš„è¯´æ˜ã€‚OpenEmbeddedå·¥å…·ä½¿ç”¨è¿™äº›æ–¹æ³•æ¥è·å–å’Œä¿®è¡¥æºä»£ç ã€ç¼–è¯‘å’Œé“¾æ¥äºŒè¿›åˆ¶æ–‡ä»¶ã€ç”ŸæˆäºŒè¿›åˆ¶æ–‡ä»¶åŒ…(ipkã€debã€rpm)ä»¥åŠåˆ›å»ºå¯å¼•å¯¼æ˜ åƒã€‚</em></p></blockquote><p id="0f29" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ä»ä¸Šé¢å…³äºYoctoé¡¹ç›®å’ŒOpenEmbeddedçš„å¼•ç”¨å¯ä»¥çœ‹å‡ºï¼Œä¸¤è€…æ˜¯æœ‰åŒºåˆ«çš„ã€‚ç„¶è€Œï¼Œå®ƒä»¬ç»å¸¸äº’æ¢ä½¿ç”¨ã€‚ç®€è€Œè¨€ä¹‹ï¼›</p><blockquote class="lz ma mb"><p id="168e" class="jy jz mc ka b kb kc kd ke kf kg kh ki md kk kl km me ko kp kq mf ks kt ku kv ij bi translated">Yoctoæ˜¯ä¸€ä¸ªä¼å¼é¡¹ç›®ï¼Œç”¨äºæ„å»ºä½ è‡ªå·±çš„LinuxåµŒå…¥å¼å‘è¡Œç‰ˆ</p><p id="565b" class="jy jz mc ka b kb kc kd ke kf kg kh ki md kk kl km me ko kp kq mf ks kt ku kv ij bi translated"><strong class="ka ir"> <em class="iq"> OpenEmbeddedæ˜¯Yocto </em> </strong>çš„æ„å»ºç³»ç»Ÿ</p></blockquote><p id="d445" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">OpenEmbeddedåˆ©ç”¨å·¥å…·<strong class="ka ir"> BitBake </strong>æ¥åšä»»ä½•äº‹æƒ…ï¼Œä»ä¸Šé¢çš„æ‘˜å½•ä¸­å¯ä»¥çœ‹å‡ºã€‚åœ¨ä¸‹ä¸€èŠ‚ä¸­ï¼Œå°†å°è¯•è§£é‡Šå¦‚ä½•è·å¾—open embedded build system<strong class="ka ir">bit bake</strong>ã€‚</p><h1 id="e6b5" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">å¦‚ä½•å‡†å¤‡ä¸»æœºç³»ç»Ÿ</h1><p id="5b56" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">ç”±äºç›®æ ‡ç³»ç»Ÿæ˜¯Linuxæ“ä½œç³»ç»Ÿï¼Œ<strong class="ka ir"> BitBake </strong>éœ€è¦ä¸€ä¸ªLinuxæ“ä½œç³»ç»Ÿä½œä¸ºä¸»æœºï¼Œå°¤å…¶æ˜¯Debian/Ubuntuã€‚Windowsæˆ–MacOSä¸Šçš„Linux VMæˆ–Windowsä¸Šçš„WSLå¯ä»¥ç”¨ä½œæ„å»ºæœºå™¨ï¼Œä½†ç”±äºæ€§èƒ½é—®é¢˜å’Œå¯¹ç£ç›˜ç©ºé—´çš„é«˜éœ€æ±‚ï¼Œä¸æ¨èä½¿ç”¨ã€‚åœ¨ä»»ä½•æƒ…å†µä¸‹ï¼Œéƒ½éœ€è¦ä¸€å°Linuxæœºå™¨ï¼Œå³ä½¿æ˜¯è™šæ‹Ÿçš„æˆ–æœ¬åœ°çš„ã€‚ä»ç°åœ¨å¼€å§‹ï¼Œæˆ‘ä»¬æœ‰ä¸¤ä¸ªé€‰é¡¹æ¥åœ¨å®¿ä¸»Linuxæœºå™¨ä¸Šå®‰è£…æ„å»ºç³»ç»Ÿã€‚</p><ul class=""><li id="aada" class="mg mh iq ka b kb kc kf kg kj mi kn mj kr mk kv ml mm mn mo bi translated">ç›´æ¥åœ¨ä¸»æœºä¸Šå®‰è£…å·¥å…·ã€‚</li><li id="5211" class="mg mh iq ka b kb mp kf mq kj mr kn ms kr mt kv ml mm mn mo bi translated">ä½¿ç”¨Dockerè·å–æ•´ä¸ªæ„å»ºç³»ç»Ÿã€‚</li></ul><p id="91ea" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æœ¬æ•™ç¨‹ä¸­ä½¿ç”¨äº†åä¸€ç§æ–¹æ³•ï¼Œå› ä¸ºç¬¬ä¸€ç§æ–¹æ³•æ‰°ä¹±äº†ä¸»æœºç³»ç»Ÿï¼Œè€Œç¬¬äºŒç§æ–¹æ³•æä¾›äº†ä¸€ä¸ªéš”ç¦»çš„ç³»ç»Ÿã€‚åœ¨Linuxä¸Šï¼Œè¿™ä¸¤ç§æ–¹æ³•çš„å·¥ä½œæ€§èƒ½ç›¸åŒï¼Œå› ä¸ºDockeræ²¡æœ‰æ·»åŠ é¢å¤–çš„å·¥ä½œå±‚ã€‚ä½†æ˜¯åœ¨Windowå’ŒMacOSä¸Šï¼ŒDockeréœ€è¦é¢å¤–çš„Linuxè™šæ‹Ÿæœºï¼Œå› æ­¤æ€§èƒ½ä¼šé™ä½ã€‚</p><p id="d142" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ä»ç°åœ¨å¼€å§‹ï¼Œæˆ‘ä»¬å‡è®¾æˆ‘ä»¬æœ‰ä¸€å°Debian/Ubuntu Linuxæœºå™¨(æœ¬åœ°çš„æˆ–è™šæ‹Ÿçš„),å¹¶ä¸”æˆ‘ä»¬å¯ä»¥é€šè¿‡SSHæ§åˆ¶å°è®¿é—®è¿™å°æœºå™¨ã€‚å¦‚æœä½ å¯¹æ§åˆ¶å°æ„Ÿåˆ°ä¸èˆ’æœï¼Œä½ å¯ä»¥ä½¿ç”¨teh VS Codeè¿œç¨‹SSHæ’ä»¶ã€‚</p><p id="18a0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">å¯¹äºç¬¬ä¸€ç§æ–¹æ³•ï¼Œæ‚¨å¯ä»¥éµå¾ªæ–‡æ¡£Yoctoé¡¹ç›®å¿«é€Ÿæ„å»ºã€‚</p><p id="78f9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">å¯¹äºç¬¬äºŒç§æ–¹æ³•ï¼Œé¦–å…ˆéœ€è¦å®‰è£…Dockerå¼•æ“ã€‚ä¸ºæ­¤ï¼Œä½ å¯ä»¥æŒ‰ç…§Debianä¸Šçš„æ–‡æ¡£å®‰è£…Dockerå¼•æ“ã€‚æˆ‘ä»¬è¿˜éœ€è¦<strong class="ka ir"> git </strong>ç‰ˆæœ¬æ§åˆ¶å·¥å…·ã€‚å®ƒå¯ä»¥æŒ‰å¦‚ä¸‹æ–¹å¼å®‰è£…</p><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="a4b3" class="nd kx iq mz b gy ne nf l ng nh">$ sudo apt-get update $ sudo apt-get install git</span></pre><h1 id="be23" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">å¦‚ä½•è·å¾—OpenEmbeddedæ„å»ºç³»ç»Ÿ</h1><p id="cd4a" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">ç°åœ¨æˆ‘ä»¬åœ¨ä¸»æœºä¸Šå·²ç»æœ‰äº†æ‰€æœ‰éœ€è¦çš„åŸºç¡€å·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥ä»<strong class="ka ir"> Poky </strong>é¡¹ç›®ä¸­è·å¾—<strong class="ka ir"> BitBake </strong>å¦‚ä¸‹</p><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="ed1d" class="nd kx iq mz b gy ne nf l ng nh"># Create a working directory<br/>$ mkdir -p /mnt/Work/PROJs/rpi/yocto/src<br/>$ cd /mnt/Work/PROJs/rpi/yocto/src<br/><br/># getting latest stable build system branch kirkstone from yocto project repos<br/>$ git clone https://git.yoctoproject.org/poky -b kirkstone<br/><br/># return to yocto directory and run docker<br/>$ cd ..<br/>$ docker run --rm -it -v $(pwd):/workspace --workdir /workspace crops/poky:latest<br/><br/># exit to return host command prompt<br/>$ exit</span></pre><p id="3f06" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">å‘å‡ºæœ€åä¸€ä¸ªå‘½ä»¤åï¼Œå¦‚æœåœ¨æœ¬åœ°æ‰¾ä¸åˆ°å®¹å™¨æ˜ åƒï¼Œå®ƒå°†è‡ªåŠ¨ä»<strong class="ka ir"> Docker Hub </strong>ä¸‹è½½å¹¶è¿è¡Œå®¹å™¨ï¼Œç„¶åè¿›å…¥å®¹å™¨å‘½ä»¤è¡Œæç¤ºç¬¦ã€‚ç°åœ¨æˆ‘ä»¬æœ‰äº†ä¸€ä¸ªå®Œæ•´çš„æ„å»ºç³»ç»Ÿï¼Œä½†æ˜¯æ²¡æœ‰è¦æ„å»ºçš„æºä»£ç ã€‚æˆ‘ä»¬å°†åœ¨ä¸‹ä¸€èŠ‚ä¸­è·å–èµ„æºã€‚</p><h1 id="251d" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">å¦‚ä½•è·å¾—BitBakeå›¾å±‚</h1><p id="535b" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">åœ¨<strong class="ka ir"> BitBake </strong>æ¦‚å¿µä¸­ï¼Œæ¯ç»„æä¾›ç›¸åŒåŠŸèƒ½çš„æºç§°ä¸º<strong class="ka ir">å±‚</strong>æˆ–<strong class="ka ir">å…ƒå±‚</strong>ã€‚äº‹å®ä¸Šï¼Œå®ƒä»¬ä¸æ˜¯ä¸€ä¸ªå¯ä»¥æ„å»ºçš„å¸¸è§„æºä»£ç ã€‚å®ƒä»¬æ˜¯ç”¨<strong class="ka ir"> BitBake </strong>è¯­è¨€ç¼–å†™çš„è„šæœ¬ï¼Œå®šä¹‰äº†å¦‚ä½•è·å–æºä»£ç ã€ä¿®è¡¥æºä»£ç ã€æ„å»ºæºä»£ç ã€ä¾èµ–æºä»£ç ä»¥åŠé›†æˆåˆ°æœ€ç»ˆçš„ç›®æ ‡æ˜ åƒä¸­ã€‚æˆ‘ä»¬éœ€è¦ä¸ºæˆ‘ä»¬çš„é¡¹ç›®ä»¥ä¸‹å‡ å±‚ã€‚</p><ul class=""><li id="5723" class="mg mh iq ka b kb kc kf kg kj mi kn mj kr mk kv ml mm mn mo bi translated"><strong class="ka ir">meta-extra</strong>â€”â€”æ·»åŠ ä¸€ä¸ªæ™®é€šsudoç”¨æˆ·çš„è‡ªå®šä¹‰å±‚</li><li id="ef46" class="mg mh iq ka b kb mp kf mq kj mr kn ms kr mt kv ml mm mn mo bi translated"><strong class="ka ir">meta-raspberrypi</strong>â€”RPIæ¿æ”¯æŒåŒ…</li><li id="7690" class="mg mh iq ka b kb mp kf mq kj mr kn ms kr mt kv ml mm mn mo bi translated"><strong class="ka ir"> meta-openembedded </strong> â€”é™„åŠ çš„Linuxå·¥å…·</li><li id="0ef0" class="mg mh iq ka b kb mp kf mq kj mr kn ms kr mt kv ml mm mn mo bi translated"><strong class="ka ir">å…ƒè™šæ‹ŸåŒ–</strong>â€”Dockeræ”¯æŒåŒ…</li></ul><p id="8313" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">è¿™äº›æºä»£ç å¯ä»¥ä»ä»¥ä¸‹ç›¸å…³ä½ç½®ä¸‹è½½</p><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="a5fb" class="nd kx iq mz b gy ne nf l ng nh"># goto source folder<br/>$ cd /mnt/Work/PROJs/rpi/yocto/src<br/><br/># meta-extra<br/>$ git clone https://github.com/ierturk/yocto-meta-extra.git -b kirkstone meta-extra<br/><br/># meta-raspberrypi<br/>$ git clone https://git.yoctoproject.org/meta-raspberrypi -b kirkstone<br/><br/># meta-openembedded<br/>$ git clone https://git.openembedded.org/meta-openembedded -b kirkstone<br/><br/># meta-virtualization<br/>$ git clone https://git.yoctoproject.org/meta-virtualization -b kirkstone<!-- -->Now we have all the source to build the target image.</span></pre><h1 id="c402" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">é…ç½®å’Œæ„å»ºç›®æ ‡æ˜ åƒ</h1><p id="3a5e" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">æˆ‘ä»¬çš„ç›®æ ‡å›¾åƒå°†ç”¨äºå¼€å‘ï¼Œå®ƒå°†æœ‰å¾ˆå¤šå·¥å…·ï¼Œä¸ä¼šæœ‰ç”Ÿäº§å›¾åƒï¼Œå› æ­¤å®ƒä¼šæ¯”ç”Ÿäº§å›¾åƒå¤§ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬å°†éµå¾ªä¸åŒçš„æ–¹æ³•æ¥å¼€å‘åº”ç”¨ç¨‹åºã€‚æˆ‘ä»¬å°†ä¸ºåº”ç”¨ç¨‹åºä½¿ç”¨Dockerï¼Œæ‰€æœ‰æœªåŒ…å«åœ¨åŸºæœ¬æ˜ åƒä¸­çš„å¿…éœ€åŒ…éƒ½å°†åŒ…å«åœ¨Dockerå®¹å™¨ä¸­ã€‚</p><p id="a4a1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ç°åœ¨æˆ‘ä»¬å¯ä»¥å¼€å§‹é…ç½®å’Œæ„å»ºæ˜ åƒäº†</p><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="43a9" class="nd kx iq mz b gy ne nf l ng nh"># goto yocto directory and run Docker<br/>$ cd /mnt/Work/PROJs/rpi/yocto/src<br/>$ docker run --rm -it -v $(pwd):/workspace --workdir /workspace crops/poky:latest<br/><br/># We will drop into container command promt.<br/># Now the directory /mnt/Work/PROJs/rpi/yocto/src will be mounted<br/># as /workspace within the container, and we are in this directory.<br/><br/># Following command start a new build directory,<br/># and automatically drop into build directory<br/>$ . src/poky/oe-init-build-env<br/>### Shell environment set up for builds. ###<br/><br/>You can now run 'bitbake &lt;target&gt;'<br/><br/>Common targets are:<br/>    core-image-minimal<br/>    core-image-full-cmdline<br/>    core-image-sato<br/>    core-image-weston<br/>    meta-toolchain<br/>    meta-ide-support<br/><br/>You can also run generated qemu images with a command like 'runqemu qemux86'<br/><br/>Other commonly useful commands are:<br/> - 'devtool' and 'recipetool' handle common recipe tasks<br/> - 'bitbake-layers' handles common layer tasks<br/> - 'oe-pkgdata-util' handles common target package tasks</span></pre><p id="f374" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">é‚£ä¹ˆåœ¨ç›®å½•<strong class="ka ir"> yocto </strong>ä¸‹åº”è¯¥æœ‰ä¸€ä¸ªå¦‚ä¸‹çš„ç›®å½•æ ‘ã€‚</p><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="b022" class="nd kx iq mz b gy ne nf l ng nh">|-- build<br/>|   |-- conf<br/>|   |   |-- bblayers.conf<br/>|   |   |-- local.conf<br/>|   |   `-- templateconf.cfg<br/>`-- src<br/>    |-- meta-extra<br/>    |-- meta-openembedded<br/>    |-- meta-raspberrypi<br/>    |-- meta-virtualization<br/>    `-- poky</span></pre><p id="8d9b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ç°åœ¨æˆ‘ä»¬éœ€è¦ç¼–è¾‘æ–‡ä»¶<strong class="ka ir"> bblayers.conf </strong>å’Œ<strong class="ka ir"> local.conf </strong>ã€‚å®ƒä»¬æ˜¯ç”¨å†…å®¹åˆ›å»ºçš„ï¼Œéœ€è¦åœ¨ä¿®è¡¥ååº”ç”¨ã€‚</p><p id="bbfc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> bblayers.conf </strong>çš„è¡¥ä¸</p><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="472b" class="nd kx iq mz b gy ne nf l ng nh">diff initial/bblayers.conf final/bblayers.conf <br/>11a12,19<br/>&gt;   ${TOPDIR}/../src/meta-raspberrypi \<br/>&gt;   ${TOPDIR}/../src/meta-openembedded/meta-oe \<br/>&gt;   ${TOPDIR}/../src/meta-openembedded/meta-multimedia \<br/>&gt;   ${TOPDIR}/../src/meta-openembedded/meta-networking \<br/>&gt;   ${TOPDIR}/../src/meta-openembedded/meta-python \<br/>&gt;   ${TOPDIR}/../src/meta-openembedded/meta-filesystems \<br/>&gt;   ${TOPDIR}/../src/meta-virtualization \<br/>&gt;   ${TOPDIR}/../src/meta-extra \</span></pre><p id="b14f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> local.conf </strong>çš„è¡¥ä¸</p><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="efbb" class="nd kx iq mz b gy ne nf l ng nh">diff initial/local.conf final/local.conf <br/>36a37,38<br/>&gt; MACHINE ?= "raspberrypi3-64"<br/>&gt; #<br/>108c110<br/>&lt; PACKAGE_CLASSES ?= "package_rpm"<br/>---<br/>&gt; PACKAGE_CLASSES ?= "package_ipk"<br/>276a279,344<br/>&gt; <br/>&gt; # IMAGE_ROOTFS_EXTRA_SPACE = "16777216"<br/>&gt; <br/>&gt; # Systemd enable<br/>&gt; DISTRO_FEATURES:append = " systemd"<br/>&gt; VIRTUAL-RUNTIME_init_manager = "systemd"<br/>&gt; DISTRO_FEATURES_BACKFILL_CONSIDERED = "sysvinit"<br/>&gt; VIRTUAL-RUNTIME_initscripts = ""<br/>&gt; <br/>&gt; # Extra Users<br/>&gt; DISTRO_FEATURES:append = " pam"<br/>&gt; IMAGE_INSTALL:append = " extra-sudo"<br/>&gt; IMAGE_INSTALL:append = " extra-user"<br/>&gt; <br/>&gt; # Image features<br/>&gt; IMAGE_FEATURES:append = " hwcodecs bash-completion-pkgs"<br/>&gt; <br/>&gt; # Kernel Modules All<br/>&gt; # IMAGE_INSTALL:append = " kernel-modules"<br/>&gt; # IMAGE_INSTALL:append = " linux-firmware"<br/>&gt; <br/>&gt; # OpenGL<br/>&gt; DISTRO_FEATURES:append = " opengl"<br/>&gt; <br/>&gt; # Dev Tools<br/>&gt; IMAGE_FEATURES:append = " tools-debug"<br/>&gt; EXTRA_IMAGE_FEATURES:append = " ssh-server-openssh"<br/>&gt; <br/>&gt; # Virtualization<br/>&gt; DISTRO_FEATURES:append = " virtualization"<br/>&gt; IMAGE_INSTALL:append = " docker-ce"<br/>&gt; IMAGE_INSTALL:append = " python3-docker-compose"<br/>&gt; IMAGE_INSTALL:append = " python3-distutils"<br/>&gt; <br/>&gt; # Network manager<br/>&gt; IMAGE_INSTALL:append = " wpa-supplicant"<br/>&gt; IMAGE_INSTALL:append = " networkmanager" <br/>&gt; IMAGE_INSTALL:append = " modemmanager"<br/>&gt; IMAGE_INSTALL:append = " networkmanager-nmcli"<br/>&gt; IMAGE_INSTALL:append = " networkmanager-nmtui"<br/>&gt; <br/>&gt; # USB Camera<br/>&gt; IMAGE_INSTALL:append = " kernel-module-uvcvideo"<br/>&gt; IMAGE_INSTALL:append = " v4l-utils"<br/>&gt; <br/>&gt; # RPi<br/>&gt; ENABLE_UART = "1"<br/>&gt; <br/>&gt; # Date Time Daemon<br/>&gt; # IMAGE_INSTALL:append = " ntpdate"<br/>&gt; <br/>&gt; # Tools<br/>&gt; IMAGE_INSTALL:append = " git"<br/>&gt; IMAGE_INSTALL:append = " curl"<br/>&gt; IMAGE_INSTALL:append = " wget"<br/>&gt; IMAGE_INSTALL:append = " rsync"<br/>&gt; IMAGE_INSTALL:append = " sudo"<br/>&gt; IMAGE_INSTALL:append = " nano"<br/>&gt; IMAGE_INSTALL:append = " socat"<br/>&gt; IMAGE_INSTALL:append = " tzdata"<br/>&gt; IMAGE_INSTALL:append = " e2fsprogs-resize2fs gptfdisk parted util-linux udev"<br/>&gt; <br/>&gt; # VS Code reqs<br/>&gt; IMAGE_INSTALL:append = " ldd"<br/>&gt; IMAGE_INSTALL:append = " glibc"<br/>&gt; IMAGE_INSTALL:append = " libstdc++"</span></pre><p id="51fc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ç°åœ¨åªéœ€é”®å…¥ä»¥ä¸‹å‘½ä»¤ï¼Œç„¶åä½ éœ€è¦ç­‰å¾…ç›¸å½“é•¿çš„æ—¶é—´æ¥è·å¾—ç›®æ ‡å›¾åƒã€‚</p><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="82c6" class="nd kx iq mz b gy ne nf l ng nh">$ bitbake core-image-base</span></pre><h1 id="c46a" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">é—ªçƒå›¾åƒ</h1><p id="8f16" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">æ‚¨ä¼šå‘ç°è¯¥æ˜ åƒçš„åç§°ä¸º<strong class="ka ir">build/tmp/deploy/images/raspberrypi 3â€“64/core-image-base-raspberrypi 3â€“64 . wic . bz2</strong>ã€‚åœ¨<strong class="ka ir"> Unix </strong>ç³»ç»Ÿä¸­ï¼Œé•œåƒå¯ä»¥æŒ‰å¦‚ä¸‹æ–¹å¼åˆ·æ–°ã€‚</p><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="08f4" class="nd kx iq mz b gy ne nf l ng nh"># Unzip image<br/>$ bzip2 -d -f ./core-image-base-raspberrypi3-64.wic.bz2<br/><br/># Flash to SD Card<br/># Here you need to change sdX with your SD Card reader device.<br/>$ sudo dd if=./core-image-base-raspberrypi3.wic of=/dev/sdX bs=1m</span></pre><h1 id="bf61" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">ç¬¬ä¸€è½®</h1><p id="4268" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">æœ€åï¼Œä½ æœ‰ä¸€ä¸ªSDå¡æœ‰<strong class="ka ir">rpi 3â€“64ä½æ“ä½œç³»ç»Ÿ</strong>å›¾åƒã€‚åªéœ€æ’å…¥æ‚¨çš„<strong class="ka ir"> RPI3 </strong>ï¼Œç„¶åé€šç”µã€‚å¦‚æœæ‚¨å·²ç»çŸ¥é“æ‚¨çš„RPI IPåœ°å€ï¼Œæ‚¨å¯ä»¥é€šè¿‡SSHæ§åˆ¶å°ä»¥rootç”¨æˆ·èº«ä»½ç™»å½•ï¼Œæ— éœ€å¯†ç ï¼Œæˆ–è€…ä½¿ç”¨é»˜è®¤å¯†ç <strong class="ka ir"> 1200 </strong>ä¸ç”¨æˆ·<strong class="ka ir"> ierturk </strong>ç™»å½•ã€‚é¦–æ¬¡ç™»å½•æ—¶ï¼Œç³»ç»Ÿè¯·æ±‚æ›´æ”¹ç”¨æˆ·<strong class="ka ir">ä¼Šå°”å›¾å°”å…‹</strong>çš„å¯†ç ã€‚è¿™ä¸ªç”¨æˆ·ä¹Ÿæ˜¯ä¸€ä¸ªsudoç”¨æˆ·ã€‚</p><h1 id="c364" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">é¢å¤–è°ƒæ•´</h1><p id="648a" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">ä¸ºäº†ä¿æŒå›¾åƒå°ºå¯¸æ›´å°å¹¶é€‚åˆä»»ä½•SDå¡ï¼Œæ ¹æ–‡ä»¶ç³»ç»Ÿè¢«ä¿æŒå¾—å°½å¯èƒ½å°ã€‚ç°åœ¨å®ƒéœ€è¦æ‰©å±•å¦‚ä¸‹ã€‚</p><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="a4a0" class="nd kx iq mz b gy ne nf l ng nh"># login as root user over SSH<br/>$ ssh root@ip_address_of_the_rpi<br/><br/># following command list your memory blocks<br/>$ lsblk<br/>NAME        MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS<br/>mmcblk0     179:0    0  XXXG  0 disk <br/>|-mmcblk0p1 179:1    0 69.1M  0 part /boot<br/>`-mmcblk0p2 179:2    0   XXG  0 part /<br/><br/># here mmcblk0p2 needs to be expanded to its max<br/>$ parted /dev/mmcblk0 resizepart 2 100%<br/>$ resize2fs /dev/mmcblk0p2<br/><br/># then it looks like as follow<br/>$ lsblk<br/>NAME        MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS<br/>mmcblk0     179:0    0 29.1G  0 disk <br/>|-mmcblk0p1 179:1    0 69.1M  0 part /boot<br/>`-mmcblk0p2 179:2    0   29G  0 part /</span></pre><p id="a572" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æœ€åä¸€åˆ‡éƒ½å¥½äº†ã€‚ç°åœ¨è¾“å…¥ä¸‹é¢çš„å‘½ä»¤æ¥æµ‹è¯•ä½ çš„Dockerå®‰è£…</p><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="5e1d" class="nd kx iq mz b gy ne nf l ng nh">$ docker info<br/>Client:<br/> Context:    default<br/> Debug Mode: false<br/><br/>Server:<br/> Containers: 0<br/>  Running: 0<br/>  Paused: 0<br/>  Stopped: 0<br/> Images: 2<br/> Server Version: 20.10.12-ce<br/> Storage Driver: overlay2<br/>  Backing Filesystem: extfs<br/>  Supports d_type: true<br/>  Native Overlay Diff: true<br/>  userxattr: false<br/> Logging Driver: json-file<br/> Cgroup Driver: cgroupfs<br/> Cgroup Version: 1<br/> Plugins:<br/>  Volume: local<br/>  Network: bridge host ipvlan macvlan null overlay<br/>  Log: awslogs fluentd gcplogs gelf journald json-file local logentries splunk syslog<br/> Swarm: inactive<br/> Runtimes: io.containerd.runc.v2 io.containerd.runtime.v1.linux runc<br/> Default Runtime: runc<br/> Init Binary: docker-init<br/> containerd version: d12516713c315ea9e651eb1df89cf32ff7c8137c.m<br/> runc version: v1.1.2-9-gb507e2da-dirty<br/> init version: b9f42a0-dirty<br/> Kernel Version: 5.15.34-v8<br/> Operating System: Poky (Yocto Project Reference Distro) 4.0.2 (kirkstone)<br/> OSType: linux<br/> Architecture: aarch64<br/> CPUs: 4<br/> Total Memory: 909MiB<br/> Name: raspberrypi3-64<br/> ID: SKCZ:5JOV:CLCE:ECSC:UJ46:VGCH:YAFW:TNOF:J3FN:WO26:FHIO:BHRR<br/> Docker Root Dir: /var/lib/docker<br/> Debug Mode: false<br/> Registry: https://index.docker.io/v1/<br/> Labels:<br/> Experimental: false<br/> Insecure Registries:<br/>  127.0.0.0/8<br/> Live Restore Enabled: false<br/><br/>WARNING: No memory limit support<br/>WARNING: No swap limit support<br/>WARNING: No kernel memory TCP limit support<br/>WARNING: No oom kill disable support<br/>WARNING: No blkio throttle.read_bps_device support<br/>WARNING: No blkio throttle.write_bps_device support<br/>WARNING: No blkio throttle.read_iops_device support<br/>WARNING: No blkio throttle.write_iops_device support</span></pre><p id="2ac9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ç°åœ¨æˆ‘ä»¬æœ‰äº†ä¸€ä¸ªæ²¡æœ‰ä»»ä½•<strong class="ka ir">æ¡Œé¢</strong>çš„åŸºç¡€ç³»ç»Ÿæ¥ä½¿ç”¨<strong class="ka ir"> Docker </strong>å¼€å‘åº”ç”¨ã€‚</p><h1 id="6403" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">ä½¿ç”¨Dockerå®¹å™¨å’ŒDocker Composeå¼€å‘ä¸€ä¸ªç®€å•çš„æ¡å½¢ç é˜…è¯»å™¨åº”ç”¨ç¨‹åºï¼Œæ— éœ€ä¿®æ”¹åŸºç¡€ç³»ç»Ÿ</h1><p id="4a68" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">æˆ‘ä»¬å°†ä½¿ç”¨ä¸¤ä¸ªDockerå®¹å™¨ï¼Œå¦‚ä¸‹æ‰€ç¤º</p><ul class=""><li id="62de" class="mg mh iq ka b kb kc kf kg kj mi kn mj kr mk kv ml mm mn mo bi translated">VNCæ”¯æŒçš„çª—å£ç®¡ç†å™¨ä½œä¸ºwaylandæœåŠ¡å™¨</li><li id="403b" class="mg mh iq ka b kb mp kf mq kj mr kn ms kr mt kv ml mm mn mo bi translated">ä½œä¸ºwaylandå®¢æˆ·ç«¯çš„åº”ç”¨æœåŠ¡å™¨</li></ul><p id="7058" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ç°åœ¨æˆ‘ä»¬éœ€è¦å»ºé€ å®ƒä»¬ã€‚ä¸ºæ­¤ï¼Œå¯ä»¥ä½¿ç”¨<strong class="ka ir"> Docker build </strong>åœ¨æœ¬åœ°æ„å»ºå®¹å™¨æ˜ åƒï¼Œæˆ–è€…ä½¿ç”¨<strong class="ka ir">Docker buildx</strong>æ„å»ºå¤šä¸ªæ¶æ„ã€‚</p><p id="004c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†éµå¾ªå¦ä¸€ç§æ„å»ºå®¹å™¨çš„æ–¹æ³•ã€‚æˆ‘ä»¬å°†ä½¿ç”¨<strong class="ka ir"> GitHub </strong>åŠ¨ä½œæ¥æ„å»ºå®¹å™¨å¹¶å°†å®ƒä»¬ä½œä¸ºCI/CDè‡ªåŠ¨æ¨é€åˆ°HubDockerã€‚æˆ‘ä»¬éœ€è¦ä¸€ä¸ªåä¸º<strong class="ka ir"> Dockerfile </strong>çš„é…æ–¹æ–‡ä»¶æ¥æ„å»ºå®¹å™¨æ˜ åƒã€‚è¿™é‡Œçš„<strong class="ka ir"> Alpine Linux </strong>ç”¨äºå®¹å™¨ä»¥è·å¾—æ›´å°çš„å®¹å™¨æ˜ åƒã€‚ä¸‹é¢çš„dockeræ–‡ä»¶ç”¨äºåŒ…å«æ”¯æŒVNCçš„windows manager SwayWm(ä¸€ä¸ªwaylandåˆæˆå™¨)çš„å®¹å™¨ã€‚å®ƒçœ‹èµ·æ¥å°±åƒä¸€ä¸ªbashè„šæœ¬ã€‚</p><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="8979" class="nd kx iq mz b gy ne nf l ng nh"># Dockerfile SwayWM<br/>ARG ALPINE_VERSION=3.16<br/>FROM alpine:${ALPINE_VERSION}<br/><br/>ENV USER="vnc-user" \<br/>    APK_ADD="mesa-dri-swrast openssl socat sway xkeyboard-config" \<br/>    APK_DEL="bash curl" \<br/>    VNC_LISTEN_ADDRESS="0.0.0.0" \<br/>    VNC_AUTH_ENABLE="false" \<br/>    VNC_KEYFILE="key.pem" \<br/>    VNC_CERT="cert.pem" \<br/>    VNC_PASS="$(pwgen -yns 8 1)"<br/><br/>RUN apk update \<br/>    &amp;&amp; apk upgrade<br/><br/># Add packages<br/>RUN apk add --no-cache $APK_ADD<br/><br/># Add fonts<br/>RUN apk add --no-cache msttcorefonts-installer fontconfig \<br/>    &amp;&amp; update-ms-fonts<br/><br/># Add application user<br/>RUN addgroup -g 1000 $USER &amp;&amp; adduser -u 1000 -G $USER -h /home/$USER -D $USER<br/><br/># Iinstall vnc packages<br/>RUN apk add --no-cache wayvnc neatvnc<br/><br/># Copy sway config<br/>COPY assets/swayvnc/config /etc/sway/config<br/>COPY assets/swayvnc/kms.conf /etc/kms.conf<br/><br/># Add wayvnc to compositor startup and put IPC on the network<br/>RUN mkdir /etc/sway/config.d \<br/>    &amp;&amp; echo "exec wayvnc 0.0.0.0 5900" &gt;&gt; /etc/sway/config.d/exec \<br/>    &amp;&amp; echo "exec \"socat TCP-LISTEN:7023,fork UNIX-CONNECT:/run/user/1000/sway-ipc.sock\"" &gt;&gt; /etc/sway/config.d/exec \<br/>    &amp;&amp; mkdir -p /home/$USER/.config/wayvnc/ \<br/>    &amp;&amp; printf "\<br/>address=$VNC_LISTEN_ADDRESS\n\<br/>enable_auth=$VNC_AUTH_ENABLE\n\<br/>username=$USER\n\<br/>password=$VNC_PASS\n\<br/>private_key_file=/home/$USER/$VNC_KEYFILE\n\<br/>certificate_file=/home/$USER/$VNC_CERT" &gt; /home/$USER/.config/wayvnc/config<br/><br/># Generate certificates vor VNC<br/>RUN openssl req -x509 -newkey rsa:4096 -sha256 -days 3650 -nodes \<br/>	-keyout key.pem -out cert.pem -subj /CN=localhost \<br/>	-addext subjectAltName=DNS:localhost,DNS:localhost,IP:127.0.0.1<br/><br/># Add entrypoint<br/>USER $USER<br/>COPY assets/swayvnc/entrypoint.sh /<br/>ENTRYPOINT ["/entrypoint.sh"]</span></pre><p id="451b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ä»¥ä¸‹YMLæ–‡ä»¶ç”¨äºGithubæ“ä½œã€‚æœ‰äº†è¿™äº›æ–‡ä»¶ï¼Œä½ å°±å¯ä»¥åœ¨DockerHubä¸Šå¾—åˆ°ä¸‰ç§æ¶æ„(linux/amd64ï¼Œlinux/arm64ï¼Œlinux/arm/v7)çš„Dockarå®¹å™¨é•œåƒã€‚</p><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="27d1" class="nd kx iq mz b gy ne nf l ng nh">name: Alpine SwayVnc<br/><br/>on:<br/>  push:<br/>    branches:<br/>      - master<br/><br/>jobs:<br/>  docker:<br/>    runs-on: ubuntu-latest<br/>    steps:<br/>      -<br/>        name: Checkout<br/>        uses: actions/checkout@v3<br/>      -<br/>        name: Docker meta<br/>        id: meta<br/>        uses: docker/metadata-action@v4<br/>        with:<br/>          images: |<br/>            ierturk/alpine-swayvnc<br/>          tags: |<br/>            type=raw,value={{date 'YYYYMMDD-hhmm'}}<br/>      -<br/>        name: Set up QEMU<br/>        uses: docker/setup-qemu-action@v2<br/>      -<br/>        name: Set up Docker Buildx<br/>        uses: docker/setup-buildx-action@v2<br/>      -<br/>        name: Login to DockerHub<br/>        uses: docker/login-action@v2<br/>        with:<br/>          username: ${{ secrets.DOCKER_HUB_USERNAME }}<br/>          password: ${{ secrets.DOCKER_HUB_ACCESS_TOKEN }}<br/>      -<br/>        name: Build and push<br/>        uses: docker/build-push-action@v3<br/>        with:<br/>          context: ./Alpine<br/>          file: ./Alpine/swayvnc.Dockerfile<br/>          platforms: linux/amd64, linux/arm64, linux/arm/v7<br/>          push: true<br/>          tags: ${{ steps.meta.outputs.tags }}, ierturk/alpine-swayvnc:latest<br/>          labels: ${{ steps.meta.outputs.labels }}<br/>          cache-from: type=registry,ref=ierturk/alpine-swayvnc:latest<br/>          cache-to: type=inline<br/>      -<br/>        name: Image digest<br/>        run: echo ${{ steps.docker_build.outputs.digest }}</span></pre><p id="16ba" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æ‰€æœ‰èµ„æ–™éƒ½å¯ä»¥åœ¨ç›¸å…³çš„GitHub repoä¸Šæ‰¾åˆ°ã€‚æ‰€æœ‰éœ€è¦çš„å®¹å™¨ä¹Ÿå°†è¢«æ„å»ºï¼Œç„¶åç”±è¿™ä¸ªrepoä½¿ç”¨GitHubåŠ¨ä½œæ¥æ¨é€ã€‚ç°åœ¨ï¼Œé›†è£…ç®±å·²å‡†å¤‡å¥½åœ¨<strong class="ka ir">ç å¤´</strong>ä¸Šä½¿ç”¨ã€‚ç°åœ¨å¯ä»¥è¾“å…¥ä¸‹é¢çš„ä»£ç æ¥è¿è¡Œå®¹å™¨ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡ä¸€ä¸ª<strong class="ka ir"> VNCæµè§ˆå™¨</strong>è¿æ¥åˆ°<strong class="ka ir">æ¡Œé¢SwayWM </strong>ã€‚</p><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="a81c" class="nd kx iq mz b gy ne nf l ng nh">$ export LISTEN_ADDRESS="0.0.0.0"; docker run -e XDG_RUNTIME_DIR=/tmp \<br/>             -e WLR_BACKENDS=headless \<br/>             -e WLR_LIBINPUT_NO_DEVICES=1 \<br/>             -e SWAYSOCK=/tmp/sway-ipc.sock<br/>             -p${LISTEN_ADDRESS}:5900:5900 \<br/>             -p${LISTEN_ADDRESS}:7023:7023 ierturk/alpine-swayvnc</span></pre><p id="1a3c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ç„¶åä½ ä¼šç¬¬ä¸€æ¬¡çœ‹åˆ°ä½ çš„æ¡Œé¢ã€‚è¿™ä¸æ˜¯ä¸€ä¸ªæ™®é€šçš„æ¡Œé¢ï¼Œè€Œæ˜¯ä¸€ä¸ªè½»é‡çº§çš„ã€‚</p><figure class="mu mv mw mx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ni"><img src="../Images/b89559a616b56b7ab1f827eb54f5965a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*59s-bxiNB_KU0NdU.png"/></div></div></figure><p id="e5a9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ç„¶è€Œï¼Œé€šè¿‡é”®å…¥ä¸€ä¸ªé•¿å‘½ä»¤è¡Œæ¥å¯åŠ¨å®¹å™¨å¹¶ä¸æ˜¯ä¸€ç§æ­£ç¡®çš„æ–¹å¼ã€‚å¹¸è¿çš„æ˜¯ï¼Œæœ‰å¦ä¸€ä¸ªå·¥å…·å¯ä»¥æ›´æ–¹ä¾¿åœ°åšåˆ°è¿™ä¸€ç‚¹ã€‚æˆ‘ä»¬å°†é€šè¿‡ä½¿ç”¨å·¥å…·<strong class="ka ir"> Docker-Compose </strong>æ¥è¿è¡Œå®¹å™¨ã€‚Docker-Composeä½¿ç”¨ä¸€ä¸ªYMLæ–‡ä»¶æ¥è¿è¡Œå®¹å™¨ã€‚è¿™æ˜¯ä¸€æ¬¡è¿è¡Œå¤šä¸ªå®¹å™¨çš„å¦ä¸€ä¸ªæ–¹æ³•ã€‚å®ƒçœ‹èµ·æ¥åƒå¦‚ä¸‹</p><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="df20" class="nd kx iq mz b gy ne nf l ng nh">version: '2.4'<br/><br/>services:<br/>  swayvnc:<br/>    image: ierturk/alpine-swayvnc:latest<br/>    volumes:<br/>      - type: bind<br/>        source: /tmp<br/>        target: /tmp<br/>      - type: bind<br/>        source: /run/user/1000<br/>        target: /run/user/1000<br/>      - type: bind<br/>        source: /dev<br/>        target: /dev<br/>      - type: bind<br/>        source: /run/udev<br/>        target: /run/udev<br/>      - type: bind<br/>        source: ../..<br/>        target: /workspace<br/>    cap_add:<br/>      - CAP_SYS_TTY_CONFIG<br/>    # Add device access rights through cgroup...<br/>    device_cgroup_rules:<br/>      # ... for tty0<br/>      - 'c 4:0 rmw'<br/>      # ... for tty7<br/>      - 'c 4:7 rmw'<br/>      # ... for /dev/input devices<br/>      - 'c 13:* rmw'<br/>      - 'c 199:* rmw'<br/>      # ... for /dev/dri devices<br/>      - 'c 226:* rmw'<br/>      - 'c 81:* rmw'<br/>    entrypoint: /entrypoint.sh<br/>    network_mode: host<br/>    privileged: true<br/>    environment:<br/>      - XDG_RUNTIME_DIR=/run/user/1000<br/>      - WLR_BACKENDS=headless<br/>      - WLR_LIBINPUT_NO_DEVICES=1<br/>      - SWAYSOCK=/run/user/1000/sway-ipc.sock<br/><br/>  app:<br/>    image: ierturk/alpine-dev-qt:latest<br/>    security_opt:<br/>      - seccomp:unconfined<br/>    shm_size: '256mb'<br/>    volumes:<br/>      - type: bind<br/>        source: /tmp<br/>        target: /tmp<br/>      - type: bind<br/>        source: /run/user/1000<br/>        target: /run/user/1000<br/>      - type: bind<br/>        source: /dev<br/>        target: /dev<br/>      - type: bind<br/>        source: /run/udev<br/>        target: /run/udev<br/>      - type: bind<br/>        source: ../..<br/>        target: /workspace<br/>      # - type: bind<br/>      #   source: ~/.ssh<br/>      #   target: /home/ierturk/.ssh<br/>      #   read_only: true<br/>    cap_add:<br/>      - CAP_SYS_TTY_CONFIG<br/>      - SYS_PTRACE<br/>    # Add device access rights through cgroup...<br/>    device_cgroup_rules:<br/>      # ... for tty0<br/>      - 'c 4:0 rmw'<br/>      # ... for tty7<br/>      - 'c 4:7 rmw'<br/>      # ... for /dev/input devices<br/>      - 'c 13:* rmw'<br/>      - 'c 199:* rmw'<br/>      # ... for /dev/dri devices<br/>      - 'c 226:* rmw'<br/>      - 'c 81:* rmw'<br/>    stdin_open: true<br/>    tty: true<br/>    network_mode: host<br/>    privileged: true<br/>    environment:<br/>      - WAYLAND_USER=ierturk<br/>      - XDG_RUNTIME_DIR=/run/user/1000<br/>      - WAYLAND_DISPLAY=wayland-1<br/>      - DISPLAY=:0<br/>      - QT_QPA_PLATFORM=wayland<br/>      - QT_QPA_EGLFS_INTEGRATION="eglfs_kms"<br/>      - QT_QPA_EGLFS_KMS_ATOMIC="1"<br/>      - QT_QPA_EGLFS_KMS_CONFIG="/etc/kms.conf"      <br/>      - IGNORE_X_LOCKS=1<br/>      - QT_IM_MODULE=qtvirtualkeyboard<br/>    user: ierturk<br/>    working_dir: /workspace<br/>    depends_on:<br/>      - swayvnc</span></pre><p id="bdd2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">è¿™é‡Œæœ‰ä¸¤ä¸ªæœåŠ¡å®šä¹‰ã€‚å…¶ä¸­ä¸€ä¸ªç”¨äºæ˜¾ç¤ºç®¡ç†å™¨ï¼Œå¦ä¸€ä¸ªç”¨äºåº”ç”¨ç¨‹åºã€‚ç°åœ¨ï¼Œå®ƒå¯ä»¥åªæ˜¯é”®å…¥å¦‚ä¸‹çš„ä¸€åˆ‡upså’Œè¿è¡Œã€‚</p><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="33a8" class="nd kx iq mz b gy ne nf l ng nh">$ docker-compose -f Alpine/swayvnc-dc.yml up -d<br/>Creating alpine_swayvnc_1 ... done<br/>Creating alpine_app_1 ... done</span></pre><p id="7c2f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ç°åœ¨å®ƒä»¬éƒ½å·²å¯åŠ¨å¹¶è¿è¡Œï¼Œç›¸äº’è¿æ¥å¹¶è¿æ¥åˆ°åŸºç¡€ç³»ç»Ÿèµ„æºã€‚ä»ç°åœ¨å¼€å§‹ï¼Œæˆ‘ä»¬å¯ä»¥ç™»å½•åˆ°åº”ç”¨ç¨‹åºå®¹å™¨å¦‚ä¸‹</p><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="b32a" class="nd kx iq mz b gy ne nf l ng nh">$ docker exec -it alpine_app_1 ash</span></pre><p id="f034" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡Œè¿è¡Œä»»ä½•ä»»æ„åº”ç”¨ç¨‹åºï¼Œæˆ‘ä»¬å°†å°è¯•ä¸€ä¸ªæ¡å½¢ç é˜…è¯»å™¨â€” ZXing-C++ã€‚å¯¹äºç¤ºä¾‹UIï¼Œæˆ‘ä»¬å°†ä½¿ç”¨<strong class="ka ir"> OpenCV </strong>å’Œ<strong class="ka ir"> Qt5 â€” QuickControl 2 </strong> (QMLç±»å‹)å’Œä¸€ä¸ª<strong class="ka ir"> USBæ‘„åƒå¤´</strong>ã€‚æ¡å½¢ç é˜…è¯»å™¨åº“æºä»£ç å¯é€šè¿‡<strong class="ka ir"> CMake </strong>ä¸‹è½½å¹¶æ„å»ºï¼Œå¦‚ä¸‹æ‰€ç¤º</p><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="deb9" class="nd kx iq mz b gy ne nf l ng nh">$ git clone https://github.com/nu-book/zxing-cpp.git <br/># <!-- -->then go into zxing-cpp <!-- -->directory and craete a build folder <br/>$ cd zxing-cpp <br/>$ mkdir build <br/>$ cd build <br/>$ cmake .. <br/>$ make</span><span id="2e2e" class="nd kx iq mz b gy nj nf l ng nh"># then run the application <br/>$ ./example/ZXingOpenCV</span></pre><p id="2721" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æ‚¨å¯èƒ½ä¼šçœ‹åˆ°ä¸€äº›ç±»ä¼¼ä»¥ä¸‹å›¾åƒçš„å±å¹•</p><figure class="mu mv mw mx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ni"><img src="../Images/63cc2682938891f2fbab95a3dcf25cd3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*0X4-IoknHOm6fs6_.png"/></div></div></figure><figure class="mu mv mw mx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ni"><img src="../Images/c85c0c17d6a16bfea18164f33ba1e1c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*liMhj0dbnO0s6f05.png"/></div></div></figure><p id="ad48" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">å¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œæˆ‘ä»¬å¯ä»¥é€€å‡ºå®¹å™¨å‘½ä»¤è¡Œï¼Œå…³é—­æ‰€æœ‰å®¹å™¨ï¼Œå¦‚ä¸‹æ‰€ç¤º</p><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="7223" class="nd kx iq mz b gy ne nf l ng nh"># close app application <br/># just press CTRL-C <br/>$ exit <br/>$ docker-compose -f Alpine/swayvnc-dc.yml down <br/>Stopping alpine_app_1 ... done <br/>Stopping alpine_swayvnc_1 ... done <br/>Removing alpine_app_1 ... done <br/>Removing alpine_swayvnc_1 ... done</span></pre><p id="3eab" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">å› æ­¤ï¼Œä¸ä¼šç•™ä¸‹ä»»ä½•ä¸œè¥¿ï¼Œå®¹å™¨å°†è¢«åœæ­¢å’Œåˆ é™¤ã€‚</p><p id="cc43" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æœ€åè¿™æ˜¯æˆ‘çš„<strong class="ka ir"> RPI3 </strong>å¸¦<strong class="ka ir"> USBæ‘„åƒå¤´</strong>ã€‚</p><figure class="mu mv mw mx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nk"><img src="../Images/946c67c8ef767549b5990a6cf0ff506d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*i3EYVXOX48OZJp-P.jpeg"/></div></div></figure><h1 id="6491" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">ç»“è®º</h1><p id="2fcd" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">ç›´åˆ°ç°åœ¨ï¼Œæˆ‘ä»¬ä»é›¶å¼€å§‹å¼€å‘äº†æ•´ä¸ªç³»ç»Ÿã€‚ä½ å¯ä»¥çœ‹åˆ°å®ƒåœ¨å·¥ä½œã€‚ä½ å¯ä»¥åœ¨è¿™æ–¹é¢ä¸‹åŠŸå¤«ï¼Œæ ¹æ®ä½ çš„è¦æ±‚ä¿®æ”¹ä¸€äº›éƒ¨åˆ†ã€‚</p><p id="5003" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">å¸Œæœ›ä½ å–œæ¬¢è¿™ä¸ªæ•™ç¨‹ï¼Œè§‰å¾—æœ‰ç”¨ã€‚æ„Ÿè°¢æ‚¨çš„é˜…è¯»ã€‚</p><p id="ab2d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">å‘å¸ƒäº:2022å¹´8æœˆ20æ—¥é•¿åº¦:16åˆ†é’Ÿé˜…è¯»ï¼Œ3206å­—ç±»åˆ«:<a class="ae nl" href="https://erturk.me/categories/programming" rel="noopener ugc nofollow" target="_blank">ç¼–ç¨‹</a> <a class="ae nl" href="https://erturk.me/categories/engineering" rel="noopener ugc nofollow" target="_blank">å·¥ç¨‹</a>ç³»åˆ—:<a class="ae nl" href="https://erturk.me/series/getting-started" rel="noopener ugc nofollow" target="_blank">å…¥é—¨</a>æ ‡ç­¾:<a class="ae nl" href="https://erturk.me/tags/qt" rel="noopener ugc nofollow" target="_blank">qt</a>T8ã€‘yoctoT10ã€‘open embedded<a class="ae nl" href="https://erturk.me/tags/rpi" rel="noopener ugc nofollow" target="_blank">rpi</a><a class="ae nl" href="https://erturk.me/tags/docker" rel="noopener ugc nofollow" target="_blank">docker</a><a class="ae nl" href="https://erturk.me/tags/github" rel="noopener ugc nofollow" target="_blank">github</a>å‚è§:<a class="ae nl" href="https://erturk.me/blog/getting-started-qt-with-vs-code/" rel="noopener ugc nofollow" target="_blank">å…¥é—¨ä½¿ç”¨VSä»£ç å¼€å‘å®¹å™¨å¼€å‘Qtå°½å¯èƒ½ç®€å•çš„</a></p></div><div class="ab cl nm nn hu no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="ij ik il im in"><p id="de65" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mc">åŸè½½äº2022å¹´8æœˆ19æ—¥</em><a class="ae nl" href="https://erturk.me/blog/a-case-study-on-the-yocto-project/" rel="noopener ugc nofollow" target="_blank"><em class="mc">https://er Turk . me</em></a><em class="mc">ã€‚</em></p></div><div class="ab cl nm nn hu no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="ij ik il im in"><h1 id="6861" class="kw kx iq bd ky kz nt lb lc ld nu lf lg lh nv lj lk ll nw ln lo lp nx lr ls lt bi translated">åˆ†çº§ç¼–ç </h1><p id="5629" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">æ„Ÿè°¢æ‚¨æˆä¸ºæˆ‘ä»¬ç¤¾åŒºçš„ä¸€å‘˜ï¼åœ¨ä½ ç¦»å¼€ä¹‹å‰:</p><ul class=""><li id="bca9" class="mg mh iq ka b kb kc kf kg kj mi kn mj kr mk kv ml mm mn mo bi translated">ğŸ‘ä¸ºæ•…äº‹é¼“æŒï¼Œè·Ÿç€ä½œè€…èµ°ğŸ‘‰</li><li id="44d7" class="mg mh iq ka b kb mp kf mq kj mr kn ms kr mt kv ml mm mn mo bi translated">ğŸ“°æŸ¥çœ‹<a class="ae nl" href="https://levelup.gitconnected.com/?utm_source=pub&amp;utm_medium=post" rel="noopener ugc nofollow" target="_blank">å‡çº§ç¼–ç å‡ºç‰ˆç‰©</a>ä¸­çš„æ›´å¤šå†…å®¹</li><li id="3050" class="mg mh iq ka b kb mp kf mq kj mr kn ms kr mt kv ml mm mn mo bi translated">ğŸ””å…³æ³¨æˆ‘ä»¬:<a class="ae nl" href="https://twitter.com/gitconnected" rel="noopener ugc nofollow" target="_blank">Twitter</a>|<a class="ae nl" href="https://www.linkedin.com/company/gitconnected" rel="noopener ugc nofollow" target="_blank">LinkedIn</a>|<a class="ae nl" href="https://newsletter.levelup.dev" rel="noopener ugc nofollow" target="_blank">æ—¶äº‹é€šè®¯</a></li></ul><p id="b764" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ğŸš€ğŸ‘‰<a class="ae nl" href="https://jobs.levelup.dev/talent/welcome?referral=true" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir">åŠ å…¥å‡çº§äººæ‰é›†ä½“ï¼Œæ‰¾åˆ°ä¸€ä»½æƒŠè‰³çš„å·¥ä½œ</strong> </a></p></div></div>    
</body>
</html>