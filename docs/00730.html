<html>
<head>
<title>Add HMR (Hot Module Reload) in an Angular CLI Project</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Angular CLI项目中添加HMR(热模块重新加载)</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/hmr-in-angular-cli-project-eb8512ef514b?source=collection_archive---------2-----------------------#2019-07-11">https://levelup.gitconnected.com/hmr-in-angular-cli-project-eb8512ef514b?source=collection_archive---------2-----------------------#2019-07-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="fd2e" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在Angular CLI项目中配置HMR(热模块重新加载)的指南</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/8b038b29aaacf77ab469c22bfe569ed4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uJro4vIEZRSQiL71XofnMQ.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@transonhoang?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">黄川</a>在<a class="ae ky" href="https://unsplash.com/@transonhoang?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="7c33" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这篇文章中，我将指导你通过使用NGXS插件将HMR添加到一个由Angular CLI设置的项目中。</p><p id="dfe0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="lv">更多类似的内容，请查看</em><a class="ae ky" href="https://betterfullstack.com/stories/" rel="noopener ugc nofollow" target="_blank">https://betterfullstack.com</a></p><h2 id="ee3e" class="lw lx it bd ly lz ma dn mb mc md dp me li mf mg mh lm mi mj mk lq ml mm mn mo bi translated">什么是HMR？</h2><p id="ef41" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li mr lk ll lm ms lo lp lq mt ls lt lu im bi translated">HMR代表热模块重装，它的另一个名字是<a class="ae ky" href="https://webpack.js.org/concepts/hot-module-replacement/" rel="noopener ugc nofollow" target="_blank">热模块更换</a>。</p><p id="1d72" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它在应用程序运行时交换、添加或删除模块，而无需重新加载整个页面。</p><p id="e4f0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这通过以下方式加快了开发过程:</p><ol class=""><li id="e828" class="mu mv it lb b lc ld lf lg li mw lm mx lq my lu mz na nb nc bi translated">保留在完全重新加载过程中丢失的应用程序状态。</li><li id="4b6f" class="mu mv it lb b lc nd lf ne li nf lm ng lq nh lu mz na nb nc bi translated">通过仅更新已更改的内容来节省宝贵的开发时间。</li><li id="499e" class="mu mv it lb b lc nd lf ne li nf lm ng lq nh lu mz na nb nc bi translated">当对源代码中的CSS/JS进行修改时，立即更新浏览器，这几乎相当于直接在浏览器的开发工具中更改样式。</li></ol><p id="77e7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了增加这个功能，我将使用<a class="ae ky" href="https://ngxs.gitbook.io/ngxs/plugins" rel="noopener ugc nofollow" target="_blank"> NGXS HMR插件</a>。</p><h2 id="2c62" class="lw lx it bd ly lz ma dn mb mc md dp me li mf mg mh lm mi mj mk lq ml mm mn mo bi translated">安装热模块重新加载</h2><p id="2826" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li mr lk ll lm ms lo lp lq mt ls lt lu im bi translated">运行<code class="fe ni nj nk nl b">npm i @ngxs/hmr-plugin @angularclass/hmr --save-dev</code>进行安装。</p><h2 id="2297" class="lw lx it bd ly lz ma dn mb mc md dp me li mf mg mh lm mi mj mk lq ml mm mn mo bi translated">添加新的环境文件</h2><p id="9294" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li mr lk ll lm ms lo lp lq mt ls lt lu im bi translated">用以下内容创建一个名为<code class="fe ni nj nk nl b">src/environments/environment.hmr.ts</code>的文件:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/f56b1757aedad8ac7a9a12d724508410.png" data-original-src="https://miro.medium.com/v2/resize:fit:772/format:webp/1*Kx67_eAgkH9ezyX4MxzTGg.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated"><code class="fe ni nj nk nl b">environment.hmr.ts</code></figcaption></figure><p id="4418" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将<code class="fe ni nj nk nl b">hmr</code>设置为<code class="fe ni nj nk nl b">true</code>，用于<code class="fe ni nj nk nl b">main.js</code>运行HMR模式。</p><h2 id="882c" class="lw lx it bd ly lz ma dn mb mc md dp me li mf mg mh lm mi mj mk lq ml mm mn mo bi translated">更新Angular.json</h2><p id="6e04" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li mr lk ll lm ms lo lp lq mt ls lt lu im bi translated">这将包括两个部分:</p><ol class=""><li id="6f2c" class="mu mv it lb b lc ld lf lg li mw lm mx lq my lu mz na nb nc bi translated">将<code class="fe ni nj nk nl b">hmr</code>添加到<code class="fe ni nj nk nl b">build.configurations</code></li><li id="ea9b" class="mu mv it lb b lc nd lf ne li nf lm ng lq nh lu mz na nb nc bi translated">将<code class="fe ni nj nk nl b">hmr</code>添加到<code class="fe ni nj nk nl b">serve.configurations</code></li></ol><p id="058d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当调用配置<code class="fe ni nj nk nl b">hmr</code>时，这将替换环境:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/26c7f427715f5e3e5218323c62ee8be0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1260/format:webp/1*-nE2EtKiLIbsmEpNBfuChw.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">将hmr添加到build.configurations</figcaption></figure><p id="4ff4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为<code class="fe ni nj nk nl b">serve</code>添加配置<code class="fe ni nj nk nl b">hmr</code>以构建上述环境:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi no"><img src="../Images/80ccafe5642703d822fdaf4e7db10009.png" data-original-src="https://miro.medium.com/v2/resize:fit:1160/format:webp/1*hrqwd-F54X0z_sDVY--zzg.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">将hmr添加到服务配置中</figcaption></figure><h2 id="76ab" class="lw lx it bd ly lz ma dn mb mc md dp me li mf mg mh lm mi mj mk lq ml mm mn mo bi translated">在package.json中添加新脚本</h2><p id="67c1" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li mr lk ll lm ms lo lp lq mt ls lt lu im bi translated">添加新脚本以服务于应用程序:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi np"><img src="../Images/60ccab64b22770dfae5f8da20b886272.png" data-original-src="https://miro.medium.com/v2/resize:fit:958/format:webp/1*9z1LHNH5LoQDXu7dOEyY9A.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">package.json</figcaption></figure><h2 id="c093" class="lw lx it bd ly lz ma dn mb mc md dp me li mf mg mh lm mi mj mk lq ml mm mn mo bi translated">更新主页面</h2><p id="4286" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li mr lk ll lm ms lo lp lq mt ls lt lu im bi translated">添加逻辑以检查<code class="fe ni nj nk nl b">hmr</code>在热模块更换模式下运行应用程序:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nq"><img src="../Images/0833048d425916c7c4489521490e76c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*caeyG8nWyaj8Hgwx7QyWIA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">主页面</figcaption></figure><p id="4d5b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您看到此错误</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nr"><img src="../Images/94b0156a3915155c8c4f00fa6383b271.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YOMhn0eCsPdr0Y-LhwSvcQ.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">无法解析“<a class="ae ky" href="http://twitter.com/angularclass/hmr" rel="noopener ugc nofollow" target="_blank"> @angularclass/hmr </a></figcaption></figure><p id="d51e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你需要安装<code class="fe ni nj nk nl b">@angularclass/hmr</code></p><h2 id="6fd7" class="lw lx it bd ly lz ma dn mb mc md dp me li mf mg mh lm mi mj mk lq ml mm mn mo bi translated">测试</h2><p id="2c0f" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li mr lk ll lm ms lo lp lq mt ls lt lu im bi translated">当通过终端中的<code class="fe ni nj nk nl b">npm run hmr</code>启动应用程序时，您可以看到:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ns"><img src="../Images/edec16574758ad9909641ce0ceae91ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*msFU3fjWxX9C96vtGppuyw.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">npm运行hmr时的终端屏幕</figcaption></figure><p id="ec76" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">更新<code class="fe ni nj nk nl b">app.component.html</code>中的一些文本，以查看控制台日志中发生的HMR:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nt"><img src="../Images/28ad5ed2b7d5b4b6d76ff1759327b8ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4nKfAATu6H6JNXcEgH0LUA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">本地主机控制台</figcaption></figure><p id="ee34" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以看到应用程序仅部分更新了相关文件。</p><blockquote class="nu nv nw"><p id="165e" class="kz la lv lb b lc ld ju le lf lg jx lh nx lj lk ll ny ln lo lp nz lr ls lt lu im bi translated">注:在<a class="ae ky" href="https://ngxs.gitbook.io/ngxs/plugins/hmr" rel="noopener ugc nofollow" target="_blank">页面hmr插件</a>上，他们通过增加类型节点提到并更新到<code class="fe ni nj nk nl b">tsconfig.app.json</code>。看来我们并不需要它来服务hmr。</p></blockquote><h2 id="84a7" class="lw lx it bd ly lz ma dn mb mc md dp me li mf mg mh lm mi mj mk lq ml mm mn mo bi translated">摘要</h2><p id="ceec" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li mr lk ll lm ms lo lp lq mt ls lt lu im bi translated">热模块重新加载是<a class="ae ky" href="https://webpack.js.org" rel="noopener ugc nofollow" target="_blank"> webpack </a>的一个重要特性，可以帮助您在实现过程中更改代码时减少加载时间。这提高了开发速度，并使构建应用程序的体验更好。</p><p id="878b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我希望这篇文章对你有用！可以跟着我上<a class="ae ky" href="https://medium.com/@transonhoang" rel="noopener">媒</a>。我也在推特上。欢迎在下面的评论中留下任何问题。我很乐意帮忙！</p><p id="0646" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在此检查源代码<a class="ae ky" href="https://github.com/hoangtranson/angular8-blp" rel="noopener ugc nofollow" target="_blank">。</a></p><h2 id="80de" class="lw lx it bd ly lz ma dn mb mc md dp me li mf mg mh lm mi mj mk lq ml mm mn mo bi translated">资源/参考资料</h2><p id="c45d" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li mr lk ll lm ms lo lp lq mt ls lt lu im bi translated">[1]:热模块更换<a class="ae ky" href="https://webpack.js.org/concepts/hot-module-replacement/" rel="noopener ugc nofollow" target="_blank">https://webpack.js.org/concepts/hot-module-replacement/</a></p><p id="88b4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">[2]:NgXS上的HMR<a class="ae ky" href="https://ngxs.gitbook.io/ngxs/plugins/hmr" rel="noopener ugc nofollow" target="_blank">https://ngxs.gitbook.io/ngxs/plugins/hmr</a></p></div><div class="ab cl oa ob hx oc" role="separator"><span class="od bw bk oe of og"/><span class="od bw bk oe of og"/><span class="od bw bk oe of"/></div><div class="im in io ip iq"><div class="kj kk kl km gt oh"><a href="https://gitconnected.com/learn/angular" rel="noopener  ugc nofollow" target="_blank"><div class="oi ab fo"><div class="oj ab ok cl cj ol"><h2 class="bd iu gy z fp om fr fs on fu fw is bi translated">学习角度-最佳角度教程(2019) | gitconnected</h2><div class="oo l"><h3 class="bd b gy z fp om fr fs on fu fw dk translated">50大角度教程-免费学习角度。课程由开发人员提交和投票，使您能够…</h3></div><div class="op l"><p class="bd b dl z fp om fr fs on fu fw dk translated">gitconnected.com</p></div></div><div class="oq l"><div class="or l os ot ou oq ov ks oh"/></div></div></a></div><div class="ow ox gp gr oy oh"><a href="https://betterfullstack.com/stories/" rel="noopener  ugc nofollow" target="_blank"><div class="oi ab fo"><div class="oj ab ok cl cj ol"><h2 class="bd iu gy z fp om fr fs on fu fw is bi translated">故事-更好的全栈</h2><div class="oo l"><h3 class="bd b gy z fp om fr fs on fu fw dk translated">所有的故事故事为我们写指南提交故事到更好的编程博客1。故事指南避免什么…</h3></div><div class="op l"><p class="bd b dl z fp om fr fs on fu fw dk translated">betterfullstack.com</p></div></div><div class="oq l"><div class="oz l os ot ou oq ov ks oh"/></div></div></a></div></div></div>    
</body>
</html>