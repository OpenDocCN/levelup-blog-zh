<html>
<head>
<title>Creating Enemy Loot</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">制造敌人的战利品</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/creating-collectables-in-unity-2-0-bad17a229399?source=collection_archive---------7-----------------------#2021-07-28">https://levelup.gitconnected.com/creating-collectables-in-unity-2-0-bad17a229399?source=collection_archive---------7-----------------------#2021-07-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="274d" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">初级游戏开发</h2><div class=""/><div class=""><h2 id="d26a" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">//敌人丢下一些战利品！</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi kr"><img src="../Images/8de5bae2425ed9c1656f5e06be7898a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1244/1*nqCfbkW2nXUYmxHw11OtlA.gif"/></div><figcaption class="kz la gj gh gi lb lc bd b be z dk translated">给我们一些应得的战利品</figcaption></figure><p id="293c" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">在之前的一篇文章中，我讨论了如何创建一个可以被游戏中的玩家收集的对象。今天我们会让我们的敌人掉落一些他们应得的战利品，让这变得更有趣一点。</p><p id="ba04" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">在Unity中创建收藏。抓住金子！|作者詹姆斯·韦斯特|技术书呆子|媒体</p><p id="e9bb" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">现在我们知道了如何创建一个收藏品，我们需要让死去的敌人扔掉它，并根据我们杀死的敌人的类型给它赋值。</p><p id="a31a" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">这将在3个不同的脚本中完成。一个新的收藏脚本，并更新了玩家和敌人的脚本。</p><p id="ee80" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated"><strong class="lf jd">新收藏的剧本</strong></p><p id="520f" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">钻石收藏的脚本将处理与玩家的冲突，并更新告诉玩家增加多少价值。</p><pre class="ks kt ku kv gt ma mb mc md aw me bi"><span id="5592" class="mf mg it mb b gy mh mi l mj mk">public class <strong class="mb jd">Diamond </strong>: MonoBehaviour<br/>{<br/>    <em class="ml">// Start is called before the first frame update<br/>    </em>private int _gemValue = 1;<br/>    private bool collected;<br/><br/>    public void SetValue(int value)<br/>    {<br/>        _gemValue = value;<br/>    }<br/>    <br/>    private void <strong class="mb jd">OnTriggerEnter2D</strong>(Collider2D other)<br/>    {<br/>        if (collected) return;<br/>        if (!other.CompareTag("PlayerController")) return;<br/>        var player = other.gameObject.GetComponent&lt;Player&gt;();<br/>        if (player == null) return;<br/>        player.AddGems(_gemValue);<br/>        collected = true;<br/>        Destroy(gameObject);<br/>    }<br/>}</span></pre><p id="dad9" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">我们首先设置变量来保存gem的值，并将其初始化为1。这将是默认值，除非我们从敌人那里覆盖它。为当前gem和冲突检测方法设置gem值的公共方法。我们使用收集的布尔值<strong class="lf jd">来防止钻石被多次收集。</strong></p><p id="f77a" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated"><strong class="lf jd">敌方脚本角色</strong></p><p id="84d3" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">敌人的脚本将处理战利品的实例化并给它赋值。我们将会看到掉落战利品的代码细节。如果你想查看完整的敌方脚本，你可以在GitHub上查看</p><div class="mm mn gp gr mo mp"><a href="https://github.com/Valdarix/AndroidDungeonCert/blob/master/Assets/Scripts/Enemy.meta" rel="noopener  ugc nofollow" target="_blank"><div class="mq ab fo"><div class="mr ab ms cl cj mt"><h2 class="bd jd gy z fp mu fr fs mv fu fw jc bi translated">AndroidDungeonCert/enemy . meta at master Valdarix/AndroidDungeonCert</h2><div class="mw l"><h3 class="bd b gy z fp mu fr fs mv fu fw dk translated">在GitHub上创建一个帐户，为Valdarix/AndroidDungeonCert的开发做出贡献。</h3></div><div class="mx l"><p class="bd b dl z fp mu fr fs mv fu fw dk translated">github.com</p></div></div><div class="my l"><div class="mz l na nb nc my nd kx mp"/></div></div></a></div><pre class="ks kt ku kv gt ma mb mc md aw me bi"><span id="0af0" class="mf mg it mb b gy mh mi l mj mk">[SerializeField] private GameObject <strong class="mb jd">_gemObject</strong>;<br/>[SerializeField] protected int <strong class="mb jd">gemValue</strong>;</span></pre><p id="aff6" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">我们添加的第一件事是一个变量来保存对可收集的预置的引用。它也有一个变量来保存分配给敌人战利品的值。</p><p id="3206" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">在处理敌人死亡的<strong class="lf jd"> Damage() </strong>方法中，我们添加了下面的代码。</p><pre class="ks kt ku kv gt ma mb mc md aw me bi"><span id="aaf7" class="mf mg it mb b gy mh mi l mj mk">var instantiationPoint = sprite.transform;<br/>var gem = Instantiate(_gemObject, instantiationPoint.position, Quaternion.identity);<br/>gem.gameObject.GetComponent&lt;Diamond&gt;().SetValue(gemValue);</span></pre><p id="e277" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">这段代码在他死后实例化gem，然后将敌方脚本的gemValue赋给新创建的gem。这是当玩家收集到它时将会增加的价值。</p><p id="b935" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated"><strong class="lf jd">玩家脚本角色</strong></p><p id="4302" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">玩家有最简单的工作，它更新玩家拥有的宝石总数。</p><pre class="ks kt ku kv gt ma mb mc md aw me bi"><span id="9c7d" class="mf mg it mb b gy mh mi l mj mk">public void AddGems(int value)<br/>{<br/>    _gems += value;<br/>}</span></pre><p id="91e5" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">这是通过播放器脚本中的一个新方法完成的。当玩家收集到一个宝石时，它调用<strong class="lf jd"> AddGems() </strong>从敌人那里获得指定值。</p><p id="e360" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated"><strong class="lf jd">结论</strong></p><p id="df20" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">有了这个，我们现在可以有一个战利品系统，敌人可以掉落一个物品让玩家收集。我们可以通过在一个更复杂的系统中创建战利品表来进一步扩展。</p></div></div>    
</body>
</html>