<html>
<head>
<title>How to stop using text and make your discord bot look better</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何停止使用文本，让你的不和谐机器人看起来更好</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-make-your-discord-bots-ui-more-interesting-77a807e0baa4?source=collection_archive---------1-----------------------#2022-07-16">https://levelup.gitconnected.com/how-to-make-your-discord-bots-ui-more-interesting-77a807e0baa4?source=collection_archive---------1-----------------------#2022-07-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/0cfd5c109b067cd72552f173110ce493.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZxsBtdUkJEHGk9xBPjB6EQ.png"/></div></div></figure><p id="5fa7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你的discord机器人是一个个人机器人或者只有几个功能，那么它的纯文本用户界面就很好。但是如果你计划扩大规模，拥有更多用户，你需要一个更好的用户界面。</p><h2 id="b690" class="kx ky iq bd kz la lb dn lc ld le dp lf kj lg lh li kn lj lk ll kr lm ln lo lp bi translated">那么你是怎么做到的呢？</h2><p id="6117" class="pw-post-body-paragraph jy jz iq ka b kb lq kd ke kf lr kh ki kj ls kl km kn lt kp kq kr lu kt ku kv ij bi translated">有很多方法可以让你的机器人看起来更好。以下是一些例子:</p><ul class=""><li id="bdc6" class="lv lw iq ka b kb kc kf kg kj lx kn ly kr lz kv ma mb mc md bi translated">自定义表情符号</li><li id="bfe6" class="lv lw iq ka b kb me kf mf kj mg kn mh kr mi kv ma mb mc md bi translated">使...嵌入</li><li id="bfb9" class="lv lw iq ka b kb me kf mf kj mg kn mh kr mi kv ma mb mc md bi translated">图像处理</li></ul><h2 id="030a" class="kx ky iq bd kz la lb dn lc ld le dp lf kj lg lh li kn lj lk ll kr lm ln lo lp bi translated">自定义表情符号</h2><p id="1698" class="pw-post-body-paragraph jy jz iq ka b kb lq kd ke kf lr kh ki kj ls kl km kn lt kp kq kr lu kt ku kv ij bi translated">图像比文字更能表达感情——这就是表情符号如今如此流行的原因。积极使用表情符号可以让你更讨人喜欢，给你更多的可信度。</p><p id="745f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">关于Discord机器人，有一件事你可能不知道:他们可以访问他们所在的每一台服务器的每一个自定义表情符号，而且是免费的。在这一部分，我将解释如何给你的机器人添加自定义表情符号。</p><p id="5ec2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你可以从两个地方获得表情符号:客户端和公会。<code class="fe mj mk ml mm b">client.emojis.cache</code>是客户端可以访问的每个表情符号的集合，而<code class="fe mj mk ml mm b">guild.emojis.cache</code>是特定公会的表情符号的集合。</p><pre class="mn mo mp mq gt mr mm ms mt aw mu bi"><span id="bd5e" class="kx ky iq mm b gy mv mw l mx my">client.emojis.cache.get("&lt;emoji_id&gt;"); //Get emoji from the client<br/>guild.emojis.cache.get("&lt;emoji_id&gt;"); //Get emoji from a guild</span></pre><p id="22b0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">要输出表情符号，你必须使用<code class="fe mj mk ml mm b">&lt;emoji&gt;.toString()</code>方法，将它转换成正确的格式。您还可以使用连接和模板文字来稍微简化您的工作:</p><pre class="mn mo mp mq gt mr mm ms mt aw mu bi"><span id="8af7" class="kx ky iq mm b gy mv mw l mx my">client.on("message", message =&gt; {<br/>    if(message.content !== "vibe") return;<br/>    const emoji = client.emojis.cache.find(e =&gt; e.name === "vibefish"); // Get emoji with the name "vibefish"<br/>    message.reply(`${emoji}`); // Reply with emoji<br/>    message.react(emoji.id); // React with emoji(Must use ID)<br/>});</span></pre><p id="45e3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">请注意，您需要启用<code class="fe mj mk ml mm b">GUILD_EMOJIS_AND_STICKERS</code>意图，这样才能工作。</p><h2 id="75d5" class="kx ky iq bd kz la lb dn lc ld le dp lf kj lg lh li kn lj lk ll kr lm ln lo lp bi translated">使...嵌入</h2><p id="dbeb" class="pw-post-body-paragraph jy jz iq ka b kb lq kd ke kf lr kh ki kj ls kl km kn lt kp kq kr lu kt ku kv ij bi translated">你可能以前见过它们——它们很流行，是有原因的。</p><p id="22b4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">嵌入是使你的输出看起来比简单的文本更好的一种好方法。通过嵌入，您可以显示标题、缩略图、时间戳等等。</p><p id="1103" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在这一节中，我将向您展示如何轻松地设计嵌入消息并将它们附加到您的bot。</p><p id="8fda" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你可以使用Discord.js <code class="fe mj mk ml mm b">MessageEmbed()</code>类创建新的嵌入:</p><pre class="mn mo mp mq gt mr mm ms mt aw mu bi"><span id="77d7" class="kx ky iq mm b gy mv mw l mx my">const discord = require(“discord.js”);</span><span id="4780" class="kx ky iq mm b gy mz mw l mx my">const embed = new discord.MessageEmbed();</span></pre><p id="1b9f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您可以使用以下方法向嵌入内容添加信息:</p><pre class="mn mo mp mq gt mr mm ms mt aw mu bi"><span id="a1c7" class="kx ky iq mm b gy mv mw l mx my">const embed = new MessageEmbed().setTitle("My Embed").setDescription("This is a description").addField("Field name", "fieldValue").setColor("#00ff00").setThumbnail(message.author.avatarURL());</span><span id="0005" class="kx ky iq mm b gy mz mw l mx my">message.reply({embeds: [embed]}); //Send an embed</span></pre><figure class="mn mo mp mq gt jr gh gi paragraph-image"><div class="gh gi na"><img src="../Images/1f28fbdebbede1dd702c00058874a63d.png" data-original-src="https://miro.medium.com/v2/resize:fit:492/format:webp/1*xEEQLTO_feJxqfbc_n8ing.png"/></div></figure><p id="3c11" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你发现使用代码很难嵌入，你可以使用<a class="ae nb" href="https://autocode.com/tools/discord/embed-builder/" rel="noopener ugc nofollow" target="_blank">这个很棒的嵌入构建工具</a>。有了它，你可以实时创建和查看你的嵌入！</p><figure class="mn mo mp mq gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nc"><img src="../Images/242ba36d60eadb9f79c59aaf1852ea40.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RSakxCGXp5CXjE1C4SBSHA.png"/></div></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk translated">完成后，只需点击页面底部的“复制代码”按钮即可复制代码！</figcaption></figure><h2 id="0d0e" class="kx ky iq bd kz la lb dn lc ld le dp lf kj lg lh li kn lj lk ll kr lm ln lo lp bi translated">图像处理</h2><p id="569c" class="pw-post-body-paragraph jy jz iq ka b kb lq kd ke kf lr kh ki kj ls kl km kn lt kp kq kr lu kt ku kv ij bi translated">不要误解我的意思，嵌入是很酷的，但是它们有一点局限性。除了添加文本和图像，你不能对它们做太多。</p><p id="a5e0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你想要的不仅仅是文本，我建议使用图像处理。这有点困难，需要更多的编码经验，但这是完全值得的。</p><p id="d565" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">假设我有一个输出给定位置天气的机器人:</p><figure class="mn mo mp mq gt jr gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/a862f715f89c3c9b03be756f1dc1e6e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1050/format:webp/1*_L61o49pXR9mjJFiJDiCvQ.png"/></div></figure><p id="344d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这很好，但是可能有成千上万个这样的命令。我想要不同的东西。</p><p id="4587" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">第一步是为你的语言找到一个图像处理库。在我的例子中，我将使用<a class="ae nb" href="https://sharp.pixelplumbing.com" rel="noopener ugc nofollow" target="_blank"> sharp </a>:</p><pre class="mn mo mp mq gt mr mm ms mt aw mu bi"><span id="8496" class="kx ky iq mm b gy mv mw l mx my"><strong class="mm ir">npm</strong> install sharp</span></pre><p id="d4c8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">之后，我将创建一个命令，该命令创建我想要的图像并将其发送给用户。不幸的是，Discord不支持SVGs，所以我必须将图像转换为PNG或JPEG:</p><pre class="mn mo mp mq gt mr mm ms mt aw mu bi"><span id="f596" class="kx ky iq mm b gy mv mw l mx my">const sharp = require("sharp");</span><span id="24f4" class="kx ky iq mm b gy mz mw l mx my">let image = `&lt;svg&gt;...&lt;/svg&gt;`; //Template too big</span><span id="ec44" class="kx ky iq mm b gy mz mw l mx my">//Write svg file with the image template string above<br/>fs.writeFileSync(`${process.cwd()}/image.svg`, image);</span><span id="9016" class="kx ky iq mm b gy mz mw l mx my">//Convert created image into a PNG and save it to "image.png"<br/>await sharp(`${process.cwd()}/image.svg`).png().toFile(`${process.cwd()}/image.png`);</span></pre><p id="5149" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">准备好图像后，我现在要做的就是将它发送给用户:</p><pre class="mn mo mp mq gt mr mm ms mt aw mu bi"><span id="1f6f" class="kx ky iq mm b gy mv mw l mx my">const {MessageAttachment} = require("discord.js");</span><span id="7ffb" class="kx ky iq mm b gy mz mw l mx my">const attachment = new MessageAttachment("image.png");</span><span id="4ca1" class="kx ky iq mm b gy mz mw l mx my">message.reply({files: [attachment]});</span></pre><p id="6756" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">机器人会回复一张图片:</p><figure class="mn mo mp mq gt jr gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/fd8319f5b83d379811b1373500251f44.png" data-original-src="https://miro.medium.com/v2/resize:fit:930/format:webp/1*i4641bw8BTgZmXw_NSSBWw.png"/></div><figcaption class="nd ne gj gh gi nf ng bd b be z dk translated">因为我缺乏创造力，我只是从API网站上拿了模板，添加了用户数据和一个很酷的背景😅</figcaption></figure><p id="502d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这是一个简单的例子，但是你可以用它来创造。天空才是极限！</p></div></div>    
</body>
</html>