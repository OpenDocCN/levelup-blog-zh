<html>
<head>
<title>macOS Performance Comparison: Flutter Desktop vs. Electron</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">macOS性能比较:颤振台式机与电子</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/macos-performance-comparison-flutter-desktop-vs-electron-6eb3c9c950de?source=collection_archive---------0-----------------------#2021-10-13">https://levelup.gitconnected.com/macos-performance-comparison-flutter-desktop-vs-electron-6eb3c9c950de?source=collection_archive---------0-----------------------#2021-10-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/3718cc28a05d9fabf667a1e3b450050d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*WL-b2BNaPIAirpPf.png"/></div></div></figure><p id="5e57" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">本文涵盖以下内容:</p><ul class=""><li id="1126" class="kw kx iq ka b kb kc kf kg kj ky kn kz kr la kv lb lc ld le bi translated">驱动颤振和电子的基本发动机和技术。</li><li id="2f15" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">重要的性能考虑因素以及它们与Flutter Desktop和electronic的关系。</li><li id="e33e" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">真实性能指标演示示例在<strong class="ka ir"> macOS </strong>上的桌面和电子应用。</li></ul><p id="244b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在继续阅读之前，请记住，本文并不打算推荐一种解决方案。现代电脑和设备上的资源足够多，你很难找出制作精良的Flutter桌面应用程序与制作精良的电子应用程序之间的区别。</p><p id="b7e9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">性能只是一个指标。当决定使用哪个解决方案时，您的团队的开发人员生产力、经验和知识也是要考虑的重要因素。</p></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><p id="060a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi lr translated"><span class="l ls lt lu bm lv lw lx ly lz di">D</span><strong class="ka ir">T5】is claimer</strong><em class="ma">:本文作者是一名在</em><a class="ae mb" href="https://getstream.io/" rel="noopener ugc nofollow" target="_blank"><em class="ma">getstream . io</em></a><em class="ma">的颤振开发者。JavaScript工程师审查了这篇文章以保证质量。虽然我们尽了最大努力在这两种技术之间进行公正和公平的比较，但可能会出现无意的错误或不正确的测量。</em></p><p id="9d18" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">用于这些测试的所有代码都在本文中有链接；随时发现错误或不一致之处，帮助提高结果的质量。</p></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><h1 id="65cf" class="mc md iq bd me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz bi translated">电子与颤振桌面的现状</h1><h2 id="2211" class="na md iq bd me nb nc dn mi nd ne dp mm kj nf ng mq kn nh ni mu kr nj nk my nl bi translated">电子</h2><p id="3474" class="pw-post-body-paragraph jy jz iq ka b kb nm kd ke kf nn kh ki kj no kl km kn np kp kq kr nq kt ku kv ij bi translated">Electron经受住了时间的考验，证明了自己是将web应用程序带到桌面的好解决方案。事实上，我最喜欢(也是最常用)的一些桌面应用程序都运行在Electron上，比如Visual Studio Code、Figma和Slack。其他受欢迎的应用程序包括Discord、Skype和Tusk。</p><blockquote class="nr ns nt"><p id="12d0" class="jy jz ma ka b kb kc kd ke kf kg kh ki nu kk kl km nv ko kp kq nw ks kt ku kv ij bi translated">微软正在将团队从Electron转移到Edge WebView。</p></blockquote><figure class="nx ny nz oa gt jr"><div class="bz fp l di"><div class="ob oc l"/></div></figure><p id="03ed" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这些都是大公司，大应用。大量的资源和工程力量被投入到改进电子、节点、V8引擎、JavaScript、HTML和整个网络上。看看微软在优化VSCode方面所做的工作，让它感觉像一个原生应用。</p><p id="dabd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">但是对于每一个好的电子应用程序，都有一个坏的存在(没有名字掉落👀).电子应用程序以其大的可执行文件大小、大量的内存/资源使用以及在某些情况下长的启动时间和jank问题而闻名。</p><h2 id="5e29" class="na md iq bd me nb nc dn mi nd ne dp mm kj nf ng mq kn nh ni mu kr nj nk my nl bi translated">摆动</h2><p id="0878" class="pw-post-body-paragraph jy jz iq ka b kb nm kd ke kf nn kh ki kj no kl km kn np kp kq kr nq kt ku kv ij bi translated">Flutter有一个雄心勃勃的目标，从一个单一的代码库瞄准各种设备。Flutter已经证明了自己是移动(Android和iOS)开发的一个很好的解决方案，自v1发布以来，它的性能一直在稳步提高。这些年来出现了一些性能问题，但是大多数问题已经得到解决。</p><p id="df3a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae mb" href="https://flutter.dev/desktop" rel="noopener ugc nofollow" target="_blank">飘起的桌面</a>，不过，在写作的时候还在测试版。没有任何知名的应用程序是用Flutter Desktop开发的，我们可以对其进行实验并直接与electronic进行比较。时间会告诉我们这个解决方案在生产场景中有多好，但是从我个人的经验来看，最初的性能结果似乎很有希望。理论上，在移动设备上运行良好的Flutter应用程序在桌面上应该运行得一样好，如果不是更好的话。</p></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><h1 id="2039" class="mc md iq bd me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz bi translated">关于JavaScript V8引擎和Dart Native的简短说明</h1><p id="1609" class="pw-post-body-paragraph jy jz iq ka b kb nm kd ke kf nn kh ki kj no kl km kn np kp kq kr nq kt ku kv ij bi translated">让我们讨论一下驱动电子和颤振的语言和技术。</p><h2 id="c82d" class="na md iq bd me nb nc dn mi nd ne dp mm kj nf ng mq kn nh ni mu kr nj nk my nl bi translated">JavaScript V8引擎</h2><p id="aa8d" class="pw-post-body-paragraph jy jz iq ka b kb nm kd ke kf nn kh ki kj no kl km kn np kp kq kr nq kt ku kv ij bi translated">Electron将Chromium的渲染库与Node.js结合在一起，两者共享同一个JavaScript引擎V8。直接引用<a class="ae mb" href="https://v8.dev/docs" rel="noopener ugc nofollow" target="_blank"> V8文件</a>:</p><blockquote class="nr ns nt"><p id="6b4f" class="jy jz ma ka b kb kc kd ke kf kg kh ki nu kk kl km nv ko kp kq nw ks kt ku kv ij bi translated">V8是Google开源的高性能JavaScript和WebAssembly引擎，用C++编写。它被用于Chrome和Node.js等等。</p><p id="31b6" class="jy jz ma ka b kb kc kd ke kf kg kh ki nu kk kl km nv ko kp kq nw ks kt ku kv ij bi translated">V8编译并执行JavaScript源代码，处理对象的内存分配，并对不再需要的对象进行垃圾收集。V8的停止世界，分代，准确的垃圾收集器是V8的性能的关键之一。</p></blockquote><p id="6de4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">V8引擎在不断改进，虽然JavaScript通常被认为是一种解释语言，但现代JavaScript引擎不再只是解释JavaScript，而是编译它。V8内部用<strong class="ka ir">即时编译</strong> (JIT)编译JavaScript，加速执行。</p><p id="1d97" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">还可以使用<a class="ae mb" href="https://www.electronjs.org/docs/tutorial/using-native-node-modules" rel="noopener ugc nofollow" target="_blank">本机模块</a>与本机代码接口(参见<a class="ae mb" href="https://pspdfkit.com/blog/2018/running-native-code-in-electron-and-the-case-for-webassembly/" rel="noopener ugc nofollow" target="_blank">本文</a>中的示例)。</p><h2 id="ca17" class="na md iq bd me nb nc dn mi nd ne dp mm kj nf ng mq kn nh ni mu kr nj nk my nl bi translated">Dart本地</h2><p id="ae14" class="pw-post-body-paragraph jy jz iq ka b kb nm kd ke kf nn kh ki kj no kl km kn np kp kq kr nq kt ku kv ij bi translated">根据<a class="ae mb" href="https://dart.dev/overview#native-platform" rel="noopener ugc nofollow" target="_blank"> Dart本地文档</a>:</p><blockquote class="nr ns nt"><p id="aa45" class="jy jz ma ka b kb kc kd ke kf kg kh ki nu kk kl km nv ko kp kq nw ks kt ku kv ij bi translated">在开发过程中，快速的开发周期对迭代至关重要。Dart VM提供了一个实时编译器(JIT ),它具有增量重新编译(支持热重载)、实时度量收集(支持<a class="ae mb" href="https://dart.dev/tools/dart-devtools" rel="noopener ugc nofollow" target="_blank"> DevTools </a>)和丰富的调试支持。</p><p id="e626" class="jy jz ma ka b kb kc kd ke kf kg kh ki nu kk kl km nv ko kp kq nw ks kt ku kv ij bi translated">当应用程序准备好部署到生产时，无论您是发布到应用程序商店还是部署到生产后端，Dart AOT编译器都可以提前编译到原生ARM或x64机器代码。您的AOT编译的应用程序启动一致，启动时间短。</p><p id="df71" class="jy jz ma ka b kb kc kd ke kf kg kh ki nu kk kl km nv ko kp kq nw ks kt ku kv ij bi translated">AOT编译的代码运行在一个高效的Dart运行时内，该运行时强制执行声音Dart类型系统，并使用快速对象分配和一个<a class="ae mb" href="https://medium.com/flutter-io/flutter-dont-fear-the-garbage-collector-d69b3ff1ca30" rel="noopener">分代垃圾收集器</a>来管理内存。</p></blockquote><p id="5f58" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">关键的一点是，Dart可以以热重载的形式为您提供快速的开发人员体验，并在您创建发布版本时为目标体系结构提供小型编译应用程序的好处。</p><p id="6abd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">以下是其他一些值得注意的Dart功能和更新:</p><ul class=""><li id="e5b8" class="kw kx iq ka b kb kc kf kg kj ky kn kz kr la kv lb lc ld le bi translated">Dart最近增加了对声音空安全的支持，这使得Dart AOT编译器能够产生更快的机器代码(查看<a class="ae mb" href="https://medium.com/dartlang/dart-and-the-performance-benefits-of-sound-types-6ceedd5b6cdc" rel="noopener"> Dart和声音类型的性能优势</a>以了解更多信息)。</li><li id="9668" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">Dart的<strong class="ka ir">外部函数接口</strong> (FFI)允许您使用现有的C库以获得更好的可移植性，并可以选择使用高度优化的C代码来执行性能关键的任务。阅读<a class="ae mb" href="https://medium.com/dartlang/announcing-dart-2-13-c6d547b57067" rel="noopener"> Dart 2.13 </a>了解更多关于Dart FFI的信息。</li></ul><p id="abaa" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Dart正在孤立地成长为一门伟大的语言，但它的流行绝对可以归功于Flutter的崛起。Google和Flutter团队维护Dart，这意味着该团队可以优化框架(Flutter)和语言(Dart)，以帮助改善开发人员的体验。</p></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><h1 id="7f14" class="mc md iq bd me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz bi translated">性能考虑因素</h1><p id="58cb" class="pw-post-body-paragraph jy jz iq ka b kb nm kd ke kf nn kh ki kj no kl km kn np kp kq kr nq kt ku kv ij bi translated">以下各节比较了颤振和电子的性能考虑。这些方面可能会影响最终应用程序的性能，或者您的开发人员经验以及避免潜在性能问题所需的工作量。</p><p id="f9e5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae mb" href="https://flutter.dev/docs/perf" rel="noopener ugc nofollow" target="_blank"> Flutter </a>和<a class="ae mb" href="https://www.electronjs.org/docs/tutorial/performance" rel="noopener ugc nofollow" target="_blank">electronic docs</a>都涵盖了每个平台的性能，您应该查看它们以获取最新信息。</p><h2 id="3b41" class="na md iq bd me nb nc dn mi nd ne dp mm kj nf ng mq kn nh ni mu kr nj nk my nl bi translated">应用程序大小、依赖关系和模块</h2><p id="55b4" class="pw-post-body-paragraph jy jz iq ka b kb nm kd ke kf nn kh ki kj no kl km kn np kp kq kr nq kt ku kv ij bi translated">要考虑的一个重要因素是编译后的应用程序的可执行大小。在这里，颤振是明显的赢家。Flutter编译成机器码，这意味着Dart可以很聪明地决定在最终版本中包含什么，去掉什么。参见此<a class="ae mb" href="https://github.com/dart-lang/sdk/issues?page=2&amp;q=label%3Avm-aot-code-size+is%3Aclosed" rel="noopener ugc nofollow" target="_blank">与Dart AOT建造尺寸相关的已关闭pr</a>列表。这是一个持续改进和衡量的领域。</p><p id="e97b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">另一方面，电子应用程序运行在铬上。基本上，每个电子应用程序都捆绑了自己的浏览器。这就是使电子成为可能的魔力，也是为什么你得到一个大约150mb(或更多)的可执行文件，只需简单的“你好，世界！”app。类似的颤振应用大约为30mb。(稍后，在我们的性能指标中，我们将看一些真实的数字来评估包的大小。)</p><p id="27fe" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">忽略电子应用的庞大规模，还有其他重要因素需要考虑:</p><ul class=""><li id="e83b" class="kw kx iq ka b kb kc kf kg kj ky kn kz kr la kv lb lc ld le bi translated">对于Electron，你需要更加注意你包含了什么模块，因为未使用的代码仍然会被包含在你的最终包中(参见<a class="ae mb" href="https://www.electronjs.org/docs/tutorial/performance#1-carelessly-including-modules" rel="noopener ugc nofollow" target="_blank">不小心包含了模块</a>)。</li><li id="95d2" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">在electronic中加载模块是一项非常昂贵的操作。作为开发人员，您需要注意将大模块的加载推迟到需要的时候(参见标题为<a class="ae mb" href="https://www.electronjs.org/docs/tutorial/performance#2-loading-and-running-code-too-soon" rel="noopener ugc nofollow" target="_blank">过早加载和运行代码</a>的部分)。</li><li id="a9c9" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">最后，建议您<a class="ae mb" href="https://www.electronjs.org/docs/tutorial/performance#7-bundle-your-code" rel="noopener ugc nofollow" target="_blank">将应用程序的所有代码</a>捆绑到一个包中，因为运行<code class="fe od oe of og b">require</code>是一项昂贵的操作(有各种JavaScript捆绑器可以帮助您完成这项工作，比如Webpack、Parcel和rollup.js等等)。</li></ul><p id="894e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你是一个铁杆JavaScript开发人员，你可能会翻着白眼说，“简单”，但是这些小麻烦越积越多。尤其是如果你是一个新的开发者。</p><p id="afd7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">另一方面，Dart在剥离不需要的代码和依赖性方面做得很好。如果您开始一个新的Flutter项目，那么在macOS(以及所有其他平台)上运行的构建设置将已经设置好并在等待。</p><p id="09f8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Flutter需要的配置少得多，当您在目标平台上构建应用程序时，您将立即受益于Dart提供的所有AOT编译优势。</p><h2 id="8882" class="na md iq bd me nb nc dn mi nd ne dp mm kj nf ng mq kn nh ni mu kr nj nk my nl bi translated">隔离、Web Workers和进程</h2><p id="249b" class="pw-post-body-paragraph jy jz iq ka b kb nm kd ke kf nn kh ki kj no kl km kn np kp kq kr nq kt ku kv ij bi translated">Flutter和Electron应用程序都可以从主/UI线程中卸载昂贵的工作，当您想要执行可能会阻塞UI的操作时，这是必要的:</p><ul class=""><li id="089e" class="kw kx iq ka b kb kc kf kg kj ky kn kz kr la kv lb lc ld le bi translated">在Dart中，每个线程都在自己的<a class="ae mb" href="https://api.flutter.dev/flutter/dart-isolate/Isolate-class.html" rel="noopener ugc nofollow" target="_blank">隔离区</a>中，有自己的内存，不同隔离区之间唯一可以通信的方式是通过端口传递值。</li><li id="7305" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">在electronic中，您可以使用<a class="ae mb" href="https://nodejs.org/api/worker_threads.html" rel="noopener ugc nofollow" target="_blank">工作线程</a>，它支持使用线程来并行执行JavaScript。</li></ul><blockquote class="nr ns nt"><p id="9485" class="jy jz ma ka b kb kc kd ke kf kg kh ki nu kk kl km nv ko kp kq nw ks kt ku kv ij bi translated">有关这些进程的更多信息，请参见Electron的<a class="ae mb" href="https://www.electronjs.org/docs/tutorial/performance#3-blocking-the-main-process" rel="noopener ugc nofollow" target="_blank">阻塞主进程</a>和Flutter的<a class="ae mb" href="https://medium.com/dartlang/dart-asynchronous-programming-isolates-and-event-loops-bffc3e296a6a" rel="noopener">隔离和事件循环</a>。</p></blockquote><p id="8161" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">虽然这两个框架都可以以非阻塞的方式执行昂贵的工作，但重要的是要注意，Electron在默认情况下会加速几个额外的进程，因为它运行的是Chromium。</p><p id="0b40" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">请看这张来自<strong class="ka ir"> macOS活动监视器</strong>的截图:</p><figure class="nx ny nz oa gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oh"><img src="../Images/32a3430779edb5fc60e1902174eecadb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uWJbkjJ86-PJ1a8xtPybnw.png"/></div></div><figcaption class="oi oj gj gh gi ok ol bd b be z dk translated"><em class="om">活动监视器展示了macOS上的电子“Hello，World”应用程序。</em></figcaption></figure><p id="f9bb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您会注意到三个额外的助手进程(助手、GPU、渲染器)，每个都占用一些内存和处理能力:</p><ul class=""><li id="f9f0" class="kw kx iq ka b kb kc kf kg kj ky kn kz kr la kv lb lc ld le bi translated">主进程创建并管理<a class="ae mb" href="https://github.com/electron/electron/blob/main/docs/api/browser-window.md" rel="noopener ugc nofollow" target="_blank"> BrowserWindow </a>实例和各种应用程序事件。</li><li id="ccb2" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">渲染过程运行你的应用程序的用户界面(一个网页)，它是<a class="ae mb" href="https://github.com/electron/electron/blob/main/docs/api/web-contents.md" rel="noopener ugc nofollow" target="_blank"> webContents </a>的一个实例。</li></ul><blockquote class="nr ns nt"><p id="3d91" class="jy jz ma ka b kb kc kd ke kf kg kh ki nu kk kl km nv ko kp kq nw ks kt ku kv ij bi translated">查看Cameron Notes的优秀文章，<a class="ae mb" href="https://cameronnokes.com/blog/deep-dive-into-electron's-main-and-renderer-processes/" rel="noopener ugc nofollow" target="_blank">深入探究Electron的main和renderer进程</a>。如果你想了解更多信息，这是一个很好的起点。</p></blockquote><p id="7613" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">另一方面，Flutter只运行一个进程，您可以选择产生额外的隔离来卸载主线程的工作。</p><figure class="nx ny nz oa gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi on"><img src="../Images/c7eb6013709bde1fe4da26a830a31a4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PrSyoF9yxfdGeOO9mj-IAA.png"/></div></div><figcaption class="oi oj gj gh gi ok ol bd b be z dk translated"><em class="om">活动监视器展示了macOS上的电子“Hello，World”应用程序。</em></figcaption></figure><p id="3319" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">有关颤振隔离的更多信息，请查阅以下文章:</p><ul class=""><li id="66b2" class="kw kx iq ka b kb kc kf kg kj ky kn kz kr la kv lb lc ld le bi translated"><a class="ae mb" href="https://martin-robert-fink.medium.com/dart-is-indeed-multi-threaded-94e75f66aa1e" rel="noopener"> Dart确实是多线程的</a></li><li id="084b" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated"><a class="ae mb" href="https://www.youtube.com/watch?v=SXT7nir1B48" rel="noopener ugc nofollow" target="_blank">Flutter中的轻量级隔离</a>(讨论如何使用隔离组来减少Flutter应用程序内存占用的视频)</li></ul><h2 id="0f2f" class="na md iq bd me nb nc dn mi nd ne dp mm kj nf ng mq kn nh ni mu kr nj nk my nl bi translated">翻译</h2><p id="2764" class="pw-post-body-paragraph jy jz iq ka b kb nm kd ke kf nn kh ki kj no kl km kn np kp kq kr nq kt ku kv ij bi translated">这些主题超出了本文的范围。但是，无论您使用Flutter还是最新的JavaScript SDK，了解您的代码如何在屏幕上转换为像素都很重要。</p><p id="9121" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果您想了解更多信息，这里有一些不错的资源:</p><ul class=""><li id="e5c0" class="kw kx iq ka b kb kc kf kg kj ky kn kz kr la kv lb lc ld le bi translated"><a class="ae mb" href="https://flutter.dev/docs/resources/architectural-overview" rel="noopener ugc nofollow" target="_blank">旋舞建筑概述</a></li><li id="7e9b" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated"><a class="ae mb" href="https://developer.mozilla.org/en-US/docs/Web/Performance/How_browsers_work#render" rel="noopener ugc nofollow" target="_blank">浏览器如何工作:渲染</a></li></ul><p id="824a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Flutter和Chromium都使用2D图形库Skia来处理渲染。</p><h2 id="d56e" class="na md iq bd me nb nc dn mi nd ne dp mm kj nf ng mq kn nh ni mu kr nj nk my nl bi translated">web程序集(Wasm)</h2><p id="34b4" class="pw-post-body-paragraph jy jz iq ka b kb nm kd ke kf nn kh ki kj no kl km kn np kp kq kr nq kt ku kv ij bi translated">一种专门为浏览器设计的新的二进制机器码格式。编译到WebAssembly的应用程序可以与JavaScript并行运行，而不会影响性能。Flutter和Electron应用程序都可以(并且确实)受益于这项技术。</p><p id="cc0d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">从<a class="ae mb" href="https://developer.mozilla.org/en-US/docs/WebAssembly" rel="noopener ugc nofollow" target="_blank"> MDN网络文档</a>中:</p><blockquote class="nr ns nt"><p id="7111" class="jy jz ma ka b kb kc kd ke kf kg kh ki nu kk kl km nv ko kp kq nw ks kt ku kv ij bi translated">WebAssembly是一种可以在现代web浏览器中运行的新型代码，它是一种低级的类似汇编的语言，具有紧凑的二进制格式，以接近本机的性能运行，并为C/C++、C#和Rust等语言提供编译目标，以便它们可以在web上运行。它还被设计成与JavaScript并行运行，允许两者协同工作。</p><p id="1511" class="jy jz ma ka b kb kc kd ke kf kg kh ki nu kk kl km nv ko kp kq nw ks kt ku kv ij bi translated">…使用WebAssembly JavaScript APIs，您可以将WebAssembly模块加载到JavaScript应用程序中，并在两者之间共享功能。这使您可以在相同的应用程序中利用WebAssembly的性能和功能以及JavaScript的表现力和灵活性，即使您不知道如何编写WebAssembly代码。</p></blockquote><p id="5b06" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这太令人兴奋了！请参阅以下文章，了解有关Wasm的更多信息:</p><ul class=""><li id="1cd0" class="kw kx iq ka b kb kc kf kg kj ky kn kz kr la kv lb lc ld le bi translated"><a class="ae mb" href="https://www.figma.com/blog/webassembly-cut-figmas-load-time-by-3x/" rel="noopener ugc nofollow" target="_blank"> WebAssembly将Figma的加载时间缩短了3倍</a></li><li id="99c6" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated"><a class="ae mb" href="https://flutter.dev/web" rel="noopener ugc nofollow" target="_blank">颤振的腹板支撑</a></li><li id="f536" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated"><a class="ae mb" href="https://github.com/flutter/flutter/issues/41062" rel="noopener ugc nofollow" target="_blank">用WASM代替dart2js的颤振腹板</a></li><li id="5f87" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated"><a class="ae mb" href="https://medium.com/dartlang/experimenting-with-dart-and-wasm-ef7f1c065577" rel="noopener">试验Dart和Wasm </a></li></ul><h2 id="e470" class="na md iq bd me nb nc dn mi nd ne dp mm kj nf ng mq kn nh ni mu kr nj nk my nl bi translated">Flutter和Chrome开发工具</h2><p id="5f41" class="pw-post-body-paragraph jy jz iq ka b kb nm kd ke kf nn kh ki kj no kl km kn np kp kq kr nq kt ku kv ij bi translated">提高应用程序的性能并不是一项简单的任务，有时发现性能缺陷就像大海捞针。为此，您需要合适的工具来帮助您。幸运的是，Flutter和Electron都可以使用奇妙的开发工具。</p><p id="9825" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">对于这一类，电子占了上风。Chrome DevTools 是一款已经开发多年的高级软件。性能分析、调试、网络监控、布局检查以及其他一切都非常出色。</p><p id="4f59" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae mb" href="https://dart.dev/tools/dart-devtools" rel="noopener ugc nofollow" target="_blank"> Dart DevTools </a>虽然厉害，但是还年轻。我个人很喜欢使用它，它为你提供了调试一个Flutter应用程序所需的一切，但它肯定还有改进的空间。</p></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><h1 id="8654" class="mc md iq bd me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz bi translated">性能测试</h1><p id="ac8f" class="pw-post-body-paragraph jy jz iq ka b kb nm kd ke kf nn kh ki kj no kl km kn np kp kq kr nq kt ku kv ij bi translated">现在我们已经讨论了每个平台的重要性能因素，让我们运行一些应用程序，看看Flutter Desktop和Electron如何比较。</p><p id="4c77" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这些测试仅在<strong class="ka ir"> macOS Big Sur v11.5.2 </strong>和<strong class="ka ir"> MacBook Pro </strong> (16英寸，2019)上进行，规格如下:</p><ul class=""><li id="db9b" class="kw kx iq ka b kb kc kf kg kj ky kn kz kr la kv lb lc ld le bi translated">2.3 GHz八核英特尔酷睿i9处理器</li><li id="83b6" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">AMD镭龙Pro 5500M 4 GB</li><li id="ccec" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">英特尔UHD显卡630 1536 MB</li></ul><p id="38d8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">源代码和安装说明可以在<a class="ae mb" href="https://github.com/HayesGordon/flutter-desktop-vs-electron-samples" rel="noopener ugc nofollow" target="_blank"> Github库</a>中找到。我们鼓励你自己进行这些测试，自己做实验。</p><blockquote class="oo"><p id="d7fb" class="op oq iq bd or os ot ou ov ow ox kv dk translated">请注意，这些只是演示。</p></blockquote><p id="45d1" class="pw-post-body-paragraph jy jz iq ka b kb oy kd ke kf oz kh ki kj pa kl km kn pb kp kq kr pc kt ku kv ij bi translated">对于颤振和电子，可以用许多不同的方法优化这些例子。这是一种现成的性能比较；用最少的开发工作得到什么。</p><p id="7feb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">此外，运行其中一些性能测试会导致分析开销。不分析应用程序时，实际结果可能会有所不同。</p><p id="a7a7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您还应该预料到不同运行之间的一些差异。理想情况下，您应该多次运行这些测试并取平均值(本文没有这样做；仅选择了第一次运行)。</p><blockquote class="oo"><p id="f8ad" class="op oq iq bd or os ot ou ov ow ox kv dk translated"><em class="om"> ⚠️在这些例子中，</em> <a class="ae mb" href="https://www.electronforge.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ak"> <em class="om">电子锻造</em> </strong> </a> <em class="om">用于配置和运行电子项目。NPM</em><strong class="ak"><em class="om">7 . 23 . 0版</em> </strong> <em class="om">被使用。<br/>⚠️</em><strong class="ak"><em class="om">版本2.5.1 </em> </strong> <em class="om">被用在稳定通道上。<br/> ⚠️注意到铬限制了每秒帧数(fps)。详见Chrome的</em> <a class="ae mb" href="https://dev.to/uwutrinket/chrome-unlimited-frame-rate-gl2" rel="noopener ugc nofollow" target="_blank"> <em class="om">无限帧率文章</em> </a> <em class="om">。</em></p></blockquote><h1 id="9f88" class="mc md iq bd me mf pd mh mi mj pe ml mm mn pf mp mq mr pg mt mu mv ph mx my mz bi translated">“你好世界”App！</h1><p id="c982" class="pw-post-body-paragraph jy jz iq ka b kb nm kd ke kf nn kh ki kj no kl km kn np kp kq kr nq kt ku kv ij bi translated">一个简单的应用程序，显示“你好，世界！”</p></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><h2 id="1602" class="na md iq bd me nb nc dn mi nd ne dp mm kj nf ng mq kn nh ni mu kr nj nk my nl bi translated">应用启动时间</h2><p id="3dba" class="pw-post-body-paragraph jy jz iq ka b kb nm kd ke kf nn kh ki kj no kl km kn np kp kq kr nq kt ku kv ij bi translated">Flutter和Electron都在不到一秒的时间内打开并绘制到屏幕上，其中Flutter稍快一些。</p><figure class="nx ny nz oa gt jr"><div class="bz fp l di"><div class="pi oc l"/></div><figcaption class="oi oj gj gh gi ok ol bd b be z dk translated"><em class="om">“你好，世界！”app、颤振与电子启动时间</em></figcaption></figure></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><h2 id="e8c6" class="na md iq bd me nb nc dn mi nd ne dp mm kj nf ng mq kn nh ni mu kr nj nk my nl bi translated">可执行大小</h2><p id="3fb8" class="pw-post-body-paragraph jy jz iq ka b kb nm kd ke kf nn kh ki kj no kl km kn np kp kq kr nq kt ku kv ij bi translated">在这里我们可以看到，即使对于一个简单的应用程序，一个电子应用程序也要占用很大的空间！</p><p id="630f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">颤动</strong></p><ul class=""><li id="7769" class="kw kx iq ka b kb kc kf kg kj ky kn kz kr la kv lb lc ld le bi translated">10.11及以上版本的部署目标:37.3mb</li><li id="fdd8" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">11.0及以上版本的部署目标:22.7mb</li></ul><p id="66db" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">电子</strong></p><ul class=""><li id="fb20" class="kw kx iq ka b kb kc kf kg kj ky kn kz kr la kv lb lc ld le bi translated">183.9兆字节</li></ul></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><h2 id="fd71" class="na md iq bd me nb nc dn mi nd ne dp mm kj nf ng mq kn nh ni mu kr nj nk my nl bi translated">活动监视器</h2><p id="3915" class="pw-post-body-paragraph jy jz iq ka b kb nm kd ke kf nn kh ki kj no kl km kn np kp kq kr nq kt ku kv ij bi translated">Flutter使用最少的内存量(大约38mb，相比之下大约100mb)。所有这些额外的电子过程加起来。</p><p id="f834" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">记忆</strong></p><figure class="nx ny nz oa gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi on"><img src="../Images/c7eb6013709bde1fe4da26a830a31a4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PrSyoF9yxfdGeOO9mj-IAA.png"/></div></div><figcaption class="oi oj gj gh gi ok ol bd b be z dk translated"><em class="om">《你好，世界》颤振app。内存~37.9mb </em></figcaption></figure><figure class="nx ny nz oa gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oh"><img src="../Images/32a3430779edb5fc60e1902174eecadb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uWJbkjJ86-PJ1a8xtPybnw.png"/></div></div><figcaption class="oi oj gj gh gi ok ol bd b be z dk translated"><em class="om">“你好，世界”电子app。内存:~ 99.6 MB(44.9+26.1+18+10.6)</em><br/><em class="om">CPU、GPU、能量影响在这个例子中没有显示。</em></figcaption></figure></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><h2 id="c66e" class="na md iq bd me nb nc dn mi nd ne dp mm kj nf ng mq kn nh ni mu kr nj nk my nl bi translated">每秒剖析/帧数</h2><p id="0ea3" class="pw-post-body-paragraph jy jz iq ka b kb nm kd ke kf nn kh ki kj no kl km kn np kp kq kr nq kt ku kv ij bi translated">一个愚蠢的例子，但包括在内的乐趣。这里调整应用程序窗口的大小以触发重新渲染。</p><p id="85bb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">正如所料，颤振和电子运行舒适的60帧/秒。但是请注意，铬限制了fps的数量。这就是为什么电子每帧的时间总是在16毫秒左右。</p><p id="13b7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">颤振</strong> <br/>每帧3ms以下，60fps。</p><figure class="nx ny nz oa gt jr"><div class="bz fp l di"><div class="pi oc l"/></div><figcaption class="oi oj gj gh gi ok ol bd b be z dk translated"><em class="om">颤振，60fps，平均帧小于3ms </em></figcaption></figure><p id="77cf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">电子</strong> <br/>每帧16–17m s左右，60 fps。</p><figure class="nx ny nz oa gt jr"><div class="bz fp l di"><div class="pi oc l"/></div><figcaption class="oi oj gj gh gi ok ol bd b be z dk translated"><em class="om">电子，60fps，平均帧时间设置为16–17毫秒</em></figcaption></figure></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><h1 id="ee52" class="mc md iq bd me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz bi translated">洛蒂动画应用</h1><p id="454e" class="pw-post-body-paragraph jy jz iq ka b kb nm kd ke kf nn kh ki kj no kl km kn np kp kq kr nq kt ku kv ij bi translated">这个例子加载了150个Lottie动画，并同时为它们制作动画。</p></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><h2 id="b2a0" class="na md iq bd me nb nc dn mi nd ne dp mm kj nf ng mq kn nh ni mu kr nj nk my nl bi translated">应用启动时间</h2><p id="3030" class="pw-post-body-paragraph jy jz iq ka b kb nm kd ke kf nn kh ki kj no kl km kn np kp kq kr nq kt ku kv ij bi translated">这里，电子app比Flutter app早半秒打开；但是，第一个内容——满满的油漆同时。应该注意的是，在最初的几秒钟，电子应用程序有非常明显的丢帧现象。</p><figure class="nx ny nz oa gt jr"><div class="bz fp l di"><div class="pi oc l"/></div><figcaption class="oi oj gj gh gi ok ol bd b be z dk translated"><em class="om">“洛蒂动画”app，颤振vs电子启动时间</em></figcaption></figure></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><h2 id="d2c8" class="na md iq bd me nb nc dn mi nd ne dp mm kj nf ng mq kn nh ni mu kr nj nk my nl bi translated">可执行大小</h2><p id="2785" class="pw-post-body-paragraph jy jz iq ka b kb nm kd ke kf nn kh ki kj no kl km kn np kp kq kr nq kt ku kv ij bi translated">在这里，加载额外的模块可能会导致使用Electron时包的大小显著增加(与“Hello，World”示例相比大约大80mb)。</p><p id="5693" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Flutter app在添加Lottie包和动画文件后只增加了~7mb。</p><p id="5f94" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">颤动</strong></p><ul class=""><li id="83b4" class="kw kx iq ka b kb kc kf kg kj ky kn kz kr la kv lb lc ld le bi translated">10.11及以上版本的部署目标:40.7mb</li><li id="d031" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">11.0及以上版本的部署目标:29.1mb</li></ul><p id="e5df" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">电子</strong></p><ul class=""><li id="5b99" class="kw kx iq ka b kb kc kf kg kj ky kn kz kr la kv lb lc ld le bi translated">259.1兆字节</li></ul></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><h2 id="6d61" class="na md iq bd me nb nc dn mi nd ne dp mm kj nf ng mq kn nh ni mu kr nj nk my nl bi translated">活动监视器</h2><p id="8331" class="pw-post-body-paragraph jy jz iq ka b kb nm kd ke kf nn kh ki kj no kl km kn np kp kq kr nq kt ku kv ij bi translated">Flutter在所有类别中都使用较少的资源:CPU、GPU、内存和能源。</p><p id="14c7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然而，突出的结果是电子版使用了大量的内存。大约2.2gb，相比之下，Flutter大约为170mb。</p><p id="e8c8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> CPU/GPU </strong> <br/> Flutter的CPU和GPU使用率较低:约130% (CPU)和约13% (GPU)，相比之下，Electron的约215% (CPU)和41% (GPU)。</p><figure class="nx ny nz oa gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi pj"><img src="../Images/15b03b195612c1df1b1f2f66aa3bd86f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Vom5gW8Zso36cBFLdcgKxg.png"/></div></div><figcaption class="oi oj gj gh gi ok ol bd b be z dk translated"><em class="om">“洛蒂”颤振app。CPU: ~130.6%，GPU: ~12.8% </em></figcaption></figure><figure class="nx ny nz oa gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi pk"><img src="../Images/385e26acb80823c2ceecb5112af783f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tlU4ue7TwNlPebrz8ichzQ.png"/></div></div><figcaption class="oi oj gj gh gi ok ol bd b be z dk translated"><em class="om">“洛蒂”电子app。CPU: ~215% (0.2 + 101.6 + 113.4)，GPU: ~41% </em></figcaption></figure><p id="2861" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">内存</strong></p><p id="64ab" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">与大约2.2gb的Electron相比，Flutter大约170mb的内存使用量要低得多。</p><figure class="nx ny nz oa gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi pl"><img src="../Images/2a598ee6eca28c14e2f40f4c5f8dffce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X5zO5pBgi-rD2SEJcBeB3A.png"/></div></div><figcaption class="oi oj gj gh gi ok ol bd b be z dk translated"><em class="om">“洛蒂”颤振app。内存:~168.5 MB </em></figcaption></figure><figure class="nx ny nz oa gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi pl"><img src="../Images/0e114efbe81228914df209157a811ed5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JN2xrwAuIpgSknLmwBCpVg.png"/></div></div><figcaption class="oi oj gj gh gi ok ol bd b be z dk translated"><em class="om">“洛蒂”电子app。内存:~ 2261.3 MB(2100+95.6+55.3+10.4)</em></figcaption></figure><p id="60cb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">能量冲击</strong></p><p id="4dea" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">与大约220的电子冲击相比，颤动使用更少的能量，大约130的冲击。</p><figure class="nx ny nz oa gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi pm"><img src="../Images/83cc7f8d03e1763b569f6dcfb91f7398.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eiRu6VMtaZ-SED9oKe0_pA.png"/></div></div><figcaption class="oi oj gj gh gi ok ol bd b be z dk translated"><em class="om">“洛蒂”颤振app。能量:~131.6 </em></figcaption></figure><figure class="nx ny nz oa gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi pk"><img src="../Images/c8bc045b6aeabf046ffc05196edd2a67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hm7NrYp9y5Do9-854Cw68g.png"/></div></div><figcaption class="oi oj gj gh gi ok ol bd b be z dk translated"><em class="om">“洛蒂”电子app。能量:~220.7 (0.2 + 137.8 + 82.7) </em></figcaption></figure></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><h2 id="3895" class="na md iq bd me nb nc dn mi nd ne dp mm kj nf ng mq kn nh ni mu kr nj nk my nl bi translated">每秒剖析/帧数</h2><p id="a777" class="pw-post-body-paragraph jy jz iq ka b kb nm kd ke kf nn kh ki kj no kl km kn np kp kq kr nq kt ku kv ij bi translated">在这个例子中，颤振和电子之间有明显的运行时差异。在启动时，Flutter立即运行，并保持稳定的40–45 fps，而Electron在最初几秒钟显示显著的帧丢失，然后保持20–25 fps。</p><p id="ed60" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">颤振</strong> <br/>每帧10–30 ms不等，平均约40–45 fps。</p><figure class="nx ny nz oa gt jr"><div class="bz fp l di"><div class="pi oc l"/></div><figcaption class="oi oj gj gh gi ok ol bd b be z dk translated"><em class="om">“洛蒂动画”app。颤振桌面剖析。</em></figcaption></figure><p id="32e0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">电子</strong> <br/>每帧25–60 ms不等，平均约20fps-25fps。</p><figure class="nx ny nz oa gt jr"><div class="bz fp l di"><div class="pi oc l"/></div><figcaption class="oi oj gj gh gi ok ol bd b be z dk translated"><em class="om">“洛蒂动画”app。电子侧写。</em></figcaption></figure></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><h1 id="2064" class="mc md iq bd me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz bi translated">高分辨率图像应用程序</h1><p id="70af" class="pw-post-body-paragraph jy jz iq ka b kb nm kd ke kf nn kh ki kj no kl km kn np kp kq kr nq kt ku kv ij bi translated">此示例通过网络加载100幅高分辨率图像，缓存它们，将其缩小到较小的尺寸，并连续旋转这些图像。</p><blockquote class="nr ns nt"><p id="9598" class="jy jz ma ka b kb kc kd ke kf kg kh ki nu kk kl km nv ko kp kq nw ks kt ku kv ij bi translated">请注意，在Flutter上，<a class="ae mb" href="https://pub.dev/packages/cached_network_image" rel="noopener ugc nofollow" target="_blank"> cached_network_image </a>包用于缓存运行之间的图像。</p></blockquote></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><h2 id="473a" class="na md iq bd me nb nc dn mi nd ne dp mm kj nf ng mq kn nh ni mu kr nj nk my nl bi translated">应用启动时间</h2><p id="abf9" class="pw-post-body-paragraph jy jz iq ka b kb nm kd ke kf nn kh ki kj no kl km kn np kp kq kr nq kt ku kv ij bi translated">Flutter和Electron都在一秒钟内打开，Flutter应用程序打开和加载图像的速度略快。在最初几秒钟，电子应用程序中有明显的丢帧现象。</p><figure class="nx ny nz oa gt jr"><div class="bz fp l di"><div class="pi oc l"/></div><figcaption class="oi oj gj gh gi ok ol bd b be z dk translated"><em class="om">“旋转影像”app，颤振桌面vs电子启动时间。</em></figcaption></figure></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><h2 id="7417" class="na md iq bd me nb nc dn mi nd ne dp mm kj nf ng mq kn nh ni mu kr nj nk my nl bi translated">可执行大小</h2><p id="18a6" class="pw-post-body-paragraph jy jz iq ka b kb nm kd ke kf nn kh ki kj no kl km kn np kp kq kr nq kt ku kv ij bi translated">电子应用程序的大小与“Hello，world”示例完全相同。在包括图像缓存包之后，Flutter应用程序大了5mb。</p><p id="538f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">颤动</strong></p><ul class=""><li id="d95a" class="kw kx iq ka b kb kc kf kg kj ky kn kz kr la kv lb lc ld le bi translated">11.0及以上版本的部署目标:27.7mb</li></ul><p id="b4fa" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">电子</strong></p><ul class=""><li id="9889" class="kw kx iq ka b kb kc kf kg kj ky kn kz kr la kv lb lc ld le bi translated">183.9兆字节</li></ul></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><h2 id="2799" class="na md iq bd me nb nc dn mi nd ne dp mm kj nf ng mq kn nh ni mu kr nj nk my nl bi translated">活动监视器</h2><p id="892b" class="pw-post-body-paragraph jy jz iq ka b kb nm kd ke kf nn kh ki kj no kl km kn np kp kq kr nq kt ku kv ij bi translated">在这个例子中，结果非常接近，除了内存使用，其中Flutter使用了大约100mb。</p><p id="02d0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> CPU/GPU </strong></p><p id="a3e6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">颤振和电子之间没有太大的区别。使用稍微少一点的资源抖动。</p><figure class="nx ny nz oa gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi pj"><img src="../Images/ba6ff0428c3724544cbf7f6d39117fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OSYIzK27Unin5JiSza6qSA.png"/></div></div><figcaption class="oi oj gj gh gi ok ol bd b be z dk translated"><em class="om">“图片”app飘起。CPU: ~13.6%，GPU: ~2.97% </em></figcaption></figure><figure class="nx ny nz oa gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi pn"><img src="../Images/dc465e7791cca4bd4a84d8fbdd528de4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AeUet9jGM3JnUw4t-Px_lA.png"/></div></div><figcaption class="oi oj gj gh gi ok ol bd b be z dk translated"><em class="om">“影像”app电子版。CPU: ~17.5 % (1.1 + 7.7 + 8.7)，GPU ~2.8% </em></figcaption></figure><p id="59e3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">记忆</strong></p><p id="d72e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">颤动使用大约100mb小于电子。</p><figure class="nx ny nz oa gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi po"><img src="../Images/bb6e92601212a380bb0bf1f08c293132.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FFVijrqtqHqLmmS-TisAyw.png"/></div></div><figcaption class="oi oj gj gh gi ok ol bd b be z dk translated"><em class="om">“图片”app飘起。内存:~ 73.5 MB</em></figcaption></figure><figure class="nx ny nz oa gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi pp"><img src="../Images/b222d579a062d2cefae7a03c32eadd23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s_c8hzvt_NVbt-HKP3g_2w.png"/></div></div><figcaption class="oi oj gj gh gi ok ol bd b be z dk translated"><em class="om">【图片】app电子。内存:~ 173.5 MB(74.2+54.4+29.1+15.8)</em></figcaption></figure><p id="de39" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">能量冲击</strong></p><p id="fecb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">颤振和电子之间没有太大的区别，在12-17%的能量影响之间。</p><figure class="nx ny nz oa gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi pn"><img src="../Images/d2a451c59de90b5fc6a9a0479f26a202.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BddM1ry_gpZqOTzj4mU0KA.png"/></div></div><figcaption class="oi oj gj gh gi ok ol bd b be z dk translated"><em class="om">“图片”app飘起。能量影响:~12.5 </em></figcaption></figure><figure class="nx ny nz oa gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi pn"><img src="../Images/df08e9239997b71661198ae82e7346ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ugzw3nXkK7nbVmMWTCxKKA.png"/></div></div><figcaption class="oi oj gj gh gi ok ol bd b be z dk translated"><em class="om">【图片】app电子。能量影响:~17 (1.1 + 8.4 + 7.5) </em></figcaption></figure></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><h2 id="29a4" class="na md iq bd me nb nc dn mi nd ne dp mm kj nf ng mq kn nh ni mu kr nj nk my nl bi translated">每秒剖析/帧数</h2><p id="b6c9" class="pw-post-body-paragraph jy jz iq ka b kb nm kd ke kf nn kh ki kj no kl km kn np kp kq kr nq kt ku kv ij bi translated">App start电子版有明显丢帧现象。但在最初的几秒钟后，两者都以60fps的速度运行，没有问题。</p><p id="88c3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">颤动</strong></p><p id="9417" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">除了偶尔丢帧之外，每帧渲染时间接近1毫秒。轻松的60fps。</p><figure class="nx ny nz oa gt jr"><div class="bz fp l di"><div class="pi oc l"/></div><figcaption class="oi oj gj gh gi ok ol bd b be z dk translated"><em class="om">“图片”app飘起。每帧1毫秒，60fps。</em></figcaption></figure><p id="62f4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">电子</strong>电子<br/>强制每帧16ms，60fps。</p><figure class="nx ny nz oa gt jr"><div class="bz fp l di"><div class="pi oc l"/></div><figcaption class="oi oj gj gh gi ok ol bd b be z dk translated"><em class="om">【图片】app电子。帧数设置为16ms，60fps。然而，应用程序启动时会出现明显的帧丢失。</em></figcaption></figure></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><h1 id="2021" class="mc md iq bd me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz bi translated">结论</h1><p id="dead" class="pw-post-body-paragraph jy jz iq ka b kb nm kd ke kf nn kh ki kj no kl km kn np kp kq kr nq kt ku kv ij bi translated">你必须从提供的数据中得出自己的结论🙂。如果您想将您的应用程序带到桌面上，这两者都是很好的跨平台选择。</p><p id="0bfd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">调查结果概述如下:</p><p id="8be9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">电子</strong></p><ul class=""><li id="cb8d" class="kw kx iq ka b kb kc kf kg kj ky kn kz kr la kv lb lc ld le bi translated">随着一个电子应用程序的成长，它可能会在启动时间和第一次内容丰富的绘制时间上挣扎。然而，像VSCode和Figma这样的应用程序证明这是可以避免的。</li><li id="04c9" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">电子被证明是一种工作溶液；如果你能编写一个快速高效的web应用程序，那么你也可以在电子设备上完成。</li><li id="b63f" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">具有较大的安装大小和内存使用量。</li><li id="79d5" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">您需要更加注意您包含的模块，它们何时被加载，以及您的应用程序是如何打包的。</li><li id="0305" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">Wasm集成可以极大地改善某些任务。</li></ul><p id="d4d1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">颤振</strong></p><ul class=""><li id="9c67" class="kw kx iq ka b kb kc kf kg kj ky kn kz kr la kv lb lc ld le bi translated">Flutter Desktop仍处于测试阶段，尚未在更大范围内得到验证。</li><li id="d248" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">Flutter将具有更小的内存占用和安装尺寸。这些数字也有可能提高，尤其是随着Dart的不断优化。</li><li id="c103" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">以多个平台为目标很容易，只需要最少的开发人员配置。</li><li id="2c0a" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">Flutter的平台集成和FFI是非常棒的解决方案。</li><li id="0b46" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">Dart的零安全性及其与Wasm的潜在集成都是锦上添花。</li></ul><p id="4cc8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">对于性能实验，如果能并排演示两个大型且相似的颤振和电子应用，并能够比较更多真实场景，那就太棒了。</p><p id="fc77" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">一旦生产颤振桌面应用开始浮出水面，这将是一个有趣的对话。</p></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><p id="68fe" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="ma">最初发布于</em><a class="ae mb" href="https://getstream.io/blog/flutter-desktop-vs-electron/" rel="noopener ugc nofollow" target="_blank"><em class="ma">https://getstream . io</em></a><em class="ma">。</em></p></div></div>    
</body>
</html>