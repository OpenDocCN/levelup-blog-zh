<html>
<head>
<title>How I Used Python and Selenium To Get a Lifetime Supply of Garlic Pizza Sticks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我是如何使用Python和Selenium来获得终身供应的大蒜披萨棒的</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-i-used-python-and-selenium-to-get-a-lifetime-supply-of-garlic-pizza-sticks-94abb66b71e1?source=collection_archive---------0-----------------------#2020-10-15">https://levelup.gitconnected.com/how-i-used-python-and-selenium-to-get-a-lifetime-supply-of-garlic-pizza-sticks-94abb66b71e1?source=collection_archive---------0-----------------------#2020-10-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="bb1d" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">一个充满好奇心和渴望的学生的故事。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/2bd18b2c2da5343befe9a320c3000b35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pwABQPIGM4v0PMGxpJlQDw.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@iavnt?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">伊万·托瑞斯</a>在<a class="ae ky" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</figcaption></figure></div><div class="ab cl kz la hx lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="im in io ip iq"><p id="6c7e" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">我不知道你怎么样，但是我喜欢比萨饼。尤其是当披萨上有棒约翰自己的大蒜披萨棒的时候。所以当我在完成最近的外卖后，收到他们的如下邮件时，我欣喜若狂:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mc"><img src="../Images/1ee5b47c2a4c0e8d7e7615301b46541b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uUMkCtkeydXLz1gloj_uFw.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">棒约翰的调查邮件标题</figcaption></figure><p id="f6e9" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">免费食物！我确实需要完成调查…</p><h1 id="9d2d" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">该调查</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mv"><img src="../Images/719d7ace49cd00e250e59eeed423021f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pnLSlTKoYpBf5MTgaPuyYQ.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">棒约翰的反馈调查</figcaption></figure><p id="07c3" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">我以普通人的身份完成了调查，果然，我得到了免费大蒜披萨的验证码。</p><p id="86f9" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">但是，出于好奇，我又看了看最初的链接。似乎<em class="mw"> GUID </em>参数是一个客户标识符。猜猜当我把它改成随机的时候发生了什么？一个全新的调查出现了，等待完成更多的披萨棒。</p><p id="5fca" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">我可以永远这样做！然而，这似乎不是对我时间的有效利用——让我们引入一些硒魔法。</p><h1 id="96da" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">机器人</h1><p id="46cf" class="pw-post-body-paragraph lg lh it li b lj mx ju ll lm my jx lo lp mz lr ls lt na lv lw lx nb lz ma mb im bi translated">Selenium Webdriver是一个浏览器自动化框架，主要用于测试目的。我选择Python作为我的语言，并决定使用Selenium来制作调查机器人。</p><h2 id="6282" class="nc me it bd mf nd ne dn mj nf ng dp mn lp nh ni mp lt nj nk mr lx nl nm mt nn bi translated">建立</h2><p id="b078" class="pw-post-body-paragraph lg lh it li b lj mx ju ll lm my jx lo lp mz lr ls lt na lv lw lx nb lz ma mb im bi translated">我跑了<code class="fe no np nq nr b">pip install selenium</code> &amp; <code class="fe no np nq nr b">pip install fake_useragent</code>入门。什么是用户代理？<a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/User-Agent" rel="noopener ugc nofollow" target="_blank"> MDN Web文档</a>将其定义为:</p><blockquote class="ns"><p id="444f" class="nt nu it bd nv nw nx ny nz oa ob mb dk translated">用户代理请求头是一个特征字符串，它让服务器和网络对等点识别应用程序、操作系统、供应商和/或发出请求的用户代理的版本。</p></blockquote><p id="c3c1" class="pw-post-body-paragraph lg lh it li b lj oc ju ll lm od jx lo lp oe lr ls lt of lv lw lx og lz ma mb im bi translated">随机化这个请求头以绕过任何可能存在的过滤/阻止机制似乎是个好主意——这就是<code class="fe no np nq nr b">fake_useragent</code>的用武之地。</p><p id="d683" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">我还需要下载Chrome驱动程序，以便与Chrome浏览器连接。</p><h2 id="0195" class="nc me it bd mf nd ne dn mj nf ng dp mn lp nh ni mp lt nj nk mr lx nl nm mt nn bi translated">密码</h2><p id="6195" class="pw-post-body-paragraph lg lh it li b lj mx ju ll lm my jx lo lp mz lr ls lt na lv lw lx nb lz ma mb im bi translated">基本的selenium设置如下(使用随机用户代理完成初始化):</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oh oi l"/></div></figure><p id="87cc" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">随机化了<em class="mw"> GUID </em>参数后，机器人打开网页开始点击。我在每个动作之间添加了一秒钟的延迟，以允许页面加载，同时表现得像一个模糊的正常人。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oh oi l"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">机器人脚本的一部分。</figcaption></figure><h2 id="b1e8" class="nc me it bd mf nd ne dn mj nf ng dp mn lp nh ni mp lt nj nk mr lx nl nm mt nn bi translated">XPath</h2><p id="8ac6" class="pw-post-body-paragraph lg lh it li b lj mx ju ll lm my jx lo lp mz lr ls lt na lv lw lx nb lz ma mb im bi translated">XPath是一种用于从HTML或XML文档中选择节点的查询语言。对于每个调查问题，我利用了一个实时XPath测试工具<a class="ae ky" href="http://xpather.com/#" rel="noopener ugc nofollow" target="_blank">来选择机器人要点击的正确节点。当然，我给棒约翰的所有东西都打了五星。</a></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/bab4465c8b288bbc44aeffc8018f9a1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GHPqo8UhFKk3XBpdoKaRcw.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">XPath测试</figcaption></figure><h2 id="b32f" class="nc me it bd mf nd ne dn mj nf ng dp mn lp nh ni mp lt nj nk mr lx nl nm mt nn bi translated">不客气！</h2><p id="fd5d" class="pw-post-body-paragraph lg lh it li b lj mx ju ll lm my jx lo lp mz lr ls lt na lv lw lx nb lz ma mb im bi translated">最后，我们有验证码。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ok"><img src="../Images/3c1f7dc21bb0f5805ba4208d83fcab21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CIyjhvWozro2SIQi1S4FeA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">棒约翰的反馈调查</figcaption></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oh oi l"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">提取验证码。</figcaption></figure><h2 id="cc10" class="nc me it bd mf nd ne dn mj nf ng dp mn lp nh ni mp lt nj nk mr lx nl nm mt nn bi translated">庆祝</h2><p id="a687" class="pw-post-body-paragraph lg lh it li b lj mx ju ll lm my jx lo lp mz lr ls lt na lv lw lx nb lz ma mb im bi translated">经过半个小时的编程，我已经完成了我的Python机器人。这里有一个包含代码的<a class="ae ky" href="https://gist.github.com/thesanjeetc/2e78ab31047d8c5075e947a0afbe50be" rel="noopener ugc nofollow" target="_blank">要点</a>，它是这样的:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ol oi l"/></div></figure><h1 id="b5ff" class="md me it bd mf mg mh mi mj mk ml mm mn jz mo ka mp kc mq kd mr kf ms kg mt mu bi translated">谢谢约翰爸爸</h1><p id="0e35" class="pw-post-body-paragraph lg lh it li b lj mx ju ll lm my jx lo lp mz lr ls lt na lv lw lx nb lz ma mb im bi translated">我在棒约翰收银台输入了每个生成的代码。这就是你想要的——一个潜在的无穷无尽的大蒜披萨棒供应。</p><p id="8797" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">给我免费的蒜味面包，给棒约翰市场部的好评。在我看来这是双赢的局面！在这个过程中，我甚至学习了XPath并灵活运用了Selenium技能。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi om"><img src="../Images/18bdab193140e767336776eda30f5126.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gsdehAfLSeQOcDMSDfTS4w.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">棒约翰的收银台</figcaption></figure><p id="16f2" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">但是当然，我没有点任何东西。作为一个有道德的人，我把这个漏洞和概念验证视频一起通知了棒约翰——截至发稿时，他们还没有回应。然而，这项调查已经不起作用了，所以我想他们已经明白了。</p><p id="1839" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">顺便提一下，我可以有计划地从英国的每一家棒约翰店订购1000份大蒜披萨，然后单枪匹马让棒约翰疯狂一把。你能想象这会引起多大的混乱吗？</p><p id="f8ea" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated">我可能是在一个平行宇宙中做的。</p><p id="f29c" class="pw-post-body-paragraph lg lh it li b lj lk ju ll lm ln jx lo lp lq lr ls lt lu lv lw lx ly lz ma mb im bi translated"><strong class="li iu">感谢阅读。</strong></p></div></div>    
</body>
</html>