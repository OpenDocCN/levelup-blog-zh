<html>
<head>
<title>MuleSoft Hits the Mark with GraphQL</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">MuleSoft用GraphQL击中目标</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/mulesoft-hits-the-mark-with-graphql-14fb3a9348b9?source=collection_archive---------21-----------------------#2020-06-01">https://levelup.gitconnected.com/mulesoft-hits-the-mark-with-graphql-14fb3a9348b9?source=collection_archive---------21-----------------------#2020-06-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div class="gh gi jq"><img src="../Images/934e4c99c45d8ac36b894b1e320dae57.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YKaxxnXnq1nLWCKPRszf8Q.png"/></div></figure><p id="be47" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">Mule Connect 2020虚拟会议已经结束，我们看到了MuleSoft对GraphQL愿景的更多细节，这表明MuleSoft正在积极努力填补GraphQL的空白。让我们回顾一下什么是GraphQL，它面临的挑战，以及MuleSoft如何应对这些挑战。</p><h1 id="61cb" class="kv kw it bd kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls bi translated">GraphQL基础知识</h1><p id="8510" class="pw-post-body-paragraph jx jy it jz b ka lt kc kd ke lu kg kh ki lv kk kl km lw ko kp kq lx ks kt ku im bi translated">GraphQL是用于跨其他API查询数据的API规范。它起源于2012年的脸书，2015年作为开源发布。它允许API客户端告诉API它想要什么，而不是API假设它知道客户端想要什么。这对支持ui的API特别有用。UIs的一个挑战是他们可能需要来自许多来源的数据。调用所有这些资源会使UI变得复杂。它还会给对带宽敏感的移动应用程序增加过多的干扰。我们通常通过用一个复合视图-模型API聚合较低级别的业务API，或者通过使用<a class="ae ly" href="https://docs.microsoft.com/en-us/azure/architecture/patterns/backends-for-frontends" rel="noopener ugc nofollow" target="_blank">后端对前端(BFF)模式</a>来解决这个问题。</p><p id="947f" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">不过，这有一些问题。这些API与它们支持的页面紧密结合。当您同时拥有web和移动UI时，您通常需要编写两种风格的视图模型或BFF APIs。当你想在UI上重新安排事情时，比如A/B测试一个新的体验，你再次需要重写这些API。</p><p id="dce0" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">对于GraphQL，UI层使用GraphQL规范告诉GraphQL层它需要什么，然后API返回它。现在，您可以用一个GraphQL API来支持您的移动和web UIs，而不是两个视图模型或BFF。想要AB测试移动一些字段到不同的页面？只需让新页面在需要时请求新字段；不需要去改变API层。</p><h2 id="7000" class="lz kw it bd kx ma mb dn lb mc md dp lf ki me mf lj km mg mh ln kq mi mj lr mk bi translated">GraphQL与OData</h2><p id="5586" class="pw-post-body-paragraph jx jy it jz b ka lt kc kd ke lu kg kh ki lv kk kl km lw ko kp kq lx ks kt ku im bi translated">等等，这不就是小田吗？不，OData大致上就像是web上的ODBC/JDBC。查询被下推到数据库中，数据库处理该查询。这造成了一些限制。</p><ul class=""><li id="954d" class="ml mm it jz b ka kb ke kf ki mn km mo kq mp ku mq mr ms mt bi translated">OData API所有者对用户发送什么样的查询控制较少。这为注入攻击打开了方便之门，注入攻击利用错误配置的数据库或者用失控的查询使数据库过载。</li><li id="28e1" class="ml mm it jz b ka mu ke mv ki mw km mx kq my ku mq mr ms mt bi translated">您仅限于可以直接连接的数据库。如果您需要查询只能通过服务接口(SOAP、REST等)访问的数据。)，那你就倒霉了。</li><li id="1137" class="ml mm it jz b ka mu ke mv ki mw km mx kq my ku mq mr ms mt bi translated">跨多个数据库连接数据很困难。随着IT部门转向微服务架构并打破他们的数据铁板一块，这尤其成问题。拥有一个贷款数据库作为记录系统的情况越来越少。</li></ul><p id="7d70" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">GraphQL运行在API层。因此，API可以访问的任何数据源都可以被GraphQL查询。此外，它可以跨API连接数据，例如从客户帐户API中提取客户，并通过单独的订单和计费API将其与客户的订单和计费历史连接起来。</p><h2 id="19fc" class="lz kw it bd kx ma mb dn lb mc md dp lf ki me mf lj km mg mh ln kq mi mj lr mk bi translated">GraphQL挑战</h2><p id="c193" class="pw-post-body-paragraph jx jy it jz b ka lt kc kd ke lu kg kh ki lv kk kl km lw ko kp kq lx ks kt ku im bi translated">虽然UI开发人员可能喜欢GraphQL，但后端开发人员对它的喜爱要少得多。这是因为GraphQL可能很难维护。您需要定义GraphQL API支持的许多数据源之间的关系。此外，您需要<em class="mz">记录</em>它们，以便最终用户可以知道每个API实体如何与其他实体相关联。最后，GraphQL的学习曲线比REST陡峭得多。这些挑战可能会成为采用的障碍。</p><h1 id="ba03" class="kv kw it bd kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls bi translated">MuleSoft的GraphQL图形用户界面</h1><p id="f5cd" class="pw-post-body-paragraph jx jy it jz b ka lt kc kd ke lu kg kh ki lv kk kl km lw ko kp kq lx ks kt ku im bi translated">在Mule Connect的主题演讲中，他们展示了MuleSoft即将推出的GraphQL UI的演示，他们称之为API Federation。它似乎解决了上述挑战。</p><p id="7916" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">首先，GraphQL维护者可以导入由Anypoint平台管理的API。Anypoint已经拥有了存储在Anypoint Exchange API目录中的每个API的OpenAPI规范，并且这些信息被自动带入到图形编辑器中。然后通过拖放UI，您可以定义各种API之间的实体关系。然后，Anypoint将生成您需要的模式，以便在Anypoint平台上自动构建GraphQL API，并将该模式发布到Anypoint Exchange API目录。</p><p id="ac91" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">其次，在消费端，UI开发人员可以通过搜索任意点交换来发现模式。从那里，他可以看到模式的可视化，并使用它通过单击他需要的实体和字段来构建查询。甚至还有一个预览窗格，可以进行实时查询，并在您编辑查询时向您显示结果。完成后，Anypoint会以各种语言生成您需要的查询，因此您可以将其复制/粘贴到您的代码中。</p><p id="2a4c" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">我的印象是，它将使后端开发人员和UI开发人员更容易创建、维护和使用GraphQL。尤其是如果您已经是MuleSoft的客户，并且不愿意在您的API空间中添加更多的供应商。</p><p id="f306" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">不幸的是，尽管这是一个100%免费的虚拟会议，MuleSoft并没有制作这个公开的视频。因此，为什么我不能给你提供截图。因此，如果您对GraphQL感兴趣，请关注即将发布的版本。</p><p id="4a19" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">同时，做一些关于GraphQL的更深入的阅读。即使您对MuleSoft不感兴趣，也有越来越多的开源和商业产品供您探索。对于试图加快用户体验交付速度的IT团队来说，GraphQL将是您工具箱中的一个重要工具。</p></div></div>    
</body>
</html>