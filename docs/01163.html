<html>
<head>
<title>Destructuring Assignment in React: It is your friend.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React中的析构赋值:它是你的朋友。</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/destructuring-assignment-in-react-it-is-your-friend-b36a330533dc?source=collection_archive---------2-----------------------#2019-11-20">https://levelup.gitconnected.com/destructuring-assignment-in-react-it-is-your-friend-b36a330533dc?source=collection_archive---------2-----------------------#2019-11-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/d7bd451ec94b631a8bd67bb3a7f426c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e_t7F17bDeYiN3F0LihUbw.jpeg"/></div></div></figure><p id="8f01" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">有大量的信息可以解释什么是<a class="ae kw" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment" rel="noopener ugc nofollow" target="_blank">析构赋值</a>以及如何使用它。然而，在本文中，我将给出一个简单的例子来说明它是如何工作的，并展示它在React应用程序中的有用性。</p><p id="1aea" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">简单地说，析构赋值是一种定制如何访问值以供使用的方法。它是一个JavaScript表达式，允许从数组中提取值或从对象中提取属性，并将值或属性作为不同的变量进行赋值。下面是一个数组析构的例子:</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="7483" class="lg lh iq lc b gy li lj l lk ll">let peanuts = ['Snoopy', 'Linus', 'Lucy']</span><span id="592a" class="lg lh iq lc b gy lm lj l lk ll">let [snoopy, linus, lucy] = peanuts</span><span id="f034" class="lg lh iq lc b gy lm lj l lk ll">console.log(snoopy) //=&gt; 'Snoopy'<br/>console.log(linus) //=&gt; 'Linus'<br/>console.log(lucy) //=&gt; 'Lucy'</span></pre><p id="88cb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">首先，声明一个名为<code class="fe ln lo lp lc b">peanuts</code>的变量，并赋予它一个包含三个字符串的数组:<code class="fe ln lo lp lc b">['Snoopy', 'Linus', 'Lucy']</code>。第二，声明一个析构表达式，一个包含三个变量的数组:<code class="fe ln lo lp lc b">[snoopy, linus, lucy]</code>，并赋予名为<code class="fe ln lo lp lc b">peanuts</code>的变量，该变量本身包含前面提到的字符串数组。第三，变量被记录到控制台并产生它们包含的值:来自<code class="fe ln lo lp lc b">peanuts</code>数组的字符串。</p><p id="ac71" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">实际上，<code class="fe ln lo lp lc b">peanuts</code>数组的单个值被分配给唯一的变量，这些变量可以自主使用，同时仍然引用一个已建立的源。注意，因为析构赋值提供了变量，所以可以使用不同的变量名。例如，<code class="fe ln lo lp lc b">[snoopy, linus, lucy]</code>可以用<code class="fe ln lo lp lc b">[dog, bestFriend, complicatedCrush]</code>替换，并产生相同的结果。</p></div><div class="ab cl lq lr hu ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="ij ik il im in"><p id="8198" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">析构赋值的一个重要作用是在React应用程序中。React使用一个叫做<code class="fe ln lo lp lc b">props</code>的便利工具在组件之间发送数据。如果这句话对你毫无意义，那就去了解一下<a class="ae kw" href="https://reactjs.org/" rel="noopener ugc nofollow" target="_blank">反应</a>！Props是一个对象，通常从父组件传递到子组件。</p><p id="99b2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">假设有一个名为<code class="fe ln lo lp lc b">&lt;Peanuts/&gt;</code>的父组件和一个名为<code class="fe ln lo lp lc b">&lt;Gang/&gt;</code>的子组件。为了突出析构赋值所提供的冗长性的减少，这两个组件都是类组件。<code class="fe ln lo lp lc b">&lt;Peanuts/&gt;</code>将是一个容器组件，<code class="fe ln lo lp lc b">&lt;Gang/&gt;</code>将是一个表示组件。<code class="fe ln lo lp lc b">&lt;Peanuts/&gt;</code>将包含一个花生角色列表作为对象，该对象将作为道具传递给<code class="fe ln lo lp lc b">&lt;Gang/&gt;</code>，T5将呈现角色的名字。</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="64dd" class="lg lh iq lc b gy li lj l lk ll">// Peanuts component ///////////////////////////////////////////////</span><span id="22c0" class="lg lh iq lc b gy lm lj l lk ll">import React, {Component} from 'react'<br/>import &lt;Gang/&gt; from './Gang'</span><span id="b650" class="lg lh iq lc b gy lm lj l lk ll">class Peanuts extends Component {</span><span id="6f22" class="lg lh iq lc b gy lm lj l lk ll">  const peanutsGang = {<br/>    aBoy: 'Charlie Brown',<br/>    sister: 'Sally Brown',<br/>    dog: 'Snoopy',<br/>    bestFriend: 'Linus van Pelt',<br/>    complicatedCrush: 'Lucy van Pelt',<br/>    pianoMan: 'Schroeder'<br/>  }</span><span id="4c91" class="lg lh iq lc b gy lm lj l lk ll">  render() {<br/>    return (<br/>      &lt;Gang peanutsGang={peanutsGang}/&gt;<br/>    )<br/>  }</span><span id="7673" class="lg lh iq lc b gy lm lj l lk ll">}</span><span id="3957" class="lg lh iq lc b gy lm lj l lk ll">export default Peanuts</span><span id="aaa5" class="lg lh iq lc b gy lm lj l lk ll">// Gang component //////////////////////////////////////////////////</span><span id="f6e6" class="lg lh iq lc b gy lm lj l lk ll">import React, {Component} from 'react'</span><span id="8ec3" class="lg lh iq lc b gy lm lj l lk ll">class Gang extends Component {<br/>  <br/>  render() {<br/>    return (<br/>      &lt;div&gt;<br/>        &lt;h1&gt;The Peanuts Gang!&lt;/h1&gt;<br/>        &lt;ul&gt;<br/>          &lt;li&gt;{this.props.peanutsGang.aBoy}&lt;/li&gt;<br/>          &lt;li&gt;{this.props.peanutsGang.sister}&lt;/li&gt;<br/>          &lt;li&gt;{this.props.peanutsGang.dog}&lt;/li&gt;<br/>          &lt;li&gt;{this.props.peanutsGang.bestFriend}&lt;/li&gt;<br/>          &lt;li&gt;{this.props.peanutsGang.complicatedCrush}&lt;/li&gt;<br/>          &lt;li&gt;{this.props.peanutsGang.pianoMan}&lt;/li&gt;<br/>        &lt;/ul&gt;<br/>      &lt;/div&gt;<br/>    )<br/>  }</span><span id="2d79" class="lg lh iq lc b gy lm lj l lk ll">}</span><span id="9500" class="lg lh iq lc b gy lm lj l lk ll">export default Gang</span></pre><p id="1ece" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe ln lo lp lc b">&lt;Gang/&gt;</code>会呈现这样的东西:</p><p id="4227" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">花生帮！</p><ul class=""><li id="d629" class="lx ly iq ka b kb kc kf kg kj lz kn ma kr mb kv mc md me mf bi translated">查理·布朗</li><li id="07a0" class="lx ly iq ka b kb mg kf mh kj mi kn mj kr mk kv mc md me mf bi translated">莎莉·布朗</li><li id="de26" class="lx ly iq ka b kb mg kf mh kj mi kn mj kr mk kv mc md me mf bi translated">史努比</li><li id="5e9e" class="lx ly iq ka b kb mg kf mh kj mi kn mj kr mk kv mc md me mf bi translated">莱纳斯·范佩尔</li><li id="7e60" class="lx ly iq ka b kb mg kf mh kj mi kn mj kr mk kv mc md me mf bi translated">露西·范佩尔</li><li id="c45a" class="lx ly iq ka b kb mg kf mh kj mi kn mj kr mk kv mc md me mf bi translated">施罗德</li></ul><p id="cc67" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">好悲伤。这可以产生想要的结果，但是<code class="fe ln lo lp lc b">&lt;Gang/&gt;</code>组件中的代码一点也不枯燥。忽略这个例子，因为它不涉及创建一个花生帮数组，该数组充满了表示每个字符的对象，这些对象随后被映射以呈现每个字符的<code class="fe ln lo lp lc b">&lt;li&gt;</code>标签。从这个简单的例子中可以看出<code class="fe ln lo lp lc b">this.props.peanutsGang</code>被重复了很多次。想象一下，一个组件需要更多的道具来以这种方式呈现。在这种情况下，使代码干涸的关键是析构赋值。下面是对<code class="fe ln lo lp lc b">&lt;Gang/&gt;</code>组件的重构:</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="f14f" class="lg lh iq lc b gy li lj l lk ll">// Gang component //////////////////////////////////////////////////</span><span id="8610" class="lg lh iq lc b gy lm lj l lk ll">import React, {Component} from 'react'</span><span id="61b8" class="lg lh iq lc b gy lm lj l lk ll">class Gang extends Component {<br/>  <br/>  render() {</span><span id="a925" class="lg lh iq lc b gy lm lj l lk ll">    const {<br/>      aBoy, <br/>      sister, <br/>      dog, <br/>      bestFriend, <br/>      complicatedCrush, <br/>      pianoMan<br/>    } = this.props.peanutsGang    </span><span id="754a" class="lg lh iq lc b gy lm lj l lk ll">    return (<br/>      &lt;div&gt;<br/>        &lt;h1&gt;The Peanuts Gang!&lt;/h1&gt;<br/>        &lt;ul&gt;<br/>          &lt;li&gt;{aBoy}&lt;/li&gt;<br/>          &lt;li&gt;{sister}&lt;/li&gt;<br/>          &lt;li&gt;{dog}&lt;/li&gt;<br/>          &lt;li&gt;{bestFriend}&lt;/li&gt;<br/>          &lt;li&gt;{complicatedCrush}&lt;/li&gt;<br/>          &lt;li&gt;{pianoMan}&lt;/li&gt;<br/>        &lt;/ul&gt;<br/>      &lt;/div&gt;<br/>    )<br/>  }</span><span id="05f1" class="lg lh iq lc b gy lm lj l lk ll">}</span><span id="680f" class="lg lh iq lc b gy lm lj l lk ll">export default Gang</span></pre><p id="607a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这是达到相同结果的更干净的方法。在render方法中，一个析构表达式被声明为一个对象，该对象填充了表示其值中的键的变量:<code class="fe ln lo lp lc b">this.props.peanutsGang</code>—一个来自父组件<code class="fe ln lo lp lc b">&lt;Peanuts/&gt;</code>的对象，它作为一个属性被传递。然后，在每个<code class="fe ln lo lp lc b">&lt;li&gt;</code>标签中，需要包含的只是变量。注意，析构赋值最常用于从props中访问整个对象或函数，<em class="ml">例如</em> <code class="fe ln lo lp lc b">{peanutsGang} = this.props</code>，而不仅仅是像这个例子中的内部属性。存在许多可能的用途！</p><p id="6c50" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">析构赋值初看起来可能不友好，但是一旦在你的头脑中发生了理解的转变，它将是一个受欢迎的朋友，并且将帮助你的代码变得干燥和高效！上面的例子很简单，但是想象一下当应用程序扩展和增加复杂性时，析构赋值的强度。析构赋值也是另一个代码保护程序的组成部分:<a class="ae kw" href="https://reactjs.org/docs/hooks-intro.html" rel="noopener ugc nofollow" target="_blank"> React hooks </a>。在你自己的花生帮中加入破坏任务！</p><p id="d0c3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae kw" href="https://github.com/dangrammer" rel="noopener ugc nofollow" target="_blank">github.com/dangrammer</a><br/>T3】linked.com/in/danieljromansT5<a class="ae kw" href="http://danromans.com/" rel="noopener ugc nofollow" target="_blank">danromans.com</a></p></div></div>    
</body>
</html>