<html>
<head>
<title>Creating a Slack Bot Using Netlify Functions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Netlify函数创建Slack Bot</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/creating-a-slack-bot-using-netlify-functions-465d2a981686?source=collection_archive---------4-----------------------#2021-04-25">https://levelup.gitconnected.com/creating-a-slack-bot-using-netlify-functions-465d2a981686?source=collection_archive---------4-----------------------#2021-04-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="b7fe" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">用TypeScript编写，使用Bolt JS框架，并附带开发技巧</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/856e00d648fc46422411d82dff672451.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gZHggE-GrbtHR49s0Mcdqw.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">由作者创建的带有<a class="ae ky" href="https://slack.com/" rel="noopener ugc nofollow" target="_blank"> Slack </a>和<a class="ae ky" href="https://www.netlify.com/" rel="noopener ugc nofollow" target="_blank"> Netlify </a>标志的图片。</figcaption></figure><h1 id="becd" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">介绍</h1><p id="3725" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated"><a class="ae ky" href="https://www.netlify.com/products/functions/" rel="noopener ugc nofollow" target="_blank"> Netlify Functions </a>是Netlify的无服务器功能版本——部署到托管服务提供商的单一用途脚本，在本例中是Netlify，可按需扩展。<a class="ae ky" href="https://slack.dev/bolt-js/concepts" rel="noopener ugc nofollow" target="_blank"> Bolt JS </a>是一个使用JavaScript构建<a class="ae ky" href="https://slack.com/" rel="noopener ugc nofollow" target="_blank"> Slack </a>应用的框架。我很好奇如何将这两者结合在一起，在没有任何指导的情况下，我最终对这个主题进行了相当多的研究，并最终找到了答案。本操作指南旨在解释如何使用Bolt JS创建基于TypeScript的Slack应用程序，并使用Netlify函数将其作为无服务器函数运行。</p><p id="47e9" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我知道这是一个冗长的操作指南，所以让我给你一个快速的纲要，让你鸟瞰这篇文章。</p><ul class=""><li id="dd59" class="ms mt it lt b lu mn lx mo ma mu me mv mi mw mm mx my mz na bi translated"><strong class="lt iu">步骤#1: </strong>我们将看看如何使用一个现有的模板来创建我们的第一个基于TypeScript的Netlify函数。在这一步，我们将介绍如何在本地构建和运行一个函数，以及如何将它部署到Netlify。这一步构成了本指南的基础。</li><li id="9f05" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated"><strong class="lt iu">第2步:</strong>现在我们已经熟悉了Netlify函数，我们将开始集成Slack，方法是创建一个Slack应用程序，获取我们应用程序的凭证并将其集成到我们的函数中，以便该函数可以安全地与我们的Slack应用程序通信。</li><li id="74ed" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated"><strong class="lt iu">步骤#3: </strong>在这一步，我们将把Slack的Bolt JS框架集成到我们的功能中。我们还将看看如何让Slack验证我们的函数URL，并让Slack应用程序订阅一个事件。</li><li id="a7a2" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated"><strong class="lt iu">步骤#4: </strong>现在我们已经订阅了一个事件，当用户在频道中发布消息时，我们将能够从Slack接收消息。我们还会考虑让我们的Slack应用程序在每次发生这种情况时都做出响应。</li><li id="7c01" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated"><strong class="lt iu">步骤#5 </strong>:在这一步中，我们将学习如何使用Slack的slash命令和Netlify函数来覆盖一个稍微不同的实现场景。</li><li id="8d12" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated"><strong class="lt iu">整理和总结:</strong>最后，我们将看看如何进一步整理我们的演示源代码，并提供一些提示，让它可以投入生产。</li></ul><h2 id="5420" class="ng la it bd lb nh ni dn lf nj nk dp lj ma nl nm ll me nn no ln mi np nq lp nr bi translated">高层设计</h2><p id="c507" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">为了让您对所有组件如何组合在一起以及如何相互作用有一个高层次的概述，这里有一个高层次的设计图。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ns"><img src="../Images/5aa64501264dbfe418cca74294f230ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dJWWf9zXEQCz1BYB2I0GhA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">图片由作者提供</figcaption></figure></div><div class="ab cl nt nu hx nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="im in io ip iq"><h1 id="dfc9" class="kz la it bd lb lc oa le lf lg ob li lj jz oc ka ll kc od kd ln kf oe kg lp lq bi translated">步骤1:创建hello world网络功能</h1><h2 id="fe2a" class="ng la it bd lb nh ni dn lf nj nk dp lj ma nl nm ll me nn no ln mi np nq lp nr bi translated">样板代码</h2><p id="ddbd" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">让我们从创建一个简单的基于类型脚本的hello world Netlify函数开始。为了加快速度，我在GitHub上创建了<a class="ae ky" href="https://github.com/ClydeDz/netlify-functions-typescript" rel="noopener ugc nofollow" target="_blank">这个模板库</a>——请派生这个库，并在您的计算机上本地克隆它。</p><p id="a52c" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">让我解释一下这是干什么的。我已经创建了一个文件<code class="fe of og oh oi b">index.ts</code>，它将是我们正在编写的函数的入口点。由于Netlify函数被部署到<a class="ae ky" href="https://docs.netlify.com/functions/overview/#default-deployment-options" rel="noopener ugc nofollow" target="_blank"> AWS的无服务器Lambda函数中</a>，我们需要导出一个<code class="fe of og oh oi b">handler()</code>方法。由于我们使用的是TypeScript，我们需要对输入参数进行强类型化，并且由于这些参数将部署在AWS Lambda函数上，因此事件参数将接收类型为<code class="fe of og oh oi b">APIGatewayEvent</code>的对象，而上下文将接收类型为<code class="fe of og oh oi b">Context</code>的对象。返回对象的body属性中的内容将在浏览器中打印出来。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oj ok l"/></div></figure><p id="b992" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><code class="fe of og oh oi b">netlify.toml</code>文件包含一个构建命令，它将在我们稍后构建项目时运行。本质上，Netlify build将运行命令<code class="fe of og oh oi b">npm run build</code>，该命令最终将运行<code class="fe of og oh oi b">tsc</code>。<code class="fe of og oh oi b">tsconfig.json</code>文件告诉TypeScript编译器(即<code class="fe of og oh oi b">tsc</code>)将编译后的JavaScript文件放在哪里。在本例中，我们将JavaScript文件放在<code class="fe of og oh oi b">.netlify/functions</code>目录中，这也是Netlify在提供函数时将查看的默认目录。</p><p id="c80a" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">执行命令<code class="fe of og oh oi b">npm install</code>安装所有节点依赖项。现在不要担心在本地运行这个函数，在这样做之前，我们还需要做一些事情。</p><h2 id="41ac" class="ng la it bd lb nh ni dn lf nj nk dp lj ma nl nm ll me nn no ln mi np nq lp nr bi translated">向Netlify注册</h2><p id="fdb6" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">接下来，我们将注册Netlify并从Git repo创建一个新站点。一旦你创建了你的团队，前往团队仪表板，点击按钮<strong class="lt iu">从Git </strong>新建站点。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ol"><img src="../Images/e96e2038f392a25bd4dcdaee67f0d248.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A5IhUGb17M6u8wzxRY3brA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">图片由作者提供</figcaption></figure><p id="211e" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">这将向您展示创建站点的三步向导。第一步是将Netlify与您的GitHub存储库连接起来，也就是您之前在分叉模板后创建的存储库。当您提交对此repo的主要分支的更改时，Netlify将自动构建和部署您的站点内容。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi om"><img src="../Images/4ddcf0d76e50808d51c9ad38d9b06cea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X5TUyJ6GD1IUOYFhwjXxrg.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">图片由作者提供</figcaption></figure><p id="2edf" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">如果这弹出一个GitHub登录页面，请输入您的用户名和密码继续。你现在应该会看到一个<strong class="lt iu">安装Netlify </strong>的屏幕以及你的GitHub用户名。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi on"><img src="../Images/49e1d554c8062c63ade7067299d72e60.png" data-original-src="https://miro.medium.com/v2/resize:fit:1236/format:webp/1*wfOyWLrWnCp9h-ca6Ja2ew.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">图片由作者提供</figcaption></figure><p id="4dea" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">如果您选择了该选项，您应该会看到下一个屏幕，该屏幕允许您授予Netlify对所有存储库的访问权限，或者您可以手动授予对某些存储库的访问权限。无论哪种方式，都要确保分叉的存储库可以访问。对于本文，我将选择<strong class="lt iu">所有库</strong>，然后点击<strong class="lt iu">安装</strong>按钮来安装Netlify。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oo"><img src="../Images/2973d938be8b814b2d90fcbf6f088ad0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1072/format:webp/1*orF_skLkhctOvk4E2nyYnA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">图片由作者提供</figcaption></figure><p id="bcc9" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">现在，您将被重定向回Netlify，在那里您可以选择要从中创建站点的存储库。我将选择我的演示库<a class="ae ky" href="https://github.com/ClydeDz/netlify-functions-slack-demo" rel="noopener ugc nofollow" target="_blank"><strong class="lt iu">ClydeDz/netlify-functions-slack-demo</strong></a>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi op"><img src="../Images/5f39604f02c9fed21c0f369aef2f12cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1338/format:webp/1*FSGtWGEJMyPyAW6Prm8IVg.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">图片由作者提供</figcaption></figure><p id="a4f7" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">保留第三步中的所有设置，然后单击<strong class="lt iu">部署站点</strong>按钮继续。Netlify将创建一个站点并触发第一次构建和部署。</p><h2 id="2d71" class="ng la it bd lb nh ni dn lf nj nk dp lj ma nl nm ll me nn no ln mi np nq lp nr bi translated">更新网站名称</h2><p id="1fba" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">默认情况下，Netlify会为您创建一个随机的站点名称，以使其独一无二。这意味着，您的函数URL也将包含这个名称。我们将在后台使用这个函数，所以用户永远看不到这个URL，因此，这个名称应该无关紧要。事实上，我个人的建议是让这个URL尽可能的随机，这样别人就很难猜到它并对它进行随机请求。</p><p id="9072" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">但是，如果您确实想重命名，请转到Netlify中的<strong class="lt iu">站点设置</strong>，从<strong class="lt iu">站点详细信息</strong>部分，点击<strong class="lt iu">更改站点名称</strong>按钮。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oq"><img src="../Images/ed4f48507dcb37f163d7b2b1f9169ef7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HFlTfJYsa0JrnzABmyjPVw.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">图片由作者提供</figcaption></figure><p id="4db2" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在弹出窗口中输入您的新站点名称，并点击<strong class="lt iu">保存</strong>按钮。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi or"><img src="../Images/a7adee65eb608a0460c6726d89094500.png" data-original-src="https://miro.medium.com/v2/resize:fit:1106/format:webp/1*NWkku41v_il6eoN4E_GeUw.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">图片由作者提供</figcaption></figure><p id="bdb9" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">当您在<strong class="lt iu">站点详细信息</strong>屏幕时，也请抓取<strong class="lt iu"> API ID </strong>。</p><h2 id="d9ee" class="ng la it bd lb nh ni dn lf nj nk dp lj ma nl nm ll me nn no ln mi np nq lp nr bi translated">安装Netlify Dev CLI</h2><p id="aa4f" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated"><a class="ae ky" href="https://www.netlify.com/products/dev/" rel="noopener ugc nofollow" target="_blank"> Netlify Dev CLI </a>是一个命令行工具，用于在本地运行所有Netlify产品。我们将用它在本地测试我们的功能。要安装CLI，请运行命令<code class="fe of og oh oi b">npm i netlify-cli -g</code>。您可以随时使用命令<code class="fe of og oh oi b">netlify --version</code>来检查您正在运行的CLI版本。可用命令的完整列表可以在他们的<a class="ae ky" href="https://cli.netlify.com/" rel="noopener ugc nofollow" target="_blank">文档站点</a>上找到。</p><h2 id="8c2d" class="ng la it bd lb nh ni dn lf nj nk dp lj ma nl nm ll me nn no ln mi np nq lp nr bi translated">网络链接</h2><p id="e161" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">下一步您需要做的是将本地设备上的代码与您刚刚创建的Netlify站点链接起来。为此，键入命令<code class="fe of og oh oi b">netlify link</code>。这将在终端中启动一个交互式会话，您可以选择如何创建这个链接。最简单的方法是选择<strong class="lt iu">使用当前git远程原点</strong>。因为您已经将代码库下载到了本地机器上，并且因为Netlify已经连接到了这个库的远程源，所以Netlify将很容易地为您建立链接。简单来说，如果A=B and B=C，那么A=C</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi os"><img src="../Images/da2b667727c878619d756eda4d44eb19.png" data-original-src="https://miro.medium.com/v2/resize:fit:1290/format:webp/1*jxZQpRQ6OYTrk5dy5Ka8LQ.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">图片由作者提供</figcaption></figure><p id="2c39" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在后台，Netlify将创建一个名为<code class="fe of og oh oi b">.netlify</code>的隐藏文件夹，在这个文件夹中，它将放置一个名为<code class="fe of og oh oi b">state.json</code>的文件，其中包含您的站点id。这个文件夹也应该被自动添加到<code class="fe of og oh oi b">.gitignore</code>文件中，所以我们不需要担心它被检入——这不是敏感信息，它只是不需要被检入。</p><h2 id="0ecb" class="ng la it bd lb nh ni dn lf nj nk dp lj ma nl nm ll me nn no ln mi np nq lp nr bi translated">代码更改</h2><p id="98e2" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在这个阶段，我只想让你把<code class="fe of og oh oi b">index.ts</code>的文件名更新为<code class="fe of og oh oi b">slackbot.ts</code>。</p><h2 id="8f0f" class="ng la it bd lb nh ni dn lf nj nk dp lj ma nl nm ll me nn no ln mi np nq lp nr bi translated">比较代码更改</h2><p id="0e2b" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">如果您想比较这一步的代码变化，请访问GitHub上的<a class="ae ky" href="https://github.com/ClydeDz/netlify-functions-slack-demo/commit/f73ae6a12efb09778ca097fb9a1e3dbb9b4fe02b" rel="noopener ugc nofollow" target="_blank"> this diff page </a>。</p><h2 id="a4d8" class="ng la it bd lb nh ni dn lf nj nk dp lj ma nl nm ll me nn no ln mi np nq lp nr bi translated">闪耀时刻到了！</h2><p id="c5c2" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">让我们在本地看看我们的hello world函数是什么样子的。运行命令<code class="fe of og oh oi b">netlify build</code>编译您的代码，并在<code class="fe of og oh oi b">.netlify/functions</code>文件夹中生成JavaScript文件。</p><p id="510f" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">一旦构建成功完成，运行命令<code class="fe of og oh oi b">netlify dev</code>来启动本地开发服务器。Netlify为我的应用程序分配了端口8888，所以我将转到<a class="ae ky" href="http://localhost:8888/.netlify/functions/slackbot" rel="noopener ugc nofollow" target="_blank"> http://localhost:8888/。netlify/functions/slackbot </a>查看输出。您应该在浏览器中看到打印的<code class="fe of og oh oi b">Hello, World</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/9d1814a3ae2b1c6b3929e8472637cfc1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1096/format:webp/1*Jt5Cdu1solN52zvq52IRsA.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">图片由作者提供</figcaption></figure><blockquote class="ou ov ow"><p id="0a95" class="lr ls ox lt b lu mn ju lw lx mo jx lz oy mp mc md oz mq mg mh pa mr mk ml mm im bi translated"><strong class="lt iu">提示:</strong>执行命令<code class="fe of og oh oi b">netlify dev --live</code>将在本地运行该函数，但这一次，Netlify将使用公共URL公开展示该函数。在用Slack测试您的函数时，您会想要使用这种方法，因为这消除了像<a class="ae ky" href="https://ngrok.com/" rel="noopener ugc nofollow" target="_blank"> ngrok </a>这样的工具的使用。</p></blockquote><h2 id="374f" class="ng la it bd lb nh ni dn lf nj nk dp lj ma nl nm ll me nn no ln mi np nq lp nr bi translated">构建和部署</h2><p id="f9f6" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">祝贺您在本地运行了第一个Netlify函数！让我们提交这个更改并将其推送到GitHub。很快，你应该会看到Netlify构建你的代码，并把它发布到你的Netlify站点上。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pb"><img src="../Images/7d16253e525f81f4acb6294958afcd0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:778/format:webp/1*u1gnlExfd-GHiorTapt97w.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">图片由作者提供</figcaption></figure><p id="5854" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">现在，不用localhost:8888，而是使用Netlify站点URL在浏览器中查看您的函数。您可以从Netlify中的<strong class="lt iu">站点概述</strong>选项卡获取您的Netlify站点URL。您应该再次看到浏览器中打印的<code class="fe of og oh oi b">Hello, World</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pc"><img src="../Images/f18ce91da2f4e018bd1c4e9e189775ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1144/format:webp/1*cFniHY0uhcsR7LsXZhyNig.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">图片由作者提供</figcaption></figure><h2 id="7241" class="ng la it bd lb nh ni dn lf nj nk dp lj ma nl nm ll me nn no ln mi np nq lp nr bi translated">开发者提示</h2><p id="1cca" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我强烈推荐在您的开发中使用<a class="ae ky" href="https://code.visualstudio.com/" rel="noopener ugc nofollow" target="_blank">而不是代码</a>。使用VS代码，您可以利用多个终端来实现无缝的开发体验。一个终端可以用来执行像<code class="fe of og oh oi b">netlify dev --live</code>这样的命令来运行函数的本地版本，第二个终端可以在对应用程序进行代码修改后执行像<code class="fe of og oh oi b">netlify build</code>这样的命令。您会注意到，在使用第二个终端再次构建您的功能后，live function应用程序会自动在第一个终端中重新加载。这很好，因为这样你的开发URL保持不变。</p></div><div class="ab cl nt nu hx nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="im in io ip iq"><h1 id="d6ba" class="kz la it bd lb lc oa le lf lg ob li lj jz oc ka ll kc od kd ln kf oe kg lp lq bi translated">步骤2:创建一个Slack应用程序</h1><h2 id="519f" class="ng la it bd lb nh ni dn lf nj nk dp lj ma nl nm ll me nn no ln mi np nq lp nr bi translated">签约雇用</h2><p id="ac1e" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">如果你还没有，免费注册Slack，创建一个工作空间和一个频道。我们将在这个频道测试一些东西，所以先不要把你的伙伴添加到这个频道。</p><h2 id="c178" class="ng la it bd lb nh ni dn lf nj nk dp lj ma nl nm ll me nn no ln mi np nq lp nr bi translated">创建应用程序</h2><p id="4b1c" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">前往<a class="ae ky" href="https://api.slack.com/apps" rel="noopener ugc nofollow" target="_blank">https://api.slack.com/apps</a>，点击<strong class="lt iu">创建应用</strong>按钮。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pd"><img src="../Images/2f9373ff0cedeac86043ec5f8f709cf3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k6e5VMKzAWi6LqzQBLrP-g.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">图片由作者提供</figcaption></figure><p id="6990" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">将此应用程序部署到生产环境时，您可能希望更新频道图标、描述和应用程序的其他方面。现在，由于我们只构建了一个演示应用程序，我们将省略这些细节。</p><h2 id="0117" class="ng la it bd lb nh ni dn lf nj nk dp lj ma nl nm ll me nn no ln mi np nq lp nr bi translated">添加范围</h2><p id="0d9d" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">默认情况下，Slack应用程序不能执行任何读取或写入功能。要添加功能，我们需要向应用程序添加范围。从左侧栏中，选择<strong class="lt iu"> OAuth &amp; Permissions </strong>，然后向下滚动到<strong class="lt iu"> Scopes </strong>部分。</p><p id="f0c5" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在此部分，点击<strong class="lt iu">添加OAuth范围</strong>按钮，并从范围列表中选择<code class="fe of og oh oi b">chat:write</code>。我们可以随时回来添加更多的范围，所以现在让我们从小处着手。您的更改将自动保存。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pe"><img src="../Images/e09e4f453e432f0592b9559f9da7f0c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G41M2tnxpzGEzwPO1RGHnA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">图片由作者提供</figcaption></figure><p id="64d0" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">现在，让我们向上滚动到您的工作区的<strong class="lt iu"> OAuth令牌</strong>部分，并单击<strong class="lt iu">安装到工作区</strong>按钮。您可能需要接受要求您授予的权限，然后进入下一个屏幕。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pf"><img src="../Images/ea4ce06c6fba4cad1727a54b3476abbb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1396/format:webp/1*k4GTW0YqpG9ao1K5T4PQ1Q.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">图片由作者提供</figcaption></figure><p id="043a" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">安装此应用程序后，您现在将获得一个<strong class="lt iu"> Bot用户OAuth令牌</strong>。请把那个价值抄下来，因为我们很快就要用到它。</p><h2 id="77ed" class="ng la it bd lb nh ni dn lf nj nk dp lj ma nl nm ll me nn no ln mi np nq lp nr bi translated">获取签名机密</h2><p id="ae9a" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">点击左侧边栏菜单中的<strong class="lt iu">基本信息</strong>选项卡，向下滚动至<strong class="lt iu">签名密码</strong>字段。点击<strong class="lt iu">显示</strong>按钮，然后复制并保存该值。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pg"><img src="../Images/ffeac5a08a20f0274f5cf3b4cc994242.png" data-original-src="https://miro.medium.com/v2/resize:fit:1316/format:webp/1*lKOxwKapIu5AiChCHvAaNQ.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">图片由作者提供</figcaption></figure><h2 id="e34d" class="ng la it bd lb nh ni dn lf nj nk dp lj ma nl nm ll me nn no ln mi np nq lp nr bi translated">将这些价值注入到你的应用中</h2><p id="6466" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">转到您的代码，在根目录下创建一个<code class="fe of og oh oi b">.env</code>文件。这个文件应该已经添加到了<code class="fe of og oh oi b">.gitignore</code>文件中，所以不要担心提交这个更改。</p><p id="b6e5" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在这个文件中，使用格式<code class="fe of og oh oi b">key=value</code>添加签名秘密和bot令牌。您可以随意命名该密钥，但是如果您正在跟进，请按照下面的截图命名。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ph"><img src="../Images/aac82d4989d43ab2ff8ae8eefebc052c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6YeJzWaqbltJmGITP4TX_A.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">图片由作者提供</figcaption></figure><p id="e217" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">运行命令<code class="fe of og oh oi b">npm i dotenv @types/node --save-dev</code>来安装这些npm包。dotenv NPM包允许我们访问。env文件和<a class="ae ky" href="https://www.npmjs.com/package/@types/node" rel="noopener ugc nofollow" target="_blank">类型/节点</a> npm包为节点提供了类型定义。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oj ok l"/></div></figure><p id="1f4f" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">像上面的代码片段一样，在<code class="fe of og oh oi b">slackbot.ts</code>的开头导入dotenv包，并在文件中尽可能早地调用config方法。然后，您应该能够使用<code class="fe of og oh oi b">process.env.SLACK_SIGNING_SECRET</code>访问签名秘密，并使用<code class="fe of og oh oi b">process.env.SLACK_BOT_TOKEN</code>访问bot令牌。</p><h2 id="ed65" class="ng la it bd lb nh ni dn lf nj nk dp lj ma nl nm ll me nn no ln mi np nq lp nr bi translated">网络生活中的环境变量</h2><p id="c668" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">由于<code class="fe of og oh oi b">.env</code>文件没有添加到源代码控制中，我们需要添加相同的环境变量到Netlify中，以便函数可以访问这些值。在Netlify中，从导航菜单中转至<strong class="lt iu">站点设置</strong>，然后选择<strong class="lt iu">构建&amp;部署</strong>，然后从子菜单中选择<strong class="lt iu">环境</strong>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pi"><img src="../Images/88a8597e64195bc177961fb19bcdcc47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YADT_bldPiu4w4TmICmVtg.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">图片由作者提供</figcaption></figure><p id="7584" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">点击<strong class="lt iu">新变量</strong>按钮，添加相同的键和值对。点击<strong class="lt iu">保存</strong>以使更改生效。</p></div><div class="ab cl nt nu hx nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="im in io ip iq"><h1 id="400d" class="kz la it bd lb lc oa le lf lg ob li lj jz oc ka ll kc od kd ln kf oe kg lp lq bi translated">步骤3:集成Bolt JS框架</h1><h2 id="628a" class="ng la it bd lb nh ni dn lf nj nk dp lj ma nl nm ll me nn no ln mi np nq lp nr bi translated">安装螺栓</h2><p id="6b37" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">Bolt是一个JavaScript框架，用来构建Slack应用。运行命令<code class="fe of og oh oi b">npm install @slack/bolt --save-dev</code>来安装这个框架，并在<code class="fe of og oh oi b">slackbot.ts</code>文件的开头添加下面的代码片段。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oj ok l"/></div></figure><p id="8673" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">除了导入<code class="fe of og oh oi b">App</code>，它是Bolt对Slack应用程序的表示，我们还要导入<code class="fe of og oh oi b">ExpressReceiver</code>，因为我们需要将Bolt的事件监听器与Netlify函数集成在一起。</p><p id="dbf8" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">接下来，我们将下面的代码片段添加到<code class="fe of og oh oi b">slackbot.ts</code>中，用我们之前复制的签名秘密初始化<code class="fe of og oh oi b">ExpressReceiver</code>，之后，我们将立即用签名秘密、bot令牌和之前创建的express receiver实例初始化我们的<code class="fe of og oh oi b">App</code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oj ok l"/></div></figure><p id="d982" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在<code class="fe of og oh oi b">handler()</code>方法内部，让我们添加下面的代码。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oj ok l"/></div></figure><p id="d3f8" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们将在<code class="fe of og oh oi b">event.body</code>属性中接收的内容传递给一个实用方法，该方法将把这个字符串内容解析成一个JSON对象。接下来，我们将让我们的函数实现一个小目标——检查我们从Slack接收到的有效负载是否属于类型<code class="fe of og oh oi b">url_verification</code>,然后简单地用它接收到的挑战进行响应。Slack发送这种类型的请求来验证您是否为Slack应用程序输入了正确的URL端点。</p><p id="f32d" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">不要忘记添加这个实用函数，它将接收到的内容解析成一个JSON对象。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oj ok l"/></div></figure><p id="0e58" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们还将从函数响应中删除文本hello world，因为我们不再需要打印出来。</p><p id="e860" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在<code class="fe of og oh oi b">tsconfig.json</code>文件中，我们将在编译器选项部分添加属性<code class="fe of og oh oi b">“esModuleInterop”: true</code>，因为如果没有这个，我们的构建将由于其他依赖包而产生错误。</p><h2 id="06a4" class="ng la it bd lb nh ni dn lf nj nk dp lj ma nl nm ll me nn no ln mi np nq lp nr bi translated">构建和部署</h2><p id="e5fb" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">现在，我们已经为这一步做了代码更改，让我们在本地运行命令<code class="fe of og oh oi b">netlify build</code>来编译TypeScript文件并在<code class="fe of og oh oi b">netlify/functions</code>文件夹中生成JavaScript文件。</p><p id="b6c4" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">假设没有错误，将您的更改提交到GitHub存储库。这将触发Netlify构建和自动部署。</p><h2 id="6211" class="ng la it bd lb nh ni dn lf nj nk dp lj ma nl nm ll me nn no ln mi np nq lp nr bi translated">比较代码更改</h2><p id="fd15" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">如果您想比较这一步的代码变化，请访问GitHub上的<a class="ae ky" href="https://github.com/ClydeDz/netlify-functions-slack-demo/commit/f1fed35591d7ac75ae9d7a4de2f93bd54da2258b" rel="noopener ugc nofollow" target="_blank"> this diff page </a>。</p><h2 id="eef7" class="ng la it bd lb nh ni dn lf nj nk dp lj ma nl nm ll me nn no ln mi np nq lp nr bi translated">完成Slack的挑战</h2><p id="a0fe" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">前往你的应用的Slack API设置页面。然后，从左侧边栏菜单中，点击<strong class="lt iu">事件订阅</strong>。所有可以在Slack中执行的不同操作都被归类到不同的事件中。我们的应用程序可以订阅一个或多个这些事件，所以当它们发生时，Slack会向我们的应用程序发送一个POST请求，其中包含事件的详细信息，使我们的应用程序能够处理这些事件。</p><p id="ba0b" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">由于这是您第一次来这里，我们需要通过轻触上的开关<strong class="lt iu">来启用事件，然后在<strong class="lt iu">请求URL </strong>字段中，输入您的Netlify函数的URL。我的网络生活功能的网址是<br/><a class="ae ky" href="https://netlify-functions-slack-demo.netlify.app/.netlify/functions/slackbot" rel="noopener ugc nofollow" target="_blank">https://netlify-functions-slack-demo.netlify.app/.netlify/functions/slackbot </a>这是我在下面的截图中输入的内容。</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pj"><img src="../Images/6b1dcd49ca3ae71ae2e771d2b95ec7d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZcsKdUfqvL4j39BMSiebfw.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">图片由作者提供</figcaption></figure><p id="efa0" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">当您输入这个URL时，Slack会立即向您的Netlify函数发送一个<code class="fe of og oh oi b">url_verification</code>有效负载，并期望您的函数返回挑战。这是您之前更改代码的场景。</p><p id="60d0" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">既然我们在这里，让我们订阅一个事件。展开<strong class="lt iu">订阅机器人事件</strong>部分，然后点击<strong class="lt iu">添加机器人用户事件</strong>按钮，搜索并添加<strong class="lt iu">消息。</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pk"><img src="../Images/a5ff571605c3b7e4a4bc8911ac9a2ae7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1392/format:webp/1*JjXS6W6UspfJUUEsJqncsA.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">图片由作者提供</figcaption></figure><p id="f348" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">点击<strong class="lt iu">保存更改</strong>按钮保存您的更新后，会要求您在工作区重新安装应用程序。请在继续之前完成此操作。</p></div><div class="ab cl nt nu hx nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="im in io ip iq"><h1 id="e763" class="kz la it bd lb lc oa le lf lg ob li lj jz oc ka ll kc od kd ln kf oe kg lp lq bi translated">第四步:接收和发送你的第一条信息</h1><h2 id="d78a" class="ng la it bd lb nh ni dn lf nj nk dp lj ma nl nm ll me nn no ln mi np nq lp nr bi translated">代码更改</h2><p id="3c24" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">现在该做些有趣的事情了。让我们来看看您的函数如何从Slack接收消息并回复。在<code class="fe of og oh oi b">slackbot.ts</code>文件中，将下面的代码片段添加到<code class="fe of og oh oi b">handle()</code>方法中。这个代码片段构造了一个<code class="fe of og oh oi b">ReceiverEvent</code>有效负载，它由接收到的解析的JSON主体和一个<code class="fe of og oh oi b">ack()</code>方法组成，函数将通过确认收到来自Slack的事件来响应这个方法。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oj ok l"/></div></figure><p id="e838" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">然后我们将这个<code class="fe of og oh oi b">ReceiverEvent</code>对象传递给Bolt的<code class="fe of og oh oi b">processEvent()</code>方法。<code class="fe of og oh oi b">processEvent()</code>方法将检测接收到的事件类型，并将控制传递给相关方法。</p><p id="36b6" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">接下来，让我们在<code class="fe of og oh oi b">slackbot.ts</code>文件中添加<code class="fe of og oh oi b">message()</code>方法来处理任何传入的消息并回复“Hi👋".</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oj ok l"/></div></figure><h2 id="5e22" class="ng la it bd lb nh ni dn lf nj nk dp lj ma nl nm ll me nn no ln mi np nq lp nr bi translated">比较您的代码</h2><p id="613d" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">如果您想比较这一步的代码变化，请访问GitHub上的<a class="ae ky" href="https://github.com/ClydeDz/netlify-functions-slack-demo/commit/b66bf0e4b6bb1474c6fcfcf6c5401c70cc0c9711" rel="noopener ugc nofollow" target="_blank"> this diff page </a>。</p><h2 id="f077" class="ng la it bd lb nh ni dn lf nj nk dp lj ma nl nm ll me nn no ln mi np nq lp nr bi translated">构建和部署</h2><p id="9a0b" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">提交您的更改并将它们推送到GitHub，这样它就会自动构建和部署。</p><h2 id="3f9b" class="ng la it bd lb nh ni dn lf nj nk dp lj ma nl nm ll me nn no ln mi np nq lp nr bi translated">测试时差的变化</h2><p id="656b" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">现在是时候在松弛通道中测试功能了。将演示应用程序添加到您的Slack频道。这一点很重要，因为你的应用程序无法阅读发布在该应用程序不属于的频道中的消息。在通道中发布一条消息后，您的函数应该立即从Slack接收一个有效负载，并用一条消息进行响应。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi pl"><img src="../Images/1e2f1a8476f91b23a8be5eb5d1e58e2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:674/format:webp/1*uR30gk6xOOX7hK_PUVDXUg.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">图片由作者提供</figcaption></figure><h2 id="869e" class="ng la it bd lb nh ni dn lf nj nk dp lj ma nl nm ll me nn no ln mi np nq lp nr bi translated">回复帖子并添加表情反应</h2><p id="2000" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">为了简洁起见，我不会深入讨论让您的Slack应用程序回复一个线程并添加表情符号反应的细节。相反，我会让你通过GitHub上的<a class="ae ky" href="https://github.com/ClydeDz/netlify-functions-slack-demo/commit/3bc26c5a06d619a60b93ac40d82394ed000160dd" rel="noopener ugc nofollow" target="_blank">diff page</a>来查看你需要做出的更改，以使你的Slack应用程序回复一个线程，并通过GitHub上的<a class="ae ky" href="https://github.com/ClydeDz/netlify-functions-slack-demo/commit/82dfa348d5b0fd0f8f2b4ac2e4f0e1b364cf4f53" rel="noopener ugc nofollow" target="_blank">diff page</a>来查看让你的Slack应用程序用表情符号回复所需的代码更改。注意，为了添加一个反应，你将额外需要<strong class="lt iu">反应:写</strong>范围。</p></div><div class="ab cl nt nu hx nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="im in io ip iq"><h1 id="63e4" class="kz la it bd lb lc oa le lf lg ob li lj jz oc ka ll kc od kd ln kf oe kg lp lq bi translated">第5步:用斜杠命令删除</h1><h2 id="bbda" class="ng la it bd lb nh ni dn lf nj nk dp lj ma nl nm ll me nn no ln mi np nq lp nr bi translated">创建斜线命令</h2><p id="c55d" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">前往你的应用的Slack API设置页面，从左侧边栏菜单中选择<strong class="lt iu">斜杠命令</strong>。在出现的屏幕上，点击<strong class="lt iu">创建新命令</strong>按钮。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pm"><img src="../Images/038ffae262005da0356e6b2102fadb92.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KSnKMXrlFMB55QTDMd8Xzw.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">图片由作者提供</figcaption></figure><p id="b5f2" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">顾名思义，斜杠命令的前缀是正斜杠，后跟命令名和一些可选的参数。例如，你可以有一个类似<code class="fe of og oh oi b">/greet morning</code>的斜杠命令，在那里你期待一个早晨主题的问候。你也可以有一个不带参数的斜杠命令，比如像<code class="fe of og oh oi b">/greet</code>那样给你发送一个随机的问候。请记住，您的命令名称在所有应用程序中必须是唯一的，并且最好是简短的——所以要明智地选择！</p><p id="d0ab" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">从<strong class="lt iu">创建新命令</strong>屏幕，输入应该以正斜杠为前缀的命令名，在<strong class="lt iu">请求URL </strong>字段中输入网络功能URL，键入简短描述以便用户了解该命令的作用，如果您的斜杠命令需要一个参数，可选地，在<strong class="lt iu">用法提示</strong>字段中键入一个参数。</p><p id="e0b0" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">我们将使<strong class="lt iu">转义频道、用户和发送到您的应用程序的链接</strong>复选框处于未选中状态，因为我们的斜杠命令在此阶段不需要用户id和频道id，所以一个纯文本未转义字符串是可以的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pn"><img src="../Images/36dc94082f0ddc33229323f8ab0b935e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1162/format:webp/1*XawsiXDpk5Ksjz4Bw1zvXQ.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">图片由作者提供</figcaption></figure><p id="d3df" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">保存您的更改，然后在您的工作空间中重新安装该应用程序。</p><h2 id="f1ad" class="ng la it bd lb nh ni dn lf nj nk dp lj ma nl nm ll me nn no ln mi np nq lp nr bi translated">代码更改</h2><p id="b324" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">让我们添加另一个方法来监听这个斜杠命令并响应它。在下面的代码片段中，<code class="fe of og oh oi b">command()</code>方法的第一个参数是斜杠命令名，在第二个参数中，我们将使用对象析构来只接受<code class="fe of og oh oi b">body</code>和<code class="fe of og oh oi b">ack</code>对象。当响应slash命令时，我们的应用程序必须在发送实际消息之前的三秒钟内向Slack发送确认。<code class="fe of og oh oi b">ack</code>对象是确认函数。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oj ok l"/></div></figure><p id="088b" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">接下来，我们调用<code class="fe of og oh oi b">chat.postEphemeral()</code>方法向Slack发送回复。使用<code class="fe of og oh oi b">postEphemeral()</code>方法发送的回复只能被触发这个斜杠命令的用户看到，因此我们在方法中传递用户id。当然，你仍然可以继续使用常规的<code class="fe of og oh oi b">say()</code>或<code class="fe of og oh oi b">chat.postMessage()</code>回复一条所有人都能看到的消息。</p><blockquote class="ou ov ow"><p id="0625" class="lr ls ox lt b lu mn ju lw lx mo jx lz oy mp mc md oz mq mg mh pa mr mk ml mm im bi translated"><strong class="lt iu">提示:</strong>属性<code class="fe of og oh oi b">body.text</code>将包含slack命令名。因此，如果您的命令类似于<code class="fe of og oh oi b">/greet morning</code>，那么<code class="fe of og oh oi b">body.text</code>将包含<code class="fe of og oh oi b">morning</code>。属性<code class="fe of og oh oi b">body.channel_name</code>将包含值<code class="fe of og oh oi b">directmessage</code>当这个斜杠命令通过直接消息被触发到应用程序时。</p></blockquote><h2 id="2eff" class="ng la it bd lb nh ni dn lf nj nk dp lj ma nl nm ll me nn no ln mi np nq lp nr bi translated">提交、构建和部署</h2><p id="f6d4" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">提交您的更改，并将其上传到GitHub。在Netlify上成功构建和部署之后，我们将继续测试我们的slash命令。</p><h2 id="e94c" class="ng la it bd lb nh ni dn lf nj nk dp lj ma nl nm ll me nn no ln mi np nq lp nr bi translated">在空闲时测试它</h2><p id="ad6e" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在您的Slack频道中，使用闪电图标弹出一个弹出窗口，然后搜索您的命令名。在输入框中输入命令名后，按enter键。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi po"><img src="../Images/895d4a93627b492862bff73f23b90f89.png" data-original-src="https://miro.medium.com/v2/resize:fit:840/format:webp/1*M-4FakQ_pVdu-AJigztRIQ.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">图片由作者提供</figcaption></figure><p id="8acc" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">不幸的是，这次您会得到一个错误。</p><h2 id="133b" class="ng la it bd lb nh ni dn lf nj nk dp lj ma nl nm ll me nn no ln mi np nq lp nr bi translated">解决纷争</h2><p id="a771" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">最简单的方法是在<code class="fe of og oh oi b">handler()</code>方法中添加一个<code class="fe of og oh oi b">console.log()</code>语句来检查接收到的事件对象内容。当然，这一次，您不希望将更改推送到Netlify，而是希望在本地解决这个问题。</p><p id="ddd5" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">这意味着运行命令<code class="fe of og oh oi b">netlify dev --live</code>以获得可公开访问的功能应用程序的本地实例，然后更新slash命令的<strong class="lt iu">请求URL </strong>字段以使用该URL。然后再次触发slash命令，跳回终端窗口查看输出。</p><p id="9082" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">您会注意到事件对象包含该事件的大量数据，但是如果您在<code class="fe of og oh oi b">parseRequestBody()</code>方法之后放置一个<code class="fe of og oh oi b">console.log()</code>方法，您会注意到有效负载是未定义的。现在，如果您将slash命令的<code class="fe of og oh oi b">event.body</code>属性中的内容与通道中消息的<code class="fe of og oh oi b">event.body</code>属性中接收到的内容进行比较，您将会注意到格式上的重大差异。</p><p id="7733" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">斜杠命令的<code class="fe of og oh oi b">event.body</code>属性将包含以下格式的消息:</p><pre class="kj kk kl km gt pp oi pq pr aw ps bi"><span id="627e" class="ng la it oi b gy pt pu l pv pw">body: 'token=some_token&amp;team_id=your_team_id&amp;team_domain=your_workspace'</span></pre><p id="0a13" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">而通道中常规消息的<code class="fe of og oh oi b">event.body</code>属性将是这样的格式:</p><pre class="kj kk kl km gt pp oi pq pr aw ps bi"><span id="10e4" class="ng la it oi b gy pt pu l pv pw">body: '{"token":"some_token","team_id":"your_team_id","api_app_id":"your_api_id"}',</span></pre><p id="9d5e" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">前者是查询字符串格式，而后者是JSON字符串格式。这意味着，我们将需要我们的<code class="fe of og oh oi b">parseRequestBody()</code>方法来处理这两种情况。</p><h2 id="7b30" class="ng la it bd lb nh ni dn lf nj nk dp lj ma nl nm ll me nn no ln mi np nq lp nr bi translated">修理</h2><p id="99c7" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">幸运的是，<code class="fe of og oh oi b">event.headers[“content-type”]</code>属性在两个场景中都包含不同的值。对于常规消息事件，<code class="fe of og oh oi b">event.headers[“content-type”]</code>为<code class="fe of og oh oi b">application/json</code>，而对于斜线命令事件，<code class="fe of og oh oi b">event.headers[“content-type”]</code>为<code class="fe of og oh oi b">application/x-www-form-urlencoded</code>。</p><p id="b1e2" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">让我们更新我们的<code class="fe of og oh oi b">parseRequestBody()</code>方法，接受这个内容类型值作为第二个参数，并更新这个方法中的代码，将格式查询字符串转换为JSON对象。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oj ok l"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">非常感谢这个<a class="ae ky" href="https://www.developerdrive.com/turning-the-querystring-into-a-json-object-using-javascript/" rel="noopener ugc nofollow" target="_blank">源代码</a>提供了将查询字符串转换成JSON的代码片段。</figcaption></figure><p id="9545" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">现在，在<code class="fe of og oh oi b">handler()</code>方法中，让我们更新<code class="fe of og oh oi b">parseRequestBody()</code>方法来传递内容类型值。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oj ok l"/></div></figure><h2 id="6786" class="ng la it bd lb nh ni dn lf nj nk dp lj ma nl nm ll me nn no ln mi np nq lp nr bi translated">此步骤的代码更改</h2><p id="eba9" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">如果您想比较这一步的代码变化，请访问GitHub上的<a class="ae ky" href="https://github.com/ClydeDz/netlify-functions-slack-demo/commit/76ff0f2efc268faf65e8e67884eb85389211bf7c" rel="noopener ugc nofollow" target="_blank"> this diff page </a>。</p><h2 id="9790" class="ng la it bd lb nh ni dn lf nj nk dp lj ma nl nm ll me nn no ln mi np nq lp nr bi translated">构建和部署</h2><p id="8ae9" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">提交您所有的更改，并将它们上传到您的GitHub库。成功构建和部署后，继续下一步。</p><h2 id="d8f9" class="ng la it bd lb nh ni dn lf nj nk dp lj ma nl nm ll me nn no ln mi np nq lp nr bi translated">在空闲时测试它</h2><p id="d4d5" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">是时候再次测试斜杠命令了。这一次，你应该会收到应用程序的回复，这条消息只有你能看到。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi px"><img src="../Images/ae928f7ba706c389a7404249b47421ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:410/format:webp/1*OZ9AvbT9na62azw7nqzG4g.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">图片由作者提供</figcaption></figure><h2 id="81f2" class="ng la it bd lb nh ni dn lf nj nk dp lj ma nl nm ll me nn no ln mi np nq lp nr bi translated">其他松弛交互和事件</h2><p id="798d" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">虽然我已经以一般消息和斜杠命令的形式介绍了两个不同的事件，但是我们仍然可以看到大量的Slack事件和交互。然而，你会发现剩下的部分可以通过以某种形式重复上述步骤来实现。因此，就本文的范围而言，我不打算演示更多的场景。</p></div><div class="ab cl nt nu hx nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="im in io ip iq"><h1 id="586b" class="kz la it bd lb lc oa le lf lg ob li lj jz oc ka ll kc od kd ln kf oe kg lp lq bi translated">整理你的代码和结论</h1><p id="e6c4" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">虽然上面只是演示代码，但还有很多地方需要进一步整理。<a class="ae ky" href="https://github.com/ClydeDz/netlify-functions-slack-demo" rel="noopener ugc nofollow" target="_blank">这个</a>是我希望生产就绪的源代码的样子，但是你可以根据自己的喜好自由清理代码。以下是我更新的一些亮点:</p><h2 id="3d2c" class="ng la it bd lb nh ni dn lf nj nk dp lj ma nl nm ll me nn no ln mi np nq lp nr bi translated">重构和单元测试</h2><p id="71e0" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我尽可能将代码提取到<a class="ae ky" href="https://github.com/ClydeDz/netlify-functions-slack-demo/pull/1/files#diff-39b2554fd18da165b59a6351b1aafff3714e2a80c1435f2de9706355b4d32351" rel="noopener ugc nofollow" target="_blank">单独的方法</a>中，并利用了多个类型脚本文件。然后<a class="ae ky" href="https://github.com/ClydeDz/netlify-functions-slack-demo/pull/1/files#diff-c37842b08434952211c06ad3cdc71258303dcce7491a2b5f2005876cfbc26681" rel="noopener ugc nofollow" target="_blank">为这段代码添加了单元测试</a>，并且<a class="ae ky" href="https://github.com/ClydeDz/netlify-functions-slack-demo/commit/3b5ccd0504511bbf95b2bb1e05f3fabe23d078f6#diff-7ae45ad102eab3b6d7e7896acd08c427a9b25b346470d7bc6507b6481575d519R8" rel="noopener ugc nofollow" target="_blank">更新了构建命令</a>以便在编译文件之前运行这些单元测试。注意，你不需要测试Bolt的代码，因为他们的团队已经测试过了。您只想测试您添加的代码。</p><h2 id="f211" class="ng la it bd lb nh ni dn lf nj nk dp lj ma nl nm ll me nn no ln mi np nq lp nr bi translated">类型</h2><p id="d09d" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">我已经添加了变量、方法和方法参数的类型。在某些情况下，我创建了一个<a class="ae ky" href="https://github.com/ClydeDz/netlify-functions-slack-demo/pull/1/files#diff-8fa4b52909f895e8cda060d2035234e0a42ca2c7d3f8f8de1b35a056537bf199R23-R25" rel="noopener ugc nofollow" target="_blank">自定义类型</a>来稍微简化事情。</p><h2 id="07ba" class="ng la it bd lb nh ni dn lf nj nk dp lj ma nl nm ll me nn no ln mi np nq lp nr bi translated">仅公开您需要的功能</h2><p id="3bcf" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">你会注意到我已经把<code class="fe of og oh oi b">slackbot.ts</code>文件移到了名为<code class="fe of og oh oi b">functions</code>的文件夹中，而其他文件仍然在<code class="fe of og oh oi b">src</code>文件夹下。我还更新了<code class="fe of og oh oi b">tsconfig.json</code>文件中的<a class="ae ky" href="https://github.com/ClydeDz/netlify-functions-slack-demo/pull/1/files#diff-b55cdbef4907b7045f32cc5360d48d262cca5f94062e353089f189f4460039e0R7" rel="noopener ugc nofollow" target="_blank">输出目录</a>，将编译后的JavaScript文件放入<code class="fe of og oh oi b">./netlify</code>目录，由于TypeScript编译器会维护文件夹结构，所以它会在将编译后的<code class="fe of og oh oi b">slackbot.js</code>文件放入文件夹之前，自动在<code class="fe of og oh oi b">netlify</code>文件夹中创建<code class="fe of og oh oi b">functions</code>文件夹。</p><p id="f3c4" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">由于缺省情况下，Netlify将只提供来自<code class="fe of og oh oi b">netlify/functions</code>文件夹的函数，它现在将只暴露<code class="fe of og oh oi b">slackbot.js</code>，而将<code class="fe of og oh oi b">utils.js</code>和<code class="fe of og oh oi b">constants.js</code>隐藏起来。下图直观地说明了这一过程。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi py"><img src="../Images/f20e062a7d2de251cb09aa911c659838.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4zJo1mveRxgzSHlR0UArTA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">图片由作者提供</figcaption></figure><p id="5072" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在这段代码的演示版本中，<code class="fe of og oh oi b">utils.js</code>和<code class="fe of og oh oi b">constants.js</code>文件都放在了<code class="fe of og oh oi b">functions</code>文件夹中。这意味着当您试图通过函数URL访问utils文件时，它将抛出一个错误。</p><h2 id="803c" class="ng la it bd lb nh ni dn lf nj nk dp lj ma nl nm ll me nn no ln mi np nq lp nr bi translated">分发您的应用</h2><p id="26ba" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">本操作指南中内置的演示应用程序可在单一工作空间中使用。如果你想在多个工作空间中使用你的应用程序，或者通过应用程序目录将你的应用程序分发给更多的受众，那么你可能必须遵循<a class="ae ky" href="https://api.slack.com/start/distributing" rel="noopener ugc nofollow" target="_blank">这篇文章</a>来查看你可能需要对你的应用程序进行哪些更改。</p><p id="54b0" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">就是这样！感谢阅读。</p></div></div>    
</body>
</html>