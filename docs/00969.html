<html>
<head>
<title>Build a Drag and Drop App with Vue.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Vue.js构建一个拖放应用程序</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-make-an-app-with-drag-and-drop-with-vue-js-35f7a3739ae1?source=collection_archive---------1-----------------------#2019-10-03">https://levelup.gitconnected.com/how-to-make-an-app-with-drag-and-drop-with-vue-js-35f7a3739ae1?source=collection_archive---------1-----------------------#2019-10-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/73de9b263aa689a50395466cd3deb877.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1_mFojYmtebB-r2jf_Efhg.png"/></div></div></figure><p id="e106" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu">现在在</strong><a class="ae kz" href="http://jauyeung.net/subscribe/" rel="noopener ugc nofollow" target="_blank"><strong class="kd iu">http://jauyeung.net/subscribe/</strong></a><strong class="kd iu">订阅我的邮件列表。</strong></p><p id="50ad" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu">在推特上关注我</strong><a class="ae kz" href="https://twitter.com/AuMayeung" rel="noopener ugc nofollow" target="_blank"><strong class="kd iu">https://twitter.com/AuMayeung</strong></a></p><p id="f2d1" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">拖放是许多交互式web应用程序的一项功能。它为用户操作数据提供了一种直观的方式。添加拖放功能很容易添加到Vue.js应用程序中。</p><h2 id="d65a" class="la lb it bd lc ld le dn lf lg lh dp li km lj lk ll kq lm ln lo ku lp lq lr ls bi translated">我们正在构建的应用程序</h2><p id="2c98" class="pw-post-body-paragraph kb kc it kd b ke lt kg kh ki lu kk kl km lv ko kp kq lw ks kt ku lx kw kx ky im bi translated">我们将创建一个todo应用程序，它有两列——一个To Do列和一个Done列。您可以在两者之间拖放，将状态从待办事项更改为已完成，反之亦然。为了构建应用程序，我们使用Vue素材库和<a class="ae kz" href="https://github.com/SortableJS/Vue.Draggable" rel="noopener ugc nofollow" target="_blank"> Vue可拖动包</a>来使应用程序看起来更好，并提供简单的拖放功能。它也将有一个导航菜单和一个顶栏。</p><h2 id="e834" class="la lb it bd lc ld le dn lf lg lh dp li km lj lk ll kq lm ln lo ku lp lq lr ls bi translated">入门指南</h2><p id="0b63" class="pw-post-body-paragraph kb kc it kd b ke lt kg kh ki lu kk kl km lv ko kp kq lw ks kt ku lx kw kx ky im bi translated">要开始构建应用程序，我们首先要安装Vue CLI。我们通过运行<code class="fe ly lz ma mb b">npm i -g @vue/cli</code>来安装它。之后，我们可以创建项目。为此，我们运行<code class="fe ly lz ma mb b">vue create todo-app</code>。我们没有选择默认值，而是通过选择替代选项来定制应用程序的脚手架，并选择Vue路由器、Babel和CSS预处理器。按照说明完成搭建后，我们就可以添加一些库了。</p><p id="ff5e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们需要添加Axios来进行HTTP请求，并添加Vue素材库和我们之前提到的Vue可拖动包，以使我们的应用程序更漂亮，并分别提供我们想要的拖放功能。此外，我们需要Vee Validate包来让我们在应用程序中进行表单验证。为了安装这些包，我们运行<code class="fe ly lz ma mb b">npm i axios vuedraggable vue-material vee-validate@2.2.14</code>。</p><h2 id="ee03" class="la lb it bd lc ld le dn lf lg lh dp li km lj lk ll kq lm ln lo ku lp lq lr ls bi translated">构建应用程序</h2><p id="277b" class="pw-post-body-paragraph kb kc it kd b ke lt kg kh ki lu kk kl km lv ko kp kq lw ks kt ku lx kw kx ky im bi translated">现在我们可以写一些代码了。首先，我们添加一个mixin来让我们提出请求。为此，我们创建了一个<code class="fe ly lz ma mb b">mixins</code>文件夹并添加了一个名为<code class="fe ly lz ma mb b">todoMixin.js</code>的文件，然后我们将以下内容放入我们的文件:</p><pre class="mc md me mf gt mg mb mh mi aw mj bi"><span id="2fc2" class="la lb it mb b gy mk ml l mm mn">const axios = require('axios');<br/>const apiUrl = '<a class="ae kz" href="http://localhost:3000'" rel="noopener ugc nofollow" target="_blank">http://localhost:3000'</a>;</span><span id="688b" class="la lb it mb b gy mo ml l mm mn">export const todoMixin = {<br/>    methods: {<br/>        getTodos() {<br/>            return axios.get(`${apiUrl}/todos`);<br/>        },</span><span id="5685" class="la lb it mb b gy mo ml l mm mn">        addTodo(data) {<br/>            return axios.post(`${apiUrl}/todos`, data);<br/>        },</span><span id="8ee5" class="la lb it mb b gy mo ml l mm mn">        editTodo(data) {<br/>            return axios.put(`${apiUrl}/todos/${data.id}`, data);<br/>        },</span><span id="5df5" class="la lb it mb b gy mo ml l mm mn">        deleteTodo(id) {<br/>            return axios.delete(`${apiUrl}/todos/${id}`);<br/>        }<br/>    }<br/>}</span></pre><p id="4baf" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这些函数将在我们的主页中用来发出HTTP请求，在我们的to do列表上执行CRUD。我们现在将创建主页。在<code class="fe ly lz ma mb b">Home.vue</code>中，我们用以下内容替换现有内容:</p><pre class="mc md me mf gt mg mb mh mi aw mj bi"><span id="6dc7" class="la lb it mb b gy mk ml l mm mn">&lt;template&gt;<br/>  &lt;div class="home"&gt;<br/>    &lt;div class="center"&gt;<br/>      &lt;h1&gt;To Do List&lt;/h1&gt;<br/>      &lt;md-button class="md-raised" <a class="ae kz" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>="showDialog = true"&gt;Add Todo&lt;/md-button&gt;<br/>    &lt;/div&gt;</span><span id="d75f" class="la lb it mb b gy mo ml l mm mn">&lt;div class="content"&gt;<br/>      &lt;md-dialog :md-active.sync="showDialog"&gt;<br/>        &lt;md-dialog-title&gt;Add Todo&lt;/md-dialog-title&gt;<br/>        &lt;form <a class="ae kz" href="http://twitter.com/submit" rel="noopener ugc nofollow" target="_blank">@submit</a>="addNewTodo" novalidate&gt;<br/>          &lt;md-field :class="{ 'md-invalid': errors.has('description') }"&gt;<br/>            &lt;label for="description"&gt;Description&lt;/label&gt;<br/>            &lt;md-input<br/>              type="text"<br/>              name="description"<br/>              v-model="taskData.description"<br/>              v-validate="'required'"<br/>            &gt;&lt;/md-input&gt;<br/>            &lt;span class="md-error" v-if="errors.has('description')"&gt;{{errors.first('description')}}&lt;/span&gt;<br/>          &lt;/md-field&gt;</span><span id="cb3b" class="la lb it mb b gy mo ml l mm mn">&lt;md-dialog-actions&gt;<br/>            &lt;md-button class="md-primary" <a class="ae kz" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>="showDialog = false"&gt;Close&lt;/md-button&gt;<br/>            &lt;md-button class="md-primary" <a class="ae kz" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>="showDialog = false"&gt;Save&lt;/md-button&gt;<br/>          &lt;/md-dialog-actions&gt;<br/>        &lt;/form&gt;<br/>      &lt;/md-dialog&gt;<br/>      &lt;div class="lists"&gt;<br/>        &lt;div class="left"&gt;<br/>          &lt;h2&gt;To Do&lt;/h2&gt;<br/>          &lt;draggable v-model="todo" group="tasks" <a class="ae kz" href="http://twitter.com/change" rel="noopener ugc nofollow" target="_blank">@change</a>="updateTodo"&gt;<br/>            &lt;div v-for="t in todo" :key="t.id" class="item"&gt;<br/>              {{t.description}}<br/>              &lt;a <a class="ae kz" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>="deleteTask(t.id)"&gt;<br/>                &lt;md-icon&gt;close&lt;/md-icon&gt;<br/>              &lt;/a&gt;<br/>            &lt;/div&gt;<br/>          &lt;/draggable&gt;<br/>        &lt;/div&gt;<br/>        &lt;div class="right"&gt;<br/>          &lt;h2&gt;Done&lt;/h2&gt;<br/>          &lt;draggable v-model="done" group="tasks" <a class="ae kz" href="http://twitter.com/change" rel="noopener ugc nofollow" target="_blank">@change</a>="updateTodo"&gt;<br/>            &lt;div v-for="d in done" :key="d.id" class="item"&gt;<br/>              {{d.description}}<br/>              &lt;a <a class="ae kz" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>="deleteTask(d.id)"&gt;<br/>                &lt;md-icon&gt;close&lt;/md-icon&gt;<br/>              &lt;/a&gt;<br/>            &lt;/div&gt;<br/>          &lt;/draggable&gt;<br/>        &lt;/div&gt;<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="e3c1" class="la lb it mb b gy mo ml l mm mn">&lt;script&gt;<br/>// @ is an alias to /src<br/>import draggable from "vuedraggable";<br/>import { todoMixin } from "@/mixins/todoMixin";</span><span id="8b39" class="la lb it mb b gy mo ml l mm mn">export default {<br/>  name: "home",<br/>  components: {<br/>    draggable<br/>  },<br/>  computed: {<br/>    isFormDirty() {<br/>      return Object.keys(this.fields).some(key =&gt; this.fields[key].dirty);<br/>    }<br/>  },<br/>  mixins: [todoMixin],<br/>  data() {<br/>    return {<br/>      todo: [],<br/>      done: [],<br/>      showDialog: false,<br/>      taskData: {}<br/>    };<br/>  },<br/>  beforeMount() {<br/>    this.getNewTodos();<br/>  },<br/>  methods: {<br/>    async addNewTodo(evt) {<br/>      evt.preventDefault();<br/>      if (!this.isFormDirty || this.errors.items.length &gt; 0) {<br/>        return;<br/>      }<br/>      await this.addTodo(this.taskData);<br/>      this.showDialog = false;<br/>      this.getNewTodos();<br/>    },</span><span id="17e0" class="la lb it mb b gy mo ml l mm mn">    async getNewTodos() {<br/>      const response = await this.getTodos();<br/>      this.todo = response.data.filter(t =&gt; !t.done);<br/>      this.done = response.data.filter(t =&gt; t.done);<br/>    },</span><span id="6168" class="la lb it mb b gy mo ml l mm mn">    async updateTodo(evt) {<br/>      let todo = evt.removed &amp;&amp; evt.removed.element;<br/>      if (todo) {<br/>        todo.done = !todo.done;<br/>        await this.editTodo(todo);<br/>      }<br/>    },</span><span id="e3ce" class="la lb it mb b gy mo ml l mm mn">    async deleteTask(id) {<br/>      const todo = await this.deleteTodo(id);<br/>      this.getNewTodos();<br/>    }<br/>  }<br/>};<br/>&lt;/script&gt;</span><span id="76eb" class="la lb it mb b gy mo ml l mm mn">&lt;style lang="scss" scoped&gt;<br/>.center {<br/>  text-align: center;<br/>}</span><span id="dcfe" class="la lb it mb b gy mo ml l mm mn">.md-dialog {<br/>  width: 70vw;<br/>}</span><span id="d3ce" class="la lb it mb b gy mo ml l mm mn">form {<br/>  width: 92%;<br/>}</span><span id="0c29" class="la lb it mb b gy mo ml l mm mn">.md-dialog-title.md-title {<br/>  color: black !important;<br/>}</span><span id="a97d" class="la lb it mb b gy mo ml l mm mn">.lists {<br/>  padding-left: 5vw;<br/>  display: flex;<br/>  align-items: flex-start;<br/>  .left,<br/>  .right {<br/>    width: 45vw;<br/>    padding: 20px;<br/>    min-height: 200px;<br/>    .item {<br/>      padding: 10px;<br/>      border: 1px solid black;<br/>      background-color: white;<br/>      display: flex;<br/>      justify-content: space-between;<br/>      a {<br/>        cursor: pointer;<br/>      }<br/>    }<br/>  }<br/>}<br/>&lt;/style&gt;</span></pre><p id="2c9e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们添加了一个带有表单的对话框，用于输入任务的描述。该字段是必填的，但用户可以输入任何内容。<code class="fe ly lz ma mb b">addTodo</code>函数获取输入的数据，如果有效就提交。<code class="fe ly lz ma mb b">this.fields</code>函数由Vee Validate包提供，包含对象中的所有字段，因此我们可以检查这些字段是否被更改。每当函数返回的任何东西发生变化时，<code class="fe ly lz ma mb b">computed</code>属性中的任何东西都是计算机。</p><p id="2f6b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">接下来，我们添加了两个列表，我们可以在它们之间拖动，让我们将任务的状态更改为done或not done。列表是模板上的<code class="fe ly lz ma mb b">draggable</code>组件。我们在由<code class="fe ly lz ma mb b">data</code>函数返回的对象中的<code class="fe ly lz ma mb b">draggable</code>组件中定义了模型。重要的是，我们有相同的<code class="fe ly lz ma mb b">group</code>道具，这样我们可以在它们之间拖动2个可拖动的组件。每当发生拖放时，就会引发<code class="fe ly lz ma mb b">change</code>事件并调用<code class="fe ly lz ma mb b">updateTodo</code>函数。该函数将切换任务的<code class="fe ly lz ma mb b">done</code>标志，并请求保存任务。</p><p id="e304" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">每个任务还有一个删除它的按钮。当点击关闭按钮时，调用<code class="fe ly lz ma mb b">deleteTodo</code>功能。任务的<code class="fe ly lz ma mb b">id</code>被传递到函数中，所以我们可以请求删除任务。</p><p id="8f60" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">接下来在<code class="fe ly lz ma mb b">App.vue</code>中，我们用以下代码添加菜单和左侧导航栏:</p><pre class="mc md me mf gt mg mb mh mi aw mj bi"><span id="6862" class="la lb it mb b gy mk ml l mm mn">&lt;template&gt;<br/>  &lt;div id="app"&gt;<br/>    &lt;md-toolbar&gt;<br/>      &lt;md-button class="md-icon-button" <a class="ae kz" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>="showNavigation = true"&gt;<br/>        &lt;md-icon&gt;menu&lt;/md-icon&gt;<br/>      &lt;/md-button&gt;<br/>      &lt;h3 class="md-title"&gt;Todo App&lt;/h3&gt;<br/>    &lt;/md-toolbar&gt;<br/>    &lt;md-drawer :md-active.sync="showNavigation" md-swipeable&gt;<br/>      &lt;md-toolbar class="md-transparent" md-elevation="0"&gt;<br/>        &lt;span class="md-title"&gt;Todo App&lt;/span&gt;<br/>      &lt;/md-toolbar&gt;</span><span id="a3b3" class="la lb it mb b gy mo ml l mm mn">&lt;md-list&gt;<br/>        &lt;md-list-item&gt;<br/>          &lt;router-link to="/"&gt;<br/>            &lt;span class="md-list-item-text"&gt;Home&lt;/span&gt;<br/>          &lt;/router-link&gt;<br/>        &lt;/md-list-item&gt;<br/>      &lt;/md-list&gt;<br/>    &lt;/md-drawer&gt;</span><span id="9fca" class="la lb it mb b gy mo ml l mm mn">    &lt;router-view /&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="0cad" class="la lb it mb b gy mo ml l mm mn">&lt;script&gt;<br/>export default {<br/>  name: "app",<br/>  data: () =&gt; {<br/>    return {<br/>      showNavigation: false<br/>    };<br/>  }<br/>};<br/>&lt;/script&gt;</span><span id="4881" class="la lb it mb b gy mo ml l mm mn">&lt;style&gt;<br/>.center {<br/>  text-align: center;<br/>}</span><span id="feec" class="la lb it mb b gy mo ml l mm mn">form {<br/>  width: 95vw;<br/>  margin: 0 auto;<br/>}</span><span id="9a0b" class="la lb it mb b gy mo ml l mm mn">.md-toolbar.md-theme-default {<br/>  background: #009688 !important;<br/>  height: 60px;<br/>}</span><span id="7037" class="la lb it mb b gy mo ml l mm mn">.md-title,<br/>.md-toolbar.md-theme-default .md-icon {<br/>  color: #fff !important;<br/>}<br/>&lt;/style&gt;</span></pre><p id="9e98" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><code class="fe ly lz ma mb b">&lt;router-view /&gt;</code>显示我们将在<code class="fe ly lz ma mb b">router.js</code>中定义的路线，仅包含主页。</p><p id="67ca" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在<code class="fe ly lz ma mb b">main.js</code>中，我们输入:</p><pre class="mc md me mf gt mg mb mh mi aw mj bi"><span id="358f" class="la lb it mb b gy mk ml l mm mn">import Vue from 'vue'<br/>import App from './App.vue'<br/>import router from './router'<br/>import store from './store'<br/>import VueMaterial from 'vue-material';<br/>import VeeValidate from 'vee-validate';<br/>import 'vue-material/dist/vue-material.min.css'<br/>import 'vue-material/dist/theme/default.css'</span><span id="e3aa" class="la lb it mb b gy mo ml l mm mn">Vue.config.productionTip = false;</span><span id="3455" class="la lb it mb b gy mo ml l mm mn">Vue.use(VueMaterial);<br/>Vue.use(VeeValidate);</span><span id="1b7d" class="la lb it mb b gy mo ml l mm mn">new Vue({<br/>  router,<br/>  store,<br/>  render: h =&gt; h(App)<br/>}).$mount('#app')</span></pre><p id="c060" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">包括我们在这个应用程序中使用的Vue.js附加库。</p><p id="d4d8" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在<code class="fe ly lz ma mb b">router.js</code>中，我们添加:</p><pre class="mc md me mf gt mg mb mh mi aw mj bi"><span id="9055" class="la lb it mb b gy mk ml l mm mn">import Vue from 'vue'<br/>import Router from 'vue-router'<br/>import Home from './views/Home.vue';</span><span id="3b5f" class="la lb it mb b gy mo ml l mm mn">Vue.use(Router)</span><span id="e446" class="la lb it mb b gy mo ml l mm mn">export default new Router({<br/>  mode: 'history',<br/>  base: process.env.BASE_URL,<br/>  routes: [<br/>    {<br/>      path: '/',<br/>      name: 'home',<br/>      component: Home<br/>    }<br/>  ]<br/>})</span></pre><p id="032b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这会将主页添加到我们的路由列表中，以便在用户键入URL或单击页面链接时显示给用户。</p><p id="46a9" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们的JSON API将通过使用位于<a class="ae kz" href="https://github.com/typicode/json-server" rel="noopener ugc nofollow" target="_blank">https://github.com/typicode/json-server</a>的JSON Server Node.js包来添加，无需编写任何代码。数据将被保存到一个JSON文件中，这样我们就不必自己做后端添加来保存一些简单的数据。我们通过运行<code class="fe ly lz ma mb b">npm i -g json-server</code>来安装服务器。一旦完成，进入我们的项目目录，然后运行<code class="fe ly lz ma mb b">json-server --watch db.json</code>。在<code class="fe ly lz ma mb b">db.json</code>中，我们把:</p><pre class="mc md me mf gt mg mb mh mi aw mj bi"><span id="1897" class="la lb it mb b gy mk ml l mm mn">{<br/>  "todos": []<br/>}</span></pre><p id="fc36" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这样我们就可以使用这些端点将数据保存到<code class="fe ly lz ma mb b">db.json</code>，它们与<code class="fe ly lz ma mb b">todoMixin</code>中的URL相同。</p><p id="a2b8" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">所有工作完成后，我们有以下内容:</p><figure class="mc md me mf gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/3fd1e9863eb10dc72e6eb0cd13988d4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Za3v1r7bm2S2JjUE_9yL9w.png"/></div></div></figure><figure class="mc md me mf gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/73de9b263aa689a50395466cd3deb877.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1_mFojYmtebB-r2jf_Efhg.png"/></div></div></figure></div></div>    
</body>
</html>