<html>
<head>
<title>Deploying a Rails App on DigitalOcean Droplet</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">åœ¨DigitalOcean Dropletä¸Šéƒ¨ç½²Railsåº”ç”¨ç¨‹åº</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://levelup.gitconnected.com/deploy-rails-app-on-digitalocean-droplet-ca60cd3b84c0?source=collection_archive---------11-----------------------#2022-01-18">https://levelup.gitconnected.com/deploy-rails-app-on-digitalocean-droplet-ca60cd3b84c0?source=collection_archive---------11-----------------------#2022-01-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/b7bc1058ad636ef63953d59d605373f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zQFXeIUoRXpoS3X1VOd_PQ.png"/></div></div></figure><p id="8735" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="kw">æ•°å­—æµ·æ´‹</em>æä¾›äº†ä¸€ä¸ªæ˜“äºä½¿ç”¨ã€ä»¥å¼€å‘è€…ä¸ºä¸­å¿ƒçš„å¹³å°ï¼Œæˆæœ¬æ›´ä½ï¼Œå¹¶ä¸”æœ‰æ›´å¤šçš„æ•°æ®ä¸­å¿ƒå¯ç”¨ã€‚<em class="kw">digital ocean Droplets</em><strong class="ka ir"><em class="kw"/></strong>æ˜¯ç®€å•ã€å¯æ‰©å±•çš„è™šæ‹Ÿæœºã€‚æ‚¨åˆ›å»ºçš„æ¯ä¸ªDropletéƒ½æ˜¯ä¸€ä¸ªæ–°çš„æœåŠ¡å™¨ï¼Œå¯ä»¥å•ç‹¬ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºæ›´å¤§çš„åŸºäºäº‘çš„åŸºç¡€æ¶æ„çš„ä¸€éƒ¨åˆ†ã€‚</p></div><div class="ab cl kx ky hu kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="ij ik il im in"><p id="30f0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">é¦–å…ˆï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç®€å•çš„Ruby on Railsåº”ç”¨ç¨‹åºï¼Œç„¶ååˆ›å»ºä¸€ä¸ªdropletï¼Œå®‰è£…å¿…è¦çš„åŒ…å’Œgemï¼Œè®¾ç½®Postgreså¹¶æ‰˜ç®¡åº”ç”¨ç¨‹åºã€‚</p><h1 id="e8df" class="le lf iq bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">åˆ›å»ºRailsåº”ç”¨ç¨‹åº</h1><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="c906" class="ml lf iq mh b gy mm mn l mo mp">rails new app -d postgresql<br/>cd app</span></pre><p id="43e6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">é…ç½®<em class="kw"> database.yml </em>æ–‡ä»¶</p><figure class="mc md me mf gt jr"><div class="bz fp l di"><div class="mq mr l"/></div><figcaption class="ms mt gj gh gi mu mv bd b be z dk translated"><em class="mw"> database.yml </em></figcaption></figure><p id="f4d8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">å¦‚ä½ æ‰€è§ï¼Œæˆ‘ä½¿ç”¨äº†ç¯å¢ƒå˜é‡ï¼Œä½¿ç”¨å®ƒä½ éœ€è¦å®‰è£…<em class="kw"> dotenv-rails </em> gem</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="d690" class="ml lf iq mh b gy mm mn l mo mp">gem 'dotenv-rails', groups: [:development, :test]<br/>bundle</span></pre><p id="50fc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">å¹¶åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª. envæ–‡ä»¶ï¼Œç„¶åç²˜è´´æ‚¨çš„æ•°æ®</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="5bf8" class="ml lf iq mh b gy mm mn l mo mp">DATABASE_USERNAME=&lt;username&gt;<br/>DATABASE_PASSWORD=&lt;password&gt;<br/>DATABASE_HOST=localhost</span></pre><p id="53b6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ä¸ºäº†è·å¾—æ›´å¤šçš„å¯è§æ€§ï¼Œè®©æˆ‘ä»¬ç”Ÿæˆä¸€ä¸ªæ”¯æ¶å¹¶è¿ç§»æ•°æ®åº“</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="d8d2" class="ml lf iq mh b gy mm mn l mo mp">rails g scaffold posts title:string content:text<br/>rails db:setup<br/>rails s</span></pre><p id="5552" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æˆ‘å°†æŠŠæˆ‘çš„åº”ç”¨ç¨‹åºæ”¾åœ¨<a class="ae mx" href="https://github.com/" rel="noopener ugc nofollow" target="_blank"> GitHub </a>ä¸­ã€‚ä¸ºæ­¤ï¼Œæˆ‘åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å­˜å‚¨åº“ï¼Œå°†å®ƒä¸æˆ‘çš„é¡¹ç›®é“¾æ¥èµ·æ¥ï¼Œå‘<em class="kw">æ·»åŠ ç§˜å¯†ä¿¡æ¯ã€‚gitignore </em>å¹¶æ¨é€æäº¤ã€‚</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="e476" class="ml lf iq mh b gy mm mn l mo mp">git remote add origin &lt;your_repo_link&gt;<br/>git branch -M main<br/>echo ".env" &gt;&gt; .gitignore<br/>git add .<br/>git commit -m "Init commit"<br/>git push -u origin main</span></pre><h1 id="5e43" class="le lf iq bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">è®¾ç½®æ•°å­—æµ·æ´‹æ°´æ»´</h1><p id="6087" class="pw-post-body-paragraph jy jz iq ka b kb my kd ke kf mz kh ki kj na kl km kn nb kp kq kr nc kt ku kv ij bi translated">æˆ‘çŒœä½ åœ¨<a class="ae mx" href="https://www.digitalocean.com/" rel="noopener ugc nofollow" target="_blank">æ•°å­—æµ·æ´‹</a>æ³¨å†Œäº†è´¦æˆ·ï¼Œå‡†å¤‡åˆ›å»ºä¸€ä¸ªå°æ»´ã€‚æ‰€ä»¥ï¼Œæˆ‘é€‰æ‹©äº†Ubuntu 20.04é•œåƒå’Œæœ€åŸºç¡€çš„æ–¹æ¡ˆã€‚</p><figure class="mc md me mf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nd"><img src="../Images/70ddf40b1f53648c42d6cdd26564d895.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1KYc70VyPkXOQcXvIWMM_w.png"/></div></div></figure><p id="8114" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ä¸ºäº†åŠ å¿«åˆ›å»ºè¿‡ç¨‹ï¼Œæˆ‘è®¾ç½®äº†ä¸€ä¸ªå¯†ç ï¼Œè€Œä¸æ˜¯SSHå¯†é’¥ï¼Œä½†è¿™æ˜¯ä¸æ¨èçš„ã€‚</p><figure class="mc md me mf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ne"><img src="../Images/0e7b9f82a3068fdd88e41e85911d93b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ga-sXDLisM3f4e6TPGvrtw.png"/></div></div></figure><p id="51cc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">å‡ åˆ†é’Ÿåï¼Œdropletå°†å®Œæˆå®‰è£…ï¼Œæˆ‘ä»¬å¯ä»¥æ‰“å¼€æ§åˆ¶å°ã€‚</p><figure class="mc md me mf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nf"><img src="../Images/5e00c7fc95abed281026f9bb10c8a590.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1QjDxzBAJk2n0w2AqQQ-Fg.jpeg"/></div></div></figure><p id="812c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">å½“æ§åˆ¶å°æ‰“å¼€æ—¶ï¼Œè®©æˆ‘ä»¬å¼€å§‹è®¾ç½®ç¯å¢ƒã€‚è¯·æ³¨æ„ï¼Œæ‚¨å·²ç»é€‰æ‹©äº†æ‰€éœ€çš„Rubyå’ŒRailsç‰ˆæœ¬ã€‚æ‚¨å¯ä»¥ä½¿ç”¨é¡¹ç›®ä¸­çš„<code class="fe ng nh ni mh b">ruby -v</code>å’Œ<code class="fe ng nh ni mh b">rails -v</code>å‘½ä»¤è¿›è¡Œæ£€æŸ¥ã€‚</p><h2 id="c074" class="ml lf iq bd lg nj nk dn lk nl nm dp lo kj nn no ls kn np nq lw kr nr ns ma nt bi translated">ä½¿ç”¨RVMå®‰è£…Ruby</h2><p id="1e14" class="pw-post-body-paragraph jy jz iq ka b kb my kd ke kf mz kh ki kj na kl km kn nb kp kq kr nc kt ku kv ij bi translated">åœ¨dropletçš„æ§åˆ¶å°ä¸­è¾“å…¥ä»¥ä¸‹å‘½ä»¤ã€‚</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="20a5" class="ml lf iq mh b gy mm mn l mo mp">sudo apt update<br/>sudo apt-get install software-properties-common<br/>sudo apt-add-repository -y ppa:rael-gc/rvm<br/>sudo apt-get update<br/>sudo apt-get install rvm</span></pre><p id="bf44" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">âš ï¸é‡å¯æ§åˆ¶å°ã€‚</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="ffe6" class="ml lf iq mh b gy mm mn l mo mp">rvm install &lt;ruby_version&gt;<br/>rvm --default use &lt;ruby_version&gt;</span></pre><h2 id="c08f" class="ml lf iq bd lg nj nk dn lk nl nm dp lo kj nn no ls kn np nq lw kr nr ns ma nt bi translated">å®‰è£…Railså’Œä¾èµ–é¡¹</h2><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="c2ab" class="ml lf iq mh b gy mm mn l mo mp">sudo apt install nodejs npm<br/>npm install --global yarn<br/>gem install bundler<br/>gem install rails -v &lt;rails_version&gt;</span></pre><h2 id="15e5" class="ml lf iq bd lg nj nk dn lk nl nm dp lo kj nn no ls kn np nq lw kr nr ns ma nt bi translated">å®‰è£…Postgres</h2><p id="5fc4" class="pw-post-body-paragraph jy jz iq ka b kb my kd ke kf mz kh ki kj na kl km kn nb kp kq kr nc kt ku kv ij bi translated">è¯·æ³¨æ„ï¼Œæ‚¨é€‰æ‹©äº†ä¸ä¸­ç›¸åŒçš„æ•°æ®åº“ç”¨æˆ·åã€‚ç¯å¢ƒæ–‡ä»¶</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="24f6" class="ml lf iq mh b gy mm mn l mo mp">sudo apt install postgresql postgresql-contrib libpq-dev<br/>sudo -u postgres createuser --interactive</span><span id="ee2d" class="ml lf iq mh b gy nu mn l mo mp"># Enter name of role to add: &lt;database_username&gt;<br/># Shall the new role be a superuser? (y/n)y</span><span id="de8d" class="ml lf iq mh b gy nu mn l mo mp">sudo -u postgres psql -c "ALTER USER &lt;username&gt; PASSWORD '&lt;database_password&gt;';"</span><span id="c086" class="ml lf iq mh b gy nu mn l mo mp"># ALTER ROLE</span></pre><h2 id="9fdd" class="ml lf iq bd lg nj nk dn lk nl nm dp lo kj nn no ls kn np nq lw kr nr ns ma nt bi translated">å…‹éš†å’Œå¯åŠ¨é¡¹ç›®</h2><p id="56fd" class="pw-post-body-paragraph jy jz iq ka b kb my kd ke kf mz kh ki kj na kl km kn nb kp kq kr nc kt ku kv ij bi translated">å…‹éš†é¡¹ç›®å¹¶åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª. envæ–‡ä»¶</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="f88e" class="ml lf iq mh b gy mm mn l mo mp">git clone &lt;your_repo_link&gt;<br/>cd &lt;your_repo_name&gt;<br/>nano .env</span></pre><p id="9377" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">å¹¶å†æ¬¡ç²˜è´´æ‚¨çš„æ•°æ®</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="442d" class="ml lf iq mh b gy mm mn l mo mp">DATABASE_USERNAME=&lt;username&gt;<br/>DATABASE_PASSWORD=&lt;password&gt;<br/>DATABASE_HOST=localhost</span></pre><p id="cce1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æœ€åä¸€æ­¥æ˜¯åˆ›å»ºä¸€ä¸ªæ•°æ®åº“ï¼Œé¢„ç¼–è¯‘èµ„æº(å¯é€‰)ï¼Œå¹¶å¯åŠ¨ç»‘å®šåˆ°droplet IPçš„æœåŠ¡å™¨ã€‚</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="54ae" class="ml lf iq mh b gy mm mn l mo mp">bundle<br/>rails db:setup<br/>rails assets:precompile<br/>rails s -b 0.0.0.0</span></pre><p id="c71b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æ£€æŸ¥æ‚¨çš„ipv4å¹¶å°†å…¶ç²˜è´´åˆ°æ‚¨çš„3000ç«¯å£çš„æµè§ˆå™¨ä¸­ã€‚æˆ‘çš„æƒ…å†µæ˜¯:<em class="kw">147.182.136.41:3000</em></p><div class="mc md me mf gt ab cb"><figure class="nv jr nw nx ny nz oa paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><img src="../Images/c1d280cde17cbc5700bbd889945c8835.png" data-original-src="https://miro.medium.com/v2/resize:fit:1054/format:webp/1*Lgpm3HXvJqIckz0V7YqlIA.jpeg"/></div></figure><figure class="nv jr ob nx ny nz oa paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><img src="../Images/c279c29c350062f1ba31826b12c80d82.png" data-original-src="https://miro.medium.com/v2/resize:fit:948/format:webp/1*ZjXRAXhS-43JfveNPTe5eg.png"/></div></figure></div></div><div class="ab cl kx ky hu kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="ij ik il im in"><p id="b40e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ä¸‡å²ï¼ğŸ‰è¿™å¹¶ä¸å®¹æ˜“ï¼Œä½†æˆ‘å¸Œæœ›ä½ æå–äº†ä¸€äº›æœ‰ç”¨çš„ä¸œè¥¿ã€‚</p></div></div>    
</body>
</html>