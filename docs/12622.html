<html>
<head>
<title>4 Tips to Write Clean Commit History</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">写干净提交历史的4个技巧</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/4-tips-to-write-clean-commit-history-51155f7f23b9?source=collection_archive---------9-----------------------#2022-06-23">https://levelup.gitconnected.com/4-tips-to-write-clean-commit-history-51155f7f23b9?source=collection_archive---------9-----------------------#2022-06-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="d3ba" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph">饭桶</h2><div class=""/><div class=""><h2 id="f91f" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">即使你是初学者，你也可以很容易地学习和理解。</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/9cd7d6fa8ed0856eaea9e292409e8903.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*mdskeOg_BYm1I6Px"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">照片由<a class="ae le" href="https://unsplash.com/@yancymin?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">扬西·敏</a>在<a class="ae le" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="3efc" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi mb translated"><span class="l mc md me bm mf mg mh mi mj di"> A </span>你是否正在使用git并努力在干净提交中组织你的工作？当你开始处理你的任务时，你可以一次提交所有的变更。</p><p id="c808" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我知道你的感受，因为我刚开始的时候就是这样工作的。随着时间的推移，我学会了写干净的提交历史，我很高兴与你分享。</p></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><h1 id="fc13" class="mr ms iq bd mt mu mv mw mx my mz na nb kf nc kg nd ki ne kj nf kl ng km nh ni bi translated">动机—为什么要清除提交历史？</h1><p id="d105" class="pw-post-body-paragraph lf lg iq lh b li nj ka lk ll nk kd ln lo nl lq lr ls nm lu lv lw nn ly lz ma ij bi translated">在我们深入这个话题之前，让我解释一下它的意义。以下是我学到的关于写干净的提交历史的东西。</p><ol class=""><li id="2057" class="no np iq lh b li lj ll lm lo nq ls nr lw ns ma nt nu nv nw bi translated">它在审核我们的拉取请求时为审核者提供了便利。当您很好地组织提交时，它会让您对主题有更好的理解。</li><li id="55b9" class="no np iq lh b li nx ll ny lo nz ls oa lw ob ma nt nu nv nw bi translated">将代码组织成小的提交不会给评审人员带来压力。</li><li id="c521" class="no np iq lh b li nx ll ny lo nz ls oa lw ob ma nt nu nv nw bi translated">它有助于审阅者捕捉给定拉请求中的错误或错误。</li><li id="8390" class="no np iq lh b li nx ll ny lo nz ls oa lw ob ma nt nu nv nw bi translated">将代码组织和结构化为有意义的提交反映了您对特定问题的理解以及您试图解决该问题的方式。</li></ol></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><p id="15e7" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">以下是我的四点建议。每当我从事一项工作时，我通常会运用这些策略。请注意，没有硬性规定。</p><h1 id="3cef" class="mr ms iq bd mt mu oc mw mx my od na nb kf oe kg nd ki of kj nf kl og km nh ni bi translated">不要将重构与业务逻辑调整混为一谈</h1><p id="d096" class="pw-post-body-paragraph lf lg iq lh b li nj ka lk ll nk kd ln lo nl lq lr ls nm lu lv lw nn ly lz ma ij bi translated">在同一个提交中混合重构和调整业务逻辑来支持新特性是一个常见的错误。请避免那样做。这使得评论者很难同时理解这两者。</p><p id="8e39" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我建议提交两次。第一次提交应该只包括代码重构，而不修改现有的业务逻辑。重构可能包括提高代码可读性或应用代码样式等。在第二次提交时添加或调整业务逻辑。</p><h1 id="f03c" class="mr ms iq bd mt mu oc mw mx my od na nb kf oe kg nd ki of kj nf kl og km nh ni bi translated">使配置更改可见</h1><p id="2a74" class="pw-post-body-paragraph lf lg iq lh b li nj ka lk ll nk kd ln lo nl lq lr ls nm lu lv lw nn ly lz ma ij bi translated">配置更改至关重要，需要仔细审查。通过在单独的提交中提交这些更改，使审阅者可以看到这些更改。</p><p id="12d8" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我已经在这里更详细地介绍了这个话题<a class="ae le" href="https://medium.com/@anasanjaria/learned-the-concept-of-snapshot-as-a-code-contributor-663dd3f0ef2e" rel="noopener">。</a></p><h1 id="1685" class="mr ms iq bd mt mu oc mw mx my od na nb kf oe kg nd ki of kj nf kl og km nh ni bi translated">从存储库中删除任何内容</h1><p id="2d53" class="pw-post-body-paragraph lf lg iq lh b li nj ka lk ll nk kd ln lo nl lq lr ls nm lu lv lw nn ly lz ma ij bi translated">我在这篇文章中读到</p><blockquote class="oh"><p id="ebbf" class="oi oj iq bd ok ol om on oo op oq ma dk translated">有经验的软件工程师都知道，最好的工程师在解决问题的时候往往是删除代码，而不是添加代码。</p></blockquote><p id="2082" class="pw-post-body-paragraph lf lg iq lh b li or ka lk ll os kd ln lo ot lq lr ls ou lu lv lw ov ly lz ma ij bi translated">因此，当您删除任何代码时，请确保在单独的提交中完成。此外，确保在提交描述中记录并解释删除的原因。</p><p id="fa4e" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">通过这种方式，您不仅为将来记录了它，还将上下文传达给了审阅者。</p><h1 id="c051" class="mr ms iq bd mt mu oc mw mx my od na nb kf oe kg nd ki of kj nf kl og km nh ni bi translated">实现后的框架</h1><p id="0a44" class="pw-post-body-paragraph lf lg iq lh b li nj ka lk ll nk kd ln lo nl lq lr ls nm lu lv lw nn ly lz ma ij bi translated">如果您正在处理一个具有复杂业务逻辑的特性，我建议将您的代码组织成较小的提交或多个拉请求。</p><p id="b2cc" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">这方面的一个建议是添加一个只包含业务逻辑而不涉及细节的commit。这就是我所说的先有框架再有实现的意思。</p><p id="a0b5" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">考虑下面这个用Scala编写的例子。所以，这将是你的第一次承诺。</p><pre class="kp kq kr ks gt ow ox oy oz aw pa bi"><span id="087c" class="pb ms iq ox b gy pc pd l pe pf">def process(email: String): Unit = {<br/>  val user = getUser(email)<br/>  val score = calculateScore(user.id)<br/>  storeScore(score)<br/>}</span><span id="3da8" class="pb ms iq ox b gy pg pd l pe pf">def getUser(email: String): User = ???</span><span id="b9cd" class="pb ms iq ox b gy pg pd l pe pf">def calculateScore(userId: Int): Int = ???</span><span id="c589" class="pb ms iq ox b gy pg pd l pe pf">def storeScore(score: BigDecimal): Unit = ???</span></pre><p id="99b6" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">即将到来的提交将会用它们各自的单元测试实现单独的方法。</p><p id="177a" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">这只是一个例子，但是你可以把它想象成实现DAO、服务和控制器层。如果你从上到下，也就是从控制器层到DAO，上面的方法是有用的。</p><p id="9a26" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">通常，我更喜欢从下到上，即从DAO到控制器层。</p></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><p id="f8a4" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">生活并不是一帆风顺的。一开始你可能会发现组织工作很有挑战性，但是熟能生巧。这并不像看起来那么有挑战性。</p><p id="7959" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">这里是我在工作中唯一使用的命令——我的git cheatsheet。</p><pre class="kp kq kr ks gt ow ox oy oz aw pa bi"><span id="23ae" class="pb ms iq ox b gy pc pd l pe pf">- git check -b BRANCH-NAME<br/>- git commit -m "TASK-ID your message here"<br/>- git commit --amend<br/>- git cherry-pick commit-id<br/>- git rebase master </span><span id="6c6d" class="pb ms iq ox b gy pg pd l pe pf">// when I would like to edit or amend any specific commit then<br/>- git rebase -i master</span></pre></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><p id="df2c" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">如果你有任何想讨论的问题或场景，请在评论区提问。我很乐意回答你的问题。</p><p id="db2f" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">感谢阅读。</p></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><pre class="kp kq kr ks gt ow ox oy oz aw pa bi"><span id="3d25" class="pb ms iq ox b gy pc pd l pe pf"><strong class="ox ja">Want to connect?<br/></strong><a class="ae le" href="https://www.facebook.com/anas.anjaria.kh" rel="noopener ugc nofollow" target="_blank">Facebook</a> | <a class="ae le" href="https://www.linkedin.com/in/anasanjaria/" rel="noopener ugc nofollow" target="_blank">LinkedIn</a> | <a class="ae le" href="https://twitter.com/anasanjaria" rel="noopener ugc nofollow" target="_blank">Twitter</a></span><span id="20b4" class="pb ms iq ox b gy pg pd l pe pf"><strong class="ox ja">Subscribe to get my work directly into your inbox.<br/></strong><a class="ae le" href="https://medium.com/subscribe/@anasanjaria" rel="noopener">https://medium.com/subscribe/@anasanjaria</a></span></pre></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><h1 id="c899" class="mr ms iq bd mt mu mv mw mx my mz na nb kf nc kg nd ki ne kj nf kl ng km nh ni bi translated">分级编码</h1><p id="a425" class="pw-post-body-paragraph lf lg iq lh b li nj ka lk ll nk kd ln lo nl lq lr ls nm lu lv lw nn ly lz ma ij bi translated">感谢您成为我们社区的一员！更多内容见<a class="ae le" href="https://levelup.gitconnected.com/" rel="noopener ugc nofollow" target="_blank">级编码出版物</a>。<br/>跟随:<a class="ae le" href="https://twitter.com/gitconnected" rel="noopener ugc nofollow" target="_blank">推特</a>，<a class="ae le" href="https://www.linkedin.com/company/gitconnected" rel="noopener ugc nofollow" target="_blank">领英</a>，<a class="ae le" href="https://newsletter.levelup.dev/" rel="noopener ugc nofollow" target="_blank">通迅</a> <br/> <strong class="lh ja">升一级正在改造理工大招聘➡️ </strong> <a class="ae le" href="https://jobs.levelup.dev/talent/welcome?referral=true" rel="noopener ugc nofollow" target="_blank"> <strong class="lh ja">加入我们的人才集体</strong> </a></p></div></div>    
</body>
</html>