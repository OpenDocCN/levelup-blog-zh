<html>
<head>
<title>How to use location services in your Flutter application</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在你的Flutter应用中使用定位服务</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-use-location-services-in-your-flutter-application-582189b2cae7?source=collection_archive---------5-----------------------#2022-04-24">https://levelup.gitconnected.com/how-to-use-location-services-in-your-flutter-application-582189b2cae7?source=collection_archive---------5-----------------------#2022-04-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="4c93" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">导航变得简单！</h2><div class=""/><div class=""><h2 id="9cb0" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">在本文中，我们将了解定位服务，以及如何在我们的Flutter应用程序中获取设备的当前位置。</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/1174c132bea291a0deb4339a7c88edc6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uS2YltGS4yQXIaiWXuntQA.png"/></div></div></figure><p id="d1fb" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">位置信息可以用在各种app场景中。也许你想向用户展示他们感兴趣的地方，或者引导他们去某个特定的地方。无论哪种方式，您都需要访问设备的当前位置。我会告诉你如何完成这项任务。</p><h2 id="730c" class="lz ma it bd mb mc md dn me mf mg dp mh lm mi mj mk lq ml mm mn lu mo mp mq iz bi translated">设置</h2><p id="e53c" class="pw-post-body-paragraph ld le it lf b lg mr kd li lj ms kg ll lm mt lo lp lq mu ls lt lu mv lw lx ly im bi translated">第一步是安装软件包。在<a class="ae mw" href="https://pub.dev/" rel="noopener ugc nofollow" target="_blank"> pub.dev </a>有很多可用的包，但是我将用最流行的一个来演示步骤:<a class="ae mw" href="https://pub.dev/packages/location" rel="noopener ugc nofollow" target="_blank"> location </a>。所有软件包的设置过程应该非常相似，但是代码可能会略有不同。</p><p id="a86d" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">不确定如何安装软件包？有关说明，请查看以下文章。</p><div class="mx my gp gr mz na"><a href="https://xeladu.medium.com/how-to-install-packages-in-your-flutter-app-e7f7e62711ee" rel="noopener follow" target="_blank"><div class="nb ab fo"><div class="nc ab nd cl cj ne"><h2 class="bd jd gy z fp nf fr fs ng fu fw jc bi translated">如何在你的Flutter应用中安装包</h2><div class="nh l"><h3 class="bd b gy z fp nf fr fs ng fu fw dk translated">这篇短文展示了如何将包添加到一个Flutter应用程序中，这样你就可以使用现有的代码并加速…</h3></div><div class="ni l"><p class="bd b dl z fp nf fr fs ng fu fw dk translated">xeladu.medium.com</p></div></div><div class="nj l"><div class="nk l nl nm nn nj no lb na"/></div></div></a></div><p id="fcc7" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">我们还需要为我们的应用程序添加功能，以便操作系统和用户可以批准位置请求。</p><p id="2956" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">对于Android，转到<code class="fe np nq nr ns b">android/app/src/main/AndroidManifest.xml</code>并将功能<code class="fe np nq nr ns b">&lt;uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" /&gt;</code>或<code class="fe np nq nr ns b">&lt;uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" /&gt;</code>添加到文件中。第一种更准确，但也需要更多的电池电量。条目应该在<code class="fe np nq nr ns b">&lt;manifest&gt;</code>标签内，而不是在<code class="fe np nq nr ns b">&lt;application&gt;</code>标签内。</p><p id="fd67" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">对于iOS，转到<code class="fe np nq nr ns b">ios/Runner/Info.plist</code>并在<code class="fe np nq nr ns b">&lt;dict&gt;</code>节点中添加以下代码。</p><pre class="ks kt ku kv gt nt ns nu nv aw nw bi"><span id="5c66" class="lz ma it ns b gy nx ny l nz oa">&lt;key&gt;NSLocationWhenInUseUsageDescription&lt;/key&gt;<br/>&lt;true/&gt;</span></pre><h2 id="ec73" class="lz ma it bd mb mc md dn me mf mg dp mh lm mi mj mk lq ml mm mn lu mo mp mq iz bi translated">密码</h2><p id="ba5b" class="pw-post-body-paragraph ld le it lf b lg mr kd li lj ms kg ll lm mt lo lp lq mu ls lt lu mv lw lx ly im bi translated">下面是一个初始化插件的简单代码示例。例如，你可以在主应用程序状态的<code class="fe np nq nr ns b">initState()</code>方法中调用它。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="ob oc l"/></div></figure><p id="06b1" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">执行以下步骤:</p><p id="3906" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">🔹检查设备<strong class="lf jd">位置服务</strong>是否启用<br/>🔹检查位置服务的使用许可<strong class="lf jd">是否被授予</strong>🔹将<strong class="lf jd">当前位置</strong>输出到调试控制台</p><p id="2083" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">❗如果定位服务被禁用，您将被要求激活它们</p><p id="deff" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">❗如果使用许可还没有被授予，你会被要求在Android上。iOS总是会询问应用程序的启动情况。如果您拒绝使用，将不会再次提示您。若要更改设置，你必须转到你的手机设置并启用此应用的权限。</p><p id="32c0" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">要获得关于位置变化的连续信息，可以添加一个监听器。</p><pre class="ks kt ku kv gt nt ns nu nv aw nw bi"><span id="3285" class="lz ma it ns b gy nx ny l nz oa">location.onLocationChanged.listen((LocationData loc) {<br/>	print("${loc.latitude} ${loc.longitude}");<br/>});</span></pre><h2 id="d7a7" class="lz ma it bd mb mc md dn me mf mg dp mh lm mi mj mk lq ml mm mn lu mo mp mq iz bi translated">结论</h2><p id="6e2b" class="pw-post-body-paragraph ld le it lf b lg mr kd li lj ms kg ll lm mt lo lp lq mu ls lt lu mv lw lx ly im bi translated">在本文中，我向您展示了如何设置和使用位置数据。配置一开始可能有点棘手，但是位置数据的可能性是无穷无尽的。</p></div><div class="ab cl od oe hx of" role="separator"><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi"/></div><div class="im in io ip iq"><p id="beb6" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">如果你喜欢这篇文章，我会很高兴得到掌声👏(你知道可以拍几次吗？😎)另外，如果你还没有跟上我，我也很感激。</p><p id="21cf" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">🌲<a class="ae mw" href="https://linktr.ee/xeladu" rel="noopener ugc nofollow" target="_blank"> linktr.ee </a> | ☕ <a class="ae mw" href="https://www.buymeacoffee.com/xeladu" rel="noopener ugc nofollow" target="_blank">咖啡</a> |🎁<a class="ae mw" href="https://www.paypal.com/donate/?hosted_button_id=JPWK39GGPAAFQ" rel="noopener ugc nofollow" target="_blank">捐赠</a> |💻GitHub  |🔔<a class="ae mw" href="https://xeladu.medium.com/subscribe" rel="noopener">订阅</a></p><p id="c70c" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">顺便说一下:如果你还没有Medium会员，我推荐你使用<a class="ae mw" href="https://medium.com/@xeladu/membership" rel="noopener">│我的推荐链接◀ </a>,因为它可以让你访问Medium上的所有内容，并以一小部分费用支持我，而不需要你支付任何额外费用。谢谢大家！✨</p></div><div class="ab cl od oe hx of" role="separator"><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi"/></div><div class="im in io ip iq"><h2 id="5e0d" class="lz ma it bd mb mc md dn me mf mg dp mh lm mi mj mk lq ml mm mn lu mo mp mq iz bi translated">相关故事</h2><div class="mx my gp gr mz na"><a rel="noopener  ugc nofollow" target="_blank" href="/flutter-app-from-scratch-part-4-implementing-logic-and-styling-the-user-interface-c08d2304b399"><div class="nb ab fo"><div class="nc ab nd cl cj ne"><h2 class="bd jd gy z fp nf fr fs ng fu fw jc bi translated">Flutter应用程序第4部分——实现逻辑和设计用户界面</h2><div class="nh l"><h3 class="bd b gy z fp nf fr fs ng fu fw dk translated">如何从头开始构建Flutter应用程序系列的第4部分。本文涵盖了通知的实现…</h3></div><div class="ni l"><p class="bd b dl z fp nf fr fs ng fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="nj l"><div class="ok l nl nm nn nj no lb na"/></div></div></a></div><div class="mx my gp gr mz na"><a rel="noopener  ugc nofollow" target="_blank" href="/send-push-notifications-from-a-flutter-app-to-devices-with-firebase-9c84ce58fe30"><div class="nb ab fo"><div class="nc ab nd cl cj ne"><h2 class="bd jd gy z fp nf fr fs ng fu fw jc bi translated">从Flutter应用程序向安装了Firebase的设备发送推送通知</h2><div class="nh l"><h3 class="bd b gy z fp nf fr fs ng fu fw dk translated">以下是向具有Firebase Cloud功能和Firebase Cloud的设备发送自定义推送通知的指南…</h3></div><div class="ni l"><p class="bd b dl z fp nf fr fs ng fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="nj l"><div class="ol l nl nm nn nj no lb na"/></div></div></a></div><div class="mx my gp gr mz na"><a href="https://medium.com/codex/my-top-5-flutter-extensions-for-vs-code-f36936518ff8" rel="noopener follow" target="_blank"><div class="nb ab fo"><div class="nc ab nd cl cj ne"><h2 class="bd jd gy z fp nf fr fs ng fu fw jc bi translated">我对VS代码的5大颤振扩展</h2><div class="nh l"><h3 class="bd b gy z fp nf fr fs ng fu fw dk translated">以下是我一直在使用的Visual Studio代码的5大Flutter扩展。</h3></div><div class="ni l"><p class="bd b dl z fp nf fr fs ng fu fw dk translated">medium.com</p></div></div><div class="nj l"><div class="om l nl nm nn nj no lb na"/></div></div></a></div></div></div>    
</body>
</html>