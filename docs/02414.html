<html>
<head>
<title>What is the Android Gradle Plugin</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">什么是Android Gradle插件</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/what-is-the-android-gradle-plugin-d859303c0b68?source=collection_archive---------5-----------------------#2020-03-11">https://levelup.gitconnected.com/what-is-the-android-gradle-plugin-d859303c0b68?source=collection_archive---------5-----------------------#2020-03-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="70df" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Android Studio的每个项目都要经过Gradle，是什么？</h2></div><p id="2b5b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Gradle成为Android官方构建工具已经有一段时间了。它是与Android Studio一起推出的。在Android Gradle插件之前，Android应用程序是用另一个构建工具ANT在Eclipse中构建的。但即使它是我们作为Android开发者的基本日常工具之一，有时我们也不知道它背后是什么。让我们来了解一下这个强大工具的背后是什么。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi le"><img src="../Images/eef5b4d8516fb235dc508e0630fd1daf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qsBBVa47X6Ic_4hL"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk translated">比亚·安德拉德在<a class="ae lu" href="https://unsplash.com/s/photos/mix?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><h1 id="f0bd" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">格拉德是什么？</h1><p id="057d" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">我们首先需要定义和理解Gradle是如何工作的。让我们回顾一下Gradle官方页面中的定义:</p><blockquote class="ms mt mu"><p id="7976" class="ki kj mv kk b kl km ju kn ko kp jx kq mw ks kt ku mx kw kx ky my la lb lc ld im bi translated"><em class="it"> Gradle是一个开源的构建自动化工具，专注于灵活性和性能。Gradle构建脚本是使用Groovy或Kotlin DSL编写的。阅读Gradle特性，了解Gradle的功能。</em></p><p id="fc4a" class="ki kj mv kk b kl km ju kn ko kp jx kq mw ks kt ku mx kw kx ky my la lb lc ld im bi translated"><a class="ae lu" href="https://docs.gradle.org/current/userguide/userguide.html" rel="noopener ugc nofollow" target="_blank"><em class="it">https://docs.gradle.org/current/userguide/userguide.html</em></a></p></blockquote><h1 id="bdf1" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">构建自动化</h1><p id="0edf" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">综上所述，理解什么是构建自动化是很重要的。它是构建软件的完整过程，由一个程序在没有我们交互的情况下完成。其中发生的一些过程是将你的代码编译成二进制、打包和运行自动化测试。</p><p id="5a0f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">有两种类型的构建自动化工具。</p><ol class=""><li id="4bed" class="mz na it kk b kl km ko kp kr nb kv nc kz nd ld ne nf ng nh bi translated">构建自动化服务器——顾名思义，它们是在线工具，以预定的方式或通过手动触发来自行构建。在从事大型项目时，您通常会看到这些工具。例如，构建可以在晚上运行，第二天早上你就有了所有合并变更的新版本。</li><li id="aaef" class="mz na it kk b kl ni ko nj kr nk kv nl kz nm ld ne nf ng nh bi translated">构建自动化工具——这是Gradle所属的组。它们安装在本地机器上，您手动创建构建。</li></ol><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi nn"><img src="../Images/7ff491a0745d77d15c285fc8f0f17d97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A0Q93NfIHxWlNbBbRgpdVw.jpeg"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk translated">Jo Szczepanska 在<a class="ae lu" href="https://unsplash.com/s/photos/tools?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><h1 id="62f1" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">为什么是外挂？</h1><p id="2420" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">Gradle在他们的网站上解释得很好:</p><blockquote class="ms mt mu"><p id="c644" class="ki kj mv kk b kl km ju kn ko kp jx kq mw ks kt ku mx kw kx ky my la lb lc ld im bi translated">Gradle本质上有意为现实世界的自动化提供很少的东西。所有有用的特性，比如编译Java代码的能力，都是由插件<em class="it">添加的。</em></p><p id="1ce8" class="ki kj mv kk b kl km ju kn ko kp jx kq mw ks kt ku mx kw kx ky my la lb lc ld im bi translated"><a class="ae lu" href="https://docs.gradle.org/current/userguide/plugins.html" rel="noopener ugc nofollow" target="_blank"><em class="it"/>https://docs.gradle.org/current/userguide/plugins.html</a></p></blockquote><p id="1fe4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">简而言之，Android Gradle插件包含了构建Android应用程序所需的所有操作。如果你没有插件和Gradle文件，你将不得不在终端中一个接一个地运行许多命令。此外，如果您手动执行所有这些命令，您将花费更多时间来创建您的项目，因为Gradle知道如何优化和重用这些信息。</p><h1 id="4c0b" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">Android Studio中的Android Gradle插件是做什么的？</h1><p id="1120" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">基本上，它运行捆绑所有资源(图像、布局XML文件、字符串资源等)、Kotlin或Java源代码、添加到项目中的任何库的过程。</p><pre class="lf lg lh li gt no np nq nr aw ns bi"><span id="5482" class="nt lw it np b gy nu nv l nw nx">Note: It is important to understand that Gradle in itself is not the compiler, linker or bundler itself. It is just the tool that supervises the compilation, and other processes that happen to get the final Android executable.</span></pre><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi ny"><img src="../Images/19fade45987f0caebf07bf62d1033783.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2GCxBHBxLIHFiEk5OIlyFg.jpeg"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk translated">照片由<a class="ae lu" href="https://unsplash.com/@mikepetrucci?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">迈克·彼得鲁奇</a>在<a class="ae lu" href="https://unsplash.com/s/photos/mix?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="3dab" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">它把一切变成了<strong class="kk iu">。dex </strong>文件。在幕后，Android使用了一个名为<strong class="kk iu"> <em class="mv"> Dalvik </em> </strong>的虚拟机。Dex代表Dalvik可执行文件。最新版本的Android已经移植到一个叫做ART的系统中，这是Android Runtime的缩写。虽然Dalvik和ART略有不同，但都运行Dex文件。</p><p id="26eb" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最后，Gradle输出一个APK文件，这是Android的主要可执行文件。在这个APK中，您可以找到Android使用的一组Dex文件和其他资源。类似于一个zip文件，里面有一堆其他文件，但是有Android的文件类型。</p><p id="db2d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这听起来可能非常简单，几分钟就能完成，但是要做到这一点，确实需要大量的工作和优化。如果我们没有一个高效的插件，构建会花费很多时间，我们的开发会大大减慢。</p><h1 id="b7d9" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">一个settings.gradle文件</h1><p id="f4be" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">这个文件只是用来映射应用程序中使用的所有“模块”。默认情况下，当您在Android Studio中创建应用程序时，它只有一个名为app的模块，因此settings.gradle文件通常如下所示:</p><pre class="lf lg lh li gt no np nq nr aw ns bi"><span id="68f5" class="nt lw it np b gy nu nv l nw nx">rootProject.name='EvanaApp' include ':app'</span></pre><p id="4bee" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在大型应用程序中，你最终会把你的代码分解成多个模块，很可能它们就不叫“app”了。在这种情况下，您最终会在settings.gradle文件中包含多个includes。</p><p id="c078" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一个常见的例子是，当你开发一个手机应用程序和一个电视应用程序时，你可能有几个模块。在这种情况下，每一个都有自己的模块，但是它们都可以包含在同一个项目中。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi nz"><img src="../Images/866b0045408a1ecfc3a483651080050a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Bytr3653xdXkLBtvMbuEUw.jpeg"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk translated">你好，我是尼克🍌 on <a class="ae lu" href="https://unsplash.com/s/photos/build?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a></figcaption></figure><h1 id="ac84" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">项目级build.gradle文件</h1><p id="3cdd" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">如果你已经为Android开发了一个应用程序，你可能已经注意到大多数项目都有两个Gradle文件。如果你还没有，你可以看看我的<a class="ae lu" href="http://www.evanamargain.com/blog/wp-admin/post.php?post=212&amp;action=edit" rel="noopener ugc nofollow" target="_blank">新Android Studio项目中最基本的例子——教程</a>。</p><p id="da96" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">添加库或依赖项时，有时会将它们添加到App Gradle，有时会添加到Project Gradle。</p><p id="dc64" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这个文件就是你通常发现的build.gradle(项目:EvanaApp)。对于每个项目，无论它有一个还是多个模块，都只有一个项目级的build.gradle。该文件中应用的配置将被settings.gradle文件中列出的每个模块继承。</p><h1 id="9d36" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">模块级build.gradle文件</h1><p id="2411" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">默认情况下，这个文件的名称是build.gradle(Module: app)。对于项目中的每个模块，您都会有一个。这意味着您将拥有与settings.gradle文件中列出的模块一样多的模块级文件。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi oa"><img src="../Images/c9b236a728140976900afc03a1bc3633.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c40fS65_UsQ2YlKkWyiCxw.jpeg"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk translated">照片由<a class="ae lu" href="https://unsplash.com/s/photos/mix?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的<a class="ae lu" href="https://unsplash.com/@lightcircle?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Bilal O. </a>拍摄</figcaption></figure><h1 id="cce3" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">包扎</h1><p id="1b7f" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">这是Android中Gradle插件背后逻辑的基本分解。希望这篇文章对你有用。如果你有任何问题，请在下面的评论中告诉我。</p><p id="3a8b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下次见！</p><p id="3652" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">埃娃娜·马尔甘·普伊格</p></div></div>    
</body>
</html>