<html>
<head>
<title>Developing Bitcoin Trading Algorithms with Quantiacs</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Quantiacs开发比特币交易算法</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/developing-bitcoin-trading-algorithms-with-quantiacs-7bac5f063155?source=collection_archive---------9-----------------------#2021-02-19">https://levelup.gitconnected.com/developing-bitcoin-trading-algorithms-with-quantiacs-7bac5f063155?source=collection_archive---------9-----------------------#2021-02-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="600e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kl">在本文中，我们描述了使用Quantiacs对比特币期货合约实施简单的量化策略。</em></p><p id="ce0a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">本月，我们发布了Quantiacs平台的新版本，有几项重大改进。除了提供新的开源回溯测试工具和免费下载金融数据的可能性，我们还为quants创建了一个云环境。在这里，可以使用Jupyter Notebook或JupyterLab用Python编写交易算法，并使用我们的免费资源直接在线运行它们。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi km"><img src="../Images/737251dcc620cd1c6e779f2f55d3f16d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/format:webp/1*0E92vDwrjbDRmyUzc0XAww.jpeg"/></div></figure><p id="e798" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">比赛模式也发生了变化:基于75份流动性期货合约(包括股指、债券、外汇和大宗商品)的第15届期货大赛与第1届比特币期货大赛同时进行。</p><p id="dbd0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们将为最好的系统拨款400万美元。7名量子分析师将获得其期货系统的分配，7名量子分析师将获得其比特币期货系统的分配，前提是他们在2021年5月31日之前提交，并且他们的样本内<a class="ae ku" href="https://en.wikipedia.org/wiki/Sharpe_ratio" rel="noopener ugc nofollow" target="_blank">夏普比率</a>大于1。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi kv"><img src="../Images/6baa425048ca7ba5243962ababd21ad6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J6MwuPLVavImpOaQWEX7MQ.png"/></div></div></figure><p id="578e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在本文中，我们描述了一个简单的比特币期货合约交易算法的实现。</p><p id="82c1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<a class="ae ku" href="https://quantiacs.com/personalpage/registration" rel="noopener ugc nofollow" target="_blank">向Quantiacs注册</a>后，你可以打开你的<a class="ae ku" href="https://quantiacs.com/personalpage/strategies" rel="noopener ugc nofollow" target="_blank">个人发展区，</a>克隆一个例子，用Jupyter笔记本或JupyterLab编辑它。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi la"><img src="../Images/d039299a887579b278205962c390f043.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b1ze_Dr49KxSNqa4DPYqBA.png"/></div></div></figure><p id="2290" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">打开笔记本后，我们导入所需的库:</p><pre class="kn ko kp kq gt lb lc ld le aw lf bi"><span id="afcf" class="lg lh iq lc b gy li lj l lk ll">import xarray as xr</span><span id="4862" class="lg lh iq lc b gy lm lj l lk ll">import qnt.backtester as qnbt<br/>import qnt.data as qndata<br/>import qnt.ta as qnta</span></pre><p id="e12d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们基于xarray的Quantiacs，因为它使得处理多维数组非常有效。我们的qnt库可以在我们的<a class="ae ku" href="https://github.com/Quantiacs" rel="noopener ugc nofollow" target="_blank"> github库</a>访问，文档可以在我们的<a class="ae ku" href="https://quantiacs.com/documentation/en/" rel="noopener ugc nofollow" target="_blank">页面</a>访问。</p><p id="f9e6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，我们定义两个函数:一个用于加载比特币期货数据，另一个用于定义基于两个简单移动平均线交叉的基本趋势跟踪策略:</p><pre class="kn ko kp kq gt lb lc ld le aw lf bi"><span id="2fb5" class="lg lh iq lc b gy li lj l lk ll">def load_data(period):<br/>    crypto= qndata.cryptofutures.load_data(tail=period)<br/>    return crypto</span><span id="d555" class="lg lh iq lc b gy lm lj l lk ll">def strategy(data):<br/>    close_crypto= data.sel(field=”close”)<br/>    sma100= qnta.sma(close_crypto, 100).isel(time=-1)<br/>    sma20 = qnta.sma(close_crypto, 20).isel(time=-1)<br/>    return xr.where(sma100 &lt; sma20, 1, 0)</span></pre><p id="6717" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">策略是当20天移动平均线大于100天移动平均线时投资比特币期货，否则就不配置任何东西。</p><p id="55b3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，我们调用Quantiacs回溯测试函数:</p><pre class="kn ko kp kq gt lb lc ld le aw lf bi"><span id="a6f7" class="lg lh iq lc b gy li lj l lk ll">qnbt.backtest(<br/>    competition_type= “cryptofutures”,<br/>    load_data= load_data,<br/>    lookback_period= 365,<br/>    start_date= “2013-06-01”,<br/>    strategy= strategy<br/>)</span></pre><p id="2073" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">运行笔记本。在输出消息中，您将看到与竞争相关的样本内时段的夏普比率大于1:</p><pre class="kn ko kp kq gt lb lc ld le aw lf bi"><span id="3896" class="lg lh iq lc b gy li lj l lk ll">Check the sharpe ratio...<br/>Period: 2014-01-01 - 2021-02-17<br/>Sharpe Ratio = 1.4853014048450253<br/>Ok.</span></pre><p id="d761" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这意味着该系统可以提交，并将有资格参加竞赛。当然，这个想法只是一个起点，所以你应该改进它。</p><p id="9f53" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">完成调查后，您可以从您的发展领域选择该策略，然后单击提交按钮。该战略将每天在我们的服务器上处理新的市场数据，您将能够监控您个人竞争领域的进展。</p><p id="2130" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">第一批提交的内容已经到达，可以在<a class="ae ku" href="https://quantiacs.com/leaderboard" rel="noopener ugc nofollow" target="_blank">排行榜页面</a>查看:</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi ln"><img src="../Images/e153d76b7237fd9aceb5c0402fcb4c00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ObpOqzMN9UT643luyOqJpA.png"/></div></div></figure><p id="9a72" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">全攻略</strong></p><pre class="kn ko kp kq gt lb lc ld le aw lf bi"><span id="4a15" class="lg lh iq lc b gy li lj l lk ll">import xarray as xr</span><span id="9568" class="lg lh iq lc b gy lm lj l lk ll">import qnt.backtester as qnbt<br/>import qnt.data as qndata<br/>import qnt.ta as qnta</span><span id="304c" class="lg lh iq lc b gy lm lj l lk ll">def load_data(period):<br/>    crypto= qndata.cryptofutures.load_data(tail=period)<br/>    return crypto</span><span id="854a" class="lg lh iq lc b gy lm lj l lk ll">def strategy(data):<br/>    close_crypto= data.sel(field=”close”)<br/>    sma100= qnta.sma(close_crypto, 100).isel(time=-1)<br/>    sma20 = qnta.sma(close_crypto, 20).isel(time=-1)<br/>    return xr.where(sma100 &lt; sma20, 1, 0)</span><span id="50f8" class="lg lh iq lc b gy lm lj l lk ll">qnbt.backtest(<br/>    competition_type= “cryptofutures”,<br/>    load_data= load_data,<br/>    lookback_period= 365,<br/>    start_date= “2013-06-01”,<br/>    strategy= strategy<br/>)</span></pre></div></div>    
</body>
</html>