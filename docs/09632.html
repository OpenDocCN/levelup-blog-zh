<html>
<head>
<title>Creating New Enemy Types: The Porcupine Blowfish Part 2 — Movement using a Sine Wave</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创造新的敌人类型:豪猪河豚第2部分-使用正弦波运动</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/creating-new-enemy-types-the-porcupine-blowfish-part-2-movement-using-a-sine-wave-7dc7e9df570b?source=collection_archive---------4-----------------------#2021-08-29">https://levelup.gitconnected.com/creating-new-enemy-types-the-porcupine-blowfish-part-2-movement-using-a-sine-wave-7dc7e9df570b?source=collection_archive---------4-----------------------#2021-08-29</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/0bd2a8de628a6dfedb90ddc6e76f3c44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*bsSTmcgkSuAu8vbvHuqnLA.gif"/></div></div></figure><div class=""/><p id="4e28" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在我的主要艺术资产已经准备好了，我可以开始把新的敌人河豚带入我的Unity游戏。我在这篇文章中的<strong class="kd jf">目标</strong>是让敌人河豚在屏幕上向左移动，同时使用<em class="kz">正弦波</em>上下移动。</p><figure class="lb lc ld le gt iv gh gi paragraph-image"><div class="gh gi la"><img src="../Images/8489bf0065bfa0502af089734a9639d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1228/format:webp/1*rvUxKA-L52f-kjwPp1CDvw.png"/></div></figure><p id="e9c4" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在我深入研究代码之前，我需要通过将精灵带入场景视图、分配名称、标签和分层顺序来准备精灵。我还添加了类型<strong class="kd jf"> Ridgidbody2D </strong>、<strong class="kd jf"> CapsuleCollider2D </strong>和<strong class="kd jf">敌人脚本</strong>的组件。在检查器中将敌人脚本上的<strong class="kd jf"> enemyID </strong>指定为<strong class="kd jf"> 3 </strong>后，我将河豚拖到prefabs文件夹中，使其成为一个<strong class="kd jf">预置</strong>。</p><figure class="lb lc ld le gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi lf"><img src="../Images/60fb27546b9615d61f0a8e64ef484833.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pc8gGNoi_OYgIwAyoqseMg.png"/></div></div></figure><div class="lb lc ld le gt ab cb"><figure class="lg iv lh li lj lk ll paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><img src="../Images/5b83aeb1375423c1cfd69435e96f3495.png" data-original-src="https://miro.medium.com/v2/resize:fit:728/format:webp/1*zvcJDceEggi_-8x1ulqfIw.png"/></div></figure><figure class="lg iv lm li lj lk ll paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><img src="../Images/459295a12d131b0d6b538c51ac15e5ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:578/format:webp/1*GE2dIdRgjIb_7p3XpL4HOg.png"/></div></figure><figure class="lg iv ln li lj lk ll paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><img src="../Images/59827858cac870fed0a0fbea73ad858b.png" data-original-src="https://miro.medium.com/v2/resize:fit:698/format:webp/1*scld_-LmV8Nmu-A_Qy1z_g.png"/></div></figure></div></div><div class="ab cl lo lp hx lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="im in io ip iq"><p id="b321" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我的<strong class="kd jf">产卵管理器</strong>将需要这个新敌人的引用，所以我将<strong class="kd jf">预置</strong>拖到检查器中产卵管理器脚本的敌人数组中。这为这个从3号<em class="kz">(数组从零开始)</em>进来的敌人创建了一个新的<em class="kz">元素</em>。</p><figure class="lb lc ld le gt iv gh gi paragraph-image"><div class="gh gi lv"><img src="../Images/d83416f8fd5357900597e9667a863a5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:798/format:webp/1*51QPIpGOv3QRena0Xtv4Yg.png"/></div></figure></div><div class="ab cl lo lp hx lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="im in io ip iq"><p id="9c77" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">是时候打开<strong class="kd jf">敌班</strong>开始工作了。我用一个脚本有多个敌人，所以我用一个<strong class="kd jf"> enemyID </strong>变量来分解行为。为了这篇文章，我将只包括与新的blowfish敌人有关的大部分代码。</p><p id="4a8e" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这是我实施运动的第一种方式。做起来很快，也不需要太多代码，但是它有它的限制。在void <strong class="kd jf">更新</strong>我称之为<strong class="kd jf">敌人运动</strong>方法。忽略我的其他敌人的if else语句，我降落在<strong class="kd jf"> 3 </strong>的<strong class="kd jf"> enemyID </strong>上，这是新的河豚。这里我使用<strong class="kd jf">变换。平移</strong>用新的<strong class="kd jf">矢量3 </strong>位置<em class="kz"> (X，Y，Z) </em>移动敌人。<strong class="kd jf"> X </strong>坐标赋值为<strong class="kd jf"> -1 </strong>，每更新一帧<em class="kz">(正1将敌人右移)</em>将敌人<strong class="kd jf">向左</strong>移动<strong class="kd jf"> X轴</strong>上<strong class="kd jf"> 1 </strong>的值。在<strong class="kd jf"> Y </strong>空间中，<strong class="kd jf"> Mathf。Sin </strong>功能用来表示Y轴的移动。<strong class="kd jf"> Y </strong>是<strong class="kd jf"> X </strong>的<strong class="kd jf"> Sin </strong>，所以<strong class="kd jf"> Mathf。Sin </strong>用于在Y轴上上下移动。一个<em class="kz">正弦波</em>在<em class="kz">时间</em>内在<strong class="kd jf"> 1 </strong>和<strong class="kd jf"> -1 </strong>的值之间移动，这些值作为Y轴<em class="kz">(上下)</em>上的更新坐标通过。<strong class="kd jf"> Z </strong>空间得到一个零，因为这是一个<em class="kz"> 2D游戏</em>，我没有在Z轴上移动任何东西<em class="kz">(除了一些旋转)</em>。</p><figure class="lb lc ld le gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi lw"><img src="../Images/4f0e5fcb302e054a9b2ead7020402e34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*la769L4ubae8iUBX24w2dA.png"/></div></div></figure><p id="b64f" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">虽然这样做很好，但问题是我想使用<strong class="kd jf">速度</strong>变量和<strong class="kd jf">时间。DeltaTime </strong>给我向左的移动一个平滑的<em class="kz">帧速率独立的</em>运动。因为这些都混杂在一行代码中，所以除了以速度值向左移动敌人之外，速度值也是正弦波振幅的倍数。结果是大大增加了波浪的高度和深度<em class="kz">(振幅)</em>，超过了其默认值范围<strong class="kd jf"> -1 </strong>和<strong class="kd jf"> 1 </strong>。</p><p id="433e" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">下面是上面代码的样子。这里可以看到正弦波相当大。</p><figure class="lb lc ld le gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi lx"><img src="../Images/cc805bf040be6da63f9bb10d4bd3236e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*JrrHT6NTRftu1bCSaZ5lPQ.gif"/></div></div></figure></div><div class="ab cl lo lp hx lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="im in io ip iq"><p id="7a49" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这是我选择的路线。它更长，但在提炼正弦波时允许更多的灵活性。在<strong class="kd jf">启动</strong>无效时，如果<strong class="kd jf"> enemyID </strong>为<strong class="kd jf"> 3 </strong> <em class="kz"> (blowfish) </em>，我为blowfish启动一个<strong class="kd jf">协程</strong>。在void <strong class="kd jf"> update </strong>中，调用<strong class="kd jf"> EnemyMovement </strong>方法。<strong class="kd jf">敌人移动</strong>方法在四个敌人中的<em class="kz">三个</em>之间共享一个向左的移动。这样我就可以把<strong class="kd jf"> enemyID </strong>等于<strong class="kd jf">等于</strong>等于<strong class="kd jf"> 3 </strong>作为可选的<em class="kz">条件</em>进入<strong class="kd jf"> if </strong>语句，让敌人向左移动。现在我有了<em class="kz">速度</em>变量和<em class="kz">增量时间</em>与我共享的敌人向左移动，并且独立于正弦波移动。</p><p id="b7ed" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd jf">协程</strong>使用一个<strong class="kd jf"> while循环</strong>，只要<em class="kz">isEnemyDead</em><strong class="kd jf">bool</strong>为<strong class="kd jf"> false </strong>就会运行。为了保持<strong class="kd jf"> Mathf。Sin </strong>从不断的<em class="kz">覆盖</em>我的移动<em class="kz">离开</em>在<em class="kz"> X </em>上并且保持敌人在屏幕的中心，我需要<em class="kz">存储</em>和<em class="kz">缓存</em>在<em class="kz"> X </em>轴上的<em class="kz">位置</em>。引入了一个名为<strong class="kd jf"> currentPositionX </strong>的<em class="kz">局部</em> <strong class="kd jf">浮动</strong>变量，它被赋予游戏对象的<em class="kz">变换</em>在<em class="kz"> X </em>轴上的当前位置，每帧更新一次。现在我可以使用<strong class="kd jf">变换。位置</strong>和一个<strong class="kd jf">新矢量3 </strong>使用<em class="kz">正弦波</em>更新玩家在<strong class="kd jf"> Y </strong>上的位置。<strong class="kd jf"> Time.time </strong>是让正弦波随着时间运动的东西，因为它是一种<em class="kz">基于时间的运动</em>。<strong class="kd jf"> currentPositionX </strong>变量确保向左移动确实发生。</p><figure class="lb lc ld le gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ly"><img src="../Images/77e1caf46d6006d0a70b6ebf3f4707d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*05NedD1IuAtzrLTfo8Q7TQ.png"/></div></div></figure><p id="b9bb" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">下面是上面代码的样子。</p><figure class="lb lc ld le gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi lx"><img src="../Images/f07993be4c12a49126faf7726d2a85ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*QWOfILU5mgXwMJL4huhGDg.gif"/></div></div></figure></div><div class="ab cl lo lp hx lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="im in io ip iq"><p id="831b" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在我有空间来调整正弦波，我将添加一些方差。增加了两个<strong class="kd jf">浮动变量</strong>。<strong class="kd jf">振幅</strong>变量代表正弦波运动的<strong class="kd jf">大小</strong>，而<strong class="kd jf">频率</strong>代表波的<strong class="kd jf">速度</strong>。</p><figure class="lb lc ld le gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi lz"><img src="../Images/4b99f1ca10e3d4c52fb389dee21c34e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZStdbaZyrRIYyqdtAzxgNw.png"/></div></div></figure><p id="1842" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在void <strong class="kd jf"> start </strong>中，我<em class="kz">通过使用<strong class="kd jf"> Random来随机化</strong></em>值的分配。范围，返回一个在声明的最小<em class="kz">和最大</em>之间的随机值。</p><figure class="lb lc ld le gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ma"><img src="../Images/c1569d50a3ac7ea8af5b0235be0a3c99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uxv7SVzHx36KzVgmGJAm6g.png"/></div></div></figure><p id="f73d" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">导航回<strong class="kd jf">协程</strong>在<strong class="kd jf"> while </strong>循环中，我创建了另一个浮点变量来存储Y轴上的移动<em class="kz"> (sinMovementY) </em>，并将其值赋给Mathf。正弦函数。<strong class="kd jf">频率</strong>乘以<strong class="kd jf">时间</strong>以增加波浪移动的<em class="kz">速率</em>，最后一切都乘以<strong class="kd jf">振幅</strong>，这将决定波浪有多大<em class="kz"/>。<strong class="kd jf"> sinMovementY </strong>的局部变量现在可以放入下面<em class="kz"> Vector3 </em>移动的<strong class="kd jf"> Y </strong>值赋值中。</p><figure class="lb lc ld le gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mb"><img src="../Images/36f57c647160840c4a83e84de1087966.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CnJo5IcIvpX1_AO_ZMO8Kg.png"/></div></div></figure><p id="e745" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这里是一些敌人河豚展示随机变化的新运动的剪辑。</p><figure class="lb lc ld le gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/0bd2a8de628a6dfedb90ddc6e76f3c44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*bsSTmcgkSuAu8vbvHuqnLA.gif"/></div></div></figure><p id="8058" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">为了更进一步，我需要在void <strong class="kd jf"> start </strong>中存储一次<strong class="kd jf"> Y轴</strong>的起始位置。这样我的敌人河豚就不会一直锁定在<strong class="kd jf"> Y </strong>上的<strong class="kd jf"> 0 </strong>作为起始坐标。<strong class="kd jf"> startPositionY </strong>变量现在在正弦波运动之前输入，并且<strong class="kd jf">添加了</strong>到其中。</p><figure class="lb lc ld le gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mc"><img src="../Images/db279e76dd143589ac6009a78b17f318.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KjkqValeTVCQjdisKZzf3g.png"/></div></div></figure><p id="5776" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">最后一步是固定<strong class="kd jf">边界</strong>。当敌人离开屏幕左侧时，它将<em class="kz">重新分配给屏幕右侧的</em>和<strong class="kd jf"> Y </strong>上的<strong class="kd jf">随机</strong>位置。我现在可以使用先前存在的<strong class="kd jf"> randomY </strong>变量来重新分配<strong class="kd jf"> startingPositionY </strong>变量。</p><figure class="lb lc ld le gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi md"><img src="../Images/b423d101f5f24f64709e5fa2e25ade82.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0TdYg9aWoXF4cHUVklyvJw.png"/></div></div></figure><p id="9f92" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这里有一个河豚停留在不同的起始Y位置的剪辑。</p><figure class="lb lc ld le gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi me"><img src="../Images/59add25e7e5c508d25852060311d4d4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*JCnHbuNYsOJ-LEP3q9ANBw.gif"/></div></div></figure><p id="9ed1" class="pw-post-body-paragraph kb kc je kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我希望在我的下一篇文章中看到你，我会让这个河豚的敌人向玩家开火。感谢阅读！</p></div></div>    
</body>
</html>