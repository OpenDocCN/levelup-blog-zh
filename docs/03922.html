<html>
<head>
<title>React Material-Table CRUD Operations with RESTful API data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ç”¨RESTful APIæ•°æ®ååº”ææ–™è¡¨CRUDæ“ä½œ</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://levelup.gitconnected.com/react-material-table-crud-operations-with-restful-api-data-ca1af738d3c5?source=collection_archive---------1-----------------------#2020-06-02">https://levelup.gitconnected.com/react-material-table-crud-operations-with-restful-api-data-ca1af738d3c5?source=collection_archive---------1-----------------------#2020-06-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="df9c" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">å­¦ä¹ ä½¿ç”¨Material-Tableåœ¨å‡ è¡Œä»£ç ä¸­æ‰§è¡ŒCRUDæ“ä½œ</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/5a85a0172f6046e3a0fcbf5800351f78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DsnBWFglpSrgz7XAylEeFw.png"/></div></div></figure><p id="b086" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">å¤§å®¶å¥½ï¼Œæ¬¢è¿æ¥åˆ°æˆ‘çš„ç¬¬ä¸€ä¸ª<a class="ae ln" href="https://reactjs.org/" rel="noopener ugc nofollow" target="_blank"> react.js </a>æ•™ç¨‹ğŸ˜Šæˆ‘å°†é€šè¿‡æ„å»ºä¸€ä¸ªç®€å•çš„ç”¨æˆ·ç®¡ç†webåº”ç”¨ç¨‹åºï¼Œå‘æ‚¨å±•ç¤ºå¦‚ä½•åœ¨Reactä¸­æ‰§è¡ŒCRUDæ“ä½œã€‚æˆ‘ä»¬å°†ä½¿ç”¨å¸¦æœ‰è¿œç¨‹æ•°æ®(å³æ¥è‡ªRESTful APIçš„æ•°æ®)çš„<a class="ae ln" href="https://material-table.com/" rel="noopener ugc nofollow" target="_blank"> Material-table </a>åŒ…ã€‚</p><p id="a326" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">ä¸‹é¢çš„è§†é¢‘å±•ç¤ºäº†æˆ‘ä»¬å°†è¦å¼€å‘çš„åº”ç”¨ç¨‹åºã€‚</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lo lp l"/></div></figure><p id="1630" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Material-tableåŒ…æ‰©å±•äº†Material-uiçš„é»˜è®¤è¡¨ï¼Œæä¾›äº†è®¸å¤šå¾ˆé…·çš„ç°æˆç‰¹æ€§ï¼Œå¦‚æœç´¢æ ã€æ·»åŠ æŒ‰é’®ã€åˆ†é¡µç­‰ã€‚ä½¿ç”¨Materialè¡¨æä¾›äº†ä¸€ç§åœ¨react.jsä¸­æ‰§è¡ŒCRUDæ“ä½œçš„è¶…çº§æ— ç¼çš„æ–¹æ³•ã€‚ç›¸ä¿¡æˆ‘ï¼Œåœ¨äº†è§£äº†ä½¿ç”¨è¿™ä¸ªä»¤äººæ•¬ç•çš„åŒ…æ˜¯å¤šä¹ˆå®¹æ˜“ä¹‹åï¼Œæ‚¨ä¸ä¼šæƒ³è¦ç»å†ä½¿ç”¨ä¼ ç»Ÿå½¢å¼è¿›è¡ŒCRUDæ“ä½œçš„å‹åŠ›ã€‚å¥½äº†ï¼Œè¯´å¤Ÿäº†ã€‚è®©æˆ‘ä»¬å¼€å§‹å§ã€‚</p><p id="4ab8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">æˆ‘å°†å‡è®¾æ‚¨å¯¹åŸºæœ¬çš„reactæ¦‚å¿µ(æ¯”å¦‚çŠ¶æ€)ã€Javascriptå’ŒRESTful APIæœ‰ç‚¹ç†Ÿæ‚‰ã€‚æ­¤å¤–ï¼Œé‡è¦çš„UIçŸ¥è¯†ä¹Ÿå¾ˆé‡è¦ï¼Œä½†ä¸æ˜¯å¿…é¡»çš„ã€‚</p><p id="ae9c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">ä¸ºäº†å¼€å§‹ä½¿ç”¨ææ–™è¡¨ï¼Œè¯·ç¡®ä¿æŒ‰å¦‚ä¸‹æ–¹å¼å®‰è£…:</p><pre class="kg kh ki kj gt lq lr ls lt aw lu bi"><span id="c482" class="lv lw iq lr b gy lx ly l lz ma">npm install material-table --save<br/>npm install <a class="ae ln" href="http://twitter.com/material" rel="noopener ugc nofollow" target="_blank">@material</a>-ui/core --save<br/><strong class="lr ir">or (if you using yarn)<br/></strong>yarn add material-table<br/>yarn add <a class="ae ln" href="http://twitter.com/material" rel="noopener ugc nofollow" target="_blank">@material</a>-ui/core</span></pre><p id="2dfc" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">ææ–™è¡¨ä½¿ç”¨ææ–™ç•Œé¢å›¾æ ‡ï¼Œå› æ­¤è¯·ç¡®ä¿å®‰è£…ææ–™ç•Œé¢å›¾æ ‡ï¼Œå¦‚ä¸‹æ‰€ç¤º:</p><pre class="kg kh ki kj gt lq lr ls lt aw lu bi"><span id="bc96" class="lv lw iq lr b gy lx ly l lz ma">npm install <a class="ae ln" href="http://twitter.com/material" rel="noopener ugc nofollow" target="_blank">@material</a>-ui/icons --save<br/>yarn add <a class="ae ln" href="http://twitter.com/material" rel="noopener ugc nofollow" target="_blank">@material</a>-ui/icons</span></pre><p id="81e7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">æˆ‘è¿˜ä½¿ç”¨Material-ui Alertç»„ä»¶åœ¨å‡ºé”™æ—¶å‘å‡ºé€šçŸ¥ã€‚æˆ‘ä»¬éœ€è¦ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤å®‰è£…å®ƒ:</p><pre class="kg kh ki kj gt lq lr ls lt aw lu bi"><span id="daf2" class="lv lw iq lr b gy lx ly l lz ma">npm install @material-ui/lab --save<br/>yarn add @material-ui/lab</span></pre><p id="6b87" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">å“¦ï¼Œå·®ç‚¹å¿˜äº†ç”¨æ¥å‘èµ·APIè¯·æ±‚çš„<a class="ae ln" href="https://www.npmjs.com/package/axios" rel="noopener ugc nofollow" target="_blank"> axois </a>åŒ…ã€‚è¯·æŒ‰ç…§ä»¥ä¸‹æ–¹å¼å®‰è£…è½¯ä»¶åŒ…:</p><pre class="kg kh ki kj gt lq lr ls lt aw lu bi"><span id="0049" class="lv lw iq lr b gy lx ly l lz ma">npm install axios --save<br/>yarn add axios</span></pre><p id="7080" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">ç°åœ¨æˆ‘ä»¬å·²ç»å®‰è£…äº†æ‰€éœ€çš„åŒ…ï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹æºä»£ç ã€‚<a class="ae ln" href="https://github.com/effiongcharles/material-ui-table-crud-restapi" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir">github</strong></a>ä¸Šæœ‰å®Œæ•´çš„é¡¹ç›®æºä»£ç ä¾›æ‚¨ä¸‹è½½è¯•ç”¨ã€‚è¿™é‡Œæˆ‘å°†åªå…³æ³¨ç›¸å…³çš„ä»£ç éƒ¨åˆ†ã€‚</p></div><div class="ab cl mb mc hu md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ij ik il im in"><h1 id="1179" class="mi lw iq bd mj mk ml mm mn mo mp mq mr jw ms jx mt jz mu ka mv kc mw kd mx my bi translated">åç«¯â€”è¿œç¨‹æ•°æ®æº</h1><p id="0d95" class="pw-post-body-paragraph kr ks iq kt b ku mz jr kw kx na ju kz la nb lc ld le nc lg lh li nd lk ll lm ij bi translated">è¿™ä¸ªåº”ç”¨ç¨‹åºä¾èµ–äºä¸€ä¸ªå…è´¹çš„åœ¨çº¿REST APIï¼Œä»¥æŠ½è±¡å‡ºæˆ‘ä»¬è‡ªå·±åˆ›å»ºè¿™æ ·ä¸€ä¸ªAPIçš„å¤æ‚æ€§ï¼Œå› ä¸ºè¿™ä¸æ˜¯æœ¬æ•™ç¨‹çš„é‡ç‚¹ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨<a class="ae ln" href="https://reqres.in/" rel="noopener ugc nofollow" target="_blank">https://reqres.in/</a>ã€‚å®ƒæä¾›äº†APIç«¯ç‚¹ï¼Œå…è®¸æˆ‘ä»¬å‘å‡º(ä¸ç”¨æˆ·ç›¸å…³çš„)APIè¯·æ±‚ï¼Œæ¯”å¦‚POST(ç”¨äºåˆ›å»ºè®°å½•ï¼Œåœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­:åˆ›å»ºæ–°ç”¨æˆ·)ã€GET(ç”¨äºè·å–è®°å½•)ã€PUT/PATCH(ç”¨äºæ›´æ–°è®°å½•)ã€DELETE(é¡¾åæ€ä¹‰ğŸ˜)ç­‰ã€‚æˆ‘å»ºè®®æ‚¨è®¿é—®è¯¥ç«™ç‚¹ï¼Œç†Ÿæ‚‰å„ç§å¯èƒ½çš„APIè°ƒç”¨ã€‚è®©æˆ‘ä»¬è½¬åˆ°äº‹æƒ…çš„å‰ç«¯ã€‚</p></div><div class="ab cl mb mc hu md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ij ik il im in"><h1 id="c2b7" class="mi lw iq bd mj mk ml mm mn mo mp mq mr jw ms jx mt jz mu ka mv kc mw kd mx my bi translated">å‰ç«¯â€”ååº”ã€ç‰©æ–™ç•Œé¢/è¡¨æ ¼</h1><p id="f264" class="pw-post-body-paragraph kr ks iq kt b ku mz jr kw kx na ju kz la nb lc ld le nc lg lh li nd lk ll lm ij bi translated">React <a class="ae ln" href="https://material-ui.com/" rel="noopener ugc nofollow" target="_blank"> Material UI </a>ä¸ºæˆ‘ä»¬æä¾›äº†è®¸å¤šç»„ä»¶(Alertã€Tablesã€Navbarç­‰),ç”¨äºåœ¨Reactä¸­åˆ›å»ºå‡ºè‰²çš„ç”¨æˆ·ç•Œé¢â€”â€”æ— éœ€ç¼–å†™ä¸€è¡ŒCSSä»£ç ã€‚å¦ä¸€ä¸ªæµè¡Œçš„UIæ¡†æ¶æ˜¯â€œreact-bootstrapâ€(æ˜¯çš„ï¼Œè¿™æ˜¯ä¸ºreacté‡å»ºçš„æ—§çš„bootstrapæ¡†æ¶)ã€‚å¦‚å‰æ‰€è¿°ï¼ŒMaterial-tableæ‰©å±•äº†é»˜è®¤çš„Material-UIè¡¨ï¼Œå¢åŠ äº†ä¸€äº›å¾ˆé…·çš„ç‰¹æ€§ã€‚è®©æˆ‘ä»¬ä»ç”¨æˆ·è¡¨å¼€å§‹ã€‚</p><p id="ed33" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">è¡¨æ ¼é€šå¸¸æœ‰è¡Œå’Œåˆ—ã€‚æˆ‘ä»¬éœ€è¦ä¸ºè¡¨æ ¼å®šä¹‰åˆ—å’Œè¡Œ(æ•°æ®),å¦‚ä¸‹æ‰€ç¤º:</p><pre class="kg kh ki kj gt lq lr ls lt aw lu bi"><span id="66e7" class="lv lw iq lr b gy lx ly l lz ma">var columns = [</span><span id="4afb" class="lv lw iq lr b gy ne ly l lz ma">{title: "id", field: "id", hidden: true},<br/>{title: "Avatar", render: rowData =&gt; &lt;Avatar maxInitials={1} size={40} round={true} name={rowData === undefined ? " " : rowData.first_name} /&gt;  },<br/>{title: "First name", field: "first_name"},<br/>{title: "Last name", field: "last_name"},<br/>{title: "email", field: "email"}</span><span id="5daf" class="lv lw iq lr b gy ne ly l lz ma">]</span><span id="1536" class="lv lw iq lr b gy ne ly l lz ma">const [data, setData] = useState([]); //table data</span><span id="eb44" class="lv lw iq lr b gy ne ly l lz ma">//for error handling<br/>const [iserror, setIserror] = useState(false)<br/>const [errorMessages, setErrorMessages] = useState([])</span></pre><p id="2e9e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">æ ¹æ®ä¸Šé¢çš„ä»£ç ç‰‡æ®µï¼Œæˆ‘ä»¬çš„è¡¨å°†æœ‰idã€åå­—ã€å§“æ°ã€ç”µå­é‚®ä»¶å’Œå¤´åƒåˆ—ã€‚è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å°†ä»RESTful APIæ¥æ”¶JSONæ•°æ®ã€‚å¦‚ä¸‹æ‰€ç¤º:</p><pre class="kg kh ki kj gt lq lr ls lt aw lu bi"><span id="cad0" class="lv lw iq lr b gy lx ly l lz ma">//JSON data from RESTful API<br/>"user": <br/> {<br/>    "id": 2,<br/>    "email": "janet.weaver@reqres.in",<br/>    "first_name": "Janet",<br/>    "last_name": "Weaver",<br/>    "avatar": " "<br/> }</span></pre><p id="293e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">æ‚¨æ˜¯å¦æ³¨æ„åˆ°JSONæ•°æ®é”®(idï¼Œemailï¼Œâ€¦)ä¸è¡¨åˆ—â€”å­—æ®µå±æ€§(idï¼Œemailï¼Œâ€¦)å®Œå…¨åŒ¹é…ï¼Ÿè¿™éå¸¸é‡è¦ï¼Œå› ä¸ºMaterial-tableä¾èµ–äºæ­¤æ¥æ­£ç¡®æ˜¾ç¤ºæ¥è‡ªAPIçš„æ•°æ®ï¼Œå³å°†APIæ•°æ®æ˜ å°„åˆ°è¡¨åˆ—ã€‚å¸Œæœ›ä½ æ˜ç™½äº†ï¼Ÿ</p><p id="dfb9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">â€œdataâ€å˜é‡å°†æˆ‘ä»¬çš„è¡¨æ•°æ®å­˜å‚¨åœ¨ä¸€ä¸ªçŠ¶æ€å˜é‡ä¸­ã€‚å½“çŠ¶æ€æ”¹å˜æ—¶(ä½¿ç”¨setæ–¹æ³•ï¼Œå³æˆ‘ä»¬ç¤ºä¾‹ä¸­çš„setData ), app(<em class="nf">react</em>è¯­è¨€ä¸­çš„ç»„ä»¶)é‡æ–°å‘ˆç°(ååº”)ã€‚å…¶ä»–çŠ¶æ€å˜é‡ç”¨äºé”™è¯¯å¤„ç†ã€‚æˆ‘ä»¬ç¨åä¼šè°ˆåˆ°å®ƒä»¬ã€‚</p><p id="da50" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">ä¸‹ä¸€æ­¥æ˜¯ä»APIè·å–æ•°æ®ï¼Œä»¥ä¾¿æ•°æ®å˜é‡å¯ä»¥ä¿å­˜ç”¨æˆ·è®°å½•ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªç©ºæ•°ç»„ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬éœ€è¦å‘æˆ‘ä»¬çš„APIå‘èµ·ä¸€ä¸ªGETè¯·æ±‚ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä»APIæ¥æ”¶ç”¨æˆ·åˆ—è¡¨ä½œä¸ºå“åº”ã€‚æ¥ä¸‹æ¥è®©æˆ‘ä»¬çœ‹çœ‹è¿™æ˜¯å¦‚ä½•åšåˆ°çš„</p><pre class="kg kh ki kj gt lq lr ls lt aw lu bi"><span id="9d09" class="lv lw iq lr b gy lx ly l lz ma">useEffect(() =&gt; {<br/>  api.get("/users")<br/>    .then(res =&gt; {<br/>      setData(res.data.data)<br/>    })<br/>    .catch(error=&gt;{<br/>      setErrorMessage(["Cannot load user data"])<br/>      setIserror(true)<br/>    })<br/>}, [])</span></pre><p id="a35c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">æˆ‘ä»¬åœ¨useEffect reactæŒ‚é’©ä¸­è·å–ç”¨æˆ·åˆ—è¡¨â€”useEffectå‡½æ•°åœ¨æ¯æ¬¡å‘ˆç°åŠŸèƒ½ç»„ä»¶æ—¶è¿è¡Œï¼Œä¾‹å¦‚å½“é¡µé¢åˆ·æ–°æˆ–çŠ¶æ€æ•°æ®æ›´æ”¹æ—¶(åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒçŠ¶æ€æ•°æ®éœ€è¦åŒ…å«åœ¨use effectæ•°ç»„ä¸­)ã€‚APIç”¨ä¸€ä¸ªç”¨æˆ·æ•°æ®åˆ—è¡¨æ¥å“åº”æˆ‘ä»¬å‘èµ·çš„GETè¯·æ±‚ã€‚ç„¶åï¼Œæˆ‘ä»¬ä½¿ç”¨setDataæ–¹æ³•æ¥æ›´æ”¹æ•°æ®å¯¹è±¡çš„çŠ¶æ€ã€‚ç°åœ¨ï¼Œæ•°æ®å˜é‡åŒ…å«ç”¨æˆ·åˆ—è¡¨ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªç©ºæ•°ç»„ã€‚å¦ä¸€æ–¹é¢ï¼Œå¦‚æœå‡ºç°é”™è¯¯ï¼Œæˆ‘ä»¬ä¼šæé†’ç”¨æˆ·ã€‚å¾ˆç®€å•ï¼Œå¯¹å§ï¼ŸğŸ˜Š</p><p id="a3b8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">æˆ‘ä»¬æœ‰äº†æ•°æ®ï¼Œç°åœ¨æ˜¯æ—¶å€™æŠŠå®ƒä»¬å±•ç¤ºåœ¨æ¡Œé¢ä¸Šäº†ã€‚</p><pre class="kg kh ki kj gt lq lr ls lt aw lu bi"><span id="fdbe" class="lv lw iq lr b gy lx ly l lz ma">&lt;MaterialTable<br/>  title="User list from API"<br/>  columns={columns}<br/>  data={data}<br/>  icons={tableIcons}<br/>  editable={{<br/>    <strong class="lr ir">onRowUpdate</strong>: (newData, oldData) =&gt;<br/>      new Promise((resolve) =&gt; {<br/>        handleRowUpdate(newData, oldData, resolve);<br/>  }),<br/>  <strong class="lr ir">onRowAdd</strong>: (newData) =&gt;<br/>    new Promise((resolve) =&gt; {<br/>      handleRowAdd(newData, resolve)<br/>    }),<br/>  <strong class="lr ir">onRowDelete</strong>: (oldData) =&gt;<br/>    new Promise((resolve) =&gt; {<br/>      handleRowDelete(oldData, resolve)<br/>    }),<br/>  }}<br/>/&gt;</span></pre><p id="4317" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">ä¸Šé¢çš„ä»£ç ç‰‡æ®µè´Ÿè´£æ˜¾ç¤ºè¡¨æ ¼ã€‚å®ƒä½¿ç”¨â€œææ–™è¡¨â€ç»„ä»¶ã€‚æˆ‘ä»¬æŒ‡å®šæ ‡é¢˜ã€åˆ—å’Œæ•°æ®(ç”¨æˆ·åˆ—è¡¨)ã€‚æˆ‘ä»¬è¿˜åŒ…æ‹¬ç»„ä»¶æ‰€éœ€çš„å›¾æ ‡åˆ—è¡¨ã€‚è¿™äº›å›¾æ ‡åŒ…æ‹¬ç®­å¤´(ç”¨äºåˆ†é¡µ)ã€æœç´¢ã€ç¼–è¾‘ã€åˆ é™¤å›¾æ ‡ç­‰ã€‚å¦‚æœæˆ‘ä»¬è¿è¡Œè¯¥åº”ç”¨ç¨‹åºï¼Œå°†æ˜¾ç¤ºä¸‹é¢çš„å±å¹•æˆªå›¾ã€‚</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ng"><img src="../Images/c0fe5d0ed411a1b1e52eeeb969b05720.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WA0bUvUZh8bZjCf9rcRZnQ.png"/></div></div></figure><p id="424b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">è¿™å°±è§£å†³äº†åœ¨T2å’ŒUDè¿è¥ä¸­çš„ç¬¬ä¸€ä¸ªé—®é¢˜ã€‚è®©æˆ‘ä»¬ç»§ç»­è¿›è¡Œ<strong class="kt ir">C</strong>createæ“ä½œï¼Œå³æ·»åŠ ä¸€ä¸ªæ–°ç”¨æˆ·ã€‚è¯·æ³¨æ„ï¼Œä¸Šé¢çš„ä»£ç åŒ…æ‹¬ç”¨äºæ‰§è¡Œå…¶ä»–CRUDæ“ä½œ(åˆ›å»ºã€æ›´æ–°å’Œåˆ é™¤)çš„â€œé“å…·â€ã€‚â€œonRowAddâ€å±æ€§åˆ›å»ºä¸€ä¸ªæ–°çš„â€œpromiseâ€å¯¹è±¡(Promiseè¿”å›ä¸€ä¸ªæœªæ¥å€¼ã€‚è¿™å…è®¸å¤„ç†å¼‚æ­¥äº‹ä»¶â€” <a class="ae ln" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="noopener ugc nofollow" target="_blank">åœ¨è¿™é‡Œé˜…è¯»æ›´å¤š</a>ã€‚)promiseå¯¹è±¡è°ƒç”¨â€œhandleRowAdd()â€å‡½æ•°ã€‚ä¸‹é¢çš„ä»£ç ç‰‡æ®µæä¾›äº†å‡½æ•°å®ç°ã€‚</p><pre class="kg kh ki kj gt lq lr ls lt aw lu bi"><span id="7853" class="lv lw iq lr b gy lx ly l lz ma">const handleRowAdd = (newData, resolve) =&gt; {<br/>  //validation<br/>  let errorList = []<br/>  if(newData.first_name === undefined){<br/>    errorList.push("Please enter first name")<br/>  }</span><span id="a0d8" class="lv lw iq lr b gy ne ly l lz ma">  if(newData.last_name === undefined){<br/>    errorList.push("Please enter last name")<br/>  }</span><span id="654a" class="lv lw iq lr b gy ne ly l lz ma">  if(newData.email === undefined || validateEmail(newData.email) === false){<br/>    errorList.push("Please enter a valid email")<br/>  }</span><span id="8406" class="lv lw iq lr b gy ne ly l lz ma">  if(errorList.length &lt; 1){ //no error<br/>    api.post("/users", newData)<br/>      .then(res =&gt; {<br/>        let dataToAdd = [...data];<br/>        dataToAdd.push(newData);<br/>        setData(dataToAdd);<br/>        resolve()<br/>        setErrorMessages([])<br/>        setIserror(false)<br/>     })<br/>     .catch(error =&gt; {<br/>        setErrorMessages(["Cannot add data. Server error!"])<br/>        setIserror(true)<br/>        resolve()<br/>      })<br/>  }else{<br/>    setErrorMessages(errorList)<br/>    setIserror(true)<br/>    resolve()<br/>  }<br/>}</span></pre><p id="3a6b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">è¿™ä¸ªåŠŸèƒ½çœ‹èµ·æ¥å¾ˆç®€å•ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬åšä¸€äº›éªŒè¯ï¼Œä»¥ç¡®ä¿ç”¨æˆ·å·²ç»å®Œæˆæ‰€æœ‰å¿…å¡«å­—æ®µã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å‘é€ä¸€ä¸ªPOSTè¯·æ±‚ï¼Œå…¶ä¸­åŒ…å«æˆ‘ä»¬æƒ³è¦æ·»åŠ çš„æ•°æ®(å³â€œnewDataâ€)ã€‚ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­åšåˆ«çš„äº‹æƒ…(æ˜¯çš„ï¼Œè¿™å°±æ˜¯â€œPromiseâ€çš„ç”¨æ­¦ä¹‹åœ°â€”â€”æƒ³æƒ³å¤šçº¿ç¨‹),ç›´åˆ°æˆ‘ä»¬æ”¶åˆ°æ¥è‡ªæœåŠ¡å™¨(API)çš„å“åº”ã€‚å¦‚æœPOSTè¯·æ±‚æˆåŠŸï¼Œé‚£ä¹ˆæˆ‘ä»¬ä½¿ç”¨setData()å‡½æ•°æ›´æ–°çŠ¶æ€æ•°æ®ï¼Œå¹¶å°†â€œPromiseâ€æ ‡è®°ä¸ºresolved(å‚è§â€œthenâ€å‡½æ•°)ã€‚å¦åˆ™ï¼Œæˆ‘ä»¬ä¼šæé†’ç”¨æˆ·ä¸€ä¸ªé”™è¯¯ã€‚</p><p id="dd51" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">ç°åœ¨è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•æ›´æ–°è¡¨ä¸­çš„ç»™å®šè¡Œã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬è°ƒç”¨â€œhandleRowUpdate(â€¦)â€å‡½æ•°ã€‚ä¸‹é¢ç»™å‡ºäº†å®ƒçš„å®ç°ã€‚</p><pre class="kg kh ki kj gt lq lr ls lt aw lu bi"><span id="12fa" class="lv lw iq lr b gy lx ly l lz ma">const handleRowUpdate = (newData, oldData, resolve) =&gt; {</span><span id="8695" class="lv lw iq lr b gy ne ly l lz ma">  //validation<br/>  .....<br/>  if(errorList.length &lt; 1){<br/>    api.patch("/users/"+newData.id, newData)<br/>      .then(res =&gt; {<br/>        const dataUpdate = [...data];<br/>        const index = oldData.tableData.id;<br/>        dataUpdate[index] = newData;<br/>        setData([...dataUpdate]);<br/>        resolve()<br/>        setIserror(false)<br/>        setErrorMessages([])<br/>      })<br/>      .catch(error =&gt; {<br/>        setErrorMessages(["Update failed! Server error"])<br/>        setIserror(true)<br/>        resolve()<br/>    })<br/>  }else{<br/>    setErrorMessages(errorList)<br/>    setIserror(true)<br/>    resolve()<br/>  }<br/>}</span></pre><p id="e88e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">æˆ‘å¾ˆç¡®å®šä½ èƒ½å¼„æ¸…æ¥šè¿™ä¸ªå‡½æ•°æ˜¯å¹²ä»€ä¹ˆçš„ã€‚æˆ‘ä»¬å‘èµ·ä¸€ä¸ªè¡¥ä¸è¯·æ±‚ï¼Œè¿™æ˜¯æ›´æ–°æ•°æ®çš„APIè°ƒç”¨ã€‚æ³¨æ„ï¼Œæˆ‘ä»¬åœ¨è¯·æ±‚URLä¸­ä¼ é€’äº†<strong class="kt ir"> id </strong>(åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­æ˜¯ç”¨æˆ·id)ï¼Œè¿™æ ·APIå°±çŸ¥é“è¦æ›´æ–°å“ªä¸ªè®°å½•ã€‚å¦‚æœæœåŠ¡å™¨èƒ½å¤ŸæˆåŠŸåœ°æ‰¹å‡†æˆ‘ä»¬çš„è¯·æ±‚ï¼Œæˆ‘ä»¬å°±ä¼šæ”¶åˆ°ä¸€ä¸ªå“åº”ã€‚ç„¶åï¼Œæˆ‘ä»¬æ›´æ–°æˆ‘ä»¬çš„çŠ¶æ€ã€‚å¦åˆ™ï¼Œæˆ‘ä»¬ä¼šæé†’ç”¨æˆ·å‡ºç°é”™è¯¯ã€‚è·³è¿‡è¡¨å•éªŒè¯ï¼Œå› ä¸ºå®ƒä¸å‰ä¸€ç§æƒ…å†µç›¸ä¼¼ã€‚</p><p id="781a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">æ‰€ä»¥ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬çš„<strong class="kt ir">C</strong>create<strong class="kt ir">R</strong>EAD<strong class="kt ir">U</strong>pdateæ“ä½œã€‚æˆ‘ä»¬ç°åœ¨åªå‰©ä¸‹åˆ é™¤æ“ä½œäº†ã€‚æ¥ä¸‹æ¥è®©æˆ‘ä»¬æ¥çœ‹çœ‹ã€‚</p><pre class="kg kh ki kj gt lq lr ls lt aw lu bi"><span id="74e2" class="lv lw iq lr b gy lx ly l lz ma">const handleRowDelete = (oldData, resolve) =&gt; {<br/>  api.delete("/users/"+oldData.id)<br/>    .then(res =&gt; {<br/>      const dataDelete = [...data];<br/>      const index = oldData.tableData.id;<br/>      dataDelete.splice(index, 1);<br/>      setData([...dataDelete]);<br/>      resolve()<br/>    })<br/>    .catch(error =&gt; {<br/>      setErrorMessages(["Delete failed! Server error"])<br/>      setIserror(true)<br/>      resolve()<br/>    })<br/>}</span></pre><p id="1b2e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">ä¸Šé¢çš„ä»£ç ç‰‡æ®µæä¾›äº†å¤„ç†åˆ é™¤æ“ä½œçš„å‡½æ•°ã€‚è¿™ä¸ªæ–¹æ³•å’Œå‰é¢çš„(è¡¥ä¸)å¾ˆåƒã€‚è¿™é‡Œçš„åŒºåˆ«æ˜¯æˆ‘ä»¬å‘èµ·ä¸€ä¸ªåˆ é™¤è¯·æ±‚ã€‚</p></div><div class="ab cl mb mc hu md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ij ik il im in"><h1 id="6321" class="mi lw iq bd mj mk ml mm mn mo mp mq mr jw ms jx mt jz mu ka mv kc mw kd mx my bi translated">æ‘˜è¦</h1><p id="429f" class="pw-post-body-paragraph kr ks iq kt b ku mz jr kw kx na ju kz la nb lc ld le nc lg lh li nd lk ll lm ij bi translated">åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæ‚¨å·²ç»å­¦ä¹ äº†å¦‚ä½•ä½¿ç”¨æµè¡Œçš„Reactææ–™è¡¨å’ŒRESTful APIä¸­çš„æ•°æ®åœ¨Reactä¸­æ‰§è¡ŒCRUDæ“ä½œã€‚</p><p id="c727" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Material-tableå¾ˆæ£’ï¼Œæˆ‘å–œæ¬¢å®ƒæä¾›çš„å¼€ç®±å³ç”¨çš„ç‰¹æ€§ï¼Œä¾‹å¦‚(æ˜“äºåˆ›å»ºã€æ›´æ–°ã€åˆ é™¤è®°å½•æˆ–è¡Œ)ã€‚æˆ‘ä¸ªäººæ›¾å°†è¿™ä¸ªåŒ…ç”¨äºç”Ÿäº§çº§ä»£ç ã€‚è¯¥è½¯ä»¶åŒ…çš„å¦ä¸€ä¸ªæœ‰è¶£çš„ç‰¹æ€§æ˜¯å®ƒéå¸¸å®¹æ˜“å®šåˆ¶ã€‚æ‚¨å¯ä»¥ç”¨æè´¨-UIæ—¥æœŸæ—¶é—´é€‰æ‹©å™¨æ›¿æ¢è¿™äº›åˆ—ï¼Œæˆ–è€…æ›´æ”¹å›¾æ ‡(åˆ é™¤ã€ç¼–è¾‘ã€æœç´¢)ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒMaterial-tableç‰¹åˆ«é€‚åˆæ˜¾ç¤ºè¡¨æ ¼æ•°æ®ã€‚</p><p id="478f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">æˆ‘å¸Œæœ›ä½ åœ¨è¿™ç¯‡æ•™ç¨‹ä¸­å­¦åˆ°äº†ä¸€äº›ä¸œè¥¿ã€‚</p><p id="75f1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">éšæ„åœ¨Github ä¸Š<a class="ae ln" href="https://github.com/effiongcharles/material-ui-table-crud-restapi" rel="noopener ugc nofollow" target="_blank">ä¸‹è½½/å…‹éš†é¡¹ç›®æºä»£ç ã€‚</a></p><p id="f10f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">å¦‚æœä½ æ˜¯haven'tâ˜ºï¸äººï¼Œå¯ä»¥çœ‹çœ‹æˆ‘çš„å…¶ä»–å…³äºPythonä¸­çš„<a class="ae ln" rel="noopener ugc nofollow" target="_blank" href="/program-your-first-multiple-user-network-game-in-python-9f4cc3650de2?source=friends_link&amp;sk=312059e7967875fdbf4c7b67520bbdc9">ç½‘ç»œç¼–ç¨‹çš„æ•™ç¨‹</a></p><p id="2b4d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">ç¥ä½ å¥½è¿ï¼</p></div></div>    
</body>
</html>