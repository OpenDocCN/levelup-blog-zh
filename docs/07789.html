<html>
<head>
<title>How to use Django Models</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Django模型</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-use-django-models-1c8d31c770a7?source=collection_archive---------8-----------------------#2021-03-10">https://levelup.gitconnected.com/how-to-use-django-models-1c8d31c770a7?source=collection_archive---------8-----------------------#2021-03-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/f1a9ce8e1446459564d2c5734ed0b95f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*TB1sS1Ji9DeVh8-a.PNG"/></div></div></figure><h1 id="18c2" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated"><strong class="ak">什么是Django模型？</strong></h1><p id="6a9e" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">Django模型是存储在单个数据库表中的信息和行为的来源。</p><p id="dd13" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">Django模型是如何工作的？</p><p id="8b38" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">把Django模型想象成一个蓝图。</p><p id="4d17" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">每个模型都由需要用户输入的Django模型字段组成。</p><p id="3594" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">一旦用户完成了必需的字段，模型对象就被保存在数据库中。</p><p id="88c0" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">然后可以通过queryset访问模型的信息，query set是模型对象的可调用集合。</p><p id="d2a7" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated"><strong class="lb iu">您何时使用Django模型？</strong></p><p id="f216" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">当您需要在项目中动态加载信息时，可以使用Django模型。</p><p id="c8da" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">例如，如果你创建一个博客，不要硬编码每一篇文章的内容。</p><p id="0404" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">创建一个文章模型，将文章标题、URL slug和内容作为模型字段。</p><p id="a3f6" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">然后，通过基于用户请求动态加载queryset，为每篇文章使用相同的模板。</p><p id="c487" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">要了解更多关于这个过程的信息，请访问<a class="ae lx" href="https://www.ordinarycoders.com/creating-a-blog" rel="noopener ugc nofollow" target="_blank"> Django II，第4课:创建博客</a>。</p><p id="516e" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated"><strong class="lb iu">是否需要Django模型？</strong></p><p id="c2a5" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">Django模型在技术上不是必需的，但强烈推荐。</p><p id="554c" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">尽可能使用Django模型来减少重复代码是一个很好的实践，但最终并不是必需的</p><p id="5b37" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">对于不变或很少改变的站点信息。</p><p id="d28d" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated"><strong class="lb iu"> Django模型示例</strong></p><p id="05fe" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">为了演示Django模型的用途，让我们创建一个列出流行电影的Django模型示例。</p><p id="f77d" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">首先，我们将创建模型及其字段，然后登录Django管理站点并创建模型对象，最后，我们将使用模板中的for循环呈现queryset。</p></div><div class="ab cl md me hx mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="im in io ip iq"><h1 id="6924" class="kb kc it bd kd ke mk kg kh ki ml kk kl km mm ko kp kq mn ks kt ku mo kw kx ky bi translated"><strong class="ak">如何在Django中创建模型</strong></h1><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="24f1" class="my kc it mu b gy mz na l nb nc">#<em class="nd">env &gt; mysite &gt; main &gt; models.py</em></span><span id="00e3" class="my kc it mu b gy ne na l nb nc">from django.db import models</span><span id="8ecd" class="my kc it mu b gy ne na l nb nc"># Create your models here.</span><span id="f81e" class="my kc it mu b gy ne na l nb nc">class Movie(models.Model):</span></pre><p id="4fd6" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">首先打开app目录文件夹中的Django <em class="nd"> models.py </em>文件。</p><p id="f02e" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated"><code class="fe nf ng nh mu b">class Movie</code>继承评论正下方的<code class="fe nf ng nh mu b">(models.Model)</code>。</p><p id="dc35" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">接下来，我们需要指定我们希望在添加到项目中的每个电影下列出的所有信息。</p><p id="e677" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated"><strong class="lb iu">添加基本Django模型字段</strong></p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="7d08" class="my kc it mu b gy mz na l nb nc">#<em class="nd">env &gt; mysite &gt; main &gt; models.py</em></span><span id="eb98" class="my kc it mu b gy ne na l nb nc">from django.db import models</span><span id="2b84" class="my kc it mu b gy ne na l nb nc"># Create your models here.</span><span id="b8cf" class="my kc it mu b gy ne na l nb nc">class Movie(models.Model):<br/>	movie_title = models.CharField(max_length=150)<br/>	release_year = models.IntegerField()<br/>	director = models.CharField(max_length=100)<br/>	movie_plot = models.TextField()</span></pre><p id="43bd" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">首先，为电影标题添加一个字段。该字段是一个Django <code class="fe nf ng nh mu b">models.CharField()</code>或字符字段，最多包含150个字符的文本。</p><p id="f023" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">接下来，为发布年份添加一个<code class="fe nf ng nh mu b">IntegerField</code>。</p><p id="2f8c" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">让我们也为导演的名字添加一个字段。</p><p id="fbe1" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">我们将添加的最后一个字段是使用姜戈<code class="fe nf ng nh mu b"> models.Textfield()</code>的电影情节。此字段允许提交段落文本。</p><p id="cb64" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated"><strong class="lb iu">如何更改Django型号显示名称</strong></p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="f29e" class="my kc it mu b gy mz na l nb nc">#<em class="nd">env &gt; mysite &gt; main &gt; models.py</em></span><span id="b2db" class="my kc it mu b gy ne na l nb nc">from django.db import models</span><span id="4b61" class="my kc it mu b gy ne na l nb nc"># Create your models here.</span><span id="1aee" class="my kc it mu b gy ne na l nb nc">class Movie(models.Model):<br/>	movie_title = models.CharField(max_length=150)<br/>	release_year = models.IntegerField()<br/>	director = models.CharField(max_length=100)<br/>	movie_plot = models.TextField()<br/>	</span><span id="af42" class="my kc it mu b gy ne na l nb nc">	def __str__(self):<br/>		return self.movie_title</span></pre><p id="fb4d" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">在我们继续之前，让我们添加一个返回电影标题作为显示名称的函数。</p><p id="30de" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">如果你忘记添加这个函数，它会在Django管理中列出电影对象(1)，电影对象(2)，等等，很难知道哪个对象对应于一个特定的电影。</p><p id="1dfc" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated"><strong class="lb iu">进行Django迁移以在数据库中创建模型</strong></p><p id="927a" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated"><em class="nd"> macOS终端</em></p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="1d0b" class="my kc it mu b gy mz na l nb nc">(env)User-Macbook:mysite user$ python3 manage.py makemigrations<br/>Migrations for 'main':<br/>  main\migrations\0001_initial.py<br/>    - Create model Movie<br/></span><span id="f1f9" class="my kc it mu b gy ne na l nb nc">(env)User-Macbook:mysite user$</span></pre><p id="b1aa" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated"><em class="nd"> Windows命令提示符</em></p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="4697" class="my kc it mu b gy mz na l nb nc">(env) C:\Users\Owner\Desktop\Code\env\mysite&gt;py manage.py makemigrations<br/>Migrations for 'main':<br/>  main\migrations\0001_initial.py<br/>    - Create model Movie</span><span id="dc99" class="my kc it mu b gy ne na l nb nc">(env) C:\Users\Owner\Desktop\Code\env\mysite&gt;</span></pre><p id="9d07" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">为了在Django admin中使用模型，我们需要<code class="fe nf ng nh mu b">makemigrations</code>并创建映射到单个数据库表的模型。</p><p id="e398" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated"><strong class="lb iu">将模型迁移到数据库</strong></p><p id="aa77" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated"><em class="nd"> macOS终端</em></p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="b5e6" class="my kc it mu b gy mz na l nb nc">(env)User-Macbook:mysite user$ python3 manage.py migrate<br/>Operations to perform:<br/>  Apply all migrations: admin, auth, contenttypes, main, sessions<br/>Running migrations:<br/>  Applying main.0001_initial... OK<br/></span><span id="87f7" class="my kc it mu b gy ne na l nb nc">(env)User-Macbook:mysite user$</span></pre><p id="08a7" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated"><em class="nd"> Windows命令提示符</em></p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="e0a7" class="my kc it mu b gy mz na l nb nc">(env) C:\Users\Owner\Desktop\Code\env\mysite&gt;py manage.py migrate<br/>Operations to perform:<br/>  Apply all migrations: admin, auth, contenttypes, main, sessions<br/>Running migrations:<br/>  Applying main.0001_initial... OK</span><span id="2b6c" class="my kc it mu b gy ne na l nb nc">(env) C:\Users\Owner\Desktop\Code\env\mysite&gt;</span></pre><p id="a040" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">现在有了创建的表，我们可以<code class="fe nf ng nh mu b">migrate</code>这个模型，这样所有上传到这个模型的信息都将保存到Django数据库中，<em class="nd"> db.sqilte3 </em>。</p><p id="093e" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated"><strong class="lb iu">在Django admin中注册模型</strong></p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="ce2a" class="my kc it mu b gy mz na l nb nc">#<em class="nd">env &gt; mysite &gt; main &gt; admin.py</em></span><span id="22e0" class="my kc it mu b gy ne na l nb nc">from django.contrib import admin<br/>from .models import Movie</span><span id="dae5" class="my kc it mu b gy ne na l nb nc"># Register your models here.</span><span id="0e35" class="my kc it mu b gy ne na l nb nc">admin.site.register(Movie)</span></pre><p id="b6c3" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">模型成功添加到数据库后，我们需要将它注册到管理页面，这样我们就可以在Django管理页面上访问它。</p><p id="c14a" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">从页面顶部的<em class="nd"> models.py </em>文件中导入<code class="fe nf ng nh mu b">Movie</code>，然后在下面添加<code class="fe nf ng nh mu b">admin.site.register(Movie)</code>。</p><p id="54f9" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">保存文件，否则模型将不会出现在我们即将访问的管理页面上。</p></div><div class="ab cl md me hx mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="im in io ip iq"><h1 id="2e64" class="kb kc it bd kd ke mk kg kh ki ml kk kl km mm ko kp kq mn ks kt ku mo kw kx ky bi translated"><strong class="ak">创建管理员用户名和密码</strong></h1><p id="5b78" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated"><em class="nd"> macOS终端</em></p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="e4a6" class="my kc it mu b gy mz na l nb nc">(env)User-Macbook:mysite user$ python3 manage.py createsuperuser<br/>Username (leave blank to use 'owner'): admin<br/>Email address:<br/>Password: *****<br/>Password (again): *****<br/>Superuser created successfully.</span><span id="6311" class="my kc it mu b gy ne na l nb nc">(env)User-Macbook:mysite user$ python3 manage.py runserver</span></pre><p id="5d97" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated"><em class="nd"> Windows命令提示符</em></p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="126c" class="my kc it mu b gy mz na l nb nc">(env) C:\Users\Owner\Desktop\Code\env\mysite&gt;py manage.py createsuperuser<br/>Username (leave blank to use 'owner'): admin<br/>Email address: <br/>Password: *****<br/>Password (again): *****<br/>Superuser created successfully.</span><span id="0e18" class="my kc it mu b gy ne na l nb nc">(env) C:\Users\Owner\Desktop\Code\env\mysite&gt;py manage.py runserver</span></pre><p id="b55b" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">返回CLI并运行项目中的<code class="fe nf ng nh mu b">createsuperuser</code>命令。输入用户名和密码，然后按Enter键跳过可选的电子邮件地址字段。创建用户后，再次运行服务器。这是访问项目管理网站所需的用户名和密码，所以请务必记住它们。</p><p id="273f" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated"><strong class="lb iu">登录Django管理网站</strong></p><p id="b469" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">在一个新标签页中进入<a class="ae lx" href="http://127.0.0.1:8000/admin/" rel="noopener ugc nofollow" target="_blank">http://127 . 0 . 0 . 1:8000/admin/</a>，使用刚刚创建的用户名和密码登录Django管理页面。登录后，您将看到一个界面，在您的应用程序名称“Main”下面列出了模型“Movies”。</p><figure class="mp mq mr ms gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/bc9d1d2c25163e98a9554c831aa93a06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*CK756xuyqxhHC70L.gif"/></div></div></figure><p id="4d22" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated"><strong class="lb iu">向Django admin添加一个模型对象</strong></p><p id="50ae" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">现在让我们给模型添加一个电影。点击“电影”,然后点击右上角的“添加电影”按钮。然后您将被带到一个页面，这个页面显示了我们在models.py中添加到模型中的字段。</p><figure class="mp mq mr ms gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/ba24958a2547b440feeb7d4902cc3549.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*RXdSc0Mq6TiS_NGz.gif"/></div></div></figure></div><div class="ab cl md me hx mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="im in io ip iq"><h1 id="5ef1" class="kb kc it bd kd ke mk kg kh ki ml kk kl km mm ko kp kq mn ks kt ku mo kw kx ky bi translated"><strong class="ak">渲染模板中的模型</strong></h1><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="4ad9" class="my kc it mu b gy mz na l nb nc">#<em class="nd">env &gt; mysite &gt; main &gt; views.py</em></span><span id="78c8" class="my kc it mu b gy ne na l nb nc">from django.shortcuts import render<br/>from .models import Movie</span><span id="cb70" class="my kc it mu b gy ne na l nb nc"># Create your views here.<br/>def movies(request):<br/>	movies = Movie.objects.all() #queryset containing all movies we just created<br/>	return render(request=request, template_name="main/movies.html", context={'movies':movies})</span></pre><p id="3ca1" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">是时候在模板中渲染模型了。为此，转到您想要渲染电影的模板的视图函数，在本例中，它是<em class="nd">movies.html</em>，并向该函数添加一个queryset。然后在return render中，将movies设置为模板显示时返回的上下文。</p><p id="37cf" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated"><strong class="lb iu">将路径连接到视图</strong></p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="cca6" class="my kc it mu b gy mz na l nb nc">#<em class="nd">env &gt; mysite &gt; main &gt; urls.py</em></span><span id="2b3a" class="my kc it mu b gy ne na l nb nc">from django.urls import path<br/>from . import views</span><span id="12f4" class="my kc it mu b gy ne na l nb nc">app_name = "main"   <br/></span><span id="b922" class="my kc it mu b gy ne na l nb nc">urlpatterns = [<br/>    path("", views.movies, name="movies"),<br/>]</span></pre><p id="6115" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">如果您没有连接到<em class="nd"> views.py </em>函数的URL路径，请确保向<em class="nd"> main &gt; urls.py </em>添加一个，以便视图在浏览器中呈现。</p><p id="2930" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated"><strong class="lb iu">将BootstrapCDN添加到Django模板</strong></p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="e073" class="my kc it mu b gy mz na l nb nc">#<em class="nd">env &gt; mysite &gt; main &gt; templates &gt; main &gt; movies.html</em></span><span id="395f" class="my kc it mu b gy ne na l nb nc">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;<br/>  &lt;head&gt;<br/>    &lt;!-- Required meta tags --&gt;<br/>    &lt;meta charset="utf-8"&gt;<br/>    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;<br/>    &lt;title&gt;Movies&lt;/title&gt;<br/>    &lt;!--Bootstrap CSS--&gt;<br/>    &lt;link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous"&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;</span><span id="db58" class="my kc it mu b gy ne na l nb nc">    &lt;!-- Optional Javascript --&gt;<br/>    &lt;script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"&gt;&lt;/script&gt;<br/>    &lt;script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"&gt;&lt;/script&gt;<br/>    &lt;script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"&gt;&lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="1f16" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">接下来，转到<em class="nd"> views.py </em>中指定的模板，这样我们就可以将模型添加到模板中。</p><p id="d0ec" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">我们使用<a class="ae lx" href="https://getbootstrap.com/" rel="noopener ugc nofollow" target="_blank"> Bootstrap </a>来帮助渲染模板，但是我们将使用Django模板语言(DTL)来渲染模型。</p><p id="744f" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated"><strong class="lb iu">将Django模型字段添加到模板中</strong></p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="b30f" class="my kc it mu b gy mz na l nb nc">#<em class="nd">env &gt; mysite &gt; main &gt; templates &gt; main &gt; movies.html</em></span><span id="de74" class="my kc it mu b gy ne na l nb nc">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;<br/>  &lt;head&gt;<br/>    &lt;!-- Required meta tags --&gt;<br/>    &lt;meta charset="utf-8"&gt;<br/>    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;<br/>    &lt;title&gt;Movies&lt;/title&gt;<br/>    &lt;!--Bootstrap CSS--&gt;<br/>    &lt;link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous"&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/></span><span id="55e8" class="my kc it mu b gy ne na l nb nc">    &lt;div class="container p-4"&gt;<br/>      &lt;div class="row"&gt;<br/>        {% for m in movies %}<br/>        &lt;div class="col-lg-4 col-md-6 col-sm-12 pb-4"&gt;<br/>          &lt;div class="card h-100 p-4"&gt;<br/>            &lt;h4&gt;{{m.movie_title}}&lt;/h4&gt;<br/>            &lt;p class="text-muted"&gt;{{m.release_year}} | {{m.director}}&lt;/p&gt;<br/>            &lt;p&gt;{{m.movie_plot}}&lt;/p&gt;<br/>          &lt;/div&gt;<br/>        &lt;/div&gt;<br/>        {% endfor %}<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;<br/></span><span id="3417" class="my kc it mu b gy ne na l nb nc">    &lt;!-- Optional Javascript --&gt;<br/>    &lt;script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"&gt;&lt;/script&gt;<br/>    &lt;script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"&gt;&lt;/script&gt;<br/>    &lt;script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"&gt;&lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="7b30" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">创建一个由<code class="fe nf ng nh mu b">{% for m in movies %}</code>编写的for循环，其中<code class="fe nf ng nh mu b">movies</code>是我们在视图函数中传递的上下文，<code class="fe nf ng nh mu b">m</code>是循环中对<code class="fe nf ng nh mu b">movies</code>的简写引用。</p><p id="5e3d" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">现在，我们可以调用之前在<em class="nd"> models.py </em>中指定的所有字段来呈现我们在Django admin中添加的所有信息。</p><p id="2c49" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">直接在HTML元素中添加<code class="fe nf ng nh mu b">{{m.movie_title}}</code>、<code class="fe nf ng nh mu b">{{m.release_year}}</code>、<code class="fe nf ng nh mu b">{{m.director}}</code>和<code class="fe nf ng nh mu b">{{m.movie_plot}}</code>，就像它们是常规文本一样。</p><p id="c20e" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">添加完所有字段后，用标签<code class="fe nf ng nh mu b">{% endfor %}</code>关闭for循环。</p><p id="01a8" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated"><strong class="lb iu">在浏览器中查看页面</strong></p><p id="892a" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">一旦模型被添加到模板中，运行服务器并转到呈现包含模型的模板的URL。</p><p id="8552" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">您添加到admin中的Django模型对象应该看起来像是硬编码在模板中的引导电影卡。</p><figure class="mp mq mr ms gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/25a94a285ab6e3bd95a314feaa1f41eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*kUS1M89OkAxC0o2r.PNG"/></div></div></figure></div><div class="ab cl md me hx mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="im in io ip iq"><h1 id="0727" class="kb kc it bd kd ke mk kg kh ki ml kk kl km mm ko kp kq mn ks kt ku mo kw kx ky bi translated"><strong class="ak">添加更多模型对象</strong></h1><p id="101e" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">向Django管理添加尽可能多的电影。然后，当您在浏览器中重新加载HTML模板页面时，所有新的模型对象将以与第一个相同的格式出现。如果你想删除一个模型对象，进入管理页面，点击这个对象，在编辑页面的底部找到“删除”按钮。</p><figure class="mp mq mr ms gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/92f14a0f6a33cb35fd52566c29a695b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*1lEfF8hyR28bF-8n.PNG"/></div></div></figure></div><div class="ab cl md me hx mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="im in io ip iq"><h1 id="f022" class="kb kc it bd kd ke mk kg kh ki ml kk kl km mm ko kp kq mn ks kt ku mo kw kx ky bi translated"><strong class="ak"> Django模型字段列表</strong></h1><p id="2fa1" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">我们刚刚介绍了一些基本的Django模型字段，但是在<em class="nd"> models.py </em>中还有更多容易实现的字段。例如:</p><ul class=""><li id="4cc5" class="ni nj it lb b lc ly lg lz lk nk lo nl ls nm lw nn no np nq bi translated">使用<code class="fe nf ng nh mu b">models.DateField()</code>添加出版日期</li><li id="330d" class="ni nj it lb b lc nr lg ns lk nt lo nu ls nv lw nn no np nq bi translated">使用<code class="fe nf ng nh mu b">models.BooleanField()</code>添加一个复选框</li><li id="1bae" class="ni nj it lb b lc nr lg ns lk nt lo nu ls nv lw nn no np nq bi translated">使用<code class="fe nf ng nh mu b">models.SlugField()</code>或<code class="fe nf ng nh mu b">models.URLField()</code>添加一个URL链接</li><li id="39a7" class="ni nj it lb b lc nr lg ns lk nt lo nu ls nv lw nn no np nq bi translated">使用<code class="fe nf ng nh mu b">models.DecimalField()</code>添加带小数位的数字</li></ul><p id="acca" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">这些只是一些常用的字段，但是在<a class="ae lx" href="https://docs.djangoproject.com/en/3.0/ref/models/fields/" rel="noopener ugc nofollow" target="_blank">文档</a>中还解释了更多的模型字段。</p><p id="2486" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated"><strong class="lb iu">添加图像上传字段</strong></p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="9880" class="my kc it mu b gy mz na l nb nc">#<em class="nd">env &gt; mysite &gt; main &gt; models.py</em></span><span id="dac3" class="my kc it mu b gy ne na l nb nc">from django.db import models</span><span id="2509" class="my kc it mu b gy ne na l nb nc"># Create your models here.</span><span id="2aa6" class="my kc it mu b gy ne na l nb nc">class Movie(models.Model):<br/>	movie_title = models.CharField(max_length=150)<br/>	release_year = models.IntegerField()<br/>	director = models.CharField(max_length=100)<br/>	movie_poster = models.ImageField(upload_to='images/', null=True)<br/>	movie_plot = models.TextField()<br/>	</span><span id="1c6c" class="my kc it mu b gy ne na l nb nc">	def __str__(self):<br/>		return self.movie_title</span></pre><p id="0b5b" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">Django提供了一个将图像上传到模型的字段，它只需要对项目进行一点点配置。首先，在模型中添加一个名为<code class="fe nf ng nh mu b">ImageField</code>的新字段，指定上传到名为<code class="fe nf ng nh mu b">'images/'</code>的文件夹中。我们还将添加<code class="fe nf ng nh mu b">null=True</code>,这样就不需要这个文件了。</p><p id="2710" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated"><strong class="lb iu">配置settings.py </strong></p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="d5d1" class="my kc it mu b gy mz na l nb nc">#<em class="nd">env &gt; mysite &gt; mysite &gt; settings.py</em><br/>...</span><span id="5b40" class="my kc it mu b gy ne na l nb nc">MEDIA_URL = '/media/'</span><span id="5487" class="my kc it mu b gy ne na l nb nc">MEDIA_ROOT = os.path.join(BASE_DIR, 'media')</span></pre><p id="2d43" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">在<em class="nd"> settings.py </em>中，我们需要为上传到<code class="fe nf ng nh mu b">movie_poster</code>模型字段的图像指定一个媒体上传文件夹。media文件夹将保存用户在Django admin中上传的所有图像，而不是直接将图像添加到项目的静态图像文件夹中。</p><p id="9a42" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated"><strong class="lb iu">将媒体文件夹添加到URL中</strong></p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="4e13" class="my kc it mu b gy mz na l nb nc">#<em class="nd">env &gt; mysite &gt; mysite &gt; urls.py</em></span><span id="0a71" class="my kc it mu b gy ne na l nb nc">from django.contrib import admin<br/>from django.urls import path, include<br/>from django.conf import settings #add this<br/>from django.conf.urls.static import static #add this</span><span id="1c39" class="my kc it mu b gy ne na l nb nc">urlpatterns = [<br/>    path('admin/', admin.site.urls),<br/>    path('', include ('main.urls')),<br/>]</span><span id="6460" class="my kc it mu b gy ne na l nb nc">if settings.DEBUG: #add this<br/>    urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)</span></pre><p id="9a6d" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">现在在<em class="nd"> mysite &gt; urls.py </em>中添加上面的代码来创建上传到您的项目的媒体图像的URL路径。这种配置仅用于开发，因此使用if语句进行调试。在部署中，您将需要<a class="ae lx" href="https://www.ordinarycoders.com/blog/article/serve-django-static-and-media-files-in-production" rel="noopener ugc nofollow" target="_blank">为生产</a>配置您的静态和媒体文件。</p><p id="8a2d" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated"><strong class="lb iu">安装枕头</strong></p><p id="4716" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated"><em class="nd"> macOS终端</em></p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="9b63" class="my kc it mu b gy mz na l nb nc">(env)User-Macbook:mysite user$ pip install Pillow</span></pre><p id="8564" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated"><em class="nd"> Windows命令提示符</em></p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="5316" class="my kc it mu b gy mz na l nb nc">(env) C:\Users\Owner\Desktop\Code\env\mysite&gt;pip install Pillow</span></pre><p id="7905" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">为使媒体上传正确工作，<code class="fe nf ng nh mu b">install Pillow</code>在您激活的虚拟环境中。</p><p id="4de4" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated"><strong class="lb iu">再次进行迁移</strong></p><p id="511a" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated"><em class="nd"> macOS终端</em></p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="6038" class="my kc it mu b gy mz na l nb nc">(env)User-Macbook:mysite user$ python3 manage.py makemigrations<br/>Migrations for 'main':<br/>  main\migrations\0002_auto_20200601_1806.py<br/>    - Add field movie_poster to movie</span><span id="a678" class="my kc it mu b gy ne na l nb nc">(env)User-Macbook:mysite user$ python3 manage.py migrate</span></pre><p id="ead9" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated"><strong class="lb iu"> <em class="nd"> Windows命令提示符</em> </strong></p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="aafd" class="my kc it mu b gy mz na l nb nc">(env) C:\Users\Owner\Desktop\code\env\mysite&gt;py manage.py makemigrations<br/>Migrations for 'main':<br/>  main\migrations\0002_auto_20200601_1806.py<br/>    - Add field movie_poster to movie</span><span id="fcb3" class="my kc it mu b gy ne na l nb nc">(env) C:\Users\Owner\Desktop\code\env\mysite&gt;py manage.py migrate</span></pre><p id="1a3a" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">因为我们向模型中添加了一个新字段，所以我们需要再次运行迁移来将更新推送到数据库中。首先运行<code class="fe nf ng nh mu b">makemigrations</code>然后运行<code class="fe nf ng nh mu b">migrate</code>。迁移完成后，再次运行服务器。</p><p id="adcf" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated"><strong class="lb iu">上传图像到模型</strong></p><p id="4b22" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">重新登录到管理站点，点击一个现有的模型。您将看到一个带有“选择文件”按钮的新字段。点击按钮，将电影海报添加到模型对象中。确保点击“保存”,否则更新将不起作用。</p><figure class="mp mq mr ms gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/56aadf9a83165b4db185994afdb21e46.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*MInB9RBr23cqurQ4.PNG"/></div></div></figure><p id="f30c" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated"><strong class="lb iu">在模板</strong>中添加Django image字段</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="b773" class="my kc it mu b gy mz na l nb nc">#<em class="nd">env &gt; mysite &gt; main &gt; templates &gt; main &gt; movies.html</em></span><span id="b07e" class="my kc it mu b gy ne na l nb nc">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;<br/>  &lt;head&gt;<br/>    &lt;!-- Required meta tags --&gt;<br/>    &lt;meta charset="utf-8"&gt;<br/>    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;<br/>    &lt;title&gt;Movies&lt;/title&gt;<br/>    &lt;!--Bootstrap CSS--&gt;<br/>    &lt;link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous"&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/></span><span id="cc8d" class="my kc it mu b gy ne na l nb nc">    &lt;div class="container p-4"&gt;<br/>      &lt;div class="row"&gt;<br/>        {% for m in movies %}<br/>        &lt;div class="col-lg-4 col-md-6 col-sm-12 pb-4"&gt;<br/>          &lt;div class="card h-100 p-4"&gt;<br/>            &lt;img src="{{ m.movie_poster.url }}" class="card-img-top" alt="{{ m.movie_title}}"&gt;<br/>            &lt;h4&gt;{{m.movie_title}}&lt;/h4&gt;<br/>            &lt;p class="text-muted"&gt;{{m.release_year}} | {{m.director}}&lt;/p&gt;<br/>            &lt;p&gt;{{m.movie_plot}}&lt;/p&gt;<br/>          &lt;/div&gt;<br/>        &lt;/div&gt;<br/>        {% endfor %}<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;<br/></span><span id="26a4" class="my kc it mu b gy ne na l nb nc">    &lt;!-- Optional Javascript --&gt;<br/>    &lt;script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"&gt;&lt;/script&gt;<br/>    &lt;script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"&gt;&lt;/script&gt;<br/>    &lt;script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"&gt;&lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="e540" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">接下来，我们需要将图像字段添加到模板中。</p><p id="8e64" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">为此，您需要一个带有<code class="fe nf ng nh mu b">src="{{ m.movie_poster.url }}"</code>和<code class="fe nf ng nh mu b">alt="{{m.title}}"</code>的图像HTML元素。</p><p id="f4a5" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">class属性是一个自定义的引导类。保存文件。</p><p id="3e95" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated"><strong class="lb iu">在浏览器中查看图像</strong></p><p id="af44" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">当您再次刷新浏览器选项卡时，将显示您上传的图像。</p><figure class="mp mq mr ms gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/c5f7fc56b99c4fd0461d8ac410cbdf21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*s_U_2bn5qO_NbGKt.PNG"/></div></div></figure><p id="dbc9" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated"><strong class="lb iu">可选:调整图像大小</strong></p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="30da" class="my kc it mu b gy mz na l nb nc">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;<br/>  &lt;head&gt;<br/>    &lt;!-- Required meta tags --&gt;<br/>    &lt;meta charset="utf-8"&gt;<br/>    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;<br/>    &lt;title&gt;Movies&lt;/title&gt;<br/>    &lt;!--Bootstrap CSS--&gt;<br/>    &lt;link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous"&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/></span><span id="e459" class="my kc it mu b gy ne na l nb nc">    &lt;div class="container p-4"&gt;<br/>      &lt;div class="row"&gt;<br/>        {% for m in movies %}<br/>        &lt;div class="col-lg-4 col-md-6 col-sm-12 pb-4"&gt;<br/>          &lt;div class="card h-100 p-4"&gt;<br/>            &lt;img src="{{ m.movie_poster.url }}" class="card-img-top" alt="{{ m.movie_title}}" style="width: auto; height: 350px; object-fit: contain;"&gt;<br/>            &lt;br&gt;<br/>            &lt;h4&gt;{{m.movie_title}}&lt;/h4&gt;<br/>            &lt;p class="text-muted"&gt;{{m.release_year}} | {{m.director}}&lt;/p&gt;<br/>            &lt;p&gt;{{m.movie_plot}}&lt;/p&gt;<br/>          &lt;/div&gt;<br/>        &lt;/div&gt;<br/>        {% endfor %}<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;<br/></span><span id="1581" class="my kc it mu b gy ne na l nb nc">    &lt;!-- Optional Javascript --&gt;<br/>    &lt;script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"&gt;&lt;/script&gt;<br/>    &lt;script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"&gt;&lt;/script&gt;<br/>    &lt;script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"&gt;&lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="613e" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">如果您希望所有的卡片和图像以相同的高度显示，那么向图像元素添加以下样式属性:<code class="fe nf ng nh mu b">style="width: auto; height: 350px; object-fit: contain;"</code>。这些属性共同指定图像的高度，同时缩小图像以适合其父元素。</p><p id="c89d" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">当您重新加载页面时，图像将以相同的高度显示。</p><figure class="mp mq mr ms gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/f1a9ce8e1446459564d2c5734ed0b95f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*TB1sS1Ji9DeVh8-a.PNG"/></div></div></figure><p id="1203" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated"><em class="nd">原载于</em><a class="ae lx" href="https://www.ordinarycoders.com/blog/article/django-models" rel="noopener ugc nofollow" target="_blank"><em class="nd"/></a><em class="nd">。</em></p></div></div>    
</body>
</html>