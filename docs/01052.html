<html>
<head>
<title>How to transform input values using v-mask when building forms with Vue.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Vue.js构建表单时如何使用v-mask转换输入值</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-use-v-mask-when-building-forms-with-vue-js-62b774d4b927?source=collection_archive---------1-----------------------#2019-10-31">https://levelup.gitconnected.com/how-to-use-v-mask-when-building-forms-with-vue-js-62b774d4b927?source=collection_archive---------1-----------------------#2019-10-31</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/66ed13b77f53212ede4977e08bfbb786.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kJszkwJwzMKTAusT96BKyQ.jpeg"/></div></div></figure><p id="f582" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">任何成功形式的一个关键方面是清晰。如果用户发现表单易于使用和理解，他们更有可能填写并提交表单。在本文中，我们将讨论输入屏蔽。您将学习如何快速轻松地将掩码应用到表单输入中，并通过真实的例子(如电话号码)根据您的需要配置它们。</p><p id="2b6c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">输入掩码到底是什么？它们是显示输入数据的预定义结构。例如，如果您要屏蔽一个电话输入，您可能希望它显示为(123)234–5555，而不是简单的1232345555。你可以清楚地看到，第一个例子不仅更容易阅读，而且它还传达了该领域试图实现的目标。</p><p id="2cbd" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">输入掩码是一个很好的特性，可以将你的UX提升到另一个层次，而且由于有了像<code class="fe kz la lb lc b">v-mask</code>这样的开源库，它们非常容易实现。GitHub存储库页面可以在<a class="ae ld" href="https://github.com/probil/v-mask" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><h2 id="8f39" class="le lf it bd lg lh li dn lj lk ll dp lm km ln lo lp kq lq lr ls ku lt lu lv lw bi translated"><strong class="ak">如何安装v-mask库</strong></h2><p id="a251" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">让我们开始安装<code class="fe kz la lb lc b">v-mask</code>库。为了让我们的项目使用它，我们首先需要将它添加到我们的项目依赖项中。为此，请遵循以下步骤:</p><ol class=""><li id="5ca3" class="mc md it kd b ke kf ki kj km me kq mf ku mg ky mh mi mj mk bi translated">打开您的终端，输入以下命令将库添加到我们的依赖项中:</li></ol><pre class="ml mm mn mo gt mp lc mq mr aw ms bi"><span id="94cb" class="le lf it lc b gy mt mu l mv mw">npm install v-mask</span></pre><p id="3fd2" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">2.我们需要把它作为一个插件添加到Vue，所以去<code class="fe kz la lb lc b">main.js</code>，<code class="fe kz la lb lc b">import</code>让Vue知道我们想把它注册为我们所有应用的插件。在<code class="fe kz la lb lc b">import</code>应用程序行后添加以下代码:</p><pre class="ml mm mn mo gt mp lc mq mr aw ms bi"><span id="f3f5" class="le lf it lc b gy mt mu l mv mw">import VueMask from ‘v-mask’</span><span id="f298" class="le lf it lc b gy mx mu l mv mw">Vue.use(VueMask);</span></pre><p id="50b0" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在我们已经注册了我们的插件，我们可以访问一个新的指令:<code class="fe kz la lb lc b">v-mask</code>。我们可以将这个新指令直接添加到我们的<code class="fe kz la lb lc b">&lt;input&gt;</code>元素中，库将通过读取用户的输入在幕后处理屏蔽。它将根据掩码转换字段的显示。</p><p id="4966" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">让我们先在常规输入上尝试一下，然后我们将为项目的组件添加一些道具。</p><p id="2255" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">3.转到<code class="fe kz la lb lc b">App.vue</code>，创建一个新的<code class="fe kz la lb lc b">&lt;input&gt;</code>元素:</p><p id="22bc" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><code class="fe kz la lb lc b"><em class="my">&lt;input type="text" /&gt;</em></code></p><p id="b92c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果我们在这个字段中键入一个电话号码，我们将得到默认的输入行为。一切皆有可能。因此，让我们对其应用电话号码掩码。我们新的<code class="fe kz la lb lc b">v-mask</code>库有一个要求，即我们应用它的每个字段都需要是<code class="fe kz la lb lc b">v-modeled</code>，所以让我们先把它完成。</p><p id="698e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">4.在表单对象中添加一个新的电话道具到我们的<code class="fe kz la lb lc b">data()</code>中:</p><pre class="ml mm mn mo gt mp lc mq mr aw ms bi"><span id="79a6" class="le lf it lc b gy mt mu l mv mw">form: {<br/>  …<br/>  telephone: ‘’<br/>},</span></pre><p id="8a24" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">5.现在，回到我们新的<code class="fe kz la lb lc b">&lt;input&gt;</code>元素并应用<code class="fe kz la lb lc b">v-model</code>。我们现在还将添加<code class="fe kz la lb lc b">v-mask</code>指令，如下所示:</p><pre class="ml mm mn mo gt mp lc mq mr aw ms bi"><span id="d7c4" class="le lf it lc b gy mt mu l mv mw">&lt;input type=”text”<br/>  v-model=”form.telephone” v-mask=”’(###)###-####’”<br/>&gt;</span></pre><p id="02e7" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">返回浏览器，再次尝试输入。当你输入的时候，你会看到你实际上把它很好地格式化成了我们所期望的电话号码。</p><p id="838a" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在五个简单的步骤中，我们向表单字段之一添加了输入屏蔽。现在让我们更深入地了解一下v-mask指令的作用。</p><h2 id="97cd" class="le lf it bd lg lh li dn lj lk ll dp lm km ln lo lp kq lq lr ls ku lt lu lv lw bi translated"><strong class="ak">什么是指令？</strong></h2><p id="814c" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">当我们将<code class="fe kz la lb lc b">v-mask</code>库添加到我们的项目和<code class="fe kz la lb lc b">main.js</code>中的插件时，这个库为我们创建了一个新的指令<code class="fe kz la lb lc b">v-mask</code>。然而，到底什么是指令呢？我们知道它看起来像一个HTML属性，但是还有什么呢？</p><p id="2ca1" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">指令是带有<code class="fe kz la lb lc b">v-</code>前缀的特殊属性。指令属性值应该是一个JavaScript表达式(除了<code class="fe kz la lb lc b">v-for</code> […])。一个指令的工作是当它的表达式的值改变时，对DOM反应性地应用副作用。</p><p id="5fca" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">看起来我们有一个特殊的属性可以修改元素，我们在电话号码掩码中看到了这一点。这个指令实际上是如何工作的？</p><p id="28b2" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">从示例中我们知道我们正在传入一个字符串，您可以看到在组成<code class="fe kz la lb lc b">v-mask=””</code>属性的双引号内，我们正在设置一对新的单引号(<code class="fe kz la lb lc b">‘’</code>)。这意味着这个属性中的表达式是JavaScript，我们传递给它一个字符串值。</p><p id="f342" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">通过查看<code class="fe kz la lb lc b">v-mask</code>库文档，我们知道我们有一些特殊的占位符可以在我们的掩码中使用。这些项目的表格如下:</p><figure class="ml mm mn mo gt ju gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/8e2c7733c7894ad6b57bc26de57e685c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1214/format:webp/1*E8ZvlPG_WIMw1UQ0RMYWxA.png"/></div></figure><p id="9534" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">例如，一个将显示一天中的时间的掩码，您可以将其定义如下:</p><pre class="ml mm mn mo gt mp lc mq mr aw ms bi"><span id="874e" class="le lf it lc b gy mt mu l mv mw">v-mask="'##:##'"</span></pre><p id="2227" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这意味着该输入将接受从0到9的两个数字(<code class="fe kz la lb lc b">##</code>)，后面是一个<code class="fe kz la lb lc b">:</code>字符，再后面是另外两个数字(<code class="fe kz la lb lc b">##</code>)。</p><p id="8a81" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">任何与此模式不匹配的内容都将被输入忽略。</p><p id="df33" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><code class="fe kz la lb lc b">v-mask</code>是一个非常强大的库，它允许我们通过组合这些简单的规则来定制我们想要的输入显示方式。在这篇文章的最后一节，我们将看看如何修改自定义输入。这将允许我们充分利用输入掩码的功能。</p><h2 id="2331" class="le lf it bd lg lh li dn lj lk ll dp lm km ln lo lp kq lq lr ls ku lt lu lv lw bi translated"><strong class="ak">如何增强自定义输入</strong></h2><p id="313f" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">我们已经投入了大量的工作来创建我们令人敬畏的自定义输入，所以我们肯定希望继续使用它！</p><p id="25ba" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">按照以下步骤修改基本输入，并允许输入屏蔽:</p><ol class=""><li id="306f" class="mc md it kd b ke kf ki kj km me kq mf ku mg ky mh mi mj mk bi translated">返回到<code class="fe kz la lb lc b">App.vue,</code>并将<code class="fe kz la lb lc b">&lt;input&gt;</code>元件切换为<code class="fe kz la lb lc b">&lt;BaseInput&gt;</code>元件:</li></ol><pre class="ml mm mn mo gt mp lc mq mr aw ms bi"><span id="f5fa" class="le lf it lc b gy mt mu l mv mw">&lt;BaseInput label=”Telephone”<br/>  type=”text”<br/>  v-model=”form.telephone”<br/>/&gt;</span></pre><p id="d413" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在让我们进入<code class="fe kz la lb lc b">BaseInput.vue</code>，创建一个新道具；我们称它为<code class="fe kz la lb lc b">mask</code>，它默认为一个空字符串。重要的是，我们将它默认为一个空字符串，否则指令将试图匹配，如果它们没有声明的掩码，我们将无法在字段中键入内容！</p><p id="9387" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">2.将其添加到您的道具对象中:</p><pre class="ml mm mn mo gt mp lc mq mr aw ms bi"><span id="fda0" class="le lf it lc b gy mt mu l mv mw">…,<br/>mask: {<br/>  type: String, required: false<br/>}</span></pre><p id="9c43" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">3.现在，回到<code class="fe kz la lb lc b">App.vue</code>，更新我们的电话<code class="fe kz la lb lc b">BaseInput</code>以使用掩码属性:</p><pre class="ml mm mn mo gt mp lc mq mr aw ms bi"><span id="d782" class="le lf it lc b gy mt mu l mv mw">&lt;BaseInput label=”Telephone” type=”text”<br/>  v-model=”form.telephone”<br/>  :mask=”’(###)###-####’”<br/>/&gt;</span></pre><p id="5186" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">全部完成！返回到您的浏览器，并添加一些数字到字段，您应该有一个好看的电话口罩与您的自定义组件！</p></div><div class="ab cl na nb hx nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="im in io ip iq"><p id="fd2e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu">这是摘自Marina Mosti(</strong><a class="ae ld" href="https://twitter.com/marinamosti" rel="noopener ugc nofollow" target="_blank"><strong class="kd iu">@ Marina Mosti</strong></a><strong class="kd iu">)用Vue.js </strong>  <strong class="kd iu">写的</strong> <a class="ae ld" href="https://www.packtpub.com/business-other/building-forms-with-vue-js?utm_source=Insertwebsite&amp;utm_medium=referral&amp;utm_campaign=Outreach_ExplorerBPR" rel="noopener ugc nofollow" target="_blank"> <strong class="kd iu">建筑形式。)要访问形成贯穿全书的项目基础的代码，请单击</strong> </a><a class="ae ld" href="https://gitlab.com/marinamosti/vuetiful- forms-step-3" rel="noopener ugc nofollow" target="_blank"> <strong class="kd iu">此处</strong> </a> <strong class="kd iu">。</strong></p><p id="40b4" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">玛丽娜将于11月在多伦多的VueConf发表演讲。在这里了解更多<a class="ae ld" href="https://vuetoronto.com/" rel="noopener ugc nofollow" target="_blank"><strong class="kd iu"/></a>。</p></div></div>    
</body>
</html>