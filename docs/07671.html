<html>
<head>
<title>Understanding Micro-Frontends Webpack 5 Configurations Step by Step</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">逐步了解微前端Webpack 5配置</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/understanding-micro-frontends-webpack5-configurations-step-by-step-4dd2f7d81dcb?source=collection_archive---------2-----------------------#2021-03-04">https://levelup.gitconnected.com/understanding-micro-frontends-webpack5-configurations-step-by-step-4dd2f7d81dcb?source=collection_archive---------2-----------------------#2021-03-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/a28d05d2f28c4b3430888626d29e2f41.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*6js53mDPNElWcqe_NTDOIQ.gif"/></div></div></figure><p id="ef0f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在前两篇文章中，我演示了如何构建微前端并将它们部署到AWS。过程中，我只是让你复制webpack.config.js和webpack.prod.js的内容，没有做任何说明。在本文中，我将逐行解释Webpack是如何工作的。</p><p id="b578" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">以下是之前的两篇文章:</p><div class="kw kx gp gr ky kz"><a href="https://www.linkedin.com/pulse/micro-frontends-hands-on-example-using-react-webpack-rany/" rel="noopener  ugc nofollow" target="_blank"><div class="la ab fo"><div class="lb ab lc cl cj ld"><h2 class="bd ir gy z fp le fr fs lf fu fw ip bi translated">使用React、Webpack 5和模块联合逐步实现微前端</h2><div class="lg l"><h3 class="bd b gy z fp le fr fs lf fu fw dk translated">在这篇文章中，我将一步一步地创建两个微前端反应组件，并呈现一个按钮组件…</h3></div><div class="lh l"><p class="bd b dl z fp le fr fs lf fu fw dk translated">www.linkedin.com</p></div></div><div class="li l"><div class="lj l lk ll lm li ln jw kz"/></div></div></a></div><div class="kw kx gp gr ky kz"><a href="https://www.linkedin.com/pulse/deploying-micro-frontends-aws-step-using-gitlab-react-rany/" rel="noopener  ugc nofollow" target="_blank"><div class="la ab fo"><div class="lb ab lc cl cj ld"><h2 class="bd ir gy z fp le fr fs lf fu fw ip bi translated">使用React、Webpack 5和模块联合逐步将微前端部署到AWS</h2><div class="lg l"><h3 class="bd b gy z fp le fr fs lf fu fw dk translated">在我之前的文章(https://levelup.gitconnected。</h3></div><div class="lh l"><p class="bd b dl z fp le fr fs lf fu fw dk translated">www.linkedin.com</p></div></div><div class="li l"><div class="lo l lk ll lm li ln jw kz"/></div></div></a></div><p id="8dc5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">本文的完整视频解释，请访问</p><figure class="lp lq lr ls gt jr"><div class="bz fp l di"><div class="lt lu l"/></div></figure><p id="92a4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi">===============</p><p id="c397" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">本文是在<a class="ae lv" href="https://www.linkedin.com/pulse/micro-frontends-hands-on-example-using-react-webpack-rany." rel="noopener ugc nofollow" target="_blank">https://www . LinkedIn . com/pulse/micro-frontends-hands-on-example-using-react-web pack-rany对步骤5的解释。</a>如果你想继续下去，你必须完成步骤1-4。</p><p id="f60a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我在下面的Youtube视频中解释了这篇文章</p><h1 id="16f2" class="lw lx iq bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">步骤5.1:添加依赖关系</h1><p id="18ad" class="pw-post-body-paragraph jy jz iq ka b kb mu kd ke kf mv kh ki kj mw kl km kn mx kp kq kr my kt ku kv ij bi translated">在接下来的3个步骤中，您可以跟随下面的短片</p><figure class="lp lq lr ls gt jr"><div class="bz fp l di"><div class="lt lu l"/></div></figure><p id="fd47" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">添加webpack和webpack-cli</p><p id="96d6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在visual studio代码中，右击mfe1并打开一个终端</p><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/758edf3ccd15c52ee20228c2b6dca223.png" data-original-src="https://miro.medium.com/v2/resize:fit:696/0*GapFg5NyZ2RqBYy5"/></div></figure><p id="2ab5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">从mfe1目录内部运行以下命令</p><pre class="lp lq lr ls gt na nb nc nd aw ne bi"><span id="e1fa" class="nf lx iq nb b gy ng nh l ni nj">yarn add webpack webpack-cli html-webpack-plugin</span></pre><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/734979d74183bd55bb4e536d285679b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:864/0*CJFO9JL--qj-dEwK"/></div></figure><h1 id="7239" class="lw lx iq bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">步骤5.2:创建webpack.config.js</h1><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/e29c91098787e5ab858a52221fe58a84.png" data-original-src="https://miro.medium.com/v2/resize:fit:470/0*rW8D32ni0zTpHyln"/></div></figure><p id="3901" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，让我们试着构建一下，看看会发生什么。运行以下命令:</p><pre class="lp lq lr ls gt na nb nc nd aw ne bi"><span id="124a" class="nf lx iq nb b gy ng nh l ni nj">yarn webpack</span></pre><p id="a380" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你会得到很少的错误。让我们合二为一。</p><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nm"><img src="../Images/d345f50a39aba5d44f9fbf314042c2c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*mmPff3m-2SP7YDSO"/></div></div></figure><p id="a7db" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">第一个错误是询问模式。Webpack需要知道使用哪种模式来运行，以便能够相应地捆绑依赖项。让我们使用开发模式。在webpack.config.js中添加以下内容</p><pre class="lp lq lr ls gt na nb nc nd aw ne bi"><span id="9f51" class="nf lx iq nb b gy ng nh l ni nj">module.exports = {<br/>  mode: 'development',<br/>};</span></pre><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/9843383801db8335a067f71843417a62.png" data-original-src="https://miro.medium.com/v2/resize:fit:652/0*tPwJGxYIMmU37ORF"/></div></figure><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div class="gh gi no"><img src="../Images/01281c7a2f5ca2e10b022ff4fcaeddea.png" data-original-src="https://miro.medium.com/v2/resize:fit:588/0*htiOfEE9Y6IOjCpX"/></div></figure><p id="1650" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这将处理第一个错误，并告诉Webpack以开发模式构建。现在，再次构建并观察左侧的文件夹。您会注意到一个名为“dist”的目标文件夹将被创建。</p><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi np"><img src="../Images/d058a8d23fa7e2ef70a9c7dda3b11cdb.png" data-original-src="https://miro.medium.com/v2/resize:fit:860/0*m9knclTZl6sqTJRD"/></div></div></figure><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/6234196dd381ac13aecc6d5f3966a52d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1288/0*tWatfZVLfgndqzA4"/></div></figure><p id="2863" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这是将由Webpack的构建和捆绑流程生成的文件夹，也是我们将部署到S3存储区的文件夹。这里发生的事情是，Webpack将我们拥有的所有代码index.js、bootstrap.js、App.js …以及它们的依赖项打包在main.js中，如您所见。</p><p id="f6a5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在我们看不到模式错误，但是我们仍然对加载器错误做出反应。这些错误是因为Webpack需要加载器来理解React。如你所知，浏览器只理解CSS、HTML、ES5和JavaScript(目前)。JSX和ES6+需要一个编译器。我们用巴别塔来做这个。我将向您展示如何将这些加载器添加到配置中，但首先让我们创建一个本地服务器来查看我们的演示网站(这将是S3在最后配置为网站)</p><h1 id="105d" class="lw lx iq bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">步骤5.3 —本地服务器</h1><p id="e0ea" class="pw-post-body-paragraph jy jz iq ka b kb mu kd ke kf mv kh ki kj mw kl km kn mx kp kq kr my kt ku kv ij bi translated">要在某个端口(这里，我使用8001)上添加本地服务器，请在webpack.config.js中添加以下几行</p><pre class="lp lq lr ls gt na nb nc nd aw ne bi"><span id="b7a9" class="nf lx iq nb b gy ng nh l ni nj">devServer: {<br/>    port: 8001,<br/>    },</span></pre><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nr"><img src="../Images/bd6de824e0afbe01ac89d678d45f6630.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*p559BHhdzqKyVxPy"/></div></div></figure><p id="0cb8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，运行以下命令</p><pre class="lp lq lr ls gt na nb nc nd aw ne bi"><span id="f462" class="nf lx iq nb b gy ng nh l ni nj">yarn webpack serve</span></pre><p id="0612" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这将在端口8001上启动一个本地web服务器。然而，如果你导航到<a class="ae lv" href="https://localhost:8001," rel="noopener ugc nofollow" target="_blank"> http://localhost:8001，</a>你只会找到一个文件列表。这是因为我们还没有配置index.html。我们将在下一步中这样做。但是，尝试浏览main.js，您将能够看到其内容如下:</p><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ns"><img src="../Images/30a0936eac6cf8ebe3b178680d673c91.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6INIQwmmsEKHIjbP"/></div></div></figure><p id="97ca" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">到目前为止，Webpack按照我们在Webpack.config.js中的配置，在端口8001上创建了一个本地web服务器。但是，它仍然缺少浏览器的一个最小组件:index.html</p><h1 id="309c" class="lw lx iq bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">步骤5.4 — HTML Webpack插件</h1><p id="a1e0" class="pw-post-body-paragraph jy jz iq ka b kb mu kd ke kf mv kh ki kj mw kl km kn mx kp kq kr my kt ku kv ij bi translated">我们需要为webpack导入html-webpack-plugin来生成index.html，并将捆绑的js文件添加到其中。</p><pre class="lp lq lr ls gt na nb nc nd aw ne bi"><span id="e804" class="nf lx iq nb b gy ng nh l ni nj">const HtmlWebpackPlugin = require('html-webpack-plugin');</span></pre><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/9a88b4739d52ed1845098ab9aeb4446e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1206/0*DHpMbjQmK07swHUy"/></div></figure><p id="1ad6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后，我们将插件作为插件的插件数组添加到modile.exports对象，如下所示:</p><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/250fcfd038d7b6a7c332d75883f0c806.png" data-original-src="https://miro.medium.com/v2/resize:fit:934/0*MoTxR8YnXkv7s9YK"/></div></figure><p id="182b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">正如您在这里注意到的，我们需要包含一个模板index.html，Webpack将使用它来生成一个新的Index.html和生成的main.js</p><p id="30e9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，让我们使用yarn webpack再次构建，注意在dist文件夹下创建的index.html文件</p><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/e4cd42e909dc852f9e24e40007739dd0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1026/0*6EX62TrvvaCzJc_0"/></div></figure><p id="bb36" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们使用yarn serve再次启动服务器，并浏览到<a class="ae lv" href="http://HTTP://localhost:8001" rel="noopener ugc nofollow" target="_blank"> HTTP://localhost:8001 </a></p><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/86c71dd2bca6335b448889254fe677ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:990/0*ycBHyU6oUhAcnzmb"/></div></figure><p id="1e7b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">它完全是空的，对吗？不完全是，它只是不编译React。让我们通过右键单击页面并选择inspect来查看源文件</p><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/32c8dbd8e213b7c6ccb1d4f29c9161ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1140/0*8Uh6NbERLj5o7xaN"/></div></figure><p id="72ff" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">请注意，它是React的原始文件，但是添加了main.js</p><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/d961ebaf601f0e80689419541b07eadb.png" data-original-src="https://miro.medium.com/v2/resize:fit:886/0*U-3c9RaCOMqYh_55"/></div></figure><p id="c423" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们修改public/index.html来看一些变化。</p><ol class=""><li id="6928" class="nz oa iq ka b kb kc kf kg kj ob kn oc kr od kv oe of og oh bi translated">删除中的所有内容，仅添加<title>，如下所示:</title></li></ol><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/a3624e906b10a617537f23922659a0c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1268/0*hwOJBxrehodAwLIo"/></div></figure><p id="96a1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，当您浏览和检查时，您会注意到Webpack再次自动添加了main.js</p><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oj"><img src="../Images/769e4aaaddee72e9a42d908694694229.png" data-original-src="https://miro.medium.com/v2/resize:fit:870/0*VaNXTRTsif0fP29p"/></div></div></figure><p id="687a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们给index.html文件添加一些内容</p><p id="86c1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在的开头增加<h1>微前端1 <h1>如下</h1></h1></p><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/71455bc48df4a99fa3873245a076727c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1264/0*8O2fJjxLL5PCRwzQ"/></div></figure><p id="ebf7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">刷新页面时，最终页面将如下所示:</p><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/aab7f0f1494faee758ef13b971c3758a.png" data-original-src="https://miro.medium.com/v2/resize:fit:680/0*V11ZZB90X3iss8Sj"/></div></figure><p id="7fc3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，是时候启用React了:)</p><figure class="lp lq lr ls gt jr"><div class="bz fp l di"><div class="lt lu l"/></div></figure><figure class="lp lq lr ls gt jr"><div class="bz fp l di"><div class="lt lu l"/></div></figure><figure class="lp lq lr ls gt jr"><div class="bz fp l di"><div class="lt lu l"/></div></figure><figure class="lp lq lr ls gt jr"><div class="bz fp l di"><div class="lt lu l"/></div></figure><figure class="lp lq lr ls gt jr"><div class="bz fp l di"><div class="lt lu l"/></div></figure><h1 id="20f3" class="lw lx iq bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">5.5启用React</h1><p id="3dee" class="pw-post-body-paragraph jy jz iq ka b kb mu kd ke kf mv kh ki kj mw kl km kn mx kp kq kr my kt ku kv ij bi translated">要启用React，您需要webpack.config.js中的模块规则</p><p id="4d07" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">首先，您要求babel编译所有带有js和jsx扩展名的文件</p><pre class="lp lq lr ls gt na nb nc nd aw ne bi"><span id="ed39" class="nf lx iq nb b gy ng nh l ni nj">test: /\.js?$/,</span></pre><p id="29f7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后添加将翻译成ES5的巴别塔加载器</p><pre class="lp lq lr ls gt na nb nc nd aw ne bi"><span id="0475" class="nf lx iq nb b gy ng nh l ni nj">// To Use babel Loader<br/>        loader:<br/>          'babel-loader',<br/>        options: {<br/>          presets: [<br/>            '@babel/preset-env' /* to transfer any advansed ES to ES5 */,<br/>            '@babel/preset-react',<br/>          ], // to compile react to ES5<br/>        },</span></pre><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div class="gh gi om"><img src="../Images/e8edd3758193e3505bff9b094837ff51.png" data-original-src="https://miro.medium.com/v2/resize:fit:694/0*LGo71ZHrn8V1NRSJ"/></div></figure><p id="2bcf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">第一个选项preset-env转换为ES5，第二个选项preset-react转换为react</p><p id="602f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这是最后一个文件</p><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div class="gh gi on"><img src="../Images/2129aa50e5cf4c0e6f3164a59e4ff59c.png" data-original-src="https://miro.medium.com/v2/resize:fit:932/0*Mua21bsZVoO1xrL0"/></div></figure><pre class="lp lq lr ls gt na nb nc nd aw ne bi"><span id="d2a6" class="nf lx iq nb b gy ng nh l ni nj">const HtmlWebpackPlugin = require('html-webpack-plugin');<br/>module.exports = {<br/>  mode: 'development',<br/>  // Adding Server<br/>  devServer: {<br/>    port: 8001,<br/>  },<br/>  plugins: [<br/>    new HtmlWebpackPlugin({<br/>      template:<br/>        './public/index.html',<br/>    }),<br/>  ],<br/>  module: {<br/>    rules: [<br/>      {<br/>        test: /\.js?$/,<br/>        loader:<br/>          'babel-loader',<br/>        options: {<br/>          presets: [<br/>            '@babel/preset-env',<br/>            '@babel/preset-react',<br/>          ], <br/>        },<br/>      },<br/>    ],<br/>  },<br/>};</span></pre><p id="9774" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您需要重新启动yarn webpack服务器并刷新页面</p><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oo"><img src="../Images/3ecba2d7c990b5da832de737877c837f.png" data-original-src="https://miro.medium.com/v2/resize:fit:790/0*pgkxOg0x--A1-4h8"/></div></div></figure><p id="04d8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这就是为React配置Webpack的方式。在下一篇文章中，我将解释模块联合插件</p><h1 id="43f6" class="lw lx iq bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">5.6 —添加模块联合插件</h1><p id="9566" class="pw-post-body-paragraph jy jz iq ka b kb mu kd ke kf mv kh ki kj mw kl km kn mx kp kq kr my kt ku kv ij bi translated">在mfe1 webpack.config.js中，添加ModuleFederationPlugin，如下所示</p><p id="8a97" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">1-导入它</p><pre class="lp lq lr ls gt na nb nc nd aw ne bi"><span id="b6c2" class="nf lx iq nb b gy ng nh l ni nj">const ModuleFederationPlugin = require('webpack/lib/container/ModuleFederationPlugin');</span></pre><p id="f150" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">2-将其添加到插件列表</p><pre class="lp lq lr ls gt na nb nc nd aw ne bi"><span id="76e7" class="nf lx iq nb b gy ng nh l ni nj">new ModuleFederationPlugin({</span></pre><p id="9a0c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">3-为微前端、远程文件名和暴露的组件添加名称</p><p id="6e97" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在ModuleFedertionPlugin对象内部，我们将定义微前端的名称。远程/主机/容器微前端将使用该名称来呈现来自mfe1的暴露组件。此外，我们定义了Webpack将在其中捆绑公开组件的远程js文件名(remoteEntry.js)。</p><pre class="lp lq lr ls gt na nb nc nd aw ne bi"><span id="cb9d" class="nf lx iq nb b gy ng nh l ni nj">new ModuleFederationPlugin(<br/>      {<br/>        name: 'MFE1',<br/>        filename:<br/>          'remoteEntry.js',<br/>      }</span></pre><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi op"><img src="../Images/98e857f6be2065b7d4222193a361ef86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Q4eZ8LPTvUjn25Xg"/></div></div></figure><p id="c8bd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">4-公开按钮组件，如下所示:</p><p id="b0fc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们需要在exposes object中添加所有想要向其他微前端公开的组件。这将用于在其他微前端中导入组件(参考上一篇文章中的示例<a class="ae lv" rel="noopener ugc nofollow" target="_blank" href="/micro-frontends-step-by-step-using-react-webpack-5-and-module-federation-e4b9d840ec71)">https://level up . git connected . com/Micro-Frontends-step-by-step-using-react-web pack-5-and-module-Federation-e4b 9d 840 EC 71)</a></p><p id="64c5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">钥匙(’。/Button ')将用于导入</p><p id="f6fc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">值('。/src/Button.js)告诉它从哪里获取组件的代码</p><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oq"><img src="../Images/e374a2637915ab45cfb5e208d9007847.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*lA8k3Tk6aZz0zNKD"/></div></div></figure><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi or"><img src="../Images/c8af62cb0c5a8aa29cc25248e7adeaa9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*QSm6bjs6EekEvPO7"/></div></div></figure><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi os"><img src="../Images/2f5df2da6cded196ff42eb8401604b0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*19IgjnhGVidBgamx"/></div></div></figure><p id="9393" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们使用yarn webpack重新构建项目，并观察dist文件夹。您将看到一个名为“remoteEntry.js”的新文件。这是您将需要部署到S3网站bucket以供微前端使用的内容(参见下面文章中的示例<a class="ae lv" href="https://www.linkedin.com/pulse/deploying-micro-frontends-aws-step-using-gitlab-react-rany" rel="noopener ugc nofollow" target="_blank">https://www . LinkedIn . com/pulse/deploying-Micro-Frontends-AWS-step-using-git lab-react-rany</a>)</p><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div class="gh gi on"><img src="../Images/5a031e61221d2da2f537736882d2ad37.png" data-original-src="https://miro.medium.com/v2/resize:fit:932/0*3HJGa5WgDBWne286"/></div></figure><p id="fbdd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在运行webpack服务器，并让它为容器配置运行</p><pre class="lp lq lr ls gt na nb nc nd aw ne bi"><span id="1ea7" class="nf lx iq nb b gy ng nh l ni nj">yarn webpack serve</span></pre><h1 id="68cf" class="lw lx iq bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">6.1 —配置容器/主机</h1><p id="974f" class="pw-post-body-paragraph jy jz iq ka b kb mu kd ke kf mv kh ki kj mw kl km kn mx kp kq kr my kt ku kv ij bi translated">现在我们需要配置包含mfe1公开组件的容器。容器上的webpack配置文件将类似于我们为mfe1创建的文件，除了模块联合配置和服务器端口。我们将为它取一个不同的名称，而不是公开一个组件，我们将从mfe1导入一个远程组件。</p><p id="2671" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">1 —让我们将webpack.config.js从mfe1复制到容器中。</p><p id="a248" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">2 —将端口更改为8000</p><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/e99e73c93882d8b3f2ae54e20bc241ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1396/0*Q6UB_OtVyj8DL7Xv"/></div></figure><p id="fce4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">3 —将module dependence中的名称更改为Container(此处不会使用)</p><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/5cfc5c7227920dc7e68708733fc6dccb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1308/0*zirV1KsiWrfW9tix"/></div></figure><p id="8446" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">4-删除“exposes”对象并替换为remotes</p><p id="3bde" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在远程中，我们将把我们给定的名称放在mfe 1 module deference中</p><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ov"><img src="../Images/9ff027e4dee70daecc80d8ecffdc9ac3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*fkUFNhcQiXo5sekA"/></div></div></figure><p id="5138" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这里我们只是说MFE1暴露的组件可以通过<a class="ae lv" href="http://localhost:8001/remoteEntry.js" rel="noopener ugc nofollow" target="_blank">http://localhost:8001/remote entry . js</a>在容器中远程可用</p><p id="02a6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，您可以像我们在<a class="ae lv" href="https://www.linkedin.com/pulse/micro-frontends-hands-on-example-using-react-webpack-rany" rel="noopener ugc nofollow" target="_blank">https://www . LinkedIn . com/pulse/micro-frontends-hands-on-example-using-react-web pack-rany</a>中所做的那样，在容器中导入这个组件</p><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ow"><img src="../Images/845b6f829d6bee3a647b5c7b0aa42f0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*hqG4dpRkSywvge4U"/></div></div></figure><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ox"><img src="../Images/d95133b07cb0ce1bd8a74a79d3e2c097.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hvS5eYjTeXuVJGHAl99LyQ.png"/></div></div></figure><p id="4eaf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">作者:</p><div class="kw kx gp gr ky kz"><a href="https://www.linkedin.com/in/ranyelhousieny/" rel="noopener  ugc nofollow" target="_blank"><div class="la ab fo"><div class="lb ab lc cl cj ld"><h2 class="bd ir gy z fp le fr fs lf fu fw ip bi translated">兰尼·埃尔豪斯尼，PhDᴬᴮᴰ -软件工程高级经理- Zulily | LinkedIn</h2><div class="lg l"><h3 class="bd b gy z fp le fr fs lf fu fw dk translated">𝙈𝙞𝙘𝙧𝙤𝙨𝙚𝙧𝙫𝙞𝙘𝙚𝙨解决方案架构师𝘼𝙒𝙎𝙎𝙤𝙡𝙪𝙩𝙞𝙤𝙣𝙨𝘼𝙧𝙘𝙝𝙞𝙩𝙚𝙘𝙩𝘾𝙚𝙧𝙩𝙞𝙛𝙞𝙚𝙙…</h3></div><div class="lh l"><p class="bd b dl z fp le fr fs lf fu fw dk translated">www.linkedin.com</p></div></div><div class="li l"><div class="oy l lk ll lm li ln jw kz"/></div></div></a></div><h1 id="734b" class="lw lx iq bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">参考资料:</h1><div class="kw kx gp gr ky kz"><a href="https://www.linkedin.com/pulse/understanding-micro-frontends-webpack5-configurations-rany/" rel="noopener  ugc nofollow" target="_blank"><div class="la ab fo"><div class="lb ab lc cl cj ld"><h2 class="bd ir gy z fp le fr fs lf fu fw ip bi translated">逐步了解微前端Webpack5配置</h2><div class="lg l"><h3 class="bd b gy z fp le fr fs lf fu fw dk translated">在前两篇文章中，我演示了如何构建微前端并将它们部署到AWS。在这个过程中，我…</h3></div><div class="lh l"><p class="bd b dl z fp le fr fs lf fu fw dk translated">www.linkedin.com</p></div></div><div class="li l"><div class="oz l lk ll lm li ln jw kz"/></div></div></a></div><div class="kw kx gp gr ky kz"><a href="https://www.linkedin.com/pulse/understanding-micro-frontends-webpack5-module-step-rany" rel="noopener  ugc nofollow" target="_blank"><div class="la ab fo"><div class="lb ab lc cl cj ld"><h2 class="bd ir gy z fp le fr fs lf fu fw ip bi translated">逐步了解微前端Webpack5模块联合配置</h2><div class="lg l"><h3 class="bd b gy z fp le fr fs lf fu fw dk translated">上一篇文章，https://www.linkedin。</h3></div><div class="lh l"><p class="bd b dl z fp le fr fs lf fu fw dk translated">www.linkedin.com</p></div></div><div class="li l"><div class="pa l lk ll lm li ln jw kz"/></div></div></a></div></div></div>    
</body>
</html>