<html>
<head>
<title>Simple Source Code Analysis of the classnames Package with 15k Stars</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">15k星类名包的简单源代码分析</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/simple-source-code-analysis-of-classnames-with-15k-stars-1c3276fe9528?source=collection_archive---------20-----------------------#2022-06-14">https://levelup.gitconnected.com/simple-source-code-analysis-of-classnames-with-15k-stars-1c3276fe9528?source=collection_archive---------20-----------------------#2022-06-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1a53" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">附带TypeScript实现</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/0fa505597e79efac947385b14fc5406e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ayQ3pvcnC-ZPf93L"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@year1?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">一年级</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="1e82" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您正在开发web应用程序，您可能听说过<a class="ae ky" href="https://github.com/JedWatson/classnames" rel="noopener ugc nofollow" target="_blank"> classnames </a> npm包。它与React等一些前端框架一起工作，允许您非常容易地编写CSS类。本文将探讨它是如何工作的。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="1857" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">学习一个npm包的时候，我的习惯是先用。只有知道如何使用，才能更好地理解它。它的使用教程可以在<a class="ae ky" href="https://github.com/JedWatson/classnames#readme" rel="noopener ugc nofollow" target="_blank"> README.md </a>中查看，以下是从中摘录的一些例子。</p><pre class="kj kk kl km gt mc md me mf aw mg bi"><span id="96df" class="mh mi it md b gy mj mk l ml mm">classNames('foo', 'bar'); // =&gt; 'foo bar'<br/>classNames('foo', { bar: true }); // =&gt; 'foo bar'<br/>classNames({ 'foo-bar': true }); // =&gt; 'foo-bar'<br/>classNames({ 'foo-bar': false }); // =&gt; ''<br/>classNames({ foo: true }, { bar: true }); // =&gt; 'foo bar'<br/>classNames({ foo: true, bar: true }); // =&gt; 'foo bar'</span><span id="5656" class="mh mi it md b gy mn mk l ml mm">// lots of arguments of various types<br/>classNames('foo', { bar: true, duck: false }, 'baz', { quux: true }); // =&gt; 'foo bar baz quux'</span><span id="af60" class="mh mi it md b gy mn mk l ml mm">// other falsy values are just ignored<br/>classNames(null, false, 'bar', undefined, 0, 1, { baz: null }, ''); // =&gt; 'bar 1'</span></pre><p id="0ca3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">可以看到它的API非常好用。接下来，让我们看看引擎盖下。</p><p id="f14b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，我们需要看一下它的<a class="ae ky" href="https://github.com/JedWatson/classnames/blob/master/package.json" rel="noopener ugc nofollow" target="_blank"> package.json </a>，它描述了关于npm包的一些信息。为了理解它是如何工作的，最重要的字段是<code class="fe mo mp mq md b">"main": "index.js",</code>和<code class="fe mo mp mq md b">"types": "./index.d.ts"</code>。</p><p id="743b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">main字段表示npm包的条目文件，types字段表示TypeScript运行时下的类型定义。除此之外，它还提供了另一个<code class="fe mo mp mq md b"><a class="ae ky" href="https://github.com/JedWatson/classnames/blob/master/dedupe.js" rel="noopener ugc nofollow" target="_blank">dedupe</a></code>版本和<code class="fe mo mp mq md b"><a class="ae ky" href="https://github.com/JedWatson/classnames/blob/master/bind.js" rel="noopener ugc nofollow" target="_blank">bind</a></code>版本(用于CSS模块)</p><p id="7ef9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们来关注一下<code class="fe mo mp mq md b"><a class="ae ky" href="https://github.com/JedWatson/classnames/blob/master/index.js" rel="noopener ugc nofollow" target="_blank">index.js</a></code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="aabe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">是官方分叉版，我加了一些评论。可以看出它的逻辑是比较简单的，它的一些判断在今天已经考虑得很好了。</p><p id="fb3f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是我按照它的<a class="ae ky" href="https://github.com/JedWatson/classnames/blob/master/index.d.ts" rel="noopener ugc nofollow" target="_blank">类型定义</a>制作的类型脚本版本:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="9485" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我使用了ES6语法，它也通过了类名内置测试用例。希望这对你有帮助。如有疑问欢迎评论。</p><h1 id="e80a" class="mt mi it bd mu mv mw mx my mz na nb nc jz nd ka ne kc nf kd ng kf nh kg ni nj bi translated">参考</h1><p id="5a6a" class="pw-post-body-paragraph kz la it lb b lc nk ju le lf nl jx lh li nm lk ll lm nn lo lp lq no ls lt lu im bi translated">[1]<a class="ae ky" href="https://github.com/JedWatson/classnames" rel="noopener ugc nofollow" target="_blank">https://github.com/JedWatson/classnames</a></p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="2938" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="np">感谢阅读。如果你喜欢这样的故事，想支持我，请考虑成为</em> <a class="ae ky" href="https://medium.com/@islizeqiang/membership" rel="noopener"> <em class="np">中等会员</em> </a> <em class="np">。每月5美元，你可以无限制地访问媒体内容。如果你通过</em> <a class="ae ky" href="https://medium.com/@islizeqiang/membership" rel="noopener"> <em class="np">我的链接</em> </a> <em class="np">报名，我会得到一点佣金。</em></p><p id="2194" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你的支持对我来说非常重要——谢谢。</p></div></div>    
</body>
</html>