<html>
<head>
<title>Create a FAB Button with Swift</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Swift创建FAB按钮</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/swift-it-yourself-create-a-fab-button-with-swift-eac0049312f2?source=collection_archive---------3-----------------------#2020-04-18">https://levelup.gitconnected.com/swift-it-yourself-create-a-fab-button-with-swift-eac0049312f2?source=collection_archive---------3-----------------------#2020-04-18</a></blockquote><div><div class="fc if ig ih ii ij"/><div class="ik il im in io"><div class=""/><figure class="gm go jp jq jr js gi gj paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="gi gj jo"><img src="../Images/fa681e4752a71b9f6864c5017d45f0bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZZtI85z7QhSv-8WKq-eDzA.jpeg"/></div></div><figcaption class="jz ka gk gi gj kb kc bd b be z dk translated">Marcus Dall Col 在<a class="ae kd" href="https://unsplash.com/s/photos/float-flower?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><figure class="kf kg kh ki gu js gi gj paragraph-image"><a href="https://raulferrer.dev"><div class="gi gj ke"><img src="../Images/4559de80fb63bfa9a7c3d7a9ceaa962f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JG2ALPF7dH51wuAxTnReEQ.png"/></div></a></figure><p id="0608" class="pw-post-body-paragraph kj kk ir kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ik bi translated">你肯定见过一些应用程序，其中有一个按钮，当按下时，显示一个带有其他按钮的菜单(我们可以称之为<em class="lh">次级</em>)。主按钮通常称为<strong class="kl is"> FAB </strong>或<strong class="kl is">浮动动作按钮</strong>。在本文中，我们将看到如何用Swift创建一个FAB按钮，当它被按下时，显示(带有动画)一个菜单。</p></div><div class="ab cl li lj hv lk" role="separator"><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln"/></div><div class="ik il im in io"><p id="6d94" class="pw-post-body-paragraph kj kk ir kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ik bi translated">此外，我们将把这个按钮开发成一个Swift包，这样我们就可以共享它，并把它作为一个依赖项包含在不同的应用程序中。我们将通过<em class="lh"> Swift包管理器</em>来完成这项工作，正如我们在<a class="ae kd" href="https://www.raulferrergarcia.com/en/how-to-use-swift-package-manager/" rel="noopener ugc nofollow" target="_blank">上一篇文章</a>中看到的，它是苹果的依赖管理器。</p><blockquote class="lp lq lr"><p id="8b99" class="kj kk lh kl b km kn ko kp kq kr ks kt ls kv kw kx lt kz la lb lu ld le lf lg ik bi translated"><em class="ir">这篇文章的代码可以在</em><a class="ae kd" href="https://github.com/raulferrerdev/FABButton" rel="noopener ugc nofollow" target="_blank"><em class="ir">GitHub</em></a><em class="ir">上找到。请记住，与这里描述的相比，存储库代码可能会有一些修改，因为可以添加新功能，可以改进其他功能，可以纠正小错误。</em></p></blockquote><h1 id="dd64" class="lv lw ir bd lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms bi translated">快速创建包</h1><p id="3fa1" class="pw-post-body-paragraph kj kk ir kl b km mt ko kp kq mu ks kt ku mv kw kx ky mw la lb lc mx le lf lg ik bi translated">首先，我们创建Swift包。为此，从Xcode菜单中，我们沿着<em class="lh"> New &gt; Swift Package </em>路径，并将其命名为<em class="lh"> FABButton </em>(记住要激活版本控制，<em class="lh">在我的Mac上创建Git存储库，以便稍后能够将其上传到网络上的存储库)。</em></p><figure class="kf kg kh ki gu js gi gj paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="gi gj my"><img src="../Images/2d36ec7e66b122af2b2fe3ee34300a90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*21tNA64zu6JG3ENM.png"/></div></div><figcaption class="jz ka gk gi gj kb kc bd b be z dk translated">创建Swift包。</figcaption></figure><p id="6e32" class="pw-post-body-paragraph kj kk ir kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ik bi translated">我们将这个项目定义为在iOS10+平台上使用。我们将在Package.swift文件中指出这一点(如前一篇文章中所解释的):</p><figure class="kf kg kh ki gu js"><div class="bz fq l di"><div class="mz na l"/></div></figure><h1 id="070b" class="lv lw ir bd lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms bi translated">组件设计</h1><p id="7ba5" class="pw-post-body-paragraph kj kk ir kl b km mt ko kp kq mu ks kt ku mv kw kx ky mw la lb lc mx le lf lg ik bi translated">组件设计如下:</p><figure class="kf kg kh ki gu js gi gj paragraph-image"><div class="gi gj nb"><img src="../Images/745f0d3955cd9efb0aa2fdd674e5c9dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:802/format:webp/0*-P3YPBam-9jPRVLS.png"/></div></figure><p id="2283" class="pw-post-body-paragraph kj kk ir kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ik bi translated">主视图由一个<em class="lh"> UIStackView </em>组件和另一个<em class="lh"> UIStackView </em>组件组成，前者将包含主按钮(<em class="lh"> UIButton </em>组件)，后者将包含次级按钮，每个次级按钮都将被标记(带有一个<em class="lh"> UILabel </em>组件)。使用<em class="lh"> UIStackView </em>组件的事实是由于它能够分发它所包含的元素并适应它的内容。</p><h1 id="dd3f" class="lv lw ir bd lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms bi translated">主视图开发</h1><p id="7c75" class="pw-post-body-paragraph kj kk ir kl b km mt ko kp kq mu ks kt ku mv kw kx ky mw la lb lc mx le lf lg ik bi translated">主视图在<em class="lh"> Sources/FABButton </em>目录下创建，名为<em class="lh"> FABView </em>。最初，在这个视图中，我们将定义并放置组成它的组件:主按钮和包含辅助按钮的<em class="lh"> UIStackView </em>组件。</p><figure class="kf kg kh ki gu js"><div class="bz fq l di"><div class="mz na l"/></div></figure><p id="6208" class="pw-post-body-paragraph kj kk ir kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ik bi translated">在这段代码中，我们完成了以下工作:</p><ul class=""><li id="21e4" class="nc nd ir kl b km kn kq kr ku ne ky nf lc ng lg nh ni nj nk bi translated">首先我们实例化一个<em class="lh"> UIButton </em>组件和一个<em class="lh"> UIStackView </em>组件。</li><li id="e432" class="nc nd ir kl b km nl kq nm ku nn ky no lc np lg nh ni nj nk bi translated">然后我们建立一个自定义初始化器来指示主按钮的图像:</li></ul><figure class="kf kg kh ki gu js"><div class="bz fq l di"><div class="mz na l"/></div></figure><p id="2a51" class="pw-post-body-paragraph kj kk ir kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ik bi translated">与<em class="lh"> FABStackView </em>类一样，我们也将这个初始化器声明为public，以便在我们将其作为依赖项导入时能够访问它。在初始化器中，我们建立按钮的图像并关联它的目标(<em class="lh"> mainButtonAction </em>)。然后我们调用<em class="lh"> configure() </em>方法，该方法将配置不同的组件并将它们放置在视图中:</p><figure class="kf kg kh ki gu js"><div class="bz fq l di"><div class="mz na l"/></div></figure><p id="a472" class="pw-post-body-paragraph kj kk ir kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ik bi translated">在UIStackView组件的配置中，我们已经指出它包含的元素(二级按钮)是垂直排列的，向右对齐(<em class="lh">尾随</em>)，填充所有空间(当您添加按钮时，<em class="lh"> UIStackView </em>组件将增长)并且有16的间距。</p><h1 id="628c" class="lv lw ir bd lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms bi translated">主按钮配置</h1><p id="b16a" class="pw-post-body-paragraph kj kk ir kl b km mt ko kp kq mu ks kt ku mv kw kx ky mw la lb lc mx le lf lg ik bi translated">我们创建的主按钮，<em class="lh"> mainButton </em>，是一个简单的方形按钮，里面有一个图像。为了使它看起来像一个FAB按钮，我们必须使它圆和阴影。</p><p id="956a" class="pw-post-body-paragraph kj kk ir kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ik bi translated">为此，我们要做的是创建一个<em class="lh"> UIButton </em>的子类，它具有我们想要赋予按钮的特性。我们所做的是:</p><ul class=""><li id="68e4" class="nc nd ir kl b km kn kq kr ku ne ky nf lc ng lg nh ni nj nk bi translated">从Xcode菜单中，我们创建一个新文件(<em class="lh">文件&gt;新&gt;文件……</em>)并选择<em class="lh">可可触摸类</em>。</li></ul><figure class="kf kg kh ki gu js gi gj paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="gi gj nq"><img src="../Images/45261d518673d5f247dfc256ce1a886d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*pnitOpjh9ZDVyLgy.png"/></div></div></figure><ul class=""><li id="17cf" class="nc nd ir kl b km kn kq kr ku ne ky nf lc ng lg nh ni nj nk bi translated">当新文件的选项窗口出现时(<em class="lh">为新文件选择选项:</em>)，我们指出<em class="lh"> FABMainButton </em>文件的名称，它将是<em class="lh"> UIButton </em>的子类:</li></ul><figure class="kf kg kh ki gu js gi gj paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="gi gj nr"><img src="../Images/e1b375500fdf568a584d7ba7555fa83d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*bpKeHGL3sMaNfHQE.png"/></div></div></figure><ul class=""><li id="75c2" class="nc nd ir kl b km kn kq kr ku ne ky nf lc ng lg nh ni nj nk bi translated">默认情况下，出现在该类中的代码是:</li></ul><figure class="kf kg kh ki gu js"><div class="bz fq l di"><div class="mz na l"/></div></figure><ul class=""><li id="dae3" class="nc nd ir kl b km kn kq kr ku ne ky nf lc ng lg nh ni nj nk bi translated">首先我们将添加初始化器:</li></ul><figure class="kf kg kh ki gu js"><div class="bz fq l di"><div class="mz na l"/></div></figure><p id="9b8e" class="pw-post-body-paragraph kj kk ir kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ik bi translated">在<em class="lh"> init </em>方法的末尾，调用<em class="lh"> configure() </em>方法，这将是我们定制按钮的地方。</p><p id="61f3" class="pw-post-body-paragraph kj kk ir kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ik bi translated"><a class="ae kd" href="https://gist.github.com/raulferrerdev/b2b59a52fd83f92616aefe4b13f2c7d9.js" rel="noopener ugc nofollow" target="_blank">https://gist . github . com/raulferrerdev/B2B 59 a 52 FD 83 f 92616 aefe 4 b 13 F2 c 7d 9 . js</a></p><ul class=""><li id="c173" class="nc nd ir kl b km kn kq kr ku ne ky nf lc ng lg nh ni nj nk bi translated">正如你所看到的，我们所做的是给按钮背景一个白色，通过指示圆角半径为25(按钮大小的一半，即50)使其变圆，并且，当我们使用<em class="lh">自动布局</em>时，我们指示<em class="lh">translatesAutoresizingMaskIntoConstraints = false</em>。</li><li id="bc3c" class="nc nd ir kl b km nl kq nm ku nn ky no lc np lg nh ni nj nk bi translated">在此方法的结尾，将创建按钮阴影的方法被调用:</li></ul><figure class="kf kg kh ki gu js"><div class="bz fq l di"><div class="mz na l"/></div></figure><p id="ee13" class="pw-post-body-paragraph kj kk ir kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ik bi translated">一旦<em class="lh"> UIButton </em>的这个子类被创建，我们转到<em class="lh"> FABView </em>类并改变我们安装主按钮的方式，从:</p><figure class="kf kg kh ki gu js"><div class="bz fq l di"><div class="mz na l"/></div></figure><p id="40ad" class="pw-post-body-paragraph kj kk ir kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ik bi translated">收件人:</p><figure class="kf kg kh ki gu js"><div class="bz fq l di"><div class="mz na l"/></div></figure><h1 id="d19c" class="lv lw ir bd lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms bi translated">创建辅助按钮</h1><p id="e45e" class="pw-post-body-paragraph kj kk ir kl b km mt ko kp kq mu ks kt ku mv kw kx ky mw la lb lc mx le lf lg ik bi translated">菜单组件由一个按钮(带有个性化图像)和一个带有按钮标识符的标签组成。为了创建这些组件，我们将使用一个<em class="lh"> UIView </em>子类来定义按钮和标签。</p><ul class=""><li id="a241" class="nc nd ir kl b km kn kq kr ku ne ky nf lc ng lg nh ni nj nk bi translated">从<em class="lh"> Xcode </em>菜单中，我们创建一个新文件(<em class="lh"> File &gt; New &gt; File… </em>)并选择<em class="lh"> Cocoa Touch Class </em>(正如我们对<em class="lh"> FABMainButton </em>组件所做的那样)。</li><li id="c434" class="nc nd ir kl b km nl kq nm ku nn ky no lc np lg nh ni nj nk bi translated">当新文件的选项窗口出现时(<em class="lh">选择新文件的选项:</em>)，我们指定文件的名称<em class="lh">fabssecondarybutton</em>，它将是<em class="lh"> UIView </em>的子类:</li></ul><figure class="kf kg kh ki gu js gi gj paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="gi gj ns"><img src="../Images/10b7f067318b8ee0f27df8e787801ade.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*P9PJjStS_Qacp_j6.png"/></div></div></figure><p id="32a0" class="pw-post-body-paragraph kj kk ir kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ik bi translated">默认情况下，出现在该类中的代码是:</p><figure class="kf kg kh ki gu js"><div class="bz fq l di"><div class="mz na l"/></div></figure><p id="90b4" class="pw-post-body-paragraph kj kk ir kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ik bi translated">最初我们创建一个<em class="lh"> UIButton </em>组件，一个<em class="lh"> UILabel </em>组件和一个<em class="lh"> UIView </em>组件，我们将在上面放置<em class="lh"> UILabel </em>组件(这将允许我们给标签添加阴影效果):</p><figure class="kf kg kh ki gu js"><div class="bz fq l di"><div class="mz na l"/></div></figure><p id="011b" class="pw-post-body-paragraph kj kk ir kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ik bi translated">为了使标签适应其内容的宽度，但包括一定的边距，我们没有直接使用<em class="lh"> UILabel </em>组件，而是创建了这个组件的子类(我们称之为<em class="lh"> FABInsetLabel </em>)。在这个子类中，我们所做的是修改标签的宽度，添加我们可以指定的某个值:</p><figure class="kf kg kh ki gu js"><div class="bz fq l di"><div class="mz na l"/></div></figure><p id="fae8" class="pw-post-body-paragraph kj kk ir kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ik bi translated">因为按下辅助按钮应该产生一个动作，所以我们将建立一个协议来传递动作和类中的一个委托:</p><figure class="kf kg kh ki gu js"><div class="bz fq l di"><div class="mz na l"/></div></figure><p id="285d" class="pw-post-body-paragraph kj kk ir kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ik bi translated">此外，我们将创建一个自定义初始化器，允许我们传递按钮的图像、标签的文本和要执行的操作。为了简化所有这些参数，我们将使用typealias来统一这些参数，并用以下类型实例化一个变量:</p><figure class="kf kg kh ki gu js"><div class="bz fq l di"><div class="mz na l"/></div></figure><p id="9d41" class="pw-post-body-paragraph kj kk ir kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ik bi translated">现在我们可以完成已经创建的类，如下所示(我们之前准备的部分已经简化):</p><figure class="kf kg kh ki gu js"><div class="bz fq l di"><div class="mz na l"/></div></figure><h1 id="9acb" class="lv lw ir bd lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms bi translated">创建二级按钮菜单</h1><p id="2d24" class="pw-post-body-paragraph kj kk ir kl b km mt ko kp kq mu ks kt ku mv kw kx ky mw la lb lc mx le lf lg ik bi translated">我们将创建二级按钮菜单，正如我们在组件设计中指出的，带有一个<em class="lh"> UIStackView </em>组件。为此，我们要做的是创建一个<em class="lh"> UIStackView </em>的子类，并赋予它我们想要的特性。我们所做的是:</p><ul class=""><li id="26f9" class="nc nd ir kl b km kn kq kr ku ne ky nf lc ng lg nh ni nj nk bi translated">从<em class="lh"> Xcode </em>菜单中，我们创建一个新文件(<em class="lh">文件&gt;新&gt;文件……</em>)并选择<em class="lh"> Cocoa Touch Class </em>(正如我们对<em class="lh"> FABMAinButton </em>组件所做的那样)。</li><li id="4f83" class="nc nd ir kl b km nl kq nm ku nn ky no lc np lg nh ni nj nk bi translated">当新文件的选项窗口出现时(<em class="lh">为新文件选择选项:</em>)，我们指出<em class="lh"> FABStackView </em>文件的名称，它将是<em class="lh"> UIStackView </em>的子类:</li></ul><figure class="kf kg kh ki gu js gi gj paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="gi gj nt"><img src="../Images/6c7a0ca123b806a3b003e3ab11964ca3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*s9saVeKv21C2smzi.png"/></div></div></figure><p id="e8c5" class="pw-post-body-paragraph kj kk ir kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ik bi translated">默认情况下，出现在该类中的代码是:</p><figure class="kf kg kh ki gu js"><div class="bz fq l di"><div class="mz na l"/></div></figure><p id="5073" class="pw-post-body-paragraph kj kk ir kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ik bi translated">首先，我们添加初始化器和<em class="lh"> UIStackView </em>组件的配置:</p><figure class="kf kg kh ki gu js"><div class="bz fq l di"><div class="mz na l"/></div></figure><p id="1a3c" class="pw-post-body-paragraph kj kk ir kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ik bi translated">基本上，我们所做的就是说，我们在这个组件中引入的元素将垂直放置，向右对齐，间距为12。</p><p id="0e56" class="pw-post-body-paragraph kj kk ir kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ik bi translated">要添加辅助按钮，我们将添加两个方法:第一个方法将添加一个按钮，第二个方法将在视图中配置它们。我们将把这两个方法放在一个扩展中来构造代码:</p><figure class="kf kg kh ki gu js"><div class="bz fq l di"><div class="mz na l"/></div></figure><p id="f131" class="pw-post-body-paragraph kj kk ir kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ik bi translated">因为我们将制作添加和删除按钮的动画，所以我们将保留两个带有这些按钮的列表(<em class="lh">数组</em>):一个包含添加的按钮并且后来没有被修改(<em class="lh">次级视图</em>)，另一个包含这些按钮的副本以添加或删除它们。并生成动画(<em class="lh">次级按钮</em>):</p><figure class="kf kg kh ki gu js"><div class="bz fq l di"><div class="mz na l"/></div></figure><h1 id="0ae1" class="lv lw ir bd lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms bi translated">二级按钮出现和消失时的动画</h1><p id="9f3e" class="pw-post-body-paragraph kj kk ir kl b km mt ko kp kq mu ks kt ku mv kw kx ky mw la lb lc mx le lf lg ik bi translated">为了使二级按钮的显示和隐藏更有吸引力，我们将在显示和隐藏它们时添加动画。</p><h2 id="098b" class="nu lw ir bd lx nv nw dn mb nx ny dp mf ku nz oa mj ky ob oc mn lc od oe mr of bi translated">按钮的展示</h2><p id="72f5" class="pw-post-body-paragraph kj kk ir kl b km mt ko kp kq mu ks kt ku mv kw kx ky mw la lb lc mx le lf lg ik bi translated">按钮将一个接一个地呈现，并且将在所述外观中寻求反弹效果。为此，我们将在同一按钮上连续连接三个动画:</p><figure class="kf kg kh ki gu js"><div class="bz fq l di"><div class="mz na l"/></div></figure><ul class=""><li id="30f0" class="nc nd ir kl b km kn kq kr ku ne ky nf lc ng lg nh ni nj nk bi translated">首先，我们用0.001的比例变换按钮和标签视图。</li><li id="0127" class="nc nd ir kl b km nl kq nm ku nn ky no lc np lg nh ni nj nk bi translated">第一个动画在0.075秒内以1.1的比例变换它。换句话说，按钮变得比其最终尺寸大10%。</li><li id="a9e6" class="nc nd ir kl b km nl kq nm ku nn ky no lc np lg nh ni nj nk bi translated">第二个动画在0.03秒内将其缩放到0.9(其最终大小的90%)。</li><li id="9c04" class="nc nd ir kl b km nl kq nm ku nn ky no lc np lg nh ni nj nk bi translated">最后，我们在0.03秒内将其转换为实际大小。</li></ul><p id="8d71" class="pw-post-body-paragraph kj kk ir kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ik bi translated">所有这些加在一起，给按钮的外观带来了反弹效果。此外，当最终的动画完成时，这个方法被递归地调用，这样按钮被一个一个地呈现出来(参见在方法的开始我们如何使用按钮的副本在我们展示的同时提取和删除它们)。</p><h2 id="ac9e" class="nu lw ir bd lx nv nw dn mb nx ny dp mf ku nz oa mj ky ob oc mn lc od oe mr of bi translated">隐藏按钮</h2><p id="32b3" class="pw-post-body-paragraph kj kk ir kl b km mt ko kp kq mu ks kt ku mv kw kx ky mw la lb lc mx le lf lg ik bi translated">为了隐藏按钮，我们将做一些与前面提到的演示相似的事情，但现在我们将只使用一个动画，在0.075秒内，它从原始大小变为0.001的比例，然后从视图中消除按钮:</p><figure class="kf kg kh ki gu js"><div class="bz fq l di"><div class="mz na l"/></div></figure><h1 id="5b75" class="lv lw ir bd lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms bi translated">通过FABSecondaryButtonDelegateprotocol协议</h1><p id="f66d" class="pw-post-body-paragraph kj kk ir kl b km mt ko kp kq mu ks kt ku mv kw kx ky mw la lb lc mx le lf lg ik bi translated">由于二级按钮通过委托和<em class="lh">fabssecondarybuttondelegate</em>协议传递它们的动作，我们必须使<em class="lh"> FABStackView </em>类采用该协议的方法(我们使用一个扩展来使代码有序):</p><figure class="kf kg kh ki gu js"><div class="bz fq l di"><div class="mz na l"/></div></figure><p id="8fe4" class="pw-post-body-paragraph kj kk ir kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ik bi translated">也就是说，当我们点击一个二级按钮时，这个方法就会被执行。此时采取两个步骤:</p><ul class=""><li id="888e" class="nc nd ir kl b km kn kq kr ku ne ky nf lc ng lg nh ni nj nk bi translated">该动作首先通过一个委托传递给实例化了<em class="lh"> FABStackView </em>的类(即主<em class="lh"> FABView </em>类)。为此，我们必须在FABStackView类的开头添加一个协议委托:</li></ul><figure class="kf kg kh ki gu js"><div class="bz fq l di"><div class="mz na l"/></div></figure><ul class=""><li id="3a56" class="nc nd ir kl b km kn kq kr ku ne ky nf lc ng lg nh ni nj nk bi translated">第二，我们调用<em class="lh"> dismissButtons </em>方法，以便隐藏次级按钮。</li></ul><p id="9ec5" class="pw-post-body-paragraph kj kk ir kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ik bi translated">简单地说(在方法中)，这个类的代码如下:</p><figure class="kf kg kh ki gu js"><div class="bz fq l di"><div class="mz na l"/></div></figure><p id="b614" class="pw-post-body-paragraph kj kk ir kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ik bi translated">最后，我们必须让<em class="lh"> FABView </em>类也采用<em class="lh">fabssecondarybuttondelegate</em>协议，这样它就可以执行通过被选中的右键的动作:</p><figure class="kf kg kh ki gu js"><div class="bz fq l di"><div class="mz na l"/></div></figure><p id="544b" class="pw-post-body-paragraph kj kk ir kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ik bi translated">现在我们只需将输入的所有代码上传到一个存储库(在本例中是<a class="ae kd" href="https://github.com/raulferrerdev/FABButton" rel="noopener ugc nofollow" target="_blank"> GitHub </a>)中，这样它就可以作为任何应用程序的依赖项使用。</p><h1 id="bc04" class="lv lw ir bd lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms bi translated">如何将FAB按钮导入到项目中</h1><p id="9369" class="pw-post-body-paragraph kj kk ir kl b km mt ko kp kq mu ks kt ku mv kw kx ky mw la lb lc mx le lf lg ik bi translated">要导入包含FAB按钮的Swift包，我们要做的第一件事是在Xcode中创建新项目。</p><p id="d4f6" class="pw-post-body-paragraph kj kk ir kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ik bi translated">创建完成后，我们进入Xcode菜单<em class="lh">文件&gt; Swift包&gt;添加包依赖… </em></p><figure class="kf kg kh ki gu js gi gj paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="gi gj og"><img src="../Images/9c6d98573d94621f292d4622bd5fd8ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*JXqAMb12Bbs2DfA6.png"/></div></div></figure><p id="7e15" class="pw-post-body-paragraph kj kk ir kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ik bi translated">然后，我们指出Swift包的URL:</p><figure class="kf kg kh ki gu js gi gj paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="gi gj nr"><img src="../Images/229599e3e49a02c6d2e917d9da877f6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*pkWRlZ0ckU02qxlN.png"/></div></div></figure><p id="dc59" class="pw-post-body-paragraph kj kk ir kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ik bi translated">并且我们指出我们想要添加的版本或分支:</p><figure class="kf kg kh ki gu js gi gj paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="gi gj nt"><img src="../Images/0a27e4a14032494fc534269c42c6825b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*4CPo9NKbFWthcP-a.png"/></div></div></figure><p id="7832" class="pw-post-body-paragraph kj kk ir kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ik bi translated">添加后，在导航菜单中我们可以看到已经导入的包:</p><figure class="kf kg kh ki gu js gi gj paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="gi gj oh"><img src="../Images/c8550eb36998e98ef3fc1ef06636b7f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:540/format:webp/0*ckpp-ac3AsTVGuDy.png"/></div></div></figure><p id="5ec6" class="pw-post-body-paragraph kj kk ir kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ik bi translated">现在，在ViewController类中，我们只需要导入组件，配置视图并添加按钮。例如，下面的代码显示了一个带有四个辅助按钮的按钮:</p><figure class="kf kg kh ki gu js"><div class="bz fq l di"><div class="mz na l"/></div></figure><p id="d485" class="pw-post-body-paragraph kj kk ir kl b km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg ik bi translated">如果我们现在运行这个应用程序，我们可以检查FAB按钮的操作。</p><h1 id="17a0" class="lv lw ir bd lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms bi translated">结论</h1><p id="aa32" class="pw-post-body-paragraph kj kk ir kl b km mt ko kp kq mu ks kt ku mv kw kx ky mw la lb lc mx le lf lg ik bi translated">在本文中，我们看到了如何创建一个显示二级菜单的<em class="lh"> FAB按钮</em>,此外，还将它创建为一个Swift包，以便能够将其上传到存储库并与其他项目共享。由于<em class="lh"> Swift包管理器</em>已经并入Xcode 11，这个过程变得容易多了。</p></div></div>    
</body>
</html>