<html>
<head>
<title>How to Use the Contact Picker API for Web Applications</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何为Web应用程序使用联系人选择器API</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-use-contacts-list-in-your-web-application-f002fc2c0e6c?source=collection_archive---------13-----------------------#2020-06-29">https://levelup.gitconnected.com/how-to-use-contacts-list-in-your-web-application-f002fc2c0e6c?source=collection_archive---------13-----------------------#2020-06-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="fe22" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用网络上的联系人</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/e420b5d0edb0e975d19beb7b77e6fe0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*s7t77NnStUUNyu5C"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@christianw?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">克里斯蒂安·威迪格</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="e198" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你好，中号！在本文中，我想解释并展示一个Web联系人选择器API的例子。</p><p id="3554" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> <em class="ls">开始前注意事项</em> </strong> <em class="ls">:本文不需要具体知识，比较基础的Javascript。</em></p><h1 id="056e" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">这是什么？</h1><p id="132b" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">选择联系人选取器模型是为了让用户完全控制共享数据，允许用户准确选择向网站提供哪些联系人。该功能使网站可以一次性访问用户的联系人，这意味着开发者必须在每次需要时请求访问用户的联系人。</p><p id="3e2d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">使用案例:</strong></p><ol class=""><li id="f33b" class="mq mr iq ky b kz la lc ld lf ms lj mt ln mu lr mv mw mx my bi translated">列出事件参与者(姓名和号码)</li><li id="4cb8" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr mv mw mx my bi translated">在电子邮件应用程序中选择邮件的收件人。</li><li id="19dd" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr mv mw mx my bi translated">指定发送包的物理地址</li></ol><h1 id="4b15" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">代码示例</h1><p id="ec98" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">在开始使用浏览器API之前，您应该始终检查您的设备和浏览器的组合是否支持它。根据规范，浏览器中的联系人选取器API呈现为<code class="fe ne nf ng nh b">navigator.contacts</code>。以下是检查联系人选取器支持的代码示例:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="2ac9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">检查支持后，我们可以开始与联系人合作。我们需要<code class="fe ne nf ng nh b">navigator.contacts.select()</code>——该方法允许您获取用户的联系人列表，并为每个联系人选择特定的数据，以便在您的web应用程序中使用。<code class="fe ne nf ng nh b">select()</code>打开联系人选择器，允许用户选择他们想要与站点共享的联系人。</p><p id="3cd9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ne nf ng nh b">navigator.contacts.select()</code>接受两个输入参数:</p><ol class=""><li id="ca5d" class="mq mr iq ky b kz la lc ld lf ms lj mt ln mu lr mv mw mx my bi translated">必需的参数。您希望返回的每个联系人的属性数组(允许的值为<code class="fe ne nf ng nh b">'name'</code>、<code class="fe ne nf ng nh b">'email'</code>、<code class="fe ne nf ng nh b">'tel'</code>、<code class="fe ne nf ng nh b">'address'</code>或<code class="fe ne nf ng nh b">'icon'</code>中的任意一个)。除了<code class="fe ne nf ng nh b">icon</code>，所有的值都返回一个字符串数组。该属性返回一个Blob数组(<a class="ae kv" href="https://mimesniff.spec.whatwg.org/#image-mime-type" rel="noopener ugc nofollow" target="_blank"> image mime type </a>)。</li><li id="c4cb" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr mv mw mx my bi translated">可选参数。带有一个布尔选项<code class="fe ne nf ng nh b">multiple</code>的对象—选择一个或多个联系人(默认为假)。</li></ol><p id="6aeb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ls">注意:</em> <code class="fe ne nf ng nh b">"email", "address", "icon"</code> <em class="ls">部分设备和浏览器可能不支持。</em></p><p id="995a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面是<code class="fe ne nf ng nh b">navigator.contacts.select()</code>的例子:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="3c7e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将走得更远。事实上，并非所有字段在某些设备和浏览器上都可用。因此，我们将使用<code class="fe ne nf ng nh b">navigator.contacts.getProperties()</code>。此方法允许您获取设备和浏览器上可用联系人属性的列表。属性以字符串数组的形式返回。</p><p id="44a8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我们的例子中，<code class="fe ne nf ng nh b">navigator.contacts.getProperties()</code>检查用户的设备是否支持<code class="fe ne nf ng nh b">adress</code>属性。</p><p id="cc06" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面是实现联系人选取器API的最后一个示例:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ni nj l"/></div></figure><h1 id="a63a" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">支持</h1><p id="6859" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">除了Android上的IOS Safari和Firefox，大多数移动设备都支持联系人选择器API。在桌面上，Chrome、Opera和Edge已经支持这一功能。</p><p id="0046" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你可以在这里 找到关于联系人选择器API支持<a class="ae kv" href="https://caniuse.com/#search=ContactsManager%20API" rel="noopener ugc nofollow" target="_blank"> <em class="ls">的完整信息。</em></a></p><h1 id="add0" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">例子</h1><p id="ae7d" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">下面是一个来自<a class="ae kv" href="https://contacts-picker.firebaseapp.com/" rel="noopener ugc nofollow" target="_blank"> <em class="ls">我的宠物项目“我的聚会列表”</em> </a> <em class="ls">的联系人Picker API的视频示例。</em></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nj l"/></div></figure><h1 id="04a3" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">最终想法</h1><p id="2537" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">感谢你阅读这篇文章，我希望它对你有用。</p><p id="1592" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">联系人选择器API的实现看起来非常简单，成本也不高。在合适的地方，这个功能可以改善用户的生活。即使你没有地方实现它，那么关于这种API的知识也不会是多余的。</p><p id="533d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">祝你好运，回头见！</p><h1 id="0d3f" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">资源</h1><ol class=""><li id="fc2a" class="mq mr iq ky b kz ml lc mm lf nl lj nm ln nn lr mv mw mx my bi translated"><a class="ae kv" href="https://wicg.github.io/contact-api/spec/#contacts-source-supported-properties" rel="noopener ugc nofollow" target="_blank">联系提货人API规范</a></li><li id="9e4c" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr mv mw mx my bi translated"><a class="ae kv" href="https://caniuse.com/#search=ContactsManager%20API" rel="noopener ugc nofollow" target="_blank">支持我可以使用吗</a></li><li id="c094" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr mv mw mx my bi translated"><a class="ae kv" href="https://contacts-picker.firebaseapp.com/" rel="noopener ugc nofollow" target="_blank">真实示例“聚会列表”</a></li><li id="cb61" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr mv mw mx my bi translated"><a class="ae kv" href="https://github.com/jyggiz/my-party-list/" rel="noopener ugc nofollow" target="_blank"> Github回购</a></li></ol></div></div>    
</body>
</html>