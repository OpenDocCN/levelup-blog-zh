<html>
<head>
<title>The Pros and Cons of AWS Lambda Function URLs</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">AWS Lambda函数URL的利与弊</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/the-pros-and-cons-of-aws-lambda-function-urls-5868c9dacf20?source=collection_archive---------5-----------------------#2022-06-07">https://levelup.gitconnected.com/the-pros-and-cons-of-aws-lambda-function-urls-5868c9dacf20?source=collection_archive---------5-----------------------#2022-06-07</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="d286" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">AWS Lambda函数URL于2022年4月6日发布，作为一种基础设施配置，它为您提供了直接触发AWS Lambda函数的公共URL。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi ko"><img src="../Images/6fb126f93febc85bd9662a3ac6eb7f6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1126/format:webp/1*G0AOhgeU2Bko9FKOD1I-og.png"/></div></figure><p id="e68d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">该服务提供了一种比AWS API网关或AWS应用程序负载平衡器(ALB)更快、更简单的方式来触发AWS Lambda函数。URL遵循如下标准结构:</p><pre class="kp kq kr ks gt kw kx ky kz aw la bi"><span id="7dc9" class="lb lc it kx b gy ld le l lf lg">https://<strong class="kx iu">&lt;url-id&gt;</strong>.lambda-url.<strong class="kx iu">&lt;region&gt;</strong>.on.aws</span></pre><h1 id="0123" class="lh lc it bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">优点:快速实施和部署</h1><p id="faf5" class="pw-post-body-paragraph jq jr it js b jt me jv jw jx mf jz ka kb mg kd ke kf mh kh ki kj mi kl km kn im bi translated">AWS Lambda函数URL的配置和部署非常快速，同时比其他替代方案需要更少的设置。当我设置端点时，它几乎可以立即使用，并且只需要一些配置值。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/1dc621262e0a97a7e6883f92f45a6e3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1074/format:webp/1*sdKETxO5CQOxyOoWBdMcDg.png"/></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk translated">AWS API Gateway和AWS ALB运行缓慢</figcaption></figure><p id="e6a8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">AWS API Gateway需要更长的部署时间，并且需要一组更复杂的资源来设置。API、资源、方法、部署、Stage和Lambda权限都是设置的一部分。</p><p id="f9d0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">AWS ALB需要配置额外的底层资源，并且有前期使用成本。设计AWS网络需要做很多工作，但至少它们包含VPC、子网、IGW和安全组。AWS ALBs还需要多个不同的资源来组成一个工作系统。</p><h1 id="15ea" class="lh lc it bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">Pro: IAM用于访问控制</h1><p id="6e09" class="pw-post-body-paragraph jq jr it js b jt me jv jw jx mf jz ka kb mg kd ke kf mh kh ki kj mi kl km kn im bi translated">AWS Lambda函数URL身份验证的选项是“无”或“使用IAM”。当您使用None时，代码中应该包含任何额外的安全性。但是，当您使用IAM时，您可以以显著的粒度引用IAM资源。这意味着，如果您和您的客户都使用AWS，只需直接参考他们的AWS IAM资源，就有一个强大而简单的安全集成点。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/b02bf9c3445eeaaa6e26477a6f4ab9d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:894/format:webp/1*Krft7NYV1wFPIzgGjVRajQ.png"/></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk translated">AWS IAM至AWS Lambda</figcaption></figure><h1 id="afc2" class="lh lc it bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">Pro: AWS Lambda别名支持</h1><p id="fbbd" class="pw-post-body-paragraph jq jr it js b jt me jv jw jx mf jz ka kb mg kd ke kf mh kh ki kj mi kl km kn im bi translated">新的URL还支持AWS Lambda别名，这意味着在替换底层基础设施时，您可以保持一致的面向公众的URL。这并不像使用DNS那样实际，但是如果你不介意AWS Lambda别名和版本控制系统的话，这是可行的。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/5f6a628f57b1169c0bc23e7fecc697c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:932/format:webp/1*tXIz17OcePvWIscjWr5baA.png"/></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk translated">AWS Lambda别名</figcaption></figure><h1 id="eb11" class="lh lc it bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">缺点:没有自定义DNS支持</h1><p id="eb4c" class="pw-post-body-paragraph jq jr it js b jt me jv jw jx mf jz ka kb mg kd ke kf mh kh ki kj mi kl km kn im bi translated">如前所述，DNS不能用于AWS Lambda函数URL，这对发布和向客户提供服务都是一个问题。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/bef6b431313e5e9c10ec1688733c9659.png" data-original-src="https://miro.medium.com/v2/resize:fit:894/format:webp/1*aujPM7WVadKQaFqJDZZUxg.png"/></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk translated">没有自定义DNS</figcaption></figure><p id="f572" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">缺少自定义DNS类似于私有AWS API网关，如果您对发布过程使用DNS自动化，这可能会导致问题。</p><p id="679a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">通过部署AWS CloudFront并指向后端的URL，可以解决自定义DNS问题。这与部署AWS API Gateway的工作量差不多，这抵消了使用新特性的好处。</p><h1 id="5dae" class="lh lc it bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">缺点:AWS帐户ID暴露</h1><p id="3b9c" class="pw-post-body-paragraph jq jr it js b jt me jv jw jx mf jz ka kb mg kd ke kf mh kh ki kj mi kl km kn im bi translated">根据AWS，新的URL暴露了用于服务的AWS帐户ID，这可以向任何恶意行为者提供信息。出于安全目的，AWS帐户id不被视为凭证，但是可能的话应该避免发布此信息。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/94889f8c39c355752a8692584f5574ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:990/format:webp/1*-Tz6mGxFl6mVA9NmRz3P3g.png"/></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk translated">AWS帐户ID暴露</figcaption></figure><h1 id="3eee" class="lh lc it bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">缺点:有限的网络控制</h1><p id="c9d4" class="pw-post-body-paragraph jq jr it js b jt me jv jw jx mf jz ka kb mg kd ke kf mh kh ki kj mi kl km kn im bi translated">由于AWS Lambda功能URL的实现，没有办法实现基于IP或比前述授权更低的任何级别的网络控制。这是一个限制，根据您的环境，这可能是一个问题。对于像我过去工作过的大型企业来说，这是不可接受的，但如果你正在运营一家初创企业，牺牲实施速度可能是值得的。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi mr"><img src="../Images/1277a30caa2438575115bd5aec3ef0e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1286/format:webp/1*MaMTPkgsgSOAXxG8FgyFhg.png"/></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk translated">没有IP控制</figcaption></figure><h1 id="e9dd" class="lh lc it bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">摘要</h1><p id="9cbe" class="pw-post-body-paragraph jq jr it js b jt me jv jw jx mf jz ka kb mg kd ke kf mh kh ki kj mi kl km kn im bi translated">看到更多的功能被添加到AWS Lambda和无服务器解决方案中总是件好事。然而，新的AWS Lambda函数URL在访问控制和DNS实现方面还有很多不足之处。希望在不久的将来，我们将获得自定义DNS作为一项功能，这样我们就不必使用AWS别名和AWS提供的URL。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/10c5ed2321a938aab8e5be51b5be9ba3.png" data-original-src="https://miro.medium.com/v2/resize:fit:906/format:webp/1*NffHuBQJdn4sFEX6Y59kdA.png"/></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk translated">URL vs ALB vs API</figcaption></figure><p id="ab85" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">点击此处了解更多内容，或通过以下方式联系我:</p><ul class=""><li id="ac8c" class="mt mu it js b jt ju jx jy kb mv kf mw kj mx kn my mz na nb bi translated"><strong class="js iu">推特:</strong> <a class="ae nc" href="https://twitter.com/BenTorvo" rel="noopener ugc nofollow" target="_blank"> @BenTorvo </a></li><li id="a75c" class="mt mu it js b jt nd jx ne kb nf kf ng kj nh kn my mz na nb bi translated">【ben@torvo.com.au】邮箱: <a class="ae nc" href="http://torvo.com.au/" rel="noopener ugc nofollow" target="_blank">邮箱:</a></li><li id="9b55" class="mt mu it js b jt nd jx ne kb nf kf ng kj nh kn my mz na nb bi translated"><strong class="js iu">网址:</strong><a class="ae nc" href="http://torvo.com.au/" rel="noopener ugc nofollow" target="_blank">torvo.com.au</a></li></ul><h1 id="eee8" class="lh lc it bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">更多信息</h1><div class="ni nj gp gr nk nl"><a href="https://docs.aws.amazon.com/lambda/latest/dg/lambda-urls.html" rel="noopener  ugc nofollow" target="_blank"><div class="nm ab fo"><div class="nn ab no cl cj np"><h2 class="bd iu gy z fp nq fr fs nr fu fw is bi translated">Lambda函数URL</h2><div class="ns l"><h3 class="bd b gy z fp nq fr fs nr fu fw dk translated">使用函数URL向Lambda函数添加一个专用的HTTP(S)端点。</h3></div><div class="nt l"><p class="bd b dl z fp nq fr fs nr fu fw dk translated">docs.aws.amazon.com</p></div></div></div></a></div></div></div>    
</body>
</html>