<html>
<head>
<title>Cypress: A deeper understanding of testing for an attribute’s value</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Cypress:对属性值测试的深入理解</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/cypress-a-deeper-understanding-of-testing-for-an-attributes-value-a801d30f80e4?source=collection_archive---------7-----------------------#2021-10-08">https://levelup.gitconnected.com/cypress-a-deeper-understanding-of-testing-for-an-attributes-value-a801d30f80e4?source=collection_archive---------7-----------------------#2021-10-08</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="1468" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph"><a class="ae ep" href="https://tod-gentille.medium.com/cypress-testing-articles-b2f24fa9b61b?sk=041f4e3d5b1a6a187cf26e475b6b802e" rel="noopener">柏树测试</a></h2><div class=""/><div class=""><h2 id="1f3b" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">我们不仅要看两种测试具有特定值的属性是否存在的方法，还要寻找隐藏在语法背后的不可见命令。</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/3cc1b3f9233b3373610975bf70fb1e2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*euuaQYjd_FDpHAfa1dyi6Q.jpeg"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">有时候很难看出Cypress语法到底在做什么</figcaption></figure><p id="6d48" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><strong class="lg ja">警告</strong>:这将是一篇链接很重的文章。我写这篇文章的意图是，你可以从上到下地阅读它，而不用去任何链接，但之后探索它们，以充分了解正在发生的事情和原因。</p></div><div class="ab cl ma mb hu mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ij ik il im in"><p id="6e95" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我使用的是Pluralsight设计系统中的<a class="ae mh" href="https://design-system.pluralsight.com/components/linearprogress#linear-progress" rel="noopener ugc nofollow" target="_blank">线性进度</a>小部件。设置值很简单，但是测试它是否有正确的值就不那么明确了。幸运的是，小部件创建了一个名为<code class="fe mi mj mk ml b">aria-valuenow</code>的属性，其值代表进度值，这是我<strong class="lg ja">可以</strong>测试的。</p><h1 id="84c2" class="mm mn iq bd mo mp mq mr ms mt mu mv mw kf mx kg my ki mz kj na kl nb km nc nd bi translated">方法1</h1><p id="05ce" class="pw-post-body-paragraph le lf iq lg b lh ne ka lj lk nf kd lm ln ng lp lq lr nh lt lu lv ni lx ly lz ij bi translated">对于这个例子，让我们假设我们的小部件<code class="fe mi mj mk ml b">progress-widget.</code>有一个<code class="fe mi mj mk ml b">data-cy</code>属性，如果我们期望小部件的值为30，我们可以这样编写我们的测试:</p><pre class="kp kq kr ks gt nj ml nk nl aw nm bi"><span id="274e" class="nn mn iq ml b gy no np l nq nr">cy.dataCy(`progress-widget`).should(`have.attr`, `aria-valuenow`, `30`)</span></pre><p id="d7e3" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated"><em class="ns">(</em><a class="ae mh" rel="noopener ugc nofollow" target="_blank" href="/navigating-cypress-custom-commands-412a817b088?sk=f176c6ef524d6fc83ecf309336a7ce06"><em class="ns">)dataCy是自定义命令</em> </a> <em class="ns">为</em> <code class="fe mi mj mk ml b"><em class="ns">get(`[data-cy=...])</em></code> <em class="ns"> ) </em></p><p id="5030" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">这看起来很清楚，但是对我来说，这显然不是查找属性和检查其值的正确语法。即使是现在，它似乎仍然有点神奇。例如，为什么我把<code class="fe mi mj mk ml b">have.attr</code>作为字符串传递，而不是写<code class="fe mi mj mk ml b">.should.have.attr('aria-valuenow').eql('30')</code>。</p><p id="bd78" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我们在测试中使用的方法被称为使用一个<a class="ae mh" href="https://docs.cypress.io/guides/core-concepts/introduction-to-cypress#Implicit-Subjects" rel="noopener ugc nofollow" target="_blank">隐式主题</a>。我们还利用了Cypress引入其他库的优势，让我们可以使用它们，而不需要额外的导入。在这种情况下，<code class="fe mi mj mk ml b">'have.attr'</code>正在利用<a class="ae mh" href="https://www.chaijs.com/plugins/chai-jquery/" rel="noopener ugc nofollow" target="_blank"> chai-jquery库</a>中的<code class="fe mi mj mk ml b">attr()</code>断言。这些文档向您展示了<code class="fe mi mj mk ml b">attr()</code>命令需要一个参数作为属性的名称，一个可选参数作为测试的值。在我们的<code class="fe mi mj mk ml b">should()</code>调用中，我们将这些作为第二个和第三个字符串传递。如果我们想测试一个特定的主题没有特定的属性，我们可以用<code class="fe mi mj mk ml b">should(not.have.attr...)</code>来完成。</p><h1 id="2a4d" class="mm mn iq bd mo mp mq mr ms mt mu mv mw kf mx kg my ki mz kj na kl nb km nc nd bi translated">方法2</h1><p id="f3ee" class="pw-post-body-paragraph le lf iq lg b lh ne ka lj lk nf kd lm ln ng lp lq lr nh lt lu lv ni lx ly lz ij bi translated">虽然这是我测试属性的首选方式，但是你也可以用<code class="fe mi mj mk ml b">invoke()</code>命令来完成。该测试的代码如下所示:</p><pre class="kp kq kr ks gt nj ml nk nl aw nm bi"><span id="9da3" class="nn mn iq ml b gy no np l nq nr">cy.dataCy(`progress-widget`).invoke(`attr`,`aria-valuenow`).should(`eq`, `30`)</span></pre><p id="a4f5" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">在这个例子中，我们不再使用chai-jquery，而是直接使用<a class="ae mh" href="https://api.jquery.com/attr/" rel="noopener ugc nofollow" target="_blank"> jQuery </a> <code class="fe mi mj mk ml b"><a class="ae mh" href="https://api.jquery.com/attr/" rel="noopener ugc nofollow" target="_blank">attr()</a></code>命令。我们调用<code class="fe mi mj mk ml b">attr()</code>来获取属性列表，然后第二个参数返回感兴趣的特定参数，我们测试该参数是否等于特定值。现在，如果你阅读<a class="ae mh" href="https://docs.cypress.io/api/commands/invoke" rel="noopener ugc nofollow" target="_blank"> invoke()文档</a>，它们会更有意义。</p><p id="c5d0" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">如果你只是想知道如何测试一个属性，我希望你已经学会了。如果你想知道更多关于引擎盖下发生的事情，我希望我也有所帮助。如果你只能跟一个链接，我建议你看一下关于<a class="ae mh" href="https://docs.cypress.io/guides/core-concepts/introduction-to-cypress#Implicit-Subjects" rel="noopener ugc nofollow" target="_blank">隐性主语</a>的简要说明。</p></div><div class="ab cl ma mb hu mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ij ik il im in"><p id="a128" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">本系列还有<a class="ae mh" href="https://tod-gentille.medium.com/cypress-testing-articles-b2f24fa9b61b?sk=041f4e3d5b1a6a187cf26e475b6b802e" rel="noopener">其他文章</a>。<br/>代号安安。</p></div></div>    
</body>
</html>