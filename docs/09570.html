<html>
<head>
<title>HOC pattern inside your React app</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React应用程序中的特殊模式</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/hoc-pattern-inside-your-react-app-50265362f38f?source=collection_archive---------14-----------------------#2021-08-22">https://levelup.gitconnected.com/hoc-pattern-inside-your-react-app-50265362f38f?source=collection_archive---------14-----------------------#2021-08-22</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="7ddb" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">如何重用您的逻辑并保持代码干燥</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/a6d0f5fa3ec76ec6b8ef80f8e193f2c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*aqts049tnJe5sHef"/></div></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">安东·大流士在<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><h1 id="6bdf" class="la lb iu bd lc ld le lf lg lh li lj lk ka ll kb lm kd ln ke lo kg lp kh lq lr bi translated">什么是特设委员会？</h1><blockquote class="ls"><p id="9643" class="lt lu iu bd lv lw lx ly lz ma mb mc dk translated">高阶组件(HOC)是React中重用组件逻辑的一种高级技术。本质上，hoc不是React API的一部分。它们是从React的组合性质中出现的一种模式。— <a class="ae kz" href="https://reactjs.org/docs/higher-order-components.html" rel="noopener ugc nofollow" target="_blank">反应文件</a></p></blockquote><p id="f713" class="pw-post-body-paragraph md me iu mf b mg mh jv mi mj mk jy ml mm mn mo mp mq mr ms mt mu mv mw mx mc in bi translated">好吧，也许这很难理解，但是React文档有一个更简单的定义:</p><blockquote class="ls"><p id="a8f0" class="lt lu iu bd lv lw lx ly lz ma mb mc dk translated">具体而言，<strong class="ak">高阶分量是取一个分量并返回一个新分量的函数。— </strong> <a class="ae kz" href="https://reactjs.org/docs/higher-order-components.html" rel="noopener ugc nofollow" target="_blank"> <strong class="ak">反应文件</strong> </a></p></blockquote><p id="37c9" class="pw-post-body-paragraph md me iu mf b mg mh jv mi mj mk jy ml mm mn mo mp mq mr ms mt mu mv mw mx mc in bi translated">现在我认为这是理解HOC的一个更简单的方法。但是它如何帮助你重用你的代码呢？你如何写你的第一篇论文？</p><h1 id="1fca" class="la lb iu bd lc ld le lf lg lh li lj lk ka ll kb lm kd ln ke lo kg lp kh lq lr bi translated">不带HOC的代码</h1><p id="2cea" class="pw-post-body-paragraph md me iu mf b mg my jv mi mj mz jy ml mm na mo mp mq nb ms mt mu nc mw mx mc in bi translated">让我们假设您的React应用程序将呈现一个用户表。为此，您调用一个API并等待它返回数据，同时显示一个加载器并呈现返回的数据。代码可能看起来像这样:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nd ne l"/></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">进行API调用以获取用户并在表中呈现数据</figcaption></figure><p id="fec6" class="pw-post-body-paragraph md me iu mf b mg nf jv mi mj ng jy ml mm nh mo mp mq ni ms mt mu nj mw mx mc in bi translated">现在，您有了另一个呈现球队表格的组件。整个逻辑与前面的组件相同:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nd ne l"/></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">进行API调用以获取团队并在表格中呈现数据</figcaption></figure><p id="5bb3" class="pw-post-body-paragraph md me iu mf b mg nf jv mi mj ng jy ml mm nh mo mp mq ni ms mt mu nj mw mx mc in bi translated">你看到代码几乎一样了吗？这就是HOC可以帮助你使你的代码更加简洁，并且在渲染你的组件时去除这种重复的逻辑的地方。</p><h1 id="b75f" class="la lb iu bd lc ld le lf lg lh li lj lk ka ll kb lm kd ln ke lo kg lp kh lq lr bi translated">用HOC编码</h1><p id="1923" class="pw-post-body-paragraph md me iu mf b mg my jv mi mj mz jy ml mm na mo mp mq nb ms mt mu nc mw mx mc in bi translated">首先，像这样创建您的HOC:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nd ne l"/></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">封装加载和空数据状态</figcaption></figure><p id="7b8a" class="pw-post-body-paragraph md me iu mf b mg nf jv mi mj ng jy ml mm nh mo mp mq ni ms mt mu nj mw mx mc in bi translated">这个特设的目的是接收一个<code class="fe nk nl nm nn b">Component</code>，在这个例子中是<code class="fe nk nl nm nn b">Table</code>组件，加上一些其他的道具来决定如何呈现它的逻辑。</p><p id="2beb" class="pw-post-body-paragraph md me iu mf b mg nf jv mi mj ng jy ml mm nh mo mp mq ni ms mt mu nj mw mx mc in bi translated">现在让我们在您的<code class="fe nk nl nm nn b">Users</code>和<code class="fe nk nl nm nn b">Teams</code>组件中使用它:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nd ne l"/></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">使用HOC保持代码干燥的用户组件</figcaption></figure><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nd ne l"/></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">团队组件使用HOC保持代码干燥</figcaption></figure><p id="430a" class="pw-post-body-paragraph md me iu mf b mg nf jv mi mj ng jy ml mm nh mo mp mq ni ms mt mu nj mw mx mc in bi translated">就是这样！您已经将加载和空数据状态封装在一个文件中，该文件可以在应用程序的任何部分重用。当您用您的HOC包装一个组件时，您是在用HOC内部的逻辑增强那个组件。</p><h1 id="cd71" class="la lb iu bd lc ld le lf lg lh li lj lk ka ll kb lm kd ln ke lo kg lp kh lq lr bi translated">多用点HOC！</h1><p id="1841" class="pw-post-body-paragraph md me iu mf b mg my jv mi mj mz jy ml mm na mo mp mq nb ms mt mu nc mw mx mc in bi translated">这种模式可以多次应用于同一个组件。</p><p id="4034" class="pw-post-body-paragraph md me iu mf b mg nf jv mi mj ng jy ml mm nh mo mp mq ni ms mt mu nj mw mx mc in bi translated">您想添加分页吗？只需创建一个新的特设组件，例如<code class="fe nk nl nm nn b">withPagination</code>:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nd ne l"/></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">特设处理分页逻辑</figcaption></figure><p id="a65f" class="pw-post-body-paragraph md me iu mf b mg nf jv mi mj ng jy ml mm nh mo mp mq ni ms mt mu nj mw mx mc in bi translated">然后像这样在你的组件中使用它:</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nd ne l"/></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">使用HOCs处理加载和分页的用户组件</figcaption></figure><h1 id="9437" class="la lb iu bd lc ld le lf lg lh li lj lk ka ll kb lm kd ln ke lo kg lp kh lq lr bi translated">问题</h1><p id="58dd" class="pw-post-body-paragraph md me iu mf b mg my jv mi mj mz jy ml mm na mo mp mq nb ms mt mu nc mw mx mc in bi translated"><strong class="mf iv">为什么要这样设置HOC的显示名称？</strong></p><pre class="kk kl km kn gu no nn np nq aw nr bi"><span id="1ebf" class="ns lb iu nn b gz nt nu l nv nw">WithLoader.displayName = `WithLoader(${Component.displayName || Component.name || 'Component'  })`</span></pre><p id="bc67" class="pw-post-body-paragraph md me iu mf b mg nf jv mi mj ng jy ml mm nh mo mp mq ni ms mt mu nj mw mx mc in bi translated">这是<a class="ae kz" href="https://reactjs.org/docs/higher-order-components.html#convention-wrap-the-display-name-for-easy-debugging" rel="noopener ugc nofollow" target="_blank"> React文档</a>推荐使用的一个约定，以便于调试。</p><p id="4c85" class="pw-post-body-paragraph md me iu mf b mg nf jv mi mj ng jy ml mm nh mo mp mq ni ms mt mu nj mw mx mc in bi translated"><strong class="mf iv">为什么在主组件外用HOC声明增强组件？</strong></p><p id="49b0" class="pw-post-body-paragraph md me iu mf b mg nf jv mi mj ng jy ml mm nh mo mp mq ni ms mt mu nj mw mx mc in bi translated">声明inside将在每次渲染时重新创建增强的组件。</p><p id="c9f1" class="pw-post-body-paragraph md me iu mf b mg nf jv mi mj ng jy ml mm nh mo mp mq ni ms mt mu nj mw mx mc in bi translated"><strong class="mf iv">为什么只将</strong> <code class="fe nk nl nm nn b"><strong class="mf iv">{...props}</strong></code> <strong class="mf iv">传递给由HOC返回的组件？</strong></p><p id="04f4" class="pw-post-body-paragraph md me iu mf b mg nf jv mi mj ng jy ml mm nh mo mp mq ni ms mt mu nj mw mx mc in bi translated">这样，您就不需要担心组件需要什么属性，只需传递除了呈现加载器、空状态或分页之外的所有属性。</p><div class="nx ny gq gs nz oa"><a href="https://blog.jagonzalr.com/membership" rel="noopener  ugc nofollow" target="_blank"><div class="ob ab fp"><div class="oc ab od cl cj oe"><h2 class="bd iv gz z fq of fs ft og fv fx it bi translated">加入我的介绍链接媒体-何塞安东尼奥冈萨雷斯罗德里格斯</h2><div class="oh l"><h3 class="bd b gz z fq of fs ft og fv fx dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="oi l"><p class="bd b dl z fq of fs ft og fv fx dk translated">blog.jagonzalr.com</p></div></div><div class="oj l"><div class="ok l ol om on oj oo kt oa"/></div></div></a></div></div></div>    
</body>
</html>