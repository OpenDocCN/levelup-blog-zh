<html>
<head>
<title>Build a Tetris game with HTML Canvas, CSS, and JavaScript on Autocode</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Autocode上用HTML画布、CSS和JavaScript构建一个俄罗斯方块游戏</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/build-a-tetris-game-with-html-canvas-css-and-javascript-on-autocode-132c8346e60c?source=collection_archive---------1-----------------------#2021-07-07">https://levelup.gitconnected.com/build-a-tetris-game-with-html-canvas-css-and-javascript-on-autocode-132c8346e60c?source=collection_archive---------1-----------------------#2021-07-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="e77f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你好，有抱负的软件工程师！如果你正在读这篇文章，你很可能已经踏上了成为一名开发者的旅程。祝贺你承诺开始新的职业生涯！👏🏼</p><p id="cd09" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<a class="ae kl" href="https://janethl.medium.com/my-journey-to-becoming-a-software-engineer-91415b5e1210" rel="noopener">大会12周软件工程训练营</a>的旅程开始时，我承诺写博客和写教程。在前两周，我学习了HTML、CSS、Javascript、DOM操作和API。在我们的第三周，我们有五天的时间来应用我们的知识，并构建一个我们选择的游戏。我知道这将是一个艰难但有趣的挑战。我们在两周内学到了很多，我觉得我没有足够的时间来分离关注点和综合材料。我花了5天时间复习、阅读在线教程，并计划我的方法。就这样，我得以重现我最喜欢的童年游戏——<strong class="jp ir">俄罗斯方块</strong>！</p><p id="d328" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在本指南中，我将带您完成构建俄罗斯方块游戏的第一部分，以便您可以重新创建自己的游戏，并继续练习JavaScript、DOM操作和样式技能。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/8a2ee6d4427a160d4be8d5e4c2d47488.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yJ4vkIJoYeKbvMXzy4_Z4Q.png"/></div></div></figure><p id="8785" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们将首先设置我们的CSS、HTML和JavaScript文件，然后我将逐行解释JavaScript文件的代码。</p><p id="7267" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在开始之前，请务必浏览以下帮助我应对这一挑战的资源:</p><h2 id="224f" class="ky kz iq bd la lb lc dn ld le lf dp lg jy lh li lj kc lk ll lm kg ln lo lp lq bi translated">先决条件:</h2><ul class=""><li id="3468" class="lr ls iq jp b jq lt ju lu jy lv kc lw kg lx kk ly lz ma mb bi translated">👉🏽<a class="ae kl" href="https://www.w3schools.com/html/html_intro.asp" rel="noopener ugc nofollow" target="_blank"> HTML </a> —超文本标记语言通过标注标题、标题、段落、链接、按钮等元素告诉浏览器在我们的网站上显示什么内容。</li><li id="fd5f" class="lr ls iq jp b jq mc ju md jy me kc mf kg mg kk ly lz ma mb bi translated">👉🏽<a class="ae kl" href="https://www.w3schools.com/html/html5_canvas.asp" rel="noopener ugc nofollow" target="_blank"> HTML5 Canvas </a> — <code class="fe mh mi mj mk b">&lt;canvas&gt;</code>是一个HTML标签，用于通过脚本(通常是JavaScript)动态绘制图形。这是一个来自W3schools的很棒的教程，它帮助我发现了更多构建在canvas标签中的方法。</li><li id="09f6" class="lr ls iq jp b jq mc ju md jy me kc mf kg mg kk ly lz ma mb bi translated">👉🏽<a class="ae kl" href="https://www.w3schools.com/css/default.asp" rel="noopener ugc nofollow" target="_blank"> CSS </a> —级联样式表。如果HTML是一组告诉浏览器显示什么的指令，CSS告诉它如何显示。CSS可以改变文本字体、大小、颜色和页面上各种元素的布局，等等。</li><li id="fb7a" class="lr ls iq jp b jq mc ju md jy me kc mf kg mg kk ly lz ma mb bi translated">👉🏽<a class="ae kl" href="https://www.w3schools.com/js/js_htmldom.asp" rel="noopener ugc nofollow" target="_blank">HTML DOM(文档对象模型)</a> —当一个网页被加载时，浏览器创建一个页面的<strong class="jp ir"> D </strong>文档<strong class="jp ir"> O </strong>对象<strong class="jp ir"> M </strong>模型。使用HTML DOM，JavaScript可以访问和更改HTML文档的所有元素。</li></ul><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi ml"><img src="../Images/a99a58e3c6e83e4b1ac736f0f4a15697.png" data-original-src="https://miro.medium.com/v2/resize:fit:530/0*uvlzf5nYveaUjyTx"/></div></figure><ul class=""><li id="76fc" class="lr ls iq jp b jq jr ju jv jy mm kc mn kg mo kk ly lz ma mb bi translated">👉🏽JavaScript是一种功能强大的语言，有多种用途。在本教程中，我们将使用JavaScript通过DOM选择和操作HTML元素，并附加事件侦听器，当按钮或按键被按下时，事件侦听器将运行JavaScript函数。我建议看看我以前的教程👉🏽<a class="ae kl" rel="noopener ugc nofollow" target="_blank" href="/solving-coding-challenges-with-javascript-functions-on-autocode-8bd8ae059f6f">预先在Autocode </a>上用JavaScript函数解决编码难题。</li></ul><h2 id="a9b7" class="ky kz iq bd la lb lc dn ld le lf dp lg jy lh li lj kc lk ll lm kg ln lo lp lq bi translated">我们将做什么:</h2><p id="9ba2" class="pw-post-body-paragraph jn jo iq jp b jq lt js jt ju lu jw jx jy mp ka kb kc mq ke kf kg mr ki kj kk ij bi translated"><strong class="jp ir">-第一步:在</strong><a class="ae kl" href="http://Autocode.com" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir">Autocode</strong></a><strong class="jp ir"><br/>上建立自由账户-第二步:在</strong><a class="ae kl" href="http://Autocode.com" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir">Autocode</strong></a><strong class="jp ir"><br/>上建立index.html文件-第三步:在</strong><a class="ae kl" href="http://Autocode.com" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir"/></a><strong class="jp ir"><br/>上建立style.css文件-第四步:在</strong>上建立tetris.js文件</p><p id="d83d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在我们完成步骤1到4之后，我们将回顾代码。我将重点解释我们的<code class="fe mh mi mj mk b">tetris.js</code>文件，因为我希望你对<a class="ae kl" href="https://www.w3schools.com/html/html_intro.asp" rel="noopener ugc nofollow" target="_blank"> HTML </a>和<a class="ae kl" href="https://www.w3schools.com/css/default.asp" rel="noopener ugc nofollow" target="_blank"> CSS </a>有基本的了解。</p><p id="b0c5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果您完全是新手，请查看我在先决条件下列出的资源。如果您对任何代码有任何疑问，请联系我们！我会很乐意回答。</p><p id="a7ab" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们开始编码吧！🧑🏽‍💻👩🏽‍💻🚀</p><h1 id="b6e4" class="ms kz iq bd la mt mu mv ld mw mx my lg mz na nb lj nc nd ne lm nf ng nh lp ni bi translated">步骤1:在Autocode上设置一个免费帐户</h1><p id="3c29" class="pw-post-body-paragraph jn jo iq jp b jq lt js jt ju lu jw jx jy mp ka kb kc mq ke kf kg mr ki kj kk ij bi translated">我们将在<a class="ae kl" href="http://autocode.com/" rel="noopener ugc nofollow" target="_blank"> Autocode </a>上构建我们的游戏。虽然Autocode针对构建后端、API和自动化进行了优化，但它也是一个完整的在线代码编辑器，可以呈现和托管我们的HTML、CSS和JavaScript文件。Autocode使得发布我们的游戏变得非常简单，并且可以通过网络访问，而不用担心通过第三方服务设置主机。</p><p id="859c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">前往Autocode.com注册一个免费账户。选择将托管您的项目的子域，并设置密码。</p><p id="13ec" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">注册后，导航到您的<strong class="jp ir">项目管理</strong>仪表板，然后点击<strong class="jp ir">新项目。</strong></p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi nj"><img src="../Images/562f4108b1fd14acca518d93c671a2c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*mozll93nEd4d7ffb.png"/></div></div></figure><p id="4c4a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你将被带入<a class="ae kl" href="http://autocode.com/" rel="noopener ugc nofollow" target="_blank"> Autocode的</a> IDE。您将在左侧栏菜单中看到一个项目支架，其中已经包含一个名为<code class="fe mh mi mj mk b">www</code>的目录(文件夹),用于添加我们的项目资产和网页。此目录中的文件将自动转换为静态网页和资源。</p><p id="2492" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们从点击示例文件<code class="fe mh mi mj mk b">hello.html</code>开始。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi nk"><img src="../Images/07d70d65408a992bac47d8a33e038ea7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ucJnOzvTt5AzAFzGYRSzsQ.png"/></div></div></figure><h1 id="e310" class="ms kz iq bd la mt mu mv ld mw mx my lg mz na nb lj nc nd ne lm nf ng nh lp ni bi translated">步骤2:在Autocode上设置index.html文件</h1><p id="29a1" class="pw-post-body-paragraph jn jo iq jp b jq lt js jt ju lu jw jx jy mp ka kb kc mq ke kf kg mr ki kj kk ij bi translated">突出显示并删除<code class="fe mh mi mj mk b">hello.html</code>文件中的所有示例代码。我们将添加我们的代码。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi nl"><img src="../Images/767389d658799fa1890f92edc7e97ea2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Eh2wRXLx857aAcYW2nKocA.png"/></div></div></figure><p id="aa86" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们将HTML文件重命名为<code class="fe mh mi mj mk b">index.html</code>。右击<code class="fe mh mi mj mk b">hello.html</code>文件并选择<code class="fe mh mi mj mk b">rename file.</code></p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi nm"><img src="../Images/b645f3d35c56e4c2a8545705e518dae1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v9V6LPZ5dR69cjkQNpM5Lw.png"/></div></div></figure><p id="5782" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">像这样输入完整的路径名:<code class="fe mh mi mj mk b">www/index.html</code></p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi nn"><img src="../Images/68596aa9c106cb5d7ee429ee5e7eef3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3i-ef7Xwub01DeEeO2Xz2A.png"/></div></div></figure><p id="6dfb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在将下面的代码复制并粘贴到您的<code class="fe mh mi mj mk b">index.html</code>文件中。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="230f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">像这样:</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi nq"><img src="../Images/b724b2f98e4a3cacc2d4e199cca71713.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xuEbo_46gSDMxmHWMScdqw.png"/></div></div></figure><p id="8e50" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">选择绿色的<strong class="jp ir">运行</strong>按钮。<a class="ae kl" href="http://autocode.com" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> Autocode </strong> </a>会提示你给你的项目命名。</p><p id="5b24" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">请记住，您给项目起的名字将是自动生成的URL的一部分，以便通过网络访问您的游戏；我推荐这样一个名字:<code class="fe mh mi mj mk b">tetris-game.</code>。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi nr"><img src="../Images/93b6dd9845e07b2ca640955b24b30704.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cnfVmSQuGPRXb22SmvM9bg.png"/></div></div></figure><p id="d77a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">点击<strong class="jp ir">保存新项目。</strong></p><p id="d47f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">恭喜你。您已经为游戏部署了HTML页面。<a class="ae kl" href="http://autocode.com" rel="noopener ugc nofollow" target="_blank"> Autocode的</a>工具允许您在端点查看器窗口中预览您创建的页面:</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi ns"><img src="../Images/3dbaeaaae51d28f468651a9cf66ea87c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H-E2D13PpoNs4Tfnn4IbkA.png"/></div></div></figure><p id="57bc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您还可以通过单击代码编辑器左下角的链接，在web上实时检查您的页面。</p><p id="5054" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">很好，我们已经创建了游戏的基本视图，但是现在我们需要给它一些颜色和风格。</p><p id="3fbe" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们建立我们的CSS页面！</p><h1 id="47fe" class="ms kz iq bd la mt mu mv ld mw mx my lg mz na nb lj nc nd ne lm nf ng nh lp ni bi translated">步骤3:在Autocode上设置style.css文件</h1><p id="47e8" class="pw-post-body-paragraph jn jo iq jp b jq lt js jt ju lu jw jx jy mp ka kb kc mq ke kf kg mr ki kj kk ij bi translated">右键单击右侧的<code class="fe mh mi mj mk b">www</code>目录，选择<code class="fe mh mi mj mk b">New file.</code></p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi nt"><img src="../Images/c41007509b9844e64e3c65e0965949c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bReyWXkVG2lzgXX07yvcww.png"/></div></div></figure><p id="e17d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在命名文件<code class="fe mh mi mj mk b">www/style.css</code>时输入完整路径名。像这样:</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi nu"><img src="../Images/9425fbe3b3d870df052259ab399c0543.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lY62NZ_L5b3hOBB2uJJqiw.png"/></div></div></figure><p id="cbb9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">选择<strong class="jp ir">创建文件。您应该看到一个空的。css文件准备好CSS代码。</strong></p><p id="c4d8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">将以下代码复制并粘贴到您的<code class="fe mh mi mj mk b">style.css</code>文件中。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="4b8d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您的自动代码的IDE应该看起来像这样:</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi nv"><img src="../Images/0c9bf841f2306a1ca29562fc0c6dcca1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1L7onUxbKUZyE0Iqn1lNuA.png"/></div></div></figure><p id="b486" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">太好了！点击右下角的橙色<strong class="jp ir">保存</strong>按钮保存这些更改。</p><p id="2fec" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">回到你的<code class="fe mh mi mj mk b">index.html</code>文件中。</p><p id="6940" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe mh mi mj mk b">index.html</code>内点击绿色<strong class="jp ir">运行</strong>按钮一次。我们准备好预览我们对<code class="fe mh mi mj mk b">index.html</code>页面所做的样式了。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi nw"><img src="../Images/26dd3c15bedbe416300628d64d68bd17.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5Nzbac1MqkVsSA9NasD8OA.png"/></div></div></figure><p id="c5c2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当您单击为您的项目自动生成的URL时，您应该看到您的样式HTML页面在不同的选项卡中弹出。像这样:</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi nx"><img src="../Images/972309a35bb57b4070530b465805e417.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QCsg6YcarXsdEh4w0dFf3g.png"/></div></div></figure><h1 id="d6cb" class="ms kz iq bd la mt mu mv ld mw mx my lg mz na nb lj nc nd ne lm nf ng nh lp ni bi translated">步骤4:在Autocode上设置tetris.js文件</h1><p id="5d76" class="pw-post-body-paragraph jn jo iq jp b jq lt js jt ju lu jw jx jy mp ka kb kc mq ke kf kg mr ki kj kk ij bi translated">太好了！我们现在有了一个风格化的HTML页面来显示我们的游戏。你会注意到我们的按钮不起作用了。这是因为我们还没有添加Javascript逻辑。</p><p id="58ad" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">是时候添加一些JavaScript来创建我们的游戏了。</p><p id="046f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在您的<code class="fe mh mi mj mk b">www</code>目录中创建一个<code class="fe mh mi mj mk b">tetris.js</code>文件，就像我们对<code class="fe mh mi mj mk b">index.html</code>和<code class="fe mh mi mj mk b">style.css</code>文件所做的那样。如下命名文件时添加完整路径名:<code class="fe mh mi mj mk b">www/tetris.js</code></p><p id="c167" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">将以下代码复制并粘贴到文件中。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="bd86" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您的<code class="fe mh mi mj mk b">tetris.js</code>文件应该如下所示:</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi ny"><img src="../Images/ea492dedc6edb52ef051c4aa48f9e798.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jQ9gmyDY74q4g1_xrz5ilw.png"/></div></div></figure><p id="2be3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">点击右下角的橙色<strong class="jp ir">保存</strong>按钮保存您的<code class="fe mh mi mj mk b">tetris.js</code>文件。我们已经准备好预览我们添加到游戏中的功能。返回<code class="fe mh mi mj mk b">index.html.</code>点击绿色<strong class="jp ir">运行</strong>按钮。</p><p id="cecf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您可以通过单击端点查看器窗口上的<strong class="jp ir">开始</strong>按钮来测试游戏的功能。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi nz"><img src="../Images/04caca42715a5e60165bc2376a53927f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DjnafsRT64PKx1dTTWcTSA.png"/></div></div></figure><p id="d279" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">或者，你可以点击自动生成的网址来测试你的游戏从一个新的标签。使用<strong class="jp ir"> A </strong>和<strong class="jp ir"> D </strong>键旋转您的俄罗斯方块，并使用<strong class="jp ir">向下</strong>、<strong class="jp ir">向左、</strong>和<strong class="jp ir">向右</strong>箭头键相应地移动方块。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi nx"><img src="../Images/972309a35bb57b4070530b465805e417.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QCsg6YcarXsdEh4w0dFf3g.png"/></div></div></figure><p id="b423" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">做得很好，坚持到教程的这一步！是时候回顾一下我们的代码了！</p><h1 id="aff7" class="ms kz iq bd la mt mu mv ld mw mx my lg mz na nb lj nc nd ne lm nf ng nh lp ni bi translated">审查index.html和style.css代码</h1><h2 id="8446" class="ky kz iq bd la lb lc dn ld le lf dp lg jy lh li lj kc lk ll lm kg ln lo lp lq bi translated">将<code class="fe mh mi mj mk b">index.html</code>链接到<code class="fe mh mi mj mk b">style.css</code>和<code class="fe mh mi mj mk b">tetris.js</code>:</h2><p id="ee57" class="pw-post-body-paragraph jn jo iq jp b jq lt js jt ju lu jw jx jy mp ka kb kc mq ke kf kg mr ki kj kk ij bi translated">我们必须将我们的<code class="fe mh mi mj mk b">.css</code> <code class="fe mh mi mj mk b">.js</code>文件链接到<code class="fe mh mi mj mk b">.html</code>文件，以便它们能够相互交流。</p><p id="5082" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们将<code class="fe mh mi mj mk b">.css</code>文件与HTML文件放在同一个文件夹中，因此我们通过使用<code class="fe mh mi mj mk b">&lt;head&gt;</code>元素中的<code class="fe mh mi mj mk b"><a class="ae kl" href="https://www.bitdegree.org/learn/html-link-tag" rel="noopener ugc nofollow" target="_blank">&lt;link&gt;</a></code>元素将CSS链接到HTML，如下所示:</p><pre class="kn ko kp kq gt oa mk ob oc aw od bi"><span id="b363" class="ky kz iq mk b gy oe of l og oh">&lt;link rel="stylesheet" href="style.css"&gt;</span></pre><p id="d2ec" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们也导入街机风格的字体<a class="ae kl" href="https://fonts.google.com/specimen/Press+Start+2P" rel="noopener ugc nofollow" target="_blank">在第10行按Start 2p </a>。在导入和链接我们的文件后，该字体现在可以在<code class="fe mh mi mj mk b">style.css</code>文件中使用。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi oi"><img src="../Images/41a642087010c1f399486fd10904e9a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fINLjqPLvH77-IccABYt2g.png"/></div></div></figure><p id="23ed" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在第40行的<code class="fe mh mi mj mk b">index.html</code>文件末尾，我们使用<code class="fe mh mi mj mk b">&lt;script&gt;</code>元素添加了对JavaScript文件的引用:</p><pre class="kn ko kp kq gt oa mk ob oc aw od bi"><span id="ca75" class="ky kz iq mk b gy oe of l og oh">&lt;script src="tetris.js"&gt;&lt;/script&gt;</span></pre><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi oj"><img src="../Images/6b80a318ce0a1b1a8a0458c2fd33cf64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BjcSm0ps1BnLr8njUKRrkQ.png"/></div></div></figure><p id="6f7b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在就交给你了<code class="fe mh mi mj mk b"><strong class="jp ir">style.css</strong></code> <strong class="jp ir">文件:</strong></p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi ok"><img src="../Images/ac4ba5c707ef0ad8b4c17568b869830e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p6hI8mc5lbGH3bcxnc2YGw.png"/></div></div></figure><p id="1c80" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在我们的<code class="fe mh mi mj mk b">style.css </code>文件中，我们将<code class="fe mh mi mj mk b">family-font</code>属性定义为<code class="fe mh mi mj mk b">&lt;h2&gt;</code> <code class="fe mh mi mj mk b">&lt;h3&gt;</code> <code class="fe mh mi mj mk b">&lt;h4&gt;</code> <code class="fe mh mi mj mk b">&lt;p&gt;</code>元素的<code class="fe mh mi mj mk b">Press Start 2P, monospace</code>；以及id属性为<code class="fe mh mi mj mk b">#instructions2</code> <code class="fe mh mi mj mk b">#start</code> <code class="fe mh mi mj mk b">#reset.</code>的按钮元素</p><h1 id="f3ff" class="ms kz iq bd la mt mu mv ld mw mx my lg mz na nb lj nc nd ne lm nf ng nh lp ni bi translated">回顾我们的tetris.js代码</h1><h2 id="c9f2" class="ky kz iq bd la lb lc dn ld le lf dp lg jy lh li lj kc lk ll lm kg ln lo lp lq bi translated">第1–7行使用HTML DOM方法访问元素:</h2><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi ol"><img src="../Images/026982f19bf8200ece9ed6091052a78a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SC944B4cAfvSKWU70KWudg.png"/></div></div></figure><p id="1fc8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们从分析我们的<code class="fe mh mi mj mk b">tetris.js</code>文件中的前七行代码开始。</p><p id="f52b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这里我们<a class="ae kl" href="https://www.w3schools.com/js/js_const.asp" rel="noopener ugc nofollow" target="_blank">为画布、按钮和模态定义变量</a>来通过Javascript操作DOM。</p><p id="64e7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了访问HTML页面中的元素，我们总是从访问<code class="fe mh mi mj mk b">document</code>对象开始。对象充当一个接口，允许我们对HTML文档进行编程。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi ml"><img src="../Images/a99a58e3c6e83e4b1ac736f0f4a15697.png" data-original-src="https://miro.medium.com/v2/resize:fit:530/0*uvlzf5nYveaUjyTx"/></div></figure><p id="25ac" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们使用HTML DOM方法<code class="fe mh mi mj mk b"><a class="ae kl" href="https://www.w3schools.com/js/js_htmldom_methods.asp" rel="noopener ugc nofollow" target="_blank">getElementById()</a></code>来访问画布。</p><pre class="kn ko kp kq gt oa mk ob oc aw od bi"><span id="5bc4" class="ky kz iq mk b gy oe of l og oh">const canvas = document.getElementById("tetris");</span></pre><p id="b169" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后我们使用内置对象<code class="fe mh mi mj mk b"><a class="ae kl" href="https://www.w3schools.com/graphics/canvas_drawing.asp" rel="noopener ugc nofollow" target="_blank">getContext()</a></code>，它将为我们提供在画布上绘图的属性和方法。</p><pre class="kn ko kp kq gt oa mk ob oc aw od bi"><span id="7a89" class="ky kz iq mk b gy oe of l og oh">const ctx = canvas.getContext(“2d”)</span></pre><p id="2774" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们使用方法<code class="fe mh mi mj mk b"><a class="ae kl" href="https://www.w3schools.com/js/js_htmldom_methods.asp" rel="noopener ugc nofollow" target="_blank">getElementById()</a></code>来访问我们的<code class="fe mh mi mj mk b">&lt;button&gt;</code>和<code class="fe mh mi mj mk b">&lt;modal&gt;</code>元素。方法<code class="fe mh mi mj mk b"><a class="ae kl" href="https://www.w3schools.com/jsref/met_document_getelementsbyclassname.asp" rel="noopener ugc nofollow" target="_blank">getElementByClassName()</a></code>让我们可以访问第一个<code class="fe mh mi mj mk b">&lt;close&gt;</code>元素。</p><pre class="kn ko kp kq gt oa mk ob oc aw od bi"><span id="1391" class="ky kz iq mk b gy oe of l og oh">const span = document.getElementsByClassName("close")[0];</span></pre><p id="9fb5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<strong class="jp ir">第9行，</strong>我们使用<a class="ae kl" href="https://www.w3schools.com/tags/canvas_scale.asp" rel="noopener ugc nofollow" target="_blank">方法</a> <code class="fe mh mi mj mk b"><a class="ae kl" href="https://www.w3schools.com/tags/canvas_scale.asp" rel="noopener ugc nofollow" target="_blank">s</a>cale()</code>将画布的宽度和高度缩放20。尝试将其注释掉，然后再次部署以测试会发生什么！*你可能需要放大才能看到落下的俄罗斯方块。</p><pre class="kn ko kp kq gt oa mk ob oc aw od bi"><span id="0338" class="ky kz iq mk b gy oe of l og oh">ctx.scale(20,20);</span></pre><h2 id="f0a2" class="ky kz iq bd la lb lc dn ld le lf dp lg jy lh li lj kc lk ll lm kg ln lo lp lq bi translated">使用<code class="fe mh mi mj mk b"><a class="ae kl" href="https://www.w3schools.com/jsref/met_document_addeventlistener.asp" rel="noopener ugc nofollow" target="_blank">AddEventListener(</a>) method</code>的第11–32行</h2><p id="f8f0" class="pw-post-body-paragraph jn jo iq jp b jq lt js jt ju lu jw jx jy mp ka kb kc mq ke kf kg mr ki kj kk ij bi translated">我们使用方法<code class="fe mh mi mj mk b"><a class="ae kl" href="https://www.w3schools.com/jsref/met_document_addeventlistener.asp" rel="noopener ugc nofollow" target="_blank">addEventListener()</a></code>对启动、复位、指令和关闭<code class="fe mh mi mj mk b">&lt;button&gt;</code>元素进行编程。让我们分析每个事件监听器:</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi om"><img src="../Images/30cd2ec4ec5cbe2437534232e7ee6855.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gfBxxanvYpGMrT1ds9QSXQ.png"/></div></div></figure><p id="9dfc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">第11 -14行start button . addevent listener()</strong></p><pre class="kn ko kp kq gt oa mk ob oc aw od bi"><span id="46c7" class="ky kz iq mk b gy oe of l og oh">startButton.addEventListener("click", () =&gt; {<br/>  update();<br/>  startButton.style.display = "none";<br/>});</span></pre><p id="7ae1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这里我们给<code class="fe mh mi mj mk b">startButton</code>添加了一个事件监听器，这样每次点击按钮时都会调用这个函数。这个<code class="fe mh mi mj mk b">update()</code>函数负责绘制和放下俄罗斯方块。一旦<code class="fe mh mi mj mk b">startButton</code>被点击，按钮就会消失，因为我们已经将<code class="fe mh mi mj mk b">display</code>属性设置为<code class="fe mh mi mj mk b">none</code>。</p><p id="8729" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">第16–18行reset button . addevent listener()</strong></p><pre class="kn ko kp kq gt oa mk ob oc aw od bi"><span id="a5e7" class="ky kz iq mk b gy oe of l og oh">resetButton.addEventListener("click", () =&gt; {<br/>  location.reload();<br/>});</span></pre><p id="4212" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这里我们给<code class="fe mh mi mj mk b">resetButton</code>添加了一个事件监听器，这样每次点击按钮时都会调用<code class="fe mh mi mj mk b">reload() </code>方法。<code class="fe mh mi mj mk b"><a class="ae kl" href="https://www.w3schools.com/jsref/met_loc_reload.asp" rel="noopener ugc nofollow" target="_blank">reload()</a></code>方法用于重新加载当前文档。</p><p id="1871" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">第20–22行指令Button.addEventListener() </strong></p><pre class="kn ko kp kq gt oa mk ob oc aw od bi"><span id="9f8c" class="ky kz iq mk b gy oe of l og oh">instructionsButton.addEventListener("click", () =&gt; {<br/>  modal.style.display = "block";<br/>});</span></pre><p id="fc94" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们给<code class="fe mh mi mj mk b">instructionsButton</code>添加了一个事件监听器，这样每次点击按钮时，都会出现模态，因为我们已经将<code class="fe mh mi mj mk b">display</code>属性设置为<code class="fe mh mi mj mk b">block.</code></p><p id="69e7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">第24–32行span.addEventListener() </strong></p><p id="c534" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这里我们有两种方法来关闭当指令按钮被点击时出现的模态。</p><pre class="kn ko kp kq gt oa mk ob oc aw od bi"><span id="2dcb" class="ky kz iq mk b gy oe of l og oh">span.addEventListener("click", () =&gt; {<br/>  modal.style.display = "none";<br/>});</span></pre><ol class=""><li id="51b7" class="lr ls iq jp b jq jr ju jv jy mm kc mn kg mo kk on lz ma mb bi translated">我们添加了一个事件监听器，用于当<code class="fe mh mi mj mk b">&lt;close&gt;</code>元素被点击时，并将模态显示样式设置为<code class="fe mh mi mj mk b">none</code>。</li></ol><pre class="kn ko kp kq gt oa mk ob oc aw od bi"><span id="d8a5" class="ky kz iq mk b gy oe of l og oh">window.onclick = function (event) {<br/>  if (event.target == modal) {<br/>    modal.style.display = "none";<br/>  }<br/>};</span></pre><p id="add2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2.我们使用<code class="fe mh mi mj mk b"><a class="ae kl" href="https://www.w3schools.com/jsref/event_onclick.asp" rel="noopener ugc nofollow" target="_blank">.onClick()</a></code>方法来检测窗口中的任何区域何时被点击，并添加<code class="fe mh mi mj mk b">if</code>语句来检查我们的模态是否打开。如果它是打开的，当我们窗口的任何部分被点击时，我们将模态显示样式设置为<code class="fe mh mi mj mk b">none</code>。</p><p id="95c0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">第34–38行:创建俄罗斯方块</strong></p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi oo"><img src="../Images/a9f745b6fd1002fb956161e19b2a1936.png" data-original-src="https://miro.medium.com/v2/resize:fit:968/format:webp/0*PKI0N2bGErUcGDUZ.png"/></div></figure><p id="d36f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">字母I、L、J、T、O、S和Z类似于俄罗斯方块的形状。最终，我们将添加所有七个部分；现在，我们开始用S形俄罗斯方块画出游戏的功能。</p><pre class="kn ko kp kq gt oa mk ob oc aw od bi"><span id="9bf4" class="ky kz iq mk b gy oe of l og oh">const piece = [<br/>    [0, 0, 0],<br/>    [0, 1, 1],<br/>    [1, 1, 0],<br/>]</span></pre><p id="24b5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们可以通过声明一个变量<code class="fe mh mi mj mk b">piece</code>并给它分配一个填充了0和1的数组的值来构建这一部分。数字1将代表彩色细胞。我们添加了一行额外的0，以方便我们旋转棋子。</p><p id="41e7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">第40–53行为我们的游戏创建场地</strong></p><p id="42d9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，我们创建一个字段，允许我们绘制下落的棋子并跟踪我们的棋子堆栈。</p><p id="67ab" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们使用2D阵列，也称为矩阵，来表示我们的场。我们的区域由单元格组成，这些单元格将填充数字<code class="fe mh mi mj mk b">0-7.</code>我们将使用<code class="fe mh mi mj mk b">0</code>来表示空单元格，并使用<code class="fe mh mi mj mk b">1–7 </code>来表示每个俄罗斯方块/颜色。</p><p id="8a16" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先，编写一个函数来创建我们的矩阵，它接受宽度和高度并用<code class="fe mh mi mj mk b">0</code>填充我们的行。</p><p id="8e77" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们为matrix初始化一个空数组，我们使用一个<a class="ae kl" href="https://www.w3schools.com/js/js_loop_while.asp" rel="noopener ugc nofollow" target="_blank"> while循环</a>来告诉我们的函数，只要高度不为0，我们就将高度减少1，并推入一个新的宽度为<code class="fe mh mi mj mk b">w</code>的数组，并用<code class="fe mh mi mj mk b">0.</code>填充它。我们使用<code class="fe mh mi mj mk b"><a class="ae kl" href="https://flexiple.com/fill-javascript-array/#:~:text=The%20fill()%20method%2C%20fills,the%20whole%20array%20is%20filled.&amp;text=One%20thing%20to%20keep%20in,modifies%20the%20original%2Fgiven%20array." rel="noopener ugc nofollow" target="_blank">fill()</a></code> <a class="ae kl" href="https://flexiple.com/fill-javascript-array/#:~:text=The%20fill()%20method%2C%20fills,the%20whole%20array%20is%20filled.&amp;text=One%20thing%20to%20keep%20in,modifies%20the%20original%2Fgiven%20array." rel="noopener ugc nofollow" target="_blank">数组方法</a>用一个静态值填充我们的单元格。</p><pre class="kn ko kp kq gt oa mk ob oc aw od bi"><span id="31ad" class="ky kz iq mk b gy oe of l og oh">function createMatrix(w, h) {<br/>  const matrix = [];<br/>  while (h--) {<br/>    matrix.push(new Array(w).fill(0));<br/>  }<br/>  return matrix;<br/>}</span></pre><p id="3f41" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后我们通过使用<code class="fe mh mi mj mk b">createMatrix()</code>函数并传入宽度<code class="fe mh mi mj mk b">12</code>和高度<code class="fe mh mi mj mk b">20.</code>来创建游戏的<code class="fe mh mi mj mk b">field</code></p><p id="1e1a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这样来查看我们的<code class="fe mh mi mj mk b">console.log()</code> <code class="fe mh mi mj mk b">field</code>字段:</p><pre class="kn ko kp kq gt oa mk ob oc aw od bi"><span id="ff05" class="ky kz iq mk b gy oe of l og oh">const field = createMatrix(12, 20);<br/>console.log(field)</span></pre><p id="237b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在浏览器中打开您的开发人员工具，并检查您的控制台。您将看到我们创建的字段。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi op"><img src="../Images/60745b549767ea28dc58c3731a752833.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VTarLxYkfUWZzytuqjQT1A.png"/></div></div></figure><p id="a001" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这个2D数组中，我们用一个数字数组来表示一个有12个元素的行，用一个20行的数组来表示字段。</p><p id="533b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们还可以使用<code class="fe mh mi mj mk b"><a class="ae kl" href="https://www.w3schools.com/jsref/met_console_table.asp" rel="noopener ugc nofollow" target="_blank">console.table()</a></code>方法在控制台中以表格的形式查看字段。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi oq"><img src="../Images/f0d9fd1cabd968f0cc55b4bb619afbbb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gNt1ocTb85qS4bnHVCs_Ig.png"/></div></div></figure><p id="e961" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">第52–55行添加玩家</strong></p><pre class="kn ko kp kq gt oa mk ob oc aw od bi"><span id="ee00" class="ky kz iq mk b gy oe of l og oh">const player = {<br/>  pos: { x: 5, y: -2 },<br/>  piece: piece,<br/>};</span></pre><p id="0df5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们声明了一个<code class="fe mh mi mj mk b">player</code>变量，并在<code class="fe mh mi mj mk b">x = 5</code>和<code class="fe mh mi mj mk b"> y = -2</code>处定义了它的位置，因为我们希望第一个俄罗斯方块从我们的区域上方的中心落下。我们还给玩家一个俄罗斯方块<code class="fe mh mi mj mk b">piece</code>。</p><p id="9413" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">第57–66行绘制俄罗斯方块</strong></p><pre class="kn ko kp kq gt oa mk ob oc aw od bi"><span id="319c" class="ky kz iq mk b gy oe of l og oh">function drawPiece(piece, offset) {<br/>  piece.forEach((row, y) =&gt; {<br/>    row.forEach((value, x) =&gt; {<br/>      if (value !== 0) {<br/>        ctx.fillStyle = "blue";<br/>        ctx.fillRect(x + offset.x, y + offset.y, 1, 1);<br/>      }<br/>    });<br/>  });<br/>}</span></pre><p id="74b1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这里我们创建一个<code class="fe mh mi mj mk b">drawPiece()</code>函数来绘制第一个俄罗斯方块。</p><ul class=""><li id="b725" class="lr ls iq jp b jq jr ju jv jy mm kc mn kg mo kk ly lz ma mb bi translated">我们使用<code class="fe mh mi mj mk b">forEach()</code>方法来获取每个<code class="fe mh mi mj mk b">row</code>和<code class="fe mh mi mj mk b">y</code>索引。</li><li id="e898" class="lr ls iq jp b jq mc ju md jy me kc mf kg mg kk ly lz ma mb bi translated">然后我们迭代该行，并使用<code class="fe mh mi mj mk b">forEach()</code>获取值和<code class="fe mh mi mj mk b">x</code>索引。</li><li id="82c5" class="lr ls iq jp b jq mc ju md jy me kc mf kg mg kk ly lz ma mb bi translated">我们添加一个条件语句<code class="fe mh mi mj mk b">if</code>来检查值是否不等于<code class="fe mh mi mj mk b">0.<br/></code>，如果不等于<code class="fe mh mi mj mk b">0</code>，那么我们绘制单元格<code class="fe mh mi mj mk b">blue</code>。如果是<code class="fe mh mi mj mk b">0</code>，我们就跳过它。</li><li id="a9e9" class="lr ls iq jp b jq mc ju md jy me kc mf kg mg kk ly lz ma mb bi translated">我们添加了<code class="fe mh mi mj mk b">offset</code>，这样我们就可以在编程按键时移动棋子。</li></ul><p id="47cb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">第68–73行重复绘制棋子</strong></p><pre class="kn ko kp kq gt oa mk ob oc aw od bi"><span id="fbfe" class="ky kz iq mk b gy oe of l og oh">function draw() {<br/>  ctx.fillStyle = "black";<br/>  ctx.fillRect(0, 0, canvas.width, canvas.height);<br/>  drawPiece(field, { x: 0, y: 0 });<br/>  drawPiece(player.piece, player.pos);<br/>}</span></pre><p id="d371" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们创建了一个<code class="fe mh mi mj mk b">draw()</code>函数来绘制我们的棋子，并将玩家的棋子和位置传递给<code class="fe mh mi mj mk b">drawPiece()</code>函数。</p><ul class=""><li id="dad9" class="lr ls iq jp b jq jr ju jv jy mm kc mn kg mo kk ly lz ma mb bi translated">这个<code class="fe mh mi mj mk b">draw()</code>函数也会在<code class="fe mh mi mj mk b">update()</code>函数内被调用来反复绘制我们的游戏。</li><li id="9c98" class="lr ls iq jp b jq mc ju md jy me kc mf kg mg kk ly lz ma mb bi translated">我们必须清理我们的能量场；否则，每次调用函数时都会绘制我们的部分。为此，我们从x坐标0和y坐标0开始将<code class="fe mh mi mj mk b"> ctx.fillstyle</code>设置为<code class="fe mh mi mj mk b">black</code>，并包含整个画布的宽度和高度。</li><li id="c6f5" class="lr ls iq jp b jq mc ju md jy me kc mf kg mg kk ly lz ma mb bi translated">在同一个<code class="fe mh mi mj mk b">draw()</code>函数中，我们再次使用<code class="fe mh mi mj mk b">drawPiece()</code>从x坐标0和y坐标0开始绘制单元格。</li></ul><p id="c979" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">第76–96行使用requestAnimationFrame()并删除我们的片段</strong></p><pre class="kn ko kp kq gt oa mk ob oc aw od bi"><span id="ac4d" class="ky kz iq mk b gy oe of l og oh">let dCounter = 0;<br/>let dropInterval = 500;<br/>let lastTime = 0;</span><span id="904f" class="ky kz iq mk b gy or of l og oh">function update(time = 0) {<br/>  const deltaTime = time - lastTime;<br/>  lastTime = time;<br/>  dCounter += deltaTime;<br/>  if (dCounter &gt; dropInterval) {<br/>    player.pos.y++;<br/>    if (collide(field, player)) {<br/>      player.pos.y--;<br/>      join(field, player);<br/>      player.pos.y = 0;<br/>    }<br/>    dCounter = 0;<br/>  }</span><span id="382c" class="ky kz iq mk b gy or of l og oh">draw();<br/>  requestAnimationFrame(update);<br/>}</span></pre><p id="39e8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这里我们创建了负责启动游戏的<code class="fe mh mi mj mk b">update()</code>函数。它调用了<code class="fe mh mi mj mk b">draw()</code>函数和<code class="fe mh mi mj mk b">requestAnimationFrame()</code>方法。</p><p id="155e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先，我们定义了一个变量<code class="fe mh mi mj mk b">dCounter</code>,默认为<code class="fe mh mi mj mk b">0</code>,以帮助我们将部分移回顶部。我们添加了一个设置为<code class="fe mh mi mj mk b">500</code>毫秒的<code class="fe mh mi mj mk b">dropInterval</code>变量，这样我们的棋子每1/2秒掉一次。为了得到我们的帧之间的时间差(<code class="fe mh mi mj mk b">deltaTime</code>)，我们设置一个变量<code class="fe mh mi mj mk b">lastTime</code>等于<code class="fe mh mi mj mk b">0.</code> <code class="fe mh mi mj mk b">DeltaTime</code>对于动画来说是一个有用的变量，它包含了前一帧的开始和当前帧的开始之间的时间差，以毫秒为单位。</p><ul class=""><li id="9403" class="lr ls iq jp b jq jr ju jv jy mm kc mn kg mo kk ly lz ma mb bi translated">我们使用<code class="fe mh mi mj mk b"><a class="ae kl" href="https://developer.mozilla.org/en-US/docs/Web/API/window/requestAnimationFrame" rel="noopener ugc nofollow" target="_blank">requestAnimationFrame()</a></code>通过抓取时间并默认为0来丢弃棋子。</li><li id="d8db" class="lr ls iq jp b jq mc ju md jy me kc mf kg mg kk ly lz ma mb bi translated">然后，我们将丢弃计数加到前一帧和当前帧之间的差值上。</li><li id="2ffd" class="lr ls iq jp b jq mc ju md jy me kc mf kg mg kk ly lz ma mb bi translated">我们添加一个if语句来检查<code class="fe mh mi mj mk b">dCounter</code>是否大于<code class="fe mh mi mj mk b">dropInterval.</code>如果是，那么我们将我们的玩家棋子位置沿y轴(y++)移动。</li><li id="1c65" class="lr ls iq jp b jq mc ju md jy me kc mf kg mg kk ly lz ma mb bi translated">如果棋子掉落并碰撞，这意味着该棋子接触到了屏幕底部或另一个棋子，因此我们将玩家的棋子沿y轴上移一位。</li><li id="8181" class="lr ls iq jp b jq mc ju md jy me kc mf kg mg kk ly lz ma mb bi translated">然后我们将玩家的棋子放在最上面重新开始</li></ul><p id="9fa3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">第98–106行join()函数</strong></p><pre class="kn ko kp kq gt oa mk ob oc aw od bi"><span id="4b0f" class="ky kz iq mk b gy oe of l og oh">function join(field, player) {<br/>  player.piece.forEach((row, y) =&gt; {<br/>    row.forEach((value, x) =&gt; {<br/>      if (value !== 0) {<br/>        field[y + player.pos.y][x + player.pos.x] = value;<br/>      }<br/>    });<br/>  });<br/>}</span></pre><p id="bbf0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这里我们创建了<code class="fe mh mi mj mk b">join()</code>函数来打印玩家的棋子位置。它将玩家的棋子位置复制到场上。</p><p id="5e9d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">线108–119碰撞检测</strong></p><pre class="kn ko kp kq gt oa mk ob oc aw od bi"><span id="6705" class="ky kz iq mk b gy oe of l og oh">function collide(field, player) {<br/>  const b = player.piece;<br/>  const o = player.pos;<br/>  for (let y = 0; y &lt; b.length; y++) {<br/>    for (let x = 0; x &lt; b[y].length; x++) {<br/>      if (b[y][x] !== 0 &amp;&amp; (field[y + o.y] &amp;&amp; field[y + o.y][x + o.x]) !== 0) {<br/>        return true;<br/>      }<br/>    }<br/>  }<br/>  return false;<br/>}</span></pre><p id="8e19" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们创建了一个<code class="fe mh mi mj mk b">collide()</code>函数来检查我们的域上哪里的方块不为零。</p><ul class=""><li id="9d04" class="lr ls iq jp b jq jr ju jv jy mm kc mn kg mo kk ly lz ma mb bi translated">我们将棋子和位置赋给变量<code class="fe mh mi mj mk b">b</code> &amp; <code class="fe mh mi mj mk b">o</code>，保存我们棋子的位置</li><li id="bedd" class="lr ls iq jp b jq mc ju md jy me kc mf kg mg kk ly lz ma mb bi translated">我们使用for循环遍历行(y)来迭代玩家棋子位置</li><li id="f143" class="lr ls iq jp b jq mc ju md jy me kc mf kg mg kk ly lz ma mb bi translated">我们使用for循环来遍历x</li><li id="026f" class="lr ls iq jp b jq mc ju md jy me kc mf kg mg kk ly lz ma mb bi translated">我们添加一个条件语句来检查播放器的棋子位置是否不为零，以及<code class="fe mh mi mj mk b">fields</code>行(y)是否存在。</li><li id="242b" class="lr ls iq jp b jq mc ju md jy me kc mf kg mg kk ly lz ma mb bi translated">如果字段行(y)不存在，它将被视为冲突</li><li id="7840" class="lr ls iq jp b jq mc ju md jy me kc mf kg mg kk ly lz ma mb bi translated">如果存在，则抓取子(x)，如果不为零(则碰撞)，则返回<code class="fe mh mi mj mk b">true</code></li><li id="6e89" class="lr ls iq jp b jq mc ju md jy me kc mf kg mg kk ly lz ma mb bi translated">如果条件不为<code class="fe mh mi mj mk b">0</code>，则返回false</li></ul><p id="b679" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">121–132线旋转件</strong></p><pre class="kn ko kp kq gt oa mk ob oc aw od bi"><span id="bea4" class="ky kz iq mk b gy oe of l og oh">function rotate(piece, control) {<br/>  for (let y = 0; y &lt; piece.length; y++) {<br/>    for (let x = 0; x &lt; y; x++) {<br/>      [piece[x][y], piece[y][x]] = [piece[y][x], piece[x][y]];<br/>    }<br/>  }<br/>  if (control &gt; 0) {<br/>    piece.forEach((row) =&gt; row.reverse());<br/>  } else {<br/>    piece.reverse();<br/>  }<br/>}</span></pre><p id="e603" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这里我们创建一个<code class="fe mh mi mj mk b">rotate()</code>函数，它接受一个<code class="fe mh mi mj mk b">piece</code>和一个<code class="fe mh mi mj mk b">control</code>。该功能使用<code class="fe mh mi mj mk b"><a class="ae kl" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reverse" rel="noopener ugc nofollow" target="_blank">reverse()</a></code> <a class="ae kl" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reverse" rel="noopener ugc nofollow" target="_blank">方法</a>将棋子的行<code class="fe mh mi mj mk b">(y)</code>转换成列。</p><p id="112a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">第134–195行添加关键控件</strong></p><p id="fc81" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这部分对我来说很有挑战性。在您尝试之前，请查看本教程，它解释了如何使用<code class="fe mh mi mj mk b">addEventListener()</code>方法编程按键来监听<code class="fe mh mi mj mk b">keydown</code>事件。</p><div class="os ot gp gr ou ov"><a href="https://www.freecodecamp.org/news/javascript-keycode-list-keypress-event-key-codes/" rel="noopener  ugc nofollow" target="_blank"><div class="ow ab fo"><div class="ox ab oy cl cj oz"><h2 class="bd ir gy z fp pa fr fs pb fu fw ip bi translated">JavaScript键码列表Enter、Space、Backspace等键的按键事件键码</h2><div class="pc l"><h3 class="bd b gy z fp pa fr fs pb fu fw dk translated">JavaScript键盘事件帮助您捕获用户与键盘的交互。像许多其他JavaScript事件一样…</h3></div><div class="pd l"><p class="bd b dl z fp pa fr fs pb fu fw dk translated">www.freecodecamp.org</p></div></div><div class="pe l"><div class="pf l pg ph pi pe pj kw ov"/></div></div></a></div><p id="b560" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们使用带有<code class="fe mh mi mj mk b">if..else</code>语句的方法<code class="fe mh mi mj mk b">addEventListener()</code>设置一个事件监听器，以检测何时按下键<strong class="jp ir"> 37 </strong>(左箭头)、键<strong class="jp ir"> 39 </strong>(右箭头)、键<strong class="jp ir"> 40 </strong>(下箭头)、键<strong class="jp ir"> 65 </strong> (A)和键<strong class="jp ir"> 68 </strong> (D)。你可以使用以下网站找到任何关键的代码:https://keycode.info/很快。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="no np l"/></div></figure><h1 id="69f2" class="ms kz iq bd la mt mu mv ld mw mx my lg mz na nb lj nc nd ne lm nf ng nh lp ni bi translated">挑战自我😎</h1><ul class=""><li id="6b68" class="lr ls iq jp b jq lt ju lu jy lv kc lw kg lx kk ly lz ma mb bi translated">用if语句再创建6个块</li><li id="4351" class="lr ls iq jp b jq mc ju md jy me kc mf kg mg kk ly lz ma mb bi translated">创建一个函数来随机选择一个块</li><li id="4f41" class="lr ls iq jp b jq mc ju md jy me kc mf kg mg kk ly lz ma mb bi translated">向块添加颜色</li><li id="6dc7" class="lr ls iq jp b jq mc ju md jy me kc mf kg mg kk ly lz ma mb bi translated">在屏幕上添加游戏</li><li id="f388" class="lr ls iq jp b jq mc ju md jy me kc mf kg mg kk ly lz ma mb bi translated">使用for循环对已填充的行进行计数，并在填满后清除行</li><li id="e1f1" class="lr ls iq jp b jq mc ju md jy me kc mf kg mg kk ly lz ma mb bi translated">添加一个更新分数的函数</li><li id="a0ec" class="lr ls iq jp b jq mc ju md jy me kc mf kg mg kk ly lz ma mb bi translated">使用来自<a class="ae kl" href="https://autocode.com/lib/utils/sms/" rel="noopener ugc nofollow" target="_blank"> Autocode的标准库</a>的SMS API添加SMS功能，挑战朋友以击败您的高分</li></ul><h2 id="d094" class="ky kz iq bd la lb lc dn ld le lf dp lg jy lh li lj kc lk ll lm kg ln lo lp lq bi translated">谢谢你和我一起建设！🥳</h2><p id="d7c7" class="pw-post-body-paragraph jn jo iq jp b jq lt js jt ju lu jw jx jy mp ka kb kc mq ke kf kg mr ki kj kk ij bi translated">我们做到了！我希望这是一种有趣的方式来回顾我们的CSS、HTML、DOM操作、JavaScript和逻辑创建。我鼓励你继续完善这个游戏。如果我能帮上什么忙，请尽管开口。我的电子邮件是ledezmajane@berkeley.edu。也可以发微博<a class="ae kl" href="https://twitter.com/ms_ledezma" rel="noopener ugc nofollow" target="_blank"> @ms_ledezma </a>。</p></div></div>    
</body>
</html>