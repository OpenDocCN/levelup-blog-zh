<html>
<head>
<title>Do You Even Draft? — Pumping Up Font Sizes in Draft.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">你会征兵吗？—在Draft.js中提升字体大小</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/do-you-even-draft-pumping-up-font-sizes-in-draft-js-9582c421bc55?source=collection_archive---------3-----------------------#2019-08-06">https://levelup.gitconnected.com/do-you-even-draft-pumping-up-font-sizes-in-draft-js-9582c421bc55?source=collection_archive---------3-----------------------#2019-08-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/1daeb4c9b214120c8bfec60930dcb681.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*shoI8SlTPD_lFPQLvL3oGg.jpeg"/></div></div></figure><div class=""/><p id="d2f8" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我最近发表了一篇名为<a class="ae kw" rel="noopener ugc nofollow" target="_blank" href="/this-nest-is-a-bit-drafty-709ef8b79073"> This Nest Is A Bit Drafty </a>的文章，该文章介绍了如何在Draft.js文本编辑器中显示有序和无序列表以及嵌套列表。在本文中，我将继续讨论Draft.js的一些特性，我发现这些特性很难实现，我将演示如何设计一个下拉菜单，允许用户在文本编辑器中更改字体大小。</p></div><div class="ab cl kx ky hu kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="ij ik il im in"><p id="8230" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">首先，我们将创建一个<code class="fe le lf lg lh b">TextEditor</code>组件，它将按照Draft.js文档概述的方式呈现Draft.js <code class="fe le lf lg lh b">Editor</code>组件<a class="ae kw" href="https://draftjs.org/docs/getting-started#usage" rel="noopener ugc nofollow" target="_blank">。我们还将在<code class="fe le lf lg lh b">TextEditor</code>组件中呈现一个自定义的<code class="fe le lf lg lh b">EditorToolbar</code>组件，并将它作为道具传递给<code class="fe le lf lg lh b">editorState</code>和<code class="fe le lf lg lh b">setEditorState</code>:</a></p><figure class="li lj lk ll gt is"><div class="bz fp l di"><div class="lm ln l"/></div></figure><p id="9d28" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在我们将向<code class="fe le lf lg lh b">EditorToolbar</code>添加一个下拉菜单，它将显示选择不同字体大小的选项。</p><p id="e04f" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">需要记住的一件重要事情是，当选择不同的字体大小时，我们不希望光标在文本编辑器上失去焦点。正如我在上一篇文章中解释的，我们可以通过使用一个<code class="fe le lf lg lh b">onMouseDown</code>事件并在其处理程序中调用<code class="fe le lf lg lh b">preventDefault</code>来防止这种情况发生。出于这个原因，我们不能在下拉菜单中使用<code class="fe le lf lg lh b">select</code>元素，因为<code class="fe le lf lg lh b">preventDefault</code>会阻止菜单打开。相反，我们必须创建一个自定义下拉菜单。</p><p id="d783" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们的下拉菜单将由一个<code class="fe le lf lg lh b">button</code>和一个包含所有指定字体大小的菜单<code class="fe le lf lg lh b">div</code>组成。菜单将根据按钮是否被按下而有条件地呈现。为此，我们将把<code class="fe le lf lg lh b">isShowingFontSizeMenu</code>添加到组件状态，并将其值设置为<code class="fe le lf lg lh b">false</code>。然后，我们将向调用<code class="fe le lf lg lh b">preventDefault</code>的<code class="fe le lf lg lh b">button</code>添加一个<code class="fe le lf lg lh b">onMousedown</code>事件，然后将<code class="fe le lf lg lh b">isShowingFontSizeMenu</code>的值设置为其当前值的倒数。</p><p id="2194" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">接下来，我们将通过映射一个以像素为单位指定字体大小的数字数组，为下拉菜单中显示的每个字体大小创建<code class="fe le lf lg lh b">div</code>来为下拉菜单添加字体大小选项。</p><p id="a620" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">最后，我们需要为菜单添加一些自定义CSS来正确显示。</p><p id="fe23" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当所有这些都完成后，<code class="fe le lf lg lh b">EditorToolbar</code>将看起来像这样:</p><figure class="li lj lk ll gt is"><div class="bz fp l di"><div class="lm ln l"/></div></figure><p id="4732" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在是时候让文本编辑器能够改变字体大小了。</p><p id="0b39" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当实现这个特性时，我发现为了保持一致性和避免错误，最好使用<code class="fe le lf lg lh b"><a class="ae kw" href="https://github.com/webdeveloperpr/draft-js-custom-styles" rel="noopener ugc nofollow" target="_blank">draft-js-custom-styles</a></code>节点模块。让我们在终端中运行<code class="fe le lf lg lh b">npm i draft-js-custom-styles</code>，并将模块导入<code class="fe le lf lg lh b">TextEditor</code>。</p><p id="029a" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe le lf lg lh b">draft-js-custom-styles</code>的用法有些非传统。导入模块后，我们需要声明我们将在模块中使用的函数，并将一组CSS属性作为参数传递给模块。对于我们的应用程序，我们将使用<code class="fe le lf lg lh b">styles</code>和<code class="fe le lf lg lh b">customStyleFn</code>函数，因为我们只改变字体大小，所以我们将传入一个只包含<code class="fe le lf lg lh b">'font-size'</code>属性的数组。接下来，我们需要将<a class="ae kw" href="https://draftjs.org/docs/api-reference-editor.html#customstylefn" rel="noopener ugc nofollow" target="_blank">传</a> <code class="fe le lf lg lh b"><a class="ae kw" href="https://draftjs.org/docs/api-reference-editor.html#customstylefn" rel="noopener ugc nofollow" target="_blank">customStyleFn</a></code> <a class="ae kw" href="https://draftjs.org/docs/api-reference-editor.html#customstylefn" rel="noopener ugc nofollow" target="_blank">到</a> <code class="fe le lf lg lh b"><a class="ae kw" href="https://draftjs.org/docs/api-reference-editor.html#customstylefn" rel="noopener ugc nofollow" target="_blank">Editor</a></code>和<code class="fe le lf lg lh b">styles</code>到<code class="fe le lf lg lh b">EditorToolbar</code>作为道具。完成后，TextEditor将如下所示:</p><figure class="li lj lk ll gt is"><div class="bz fp l di"><div class="lm ln l"/></div></figure><p id="f7f5" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在让我们在<code class="fe le lf lg lh b">EditorToolbar</code>中构建一个名为<code class="fe le lf lg lh b">setFontSize</code>的函数。每当从字体大小下拉列表中选择一个字体大小选项时，都会调用这个函数。</p><p id="f55b" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">被调用时，<code class="fe le lf lg lh b">setFontSize</code>会做几件事:</p><p id="8a50" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">首先它将<code class="fe le lf lg lh b">preventDefault</code>以保持焦点在<code class="fe le lf lg lh b">Editor</code>内。</p><p id="cccd" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后，它将声明一个编辑器状态，从当前选择中删除所有字体大小属性。这样做是因为我们不想覆盖当前的字体大小属性，而是想用一个新的字体大小来替换它，以确保在<code class="fe le lf lg lh b">Editor</code>中的任何一个地方都不会声明多个字体大小。</p><p id="8278" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">接下来，它将更新<code class="fe le lf lg lh b">editorState</code>以使用选定的字体大小。</p><p id="cef4" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">最后，它将设置<code class="fe le lf lg lh b">isShowingFontSizeMenu</code>为假，这将关闭下拉菜单。</p><p id="05b9" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这个完成后，<code class="fe le lf lg lh b">EditorToolbar</code>会变成这样:</p><figure class="li lj lk ll gt is"><div class="bz fp l di"><div class="lm ln l"/></div></figure><p id="7a2d" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">至此，我们已经成功地在Draft.js文本编辑器中实现了字体大小功能！</p><p id="8544" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">对于感兴趣的人，这里有一个指向本教程资源库的链接。</p><div class="ip iq gp gr ir lo"><a href="https://github.com/Lige-w/draft-js-font-sizes" rel="noopener  ugc nofollow" target="_blank"><div class="lp ab fo"><div class="lq ab lr cl cj ls"><h2 class="bd jc gy z fp lt fr fs lu fu fw ja bi translated">李哥-w/draft-js-font-size</h2><div class="lv l"><h3 class="bd b gy z fp lt fr fs lu fu fw dk translated">如何在Draft.js中制作字体大小选择菜单</h3></div><div class="lw l"><p class="bd b dl z fp lt fr fs lu fu fw dk translated">github.com</p></div></div><div class="lx l"><div class="ly l lz ma mb lx mc ix lo"/></div></div></a></div></div></div>    
</body>
</html>