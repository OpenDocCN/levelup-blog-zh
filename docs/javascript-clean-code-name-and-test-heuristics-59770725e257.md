# JavaScript 干净代码—命名和测试试探法

> 原文：<https://levelup.gitconnected.com/javascript-clean-code-name-and-test-heuristics-59770725e257>

![](img/f1861fec950c84b6c8759de35fd60615.png)

[沙欣·沙吉德](https://unsplash.com/@shahzin_2903?utm_source=medium&utm_medium=referral)在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上的照片

糟糕的代码有很多独特的特征。在这篇文章中，我们将看看每一个和他们是什么。我们看更一般的代码味道。

在这篇文章中，我们将看看如何正确地命名事物，并编写一个高覆盖率和快速的测试。

# 命名

## 对长范围使用长名称

如果作用域很长，那么名字应该比短作用域的名字长。

短名称的变量在长距离上失去了意义。

## 避免编码

名称不应该用范围信息编码。我们应该避免无用的前缀。

然而，名称中的类型在 JavaScript 中很有用，因为变量和常量都有动态类型。

## 名字应该描述副作用

如果一段代码有副作用，名字应该反映出来。例如，如果我们有以下函数:

```
let foo;
const getFoo = () => {
  if (!foo) {
    foo = {}
  }
  return foo
}
```

那么我们应该命名为`getFoo`因为我们没有在名字中描述明显的副作用。

相反，我们应该将它命名为`setFooIfNotExistAndGetFoo`,以便将这两种行为都考虑在内。

![](img/f5e271b8e65515a6532ea0f805e43ed4.png)

照片由 [FOTOGRAFIA 拍摄。GES](https://unsplash.com/@giancarlos?utm_source=medium&utm_medium=referral) 开[退溅](https://unsplash.com?utm_source=medium&utm_medium=referral)

# 试验

## 测试不足

我们应该确保我们有足够的测试覆盖率，以便我们知道代码和分支的工作。

此外，我们的测试应该考虑阳性和阴性病例。

边界和边缘案例也应该有测试来测试可能破坏我们代码的案例。

## 使用覆盖工具

测试覆盖工具告诉我们有哪些测试，哪些仍然需要测试覆盖。

它们还告诉我们代码的哪些分支有测试覆盖率。

## 不要跳过琐碎的测试

它们易于编写，是很好的文档。

## 被忽略的测试是一个关于歧义的问题

被忽略的测试总是有问题的。我们不知道他们为什么被跳过，所以我们一定要弄清楚为什么我们跳过一个测试。

## 测试边界条件

测试边界条件是很重要的，因为代码经常在边界条件附近中断。

## 彻底测试附近的 bug

如果一段代码有错误，那么我们应该更多地测试那些情况。

## 失败的模式很能说明问题

测试用例失败的模式可以告诉我们很多关于什么破坏了我们的代码。

失败的案例通常有一定的模式，比如当传入 5 个或更多字符时失败，或者类似的情况。

## 测试应该很快

运行缓慢的测试是一种折磨。他们只是被忽视，不会得到运行。我们应该尽可能快地制作它们，特别是因为它们将会有很多。

# 结论

我们应该用明确的方式给事物命名。如果有副作用，我们应该描述一下。

此外，测试应该覆盖 bug 和边界情况，并且应该运行得很快。

我们可以使用覆盖工具来清楚地了解测试覆盖了哪些代码。