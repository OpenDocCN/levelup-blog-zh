<html>
<head>
<title>A Complete Guide to Redis Hashes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Redis哈希表完全指南</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/a-complete-guide-to-redis-hashes-53dd0824dad3?source=collection_archive---------13-----------------------#2022-10-03">https://levelup.gitconnected.com/a-complete-guide-to-redis-hashes-53dd0824dad3?source=collection_archive---------13-----------------------#2022-10-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/d156c732f8f031347cd356076ebdbd54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-RVsKCt50VW90gxp1FedxQ.png"/></div></div></figure><p id="23e7" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">Redis散列是存储在Redis数据库中的一种记录。它们有点像JSON对象，将数据存储为键值对。它们是<strong class="kd iu">可变的</strong>，所以可以根据你的需要很容易地改变和更新。因此，它们是在Redis中存储某些类型的数据的好方法。<a class="ae kz" href="https://fjolt.com/article/redis-how-to-install" rel="noopener ugc nofollow" target="_blank">如果你是Redis的新手，在尝试本教程之前，确保你先安装了它。</a></p><p id="0da5" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">Redis散列在结构上是扁平的，所以我们不能像在JSON中那样有多个层次。如果我们想添加一个新的散列，我们使用终端命令<code class="fe la lb lc ld b">HSET</code>。通过在终端中运行<code class="fe la lb lc ld b">redis-cli</code>来启动redis，然后尝试运行以下命令来设置新的密钥:</p><pre class="le lf lg lh gt li ld lj lk aw ll bi"><span id="1aed" class="lm ln it ld b gy lo lp l lq lr">HSET user:1 keyOne valueOne keyTwo valueTwo</span></pre><p id="3af0" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">redis散列的命名约定被键入为<code class="fe la lb lc ld b">hash:key</code>，所以这里我们用<code class="fe la lb lc ld b">user:1</code>来表示用户编号1。上面的语法可能看起来令人困惑，但它遵循以下约定:</p><pre class="le lf lg lh gt li ld lj lk aw ll bi"><span id="88ba" class="lm ln it ld b gy lo lp l lq lr">HSET hash:key key value key value key value ....</span></pre><p id="111f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">因此，当我们编写<code class="fe la lb lc ld b">HSET user:1 keyOne valueOne keyTwo valueTwo</code>时，我们<strong class="kd iu">创建了一个名为user:1 </strong>的新散列，然后我们创建了一个名为<code class="fe la lb lc ld b">keyOne</code>的键值<code class="fe la lb lc ld b">valueOne</code>，以及一个名为<code class="fe la lb lc ld b">keyTwo</code>的键值<code class="fe la lb lc ld b">valueTwo</code>。您可以永远延续这种模式，这意味着您的散列可以有任意多的键值对。</p><h1 id="dad4" class="ls ln it bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">在Redis哈希表中更新和添加新的键</h1><p id="699c" class="pw-post-body-paragraph kb kc it kd b ke mp kg kh ki mq kk kl km mr ko kp kq ms ks kt ku mt kw kx ky im bi translated">我们可以使用<code class="fe la lb lc ld b">HSET</code>命令创建一个hash，并对其进行更新或添加。例如，要向<code class="fe la lb lc ld b">user:1</code>添加新的键和值，我们只需使用新的键和值再次运行<code class="fe la lb lc ld b">HSET</code>:</p><pre class="le lf lg lh gt li ld lj lk aw ll bi"><span id="9e2d" class="lm ln it ld b gy lo lp l lq lr">HSET user:1 keyThree valueThree</span></pre><p id="6337" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果我们稍后想要更新<code class="fe la lb lc ld b">keyThree</code>的值为<code class="fe la lb lc ld b">valueFour</code>，我们将再次运行<code class="fe la lb lc ld b">HSET</code>来覆盖<code class="fe la lb lc ld b">keyThree</code>的值:</p><pre class="le lf lg lh gt li ld lj lk aw ll bi"><span id="d2ca" class="lm ln it ld b gy lo lp l lq lr">HSET user:1 keyThree valueFour</span></pre><h1 id="fc5b" class="ls ln it bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">在Redis中获取散列键值和散列</h1><p id="f457" class="pw-post-body-paragraph kb kc it kd b ke mp kg kh ki mq kk kl km mr ko kp kq ms ks kt ku mt kw kx ky im bi translated">如果您想获得特定散列中的所有键和值，您可以使用<code class="fe la lb lc ld b">HGETALL</code>。这将返回指定哈希中的所有键和值。例如:</p><pre class="le lf lg lh gt li ld lj lk aw ll bi"><span id="e690" class="lm ln it ld b gy lo lp l lq lr">HGETALL user:1</span></pre><p id="e46f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">将返回:</p><pre class="le lf lg lh gt li ld lj lk aw ll bi"><span id="e0e9" class="lm ln it ld b gy lo lp l lq lr">1) "keyOne"<br/>2) "valueOne"<br/>3) "keyTwo"<br/>4) "valueTwo"</span></pre><p id="aeab" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">同时，如果你想得到一个散列中一个特定键的值，我们使用<code class="fe la lb lc ld b">HGET</code>。例如，为了获得<code class="fe la lb lc ld b">keyOne</code>的值，我们运行:</p><pre class="le lf lg lh gt li ld lj lk aw ll bi"><span id="b5bb" class="lm ln it ld b gy lo lp l lq lr">HGET user:1 keyOne</span></pre><p id="646c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">它将返回:</p><pre class="le lf lg lh gt li ld lj lk aw ll bi"><span id="e749" class="lm ln it ld b gy lo lp l lq lr">"valueOne"</span></pre><h1 id="76c6" class="ls ln it bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">将哈希键值增加一个数量</h1><p id="6370" class="pw-post-body-paragraph kb kc it kd b ke mp kg kh ki mq kk kl km mr ko kp kq ms ks kt ku mt kw kx ky im bi translated">散列的一个常见用例是在记分板上存储用户分数。在这种情况下，如果是一个数字，我们希望将用户的分数增加一定的量是很常见的。例如，假设我们有这个记分牌:</p><pre class="le lf lg lh gt li ld lj lk aw ll bi"><span id="e639" class="lm ln it ld b gy lo lp l lq lr">HSET scoreboard:1 userNameOne 200</span></pre><p id="397e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果我们需要更新用户的分数，我们可以很容易地使用<code class="fe la lb lc ld b">HINCRBY</code>将用户的分数增加一定的量。假设我们要增加用户的分数<code class="fe la lb lc ld b">200</code>。不使用<code class="fe la lb lc ld b">HSET</code>，我们可以这样做:</p><pre class="le lf lg lh gt li ld lj lk aw ll bi"><span id="3be0" class="lm ln it ld b gy lo lp l lq lr">HINCRBY scoreboard:1 userNameOne 200</span></pre><h1 id="2de6" class="ls ln it bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">删除Redis中的散列键和值</h1><p id="5efc" class="pw-post-body-paragraph kb kc it kd b ke mp kg kh ki mq kk kl km mr ko kp kq ms ks kt ku mt kw kx ky im bi translated">最后，如果您想要删除特定散列的散列键，我们使用<code class="fe la lb lc ld b">HDEL</code>。以我们的第一个例子<code class="fe la lb lc ld b">user:1</code>为例，如果我们想删除<code class="fe la lb lc ld b">keyOne</code>，我们可以通过运行以下命令来实现:</p><pre class="le lf lg lh gt li ld lj lk aw ll bi"><span id="7ceb" class="lm ln it ld b gy lo lp l lq lr">HDEL user:1 keyOne</span></pre><p id="c15a" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果您根本不想要散列，并且想要完全删除<code class="fe la lb lc ld b">user:1</code>，那么您可以简单地使用<code class="fe la lb lc ld b">del</code>来代替:</p><pre class="le lf lg lh gt li ld lj lk aw ll bi"><span id="760b" class="lm ln it ld b gy lo lp l lq lr">del user:1</span></pre></div><div class="ab cl mu mv hx mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="im in io ip iq"><h1 id="a443" class="ls ln it bd lt lu nb lw lx ly nc ma mb mc nd me mf mg ne mi mj mk nf mm mn mo bi translated">分级编码</h1><p id="e82f" class="pw-post-body-paragraph kb kc it kd b ke mp kg kh ki mq kk kl km mr ko kp kq ms ks kt ku mt kw kx ky im bi translated">感谢您成为我们社区的一员！在你离开之前:</p><ul class=""><li id="ac55" class="ng nh it kd b ke kf ki kj km ni kq nj ku nk ky nl nm nn no bi translated">👏为故事鼓掌，跟着作者走👉</li><li id="1a19" class="ng nh it kd b ke np ki nq km nr kq ns ku nt ky nl nm nn no bi translated">📰查看<a class="ae kz" href="https://levelup.gitconnected.com/?utm_source=pub&amp;utm_medium=post" rel="noopener ugc nofollow" target="_blank">升级编码出版物</a>中的更多内容</li><li id="2526" class="ng nh it kd b ke np ki nq km nr kq ns ku nt ky nl nm nn no bi translated">🔔关注我们:<a class="ae kz" href="https://twitter.com/gitconnected" rel="noopener ugc nofollow" target="_blank">Twitter</a>|<a class="ae kz" href="https://www.linkedin.com/company/gitconnected" rel="noopener ugc nofollow" target="_blank">LinkedIn</a>|<a class="ae kz" href="https://newsletter.levelup.dev" rel="noopener ugc nofollow" target="_blank">时事通讯</a></li></ul><p id="8b89" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">🚀👉<a class="ae kz" href="https://jobs.levelup.dev/talent/welcome?referral=true" rel="noopener ugc nofollow" target="_blank"> <strong class="kd iu">将像你这样的开发人员安置在顶级创业公司和科技公司</strong> </a></p></div></div>    
</body>
</html>