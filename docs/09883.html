<html>
<head>
<title>Load Balancing</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">负载平衡</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/loadbalancing-a0e805baea37?source=collection_archive---------2-----------------------#2021-09-27">https://levelup.gitconnected.com/loadbalancing-a0e805baea37?source=collection_archive---------2-----------------------#2021-09-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="51a9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们每天都会遇到负载平衡器。即使当您正在阅读这篇中型文章时，您的请求也会在这些内容到达您的浏览器之前流经多个负载平衡器。</p><blockquote class="kl"><p id="8cc9" class="km kn iq bd ko kp kq kr ks kt ku kk dk translated">负载平衡是我们每天都会遇到的最重要和最基本的概念之一。它是在后端跨多个服务器/进程/机器分发传入请求的过程。</p></blockquote><p id="0b82" class="pw-post-body-paragraph jn jo iq jp b jq kv js jt ju kw jw jx jy kx ka kb kc ky ke kf kg kz ki kj kk ij bi translated">为什么我们需要负载平衡？ <br/>通常，当我们开发一个应用程序时，客户会将他们的请求路由到一个后端服务器，但是一旦流量增加，那个服务器就会达到极限。为了克服这一点，我们可以启动另一台服务器来分担流量。但是我们如何让客户知道连接到新机器呢？</p><p id="d086" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">负载平衡是用于该路由的发现和决策的技术。有两种方法可以实现这一点——服务器端负载平衡或客户端负载平衡。</p><figure class="lb lc ld le gt lf gh gi paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="gh gi la"><img src="../Images/063ed7684bcccc97fbe9c500b6d11da9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YxgXygvKUmCpYjKfXEeCzw.png"/></div></div><figcaption class="lm ln gj gh gi lo lp bd b be z dk translated">单个应用服务器因请求而过载</figcaption></figure><h1 id="4e20" class="lq lr iq bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">服务器端负载平衡:</h1><p id="3815" class="pw-post-body-paragraph jn jo iq jp b jq mo js jt ju mp jw jx jy mq ka kb kc mr ke kf kg ms ki kj kk ij bi translated">有一个中间层，一个负载平衡器，它将传入的请求转发到不同的服务器，以消除这种复杂性。所有后端服务器都向负载平衡器注册，然后负载平衡器使用各种算法路由到其中一个服务器实例。AWS ELB、Nginx、Envoy都是服务器端负载平衡器的例子。</p><figure class="lb lc ld le gt lf gh gi paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="gh gi mt"><img src="../Images/41edb7b837fc7e4c09d2e68a6466941c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M013EIjXPW81qIWWKbwU_w.png"/></div></div><figcaption class="lm ln gj gh gi lo lp bd b be z dk translated">服务器端负载平衡</figcaption></figure><h2 id="e619" class="mu lr iq bd ls mv mw dn lw mx my dp ma jy mz na me kc nb nc mi kg nd ne mm nf bi translated">优势</h2><ul class=""><li id="d3a8" class="ng nh iq jp b jq mo ju mp jy ni kc nj kg nk kk nl nm nn no bi translated">无需客户端更改。</li><li id="e0e9" class="ng nh iq jp b jq np ju nq jy nr kc ns kg nt kk nl nm nn no bi translated">易于对负载平衡算法和后端服务器进行更改。</li></ul><h1 id="ef91" class="lq lr iq bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">客户端负载平衡:</h1><p id="a851" class="pw-post-body-paragraph jn jo iq jp b jq mo js jt ju mp jw jx jy mq ka kb kc mr ke kf kg ms ki kj kk ij bi translated">在客户端负载平衡中，客户端处理负载平衡。让我们抽象地看一下这是如何实现的。要在客户端执行负载平衡-</p><ul class=""><li id="93c6" class="ng nh iq jp b jq jr ju jv jy nu kc nv kg nw kk nl nm nn no bi translated">客户端应该知道所有可用的web服务器</li><li id="881a" class="ng nh iq jp b jq np ju nq jy nr kc ns kg nt kk nl nm nn no bi translated">客户端的一个库，用于实现负载平衡算法</li></ul><p id="28c8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">客户端使用客户端负载平衡库(如<a class="ae nx" href="https://github.com/Netflix/ribbon" rel="noopener ugc nofollow" target="_blank"> Ribbon </a>)将请求路由到其中一个服务器。客户端负载平衡也用于服务发现。</p><p id="3720" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">假设服务A(客户端)想要访问服务B(服务器端)。服务B有三个实例，并且都在发现服务器(X)上注册。服务A启用了功能区客户端，它允许进行客户端负载平衡。它从发现服务器获取可用的服务B实例，重定向来自客户端的流量，并持续监听任何变化。</p><p id="7e56" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这里，我使用领事服务发现实现了客户端负载平衡:<a class="ae nx" href="https://github.com/Nancy-Chauhan/consul-service-discovery" rel="noopener ugc nofollow" target="_blank">https://github.com/Nancy-Chauhan/consul-service-discovery</a></p><figure class="lb lc ld le gt lf gh gi paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="gh gi ny"><img src="../Images/708b90b3bdafb53ac4dab517f842eae3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CtMtKBTIpfiKTNdRHD-ccQ.png"/></div></div></figure><h2 id="303b" class="mu lr iq bd ls mv mw dn lw mx my dp ma jy mz na me kc nb nc mi kg nd ne mm nf bi translated">优势</h2><ul class=""><li id="0f4e" class="ng nh iq jp b jq mo ju mp jy ni kc nj kg nk kk nl nm nn no bi translated">不需要额外的基础设施。</li></ul><h1 id="d9c6" class="lq lr iq bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">负载平衡的优势</h1><figure class="lb lc ld le gt lf gh gi paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="gh gi nz"><img src="../Images/b74f34a39d61ea7397a8b14e035b458e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VtCPP8DOJX7XUhwr4Gp7jg.png"/></div></div><figcaption class="lm ln gj gh gi lo lp bd b be z dk translated">参考:<a class="ae nx" href="https://www.nginx.com/resources/glossary/load-balancing/" rel="noopener ugc nofollow" target="_blank">https://www.nginx.com/resources/glossary/load-balancing/</a></figcaption></figure></div><div class="ab cl oa ob hu oc" role="separator"><span class="od bw bk oe of og"/><span class="od bw bk oe of og"/><span class="od bw bk oe of"/></div><div class="ij ik il im in"><p id="1d62" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">负载平衡器是现代云原生应用的基础。负载平衡的概念和动态配置的能力创造了服务网格等创新。</p></div></div>    
</body>
</html>