<html>
<head>
<title>How to Create and Publish a Package to NPM Registry</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何创建包并将其发布到NPM注册中心</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-create-and-publish-a-package-to-npm-registry-4967a5c44c69?source=collection_archive---------13-----------------------#2022-04-15">https://levelup.gitconnected.com/how-to-create-and-publish-a-package-to-npm-registry-4967a5c44c69?source=collection_archive---------13-----------------------#2022-04-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="402c" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">7个步骤中你需要知道的一切</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/ef7a5f29111bfc3cc204901cd4dce882.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*GkKOH31Cmi98YVv4"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">保罗·埃施-洛朗在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><h1 id="a969" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">介绍</h1><p id="ff23" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在本教程中，我们将了解如何创建、测试和发布我们自己的npm包。但是为什么有人想发布npm包呢？</p><p id="aeb0" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">作为开发人员，我们使用其他开发人员发布的许多npm包。这些npm包改进了我们的开发周期，节省了大量时间。Npm包提供了一些功能，这样我们就不必重新编码了。例如，在前端，我们使用<strong class="lt iu"> Axios </strong>从API获取数据。或者我们使用<strong class="lt iu"> UUID </strong>在后端给我们的数据一个唯一的ID。</p><p id="9660" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">通过在IT领域的工作，我们了解到效率是发展的一个重要方面。但是，有时，我们会遇到一些情况，不得不编写一段代码。这些代码可能对世界上的许多人或您的组织有用。现在我们总是可以使用<strong class="lt iu"> git </strong>库来完成这个任务。但是，每次设置代码库可能有点棘手。相反，在发布代码之后，我们可以使用一个命令来设置这个代码库。</p><p id="7da8" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu">注意:</strong>包和模块是两回事。但是对于本教程，我们不需要担心差异。</p><h1 id="8715" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">初始设置</h1><p id="1f4a" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在发布npm软件包之前，您必须满足一些先决条件。</p><ol class=""><li id="d387" class="ms mt it lt b lu mn lx mo ma mu me mv mi mw mm mx my mz na bi translated">我们需要<a class="ae ky" href="https://www.npmjs.com/signup" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu">创建</strong>一个npm帐户</a>并<strong class="lt iu">验证</strong>它。(请记住，如果您不验证您的帐户，当您尝试发布软件包时，将会遇到一些错误。)</li><li id="c284" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">下载安装<a class="ae ky" href="https://nodejs.org/en/download/" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu"> Node.js </strong> </a></li><li id="da67" class="ms mt it lt b lu nb lx nc ma nd me ne mi nf mm mx my mz na bi translated">使用npm凭据登录您的本地系统。</li></ol><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ng"><img src="../Images/57e56c97054a46b05e7378451c98dab3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*IRoF0c_qe_wuVH5Y"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">NPM登录页面</figcaption></figure><p id="77de" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">创建npm帐户后，打开终端并编写以下命令。要验证节点和npm的安装，请执行以下命令。</p><pre class="kj kk kl km gt nh ni nj nk aw nl bi"><span id="58cd" class="nm la it ni b gy nn no l np nq">node -v</span><span id="f353" class="nm la it ni b gy nr no l np nq">npm -v</span></pre><p id="a677" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">现在，要登录npm帐户，请使用以下命令。它会询问您的用户名、密码和您注册时使用的电子邮件。</p><pre class="kj kk kl km gt nh ni nj nk aw nl bi"><span id="2d26" class="nm la it ni b gy nn no l np nq">npm login</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/b4102dcf86f9dd6dc911e1b5fe1edfbc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1278/0*gfBZm66B_G07FvK6"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">NPM登录终端</figcaption></figure><p id="ee02" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">Npm包有两种类型:普通包和作用域包。作用域包主要用于私有包或组织的内部使用。但是你也可以找到一些公共的作用域包，比如<a class="ae ky" href="https://hashnode.com/@angular" rel="noopener ugc nofollow" target="_blank"> <strong class="lt iu"> @angular </strong> </a>作用域包。</p><p id="9090" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu">注意:</strong>在开始编写代码之前，检查包名的有效性。这不是一个大问题，我们可以随时更改名称，但这是一个很好的做法。</p><h1 id="a9f3" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">编写包的核心逻辑</h1><p id="7fa3" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">在大多数情况下，Npm包就像普通的节点项目。因此，当我们初始化节点项目时，我们使用下面的命令得到了这个项目。</p><pre class="kj kk kl km gt nh ni nj nk aw nl bi"><span id="6e51" class="nm la it ni b gy nn no l np nq">npm init</span></pre><p id="1182" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在本教程中，我将创建一个npm包来记录我所有的社交媒体链接。如下所示，我已经填写了必要的细节。在这里，我在GitHub上创建了一个存储库，并提到了到该存储库的链接。绘制地图变得很容易</p><pre class="kj kk kl km gt nh ni nj nk aw nl bi"><span id="e1b2" class="nm la it ni b gy nn no l np nq">C:\social-info&gt; npm init </span><span id="f3eb" class="nm la it ni b gy nr no l np nq">package name: (social-info)<br/>version: (1.0.0)<br/>description: Log all social media information of Sahil Fruitwala.<br/>entry point: (index.js)<br/>test command:<br/>git repository: https://github.com/SahilFruitwala/social-info.git<br/>keywords: social media, Twitter, Linkedin, Instagram<br/>author: Sahil Fruitwala<br/>license: (ISC)<br/>About to write to C:\Users\Sahil\Desktop\social-info\package.json:</span><span id="9540" class="nm la it ni b gy nr no l np nq">{<br/>  "name": "social-info",<br/>  "version": "1.0.0",<br/>  "description": "Log all social media information of Sahil Fruitwala.",<br/>  "main": "index.js",<br/>  "scripts": {<br/>    "test": "echo \"Error: no test specified\" &amp;&amp; exit 1"<br/>  },<br/>  "repository": {<br/>    "type": "git",<br/>    "url": "git+https://github.com/SahilFruitwala/social-info.git"<br/>  },<br/>  "keywords": [<br/>    "social-media",<br/>    "Twitter",<br/>    "Linkedin",<br/>    "Instagram"<br/>  ],<br/>  "author": "Sahil Fruitwala",<br/>  "license": "ISC",<br/>  "bugs": {<br/>    "url": "https://github.com/SahilFruitwala/social-info/issues"<br/>  },<br/>  "homepage": "https://github.com/SahilFruitwala/social-info#readme"<br/>}</span><span id="7142" class="nm la it ni b gy nr no l np nq">Is this OK? (yes) yes</span></pre><p id="8cb8" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">完成这个过程后，我们必须创建一个启动文件。这种情况下，会有一个<strong class="lt iu"> package.json </strong>中提到的<strong class="lt iu"> index.js </strong>文件。在这个index.js文件中，我们将为包编写核心逻辑。这是一个非常简单的包，这就是为什么我们只有一个文件。</p><p id="9aa1" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">现在，在index.js文件中，我们将为我们的包编写主要逻辑。正如我前面提到的，这个包将记录社交媒体链接。逻辑如下:</p><pre class="kj kk kl km gt nh ni nj nk aw nl bi"><span id="5c7c" class="nm la it ni b gy nn no l np nq">const twitter = "https://twitter.com/Sahil_Fruitwala";<br/>const linkedin = "https://www.linkedin.com/in/sahilfruitwala/";<br/>const github = "https://github.com/SahilFruitwala";</span><span id="32c7" class="nm la it ni b gy nr no l np nq">const logData = (option) =&gt; {<br/>    option === 1<br/>    ? console.log(`Twitter: ${twitter}`)<br/>    : option === 2<br/>    ? console.log(`LinkeIn: ${linkedin}`)<br/>    : option === 3<br/>    ? console.log(`GitHub: ${github}`)<br/>    : console.log(`Enter Valid Input!`);<br/>};</span><span id="6e0b" class="nm la it ni b gy nr no l np nq">module.exports = logData;</span></pre><p id="da37" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在这里，当用户传递一个特定的数字时，logData函数将记录一个特定的社交媒体URL。</p><h1 id="fbdb" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">测试您的包</h1><p id="0e19" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">现在，为了在本地测试这个包，我们可以使用<code class="fe nt nu nv ni b">npm link</code>命令。这个命令将把包文件夹链接到全局<code class="fe nt nu nv ni b">node_modules</code>目录。</p><p id="905f" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">要使用这个包，创建一个名为的目录，在这个目录中测试并打开一个终端。该目录仅用于测试目的。所以，我们可以忽略一些构型。在测试目录下运行<code class="fe nt nu nv ni b">npm init -y</code>命令，创建一个名为<strong class="lt iu"> index.js </strong>的JavaScript文件。</p><p id="05c6" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">现在，主要的问题是，我们如何使用我们创建的包？要使用这个包，打开测试目录中的终端，写<code class="fe nt nu nv ni b">npm link social-info</code>。请注意，包的名称是<strong class="lt iu">社会信息</strong>。名称必须匹配，然后只有这个命令才能工作。该命令将在<strong class="lt iu">测试</strong>目录中生成<strong class="lt iu">节点_模块</strong>目录。</p><p id="a4e8" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在<strong class="lt iu">测试</strong>目录的<strong class="lt iu"> <em class="nw"> index.js </em> </strong>文件中编写如下代码。我们正在导入“社交信息”包。这里，因为logData函数是默认的导入，所以我们可以直接使用它。</p><pre class="kj kk kl km gt nh ni nj nk aw nl bi"><span id="8f6d" class="nm la it ni b gy nn no l np nq">const info = require('social-info')</span><span id="4e9d" class="nm la it ni b gy nr no l np nq">info(3)<br/>info(13)</span></pre><p id="af28" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">输出:</p><pre class="kj kk kl km gt nh ni nj nk aw nl bi"><span id="2878" class="nm la it ni b gy nn no l np nq">GitHub: https://github.com/SahilFruitwala<br/>Enter Valid Input!</span></pre><h1 id="5f92" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">发布包</h1><p id="ef06" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">最后，在测试之后，包就可以发布了。要发布这个包，我们只需要一个命令。</p><pre class="kj kk kl km gt nh ni nj nk aw nl bi"><span id="3b6f" class="nm la it ni b gy nn no l np nq">npm publish</span></pre><p id="bc88" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">成功发布后，您将看到如下图所示的输出。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/5396ff2284681178b3112f5c53d735db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/0*F4CVE75_yvWbiGW9"/></div></figure><h1 id="2488" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated"><a class="ae ky" href="https://blog.sahilfruitwala.com/how-to-create-and-publish-a-package-to-npm-registry#Update" rel="noopener ugc nofollow" target="_blank">取消发布&amp;更新包</a></h1><p id="2ee6" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">如果您想从npm注册表中删除任何包，请使用<code class="fe nt nu nv ni b">npm unpublish</code>取消发布该包。</p><p id="c98b" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">有时，需要更新软件包。当您更改代码并希望更新包时，必须更新包的版本。使用<code class="fe nt nu nv ni b">npm version &lt;type&gt;</code>更新版本。这里的<code class="fe nt nu nv ni b">&lt;type&gt;</code>是一个<a class="ae ky" href="http://semver.org" rel="noopener ugc nofollow" target="_blank">语义版本</a>发布类型(<strong class="lt iu">补丁，次要或者主要</strong>)。更新版本号后，可以再次发布包。使用相同的<code class="fe nt nu nv ni b">npm publish</code>命令发布包。</p><h1 id="6ab9" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">结论</h1><p id="b86f" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">厉害！现在你可以创建和发布你自己的包了。您可以用我们创建这个包的相同方法来创建作用域包。尝试使用这个<a class="ae ky" href="https://docs.npmjs.com/creating-and-publishing-scoped-public-packages/" rel="noopener ugc nofollow" target="_blank">文档</a>创建一个作用域包。你也可以看看我的第一个npm包。我创建了一个名为<a class="ae ky" href="https://www.npmjs.com/package/twi-js" rel="noopener ugc nofollow" target="_blank"> Twi-JS </a>的Twitter搜索API包装器。</p><p id="6378" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">请务必在下面的评论中留下你的想法、问题或担忧。我很想看看他们。如果你需要任何帮助或者想讨论什么，请告诉我。</p><pre class="kj kk kl km gt nh ni nj nk aw nl bi"><span id="af78" class="nm la it ni b gy nn no l np nq"><strong class="ni iu"><em class="nw">Want to Know More?</em></strong></span><span id="ca61" class="nm la it ni b gy nr no l np nq"><em class="nw">Signup for my </em><a class="ae ky" href="https://bit.ly/3Menk8Q" rel="noopener ugc nofollow" target="_blank"><strong class="ni iu"><em class="nw">Newsletter</em></strong></a><em class="nw"> or Reach out to me on </em><a class="ae ky" href="https://bit.ly/3KjwgZV" rel="noopener ugc nofollow" target="_blank"><strong class="ni iu"><em class="nw">Twitter</em></strong></a><strong class="ni iu"><em class="nw"> or </em></strong><a class="ae ky" href="https://bit.ly/3JbsPDm" rel="noopener ugc nofollow" target="_blank"><strong class="ni iu"><em class="nw">LinkedIn</em></strong></a><strong class="ni iu"><em class="nw">.</em></strong></span></pre></div></div>    
</body>
</html>