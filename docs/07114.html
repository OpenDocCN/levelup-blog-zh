<html>
<head>
<title>Text Recognition with FirebaseML in Swift 5</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Swift 5中使用FirebaseML的文本识别</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/text-recognition-with-firebaseml-in-swift-5-342b6b1ee54c?source=collection_archive---------20-----------------------#2021-01-25">https://levelup.gitconnected.com/text-recognition-with-firebaseml-in-swift-5-342b6b1ee54c?source=collection_archive---------20-----------------------#2021-01-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="1b78" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">拍张照片，你的个人ML就能识别任何语言的任何文字。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/1811acfd23dc139cfa0774d1dc7304f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*zX45a3E7n4v_wLGh"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">由<a class="ae kv" href="https://unsplash.com/@ikukevk?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">凯文·Ku</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="1f45" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">教机器执行特定的算法可能很困难。这是一个很大的数学，它使用了像<strong class="ky ir">逻辑回归</strong>、<strong class="ky ir">稀疏度</strong>和<strong class="ky ir">神经网络</strong>这样的大词。相反，当你有一个现成的ML框架时，将它集成到你的应用程序中并创建一些简洁的功能就变得非常简单了。这种框架的一个例子是ml kit——它可以与FirebaseML一起使用，也可以不与firebase ml一起使用。在本文中，我们将学习如何使用MLKit识别文本。</p><blockquote class="ls"><p id="eed5" class="lt lu iq bd lv lw lx ly lz ma mb lr dk translated">文本识别器的流程图</p></blockquote><div class="mc md me mf mg ab cb"><figure class="mh kk mi mj mk ml mm paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/f5d61927b27c28377cfb7346abff248c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1222/format:webp/1*xnDufn29rd60IaUWPvw_1w.jpeg"/></div></figure><figure class="mh kk mn mj mk ml mm paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/3a0e133882b69397b8525f5d817458a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:780/format:webp/1*1GUCyn3toJ1Hk4ITPHc0ug.jpeg"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk mo di mp mq translated">这些照片是从火灾现场拍摄的</figcaption></figure></div><p id="76a3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我们开始编码之前，我想解释一下文本识别器的处理流程。首先，有一个图像，由textRecognier处理并传输到VisionText。然后，VisionText被处理为iPhone中的实际文本。</p><h1 id="b9f0" class="mr ms iq bd mt mu mv mw mx my mz na nb jw nc jx nd jz ne ka nf kc ng kd nh ni bi translated">我们开始吧</h1><h2 id="48c3" class="nj ms iq bd mt nk nl dn mx nm nn dp nb lf no np nd lj nq nr nf ln ns nt nh nu bi translated">装置</h2><p id="b951" class="pw-post-body-paragraph kw kx iq ky b kz nv jr lb lc nw ju le lf nx lh li lj ny ll lm ln nz lp lq lr ij bi translated">首先，你需要安装这些框架:' Firebase/Core '，' Firebase/MLVision '，' Firebase/MLVisionTextModel '。你可以用<a class="ae kv" href="https://github.com/CocoaPods/CocoaPods" rel="noopener ugc nofollow" target="_blank">椰子</a>或<a class="ae kv" href="https://github.com/Carthage/Carthage" rel="noopener ugc nofollow" target="_blank">底座</a>安装它们。如果您不知道如何使用依赖项管理器，请熟悉本文。</p><p id="4b3e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，将Firebase添加到您的iOS项目中。如果你不知道如何添加firebase，看看<a class="ae kv" href="https://firebase.google.com/docs/ios/setup" rel="noopener ugc nofollow" target="_blank"> firebase文档</a>。</p><p id="da24" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，我们准备开始编码了！</p><p id="e0df" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在项目的第一部分中，我们创建了一个Processor.swift类，它将处理文本识别过程。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="d603" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们来了解一下<code class="fe oc od oe of b">process</code>方法是怎么回事。</p><ol class=""><li id="0b27" class="og oh iq ky b kz la lc ld lf oi lj oj ln ok lr ol om on oo bi translated">我们检查图像是否存在。</li><li id="397f" class="og oh iq ky b kz op lc oq lf or lj os ln ot lr ol om on oo bi translated">如果存在，我们用特殊的VisionImage类型处理图像，它包含MLKit处理图像的特定元数据。</li><li id="1062" class="og oh iq ky b kz op lc oq lf or lj os ln ot lr ol om on oo bi translated">然后，我们调用具有process方法的textRecognizer，它以传递给闭包的参数的形式返回文本结果数组。</li><li id="a98e" class="og oh iq ky b kz op lc oq lf or lj os ln ot lr ol om on oo bi translated">接下来，我们检查<code class="fe oc od oe of b">result</code>是否为零。如果它为零，我们返回一个空字符串。</li><li id="5132" class="og oh iq ky b kz op lc oq lf or lj os ln ot lr ol om on oo bi translated">然而，如果<code class="fe oc od oe of b">result</code>包含一些数据，我们简单地以文本的形式传递回来。</li></ol><blockquote class="ou ov ow"><p id="4795" class="kw kx ox ky b kz la jr lb lc ld ju le oy lg lh li oz lk ll lm pa lo lp lq lr ij bi translated">注意:Xcode可能会抱怨说<code class="fe oc od oe of b">onDeviceTextRecognizer()</code>已经被弃用了，但是它在你的设备上仍然可以工作。</p></blockquote><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pb"><img src="../Images/bf5a818c65c49daf99809828ef309ad2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tDSB_y86fnbHyw4bF8BRhg.jpeg"/></div></div></figure><p id="aaee" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">替代<code class="fe oc od oe of b">onDeviceTextRecognizer()</code>的是<code class="fe oc od oe of b">cloudTextRecognizer()</code>，它应该可以很好的配合firebase。</p><p id="3978" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">在项目的第二部分</strong>，我们使用主视图控制器，在那里我们调用处理器类。我在我的项目中使用了UIImagePickerController，另一个选择是使用原生的<code class="fe oc od oe of b">AVFoundation</code>框架，这创造了许多使用相机的机会。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="ad0b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里我们添加一个<code class="fe oc od oe of b">Processor()</code>的实例作为<code class="fe oc od oe of b">processor</code>的属性。然后我们创建一个默认文本的<code class="fe oc od oe of b">String</code>，它将在以后被替换为<code class="fe oc od oe of b">detectedText</code>的<code class="fe oc od oe of b">UILabel</code>。</p><blockquote class="ou ov ow"><p id="5b71" class="kw kx ox ky b kz la jr lb lc ld ju le oy lg lh li oz lk ll lm pa lo lp lq lr ij bi translated">注意://…意味着我跳过了一些UI优化的代码，因为这超出了我们的主题范围。然而，我将在文章的最后与你分享这个项目的回购。</p></blockquote><p id="5b0b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">主要的奇迹发生在扩展视图控制器中:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oa ob l"/></div></figure><ol class=""><li id="30b4" class="og oh iq ky b kz la lc ld lf oi lj oj ln ok lr ol om on oo bi translated">调用<code class="fe oc od oe of b">imagePickerController</code>的<code class="fe oc od oe of b">didFinishPickingMediaWithInfo</code>方法。</li><li id="6083" class="og oh iq ky b kz op lc oq lf or lj os ln ot lr ol om on oo bi translated">检查图像是否存在。</li><li id="5b63" class="og oh iq ky b kz op lc oq lf or lj os ln ot lr ol om on oo bi translated">将现有图像作为<code class="fe oc od oe of b">process</code>方法的参数传递，并将<code class="fe oc od oe of b">detectedText</code>的文本分配给<code class="fe oc od oe of b">text</code>闭包。</li><li id="1be4" class="og oh iq ky b kz op lc oq lf or lj os ln ot lr ol om on oo bi translated">解散<code class="fe oc od oe of b">imagePickerController</code>。</li></ol><h1 id="2483" class="mr ms iq bd mt mu mv mw mx my mz na nb jw nc jx nd jz ne ka nf kc ng kd nh ni bi translated">包扎</h1><p id="0e24" class="pw-post-body-paragraph kw kx iq ky b kz nv jr lb lc nw ju le lf nx lh li lj ny ll lm ln nz lp lq lr ij bi translated">最终应该是这样的:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pc"><img src="../Images/7d42c68702e28028ffffffe2519cf694.png" data-original-src="https://miro.medium.com/v2/resize:fit:1152/1*2Wh3jDDQJFqo6PuY4GNZ3g.gif"/></div></figure><p id="47d9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你想了解更多关于FirebaseML的知识，你可以阅读文档。</p><p id="3eae" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您还可以熟悉我在这里创建的完整swift文件:</p><div class="pd pe gp gr pf pg"><a href="https://github.com/AbboskhonShukurullaev/TextRecognition_FirebaseML" rel="noopener  ugc nofollow" target="_blank"><div class="ph ab fo"><div class="pi ab pj cl cj pk"><h2 class="bd ir gy z fp pl fr fs pm fu fw ip bi translated">abboshonshukurullaev/text recognition _ fire base ml</h2><div class="pn l"><h3 class="bd b gy z fp pl fr fs pm fu fw dk translated">在GitHub上创建一个帐户，为abboshonshukurullaev/text recognition _ fire baseml开发做出贡献。</h3></div><div class="po l"><p class="bd b dl z fp pl fr fs pm fu fw dk translated">github.com</p></div></div><div class="pp l"><div class="pq l pr ps pt pp pu kp pg"/></div></div></a></div><p id="e2b2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你有任何批评、问题或建议，欢迎在下面的评论区发表！</p><p id="1ee3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">感谢阅读。</p></div></div>    
</body>
</html>