<html>
<head>
<title>Lodash Methods That Can Be Easily Implemented in Plain JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">可以用普通JavaScript轻松实现的Lodash方法</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/lodash-methods-that-can-be-easily-implemented-in-plain-javascript-bbe22509827e?source=collection_archive---------17-----------------------#2020-04-10">https://levelup.gitconnected.com/lodash-methods-that-can-be-easily-implemented-in-plain-javascript-bbe22509827e?source=collection_archive---------17-----------------------#2020-04-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/2a5dadfddab9331d7e4ce8167ddbca05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*n7YVtJ3h-YaqZ2oq"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">照片由<a class="ae kf" href="https://unsplash.com/@ingbfallas?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Bernal Fallas </a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="53e1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Lodash是一个实用程序库，有很多操作对象的方法。它有我们一直在使用的东西，也有我们不常使用或不想使用的东西。</p><p id="f19c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以用普通的JavaScript实现许多Lodash方法。在本文中，我们将研究一些可以用普通JavaScript实现的数组方法。</p><h1 id="6bfc" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated"><code class="fe mc md me mf b">chunk</code></h1><p id="8519" class="pw-post-body-paragraph kg kh it ki b kj mg kl km kn mh kp kq kr mi kt ku kv mj kx ky kz mk lb lc ld im bi translated">在Lodash中，<code class="fe mc md me mf b">chunk</code>方法根据大小将数组分成不同的组。我们可以用普通的JavaScript实现如下:</p><pre class="ml mm mn mo gt mp mf mq mr aw ms bi"><span id="4a45" class="mt lf it mf b gy mu mv l mw mx">const chunk = (arr, size) =&gt; {<br/>  const chunkedArr = [];<br/>  for (let i = 0; i &lt; arr.length; i += size) {<br/>    chunkedArr.push(arr.slice(i, i + size));<br/>  }<br/>  return chunkedArr;<br/>}</span></pre><p id="439d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在上面的代码中，我们循环通过<code class="fe mc md me mf b">arr</code>，获取<code class="fe mc md me mf b">size</code>给定大小的块，并将从<code class="fe mc md me mf b">slice</code>返回的每个数组推入<code class="fe mc md me mf b">chunkedArr</code>。</p><p id="8594" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因此，如果我们这样称呼它:</p><pre class="ml mm mn mo gt mp mf mq mr aw ms bi"><span id="036f" class="mt lf it mf b gy mu mv l mw mx">chunk([1, 2, 3, 4, 5, 6], 2)</span></pre><p id="1c35" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们得到:</p><pre class="ml mm mn mo gt mp mf mq mr aw ms bi"><span id="00fe" class="mt lf it mf b gy mu mv l mw mx">[<br/>  [<br/>    1,<br/>    2<br/>  ],<br/>  [<br/>    3,<br/>    4<br/>  ],<br/>  [<br/>    5,<br/>    6<br/>  ]<br/>]</span></pre><h1 id="435a" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated"><code class="fe mc md me mf b">compact</code></h1><p id="5f83" class="pw-post-body-paragraph kg kh it ki b kj mg kl km kn mh kp kq kr mi kt ku kv mj kx ky kz mk lb lc ld im bi translated"><code class="fe mc md me mf b">compact</code>方法返回一个移除了falsy值的数组。JavaScript中的Falsy值包括<code class="fe mc md me mf b">false</code>、0、<code class="fe mc md me mf b">null</code>、<code class="fe mc md me mf b">undefined</code>和<code class="fe mc md me mf b">NaN</code>。</p><p id="0fa3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以编写以下代码来实现<code class="fe mc md me mf b">compact</code>:</p><pre class="ml mm mn mo gt mp mf mq mr aw ms bi"><span id="c6df" class="mt lf it mf b gy mu mv l mw mx">const compact = (arr) =&gt; {<br/>  return arr.filter(a =&gt; !!a);<br/>}</span></pre><p id="59e5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们所要做的就是用回调函数<code class="fe mc md me mf b">a =&gt; !!a</code>调用<code class="fe mc md me mf b">filter</code>方法，该函数返回一个数组，其中包含原始数组中的所有真值元素。</p><p id="2dee" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">那么当我们这样称呼它的时候:</p><pre class="ml mm mn mo gt mp mf mq mr aw ms bi"><span id="c211" class="mt lf it mf b gy mu mv l mw mx">compact([1, 2, 3, false, undefined])</span></pre><p id="4215" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们得到:</p><pre class="ml mm mn mo gt mp mf mq mr aw ms bi"><span id="1d9e" class="mt lf it mf b gy mu mv l mw mx">[<br/>  1,<br/>  2,<br/>  3<br/>]</span></pre><p id="1b90" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">从我们的<code class="fe mc md me mf b">compact</code>函数返回。</p><h1 id="682e" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated"><code class="fe mc md me mf b">concat</code></h1><p id="fe35" class="pw-post-body-paragraph kg kh it ki b kj mg kl km kn mh kp kq kr mi kt ku kv mj kx ky kz mk lb lc ld im bi translated">Lodash <code class="fe mc md me mf b">concat</code>方法将多个数组连接成一个数组并返回它。它的工作原理是将嵌套数组的嵌套深度减少一级，然后将它们放入返回的数组中。</p><p id="0965" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以编写以下代码来创建我们自己的<code class="fe mc md me mf b">concat</code>方法:</p><pre class="ml mm mn mo gt mp mf mq mr aw ms bi"><span id="c442" class="mt lf it mf b gy mu mv l mw mx">const concat = (arr) =&gt; {<br/>  return arr.reduce((a, b) =&gt; a.concat(b), [])<br/>}</span></pre><p id="f86b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在上面的代码中，我们使用了<code class="fe mc md me mf b">reduce</code>方法和<code class="fe mc md me mf b">concat</code>方法将多个数组组合成一个。</p><p id="79cc" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Array的内置<code class="fe mc md me mf b">concat</code>方法对于组合数组很有用。如果我们用以下方式调用我们的<code class="fe mc md me mf b">concat</code>方法:</p><pre class="ml mm mn mo gt mp mf mq mr aw ms bi"><span id="ba43" class="mt lf it mf b gy mu mv l mw mx">concat([1, 2, 3, [4],<br/>  [<br/>    [5]<br/>  ]<br/>])</span></pre><p id="e6fb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们得到:</p><pre class="ml mm mn mo gt mp mf mq mr aw ms bi"><span id="cc35" class="mt lf it mf b gy mu mv l mw mx">[<br/>  1,<br/>  2,<br/>  3,<br/>  4,<br/>  [<br/>    5<br/>  ]<br/>]</span></pre><p id="89a8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">就像我们用<code class="fe mc md me mf b">concat</code>方法做的那样。JavaScript array内置的<code class="fe mc md me mf b">concat</code>方法也将嵌套深度减少了1。</p><h1 id="c1ac" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">差异</h1><p id="8b1e" class="pw-post-body-paragraph kg kh it ki b kj mg kl km kn mh kp kq kr mi kt ku kv mj kx ky kz mk lb lc ld im bi translated"><code class="fe mc md me mf b">difference</code>方法让我们从一个给定的数组中找到不在另一个数组中的元素。</p><p id="8204" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以用JavaScript的内置数组方法实现或拥有等价的函数，如下所示:</p><pre class="ml mm mn mo gt mp mf mq mr aw ms bi"><span id="7ec4" class="mt lf it mf b gy mu mv l mw mx">const difference = (arr, arr2) =&gt; {<br/>  return arr.filter(a =&gt; !arr2.includes(a));<br/>}</span></pre><p id="795d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在上面的代码中，我们有<code class="fe mc md me mf b">difference</code>方法，它是通过使用<code class="fe mc md me mf b">filter</code>方法实现的。在我们传递给<code class="fe mc md me mf b">filter</code>的回调中，我们只是返回<code class="fe mc md me mf b">!arr2.includes(a)</code>来查找不在<code class="fe mc md me mf b">arr2</code>中的项目。</p><h1 id="dbe5" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated"><code class="fe mc md me mf b">drop</code></h1><p id="2edd" class="pw-post-body-paragraph kg kh it ki b kj mg kl km kn mh kp kq kr mi kt ku kv mj kx ky kz mk lb lc ld im bi translated"><code class="fe mc md me mf b">drop</code>方法创建一个数组，从开始处删除给定数量的元素。</p><p id="76c7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以通过编写以下代码来实现它:</p><pre class="ml mm mn mo gt mp mf mq mr aw ms bi"><span id="a0f8" class="mt lf it mf b gy mu mv l mw mx">const drop = (arr, n) =&gt; {<br/>  return arr.slice(n);<br/>}</span></pre><p id="6cdd" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们只是将<code class="fe mc md me mf b">n</code>直接传递给<code class="fe mc md me mf b">slice</code>来返回一个数组，从原始数组中删除第一个<code class="fe mc md me mf b">n</code>项。</p><p id="a0a0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">那么当我们这样称呼它的时候:</p><pre class="ml mm mn mo gt mp mf mq mr aw ms bi"><span id="137e" class="mt lf it mf b gy mu mv l mw mx">drop([1, 2, 3, 4, 5], 2)</span></pre><p id="5173" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们得到:</p><pre class="ml mm mn mo gt mp mf mq mr aw ms bi"><span id="8b2d" class="mt lf it mf b gy mu mv l mw mx">[<br/>  3,<br/>  4,<br/>  5<br/>]</span></pre><figure class="ml mm mn mo gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi my"><img src="../Images/bf280105c7332755a84fbab97695da61.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*YCt9u-OBlrQ0BAvX"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">由<a class="ae kf" href="https://unsplash.com/@lukispitaler?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Lukas Spitaler </a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><h1 id="d57d" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated"><code class="fe mc md me mf b">dropRight</code></h1><p id="bd12" class="pw-post-body-paragraph kg kh it ki b kj mg kl km kn mh kp kq kr mi kt ku kv mj kx ky kz mk lb lc ld im bi translated"><code class="fe mc md me mf b">dropRight</code>方法与<code class="fe mc md me mf b">drop</code>相反。它返回一个数组，从右边开始丢弃给定数量的元素。</p><p id="f964" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">同样，我们可以使用<code class="fe mc md me mf b">slice</code>来实现<code class="fe mc md me mf b">dropRight</code>，如下所示:</p><pre class="ml mm mn mo gt mp mf mq mr aw ms bi"><span id="1ba1" class="mt lf it mf b gy mu mv l mw mx">const dropRight = (arr, n) =&gt; {<br/>  return arr.slice(0, -n);<br/>}</span></pre><p id="a93e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们只是将乘以1的<code class="fe mc md me mf b">n</code>传递给<code class="fe mc md me mf b">slice</code>来返回一个数组，其中第一个<code class="fe mc md me mf b">n</code>项从原始数组中删除。</p><p id="fe0c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">那么当我们这样称呼它的时候:</p><pre class="ml mm mn mo gt mp mf mq mr aw ms bi"><span id="cefc" class="mt lf it mf b gy mu mv l mw mx">dropRight([1, 2, 3, 4, 5], 2)</span></pre><p id="8638" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们得到:</p><pre class="ml mm mn mo gt mp mf mq mr aw ms bi"><span id="8267" class="mt lf it mf b gy mu mv l mw mx">[<br/>  1,<br/>  2,<br/>  3<br/>]</span></pre><p id="38a0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因为最后两个元素已从返回的数组中移除。</p><h1 id="17c8" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">结论</h1><p id="150b" class="pw-post-body-paragraph kg kh it ki b kj mg kl km kn mh kp kq kr mi kt ku kv mj kx ky kz mk lb lc ld im bi translated">Lodash中的许多方法都可以用普通的JavaScript通过一些方法调用和操作轻松实现。</p><p id="339e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以遍历我们的数组，并使用数组的<code class="fe mc md me mf b">slice</code>方法来实现<code class="fe mc md me mf b">chunk</code>。<code class="fe mc md me mf b">slice</code>对<code class="fe mc md me mf b">drop</code>和<code class="fe mc md me mf b">dropRight</code>也有用。</p><p id="99e1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要实现<code class="fe mc md me mf b">compact</code>，我们只需要用返回真值的回调函数调用<code class="fe mc md me mf b">filter</code>。</p><p id="8c34" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最后，为了实现<code class="fe mc md me mf b">concat</code>，我们可以使用数组的内置<code class="fe mc md me mf b">concat</code>方法来重复连接<code class="fe mc md me mf b">reduce</code>。</p></div></div>    
</body>
</html>