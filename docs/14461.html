<html>
<head>
<title>Animating a Static Image with CSS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用CSS制作静态图像动画</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/animating-a-static-image-with-css-270d796e2ff2?source=collection_archive---------3-----------------------#2022-11-29">https://levelup.gitconnected.com/animating-a-static-image-with-css-270d796e2ff2?source=collection_archive---------3-----------------------#2022-11-29</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="0071" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何创建一个动画版本的JPEG图像…只用几行CSS</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/a14e52305825413df769e5c41634011e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*YHRPEadXlG4Prlx3.png"/></div></div></figure><p id="3fdd" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我制作了一个<a class="ae lq" href="https://codepen.io/alvaromontoro/pen/exYOwd" rel="noopener ugc nofollow" target="_blank">小动画，蝙蝠飞过人们</a>从桥上看<a class="ae lq" href="https://codepen.io/challenges/2019/january/3" rel="noopener ugc nofollow" target="_blank"> CodePen编程挑战</a>。这听起来没什么，但是如果我提到它是JPEG格式的静态图像，没有任何透明度或矢量值，那就更有趣了。</p><p id="b130" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">那么，我们怎么可能从这样一个静态图像:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lr"><img src="../Images/074fb77e4124f886cdf2d58b19c780aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*py7Ee13gORRV_5GI.jpg"/></div></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk translated">来源:<a class="ae lq" href="https://www.batsinaustin.com/" rel="noopener ugc nofollow" target="_blank">batsinaustin.com</a></figcaption></figure><p id="6dd2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">…变成下图这样的动画？所有这些都不需要在浏览器之外编辑图像，也不需要改变格式或原始图像内容？</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="23ca" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们如何只用一个HTML元素和几行CSS就完成所有这些呢？我们一步一步来查。</p><h1 id="28b0" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">HTML</h1><p id="96d1" class="pw-post-body-paragraph ku kv it kw b kx mq ju kz la mr jx lc ld ms lf lg lh mt lj lk ll mu ln lo lp im bi translated">首先，HTML:我们需要一个元素来包含图像:</p><pre class="kj kk kl km gt mv mw mx bn my mz bi"><span id="46a4" class="na lz it mw b be nb nc l nd ne">&lt;div&gt;&lt;div&gt;</span></pre><p id="fd83" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">就是这样！这就是我们在这个演示中需要的所有HTML。剩下的代码是CSS样式。</p><h1 id="16ff" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">CSS</h1><h2 id="531e" class="nf lz it bd ma ng nh dn me ni nj dp mi ld nk nl mk lh nm nn mm ll no np mo nq bi translated">初始样式</h2><p id="04c4" class="pw-post-body-paragraph ku kv it kw b kx mq ju kz la mr jx lc ld ms lf lg lh mt lj lk ll mu ln lo lp im bi translated"><code class="fe nr ns nt mw b">div</code>必须与图像具有相同的比例(相同的纵横比),因为我们将使用它作为背景，并希望它占据整个容器。在这种情况下，照片的宽度大于高度，长宽比为2:1。</p><blockquote class="nu nv nw"><p id="eec8" class="ku kv nx kw b kx ky ju kz la lb jx lc ny le lf lg nz li lj lk oa lm ln lo lp im bi translated">作者注:本文最初发表于2019年，当时<code class="fe nr ns nt mw b">aspect-ratio</code>属性没有得到很好的支持。我更新了部分代码，仍然没有使用<code class="fe nr ns nt mw b">aspect-ratio</code>。尽管如此，对代码进行现代化仍然是一个有趣的特性。</p></blockquote><p id="39a5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">初始CSS将决定<code class="fe nr ns nt mw b">div</code>的大小及其在屏幕中的绝对位置:</p><pre class="kj kk kl km gt mv mw mx bn my mz bi"><span id="b8b1" class="na lz it mw b be nb nc l nd ne">div {<br/>  /* the width and height have a 2:1 proportion */<br/>  width: 100vw;<br/>  height: 50vw;<br/>  /* center the element vertically and horizontally */<br/>  position: absolute;<br/>  top: 50%;<br/>  left: 50%;<br/>  transform: translate(-50%, -50%);<br/>}</span></pre><p id="73fd" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们很快就会回到这个<code class="fe nr ns nt mw b">div</code>。让我们把它放在一边，而把重点放在生成动画的伪元素上。</p><h2 id="e47d" class="nf lz it bd ma ng nh dn me ni nj dp mi ld nk nl mk lh nm nn mm ll no np mo nq bi translated">图像</h2><p id="e88e" class="pw-post-body-paragraph ku kv it kw b kx mq ju kz la mr jx lc ld ms lf lg lh mt lj lk ll mu ln lo lp im bi translated">应用以下样式后，我们将使<code class="fe nr ns nt mw b">::after</code>伪元素占据其祖先的整个宽度，将目标图像作为背景，并适合可用的大小:</p><pre class="kj kk kl km gt mv mw mx bn my mz bi"><span id="a12f" class="na lz it mw b be nb nc l nd ne">div::after {<br/>  content: "";<br/>  position: absolute;<br/>  width: 100%;<br/>  height: 100%;<br/>  background: url("https://i.stack.imgur.com/w8noS.jpg");<br/>  background-position: top left;<br/>  background-size: 100% 100%;<br/>}</span></pre><p id="8ff8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">有了这个，我们在屏幕上显示图像；让我们进入有趣的部分:应用CSS滤镜！</p><h2 id="4741" class="nf lz it bd ma ng nh dn me ni nj dp mi ld nk nl mk lh nm nn mm ll no np mo nq bi translated">过滤器</h2><p id="c268" class="pw-post-body-paragraph ku kv it kw b kx mq ju kz la mr jx lc ld ms lf lg lh mt lj lk ll mu ln lo lp im bi translated">到目前为止，我们有没有任何修改的原始图像:一群人在一座桥上，看着蝙蝠飞过他们。</p><p id="7c9f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们回顾一下我们可以应用的一些<a class="ae lq" href="https://developer.mozilla.org/en-US/docs/Web/CSS/filter" rel="noopener ugc nofollow" target="_blank">滤镜</a>，这样看起来更像一幅漫画:</p><ul class=""><li id="5f64" class="ob oc it kw b kx ky la lb ld od lh oe ll of lp og oh oi oj bi translated">这将从图像中移除亮度，将其转换为灰度版本，使一些颜色混合并融合成相同的灰度。</li><li id="dab3" class="ob oc it kw b kx ok la ol ld om lh on ll oo lp og oh oi oj bi translated"><code class="fe nr ns nt mw b">contrast(400%)</code>:通过具有高对比度值，灰度图像变成黑色和白色(仅仅是黑色和白色)，留下原始图像的轮廓。</li><li id="db6d" class="ob oc it kw b kx ok la ol ld om lh on ll oo lp og oh oi oj bi translated"><code class="fe nr ns nt mw b">invert(1)</code>:反转颜色:黑色现在是白色，反之亦然。这就增加了一些“戏剧性”:蝙蝠夜间飞行，现在天空是暗的而不是白的。</li></ul><p id="e064" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在CSS中，我们需要将这个属性添加到<code class="fe nr ns nt mw b">::after</code>:</p><pre class="kj kk kl km gt mv mw mx bn my mz bi"><span id="ef51" class="na lz it mw b be nb nc l nd ne">filter: saturate(0) contrast(400%) invert(1);</span></pre><p id="ea4c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">应用这些过滤器后，我们的图像变成了一个轮廓鲜明的边缘。它看起来更像一部卡通片而不是一幅画。是时候开始了…</p><h2 id="b68b" class="nf lz it bd ma ng nh dn me ni nj dp mi ld nk nl mk lh nm nn mm ll no np mo nq bi translated">混合</h2><p id="f0ba" class="pw-post-body-paragraph ku kv it kw b kx mq ju kz la mr jx lc ld ms lf lg lh mt lj lk ll mu ln lo lp im bi translated"><code class="fe nr ns nt mw b">mix-blend-mode</code>属性允许开发者指定元素如何与背景融合。通过增加<code class="fe nr ns nt mw b">multiply</code>的值，白色将变成“透明的”，其背后的细节将可见。</p><p id="d11c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">只需将该属性添加到伪元素中:</p><pre class="kj kk kl km gt mv mw mx bn my mz bi"><span id="01f4" class="na lz it mw b be nb nc l nd ne">mix-blend-mode: multiply</span></pre><blockquote class="nu nv nw"><p id="10ae" class="ku kv nx kw b kx ky ju kz la lb jx lc ny le lf lg nz li lj lk oa lm ln lo lp im bi translated">作者注:当我最初写这篇文章时，只有少数浏览器支持<code class="fe nr ns nt mw b">mix-blend-mode</code>。<a class="ae lq" href="https://caniuse.com/css-mixblendmode" rel="noopener ugc nofollow" target="_blank">那个属性现在得到了很好的支持</a>，应该不成问题，至少对于<code class="fe nr ns nt mw b">multiply</code>值来说是这样。</p></blockquote><h2 id="ac58" class="nf lz it bd ma ng nh dn me ni nj dp mi ld nk nl mk lh nm nn mm ll no np mo nq bi translated">动画</h2><p id="8b98" class="pw-post-body-paragraph ku kv it kw b kx mq ju kz la mr jx lc ld ms lf lg lh mt lj lk ll mu ln lo lp im bi translated">完成我们的动画只缺少两个步骤；一个是添加<a class="ae lq" href="https://developer.mozilla.org/en-US/docs/Web/CSS/animation" rel="noopener ugc nofollow" target="_blank"> CSS动画</a>本身。我们将创建一个从屏幕右下角移动到左上角的阴影。</p><blockquote class="nu nv nw"><p id="31e0" class="ku kv nx kw b kx ky ju kz la lb jx lc ny le lf lg nz li lj lk oa lm ln lo lp im bi translated">作者注:原始动画效率不高(它移动了用<code class="fe nr ns nt mw b">box-shadow</code>创建的插入阴影)。对于这篇文章，我们更新了动画以使其个性化，它更好(动画<code class="fe nr ns nt mw b">transform</code>更高效)，更流畅(你的电脑迷稍后会感谢你)。</p></blockquote><p id="e431" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">为了达到这个效果，我们将使用<code class="fe nr ns nt mw b">::before</code>伪元素(默认情况下在<code class="fe nr ns nt mw b">::after</code>下面)来创建一个圆形的粉红色背景。然后我们将使用一个<code class="fe nr ns nt mw b">keyframes</code>规则来定义一个简单的动画，它使用<code class="fe nr ns nt mw b">transform</code>和<code class="fe nr ns nt mw b">transate()</code>在屏幕上移动元素:</p><pre class="kj kk kl km gt mv mw mx bn my mz bi"><span id="8365" class="na lz it mw b be nb nc l nd ne">/* the animation moves the element diagonally from right to left*/<br/>@keyframes moverSombraRosa {<br/>  0% { transform: translate(80vw, 0vw); }<br/>  100% { transform: translate(-80vw, -30vw);}<br/>}<br/><br/>/* the ::before pseudo-element will move with the animation */<br/>div::before {<br/>  content: "";<br/>  position: absolute;<br/>  width: 100%;<br/>  height: 100%;<br/>  /* a pink ellipse to transparent background */<br/>  background: radial-gradient(farthest-side, #FF1EAD 35%, #FF1EAD00 70%);<br/>  /* the animation */<br/>  animation: moverSombraRosa 6s infinite;<br/>}</span></pre><p id="19c8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这种效果就像蝙蝠被对角着色(透明，然后是粉红色，最后又是透明)，但实际上，它们总是“透明的”，粉红色的阴影在它们后面移动。</p><p id="6ba1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们可以稍微改变一下动画值，使它们不那么“神奇”，但是我们也冒着把人涂成粉红色的风险。我们可以使用<code class="fe nr ns nt mw b">mix-blend-mode: lighten</code>来避免这种意想不到的着色，但是选择保持文章的演示简单。</p><p id="a9ec" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">最后的润色与页面的背景有关。如果我们让它一半黑(在顶部)，一半白(在底部)，图像会看起来更好，在页面内流动更自然。</p><p id="06ff" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">经过所有这些变化，结果是一个动画看起来很卡通，但它是用一个静态的JPG图像创建的:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lw lx l"/></div></figure><h1 id="711d" class="ly lz it bd ma mb mc md me mf mg mh mi jz mj ka mk kc ml kd mm kf mn kg mo mp bi translated">结论</h1><p id="8b3c" class="pw-post-body-paragraph ku kv it kw b kx mq ju kz la mr jx lc ld ms lf lg lh mt lj lk ll mu ln lo lp im bi translated">多亏了这个编码挑战，我开始玩和练习CSS滤镜和混合模式(尤其是后者，我没怎么用过)。这让我读了很多书，学到了很多东西。</p><p id="92ca" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">最初的版本看起来还可以，但是随着过去3-4年的变化，它变得很慢而且过时了。这个新版本保持了原来的精神，但效率更高(从不更新阴影)。</p><p id="4ee4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我从研究CSS属性的信息和完成这个编码挑战中获得了很多乐趣；期待下一个。</p><blockquote class="nu nv nw"><p id="364b" class="ku kv nx kw b kx ky ju kz la lb jx lc ny le lf lg nz li lj lk oa lm ln lo lp im bi translated">本文更新自2019年1月27日发表在Codepen (和<a class="ae lq" href="https://alvaromontoro.com/blog/67832/cartoonifying-and-animating-a-still-photograph" rel="noopener ugc nofollow" target="_blank">作者网站</a>)上的一篇<a class="ae lq" href="https://codepen.io/alvaromontoro/post/cartoonify-and-animate-a-photo" rel="noopener ugc nofollow" target="_blank">原创。</a></p></blockquote></div></div>    
</body>
</html>