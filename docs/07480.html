<html>
<head>
<title>Setting Up a Raspberry Pi Cluster</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">设置Raspberry Pi集群</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/setting-up-a-raspberry-pi-cluster-b0fda1ee44ba?source=collection_archive---------8-----------------------#2021-02-21">https://levelup.gitconnected.com/setting-up-a-raspberry-pi-cluster-b0fda1ee44ba?source=collection_archive---------8-----------------------#2021-02-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/2639429b94fe9cfaca209a022fc58d79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/format:webp/1*F7NSUlpIgO84UOH2yx8PkQ.png"/></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk translated">标志出自<a class="ae jy" href="https://www.raspberrypi.org/" rel="noopener ugc nofollow" target="_blank">raspberrypi.org</a></figcaption></figure><p id="c85d" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">在您的家庭桌面上设置本地Raspberry Pi集群的安装说明。</p><p id="74a4" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated"><a class="ae jy" href="#664d" rel="noopener ugc nofollow">sd卡上的操作系统</a> <br/> <a class="ae jy" href="#034c" rel="noopener ugc nofollow">网络设置</a> <br/> <a class="ae jy" href="#563e" rel="noopener ugc nofollow"> RPi配置</a> <br/> <a class="ae jy" href="#54f7" rel="noopener ugc nofollow"> SSH配置</a> <br/> ∘ <a class="ae jy" href="#cb08" rel="noopener ugc nofollow">客户端</a> <br/> ∘ <a class="ae jy" href="#3f73" rel="noopener ugc nofollow"> RPi服务器</a> <br/> <a class="ae jy" href="#ab77" rel="noopener ugc nofollow">验证</a> <br/> <a class="ae jy" href="#3282" rel="noopener ugc nofollow">故障排除</a> <br/> ∘ <a class="ae jy" href="#952f" rel="noopener ugc nofollow">区域设置问题</a> <br/> <a class="ae jy" href="#a3be" rel="noopener ugc nofollow">总结</a></p><blockquote class="kx ky kz"><p id="f9c2" class="jz ka la kb b kc kd ke kf kg kh ki kj lb kl km kn lc kp kq kr ld kt ku kv kw ij bi translated"><strong class="kb ir">注意:</strong>在这篇文章发表的时候，还没有支持64位系统的官方<code class="fe le lf lg lh b">Raspberry Pi OS</code>图像。有<a class="ae jy" href="https://downloads.raspberrypi.org/raspios_arm64/images/" rel="noopener ugc nofollow" target="_blank">测试版</a>，但有局限性。这篇博文在正式发布之前不会涉及它们。</p></blockquote><figure class="lj lk ll lm gt jr gh gi paragraph-image"><div class="gh gi li"><img src="../Images/21b0c379dc7421122a7183abc4ada3e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:720/format:webp/1*Uj_U_qx1UrWTeYGZdr3_EA.png"/></div></figure><h1 id="664d" class="ln lo iq bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">SD卡上的操作系统</h1><p id="e6de" class="pw-post-body-paragraph jz ka iq kb b kc ml ke kf kg mm ki kj kk mn km kn ko mo kq kr ks mp ku kv kw ij bi translated">1.将SD卡连接到您的本地机器(笔记本电脑/台式机)</p><p id="cfae" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">2.从<a class="ae jy" href="https://www.raspberrypi.org/software/operating-systems/#raspberry-pi-os-32-bit" rel="noopener ugc nofollow" target="_blank">这里</a>下载<code class="fe le lf lg lh b">Raspberry Pi OS Lite (Debian Buster)</code>图像</p><p id="2e84" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">3.使用此处中<a class="ae jy" href="https://www.raspberrypi.org/software/" rel="noopener ugc nofollow" target="_blank">指定的<code class="fe le lf lg lh b">Raspberry Pi Imager</code>刷新操作系统映像</a></p><figure class="lj lk ll lm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="gh gi mq"><img src="../Images/b05eb483786a5c4bbbd75b5db1bd5b85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Eamocb6StxfSkWnZzHsKFg.png"/></div></div></figure><p id="e8f4" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">4.闪烁后，弹出SD卡并将其重新连接到本地机器</p><p id="12af" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">5.检查<code class="fe le lf lg lh b">boot</code>连接的设备</p><p id="3785" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">6.安装SD卡</p><p id="f6f0" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">7.打开一个终端会话，在引导分区中创建一个名为<code class="fe le lf lg lh b">ssh</code>的文本文件</p><pre class="lj lk ll lm gt mv lh mw mx aw my bi"><span id="14cb" class="mz lo iq lh b gy na nb l nc nd"># If you are working on macOS<br/>sudo touch /Volumes/boot/ssh</span><span id="31cc" class="mz lo iq lh b gy ne nb l nc nd"># Other Unix-like operating system<br/>sudo touch &lt;path-to-rpi-boot-volume&gt;/ssh</span></pre><p id="d1fc" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">8.弹出SD卡并将其连接到Raspberry Pi</p></div><div class="ab cl nf ng hu nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="ij ik il im in"><h1 id="034c" class="ln lo iq bd lp lq nm ls lt lu nn lw lx ly no ma mb mc np me mf mg nq mi mj mk bi translated">网络安装程序</h1><ol class=""><li id="d6df" class="nr ns iq kb b kc ml kg mm kk nt ko nu ks nv kw nw nx ny nz bi translated">启动RPi并直接连接到家用路由器</li><li id="3822" class="nr ns iq kb b kc oa kg ob kk oc ko od ks oe kw nw nx ny nz bi translated">打开路由器网络<a class="ae jy" href="http://192.168.1.1/" rel="noopener ugc nofollow" target="_blank">仪表板</a></li></ol><blockquote class="kx ky kz"><p id="951a" class="jz ka la kb b kc kd ke kf kg kh ki kj lb kl km kn lc kp kq kr ld kt ku kv kw ij bi translated"><strong class="kb ir">注意:</strong>您的路由器仪表板地址可能会有所不同，请查阅您的路由器制造指南。</p></blockquote><p id="634a" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">3.在<code class="fe le lf lg lh b">LAN settings</code> - &gt; <code class="fe le lf lg lh b">Client List</code>下验证是否有新的<code class="fe le lf lg lh b">raspberrypi</code>客户端</p><p id="e78a" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">4.使用本<a class="ae jy" href="http://blog.zachinachshon.com/rpi-network/" rel="noopener ugc nofollow" target="_blank">指南</a>分配一个静态IP地址</p></div><div class="ab cl nf ng hu nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="ij ik il im in"><h1 id="563e" class="ln lo iq bd lp lq nm ls lt lu nn lw lx ly no ma mb mc np me mf mg nq mi mj mk bi translated">RPi配置</h1><p id="c20d" class="pw-post-body-paragraph jz ka iq kb b kc ml ke kf kg mm ki kj kk mn km kn ko mo kq kr ks mp ku kv kw ij bi translated">1.使用前面步骤中的IP地址和默认密码<code class="fe le lf lg lh b">raspberry</code>使用<code class="fe le lf lg lh b">ssh pi@&lt;RPI-IP-ADDRESS&gt;</code>SSH进入服务器</p><p id="86d5" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">2.通过编辑RPi配置文件<code class="fe le lf lg lh b">sudo vi /boot/config.txt</code>并将<code class="fe le lf lg lh b">gpu_mem=16</code>追加到其中，将GPU内存分割设置为16MB</p><blockquote class="kx ky kz"><p id="e089" class="jz ka la kb b kc kd ke kf kg kh ki kj lb kl km kn lc kp kq kr ld kt ku kv kw ij bi translated"><strong class="kb ir">注意:</strong>我们指定了为GPU(显示器)保留的最小内存，因为我们不需要用户界面。</p></blockquote><p id="edc6" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">3.使用<code class="fe le lf lg lh b">sudo reboot</code>重启以使更改生效</p><p id="61b6" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">4.再次SSH到RPI服务器并键入<code class="fe le lf lg lh b">sudo raspi-config</code>。编辑以下设置:</p><ul class=""><li id="0435" class="nr ns iq kb b kc kd kg kh kk of ko og ks oh kw oi nx ny nz bi translated">更改<code class="fe le lf lg lh b">pi</code>用户的密码(<strong class="kb ir">推荐</strong>)</li><li id="1655" class="nr ns iq kb b kc oa kg ob kk oc ko od ks oe kw oi nx ny nz bi translated">根据您的喜好设置主机名</li><li id="7cb3" class="nr ns iq kb b kc oa kg ob kk oc ko od ks oe kw oi nx ny nz bi translated">确保SSH服务器已启用</li></ul><blockquote class="kx ky kz"><p id="cca2" class="jz ka la kb b kc kd ke kf kg kh ki kj lb kl km kn lc kp kq kr ld kt ku kv kw ij bi translated"><strong class="kb ir">注意:</strong>如果您计划将这个服务器用作Kubernetes主服务器，那么就将其命名为<code class="fe le lf lg lh b">kmaster</code>。如果它是一个Kubernetes worker节点，将其命名为<code class="fe le lf lg lh b">knode&lt;number&gt;</code>，而<code class="fe le lf lg lh b">&lt;number&gt;</code>是集群栈的下一个内联编号。</p></blockquote><figure class="lj lk ll lm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="gh gi oj"><img src="../Images/75b83ca6a4aa05cc90b3fff83937c5c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TCSnBGr4TvkdIq9z2skeHQ.png"/></div></div></figure><p id="9c93" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">5.关闭SSH会话，并重新连接到RPi服务器</p><p id="6970" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">6.验证主机名设置是否正确，如果需要，强制手动替换。从RPi终端:</p><ul class=""><li id="1a3f" class="nr ns iq kb b kc kd kg kh kk of ko og ks oh kw oi nx ny nz bi translated">运行<code class="fe le lf lg lh b">cat /etc/hostname</code>并检查<code class="fe le lf lg lh b">kmaster</code></li><li id="6d86" class="nr ns iq kb b kc oa kg ob kk oc ko od ks oe kw oi nx ny nz bi translated">运行<code class="fe le lf lg lh b">cat /etc/hosts</code>并检查<code class="fe le lf lg lh b">127.0.1.1 kmaster</code></li><li id="22ae" class="nr ns iq kb b kc oa kg ob kk oc ko od ks oe kw oi nx ny nz bi translated">运行<code class="fe le lf lg lh b">hostname</code>将返回<code class="fe le lf lg lh b">kmaster</code>，否则运行<code class="fe le lf lg lh b">sudo hostname kmaster</code>并再次检查</li></ul><blockquote class="kx ky kz"><p id="fe71" class="jz ka la kb b kc kd ke kf kg kh ki kj lb kl km kn lc kp kq kr ld kt ku kv kw ij bi translated"><strong class="kb ir">注意:</strong>如果您正在设置Kubernetes集群，请根据服务器类型使用<code class="fe le lf lg lh b">kmaster</code>或<code class="fe le lf lg lh b">knode&lt;number&gt;</code>。</p></blockquote><p id="9ffd" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">7.<strong class="kb ir">(可选):</strong>在RPi服务器上安装您喜爱的实用程序:</p><pre class="lj lk ll lm gt mv lh mw mx aw my bi"><span id="4de4" class="mz lo iq lh b gy na nb l nc nd"># Use Vim as a text editor<br/>sudo apt-get -y install vim</span></pre><p id="bcf2" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">8.<strong class="kb ir">(可选):</strong>在<code class="fe le lf lg lh b">~/.bashrc</code>上设置您的首选别名:</p><pre class="lj lk ll lm gt mv lh mw mx aw my bi"><span id="afc6" class="mz lo iq lh b gy na nb l nc nd"># Open bash run command file for editing<br/>vim ~/.bashrc<br/> <br/># List all files/directories including hidden ones with size unit suffixes <br/>alias l="ls -lah"</span></pre><p id="c149" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">9.<strong class="kb ir">(可选):</strong>如果您计划安装Kubernetes的Rancher <code class="fe le lf lg lh b">k3s</code>版本，您应该通过将它们添加到 <code class="fe le lf lg lh b"><em class="la">/boot/cmdline.txt</em></code> <em class="la">文件</em>的末尾<em class="la">来启用一些容器特性:</em></p><pre class="lj lk ll lm gt mv lh mw mx aw my bi"><span id="2654" class="mz lo iq lh b gy na nb l nc nd"><em class="la"># Edit file using sudo</em><br/>sudo vim /boot/cmdline.txt<br/>   <br/><em class="la"># Append the following</em><br/>cgroup_enable<strong class="lh ir">=</strong>cpuset cgroup_memory<strong class="lh ir">=</strong>1 cgroup_enable<strong class="lh ir">=</strong>memory</span></pre></div><div class="ab cl nf ng hu nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="ij ik il im in"><h1 id="54f7" class="ln lo iq bd lp lq nm ls lt lu nn lw lx ly no ma mb mc np me mf mg nq mi mj mk bi translated">SSH配置</h1><p id="3e23" class="pw-post-body-paragraph jz ka iq kb b kc ml ke kf kg mm ki kj kk mn km kn ko mo kq kr ks mp ku kv kw ij bi translated">我们需要为客户端 RPi服务器通信配置安全外壳访问。它将允许我们从客户端机器(如我们的笔记本电脑)访问RPi服务器，还允许RPi服务器和我们本地安装的实用程序之间的安全通信。</p><h2 id="cb08" class="mz lo iq bd lp ok ol dn lt om on dp lx kk oo op mb ko oq or mf ks os ot mj ou bi translated">客户</h2><p id="a16c" class="pw-post-body-paragraph jz ka iq kb b kc ml ke kf kg mm ki kj kk mn km kn ko mo kq kr ks mp ku kv kw ij bi translated">这些说明与用于连接RPi服务器的计算机相关:</p><ol class=""><li id="6cbb" class="nr ns iq kb b kc kd kg kh kk of ko og ks oh kw nw nx ny nz bi translated">如果目录<code class="fe le lf lg lh b">~/.ssh</code>不存在，则创建该目录，并放入cd中</li><li id="ad6a" class="nr ns iq kb b kc oa kg ob kk oc ko od ks oe kw nw nx ny nz bi translated">运行<code class="fe le lf lg lh b">ssh-keygen</code>(名字为<code class="fe le lf lg lh b">kmaster OR knode&lt;number&gt;</code>，无密码)</li><li id="9298" class="nr ns iq kb b kc oa kg ob kk oc ko od ks oe kw nw nx ny nz bi translated">将私钥<code class="fe le lf lg lh b">kmaster</code>添加到ssh代理中(在永久/临时之间选择)</li></ol><pre class="lj lk ll lm gt mv lh mw mx aw my bi"><span id="23b8" class="mz lo iq lh b gy na nb l nc nd">ssh-add ~/.ssh/kmaster     # Add temporary to keychain<br/>ssh-add -K ~/.ssh/kmaster  # Add permanently to keychain</span></pre><blockquote class="kx ky kz"><p id="f487" class="jz ka la kb b kc kd ke kf kg kh ki kj lb kl km kn lc kp kq kr ld kt ku kv kw ij bi translated"><strong class="kb ir">注意:</strong>这将允许安全通信，而无需每次都提示输入密码。</p></blockquote><p id="564c" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">4.将公钥复制到RPi服务器，选择一个选项:</p><ul class=""><li id="b0c3" class="nr ns iq kb b kc kd kg kh kk of ko og ks oh kw oi nx ny nz bi translated"><strong class="kb ir">备选方案1: </strong></li></ul><pre class="lj lk ll lm gt mv lh mw mx aw my bi"><span id="9346" class="mz lo iq lh b gy na nb l nc nd"># Master node<br/>ssh-copy-id -i ~/.ssh/kmaster.pub pi@&lt;RPI-IP-ADDRESS&gt;<br/> <br/># Worker node<br/>ssh-copy-id -i ~/.ssh/knode&lt;number&gt;.pub pi@&lt;RPI-IP-ADDRESS&gt;</span></pre><blockquote class="kx ky kz"><p id="e559" class="jz ka la kb b kc kd ke kf kg kh ki kj lb kl km kn lc kp kq kr ld kt ku kv kw ij bi translated"><strong class="kb ir">重要提示:</strong>在此步骤中，您需要使用您的密码进行验证。一个名为<code class="fe le lf lg lh b">~/.ssh/authorized_keys</code>的文件是用RPi服务器上的公钥内容自动创建的。</p></blockquote><ul class=""><li id="633f" class="nr ns iq kb b kc kd kg kh kk of ko og ks oh kw oi nx ny nz bi translated"><strong class="kb ir">选项2:(手动)</strong></li></ul><p id="8f6b" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">将<code class="fe le lf lg lh b">kmaster.pub</code> / <code class="fe le lf lg lh b">knode&lt;number&gt;.pub</code>的内容直接复制到RPi <code class="fe le lf lg lh b">authorized_keys</code>文件中:</p><pre class="lj lk ll lm gt mv lh mw mx aw my bi"><span id="0ab2" class="mz lo iq lh b gy na nb l nc nd"><em class="la"># Master node</em><br/>cat ~/.ssh/kmaster.pub | ssh pi@&lt;RPI-IP-ADDRESS&gt; 'mkdir -p ~/.ssh &amp;&amp; cat &gt;&gt; ~/.ssh/authorized_keys'<br/>      <br/><em class="la"># Worker node</em><br/>cat ~/.ssh/knode&lt;number&gt;.pub | ssh pi@&lt;RPI-IP-ADDRESS&gt; 'mkdir -p ~/.ssh &amp;&amp; cat &gt;&gt; ~/.ssh/authorized_keys'</span></pre><blockquote class="kx ky kz"><p id="648b" class="jz ka la kb b kc kd ke kf kg kh ki kj lb kl km kn lc kp kq kr ld kt ku kv kw ij bi translated"><strong class="kb ir">重要提示:</strong>在此步骤中，您需要使用您的密码进行验证。</p></blockquote><p id="adb3" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">5.<strong class="kb ir">(可选):</strong>如果您已经按照此处的<a class="ae jy" href="http://blog.zachinachshon.com/rpi-network/" rel="noopener ugc nofollow" target="_blank">中所述为RPi服务器定义了一个静态IP，请在您的本地机器上添加命名主机记录:</a></p><pre class="lj lk ll lm gt mv lh mw mx aw my bi"><span id="19be" class="mz lo iq lh b gy na nb l nc nd"># Use names instead of IP addresses<br/>echo -e "192.168.1.200\tkmaster" | sudo tee -a /etc/hosts<br/>echo -e "192.168.1.201\tknode1" | sudo tee -a /etc/hosts</span></pre><h2 id="3f73" class="mz lo iq bd lp ok ol dn lt om on dp lx kk oo op mb ko oq or mf ks os ot mj ou bi translated">RPi服务器</h2><p id="bcfc" class="pw-post-body-paragraph jz ka iq kb b kc ml ke kf kg mm ki kj kk mn km kn ko mo kq kr ks mp ku kv kw ij bi translated">这些说明旨在让RPi服务器启用SSH通信:</p><p id="d914" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">1.禁用SSH <code class="fe le lf lg lh b">PasswordAuthentication</code>:</p><ul class=""><li id="2982" class="nr ns iq kb b kc kd kg kh kk of ko og ks oh kw oi nx ny nz bi translated">通过<code class="fe le lf lg lh b">sudo vim /etc/ssh/ssh_config</code>编辑<code class="fe le lf lg lh b">ssh_config</code></li><li id="4d12" class="nr ns iq kb b kc oa kg ob kk oc ko od ks oe kw oi nx ny nz bi translated">通过移除前缀<code class="fe le lf lg lh b">#</code>取消对<code class="fe le lf lg lh b">PasswordAuthentication</code>的注释</li><li id="8217" class="nr ns iq kb b kc oa kg ob kk oc ko od ks oe kw oi nx ny nz bi translated">将其值更改为<code class="fe le lf lg lh b">no</code></li><li id="8374" class="nr ns iq kb b kc oa kg ob kk oc ko od ks oe kw oi nx ny nz bi translated">确保<code class="fe le lf lg lh b">PasswordAuthentication</code>正确对齐(4个空格)</li></ul><p id="a31a" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">2.重启SSH服务器</p><pre class="lj lk ll lm gt mv lh mw mx aw my bi"><span id="4775" class="mz lo iq lh b gy na nb l nc nd">sudo /etc/init.d/ssh restart<br/>sudo /etc/init.d/ssh status   # Verify SSH server is running</span></pre></div><div class="ab cl nf ng hu nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="ij ik il im in"><h1 id="ab77" class="ln lo iq bd lp lq nm ls lt lu nn lw lx ly no ma mb mc np me mf mg nq mi mj mk bi translated">确认</h1><p id="f6ab" class="pw-post-body-paragraph jz ka iq kb b kc ml ke kf kg mm ki kj kk mn km kn ko mo kq kr ks mp ku kv kw ij bi translated">要验证所有设置是否正确，请尝试使用以下命令从客户端机器(即笔记本电脑)连接到RPi服务器:</p><pre class="lj lk ll lm gt mv lh mw mx aw my bi"><span id="67bd" class="mz lo iq lh b gy na nb l nc nd">ssh pi@kmaster<br/>ssh pi@knode&lt;number&gt;</span></pre></div><div class="ab cl nf ng hu nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="ij ik il im in"><h1 id="3282" class="ln lo iq bd lp lq nm ls lt lu nn lw lx ly no ma mb mc np me mf mg nq mi mj mk bi translated">解决纷争</h1><h2 id="952f" class="mz lo iq bd lp ok ol dn lt om on dp lx kk oo op mb ko oq or mf ks os ot mj ou bi translated">区域设置问题</h2><p id="5c60" class="pw-post-body-paragraph jz ka iq kb b kc ml ke kf kg mm ki kj kk mn km kn ko mo kq kr ks mp ku kv kw ij bi translated">连接到RPi服务器和/或在服务器节点上运行<code class="fe le lf lg lh b">locale</code>时出现区域错误/警告。以下是一些错误示例:</p><pre class="lj lk ll lm gt mv lh mw mx aw my bi"><span id="7191" class="mz lo iq lh b gy na nb l nc nd">setlocale: LC_ALL: cannot change locale <strong class="lh ir">(</strong>en_US.UTF-8<strong class="lh ir">)</strong><br/>locale: Cannot set LC_CTYPE to default locale: No such file or directory<br/>locale: Cannot set LC_MESSAGES to default locale: No such file or directory<br/>locale: Cannot set LC_ALL to default locale: No such file or directory</span></pre><p id="7eb5" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated"><strong class="kb ir">解决方案:</strong>我们将通过运行以下步骤将我们的语言环境设置为<code class="fe le lf lg lh b">en_US</code>:</p><ol class=""><li id="1712" class="nr ns iq kb b kc kd kg kh kk of ko og ks oh kw nw nx ny nz bi translated">到RPi服务器的SSH</li><li id="acc2" class="nr ns iq kb b kc oa kg ob kk oc ko od ks oe kw nw nx ny nz bi translated">使用<code class="fe le lf lg lh b">sudo vi /etc/locale.gen</code>编辑<code class="fe le lf lg lh b">locale.gen</code>文件</li><li id="3cda" class="nr ns iq kb b kc oa kg ob kk oc ko od ks oe kw nw nx ny nz bi translated">通过删除<code class="fe le lf lg lh b">#</code>字符取消带有<code class="fe le lf lg lh b">en_US.UTF-8</code>的行的注释(确保没有前导空格)</li><li id="3153" class="nr ns iq kb b kc oa kg ob kk oc ko od ks oe kw nw nx ny nz bi translated">跑<code class="fe le lf lg lh b">sudo locale-gen en_US.UTF-8</code></li><li id="f06d" class="nr ns iq kb b kc oa kg ob kk oc ko od ks oe kw nw nx ny nz bi translated">运行<code class="fe le lf lg lh b">sudo update-locale en_US.UTF-8</code></li><li id="9798" class="nr ns iq kb b kc oa kg ob kk oc ko od ks oe kw nw nx ny nz bi translated">运行<code class="fe le lf lg lh b">locale</code>以确保没有错误/警告</li></ol></div><div class="ab cl nf ng hu nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="ij ik il im in"><h1 id="a3be" class="ln lo iq bd lp lq nm ls lt lu nn lw lx ly no ma mb mc np me mf mg nq mi mj mk bi translated">摘要</h1><p id="630c" class="pw-post-body-paragraph jz ka iq kb b kc ml ke kf kg mm ki kj kk mn km kn ko mo kq kr ks mp ku kv kw ij bi translated">到这篇文章结束时，你应该有一个无头(非图形用户界面)的Raspberry Pi连接到你的家庭网络，SSH通信可用，干得好！👏</p><p id="0667" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated"><strong class="kb ir">现在怎么办？</strong>欢迎您回来查看关于如何在令人惊叹的RPi集群上安装Kubernetes的未来博文。</p><p id="4b72" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">请在下面的讨论中留下您的评论、建议或任何其他您认为与本文相关的意见。</p><p id="6e19" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated"><strong class="kb ir">喜欢这个帖子？</strong> <br/>您可以通过以下方式了解更多信息:</p><p id="3f75" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">查看我的博客:<a class="ae jy" href="https://blog.zachinachshon.com" rel="noopener ugc nofollow" target="_blank">https://blog.zachinachshon.com</a><br/>在推特上关注我:<a class="ae jy" href="https://twitter.com/zachinachshon" rel="noopener ugc nofollow" target="_blank"> @zachinachshon </a></p><p id="8b9d" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">感谢阅读！❤️</p></div></div>    
</body>
</html>