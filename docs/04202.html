<html>
<head>
<title>DOM Manipulation — Attributes and DOM Traversal</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">DOM操作—属性和DOM遍历</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/dom-manipulation-attributes-and-dom-traversal-90daf3bd512a?source=collection_archive---------12-----------------------#2020-06-14">https://levelup.gitconnected.com/dom-manipulation-attributes-and-dom-traversal-90daf3bd512a?source=collection_archive---------12-----------------------#2020-06-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/febdaf14bba2f2949917f944fd1ac4bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*692aup38Npt9HoVf"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">戴维·坎特利在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="bed1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">JavaScript是世界上最流行的编程语言之一。为了有效地使用它，我们必须了解它的基本知识。</p><p id="c189" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本文中，我们将了解如何处理一些HTML元素的方法和属性，以及如何遍历DOM。</p><h1 id="6578" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">检查类属性值是否有特定值</h1><p id="1ed2" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以使用<code class="fe mh mi mj mk b">classList.contains</code>方法来检查一个类名是否在class属性的类名列表中。</p><p id="cb77" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，如果我们有:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="a952" class="mt lf it mk b gy mu mv l mw mx">&lt;div class="foo bar baz"&gt;&lt;/div&gt;​</span></pre><p id="b5a6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="c648" class="mt lf it mk b gy mu mv l mw mx">const div = document.querySelector('div');<br/>console.log(elm.classList.contains('foo'));</span></pre><p id="2b71" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后它记录下<code class="fe mh mi mj mk b">true</code>，因为<code class="fe mh mi mj mk b">foo</code>在类属性中。</p><h1 id="12c0" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">获取和设置数据属性</h1><p id="0f3a" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以使用<code class="fe mh mi mj mk b">datset</code>属性来设置任何以<code class="fe mh mi mj mk b">data-</code>开头的属性。</p><p id="7f05" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，如果我们有:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="83b7" class="mt lf it mk b gy mu mv l mw mx">&lt;div data-foo-bar='foo'&gt;&lt;/div&gt;​</span></pre><p id="4432" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="a96d" class="mt lf it mk b gy mu mv l mw mx">const div = document.querySelector('div');<br/>console.log(elm.dataset.fooBar);</span></pre><p id="81d3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">返回<code class="fe mh mi mj mk b">data-foo-bar</code>的值。</p><p id="2441" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">HTML中任何带有kebab case的内容都被转换成camelCase。</p><p id="d839" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要设置它，我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="6c1c" class="mt lf it mk b gy mu mv l mw mx">elm.dataset.baz = 'baz'</span></pre><p id="0bd4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们在值为<code class="fe mh mi mj mk b">baz</code>的div上得到一个<code class="fe mh mi mj mk b">data-baz</code>属性。</p><h1 id="c06b" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">选择特定的元素节点</h1><p id="4ba9" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">获取对单个元素节点的引用的最常见方法是<code class="fe mh mi mj mk b">querySelector</code>或<code class="fe mh mi mj mk b">getElementById</code>。</p><p id="7a2a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">querySelector</code>用于用任何CSS选择器获取单个元素。</p><p id="e383" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="0329" class="mt lf it mk b gy mu mv l mw mx">const div = document.querySelector('div');</span></pre><p id="c850" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要获得页面上的第一个div，</p><p id="b1c6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以使用<code class="fe mh mi mj mk b">getElementById</code>来获得一个具有<code class="fe mh mi mj mk b">id</code>属性集的元素。</p><p id="b1c8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，如果我们有:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="a3ee" class="mt lf it mk b gy mu mv l mw mx">&lt;p id='foo'&gt;foo&lt;/p&gt;</span></pre><p id="c3ba" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们可以使用<code class="fe mh mi mj mk b">getElementById</code>通过写来获得p元素:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="0929" class="mt lf it mk b gy mu mv l mw mx">const foo = document.getElementById('foo');</span></pre><h1 id="eedf" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">选择或创建元素节点的节点列表</h1><p id="208d" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以使用<code class="fe mh mi mj mk b">querySelectorAll</code>、<code class="fe mh mi mj mk b">getElementsByTagName</code>或<code class="fe mh mi mj mk b">getElementsByClassName</code>来分别获取具有给定选择器、标签名或类名的多个元素。</p><p id="16b2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，如果我们有:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="43d5" class="mt lf it mk b gy mu mv l mw mx">&lt;ul&gt;<br/>  &lt;li class="item"&gt;foo&lt;/li&gt;<br/>  &lt;li class="item"&gt;bar&lt;/li&gt;<br/>  &lt;li class="item"&gt;baz&lt;/li&gt;<br/>&lt;/ul&gt;</span></pre><p id="d5cd" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们可以使用<code class="fe mh mi mj mk b">querySelectorAll</code>通过写得到所有的李:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="1204" class="mt lf it mk b gy mu mv l mw mx">const lis = document.querySelectorAll('li');</span></pre><p id="a825" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了使用<code class="fe mh mi mj mk b">getElementsByTagName</code>做同样的事情，我们写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="6eb4" class="mt lf it mk b gy mu mv l mw mx">const lis = document.getElementsByTagName('li');</span></pre><p id="a7e2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">同样，我们可以使用如下的<code class="fe mh mi mj mk b">getElementsByClassName</code>来获得相同的元素:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="41a8" class="mt lf it mk b gy mu mv l mw mx">const lis = document.getElementsByTagName('item');</span></pre><p id="4201" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">从<code class="fe mh mi mj mk b">getElementsByTagName</code>和<code class="fe mh mi mj mk b">getElementsByClassName</code>创建的<code class="fe mh mi mj mk b">NodeList</code>永远是活的。</p><p id="1d20" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这意味着即使文档被更新，它们也总是反映文档的状态。</p><p id="f68c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">querySelectorAll</code>不返回元素的动态列表。</p><p id="d1f0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">它返回文档创建时的快照。</p><p id="abc9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">所有方法也在元素节点上定义。</p><p id="2627" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这样我们就能锁住他们。</p><p id="5792" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="b39a" class="mt lf it mk b gy mu mv l mw mx">const lis = document.getElementById('list').getElementsByTagName('li');</span></pre><p id="389d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以将<code class="fe mh mi mj mk b">'*'</code>传递给<code class="fe mh mi mj mk b">querySelectorAll</code>或<code class="fe mh mi mj mk b">getElementsByTagName</code>来获取页面上的所有元素。</p><p id="7db9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">childNodes</code>也会返回一个<code class="fe mh mi mj mk b">NodeList</code>。</p><h1 id="4cdb" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">选择所有直接子元素节点</h1><p id="3485" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以使用<code class="fe mh mi mj mk b">children</code>来选择给定节点的所有子节点。</p><p id="4fd5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果我们有:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="ed9a" class="mt lf it mk b gy mu mv l mw mx">&lt;ul&gt;<br/>  &lt;li class="item"&gt;foo&lt;/li&gt;<br/>  &lt;li class="item"&gt;bar&lt;/li&gt;<br/>  &lt;li class="item"&gt;baz&lt;/li&gt;<br/>&lt;/ul&gt;</span></pre><p id="6425" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">所以我们可以通过书写得到li元素:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="f500" class="mt lf it mk b gy mu mv l mw mx">const lis = document.querySelector('ul').children;</span></pre><p id="a289" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">children</code>给出了所有的直接元素节点，不包括其他类型的节点。</p><p id="81b3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">它们按照在DOM中出现的顺序返回。</p><h1 id="bd3e" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">上下文元素选择</h1><p id="e2aa" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以在一个元素节点上调用<code class="fe mh mi mj mk b">querySelector()</code>、<code class="fe mh mi mj mk b">querySelectorAll()</code>、<code class="fe mh mi mj mk b">getElementsByTagBName()</code>、<code class="fe mh mi mj mk b">getElementsByClassName()</code>。</p><p id="b831" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，如果我们有:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="a466" class="mt lf it mk b gy mu mv l mw mx">&lt;ul&gt;<br/>  &lt;li class="item"&gt;foo&lt;/li&gt;<br/>  &lt;li class="item"&gt;bar&lt;/li&gt;<br/>  &lt;li class="item"&gt;baz&lt;/li&gt;<br/>&lt;/ul&gt;</span></pre><p id="9bba" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="f33e" class="mt lf it mk b gy mu mv l mw mx">const lis = document.querySelector('ul').getElementsByTagName('li');</span></pre><p id="68cb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">得到李元素。</p><h1 id="7fa2" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">元素节点的预配置选择/列表</h1><p id="4c60" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">在<code class="fe mh mi mj mk b">document</code>对象中有许多属性可以返回选择节点，而不需要调用上面的方法。</p><p id="de88" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">document.all</code>返回HTML文档中的所有元素。</p><p id="c887" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">document.forms</code>返回HTML文档中的所有表单元素。</p><p id="24d2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">document.images</code>返回文档中的所有img元素。</p><p id="daab" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">document.links</code>返回文档中的所有<code class="fe mh mi mj mk b"> a</code>元素。</p><p id="6389" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">document.scripts</code>返回文档中的所有脚本元素。</p><p id="c671" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">返回HTML文档中的所有链接和样式对象。</p><p id="7170" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">他们返回对象，所以他们是活的。</p><p id="07a1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">document.all</code>是从<code class="fe mh mi mj mk b">HTMLAllCollection</code>构造函数创建的，在Firefox中不受支持。</p><figure class="ml mm mn mo gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi my"><img src="../Images/73e4c2c9cbe8bcb1381383d49e465e19.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Kr5Gh-8v2yjX77Qr"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">由<a class="ae kf" href="https://unsplash.com/@pafuxu?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Kouji鹤</a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><h1 id="e408" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">使用matches()验证元素将被选中</h1><p id="22fa" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以使用<code class="fe mh mi mj mk b">matches </code>来检查一个元素的选择器是否匹配一个给定的元素。</p><p id="d7f9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，如果我们有:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="bda1" class="mt lf it mk b gy mu mv l mw mx">&lt;ul&gt;<br/>  &lt;li class="item"&gt;foo&lt;/li&gt;<br/>  &lt;li class="item"&gt;bar&lt;/li&gt;<br/>  &lt;li class="item"&gt;baz&lt;/li&gt;<br/>&lt;/ul&gt;</span></pre><p id="3f43" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以这样称呼它:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="db39" class="mt lf it mk b gy mu mv l mw mx">console.log(document.querySelector('.item').matches('li:first-child'));</span></pre><p id="8dfc" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">它应该返回<code class="fe mh mi mj mk b">true</code>，因为类<code class="fe mh mi mj mk b">item</code>的第一个元素与<code class="fe mh mi mj mk b">li</code>相同。</p><h1 id="0215" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">结论</h1><p id="10c6" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以用各种DOM属性和方法来获取和设置属性。</p><p id="d928" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">此外，我们可以用多种方式遍历DOM。</p></div></div>    
</body>
</html>