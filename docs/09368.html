<html>
<head>
<title>My Favorite Pandas Method Chains</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我最喜欢的熊猫方法链</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/my-favorite-pandas-method-chains-1cf36483e6c9?source=collection_archive---------4-----------------------#2021-08-02">https://levelup.gitconnected.com/my-favorite-pandas-method-chains-1cf36483e6c9?source=collection_archive---------4-----------------------#2021-08-02</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><figure class="it iu gq gs iv iw gi gj paragraph-image"><div role="button" tabindex="0" class="ix iy di iz bf ja"><div class="gi gj is"><img src="../Images/eb95cf806533c62f26f2c2fe80f80041.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*idEZmJJSqDVNnvPaGxfouA.png"/></div></div><figcaption class="jd je gk gi gj jf jg bd b be z dk translated">作者插图。</figcaption></figure><h2 id="b31c" class="jh ji jj bd b dl jk jl jm jn jo jp dk jq translated" aria-label="kicker paragraph">熊猫的超级连锁店赢了！</h2><div class=""/><div class=""><h2 id="484c" class="pw-subtitle-paragraph kp js jj bd b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg dk translated">我使用(和重用)方法链是因为它们以编程的方式很有帮助和富有诗意</h2></div><h1 id="d7ae" class="lh li jj bd lj lk ll lm ln lo lp lq lr ky ls kz lt lb lu lc lv le lw lf lx ly bi translated">介绍</h1><p id="68af" class="pw-post-body-paragraph lz ma jj mb b mc md kt me mf mg kw mh mi mj mk ml mm mn mo mp mq mr ms mt mu in bi translated">当我开始写这篇文章时，我原本打算分享一些我自己使用的常用方法链。没见别人用。我有一种预感，它们可能对其他人有用。</p><p id="1799" class="pw-post-body-paragraph lz ma jj mb b mc mv kt me mf mw kw mh mi mx mk ml mm my mo mp mq mz ms mt mu in bi translated">在起草的最后，我意识到这已经变成了对熊猫的颂歌。你有没有发现自己也在代码中发现了诗意？</p><p id="c387" class="pw-post-body-paragraph lz ma jj mb b mc mv kt me mf mw kw mh mi mx mk ml mm my mo mp mq mz ms mt mu in bi translated">下面是我不能没有的三个(半)方法链。我希望你也会觉得它们有用。</p><p id="b2c7" class="pw-post-body-paragraph lz ma jj mb b mc mv kt me mf mw kw mh mi mx mk ml mm my mo mp mq mz ms mt mu in bi translated">开始之前，请务必像往常一样<code class="fe nb nc nd ne b">import pandas as pd</code>。</p><h2 id="86cf" class="nf li jj bd lj ng nh dn ln ni nj dp lr mi nk nl lt mm nm nn lv mq no np lx jp bi translated">旋转熊猫描述输出</h2><p id="18ae" class="pw-post-body-paragraph lz ma jj mb b mc md kt me mf mg kw mh mi mj mk ml mm mn mo mp mq mr ms mt mu in bi translated">Pandas <code class="fe nb nc nd ne b">describe()</code>的默认输出将数据框列放在顶部，将统计数据放在侧面和行上。例如:</p><pre class="nq nr ns nt gu nu ne nv nw aw nx bi"><span id="e71f" class="nf li jj ne b gz ny nz l oa ob"># For the convenience of copy-paste:<br/>df = pd.read_stata('http://www.stata-press.com/data/r15/auto2.dta')</span></pre><figure class="nq nr ns nt gu iw gi gj paragraph-image"><div role="button" tabindex="0" class="ix iy di iz bf ja"><div class="gi gj oc"><img src="../Images/3fd59de2e7185e84c316b2595bfd93ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uPH8ye5ewlEPQu9R_8QfIg.png"/></div></div><figcaption class="jd je gk gi gj jf jg bd b be z dk translated">作者的屏幕截图。</figcaption></figure><p id="9687" class="pw-post-body-paragraph lz ma jj mb b mc mv kt me mf mw kw mh mi mx mk ml mm my mo mp mq mz ms mt mu in bi translated">我的大脑就是不这样工作！另一个问题是，对于较宽的集合(许多列)，输出不太适合显示空间。下面的方法链提供了一个简单的修复方法:</p><pre class="nq nr ns nt gu nu ne nv nw aw nx bi"><span id="9bb9" class="nf li jj ne b gz ny nz l oa ob">df.describe().transpose()</span></pre><p id="aebc" class="pw-post-body-paragraph lz ma jj mb b mc mv kt me mf mw kw mh mi mx mk ml mm my mo mp mq mz ms mt mu in bi translated">给你:</p><figure class="nq nr ns nt gu iw gi gj paragraph-image"><div role="button" tabindex="0" class="ix iy di iz bf ja"><div class="gi gj oc"><img src="../Images/30fc03db3aa68651116571c7dab17851.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ifxqpI4LlwbheyJRHYk0bg.png"/></div></div><figcaption class="jd je gk gi gj jf jg bd b be z dk translated">作者的屏幕截图。</figcaption></figure><p id="9618" class="pw-post-body-paragraph lz ma jj mb b mc mv kt me mf mw kw mh mi mx mk ml mm my mo mp mq mz ms mt mu in bi translated">这样更容易阅读。此外，在显示(和读取)输出时，您不会耗尽水平屏幕空间。</p><h2 id="58c3" class="nf li jj bd lj ng nh dn ln ni nj dp lr mi nk nl lt mm nm nn lv mq no np lx jp bi translated">让价值计数更具可读性</h2><p id="1bcc" class="pw-post-body-paragraph lz ma jj mb b mc md kt me mf mg kw mh mi mj mk ml mm mn mo mp mq mr ms mt mu in bi translated">当<code class="fe nb nc nd ne b">df['col_name'].value_counts()</code>方法产生的输出不按键/索引列排序时，你会讨厌吗？比如说。</p><figure class="nq nr ns nt gu iw gi gj paragraph-image"><div role="button" tabindex="0" class="ix iy di iz bf ja"><div class="gi gj oc"><img src="../Images/fd4bcbce238183a7b4f24cb9df2cbb32.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9bfH63gnp9H9gPov47SU5g.png"/></div></div><figcaption class="jd je gk gi gj jf jg bd b be z dk translated">作者插图。</figcaption></figure><p id="4881" class="pw-post-body-paragraph lz ma jj mb b mc mv kt me mf mw kw mh mi mx mk ml mm my mo mp mq mz ms mt mu in bi translated">为什么<em class="na">优秀的</em>排在中间？还有为什么<em class="na">平均</em>在最上面？这毫无意义。下面的方法链提供了一个简单的修复方法:</p><pre class="nq nr ns nt gu nu ne nv nw aw nx bi"><span id="ab16" class="nf li jj ne b gz ny nz l oa ob">df['col_name'].value_counts().sort_index()</span></pre><p id="aaca" class="pw-post-body-paragraph lz ma jj mb b mc mv kt me mf mw kw mh mi mx mk ml mm my mo mp mq mz ms mt mu in bi translated">给你:</p><figure class="nq nr ns nt gu iw gi gj paragraph-image"><div role="button" tabindex="0" class="ix iy di iz bf ja"><div class="gi gj oc"><img src="../Images/b117598a137342c9e7c5c7c2a868defa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v3nuR6wAgFbqIdts3k8N5A.png"/></div></div><figcaption class="jd je gk gi gj jf jg bd b be z dk translated">作者插图。</figcaption></figure><h2 id="d421" class="nf li jj bd lj ng nh dn ln ni nj dp lr mi nk nl lt mm nm nn lv mq no np lx jp bi translated">检查丢失的数据</h2><p id="cce9" class="pw-post-body-paragraph lz ma jj mb b mc md kt me mf mg kw mh mi mj mk ml mm mn mo mp mq mr ms mt mu in bi translated">所有最好的教程都建议将<code class="fe nb nc nd ne b">df.isnull().sum()</code>作为检查缺失数据的有用方法。这很有效。但是让我们看看稍微不那么直观的<code class="fe nb nc nd ne b">df.isnull().mean()</code>。当你找到一个二进制数的平均值时会发生什么？你得到平均真实。因此，您看到的不是每一列中缺失的计数，而是每一列中缺失的比例。例如:</p><figure class="nq nr ns nt gu iw gi gj paragraph-image"><div role="button" tabindex="0" class="ix iy di iz bf ja"><div class="gi gj od"><img src="../Images/719713d5b2798b43a8d4a578d241720a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xNdpq2_XGaVf_qQcqVXiMw.png"/></div></div><figcaption class="jd je gk gi gj jf jg bd b be z dk translated">作者插图。</figcaption></figure><p id="685b" class="pw-post-body-paragraph lz ma jj mb b mc mv kt me mf mw kw mh mi mx mk ml mm my mo mp mq mz ms mt mu in bi translated">让我们更进一步。让我们使输出更加明确。下面的方法链(和lambda函数)可以做到这一点。</p><pre class="nq nr ns nt gu nu ne nv nw aw nx bi"><span id="f602" class="nf li jj ne b gz ny nz l oa ob">df.isnull().mean().apply(lambda x : <br/>                         '{:.2f}% Missing'.format(x * 100))</span></pre><p id="2516" class="pw-post-body-paragraph lz ma jj mb b mc mv kt me mf mw kw mh mi mx mk ml mm my mo mp mq mz ms mt mu in bi translated">该链提供:</p><figure class="nq nr ns nt gu iw gi gj paragraph-image"><div role="button" tabindex="0" class="ix iy di iz bf ja"><div class="gi gj od"><img src="../Images/c7aab756e71cfa32467e883b39eaf7bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x-z-RG9j3lvl6FLpRp2_dA.png"/></div></div><figcaption class="jd je gk gi gj jf jg bd b be z dk translated">作者插图。</figcaption></figure><div class="it iu gq gs iv oe"><a href="https://adamrossnelson.medium.com/membership" rel="noopener follow" target="_blank"><div class="of ab fp"><div class="og ab oh cl cj oi"><h2 class="bd jt gz z fq oj fs ft ok fv fx js bi translated">加入我的介绍链接媒体-亚当罗斯纳尔逊</h2><div class="ol l"><h3 class="bd b gz z fq oj fs ft ok fv fx dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="om l"><p class="bd b dl z fq oj fs ft ok fv fx dk translated">adamrossnelson.medium.com</p></div></div><div class="on l"><div class="oo l op oq or on os jb oe"/></div></div></a></div><h1 id="2a7e" class="lh li jj bd lj lk ll lm ln lo lp lq lr ky ls kz lt lb lu lc lv le lw lf lx ly bi translated">结论</h1><p id="b715" class="pw-post-body-paragraph lz ma jj mb b mc md kt me mf mg kw mh mi mj mk ml mm mn mo mp mq mr ms mt mu in bi translated">在这篇即兴的<em class="na">熊猫颂</em>中，我分享了三个(半个)我离不开的方法链。这些方法链是优雅的一行程序，使您的工作更容易，您的输出更可读。他们帮助你完成工作。</p><p id="f743" class="pw-post-body-paragraph lz ma jj mb b mc mv kt me mf mw kw mh mi mx mk ml mm my mo mp mq mz ms mt mu in bi translated">让我知道我可能错过了什么？留下你的想法和改进意见。</p><p id="df00" class="pw-post-body-paragraph lz ma jj mb b mc mv kt me mf mw kw mh mi mx mk ml mm my mo mp mq mz ms mt mu in bi translated">当我凝视窗外时，我想做的另一件事更容易:移动熊猫柱。来自其他工具，我总是惊讶于这是多么困难。关于该主题的更多信息:</p><div class="it iu gq gs iv oe"><a href="https://towardsdatascience.com/reordering-pandas-dataframe-columns-thumbs-down-on-standard-solutions-1ff0bc2941d5" rel="noopener follow" target="_blank"><div class="of ab fp"><div class="og ab oh cl cj oi"><h2 class="bd jt gz z fq oj fs ft ok fv fx js bi translated">重新排序熊猫数据框列:否定标准解决方案</h2><div class="ol l"><h3 class="bd b gz z fq oj fs ft ok fv fx dk translated">简化更改数据框列顺序过程的解决方案</h3></div><div class="om l"><p class="bd b dl z fq oj fs ft ok fv fx dk translated">towardsdatascience.com</p></div></div><div class="on l"><div class="ot l op oq or on os jb oe"/></div></div></a></div><h1 id="726f" class="lh li jj bd lj lk ll lm ln lo lp lq lr ky ls kz lt lb lu lc lv le lw lf lx ly bi translated">感谢阅读</h1><p id="cbe8" class="pw-post-body-paragraph lz ma jj mb b mc md kt me mf mg kw mh mi mj mk ml mm mn mo mp mq mr ms mt mu in bi translated">感谢阅读。把你的想法和主意发给我。你可以写信只是为了说声嗨。我期待着尽快聊天。推特:<a class="ae ou" href="https://twitter.com/adamrossnelson" rel="noopener ugc nofollow" target="_blank">@ adamrossnelson</a>LinkedIn:<a class="ae ou" href="https://www.linkedin.com/in/arnelson" rel="noopener ugc nofollow" target="_blank">亚当·罗斯·尼尔森在推特</a>和脸书:<a class="ae ou" href="https://www.facebook.com/adamrossnelson" rel="noopener ugc nofollow" target="_blank">亚当·罗斯·尼尔森在脸书</a>。</p></div></div>    
</body>
</html>