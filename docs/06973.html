<html>
<head>
<title>Node.js Basics — Debugging Apps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Node.js基础—调试应用程序</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/node-js-basics-debugging-apps-2ef6be5e6b8a?source=collection_archive---------7-----------------------#2021-01-15">https://levelup.gitconnected.com/node-js-basics-debugging-apps-2ef6be5e6b8a?source=collection_archive---------7-----------------------#2021-01-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/9f260a556bf6f6357b261ac64fc152d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5g60Ct8uSvLVGjM-"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated"><a class="ae kf" href="https://unsplash.com/@zanilic?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Zan </a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="6597" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本文中，我们将了解如何开始使用Node.js创建程序。</p><h1 id="8d90" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">与摩根一起伐木</h1><p id="75e8" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">为了让我们更容易地调试Node.js应用程序，我们可以使用<code class="fe mh mi mj mk b">morgan</code>包在我们的应用程序中添加一个日志记录器。</p><p id="6f4f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要安装它，我们运行:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="9c00" class="mt lf it mk b gy mu mv l mw mx">npm i morgan</span></pre><p id="ccf4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们可以通过写来使用它:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="e1f0" class="mt lf it mk b gy mu mv l mw mx">const Morgan = require('morgan'),<br/>  Router = require('router'),<br/>  http = require('http');<br/>router = new Router();<br/>router.use(Morgan('tiny'));</span><span id="5456" class="mt lf it mk b gy my mv l mw mx">http.createServer(function(request, response) {<br/>  router(request, response, function(error) {<br/>    if (!error) {<br/>      response.writeHead(404);<br/>    } else {      <br/>      console.log(error.message, error.stack);<br/>      response.writeHead(400);<br/>    }<br/>    response.end('\n');<br/>  });<br/>}).listen(8000);</span></pre><p id="4225" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们通过使用<code class="fe mh mi mj mk b">Morgan('tiny')</code>中间件调用<code class="fe mh mi mj mk b">router.use</code>方法，将<code class="fe mh mi mj mk b">Morgan</code>中间件添加到我们的<code class="fe mh mi mj mk b">router</code>中。</p><p id="a63d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在我们看到登录我们的应用程序。</p><p id="2440" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在我们可以去掉<code class="fe mh mi mj mk b">console.log</code>并写下:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="ce23" class="mt lf it mk b gy mu mv l mw mx">const Morgan = require('morgan'),<br/>  Router = require('router'),<br/>  http = require('http');<br/>router = new Router();<br/>router.use(Morgan('tiny'));</span><span id="f47c" class="mt lf it mk b gy my mv l mw mx">http.createServer(function(request, response) {<br/>  router(request, response, function(error) {<br/>    let info = process.versions;<br/>    info = JSON.stringify(info);<br/>    response.writeHead(200, {<br/>      'Content-Type': 'application/json'<br/>    });<br/>    response.end(info);</span><span id="b025" class="mt lf it mk b gy my mv l mw mx">  });<br/>}).listen(8000);</span></pre><p id="7e54" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">仍然可以伐木。</p><p id="3434" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">或者，我们可以使用<code class="fe mh mi mj mk b">bunyan</code>包来进行日志记录。</p><p id="655c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要安装它，我们运行:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="7368" class="mt lf it mk b gy mu mv l mw mx">npm i bunyan</span></pre><p id="ae00" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们可以通过写来使用它:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="3d5c" class="mt lf it mk b gy mu mv l mw mx">const Bunyan = require('bunyan');  <br/>const logger = Bunyan.createLogger({<br/>  name: 'example'<br/>});<br/>logger.info('Hello logging');</span></pre><p id="1777" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们需要<code class="fe mh mi mj mk b">bunyan</code>包。然后我们用<code class="fe mh mi mj mk b">createLogger</code>方法创建我们的记录器。</p><p id="7f9f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">name</code>是记录器的名称。</p><p id="2a1d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们使用<code class="fe mh mi mj mk b">logger.info</code>方法来记录我们想要的任何东西。</p><p id="8dcf" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以通过使用各种方法用其他日志记录级别来记录项目。</p><p id="82d5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="55c4" class="mt lf it mk b gy mu mv l mw mx">const Bunyan = require('bunyan');<br/>const logger = Bunyan.createLogger({<br/>  name: 'example'<br/>});<br/>logger.info('Hello logging');<br/>logger.trace('Trace');<br/>logger.debug('Debug');<br/>logger.info('Info');<br/>logger.warn('Warn');<br/>logger.error('Error');<br/>logger.fatal('Fatal');</span></pre><p id="0d52" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后，我们获取记录了各种属性<code class="fe mh mi mj mk b">level</code>值的对象，让我们知道日志项的严重性级别。</p><p id="413c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们也可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="16bb" class="mt lf it mk b gy mu mv l mw mx">const Bunyan = require('bunyan');<br/>const logger = Bunyan.createLogger({<br/>  name: 'example',<br/>  level: Bunyan.TRACE</span><span id="e534" class="mt lf it mk b gy my mv l mw mx">});<br/>logger.info('Hello logging');<br/>logger.trace('Trace');<br/>logger.debug('Debug');<br/>logger.info('Info');<br/>logger.warn('Warn');<br/>logger.error('Error');<br/>logger.fatal('Fatal');</span></pre><p id="78e5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">来设置我们调用<code class="fe mh mi mj mk b">createLogger</code>时的电平。</p><p id="288e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">使用Bunyan，我们还可以将记录的数据写入文件。</p><p id="37b9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为此，我们写道:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="4c8a" class="mt lf it mk b gy mu mv l mw mx">const Bunyan = require('bunyan');<br/>const logger = Bunyan.createLogger({<br/>  name: 'example',<br/>  streams: [{<br/>      level: Bunyan.INFO,<br/>      path: './log.log'<br/>    },<br/>    {<br/>      level: Bunyan.INFO,<br/>      stream: process.stdout<br/>    }<br/>  ]<br/>});<br/>logger.info('Hello logging');<br/>logger.trace('Trace');<br/>logger.debug('Debug');<br/>logger.info('Info');<br/>logger.warn('Warn');<br/>logger.error('Error');<br/>logger.fatal('Fatal');</span></pre><p id="2c95" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们添加了<code class="fe mh mi mj mk b">streams</code>属性来添加对象，以指定日志数据的位置。</p><p id="5589" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">streams</code>数组的第一个条目具有<code class="fe mh mi mj mk b">path</code>属性来指定要写入的位置。</p><p id="5035" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">第二个对象指定我们写入stdout，这意味着我们在屏幕上打印项目。</p><h1 id="c6fa" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">结论</h1><p id="8f53" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以用各种记录器添加日志。</p><p id="0d2e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以使用Morgan或Bunyan为Node.js应用程序添加日志功能。</p></div></div>    
</body>
</html>