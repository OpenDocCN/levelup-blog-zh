# AIR —命名 CSS 颜色变量

> 原文：<https://levelup.gitconnected.com/air-naming-css-color-variables-437cb4d261a6>

AIR 是最大化主题能力的命名约定

![](img/32230c6ea8bca6713e47d6c68617a63a.png)

> "在计算机科学中只有两件困难的事情:缓存失效和命名事物."菲尔·卡尔顿

尽管这句话可能已经老掉牙了，但它永远不会变得不那么贴切。对于 CSS 颜色变量来说尤其如此，这可能是最难解决的一种名称。它可能不会立即被注意到，但是它确实对可维护性有很大的影响。

多年来，我一直在尝试，试图确定一个合适的模式——我并不孤单。我读过无数关于这个主题的博客，它们之间很少有共识。对于[基于角色的命名](https://getbootstrap.com/docs/4.0/getting-started/theming/#theme-colors)有一些说法，对于[实际色名](https://css-tricks.com/what-do-you-name-color-variables/)有一些说法，对于[一个数值尺度](https://tailwindcss.com/docs/customizing-colors#default-color-palette)。然而，对于这些解决方案中的每一个，我都遇到了一些现实世界中的问题，使我很难进行更新。

为了节省您自己处理这些问题的时间和精力，请允许我解释一下我是如何解决每个问题的。

# 为什么重要？

品牌重塑发生了，需求改变了，有时需要额外的主题，最常见的是黑暗模式。最初的构建可能很容易，但进行更新将成为每个人的眼中钉。当然，为不同的价值观进行规划可能会令人沮丧地受到限制，这就是为什么放弃和凭直觉命名事物是如此诱人。

```
:root {
  --merlot: #865f5f;   /* red (merlot) */
  --crimson: #dc143c;  /* red (crimson) */
}
```

一些红色的阴影可能会被标记为“梅洛”或“深红色”，这很容易理解和记忆。但是，我们必须认识到随之而来的危险。

你已经重塑了品牌，现在你发现所有的变量都不是真正的…变量。梅洛的*颜色*变成了藏青色，深红变成了钴红色，但是可变的*名称*一点都没变。由于巨大的影响范围，替换整个项目的所有使用永远不会通过风险管理团队的一个巨大的拉请求。所以，现在唯一的选择是保持变量名不变，只改变值。

```
:root {
  --merlot: #000080;   /* blue (navy) */
  --crimson: #0047ab;  /* blue (cobalt) */
}
```

哦，令人困惑。我去过那里，我不想回去。

因此，我们应该选择不太固执己见的变量名；一些可以自由改变但仍然有意义的东西。这种做法不仅仅是基于我个人的观点，事实上它从一开始就存在于计算机科学中。这叫做[信息隐藏](https://en.wikipedia.org/wiki/Information_hiding)。你可以认为它是[封装](https://en.wikipedia.org/wiki/Encapsulation_(computer_programming)#Information_hiding)的一个独特部分。

# 命名约定

设计一个既灵活又简洁的合理命名约定是一个令人抓狂的过程。它应该为调色板赋予一些意义，而不是将自己局限于任何特定的颜色，也不是任何颜色的特征，如“深色”或“浅色”或类似的视觉描述。

总的来说，我的策略可以归纳为三个主要部分。

1.  **隶属关系**:总有一种方法可以根据颜色的隶属关系将它们分成不同的组，比如“品牌”、“网站”、“错误”等等。
2.  **ID** :“第一级”和“第二级”很好用，但是有多少人知道“第三级”之后是什么呢？一个数字 ID 就足够了，并且保留了相同的语义值，但是它肯定更短更简单。
3.  **关系**:颜色通常与其他颜色有特定且必要的关系，如背景、前景、替代色等。在这个约定中，这些关系用另一个 ID 或“c”来表示“对比”。

我把这种方法称为 AIR(affiliation-ID-relationship)，这是我现在在所有项目中使用的命名约定，以保持事情有序和面向未来。

```
affiliation-id-relationshipbrand-1-1
error-1-c
```

*前进之前的快速调用* : CSS 变量当然不仅仅包括颜色。为了将颜色变量与其他变量区分开来，在将这个约定应用到变量名的其余部分之前，我使用了前缀`--color-`。

# 加入

对于一个标准的网站，颜色可以按用途分类；根据他们在设计中扮演的角色进行分组。一些常见的使用案例包括:

*   品牌
*   位置
*   口音
*   成功
*   错误
*   警告
*   信息

这个清单可能会无限延长，但上面的例子应该足以建立一个模式。每个从属关系都可以安全地交换值，因为没有什么可以暗示特定的颜色，但作为一个容易记忆的名称，它仍然足够有用。

诚然，记住[特定的颜色名称](https://css-tricks.com/what-do-you-name-color-variables/)更容易。一开始你可能会频繁地引用主题文件，但是我要再次强调，如果你屈服于诱惑，你就牺牲了主题能力。Chris Coyier 非常有洞察力，有很多很棒的东西要说——然而，这是我们不同意的一个话题，因为他的论点的假设是，变量只对使颜色可读有用，他似乎假设它们永远不会改变。

我不惜一切代价避免这种锁定，因为品牌重塑很难预测。没有人期望它会发生，所以提前计划似乎是不必要的，但是这样的习惯倾向于伤害未来的开发者。有趣的是，在我的职业生涯中，我曾多次领导品牌重塑工作，所以这足以说服我不要成为问题的一部分。

# 身份证明

当然，在你命名了你的隶属关系后，你需要开始区分它所隶属的每一种颜色。[序数](https://en.wikipedia.org/wiki/Ordinal_numeral)(初级、次级等。)已经被证明在设计的各种应用中是有效的，并且今天仍然有用。我不会说它没有用武之地，只是说它很罗嗦，几乎不在我们的日常用语中。

常规的旧数字同样有用，同样具有描述性，而且更短，更容易输入和记忆。主次可以简单地表示为 1 和 2，不做任何牺牲，真的。

此时，我们已经拥有了命名第一个基色所需的一切。

```
--color-brand-1: #0000ff;
```

现在只剩下直接的关系了，它将在上面的基色上合成，以此来决定更具体的颜色。

# 关系(对比)

你可能很熟悉颜色必须有 7:1 的[对比度才能通过](https://webaim.org/resources/contrastchecker/)[WCAG AAA](https://www.w3.org/WAI/WCAG2AAA-Conformance)级一致性的要求。考虑到这一点，你应该总是有一种颜色可以与基色形成足够的对比。

可以添加后缀来指定该角色的颜色，如“对比”就我个人而言，这有点太罗嗦了，所以我用字母“C”来缩写它，比如`--color-brand-1-c`。

请注意，我没有选择“前景”或“背景”这样的标签，因为它们可能会偶尔颠倒。以按钮为例:

```
.section {
  background-color: var(--color-brand-1);
  color: var(--color-brand-1-c); /* the contrast color is in the foreground */
}
.button {
  background-color: var(--color-brand-1-c); /* the contrast color is now in the background */
  color: var(--color-brand-1);
}
```

# 关系(变化)

在现实世界的项目中，您可能会遇到的另一种情况是，出于美观的目的，您需要一组相似的颜色。

虽然可以说每一个设计决策都是由一些非美学的动机驱动的，但有时这种推理太微不足道了，不足以证明打破它是正确的。也就是说，我们应该合理地注意这些琐碎的关系；如果有七种不同色调的绿色，其中只有五种是相关的，我们就不应该把另外两种放在同一个组里。

为了解决这些细微的颜色变化，我为每个变化添加了另一个数字。

```
--color-success-1: #55ab57;
--color-success-1-1: #3c8f4f;
--color-success-1-2: #4d7a64;
--color-success-1-3: #1ddb7c;
```

出于特定的原因，在一些情况下可能需要堆叠这些后缀。当然，这必须很少练习，而且要适度。遵循这种模式到第 n 个极端肯定会变得不可维护。

```
--color-success-1-2-c: #c5dec6;/* never name something like this if you want to give me credit! */
--color-success-1-2-1-c-5-4-c: #00ff00;
```

# 它们必须是 CSS 自定义属性吗？

我有自己喜欢定制属性的理由，但是它们都不适用于这种命名约定。您可以随意将这种模式用于 SCSS、LESS 或任何您喜欢的预处理程序。好处来自名称的灵活性和可读性，而不是技术的选择。

在自定义属性的情况下，您可以穿透 shadow DOM 并使用层叠来获得优势，沿树向下嵌套不同的主题。您仍然可以通过简单地导入一个不同的`_variables.scss`文件来用 SCSS 实现主题范围，但是您必须意识到这会如何影响 shadow DOM。

# 结论

到目前为止，这个惯例在我的职业生涯中发挥了很好的作用，我觉得是时候让它发扬光大了。我希望你和我一样觉得这很有用。

也许你的项目不需要主题能力，但我个人认为我所做的一切最终都需要更新。根据我的经验，主题通常是事后才想到的，似乎从来没有人预测过它们会扩展到那个程度。在太多的情况下，我被要求重新设计一个网站，这个网站最初并没有考虑到主题的变化。这一经历让我热衷于为未来的开发人员着想。

如果您有任何建议或问题，请随时回复！我可以做一些修改。如果你喜欢这个命名惯例，请与你的朋友和同事分享。我想贡献一些有帮助的东西，减少行业内的自行车脱落，即使只是很小的一部分。