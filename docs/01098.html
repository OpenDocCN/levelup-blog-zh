<html>
<head>
<title>React Hooks — useReducer &amp; useRef</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React挂钩— useReducer和useRef</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/clean-components-with-react-hooks-part-2-41b92f64f8b3?source=collection_archive---------1-----------------------#2019-11-09">https://levelup.gitconnected.com/clean-components-with-react-hooks-part-2-41b92f64f8b3?source=collection_archive---------1-----------------------#2019-11-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="0878" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae kl" rel="noopener ugc nofollow" target="_blank" href="/clean-components-with-react-hooks-4cfef201176e">在上周的文章</a>中，我们探讨了React团队将钩子引入库的决定，并比较了传统的类组件和带有React钩子的函数组件。在这个比较中，我们走过了如何实现<code class="fe km kn ko kp b">useState</code>、<code class="fe km kn ko kp b">useEffect</code>，并创建了一个自定义钩子<code class="fe km kn ko kp b">useBrowserTabEffect</code>、T23。</p><p id="af55" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">今天，我们将探索<code class="fe km kn ko kp b">useReducer</code> <strong class="jp ir"> </strong>来创建一个可以增加、减少和复位的计数器组件。我们还将引入<code class="fe km kn ko kp b">useRef</code>来制作待办事项清单。这两个例子都是带有React钩子的函数组件。</p></div><div class="ab cl kq kr hu ks" role="separator"><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv"/></div><div class="ij ik il im in"><h1 id="4c63" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">带有用户的计数器</h1><p id="0f98" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">为了理解<code class="fe km kn ko kp b">useReducer</code>钩子，这里有一段摘录自<a class="ae kl" href="https://reactjs.org/docs/hooks-reference.html#usereducer" rel="noopener ugc nofollow" target="_blank"> React钩子API参考</a>。</p><p id="f872" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">根据文件:</p><p id="d3d3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">"<code class="fe km kn ko kp b">useReducer</code>通常比<code class="fe km kn ko kp b">useState</code>更适用于包含多个子值的复杂状态逻辑，或者下一个状态依赖于前一个状态的情况。"</p><figure class="mb mc md me gt mf gh gi paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="gh gi ma"><img src="../Images/37816dafed9e4a3ec0a38dd4069c56a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CPdRmYZHMp7nrKl8uigZvQ.png"/></div></div></figure><p id="85af" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了开始计数，我们设置一个<code class="fe km kn ko kp b">initialState</code>，使<code class="fe km kn ko kp b">count</code>等于零。使用switch语句创建<code class="fe km kn ko kp b">reducer</code>函数，以说明增加、减少和重置<code class="fe km kn ko kp b">count</code>的操作。在第二十六行，通过调用<code class="fe km kn ko kp b">dispatch</code>更新<code class="fe km kn ko kp b">state</code>。<code class="fe km kn ko kp b">initialState</code>和<code class="fe km kn ko kp b">reducer</code>函数都被传递到<code class="fe km kn ko kp b">useReducer</code>钩子中。</p><figure class="mb mc md me gt mf gh gi paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="gh gi mm"><img src="../Images/bddd537562d48a0dfe1123f57b337ca2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JZUQxU53qiRgqyZ_lQCYHA.png"/></div></div></figure></div><div class="ab cl kq kr hu ks" role="separator"><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv"/></div><div class="ij ik il im in"><h1 id="c6bd" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">使用useReducer和useRef的待办事项列表</h1><p id="5d2d" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">现在我们已经看到了一个利用<code class="fe km kn ko kp b">useReducer</code>的例子，让我们来介绍一下<code class="fe km kn ko kp b">useRef</code>！<a class="ae kl" href="https://reactjs.org/docs/hooks-reference.html#useref" rel="noopener ugc nofollow" target="_blank"> React钩子文档</a>在下面解释这个钩子。</p><p id="ece2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">“有没有类似实例变量的东西？是啊！这个<code class="fe km kn ko kp b"><a class="ae kl" href="https://reactjs.org/docs/hooks-reference.html#useref" rel="noopener ugc nofollow" target="_blank">useRef()</a></code>钩子不仅仅是给DOM引用的。“ref”对象是一个通用容器，其<code class="fe km kn ko kp b">current</code>属性是可变的，可以保存任何值，类似于类的实例属性。</p><figure class="mb mc md me gt mf gh gi paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="gh gi mn"><img src="../Images/6dc46ba550a8ccef1d84f80e97bab055.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GEl6QheJO1zJaJnXGIjWJg.png"/></div></div></figure><figure class="mb mc md me gt mf gh gi paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="gh gi mo"><img src="../Images/e99a86ba0bc9fd589cad5e8b7ca38bf3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y8uY7_-xIka3iwFLOYOXtg.png"/></div></div></figure><p id="8ab7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了创建待办事项列表，我们制作了一个带有输入字段的表单，用于向列表中添加新项目。通过<code class="fe km kn ko kp b">useRef()</code>将<code class="fe km kn ko kp b">todoText</code>设置为空白，并且在提交表单时可以访问。下一步是构造初始状态设置为空数组的<code class="fe km kn ko kp b">todoList</code>变量和通过动作更新列表状态的<code class="fe km kn ko kp b">dispatch</code>。<code class="fe km kn ko kp b">useReducer</code>接收<code class="fe km kn ko kp b">state</code>和发生的<code class="fe km kn ko kp b">action</code>来添加项目、删除项目或重置待办事项列表。<code class="fe km kn ko kp b">handleSubmit</code>利用<code class="fe km kn ko kp b">useRef</code>接收输入到表单输入中的<code class="fe km kn ko kp b">todoText</code>。这个文本可以通过调用<code class="fe km kn ko kp b">todoText.current.value</code>来访问，一旦条目被添加到列表中，它就被设置回一个空字符串。</p><figure class="mb mc md me gt mf gh gi paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="gh gi mp"><img src="../Images/d413e866a19ece53df079ec5fc0e7800.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QKzbewqHxcvvWhMxvl8gxg.png"/></div></div></figure><p id="a94b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">React挂钩使得函数组件可读，并在管理中小型应用程序时创建了一个有趣的React-Redux替代方案。如果您对修补这些组件感兴趣，可以通过在这里克隆<a class="ae kl" href="https://github.com/PrestonElliott/React-Hooks" rel="noopener ugc nofollow" target="_blank">库</a>来尝试计数器和待办事项列表！</p><figure class="mb mc md me gt mf gh gi paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="gh gi mq"><img src="../Images/b5f27a0686db5ad2765fb581b60d478b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_w-MJDmad2MBe1aa"/></div></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk translated"><a class="ae kl" href="https://unsplash.com/photos/tvleqH3p1os" rel="noopener ugc nofollow" target="_blank">来源</a></figcaption></figure></div></div>    
</body>
</html>