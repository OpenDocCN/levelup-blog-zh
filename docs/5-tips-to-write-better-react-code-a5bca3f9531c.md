# 编写更好的 React 代码的 5 个技巧

> 原文：<https://levelup.gitconnected.com/5-tips-to-write-better-react-code-a5bca3f9531c>

![](img/1a49f9720fe9bcf06be038f3bf3b08eb.png)

照片由[https://unsplash.com/@ricaros](https://unsplash.com/@ricaros)拍摄

我已经使用 React 一年多了，所以我不是专家，但我已经构建了几个项目，帮助我更好地理解这个库，并注意到一些技巧和模式，使我的代码更加高效。

在这篇文章中，我想分享一些提示和技巧，它们会立即改进您的 React 代码。

# 1.破坏道具

在 JS 中析构对象(尤其是道具)可以大大减少代码中的重复。看看下面的例子。

父组件

我们有一个 CoffeMenu 组件，它存储了可用饮料的列表。现在我们想创建另一个能够显示单一饮料的组件。如果没有析构属性，我们的代码将如下所示:

子组件(无析构)

正如你所看到的，它看起来不太好——每次我们想得到道具时，我们都必须重复“道具.咖啡”部分。幸运的是，还有另一种(更干净的)方法。

子组件(在解构 props 之后)

如果我们想给一个子组件传递很多参数，我们也可以直接在构造函数中析构 props(或者函数组件参数)。这里有一个例子:

父组件

子组件

# 2.保持导入模块的正确顺序

有时(特别是在容器组件中——请看第 4 点),我们需要使用许多不同的模块，我们的组件导入看起来有点乱。

对于导入模块的理想顺序有许多不同的观点。我建议你四处看看，找到一个适合你的。

对我来说，我通常按类型对导入进行分组，并按字母顺序排序(这是可选的)。我也倾向于保持以下顺序:

1.  标准模块
2.  第三方模块
3.  您的代码导入(组件等。)
4.  特定于模块的导入(例如 CSS、PNG 等。)
5.  仅用于测试的代码

在这种快速重构之后，我们的导入开始看起来干净多了。

# 3.使用片段

在我们的组件中，我们经常返回多个元素。单个 React 组件不能返回多个子组件，所以我们通常将它们包装在一个' div '中。有时候这种解决方案真的很成问题。让我们看看这个例子。

我们想要创建一个表组件，它包含另一个名为 Columns 的组件。

我们的 Columns 组件包含一些“td”元素。因为我们不能返回多个值，所以我们需要将这些元素包装在一个“div”中。

结果，我们得到一个错误，因为我们不允许在“tr”标签中放入“div”。解决方案是使用“片段”标签，如下所示:

我们可以把‘碎片’当作一个看不见的‘div’。它将元素包装在子组件中，将它们带到父组件中，然后消失。

您也可以使用较短的语法，但是它不支持键和属性。

# 4.使用表示和容器组件

将应用程序的组件分成表示性(非智能)和容器性(智能)组件是一个好主意。如果你不知道这些是什么:

## 表象成分

*   主要关注用户界面。他们负责组件的外观。
*   所有数据由 props 提供。哑组件不应该进行 API 调用。这是智能元件的工作。
*   除了 UI 包，它们不需要应用依赖。
*   它们可以包含状态，但只是为了操作 UI 本身——它们不应该存储应用程序数据。

哑组件的例子:*加载器，模态，按钮，输入*。

## 容器组件

*   他们不关注造型，通常不包括任何造型。
*   它们是用来操作数据的。他们可以获取、捕获更改，并传递应用程序数据。
*   它们负责管理状态、重新渲染组件等。
*   它们可能需要应用依赖、调用冗余、生命周期方法、API、库等。

## 使用表示和容器组件的好处

*   更好的可读性
*   更好的可重用性
*   更容易测试

此外，它符合单一责任原则——一个组件负责外观，另一个组件负责数据。

## 例子

让我们看一个简单的例子。这是一个图书列表组件，它从 API 获取图书数据并显示在列表中。

这个组件的问题是，它负责太多的事情。它获取并呈现数据。它还与一个特定的端点相关联，所以不能使用这个组件来显示 ex。某个用户的图书列表，无需重复代码。

现在，让我们试着将这个组件分成表示组件和容器组件。

演示书籍列表组件

Contianer 图书列表组件

如你所见，它看起来好多了。更重要的是，它允许我们在不同数据的许多地方使用书单组件。

# 5.使用样式组件

React 组件的样式一直很成问题。查找拼写错误的类名、维护大型 CSS 文件、处理兼容性问题有时会很痛苦。

样式化组件允许您使用带标签的模板文字在 JavaScript 中编写 CSS。有了它们，您可以动态地设计组件样式，忘记使用类名，并优化 CSS 性能。

从样式化组件开始，您需要使用 NPM 将样式化组件库添加到 ReactJS 项目中:

```
npm i styled-components
```

现在让我们创建我们的第一个样式组件。

使用样式组件的按钮和网格

我们可以看到下面的结果:

这只是样式化组件如何工作的一个简单例子，但是它们可以做的远不止这些。你可以在他们的官方[文档](https://styled-components.com/docs)中读到更多关于风格化组件的内容。

感谢您的阅读！所以文章到此结束。我希望你学到了新的东西。如果你知道 React 中的其他技巧和诀窍，请在下面的评论区分享。能听到他们的消息真是太好了！