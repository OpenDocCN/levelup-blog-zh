<html>
<head>
<title>Exploring the Ethereum block</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">探索以太坊街区</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/exploring-the-ethereum-block-9fa3a68e42d8?source=collection_archive---------14-----------------------#2021-06-29">https://levelup.gitconnected.com/exploring-the-ethereum-block-9fa3a68e42d8?source=collection_archive---------14-----------------------#2021-06-29</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="853b" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">以太坊节点系列II —使用Geth检索以太坊块数据</h2></div><p id="d7b0" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在以太坊节点系列的上一篇文章中，我们经历了<a class="ae le" rel="noopener ugc nofollow" target="_blank" href="/deploying-an-ethereum-node-on-aws-cloud-512a861026e2"> <strong class="kk iu">在AWS云</strong> </a>上部署以太坊节点的步骤。现在我们的节点已经部署并运行，让我们开始使用它，学习如何检索Egthereum块，了解以太坊块的不同组件，并了解一些与以太坊网络相关的其他命令。</p><h2 id="b18c" class="lf lg it bd lh li lj dn lk ll lm dp ln kr lo lp lq kv lr ls lt kz lu lv lw lx bi translated">以太坊——世界上最大的分布式计算机</h2><p id="9b56" class="pw-post-body-paragraph ki kj it kk b kl ly ju kn ko lz jx kq kr ma kt ku kv mb kx ky kz mc lb lc ld im bi translated">以太坊也被描述为第二代区块链(类似于第一代比特币区块链)，支持首次<a class="ae le" rel="noopener ugc nofollow" target="_blank" href="/smart-contracts-can-we-just-get-straight-to-the-point-4c904d97630">智能合约</a>和脚本功能。智能合约允许一个充满各种可能性的世界，它们可以几乎自动化任何事情，是生活在分散的区块链中的自我执行的计算机代码。一旦满足智能合约的条件，就会触发一个事件(无论智能合约是为什么而设计的)，从而实现智能合约的目的。</p><figure class="me mf mg mh gt mi gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi md"><img src="../Images/58851f4927d5f5380f1495070457b23b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tK29Z4vzRDMB_mMzcp3hnQ.jpeg"/></div></div></figure><p id="2fe7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在以太坊，智能合约是用一种叫做Solidity的编程语言编写的，这些程序在EVM——以太坊虚拟机上运行。你可以把EVM看作一个巨大的<a class="ae le" rel="noopener ugc nofollow" target="_blank" href="/smart-contracts-can-we-just-get-straight-to-the-point-4c904d97630">图灵完全</a>，分散的虚拟机分布在全球所有以太坊节点上。总共有大约8500个节点，几乎任何人都可以成为网络中的一个节点。EVM是智能合同执行的核心。由于其分散的性质，它还具有高冗余性、高容错性，并且非常能抵抗DDoS堆叠和不可变等攻击。有什么条件？代价是以太坊的吞吐量可能有点低，和/或交易费用有时可能很高。</p><h2 id="b7d6" class="lf lg it bd lh li lj dn lk ll lm dp ln kr lo lp lq kv lr ls lt kz lu lv lw lx bi translated">以太坊街区</h2><p id="f35f" class="pw-post-body-paragraph ki kj it kk b kl ly ju kn ko lz jx kq kr ma kt ku kv mb kx ky kz mc lb lc ld im bi translated">以太坊模块由以下几个字段组成。我们将把它们全部分解开来。下面，你可以看到我们从以太坊区块链取回的一块石头。</p><figure class="me mf mg mh gt mi gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/80f7239b56b282deafe695b78075b2f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*sjAlVX24xOZGVCKX4eXB3w.png"/></div></figure><p id="c2b8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">以太坊块与比特币相比略有不同，尽管有些字段是相同的。这是一个实际的块，更准确地说是888888块，它是用时间戳1453494307(纪元时间)挖掘出来的，在人类可读的时间中是2016年1月22日，8:25:07 PM GMT。这个方块样本很好地展示了其他以太坊方块的样子。</p><h2 id="e1c9" class="lf lg it bd lh li lj dn lk ll lm dp ln kr lo lp lq kv lr ls lt kz lu lv lw lx bi translated">开始使用以太坊Geth命令</h2><p id="804a" class="pw-post-body-paragraph ki kj it kk b kl ly ju kn ko lz jx kq kr ma kt ku kv mb kx ky kz mc lb lc ld im bi translated">假设你已经有了一台以太坊geth机，我们可以开始玩了。如果您还没有运行的节点，您可以查看这篇文章，在这篇文章中，我解释了如何在AWS  上部署以太坊节点。</p><p id="72ac" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们开始吧！在Geth控制台中首先要学习的命令之一是</p><pre class="me mf mg mh gt mq mr ms mt aw mu bi"><span id="8709" class="lf lg it mr b gy mv mw l mx my">eth. </span></pre><p id="1e17" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">快速按下tab键两次。</p><p id="6af6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您将看到API命令列表。这些API命令兼容不同的编程语言，如JavaScript和Python。</p><figure class="me mf mg mh gt mi gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/51ea9a827fd506aaafe11e8b88b4b16a.png" data-original-src="https://miro.medium.com/v2/resize:fit:770/format:webp/1*rRAESMd1ttsJmUFkas3FTg.png"/></div></figure><p id="117e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果您按tab键，命令行会自动完成您开始编写的任何命令，以便于编写命令。例如，你可以输入<em class="na"> eth.syn </em>，如果你按下tab键，它会自动完成<em class="na"> eth.syncing </em></p><p id="4ed8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要对以太坊连接进行健康检查，并查看节点是否正在同步，可以使用以下命令:</p><pre class="me mf mg mh gt mq mr ms mt aw mu bi"><span id="42bf" class="lf lg it mr b gy mv mw l mx my">eth.syncing</span></pre><figure class="me mf mg mh gt mi gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/1ff4b74e8a45114e6c76aeb4a0632f64.png" data-original-src="https://miro.medium.com/v2/resize:fit:694/format:webp/1*aIrKoRwNI4FfCba06XKyAA.png"/></div></figure><p id="7c7a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这里，我们可以看到我们正在与网络、状态、区块链中的当前块等同步。</p><p id="997c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">“eth.syncing”下还有一些附加命令。要查看列表，您可以键入<em class="na"> eth.syncing. </em>并快速按下tab键两次。</p><p id="1ea6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">使用同步命令，我们可以看到节点正在同步，我们可以使用命令eth.syncing或eth.syncing.currentBlock来查看我们的节点正在同步的当前块。</p><h2 id="a269" class="lf lg it bd lh li lj dn lk ll lm dp ln kr lo lp lq kv lr ls lt kz lu lv lw lx bi translated">检查以太坊节点网络状态</h2><p id="1ce3" class="pw-post-body-paragraph ki kj it kk b kl ly ju kn ko lz jx kq kr ma kt ku kv mb kx ky kz mc lb lc ld im bi translated">现在让我们检查我们的网络状态，并检查我们的节点是否正在监听并连接到其他对等节点。要从区块链检索数据并进行同步，您需要连接。</p><figure class="me mf mg mh gt mi gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/d0c5fc308f7e7147ec4bb090eafc483b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*jhBu77VgjghR9xj-hh9tzw.png"/></div></figure><p id="2660" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">使用命令net.listening，我们可以看到我们的net.listening=true，这很好，</p><pre class="me mf mg mh gt mq mr ms mt aw mu bi"><span id="36a6" class="lf lg it mr b gy mv mw l mx my">net.peerCount</span></pre><p id="1af6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们看到我们连接到16个对等节点。太棒了。</p><p id="6ada" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">另一个了解网络构成的有趣命令是</p><pre class="me mf mg mh gt mq mr ms mt aw mu bi"><span id="b14d" class="lf lg it mr b gy mv mw l mx my">admin.peers</span></pre><p id="da00" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这将为您提供有关您所连接的对等节点的信息。</p><figure class="me mf mg mh gt mi gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/cac32a4f45b5e78562285388eae9eedd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*i4Fj60sO2Z_1JYpFhowHuQ.png"/></div></figure><p id="35e6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这个截图中，我们可以看到这个节点的一些信息，包括他的软件的版本——在这个例子中，他使用的是Geth v 1 . 9 . 25——我们还可以看到对等节点的IP地址。IP地址是公开的，这就是为什么您不应该从您的个人笔记本电脑上运行节点。</p><p id="2c6d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果您想获得节点的详细信息，可以运行</p><pre class="me mf mg mh gt mq mr ms mt aw mu bi"><span id="a762" class="lf lg it mr b gy mv mw l mx my">admin.nodeInfo</span></pre><p id="0dd8" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您将从自己的节点获得类似的信息，包括您的版本、IP地址、块、共识等等。</p><h1 id="4c73" class="nc lg it bd lh nd ne nf lk ng nh ni ln jz nj ka lq kc nk kd lt kf nl kg lw nm bi translated">探索以太坊街区</h1><p id="6274" class="pw-post-body-paragraph ki kj it kk b kl ly ju kn ko lz jx kq kr ma kt ku kv mb kx ky kz mc lb lc ld im bi translated">好的，一旦你确认你连接到网络上，你就可以开始探索这些区块并检索数据了。只要你的节点是同步的，你可以看一看并探索以太坊区块链的任何街区。</p><p id="b7e3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这是区块链的魔法之一:任何人都可以检查、审计或跟踪任何区块，确保网络可信。所有数据都可以验证。</p><p id="d696" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，让我们使用以下命令获取块987654:</p><pre class="me mf mg mh gt mq mr ms mt aw mu bi"><span id="043a" class="lf lg it mr b gy mv mw l mx my">eth.getBlock()</span></pre><p id="e9ba" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，您可以搜索块号</p><pre class="me mf mg mh gt mq mr ms mt aw mu bi"><span id="fcde" class="lf lg it mr b gy mv mw l mx my">eth.getBlock(987654)</span></pre><p id="c6a4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">或者，如果您知道正在寻找的块的散列，则搜索块散列</p><pre class="me mf mg mh gt mq mr ms mt aw mu bi"><span id="24c5" class="lf lg it mr b gy mv mw l mx my">eth.getBlock(“0x4ca44f16a98a6bc8206c152057cf0d7a6caeb0b287e845e21a1da2849bea4c8a”)</span></pre><figure class="me mf mg mh gt mi gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/5b2e74c2a326ee64faceb360584430d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*2GFJrEkQFIXLhmaNOm80sA.png"/></div></figure><p id="2bb9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这里，您可以看到关于该块的所有信息，包括难度、gasLimit和gasUsed、哈希、十六进制随机数、UNIX时间中的时间戳、总难度和事务哈希。</p><p id="2155" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">时间戳:</strong>从Unix纪元时间开始，数据块时间戳以秒表示。时间是区块开采的时间。时间戳由开采该区块的矿工设定。因此，只要遵守一些基本规则，如块的时间戳必须是未来的某个时间而不是过去的某个时间，矿工就可以以某种方式操纵块或事务的时间戳。</p><p id="7ec3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">什么是Unix时间或纪元Unix时间？Unix时间基本上是计算机测量时间的方式。Unix时间是自1970年1月1日以来的秒数。Unix时间“0”表示1970年1月1日午夜，例如，当您重置旧手机时，您可能会看到这个日期。1455192272是指在格林威治时间2016年2月11日星期四下午12:04:32。</p><p id="328d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu"> stateRoot: </strong>起始根可以看作是以太坊区块链中所有之前的块、事务和代码散列到这个块的stateRoot中的一棵巨大的Merkle树。</p><figure class="me mf mg mh gt mi gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/482f4b997c57aa77ac3b9e4f8fad7594.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*8I0rgujcm0iCVlOUQfMXlQ.png"/></div></figure><p id="8f78" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这个状态根有一个重要的目的:它允许任何节点很容易地确认他拥有的块是正确的，而不用验证所有的区块链块。相反，他可以只验证来自其他块的散列树。当节点是灯光节点时，这一点尤其重要。</p><p id="75b1" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu"> logsBloom: </strong> logsBloom是一个256字节的字符串，它并不是传统意义上的日志。它是块日志的布隆过滤器，允许过滤块中每个元素的散列。目标是通过存储一些事件(如bloom中的历史事务)来最小化客户端需要进行的查询的数量。当有一个查询“数据<em class="na"> z </em>在集合中吗？”回答可以是“也许”，也可以是“不”。这是一种概率数据结构。</p><p id="de9c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu"> receiptsRoot: </strong>这个32字节的字符串是交易收据的根散列。</p><p id="260d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">事务:</strong>在这里，你看到的是<strong class="kk iu"> </strong>块中所有事务的hash。</p><p id="ea6c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu"> TransactionsRoot: </strong>一个32字节的字符串是块中所有事务的Merkle树的根哈希。</p><p id="ebb0" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们还可以向eth.getBlock()添加一点魔法，通过使用如下命令获得事务细节:</p><pre class="me mf mg mh gt mq mr ms mt aw mu bi"><span id="6dfc" class="lf lg it mr b gy mv mw l mx my">eth.getBlock(987654, true)</span></pre><p id="136e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这也将检索同一块中的所有事务。</p><figure class="me mf mg mh gt mi gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/cbed7ace4c0461ef0599bfe489a8f194.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*_8qsYw-BzTEGhYFzpnBnPQ.png"/></div></figure><p id="0f5c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下面是我们使用eth.getBlock(987654，true)检索的块98764中的一个事务的详细信息。</p><p id="bc3a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下一篇文章将继续研究以太坊网络，并从以太坊获取额外的信息，比如交易信息！</p><p id="42b7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">🚀关注我，也请查看我的🧱区块链课程:</strong></p><p id="8ac4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">🐶</strong> <a class="ae le" href="https://www.udemy.com/course/-dogecoin-course-the-first-complete-dogecoin-course/?referralCode=9416B1408224CE309DD8" rel="noopener ugc nofollow" target="_blank"> <strong class="kk iu">有史以来第一次Dogecoin课程</strong> </a></p><p id="cc14" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">👨‍🎓</strong> <a class="ae le" href="https://www.udemy.com/course/fintech-technologies-cloud-and-cybersecurity/?referralCode=F1D4EA005A2881735A36" rel="noopener ugc nofollow" target="_blank"> <strong class="kk iu"> Fintech、云和网络安全课程</strong> </a></p><p id="74bb" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">📖</strong><a class="ae le" href="https://www.amazon.com/dp/B091CYTX37/ref=sr_1_1?dchild=1&amp;keywords=unblockchain&amp;qid=1617186443&amp;s=digital-text&amp;sr=1-1" rel="noopener ugc nofollow" target="_blank"><strong class="kk iu"/></a><a class="ae le" href="https://www.udemy.com/course/the-complete-nft-course-learn-everything-about-nfts/?referralCode=AAEE908D13D0E2276B19" rel="noopener ugc nofollow" target="_blank"><strong class="kk iu">完整的NFTs教程</strong> </a></p><p id="c492" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">👨‍🎓</strong> <a class="ae le" href="https://www.udemy.com/course/blockchain-deep-dive-from-bitcoin-to-ethereum-to-crypto/?referralCode=B8463EE382E6D313304B" rel="noopener ugc nofollow" target="_blank"> <strong class="kk iu"> Unblockchain课程</strong> </a> <strong class="kk iu"> —脑洞大开的区块链课程</strong></p></div></div>    
</body>
</html>