<html>
<head>
<title>Build simple REST Services using Spring</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Spring构建简单的REST服务</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/build-simple-rest-services-using-spring-ac3564a3ed32?source=collection_archive---------10-----------------------#2021-08-12">https://levelup.gitconnected.com/build-simple-rest-services-using-spring-ac3564a3ed32?source=collection_archive---------10-----------------------#2021-08-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="a97c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">因为REST易于创建和使用，所以它很快成为在互联网上建立web服务的事实上的标准。关于REST如何融入微服务的世界，还有很多要说的，但是就本文的目的而言，让我们简单地关注于创建RESTful服务。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/e8586da1c3bd04c16a2e9dccaeb3a069.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u7A0F0uSK_7dXz-cBbw7Wg.jpeg"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">道格拉斯·洛佩斯在<a class="ae le" href="https://unsplash.com/s/photos/api?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</figcaption></figure><h2 id="9f61" class="lf lg it bd lh li lj dn lk ll lm dp ln kb lo lp lq kf lr ls lt kj lu lv lw lx bi translated">为什么要休息？</h2><p id="4379" class="pw-post-body-paragraph jq jr it js b jt ly jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj mc kl km kn im bi translated">REST涵盖了web的所有方面，包括它的架构、特性和好处。这并不奇怪，因为这本书的作者Roy Fielding至少参与了十几个与web相关的规范。</p><p id="4156" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">作为REST的一个好处，web及其基本协议HTTP提供了一系列功能:</p><ol class=""><li id="c124" class="md me it js b jt ju jx jy kb mf kf mg kj mh kn mi mj mk ml bi translated">合适的操作，如获取、发布、上传、删除等</li><li id="8127" class="md me it js b jt mm jx mn kb mo kf mp kj mq kn mi mj mk ml bi translated">贮藏</li><li id="dcd3" class="md me it js b jt mm jx mn kb mo kf mp kj mq kn mi mj mk ml bi translated">重定向和转发</li><li id="2128" class="md me it js b jt mm jx mn kb mo kf mp kj mq kn mi mj mk ml bi translated">加密和认证</li></ol><p id="73e2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这些都是构建弹性服务的重要方面。然而，这还不是全部。因为web是由许多小的规范组成的，所以它能够扩展而不会陷入“标准战争”的泥潭。</p><p id="0abd" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">开发人员可以使用第三方工具包来实现这些不同的规范，使他们能够快速访问客户端和服务器技术。</p><p id="1002" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在HTTPS之上开发REST APIs时，可以实现以下特性:</p><ul class=""><li id="21bd" class="md me it js b jt ju jx jy kb mf kf mg kj mh kn mr mj mk ml bi translated">向后兼容的API</li><li id="a068" class="md me it js b jt mm jx mn kb mo kf mp kj mq kn mr mj mk ml bi translated">API是可以进化的</li><li id="0ae5" class="md me it js b jt mm jx mn kb mo kf mp kj mq kn mr mj mk ml bi translated">可扩展且安全的服务</li><li id="af27" class="md me it js b jt mm jx mn kb mo kf mp kj mq kn mr mj mk ml bi translated">一系列无状态到有状态的服务</li></ul><h2 id="2f8d" class="lf lg it bd lh li lj dn lk ll lm dp ln kb lo lp lq kf lr ls lt kj lu lv lw lx bi translated">让我们开始编码</h2><p id="2373" class="pw-post-body-paragraph jq jr it js b jt ly jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj mc kl km kn im bi translated">在本文中，我将创建一个简单的应用程序来获取和发布书店的详细信息。为了存储图书的详细信息，我使用了一个列表。记住，这篇文章是基于我第一次亲身体验的春装。让我们开始吃吧。</p><p id="bcca" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">要开始这个项目，你需要使用<a class="ae le" href="https://start.spring.io/" rel="noopener ugc nofollow" target="_blank"> Spring initializer </a>添加依赖项。用户界面很容易被用户理解。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ms"><img src="../Images/a229efe81e6bc16231c496d005590496.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XaQmV7oMp7BpIEhzL7Eb8w.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">弹簧初始化器</figcaption></figure><p id="d825" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">你需要做的是，选择项目和语言。你可以根据你的知识和经验来选择。但是在这里，我选择Maven和java。以及Spring web作为添加的依赖项。</p><p id="9a64" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">创建完上述需求后，就可以生成初始代码并下载了。</p><p id="b172" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">一旦你下载并解压文件夹，你就可以开始了。您可以选择任何IDE来运行您的应用程序。我更喜欢用IntelliJ IDE来导入项目。当您打开项目时，您可以看到这样的文档结构。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/a899121a3a3888964cbb737f04605b79.png" data-original-src="https://miro.medium.com/v2/resize:fit:874/format:webp/1*Tt78ciY_yzOBD0Q0jxyJZA.png"/></div></figure><p id="e4c9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">首先，你需要做的是，转到<em class="mu"> src/main/java/ </em>里面，你可以得到<em class="mu"> DemoApplication </em> java文件。运行这个文件，检查是否一切正常。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="9c4f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在，我们需要为我们的应用程序创建逻辑。因此，在我的场景中，我将图书的详细信息存储在一个列表中。每本书都有唯一的Id、名称和日期。我创建了Book.java类，它有构造函数和相关变量。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="6b99" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在我们继续为这个应用程序创建BookService。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="mv mw l"/></div></figure><pre class="kp kq kr ks gt mx my mz na aw nb bi"><span id="756c" class="lf lg it my b gy nc nd l ne nf">The<strong class="my iu"> @Component</strong> annotation in Spring is used to indicate that a class is a component. When annotation-based configuration and classpath scanning are utilized, Spring framework will autodetect these classes for dependency injection.</span></pre><p id="1b65" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">列表<books>包含了添加到书店的所有书籍的详细信息。我们可以用数据库代替列表。但在这里我继续列举。</books></p><p id="8418" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="mu"> findAllBooks() </em>方法被定义为获取所有的图书细节。<em class="mu"> addBook() </em>方法是向商店添加一本新书，而<em class="mu"> searchBook() </em>方法是使用图书Id搜索相关图书。让我们为应用程序创建最重要的服务文件。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="5e1a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">spring<strong class="js iu"><em class="mu">@ rest controller</em></strong>注释用于一个类，将其标记为请求句柄。而且是用<strong class="js iu"> <em class="mu"> @Controller </em> </strong>和<strong class="js iu"> <em class="mu"> @ResponseBody标注的方便注释。</em> </strong></p><p id="1f31" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">要用Spring MVC构建RESTful web服务，请使用RestController注释。请求数据到已定义的请求处理程序方法的映射由Spring RestController处理。创建响应体后，handler方法将响应体转换为JSON或XML。</p><p id="54f7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">【RestController与控制器的区别</p><pre class="kp kq kr ks gt mx my mz na aw nb bi"><span id="63aa" class="lf lg it my b gy nc nd l ne nf">@RestController is the combination of @Controller and @ResponseBody. @RestController <strong class="my iu">returns an object as a response instead of a view</strong>. @Controller returns View.</span><span id="d2d0" class="lf lg it my b gy ng nd l ne nf">@Controller<br/>public class Book{<br/><br/>  @RequestMapping(value={"/uri"})<br/>  @ResponseBody<br/>  public ObjectResponse functionRestName(){<br/>      //logic<br/>      return instance<br/>   }<br/>}</span></pre><p id="1c77" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在RestController中，默认情况下,@ResponseBody是打开的。没有必要将它包含在函数签名之上。</p><pre class="kp kq kr ks gt mx my mz na aw nb bi"><span id="fa71" class="lf lg it my b gy nc nd l ne nf">@RestController<br/>public class Book{<br/><br/>  @RequestMapping(value={"/uri"})<br/>  public ObjectResponse functionRestName(){<br/>      //...<br/>      return instance<br/>   }<br/>}</span></pre><p id="09be" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">获取地图</strong></p><pre class="kp kq kr ks gt mx my mz na aw nb bi"><span id="ee14" class="lf lg it my b gy nc nd l ne nf">Annotation for assigning specific handler methods to HTTP GET requests. @RequestMapping(method = RequestMethod. GET) is a constructed annotation that functions as a shorthand for </span><span id="9cbc" class="lf lg it my b gy ng nd l ne nf"><strong class="my iu">@GetMapping(method = RequestMethod. GET).</strong></span></pre><p id="c8bb" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">邮戳</strong></p><pre class="kp kq kr ks gt mx my mz na aw nb bi"><span id="c575" class="lf lg it my b gy nc nd l ne nf"><strong class="my iu">@RequestMapping(method = RequestMethod. POST) </strong></span><span id="41ce" class="lf lg it my b gy ng nd l ne nf">is a constructed annotation that functions as a shortcut for @PostMapping. Annotated methods with the @PostMapping annotation handle HTTP POST requests that match a particular URI expression.</span></pre><p id="41bf" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在PostMapping中，我已经单独定义了book对象来访问URI。下面的代码片段显示了定义特定Url的方法，该URL可以将图书id分配给URL。</p><pre class="kp kq kr ks gt mx my mz na aw nb bi"><span id="4cc3" class="lf lg it my b gy nc nd l ne nf">@PostMapping("/books") //Add data<br/>public ResponseEntity&lt;Object&gt; createBook(@RequestBody Book book){<br/><br/>    Book saveBook = bookService.addBook(book);<br/>    URI newBookLocation = ServletUriComponentsBuilder.<em class="mu">fromCurrentRequest</em>()<br/>            .path("/{bookId}")<br/>            .buildAndExpand(saveBook.getBookId())<br/>            .toUri();<br/><br/>    return ResponseEntity.<em class="mu">created</em>(newBookLocation).build();<br/>}</span></pre><p id="8b74" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">毕竟是做了，你需要在<strong class="js iu"><em class="mu">localhost:8080</em></strong>端口上运行程序看输出。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nh"><img src="../Images/59ea879843defe0b6430c2481926cea5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9BnNy_WJilRETw3zsP5SVw.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">get请求的返回详细信息</figcaption></figure><p id="1936" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们使用postmen中的POST方法添加另一个图书数据，并检查输出。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/9cc79ab1d52ada0c6fad559fc7f9fef5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1144/format:webp/1*HlV5bOrx4D0EVBnUgC2Kbg.png"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">新添加的图书数据。</figcaption></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/be9810851adbffeb87b8f54cf222b199.png" data-original-src="https://miro.medium.com/v2/resize:fit:1120/format:webp/1*rZUz1fwPVgbYajbwsjmVJQ.png"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">更新的书目</figcaption></figure><p id="a642" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">你可以在这个<a class="ae le" href="https://github.com/RaviduShehan/Simple-REST-service-using-Springboot" rel="noopener ugc nofollow" target="_blank">链接</a>获得完整的项目。这是一个在Springboot中开发REST服务的基本示例。所以希望你能学到新东西。</p></div><div class="ab cl nk nl hx nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="im in io ip iq"><p id="2a41" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">编码快乐！！！</p></div></div>    
</body>
</html>