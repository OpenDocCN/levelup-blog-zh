<html>
<head>
<title>Cassandra — The Right Data Store for Scalability, Performance, Availability and Maintainability</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Cassandra —适合可扩展性、性能、可用性和可维护性的数据存储</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/cassandra-the-right-data-store-for-scalability-performance-availability-and-maintainability-8d7ed7d40f48?source=collection_archive---------12-----------------------#2022-11-03">https://levelup.gitconnected.com/cassandra-the-right-data-store-for-scalability-performance-availability-and-maintainability-8d7ed7d40f48?source=collection_archive---------12-----------------------#2022-11-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="1db6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Cassandra是一个开源的、分布式的、基于列的数据库管理系统(DBMS)。Cassandra号称是为大容量分布式数据设计的，具有高可用性、高吞吐量和高可靠性。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/8df56518331383bb0e7be5766b67114f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3yNMCjXln2tRgCGHzUtWvg.png"/></div></div></figure><blockquote class="ky kz la"><p id="ab96" class="jn jo lb jp b jq jr js jt ju jv jw jx lc jz ka kb ld kd ke kf le kh ki kj kk ij bi translated"><em class="iq">当我们审视这里的整体生态系统时，我们发现Cassandra正受到来自三个方向的挑战</em><strong class="jp ir"><em class="iq"/></strong><em class="iq">:</em>针对关键任务应用的传统RDBMS、针对大数据分析的NoSQL数据库<em class="iq">以及内存数据库中的</em></p></blockquote><p id="9dc5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">但最大的问题是Cassandra是不是像它声称的那样是一个伟大的数据库？它真的是一个多用途的多维数据存储吗？更多的是炒作还是真的？为了找到这个问题的答案，让我们让Cassandra做一个<strong class="jp ir">垃圾邮件测试</strong>。本文将举例说明，Cassandra如何实现<em class="lb">可伸缩性、性能、可用性</em>和<em class="lb">可维护性</em>因素。</p><h1 id="801d" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">高可用性</h1><p id="5f82" class="pw-post-body-paragraph jn jo iq jp b jq md js jt ju me jw jx jy mf ka kb kc mg ke kf kg mh ki kj kk ij bi translated">在我们开始可用性测试之前，让我们了解# Cassandra #架构的一些关键特性。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/3875472fd95d83d0a0c6cad4ae6b4dff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1124/format:webp/1*R4rJxSS1OuHgQnajBJ_itg.png"/></div><figcaption class="mj mk gj gh gi ml mm bd b be z dk translated">这张图表是作者的作品</figcaption></figure><p id="fd07" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">环形结构</strong></p><p id="8683" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">与典型的主从工作模式相反，Cassandra集群以<strong class="jp ir">环形方式</strong>工作。<em class="lb">环</em>中的每个<em class="lb">节点</em>具有相同的角色和响应度。换句话说，所有节点都是相同的，并且没有控制其他节点的主节点。因此，不存在单点故障。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/522e16374d8ddb072e764af993853a12.png" data-original-src="https://miro.medium.com/v2/resize:fit:940/format:webp/1*0pYfyqpf6hHLLDp3zvQ__A.png"/></div><figcaption class="mj mk gj gh gi ml mm bd b be z dk translated">截图由作者拍摄。</figcaption></figure><p id="df0c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">多数据中心</strong></p><p id="1786" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Cassandra <em class="lb">集群</em>的<em class="lb">环</em>可以跨越多个数据中心(DC)。Cassandra既支持虚拟DC，也支持实体DC。例如，我们有两个# <em class="lb">数据中心</em>，位于两个不同的地理位置:Douglous County(美国)和Rotterdam(欧盟)。数据存储在两个DC中，但是当我们查看<em class="lb">集群</em>的Cassandra的<em class="lb">环</em>时，所有节点都向我们提供了类似于任何查询的输出，同时保持本地DC和远程DC行为不变。查询可以在本地DC进行，也可以在<em class="lb">环</em>中的所有DCs上进行。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi mo"><img src="../Images/7d86a65f15abbecc61be66fee57172f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*80VrIdC2AtMn4rzwjVCYHw.png"/></div></div><figcaption class="mj mk gj gh gi ml mm bd b be z dk translated">截图由作者拍摄。</figcaption></figure><p id="f2b8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">复制</strong></p><p id="6b5d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Cassandra还提供内置但可定制的复制功能，在#Cassandra <em class="lb">环</em>中的<em class="lb">节点</em>上存储数据的冗余副本。这意味着，如果一个<em class="lb">集群</em>中的任何节点出现故障，该<em class="lb">节点的</em>数据的一个或多个副本在<em class="lb">集群</em>中的其他机器上是可用的。此外，如果任何一个<em class="lb">数据中心</em>出现故障，其他数据中心上的数据仍然可用。</p><p id="a999" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">数据可以在单个数据中心的<em class="lb">多个节点中复制</em></strong>，在多个数据中心或在多个云提供商之间<em class="lb">复制。</em></p><p id="4eec" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Cassandra的可调特性允许通过配置定制复制因子和复制分布。Cassandra复制可以是:<em class="lb">在单个数据中心，</em> <em class="lb">跨多个数据中心</em>或<em class="lb">跨多个云提供商。</em></p><p id="c785" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，让我们通过图表来了解多数据中心复制:</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi mp"><img src="../Images/71186c65c4525512e31d3a26fa2a3a94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZnQgsaiCCgGey_EUkzviGQ.png"/></div></div><figcaption class="mj mk gj gh gi ml mm bd b be z dk translated">这张图表是作者的作品</figcaption></figure><h1 id="263d" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">可量测性</h1><p id="13e9" class="pw-post-body-paragraph jn jo iq jp b jq md js jt ju me jw jx jy mf ka kb kc mg ke kf kg mh ki kj kk ij bi translated">Cassandra是线性可伸缩的。这意味着可以通过简单地添加新的<em class="lb">节点</em>来增加容量或可扩展性。Cassandra既可以水平扩展(添加更多的<em class="lb">数据中心</em>)也可以垂直扩展(添加更多的<em class="lb">节点</em>)。</p><p id="6a7e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">在单个数据中心中扩展</strong></p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi mq"><img src="../Images/1645ea74f10783ce146378f133a5df5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FvnZxO4TjoSfctb6EYsy1w.png"/></div></div><figcaption class="mj mk gj gh gi ml mm bd b be z dk translated">这张图表是作者的作品</figcaption></figure><p id="138d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">扩展到多个数据中心</strong></p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi mq"><img src="../Images/e6e105666ac860a592d7cf016697ce0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Gc1t-STaofwrMUSTSEGs9A.png"/></div></div><figcaption class="mj mk gj gh gi ml mm bd b be z dk translated">这张图表是作者的作品</figcaption></figure><p id="4290" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">节点调试和退役</strong></p><p id="0a78" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">数据库系统伸缩能力的一个主要因素是添加和删除操作的简单和流畅程度。<strong class="jp ir"> </strong>随着虚拟节点(<em class="lb"> vnodes </em>)的引入，向现有的<em class="lb">集群</em>添加<em class="lb">节点</em>或者移除一个节点，都被大大简化了。</p><p id="c468" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当一个新的<em class="lb">节点</em>加入<em class="lb">集群</em>时，它承担来自<em class="lb">集群</em>中其他节点的偶数部分数据的责任。如果一个节点出现故障，负载会均匀分布在<em class="lb">集群</em>中的其他<em class="lb">节点</em>上。一个简单的<em class="lb">节点工具</em>命令(<em class="lb">节点工具</em>退役)可以安全地从<em class="lb">集群</em>中删除一个<em class="lb">节点</em>。这将<em class="lb">节点</em>负责的范围分配给其他<em class="lb">节点</em>并适当地复制数据。</p><h1 id="0b31" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">表演</h1><p id="6255" class="pw-post-body-paragraph jn jo iq jp b jq md js jt ju me jw jx jy mf ka kb kc mg ke kf kg mh ki kj kk ij bi translated">一般来说，#NoSQL数据库附带了许多影响性能的架构最佳实践。作为一个完全的NoSQL数据库，Cassandra拥有任何其他NoSQL数据库所拥有的所有性能优势。Cassandra实际上融合了NoSQL的所有最佳实践，使其领先于其他NoSQL竞争者。</p><p id="16e9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">完全分布:</strong> Cassandra在<em class="lb">集群</em>的<em class="lb">环</em>中的所有<em class="lb">节点</em>上提供自动数据分布。Cassandra <em class="lb">环</em>中的每个节点处理<em class="lb">集群</em>中每个活动的相应份额。Cassandra的<em class="lb">无主</em>架构有助于降低读写延迟。</p><p id="51f7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">异步</strong>:同步技术会导致不令人满意的缓慢响应时间，因为分布式DBMS会花费大量时间来检查更新是否准确、完整地在网络上传播。Cassandra的<em class="lb">异步分发</em>通过异步处理传播克服了这个问题，从而提供了高性能的读写。</p><p id="908c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">最终一致性:</strong> Cassandra的<em class="lb">最终一致</em>数据模型和<em class="lb">节点修复</em>功能确保了<em class="lb">集群</em>的一致性会随着时间的推移而自动维护。</p><p id="ff78" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Cassandra的架构允许任何授权用户连接到任何数据中心的任何节点，并使用<em class="lb"> CQL语言</em>访问数据。特定站点的用户对数据的大多数请求可以通过存储在该站点的数据来满足(本地读/写)。这加速了查询处理，因为通信和中央计算机延迟被最小化。还可以将复杂的查询拆分成子查询，这些子查询可以在几个站点并行处理，从而提供更快的响应。</p><h1 id="53c4" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">可维护性</h1><p id="dd4a" class="pw-post-body-paragraph jn jo iq jp b jq md js jt ju me jw jx jy mf ka kb kc mg ke kf kg mh ki kj kk ij bi translated"><strong class="jp ir">自我修复:</strong> Cassandra的<em class="lb">最终一致性</em>特性使得恢复故障节点变得非常容易。如果<em class="lb">节点</em>中的数据损坏，我们可以使<em class="lb">节点</em>离线，擦除损坏的数据，然后将节点重新连接到<em class="lb">环</em>。Cassandra的<em class="lb">最终一致性</em>将按照配置从其他节点传播数据。</p><p id="102c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">平滑升级:</strong> Cassandra的最终一致性特性也让升级变得平滑，甚至可以做原地版本升级。</p><p id="1360" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">快照和备份:</strong> Cassandra支持使用<em class="lb"> nodetoo </em>或<em class="lb"> opscenter </em>等工具自动备份数据/集群快照。可以对一个或所有或特定的密钥空间进行备份。备份可以存储到本地存储或远程云存储，如<em class="lb">亚马逊S3 </em>桶。<em class="lb"> OpsCenter </em>允许完整恢复、表级恢复或时间点恢复。</p><p id="70c4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">灵活恢复:</strong>可以使用<em class="lb">节点工具</em>从Cassandra <em class="lb">快照</em>中恢复Cassandra数据。它允许完整恢复、表级恢复或时间点恢复。</p></div></div>    
</body>
</html>