<html>
<head>
<title>Create Positive Expected Margin Betting Opportunities with BeautifulSoup and Python Part 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">利用BeautifulSoup和Python创造积极的预期保证金下注机会第2部分</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/create-positive-expected-margin-betting-opportunities-with-beautifulsoup-and-python-part-2-b6734cfe3f25?source=collection_archive---------4-----------------------#2022-10-13">https://levelup.gitconnected.com/create-positive-expected-margin-betting-opportunities-with-beautifulsoup-and-python-part-2-b6734cfe3f25?source=collection_archive---------4-----------------------#2022-10-13</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><p id="a637" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">在<a class="ae kp" href="https://medium.com/p/bed1b4164183" rel="noopener">第一部分</a>中，我创建了带有漂亮汤的刮刀，从一个流行的赌注比较网站刮出一个赔率运动网站。现在事情变得有趣了，因为我利用selenium来找出一本书超出5%或更多的顶级匹配。选择这个阈值是因为结果的数量很少，这减轻了使用第1部分中的URL的第二个脚本的负载，并减少了Betexplorer.com上的博彩公司提供的匹配几率。如果你有兴趣了解更多，我已经编辑了这篇文章，删除了大部分代码。请伸出手。</p><p id="9e57" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">回顾一下项目在第1部分中的位置。刮刀寻找下降的足球赔率与5%或以上的标准不一致。我把它命名为DroppingOddsScraper或DOS。</p><p id="5cc3" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">代码出现在第1部分，除了下图中的过滤器。</p><figure class="kr ks kt ku gu kv gi gj paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gi gj kq"><img src="../Images/c2c580b9ca600f1d142a901cf0923a8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pxqucWKshaXM_KxP2tNA-w.png"/></div></div><figcaption class="lc ld gk gi gj le lf bd b be z dk translated">磁盘操作系统</figcaption></figure><p id="45b2" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">结果分别退回了6%和5%的两局出界。这里的关键是我提取了我将在第二阶段使用的URL。</p><figure class="kr ks kt ku gu kv gi gj paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gi gj lg"><img src="../Images/2d7fc6a78ec8c7a219547ee9cf7dd4d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DpFfuclSHv4Ns6pOkck1Gw.png"/></div></div><figcaption class="lc ld gk gi gj le lf bd b be z dk translated">DOS结果。</figcaption></figure><p id="926a" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">在我开始第二阶段的代码演示之前，我想强调一下闭幕线作为足球比赛真实赔率的代表的重要性。(考尼茨、钟和Kreiner，2017年)的一篇论文验证了收盘赔率在创建有利可图的下注策略方面的有效性。他们研究的一个关键点在这里详述。</p><figure class="kr ks kt ku gu kv gi gj paragraph-image"><div class="gi gj lh"><img src="../Images/93d4759313f6cc23ca3f81f942808de9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1380/format:webp/1*tcPid6CGX_hxAcyqfhfetw.png"/></div><figcaption class="lc ld gk gi gj le lf bd b be z dk translated">图1:博彩公司的预测能力:(考尼茨，钟，和Kreiner 2017)</figcaption></figure><p id="e1c8" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">作者研究了跨越10年的479，440场足球比赛的收盘赔率，并可视化了博彩公司预测(即他们的赔率)与比赛的实际结果。(考尼茨、钟和Kreiner，2017年)引用如下:</p><p id="654f" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated"><em class="li">“博彩公司估计的概率(由各博彩公司平均收盘赔率的倒数反映)与足球比赛结果的真实概率高度相关，主队获胜(黑点)、平局(洋红色点)和客队获胜(蓝点)。”</em></p><p id="645a" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">对于他们研究的一个简单定义，它本质上意味着博彩公司已经控制的模型是真实赔率的很好的标记。也就是说，采取利用不利因素的策略，随着时间的推移，将会产生正回报。</p><p id="588e" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated"><em class="li">*严重警告——你将被限制时间。</em></p><p id="bd58" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">现在来看编码。我进口硒。并提取足球/之后的字符串段。如阿曼/苏丹杯/萨拉赫-sc-al-穆德海比/Is6Li9vA/。这允许我使用一个f字符串，URL在其中循环，目标结果在我清理和连接的地方追加。</p><p id="a166" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">目标url如图2所示，我想要比赛名称(显示在黑色文本中)和每个书签及其赔率。我通过右键单击我的目标变量并复制xpath来使用inspect page。</p><figure class="kr ks kt ku gu kv gi gj paragraph-image"><div class="gi gj lj"><img src="../Images/20459876aabe3303d8c032635bd69b7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1366/format:webp/1*oyyHzkSlfLP2VZWNcOO7sQ.png"/></div><figcaption class="lc ld gk gi gj le lf bd b be z dk translated">图2:目标URL。</figcaption></figure><p id="6386" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">match_names捕获比赛名称，bookie_odds捕获所有1X2的赔率，TotalBooklines捕获博彩公司的数量:在这个例子中是9，我将在后面使用。睡眠功能确保铲运机在继续之前等待8秒钟。任何铲运机的关键要求。</p><h1 id="cd09" class="lk ll iu bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">清洁</h1><p id="0b35" class="pw-post-body-paragraph jr js iu jt b ju mi jw jx jy mj ka kb kc mk ke kf kg ml ki kj kk mm km kn ko in bi translated">未挂起的结果看起来是这样的，一些在列表中，而另一些作为简单的字符串返回。</p><figure class="kr ks kt ku gu kv gi gj paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gi gj mn"><img src="../Images/76b49ec47bd6b3ff76c9257195e08402.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bVijKn3auiy7fzV94YAo1w.png"/></div></div></figure><p id="f8f9" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">我将这些转化为数据框架，并在适当的地方使用列表理解来提取欲望的元素。</p><p id="689f" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">该行使用博彩公司的数量来复制匹配名称行。稍后你会明白为什么。</p><pre class="kr ks kt ku gu mo mp mq mr aw ms bi"><span id="dc09" class="mt ll iu mp b gz mu mv l mw mx">scraped_match_names.loc[scraped_match_names.index.repeat(bookLines['NumBookie'])].reset_index(drop=True)</span></pre><p id="6b0f" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">除此之外，它只是清理信息并将其转换为更清晰的表示。Lambda函数的使用允许赔率被1X2分割。</p><p id="d54b" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">最终的数据帧如下所示。booklines变量允许我重复博彩公司提供的第一场比赛赔率为9的比赛名称。然后在第二次匹配中使用值8，通过Betexplorer给我们一个完整的市场视图。</p><figure class="kr ks kt ku gu kv gi gj paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gi gj my"><img src="../Images/c479588a4f8edd52009bbf2697687dc7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6YXYIc5OonM6x-Aa1s-N5Q.png"/></div></div><figcaption class="lc ld gk gi gj le lf bd b be z dk translated">DOS v2。</figcaption></figure><p id="807a" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko in bi translated">总的来说，它有165行代码！。我真的很喜欢这个项目，并在这个过程中学到了很多关于网络抓取的知识。我希望你喜欢这个项目的独特性，并一如既往地关注我更多的编程和足球内容。再次重申这一点，我已经删除了这篇文章中的大部分代码，如果你有兴趣了解更多，包括购买完整的脚本，包括在您的本地机器上运行它的应用程序，请联系。你可以在paulcorcoran1992@gmail.com联系我</p><figure class="kr ks kt ku gu kv"><div class="bz fq l di"><div class="mz na l"/></div></figure><h1 id="40fe" class="lk ll iu bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">参考</h1><ul class=""><li id="0614" class="nb nc iu jt b ju mi jy mj kc nd kg ne kk nf ko ng nh ni nj bi translated">、利桑德罗、钟和贾维尔·克莱纳。2017."用他们自己的数字击败博彩公司——以及在线体育博彩市场是如何被操纵的."ArXiv [Stat。AP] 。arXiv。【http://arxiv.org/abs/1710.02824. T2】号</li></ul></div></div>    
</body>
</html>