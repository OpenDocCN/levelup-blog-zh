<html>
<head>
<title>Letâ€™s Build a Snazzy Animated Sticky Footer For GDPR Compliance!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">è®©æˆ‘ä»¬å»ºç«‹ä¸€ä¸ªæ—¶é«¦çš„åŠ¨ç”»ç²˜é¡µè„šGDPRåˆè§„ï¼</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://levelup.gitconnected.com/lets-build-a-snazzy-animated-sticky-footer-for-gdpr-compliance-65e510b7f091?source=collection_archive---------12-----------------------#2021-04-20">https://levelup.gitconnected.com/lets-build-a-snazzy-animated-sticky-footer-for-gdpr-compliance-65e510b7f091?source=collection_archive---------12-----------------------#2021-04-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="c5b6" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated"><strong class="ak">åˆ©ç”¨react-revealã€react-cookieå’ŒBootstrapé£æ ¼ã€‚</strong></h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/8ccdffdcd9067ded59ce89eb13d99296.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*sP8itCShXifFloJvBOLJ0Q.gif"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">ä¸€ä¸ªå°çš„gifå›¾ç‰‡ï¼Œå±•ç¤ºäº†æˆ‘ä»¬å°†åœ¨è¿™ç¯‡æ–‡ç« ä¸­æ„å»ºçš„ä¸œè¥¿ï¼</figcaption></figure><p id="6679" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">æŸ¥çœ‹GitHub Pagesç«™ç‚¹è¿è¡Œcookieç»„ä»¶çš„ç¤ºä¾‹ï¼</p><p id="334b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="ls">å…è´£å£°æ˜:æˆ‘ä¸æ˜¯æ³•å¾‹ä¸“å®¶ï¼Œå› æ­¤æ‚¨éœ€è¦è‡ªå·±å°½èŒè°ƒæŸ¥ï¼Œä»¥ç¡®ä¿GDPRåˆè§„æ€§ã€‚</em></p><h1 id="71f7" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">å…ˆå†³æ¡ä»¶</h1><p id="8748" class="pw-post-body-paragraph kv kw iq kx b ky ml jr la lb mm ju ld le mn lg lh li mo lk ll lm mp lo lp lq ij bi translated">è¿™ç¯‡æ–‡ç« å‡è®¾ä½ æ­£åœ¨ä½¿ç”¨ä»¥ä¸‹çš„ç»„åˆ:</p><ul class=""><li id="b73b" class="mq mr iq kx b ky kz lb lc le ms li mt lm mu lq mv mw mx my bi translated">ç›–èŒ¨æ¯”ï¼ˆå§“ï¼‰</li><li id="534e" class="mq mr iq kx b ky mz lb na le nb li nc lm nd lq mv mw mx my bi translated">ååº”</li><li id="e3a1" class="mq mr iq kx b ky mz lb na le nb li nc lm nd lq mv mw mx my bi translated">ä»¥æ‰“å­—æ‰“çš„æ–‡ä»¶</li><li id="f316" class="mq mr iq kx b ky mz lb na le nb li nc lm nd lq mv mw mx my bi translated">å¼•å¯¼ç¨‹åº</li></ul><p id="2551" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">å¦‚æœä½ æ­£åœ¨ä½¿ç”¨è¿™äº›ï¼Œè¿™æ˜¯æœ€é€‚åˆä½ çš„å¸–å­ã€‚æŸ¥çœ‹<a class="ae lr" href="https://dev.to/fullstackchris/let-s-build-a-snazzy-animated-sticky-footer-for-gdpr-compliance-27ci" rel="noopener ugc nofollow" target="_blank">ç¤ºä¾‹ç«™ç‚¹</a>ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªç©ºçš„Gatsby starterç«™ç‚¹ï¼Œä»¥æŸ¥çœ‹æ¨ªå¹…çš„å®é™…æ•ˆæœï¼</p><h1 id="64e1" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">åŸºç¡€ç»„ä»¶</h1><p id="aabc" class="pw-post-body-paragraph kv kw iq kx b ky ml jr la lb mm ju ld le mn lg lh li mo lk ll lm mp lo lp lq ij bi translated">è®©æˆ‘ä»¬ä»ä½¿ç”¨Bootstrapç±»å‘ˆç°ç²˜æ€§é¡µè„šå¼€å§‹:</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="9345" class="nj lu iq nf b gy nk nl l nm nn">import * as React from "react"</span><span id="6147" class="nj lu iq nf b gy no nl l nm nn">export function GDPRBanner() {<br/>    return (<br/>        &lt;div className="fixed-bottom bg-gold p-2"&gt;<br/>            &lt;div className="row justify-content-center align-items-center"&gt;<br/>                &lt;span className="text-dark font-weight-bold mx-3"&gt;<br/>                    We use cookies to track the count of visits to this site,<br/>                    but that's it. â™¥ï¸<br/>                &lt;/span&gt;<br/>                &lt;button className="btn btn-primary mr-3"&gt;Allow&lt;/button&gt;<br/>                &lt;button className="btn btn-secondary"&gt;Disable&lt;/button&gt;<br/>            &lt;/div&gt;<br/>        &lt;/div&gt;<br/>    )<br/>}</span></pre><p id="f63f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">è¿™æ˜¯ä¸€ä¸ªå¥½çš„å¼€å§‹ï¼Œä½†å®ƒåªæ˜¯é™æ€æ ‡è®°ï¼Œæ²¡æœ‰å®é™…åŠŸèƒ½ã€‚å®ƒä¼šä¸€ç›´å‘†åœ¨é‚£é‡Œï¼Œç‚¹å‡»æ—¶æŒ‰é’®ä¸ä¼šåšä»»ä½•äº‹æƒ…ã€‚</p><h1 id="d8df" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">æ·»åŠ Cookieå’ŒCookieäº¤äº’</h1><p id="dffb" class="pw-post-body-paragraph kv kw iq kx b ky ml jr la lb mm ju ld le mn lg lh li mo lk ll lm mp lo lp lq ij bi translated">åœ¨Gatsbyæ’ä»¶ç½‘ç«™ä¸Šå››å¤„çª¥æ¢ï¼Œæˆ‘å‘ç°äº†<a class="ae lr" href="https://www.gatsbyjs.com/plugins/gatsby-plugin-gdpr-cookies/" rel="noopener ugc nofollow" target="_blank">Gatsby-plugin-gdpr-cookies</a>æ’ä»¶ã€‚</p><p id="6281" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼å®‰è£…:</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="be5d" class="nj lu iq nf b gy nk nl l nm nn">npm install --save gatsby-plugin-gdpr-cookies</span></pre><p id="457a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">å¹¶åƒè¿™æ ·å°†å…¶æ·»åŠ åˆ°æˆ‘ä»¬çš„<code class="fe np nq nr nf b">gatsby-config.js</code>ä¸­:</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="2503" class="nj lu iq nf b gy nk nl l nm nn">{<br/>    resolve: `gatsby-plugin-gdpr-cookies`,<br/>    options: {<br/>    googleAnalytics: {<br/>        trackingId: 'YOUR_GOOGLE_ANALYTICS_TRACKING_ID',<br/>        cookieName: 'gatsby-gdpr-google-analytics',<br/>        anonymize: true,<br/>        allowAdFeatures: false<br/>    },<br/>}</span></pre><p id="4e2c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">è¿˜æœ‰æ›´å¤šçš„è®¾ç½®ï¼Œä½†è¿™ç¯‡æ–‡ç« çš„èŒƒå›´å°†é›†ä¸­åœ¨è°·æ­Œåˆ†æã€‚ä½ å¯ä»¥åœ¨è¿™é‡Œæ‰©å±•è¿™ä¸ªè¿‡ç¨‹ï¼Œå¦‚æœä½ æ­£åœ¨ä½¿ç”¨å…¶ä»–çš„çƒ¹é¥ªå·¥å…·ï¼Œæ¯”å¦‚è„¸ä¹¦åƒç´ ç­‰ç­‰ã€‚</p><p id="acec" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">æ‰€ä»¥è°·æ­Œåˆ†æçš„cookieåç§°æ˜¯<code class="fe np nq nr nf b">gatsby-gdpr-google-analytics</code>ã€‚ä¸ºäº†é¿å…åœ¨æˆ‘çš„åº”ç”¨ç¨‹åºä¸­ç¡¬ç¼–ç ï¼Œæˆ‘é€šå¸¸ä¼šåˆ›å»ºä¸€ä¸ª<code class="fe np nq nr nf b">Constants.ts</code>æ–‡ä»¶ï¼Œåœ¨å…¶ä¸­å¼•ç”¨å¯é‡ç”¨çš„å¸¸é‡å€¼ï¼Œæ¯”å¦‚cookieåç§°ã€‚è®©æˆ‘ä»¬ç°åœ¨åˆ›å»ºå®ƒ:</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="f107" class="nj lu iq nf b gy nk nl l nm nn">export class Constants {<br/>    public static readonly GOOGLE_ANALYTICS_COOKIE_NAME =<br/>        "gatsby-gdpr-google-analytics"<br/>}</span></pre><p id="8383" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">ä»<a class="ae lr" href="https://www.gatsbyjs.com/plugins/gatsby-plugin-gdpr-cookies/" rel="noopener ugc nofollow" target="_blank">Gatsby-plugin-gdpr-cookies</a>æ’ä»¶æ–‡æ¡£æ¥çœ‹ï¼Œå½“è¿™ä¸ªcookieçš„å€¼è¢«è®¾ç½®ä¸º<code class="fe np nq nr nf b">true</code>æ—¶ï¼Œå®é™…çš„google analytics javascriptå°†è¢«æ‰§è¡Œã€‚å…¶ä»–ä»»ä½•å€¼éƒ½ä¸ä¼šã€‚</p><p id="26c5" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">æˆ‘å°†ä½¿ç”¨reactåŒ…<a class="ae lr" href="https://www.npmjs.com/package/react-cookie" rel="noopener ugc nofollow" target="_blank"> react-cookie </a>æ¥è½»æ¾åœ°è·å–å’Œè®¾ç½®è¿™ä¸ªcookieçš„å€¼:</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="1d62" class="nj lu iq nf b gy nk nl l nm nn">npm install --save react-cookie</span></pre><p id="ef33" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">æˆ‘ä»¬å¯ä»¥ä»ç»„ä»¶ä¸­çš„é‚£ä¸ªåŒ…å¯¼å…¥é’©å­<code class="fe np nq nr nf b">useCookies</code>ï¼Œæˆ‘ä»¬å°†åˆ©ç”¨ä¸€ä¸ªå°çš„åŒ…è£…å‡½æ•°<code class="fe np nq nr nf b">setCookieValue</code>æ¥è®¾ç½®å€¼ã€‚ç„¶åæˆ‘ä»¬å¯ä»¥åœ¨ä¸¤ä¸ªæŒ‰é’®çš„<code class="fe np nq nr nf b">onClick</code>å±æ€§ä¸­ä½¿ç”¨è¿™ä¸ªåŒ…è£…å‡½æ•°:</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="a267" class="nj lu iq nf b gy nk nl l nm nn">import * as React from "react"<br/>+import { useCookies } from "react-cookie"</span><span id="7587" class="nj lu iq nf b gy no nl l nm nn">export function GDPRBanner() {</span><span id="8575" class="nj lu iq nf b gy no nl l nm nn">+    const [cookies, setCookie] = useCookies([<br/>+        Constants.GOOGLE_ANALYTICS_COOKIE_NAME,<br/>+    ])<br/>+<br/>+    const setCookieValue = (value: string) =&gt; {<br/>+        setCookie(Constants.GOOGLE_ANALYTICS_COOKIE_NAME, value)<br/>+    }</span><span id="f0dd" class="nj lu iq nf b gy no nl l nm nn">    return (<br/>        &lt;div className="fixed-bottom bg-gold p-2"&gt;<br/>            &lt;div className="row justify-content-center align-items-center"&gt;<br/>                &lt;span className="text-dark font-weight-bold mx-3"&gt;<br/>                    We use cookies to track the count of visits to this site,<br/>                    but that's it. â™¥ï¸<br/>                &lt;/span&gt;<br/>+                &lt;button className="btn btn-primary mr-3" onClick={() =&gt; setCookieValue("true")}&gt;Allow&lt;/button&gt;<br/>+                &lt;button className="btn btn-secondary" onClick={() =&gt; setCookieValue("false")}&gt;Disable&lt;/button&gt;<br/>            &lt;/div&gt;<br/>        &lt;/div&gt;<br/>    )<br/>}</span></pre><h1 id="16e8" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">æ·»åŠ åŠ¨ç”»</h1><p id="03ef" class="pw-post-body-paragraph kv kw iq kx b ky ml jr la lb mm ju ld le mn lg lh li mo lk ll lm mp lo lp lq ij bi translated">å¾ˆå¥½ï¼Œè¿™æ ·æˆ‘ä»¬å°±æœ‰äº†è·å–å’Œè®¾ç½®cookieå€¼çš„åŠŸèƒ½ã€‚è®©æˆ‘ä»¬æ·»åŠ ä¸€äº›åŠ¨ç”»æ¥å¢åŠ æ¨ªå¹…çš„è¶£å‘³æ€§ã€‚æˆ‘ä»¬å°†ä½¿ç”¨<a class="ae lr" href="https://dev.to/fullstackchris/let-s-build-a-snazzy-animated-sticky-footer-for-gdpr-compliance-27ci" rel="noopener ugc nofollow" target="_blank"> react-reveal </a>ï¼Œæ‰€ä»¥æˆ‘ä»¬ç°åœ¨å¯ä»¥å®‰è£…å®ƒ:</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="1cb5" class="nj lu iq nf b gy nk nl l nm nn">npm install --save react-reveal</span></pre><p id="35f8" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">æˆ‘ä»¬å¯ä»¥å°†æ¥è‡ª<code class="fe np nq nr nf b">react-reveal</code>çš„<code class="fe np nq nr nf b">&lt;Fade/&gt;</code>ç»„ä»¶æ·»åŠ åˆ°æˆ‘ä»¬çš„æ¨ªå¹…ç»„ä»¶ä¸­ï¼Œå¹¶ç”¨å®ƒåŒ…è£…æˆ‘ä»¬çš„æ¨ªå¹…divã€‚æˆ‘è®¤ä¸ºâ€œåº•éƒ¨â€æ•ˆæœå¯¹è¿™ä¸ªç²˜æ€§æ¨ªå¹…æœ€æœ‰æ„ä¹‰:</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="77ce" class="nj lu iq nf b gy nk nl l nm nn">import * as React from "react"<br/>+import Fade from "react-reveal/Fade"<br/>import { Constants } from "../../constants/Constants"</span><span id="332e" class="nj lu iq nf b gy no nl l nm nn">export function GDPRBanner() {<br/>    const [cookies, setCookie] = useCookies([<br/>        Constants.GOOGLE_ANALYTICS_COOKIE_NAME,<br/>    ])</span><span id="93cf" class="nj lu iq nf b gy no nl l nm nn">    const setCookieValue = (value: string) =&gt; {<br/>        setCookie(Constants.GOOGLE_ANALYTICS_COOKIE_NAME, value)<br/>    }</span><span id="3180" class="nj lu iq nf b gy no nl l nm nn">    return (<br/>+        &lt;Fade bottom&gt;<br/>            &lt;div className="fixed-bottom bg-gold p-2"&gt;<br/>                &lt;div className="row justify-content-center align-items-center"&gt;<br/>                    &lt;span className="text-dark font-weight-bold mx-3"&gt;<br/>                        We use cookies to track the count of visits to this<br/>                        site, but that's it. â™¥ï¸<br/>                    &lt;/span&gt;<br/>                    &lt;button<br/>                        className="btn btn-primary mr-3"<br/>                        onClick={() =&gt; setCookieValue("true")}<br/>                    &gt;<br/>                        Allow<br/>                    &lt;/button&gt;<br/>                    &lt;button<br/>                        className="btn btn-secondary"<br/>                        onClick={() =&gt; setCookieValue("false")}<br/>                    &gt;<br/>                        Disable<br/>                    &lt;/button&gt;<br/>                &lt;/div&gt;<br/>            &lt;/div&gt;<br/>+        &lt;/Fade&gt;<br/>    )<br/>}</span></pre><h1 id="e060" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">ç®¡ç†åŠ¨ç”»</h1><p id="5623" class="pw-post-body-paragraph kv kw iq kx b ky ml jr la lb mm ju ld le mn lg lh li mo lk ll lm mp lo lp lq ij bi translated">ç°åœ¨ï¼Œæ¯å½“æœ‰äººè®¿é—®è¯¥ç½‘ç«™æ—¶ï¼Œæ— è®ºä»–ä»¬æ˜¯å¦å…è®¸cookiesï¼Œé¡µè„šéƒ½ä¼šåŠ¨æ€æ˜¾ç¤ºã€‚å¦‚æœä»–ä»¬ç‚¹å‡»å…¶ä¸­ä¸€ä¸ªæŒ‰é’®ï¼Œå®ƒä¹Ÿä¸ä¼šæ¶ˆå¤±ã€‚é‚£æ˜¯ç›¸å½“è®¨åŒçš„ï¼æˆ‘ä»¬éœ€è¦ä¸€äº›é€»è¾‘ä¸Šçš„è¡¥å……æ¥è§£å†³è¿™äº›é—®é¢˜ã€‚</p><p id="ffb8" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">å¹¸è¿çš„æ˜¯ï¼Œ<code class="fe np nq nr nf b">react-reveal</code>æœ‰ä¸€ä¸ªé“å…·å«åš<code class="fe np nq nr nf b">when</code>ï¼Œå¦‚æœè®¾ç½®ä¸º<code class="fe np nq nr nf b">true</code>ï¼Œå°±ä¼šå¼•å‘åŠ¨ç”»ã€‚æ›´å¥½çš„æ˜¯ï¼Œç›¸åçš„æƒ…å†µä¹Ÿå‘ç”Ÿäº†:å½“<code class="fe np nq nr nf b">when</code>é“å…·ä»<code class="fe np nq nr nf b">true</code>ç§»åŠ¨åˆ°<code class="fe np nq nr nf b">false</code>æ—¶ï¼Œå®ƒå°†åå‘åŠ¨ç”»-åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œç¦»å¼€å±å¹•ã€‚</p><p id="0b94" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">åœ¨æŒ‰ç…§cookieé€»è¾‘åšä»»ä½•å¤æ‚çš„äº‹æƒ…ä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦çŸ¥é“ç»„ä»¶æ˜¯å¦è¢«æŒ‚è½½â€”â€”åªæœ‰åœ¨é‚£æ—¶æˆ‘ä»¬æ‰åº”è¯¥è§¦å‘fadeåŠ¨ç”»â€”â€”å¦åˆ™ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šçœ‹åˆ°éš¾çœ‹çš„åŠ¨ç”»é—ªçƒã€‚ä¸ºæ­¤ï¼Œæˆ‘ä½¿ç”¨äº†ä¸€ä¸ªæˆ‘ç§°ä¹‹ä¸º<code class="fe np nq nr nf b">useDidMount</code>çš„å®ç”¨é’©å­:</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="65b7" class="nj lu iq nf b gy nk nl l nm nn">import { useState, useEffect } from 'react'</span><span id="1011" class="nj lu iq nf b gy no nl l nm nn">export function useDidMount() {<br/>  const [didMount, setDidMount] = useState&lt;boolean&gt;(false)</span><span id="f6d1" class="nj lu iq nf b gy no nl l nm nn">  useEffect(() =&gt; {<br/>    setDidMount(true)<br/>  }, [])</span><span id="9629" class="nj lu iq nf b gy no nl l nm nn">  return didMount<br/>}</span></pre><p id="61e0" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">æˆ‘ä»¬å¯ä»¥å¯¼å…¥<code class="fe np nq nr nf b">useDidMount</code>å¹¶åœ¨æˆ‘ä»¬çš„ç»„ä»¶ä»¥åŠ<code class="fe np nq nr nf b">&lt;Fade/&gt;</code>ç»„ä»¶çš„<code class="fe np nq nr nf b">when</code>å±æ€§ä¸­ä½¿ç”¨å®ƒ:</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="0cbc" class="nj lu iq nf b gy nk nl l nm nn">import * as React from "react"<br/>import Fade from "react-reveal/Fade"<br/>import { Constants } from "../../constants/Constants"<br/>+import { useDidMount } from "../../hooks/useDidMount"</span><span id="d414" class="nj lu iq nf b gy no nl l nm nn">export function GDPRBanner() {<br/>    const didMount = useDidMount()<br/>    const [cookies, setCookie] = useCookies([<br/>        Constants.GOOGLE_ANALYTICS_COOKIE_NAME,<br/>    ])</span><span id="7458" class="nj lu iq nf b gy no nl l nm nn">    const setCookieValue = (value: string) =&gt; {<br/>        setCookie(Constants.GOOGLE_ANALYTICS_COOKIE_NAME, value)<br/>    }</span><span id="28f2" class="nj lu iq nf b gy no nl l nm nn">    return (<br/>+        &lt;Fade bottom when={didMount}&gt;<br/>            &lt;div className="fixed-bottom bg-gold p-2"&gt;<br/>                &lt;div className="row justify-content-center align-items-center"&gt;<br/>                    &lt;span className="text-dark font-weight-bold mx-3"&gt;<br/>                        We use cookies to track the count of visits to this<br/>                        site, but that's it. â™¥ï¸<br/>                    &lt;/span&gt;<br/>                    &lt;button<br/>                        className="btn btn-primary mr-3"<br/>                        onClick={() =&gt; setCookieValue("true")}<br/>                    &gt;<br/>                        Allow<br/>                    &lt;/button&gt;<br/>                    &lt;button<br/>                        className="btn btn-secondary"<br/>                        onClick={() =&gt; setCookieValue("false")}<br/>                    &gt;<br/>                        Disable<br/>                    &lt;/button&gt;<br/>                &lt;/div&gt;<br/>            &lt;/div&gt;<br/>        &lt;/Fade&gt;<br/>    )<br/>}</span></pre><p id="ee24" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">ä½†æ˜¯æˆ‘ä»¬éœ€è¦æ‰©å±•<code class="fe np nq nr nf b">when</code>å±æ€§ï¼Œä»¥åŒ…æ‹¬æˆ‘ä»¬ç”šè‡³ä¸éœ€è¦æ˜¾ç¤ºæ¨ªå¹…çš„æƒ…å†µâ€”â€”åœ¨cookieå€¼å·²ç»è®¾ç½®å¥½çš„æƒ…å†µä¸‹ã€‚è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªåä¸º<code class="fe np nq nr nf b">needToShowBanner</code>çš„<code class="fe np nq nr nf b">const</code>æ¥å®Œæˆè¿™ä¸ªä»»åŠ¡ï¼Œå¹¶å°†å…¶æ·»åŠ åˆ°æˆ‘ä»¬çš„<code class="fe np nq nr nf b">when</code>é“å…·ä¸­:</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="9900" class="nj lu iq nf b gy nk nl l nm nn">import * as React from "react"<br/>import Fade from "react-reveal/Fade"<br/>import { Constants } from "../../constants/Constants"<br/>import { useDidMount } from "../../hooks/useDidMount"</span><span id="c807" class="nj lu iq nf b gy no nl l nm nn">export function GDPRBanner() {<br/>    const didMount = useDidMount()<br/>    const [cookies, setCookie] = useCookies([<br/>        Constants.GOOGLE_ANALYTICS_COOKIE_NAME,<br/>    ])</span><span id="0a29" class="nj lu iq nf b gy no nl l nm nn">    const setCookieValue = (value: string) =&gt; {<br/>        setCookie(Constants.GOOGLE_ANALYTICS_COOKIE_NAME, value)<br/>    }</span><span id="d4e1" class="nj lu iq nf b gy no nl l nm nn">+    const needToShowBanner =<br/>+        cookies[Constants.GOOGLE_ANALYTICS_COOKIE_NAME] !== "true" &amp;&amp;<br/>+        cookies[Constants.GOOGLE_ANALYTICS_COOKIE_NAME] !== "false"</span><span id="0379" class="nj lu iq nf b gy no nl l nm nn">    return (<br/>+        &lt;Fade bottom when={didMount &amp;&amp; needToShowBanner}&gt;<br/>            &lt;div className="fixed-bottom bg-gold p-2"&gt;<br/>                &lt;div className="row justify-content-center align-items-center"&gt;<br/>                    &lt;span className="text-dark font-weight-bold mx-3"&gt;<br/>                        We use cookies to track the count of visits to this<br/>                        site, but that's it. â™¥ï¸<br/>                    &lt;/span&gt;<br/>                    &lt;button<br/>                        className="btn btn-primary mr-3"<br/>                        onClick={() =&gt; setCookieValue("true")}<br/>                    &gt;<br/>                        Allow<br/>                    &lt;/button&gt;<br/>                    &lt;button<br/>                        className="btn btn-secondary"<br/>                        onClick={() =&gt; setCookieValue("false")}<br/>                    &gt;<br/>                        Disable<br/>                    &lt;/button&gt;<br/>                &lt;/div&gt;<br/>            &lt;/div&gt;<br/>        &lt;/Fade&gt;<br/>    )<br/>}</span></pre><p id="227a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">å¾ˆå¥½ã€‚å› æ­¤ï¼Œåªæœ‰å½“cookieå€¼æ— æ•ˆæ—¶ï¼Œæ‰ä¼šæ˜¾ç¤ºæ¨ªå¹…ã€‚æ¢å¥è¯è¯´ï¼Œæœªè®¾ç½®ä¸º<code class="fe np nq nr nf b">true</code>æˆ–<code class="fe np nq nr nf b">false</code>ã€‚</p><h1 id="4529" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">æœ€ç»ˆå¾®ä¼˜åŒ–</h1><p id="21d8" class="pw-post-body-paragraph kv kw iq kx b ky ml jr la lb mm ju ld le mn lg lh li mo lk ll lm mp lo lp lq ij bi translated">æˆ‘ä»¬å·²ç»éå¸¸æ¥è¿‘äº†ï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜å¯ä»¥åšæœ€åä¸¤ä¸ªå¾®ä¼˜åŒ–ã€‚ğŸ˜„</p><p id="0704" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">æˆ‘å‘ç°æˆ‘çš„ç«™ç‚¹åŠ è½½<em class="ls">è¿™ä¹ˆå¿«</em>(æ˜¯ç›–èŒ¨æ¯”å§ï¼ŸğŸ˜œ)ï¼Œæœ€å¥½åœ¨æ˜¾ç¤ºæ¨ªå¹…ä¹‹å‰æ·»åŠ ä¸€ç‚¹å»¶è¿Ÿï¼Œå¦åˆ™è®¿é—®è€…å¯èƒ½ç”šè‡³ä¸ä¼šæ³¨æ„åˆ°åº•éƒ¨çš„æ¨ªå¹…æ·¡å…¥ã€‚</p><p id="8a6c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">å¹¸è¿çš„æ˜¯ï¼Œ<code class="fe np nq nr nf b">react-reveal</code>æ”¯æŒå¦ä¸€ä¸ªé“å…·ï¼Œ<code class="fe np nq nr nf b">delay</code>ï¼Œä¼šå»¶è¿ŸåŠ¨ç”»ã€‚æˆ‘æŠŠè¿™ä¸ªå€¼å®šä¸º600æ¯«ç§’ã€‚<code class="fe np nq nr nf b">react-reveal</code>è¿˜æ”¯æŒä¸€ä¸ª<code class="fe np nq nr nf b">duration</code>é“å…·ï¼Œæˆ‘æŠŠå®ƒè®¾ç½®ä¸º1000æ¯«ç§’ã€‚æˆ‘å°†è¿™ä¸¤ä¸ªå€¼éƒ½æ·»åŠ åˆ°äº†æˆ‘çš„<code class="fe np nq nr nf b">Constants</code>ç±»ä¸­ï¼Œä½†æ˜¯å¯ä»¥éšæ„ä¿®æ”¹å®ƒä»¬çš„ç¡®åˆ‡å€¼:</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="8b39" class="nj lu iq nf b gy nk nl l nm nn">export class Constants {<br/>    public static readonly GOOGLE_ANALYTICS_COOKIE_NAME =<br/>        "gatsby-gdpr-google-analytics"<br/>+    public static readonly ANIMATION_DELAY = 600<br/>+    public static readonly ANIMATION_DURATION = 1000<br/>}</span></pre><p id="d624" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">ç¬¬äºŒä¸ªå¾®ä¼˜åŒ–æ˜¯è¿™æ ·çš„:å½“è®¿é—®è€…ç‚¹å‡»â€œå…è®¸â€æˆ–â€œç¦ç”¨â€æŒ‰é’®æ—¶ï¼Œæˆ‘ä»¬çŸ¥é“æˆ‘ä»¬å°†éšè—æ¨ªå¹…(é€šè¿‡<code class="fe np nq nr nf b">needToShowBanner</code>å˜é‡)ï¼Œä½†æ˜¯åœ¨éšè—åŠ¨ç”»ä¸­ï¼Œæˆ‘ä»¬<em class="ls">ä¸å¸Œæœ›</em>æœ‰å»¶è¿Ÿâ€”â€”æˆ‘ä»¬å¸Œæœ›å¯¹è®¿é—®è€…çš„ç‚¹å‡»ç«‹å³åšå‡ºååº”ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸ªåŸºäº<code class="fe np nq nr nf b">needToShowBanner</code>å€¼çš„ä¸‰å…ƒç»„æ¥è®¾ç½®<code class="fe np nq nr nf b">delay</code>çš„å€¼ï¼Œå³:</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="769b" class="nj lu iq nf b gy nk nl l nm nn">const delay = needToShowBanner ? Constants.ANIMATION_DELAY : 0</span></pre><p id="446b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">æœ‰äº†è¿™äº›è¡¥å……ï¼Œæˆ‘ä»¬å°±æœ‰äº†ç»„ä»¶çš„æœ€ç»ˆç‰ˆæœ¬:</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="3052" class="nj lu iq nf b gy nk nl l nm nn">import * as React from 'react'<br/>import { useCookies } from 'react-cookie'<br/>import Fade from 'react-reveal/Fade'<br/>import { Constants } from '../../constants/Constants'<br/>import { useDidMount } from '../../hooks/useDidMount'</span><span id="a0a7" class="nj lu iq nf b gy no nl l nm nn">export function GDPRBanner() {<br/>  const didMount = useDidMount()<br/>  const [cookies, setCookie] = useCookies([Constants.GOOGLE_ANALYTICS_COOKIE_NAME])</span><span id="220f" class="nj lu iq nf b gy no nl l nm nn">  const setCookieValue = (value: string) =&gt; {<br/>    setCookie(Constants.GOOGLE_ANALYTICS_COOKIE_NAME, value)<br/>  }</span><span id="1f21" class="nj lu iq nf b gy no nl l nm nn">  const needToShowBanner =<br/>    cookies[Constants.GOOGLE_ANALYTICS_COOKIE_NAME] !== 'true' &amp;&amp; cookies[Constants.GOOGLE_ANALYTICS_COOKIE_NAME] !== 'false'<br/>+  const delay = needToShowBanner ? Constants.ANIMATION_DELAY : 0</span><span id="30e4" class="nj lu iq nf b gy no nl l nm nn">  return (<br/>+    &lt;Fade bottom delay={delay} when={didMount &amp;&amp; needToShowBanner} duration={Constants.ANIMATION_DURATION}&gt;<br/>      &lt;div className="fixed-bottom bg-gold p-2"&gt;<br/>        &lt;div className="row justify-content-center align-items-center"&gt;<br/>          &lt;span className="text-dark font-weight-bold mx-3"&gt;<br/>            We use cookies to track the count of visits to this site, but that's it. â™¥ï¸<br/>          &lt;/span&gt;<br/>          &lt;button className="btn btn-primary mr-3" onClick={() =&gt; setCookieValue('true')}&gt;<br/>            Allow<br/>          &lt;/button&gt;<br/>          &lt;button c lassName="btn btn-secondary" onClick={() =&gt; setCookieValue('false')}&gt;<br/>            Disable<br/>          &lt;/button&gt;<br/>        &lt;/div&gt;<br/>      &lt;/div&gt;<br/>    &lt;/Fade&gt;<br/>  )<br/>}</span></pre><h1 id="9366" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">æˆ‘ä»¬å®Œäº†ï¼</h1><p id="af55" class="pw-post-body-paragraph kv kw iq kx b ky ml jr la lb mm ju ld le mn lg lh li mo lk ll lm mp lo lp lq ij bi translated">å¤ªå¥½äº†ï¼æˆ‘ä»¬æœ‰ä¸€ä¸ªå®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸï¼Œæ¼‚äº®çš„é£æ ¼ï¼ŒåŠ¨ç”»GDPRæ¨ªå¹…ã€‚æ¨ªå¹…æŒ‰ç…§<a class="ae lr" href="https://www.gatsbyjs.com/plugins/gatsby-plugin-gdpr-cookies/" rel="noopener ugc nofollow" target="_blank">Gatsby-plugin-gdpr-cookies</a>æ’ä»¶çš„è¦æ±‚ä¸<code class="fe np nq nr nf b">gatsby-gdpr-google-analytics</code> cookieçš„å®é™…å€¼è¿›è¡Œäº¤äº’ï¼Œæˆ‘ä»¬ç”šè‡³é€šè¿‡<code class="fe np nq nr nf b">react-reveal</code>åº“æ·»åŠ äº†å¹³æ»‘çš„è¿›å…¥å’Œé€€å‡ºåŠ¨ç”»ã€‚</p><p id="3b02" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><a class="ae lr" href="https://princefishthrower.github.io/gatsby-animated-gdpr-banner/" rel="noopener ugc nofollow" target="_blank">ä¸è¦å¿˜è®°æŸ¥çœ‹è¿è¡Œcookieç»„ä»¶ç¤ºä¾‹çš„GitHub Pagesç«™ç‚¹ã€‚</a></p><p id="7311" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">å°±è¿™ä¹ˆå®šäº†ï¼</strong></p><p id="7e7a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">å¹²æ¯ï¼ğŸ»</p><p id="2df5" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">å…‹é‡Œæ–¯</p></div></div>    
</body>
</html>