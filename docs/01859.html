<html>
<head>
<title>Setting up and using Verdaccio to host your very own private NPM</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">设置并使用Verdaccio来托管您自己的私人NPM</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/setting-up-and-using-verdaccio-to-host-your-very-own-private-npm-727d01fee16c?source=collection_archive---------7-----------------------#2020-02-03">https://levelup.gitconnected.com/setting-up-and-using-verdaccio-to-host-your-very-own-private-npm-727d01fee16c?source=collection_archive---------7-----------------------#2020-02-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/011166b429bedc01b416509a6b389ff8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hYSdCj63llItaiCcYVFIIw.jpeg"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">由<a class="ae kf" href="https://unsplash.com/@sylwiabartyzel?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">西尔维娅·巴蒂泽尔</a>在<a class="ae kf" href="https://unsplash.com/s/photos/safe?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="5dba" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你在一个对共享专有代码有着非常严格的规则的组织中工作，或者你只是想把你的库放在你自己的私有节点包管理器(NPM)上而不被人窥探，你可能会想到创建你自己的包托管服务。</p><p id="ca9b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您可能还希望确保存储库易于更新、轻量级且易于托管。</p><p id="25b2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">输入<a class="ae kf" href="http://www.verdaccio.org" rel="noopener ugc nofollow" target="_blank"> Verdaccio </a>。</p></div><div class="ab cl le lf hx lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="im in io ip iq"><p id="5e7a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Verdaccio是一个麻省理工学院许可的轻量级私有节点包管理器(NPM)注册表，使您能够轻松地托管自己的NPM，而不必绞尽脑汁。相信我，这是一个相当艰巨的任务，但有了Verdaccio，这可以在比你的方便面准备好所需的时间更短的时间内完成(当然，这取决于你的互联网连接)。</p><p id="c9bc" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">维基百科中意大利语Verdaccio的实际定义是:</p><blockquote class="ll lm ln"><p id="3c12" class="kg kh lo ki b kj kk kl km kn ko kp kq lp ks kt ku lq kw kx ky lr la lb lc ld im bi translated"><strong class="ki iu"> Verdaccio </strong>是黑色、白色和黄色颜料混合物的意大利名称，这种混合物会产生浅灰色或淡黄色(取决于比例)柔和的绿棕色。</p></blockquote><h1 id="f14e" class="ls lt it bd lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">经由NPM设置</h1><p id="bccf" class="pw-post-body-paragraph kg kh it ki b kj mq kl km kn mr kp kq kr ms kt ku kv mt kx ky kz mu lb lc ld im bi translated">您需要做的第一件事是在您的服务器上安装Verdaccio。为了安装这个NPM软件包，您需要在要运行Verdaccio的服务器上预先安装Node.js。</p><p id="fa31" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">是的，我也感觉到了，在你说什么之前，是的，我知道这有点讽刺，你需要NPM来安装Verdaccio，但是请原谅我。</p><p id="988c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">确保首先在服务器上安装Node的长期支持(LTS)版本。</p><p id="af8f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一旦安装了Node，就可以在服务器上安装Verdaccio了。为此，您只需运行以下命令:</p><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="205f" class="ne lt it na b gy nf ng l nh ni">npm install -g verdaccio</span></pre><p id="b7a3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这将在您的服务器上安装Verdaccio，完成后，您可以使用以下命令运行Verdaccio:</p><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="6294" class="ne lt it na b gy nf ng l nh ni">verdaccio</span></pre><p id="9fdf" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">你应该可以在你的浏览器- &gt; <code class="fe nj nk nl na b">http://&lt;server address&gt;:8443</code>上进入服务器的端口<code class="fe nj nk nl na b">8443</code>来查看你的NPM网站</p><h1 id="3055" class="ls lt it bd lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">通过Docker设置</h1><p id="91e5" class="pw-post-body-paragraph kg kh it ki b kj mq kl km kn mr kp kq kr ms kt ku kv mt kx ky kz mu lb lc ld im bi translated">或者，更快的方法是使用<a class="ae kf" href="https://www.docker.com/" rel="noopener ugc nofollow" target="_blank"> Docker </a>。</p><blockquote class="ll lm ln"><p id="8699" class="kg kh lo ki b kj kk kl km kn ko kp kq lp ks kt ku lq kw kx ky lr la lb lc ld im bi translated"><em class="it">Docker是什么？</em></p><p id="fdef" class="kg kh lo ki b kj kk kl km kn ko kp kq lp ks kt ku lq kw kx ky lr la lb lc ld im bi translated">我的解释是:想象一个图书馆，有一台复印机，里面有免费的书。例如，如果你想要Xyz先生做的蛋糕，只需拿出Xyz先生做的蛋糕书(称为图像)并影印它，它就是你带回家的。</p></blockquote><p id="ab42" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">docker中的一些图像可供公共使用，一些图像是私有的。</p><p id="7886" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因为Verdaccio的映像可以通过docker很容易地获得，所以您不需要设置Node。只需直接从Docker中提取一个Verdaccio映像，并像这样启动它:</p><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="622c" class="ne lt it na b gy nf ng l nh ni">docker pull verdaccio/verdaccio</span></pre><p id="81c9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这将把verdaccio映像拉入您的服务器。你现在需要做的就是像这样运行它:</p><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="8b16" class="ne lt it na b gy nf ng l nh ni">docker run -it --rm --name verdaccio -p 4873:4873 verdaccio/verdaccio</span></pre><p id="b03f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">好了，现在您已经让您的NPM从端口<code class="fe nj nk nl na b">4873</code>运行在您的服务器上</p><p id="954e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">你应该可以通过浏览器&gt; <code class="fe nj nk nl na b">http://&lt;server address&gt;:8443</code>的服务器端口<code class="fe nj nk nl na b">8443</code>查看你的NPM网站</p><h1 id="08e3" class="ls lt it bd lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">将您的JS代码发布到您自己的Verdaccio</h1><p id="b383" class="pw-post-body-paragraph kg kh it ki b kj mq kl km kn mr kp kq kr ms kt ku kv mt kx ky kz mu lb lc ld im bi translated">一旦你运行了你自己的NPM，很明显你想在上面发布你的代码。假设您已经准备好部署一个节点包项目，您所要做的就是运行以下命令:</p><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="b43c" class="ne lt it na b gy nf ng l nh ni">npm publish myproject --registry http://&lt;server address&gt;:4873</span></pre><p id="1884" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这将自动将您的节点包项目推入您自己的注册表。</p><h1 id="b6fd" class="ls lt it bd lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">安装托管在您的Verdaccio上的私有软件包</h1><p id="8416" class="pw-post-body-paragraph kg kh it ki b kj mq kl km kn mr kp kq kr ms kt ku kv mt kx ky kz mu lb lc ld im bi translated">要将您的私有节点包安装到项目中，您需要执行以下操作:</p><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="483b" class="ne lt it na b gy nf ng l nh ni">npm install myproject --save --registry http://&lt;server address&gt;:4873</span></pre><p id="c757" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">是的，就这么简单。你有它，你自己的NPM运行在你自己的私人服务器上。从这一点出发，您可以放心地编写代码，因为您知道您的代码是安全的。</p></div></div>    
</body>
</html>