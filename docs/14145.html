<html>
<head>
<title>Stop Using YAGNI as a Lazy Excuse to Write Bad Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">不要再用YAGNI作为编写糟糕代码的懒惰借口</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/stop-using-yagni-as-a-lazy-excuse-to-write-bad-code-7ddb4b5dce89?source=collection_archive---------5-----------------------#2022-11-04">https://levelup.gitconnected.com/stop-using-yagni-as-a-lazy-excuse-to-write-bad-code-7ddb4b5dce89?source=collection_archive---------5-----------------------#2022-11-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="4980" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">你必须有健壮的代码来应用YAGNI原理</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/ce717a1314a69116d9bd31fcc727445d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Ozk8leGhcckJcTCh"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">约书亚·阿拉贡在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="3834" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你将要读到的是我在作为软件工程师的职业生涯中形成的观点。如果你正在寻找一个说“这样做，你就会成功”的神奇配方，你现在就可以点击离开。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="62c5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">YAGNI代表“你不会需要它”。它来自极限编程(XP)。它也可以表述为“不要在你认为你会需要的时候实现功能，只在你真正需要的时候实现它”。</p><p id="51b3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这个原理可能很容易理解，但并不像看起来那么容易理解。</p><h1 id="1518" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">你在任何时候都需要好的设计</h1><p id="a466" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">YAGNI的定义有没有引起你的注意？有一个重要的细节应该指出。是“功能性”这个词。当人们谈论YAGNI时，似乎所有的注意力都放在了“需要”这个词上，而忘记了功能性。</p><p id="2bbd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">“功能性”这个词通常被理解为“任何事情”，YAGNI的整个定义就变成了“除非你需要，否则不要做任何事情”。这也最终被简化为“什么都不要做”。这听起来是很好的建议…如果你想弄糟你的代码库，然后坐在那里后悔，直到宇宙的热寂，同时把所有的责任都推给那些愚蠢的需求…如果他们不那么愚蠢就好了…</p><p id="25a3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你不应该说“什么都不要做”。有一件重要的事情是你<em class="mz">一直都需要的</em>。这是什么？好的代码设计。不管你将在什么时候实现什么特性，你总是需要好的设计。</p><h2 id="ce1a" class="na md it bd me nb nc dn mi nd ne dp mm li nf ng mo lm nh ni mq lq nj nk ms nl bi translated">YAGNI和糟糕的设计不相配</h2><p id="441b" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">坏的一面是实现新需求的时间总是会到来。您可以随时申请任何新功能。如果没有一个可以轻松添加新特性的代码库，你就完了。在这种情况下，YAGNI和基斯是帮不上忙的。</p><p id="6442" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">问题是，YAGNI经常被用作不采取措施使代码库易于修改的借口，因为“你将来不需要修改它”。</p><p id="34df" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">YAGNI与良好的代码设计密切相关。没有好的代码设计，YAGNI是没有意义的，因为无论你什么时候选择添加新的功能，无论哪种方式都是昂贵的，以后甚至可能更加昂贵。</p><h1 id="1069" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">什么属于YAGNI，什么不属于他</h1><p id="7a0e" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">接下来的问题是什么实际上属于YAGNI范畴，什么不属于？</p><p id="e11f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">任何你预见到需要的特性或功能都属于YAGNI类别。任何基于以下假设而编写的代码:它是为了<em class="mz">你将来需要的那个特定特性</em>。当这样的代码在系统中产生实际可见的效果时，这是最明显的。</p><p id="b11b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有时，属于YAGNI类别的代码在系统中不会产生明显的效果。那么，如何知道你是否在做一些不必要的事情呢？</p><p id="8040" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你在写东西的时候脑子里想着某个<em class="mz">特有的</em>特性，那么不要这么做，因为你不需要它。</p><p id="1412" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你正在写的东西没有明确的未来特征，那也没关系。例如，分离某些东西是好的，划分责任是好的，封装概念是好的…</p><p id="4290" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里的关键词是<em class="mz">具体的</em>。</p><p id="4c0d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设您决定创建一个接口，当您只需要在屏幕上显示用户记录时，该接口允许您将用户记录保存在某种形式的存储中(只有接口，没有具体的实现)。那是你不应该做的事情，因为你不需要保存记录，你只需要在屏幕上显示出来。在这个例子中，您想要做的更改与一个特定的<em class="mz">特性相关，在这个例子中是存储。</em></p><p id="35f4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，假设您决定创建一个使用用户记录的接口，目的是将记录处理的方式从系统的其余部分中分离出来，那就没问题了。然后，如果到了保存记录的时候，您的设计将允许您轻松地这样做，您需要做的就是创建该消费者接口的新实现。</p><p id="89cd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">后一个例子中的不同之处在于，创建接口的决定是为了改进现有的<em class="mz">设计并使其更加健壮，因为以前，在屏幕上显示记录是与系统的其他部分结合在一起的，创建存储接口对改进设计没有任何作用。如你所见，第二个例子中没有特别的特性。这是一个好的设计决策如何补充YAGNI的例子，解耦并不是专门为存储而做的，以后易于保存是一个很好的副作用。</em></p><p id="ec1c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你想应用YAGNI，好的设计是必不可少的。</p><p id="39b4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">系统中不可见的变化是许多讨论产生的原因。我记得在一些讨论中，简单地应用单一责任原则被认为是不必要的，因为“我们在将来永远都不需要修改那个类”。讨论实际上比实际修改代码花费了更多的时间。</p><p id="d42f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当争论某事比实际修改代码花费更多时间时，很难称之为过度工程化(我不是指明显的情况，比如为在一个地方使用的每个变量创建一个常量)，如果有什么不同的话，讨论本身就是过度工程化。</p><h1 id="f5ad" class="mc md it bd me mf mg mh mi mj mk ml mm jz mn ka mo kc mp kd mq kf mr kg ms mt bi translated">YAGNI并不意味着你应该不计后果</h1><p id="4b70" class="pw-post-body-paragraph kz la it lb b lc mu ju le lf mv jx lh li mw lk ll lm mx lo lp lq my ls lt lu im bi translated">YAGNI并不意味着你应该忽略软件设计，开始不计后果地编写代码，因为很多人都是这么解释这个原则的。</p><p id="ecf3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">似乎YAGNI不断被滥用为送垃圾的借口，连同干和吻。DRY被滥用了，引入了很多耦合，KISS被滥用了，就像YAGNI一样，写什么都行。一个原理听起来越简单，就越容易被滥用和曲解。</p><p id="18b0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">感觉我们正处于软件设计的理念被时间遗忘的时刻，因为越来越多的软件开发人员进入这个领域只是为了赚钱，而根本不关心好的软件设计，我们被趋势所驱动，每个人都想挑战旧的理念，因为它很酷，点击量很大，如果你应用它们，它显然是“过度工程”和“反模式”，规则、模式、严格类型和所有这类东西都是给喜欢写样板文件的老Java人的我是在讽刺你。</p><p id="9867" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我知道，每条规则都有例外，只是“每条规则都有例外”这句话被发挥到了极致，任何独立于框架或者不是React hook一部分的代码都是“过度工程”，所以大家都应该停止编写它，因为YAGNI。如果你问我的话，我觉得这太鲁莽了。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="b9a8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">TL；博士，如果你因为YAGNI而难以决定某件事是否不应该做，想想你做出改变的原因。如果你这么做是为了改进现有的设计，那就去做吧，如果你这么做是为了将来某个特定的功能，那就不要去做。</p><p id="f528" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了应用YAGNI原理，你需要一个健壮的代码设计，所以不要害怕投入一些时间来实现这样的设计。</p><p id="79b1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">好的设计决策不是“你将来不会需要”的东西，所以不要找那个借口。</p></div></div>    
</body>
</html>