<html>
<head>
<title>Iterators in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中的迭代器</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/iterators-in-python-bd7332ddbc00?source=collection_archive---------15-----------------------#2022-11-02">https://levelup.gitconnected.com/iterators-in-python-bd7332ddbc00?source=collection_archive---------15-----------------------#2022-11-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="042f" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">蟒蛇皮短裤——第二部分</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/c39087c39630340e645006c36730f128.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UYcp2CWlau25j8KdOo_cCg.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">克里斯·里德在<a class="ae kv" href="https://unsplash.com/s/photos/python-programming?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="4f65" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Python中的迭代器是一个可以迭代的对象——也就是说，它有一定数量的元素，我们可以循环遍历这些元素。</p><p id="9b47" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，这个概念用于for循环:</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="a06d" class="lx ly iq lt b gy lz ma l mb mc">my_list = [0, 1, 2, 3, 4]<br/>for el in my_list:<br/>    print(el)</span></pre><p id="c42d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在底层，一个迭代器需要实现函数<code class="fe md me mf lt b">__iter__</code>和<code class="fe md me mf lt b">__next__</code>，我们稍后将对此进行研究。</p><p id="32cc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">许多其他函数，如<code class="fe md me mf lt b">list()</code>或<code class="fe md me mf lt b">sum()</code>，都使用迭代器:</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="afd5" class="lx ly iq lt b gy lz ma l mb mc">print(sum(my_list))</span></pre><h1 id="4d1f" class="mg ly iq bd mh mi mj mk ml mm mn mo mp jw mq jx mr jz ms ka mt kc mu kd mv mw bi translated">在幕后</h1><p id="3d89" class="pw-post-body-paragraph kw kx iq ky b kz mx jr lb lc my ju le lf mz lh li lj na ll lm ln nb lp lq lr ij bi translated">现在让我们更深入一点，理解幕后发生了什么——并实现我们自己的迭代器。</p><p id="9ed5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如上所述，迭代器需要实现函数<code class="fe md me mf lt b">__iter__</code>和<code class="fe md me mf lt b">__next__</code>。<code class="fe md me mf lt b">__iter__</code>类似于常用类的构造函数(<code class="fe md me mf lt b">__init__</code>)，但是需要返回迭代器本身。然后<code class="fe md me mf lt b">__iter__</code>实际上用于遍历对象，每次调用返回一个元素——如果没有更多的元素可用，就引发一个<code class="fe md me mf lt b">StopIteration()</code>。</p><p id="56eb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们通过定义一个返回第一个<code class="fe md me mf lt b">n</code>平方数的迭代器来展示这一点:</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="76f8" class="lx ly iq lt b gy lz ma l mb mc">class SquareIterator:<br/>    def __init__(self, n):<br/>        self.i = 0<br/>        self.n = n<br/><br/>    def __iter__(self):<br/>        return self<br/><br/>    def __next__(self):<br/>        if self.i &lt; self.n:<br/>            i = self.i<br/>            self.i += 1<br/>            return i**2<br/>        else:<br/>            raise StopIteration()</span></pre><p id="f6dd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">正如所承诺的，我们现在可以做所有我们可以用“默认”迭代器做的事情，比如:</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="9317" class="lx ly iq lt b gy lz ma l mb mc">for x in SquareIterator(5):<br/>    print(x)<br/><br/>print(sum(SquareIterator(5)))</span></pre><p id="9c06" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这篇文章是快速展示重要Python概念系列文章的一部分。你可以在这里找到其他部分:</p><ul class=""><li id="3cb9" class="nc nd iq ky b kz la lc ld lf ne lj nf ln ng lr nh ni nj nk bi translated">第1部分:<a class="ae kv" href="https://medium.com/@hrmnmichaels/lambda-functions-in-python-a124cebc2e99" rel="noopener">Python中的Lambda函数</a></li><li id="cdf9" class="nc nd iq ky b kz nl lc nm lf nn lj no ln np lr nh ni nj nk bi translated">第3部分:<a class="ae kv" href="https://medium.com/@hrmnmichaels/generators-and-generator-expressions-in-python-a8d2e700945e" rel="noopener">Python中的生成器和生成器表达式</a></li><li id="4f8d" class="nc nd iq ky b kz nl lc nm lf nn lj no ln np lr nh ni nj nk bi translated">第4部分:<a class="ae kv" href="https://medium.com/@hrmnmichaels/advanced-iteration-in-python-with-enumerate-and-zip-676b31ceac44" rel="noopener">使用enumerate()和zip()在Python中进行高级迭代</a></li><li id="b4f5" class="nc nd iq ky b kz nl lc nm lf nn lj no ln np lr nh ni nj nk bi translated">第5部分:<a class="ae kv" href="https://medium.com/@hrmnmichaels/managing-resources-in-python-with-context-managers-with-statement-f07afc1afb4f" rel="noopener">用上下文管理器管理Python中的资源(带语句)</a></li><li id="b1dc" class="nc nd iq ky b kz nl lc nm lf nn lj no ln np lr nh ni nj nk bi translated">第6部分:<a class="ae kv" href="https://medium.com/@hrmnmichaels/generating-temporary-files-and-directories-in-python-dfc11f017a97" rel="noopener">用Python生成临时文件和目录</a></li><li id="b81b" class="nc nd iq ky b kz nl lc nm lf nn lj no ln np lr nh ni nj nk bi translated">第7部分:<a class="ae kv" href="https://medium.com/@hrmnmichaels/logging-in-python-3df84ce78cef" rel="noopener">用Python登录</a></li><li id="542f" class="nc nd iq ky b kz nl lc nm lf nn lj no ln np lr nh ni nj nk bi translated">第八部分:<a class="ae kv" href="https://medium.com/gitconnected/partial-functions-in-python-66998eef1384" rel="noopener">Python中的部分函数</a></li><li id="f3f1" class="nc nd iq ky b kz nl lc nm lf nn lj no ln np lr nh ni nj nk bi translated">第9部分:<a class="ae kv" href="https://medium.com/gitconnected/f-strings-in-python-80e30c64fb95" rel="noopener">Python中的f字符串</a></li></ul></div></div>    
</body>
</html>