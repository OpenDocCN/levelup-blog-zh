<html>
<head>
<title>Dynamic ViewPager inside BottomSheetDialogFragment</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">BottomSheetDialogFragment中的动态视图页</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/dynamic-viewpager-inside-bottomsheetdialogfragment-d234b00044f3?source=collection_archive---------5-----------------------#2021-03-28">https://levelup.gitconnected.com/dynamic-viewpager-inside-bottomsheetdialogfragment-d234b00044f3?source=collection_archive---------5-----------------------#2021-03-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="62f5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在本文中，我们将看到如何在一个模态BottomSheetDialogFragment中放置一个可以显示动态片段的ViewPager。</p><p id="5631" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">模态BottomSheetDialogFragment的大多数在线资源都覆盖onCreateDialog方法，并在那里进行所有的定制，然后返回底部的表。除了少数例外，这在很多情况下都没问题。</p><p id="63f8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">其中一个例外是，当您需要一个在底部工作表对话框中带有动态片段的ViewPager时。</p><p id="d5cf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">大概是这样的:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi kl"><img src="../Images/9f2c498ee9ab8f09c37ca8acd23e311f.png" data-original-src="https://miro.medium.com/v2/resize:fit:542/1*EExuLKhF5jMfOErAVBAOEA.gif"/></div></figure><p id="89b4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们不能通过覆盖onCreateDialog得到这样的东西的原因是，要膨胀动态片段，我们将需要一个FragmentPagerAdapter，它又需要一个片段管理器。您只能在onCreateView方法中为此获取childFragmentManager。这产生了一个额外的问题，因为当我们使用onCreateDialog时，视图返回为null。您也许可以使用一个不需要片段管理器的PagerAdapter(而不是FragmentPagerAdapter ),但是这只能用于静态视图/布局。</p><p id="f55a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个问题的解决方案是跳过重写onCreateDialog，而重写onStart。</p><p id="9a77" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们来看一下这些步骤:</p><p id="d4ef" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先让我们定义activity_main.xml</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="kt ku l"/></div></figure><p id="506b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来我们的底部表布局。这将包含TabLayout和ViewPager</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="kt ku l"/></div></figure><p id="b019" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">和一个带有片段文本视图的简单布局。将通过片段动态修改文本视图</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="kt ku l"/></div></figure><p id="a46f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们现在将创建主活动和我们的片段</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="kt ku l"/></div></figure><p id="59aa" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们的MyFragmentAdapter将扩展FragmentPagerAdapter类</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="kt ku l"/></div></figure><p id="0180" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，让我们实现我们定制的BottomSheetDialogFragment</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="kt ku l"/></div></figure><p id="2000" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">就是这样！</p><p id="d5b0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您可以在这里找到完整的源代码:</p><div class="kv kw gp gr kx ky"><a href="https://github.com/vaishakhbg/BottomSheetDynamicViewPager.git" rel="noopener  ugc nofollow" target="_blank"><div class="kz ab fo"><div class="la ab lb cl cj lc"><h2 class="bd ir gy z fp ld fr fs le fu fw ip bi translated">vaishakhbg/BottomSheetDynamicViewPager</h2><div class="lf l"><h3 class="bd b gy z fp ld fr fs le fu fw dk translated">在GitHub上创建一个帐户，为vaishakhbg/BottomSheetDynamicViewPager开发做出贡献。</h3></div><div class="lg l"><p class="bd b dl z fp ld fr fs le fu fw dk translated">github.com</p></div></div></div></a></div><p id="52ad" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">感谢您的阅读！</p></div></div>    
</body>
</html>