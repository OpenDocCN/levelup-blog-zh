<html>
<head>
<title>Build a PWA Using Only Vanilla JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">仅使用普通JavaScript构建PWA</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/build-a-pwa-using-only-vanilla-javascript-bdf1eee6f37a?source=collection_archive---------0-----------------------#2019-09-30">https://levelup.gitconnected.com/build-a-pwa-using-only-vanilla-javascript-bdf1eee6f37a?source=collection_archive---------0-----------------------#2019-09-30</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/9f79e56ac6afdc3bad58ca35dde8dbe9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*zMqsSFxHOUdMcCMW"/></div></div></figure><h1 id="32df" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">渐进式网络应用程序(PWA)</h1><p id="3994" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">“渐进式web应用程序(PWA)是一种使用现代web功能向用户提供类似本地应用程序的体验的Web应用程序。这些应用程序满足某些要求(见下文)，部署到服务器上，可通过网址访问，并被搜索引擎编入索引。”</p><p id="f333" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">渐进式网络应用程序(PWA)的工作方式与任何其他普通应用程序一样，但增加了许多功能，减少了许多麻烦。它们快速、可靠，并且可以在离线环境下完美地工作。</p><figure class="me mf mg mh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi md"><img src="../Images/b0aa72d0558391eee0296bf2e2b43041.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*iHAfQtLge_pZgw2q"/></div></div></figure><h1 id="3b8b" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">为什么要用？</h1><p id="cc3d" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">渐进式网络应用程序(PWAs)为用户创造了丰富的体验，因为他们:</p><ul class=""><li id="ebe7" class="mi mj it lb b lc ly lg lz lk mk lo ml ls mm lw mn mo mp mq bi translated"><strong class="lb iu">反应灵敏</strong></li></ul><p id="fd28" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">PWA可以安装在桌面浏览器、移动电话或电视屏幕上——任何支持互联网连接和浏览器支持的产品。</p><ul class=""><li id="8f19" class="mi mj it lb b lc ly lg lz lk mk lo ml ls mm lw mn mo mp mq bi translated"><strong class="lb iu">可靠</strong></li></ul><p id="a41e" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">它使用了一种叫做<strong class="lb iu">服务工作者</strong>的技术，使用户能够在他们的环境中立即加载PWAs。PWA可以为应用程序提供离线支持，用户不会面临网络相关的问题。</p><ul class=""><li id="1cf5" class="mi mj it lb b lc ly lg lz lk mk lo ml ls mm lw mn mo mp mq bi translated"><strong class="lb iu">没有应用商店/游戏商店</strong></li></ul><p id="aca5" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">用户不需要访问应用程序商店来下载这些渐进式网络应用程序。它们可以立即直接从浏览器安装。不需要等待时间，因为他们非常快，并给一个像模拟本地应用程序。</p><ul class=""><li id="bfda" class="mi mj it lb b lc ly lg lz lk mk lo ml ls mm lw mn mo mp mq bi translated"><strong class="lb iu">吸引开发者和用户</strong></li></ul><p id="19c2" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">开发人员还可以在清单文件中添加大量功能。最广为人知的功能之一是通过PWA启用的推送通知重新吸引用户。</p><ul class=""><li id="e5d1" class="mi mj it lb b lc ly lg lz lk mk lo ml ls mm lw mn mo mp mq bi translated"><strong class="lb iu">轻松分享</strong></li></ul><p id="a033" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">渐进式网络应用程序非常容易与你的朋友或同事分享。用户需要分享的只是网站/应用程序的URL。用户不需要共享一个可安装的apk，也不需要经历验证过程，然后下载大量文件。用户所需要的只是简单的点击。</p><p id="deb1" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated"><em class="lx">要了解更多关于渐进式网络应用的信息，请访问谷歌开发者的</em> <a class="ae mr" href="https://developers.google.com/web/progressive-web-apps/" rel="noopener ugc nofollow" target="_blank"> <em class="lx">链接</em> </a></p><figure class="me mf mg mh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ms"><img src="../Images/d8810abea44f5f7133162b72d224bbe0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ksUGEixGSao9zUie"/></div></div></figure><h1 id="8899" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">创建基本PWA</h1><p id="1ba2" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">在本教程中，我们将只使用普通的JavaScript来构建一个PWA，但要做到这一点，我们需要先创建一个普通的Web应用程序。</p><p id="569b" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">在继续下一步之前，让我们看看我们最终的用户界面会是什么样子，以及我们试图实现的功能。</p><h1 id="de80" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">最终项目用户界面</h1><figure class="me mf mg mh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/209bfd8cad08aab5edfaaed41e9b7eb0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*dX---AbKT3jzved8"/></div></div><figcaption class="mt mu gj gh gi mv mw bd b be z dk translated">最终项目用户界面概述</figcaption></figure><p id="dff9" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">UI中间会显示彩色的方框，点击方框会播放音乐短片。</p><p id="a898" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">同样，每个盒子产生不同的音乐片段。这个网站的概念是混合不同的音乐，并创造你自己的音乐。</p><h1 id="5020" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">GitHub知识库</h1><p id="2cf6" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">所有与这个项目相关的文件都在这里:【https://github.com/S-ayanide/MixCentro】<strong class="lb iu"><em class="lx"/></strong></p><p id="622b" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">在本教程中，您需要下载GitHub repo中提供的某些资源。如果你想创建、更改或修改某个东西，我建议你在完成本教程后就这么做。</p><h1 id="92d0" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">Web应用程序HTML</h1><p id="6f66" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">这个项目的HTML将非常简单。我们将需要显示的个人彩色垫和每一个音频部门。</p><p id="4e1c" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">让我们来看看这段代码:</p><figure class="me mf mg mh gt ju"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="31c7" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">我们在这里所做的就是将我们的标题和页眉命名为MixCentro，因为这是我们为这个网站选择的名称(你可以随意选择)。</p><p id="b2f5" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">你将需要声音来完成这个项目，从上面提到的包含所有声音文件的<a class="ae mr" href="https://github.com/S-ayanide/MixCentro" rel="noopener ugc nofollow" target="_blank"> GitHub库</a>下载。</p><p id="c568" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">我们已经创建了一个主分区“<strong class="lb iu"> pads </strong>”，它包含“<strong class="lb iu"> pad-top </strong>”和“<strong class="lb iu"> pad-bottom </strong>”，这两个分区除了创建我们在UI中看到的pads之外什么也不做，被分成两个部分，每个部分包含3个pads。</p><p id="8cd0" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">顶部焊盘称为“<strong class="lb iu"> pad-top </strong>”，有三个焊盘组成不同的音频。类似地，底部焊盘划分被称为“焊盘底部”，也由三个焊盘组成。</p><p id="ad5f" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">虽然已经导入了<strong class="lb iu"> style.css </strong>和<strong class="lb iu"> index.js </strong>，但是我们现在还没有使用它们。</p><h1 id="9e34" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">Web应用CSS</h1><p id="1f04" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">现在我们可以在目录的根目录下构建一个样式表。我把它叫做<code class="fe mz na nb nc b">style.css</code>。</p><p id="564c" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">默认情况下，我们在屏幕的两边有空白和填充，在我们的例子中，我们不希望发生这种情况。因此，让我们手动删除默认情况下添加的任何填充和边距。</p><figure class="me mf mg mh gt ju"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="a49b" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">由于我们已经在HTML文件中添加了标题，而且它也没有背景，我们需要使我们的网站看起来有吸引力和微妙的。要做到这一点，让我们升级字体的样式，通过添加一个与主题相匹配的背景来使它看起来更好。</p><p id="2f7e" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">在上面提到的GitHub库中，你可以在路径<code class="fe mz na nb nc b">images/bg/background.jpg</code>中找到已经存在的图像，这与UI预览中使用的图像相同。</p><h1 id="8f39" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">导入Google字体</h1><p id="5f02" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">为了更进一步，我们需要为我们的网站选择一个漂亮和微妙的字体。为了从各种各样的字体中进行选择，我们将使用<a class="ae mr" href="https://fonts.google.com/" rel="noopener ugc nofollow" target="_blank">谷歌字体</a>。</p><p id="ff1e" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">这可能需要一段时间，因为每个人的选择和口味都不同。选择一种字体，然后单击所选字体右上角的“+”按钮。</p><figure class="me mf mg mh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nd"><img src="../Images/bebf50450bec8ee4fb909b71f02bcde6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*I3EWJTXlnPx22lJb"/></div></div></figure><p id="cb1a" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">一旦你点击它，你会发现屏幕上出现一个黑色的条，上面写着“<strong class="lb iu"> 1家族被选中</strong>”，点击该条，它会展开并让你看到类似这样的内容。</p><p id="e678" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">细节可能会有一点不同，因为这取决于你选择的字体，但其余的保持不变。我们将在这里使用导入字体的标准方式，所以让我们继续复制灰色框中提供的整个<code class="fe mz na nb nc b"><strong class="lb iu">&lt;link href … &gt;</strong></code>。</p><p id="1e9d" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">要使用有效的字体，打开你的<code class="fe mz na nb nc b">index.html</code>文件，将这个链接粘贴到<code class="fe mz na nb nc b">&lt;head&gt;</code>标签之间的任何地方。</p><figure class="me mf mg mh gt ju"><div class="bz fp l di"><div class="mx my l"/></div><figcaption class="mt mu gj gh gi mv mw bd b be z dk translated">添加字体</figcaption></figure><h1 id="cb87" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">更多造型</h1><p id="627c" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">导入我们的字体后，是时候在主浏览器上也反映出来了</p><figure class="me mf mg mh gt ju"><div class="bz fp l di"><div class="mx my l"/></div><figcaption class="mt mu gj gh gi mv mw bd b be z dk translated">CSS样式</figcaption></figure><p id="9c0b" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">在我的例子中，我使用了字体系列“Lexend Exa ”,还添加了前面提到的背景图片。为了保持一个连续的、均匀间隔的布局，我们使用了一个flexbox，其内容与属性之间的空间对齐。</p><p id="51a6" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">我们还保留了一个名为“pads”的类，它的宽度为60%,所以它只占屏幕的一半多一点，这使得它不会太大，同时也保持了紧凑和柔和的外观。</p><p id="f667" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">“顶部焊盘”和“底部焊盘”类中的分割已经被定位，以便它们增长到其潜在的宽度和高度，并且还保持flex属性等于1，以便它们突出到前面。</p><p id="af19" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">我们最后为所有的面板分配不同的十六进制颜色。</p><h1 id="b81e" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">添加媒体查询</h1><p id="f9f6" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">最后，我们添加了媒体查询来控制应用程序的响应特性。</p><figure class="me mf mg mh gt ju"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="55a8" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">在这个简单的代码中，我们只控制字体的大小，如果屏幕尺寸下降到480像素以下，我们会缩小字体的大小，并且在底部添加一些边距以使它看起来更好。</p><figure class="me mf mg mh gt ju gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/fdee0bc542fbe935a86a07d83d17bc24.png" data-original-src="https://miro.medium.com/v2/resize:fit:880/0*OYmjiQCEggDw4Vc7"/></div><figcaption class="mt mu gj gh gi mv mw bd b be z dk translated">构建移动兼容的it</figcaption></figure><figure class="me mf mg mh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ms"><img src="../Images/d57147d739dcbc25e2d2fd0634a8db16.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*nx6cNEwYOIQ93Hj2"/></div></div></figure><h1 id="8a05" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">添加普通的JavaScript功能</h1><p id="1f58" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">在这一点上，我们已经设置好了很棒的UI，但是当点击它们时，pad不会发出任何声音。这是为什么呢？</p><p id="b705" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">我们的部门在这一点上已经有了音频，但是为了在用户点击时播放特定的声音，我们调用了一个<code class="fe mz na nb nc b">play()</code>函数。这就是JavaScript的用武之地。</p><p id="0b31" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">我们的基本JavaScript代码非常简单，只有11行代码。</p><figure class="me mf mg mh gt ju"><div class="bz fp l di"><div class="mx my l"/></div><figcaption class="mt mu gj gh gi mv mw bd b be z dk translated">收集声音和衬垫</figcaption></figure><p id="f673" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">In‌ ‌the‌ ‌beginning，我们通过存储整个查询来收集声音和衬垫，查询的目标分别是HTML类<code class="fe mz na nb nc b"><strong class="lb iu">.sounds</strong></code>和<code class="fe mz na nb nc b"><strong class="lb iu">.pads</strong></code>，并将它们存储到变量中。</p><p id="4a00" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">但是我们希望在窗口首次加载时执行这个操作，因此我们将所有内容都包装在一个<code class="fe mz na nb nc b"><strong class="lb iu">window.addEventListener(‘load’)</strong></code>中。</p><figure class="me mf mg mh gt ju"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="58dc" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">接下来，我们添加一个<code class="fe mz na nb nc b">forEach</code>，它循环遍历所有的pad分区。它有两个参数:一个是pad，每次循环时它都将自己初始化为每个单独的pad，另一个是index，播放特定pad的声音时需要它。</p><p id="1cd2" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">在<code class="fe mz na nb nc b">play()</code>功能的帮助下，我们利用上述声音变量中的声音来播放与单个面板相关的文件。</p><p id="d517" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">我们使用类似于<code class="fe mz na nb nc b">currentTime = 0</code>的东西。我们这样做的原因是，每次播放一个面板时，我们都会将时间重新初始化为零，这样我们就可以在多次点击同一个面板时多次播放一个面板。</p><p id="7d64" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated"><strong class="lb iu"> <em class="lx">祝贺你，你已经用普通的JavaScript构建了一个Web应用。您可以试用它，甚至将其部署到网上供他人使用。但是等等！我们仍然需要将这个Web应用程序转换成一个渐进式的应用程序。让我们开始吧。</em> </strong></p><figure class="me mf mg mh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ms"><img src="../Images/a8e7ad59c82da9e0a0760a50899b8d82.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ARgWJ8kDDLH0uuCe"/></div></div></figure><h1 id="58cf" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">什么是Web应用程序清单？</h1><p id="5806" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">Web应用清单是一个简单的JSON文件，它包含渐进式Web应用的详细信息，并告诉浏览器当它安装在用户的设备上时应该如何运行。</p><p id="27de" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">清单可以包含应用程序名称(全称和简称)、应用程序图标、应用程序启动后将打开的URL、控制主题颜色等信息。</p><h1 id="b1db" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">构建清单文件</h1><p id="cc73" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">创建渐进式Web应用程序清单文件是必不可少的，因为它在用户设备上安装时控制浏览器的行为。</p><figure class="me mf mg mh gt ju gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/fc3404e0a51f929483384175be1ad853.png" data-original-src="https://miro.medium.com/v2/resize:fit:1338/0*-SGtJht5pN92b19v"/></div><figcaption class="mt mu gj gh gi mv mw bd b be z dk translated">清单文件</figcaption></figure><p id="6188" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">要创建您自己的Web应用程序清单，您可以创建一个新文件，将其命名为<code class="fe mz na nb nc b">manifest.json</code>，并以JSON格式添加更多细节。然而，有一种更好的方法，那就是使用已经在网上提供给我们的工具。</p><h1 id="8a04" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">在线生成清单</h1><p id="d9e5" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">在这个时代，互联网已经为我们提供了许多节省时间的选项，当我们创建一个<code class="fe mz na nb nc b">manifest.json</code>文件时，这些选项又一次派上了用场。</p><p id="9d84" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">不用以JSON格式键入整个键值对，只需导航到这个网站:<a class="ae mr" href="https://app-manifest.firebaseapp.com/" rel="noopener ugc nofollow" target="_blank">https://app-manifest.firebaseapp.com/</a></p><p id="8cb7" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">这是一个Web应用程序清单生成器，它只需要您填写某些输入字段，它会自动为您生成清单。</p><p id="90a7" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">填写输入字段时需要考虑的事项:</p><ul class=""><li id="a51d" class="mi mj it lb b lc ly lg lz lk mk lo ml ls mm lw mn mo mp mq bi translated">给你的应用程序起一个全名和一个短名。</li><li id="783e" class="mi mj it lb b lc ng lg nh lk ni lo nj ls nk lw mn mo mp mq bi translated">主题颜色和背景颜色很重要，因为它可以修改普通Web应用程序的浏览器版本，并为其提供更多活力。</li><li id="dc40" class="mi mj it lb b lc ng lg nh lk ni lo nj ls nk lw mn mo mp mq bi translated">将显示模式更改为<code class="fe mz na nb nc b">‘standalone’</code>。</li><li id="44c4" class="mi mj it lb b lc ng lg nh lk ni lo nj ls nk lw mn mo mp mq bi translated">暂时去掉“应用范围”。</li><li id="0d94" class="mi mj it lb b lc ng lg nh lk ni lo nj ls nk lw mn mo mp mq bi translated">将起始URL的值设为<code class="fe mz na nb nc b">‘.’</code>,因为我们想要在根目录下创建PWA。</li><li id="5dc6" class="mi mj it lb b lc ng lg nh lk ni lo nj ls nk lw mn mo mp mq bi translated">在右手边，你会看到一个名为“图标”的按钮。选择一张图片作为你的应用图标，然后简单地拖放/上传到这里。</li></ul><p id="4909" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated"><strong class="lb iu"> <em class="lx">注意:请确保您的图标大小不超过512x512分辨率，因为图标经过缩放以适应不同的设备。</em> </strong></p><p id="fbec" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">所有这些工作完成后，点击<strong class="lb iu">生成。将ZIP文件的所有内容解压到你的项目文件夹中。</strong></p><p id="c06b" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">此时，您已经在项目中添加了清单文件，但是没有使用它。为了在您的项目中真实地反映清单文件，在<code class="fe mz na nb nc b"><strong class="lb iu">&lt;head&gt;</strong></code>标记之间的<code class="fe mz na nb nc b"><strong class="lb iu">index.html</strong></code>文件中添加一个到它的链接。</p><pre class="me mf mg mh gt nl nc nm nn aw no bi"><span id="953b" class="np kc it nc b gy nq nr l ns nt">&lt;head&gt;<br/>   &lt;link rel=”manifest” href=”manifest.json”&gt;<br/>&lt;/head&gt;</span></pre><p id="cf00" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated"><strong class="lb iu"><em class="lx"/></strong>！现在，项目中已经有了现成的清单文件。</p><figure class="me mf mg mh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ms"><img src="../Images/046e7e72160c7d44f010863560f30029.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*dMxqGgH9GywtRfy0"/></div></div></figure><p id="5574" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">现在我们将使用Yarn添加新的依赖项。</p><h1 id="afec" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">什么是纱线？</h1><p id="1617" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">Yarn是一个新的包管理器，它取代了NPM客户端或其他包管理器的现有工作流，同时与NPM注册中心保持兼容。软件包管理器的作用是安装一些为特定目的服务的软件包。</p><h1 id="ac76" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">使用纱线的优势</h1><p id="102f" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">当然，还有其他的包管理器，但是对于这个项目，我们将使用Yarn，原因如下:</p><ul class=""><li id="0b7b" class="mi mj it lb b lc ly lg lz lk mk lo ml ls mm lw mn mo mp mq bi translated">包下载只发生一次，即不需要第二次下载。</li><li id="4023" class="mi mj it lb b lc ng lg nh lk ni lo nj ls nk lw mn mo mp mq bi translated">这样更安全。</li><li id="552a" class="mi mj it lb b lc ng lg nh lk ni lo nj ls nk lw mn mo mp mq bi translated">使用锁定依赖项的锁定格式，确保两个系统在相同的包/依赖项上工作。</li></ul><h1 id="43a6" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">在系统中安装纱线</h1><p id="cfad" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">在你的系统中安装yarn非常简单。您只需访问<a class="ae mr" href="https://yarnpkg.com/lang/en/" rel="noopener ugc nofollow" target="_blank">https://yarnpkg.com/lang/en/</a>，点击<strong class="lb iu">安装纱线</strong>、<strong class="lb iu">、</strong>，下载将自动开始。</p><figure class="me mf mg mh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nu"><img src="../Images/1165b5e97345387d9c417bff0b01ddcc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*CgcuMU-JG7K-CpSY"/></div></div></figure><p id="1b8b" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">只需遵循正常的设置程序，Yarn安装将在您的系统中开始，并且路径也将在您的环境变量中自动修改。</p><p id="76ac" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">此方法的另一种替代方法是使用<strong class="lb iu"> npm </strong>，这也很简单。如果您已经在使用<strong class="lb iu"> npm </strong>，那么只需打开一个终端并键入:</p><figure class="me mf mg mh gt ju gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/4db024a4cd88b4c0f5288a1e2f584167.png" data-original-src="https://miro.medium.com/v2/resize:fit:1272/0*siiwdCtWN4ARap73"/></div></figure><p id="db8d" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">要检查yarn安装在您的系统中是否成功，请打开终端并键入:</p><figure class="me mf mg mh gt ju gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/33263ace0b4786339aef13ef645f4bf4.png" data-original-src="https://miro.medium.com/v2/resize:fit:824/0*R1rYTlxEAARdpVJM"/></div></figure><p id="17aa" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">如果您得到类似于<strong class="lb iu"> 1.16.0 </strong>或任何类似的响应，这意味着Yarn已经成功安装，您可以开始工作了。</p><h1 id="cc50" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">初始化纱线项目</h1><p id="b57e" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">要创建一个新的yarn项目，第一步是在终端中导航到您的项目文件夹，并键入以下命令:</p><figure class="me mf mg mh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nx"><img src="../Images/8227ccc904a75cf294d97067b101ae8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*rr3PlvxBc3kf9Myh"/></div></div></figure><p id="395e" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">一旦你在终端中输入<code class="fe mz na nb nc b"><strong class="lb iu">yarn init</strong></code>，你会收到很多问题。当您回答这些问题时，响应将存储在一个保存所有信息的<code class="fe mz na nb nc b"><strong class="lb iu">package.json</strong></code>文件中。</p><p id="fb7a" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">首先，会问你一个名字。在这里输入你想要保留的项目名称。至于其他字段，如果您愿意，可以保留为空或键入您自己的规范。</p><p id="507c" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">不应该跳过的一个非常重要的问题是<strong class="lb iu">入口点</strong>。它决定了我们项目的入口点应该在哪里。将其初始化为我们之前创建的<strong class="lb iu"> index.js </strong>。</p><p id="a2b9" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">一旦你完成这一步，你会发现你的项目中填充了许多新的文件夹和文件。如果是这样的话，拍拍你的背，因为你已经成功初始化了你的第一个yarn项目。</p><p id="e5ad" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated"><strong class="lb iu"> <em class="lx">注意:yarn init应该在导航到项目文件夹后完成，以便index.js可以作为入口点</em> </strong></p><h1 id="7fe9" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">安装名为Serve的软件包</h1><p id="5618" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">因为渐进式Web应用程序(PWA)需要一个活动的服务器来运行，所以我们至少需要一个本地主机来测试我们的应用程序。所以，我们需要安装一个名为<code class="fe mz na nb nc b"><strong class="lb iu">serve</strong></code>的包。</p><p id="faa6" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated"><code class="fe mz na nb nc b"><strong class="lb iu">serve</strong></code>当我们想使用服务器测试静态站点时，效果最好。我们可以检查它在localhost中是如何运行的，然后再将其推入部署中。</p><p id="4c8d" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">要在你的项目中安装<code class="fe mz na nb nc b"><strong class="lb iu">serve</strong></code>,我们只需在终端中输入以下内容(导航到你的项目文件夹后):</p><figure class="me mf mg mh gt ju gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/7f7a7c2ae0f3087015e453fa72bee04f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1182/0*BWL_Lat0OK20zgiN"/></div></figure><p id="c4d2" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">这将把依赖项添加到您的项目中，您可以在<code class="fe mz na nb nc b"><strong class="lb iu">package.json</strong></code>文件中查看它。</p><p id="600c" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">为了在本地服务器上运行您的静态页面，我们需要首先使用这个依赖项来启动服务器。要启动服务器，在您的终端中键入<code class="fe mz na nb nc b"><strong class="lb iu">yarn serve</strong></code> <strong class="lb iu"> </strong>。</p><figure class="me mf mg mh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nz"><img src="../Images/f8e689cfca45c67e3c8cf169fc43db44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*KrduBk8QTN0LmFLH"/></div></div></figure><p id="29e5" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">在您的案例中，您将会看到类似的内容，为您提供关于本地主机和网络地址的详细信息。您可以打开它们中的任何一个来查看在本地服务器上运行的静态网站。</p><figure class="me mf mg mh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ms"><img src="../Images/75b9206a8a6731f12dadb8ffb9107943.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tkwjwS2SIxf4Nxf7"/></div></div></figure><h1 id="e6e6" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">什么是服务人员？</h1><p id="0742" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated"><em class="lx">一种</em> <a class="ae mr" href="https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API" rel="noopener ugc nofollow" target="_blank"> <em class="lx">服务工作者</em> </a> <em class="lx">是一种</em> <a class="ae mr" href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API" rel="noopener ugc nofollow" target="_blank"> <em class="lx">网络工作者</em> </a> <em class="lx">。它本质上是一个JavaScript文件，独立于主浏览器线程运行，拦截网络请求，缓存或从缓存中检索资源，并传递推送消息。”</em></p><p id="80aa" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">基本上，服务工作者独立于主线程运行，并且完全独立于他们当前关联的应用程序。</p><p id="ef14" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">服务工作者可以控制网络请求，可以处理缓存，还可以通过缓存提供离线资源支持。</p><p id="05ec" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">服务人员的生命周期包括三个步骤:</p><ul class=""><li id="009d" class="mi mj it lb b lc ly lg lz lk mk lo ml ls mm lw mn mo mp mq bi translated">登记</li><li id="5724" class="mi mj it lb b lc ng lg nh lk ni lo nj ls nk lw mn mo mp mq bi translated">装置</li><li id="e54b" class="mi mj it lb b lc ng lg nh lk ni lo nj ls nk lw mn mo mp mq bi translated">激活</li></ul><h1 id="5acb" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">首先注册服务人员</h1><p id="e388" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">为了<strong class="lb iu">安装</strong>我们的服务人员，我们需要<strong class="lb iu">首先将</strong>注册到我们的主JavaScript文件中，在我们的例子中是<strong class="lb iu"> index.js </strong>。在继续之前，让我们创建一个服务工作者文件，并将其命名为<code class="fe mz na nb nc b"><strong class="lb iu">serviceWorker.js</strong></code>。</p><p id="3de3" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">服务人员生命周期的第一步是注册:</p><figure class="me mf mg mh gt ju"><div class="bz fp l di"><div class="mx my l"/></div><figcaption class="mt mu gj gh gi mv mw bd b be z dk translated">注册服务人员</figcaption></figure><p id="96f7" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">首先检查浏览器支持，因此我们需要将它添加到我们的<code class="fe mz na nb nc b"><strong class="lb iu">window.addEventListener()</strong></code>中。服务工作者然后向<code class="fe mz na nb nc b"><strong class="lb iu">navigator.serviceWorker.register</strong></code>注册，当服务工作者成功注册时，它返回一个解决的承诺。</p><p id="8a8f" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">服务人员的<strong class="lb iu">范围</strong>非常重要，因为它决定了服务人员控制哪些文件。换句话说，服务人员将从哪条路径拦截请求。</p><p id="9a5b" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">因此，我们总是倾向于在根目录中使用服务工作者，这样它就可以控制来自这个域中所有文件的请求。</p><h1 id="e494" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">使用Vanilla JS创建serviceWorker.js</h1><p id="0918" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">现在我们已经在浏览器中创建和注册了s <code class="fe mz na nb nc b">erviceWorker.js</code>文件，我们可以通过打开inspect element选项卡并在<strong class="lb iu">开发工具</strong>中导航到<strong class="lb iu">应用</strong>菜单来确认它。</p><figure class="me mf mg mh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/08356b7a58af48fc8a6884d29ea56be0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*M43a2wAMYeievCKz"/></div></div></figure><p id="f1d8" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">你会发现你的服务人员注册成功，并已写入你的控制台的消息日志。</p><p id="96bb" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">为了使您的所有资产在我们的本地缓存中可用，我们需要动态地提及所有静态资产的路径。</p><figure class="me mf mg mh gt ju"><div class="bz fp l di"><div class="mx my l"/></div><figcaption class="mt mu gj gh gi mv mw bd b be z dk translated">静态资产</figcaption></figure><p id="1fe2" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">由于服务人员完全是事件驱动的，我们需要为其添加install和fetch等事件，以便在浏览器端执行它们。</p><h1 id="02eb" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">安装</h1><p id="c030" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">每次浏览器检测到新的服务工作人员时，Install事件都会调用自身。我们的目标是调用缓存API来检索我们所有的静态资产，并保存它们以备后用。</p><figure class="me mf mg mh gt ju"><div class="bz fp l di"><div class="mx my l"/></div><figcaption class="mt mu gj gh gi mv mw bd b be z dk translated">安装维修工人</figcaption></figure><p id="0e56" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">In‌ ‌this‌ ‌case，我们用名字<code class="fe mz na nb nc b">‘<strong class="lb iu">static-cache</strong>’</code>来称呼我们的缓存。您可以使用任何想要的名称，但是为了简单起见，最好使用“静态缓存”。</p><p id="3897" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">由于服务工作者是一个低级API，我们总是需要告诉它做什么。如果此时你回到浏览器中的<strong class="lb iu">应用</strong>菜单，模拟一个离线环境，你仍然会发现什么也没发生。</p><p id="677c" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">让我们在<strong class="lb iu">获取</strong> API的帮助下解决这个问题。</p><h1 id="a9ca" class="kb kc it bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">取得</h1><p id="7cb5" class="pw-post-body-paragraph kz la it lb b lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw im bi translated">在服务人员中，我们可以决定如何对给定的事件做出响应。为此，我们使用一种叫做<code class="fe mz na nb nc b"><strong class="lb iu">respondWith()</strong></code>的方法。</p><p id="807c" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">在我们的例子中，我们首先要检查缓存中是否有东西，如果没有，我们将从网络中获取它。</p><figure class="me mf mg mh gt ju"><div class="bz fp l di"><div class="mx my l"/></div><figcaption class="mt mu gj gh gi mv mw bd b be z dk translated">静态或网络缓存</figcaption></figure><p id="4c7b" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">为了创建我们的缓存优先方法，我们创建了一个函数，该函数将请求与缓存本身中存在的文件进行匹配。因此，请求充当了一个键。</p><p id="c988" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">现在，如果缓存中没有任何内容，则返回undefined，或者返回缓存响应本身。</p><figure class="me mf mg mh gt ju"><div class="bz fp l di"><div class="mx my l"/></div><figcaption class="mt mu gj gh gi mv mw bd b be z dk translated">先缓存</figcaption></figure><p id="581d" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">为了创建网络优先的方法，我们希望创建一个动态缓存，所有网络资产if‌ ‌required都将被提取到该缓存中。如果它不能，它将退回到静态缓存。</p><figure class="me mf mg mh gt ju"><div class="bz fp l di"><div class="mx my l"/></div><figcaption class="mt mu gj gh gi mv mw bd b be z dk translated">网络优先</figcaption></figure><p id="6be4" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">如果我们的浏览器需要，这将在线获取任何请求，并使用<code class="fe mz na nb nc b"><strong class="lb iu">put()</strong></code>方法添加到我们的动态缓存中</p><p id="97d0" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">现在，当我们访问我们的<strong class="lb iu">应用</strong>菜单时，我们会发现两个缓存存储，一个是静态的<strong class="lb iu">和另一个是我们刚刚创建的动态的</strong>。</p><figure class="me mf mg mh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi oa"><img src="../Images/90a94d137589b1a81bc8b92d28cbfa49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*vnEQWIGQiEnY2VZu"/></div></div></figure><p id="31d6" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">现在，如果我们回到我们的服务人员那里，通过单击“offline”复选框来模拟一个离线环境，我们将不会遇到任何互联网问题，并且由于所有的缓存存储，应用程序将会顺利运行。</p><figure class="me mf mg mh gt ju gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/7f02e700f17e3caf8fc48bf549feb249.png" data-original-src="https://miro.medium.com/v2/resize:fit:1290/0*pHMSiFs_P3vXSdBd"/></div></figure><p id="8659" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated"><strong class="lb iu">非常祝贺你在这里成功，你现在有了自己的渐进式网络应用程序，可以在所有平台上使用/安装。</strong></p><p id="d02a" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated">要安装PWA，只需将项目部署在在线服务器上(免费托管也可以)。一旦你的网站完全加载，你会在地址栏的右边发现一个小的<code class="fe mz na nb nc b"><strong class="lb iu">+</strong></code>标志。</p><figure class="me mf mg mh gt ju gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/cfbedf782f505c1f76d2c3326355e966.png" data-original-src="https://miro.medium.com/v2/resize:fit:1156/0*UJb71gKO784pJSBM"/></div></figure><p id="2ee6" class="pw-post-body-paragraph kz la it lb b lc ly le lf lg lz li lj lk ma lm ln lo mb lq lr ls mc lu lv lw im bi translated"><strong class="lb iu">点击它，查看您在本地系统中安装和运行的精彩PWA。</strong></p></div><div class="ab cl od oe hx of" role="separator"><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi"/></div><div class="im in io ip iq"><div class="me mf mg mh gt ok"><a href="https://gitconnected.com/learn/javascript" rel="noopener  ugc nofollow" target="_blank"><div class="ol ab fo"><div class="om ab on cl cj oo"><h2 class="bd iu gy z fp op fr fs oq fu fw is bi translated">学习JavaScript -最佳JavaScript教程(2019) | gitconnected</h2><div class="or l"><h3 class="bd b gy z fp op fr fs oq fu fw dk translated">JavaScript是世界上最流行的编程语言之一——它随处可见。JavaScript是一种…</h3></div><div class="os l"><p class="bd b dl z fp op fr fs oq fu fw dk translated">gitconnected.com</p></div></div><div class="ot l"><div class="ou l ov ow ox ot oy jz ok"/></div></div></a></div></div></div>    
</body>
</html>