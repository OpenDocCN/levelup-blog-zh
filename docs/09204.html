<html>
<head>
<title>Script to Calculate the Ethereum Difficulty</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">计算以太坊难度的脚本</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/script-to-calculate-the-ethereum-difficulty-daeee53fc31?source=collection_archive---------2-----------------------#2021-07-15">https://levelup.gitconnected.com/script-to-calculate-the-ethereum-difficulty-daeee53fc31?source=collection_archive---------2-----------------------#2021-07-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="18e4" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">以太坊节点系列四——让我们用python来创建一个计算/审计以太坊难度的脚本！</h2></div><p id="106e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">本文将创建并运行一个脚本来审计和计算以太坊区块链的“总难度”。这是超级有用和有趣的，相信我！😇</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi le"><img src="../Images/f3391af4b8d1c247bbddd6ff4de2bc9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PzCuH_mCnfwinjf_5mL1jg.jpeg"/></div></div></figure><p id="dc47" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了能够跟上，我假设您已经具备以下条件:</p><ul class=""><li id="ec08" class="lq lr it kk b kl km ko kp kr ls kv lt kz lu ld lv lw lx ly bi translated">运行在Ubuntu上的以太坊节点。查看这篇文章，我解释了如何在Ubuntu AWS上部署以太坊节点</li><li id="1dc5" class="lq lr it kk b kl ma ko mb kr mc kv md kz me ld lv lw lx ly bi translated">您已经知道了一些使用Etehreum网络的命令。查看这篇文章，在那里我谈到了一些<a class="ae lz" rel="noopener ugc nofollow" target="_blank" href="/exploring-the-ethereum-block-9fa3a68e42d8">命令来探索以太坊块</a></li><li id="fb9a" class="lq lr it kk b kl ma ko mb kr mc kv md kz me ld lv lw lx ly bi translated">你已经安装了<a class="ae lz" rel="noopener ugc nofollow" target="_blank" href="/ethereum-playing-with-python-web3-library-and-eth-serialization-ethereum-676efc8b1346"> Python web3库</a>。也检查文章</li><li id="c662" class="lq lr it kk b kl ma ko mb kr mc kv md kz me ld lv lw lx ly bi translated">还好有:🦖</li></ul><p id="e561" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这种困难表明，在区块链的工作证明中找到开采区块链新区块所需的散列值有多困难。难度表示矿工猜测散列的可能性/组合的数量。难度越大，挖掘者需要执行的工作就越多，以便猜测散列并创建新的块。这是任何区块链工作证明的一部分，以太坊仍然是区块链工作证明，尽管在2022年或2023年的某个时候迁移到股份证明。</p><p id="3043" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">挖掘难度主要是衡量在区块链中找到新区块的难度，或者换句话说，矿工需要蛮力来找到比目标哈希小的哈希的情况有多罕见。</p><p id="354a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">本文中我们要做的是计算总难度值，这是以太坊区块中的字段之一。该字段还用于计算以太坊矿工是否满足难度条件，以及审核区块链中的难度是否正确。因此，我们在这里要做的是使用python脚本审计这个“总难度”值。</p><h2 id="f189" class="mf mg it bd mh mi mj dn mk ml mm dp mn kr mo mp mq kv mr ms mt kz mu mv mw mx bi translated">区块内总难度值是如何计算的？</h2><p id="c1cc" class="pw-post-body-paragraph ki kj it kk b kl my ju kn ko mz jx kq kr na kt ku kv nb kx ky kz nc lb lc ld im bi translated">一个方块的“总难度”是所有前面的方块加上前面的方块的总难度。那么如何才能创建一个循环来计算某个区块的难度呢？</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/a6c35a734f39ff2ba78002e2f5b62871.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*-PtMclR-YPf0uz0GwlK-gA.png"/></div></figure><p id="1312" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您可以将这段代码复制到Python3控制台，但是请注意缩进。Python对缩进非常敏感。</p><pre class="lf lg lh li gt ne nf ng nh aw ni bi"><span id="56b3" class="mf mg it nf b gy nj nk l nl nm">totalDiff = 0<br/>limit = w3<strong class="nf iu">.</strong>eth<strong class="nf iu">.</strong>getBlock(1111)[“number”]<br/>for i in range(0, limit+1):<br/>     totalDiff += w3<strong class="nf iu">.</strong>eth<strong class="nf iu">.</strong>getBlock(i)[“difficulty”]<br/>     print(“Block: [%d # %d] — — totalDifficulty: %d” % (i, limit, totalDiff))</span></pre><p id="d719" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">并按两次enter键</p><p id="9f0c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">很快，我们得到了块1111的总难度(因为我们把<em class="nn"> limit = w3 </em> <strong class="kk iu"> <em class="nn">)。</em></strong> <em class="nn"> eth </em> <strong class="kk iu"> <em class="nn">。</em></strong><em class="nn">get block(1111)[" number "]</em>)，但是你可以把1111换成888888或者任何你想要的东西来尝试得到任何块的难度。😎</p><p id="5d84" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这个流程有问题吧？这是一个非常密集的循环，因为它必须多次执行检索、添加和打印输出。以太坊区块链有12 000 000多个街区，每12秒增加一个新街区。计算方块1111的难度很容易，但计算更高的方块，如方块11 111 111，则需要相当多的时间和资源。就算要计算987654块的难度，至少也要30分钟。</p><p id="f6a2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">顺便说一句，如果你计算整个区块链的以太坊“总难度”，我想知道需要多长时间！</p><p id="50f2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">能够审计区块链是区块链的关键原则之一。您可以随时回到过去，全面审核区块链的价值观。很棒吧？</p><p id="6975" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我知道你是否成功运行了脚本，如果你有任何问题！</p><p id="13e2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们将在下一篇文章中继续讨论以太坊节点，敬请关注！</p><p id="179b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">🚀跟着我，也请查看我的🧱区块链课程:</strong></p><p id="b2fb" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">🐶</strong><a class="ae lz" href="https://www.udemy.com/course/-dogecoin-course-the-first-complete-dogecoin-course/?referralCode=9416B1408224CE309DD8" rel="noopener ugc nofollow" target="_blank"><strong class="kk iu"/></a>有史以来第一个Dogecoin课程</p><p id="923a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">👨‍🎓</strong> <a class="ae lz" href="https://www.udemy.com/course/fintech-technologies-cloud-and-cybersecurity/?referralCode=F1D4EA005A2881735A36" rel="noopener ugc nofollow" target="_blank"> <strong class="kk iu"> Fintech、云和网络安全课程</strong> </a></p><p id="a7f0" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">📖</strong><a class="ae lz" href="https://www.amazon.com/dp/B091CYTX37/ref=sr_1_1?dchild=1&amp;keywords=unblockchain&amp;qid=1617186443&amp;s=digital-text&amp;sr=1-1" rel="noopener ugc nofollow" target="_blank"><strong class="kk iu"/></a><a class="ae lz" href="https://www.udemy.com/course/the-complete-nft-course-learn-everything-about-nfts/?referralCode=AAEE908D13D0E2276B19" rel="noopener ugc nofollow" target="_blank"><strong class="kk iu">完整的NFTs教程</strong> </a></p><p id="f7c6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">👨‍🎓</strong> <a class="ae lz" href="https://www.udemy.com/course/blockchain-deep-dive-from-bitcoin-to-ethereum-to-crypto/?referralCode=B8463EE382E6D313304B" rel="noopener ugc nofollow" target="_blank"> <strong class="kk iu"> Unblockchain课程</strong> </a> <strong class="kk iu"> —脑洞大开的区块链课程</strong></p></div></div>    
</body>
</html>