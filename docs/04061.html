<html>
<head>
<title>Django Quick Tips: get_absolute_url()</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Django快速提示:get_absolute_url()</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/django-quick-tips-get-absolute-url-1c22321f806b?source=collection_archive---------4-----------------------#2020-06-08">https://levelup.gitconnected.com/django-quick-tips-get-absolute-url-1c22321f806b?source=collection_archive---------4-----------------------#2020-06-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/5409dd81be464c0d8b68da5fd3a3649c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZTsJzek0_rbKbQkwpDlW3A.png"/></div></div></figure><p id="d243" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">说到底，都是吻的问题。</p><p id="744b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果您是一名经验丰富的Django开发人员，您可能会遇到这种情况。然而，如果你是一个初学者，接触良好的实践将大大降低你的学习曲线。</p><p id="f2d7" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">Django URLs日积月累:<code class="fe kz la lb lc b">get_absolute_url().</code>函数名现在恰好是Django社区的标准，但毕竟它只是另一个名字，所以这取决于你。</p><p id="da9b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们将从用<code class="fe kz la lb lc b">Posts</code>资源实现一个简单的CRUD开始，这样我们以后就可以很容易地正确看待事情了。</p><h1 id="49d4" class="ld le it bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">模型</h1><p id="8be4" class="pw-post-body-paragraph kb kc it kd b ke mb kg kh ki mc kk kl km md ko kp kq me ks kt ku mf kw kx ky im bi translated">用两个属性a <code class="fe kz la lb lc b">title</code>和<code class="fe kz la lb lc b">content</code>创建一个基本的<code class="fe kz la lb lc b">Post</code>模型。</p><figure class="mg mh mi mj gt ju"><div class="bz fp l di"><div class="mk ml l"/></div><figcaption class="mm mn gj gh gi mo mp bd b be z dk translated">models.py</figcaption></figure><h1 id="fe86" class="ld le it bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">视图</h1><p id="38cd" class="pw-post-body-paragraph kb kc it kd b ke mb kg kh ki mc kk kl km md ko kp kq me ks kt ku mf kw kx ky im bi translated">然后添加基本的视图函数，一个负责返回所有的帖子——在这个特殊的例子中过滤最后三个——另一个负责显示每个帖子的详细页面。</p><figure class="mg mh mi mj gt ju"><div class="bz fp l di"><div class="mk ml l"/></div><figcaption class="mm mn gj gh gi mo mp bd b be z dk translated">views.py</figcaption></figure><p id="d108" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">出于本教程的考虑，我选择了基于函数的视图，但这同样适用于CBV(基于类的视图)。</p><h1 id="e16c" class="ld le it bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">资源定位符</h1><p id="4fe5" class="pw-post-body-paragraph kb kc it kd b ke mb kg kh ki mc kk kl km md ko kp kq me ks kt ku mf kw kx ky im bi translated">最后，注意URL。</p><figure class="mg mh mi mj gt ju"><div class="bz fp l di"><div class="mk ml l"/></div><figcaption class="mm mn gj gh gi mo mp bd b be z dk translated">urls.py</figcaption></figure><p id="a054" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">并且不要忘记更新位于主项目目录中的urls.py。</p><h1 id="72ff" class="ld le it bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">模板</h1><p id="35d2" class="pw-post-body-paragraph kb kc it kd b ke mb kg kh ki mc kk kl km md ko kp kq me ks kt ku mf kw kx ky im bi translated">现在，让我们用一个简单的HTML来显示我们的内容。</p><pre class="mg mh mi mj gt mq lc mr ms aw mt bi"><span id="9c33" class="mu le it lc b gy mv mw l mx my">// index.html<br/>{% for post in posts %}                       <br/>&lt;ul&gt;                         <br/>   &lt;li&gt;&lt;a href="{% url 'app_name:post_detail' pk=post.id %}"&gt;{{ post.title }}&lt;/a&gt;<br/>    &lt;/li&gt;                      <br/>&lt;/ul&gt;                       <br/>{% endfor %}</span></pre><p id="d59c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">到目前为止，这是Django中资源生命周期的基础:收集数据，然后处理，最后显示。</p><p id="4858" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu">模型- &gt;视图- &gt;模板。</strong></p><p id="2cb0" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">然后在URL被触发时呈现<code class="fe kz la lb lc b">detail</code>页面。</p><pre class="mg mh mi mj gt mq lc mr ms aw mt bi"><span id="d71a" class="mu le it lc b gy mv mw l mx my">// detail.html<br/>&lt;h5&gt;{{ post.title }}&lt;/h5&gt;                       <br/>&lt;p&gt;{{ post.content }}&lt;/p&gt;</span></pre><p id="5159" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">浏览管理页面添加数据，以便我们可以测试它。</p><p id="c580" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果你点击你的应用程序网址，它应该会返回你刚刚添加的文章标题的链接。</p><p id="63f0" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们在<code class="fe kz la lb lc b">index.htm</code> l中将<code class="fe kz la lb lc b">id</code>传递给URL的方式可能会导致拼写错误，原因很简单:app_name，url_name然后将post_id赋给你在<code class="fe kz la lb lc b">views.py</code>中声明的适当变量。</p><p id="a153" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在这里，您应该有一个类似于<code class="fe kz la lb lc b">get_absolute_url()</code>的函数来处理资源细节页面的呈现。</p><p id="eb56" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">让我们添加该功能并进行必要的调整。</p><pre class="mg mh mi mj gt mq lc mr ms aw mt bi"><span id="a6ed" class="mu le it lc b gy mv mw l mx my">// models.py<br/>from django.urls import reverse   // ---&gt; add<br/>...<br/>def __str__(self):<br/>   return self.title<br/>def get_absolute_url(self):       // ---&gt; new function<br/>   return reverse('post_detail', args<strong class="lc iu">=</strong>[str(<em class="mz">self</em>.id)])</span></pre><p id="11d4" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在我们已经添加了函数，让我们看看如何使用它来呈现详细页面。</p><pre class="mg mh mi mj gt mq lc mr ms aw mt bi"><span id="cb69" class="mu le it lc b gy mv mw l mx my">// index.html<br/>{% for post in posts %}                       <br/>&lt;ul&gt;                         <br/>   &lt;li&gt;&lt;a href="{{ post.get_absolute_url }}"&gt;{{ post.title }}&lt;/a&gt;&lt;/li&gt;    // there you have it.                     <br/>&lt;/ul&gt;                       <br/>{% endfor %}</span></pre><p id="8383" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">就是这样，一切都在后面完成，只需替换所有不必要的参数并调用函数来获得每个帖子的绝对URL。</p><p id="33be" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这里的关键要点是尽可能避免使用模板进行处理，如果在后端可以做任何事情，<strong class="kd iu">就去做</strong>并保持模板真正的和主要的用途—数据和内容显示。</p><p id="51d3" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我希望你会发现这个快速洞察有用。</p><p id="7b75" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">干杯。</p></div><div class="ab cl na nb hx nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="im in io ip iq"><h2 id="3a8a" class="mu le it bd lf nh ni dn lj nj nk dp ln km nl nm lr kq nn no lv ku np nq lz nr bi translated">关于Django URLs的更多信息</h2><ul class=""><li id="5570" class="ns nt it kd b ke mb ki mc km nu kq nv ku nw ky nx ny nz oa bi translated"><a class="ae ob" href="https://docs.djangoproject.com/en/3.0/topics/http/urls/" rel="noopener ugc nofollow" target="_blank">https://docs.djangoproject.com/en/3.0/topics/http/urls/</a></li><li id="5dd1" class="ns nt it kd b ke oc ki od km oe kq of ku og ky nx ny nz oa bi translated">【https://tutorial.djangogirls.org/en/django_urls/ T2】号</li></ul></div></div>    
</body>
</html>