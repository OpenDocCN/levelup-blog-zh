<html>
<head>
<title>JavaScript Best Practices — Compound Statements</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript最佳实践—复合语句</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/javascript-best-practices-compound-statements-fb0326f6ea70?source=collection_archive---------8-----------------------#2020-05-30">https://levelup.gitconnected.com/javascript-best-practices-compound-statements-fb0326f6ea70?source=collection_archive---------8-----------------------#2020-05-30</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/f551538aa96227cb3f67c121ff6b9046.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*bpprDPr7cL6WP6zP"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">图片由<a class="ae kf" href="https://unsplash.com/@araltasher?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Aral Tasher </a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="f4d2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">JavaScript是一种非常宽容的语言。编写可以运行但有错误的代码很容易。</p><p id="fb05" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本文中，我们将研究用JavaScript编写复合语句的最佳实践。</p><h1 id="599f" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">将一对括号写在一起</h1><p id="5563" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">当我们写积木的时候，很容易忘记大括号。</p><p id="5349" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因此，我们可能想先写大括号，然后再填充语句。</p><p id="2525" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们首先写:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="bfd5" class="mq lf it mm b gy mr ms l mt mu">if (i &lt; maxLines)</span></pre><p id="06a0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们写道:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="0feb" class="mq lf it mm b gy mr ms l mt mu">if (i &lt; maxLines){}</span></pre><p id="3b81" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们填写里面的语句:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="ae5e" class="mq lf it mm b gy mr ms l mt mu">if (i &lt; maxLines){<br/>  // do something<br/>}</span></pre><h1 id="4fe3" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">用括号来阐明条件句</h1><p id="479b" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们应该在条件块中添加大括号来阐明它们。</p><p id="0ff5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">即使JavaScript允许我们编写不带括号的单行条件语句，我们也可以加上括号:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="bb9d" class="mq lf it mm b gy mr ms l mt mu">if (denominator !== 0) {<br/>  result = a / denominator;<br/>}</span></pre><h1 id="d312" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">危险的深层筑巢</h1><p id="f18a" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">嵌套是不好的，因为它们很难阅读。并且修改难以阅读的代码增加了产生错误的机会。</p><p id="ac7b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因此，我们应该尽可能地减少或消除嵌套。</p><p id="0eaf" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果我们有:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="9899" class="mq lf it mm b gy mr ms l mt mu">if (foo) {<br/>  //...<br/>  if (bar) {<br/>    //...<br/>    if (qux) {<br/>      //...<br/>      if (baz) {<br/>        //...<br/>      }<br/>    }<br/>  }<br/>}</span></pre><p id="b231" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">那么我们应该重写它以消除嵌套。</p><h1 id="0465" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">使用中断块简化嵌套的if</h1><p id="fde2" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">如果我们在循环中嵌套了，我们可以用<code class="fe mv mw mx mm b">break</code>语句来消除它们。</p><p id="fb67" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以编写以下内容:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="b659" class="mq lf it mm b gy mr ms l mt mu">while (condition) {<br/>  if (shouldEnd) {<br/>    break;<br/>  }<br/>  //...<br/>}</span></pre><p id="1dd0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当<code class="fe mv mw mx mm b">shouldEnd</code>为<code class="fe mv mw mx mm b">true</code>时，我们结束循环。</p><p id="cc9b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以为任何应该结束循环的条件添加中断块。</p><h1 id="13a3" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">将嵌套的if转换为一组if-else块</h1><p id="59ed" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">如果我们有嵌套的<code class="fe mv mw mx mm b">if</code>语句，我们可以通过变成<code class="fe mv mw mx mm b">if...else</code>块来消除它们。</p><p id="79ec" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，如果我们有:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="3d2a" class="mq lf it mm b gy mr ms l mt mu">if (10 &lt; subtotal) {<br/>  if (100 &lt; subtotal) {<br/>    if (1000 &lt; subtotal) {<br/>      total *= 0.9;<br/>    } else {<br/>      total *= 0.8;<br/>    }<br/>  } else {<br/>    total *= 0.7;<br/>  }<br/>}</span></pre><p id="28db" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后，我们应该通过编写以下代码来移除嵌套，从而以一种更简洁的方式重新构造它:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="e2ed" class="mq lf it mm b gy mr ms l mt mu">if (10 &lt; subtotal) {<br/>  total *= 0.7;<br/>} else if (100 &lt; subtotal) {<br/>  total *= 0.8;<br/>} else if (1000 &lt; subtotal) {<br/>  total *= 0.9;<br/>}</span></pre><p id="d9da" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">没有巢状结构会更容易阅读。</p><h1 id="cf31" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">将嵌套的if转换为case语句</h1><p id="a5f1" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们也可以将嵌套的<code class="fe mv mw mx mm b">if</code>语句转换成<code class="fe mv mw mx mm b">switch</code>语句。</p><p id="672d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="a86e" class="mq lf it mm b gy mr ms l mt mu">switch (val) {<br/>  case 1: {<br/>    //...<br/>    break;<br/>  }<br/>  case 2: {<br/>    //...<br/>    break;<br/>  }<br/>  //...<br/>}</span></pre><p id="4703" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">没有嵌套，所以很容易阅读，我们可以看到所有的条件。</p><figure class="mh mi mj mk gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi my"><img src="../Images/caf0cdc05aee8839bbec64d2edc0c888.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*IiCr0U5-DutfDnv3"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">由<a class="ae kf" href="https://unsplash.com/@yourhousefitness?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Sergio Pedemonte </a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><h1 id="951b" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">将深度嵌套的代码分解到它自己的函数中</h1><p id="2f88" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">将深度嵌套的代码移到它自己的函数中会减少嵌套，所以我们应该这样做。</p><p id="a15c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">它还使每个部分更短，这样就更好了。</p><h1 id="3976" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">使用更加面向对象的方法</h1><p id="caac" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以使用类和对象将它们封装到一个包中并使用它们，而不是写出具有大量相似代码和嵌套的冗长过程。</p><p id="4009" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这样，我们可以创建做类似事情的类似对象，而不是一行一行地写出来。</p><h1 id="594f" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">重新设计深度嵌套的代码</h1><p id="6a15" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">深度嵌套的代码应该重新设计以减少嵌套。</p><p id="8e57" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">太复杂了，读起来伤脑子。更改它们将容易出错。</p><h1 id="e458" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">降低复杂性</h1><p id="3d62" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">降低复杂性会让我们的生活更轻松。</p><p id="f816" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">没有人喜欢被复杂的事情淹没。</p><p id="b110" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以通过计算直线路径的数量来衡量一段代码的复杂度。</p><p id="8f78" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们加上<code class="fe mv mw mx mm b">if</code>、<code class="fe mv mw mx mm b">while</code>、<code class="fe mv mw mx mm b">for</code>、<code class="fe mv mw mx mm b">&amp;&amp;</code>、<code class="fe mv mw mx mm b">||</code>的数字。</p><p id="5ccc" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们将总数加上<code class="fe mv mw mx mm b">case</code>语句或块的数量。</p><p id="ffbb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">总数越高，代码就越复杂。</p><h1 id="35a8" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">结论</h1><p id="8a27" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">降低复杂性会让我们的生活更轻松。</p><p id="853e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以通过计算一组代码的分支和直线代码来做到这一点。</p><p id="1c19" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">此外，嵌套对我们的大脑来说总是很难，所以我们可以将它们转移到函数或类中。</p><p id="5b5a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以先写大括号，这样在定义函数的时候就不会忘记了。</p></div></div>    
</body>
</html>