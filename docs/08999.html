<html>
<head>
<title>Object Detection and Bounding Boxes with Cvlib</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Cvlib实现物体检测和包围盒</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/object-detection-and-bounding-boxes-with-cvlib-6340ebefd3eb?source=collection_archive---------11-----------------------#2021-06-27">https://levelup.gitconnected.com/object-detection-and-bounding-boxes-with-cvlib-6340ebefd3eb?source=collection_archive---------11-----------------------#2021-06-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/d272fea069e09399178e373d6663a0e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*DGtcIBF4yFt0evh0.jpg"/></div></div></figure><div class=""/><div class="is it gp gr iu kb"><a href="https://jorgepit-14189.medium.com/membership" rel="noopener follow" target="_blank"><div class="kc ab fo"><div class="kd ab ke cl cj kf"><h2 class="bd jf gy z fp kg fr fs kh fu fw jd bi translated">用我的推荐链接加入媒体-乔治皮皮斯</h2><div class="ki l"><h3 class="bd b gy z fp kg fr fs kh fu fw dk translated">阅读乔治·皮皮斯(以及媒体上成千上万的其他作家)的每一个故事。您的会员费直接支持…</h3></div><div class="kj l"><p class="bd b dl z fp kg fr fs kh fu fw dk translated">jorgepit-14189.medium.com</p></div></div><div class="kk l"><div class="kl l km kn ko kk kp ja kb"/></div></div></a></div><p id="fe95" class="pw-post-body-paragraph kq kr je ks b kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln im bi translated">Python中使用cvlib库的边界框对象检测示例</p><p id="a6ad" class="pw-post-body-paragraph kq kr je ks b kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln im bi translated">在这篇文章中，我们将使用<a class="ae lo" href="https://www.cvlib.net/" rel="noopener ugc nofollow" target="_blank"> cvlib </a>库为您提供一个使用Python中的边界框进行对象检测的示例，这是一个简单、高级、易于使用的Python开源计算机视觉库。</p><h1 id="0bea" class="lp lq je bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">如何安装cvlib库</h1><p id="3c4a" class="pw-post-body-paragraph kq kr je ks b kt mn kv kw kx mo kz la lb mp ld le lf mq lh li lj mr ll lm ln im bi translated">如果你已经安装了<code class="fe ms mt mu mv b">OpenCV</code>和<code class="fe ms mt mu mv b">Tensorflow</code>，你可以<code class="fe ms mt mu mv b">pip install cvlib</code>，否则，你可以pip安装如下:</p><pre class="mw mx my mz gt na mv nb nc aw nd bi"><span id="9e72" class="ne lq je mv b gy nf ng l nh ni">pip install opencv-python tensorflow</span><span id="8818" class="ne lq je mv b gy nj ng l nh ni">pip install cvlib</span></pre><h1 id="b95d" class="lp lq je bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">目标检测</h1><p id="63d1" class="pw-post-body-paragraph kq kr je ks b kt mn kv kw kx mo kz la lb mp ld le lf mq lh li lj mr ll lm ln im bi translated"><code class="fe ms mt mu mv b">cvlib</code>库有一个名为<code class="fe ms mt mu mv b">detect_common_objects()</code>的函数，返回检测到的标签、边界框坐标和检测到的对象的置信度得分。</p><p id="79ee" class="pw-post-body-paragraph kq kr je ks b kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln im bi translated">让我们创建一个函数，它将图像的文件名、预训练的模型作为输入，在我们的例子中，它将是YOLOv3和置信度，并将通过生成一个带有边界框的新图像来返回检测到的对象的标签。</p><pre class="mw mx my mz gt na mv nb nc aw nd bi"><span id="9ddb" class="ne lq je mv b gy nf ng l nh ni">import cv2<br/>import cvlib as cv<br/>from cvlib.object_detection import draw_bbox</span><span id="8314" class="ne lq je mv b gy nj ng l nh ni">def object_detection_with_bounding_boxes(filename, model="yolov3", confidence=0.2):</span><span id="d464" class="ne lq je mv b gy nj ng l nh ni"># Read the image into a numpy array<br/>    img = cv2.imread(filename)<br/>    <br/>    # Perform the object detection<br/>    bbox, label, conf = cv.detect_common_objects(img, confidence=confidence, model=model)<br/>    <br/>    # Print current image's filename<br/>    print(f"========================\nImage processed: {filename}\n")<br/>    <br/>    # Print detected objects with confidence level<br/>    for l, c in zip(label, conf):<br/>        print(f"Detected object: {l} with confidence level of {c}\n")<br/>    <br/>    # Create a new image that includes the bounding boxes<br/>    output_image = draw_bbox(img, bbox, label, conf)<br/>    <br/>    # Save the image in the directory images_with_boxes<br/>    cv2.imwrite(f'images_with_boxes/{filename}', output_image)<br/>    <br/>    # Display the image with bounding boxes<br/>    display(Image(f'images_with_boxes/{filename}'))</span></pre><p id="fd0f" class="pw-post-body-paragraph kq kr je ks b kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln im bi translated">让我们试试下面这张从Unsplash获得的<a class="ae lo" href="https://images.unsplash.com/photo-1542744173-8e7e53415bb0?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&amp;ixlib=rb-1.2.1&amp;auto=format&amp;fit=crop&amp;w=1950&amp;q=80" rel="noopener ugc nofollow" target="_blank">图片，我们已经将它保存在我们的工作目录下，命名为</a> <code class="fe ms mt mu mv b"><a class="ae lo" href="https://images.unsplash.com/photo-1542744173-8e7e53415bb0?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&amp;ixlib=rb-1.2.1&amp;auto=format&amp;fit=crop&amp;w=1950&amp;q=80" rel="noopener ugc nofollow" target="_blank">my_image.jpg</a></code> <a class="ae lo" href="https://images.unsplash.com/photo-1542744173-8e7e53415bb0?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&amp;ixlib=rb-1.2.1&amp;auto=format&amp;fit=crop&amp;w=1950&amp;q=80" rel="noopener ugc nofollow" target="_blank">。</a></p><figure class="mw mx my mz gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi nk"><img src="../Images/97288cebd9dc72323489a8e4bffe8c9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7AZ3kx3uMQfWtstm"/></div></div><figcaption class="nl nm gj gh gi nn no bd b be z dk translated"><a class="ae lo" href="https://images.unsplash.com/photo-1542744173-8e7e53415bb0?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&amp;ixlib=rb-1.2.1&amp;auto=format&amp;fit=crop&amp;w=1950&amp;q=80" rel="noopener ugc nofollow" target="_blank">去飞溅</a></figcaption></figure><pre class="mw mx my mz gt na mv nb nc aw nd bi"><span id="8055" class="ne lq je mv b gy nf ng l nh ni">object_detection_with_bounding_boxes("my_image.jpg")</span></pre><p id="f977" class="pw-post-body-paragraph kq kr je ks b kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln im bi translated"><strong class="ks jf">输出:</strong></p><pre class="mw mx my mz gt na mv nb nc aw nd bi"><span id="4c91" class="ne lq je mv b gy nf ng l nh ni">========================<br/>Image processed: my_image.jpg</span><span id="c7c2" class="ne lq je mv b gy nj ng l nh ni">Detected object: laptop with confidence level of 0.7656973004341125</span><span id="135d" class="ne lq je mv b gy nj ng l nh ni">Detected object: person with confidence level of 0.6280566453933716</span><span id="e63d" class="ne lq je mv b gy nj ng l nh ni">Detected object: person with confidence level of 0.5862714052200317</span><span id="8911" class="ne lq je mv b gy nj ng l nh ni">Detected object: laptop with confidence level of 0.5759404301643372</span><span id="b38f" class="ne lq je mv b gy nj ng l nh ni">Detected object: person with confidence level of 0.5740895867347717</span><span id="ee04" class="ne lq je mv b gy nj ng l nh ni">Detected object: person with confidence level of 0.4282369017601013</span><span id="b448" class="ne lq je mv b gy nj ng l nh ni">Detected object: person with confidence level of 0.3663652539253235</span><span id="b6de" class="ne lq je mv b gy nj ng l nh ni">Detected object: laptop with confidence level of 0.36039528250694275</span><span id="2cf4" class="ne lq je mv b gy nj ng l nh ni">Detected object: chair with confidence level of 0.339595764875412</span><span id="9a21" class="ne lq je mv b gy nj ng l nh ni">Detected object: tv with confidence level of 0.3152497410774231</span><span id="67bc" class="ne lq je mv b gy nj ng l nh ni">Detected object: chair with confidence level of 0.3094286322593689</span><span id="b5ab" class="ne lq je mv b gy nj ng l nh ni">Detected object: laptop with confidence level of 0.26004040241241455</span><span id="90fc" class="ne lq je mv b gy nj ng l nh ni">Detected object: keyboard with confidence level of 0.22592854499816895</span></pre><p id="07ff" class="pw-post-body-paragraph kq kr je ks b kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln im bi translated"><strong class="ks jf">和输出图像:</strong></p><figure class="mw mx my mz gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/551c0558282bbefc91b2bd239b82f706.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*J_RkCwQyzCKpECEL.jpg"/></div></div></figure><h1 id="509b" class="lp lq je bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">讨论</h1><p id="7409" class="pw-post-body-paragraph kq kr je ks b kt mn kv kw kx mo kz la lb mp ld le lf mq lh li lj mr ll lm ln im bi translated">正如我们所见，我们设法得到了大部分物品，如笔记本电脑、个人、键盘、椅子和电视。如果我们希望通过返回更多检测到的对象来降低算法的严格性，但是假阳性情况的概率更高，我们可以降低置信度。</p><p id="552c" class="pw-post-body-paragraph kq kr je ks b kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln im bi translated">如果您喜欢这篇文章，您可能会对其他相关教程感兴趣:</p><ul class=""><li id="0450" class="np nq je ks b kt ku kx ky lb nr lf ns lj nt ln nu nv nw nx bi translated"><a class="ae lo" href="https://predictivehacks.com/object-detection-with-rekognition-on-images/" rel="noopener ugc nofollow" target="_blank">带识别的物体检测</a></li><li id="25a1" class="np nq je ks b kt ny kx nz lb oa lf ob lj oc ln nu nv nw nx bi translated"><a class="ae lo" href="https://predictivehacks.com/example-of-object-detection-in-tensorflow/" rel="noopener ugc nofollow" target="_blank">用Tensorflow进行物体检测</a></li><li id="a4b4" class="np nq je ks b kt ny kx nz lb oa lf ob lj oc ln nu nv nw nx bi translated"><a class="ae lo" href="https://predictivehacks.com/object-detection-with-yolo/" rel="noopener ugc nofollow" target="_blank">图像和视频中的物体检测</a></li><li id="dfb0" class="np nq je ks b kt ny kx nz lb oa lf ob lj oc ln nu nv nw nx bi translated"><a class="ae lo" href="https://predictivehacks.com/computer-vision-face-detection-in-opencv/" rel="noopener ugc nofollow" target="_blank">OpenCV中的人脸检测</a></li></ul><h1 id="0d5b" class="lp lq je bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">参考资料:</h1><p id="b534" class="pw-post-body-paragraph kq kr je ks b kt mn kv kw kx mo kz la lb mp ld le lf mq lh li lj mr ll lm ln im bi translated">[1] Coursera: <a class="ae lo" href="https://www.coursera.org/learn/introduction-to-machine-learning-in-production/supplement/6lQlM/ungraded-lab-deploying-a-deep-learning-model" rel="noopener ugc nofollow" target="_blank">生产中的机器学习介绍</a></p></div><div class="ab cl od oe hx of" role="separator"><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi"/></div><div class="im in io ip iq"><p id="9d70" class="pw-post-body-paragraph kq kr je ks b kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln im bi translated">最初发布于<a class="ae lo" href="https://predictivehacks.com/object-detection-and-bounding-boxes-with-cvlib/" rel="noopener ugc nofollow" target="_blank">预测黑客</a></p></div></div>    
</body>
</html>