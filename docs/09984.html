<html>
<head>
<title>Performant Trees for Websites with MySQL — Nested Sets and Alias Paths</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">MySQL网站的性能树——嵌套集合和别名路径</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/nested-sets-and-alias-paths-performant-trees-for-websites-with-mysql-d7ad4e4a8b4?source=collection_archive---------12-----------------------#2021-10-11">https://levelup.gitconnected.com/nested-sets-and-alias-paths-performant-trees-for-websites-with-mysql-d7ad4e4a8b4?source=collection_archive---------12-----------------------#2021-10-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="1e37" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">一个简单的教程，展示了如何使用嵌套集合模型在MySQL中映射性能树结构。</h2></div><p id="510c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我用的是网站的嵌套集模型，不是论坛或者评论软件。有足够多的文章展示了在论坛环境中嵌套集合是多么复杂。由于网站通常对其结构的数据库有更多的读写权限，这在这里不是一个问题。</p><h1 id="7f0f" class="lb lc iq bd ld le lf lg lh li lj lk ll jw lm jx ln jz lo ka lp kc lq kd lr ls bi translated">出发点</h1><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi lt"><img src="../Images/21969773ba74a669d54e4e74e7c8d53c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZhhSPYA9Bw0_X5HnajkWPw.png"/></div></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated">起点是一个简单的树形结构。</figcaption></figure><p id="561a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了说明原理，我拿一个很小的网站的结构来说:<em class="mj">【项目】</em>是根，<em class="mj">【开始】</em><em class="mj">【公司】</em><em class="mj">【联系人】</em>是深度1的分支。<em class="mj">【公司】</em>还有支行<em class="mj">【服务】</em><em class="mj">【管理】</em>。</p><h1 id="b1d6" class="lb lc iq bd ld le lf lg lh li lj lk ll jw lm jx ln jz lo ka lp kc lq kd lr ls bi translated">这个概念</h1><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi lt"><img src="../Images/d5bc1dcb6a74856ebfe2461ccf7ed710.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VYB1Z5ENqSKpMeXg2e_7FA.png"/></div></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated">嵌套集合背后的概念。</figcaption></figure><p id="4af5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在嵌套集合中，一棵树的每个分支都有两个值:<em class="mj">“左”</em>和<em class="mj">“右”</em>。根的左值总是1。</p><p id="0ee8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，left值可用于读取排序顺序。</p><pre class="lu lv lw lx gt mk ml mm mn aw mo bi"><span id="a650" class="mp lc iq ml b gy mq mr l ms mt">1  Project<br/>2  Start<br/>4  Compamy<br/>5  Services<br/>7  Management<br/>10 Contact</span></pre><p id="c05e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一个分支的子分支数可以用下面的公式(“右”-左)-1)/2来计算。以<em class="mj">【公司】</em>分公司为例:</p><pre class="lu lv lw lx gt mk ml mm mn aw mo bi"><span id="86ce" class="mp lc iq ml b gy mq mr l ms mt">(9 - 4 - 1) = 2</span></pre><p id="bcf5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">更多创建、编辑和删除分支的例子可以在网上找到。我在下面的文章里附上了几个链接。</p><h1 id="1a91" class="lb lc iq bd ld le lf lg lh li lj lk ll jw lm jx ln jz lo ka lp kc lq kd lr ls bi translated">用MySQL阅读会说话的网址</h1><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/2b18f20a0011f12400a3bb806e6eea75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1100/format:webp/1*n0Ln62dPu_3esdT0srTJgQ.jpeg"/></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated">phpmyadmin中的示例表数据。</figcaption></figure><p id="3439" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我已经在MySQL中构建了上面的例子。表格<em class="mj">“页面”</em>有以下几列:<em class="mj">“id”</em><em class="mj">“标题”</em><em class="mj">“别名”</em><em class="mj">“lft”</em><em class="mj">“rgt”</em>。</p><p id="a083" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">字段<em class="mj">“别名”</em>现在可用于通过子选择读出相应页面的路径:</p><figure class="lu lv lw lx gt ly"><div class="bz fp l di"><div class="mv mw l"/></div></figure><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi mx"><img src="../Images/7f86d7a681dc9923a80c818298691818.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q7DbQwdAhacPPUIqX4K3Xw.jpeg"/></div></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated">带有路径子选择的SQL查询的结果。</figcaption></figure><h1 id="5cae" class="lb lc iq bd ld le lf lg lh li lj lk ll jw lm jx ln jz lo ka lp kc lq kd lr ls bi translated">使用子选择读取分支深度</h1><p id="0d3f" class="pw-post-body-paragraph kf kg iq kh b ki my jr kk kl mz ju kn ko na kq kr ks nb ku kv kw nc ky kz la ij bi translated">使用另一个子选择，分支的深度也可以读取如下:</p><figure class="lu lv lw lx gt ly"><div class="bz fp l di"><div class="mv mw l"/></div></figure><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi nd"><img src="../Images/dc6080546226215cc2ad75f9ed7580ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wk8WPg-TAg_PhLNbYqeehA.jpeg"/></div></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated">有深度的结果。</figcaption></figure><h1 id="41fc" class="lb lc iq bd ld le lf lg lh li lj lk ll jw lm jx ln jz lo ka lp kc lq kd lr ls bi translated">带有别名路径和分支深度的完整MySQL查询。</h1><p id="ab20" class="pw-post-body-paragraph kf kg iq kh b ki my jr kk kl mz ju kn ko na kq kr ks nb ku kv kw nc ky kz la ij bi translated">如果你现在把两者结合起来，你就获得了构建一个网站结构所需的所有价值。</p><figure class="lu lv lw lx gt ly"><div class="bz fp l di"><div class="mv mw l"/></div></figure><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi ne"><img src="../Images/b34c953f6c6c6dee4d9f2ae985d65df0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OzHl3uChZm-Vxfm2akEeVA.jpeg"/></div></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated">路径和深度的结果。</figcaption></figure><p id="ab6f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">好处:</strong>表格可以很容易地用一个栏目<em class="mj">【语言】</em>来扩展，实现一个多语言的网站。每种语言都需要一个单独的根页面。</p><p id="75fb" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">方便:</strong>通过在查询末尾添加一个简短的where子句，可以从结果中删除根页面:</p><pre class="lu lv lw lx gt mk ml mm mn aw mo bi"><span id="cdd7" class="mp lc iq ml b gy mq mr l ms mt">...<br/>FROM pages<br/>WHERE pages.lft!=1<br/>...</span></pre><p id="3706" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在过去的几年里，我用这种方法做得非常好，并且用多种语言和超过50个子页面实现了各种项目。即使在小型网站上，性能也非常好。</p><p id="a08c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果有更好更有效的方法来用MySQL显示网站树，请告诉我！我期待你对这个话题的反馈！</p></div></div>    
</body>
</html>