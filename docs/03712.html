<html>
<head>
<title>Building a Simple Character Counter in React.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在React.js中构建简单的字符计数器</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/simple-character-counter-in-react-js-f988c696c2fb?source=collection_archive---------4-----------------------#2020-05-24">https://levelup.gitconnected.com/simple-character-counter-in-react-js-f988c696c2fb?source=collection_archive---------4-----------------------#2020-05-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/c914f9a1d2bdd3e565f371164f75fb61.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UUTcK-0zEh1Rnrdy4UITaA.jpeg"/></div></div></figure><p id="d914" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">今天，让我们限制用户可以在输入字段中输入的字符！</p><p id="638c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu">注意</strong>:如果你不知道如何控制你的表单或者为什么我们应该在React.js中这样做，我推荐你看看我关于如何做的简短博文<a class="ae kz" rel="noopener ugc nofollow" target="_blank" href="/building-a-simple-controlled-form-in-react-js-b7e28236bf2e">这里</a>！</p><p id="7ef6" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">以下是我们正在构建的功能的gif图:</p><figure class="lb lc ld le gt ju gh gi paragraph-image"><div class="gh gi la"><img src="../Images/0b8280bcb20f91b830a6bedeaa5e3c02.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*_NM07Kq56mE1GiRbCMkwnA.gif"/></div></figure><p id="6358" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">弹出模式是使用Sweet Alert npm包创建的。你可以在这里查看<a class="ae kz" href="https://sweetalert2.github.io/" rel="noopener ugc nofollow" target="_blank"/>！</p><p id="256f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如您所见，这里发生了许多事情:</p><ol class=""><li id="95a4" class="lf lg it kd b ke kf ki kj km lh kq li ku lj ky lk ll lm ln bi translated">当输入字段中没有字符时，提交按钮被禁用。</li><li id="83bb" class="lf lg it kd b ke lo ki lp km lq kq lr ku ls ky lk ll lm ln bi translated">应用程序跟踪用户可以提交的字符的特定限制，并传递剩余的字符数(限制和当前字符数之间的差异)</li><li id="d700" class="lf lg it kd b ke lo ki lp km lq kq lr ku ls ky lk ll lm ln bi translated">如果超过了限制，应用程序在提交时会抛出一个错误。如果字符数没有超过限制，则表单提交成功。</li></ol><p id="3eeb" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在让我们来看看代码。顺便说一下，你可以在这里找到这个公共GitHub库<a class="ae kz" href="https://github.com/jonathanbrierre/Character-Counter" rel="noopener ugc nofollow" target="_blank">的链接。</a></p><p id="d143" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">下面是我的App.js文件，一切都在这里发生。</p><pre class="lb lc ld le gt lt lu lv lw aw lx bi"><span id="9d38" class="ly lz it lu b gy ma mb l mc md">import React from 'react';</span><span id="968a" class="ly lz it lu b gy me mb l mc md">import Swal from 'sweetalert2'</span><span id="df3e" class="ly lz it lu b gy me mb l mc md">class App extends React.Component {<br/></span><span id="b085" class="ly lz it lu b gy me mb l mc md">  state = {</span><span id="8530" class="ly lz it lu b gy me mb l mc md">    content: '',</span><span id="0389" class="ly lz it lu b gy me mb l mc md">    charLimit: 10</span><span id="70fc" class="ly lz it lu b gy me mb l mc md">  }<br/></span><span id="9ded" class="ly lz it lu b gy me mb l mc md">  handleOnChange = (e) =&gt; {</span><span id="f686" class="ly lz it lu b gy me mb l mc md">    this.setState({[e.target.name]:e.target.value})</span><span id="7429" class="ly lz it lu b gy me mb l mc md">  }</span><span id="b771" class="ly lz it lu b gy me mb l mc md">  handleOnSubmit = (e) =&gt; {</span><span id="d7a9" class="ly lz it lu b gy me mb l mc md">    e.preventDefault()</span><span id="28a5" class="ly lz it lu b gy me mb l mc md">    if(this.state.content.length &lt;= this.state.charLimit){</span><span id="972a" class="ly lz it lu b gy me mb l mc md">      Swal.fire({icon: 'success', text: 'Successful Submission'})</span><span id="ed53" class="ly lz it lu b gy me mb l mc md">    }else{</span><span id="0ad5" class="ly lz it lu b gy me mb l mc md">      Swal.fire({icon: 'error', text: 'Character Limit Exceeded'})</span><span id="b2ec" class="ly lz it lu b gy me mb l mc md">    }</span><span id="a9a3" class="ly lz it lu b gy me mb l mc md">  }</span><span id="0990" class="ly lz it lu b gy me mb l mc md">  render(){</span><span id="0e42" class="ly lz it lu b gy me mb l mc md">    return(</span><span id="15f5" class="ly lz it lu b gy me mb l mc md">      &lt;div style ={{textAlign: "center", height: '100vh'}}&gt;</span><span id="6536" class="ly lz it lu b gy me mb l mc md">        &lt;form onSubmit = {this.handleOnSubmit} style={{marginTop: '50vh'}}&gt;</span><span id="f567" class="ly lz it lu b gy me mb l mc md">          &lt;input type = 'text' name = 'content' value = {this.state.content} onChange = {this.handleOnChange}/&gt;</span><span id="2e33" class="ly lz it lu b gy me mb l mc md">          &lt;input type = 'submit' disabled ={this.state.content.length &gt; 0 ? false:true}/&gt;</span><span id="484c" class="ly lz it lu b gy me mb l mc md">          &lt;h2&gt;Remaining Characters: {this.state.charLimit - this.state.content.length}&lt;/h2&gt;</span><span id="5ec9" class="ly lz it lu b gy me mb l mc md">        &lt;/form&gt;</span><span id="a493" class="ly lz it lu b gy me mb l mc md">      &lt;/div&gt;</span><span id="bb84" class="ly lz it lu b gy me mb l mc md">    );</span><span id="1917" class="ly lz it lu b gy me mb l mc md">  }</span><span id="0ee9" class="ly lz it lu b gy me mb l mc md">}</span><span id="44f8" class="ly lz it lu b gy me mb l mc md">export default App;</span></pre><p id="3f7a" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">让我们打破这一点！</p><p id="68fb" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu"> App状态</strong>:</p><figure class="lb lc ld le gt ju gh gi paragraph-image"><div class="gh gi mf"><img src="../Images/c7a00ed0e1cb5fb61a82d2bb59b0421e.png" data-original-src="https://miro.medium.com/v2/resize:fit:432/format:webp/1*U7RxOKqvOeR201iwBlYkDg.png"/></div></figure><p id="edb8" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">包含输入字段内容的键，以允许控制表单。它还包含常量“charLimit”，记录用户可以输入的最大字符数。</p><p id="d867" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu"> handleOnChange功能</strong>:</p><figure class="lb lc ld le gt ju gh gi paragraph-image"><div class="gh gi mg"><img src="../Images/c10fd75bcd2ca08fabde944c8a43444f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1212/format:webp/1*tQab6dTNUaWb7nOmeSWafg.png"/></div></figure><p id="06d8" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">允许控制表单。同样，如果你在理解这个受控表单的概念上有困难，<a class="ae kz" rel="noopener ugc nofollow" target="_blank" href="/building-a-simple-controlled-form-in-react-js-b7e28236bf2e">这里有一个链接</a>指向我的帖子！</p><p id="2032" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu"> handleOnSubmit功能:</strong></p><figure class="lb lc ld le gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mh"><img src="../Images/43b1cffc8a70080e41f0de365c2d5ae2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-GZepEsBGIswcK1tvCwXzw.png"/></div></div></figure><ol class=""><li id="ed90" class="lf lg it kd b ke kf ki kj km lh kq li ku lj ky lk ll lm ln bi translated">e.preventDefault()防止应用程序在提交时刷新。</li><li id="e73e" class="lf lg it kd b ke lo ki lp km lq kq lr ku ls ky lk ll lm ln bi translated">这里有一个条件语句，它从我们的受控状态中导出值。提交表单时，会检查内容的长度是大于、等于还是小于预定义的限制。</li></ol><p id="bceb" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu"> JSX: </strong></p><figure class="lb lc ld le gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mi"><img src="../Images/ce1350cd197eb574666169bfded6cb9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BlIMVP3CKh_fSpDwDVy_Jw.png"/></div></div></figure><ol class=""><li id="6103" class="lf lg it kd b ke kf ki kj km lh kq li ku lj ky lk ll lm ln bi translated">在我们的表单中，有一个受控的文本输入字段和一个用于提交按钮的输入标签。对于提交按钮，我们添加了指向三元语句的禁用属性(this.state.content.length &gt; 0？假:真)。如果你不熟悉JavaScript的三元运算符，你可以在这里找到关于它的更多信息<a class="ae kz" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Conditional_Operator" rel="noopener ugc nofollow" target="_blank">！这将检查文本字段中是否有字符。如果有，那么三元组返回false，从而导致disabled属性为false。如果字段中没有任何内容，那么三元组将返回true，从而导致按钮被禁用。</a></li><li id="fd1c" class="lf lg it kd b ke lo ki lp km lq kq lr ku ls ky lk ll lm ln bi translated">在submit按钮元素下面，我们通过采用预先确定的字符限制并减去状态和输入字段中不断变化的文本长度来动态显示剩余的字符。</li></ol><p id="8c8f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在你知道了！您现在可以控制用户可以在其表单中键入/提交多少内容，这是messenger和社交媒体应用程序中常见的功能。</p><h1 id="96c2" class="mj lz it bd mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf bi translated">资源:</h1><div class="ng nh gp gr ni nj"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Conditional_Operator" rel="noopener  ugc nofollow" target="_blank"><div class="nk ab fo"><div class="nl ab nm cl cj nn"><h2 class="bd iu gy z fp no fr fs np fu fw is bi translated">条件(三元)运算符</h2><div class="nq l"><h3 class="bd b gy z fp no fr fs np fu fw dk translated">条件(三元)操作符是唯一接受三个操作数的JavaScript操作符:一个条件后跟一个…</h3></div><div class="nr l"><p class="bd b dl z fp no fr fs np fu fw dk translated">developer.mozilla.org</p></div></div><div class="ns l"><div class="nt l nu nv nw ns nx jz nj"/></div></div></a></div><div class="ng nh gp gr ni nj"><a href="https://github.com/jonathanbrierre/Character-Counter" rel="noopener  ugc nofollow" target="_blank"><div class="nk ab fo"><div class="nl ab nm cl cj nn"><h2 class="bd iu gy z fp no fr fs np fu fw is bi translated">jonathanbrierre/字符计数器</h2><div class="nq l"><h3 class="bd b gy z fp no fr fs np fu fw dk translated">这个项目是用Create React App引导的。在项目目录中，您可以运行:在…中运行应用程序</h3></div><div class="nr l"><p class="bd b dl z fp no fr fs np fu fw dk translated">github.com</p></div></div><div class="ns l"><div class="ny l nu nv nw ns nx jz nj"/></div></div></a></div><div class="ng nh gp gr ni nj"><a rel="noopener  ugc nofollow" target="_blank" href="/building-a-simple-controlled-form-in-react-js-b7e28236bf2e"><div class="nk ab fo"><div class="nl ab nm cl cj nn"><h2 class="bd iu gy z fp no fr fs np fu fw is bi translated">在React.js中构建简单的控件表单</h2><div class="nq l"><h3 class="bd b gy z fp no fr fs np fu fw dk translated">今天，我们将在React.js中构建一个简单的受控表单。</h3></div><div class="nr l"><p class="bd b dl z fp no fr fs np fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="ns l"><div class="nz l nu nv nw ns nx jz nj"/></div></div></a></div></div></div>    
</body>
</html>