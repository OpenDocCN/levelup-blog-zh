<html>
<head>
<title>Create a React Website with an Express backend</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创建一个快速后端反应网站</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/create-a-react-app-with-an-express-backend-24740b0a6f5e?source=collection_archive---------1-----------------------#2020-07-06">https://levelup.gitconnected.com/create-a-react-app-with-an-express-backend-24740b0a6f5e?source=collection_archive---------1-----------------------#2020-07-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/2ef97b111b4a34e26c3120f34012c276.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*600bP6rXZkuc_Sna"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">乔安娜·科辛斯卡在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="d3ef" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">开始一个新项目可能会很困难，有许多微小但至关重要的步骤。我希望能帮助你做一些非常基本的脚手架，让你尽快开始你的网站。我们将利用create-react-app，稍微调整一下，给我们一个可以使用的后端服务器。</p><h2 id="ae46" class="le lf it bd lg lh li dn lj lk ll dp lm kr ln lo lp kv lq lr ls kz lt lu lv lw bi translated">创建目录</h2><p id="289d" class="pw-post-body-paragraph kg kh it ki b kj lx kl km kn ly kp kq kr lz kt ku kv ma kx ky kz mb lb lc ld im bi translated">首先，创建一个新目录，并通过运行以下命令输入它。</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="f2cf" class="le lf it mh b gy ml mm l mn mo">mkdir example<br/>cd example</span></pre><p id="5d1a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后，运行这个命令，用一些基本信息初始化您的目录(去掉-y将允许您手动输入这些信息):</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="95f4" class="le lf it mh b gy ml mm l mn mo">npm init -y</span></pre></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h2 id="f5c6" class="le lf it bd lg lh li dn lj lk ll dp lm kr ln lo lp kv lq lr ls kz lt lu lv lw bi translated">创建后端</h2><p id="97c5" class="pw-post-body-paragraph kg kh it ki b kj lx kl km kn ly kp kq kr lz kt ku kv ma kx ky kz mb lb lc ld im bi translated">接下来，创建一个名为server的文件夹，并在其中创建一个名为index.js的文件..，但这里有一些快捷的命令来代替:</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="dfb5" class="le lf it mh b gy ml mm l mn mo">mkdir server<br/>cd server<br/>touch index.js<br/>cd ..</span></pre><p id="e4a1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在我们有了一个index.js，让我们安装Express:</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="9bee" class="le lf it mh b gy ml mm l mn mo">npm install express</span></pre><p id="b9f2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在index.js中，像这样填充它:</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="2dca" class="le lf it mh b gy ml mm l mn mo">const express = require('express');</span><span id="6396" class="le lf it mh b gy mw mm l mn mo">const path = require('path');</span><span id="d049" class="le lf it mh b gy mw mm l mn mo">const app = express();<br/>// a test route to make sure we can reach the backend<br/>//this would normally go in a routes file</span><span id="bc9a" class="le lf it mh b gy mw mm l mn mo">app.get('/test', (req, res) =&gt; {</span><span id="8b8b" class="le lf it mh b gy mw mm l mn mo">res.send('Welcome to the backend!')</span><span id="3466" class="le lf it mh b gy mw mm l mn mo">})</span><span id="0490" class="le lf it mh b gy mw mm l mn mo">//Set the port that you want the server to run on</span><span id="14f8" class="le lf it mh b gy mw mm l mn mo">const port = process.env.PORT || 8080;</span><span id="2f2f" class="le lf it mh b gy mw mm l mn mo">app.listen(port);</span><span id="5023" class="le lf it mh b gy mw mm l mn mo">console.log('App is listening on port ' + port);</span></pre><p id="4102" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们希望能够用一个简单的命令运行我们的服务器，所以进入package.json脚本并添加这个启动脚本:</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="330d" class="le lf it mh b gy ml mm l mn mo">"scripts": {<br/>    "server": "node server/index.js"<br/>  },</span></pre><p id="eb75" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">此时，您应该能够通过键入<code class="fe mx my mz mh b">npm server</code>来运行服务器，它应该显示服务器正在监听指定的端口。前往<code class="fe mx my mz mh b">localhost:8080/test</code>查看我们的“欢迎来到后端”消息。现在让我们做前端。</p></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h2 id="4466" class="le lf it bd lg lh li dn lj lk ll dp lm kr ln lo lp kv lq lr ls kz lt lu lv lw bi translated">创建反应前端</h2><p id="d6ab" class="pw-post-body-paragraph kg kh it ki b kj lx kl km kn ly kp kq kr lz kt ku kv ma kx ky kz mb lb lc ld im bi translated">使用create-react-app的文档非常简单明了。一行代码将为我们提供开始工作所需的一切:</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="b07b" class="le lf it mh b gy ml mm l mn mo">npx create-react-app client</span></pre><p id="e262" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mx my mz mh b">client</code>是我们希望react应用程序创建的位置的名称。因为我们希望我们的后端和前端分开，所以我们在网站目录(示例)中的一个单独的文件夹(客户端)中使用了<code class="fe mx my mz mh b">create-react-app</code>。</p><p id="eb12" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">注意有<a class="ae kf" href="https://www.npmjs.com/search?q=cra-template-*" rel="noopener ugc nofollow" target="_blank">模板</a>可用于create-react-app，你可以通过简单地运行<code class="fe mx my mz mh b">npx create-react-app &lt;folder-name&gt; &lt;template-name&gt;</code>来使用它们</p><p id="f227" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">此时，您的文件树应该如下所示:</p><figure class="mc md me mf gt ju gh gi paragraph-image"><div class="gh gi na"><img src="../Images/f29830ca1e290d1ef7fc0937574c5ddf.png" data-original-src="https://miro.medium.com/v2/resize:fit:520/format:webp/1*6JCB6m6JoNWZcUGOQekBPg.png"/></div></figure><h2 id="0704" class="le lf it bd lg lh li dn lj lk ll dp lm kr ln lo lp kv lq lr ls kz lt lu lv lw bi translated">将两者联系起来</h2><p id="f018" class="pw-post-body-paragraph kg kh it ki b kj lx kl km kn ly kp kq kr lz kt ku kv ma kx ky kz mb lb lc ld im bi translated">我们需要做的最后一件事是确保我们的前端和后端可以通信。开发服务器运行在localhost:3000(默认)上，我们的后端服务器运行在localhost:8080上。因为它们是不同的服务器，所以发送类似于<code class="fe mx my mz mh b">axios.get('/test')</code>的请求会将请求发送到localhost:3000/test，而不是localhost:8080/test。因此，进入<strong class="ki iu">客户端/包. json </strong>并添加一个代理:</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="35e1" class="le lf it mh b gy ml mm l mn mo">"proxy": "http://localhost:8080",</span></pre><p id="5fe7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这个代理将告诉React任何对localhost:3000的未知请求都应该发送到localhost:8080。现在，我们可以很容易地从前端向服务器发出请求。</p><p id="e096" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了测试这一点，我们可以在App.js中添加一个带有自定义功能的按钮:</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="c637" class="le lf it mh b gy ml mm l mn mo">&lt;button onClick={hitBackend}&gt;Send request&lt;/button&gt;</span></pre><p id="8522" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这是它的功能:</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="1dcd" class="le lf it mh b gy ml mm l mn mo">const hitBackend = () =&gt; {</span><span id="173f" class="le lf it mh b gy mw mm l mn mo">axios.get('/test')</span><span id="3ee1" class="le lf it mh b gy mw mm l mn mo">.then((response) =&gt; {</span><span id="9d64" class="le lf it mh b gy mw mm l mn mo">console.log(response.data)</span><span id="dcff" class="le lf it mh b gy mw mm l mn mo">})</span><span id="3bee" class="le lf it mh b gy mw mm l mn mo">}</span></pre><p id="04e6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，单击该按钮将显示一个控制台日志“欢迎来到后端”，因此我们知道我们正在访问我们的服务器。</p></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h2 id="5913" class="le lf it bd lg lh li dn lj lk ll dp lm kr ln lo lp kv lq lr ls kz lt lu lv lw bi translated">生活质量增加</h2><p id="a972" class="pw-post-body-paragraph kg kh it ki b kj lx kl km kn ly kp kq kr lz kt ku kv ma kx ky kz mb lb lc ld im bi translated">您会注意到在这个设置中有两个package.json文件。这可能会变得乏味和混乱，因为您必须切换目录来完成每个<code class="fe mx my mz mh b">npm install</code>。所以我建议在<strong class="ki iu"> root package.json </strong>中创建几个脚本，这样您就可以从那里做任何事情，而不必更改目录。</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="c53e" class="le lf it mh b gy ml mm l mn mo">"scripts": {<br/>"server": "node server/index.ts",<br/>"client": "cd client &amp;&amp; npm run start",<br/>"build:client": "cd client &amp;&amp; npm run build",<br/>"iall": "npm i &amp;&amp; cd client &amp;&amp; npm i",<br/>"startboth": "npm run server &amp; npm run client"</span><span id="d68c" class="le lf it mh b gy mw mm l mn mo">},</span></pre><p id="aee1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在你可以不用改变目录就可以启动和构建客户端，运行<code class="fe mx my mz mh b">iall</code>将会安装在任何地方，所以你不会忘记在两个地方都这样做。<code class="fe mx my mz mh b">startboth</code>脚本将启动服务器并在后台运行它(因为&amp;)，然后启动客户端。</p></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><p id="f5a9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">你可能还想安装一个linter，比如eslint。您需要在<strong class="ki iu">根目录和客户端</strong>中完成这些步骤:</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="3e4f" class="le lf it mh b gy ml mm l mn mo">npm install -D  eslint</span></pre><p id="3634" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">-D将软件包作为开发人员依赖项安装，这意味着它将在您构建它时被清除，从而节省空间。接下来，运行</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="875e" class="le lf it mh b gy ml mm l mn mo">eslint --init</span></pre><p id="5164" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这将询问设置eslint配置文件的问题。问题很简单，以下是我对这个项目的偏好:</p><ul class=""><li id="dc52" class="nb nc it ki b kj kk kn ko kr nd kv ne kz nf ld ng nh ni nj bi translated"><strong class="ki iu">您希望如何使用ESLint？</strong>检查语法，发现问题，加强风格</li><li id="ff82" class="nb nc it ki b kj nk kn nl kr nm kv nn kz no ld ng nh ni nj bi translated"><strong class="ki iu">您的项目使用什么类型的模块？</strong> Javascript模块(导入/导出)</li><li id="8d74" class="nb nc it ki b kj nk kn nl kr nm kv nn kz no ld ng nh ni nj bi translated"><strong class="ki iu">你的项目使用哪个框架？</strong>做出反应</li><li id="9718" class="nb nc it ki b kj nk kn nl kr nm kv nn kz no ld ng nh ni nj bi translated">你的代码在哪里运行？两者皆有</li><li id="1b9e" class="nb nc it ki b kj nk kn nl kr nm kv nn kz no ld ng nh ni nj bi translated">你希望如何为你的项目定义一种风格？空中食宿</li><li id="ae12" class="nb nc it ki b kj nk kn nl kr nm kv nn kz no ld ng nh ni nj bi translated">你希望你的配置文件是什么格式？ JSON</li></ul><p id="6e76" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">运行之后，您应该会看到两个. eslintrc.json文件，如果您在文件中犯了错误，它们会用红色下划线标出。</p></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><p id="adf4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">至此，我们已经做好了一切准备，所以我们可以开始编码了。在删除create-react-app附带的一些文件后，我将把这个例子保存为一个模板，这样当您需要启动另一个react应用程序时，就可以快速克隆它。这样你就不会每次都花时间去创建一个新的应用程序。我希望本指南对您有所帮助，并为您节省了一些时间。</p></div></div>    
</body>
</html>