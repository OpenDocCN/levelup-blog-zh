<html>
<head>
<title>Method Chaining like LINQ with Fluent Interface Pattern</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">像LINQ那样用流畅的接口模式链接方法</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/method-chaining-with-fluent-interface-pattern-d01e75d4bb3d?source=collection_archive---------1-----------------------#2019-09-29">https://levelup.gitconnected.com/method-chaining-with-fluent-interface-pattern-d01e75d4bb3d?source=collection_archive---------1-----------------------#2019-09-29</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="5235" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu"> <em class="ko">注</em> </strong> <em class="ko">:这是我第一篇英文文章(</em> <a class="ae kp" href="https://medium.com/bili%C5%9Fim-hareketi/fluent-interface-pattern-ve-ger%C3%A7ek-hayat-%C3%B6rne%C4%9Fi-abd0f72a854f" rel="noopener"> <em class="ko">土耳其版</em> </a> <em class="ko">)。因此，请原谅我所犯的错误。</em></p><p id="cbdf" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">如果你确实没有中级会员，你可以使用</strong> <a class="ae kp" href="https://mhkoca.medium.com/method-chaining-with-fluent-interface-pattern-d01e75d4bb3d?sk=dd73c82a140662b01dceaa7149d46d72" rel="noopener"> <strong class="js iu">的好友链接</strong> </a> <strong class="js iu">来阅读这篇文章。</strong></p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi kq"><img src="../Images/6627cc1b8bf90e8052b8e32e1b36462b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*d6N6s-es5nkXbdJQ"/></div></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">照片由<a class="ae kp" href="https://unsplash.com/@jaimedantas?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">海梅·丹塔斯</a>在<a class="ae kp" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="c2a5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在本文中，您将获得一条关于Fluent接口模式的知识信息。这种模式为开发人员提供了编写链式方法的能力，因为这在<strong class="js iu">实体框架</strong>或<strong class="js iu"> LINQ </strong>上很常见。此外，我们只能让他们被称为我们想要的。比如第一种方法是A，然后B，然后C或者D，然后E，等等。</p><p id="3f4d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu"> <em class="ko">注</em> </strong> <em class="ko">:在我们的例子中，有一种方法链接。然而，</em> <a class="ae kp" href="https://martinfowler.com/bliki/FluentInterface.html" rel="noopener ugc nofollow" target="_blank"> <em class="ko"> Martin Fowler提到fluent接口时首先说:</em> </a> <em class="ko">“我还注意到一个常见的误解——许多人似乎将fluent接口等同于方法链接。当然，链接是流畅界面的常用技术，但真正的流畅远不止于此。”</em></p><p id="9253" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">挤奶过程可能是最有趣的例子，每当我们谈到连锁过程时，就会想到这个例子。</p><p id="5637" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们假设有一个农民:约翰。他每天晚上挤牛奶。这个过程有四个步骤:</p><ul class=""><li id="ad8c" class="lg lh it js b jt ju jx jy kb li kf lj kj lk kn ll lm ln lo bi translated">捆住牛</li><li id="fa79" class="lg lh it js b jt lp jx lq kb lr kf ls kj lt kn ll lm ln lo bi translated">给它食物</li><li id="6c61" class="lg lh it js b jt lp jx lq kb lr kf ls kj lt kn ll lm ln lo bi translated">拿一个桶</li><li id="c966" class="lg lh it js b jt lp jx lq kb lr kf ls kj lt kn ll lm ln lo bi translated">挤牛奶</li></ul><p id="a8b2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu"> <em class="ko">注</em> </strong> <em class="ko">:脚本是C#代码。但是我认为你可以在Java或其他OOP语言上应用这种模式。</em></p><p id="4585" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">所以:</p><figure class="kr ks kt ku gt kv"><div class="bz fp l di"><div class="lu lv l"/></div></figure><p id="cd7f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们可以开始挤奶过程了:</p><figure class="kr ks kt ku gt kv"><div class="bz fp l di"><div class="lu lv l"/></div></figure><p id="965a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">但是现在，我想在一行中处理它，而不是调用许多方法。我的想象是:</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div class="gh gi lw"><img src="../Images/e22d8b7bb747592ed83701f5145cff8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1144/format:webp/1*ct0xRXMO4uy1P1GHmMbyyQ.png"/></div></figure><p id="5d99" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">为此，我将void方法的返回类型更改为CowMilker，并添加一行“<strong class="js iu"> <em class="ko"> return this </em> </strong>”:</p><figure class="kr ks kt ku gt kv"><div class="bz fp l di"><div class="lu lv l"/></div></figure><p id="63ee" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这似乎是我的想象:</p><figure class="kr ks kt ku gt kv"><div class="bz fp l di"><div class="lu lv l"/></div></figure><p id="41c1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">看起来很美，是吧？</p></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><p id="4542" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi me translated">现在，我们可以进入第二关了。我们假设农民种植工作，他买了羊。在给羊挤奶的时候，他会把羊带到挤奶区，而不是把羊捆起来。很可能，会发生另一个时间差。因此，我创建了一个接口，并从中实现了挤奶工类。</p><figure class="kr ks kt ku gt kv"><div class="bz fp l di"><div class="lu lv l"/></div></figure><figure class="kr ks kt ku gt kv"><div class="bz fp l di"><div class="lu lv l"/></div></figure><figure class="kr ks kt ku gt kv"><div class="bz fp l di"><div class="lu lv l"/></div></figure><figure class="kr ks kt ku gt kv"><div class="bz fp l di"><div class="lu lv l"/></div></figure><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/3810aa4163f2910ebe5366230a766b7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:666/format:webp/1*f6rq6pD93A9oPhWrgTbM3g.png"/></div></figure></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><p id="47c3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi me translated"><span class="l mf mg mh bm mi mj mk ml mm di">一个</span> ll没错。没关系。但是有一个主题:我们假设开发人员以错误顺序调用方法并说</p><pre class="kr ks kt ku gt mo mp mq mr aw ms bi"><span id="be2a" class="mt mu it mp b gy mv mw l mx my">cowMilker.Immobilize().GiveFood().Milk().TakeBucket();</span></pre><p id="1cb6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">于是，挤奶工还没拿桶就开始挤奶了，牛奶浪费了。或者他/她尝试捆绑，但牛被捆绑。</p><pre class="kr ks kt ku gt mo mp mq mr aw ms bi"><span id="bd1e" class="mt mu it mp b gy mv mw l mx my">cowMilker.Immobilize().Immobilize().GiveFood().TakeBucket().Milk();</span></pre><p id="f147" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这就是为什么我们可以设置一个规则，按照一定的顺序调用chain。为了解决这个问题，我们将在代码中修改和添加一些有趣的东西。</p><p id="c3f2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我创建如下界面:</p><figure class="kr ks kt ku gt kv"><div class="bz fp l di"><div class="lu lv l"/></div></figure><p id="9e5a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们的新挤奶工:</p><figure class="kr ks kt ku gt kv"><div class="bz fp l di"><div class="lu lv l"/></div></figure><p id="47b6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">制动</strong>包含<strong class="js iu">制动</strong>类型中的<strong class="js iu">制动</strong>方法。并且<strong class="js iu">iafterimmenification</strong>接口实现<strong class="js iu"> IGiveFood </strong>。</p><p id="3306" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">因此，我调用的返回对象是implement <strong class="js iu"> IGiveFood </strong>并包含<strong class="js iu"> GiveFood </strong>方法。同样，<strong class="js iu"> GiveFood </strong>方法的类型是<strong class="js iu"> IAfterGiveFood </strong>，它实现了<strong class="js iu"> IAfterTakeBucket </strong>。该调用的返回类型只包含<strong class="js iu"> TakeBucket </strong>。这样，就像链条一样。</p><p id="ef74" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">正如你看到的，每个方法的返回类型是不同的接口。所以这个<strong class="js iu"> CowMilkerNew </strong>必须实现所有的接口(<strong class="js iu"> IAfterTakeBucket，IAfterImmobilize，IAfterGiveFood，IMilk </strong>)来返回带有<code class="fe mz na nb mp b"><strong class="js iu"><em class="ko">return this;</em></strong></code> <strong class="js iu"> <em class="ko"> </em> </strong>语句的<strong class="js iu"> CowMilkerNew </strong>。</p><p id="a118" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">它可以像我们想的那样称呼它。这就是结果(单击图像进行缩放):</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi nc"><img src="../Images/2b3077948a60c72f412b02869311c2b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OJNwz0BtKMiHY54w5LoqkA.jpeg"/></div></div></figure><p id="9dbe" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们假设你把动物固定住了，给食物是可选的。我们应该只认为<strong class="js iu"> ITakeBucket </strong>实现了<strong class="js iu">iafterimobilize。</strong></p><figure class="kr ks kt ku gt kv"><div class="bz fp l di"><div class="lu lv l"/></div></figure><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/f4aa01d4fb8563aaf9594ca83aab1a1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1198/format:webp/1*rQKxPa1nBlzZ2yuoiwnnog.png"/></div></figure><p id="dee8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在，让我们称新的奶牛挤奶工为:</p><figure class="kr ks kt ku gt kv"><div class="bz fp l di"><div class="lu lv l"/></div></figure><p id="65b0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这就是结果:</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/f9cf2aa7a29580c1aed15bc367be12c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:694/format:webp/1*s57aWKmYCSWuVYQPLp89zw.png"/></div></figure><p id="ea0f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">希望这个信息解释清楚。请不要犹豫与我联系。您的反馈很有价值。</p><p id="8453" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">完整项目:</p><div class="nf ng gp gr nh ni"><a href="https://github.com/mhkoca/fluent-interface-EN" rel="noopener  ugc nofollow" target="_blank"><div class="nj ab fo"><div class="nk ab nl cl cj nm"><h2 class="bd iu gy z fp nn fr fs no fu fw is bi translated">mhkoca/fluent-interface-EN</h2><div class="np l"><h3 class="bd b gy z fp nn fr fs no fu fw dk translated">流畅界面模式的示例项目。为mhkoca/fluent-interface-EN的开发做出贡献</h3></div><div class="nq l"><p class="bd b dl z fp nn fr fs no fu fw dk translated">github.com</p></div></div><div class="nr l"><div class="ns l nt nu nv nr nw la ni"/></div></div></a></div><p id="6ca6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="ko">最后感谢</em> <a class="nx ny ep" href="https://medium.com/u/3415ad85795e?source=post_page-----d01e75d4bb3d--------------------------------" rel="noopener" target="_blank"> <em class="ko">奥马尔</em> </a> <em class="ko">对他的支持。</em></p><p id="550e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="ko">联系人:</em> <a class="ae kp" href="https://www.linkedin.com/in/muhammed-hilmi-koca-60a06152/?ppe=1&amp;utm_campaign=Yaz%C4%B1l%C4%B1mc%C4%B1lar%20%C4%B0%C3%A7in%20Haftasonu%20Okumalar%C4%B1&amp;utm_medium=email&amp;utm_source=Revue%20newsletter" rel="noopener ugc nofollow" target="_blank"> <em class="ko">领英</em> </a> <em class="ko">，</em> <a class="ae kp" href="https://twitter.com/mhk_developer?utm_campaign=Yaz%C4%B1l%C4%B1mc%C4%B1lar%20%C4%B0%C3%A7in%20Haftasonu%20Okumalar%C4%B1&amp;utm_medium=email&amp;utm_source=Revue%20newsletter" rel="noopener ugc nofollow" target="_blank"> <em class="ko">推特</em> </a></p></div></div>    
</body>
</html>