<html>
<head>
<title>Pass By Value vs Pass By Reference in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript中按值传递与按引用传递</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/pass-by-value-vs-pass-by-reference-in-javascript-31e79afe850a?source=collection_archive---------1-----------------------#2020-12-01">https://levelup.gitconnected.com/pass-by-value-vs-pass-by-reference-in-javascript-31e79afe850a?source=collection_archive---------1-----------------------#2020-12-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="ba8e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">理解原始数据类型和对象在JavaScript中的行为</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/97049d7b0e90216ce1e52dec162a4738.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p9JFGxK4YmENzfh49CMkpA.jpeg"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">Glenn Carstens-Peters在Upsplash上拍摄的照片</figcaption></figure><p id="7c4a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果您是JavaScript新手，那么您可能已经遇到了这种语言提供的一些有趣的行为(<a class="ae lb" href="https://www.destroyallsoftware.com/talks/wat" rel="noopener ugc nofollow" target="_blank">展示A </a>)。起初，这些奇怪的怪癖可能看起来很可笑和令人沮丧，但我保证所有这些疯狂的背后都有一个方法。</p><p id="150b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">依我拙见，最难克服的障碍之一是按值传递和按引用传递之间的区别。<em class="lc">为什么这个概念这么棘手？对于初学者来说，如果没有真正理解JavaScript如何与原始值和引用值交互，你肯定会走得很远。这可能会导致大量的错误，这些错误很难追踪，也很难修复。其次，这是一个会在技术面试中出现的概念，所以不理解它会被认为是对你不利的一面巨大的红旗。</em></p><p id="e4f2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">不要害怕，读者朋友！让教育开始吧…</p><h2 id="5c0d" class="ld le iq bd lf lg lh dn li lj lk dp ll jy lm ln lo kc lp lq lr kg ls lt lu lv bi translated">原始数据类型</h2><p id="ac6d" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">在JavaScript中，我们可以将数据类型分为两个不同的桶，原始数据类型和对象。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mb"><img src="../Images/f9d6f53b617e43a7a77f65656b44c979.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t6HbQiO7mmPvaesR9nAriw.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">说明原始数据类型或值以及对象类型或引用值的图表</figcaption></figure><p id="b55d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">从ES6开始，JavaScript中有六种原始数据类型:<code class="fe mc md me mf b">string</code>、<code class="fe mc md me mf b">number</code>、<code class="fe mc md me mf b">boolean</code>、<code class="fe mc md me mf b">undefined</code>、<code class="fe mc md me mf b">null</code>和<code class="fe mc md me mf b">symbol</code>。</p><p id="9fc6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">原始数据类型通过值传递或复制<strong class="jp ir">，并且是不可变的，这意味着现有的值不能像数组或对象那样改变。让我们看一下下面的代码，看看它是如何工作的。</strong></p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mg"><img src="../Images/e0b151308457f5ce79e938a6fd24b81b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nCtit-CWNg0MZUgBYil7jA.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">使用jsbin.com创建</figcaption></figure><p id="bec0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这里我们创建了两个变量，<code class="fe mc md me mf b">x = 10</code>和<code class="fe mc md me mf b">y = x</code>。由于<code class="fe mc md me mf b">10</code>是一个数字和一个原始值，当我们设置<code class="fe mc md me mf b">y = x</code>时，我们实际上是在复制该值，即<code class="fe mc md me mf b">10</code>，并将其分配给<code class="fe mc md me mf b">y</code>。我们也可以使用下面的图表对此进行可视化。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mh"><img src="../Images/438f79dfc61d2ed002b269fb00ac2233.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T0EqbD5Ur2IRgcELRAR2WQ.png"/></div></div></figure><p id="6c21" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果我们要改变<code class="fe mc md me mf b">x</code>的值，我们会看到<code class="fe mc md me mf b">y</code>保持其值<code class="fe mc md me mf b">10</code>。同样，这是因为原始值是由<strong class="jp ir">复制的</strong>，所以<code class="fe mc md me mf b">y</code>的值独立于<code class="fe mc md me mf b">x</code>的值。把它想象成复印一张照片。复印后，你就有了两张完全相同的照片:一张原件和一张复制品。如果你把原件切成两半，只有原件会被改动，而传真件将保持原样。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mi"><img src="../Images/2f942b947d8c66c2b5fc71a6cf2cc224.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vRZb62tSaTJIHHkKx2YyRA.png"/></div></div></figure><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mj"><img src="../Images/ca4ffbd45b4fb77900ef3a1efda6e106.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6KYr16G-oln2FGx1BeDWOw.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">我们改写了x的值，但y保持不变</figcaption></figure><h2 id="afa6" class="ld le iq bd lf lg lh dn li lj lk dp ll jy lm ln lo kc lp lq lr kg ls lt lu lv bi translated">参考对象</h2><p id="136a" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">另一方面，对象通过引用传递给<strong class="jp ir">，并指向值在内存中的位置，而不是值本身。让我们在代码中看看这一点。</strong></p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mk"><img src="../Images/ef3a1dbf81ea33ee89d76c9bc66e8b3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iVZBncEZYbzzMhwOBn0WpA.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">变量x和y现在指向对象，而不是原始数据类型</figcaption></figure><p id="1323" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这个例子中，<code class="fe mc md me mf b">x</code>现在是一个指向<code class="fe mc md me mf b">{dog: "poodle"}</code>的对象。当我们创建变量<code class="fe mc md me mf b">y</code>并为其赋值<code class="fe mc md me mf b">x</code>时，我们现在能够进入<code class="fe mc md me mf b">x</code>的各种属性，包括<code class="fe mc md me mf b">dog</code>的值，即<code class="fe mc md me mf b">"poodle"</code>。这似乎与原始值使用的逻辑完全相同，但是让我们看看下面的图表，看看细微但重要的区别。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ml"><img src="../Images/6d19479c9efc33dad8c0231ca4104db7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WQa6mii9CFt_iOcb25uyaw.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">x和y都指向内存中的一个(虚构的)地址，该地址存储对该对象的引用</figcaption></figure><p id="ffd8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，这个图表看起来与我们的变量<code class="fe mc md me mf b">x</code>和<code class="fe mc md me mf b">y</code>持有原始数据类型时略有不同。在这个版本中，我们看到<code class="fe mc md me mf b">x</code>和<code class="fe mc md me mf b">y</code>的值都不是数据类型，但是<strong class="jp ir">引用了内存中的一个地址</strong>，实际上是同一个地址！现在让我们看看如果我们给<code class="fe mc md me mf b">y</code>添加一个新的属性<code class="fe mc md me mf b">size</code>会对<code class="fe mc md me mf b">x</code>产生什么影响…</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mm"><img src="../Images/4f869d7fef94eb02baf9a474495cf136.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-9VQkBbfWLBo-l89TSqb4g.png"/></div></div></figure><p id="6400" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe mc md me mf b">x</code>仍然返回一个对象，但是现在它也有了一个额外的属性<code class="fe mc md me mf b">size</code>！同样，这是因为<code class="fe mc md me mf b">x</code>和<code class="fe mc md me mf b">y</code>都指向同一个引用对象，所以对一个变量的任何改变，在另一个变量中都是可见的。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mn"><img src="../Images/032b01981fdca1367308e20c2cf48db0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AwvmeTkkHBptLwyq8BhP2Q.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">图表说明了y的变化如何更新与x共享的参考值</figcaption></figure><p id="8bd0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了帮助我记住这个概念，我喜欢把参考值想象成一所房子，把变量想象成住在房子里的人。所有的居民(变量)可以说“我有一栋房子”并指向同一栋房子。如果一个居民决定把房子漆成黄色，那么所有的居民现在都有一个黄色的房子，因为它是共享的。</p><p id="1682" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们再看一个包含各种引用对象例子。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mo"><img src="../Images/1f27ae881ccf300bcad33451b92345d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UZsCxhoRFNPZMHX8PmcHeg.png"/></div></div></figure><p id="3d80" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这段代码中，我们从包含属性<code class="fe mc md me mf b">name</code>、<code class="fe mc md me mf b">age</code>和<code class="fe mc md me mf b">hobbies</code>的变量<code class="fe mc md me mf b">person</code>开始。当我们将这个对象打印到控制台时，我们得到的正是我们所期望的——与我们刚刚创建的对象相同。</p><p id="2a1d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，我们有一个名为<code class="fe mc md me mf b">changePerson</code>的函数，它接受一个参数，做一些修改，然后返回一个对象。当我们创建变量<code class="fe mc md me mf b">thirdPerson</code>时，我们通过将我们的原始对象<code class="fe mc md me mf b">person</code>传递给它来调用<code class="fe mc md me mf b">changePerson</code>函数。有趣的是，当我们再次打印到控制台<code class="fe mc md me mf b">thirdPerson</code>和<code class="fe mc md me mf b">person</code>时会发生什么。</p><p id="3265" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">注意<code class="fe mc md me mf b">console.log(thirdPerson)</code>返回一个具有新属性的全新对象。现在看看<code class="fe mc md me mf b">console.log(person)</code>返回什么。这类似于我们的原始对象，但是它包含了在我们的<code class="fe mc md me mf b">changePerson</code>函数中引入的新属性值。</p><h2 id="7d50" class="ld le iq bd lf lg lh dn li lj lk dp ll jy lm ln lo kc lp lq lr kg ls lt lu lv bi translated">检查相等性</h2><p id="381d" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">最后，让我们看看原始数据类型和引用对象如何使用等式操作符。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mp"><img src="../Images/a2968b92d19adc00856525e2a2d4ed97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*V71DDOAcsXUTMgX-ZSxFEw.png"/></div></div></figure><p id="94af" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当谈到原始数据类型时，只要值相同，<code class="fe mc md me mf b">=</code>符号的右边是什么并不重要。我们可以从上面的变量<code class="fe mc md me mf b">a</code>和<code class="fe mc md me mf b">b</code>中看到这一点，这两个变量的写法不同，但是当我们使用严格相等运算符<code class="fe mc md me mf b">===</code>时，它们的值是相同的。</p><p id="49ea" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在第二个示例中，<code class="fe mc md me mf b">dog</code>和<code class="fe mc md me mf b">cat</code>的情况正好相反。虽然看起来它们包含相同的值，<code class="fe mc md me mf b">['bark']</code>是一个数组，也是一个引用对象，这意味着<code class="fe mc md me mf b">===</code>正在检查<code class="fe mc md me mf b">dog</code>和<code class="fe mc md me mf b">cat</code>是否对内存中的值有相同的引用。另一方面，<code class="fe mc md me mf b">bird === dog</code>是真的，因为它们共享同一个引用对象。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mn"><img src="../Images/2606412a12375318d54a25c3dff5bc2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5wow4zhjArOf28fC-62yYw.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">狗和鸟共享相同的引用，而猫则不同，尽管它们有相同的数组</figcaption></figure><h2 id="c9ed" class="ld le iq bd lf lg lh dn li lj lk dp ll jy lm ln lo kc lp lq lr kg ls lt lu lv bi translated">结论</h2><p id="f7f8" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">我们对按值传递和按引用传递的介绍到此结束。在这个基础框架下，还可以涵盖更多的主题，包括引用被覆盖或丢失时会发生什么，如何复制引用以创建新对象，以及确保副本是深度副本，等等。我建议查看我在下面使用的资源，这些资源更详细地介绍了这些额外的主题。</p><p id="0d52" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">感谢您的阅读！我自己相对来说是一个编码新手，所以如果你有任何意见，纠正，敌意和/或愿望，请在下面留下评论！</p></div><div class="ab cl mq mr hu ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="ij ik il im in"><h2 id="0878" class="ld le iq bd lf lg lh dn li lj lk dp ll jy lm ln lo kc lp lq lr kg ls lt lu lv bi translated">资源</h2><p id="5452" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">下面是一些很棒的资源，可以帮助你理解在JavaScript中传递值和传递引用。</p><div class="mx my gp gr mz na"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures" rel="noopener  ugc nofollow" target="_blank"><div class="nb ab fo"><div class="nc ab nd cl cj ne"><h2 class="bd ir gy z fp nf fr fs ng fu fw ip bi translated">JavaScript数据类型和数据结构</h2><div class="nh l"><h3 class="bd b gy z fp nf fr fs ng fu fw dk translated">所有的编程语言都有内置的数据结构，但是每种语言的数据结构都不一样。这个…</h3></div><div class="ni l"><p class="bd b dl z fp nf fr fs ng fu fw dk translated">developer.mozilla.org</p></div></div><div class="nj l"><div class="nk l nl nm nn nj no kv na"/></div></div></a></div><div class="mx my gp gr mz na"><a href="https://www.educative.io/courses/step-up-your-js-a-comprehensive-guide-to-intermediate-javascript/7nAZrnYW9rG" rel="noopener  ugc nofollow" target="_blank"><div class="nb ab fo"><div class="nc ab nd cl cj ne"><h2 class="bd ir gy z fp nf fr fs ng fu fw ip bi translated">价值与参考——提升你的JS:中级JavaScript综合指南</h2><div class="nh l"><h3 class="bd b gy z fp nf fr fs ng fu fw dk translated">了解如何通过值复制一些数据类型，通过引用复制其他数据类型，以及这在我们编写代码时意味着什么。这个…</h3></div><div class="ni l"><p class="bd b dl z fp nf fr fs ng fu fw dk translated">www.educative.io</p></div></div><div class="nj l"><div class="np l nl nm nn nj no kv na"/></div></div></a></div><div class="mx my gp gr mz na"><a href="https://www.javascripttutorial.net/javascript-primitive-vs-reference-values/" rel="noopener  ugc nofollow" target="_blank"><div class="nb ab fo"><div class="nc ab nd cl cj ne"><h2 class="bd ir gy z fp nf fr fs ng fu fw ip bi translated">JavaScript原语与参考值</h2><div class="nh l"><h3 class="bd b gy z fp nf fr fs ng fu fw dk translated">摘要:在本教程中，您将了解原始值和参考值之间的差异。在JavaScript中，一个…</h3></div><div class="ni l"><p class="bd b dl z fp nf fr fs ng fu fw dk translated">www.javascripttutorial.net</p></div></div><div class="nj l"><div class="nq l nl nm nn nj no kv na"/></div></div></a></div><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="nr ns l"/></div></figure><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="nr ns l"/></div></figure></div></div>    
</body>
</html>