<html>
<head>
<title>How to Automate NPM Package Publishing with Azure DevOps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Azure DevOps自动发布NPM包</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-automate-npm-package-publishing-with-azure-devops-4919fe68cc96?source=collection_archive---------6-----------------------#2020-04-26">https://levelup.gitconnected.com/how-to-automate-npm-package-publishing-with-azure-devops-4919fe68cc96?source=collection_archive---------6-----------------------#2020-04-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/ece9f247f24bb863d39c9c4d3530a138.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-8IU41v6Ixi8EYGpLM_HPA.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">照片由<a class="ae jd" href="https://unsplash.com/@yusrilali?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Yusril Permana ali </a>在<a class="ae jd" href="https://unsplash.com/s/photos/package-to?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><div class=""/><p id="eade" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一步一步的教程。</p><blockquote class="lb lc ld"><p id="c781" class="kd ke le kf b kg kh ki kj kk kl km kn lf kp kq kr lg kt ku kv lh kx ky kz la ij bi translated">在本教程结束时，您将拥有一个由<strong class="kf jh">合并</strong>到<code class="fe li lj lk ll b">release/1.0.1</code>分支触发的发布管道，并且在发布到NPM之前只需等待您的<strong class="kf jh">批准</strong>。</p></blockquote><p id="a0b7" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们假设你有一些托管在GitHub上的源代码，并且你想使用Azure DevOps将它们发布为NPM包。<br/> <em class="le">无论是</em><a class="ae jd" href="https://github.com/join?source_repo=gparlakov%2Fscuri" rel="noopener ugc nofollow" target="_blank"><em class="le">GitHub</em></a><em class="le">还是</em><a class="ae jd" href="https://azure.microsoft.com/en-us/services/devops/" rel="noopener ugc nofollow" target="_blank"><em class="le">Azure devo PS</em></a><em class="le">账号都是</em> <strong class="kf jh"> <em class="le">免费</em> </strong> <em class="le">来报名并在开源项目上使用的！</em></p><p id="6696" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">以下是本文涵盖的高级内容:</p><ul class=""><li id="78f8" class="lm ln jg kf b kg kh kk kl ko lo ks lp kw lq la lr ls lt lu bi translated">创建一个由合并到一个<code class="fe li lj lk ll b">release/*</code>分支触发的构建管道</li><li id="5726" class="lm ln jg kf b kg lv kk lw ko lx ks ly kw lz la lr ls lt lu bi translated">创建在成功生成管道时触发的发布管道</li><li id="ccbf" class="lm ln jg kf b kg lv kk lw ko lx ks ly kw lz la lr ls lt lu bi translated">建立一个手动的批准需求，这样您就只发布您批准的内容，也就是说，您可能有多个到您的<code class="fe li lj lk ll b">release/1.0.0-rc1</code>分支的合并，所有的合并都触发构建步骤，但是只批准和发布最后一个，其中所有的测试都是绿色的</li><li id="4b72" class="lm ln jg kf b kg lv kk lw ko lx ks ly kw lz la lr ls lt lu bi translated">建立预发布发布(vNext或beta通道)和稳定发布发布(vLatest通道)管道</li></ul><p id="56b4" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本教程结束时，您将拥有一个由<strong class="kf jh">合并</strong>到release*分支触发的发布管道，并且在发布到NPM之前只等待您的<strong class="kf jh">批准</strong>。<br/> * <code class="fe li lj lk ll b">release/1.0.1</code>或<code class="fe li lj lk ll b">release/1.0.1-rc.1</code></p><blockquote class="lb lc ld"><p id="06e5" class="kd ke le kf b kg kh ki kj kk kl km kn lf kp kq kr lg kt ku kv lh kx ky kz la ij bi translated">如果您只想要最终的结果，这里的<a class="ae jd" href="https://github.com/scuri-lib/automate-package-with-azure/blob/master/azure-pipelines.yml" rel="noopener ugc nofollow" target="_blank">是构建脚本文件<code class="fe li lj lk ll b">.yml</code>和最终</a><a class="ae jd" href="https://github.com/scuri-lib/automate-package-with-azure/blob/master/My%20Package.json" rel="noopener ugc nofollow" target="_blank">发布</a>管道的导出，您可以将其导入(在您已经将<a class="ae jd" href="https://github.com/scuri-lib/automate-package-with-azure/blob/master/Publish%20to%20NPM_task_group.json" rel="noopener ugc nofollow" target="_blank">发布任务</a>导入到您自己的项目中之后)并进行修改。</p></blockquote><p id="66e6" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您可以看到一个管道<a class="ae jd" href="https://dev.azure.com/gparlakov/Scuri/_build?definitionId=6&amp;_a=summary" rel="noopener ugc nofollow" target="_blank">构建</a>和<a class="ae jd" href="https://dev.azure.com/gparlakov/Scuri/_release?_a=releases&amp;view=mine&amp;definitionId=1" rel="noopener ugc nofollow" target="_blank">发布</a>的示例。</p><p id="4976" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">循序渐进:</p><h2 id="446b" class="ma mb jg bd mc md me dn mf mg mh dp mi ko mj mk ml ks mm mn mo kw mp mq mr ms bi translated">步骤1:授权Azure管道</h2><p id="cdcf" class="pw-post-body-paragraph kd ke jg kf b kg mt ki kj kk mu km kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated">将Azure Pipelines添加到GitHub应用程序中，这样每当启动pull请求和合并commit(又名webhooks)时，GitHub就会告诉Azure DevOps(又名AzDO)。<em class="le"> <br/>关于设置的更多细节，请参见</em> <a class="ae jd" href="https://itnext.io/are-you-doing-github-checks-9f8b3d6f41a5" rel="noopener ugc nofollow" target="_blank"> <em class="le">这篇文章</em> </a>。</p><figure class="mz na nb nc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi my"><img src="../Images/720e4dad7a6576776934625823302214.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qrj5x6jgAYWk3_ZPBeGLig.png"/></div></div></figure><p id="a093" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当您开始“配置您的管道”时，选择一个“初始管道”:</p><figure class="mz na nb nc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nd"><img src="../Images/d64d91760bfd4f934d8710480e26d527.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OaX-3S4jvgVNZi44dQriAQ.png"/></div></div></figure><h2 id="00b4" class="ma mb jg bd mc md me dn mf mg mh dp mi ko mj mk ml ks mm mn mo kw mp mq mr ms bi translated">步骤2:建立管道</h2><p id="d0c1" class="pw-post-body-paragraph kd ke jg kf b kg mt ki kj kk mu km kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated">在Azure Dev Ops中添加/编辑构建管道，如下所示:</p><figure class="mz na nb nc gt is"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="f1db" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这意味着:</p><ol class=""><li id="5bfe" class="lm ln jg kf b kg kh kk kl ko lo ks lp kw lq la ng ls lt lu bi translated">仅在合并到名称以<code class="fe li lj lk ll b">release/</code>开头的分支时触发此管道，而不是在PR上。<br/><em class="le">*你可能也想跑公关。如果是这样就去掉</em> <code class="fe li lj lk ll b"><em class="le">pr: none</em></code> <em class="le">线。我喜欢为拉取请求检查建立一个单独的版本。</em></li><li id="3722" class="lm ln jg kf b kg lv kk lw ko lx ks ly kw lz la ng ls lt lu bi translated">构建使用什么虚拟机—在本例中为<code class="fe li lj lk ll b">ubuntu-latest</code></li><li id="9ae7" class="lm ln jg kf b kg lv kk lw ko lx ks ly kw lz la ng ls lt lu bi translated">步骤:</li></ol><ul class=""><li id="e9a0" class="lm ln jg kf b kg kh kk kl ko lo ks lp kw lq la lr ls lt lu bi translated">安装deps</li><li id="6c3d" class="lm ln jg kf b kg lv kk lw ko lx ks ly kw lz la lr ls lt lu bi translated">将你的包打包成一个npm包<code class="fe li lj lk ll b">.tgz</code>文件</li><li id="2bc2" class="lm ln jg kf b kg lv kk lw ko lx ks ly kw lz la lr ls lt lu bi translated">发布您的工件(在本例中是<code class="fe li lj lk ll b">.tgz</code>文件),以便它可以用于即将到来的发布管道</li></ul><p id="46bd" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">完成编辑后，选择“保存”(在“保存并运行”按钮下)并提交/打开采购申请:</p><figure class="mz na nb nc gt is gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/3ea0cf21b1f8d5bde12a2b4b6de4cfcd.png" data-original-src="https://miro.medium.com/v2/resize:fit:998/format:webp/1*T7-N3H90ElY3ifvZfYnqzQ.png"/></div></figure><p id="b684" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这一步之后，您的存储库中应该有一个包含上述内容的<code class="fe li lj lk ll b">azure-pipelines.yml</code>文件。它告诉阿兹多该做什么。在存储库中被检查给你控制和历史。对于酷小孩来说，Azure DevOps显然太长了😁</p><h2 id="7abe" class="ma mb jg bd mc md me dn mf mg mh dp mi ko mj mk ml ks mm mn mo kw mp mq mr ms bi translated">步骤3:释放管道</h2><p id="913e" class="pw-post-body-paragraph kd ke jg kf b kg mt ki kj kk mu km kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated">让我们创建一个。有多个按钮可以做到这一点:</p><figure class="mz na nb nc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ni"><img src="../Images/469bcbe7a1e0bbe49e8fd97c5e9f87cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6giksVONJuaFAGKmHrWOzg.png"/></div></div></figure><p id="b3df" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">选择空工单。</p><figure class="mz na nb nc gt is gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/1b0f7966654f9e35dc38cd9683cdbfab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1390/format:webp/1*JouRlK758GtUbK6y1KLjDw.png"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">选择空工单</figcaption></figure><figure class="mz na nb nc gt is gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/c199ee0173f77d64cb0d942fa1bae0b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1262/format:webp/1*Trru2qhCxwdLckzrjw0tRA.png"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">让我们将这个阶段命名为vNext</figcaption></figure><p id="a51b" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">选择了名字<strong class="kf jh"> vNext </strong>作为说明:这是要部署预发布版本(即beta版本)。这个vNext将用标签<code class="fe li lj lk ll b">next</code>(或者<code class="fe li lj lk ll b">beta</code>、<code class="fe li lj lk ll b">rc</code>等发布你的包。)是预发布/beta/vNext版本，默认情况下<code class="fe li lj lk ll b">npm install</code>不会<strong class="kf jh">安装。稍后我们将创建<strong class="kf jh"> vLatest </strong>，它将发布标签<code class="fe li lj lk ll b">latest</code>，这是<code class="fe li lj lk ll b">npm install</code>默认选择安装的。点击查看更多关于NPM标签<a class="ae jd" href="https://dev.to/andywer/how-to-use-npm-tags-4lla" rel="noopener ugc nofollow" target="_blank">的信息。<br/>示例:<br/>如果您发布了标签为<code class="fe li lj lk ll b">latest</code>的<code class="fe li lj lk ll b">my-lib</code>版本<code class="fe li lj lk ll b">1.0.0</code>和标签为<code class="fe li lj lk ll b">next</code>的<code class="fe li lj lk ll b">1.0.1-rc1</code>，并且用户发布了<code class="fe li lj lk ll b">npm i my-lib</code>，他们将获得<code class="fe li lj lk ll b">1.0.0</code>而不是您想要的<code class="fe li lj lk ll b">1.0.1-rc1</code>。而<code class="fe li lj lk ll b">npm i my-lib@next</code>或<code class="fe li lj lk ll b">npm i my-lib@1.0.1-rc1</code>将安装该特定版本，假设用户知道他们在使用预发布版本时所冒的风险。</a></strong></p><figure class="mz na nb nc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nl"><img src="../Images/84d9a5e844fc5963bbc8ef833f9a2f50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vymHpnHw4qhakRM2XCBKCg.png"/></div></div></figure><p id="183b" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">发布是由构建和打包管道的成功触发的吗(即当一个新的工件可用时)<br/> <em class="le">你知道吗？我们可以手动触发发布，并使用较旧的工件，即一些以前版本的包。</em></p><figure class="mz na nb nc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nm"><img src="../Images/7f281955dda221283fe7f174165ba1cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rcJvJQrBxTsqRAWy0UWSYA.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">构建成功后启用释放VNext触发器。</figcaption></figure><figure class="mz na nb nc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nn"><img src="../Images/3e65727915ede41d5ba04a5983b806b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7YMMo2t71z512MK5EAPfJQ.png"/></div></div></figure><p id="3852" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">确保命名并保存您的管道！</p><h2 id="260b" class="ma mb jg bd mc md me dn mf mg mh dp mi ko mj mk ml ks mm mn mo kw mp mq mr ms bi translated">步骤4:用令牌发布到NPM</h2><p id="b15a" class="pw-post-body-paragraph kd ke jg kf b kg mt ki kj kk mu km kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated">现在离开阿兹多，去NPM获得<strong class="kf jh">阅读和发布</strong>令牌。参见此处的说明<a class="ae jd" href="https://docs.npmjs.com/creating-and-viewing-authentication-tokens#creating-tokens-on-the-website" rel="noopener ugc nofollow" target="_blank">。</a></p><figure class="mz na nb nc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi no"><img src="../Images/6c5ca3889821133a922728bf286cd33f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8ooHiKgAmz0fx00L2UDUfQ.png"/></div></div></figure><p id="d677" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们需要令牌来发布我们的包。对于向我们的管道提供NPM用户名和密码进行身份验证，这是一个很好的替代方法。可以撤销！<br/>您也可以使用<em class="le"> CLI </em> 创建令牌<a class="ae jd" href="https://docs.npmjs.com/creating-and-viewing-authentication-tokens#creating-tokens-with-the-cli" rel="noopener ugc nofollow" target="_blank">。这允许您指定允许使用此令牌的IP范围<em class="le">。</em></a></p><h2 id="4540" class="ma mb jg bd mc md me dn mf mg mh dp mi ko mj mk ml ks mm mn mo kw mp mq mr ms bi translated">创建环境变量组</h2><p id="ebb4" class="pw-post-body-paragraph kd ke jg kf b kg mt ki kj kk mu km kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated">现在回到AzDo，创建一个发布管道环境<strong class="kf jh">变量</strong>组，我们将在所有的发布阶段使用它——vNext和vLatest。</p><figure class="mz na nb nc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi np"><img src="../Images/91f8c1b51737662fe70cbb54857b380d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZsQkwZNG6iQQsyPrsOwTsg.png"/></div></div></figure><p id="a11d" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">创建一个release pipeline环境变量，使其成为一个<strong class="kf jh"> secret </strong>变量，并将令牌存储在其中:</p><figure class="mz na nb nc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nq"><img src="../Images/17ad8188efa1cdfd7965744d311fca33.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hiKIsS_5Afy3ZnvdaPz_TQ.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">粘贴您的令牌，并使其成为秘密。</figcaption></figure><p id="51d7" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">将其设为秘密将使其不被输出，因此即使对于公共管道也是安全的。像<a class="ae jd" href="https://dev.azure.com/gparlakov/Scuri/_releaseProgress?_a=release-environment-logs&amp;releaseId=58&amp;environmentId=87" rel="noopener ugc nofollow" target="_blank">这个</a>就是。</p><p id="9e69" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">将环境组链接到版本。否则，<em class="le">令牌</em>变量将不可用(类似于失败释放<a class="ae jd" href="https://dev.azure.com/scurilib/scurilib/_releaseProgress?_a=release-environment-logs&amp;releaseId=2&amp;environmentId=2" rel="noopener ugc nofollow" target="_blank">中的</a>):</p><figure class="mz na nb nc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nr"><img src="../Images/236dedd429f97d65425eb06416abc2e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4vfc_vBPaKOG6nqovMsU0Q.png"/></div></div></figure><h2 id="2db0" class="ma mb jg bd mc md me dn mf mg mh dp mi ko mj mk ml ks mm mn mo kw mp mq mr ms bi translated">步骤5:定制vNext发布管道</h2><p id="be91" class="pw-post-body-paragraph kd ke jg kf b kg mt ki kj kk mu km kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated">现在让我们的管道做一些真正有用的事情。</p><figure class="mz na nb nc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ns"><img src="../Images/fdc7c16e3d49d6b438a8bbce43bdcc5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6cA-6i3u_OG7rVm2U7SSwQ.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">返回到版本，单击编辑</figcaption></figure><p id="1e69" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这个例子我们用ubuntu-18.04。如果你还需要其他的东西——继续选择它——Linux、Windows和macOS实例都受支持。您也可以自带，<a class="ae jd" href="https://docs.microsoft.com/en-us/azure/devops/pipelines/agents/agents?view=azure-devops&amp;tabs=browser#install" rel="noopener ugc nofollow" target="_blank">现场主持</a>。</p><figure class="mz na nb nc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nt"><img src="../Images/fca3f4572b28f19a53c0b01d01fef9a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AQ9Uxm5GBiFlC--_pD66Eg.png"/></div></div></figure><p id="7ca0" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从工件中提取文件(来自<code class="fe li lj lk ll b">npm pack</code>的结果)是第一步。添加并配置提取文件步骤，将包提取到<code class="fe li lj lk ll b">./my-package</code>文件夹:</p><figure class="mz na nb nc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nu"><img src="../Images/91c3511ba16b169c4f25669ae41d3a59.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fNBpvUmhWqH-_EAJNBNQWw.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">添加提取文件步骤</figcaption></figure><figure class="mz na nb nc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nv"><img src="../Images/525f7076afb5b8fa7e3fd75ab5a4fac3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TsjWvgFYkf_ioBpsV4zj4Q.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">配置提取文件步骤</figcaption></figure><p id="d6a6" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="le">注意:如果您使用当前文件夹作为目标文件夹</em> <code class="fe li lj lk ll b"><em class="le">.</em></code> <em class="le">并勾选了✅ </em> <code class="fe li lj lk ll b"><em class="le">Clean destination …</em></code> <em class="le">选项，那么将</em> <strong class="kf jh"> <em class="le">删除</em> </strong> <em class="le">您的工件作为清理的一部分:)</em></p><p id="4fd9" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了使用我们的NPM令牌，我们需要将其提供给NPM CLI。为此，我们将在<code class="fe li lj lk ll b">my-package/package</code>文件夹<em class="le"> ( </em> <code class="fe li lj lk ll b"><em class="le">npm pack</em></code> <em class="le">中的<code class="fe li lj lk ll b">package.json</code>旁边添加一个<code class="fe li lj lk ll b">.npmrc</code>文件，将所有内容打包到一个</em> <code class="fe li lj lk ll b"><em class="le">package</em></code> <em class="le">文件夹中，这样在</em> <code class="fe li lj lk ll b"><em class="le">./my-package</em></code> <em class="le">中的</em> <code class="fe li lj lk ll b"><em class="le">unpack my-package.tgz</em></code> <em class="le">之后，我们将得到一个嵌套的文件夹结构</em> <code class="fe li lj lk ll b"><em class="le">./my-package/package</em></code> <em class="le">，其中包含我们的包内容，如package.json、index.js等。).</em>添加一个Bash步骤并进行配置:</p><figure class="mz na nb nc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nw"><img src="../Images/cbc7dd16255437b81abcacc057e7a046.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UOADQhsjvvKERej_eepXRw.png"/></div></div></figure><figure class="mz na nb nc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nx"><img src="../Images/89c7a32c89df6cd620b6dbd545f8d34d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5520OX8rMcM47eSpmvUOpg.png"/></div></div></figure><p id="579e" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您也可以存储在repo中的脚本内容(例如在<code class="fe li lj lk ll b">./deploy.sh</code>中)并使用文件路径选项:</p><figure class="mz na nb nc gt is"><div class="bz fp l di"><div class="ne nf l"/></div></figure><ul class=""><li id="0e0d" class="lm ln jg kf b kg kh kk kl ko lo ks lp kw lq la lr ls lt lu bi translated">将工作目录更改为我们的包被解压到的位置。我们需要这样做，因为每个命令(或任务)都是从代理的工作目录<em class="le">开始的(在这个Windows代理</em> <a class="ae jd" href="https://dev.azure.com/gparlakov/Scuri/_releaseProgress?_a=release-environment-logs&amp;releaseId=58&amp;environmentId=87" rel="noopener ugc nofollow" target="_blank"> <em class="le">示例</em> </a> <em class="le">或</em> <code class="fe li lj lk ll b"><em class="le">/home/vsts/work/r1/a</em></code> <em class="le">在这个Linux代理</em> <a class="ae jd" href="https://dev.azure.com/gparlakov/Scuri/_releaseProgress?_a=release-environment-logs&amp;releaseId=56" rel="noopener ugc nofollow" target="_blank"> <em class="le">示例</em> </a> <em class="le">)。查找代理作业日志)。</em></li><li id="4261" class="lm ln jg kf b kg lv kk lw ko lx ks ly kw lz la lr ls lt lu bi translated">然后只需列出文件——这可以用作管道<strong class="kf jh">调试</strong>工具——因为您实际上没有任何其他方式可以访问构建代理机器。</li><li id="39df" class="lm ln jg kf b kg lv kk lw ko lx ks ly kw lz la lr ls lt lu bi translated">然后在一个<code class="fe li lj lk ll b">.npmrc</code>文件中添加一行，NPM CLI将会知道——好的，对于<em class="le">这个</em>包回购使用<em class="le">那个</em>令牌进行授权:echo <code class="fe li lj lk ll b">echo '//registry.npmjs.org/:_authToken=$(token)' &gt; .npmrc</code></li><li id="9526" class="lm ln jg kf b kg lv kk lw ko lx ks ly kw lz la lr ls lt lu bi translated">最后，发布包——注意标签。</li></ul><h2 id="2ab7" class="ma mb jg bd mc md me dn mf mg mh dp mi ko mj mk ml ks mm mn mo kw mp mq mr ms bi translated">第六步:人工批准</h2><p id="d015" class="pw-post-body-paragraph kd ke jg kf b kg mt ki kj kk mu km kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated">现在，让我们确保我们的管道仅在向用户(或用户组)发送电子邮件并且他们实际上批准了该发布之后才发布！</p><figure class="mz na nb nc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ny"><img src="../Images/891549aa7460d324b095d579bca24c35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MlTKWKD8xZ0YGfaPX4xJPQ.png"/></div></div></figure><p id="919f" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在管道选项卡中(<em class="le">编辑管道</em>时)，点击vNext阶段开始时的圆形物(2)。这是一个导火索，不要改变。启用预部署批准并选择需要批准的用户。他们会收到一封电子邮件:</p><figure class="mz na nb nc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nz"><img src="../Images/ee3ea56224b77b9f417db138196852f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PN014HVQo4NsFcIA-LEmLQ.png"/></div></div></figure><p id="967b" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">并且能够从AzDO UI中批准或拒绝。</p><p id="188e" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">编辑部署队列设置，以便只尝试和发布最新的工件。这样，如果我们将多个更新推送到我们的<code class="fe li lj lk ll b">release/</code>分支，发布管道将取消除最后一次运行之外的所有更新——我们不想将半成品包推送到NPM:</p><figure class="mz na nb nc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi oa"><img src="../Images/d5a6fa1c3925b9d8e2e70406bf020efc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z0m_BXRFGjDU75S1ULyLUQ.png"/></div></div></figure><h2 id="04bd" class="ma mb jg bd mc md me dn mf mg mh dp mi ko mj mk ml ks mm mn mo kw mp mq mr ms bi translated">第7步:释放(vNext)</h2><p id="a2ba" class="pw-post-body-paragraph kd ke jg kf b kg mt ki kj kk mu km kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated">现在提交一个分支<code class="fe li lj lk ll b">release/1.0.1-rc.0</code>(或者创建它，如果缺少的话)来测试我们的CI/CD过程，包括两个Azure管道——一个构建和一个发布。确保<code class="fe li lj lk ll b">azure-pipelines.yml</code>文件在里面！</p><p id="86d7" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我在这里专门为这篇文章创建了一个回购协议<a class="ae jd" href="https://github.com/scuri-lib/automate-package-with-azure" rel="noopener ugc nofollow" target="_blank">https://github.com/scuri-lib/automate-package-with-azure</a>以及<a class="ae jd" href="https://github.com/scuri-lib/automate-package-with-azure/tree/release/1.0.1-rc.0" rel="noopener ugc nofollow" target="_blank">发布候选</a>和<a class="ae jd" href="https://github.com/scuri-lib/automate-package-with-azure/tree/release/1.0.1" rel="noopener ugc nofollow" target="_blank">最终发布</a>分支。</p><p id="4f37" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您应该得到一个构建运行:</p><figure class="mz na nb nc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nv"><img src="../Images/ce090346befb10213a44a86d91db153c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SfPe9Op81wRc7AMHeE0EEQ.png"/></div></div></figure><p id="d2ac" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这又会触发一次发布运行:</p><figure class="mz na nb nc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ob"><img src="../Images/efce566807f0bd82bad8f102ad20fbe9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u1JY3Tg6vQQ8SdOnG9e5xQ.png"/></div></div></figure><p id="6d59" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">请注意，它正在等待批准。如果不批准，它将超时。也可以从“预部署条件”面板中编辑超时。</p><h2 id="8954" class="ma mb jg bd mc md me dn mf mg mh dp mi ko mj mk ml ks mm mn mo kw mp mq mr ms bi translated">第八步:发布(vLatest)</h2><p id="d1c7" class="pw-post-body-paragraph kd ke jg kf b kg mt ki kj kk mu km kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated">首先，让我们用vNext中的任务创建一个任务组。</p><figure class="mz na nb nc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi oc"><img src="../Images/24e8dc7fd6948d54cb34999010da3ab5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XpoxAgiV9BBU2QP7JQlNbg.png"/></div></div></figure><figure class="mz na nb nc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi od"><img src="../Images/320f554fea9319b7292cf12841124392.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tewlnWxZLKA-Lhc_LHofLw.png"/></div></div></figure><p id="44d0" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">用<code class="fe li lj lk ll b">$(token)</code>填写<code class="fe li lj lk ll b">token</code>参数值并保存。现在这是一个任务组参数，我们将把环境变量<code class="fe li lj lk ll b">$(token)</code>赋予它。</p><figure class="mz na nb nc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi oe"><img src="../Images/bc19a50c56e6d4b092893bef96156df2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6NoFu_oZ3snpVOw9SNyCbw.png"/></div></div></figure><figure class="mz na nb nc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi of"><img src="../Images/253618c5da1dec690a730bdfd4855c0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P9tLUVdR4ZYeKkcPm7Bi3g.png"/></div></div></figure><p id="3ee8" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">点击任务组创建信息消息。或者，在“任务组”菜单项中找到它。</p><figure class="mz na nb nc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi og"><img src="../Images/9a6ba6fcee55c442e448584536bd558a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sDR0daiqSPhFqBU9bUEzfg.png"/></div></div></figure><p id="248a" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">编辑其中的Bash脚本部分。使发布使用标签的环境变量。然后将其添加到下面的“环境变量”部分。这将参数化任务组，并允许我们在我们的vLatest版本中重用它。</p><figure class="mz na nb nc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi oh"><img src="../Images/775ae6f730c9cb05d8d5a5336f757a96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kNS5N3hQHyh-WgohLu86og.png"/></div></div></figure><p id="73de" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在回到我们的发布管道编辑。</p><figure class="mz na nb nc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi oi"><img src="../Images/e3c30ea37fe0e81bbc595d60a41003eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5Y3sfegI241YOzIrw21Anw.png"/></div></div></figure><figure class="mz na nb nc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi oj"><img src="../Images/4ec2c17fba18ead6b0d9fa7b12f86b9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s4q6ag0Jl6rmH3sK6YUaMg.png"/></div></div></figure><p id="5bd0" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">将标签填写为<code class="fe li lj lk ll b">next</code>记住，这是我们的预发布部署。保存并返回主发布页面，添加新阶段。确保您没有选择当前阶段，因为这将为其添加后续阶段。我们想要一个平行的阶段<strong class="kf jh"> : </strong></p><figure class="mz na nb nc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ok"><img src="../Images/066b1ed474e489b96451c0c961e3dfd1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cc5A9EIvdPOW2CaxEE_otQ.png"/></div></div></figure><p id="449c" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">再次使用空模板，并将其重命名:</p><figure class="mz na nb nc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ol"><img src="../Images/aa0c5928c7953ce9d4e5c32397bde48b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nWCd0d47qh9KQq55bfb14A.png"/></div></div></figure><figure class="mz na nb nc gt is gh gi paragraph-image"><div class="gh gi om"><img src="../Images/a512219b8d8c7b9e2783272c5e45600e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1260/format:webp/1*s_0JbJPNS6JWYB0F_BA_hA.png"/></div></figure><p id="bb3b" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">添加刚刚创建的任务组</p><figure class="mz na nb nc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi on"><img src="../Images/14c86118467b1f3e3e23e7f44b78e226.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1E-J-pbDVGkTS9jfcd5bTA.png"/></div></div></figure><p id="242d" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">并填入参数token <code class="fe li lj lk ll b">$(token)</code>和tag <code class="fe li lj lk ll b">latest</code></p><figure class="mz na nb nc gt is gh gi paragraph-image"><div class="gh gi oo"><img src="../Images/bebe0f234a4c3f0e088cb402d0ad5670.png" data-original-src="https://miro.medium.com/v2/resize:fit:452/format:webp/1*ePbqsbqO0lqpBW4lL-yqDg.png"/></div></figure><p id="7379" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">保存。</p><p id="e4ab" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在主页的侧面板中重复预部署批准设置和部署队列设置</p><figure class="mz na nb nc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi op"><img src="../Images/bd851bbbecbf1a199a1cf3e04f6e10f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3k85W2XW-9xk6hUmZOyCFA.png"/></div></div></figure><p id="eaab" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">选择可以批准的用户:</p><figure class="mz na nb nc gt is gh gi paragraph-image"><div class="gh gi oq"><img src="../Images/8bd7aa5158af2f81d12c2374e2be45a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1246/format:webp/1*n3gc1iZv1abmOEKtGodDuA.png"/></div></figure><p id="be48" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">完成—测试部署。致力于你的<code class="fe li lj lk ll b">release/1.0.0</code>分支，你应该得到</p><figure class="mz na nb nc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi or"><img src="../Images/80d7ec84d2388d4dbb9af3e06255dcf1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uCj5UieNE__FmO9-jJFCqQ.png"/></div></div></figure><figure class="mz na nb nc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi os"><img src="../Images/ea4ac29be007a22bf325d436d22e8c56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xzBbNRRid0qE5lYKmXhkdQ.png"/></div></div></figure><p id="f5b4" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">批准vLatest并查看验证包发布是否成功。</p><figure class="mz na nb nc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ot"><img src="../Images/bdba40ad0f95153a9a08e6023e33b659.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EKTuc46vviae8U74R4U25A.png"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk translated">你有没有注意到我不得不发布1.0.2，因为1.0.1是和下一个标签一起发布的，而不是1.0.1-rc.0。</figcaption></figure><p id="ffaf" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">上图—显示了vLatest批准和成功发布以及仍在等待中的vNext。另外，请注意被跳过的Release-6部署阶段，我们使用“部署队列”设置对其进行了配置。</p><h2 id="f232" class="ma mb jg bd mc md me dn mf mg mh dp mi ko mj mk ml ks mm mn mo kw mp mq mr ms bi translated">完成的</h2><p id="7c39" class="pw-post-body-paragraph kd ke jg kf b kg mt ki kj kk mu km kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated">恭喜你。您现在有了一个工作的NPM发布管道，它由一个带有<code class="fe li lj lk ll b">release/</code>前缀的分支的提交触发，然后批准您想要的任何发布。</p><h2 id="cf37" class="ma mb jg bd mc md me dn mf mg mh dp mi ko mj mk ml ks mm mn mo kw mp mq mr ms bi translated">如何找到日志？</h2><p id="c7f3" class="pw-post-body-paragraph kd ke jg kf b kg mt ki kj kk mu km kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated">有多种方法可以获取日志:</p><h2 id="5ce6" class="ma mb jg bd mc md me dn mf mg mh dp mi ko mj mk ml ks mm mn mo kw mp mq mr ms bi translated">如何调试管道？</h2><p id="4c27" class="pw-post-body-paragraph kd ke jg kf b kg mt ki kj kk mu km kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated">事情往往不会像我们期望的那样发展<a class="ae jd" href="https://dev.azure.com/scurilib/scurilib/_releaseProgress?_a=release-environment-logs&amp;releaseId=5&amp;environmentId=6" rel="noopener ugc nofollow" target="_blank">，就像这次发布的</a>。首先要做的是查看错误。在这种情况下，版本1.0.1已经发布。</p><p id="3855" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">另一件事是登录到控制台，像<code class="fe li lj lk ll b">ls</code>查看工作文件夹中的所有文件，<code class="fe li lj lk ll b">pwd</code>查看工作目录的绝对路径，<code class="fe li lj lk ll b">echo</code>查看env变量，等等。使用控制台，它是您了解代理的机器和环境的窗口。</p><h2 id="ec66" class="ma mb jg bd mc md me dn mf mg mh dp mi ko mj mk ml ks mm mn mo kw mp mq mr ms bi translated">如果我不小心记录了我的秘密怎么办？</h2><p id="425b" class="pw-post-body-paragraph kd ke jg kf b kg mt ki kj kk mu km kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated">控制台足够智能，能够<strong class="kf jh">清除</strong>秘密<strong class="kf jh"/>。如果您或您使用的某些工具试图打印出一个秘密，您将在控制台中看到以下内容:</p><figure class="mz na nb nc gt is gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/592547035b4903d732e0f6acf7fcca6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:638/format:webp/1*Cks2y5R9v5hGLzpBbGwRvA.png"/></div></figure><p id="04ca" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从<a class="ae jd" href="https://dev.azure.com/scurilib/scurilib/_releaseProgress?_a=release-environment-logs&amp;releaseId=5&amp;environmentId=6" rel="noopener ugc nofollow" target="_blank">发出一个(失败的)释放信号</a>。</p><h2 id="b702" class="ma mb jg bd mc md me dn mf mg mh dp mi ko mj mk ml ks mm mn mo kw mp mq mr ms bi translated">我可以在哪里了解更多信息？</h2><p id="a7e6" class="pw-post-body-paragraph kd ke jg kf b kg mt ki kj kk mu km kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated">我学习的主要地方是docs网站。是我会推荐的— <a class="ae jd" href="https://docs.microsoft.com/en-us/azure/devops/pipelines/?view=azure-devops" rel="noopener ugc nofollow" target="_blank">链接</a>。</p><p id="28ec" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf jh">感谢阅读！</strong></p></div><div class="ab cl ov ow hu ox" role="separator"><span class="oy bw bk oz pa pb"/><span class="oy bw bk oz pa pb"/><span class="oy bw bk oz pa"/></div><div class="ij ik il im in"><p id="7f24" class="pw-post-body-paragraph kd ke jg kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我正在做几个开源的Angular开发工具项目::<br/> <a class="ae jd" href="https://www.npmjs.com/package/scuri" rel="noopener ugc nofollow" target="_blank"> SCuri </a> —单元测试样板自动化(也有<a class="ae jd" href="https://www.npmjs.com/package/scuri#scuri-for-enterprise" rel="noopener ugc nofollow" target="_blank">企业支持</a>选项)<br/><a class="ae jd" href="https://www.npmjs.com/package/ngx-forms-typed" rel="noopener ugc nofollow" target="_blank">ngx-forms-typed</a>—Angular forms，只有强类型！<br/><a class="ae jd" href="https://www.npmjs.com/package/ngx-show-form-control" rel="noopener ugc nofollow" target="_blank">ngx-show-form-control</a>—可视化/编辑任何表单控件/组</p></div></div>    
</body>
</html>