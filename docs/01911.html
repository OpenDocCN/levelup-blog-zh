<html>
<head>
<title>What’s My Service Principal Name?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我的服务主要名称是什么？</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/whats-my-service-principal-name-b0bf498adac8?source=collection_archive---------11-----------------------#2020-02-05">https://levelup.gitconnected.com/whats-my-service-principal-name-b0bf498adac8?source=collection_archive---------11-----------------------#2020-02-05</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="4560" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何从DevOps服务连接中找到SPN</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/a23236ce74212de98b0186d06561c2ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ePR3ueM1Otm8Sd7Y"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">泽维尔·萨默在<a class="ae ky" href="https://unsplash.com/s/photos/azure-devops" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="2cf6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我在Azure DevOps中有这个Azure Key Vault发布管道步骤:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lv"><img src="../Images/a38aa7ccabae9d5286c971bb17b8a558.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S8eEElX7B1oCCV7FRMIa-Q.jpeg"/></div></div></figure><p id="d82b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是它给了我这个错误:</p><blockquote class="lw lx ly"><p id="ff1a" class="kz la lz lb b lc ld ju le lf lg jx lh ma lj lk ll mb ln lo lp mc lr ls lt lu im bi translated">拒绝访问。在任何访问策略上都找不到调用者。指定的Azure服务连接需要对选定的密钥库拥有Get，List secret管理权限。</p></blockquote><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi md"><img src="../Images/c844fd28ef9bc2694ab12260d3048806.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wTViRaHbP_HHqrGLmE12DA.jpeg"/></div></div></figure><p id="40c5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我需要在密钥库中授予我的服务连接读取权限。</p><p id="5221" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我在Key Vault中添加访问策略时，我不知道我的服务连接的SPN的名称是什么。</p><h2 id="40f4" class="me mf it bd mg mh mi dn mj mk ml dp mm li mn mo mp lm mq mr ms lq mt mu mv mw bi translated">这就是我如何找到SPN的</h2><p id="8aae" class="pw-post-body-paragraph kz la it lb b lc mx ju le lf my jx lh li mz lk ll lm na lo lp lq nb ls lt lu im bi translated">点击“Azure订阅”旁边的“管理”(见上图)。</p><p id="d3ee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后点击“编辑”:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nc"><img src="../Images/53c1da3ccb803737fc04db43a2d55ef9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UBqovvMeHoHbsGf4M1otbg.jpeg"/></div></div></figure><p id="8175" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后点击下面突出显示的“使用完整版…”:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/90279e8318695b20986adb531c46ffa0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1282/format:webp/1*kFacHa8xOGWK1PD2MnVlQQ.jpeg"/></div></figure><p id="fc43" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">复制“服务主体客户端ID”值:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/9d58a45d3311a4d32014cad5149fae7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1236/format:webp/1*Jb7Q7q0GO_fhr0RcAedkLA.jpeg"/></div></figure><p id="cdc1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后回到Azure门户中Key Vault的访问策略部分，点击“添加访问策略”并点击“选择主体”。</p><p id="2f6a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">复制并粘贴您之前复制的ID:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nf"><img src="../Images/303cc1ebe5d37095255466f298f76342.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LyiapC7DSboIP_7NlbzWWQ.jpeg"/></div></div></figure><p id="2504" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在您刚刚粘贴的ID的正下方，您将看到以灰色填充的矩形显示的SPN。</p><p id="372b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">点击屏幕右下角的“选择”，您的Azure Key Vault发布步骤现在将生效:)</p></div></div>    
</body>
</html>