<html>
<head>
<title>Create Your Own React Library in 2020: Step by Step</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">2020年创建自己的React库:一步一步来</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/create-your-own-react-library-in-2020-step-by-step-7c39eb1b2d7b?source=collection_archive---------1-----------------------#2019-12-10">https://levelup.gitconnected.com/create-your-own-react-library-in-2020-step-by-step-7c39eb1b2d7b?source=collection_archive---------1-----------------------#2019-12-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="c349" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">将您的React组件发布到NPM</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/d97e49e9db3d279b8fd02f16012ce898.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ha_3NjkGFpiWw7Mh7O_pEQ.png"/></div></div></figure><p id="c096" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi ln translated"><span class="l lo lp lq bm lr ls lt lu lv di"> 2020 </span>在我React职业生涯的大部分时间里，我的主要目标是<strong class="kt ir">开发应用程序。虽然我对建立自己的NPM图书馆很感兴趣，但它似乎遥不可及。<strong class="kt ir">不是的。在NPM上发布一个其他开发人员可以使用的React组件是一个简单的过程，而且会有令人难以置信的回报。接下来的一年是扩展我们视野的好时机，看看我们如何利用我们的反应技能来回馈社区。</strong></strong></p><h1 id="49e3" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">我们将构建什么:</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mo"><img src="../Images/9e7532e96b80be2d4070e08cdddaf193.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*SYxA2C4WyVlHISvAIXtR7w.gif"/></div></div></figure><p id="e368" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">今天，我们将构建一个在NPM上发布的示例组件，一个简单的中型小部件。该组件将用户名作为道具，然后获取用户的最新活动。用户的故事和评论将以模态显示。</p><p id="e0d0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您可以将这个小工具插入您的网站，展示您的媒体故事。玩玩<a class="ae mp" href="https://deeayeen.github.io/react-medium-profile/" rel="noopener ugc nofollow" target="_blank">演示</a>并查找您的用户名，感受一下它是如何工作的。</p><h1 id="4e1a" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">我们将如何构建它:</h1><p id="c12d" class="pw-post-body-paragraph kr ks iq kt b ku mq jr kw kx mr ju kz la ms lc ld le mt lg lh li mu lk ll lm ij bi translated">多亏了简单的<a class="ae mp" href="https://www.npmjs.com/package/create-react-library" rel="noopener ugc nofollow" target="_blank">创建-反应-库</a>，这个过程基本上是自动化的。让我们一步一步地创建一个<code class="fe mv mw mx my b">&lt;MediumProfile /&gt;</code>组件。</p><p id="ac32" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">全局安装<code class="fe mv mw mx my b">create-react-library</code>:</p><pre class="kg kh ki kj gt mz my na nb aw nc bi"><span id="88bd" class="nd lx iq my b gy ne nf l ng nh">npm install -g create-react-library</span></pre><p id="8516" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">启动库:</p><pre class="kg kh ki kj gt mz my na nb aw nc bi"><span id="370e" class="nd lx iq my b gy ne nf l ng nh">create-react-library</span></pre><p id="03e9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">系统将提示您输入以下详细信息:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ni"><img src="../Images/da56fe1e799ee6afa5d3b568aed981b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vNZe6n98u4OMPY4kZ37fdQ.png"/></div></div><figcaption class="nj nk gj gh gi nl nm bd b be z dk translated">使用默认模板</figcaption></figure><p id="2c82" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">所有的东西都已经打包好了，随时可以给你。</p><p id="0e30" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">第一步:<code class="fe mv mw mx my b">cd</code>进入项目并运行<code class="fe mv mw mx my b">npm start</code>。这将监视<code class="fe mv mw mx my b">src/</code>模块，并在您做出更改时将其重新编译成<code class="fe mv mw mx my b">dist/</code>。</p><p id="ab86" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">第二步:打开第二个命令行，cd到<code class="fe mv mw mx my b">/example</code>文件夹，运行<code class="fe mv mw mx my b">npm start</code>。</p><p id="6e07" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们现在有了一个实时服务器来监视<code class="fe mv mw mx my b">src</code>或<code class="fe mv mw mx my b">example</code>中的变化，并实时重新加载，这样你就可以轻松地开发你的组件。</p><p id="536d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这些步骤应该是这样的:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/94040734ce14642f25e7d7bf6ee44882.png" data-original-src="https://miro.medium.com/v2/resize:fit:1382/1*Hycm2-zJDv7TTS8ZhkTMcw.gif"/></div></figure><p id="bf4e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们将使用两个主要文件。<br/>1:<code class="fe mv mw mx my b">src/index.js</code>T23】2:<code class="fe mv mw mx my b">example/src/App.js</code></p><p id="b82c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">第一个文件(src/index.js)是我们导出的组件，将被其他开发人员使用。</p><p id="2304" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这个文件将包含一个组件，该组件将从用户接收道具并产生某种结果。</p><p id="e055" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">注意<strong class="kt ir">我们检查收到的道具的类型</strong>。例如，我们将允许用户传入一个“size”属性(一个数字),它将调整Medium按钮的大小。这意味着我们必须将<code class="fe mv mw mx my b">size: Proptypes.number</code>添加到我们的proptypes中。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi no"><img src="../Images/a2b04c057831b91494547ab486b4dfa2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gt7dGmlJP0X-tCqZrSMUZg.png"/></div></div><figcaption class="nj nk gj gh gi nl nm bd b be z dk translated">src/index.js</figcaption></figure><p id="902b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">第二个文件(example/src/App.js)是一个导入我们的组件的示例应用程序。</p><p id="3bb7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">它将为组件提供支持并产生结果。这是将在我们的浏览器上运行的内容。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi np"><img src="../Images/5c537defe2eb8dd3d646546230d53fe9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h1lBWGQPXrmGUwVLLW-VMQ.png"/></div></div><figcaption class="nj nk gj gh gi nl nm bd b be z dk translated">示例/src/App.js</figcaption></figure><p id="f631" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在我们已经有了我们需要的两个文件，我们可以开始在<code class="fe mv mw mx my b">src/index.js</code>中构建我们的组件。</p><p id="8dd9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们的组件将简单地显示一个按钮，用户可以单击它来获取中级用户的活动。</p><p id="4a97" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">单击后，会打开一个模式并显示提取的用户数据。添加一些错误检查和加载状态，我们就有了一个功能齐全的组件。</p><p id="ef7c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">为了利用外部包</strong> ( <a class="ae mp" href="https://www.npmjs.com/package/simple-react-modal" rel="noopener ugc nofollow" target="_blank">比如react-simple-modal </a>)我们必须将它们添加到我们的package.json，<strong class="kt ir">中，既作为</strong> <code class="fe mv mw mx my b"><strong class="kt ir">peerDependencies</strong></code> <strong class="kt ir">又作为</strong> <code class="fe mv mw mx my b"><strong class="kt ir">devDependencies</strong></code>。将以下依赖项添加到主package.json中:</p><p id="f2db" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe mv mw mx my b">"react-fade-in": "^0.1.6",<br/>"simple-react-modal": "^0.5.1"</code></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/58c90a9a57ab878f74ddb9b328b7e5c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:976/format:webp/1*d8Fo4tdn-MDceA2lG2RzNw.png"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/e03216f08ab3a0d31841b9d0bdf0cb0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1220/format:webp/1*DAd14zMhcufhj2_3SzTz1Q.png"/></div></figure><p id="8099" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在只需从主目录中选择<code class="fe mv mw mx my b">yarn install</code>，再从主目录和示例目录中选择<code class="fe mv mw mx my b">npm start</code>。</p><p id="bc9a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们现在可以在我们的组件中使用<a class="ae mp" href="https://www.npmjs.com/package/react-fade-in" rel="noopener ugc nofollow" target="_blank"> react-fade-in </a>和<a class="ae mp" href="https://www.npmjs.com/package/simple-react-modal" rel="noopener ugc nofollow" target="_blank"> simple-react-modal </a>包，当其他开发人员安装我们的包时，他们也会安装与之关联的<code class="fe mv mw mx my b">peerDependencies</code>。</p><p id="1f89" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">太好了，现在我们可以实际构建我们的组件了。</p><p id="a6c2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我构建了一个API来获取中等用户的RSS提要，并将其托管在Heroku上。鉴于本文的范围，我将简单地让您将整个组件复制到<code class="fe mv mw mx my b">src/index.js</code>中，因为我们希望将重点放在<strong class="kt ir">在NPM </strong>上发布组件上。</p><p id="259e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">将以下代码复制到<code class="fe mv mw mx my b">src/index.js</code>，替换之前的所有内容:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="8d81" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">该按钮将是一个图像(medium.png ),因此继续从这里下载图像<a class="ae mp" href="https://miro.medium.com/max/390/1*emiGsBgJu2KHWyjluhKXQw.png" rel="noopener">,并将其放在<code class="fe mv mw mx my b">/src</code>文件夹中。</a></p><p id="0119" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">就是这样！现在转到<code class="fe mv mw mx my b">example/src/App.js</code>，用以下代码替换内容:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="23ff" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们简单地从“react-medium-profile”导入了<code class="fe mv mw mx my b">MediumProfile</code>组件，为它提供了一个<code class="fe mv mw mx my b">username</code>道具，它现在可以获取我们的配置文件了。</p><h1 id="829c" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">发布到NPM</h1><p id="8cca" class="pw-post-body-paragraph kr ks iq kt b ku mq jr kw kx mr ju kz la ms lc ld le mt lg lh li mu lk ll lm ij bi translated">这一部分再简单不过了。create-react-library从您的<code class="fe mv mw mx my b">examples</code>文件夹中自动生成一个GitHub pages演示，并使用您的自述文件作为描述发布到NPM。</p><p id="16c1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">确保您首先使用<code class="fe mv mw mx my b">npm login</code>登录到NPM，然后运行:</p><p id="d222" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe mv mw mx my b">npm publish</code>:这将自动将您的包发布到NPM</p><p id="2d52" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe mv mw mx my b">npm run deploy</code>:这会自动将您的示例部署到Github页面</p><p id="84a0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><a class="ae mp" href="https://github.com/deeayeen/react-medium-profile" rel="noopener ugc nofollow" target="_blank">在Github上查看我们的完整项目</a></p><h1 id="50fb" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">你做到了！</h1><p id="283a" class="pw-post-body-paragraph kr ks iq kt b ku mq jr kw kx mr ju kz la ms lc ld le mt lg lh li mu lk ll lm ij bi translated">您已经成功发布了一个React包，其他开发人员现在可以将它集成到他们的项目中。</p><p id="f7fd" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">为开发者编写组件而不是为用户编写应用会让你接触到不同的思维方式。这是很好的实践，让你成为更强的程序员，也是回报开源社区的好方法。</p><p id="e03a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">一定要写一个带有一些gif的漂亮的自述文件，让你的包更有吸引力和直观，并添加一些关于可以传入哪些道具的说明。</p><p id="e28c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">就是这样！如果您正在寻找2020年的更多React提示，请查看如何在来年升级您的React UX:</p><div class="nv nw gp gr nx ny"><a rel="noopener  ugc nofollow" target="_blank" href="/master-ux-with-react-in-2020-four-ways-to-upgrade-your-react-app-user-experience-a053b3ffbf59"><div class="nz ab fo"><div class="oa ab ob cl cj oc"><h2 class="bd ir gy z fp od fr fs oe fu fw ip bi translated">2020年React掌握UX:升级React应用用户体验的四种方式</h2><div class="of l"><h3 class="bd b gy z fp od fr fs oe fu fw dk translated">如果你的应用程序给用户良好的感觉，他们更有可能继续使用它。</h3></div><div class="og l"><p class="bd b dl z fp od fr fs oe fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="oh l"><div class="oi l oj ok ol oh om kp ny"/></div></div></a></div></div></div>    
</body>
</html>