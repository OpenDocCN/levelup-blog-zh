<html>
<head>
<title>OMBD#23: Time-Traveling in Git? Meet Git Reflog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">OMBD#23:在Git中的时间旅行？认识Git Reflog</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/time-traveling-in-git-meet-git-reflog-ff216419e564?source=collection_archive---------21-----------------------#2021-04-06">https://levelup.gitconnected.com/time-traveling-in-git-meet-git-reflog-ff216419e564?source=collection_archive---------21-----------------------#2021-04-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="8de4" class="pw-subtitle-paragraph jr ip iq bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">让我们学习使用这一高级工具的力量来拯救灾难</h2></div><p id="4e5c" class="pw-post-body-paragraph kj kk iq kl b km kn jv ko kp kq jy kr ks kt ku kv kw kx ky kz la lb lc ld le ij bi translated">欢迎来到第23期，继续成为一名更好的开发人员，在这里，通过阅读简短的知识，每次一分钟，你将成为一名更成功的软件开发人员。</p><h2 id="08e3" class="lf lg iq bd lh li lj dn lk ll lm dp ln ks lo lp lq kw lr ls lt la lu lv lw lx bi translated"><a class="ae ly" href="https://medium.com/codex/a-snazzy-trick-how-to-style-your-console-log-messages-2b23ac281b31" rel="noopener">⏮️ </a> <a class="ae ly" href="https://jportella93.medium.com/one-minute-to-become-a-better-developer-ombd-5b1a1d37468e" rel="noopener">🔛</a></h2><figure class="ma mb mc md gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi lz"><img src="../Images/84ecbb5df4fdcaaaa88e933042aab080.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-ghw_C9Eg6JvuHVviD3kgA.jpeg"/></div></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk translated">我的好友洛尔·尼古拉斯的艺术作品</figcaption></figure><h2 id="ef01" class="lf lg iq bd lh li lj dn lk ll lm dp ln ks lo lp lq kw lr ls lt la lu lv lw lx bi translated">问题是</h2><p id="814a" class="pw-post-body-paragraph kj kk iq kl b km mp jv ko kp mq jy kr ks mr ku kv kw ms ky kz la mt lc ld le ij bi translated">一个被意外删除的本地分支，被压扁的提交了我们希望不被压扁的…当灾难发生时，如果我们能在Git 中<strong class="kl ir">时间旅行不是很棒吗？</strong></p><h2 id="f619" class="lf lg iq bd lh li lj dn lk ll lm dp ln ks lo lp lq kw lr ls lt la lu lv lw lx bi translated">一个解决方案</h2><p id="7101" class="pw-post-body-paragraph kj kk iq kl b km mp jv ko kp mq jy kr ks mr ku kv kw ms ky kz la mt lc ld le ij bi translated">让我们来学习如何使用<code class="fe jn jo jp jq b"><strong class="kl ir">git reflog</strong></code>。首先，一个<strong class="kl ir"> </strong>位的上下文。</p><p id="f944" class="pw-post-body-paragraph kj kk iq kl b km kn jv ko kp kq jy kr ks kt ku kv kw kx ky kz la lb lc ld le ij bi translated">引用日志或“reflogs”记录本地存储库中分支和其他引用的提示何时被更新。</p><p id="ec41" class="pw-post-body-paragraph kj kk iq kl b km kn jv ko kp kq jy kr ks kt ku kv kw kx ky kz la lb lc ld le ij bi translated">默认情况下，目标是HEAD——当前活动分支的符号引用——但是其他分支、标签、远程和Git存储也可以作为目标。</p><p id="3bad" class="pw-post-body-paragraph kj kk iq kl b km kn jv ko kp kq jy kr ks kt ku kv kw kx ky kz la lb lc ld le ij bi translated"><code class="fe jn jo jp jq b"><strong class="kl ir">git reflog</strong></code>用语法<code class="fe jn jo jp jq b">name@{qualifier}</code>显示“动作”。<code class="fe jn jo jp jq b">HEAD@{2}</code>意为“两招前的头”。</p><p id="c80b" class="pw-post-body-paragraph kj kk iq kl b km kn jv ko kp kq jy kr ks kt ku kv kw kx ky kz la lb lc ld le ij bi translated">让我们付诸实践吧。</p><h2 id="6b3b" class="lf lg iq bd lh li lj dn lk ll lm dp ln ks lo lp lq kw lr ls lt la lu lv lw lx bi translated">恢复本地删除的分支</h2><p id="67f9" class="pw-post-body-paragraph kj kk iq kl b km mp jv ko kp mq jy kr ks mr ku kv kw ms ky kz la mt lc ld le ij bi translated">我们删除了一个本地分支，如何恢复它？</p><pre class="ma mb mc md gt mu jq mv mw aw mx bi"><span id="ae9d" class="lf lg iq jq b gy my mz l na nb">git branch -D navbar-feature</span></pre><p id="18d8" class="pw-post-body-paragraph kj kk iq kl b km kn jv ko kp kq jy kr ks kt ku kv kw kx ky kz la lb lc ld le ij bi translated">我们可以使用<code class="fe jn jo jp jq b">git reflog</code>来寻找时间旅行到的历史点。我们看到，一个移动之前，我们在刚刚删除的分支上执行了最后一次提交。</p><pre class="ma mb mc md gt mu jq mv mw aw mx bi"><span id="c9a2" class="lf lg iq jq b gy my mz l na nb">3b7a6fdb (HEAD -&gt; master) HEAD@{0}: checkout: moving from navbar-feature to master<br/><strong class="jq ir">9a07e99f HEAD@{1}: commit: feat: add Navbar<br/></strong>3b7a6fdb (HEAD -&gt; master) HEAD@{2}: checkout: moving from master to navbar-feature</span></pre><p id="cd0d" class="pw-post-body-paragraph kj kk iq kl b km kn jv ko kp kq jy kr ks kt ku kv kw kx ky kz la lb lc ld le ij bi translated">因此，我们可以创建一个新的分支，包含该历史点的内容:</p><pre class="ma mb mc md gt mu jq mv mw aw mx bi"><span id="a19e" class="lf lg iq jq b gy my mz l na nb">git checkout -b navbar-feature HEAD@{1}</span></pre><p id="1bae" class="pw-post-body-paragraph kj kk iq kl b km kn jv ko kp kq jy kr ks kt ku kv kw kx ky kz la lb lc ld le ij bi translated">太棒了，我们已经恢复了我们的分支及其提交！</p><h2 id="f5db" class="lf lg iq bd lh li lj dn lk ll lm dp ln ks lo lp lq kw lr ls lt la lu lv lw lx bi translated">恢复压缩的提交</h2><p id="7cc4" class="pw-post-body-paragraph kj kk iq kl b km mp jv ko kp mq jy kr ks mr ku kv kw ms ky kz la mt lc ld le ij bi translated">我们有3个提交:</p><pre class="ma mb mc md gt mu jq mv mw aw mx bi"><span id="f428" class="lf lg iq jq b gy my mz l na nb">747ef1e feat: add Button<br/>19d9327 feat: add Navbar<br/>effb3b4 initial commit</span></pre><p id="52d7" class="pw-post-body-paragraph kj kk iq kl b km kn jv ko kp kq jy kr ks kt ku kv kw kx ky kz la lb lc ld le ij bi translated">我们意识到我们忘记了在Navbar提交中添加一些东西，所以我们添加了这些更改，并通过修正<code class="fe jn jo jp jq b">git commit --fixup 19d9327</code>提交。我们现在的历史:</p><pre class="ma mb mc md gt mu jq mv mw aw mx bi"><span id="3994" class="lf lg iq jq b gy my mz l na nb">c2149d1 fixup! feat: add Navbar<br/>747ef1e feat: add Button<br/>19d9327 feat: add Navbar<br/>effb3b4 initial commit</span></pre><p id="52ea" class="pw-post-body-paragraph kj kk iq kl b km kn jv ko kp kq jy kr ks kt ku kv kw kx ky kz la lb lc ld le ij bi translated">现在，为了清理我们的历史，我们使用<code class="fe jn jo jp jq b">git rebase --autosquash --interactive HEAD~4</code>来压缩最后一次提交及其引用。我们的历史现在是清白的:</p><pre class="ma mb mc md gt mu jq mv mw aw mx bi"><span id="751c" class="lf lg iq jq b gy my mz l na nb">de1e9de feat: add Button<br/>b3b4932 feat: add Navbar<br/>effb3b4 initial commit</span></pre><p id="e1fb" class="pw-post-body-paragraph kj kk iq kl b km kn jv ko kp kq jy kr ks kt ku kv kw kx ky kz la lb lc ld le ij bi translated">然而，我们怎么能回到我们的历史基数之前呢？<code class="fe jn jo jp jq b">git reflog</code>显示我们提交修复时是在4次移动之前<code class="fe jn jo jp jq b">HEAD@{4}</code>，而最近的移动是基础的一部分。</p><pre class="ma mb mc md gt mu jq mv mw aw mx bi"><span id="9d3a" class="lf lg iq jq b gy my mz l na nb">4610b383 HEAD@{0}: rebase -i (finish): returning to refs/heads/master<br/>4610b383 HEAD@{1}: rebase -i (pick): feat: add Navbar<br/>52d0c48c HEAD@{2}: rebase -i (fixup): feat: add Navbar<br/>07097c96 HEAD@{3}: rebase -i (start): checkout HEAD~4<br/><strong class="jq ir">c2149d1 HEAD@{4}: commit: fixup! feat: add Navbar</strong></span></pre><p id="9189" class="pw-post-body-paragraph kj kk iq kl b km kn jv ko kp kq jy kr ks kt ku kv kw kx ky kz la lb lc ld le ij bi translated">所以我们可以<code class="fe jn jo jp jq b">git reset HEAD@{4}</code>并且我们已经恢复了我们的历史！这是<code class="fe jn jo jp jq b">git log</code>现在显示的:</p><pre class="ma mb mc md gt mu jq mv mw aw mx bi"><span id="7be4" class="lf lg iq jq b gy my mz l na nb">c2149d1 fixup! feat: add Navbar<br/>747ef1e feat: add Button<br/>19d9327 feat: add Navbar<br/>effb3b4 initial commit</span></pre><h2 id="c45b" class="lf lg iq bd lh li lj dn lk ll lm dp ln ks lo lp lq kw lr ls lt la lu lv lw lx bi translated">感谢阅读！继续学习，不要停止编码😊</h2></div><div class="ab cl nc nd hu ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="ij ik il im in"><p id="9162" class="pw-post-body-paragraph kj kk iq kl b km kn jv ko kp kq jy kr ks kt ku kv kw kx ky kz la lb lc ld le ij bi translated">【资源<br/><a class="ae ly" href="https://git-scm.com/docs/git-reflog" rel="noopener ugc nofollow" target="_blank">https://git-scm.com/docs/git-reflog</a><br/><a class="ae ly" href="https://www.atlassian.com/git/tutorials/rewriting-history/git-reflog" rel="noopener ugc nofollow" target="_blank">https://www . atlassian . com/git/tutorials/rewriting-history/git-ref log</a><br/><a class="ae ly" href="https://www.edureka.co/blog/git-reflog/" rel="noopener ugc nofollow" target="_blank">https://www.edureka.co/blog/git-reflog/</a></p><h2 id="8ae0" class="lf lg iq bd lh li lj dn lk ll lm dp ln ks lo lp lq kw lr ls lt la lu lv lw lx bi translated">如果你喜欢这个故事，你可能也会喜欢:</h2><div class="nj nk gp gr nl nm"><a href="https://towardsdev.com/5-remarkable-git-commands-that-will-boost-your-coding-productivity-e8635b20b4bf" rel="noopener  ugc nofollow" target="_blank"><div class="nn ab fo"><div class="no ab np cl cj nq"><h2 class="bd ir gy z fp nr fr fs ns fu fw ip bi translated">5个非凡的Git命令将提高您的编码效率</h2><div class="nt l"><h3 class="bd b gy z fp nr fr fs ns fu fw dk translated">这些是定制的，它们不会出现在Git文档中！在过去的两年里让我免除了无数的头痛…</h3></div><div class="nu l"><p class="bd b dl z fp nr fr fs ns fu fw dk translated">towardsdev.com</p></div></div><div class="nv l"><div class="nw l nx ny nz nv oa mj nm"/></div></div></a></div><div class="nj nk gp gr nl nm"><a href="https://jportella93.medium.com/master-git-diff-with-these-not-so-known-commands-9fecfa3006d0" rel="noopener follow" target="_blank"><div class="nn ab fo"><div class="no ab np cl cj nq"><h2 class="bd ir gy z fp nr fr fs ns fu fw ip bi translated">主Git Diff使用这些不太知名的命令</h2><div class="nt l"><h3 class="bd b gy z fp nr fr fs ns fu fw dk translated">查看您自己的拉动式请求时节省时间</h3></div><div class="nu l"><p class="bd b dl z fp nr fr fs ns fu fw dk translated">jportella93.medium.com</p></div></div><div class="nv l"><div class="ob l nx ny nz nv oa mj nm"/></div></div></a></div><h2 id="fcbd" class="lf lg iq bd lh li lj dn lk ll lm dp ln ks lo lp lq kw lr ls lt la lu lv lw lx bi translated"><a class="ae ly" href="https://medium.com/codex/a-snazzy-trick-how-to-style-your-console-log-messages-2b23ac281b31" rel="noopener">⏮️ </a> <a class="ae ly" href="https://jportella93.medium.com/one-minute-to-become-a-better-developer-ombd-5b1a1d37468e" rel="noopener">🔛</a></h2></div></div>    
</body>
</html>