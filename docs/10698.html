<html>
<head>
<title>11 Unmentioned WTF Moments In JavaScript That Will Shock You</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript中让你震惊的11个未提及的WTF时刻</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/11-unmentioned-wtf-moments-in-javascript-that-will-shock-you-9b654577dce3?source=collection_archive---------9-----------------------#2022-01-03">https://levelup.gitconnected.com/11-unmentioned-wtf-moments-in-javascript-that-will-shock-you-9b654577dce3?source=collection_archive---------9-----------------------#2022-01-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="fc92" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">Web开发技巧</h2><div class=""/><div class=""><h2 id="17b3" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">是的… JS是个怪人，很不幸。</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/bdd27ce86a5fd607332e0439d902d974.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AAsGGlGn5mbmDfEi8b2DUw.jpeg"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">截图，<a class="ae lh" href="https://en.wikipedia.org/wiki/SpongeBob_SquarePants" rel="noopener ugc nofollow" target="_blank">海绵宝宝:方块裤</a></figcaption></figure><p id="ed78" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">JavaScript是一种被广泛采用的多范例编程语言，由Brendan Eich于1995年末创建。由于它拥有活跃的社区和丰富的库，你基本上可以用它来创建任何东西。</p><p id="b58d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">然而，成为最流行的语言并不意味着它是最一致和稳定的语言。甚至，JavaScript因为一些怪异的行为被称为<em class="me">编程界的醉鬼</em>。毕竟，用固体力学在<a class="ae lh" href="https://thenewstack.io/brendan-eich-on-creating-javascript-in-10-days-and-what-hed-do-differently-today/" rel="noopener ugc nofollow" target="_blank"> 10天</a>内创造一门编程语言几乎是不可能的。</p><p id="86b9" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">所以，这里是我在JavaScript中发现的11个未提及的<em class="me"> WTF时刻</em>。</p><h1 id="3fe3" class="mf mg it bd mh mi mj mk ml mm mn mo mp ki mq kj mr kl ms km mt ko mu kp mv mw bi translated">1.新的注释样式(</h1><p id="3ffa" class="pw-post-body-paragraph li lj it lk b ll mx kd ln lo my kg lq lr mz lt lu lv na lx ly lz nb mb mc md im bi translated">Most of the symbols, operators, and methods in JavaScript are well-documented and used daily by developers. However, there still are a few of them that is not known even by senior developers. Here’s one: JavaScript has a hidden way to create single-line comments other than  【T0】 .</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ng"><img src="../Images/6051edf0947f5a71bf1db6b7d9fbc011.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UlKtSm1lf68EPxkJ6pCneQ.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">HTML comments are valid in JavaScript.</figcaption></figure><p id="43b5" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">Yes, it is pretty surprising but  【T1】  creates a single-line comment in JavaScript. This is a legacy rule coming from the times when developers were writing JavaScript codes directly into HTML, using  【T2】  tags. Since the JavaScript code is in an HTML file, the HTML comment rule must be valid in the  【T3】  tags, as well. That’s why you can use  【T4】  to create comments in JavaScript.</p><h1 id="5e86" class="mf mg it bd mh mi mj mk ml mm mn mo mp ki mq kj mr kl ms km mt ko mu kp mv mw bi translated">2. Double Dot Operator?</h1><p id="6cf9" class="pw-post-body-paragraph li lj it lk b ll mx kd ln lo my kg lq lr mz lt lu lv na lx ly lz nb mb mc md im bi translated">With ES6 (2015), we met with a magical operator: <a class="ae lh" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax" rel="noopener ugc nofollow" target="_blank"> <em class="me">三点</em> </a>)。但是，你知道自从JS创建以来，就有一个隐藏的双点运算符吗？</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ng"><img src="../Images/304a63ae113790da92218e9cbc17e12a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qVvhuIxT-Tx86ADyLu4Kpw.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">对number方法使用单个点会引发语法错误。</figcaption></figure><p id="67ed" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">而调用整数的方法如<code class="fe nc nd ne nf b">toString()</code>会抛出语法错误。但是为什么呢？给你个提示。数字在小数点后可以有小数部分。至少当你用一个点来调用方法时，JS引擎是这么认为的。点之后的部分被解释为小数部分，因为<code class="fe nc nd ne nf b">toString</code>不是一个数字，我们得到一个错误。为了防止这种行为，您在整数后添加一个点，并使其成为<code class="fe nc nd ne nf b">61.0</code>，这样您就可以在小数部分后调用该方法。</p><pre class="ks kt ku kv gt nh nf ni nj aw nk bi"><span id="2f10" class="nl mg it nf b gy nm nn l no np">61..toString() =&gt; 61.0.toString()</span></pre><h1 id="2175" class="mf mg it bd mh mi mj mk ml mm mn mo mp ki mq kj mr kl ms km mt ko mu kp mv mw bi translated">3.花括号失控了</h1><p id="d1f5" class="pw-post-body-paragraph li lj it lk b ll mx kd ln lo my kg lq lr mz lt lu lv na lx ly lz nb mb mc md im bi translated">花括号是JavaScript不可或缺的一部分。它们可用于许多目的，如对象创建、函数定义、<code class="fe nc nd ne nf b">if</code>语句等。它们无处不在，乐趣来了。</p><p id="5cb6" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><code class="fe nc nd ne nf b">{}{}</code>未定义，<code class="fe nc nd ne nf b">({}{})</code>是语法错误。然而，具有讽刺意味的是，当你创建一个非空对象时，它将返回最后一个键的最后一个值。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="074d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">如果你稍微思考一下，你可以很容易地解释这个。花括号用于JavaScript中的两个主要结构:块或对象。例如，if语句、函数表达式和声明、switch-case语句中的花括号代表一个代码块。然而，要用花括号创建一个对象，你必须把它赋给一个变量，从一个函数返回它，或者把它作为一个参数传递。</p><h1 id="d02d" class="mf mg it bd mh mi mj mk ml mm mn mo mp ki mq kj mr kl ms km mt ko mu kp mv mw bi translated">4.这个数组的长度是多少？</h1><pre class="ks kt ku kv gt nh nf ni nj aw nk bi"><span id="e2cd" class="nl mg it nf b gy nm nn l no np">let thisArrray = [, , , ,]</span></pre><p id="cbd2" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">是的，长度是多少？我听到你喊5是因为逗号之间有间隔。但是看这个:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ng"><img src="../Images/b32d7dae9f36ede5aace2584629dabce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OzlHbqMzZO-v9lCo6mztJA.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">这个数组的长度是4，不是5。</figcaption></figure><p id="276d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这确实是JavaScript有意为之的行为。如果后面没有任何东西，它就忽略最后一个逗号。以便您可以复制和粘贴行，而不会得到不希望的结果。</p><pre class="ks kt ku kv gt nh nf ni nj aw nk bi"><span id="48de" class="nl mg it nf b gy nm nn l no np">let longArray = [<br/>                 "cigu",<br/>                 "cigu",<br/>                 "cigu",<br/>                 "cigu",<br/>                 "cigu",<br/>                 "cigu",<br/>                 "cigu", // this last comma is ignored<br/>                 ]</span></pre><h1 id="8c12" class="mf mg it bd mh mi mj mk ml mm mn mo mp ki mq kj mr kl ms km mt ko mu kp mv mw bi translated">5.还有一种创建函数的方法</h1><p id="ea3d" class="pw-post-body-paragraph li lj it lk b ll mx kd ln lo my kg lq lr mz lt lu lv na lx ly lz nb mb mc md im bi translated">就函数定义而言，JavaScript中有大量的函数定义。你可以使用匿名函数表达式，箭头函数，函数声明…然而，正如你所猜测的，还有一个怪异的，有资格在这个故事中发生:<strong class="lk jd"> c </strong>。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ng"><img src="../Images/c698f3a87c3ddf4b0c23ca36249a6175.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2wSsus01rFc7UGBLKUS4sA.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">您可以通过访问元素的构造函数来创建函数。</figcaption></figure><p id="6b21" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">JavaScript将所有东西都视为对象。我是认真的，从函数到字符串，一切都是对象。这就是为什么他们有构造函数。在上面的控制台打印中，我们在变量<code class="fe nc nd ne nf b">c</code>中存储了一个<code class="fe nc nd ne nf b">"constructor"</code>字符串。使用括号，我们得到了对象(字符串)的<code class="fe nc nd ne nf b">"constructor"</code>键。对于另一个，我们可以访问构造函数的构造函数，这是一个我们可以覆盖的函数。在最后一个括号中，函数被调用，我们在控制台中看到结果。</p><h1 id="4b14" class="mf mg it bd mh mi mj mk ml mm mn mo mp ki mq kj mr kl ms km mt ko mu kp mv mw bi translated">6.这是永恒问题的答案</h1><p id="46a6" class="pw-post-body-paragraph li lj it lk b ll mx kd ln lo my kg lq lr mz lt lu lv na lx ly lz nb mb mc md im bi translated">大括号的位置多年来在程序员中一直有争议。它们应该在下一行还是必须从关键字行开始？如果你是一个在乎的人，你会说“谁在乎？”。然而，这很重要。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ng"><img src="../Images/2a9456297a5f393bf25b6a96a8b0df09.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0HfiJ2mlIwd_a0rtOW7xzA.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">如果你想返回一个对象，大括号不能在下一行。</figcaption></figure><p id="baf0" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">如果你想从一个函数返回任何东西，你必须在<code class="fe nc nd ne nf b">return</code>之后立即开始，因为在<code class="fe nc nd ne nf b">return</code>之后的东西会被忽略。在上面的例子中，第二个<a class="ae lh" href="https://developer.mozilla.org/en-US/docs/Glossary/IIFE" rel="noopener ugc nofollow" target="_blank">life</a>将花括号视为一个块而不是一个对象，因为它没有连接到return语句。所以，争议到此结束。</p><h1 id="e106" class="mf mg it bd mh mi mj mk ml mm mn mo mp ki mq kj mr kl ms km mt ko mu kp mv mw bi translated">7.无穷大是我拥有的最小值</h1><p id="0acb" class="pw-post-body-paragraph li lj it lk b ll mx kd ln lo my kg lq lr mz lt lu lv na lx ly lz nb mb mc md im bi translated">如果你是一名6个月以上的JavaScript开发人员，我敢肯定你已经听说过<code class="fe nc nd ne nf b">Math.max</code>和<code class="fe nc nd ne nf b">Math.min</code>的奇怪行为。它们返回的结果与它们的名字所描述的完全相反。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ng"><img src="../Images/2e838dd63e4a7a06a0da3ad79c0f0241.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KIrk3-rZZg_DzIil2oowMQ.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">出乎意料的是，这些方法返回相反的结果。</figcaption></figure><p id="ab0a" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">但是，当你稍微想一想，确实有道理。这些是比较数字的功能，与<code class="fe nc nd ne nf b">Math.NEGATIVE_INFINITY</code>和<code class="fe nc nd ne nf b">Math.INFINITY</code>不同。因此，它有一个不影响结果的默认参数。对于<code class="fe nc nd ne nf b">min</code>，它是<em class="me">无穷大</em>因为你放在无穷大旁边的东西会比无穷大小，对于<code class="fe nc nd ne nf b">max</code>，它是<em class="me">-无穷大</em>。</p><pre class="ks kt ku kv gt nh nf ni nj aw nk bi"><span id="10f3" class="nl mg it nf b gy nm nn l no np">Math.min(3, 8, 99) // the minimum of the set [3, 8, 99, <strong class="nf jd"><em class="me">Infinity</em></strong>]<br/>Math.max(85, 1, 2) // the maximum of the set [85, 1, 2, <strong class="nf jd">-<em class="me">Infinity</em></strong>]</span></pre><p id="956a" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">因此，当你不带参数调用这些函数时，它们将简单地返回缺省的且唯一的参数。</p><h1 id="adf2" class="mf mg it bd mh mi mj mk ml mm mn mo mp ki mq kj mr kl ms km mt ko mu kp mv mw bi translated">8.未定义，但是是吗？</h1><p id="9b07" class="pw-post-body-paragraph li lj it lk b ll mx kd ln lo my kg lq lr mz lt lu lv na lx ly lz nb mb mc md im bi translated">保留字使编程语言具有功能性。它们可以是一些影响程序流程的常量或语句，如<code class="fe nc nd ne nf b">if</code>或<code class="fe nc nd ne nf b">null</code>。然而，这里有一个令人困惑的问题:你可以定义<code class="fe nc nd ne nf b">undefined</code>。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ng"><img src="../Images/7679708fdce57634fe88525f704873b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cwl2yF4mjmBugx6Y9CNHwQ.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">令人惊讶的是，<strong class="bd mh">未定义的</strong>并不是JavaScript中的保留字。</figcaption></figure><p id="8d02" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">是的，如果你试图给<code class="fe nc nd ne nf b">undefined</code>赋值什么，JavaScript都不会冲你吼。这是因为与<code class="fe nc nd ne nf b">if</code>或<code class="fe nc nd ne nf b">null</code>不同，<code class="fe nc nd ne nf b">undefined</code>不是保留关键字。这里有一个<a class="ae lh" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Lexical_grammar#keywords" rel="noopener ugc nofollow" target="_blank">保留的</a>关键字列表，这样你可以检查一下。</p><h1 id="f288" class="mf mg it bd mh mi mj mk ml mm mn mo mp ki mq kj mr kl ms km mt ko mu kp mv mw bi translated">9.一个未知的操作符(！！)</h1><p id="ef3b" class="pw-post-body-paragraph li lj it lk b ll mx kd ln lo my kg lq lr mz lt lu lv na lx ly lz nb mb mc md im bi translated">要将一个值转换成布尔值，你可以使用<code class="fe nc nd ne nf b">Boolean()</code>或者可以使用<code class="fe nc nd ne nf b"><a class="ae lh" href="https://stackoverflow.com/questions/784929/what-is-the-not-not-operator-in-javascript" rel="noopener ugc nofollow" target="_blank">!!</a></code> <a class="ae lh" href="https://stackoverflow.com/questions/784929/what-is-the-not-not-operator-in-javascript" rel="noopener ugc nofollow" target="_blank">运算符</a>。但是你知道吗,<code class="fe nc nd ne nf b">!!</code>不是官方运营商，而是两个<em class="me">不是</em>运营商粘在一起的。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ng"><img src="../Images/72fb8bea1a518962cd99e8b8c5358799.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S2BJxgdajiMtXKwGFhn5Xg.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">要将一个值转换为布尔值，可以使用“！!'。</figcaption></figure><p id="b674" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">如你所见，<code class="fe nc nd ne nf b">!!</code>将后面的内容转换成它的布尔等价形式<a class="ae lh" href="https://dev.to/osumgbachiamaka/javascript-truthy-and-falsy-values-3hm0" rel="noopener ugc nofollow" target="_blank">。第一个<code class="fe nc nd ne nf b">!</code>将值转换为布尔值，并接受补码。之后，为了得到初始值，我们必须用一个<code class="fe nc nd ne nf b">!</code>再补一次。</a></p><h1 id="80d9" class="mf mg it bd mh mi mj mk ml mm mn mo mp ki mq kj mr kl ms km mt ko mu kp mv mw bi translated">10.假即是真</h1><p id="c9fd" class="pw-post-body-paragraph li lj it lk b ll mx kd ln lo my kg lq lr mz lt lu lv na lx ly lz nb mb mc md im bi translated">还有一堆falsy值比如<code class="fe nc nd ne nf b">“”, 0, null, undefined, NaN</code>。当您将它们包含在布尔运算中时，它们将被视为<code class="fe nc nd ne nf b">false</code>。然而，这个<em class="me"> WTF时刻</em>的明星是真实的<code class="fe nc nd ne nf b">false</code>是真实的。你不相信我吗？看看这个控制台打印。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ng"><img src="../Images/5efb4fde3af8347937f869eff5e9391e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*paCaI60eFjRcgVqJMaeBlQ.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated"><strong class="bd mh"> new Boolean(false) </strong>是truthy，因为new关键字front。</figcaption></figure><p id="b862" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">正如您在上一篇技巧文章中所知道的，<code class="fe nc nd ne nf b">!!</code>将值转换成它们对应的布尔型。但是为什么<code class="fe nc nd ne nf b">new Boolean(false)</code>是真实的呢？</p><p id="5b0b" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在JavaSript中，<code class="fe nc nd ne nf b">new</code>关键字用于创建一个类的实例，它是一个对象。所以，你用<code class="fe nc nd ne nf b">new Boolean</code>创建的是一个包含布尔值的对象，而不是一个真正的布尔值，默认情况下，对象是真的。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ng"><img src="../Images/82a6df74e0a15e03260ff45afdba3cad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3FC3QlLP576Uo_-HJ4ehHQ.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">要访问布尔值，可以对Boolean对象使用“valueOf”方法。</figcaption></figure><h1 id="77e8" class="mf mg it bd mh mi mj mk ml mm mn mo mp ki mq kj mr kl ms km mt ko mu kp mv mw bi translated">11.函数式编程正在打破…</h1><p id="4266" class="pw-post-body-paragraph li lj it lk b ll mx kd ln lo my kg lq lr mz lt lu lv na lx ly lz nb mb mc md im bi translated">函数方法是关于函数的输入和你得到的输出，这是这个范例不可改变的事实:</p><blockquote class="ns"><p id="3166" class="nt nu it bd nv nw nx ny nz oa ob md dk translated">在纯函数中，相同的输入应该产生相同的输出。(λ)</p></blockquote><p id="446b" class="pw-post-body-paragraph li lj it lk b ll oc kd ln lo od kg lq lr oe lt lu lv of lx ly lz og mb mc md im bi translated">然而，由于它在一个<em class="me"> WTF时刻</em>列表中，我发现了一个奇怪的现象。当您使用相同的输入多次运行RegExp <code class="fe nc nd ne nf b">test</code>函数时，它会给出不一致的结果。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ng"><img src="../Images/4bc71901381fc12c5db9b41bb1971988.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GXeyolLVBgOZ-w_-szsDUw.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">当用相同的参数调用一个函数时，它必须给出相同的结果，不像这个。</figcaption></figure><p id="5257" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">从表面上看，这看起来不一致，因为我们用相同的参数运行函数。然而，当我们在具有全局标志(g)的RegExp上运行<code class="fe nc nd ne nf b">test</code>时，我们<a class="ae lh" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/test#Using_test()_on_a_regex_with_the_global_flag" rel="noopener ugc nofollow" target="_blank">不知不觉地更新了</a>的<code class="fe nc nd ne nf b">lastIndex</code>。因此，测试在第一次匹配后开始，直到结束并返回<code class="fe nc nd ne nf b">false</code>。为了防止这种行为，你必须在每次调用测试时重置<code class="fe nc nd ne nf b">lastIndex</code>。</p><pre class="ks kt ku kv gt nh nf ni nj aw nk bi"><span id="4828" class="nl mg it nf b gy nm nn l no np">regexp.lastIndex = 0</span></pre><h1 id="1042" class="mf mg it bd mh mi mj mk ml mm mn mo mp ki mq kj mr kl ms km mt ko mu kp mv mw bi translated">结论</h1><p id="c83f" class="pw-post-body-paragraph li lj it lk b ll mx kd ln lo my kg lq lr mz lt lu lv na lx ly lz nb mb mc md im bi translated">就是这样，各位！现在你知道了JavaScript中的11个WTF时刻。我试着挑选那些不太受欢迎和知名的，这样你可以学到新的东西。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><a href="https://mailchi.mp/a45f8fb96cc9/subscribe"><div class="gh gi oh"><img src="../Images/9617ff4f7d33119c4d4e3d20c90708a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TtX3EIdGpUqGCOW6LtO42Q.png"/></div></a><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">订阅获得你的<strong class="bd mh">免费<em class="oi">订户专属</em>T14】故事。</strong></figcaption></figure><p id="ea1e" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">感谢您的阅读。如果你喜欢它，一定要鼓掌，如果你对这篇文章有什么要说的，请留下回应。下一个故事再见。</p></div><div class="ab cl oj ok hx ol" role="separator"><span class="om bw bk on oo op"/><span class="om bw bk on oo op"/><span class="om bw bk on oo"/></div><div class="im in io ip iq"><p id="ca14" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">喜欢看这样的故事，想支持我当作家？考虑<a class="ae lh" href="https://candurmuss.medium.com/membership" rel="noopener">报名成为中等会员</a>。每月5美元，你可以无限制地阅读媒体上的故事。如果你用我的链接注册，我会赚一点佣金。</p><div class="oq or gp gr os ot"><a href="https://candurmuss.medium.com/membership" rel="noopener follow" target="_blank"><div class="ou ab fo"><div class="ov ab ow cl cj ox"><h2 class="bd jd gy z fp oy fr fs oz fu fw jc bi translated">通过我的推荐链接加入Medium—Can dur mus</h2><div class="pa l"><h3 class="bd b gy z fp oy fr fs oz fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="pb l"><p class="bd b dl z fp oy fr fs oz fu fw dk translated">candurmuss.medium.com</p></div></div><div class="pc l"><div class="pd l pe pf pg pc ph lb ot"/></div></div></a></div><h2 id="5fd1" class="nl mg it bd mh pi pj dn ml pk pl dp mp lr pm pn mr lv po pp mt lz pq pr mv iz bi translated">进一步阅读</h2><div class="oq or gp gr os ot"><a rel="noopener  ugc nofollow" target="_blank" href="/another-attempt-to-overthrow-vs-code-jetbrains-fleet-6d96bd835b89"><div class="ou ab fo"><div class="ov ab ow cl cj ox"><h2 class="bd jd gy z fp oy fr fs oz fu fw jc bi translated">推翻VS代码的又一次尝试:JetBrains Fleet</h2><div class="pa l"><h3 class="bd b gy z fp oy fr fs oz fu fw dk translated">VS Code的市场份额正以闪电般的速度增长。JetBrains能够阻止它并主导市场吗？</h3></div><div class="pb l"><p class="bd b dl z fp oy fr fs oz fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="pc l"><div class="ps l pe pf pg pc ph lb ot"/></div></div></a></div><div class="oq or gp gr os ot"><a href="https://betterprogramming.pub/3-marvelous-javascript-tips-to-speed-up-the-development-process-ba1bb8e3fb7a" rel="noopener  ugc nofollow" target="_blank"><div class="ou ab fo"><div class="ov ab ow cl cj ox"><h2 class="bd jd gy z fp oy fr fs oz fu fw jc bi translated">加速开发过程的3个奇妙的JavaScript技巧</h2><div class="pa l"><h3 class="bd b gy z fp oy fr fs oz fu fw dk translated">下面是我最喜欢的节省时间的JavaScript技巧</h3></div><div class="pb l"><p class="bd b dl z fp oy fr fs oz fu fw dk translated">better编程. pub</p></div></div><div class="pc l"><div class="pt l pe pf pg pc ph lb ot"/></div></div></a></div><div class="oq or gp gr os ot"><a href="https://betterprogramming.pub/11-rare-javascript-one-liners-that-will-amaze-you-331659832301" rel="noopener  ugc nofollow" target="_blank"><div class="ou ab fo"><div class="ov ab ow cl cj ox"><h2 class="bd jd gy z fp oy fr fs oz fu fw jc bi translated">11个罕见的JavaScript一行程序会让你大吃一惊</h2><div class="pa l"><h3 class="bd b gy z fp oy fr fs oz fu fw dk translated">因为谁不喜欢只用一条线来建造东西呢</h3></div><div class="pb l"><p class="bd b dl z fp oy fr fs oz fu fw dk translated">better编程. pub</p></div></div><div class="pc l"><div class="pu l pe pf pg pc ph lb ot"/></div></div></a></div></div></div>    
</body>
</html>