<html>
<head>
<title>Five Tips to Create Great APIs</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创建优秀API的五个技巧</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/five-tips-to-create-great-apis-88abca1f04d4?source=collection_archive---------19-----------------------#2022-01-12">https://levelup.gitconnected.com/five-tips-to-create-great-apis-88abca1f04d4?source=collection_archive---------19-----------------------#2022-01-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="5bb9" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">API最佳实践概述</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/fc96d53b64a02aa9fbc8a2fdef449f64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xbgEjmS0YOmSTctB"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@jordanharrison?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">乔丹·哈里森</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="d691" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">编写API端点代码时，让用户能够轻松访问它们是非常重要的。这就是为什么我决定写下一些每个人都应该遵循的最佳实践。</p><h1 id="12d5" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">1.使用JSON</h1><p id="cbf3" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">如果我只能给你一条建议，那就是这条。在创建API时，应该总是在请求和响应的主体中使用JSON。</p><p id="b1dd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是大多数API所做的，也是你的用户(很可能)期望发送和接收的。事实上，JSON是一种广泛使用的格式，任何人都很容易理解。</p><p id="88eb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">虽然JSON最初是为JavaScript创建的(这个名字的意思是<strong class="ky ir">JavaScript object Notation</strong>)，但是现在大多数语言都可以解析JSON对象。下面是一个JSON的例子:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="64b8" class="mu lt iq mq b gy mv mw l mx my">{<br/>  "title": "exmaple",<br/>  "author": "John Doe",<br/>  "date": "30 August"<br/>}</span></pre><p id="341b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">即使没用过JSON，也很清楚这个对象包含了什么信息。这在调试您的API时非常有用(例如，如果您正在使用<em class="mz"> Postman </em>)。</p><p id="70d4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您以前从未见过JSON，那么您只需花很少的时间就能理解如何使用它。如您所见，非常类似于JavaScript对象(或Python字典)。它由括号内的kay值对列表组成。每个键和值都用双引号括起来，并用逗号分隔。</p><h1 id="fe5e" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">2.使用标准错误代码</h1><p id="5800" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">当API遇到错误时，您应该返回正确的错误代码。有许多值是标准的，所以您不需要创建自己的代码。</p><p id="d84e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">HTTP响应代码都是三位数，根据第一个数字分为五类:</p><ul class=""><li id="c01e" class="na nb iq ky b kz la lc ld lf nc lj nd ln ne lr nf ng nh ni bi translated"><code class="fe nj nk nl mq b">1xx</code>:响应包含一些信息；</li><li id="eb41" class="na nb iq ky b kz nm lc nn lf no lj np ln nq lr nf ng nh ni bi translated"><code class="fe nj nk nl mq b">2xx</code>:请求执行成功；</li><li id="7c5a" class="na nb iq ky b kz nm lc nn lf no lj np ln nq lr nf ng nh ni bi translated"><code class="fe nj nk nl mq b">3xx</code>:请求被重定向；</li><li id="9856" class="na nb iq ky b kz nm lc nn lf no lj np ln nq lr nf ng nh ni bi translated"><code class="fe nj nk nl mq b">4xx</code>:出现客户端错误；</li><li id="5d93" class="na nb iq ky b kz nm lc nn lf no lj np ln nq lr nf ng nh ni bi translated"><code class="fe nj nk nl mq b">5xx</code>:出现了服务器错误。</li></ul><p id="3d94" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最常见的代码是:</p><ul class=""><li id="8dec" class="na nb iq ky b kz la lc ld lf nc lj nd ln ne lr nf ng nh ni bi translated"><code class="fe nj nk nl mq b">200</code> <strong class="ky ir"> Ok: </strong>一般成功响应；</li><li id="fddc" class="na nb iq ky b kz nm lc nn lf no lj np ln nq lr nf ng nh ni bi translated"><code class="fe nj nk nl mq b">201</code> <strong class="ky ir">已创建:</strong>根据用户的要求，创建了一些东西；</li><li id="efb6" class="na nb iq ky b kz nm lc nn lf no lj np ln nq lr nf ng nh ni bi translated"><code class="fe nj nk nl mq b">401</code> <strong class="ky ir">未授权</strong>:因用户未通过认证(或认证失败)而发生错误；</li><li id="0d4b" class="na nb iq ky b kz nm lc nn lf no lj np ln nq lr nf ng nh ni bi translated"><code class="fe nj nk nl mq b">403</code> <strong class="ky ir">禁止</strong>:用户通过认证，但不允许访问该资源；</li><li id="a0ac" class="na nb iq ky b kz nm lc nn lf no lj np ln nq lr nf ng nh ni bi translated"><code class="fe nj nk nl mq b">404</code> <strong class="ky ir">找不到:</strong>找不到请求的端点/资源；</li><li id="c405" class="na nb iq ky b kz nm lc nn lf no lj np ln nq lr nf ng nh ni bi translated"><code class="fe nj nk nl mq b">500</code> <strong class="ky ir">内部服务器错误:</strong>服务器一般性错误；</li><li id="b971" class="na nb iq ky b kz nm lc nn lf no lj np ln nq lr nf ng nh ni bi translated"><code class="fe nj nk nl mq b">501</code> <strong class="ky ir">未实现:</strong>被访问的端点尚未实现。</li></ul><p id="b0f9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">关于所有代码的完整列表，你应该查看维基百科<a class="ae kv" href="https://en.wikipedia.org/wiki/List_of_HTTP_status_codes" rel="noopener ugc nofollow" target="_blank"><em class="mz">。</em></a></p><p id="95d7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">通过像其他人一样使用相同的代码，您将使您的API更易于访问。</p></div><div class="ab cl nr ns hu nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="ij ik il im in"><p id="8019" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此外，当出现错误时，您还应该返回一个对象，连同错误代码，以及关于该问题的更多信息。至少，该对象应该包含一条带有错误描述的消息。</p><p id="cad1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，如果您有一个尚未实现的端点，您可以返回下面的JSON对象(以及一个代码<code class="fe nj nk nl mq b">501</code>):</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="7bba" class="mu lt iq mq b gy mv mw l mx my">{<br/>  "message": "This endpoint has not yet been implemented",<br/>  "date": "03/01/2022",<br/>  "time": "17:22"<br/>}</span></pre><p id="1bc1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">请记住在程序中保持error对象的格式一致，这样用户就可以预测在出现错误时会收到什么(因为这种情况很少发生)。</p><h1 id="84c3" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">3.命名规格</h1><p id="e046" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">当给端点命名时，记住不要在其中包含动词。事实上，所执行的动作类型应该完全由请求类型(GET、POST等)来指定。端点的路径应该只告诉你<em class="mz">用户想要访问什么</em> <em class="mz">资源</em>，而不是<em class="mz">他们想要执行什么动作</em>。</p><p id="58e1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了更清楚地说明这一点，假设我们正在为待办事项列表创建一个API。从其获取列表的端点应该<strong class="ky ir">而不是</strong>被称为<code class="fe nj nk nl mq b">fetchList</code>。名字应该就<code class="fe nj nk nl mq b">todolist</code>吧。这样，您也可以使用相同的URL向列表中添加新元素:</p><ul class=""><li id="1d96" class="na nb iq ky b kz la lc ld lf nc lj nd ln ne lr nf ng nh ni bi translated">对<code class="fe nj nk nl mq b">todolist</code>获取列表的GET请求</li><li id="6aea" class="na nb iq ky b kz nm lc nn lf no lj np ln nq lr nf ng nh ni bi translated">向<code class="fe nj nk nl mq b">todolist</code>添加新元素的POST请求。</li></ul><p id="a5ce" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果名字是<code class="fe nj nk nl mq b">fetchList</code>，这是不可能的，你需要两个不同的端点:</p><ul class=""><li id="e2e2" class="na nb iq ky b kz la lc ld lf nc lj nd ln ne lr nf ng nh ni bi translated"><code class="fe nj nk nl mq b">fetchList</code>处理GET请求</li><li id="0fd7" class="na nb iq ky b kz nm lc nn lf no lj np ln nq lr nf ng nh ni bi translated"><code class="fe nj nk nl mq b">addElement</code>处理POSt请求。</li></ul><p id="cbea" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">很明显，这会使您的API变得更大更混乱(什么是对<code class="fe nj nk nl mq b">addElement</code>的GET请求，或者对<code class="fe nj nk nl mq b">fetchList</code>的POST请求)？).</p><h1 id="8c6d" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">4.嵌套端点</h1><p id="e498" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">在命名API的端点时，将它们嵌套在一起通常是有意义的。每当你决定这样做的时候，你应该总是遵循一个清晰的逻辑，这样就可以立刻清楚为什么某个URL会出现在选择的位置。</p><p id="2a9f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，对于上一段中的待办事项列表，我们创建了一个<code class="fe nj nk nl mq b">/todolist</code>端点，用户可以从中获取所有元素或添加新的元素。那么明智的做法是添加一个嵌套的URL <code class="fe nj nk nl mq b">/todolist/:id</code>来只获取具有指定id的元素。</p><p id="f009" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">另一方面，添加一个<code class="fe nj nk nl mq b">/todolist/users</code>端点是没有意义的。直觉上，大多数人只会搜索一个<code class="fe nj nk nl mq b">/users</code> URL，因为用户不是待办事项列表中的一个子类别。</p></div><div class="ab cl nr ns hu nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="ij ik il im in"><p id="b511" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，向所有端点添加顶层嵌套可能会很有用，它指定了API的版本。例如，我们会有:</p><ul class=""><li id="d2d0" class="na nb iq ky b kz la lc ld lf nc lj nd ln ne lr nf ng nh ni bi translated"><code class="fe nj nk nl mq b">/v1/todolist</code>、<code class="fe nj nk nl mq b">/v1/todolist/:id</code>和<code class="fe nj nk nl mq b">/v1/users</code>；</li><li id="9d96" class="na nb iq ky b kz nm lc nn lf no lj np ln nq lr nf ng nh ni bi translated"><code class="fe nj nk nl mq b">/v2/todolist</code>、<code class="fe nj nk nl mq b">/v2/todolist/:id</code>和<code class="fe nj nk nl mq b">/v2/users</code>；</li><li id="b506" class="na nb iq ky b kz nm lc nn lf no lj np ln nq lr nf ng nh ni bi translated">诸如此类…</li></ul><p id="7e84" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">以这种方式，当创建API的新版本时，我们保留旧的端点可用，并且我们不会破坏使用旧版本的人的代码。</p><h1 id="e615" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">5.过滤</h1><p id="ede0" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">通常会使用API从数据库中获取数据。通常，用户只想要它的一个子集，但是如果API不能过滤后端的数据，我们将需要返回大量(大部分)无用的数据。</p><p id="6a71" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这可能会大大降低前端的速度，尤其是在数据量非常大或者互联网速度很慢的情况下。对此的一个解决方案是允许用户向请求添加一些查询，以便我们只在响应中发送用户需要的内容。</p><p id="f4be" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您想了解更多关于API查询的知识，我推荐下面这篇文章:</p><div class="ny nz gp gr oa ob"><a href="https://rapidapi.com/blog/api-glossary/parameters/query/" rel="noopener  ugc nofollow" target="_blank"><div class="oc ab fo"><div class="od ab oe cl cj of"><h2 class="bd ir gy z fp og fr fs oh fu fw ip bi translated">什么是查询参数(在API术语中)| API词汇表</h2><div class="oi l"><h3 class="bd b gy z fp og fr fs oh fu fw dk translated">你有没有在搜索引擎上输入一个地址，结果却是它返回一个又长又复杂的东西，还带有等号…</h3></div><div class="oj l"><p class="bd b dl z fp og fr fs oh fu fw dk translated">rapidapi.com</p></div></div><div class="ok l"><div class="ol l om on oo ok op kp ob"/></div></div></a></div><h1 id="4eb6" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">结论</h1><p id="7b96" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">我希望这篇文章是有用的，并且你将在你的下一个项目中实现我的建议。以下是一些可能对您有用的资源:</p><ul class=""><li id="de20" class="na nb iq ky b kz la lc ld lf nc lj nd ln ne lr nf ng nh ni bi translated">什么是JSON(维基百科):<a class="ae kv" href="https://it.wikipedia.org/wiki/JavaScript_Object_Notation" rel="noopener ugc nofollow" target="_blank">https://it.wikipedia.org/wiki/JavaScript_Object_Notation</a></li><li id="c6f7" class="na nb iq ky b kz nm lc nn lf no lj np ln nq lr nf ng nh ni bi translated">HTTP响应代码:<a class="ae kv" href="https://www.digitalocean.com/community/tutorials/how-to-troubleshoot-common-http-error-codes" rel="noopener ugc nofollow" target="_blank">https://www . digital ocean . com/community/tutorials/how-to-trouble shooting-common-HTTP-error-codes</a></li><li id="ad0a" class="na nb iq ky b kz nm lc nn lf no lj np ln nq lr nf ng nh ni bi translated">查询参数:<a class="ae kv" href="https://rapidapi.com/blog/api-glossary/parameters/query/" rel="noopener ugc nofollow" target="_blank">https://rapidapi.com/blog/api-glossary/parameters/query/</a></li></ul><p id="5ece" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">谢谢你看完！</p></div></div>    
</body>
</html>