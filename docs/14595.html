<html>
<head>
<title>Building a Python Interpreter inside ChatGPT</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在ChatGPT中构建Python解释器</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/building-a-python-interpreter-inside-chatgpt-49251af35fea?source=collection_archive---------0-----------------------#2022-12-10">https://levelup.gitconnected.com/building-a-python-interpreter-inside-chatgpt-49251af35fea?source=collection_archive---------0-----------------------#2022-12-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="4908" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">你不再需要翻译了</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/75db7995a299d03376174065915e9cb1.png" data-original-src="https://miro.medium.com/v2/resize:fit:554/format:webp/1*bX7XxGvxvGOilsUPzCG5zA.png"/></div></figure><p id="d74f" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">这个故事的灵感来自于一个类似的故事，<a class="ae lm" href="https://www.engraved.blog/building-a-virtual-machine-inside/" rel="noopener ugc nofollow" target="_blank">在ChatGPT </a>内部构建一个虚拟机。我印象深刻，并决定尝试类似的东西，但这次不是Linux命令行工具，而是让ChatGPT成为我们的Python解释器。</p><p id="5448" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">下面是初始化ChatGPT的初始命令:</p><pre class="kj kk kl km gt ln lo lp bn lq lr bi"><span id="c24c" class="ls lt it lo b be lu lv l lw lx">I want you to act as a Python interpreter. I will type commands and you will reply with what the<br/>python output should show. I want you to only reply with the terminal output inside one unique<br/>code block, and nothing else. Do no write explanations, output only what python outputs. Do not type commands unless I<br/>instruct you to do so. When I need to tell you something in English I will do so by putting<br/>text inside curly brackets like this: {example text}. My first command is a=1.</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi ly"><img src="../Images/e68a6650a103ae9a5f2e1bfb39359383.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lw1XUAieiDk5BAB7dsno3w.png"/></div></div></figure><p id="2977" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">似乎很管用；让我们尝试一些简单的算术表达式。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi md"><img src="../Images/8152252bb09a9146302651d3f0200b68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8L_iMZnAtb7YFKGj_H2WKw.png"/></div></div></figure><p id="f947" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">又工作了；如果我们使用未导入的库，会发生什么情况？</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi me"><img src="../Images/6825109948d42c257cfca2410b5ac0ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2QpW8PU2XpP5D3ewc6DJgw.png"/></div></div></figure><p id="0abf" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">它决定帮我解决一个错误。我其实不希望它这样做，所以我会再一次要求他不要输出除了python代码以外的任何东西。</p><pre class="kj kk kl km gt ln lo lp bn lq lr bi"><span id="1667" class="ls lt it lo b be lu lv l lw lx">{Print only python output, do not print any comments}</span></pre><p id="ec1b" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">根据记录，ChatGPT有时能够使用没有导入的库，但这次我很幸运，它会打印一条错误消息。</p><p id="3b48" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">好的，我很确定ChatGPT能够完成简单的任务，让我们试试更复杂的，让它输出一个<a class="ae lm" href="https://www.programiz.com/dsa/binary-search" rel="noopener ugc nofollow" target="_blank">二分搜索法算法</a>的结果。</p><pre class="kj kk kl km gt ln lo lp bn lq lr bi"><span id="2725" class="ls lt it lo b be lu lv l lw lx"># Binary Search in python<br/><br/><br/>def binarySearch(array, x, low, high):<br/><br/>    # Repeat until the pointers low and high meet each other<br/>    while low &lt;= high:<br/><br/>        mid = low + (high - low)//2<br/><br/>        if array[mid] == x:<br/>            return mid<br/><br/>        elif array[mid] &lt; x:<br/>            low = mid + 1<br/><br/>        else:<br/>            high = mid - 1<br/><br/>    return -1<br/><br/><br/>array = [3, 4, 5, 6, 7, 8, 9]<br/>x = 4<br/><br/>result = binarySearch(array, x, 0, len(array)-1)<br/><br/>if result != -1:<br/>    print("Element is present at index " + str(result))<br/>else:<br/>    print("Not found")</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi mf"><img src="../Images/9d99bbe9fa6f7bc80eb4f7ede7d0c38a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JTmSexaod2h9IK882eJdzw.png"/></div></div></figure><p id="b66e" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">好像它不想听我只要求python输出，但输出还是正确的，令人印象深刻！</p><p id="402b" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">让我们试着输入一个不存在的数字，比如说:</p><pre class="kj kk kl km gt ln lo lp bn lq lr bi"><span id="6b33" class="ls lt it lo b be lu lv l lw lx">x = 4.5</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi mg"><img src="../Images/99b25f8f8e6d1505dee75e408a92b30d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8AY-J7sdZlWZy61Zkv7giA.png"/></div></div></figure><p id="6437" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">好吧，看起来它搞定了这个！</p><p id="4cd9" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">让我们跳到更复杂的东西。让我们从一些简单的机器学习算法开始，比如<a class="ae lm" href="https://www.geeksforgeeks.org/linear-regression-python-implementation/" rel="noopener ugc nofollow" target="_blank">线性回归</a>。我想知道ChatGPT是否有能力解决一个简单的优化任务…</p><pre class="kj kk kl km gt ln lo lp bn lq lr bi"><span id="712a" class="ls lt it lo b be lu lv l lw lx">import numpy as np<br/>import matplotlib.pyplot as plt<br/>  <br/>def estimate_coef(x, y):<br/>    # number of observations/points<br/>    n = np.size(x)<br/>  <br/>    # mean of x and y vector<br/>    m_x = np.mean(x)<br/>    m_y = np.mean(y)<br/>  <br/>    # calculating cross-deviation and deviation about x<br/>    SS_xy = np.sum(y*x) - n*m_y*m_x<br/>    SS_xx = np.sum(x*x) - n*m_x*m_x<br/>  <br/>    # calculating regression coefficients<br/>    b_1 = SS_xy / SS_xx<br/>    b_0 = m_y - b_1*m_x<br/>  <br/>    return (b_0, b_1)<br/>  <br/>def plot_regression_line(x, y, b):<br/>    # plotting the actual points as scatter plot<br/>    plt.scatter(x, y, color = "m",<br/>               marker = "o", s = 30)<br/>  <br/>    # predicted response vector<br/>    y_pred = b[0] + b[1]*x<br/>  <br/>    # plotting the regression line<br/>    plt.plot(x, y_pred, color = "g")<br/>  <br/>    # putting labels<br/>    plt.xlabel('x')<br/>    plt.ylabel('y')<br/>  <br/>    # function to show plot<br/>    plt.show()<br/>  <br/>def main():<br/>    # observations / data<br/>    x = np.array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])<br/>    y = np.array([1, 3, 2, 5, 7, 8, 8, 9, 10, 12])<br/>  <br/>    # estimating coefficients<br/>    b = estimate_coef(x, y)<br/>    print("Estimated coefficients:\nb_0 = {}  \<br/>          \nb_1 = {}".format(b[0], b[1]))<br/>  <br/>    # plotting regression line<br/>    # plot_regression_line(x, y, b)<br/>  <br/>if __name__ == "__main__":<br/>    main()</span></pre><p id="9b7e" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">这项任务的正确答案是:</p><pre class="kj kk kl km gt ln lo lp bn lq lr bi"><span id="4fb2" class="ls lt it lo b be lu lv l lw lx">Estimated coefficients:<br/>b_0 = 1.2363636363636363        <br/>b_1 = 1.1696969696969697</span></pre><p id="565d" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">下面是ChatGPT的输出:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi mh"><img src="../Images/f667b6c95ff7fdd74cbe9970dcf52ae1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dA_Gi0RycY0F5tWCAji8ZA.png"/></div></div></figure><p id="022e" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">这是接近现实的！如果我们用真正的python绘制预测，我们将得到下图:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/48d601dfdf4d7d8d5fdec14ab7e56e71.png" data-original-src="https://miro.medium.com/v2/resize:fit:764/format:webp/1*KJ685d2kmSA52lKSYtfu9A.png"/></div></figure><p id="1ef1" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">关于这个任务的另一个有趣的事实是，我对同一个命令又运行了一次，在那个时候，输出与现实完全匹配。因此，我们可以认为这个任务通过了。</p><p id="9d2f" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">好了，是时候做一些简单的神经网络的东西了！也许我们可以<a class="ae lm" href="https://machinelearningmastery.com/tutorial-first-neural-network-python-keras/" rel="noopener ugc nofollow" target="_blank">拟合一个简单的Keras模型</a>？</p><pre class="kj kk kl km gt ln lo lp bn lq lr bi"><span id="fbc1" class="ls lt it lo b be lu lv l lw lx"># first neural network with keras make predictions<br/>from numpy import loadtxt<br/>from tensorflow.keras.models import Sequential<br/>from tensorflow.keras.layers import Dense<br/># load the dataset<br/>dataset = loadtxt('pima-indians-diabetes.csv', delimiter=',')<br/># split into input (X) and output (y) variables<br/>X = dataset[:,0:8]<br/>y = dataset[:,8]<br/># define the keras model<br/>model = Sequential()<br/>model.add(Dense(12, input_shape=(8,), activation='relu'))<br/>model.add(Dense(8, activation='relu'))<br/>model.add(Dense(1, activation='sigmoid'))<br/># compile the keras model<br/>model.compile(loss='binary_crossentropy', optimizer='adam', metrics=['accuracy'])<br/># fit the keras model on the dataset<br/>model.fit(X, y, epochs=150, batch_size=10, verbose=0)<br/># make class predictions with the model<br/>predictions = (model.predict(X) &gt; 0.5).astype(int)<br/># summarize the first 5 cases<br/>for i in range(5):<br/> print('%s =&gt; %d (expected %d)' % (X[i].tolist(), predictions[i], y[i]))</span></pre><p id="3e3f" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">注意数据集实际上是一个CSV文件，ChatGPT不能访问这个文件..</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi mj"><img src="../Images/49fe020e02afb4e1b288e1d55cd531d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*67CLX_dNyaO15FbsSWszrA.png"/></div></div></figure><p id="11ee" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">好了，这是正确的输出，我很害怕。如果我将网络架构更改为不正确的架构，会发生什么情况？</p><p id="e968" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">让我们改变输入形状:</p><pre class="kj kk kl km gt ln lo lp bn lq lr bi"><span id="c4fb" class="ls lt it lo b be lu lv l lw lx">model.add(Dense(12, input_shape=(6,), activation='relu'))</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi mk"><img src="../Images/b6ef2c73a2148e088692bb9bfdf328cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PyyRalXC10qKO2L9xVZHMA.png"/></div></div></figure><p id="0ca2" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">哈！似乎在我失业前还有几年时间；这次ChatGPT没有明白其中的诀窍，仍然打印了输出。</p><p id="708c" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">好了，我们来做最后一个任务，在OpenAI内部调用Huggingface怎么样？</p><p id="33d8" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">正确输出:</p><pre class="kj kk kl km gt ln lo lp bn lq lr bi"><span id="ab56" class="ls lt it lo b be lu lv l lw lx">[{'entity_group': 'ORG',<br/>  'score': 0.9472818374633789,<br/>  'word': 'Apple',<br/>  'start': 0,<br/>  'end': 5},<br/> {'entity_group': 'PER',<br/>  'score': 0.9838564991950989,<br/>  'word': 'Steve Jobs',<br/>  'start': 74,<br/>  'end': 85},<br/> {'entity_group': 'LOC',<br/>  'score': 0.9831605950991312,<br/>  'word': 'Los Altos',<br/>  'start': 87,<br/>  'end': 97},<br/> {'entity_group': 'LOC',<br/>  'score': 0.9834540486335754,<br/>  'word': 'Californie',<br/>  'start': 100,<br/>  'end': 111},<br/> {'entity_group': 'PER',<br/>  'score': 0.9841555754343668,<br/>  'word': 'Steve Jobs',<br/>  'start': 115,<br/>  'end': 126},<br/> {'entity_group': 'PER',<br/>  'score': 0.9843501806259155,<br/>  'word': 'Steve Wozniak',<br/>  'start': 127,<br/>  'end': 141},<br/> {'entity_group': 'PER',<br/>  'score': 0.9841533899307251,<br/>  'word': 'Ronald Wayne',<br/>  'start': 144,<br/>  'end': 157},<br/> {'entity_group': 'ORG',<br/>  'score': 0.9468960364659628,<br/>  'word': 'Apple Computer',<br/>  'start': 243,<br/>  'end': 257}]</span></pre><p id="a368" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">ChatGPT输出:</p><pre class="kj kk kl km gt ln lo lp bn lq lr bi"><span id="9237" class="ls lt it lo b be lu lv l lw lx">[{'word': 'Apple', 'score': 0.9993804788589478, 'entity': 'I-ORG'}, {'word': 'Steve', 'score': 0.999255347251892, 'entity': 'I-PER'}, {'word': 'Jobs', 'score': 0.9993916153907776, 'entity': 'I-PER'}, {'word': 'Steve', 'score': 0.9993726613044739, 'entity': 'I-PER'}, {'word': 'Wozniak', 'score': 0.999698519744873, 'entity': 'I-PER'}, {'word': 'Ronald', 'score': 0.9995181679725647, 'entity': 'I-PER'}, {'word': 'Wayne14', 'score': 0.9874711670837402, 'entity': 'I-PER'}, {'word': 'Apple', 'score': 0.9974127411842163, 'entity': 'I-ORG'}, {'word': 'Computer', 'score': 0.968027651309967, 'entity': 'I-ORG'}, {'word': 'Apple', 'score': 0.8259692192077637, 'entity': 'I-ORG'}]</span></pre><p id="d9b4" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">结果接近于从<a class="ae lm" href="https://huggingface.co/Jean-Baptiste/camembert-ner" rel="noopener ugc nofollow" target="_blank">拥抱面</a>输出的结果。我的猜测是Huggingface API发生了变化，因为ChatGPT没有根据最新的历史数据进行训练，所以它以旧格式输出结果。</p><h1 id="ee33" class="ml lt it bd mm mn mo mp mq mr ms mt mu jz mv ka mw kc mx kd my kf mz kg na nb bi translated">最后</h1><p id="66f7" class="pw-post-body-paragraph kq kr it ks b kt nc ju kv kw nd jx ky kz ne lb lc ld nf lf lg lh ng lj lk ll im bi translated">在过去的几天里，我一直在玩ChatGPT，我被使用这个工具的无限可能性迷住了。虽然它不是一个真正的python解释器，但它仍然在为我编译python代码方面做得很好。我还发现它<a class="ae lm" href="https://www.linkedin.com/posts/art-kulakov_chatgpt-just-solved-2-out-of-3-hard-leetcode-activity-7006948765026705408-cLX1?utm_source=share&amp;utm_medium=member_desktop" rel="noopener ugc nofollow" target="_blank">很好的解决了leet代码难的问题</a>；看看吧！</p><p id="5865" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">总结一下:</p><pre class="kj kk kl km gt ln lo lp bn lq lr bi"><span id="fd9f" class="ls lt it lo b be lu lv l lw lx">chat gpt how will you help the humanity?</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi nh"><img src="../Images/8327b76fc79616854b01330103a04a4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F86tdPgDo8PobABtmsb8KQ.png"/></div></div></figure><p id="37d4" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">如果你还没有尝试过ChatGPT，你一定要试试，这是未来！</p><p id="49f2" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated">关注我更多AI内容:<a class="ae lm" href="https://www.linkedin.com/in/art-kulakov/\" rel="noopener ugc nofollow" target="_blank"> <em class="ni"> Linkedin </em> </a>，<a class="ae lm" href="https://twitter.com/artkulak" rel="noopener ugc nofollow" target="_blank"> <em class="ni"> Twitter </em> </a></p><p id="980c" class="pw-post-body-paragraph kq kr it ks b kt ku ju kv kw kx jx ky kz la lb lc ld le lf lg lh li lj lk ll im bi translated"><strong class="ks iu"> <em class="ni">别忘了在Medium上点赞和订阅，这激励了我很多！</em>T15】</strong></p></div></div>    
</body>
</html>