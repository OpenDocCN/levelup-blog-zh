<html>
<head>
<title>Vue.js and Firebase Authentication: A Simple Example</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Vue.js和Firebase认证:一个简单的例子</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/vue-js-and-firebase-authentication-a-simple-example-8ecc8313aac6?source=collection_archive---------2-----------------------#2020-03-04">https://levelup.gitconnected.com/vue-js-and-firebase-authentication-a-simple-example-8ecc8313aac6?source=collection_archive---------2-----------------------#2020-03-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="8f2f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我喜欢简单的东西。Vue.js是一个非常简单的Javascript框架。Firebase身份验证是向web应用程序添加身份验证的一种非常简单的方式。因此，本着简单的精神，让我们用一个非常简单的例子把这两件简单的事情放在一起。</p><h1 id="9781" class="ko kp it bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">等等，我们在做什么？</h1><p id="bcba" class="pw-post-body-paragraph jq jr it js b jt lm jv jw jx ln jz ka kb lo kd ke kf lp kh ki kj lq kl km kn im bi translated">当您创建一个新的Vue项目时，您会看到一个漂亮的默认页面，如下所示:</p><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="gh gi lr"><img src="../Images/c2e31d35985f12f4c207885e43440c00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*4dpTI71fhwP5hUfm"/></div></div><figcaption class="md me gj gh gi mf mg bd b be z dk translated">你好世界</figcaption></figure><p id="df0f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">看起来不错。它由一个单独的默认组件组成，恰当地命名为HelloWorld。我们要做的只是对组件做一些更改，以便页面上可爱的欢迎消息和详细信息对未经身份验证的用户隐藏起来:</p><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="gh gi mh"><img src="../Images/33637f73130bbebf8149add15e1db105.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*4IVGRcUODwn-v2XY"/></div></div><figcaption class="md me gj gh gi mf mg bd b be z dk translated">喂？世界？</figcaption></figure><p id="aca9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">用谷歌账户登录将会取消隐藏，这样你就可以见证它的辉煌。</p><p id="202b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们开始吧。</p><h1 id="d73f" class="ko kp it bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">设置一些东西</h1><p id="3457" class="pw-post-body-paragraph jq jr it js b jt lm jv jw jx ln jz ka kb lo kd ke kf lp kh ki kj lq kl km kn im bi translated">今天唯一的先决条件是你已经在你的系统上安装了<a class="ae mi" href="https://nodejs.org/en/download/" rel="noopener ugc nofollow" target="_blank">node . js</a>。</p><h2 id="acaf" class="mj kp it bd kq mk ml dn ku mm mn dp ky kb mo mp lc kf mq mr lg kj ms mt lk mu bi translated">vue . j</h2><p id="c166" class="pw-post-body-paragraph jq jr it js b jt lm jv jw jx ln jz ka kb lo kd ke kf lp kh ki kj lq kl km kn im bi translated">我们需要在全球范围内安装npm install Vue:</p><pre class="ls lt lu lv gt mv mw mx my aw mz bi"><span id="5aea" class="mj kp it mw b gy na nb l nc nd">npm install -g @vue/cli</span></pre><p id="92e8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">接下来，我们将创建一个Vue项目。简单易行:</p><pre class="ls lt lu lv gt mv mw mx my aw mz bi"><span id="aa97" class="mj kp it mw b gy na nb l nc nd">vue create nicevue</span></pre><p id="bc1c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">对于上面的命令，保留它们为您提供的默认选项。</p><p id="9d7d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">正如Vue CLI所建议的，跳转到您新创建的项目目录(<code class="fe ne nf ng mw b">cd nicevue</code>)，然后运行:</p><pre class="ls lt lu lv gt mv mw mx my aw mz bi"><span id="5072" class="mj kp it mw b gy na nb l nc nd">npm run serve</span></pre><p id="5d4e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">默认的欢迎页面应该在<code class="fe ne nf ng mw b">localhost:8080</code>等着你:</p><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="gh gi nh"><img src="../Images/d71ba5541e8648f3f25d06fce57c641e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*4-8RIoUs5nuir_fF"/></div></div></figure><p id="eb15" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">那很容易。</p><h2 id="951a" class="mj kp it bd kq mk ml dn ku mm mn dp ky kb mo mp lc kf mq mr lg kj ms mt lk mu bi translated">重火力点</h2><p id="f6e4" class="pw-post-body-paragraph jq jr it js b jt lm jv jw jx ln jz ka kb lo kd ke kf lp kh ki kj lq kl km kn im bi translated">为了开始使用Firebase，我们需要在你的npm系统上安装<strong class="js iu"> firebase-tools </strong>包。Firebase Tools是让你做所有Firebase事情的<a class="ae mi" href="https://firebase.google.com/docs/cli" rel="noopener ugc nofollow" target="_blank"> Firebase CLI </a>(创建项目、部署应用、管理数据库等)。</p><p id="6d99" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们安装:</p><pre class="ls lt lu lv gt mv mw mx my aw mz bi"><span id="5781" class="mj kp it mw b gy na nb l nc nd">npm install -g firebase-tools</span></pre><p id="9be0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在，我们将把Firebase SDK安装到我们的Vue项目中，以便它能够连接到我们的Firebase后端。从项目根目录运行此命令:</p><pre class="ls lt lu lv gt mv mw mx my aw mz bi"><span id="b501" class="mj kp it mw b gy na nb l nc nd">npm install firebase</span></pre><p id="d0ea" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Firebase会想知道你是谁。登录告诉它:</p><pre class="ls lt lu lv gt mv mw mx my aw mz bi"><span id="61f6" class="mj kp it mw b gy na nb l nc nd">firebase login</span></pre><p id="8ee6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在，接下来的几个步骤可以通过<a class="ae mi" href="https://console.firebase.google.com/" rel="noopener ugc nofollow" target="_blank"> Firebase控制台</a>来完成，但是现在让我们继续使用命令行。我们必须创建一个项目，这是Firebase的顶级实体，本质上是一个谷歌云项目。下面是我们创建新项目的方法:</p><pre class="ls lt lu lv gt mv mw mx my aw mz bi"><span id="d824" class="mj kp it mw b gy na nb l nc nd">firebase projects:create</span></pre><p id="56af" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">给你的项目一个时髦的id和名字。如果你的id不是全球唯一的，它会显示一个错误，所以请尽情发挥你的创造力。</p><p id="bb03" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在，我们需要在项目中创建一个应用程序:</p><pre class="ls lt lu lv gt mv mw mx my aw mz bi"><span id="0839" class="mj kp it mw b gy na nb l nc nd">firebase apps:create --project &lt;your-snazzy-and-unique-project-id&gt;</span></pre><p id="8844" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">当出现提示时，从提供的平台选项中选择<strong class="js iu"> Web </strong>,并随意命名。也许我们应该坚持使用我们创建Vue应用程序时使用的东西。</p><h1 id="f292" class="ko kp it bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">再来点燃烧基的东西</h1><p id="9dad" class="pw-post-body-paragraph jq jr it js b jt lm jv jw jx ln jz ka kb lo kd ke kf lp kh ki kj lq kl km kn im bi translated">我们已经有了一个项目和一个应用程序，让我们调整一些设置。在一个新的浏览器窗口中，进入<a class="ae mi" href="https://console.firebase.google.com/" rel="noopener ugc nofollow" target="_blank"> Firebase控制台</a>，找到你的项目并点击它。</p><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="gh gi ni"><img src="../Images/75b53434085e60bb2893a3f47f31dfd9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*bkg0zX48uodNg_M4"/></div></div></figure><p id="c3a7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">然后，在项目概述页面上，找到左上角项目概述旁边的设置目录，并点击项目设置:</p><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="gh gi nj"><img src="../Images/e8c14eb0ff7737a1f86b6b170c576169.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qr5O6XcoCyiSf9RY"/></div></div></figure><p id="6e54" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在这里，您必须设置GCP资源位置—单击铅笔并选择一个:</p><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/1106d4743f7f0ee1c9b52a93cda1207b.png" data-original-src="https://miro.medium.com/v2/resize:fit:804/0*KYXWtVgBIR0JIhOa"/></div></figure><p id="2e13" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在你离开这一页之前，在<strong class="js iu">你的应用</strong>框中往下看一点。在Firebase SDK snippet下，选择Config以获取代码片段。同时将其复制到剪贴板或粘贴到其他地方；我们稍后会需要它。看起来是这样的:</p><pre class="ls lt lu lv gt mv mw mx my aw mz bi"><span id="8686" class="mj kp it mw b gy na nb l nc nd">const firebaseConfig = {<br/>    apiKey: &lt;YOUR API KEY&gt;,<br/>    authDomain: &lt;YOUR AUTH DOMAIN&gt;,<br/>    databaseURL: &lt;YOUR DATABASE URL&gt;,<br/>    projectId: &lt;YOUR PROJECT ID&gt;,<br/>    storageBucket: &lt;YOUR APP STORAGE BUCKET&gt;,<br/>    messagingSenderId: &lt;YOUR MESSAGING SENDER ID&gt;,<br/>    appId: &lt;YOUR APP ID&gt;<br/>};</span></pre><p id="99d0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">接下来，您必须启用Google作为登录方法。从左侧的开发窗格中点击<strong class="js iu">认证</strong>并转到<strong class="js iu">登录方法</strong>选项卡。有很多选择，但是现在，点击<strong class="js iu">谷歌</strong>，切换<strong class="js iu">启用</strong>。选择项目支持电子邮件，然后单击保存。这里都搞定了。</p><h1 id="6ad4" class="ko kp it bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">准备开始</h1><p id="3d3b" class="pw-post-body-paragraph jq jr it js b jt lm jv jw jx ln jz ka kb lo kd ke kf lp kh ki kj lq kl km kn im bi translated">看看你的项目目录。我们只关心位于<code class="fe ne nf ng mw b"><strong class="js iu">src/components/</strong></code>目录中的<code class="fe ne nf ng mw b"><strong class="js iu">Helloworld.vue</strong></code> <strong class="js iu"> </strong>文件，我们将在<code class="fe ne nf ng mw b"><strong class="js iu">src/</strong></code>目录中创建一个新的空白文件，命名为<code class="fe ne nf ng mw b"><strong class="js iu">firebase.js</strong>.</code></p><p id="48f3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们在那里开始聚会吧。</p><h2 id="cd87" class="mj kp it bd kq mk ml dn ku mm mn dp ky kb mo mp lc kf mq mr lg kj ms mt lk mu bi translated">火情网</h2><p id="2207" class="pw-post-body-paragraph jq jr it js b jt lm jv jw jx ln jz ka kb lo kd ke kf lp kh ki kj lq kl km kn im bi translated">在src目录中创建<code class="fe ne nf ng mw b"><strong class="js iu">firebase.js</strong></code>,并开始导入:</p><pre class="ls lt lu lv gt mv mw mx my aw mz bi"><span id="24fb" class="mj kp it mw b gy na nb l nc nd">import * as firebase from 'firebase/app';<br/>import 'firebase/auth';</span></pre><p id="21e7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">然后，我们将添加我们的应用程序的Firebase配置对象。还记得我让你复制到你的剪贴板的那块吗？是的，我们现在就需要。将它添加到您的导入行下面，后跟<strong class="js iu"> initializeApp </strong>函数调用:</p><pre class="ls lt lu lv gt mv mw mx my aw mz bi"><span id="57fa" class="mj kp it mw b gy na nb l nc nd">...<br/>const firebaseConfig = {<br/>    apiKey: &lt;YOUR API KEY&gt;,<br/>    authDomain: &lt;YOUR AUTH DOMAIN&gt;,<br/>    databaseURL: &lt;YOUR DATABASE URL&gt;,<br/>    projectId: &lt;YOUR PROJECT ID&gt;,<br/>    storageBucket: &lt;YOUR APP STORAGE BUCKET&gt;,<br/>    messagingSenderId: &lt;YOUR MESSAGING SENDER ID&gt;,<br/>    appId: &lt;YOUR APP ID&gt;<br/>};</span><span id="21c2" class="mj kp it mw b gy nl nb l nc nd">firebase.initializeApp(firebaseConfig);</span></pre><p id="6640" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">最后，让我们导出一些我们希望在组件中使用的内容:</p><ul class=""><li id="6172" class="nm nn it js b jt ju jx jy kb no kf np kj nq kn nr ns nt nu bi translated">firebase身份验证功能</li><li id="f48b" class="nm nn it js b jt nv jx nw kb nx kf ny kj nz kn nr ns nt nu bi translated">登录功能</li><li id="9502" class="nm nn it js b jt nv jx nw kb nx kf ny kj nz kn nr ns nt nu bi translated">注销功能</li></ul><pre class="ls lt lu lv gt mv mw mx my aw mz bi"><span id="d95d" class="mj kp it mw b gy na nb l nc nd">export default {<br/>    auth: firebase.auth(),<br/>    login() {<br/>      const provider = new firebase.auth.GoogleAuthProvider();<br/>      firebase.auth().signInWithPopup(provider)<br/>      .then(function(result) {<br/>        console.log(result);<br/>      })<br/>      .catch(function(error){<br/>        const errorCode = error.code;<br/>        const errorMessage = error.message;<br/>        const email = error.email;<br/>        const credential = error.credential;<br/>        console.log(errorCode, errorMessage, email, credential);<br/>        })<br/>    },<br/>    logout() {<br/>      firebase.auth().signOut()<br/>      .then(function() {})<br/>      .catch(function(error) {<br/>        console.log(error)});<br/>    }<br/>}</span></pre><p id="351a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这就是<code class="fe ne nf ng mw b">firebase.js.</code>前进到组件。</p><h2 id="c56e" class="mj kp it bd kq mk ml dn ku mm mn dp ky kb mo mp lc kf mq mr lg kj ms mt lk mu bi translated">HelloWorld.vue</h2><p id="f11e" class="pw-post-body-paragraph jq jr it js b jt lm jv jw jx ln jz ka kb lo kd ke kf lp kh ki kj lq kl km kn im bi translated">Vue为我们提供了一个现成的HelloWorld模块，它为我们提供了默认的登录页面。向上滚动到文件的顶部，这样我们可以对组件的<strong class="js iu">模板</strong>部分做一些修改。我们需要一个登录按钮和一个注销按钮，这将启动我们的登录和注销功能。我们将从“hello”分区顶部的登录按钮开始:</p><pre class="ls lt lu lv gt mv mw mx my aw mz bi"><span id="d6ac" class="mj kp it mw b gy na nb l nc nd">&lt;template&gt;<br/>&lt;div class="hello"&gt;<br/><strong class="mw iu">&lt;button v-if="!authenticated" </strong><a class="ae mi" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank"><strong class="mw iu">@click</strong></a><strong class="mw iu">="login"&gt;Login&lt;/button&gt;</strong><br/>...</span></pre><p id="0f23" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如您所见，我们的按钮的可见性是基于我们稍后将创建的名为<strong class="js iu">‘authenticated</strong>’的属性自然地，我们想要在按钮上使用的动作将是<strong class="js iu">@点击</strong>登录。</p><p id="e03c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">出于本练习的目的，我们希望将登录按钮下面的所有内容都包装在一个带有<strong class="js iu"> v-if </strong>的div中。我们将把它附加到authenticated属性上，这样只有当用户登录时内容才会显示。在login按钮和logout按钮之后添加open div标记。我们还将在<code class="fe ne nf ng mw b">&lt;h1&gt;</code>标签的正上方添加一条个性化的线。哦，不要忘记在代码块的末尾添加一个结束的<code class="fe ne nf ng mw b">&lt;/div&gt;</code>:</p><pre class="ls lt lu lv gt mv mw mx my aw mz bi"><span id="3aae" class="mj kp it mw b gy na nb l nc nd">...<br/>&lt;div class="hello"&gt;<br/>&lt;button v-if="!authenticated" <a class="ae mi" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>="login"&gt;Login&lt;/button&gt;<br/><strong class="mw iu">&lt;div v-if="authenticated"&gt;</strong><br/><strong class="mw iu">&lt;button </strong><a class="ae mi" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank"><strong class="mw iu">@click</strong></a><strong class="mw iu">="logout"&gt;Logout&lt;/button&gt;<br/>&lt;h1&gt;Hi {{ firstName }}!&lt;/h1&gt;</strong><br/>&lt;h1&gt;{{ msg }}&lt;/h1&gt;<br/>...<br/>...<br/>&lt;/ul&gt;<br/><strong class="mw iu">&lt;/div&gt;</strong><br/>&lt;/div&gt;<br/>&lt;/template&gt;<br/>...</span></pre><p id="feb3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在这一点上，运行<code class="fe ne nf ng mw b">npm run serve</code>来看看我们得到了什么。这是你应该有的:</p><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="gh gi oa"><img src="../Images/0fcc7f64ef9a0adde017cfae979ba2c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QFA7QN23tqOmWiyEzfTtkQ.png"/></div></div><figcaption class="md me gj gh gi mf mg bd b be z dk translated">Oo拉拉</figcaption></figure><p id="80a4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">点击登录按钮，次数不限；什么都不会发生。</p><p id="7b8b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们向下滚动到<code class="fe ne nf ng mw b">&lt;script&gt;</code>块。首先，让我们确保导入那个<code class="fe ne nf ng mw b">firebase.js</code>文件。在<code class="fe ne nf ng mw b">&lt;script&gt;</code>标签内添加导入:</p><pre class="ls lt lu lv gt mv mw mx my aw mz bi"><span id="0778" class="mj kp it mw b gy na nb l nc nd">&lt;script&gt;<br/><strong class="mw iu">import Firebase from '../firebase.js';</strong><br/>...</span></pre><p id="67c9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在那下面，你会看到已经有一个小的出口阻塞，但它没有太多的进展。我们将添加一些东西，从一个<code class="fe ne nf ng mw b"><strong class="js iu">data()</strong></code>函数开始。对于这个例子，让它返回一个东西:一个具有空的<code class="fe ne nf ng mw b">data</code>对象和带有<code class="fe ne nf ng mw b">false</code>布尔值的<code class="fe ne nf ng mw b"><strong class="js iu">loggedIn</strong></code>状态的<code class="fe ne nf ng mw b"><strong class="js iu">user</strong></code>对象:</p><pre class="ls lt lu lv gt mv mw mx my aw mz bi"><span id="fa77" class="mj kp it mw b gy na nb l nc nd">export default {<br/>    name: 'HelloWorld',<br/>    props: {<br/>    msg: String<br/>    },<br/><strong class="mw iu">    data () {<br/>      return {<br/>        user: {<br/>          loggedIn: false,<br/>          data: {}<br/>        }<br/>      }  <br/>    },</strong><br/>...</span></pre><p id="0873" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">接下来，让我们添加几个计算属性:</p><ul class=""><li id="3380" class="nm nn it js b jt ju jx jy kb no kf np kj nq kn nr ns nt nu bi translated">一个基于用户对象中的<code class="fe ne nf ng mw b">loggedIn</code> <strong class="js iu"> </strong>属性的<code class="fe ne nf ng mw b"><strong class="js iu">authenticated</strong></code>属性</li><li id="be36" class="nm nn it js b jt nv jx nw kb nx kf ny kj nz kn nr ns nt nu bi translated">基于用户对象的<code class="fe ne nf ng mw b">displayName</code>属性的<code class="fe ne nf ng mw b"><strong class="js iu">firstName</strong></code>属性。使用Google auth，显示名称通常是用户的全名，所以我们将它分解，只使用前半部分:</li></ul><pre class="ls lt lu lv gt mv mw mx my aw mz bi"><span id="0b2a" class="mj kp it mw b gy na nb l nc nd">...<br/>    computed: {<br/>        authenticated(){<br/>          return this.user.loggedIn<br/>        },<br/>        firstName(){<br/>          if (this.user.data.displayName) {<br/>            return this.user.data.displayName.split(' ')[0]<br/>          }<br/>          return null<br/>        }<br/>    },<br/>...</span></pre><p id="4201" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">也许最重要的是，我们需要一些登录和退出的方法。他们将调用我们之前的firebase登录和注销功能:</p><pre class="ls lt lu lv gt mv mw mx my aw mz bi"><span id="a640" class="mj kp it mw b gy na nb l nc nd">...<br/>    methods: {<br/>      login() {<br/>        Firebase.login();<br/>      },<br/>      logout() {<br/>        Firebase.logout()<br/>      }<br/>    },<br/>...</span></pre><p id="ef3e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您可能已经注意到，我们的登录和注销功能不会更新我们的用户数据。您可以让它们中的每一个都这样做，但是如果我们希望我们的用户会话在刷新后仍然存在，并且跨多个窗口持续存在，我们需要一种方法在组件加载后立即获取身份验证数据。这里的关键是Firebase的<code class="fe ne nf ng mw b">onAuthStateChanged()</code>功能。让我们把它放到组件的<strong class="js iu">挂载的</strong>生命周期钩子中:</p><pre class="ls lt lu lv gt mv mw mx my aw mz bi"><span id="773f" class="mj kp it mw b gy na nb l nc nd">mounted: function() {<br/>      Firebase.auth.onAuthStateChanged( user =&gt; {<br/>        if (user) {<br/>          this.user.loggedIn = true;<br/>          this.user.data = user;<br/>        }<br/>        else {<br/>          this.user.loggedIn = false;<br/>          this.user.data = {};<br/>        }<br/>      })<br/>    }<br/>}</span></pre><p id="2648" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这意味着一旦组件被挂载，我们的用户对象将反映Firebase的用户认证状态。酷毙了。</p><h1 id="6424" class="ko kp it bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">让它裂开</h1><p id="d313" class="pw-post-body-paragraph jq jr it js b jt lm jv jw jx ln jz ka kb lo kd ke kf lp kh ki kj lq kl km kn im bi translated">现在让我们运行这个小狗，看看我们有什么。如果还没有，运行<code class="fe ne nf ng mw b">npm run serve</code> load up localhost:8080:</p><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="gh gi ob"><img src="../Images/8b6544285dde8999778d1706e718e50d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*CK5uBPc-9q8OG4ZI"/></div></div></figure><p id="395b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">非常好。关键时刻:点击登录！你会看到一个标准的谷歌认证弹出窗口，你可以用你的gmail账户登录。一旦你进去了，瞧！</p><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="gh gi oc"><img src="../Images/c011652eb920507aa999f69abd7cb4f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*NNKuARqnK2xI7-uO"/></div></div></figure><p id="535b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这就是了。这是Vue.js中Firebase认证最简单的实现。</p></div></div>    
</body>
</html>