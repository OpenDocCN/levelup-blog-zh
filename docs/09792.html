<html>
<head>
<title>How to use Google’s Dialogflow CX to make a slack chat bot</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Google的Dialogflow CX制作一个slack聊天机器人</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-use-googles-dialogflow-cx-to-make-a-slack-chat-bot-9fe3e8ca2fcf?source=collection_archive---------8-----------------------#2021-09-14">https://levelup.gitconnected.com/how-to-use-googles-dialogflow-cx-to-make-a-slack-chat-bot-9fe3e8ca2fcf?source=collection_archive---------8-----------------------#2021-09-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="5401" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">Dialogflow CX概述以及如何使用Slack。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/37dc26a98417a968e085eb7985ae3821.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Gqd7-ZVGRzae2W7PkR8y1g.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">米哈伊尔·尼洛夫摄于<a class="ae kv" href="https://www.pexels.com/photo/black-and-silver-laptop-computer-8284722/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">佩克斯</a></figcaption></figure><p id="dade" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">聊天机器人是经营企业或写博客的人最重要的必备工具之一。聊天机器人不仅通过管理您的支持团队需要为每个客户提供的所有重复信息来节省时间和精力，而且通过快速回答问题和解决问题来提高客户满意度。</p><h1 id="90da" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">什么是对话流CX？</h1><p id="8d3d" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">对话流CX或客户体验，于2020年12月全面启动。</p><blockquote class="mp mq mr"><p id="bbda" class="kw kx ms ky b kz la jr lb lc ld ju le mt lg lh li mu lk ll lm mv lo lp lq lr ij bi translated">这是一种设计代理的新方法，采用状态机的方法来设计代理。这为您提供了对讨论的清晰明确的控制，以及卓越的最终用户体验和开发工作流。</p></blockquote><p id="ee1d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们讨论Dialogflow CX附带的3个基本术语:</p><h2 id="f74c" class="mw lt iq bd lu mx my dn ly mz na dp mc lf nb nc me lj nd ne mg ln nf ng mi nh bi translated">代理人</h2><p id="63aa" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">Dialogflow CX代理是管理您的最终用户对话的虚拟代理。该代理通过自然语言处理将用户文本或音频转换为结构化数据，您的应用程序和服务可以在整个对话过程中理解这些数据。</p><h2 id="30b4" class="mw lt iq bd lu mx my dn ly mz na dp mc lf nb nc me lj nd ne mg ln nf ng mi nh bi translated">流</h2><p id="b488" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">人机交互可能很复杂，涉及各种主题。心流被用来指定这些主题和与之相关的对话路径。默认启动流程是每个代理的默认流程。</p><h2 id="3d33" class="mw lt iq bd lu mx my dn ly mz na dp mc lf nb nc me lj nd ne mg ln nf ng mi nh bi translated">意图</h2><p id="bd1c" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">一个<a class="ae kv" href="https://cloud.google.com/dialogflow/cx/docs/concept/intent" rel="noopener ugc nofollow" target="_blank">意图</a>将一个终端用户的意图分类为一个对话回合。与<a class="ae kv" href="https://cloud.google.com/dialogflow/docs/intents-overview" rel="noopener ugc nofollow" target="_blank"> ES意向</a>相比，CX意向已经被简化，使其成为一个更可重用的资源。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ni"><img src="../Images/af39d6d19aeaefdbe2ddc4fb80c9e07e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ovMKjKCj1ju7rq3iEUiDVw.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">正在创建对话流CX代理</figcaption></figure><h1 id="3325" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">Dialogflow CX与Dialogflow ES有何不同？</h1><p id="7e6e" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">CX是一种高级代理类型，可以通过使用流、页面和状态处理程序来处理广泛或复杂的对话。</p><p id="d74d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然而，ES是一种标准的代理类型，最适合于小型到中型以及简单到中等复杂的代理，意图和上下文控制对话路径。</p><p id="4729" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对话流CX和ES都使用意图，但是，在对话流CX意图可以重用。</p><p id="2c49" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在Dialogflow CX中，可以使用可视化编辑器更高效地设计对话路径和对话流。然而，Dialogflow ES大多是基于文本的。</p><h1 id="d272" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">你如何让Dialogflow CX与你的Slack机器人一起工作？</h1><p id="0f2e" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">Slack是一个协作环境，这意味着你可能需要人们看到/访问某些信息。另一方面，你可能也想让一些无聊的对话保持私密。</p><p id="fbbf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以使用dialog flow-slack integration SDK来完成这两项工作，甚至更多。让我们看看如何设置一个slack bot，并使用这个SDK制作一个代理，并将其连接到slack bot。</p><h2 id="5a3d" class="mw lt iq bd lu mx my dn ly mz na dp mc lf nb nc me lj nd ne mg ln nf ng mi nh bi translated">克隆SDK的GitHub库</h2><p id="002c" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated"><code class="fe nj nk nl nm b">git clone <a class="ae kv" href="https://github.com/Sampriti-Mitra/dialogflow-slack-sdk.git" rel="noopener ugc nofollow" target="_blank">https://github.com/Sampriti-Mitra/dialogflow-slack-sdk.git</a></code></p><h2 id="59e9" class="mw lt iq bd lu mx my dn ly mz na dp mc lf nb nc me lj nd ne mg ln nf ng mi nh bi translated">在空闲时间设置bot/使用现有的空闲bot</h2><p id="f022" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated"><a class="ae kv" href="https://api.slack.com/apps?new_app=1" rel="noopener ugc nofollow" target="_blank">创建一个新的slack机器人，并给它起任何名字。现在，在设置页面上，转到基本信息，将机器人安装到工作区。</a></p><h2 id="c94a" class="mw lt iq bd lu mx my dn ly mz na dp mc lf nb nc me lj nd ne mg ln nf ng mi nh bi translated">设置bot凭据</h2><p id="51c0" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">Slack发送一个报头<strong class="ky ir">来验证slack发送的所有请求的秘密</strong>。</p><p id="cea6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">应用程序级令牌</strong>允许您的应用程序使用适用于多个(或所有)安装的平台特性——例如，列出事件授权的<a class="ae kv" href="https://api.slack.com/apps/A02B3UUJCCV/event-subscriptions" rel="noopener ugc nofollow" target="_blank">API</a>。</p><p id="3e38" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Slack应用的功能和权限由它请求的<a class="ae kv" href="https://api.slack.com/scopes" rel="noopener ugc nofollow" target="_blank">范围</a>控制。<strong class="ky ir"> Bot令牌作用域</strong>是管理应用程序可以访问的内容的作用域。</p><ol class=""><li id="3278" class="nn no iq ky b kz la lc ld lf np lj nq ln nr lr ns nt nu nv bi translated">在slack上的bot设置页面，转到基本信息页面。向下滚动到应用凭据，并通过单击显示复制签名密码。现在将它复制到SDK的本地克隆中的<a class="ae kv" href="https://github.com/Sampriti-Mitra/dialogflow-slack-sdk/blob/main/functions/config/token.go" rel="noopener ugc nofollow" target="_blank"> token.go </a>文件中的<code class="fe nj nk nl nm b">SLACK_SIGNING_SECRET</code>。</li><li id="f72d" class="nn no iq ky b kz nw lc nx lf ny lj nz ln oa lr ns nt nu nv bi translated">在同一页面上向下滚动到应用程序级令牌，然后单击生成令牌和范围按钮。添加两个可用范围<code class="fe nj nk nl nm b"><a class="ae kv" href="https://api.slack.com/scopes/connections:write" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir">connections:write</strong></a></code> <strong class="ky ir"> </strong>和<strong class="ky ir"> </strong> <code class="fe nj nk nl nm b"><a class="ae kv" href="https://api.slack.com/scopes/authorizations:read" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir">authorizations:read</strong></a></code> <strong class="ky ir">。</strong>单击Generate，现在复制令牌并将其粘贴到本地克隆中token.go中的APP_TOKEN中。</li><li id="2ea4" class="nn no iq ky b kz nw lc nx lf ny lj nz ln oa lr ns nt nu nv bi translated">现在转到slack api上的<code class="fe nj nk nl nm b">Oauth &amp; Permissions</code>页面，复制您的<strong class="ky ir"> Bot用户OAuth令牌</strong>将<code class="fe nj nk nl nm b">BOT_TOKEN</code>中的值粘贴到您本地的token.go。</li></ol></div><div class="ab cl ob oc hu od" role="separator"><span class="oe bw bk of og oh"/><span class="oe bw bk of og oh"/><span class="oe bw bk of og"/></div><div class="ij ik il im in"><h1 id="1239" class="ls lt iq bd lu lv oi lx ly lz oj mb mc jw ok jx me jz ol ka mg kc om kd mi mj bi translated">决定松弛模式</h1><p id="59f4" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">Slack可以通过两种方式向后端服务器发送信息。通过请求URL或通过web套接字。</p><h2 id="6030" class="mw lt iq bd lu mx my dn ly mz na dp mc lf nb nc me lj nd ne mg ln nf ng mi nh bi translated">套接字模式</h2><p id="c585" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">打开套接字模式将通过WebSockets连接路由应用程序的交互和事件，而不是将这些有效负载发送到请求URL，这些URL是公共HTTP端点。</p><p id="2f2b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此设置适用于正在开发或需要部署在防火墙后的内部应用。它不适用于广泛分布的应用程序。</p><h2 id="c55b" class="mw lt iq bd lu mx my dn ly mz na dp mc lf nb nc me lj nd ne mg ln nf ng mi nh bi translated">请求URL</h2><p id="bc94" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">您的应用程序可以订阅在您选择的URL接收Slack中的事件通知(例如，当用户添加反应或创建文件时)。</p><p id="f418" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在SDK中，<a class="ae kv" href="https://github.com/Sampriti-Mitra/dialogflow-slack-sdk/blob/main/app.yaml" rel="noopener ugc nofollow" target="_blank"> app.yaml </a>文件指定调用哪个main.go，<a class="ae kv" href="https://github.com/Sampriti-Mitra/dialogflow-slack-sdk/blob/main/main.go" rel="noopener ugc nofollow" target="_blank"> root </a>中的那个(触发事件模式并接受来自slack的http请求)和socket mode目录中的<a class="ae kv" href="https://github.com/Sampriti-Mitra/dialogflow-slack-sdk/blob/main/functions/socket_mode/main.go" rel="noopener ugc nofollow" target="_blank"> main.go </a>打开web socket。</p></div><div class="ab cl ob oc hu od" role="separator"><span class="oe bw bk of og oh"/><span class="oe bw bk of og oh"/><span class="oe bw bk of og"/></div><div class="ij ik il im in"><p id="8914" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于本文，让我们使用<strong class="ky ir">请求url </strong>和<strong class="ky ir">订阅事件</strong>来获取发送到应用程序的事件有效负载。</p><h1 id="4649" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">订阅事件</h1><p id="cf9b" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">转到本地克隆的SDK，转到<a class="ae kv" href="https://github.com/Sampriti-Mitra/dialogflow-slack-sdk/blob/main/app.yaml" rel="noopener ugc nofollow" target="_blank"> app.yaml </a>文件。确保最后一行<code class="fe nj nk nl nm b">#main: ./functions/socket_mode</code>被注释掉。</p><p id="66bc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在转到<strong class="ky ir">事件订阅</strong>选项卡，点击启用事件。暂时将请求URL保留为空，并在Subscribe to bot events中添加范围。添加<strong class="ky ir">应用提及</strong>和<strong class="ky ir">消息. im </strong>范围。</p><p id="852f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">转到slack api上的<strong class="ky ir">交互性&amp;快捷方式</strong>选项卡并启用它。同样，将URL字段留空。</p><h1 id="7b92" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">设置对话流CX代理</h1><p id="e72e" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">如果你还没有设置GCP，你可以这样做，从<a class="ae kv" href="https://github.com/Sampriti-Mitra/dialogflow-slack-sdk#gcp-setup" rel="noopener ugc nofollow" target="_blank">这里</a>。复制项目id并将其添加到本地的<a class="ae kv" href="https://github.com/Sampriti-Mitra/dialogflow-slack-sdk/blob/main/functions/config/token.go" rel="noopener ugc nofollow" target="_blank"> token.go </a>文件中。</p><p id="bdf3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">进入<a class="ae kv" href="https://dialogflow.cloud.google.com/cx/projects" rel="noopener ugc nofollow" target="_blank"> Dialogflow CX </a>，选择一个项目，或者新建一个项目。现在使用汽车租赁预建代理。复制代理名称并将其添加到本地<a class="ae kv" href="https://github.com/Sampriti-Mitra/dialogflow-slack-sdk/blob/main/functions/config/token.go" rel="noopener ugc nofollow" target="_blank"> token.go </a>文件中。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi on"><img src="../Images/b9e3739c28346b03757848448585ec14.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eUjVr1gZXcUtx6srEj5Eqw.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">从对话流CX代理复制代理名称</figcaption></figure><p id="9f0d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在开新成立的汽车租赁代理。你应该能看到这样的东西。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oo"><img src="../Images/3036598eed9c5a6cc75e57fd033dd214.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5S6SjNcs4kgptDAwdaNJrA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">Dialogflow CX租车代理流程</figcaption></figure><p id="25cd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<a class="ae kv" href="https://console.cloud.google.com/home/" rel="noopener ugc nofollow" target="_blank"> GCP控制台</a>上，选择项目并启用Dialogflow API。现在转到左侧导航栏，GCP控制台上的API和服务- &gt;凭据页面。</p><p id="509c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">单击创建凭据并添加服务帐户凭据。填写详细信息，并选择Dialogflow客户端API角色。现在点击创建凭证并下载。请按照此<a class="ae kv" href="https://github.com/Sampriti-Mitra/dialogflow-slack-sdk#service-account-setup-gcp" rel="noopener ugc nofollow" target="_blank">自述文件</a>获取更详细的说明。</p><p id="7bcf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以导出凭证导出<code class="fe nj nk nl nm b">GOOGLE_APPLICATION_CREDENTIALS=&lt;path-of-stored-credential&gt;</code>或将其添加到克隆应用的config目录中。</p><h1 id="a449" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">如何在App Engine上托管服务器</h1><p id="338d" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">App Engine是一个完全托管的无服务器平台，用于创建和托管可扩展的应用程序。</p><blockquote class="mp mq mr"><p id="25e5" class="kw kx ms ky b kz la jr lb lc ld ju le mt lg lh li mu lk ll lm mv lo lp lq lr ij bi translated"><a class="ae kv" href="https://cloud.google.com/appengine/docs/standard/go/how-requests-are-handled" rel="noopener ugc nofollow" target="_blank"> App Engine </a>运行应用程序的多个实例，每个实例都有自己的web服务器来处理请求。任何请求都可以路由到任何实例，因此来自同一个用户的连续请求不一定发送到同一个实例。一个实例可以同时处理多个请求。实例的数量可以随着流量的变化而自动调整。</p></blockquote><p id="e387" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要运行App Engine，请确保您有一个GCP项目，或者创建一个。可以参考<a class="ae kv" href="https://cloud.google.com/appengine/docs/standard/go/console" rel="noopener ugc nofollow" target="_blank">这个</a>。还要确保设置了Dialogflow API <a class="ae kv" href="https://cloud.google.com/dialogflow/es/docs/quick/setup#auth" rel="noopener ugc nofollow" target="_blank">身份验证</a>的项目凭证。</p><ul class=""><li id="e360" class="nn no iq ky b kz la lc ld lf np lj nq ln nr lr op nt nu nv bi translated">在终端上，cd到克隆项目的根目录，然后<code class="fe nj nk nl nm b">gcloud app deploy --project [project-id]</code>这将部署您的项目。<code class="fe nj nk nl nm b">gcloud app --project [project-id] logs tail -s default </code>查看日志。</li></ul><p id="8005" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">App Engine可能会在不同的实例中运行不同版本的应用程序，由于流量会在实例之间分开，因此如果任何<a class="ae kv" href="https://stackoverflow.com/questions/34499875/how-to-automatically-delete-old-google-app-engine-version-instances" rel="noopener ugc nofollow" target="_blank">版本过时且未删除</a>，它将会给出过时的响应，在这种情况下，我们需要手动删除该版本。</p><h1 id="fd1f" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">运行应用程序，并将URL复制到slack API</h1><ul class=""><li id="5cdf" class="nn no iq ky b kz mk lc ml lf oq lj or ln os lr op nt nu nv bi translated">将上面获得的url插入slack的事件url。如果应用程序能够成功地使用质询参数进行响应，请求URL应该会获得批准。这基本上意味着slack向您的URL发送了一些请求，您需要用challenge参数进行响应，而您做到了！</li><li id="b652" class="nn no iq ky b kz nw lc nx lf ny lj nz ln oa lr op nt nu nv bi translated">将url插入到slack api的交互性和快捷方式选项卡中的请求url中。</li><li id="e750" class="nn no iq ky b kz nw lc nx lf ny lj nz ln oa lr op nt nu nv bi translated">在slack上，确保您需要订阅的bot事件都被选中。如果没有，则添加并保存它们。包括应用提及和消息</li></ul></div><div class="ab cl ob oc hu od" role="separator"><span class="oe bw bk of og oh"/><span class="oe bw bk of og oh"/><span class="oe bw bk of og"/></div><div class="ij ik il im in"><h1 id="b91b" class="ls lt iq bd lu lv oi lx ly lz oj mb mc jw ok jx me jz ol ka mg kc om kd mi mj bi translated">使用Dialogflow CX中的自定义有效负载在slack上添加交互元素</h1><p id="0365" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">在slack上，我们可以选择使用<a class="ae kv" href="https://api.slack.com/block-kit" rel="noopener ugc nofollow" target="_blank">块套件</a> <strong class="ky ir">布局块</strong>和<strong class="ky ir">块元素</strong>来格式化文本和整合优雅的UI样式</p><p id="5119" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你可以去<a class="ae kv" href="https://app.slack.com/block-kit-builder" rel="noopener ugc nofollow" target="_blank">https://app.slack.com/block-kit-builder</a>体验不同的显示文本的可能性，让它与用户互动。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ot"><img src="../Images/6edc9f0533baff8fa5aed75c6783818a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6a9SMzsgtri07dxQK8ttew.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">Slack的机器人工具包生成器</figcaption></figure><p id="c3d2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在回到对话流CX控制台。在Dialogflow CX汽车租赁代理，进入豪华选项。单击条目实现，并将block kit UI代码粘贴到自定义有效负载中。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ni"><img src="../Images/af39d6d19aeaefdbe2ddc4fb80c9e07e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ovMKjKCj1ju7rq3iEUiDVw.png"/></div></div></figure><p id="1a41" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在“确认Chevy Taho”页面中，转到“条目实现”并从block kit UI添加自定义有效负载。确认道奇充电器页面做同样的事情。</p><pre class="kg kh ki kj gt ou nm ov ow aw ox bi"><span id="3bf6" class="mw lt iq nm b gy oy oz l pa pb">{<br/> “blocks”: [<br/> {<br/> “type”: “section”,<br/> “text”: {<br/> “text”: “The Chevy Tahoe is $65.53 per day. It fits 7 people and comes with unlimited mileage included.\n Would you like to proceed to payment?”,<br/> “type”: “mrkdwn”<br/> },<br/> “accessory”: {<br/> “alt_text”: “alt text for image”,<br/> “image_url”: “<a class="ae kv" href="https://www.chevrolet.com/content/dam/chevrolet/na/us/english/index/vehicles/2021/crossovers-suvs/tahoe/mov/01-images/2021-tahoe-safety-01-v2.jpg?imwidth=240" rel="noopener ugc nofollow" target="_blank">https://www.chevrolet.com/content/dam/chevrolet/na/us/english/index/vehicles/2021/crossovers-suvs/tahoe/mov/01-images/2021-tahoe-safety-01-v2.jpg?imwidth=240</a>",<br/> “type”: “image”<br/> }<br/> }<br/> ]<br/>}</span></pre></div><div class="ab cl ob oc hu od" role="separator"><span class="oe bw bk of og oh"/><span class="oe bw bk of og oh"/><span class="oe bw bk of og"/></div><div class="ij ik il im in"><p id="808a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，我们准备在slack上测试我们的机器人。转到安装slack bot的工作区。转到机器人的主页-&gt;消息并开始聊天！</p><h1 id="6d8d" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">带slack演示的Dialogflow CX</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pc"><img src="../Images/a98649b727fbeed47fd23962c1188a16.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Ciuhlf-rotN_eC-zeizJaA.gif"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">slack上的Dialogflow CX汽车租赁代理</figcaption></figure><h1 id="8609" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">App Engine项目清理</h1><p id="80da" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">对于<a class="ae kv" href="https://medium.com/google-cloud/app-engine-project-cleanup-9647296e796a" rel="noopener">删除app engine </a>版本，可以做一个<code class="fe nj nk nl nm b">gcloud app versions list</code>后跟<code class="fe nj nk nl nm b">gcloud app versions delete &lt;version-from-list&gt;</code>。或者，如果你只是想停止应用程序而不删除它，你可以做<code class="fe nj nk nl nm b">gcloud app versions stop $VERSION — quiet</code>。最后，如果您在上面单独创建了一个项目，您也可以删除整个项目(这也将删除项目拥有的所有其他服务)。</p><h1 id="f99b" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">如何为Github上的Dialogflow — Slack integration SDK做出贡献</h1><p id="f5a7" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">祝贺你成功创建了一个Dialogflow CX代理，并将其链接到你在slack上的工作区。</p><p id="f98c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是还有一个更好的消息！</p><p id="03c8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以在GitHub上为这个开源的dialog flow CX-Slack SDK repo做出贡献，以添加更多功能！只需按照本参考<a class="ae kv" href="https://jarv.is/notes/how-to-pull-request-fork-github/" rel="noopener ugc nofollow" target="_blank">https://jarv.is/notes/how-to-pull-request-fork-github/</a>中的步骤。</p><p id="f063" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">祝贺你到达这篇文章的结尾。下次见！</p></div></div>    
</body>
</html>