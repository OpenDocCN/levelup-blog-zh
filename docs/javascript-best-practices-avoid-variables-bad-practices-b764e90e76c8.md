# JavaScript 最佳实践——避免变量不良实践

> 原文：<https://levelup.gitconnected.com/javascript-best-practices-avoid-variables-bad-practices-b764e90e76c8>

![](img/98d4ce735b091838677baafb898009cb.png)

照片由[维塔利·阿诺辛](https://unsplash.com/@anohin?utm_source=medium&utm_medium=referral)在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄

JavaScript 是一种非常宽容的语言。编写可以运行但有错误的代码很容易。

在本文中，我们将研究如何在声明变量时避免一些不好的做法。

# 不要链接变量赋值

变量赋值不应该是链式的，因为我们在链中的一些变量中创建了全局变量。

例如，如果我们编写以下代码来声明一个链中的多个变量，如下所示:

```
{
  let a = b = c = 5;
}
```

那么`a`将被用`let`声明为一个块范围的变量。然而，`let`关键字并不适用于`b`和`c`。

它们都被声明为全局变量。这绝对是我们不想要的。

因此，我们应该避免上面提到的一连串的赋值操作。相反，我们应该用他们自己的方式给他们写信，如下所示:

```
{
  let a = 5
  let b = a;
  let c = a;
}
```

在上面的代码中，我们以与上一个示例相同的方式声明了变量`a`，但是我们将`b`和`c`的声明放在了它们自己的行中。

我们将`a`的值分配给`b`和`c`。这样，它们都是块范围的，我们不会意外地声明全局变量。

# 避免使用一元增量和减量(`++`、`--`)

我们应该避免一元递增和递减语句，因为它们会自动插入分号，我们不希望这样，因为分号可能会被添加到我们不希望它们出现的位置。

不使用递增和递减操作符还可以防止我们无意中递增和递减值，这会导致程序中的意外行为。

因此，如果我们有下面的代码:

```
let num = 1;
num++;
```

然后应该将其更改为以下内容:

```
let num = 1;
num += 1;
```

这更好，因为它是一个陈述而不是一个表达式，所以我们不能这样做:

```
let num = 1;
const foo = num++;
```

`foo`仍然是 1，因为如果`++`或`--`跟在变量后面，则不会返回最新的值。

我们不能做同样的事情:

```
num += 1;
```

所以这要安全得多，因为在不创建新的一行的情况下，用上面的一行进行赋值是很困难的。

# 在赋值时避免在`=`之前或之后换行。如果我们赋值的表达式很长，就用括号把它们括起来

如果我们想给一个变量分配一个长的 JavaScript 表达式，那么我们应该用括号把它们括起来，而不是使用换行符。在定界表达式中，换行符不如圆括号清晰。

例如，不要写以下内容:

```
let str =
  'The quick brown fox jumps over the lazy dog';
```

我们应该改为写:

```
let str = (
  'The quick brown fox jumps over the lazy dog'
);
```

这样，我们的代码清楚地表明长字符串是一个表达式。

# 没有未使用的变量

未使用的变量是死代码，死代码不应该出现在我们的生产代码中。

因为它没有被使用，所以它们应该被移除。它们占用空间，让读者困惑。

因此，与其写:

```
let unusedVar = 1;
```

我们应该移除它。

![](img/681ca2795c311ea433cd328dc07b940f.png)

安迪·奇尔顿在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄的照片

# `var`申报被提升

`var`声明被提升到最近的封闭函数范围的顶部，但是它们的赋值却没有。

这是许多开发者没有预料到的，因为他们对`var`没有完全的了解。

例如，如果我们有以下代码:

```
const foo = () => {
  console.log(x);
  var x = 1;
  console.log(x);
}foo();
```

然后`x`在第一个控制台日志中是`undefined`，但在第二个日志中是 1。如果我们在声明`foo`之前记录它，那么我们会得到“未捕获的引用错误:x 未定义”错误，并且函数不会运行。

因此，声明被放在函数的顶部，但值没有。

这是 JavaScript 的一个恼人的特性，欺骗了很多人。没那么有用，所以`let`和`const`声明没有这个特性。

这是我们应该使用`let`和`const`而不是`var`的又一个原因。

# 结论

`var`声明很复杂，所以不应该使用。像未使用的变量这样的死代码应该被删除。

变量赋值链也很棘手，因为中间件变量都被声明为全局变量，所以我们应该在它们自己的行中给它们赋值。

最后，不应该使用递增和递减运算符，因为如果新值出现在操作数之前并进行赋值，它们都会返回新值。它还受分号自动插入的影响，这会做一些我们可能没有预料到的事情。