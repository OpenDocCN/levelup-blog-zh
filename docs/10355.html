<html>
<head>
<title>Load Testing with Locust.io</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Locust.io进行负载测试</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/load-testing-with-locust-io-f57aa6bf6bb8?source=collection_archive---------4-----------------------#2021-11-26">https://levelup.gitconnected.com/load-testing-with-locust-io-f57aa6bf6bb8?source=collection_archive---------4-----------------------#2021-11-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="f32d" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">H2O波应用中Loucust.io负载测试指南</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi kf"><img src="../Images/6e04bd8f5f3d58d461e134840ffaff95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1272/format:webp/0*5y8r8vzXOkpbn_dt.png"/></div><figcaption class="kn ko gj gh gi kp kq bd b be z dk translated">图片鸣谢:<a class="ae kr" href="https://atmc.in/wp-content/uploads/2017/04/performance-management-in-the-digital-age.png" rel="noopener ugc nofollow" target="_blank">https://atmc . in/WP-content/uploads/2017/04/performance-management-in-the-digital-age . png</a></figcaption></figure><p id="1a13" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">最近我接到一个小任务，要构建一个Wave应用程序来测试API端点的负载。在做了一些研究之后，我找到了一个开源的工具来轻松地测试负载。我认为以文档化的方式保存我的发现和我的Wave应用程序的实现，对我和刚刚开始使用Locust.io的人来说是有益的。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi lo"><img src="../Images/d5b0da06aa1bf00f3b2e29ffc88e7707.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*jVLxEp_lTH7_fRSS"/></div></div></figure><p id="244f" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">H2O波是一个软件栈，用于完全用Python构建漂亮的、低延迟的、实时的、基于浏览器的应用程序和仪表板，而不使用HTML、Javascript或CSS</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi lt"><img src="../Images/d7fad64aeedaa2dcafc4ff7cf6ffdc56.png" data-original-src="https://miro.medium.com/v2/resize:fit:888/format:webp/0*eQv7rTU0f_0jMOeg.jpeg"/></div></figure><p id="5d5f" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">Locust是一个开源、易用、可脚本化和可扩展的性能测试工具。</p><p id="30ac" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">这是一个简单的应用程序，使用H2O wave框架和Locust测试https://www.bbc.com<a class="ae kr" href="https://www.bbc.com/" rel="noopener ugc nofollow" target="_blank">的负载。3个端点已用于演示。</a></p><h1 id="efc7" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated">快速入门</h1><h2 id="88d5" class="mm lv iq bd lw mn mo dn ma mp mq dp me lb mr ms mg lf mt mu mi lj mv mw mk mx bi translated">先决条件:</h2><ol class=""><li id="1ffe" class="my mz iq ku b kv na ky nb lb nc lf nd lj ne ln nf ng nh ni bi translated">你需要在你的Linux、macOS和Windows上安装Python 3.6+,才能安装H2O wave。</li><li id="34cd" class="my mz iq ku b kv nj ky nk lb nl lf nm lj nn ln nf ng nh ni bi translated">需要安装git。</li></ol><h2 id="f370" class="mm lv iq bd lw mn mo dn ma mp mq dp me lb mr ms mg lf mt mu mi lj mv mw mk mx bi translated">步骤:</h2><p id="95fe" class="pw-post-body-paragraph ks kt iq ku b kv na jr kx ky nb ju la lb no ld le lf np lh li lj nq ll lm ln ij bi translated">H2O安装wave并启动wave服务器</p><ol class=""><li id="ad79" class="my mz iq ku b kv kw ky kz lb nr lf ns lj nt ln nf ng nh ni bi translated">使用https://github.com/h2oai/wave/releases/tag/v0.19.0<a class="ae kr" href="https://github.com/h2oai/wave/releases/tag/v0.19.0" rel="noopener ugc nofollow" target="_blank">下载并解压适用于您平台的H2O Wave SDK</a></li><li id="4933" class="my mz iq ku b kv nj ky nk lb nl lf nm lj nn ln nf ng nh ni bi translated">将其移动到方便的位置。($HOME/wave/)</li><li id="cd05" class="my mz iq ku b kv nj ky nk lb nl lf nm lj nn ln nf ng nh ni bi translated">进入你的Wave目录，打开一个新的终端。启动wave服务器，</li></ol><pre class="kg kh ki kj gt nu nv nw nx aw ny bi"><span id="738b" class="mm lv iq nv b gy nz oa l ob oc">./waved</span></pre><h1 id="eb47" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated">设置应用程序</h1><p id="37f9" class="pw-post-body-paragraph ks kt iq ku b kv na jr kx ky nb ju la lb no ld le lf np lh li lj nq ll lm ln ij bi translated">打开一个新的终端，为wave应用程序创建一个目录。($HOME/wave-apps/)</p><pre class="kg kh ki kj gt nu nv nw nx aw ny bi"><span id="a341" class="mm lv iq nv b gy nz oa l ob oc">mkdir $HOME/wave-apps<br/>cd $HOME/wave-apps</span></pre><p id="2229" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">克隆存储库并进入文件夹。</p><pre class="kg kh ki kj gt nu nv nw nx aw ny bi"><span id="b58d" class="mm lv iq nv b gy nz oa l ob oc">git clone https://github.com/bhanukad610/load-testing-app<br/>cd load-testing-app</span></pre><p id="491b" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">设置虚拟环境</p><pre class="kg kh ki kj gt nu nv nw nx aw ny bi"><span id="e1ff" class="mm lv iq nv b gy nz oa l ob oc">python3 -m venv venv<br/>source venv/bin/activate</span></pre><p id="84aa" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">安装依赖项</p><pre class="kg kh ki kj gt nu nv nw nx aw ny bi"><span id="a2e8" class="mm lv iq nv b gy nz oa l ob oc">pip install -r dependencies/requirements.txt</span></pre><p id="f163" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">启动负载测试波形应用程序</p><pre class="kg kh ki kj gt nu nv nw nx aw ny bi"><span id="752d" class="mm lv iq nv b gy nz oa l ob oc">wave run src/test_app.py</span></pre><p id="3d15" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">在同一个目录下打开一个新的终端，启动locust服务器。</p><pre class="kg kh ki kj gt nu nv nw nx aw ny bi"><span id="489e" class="mm lv iq nv b gy nz oa l ob oc">./startLocust.sh</span></pre><p id="5cde" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">转到<a class="ae kr" href="http://localhost:10101/app" rel="noopener ugc nofollow" target="_blank">http://localhost:10101/app</a>访问应用程序。</p><h1 id="889a" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated">应用程序用户手册</h1><p id="a4d1" class="pw-post-body-paragraph ks kt iq ku b kv na jr kx ky nb ju la lb no ld le lf np lh li lj nq ll lm ln ij bi translated">该应用程序的主页如下。您可以按“开始”按钮继续进行负载测试。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi od"><img src="../Images/68071c5eeba83b2f146f6febe606c7c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*T0MHMXCtHvMMFUVi.png"/></div></div></figure><h2 id="6b5c" class="mm lv iq bd lw mn mo dn ma mp mq dp me lb mr ms mg lf mt mu mi lj mv mw mk mx bi translated">然后你会看到下面的页面要求输入。</h2><ol class=""><li id="4132" class="my mz iq ku b kv na ky nb lb nc lf nd lj ne ln nf ng nh ni bi translated">用户数量:您需要模拟的用户数量</li><li id="ff3a" class="my mz iq ku b kv nj ky nk lb nl lf nm lj nn ln nf ng nh ni bi translated">生成速率:在创建指定数量的并发用户之前，开始创建用户的速度</li><li id="e7e1" class="my mz iq ku b kv nj ky nk lb nl lf nm lj nn ln nf ng nh ni bi translated">主机:负载测试的主机(将为您填写为'<a class="ae kr" href="https://www.bbc.com/" rel="noopener ugc nofollow" target="_blank">https://www.bbc.com</a>')</li></ol><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi oe"><img src="../Images/0ccb34e1768d62eaa1b94b9a4d6ea463.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*FK31t663hqiWoXo1.png"/></div></div></figure><p id="77a3" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">然后你继续蝗虫仪表板。它有以下选项卡。</p><h2 id="14cf" class="mm lv iq bd lw mn mo dn ma mp mq dp me lb mr ms mg lf mt mu mi lj mv mw mk mx bi translated">统计数字</h2><p id="e717" class="pw-post-body-paragraph ks kt iq ku b kv na jr kx ky nb ju la lb no ld le lf np lh li lj nq ll lm ln ij bi translated">这显示了服务器如何响应Locust发送的请求的实时统计数据。为此，在src/locust.py中使用并定义了3个端点。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi of"><img src="../Images/a94a67b514ecc4e508b1c50241cd50af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*dMY5MdFtE3T72w-k.png"/></div></div></figure><h2 id="5f4f" class="mm lv iq bd lw mn mo dn ma mp mq dp me lb mr ms mg lf mt mu mi lj mv mw mk mx bi translated">图表</h2><p id="2719" class="pw-post-body-paragraph ks kt iq ku b kv na jr kx ky nb ju la lb no ld le lf np lh li lj nq ll lm ln ij bi translated">这显示了有关每秒总请求数、响应时间和用户数的图表。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi og"><img src="../Images/56c74cb7b8b9df236001b8c570474980.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*4A-EJLO6dFm8rd5t.png"/></div></div></figure><h2 id="20e3" class="mm lv iq bd lw mn mo dn ma mp mq dp me lb mr ms mg lf mt mu mi lj mv mw mk mx bi translated">失败</h2><p id="7c1c" class="pw-post-body-paragraph ks kt iq ku b kv na jr kx ky nb ju la lb no ld le lf np lh li lj nq ll lm ln ij bi translated">如果任何请求由于连接错误、超时、未找到页面、错误请求或类似原因而失败，它将显示在此选项卡中。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi oh"><img src="../Images/1b23d55bcbd7b420d29a5c1193e5d99a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*rADEqHdfhGpDCOj-.png"/></div></div></figure><h2 id="aa65" class="mm lv iq bd lw mn mo dn ma mp mq dp me lb mr ms mg lf mt mu mi lj mv mw mk mx bi translated">例外</h2><p id="98db" class="pw-post-body-paragraph ks kt iq ku b kv na jr kx ky nb ju la lb no ld le lf np lh li lj nq ll lm ln ij bi translated">如果代码生成异常，它会在执行过程中记录在“异常”选项卡中。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi oi"><img src="../Images/a767ed30f87ddd46d05124cb9a530708.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*0nX5vwBR5w0E2Qwd.png"/></div></div></figure><h2 id="209c" class="mm lv iq bd lw mn mo dn ma mp mq dp me lb mr ms mg lf mt mu mi lj mv mw mk mx bi translated">任务</h2><p id="b795" class="pw-post-body-paragraph ks kt iq ku b kv na jr kx ky nb ju la lb no ld le lf np lh li lj nq ll lm ln ij bi translated">显示locust文件中定义的任务。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi oi"><img src="../Images/c3d465ee5ee3fa847fbc2f89ce8fa973.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*CXngnLXxiIW5hC24.png"/></div></div></figure><h2 id="05be" class="mm lv iq bd lw mn mo dn ma mp mq dp me lb mr ms mg lf mt mu mi lj mv mw mk mx bi translated">下载数据</h2><p id="0a4a" class="pw-post-body-paragraph ks kt iq ku b kv na jr kx ky nb ju la lb no ld le lf np lh li lj nq ll lm ln ij bi translated">完成测试后，我们可以下载统计数据、故障数据和异常数据，以CSV文件和报告的形式显示在web界面上。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi oj"><img src="../Images/33f64834b883c559b2145324ca362802.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*HAszqDXYhslzM18g.png"/></div></div></figure><p id="c177" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">您可以从，</p><div class="ok ol gp gr om on"><a href="https://github.com/bhanukad610/load-testing-app" rel="noopener  ugc nofollow" target="_blank"><div class="oo ab fo"><div class="op ab oq cl cj or"><h2 class="bd ir gy z fp os fr fs ot fu fw ip bi translated">GitHub-bhanukad 610/load-testing-app:一个简单的应用程序，使用H2O ai测试给定API的负载</h2><div class="ou l"><h3 class="bd b gy z fp os fr fs ot fu fw dk translated">一个简单的应用程序来测试https://www.bbc.com与H2O波框架和蝗虫的负载。H2O波是一个软件栈…</h3></div><div class="ov l"><p class="bd b dl z fp os fr fs ot fu fw dk translated">github.com</p></div></div><div class="ow l"><div class="ox l oy oz pa ow pb kl on"/></div></div></a></div><p id="1cc9" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">我希望您了解如何使用Locust.io测试API负载。感谢您的阅读！</p><h2 id="4a49" class="mm lv iq bd lw mn mo dn ma mp mq dp me lb mr ms mg lf mt mu mi lj mv mw mk mx bi translated">参考</h2><div class="ok ol gp gr om on"><a href="https://wave.h2o.ai/" rel="noopener  ugc nofollow" target="_blank"><div class="oo ab fo"><div class="op ab oq cl cj or"><h2 class="bd ir gy z fp os fr fs ot fu fw ip bi translated">制作人工智能应用程序| H2O浪潮</h2><div class="ou l"><h3 class="bd b gy z fp os fr fs ot fu fw dk translated">Python的实时Web应用和仪表盘</h3></div><div class="ov l"><p class="bd b dl z fp os fr fs ot fu fw dk translated">wave.h2o.ai</p></div></div><div class="ow l"><div class="pc l oy oz pa ow pb kl on"/></div></div></a></div><div class="ok ol gp gr om on"><a href="https://locust.io/" rel="noopener  ugc nofollow" target="_blank"><div class="oo ab fo"><div class="op ab oq cl cj or"><h2 class="bd ir gy z fp os fr fs ot fu fw ip bi translated">locust——现代负载测试框架</h2><div class="ou l"><h3 class="bd b gy z fp os fr fs ot fu fw dk translated">编辑描述</h3></div><div class="ov l"><p class="bd b dl z fp os fr fs ot fu fw dk translated">locust.io</p></div></div><div class="ow l"><div class="pd l oy oz pa ow pb kl on"/></div></div></a></div></div></div>    
</body>
</html>