<html>
<head>
<title>Rust: Workspaces explained</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Rust:工作空间解释</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/rust-workspaces-explained-6ceb5eb5e7d2?source=collection_archive---------6-----------------------#2022-12-20">https://levelup.gitconnected.com/rust-workspaces-explained-6ceb5eb5e7d2?source=collection_archive---------6-----------------------#2022-12-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="34ba" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">了解Rust workspaces:一个用多个板条箱组织和构建复杂项目的工具，支持代码共享和简单的构建/测试。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/27f985263bba3747eabc6a34e4ea75cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0uJB2qBaaGR1biF82CBOgw.jpeg"/></div></div></figure><h2 id="44dc" class="la lb it bd lc ld le dn lf lg lh dp li kb lj lk ll kf lm ln lo kj lp lq lr ls bi translated">什么是Rust工作区？</h2><p id="9796" class="pw-post-body-paragraph jq jr it js b jt lt jv jw jx lu jz ka kb lv kd ke kf lw kh ki kj lx kl km kn im bi translated">Rust workspaces是一种在单个项目中组织多个Rust板条箱的方法。它们允许开发人员将多个机箱作为一个单元来管理，使得构建、测试和分发复杂的项目变得更加容易。Rust工作区是一个包含Cargo.toml文件的目录，该文件用于定义组成工作区的板条箱及其依赖关系。</p><p id="d608" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Cargo是Rust的包管理器和构建工具，它用于管理和构建Rust工作区。当您在工作区中运行类似于<code class="fe ly lz ma mb b">cargo build</code>或<code class="fe ly lz ma mb b">cargo test</code>的命令时，Cargo将自动在工作区中构建所有的板条箱，并考虑它们的依赖关系。这意味着您可以在一个命令中构建和测试所有的板条箱，而不必为每个板条箱运行单独的命令。</p><p id="7521" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">使用Rust工作空间的一个主要好处是，它们允许您在机箱之间共享代码。例如，如果您有一个要在多个板条箱中使用的公共库，您可以将它放在一个单独的板条箱中，然后将其作为从属项包含在其他每个板条箱中。这有助于减少重复，并使维护和更新代码变得更加容易。</p><p id="3d5c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">要在特定的包上运行<code class="fe ly lz ma mb b">cargo</code>命令，可以使用<code class="fe ly lz ma mb b">--package PACKAGE_NAME</code>参数。例如:</p><pre class="kp kq kr ks gt mc mb md bn me mf bi"><span id="554f" class="mg lb it mb b be mh mi l mj mk">cargo build --package my_package</span></pre><p id="32a8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这将在工作区中构建<code class="fe ly lz ma mb b">my_package</code>箱。</p><h2 id="01a6" class="la lb it bd lc ld le dn lf lg lh dp li kb lj lk ll kf lm ln lo kj lp lq lr ls bi translated">如何使用Rust工作区</h2><p id="f7ea" class="pw-post-body-paragraph jq jr it js b jt lt jv jw jx lu jz ka kb lv kd ke kf lw kh ki kj lx kl km kn im bi translated">要创建Rust工作区，首先需要创建一个新目录，然后在其中创建Cargo.toml文件。您可以手动完成这项工作，也可以使用<code class="fe ly lz ma mb b">cargo new</code>命令，这将使用一个基本的Cargo.toml文件创建一个新的工作区。</p><p id="5047" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">一旦你创建了你的工作空间，你可以通过在工作空间内创建新的目录并使用<code class="fe ly lz ma mb b">cargo new</code>命令在每个目录中创建一个新的板条箱来添加额外的板条箱。每个板条箱都有自己的Cargo.toml文件，您可以使用该文件来定义它的依赖项并指定它的构建配置。</p><p id="caea" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">要构建和测试您的工作空间，您可以分别使用<code class="fe ly lz ma mb b">cargo build</code>和<code class="fe ly lz ma mb b">cargo test</code>命令。这些命令将构建和测试工作空间中的所有板条箱，并考虑它们的依赖关系。</p><p id="d4e0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果要在工作区中使用另一个板条箱中的一个板条箱，可以将其作为依赖项添加到依赖它的板条箱的Cargo.toml文件中。例如，如果您的工作区有一个名为“common”的机箱和另一个名为“app”的机箱，您可以将“common”作为依赖项添加到“app”的Cargo.toml文件中，如下所示:</p><pre class="kp kq kr ks gt mc mb md bn me mf bi"><span id="aabc" class="mg lb it mb b be mh mi l mj mk">[dependencies]<br/>common = { path = "../common" }</span></pre><p id="4c1f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这将告诉Cargo在构建和测试“app”板条箱时构建和链接“common”板条箱。</p><p id="4d25" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在，您可以在代码中使用“公共”箱中的函数和类型，方法是用关键字<code class="fe ly lz ma mb b">use</code>导入它们，后跟库的路径。例如，如果您的“通用”机箱有一个名为“foo”的函数，您可以像这样在代码中使用它:</p><pre class="kp kq kr ks gt mc mb md bn me mf bi"><span id="b94e" class="mg lb it mb b be mh mi l mj mk">use common::foo;<br/><br/>fn main() {<br/>    foo();<br/>}</span></pre><p id="9f50" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这将从“公共”箱中调用“foo”函数。</p><h2 id="28bc" class="la lb it bd lc ld le dn lf lg lh dp li kb lj lk ll kf lm ln lo kj lp lq lr ls bi translated">结论</h2><p id="2fd3" class="pw-post-body-paragraph jq jr it js b jt lt jv jw jx lu jz ka kb lv kd ke kf lw kh ki kj lx kl km kn im bi translated">总之，Rust workspaces是一个强大的工具，用于组织和构建由多个箱子组成的复杂项目。它们允许您将多个板条箱作为一个单元来管理，在板条箱之间共享代码，并在一个命令中构建和测试您的所有板条箱。通过使用Rust workspaces，您可以提高项目的可维护性和可伸缩性，并使与其他开发人员的协作变得更加容易。</p><h2 id="9be2" class="la lb it bd lc ld le dn lf lg lh dp li kb lj lk ll kf lm ln lo kj lp lq lr ls bi translated">你想联系吗？</h2><p id="6350" class="pw-post-body-paragraph jq jr it js b jt lt jv jw jx lu jz ka kb lv kd ke kf lw kh ki kj lx kl km kn im bi translated">如果你想联系我，请在<a class="ae ml" href="https://www.linkedin.com/in/pascal-zwikirsch-3a95a1177/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>联系我。</p><p id="c598" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">另外，可以随时查看<a class="ae ml" href="https://medium.com/@mr-pascal/my-book-recommendations-4b9f73bf961b" rel="noopener">我的书籍推荐</a>📚。</p></div><div class="ab cl mm mn hx mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="im in io ip iq"><div class="kp kq kr ks gt mt"><a href="https://mr-pascal.medium.com/my-book-recommendations-4b9f73bf961b" rel="noopener follow" target="_blank"><div class="mu ab fo"><div class="mv ab mw cl cj mx"><h2 class="bd iu gy z fp my fr fs mz fu fw is bi translated">我的书籍推荐</h2><div class="na l"><h3 class="bd b gy z fp my fr fs mz fu fw dk translated">在接下来的章节中，你可以找到我对所有日常生活话题的书籍推荐，它们对我帮助很大。</h3></div><div class="nb l"><p class="bd b dl z fp my fr fs mz fu fw dk translated">mr-pascal.medium.com</p></div></div><div class="nc l"><div class="nd l ne nf ng nc nh ky mt"/></div></div></a></div><div class="ni nj gp gr nk mt"><a href="https://mr-pascal.medium.com/membership" rel="noopener follow" target="_blank"><div class="mu ab fo"><div class="mv ab mw cl cj mx"><h2 class="bd iu gy z fp my fr fs mz fu fw is bi translated">通过我的推荐链接加入Medium—Pascal Zwikirsch</h2><div class="na l"><h3 class="bd b gy z fp my fr fs mz fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="nb l"><p class="bd b dl z fp my fr fs mz fu fw dk translated">mr-pascal.medium.com</p></div></div><div class="nc l"><div class="nl l ne nf ng nc nh ky mt"/></div></div></a></div></div></div>    
</body>
</html>