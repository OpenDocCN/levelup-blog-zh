<html>
<head>
<title>Boost your Flutter apps to the max with these 6 performance tips</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过以下6个性能提示，将你的Flutter应用程序提升到最大</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/boost-your-flutter-apps-to-the-max-with-these-6-performance-tips-db8ebeb733ba?source=collection_archive---------2-----------------------#2022-11-10">https://levelup.gitconnected.com/boost-your-flutter-apps-to-the-max-with-these-6-performance-tips-db8ebeb733ba?source=collection_archive---------2-----------------------#2022-11-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="ced3" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">慢app？没问题！</h2><div class=""/><div class=""><h2 id="6ff2" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">使用这些针对Flutter应用程序的性能提示，获得更流畅的滚动和动画、更少的内存消耗和更高的执行速度。</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/a81f0960358b311ee3e4a3b46a4ed753.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*s6ys37P9D8ddVnW_"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">照片由<a class="ae lh" href="https://unsplash.com/@cadop?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">马修·施瓦茨</a>在<a class="ae lh" href="https://unsplash.com/?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="2fce" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">这里有一些关于性能的Flutter应用程序的易于使用的最佳实践。如果您注意到任何问题，请使用它们，但不要过早优化。默认情况下，Flutter应用程序很快，你通常不会有任何问题。</p><p id="0130" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">另外，一定要下载我的关于颤振性能技巧的免费电子书。你可以在本文末尾找到链接。</p><h2 id="213e" class="me mf it bd mg mh mi dn mj mk ml dp mm lr mn mo mp lv mq mr ms lz mt mu mv iz bi translated">比起StatefulWidget更喜欢StatelessWidget</h2><p id="9b1f" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated"><code class="fe nb nc nd ne b">StatelessWidget</code>比<code class="fe nb nc nd ne b">StatefulWidget</code>快，因为顾名思义，它不需要管理状态。这就是为什么如果可能的话你应该更喜欢它。</p><p id="d6f9" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">选择一个<code class="fe nb nc nd ne b">StatefulWidget</code>当…<br/>▲您需要一个带有<code class="fe nb nc nd ne b">initState()</code> <br/>的准备函数▲您需要一个带有<code class="fe nb nc nd ne b">dispose()</code> <br/>的处置资源▲您需要一个带有<code class="fe nb nc nd ne b">setState()</code> <br/>的触发小部件重建▲您的小部件有变化的变量(非最终)</p><p id="c044" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在所有其他情况下，你应该选择<code class="fe nb nc nd ne b">StatelessWidget</code>。</p><p id="777f" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">❌是个坏例子</p><pre class="ks kt ku kv gt nf ne ng bn nh ni bi"><span id="036c" class="nj mf it ne b be nk nl l nm nn">import 'package:flutter/widgets.dart';<br/><br/>class MyWidget extends StatefulWidget {<br/>    final String header;<br/>    final String subheader;<br/>    const MyWidget({Key? key, required this.header, required <br/>            this.subheader}): super(key: key);<br/>    @override<br/>    State&lt;MyWidget&gt; createState() =&gt; _MyWidgetState();<br/>}<br/><br/>class _MyWidgetState extends State&lt;MyWidget&gt; {<br/>    @override<br/>    Widget build(BuildContext context) {<br/>        return Column(children: [Text(widget.header),<br/>                Text(widget.subheader)]);<br/>    }<br/>}</span></pre><p id="d70e" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">✅就是一个好例子</p><pre class="ks kt ku kv gt nf ne ng bn nh ni bi"><span id="a17a" class="nj mf it ne b be nk nl l nm nn">import 'package:flutter/widgets.dart';<br/><br/>class MyWidget extends StatelessWidget {<br/>    final String header;<br/>    final String subheader;<br/>    const MyWidget({Key? key, required this.header, required<br/>            this.subheader}): super(key: key);<br/> <br/>    @override<br/>    Widget build(BuildContext context) {<br/>        return Column(children: [Text(header), Text(subheader)]);<br/>    }<br/>}</span></pre><h2 id="7e56" class="me mf it bd mg mh mi dn mj mk ml dp mm lr mn mo mp lv mq mr ms lz mt mu mv iz bi translated">在长列表或网格上使用生成器构造函数</h2><p id="80a8" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">当处理包含许多条目的列表或网格时，建议使用<code class="fe nb nc nd ne b">builder</code>构造函数。它们的优点是只呈现可见的元素。因此，如果你的列表或网格大于一个设备屏幕，你应该选择这种方法。对于较小的列表和网格，也可以使用默认的构造函数。这适用于所有类型的列表和网格，如<a class="ae lh" href="https://api.flutter.dev/flutter/widgets/ListView-class.html" rel="noopener ugc nofollow" target="_blank">列表视图</a>、<a class="ae lh" href="https://api.flutter.dev/flutter/material/ReorderableListView-class.html" rel="noopener ugc nofollow" target="_blank">重新排序列表视图</a>或<a class="ae lh" href="https://api.flutter.dev/flutter/widgets/GridView-class.html" rel="noopener ugc nofollow" target="_blank">网格视图</a>。始终检查构建器构造函数，如果可能的话就使用它。</p><p id="97e1" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">✅就是一个好例子</p><pre class="ks kt ku kv gt nf ne ng bn nh ni bi"><span id="be1f" class="nj mf it ne b be nk nl l nm nn">final List&lt;int&gt; _listItems = &lt;int&gt;[1, 2, 3, 4, 5, 6, 7, 8, 9];<br/><br/>@override<br/>Widget build(BuildContext context) {<br/>    return ListView.builder(<br/>        itemCount: _listItems.length,<br/>        itemBuilder: (context, index) {<br/>            var item = _listItems[index];<br/>            return SizedBox(<br/>                height: 300, child: Center(child:<br/>                    Text(item.toString())));<br/>        }<br/>    );<br/>}</span></pre></div><div class="ab cl no np hx nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="im in io ip iq"><pre class="ks kt ku kv gt nf ne ng bn nh ni bi"><span id="04bd" class="nj mf it ne b be nk nl l nv nn">🔔 Get a short summary of my Medium content on the 1st of each month to your inbox. Save time and pick what you like to read! <br/><br/>Click <a class="ae lh" href="http://bit.ly/xeladu-medium" rel="noopener ugc nofollow" target="_blank">HERE</a> to subscribe for free!</span></pre></div><div class="ab cl no np hx nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="im in io ip iq"><h2 id="c475" class="me mf it bd mg mh mi dn mj mk ml dp mm lr mn mo mp lv mq mr ms lz mt mu mv iz bi translated">不要使用OpacityWidget</h2><p id="afc1" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">使用动画时，<code class="fe nb nc nd ne b">Opacity</code>小部件会导致性能问题，因为<code class="fe nb nc nd ne b">Opacity</code>小部件的所有子小部件也会在每个新帧中重建。在这种情况下，最好使用<code class="fe nb nc nd ne b">AnimatedOpacity</code>。如果您想要淡入图像，请使用<code class="fe nb nc nd ne b">FadeInImage</code>小部件。如果你想要一种不透明的颜色，画一种不透明的颜色。</p><p id="0433" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">❌是个坏例子</p><pre class="ks kt ku kv gt nf ne ng bn nh ni bi"><span id="9e24" class="nj mf it ne b be nk nl l nm nn">Opacity(opacity: 0.5, child: Container(color: Colors.red))</span></pre><p id="2c02" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">✅就是一个好例子</p><pre class="ks kt ku kv gt nf ne ng bn nh ni bi"><span id="1bba" class="nj mf it ne b be nk nl l nm nn">Container(color: Color.fromRGBO(255, 0, 0, 0.5))</span></pre><h2 id="0d01" class="me mf it bd mg mh mi dn mj mk ml dp mm lr mn mo mp lv mq mr ms lz mt mu mv iz bi translated">预缓存图像和图标</h2><p id="ce18" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">Flutter包含一个功能<code class="fe nb nc nd ne b">precacheImage()</code>，可以用来减少图像和图标的加载时间。例如，您可以在<code class="fe nb nc nd ne b">initState()</code>或<code class="fe nb nc nd ne b">didChangeDependencies()</code>方法中使用它来加速图像显示。</p><pre class="ks kt ku kv gt nf ne ng bn nh ni bi"><span id="ccd5" class="nj mf it ne b be nk nl l nm nn">const List&lt;CatImage&gt; images = [<br/>  CatImage(width: 150, height: 150, caption: 'Watch out'),<br/>  CatImage(width: 150, height: 160, caption: 'Hmm'),<br/>  CatImage(width: 160, height: 150, caption: 'Whats up'),<br/>  CatImage(width: 140, height: 150, caption: 'Miaoo'),<br/>  CatImage(width: 130, height: 150, caption: 'Hey'),<br/>  CatImage(width: 155, height: 150, caption: 'Hello'),<br/>];<br/><br/>@override<br/>void didChangeDependencies() {<br/>    super.didChangeDependencies();<br/>    for (CatImage image in images) {<br/>        precacheImage(NetworkImage(image.url), context);<br/>    }<br/>}</span></pre><h2 id="9b9f" class="me mf it bd mg mh mi dn mj mk ml dp mm lr mn mo mp lv mq mr ms lz mt mu mv iz bi translated">减少ListView的内存消耗</h2><p id="9246" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">一个<code class="fe nb nc nd ne b">ListView</code>有两个属性(<code class="fe nb nc nd ne b">addRepaintBoundary</code>和<code class="fe nb nc nd ne b">addAutomaticKeepAlives</code>)，在某些情况下会导致高内存消耗。他们告诉<code class="fe nb nc nd ne b">ListView</code>不要处理目前在屏幕上不可见的项目。就性能而言，这很好，因为滚动很快。但是不可见的项目仍然占用内存空间。如果您有一个很长的图像列表，这可能会导致一个问题。解决方法是将提到的属性设置为false(默认设置为<code class="fe nb nc nd ne b">true</code>)。</p><pre class="ks kt ku kv gt nf ne ng bn nh ni bi"><span id="4432" class="nj mf it ne b be nk nl l nm nn">ListView.builder(<br/>    addAutomaticKeepAlives: false,<br/>    addRepaintBoundaries: false,<br/>    …<br/>);</span></pre><h2 id="245c" class="me mf it bd mg mh mi dn mj mk ml dp mm lr mn mo mp lv mq mr ms lz mt mu mv iz bi translated">总是使用钥匙</h2><p id="73a1" class="pw-post-body-paragraph li lj it lk b ll mw kd ln lo mx kg lq lr my lt lu lv mz lx ly lz na mb mc md im bi translated">每个小部件都有一个<code class="fe nb nc nd ne b">key</code>构造函数参数，并在小部件树中创建一个元素。一个<code class="fe nb nc nd ne b">key</code>允许我们重用一个元素，而不是创建一个新元素。您可以使用<code class="fe nb nc nd ne b">ValueKeys</code>或<code class="fe nb nc nd ne b">GlobalKeys</code>。<code class="fe nb nc nd ne b">GlobalKeys</code>可能会比较棘手，因为在窗口小部件树中不可能有多个窗口小部件具有相同的关键字。另一方面，这会导致代码膨胀，因为你需要为每个小部件定义它们。</p><p id="2648" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">🔔你想要更多的提示吗？查看我的免费电子书！100多名顾客已经拿到了免费的拷贝！</p></div><div class="ab cl no np hx nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="im in io ip iq"><p id="af28" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><a class="ae lh" href="https://medium.com/@xeladu/membership" rel="noopener"> <strong class="lk jd"> <em class="nw">通过我的推荐链接加入成千上万的媒体会员，每月只需5美元就可以阅读你想阅读的文章。</em> </strong> </a></p><div class="nx ny gp gr nz oa"><a href="https://medium.com/@xeladu/membership" rel="noopener follow" target="_blank"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd jd gy z fp of fr fs og fu fw jc bi translated">通过我的推荐链接加入Medium-xela du</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">只需点击一下，就可以通过会员资格访问数千篇文章！您的会员资格只需5美元一张…</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">medium.com</p></div></div><div class="oj l"><div class="ok l ol om on oj oo lb oa"/></div></div></a></div><p id="c528" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">点击<a class="ae lh" href="http://medium-newsletter.quickcoder.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="lk jd">此处</strong> </a>每月一次获取我所有的中篇文章汇总🔔<br/>浏览<a class="ae lh" href="https://xeladu.gumroad.com/" rel="noopener ugc nofollow" target="_blank">我的口香糖商店</a>寻找有趣的编程素材🏬</p></div><div class="ab cl no np hx nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="im in io ip iq"><div class="ks kt ku kv gt"><div role="button" tabindex="0" class="ab bv gv cb fp op oq bn or lb ex"><div class="os l"><div class="ab q"><div class="l di"><img alt="xeladu" class="l de bw ot ou fe" src="../Images/c6d3049714795a7a8169ac0957f05cfe.png" width="20" height="20" loading="lazy" data-original-src="https://miro.medium.com/v2/resize:fill:40:40/1*zDQIuT_7N15cT_wzRxjc4g.jpeg"/><div class="fb bw l ot ou fc n aw fd"/></div><div class="hh l fo"><p class="bd b dl z fp fq fr fs ft fu fv fw dk translated"><a class="ae af ag ah ai aj ak al am an ao ap aq ar as" href="https://xeladu.medium.com/?source=post_page-----db8ebeb733ba--------------------------------" rel="noopener follow" target="_top">赛拉杜</a></p></div></div><div class="ox oy gw l"><h2 class="bd jd ua ub fp uc fr fs og fu fw jc bi translated">软件工程师的高级颤振文章</h2></div><div class="ab q"><div class="l fo"><a class="bd b be z bi ud au ue uf ug qr uh an eh ei ui uj uk el em eo de bk ep" href="https://xeladu.medium.com/list/advanced-flutter-articles-for-software-engineers-f074879fdef3?source=post_page-----db8ebeb733ba--------------------------------" rel="noopener follow" target="_top">View list</a></div><div class="ul l fo"><span class="bd b dl z dk">9 stories</span></div></div></div><div class="pk dh pl fp ab pm fo di"><div class="di pc bv pd pe"><div class="dh l"><img alt="" class="dh" src="../Images/e5774d314e770573e2601ca542dbc4de.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/0*lySym3EjJw93S_Fa"/></div></div><div class="di pc bv pf pg ph"><div class="dh l"><img alt="" class="dh" src="../Images/5289da1df3e789a8ca1d3f6024c01f4b.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/0*s6ys37P9D8ddVnW_"/></div></div><div class="di bv pi pj ph"><div class="dh l"><img alt="" class="dh" src="../Images/642d00374fa0d6e6971120398fbbeb90.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/0*JNMh3UEdihkfQWl9"/></div></div></div></div></div><div class="nx ny gp gr nz"><div role="button" tabindex="0" class="ab bv gv cb fp op oq bn or lb ex"><div class="os l"><div class="ab q"><div class="l di"><img alt="xeladu" class="l de bw ot ou fe" src="../Images/c6d3049714795a7a8169ac0957f05cfe.png" width="20" height="20" loading="lazy" data-original-src="https://miro.medium.com/v2/resize:fill:40:40/1*zDQIuT_7N15cT_wzRxjc4g.jpeg"/><div class="fb bw l ot ou fc n aw fd"/></div><div class="hh l fo"><p class="bd b dl z fp fq fr fs ft fu fv fw dk translated"><a class="ae af ag ah ai aj ak al am an ao ap aq ar as" href="https://xeladu.medium.com/?source=post_page-----db8ebeb733ba--------------------------------" rel="noopener follow" target="_top">赛拉杜</a></p></div></div><div class="ox oy gw l"><h2 class="bd jd ua ub fp uc fr fs og fu fw jc bi translated">适合初学者的颤振文章</h2></div><div class="ab q"><div class="l fo"><a class="bd b be z bi ud au ue uf ug qr uh an eh ei ui uj uk el em eo de bk ep" href="https://xeladu.medium.com/list/flutter-articles-for-beginners-a040ea777956?source=post_page-----db8ebeb733ba--------------------------------" rel="noopener follow" target="_top">View list</a></div><div class="ul l fo"><span class="bd b dl z dk">24 stories</span></div></div></div><div class="pk dh pl fp ab pm fo di"><div class="di pc bv pd pe"><div class="dh l"><img alt="" class="dh" src="../Images/51383106204c2ff6d45c05fd52772a7d.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/0*fCxl8TrfbpOgvCzq"/></div></div><div class="di pc bv pf pg ph"><div class="dh l"><img alt="" class="dh" src="../Images/cdd4d94a464cda34d46fc00e13cf7bf9.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/1*XYet0y5T5xce5j8F80Lmdw.jpeg"/></div></div><div class="di bv pi pj ph"><div class="dh l"><img alt="" class="dh" src="../Images/367140fae23113f1e2e868c2157d1e71.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/1*miSaeOqwwTMnpGF9tdVIbg.png"/></div></div></div></div></div></div></div>    
</body>
</html>