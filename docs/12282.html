<html>
<head>
<title>Circular Progress Bar with Steps in SwiftUI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">SwiftUI中带有步骤的圆形进度条</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/circular-progress-bar-with-steps-in-swiftui-a2ddf8ffc2d9?source=collection_archive---------6-----------------------#2022-05-29">https://levelup.gitconnected.com/circular-progress-bar-with-steps-in-swiftui-a2ddf8ffc2d9?source=collection_archive---------6-----------------------#2022-05-29</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="b660" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">iOS应用程序开发</h2><div class=""/><div class=""><h2 id="1afd" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">在本教程中，我们将使用SwiftUI从头开始创建一个圆形进度条。</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/150c57d532aca8b65606c9543d7a8491.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8TyE7r7oNKuLvvpnyzsfJQ.png"/></div></div></figure><p id="4aed" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">圆形进度条是UI的一个流行元素。但不幸的是，苹果默认不为我们提供它，所以没有简单的方法将其添加到您的应用程序中。幸运的是，我们可以创建自己的应用程序，并根据自己的意愿进行配置，因此我们可以在整个应用程序中重用它。</p><p id="da30" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">事不宜迟，让我们直接开始创建它。在Xcode中创建新的iOS应用程序，然后在那里创建SwiftUI视图。称之为<code class="fe lz ma mb mc b">CircularProgressBarBackgroundView</code>。</p></div><div class="ab cl md me hx mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="im in io ip iq"><blockquote class="mk ml mm"><p id="f1c3" class="ld le mn lf b lg lh kd li lj lk kg ll mo ln lo lp mp lr ls lt mq lv lw lx ly im bi translated"><em class="it">在本教程中，我们使用最新版本的Xcode (13.4)和macOS Monterey (12.4)进行编写。</em></p></blockquote></div><div class="ab cl md me hx mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="im in io ip iq"><p id="3f4b" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">首先，让我们将一个简单的<code class="fe lz ma mb mc b">Circle</code>放入视图的<code class="fe lz ma mb mc b">body</code>中。然后添加以下几行:</p><pre class="ks kt ku kv gt mr mc ms mt aw mu bi"><span id="0264" class="mv mw it mc b gy mx my l mz na">struct CircularProgressBarBackgroundView: View {<br/>    var body: some View {<br/>        Circle()<br/>            .stroke(Color(white: 230/255),<br/>                    style: StrokeStyle(<br/>                        lineWidth: 10,<br/>                        lineCap: .butt,<br/>                        lineJoin: .miter,<br/>                        miterLimit: 0,<br/>                        dash: [20, 10],<br/>                        dashPhase: 0))<br/>            .padding(20)<br/>    }<br/>}</span></pre><p id="508d" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">然后在<code class="fe lz ma mb mc b">Canvas</code>中运行预览。它应该是这样的:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nb"><img src="../Images/8d29bb661436f3bc63b3884193cf26b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dr2DETbPmWApBDG3ssHXWQ.jpeg"/></div></div></figure><p id="4bfd" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">让我们快速讨论一下我们在这里做了什么:</p><ul class=""><li id="732a" class="nc nd it lf b lg lh lj lk lm ne lq nf lu ng ly nh ni nj nk bi translated">我们添加了<code class="fe lz ma mb mc b">stroke</code>修改器来设置圆形的边界，</li><li id="4b5f" class="nc nd it lf b lg nl lj nm lm nn lq no lu np ly nh ni nj nk bi translated">我们选择了灰色作为，剧透警告，这将是我们的进度条的背景，</li><li id="52d8" class="nc nd it lf b lg nl lj nm lm nn lq no lu np ly nh ni nj nk bi translated">我们为笔画设置了一种样式，</li><li id="7868" class="nc nd it lf b lg nl lj nm lm nn lq no lu np ly nh ni nj nk bi translated">我们添加了<code class="fe lz ma mb mc b">padding</code>来使UI看起来更好一些。</li></ul><p id="927b" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">正如你所看到的，每个破折号的长度是20px，它们之间的距离是10px。</p><p id="0c33" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">现在可能还不清楚，但是这个圆是从非常正确的点开始画的，也就是0度。但是我们的进度条将从顶部开始，所以我们需要将形状逆时针旋转90度。将<code class="fe lz ma mb mc b">rotationEffect</code>修改器添加到<code class="fe lz ma mb mc b">Circle</code>:</p><pre class="ks kt ku kv gt mr mc ms mt aw mu bi"><span id="6f8b" class="mv mw it mc b gy mx my l mz na">struct CircularProgressBarBackgroundView: View {<br/>    var body: some View {<br/>        Circle()<br/>            .stroke(Color(white: 230/255),<br/>                    style: StrokeStyle(<br/>                        lineWidth: 10,<br/>                        lineCap: .butt,<br/>                        lineJoin: .miter,<br/>                        miterLimit: 0,<br/>                        dash: [20, 10],<br/>                        dashPhase: 0))<br/>            <strong class="mc jd">.rotationEffect(.degrees(-90))</strong><br/>            .padding(20)<br/>    }<br/>}</span></pre><p id="6dba" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">接下来，我们将玩一会儿数学家游戏。我们希望将破折号之间的距离设置为1px，并在我们的过程中创建尽可能多的破折号。为了实现这一点，我们需要钻研一下三角学。别担心，会很简单的。</p><blockquote class="mk ml mm"><p id="c12a" class="ld le mn lf b lg lh kd li lj lk kg ll mo ln lo lp mp lr ls lt mq lv lw lx ly im bi translated">注意:教程完成后，您可以很容易地将进度条切换为使用百分比而不是步骤。</p></blockquote><p id="9931" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">周长为<code class="fe lz ma mb mc b">π * r * 2</code>，其中<code class="fe lz ma mb mc b">π</code>为常数，约等于。3.14，r是圆的半径。所以，破折号的长度应该是<code class="fe lz ma mb mc b">length / n — dd</code>，其中<code class="fe lz ma mb mc b">length</code>是上面提到的公式，<code class="fe lz ma mb mc b">n</code>是进度条将要进行的步数，<code class="fe lz ma mb mc b">dd</code>是破折号之间的距离。</p><p id="4f2c" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">如果你明白了，或者即使你不明白，也不在乎，也不想写代码，那就让我们开始吧。我们将在视图中添加两个新变量，并在<code class="fe lz ma mb mc b">dash</code>参数中使用它们。但是要实现它，我们还需要知道圆的半径。我们知道圆形的宽度是<code class="fe lz ma mb mc b">r * 2</code>，所以我们可以使用<code class="fe lz ma mb mc b">GeometryReader</code>来获得宽度，并在我们的公式中使用:</p><pre class="ks kt ku kv gt mr mc ms mt aw mu bi"><span id="82a7" class="mv mw it mc b gy mx my l mz na">struct CircularProgressBarBackgroundView: View {<br/>    let total: Int<br/>    <br/><strong class="mc jd">    var shortDashSize: CGFloat { 1 }<br/>    func longDashSize(circleWidth: CGFloat) -&gt; CGFloat {<br/>        .pi * circleWidth / CGFloat(total) - shortDashSize<br/>    }</strong><br/>    <br/>    var body: some View {<br/><strong class="mc jd">        GeometryReader { geometry in</strong><br/>            Circle()<br/>                .stroke(Color(white: 230/255),<br/>                        style: StrokeStyle(<br/>                            lineWidth: 10,<br/>                            lineCap: .butt,<br/>                            lineJoin: .miter,<br/>                            miterLimit: 0,<br/><strong class="mc jd">                            dash: [<br/>                                longDashSize(circleWidth: geometry.size.width),<br/>                                shortDashSize<br/>                            ],</strong><br/>                            dashPhase: 0))<br/>                .rotationEffect(.degrees(-90))<br/><strong class="mc jd">        }</strong><br/>        .padding(20)<br/>    }<br/>}</span></pre><p id="9a97" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">让我们快速回顾一下我们在这里所做的工作:</p><ul class=""><li id="6316" class="nc nd it lf b lg lh lj lk lm ne lq nf lu ng ly nh ni nj nk bi translated">我们将<code class="fe lz ma mb mc b">Circle</code>包装到<code class="fe lz ma mb mc b">GeometryReader</code>中以获得<code class="fe lz ma mb mc b">Circle</code>的宽度，</li><li id="3f2c" class="nc nd it lf b lg nl lj nm lm nn lq no lu np ly nh ni nj nk bi translated">我们添加了<code class="fe lz ma mb mc b">shortDashSize</code>，它实际上是破折号之间的距离，</li><li id="2980" class="nc nd it lf b lg nl lj nm lm nn lq no lu np ly nh ni nj nk bi translated">我们添加了<code class="fe lz ma mb mc b">longDashSize</code>方法，使用上面的公式计算破折号长度，</li><li id="7980" class="nc nd it lf b lg nl lj nm lm nn lq no lu np ly nh ni nj nk bi translated">我们在<code class="fe lz ma mb mc b">dash</code>参数中使用新的变量和方法。</li></ul><p id="d6da" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">如果您将文件底部的画布预览设定为:</p><pre class="ks kt ku kv gt mr mc ms mt aw mu bi"><span id="d9c8" class="mv mw it mc b gy mx my l mz na">CircularProgressBarBackgroundView(total: 6)</span><span id="e7fb" class="mv mw it mc b gy nq my l mz na">    .previewLayout(.fixed(width: 400, height: 400))</span></pre><p id="ce5b" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">你会看到这样的东西:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nb"><img src="../Images/a6c2f6f7502f6a3d7a29ff58b4c0578d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*18rbvTQFc4LvmvUiq1DVqQ.jpeg"/></div></div></figure><p id="3bab" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">如你所见，我们在进度条中有多少<code class="fe lz ma mb mc b">total</code>步就有多少破折号。您可以随意更改该值。</p><p id="c27f" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">最后一件事。与其有固定的填充，不如让它灵活一点。另外，让我们输入一个参数，这样线宽也是可调的:</p><pre class="ks kt ku kv gt mr mc ms mt aw mu bi"><span id="da1a" class="mv mw it mc b gy mx my l mz na">struct CircularProgressBarBackgroundView: View {<br/>    let total: Int<br/>    <strong class="mc jd">@State var lineWidth: CGFloat = 16</strong>        <br/>    var shortDashSize: CGFloat { 1 }<br/>    func longDashSize(circleWidth: CGFloat) -&gt; CGFloat {<br/>        .pi * circleWidth / CGFloat(total) - shortDashSize<br/>    }<br/>    <br/>    var body: some View {<br/>        GeometryReader { geometry in<br/>            Circle()<br/>                .stroke(Color(white: 230/255),<br/>                        style: StrokeStyle(<br/>                            <strong class="mc jd">lineWidth: lineWidth / 1.6,</strong><br/>                            lineCap: .butt,<br/>                            lineJoin: .miter,<br/>                            miterLimit: 0,<br/>                            dash: [<br/>                                longDashSize(circleWidth: geometry.size.width),<br/>                                shortDashSize<br/>                            ],<br/>                            dashPhase: 0))<br/>                .rotationEffect(.degrees(-90))<br/><strong class="mc jd">        }</strong><br/>        <strong class="mc jd">.padding(lineWidth/2)</strong><br/>    }<br/>}</span></pre><ul class=""><li id="8e97" class="nc nd it lf b lg lh lj lk lm ne lq nf lu ng ly nh ni nj nk bi translated">我们添加了一个新的参数<code class="fe lz ma mb mc b">lineWidth</code>，其默认值设置为16。它将是主进度条圆圈的宽度，</li><li id="af65" class="nc nd it lf b lg nl lj nm lm nn lq no lu np ly nh ni nj nk bi translated">因为这是我们的背景，它会比主圆薄一点，所以我们把这个值除以1.6，</li><li id="3144" class="nc nd it lf b lg nl lj nm lm nn lq no lu np ly nh ni nj nk bi translated">我们将填充设置为<code class="fe lz ma mb mc b">lineWidth/2</code>，这样整行都是可见的(否则，视图会在边缘切掉半行)。</li></ul></div><div class="ab cl md me hx mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="im in io ip iq"><p id="3fc7" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">现在，让我们画一个显示进度的圆圈。创建一个新的SwiftUI视图，将其命名为<code class="fe lz ma mb mc b">CircularProgressBarProgressView</code>。首先，让我们创建一个简单的应用了<code class="fe lz ma mb mc b">.stroke</code>的<code class="fe lz ma mb mc b">Circle</code>:</p><pre class="ks kt ku kv gt mr mc ms mt aw mu bi"><span id="e2e4" class="mv mw it mc b gy mx my l mz na">struct CircularProgressBarProgressView: View {<br/>    @State var lineWidth: CGFloat = 16<br/>    @State <strong class="mc jd">var</strong> color: Color = .green</span><span id="2dba" class="mv mw it mc b gy nq my l mz na">    var body: some View {<br/>        Circle()<br/>            .stroke(color,<br/>                    style: StrokeStyle(<br/>                        lineWidth: lineWidth,<br/>                        lineCap: .round<br/>                    ))<br/>            .rotationEffect(.degrees(-90))<br/>            .padding(lineWidth/2)<br/>    }<br/>}</span></pre><p id="6800" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">以类似的方式，我们创建一个<code class="fe lz ma mb mc b">Circle</code>并为<code class="fe lz ma mb mc b">stroke</code>设置所有参数，逆时针旋转它并添加一个填充。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nr"><img src="../Images/3e3215d732fcb47685f31a41e7d8f4b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*12wIUKjrlXk8e3AossdV1w.png"/></div></div></figure><p id="5f70" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">现在，我们需要在这个圆圈之外制作一个进度条。为此，我们需要<code class="fe lz ma mb mc b">trim</code>这个圈:</p><pre class="ks kt ku kv gt mr mc ms mt aw mu bi"><span id="1b3d" class="mv mw it mc b gy mx my l mz na">struct CircularProgressBarProgressView: View {<br/><strong class="mc jd">    let total: Int<br/>    let completed: Int<br/></strong>    @State var lineWidth: CGFloat = 16<br/>    @State <strong class="mc jd">var</strong> color: Color = .green</span><span id="b505" class="mv mw it mc b gy nq my l mz na">    var body: some View {<br/>        Circle()<br/><strong class="mc jd">            .trim(from: 0, to: CGFloat(completed)/CGFloat(total))</strong><br/>            .stroke(color,<br/>                    style: StrokeStyle(<br/>                        lineWidth: lineWidth,<br/>                        lineCap: .round<br/>                    ))<br/>            .rotationEffect(.degrees(-90))<br/>            .padding(lineWidth/2)<br/>    }<br/>}</span><span id="2d4b" class="mv mw it mc b gy nq my l mz na">struct CircularProgressBarProgressView_Previews: PreviewProvider {<br/>    static var previews: some View {<br/><strong class="mc jd">        CircularProgressBarProgressView(total: 6, completed: 4)</strong><br/>            .previewLayout(.fixed(width: 400, height: 400))<br/>    }<br/>}</span></pre><ul class=""><li id="0fd4" class="nc nd it lf b lg lh lj lk lm ne lq nf lu ng ly nh ni nj nk bi translated">我们增加了两个参数<code class="fe lz ma mb mc b">total</code> &amp; <code class="fe lz ma mb mc b">completed</code>，</li><li id="0861" class="nc nd it lf b lg nl lj nm lm nn lq no lu np ly nh ni nj nk bi translated">我们将<code class="fe lz ma mb mc b">.trim</code>应用于<code class="fe lz ma mb mc b">Circle</code>。正如你所看到的，我们在执行除法之前，将<code class="fe lz ma mb mc b">Int</code>值转换为<code class="fe lz ma mb mc b">CGFloat</code> <strong class="lf jd">，因为否则在划分<code class="fe lz ma mb mc b">Int</code> s时，它会将结果向下舍入为<code class="fe lz ma mb mc b">Int</code>值，使所有值都小于<code class="fe lz ma mb mc b">total</code> 0。这是不正确的，因为我们的进度条要么是空的，要么是满的，</strong></li><li id="0482" class="nc nd it lf b lg nl lj nm lm nn lq no lu np ly nh ni nj nk bi translated">我们修改了我们的预览，所以我们可以看到它现在的样子:</li></ul><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nr"><img src="../Images/f0ece561e24dfe04fccc56991a529995.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3SGFEHKX50k5Z-GsjbnI1g.png"/></div></div></figure><p id="0ab9" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">您可以在预览中使用这些值，看看有什么变化。您也可以将几个预览打包成一个<code class="fe lz ma mb mc b">Group</code>，这样您就可以看到视图的不同状态:</p><pre class="ks kt ku kv gt mr mc ms mt aw mu bi"><span id="9432" class="mv mw it mc b gy mx my l mz na">struct CircularProgressBarProgressView_Previews: PreviewProvider {<br/>    static var previews: some View {<br/>        Group {<br/>            CircularProgressBarProgressView(total: 6, completed: 0)<br/>            CircularProgressBarProgressView(total: 6, completed: 4)<br/>            CircularProgressBarProgressView(total: 6, completed: 6)<br/>        }<br/>        .previewLayout(.fixed(width: 400, height: 400))<br/>    }<br/>}</span></pre></div><div class="ab cl md me hx mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="im in io ip iq"><p id="42ce" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">我们快到了。现在，是时候将我们迄今为止所做的一切结合在一起了。创建另一个SwiftUI视图，将其命名为<code class="fe lz ma mb mc b">CircularProgressBarView</code>。这很简单:</p><pre class="ks kt ku kv gt mr mc ms mt aw mu bi"><span id="96f6" class="mv mw it mc b gy mx my l mz na">struct CircularProgressBarView: View {<br/>    let total: Int<br/>    let completed: Int<br/>    @State var lineWidth: CGFloat = 16<br/>    @State var color: Color = .green<br/>    <br/>    var body: some View {<br/>        ZStack {<br/>            CircularProgressBarBackgroundView(total: total, lineWidth: lineWidth)<br/>            CircularProgressBarProgressView(total: total, completed: completed, lineWidth: lineWidth, color: color)<br/>        }<br/>    }<br/>}</span><span id="2866" class="mv mw it mc b gy nq my l mz na">struct CircularProgressBarView_Previews: PreviewProvider {<br/>    static var previews: some View {<br/>        CircularProgressBarView(total: 6, completed: 4)<br/>            .previewLayout(.fixed(width: 400, height: 400))<br/>    }<br/>}</span></pre><p id="1da6" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">因此，它只有三个参数，两个显示总的和完成的步骤，一个显示线条宽度，一个<code class="fe lz ma mb mc b">ZStack</code>包含我们的视图，首先是背景，以及下面的进度条视图:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nr"><img src="../Images/5a5078d28e0429d515ca7bad1958d438.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h1wnUIvsYtTXVSBPNecNJQ.png"/></div></div></figure></div><div class="ab cl md me hx mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="im in io ip iq"><p id="4c7a" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">快好了！让我们看看它是如何工作的。转到应用程序的主视图，可能是<code class="fe lz ma mb mc b">ContentView</code>，将新视图添加到其中，还有一个按钮可以更新进度:</p><pre class="ks kt ku kv gt mr mc ms mt aw mu bi"><span id="ee04" class="mv mw it mc b gy mx my l mz na">struct ContentView: View {<br/>    let total = 6<br/>    @State var completed = 0<br/>    let lineWidth: CGFloat = 16<br/>    <br/>    var body: some View {<br/>        VStack {<br/>            CircularProgressBarView(total: total, completed: completed, lineWidth: lineWidth, color: .green)<br/>            Button {<br/>                withAnimation {<br/>                    guard completed &lt; total else {<br/>                        completed = 0<br/>                        return<br/>                    }<br/>                    completed += 1<br/>                }<br/>            } label: {<br/>                Text("Finish next step")<br/>                    .padding()<br/>                    .background(Color.blue)<br/>                    .foregroundColor(.white)<br/>            }<br/>            .padding(.vertical)<br/>        }<br/>        .padding()<br/>    }<br/>}</span></pre><p id="438c" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">它是这样工作的:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ns"><img src="../Images/23c6e131d5783c12c3f0d289460d619e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*NKGUWEjFyXVqDEO8dET85Q.gif"/></div></div></figure></div><div class="ab cl md me hx mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="im in io ip iq"><p id="403a" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">您可以为进度条设置不同的大小、线宽和颜色:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nt"><img src="../Images/dcc46747cd386c55fbed8ed10f56d4ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q6U90y2VsJudX-Lg74YxOA.png"/></div></div></figure></div><div class="ab cl md me hx mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="im in io ip iq"><p id="3334" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">就是这样！现在，我们有了一个很好的进度条，可以针对不同的情况进行调整。完整代码的链接在这里:</p><div class="nu nv gp gr nw nx"><a href="https://github.com/alexzarr/CircularProgressBar" rel="noopener  ugc nofollow" target="_blank"><div class="ny ab fo"><div class="nz ab oa cl cj ob"><h2 class="bd jd gy z fp oc fr fs od fu fw jc bi translated">GitHub-Alex zarr/circular progress bar</h2><div class="oe l"><h3 class="bd b gy z fp oc fr fs od fu fw dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="of l"><p class="bd b dl z fp oc fr fs od fu fw dk translated">github.com</p></div></div><div class="og l"><div class="oh l oi oj ok og ol lb nx"/></div></div></a></div></div><div class="ab cl md me hx mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="im in io ip iq"><p id="fe4b" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">此外，请查看我关于如何让您的Swift代码更好的文章:</p><div class="nu nv gp gr nw nx"><a href="https://medium.com/geekculture/when-you-write-code-in-swift-write-code-in-swift-abdac43d44fa" rel="noopener follow" target="_blank"><div class="ny ab fo"><div class="nz ab oa cl cj ob"><h2 class="bd jd gy z fp oc fr fs od fu fw jc bi translated">当你用Swift写代码时，用Swift写代码</h2><div class="oe l"><h3 class="bd b gy z fp oc fr fs od fu fw dk translated">不要忘记Swift为您提供的便捷方法和构造。</h3></div><div class="of l"><p class="bd b dl z fp oc fr fs od fu fw dk translated">medium.com</p></div></div><div class="og l"><div class="om l oi oj ok og ol lb nx"/></div></div></a></div></div></div>    
</body>
</html>