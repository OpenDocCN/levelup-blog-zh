<html>
<head>
<title>React Antipatterns to Avoid</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">对反模式做出反应以避免</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/react-antipatterns-to-avoid-7134940f4f04?source=collection_archive---------2-----------------------#2020-05-19">https://levelup.gitconnected.com/react-antipatterns-to-avoid-7134940f4f04?source=collection_archive---------2-----------------------#2020-05-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/ec09d8cbf289ae45165d6fa2d1d56e8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ZRQe--3cXo9PAhAp"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">照片由<a class="ae kf" href="https://unsplash.com/@lucabravo?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">卢卡·布拉沃</a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="d7b4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">React是构建现代交互式前端web应用最常用的前端库。它还可以用来构建移动应用程序。</p><p id="0101" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本文中，我们将研究一些我们应该避免的React反模式。</p><h1 id="d919" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">bind()和组件中的函数</h1><p id="90c7" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">当我们在React类组件中调用<code class="fe mh mi mj mk b">bind</code>时，我们不应该在我们的道具中重复调用它们。相反，我们应该在<code class="fe mh mi mj mk b">constructor</code>中调用<code class="fe mh mi mj mk b">bind</code>，这样当我们将类组件方法作为道具传入时，就不必匆忙调用<code class="fe mh mi mj mk b">bind</code>。</p><p id="3d56" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以编写以下代码来实现这一点:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="30c5" class="mt lf it mk b gy mu mv l mw mx">import React from "react";</span><span id="f048" class="mt lf it mk b gy my mv l mw mx">export default class App extends React.Component {<br/>  constructor(props) {<br/>    super(props);<br/>    this.state = {<br/>      name: ""<br/>    };<br/>    this.updateValue = this.updateValue.bind(this);<br/>  }<br/>  updateValue(e) {<br/>    this.setState({<br/>      name: e.target.value<br/>    });<br/>  }<br/>  render() {<br/>    return (<br/>      &lt;&gt;<br/>        &lt;form&gt;<br/>          &lt;input onChange={this.updateValue} value={this.state.name} /&gt;<br/>        &lt;/form&gt;<br/>        &lt;p&gt;{this.state.name}&lt;/p&gt;<br/>      &lt;/&gt;<br/>    );<br/>  }<br/>}</span></pre><p id="9abd" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在上面的代码中，当输入值改变时，我们有一个调用<code class="fe mh mi mj mk b">updateValue</code>方法的输入。</p><p id="11d1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们有:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="dc54" class="mt lf it mk b gy mu mv l mw mx">this.updateValue = this.updateValue.bind(this);</span></pre><p id="f899" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">以便它总是将组件绑定为<code class="fe mh mi mj mk b">this</code>的值。</p><p id="757e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在我们不必在任何地方重复做一遍。此外，我们不会在每次发出<code class="fe mh mi mj mk b">onChange</code>事件时都创建新函数，因为我们没有调用返回新函数的<code class="fe mh mi mj mk b">bind</code>。</p><p id="645b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当我们的应用程序变大时，动态创建方法对性能的影响在某些情况下会很明显。</p><p id="9856" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">所以与其写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="6859" class="mt lf it mk b gy mu mv l mw mx">&lt;input onChange={this.updateValue.bind(this)} value={this.state.name} /&gt;</span></pre><p id="4b9e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们在上面写下我们所拥有的。</p><h1 id="6e11" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">缺少密钥属性或在密钥属性中使用索引</h1><p id="8494" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">当我们呈现列表时，prop很重要，即使它有时看起来什么也不做。唯一的<code class="fe mh mi mj mk b">key</code>属性值让React正确识别列表项。</p><p id="f18f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">key</code>属性值用于将原始树中的子节点与后续树中的子节点进行匹配。</p><p id="0ccf" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因此，使用数组的索引也是不好的，因为它可能导致React呈现错误的数据。</p><p id="80d5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最好使用唯一的id作为key prop的值。我们可以创建一个具有唯一id的数组，用作键，如下所示:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="da2e" class="mt lf it mk b gy mu mv l mw mx">import React from "react";<br/>import { v4 as uuidv4 } from "uuid";</span><span id="d0ec" class="mt lf it mk b gy my mv l mw mx">const arr = [<br/>  {<br/>    fruit: "apple",<br/>    id: uuidv4()<br/>  },<br/>  {<br/>    fruit: "orange",<br/>    id: uuidv4()<br/>  },<br/>  {<br/>    fruit: "grape",<br/>    id: uuidv4()<br/>  }<br/>];</span><span id="fd11" class="mt lf it mk b gy my mv l mw mx">export default function App() {<br/>  return (<br/>    &lt;div className="App"&gt;<br/>      {arr.map(a =&gt; (<br/>        &lt;p key={arr.id}&gt;{a.fruit}&lt;/p&gt;<br/>      ))}<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="c007" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在上面的代码中，我们使用了<code class="fe mh mi mj mk b">uuid</code>包来创建一个唯一的UUID，用作<code class="fe mh mi mj mk b">key</code>属性的值。这样，唯一的id几乎没有冲突的机会。</p><p id="a44b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这样，ID是惟一的和可预测的，我们不必自己想办法为每个项目生成惟一的ID。</p><h1 id="dbeb" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">组件名称</h1><p id="12a7" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">组件名必须以大写字母开头。例如，如果我们编写下面的代码，我们将从React得到一个错误:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="d6e4" class="mt lf it mk b gy mu mv l mw mx">import React from "react";</span><span id="0465" class="mt lf it mk b gy my mv l mw mx">const foo = () =&gt; &lt;p&gt;foo&lt;/p&gt;;</span><span id="5bb6" class="mt lf it mk b gy my mv l mw mx">export default function App() {<br/>  return (<br/>    &lt;div className="App"&gt;<br/>      &lt;foo /&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="186b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果我们运行上面的代码，React将给出错误信息'<foo>在这个浏览器中无法识别。如果您打算呈现React组件，请以大写字母开始其名称。</foo></p><p id="5890" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因此，我们应该用大写字母来命名我们的组件:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="9a58" class="mt lf it mk b gy mu mv l mw mx">import React from "react";</span><span id="4532" class="mt lf it mk b gy my mv l mw mx">const Foo = () =&gt; &lt;p&gt;foo&lt;/p&gt;;</span><span id="978c" class="mt lf it mk b gy my mv l mw mx">export default function App() {<br/>  return (<br/>    &lt;div className="App"&gt;<br/>      &lt;Foo /&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="b2bd" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们会看到‘foo’如我们所料的显示在屏幕上。</p><figure class="ml mm mn mo gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mz"><img src="../Images/3feb34adb2da5d4a0d41db5d9165e75e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*oKW_iQHRnE3qiOZs"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">照片由<a class="ae kf" href="https://unsplash.com/@chatnarin?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">查塔纳林·普兰纳潘</a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</figcaption></figure><h1 id="84ee" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">关闭每个元素</h1><p id="7688" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">所有组件标签都必须有一个结束标签，或者在自结束组件的末尾有一个斜杠。例如，如果我们有:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="c52e" class="mt lf it mk b gy mu mv l mw mx">import React from "react";</span><span id="912a" class="mt lf it mk b gy my mv l mw mx">const Foo = () =&gt; &lt;p&gt;foo&lt;/p&gt;;</span><span id="587e" class="mt lf it mk b gy my mv l mw mx">export default function App() {<br/>  return (<br/>    &lt;div className="App"&gt;<br/>      &lt;Foo&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="ec67" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们将得到一个语法错误，因为我们缺少了一个结束斜杠或标签:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="6ae7" class="mt lf it mk b gy mu mv l mw mx">&lt;Foo&gt;</span></pre><p id="431e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了让应用程序运行，我们改为编写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="60de" class="mt lf it mk b gy mu mv l mw mx">import React from "react";</span><span id="7b3c" class="mt lf it mk b gy my mv l mw mx">const Foo = () =&gt; &lt;p&gt;foo&lt;/p&gt;;</span><span id="d602" class="mt lf it mk b gy my mv l mw mx">export default function App() {<br/>  return (<br/>    &lt;div className="App"&gt;<br/>      &lt;Foo /&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="9f32" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">&lt;Foo&gt;&lt;/Foo&gt;</code>也管用。</p><h1 id="8b36" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">结论</h1><p id="652d" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">当我们编写React组件时，很容易出错。我们必须记住组件名称的第一个字母要大写。此外，我们必须关闭组件的标签，或者为自关闭组件添加一个关闭斜杠。</p><p id="0dd1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">同样，我们应该首先调用<code class="fe mh mi mj mk b">bind</code>，这样我们就不必重复调用它来绑定到基于类的组件中<code class="fe mh mi mj mk b">this</code>的正确值。</p></div><div class="ab cl na nb hx nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="im in io ip iq"><div class="ml mm mn mo gt nh"><a href="https://skilled.dev" rel="noopener  ugc nofollow" target="_blank"><div class="ni ab fo"><div class="nj ab nk cl cj nl"><h2 class="bd iu gy z fp nm fr fs nn fu fw is bi translated">编写面试问题</h2><div class="no l"><h3 class="bd b gy z fp nm fr fs nn fu fw dk translated">一个完整的平台，在这里我会教你找到下一份工作所需的一切，以及…</h3></div><div class="np l"><p class="bd b dl z fp nm fr fs nn fu fw dk translated">技术开发</p></div></div><div class="nq l"><div class="nr l ns nt nu nq nv jz nh"/></div></div></a></div></div></div>    
</body>
</html>