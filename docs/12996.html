<html>
<head>
<title>Redux Toolkit — A Simple Example Workflow</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">redux Toolkit——一个简单的工作流示例</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/redux-toolkit-a-simple-example-workflow-20efcee54635?source=collection_archive---------0-----------------------#2022-07-30">https://levelup.gitconnected.com/redux-toolkit-a-simple-example-workflow-20efcee54635?source=collection_archive---------0-----------------------#2022-07-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="4863" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是上一篇名为<a class="ae kl" rel="noopener ugc nofollow" target="_blank" href="/redux-a-birds-eye-view-58925fc5ee8">Redux——鸟瞰图</a>的文章的延续，在那篇文章中，我对Redux进行了高层次的概述。</p><p id="f9ca" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在本文中，我们将使用推荐的<a class="ae kl" href="https://redux-toolkit.js.org/" rel="noopener ugc nofollow" target="_blank"> Redux工具包</a>来查看在React应用程序中使用Redux的一个非常简单的工作流程。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/e52b9ca52afa746fc5977643bd24bf43.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k12Z15odZLdBqoP6BH29iw.jpeg"/></div></div></figure><p id="7ca0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，您可以克隆这个项目并导航到starter文件夹。</p><pre class="kn ko kp kq gt ky kz la lb aw lc bi"><span id="fd1b" class="ld le iq kz b gy lf lg l lh li">git clone <a class="ae kl" href="mailto:git@github.com" rel="noopener ugc nofollow" target="_blank">git@github.com</a>:abongsjoel/redux-toolkit.git</span><span id="7dde" class="ld le iq kz b gy lj lg l lh li">cd redux-toolkit/</span><span id="6f64" class="ld le iq kz b gy lj lg l lh li">cd starter/</span><span id="5c15" class="ld le iq kz b gy lj lg l lh li">npm install</span><span id="3fa0" class="ld le iq kz b gy lj lg l lh li">npm start</span></pre><p id="0cd4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">项目中实际上有3个文件夹:</p><ul class=""><li id="702d" class="lk ll iq jp b jq jr ju jv jy lm kc ln kg lo kk lp lq lr ls bi translated">开头的人</li><li id="4dba" class="lk ll iq jp b jq lt ju lu jy lv kc lw kg lx kk lp lq lr ls bi translated">完成</li><li id="b078" class="lk ll iq jp b jq lt ju lu jy lv kc lw kg lx kk lp lq lr ls bi translated">使用createSlice</li></ul><p id="d564" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">starter文件夹包含一个简单的create react应用程序，我已经删除了不必要的内容，并在medium上硬编码了我最喜欢的故事列表。“完整”文件夹包含已完成的项目,“带有createSlice”文件夹包含使用切片的项目版本。</p><p id="7614" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你已经按照上面的指示，那么你应该有一个网页打开显示我最喜欢的文章，我们将从那里继续。</p><p id="26b5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们从使用@reduxjs/toolkit安装将redux添加到我们的应用程序所需的东西开始:</p><pre class="kn ko kp kq gt ky kz la lb aw lc bi"><span id="5668" class="ld le iq kz b gy lf lg l lh li">npm i -D react-redux @reduxjs/toolkit</span></pre><p id="b701" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Redux可以和其他视图库一起使用。所以我们需要“react-redux”包来连接react组件和redux存储。</p><p id="ed99" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们从准备Redux商店开始。在<code class="fe ly lz ma kz b">src</code>文件夹中，我们创建了一个<code class="fe ly lz ma kz b">redux</code>文件夹，在该文件夹中，我们创建了两个文件:<code class="fe ly lz ma kz b">store.js</code>用于我们的商店，而<code class="fe ly lz ma kz b">stories.js</code>用于我们的stories reducer。</p><p id="1db9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe ly lz ma kz b">src/redux/stories.js</code>中，我们使用来自<code class="fe ly lz ma kz b">@reduxjs/toolkit</code>的createReducer创建我们的减速器，如下所示:</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mb mc l"/></div></figure><p id="4082" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">此时，减速器所做的只是返回初始状态。我们稍后将回到这个问题。</p><p id="d99e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，我们导入刚刚创建的减速器，以及来自<code class="fe ly lz ma kz b">@reduxjs/toolkit</code>的<code class="fe ly lz ma kz b">configureStore</code>，并使用它来创建(配置)我们在<code class="fe ly lz ma kz b">src/redux/store.js</code>中的商店，如下所示:</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mb mc l"/></div></figure><p id="616e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，我们导入刚刚创建的<code class="fe ly lz ma kz b">store</code>，并在<code class="fe ly lz ma kz b">src/index.js</code>中将它与<code class="fe ly lz ma kz b">react-redux</code>中的<code class="fe ly lz ma kz b">Provider</code>一起使用，以包装我们的应用程序，从而将创建的存储提供给我们的React组件树，如下所示:</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mb mc l"/></div></figure><p id="65cf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，redux已成功添加到我们的应用程序中。<code class="fe ly lz ma kz b">&lt;Provider /&gt;</code>组件使用React上下文向子组件树提供存储。现在，我们可以使用React钩子从树中的任何组件获取状态并分派动作。</p></div><div class="ab cl md me hu mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="ij ik il im in"><h1 id="ebbe" class="mk le iq bd ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng bi translated">阅读状态</h1><p id="c6cc" class="pw-post-body-paragraph jn jo iq jp b jq nh js jt ju ni jw jx jy nj ka kb kc nk ke kf kg nl ki kj kk ij bi translated">与其硬编码这些故事，不如让我们从新创建的商店中获取它们。我们通过在<code class="fe ly lz ma kz b">src/redux/stories.js</code>中创建一个选择器函数，并把它作为一个参数从<code class="fe ly lz ma kz b">src/components/Stories.js</code>中的<code class="fe ly lz ma kz b">react-redux</code>传递给<code class="fe ly lz ma kz b">useSelector</code>，如下所示:</p><p id="29ca" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe ly lz ma kz b">src/redux/stories.js</code></p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mb mc l"/></div></figure><p id="8966" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe ly lz ma kz b">src/components/Stories.js</code></p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mb mc l"/></div></figure><p id="d808" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe ly lz ma kz b">useSelector</code>钩子需要一个选择器函数作为第一个参数。我们创建选择器函数，为选择状态的不同部分提供可重用的API。</p><p id="375d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，我们的应用程序将如下所示:</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/c900090420e36e0736b68d991592fdf5.png" data-original-src="https://miro.medium.com/v2/resize:fit:914/format:webp/1*G8AeiLUmlihSrsX6cdquhQ.png"/></div></figure><p id="8066" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们成功地从商店中读取了故事，并在我们的应用程序中显示它们，证明我们的redux目前工作正常。快点！</p></div><div class="ab cl md me hu mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="ij ik il im in"><h1 id="47d7" class="mk le iq bd ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng bi translated">调度操作</h1><p id="4970" class="pw-post-body-paragraph jn jo iq jp b jq nh js jt ju ni jw jx jy nj ka kb kc nk ke kf kg nl ki kj kk ij bi translated">点击一个故事名称会把我们带到medium中的故事，但是现在点击clap对我们没有任何好处。让我们继续编写代码，通过点击<code class="fe ly lz ma kz b">Clap</code>按钮来增加拍手次数。</p><p id="0a9a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们从使用来自<code class="fe ly lz ma kz b">@reduxjs/toolkit</code>的<code class="fe ly lz ma kz b">createAction</code>在<code class="fe ly lz ma kz b">src/redux/storie.js</code>中创建一个<code class="fe ly lz ma kz b">clapForStory</code>动作开始，如下所示:</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mb mc l"/></div></figure><p id="9cbb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe ly lz ma kz b">createAction</code>需要两个参数。第一个是动作类型，它是必需的。第二个参数是所谓的<em class="nn"> prepare </em>函数，我们可以用它来接受来自结果动作创建者的参数，并将这些参数作为附加数据附加到动作对象上。<em class="nn">准备</em>功能是可选的。</p><p id="2531" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，我们使用来自<code class="fe ly lz ma kz b">@reduxjs/toolkit</code>的<code class="fe ly lz ma kz b">useDispatch</code>导入并调度来自<code class="fe ly lz ma kz b">src/components/Stories.js</code>的动作，如下所示:</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mb mc l"/></div></figure><p id="ee7c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，单击clap按钮调度动作，但是什么也没有发生，因为我们的reducer函数仍然是空的，所以让我们继续，将<code class="fe ly lz ma kz b">src/redux/stories.js</code>中的<code class="fe ly lz ma kz b">clapForStory</code>动作减少如下:</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mb mc l"/></div></figure><p id="0011" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在点击<code class="fe ly lz ma kz b">Clap</code>按钮会产生神奇的效果。</p></div><div class="ab cl md me hu mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="ij ik il im in"><h1 id="a620" class="mk le iq bd ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng bi translated">使用Json-Server</h1><p id="b30d" class="pw-post-body-paragraph jn jo iq jp b jq nh js jt ju ni jw jx jy nj ka kb kc nk ke kf kg nl ki kj kk ij bi translated">现在，当应用程序启动时，我们将使用<code class="fe ly lz ma kz b">json-server</code>从一个假服务器加载我们的故事并显示它们。</p><p id="f8b2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们从安装json-server开始:</p><pre class="kn ko kp kq gt ky kz la lb aw lc bi"><span id="973f" class="ld le iq kz b gy lf lg l lh li">npm i -D json-server</span></pre><p id="3731" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后，我们在“脚本”部分的<code class="fe ly lz ma kz b">package.json</code>中添加一个脚本来运行服务器，如下所示:</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mb mc l"/></div></figure><p id="a3b4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后在应用程序的根目录下，我们创建了一个<code class="fe ly lz ma kz b">db.json</code>文件，并将我们的故事数组复制到其中，如下所示:</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mb mc l"/></div></figure><p id="7b99" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这告诉服务器它应该提供什么数据。要启动服务器，我们运行:</p><pre class="kn ko kp kq gt ky kz la lb aw lc bi"><span id="5fd3" class="ld le iq kz b gy lf lg l lh li">npm run json-server</span></pre><p id="75df" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">服务器应该在<code class="fe ly lz ma kz b">http://localhost:3001</code>启动</p><p id="1ae4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<code class="fe ly lz ma kz b">src/redux.stories.js</code>中，我们清空了我们的故事数组，因为我们现在将从服务器获取我们的故事。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mb mc l"/></div></figure><p id="0cf6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，我们在<code class="fe ly lz ma kz b">src/redux/stories.js</code>中添加一个<code class="fe ly lz ma kz b">loadStories</code>动作，使用<code class="fe ly lz ma kz b">@reduxjs/toolkit</code>中的<code class="fe ly lz ma kz b">createAsyncThunk</code>,因为它是一个“thunk”动作——一个有副作用的动作——从服务器加载故事，如下所示:</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mb mc l"/></div></figure><p id="bfff" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe ly lz ma kz b">createAsyncThunk</code>将动作类型作为第一个参数，将回调函数作为第二个参数。回调函数应该返回一个承诺。promise解决的任何问题都将被添加到action对象的<code class="fe ly lz ma kz b">payload</code>属性中。</p><p id="5157" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，当应用程序开始使用<code class="fe ly lz ma kz b">src/components/Stories.js</code>中的<code class="fe ly lz ma kz b">useEffect</code>钩子时，我们调度动作，如下所示:</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mb mc l"/></div></figure><p id="373c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，我们将<code class="fe ly lz ma kz b">src/redux/stories.js</code>中减速器的<code class="fe ly lz ma kz b">loadStories</code>动作减少如下:</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mb mc l"/></div></figure><p id="e907" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe ly lz ma kz b">createAsyncThunk</code>返回一个thunk动作创建者。当我们分派这个动作创建者时，基于我们从回调返回的承诺，它分派以下生命周期动作:<code class="fe ly lz ma kz b">pending</code>、<code class="fe ly lz ma kz b">fulfilled</code>和<code class="fe ly lz ma kz b">rejected</code>。这些生命周期操作的类型作为操作创建者的属性可用(例如，<code class="fe ly lz ma kz b">loadStories.pending</code>)。</p><p id="0bf2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">注意，我们在状态中添加了，<code class="fe ly lz ma kz b">storiesLoading</code>和<code class="fe ly lz ma kz b">error</code>变量。我们的应用程序的根状态现在看起来像这样:</p><pre class="kn ko kp kq gt ky kz la lb aw lc bi"><span id="9193" class="ld le iq kz b gy lf lg l lh li">rootState = {<br/>  stories: {<br/>    stories: [...],<br/>    storiesLoading: boolean,<br/>    error: string<br/>  }<br/>}</span></pre><p id="6b0e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在让我们添加选择器函数来处理<code class="fe ly lz ma kz b">src/redux/stories.js</code>中的<code class="fe ly lz ma kz b">loading</code>和<code class="fe ly lz ma kz b">error</code>状态，如下所示:</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mb mc l"/></div></figure><p id="0520" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后在<code class="fe ly lz ma kz b">src/components/Stories.js</code>中，我们获得应用程序的不同状态，并按如下方式使用它们:</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mb mc l"/></div></figure><p id="8aeb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这里，我们优化了应用程序，在应用程序加载时显示加载消息，如果应用程序无法从服务器加载故事，则显示错误消息。</p><p id="4030" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了让一切按预期运行，我们需要打开两个终端。在第一个终端中，我们如下运行我们的服务器:</p><pre class="kn ko kp kq gt ky kz la lb aw lc bi"><span id="514b" class="ld le iq kz b gy lf lg l lh li">npm run json-server</span></pre><p id="1589" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在第二个终端中，我们如下运行我们的应用程序:</p><pre class="kn ko kp kq gt ky kz la lb aw lc bi"><span id="cfd1" class="ld le iq kz b gy lf lg l lh li">npm start</span></pre><p id="8ede" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们完整的<code class="fe ly lz ma kz b">src/redux/stories.js</code>文件应该是这样的:</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mb mc l"/></div></figure></div><div class="ab cl md me hu mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="ij ik il im in"><h1 id="efbe" class="mk le iq bd ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng bi translated">使用createSlice</h1><p id="b7bf" class="pw-post-body-paragraph jn jo iq jp b jq nh js jt ju ni jw jx jy nj ka kb kc nk ke kf kg nl ki kj kk ij bi translated">此外，我们可以将与单个特性(比如故事)相关的Redux功能分组到一个<code class="fe ly lz ma kz b">slice</code>中。这可以通过使用<code class="fe ly lz ma kz b">@reduxjs/toolkit</code>的<code class="fe ly lz ma kz b">createSlice</code>功能来实现。</p><p id="79d9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，我们将重新组织<code class="fe ly lz ma kz b">src/redux/stories.js</code>中的冗余逻辑，以使用<code class="fe ly lz ma kz b">createSlice</code>，如下所示:</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mb mc l"/></div></figure><p id="25f8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们使用<code class="fe ly lz ma kz b">reducers</code>来创建动作和相应的减少器。<code class="fe ly lz ma kz b">reducers</code>选项是一个将动作类型映射到相应缩减器功能的对象。<code class="fe ly lz ma kz b">createSlice</code>获取此映射，并从中生成动作和减速器。</p><p id="f222" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们可以使用<code class="fe ly lz ma kz b">extraReducers</code>为现有的动作和thunk动作创建reducers。基本上，您可以从另一个片导入一个动作，并在这里处理它。</p><p id="8d39" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe ly lz ma kz b">reducers</code>和<code class="fe ly lz ma kz b">extraReducers</code>的区别在于<code class="fe ly lz ma kz b">createSlice</code>没有为<code class="fe ly lz ma kz b">extraReducers</code>中的reducers自动生成动作创建者。</p><p id="d167" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe ly lz ma kz b">createSlice</code>返回具有以下结构的对象:</p><pre class="kn ko kp kq gt ky kz la lb aw lc bi"><span id="b67c" class="ld le iq kz b gy lf lg l lh li">{<br/>  name: name of the slice<br/>  reducer: combine reducer function<br/>  actions: action creators extracted from the 'reducer' option<br/>  caseReducers: reducer functions from 'reducers' option<br/>}</span></pre><p id="5f00" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在我们的例子中，我们从<code class="fe ly lz ma kz b">storiessSlice.actions</code>中提取动作创建者，并分别导出它们，以便于在其他组件中导入和使用它们。默认情况下，我们导出reducer函数。</p></div><div class="ab cl md me hu mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="ij ik il im in"><h1 id="924d" class="mk le iq bd ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng bi translated">结论</h1><p id="3b45" class="pw-post-body-paragraph jn jo iq jp b jq nh js jt ju ni jw jx jy nj ka kb kc nk ke kf kg nl ki kj kk ij bi translated">我希望您能够跟上，并发现这篇文章是有用的。我试图尽可能简单明了，同时保持文章尽可能简短。</p><p id="3b27" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">关于Redux工具包的更多信息，请查看本文。</p><p id="23b7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi">— -</p><p id="e5b8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你喜欢这篇文章，请留下几个(或很多)掌声，如果你还没有，请确保在Medium上关注我。您也可以订阅，以便在我发布时收到电子邮件。谢了。</p></div><div class="ab cl md me hu mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="ij ik il im in"><h1 id="7b96" class="mk le iq bd ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng bi translated">分级编码</h1><p id="afef" class="pw-post-body-paragraph jn jo iq jp b jq nh js jt ju ni jw jx jy nj ka kb kc nk ke kf kg nl ki kj kk ij bi translated">感谢您成为我们社区的一员！在你离开之前:</p><ul class=""><li id="68ca" class="lk ll iq jp b jq jr ju jv jy lm kc ln kg lo kk lp lq lr ls bi translated">👏为故事鼓掌，跟着作者走👉</li><li id="00e6" class="lk ll iq jp b jq lt ju lu jy lv kc lw kg lx kk lp lq lr ls bi translated">📰查看<a class="ae kl" href="https://levelup.gitconnected.com/?utm_source=pub&amp;utm_medium=post" rel="noopener ugc nofollow" target="_blank">升级编码出版物</a>中的更多内容</li><li id="4c5a" class="lk ll iq jp b jq lt ju lu jy lv kc lw kg lx kk lp lq lr ls bi translated">🔔关注我们:<a class="ae kl" href="https://twitter.com/gitconnected" rel="noopener ugc nofollow" target="_blank">Twitter</a>|<a class="ae kl" href="https://www.linkedin.com/company/gitconnected" rel="noopener ugc nofollow" target="_blank">LinkedIn</a>|<a class="ae kl" href="https://newsletter.levelup.dev" rel="noopener ugc nofollow" target="_blank">时事通讯</a></li></ul><p id="dc8e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">🚀👉<a class="ae kl" href="https://jobs.levelup.dev/talent/welcome?referral=true" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir">加入升级人才集体，找到一份神奇的工作</strong> </a></p></div></div>    
</body>
</html>