<html>
<head>
<title>1 Hour Exploratory Data Analysis for Predictive Modeling Geographic Data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">1小时探索性数据分析，用于预测性建模地理数据</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/1-hour-exploratory-data-analysis-for-predictive-modeling-geographic-data-8ed261a16702?source=collection_archive---------3-----------------------#2022-05-18">https://levelup.gitconnected.com/1-hour-exploratory-data-analysis-for-predictive-modeling-geographic-data-8ed261a16702?source=collection_archive---------3-----------------------#2022-05-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="b716" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用Plotly进行Choropleth映射！</h2></div><p id="3975" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">探索性数据分析是任何分析师角色的关键组成部分。在大多数数据分析师的角色中，都知道分析师需要时间来理解数据。这为几乎任何数据使用提供了最有效的清理和准备方法，尤其是预测模型。</p><p id="7cf4" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但是，在某些情况下，业务领导的请求周转时间只有1-2个工作日。在这种情况下，数据分析师通常需要在几个小时内完成工作。像这样的时间限制意味着必须尽可能快速有效地探索数据。精通各种探索性数据分析方法，并在无数数据集上进行了实践，这对于提供最干净、最可靠的建议至关重要，同时也为如何在剩余时间内清理数据奠定了基础。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lb"><img src="../Images/1c13eebc5ef1cbf5252eb3337a598358.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*RuMy2LJ9vqQzh2pf"/></div></div><figcaption class="ln lo gj gh gi lp lq bd b be z dk translated">由<a class="ae lr" href="https://unsplash.com/@anthonyreungere?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Anthony Reungère </a>在<a class="ae lr" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</figcaption></figure><p id="d52d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在我下面展示的场景中，我收到了领导的请求。他们想预测新餐馆的最佳位置。我将与数据科学家一起工作，他将构建预测模型，但我需要准备好数据，并提供数据科学家可能有助于模型构建的任何关键见解。我选择Z <a class="ae lr" href="https://github.com/Adesh2021/EDA-Zomato/blob/main/Zomato%20EDA" rel="noopener ugc nofollow" target="_blank"> omato </a>数据集，因为它是一个简单明了的数据集，有了这些快速的请求，分析师在进入时应该对数据有一个业务理解。我从加载我的数据帧开始。</p><h2 id="d0eb" class="ls lt iq bd lu lv lw dn lx ly lz dp ma ko mb mc md ks me mf mg kw mh mi mj mk bi translated">接下来的可视化和代码是在不到一个小时的时间里创建的。精通这些EDA方法可以让你更快地重现结果。</h2><p id="0801" class="pw-post-body-paragraph kf kg iq kh b ki ml jr kk kl mm ju kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated">第一次使用我的包:</p><pre class="lc ld le lf gt mq mr ms mt aw mu bi"><span id="203d" class="ls lt iq mr b gy mv mw l mx my">import pandas as pd<br/>import numpy as np<br/>import seaborn as sns<br/>import plotly.express as px<br/>import plotly.io as pio</span></pre><p id="26f9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">分析师加载的每个数据集都应该从检查几行数据开始，了解所包含的数据列的基本信息，并查看汇总统计数据</p><p id="c7cb" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，在我提交给数据科学家的文件中，</p><p id="a535" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mz na nb mr b">df.info()</code></p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/eaccc97fe3e543c30089dde2e6e4c827.png" data-original-src="https://miro.medium.com/v2/resize:fit:914/format:webp/1*WhF5WyrgAZkIHxgX1WYE5Q.png"/></div><figcaption class="ln lo gj gh gi lp lq bd b be z dk translated">数据帧信息</figcaption></figure><p id="d697" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这个实例中，我可以观察对象列或文本相关列的数量，以及浮动列或数字列的数量。我还可以观察到，数据帧是平衡的，具有非空条目，我们总共可以看到9545个数据条目。</p><pre class="lc ld le lf gt mq mr ms mt aw mu bi"><span id="03ca" class="ls lt iq mr b gy mv mw l mx my">df.head()</span></pre><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi nd"><img src="../Images/c88b3aa18a2f4c9ea987741d5a7ea7d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_pXq4C0wh0Y7iVxykb_JUw.png"/></div></div><figcaption class="ln lo gj gh gi lp lq bd b be z dk translated">数据帧头</figcaption></figure><p id="f27a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在DataFrame的头部，对我来说更明显的是，我的许多数据是地理驱动的，所以我想在我的进一步探索中考虑这一点。</p><pre class="lc ld le lf gt mq mr ms mt aw mu bi"><span id="5bb3" class="ls lt iq mr b gy mv mw l mx my">df.describe()</span></pre><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi ne"><img src="../Images/4dff4571c5abeebac3cddcb0d853b0d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U0rRuDNGeZdWkY0mpxqRPg.png"/></div></div><figcaption class="ln lo gj gh gi lp lq bd b be z dk translated">数据帧摘要统计</figcaption></figure><p id="1e12" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这里，我只评估我的数据帧中数字列的汇总统计数据。<strong class="kh ir"> <em class="nf">如果这个项目能提供一个多小时的时间</em> </strong> <strong class="kh ir"> <em class="nf">我想把我的一些分类变量转换成数字，并评估汇总统计数据。</em> </strong></p><p id="7d6e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了提高速度，我忽略了不需要规范化的数值变量。在这种情况下，餐馆ID、国家代码、纬度、经度都不需要考虑。在当前索引数据的方式中，它们的平均值可能变化很大，不会成为预测模型的输入变量，预测模型将通过这些汇总统计提供任何信息。对于两人的平均成本，我已经观察到数据框标题中的货币列，因此我预计这些数字会随着汇率改变餐馆的原始成本水平而发生很大变化。然而，价格范围，综合评分和投票我希望有一组数据是正常的，均匀分布，避免太多的离群值。这创造了最好的预测模型。在上面，我可以看到价格范围的平均值和第50百分位，用黄色突出显示，彼此在1个标准差内。投票虽然也在一个标准偏差范围内，但相对于第50百分位和平均值而言，具有非常高的标准偏差。对于预测建模，投票和综合评分应作为一个输出因子或y变量进行研究。因此，通过可视化来理解这些因素的偏斜度是很重要的。</p><p id="dd51" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从DataDrame头中，我可以观察到价格范围是一个离散变量——这意味着有一个封闭的数字，或者该数据列只能包含四个潜在的类别。因此，我使用seaborn来创建价格范围的计数图。这将使我了解这个潜在的输出变量是否是均匀分布的。</p><pre class="lc ld le lf gt mq mr ms mt aw mu bi"><span id="5291" class="ls lt iq mr b gy mv mw l mx my">p = sns.countplot(x='Price range', data=df)</span></pre><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/86b9332185571697a9c2adc94bb2b893.png" data-original-src="https://miro.medium.com/v2/resize:fit:846/format:webp/1*WHInUn_lN6zt4Tjuhhxuzg.png"/></div></figure><p id="f41a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在我的countplot中，我可以看到我的数据中1级价格范围的餐厅比4级多得多。在这种情况下，我会确保数据科学家知道并建议将这一数据框架分成4个子集，并根据各自的价格范围探索构建四个预测模型。</p><p id="30e6" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我的“投票”列是一个连续变量，这意味着我可能有无限多的可能值。对于连续变量，创建直方图来可视化方差是一个重要的步骤。</p><pre class="lc ld le lf gt mq mr ms mt aw mu bi"><span id="b370" class="ls lt iq mr b gy mv mw l mx my">p=sns.histplot(x='Votes', data=df)</span></pre><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/4fefdd6eb87daf28b09679501d15ffd2.png" data-original-src="https://miro.medium.com/v2/resize:fit:872/format:webp/1*FlSjkQkUSIkm9BQyWfT0MA.png"/></div><figcaption class="ln lo gj gh gi lp lq bd b be z dk translated">每个餐厅的投票直方图</figcaption></figure><p id="3c00" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这里，我们可以看到一个显著的右尾偏斜，大多数餐馆的投票数少于1000，但也有少数餐馆的投票数远远超过这个数。</p><h2 id="20b2" class="ls lt iq bd lu lv lw dn lx ly lz dp ma ko mb mc md ks me mf mg kw mh mi mj mk bi translated"><strong class="ak"> EDA最佳实践:始终通过可视化探索您最有影响力的数据。</strong></h2><p id="80cf" class="pw-post-body-paragraph kf kg iq kh b ki ml jr kk kl mm ju kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated">尽管我的汇总统计数据显示我的“总体评分”呈正态分布，但可视化预测模型的输出变量是有意义的。一家餐厅的评级与它的成功密切相关，因此从商业角度来看，这是一家成功餐厅的简单决定因素。</p><pre class="lc ld le lf gt mq mr ms mt aw mu bi"><span id="a475" class="ls lt iq mr b gy mv mw l mx my">p=sns.histplot(x='Aggregate rating', data=df)</span></pre><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/114e6f9948fb3a0378f26eef18f8660a.png" data-original-src="https://miro.medium.com/v2/resize:fit:836/format:webp/1*L3i-dT_lsMIJHImJBq2Zfg.png"/></div><figcaption class="ln lo gj gh gi lp lq bd b be z dk translated">餐厅总体评分分布</figcaption></figure><p id="abe0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如您所见，这个变量与值变量一样需要规范化。虽然在2和5之间的总评分显示正态分布，但是那些低评分/未评分的餐馆在总评分的分布中占很大权重。</p><p id="1b40" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">作为最后一项措施，也是我花了一个小时探索这个数据集的总结，从查看数据帧的信息开始，我就明白了这些数据大部分都与地理位置有关。此外，这个项目的商业目标是确定开设餐馆的最佳位置。因此，我创建了一个视觉效果来呈现给我的数据科学家，它映射了评级所在的位置。</p><pre class="lc ld le lf gt mq mr ms mt aw mu bi"><span id="82f5" class="ls lt iq mr b gy mv mw l mx my">fig = px.scatter_geo(df, lat='Latitude', lon='Longitude', <br/>                    color='Aggregate rating', size="Votes"<br/>                     ,template='simple_white')<br/>fig.show()</span></pre><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi nj"><img src="../Images/fcc601374a023e1ff7cdb7eb458042c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h61paxwLzz2je_ArkERU9w.png"/></div></div><figcaption class="ln lo gj gh gi lp lq bd b be z dk translated">显示餐厅评级分布的Choropleth地图</figcaption></figure><p id="2c15" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Choropleth地图提供了跨所有业务线的可理解的可视化。由此我们可以观察到，在美国，根据餐馆的大小，有大量的选票。与此相反，总体而言，亚洲和非洲大多数餐厅的差异并没有给总体评级带来很大的变化。然而，尽管澳大利亚的票数很少，但它的评级水平确实存在很大差异。</p></div><div class="ab cl nk nl hu nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="ij ik il im in"><p id="327f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现实生活中对数据探索的迫切要求少之又少。然而，加强探索性数据分析的技能不仅有助于完成紧急请求，还能提高你的常规分析能力。即使您从未被要求可视化地理数据，了解如何构建choropleth地图也可以提供可能被忽略但却很有影响力的见解。即使探索一个甚至被认为不适用的数据集，也常常成为发现结果的关键因素。<br/>不仅作为一名分析师，而且作为一名探索者，将一名优秀的分析师与一名出色的分析师区分开来。🧐</p><p id="035a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">参考资料:</strong> Github (2022) EDA-Zomato【来源数据】。</p><p id="e683" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae lr" href="https://github.com/Adesh2021/EDA-Zomato/blob/main/Zomato%20EDA" rel="noopener ugc nofollow" target="_blank">EDA-zom ATO/zom ATO EDA at main adesh 2021/EDA-zom ATO(github.com)</a></p></div></div>    
</body>
</html>