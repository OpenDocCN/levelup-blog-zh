<html>
<head>
<title>Creating an iOS AR Portal App using Occlusion Materials</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用遮挡材质创建iOS AR门户应用程序</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/creating-an-ios-ar-portal-app-using-occlusion-materials-782ee0c58b65?source=collection_archive---------9-----------------------#2022-01-20">https://levelup.gitconnected.com/creating-an-ios-ar-portal-app-using-occlusion-materials-782ee0c58b65?source=collection_archive---------9-----------------------#2022-01-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/2ba9af9322d086cc78b48c8f716b1c9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Xt0OUOwS8ckJITS5gTzdfA.png"/></div></div></figure><p id="df33" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">AR Portal应用程序使用增强现实(AR)来提供通过门户进入特殊空间(内部空间)的体验，使用iOS SDK的ARKit和RealityKit只需几行代码即可实现。</p><h1 id="5179" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">机制</h1><p id="a917" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">内部空间由一个大盒子或球体包围，世界的风景粘贴在它的内表面。进入内部空间，外部摄像头图像被遮挡，给人一种身临其境的感觉。RealityKit的遮挡材料可以让内部空间对外界不可见。</p><figure class="ma mb mc md gt jr gh gi paragraph-image"><div class="gh gi lz"><img src="../Images/616d69ae9e161938f24add00a733a18a.png" data-original-src="https://miro.medium.com/v2/resize:fit:762/format:webp/1*tv3zUyjyEcIzX9Ox4OLgUA.png"/></div></figure><h1 id="2c6e" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">创造一个内部空间</h1><p id="737c" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">可以自由地创建内部空间中的虚拟对象。在本文中，我们将创建一个半径为1.5米的球体，并使用DCC(数字内容创建)工具(如Blender)在其内表面粘贴HDRI纹理。</p><figure class="ma mb mc md gt jr gh gi paragraph-image"><div class="gh gi me"><img src="../Images/62a718a0fe314cbb2645b2324a2b43a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:478/format:webp/1*-ZstpuVwHjucieFjf6kG5w.png"/></div></figure><figure class="ma mb mc md gt jr gh gi paragraph-image"><div class="ab gu cl mf"><img src="../Images/27b5113bb30d17af5d5875e97ff5de73.png" data-original-src="https://miro.medium.com/v2/format:webp/1*tHYHfBvajMjkNeAvW-tt_A.png"/></div></figure><p id="bed1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">将您的3D模型加载到Reality Composer中，您可以使用其行为功能来创建交互，如当用户进入内部空间时播放音乐或显示文本。我们将保持简单，只需将内部空间的位置设置到适当的位置。由于内部空间被半径为1.5m的球体所包围，因此将球体的中心设置为(0.0，1.5，0.0)，并保存rcproject文件。</p><h1 id="4087" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">创建AR应用程序</h1><p id="eb97" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">创建一个AR门户应用程序。<br/> - iOS部署目标:iOS 14.0 <br/> - Xcode 13.2 <br/>内部空间从rcproject文件加载并显示。隐藏内部空间的框(称为遮挡框)是以编程方式创建的，其材质设置为OcclusionMaterial。这使得遮挡框及其内部的虚拟对象从外部不可见。</p><figure class="ma mb mc md gt jr gh gi paragraph-image"><div class="gh gi mg"><img src="../Images/132ae3667d5f55952e2a009357f139d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:480/format:webp/1*K4oa38wGJFwvK_2c8aA8Mg.png"/></div></figure><p id="7fa8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果将遮挡框的位置调整为与内部空间相交，该区域将看起来像一个剪开的门，您将能够从内部看到外部。<br/>遮挡框外的虚拟对象是可见的，所以代表门户入口的对象被放置在遮挡框外。</p><p id="1960" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在本例中，ARView包装了一个UIViewRepresentable，以便与SwiftUI一起使用。<em class="mh"> innerSpaceSize </em>设置内部空间的大小。<em class="mh"> innerSpaceMargin </em>用于计算遮挡框的大小。<em class="mh">内部空间遮挡</em>用于在z方向移动遮挡框，使其一部分与内部空间相交，形成一扇门。0.0表示没有门。</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="mi mj l"/></div></figure><h1 id="6250" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">结论</h1><p id="8c63" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">RealityKit的遮挡材质可以让你将自己的虚拟空间隐藏在外部AR空间之外。如果你进入虚拟空间，你就能看到它。这可以用ARKit和RealityKit SDK中较少的代码行实现。</p><p id="2000" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">本文中描述的Swift代码可以在GitHub上获得，并且包括rcproject样本(白天、室内和夜间)，因此您可以立即试用。</p><p id="e303" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">-GitHub:<a class="ae mk" href="https://github.com/ynagatomo/ARSimplePortal" rel="noopener ugc nofollow" target="_blank">ARSimplePortal</a></p><p id="d65e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您可以通过创建内部空间和替换rcproject来创建自己的AR门户应用程序，还可以使用Reality Composer添加动画和声音。</p><div class="ma mb mc md gt ab cb"><figure class="ml jr mm mn mo mp mq paragraph-image"><img src="../Images/36b9e351bb0b73c71d0d1ff04717d4af.png" data-original-src="https://miro.medium.com/v2/resize:fit:360/format:webp/1*HBl6fh4x37RGKct9_W8UdA.png"/></figure><figure class="ml jr mm mn mo mp mq paragraph-image"><img src="../Images/ee8881fd87d4bcca75aeb8400b0b1523.png" data-original-src="https://miro.medium.com/v2/resize:fit:360/format:webp/1*OCFRUda4-SOTYmtgrkuwIw.png"/></figure><figure class="ml jr mr mn mo mp mq paragraph-image"><img src="../Images/62a718a0fe314cbb2645b2324a2b43a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:478/format:webp/1*-ZstpuVwHjucieFjf6kG5w.png"/></figure></div></div></div>    
</body>
</html>