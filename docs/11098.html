<html>
<head>
<title>How to integrate In-App Purchase in Flutter (iOS)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Flutter (iOS)中整合应用内购买</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-integrate-in-app-purchase-in-flutter-ios-54a66b7eff0b?source=collection_archive---------0-----------------------#2022-02-16">https://levelup.gitconnected.com/how-to-integrate-in-app-purchase-in-flutter-ios-54a66b7eff0b?source=collection_archive---------0-----------------------#2022-02-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/a1574cc0c7a5643a758c3bb1472c7efb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wbTMbkXsSd76dw_-O_zgGA.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">作者图片</figcaption></figure><p id="a6cd" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">大家好！太久了，我还没有写过任何关于Flutter的东西。这是因为我在Flutter中制作了一个OTT (Over The Top)平台，我很高兴地分享，该应用程序已成功上传到Play store和App store。Android部分非常顺利，我的应用上传到play store也很顺利。但是当我把配置稍有不同的同一个应用上传到苹果应用商店时，我遇到了很多问题。我面临的一个主要问题是整合应用内购买。我将在本文中详细讨论这一点，我将为您提供一个解决方案，其中包含代码和解释。所以，没有任何进一步的麻烦，让我们开始吧。</p><p id="f088" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">P.S .我做的应用程序是给我的客户的。</p><h1 id="1083" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">问题</h1><p id="ec68" class="pw-post-body-paragraph kc kd iq ke b kf ly kh ki kj lz kl km kn ma kp kq kr mb kt ku kv mc kx ky kz ij bi translated">我已经集成了第三方支付服务来销售我在Android和iOS中的数字内容，我知道苹果不会允许第三方支付服务，除非有商品或服务的物理交换。所以，这是我犯的错误。我整合了Apple Pay来销售我的数字内容，结果是👇🏻👇🏻</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi md"><img src="../Images/5a4ca4d50a18b32830647e3919f3cae6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kqdTvaqUCQ6hb5UW84dNIA.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">作者图片:应用程序拒绝问题1</figcaption></figure><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi md"><img src="../Images/bcbe5a9b1ff4c61995e8fe4aaa9ee877.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AHL2Wf2cwBxqyxomgfalxw.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">作者图片:应用被拒绝第2期</figcaption></figure><p id="72f9" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">简而言之，苹果希望我整合应用内购买(IAP)以符合其指导方针。我参考了大量关于如何在Flutter中集成“<strong class="ke ir">应用内购买”</strong>的教程，但是没有人为我工作。要么他们有一些问题，要么他们错过了一些不适合我的东西。所以，我不希望你像我一样陷入困境。以下是将IAP集成到您的应用程序中的逐步过程，以便您的应用程序发布过程在Apple App Store上顺利进行。</p><h1 id="660c" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">配置应用内购买的工作流程</h1><p id="9d11" class="pw-post-body-paragraph kc kd iq ke b kf ly kh ki kj lz kl km kn ma kp kq kr mb kt ku kv mc kx ky kz ij bi translated"><strong class="ke ir">第一步:</strong> <strong class="ke ir">签订付费申请协议</strong></p><p id="e771" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">你必须做的第一件事就是接受协议。<em class="mi">进入</em> <a class="ae mj" href="https://appstoreconnect.apple.com/" rel="noopener ugc nofollow" target="_blank"> <em class="mi"> app store连接</em> </a> <em class="mi"> - &gt;协议、税务、银行。</em></p><p id="7990" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">您将看到两个协议。一个是免费应用，另一个是付费应用。</p><p id="e815" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">免费应用程序:</strong>如果您想在App Store上免费上传您的应用程序，请接受此协议。</p><p id="cd27" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">付费应用:</strong>如果你想在App Store上销售你的应用，或者你的应用提供应用内购买，那么这个协议是必要的。</p><p id="8ce7" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">免费应用程序协议不要求你添加银行账户和填写税务信息，但付费应用程序需要。我们需要接受付费应用协议。一旦您接受了协议并填写了必要的信息，您的协议状态将是活动的。就像这样👇🏻👇🏻👇🏻</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mk"><img src="../Images/d1fb00d947611f3325faa30c6316962a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*97knzXCiTfPv8s4DtAyWag.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">作者图片:协议、税收和银行</figcaption></figure><p id="70b0" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">第二步:</strong> <strong class="ke ir">在App Store Connect中配置应用内购买</strong></p><p id="f5ef" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">现在，我假设你已经成功地填写了所需的应用程序信息，如在App Store上创建一个应用程序，并填写版本信息、应用程序隐私信息、添加你的应用程序截图以及所有这些东西。我将主要关注应用内购买。</p><p id="a142" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><em class="mi">前往</em> <a class="ae mj" href="https://appstoreconnect.apple.com/" rel="noopener ugc nofollow" target="_blank"> <em class="mi"> app store连接</em> </a> <em class="mi"> - &gt; MyApps - &gt;您的应用名称- &gt;功能- &gt;应用内购买- &gt;点击加号按钮创建IAP </em></p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ml"><img src="../Images/856bc188a8185797dbffa8919ab4321c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ce5OK45Q6AP91lXD5NbAPg.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">作者图片:应用内购买页面</figcaption></figure><p id="3ac2" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">现在，您将被提示四个不同的选项。就像这样👇🏻👇🏻👇🏻</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mm"><img src="../Images/7be396a4d52a2ae63d23f6d4b6239b06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nPcObAP9NyfmHfkQ5hDnWA.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">作者图片:应用内购买计划</figcaption></figure><p id="98fe" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">相应地选择您的选项。单击创建，您将被重定向到新的网页，在那里您必须填写以下详细信息👇🏻👇🏻👇🏻</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mn"><img src="../Images/d95c9df588ca26d9badee143ce11794b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IqUCHH8l0H6mGY5GMwFpBw.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">作者图片:创建新的应用内购买</figcaption></figure><p id="9897" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">参考名称:</strong>顾名思义只是供大家参考。你可以给它起任何名字。例如，我的应用程序提供了季度、半个月和一年三种订阅计划。我照原样给它们取了名字。</p><p id="8265" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">产品ID: </strong>主要的、重要的东西。您必须提供一个不同于您添加的任何其他IAP的唯一产品ID。该产品ID将用于我们的颤振代码。</p><p id="3098" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">定价:</strong></p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/7b790b161d622b3b6b5a72a60ae0ccc7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1100/format:webp/1*dEI8jPExQAxF7kh8Ay3ZKw.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">作者图片:应用内购买定价</figcaption></figure><p id="66db" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">苹果不提供定制定价。你必须从他们提供的价格选项中进行选择。根据您的需要选择。</p><p id="bdef" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">应用商店信息:</strong></p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mp"><img src="../Images/48bf2b9fd28d5b98ace8afecf657d6bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*frBiAAJZbmeGLsZjMWhJpA.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">作者图片:应用商店信息</figcaption></figure><p id="4a67" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">这些信息也是你必须正确填写的重要内容，因为这些信息将显示在我们的应用程序中。填写显示名称(如季度计划)和描述(如享受我们三个月的数字内容)</p><p id="4760" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">复习资料:</strong></p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mq"><img src="../Images/811ff3cec05ea9d286461b4266f430f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XdlRZkGUV1r0PVdbNzp42A.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">作者图片:评论信息</figcaption></figure><p id="8be2" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">添加带有dimension (640x920)的应用程序截图、应用程序的任何活动/页面，以及一点点说明(复习笔记)，您可以在其中描述您的IAP计划。如果你不填写这些信息，你的应用程序将被拒绝(相信我，这发生在我身上)。如果您已经填写了所有详细信息，请单击“保存”按钮。点击保存按钮后，IAP的状态将变为<strong class="ke ir">“准备提交”</strong></p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mr"><img src="../Images/9992b8c07c088a24eafde698330f53b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y6qYydkKgmLwJwm7S91viw.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">作者图片:应用内购买已成功创建</figcaption></figure><p id="2d28" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">如果您未能提供任何信息，您的状态将为<strong class="ke ir">“缺少元数据”</strong></p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ms"><img src="../Images/ee362c186a5c7b1cfdf93a1b6affb91c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iXp_yLQ0DWk-EbnPHlu6Nw.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">作者图片:应用内购买创建失败！</figcaption></figure><p id="400a" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">如果你遵循了我上面提到的同样的事情，你很可能不会在你的应用审查中遇到任何问题。在您的IAP页面上，您将看到您创建的所有IAP计划，如下所示👇🏻👇🏻👇🏻</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mq"><img src="../Images/558ea2512961eda568e5d8a407024c6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1JbBOCs-8ppNVppnnMIdkQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">作者图片:应用内购买已创建</figcaption></figure><p id="920c" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">第三步:</strong> <strong class="ke ir">在Xcode中启用应用内购买</strong></p><p id="9c88" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">下一步是在你的Flutter代码中添加应用内购买功能。在你的<strong class="ke ir"> Xcode里面打开<strong class="ke ir"> Runner.xcworkspace </strong>(可以在ios文件夹下找到)。</strong>(确保你打开的是<strong class="ke ir"> Runner.xcworkspace </strong>而不是<strong class="ke ir"> Runner.xcodeproj </strong>)。</p><p id="c325" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在Xcode中打开Runner文件后，请遵循以下流程:</p><p id="4f5a" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><em class="mi">跑者- &gt;目标- &gt;跑者- &gt;签约&amp;能力- &gt;添加能力(+能力)- &gt;搜索应用内购买- &gt;添加。</em></p><p id="a857" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">注意:</strong>确保您为所有人添加了IAP，而不仅仅是调试或发布。</p><p id="3eea" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">步骤4:将IAP添加到我们的颤振代码中</strong></p><p id="97d0" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">头疼了这么多，真正的头疼现在要开始了。但是不要担心，Jiten会告诉你所有你需要的东西，这样你就不会头疼了🤯🤯🤯我拿到了。</p><p id="2857" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我们将在_app_purchase 中使用一个名为<a class="ae mj" href="https://pub.dev/packages/in_app_purchase" rel="noopener ugc nofollow" target="_blank">的插件。将这个插件添加到您的pubsec.yaml文件中。你可以从下面的链接中找到代码👇🏻👇🏻👇🏻</a></p><div class="mt mu gp gr mv mw"><a href="https://github.com/TheBoy-WhoCode/iap_example" rel="noopener  ugc nofollow" target="_blank"><div class="mx ab fo"><div class="my ab mz cl cj na"><h2 class="bd ir gy z fp nb fr fs nc fu fw ip bi translated">GitHub-the boy-who code/IAP _ example</h2><div class="nd l"><h3 class="bd b gy z fp nb fr fs nc fu fw dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="ne l"><p class="bd b dl z fp nb fr fs nc fu fw dk translated">GitHub.c</p></div></div><div class="nf l"><div class="ng l nh ni nj nf nk jw mw"/></div></div></a></div><p id="3da5" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在上面的<a class="ae mj" href="https://github.com/TheBoy-WhoCode/iap_example" rel="noopener ugc nofollow" target="_blank"> <strong class="ke ir"> Github repo </strong> </a>中，你会得到两个dart文件。我们要参考的是<strong class="ke ir"> main.dart </strong></p><p id="e838" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在<strong class="ke ir"> main.dart </strong>中，您想要做的主要更改是，像我一样替换产品id。将<strong class="ke ir">“您的计划ID(产品ID)”</strong>替换为您在步骤2中创建的产品ID。</p><pre class="me mf mg mh gt nl nm nn no aw np bi"><span id="ca1b" class="nq lb iq nm b gy nr ns l nt nu">const String threeMontsPlanID = 'Your Plan ID (Product ID)';</span><span id="d84e" class="nq lb iq nm b gy nv ns l nt nu">const String halfYearPlan = 'Your Plan ID (Product ID)';</span><span id="2503" class="nq lb iq nm b gy nv ns l nt nu">const String yearlyPlan = 'Your Plan ID (Product ID)';</span><span id="4354" class="nq lb iq nm b gy nv ns l nt nu">const List&lt;String&gt; _kProductIds = &lt;String&gt;[</span><span id="de2b" class="nq lb iq nm b gy nv ns l nt nu">threeMontsPlanID,</span><span id="81b1" class="nq lb iq nm b gy nv ns l nt nu">halfYearPlan,</span><span id="8acf" class="nq lb iq nm b gy nv ns l nt nu">yearlyPlan</span><span id="ded2" class="nq lb iq nm b gy nv ns l nt nu">];</span></pre><p id="6de0" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir"> main.dart </strong>中的代码有点长，在一整篇文章中解释每一点都很困难，但好处是，代码是不言自明的。您需要做的唯一更改是我上面提到的代码。剩下的都搞定了。但是…</p><p id="6a24" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">如何验证我的采购订单？</p><p id="e5ec" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在<strong class="ke ir"> main.dart </strong>里面，你会得到<strong class="ke ir"><em class="mi">_ verify purchase()</em></strong>方法。使用这种方法，您可以调用API向服务器验证您的购买是否完成，并相应地更新您的数据库。由于保密，我不能分享确切的代码，但我会给你提供一个例子，这样你的工作就完成了。</p><figure class="me mf mg mh gt jr"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="8df7" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我创建了Map来共享我的购买数据，我还创建了一个名为<strong class="ke ir"> <em class="mi"> iapService() </em> </strong>的函数，它接受Map作为参数。这个函数向我的Node.js API发出一个POST请求，它向我发送我的付款状态。根据我的状态，我相应地通知我的用户。</p><p id="500c" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">你要知道的重要的一点是，PurchaseDetails为你提供了两种不同的数据，服务器和本地验证数据。这两个数据是base64编码的。</p><p id="59cb" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">它还会返回purchaseID和productID。purchaseID将是唯一的，由Apple和用户选择的产品ID(您创建的产品ID和用户选择的产品id)提供给您。返回<strong class="ke ir"> <em class="mi">未来&lt;布尔&gt;。</em>值(真)</strong>相应地(重要)。</p><p id="8f02" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">现在，您已经将IAP集成到您的应用程序中，最后一步是测试您的IAP</p><p id="e70d" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">第五步:测试IAP </strong></p><p id="32d0" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">为了测试您的IAP，您需要创建一个沙盒测试帐户。</p><p id="14a5" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><em class="mi">进入</em> <a class="ae mj" href="https://appstoreconnect.apple.com/" rel="noopener ugc nofollow" target="_blank"> <em class="mi"> app store连接</em> </a> <em class="mi"> - &gt;用户并访问，</em>点击沙箱下的测试仪。</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ny"><img src="../Images/2784db79316e3d77de87ed528ffec8b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*VwERUwDJ3UnzeWYY.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">作者图片:沙盒</figcaption></figure><p id="dc55" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">添加测试人员的电子邮件ID。确保您添加了Apple ID。只需运行您的应用程序，从您已经创建的计划中进行选择，当出现提示时，您可以添加测试人员的电子邮件ID(沙盒电子邮件ID)和密码来测试您的IAP。</p><p id="134c" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">注意:</strong>您不能在模拟环境(iOS模拟器)中测试IAP，您需要一个物理设备来进行测试。</p><p id="2571" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">加油🤩！我们已经成功实现了应用内购买，并进行了测试。</p><p id="e8d2" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">这里有一个IAP的快速演示，我把它集成到了我的应用程序中。我希望我可以分享我的应用程序链接，但由于个人原因，我不会。很抱歉。</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi md"><img src="../Images/c5b2e74e20d7a6ab59be6e7ace09d2d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*sZmWghAPiMO9NHMod3co-w.gif"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">作者GIF:应用内购买演示</figcaption></figure></div><div class="ab cl nz oa hu ob" role="separator"><span class="oc bw bk od oe of"/><span class="oc bw bk od oe of"/><span class="oc bw bk od oe"/></div><div class="ij ik il im in"><p id="3d42" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我的应用程序被拒绝了将近五次🤯但是最后，我一个接一个地解决了问题，最后，这个应用程序出现在了应用商店。拥有1K下载量和400活跃用户。🤩🥳</p><p id="cc9d" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">最后但同样重要的是，我还创建了一个名为<a class="ae mj" href="https://pub.dev/packages/floating_frosted_bottom_bar" rel="noopener ugc nofollow" target="_blank">floating _ frosted _ bottom _ bar</a>的抖动包(文章即将发布),敬请关注😉😉😉</p><p id="c0ab" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">一如既往，如果你有任何疑问，任何问题，都可以在<a class="ae mj" href="https://www.linkedin.com/in/jiten-patel-jp/" rel="noopener ugc nofollow" target="_blank"><strong class="ke ir">LinkedIn</strong></a><strong class="ke ir"/><a class="ae mj" href="https://twitter.com/thejitenpatel" rel="noopener ugc nofollow" target="_blank"><strong class="ke ir">Twitter</strong></a><strong class="ke ir"/>&amp;<a class="ae mj" href="https://www.instagram.com/thejitenpatel/" rel="noopener ugc nofollow" target="_blank"><strong class="ke ir">insta gram</strong></a><strong class="ke ir">上联系我。如果我的文章对你有帮助，你可以随时</strong></p><figure class="me mf mg mh gt jr gh gi paragraph-image"><a href="https://www.buymeacoffee.com/jitenpatel"><div class="gh gi og"><img src="../Images/d056b17493ed01d5ac53757107b9addd.png" data-original-src="https://miro.medium.com/v2/resize:fit:340/format:webp/1*WfbwTpxi0c0k2Vwzp3s5yg.png"/></div></a></figure></div></div>    
</body>
</html>