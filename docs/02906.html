<html>
<head>
<title>A Quick Tour Through a React Component Lifecycle</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">快速浏览React组件生命周期</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/a-quick-tour-through-a-react-component-lifecycle-ff3610bb97b9?source=collection_archive---------19-----------------------#2020-04-09">https://levelup.gitconnected.com/a-quick-tour-through-a-react-component-lifecycle-ff3610bb97b9?source=collection_archive---------19-----------------------#2020-04-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="f31e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">当在React中创建一个组件时，也会创建一个非常复杂的生命周期。但是不用担心！我们将揭开这个神秘的面纱，给这个模糊的主题带来光明，帮助你写出更加健壮和一致的代码。</p><h1 id="ae78" class="ko kp it bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">什么是React组件生命周期？</h1><figure class="ln lo lp lq gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi lm"><img src="../Images/6ad829450b2b231d64d697b45a8380ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SM0miMtpamaJxUftC6ULOg.png"/></div></div><figcaption class="ly lz gj gh gi ma mb bd b be z dk translated">组件生命周期。来源:<a class="ae mc" href="http://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/" rel="noopener ugc nofollow" target="_blank">http://projects . wojtekmaj . pl/react-life cycle-methods-diagram/</a></figcaption></figure><p id="ae1c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">React中的组件在其生命周期中有3个主要阶段:安装、更新和卸载。你可以猜到，我们必须从头开始:安装。</p></div><div class="ab cl md me hx mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="im in io ip iq"><p id="8d93" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在安装阶段，组件刚刚被创建。它的方法按以下顺序调用:</p><ul class=""><li id="896d" class="mk ml it js b jt ju jx jy kb mm kf mn kj mo kn mp mq mr ms bi translated">构造函数()</li><li id="2ae5" class="mk ml it js b jt mt jx mu kb mv kf mw kj mx kn mp mq mr ms bi translated">静态getDerivedStateFromProps()</li><li id="a478" class="mk ml it js b jt mt jx mu kb mv kf mw kj mx kn mp mq mr ms bi translated">渲染()</li><li id="ca39" class="mk ml it js b jt mt jx mu kb mv kf mw kj mx kn mp mq mr ms bi translated">componentDidMount()</li></ul><p id="833f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在constructor()方法上，组件<strong class="js iu">还没有挂载</strong>。所以这是初始化状态或者将<a class="ae mc" href="https://reactjs.org/docs/handling-events.html" rel="noopener ugc nofollow" target="_blank">和事件处理方法</a>绑定到实例的好地方。</p><p id="3eb4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">静态getDerivedStateFromProps()方法在render()之前被调用，无论是在组件第一次加载时还是在更新时。它是为罕见的用户情况而存在的。</p><p id="02f5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Render()本身是类组件中唯一需要的方法。它检查this.props和this.state，返回React元素、数组和片段、门户、字符串和数字或布尔值。它不能修改组件的状态。</p><p id="53d7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">componentDidMount()在组件插入DOM树后立即被调用。所有需要页面上组件的调用都在这里。例如:如果您需要从一个端点获取一些数据，这是一个很好的地方。</p></div><div class="ab cl md me hx mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="im in io ip iq"><p id="8e11" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">当发生以下情况之一时，将触发更新阶段:</p><ul class=""><li id="0417" class="mk ml it js b jt ju jx jy kb mm kf mn kj mo kn mp mq mr ms bi translated">新道具来了；</li><li id="9892" class="mk ml it js b jt mt jx mu kb mv kf mw kj mx kn mp mq mr ms bi translated">已调用setState()；</li><li id="8118" class="mk ml it js b jt mt jx mu kb mv kf mw kj mx kn mp mq mr ms bi translated">已调用forceUpdate()。</li></ul><p id="aa51" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">从那里，再次调用getDerivedStateFromProps()方法。如果以前调用过forceUpdate，组件将直接被再次呈现。否则，将调用shouldComponentUpdate()。</p><p id="4727" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">该方法用于让React知道自从上次更新属性或状态以来，组件的输出是否发生了变化。它专门用于性能优化。如果返回false，组件将不会被重新渲染。将来，这个函数将作为一个提示而不是一个严格的指令，这意味着即使方法返回false，React也可以重新呈现页面。</p><p id="26ef" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在重新渲染之前调用getSnapshotBeforeUpdate()。它使您的组件能够从DOM中捕获一些信息(例如滚动位置)。并不常用，但有时它可能出现在特定的ui中，比如需要以特殊方式处理滚动位置的聊天线程。</p><p id="1a01" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">渲染后，componentDidUpdate()被调用。这个方法用于处理更新后的DOM。如果您需要在更新后为组件设置一个新的状态，这里是它的位置。</p></div><div class="ab cl md me hx mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="im in io ip iq"><p id="49a2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在最后一部分中，我们只有一个方法，componentWillUnmount()在组件被销毁之前被调用。这是清除计时器、网络请求或清除在componentDidMount()中创建的任何订阅的地方。</p><p id="e6e4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">此后，该组件将不会再被安装。当然，您仍然可以创建组件的新实例。</p></div><div class="ab cl md me hx mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="im in io ip iq"><p id="56a4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我希望这篇文章能够带来一些关于React及其组件如何在幕后工作的有用信息！</p></div></div>    
</body>
</html>