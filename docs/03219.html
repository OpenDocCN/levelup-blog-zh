<html>
<head>
<title>What is Redux in React? A Quick Explanation Using Simple English</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React中的Redux是什么？用简单的英语快速解释</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/what-is-redux-in-react-a-quick-explanation-using-simple-english-b298579e5898?source=collection_archive---------4-----------------------#2020-04-26">https://levelup.gitconnected.com/what-is-redux-in-react-a-quick-explanation-using-simple-english-b298579e5898?source=collection_archive---------4-----------------------#2020-04-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/185afa5e5a9723e824140a54cffbd83e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l9GqESHUyb9CHMfBHnnh8g.png"/></div></div></figure><p id="2e29" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在本文中，我将使用最少的技术术语来解释Redux是什么。对Redux的直观理解将有助于您在下一个React或React Native项目中更好地使用它。</p><p id="ad43" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们开始吧。</p><h1 id="8742" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">状态容器</h1><p id="e9f9" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">在Redux官方网站上，你首先看到的是“Redux是JavaScript应用的可预测状态容器。”我们来分析一下。</p><p id="9bda" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">首先，状态容器基本上是保存应用程序状态的东西。例如，状态可以是用户是否登录。应用程序的状态可以是用户登录的状态，也可以是来宾状态。所以Redux是一个状态容器，它保存了应用程序可以拥有的所有状态。</p><p id="cd52" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">需要注意的是，状态不是可变的。基本上这意味着你不能直接改变状态。然而，如果在某个状态下进行某些操作，您可以返回一个新的状态。例如，如果用户进行登录操作，您不会更改当前状态的变量来跟踪用户是否登录。您必须用修改后的变量创建一个新的状态并返回它。它本质上取代了旧的状态。</p><p id="f072" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">由此，状态容器的可预测性意味着什么。让我们考虑一下重力。如果你在一个高度拿着一个球，你相信一旦你放开球会发生什么？它会掉下来。会发生什么是可以预料的。此外，我们可以采取抓住球的动作，将它举到一定高度，然后让它自由下落，以获得球下落的同样可预测的结果。</p><p id="640f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">同样，如果您的应用程序从相同的状态采取相同的操作，您将总是得到相同的结果。就像落球的例子。</p><p id="ba96" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">例如，用户可以注销，我们的状态可以表示我们处于“来宾模式”。如果用户登录，我们总是可以预测我们的状态将处于“用户模式”。从那里，如果用户注销，我们总是可以预测我们的状态将回到“来宾模式”。</p><p id="b58a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">综上所述，我们有一种方法来存储应用程序的状态，如果我们可以从某个状态采取一些动作，我们将总是以相同的结束状态结束。</p><h1 id="ad87" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">动作和减速器</h1><p id="a17b" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">现在我们知道Redux持有一个您的应用程序可以使用的状态，下一步是理解我们如何为Redux生成一个新的状态。</p><p id="9adb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这就是行动和减速器发挥作用的地方。</p><h2 id="29d6" class="lz kx iq bd ky ma mb dn lc mc md dp lg kj me mf lk kn mg mh lo kr mi mj ls mk bi translated">什么是行动？</h2><p id="f0e5" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">动作只是返回普通对象的函数。需要注意的是，要求您的操作返回一个普通对象。你不能像一个API请求那样异步地返回一些东西。</p><p id="dbc9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">动作之所以需要返回一个普通对象，是因为Redux把动作当成了“事实”。当你向一个API发出请求时，你是<em class="ml">想要</em>得到一些数据。数据还没有被返回，还不是一个“事实”。所以你必须从你的操作中返回普通的对象。如果你想学习如何在你的动作中从API返回一些数据，你可以看看<a class="ae mm" href="https://medium.com/@SunnyChopper/using-the-redux-thunk-middleware-to-quickly-send-api-requests-in-react-native-88302b44e963" rel="noopener">这篇</a>文章，它讨论了如何从你的API返回数据到Redux。快速预览一下，您实际上是在应用一些中间件，这些中间件执行一些异步代码，然后可以代表您分派一个动作。如果您有兴趣在Redux中使用API，请查看一下。</p><p id="ec43" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">从action函数返回的每个对象都有一个强制的“type”字段，它基本上告诉Redux发生了什么。例如，假设您想要更改用户是否登录，发生的动作的“类型”可以标记为“is_logged_in”。这告诉Redux发生了什么。</p><p id="a8dd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">从那里，您可以返回一些与操作相关的数据。惯例是创建一个包含该数据的“有效载荷”字段。</p><p id="b6e9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">下面是一些简单动作函数的示例代码。</p><figure class="mo mp mq mr gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mn"><img src="../Images/bb2c5d2753309eca6822913c98e93317.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IQYDbWJP2bmua2Z8Sb1hkw.jpeg"/></div></div></figure><h2 id="6812" class="lz kx iq bd ky ma mb dn lc mc md dp lg kj me mf lk kn mg mh lo kr mi mj ls mk bi translated">什么是减速器？</h2><p id="9874" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">用简单的英语来说，reducers只是接受通过动作传入的数据，并为Redux返回一个新状态。我们从动作中传递的“类型”是我们如何知道要更新状态的哪一部分。</p><p id="4ee1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为了避免写一堆if语句，我们总是在reducer文件中使用switch语句。</p><p id="c0cb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们还可以定义一个初始状态，当应用程序启动时，Redux处于其初始状态时，我们可以使用这个初始状态。为了做到这一点，我们创建一个初始状态对象来保存我们想要跟踪的所有关键点。下面是一个初始状态的例子，我用它来保存我的用户的状态数据。</p><figure class="mo mp mq mr gt jr gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/e1a8619108a038a36d2f2ec029b5199b.png" data-original-src="https://miro.medium.com/v2/resize:fit:992/format:webp/1*hldN5DztH64snqDn5-zRGw.jpeg"/></div></figure><p id="497d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">下面是一个reducer文件以及如何使用switch语句的例子。我藏了一些箱子，让图像更符合。</p><figure class="mo mp mq mr gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mt"><img src="../Images/bc8f8e84941bde1c7bf70c0088568282.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nzlpfEBY3iBCbqfgC2h9Sg.jpeg"/></div></div></figure><p id="b906" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您可以定义多个reducer，以便将您的reducer分解成可管理的文件。如果您有一个大的reducer文件，随着时间的推移，它可能很难维护。然而，当您创建Redux存储时，您需要一个可以访问的reducer文件。当您有多个减速器时，这被称为根减速器。</p><p id="ae93" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">下面是一个根减速器的例子。它只是将所有不同的减速器组合在一起，创造出一个单一的减速器。Redux为你提供了一个功能来做到这一点。通过使用' combineReducers '函数，您可以创建一个根缩减器并将其导出。</p><figure class="mo mp mq mr gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mu"><img src="../Images/b8d0c1173bd1aa95ac3e88ebc0139323.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7MsqYLqRk-QbqTdvZSIHfw.jpeg"/></div></div></figure><h1 id="d911" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">访问Redux</h1><p id="82e5" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">既然已经有了可以为Redux返回新状态的actions和reducers，我们需要知道如何访问我们的状态。如果我们无法访问一个状态，那么拥有它还有什么意义呢？</p><h2 id="ac87" class="lz kx iq bd ky ma mb dn lc mc md dp lg kj me mf lk kn mg mh lo kr mi mj ls mk bi translated">注册商店</h2><p id="37b3" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">在访问Redux状态之前，您必须将其注册到您的应用。为此，我们使用“createStore”方法来创建一个商店。这就是我们的Redux对象。从那里，我们可以使用一个叫做Provider的东西，它可以让我们在整个应用程序中访问Redux对象。</p><p id="a946" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">下面是一个例子，说明我如何使用根归约器创建一个存储变量。不要担心中间件，因为如果您想在Redux操作中使用API获取，就会用到中间件。我返回一个Provider对象，其中包含我的主Navigator对象，实际上是我的主应用程序。</p><figure class="mo mp mq mr gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mv"><img src="../Images/a5f4f4cf88831c412139cc9eee22dc5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*By4Fyo5IEi-RraHTEzPYfQ.jpeg"/></div></div></figure><h2 id="28f1" class="lz kx iq bd ky ma mb dn lc mc md dp lg kj me mf lk kn mg mh lo kr mi mj ls mk bi translated">使用选择器</h2><p id="a5c0" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">从这里，我们可以使用“useSelector”钩子函数访问Redux状态中的任何变量。这使我们能够获得数据。</p><p id="9b95" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">首先，您必须确保从“react-redux”导入useSelector函数。下面是您要导入的内容。useDispatch返回一个调度函数，我们可以用它来调用我们的操作。我很快会谈到这一点。<br/> <code class="fe mw mx my mz b">import { useSelector, useDispatch } from ‘react-redux’;</code></p><p id="2773" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">下面是如何使用useSelector的示例:</p><figure class="mo mp mq mr gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi na"><img src="../Images/2d123312b19dfac2e9b97d5c76e44af4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UFcJwhCbQ6f77u5PIqgxNg.jpeg"/></div></div></figure><p id="9324" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在这里，我们可以使用React中的“useEffect”钩子来检测Redux变量中的值发生的任何变化。</p><h2 id="5c24" class="lz kx iq bd ky ma mb dn lc mc md dp lg kj me mf lk kn mg mh lo kr mi mj ls mk bi translated">使用调度</h2><p id="520a" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">useDispatch函数返回一个调度函数，您可以使用该函数从代码中的任何位置调用操作函数。下面是您将用来获得您的调度变量。<br/> <code class="fe mw mx my mz b">const dispatch = useDispatch();</code></p><p id="e4cb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">从这里，您可以导入您已经定义的任何操作，并将它们传递到dispatch，以便调用该操作。例如，如果您想更改用户是否登录。您可能在动作文件中定义了一个名为isLoggedIn的函数。然后，您可以从该文件导入该函数，并将其传递给dispatch以使用该操作。</p><figure class="mo mp mq mr gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nb"><img src="../Images/9760b7b6296c6f1149b1dbe1a2b2f24e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*izR9ClMHW-P8Z5uCB0E7XA.jpeg"/></div></div></figure><h1 id="f31d" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">结论</h1><p id="5e2a" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">简而言之，这几乎是多余的。现在Redux变得更加复杂，因为你可以应用中间件等等。但是，了解什么是Redux，什么是动作和reducers，如何在应用程序中注册Redux，如何获取Redux数据和调度动作，这些知识将有助于您开始使用Redux。</p><p id="1919" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你喜欢这个内容，或者如果它帮助你更好地理解Redux，请放下一些掌声。我的目标是每天写一篇关于React/React Native的文章，你们的掌声为我提供了下一步该写什么的反馈。</p><p id="227d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果您对Redux有任何疑问，请随时联系我。我在几乎所有社交媒体上的用户名都是SunnyChopper。如果你更喜欢在Xbox上玩游戏，并且想在那里聊天，请添加我，它是xSunnyChopper。让我们来谈谈一些使命召唤:战区。</p></div></div>    
</body>
</html>