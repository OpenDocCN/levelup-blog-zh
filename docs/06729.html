<html>
<head>
<title>How to Check for an Object in Javascript (Object Null Check)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Javascript中检查对象(对象空值检查)</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-check-for-an-object-in-javascript-object-null-check-3b2632330296?source=collection_archive---------1-----------------------#2020-12-23">https://levelup.gitconnected.com/how-to-check-for-an-object-in-javascript-object-null-check-3b2632330296?source=collection_archive---------1-----------------------#2020-12-23</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="aab2" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">当您在JavaScript中检查一个对象时，您还需要包含一个<code class="fe ki kj kk kl b">null</code>检查，因为<code class="fe ki kj kk kl b">typeof null</code>是<code class="fe ki kj kk kl b">"object"</code>。</h2></div><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/29a6bb57b409303c0c7ff9ab3f4107de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9S5Jm6PlA3VHzZfS_ZOTKA.jpeg"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated">照片由<a class="ae lc" href="https://unsplash.com/@chhndra?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">坎德拉</a>在<a class="ae lc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><h1 id="41c1" class="ld le it bd lf lg lh li lj lk ll lm ln jz lo ka lp kc lq kd lr kf ls kg lt lu bi translated">JavaScript中的对象/空值检查</h1><p id="eadc" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">JavaScript中有一个长期存在的错误，这意味着对一个对象的每次检查都需要对<code class="fe ki kj kk kl b">null</code> : <code class="fe ki kj kk kl b">typeof null === "object"</code>进行检查。</p><p id="155a" class="pw-post-body-paragraph lv lw it lx b ly mr ju ma mb ms jx md me mt mg mh mi mu mk ml mm mv mo mp mq im bi translated">通常，您将使用三重等式运算符 ( <code class="fe ki kj kk kl b">===</code>或<code class="fe ki kj kk kl b">!==</code>)来<a class="ae lc" href="https://medium.com/javascript-in-plain-english/how-to-check-for-null-in-javascript-dffab64d8ed5" rel="noopener">检查</a> <code class="fe ki kj kk kl b"><a class="ae lc" href="https://medium.com/javascript-in-plain-english/how-to-check-for-null-in-javascript-dffab64d8ed5" rel="noopener">null</a></code>，以确保所讨论的值绝对不为空:<code class="fe ki kj kk kl b">object !== null</code>。该代码检查变量<code class="fe ki kj kk kl b">object</code>没有值<code class="fe ki kj kk kl b">null</code>。</p><p id="56cd" class="pw-post-body-paragraph lv lw it lx b ly mr ju ma mb ms jx md me mt mg mh mi mu mk ml mm mv mo mp mq im bi translated">一些开发人员更喜欢双重等式运算符(<code class="fe ki kj kk kl b">==</code>或<code class="fe ki kj kk kl b">!=</code>)，也称为松散等式运算符。写<code class="fe ki kj kk kl b">object != null</code>会让<a class="ae lc" href="https://medium.com/coding-at-dawn/how-to-check-for-undefined-in-javascript-bcedd62c8ad" rel="noopener">同时检查</a> <code class="fe ki kj kk kl b"><a class="ae lc" href="https://medium.com/coding-at-dawn/how-to-check-for-undefined-in-javascript-bcedd62c8ad" rel="noopener">undefined</a></code>和<code class="fe ki kj kk kl b">null</code>。</p><p id="9df3" class="pw-post-body-paragraph lv lw it lx b ly mr ju ma mb ms jx md me mt mg mh mi mu mk ml mm mv mo mp mq im bi translated"><code class="fe ki kj kk kl b">typeof undefined</code>是您所期望的(字符串<code class="fe ki kj kk kl b">"undefined"</code>)，所以<code class="fe ki kj kk kl b">typeof object === "object"</code>将保证您要么有一个对象，要么有一个<code class="fe ki kj kk kl b">null</code>值；你不能有一个<code class="fe ki kj kk kl b">undefined</code>值。</p><p id="155e" class="pw-post-body-paragraph lv lw it lx b ly mr ju ma mb ms jx md me mt mg mh mi mu mk ml mm mv mo mp mq im bi translated">在对JavaScript对象进行类型检查时，选择<code class="fe ki kj kk kl b">object !== null</code>还是<code class="fe ki kj kk kl b">object != null</code>是你的个人偏好。</p><p id="e9d9" class="pw-post-body-paragraph lv lw it lx b ly mr ju ma mb ms jx md me mt mg mh mi mu mk ml mm mv mo mp mq im bi translated">许多开发人员总是使用<code class="fe ki kj kk kl b">===</code>三重相等操作符来避免他们的JavaScript代码中的任何混乱，因为<code class="fe ki kj kk kl b">==</code>松散相等操作符将执行<a class="ae lc" href="https://developer.mozilla.org/en-US/docs/Glossary/Type_coercion" rel="noopener ugc nofollow" target="_blank">类型强制</a>并且<a class="ae lc" href="https://algassert.com/visualization/2014/03/27/Better-JS-Equality-Table.html" rel="noopener ugc nofollow" target="_blank">有自己的规则</a>。</p><p id="8f0d" class="pw-post-body-paragraph lv lw it lx b ly mr ju ma mb ms jx md me mt mg mh mi mu mk ml mm mv mo mp mq im bi translated">为了明确在检查对象时同时检查<code class="fe ki kj kk kl b">null</code>和<code class="fe ki kj kk kl b">undefined</code>，必须用<code class="fe ki kj kk kl b">&amp;&amp;</code>(逻辑and)操作符:<code class="fe ki kj kk kl b">object !== null &amp;&amp; object !== undefined</code>指定这两种检查。</p><p id="7cf7" class="pw-post-body-paragraph lv lw it lx b ly mr ju ma mb ms jx md me mt mg mh mi mu mk ml mm mv mo mp mq im bi translated">不过，实际上，您只需要<em class="mw">检查<code class="fe ki kj kk kl b">null</code>JavaScript对象。是ol ' JavaScript Object Null Check(<a class="ae lc" href="https://auth0.com/blog/a-brief-history-of-javascript/" rel="noopener ugc nofollow" target="_blank">自1995 </a>)。</em></p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi mx"><img src="../Images/606195d6ccbcb02b2259d8d8a2bd5d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ddEWmAzQxW2fXFME376Cow.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated"><a class="ae lc" href="https://gist.github.com/djD-REK/c814a40cc884a6aea1d74a415fb45c01" rel="noopener ugc nofollow" target="_blank">查看原始代码</a>作为GitHub要点</figcaption></figure><p id="29e2" class="pw-post-body-paragraph lv lw it lx b ly mr ju ma mb ms jx md me mt mg mh mi mu mk ml mm mv mo mp mq im bi translated">是的，这有点荒谬，但是在普通JavaScript中检查对象时，必须检查<code class="fe ki kj kk kl b">null</code>。这就是生活。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi my"><img src="../Images/b894610858596335897f839a05bdc3c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IARudsvAooJ5rKD0TCQkoQ.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated"><a class="ae lc" href="https://gist.github.com/DoctorDerek/324485b20b9fffa9648dd17bb374d189" rel="noopener ugc nofollow" target="_blank">查看原始代码</a>作为GitHub要点</figcaption></figure><p id="e4bc" class="pw-post-body-paragraph lv lw it lx b ly mr ju ma mb ms jx md me mt mg mh mi mu mk ml mm mv mo mp mq im bi translated">我们可以写一个<a class="ae lc" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions" rel="noopener ugc nofollow" target="_blank"> ES6箭头函数</a>来检查一个对象:<code class="fe ki kj kk kl b">const isObject = (value) =&gt; typeof value === "object" &amp;&amp; value !== null</code>。</p><p id="c8b5" class="pw-post-body-paragraph lv lw it lx b ly mr ju ma mb ms jx md me mt mg mh mi mu mk ml mm mv mo mp mq im bi translated">然后，我们可以使用那个函数来有条件地运行代码，在同一行上使用<a class="ae lc" href="https://medium.com/p/7ee0e8dc8bc8" rel="noopener"/><code class="fe ki kj kk kl b"><a class="ae lc" href="https://medium.com/p/7ee0e8dc8bc8" rel="noopener">&amp;&amp;</a></code><a class="ae lc" href="https://medium.com/p/7ee0e8dc8bc8" rel="noopener">短路操作符</a>，我将在后面讨论。</p><p id="484d" class="pw-post-body-paragraph lv lw it lx b ly mr ju ma mb ms jx md me mt mg mh mi mu mk ml mm mv mo mp mq im bi translated">该函数将保证您拥有某种类型的对象，但是确定哪种类型的对象更复杂。</p></div><div class="ab cl mz na hx nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="im in io ip iq"><h1 id="e566" class="ld le it bd lf lg ng li lj lk nh lm ln jz ni ka lp kc nj kd lr kf nk kg lt lu bi translated">检查JavaScript中的对象类型</h1><p id="fe16" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">找出您拥有的JavaScript对象的类型是一个完全不同的问题，有很多解决方案:</p><ul class=""><li id="8360" class="nl nm it lx b ly mr mb ms me nn mi no mm np mq nq nr ns nt bi translated">使用<code class="fe ki kj kk kl b">.constructor</code>属性，我在关于<a class="ae lc" href="https://medium.com/javascript-in-plain-english/how-to-check-for-an-array-in-javascript-6ad20f7a0e21" rel="noopener">的文章中讨论了如何在JavaScript </a>中检查数组。</li><li id="8be0" class="nl nm it lx b ly nu mb nv me nw mi nx mm ny mq nq nr ns nt bi translated"><a class="ae lc" href="https://medium.com/p/c90dd3686bfa" rel="noopener">JavaScript</a>更好的类型检查方法是使用全局函数<code class="fe ki kj kk kl b">Object.getPrototypeOf()</code>来获取对象的原型。</li><li id="edfd" class="nl nm it lx b ly nu mb nv me nw mi nx mm ny mq nq nr ns nt bi translated"><a class="ae lc" href="https://medium.com/javascript-in-plain-english/the-best-way-to-type-check-in-vanilla-js-55197b4f45ec" rel="noopener">Javascript</a>中类型检查的“最佳方法”是<code class="fe ki kj kk kl b">Object.prototype.toString.call()</code>，但它也有缺陷。</li><li id="14ba" class="nl nm it lx b ly nu mb nv me nw mi nx mm ny mq nq nr ns nt bi translated">您可以使用<a class="ae lc" href="https://www.typescriptlang.org/" rel="noopener ugc nofollow" target="_blank"> TypeScript </a>或<a class="ae lc" href="https://flow.org/" rel="noopener ugc nofollow" target="_blank"> Flow </a>将<a class="ae lc" href="https://en.wikipedia.org/wiki/Punt_(gridiron_football)" rel="noopener ugc nofollow" target="_blank">完全转换为类型检查，并切换到“构建时静态类型分析”。</a></li></ul><p id="bbfb" class="pw-post-body-paragraph lv lw it lx b ly mr ju ma mb ms jx md me mt mg mh mi mu mk ml mm mv mo mp mq im bi translated">如果你想知道你有一个典型的对象<code class="fe ki kj kk kl b">{}</code>、<code class="fe ki kj kk kl b">Date</code>还是<code class="fe ki kj kk kl b">RegExp</code>，你需要选择其中的一个方法。</p><p id="4e6c" class="pw-post-body-paragraph lv lw it lx b ly mr ju ma mb ms jx md me mt mg mh mi mu mk ml mm mv mo mp mq im bi translated">至少对于<a class="ae lc" href="https://medium.com/javascript-in-plain-english/how-to-check-for-an-array-in-javascript-6ad20f7a0e21" rel="noopener">检查数组</a>有<code class="fe ki kj kk kl b">Array.isArray()</code>方法，它既能正确工作又易于阅读。😅<em class="mw"> *phew* </em>💨</p><p id="455b" class="pw-post-body-paragraph lv lw it lx b ly mr ju ma mb ms jx md me mt mg mh mi mu mk ml mm mv mo mp mq im bi translated">使用<code class="fe ki kj kk kl b">typeof</code>检查对象(而不是像<a class="ae lc" href="https://medium.com/javascript-in-plain-english/how-to-check-for-an-array-in-javascript-6ad20f7a0e21" rel="noopener">字符串</a>或<a class="ae lc" href="https://medium.com/javascript-in-plain-english/how-to-check-for-a-number-in-javascript-8d9024708153" rel="noopener">数字</a>这样的原始值)比确定您拥有什么类型的对象更简单。当你开始处理JavaScript的<a class="ae lc" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Inheritance_and_the_prototype_chain" rel="noopener ugc nofollow" target="_blank">原型继承</a>链时，确定对象类型会变得模糊不清。</p></div><div class="ab cl mz na hx nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="im in io ip iq"><h1 id="3ebc" class="ld le it bd lf lg ng li lj lk nh lm ln jz ni ka lp kc nj kd lr kf nk kg lt lu bi translated">短路操作符(<code class="fe ki kj kk kl b">&amp;&amp;</code> ) +对象/空检查</h1><p id="87f7" class="pw-post-body-paragraph lv lw it lx b ly lz ju ma mb mc jx md me mf mg mh mi mj mk ml mm mn mo mp mq im bi translated">最后一点，你会经常看到类型检查和<code class="fe ki kj kk kl b">&amp;&amp;</code>(逻辑AND)“短路操作符”一起使用，因为任何附加了<code class="fe ki kj kk kl b">&amp;&amp;</code>的额外代码在<a class="ae lc" href="https://medium.com/coding-at-dawn/what-are-falsy-values-in-javascript-ca0faa34feb4" rel="noopener">一个假值</a>之后都不会执行。</p><p id="f339" class="pw-post-body-paragraph lv lw it lx b ly mr ju ma mb ms jx md me mt mg mh mi mu mk ml mm mv mo mp mq im bi translated">我们在代码示例中看到了这一点，其中您不需要检查<code class="fe ki kj kk kl b">typeof object === "object"</code>后面的<code class="fe ki kj kk kl b">undefined</code>，因为如果<code class="fe ki kj kk kl b">typeof</code>返回<code class="fe ki kj kk kl b">"undefined"</code>，代码将不会继续执行。这意味着你只需要检查在<code class="fe ki kj kk kl b">typeof</code>表达式之后的<code class="fe ki kj kk kl b">null</code>，因为<code class="fe ki kj kk kl b">typeof</code>返回的对象意味着一个对象或者一个<code class="fe ki kj kk kl b">null</code>值。</p><p id="2161" class="pw-post-body-paragraph lv lw it lx b ly mr ju ma mb ms jx md me mt mg mh mi mu mk ml mm mv mo mp mq im bi translated">类似于<code class="fe ki kj kk kl b">Array.isArray(array) &amp;&amp; array.length &gt; 0 &amp;&amp; console.log(array[0])</code>的代码并不少见——它会检查一个数组，确保它不为空，然后<code class="fe ki kj kk kl b">console.log()</code>检查它的第一个项目。</p><p id="472b" class="pw-post-body-paragraph lv lw it lx b ly mr ju ma mb ms jx md me mt mg mh mi mu mk ml mm mv mo mp mq im bi translated">在JavaScript中，您可以安全地编写<code class="fe ki kj kk kl b">typeof object === "object" &amp;&amp; object !== null &amp;&amp; object.property &amp;&amp; console.log(object.property)</code>。只有当<code class="fe ki kj kk kl b">object</code>变量是一个带有关键字<code class="fe ki kj kk kl b">.property</code>的对象时，这才会<code class="fe ki kj kk kl b">console.log()</code>为<code class="fe ki kj kk kl b">object.property</code>值。</p><p id="7a9d" class="pw-post-body-paragraph lv lw it lx b ly mr ju ma mb ms jx md me mt mg mh mi mu mk ml mm mv mo mp mq im bi translated">如果在最后一个<code class="fe ki kj kk kl b">&amp;&amp;</code>之前有任何值返回falsy，JavaScript将停止运行该行代码，防止类似<code class="fe ki kj kk kl b">"null has no properties"</code>的潜在<code class="fe ki kj kk kl b"><a class="ae lc" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypeError" rel="noopener ugc nofollow" target="_blank">TypeError</a></code>。</p><p id="a581" class="pw-post-body-paragraph lv lw it lx b ly mr ju ma mb ms jx md me mt mg mh mi mu mk ml mm mv mo mp mq im bi translated">综上所述，当您在JavaScript中检查对象时，JavaScript Object Null Check可以在一行中与<code class="fe ki kj kk kl b">&amp;&amp;</code>一起使用。</p><p id="738b" class="pw-post-body-paragraph lv lw it lx b ly mr ju ma mb ms jx md me mt mg mh mi mu mk ml mm mv mo mp mq im bi translated">我希望这有助于您检查对象的类型，包括一些选项来确定您正在处理的对象的类型。</p><p id="6d64" class="pw-post-body-paragraph lv lw it lx b ly mr ju ma mb ms jx md me mt mg mh mi mu mk ml mm mv mo mp mq im bi translated"><strong class="lx iu">快乐编码！</strong>🌠<strong class="lx iu"> ( ‿ ) </strong>🌠</p></div><div class="ab cl mz na hx nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="im in io ip iq"><p id="b753" class="pw-post-body-paragraph lv lw it lx b ly mr ju ma mb ms jx md me mt mg mh mi mu mk ml mm mv mo mp mq im bi translated">德里克·奥斯汀博士是《职业编程:如何在6个月内成为一名成功的6位数程序员 》一书的作者，该书现已在亚马逊上架。</p></div></div>    
</body>
</html>