# 我是如何为了纯粹的本土反应而放弃世博会的

> 原文：<https://levelup.gitconnected.com/how-i-ditched-expo-for-pure-react-native-fc0375361307>

## 我最近的两篇文章都是关于赞扬 Expo 以及它如何让想要成为移动开发者的人的生活变得更容易。随着时间的推移，硬币的另一面会显现出来。

![](img/fb321f097359fbefbd40004d7af53405.png)

莎拉·多维勒在 [Unsplash](https://unsplash.com/search/photos/minimal?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) 上的照片

**TL；纯反应原生博士毕竟没那么可怕。如果你的应用需求超过 Expo 所能提供的，不要害怕用 plain React Native 完全取代它。**

当你开始使用移动应用程序，而又不确定该做什么的时候，Expo 真的很棒。第一眼看到 pure React Native 时，你会觉得势不可挡，需要安装和学习所有工具。Expo 提供了一种快速的应用构建体验，没有那些令人生畏的障碍。

[](/react-native-with-expo-is-a-joyride-671d706b7a19) [## 用 Expo 构建本地应用的乐趣

### 为需要 XCode 和 Android Studio 在 React 原生应用上工作而烦恼？希望只需一个按钮就能分享你的…

levelup.gitconnected.com](/react-native-with-expo-is-a-joyride-671d706b7a19) 

不过，不要误解我。很长一段时间以来，我都坚信世博会能帮助我顺利抵达终点。我仍然相信，对许多人来说，它可以做得很好。

然而，我发现 Expo API 目前缺少后台地理定位特性(而且可能会有一段时间)。因为这对我们的应用程序至关重要，所以我有点害怕，开始考虑该怎么办。

[](/compile-react-native-with-expokit-easily-46e9e94abb97) [## 使用微软应用中心编译 React 原生应用

### 让我向您展示如何使用微软应用中心轻松构建 React 原生应用。你基本上可以忘记…

levelup.gitconnected.com](/compile-react-native-with-expokit-easily-46e9e94abb97) 

# 一场失败的战斗并不意味着战争的结束

正如您在上面引用的文章末尾所看到的，向 ExpoKit 分离的应用程序添加自定义本机代码并不容易。我们最终成功地添加了一个定制的后台地理定位模块，但这还远远没有结束。

然后又意识到:通过分离，我们失去了世博会推送通知。老实说，我不确定为什么对分离的应用程序支持这个会是一个问题。最后，它是关于从服务器获得一个令牌，手机使用这个令牌来识别通知发送到哪里。

然而，这是一场我们输掉的战斗。试图将 OneSignal 添加到 iOS 或 Android 中，结果却出现了一系列我们无法克服的错误。我们可能已经尝试了一些其他的推送通知解决方案，但是在这一点上，我们确信 ExpoKit 是这里的罪魁祸首。

> **放弃世博会，你将失去:**
> 
> *拥有隧道挖掘能力的 XDE 世博会。
> *一键轻松发布 JavaScript。
> * Expo 服务器上本地应用的独立版本。
> * Expo SDK 免费提供的资产处理、常量和其他 API。

这取决于你来考虑是否值得为了获得对你的应用程序的更多控制而失去这些。有一个无关紧要的好处:你的应用会更小(以字节为单位),因为你不会包含整个 SDK，你只是使用了其中的一部分。

# 从头开始(*不完全是*)

我已经决定最终安装 Android Studio(很长一段时间以来我一直试图避免使用它)以及 React 原生文档中提到的其他依赖项。

与 Expo 相比，创建一个新的应用程序并在手机上运行是一种非常好的体验。你看，我一直有点担心，对于纯 React 原生开发，我会一直需要 Android Studio，运行编译将需要几分钟时间和大量的咖啡。结果是完全不同的:

编译完应用程序(调试版本)后，你可以关闭并完全忘记 Android Studio。该应用程序安装在你的手机上，JavaScript 代码由 Expo 使用的同一个打包程序提供。

我必须说，Expo 帮助我理解了整个 React Native 方法的所有这些内部工作，JavaScript 是在它旁边运行的，而不是在它里面。最后，一旦您在 Expo 中设置了所需的原生模块，开发流程与 Expo 并没有太大的不同。

尽管如此，在几个小时内，我设法添加了所有必要的原生模块，比包含 ExpoKit 时遇到的障碍更少。一切都在按预期运行。

一个信号让我大吃一惊。我不需要添加任何 JS 代码，在手机上启动一个应用程序后，我就可以立即从他们的仪表板上发送消息。很管用。

iOS 的设置仍然让我们很不爽。这很有趣，考虑到苹果产品有多贵，然而这对开发者来说是一种噩梦般的经历。我猜它真的只是为了外观，而不是功能。

好的一面是，我们不需要扔掉应用程序的 JavaScript 部分。我们只需要用我们的定制模块替换 Expo 模块，应用程序的其余部分就可以正常工作了。

# 结论

Expo dev 团队在那里做了很多好东西，他们都是免费的，所以我肯定要感谢他们为这个世界提供了一个更顺畅的入口。如果他们设法解决了自定义本机代码的问题，它可能会再次成为我的首选平台。

我们仍然需要探索 CodePush 或类似的应用程序分发方法，但在这一点上，我们对解决方案感到满意。我们有自己的本地应用，包括后台地理定位、推送通知(通过 OneSignal)以及 Expo 免费提供的其他东西。