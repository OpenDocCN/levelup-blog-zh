<html>
<head>
<title>Using MQTT to Push Messages Across Devices</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用MQTT跨设备推送消息</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/using-mqtt-to-push-messages-across-devices-1465855b36e5?source=collection_archive---------2-----------------------#2022-03-19">https://levelup.gitconnected.com/using-mqtt-to-push-messages-across-devices-1465855b36e5?source=collection_archive---------2-----------------------#2022-03-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="c983" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">了解如何在Python应用程序中使用MQTT</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/13b8f5063f4b74f4b7f4779b410f4d89.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*WUqHIv-8ABL0xxe4"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@patwhelen?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Pat Whelen </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="7dec" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你熟悉物联网(<strong class="lb iu"> IoT </strong>)，你很可能听说过这个术语叫做<strong class="lb iu"> MQTT </strong>。MQTT(代表<strong class="lb iu">消息排队遥测传输</strong>)是一个轻量级的发布-订阅网络协议，在设备之间传输消息。它通常用于在低带宽环境中的设备之间传输消息。一个很好的案例研究如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lv"><img src="../Images/bf00045373845fdb909d96413aceb5bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lU5LyerpAfCs9Wzd0OjZfA.png"/></div></div></figure><p id="8745" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在物联网环境中，温度传感器或运动检测器等传感器会连续记录读数(如每秒记录温度的温度传感器)或在被触发时记录读数(如运动传感器仅在检测到运动时返回信号)。所有这些数据通常会被传送到设备上进行记录和分析。由于所有这些传感器以不同的速率生成数据，MQTT非常适合作为将实时信息从一个设备传递到另一个设备的协议。想要将数据转发到另一个设备的传感器可以<em class="lw">将数据发布</em>到<strong class="lb iu"> MQTT代理</strong>，这是一个使MQTT客户机能够通信的中介实体。想要从传感器接收数据的设备可以<em class="lw">订阅</em>它。</p><p id="e22c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">有这么多的发布者和订阅者，订阅者如何知道选择哪个消息呢？原来MQTT用一个非常简单的概念解决了这个问题，这个概念叫做<em class="lw"> topic </em>。</p><p id="e452" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一个<strong class="lb iu">主题</strong>是一个UTF-8字符串，看起来像你的文件路径。例如，如果您想要发送您房间的温度读数，您可以使用以下主题— <code class="fe lx ly lz ma b">room</code>。但是，如果您有多个房间，您可以使用不同的主题— <code class="fe lx ly lz ma b">house/room1</code>、<code class="fe lx ly lz ma b">house/room2</code>、<code class="fe lx ly lz ma b">house/room3</code>等。请注意，您使用了<code class="fe lx ly lz ma b">/</code>字符来将主题进一步分解。您可以使用任意多个<code class="fe lx ly lz ma b">/</code>，例如<code class="fe lx ly lz ma b">house/room1/toilet</code>、<code class="fe lx ly lz ma b">house/level1/room1/toilet</code>等。</p><p id="3605" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要接收来自某个主题的消息，您只需订阅您想要的主题，例如<code class="fe lx ly lz ma b">house/room1</code>。如果您想订阅所有以<code class="fe lx ly lz ma b">house</code>开头的主题，您可以使用<code class="fe lx ly lz ma b">#</code>和<code class="fe lx ly lz ma b">+</code>通配符:</p><ul class=""><li id="a9a0" class="mb mc it lb b lc ld lf lg li md lm me lq mf lu mg mh mi mj bi translated">如果您想要所有以house开头的主题，请使用<strong class="lb iu">多级通配符</strong> <code class="fe lx ly lz ma b">#</code>，例如<code class="fe lx ly lz ma b">house/#</code>。这种情况下会匹配<code class="fe lx ly lz ma b"><strong class="lb iu">house</strong></code>、<code class="fe lx ly lz ma b"><strong class="lb iu">house</strong>/room1</code>、<code class="fe lx ly lz ma b"><strong class="lb iu">house</strong>/room2</code>、<code class="fe lx ly lz ma b"><strong class="lb iu">house</strong>/room3</code>、<code class="fe lx ly lz ma b"><strong class="lb iu">house</strong>/room1/toilet</code>、<code class="fe lx ly lz ma b"><strong class="lb iu">house</strong>/level1/room1/toilet</code>等主题。</li><li id="e391" class="mb mc it lb b lc mk lf ml li mm lm mn lq mo lu mg mh mi mj bi translated">如果您想要匹配具有不同级别通配符的主题，请使用单级通配符<code class="fe lx ly lz ma b">+</code>。这可以通过一个例子更容易地解释。假设你有以下主题— <code class="fe lx ly lz ma b">house/+/toilet</code>，那么它会匹配以下主题:<code class="fe lx ly lz ma b"><strong class="lb iu">house</strong>/room1/<strong class="lb iu">toilet</strong></code>、<code class="fe lx ly lz ma b"><strong class="lb iu">house</strong>/room2/<strong class="lb iu">toilet</strong></code>、<code class="fe lx ly lz ma b"><strong class="lb iu">house</strong>/kitchen/<strong class="lb iu">toilet</strong></code>。它将<em class="lw">不</em>匹配以下主题— <code class="fe lx ly lz ma b">house/room1/toilet1 </code>和<code class="fe lx ly lz ma b">house/basement/room1/toilet</code>。</li></ul><h1 id="06b3" class="mp mq it bd mr ms mt mu mv mw mx my mz jz na ka nb kc nc kd nd kf ne kg nf ng bi translated">使用MQTT代理</h1><p id="2703" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">要使用MQTT，您需要一个MQTT代理。出于开发和测试目的，使用公共MQTT代理通常更容易。您可以在:<a class="ae ky" href="https://github.com/mqtt/mqtt.org/wiki/public_brokers" rel="noopener ugc nofollow" target="_blank">https://github.com/mqtt/mqtt.org/wiki/public_brokers</a>找到MQTT公共经纪人的列表。</p><blockquote class="nm nn no"><p id="34ab" class="kz la lw lb b lc ld ju le lf lg jx lh np lj lk ll nq ln lo lp nr lr ls lt lu im bi translated">请注意，公共MQTT代理，顾名思义，是公共的。您发送的所有数据对每个人和任何人都是可见的。因此，请确保不要传输任何敏感数据(除非您对它们进行了加密)。此外，它们没有任何服务保证，因此您不应该在生产环境中使用它们。</p></blockquote><h2 id="0a40" class="ns mq it bd mr nt nu dn mv nv nw dp mz li nx ny nb lm nz oa nd lq ob oc nf od bi translated">出版者</h2><p id="3eab" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">如果您是Python开发人员，使用MQTT非常简单。对于本文，我将使用<strong class="lb iu"> paho-mqtt </strong>模块，它实现了mqtt协议的5.0、3.1.1和3.1版本:</p><pre class="kj kk kl km gt oe ma of og aw oh bi"><span id="372a" class="ns mq it ma b gy oi oj l ok ol">$ <strong class="ma iu">pip install paho-mqtt</strong></span></pre><p id="c9c9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">先从出版社说起吧。创建一个名为<strong class="lb iu"> publish.py </strong>的文件，并用以下语句填充它:</p><pre class="kj kk kl km gt oe ma of og aw oh bi"><span id="e85a" class="ns mq it ma b gy oi oj l ok ol">import paho.mqtt.client as mqtt<br/>import numpy as np<br/>import time</span><span id="49be" class="ns mq it ma b gy om oj l ok ol">MQTTBROKER = 'test.mosquitto.org'<br/>PORT = 1883<br/>TOPIC = "home/temp/room1/storeroom"</span><span id="dff4" class="ns mq it ma b gy om oj l ok ol">mqttc = mqtt.Client()<br/>mqttc.connect(MQTTBROKER, PORT)</span><span id="c7ef" class="ns mq it ma b gy om oj l ok ol">while True:<br/>    MESSAGE = str(np.random.uniform(20,30))<br/>    mqttc.publish(TOPIC, MESSAGE)<br/>    print("Published to " + MQTTBROKER + ': ' + TOPIC + ':' + <br/>        MESSAGE)<br/>    time.sleep(3)</span></pre><p id="229d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里，我使用Mosquitto公共MQTT代理— <code class="fe lx ly lz ma b">test.mosquitto.org</code>。我每3秒发布一个20到30之间的随机值。</p><h2 id="9a6a" class="ns mq it bd mr nt nu dn mv nv nw dp mz li nx ny nb lm nz oa nd lq ob oc nf od bi translated">订户</h2><p id="8dbe" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">接下来，创建一个名为<strong class="lb iu"> subscribe.py </strong>的文件，并用以下语句填充它:</p><pre class="kj kk kl km gt oe ma of og aw oh bi"><span id="af3a" class="ns mq it ma b gy oi oj l ok ol">import paho.mqtt.client as mqtt</span><span id="7b6e" class="ns mq it ma b gy om oj l ok ol">MQTTBROKER = 'test.mosquitto.org'<br/>PORT = 1883</span><span id="c7db" class="ns mq it ma b gy om oj l ok ol">def on_connect(client, userdata, flags, rc):<br/>    print("Connected with result code " + str(rc))<br/>    client.subscribe("home/temp/room1/storeroom")</span><span id="3bd6" class="ns mq it ma b gy om oj l ok ol">def on_disconnect(client, userdata, rc):<br/>    print("Disconnected with result code " + str(rc))</span><span id="3f65" class="ns mq it ma b gy om oj l ok ol">def on_message(client, userdata, msg):<br/>    print(MQTTBROKER + ': &lt;' + msg.topic + "&gt; : " +  <br/>        str(msg.payload.decode()))</span><span id="b8ea" class="ns mq it ma b gy om oj l ok ol">client = mqtt.Client()<br/>client.on_connect = on_connect<br/>client.on_message = on_message<br/>client.on_disconnect = on_disconnect</span><span id="8fb2" class="ns mq it ma b gy om oj l ok ol">client.connect(MQTTBROKER, PORT)<br/>client.loop_forever()</span></pre><p id="3ec9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">上面有三个功能:</p><ul class=""><li id="0ef1" class="mb mc it lb b lc ld lf lg li md lm me lq mf lu mg mh mi mj bi translated"><code class="fe lx ly lz ma b">on_connect()</code> —当客户端连接到MQTT代理时触发。连接后，您可以调用<code class="fe lx ly lz ma b">subscribe()</code>功能来订阅特定的主题。将<code class="fe lx ly lz ma b">subscribe()</code>函数放在这里很有用，因为在客户端断开连接并重新连接的情况下，您可以确保您仍然订阅了主题。</li><li id="6ca1" class="mb mc it lb b lc mk lf ml li mm lm mn lq mo lu mg mh mi mj bi translated"><code class="fe lx ly lz ma b">on_disconnect()</code> —当客户端与MQTT代理断开连接时触发。</li><li id="4ef9" class="mb mc it lb b lc mk lf ml li mm lm mn lq mo lu mg mh mi mj bi translated"><code class="fe lx ly lz ma b">on_message()</code>—从MQTT代理收到消息时触发。</li></ul><p id="21be" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe lx ly lz ma b">loop_forever()</code>函数是一个阻塞调用，让MQTT客户机继续接收传入的消息。</p><blockquote class="nm nn no"><p id="ce11" class="kz la lw lb b lc ld ju le lf lg jx lh np lj lk ll nq ln lo lp nr lr ls lt lu im bi translated">如果想要非阻塞调用，可以使用<code class="fe lx ly lz ma b">loop_start()</code>。但是，您必须确保您的程序不会退出。一旦您的程序退出，您将无法再接收传入的消息。</p></blockquote><h2 id="9c7a" class="ns mq it bd mr nt nu dn mv nv nw dp mz li nx ny nb lm nz oa nd lq ob oc nf od bi translated">测试发布者和订阅者</h2><p id="ec9d" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">既然发布者和订阅者已经完成了，是时候测试它们了。在两个单独的终端中键入以下命令:</p><p id="0f05" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">端子1 </strong></p><pre class="kj kk kl km gt oe ma of og aw oh bi"><span id="3155" class="ns mq it ma b gy oi oj l ok ol">$ <strong class="ma iu">python publish.py</strong></span><span id="aef4" class="ns mq it ma b gy om oj l ok ol">Published to test.mosquitto.org: home/temp/room1/storeroom:24.17208558860645</span><span id="0c7b" class="ns mq it ma b gy om oj l ok ol">Published to test.mosquitto.org: home/temp/room1/storeroom:24.14987649016441</span><span id="d9f0" class="ns mq it ma b gy om oj l ok ol">Published to test.mosquitto.org: home/temp/room1/storeroom:25.5039528899733</span><span id="80d9" class="ns mq it ma b gy om oj l ok ol">Published to test.mosquitto.org: home/temp/room1/storeroom:25.177278745815368</span><span id="2d28" class="ns mq it ma b gy om oj l ok ol">Published to test.mosquitto.org: home/temp/room1/storeroom:24.355705976717694</span></pre><p id="c42f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">端子2 </strong></p><pre class="kj kk kl km gt oe ma of og aw oh bi"><span id="1521" class="ns mq it ma b gy oi oj l ok ol">$ <strong class="ma iu">python subscribe.py<br/></strong>Connected with result code 0<br/>test.mosquitto.org: &lt;home/temp/room1/storeroom&gt; : 24.17208558860645<br/>test.mosquitto.org: &lt;home/temp/room1/storeroom&gt; : 24.14987649016441<br/>test.mosquitto.org: &lt;home/temp/room1/storeroom&gt; : 25.5039528899733<br/>test.mosquitto.org: &lt;home/temp/room1/storeroom&gt; : 25.177278745815368<br/>test.mosquitto.org: &lt;home/temp/room1/storeroom&gt; : 24.355705976717694</span></pre><p id="c7da" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当发布者向MQTT代理发送数据时，订阅者将接收数据。</p><p id="d91e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您还可以在您的subsciber中尝试一些我前面提到的通配符:</p><pre class="kj kk kl km gt oe ma of og aw oh bi"><span id="28a4" class="ns mq it ma b gy oi oj l ok ol">    client.subscribe("<strong class="ma iu">home/temp/+</strong>")   # single-level<br/>    client.subscribe("<strong class="ma iu">home/temp/#</strong>")   # multi-levels</span></pre><p id="3b35" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">除了您可以自己定义的主题之外，MQTT还支持一些不能用于发布的保留主题<em class="lw">。以<code class="fe lx ly lz ma b">$</code>开头的主题对MQTT代理有特殊的意义(通常用于生成服务器统计数据)。您可以订阅以下一些专题:</em></p><pre class="kj kk kl km gt oe ma of og aw oh bi"><span id="d8e1" class="ns mq it ma b gy oi oj l ok ol">client.subscribe(“<strong class="ma iu">$SYS/broker/clients/connected</strong>”)<br/>client.subscribe(“<strong class="ma iu">$SYS/broker/clients/disconnected</strong>”)<br/>client.subscribe(“<strong class="ma iu">$SYS/broker/clients/total</strong>”)<br/>client.subscribe(“<strong class="ma iu">$SYS/broker/messages/sent</strong>”)<br/>client.subscribe(“<strong class="ma iu">$SYS/broker/uptime</strong>”)</span></pre><blockquote class="nm nn no"><p id="9a56" class="kz la lw lb b lc ld ju le lf lg jx lh np lj lk ll nq ln lo lp nr lr ls lt lu im bi translated">这些主题没有标准化，它们特定于每个MQTT代理的实现。</p></blockquote><p id="e583" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是针对上述主题收到的一些示例消息:</p><pre class="kj kk kl km gt oe ma of og aw oh bi"><span id="ff2f" class="ns mq it ma b gy oi oj l ok ol">test.mosquitto.org: &lt;$SYS/broker/clients/connected&gt; : 3596<br/>test.mosquitto.org: &lt;$SYS/broker/clients/disconnected&gt; : 973<br/>test.mosquitto.org: &lt;$SYS/broker/clients/total&gt; : 4569<br/>test.mosquitto.org: &lt;$SYS/broker/messages/sent&gt; : 116282349<br/>test.mosquitto.org: &lt;$SYS/broker/uptime&gt; : 38690 seconds<br/>test.mosquitto.org: &lt;$SYS/broker/clients/total&gt; : 4573</span></pre><h1 id="f2cc" class="mp mq it bd mr ms mt mu mv mw mx my mz jz na ka nb kc nc kd nd kf ne kg nf ng bi translated">安装您自己的MQTT代理</h1><p id="ed2e" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">有些时候(比如出于安全原因或出于私有部署的原因)，您希望设置自己的MQTT代理。在这里，我将向您展示如何安装Eclipse mosquito broker。我将使用macOS。</p><blockquote class="nm nn no"><p id="4769" class="kz la lw lb b lc ld ju le lf lg jx lh np lj lk ll nq ln lo lp nr lr ls lt lu im bi translated"><strong class="lb iu">Eclipse mosquito</strong>是一个开源的(EPL/EDL许可的)消息代理，它实现了MQTT协议版本5.0、3.1.1和3.1。</p></blockquote><p id="3e3f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">首先，确保你已经安装了<strong class="lb iu"> brew </strong>。如果没有，请在终端中使用以下命令安装brew:</p><pre class="kj kk kl km gt oe ma of og aw oh bi"><span id="adec" class="ns mq it ma b gy oi oj l ok ol">$ <strong class="ma iu">/usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew /install/master/install)"</strong></span></pre><p id="a6f7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，安装<strong class="lb iu">mosquito</strong>:</p><pre class="kj kk kl km gt oe ma of og aw oh bi"><span id="fbdb" class="ns mq it ma b gy oi oj l ok ol">$ <strong class="ma iu">brew install mosquitto</strong></span></pre><blockquote class="nm nn no"><p id="93d5" class="kz la lw lb b lc ld ju le lf lg jx lh np lj lk ll nq ln lo lp nr lr ls lt lu im bi translated">对于Windows用户，请参考<a class="ae ky" href="https://mosquitto.org/download/" rel="noopener ugc nofollow" target="_blank">https://mosquitto.org/download/</a>获取Mosquitto的安装文件。</p></blockquote><p id="764d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在安装结束时，您将看到以下输出(注意我用粗体显示的最后一行——这是启动Mosquitto代理的命令):</p><pre class="kj kk kl km gt oe ma of og aw oh bi"><span id="2ab7" class="ns mq it ma b gy oi oj l ok ol">...<br/>==&gt; <strong class="ma iu">mosquitto</strong></span><span id="468e" class="ns mq it ma b gy om oj l ok ol">mosquitto has been installed with a default configuration file.</span><span id="8874" class="ns mq it ma b gy om oj l ok ol">You can make changes to the configuration by editing:</span><span id="2328" class="ns mq it ma b gy om oj l ok ol">/opt/homebrew/etc/mosquitto/mosquitto.conf</span><span id="9024" class="ns mq it ma b gy om oj l ok ol">To restart mosquitto after an upgrade:</span><span id="cf2d" class="ns mq it ma b gy om oj l ok ol">brew services restart mosquitto</span><span id="bec0" class="ns mq it ma b gy om oj l ok ol">Or, if you don't want/need a background service you can just run:</span><span id="9d89" class="ns mq it ma b gy om oj l ok ol"><strong class="ma iu">/opt/homebrew/opt/mosquitto/sbin/mosquitto -c /opt/homebrew/etc/mosquitto/mosquitto.conf</strong></span></pre><p id="2f97" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要启动Mosquitto代理，请在终端中键入以下命令:</p><pre class="kj kk kl km gt oe ma of og aw oh bi"><span id="b926" class="ns mq it ma b gy oi oj l ok ol">$ <strong class="ma iu">/opt/homebrew/opt/mosquitto/sbin/mosquitto -c /opt/homebrew/etc/mosquitto/mosquitto.conf</strong></span></pre><blockquote class="nm nn no"><p id="0a4c" class="kz la lw lb b lc ld ju le lf lg jx lh np lj lk ll nq ln lo lp nr lr ls lt lu im bi translated">请注意，您还可以为Mosquitto代理配置身份验证。我将把它留给你去探索。</p></blockquote><p id="2bb6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要使用自己的MQTT代理，只需将<strong class="lb iu"> subscribe.py </strong>和<strong class="lb iu"> publish.py </strong>中的<code class="fe lx ly lz ma b">MQTTBROKER</code>变量改为<code class="fe lx ly lz ma b">localhost</code>(或者托管代理的计算机的IP地址):</p><pre class="kj kk kl km gt oe ma of og aw oh bi"><span id="a012" class="ns mq it ma b gy oi oj l ok ol">MQTTBROKER = '<strong class="ma iu">localhost</strong>'</span></pre><h1 id="0fa6" class="mp mq it bd mr ms mt mu mv mw mx my mz jz na ka nb kc nc kd nd kf ne kg nf ng bi translated">摘要</h1><p id="3897" class="pw-post-body-paragraph kz la it lb b lc nh ju le lf ni jx lh li nj lk ll lm nk lo lp lq nl ls lt lu im bi translated">我希望这篇文章能让您轻松理解什么是MQTT，以及它如何让您在不编写自己的服务器的情况下将数据从一个设备推送到另一个设备变得非常简单。玩得开心！</p><div class="on oo gp gr op oq"><a href="https://weimenglee.medium.com/membership" rel="noopener follow" target="_blank"><div class="or ab fo"><div class="os ab ot cl cj ou"><h2 class="bd iu gy z fp ov fr fs ow fu fw is bi translated">加入媒介与我的介绍链接-李伟孟</h2><div class="ox l"><h3 class="bd b gy z fp ov fr fs ow fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="oy l"><p class="bd b dl z fp ov fr fs ow fu fw dk translated">weimenglee.medium.com</p></div></div><div class="oz l"><div class="pa l pb pc pd oz pe ks oq"/></div></div></a></div></div></div>    
</body>
</html>