<html>
<head>
<title>Elasticsearch Rest API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Elasticsearch Rest API</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/elasticsearch-rest-api-bf9d754020a8?source=collection_archive---------5-----------------------#2019-06-24">https://levelup.gitconnected.com/elasticsearch-rest-api-bf9d754020a8?source=collection_archive---------5-----------------------#2019-06-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/ac69b75b8e19acb7e797ef51ffc1ddf6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FJkV-4gLP-RHMkaAlKWjxQ.png"/></div></div></figure><p id="5362" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Elasticsearch提供了广泛的REST APIs来集成、查询和管理数据。在这篇博客中，我将从大量的REST APIs中讨论一些我们可以经常使用的主要API。</p><p id="6602" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们可以使用Elasticsearch REST APIs做很多事情，比如:</p><ul class=""><li id="b2e5" class="kw kx iq ka b kb kc kf kg kj ky kn kz kr la kv lb lc ld le bi translated">检查我们的集群、节点和索引的健康、状态和统计数据等。</li><li id="4e7b" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">管理我们的集群、节点、索引数据和元数据。</li><li id="e377" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">对我们的索引执行CRUD(创建、读取、更新和删除)和搜索操作。</li><li id="147d" class="kw kx iq ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">执行高级搜索操作，如分页、排序、过滤、脚本编写、聚合等。</li></ul><p id="d383" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在我将在这里解释其中的一些:</p><p id="eb35" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">_卡特彼勒API </strong></p><p id="818a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们可以通过使用以下API来获得集群的健康状况:</p><pre class="lk ll lm ln gt lo lp lq lr aw ls bi"><span id="3603" class="lt lu iq lp b gy lv lw l lx ly">GET  /_cat/health?v</span></pre><p id="7aba" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果我们想获得Elasticsearch集群中的节点详细信息:</p><pre class="lk ll lm ln gt lo lp lq lr aw ls bi"><span id="a8e9" class="lt lu iq lp b gy lv lw l lx ly">GET /_cat/nodes?v</span></pre><p id="2de9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果我们想列出Elasticsearch集群中的指数:</p><pre class="lk ll lm ln gt lo lp lq lr aw ls bi"><span id="0f4b" class="lt lu iq lp b gy lv lw l lx ly">GET /_cat/indices?v</span></pre><p id="ad47" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">创建索引:</strong></p><p id="7a8a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果我们想创建一个索引。例如，创建一个名为博客的索引</p><pre class="lk ll lm ln gt lo lp lq lr aw ls bi"><span id="2539" class="lt lu iq lp b gy lv lw l lx ly">PUT /blogs?pretty</span></pre><p id="1dfe" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在上面的表达式中，我们提供了pretty，它以pretty格式显示输出。</p><p id="32cf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">删除指标</strong> : <br/>删除指标:</p><pre class="lk ll lm ln gt lo lp lq lr aw ls bi"><span id="e02f" class="lt lu iq lp b gy lv lw l lx ly">DELETE /customer?pretty</span></pre><p id="6982" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">创建文档</strong> : <br/>现在我们已经创建了索引，让我们在索引中创建一个文档。</p><pre class="lk ll lm ln gt lo lp lq lr aw ls bi"><span id="2dcf" class="lt lu iq lp b gy lv lw l lx ly">PUT /blogs/technical/1?pretty<br/>{<br/>  "topic": "introduction to Elasticsearch"<br/>}</span></pre><p id="0196" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">替换文件</strong>:</p><p id="8d47" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们可以替换文档中的数据:</p><pre class="lk ll lm ln gt lo lp lq lr aw ls bi"><span id="2ebe" class="lt lu iq lp b gy lv lw l lx ly">PUT /blogs/technical/1?pretty<br/>{<br/>  "topic": "Elasticsearch Installation"<br/>}</span></pre><p id="3b7c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在上面的表达式中，我用不同的主题名替换了相同的文档id。</p><p id="c87e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">更新文件</strong>:</p><p id="9d58" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">要更新文档，我们需要运行以下表达式:</p><pre class="lk ll lm ln gt lo lp lq lr aw ls bi"><span id="f878" class="lt lu iq lp b gy lv lw l lx ly">POST /blogs/technical/1/_update?pretty<br/>{<br/>  "doc": { "topic": "introduction to Elasticsearch", "category": "ELK" }<br/>}</span></pre><p id="3335" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在上面的表达式中，我用不同的主题名和附加的类别键及其值更新了相同的文档id。</p><p id="14d8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">删除文档</strong> : <br/>我们可以从索引中删除文档:</p><pre class="lk ll lm ln gt lo lp lq lr aw ls bi"><span id="c5d9" class="lt lu iq lp b gy lv lw l lx ly">DELETE /blogs/technical/1?pretty</span></pre><p id="5021" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在上面的表达式中，我删除了id = 1的文档</p><p id="2c6c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">加载数据</strong> : <br/>我们也可以从外部文件加载数据。例如，如果我们有一个JSON数据文件，我们可以直接将其推入Elasticsearch:</p><pre class="lk ll lm ln gt lo lp lq lr aw ls bi"><span id="9ca3" class="lt lu iq lp b gy lv lw l lx ly">curl -H "Content-Type: application/json" -XPOST 'localhost:9200/bank/account/_bulk?pretty&amp;refresh' --data-binary "@blogs.json"</span></pre><p id="2616" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在上面的表达式中，我将blogs.json文件中的数据直接索引到Elasticsearch中。</p><p id="fb5d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在这篇博客中，我介绍了Elasticsearch的一些基本REST APIs，用于创建索引、删除索引、创建文档、替换和更新文档、删除文档以及从外部文件加载数据。在我的下一篇博客中，我将解释Elasticsearch的搜索API，以及我们如何应用不同类型的搜索。</p><p id="bd22" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你可以在推特上关注我:<a class="ae lz" href="https://twitter.com/anubioinfo" rel="noopener ugc nofollow" target="_blank">https://twitter.com/anubioinfo</a></p><p id="cc99" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">关于Elastic stack的其他博客:</strong><a class="ae lz" href="https://bqstack.com/b/detail/31/Introduction-to-Elasticsearch" rel="noopener ugc nofollow" target="_blank"><br/>Elastic Search简介</a> <br/> <a class="ae lz" href="http://bqstack.com/b/detail/52/Elasticsearch-Installation-and-Configuration-on-Ubuntu-14.04" rel="noopener ugc nofollow" target="_blank"> Elasticsearch在Ubuntu 14.04上的安装和配置</a> <br/> <a class="ae lz" href="http://bqstack.com/b/detail/1/Log-analysis-with-Elastic-stack" rel="noopener ugc nofollow" target="_blank">使用Elastic Stack的日志分析<br/></a><a class="ae lz" href="https://bqstack.com/b/detail/83/Elasticsearch-Rest-API" rel="noopener ugc nofollow" target="_blank">Elastic Search Rest API</a><br/><a class="ae lz" href="https://bqstack.com/b/detail/84/Basics-of-Data-Search-in-Elasticsearch" rel="noopener ugc nofollow" target="_blank">Elastic Search中数据搜索的基础知识</a><br/><a class="ae lz" href="https://bqstack.com/b/detail/83/Elasticsearch-Rest-API" rel="noopener ugc nofollow" target="_blank">Elastic Search Rest API</a><br/><a class="ae lz" href="https://bqstack.com/b/detail/87/Wildcard-and-Boolean-Search-in-Elasticsearch" rel="noopener ugc nofollow" target="_blank">Elastic Search</a>通配符和布尔搜索</p><p id="426c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="ma">如果你觉得这篇文章很有意思，那么你可以探索“</em> <a class="ae lz" href="https://www.amazon.com/Mastering-Kibana-6-x-Visualize-histograms/dp/1788831039/ref=olp_product_details?_encoding=UTF8&amp;me=" rel="noopener ugc nofollow" target="_blank"> <em class="ma">【掌握基巴纳6.0】</em></a><em class="ma">”、“</em> <a class="ae lz" href="https://www.amazon.com/Kibana-Quick-Start-Guide-Elasticsearch/dp/1789804035" rel="noopener ugc nofollow" target="_blank"> <em class="ma">基巴纳7快速入门指南</em> </a> <em class="ma">”、“</em> <a class="ae lz" href="https://www.amazon.com/Learning-Kibana-dashboards-visualization-capabilities-ebook/dp/B07V4SQR6T" rel="noopener ugc nofollow" target="_blank"> <em class="ma">学习基巴纳7 </em> </a> <em class="ma">”、“</em> <a class="ae lz" href="https://www.amazon.com/gp/product/1789803322?pf_rd_p=2d1ab404-3b11-4c97-b3db-48081e145e35" rel="noopener ugc nofollow" target="_blank"> <em class="ma"> Elasticsearch 7快速入门指南</em> </a> <em class="ma">”等书籍，了解更多</em></p><p id="627f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="ma">原载于</em><a class="ae lz" href="https://bqstack.com/b/detail/84/Basics-of-Data-Search-in-Elasticsearch" rel="noopener ugc nofollow" target="_blank"><em class="ma">https://bqstack.com</em></a><em class="ma">。</em></p></div></div>    
</body>
</html>