<html>
<head>
<title>How to Implement Azure Functions in any Language with Custom Handlers</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用自定义处理程序在任何语言中实现Azure函数</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-implement-azure-functions-in-any-language-with-custom-handlers-78e627264ccb?source=collection_archive---------14-----------------------#2021-07-05">https://levelup.gitconnected.com/how-to-implement-azure-functions-in-any-language-with-custom-handlers-78e627264ccb?source=collection_archive---------14-----------------------#2021-07-05</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="ab67" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">蔚蓝的</h2><div class=""/><div class=""><h2 id="4c33" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">使用Go语言演示自定义处理程序。</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/0416121334e11053cabfbf8c1e98b604.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y2G1pj1YjtOnvZBiovRbAw.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">使用Go语言的Azure函数</figcaption></figure><h1 id="d237" class="lh li it bd lj lk ll lm ln lo lp lq lr ki ls kj lt kl lu km lv ko lw kp lx ly bi translated">介绍</h1><p id="4d10" class="pw-post-body-paragraph lz ma it mb b mc md kd me mf mg kg mh mi mj mk ml mm mn mo mp mq mr ms mt mu im bi translated">每个Azure函数都有自己的处理程序。Azure Functions支持许多不同语言的处理程序实现，但它们可能不会提供您最喜欢的语言的原生实现。这就是自定义处理程序的用武之地。</p><p id="9bea" class="pw-post-body-paragraph lz ma it mb b mc mv kd me mf mw kg mh mi mx mk ml mm my mo mp mq mz ms mt mu im bi translated">您选择的语言必须支持HTTP通信，因为自定义处理程序是一个web服务器，它接收来自函数Host的事件，这些函数被修改成带有JSON有效负载的HTTP请求。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi na"><img src="../Images/dae399b058edb38df2f00f62a531cc9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tOsIgKyXrLG24pLkNdk3ww.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">通信图</figcaption></figure><p id="436e" class="pw-post-body-paragraph lz ma it mb b mc mv kd me mf mw kg mh mi mx mk ml mm my mo mp mq mz ms mt mu im bi translated"><strong class="mb jd"> Functions Host </strong>是一堆JSON配置文件，在这里你将定义你想要使用的触发器和绑定，当然还有可执行文件的路径，这是我们的<strong class="mb jd">定制处理程序</strong> (Web服务器)。</p><p id="5140" class="pw-post-body-paragraph lz ma it mb b mc mv kd me mf mw kg mh mi mx mk ml mm my mo mp mq mz ms mt mu im bi translated">一旦<strong class="mb jd">触发器</strong>被事件激活，功能主机向网络服务器发送请求有效载荷。有效负载可以保存触发器和输入绑定数据。</p><p id="df75" class="pw-post-body-paragraph lz ma it mb b mc mv kd me mf mw kg mh mi mx mk ml mm my mo mp mq mz ms mt mu im bi translated"><strong class="mb jd"> Web服务器</strong>调用该函数，并可能返回一个响应有效载荷。响应负载可用于输出绑定。</p></div><div class="ab cl nb nc hx nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="im in io ip iq"><h1 id="06a9" class="lh li it bd lj lk ni lm ln lo nj lq lr ki nk kj lt kl nl km lv ko nm kp lx ly bi translated">演示</h1><p id="c595" class="pw-post-body-paragraph lz ma it mb b mc md kd me mf mg kg mh mi mj mk ml mm mn mo mp mq mr ms mt mu im bi translated">源代码可以在我的<a class="ae nn" href="https://github.com/DannyRusnok/CustomHandlerFunctionsApp" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上找到。</p><h2 id="e433" class="no li it bd lj np nq dn ln nr ns dp lr mi nt nu lt mm nv nw lv mq nx ny lx iz bi translated">你需要的东西</h2><ul class=""><li id="e115" class="nz oa it mb b mc md mf mg mi ob mm oc mq od mu oe of og oh bi translated"><a class="ae nn" href="https://code.visualstudio.com/" rel="noopener ugc nofollow" target="_blank"> Visual Studio代码</a>和<a class="ae nn" href="https://marketplace.visualstudio.com/items?itemName=ms-azuretools.vscode-azurefunctions" rel="noopener ugc nofollow" target="_blank"> Azure函数扩展</a>。</li><li id="8619" class="nz oa it mb b mc oi mf oj mi ok mm ol mq om mu oe of og oh bi translated"><a class="ae nn" href="https://docs.microsoft.com/en-us/azure/azure-functions/functions-run-local#v2" rel="noopener ugc nofollow" target="_blank"> Azure功能核心工具</a>。</li><li id="4140" class="nz oa it mb b mc oi mf oj mi ok mm ol mq om mu oe of og oh bi translated"><a class="ae nn" href="https://golang.org/doc/install" rel="noopener ugc nofollow" target="_blank">去</a>。</li></ul><h2 id="c355" class="no li it bd lj np nq dn ln nr ns dp lr mi nt nu lt mm nv nw lv mq nx ny lx iz bi translated">创建项目</h2><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi on"><img src="../Images/54df0df4701fadf7c4a674c160003941.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/0*zYspR1fYa1yfV-U4.png"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">“创建新项目”按钮的位置</figcaption></figure><ol class=""><li id="551b" class="nz oa it mb b mc mv mf mw mi oo mm op mq oq mu or of og oh bi translated">单击图像中突出显示的按钮，创建一个新项目。</li><li id="3a5e" class="nz oa it mb b mc oi mf oj mi ok mm ol mq om mu or of og oh bi translated">您将被要求选择基本设置。选择<strong class="mb jd">自定义</strong>语言、<strong class="mb jd"> HTTP触发器</strong>、<strong class="mb jd"> HttpExample </strong>作为函数名、<strong class="mb jd">匿名</strong>授权级别定义函数宿主。</li></ol><h2 id="5646" class="no li it bd lj np nq dn ln nr ns dp lr mi nt nu lt mm nv nw lv mq nx ny lx iz bi translated">创建处理程序</h2><ol class=""><li id="6bf1" class="nz oa it mb b mc md mf mg mi ob mm oc mq od mu or of og oh bi translated">在根文件夹中创建一个文件，并另存为<code class="fe os ot ou ov b">handler.go.</code></li><li id="9933" class="nz oa it mb b mc oi mf oj mi ok mm ol mq om mu or of og oh bi translated">将此代码复制/粘贴到文件中。</li></ol><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="ow ox l"/></div></figure><p id="d6c5" class="pw-post-body-paragraph lz ma it mb b mc mv kd me mf mw kg mh mi mx mk ml mm my mo mp mq mz ms mt mu im bi translated">函数<code class="fe os ot ou ov b">helloHandler</code>打印一条简单的消息作为HTTP响应。消息的形式取决于HTTP请求中<code class="fe os ot ou ov b">name</code>参数的值。</p><p id="a991" class="pw-post-body-paragraph lz ma it mb b mc mv kd me mf mw kg mh mi mx mk ml mm my mo mp mq mz ms mt mu im bi translated">如果设置了值<code class="fe os ot ou ov b">name</code>，响应将是:</p><pre class="ks kt ku kv gt oy ov oz pa aw pb bi"><span id="defa" class="no li it ov b gy pc pd l pe pf">Hello, {name}. This HTTP triggered function executed successfully.</span></pre><p id="d108" class="pw-post-body-paragraph lz ma it mb b mc mv kd me mf mw kg mh mi mx mk ml mm my mo mp mq mz ms mt mu im bi translated">如果值<code class="fe os ot ou ov b">name</code>是<strong class="mb jd">而不是</strong>设置的，响应将如下所示:</p><pre class="ks kt ku kv gt oy ov oz pa aw pb bi"><span id="a115" class="no li it ov b gy pc pd l pe pf">This HTTP triggered function executed successfully. Pass a name in the query string for a personalized response.</span></pre><p id="7154" class="pw-post-body-paragraph lz ma it mb b mc mv kd me mf mw kg mh mi mx mk ml mm my mo mp mq mz ms mt mu im bi translated">3.打开命令行或PowerShell，使用以下命令将自定义处理程序编译成名为<code class="fe os ot ou ov b">handler.exe</code>的可执行文件(已安装Go):</p><pre class="ks kt ku kv gt oy ov oz pa aw pb bi"><span id="a1fd" class="no li it ov b gy pc pd l pe pf">go build handler.go</span></pre><h2 id="85ff" class="no li it bd lj np nq dn ln nr ns dp lr mi nt nu lt mm nv nw lv mq nx ny lx iz bi translated">修改主机. json</h2><p id="4ee5" class="pw-post-body-paragraph lz ma it mb b mc md kd me mf mg kg mh mi mj mk ml mm mn mo mp mq mr ms mt mu im bi translated">现在你需要为host.json中的<code class="fe os ot ou ov b">customHandler:defaulteExecutablePath</code>属性指定文件路径，如果你在根文件夹中创建了<code class="fe os ot ou ov b">*.exe</code>文件，你可以将值设置为<code class="fe os ot ou ov b">handler</code>。</p><p id="ad4d" class="pw-post-body-paragraph lz ma it mb b mc mv kd me mf mw kg mh mi mx mk ml mm my mo mp mq mz ms mt mu im bi translated">还需要将<code class="fe os ot ou ov b">customHandler:eneableForwardingHttpRequest</code>的值设置为<code class="fe os ot ou ov b">true</code>。</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="ow ox l"/></div></figure><h2 id="1bc1" class="no li it bd lj np nq dn ln nr ns dp lr mi nt nu lt mm nv nw lv mq nx ny lx iz bi translated">运行该功能</h2><ol class=""><li id="f4f7" class="nz oa it mb b mc md mf mg mi ob mm oc mq od mu or of og oh bi translated">再次打开命令行或PowerShell，并在根文件夹中运行此命令(已安装Azure Function Core Tools):</li></ol><pre class="ks kt ku kv gt oy ov oz pa aw pb bi"><span id="a244" class="no li it ov b gy pc pd l pe pf">func start</span></pre><p id="dd7b" class="pw-post-body-paragraph lz ma it mb b mc mv kd me mf mw kg mh mi mx mk ml mm my mo mp mq mz ms mt mu im bi translated">2.导航到以下URL以执行该功能:</p><p id="090a" class="pw-post-body-paragraph lz ma it mb b mc mv kd me mf mw kg mh mi mx mk ml mm my mo mp mq mz ms mt mu im bi translated"><code class="fe os ot ou ov b"><a class="ae nn" href="http://localhost:7071/api/HttpExample?name=medium" rel="noopener ugc nofollow" target="_blank">http://localhost:7071/api/HttpExample?name=medium</a></code></p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi pg"><img src="../Images/d515b49ebbf4cde4987270a0aeef5305.png" data-original-src="https://miro.medium.com/v2/resize:fit:1036/format:webp/1*7XKhI2_BSFk6gU9TsC9X5g.png"/></div></figure><p id="caeb" class="pw-post-body-paragraph lz ma it mb b mc mv kd me mf mw kg mh mi mx mk ml mm my mo mp mq mz ms mt mu im bi translated">如果你得到和我相似的回应，你就成功了。</p><p id="d9d5" class="pw-post-body-paragraph lz ma it mb b mc mv kd me mf mw kg mh mi mx mk ml mm my mo mp mq mz ms mt mu im bi translated">3.您还可以查看控制台，看看您的功能是否被执行。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ph"><img src="../Images/27a11ba19fb4ac92490a9a6fd569294e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UmdFOpi2rIwDZ6aQ6r5LSA.png"/></div></div></figure><h1 id="cf42" class="lh li it bd lj lk ll lm ln lo lp lq lr ki ls kj lt kl lu km lv ko lw kp lx ly bi translated">摘要</h1><p id="ca10" class="pw-post-body-paragraph lz ma it mb b mc md kd me mf mg kg mh mi mj mk ml mm mn mo mp mq mr ms mt mu im bi translated">我们发现了Azure函数的自定义处理程序是什么，它们是如何工作的，以及我们如何用Go语言轻松实现它们。作为下一步，我建议你尝试将函数发布到Azure中。</p><p id="7bd8" class="pw-post-body-paragraph lz ma it mb b mc mv kd me mf mw kg mh mi mx mk ml mm my mo mp mq mz ms mt mu im bi translated">如果你喜欢这篇文章，给它几个掌声。谢谢你的时间。</p></div><div class="ab cl nb nc hx nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="im in io ip iq"><h1 id="8e89" class="lh li it bd lj lk ni lm ln lo nj lq lr ki nk kj lt kl nl km lv ko nm kp lx ly bi translated">来源</h1><ul class=""><li id="f1ae" class="nz oa it mb b mc md mf mg mi ob mm oc mq od mu oe of og oh bi translated"><a class="ae nn" href="https://docs.microsoft.com/en-us/azure/azure-functions/functions-custom-handlers" rel="noopener ugc nofollow" target="_blank">微软文档</a>。</li><li id="75e1" class="nz oa it mb b mc oi mf oj mi ok mm ol mq om mu oe of og oh bi translated">Mark Heath的Pluralsight课程— <a class="ae nn" href="https://app.pluralsight.com/library/courses/microsoft-azure-developer-implement-azure-functions" rel="noopener ugc nofollow" target="_blank">微软Azure开发者:实现Azure功能。</a></li></ul></div><div class="ab cl nb nc hx nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="im in io ip iq"><h1 id="6463" class="lh li it bd lj lk ni lm ln lo nj lq lr ki nk kj lt kl nl km lv ko nm kp lx ly bi translated">进一步阅读</h1><div class="pi pj gp gr pk pl"><a rel="noopener  ugc nofollow" target="_blank" href="/how-to-create-a-free-azure-account-step-by-step-348d4991ae6e"><div class="pm ab fo"><div class="pn ab po cl cj pp"><h2 class="bd jd gy z fp pq fr fs pr fu fw jc bi translated">如何一步一步创建免费的Azure帐户</h2><div class="ps l"><h3 class="bd b gy z fp pq fr fs pr fu fw dk translated">创建免费Azure帐户指南。有哪些可以免费使用的服务？什么是目录或订阅，什么是…</h3></div><div class="pt l"><p class="bd b dl z fp pq fr fs pr fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="pu l"><div class="pv l pw px py pu pz lb pl"/></div></div></a></div><div class="pi pj gp gr pk pl"><a rel="noopener  ugc nofollow" target="_blank" href="/introduction-to-cloud-computing-235e530b9fe0"><div class="pm ab fo"><div class="pn ab po cl cj pp"><h2 class="bd jd gy z fp pq fr fs pr fu fw jc bi translated">云计算简介</h2><div class="ps l"><h3 class="bd b gy z fp pq fr fs pr fu fw dk translated">云计算是软件利用、开发和托管的现在和未来。让我给你介绍一下它的…</h3></div><div class="pt l"><p class="bd b dl z fp pq fr fs pr fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="pu l"><div class="qa l pw px py pu pz lb pl"/></div></div></a></div><div class="pi pj gp gr pk pl"><a href="https://danielrusnok.medium.com/understanding-the-azure-resource-groups-and-azure-resources-d89ce92d25a6" rel="noopener follow" target="_blank"><div class="pm ab fo"><div class="pn ab po cl cj pp"><h2 class="bd jd gy z fp pq fr fs pr fu fw jc bi translated">了解Azure资源组和Azure资源</h2><div class="ps l"><h3 class="bd b gy z fp pq fr fs pr fu fw dk translated">还指导如何创建您的第一个Azure资源组，并添加您的Azure资源到其中。</h3></div><div class="pt l"><p class="bd b dl z fp pq fr fs pr fu fw dk translated">danielrusnok.medium.com</p></div></div><div class="pu l"><div class="qb l pw px py pu pz lb pl"/></div></div></a></div><div class="pi pj gp gr pk pl"><a href="https://danielrusnok.medium.com/how-to-choose-the-azure-region-2a7bfd5ef864" rel="noopener follow" target="_blank"><div class="pm ab fo"><div class="pn ab po cl cj pp"><h2 class="bd jd gy z fp pq fr fs pr fu fw jc bi translated">如何选择蔚蓝地区</h2><div class="ps l"><h3 class="bd b gy z fp pq fr fs pr fu fw dk translated">选择Azure Region之前应该考虑什么？微软如何在地理上划分数据中心的位置…</h3></div><div class="pt l"><p class="bd b dl z fp pq fr fs pr fu fw dk translated">danielrusnok.medium.com</p></div></div><div class="pu l"><div class="qc l pw px py pu pz lb pl"/></div></div></a></div></div><div class="ab cl nb nc hx nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="im in io ip iq"><figure class="ks kt ku kv gt kw gh gi paragraph-image"><a href="https://www.buymeacoffee.com/danielrusnok"><div class="gh gi qd"><img src="../Images/88f0e07ab6797fc4fcd13ed7410af039.png" data-original-src="https://miro.medium.com/v2/resize:fit:400/format:webp/1*yzOQeIJSJCaRDN_oP5OidA.png"/></div></a></figure><figure class="ks kt ku kv gt kw gh gi paragraph-image"><a href="https://itixo.com"><div class="gh gi qe"><img src="../Images/f3d94d9b86b4ee7080bab6d72172b50a.png" data-original-src="https://miro.medium.com/v2/resize:fit:180/format:webp/1*mLQH7u1-b2HPVcLURnQ9NQ.png"/></div></a></figure></div></div>    
</body>
</html>