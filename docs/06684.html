<html>
<head>
<title>Optionals in Swift</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Swift中的选项</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/optionals-in-swift-3831f1ca5dfb?source=collection_archive---------9-----------------------#2020-12-19">https://levelup.gitconnected.com/optionals-in-swift-3831f1ca5dfb?source=collection_archive---------9-----------------------#2020-12-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="c653" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你对iOS开发感兴趣或者喜欢开始使用Swift那么你需要知道你会遇到一些你之前可能不会遇到的符号，像<strong class="jp ir">问号这样的标记？</strong>或者<strong class="jp ir">感叹号！</strong>。</p><p id="3a34" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Optional是swift为避免变量的零值而开发的一个伟大特性，你可以通过看到一个问号<strong class="jp ir">来发现它？</strong>这意味着这个变量是可选的或者通过查看<strong class="jp ir">！标记</strong>，这意味着你不再需要这个变量是可选的。</p><p id="5304" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">假设你有一些电影，但每一部都有自己的名字，你会在特定的时间观看。</p><pre class="kl km kn ko gt kp kq kr ks aw kt bi"><span id="d178" class="ku kv iq kq b gy kw kx l ky kz">class Movie {<br/>    var movieName: String?<br/>    var movieQuality: Int?<br/>    var movieTime: String?<br/>}</span></pre><p id="3d40" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后，您尝试打印您的电影名称以进行检查:</p><pre class="kl km kn ko gt kp kq kr ks aw kt bi"><span id="8a64" class="ku kv iq kq b gy kw kx l ky kz">var optionalMovie = Movie()<br/>print(optionalMovie.movieName)</span></pre><blockquote class="la lb lc"><p id="7bbc" class="jn jo ld jp b jq jr js jt ju jv jw jx le jz ka kb lf kd ke kf lg kh ki kj kk ij bi translated">输出:零</p></blockquote><p id="e2e5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以这里我们从字符串<strong class="jp ir">中定义了一个名为movieName的变量，并通过使用<strong class="jp ir">将其标识为可选变量。</strong>标记，movieName的默认值为<strong class="jp ir"> nil </strong>这意味着该变量默认为空。这就是为什么我们在给它一个值之前试图打印名称时会面临一个警告，它将打印出<strong class="jp ir"> nil。</strong></strong></p><figure class="kl km kn ko gt li gh gi paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="gh gi lh"><img src="../Images/6a407cb02ac5c60d9b74e14723fea1a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*voBSmscdgP5yRwOWBR41iA.png"/></div></div></figure><p id="538c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们应该如何避免这些警告？有许多方法可以避免这种情况，让我们来找出它们:</p><pre class="kl km kn ko gt kp kq kr ks aw kt bi"><span id="4971" class="ku kv iq kq b gy kw kx l ky kz">if optionalMovie.movieName == nil {<br/>    print("Sorry, the movie has no name")<br/>}<br/>else {<br/>    print("optionalMovie name is \(optionalMovie.movieName)")<br/>}</span></pre><blockquote class="la lb lc"><p id="cca2" class="jn jo ld jp b jq jr js jt ju jv jw jx le jz ka kb lf kd ke kf lg kh ki kj kk ij bi translated"><strong class="jp ir">输出:</strong>抱歉，电影没有名字</p></blockquote><p id="7114" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">前面的代码显示了我们如何避免nil值，但是在print语句中还有另一个警告:</p><figure class="kl km kn ko gt li gh gi paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="gh gi ca"><img src="../Images/57c47b66275ff015bc57d2e795c79a01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qppN2E9uiC1uAND4qPdyBw.png"/></div></div></figure><p id="0eb5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个警告意味着我们需要为这个名称提供一个默认值，以避免将来出现任何错误，特别是当我们有任何变量依赖于这个名称的时候。</p><pre class="kl km kn ko gt kp kq kr ks aw kt bi"><span id="9dcf" class="ku kv iq kq b gy kw kx l ky kz">if optionalMovie.movieName == nil {<br/>    print("Sorry, the movie has no name")<br/>}<br/>else {<br/>    print("optionalMovie name is \(optionalMovie.movieName!)") //Sorry, the movie has no name<br/>}</span></pre><blockquote class="la lb lc"><p id="5f5e" class="jn jo ld jp b jq jr js jt ju jv jw jx le jz ka kb lf kd ke kf lg kh ki kj kk ij bi translated"><strong class="jp ir">输出:</strong>抱歉，电影没有名字</p></blockquote><p id="bee8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这里唯一不同的是我们加了<strong class="jp ir">！</strong>在<strong class="jp ir">optional movie . movie name</strong>结束时静音警告，还有这个<strong class="jp ir">！标记</strong>意味着我确信变量名有一个值，因为如果变量不等于零，你100%确定变量有一个值。</p><pre class="kl km kn ko gt kp kq kr ks aw kt bi"><span id="a3d2" class="ku kv iq kq b gy kw kx l ky kz">guard optionalMovie.movieName != nil else {<br/>            print("This movie has no name")<br/>            return<br/>        }<br/>        print("movie name is \(optionalMovie.movieName!)") </span></pre><p id="f319" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这里的guard语句用于检查我们的变量，如果变量有值，它将跳过else语句并遍历最后一个print语句行。</p><p id="e686" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们没有给它赋值，所以输出将是:</p><blockquote class="la lb lc"><p id="e32e" class="jn jo ld jp b jq jr js jt ju jv jw jx le jz ka kb lf kd ke kf lg kh ki kj kk ij bi translated">输出:这部电影没有名字</p></blockquote><p id="73ca" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你不知道一部电影的名字，那么你看这部电影是没有意义的，这就是为什么我们将使用这个为变量设置一个值的解决方案:</p><pre class="kl km kn ko gt kp kq kr ks aw kt bi"><span id="1c3f" class="ku kv iq kq b gy kw kx l ky kz">optionalMovie.movieName = "The fault in our stars"<br/>if optionalMovie.movieName == nil {<br/>    print("Sorry, the movie has no name")<br/>}<br/>else {<br/>    print("optional movie's name is \(optionalMovie.movieName!)") <br/>}</span></pre><blockquote class="la lb lc"><p id="a183" class="jn jo ld jp b jq jr js jt ju jv jw jx le jz ka kb lf kd ke kf lg kh ki kj kk ij bi translated"><strong class="jp ir">输出:</strong>可选电影的名字是《我们的星星里的错》</p></blockquote><p id="67da" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这里我放了<strong class="jp ir">！标记</strong>因为我确信movieName已经有了一个值，因为我之前已经初始化了它。</p><p id="b732" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后一个解决方案是使用<strong class="jp ir"> if let </strong>语句<strong class="jp ir">【可选绑定】:</strong></p><pre class="kl km kn ko gt kp kq kr ks aw kt bi"><span id="bd67" class="ku kv iq kq b gy kw kx l ky kz">if let movieName = optionalMovie.movieName {<br/>    print("optional movie's name is \(movieName)")<br/>}<br/>else {<br/>    print("Sorry, the movie has no name")<br/>} </span></pre><blockquote class="la lb lc"><p id="ef28" class="jn jo ld jp b jq jr js jt ju jv jw jx le jz ka kb lf kd ke kf lg kh ki kj kk ij bi translated"><strong class="jp ir">输出:</strong>可选电影的名字是《我们的星错》</p></blockquote><p id="950d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们已经把我们的变量放在一个常数中，并在我们的条件中使用这个常数。</p><p id="778a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们不需要把任何<strong class="jp ir">标记</strong> <strong class="jp ir">？</strong>或者<strong class="jp ir">！</strong>因为我们已经把它转化成了另一个常数。</p></div><div class="ab cl lp lq hu lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ij ik il im in"><p id="60ad" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">感谢reading️！帮助传播消息&amp;等待即将到来的文章…</p><p id="ac0f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对即将发布的博客文章有问题、建议、评论或想法吗？在<a class="ae lw" href="https://www.linkedin.com/in/ahmed-menaim-22cm/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上联系我或者写评论！你也可以在<a class="ae lw" href="https://github.com/CryptoOo/" rel="noopener ugc nofollow" target="_blank"> GitHub </a> &amp;上关注我，查看我的<a class="ae lw" href="https://stackoverflow.com/users/14437411/menaim" rel="noopener ugc nofollow" target="_blank"> Stackoverflow </a>答案和问题。</p></div></div>    
</body>
</html>