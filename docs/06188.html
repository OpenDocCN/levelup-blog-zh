<html>
<head>
<title>How to avoid using the any type in TypeScript?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何避免在TypeScript中使用any类型？</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-avoid-using-the-any-type-in-typescript-14c0a0805473?source=collection_archive---------5-----------------------#2020-11-02">https://levelup.gitconnected.com/how-to-avoid-using-the-any-type-in-typescript-14c0a0805473?source=collection_archive---------5-----------------------#2020-11-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1605" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">避免在代码中键入any的3个技巧</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/5f6d1367d3f82e36eb6016108cc10934.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FFEFhhywvBWOTGJirVkc4A.png"/></div></div></figure><p id="6463" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">谁没用过<code class="fe lq lr ls lt b">any</code>型至少一次？我有。这很简单，您不必费心在测试文件中查找事件类型或创建模拟对象。<code class="fe lq lr ls lt b">any</code>为您节省时间和精力。但是，不幸的是，并不是每一个简单的解决方案都是好的选择。</p><p id="2332" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">键入是检查代码中错误的最便宜、最快速的方法。对于<code class="fe lq lr ls lt b">any</code>型，很难看出哪里出了问题，而且在性能方面，它会让你付出很大代价。</p><p id="a237" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">有时候，不用<code class="fe lq lr ls lt b">any</code>型真的很难。幸运的是，TypeScript编译器确实为我们提供了避免不输入所需的一切。我们所需要的是了解和学习这些能把我们从尴尬境地中拯救出来的技巧。</p><p id="8af0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这个问题在我的团队中频繁出现。也许对你来说也是如此。在这篇文章中，我将分享我所学到的和用来在没有<code class="fe lq lr ls lt b">any</code>的情况下写代码的东西。</p><p id="106c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我将报道:</p><ul class=""><li id="d942" class="lu lv it kw b kx ky la lb ld lw lh lx ll ly lp lz ma mb mc bi translated"><strong class="kw iu">增加接口</strong></li><li id="83b8" class="lu lv it kw b kx md la me ld mf lh mg ll mh lp lz ma mb mc bi translated"><strong class="kw iu">类型交集</strong></li><li id="07a0" class="lu lv it kw b kx md la me ld mf lh mg ll mh lp lz ma mb mc bi translated"><strong class="kw iu">高级仿制药</strong></li><li id="c3b6" class="lu lv it kw b kx md la me ld mf lh mg ll mh lp lz ma mb mc bi translated"><strong class="kw iu">最终想法</strong></li></ul><p id="fb1b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">所以，如果你兴奋并且准备好了，让我们开始吧</p></div><div class="ab cl mi mj hx mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="im in io ip iq"><h1 id="70ef" class="mp mq it bd mr ms mt mu mv mw mx my mz jz na ka nb kc nc kd nd kf ne kg nf ng bi translated">扩充类型脚本接口</h1><p id="4712" class="pw-post-body-paragraph ku kv it kw b kx nh ju kz la ni jx lc ld nj lf lg lh nk lj lk ll nl ln lo lp im bi translated">你是否面临需要一个额外的变量给一个外部对象？比如，我们需要在窗口对象中保存一个自定义链接。当然，窗口对象中没有customLink属性。做什么？</p><ul class=""><li id="1ce7" class="lu lv it kw b kx ky la lb ld lw lh lx ll ly lp lz ma mb mc bi translated"><strong class="kw iu">第一解:</strong></li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="1de3" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">当然，由于我们使用了<code class="fe lq lr ls lt b">any</code>，这个解决方案并不是完美的解决方案。在这种情况下，最好向外部对象窗口添加一个自定义属性。我们怎么能用一个不属于我们的外部物体做到这一点呢？这可能吗？你猜怎么着？这是完全可能和可行的。</p><p id="197a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果我们看看窗户的定义。我们发现它是一个在dom lib中定义的接口。因此，我们在这里需要做的是将我们的自定义属性添加到窗口接口。</p><p id="3b6c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">为此，我们需要在应用程序的根目录下创建一个<code class="fe lq lr ls lt b">app.d.ts</code>文件。<code class="fe lq lr ls lt b">.d.ts</code>是一个包含TypeScript类型定义的文件。因此，我们需要在我们的定义类型文件中创建一个<code class="fe lq lr ls lt b">Window</code>接口，它具有我们需要的额外属性。这个文件将增加我们添加到其中的<code class="fe lq lr ls lt b">Window</code>对象的定义。这里有一个例子:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="bc0d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">魔法出现了，不再需要<code class="fe lq lr ls lt b">any</code>型了。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="0246" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">既然我们追上了<code class="fe lq lr ls lt b">any</code>型，我们就好了😉</p></div><div class="ab cl mi mj hx mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="im in io ip iq"><h1 id="ece1" class="mp mq it bd mr ms mt mu mv mw mx my mz jz na ka nb kc nc kd nd kf ne kg nf ng bi translated">交叉点类型</h1><p id="294a" class="pw-post-body-paragraph ku kv it kw b kx nh ju kz la ni jx lc ld nj lf lg lh nk lj lk ll nl ln lo lp im bi translated">我的第一个技巧非常简单，有助于避免使用<code class="fe lq lr ls lt b">any</code>类型。但是，它仍然有其局限性。如果外部对象没有定义类型文件(即<code class="fe lq lr ls lt b">.d.ts</code>)我们不能再扩充它的接口，我们该怎么办。有问题，不是吗？</p><p id="37a0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我通常在第三方库中遇到这个问题。另一个用例是拥有定义类型文件，但是自定义属性是可选的。我们该怎么办？每次检查我们是否有多余的财产？我不知道你怎么样，但我懒得做这个😝。在这种情况下，对我来说最好的方法是仅在需要时将第三方库类型与我的自定义属性交叉。很好，对吧？</p><p id="e67d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">让我们以一个我们想要定制的触发事件为例。我想只在特定事件被触发时添加额外的属性。这可以通过使用<code class="fe lq lr ls lt b">&amp;</code>来完成，它将交叉两种类型，如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="9be0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我将利用我的<code class="fe lq lr ls lt b">app.d.ts</code>来添加我的CustomActionEvent的定义，这样我就可以在应用程序的任何地方使用它。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="6c82" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们也可以想象一下:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="584d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在，当我们需要向事件添加额外的属性时，我们可以在组件中使用ActionStartEvent或ActionStopEvent，否则，我们将只使用Event。</p></div><div class="ab cl mi mj hx mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="im in io ip iq"><h1 id="d812" class="mp mq it bd mr ms mt mu mv mw mx my mz jz na ka nb kc nc kd nd kf ne kg nf ng bi translated">充分利用泛型</h1><p id="08a1" class="pw-post-body-paragraph ku kv it kw b kx nh ju kz la ni jx lc ld nj lf lg lh nk lj lk ll nl ln lo lp im bi translated">最后一个技巧是关于大多数泛型类型的。通常，数组用于存储数据并对这些数据进行一些操作，如排序、过滤、搜索...等等。</p><p id="16d7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">对于大数组，肯定会从后面获取数据，让他过滤，或者排序什么的，让前面尽可能的轻。但是，在某些情况下，我们在前端进行过滤或排序。我们应该做什么，为每个属性创建一个过滤器或排序器？对于每个数组？相同的功能有太多的代码，不是一个真正好的解决方案。</p><p id="889b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果我们能做一些像这样的事情，那就太好了:</p><pre class="kj kk kl km gt no lt np nq aw nr bi"><span id="6084" class="ns mq it lt b gy nt nu l nv nw">myArray.sortWith('property1', 'asc');</span></pre><p id="38c7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">同样，我们可以使用接口扩充来扩充标准阵列的接口。但是，这并不能解决所有问题。我们仍然需要一个通用的<em class="nx"> sortWith，filterWith </em>，它可以应用于所有数组的列类型。</p><p id="156d" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">为了解决这个问题，我们需要更深入地研究泛型类型。让我们首先在<code class="fe lq lr ls lt b">app.d.ts</code>中创建自定义数组的接口，对于这个实例，我们将只添加filterWith作为示例:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="7288" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">现在，我们可以在阵列上实现和使用filterWith:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure></div><div class="ab cl mi mj hx mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="im in io ip iq"><h1 id="18ba" class="mp mq it bd mr ms mt mu mv mw mx my mz jz na ka nb kc nc kd nd kf ne kg nf ng bi translated">最终想法:</h1><ul class=""><li id="cc01" class="lu lv it kw b kx nh la ni ld ny lh nz ll oa lp lz ma mb mc bi translated"><code class="fe lq lr ls lt b">any</code>类型是吃app的性能</li><li id="7acc" class="lu lv it kw b kx md la me ld mf lh mg ll mh lp lz ma mb mc bi translated">使用更先进的技术，如接口扩充、类型交叉和使用泛型，可以避免使用类型。</li><li id="cec1" class="lu lv it kw b kx md la me ld mf lh mg ll mh lp lz ma mb mc bi translated">我们使用<code class="fe lq lr ls lt b">keyof</code>关键字来确定传递给添加到标准数组对象的<em class="nx"> filterWith </em>函数的属性。</li><li id="b7a5" class="lu lv it kw b kx md la me ld mf lh mg ll mh lp lz ma mb mc bi translated">要在组件类中增加接口，我们需要在一个全局块中声明自定义接口，如下所示:</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div></figure><ul class=""><li id="1a30" class="lu lv it kw b kx ky la lb ld lw lh lx ll ly lp lz ma mb mc bi translated">这些提示将帮助你避免使用<code class="fe lq lr ls lt b">any</code>类型。他们是可用的。TypeScript编译器如此强大。我们可以用它做很多事情。那么，为什么不贪婪地得到编译器得到的所有东西呢？如果您有兴趣了解更多关于TypeScript编译器的功能，本文可能会为您提供一些令人惊讶的提示:</li></ul><div class="ob oc gp gr od oe"><a rel="noopener  ugc nofollow" target="_blank" href="/how-to-get-the-most-from-the-typescript-compiler-angular-aae7fb53e0cf"><div class="of ab fo"><div class="og ab oh cl cj oi"><h2 class="bd iu gy z fp oj fr fs ok fu fw is bi translated">如何充分利用TypeScript编译器— Angular</h2><div class="ol l"><h3 class="bd b gy z fp oj fr fs ok fu fw dk translated">让TypeScript编译器为您服务</h3></div><div class="om l"><p class="bd b dl z fp oj fr fs ok fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="on l"><div class="oo l op oq or on os ks oe"/></div></div></a></div></div><div class="ab cl mi mj hx mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="im in io ip iq"><p id="c0fb" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">亲爱的读者朋友们，非常感谢你们的支持和宝贵的时间。我希望这对你有用和有帮助。</p><p id="5b3e" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu">关注我上</strong> <a class="ae ot" href="https://medium.com/@famzil/" rel="noopener"> <strong class="kw iu">中</strong> </a> <strong class="kw iu">、</strong><a class="ae ot" href="https://www.linkedin.com/in/fatima-amzil-9031ba95/" rel="noopener ugc nofollow" target="_blank"><strong class="kw iu">Linkedin</strong></a><strong class="kw iu">、</strong><a class="ae ot" href="https://twitter.com/FatimaAMZIL9" rel="noopener ugc nofollow" target="_blank"><strong class="kw iu">Twitter</strong></a><strong class="kw iu">了解更多文章。</strong></p><p id="e67c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">不久后见(ﾉ◕ヮ◕)ﾉ*:･ﾟ✧)</p><p id="c6ed" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><strong class="kw iu"> FAM </strong></p></div></div>    
</body>
</html>