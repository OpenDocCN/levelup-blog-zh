<html>
<head>
<title>Clean Commit History With Git Interactive Rebase</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Git交互式Rebase清除提交历史</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/clean-commit-history-with-git-interactive-rebase-8882eacbf5ab?source=collection_archive---------8-----------------------#2022-07-14">https://levelup.gitconnected.com/clean-commit-history-with-git-interactive-rebase-8882eacbf5ab?source=collection_archive---------8-----------------------#2022-07-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="4e85" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph">饭桶</h2><div class=""/><div class=""><h2 id="1e7d" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">通过git rebase重写提交</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/192e7b7be943e1e428cfa8d93d85c218.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*AmNGKh5tSSmG6nww"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">照片由<a class="ae le" href="https://unsplash.com/@yancymin?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">扬西·敏</a>在<a class="ae le" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="5716" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">每当我们在做某件事时，我们在完成后向观众展示之前都会回顾我们的工作。类似地，我们的代码在进入生产系统之前需要我们同事的审查。</p><p id="b5ef" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">在调整同事请求的变更时，保持我们的<a class="ae le" rel="noopener ugc nofollow" target="_blank" href="/4-tips-to-write-clean-commit-history-51155f7f23b9">提交历史干净</a>是至关重要的。</p><p id="a264" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">作为初学者，我习惯于添加一个新的提交来调整所请求的变更。但它让提交历史变得丑陋。使用git interactive rebase，您可以克服这个问题并保持提交的整洁。</p><p id="d05f" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我在这篇文章中分享了git交互式rebase的多个用例。</p></div><div class="ab cl mb mc hu md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ij ik il im in"><h1 id="23f0" class="mi mj iq bd mk ml mm mn mo mp mq mr ms kf mt kg mu ki mv kj mw kl mx km my mz bi translated">调整同事要求的变更</h1><p id="04a8" class="pw-post-body-paragraph lf lg iq lh b li na ka lk ll nb kd ln lo nc lq lr ls nd lu lv lw ne ly lz ma ij bi translated">我们的同事在我们的代码进入生产系统之前审查它。当团队请求变更时，我们可以通过编辑特定的提交来直接调整请求的变更。例如，我们的同事请求修改提交消息<code class="fe nf ng nh ni b">Optimize bulk endpoint</code>。</p><p id="60dd" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我们可以使用<code class="fe nf ng nh ni b">git rebase -i main</code>编辑提交。将打开一个编辑器窗口，列出所有提交。我们可以选择对哪个提交执行什么操作。由于我们喜欢<code class="fe nf ng nh ni b">edit</code>第二次提交，我们将选择<code class="fe nf ng nh ni b">e or edit</code>，如下所示。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/38e2bacc96c39fa14432962684cd0b35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/format:webp/1*_b60-ThewMNSOBC-UXou0w.png"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">编辑特定提交</figcaption></figure><p id="198c" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">一旦我们调整了所有请求的更改，我们就可以通过运行以下命令来提交我们的更改。</p><pre class="kp kq kr ks gt nk ni nl nm aw nn bi"><span id="9016" class="no mj iq ni b gy np nq l nr ns">git add .<br/>git rebase --continue</span></pre><h1 id="27dc" class="mi mj iq bd mk ml nt mn mo mp nu mr ms kf nv kg mu ki nw kj mw kl nx km my mz bi translated">将多个提交合并为一个</h1><p id="1ac8" class="pw-post-body-paragraph lf lg iq lh b li na ka lk ll nb kd ln lo nc lq lr ls nd lu lv lw ne ly lz ma ij bi translated">交互式rebase还允许我们通过使用<code class="fe nf ng nh ni b">squash</code>命令将多个提交合并成一个。我在以下场景中使用这个特性。</p><ol class=""><li id="056d" class="ny nz iq lh b li lj ll lm lo oa ls ob lw oc ma od oe of og bi translated">有时我不确定如何组织我的提交，所以我添加临时提交。随着我工作的进展，情况变得更加清晰。一旦清楚了，我就把这些临时提交合并成一个有意义的提交。</li><li id="c635" class="ny nz iq lh b li oh ll oi lo oj ls ok lw ol ma od oe of og bi translated">有时候我想尝试一些新的东西。在尝试新东西之前，我添加了一个临时提交。如果我的实验成功了，我会将它与我以前的工作合并，否则就放弃一切。</li></ol><p id="bb4a" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">您可以通过使用<code class="fe nf ng nh ni b">git rebase -i main</code>合并提交，并使用<code class="fe nf ng nh ni b">s or squash</code>反对提交，您想要合并，如下所示。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi om"><img src="../Images/9e8be3d576fd1cd8224d0fd39bf99295.png" data-original-src="https://miro.medium.com/v2/resize:fit:1386/format:webp/1*KYngJgyqo0iOa7HiJfLrTg.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">粉碎第二次提交</figcaption></figure><p id="308e" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">这将导致以下窗口。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi on"><img src="../Images/b48ef4626dd27706d19279f05dca75a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x14cCCi46LFVYR4LK-Heyw.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">提交消息之间的选择</figcaption></figure><p id="cbf6" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我们需要使用如下所示的<code class="fe nf ng nh ni b">#</code>来选择我们想要保留的提交消息和要忽略的提交消息。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi oo"><img src="../Images/c179735c382db35765055911e87cd604.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nqPYzQ0ILYtWCXuahSskbQ.png"/></div></div></figure><p id="00be" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">保存时，git将两次提交合并为一次。</p><h1 id="badc" class="mi mj iq bd mk ml nt mn mo mp nu mr ms kf nv kg mu ki nw kj mw kl nx km my mz bi translated">放弃提交</h1><p id="afdd" class="pw-post-body-paragraph lf lg iq lh b li na ka lk ll nb kd ln lo nc lq lr ls nd lu lv lw ne ly lz ma ij bi translated">我们可以通过对特定提交使用<code class="fe nf ng nh ni b">d or drop</code>命令来删除特定提交，如下所示</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi op"><img src="../Images/e947eb2a15c05832c6ea69ba6977b912.png" data-original-src="https://miro.medium.com/v2/resize:fit:1190/format:webp/1*crj1dd9hcl8w_oQYh2lUZA.png"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">放弃提交</figcaption></figure><p id="b1bd" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">当不清楚我的同事是否会接受我的工作时，我会使用这个功能。理想情况下，我会在工作前与团队讨论。</p><p id="79c4" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">但是，如果同事们很忙，并且更改不太耗时，我会单独提交。这样，如果需要的话，我就可以轻松地放下我的工作。</p><p id="f02a" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">感谢阅读。</p></div><div class="ab cl mb mc hu md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ij ik il im in"><h1 id="d8f1" class="mi mj iq bd mk ml mm mn mo mp mq mr ms kf mt kg mu ki mv kj mw kl mx km my mz bi translated">分级编码</h1><pre class="kp kq kr ks gt nk ni nl nm aw nn bi"><span id="59cb" class="no mj iq ni b gy np nq l nr ns">Thanks for being a part of our community! More content in the <a class="ae le" href="https://levelup.gitconnected.com/" rel="noopener ugc nofollow" target="_blank">Level Up Coding publication</a>.</span><span id="d1d7" class="no mj iq ni b gy oq nq l nr ns">Follow: <a class="ae le" href="https://twitter.com/gitconnected" rel="noopener ugc nofollow" target="_blank">Twitter</a>, <a class="ae le" href="https://www.linkedin.com/company/gitconnected" rel="noopener ugc nofollow" target="_blank">LinkedIn</a>, <a class="ae le" href="https://newsletter.levelup.dev/" rel="noopener ugc nofollow" target="_blank">Newsletter</a></span><span id="4c77" class="no mj iq ni b gy oq nq l nr ns">Level Up is transforming tech recruiting 👉 <a class="ae le" href="https://jobs.levelup.dev/talent/welcome?referral=true" rel="noopener ugc nofollow" target="_blank"><strong class="ni ja">Join our talent collective</strong></a></span></pre></div></div>    
</body>
</html>