<html>
<head>
<title>Beginners Guide to Authentication Basics</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">认证基础入门指南</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/beginners-guide-to-authentication-basics-ead786af0e77?source=collection_archive---------7-----------------------#2021-11-24">https://levelup.gitconnected.com/beginners-guide-to-authentication-basics-ead786af0e77?source=collection_archive---------7-----------------------#2021-11-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8690" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">学习核心概念</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/7415a7db219fb24c32849ae2247a5bc5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*mF7KADKft2SeP27o"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@franckinjapan?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">弗兰克</a>在<a class="ae ky" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="2c2c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在任何现实世界的项目中，身份验证都是一个关键特性。在我的大学时代，我花了几个月的时间努力寻找一种最佳的方法来使用MERN堆栈创建一个全堆栈认证和授权系统。</p><p id="27d2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">问题是使用现代技术实现认证系统有不同的方法。你有基于cookie的系统，基于令牌的系统，当选择不同的包时，有不同的包，如passport.js，你可以使用基于微软的库。此外，还有第三方解决方案，如OAuth。</p><p id="beba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">那么我们如何选择最合适的方法呢？为此，在选择正确的技术方法时，您应该对身份验证流程有一个基本的了解。这篇文章更全面地解释了认证系统是如何工作的。</p><blockquote class="lv lw lx"><p id="dbfc" class="kz la ly lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated">如果你愿意支持我成为一名作家，可以考虑加入<a class="ae ky" href="https://freelancingcult.medium.com/membership" rel="noopener">成为一名媒体成员</a>。这样我就可以花更多的时间分享知识，创作更多的内容。每月只需5美元，你就可以无限制地使用Medium。</p></blockquote><h2 id="e2fc" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">开始之前</h2><p id="ee90" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">你们中的一些人可能遇到过“认证”和“授权”这两个词。在我们继续之前，最好理解这两个词之间的区别。认证和授权是登录系统的两个不同部分。</p><p id="b858" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">身份验证是检查用户的用户名和密码，如果用户名和密码匹配，则允许用户登录。授权是检查登录的用户是否有适当的权限做不同的事情。也许一个登录的用户只需要查看东西，而不需要删除它们。另一个用户可能有查看和删除的权限。使用授权来检查每个角色的这种权限</p><h2 id="e4ab" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">认证基础知识</h2><p id="8ff7" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">身份验证可以基于cookie，也可以基于令牌。首先，让我们看看在任何认证流程中发生的主要步骤。</p><h2 id="cee4" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">认证概述</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi na"><img src="../Images/2d0fdb5bdf1aef88424aa38f168b233a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2CeTIhGoWBwYUT8j2THKsA.png"/></div></div></figure><p id="36f8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上图中，客户端是我们用来访问资源(互联网)的应用程序(网络浏览器)。想象一下，上图是一个用户登录会员网站的场景。会员制网站只向注册用户提供内容。</p><ol class=""><li id="801e" class="nb nc it lb b lc ld lf lg li nd lm ne lq nf lu ng nh ni nj bi translated">用户在登录页面上输入用户名和密码</li><li id="1960" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated">服务器验证输入的凭证。</li><li id="1908" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated">如果凭证有效，则服务器登录成功，并创建一段数据来标识登录的用户。</li><li id="78e9" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated">将数据发送到客户端。</li><li id="c933" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated">客户端保存这段数据，并在向服务器端发送请求成员资格内容的请求时使用它。</li><li id="89b9" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated">当从服务器请求成员资格数据时，客户机将数据附加到请求中。</li><li id="851e" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated">服务器在发送资源之前验证附加的数据。</li><li id="baec" class="nb nc it lb b lc nk lf nl li nm lm nn lq no lu ng nh ni nj bi translated">如果验证成功，服务器发送请求的数据。</li></ol><p id="44d5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下图显示了凭据无效时身份验证流程的工作方式。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/36d7e30c94792999cebca1e9224b007c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9gziZFZA1lhOCkKqgtnPlQ.png"/></div></div></figure><p id="f3df" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当生成经过验证的信息并重用它时，有不同的方法。基于令牌或基于cookie的方法主要用于执行这些场景。每种方法都有利弊。</p><h2 id="2bb2" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">基于Cookie</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nq"><img src="../Images/7ad03d31e6dbfe879c66bb1867453918.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hkl3cN7Oz7YBD9Jxkx22GA.png"/></div></div></figure><p id="50a1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如前所述，在创建表明用户有效的数据时，有不同的方法。让我们看看cookies是如何用于身份验证的。</p><p id="e95f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在基于cookie的认证系统中，输入有效凭证后，服务器会创建一个<strong class="lb iu">活动会话Id </strong>并将其存储在数据库中。并将一个cookie附加到浏览器，其对应的sessionId与数据库中创建的活动会话相匹配。</p><p id="405f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">存储在数据库中的活动会话Id和浏览器中的会话Id相互匹配。</p><p id="582a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Web浏览器自动保存从服务器端发送的cookie。因此，开发人员不需要编写代码来处理传入的cookie以保存在浏览器中。</p><p id="11f2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">每当浏览器请求受保护的资源时，它会将会话Id与浏览器请求一起发送。服务器可以将发送的会话Id与数据库中存储的活动会话Id条目进行比较，并进行验证。</p><p id="2246" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果接收到的会话Id与数据库中的活动会话Id匹配，则发送受保护的资源</p><h2 id="7359" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">基于cookie的身份验证的属性</h2><p id="8bfc" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">基于Cookie的身份验证是有状态的，因为身份验证记录应该存储在前端和后端。因此，在数据库中基于cookie的身份验证系统中，随时都会有一个登录用户列表。</p><p id="f8d0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">用户注销后，浏览器/客户端的cookie和服务器端的会话Id都会被删除。</p><h2 id="364d" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">基于令牌的认证</h2><p id="24c2" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">基于令牌的身份认证可以在网络浏览器、移动应用、桌面应用甚至物联网设备中使用。所以客户端不像使用基于cookie时那样局限于web浏览器。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nr"><img src="../Images/c439d2bc3ca2d9d0f5d1cb342e405b06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AIBIcuV81TwfBeOEepuAgg.png"/></div></div></figure><p id="c61c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">显然，在基于令牌的认证系统中，如果用户凭证正确，它会向浏览器端发送一个签名的令牌。其中一个主要区别是，除非基于cookie的系统基于令牌的系统将签名的cookie作为普通数据发送到客户端。因此客户端不能单独识别从服务器发送的令牌。</p><p id="2ce8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，我们必须在客户端编写单独的代码来处理这个传入的令牌。我们必须提取它并存储在浏览器中。我们可以将令牌存储在本地存储或会话存储中，甚至可以将传入令牌保存在cookie中。</p><p id="517d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当从服务器请求数据时，客户端发送请求，将令牌附加到请求中。令牌被附加到它的授权头，我们还在令牌前面添加了单词<strong class="lb iu"> Bearer </strong>。</p><p id="bbf6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦从服务器端收到令牌，它就对令牌进行解码，并验证它是否是有效的令牌。如果令牌有效，则传递请求的数据。</p><h2 id="38db" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">基于令牌的身份验证的属性</h2><p id="c609" class="pw-post-body-paragraph kz la it lb b lc mv ju le lf mw jx lh li mx lk ll lm my lo lp lq mz ls lt lu im bi translated">基于令牌的身份验证比基于cookie的身份验证更快。主要原因是，每当基于cookie的系统想要验证用户时，它都应该对活动用户进行数据库查找，以找到匹配的会话Id，这需要更多的时间。</p><p id="ca2a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">基于令牌的身份验证系统适用于使用多个域和子域的应用程序。</p><p id="adc1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">基于令牌的认证系统可用于移动系统和基于网络的系统。因此，可以在移动和桌面设备上使用单一身份验证实现。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nr"><img src="../Images/1f9ab2e773fc909da4b6d81e7b062a80.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3zx_vSksJCjO2LrbjgxNmQ.png"/></div></div></figure><blockquote class="lv lw lx"><p id="969b" class="kz la ly lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated">我希望你喜欢读这篇文章。如果你愿意支持我作为一个作家，并为我花在分享知识上的时间，考虑注册<a class="ae ky" href="https://freelancingcult.medium.com/membership" rel="noopener">成为一个媒体成员</a>。每月只需5美元，你就可以无限制地使用Medium。</p></blockquote><h2 id="a4ad" class="mc md it bd me mf mg dn mh mi mj dp mk li ml mm mn lm mo mp mq lq mr ms mt mu bi translated">参考</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ns nt l"/></div></figure></div></div>    
</body>
</html>