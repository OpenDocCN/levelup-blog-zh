<html>
<head>
<title>How To Build A Dark Mode Switcher with CSS Variables</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用CSS变量构建一个黑暗模式切换器</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-build-a-dark-mode-switcher-with-css-variables-ccb13f7441a0?source=collection_archive---------13-----------------------#2020-05-04">https://levelup.gitconnected.com/how-to-build-a-dark-mode-switcher-with-css-variables-ccb13f7441a0?source=collection_archive---------13-----------------------#2020-05-04</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="bfb3" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">用CSS变量、JavaScript和TypeScript构建一个黑暗模式切换器</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/6139e35001cd1b7545bf79a8e1c1569e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iTipwoyBgMFA0yd0ctozfg.png"/></div></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">斯科特·韦伯在Unsplash上拍摄的照片</figcaption></figure><p id="52dd" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">回到CSS没有变量的日子，我并不怀念。但当萨斯/SCSS公司带来变数时，这就变成了另一个故事。</p><p id="89ed" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">自从我在Sass中使用变量以来，这让我清楚地认识到这是非常有用的。但是我等CSS这个功能等了这么久。</p><p id="ce2b" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">幸运的是，我们生活在一个所有浏览器都实现了CSS变量的时代🙌！在这篇文章中，我将教你CSS变量。我们将它与TypeScript/JavaScript结合起来，构建一个很酷的黑暗模式切换器。</p><p id="2522" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这是超级简单的，因为为什么要把它变得比需要的更复杂呢？我将在TypeScript和JavaScript中添加所有代码示例。我选择添加TypeScript，因为这在将来的工具箱中会变得更加重要。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="d56a" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">1.深入研究CSS变量</h1><p id="1ca3" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">让我们从CSS变量开始。打开你的CSS文件，像这样创建它们。</p><h2 id="610e" class="na me iu bd mf nb nc dn mj nd ne dp mn lj nf ng mp ln nh ni mr lr nj nk mt nl bi translated">根</h2><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nm nn l"/></div></figure><p id="d132" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果你在<code class="fe no np nq nr b">:root {...}</code>中定义你的CSS变量<code class="fe no np nq nr b">—-textcolor</code>，它将在你的整个CSS中可用。</p><p id="df3b" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">但是我们想用这个变量给我们的<code class="fe no np nq nr b">h1</code>添加颜色。我们通过使用CSS中的<code class="fe no np nq nr b">var()</code>函数来实现。无论你在哪里应用<code class="fe no np nq nr b">var(...)</code>，颜色都会被应用到你给予它的属性上。</p><h2 id="4a24" class="na me iu bd mf nb nc dn mj nd ne dp mn lj nf ng mp ln nh ni mr lr nj nk mt nl bi translated">类别、元素或ID</h2><p id="42aa" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">例如，如果您在类、元素或ID上定义了该变量，它将只在该范围内可用。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nm nn l"/></div></figure><p id="acfb" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">因此，如果我们将<code class="fe no np nq nr b">.class-name</code>应用到带有该类的<code class="fe no np nq nr b">div</code>上，那么颜色将会改变。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nm nn l"/></div></figure><p id="f0a4" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在示例中，带有<code class="fe no np nq nr b">class-name</code>的<code class="fe no np nq nr b">div</code>将是绿色，另一个将是默认的黑色。</p><h2 id="5630" class="na me iu bd mf nb nc dn mj nd ne dp mn lj nf ng mp ln nh ni mr lr nj nk mt nl bi translated">覆盖CSS变量</h2><p id="3c48" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">这意味着您可以根据上下文覆盖CSS变量的颜色。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nm nn l"/></div></figure><p id="df20" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">现在我们把根的默认颜色设为黄色，但是在<code class="fe no np nq nr b">class-name</code>中我们使用了绿色。这意味着我们可以根据上下文覆盖CSS变量。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="ns nn l"/></div></figure></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="dc7b" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">2.用JavaScript改变CSS变量</h1><p id="8670" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">既然我们已经根据上下文改变了CSS变量，我们需要检查如何用JavaScript改变它。</p><h2 id="99ac" class="na me iu bd mf nb nc dn mj nd ne dp mn lj nf ng mp ln nh ni mr lr nj nk mt nl bi translated">获取CSS变量值根</h2><p id="b0b0" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">当你在根中声明一个CSS变量时，我们必须通过<code class="fe no np nq nr b">documentElement</code>来获取它的值。通过对<code class="fe no np nq nr b">style</code>对象使用<code class="fe no np nq nr b">getPropertyValue</code>方法，我们可以访问CSS变量。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nm nn l"/></div></figure><h2 id="18ce" class="na me iu bd mf nb nc dn mj nd ne dp mn lj nf ng mp ln nh ni mr lr nj nk mt nl bi translated">获取CSS变量值上下文</h2><p id="ef04" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">在类、ID或元素的上下文中声明CSS变量。然后使用<code class="fe no np nq nr b">document.querySelector()</code>得到元素。通过对<code class="fe no np nq nr b">style</code>对象使用方法<code class="fe no np nq nr b">getPropertyValue</code>，我们可以访问CSS变量。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nm nn l"/></div></figure><h2 id="95a6" class="na me iu bd mf nb nc dn mj nd ne dp mn lj nf ng mp ln nh ni mr lr nj nk mt nl bi translated">更改根目录中的CSS变量</h2><p id="2465" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">想要改变根中CSS变量的值，使用<code class="fe no np nq nr b">setProperty</code>方法。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nm nn l"/></div></figure><h2 id="a1e1" class="na me iu bd mf nb nc dn mj nd ne dp mn lj nf ng mp ln nh ni mr lr nj nk mt nl bi translated">在上下文中更改CSS变量</h2><p id="55b8" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">想要改变上下文中CSS变量的值(类、ID或元素)，使用<code class="fe no np nq nr b">setProperty</code>方法。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nm nn l"/></div></figure><h2 id="2760" class="na me iu bd mf nb nc dn mj nd ne dp mn lj nf ng mp ln nh ni mr lr nj nk mt nl bi translated">例子</h2><p id="0f9a" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">最后，我创建了一个在根或上下文中切换CSS变量的例子。您可以将该值重置回正常，以通过<code class="fe no np nq nr b">null</code>而不是颜色值。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="ns nn l"/></div></figure></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="7c96" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">3.创建一个黑暗模式切换器</h1><p id="cc44" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">现在我们知道了CSS变量的行为。无论是改变元素的上下文还是用JavaScript改变它们。是时候创建黑暗模式切换器了🌓。</p><h2 id="4590" class="na me iu bd mf nb nc dn mj nd ne dp mn lj nf ng mp ln nh ni mr lr nj nk mt nl bi translated">配色方案</h2><p id="103e" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">让我们定义我们的配色方案。我使用了<a class="ae kz" href="https://uigradients.com/" rel="noopener ugc nofollow" target="_blank">uiGradients.com</a>来获得漂亮的渐变背景。浅色变量在<code class="fe no np nq nr b">:root</code>中定义，深色变量在<code class="fe no np nq nr b">.darmode</code>类中定义。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nm nn l"/></div></figure><h2 id="fcb7" class="na me iu bd mf nb nc dn mj nd ne dp mn lj nf ng mp ln nh ni mr lr nj nk mt nl bi translated">在正文上应用背景</h2><p id="2a5c" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">为了应用背景渐变，我们使用了<code class="fe no np nq nr b">background</code>属性上的变量。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nm nn l"/></div></figure><p id="faf5" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">HTML看起来会像这样。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nm nn l"/></div></figure><h2 id="bc81" class="na me iu bd mf nb nc dn mj nd ne dp mn lj nf ng mp ln nh ni mr lr nj nk mt nl bi translated">切换配色方案</h2><p id="cec2" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">为了切换黑暗和光明模式，我们通过主体上的JavaScript更改类名。在这种情况下，不需要通过JavaScript更改变量。</p><p id="126c" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv">打字稿</strong></p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nm nn l"/></div></figure><p id="c3e3" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><strong class="lc iv"> JavaScript </strong></p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="nm nn l"/></div></figure><p id="ae4c" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这里你可以看到我使用了<code class="fe no np nq nr b">classList.toggle</code>在“亮模式”和“暗模式”之间切换类名。接下来，我们根据主体的类别更改按钮中的文本。</p><p id="a664" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated"><em class="nt">就这么简单</em>🤗</p><p id="a9c0" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">查看示例，了解它是如何工作的。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="ns nn l"/></div></figure></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="e726" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">结论</h1><p id="24ec" class="pw-post-body-paragraph la lb iu lc b ld mv jv lf lg mw jy li lj mx ll lm ln my lp lq lr mz lt lu lv in bi translated">我们结合JavaScript和TypeScript学习了CSS变量！现在是你在项目中使用它的时候了。让我知道你用它做了什么！</p><p id="c517" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">如果你喜欢这个教程或者有任何问题，请在评论中告诉我。</p><p id="c82b" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">想获得一些为程序员创作内容的小技巧，<a class="ae kz" href="https://mailchi.mp/239d4f7b0d9d/programming-content-creator" rel="noopener ugc nofollow" target="_blank">请告诉我</a>。</p></div><div class="ab cl lw lx hy ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="in io ip iq ir"><h1 id="ddcd" class="md me iu bd mf mg mh mi mj mk ml mm mn ka mo kb mp kd mq ke mr kg ms kh mt mu bi translated">阅读更多</h1><div class="nu nv gq gs nw nx"><a href="https://medium.com/undefined-developer/you-picked-the-wrong-side-of-the-javascript-war-583e64fe9c74" rel="noopener follow" target="_blank"><div class="ny ab fp"><div class="nz ab oa cl cj ob"><h2 class="bd iv gz z fq oc fs ft od fv fx it bi translated">在JavaScript战争中，你站错了队</h2><div class="oe l"><h3 class="bd b gz z fq oc fs ft od fv fx dk translated">没有人会赢！</h3></div><div class="of l"><p class="bd b dl z fq oc fs ft od fv fx dk translated">medium.com</p></div></div><div class="og l"><div class="oh l oi oj ok og ol kt nx"/></div></div></a></div><div class="nu nv gq gs nw nx"><a rel="noopener  ugc nofollow" target="_blank" href="/typescript-for-beginners-97b568d3e110"><div class="ny ab fp"><div class="nz ab oa cl cj ob"><h2 class="bd iv gz z fq oc fs ft od fv fx it bi translated">初学者打字稿</h2><div class="oe l"><h3 class="bd b gz z fq oc fs ft od fv fx dk translated">从头开始学习TypeScript的实用方法</h3></div><div class="of l"><p class="bd b dl z fq oc fs ft od fv fx dk translated">levelup.gitconnected.com</p></div></div><div class="og l"><div class="om l oi oj ok og ol kt nx"/></div></div></a></div><div class="nu nv gq gs nw nx"><a href="https://medium.com/better-programming/the-thin-line-between-flexibility-readability-and-scalability-in-software-development-35c6dd32deb6" rel="noopener follow" target="_blank"><div class="ny ab fp"><div class="nz ab oa cl cj ob"><h2 class="bd iv gz z fq oc fs ft od fv fx it bi translated">软件开发中灵活性、可读性和可伸缩性之间的细微差别</h2><div class="oe l"><h3 class="bd b gz z fq oc fs ft od fv fx dk translated">你的策略是什么？</h3></div><div class="of l"><p class="bd b dl z fq oc fs ft od fv fx dk translated">medium.com</p></div></div><div class="og l"><div class="on l oi oj ok og ol kt nx"/></div></div></a></div><div class="nu nv gq gs nw nx"><a href="https://medium.com/better-programming/3-tools-to-start-programming-on-a-tablet-or-mobile-phone-9dd89fc89f69" rel="noopener follow" target="_blank"><div class="ny ab fp"><div class="nz ab oa cl cj ob"><h2 class="bd iv gz z fq oc fs ft od fv fx it bi translated">在平板电脑或手机上开始编程的3个工具</h2><div class="oe l"><h3 class="bd b gz z fq oc fs ft od fv fx dk translated">编码不仅仅发生在你的台式机或笔记本电脑上</h3></div><div class="of l"><p class="bd b dl z fq oc fs ft od fv fx dk translated">medium.com</p></div></div><div class="og l"><div class="oo l oi oj ok og ol kt nx"/></div></div></a></div></div></div>    
</body>
</html>