# åœ¨ React æœ¬åœ°åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ Redux-Thunk è·å–æ•°æ®

> åŸæ–‡ï¼š<https://levelup.gitconnected.com/fetch-data-with-redux-thunk-in-react-native-app-ee914438c92f>

![](img/28b48fc1918bc370bc1a32d4fc8d99d1.png)

åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†å¼€å§‹ä½¿ç”¨ä¸€ä¸ªåä¸º Thunk çš„ä¸­é—´ä»¶æ¥å¸®åŠ©æˆ‘ä»¬ä»æœåŠ¡å™¨å¼‚æ­¥è·å–æ•°æ®ã€‚

# Redux æ˜¯ä»€ä¹ˆï¼Ÿ

[](https://ranyel.medium.com/what-is-redux-b16b42b33820) [## Redux æ˜¯ä»€ä¹ˆï¼Ÿ

### ä½ å¯èƒ½å¤šæ¬¡å¬åˆ° Redux è¿™ä¸ªè¯ï¼Œä½ æƒ³çŸ¥é“ Redux æ˜¯ä»€ä¹ˆï¼Ÿåœ¨ä¸‹é¢çš„çŸ­ç‰‡ä¸­ï¼Œæˆ‘å°†â€¦

ranyel.medium.com](https://ranyel.medium.com/what-is-redux-b16b42b33820) 

1.  [https://lnkd.in/guBuBVP](https://www.linkedin.com/pulse/create-redux-hello-world-rany-elhousieny-phd%E1%B4%AC%E1%B4%AE%E1%B4%B0/):[ğ‘ªğ’“ğ’†ğ’‚ğ’•ğ’†ğ’‚ğ‘¹ğ’†ğ’…ğ’–ğ’™](https://lnkd.in/guBuBVP)

[](https://lnkd.in/guBuBVP) [## åˆ›å»ºä¸€ä¸ª Redux (Hello World)

### åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†å±•ç¤ºå¦‚ä½•åˆ›å»ºä¸€ä¸ª Redux Hello Worldï¼Œå¹¶åœ¨æ·»åŠ  Redux ä»¥ä½œå‡ºååº”ä¹‹å‰è§£é‡Šå®ƒæ˜¯å¦‚ä½•å·¥ä½œã€‚åœ¨â€¦

lnkd.in](https://lnkd.in/guBuBVP) 

2.ã€https://lnkd.in/gDWG7ACã€‘åˆ›å»º React åŸç”Ÿ App [æ­¤å¤„](https://www.linkedin.com/pulse/create-react-native-base-project-run-rany-elhousieny-phd%25E1%25B4%25AC%25E1%25B4%25AE%25E1%25B4%25B0/?trackingId=fVq%2FbGEzug0okFdN6aGbPQ%3D%3D)

[](https://lnkd.in/gDWG7AC) [## åˆ›å»ºä¸€ä¸ª react æœ¬æœºåŸºç¡€é¡¹ç›®å¹¶è¿è¡Œ

### æœ¬æ–‡æ˜¯ https://lnkd.in/guBuBVPğ‘ªğ’“ğ’†ğ’‚ğ’•ğ’†ğ’‚ğ‘¹ğ’†ğ’…ğ’–ğ’™(ğ‘¯ğ’†ğ’ğ’ğ’ğ‘¾ğ’ğ’“ğ’ğ’…): 2ã€‚

lnkd.in](https://lnkd.in/gDWG7AC) 

3.redux with React Native:1-è¯»å–çŠ¶æ€:

[](https://www.linkedin.com/pulse/redux-react-native-rany-elhousieny-phd%E1%B4%AC%E1%B4%AE%E1%B4%B0/) [## redux with React Native:1-è¯»å–çŠ¶æ€

### è¿™ç¯‡æ–‡ç« æ˜¯ https://lnkd.in/guBuBVPğ‘ªğ’“ğ’†ğ’‚ğ’•ğ’†ğ’‚ğ‘¹ğ’†ğ’…ğ’–ğ’™(ğ‘¯ğ’†ğ’ğ’ğ’ğ‘¾ğ’ğ’“ğ’ğ’…): 2ã€‚

www.linkedin.com](https://www.linkedin.com/pulse/redux-react-native-rany-elhousieny-phd%E1%B4%AC%E1%B4%AE%E1%B4%B0/) 

4.[Redux with React Native:2-æ›´æ–°çŠ¶æ€](https://www.linkedin.com/pulse/redux-react-native-2-updating-state-rany-elhousieny-phd%E1%B4%AC%E1%B4%AE%E1%B4%B0/?published=t)[https://lnkd.in/gPcUcMx](https://lnkd.in/gPcUcMx)

[](https://lnkd.in/gPcUcMx) [## redux with React Native:2-æ›´æ–°çŠ¶æ€

### æœ¬æ–‡æ˜¯ https://lnkd.in/guBuBVPğ‘ªğ’“ğ’†ğ’‚ğ’•ğ’†ğ’‚ğ‘¹ğ’†ğ’…ğ’–ğ’™(ğ‘¯ğ’†ğ’ğ’ğ’ğ‘¾ğ’ğ’“ğ’ğ’…): 2ã€‚

lnkd.in](https://lnkd.in/gPcUcMx) 

5.[äº†è§£ Redux ä¸­çš„ä¸­é—´ä»¶:](https://lnkd.in/g5tVFn8)[https://lnkd.in/g5tVFn8](https://lnkd.in/g5tVFn8)

[](https://lnkd.in/g5tVFn8) [## äº†è§£ Redux ä¸­çš„ä¸­é—´ä»¶

### åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†è§£é‡Šâ€œä¸­é—´ä»¶â€çš„æ¦‚å¿µ

lnkd.in](https://lnkd.in/g5tVFn8) 

6.äº†è§£ REST[å¯é€‰]

[6ã€‚ä½¿ç”¨ Json-Server åˆ›å»ºä¸€ä¸ªæ¨¡æ‹Ÿ REST ç«¯ç‚¹ï¼Œç”¨äºæµ‹è¯• https://www . LinkedIn . com/pulse/creating-Mock-REST-Server-testing-using-Json-Server-rany/](http://creating%20a%20mock%20rest%20endpoint%20using%20json-server%2C%20for%20testing/)

[](https://lnkd.in/g_Riw2h) [## ä½¿ç”¨ Json-Server åˆ›å»ºä¸€ä¸ªæ¨¡æ‹Ÿ REST ç«¯ç‚¹ï¼Œç”¨äºæµ‹è¯•

### å½“æˆ‘ä»¬å¼€å‘å‰ç«¯æ—¶ï¼Œæˆ‘ä»¬æœ‰æ—¶æƒ³å°è¯•ä¸€äº›æ¦‚å¿µï¼Œè€Œä¸æ˜¯æ„å»ºä¸€ä¸ªå®Œæ•´çš„åç«¯ã€‚JSON-æœåŠ¡å™¨â€¦

lnkd.in](https://lnkd.in/g_Riw2h) 

# 7.[æœ¬æ–‡:åœ¨ React åŸç”Ÿ App ä¸­ä½¿ç”¨ Redux-Thunk è·å–æ•°æ®](https://www.linkedin.com/pulse/fetch-data-redux-thunk-react-native-app-rany-elhousieny-phd%25E1%25B4%25AC%25E1%25B4%25AE%25E1%25B4%25B0/?trackingId=IByiw0No1y9DS%2BlGk9KdTw%3D%3D)

[](https://lnkd.in/gVJspwG) [## åœ¨ React æœ¬åœ°åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ Redux-Thunk è·å–æ•°æ®

### åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†å¼€å§‹ä½¿ç”¨ä¸€ä¸ªåä¸º Thunk çš„ä¸­é—´ä»¶æ¥å¸®åŠ©æˆ‘ä»¬ä»æœåŠ¡å™¨å¼‚æ­¥è·å–æ•°æ®ã€‚è¿™ç¯‡æ–‡ç« æ˜¯â€¦

lnkd.in](https://lnkd.in/gVJspwG) 

è¯¥åº”ç”¨çš„æœ€ç»ˆä»£ç å¯ä»¥åœ¨[Github https://Github . com/ranyelhousieny/ReactNativeFoodApplication](https://github.com/ranyelhousieny/ReactNativeFoodApplication)ä¸­æ‰¾åˆ°

æ‚¨å¯ä»¥å…‹éš†å¹¶ä½¿ç”¨

```
git clone [https://github.com/ranyelhousieny/ReactNativeFoodApplication.git](https://github.com/ranyelhousieny/ReactNativeFoodApplication.git)
```

================================================================

1.å®‰è£… redux-thunk

```
npm install --save redux-thunk
```

# 2.å°†å…¶ä½œä¸ºä¸­é—´ä»¶æ·»åŠ åˆ°å•†åº—ä¸­

åœ¨ Redux/store.js ä¸­ï¼Œä» Redux å¯¼å…¥ applyMiddlewareï¼Œä» redux-thunk å¯¼å…¥ thunk

```
import { createStore, applyMiddleware } from 'redux';
import thunk from 'redux-thunk';
```

æ·»åŠ åˆ°å•†åº—

```
export const store = createStore( reducer, applyMiddleware(thunk) );
```

Thunk æ˜¯ä¸€ä¸ªä½äºåŠ¨ä½œå’Œç¼©å‡å™¨ä¹‹é—´çš„ä¸­é—´ä»¶ã€‚å®ƒæœ‰åŠ©äºä¸æœåŠ¡å™¨è¿›è¡Œå¼‚æ­¥é€šä¿¡ï¼Œä»¥æ¥æ”¶æ‰¿è¯ºå¹¶è¿”å›å¤šä¸ªç»“æœï¼Œç›´åˆ°ä»æœåŠ¡å™¨æ”¶åˆ°æœ€ç»ˆç»“æœã€‚(å¦‚å‰ä¸€ç¯‡æ–‡ç« [ä¸­æ‰€è§£é‡Šï¼Œç†è§£ Redux ä¸­çš„ä¸­é—´ä»¶:](https://lnkd.in/g5tVFn8)[https://lnkd.in/g5tVFn8](https://lnkd.in/g5tVFn8))

æ·»åŠ æ›¿ä»£æ–‡æœ¬

![](img/654d0ee3c2bb4e70fe4eb1ac8bab36af.png)

åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ä»æˆ‘ä»¬åœ¨ä¸‹é¢çš„æ–‡ç« [https://www . LinkedIn . com/pulse/creating-mock-REST-server-testing-using-JSON-server-rany/](https://www.linkedin.com/pulse/creating-mock-rest-server-testing-using-json-server-rany/)ä¸­æ„å»ºçš„æ¨¡æ‹Ÿ REST æœåŠ¡å™¨è·å–æ•°æ®ã€‚ç¡®ä¿éµå¾ªè¿™äº›æ­¥éª¤ï¼Œå¹¶è®©æ‚¨çš„æœåŠ¡å™¨åœ¨ç«¯å£ 5555 ä¸Šè¿è¡Œ

æ·»åŠ æ›¿ä»£æ–‡æœ¬

![](img/d049e844e5a04975fac0689d1e6450c6.png)

# è®©æˆ‘ä»¬ä¸ºåŠ¨ä½œåˆ›å»ºè€…æ·»åŠ  fetch å‘½ä»¤

```
// Action Creator
const addLastNameActionCreator = () => ( dispatch ) => {
    console.log( "[*** 2\. inside addLastNameActionCreator]" );
 // Case1: Think returns Loading until receives response
    dispatch( { type: "LOADING" } ); // Calling the server
    fetch( "http://localhost:5555/articles")
        // Case2 Thunk received response
        .then( response => response.json() )
        .then( responseJson => {
            console.log( "3\. received ", responseJson );
            dispatch( {
                type: "RECEIVED",
                payload: responseJson
            } );
        });
}
```

# æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ›´æ–°å‡é€Ÿå™¨:

```
// 1\. Create Base Reducer
export const reducer = ( state = "Rany", action ) => {
    console.log( '4\. [inside reducer], action = ', action );
    switch ( action.type ) {
        case 'LOADING':
            console.log( '5\. [inside reducer Loading]', action);
            return "Loading";
        case 'RECEIVING':
            console.log( '5\. [inside reducer RECEIVING]', action);
            return "Received";
        default:
            return state;
    }
}
```

æœ€ç»ˆè¿è¡Œå°†æ˜¾ç¤ºä»¥ä¸‹æ—¥å¿—:

æ·»åŠ æ›¿ä»£æ–‡æœ¬

![](img/8a21bc3d14520a8ea1dbd9c101febdcd.png)

æ·»åŠ æ›¿ä»£æ–‡æœ¬

![](img/411a6708633b7f7e0e9804f96d853d61.png)

è¯·æ³¨æ„æœåŠ¡å™¨æ—¥å¿—:

æ·»åŠ æ›¿ä»£æ–‡æœ¬

![](img/8ebeb650161c639106ee00e959703465.png)

=============================================================

åœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†ä»[https://fdc.nal.usda.gov/api-guide.html](https://fdc.nal.usda.gov/api-guide.html)API è·å–æ•°æ®ã€‚æ‚¨éœ€è¦æ³¨å†Œä»¥è·å¾— API å¯†é’¥ï¼Œä»¥ä¾¿èƒ½å¤Ÿåœ¨æœ¬ç»ƒä¹ ä¸­ä½¿ç”¨

ç½‘å€å°†ä¼šæ˜¯[https://api.nal.usda.gov/fdc/v1/foods/list?api_key=xxxx](https://api.nal.usda.gov/fdc/v1/foods/list?api_key=xxxx)

æ‚¨éœ€è¦åšçš„å°±æ˜¯åœ¨ fetch å‘½ä»¤ä¸­ç”¨è¿™ä¸ª url æ›¿æ¢æœ¬åœ° url(ç¡®ä¿æ·»åŠ æ‚¨çš„ API é”®

ä»¥ä¸‹æ˜¯æ§åˆ¶å°è¾“å‡º

æ·»åŠ æ›¿ä»£æ–‡æœ¬

![](img/bb07fd96713769e91fa69e1bf60c710b.png)

```
// Calling the server
    fetch( "https://api.nal.usda.gov/fdc/v1/foods/list?api_key=xxxx
```

æ·»åŠ æ›¿ä»£æ–‡æœ¬

![](img/85b9d0f995778fc0dfec005a19755008.png)[](https://www.linkedin.com/in/ranyelhousieny/) [## å…°å°¼Â·åŸƒå°”è±ªæ–¯å°¼ï¼ŒPhDá´¬á´®á´° -è½¯ä»¶å·¥ç¨‹é«˜çº§ç»ç†- Zulily | LinkedIn

### ğ™ˆğ™ğ™˜ğ™§ğ™¤ğ™¨ğ™šğ™§ğ™«ğ™ğ™˜ğ™šğ™¨è§£å†³æ–¹æ¡ˆæ¶æ„å¸ˆğ˜¼ğ™’ğ™ğ™ğ™¤ğ™¡ğ™ªğ™©ğ™ğ™¤ğ™£ğ™¨ğ˜¼ğ™§ğ™˜ğ™ğ™ğ™©ğ™šğ™˜ğ™©ğ˜¾ğ™šğ™§ğ™©ğ™ğ™›ğ™ğ™šğ™™â€¦

www.linkedin.com](https://www.linkedin.com/in/ranyelhousieny/) [](https://rany.elhousieny.com) [## å…°å°¼Â·åŸƒå°”è±ªæ–¯å°¼ç®€å†

### ä½¿ç”¨ MongoDBï¼ŒElastic Searchï¼ŒAWSï¼ŒReactï¼ŒCSS3ï¼Œhtml 5â€¦â€¦

rany.elhousieny.com](https://rany.elhousieny.com) [](https://rany.tk) [## å…°å°¼Â·åŸƒå°”è±ªæ–¯å°¼ç®€å†

### ä½¿ç”¨ MongoDBï¼ŒElastic Searchï¼ŒAWSï¼ŒReactï¼ŒCSS3ï¼Œhtml 5â€¦â€¦

rany.tk](https://rany.tk) 

ranyel.medium.com