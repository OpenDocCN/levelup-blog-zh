<html>
<head>
<title>From Monolith to Microservices in 5 Minutes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">5分钟内从整体服务到微服务</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/from-monolith-to-microservices-in-5-minutes-83069677d021?source=collection_archive---------5-----------------------#2020-11-17">https://levelup.gitconnected.com/from-monolith-to-microservices-in-5-minutes-83069677d021?source=collection_archive---------5-----------------------#2020-11-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="7075" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">软件架构和重构</h2><div class=""/><div class=""><h2 id="3d5c" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">“微服务架构风格是一种将单个应用程序开发为一套小型服务的方法。”——马丁·福勒。</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/b1f8cdef906200763fb4b90dafed9211.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*prvtMgGd36b-smjFPbAcLQ.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">整体架构与微服务架构</figcaption></figure><p id="8a9b" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">首先，我们将了解什么是整体架构。因此，我将向您展示如何修改它的域，以便为微服务架构做好准备。最后简单给大家讲一下微服务架构的基础，判断一下它的优劣。</p><h1 id="a35d" class="md me it bd mf mg mh mi mj mk ml mm mn ki mo kj mp kl mq km mr ko ms kp mt mu bi translated">整体建筑</h1><p id="c866" class="pw-post-body-paragraph lh li it lj b lk mv kd lm ln mw kg lp lq mx ls lt lu my lw lx ly mz ma mb mc im bi translated">整体架构是每一个非垂直分割的架构。软件设计中的垂直划分意味着将应用程序分割成更多可部署的单元。这并不意味着monolith不能<a class="ae na" rel="noopener ugc nofollow" target="_blank" href="/layers-in-software-architecture-that-every-sofware-architect-should-know-76b2452b9d9a">水平分层</a>。</p><p id="fcd0" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">形容词<strong class="lj jd">单片</strong>指的是软件的架构由一个后端单元组成。我说后端是因为我相信monolith可以像web和mobile一样拥有不止一个UI，并且仍然保持monolith。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/17b6c6818f2becc972f73feb91f06245.png" data-original-src="https://miro.medium.com/v2/resize:fit:682/format:webp/1*ypN7hg56LlEkL8mXwwG7_g.png"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">整体建筑</figcaption></figure><p id="bd4d" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">组件之间的通信主要是通过方法调用进行的。如果你的前端和后端在物理上被分成，比如说，API和web客户端，那么它仍然是一个整体。</p><p id="6028" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">直到你把后端分成更多的部署单元，在我眼里你还是在用单体架构。</p></div><div class="ab cl nc nd hx ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="im in io ip iq"><h1 id="adb4" class="md me it bd mf mg nj mi mj mk nk mm mn ki nl kj mp kl nm km mr ko nn kp mt mu bi translated">单域模型</h1><blockquote class="no np nq"><p id="2da2" class="lh li nr lj b lk ll kd lm ln lo kg lp ns lr ls lt nt lv lw lx nu lz ma mb mc im bi translated">“领域是计算机程序的目标主题区域。从形式上来说，它代表了特定编程项目的目标主题。—维基百科</p></blockquote><p id="ec0d" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">用我的话来说，领域是软件存在和存在的原因。我在<a class="ae na" rel="noopener ugc nofollow" target="_blank" href="/3-domain-centric-architectures-every-software-developer-should-know-a15727ada79f"> 3每个软件开发人员都应该知道的以领域为中心的架构</a>一文中写了更多关于领域的内容。</p><p id="5ebd" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">这是一个可视化的部分从网上商店的领域。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nv"><img src="../Images/bd5c99023948f76255dd097c99807f31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4V6XEE4UXoADirlpZwNbvQ.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">单域模型</figcaption></figure><p id="02f8" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">销售和目录子域包含单个<strong class="lj jd">产品</strong>实体。这就导致一个地方顾虑多，总是不好。这违反了<a class="ae na" href="https://en.wikipedia.org/wiki/Separation_of_concerns" rel="noopener ugc nofollow" target="_blank">关注点分离原则</a>。</p><p id="9e52" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">强迫一个实体考虑更多的问题感觉不对。实体在两种上下文中都包含未使用的属性。销售人员不需要知道产品的类别，目录对于产品如何交付给客户的信息没有任何用处。</p><p id="2a81" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">为了避免这个问题，我们需要找到销售和目录上下文的边界来将它们分开。这将我们引向一个有界的上下文。</p></div><div class="ab cl nc nd hx ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="im in io ip iq"><h1 id="2c51" class="md me it bd mf mg nj mi mj mk nk mm mn ki nl kj mp kl nm km mr ko nn kp mt mu bi translated">限界上下文</h1><blockquote class="no np nq"><p id="9278" class="lh li nr lj b lk ll kd lm ln lo kg lp ns lr ls lt nt lv lw lx nu lz ma mb mc im bi translated">有界上下文是上下文的边界或周界。—<a class="ae na" href="https://ldapwiki.com/wiki/Bounded%20Context" rel="noopener ugc nofollow" target="_blank">Idapwiki.com</a></p></blockquote><p id="83ad" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">为了指定有界的上下文，我们需要识别模型仍然有效的上下文范围。</p><p id="14f9" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">我们可以通过在领域的每个实体中问一个简单的问题来验证这个模型。<strong class="lj jd">这个实体在哪个上下文中有效？</strong></p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nw"><img src="../Images/c253c0e0f1bb1bbf8e7aa3eedbe789a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_n14MElHRUXeDkhTyW_ytA.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">指定实体上下文</figcaption></figure><p id="2e9f" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">当一个实体对多个上下文有效时，它被分成多个上下文。每个都具有与上下文相对应的属性。在这个过程之后，您的应用就可以用于<strong class="lj jd">微服务架构</strong>了。</p><p id="0050" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">这是一个可视化的部分撕裂从网上商店的领域与分裂的产品实体。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nx"><img src="../Images/e1e2574fa6ffeae3a1c9a7dcea644743.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-DKOV0a4q4Cy9ZcuNBfNmg.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">多领域模型</figcaption></figure></div><div class="ab cl nc nd hx ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="im in io ip iq"><h1 id="fcd1" class="md me it bd mf mg nj mi mj mk nk mm mn ki nl kj mp kl nm km mr ko nn kp mt mu bi translated">微服务架构</h1><p id="c1b8" class="pw-post-body-paragraph lh li it lj b lk mv kd lm ln mw kg lp lq mx ls lt lu my lw lx ly mz ma mb mc im bi translated">微服务架构也称为微服务。这是细分的整体。微服务将大型系统分成较小的部分。</p><p id="cbcb" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">有界上下文帮助我们找到一个微服务的最佳规模。微服务应该有一个足够小的模型来最大限度地减少与外部世界的通信，并且由于存在的原因而足够大。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ny"><img src="../Images/25d43cc4e4ed2eb2467cddbe1bf33331.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N4hWH5yRLsrsv0cI703mGQ.png"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">微服务</figcaption></figure><p id="840f" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">微服务架构提供了独立性的力量。该架构支持分离的开发团队、不同的操作系统、不同的编程语言以及不同的业务层架构，如<a class="ae na" rel="noopener ugc nofollow" target="_blank" href="/3-cqrs-architectures-that-every-software-architect-should-know-a7f69aae8b6c"> CQRS </a>。</p><p id="ebfb" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">每个微服务都有其明确定义的接口，大部分是通过restful API由JSON over HTTP实现的。微服务之间通信的推荐解决方案是通过消息平台，如<a class="ae na" href="https://www.rabbitmq.com/" rel="noopener ugc nofollow" target="_blank"> RabitMQ </a>或<a class="ae na" href="https://azure.microsoft.com/cs-cz/services/service-bus/" rel="noopener ugc nofollow" target="_blank"> Azure Service Bus </a>。</p><p id="d561" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">如果没有合适的消息传递工具，微服务必须知道其他微服务的位置，并且位置很容易改变。</p></div><div class="ab cl nc nd hx ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="im in io ip iq"><h1 id="467a" class="md me it bd mf mg nj mi mj mk nk mm mn ki nl kj mp kl nm km mr ko nn kp mt mu bi translated">摘要</h1><p id="4d32" class="pw-post-body-paragraph lh li it lj b lk mv kd lm ln mw kg lp lq mx ls lt lu my lw lx ly mz ma mb mc im bi translated">微服务架构开发的成本曲线在大型应用中被夸大了。小型应用无法从微服务中受益，应该保持整体性。</p><p id="a7eb" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">微服务带来了分布式系统成本，如负载平衡和网络延迟。这种担忧可以通过像Kubernetes或Azure Service Fabric这样的组织者很好地解决。</p><p id="fa6a" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">下一步，我会推荐Mark Heath的<a class="ae na" href="https://app.pluralsight.com/library/courses/microservices-fundamentals/table-of-contents" rel="noopener ugc nofollow" target="_blank"> Pluralsight课程——微服务基础</a>。</p><p id="861f" class="pw-post-body-paragraph lh li it lj b lk ll kd lm ln lo kg lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">如果你喜欢这篇文章，给它几个掌声。谢谢你的时间。</p></div><div class="ab cl nc nd hx ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="im in io ip iq"><h1 id="c238" class="md me it bd mf mg nj mi mj mk nk mm mn ki nl kj mp kl nm km mr ko nn kp mt mu bi translated">来源</h1><ul class=""><li id="13db" class="nz oa it lj b lk mv ln mw lq ob lu oc ly od mc oe of og oh bi translated"><a class="ae na" href="https://martinfowler.com/microservices/" rel="noopener ugc nofollow" target="_blank">马丁·福勒关于微服务的博客文章。</a></li><li id="9728" class="nz oa it lj b lk oi ln oj lq ok lu ol ly om mc oe of og oh bi translated"><a class="ae na" href="https://martinfowler.com/bliki/BoundedContext.html" rel="noopener ugc nofollow" target="_blank">马丁·福勒关于有界语境的博客文章。</a></li><li id="f25e" class="nz oa it lj b lk oi ln oj lq ok lu ol ly om mc oe of og oh bi translated"><a class="ae na" href="https://app.pluralsight.com/library/courses/clean-architecture-patterns-practices-principles/table-of-contents" rel="noopener ugc nofollow" target="_blank"> Pluralsight课程清洁架构模式、实践和原则</a>。</li></ul></div><div class="ab cl nc nd hx ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="im in io ip iq"><h1 id="8597" class="md me it bd mf mg nj mi mj mk nk mm mn ki nl kj mp kl nm km mr ko nn kp mt mu bi translated">进一步阅读</h1><div class="on oo gp gr op oq"><a rel="noopener  ugc nofollow" target="_blank" href="/let-me-hear-you-screaming-architecture-3adcc02f2ca3"><div class="or ab fo"><div class="os ab ot cl cj ou"><h2 class="bd jd gy z fp ov fr fs ow fu fw jc bi translated">文件夹和尖叫建筑的功能组织</h2><div class="ox l"><h3 class="bd b gy z fp ov fr fs ow fu fw dk translated">架构应该表达系统的意图——鲍勃叔叔</h3></div><div class="oy l"><p class="bd b dl z fp ov fr fs ow fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="oz l"><div class="pa l pb pc pd oz pe lb oq"/></div></div></a></div><div class="on oo gp gr op oq"><a rel="noopener  ugc nofollow" target="_blank" href="/layers-in-software-architecture-that-every-sofware-architect-should-know-76b2452b9d9a"><div class="or ab fo"><div class="os ab ot cl cj ou"><h2 class="bd jd gy z fp ov fr fs ow fu fw jc bi translated">每个软件架构师都应该知道的软件体系结构的层次</h2><div class="ox l"><h3 class="bd b gy z fp ov fr fs ow fu fw dk translated">“所有的架构都有相同的目标——关注点的分离。都是通过分软件来实现的…</h3></div><div class="oy l"><p class="bd b dl z fp ov fr fs ow fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="oz l"><div class="pf l pb pc pd oz pe lb oq"/></div></div></a></div><div class="on oo gp gr op oq"><a rel="noopener  ugc nofollow" target="_blank" href="/3-cqrs-architectures-that-every-software-architect-should-know-a7f69aae8b6c"><div class="or ab fo"><div class="os ab ot cl cj ou"><h2 class="bd jd gy z fp ov fr fs ow fu fw jc bi translated">每个软件架构师都应该知道的3个CQRS架构</h2><div class="ox l"><h3 class="bd b gy z fp ov fr fs ow fu fw dk translated">关注点分离是一种有效整理一个人思想的技术。如果你能集中一个人的注意力就最好了…</h3></div><div class="oy l"><p class="bd b dl z fp ov fr fs ow fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="oz l"><div class="pg l pb pc pd oz pe lb oq"/></div></div></a></div><div class="on oo gp gr op oq"><a rel="noopener  ugc nofollow" target="_blank" href="/3-domain-centric-architectures-every-software-developer-should-know-a15727ada79f"><div class="or ab fo"><div class="os ab ot cl cj ou"><h2 class="bd jd gy z fp ov fr fs ow fu fw jc bi translated">每个软件开发人员都应该知道的3个以领域为中心的架构</h2><div class="ox l"><h3 class="bd b gy z fp ov fr fs ow fu fw dk translated">建筑师首先关心的是确保房子是可用的。并不是要保证房子造出来…</h3></div><div class="oy l"><p class="bd b dl z fp ov fr fs ow fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="oz l"><div class="ph l pb pc pd oz pe lb oq"/></div></div></a></div><div class="on oo gp gr op oq"><a rel="noopener  ugc nofollow" target="_blank" href="/how-to-rewrite-your-code-to-achieve-more-flexible-design-3c86dad822e"><div class="or ab fo"><div class="os ab ot cl cj ou"><h2 class="bd jd gy z fp ov fr fs ow fu fw jc bi translated">如何重写代码以实现更灵活的设计</h2><div class="ox l"><h3 class="bd b gy z fp ov fr fs ow fu fw dk translated">《终极指南》举例说明了如何使用单一责任来划分类别和分离问题…</h3></div><div class="oy l"><p class="bd b dl z fp ov fr fs ow fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="oz l"><div class="pi l pb pc pd oz pe lb oq"/></div></div></a></div></div><div class="ab cl nc nd hx ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="im in io ip iq"><div class="ks kt ku kv gt oq"><a href="https://www.danielrusnok.com/daniel-rusnoks-newsletter" rel="noopener  ugc nofollow" target="_blank"><div class="or ab fo"><div class="os ab ot cl cj ou"><h2 class="bd jd gy z fp ov fr fs ow fu fw jc bi translated">丹尼尔·鲁斯诺克的时事通讯</h2><div class="ox l"><h3 class="bd b gy z fp ov fr fs ow fu fw dk translated">每个月我都会给你发一封邮件，列出我的最新文章。当然，这将是友好的联系…</h3></div><div class="oy l"><p class="bd b dl z fp ov fr fs ow fu fw dk translated">www.danielrusnok.com</p></div></div><div class="oz l"><div class="pj l pb pc pd oz pe lb oq"/></div></div></a></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><a href="https://www.buymeacoffee.com/danielrusnok"><div class="gh gi pk"><img src="../Images/88f0e07ab6797fc4fcd13ed7410af039.png" data-original-src="https://miro.medium.com/v2/resize:fit:400/format:webp/1*yzOQeIJSJCaRDN_oP5OidA.png"/></div></a></figure><figure class="ks kt ku kv gt kw gh gi paragraph-image"><a href="https://itixo.com"><div class="gh gi pl"><img src="../Images/f3d94d9b86b4ee7080bab6d72172b50a.png" data-original-src="https://miro.medium.com/v2/resize:fit:180/format:webp/1*mLQH7u1-b2HPVcLURnQ9NQ.png"/></div></a></figure></div></div>    
</body>
</html>