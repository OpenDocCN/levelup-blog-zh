<html>
<head>
<title>Programmatic UI: Discord</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">程序化用户界面:不和谐</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/programmatic-ui-discord-de1e59b3c2be?source=collection_archive---------7-----------------------#2020-08-19">https://levelup.gitconnected.com/programmatic-ui-discord-de1e59b3c2be?source=collection_archive---------7-----------------------#2020-08-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/1e380d6b0cab11fbcc047fcd018e77c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HW3-qVekRkqNRoDg603qFA.jpeg"/></div></div></figure><p id="7da1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我一直在练习编程UI约束，并决定通过从头构建一些熟悉的东西来测试我当前的能力。<br/>两杯咖啡后，我登陆了iOS Discord应用。</p><p id="bb1c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">完整的项目源代码可以在我的<a class="ae kw" href="https://github.com/leoidiaz" rel="noopener ugc nofollow" target="_blank"> github </a>上找到</p><h1 id="27d6" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">故障</h1><p id="f32b" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">Discord的消息传递屏幕可以分为三个部分。</p><figure class="mb mc md me gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ma"><img src="../Images/d0c9fbbccfaa3e4b75f35f62d03e7e0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-B2m8nJ0eScAcrIMz-GVsQ.png"/></div></div></figure><h2 id="3762" class="mf ky iq bd kz mg mh dn ld mi mj dp lh kj mk ml ll kn mm mn lp kr mo mp lt mq bi translated">1 .顶视图</h2><p id="382d" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">包含状态栏和一行自定义按钮。</p><figure class="mb mc md me gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ma"><img src="../Images/c1df1064e255cd13638815a258285204.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5yUvv0n7fK8hYJ8lWu_GwA.png"/></div></div></figure><h2 id="e749" class="mf ky iq bd kz mg mh dn ld mi mj dp lh kj mk ml ll kn mm mn lp kr mo mp lt mq bi translated">2.表格视图</h2><p id="6c4e" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">屏幕的主要组成部分。带有自定义单元格的UITableView。</p><figure class="mb mc md me gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ma"><img src="../Images/9ec84c112b139d3b194c7ef230efb1e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FAifgfd8h5jGeOquSYfvPA.png"/></div></div></figure><h2 id="ef80" class="mf ky iq bd kz mg mh dn ld mi mj dp lh kj mk ml ll kn mm mn lp kr mo mp lt mq bi translated">3.仰视图</h2><p id="04b3" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">包含两个自定义按钮和一个内部带有按钮的UITextField。</p><h1 id="325a" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">最初的想法</h1><p id="8d78" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">屏幕上最大的一块是桌面视图，所以这一块正好放在中间。剩下顶部和底部。顶视图是一个导航控制器，底视图是一个自定义视图，限制在表视图底部和超级视图底部之间。</p><h1 id="f34b" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">顶视图</h1><p id="5e12" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">以编程方式在导航控制器中嵌入ViewController可以在场景委托中轻松完成。</p><figure class="mb mc md me gt jr"><div class="bz fp l di"><div class="mr ms l"/></div><figcaption class="mt mu gj gh gi mv mw bd b be z dk translated">SceneDelegate.swift</figcaption></figure><p id="412f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在顶视图上创建按钮行现在只需要工具栏按钮属性和设置。</p><p id="2edb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">初始化通用UIBarButtonItems和一个分隔符。</p><figure class="mb mc md me gt jr"><div class="bz fp l di"><div class="mr ms l"/></div><figcaption class="mt mu gj gh gi mv mw bd b be z dk translated">ViewController.swift</figcaption></figure><p id="3de4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">设置属性并将按钮放置在右栏侧和左栏侧。</p><figure class="mb mc md me gt jr"><div class="bz fp l di"><div class="mr ms l"/></div><figcaption class="mt mu gj gh gi mv mw bd b be z dk translated">ViewController.swift</figcaption></figure><p id="f47c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> # <em class="mx">通用</em> </strong>按钮制作独特，因为它包含图像和文本。我通过将标签和图像制作成一个单独的视图，合并组件，然后将视图添加到工具栏按钮项中来解决这个问题。</p><figure class="mb mc md me gt jr"><div class="bz fp l di"><div class="mr ms l"/></div><figcaption class="mt mu gj gh gi mv mw bd b be z dk translated">HashTagChatView.swift</figcaption></figure><h1 id="f5cd" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">表格视图</h1><p id="fc8f" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">初始化tableview，符合UITableViewdelegate和Datasource，并配置tableview。<br/><em class="mx">ui TableView . automatic dimension</em>和<em class="mx"> keyboardDismissMode </em>是<strong class="ka ir">消息样式table view的必备</strong>。</p><figure class="mb mc md me gt jr"><div class="bz fp l di"><div class="mr ms l"/></div><figcaption class="mt mu gj gh gi mv mw bd b be z dk translated">ViewController.swift</figcaption></figure><h1 id="972b" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">仰视图</h1><p id="19df" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">有趣的部分。这里的一切都是定制的。</p><figure class="mb mc md me gt jr"><div class="bz fp l di"><div class="mr ms l"/></div><figcaption class="mt mu gj gh gi mv mw bd b be z dk translated">BottomBarView.swift</figcaption></figure><h2 id="903e" class="mf ky iq bd kz mg mh dn ld mi mj dp lh kj mk ml ll kn mm mn lp kr mo mp lt mq bi translated">自动布局</h2><p id="5c8b" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">Autolayout是编程UI的一个重要方面，需要反复练习才能弄清楚。试错是应该走的路。<br/>帮助我学习自动布局的三个步骤:</p><ol class=""><li id="68f7" class="my mz iq ka b kb kc kf kg kj na kn nb kr nc kv nd ne nf ng bi translated">要使用自动布局，我们首先必须禁用自动调整大小:</li></ol><pre class="mb mc md me gt nh ni nj nk aw nl bi"><span id="1659" class="mf ky iq ni b gy nm nn l no np">messageField.translatesAutoresizingMaskIntoConstraints = false</span></pre><p id="e4a5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">2.将新的初始化视图添加到超级视图中</p><pre class="mb mc md me gt nh ni nj nk aw nl bi"><span id="daee" class="mf ky iq ni b gy nm nn l no np">addSubView(messageField)</span></pre><p id="31c0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">3.最后，您必须激活约束。你可以一个接一个地做，也可以像这样一次做完</p><pre class="mb mc md me gt nh ni nj nk aw nl bi"><span id="27ee" class="mf ky iq ni b gy nm nn l no np">NSLayoutConstraint.activate([<br/>messageField.topAnchor.constraint(equalTo: topAnchor, constant: 16),<br/>])</span></pre><p id="28b1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">一起</p><figure class="mb mc md me gt jr"><div class="bz fp l di"><div class="mr ms l"/></div><figcaption class="mt mu gj gh gi mv mw bd b be z dk translated">BottomBarView.swift</figcaption></figure><h2 id="2b02" class="mf ky iq bd kz mg mh dn ld mi mj dp lh kj mk ml ll kn mm mn lp kr mo mp lt mq bi translated">通知中心</h2><figure class="mb mc md me gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/868c2408682d199af39fa7341eeac19b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Vx4ZwokEnXhomz-cRlhxMg.jpeg"/></div></div></figure><p id="fb1b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我为了好玩而添加的一个附加组件是能够在textField上使用键盘。文本字段一直在底部，所以调出键盘会完全覆盖它…除非你把屏幕上移！</p><p id="1492" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">有几个第三方库可以做到这一点。然而，我决定用通知中心手动实现它。第二杯咖啡仍然有效。☕️)</p><p id="2b4a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae kw" href="https://www.hackingwithswift.com/read/19/7/fixing-the-keyboard-notificationcenter" rel="noopener ugc nofollow" target="_blank"> Hacking With Swift </a>有一篇精彩的文章详细介绍了这一点。</p><figure class="mb mc md me gt jr"><div class="bz fp l di"><div class="mr ms l"/></div><figcaption class="mt mu gj gh gi mv mw bd b be z dk translated">ViewController.swift</figcaption></figure><h1 id="c1c0" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">最终注释</h1><figure class="mb mc md me gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/60cb2387ab887a17fe636f1da585fed9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GCQcUzJB8T7DHzU-6_hMkw.jpeg"/></div></div></figure><p id="a616" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这是我构建这个UI的思维过程和执行的概述。<br/>我在这篇文章中只提到了关键点，所以请随意阅读源代码或克隆它。<br/>图标资产包含在项目中，由<a class="ae kw" href="https://material.io/resources/icons/?style=baseline" rel="noopener ugc nofollow" target="_blank">材料设计</a>和<a class="ae kw" href="https://developer.apple.com/sf-symbols/" rel="noopener ugc nofollow" target="_blank"> SF符号</a>提供</p><p id="166e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae kw" href="https://twitter.com/leoidiaz" rel="noopener ugc nofollow" target="_blank">推特</a></p><div class="nq nr gp gr ns nt"><a href="https://github.com/leoidiaz/DiscordUI" rel="noopener  ugc nofollow" target="_blank"><div class="nu ab fo"><div class="nv ab nw cl cj nx"><h2 class="bd ir gy z fp ny fr fs nz fu fw ip bi translated">莱奥迪亚兹/迪索杜伊</h2><div class="oa l"><h3 class="bd b gy z fp ny fr fs nz fu fw dk translated">解散GitHub是超过5000万开发者的家园，他们一起工作来托管和审查代码，管理项目，以及…</h3></div><div class="ob l"><p class="bd b dl z fp ny fr fs nz fu fw dk translated">github.com</p></div></div><div class="oc l"><div class="od l oe of og oc oh jw nt"/></div></div></a></div></div><div class="ab cl oi oj hu ok" role="separator"><span class="ol bw bk om on oo"/><span class="ol bw bk om on oo"/><span class="ol bw bk om on"/></div><div class="ij ik il im in"><h1 id="12b8" class="kx ky iq bd kz la op lc ld le oq lg lh li or lk ll lm os lo lp lq ot ls lt lu bi translated">分级编码</h1><p id="7200" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">感谢您成为我们社区的一员！<a class="ae kw" href="https://www.youtube.com/channel/UC3v9kBR_ab4UHXXdknz8Fbg?sub_confirmation=1" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir">订阅我们的YouTube频道</strong> </a>或者加入<a class="ae kw" href="https://skilled.dev/" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir"> Skilled.dev编码面试课程</strong> </a>。</p><div class="nq nr gp gr ns nt"><a href="https://skilled.dev" rel="noopener  ugc nofollow" target="_blank"><div class="nu ab fo"><div class="nv ab nw cl cj nx"><h2 class="bd ir gy z fp ny fr fs nz fu fw ip bi translated">编写面试问题</h2><div class="oa l"><h3 class="bd b gy z fp ny fr fs nz fu fw dk translated">掌握编码面试的过程</h3></div><div class="ob l"><p class="bd b dl z fp ny fr fs nz fu fw dk translated">技术开发</p></div></div><div class="oc l"><div class="ou l oe of og oc oh jw nt"/></div></div></a></div></div></div>    
</body>
</html>