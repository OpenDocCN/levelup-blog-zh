# 在 Swift 中使用分离问题的协议

> 原文：<https://levelup.gitconnected.com/using-protocols-for-separation-of-concerns-in-swift-54c3c00d6bf5>

![](img/bac8e6013e8fa820ca990d3bbda5913e.png)

西蒙·瑞在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄的照片

**当你想创建一个可维护的代码库时，关注点分离**是一个非常重要的原则。在较低的层面上，它可以与来自**固体**缩写的**单一责任原则(SRP)** 紧密相关。

# 定义

**关注点分离(SoC)** —是一个设计原则，告诉我们将一个程序分成不同的部分，每个部分负责一个单独的关注点。一个关注点是一组逻辑，或者影响所述问题领域的信息。使用 **SoC** 的程序可以被认为是模块化的，当关注领域内的逻辑被良好定义的抽象封装时，就实现了模块化。([http://en.wikipedia.org/wiki/Separation_of_concerns](http://en.wikipedia.org/wiki/Separation_of_concerns))

**单一责任原则(SRP)** —是**固体**首字母缩略词的一部分，声明每个类、模块或函数都应该对所讨论的功能的单一部分负责。这种责任应该由这个类来完成。([http://en . Wikipedia . org/wiki/Single _ respons ibility _ principle](http://en.wikipedia.org/wiki/Single_responsibility_principle)

# 为什么重要？

> “[关注点分离]，即使不完全可能，也是我所知道的唯一有效整理一个人思想的技术。”埃德格·w·迪杰斯特拉

正如 Dijkstra 所说，它是代码组织、可读性的关键元素，从架构的角度来看，它是构建分层应用的关键概念。除了分离模块之间的逻辑，关注点的分离允许开发人员以模块化的方式创建特性和组件，并将它们作为插件使用。

主要思想是应该避免在设计或代码中混合关注点。例如，表示层不应该关心如何接收数据来呈现，而应该关心如何格式化这些数据。

# 敬代码！

让我们假设您需要基于[观察者](https://en.wikipedia.org/wiki/Observer_pattern)模式创建一个事件分派工具。

它的职责是发送和接收事件，所以实现可能是这样的:

但是让我们想一想…

所有处理事件的组件都需要发送和接收事件吗？

不。有些人关心的是**观察**他们，有些人关心的是**派遣**，但是当然，有些人需要两者都做。

Swift 可以使用**协议**和**协议组合**帮助我们更好地分离这一点。让我们重写之前的代码:

# 使用

让我们假设我们有之前讨论过的那三个人:一个需要**观察**，一个需要**分派**事件，另一个需要两者都做。

# 结论

上面的技术在创建你的 API 的时候非常有用。不要创建包含所有需要公开的方法的大协议，可以创建包含更多定义的上下文和职责的小协议。

这种方法可以使您的代码更加简洁易读。通过保持你的界面简单，只关注它真正需要的，你可能会得到一个更易测试和维护的系统。