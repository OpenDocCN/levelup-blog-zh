<html>
<head>
<title>Why Testing Your Code Is Important</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么测试代码很重要</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/why-testing-your-code-is-important-5c13e43a0a6b?source=collection_archive---------7-----------------------#2022-05-12">https://levelup.gitconnected.com/why-testing-your-code-is-important-5c13e43a0a6b?source=collection_archive---------7-----------------------#2022-05-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="cf5c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">测试您的代码是软件开发过程的重要部分。它是你如何确认你的代码如你所愿的那样运行。它还允许您在bug有机会在生产中造成问题之前，尽早发现并修复它们。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/e80b99eca316e6fc4526d2772cc6b1ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9gGwefeCeP5svsatPoHh5w.png"/></div></div></figure><p id="de3d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这篇文章中，我们将回顾为什么测试你的代码是重要的。测试代码有许多不同的方法，我们将讨论最重要的方法——单元测试。</p><h1 id="8491" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">总是测试你的代码</h1><p id="8072" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">在我们讨论<em class="ma">为什么是</em>之前，让我们先讨论一下<em class="ma">是什么</em>。什么是代码测试？<strong class="jp ir">确保你的代码按照你想要的方式运行</strong>。就这么简单。</p><p id="7ac6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，你为什么要测试你的代码呢？假设你有一个只有一个模块的程序。它只对一件事负责。测试它可能看起来有点矫枉过正(但是我建议总是测试您的代码)。现在想象你的程序有五个模块，它们做不同的事情。此外，模块之间可以相互通信。你的程序现在有许多可能的状态，手动测试所有的状态会占用你很多宝贵的时间。</p><p id="de79" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">相反，您应该编写测试来确认行为！通过测试你的代码，当你添加新的代码时，你也可以保护自己不被破坏。你想写高质量的代码，对吗？不测试是不可能的。</p><h1 id="42c4" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">单元测试您的代码</h1><p id="15da" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">您可以对代码运行各种类型的测试，但单元测试是最重要的。它们允许您单独测试单个代码单元。</p><p id="9d8f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们来看看这个JavaScript函数。</p><pre class="km kn ko kp gt mb mc md me aw mf bi"><span id="d8fb" class="mg ky iq mc b gy mh mi l mj mk">const incrementByOne = input =&gt; {<br/>  if (input &lt; 0) {<br/>    return 0;<br/>  }</span><span id="4b7e" class="mg ky iq mc b gy ml mi l mj mk">  return input + 1;<br/>};</span></pre><p id="6086" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在让我们写一些测试。我喜欢从测试“快乐之路”开始。</p><pre class="km kn ko kp gt mb mc md me aw mf bi"><span id="4a8c" class="mg ky iq mc b gy mh mi l mj mk">test('should increment by 1', () =&gt; {</span><span id="0d74" class="mg ky iq mc b gy ml mi l mj mk">  const input = 9;</span><span id="4372" class="mg ky iq mc b gy ml mi l mj mk">  const actual = incrementByOne(input);<br/>  const expected = 10;</span><span id="47d2" class="mg ky iq mc b gy ml mi l mj mk">  expect(actual).toBe(expected);<br/>});</span></pre><p id="cc09" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来是有趣的部分。边缘案例！</p><pre class="km kn ko kp gt mb mc md me aw mf bi"><span id="189e" class="mg ky iq mc b gy mh mi l mj mk">test('should return 0 when negative input', () =&gt; {</span><span id="c305" class="mg ky iq mc b gy ml mi l mj mk">  const input = -1;</span><span id="8a16" class="mg ky iq mc b gy ml mi l mj mk">  const actual = incrementByOne(input);<br/>  const expected = 0;</span><span id="2013" class="mg ky iq mc b gy ml mi l mj mk">  expect(actual).toBe(expected);<br/>});</span></pre><p id="ca7f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们现在已经测试了所有的东西，并且有100%的测试覆盖率。我们很快乐，还是我们很快乐？</p><p id="3a12" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我选择JavaScript是因为它是动态类型化的，我们可以将任何类型传递给我们的函数。这是使用<a class="ae mm" href="https://www.typescriptlang.org/" rel="noopener ugc nofollow" target="_blank"><em class="ma">TypeScript</em></a>的好理由。</p><p id="2855" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果我们通过了一个<code class="fe mn mo mp mc b">string</code>会发生什么？</p><pre class="km kn ko kp gt mb mc md me aw mf bi"><span id="610d" class="mg ky iq mc b gy mh mi l mj mk">test('should increment by 1', () =&gt; {</span><span id="6bc4" class="mg ky iq mc b gy ml mi l mj mk">  const input = 'my-string';</span><span id="5ff0" class="mg ky iq mc b gy ml mi l mj mk">  const actual = incrementByOne(input);<br/>  const expected = ???;</span><span id="cc84" class="mg ky iq mc b gy ml mi l mj mk">  expect(actual).toBe(expected);<br/>});</span></pre><p id="126b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">该函数将返回<code class="fe mn mo mp mc b">my-string1</code>，因为<code class="fe mn mo mp mc b">+</code>操作符在JavaScript中的类型之间工作。这不是我们想要的，所以让我们解决它。</p><p id="674e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们更新函数来处理这种情况。</p><pre class="km kn ko kp gt mb mc md me aw mf bi"><span id="8d30" class="mg ky iq mc b gy mh mi l mj mk">const incrementByOne = input =&gt; {<br/>  if (typeof input !== 'number') {<br/>    throw new TypeError('Only number type allowed');<br/>  }</span><span id="46b1" class="mg ky iq mc b gy ml mi l mj mk">  if (input &lt; 0) {<br/>    return 0;<br/>  }</span><span id="3991" class="mg ky iq mc b gy ml mi l mj mk">  return input + 1;<br/>};</span></pre><p id="1441" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在让我们在测试套件中添加另一个测试。</p><pre class="km kn ko kp gt mb mc md me aw mf bi"><span id="f73e" class="mg ky iq mc b gy mh mi l mj mk">test('should throw when non-number input', () =&gt; {</span><span id="d764" class="mg ky iq mc b gy ml mi l mj mk">  const input = 'my-string';</span><span id="f085" class="mg ky iq mc b gy ml mi l mj mk">  const expected = new TypeError('Only number type allowed');<br/>  expect(() =&gt; incrementbyOne(input)).toThrowError(expected);<br/>});</span></pre><p id="85fd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是一个简单的例子。网站和程序从来都不是微不足道的，我希望你现在能看到测试你的代码的价值。测试代码是交付高质量软件的关键部分。这应该是你软件开发过程中的一个基本部分！</p><p id="f99e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">单元测试不是银弹，也不能替代其他形式的测试，比如系统测试和用户验收测试。但是，单元测试是软件测试过程的重要部分，不应该被忽视。</p><h1 id="8e3c" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">结论</h1><p id="9b2a" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">对于代码来说，测试是避免错误和确保代码按预期运行的关键。通过花时间测试您的代码，您可以避免代价高昂的错误，并确保您的代码准备就绪。</p><p id="83ed" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">喜欢这篇文章吗？然后检查出<a class="ae mm" href="https://medium.com/@prplcode/stop-using-meaningless-test-values-9c8f9298ac48" rel="noopener">停止使用无意义的测试值！</a></p></div><div class="ab cl mq mr hu ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="ij ik il im in"><p id="1fbb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="ma">在</em> <a class="ae mm" href="https://twitter.com/prplcode" rel="noopener ugc nofollow" target="_blank"> <em class="ma"> Twitter </em> </a> <em class="ma">，</em><a class="ae mm" href="https://linkedin.com/in/simeg" rel="noopener ugc nofollow" target="_blank"><em class="ma">LinkedIn</em></a><em class="ma">，或者</em> <a class="ae mm" href="https://github.com/simeg" rel="noopener ugc nofollow" target="_blank"> <em class="ma"> GitHub </em> </a>上与我联系</p><p id="8cac" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="ma">最初发布于</em><a class="ae mm" href="https://prplcode.dev/" rel="noopener ugc nofollow" target="_blank"><em class="ma">prplcode . dev</em></a></p></div></div>    
</body>
</html>