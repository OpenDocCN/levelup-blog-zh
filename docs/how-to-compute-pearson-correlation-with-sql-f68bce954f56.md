# å¦‚ä½•ç”¨ SQL è®¡ç®—çš®å°”é€Šç›¸å…³ç³»æ•°

> åŸæ–‡ï¼š<https://levelup.gitconnected.com/how-to-compute-pearson-correlation-with-sql-f68bce954f56>

## ä»¥åŠä½ èƒ½ä»ä¸­å­¦åˆ°ä»€ä¹ˆæœ‰è¶£çš„ä¸œè¥¿ã€‚

å½“æ‚¨å°è¯•é¢„æµ‹æœªæ¥æ•°æ®æˆ–ä¼°ç®—æ•°æ®é›†ä¸­ç¼ºå¤±çš„æ•°æ®æ—¶ï¼Œæ‚¨å¯ä»¥åšå‡ºè®¸å¤šå‡è®¾æ¥æé«˜å·¥ä½œæ•ˆç‡ã€‚

ä¾‹å¦‚ï¼Œå‡è®¾[ä½ æƒ³åšä¸€ä¸ªå•†åº—åˆ†åº—é”€å”®åˆ†æ](https://www.kaggle.com/datasets/shree1992/housedata)ã€‚

æ‚¨æœ‰ä¸€ä¸ªåŒ…å«ä»¥ä¸‹å˜é‡çš„æ•°æ®é›†:

*   å•†åº— IDï¼›
*   å•†åº—åŒº(åœ¨åº­é™¢å¹¿åœº)ï¼›
*   å¯ç”¨é¡¹ç›®çš„æ•°é‡ï¼›
*   ä¸€ä¸ªæœˆçš„å¹³å‡å®¢æˆ·æ•°é‡ï¼›
*   å’Œå•†åº—é”€å”®ï¼›

![](img/bd00f629668c042578ec4804167457ff.png)

å¦‚æœä½ çŸ¥é“**è¿™äº›å˜é‡å¦‚ä½•ç›¸äº’ä½œç”¨**ï¼Œè¿™ä¸ªæ•°æ®é›†å¯èƒ½ä¼šéƒ¨åˆ†å›ç­”è®¸å¤šæœ‰è¶£çš„é—®é¢˜ã€‚

ç°åœ¨å¯ä»¥æ˜æ˜¾çœ‹å‡ºçš„æ˜¯å®¢æˆ·å’Œé”€å”®çš„ç›¸å…³æ€§:**å®¢æˆ·è¶Šå¤šï¼Œé”€å”®è¶Šå¤§ï¼Œå¯¹å—ï¼Ÿ**ğŸ˜‰

ä½†æ˜¯ä½ è®¤ä¸ºæ›´å¤šçš„å•†å“æˆ–è€…æ›´å¤§çš„å•†åº—é¢ç§¯ä¼šæœ‰åŠ©äºæé«˜é”€å”®é¢å—ï¼Ÿ

> æ¢å¥è¯è¯´ï¼Œè¿™äº›å±æ€§æ˜¯ç›¸å…³çš„å—ï¼Ÿ

# ä»€ä¹ˆæ˜¯çš®å°”é€Šç›¸å…³ç³»æ•°ï¼Ÿ

å¤§æ¦‚ï¼Œå…³äºç›¸å…³æ€§çš„ç»Ÿè®¡æ•°æ®æ¯”å…¶ä»–ä»»ä½•ç»Ÿè®¡æ•°æ®éƒ½å¤šï¼Œæ‰€ä»¥æˆ‘å°†é•¿è¯çŸ­è¯´ã€‚

æœ€ç®€å•åœ°è¯´ï¼Œç›¸å…³æ€§æ˜¯æ•°æ®é›†ä¸­æˆå¯¹çš„å€¼ä¹‹é—´çš„ééšæœºã€ç›´æ¥å…³è”çš„ç»Ÿè®¡åº¦é‡ã€‚

ç”¨ *Ï ("rho")* è¡¨ç¤ºï¼Œä»-1 åˆ° 1 ä¸ç­‰ï¼Œå…¶ä¸­:

*   **-1â€è¡¨ç¤ºå®Œå…¨é€†ç›¸å…³:**å›å½’çº¿ä»å·¦åˆ°å³å‘ä¸‹ï¼›
*   **â€œ0â€è¡¨ç¤ºæ— ç›¸å…³æ€§:**æ²¡æœ‰å›å½’çº¿ï¼›
    åªæ˜¯æ•£ç‚¹å›¾ï¼›
*   **å’Œâ€œ1â€è¡¨ç¤ºå®Œå…¨æ­£ç›¸å…³:**
    å›å½’çº¿ä»å·¦å‘å³ã€‚

![](img/bf4dc0fb2fb1621e2eb93b19dd37b991.png)

æ¼”èŒå‘˜è¡¨:[ç»´åŸºåª’ä½“](https://commons.wikimedia.org/wiki/File:Correlation_coefficient.svg)

åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é¦–å…ˆè€ƒè™‘å•†å“æ•°é‡å’Œé”€å”®é¢ä¹‹é—´çš„å…³ç³»ã€‚æ­£å¦‚ç»´åŸºç™¾ç§‘é¡µé¢ä¸Šæ‰€è¯´ï¼Œæœ‰è®¸å¤šå…¬å¼å¯ä»¥è®¡ç®—çš®å°”é€Šç³»æ•°ã€‚

æˆ‘å°†å®ç°æœ€å¸¸ç”¨çš„ä¸€ä¸ªï¼Œâ€œä¹˜ç§¯-çŸ©ç›¸å…³ç³»æ•°â€ï¼Œå®ƒåªæœ‰åœ¨å˜é‡æ­£æ€åˆ†å¸ƒå’Œ**ä¸”æ²¡æœ‰ç¼ºå¤±å€¼çš„æƒ…å†µä¸‹æ‰æœ‰æ•ˆ**ã€‚****

è¿™æ˜¯æ•°å­¦å…¬å¼:

![](img/7eb595d3ce311b0b4e20329244863ad4.png)

çš®å°”é€Šâ€œç§¯çŸ©â€ç›¸å…³ç³»æ•°å…¬å¼

å…¶ä¸­**Ïƒ**(â€œsigmaâ€)æ˜¯æ ‡å‡†å·®ï¼Œ **cov** æ˜¯ä¸¤ä¸ªå˜é‡ä¹‹é—´çš„åæ–¹å·®ã€‚

æˆ‘å°±ä¸èµ˜è¿°ç»´åŸºç™¾ç§‘ä¸Šæè¿°çš„æ•°å­¦æ¼”ç¤ºçš„ç»†èŠ‚äº†ã€‚ä¸è¿‡ï¼Œä½ å¯ä»¥è€ƒè™‘ä½¿ç”¨ä¸€ä¸ªæ›´ç®€å•çš„å…¬å¼ *:* æ¥ä¼°è®¡è¿™ä¸¤ä¸ªå˜é‡**r***ä¹‹é—´çš„ *Ï**

![](img/94606d258b8ba9b7523dda5f541dff72.png)

çš®å°”é€Šâ€œç§¯å·®â€ç›¸å…³ç³»æ•°å…¬å¼(è¿‘ä¼¼å€¼)

å…¶ä¸­ *n* æ˜¯è¡Œæ•°ã€‚

è¿™ä¸ªå…¬å¼å¯¹äºç»Ÿè®¡äººå‘˜æ¥è¯´å¾ˆéš¾ç†è§£ï¼Œä½†æ˜¯å¯¹äº SQL å¼€å‘äººå‘˜æ¥è¯´å¾ˆå®¹æ˜“å®ç°ï¼Œå› ä¸ºæ‰€æœ‰çš„ SGBD éƒ½æœ‰ç”¨äº*å¹³æ–¹æ ¹*å’Œ*æ±‚å’Œ*è¿ç®—çš„å‡½æ•°ã€‚

ä¾‹å¦‚ï¼Œä»¥ä¸‹æ˜¯ä¸Šä¸€ä¸ªå…¬å¼çš„ SQL å®ç°:

å¦‚æœä½ ä½¿ç”¨ Google BigQueryï¼Œä½ å¯ä»¥ä½¿ç”¨ [CORR()å‡½æ•°](https://cloud.google.com/bigquery/docs/reference/standard-sql/statistical_aggregate_functions?hl=fr#corr)å¾—åˆ°ç›¸åŒçš„ç»“æœ:

åšæ•°å­¦(æˆ– SQLğŸ˜‰)å¯¹äºæ•°å€¼å˜é‡ä¹‹é—´çš„æ‰€æœ‰å…³ç³»ï¼Œæˆ‘ä»¬å¾—åˆ°çš„ç»“æœæ˜¯:

*   å¸¦æœ‰â€œå•†åº—é”€å”®â€çš„â€œç‰©å“å¯ç”¨â€:r = 0.098
*   å¸¦â€œåº—é“ºé”€å”®é¢â€çš„â€œåº—é“ºé¢ç§¯â€:r = 0.097
*   å¸¦æœ‰â€œå¯ç”¨é¡¹ç›®â€çš„â€œå•†åº—åŒºåŸŸâ€:r = 0.99âœ…ï¼›
*   å¸¦æœ‰â€œå•†åº—é”€å”®é¢â€çš„â€œæ¯æ—¥å®¢æˆ·è®¡æ•°â€:r = 0.008ğŸ˜²ï¼›

è¿™äº›æ•°å­—å¯èƒ½ä¼šè®©æ‚¨æ„Ÿåˆ°æƒŠè®¶ï¼Œä½†æ˜¯åœ¨è¿™ä¸ªæ•°æ®é›†çš„å®¢æˆ·æ•°é‡å’Œé”€å”®é¢ä¹‹é—´æ²¡æœ‰æ˜æ˜¾çš„å…³ç³»ï¼

> å•†åº—é¢ç§¯å’Œå•†åº—é”€å”®é¢ä¹‹é—´ç¡®å®å­˜åœ¨å…³ç³»ï¼Œä½†ä½ éœ€è¦åšæ›´å¤šçš„æ•°æ®æ¢ç´¢ï¼Œä»¥å¼„æ¸…æ¥šå¦‚ä½•*ğŸ˜‰*

## å¥–åŠ±:ä¸€ä¸ªè®¡ç®—çš®å°”é€Šç›¸å…³ç³»æ•°çš„ SQL å‡½æ•°

ç”±äº MySQL(å’Œ PostgreSQL)æ²¡æœ‰ä»»ä½•ä¸“ç”¨å‡½æ•°ï¼Œæˆ‘è¯•å›¾æ„å»ºå¹¶æä¾›ä¸€ä¸ªã€‚ä»¥ä¸‹æ˜¯ MySQL ç‰ˆæœ¬ï¼Œéœ€è¦ç¨åŠ ä¿®æ”¹æ‰èƒ½åœ¨ PostgreSQL ä¸Šè¿è¡Œ:

ä»¥åŠå¦‚ä½•ä½¿ç”¨å®ƒ:

## å‚è€ƒèµ„æ–™å’Œè¿›ä¸€æ­¥é˜…è¯»

å¦‚æœä½ äº†è§£æ›´å¤šå…³äºçš®å°”é€Šç›¸å…³ç³»æ•°èƒŒåçš„ç†è®ºå’Œå‡è®¾ï¼Œä½ å¯ä»¥çœ‹çœ‹è¿™ç¯‡å¾ˆæ£’çš„æ–‡ç« :

[](https://towardsdatascience.com/pearson-coefficient-of-correlation-explained-369991d93404) [## çš®å°”é€Šç›¸å…³ç³»æ•°è§£é‡Šã€‚

### æˆ‘æ„è¯†åˆ°ï¼Œå¯¹äºå¯ä»¥åœ¨æ•°æ®é›†ä¸Šæ‰§è¡Œçš„ä¸åŒç±»å‹çš„å…³è”ï¼Œå­˜åœ¨å¾ˆå¤šæ··æ·†â€¦

towardsdatascience.com](https://towardsdatascience.com/pearson-coefficient-of-correlation-explained-369991d93404) 

**æ­¤å¤–ï¼Œæˆ‘æ²¡æœ‰è§£é‡Šå¦‚ä½•ç”¨ SQL æ£€æŸ¥æ‚¨çš„æ•°æ®æ˜¯å¦æ­£æ€åˆ†å¸ƒ**(åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œå®ƒæ˜¯æ­£æ€åˆ†å¸ƒçš„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æŸ¥çœ‹ç¬¬ä¸€å¹…å›¾ä¸­çš„åˆ†å¸ƒå½¢çŠ¶æ¥å‡è®¾)ã€‚

ä½ å¯ä»¥å†è®¡ç®—ä¸¤ä¸ªç»Ÿè®¡é‡:**å³°åº¦**å’Œ**åæ–œåº¦**ã€‚

[](https://learnsql.com/blog/high-performance-statistical-queries-skewness-kurtosis/) [## é«˜æ€§èƒ½ç»Ÿè®¡æŸ¥è¯¢â€”â€”ååº¦å’Œå³°åº¦

### åœ¨æè¿°æ€§ç»Ÿè®¡ä¸­ï¼Œå‰å››ä¸ªæ€»ä½“çŸ©åŒ…æ‹¬ä¸­å¿ƒã€æ‰©æ•£ã€ååº¦å’Œå³°åº¦æˆ–â€¦

learnsql.com](https://learnsql.com/blog/high-performance-statistical-queries-skewness-kurtosis/) 

> æˆ‘å»ºè®®ä½ ç»˜åˆ¶åˆ†å¸ƒå›¾ï¼Œè€Œä¸æ˜¯ä»…ä»…ä¾é è¿™äº›ç»Ÿè®¡æ•°æ®æ¥ç¡®è®¤ä½ çš„æ•°æ®æ˜¯æ­£æ€åˆ†å¸ƒçš„ã€‚

æœ€åï¼Œå¦‚æœæ‚¨çš„æ•°æ®åŒ…å« null å€¼æˆ–ç©ºå€¼ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ SQL æ¥ç®¡ç†å®ƒã€‚æˆ‘ä¸“é—¨ä¸ºä½ å†™äº†ä¸€ç¯‡æ–‡ç« :

[](/how-to-find-and-deal-with-null-values-in-sql-8404a32d3b37) [## å¦‚ä½•åœ¨ SQL ä¸­æŸ¥æ‰¾å’Œå¤„ç†ç©ºå€¼

### é…ä¸Šä¸€å¼ å°çŒ«çš„ç…§ç‰‡ï¼Œå› ä¸ºä½•ä¹è€Œä¸ä¸ºï¼Ÿ

levelup.gitconnected.com](/how-to-find-and-deal-with-null-values-in-sql-8404a32d3b37) 

å¦‚æœä½ [å…³æ³¨æˆ‘](https://medium.com/@dataforeveryone)ï¼Œæˆ‘ä¼šåœ¨ä»¥åå‘å¸ƒæ–‡ç« çš„æ—¶å€™é€šçŸ¥ä½ ï¼

# åˆ†çº§ç¼–ç 

æ„Ÿè°¢æ‚¨æˆä¸ºæˆ‘ä»¬ç¤¾åŒºçš„ä¸€å‘˜ï¼åœ¨ä½ ç¦»å¼€ä¹‹å‰:

*   ğŸ‘ä¸ºæ•…äº‹é¼“æŒï¼Œè·Ÿç€ä½œè€…èµ°ğŸ‘‰
*   ğŸ“°æ›´å¤šå†…å®¹è¯·æŸ¥çœ‹[å‡çº§ç¼–ç åˆŠç‰©](https://levelup.gitconnected.com/?utm_source=pub&utm_medium=post)
*   ğŸ””å…³æ³¨æˆ‘ä»¬:[æ¨ç‰¹](https://twitter.com/gitconnected) | [LinkedIn](https://www.linkedin.com/company/gitconnected) | [æ—¶äº‹é€šè®¯](https://newsletter.levelup.dev)

ğŸš€ğŸ‘‰ [**åŠ å…¥å‡çº§äººæ‰é›†ä½“ï¼Œæ‰¾åˆ°ä¸€ä»½ç¥å¥‡çš„å·¥ä½œ**](https://jobs.levelup.dev/talent/welcome?referral=true)