<html>
<head>
<title>The Mechanics Behind Disney’s Snow Animations</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">迪士尼雪地动画背后的机制</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/the-mechanics-behind-disneys-snow-animations-29ec8d117e35?source=collection_archive---------16-----------------------#2020-06-03">https://levelup.gitconnected.com/the-mechanics-behind-disneys-snow-animations-29ec8d117e35?source=collection_archive---------16-----------------------#2020-06-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="2f30" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">《冰雪奇缘》最令人印象深刻的部分之一是对雪的逼真刻画。</p><figure class="ko kp kq kr gt ks"><div class="bz fp l di"><div class="kt ku l"/></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk translated">观看视频，了解不同的雪地模拟:)</figcaption></figure><p id="b2ee" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果你仔细想想，那实际上是很难精确生产的东西。我们都有过下雪的经历，所以当我们看到分辨率低或表现稍有偏差的图形时，它就会跳出来。虽然你知道如果你把一个雪球扔向墙壁或者捡起一堆雪球让它从你的手指间滑落会发生什么，但准确地描述它真的很难。</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gh gi kz"><img src="../Images/b718b1de2cefeaf9988f12cda5146aed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*UNoPuQoVnj433z76.png"/></div></div></figure><p id="59fd" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">雪是一种介于固体和液体之间的物质。你可以把它打包成雪球，但它也可以分解成小块和雪花，它们可以像液体一样独立移动。</p><p id="6190" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这就是为什么物质点法(MPM)如此有用。MPM是一种数值算法，用于模拟材料如何移动和变形。</p><p id="d77f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在我深入研究MPM是如何工作的之前，让我们看看其他的分析选项是什么。</p></div><div class="ab cl lg lh hx li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="im in io ip iq"><h1 id="f68d" class="ln lo it bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">不是粒子的粒子；不是网格的网格？</h1><p id="0f60" class="pw-post-body-paragraph jq jr it js b jt ml jv jw jx mm jz ka kb mn kd ke kf mo kh ki kj mp kl km kn im bi translated">基本上有三类分析方法。</p><h2 id="db14" class="mq lo it bd lp mr ms dn lt mt mu dp lx kb mv mw mb kf mx my mf kj mz na mj nb bi translated">1.拉格朗日算符</h2><p id="3479" class="pw-post-body-paragraph jq jr it js b jt ml jv jw jx mm jz ka kb mn kd ke kf mo kh ki kj mp kl km kn im bi translated">这是基于网格的方法或基于粒子的方法。本质上，你在物体上放一个网格(像一个隐喻的网)，然后<strong class="js iu">跟踪网格中每个粒子的属性和运动</strong>。所以你可以说在给定的时间<em class="nc"> t </em>，你可以说对于给定的粒子<em class="nc"> j </em>，它有一定的位置，质量，体积，速度等。</p><p id="3211" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">有限元法是最常用的算法之一，尤其是因为它已经存在了大约75年了(他们过去只是手工完成所有的计算！！).正如我之前提到的，你追踪单个粒子。</p><p id="19b4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">*这里需要注意的一点是，粒子实际上并不意味着原子/分子，它只是一点物质。所有这些方法都假设材料是连续的，即物质是连续的，并分布在整个体积中(连续介质力学)。</p><h2 id="48d4" class="mq lo it bd lp mr ms dn lt mt mu dp lx kb mv mw mb kf mx my mf kj mz na mj nb bi translated">2.欧拉的</h2><p id="733e" class="pw-post-body-paragraph jq jr it js b jt ml jv jw jx mm jz ka kb mn kd ke kf mo kh ki kj mp kl km kn im bi translated">这是一种基于网格的方法。在这里，你在物体上叠加一个固定的网格，当物体移动时，<strong class="js iu">你跟踪特定单元格中发生的事情</strong>。例如，你可以说在时间<em class="nc"> t </em>，水以一定的速度流过这个细胞。这个真的很擅长追踪扩散。</p><h2 id="2c0d" class="mq lo it bd lp mr ms dn lt mt mu dp lx kb mv mw mb kf mx my mf kj mz na mj nb bi translated">3.混合物</h2><p id="bfac" class="pw-post-body-paragraph jq jr it js b jt ml jv jw jx mm jz ka kb mn kd ke kf mo kh ki kj mp kl km kn im bi translated">顾名思义，这是两者的结合。它将对象在某些点视为粒子的集合，在其他点视为网格。<strong class="js iu"> MPM是一种混合方法</strong>。</p><p id="d275" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">有一些值得注意的混合方法。</p><ul class=""><li id="bf47" class="nd ne it js b jt ju jx jy kb nf kf ng kj nh kn ni nj nk nl bi translated"><strong class="js iu">单元中的粒子(PIC)和流体隐式粒子(FLIP) </strong>是最古老的方法，包含混合网格和粒子的一般思想。FLIP和PIC很像，只是稍微优化了一点的版本。</li><li id="6d66" class="nd ne it js b jt nm jx nn kb no kf np kj nq kn ni nj nk nl bi translated">细胞中的仿射粒子(APIC)是对PIC的改进，PIC将动量矩阵存储为材料的属性。</li><li id="5d1b" class="nd ne it js b jt nm jx nn kb no kf np kj nq kn ni nj nk nl bi translated">MPM是本文的重点，所以我将在后面详细介绍。<strong class="js iu"> MLS-MPM(移动最小二乘物质点法)</strong>是MPM的更好版本，利用了APIC的一些信息传递的思想来提高MPM效率。</li></ul><p id="8122" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">为了帮助理解这三种方法的优缺点，请参见下表。</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gh gi nr"><img src="../Images/5338c6c5d742341312b94dcaf44e2a45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*goquXZLNs1PM9IijnOh2Qg.png"/></div></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk translated">对比图表</figcaption></figure></div><div class="ab cl lg lh hx li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="im in io ip iq"><h1 id="2283" class="ln lo it bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">MPM算法</h1><p id="68a5" class="pw-post-body-paragraph jq jr it js b jt ml jv jw jx mm jz ka kb mn kd ke kf mo kh ki kj mp kl km kn im bi translated">所有涉及到这一点的数学看起来真的是一团糟(我喜欢数学)，所以我将在这里保留所有的理论。如果你好奇，我会在底部链接一个资源。</p><p id="5912" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">总的来说:<br/> </strong>我们已经知道，MPM把一个物质既是点的集合，又是一个固定的网格。事实上，<strong class="js iu">网格只是一个临时的“白板”</strong>用于计算，并在每个时间步被清除。</p><p id="6805" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">粒子储存了它各自的位置、质量、体积、速度等。然后，当你计算它应该如何在下一个<em class="nc">∏t</em>上移动时，你把粒子的信息传送到网格。网格获取所有的粒子，并计算新的速度，然后将其传递回粒子。粒子移动到新的位置，重复这个过程。</p><h2 id="9eed" class="mq lo it bd lp mr ms dn lt mt mu dp lx kb mv mw mb kf mx my mf kj mz na mj nb bi translated">循序渐进:</h2><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gh gi ns"><img src="../Images/bf9a36b26217104ba8ccd82e23497c07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*0B7kRk3menOesiD-.png"/></div></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk translated"><a class="ae nt" href="https://www.seas.upenn.edu/~cffjiang/research/mpmcourse/mpmcourse.pdf" rel="noopener ugc nofollow" target="_blank">https://www . seas . upenn . edu/~ CFF Jiang/research/MPM course/MPM course . pdf</a></figcaption></figure><ol class=""><li id="254d" class="nd ne it js b jt ju jx jy kb nf kf ng kj nh kn nu nj nk nl bi translated"><strong class="js iu">粒子到网格转移(P2G) </strong> —将粒子数量转移到网格。这是使用权重函数来完成的；每个粒子向网格中的特定体素贡献质量和动量，与它离细胞的距离成比例。</li><li id="5d5c" class="nd ne it js b jt nm jx nn kb no kf np kj nq kn nu nj nk nl bi translated"><strong class="js iu">计算网格速度</strong>——在网格中的每个节点上，<em class="nc">速度=动量/质量</em>。如果该点的为0，则网格速度为0。</li><li id="f63a" class="nd ne it js b jt nm jx nn kb no kf np kj nq kn nu nj nk nl bi translated"><strong class="js iu">确定自由度</strong> —唯一可以自由移动的网格节点是那些有质量的节点。所有其他的都是已知的量。</li><li id="0a3f" class="nd ne it js b jt nm jx nn kb no kf np kj nq kn nu nj nk nl bi translated"><strong class="js iu">计算网格力</strong> —计算由于附近粒子的弹性应力而作用在每个网格节点上的力。</li><li id="0fe5" class="nd ne it js b jt nm jx nn kb no kf np kj nq kn nu nj nk nl bi translated"><strong class="js iu">更新网格速度</strong>——考虑边界条件和碰撞，确定每个网格节点的速度。</li><li id="f720" class="nd ne it js b jt nm jx nn kb no kf np kj nq kn nu nj nk nl bi translated"><strong class="js iu">粒子变形梯度</strong> —在这个过程的开始，网格总是被重置。在这一步中，我们决定了网格以及网格上的粒子应该如何变形。这种变形对于网格来说是虚构的，它只是用来计算新的粒子速度。</li><li id="4111" class="nd ne it js b jt nm jx nn kb no kf np kj nq kn nu nj nk nl bi translated"><strong class="js iu">网格到粒子转移(G2P) </strong> —计算新的粒子速度，并将它们从网格映射到适用的粒子。</li><li id="0ef1" class="nd ne it js b jt nm jx nn kb no kf np kj nq kn nu nj nk nl bi translated"><strong class="js iu">粒子平流</strong> —在下一个时间步根据新的速度移动粒子。</li><li id="9d03" class="nd ne it js b jt nm jx nn kb no kf np kj nq kn nu nj nk nl bi translated"><strong class="js iu">重置网格</strong> —网格只是一个计算和存储计算的地方。每次求解都会重置。</li><li id="c99e" class="nd ne it js b jt nm jx nn kb no kf np kj nq kn nu nj nk nl bi translated"><strong class="js iu">重复</strong>——这种情况一遍又一遍地发生，以计算长期运动。</li></ol><h2 id="3844" class="mq lo it bd lp mr ms dn lt mt mu dp lx kb mv mw mb kf mx my mf kj mz na mj nb bi translated">关于MPM大联盟的一个简短说明</h2><p id="d7cf" class="pw-post-body-paragraph jq jr it js b jt ml jv jw jx mm jz ka kb mn kd ke kf mo kh ki kj mp kl km kn im bi translated">如果你还记得以前的话，MLS-MPM，或者移动最小二乘物质点法，是MPM的一个版本，可以加速计算。</p><p id="5f8a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在MPM，每次我们将粒子速度转移到网格，网格必须执行网格插值(根据权函数将粒子映射到网格)和对这些函数的梯度计算，以确定粒子如何移动。有了MLS-MPM，我们不需要做梯度计算。</p><p id="2f8d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">MLS-MPM使用了APIC的一些方法，它在每个粒子上存储了一个小的仿射矩阵，以及一些关于粒子如何移动的额外上下文。</p></div><div class="ab cl lg lh hx li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="im in io ip iq"><h1 id="6865" class="ln lo it bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">摘要</h1><ul class=""><li id="2e49" class="nd ne it js b jt ml jx mm kb nv kf nw kj nx kn ni nj nk nl bi translated">拉格朗日=基于粒子；欧拉=基于网格</li><li id="a5ec" class="nd ne it js b jt nm jx nn kb no kf np kj nq kn ni nj nk nl bi translated">混合方法具有两者的优点。它们可以处理大的拓扑变化，并且可以处理多材料和多相模拟。</li><li id="bfbd" class="nd ne it js b jt nm jx nn kb no kf np kj nq kn ni nj nk nl bi translated">MPM有储存在粒子中的信息。信息被传送到网格中，在网格中进行梯度计算以计算新的速度。新的速度被传输回来，粒子被平流。</li><li id="1a82" class="nd ne it js b jt nm jx nn kb no kf np kj nq kn ni nj nk nl bi translated">这是计算机图形学和模拟中的一个强有力的工具。</li><li id="7859" class="nd ne it js b jt nm jx nn kb no kf np kj nq kn ni nj nk nl bi translated">虽然在这篇文章中，我只谈到了速度，材料也可以被赋予其他属性，如粘度，杨氏模量等。</li></ul><p id="97ce" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">感谢您的阅读，希望这对您有所帮助！MPM是一个非常酷的工具，可以实现惊人的图形模拟。如果你有兴趣谈论更多关于计算材料科学或该领域的工作，并愿意提供建议，请随时联系我们:)</p><h2 id="e424" class="mq lo it bd lp mr ms dn lt mt mu dp lx kb mv mw mb kf mx my mf kj mz na mj nb bi translated">其他资源:</h2><ul class=""><li id="e770" class="nd ne it js b jt ml jx mm kb nv kf nw kj nx kn ni nj nk nl bi translated"><a class="ae nt" href="https://www.seas.upenn.edu/~cffjiang/research/mpmcourse/mpmcourse.pdf" rel="noopener ugc nofollow" target="_blank">https://www . seas . upenn . edu/~ CFF Jiang/research/MPM course/MPM course . pdf</a></li></ul></div></div>    
</body>
</html>