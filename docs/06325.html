<html>
<head>
<title>Creating a Reddit bot using Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python创建Reddit机器人</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/creating-a-reddit-bot-using-python-5464d4a5dff2?source=collection_archive---------2-----------------------#2020-11-16">https://levelup.gitconnected.com/creating-a-reddit-bot-using-python-5464d4a5dff2?source=collection_archive---------2-----------------------#2020-11-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/e1dae7d8b1fd600dcc55564bf27addf7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-iZu8EonBHSixhroHiKDew.jpeg"/></div></div></figure><p id="4b5b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们将浏览API文档，看看我们可以用它做什么，以及如何制作一个Reddit机器人。Python提供了一个解析器模块来处理名为Praw的Reddit API。首先，安装python的最新版本，如果你没有的话，你需要Reddit API。转到这个网址<a class="ae kz" href="https://www.reddit.com/prefs/apps/" rel="noopener ugc nofollow" target="_blank">https://www.reddit.com/prefs/apps/</a>并选择创建应用程序</p><figure class="lb lc ld le gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi la"><img src="../Images/8efc92bd98d894675a3f48c054a594bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2SR-ZMeGyx8mvDmnbBd8YQ.jpeg"/></div></div></figure><p id="31e4" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">给它起个名字。你必须选择一个重定向URI(出于一些愚蠢的原因，愚蠢的是因为我正在建立一个机器人，而不是一个web应用程序，但无论如何)。我选择<code class="fe lf lg lh li b"><a class="ae kz" href="http://127.0.0.1" rel="noopener ugc nofollow" target="_blank">http://127.0.0.1</a></code>你现在会得到一个客户端id(下面的红框)和一个秘密(下面的蓝框)。记下来，但要保密。最后，在python中安装下面的模块，只需复制下面的命令并粘贴到您的命令提示符中，python Pip模块将为您下载并安装它。</p><p id="bad3" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><code class="fe lf lg lh li b">pip install praw</code></p><h1 id="46bd" class="lj lk it bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">编码</h1><p id="2625" class="pw-post-body-paragraph kb kc it kd b ke mh kg kh ki mi kk kl km mj ko kp kq mk ks kt ku ml kw kx ky im bi translated">用任何名称创建一个py文件，并在代码编辑器中打开它。第一步，我们将初始化我的Reddit帐户的身份验证细节。</p><figure class="lb lc ld le gt ju"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="7c64" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在第2行，我导入了Praw模块，从第5行到第9行，我们将添加我们的用户和API细节。<code class="fe lf lg lh li b">client_id</code>将是我们在API创建期间获得的id，<code class="fe lf lg lh li b">client_secret</code>是您在创建API应用程序时获得的API密钥，用户名和密码是您的Reddit帐户的登录详细信息。第12行显示我们将这些细节作为参数传递给<code class="fe lf lg lh li b">praw.Reddit()</code>类，从那里它将登录到你的Reddit帐户并访问他们的数据库。我们已经成功地设置了我们的认证，我们的下一个目标是看看我们能用API做什么。</p><h1 id="c686" class="lj lk it bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">访问子编辑:</h1><p id="1962" class="pw-post-body-paragraph kb kc it kd b ke mh kg kh ki mi kk kl km mj ko kp kq mk ks kt ku ml kw kx ky im bi translated">在Reddit中，有多个被称为subreddits的社区。我们可以使用方法<code class="fe lf lg lh li b">subreddit</code>获得一个subreddit实例。为了使用API找到subreddit中最顶层的提交，我们可以使用<code class="fe lf lg lh li b">subreddit.top()</code>方法。在subreddit中，有多个post提交，我们可以遍历每个提交来使用该方法，Reddit API为我们提供了以下命令来访问提交。</p><p id="f0e4" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu"> 1: </strong>上升的<br/> <strong class="kd iu"> 2: </strong>新的<br/> <strong class="kd iu"> 3: </strong>火热的<br/> <strong class="kd iu"> 4: </strong>镀金的<br/> <strong class="kd iu"> 5: </strong>争议的<br/> <strong class="kd iu"> 6: </strong>顶</p><figure class="lb lc ld le gt ju"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="e178" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在代码的第2行，我们已经定义了subreddit名称，inline 21我们必须使用python <code class="fe lf lg lh li b">for loop</code>来迭代提交，在循环条件中，我们使用<code class="fe lf lg lh li b">submission.top()</code>通过传递limit参数，这将告诉API我们需要多少个顶级提交。我手动添加了1，但你可以添加任何数字，可能是3，5，通常是10。在接下来的几行中，我们使用了<code class="fe lf lg lh li b">submission.title</code>、<code class="fe lf lg lh li b">submission.url</code>、<code class="fe lf lg lh li b">submission.Id</code>来获取我们得到的循环中每个提交的详细信息，并且<code class="fe lf lg lh li b">submission.score</code>将显示提交的投票数。</p><h1 id="5667" class="lj lk it bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">评论:</h1><p id="6a93" class="pw-post-body-paragraph kb kc it kd b ke mh kg kh ki mi kk kl km mj ko kp kq mk ks kt ku ml kw kx ky im bi translated">在这一节中，我们将查看API的文档，了解如何访问帖子的评论、作者姓名等。</p><figure class="lb lc ld le gt ju"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="78e2" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在第17行，我们通过传递subreddit的名称使用了get_subreddit()，在下一行使用get_comment()将删除subreddit帖子上的所有评论。在第19到21行，我们使用for循环来迭代我们的注释，并显示内容和它们的id。如果您想要删除特定数量的注释，只需在get_comment()中添加limit=10或您想要的任何数字。</p><figure class="lb lc ld le gt ju"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="0511" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">从第19行到第20行，我们使用了<code class="fe lf lg lh li b">submission</code>函数，将Reddit帖子的URL作为参数传递，在下一行，我们调用了<code class="fe lf lg lh li b">reply()</code>函数，它接受一个文本参数，这可以是你想在Reddit帖子上发布的评论。如果您执行代码并检查帖子的URL，您可以看到评论已成功发布。</p><figure class="lb lc ld le gt ju"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="de83" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在，我们将使用API获取特定评论的信息，我们需要做的第一件事是获取评论id，如果你看过代码，我获得了一个post评论Id，它是<code class="fe lf lg lh li b">fvib7aw</code> Inline 22，我们通过将comment_id作为参数传递给<code class="fe lf lg lh li b">praw</code>类的函数来使用<code class="fe lf lg lh li b">reddit.comment()</code>， 然后在第25行到第28行，我们获取评论信息，比如<code class="fe lf lg lh li b">comment.body</code>获取评论的文本，<code class="fe lf lg lh li b">comment.permalink</code>是评论的URL，<code class="fe lf lg lh li b">comment.score </code>将获取评论的总投票数，包括向上投票和向下投票，<code class="fe lf lg lh li b">comment.author</code>将显示评论作者的姓名。</p><h1 id="b7ef" class="lj lk it bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">向上投票和向下投票:</h1><figure class="lb lc ld le gt ju"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="38f9" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">对特定评论的向下投票可以通过获取comment_id并将其传入<code class="fe lf lg lh li b">reddit.comment() </code>来完成，然后调用<code class="fe lf lg lh li b">comment.downvote()</code>一个将向下投票评论分数的函数，检查输出以查看其如何工作，同样，在向上投票的情况下，我们使用<code class="fe lf lg lh li b">comment.upvote()</code>。</p><h2 id="6114" class="mo lk it bd ll mp mq dn lp mr ms dp lt km mt mu lx kq mv mw mb ku mx my mf mz bi translated">输出:</h2><pre class="lb lc ld le gt na li nb nc aw nd bi"><span id="024a" class="mo lk it li b gy ne nf l ng nh">Score before downvoting: 25<br/>Score after downvoting: 24</span></pre><figure class="lb lc ld le gt ju"><div class="bz fp l di"><div class="mm mn l"/></div></figure><h1 id="c24a" class="lj lk it bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">在Reddit上提交:</h1><p id="dfe1" class="pw-post-body-paragraph kb kc it kd b ke mh kg kh ki mi kk kl km mj ko kp kq mk ks kt ku ml kw kx ky im bi translated">好了，我们已经看到了如何在subreddit中获得顶部和最新的subreddit帖子，并获得评论、回复评论、投票赞成和投票反对评论，现在我们将学习如何使用他们的API在reddit上发送提交内容。</p><figure class="lb lc ld le gt ju"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="b996" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">正如您在代码中看到的，我们已经向Praw模块提供了我们的登录和API详细信息，然后在第17到19行，我们定义了post_title和pos_body变量来保存文章的标题和内容，在下一行，我们选择了subreddit，并通过将标题和正文作为参数传递来使用submit()函数。这将提交我们的文章到我们选择的子编辑。</p><h1 id="cb7a" class="lj lk it bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">结论:</h1><p id="5878" class="pw-post-body-paragraph kb kc it kd b ke mh kg kh ki mi kk kl km mj ko kp kq mk ks kt ku ml kw kx ky im bi translated">我们已经介绍了Reddit可以做的大部分基本事情，但是在文档中你可以发现更多关于如何在评论中找到文本的信息，等等。你可以通过访问这个<code class="fe lf lg lh li b"><a class="ae kz" href="https://praw.readthedocs.io/" rel="noopener ugc nofollow" target="_blank">documentation URL</a></code>来了解更多关于这个API的信息。你已经学会了制造机器人所需的所有基础知识。希望这篇文章对你以后有所帮助，也可以随意分享你的回应。</p></div></div>    
</body>
</html>