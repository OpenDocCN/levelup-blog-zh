<html>
<head>
<title>Assess Your Stock Risk With The Sharpe Ratio</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用夏普比率评估你的股票风险</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/calculate-the-sharpe-ratio-with-the-powerful-combo-of-functions-and-pipe-93ba34a95729?source=collection_archive---------10-----------------------#2022-07-28">https://levelup.gitconnected.com/calculate-the-sharpe-ratio-with-the-powerful-combo-of-functions-and-pipe-93ba34a95729?source=collection_archive---------10-----------------------#2022-07-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="b66c" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">我们将使用函数和管道方法来计算特定用例的这个流行指标。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/ab08c7b722295c3b8365909f0a233b8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wRDc8lHX7ApuNsAW_rny5w.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@pedronettto?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Pedro Netto </a>在<a class="ae ky" href="https://unsplash.com/s/photos/pipes?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><blockquote class="kz la lb"><p id="6489" class="lc ld le lf b lg lh ju li lj lk jx ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">在有计划的风险和鲁莽的决策之间，是利润和损失的分界线。</p><p id="6e19" class="lc ld le lf b lg lh ju li lj lk jx ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">获得普利策奖的记者查尔斯·杜希格</p></blockquote><p id="16c0" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll lz ln lo lp ma lr ls lt mb lv lw lx ly im bi translated">问问你的家人和朋友对股市交易的看法。这将引发一场关于风险承受能力的有趣讨论。你可能会对他们的回答感到惊讶。</p><p id="64a6" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll lz ln lo lp ma lr ls lt mb lv lw lx ly im bi translated">您应该看到3种配置文件类型:</p><ul class=""><li id="f479" class="mc md it lf b lg lh lj lk lz me ma mf mb mg ly mh mi mj mk bi translated">那些<strong class="lf iu">规避风险的人</strong>看重确定性，而不是更大回报的可能性。</li><li id="8c9f" class="mc md it lf b lg ml lj mm lz mn ma mo mb mp ly mh mi mj mk bi translated">那些<strong class="lf iu">风险中性的</strong>对风险毫不在意。</li><li id="d28e" class="mc md it lf b lg ml lj mm lz mn ma mo mb mp ly mh mi mj mk bi translated">那些接受高度风险和不确定性来换取潜在显著回报的人:<strong class="lf iu">寻风险</strong>。</li></ul><p id="752c" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll lz ln lo lp ma lr ls lt mb lv lw lx ly im bi translated">这就是夏普比率的有趣之处。</p><blockquote class="mq"><p id="df69" class="mr ms it bd mt mu mv mw mx my mz ly dk translated">它在考虑风险的同时评估投资的表现。</p></blockquote><p id="008b" class="pw-post-body-paragraph lc ld it lf b lg na ju li lj nb jx ll lz nc lo lp ma nd ls lt mb ne lw lx ly im bi translated">它是如何工作的？</p></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><h2 id="4f28" class="nm nn it bd no np nq dn nr ns nt dp nu lz nv nw nx ma ny nz oa mb ob oc od oe bi translated">目录</h2><ol class=""><li id="8316" class="mc md it lf b lg of lj og lz oh ma oi mb oj ly ok mi mj mk bi translated"><a class="ae ky" href="https://medium.com/p/93ba34a95729#ca82" rel="noopener">夏普比率定义</a></li><li id="885e" class="mc md it lf b lg ml lj mm lz mn ma mo mb mp ly ok mi mj mk bi translated"><a class="ae ky" href="https://medium.com/p/93ba34a95729#37c8" rel="noopener">使用组合函数和管道计算夏普比率</a></li><li id="3959" class="mc md it lf b lg ml lj mm lz mn ma mo mb mp ly ok mi mj mk bi translated"><a class="ae ky" href="https://medium.com/p/93ba34a95729#0034" rel="noopener">与竞争对手比较夏普比率</a></li><li id="dc3f" class="mc md it lf b lg ml lj mm lz mn ma mo mb mp ly ok mi mj mk bi translated"><a class="ae ky" href="https://medium.com/p/93ba34a95729#6fd2" rel="noopener">警告！夏普比率有其局限性</a></li><li id="a827" class="mc md it lf b lg ml lj mm lz mn ma mo mb mp ly ok mi mj mk bi translated"><a class="ae ky" href="https://medium.com/p/93ba34a95729#63aa" rel="noopener">结论</a></li></ol></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><h2 id="ca82" class="nm nn it bd no np nq dn nr ns nt dp nu lz nv nw nx ma ny nz oa mb ob oc od oe bi translated">1.夏普比率定义</h2><p id="fba4" class="pw-post-body-paragraph lc ld it lf b lg of ju li lj og jx ll lz ol lo lp ma om ls lt mb on lw lx ly im bi translated">投资者有两个相互竞争的目标。他们总是努力使投资回报最大化。但是他们也寻求最小化风险</p><p id="e91b" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll lz ln lo lp ma lr ls lt mb lv lw lx ly im bi translated">夏普比率计算投资者的风险调整回报，并为他们提供一个分数。</p><p id="62a7" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll lz ln lo lp ma lr ls lt mb lv lw lx ly im bi translated">公式如下:</p><p id="c505" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll lz ln lo lp ma lr ls lt mb lv lw lx ly im bi translated"><strong class="lf iu"> <em class="le">夏普比率= (Rp — Rf) /标准差</em> </strong></p><ul class=""><li id="35de" class="mc md it lf b lg lh lj lk lz me ma mf mb mg ly mh mi mj mk bi translated"><strong class="lf iu"> Rp </strong>:根据资产或投资组合的历史数据计算的预期收益或实际收益。</li><li id="bd9b" class="mc md it lf b lg ml lj mm lz mn ma mo mb mp ly mh mi mj mk bi translated"><strong class="lf iu"> Rf: </strong>无风险利率:暗指无风险投资的回报，如美国国债。</li><li id="273d" class="mc md it lf b lg ml lj mm lz mn ma mo mb mp ly mh mi mj mk bi translated"><strong class="lf iu">标准差:</strong>是风险指标。价格越低，投资的波动性越小。</li></ul><p id="9d80" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll lz ln lo lp ma lr ls lt mb lv lw lx ly im bi translated"><strong class="lf iu">如何解读:</strong>如果比值大于1，则认为该股票或投资组合是好的投资。越高越好。</p><h2 id="37c8" class="nm nn it bd no np nq dn nr ns nt dp nu lz nv nw nx ma ny nz oa mb ob oc od oe bi translated">2.使用组合函数和管道来计算夏普比率</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oo op l"/></div></figure><p id="61c6" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll lz ln lo lp ma lr ls lt mb lv lw lx ly im bi translated">为了用yfinance检索股票数据，我们需要使用该公司的股票行情自动收录器。我们也选择周期。下面是我们要检索的内容:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oo op l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oq"><img src="../Images/3bf36ca44ead160f84a9e88822a59c1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HHNcqxxiHWDawaaArETVEg.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">Twitter股票数据</figcaption></figure><blockquote class="kz la lb"><p id="d8c1" class="lc ld le lf b lg lh ju li lj lk jx ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated"><strong class="lf iu">免责声明</strong>:这篇博文仅为教育目的而写。没有任何股票的投资建议或推广。</p></blockquote><p id="12d2" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll lz ln lo lp ma lr ls lt mb lv lw lx ly im bi translated">为了得到预期收益(Rp)，我们需要<strong class="lf iu">(CAGR)</strong>。它是一项投资在特定时期内的年增长率。</p><p id="ea07" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll lz ln lo lp ma lr ls lt mb lv lw lx ly im bi translated"><strong class="lf iu"> CAGR = (EV/BV)^(1/n)-1 </strong></p><p id="287d" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll lz ln lo lp ma lr ls lt mb lv lw lx ly im bi translated">EV =投资的期末价值</p><p id="0952" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll lz ln lo lp ma lr ls lt mb lv lw lx ly im bi translated">BV =投资的起始价值</p><p id="d2e9" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll lz ln lo lp ma lr ls lt mb lv lw lx ly im bi translated">n =投资周期数</p><p id="08e4" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll lz ln lo lp ma lr ls lt mb lv lw lx ly im bi translated">我们将通过使用<em class="le">管道</em>方法链接在一起的不同函数来计算它。</p><p id="12f1" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll lz ln lo lp ma lr ls lt mb lv lw lx ly im bi translated">作为最佳实践，按照khu yen Tran<a class="or os ep" href="https://medium.com/u/84a02493194a?source=post_page-----93ba34a95729--------------------------------" rel="noopener" target="_blank">的建议，每个功能使用一个任务会更有效。我会把她的博客链接放在这篇文章的末尾。</a></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oo op l"/></div></figure><p id="6cdb" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll lz ln lo lp ma lr ls lt mb lv lw lx ly im bi translated">我们现在可以获得Twitter的CAGR，并用制表库打印结果(参见我之前的关于如何使用制表的<a class="ae ky" href="https://medium.com/dev-genius/how-to-easily-print-and-format-tables-in-python-18bbe2e59f5f" rel="noopener">博文</a>)。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oo op l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/a96fb66a560a52ed85ef76dca1a8a27b.png" data-original-src="https://miro.medium.com/v2/resize:fit:556/format:webp/1*0VRjldEvFtytIK4f93rjmQ.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">推特在选定时期的CAGR</figcaption></figure><p id="03a1" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll lz ln lo lp ma lr ls lt mb lv lw lx ly im bi translated">对于标准差计算，我们将使用<strong class="lf iu">年化波动率</strong>。你可以在我之前的博文<a class="ae ky" href="https://medium.com/p/d4e1de53e53b" rel="noopener">这里</a>看到更详细的内容。股票的波动性是一段时间内价格的变化。百分比越高，波动越大(风险也越大)。</p><p id="fbe5" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll lz ln lo lp ma lr ls lt mb lv lw lx ly im bi translated">我们通过乘以252的平方根(交易天数)来计算日收益并按年计算。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oo op l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/bd61cc2eceec330f61c567fa3247cadd.png" data-original-src="https://miro.medium.com/v2/resize:fit:650/format:webp/1*8bzXU7l_lR__njFNK3CS2w.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">Twitter的股票在此期间的波动。相当高！</figcaption></figure><p id="d446" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll lz ln lo lp ma lr ls lt mb lv lw lx ly im bi translated">现在我们已经有了年化波动率和CAGR，我们定义代表无风险利率的<em class="le"> rf </em>参数。在这个练习中，我们假设它是3%。让我们来计算夏普比率！</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oo op l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ov"><img src="../Images/51372cc0aec5be5a885c38dcbcdef4c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:666/format:webp/1*CmQuFG8uqCBlFDlcQUNtIQ.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">Twitter在此期间的夏普比率</figcaption></figure><p id="03f0" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll lz ln lo lp ma lr ls lt mb lv lw lx ly im bi translated">如果夏普比率大于1，则被认为是好的。在0.09，Twitter的股票是一个风险投资。它的回报不足以弥补其高波动性。</p><h2 id="0034" class="nm nn it bd no np nq dn nr ns nt dp nu lz nv nw nx ma ny nz oa mb ob oc od oe bi translated">3.与竞争对手比较夏普比率</h2><p id="f51c" class="pw-post-body-paragraph lc ld it lf b lg of ju li lj og jx ll lz ol lo lp ma om ls lt mb on lw lx ly im bi translated">计算Twitter的夏普比率本身就具有指示性。我们还需要将其与竞争对手进行比较，以评估其优劣。让我们现在得到元(前脸书)和快照夏普比率。您需要导入数据和它们的代码，并使用上一个要点中的最后一个链接。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/9e7fd9ef29c9ec19aad0eb87750caa7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*x8sizheIw_IxM_C7unVb4A.png"/></div></figure><p id="b395" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll lz ln lo lp ma lr ls lt mb lv lw lx ly im bi translated">夏普比率都低于1。这被认为是不利的。Twitter和Meta也有类似的。Snap甚至是负数。</p><h2 id="6fd2" class="nm nn it bd no np nq dn nr ns nt dp nu lz nv nw nx ma ny nz oa mb ob oc od oe bi translated">4.警告！夏普比率有局限性…</h2><ul class=""><li id="9e02" class="mc md it lf b lg of lj og lz oh ma oi mb oj ly mh mi mj mk bi translated">它假设平均回报率呈正态分布。它们应该围绕平均值对称。但金融市场的情况并非如此。由于股票价格会遇到意想不到的涨跌，回报往往会有偏差。</li><li id="c8d7" class="mc md it lf b lg ml lj mm lz mn ma mo mb mp ly mh mi mj mk bi translated">因为计算是基于历史数据的，所以为一只股票或一个投资组合选择的周期是至关重要的。可以通过选择更有利或更不利的时期来调整比率。</li></ul><h2 id="63aa" class="nm nn it bd no np nq dn nr ns nt dp nu lz nv nw nx ma ny nz oa mb ob oc od oe bi translated">5.结论</h2><p id="0dbc" class="pw-post-body-paragraph lc ld it lf b lg of ju li lj og jx ll lz ol lo lp ma om ls lt mb on lw lx ly im bi translated">使用函数和管道在Python中计算夏普比率很有趣。因为它易于计算和解释，所以被广泛使用和流行。这是你包里又一个帮助你评估股票或投资的工具。</p><p id="2e21" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll lz ln lo lp ma lr ls lt mb lv lw lx ly im bi translated">你可以在我的<a class="ae ky" href="https://github.com/khuonglan/Medium_Blog/blob/main/Sharpe_Ratio.ipynb" rel="noopener ugc nofollow" target="_blank"> GitHub repo </a>里找到Jupyter笔记本的所有代码。</p><p id="468d" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll lz ln lo lp ma lr ls lt mb lv lw lx ly im bi translated">如果你喜欢这篇文章，请确保关注我的个人资料，这样你就不会错过我即将发表的任何文章。</p><p id="d9d9" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll lz ln lo lp ma lr ls lt mb lv lw lx ly im bi translated">你也可以在<a class="ae ky" href="https://www.linkedin.com/in/lancaothai/" rel="noopener ugc nofollow" target="_blank"> LinkedIn上找到我。</a></p><p id="1237" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll lz ln lo lp ma lr ls lt mb lv lw lx ly im bi translated">参考资料:</p><p id="7f1b" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll lz ln lo lp ma lr ls lt mb lv lw lx ly im bi translated"><a class="ae ky" href="https://towardsdatascience.com/python-clean-code-6-best-practices-to-make-your-python-functions-more-readable-7ea4c6171d60#:~:text=Since%20each%20function%20does%20one,your%20code%20for%20other%20tasks." rel="noopener" target="_blank"> Python干净代码:让你的Python函数更可读的6个最佳实践| khu yen Tran |迈向数据科学</a></p><p id="706b" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll lz ln lo lp ma lr ls lt mb lv lw lx ly im bi translated"><a class="ae ky" href="https://www.investopedia.com/terms/s/sharperatio.asp" rel="noopener ugc nofollow" target="_blank">夏普比率定义(investopedia.com)</a></p><div class="ox oy gp gr oz pa"><a href="https://medium.com/@Eyquem/membership" rel="noopener follow" target="_blank"><div class="pb ab fo"><div class="pc ab pd cl cj pe"><h2 class="bd iu gy z fp pf fr fs pg fu fw is bi translated">通过我的推荐链接加入Medium-Khuong LAN Cao Thai</h2><div class="ph l"><h3 class="bd b gy z fp pf fr fs pg fu fw dk translated">阅读Khuong lán Cao Thai(以及媒体上成千上万的其他作家)的每一个故事。您的会员费直接…</h3></div><div class="pi l"><p class="bd b dl z fp pf fr fs pg fu fw dk translated">medium.com</p></div></div><div class="pj l"><div class="pk l pl pm pn pj po ks pa"/></div></div></a></div></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><h1 id="91dc" class="pp nn it bd no pq pr ps nr pt pu pv nu jz pw ka nx kc px kd oa kf py kg od pz bi translated">分级编码</h1><p id="c861" class="pw-post-body-paragraph lc ld it lf b lg of ju li lj og jx ll lz ol lo lp ma om ls lt mb on lw lx ly im bi translated">感谢您成为我们社区的一员！在你离开之前:</p><ul class=""><li id="822f" class="mc md it lf b lg lh lj lk lz me ma mf mb mg ly mh mi mj mk bi translated">👏为故事鼓掌，跟着作者走👉</li><li id="beac" class="mc md it lf b lg ml lj mm lz mn ma mo mb mp ly mh mi mj mk bi translated">📰查看<a class="ae ky" href="https://levelup.gitconnected.com/?utm_source=pub&amp;utm_medium=post" rel="noopener ugc nofollow" target="_blank">升级编码出版物</a>中的更多内容</li><li id="a703" class="mc md it lf b lg ml lj mm lz mn ma mo mb mp ly mh mi mj mk bi translated">🔔关注我们:<a class="ae ky" href="https://twitter.com/gitconnected" rel="noopener ugc nofollow" target="_blank">Twitter</a>|<a class="ae ky" href="https://www.linkedin.com/company/gitconnected" rel="noopener ugc nofollow" target="_blank">LinkedIn</a>|<a class="ae ky" href="https://newsletter.levelup.dev" rel="noopener ugc nofollow" target="_blank">时事通讯</a></li></ul><p id="796b" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll lz ln lo lp ma lr ls lt mb lv lw lx ly im bi translated">🚀👉<a class="ae ky" href="https://jobs.levelup.dev/talent/welcome?referral=true" rel="noopener ugc nofollow" target="_blank"> <strong class="lf iu">加入升级人才集体，找到一份神奇的工作</strong> </a></p></div></div>    
</body>
</html>