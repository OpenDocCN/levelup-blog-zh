<html>
<head>
<title>How to Fix AttributeError: module 'numpy' has no attribute 'float'</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何修复属性错误:模块“numpy”没有属性“float”</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/fix-attributeerror-module-numpy-has-no-attribute-float-d7d68c5a4971?source=collection_archive---------0-----------------------#2022-12-26">https://levelup.gitconnected.com/fix-attributeerror-module-numpy-has-no-attribute-float-d7d68c5a4971?source=collection_archive---------0-----------------------#2022-12-26</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="734c" class="pw-subtitle-paragraph jv it iu bd b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km dk translated">升级到numpy 1.24.0后如何解决错误</h2></div><figure class="ko kp kq kr gu ks gi gj paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gi gj kn"><img src="../Images/989588be948f8f851e4f8c48d575ae88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*edCcfI25_xNzdS88Th77ng.jpeg"/></div></div><figcaption class="kz la gk gi gj lb lc bd b be z dk translated">照片由<a class="ae ld" href="https://unsplash.com/@will0629?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">将</a>放在<a class="ae ld" href="https://unsplash.com/photos/DH5183gvKUg?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="233d" class="pw-post-body-paragraph le lf iu lg b lh li jz lj lk ll kc lm ln lo lp lq lr ls lt lu lv lw lx ly lz in bi translated">在过去的几天里，随着最近的<code class="fe jr js jt ju b">numpy</code> v1.24.0发布，许多用户抱怨他们的代码会失败，并出现以下错误:</p><pre class="ko kp kq kr gu ma ju mb bn mc md bi"><span id="092e" class="me mf iu ju b be mg mh l mi mj">AttributeError: module 'numpy' has no attribute 'float'</span></pre><p id="c0e3" class="pw-post-body-paragraph le lf iu lg b lh li jz lj lk ll kc lm ln lo lp lq lr ls lt lu lv lw lx ly lz in bi translated">在本文中，我们将尝试重现该错误，了解我们最初为什么会收到它，并建议一些解决方法，以便您可以快速修复它。</p></div><div class="ab cl mk ml hy mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="in io ip iq ir"><h2 id="c0f1" class="mr mf iu bd ms mt mu dn mv mw mx dp my ln mz na nb lr nc nd ne lv nf ng nh ni bi translated">重现错误</h2><p id="679b" class="pw-post-body-paragraph le lf iu lg b lh nj jz lj lk nk kc lm ln nl lp lq lr nm lt lu lv nn lx ly lz in bi translated">最近升级到<code class="fe jr js jt ju b">numpy</code> v1.24.0的用户报告了此错误。为了重现此错误，让我们创建并激活一个全新的虚拟环境:</p><pre class="ko kp kq kr gu ma ju mb bn mc md bi"><span id="fc8f" class="me mf iu ju b be mg mh l mi mj">python3 -m venv numpy-reproduce-error-venv </span></pre><pre class="no ma ju mb bn mc md bi"><span id="2f27" class="me mf iu ju b be mg mh l mi mj">source numpy-reproduce-error-venv/bin/activate</span></pre><p id="a8cd" class="pw-post-body-paragraph le lf iu lg b lh li jz lj lk ll kc lm ln lo lp lq lr ls lt lu lv lw lx ly lz in bi translated">然后安装<code class="fe jr js jt ju b">numpy</code> 1.24.0:</p><pre class="ko kp kq kr gu ma ju mb bn mc md bi"><span id="de9b" class="me mf iu ju b be mg mh l mi mj">pip install numpy==1.24.0</span></pre><p id="4331" class="pw-post-body-paragraph le lf iu lg b lh li jz lj lk ll kc lm ln lo lp lq lr ls lt lu lv lw lx ly lz in bi translated">现在通过运行<code class="fe jr js jt ju b">python3</code>激活一个python shell，并在shell import numpy:</p><pre class="ko kp kq kr gu ma ju mb bn mc md bi"><span id="0c52" class="me mf iu ju b be mg mh l mi mj">&gt;&gt;&gt; import numpy as np</span></pre><p id="3ab1" class="pw-post-body-paragraph le lf iu lg b lh li jz lj lk ll kc lm ln lo lp lq lr ls lt lu lv lw lx ly lz in bi translated">现在，如果您试图使用numpy的<code class="fe jr js jt ju b">float</code>别名构建一个浮点数:</p><pre class="ko kp kq kr gu ma ju mb bn mc md bi"><span id="991a" class="me mf iu ju b be mg mh l mi mj">&gt;&gt;&gt; x = np.float(10)</span></pre><p id="59f8" class="pw-post-body-paragraph le lf iu lg b lh li jz lj lk ll kc lm ln lo lp lq lr ls lt lu lv lw lx ly lz in bi translated">您最终会看到以下错误:</p><pre class="ko kp kq kr gu ma ju mb bn mc md bi"><span id="9e6a" class="me mf iu ju b be mg mh l mi mj">Traceback (most recent call last):<br/>  File "&lt;stdin&gt;", line 1, in &lt;module&gt;<br/>  File "/Users/username/numpy-reproduce-error-venv/lib/python3.9/site-packages/numpy/__init__.py", line 284, in __getattr__<br/>    raise AttributeError("module {!r} has no attribute "<br/>AttributeError: module 'numpy' has no attribute 'float'</span></pre></div><div class="ab cl mk ml hy mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="in io ip iq ir"><h2 id="a740" class="mr mf iu bd ms mt mu dn mv mw mx dp my ln mz na nb lr nc nd ne lv nf ng nh ni bi translated">为什么我们会看到这个错误？</h2><p id="8ddd" class="pw-post-body-paragraph le lf iu lg b lh nj jz lj lk nk kc lm ln nl lp lq lr nm lt lu lv nn lx ly lz in bi translated">从<code class="fe jr js jt ju b">numpy</code> v1.20开始，<code class="fe jr js jt ju b">numpy.float</code>以及类似的别名(包括<code class="fe jr js jt ju b">numpy.int</code>)都被弃用。</p><blockquote class="np nq nr"><p id="3fd0" class="le lf ns lg b lh li jz lj lk ll kc lm nt lo lp lq nu ls lt lu nv lw lx ly lz in bi translated">长期以来，<code class="fe jr js jt ju b">np.int</code>一直是内置<code class="fe jr js jt ju b">int</code>的别名。这对新来者来说常常是一个困惑的原因，并且主要是由于历史原因而存在。</p><p id="cc21" class="le lf ns lg b lh li jz lj lk ll kc lm nt lo lp lq nu ls lt lu nv lw lx ly lz in bi translated">这些别名已被弃用。下表显示了不推荐使用的别名的完整列表及其确切含义。用第二列中的内容替换第一列中的条目的用法将会产生相同的效果，并且会消除弃用警告。</p><p id="5598" class="le lf ns lg b lh li jz lj lk ll kc lm nt lo lp lq nu ls lt lu nv lw lx ly lz in bi translated">— <a class="ae ld" href="https://numpy.org/doc/stable/release/1.20.0-notes.html#using-the-aliases-of-builtin-types-like-np-int-is-deprecated" rel="noopener ugc nofollow" target="_blank"> numpy 1.20发行说明</a></p></blockquote><p id="130d" class="pw-post-body-paragraph le lf iu lg b lh li jz lj lk ll kc lm ln lo lp lq lr ls lt lu lv lw lx ly lz in bi translated">展望未来，<code class="fe jr js jt ju b">numpy</code> v1.24.0已经完全删除了这些别名，这就是为什么每当使用这些别名时我们都会看到这个错误。</p><blockquote class="np nq nr"><p id="e75c" class="le lf ns lg b lh li jz lj lk ll kc lm nt lo lp lq nu ls lt lu nv lw lx ly lz in bi translated">别名<code class="fe jr js jt ju b">np.object</code>、<code class="fe jr js jt ju b">np.bool</code>、<code class="fe jr js jt ju b">np.float</code>、<code class="fe jr js jt ju b">np.complex</code>、<code class="fe jr js jt ju b">np.str</code>和<code class="fe jr js jt ju b">np.int</code>的弃用已过期(引入NumPy 1.20)。其中一些除了引发错误之外，现在还会给出未来警告，因为它们将来会被映射到NumPy标量。</p><p id="81b4" class="le lf ns lg b lh li jz lj lk ll kc lm nt lo lp lq nu ls lt lu nv lw lx ly lz in bi translated">— <a class="ae ld" href="https://numpy.org/doc/stable/release/1.24.0-notes.html#expired-deprecations" rel="noopener ugc nofollow" target="_blank"> numpy 1.24.0发行说明</a></p></blockquote></div><div class="ab cl mk ml hy mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="in io ip iq ir"><h2 id="e9e7" class="mr mf iu bd ms mt mu dn mv mw mx dp my ln mz na nb lr nc nd ne lv nf ng nh ni bi translated">怎么修</h2><p id="62f1" class="pw-post-body-paragraph le lf iu lg b lh nj jz lj lk nk kc lm ln nl lp lq lr nm lt lu lv nn lx ly lz in bi translated">在大多数情况下，只需将numpy的别名替换成内置的Python类型就可以了。</p><pre class="ko kp kq kr gu ma ju mb bn mc md bi"><span id="da7f" class="me mf iu ju b be mg mh l mi mj">import numpy as np<br/><br/># Instead of numpy's float alias<br/>x = np.float(10)<br/><br/># Use the built-in float<br/>x = float(10)</span></pre><p id="0cc8" class="pw-post-body-paragraph le lf iu lg b lh li jz lj lk ll kc lm ln lo lp lq lr ls lt lu lv lw lx ly lz in bi translated">在v1.20发行说明中，您还可以找到关于如何处理这种弃用的更详细的指南:</p><blockquote class="np nq nr"><p id="9e3c" class="le lf ns lg b lh li jz lj lk ll kc lm nt lo lp lq nu ls lt lu nv lw lx ly lz in bi translated">为了给绝大多数情况一个明确的指导方针，对于类型<code class="fe jr js jt ju b">bool</code>、<code class="fe jr js jt ju b">object</code>、<code class="fe jr js jt ju b">str</code>(和<code class="fe jr js jt ju b">unicode</code>)使用普通版本更短更清晰，一般是一个很好的替代品。对于<code class="fe jr js jt ju b">float</code>和<code class="fe jr js jt ju b">complex</code>,如果您希望更明确地了解精度，您可以使用<code class="fe jr js jt ju b">float64</code>和<code class="fe jr js jt ju b">complex128</code>。</p><p id="00e8" class="le lf ns lg b lh li jz lj lk ll kc lm nt lo lp lq nu ls lt lu nv lw lx ly lz in bi translated">对于<code class="fe jr js jt ju b">np.int</code>，用<code class="fe jr js jt ju b">np.int_</code>或<code class="fe jr js jt ju b">int</code>直接替换也是好的，不会改变行为，但是精度将继续取决于计算机和操作系统。如果您想更清楚地了解当前的使用情况，您有以下选择:</p><p id="203a" class="le lf ns lg b lh li jz lj lk ll kc lm nt lo lp lq nu ls lt lu nv lw lx ly lz in bi translated"><code class="fe jr js jt ju b">- np.int64</code>或<code class="fe jr js jt ju b">np.int32</code>精确指定精度。这确保了结果不会依赖于计算机或操作系统。</p><p id="ba8e" class="le lf ns lg b lh li jz lj lk ll kc lm nt lo lp lq nu ls lt lu nv lw lx ly lz in bi translated"><code class="fe jr js jt ju b">- np.int_</code>或<code class="fe jr js jt ju b">int</code>(默认)，但要注意这取决于电脑和操作系统。</p><p id="74ba" class="le lf ns lg b lh li jz lj lk ll kc lm nt lo lp lq nu ls lt lu nv lw lx ly lz in bi translated">——C类型:<code class="fe jr js jt ju b">np.cint</code> (int)、<code class="fe jr js jt ju b">np.int_</code> (long)、<code class="fe jr js jt ju b">np.longlong</code>。</p><p id="22a1" class="le lf ns lg b lh li jz lj lk ll kc lm nt lo lp lq nu ls lt lu nv lw lx ly lz in bi translated">32位机器上的32位和64位机器上的64位。这可能是用于索引的最佳类型。</p><p id="6501" class="le lf ns lg b lh li jz lj lk ll kc lm nt lo lp lq nu ls lt lu nv lw lx ly lz in bi translated">当与<code class="fe jr js jt ju b">np.dtype(...)</code>或<code class="fe jr js jt ju b">dtype=...</code>一起使用时，如上所述将其更改为数字名称不会影响输出。如果作为标量使用:</p><p id="0fa8" class="le lf ns lg b lh li jz lj lk ll kc lm nt lo lp lq nu ls lt lu nv lw lx ly lz in bi translated">np.float(123)</p><p id="200b" class="le lf ns lg b lh li jz lj lk ll kc lm nt lo lp lq nu ls lt lu nv lw lx ly lz in bi translated">改变它可以微妙地改变结果。在这种情况下，Python版本<code class="fe jr js jt ju b">float(123)</code>或<code class="fe jr js jt ju b">int(12.)</code>通常是更好的，尽管NumPy版本对于与NumPy数组的一致性可能是有用的(例如，NumPy对于像被零除这样的事情表现不同)。</p><p id="f1d8" class="le lf ns lg b lh li jz lj lk ll kc lm nt lo lp lq nu ls lt lu nv lw lx ly lz in bi translated">— <a class="ae ld" href="https://numpy.org/doc/stable/release/1.20.0-notes.html#using-the-aliases-of-builtin-types-like-np-int-is-deprecated" rel="noopener ugc nofollow" target="_blank"> numpy文档</a></p></blockquote><p id="10bf" class="pw-post-body-paragraph le lf iu lg b lh li jz lj lk ll kc lm ln lo lp lq lr ls lt lu lv lw lx ly lz in bi translated">如果您仍然需要<code class="fe jr js jt ju b">numpy</code>标量类型，您可以使用<code class="fe jr js jt ju b">np.float32</code>、<code class="fe jr js jt ju b">np.float64</code>或<code class="fe jr js jt ju b">np.float128</code>:</p><pre class="ko kp kq kr gu ma ju mb bn mc md bi"><span id="0632" class="me mf iu ju b be mg mh l mi mj">&gt;&gt;&gt; x = np.float64(10)</span></pre><p id="c273" class="pw-post-body-paragraph le lf iu lg b lh li jz lj lk ll kc lm ln lo lp lq lr ls lt lu lv lw lx ly lz in bi translated">或者，您仍然可以选择降级您的<code class="fe jr js jt ju b">numpy</code>版本(&lt; 1.24.0)</p></div><div class="ab cl mk ml hy mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="in io ip iq ir"><h2 id="8b5a" class="mr mf iu bd ms mt mu dn mv mw mx dp my ln mz na nb lr nc nd ne lv nf ng nh ni bi translated">最后的想法</h2><p id="f311" class="pw-post-body-paragraph le lf iu lg b lh nj jz lj lk nk kc lm ln nl lp lq lr nm lt lu lv nn lx ly lz in bi translated">在最近的v1.24.0 <code class="fe jr js jt ju b">numpy</code>发布之后，用户会抱怨<code class="fe jr js jt ju b">AttributeError: module ‘numpy’ has no attribute ‘float’</code>。这是因为移除了numpy的float、int和类似数据类型的别名。</p><p id="db48" class="pw-post-body-paragraph le lf iu lg b lh li jz lj lk ll kc lm ln lo lp lq lr ls lt lu lv lw lx ly lz in bi translated">我个人建议尝试修改您的源代码，使其现在引用等效的内置类型，而不是降低您的numpy版本。</p></div><div class="ab cl mk ml hy mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="in io ip iq ir"><p id="1b77" class="pw-post-body-paragraph le lf iu lg b lh li jz lj lk ll kc lm ln lo lp lq lr ls lt lu lv lw lx ly lz in bi translated"><a class="ae ld" href="https://gmyrianthous.medium.com/membership" rel="noopener"> <strong class="lg iv">成为会员</strong> </a> <strong class="lg iv">阅读介质上的每一个故事。你的会员费直接支持我和你看的其他作家。你也可以在媒体上看到所有的故事。</strong></p><div class="nw nx gq gs ny nz"><a href="https://gmyrianthous.medium.com/membership" rel="noopener follow" target="_blank"><div class="oa ab fp"><div class="ob ab oc cl cj od"><h2 class="bd iv gz z fq oe fs ft of fv fx it bi translated">通过我的推荐链接加入Medium-Giorgos Myrianthous</h2><div class="og l"><h3 class="bd b gz z fq oe fs ft of fv fx dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="oh l"><p class="bd b dl z fq oe fs ft of fv fx dk translated">gmyrianthous.medium.com</p></div></div><div class="oi l"><div class="oj l ok ol om oi on kx nz"/></div></div></a></div></div><div class="ab cl mk ml hy mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="in io ip iq ir"><p id="676e" class="pw-post-body-paragraph le lf iu lg b lh li jz lj lk ll kc lm ln lo lp lq lr ls lt lu lv lw lx ly lz in bi translated"><strong class="lg iv">相关文章你可能也喜欢</strong></p><div class="nw nx gq gs ny nz"><a href="https://towardsdatascience.com/diagrams-as-code-python-d9cbaa959ed5" rel="noopener follow" target="_blank"><div class="oa ab fp"><div class="ob ab oc cl cj od"><h2 class="bd iv gz z fq oe fs ft of fv fx it bi translated">Python中作为代码的图</h2><div class="og l"><h3 class="bd b gz z fq oe fs ft of fv fx dk translated">用Python创建云系统架构图</h3></div><div class="oh l"><p class="bd b dl z fq oe fs ft of fv fx dk translated">towardsdatascience.com</p></div></div><div class="oi l"><div class="oo l ok ol om oi on kx nz"/></div></div></a></div></div><div class="ab cl mk ml hy mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="in io ip iq ir"><div class="ko kp kq kr gu nz"><a href="https://towardsdatascience.com/python-poetry-83f184ac9ed1" rel="noopener follow" target="_blank"><div class="oa ab fp"><div class="ob ab oc cl cj od"><h2 class="bd iv gz z fq oe fs ft of fv fx it bi translated">用诗歌管理Python依赖关系</h2><div class="og l"><h3 class="bd b gz z fq oe fs ft of fv fx dk translated">依赖性管理和用诗歌打包</h3></div><div class="oh l"><p class="bd b dl z fq oe fs ft of fv fx dk translated">towardsdatascience.com</p></div></div><div class="oi l"><div class="op l ok ol om oi on kx nz"/></div></div></a></div></div><div class="ab cl mk ml hy mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="in io ip iq ir"><div class="ko kp kq kr gu nz"><a href="https://towardsdatascience.com/data-engineer-tools-c7e68eed28ad" rel="noopener follow" target="_blank"><div class="oa ab fp"><div class="ob ab oc cl cj od"><h2 class="bd iv gz z fq oe fs ft of fv fx it bi translated">数据工程师的工具</h2><div class="og l"><h3 class="bd b gz z fq oe fs ft of fv fx dk translated">数据工程工具箱的基础</h3></div><div class="oh l"><p class="bd b dl z fq oe fs ft of fv fx dk translated">towardsdatascience.com</p></div></div><div class="oi l"><div class="oq l ok ol om oi on kx nz"/></div></div></a></div></div></div>    
</body>
</html>