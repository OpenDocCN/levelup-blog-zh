<html>
<head>
<title>Python NumPy/Pandas for Data Science</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用于数据科学的Python NumPy/Pandas</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/python-numpy-pandas-for-data-science-4b548de8517a?source=collection_archive---------1-----------------------#2020-11-26">https://levelup.gitconnected.com/python-numpy-pandas-for-data-science-4b548de8517a?source=collection_archive---------1-----------------------#2020-11-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="c0d0" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">介绍流行的数据科学图书馆、NumPy和Pandas</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/417bf0963fbf20c382e953c8b28cb5c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9LPHYeYYgyfkLuBGqjWtpw.jpeg"/></div></div></figure><h2 id="c390" class="ku kv it bd kw kx ky dn kz la lb dp lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">介绍熊猫和熊猫</h2><p id="2b51" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly ld lz ma mb lh mc md me ll mf mg mh mi im bi translated">NumPy是Python的一个库，增加了对大型多维数组和矩阵的支持，以及对这些数组进行操作的大量高级数学函数。</p><p id="2fcc" class="pw-post-body-paragraph lq lr it ls b lt mj ju lv lw mk jx ly ld ml ma mb lh mm md me ll mn mg mh mi im bi translated">Pandas是一个基于NumPy包的高级数据操作工具。Pandas中的关键数据结构被称为数据帧。数据框架功能强大得令人难以置信，因为它们允许您以观察行和列的形式存储和操作表格数据。</p><h2 id="e104" class="ku kv it bd kw kx ky dn kz la lb dp lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">安装和使用NumPy和Pandas</h2><p id="a44a" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly ld lz ma mb lh mc md me ll mf mg mh mi im bi translated">首先，我们需要使用Python包管理器安装“<strong class="ls iu"> numpy </strong>”和“<strong class="ls iu">熊猫</strong>”。</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="0bc9" class="ku kv it mp b gy mt mu l mv mw">% <strong class="mp iu">python3 -m pip install numpy pandas</strong></span></pre><p id="bc07" class="pw-post-body-paragraph lq lr it ls b lt mj ju lv lw mk jx ly ld ml ma mb lh mm md me ll mn mg mh mi im bi translated">我们将它们包含在代码中。</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="c86a" class="ku kv it mp b gy mt mu l mv mw">import numpy as np<br/>import pandas as pd</span></pre><p id="2048" class="pw-post-body-paragraph lq lr it ls b lt mj ju lv lw mk jx ly ld ml ma mb lh mm md me ll mn mg mh mi im bi translated">别名“<strong class="ls iu"> numpy </strong>”到“<strong class="ls iu"> np </strong>”和“<strong class="ls iu">熊猫</strong>”和“<strong class="ls iu"> pd </strong>”是可选的，推荐使用。</p><h2 id="b4eb" class="ku kv it bd kw kx ky dn kz la lb dp lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">使用NumPy</h2><p id="4d46" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly ld lz ma mb lh mc md me ll mf mg mh mi im bi translated">NumPy包含了大量有用的数学函数和方法。</p><p id="5580" class="pw-post-body-paragraph lq lr it ls b lt mj ju lv lw mk jx ly ld ml ma mb lh mm md me ll mn mg mh mi im bi translated">例如，如果你想计算正弦<strong class="ls iu">或余弦<strong class="ls iu">或</strong>或<strong class="ls iu">正弦</strong> (θ)和<strong class="ls iu">余弦</strong> (θ)，你可以这样做。</strong></p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="fd01" class="ku kv it mp b gy mt mu l mv mw">print (np.sin(1))<br/><strong class="mp iu">0.8414709848078965</strong></span><span id="1af2" class="ku kv it mp b gy mx mu l mv mw">print (np.cos(1))<br/><strong class="mp iu">0.5403023058681398</strong></span></pre><p id="5e73" class="pw-post-body-paragraph lq lr it ls b lt mj ju lv lw mk jx ly ld ml ma mb lh mm md me ll mn mg mh mi im bi translated">或者你可以做一些更奇特的事情，像这样…</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="9f68" class="ku kv it mp b gy mt mu l mv mw">print (np.pi)<br/><strong class="mp iu">3.141592653589793</strong></span><span id="9d1f" class="ku kv it mp b gy mx mu l mv mw">X = np.linspace(-np.pi, np.pi, 256, endpoint=True)</span><span id="9f17" class="ku kv it mp b gy mx mu l mv mw">print (np.sin(X))<br/><strong class="mp iu">[-1.22464680e-16 -2.46374492e-02 -4.92599411e-02 -7.38525275e-02<br/> -9.84002783e-02 -1.22888291e-01 -1.47301698e-01 -1.71625679e-01<br/> -1.95845467e-01 -2.19946358e-01 -2.43913720e-01 -2.67733003e-01<br/> -2.91389747e-01 -3.14869589e-01 -3.38158275e-01 -3.61241666e-01<br/> -3.84105749e-01 -4.06736643e-01 -4.29120609e-01 -4.51244057e-01<br/> -4.73093557e-01 -4.94655843e-01 -5.15917826e-01 -5.36866598e-01<br/> -5.57489439e-01 -5.77773831e-01 -5.97707459e-01 -6.17278221e-01<br/> -6.36474236e-01 -6.55283850e-01 -6.73695644e-01 -6.91698439e-01<br/> -7.09281308e-01 -7.26433574e-01 -7.43144825e-01 -7.59404917e-01<br/> -7.75203976e-01 -7.90532412e-01 -8.05380919e-01 -8.19740483e-01<br/> -8.33602385e-01 -8.46958211e-01 -8.59799851e-01 -8.72119511e-01<br/> -8.83909710e-01 -8.95163291e-01 -9.05873422e-01 -9.16033601e-01<br/> -9.25637660e-01 -9.34679767e-01 -9.43154434e-01 -9.51056516e-01<br/> -9.58381215e-01 -9.65124085e-01 -9.71281032e-01 -9.76848318e-01<br/> -9.81822563e-01 -9.86200747e-01 -9.89980213e-01 -9.93158666e-01<br/> -9.95734176e-01 -9.97705180e-01 -9.99070481e-01 -9.99829250e-01<br/> -9.99981027e-01 -9.99525720e-01 -9.98463604e-01 -9.96795325e-01<br/> -9.94521895e-01 -9.91644696e-01 -9.88165472e-01 -9.84086337e-01<br/> -9.79409768e-01 -9.74138602e-01 -9.68276041e-01 -9.61825643e-01<br/> -9.54791325e-01 -9.47177357e-01 -9.38988361e-01 -9.30229309e-01<br/> -9.20905518e-01 -9.11022649e-01 -9.00586702e-01 -8.89604013e-01<br/> -8.78081248e-01 -8.66025404e-01 -8.53443799e-01 -8.40344072e-01<br/> -8.26734175e-01 -8.12622371e-01 -7.98017227e-01 -7.82927610e-01<br/> -7.67362681e-01 -7.51331890e-01 -7.34844967e-01 -7.17911923e-01<br/> -7.00543038e-01 -6.82748855e-01 -6.64540179e-01 -6.45928062e-01<br/> -6.26923806e-01 -6.07538946e-01 -5.87785252e-01 -5.67674716e-01<br/> -5.47219547e-01 -5.26432163e-01 -5.05325184e-01 -4.83911424e-01<br/> -4.62203884e-01 -4.40215741e-01 -4.17960345e-01 -3.95451207e-01<br/> -3.72701992e-01 -3.49726511e-01 -3.26538713e-01 -3.03152674e-01<br/> -2.79582593e-01 -2.55842778e-01 -2.31947641e-01 -2.07911691e-01<br/> -1.83749518e-01 -1.59475791e-01 -1.35105247e-01 -1.10652682e-01<br/> -8.61329395e-02 -6.15609061e-02 -3.69514994e-02 -1.23196595e-02<br/>  1.23196595e-02  3.69514994e-02  6.15609061e-02  8.61329395e-02<br/>  1.10652682e-01  1.35105247e-01  1.59475791e-01  1.83749518e-01<br/>  2.07911691e-01  2.31947641e-01  2.55842778e-01  2.79582593e-01<br/>  3.03152674e-01  3.26538713e-01  3.49726511e-01  3.72701992e-01<br/>  3.95451207e-01  4.17960345e-01  4.40215741e-01  4.62203884e-01<br/>  4.83911424e-01  5.05325184e-01  5.26432163e-01  5.47219547e-01<br/>  5.67674716e-01  5.87785252e-01  6.07538946e-01  6.26923806e-01<br/>  6.45928062e-01  6.64540179e-01  6.82748855e-01  7.00543038e-01<br/>  7.17911923e-01  7.34844967e-01  7.51331890e-01  7.67362681e-01<br/>  7.82927610e-01  7.98017227e-01  8.12622371e-01  8.26734175e-01<br/>  8.40344072e-01  8.53443799e-01  8.66025404e-01  8.78081248e-01<br/>  8.89604013e-01  9.00586702e-01  9.11022649e-01  9.20905518e-01<br/>  9.30229309e-01  9.38988361e-01  9.47177357e-01  9.54791325e-01<br/>  9.61825643e-01  9.68276041e-01  9.74138602e-01  9.79409768e-01<br/>  9.84086337e-01  9.88165472e-01  9.91644696e-01  9.94521895e-01<br/>  9.96795325e-01  9.98463604e-01  9.99525720e-01  9.99981027e-01<br/>  9.99829250e-01  9.99070481e-01  9.97705180e-01  9.95734176e-01<br/>  9.93158666e-01  9.89980213e-01  9.86200747e-01  9.81822563e-01<br/>  9.76848318e-01  9.71281032e-01  9.65124085e-01  9.58381215e-01<br/>  9.51056516e-01  9.43154434e-01  9.34679767e-01  9.25637660e-01<br/>  9.16033601e-01  9.05873422e-01  8.95163291e-01  8.83909710e-01<br/>  8.72119511e-01  8.59799851e-01  8.46958211e-01  8.33602385e-01<br/>  8.19740483e-01  8.05380919e-01  7.90532412e-01  7.75203976e-01<br/>  7.59404917e-01  7.43144825e-01  7.26433574e-01  7.09281308e-01<br/>  6.91698439e-01  6.73695644e-01  6.55283850e-01  6.36474236e-01<br/>  6.17278221e-01  5.97707459e-01  5.77773831e-01  5.57489439e-01<br/>  5.36866598e-01  5.15917826e-01  4.94655843e-01  4.73093557e-01<br/>  4.51244057e-01  4.29120609e-01  4.06736643e-01  3.84105749e-01<br/>  3.61241666e-01  3.38158275e-01  3.14869589e-01  2.91389747e-01<br/>  2.67733003e-01  2.43913720e-01  2.19946358e-01  1.95845467e-01<br/>  1.71625679e-01  1.47301698e-01  1.22888291e-01  9.84002783e-02<br/>  7.38525275e-02  4.92599411e-02  2.46374492e-02  1.22464680e-16]</strong></span></pre><p id="ff5b" class="pw-post-body-paragraph lq lr it ls b lt mj ju lv lw mk jx ly ld ml ma mb lh mm md me ll mn mg mh mi im bi translated">目前，我们在NumPy方法和函数前面加上“<strong class="ls iu"> numpy </strong>或“<strong class="ls iu"> np </strong>”。您还可以专门从NumPy库中导入特定的函数。</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="0ad0" class="ku kv it mp b gy mt mu l mv mw">from numpy import pi, cos, sin</span><span id="10ed" class="ku kv it mp b gy mx mu l mv mw">print (pi)<br/><strong class="mp iu">3.141592653589793</strong></span><span id="c214" class="ku kv it mp b gy mx mu l mv mw">print (sin(1))<br/><strong class="mp iu">0.8414709848078965</strong></span><span id="85ed" class="ku kv it mp b gy mx mu l mv mw">print (cos(1))<br/><strong class="mp iu">0.5403023058681398</strong></span></pre><p id="2fc6" class="pw-post-body-paragraph lq lr it ls b lt mj ju lv lw mk jx ly ld ml ma mb lh mm md me ll mn mg mh mi im bi translated">NumPy包含的另一个方便的功能是，“<strong class="ls iu">符号</strong>”。</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="cd79" class="ku kv it mp b gy mt mu l mv mw">from numpy import sign</span><span id="9a1d" class="ku kv it mp b gy mx mu l mv mw">print (sign(10))<br/><strong class="mp iu">1</strong></span><span id="09f6" class="ku kv it mp b gy mx mu l mv mw">print (sign(0))<br/><strong class="mp iu">0</strong></span><span id="228a" class="ku kv it mp b gy mx mu l mv mw">print (sign(-10))<br/><strong class="mp iu">-1</strong></span></pre><p id="1c64" class="pw-post-body-paragraph lq lr it ls b lt mj ju lv lw mk jx ly ld ml ma mb lh mm md me ll mn mg mh mi im bi translated">如果数字为正，则返回1；如果数字为0，则返回0；如果数字为负，则返回-1。</p><p id="54e3" class="pw-post-body-paragraph lq lr it ls b lt mj ju lv lw mk jx ly ld ml ma mb lh mm md me ll mn mg mh mi im bi translated">NumPy数组数据结构也非常强大。让我们举一个例子，有一个一年中几个月的温度列表和我们想要对这些温度进行调整的列表(即每个温度一半)。如果没有NumPy，您将需要遍历列表并对每个元素执行调整。使用NumPy数组，您可以在整个数组上一次性完成此计算。</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="0b93" class="ku kv it mp b gy mt mu l mv mw">import numpy as np</span><span id="aeb6" class="ku kv it mp b gy mx mu l mv mw">temperatures = [4, 3, 7, 9, 11, 14, 16, 17, 12, 11, 9, 9]<br/>adjustments = [0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5]</span><span id="da77" class="ku kv it mp b gy mx mu l mv mw">print (type(temperatures))<br/><strong class="mp iu">&lt;class 'list'&gt;</strong></span><span id="d255" class="ku kv it mp b gy mx mu l mv mw">print (type(adjustments))<br/><strong class="mp iu">&lt;class 'list'&gt;</strong></span><span id="5bde" class="ku kv it mp b gy mx mu l mv mw">array_temperatures = np.array(temperatures)<br/>array_adjustments = np.array(adjustments)</span><span id="7f5e" class="ku kv it mp b gy mx mu l mv mw">print (type(array_temperatures))<br/><strong class="mp iu">&lt;class 'numpy.ndarray'&gt;</strong></span><span id="be5c" class="ku kv it mp b gy mx mu l mv mw">print (type(array_adjustments))<br/><strong class="mp iu">&lt;class 'numpy.ndarray'&gt;</strong></span><span id="2c1f" class="ku kv it mp b gy mx mu l mv mw">print (array_temperatures * array_adjustments)<br/><strong class="mp iu">[2.  1.5 3.5 4.5 5.5 7.  8.  8.5 6.  5.5 4.5 4.5]</strong></span><span id="8691" class="ku kv it mp b gy mx mu l mv mw"><em class="my"># average</em><br/>print (np.mean(temperatures))<br/><strong class="mp iu">10.166666666666666</strong></span><span id="a79a" class="ku kv it mp b gy mx mu l mv mw"><em class="my"># middle</em><br/>print (np.median(temperatures))<br/><strong class="mp iu">10.0</strong></span><span id="4c98" class="ku kv it mp b gy mx mu l mv mw">print (np.min(temperatures))<br/><strong class="mp iu">3</strong></span><span id="5763" class="ku kv it mp b gy mx mu l mv mw">print (np.max(temperatures))<br/><strong class="mp iu">17</strong></span></pre><p id="40d7" class="pw-post-body-paragraph lq lr it ls b lt mj ju lv lw mk jx ly ld ml ma mb lh mm md me ll mn mg mh mi im bi translated"><strong class="ls iu">如果列表中的所有数据都相同，你也可以创建多维数组</strong>。</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="c93d" class="ku kv it mp b gy mt mu l mv mw">import numpy as np</span><span id="f1cc" class="ku kv it mp b gy mx mu l mv mw">temperature_adjustments = [[4, 0.5], [3, 0.5], [7, 0.5], [9, 0.5], [11, 0.5], [14, 0.5], [16, 0.5], [17, 0.5], [12, 0.5], [11, 0.5], [9, 0.5], [9, 0.5]]</span><span id="dbdb" class="ku kv it mp b gy mx mu l mv mw"><em class="my"># list of lists</em><br/>print (temperature_adjustments)<br/><strong class="mp iu">[[4, 0.5], [3, 0.5], [7, 0.5], [9, 0.5], [11, 0.5], [14, 0.5], [16, 0.5], [17, 0.5], [12, 0.5], [11, 0.5], [9, 0.5], [9, 0.5]]</strong></span><span id="98d2" class="ku kv it mp b gy mx mu l mv mw">temperature_adjustments_array = np.array(temperature_adjustments)</span><span id="bab3" class="ku kv it mp b gy mx mu l mv mw"><em class="my"># .shape attribute shows the dimensions of the array</em><br/>print (temperature_adjustments_array.shape)<br/><strong class="mp iu">(12, 2)</strong></span><span id="e4ea" class="ku kv it mp b gy mx mu l mv mw"><em class="my"># 2D multi-dimensional array</em><br/>print (temperature_adjustments_array)<br/><strong class="mp iu">[ 4.   0.5]<br/> [ 3.   0.5]<br/> [ 7.   0.5]<br/> [ 9.   0.5]<br/> [11.   0.5]<br/> [14.   0.5]<br/> [16.   0.5]<br/> [17.   0.5]<br/> [12.   0.5]<br/> [11.   0.5]<br/> [ 9.   0.5]<br/> [ 9.   0.5]]</strong></span><span id="5338" class="ku kv it mp b gy mx mu l mv mw"><em class="my"># prints row 1</em><br/>print (temperature_adjustments_array[0])<br/><strong class="mp iu">[4.  0.5]</strong></span><span id="129e" class="ku kv it mp b gy mx mu l mv mw"><em class="my"># prints row 3, column 1</em><br/>print (temperature_adjustments_array[2,0])<br/><strong class="mp iu">7.0</strong></span><span id="8702" class="ku kv it mp b gy mx mu l mv mw"><em class="my"># prints column 1</em><br/>print (temperature_adjustments_array[:,0:1])<br/><strong class="mp iu">[[ 4.]<br/> [ 3.]<br/> [ 7.]<br/> [ 9.]<br/> [11.]<br/> [14.]<br/> [16.]<br/> [17.]<br/> [12.]<br/> [11.]<br/> [ 9.]<br/> [ 9.]]</strong></span><span id="5396" class="ku kv it mp b gy mx mu l mv mw"><em class="my"># prints column 2</em><br/>print (temperature_adjustments_array[:,1:2])<br/><strong class="mp iu">[[0.5]<br/> [0.5]<br/> [0.5]<br/> [0.5]<br/> [0.5]<br/> [0.5]<br/> [0.5]<br/> [0.5]<br/> [0.5]<br/> [0.5]<br/> [0.5]<br/> [0.5]]</strong></span><span id="b860" class="ku kv it mp b gy mx mu l mv mw"><em class="my"># prints row 4 to row 9 and column 1</em><br/>print (temperature_adjustments_array[3:9,0:1])<br/><strong class="mp iu">[[ 9.]<br/> [11.]<br/> [14.]<br/> [16.]<br/> [17.]<br/> [12.]]</strong></span><span id="6184" class="ku kv it mp b gy mx mu l mv mw"><em class="my"># iterate over all columns on all rows</em><br/>for temperature_adjustments in np.nditer(temperature_adjustments_array):<br/>    print (temperature_adjustments)<br/><strong class="mp iu">4.0<br/>0.5<br/>3.0<br/>0.5<br/>7.0<br/>0.5<br/>9.0<br/>0.5<br/>11.0<br/>0.5<br/>14.0<br/>0.5<br/>16.0<br/>0.5<br/>17.0<br/>0.5<br/>12.0<br/>0.5<br/>11.0<br/>0.5<br/>9.0<br/>0.5<br/>9.0<br/>0.5</strong></span><span id="f2af" class="ku kv it mp b gy mx mu l mv mw"><em class="my"># iterate over all columns on row 4</em><br/>for temperature_adjustments in np.nditer(temperature_adjustments_array[3]):<br/>    print (temperature_adjustments)<br/><strong class="mp iu">9.0<br/>0.5</strong></span></pre><p id="9536" class="pw-post-body-paragraph lq lr it ls b lt mj ju lv lw mk jx ly ld ml ma mb lh mm md me ll mn mg mh mi im bi translated">NumPy文档可以在这里找到。</p><p id="402f" class="pw-post-body-paragraph lq lr it ls b lt mj ju lv lw mk jx ly ld ml ma mb lh mm md me ll mn mg mh mi im bi translated">您还可以进行一些高级统计计算，如下所述。</p><h2 id="2db2" class="ku kv it bd kw kx ky dn kz la lb dp lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">使用熊猫</h2><p id="e6fb" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly ld lz ma mb lh mc md me ll mf mg mh mi im bi translated">DataFrames是熊猫提供的一个强大的数据结构。它类似于NumPy数组，但允许您包含不同类型的数据。</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="4201" class="ku kv it mp b gy mt mu l mv mw">import pandas as pd</span><span id="4381" class="ku kv it mp b gy mx mu l mv mw">data_dict = {<br/>    'temperatures': [4, 3, 7, 9, 11, 14, 16, 17, 12, 11, 9, 9],<br/>    'months': ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec']<br/>}</span><span id="3653" class="ku kv it mp b gy mx mu l mv mw">print (data_dict)<br/><strong class="mp iu">{'temperatures': [4, 3, 7, 9, 11, 14, 16, 17, 12, 11, 9, 9], 'months': ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']}</strong></span><span id="512c" class="ku kv it mp b gy mx mu l mv mw">data_df = pd.DataFrame(data_dict)</span><span id="afc8" class="ku kv it mp b gy mx mu l mv mw">print(data_df)<br/><strong class="mp iu">    temperatures months<br/>0              4    Jan<br/>1              3    Feb<br/>2              7    Mar<br/>3              9    Apr<br/>4             11    May<br/>5             14    Jun<br/>6             16    Jul<br/>7             17    Aug<br/>8             12    Sep<br/>9             11    Oct<br/>10             9    Nov<br/>11             9    Dec</strong></span></pre><p id="20d7" class="pw-post-body-paragraph lq lr it ls b lt mj ju lv lw mk jx ly ld ml ma mb lh mm md me ll mn mg mh mi im bi translated">多好啊。我们的列表字典看起来更像一个电子表格，以一种易于阅读的格式显示。</p><p id="705b" class="pw-post-body-paragraph lq lr it ls b lt mj ju lv lw mk jx ly ld ml ma mb lh mm md me ll mn mg mh mi im bi translated">让我们来看看列表是如何工作的。</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="446e" class="ku kv it mp b gy mt mu l mv mw">import pandas as pd</span><span id="0148" class="ku kv it mp b gy mx mu l mv mw">temperature_adjustments = [[4, 0.5], [3, 0.5], [7, 0.5], [9, 0.5], [11, 0.5], [14, 0.5], [16, 0.5], [17, 0.5], [12, 0.5], [11, 0.5], [9, 0.5], [9, 0.5]]</span><span id="24b5" class="ku kv it mp b gy mx mu l mv mw">temperature_adjustments_df = pd.DataFrame(temperature_adjustments)</span><span id="5485" class="ku kv it mp b gy mx mu l mv mw">print (temperature_adjustments_df)<br/><strong class="mp iu">     0    1<br/>0    4  0.5<br/>1    3  0.5<br/>2    7  0.5<br/>3    9  0.5<br/>4   11  0.5<br/>5   14  0.5<br/>6   16  0.5<br/>7   17  0.5<br/>8   12  0.5<br/>9   11  0.5<br/>10   9  0.5<br/>11   9  0.5</strong></span></pre><p id="aaa6" class="pw-post-body-paragraph lq lr it ls b lt mj ju lv lw mk jx ly ld ml ma mb lh mm md me ll mn mg mh mi im bi translated">这很好，但是第一列是温度，第二列是调节，现在还不明显。您可以像这样包含列名。</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="dc49" class="ku kv it mp b gy mt mu l mv mw">import pandas as pd</span><span id="75c5" class="ku kv it mp b gy mx mu l mv mw">temperature_adjustments = [[4, 0.5], [3, 0.5], [7, 0.5], [9, 0.5], [11, 0.5], [14, 0.5], [16, 0.5], [17, 0.5], [12, 0.5], [11, 0.5], [9, 0.5], [9, 0.5]]</span><span id="6899" class="ku kv it mp b gy mx mu l mv mw">temperature_adjustments_df = pd.DataFrame(temperature_adjustments, columns = ['temperatures', 'adjustments'])</span><span id="f11f" class="ku kv it mp b gy mx mu l mv mw">print (temperature_adjustments_df)<br/><strong class="mp iu">    temperatures  adjustments<br/>0              4          0.5<br/>1              3          0.5<br/>2              7          0.5<br/>3              9          0.5<br/>4             11          0.5<br/>5             14          0.5<br/>6             16          0.5<br/>7             17          0.5<br/>8             12          0.5<br/>9             11          0.5<br/>10             9          0.5<br/>11             9          0.5</strong></span><span id="a577" class="ku kv it mp b gy mx mu l mv mw">print (temperature_adjustments_df.head())<br/><strong class="mp iu">  months  temperatures<br/>0    Jan             4<br/>1    Feb             3<br/>2    Mar             7<br/>3    Apr             9<br/>4    May            11</strong></span></pre><p id="6483" class="pw-post-body-paragraph lq lr it ls b lt mj ju lv lw mk jx ly ld ml ma mb lh mm md me ll mn mg mh mi im bi translated">您还可以将数据从CSV导入数据帧。</p><p id="d702" class="pw-post-body-paragraph lq lr it ls b lt mj ju lv lw mk jx ly ld ml ma mb lh mm md me ll mn mg mh mi im bi translated">我用这些数据创建了一个“<strong class="ls iu"> pandas.csv </strong>”文件。</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="d47a" class="ku kv it mp b gy mt mu l mv mw">months,temperatures<br/>Jan,4<br/>Feb,3<br/>Mar,7<br/>Apr,9<br/>May,11<br/>Jun,14<br/>Jul,16<br/>Aug,17<br/>Sep,12<br/>Oct,11<br/>Nov,9<br/>Dec,9</span></pre><p id="63ac" class="pw-post-body-paragraph lq lr it ls b lt mj ju lv lw mk jx ly ld ml ma mb lh mm md me ll mn mg mh mi im bi translated">然后像这样导入它。</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="0982" class="ku kv it mp b gy mt mu l mv mw">import pandas as pd</span><span id="c1ea" class="ku kv it mp b gy mx mu l mv mw">df = pd.read_csv('./pandas.csv')<br/># optionally: df = pd.read_csv('./pandas.csv', <strong class="mp iu">encoding='utf-8'</strong>)</span><span id="fbdd" class="ku kv it mp b gy mx mu l mv mw">print (df)<br/><strong class="mp iu">   months  temperatures<br/>0     Jan             4<br/>1     Feb             3<br/>2     Mar             7<br/>3     Apr             9<br/>4     May            11<br/>5     Jun            14<br/>6     Jul            16<br/>7     Aug            17<br/>8     Sep            12<br/>9     Oct            11<br/>10    Nov             9<br/>11    Dec             9</strong></span><span id="a9ad" class="ku kv it mp b gy mx mu l mv mw">print (df.columns)<br/><strong class="mp iu">Index(['months', 'temperatures'], dtype='object')</strong></span></pre><p id="3041" class="pw-post-body-paragraph lq lr it ls b lt mj ju lv lw mk jx ly ld ml ma mb lh mm md me ll mn mg mh mi im bi translated">您可以像这样选择数据。</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="30df" class="ku kv it mp b gy mt mu l mv mw">import pandas as pd</span><span id="cd26" class="ku kv it mp b gy mx mu l mv mw">df = pd.read_csv('./pandas.csv')</span><span id="032a" class="ku kv it mp b gy mx mu l mv mw">print (df)<br/><strong class="mp iu">   months  temperatures<br/>0     Jan             4<br/>1     Feb             3<br/>2     Mar             7<br/>3     Apr             9<br/>4     May            11<br/>5     Jun            14<br/>6     Jul            16<br/>7     Aug            17<br/>8     Sep            12<br/>9     Oct            11<br/>10    Nov             9<br/>11    Dec             9</strong></span><span id="49aa" class="ku kv it mp b gy mx mu l mv mw"><em class="my"># select two columns by name</em><br/>print (df[['months', 'temperatures']])<br/><strong class="mp iu">   months  temperatures<br/>0     Jan             4<br/>1     Feb             3<br/>2     Mar             7<br/>3     Apr             9<br/>4     May            11<br/>5     Jun            14<br/>6     Jul            16<br/>7     Aug            17<br/>8     Sep            12<br/>9     Oct            11<br/>10    Nov             9<br/>11    Dec             9</strong></span><span id="860c" class="ku kv it mp b gy mx mu l mv mw"><em class="my"># select rows 5 to 9 by index</em><br/>print (df[4:8])<br/><strong class="mp iu">  months  temperatures<br/>4    May            11<br/>5    Jun            14<br/>6    Jul            16<br/>7    Aug            17</strong></span><span id="7698" class="ku kv it mp b gy mx mu l mv mw"><em class="my"># select all rows and two columns by name</em><br/>print (df.loc[:,'months':'temperatures'])<br/><strong class="mp iu">   months  temperatures<br/>0     Jan             4<br/>1     Feb             3<br/>2     Mar             7<br/>3     Apr             9<br/>4     May            11<br/>5     Jun            14<br/>6     Jul            16<br/>7     Aug            17<br/>8     Sep            12<br/>9     Oct            11<br/>10    Nov             9<br/>11    Dec             9</strong></span><span id="7a06" class="ku kv it mp b gy mx mu l mv mw"><em class="my"># select all rows and column 1</em><br/>print (df.iloc[:,0])<br/><strong class="mp iu">0     Jan<br/>1     Feb<br/>2     Mar<br/>3     Apr<br/>4     May<br/>5     Jun<br/>6     Jul<br/>7     Aug<br/>8     Sep<br/>9     Oct<br/>10    Nov<br/>11    Dec<br/>Name: months, dtype: object</strong></span></pre><p id="8813" class="pw-post-body-paragraph lq lr it ls b lt mj ju lv lw mk jx ly ld ml ma mb lh mm md me ll mn mg mh mi im bi translated">你可以像这样做一些非常奇特的过滤。</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="2ecb" class="ku kv it mp b gy mt mu l mv mw">import pandas as pd</span><span id="f13c" class="ku kv it mp b gy mx mu l mv mw">df = pd.read_csv('./pandas.csv')</span><span id="51ba" class="ku kv it mp b gy mx mu l mv mw">tempsabove9 = df['temperatures'] &gt; 9</span><span id="e4d3" class="ku kv it mp b gy mx mu l mv mw">print (type(tempsabove9))<br/><strong class="mp iu">&lt;class 'pandas.core.series.Series'&gt;</strong></span><span id="7295" class="ku kv it mp b gy mx mu l mv mw">print (tempsabove9)<br/><strong class="mp iu">0     False<br/>1     False<br/>2     False<br/>3     False<br/>4      True<br/>5      True<br/>6      True<br/>7      True<br/>8      True<br/>9      True<br/>10    False<br/>11    False</strong></span><span id="9349" class="ku kv it mp b gy mx mu l mv mw">print (df[tempsabove9])<br/><strong class="mp iu">  months  temperatures<br/>4    May            11<br/>5    Jun            14<br/>6    Jul            16<br/>7    Aug            17<br/>8    Sep            12<br/>9    Oct            11</strong></span></pre><p id="17de" class="pw-post-body-paragraph lq lr it ls b lt mj ju lv lw mk jx ly ld ml ma mb lh mm md me ll mn mg mh mi im bi translated">使用DataFrames时的两个常见问题是空值或不正确的列类型。</p><p id="886d" class="pw-post-body-paragraph lq lr it ls b lt mj ju lv lw mk jx ly ld ml ma mb lh mm md me ll mn mg mh mi im bi translated">您可以使用。info()方法。</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="61ff" class="ku kv it mp b gy mt mu l mv mw">print (data.info())<br/><strong class="mp iu">&lt;class 'pandas.core.frame.DataFrame'&gt;<br/>RangeIndex: 300 entries, 299 to 0<br/>Data columns (total 7 columns):<br/> #   Column    Non-Null Count  Dtype  <br/>---  ------    --------------  -----  <br/> 0   iso8601   300 non-null    int64  <br/> 1   datetime  300 non-null    object <br/> 2   low       300 non-null    float64<br/> 3   high      300 non-null    float64<br/> 4   open      300 non-null    float64<br/> 5   close     300 non-null    float64<br/> 6   volume    300 non-null    float64<br/>dtypes: float64(5), int64(1), object(1)<br/>memory usage: 16.5+ KB<br/>None</strong></span></pre><p id="8481" class="pw-post-body-paragraph lq lr it ls b lt mj ju lv lw mk jx ly ld ml ma mb lh mm md me ll mn mg mh mi im bi translated">你会看到我的“<strong class="ls iu">日期时间</strong>字段是一个错误的对象。我可以像这样将列改写为“<strong class="ls iu">日期时间</strong>”。</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="49e5" class="ku kv it mp b gy mt mu l mv mw">data['datetime']= pd.to_datetime(data['datetime'])</span></pre><p id="21a4" class="pw-post-body-paragraph lq lr it ls b lt mj ju lv lw mk jx ly ld ml ma mb lh mm md me ll mn mg mh mi im bi translated">而现在…</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="f16a" class="ku kv it mp b gy mt mu l mv mw">print (data.info())<br/><strong class="mp iu">&lt;class 'pandas.core.frame.DataFrame'&gt;<br/>RangeIndex: 300 entries, 299 to 0<br/>Data columns (total 7 columns):<br/> #   Column    Non-Null Count  Dtype  <br/>---  ------    --------------  -----  <br/> 0   iso8601   300 non-null    int64  <br/> 1   datetime  300 non-null    datetime64[ns] <br/> 2   low       300 non-null    float64<br/> 3   high      300 non-null    float64<br/> 4   open      300 non-null    float64<br/> 5   close     300 non-null    float64<br/> 6   volume    300 non-null    float64<br/>dtypes: float64(5), int64(1), object(1)<br/>memory usage: 16.5+ KB<br/>None</strong></span></pre><p id="5b0e" class="pw-post-body-paragraph lq lr it ls b lt mj ju lv lw mk jx ly ld ml ma mb lh mm md me ll mn mg mh mi im bi translated">计算熊猫的累积移动平均线(CMA)、指数移动平均线(EMA)、简单移动平均线(SMA)也很琐碎。</p><p id="7be0" class="pw-post-body-paragraph lq lr it ls b lt mj ju lv lw mk jx ly ld ml ma mb lh mm md me ll mn mg mh mi im bi translated">如果我们采用一个名为“<strong class="ls iu"> df </strong>的市场交易数据框架和一个名为“<strong class="ls iu"> close </strong>”的收盘价列，您可以计算并添加移动平均线，如下所示。</p><h2 id="0794" class="ku kv it bd kw kx ky dn kz la lb dp lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">累积移动平均线</h2><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="52f9" class="ku kv it mp b gy mt mu l mv mw">df['cma'] = df.close.expanding().mean()</span></pre><h2 id="cb6b" class="ku kv it bd kw kx ky dn kz la lb dp lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">指数移动平均线</h2><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="4896" class="ku kv it mp b gy mt mu l mv mw">df['ema12'] = df.close.ewm(span=12, adjust=False).mean()<br/>df['ema26'] = df.close.ewm(span=26, adjust=False).mean()</span></pre><h2 id="1067" class="ku kv it bd kw kx ky dn kz la lb dp lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">简单移动平均线</h2><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="8576" class="ku kv it mp b gy mt mu l mv mw">df['sma20'] = df.close.rolling(20, min_periods=1).mean()<br/>df['sma50'] = df.close.rolling(50, min_periods=1).mean()<br/>df['sma200'] = df.close.rolling(200, min_periods=1).mean()</span></pre><p id="2b1d" class="pw-post-body-paragraph lq lr it ls b lt mj ju lv lw mk jx ly ld ml ma mb lh mm md me ll mn mg mh mi im bi translated">我希望你觉得这篇文章有趣并且有用。如果您想随时了解情况，请不要忘记关注我并注册我的<a class="ae mz" href="https://whittle.medium.com/subscribe" rel="noopener">电子邮件通知</a>。</p><h1 id="1323" class="na kv it bd kw nb nc nd kz ne nf ng lc jz nh ka lg kc ni kd lk kf nj kg lo nk bi translated">迈克尔·惠特尔</h1><ul class=""><li id="04d1" class="nl nm it ls b lt lu lw lx ld nn lh no ll np mi nq nr ns nt bi translated"><strong class="ls iu"> <em class="my">如果你喜欢这个，请</em> </strong> <a class="ae mz" href="https://whittle.medium.com/" rel="noopener"> <strong class="ls iu"> <em class="my">跟我上媒</em> </strong> </a></li><li id="436f" class="nl nm it ls b lt nu lw nv ld nw lh nx ll ny mi nq nr ns nt bi translated"><strong class="ls iu"> <em class="my">更多有趣的文章，请</em> </strong> <a class="ae mz" href="https://medium.com/trading-data-analysis" rel="noopener"> <strong class="ls iu"> <em class="my">关注我的刊物</em> </strong> </a></li><li id="9379" class="nl nm it ls b lt nu lw nv ld nw lh nx ll ny mi nq nr ns nt bi translated"><strong class="ls iu"> <em class="my">有兴趣合作吗？</em> </strong> <a class="ae mz" href="https://www.linkedin.com/in/miwhittle/" rel="noopener ugc nofollow" target="_blank"> <strong class="ls iu"> <em class="my">我们上LinkedIn </em> </strong> </a>连线吧</li><li id="f45c" class="nl nm it ls b lt nu lw nv ld nw lh nx ll ny mi nq nr ns nt bi translated"><strong class="ls iu"> <em class="my">支持我和其他媒体作者</em> </strong> <a class="ae mz" href="https://whittle.medium.com/membership" rel="noopener"> <strong class="ls iu"> <em class="my">在此报名</em> </strong> </a></li><li id="872e" class="nl nm it ls b lt nu lw nv ld nw lh nx ll ny mi nq nr ns nt bi translated"><strong class="ls iu"> <em class="my">请别忘了为文章鼓掌:)←谢谢！</em>T55】</strong></li></ul></div></div>    
</body>
</html>