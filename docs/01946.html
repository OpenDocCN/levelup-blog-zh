<html>
<head>
<title>Lodash Features that are Available in Plain JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">普通JavaScript中可用的Lodash特性</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/lodash-features-that-are-available-in-plain-javascript-2600a9f0bd01?source=collection_archive---------17-----------------------#2020-02-07">https://levelup.gitconnected.com/lodash-features-that-are-available-in-plain-javascript-2600a9f0bd01?source=collection_archive---------17-----------------------#2020-02-07</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/95f73a4a8071a6efbd94a1c8be3623c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*4ikdzYiS9u5xmVhQ"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">Joshua J. Cotten 在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="6c39" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">近年来，JavaScript中的新特性一直在快速发展。之前由其他库填补的不足，已经成为普通JavaScript的内置特性。</p><p id="0ea3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本文中，我们将看看现在普通JavaScript中可用的Lodash方法。</p><h1 id="7c3e" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">地图</h1><p id="8654" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">Lodash有一个<code class="fe mh mi mj mk b">map</code>方法，通过我们指定的函数将每个数组条目映射到另一个。它接受一个数组和一个函数来将条目转换为参数。</p><p id="5c38" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以这样调用Lodash的<code class="fe mh mi mj mk b">map</code>方法:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="7438" class="mt lf it mk b gy mu mv l mw mx">const arr = _.map([1, 2, 3], n =&gt; n ** 2);</span></pre><p id="cbb0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们回来了:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="85b2" class="mt lf it mk b gy mu mv l mw mx">[1, 4, 9]</span></pre><p id="5000" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">JavaScript的数组现在有了<code class="fe mh mi mj mk b">map</code>方法。我们可以如下使用它:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="1f9a" class="mt lf it mk b gy mu mv l mw mx">const arr = [1, 2, 3].map(n =&gt; n ** 2);</span></pre><p id="674c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">它也返回一个新的数组，但是少了一个参数，因为它是数组中的一个方法。</p><h1 id="67aa" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">过滤器</h1><p id="f706" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">Lodash中的<code class="fe mh mi mj mk b">filter</code>方法返回一个新数组，该数组包含原始数组中经过过滤的条目。它采用一个数组和一个函数作为参数返回过滤器的条件。</p><p id="7104" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="86d7" class="mt lf it mk b gy mu mv l mw mx">const arr = _.filter([1, 2, 3], n =&gt; n % 2 === 0);</span></pre><p id="8f61" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">返回一个只有偶数的数组。</p><p id="20fa" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">使用JavaScript数组的<code class="fe mh mi mj mk b">filter</code>方法，我们可以稍微简化代码，因为它是在数组本身上调用的。我们可以把它改写成:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="811f" class="mt lf it mk b gy mu mv l mw mx">const arr = [1, 2, 3].filter(n =&gt; n % 2 === 0);</span></pre><p id="5db1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这两种情况下，我们都返回了<code class="fe mh mi mj mk b">[2]</code>。</p><h1 id="19a6" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">减少</h1><p id="bbc7" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">像其他两个数组方法一样，Lodash的<code class="fe mh mi mj mk b">reduce</code>方法现在有了一个同名的普通JavaScript等价方法。它们都允许我们将数组条目合并成一个东西。</p><p id="0d34" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，要获得数组中所有条目的总和，我们可以使用Lodash <code class="fe mh mi mj mk b">reduce</code>方法，如下所示:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="a88f" class="mt lf it mk b gy mu mv l mw mx">const arr = _.reduce([1, 2, 3], (total, n) =&gt; total + n, 0);</span></pre><p id="41a9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Lodash版本有3个参数，即要组合的数组、用于组合值的函数和组合值的初始值。</p><p id="bd50" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">对于JavaScript array的<code class="fe mh mi mj mk b">reduce</code>方法，除了我们直接在数组上调用它之外，它是类似的，如下所示:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="0a9f" class="mt lf it mk b gy mu mv l mw mx">const arr = [1, 2, 3].reduce((total, n) =&gt; total + n, 0);</span></pre><p id="9c59" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这两种情况下，结果都是6。</p><h1 id="aa2b" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">头</h1><p id="2697" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">Lodash的<code class="fe mh mi mj mk b">head</code>方法返回数组的第一个元素。例如:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="162f" class="mt lf it mk b gy mu mv l mw mx">const first = _.head([3, 4, 5]);</span></pre><p id="8a6a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">会得到us 3作为<code class="fe mh mi mj mk b">first</code>的值。</p><p id="af2f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以通过编写以下代码用JavaScript实现这一点:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="8285" class="mt lf it mk b gy mu mv l mw mx">[3, 4, 5][0]</span></pre><p id="785e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">或者:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="53ea" class="mt lf it mk b gy mu mv l mw mx">const [first] = [3, 4, 5];</span></pre><figure class="ml mm mn mo gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi my"><img src="../Images/31f91c922e939f00375400bc9be2ccd0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JcKPX_bhiWK3F4gP"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">塔玛拉·比利斯在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><h1 id="15a1" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">尾巴</h1><p id="1429" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">Lodash的<code class="fe mh mi mj mk b">tail</code>方法将获取除数组第一个条目之外的所有内容。</p><p id="4a6c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以如下使用它:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="d229" class="mt lf it mk b gy mu mv l mw mx">const rest = _.tail([3, 4, 5]);</span></pre><p id="72f5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们得到<code class="fe mh mi mj mk b">[4, 5]</code>作为<code class="fe mh mi mj mk b">rest</code>的值。</p><p id="c44c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以编写以下代码，通过编写来获取数组中除第一个元素之外的所有元素:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="0350" class="mt lf it mk b gy mu mv l mw mx">const rest = [3, 4, 5].slice(1);</span></pre><p id="c859" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">或者:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="be72" class="mt lf it mk b gy mu mv l mw mx">const [firs, ...rest] = [3, 4, 5];</span></pre><p id="19da" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">spread操作符将把存储在<code class="fe mh mi mj mk b">rest</code>变量中的其余元素作为数组提供给我们，所以我们得到了相同的结果。</p><h1 id="7a8f" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">休息</h1><p id="d6b1" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">Lodash的<code class="fe mh mi mj mk b">rest</code>方法获得传递给回调函数的额外参数，我们传递给它的参数超过了参数的数量，并返回一个函数，让我们用这些额外的参数做一些事情。</p><p id="844b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，如果我们有:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="610a" class="mt lf it mk b gy mu mv l mw mx">const restFn = _.rest((first, rest) =&gt; rest);</span></pre><p id="061c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后调用<code class="fe mh mi mj mk b">restFn(“foo”, “bar”, “baz”);</code>将返回<code class="fe mh mi mj mk b">[“bar”, “baz”]</code>。</p><p id="3413" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们让rest操作符在JavaScript的rest操作符中做同样的事情:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="492c" class="mt lf it mk b gy mu mv l mw mx">const restFn = (first, ...rest) =&gt; rest</span></pre><h1 id="7f2d" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">传播</h1><p id="57da" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">在Lodash中，<code class="fe mh mi mj mk b">spread</code>方法将返回一个接受回调函数的函数，然后返回一个我们传入的函数，其中我们使用一个数组作为传入的回调函数的参数。</p><p id="c513" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，如果我们有:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="5335" class="mt lf it mk b gy mu mv l mw mx">const spreadFn = _.spread((foo, bar) =&gt; `${foo} ${bar}`);</span></pre><p id="6b6b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">那么当我们调用<code class="fe mh mi mj mk b">spreadFn</code>时如下:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="8450" class="mt lf it mk b gy mu mv l mw mx">spreadFn(["foo", "bar", "baz"])</span></pre><p id="ed6a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们回来了:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="e148" class="mt lf it mk b gy mu mv l mw mx">'foo bar'</span></pre><p id="a5f6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">它将获取传入<code class="fe mh mi mj mk b">spreadFn</code>的数组的每个条目，并将其作为函数的参数传递给<code class="fe mh mi mj mk b">spread</code>方法。</p><p id="ba67" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这与在JavaScript中调用函数是一样的:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="3624" class="mt lf it mk b gy mu mv l mw mx">const spreadFn = function(foo, bar) {<br/>  return `${foo} ${bar}`;<br/>}</span></pre><p id="3661" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们可以在函数上使用<code class="fe mh mi mj mk b">apply</code>方法来做同样的事情:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="6956" class="mt lf it mk b gy mu mv l mw mx">spreadFn.apply(null, ["foo", "bar", "baz"])</span></pre><p id="23a7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们得到了同样的结果。</p><p id="e23b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">正如我们所看到的，Lodash中的许多方法在普通JavaScript中都有对等物，尤其是数组方法。因此，为了减少对库的依赖，我们可以在这里使用更简单的JavaScript替换来替换Lodash方法的现有使用，当它们使代码更干净、更轻便时。</p></div></div>    
</body>
</html>