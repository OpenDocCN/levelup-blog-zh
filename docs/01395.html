<html>
<head>
<title>Add Popups and Menus Easily with V-Click-Outside</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用V-Click-Outside轻松添加弹出窗口和菜单</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/add-popups-and-menus-easily-with-v-click-outside-179c8e5c01fa?source=collection_archive---------2-----------------------#2019-12-22">https://levelup.gitconnected.com/add-popups-and-menus-easily-with-v-click-outside-179c8e5c01fa?source=collection_archive---------2-----------------------#2019-12-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/3694f930b1200e9b968730e26096865c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Ww0ZEX_SMw6qswVB"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">乔尔·霍兰德在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</figcaption></figure><p id="a349" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">弹出窗口和菜单是web应用程序中的常见功能。它通常用于为用户提供一个地方，让他们在应用程序中添加功能。它的使用频率导致开发人员开发了一些库，供我们在应用程序中添加弹出窗口和菜单。像Bootstrap这样的UI库有内置菜单。对于定制菜单，我们可以通过创建一个div来添加一个，这个div带有一个切换菜单打开和关闭的按钮。</p><p id="98d6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当用户在菜单和按钮之外单击时，菜单会关闭。对于Vue.js应用程序，我们有V-Click-Outside库来处理元素外部的点击。我们可以很容易地使用它来添加弹出窗口和菜单到我们的应用程序。</p><p id="322e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本文中，我们将编写一个笔记应用程序，让用户做笔记。将有一个显示注释的表格，每行有一个弹出菜单，让用户单击按钮来编辑或删除注释。为了开始构建项目，我们通过运行以下命令来运行Vue CLI:</p><pre class="le lf lg lh gt li lj lk ll aw lm bi"><span id="d258" class="ln lo it lj b gy lp lq l lr ls">npx @vue/cli create bookmark-app</span></pre><p id="0b3e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当向导运行时，我们选择“手动选择功能”，并选择Babel、CSS预处理器、Vuex和Vue路由器。</p><p id="79c1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">接下来，我们安装一些包。我们需要Axios向我们的后端发出HTTP请求，Bootstrap-Vue用于样式化，Vee-Validate用于表单验证，V-Click-Outside用于处理输入的焦点状态。为了安装包，我们运行<code class="fe lt lu lv lj b">npm i axios bootstrap-vue vee-validate v-click-outside</code>。安装完软件包后，我们就可以开始构建笔记应用程序了。</p><p id="aca6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">首先，我们创建表单让用户添加和编辑他们的账单。在<code class="fe lt lu lv lj b">components</code>文件夹中，创建一个名为<code class="fe lt lu lv lj b">NoteForm.vue</code>的文件，并添加:</p><pre class="le lf lg lh gt li lj lk ll aw lm bi"><span id="5c4a" class="ln lo it lj b gy lp lq l lr ls">&lt;template&gt;<br/>  &lt;ValidationObserver ref="observer" v-slot="{ invalid }"&gt;<br/>    &lt;b-form <a class="ae kf" href="http://twitter.com/submit" rel="noopener ugc nofollow" target="_blank">@submit</a>.prevent="onSubmit" novalidate&gt;<br/>      &lt;b-form-group&gt;<br/>        &lt;ValidationProvider name="name" rules="required" v-slot="{ errors }"&gt;<br/>          &lt;label&gt;Name&lt;/label&gt;<br/>          &lt;b-form-input<br/>            type="text"<br/>            v-model="form.name"<br/>            placeholder="Name"<br/>            name="name"<br/>            :state="errors.length == 0"<br/>          &gt;&lt;/b-form-input&gt;<br/>          &lt;b-form-invalid-feedback :state="errors.length == 0"&gt;Name is requied.&lt;/b-form-invalid-feedback&gt;<br/>        &lt;/ValidationProvider&gt;<br/>      &lt;/b-form-group&gt;</span><span id="1370" class="ln lo it lj b gy lw lq l lr ls">      &lt;b-form-group&gt;<br/>        &lt;ValidationProvider name="note" rules="required" v-slot="{ errors }"&gt;<br/>          &lt;label&gt;Note&lt;/label&gt;<br/>          &lt;b-form-textarea<br/>            type="text"<br/>            :state="errors.length == 0"<br/>            v-model="form.note"<br/>            required<br/>            placeholder="Note"<br/>            name="note"<br/>            rows="5"<br/>          &gt;&lt;/b-form-textarea&gt;<br/>          &lt;b-form-invalid-feedback :state="errors.length == 0"&gt;{{errors.join('. ')}}&lt;/b-form-invalid-feedback&gt;<br/>        &lt;/ValidationProvider&gt;<br/>      &lt;/b-form-group&gt;</span><span id="a36e" class="ln lo it lj b gy lw lq l lr ls">      &lt;b-button type="submit" variant="primary" style="margin-right: 10px"&gt;Submit&lt;/b-button&gt;<br/>      &lt;b-button type="reset" variant="danger" <a class="ae kf" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>="cancel()"&gt;Cancel&lt;/b-button&gt;<br/>    &lt;/b-form&gt;<br/>  &lt;/ValidationObserver&gt;<br/>&lt;/template&gt;</span><span id="831e" class="ln lo it lj b gy lw lq l lr ls">&lt;script&gt;<br/>import { requestsMixin } from "@/mixins/requestsMixin";</span><span id="d410" class="ln lo it lj b gy lw lq l lr ls">export default {<br/>  name: "NoteForm",<br/>  mixins: [requestsMixin],<br/>  props: {<br/>    note: Object,<br/>    edit: Boolean<br/>  },<br/>  methods: {<br/>    async onSubmit() {<br/>      const isValid = await this.$refs.observer.validate();<br/>      if (!isValid) {<br/>        return;<br/>      }</span><span id="81b0" class="ln lo it lj b gy lw lq l lr ls">      if (this.edit) {<br/>        await this.editNote(this.form);<br/>      } else {<br/>        await this.addNote(this.form);<br/>      }<br/>      const { data } = await this.getNotes();<br/>      this.$store.commit("setNotes", data);<br/>      this.$emit("saved");<br/>    },<br/>    cancel() {<br/>      this.$emit("cancelled");<br/>    }<br/>  },<br/>  data() {<br/>    return {<br/>      form: {}<br/>    };<br/>  },<br/>  watch: {<br/>    note: {<br/>      handler(val) {<br/>        this.form = JSON.parse(JSON.stringify(val || {}));<br/>      },<br/>      deep: true,<br/>      immediate: true<br/>    }<br/>  }<br/>};<br/>&lt;/script&gt;</span></pre><p id="58aa" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">该表单允许用户使用给定的关键字搜索菜肴，然后返回菜肴的配料列表，然后用户可以将它们添加到删除重复项的列表中。我们使用Vee-Validate来验证我们的输入。我们使用<code class="fe lt lu lv lj b">ValidationObserver</code>组件来观察组件内部表单的有效性，使用<code class="fe lt lu lv lj b">ValidationProvider</code>来检查组件内部输入值的有效性规则。在<code class="fe lt lu lv lj b">ValidationProvider</code>中，我们为文本输入字段提供了BootstrapVue输入。在<code class="fe lt lu lv lj b">b-form-input</code>组件中。我们还添加了Vee-Validate验证，以确保用户在提交之前填写了日期。我们在<code class="fe lt lu lv lj b">rules</code>道具中制作了必需的<code class="fe lt lu lv lj b">name</code>和<code class="fe lt lu lv lj b">note </code>字段，这样用户就必须输入它们来保存笔记。</p><p id="eba1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们通过运行<code class="fe lt lu lv lj b">this.$refs.observer.validate()</code>来验证<code class="fe lt lu lv lj b">onSubmit</code>函数中的值。如果解析为<code class="fe lt lu lv lj b">true</code>，那么我们运行代码，通过调用<code class="fe lt lu lv lj b">if</code>块中的函数来保存数据，然后我们调用<code class="fe lt lu lv lj b">getNotes</code>来获取注释。这些功能来自我们将要添加的<code class="fe lt lu lv lj b">requestsMixin</code>。通过调用<code class="fe lt lu lv lj b">this.$store.commit</code>将获得的数据存储在我们的Vuex存储中。</p><p id="dd31" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这个组件中，我们还有一个<code class="fe lt lu lv lj b">watch</code>块来观察<code class="fe lt lu lv lj b">note </code>值，该值是从我们必须构建的Vuex存储中获得的。随着<code class="fe lt lu lv lj b">note </code>值的更新，我们获得了最新的配料列表，这样当我们将这些值复制到<code class="fe lt lu lv lj b">this.form</code>时，用户可以编辑最新的列表。</p><p id="273a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">接下来，我们创建一个<code class="fe lt lu lv lj b">mixins</code>文件夹，并将<code class="fe lt lu lv lj b">requestsMixin.js</code>添加到<code class="fe lt lu lv lj b">mixins</code>文件夹中。在文件中，我们添加了:</p><pre class="le lf lg lh gt li lj lk ll aw lm bi"><span id="958e" class="ln lo it lj b gy lp lq l lr ls">const APIURL = "<a class="ae kf" href="http://localhost:3000" rel="noopener ugc nofollow" target="_blank">http://localhost:3000</a>";<br/>const axios = require("axios");</span><span id="9d58" class="ln lo it lj b gy lw lq l lr ls">export const requestsMixin = {<br/>  methods: {<br/>    getNotes() {<br/>      return axios.get(`${APIURL}/notes`);<br/>    },</span><span id="2f92" class="ln lo it lj b gy lw lq l lr ls">    addNote(data) {<br/>      return axios.post(`${APIURL}/notes`, data);<br/>    },</span><span id="bfaa" class="ln lo it lj b gy lw lq l lr ls">    editNote(data) {<br/>      return axios.put(`${APIURL}/notes/${data.id}`, data);<br/>    },</span><span id="0df3" class="ln lo it lj b gy lw lq l lr ls">    deleteNote(id) {<br/>      return axios.delete(`${APIURL}/notes/${id}`);<br/>    }<br/>  }<br/>};</span></pre><p id="fc42" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这些是我们在组件中使用的函数，用于向后端发出HTTP请求以保存书签。</p><p id="3b22" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">接下来在<code class="fe lt lu lv lj b">Home.vue</code>中，将现有代码替换为:</p><pre class="le lf lg lh gt li lj lk ll aw lm bi"><span id="c051" class="ln lo it lj b gy lp lq l lr ls">&lt;template&gt;<br/>  &lt;div class="page"&gt;<br/>    &lt;h1 class="text-center"&gt;Note Taking App&lt;/h1&gt;<br/>    &lt;b-button-toolbar&gt;<br/>      &lt;b-button <a class="ae kf" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>="openAddModal()"&gt;Add Note&lt;/b-button&gt;<br/>    &lt;/b-button-toolbar&gt;<br/>    &lt;br /&gt;<br/>    &lt;b-table-simple responsive&gt;<br/>      &lt;b-thead&gt;<br/>        &lt;b-tr&gt;<br/>          &lt;b-th&gt;Name&lt;/b-th&gt;<br/>          &lt;b-th&gt;Note&lt;/b-th&gt;<br/>          &lt;b-th&gt;&lt;/b-th&gt;<br/>        &lt;/b-tr&gt;<br/>      &lt;/b-thead&gt;<br/>      &lt;b-tbody&gt;<br/>        &lt;b-tr v-for="n in notes" :key="n.id"&gt;<br/>          &lt;b-td&gt;{{n.name}}&lt;/b-td&gt;<br/>          &lt;b-td&gt;{{n.note}}&lt;/b-td&gt;<br/>          &lt;b-td&gt;<br/>            &lt;b-button <a class="ae kf" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>="toggleMenu(n.id)" class="menu-button"&gt;Menu&lt;/b-button&gt;<br/>            &lt;div class="dropdown" v-show="openMenu[n.id]" v-click-outside="onClickOutside"&gt;<br/>              &lt;b-list-group&gt;<br/>                &lt;b-list-group-item <a class="ae kf" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>="openEditModal(n)"&gt;Edit&lt;/b-list-group-item&gt;<br/>                &lt;b-list-group-item <a class="ae kf" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>="deleteOneNote(n.id)"&gt;Delete&lt;/b-list-group-item&gt;<br/>              &lt;/b-list-group&gt;<br/>            &lt;/div&gt;<br/>          &lt;/b-td&gt;<br/>        &lt;/b-tr&gt;<br/>      &lt;/b-tbody&gt;<br/>    &lt;/b-table-simple&gt;</span><span id="eb20" class="ln lo it lj b gy lw lq l lr ls">    &lt;b-modal id="add-modal" title="Add Note" hide-footer&gt;<br/>      &lt;NoteForm <a class="ae kf" href="http://twitter.com/saved" rel="noopener ugc nofollow" target="_blank">@saved</a>="closeModal()" <a class="ae kf" href="http://twitter.com/cancelled" rel="noopener ugc nofollow" target="_blank">@cancelled</a>="closeModal()" :edit="false"&gt;&lt;/NoteForm&gt;<br/>    &lt;/b-modal&gt;</span><span id="fdfe" class="ln lo it lj b gy lw lq l lr ls">    &lt;b-modal id="edit-modal" title="Edit Note" hide-footer&gt;<br/>      &lt;NoteForm <a class="ae kf" href="http://twitter.com/saved" rel="noopener ugc nofollow" target="_blank">@saved</a>="closeModal()" <a class="ae kf" href="http://twitter.com/cancelled" rel="noopener ugc nofollow" target="_blank">@cancelled</a>="closeModal()" :edit="true" :note="selectedNote"&gt;&lt;/NoteForm&gt;<br/>    &lt;/b-modal&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="cf05" class="ln lo it lj b gy lw lq l lr ls">&lt;script&gt;<br/>// @ is an alias to /src<br/>import NoteForm from "@/components/NoteForm.vue";<br/>import { requestsMixin } from "@/mixins/requestsMixin";</span><span id="7092" class="ln lo it lj b gy lw lq l lr ls">export default {<br/>  name: "home",<br/>  components: {<br/>    NoteForm<br/>  },<br/>  mixins: [requestsMixin],<br/>  computed: {<br/>    notes() {<br/>      return this.$store.state.notes;<br/>    }<br/>  },<br/>  beforeMount() {<br/>    this.getAllNotes();<br/>  },<br/>  data() {<br/>    return {<br/>      selectedNote: {},<br/>      openMenu: {}<br/>    };<br/>  },<br/>  methods: {<br/>    toggleMenu(id) {<br/>      this.$set(this.openMenu, id, !this.openMenu[id]);<br/>    },<br/>    onClickOutside(event, el) {<br/>      if (!event.target.className.includes("menu-button")) {<br/>        this.openMenu = {};<br/>      }<br/>    },<br/>    openAddModal() {<br/>      this.$bvModal.show("add-modal");<br/>    },</span><span id="05b9" class="ln lo it lj b gy lw lq l lr ls">    openEditModal(note) {<br/>      this.$bvModal.show("edit-modal");<br/>      this.selectedNote = note;<br/>    },</span><span id="e121" class="ln lo it lj b gy lw lq l lr ls">    closeModal() {<br/>      this.$bvModal.hide("add-modal");<br/>      this.$bvModal.hide("edit-modal");<br/>      this.selectedNote = {};<br/>      this.getAllNotes();<br/>    },</span><span id="c701" class="ln lo it lj b gy lw lq l lr ls">    async deleteOneNote(id) {<br/>      await this.deleteNote(id);<br/>      this.getAllNotes();<br/>    },</span><span id="adf1" class="ln lo it lj b gy lw lq l lr ls">    async getAllNotes() {<br/>      const { data } = await this.getNotes();<br/>      this.$store.commit("setNotes", data);<br/>    }<br/>  }<br/>};<br/>&lt;/script&gt;</span><span id="8ac3" class="ln lo it lj b gy lw lq l lr ls">&lt;style lang="scss" scoped&gt;<br/>.dropdown {<br/>  position: absolute;<br/>  max-width: 100px;<br/>}</span><span id="4ae2" class="ln lo it lj b gy lw lq l lr ls">.list-group-item {<br/>  cursor: pointer;<br/>}<br/>&lt;/style&gt;</span></pre><p id="be8d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这是我们在BootstrapVue表中显示账单的地方。这些列是名称、金额和截止日期，以及打开编辑模式的编辑按钮和单击时删除条目的删除按钮。我们还添加了一个“添加账单”按钮来打开模式，让用户添加账单。通过运行将数据存储在我们的Vuex存储中的<code class="fe lt lu lv lj b">beforeMount</code>钩子中的<code class="fe lt lu lv lj b">this.getAllNotes</code>函数，可以从后端获得注释。</p><p id="a19c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在表格中，我们将注释显示在表格行中。在最右边的一栏，我们有从头开始构建的菜单。我们为每一行添加了一个菜单按钮，并在其下方添加了一个<code class="fe lt lu lv lj b">div</code>作为列表组的容器，其中包含我们的编辑和删除项，供用户分别点击来编辑和删除注释。当用户点击菜单按钮时，我们用<code class="fe lt lu lv lj b">toggleMenu</code>功能切换菜单。注意，我们需要调用<code class="fe lt lu lv lj b">this.$set</code>函数来强制Vue.js刷新，因为我们正在修改一个对象中的条目。Vue不能自动检测对象内的变化。有关该功能的更多详情，请参见<a class="ae kf" href="https://vuejs.org/v2/api/#Vue-set" rel="noopener ugc nofollow" target="_blank">https://vuejs.org/v2/api/#Vue-set</a>。</p><p id="c212" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在<code class="fe lt lu lv lj b">styles</code>部分，我们通过用<code class="fe lt lu lv lj b">absolute</code>位置设置<code class="fe lt lu lv lj b">dropdown</code>类并将其<code class="fe lt lu lv lj b">max-width</code>设置为100px来设计菜单弹出。<code class="fe lt lu lv lj b">absolute</code>位置将使它堆叠在我们的表的顶部，就在每一行按钮的下面。</p><p id="d8b6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe lt lu lv lj b">openAddModal</code>、<code class="fe lt lu lv lj b">openEditModal</code>、<code class="fe lt lu lv lj b">closeModal</code>分别打开打开和关闭模态，关闭模态。当调用<code class="fe lt lu lv lj b">openEditModal</code>时，我们设置<code class="fe lt lu lv lj b">this.selectedNote</code>变量，这样我们可以将它传递给我们的<code class="fe lt lu lv lj b">NoteForm</code>。</p><p id="2003" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">接下来在<code class="fe lt lu lv lj b">App.vue</code>中，我们将现有代码替换为:</p><pre class="le lf lg lh gt li lj lk ll aw lm bi"><span id="0b0c" class="ln lo it lj b gy lp lq l lr ls">&lt;template&gt;<br/>  &lt;div id="app"&gt;<br/>    &lt;b-navbar toggleable="lg" type="dark" variant="info"&gt;<br/>      &lt;b-navbar-brand to="/"&gt;Note Taking App&lt;/b-navbar-brand&gt;</span><span id="ea73" class="ln lo it lj b gy lw lq l lr ls">&lt;b-navbar-toggle target="nav-collapse"&gt;&lt;/b-navbar-toggle&gt;</span><span id="dd2d" class="ln lo it lj b gy lw lq l lr ls">&lt;b-collapse id="nav-collapse" is-nav&gt;<br/>        &lt;b-navbar-nav&gt;<br/>          &lt;b-nav-item to="/" :active="path  == '/'"&gt;Home&lt;/b-nav-item&gt;<br/>        &lt;/b-navbar-nav&gt;<br/>      &lt;/b-collapse&gt;<br/>    &lt;/b-navbar&gt;<br/>    &lt;router-view /&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="64ea" class="ln lo it lj b gy lw lq l lr ls">&lt;script&gt;<br/>export default {<br/>  data() {<br/>    return {<br/>      path: this.$route &amp;&amp; this.$route.path<br/>    };<br/>  },<br/>  watch: {<br/>    $route(route) {<br/>      this.path = route.path;<br/>    }<br/>  }<br/>};<br/>&lt;/script&gt;</span><span id="86af" class="ln lo it lj b gy lw lq l lr ls">&lt;style lang="scss"&gt;<br/>.page {<br/>  padding: 20px;<br/>}</span><span id="0b45" class="ln lo it lj b gy lw lq l lr ls">button,<br/>.btn.btn-primary {<br/>  margin-right: 10px !important;<br/>}</span><span id="90fc" class="ln lo it lj b gy lw lq l lr ls">.button-toolbar {<br/>  margin-bottom: 10px;<br/>}<br/>&lt;/style&gt;</span></pre><p id="55d5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在页面顶部添加一个引导导航条，并添加一个<code class="fe lt lu lv lj b">router-view</code>来显示我们定义的路线。此<code class="fe lt lu lv lj b">style</code>部分没有限定范围，因此样式将全局应用。在<code class="fe lt lu lv lj b">.page</code>选择器中，我们给页面添加一些填充。我们在剩余的<code class="fe lt lu lv lj b">style</code>代码中给按钮添加一些填充。</p><p id="3569" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后在<code class="fe lt lu lv lj b">main.js</code>中，将现有代码替换为:</p><pre class="le lf lg lh gt li lj lk ll aw lm bi"><span id="ea77" class="ln lo it lj b gy lp lq l lr ls">import Vue from "vue";<br/>import App from "./App.vue";<br/>import router from "./router";<br/>import store from "./store";<br/>import BootstrapVue from "bootstrap-vue";<br/>import { ValidationProvider, extend, ValidationObserver } from "vee-validate";<br/>import { required } from "vee-validate/dist/rules";<br/>import "bootstrap/dist/css/bootstrap.css";<br/>import "bootstrap-vue/dist/bootstrap-vue.css";<br/>import vClickOutside from "v-click-outside";</span><span id="d0aa" class="ln lo it lj b gy lw lq l lr ls">Vue.use(BootstrapVue);<br/>Vue.use(vClickOutside);<br/>Vue.component("ValidationProvider", ValidationProvider);<br/>Vue.component("ValidationObserver", ValidationObserver);<br/>extend("required", required);</span><span id="fa52" class="ln lo it lj b gy lw lq l lr ls">Vue.config.productionTip = false;</span><span id="4f28" class="ln lo it lj b gy lw lq l lr ls">new Vue({<br/>  router,<br/>  store,<br/>  render: h =&gt; h(App)<br/>}).$mount("#app");</span></pre><p id="9d4a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们在这里添加了我们需要的所有库，包括BootstrapVue JavaScript和CSS，以及Vee-Validate组件和<code class="fe lt lu lv lj b">required </code>验证规则。我们还在这里包含了我们的V-Click-Outside库，所以我们可以在任何组件中使用它。</p><p id="1237" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在<code class="fe lt lu lv lj b">router.js</code>中，我们将现有代码替换为:</p><pre class="le lf lg lh gt li lj lk ll aw lm bi"><span id="5a6c" class="ln lo it lj b gy lp lq l lr ls">import Vue from "vue";<br/>import Router from "vue-router";<br/>import Home from "./views/Home.vue";</span><span id="5aeb" class="ln lo it lj b gy lw lq l lr ls">Vue.use(Router);</span><span id="8a8d" class="ln lo it lj b gy lw lq l lr ls">export default new Router({<br/>  mode: "history",<br/>  base: process.env.BASE_URL,<br/>  routes: [<br/>    {<br/>      path: "/",<br/>      name: "home",<br/>      component: Home<br/>    }<br/>  ]<br/>});</span></pre><p id="d35b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">将主页包含在我们的路线中，以便用户可以看到该页面。</p><p id="c371" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在<code class="fe lt lu lv lj b">store.js</code>中，我们将现有代码替换为:</p><pre class="le lf lg lh gt li lj lk ll aw lm bi"><span id="3302" class="ln lo it lj b gy lp lq l lr ls">import Vue from "vue";<br/>import Vuex from "vuex";</span><span id="f276" class="ln lo it lj b gy lw lq l lr ls">Vue.use(Vuex);</span><span id="93c9" class="ln lo it lj b gy lw lq l lr ls">export default new Vuex.Store({<br/>  state: {<br/>    notes: []<br/>  },<br/>  mutations: {<br/>    setNotes(state, payload) {<br/>      state.notes = payload;<br/>    }<br/>  },<br/>  actions: {}<br/>});</span></pre><p id="74a3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">将我们的<code class="fe lt lu lv lj b">notes</code>状态添加到存储中，这样我们就可以在<code class="fe lt lu lv lj b">NoteForm </code>和<code class="fe lt lu lv lj b">HomePage</code>组件的<code class="fe lt lu lv lj b">computed</code>块中观察到它。我们有<code class="fe lt lu lv lj b">setNotes </code>函数来更新<code class="fe lt lu lv lj b">notes </code>状态，我们通过调用<code class="fe lt lu lv lj b">this.$store.commit(“setNotes”, data);</code>在组件中使用它，就像我们在<code class="fe lt lu lv lj b">NoteForm</code>和<code class="fe lt lu lv lj b">HomePage</code>中所做的那样。</p><p id="ea68" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最后，在<code class="fe lt lu lv lj b">index.html</code>中，我们将现有代码替换为:</p><pre class="le lf lg lh gt li lj lk ll aw lm bi"><span id="706b" class="ln lo it lj b gy lp lq l lr ls">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;meta charset="utf-8" /&gt;<br/>    &lt;meta http-equiv="X-UA-Compatible" content="IE=edge" /&gt;<br/>    &lt;meta name="viewport" content="width=device-width,initial-scale=1.0" /&gt;<br/>    &lt;link rel="icon" href="&lt;%= BASE_URL %&gt;favicon.ico" /&gt;<br/>    &lt;title&gt;Note Taking App&lt;/title&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;noscript&gt;<br/>      &lt;strong<br/>        &gt;We're sorry but v-click-outside-tutorial-app doesn't work properly<br/>        without JavaScript enabled. Please enable it to continue.&lt;/strong<br/>      &gt;<br/>    &lt;/noscript&gt;<br/>    &lt;div id="app"&gt;&lt;/div&gt;<br/>    &lt;!-- built files will be auto injected --&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="46fc" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">更改我们应用程序的标题。</p><p id="9fae" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">经过所有的努力，我们可以通过运行<code class="fe lt lu lv lj b">npm run serve</code>来启动我们的应用程序。</p><p id="473a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了启动后端，我们首先通过运行<code class="fe lt lu lv lj b">npm i json-server</code>来安装<code class="fe lt lu lv lj b">json-server</code>包。然后，转到我们的项目文件夹并运行:</p><pre class="le lf lg lh gt li lj lk ll aw lm bi"><span id="9c31" class="ln lo it lj b gy lp lq l lr ls">json-server --watch db.json</span></pre><p id="e100" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在<code class="fe lt lu lv lj b">db.json</code>中，将文本改为:</p><pre class="le lf lg lh gt li lj lk ll aw lm bi"><span id="d789" class="ln lo it lj b gy lp lq l lr ls">{<br/>  "<!-- -->notes<!-- -->": []<br/>}</span></pre><p id="45ee" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">所以我们有了定义在可用的<code class="fe lt lu lv lj b">requests.js</code>中的<code class="fe lt lu lv lj b">notes </code>端点。</p><p id="5e9c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">经过所有的努力，我们得到了:</p><figure class="le lf lg lh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi lx"><img src="../Images/ac607cc22208bcbfd91fd14e61a36067.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6kdzgxREBarZ7BVuqVG-EQ.png"/></div></div></figure><figure class="le lf lg lh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi lx"><img src="../Images/7b522ffeba53431c4dc82a6025d62625.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Pze2cO9X1aWaSkxKpqkSmA.png"/></div></div></figure><figure class="le lf lg lh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi lx"><img src="../Images/c94d125bebf2cf1484e271e7cafbf1a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IA9RKp90lhCRZLXRieDwfA.png"/></div></div></figure></div></div>    
</body>
</html>