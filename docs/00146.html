<html>
<head>
<title>How to Build a Simple Blog Using React and GraphQL</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用React和GraphQL构建一个简单的博客</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-build-a-simple-blog-using-react-and-graphql-4a680b6e3206?source=collection_archive---------0-----------------------#2018-05-31">https://levelup.gitconnected.com/how-to-build-a-simple-blog-using-react-and-graphql-4a680b6e3206?source=collection_archive---------0-----------------------#2018-05-31</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/977cc5be0683074b2cc56d1d5c0ad418.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9o3rjB82t51_w7A-UJ3gWg.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">文章最初由<a class="ae kc" href="https://cosmicjs.com/tony" rel="noopener ugc nofollow" target="_blank">托尼·斯皮罗</a>为<a class="ae kc" href="https://cosmicjs.com/blog" rel="noopener ugc nofollow" target="_blank">宇宙JS博客</a>撰写。感谢GitConnected的分享。</figcaption></figure><p id="47e1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本教程中，我们将使用React、<a class="ae kc" href="http://graphql.org/" rel="noopener ugc nofollow" target="_blank"> GraphQL </a>和<a class="ae kc" href="https://cosmicjs.com/" rel="noopener ugc nofollow" target="_blank"> Cosmic JS </a>创建一个简单的博客。这将是基于现代技术构建的最快、最轻量级的博客。让我们开始吧。</p><h1 id="8f97" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">TL；速度三角形定位法(dead reckoning)</h1><p id="f2b3" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated"><a class="ae kc" href="https://cosmicjs.com/apps/simple-react-blog/demo" rel="noopener ugc nofollow" target="_blank">查看演示</a> <br/> <a class="ae kc" href="https://cosmicjs.com/apps/simple-react-blog" rel="noopener ugc nofollow" target="_blank">在Cosmic JS上安装简单的React博客</a> <br/> <a class="ae kc" href="https://github.com/cosmicjs/simple-react-blog" rel="noopener ugc nofollow" target="_blank">查看GitHub上的代码库</a></p><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi me"><img src="../Images/08998477a1639458f649d661740cfa85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*OT8ffb7ZDmrnT2cP.png"/></div></div></figure><h1 id="6c3a" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">入门指南</h1><p id="70d9" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">确保你的机器上安装了Node.js和NPM，如果没有，<a class="ae kc" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank">访问Node.js网站</a>安装最新版本。</p><p id="bb17" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们首先为我们的应用程序创建一个文件夹。在您喜欢的终端中运行以下命令:</p><pre class="mf mg mh mi gt mj mk ml mm aw mn bi"><span id="0b5c" class="mo lc iq mk b gy mp mq l mr ms">mkdir simple-react-blog</span></pre><p id="5165" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，让我们添加一个package.json文件来导入应用程序的所有依赖项:</p><pre class="mf mg mh mi gt mj mk ml mm aw mn bi"><span id="eb8a" class="mo lc iq mk b gy mp mq l mr ms">vim package.json</span></pre><p id="704f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">将以下内容添加到我们的package.json文件中:</p><figure class="mf mg mh mi gt jr"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="559e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">是一个轻应用的轻依赖列表。因此，我们将安装的是:</p><ol class=""><li id="03a4" class="mv mw iq kf b kg kh kk kl ko mx ks my kw mz la na nb nc nd bi translated"><a class="ae kc" href="https://www.npmjs.com/package/axios" rel="noopener ugc nofollow" target="_blank"> Axios </a>让我们基于promise的HTTP客户端从<a class="ae kc" href="https://cosmicjs.com/docs/graphql" rel="noopener ugc nofollow" target="_blank"> Cosmic JS GraphQL API </a>获取内容。</li><li id="e785" class="mv mw iq kf b kg ne kk nf ko ng ks nh kw ni la na nb nc nd bi translated"><a class="ae kc" href="https://github.com/zeit/next.js/" rel="noopener ugc nofollow" target="_blank"> Next.js </a>作为我们React通用框架。</li><li id="25df" class="mv mw iq kf b kg ne kk nf ko ng ks nh kw ni la na nb nc nd bi translated"><a class="ae kc" href="https://www.npmjs.com/package/next-routes" rel="noopener ugc nofollow" target="_blank">下一条路线</a>为动态路线。</li><li id="b25c" class="mv mw iq kf b kg ne kk nf ko ng ks nh kw ni la na nb nc nd bi translated"><a class="ae kc" href="https://www.npmjs.com/package/express" rel="noopener ugc nofollow" target="_blank"> Express </a>为我们的服务器端web app框架。</li><li id="e019" class="mv mw iq kf b kg ne kk nf ko ng ks nh kw ni la na nb nc nd bi translated"><a class="ae kc" href="https://reactjs.org/" rel="noopener ugc nofollow" target="_blank">反应</a>来处理我们的用户界面。</li></ol><p id="32a8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe nj nk nl mk b">“scripts”</code>在开发和生产中已经习惯了我们的应用程序。</p><p id="8d9c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">运行以下命令来安装我们的依赖项:</p><pre class="mf mg mh mi gt mj mk ml mm aw mn bi"><span id="330d" class="mo lc iq mk b gy mp mq l mr ms">npm i</span></pre><h1 id="8d88" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">建立我们的博客</h1><p id="9c55" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">接下来，让我们开始构建我们的博客页面。创建一个<code class="fe nj nk nl mk b">pages</code>文件夹，添加<code class="fe nj nk nl mk b">index.js</code>文件:</p><pre class="mf mg mh mi gt mj mk ml mm aw mn bi"><span id="9f20" class="mo lc iq mk b gy mp mq l mr ms">vim index.js</span></pre><p id="78d5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">并将以下内容添加到index.js中:</p><figure class="mf mg mh mi gt jr"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="f46c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这里发生了一些事情:</p><ol class=""><li id="a629" class="mv mw iq kf b kg kh kk kl ko mx ks my kw mz la na nb nc nd bi translated">我们正在导入我们的基本模块:Axios、lodash以及其他助手和组件。</li><li id="ad00" class="mv mw iq kf b kg ne kk nf ko ng ks nh kw ni la na nb nc nd bi translated">我们正在引入一些组件:<code class="fe nj nk nl mk b">Header</code>和<code class="fe nj nk nl mk b">Footer</code>，你可以<a class="ae kc" href="https://github.com/cosmicjs/simple-react-blog/tree/master/pages/partials" rel="noopener ugc nofollow" target="_blank">从GitHub </a>上的代码库中引用这些部分。</li><li id="cf32" class="mv mw iq kf b kg ne kk nf ko ng ks nh kw ni la na nb nc nd bi translated">我们查询<a class="ae kc" href="https://cosmicjs.com/docs/graphql" rel="noopener ugc nofollow" target="_blank"> Cosmic JS GraphQL API </a>只返回我们需要的东西:<code class="fe nj nk nl mk b">_id</code>、<code class="fe nj nk nl mk b">type_slug</code>、<code class="fe nj nk nl mk b">slug</code>、<code class="fe nj nk nl mk b">title</code>、<code class="fe nj nk nl mk b">metadata</code>和<code class="fe nj nk nl mk b">created_at</code>。</li><li id="e096" class="mv mw iq kf b kg ne kk nf ko ng ks nh kw ni la na nb nc nd bi translated">我们将组件中的主要道具设置为<code class="fe nj nk nl mk b">cosmic</code>对象。并使用lodash解析帖子和全局对象类型。</li><li id="0462" class="mv mw iq kf b kg ne kk nf ko ng ks nh kw ni la na nb nc nd bi translated">我们将帖子数组数据和图片URL返回到我们的主博客提要中。</li></ol><h1 id="8b79" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">图表解释</h1><p id="13b4" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">在文件的顶部，您会注意到一个<code class="fe nj nk nl mk b">query</code>变量。这是我们编写的字符串形式的GraphQL查询，我们使用axios将它发送给API。该查询指定了我们想要从Cosmic JS API中检索的键。API通过匹配<code class="fe nj nk nl mk b">bucket_slug</code>找到正确的数据。然后，对象字符串的键被赋予相关的值，从而允许我们准确地获得我们需要的数据。这是GraphQL的核心原则——简单地将键与值进行匹配，并只获取页面所需的数据。</p><h1 id="a67b" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">单帖子查询</h1><p id="1abc" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">对于我们的单个帖子，我们在道具中添加了一个<code class="fe nj nk nl mk b">post</code>属性。通过将<code class="fe nj nk nl mk b">query.slug</code>与对象块匹配来找到Post:</p><figure class="mf mg mh mi gt jr"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="76b2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">查看GitHub 上的<a class="ae kc" href="https://github.com/cosmicjs/simple-react-blog/blob/master/pages/post.js" rel="noopener ugc nofollow" target="_blank">完整文件。</a></p><h1 id="6be8" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="4378" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">这是<a class="ae kc" href="https://cosmicjs.com/apps/simple-react-blog" rel="noopener ugc nofollow" target="_blank">简单反应博客</a>的节略版，可以在<a class="ae kc" href="https://cosmicjs.com/apps" rel="noopener ugc nofollow" target="_blank">宇宙JS应用页面</a>下载。完整的代码库包括一个帖子页面视图，以及一个专门用于每个作者帖子的页面。<a class="ae kc" href="https://github.com/cosmicjs/simple-react-blog" rel="noopener ugc nofollow" target="_blank">在GitHub </a>上查看完整的代码库，并通过<a class="ae kc" href="https://cosmicjs.com/apps/simple-react-blog" rel="noopener ugc nofollow" target="_blank">将应用</a>安装到您的Cosmic JS桶中，在您的Cosmic JS仪表板上点击几下即可部署该应用。</p><p id="40cf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我希望你喜欢这个教程，如果你有任何问题<a class="ae kc" href="https://twitter.com/cosmic_js" rel="noopener ugc nofollow" target="_blank">在Twitter上联系我们</a>和<a class="ae kc" href="https://cosmicjs.com/community" rel="noopener ugc nofollow" target="_blank">加入我们的Slack社区</a>。Cosmic JS在<a class="ae kc" href="https://github.com/cosmicjs/react-starter" rel="noopener ugc nofollow" target="_blank"> React </a>、<a class="ae kc" href="https://github.com/cosmicjs/node-starter" rel="noopener ugc nofollow" target="_blank"> Node.js </a>和<a class="ae kc" href="https://github.com/cosmicjs/vue-starter" rel="noopener ugc nofollow" target="_blank"> Vue.js </a>中提供了快速入门应用。</p><h1 id="88e7" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">无头CMS资源</h1><ul class=""><li id="e4e0" class="mv mw iq kf b kg lz kk ma ko nm ks nn kw no la np nb nc nd bi translated"><a class="ae kc" href="https://cosmicjs.com/solutions/headless-cms-for-company-websites" rel="noopener ugc nofollow" target="_blank">公司网站的无头CMS</a></li><li id="eaa8" class="mv mw iq kf b kg ne kk nf ko ng ks nh kw ni la np nb nc nd bi translated"><a class="ae kc" href="https://cosmicjs.com/solutions/headless-cms-for-blogs" rel="noopener ugc nofollow" target="_blank">用于博客的无头CMS</a></li><li id="49f3" class="mv mw iq kf b kg ne kk nf ko ng ks nh kw ni la np nb nc nd bi translated"><a class="ae kc" href="https://cosmicjs.com/solutions/headless-cms-for-press-websites" rel="noopener ugc nofollow" target="_blank">用于新闻网站的无头CMS</a></li><li id="2453" class="mv mw iq kf b kg ne kk nf ko ng ks nh kw ni la np nb nc nd bi translated"><a class="ae kc" href="https://cosmicjs.com/solutions/headless-cms-for-marketing-campaigns" rel="noopener ugc nofollow" target="_blank">用于营销活动的无头CMS</a></li><li id="2bfe" class="mv mw iq kf b kg ne kk nf ko ng ks nh kw ni la np nb nc nd bi translated"><a class="ae kc" href="https://cosmicjs.com/solutions/headless-cms-for-native-apps" rel="noopener ugc nofollow" target="_blank">用于本地应用的无头CMS</a></li><li id="7e53" class="mv mw iq kf b kg ne kk nf ko ng ks nh kw ni la np nb nc nd bi translated">现代堆栈网站的无头CMS</li><li id="99ee" class="mv mw iq kf b kg ne kk nf ko ng ks nh kw ni la np nb nc nd bi translated"><a class="ae kc" href="https://cosmicjs.com/solutions/headless-cms-for-ecommerce-websites" rel="noopener ugc nofollow" target="_blank">电子商务网站的无头CMS</a></li><li id="fe2a" class="mv mw iq kf b kg ne kk nf ko ng ks nh kw ni la np nb nc nd bi translated"><a class="ae kc" href="https://cosmicjs.com/solutions/headless-cms-for-emerging-tech" rel="noopener ugc nofollow" target="_blank">新兴技术的无头CMS</a></li></ul></div></div>    
</body>
</html>