<html>
<head>
<title>JavaScript Clean Code — Function Arguments</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript干净代码—函数参数</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/javascript-clean-code-function-arguments-f920e30b9030?source=collection_archive---------11-----------------------#2020-03-02">https://levelup.gitconnected.com/javascript-clean-code-function-arguments-f920e30b9030?source=collection_archive---------11-----------------------#2020-03-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/1c77847d0f0f14c8c7e3436dd4403012.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*3RXrDasUd4P5yeOj"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated"><a class="ae kf" href="https://unsplash.com/@chrisjoelcampbell?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">克里斯托弗·坎贝尔</a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</figcaption></figure><p id="66a9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">函数是JavaScript程序的重要组成部分。它们用于将代码分成可重用的块。因此，为了拥有清晰的JavaScript代码，我们必须拥有易于理解的函数。</p><p id="3b87" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本文中，我们将研究好函数的更多特征，包括减少switch语句的使用，减少函数中的参数数量，以及以易于理解的方式获取参数。</p><h1 id="82b0" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">Switch语句</h1><p id="4d97" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">即使语句只有几个格，也总是很长。因此，应该以一种永不重复的方式使用它们，将它们分离成一个函数，在需要时随时调用。</p><p id="9e7d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下面的代码就是一个糟糕的<code class="fe mh mi mj mk b">switch</code>语句的例子:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="7489" class="mt lf it mk b gy mu mv l mw mx">const calculatePay = (employeeType) =&gt; {<br/>  switch (employeeType) {<br/>    case 'PART_TIME':<br/>      return calculatePartTimePay();<br/>    case 'FULL_TIME':<br/>      return calculateFullTimePay();<br/>    case 'COMMISSIONED':<br/>      return calculateContracorPay();<br/>    default:<br/>      return 0;<br/>  }<br/>}</span></pre><p id="8d69" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">上面的代码很长，它做的不止一件事。最好是跳过<code class="fe mh mi mj mk b">switch</code>声明，然后在需要他们的地方给他们打电话。</p><p id="4cf9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">还有，我们每次改变类型都要改变这个函数。</p><p id="3caa" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">另一个问题是，我们将有许多其他函数使用这种结构，这意味着代码将变得更长，有更多的函数具有与这一个相同的问题。</p><p id="cd00" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了处理这个问题，我们可以为我们想要的雇员类型返回正确的对象。例如，我们可以这样写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="e16c" class="mt lf it mk b gy mu mv l mw mx">const getEmployeeObjectByType = (employeeType) =&gt; {<br/>  switch (employeeType) {<br/>    case PART_TIME:<br/>      return new PartTimeEmployee();<br/>    case FULL_TIME:<br/>      return new FullTimeEmployee();<br/>    case CONTRACTOR:<br/>      return new ComissionedEmployee();<br/>    default:<br/>      return undefined;<br/>  }<br/>}</span></pre><p id="813b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们可以调用这个函数来获取合适的雇员类型，然后用它做我们想做的事情。</p><p id="29dd" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这比让多个函数在相同的switch语句情况下做不同的事情要好得多。</p><h1 id="520d" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">描述性名称</h1><p id="31d4" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">像我们代码中的任何其他标识符一样，函数中的名字应该像其他东西一样是描述性的。</p><p id="26a3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">它们应该用能说明其含义的名字来命名。像含义、意图和动作这样的信息应该从代码中传达出来。</p><p id="8c12" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">由于JavaScript是一种动态类型的语言，如果从代码中看不出东西的类型，那么类型在某些情况下也是有帮助的。</p><p id="dff8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">较长的名字是可以的，因为它们需要传达我们需要知道的所有信息。如果遵循JavaScript的约定，它们仍然易于阅读，即变量和非构造函数使用camel case，常量使用大写，构造函数使用大写。</p><figure class="ml mm mn mo gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi my"><img src="../Images/c15b91d21d0c67a6e91a26c6f2cea7bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xf9rprkihTk3BwoR"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">Benny Vincent 在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><h1 id="3c76" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">函数参数</h1><p id="b89e" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">函数应该有尽可能少的参数。这是因为我们必须查看所有的对象，当我们调用它们时，我们必须确保它们都被传入。</p><p id="9b1c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因此，如果我们不需要参数，那么我们就不应该包含它们。零比一好，一比二好。</p><p id="97a7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">超过5可能太多了，除非有一些特殊的原因。</p><p id="cdb1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">传入参数很难，因为我们必须收集所有的变量和值并传递它们。同样，出于同样的原因，这也增加了测试的难度。</p><p id="498a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当我们测试一个有很多参数的函数时，我们必须测试所有可能的参数组合来获得完整的测试覆盖。这使得测试一个采用大量参数的函数比采用较少参数的函数困难许多倍。</p><p id="96ec" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">此外，rest操作符是JavaScript中的标准特性，如果我们需要定义一个有很多参数的函数，是时候放弃<code class="fe mh mi mj mk b">arguments</code>对象了。它是一个类似数组的对象，所以它具有数组的一些属性，比如索引和<code class="fe mh mi mj mk b">length</code>属性。</p><p id="0796" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们也可以用一个<code class="fe mh mi mj mk b">for</code>或<code class="fe mh mi mj mk b">while</code>循环来遍历它。但是，它没有任何属于普通数组的数组方法。</p><p id="111a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">与其他类似数组的对象一样，它可以使用spread操作符进行扩展。</p><p id="e08e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">他们只是给很多人制造了困惑，因为很多人不熟悉<code class="fe mh mi mj mk b">arguments</code>这个物体。</p><p id="5b03" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">arguments</code>对象也没有绑定到箭头函数，所以我们不能和它们一起使用。</p><p id="c12a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">使用rest操作符，我们可以从它那里得到一个参数数组，所以我们可以对数组做任何我们能做的事情。</p><p id="ee27" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">所以与其写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="0382" class="mt lf it mk b gy mu mv l mw mx">function add() {<br/>  return [...arguments].reduce((a, b) =&gt; a + b, 0);<br/>}</span></pre><p id="2495" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们应该写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="da9e" class="mt lf it mk b gy mu mv l mw mx">function add(...args) {<br/>  return args.reduce((a, b) =&gt; a + b, 0);<br/>}</span></pre><p id="c97e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">做一个将一些数字相加的函数。或者更好的是:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="f165" class="mt lf it mk b gy mu mv l mw mx">const add = (...args) =&gt; {<br/>  return args.reduce((a, b) =&gt; a + b, 0);<br/>}</span></pre><p id="f523" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因为我们在代码中没有使用<code class="fe mh mi mj mk b">this</code>。</p><p id="1ad5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">正如我们所看到的，后面两个使用rest操作符的例子比第一个要清楚得多。第一个在签名中没有参数，但是我们得到了从<code class="fe mh mi mj mk b">arguments</code>对象传入的参数。</p><p id="dd2e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">另外2个显示了我们的<code class="fe mh mi mj mk b">add</code>函数实际上接受参数，并且我们实际上在用它们做一些事情。</p><h1 id="dc27" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">结论</h1><p id="2858" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">函数表面上看起来很容易定义，但是要定义易于阅读和修改的函数，我们必须小心谨慎。我们应该避免过多的<code class="fe mh mi mj mk b">switch</code>语句。</p><p id="b2b1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果我们确实需要它们，我们应该对它们进行抽象，以便一个<code class="fe mh mi mj mk b">switch</code>语句可以在多个地方使用。它们很长，应该最小化。</p><p id="4fb5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">此外，函数中事物的名字应该是描述性的，我们不应该在函数中使用太多的参数。如果我们这样做，使用rest操作符而不是<code class="fe mh mi mj mk b">arguments</code>对象来获取传递给函数的参数。</p></div></div>    
</body>
</html>