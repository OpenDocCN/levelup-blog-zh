<html>
<head>
<title>Tired of Slow Code Reviews? Read this</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">厌倦了缓慢的代码审查？读读这个</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/tired-of-slow-code-reviews-read-this-1a26b3e4539a?source=collection_archive---------9-----------------------#2022-12-08">https://levelup.gitconnected.com/tired-of-slow-code-reviews-read-this-1a26b3e4539a?source=collection_archive---------9-----------------------#2022-12-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="c8db" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">一个前技术领导者的指南，创建一个健康的代码评审文化，帮助你更快地交付你的代码。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/962f638d0bb3cbaa20290e5cf701bbb8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8tWEyFOcww0Ixo8A412ovQ.png"/></div></div></figure><h1 id="8b0f" class="ku kv it bd kw kx ky kz la lb lc ld le jz lf ka lg kc lh kd li kf lj kg lk ll bi translated">TL；速度三角形定位法(dead reckoning)</h1><ul class=""><li id="9296" class="lm ln it lo b lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">🏎了解如何加速代码审查过程，以最大化您的生产力</li><li id="4366" class="lm ln it lo b lp me lr mf lt mg lv mh lx mi lz ma mb mc md bi translated">🔬了解我遇到的代码审查者的最佳实践</li><li id="c2f5" class="lm ln it lo b lp me lr mf lt mg lv mh lx mi lz ma mb mc md bi translated">✏️学习我遇到的拉式请求作者的最佳实践</li></ul></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><p id="a787" class="pw-post-body-paragraph mq mr it lo b lp ms ju mt lr mu jx mv lt mw mx my lv mz na nb lx nc nd ne lz im bi translated">想象一下。</p><p id="4ef6" class="pw-post-body-paragraph mq mr it lo b lp ms ju mt lr mu jx mv lt mw mx my lv mz na nb lx nc nd ne lz im bi translated">您刚刚实现了一个特性，并编写了所有的测试用例。你对代码感觉很好，所以你打开了一个拉取请求，并让你的同事知道。几天过去了，你的拉请求看起来和以前一模一样。貌似没动过。无可奉告。没有更改请求。您再次要求您的同事进行代码审查，他们同意了。又一周过去了，什么也没发生。你再次询问，他们告诉你，他们需要更多的时间，因为这不是一个小的公关，有很多要考虑的。</p><p id="0d26" class="pw-post-body-paragraph mq mr it lo b lp ms ju mt lr mu jx mv lt mw mx my lv mz na nb lx nc nd ne lz im bi translated">最后，你看到了一个关于变更请求的通知，你马上就去做了。在解决了合并冲突并修复了边缘案例之后，您请求再次进行审查，并等待。几天后出现了另一个变更请求，您再次重复这个过程。经过一次又一次的修改，你得到了批准，PR最终被合并到主干中。</p><p id="7e43" class="pw-post-body-paragraph mq mr it lo b lp ms ju mt lr mu jx mv lt mw mx my lv mz na nb lx nc nd ne lz im bi translated">在你打开采购申请的4周后。</p><p id="e9c0" class="pw-post-body-paragraph mq mr it lo b lp ms ju mt lr mu jx mv lt mw mx my lv mz na nb lx nc nd ne lz im bi translated">如果你能感同身受，你并不孤单。许多团队都经历过如此缓慢的代码审查过程。事实上，这是开发周期中的主要障碍之一<a class="ae nf" href="https://www.reddit.com/r/ExperiencedDevs/comments/oo4ds0/code_reviews_becoming_a_blocker/" rel="noopener ugc nofollow" target="_blank"/>。所以我想和你分享我学到的代码审查的最佳实践，以加快开发速度，帮助你更快地交付代码。</p><p id="7c83" class="pw-post-body-paragraph mq mr it lo b lp ms ju mt lr mu jx mv lt mw mx my lv mz na nb lx nc nd ne lz im bi translated">我们走吧。</p><h1 id="3076" class="ku kv it bd kw kx ky kz la lb lc ld le jz lf ka lg kc lh kd li kf lj kg lk ll bi translated">对于拉取请求作者</h1><p id="418f" class="pw-post-body-paragraph mq mr it lo b lp lq ju mt lr ls jx mv lt ng mx my lv nh na nb lx ni nd ne lz im bi translated">我学到的提高代码评审效率的第一件事是作为一个作者要有思想。除了生成干净的代码，你还可以做很多小事来帮助你的评审者主动理解你的拉请求。</p><h2 id="3596" class="nj kv it bd kw nk nl dn la nm nn dp le lt no np lg lv nq nr li lx ns nt lk nu bi translated">当司机</h2><p id="f952" class="pw-post-body-paragraph mq mr it lo b lp lq ju mt lr ls jx mv lt ng mx my lv nh na nb lx ni nd ne lz im bi translated">你，作者，是速度的驱动者。知道你在代码审查过程中依赖于你的同事，你可以清楚地传达<strong class="lo iu">什么时候</strong>和<strong class="lo iu">什么时候</strong>来符合期望。</p><p id="aaa7" class="pw-post-body-paragraph mq mr it lo b lp ms ju mt lr mu jx mv lt mw mx my lv mz na nb lx nc nd ne lz im bi translated"><strong class="lo iu"> when </strong>是最重要的沟通方式，因为它告诉你的评审有多紧急。评审者可以相应地计划他们的工作。这是为评估过程设定时间表的好方法，也是尊重同事时间的好方法。</p><p id="9142" class="pw-post-body-paragraph mq mr it lo b lp ms ju mt lr mu jx mv lt mw mx my lv mz na nb lx nc nd ne lz im bi translated">为了传达<strong class="lo iu">什么</strong>，确保你包括一个PR描述，该描述着重于帮助你的评审者理解你的改变的目的和代码设计。不要罗列功能，而是以一个开篇段落来解释背景和为什么需要这个PR来帮助评论者建立他们的<a class="ae nf" href="https://jamesclear.com/mental-models" rel="noopener ugc nofollow" target="_blank">心智模型</a>。我发现其他非常有用的描述是:</p><ul class=""><li id="2192" class="lm ln it lo b lp ms lr mu lt nv lv nw lx nx lz ma mb mc md bi translated"><strong class="lo iu">代码设计图</strong>:你的高层代码结构的<a class="ae nf" href="https://github.com/getappmap/vscode-appland" rel="noopener ugc nofollow" target="_blank">截图帮助评审人员</a><a class="ae nf" href="https://github.com/google/eng-practices/blob/master/review/reviewer/looking-for.md#design" rel="noopener ugc nofollow" target="_blank">评审整体设计</a>并对你的拉取请求做出快速反应。</li><li id="8f82" class="lm ln it lo b lp me lr mf lt mg lv mh lx mi lz ma mb mc md bi translated"><strong class="lo iu">接受标准</strong>:一系列简单的句子，如<a class="ae nf" href="https://www.boost.co.nz/blog/2010/09/acceptance-criteria" rel="noopener ugc nofollow" target="_blank">“提交表单后，会向用户发送一封确认电子邮件。”</a>帮助评审寻找缺失的功能和测试用例。</li></ul><h2 id="8296" class="nj kv it bd kw nk nl dn la nm nn dp le lt no np lg lv nq nr li lx ns nt lk nu bi translated">保持简洁</h2><p id="59e7" class="pw-post-body-paragraph mq mr it lo b lp lq ju mt lr ls jx mv lt ng mx my lv nh na nb lx ni nd ne lz im bi translated">小型的、激光聚焦的拉式请求是最容易阅读的。有多小？谷歌工程实践说<a class="ae nf" href="https://github.com/google/eng-practices/blob/master/review/developer/small-cls.md" rel="noopener ugc nofollow" target="_blank">“做不到足够小”</a>。<a class="ae nf" href="https://smartbear.com/learn/code-review/best-practices-for-peer-code-review/" rel="noopener ugc nofollow" target="_blank">一项研究</a>表明，随着代码变更的增加，代码审查质量会下降。你的评审员一次评审的时间越长，他们发现的缺陷就越少。所以重要的是保持你的拉取请求小，并专注于一件事。如果您正在开发的特性太大，您可以考虑使用<a class="ae nf" href="https://www.michaelagreiler.com/stacked-pull-requests/" rel="noopener ugc nofollow" target="_blank">“堆叠拉请求”</a>技术将它分成多个拉请求。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/4249ba340852f79eccb81d626e890885.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UNAtvqRWCvDOCeHVk7_g_A.png"/></div></div><figcaption class="ny nz gj gh gi oa ob bd b be z dk translated">堆叠拉取请求可视化</figcaption></figure><p id="e8a2" class="pw-post-body-paragraph mq mr it lo b lp ms ju mt lr mu jx mv lt mw mx my lv mz na nb lx nc nd ne lz im bi translated">它用一系列小的拉请求代替了一个大的拉请求。这有助于评审人员在同一时间专注于一件事情，并且与<a class="ae nf" href="http://localhost:3000/articles/ex-principal-engineers-guide-to-design-thinking-and-continous-delivery#what-is-continuous-deliver" rel="noopener ugc nofollow" target="_blank">持续集成和持续交付</a>的原则非常一致。</p><h1 id="51a1" class="ku kv it bd kw kx ky kz la lb lc ld le jz lf ka lg kc lh kd li kf lj kg lk ll bi translated">对于代码审查者</h1><h2 id="f091" class="nj kv it bd kw nk nl dn la nm nn dp le lt no np lg lv nq nr li lx ns nt lk nu bi translated">小心偏见</h2><p id="cfd2" class="pw-post-body-paragraph mq mr it lo b lp lq ju mt lr ls jx mv lt ng mx my lv nh na nb lx ni nd ne lz im bi translated">谷歌在2022年发表的一项研究发现，拉请求的作者面临不同程度的抵制，这取决于作者的人口统计数据。根据资料显示，他们<a class="ae nf" href="https://cacm.acm.org/magazines/2022/3/258909-the-pushback-effects-of-race-ethnicity-gender-and-age-in-code-review/fulltext" rel="noopener ugc nofollow" target="_blank">发现</a>那</p><blockquote class="oc od oe"><p id="abf5" class="mq mr of lo b lp ms ju mt lr mu jx mv og mw mx my oh mz na nb oi nc nd ne lz im bi translated">-女性遭遇拒绝的几率比男性高21%</p><p id="bb8d" class="mq mr of lo b lp ms ju mt lr mu jx mv og mw mx my oh mz na nb oi nc nd ne lz im bi translated">-黑人+开发人员比白人+开发人员面临的几率高54%</p><p id="44e7" class="mq mr of lo b lp ms ju mt lr mu jx mv og mw mx my oh mz na nb oi nc nd ne lz im bi translated">- Latinx+开发人员比White+开发人员面临高15%的可能性</p><p id="3606" class="mq mr of lo b lp ms ju mt lr mu jx mv og mw mx my oh mz na nb oi nc nd ne lz im bi translated">-亚裔+开发人员比白人+开发人员面临高出42%的可能性</p><p id="5a72" class="mq mr of lo b lp ms ju mt lr mu jx mv og mw mx my oh mz na nb oi nc nd ne lz im bi translated">-年长的开发人员比年轻的开发人员面临更大的阻力</p></blockquote><p id="a4a6" class="pw-post-body-paragraph mq mr it lo b lp ms ju mt lr mu jx mv lt mw mx my lv mz na nb lx nc nd ne lz im bi translated">我们应该更加注意无意的偏见，尤其是在多元化的工作场所。意识到这一点，我们可以避免代码审查中不必要的推诿，并有助于加速过程。</p><h1 id="4097" class="ku kv it bd kw kx ky kz la lb lc ld le jz lf ka lg kc lh kd li kf lj kg lk ll bi translated">这是学习的好地方，不是势利的地方</h1><p id="a9af" class="pw-post-body-paragraph mq mr it lo b lp lq ju mt lr ls jx mv lt ng mx my lv nh na nb lx ni nd ne lz im bi translated">不管你的经验水平如何，作为一名开发人员需要不断学习。拉式请求是开发者交流和交换反馈的一个无价的“市场”。因此，确保这是一个尊重的地方，并始终以知识共享为目标<a class="ae nf" href="https://github.com/google/eng-practices/blob/master/review/reviewer/standard.md#mentoring" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="4f92" class="pw-post-body-paragraph mq mr it lo b lp ms ju mt lr mu jx mv lt mw mx my lv mz na nb lx nc nd ne lz im bi translated">对我来说，这一直是一个学习领域知识的好机会。就拿我在<a class="ae nf" href="https://github.com/airbnb/javascript/pull/2535" rel="noopener ugc nofollow" target="_blank"> Airbnb JavaScript风格指南</a>的PR来说，我从一个<a class="ae nf" href="https://github.com/tc39" rel="noopener ugc nofollow" target="_blank"> Ecma TC39 </a>成员那里学到了很多关于<a class="ae nf" href="https://tc39.es/ecma262" rel="noopener ugc nofollow" target="_blank"> ECMAScript语言规范</a>的知识。如果他拒绝了我的请求<a class="ae nf" href="https://www.reddit.com/r/cscareerquestions/comments/9hakaz/getting_ripped_apart_in_code_reviews_is_this/" rel="noopener ugc nofollow" target="_blank">而没有建设性的反馈</a>，教学的时刻就不会存在。</p><h1 id="e43c" class="ku kv it bd kw kx ky kz la lb lc ld le jz lf ka lg kc lh kd li kf lj kg lk ll bi translated">无所作为是不好的</h1><p id="330d" class="pw-post-body-paragraph mq mr it lo b lp lq ju mt lr ls jx mv lt ng mx my lv nh na nb lx ni nd ne lz im bi translated">一年前，我在Instagram上读到一篇名为<a class="ae nf" href="https://blog.devgenius.io/aggressive-code-review-e5f8869f3967" rel="noopener ugc nofollow" target="_blank">“激进的代码审查”</a>的博客文章。他声称有效的代码审查包括</p><ul class=""><li id="ed76" class="lm ln it lo b lp ms lr mu lt nv lv nw lx nx lz ma mb mc md bi translated">尽快采取果断行动</li><li id="f225" class="lm ln it lo b lp me lr mf lt mg lv mh lx mi lz ma mb mc md bi translated">旨在降低错误的成本</li><li id="668e" class="lm ln it lo b lp me lr mf lt mg lv mh lx mi lz ma mb mc md bi translated">要求拉动要求小，移动速度快</li></ul><p id="790b" class="pw-post-body-paragraph mq mr it lo b lp ms ju mt lr mu jx mv lt mw mx my lv mz na nb lx nc nd ne lz im bi translated">我发现在他的方法中令人耳目一新的是<strong class="lo iu">对拉请求不采取行动不是一个选项</strong>。它最大限度地缩短了审查的准备时间，对我和我的团队非常有益。我们之所以能够快速交付，是因为我们对代码审查采取了积极的行动。我们不会让未决的拉取请求停留不动，而是在考虑业务案例的情况下进行审查。</p><h1 id="e6c5" class="ku kv it bd kw kx ky kz la lb lc ld le jz lf ka lg kc lh kd li kf lj kg lk ll bi translated">最后的想法</h1><p id="0fb3" class="pw-post-body-paragraph mq mr it lo b lp lq ju mt lr ls jx mv lt ng mx my lv nh na nb lx ni nd ne lz im bi translated">回顾拉式请求和代码审查的最佳实践，以加速您的开发周期</p><ul class=""><li id="c9f0" class="lm ln it lo b lp ms lr mu lt nv lv nw lx nx lz ma mb mc md bi translated">建立清晰的沟通关于<strong class="lo iu">什么时候</strong>和<strong class="lo iu">什么时候</strong>的拉动请求</li><li id="9351" class="lm ln it lo b lp me lr mf lt mg lv mh lx mi lz ma mb mc md bi translated">创建专注于一件事小型独立的拉式请求</li><li id="9512" class="lm ln it lo b lp me lr mf lt mg lv mh lx mi lz ma mb mc md bi translated">小心偏见</li><li id="d691" class="lm ln it lo b lp me lr mf lt mg lv mh lx mi lz ma mb mc md bi translated">尊重作者和其他评论者</li><li id="6098" class="lm ln it lo b lp me lr mf lt mg lv mh lx mi lz ma mb mc md bi translated">尽快采取决定性的审查行动</li></ul><h1 id="93e3" class="ku kv it bd kw kx ky kz la lb lc ld le jz lf ka lg kc lh kd li kf lj kg lk ll bi translated">参考</h1><ul class=""><li id="a189" class="lm ln it lo b lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">种族、民族、性别和年龄在代码审查中的反作用</li><li id="7c78" class="lm ln it lo b lp me lr mf lt mg lv mh lx mi lz ma mb mc md bi translated"><a class="ae nf" href="https://developers.googleblog.com/2022/06/Using-research-to-make-code-review-more-equitable.html" rel="noopener ugc nofollow" target="_blank">利用研究使代码审查更加公平</a> — Emerson Murphy-Hill，研究科学家，中央产品包容性、公平性和可访问性</li><li id="eb96" class="lm ln it lo b lp me lr mf lt mg lv mh lx mi lz ma mb mc md bi translated"><a class="ae nf" href="https://smartbear.com/learn/code-review/best-practices-for-peer-code-review/" rel="noopener ugc nofollow" target="_blank">代码评审的最佳实践</a> — SMARTBEAR</li><li id="d681" class="lm ln it lo b lp me lr mf lt mg lv mh lx mi lz ma mb mc md bi translated"><a class="ae nf" href="https://github.com/google/eng-practices/blob/master/review/developer/small-cls.md" rel="noopener ugc nofollow" target="_blank">小CLs </a> —谷歌</li><li id="5c39" class="lm ln it lo b lp me lr mf lt mg lv mh lx mi lz ma mb mc md bi translated"><a class="ae nf" href="https://www.michaelagreiler.com/stacked-pull-requests/" rel="noopener ugc nofollow" target="_blank">堆叠拉取请求:让代码审查更快、更容易、更有效</a>——米凯拉·格雷勒博士</li><li id="16ca" class="lm ln it lo b lp me lr mf lt mg lv mh lx mi lz ma mb mc md bi translated"><a class="ae nf" href="https://www.reddit.com/r/ExperiencedDevs/comments/oo4ds0/code_reviews_becoming_a_blocker/" rel="noopener ugc nofollow" target="_blank">代码审查成为一个阻碍者</a> — Reddit</li><li id="c2a5" class="lm ln it lo b lp me lr mf lt mg lv mh lx mi lz ma mb mc md bi translated"><a class="ae nf" href="https://www.reddit.com/r/agile/comments/e6gffn/code_review_bottleneck/" rel="noopener ugc nofollow" target="_blank">代码评审瓶颈</a> — Reddit</li><li id="64de" class="lm ln it lo b lp me lr mf lt mg lv mh lx mi lz ma mb mc md bi translated"><a class="ae nf" href="https://en.wikipedia.org/wiki/Timeboxing" rel="noopener ugc nofollow" target="_blank">时间拳击</a> —维基百科</li><li id="0edd" class="lm ln it lo b lp me lr mf lt mg lv mh lx mi lz ma mb mc md bi translated">心智模式:学习如何更好地思考，获得心智优势</li><li id="d189" class="lm ln it lo b lp me lr mf lt mg lv mh lx mi lz ma mb mc md bi translated"><a class="ae nf" href="https://github.com/getappmap/vscode-appland" rel="noopener ugc nofollow" target="_blank">vs code的应用扩展</a> — GitHub</li><li id="feeb" class="lm ln it lo b lp me lr mf lt mg lv mh lx mi lz ma mb mc md bi translated">在代码评审中要寻找什么</li><li id="4e08" class="lm ln it lo b lp me lr mf lt mg lv mh lx mi lz ma mb mc md bi translated">https://www.boost.co.nz/blog/2010/09/acceptance-criteria——内森·唐纳森<a class="ae nf" href="https://www.boost.co.nz/blog/2010/09/acceptance-criteria" rel="noopener ugc nofollow" target="_blank"/></li><li id="c6f1" class="lm ln it lo b lp me lr mf lt mg lv mh lx mi lz ma mb mc md bi translated"><a class="ae nf" href="http://localhost:3000/articles/ex-principal-engineers-guide-to-design-thinking-and-continous-delivery#what-is-continuous-deliver" rel="noopener ugc nofollow" target="_blank">前首席工程师设计思维与持续交付指南</a> —刘道智</li><li id="f5a5" class="lm ln it lo b lp me lr mf lt mg lv mh lx mi lz ma mb mc md bi translated"><a class="ae nf" href="https://github.com/airbnb/javascript/pull/2535" rel="noopener ugc nofollow" target="_blank">添加类私有标识符</a> — GitHub</li><li id="ac71" class="lm ln it lo b lp me lr mf lt mg lv mh lx mi lz ma mb mc md bi translated"><a class="ae nf" href="https://tc39.es/ecma262" rel="noopener ugc nofollow" target="_blank"> ECMAScript 2023语言规范</a> — Ecma国际</li><li id="cf06" class="lm ln it lo b lp me lr mf lt mg lv mh lx mi lz ma mb mc md bi translated"><a class="ae nf" href="https://github.com/tc39" rel="noopener ugc nofollow" target="_blank"> Ecma TC39 </a> — GitHub</li><li id="c3c3" class="lm ln it lo b lp me lr mf lt mg lv mh lx mi lz ma mb mc md bi translated"><a class="ae nf" href="https://www.reddit.com/r/cscareerquestions/comments/9hakaz/getting_ripped_apart_in_code_reviews_is_this/" rel="noopener ugc nofollow" target="_blank">在代码评审中被撕裂，这正常吗？</a> — Reddit</li><li id="c40e" class="lm ln it lo b lp me lr mf lt mg lv mh lx mi lz ma mb mc md bi translated"><a class="ae nf" href="https://blog.devgenius.io/aggressive-code-review-e5f8869f3967" rel="noopener ugc nofollow" target="_blank">激进的代码审查</a> —毕博</li><li id="aaf0" class="lm ln it lo b lp me lr mf lt mg lv mh lx mi lz ma mb mc md bi translated"><a class="ae nf" href="https://storage.googleapis.com/pub-tools-public-publication-data/pdf/80735342aebcbfc8af4878373f842c25323cb985.pdf" rel="noopener ugc nofollow" target="_blank">现代代码审查:谷歌案例研究</a>——凯特琳·萨多夫斯基，艾玛·索德伯格，卢克·丘奇，迈克尔·西普科。谷歌公司。</li></ul></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><pre class="kj kk kl km gt oj ok ol bn om on bi"><span id="6d42" class="oo kv it ok b be op oq l or os">Want to Connect? This article was originally posted on <a class="ae nf" href="https://dawchihliou.github.io/articles/tired-of-slow-code-reviews" rel="noopener ugc nofollow" target="_blank">Daw-Chih’s website</a>.</span></pre></div></div>    
</body>
</html>