<html>
<head>
<title>Clean Components with React Hooks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用反作用挂钩清洁组件</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/clean-components-with-react-hooks-4cfef201176e?source=collection_archive---------4-----------------------#2019-11-01">https://levelup.gitconnected.com/clean-components-with-react-hooks-4cfef201176e?source=collection_archive---------4-----------------------#2019-11-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="92ac" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">React Hooks由Sophie Alpert、Dan Abramov和Ryan Florence在React Conf 2018 上首次推出。挂钩支持状态和副作用管理，而无需创建类组件。React团队在React应用程序中创建的类组件和模式方面有三个主要问题。这些问题包括:<strong class="jp ir">包装地狱</strong>、<strong class="jp ir">庞大的组件</strong>，以及<strong class="jp ir">混乱的类</strong>。该团队建议增加React挂钩，而不是继续沿着这条路走下去。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/9360ed6b0520b0b2b15cfba8f70175d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*wVL7s9i17u5hWC6F.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated">“包装地狱”的众多例子之一</figcaption></figure><p id="d055" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> React团队对挂钩的建议</strong></p><ul class=""><li id="4b3b" class="lc ld iq jp b jq jr ju jv jy le kc lf kg lg kk lh li lj lk bi translated">使用不带类的所有React功能</li><li id="52b5" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk lh li lj lk bi translated">重用组件之间的有状态逻辑</li><li id="d62e" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk lh li lj lk bi translated">选择加入并向后兼容传统React应用程序</li></ul><p id="3811" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">React挂钩在代码中实现是可选的，但是它们可以简化复杂性并提高组件的可读性。</p><h2 id="72d2" class="lq lr iq bd ls lt lu dn lv lw lx dp ly jy lz ma mb kc mc md me kg mf mg mh mi bi translated">【React文档中的关键概念</h2><p id="7000" class="pw-post-body-paragraph jn jo iq jp b jq mj js jt ju mk jw jx jy ml ka kb kc mm ke kf kg mn ki kj kk ij bi translated">当您了解这个JavaScript库的细节时，React的文档是一个非常有用的资源。在我们在编码会话中引入钩子之前，有几个概念需要理解。</p><p id="e76c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">根据<a class="ae kl" href="https://reactjs.org/docs/hooks-overview.html" rel="noopener ugc nofollow" target="_blank">反应钩文件</a>:</p><p id="2820" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">"<strong class="jp ir"> useState </strong>返回一对:当前状态值和一个让你更新它的函数。您可以从事件处理程序或其他地方调用该函数。它类似于类中的<strong class="jp ir"> this.setState </strong>，除了它没有将新旧状态合并在一起。</p><p id="2c62" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">钩子是让你从功能组件中“钩入”反应状态和生命周期特征的功能。钩子在类内部不起作用——它们让你在没有类的情况下使用React。"</p><p id="be0f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> React的文档也强调了钩子是JavaScript函数，但是它们强加了两个额外的规则:</strong></p><ol class=""><li id="613b" class="lc ld iq jp b jq jr ju jv jy le kc lf kg lg kk mo li lj lk bi translated">只调用顶层的钩子。不要在循环、条件或嵌套函数中调用钩子。</li><li id="cc2b" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk mo li lj lk bi translated">仅从React函数组件调用挂钩。不要从常规的JavaScript函数中调用钩子。(只有一个地方可以调用钩子——您自己的定制钩子)</li></ol><p id="7886" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们已经对React挂钩有了一些基本的了解，让我们开始编写代码吧！</p></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><h1 id="bc78" class="mw lr iq bd ls mx my mz lv na nb nc ly nd ne nf mb ng nh ni me nj nk nl mh nm bi translated">计数器组件:用React钩子比较类组件和函数组件</h1><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi nn"><img src="../Images/81f91f0407bc884106c4d310415d8811.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MrMUc0QMGHpSbacCWkaatw.png"/></div></div></figure><p id="0119" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">上面的两个计数器组件看起来很相似，但是让我们分析一下细微的区别。</p><p id="8b89" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在左边，类组件设置一个初始状态，count变量等于零。点击按钮时，<code class="fe no np nq nr b">this.handleCounter</code>触发该功能，<code class="fe no np nq nr b">this.state.count</code>将<code class="fe no np nq nr b">count</code>加1。</p><p id="90fe" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在右边，函数组件定义变量和函数，用<code class="fe no np nq nr b">[count, setCount]</code> <strong class="jp ir">改变变量。</strong>计数变量的状态通过<code class="fe no np nq nr b">useState</code>初始化为零。现在，当点击按钮时，<code class="fe no np nq nr b">handleCounter</code>触发，<code class="fe no np nq nr b">setCount</code>将<code class="fe no np nq nr b">count</code>变量加1。</p><h1 id="f34c" class="mw lr iq bd ls mx ns mz lv na nt nc ly nd nu nf mb ng nv ni me nj nw nl mh nm bi translated">给计数器组件添加效果</h1><p id="242a" class="pw-post-body-paragraph jn jo iq jp b jq mj js jt ju mk jw jx jy ml ka kb kc mm ke kf kg mn ki kj kk ij bi translated">效果允许您在React组件中执行副作用。<code class="fe no np nq nr b">useEffect</code>钩子是一个单独的函数，它取代了React类生命周期方法<code class="fe no np nq nr b">componentDidMount</code>、<code class="fe no np nq nr b">componentDidUpdate</code>和<code class="fe no np nq nr b">componentDidUnmount</code>的功能。钩子从文件顶部的React导入。下面的代码演示了如何在计数增加时更新浏览器选项卡中的文本。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi nx"><img src="../Images/43bedae81fd1355ea0e657d4cd8382ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-OPE0a3_DZhhEjHPdlJwIw.png"/></div></div></figure><p id="e64f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了更新浏览器标签中的计数值，类组件需要<code class="fe no np nq nr b">componentDidMount</code>和<code class="fe no np nq nr b">componentDidUpdate</code>来显示变化的<code class="fe no np nq nr b">this.state.count</code> <strong class="jp ir"> </strong>。使用<code class="fe no np nq nr b">useEffect</code>钩子，函数组件调用这个钩子来更新<code class="fe no np nq nr b">count</code>值。</p><h1 id="f5a3" class="mw lr iq bd ls mx ns mz lv na nt nc ly nd nu nf mb ng nv ni me nj nw nl mh nm bi translated">带有自定义挂钩的功能组件</h1><p id="eef9" class="pw-post-body-paragraph jn jo iq jp b jq mj js jt ju mk jw jx jy ml ka kb kc mm ke kf kg mn ki kj kk ij bi translated">React挂钩还允许您抽象函数组件下面的逻辑。这可以通过自定义挂钩来实现。自定义钩子命名约定以<strong class="jp ir">“use”</strong>开始，所以我们将这个钩子命名为<code class="fe no np nq nr b">useBrowserTabEffect</code>。这个定制钩子的行为与上例中的<code class="fe no np nq nr b">useEffect</code>钩子相同。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi ny"><img src="../Images/23caff8c437e9fc3ebe23d7877dcdbb1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yA1P8f9QsqFywB-fETOioQ.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated">自定义挂钩示例</figcaption></figure><h1 id="4fbd" class="mw lr iq bd ls mx ns mz lv na nt nc ly nd nu nf mb ng nv ni me nj nw nl mh nm bi translated">计数器功能</h1><p id="12bd" class="pw-post-body-paragraph jn jo iq jp b jq mj js jt ju mk jw jx jy ml ka kb kc mm ke kf kg mn ki kj kk ij bi translated">类和函数组件现在有了相同的行为！您可以在下面的窗口和选项卡中看到计数更新。如果你想尝试计数器，这里有一个链接，链接到带有计数器组件的<a class="ae kl" href="https://github.com/PrestonElliott/React-Hooks" rel="noopener ugc nofollow" target="_blank"> GitHub库</a>。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi nz"><img src="../Images/6b9ec990601933c89b797c4193a1efcf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5eV5gaFAuGACnPDDn3sQ1g.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated">带挂钩的函数组件之上的类组件</figcaption></figure><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi oa"><img src="../Images/5946517c1d1529452b52de6a6ff29686.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SsMwm15eV0MJ8AG2joX3lQ.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated">类别组件效果更新浏览器选项卡</figcaption></figure><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi ob"><img src="../Images/1cc149cf659ccdba7b8ef0f2a0a1db1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dzYLMkaz4CsTObi6gnmKfA.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated">功能组件效果更新浏览器标签</figcaption></figure><h1 id="1c68" class="mw lr iq bd ls mx ns mz lv na nt nc ly nd nu nf mb ng nv ni me nj nw nl mh nm bi translated">计数器组件比较的要点</h1><ul class=""><li id="5eb1" class="lc ld iq jp b jq mj ju mk jy oc kc od kg oe kk lh li lj lk bi translated">一旦类生命周期方法开始发挥作用，类组件就会变大</li><li id="a87e" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk lh li lj lk bi translated"><strong class="jp ir">计数</strong>比<strong class="jp ir">计数</strong>更容易阅读和重复</li><li id="ef00" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk lh li lj lk bi translated">挂钩为您和其他开发人员创建了更整洁的代码</li></ul><p id="ee06" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">要了解更多关于React Hooks的信息，请查看下面的视频！React团队为任何想要学习和实现代码挂钩的人提供了一个很好的基础。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="of og l"/></div></figure></div></div>    
</body>
</html>