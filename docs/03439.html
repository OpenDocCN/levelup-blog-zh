<html>
<head>
<title>UINavigationController and UINavigationBar in Swift</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Swift中的UINavigationController和UINavigationBar</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/uinavigation-controller-and-uinavigationbar-in-swift-ff3532fd58b6?source=collection_archive---------1-----------------------#2020-05-09">https://levelup.gitconnected.com/uinavigation-controller-and-uinavigationbar-in-swift-ff3532fd58b6?source=collection_archive---------1-----------------------#2020-05-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/364d69c505b9e0b03932849a981af04c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*792WKR_ntFsLIPa0hfSawA.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">斯蒂芬·亨宁通过<a class="ae kc" href="https://unsplash.com/" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的图片</figcaption></figure><h1 id="9623" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">概观</h1><p id="710f" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">导航控制器是一个容器视图，可以管理分层内容的导航。导航控制器使用导航堆栈管理当前显示屏幕。导航栈可以有“n”个视图控制器。堆栈中最底层视图控制器是根视图控制器，其他是子视图控制器。一次只能看到一个子视图控制器，它是导航层次结构中最顶层的视图控制器。视图控制器可以使用push和pop操作在堆栈中添加或删除。</p><p id="50c3" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">在本教程中，我们将学习</p><ol class=""><li id="a382" class="me mf iq ld b le lz li ma lm mg lq mh lu mi ly mj mk ml mm bi translated">如何将视图控制器嵌入到导航控制器中？</li><li id="aae1" class="me mf iq ld b le mn li mo lm mp lq mq lu mr ly mj mk ml mm bi translated">推送方式，从导航栈弹出？</li><li id="2cdd" class="me mf iq ld b le mn li mo lm mp lq mq lu mr ly mj mk ml mm bi translated">如何使用导航栈作为数组？</li><li id="5b6b" class="me mf iq ld b le mn li mo lm mp lq mq lu mr ly mj mk ml mm bi translated">自定义导航栏？所以让我们开始吧</li></ol><blockquote class="ms mt mu"><p id="4e8e" class="lb lc mv ld b le lz lg lh li ma lk ll mw mb lo lp mx mc ls lt my md lw lx ly ij bi translated">本教程使用<strong class="ld ir"> Swift 5，Xcode 11.2，iOS 13 &amp;故事板界面编写。</strong></p></blockquote><h1 id="acd3" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">1.从导航控制器开始</h1><p id="8ed1" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">在Xcode中创建单视图应用程序。将两个视图控制器添加到故事板中。为这些视图控制器创建两个不同的swift文件，并为它们设置标识符。在每个视图控制器中选择一个按钮，为它们设置约束，并根据需要进行定制。将这些按钮的动作出口添加到相应的视图控制器中。在我的例子中，我将视图控制器命名为“FirstVC”和“SecondVC”，将按钮命名为“Push SecondVC”和“Pop To First”。</p><figure class="na nb nc nd gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mz"><img src="../Images/3a488fbda5881706ab9a13d1771bd2a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PfVF7ThJ91nSfuW761JCRw.png"/></div></div></figure><p id="6831" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">现在使用storyboard将您的“FirstVC”嵌入到导航控制器中</p><figure class="na nb nc nd gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ne"><img src="../Images/3024206ca7350d2e636ecf6d02b4062d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5aeT75JBmQdBtLGXtTNFsw.png"/></div></div></figure><p id="335c" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">如果你的故事板文件看起来像这样，你就可以开始了</p><figure class="na nb nc nd gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ne"><img src="../Images/c4931dea37c89b97660d3d1d2e4d8248.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4P3PapH0FjfkwMZWsp6X6A.png"/></div></div></figure><p id="8f09" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">您还可以在swift中以编程方式将您的“FirstVC”嵌入导航控制器。但是在本教程中，我们通过使用故事板来保持简单明了。</p><h2 id="9ba4" class="nf ke iq bd kf ng nh dn kj ni nj dp kn lm nk nl kr lq nm nn kv lu no np kz nq bi translated">推入并弹出导航堆栈</h2><p id="067a" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">我们将看到如何将根视图控制器推入、弹出和弹出到导航栈中</p><ul class=""><li id="7ef8" class="me mf iq ld b le lz li ma lm mg lq mh lu mi ly nr mk ml mm bi translated"><strong class="ld ir"> <em class="mv">推到顶端</em> </strong></li></ul><p id="bcac" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">当你按下一个视图控制器时，它被放置在导航栈的顶部，并从你按下的位置向上到达视图控制器。也就是说，如果您从“FirstVC”按下<em class="mv">“</em>SecondVC”，则“second VC”将会放置到“FirstVC”上。如果你按回“第二个VC”，它会将你重定向到“第一个VC”。</p><p id="7cbe" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">在我们的例子中，这个推送操作是通过将“Push SecondVC”按钮按入“FirstVC”来完成的。</p><pre class="na nb nc nd gt ns nt nu nv aw nw bi"><span id="b88a" class="nf ke iq nt b gy nx ny l nz oa">let storyboard = UIStoryboard(name: "Main", bundle: nil)</span><span id="b138" class="nf ke iq nt b gy ob ny l nz oa">let vc = storyboard.instantiateViewController(identifier: "SecondVC")</span><span id="dd5e" class="nf ke iq nt b gy ob ny l nz oa">self.navigationController?.pushViewController(vc, animated: true)</span></pre><ul class=""><li id="df27" class="me mf iq ld b le lz li ma lm mg lq mh lu mi ly nr mk ml mm bi translated"><strong class="ld ir"> <em class="mv">从顶部弹出</em> </strong></li></ul><p id="e62d" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">现在，如果我们想从导航栈中移除最顶层的视图控制器，那么我们必须弹出那个视图控制器。在我们的例子中,“SecondVC”是最顶层的视图控制器，如果我们想把它从导航堆栈中移除，那么我们将在“popToFirstVC”按钮动作中编写这段代码</p><pre class="na nb nc nd gt ns nt nu nv aw nw bi"><span id="625f" class="nf ke iq nt b gy nx ny l nz oa">self.navigationController?.popViewController(animated: true)</span></pre><ul class=""><li id="6661" class="me mf iq ld b le lz li ma lm mg lq mh lu mi ly nr mk ml mm bi translated"><strong class="ld ir"> <em class="mv">弹出到根视图控制器</em> </strong></li></ul><p id="a446" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">我们可以将“n”个视图控制器放入导航栈。有时我们必须从任何一个视图控制器转到根视图控制器，然后我们可以使用这个代码块来执行它。</p><pre class="na nb nc nd gt ns nt nu nv aw nw bi"><span id="62e8" class="nf ke iq nt b gy nx ny l nz oa">navigationController?.popToRootViewController(animated: true)</span></pre><p id="f5fe" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">可以通过替换“SecondVC”中“popToFirstVC”按钮动作中的代码来检查。</p><h2 id="87ed" class="nf ke iq bd kf ng nh dn kj ni nj dp kn lm nk nl kr lq nm nn kv lu no np kz nq bi translated">作为数组的导航堆栈</h2><p id="67ed" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">在导航控制器中，子视图控制器存储为顺序数组。我们也可以从该阵列访问视图控制器。现在我们将看到这个数组的不同用途。</p><ul class=""><li id="3521" class="me mf iq ld b le lz li ma lm mg lq mh lu mi ly nr mk ml mm bi translated"><strong class="ld ir"> <em class="mv">从数组中移除视图控制器</em> </strong></li></ul><p id="040d" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">我们可以从导航堆栈阵列的不同位置移除视图控制器。首先，我们将获得所有可用的视图控制器，然后我们将执行删除操作</p><pre class="na nb nc nd gt ns nt nu nv aw nw bi"><span id="9974" class="nf ke iq nt b gy nx ny l nz oa">var navVCArray = self.navigationController?.viewControllers<br/>navVCArray?.removeLast() //Remove the last view controller<br/>navVCArray?.removeFirst() // Remove the first view controller<br/>navVCArray?.removeAll() //Remove all view controllers<br/>navVCArray?.remove(at: 0) //Remove at specific position</span></pre><ul class=""><li id="3870" class="me mf iq ld b le lz li ma lm mg lq mh lu mi ly nr mk ml mm bi translated"><strong class="ld ir"> <em class="mv">推视图控制器</em> </strong></li></ul><p id="73bf" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">像移除视图控制器一样，我们也可以使用<strong class="ld ir"> append() </strong>将新的视图控制器推入导航堆栈。假设我们想删除最后一个视图控制器，并在堆栈中添加一个新的视图控制器，那么我们会这样做</p><pre class="na nb nc nd gt ns nt nu nv aw nw bi"><span id="aafa" class="nf ke iq nt b gy nx ny l nz oa">var navVCArray = self.navigationController?.viewControllers<br/>navVCArray?.removeLast()</span><span id="74f0" class="nf ke iq nt b gy ob ny l nz oa">let storyboard = UIStoryboard(name: "Main", bundle: nil)<br/>let vc = storyboard.instantiateViewController(identifier: "SecondVC")<br/>navVCArray?.append(vc)</span></pre></div><div class="ab cl oc od hu oe" role="separator"><span class="of bw bk og oh oi"/><span class="of bw bk og oh oi"/><span class="of bw bk og oh"/></div><div class="ij ik il im in"><h1 id="fd8b" class="kd ke iq bd kf kg oj ki kj kk ok km kn ko ol kq kr ks om ku kv kw on ky kz la bi translated">2.自定义导航栏</h1><p id="806a" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">当我们将一个视图控制器从故事板嵌入到导航控制器中或者按下一个视图控制器时，一个白色区域会出现在视图控制器的顶部。那是导航栏。我们可以添加标题，工具栏按钮，并对其进行大量的定制。</p><ul class=""><li id="636e" class="me mf iq ld b le lz li ma lm mg lq mh lu mi ly nr mk ml mm bi translated">更改“barTintColor”、“TintColor”</li></ul><pre class="na nb nc nd gt ns nt nu nv aw nw bi"><span id="fb10" class="nf ke iq nt b gy nx ny l nz oa">self.navigationController?.navigationBar.isTranslucent = false</span><span id="184d" class="nf ke iq nt b gy ob ny l nz oa">self.navigationController?.navigationBar.barTintColor = .cyan</span><span id="56aa" class="nf ke iq nt b gy ob ny l nz oa">self.navigationController?.navigationBar.tintColor = .brown</span></pre><ul class=""><li id="570f" class="me mf iq ld b le lz li ma lm mg lq mh lu mi ly nr mk ml mm bi translated">设置setBackgroundImage，shadowImage</li></ul><pre class="na nb nc nd gt ns nt nu nv aw nw bi"><span id="a6c7" class="nf ke iq nt b gy nx ny l nz oa">navigationController?.navigationBar.setBackgroundImage(UIImage(named: "Banner2"), for: .default)</span><span id="2eac" class="nf ke iq nt b gy ob ny l nz oa">navigationController?.navigationBar.shadowImage = UIImage(named: "Banner")</span></pre><ul class=""><li id="329d" class="me mf iq ld b le lz li ma lm mg lq mh lu mi ly nr mk ml mm bi translated">设置标题和自定义标题颜色</li></ul><pre class="na nb nc nd gt ns nt nu nv aw nw bi"><span id="4489" class="nf ke iq nt b gy nx ny l nz oa">self.navigationItem.title = "First VC"</span><span id="2968" class="nf ke iq nt b gy ob ny l nz oa">let textAttributes = [NSAttributedString.Key.foregroundColor:UIColor.red]</span><span id="f02e" class="nf ke iq nt b gy ob ny l nz oa">navigationController?.navigationBar.titleTextAttributes = textAttributes</span></pre><ul class=""><li id="94fa" class="me mf iq ld b le lz li ma lm mg lq mh lu mi ly nr mk ml mm bi translated">将图像设置为导航栏标题</li></ul><pre class="na nb nc nd gt ns nt nu nv aw nw bi"><span id="bfb3" class="nf ke iq nt b gy nx ny l nz oa"><strong class="nt ir">let</strong> logo = UIImage(named: "edit")</span><span id="21b4" class="nf ke iq nt b gy ob ny l nz oa"><strong class="nt ir">let</strong> imageView = UIImageView(image:logo)</span><span id="2925" class="nf ke iq nt b gy ob ny l nz oa"><strong class="nt ir">self</strong>.navigationItem.titleView = imageView</span></pre><ul class=""><li id="577f" class="me mf iq ld b le lz li ma lm mg lq mh lu mi ly nr mk ml mm bi translated">清除你的导航栏背景</li></ul><pre class="na nb nc nd gt ns nt nu nv aw nw bi"><span id="1268" class="nf ke iq nt b gy nx ny l nz oa">self.navigationBar.setBackgroundImage(UIImage(), for: UIBarMetrics.default)</span><span id="04df" class="nf ke iq nt b gy ob ny l nz oa">self.navigationBar.shadowImage = UIImage()</span><span id="3406" class="nf ke iq nt b gy ob ny l nz oa">self.navigationBar.isTranslucent = true</span><span id="f192" class="nf ke iq nt b gy ob ny l nz oa">self.view.backgroundColor = UIColor.clear</span></pre><ul class=""><li id="d98e" class="me mf iq ld b le lz li ma lm mg lq mh lu mi ly nr mk ml mm bi translated">移除您的导航栏边框</li></ul><pre class="na nb nc nd gt ns nt nu nv aw nw bi"><span id="8005" class="nf ke iq nt b gy nx ny l nz oa">self.navigationBar.setBackgroundImage(UIImage(), for:.default)</span><span id="7844" class="nf ke iq nt b gy ob ny l nz oa">self.navigationBar.shadowImage = UIImage()</span><span id="a2ed" class="nf ke iq nt b gy ob ny l nz oa">self.navigationBar.layoutIfNeeded()</span></pre><ul class=""><li id="f4f1" class="me mf iq ld b le lz li ma lm mg lq mh lu mi ly nr mk ml mm bi translated">自定义后退按钮。去掉后退按钮的标题，设置颜色。</li></ul><pre class="na nb nc nd gt ns nt nu nv aw nw bi"><span id="ab89" class="nf ke iq nt b gy nx ny l nz oa">navigationItem.backBarButtonItem = UIBarButtonItem(title: "", style: .plain, target: nil, action: nil)</span><span id="9a38" class="nf ke iq nt b gy ob ny l nz oa">navigationItem.backBarButtonItem?.tintColor = UIColor.cgLightBlue</span></pre><ul class=""><li id="7118" class="me mf iq ld b le lz li ma lm mg lq mh lu mi ly nr mk ml mm bi translated">添加一个工具栏按钮项目:我们可以使用系统图标、文本或自定义图像添加leftBarButtonItem &amp; rightBarButtonItem。使用barButtonSystemItem add添加leftBarButtonItem</li></ul><pre class="na nb nc nd gt ns nt nu nv aw nw bi"><span id="f1a8" class="nf ke iq nt b gy nx ny l nz oa">navigationItem.leftBarButtonItem = UIBarButtonItem(barButtonSystemItem: .add, target: self, action: #selector(addTapped))</span></pre><ul class=""><li id="668f" class="me mf iq ld b le lz li ma lm mg lq mh lu mi ly nr mk ml mm bi translated">添加带有“添加”标题的rightBarButtonItem</li></ul><pre class="na nb nc nd gt ns nt nu nv aw nw bi"><span id="6b3b" class="nf ke iq nt b gy nx ny l nz oa">navigationItem.rightBarButtonItem = UIBarButtonItem(title: "Add", style: .plain, target: self, action: #selector(addTapped))</span></pre><ul class=""><li id="6ecd" class="me mf iq ld b le lz li ma lm mg lq mh lu mi ly nr mk ml mm bi translated">用自己的定制创建一个栏按钮</li></ul><pre class="na nb nc nd gt ns nt nu nv aw nw bi"><span id="5b1f" class="nf ke iq nt b gy nx ny l nz oa">let playButton = UIButton(type: .custom)</span><span id="e960" class="nf ke iq nt b gy ob ny l nz oa">playButton.setImage(UIImage(named: "plus"), for: .normal)</span><span id="4485" class="nf ke iq nt b gy ob ny l nz oa">playButton.addTarget<strong class="nt ir">(</strong>self, action: #selector(playTapped), for: .touchUpInside)</span><span id="277a" class="nf ke iq nt b gy ob ny l nz oa">playButton.frame = CGRect(x: 0, y: 0, width: 10, height: 10)</span><span id="ab0f" class="nf ke iq nt b gy ob ny l nz oa">let barButton = UIBarButtonItem(customView: playButton)</span></pre><ul class=""><li id="d040" class="me mf iq ld b le lz li ma lm mg lq mh lu mi ly nr mk ml mm bi translated">添加多个rightBarButtonItem</li></ul><pre class="na nb nc nd gt ns nt nu nv aw nw bi"><span id="023a" class="nf ke iq nt b gy nx ny l nz oa">let add = UIBarButtonItem(barButtonSystemItem: .camera, target: self, action: #selector(addTapped))</span><span id="fab8" class="nf ke iq nt b gy ob ny l nz oa">let playButton = UIButton(type: .custom)</span><span id="7686" class="nf ke iq nt b gy ob ny l nz oa">playButton.setImage(UIImage(named: "plus"), for: .normal)</span><span id="fc9a" class="nf ke iq nt b gy ob ny l nz oa">playButton.addTarget(self, action: #selector(playTapped), for: .touchUpInside)</span><span id="a6b6" class="nf ke iq nt b gy ob ny l nz oa">playButton.frame = CGRect(x: 0, y: 0, width: 10, height: 10)</span><span id="834f" class="nf ke iq nt b gy ob ny l nz oa">let barButton = UIBarButtonItem(customView: playButton)</span><span id="d823" class="nf ke iq nt b gy ob ny l nz oa">navigationItem.rightBarButtonItems = [add, barButton]</span></pre><p id="db6a" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">今天到此为止。请查看苹果文档中的<a class="ae kc" href="https://developer.apple.com/documentation/uikit/uinavigationcontroller" rel="noopener ugc nofollow" target="_blank"> UINavigationController </a>和<a class="ae kc" href="https://developer.apple.com/documentation/uikit/uinavigationbar" rel="noopener ugc nofollow" target="_blank">导航条</a>来用它们做很多黑客攻击。</p><p id="1163" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated"><strong class="ld ir">如果你觉得这篇文章有用，请分享并鼓掌</strong>👏👏👏<br/>查看我在<a class="ae kc" href="https://medium.com/@arifulislam14" rel="noopener">媒体</a>上的其他文章，并在<a class="ae kc" href="https://www.linkedin.com/in/arifparvez14/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上联系我。</p><p id="c6a0" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">感谢您阅读&amp;快乐编码🙂</p></div></div>    
</body>
</html>