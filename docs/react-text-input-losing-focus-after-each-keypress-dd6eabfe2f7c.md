# 对每次按键后失去焦点的文本输入做出反应

> 原文：<https://levelup.gitconnected.com/react-text-input-losing-focus-after-each-keypress-dd6eabfe2f7c>

这个 bug 花了我一段时间才弄明白，所以我想分享一下原因和修复方法。

我在表单上输入了简单的文本。

如果你在文本输入中输入一个“r ”,它会显示“r ”,然后焦点会转移到其他地方。不确定在哪里。但不再输入文本。因此，他们输入的第二个字符不会出现。

如果你想输入一个完整的单词，比如“foo ”,你必须输入“f”。然后点击返回文本输入。然后键入“o”。点击返回文本输入。然后输入最后一个“o”。

显然这是混乱的。

问题是，我在另一个组件中定义了一个组件。

您可以在函数内部定义函数。因为我的组件只是函数，所以你应该能够在另一个函数组件中定义一个函数组件。

但是行不通。

您可以在另一个组件中定义一个类似于*组件的*函数，如下所示:

`const renderHeader = (x) => { return <div>{x}</div> }`

renderHeader 只是一个返回一些 JSX 的函数。严格地说，它不是 react 组件。你完全可以在另一个函数组件中定义这个花花公子，它非常好用。

但是要做两个细微的改变，就像这样:

const **R** enderHeader = ( **道具**)=>{ return<div>{**道具。** x} < /div > }

现在，它是一个真正的组件。然后嘣！！现在你变得疯狂“失去焦点”的行为。

为了解决这个问题，我简单地将 RendorHeader 函数移到了顶层函数中，这样就解决了这个问题。