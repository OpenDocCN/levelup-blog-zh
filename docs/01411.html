<html>
<head>
<title>Export to PDF with the PDFMake Library in an Angular 8 Application</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Angular 8应用程序中使用PDFMake库导出到PDF</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/export-to-pdf-with-the-pdfmake-library-in-an-angular-8-application-f0f83abfe703?source=collection_archive---------1-----------------------#2019-12-26">https://levelup.gitconnected.com/export-to-pdf-with-the-pdfmake-library-in-an-angular-8-application-f0f83abfe703?source=collection_archive---------1-----------------------#2019-12-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="e47d" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在PDFfile中打开、下载和打印您的配置文件信息的指南</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/0811a4bbaaa6e796d5f0db9236d6619a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9nAxkT7Z27Hze796en4opg.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">最后结局</figcaption></figure><p id="fe04" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">上图是这个简短教程的最终输出。</p><p id="a9c7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在本文中，我们将学习如何从注册表单中收到的信息生成PDF文件。我们将要使用的方法是<strong class="la iu">浏览器打印功能</strong>。还有另一种方法是使用后端应用程序或第三方报告工具生成PDF，然后在客户端下载。这里我们将重点讨论第一种方法。</p><p id="5eef" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们将使用我在上一篇文章中创建的表单。你可以点击查看链接<a class="ae lu" rel="noopener ugc nofollow" target="_blank" href="/reactive-form-validation-with-smooth-scrolling-to-errors-in-angular-8-57fa63b2689d">。通过该链接，您可以了解如何使用反应式表单设置Angular 8应用程序。</a></p><h1 id="85db" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">安装PDFMake库</h1><p id="e270" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">首先，我们需要安装PDFMake库，这是一个用于客户端PDF生成的开源JavaScript库。只需运行以下命令。</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="1cbb" class="mx lw it mt b gy my mz l na nb">npm install pdfmake --save</span></pre><p id="b9f7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">接下来，我们需要导入两个文件— <code class="fe nc nd ne mt b">pdfmake.js</code>和<code class="fe nc nd ne mt b">vfs_fonts.js</code>，它们来自上面的安装命令。在组件或服务的顶部插入下面的代码。这里我用的是<code class="fe nc nd ne mt b">app.component.ts</code>文件。</p><p id="9cf6" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu">应用组件</strong></p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="f47b" class="mx lw it mt b gy my mz l na nb">import pdfMake from 'pdfmake/build/pdfmake';<br/>import pdfFonts from 'pdfmake/build/vfs_fonts';<br/>pdfMake.vfs = pdfFonts.pdfMake.vfs;</span></pre><h1 id="8f3c" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">在PDF中生成单行文本</h1><p id="a1b1" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">为了测试我们的环境设置，我们将在PDF文件中生成一行文本。这将确保我们已经正确设置了环境。</p><p id="d668" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">创建一个函数</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="700f" class="mx lw it mt b gy my mz l na nb">generatePdf(){<br/>  const documentDefinition = { content: 'This is for testing.' };<br/>  pdfMake.createPdf(documentDefinition).open();<br/>}</span></pre><p id="08b5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">创建一个“打开PDF”按钮</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="a4f0" class="mx lw it mt b gy my mz l na nb">&lt;button (click)="generatePdf()"&gt;Open PDF&lt;/button&gt;</span></pre><p id="c697" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这是从上面的命令生成的PDF。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nf"><img src="../Images/3b7290a9be5f0a916f80a69d51b7cb90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*di26VDZcrU7JFduUB7YASA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">测试PDF</figcaption></figure><p id="76d3" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">因此，我们已经成功地设置了生成aPDF的环境。我们可以使用一些其他的内置方法来代替<code class="fe nc nd ne mt b">open()</code>。</p><ul class=""><li id="2f65" class="ng nh it la b lb lc le lf lh ni ll nj lp nk lt nl nm nn no bi translated">下载PDF: <code class="fe nc nd ne mt b">pdfMake.createPdf(documentDefinition).download();</code></li><li id="88e9" class="ng nh it la b lb np le nq lh nr ll ns lp nt lt nl nm nn no bi translated">在同一窗口打开PDF:<code class="fe nc nd ne mt b">pdfMake.createPdf(documentDefinition).open({}, window);</code></li><li id="9c88" class="ng nh it la b lb np le nq lh nr ll ns lp nt lt nl nm nn no bi translated">打印PDF: <code class="fe nc nd ne mt b">pdfMake.createPdf(documentDefinition).print();</code></li></ul><h1 id="0c31" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">以PDF格式显示个人资料信息</h1><p id="5587" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">我们将创建一个接口和2个函数来生成一个具有基本样式格式的PDF。</p><p id="b5e2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu"> profile.ts </strong></p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="a7b5" class="mx lw it mt b gy my mz l na nb">export class Profile {<br/>   firstname: string;<br/>   lastname: string;<br/>   username: string;<br/>   email: string;<br/>}</span></pre><p id="ce7d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu">应用组件</strong></p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="0103" class="mx lw it mt b gy my mz l na nb">import { Profile } from './profile';</span><span id="7e0e" class="mx lw it mt b gy nu mz l na nb">profile: Profile;</span><span id="8376" class="mx lw it mt b gy nu mz l na nb">generatePdf(action = 'open') {<br/>   const documentDefinition = this.getDocumentDefinition();</span><span id="9d45" class="mx lw it mt b gy nu mz l na nb">   switch (action) {<br/>     case 'open': pdfMake.createPdf(documentDefinition).open();    <br/>     break;<br/>     case 'print': pdfMake.createPdf(documentDefinition).print(); <br/>     break;<br/>     case 'download':     <br/>     pdfMake.createPdf(documentDefinition).download(); <br/>     break;</span><span id="8251" class="mx lw it mt b gy nu mz l na nb">     default: pdfMake.createPdf(documentDefinition).open(); <br/>     break;<br/>   }<br/>}</span><span id="8f63" class="mx lw it mt b gy nu mz l na nb">getDocumentDefinition() {<br/>   return {<br/>     content: [<br/>     {<br/>       text: 'PROFILE',<br/>       bold: true,<br/>       fontSize: 20,<br/>       alignment: 'center',<br/>       margin: [0, 0, 0, 20]<br/>     },<br/>     {<br/>     columns: [<br/>       [{<br/>         text: 'Firstname : ' + this.profile.firstname<br/>       },<br/>       {<br/>         text: 'Lastname : ' + this.profile.lastname<br/>       },<br/>       {<br/>         text: 'Username : ' + this.profile.username<br/>       },<br/>       {<br/>         text: 'Email : ' + this.profile.email<br/>       }] <br/>      ]<br/>     }],<br/>     styles: {<br/>       name: {<br/>         fontSize: 16,<br/>         bold: true<br/>     }<br/>   }<br/> };<br/>}</span></pre><p id="5d50" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">然后，我们可以在注册表单中输入所有信息后调用<code class="fe nc nd ne mt b">generatePDF()</code>函数。</p><pre class="kj kk kl km gt ms mt mu mv aw mw bi"><span id="870c" class="mx lw it mt b gy my mz l na nb">onSubmit() {<br/>   this.submitted = true;</span><span id="97f0" class="mx lw it mt b gy nu mz l na nb">   if (this.signUpForm.invalid) {<br/>     this.scrollToError();<br/>   } else {<br/>     this.profile = {<br/>       firstname: this.signUpForm.value.firstname,<br/>       lastname: this.signUpForm.value.lastname,<br/>       username: this.signUpForm.value.username,<br/>       email: this.signUpForm.value.email<br/>     };</span><span id="d491" class="mx lw it mt b gy nu mz l na nb">     this.generatePdf("download");<br/>   }<br/>}</span></pre><p id="8475" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">上面的一些代码来自<a class="ae lu" rel="noopener ugc nofollow" target="_blank" href="/reactive-form-validation-with-smooth-scrolling-to-errors-in-angular-8-57fa63b2689d">之前的教程</a>。基本上，我们将在PDF文件中只显示<code class="fe nc nd ne mt b">firstname</code>、<code class="fe nc nd ne mt b">lastname</code>、<code class="fe nc nd ne mt b">username</code>和<code class="fe nc nd ne mt b">email</code>。然后，我们可以得到如本教程开头所示的最终结果。</p><p id="c9ae" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">要生成具有更好样式格式的PDF，可以检查这个<a class="ae lu" href="https://www.ngdevelop.tech/angular-8-export-to-pdf-using-pdfmake/" rel="noopener ugc nofollow" target="_blank">链接</a>。还有关于如何在PDF中添加表格和图片的信息。</p><p id="bbaa" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是，这个选项有一些限制。我们对PDF的格式和设计没有很强的控制。</p><h1 id="ca3b" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">结论</h1><p id="8ac0" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">在这篇文章中，我们学习了如何从注册表单中收到的信息生成PDF文件。</p><p id="d4da" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果你认为这篇文章是有帮助的，不要忘记与你的朋友分享。</p></div><div class="ab cl nv nw hx nx" role="separator"><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa"/></div><div class="im in io ip iq"><h1 id="4999" class="lv lw it bd lx ly oc ma mb mc od me mf jz oe ka mh kc of kd mj kf og kg ml mm bi translated">资源</h1><ol class=""><li id="06de" class="ng nh it la b lb mn le mo lh oh ll oi lp oj lt ok nm nn no bi translated"><a class="ae lu" href="https://www.ngdevelop.tech/angular-8-export-to-pdf-using-pdfmake/" rel="noopener ugc nofollow" target="_blank">https://www . ng develop . tech/angular-8-export-to-pdf-using-pdf make/</a></li></ol></div></div>    
</body>
</html>