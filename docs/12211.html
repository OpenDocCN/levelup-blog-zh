<html>
<head>
<title>Stop Commenting Bad Code. Rewrite It.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">停止评论糟糕的代码。重写一遍。</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/stop-commenting-bad-code-rewrite-it-d469079fa55b?source=collection_archive---------18-----------------------#2022-05-23">https://levelup.gitconnected.com/stop-commenting-bad-code-rewrite-it-d469079fa55b?source=collection_archive---------18-----------------------#2022-05-23</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="9910" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">如何写出更好的评论？</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/2ca734fec4837cc4ce5dcd211a4245e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Z4SQwWed_P6Zc3r0"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">Artur Shamsutdinov 在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="9b8e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">注释对每个程序员来说都太明显了，但是你真的用对了吗？</p><p id="7999" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这篇文章将向你介绍我在《T4》一书中读到的专业建议。</p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="90b4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如文章的标题所示:</p><blockquote class="mc md me"><p id="112a" class="kz la mf lb b lc ld ju le lf lg jx lh mg lj lk ll mh ln lo lp mi lr ls lt lu im bi translated">"不要评论糟糕的代码——重写它."——布莱恩·w·克尼根和p·j·普劳格尔</p></blockquote><p id="b803" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">评论也不是“纯粹的好”。如果代码不好，就应该重构它，而不是添加混乱的注释使它变得更乱。</p><p id="dfbe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">况且评论也可以“撒谎”。因为代码会变化和发展。大块的从这里移到那里。这些大块分叉、繁殖，然后又聚在一起形成嵌合体。不幸的是，评论并不总是跟着他们。—所以注释通常与它们描述的代码分开。随着时间的推移，这些陈旧的评论变得越来越不准确，并可能导致程序员做出错误的判断。这导致我们花费更多的精力。</p><p id="8d67" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">只有代码能如实地告诉你它在做什么，这是唯一真正准确的信息来源。所以程序员应该专注于直接写出正确清晰的代码，确保不需要注释。</p><p id="a840" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但在某些情况下，代码本身不足以解释其行为。然后你需要添加少量的评论。那么什么是好的评论，什么是不好的评论呢？</p><p id="fd54" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里我引用作者在<a class="ae ky" href="https://www.amazon.com/Clean-Code-Handbook-Software-Craftsmanship/dp/0132350882" rel="noopener ugc nofollow" target="_blank">书</a>中的观点，根据我的理解做适当的删减和修改:</p><h1 id="ff6a" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">好评</h1><ul class=""><li id="e9a7" class="nb nc it lb b lc nd lf ne li nf lm ng lq nh lu ni nj nk nl bi translated">关于需要书写的公司代码规范的法律意见。</li><li id="f49d" class="nb nc it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated">提供基本信息的注释。但是这可以用清晰的函数名来代替。</li><li id="51d4" class="nb nc it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated">表达意图的评论。这是因为代码已经解释了一切。</li><li id="2a91" class="nb nc it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated">澄清:将一些模糊的论点或返回值的意思翻译成可读的东西。</li><li id="261f" class="nb nc it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated">后果警告:注释用来警告其他程序员某种后果将会发生。</li><li id="a946" class="nb nc it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated">TODO注释:这是一项应该完成的工作，但由于某种原因尚未完成。但这不是留下糟糕代码的理由。</li><li id="18f4" class="nb nc it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated">放大:评论可以用来放大一些看起来无关紧要的事情的重要性。</li><li id="49b3" class="nb nc it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated">公共API中的Javadocs :供他人快速开发的信息性注释。</li></ul><h1 id="e14a" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">不好的评论</h1><ul class=""><li id="fdf6" class="nb nc it lb b lc nd lf ne li nf lm ng lq nh lu ni nj nk nl bi translated">喃喃自语:给代码的实现添加注释。但是如果你要写，花时间写出最好的评论是必要的。</li><li id="816c" class="nb nc it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated">多余的注释:并不比代码本身更有信息量，甚至比阅读代码还要长。</li><li id="7338" class="nb nc it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated">误导性评论:不准确的评论会误导读者，耗费更多的精力。</li><li id="b9e2" class="nb nc it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated">强制注释:每个函数的Javadocs或每个变量的解释性注释。这可以使代码更加分散。</li><li id="9ca6" class="nb nc it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated">日志注释:记录代码每一次变更的日志。当使用诸如Git这样的源代码管理工具时，这没有任何好处。</li><li id="fcbe" class="nb nc it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated">位置标记:将一个特定的函数放在一长串无用的斜线下面。</li><li id="4cd0" class="nb nc it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated">署名和署名:源代码管理工具已经为我们记录了这些信息，请不要添加。</li><li id="8318" class="nb nc it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated">被注释掉的代码:这些被注释掉的无用代码会让其他读者认为它的存在一定是有原因的，不能删除。于是它们越堆越多，只有最初的开发者才知道它们是干什么用的。无用代码不做评论，请直接删除。因为源代码管理工具会帮助我们记录这一切，所以追溯起来非常容易。</li><li id="de70" class="nb nc it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated">HTML注释:源代码注释中的HTML令人厌恶，让人难以阅读。</li><li id="0c43" class="nb nc it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated">非本地信息:如果你必须写一个注释，确保它描述了它附近出现的代码。</li><li id="d941" class="nb nc it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated">信息太多:不要在评论中加入有趣的历史讨论或不相关的细节。</li><li id="0ea5" class="nb nc it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated">不明显的联系:注释和它描述的代码之间的联系应该是明显的。</li><li id="2663" class="nb nc it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated">函数头:短函数不需要太多描述。为做一件事的小函数选择一个好名字通常比注释头要好。</li><li id="9f3a" class="nb nc it lb b lc nm lf nn li no lm np lq nq lu ni nj nk nl bi translated">非公共代码中的javadoc:尽管javadoc对于公共API非常有用，但对于非公共使用的代码来说，它们是令人讨厌的。为系统内部的类和函数生成Javadocs页面通常是没有用的，而且Javadocs注释的额外形式只不过是一种折磨和干扰。</li></ul><h1 id="0df2" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">结论</h1><p id="1550" class="pw-post-body-paragraph kz la it lb b lc nd ju le lf ne jx lh li nr lk ll lm ns lo lp lq nt ls lt lu im bi translated">所以我非常同意<a class="ae ky" href="https://en.wikipedia.org/wiki/Robert_C._Martin" rel="noopener ugc nofollow" target="_blank">作者</a>——唯一真正好的评论是那些你想办法不写的评论。</p><p id="1bac" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当你想给一段代码添加注释时，看看它是否可以被清理和重构，如果可以，就去做吧——好处远比我们想象的要大。</p><p id="c18c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你觉得怎么样？你在工作中是如何处理的？</p><h1 id="94ff" class="mj mk it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">参考</h1><p id="d913" class="pw-post-body-paragraph kz la it lb b lc nd ju le lf ne jx lh li nr lk ll lm ns lo lp lq nt ls lt lu im bi translated">[1] <a class="ae ky" href="https://www.amazon.com/Clean-Code-Handbook-Software-Craftsmanship/dp/0132350882" rel="noopener ugc nofollow" target="_blank">清洁码</a></p></div><div class="ab cl lv lw hx lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="im in io ip iq"><p id="a91a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">今天就到这里。我是Zachary，我将继续输出与web开发相关的故事。如果你喜欢这样的故事，想支持我，请考虑成为 <a class="ae ky" href="https://medium.com/@islizeqiang/membership" rel="noopener"> <em class="mf">中等会员</em> </a> <em class="mf">。每月5美元，你可以无限制地访问媒体内容。如果你通过</em> <a class="ae ky" href="https://medium.com/@islizeqiang/membership" rel="noopener"> <em class="mf">我的链接</em> </a> <em class="mf">报名，我会得到一点佣金。</em></p><p id="9ba1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你的支持对我来说非常重要——谢谢。</p></div></div>    
</body>
</html>