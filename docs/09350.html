<html>
<head>
<title>Monorepo vs Polyrepo vs Independent Components</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Monorepo vs Polyrepo vs独立组件</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/monorepo-vs-polyrepo-and-independent-components-ecc7c3b2676b?source=collection_archive---------4-----------------------#2021-07-30">https://levelup.gitconnected.com/monorepo-vs-polyrepo-and-independent-components-ecc7c3b2676b?source=collection_archive---------4-----------------------#2021-07-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="ebec" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">为JavaScript项目选择Monorepos vs Polyrepos vs独立组件</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/ba6c6eafb807d9e50854312ff6050c81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BuN29HKLudDMwMPa5W754Q.jpeg"/></div></div></figure><p id="124b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">作为开发人员，选择Monorepo还是Polyrepo方法是我们在项目开始时决定的。最后的决定是在考虑了范围、团队动态、模块的内聚性等因素后做出的。</p><p id="0661" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果我告诉你，你的决定可能会受到一种被称为独立组件的新兴技术的挑战，那该怎么办？T3】</p><p id="fa1a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">因此，本文将探讨Monorepos、Polyrepos和独立组件，以及帮助您选择正确的项目结构的好处。</p></div><div class="ab cl lo lp hu lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ij ik il im in"><h1 id="e2e7" class="lv lw iq bd lx ly lz ma mb mc md me mf jw mg jx mh jz mi ka mj kc mk kd ml mm bi translated">单一回购vs多重回购</h1><p id="82db" class="pw-post-body-paragraph kr ks iq kt b ku mn jr kw kx mo ju kz la mp lc ld le mq lg lh li mr lk ll lm ij bi translated">我们先从了解Monorepos和Polyrepos这两个模型开始。</p><h2 id="e856" class="ms lw iq bd lx mt mu dn mb mv mw dp mf la mx my mh le mz na mj li nb nc ml nd bi translated">Monorepos</h2><p id="0b51" class="pw-post-body-paragraph kr ks iq kt b ku mn jr kw kx mo ju kz la mp lc ld le mq lg lh li mr lk ll lm ij bi translated">顾名思义，Monorepo使用一个存储库来存储一个应用程序或整个应用程序套件的所有模块。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/8f0d644007537c0e5a2bb4d4052b1b4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1158/format:webp/1*QmknFcgVb_r_mWCMDt8_kg.jpeg"/></div><figcaption class="nf ng gj gh gi nh ni bd b be z dk translated">单报告表示</figcaption></figure><p id="139b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Monorepo结构由一个代码存储库组成，该存储库具有包含几个项目的分层目录结构。例如，在同一个存储库中，您有后端、前端和共享模块，如下所示。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/76e87f4f30bcfd8195651f355a6df83a.png" data-original-src="https://miro.medium.com/v2/resize:fit:940/format:webp/1*S0DMkOrh92euOY8fiZzX7Q.png"/></div><figcaption class="nf ng gj gh gi nh ni bd b be z dk translated">单回购的结构</figcaption></figure><h2 id="8e9c" class="ms lw iq bd lx mt mu dn mb mv mw dp mf la mx my mh le mz na mj li nb nc ml nd bi translated">聚repos</h2><p id="54e2" class="pw-post-body-paragraph kr ks iq kt b ku mn jr kw kx mo ju kz la mp lc ld le mq lg lh li mr lk ll lm ij bi translated">Polyrepo是一个术语，我们用它来表示我们使用不同的存储库来存储应用程序的不同部分，或者只是用于不同的应用程序。每个存储库边界背后的决策通常围绕着团队治理、发布范围、模块之间的内聚性等等。</p><p id="a6ab" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">例如，您可以使用不同的存储库来存储前端代码，而使用另一个存储库来存储后端代码。如果有共享代码，您甚至可以创建一个库项目，并将其放入包注册表中，供其他人重用。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/18c4e0a16b6ed41c2e297fd4b7c70dbb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1070/format:webp/1*TNuirnDl1BseeLQ5LjK9bQ.jpeg"/></div><figcaption class="nf ng gj gh gi nh ni bd b be z dk translated">聚合报告表示法</figcaption></figure><p id="253b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">但是，正如您所看到的，拥有大量的存储库对任何团队都没有帮助。相反，它会增加协作、治理、共享代码、管理发布生命周期和测试的开销。</p><p id="6a9b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">因此，在推进Polyrepos时，将存储库的数量保持在可管理的水平是至关重要的。</p></div><div class="ab cl lo lp hu lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ij ik il im in"><h1 id="769c" class="lv lw iq bd lx ly lz ma mb mc md me mf jw mg jx mh jz mi ka mj kc mk kd ml mm bi translated">独立组件</h1><blockquote class="nl"><p id="a7ec" class="nm nn iq bd no np nq nr ns nt nu lm dk translated">Monorepo和Polyrepo都着眼于项目结构和源代码控制的宏观方法。但是，如果我们反过来看呢。</p></blockquote><p id="b67f" class="pw-post-body-paragraph kr ks iq kt b ku nv jr kw kx nw ju kz la nx lc ld le ny lg lh li nz lk ll lm ij bi translated">定义为一个单元有意义的项目结构的最小单元是什么？</p><ol class=""><li id="c93e" class="oa ob iq kt b ku kv kx ky la oc le od li oe lm of og oh oi bi translated">如果我们将一组文件表示为一个单元(例如，React组件、节点模块)。</li><li id="5741" class="oa ob iq kt b ku oj kx ok la ol le om li on lm of og oh oi bi translated">具有独立于代码库其余部分的生命周期。</li><li id="5574" class="oa ob iq kt b ku oj kx ok la ol le om li on lm of og oh oi bi translated">能够在外部共享组件</li></ol><p id="ad20" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们有<strong class="kt ir">独立元件</strong>。</p><p id="0eee" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">因此，这难道不类似于为每个组件创建一个NPM存储库并将它们存储在外面吗？<strong class="kt ir">没有！</strong></p><p id="f95e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">众所周知，通过将每个组件保存在各自的库中来构建前端甚至后端是不现实的。随着组件数量的增加，这将增加如此多的开销，这将限制团队向前发展的生产力。</p><blockquote class="nl"><p id="0da1" class="nm nn iq bd no np nq nr ns nt nu lm dk translated">但是，如果我告诉你，<a class="ae oo" href="https://bit.dev/" rel="noopener ugc nofollow" target="_blank"> Bit </a>将使每个组件独立于我们，而我们可以像过去一样专注于开发应用程序。有趣吧？</p></blockquote><div class="op oq or os ot ou"><a href="https://blog.bitsrc.io/independent-components-the-webs-new-building-blocks-59c893ef0f65" rel="noopener  ugc nofollow" target="_blank"><div class="ov ab fo"><div class="ow ab ox cl cj oy"><h2 class="bd ir gy z fp oz fr fs pa fu fw ip bi translated">独立组件:网络的新构件</h2><div class="pb l"><h3 class="bd b gy z fp oz fr fs pa fu fw dk translated">为什么你所知道的关于微服务、微前端、monorepos甚至普通的旧组件库的一切…</h3></div><div class="pc l"><p class="bd b dl z fp oz fr fs pa fu fw dk translated">blog.bitsrc.io</p></div></div><div class="pd l"><div class="pe l pf pg ph pd pi kp ou"/></div></div></a></div><p id="36a7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">使用Bit，每个组件都被创建为一个独立的单元，可以导出(推送)到远程作用域。本质上，每个组件都有一个存储库。</p><p id="5902" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这些独立的组件回购可以克隆到一个单一的位工作空间，在那里它们通过一个单一的配置文件进行管理，并组合在一起形成新的组件或应用程序。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pj"><img src="../Images/ae6b17e441655e46bbf42dedf267ba50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NWjyGRIlKk9hJzUD5jWYYA.png"/></div></div><figcaption class="nf ng gj gh gi nh ni bd b be z dk translated">具有依赖性的独立组件</figcaption></figure><p id="dd57" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">为您的应用程序提供简单的构建块允许您共享代码、并行工作，并显著减少构建时间。</p><p id="8551" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">但是，它与Monorepos和Polyrepos有什么关系？</strong>要理解这一点，需要了解代码的位结构及其生命周期的细节。所以，我们先来看看细节。</p></div><div class="ab cl lo lp hu lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ij ik il im in"><h2 id="a4b4" class="ms lw iq bd lx mt mu dn mb mv mw dp mf la mx my mh le mz na mj li nb nc ml nd bi translated">以不同的方式理解位及其与结构代码的联系</h2><p id="fca5" class="pw-post-body-paragraph kr ks iq kt b ku mn jr kw kx mo ju kz la mp lc ld le mq lg lh li mr lk ll lm ij bi translated">假设您为单个按钮编写了一个具有独特样式和设计的React组件，并将其导入React应用程序的不同页面。</p><blockquote class="nl"><p id="282e" class="nm nn iq bd no np nq nr ns nt nu lm dk translated">如果你想让网站的按钮风格一致呢？</p></blockquote><p id="072c" class="pw-post-body-paragraph kr ks iq kt b ku nv jr kw kx nw ju kz la nx lc ld le ny lg lh li nz lk ll lm ij bi translated">您必须将应用程序中的组件复制并粘贴到您的网站代码中(假设它们都是使用React构建的)。如果你有一个独立的按钮组件，你可以把它导入到网站中。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pj"><img src="../Images/b835b23cca58544e44976564cf1a4bc8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jY-IxeONa76eW3qub217ZA.png"/></div></div></figure><p id="139d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">使用Bit，项目中的所有组件在设计上变得独立，并被导出到远程范围。所以它更像是云中的一个注册表，由Bit甚至是你来管理(你可以托管自己的版本，因为Bit是开源的)。</p><blockquote class="nl"><p id="e003" class="nm nn iq bd no np nq nr ns nt nu lm dk translated">这是一个相当新颖的概念。最好的办法是<a class="ae oo" href="https://harmony-docs.bit.dev/getting-started/installing-bit/" rel="noopener ugc nofollow" target="_blank">尝试一下</a>来理解潜在的概念以及它在实践中是如何工作的。</p></blockquote><p id="2fc8" class="pw-post-body-paragraph kr ks iq kt b ku nv jr kw kx nw ju kz la nx lc ld le ny lg lh li nz lk ll lm ij bi translated">您会惊讶地看到它提供的抽象，让您感觉您是在Monorepo上工作，但是提供了在外部共享组件的灵活性。</p></div><div class="ab cl lo lp hu lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ij ik il im in"><h1 id="3696" class="lv lw iq bd lx ly lz ma mb mc md me mf jw mg jx mh jz mi ka mj kc mk kd ml mm bi translated">那么这些东西是怎么联系起来的呢？</h1><p id="936c" class="pw-post-body-paragraph kr ks iq kt b ku mn jr kw kx mo ju kz la mp lc ld le mq lg lh li mr lk ll lm ij bi translated">如果您使用Bit将应用程序构建为独立组件的集合，它将在两个不同的级别上处理代码结构:工作区和远程范围。</p><h2 id="f57d" class="ms lw iq bd lx mt mu dn mb mv mw dp mf la mx my mh le mz na mj li nb nc ml nd bi translated"><strong class="ak">位作为单报告</strong></h2><ul class=""><li id="1e60" class="oa ob iq kt b ku mn kx mo la pk le pl li pm lm pn og oh oi bi translated">使用Bit，你可以创建一个工作空间，独立地创建属于多个项目的组件。(基本上，您的工作空间是用Git版本化的)</li><li id="52f1" class="oa ob iq kt b ku oj kx ok la ol le om li on lm pn og oh oi bi translated">在工作区内，每个单独的组件都被Bit跟踪，并被导出到一个远程Bit范围，在这里对其进行版本控制。</li><li id="b1ae" class="oa ob iq kt b ku oj kx ok la ol le om li on lm pn og oh oi bi translated">因此，每个独立的组件被联网成为一个无限的虚拟Monorepo，这是因为bit管理这些组件之间的依赖关系。</li><li id="b415" class="oa ob iq kt b ku oj kx ok la ol le om li on lm pn og oh oi bi translated">如果一个组件引用另一个组件，它将通过远程作用域，使它们实际上是独立的。</li><li id="6489" class="oa ob iq kt b ku oj kx ok la ol le om li on lm pn og oh oi bi translated">如果一个组件被修改和导出，它的所有依赖项将使用它们的Ripple CI逐位测试，确保整个依赖树按预期工作。</li></ul><p id="247a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">因此，独立组件提供了标准Monorepo的所有优势，并通过在更细粒度级别管理依赖关系时提供灵活性来扩展它。</p><h2 id="a56d" class="ms lw iq bd lx mt mu dn mb mv mw dp mf la mx my mh le mz na mj li nb nc ml nd bi translated">作为聚合报告的位</h2><ul class=""><li id="54cc" class="oa ob iq kt b ku mn kx mo la pk le pl li pm lm pn og oh oi bi translated">您可以将您的应用程序(或套件)分成范围和工作区。</li><li id="fdb2" class="oa ob iq kt b ku oj kx ok la ol le om li on lm pn og oh oi bi translated">每个工作区都可以以Polyrepo风格存储在Git存储库中。</li><li id="8e8d" class="oa ob iq kt b ku oj kx ok la ol le om li on lm pn og oh oi bi translated">您还可以决定如何将它们分组到具有相关权限的位范围(组件的远程集合)中。</li><li id="bcda" class="oa ob iq kt b ku oj kx ok la ol le om li on lm pn og oh oi bi translated">这使得组件可以跨多个工作区共享。</li></ul><p id="41f8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">但是，使用Bit时有几个限制，值得一提。</p><h2 id="be44" class="ms lw iq bd lx mt mu dn mb mv mw dp mf la mx my mh le mz na mj li nb nc ml nd bi translated"><strong class="ak">使用位</strong>的限制</h2><ul class=""><li id="2bed" class="oa ob iq kt b ku mn kx mo la pk le pl li pm lm pn og oh oi bi translated">Bit支持前端开发目前主要支持React和React Native和NodeJS。对于Angular或者Vue，你得用他们之前的版本。</li><li id="0832" class="oa ob iq kt b ku oj kx ok la ol le om li on lm pn og oh oi bi translated">Bit最适合JavaScript生态系统代码，比如节点、UI框架和Typescript。</li></ul><p id="a3ea" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">作为参考，我还创建了一个表格来比较这些风格。</p></div><div class="ab cl lo lp hu lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ij ik il im in"><h1 id="29d3" class="lv lw iq bd lx ly lz ma mb mc md me mf jw mg jx mh jz mi ka mj kc mk kd ml mm bi translated">Monorepo vs Polyrepo vs独立组件</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi po"><img src="../Images/c73219de5cf8af6888fec7ab61f41aa9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QS85v8OaZZqpx0xnjmK8ug.jpeg"/></div></div><figcaption class="nf ng gj gh gi nh ni bd b be z dk translated">对照表</figcaption></figure></div><div class="ab cl lo lp hu lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ij ik il im in"><h1 id="ea5c" class="lv lw iq bd lx ly lz ma mb mc md me mf jw mg jx mh jz mi ka mj kc mk kd ml mm bi translated">结论</h1><p id="c812" class="pw-post-body-paragraph kr ks iq kt b ku mn jr kw kx mo ju kz la mp lc ld le mq lg lh li mr lk ll lm ij bi translated">简单地说，独立组件更像是Polyrepo和Monorepo的混合体，拥有两个世界的品质。</p><p id="0d75" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我希望您对不同的方法有一个基本的了解。如果你有任何问题，欢迎在下面评论。干杯！</p></div></div>    
</body>
</html>