<html>
<head>
<title>JavaScript Best Practices — Unexpected Values and More</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript最佳实践——意想不到的价值等等</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/javascript-best-practices-unexpected-values-and-more-c55a1c503d16?source=collection_archive---------17-----------------------#2020-01-27">https://levelup.gitconnected.com/javascript-best-practices-unexpected-values-and-more-c55a1c503d16?source=collection_archive---------17-----------------------#2020-01-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/7072c782bb19893fdef3cdfc1a53adbb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*1sRPs8Frhg3WwtEi"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">照片由<a class="ae kf" href="https://unsplash.com/@marslady?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">米妮周</a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="fd15" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">像任何其他编程语言一样，JavaScript有自己的最佳实践列表，使程序更容易阅读和维护。JavaScript有许多棘手的部分，有许多事情需要避免。我们可以遵循一些最佳实践来使我们的JavaScript代码易于阅读。</p><p id="2aa0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本文中，我们研究比较对象和函数参数的最佳方式，添加一个缺省值来切换语句和函数参数，并避免使用<code class="fe le lf lg lh b">eval</code>函数。</p><h1 id="0ccd" class="li lj it bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">使用===比较对象</h1><p id="f656" class="pw-post-body-paragraph kg kh it ki b kj mg kl km kn mh kp kq kr mi kt ku kv mj kx ky kz mk lb lc ld im bi translated">在JavaScript中，有两个运算符用于相等比较。一个是<code class="fe le lf lg lh b">==</code>操作员，另一个是<code class="fe le lf lg lh b">===</code>操作员。<code class="fe le lf lg lh b">==</code>通过自动将操作数转换为相同类型来进行比较。</p><p id="2c48" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe le lf lg lh b">===</code>通过比较两个操作数的内容和类型进行比较。</p><p id="6adf" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们想使用<code class="fe le lf lg lh b">===</code>，因为它比较类型和内容，这样我们就不会在类型上有任何不匹配。</p><p id="0f86" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，如果我们使用<code class="fe le lf lg lh b">==</code>运算符，我们可以将下面的表达式求值为<code class="fe le lf lg lh b">true</code>:</p><pre class="ml mm mn mo gt mp lh mq mr aw ms bi"><span id="d78c" class="mt lj it lh b gy mu mv l mw mx">0 == "";<br/>0 == null;<br/>0 == undefined;<br/>null == undefined;<br/>1 == "1";</span></pre><p id="55d3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在前4行中，一切都是假的，所以在用<code class="fe le lf lg lh b">==</code>运算符比较相等性之前，它们都被转换为<code class="fe le lf lg lh b">false</code>。</p><p id="f043" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在最后一行中，<code class="fe le lf lg lh b">'1'</code>在比较之前被转换为<code class="fe le lf lg lh b">1</code>，这样我们就可以得到返回值<code class="fe le lf lg lh b">true</code>。</p><p id="9790" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了避免这些混乱的结果，我们可以使用<code class="fe le lf lg lh b">===</code>操作符，它比较值的类型和内容。有了<code class="fe le lf lg lh b">===</code>，上面的一切都会被评估为<code class="fe le lf lg lh b">false</code>。</p><p id="c1aa" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果要用<code class="fe le lf lg lh b">===</code>运算符比较内容相同类型不同的事物，可以先转换成相同的类型。</p><p id="d4cb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，如果我们想要比较<code class="fe le lf lg lh b">1</code>和<code class="fe le lf lg lh b">'1'</code>，我们可以写:</p><pre class="ml mm mn mo gt mp lh mq mr aw ms bi"><span id="1815" class="mt lj it lh b gy mu mv l mw mx">+1 === +'1'</span></pre><p id="6719" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后它们都将被转换为<code class="fe le lf lg lh b">1</code>，表达式将计算为<code class="fe le lf lg lh b">true</code>。</p><p id="d915" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">通过这种方式，我们不会比较任何意外类型。</p><h1 id="26e0" class="li lj it bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">默认参数</h1><p id="1e34" class="pw-post-body-paragraph kg kh it ki b kj mg kl km kn mh kp kq kr mi kt ku kv mj kx ky kz mk lb lc ld im bi translated">JavaScript函数可以接受任意数量的参数，即使它们有自己的签名。这意味着我们可以传入比预期更少的参数。</p><p id="6ffd" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">对于ES6，我们得到默认的参数值特性。这让我们可以设置函数参数的默认值。</p><p id="9121" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="ml mm mn mo gt mp lh mq mr aw ms bi"><span id="cffd" class="mt lj it lh b gy mu mv l mw mx">const add = (a, b = 0) =&gt; a + b;</span></pre><p id="0af3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后，我们不必为函数传递第二个参数来返回一个数值。如果我们写:</p><pre class="ml mm mn mo gt mp lh mq mr aw ms bi"><span id="accb" class="mt lj it lh b gy mu mv l mw mx">console.log(add(1));</span></pre><p id="720c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们得到1，因为如果没有传递任何东西，<code class="fe le lf lg lh b">b</code>的值将被设置为0，所以我们得到1 + 0，也就是1。</p><figure class="ml mm mn mo gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi my"><img src="../Images/047f653e95b9dac53abc3f2ef97effe8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7Tsd0E9oF3liGe26"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">照片由<a class="ae kf" href="https://unsplash.com/@krispaparo?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">克里斯蒂娜·帕帕罗</a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><h1 id="899e" class="li lj it bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">为Switch语句添加默认值</h1><p id="5ca5" class="pw-post-body-paragraph kg kh it ki b kj mg kl km kn mh kp kq kr mi kt ku kv mj kx ky kz mk lb lc ld im bi translated">我们应该总是在<code class="fe le lf lg lh b">switch</code>语句中添加一个<code class="fe le lf lg lh b">default</code>块，因为我们可能会将意想不到的值传递给<code class="fe le lf lg lh b">switch</code>语句。</p><p id="640a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们应该写:</p><pre class="ml mm mn mo gt mp lh mq mr aw ms bi"><span id="07b6" class="mt lj it lh b gy mu mv l mw mx">const getDayName = (dayOfWeek) =&gt; {<br/>  let day;<br/>  switch (dayOfWeek) {<br/>    case 0:<br/>      day = "Sunday";<br/>      break;<br/>    case 1:<br/>      day = "Monday";<br/>      break;<br/>    case 2:<br/>      day = "Tuesday";<br/>      break;<br/>    case 3:<br/>      day = "Wednesday";<br/>      break;<br/>    case 4:<br/>      day = "Thursday";<br/>      break;<br/>    case 5:<br/>      day = "Friday";<br/>      break;<br/>    case 6:<br/>      day = "Saturday";<br/>      break;<br/>    default:<br/>      day = "Unknown";<br/>  }<br/>  return day;<br/>}</span></pre><p id="0896" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">获取星期几，因为我们可以向<code class="fe le lf lg lh b">getDayName</code>函数传递任何东西。例如，我们可以写:</p><pre class="ml mm mn mo gt mp lh mq mr aw ms bi"><span id="a5f4" class="mt lj it lh b gy mu mv l mw mx">console.log(getDayName(0));<br/>console.log(getDayName(1));<br/>console.log(getDayName(1000));</span></pre><p id="285e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果我们传入1000，我们需要处理它，所以我们需要一个默认值。</p><h1 id="c15a" class="li lj it bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">不要使用Eval</h1><p id="d971" class="pw-post-body-paragraph kg kh it ki b kj mg kl km kn mh kp kq kr mi kt ku kv mj kx ky kz mk lb lc ld im bi translated"><code class="fe le lf lg lh b">eval</code>函数接受包含JavaScript代码的字符串，该字符串将由该函数运行。</p><p id="fb52" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们不应该使用它，因为它让未知来源的代码运行，这是一个很大的安全风险。</p><p id="1832" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">此外，它也比普通代码慢，因为它是动态解释的。这是因为代码不能被JavaScript引擎优化。</p><p id="1f5b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现代解释器把代码转换成机器码，这是传入<code class="fe le lf lg lh b">eval</code>的代码做不到的。这意味着解释器必须在运行中进行变量查找，以设置正确的变量。</p><p id="ab03" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果正在运行传递给<code class="fe le lf lg lh b">eval</code>函数的代码，对变量的任何操作都将迫使浏览器重新评估代码。</p><h1 id="d555" class="li lj it bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">结论</h1><p id="207f" class="pw-post-body-paragraph kg kh it ki b kj mg kl km kn mh kp kq kr mi kt ku kv mj kx ky kz mk lb lc ld im bi translated">当我们比较对象是否相等时，我们应该使用<code class="fe le lf lg lh b">===</code>操作符，因为它比较对象的内容和类型。此外，我们应该为参数设置默认值，以防在调用函数时它们没有被传递到函数中。此外，我们应该在<code class="fe le lf lg lh b">switch</code>语句中添加一个<code class="fe le lf lg lh b">default</code>块来处理意外值。最后，不要使用<code class="fe le lf lg lh b">eval</code>函数，因为它是一个很大的安全性，允许人们向我们的程序注入恶意代码，并且用<code class="fe le lf lg lh b">eval</code>运行代码很慢。</p></div></div>    
</body>
</html>