<html>
<head>
<title>The Downside of Monorepos</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Monorepos的缺点</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/the-downside-of-monorepos-c30ecfa86ba9?source=collection_archive---------2-----------------------#2022-07-01">https://levelup.gitconnected.com/the-downside-of-monorepos-c30ecfa86ba9?source=collection_archive---------2-----------------------#2022-07-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="6992" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在我的<a class="ae kl" rel="noopener ugc nofollow" target="_blank" href="/using-a-monorepo-to-increase-sharing-8dc68e3d838a">上一篇文章</a>中，我讨论了迁移到monorepo如何使得在不同部分之间共享代码变得更加容易。在本文中，我将讨论使用monorepo效果不佳的地方。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/625f81bbd84424b3fee4297b47d4f6df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ky1ITa7R-kn7jHZ79jaZoQ.png"/></div></div></figure><h2 id="3580" class="ky kz iq bd la lb lc dn ld le lf dp lg jy lh li lj kc lk ll lm kg ln lo lp lq bi translated">TLDR</h2><p id="832c" class="pw-post-body-paragraph jn jo iq jp b jq lr js jt ju ls jw jx jy lt ka kb kc lu ke kf kg lv ki kj kk ij bi translated">在以下情况下，单一回购可能不合适:</p><ol class=""><li id="9d02" class="lw lx iq jp b jq jr ju jv jy ly kc lz kg ma kk mb mc md me bi translated">这是一个开源项目。</li><li id="6ada" class="lw lx iq jp b jq mf ju mg jy mh kc mi kg mj kk mb mc md me bi translated">使用合并触发的部署。</li><li id="c3d9" class="lw lx iq jp b jq mf ju mg jy mh kc mi kg mj kk mb mc md me bi translated">同时处理多个零件中的不同特征。</li><li id="1579" class="lw lx iq jp b jq mf ju mg jy mh kc mi kg mj kk mb mc md me bi translated">用户访问需求不同。</li><li id="0388" class="lw lx iq jp b jq mf ju mg jy mh kc mi kg mj kk mb mc md me bi translated">许多最终用户只需要一小部分代码。</li></ol><p id="636f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们搬走了不合适的东西，剩下的留在核心回购中。</p><h2 id="d1d6" class="ky kz iq bd la lb lc dn ld le lf dp lg jy lh li lj kc lk ll lm kg ln lo lp lq bi translated">开源项目</h2><p id="1241" class="pw-post-body-paragraph jn jo iq jp b jq lr js jt ju ls jw jx jy lt ka kb kc lu ke kf kg lv ki kj kk ij bi translated">强迫开发人员下载不必要的代码似乎很麻烦。它使用额外的带宽和本地存储，这对人们很重要。</p><h2 id="f732" class="ky kz iq bd la lb lc dn ld le lf dp lg jy lh li lj kc lk ll lm kg ln lo lp lq bi translated">合并触发的部署</h2><p id="cd30" class="pw-post-body-paragraph jn jo iq jp b jq lr js jt ju ls jw jx jy lt ka kb kc lu ke kf kg lv ki kj kk ij bi translated">许多服务支持的一个常见范例是基于分支的部署，将代码合并到一个分支中，就像<strong class="jp ir">生产</strong>触发部署一样。<a class="ae kl" href="https://www.netlify.com/" rel="noopener ugc nofollow" target="_blank"> Netlify </a>和其他人使用这个范例使部署静态站点变得非常容易。</p><p id="809f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当使用默认的部署过程时，问题就来了，monorepo中的每个项目在每次合并到产品中时都会被重新构建，即使没有任何更改。这浪费了宝贵的构建时间，并增加了错误破坏甚至没有改变的服务的机会。</p><h2 id="c1f1" class="ky kz iq bd la lb lc dn ld le lf dp lg jy lh li lj kc lk ll lm kg ln lo lp lq bi translated">同时处理多个零件中的特征</h2><p id="5627" class="pw-post-body-paragraph jn jo iq jp b jq lr js jt ju ls jw jx jy lt ka kb kc lu ke kf kg lv ki kj kk ij bi translated">我发现自己在没有准备好生产的部分做了改变，只是为了支持另一部分的当前开发。这些更改可能会丢失，或者更糟，被提交。选择何时提交对每个部分的更改更有效率。</p><h2 id="d97e" class="ky kz iq bd la lb lc dn ld le lf dp lg jy lh li lj kc lk ll lm kg ln lo lp lq bi translated">不同的用户访问权限</h2><p id="f161" class="pw-post-body-paragraph jn jo iq jp b jq lr js jt ju ls jw jx jy lt ka kb kc lu ke kf kg lv ki kj kk ij bi translated">许多git进程不支持子目录上的细粒度权限。多个回购使定义每个人应该能够访问什么代码变得更加容易。</p><h2 id="bed5" class="ky kz iq bd la lb lc dn ld le lf dp lg jy lh li lj kc lk ll lm kg ln lo lp lq bi translated">最终用户只需要一小部分代码</h2><p id="d3e5" class="pw-post-body-paragraph jn jo iq jp b jq lr js jt ju ls jw jx jy lt ka kb kc lu ke kf kg lv ki kj kk ij bi translated">大多数TachyonCMS的用户不需要访问编辑器代码，只需要用他们的浏览器访问TachyonCMS.org。许多人想要发布他们使用<a class="ae kl" href="https://github.com/TachyonCMS/tachyoncms/tree/main/flow-sites" rel="noopener ugc nofollow" target="_blank">流站点服务器</a>创建的内容，以提供半静态内容。这只是代码中很小的一部分。</p></div></div>    
</body>
</html>