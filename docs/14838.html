<html>
<head>
<title>Create React Components Like a Senior Developer</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">像高级开发人员一样创建React组件</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/create-react-components-like-a-senior-developer-7de7d12a663a?source=collection_archive---------0-----------------------#2022-12-28">https://levelup.gitconnected.com/create-react-components-like-a-senior-developer-7de7d12a663a?source=collection_archive---------0-----------------------#2022-12-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/957121b6b24f71ccdb4e0731e87f1fb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YnA-Klhut_i7YoZb7lfn_g.png"/></div></div></figure><p id="5340" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在React中创建可重用的组件可以大大提高代码库的效率和可维护性。通过构建可以在整个应用程序中轻松重用的组件，您可以避免重复，并确保在一个位置对组件所做的更改会反映到使用它的所有位置。</p><p id="4a90" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">下面是一些在React中创建可用组件的技巧。</p><h1 id="76d6" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">保持简单</h1><p id="588b" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">一个组件应该只负责一个特定的任务或功能。避免创建试图做太多事情的复杂组件。</p><p id="9452" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">例如，如果您有一个处理登录的组件，那么让该组件同时处理给定产品的商店位置就没有意义了。</p><h1 id="2190" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">使用道具和上下文</h1><p id="0365" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">通过props向组件传递数据，可以使组件更加灵活和可重用。这允许您在不同的上下文中使用相同的组件和不同的数据。</p><ol class=""><li id="2a1f" class="mc md it kd b ke kf ki kj km me kq mf ku mg ky mh mi mj mk bi translated">下面是一个显示项目列表的可重用React组件的示例:</li></ol><pre class="ml mm mn mo gt mp mq mr bn ms mt bi"><span id="afb6" class="mu la it mq b be mv mw l mx my">import React from 'react';<br/><br/>const List = (props) =&gt; {<br/>  return (<br/>    &lt;ul&gt;<br/>      {props.items.map((item) =&gt; (<br/>        &lt;li key={item.id}&gt;{item.name}&lt;/li&gt;<br/>      ))}<br/>    &lt;/ul&gt;<br/>  );<br/>};<br/><br/>export default List;</span></pre><p id="6767" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">该组件接受一个名为<code class="fe mz na nb mq b">items</code>的道具，它是一个具有<code class="fe mz na nb mq b">id</code>和<code class="fe mz na nb mq b">name</code>属性的对象数组。然后它遍历<code class="fe mz na nb mq b">items</code>数组，并使用<code class="fe mz na nb mq b">name</code>属性显示列表中的每一项。</p><p id="b2ba" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">要使用这个组件，您可以将它导入到您的组件中，并像这样传入<code class="fe mz na nb mq b">items</code> prop:</p><pre class="ml mm mn mo gt mp mq mr bn ms mt bi"><span id="3dcb" class="mu la it mq b be mv mw l mx my">const MyComponent = () =&gt; {<br/><br/>  const items = [<br/>    { id: 1, name: 'Item 1' },<br/>    { id: 2, name: 'Item 2' },<br/>    { id: 3, name: 'Item 3' },<br/>  ];<br/><br/>  return (<br/>      &lt;div&gt;<br/>        &lt;List items={items} /&gt;<br/>      &lt;/div&gt;<br/>    );<br/>  };<br/>}<br/><br/>export default MyComponent;</span></pre><p id="5735" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">然后，这个组件可以在整个应用程序的多个地方使用，通过简单地传入不同的<code class="fe mz na nb mq b">item</code>道具就可以显示不同的列表。</p><h1 id="757b" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">使用Typescript定义属性</h1><p id="dae1" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">React中函数组件中的默认属性已被弃用，建议从现在开始在定义属性类型时使用TypeScript。</p><p id="3159" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><a class="ae nc" href="https://medium.com/@christopherclemmons/code-like-a-pro-define-types-in-react-components-using-typescript-de3ae7be6223" rel="noopener">了解更多关于使用TypeScript定义prop类型的信息，并通过阅读本文做出反应。</a></p><p id="b1cf" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">TypeScript是一种流行的编程语言，它为JavaScript添加了可选的静态类型。它可以在React项目中使用，通过在错误到达浏览器之前捕捉错误来改善开发体验。在TypeScript中创建React组件时，可以使用接口定义属性和状态的类型。</p><p id="5d5e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">下面是一个使用TypeScript定义属性类型的例子。</p><pre class="ml mm mn mo gt mp mq mr bn ms mt bi"><span id="3141" class="mu la it mq b be mv mw l mx my">import React from 'react';<br/><br/>interface Props {<br/>  name: string;<br/>  age: number;<br/>  onClick: (event: React.MouseEvent&lt;HTMLButtonElement&gt;) =&gt; void;<br/>}<br/><br/>const MyComponent: React.FC&lt;Props&gt; = ({ name, age, onClick }) =&gt; {<br/>  return (<br/>    &lt;div&gt;<br/>      &lt;p&gt;Name: {name}&lt;/p&gt;<br/>      &lt;p&gt;Age: {age}&lt;/p&gt;<br/>      &lt;button onClick={onClick}&gt;Click me&lt;/button&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}<br/><br/>export default MyComponent;</span></pre><p id="e8f5" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在这个例子中，组件<code class="fe mz na nb mq b">MyComponent</code>接受三个道具:<code class="fe mz na nb mq b">name</code>、<code class="fe mz na nb mq b">age</code>和<code class="fe mz na nb mq b">onClick</code>。<code class="fe mz na nb mq b">Props</code>界面定义了每个道具的类型。<code class="fe mz na nb mq b">name</code>是字符串，<code class="fe mz na nb mq b">age</code>是数字，<code class="fe mz na nb mq b">onClick</code>是以<code class="fe mz na nb mq b">React.MouseEvent&lt;HTMLButtonElement&gt;</code>为参数并返回void的函数。该组件使用这些属性来呈现一些文本和一个按钮。</p><p id="cc6c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">当使用这个组件时，您必须以一种尊重接口中定义的类型的方式来传递props。</p><pre class="ml mm mn mo gt mp mq mr bn ms mt bi"><span id="7bc5" class="mu la it mq b be mv mw l mx my">&lt;MyComponent<br/>  name='John Doe'<br/>  age={20}<br/>  onClick={(event) =&gt; {console.log('clicked')}}<br/>/&gt;</span></pre><p id="42b0" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">该组件也可以用状态来编写，在这种情况下，状态的类型将在另一个接口中定义，并作为第二个类型参数传递给<code class="fe mz na nb mq b">React.FC</code>组件，如下所示:</p><pre class="ml mm mn mo gt mp mq mr bn ms mt bi"><span id="6622" class="mu la it mq b be mv mw l mx my">interface State {<br/>  count: number;<br/>}<br/><br/>const MyComponent: React.FC&lt;Props, State&gt; = ({ name, age, onClick }, state) =&gt; {<br/>  return (<br/>    &lt;div&gt;<br/>      &lt;p&gt;Name: {name}&lt;/p&gt;<br/>      &lt;p&gt;Age: {age}&lt;/p&gt;<br/>      &lt;p&gt;Count: {state.count}&lt;/p&gt;<br/>      &lt;button onClick={onClick}&gt;Click me&lt;/button&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="995b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">通过这种方式，您可以清楚地了解组件的属性和状态的类型，并在开发过程的早期发现任何错误。</p><h1 id="888b" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">测试您的组件</h1><p id="10dc" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">请务必彻底测试您的组件，以确保它按预期工作并且易于使用。我会推荐使用<a class="ae nc" href="https://jestjs.io/" rel="noopener ugc nofollow" target="_blank"> JEST </a>，这是一个优秀的React测试框架。用Jest测试React组件有几个好处，包括:</p><h2 id="574a" class="nd la it bd lb ne nf dn lf ng nh dp lj km ni nj ln kq nk nl lr ku nm nn lv no bi translated">提高代码质量</h2><p id="a8e0" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">通过为React组件编写和运行测试，您可以在开发过程的早期发现并修复错误，这有助于提高代码的整体质量。</p><h2 id="520f" class="nd la it bd lb ne nf dn lf ng nh dp lj km ni nj ln kq nk nl lr ku nm nn lv no bi translated">增强的可靠性</h2><p id="ac7f" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">通过编写覆盖不同场景和边缘案例的测试，您可以确保您的React组件是可靠的，并且在不同的条件下正常工作。</p><h2 id="8325" class="nd la it bd lb ne nf dn lf ng nh dp lj km ni nj ln kq nk nl lr ku nm nn lv no bi translated">简化调试</h2><p id="0424" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">如果测试失败，Jest会提供详细的错误消息，帮助您快速识别和修复问题。</p><h2 id="f4fc" class="nd la it bd lb ne nf dn lf ng nh dp lj km ni nj ln kq nk nl lr ku nm nn lv no bi translated">改善协作</h2><p id="498a" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">通过编写测试，您可以为如何使用React组件提供清晰的文档，这对从事同一项目的团队成员很有帮助。</p><h2 id="114f" class="nd la it bd lb ne nf dn lf ng nh dp lj km ni nj ln kq nk nl lr ku nm nn lv no bi translated">提高速度和效率</h2><p id="8713" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">Jest具有快照测试和并行测试执行等特性，这有助于加快测试过程，使其更加高效。</p><h1 id="045d" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">最后的想法</h1><p id="85af" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">总之，创建可重用的React组件需要对这些实践和业务需求有很好的理解。请记住，要始终考虑组件的可维护性和可伸缩性，因为它们可能会在多个项目中使用，并且可能会被团队中的其他开发人员使用。通过实践和对细节的关注，您可以创建高质量的React组件，这对任何项目来说都是宝贵的资产。</p></div></div>    
</body>
</html>