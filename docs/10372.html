<html>
<head>
<title>â€œMarkersâ€ in Go</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">å›´æ£‹ä¸­çš„â€œæ ‡è®°â€</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://levelup.gitconnected.com/markers-in-go-a69af5dc95e6?source=collection_archive---------9-----------------------#2021-11-29">https://levelup.gitconnected.com/markers-in-go-a69af5dc95e6?source=collection_archive---------9-----------------------#2021-11-29</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="460a" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">ç”Ÿæˆå¸¦æ³¨é‡Šçš„æ–‡ä»¶å’Œä»£ç </h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/6930e0cd23713cc89db0e1b555a2e6ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Z91ftVn3ZvxUPpNA"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">å‡ºè‡ªunsplashï¼Œ<a class="ae ky" href="https://unsplash.com/photos/NROHA1B-NYk" rel="noopener ugc nofollow" target="_blank">@ç±³åˆ‡å°”ç½—</a></figcaption></figure><p id="f149" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">é£Ÿæ¬²ä¼´éšç€è¿›é£Ÿè€Œæ¥ï¼Œå°¤å…¶æ˜¯å½“é¢å¯¹ä¸€æ¡Œå­è®©ä½ å‘³è•¾å‘ç—’çš„é£Ÿç‰©æ—¶ã€‚ä¸€æ—¦æ™šé¤å¼€å§‹ï¼Œä½ æ°¸è¿œä¸ä¼šæ»¡è¶³äºåªåƒä¸€å£ç¾å‘³ã€‚è¿™æ˜¯æˆ‘åœ¨ä½¿ç”¨Kubernetesæ“ä½œç¬¦å’Œé‡åˆ°é‚£äº›ä¸åŒçš„æ ‡è®°æ—¶çš„æ„Ÿè§‰ï¼Œå®ƒä»¬å¯ä»¥å¸®åŠ©é¿å…æ ·æ¿ä»£ç å’Œç®€åŒ–ä»£ç é€»è¾‘ã€‚æˆ‘çŸ¥é“æˆ‘èƒ½å­¦åˆ°æ›´å¤šã€‚</p><p id="5268" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">çœ‹ä¸€ä¸ªå¼€èƒƒé…’çš„ä¾‹å­ã€‚ä¸‹é¢æ˜¯æˆ‘åˆ›å»ºçš„æ“ä½œç¬¦ä¸­ç”¨äº<a class="ae ky" href="https://github.com/slaise/operator-test/blob/01abdc47d8bfc4fed578b0b2c5ffd57912c97112/kubebuilder-test/controllers/useridentityv3_controller.go#L66" rel="noopener ugc nofollow" target="_blank">ç”ŸæˆRBAC </a>æ–‡ä»¶çš„æ ‡è®°ã€‚</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="5ce3" class="ma mb it lw b gy mc md l me mf"><em class="mg">//+kubebuilder:rbac:groups=identity.company.org,resources=useridentityv3s,verbs=get;list;watch;create;update;patch;delete</em></span><span id="8b26" class="ma mb it lw b gy mh md l me mf"><em class="mg">//+kubebuilder:rbac:groups=identity.company.org,resources=useridentityv3s/status,verbs=get;update;patch</em></span></pre><p id="b3bf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">è¿è¡Œ<code class="fe mi mj mk lw b"><a class="ae ky" href="https://github.com/slaise/operator-test/blob/01abdc47d8bfc4fed578b0b2c5ffd57912c97112/kubebuilder-test/Makefile#L42" rel="noopener ugc nofollow" target="_blank">manifests</a></code>å‘½ä»¤åï¼Œä¼šåœ¨<code class="fe mi mj mk lw b">config/rbac</code>ç›®å½•ä¸‹ç”Ÿæˆç›¸åº”çš„èµ„æºYAMLæ–‡ä»¶ï¼Œå¹¶æ‰“åŒ…æˆç›¸åº”çš„æ“ä½œå‘˜æ˜ åƒï¼Œç„¶ååœ¨éƒ¨ç½²CRDæ—¶åº”ç”¨åˆ°é›†ç¾¤ä¸­ã€‚</p><p id="cd51" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">ä¹ä¸€çœ‹éå¸¸ç±»ä¼¼äºä¸€äº›Javaæ³¨é‡Šç‰¹æ€§ï¼Œå¯¹å—ï¼Ÿå¹¶ä¸”å¯ä»¥ç±»ä¼¼åœ°æ³¨å…¥æˆ–ç”Ÿæˆé™„åŠ ä»£ç ã€‚ä½œä¸ºä¸€åå¤šå¹´çš„Javaå¼€å‘äººå‘˜ï¼Œæˆ‘ä¸ç¦è¦è¿›è¡Œæ¯”è¾ƒğŸ¤·ğŸ»â€â™€ï¸.</p><p id="9a8d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">å‡†å¤‡å¥½åƒä¸»èœäº†å—ï¼Ÿå…³æ³¨æˆ‘ï¼Œäº†è§£è¿™ä¸ªç‰¹æ€§åœ¨Kubebuilderä¸­æ˜¯å¦‚ä½•æ­å»ºçš„ï¼Œåœ¨Goä¸­åˆæ˜¯å¦‚ä½•åº”ç”¨çš„ã€‚è¯´å®è¯ï¼Œå®ƒåœ¨Goä¸­è¿˜æ²¡æœ‰åå­—ï¼Œæ‰€ä»¥æˆ‘ç§°å®ƒä¸ºâ€œMarkerâ€ï¼Œå’ŒKubebuilderæ–‡æ¡£ä¸­çš„ä¸€æ ·ã€‚</p><h1 id="32dd" class="ml mb it bd mm mn mo mp mq mr ms mt mu jz mv ka mw kc mx kd my kf mz kg na nb bi translated">è®°å·ç¬”å¦‚ä½•å·¥ä½œ</h1><h2 id="53d3" class="ma mb it bd mm nc nd dn mq ne nf dp mu li ng nh mw lm ni nj my lq nk nl na nm bi translated">æ§åˆ¶å™¨-genæŠ•å…¥ä½¿ç”¨</h2><p id="c326" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">Kubebuilderé€šè¿‡å°†çœŸæ­£çš„å®ç°è€…<code class="fe mi mj mk lw b">controller-gen</code>åŒ…è£…åˆ°Makefileä¸­æ¥å®ç°æ ‡è®°ã€‚</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="1ea2" class="ma mb it lw b gy mc md l me mf">$(CONTROLLER_GEN) $(CRD_OPTIONS) rbac:roleName=manager-role webhook paths="./..." output:crd:artifacts:config=config/crd/bases</span></pre><p id="f2cf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">å·¨å¤§çš„Kubernetes <a class="ae ky" href="https://github.com/kubernetes-sigs/controller-tools" rel="noopener ugc nofollow" target="_blank">æ§åˆ¶å™¨å·¥å…·</a>çš„ä¸‰ä¸ªå‘½ä»¤è¡Œå·¥å…·ä¹‹ä¸€<code class="fe mi mj mk lw b"><a class="ae ky" href="https://github.com/kubernetes-sigs/controller-tools/tree/master/cmd/controller-gen" rel="noopener ugc nofollow" target="_blank">controller-gen</a></code>ï¼Œåªæœ‰ä¸€ä¸ªåŠŸèƒ½:<strong class="lb iu">é€šè¿‡å®šä¹‰</strong>ç”Ÿæˆç›¸åº”çš„æ–‡ä»¶æˆ–ä»£ç ã€‚ä¸ºäº†å¿«é€Ÿç†è§£å®ƒï¼Œé˜…è¯»æºä»£ç ä¼¼ä¹æ˜¯å”¯ä¸€çš„æ–¹æ³•ï¼Œå› ä¸ºæ–‡æ¡£å¾ˆå·®ã€‚</p><p id="e011" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe mi mj mk lw b">controller-gen</code>æ”¯æŒ5å°å‘ç”µæœºã€‚</p><ul class=""><li id="971e" class="ns nt it lb b lc ld lf lg li nu lm nv lq nw lu nx ny nz oa bi translated"><a class="ae ky" href="https://github.com/kubernetes-sigs/controller-tools/blob/ab52f76cc7d167925b2d5942f24bf22e30f49a02/pkg/crd/gen.go#L43" rel="noopener ugc nofollow" target="_blank"> CRD </a>ï¼Œç”ŸæˆCRD YAMLæ ¼å¼çš„èµ„æºæ–‡ä»¶</li><li id="d176" class="ns nt it lb b lc ob lf oc li od lm oe lq of lu nx ny nz oa bi translated"><a class="ae ky" href="https://github.com/kubernetes-sigs/controller-tools/blob/ab52f76cc7d167925b2d5942f24bf22e30f49a02/pkg/rbac/parser.go#L149" rel="noopener ugc nofollow" target="_blank"> RBAC </a>ï¼Œç”Ÿæˆ<code class="fe mi mj mk lw b">ClusterRole</code>å’Œ<code class="fe mi mj mk lw b">ClusterRoleBinding</code> YAMLæ–‡ä»¶</li><li id="b93c" class="ns nt it lb b lc ob lf oc li od lm oe lq of lu nx ny nz oa bi translated"><a class="ae ky" href="https://github.com/kubernetes-sigs/controller-tools/blob/ab52f76cc7d167925b2d5942f24bf22e30f49a02/pkg/deepcopy/gen.go#L54" rel="noopener ugc nofollow" target="_blank">å¯¹è±¡</a>ã€<strong class="lb iu">ã€</strong>ç”Ÿæˆç”±CRDå®šä¹‰çš„<code class="fe mi mj mk lw b">deepCopy</code>ä»£ç </li><li id="aafb" class="ns nt it lb b lc ob lf oc li od lm oe lq of lu nx ny nz oa bi translated"><a class="ae ky" href="https://github.com/kubernetes-sigs/controller-tools/blob/ab52f76cc7d167925b2d5942f24bf22e30f49a02/pkg/webhook/parser.go#L284" rel="noopener ugc nofollow" target="_blank"> Webhook </a>ï¼Œæ”¯æŒç”Ÿæˆå˜å¼‚å’ŒéªŒè¯çš„webhook YAML</li><li id="401a" class="ns nt it lb b lc ob lf oc li od lm oe lq of lu nx ny nz oa bi translated"><a class="ae ky" href="https://github.com/kubernetes-sigs/controller-tools/blob/ab52f76cc7d167925b2d5942f24bf22e30f49a02/pkg/schemapatcher/gen.go#L65" rel="noopener ugc nofollow" target="_blank">æ¨¡å¼</a>ï¼Œæ ¹æ®APIåŒ…ç”Ÿæˆæ”¯æŒOpenAPI v3çš„æ¨¡å¼</li></ul><p id="2fcf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">å›å¤´çœ‹çœ‹Kubebuilderï¼Œä½ ä¼šå‘ç°å®ƒä½¿ç”¨äº†æ‰€æœ‰ç”Ÿæˆå™¨ï¼Œå¹¶å°†æ‰§è¡Œå‘½ä»¤å°è£…åœ¨Makefile <code class="fe mi mj mk lw b">generate</code>å‘½ä»¤ä¸­ã€‚</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="5676" class="ma mb it lw b gy mc md l me mf">$(CONTROLLER_GEN) object:headerFile="hack/boilerplate.go.txt" paths="./..."</span></pre><p id="431b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">åŒæ—¶ï¼Œ<code class="fe mi mj mk lw b">controller-gen</code>è¿˜æ”¯æŒ4ç§<a class="ae ky" href="https://github.com/kubernetes-sigs/controller-tools/blob/ab52f76cc7d167925b2d5942f24bf22e30f49a02/cmd/controller-gen/main.go#L63" rel="noopener ugc nofollow" target="_blank">è¾“å‡ºæ–¹å¼</a>ã€‚</p><ul class=""><li id="de0e" class="ns nt it lb b lc ld lf lg li nu lm nv lq nw lu nx ny nz oa bi translated"><strong class="lb iu"> dir </strong>ï¼Œè¾“å‡ºåˆ°ä¸€ä¸ªç›®å½•</li><li id="a2ff" class="ns nt it lb b lc ob lf oc li od lm oe lq of lu nx ny nz oa bi translated"><strong class="lb iu">æ— </strong>ï¼Œæ— è¾“å‡º</li><li id="ecaa" class="ns nt it lb b lc ob lf oc li od lm oe lq of lu nx ny nz oa bi translated"><strong class="lb iu"> stdout </strong>ï¼Œè¾“å‡ºè‡³æ ‡å‡†è¾“å‡º</li><li id="81a3" class="ns nt it lb b lc ob lf oc li od lm oe lq of lu nx ny nz oa bi translated"><strong class="lb iu">å·¥ä»¶</strong>ï¼Œè¾“å‡ºåˆ°å…¶ä»–ç›®å½•æˆ–æ–‡ä»¶</li></ul><p id="222d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">è¿™ä¹Ÿæ˜¯<code class="fe mi mj mk lw b">manifests</code>å‘½ä»¤ä¸­<code class="fe mi mj mk lw b">output</code>é€‰é¡¹çš„åŠŸèƒ½ã€‚è€Œä¸”é™¤æ­¤ä¹‹å¤–ï¼Œåœ¨ä½¿ç”¨Kubebuilderçš„æ—¶å€™ï¼Œåº”è¯¥å·²ç»å®‰è£…äº†<code class="fe mi mj mk lw b">controller-gen</code>ï¼Œæ‰€ä»¥ä½ å¯ä»¥åœ¨å‘½ä»¤è¡ŒæŸ¥çœ‹<code class="fe mi mj mk lw b">help</code>çš„ä¿¡æ¯ã€‚</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi og"><img src="../Images/456b242e03b5af7a8270c079709e7bf2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qdlqAfiYUxNz3QCp"/></div></div></figure><h2 id="fa54" class="ma mb it bd mm nc nd dn mq ne nf dp mu li ng nh mw lm ni nj my lq nk nl na nm bi translated">è§£ææ ‡è®°</h2><p id="a1ce" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">ç„¶åè·³å‡ºäº†è¿™æ ·ä¸€ä¸ªé—®é¢˜:å¦‚ä½•å°†æ³¨é‡Šè¡Œè§£ææˆä¸€ä¸ªæ ‡è®°å¯¹è±¡ï¼Ÿ</p><p id="2fc7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">ç›¸åº”çš„é€»è¾‘åœ¨<a class="ae ky" href="https://github.com/kubernetes-sigs/controller-tools/tree/ab52f76cc7d167925b2d5942f24bf22e30f49a02/pkg/markers" rel="noopener ugc nofollow" target="_blank">æ§åˆ¶å™¨-å·¥å…·/pkg/æ ‡è®°å™¨</a>åŒ…ä¸­ã€‚é€šè¯»å®Œ<code class="fe mi mj mk lw b">Marker</code>ä»£ç åï¼Œç®€å•åœ°è§£é‡Šä¸€ä¸‹:å°†ä¸€è¡Œæ³¨é‡Šè§£ææˆä¸€ä¸ª<code class="fe mi mj mk lw b"><a class="ae ky" href="https://github.com/kubernetes-sigs/controller-tools/blob/ab52f76cc7d167925b2d5942f24bf22e30f49a02/pkg/markers/parse.go#L652" rel="noopener ugc nofollow" target="_blank">Definition</a></code>å¯¹è±¡ï¼Œè¯¥å¯¹è±¡åŒ…å«ç±»ä¼¼<code class="fe mi mj mk lw b">Name</code>ã€<code class="fe mi mj mk lw b">Target</code>ã€<code class="fe mi mj mk lw b">Fields</code>ã€<code class="fe mi mj mk lw b">FieldsNames</code>ç­‰å­—æ®µã€‚</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="3733" class="ma mb it lw b gy mc md l me mf"><em class="mg">// Definition is a parsed definition of a marker.<br/></em>type Definition struct {Solly Ross, 3 years ago: â€¢ Marker parsing<br/>   <em class="mg">// Output is the deserialized Go type of the marker.<br/>   </em>Output reflect.Type<br/>   <em class="mg">// Name is the marker's name.<br/>   </em>Name string<br/>   <em class="mg">// Target indicates which kind of node this marker can be associated with.<br/>   </em>Target TargetType<br/>   <em class="mg">// Fields lists out the types of each field that this marker has, by<br/>   // argument name as used in the marker (if the output type isn't a struct,<br/>   // it'll have a single, blank field name).  This only lists exported fields,<br/>   // (as per reflection rules).<br/>   </em>Fields map[string]Argument<br/>   <em class="mg">// FieldNames maps argument names (as used in the marker) to struct field name<br/>   // in the output type.<br/>   </em>FieldNames map[string]string<br/>   <em class="mg">// Strict indicates that this definition should error out when parsing if<br/>   // not all non-optional fields were seen.<br/>   </em>Strict bool<br/>}</span></pre><p id="f7d6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">æœ‰è¶£çš„æ˜¯ï¼Œ<code class="fe mi mj mk lw b">Definition</code>å¯¹è±¡çš„ç±»åˆ«(<code class="fe mi mj mk lw b">package</code>ã€<code class="fe mi mj mk lw b">type</code>å’Œ<code class="fe mi mj mk lw b">field</code>)è®©ä½ æƒ³èµ·äº†ä»€ä¹ˆï¼Ÿæœ‰ï¼ŒJavaæ³¨é‡Šé‡Œçš„<code class="fe mi mj mk lw b">class</code>ã€<code class="fe mi mj mk lw b">field</code>å’Œ<code class="fe mi mj mk lw b">method</code>ã€‚ğŸ™ˆ</p><h1 id="6d44" class="ml mb it bd mm mn mo mp mq mr ms mt mu jz mv ka mw kc mx kd my kf mz kg na nb bi translated">å›´æ£‹ä¸­çš„æ ‡è®°</h1><p id="b92d" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">å½“æˆ‘åœ¨ç ”ç©¶Kubebuilderæ ‡è®°èƒŒåçš„é€»è¾‘æ—¶ï¼Œæˆ‘çš„è„‘æµ·ä¸­å‡ºç°äº†ä¸€ä¸ªæƒ³æ³•:çœ‹çœ‹è¿™ç§ä¾¿åˆ©æ€§ï¼Œéš¾é“ä¸åº”è¯¥æœ‰å¯¹è¿™ä¸€ç‰¹æ€§çš„æœ¬æœºæ”¯æŒå—ï¼Ÿ</p><p id="ed48" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">ä»”ç»†æƒ³æƒ³ï¼Œæˆ‘å‘ç°è‡ªå·±å¯¹è¿™äº›ç±»ä¼¼çš„åŠŸèƒ½å¹¶ä¸é™Œç”Ÿï¼Œæ¯”å¦‚æˆ‘åœ¨<code class="fe mi mj mk lw b">go-lint</code>ä¸­å…³é—­ä¸€ä¸ªè­¦æŠ¥æ—¶é‡‡ç”¨äº†<code class="fe mi mj mk lw b">var bad_name int // nolint</code>ï¼Œæˆ–è€…åœ¨å±è”½æŸä¸ªé”™è¯¯æ—¶é‡‡ç”¨äº†<code class="fe mi mj mk lw b">var bad_name int // nolint:golint,unused</code>ã€‚</p><p id="9510" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">æ­¤å¤–ï¼ŒGoè¿˜æ”¯æŒä¸¤ç§ç±»å‹çš„æ ‡è®°ã€‚</p><ul class=""><li id="e661" class="ns nt it lb b lc ld lf lg li nu lm nv lq nw lu nx ny nz oa bi translated"><code class="fe mi mj mk lw b">go:build</code></li><li id="6036" class="ns nt it lb b lc ob lf oc li od lm oe lq of lu nx ny nz oa bi translated"><code class="fe mi mj mk lw b">go:generate</code></li></ul><h2 id="da76" class="ma mb it bd mm nc nd dn mq ne nf dp mu li ng nh mw lm ni nj my lq nk nl na nm bi translated">å¼€å§‹:æ„å»º</h2><p id="7704" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">æ„å»ºæ ‡è®°é™åˆ¶äº†ä»£ç çš„æ„å»ºOS/å¹³å°ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œ</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="f071" class="ma mb it lw b gy mc md l me mf">// +build linux darwin<br/>package main</span></pre><p id="e8a8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">åŒä¸€ä¸ªæ–‡ä»¶ä¸­å¯ä»¥æœ‰å¤šä¸ªæ ‡ç­¾ã€‚ä½†æ˜¯ï¼Œä¸è¦é”™è¿‡æ„å»ºæ ‡è®°å’ŒåŒ…å®šä¹‰ä¹‹é—´çš„ç©ºè¡Œã€‚å½“ç„¶ï¼Œä½ å¯ä»¥ç”¨<code class="fe mi mj mk lw b">go vet</code>æ¥é¿å…ã€‚</p><h2 id="5c5a" class="ma mb it bd mm nc nd dn mq ne nf dp mu li ng nh mw lm ni nj my lq nk nl na nm bi translated">å¼€å§‹:ç”Ÿæˆ</h2><p id="3933" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated"><code class="fe mi mj mk lw b">go:generate</code>æ ‡è®°ä¸<code class="fe mi mj mk lw b">go generate</code>å‘½ä»¤æ†ç»‘ï¼Œé€šè¿‡<code class="fe mi mj mk lw b">help</code>å‘½ä»¤æŸ¥çœ‹å®˜æ–¹è§£é‡Šã€‚</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi og"><img src="../Images/0e302ee116958bcaaef6d7eb67208fd9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5G3p_UY2PDQj6tlK"/></div></div></figure><p id="693a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe mi mj mk lw b">go generate</code>ä½¿æ‚¨èƒ½å¤Ÿåœ¨Goä»£ç ä¸­è¿è¡Œå½“å‰ç³»ç»Ÿçš„å·²å®‰è£…ç¨‹åºï¼Œå°½ç®¡å®ƒæœ€åˆæ˜¯ç”¨äºåˆ›å»ºæˆ–æ›´æ–°Goæºæ–‡ä»¶ã€‚è¿è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œå½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰<code class="fe mi mj mk lw b">go:generate</code>æ ‡è®°éƒ½å°†è¢«æ‰§è¡Œã€‚</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="ce18" class="ma mb it lw b gy mc md l me mf">go generate ./...</span></pre><p id="7958" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">å¹¶ä¸”<code class="fe mi mj mk lw b">go generate</code>æä¾›äº†æ›´å¤šï¼Œä¸€ä¸ªå…¸å‹çš„ä¾‹å­æ˜¯ä½¿ç”¨<a class="ae ky" href="https://github.com/golang/tools/blob/master/cmd/stringer/stringer.go" rel="noopener ugc nofollow" target="_blank"> stringer </a>ç”Ÿæˆé”™è¯¯ä¿¡æ¯ã€‚</p><p id="5e75" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">é€šå¸¸æˆ‘ä»¬ç”¨ä¸€ä¸ªåŒ…å«<em class="mg"> int </em> ( <code class="fe mi mj mk lw b">code</code>)å’Œ<em class="mg"> string </em> ( <code class="fe mi mj mk lw b">description</code>)çš„å¯¹è±¡æ¥æ˜ å°„è®¾è®¡webç¨‹åºè¿”å›æ—¶å¯¹åº”çš„é”™è¯¯ã€‚åœ¨Javaä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šæŒ‘<code class="fe mi mj mk lw b">Enum</code>ï¼Œè¿™ä¸ªæ¯”åˆé€‚çš„å¤šã€‚ä½†æ˜¯åœ¨Goä¸­ï¼Œæˆ‘ä»¬åªèƒ½é€šè¿‡<code class="fe mi mj mk lw b">itoa</code>ç”Ÿæˆ<code class="fe mi mj mk lw b">ErrorCode</code>ï¼Œè€Œä¸èƒ½åŒæ­¥ä¿å­˜æè¿°ã€‚</p><p id="1137" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">ç¤ºä¾‹ä¸­çš„<code class="fe mi mj mk lw b">errorcode.go</code>åŒ…å«ä¸€ä¸ª<code class="fe mi mj mk lw b">//go:generate </code>æ ‡è®°å’Œ3ä¸ª<code class="fe mi mj mk lw b">ErrorCodes</code>ï¼Œæ¯ä¸ªæ ‡è®°å®šä¹‰äº†ä¸‹é¢æ³¨é‡Šä¸­å¯¹åº”çš„<code class="fe mi mj mk lw b">Error Message</code>ã€‚</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oh oi l"/></div></figure><p id="828c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">æ¥ä¸‹æ¥ï¼Œåœ¨å‘½ä»¤è¡Œä¸Šæ‰§è¡Œ<code class="fe mi mj mk lw b">go generate</code>ï¼Œç”Ÿæˆä¸‹é¢çš„<code class="fe mi mj mk lw b">errorcode_string.go</code>ã€‚</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oh oi l"/></div></figure><p id="a59c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">ç„¶åç”¨<code class="fe mi mj mk lw b">fmt.Println(NOT_FOUND)</code>è¿”å›ç›¸åº”çš„é”™è¯¯ä¿¡æ¯ã€‚</p><h1 id="806b" class="ml mb it bd mm mn mo mp mq mr ms mt mu jz mv ka mw kc mx kd my kf mz kg na nb bi translated">å›´æ£‹ä¸æ˜¯è®°å·ç¬”çš„çˆ±å¥½è€…</h1><p id="39c4" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated"><code class="fe mi mj mk lw b">go:generate</code>åœ¨Goæºä»£ç ä¸­å‡ºç°çš„å¤šï¼Œé™¤æ­¤ä¹‹å¤–åˆ«æ— å…¶ä»–ã€‚Goæ—¢æ²¡æœ‰åœ¨æ ‡è®°ä¸ŠæŠ•å…¥æ›´å¤šï¼Œä¹Ÿæ²¡æœ‰åœ¨æ›´ä¾¿äºå®šåˆ¶çš„æ–¹æ³•ä¸ŠæŠ•å…¥æ›´å¤šã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬ä»ç„¶ä¾é <code class="fe mi mj mk lw b">Kubernetes/controller-tool</code>ä¸­é‚£äº›å¤æ‚çš„è§£æå™¨æ¥å®ç°æ”¯æ¶åŠŸèƒ½ã€‚</p><p id="eb39" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">å³ä½¿Githubé—®é¢˜ä¸­æœ‰ç›¸å…³ææ¡ˆï¼Œå¦‚<a class="ae ky" href="https://github.com/golang/go/issues/36669" rel="noopener ugc nofollow" target="_blank"> #36669 </a>ã€<a class="ae ky" href="https://github.com/golang/go/issues/38672" rel="noopener ugc nofollow" target="_blank"> #38672 </a>ï¼Œä½†æ— è®ºå¦‚ä½•éƒ½è¢«å¦å†³äº†ã€‚</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/fa141f3a16f52aaee778cc39841274d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*1YR_yQnopqTj38ph"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ok"><img src="../Images/8c459b799ac95afb5860b53b10ee8cf4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*IJOEYhDr2yaJ6BGi"/></div></div></figure><p id="199e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">ä¸ºä»€ä¹ˆæ‹’ç»ï¼Ÿæˆ‘å¼•ç”¨@ <a class="ae ky" href="https://github.com/ianlancetaylor" rel="noopener ugc nofollow" target="_blank"> ianlancetaylor </a>æ¥å›ç­”ã€‚</p><blockquote class="ol om on"><p id="3d61" class="kz la mg lb b lc ld ju le lf lg jx lh oo lj lk ll op ln lo lp oq lr ls lt lu im bi translated">Goå–œæ¬¢æ˜¾å¼çš„ç¼–ç¨‹é£æ ¼ã€‚</p><p id="ed51" class="kz la mg lb b lc ld ju le lf lg jx lh oo lj lk ll op ln lo lp oq lr ls lt lu im bi translated">Goè®¤ä¸ºå¯è¯»æ€§æ–¹é¢çš„å¥½å¤„å€¼å¾—é¢å¤–çš„ä»£ç ã€‚</p></blockquote><p id="1672" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Goå®Œå…¨æœ‰ç†ç”±æ‹’ç»ä½†æ— æ³•é˜»æ­¢é‚£äº›æœ‰æƒ³æ³•çš„åœ°é¼ å»å®ç°è‡ªå·±ã€‚è€Œä¸”é™¤äº†ä¹‹å‰çš„<code class="fe mi mj mk lw b">controller-gen</code>ï¼Œæˆ‘è¿˜åœ¨Githubä¸Šå‘ç°äº†è¿™ä¸¤ä¸ªæœ‰è¶£çš„åŒ…ã€‚</p><ul class=""><li id="75af" class="ns nt it lb b lc ld lf lg li nu lm nv lq nw lu nx ny nz oa bi translated"><code class="fe mi mj mk lw b"><a class="ae ky" href="https://github.com/kubernetes/code-generator" rel="noopener ugc nofollow" target="_blank">Kubernetes/code-generator</a></code>ï¼Œä¹Ÿç”Ÿæˆæ§åˆ¶å™¨ç›¸å…³çš„æ¨¡æ¿ä»£ç ã€‚</li><li id="d0ce" class="ns nt it lb b lc ob lf oc li od lm oe lq of lu nx ny nz oa bi translated"><code class="fe mi mj mk lw b"><a class="ae ky" href="https://github.com/MarcGrol/golangAnnotations" rel="noopener ugc nofollow" target="_blank">golangAnnotations</a></code>ï¼Œæ”¯æŒç”Ÿæˆwebç›¸å…³æ¨¡æ¿ä»£ç ï¼Œå¦‚<code class="fe mi mj mk lw b"><a class="ae ky" href="http://twitter.com/RestOperator" rel="noopener ugc nofollow" target="_blank">@RestOperator</a></code>ã€‚</li></ul><p id="fce8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">å¦‚æœä½ æ„Ÿå…´è¶£ï¼Œå¯ä»¥å»çœ‹çœ‹ã€‚</p><h1 id="6db7" class="ml mb it bd mm mn mo mp mq mr ms mt mu jz mv ka mw kc mx kd my kf mz kg na nb bi translated">ç»“æŸäº†</h1><p id="c3b2" class="pw-post-body-paragraph kz la it lb b lc nn ju le lf no jx lh li np lk ll lm nq lo lp lq nr ls lt lu im bi translated">ä½œä¸ºä¸€ç§é™æ€è¯­è¨€ï¼ŒGoä¸Javaæœ‰ç€æœ¬è´¨çš„ä¸åŒã€‚ä¸Javaæ³¨é‡Šç›¸æ¯”ï¼ŒGoæ ‡è®°ä¹Ÿæ˜¯å¦‚æ­¤ã€‚Goæ ‡è®°é€šå¸¸ç”¨äºç”Ÿæˆæˆ–éªŒè¯ä»£ç ï¼Œä½†åœ¨è¿è¡Œæ—¶ä¸æ·»åŠ ä»»ä½•é€»è¾‘ã€‚ç„¶è€Œï¼ŒJavaæ³¨é‡Šé€šå¸¸å¯ä»¥ä¸æ‹¦æˆªå™¨ç»“åˆä½¿ç”¨ï¼Œå¢åŠ è¿è¡Œæ—¶æ—¥å¿—å’Œå‚æ•°éªŒè¯ã€‚</p><p id="b018" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">é€šè¿‡å­¦ä¹ ä¸Šé¢çš„ä¾‹å­ï¼Œæˆ‘ä»¬å¯¹æ ‡è®°çš„å†…éƒ¨åŸç†æœ‰äº†æ›´å¤šçš„äº†è§£ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨åº”å¯¹æ ·æ¿æ–‡ä»¶ä¸è¶³çš„æƒ…å†µæ—¶åšå¥½å‡†å¤‡ã€‚æˆ‘ä»¬æ˜¯å¦å¯ä»¥ç¼–å†™ä¸€äº›é™æ€è¯­æ³•æ£€æŸ¥ä½œä¸ºlintå·¥å…·ï¼Œä½œä¸ºå…¬å¸å†…éƒ¨æ“ä½œå‘˜çš„æœ€ä½³å®è·µï¼Œè¿™æ˜¯ä¸€ä¸ªæœ‰å¾…è®¨è®ºçš„é—®é¢˜ã€‚</p><h1 id="c550" class="ml mb it bd mm mn mo mp mq mr ms mt mu jz mv ka mw kc mx kd my kf mz kg na nb bi translated">å‚è€ƒ</h1><div class="or os gp gr ot ou"><a href="https://book.kubebuilder.io/reference/markers.html" rel="noopener  ugc nofollow" target="_blank"><div class="ov ab fo"><div class="ow ab ox cl cj oy"><h2 class="bd iu gy z fp oz fr fs pa fu fw is bi translated">ç”¨äºé…ç½®/ä»£ç ç”Ÿæˆçš„æ ‡è®°</h2><div class="pb l"><h3 class="bd b gy z fp oz fr fs pa fu fw dk translated">æˆ‘ä»¬å£°æ´é»‘äººç¤¾åŒºã€‚ç§æ—ä¸»ä¹‰æ˜¯ä¸å¯æ¥å—çš„ã€‚è¿™ä¸â€¦â€¦çš„æ ¸å¿ƒä»·å€¼è§‚ç›¸å†²çª</h3></div><div class="pc l"><p class="bd b dl z fp oz fr fs pa fu fw dk translated">book.kubebuilder.io</p></div></div><div class="pd l"><div class="pe l pf pg ph pd pi ks ou"/></div></div></a></div><div class="or os gp gr ot ou"><a href="https://go.dev/blog/generate" rel="noopener  ugc nofollow" target="_blank"><div class="ov ab fo"><div class="ow ab ox cl cj oy"><h2 class="bd iu gy z fp oz fr fs pa fu fw is bi translated">ç”Ÿæˆä»£ç </h2><div class="pb l"><h3 class="bd b gy z fp oz fr fs pa fu fw dk translated">rob Pike 2014å¹´12æœˆ22æ—¥é€šç”¨è®¡ç®—çš„ä¸€ä¸ªç‰¹æ€§â€”â€”å›¾çµå®Œå¤‡æ€§â€”â€”æ˜¯è®¡ç®—æœºç¨‹åºå¯ä»¥å†™â€¦</h3></div><div class="pc l"><p class="bd b dl z fp oz fr fs pa fu fw dk translated">go.dev</p></div></div><div class="pd l"><div class="pj l pf pg ph pd pi ks ou"/></div></div></a></div></div></div>    
</body>
</html>