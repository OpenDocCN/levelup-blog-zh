<html>
<head>
<title>Indexes in MySQL</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">MySQL中的索引</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/indexes-in-mysql-9ad4c8c0b223?source=collection_archive---------8-----------------------#2020-03-26">https://levelup.gitconnected.com/indexes-in-mysql-9ad4c8c0b223?source=collection_archive---------8-----------------------#2020-03-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/f2ab7191aba860d7e09117e03dc3c3a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lGpq7tLANlhVrBo4yEOqNg.jpeg"/></div></div></figure><div class=""/><div class=""><h2 id="cabc" class="pw-subtitle-paragraph jy ja jb bd b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp dk translated">数据库索引是一种数据结构，可以提高表中搜索操作的速度。最大的数据在表中，最慢的是查找具体数据。</h2></div></div><div class="ab cl kq kr hu ks" role="separator"><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv"/></div><div class="ij ik il im in"><blockquote class="kx ky kz"><p id="0df8" class="la lb lc ld b le lf kc lg lh li kf lj lk ll lm ln lo lp lq lr ls lt lu lv lw ij bi translated"><strong class="ld jc">目录:</strong></p><p id="af59" class="la lb lc ld b le lf kc lg lh li kf lj lk ll lm ln lo lp lq lr ls lt lu lv lw ij bi translated"><strong class="ld jc"> 1。一般指数</strong></p><p id="531a" class="la lb lc ld b le lf kc lg lh li kf lj lk ll lm ln lo lp lq lr ls lt lu lv lw ij bi translated"><strong class="ld jc"> 2。索引类型</strong></p></blockquote></div><div class="ab cl kq kr hu ks" role="separator"><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv"/></div><div class="ij ik il im in"><h2 id="6771" class="lx ly jb bd lz ma mb dn mc md me dp mf mg mh mi mj mk ml mm mn mo mp mq mr ms bi translated">1.我们为什么要使用索引？</h2><p id="0fc2" class="pw-post-body-paragraph la lb jb ld b le mt kc lg lh mu kf lj mg mv lm ln mk mw lq lr mo mx lu lv lw ij bi translated">索引是一种表，它保存一个主键或索引字段以及指向实际表中每条记录的指针。用户看不到索引，它们只是用来加快查询速度，并将被数据库搜索引擎用来快速定位记录。MySQL将索引用于多种目的:</p><ul class=""><li id="8bc3" class="my mz jb ld b le lf lh li mg na mk nb mo nc lw nd ne nf ng bi translated">更快地运行带有<code class="fe nh ni nj nk b">WHERE</code>子句的查询。</li><li id="7adc" class="my mz jb ld b le nl lh nm mg nn mk no mo np lw nd ne nf ng bi translated">当连接其他表时，从其他表中快速检索行。</li><li id="f4a0" class="my mz jb ld b le nl lh nm mg nn mk no mo np lw nd ne nf ng bi translated">查询优化:分组依据，排序依据优化。</li><li id="de63" class="my mz jb ld b le nl lh nm mg nn mk no mo np lw nd ne nf ng bi translated">选择行时快速检索行。</li><li id="1a0d" class="my mz jb ld b le nl lh nm mg nn mk no mo np lw nd ne nf ng bi translated">限制</li><li id="097c" class="my mz jb ld b le nl lh nm mg nn mk no mo np lw nd ne nf ng bi translated">最大()，最小()</li></ul></div><div class="ab cl kq kr hu ks" role="separator"><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv"/></div><div class="ij ik il im in"><h2 id="2220" class="lx ly jb bd lz ma mb dn mc md me dp mf mg mh mi mj mk ml mm mn mo mp mq mr ms bi translated">2.索引类型</h2><p id="8368" class="pw-post-body-paragraph la lb jb ld b le mt kc lg lh mu kf lj mg mv lm ln mk mw lq lr mo mx lu lv lw ij bi translated">MySQL有两个存储引擎:InnoDB和MyISAM。你可以通过<a class="ae nq" href="https://www.knownhost.com/wiki/developmental/mysql-myisam-innodb" rel="noopener ugc nofollow" target="_blank">此链接</a>了解更多关于他们的不同之处。</p><h2 id="921f" class="lx ly jb bd lz ma mb dn mc md me dp mf mg mh mi mj mk ml mm mn mo mp mq mr ms bi translated">2.1.索引的创建。</h2><p id="83e4" class="pw-post-body-paragraph la lb jb ld b le mt kc lg lh mu kf lj mg mv lm ln mk mw lq lr mo mx lu lv lw ij bi translated">在MySQL中有3种不同的方法来创建索引。</p><ol class=""><li id="ba91" class="my mz jb ld b le lf lh li mg na mk nb mo nc lw nr ne nf ng bi translated">使用<code class="fe nh ni nj nk b">CREAT INDEX</code>关键字:</li></ol><pre class="ns nt nu nv gt nw nk nx ny aw nz bi"><span id="72d2" class="lx ly jb nk b gy oa ob l oc od">CREATE INDEX index_name<br/>ON table_name(index_column_1,index_column_2,...);</span></pre><p id="00a3" class="pw-post-body-paragraph la lb jb ld b le lf kc lg lh li kf lj mg ll lm ln mk lp lq lr mo lt lu lv lw ij bi translated">2.使用<code class="fe nh ni nj nk b">CREATE TABLE</code>关键字创建表格时:</p><pre class="ns nt nu nv gt nw nk nx ny aw nz bi"><span id="fcac" class="lx ly jb nk b gy oa ob l oc od">CREATE TABLE table_name(<br/>   column_1 CHAR(30) NOT NULL,<br/>   INDEX (column_2));</span></pre><p id="1e37" class="pw-post-body-paragraph la lb jb ld b le lf kc lg lh li kf lj mg ll lm ln mk lp lq lr mo lt lu lv lw ij bi translated">3.使用<code class="fe nh ni nj nk b">ALTER TABLE</code>关键字:</p><pre class="ns nt nu nv gt nw nk nx ny aw nz bi"><span id="0d04" class="lx ly jb nk b gy oa ob l oc od">ALTER TABLE table_name ADD INDEX (column_1, column_2);</span></pre></div><div class="ab cl kq kr hu ks" role="separator"><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv"/></div><div class="ij ik il im in"><h2 id="9be1" class="lx ly jb bd lz ma mb dn mc md me dp mf mg mh mi mj mk ml mm mn mo mp mq mr ms bi translated">2.2.索引的类型。</h2><p id="85b0" class="pw-post-body-paragraph la lb jb ld b le mt kc lg lh mu kf lj mg mv lm ln mk mw lq lr mo mx lu lv lw ij bi translated">MySQL中有6种类型的索引。它们每个都有不同的用途。</p><h2 id="4837" class="lx ly jb bd lz ma mb dn mc md me dp mf mg mh mi mj mk ml mm mn mo mp mq mr ms bi translated">独一无二</h2><p id="6bc8" class="pw-post-body-paragraph la lb jb ld b le mt kc lg lh mu kf lj mg mv lm ln mk mw lq lr mo mx lu lv lw ij bi translated"><strong class="ld jc">唯一索引</strong>是一种所有列值都必须唯一的索引。在单列唯一索引中，被索引的列中不能有重复的值。在多列唯一索引中，值可以在单个列中重复，但每行中列值的组合必须是唯一的。使用唯一索引来防止重复值，并且通常在创建表后定义索引。下面是如何创建唯一索引:</p><pre class="ns nt nu nv gt nw nk nx ny aw nz bi"><span id="15b9" class="lx ly jb nk b gy oa ob l oc od">1. CREATE <strong class="nk jc">UNIQUE INDEX</strong> index_name<br/>   ON table_name(index_column_1,index_column_2,…);</span><span id="9fe0" class="lx ly jb nk b gy oe ob l oc od">or</span><span id="69e9" class="lx ly jb nk b gy oe ob l oc od">2. CREATE TABLE table_name(<br/>   column_1 CHAR(30) NOT NULL,<br/>   <strong class="nk jc">UNIQUE INDEX</strong>(column_2));</span><span id="6cd0" class="lx ly jb nk b gy oe ob l oc od">or</span><span id="171f" class="lx ly jb nk b gy oe ob l oc od">3. ALTER TABLE table_name ADD <strong class="nk jc">UNIQUE INDEX</strong>(column_1, column_2)</span></pre></div><div class="ab cl kq kr hu ks" role="separator"><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv"/></div><div class="ij ik il im in"><h2 id="4cf6" class="lx ly jb bd lz ma mb dn mc md me dp mf mg mh mi mj mk ml mm mn mo mp mq mr ms bi translated">主键</h2><p id="c1d4" class="pw-post-body-paragraph la lb jb ld b le mt kc lg lh mu kf lj mg mv lm ln mk mw lq lr mo mx lu lv lw ij bi translated"><strong class="ld jc">主键</strong>是唯一的索引，其中没有值可以为空。每一行都必须有该列或列组合的值。因此，您通常会在尽可能少的列上定义主键，并且大多数情况下，主键将在单个列上设置。此外，一旦设置，主键中的列值就不能更改。下面是如何创建主键索引。</p><pre class="ns nt nu nv gt nw nk nx ny aw nz bi"><span id="5924" class="lx ly jb nk b gy oa ob l oc od">1. CREATE TABLE table_name(<br/>   column_1 datatype <strong class="nk jc">PRIMARY KEY</strong> );</span><span id="c0e1" class="lx ly jb nk b gy oe ob l oc od">or</span><span id="857d" class="lx ly jb nk b gy oe ob l oc od">2. CREATE TABLE table_name(<br/>   column_1 CHAR(30) NOT NULL,<br/>   column_2 CHAR(30) NOT NULL,<br/>   <strong class="nk jc">PRIMARY KEY</strong>(column_1, column_2));</span><span id="07b4" class="lx ly jb nk b gy oe ob l oc od">or</span><span id="7bcd" class="lx ly jb nk b gy oe ob l oc od">3. ALTER TABLE table_name ADD <strong class="nk jc">PRIMARY KEY</strong>(column_1, column_2);</span></pre></div><div class="ab cl kq kr hu ks" role="separator"><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv"/></div><div class="ij ik il im in"><h2 id="d4f0" class="lx ly jb bd lz ma mb dn mc md me dp mf mg mh mi mj mk ml mm mn mo mp mq mr ms bi translated">2.2.3简单、常规、正常</h2><p id="b232" class="pw-post-body-paragraph la lb jb ld b le mt kc lg lh mu kf lj mg mv lm ln mk mw lq lr mo mx lu lv lw ij bi translated"><strong class="ld jc">简单、常规或普通索引</strong>是一种值不需要唯一并且可以为空的索引。添加它们只是为了帮助数据库更快地搜索内容。下面是如何创建普通索引。</p><pre class="ns nt nu nv gt nw nk nx ny aw nz bi"><span id="27b4" class="lx ly jb nk b gy oa ob l oc od">1. CREATE <strong class="nk jc">INDEX </strong>index_name<br/>   ON table_name(index_column_1,index_column_2,...);</span><span id="aa58" class="lx ly jb nk b gy oe ob l oc od">or</span><span id="3e2c" class="lx ly jb nk b gy oe ob l oc od">2. CREATE TABLE table_name(<br/>   column_1 CHAR(30) NOT NULL,<br/>   <strong class="nk jc">INDEX</strong>(column_2));</span><span id="b80b" class="lx ly jb nk b gy oe ob l oc od">or</span><span id="8027" class="lx ly jb nk b gy oe ob l oc od">3. ALTER TABLE table_name ADD <strong class="nk jc">INDEX</strong>(column_1, column_2);</span></pre></div><div class="ab cl kq kr hu ks" role="separator"><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv"/></div><div class="ij ik il im in"><h2 id="6001" class="lx ly jb bd lz ma mb dn mc md me dp mf mg mh mi mj mk ml mm mn mo mp mq mr ms bi translated">全文</h2><p id="a647" class="pw-post-body-paragraph la lb jb ld b le mt kc lg lh mu kf lj mg mv lm ln mk mw lq lr mo mx lu lv lw ij bi translated">顾名思义，一个<strong class="ld jc">全文索引</strong>用于全文搜索。有时，您希望找到包含某个单词或一组单词的文本块，或者您可能希望在较大的文本块中找到某个子串。广泛应用于电子商务和搜索引擎。<code class="fe nh ni nj nk b">FULLTEXT</code>索引仅支持<code class="fe nh ni nj nk b"><a class="ae nq" href="https://dev.mysql.com/doc/refman/8.0/en/innodb-storage-engine.html" rel="noopener ugc nofollow" target="_blank">InnoDB</a></code>和<code class="fe nh ni nj nk b"><a class="ae nq" href="https://dev.mysql.com/doc/refman/8.0/en/myisam-storage-engine.html" rel="noopener ugc nofollow" target="_blank">MyISAM</a></code>表，并且只能包括<code class="fe nh ni nj nk b"><a class="ae nq" href="https://dev.mysql.com/doc/refman/8.0/en/char.html" rel="noopener ugc nofollow" target="_blank">CHAR</a></code>、<code class="fe nh ni nj nk b"><a class="ae nq" href="https://dev.mysql.com/doc/refman/8.0/en/char.html" rel="noopener ugc nofollow" target="_blank">VARCHAR</a></code>和<code class="fe nh ni nj nk b"><a class="ae nq" href="https://dev.mysql.com/doc/refman/8.0/en/blob.html" rel="noopener ugc nofollow" target="_blank">TEXT</a></code>列。下面是如何创建全文索引。</p><pre class="ns nt nu nv gt nw nk nx ny aw nz bi"><span id="6246" class="lx ly jb nk b gy oa ob l oc od">1. CREATE <strong class="nk jc">FULLTEXT </strong>INDEX index_name<br/>   ON table_name(index_column_1,index_column_2,...);</span><span id="03d2" class="lx ly jb nk b gy oe ob l oc od">or</span><span id="105d" class="lx ly jb nk b gy oe ob l oc od">2. CREATE TABLE table_name(<br/>   column_1 <strong class="nk jc">TEXT</strong>,<br/>   <strong class="nk jc">FULLTEXT</strong>(column_1));</span><span id="6566" class="lx ly jb nk b gy oe ob l oc od">or</span><span id="2166" class="lx ly jb nk b gy oe ob l oc od">3. ALTER TABLE table_name ADD <strong class="nk jc">FULLTEXT </strong>(column_1, column_2);</span></pre></div><div class="ab cl kq kr hu ks" role="separator"><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv"/></div><div class="ij ik il im in"><h2 id="61ff" class="lx ly jb bd lz ma mb dn mc md me dp mf mg mh mi mj mk ml mm mn mo mp mq mr ms bi translated">空间</h2><p id="bc99" class="pw-post-body-paragraph la lb jb ld b le mt kc lg lh mu kf lj mg mv lm ln mk mw lq lr mo mx lu lv lw ij bi translated">空间索引是MySQL中的新功能，并没有被广泛使用。MySQL允许在<code class="fe nh ni nj nk b">NOT NULL</code>几何值列上创建<code class="fe nh ni nj nk b">SPATIAL</code>索引。<code class="fe nh ni nj nk b">SPATIAL INDEX</code>创建一个R树索引。对于支持空间列的非空间索引的存储引擎，该引擎会创建B树索引。空间值上的B树索引对于精确值查找很有用，但对于范围扫描则没有用。优化器可以使用在受SRID限制的列上定义的空间索引。我计划在不久的将来写一篇关于这个索引的全新文章。下面是如何创建空间索引。</p><pre class="ns nt nu nv gt nw nk nx ny aw nz bi"><span id="9c82" class="lx ly jb nk b gy oa ob l oc od">1. CREATE <strong class="nk jc">SPATIAL </strong>INDEX index_name<br/>   ON table_name(index_column_1);</span><span id="2628" class="lx ly jb nk b gy oe ob l oc od">or</span><span id="b04d" class="lx ly jb nk b gy oe ob l oc od">2. CREATE TABLE table_name(<br/>   column_1 <strong class="nk jc">GEOMETRY NOT NULL SRID 4326,</strong><br/>   <strong class="nk jc">SPATIAL </strong>INDEX(column_2));</span><span id="ff7f" class="lx ly jb nk b gy oe ob l oc od">or</span><span id="5c90" class="lx ly jb nk b gy oe ob l oc od">3. ALTER TABLE table_name ADD <strong class="nk jc">SPATIAL </strong>INDEX(column_1, column_2);</span></pre></div><div class="ab cl kq kr hu ks" role="separator"><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv"/></div><div class="ij ik il im in"><h2 id="710d" class="lx ly jb bd lz ma mb dn mc md me dp mf mg mh mi mj mk ml mm mn mo mp mq mr ms bi translated">下降</h2><p id="050c" class="pw-post-body-paragraph la lb jb ld b le mt kc lg lh mu kf lj mg mv lm ln mk mw lq lr mo mx lu lv lw ij bi translated">一个<strong class="ld jc">降序索引</strong>只有MySQL 8+版本才有，是一个以逆序存储的常规索引。当你对最近添加的数据进行查询时，这是很有帮助的，就像你可能会显示你最近的五篇文章或对你所有文章的十条评论。以前，可以逆序扫描索引，但是性能是个问题。可以按照向前的顺序扫描降序索引，这样效率更高。当最有效的扫描顺序混合了某些列的升序和其他列的降序时，降序索引还使优化器可以使用多列索引。下面是如何创建降序索引。</p><pre class="ns nt nu nv gt nw nk nx ny aw nz bi"><span id="5f48" class="lx ly jb nk b gy oa ob l oc od">1. CREATE INDEX index_name<br/>   ON table_name(index_column_1 <strong class="nk jc">DESC</strong>);</span><span id="99ab" class="lx ly jb nk b gy oe ob l oc od">or</span><span id="005c" class="lx ly jb nk b gy oe ob l oc od">2. CREATE TABLE table_name(   <br/>   column_1 INT, <br/>   column_2 INT,   <br/>   INDEX asc_index_1 (column_1 <strong class="nk jc">ASC</strong>, column_2 <strong class="nk jc">ASC</strong>),   <br/>   INDEX desc_index_1 (column_1 <strong class="nk jc">DESC</strong>, column_2 <strong class="nk jc">DESC</strong>));</span><span id="d183" class="lx ly jb nk b gy oe ob l oc od">or</span><span id="73b2" class="lx ly jb nk b gy oe ob l oc od">3. ALTER TABLE table_name ADD INDEX(column_1 <strong class="nk jc">DESC</strong>, column_2 <strong class="nk jc">ASC</strong>);</span></pre><p id="7fbf" class="pw-post-body-paragraph la lb jb ld b le lf kc lg lh li kf lj mg ll lm ln mk lp lq lr mo lt lu lv lw ij bi translated">这就是今天的文章。希望你喜欢:)。</p></div></div>    
</body>
</html>