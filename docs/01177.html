<html>
<head>
<title>Exploring the Flutter camera plugin</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">æ¢ç´¢Flutterç›¸æœºæ’ä»¶</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://levelup.gitconnected.com/exploring-flutter-camera-plugin-d2c54ac95f05?source=collection_archive---------1-----------------------#2019-11-23">https://levelup.gitconnected.com/exploring-flutter-camera-plugin-d2c54ac95f05?source=collection_archive---------1-----------------------#2019-11-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="fadf" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">åœ¨Flutterä¸­æ„å»ºç›¸æœºåº”ç”¨ç¨‹åºã€‚</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/36c21715d62f6de998e6d928c6301cd9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*11p2PgKZblBwmepxmGex-w.png"/></div></div></figure><p id="b148" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">å¦‚æœä½ æ›¾ç»å¼€å‘æˆ–ä½¿ç”¨è¿‡ä»»ä½•å¤§å‹ç§»åŠ¨åº”ç”¨ç¨‹åºï¼Œé‚£ä¹ˆè¿™ä¸ªåº”ç”¨ç¨‹åºå¾ˆæœ‰å¯èƒ½ä¼šä½¿ç”¨ç›¸æœºåŠŸèƒ½ã€‚å¦‚æœä½ çœ‹çœ‹PlayStore ä¸­çš„<a class="ae ln" href="https://play.google.com/store/apps/top?hl=en" rel="noopener ugc nofollow" target="_blank">æ’è¡Œæ¦œï¼Œä½ ä¼šå‘ç°è®¸å¤šåº”ç”¨ç¨‹åºä½¿ç”¨ç›¸æœºæ¥æ‰§è¡Œå„ç§ä»»åŠ¡ã€‚Flutteræœ‰ä¸€ä¸ª</a><a class="ae ln" href="https://pub.dev/packages/camera" rel="noopener ugc nofollow" target="_blank">æ‘„åƒå¤´æ’ä»¶</a>ï¼Œå¯ä»¥åœ¨Androidå’ŒiOSä¸Šè®¿é—®è®¾å¤‡çš„æ‘„åƒå¤´ã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†æ¢ç´¢Flutterç›¸æœºæ’ä»¶ï¼Œæˆ‘ä»¬å°†å»ºç«‹ä¸€ä¸ªå°çš„ç›¸æœºåº”ç”¨ç¨‹åºï¼Œçœ‹çœ‹è¿™ä¸ªæ’ä»¶èƒ½åšä»€ä¹ˆï¼Œä¸èƒ½åšä»€ä¹ˆã€‚</p><p id="f71f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">åœ¨æˆ‘ä»¬å‰è¿›ä¹‹å‰ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹æˆ‘ä»¬è¦å»ºç«‹ä»€ä¹ˆã€‚è¿™ä¸ªåº”ç”¨ç¨‹åºå°†èƒ½å¤Ÿæ‹ç…§å’Œå½•åˆ¶è§†é¢‘ã€‚ä½ å¯ä»¥åœ¨å‰åæ‘„åƒå¤´ä¹‹é—´åˆ‡æ¢ã€‚å’Œä¸€ä¸ªå›¾åº“ï¼Œæ‚¨å¯ä»¥åœ¨è¿™é‡Œçœ‹åˆ°æ•è·çš„å›¾åƒå’Œå½•åˆ¶çš„è§†é¢‘ï¼Œå¹¶ä¸å…¶ä»–åº”ç”¨ç¨‹åºå…±äº«æˆ–ä»è®¾å¤‡ä¸­åˆ é™¤å®ƒä»¬ã€‚</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi lo"><img src="../Images/b3055a92cd27c1f821ad2754334e21e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/1*xb_b56ZZB242v155pB8SJA.gif"/></div></figure></div><div class="ab cl lp lq hu lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ij ik il im in"><h1 id="18e2" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">å…¥é—¨æŒ‡å—</h1><p id="7b51" class="pw-post-body-paragraph kr ks iq kt b ku mo jr kw kx mp ju kz la mq lc ld le mr lg lh li ms lk ll lm ij bi translated">è¯¥åº”ç”¨ç¨‹åºä½¿ç”¨ä»¥ä¸‹5ä¸ªä¾èµ–é¡¹ã€‚æ‚¨éœ€è¦å°†è¿™äº›ä¾èµ–é¡¹æ·»åŠ åˆ°æ‚¨çš„<code class="fe mt mu mv mw b">pubspec.yaml</code>ä¸­ã€‚</p><ul class=""><li id="fb5e" class="mx my iq kt b ku kv kx ky la mz le na li nb lm nc nd ne nf bi translated"><a class="ae ln" href="https://pub.dev/packages/camera" rel="noopener ugc nofollow" target="_blank">æ‘„åƒå¤´</a>:æä¾›å·¥å…·ä¸è®¾å¤‡ä¸Šçš„æ‘„åƒå¤´é…åˆå·¥ä½œã€‚</li><li id="1960" class="mx my iq kt b ku ng kx nh la ni le nj li nk lm nc nd ne nf bi translated"><a class="ae ln" href="https://pub.dev/packages/path_provider" rel="noopener ugc nofollow" target="_blank"> path_provider </a>:æŸ¥æ‰¾å­˜å‚¨åª’ä½“çš„æ­£ç¡®è·¯å¾„ã€‚</li><li id="4459" class="mx my iq kt b ku ng kx nh la ni le nj li nk lm nc nd ne nf bi translated"><a class="ae ln" href="https://pub.dev/packages/video_player" rel="noopener ugc nofollow" target="_blank"> video_player </a>:æ’­æ”¾å½•åˆ¶çš„è§†é¢‘ã€‚</li><li id="45e1" class="mx my iq kt b ku ng kx nh la ni le nj li nk lm nc nd ne nf bi translated"><a class="ae ln" href="https://pub.dev/packages/esys_flutter_share" rel="noopener ugc nofollow" target="_blank"> esys_flutter_share </a>:ç”¨äºä¸å…¶ä»–åº”ç”¨å…±äº«åª’ä½“æ–‡ä»¶ã€‚</li><li id="90d2" class="mx my iq kt b ku ng kx nh la ni le nj li nk lm nc nd ne nf bi translated"><a class="ae ln" href="https://github.com/divyanshub024/Flutter_Thumbnails" rel="noopener ugc nofollow" target="_blank">ç¼©ç•¥å›¾</a>:ç”¨äºä»è§†é¢‘ç”Ÿæˆç¼©ç•¥å›¾ã€‚</li></ul><pre class="kg kh ki kj gt nl mw nm nn aw no bi"><span id="9b7f" class="np lx iq mw b gy nq nr l ns nt">dependencies:<br/>  camera:<br/>  path_provider:<br/>  thumbnails:<br/>    git:<br/>      url: https://github.com/divyanshub024/Flutter_Thumbnails.git<br/>  video_player:<br/>  esys_flutter_share:</span></pre><p id="f772" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">æ¥ä¸‹æ¥ï¼Œåœ¨æ‚¨çš„<code class="fe mt mu mv mw b">android/app/build.gradle</code>æ–‡ä»¶ä¸­å°†æ‚¨çš„æœ€ä½Android SDKç‰ˆæœ¬æ›´æ–°ä¸º21(æˆ–æ›´é«˜)ã€‚</p><p id="f1fc" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">åœ¨ä½ çš„<code class="fe mt mu mv mw b">ios/Runner/Info.plist</code>ä¸­æ·»åŠ ä»¥ä¸‹å‡ è¡Œ:</p><pre class="kg kh ki kj gt nl mw nm nn aw no bi"><span id="ac81" class="np lx iq mw b gy nq nr l ns nt">&lt;key&gt;NSCameraUsageDescription&lt;/key&gt;<br/>&lt;string&gt;Can I use the camera please?&lt;/string&gt;<br/>&lt;key&gt;NSMicrophoneUsageDescription&lt;/key&gt;<br/>&lt;string&gt;Can I use the mic please?&lt;/string&gt;<br/>&lt;key&gt;NSAppTransportSecurity&lt;/key&gt;<br/>&lt;dict&gt;<br/>  &lt;key&gt;NSAllowsArbitraryLoads&lt;/key&gt;<br/>  &lt;true/&gt;<br/>&lt;/dict&gt;</span></pre></div><div class="ab cl lp lq hu lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ij ik il im in"><h1 id="4dbc" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">è·å–å¯ç”¨æ‘„åƒæœºçš„åˆ—è¡¨</h1><p id="897d" class="pw-post-body-paragraph kr ks iq kt b ku mo jr kw kx mp ju kz la mq lc ld le mr lg lh li ms lk ll lm ij bi translated">é¦–å…ˆï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ç›¸æœºæ’ä»¶è·å–ç›¸æœºåˆ—è¡¨ã€‚</p><pre class="kg kh ki kj gt nl mw nm nn aw no bi"><span id="7642" class="np lx iq mw b gy nq nr l ns nt">List<em class="nu">&lt;</em>CameraDescription<em class="nu">&gt; </em>_cameras;</span><span id="5358" class="np lx iq mw b gy nv nr l ns nt">@override<br/>void initState<em class="nu">() {<br/>  </em>_initCamera<em class="nu">()</em>;<br/>  super.initState<em class="nu">()</em>;<br/><em class="nu">}</em></span><span id="b4fe" class="np lx iq mw b gy nv nr l ns nt">Future<em class="nu">&lt;</em>void<em class="nu">&gt; </em>_initCamera<em class="nu">() </em>async <em class="nu">{<br/>  </em>_cameras = await availableCameras<em class="nu">()</em>;<br/><em class="nu">}</em></span></pre><h1 id="bbc7" class="lw lx iq bd ly lz nw mb mc md nx mf mg jw ny jx mi jz nz ka mk kc oa kd mm mn bi translated">åˆå§‹åŒ–æ‘„åƒæœºæ§åˆ¶å™¨</h1><p id="891d" class="pw-post-body-paragraph kr ks iq kt b ku mo jr kw kx mp ju kz la mq lc ld le mr lg lh li ms lk ll lm ij bi translated">ç°åœ¨æˆ‘ä»¬æœ‰äº†å¯ç”¨æ‘„åƒæœºçš„åˆ—è¡¨ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†åˆå§‹åŒ–æ‘„åƒæœºæ§åˆ¶å™¨ã€‚æ‘„åƒæœºæ§åˆ¶å™¨ç”¨äºæ§åˆ¶è®¾å¤‡æ‘„åƒæœºã€‚<code class="fe mt mu mv mw b">CameraController</code>å–ä¸¤ä¸ªå€¼<code class="fe mt mu mv mw b">CameraDescription</code>å’Œ<code class="fe mt mu mv mw b">ResolutionPreset</code>ã€‚æœ€åˆï¼Œæˆ‘ä»¬ç»™äº†ä¸€ä¸ªç›¸æœºæè¿°ä¸º<code class="fe mt mu mv mw b">_camera[0]</code>ï¼Œè¿™æ˜¯æˆ‘ä»¬çš„èƒŒéƒ¨ç›¸æœºã€‚</p><blockquote class="ob oc od"><p id="2c7c" class="kr ks nu kt b ku kv jr kw kx ky ju kz oe lb lc ld of lf lg lh og lj lk ll lm ij bi translated">æ³¨æ„:è¿™é‡Œæˆ‘ä»¬ç»™å‡ºäº†<code class="fe mt mu mv mw b">ResolutionPreset</code>ä½œä¸ºåª’ä»‹ã€‚å¦‚æœå®ƒå†»ç»“ä½ çš„ç…§ç›¸æœºï¼Œè¯•ç€é¿å…å»ä¸€ä¸ªæ›´é«˜çš„åˆ†è¾¨ç‡ã€‚æ›´å¤šç»†èŠ‚è¯·çœ‹æœ¬æœŸ<a class="ae ln" href="https://github.com/flutter/flutter/issues/40519" rel="noopener ugc nofollow" target="_blank">åˆŠ</a>ã€‚</p></blockquote><pre class="kg kh ki kj gt nl mw nm nn aw no bi"><span id="0a55" class="np lx iq mw b gy nq nr l ns nt">CameraController _controller;<em class="nu"><br/><br/></em>Future<em class="nu">&lt;</em>void<em class="nu">&gt; </em>_initCamera<em class="nu">() </em>async {<em class="nu"><br/></em>  _controller = CameraController<em class="nu">(</em>_cameras<em class="nu">[</em>0<em class="nu">]</em>, ResolutionPreset.medium<em class="nu">)</em>;<br/>  _controller.initialize<em class="nu">()</em>.then<em class="nu">((</em>_<em class="nu">) {<br/>    </em>if <em class="nu">(</em>!mounted<em class="nu">) {<br/>      </em>return;<br/>    <em class="nu">}<br/>    </em>setState<em class="nu">(() {})</em>;<br/>  <em class="nu">})</em>;<br/><em class="nu">}<br/><br/></em>@override<br/>void dispose<em class="nu">() {<br/>  </em>_controller?.dispose<em class="nu">()</em>;<br/>  super.dispose<em class="nu">()</em>;<br/><em class="nu">}</em></span></pre><h1 id="7029" class="lw lx iq bd ly lz nw mb mc md nx mf mg jw ny jx mi jz nz ka mk kc oa kd mm mn bi translated">ç›¸æœºé¢„è§ˆ</h1><p id="da1a" class="pw-post-body-paragraph kr ks iq kt b ku mo jr kw kx mp ju kz la mq lc ld le mr lg lh li ms lk ll lm ij bi translated">ä¸€æ—¦æˆ‘ä»¬çš„ç›¸æœºéƒ½è®¾ç½®å¥½äº†ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨<code class="fe mt mu mv mw b">CameraPreview</code>å°å·¥å…·æ˜¾ç¤ºé¢„è§ˆã€‚åœ¨æˆ‘ä»¬æ˜¾ç¤ºæ‘„åƒæœºé¢„è§ˆä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»ç­‰å¾…æ‘„åƒæœºæ§åˆ¶å™¨åˆå§‹åŒ–ã€‚</p><pre class="kg kh ki kj gt nl mw nm nn aw no bi"><span id="fe1b" class="np lx iq mw b gy nq nr l ns nt">@override<br/>Widget build<em class="nu">(</em>BuildContext context<em class="nu">) {<br/>  </em>if <em class="nu">(</em>_controller != null<em class="nu">) {<br/>    </em>if <em class="nu">(</em>!_controller.value.isInitialized<em class="nu">) {<br/>      </em>return Container<em class="nu">()</em>;<br/>    <em class="nu">}<br/>  } </em>else <em class="nu">{<br/>    </em>return const Center<em class="nu">(<br/>      </em>child: SizedBox<em class="nu">(<br/>        </em>width: 32,<br/>        height: 32,<br/>        child: CircularProgressIndicator<em class="nu">()</em>,<br/>      <em class="nu">)</em>,<br/>    <em class="nu">)</em>;<br/>  <em class="nu">}<br/>}</em></span></pre><p id="d134" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">ä¸€æ—¦ç›¸æœºåˆå§‹åŒ–ï¼Œæˆ‘ä»¬å°†æ˜¾ç¤ºç›¸æœºé¢„è§ˆã€‚</p><pre class="kg kh ki kj gt nl mw nm nn aw no bi"><span id="e895" class="np lx iq mw b gy nq nr l ns nt">return Scaffold<em class="nu">(<br/>  </em>backgroundColor: Theme.<em class="nu">of(</em>context<em class="nu">)</em>.backgroundColor,<br/>  key: _scaffoldKey,<br/>  extendBody: true,<br/>  body: Stack<em class="nu">(<br/>    </em>children: <em class="nu">&lt;</em>Widget<em class="nu">&gt;[<br/>      </em>_buildCameraPreview<em class="nu">()</em>,<br/>    <em class="nu">]</em>,<br/>  <em class="nu">)</em>,<br/><em class="nu">)</em>;</span></pre><p id="9a12" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">åœ¨<code class="fe mt mu mv mw b">_buildCameraPreview()</code>ä¸­ï¼Œæˆ‘ä»¬å°†ç›¸æœºé¢„è§ˆç¼©æ”¾åˆ°å±å¹•å¤§å°ï¼Œä½¿å…¶çœ‹èµ·æ¥å…¨å±ã€‚</p><pre class="kg kh ki kj gt nl mw nm nn aw no bi"><span id="33f9" class="np lx iq mw b gy nq nr l ns nt">Widget _buildCameraPreview<em class="nu">() {<br/>  </em>final size = MediaQuery.<em class="nu">of(</em>context<em class="nu">)</em>.size;<br/>  return ClipRect<em class="nu">(<br/>    </em>child: Container<em class="nu">(<br/>      </em>child: Transform.scale<em class="nu">(<br/>        </em>scale: _controller.value.aspectRatio / size.aspectRatio,<br/>        child: Center<em class="nu">(<br/>          </em>child: AspectRatio<em class="nu">(<br/>            </em>aspectRatio: _controller.value.aspectRatio,<br/>            child: CameraPreview<em class="nu">(</em>_controller<em class="nu">)</em>,<br/>          <em class="nu">)</em>,<br/>        <em class="nu">)</em>,<br/>      <em class="nu">)</em>,<br/>    <em class="nu">)</em>,<br/>  <em class="nu">)</em>;<br/><em class="nu">}</em></span></pre><h1 id="538b" class="lw lx iq bd ly lz nw mb mc md nx mf mg jw ny jx mi jz nz ka mk kc oa kd mm mn bi translated">åˆ‡æ¢æ‘„åƒæœº</h1><p id="8e11" class="pw-post-body-paragraph kr ks iq kt b ku mo jr kw kx mp ju kz la mq lc ld le mr lg lh li ms lk ll lm ij bi translated">ä¸‹ä¸€æ­¥æ˜¯èƒ½å¤Ÿåœ¨å‰åæ‘„åƒå¤´ä¹‹é—´åˆ‡æ¢ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬é¦–å…ˆå°†å›¾æ ‡æŒ‰é’®æ·»åŠ åˆ°å †æ ˆå°éƒ¨ä»¶ä¸­ã€‚</p><pre class="kg kh ki kj gt nl mw nm nn aw no bi"><span id="8f5a" class="np lx iq mw b gy nq nr l ns nt">body: Stack<em class="nu">(<br/>  </em>children: <em class="nu">&lt;</em>Widget<em class="nu">&gt;[<br/>    </em>_buildCameraPreview<em class="nu">()</em>,<br/>  <strong class="mw ir">  Positioned<em class="nu">(<br/>      </em>top: 24.0,<br/>      left: 12.0,<br/>      child: IconButton<em class="nu">(<br/>        </em>icon: Icon<em class="nu">(<br/>          </em>Icons.<em class="nu">switch_camera</em>,<br/>          color: Colors.<em class="nu">white</em>,<br/>        <em class="nu">)</em>,<br/>        onPressed: _onCameraSwitch,<br/>      <em class="nu">)</em>,<br/>    <em class="nu">)</em>,</strong><em class="nu"><br/>  ]</em>,<br/><em class="nu">)</em>,</span></pre><p id="db0b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">è¯¥å›¾æ ‡æŒ‰é’®è¢«æŒ‰ä¸‹æ—¶è°ƒç”¨æ–¹æ³•<code class="fe mt mu mv mw b">_onCameraSwitch</code>ã€‚åœ¨è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬å°†é¦–å…ˆå¤„ç†æ‰<code class="fe mt mu mv mw b">CameraController</code>ï¼Œç„¶åç”¨æ–°çš„<code class="fe mt mu mv mw b">CameraDescription</code>åˆå§‹åŒ–æ–°çš„<code class="fe mt mu mv mw b">CameraController</code>ã€‚</p><pre class="kg kh ki kj gt nl mw nm nn aw no bi"><span id="2164" class="np lx iq mw b gy nq nr l ns nt">Future<em class="nu">&lt;</em>void<em class="nu">&gt; </em>_onCameraSwitch<em class="nu">() </em>async <em class="nu">{<br/>  </em>final CameraDescription cameraDescription =<br/>      <em class="nu">(</em>_controller.description == _cameras<em class="nu">[</em>0<em class="nu">]) </em>? _cameras<em class="nu">[</em>1<em class="nu">] </em>: _cameras<em class="nu">[</em>0<em class="nu">]</em>;<br/>  if <em class="nu">(</em>_controller != null<em class="nu">) {<br/>    </em>await _controller.dispose<em class="nu">()</em>;<br/>  <em class="nu">}<br/>  </em>_controller = CameraController<em class="nu">(</em>cameraDescription, ResolutionPreset.medium<em class="nu">)</em>;<br/>  _controller.addListener<em class="nu">(() {<br/>    </em>if <em class="nu">(</em>mounted<em class="nu">) </em>setState<em class="nu">(() {})</em>;<br/>    if <em class="nu">(</em>_controller.value.hasError<em class="nu">) {<br/>      </em>showInSnackBar<em class="nu">(</em>'Camera error <em class="nu">${</em>_controller.value.errorDescription<em class="nu">}</em>'<em class="nu">)</em>;<br/>    <em class="nu">}<br/>  })</em>;<br/><br/>  try <em class="nu">{<br/>    </em>await _controller.initialize<em class="nu">()</em>;<br/>  <em class="nu">} </em>on CameraException catch <em class="nu">(</em>e<em class="nu">) {<br/>    </em>_showCameraException<em class="nu">(</em>e<em class="nu">)</em>;<br/>  <em class="nu">}<br/><br/>  </em>if <em class="nu">(</em>mounted<em class="nu">) {<br/>    </em>setState<em class="nu">(() {})</em>;<br/>  <em class="nu">}<br/>}</em></span></pre><h1 id="1d5a" class="lw lx iq bd ly lz nw mb mc md nx mf mg jw ny jx mi jz nz ka mk kc oa kd mm mn bi translated">æ‘„åƒæœºæ§åˆ¶è§†å›¾</h1><p id="b13d" class="pw-post-body-paragraph kr ks iq kt b ku mo jr kw kx mp ju kz la mq lc ld le mr lg lh li ms lk ll lm ij bi translated">åœ¨å±å¹•çš„åº•éƒ¨ï¼Œæˆ‘ä»¬å°†æœ‰ä¸€ä¸ªæ§åˆ¶è§†å›¾ï¼ŒåŸºæœ¬ä¸ŠåŒ…å«3ä¸ªæŒ‰é’®ã€‚é¦–å…ˆæ˜¯è¿›å…¥ç”»å»Šï¼Œå…¶æ¬¡æ˜¯æ‹æ‘„å›¾åƒæˆ–å½•åˆ¶è§†é¢‘ï¼Œç¬¬ä¸‰æ˜¯åœ¨å›¾åƒæ‹æ‘„å’Œè§†é¢‘å½•åˆ¶ä¹‹é—´åˆ‡æ¢ã€‚</p><pre class="kg kh ki kj gt nl mw nm nn aw no bi"><span id="f908" class="np lx iq mw b gy nq nr l ns nt">return Scaffold<em class="nu">(<br/>  </em>backgroundColor: Theme.<em class="nu">of(</em>context<em class="nu">)</em>.backgroundColor,<br/>  key: _scaffoldKey,<br/>  <strong class="mw ir">extendBody: true,</strong><br/>  body: ...<br/>  <strong class="mw ir">bottomNavigationBar: _buildBottomNavigationBar<em class="nu">()</em>,</strong><br/><em class="nu">)</em>;</span></pre><p id="2929" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">è¯¥è§†å›¾å°†æ˜¾ç¤ºåœ¨åº•éƒ¨å¯¼èˆªæ ä¸­ã€‚åˆ«å¿˜äº†åŠ ä¸Š<code class="fe mt mu mv mw b">extendBody: true.</code></p><pre class="kg kh ki kj gt nl mw nm nn aw no bi"><span id="2f75" class="np lx iq mw b gy nq nr l ns nt">Widget _buildBottomNavigationBar<em class="nu">() {<br/>  </em>return Container<em class="nu">(<br/>    </em>color: Theme.<em class="nu">of(</em>context<em class="nu">)</em>.bottomAppBarColor,<br/>    height: 100.0,<br/>    width: double.<em class="nu">infinity</em>,<br/>    child: Row<em class="nu">(<br/>      </em>mainAxisAlignment: MainAxisAlignment.spaceAround,<br/>      children: <em class="nu">&lt;</em>Widget<em class="nu">&gt;[<br/>        </em>FutureBuilder<em class="nu">(<br/>          </em>future: getLastImage<em class="nu">()</em>,<br/>          builder: <em class="nu">(</em>context, snapshot<em class="nu">) {<br/>            </em>if <em class="nu">(</em>snapshot.data == null<em class="nu">) {<br/>              </em>return Container<em class="nu">(<br/>                </em>width: 40.0,<br/>                height: 40.0,<br/>              <em class="nu">)</em>;<br/>            <em class="nu">}<br/>            </em>return GestureDetector<em class="nu">(<br/>              </em>onTap: <em class="nu">() </em>=&gt; Navigator.<em class="nu">push(<br/>                </em>context,<br/>                MaterialPageRoute<em class="nu">(<br/>                  </em>builder: <em class="nu">(</em>context<em class="nu">) </em>=&gt; Gallery<em class="nu">()</em>,<br/>                <em class="nu">)</em>,<br/>              <em class="nu">)</em>,<br/>              child: Container<em class="nu">(<br/>                </em>width: 40.0,<br/>                height: 40.0,<br/>                child: ClipRRect<em class="nu">(<br/>                  </em>borderRadius: BorderRadius.circular<em class="nu">(</em>4.0<em class="nu">)</em>,<br/>                  child: Image.file<em class="nu">(<br/>                    </em>snapshot.data,<br/>                    fit: BoxFit.cover,<br/>                  <em class="nu">)</em>,<br/>                <em class="nu">)</em>,<br/>              <em class="nu">)</em>,<br/>            <em class="nu">)</em>;<br/>          <em class="nu">}</em>,<br/>        <em class="nu">)</em>,<br/>        CircleAvatar<em class="nu">(<br/>          </em>backgroundColor: Colors.<em class="nu">white</em>,<br/>          radius: 28.0,<br/>          child: IconButton<em class="nu">(<br/>            </em>icon: Icon<em class="nu">(<br/>              (</em>_isRecordingMode<em class="nu">)<br/>                  </em>? <em class="nu">(</em>_isRecording<em class="nu">) </em>? Icons.<em class="nu">stop </em>: Icons.<em class="nu">videocam<br/>                  </em>: Icons.<em class="nu">camera_alt</em>,<br/>              size: 28.0,<br/>              color: <em class="nu">(</em>_isRecording<em class="nu">) </em>? Colors.<em class="nu">red </em>: Colors.<em class="nu">black</em>,<br/>            <em class="nu">)</em>,<br/>            onPressed: <em class="nu">() {<br/>              </em>if <em class="nu">(</em>!_isRecordingMode<em class="nu">) {<br/>                </em>_captureImage<em class="nu">()</em>;<br/>              <em class="nu">} </em>else <em class="nu">{<br/>                </em>if <em class="nu">(</em>_isRecording<em class="nu">) {<br/>                  </em>stopVideoRecording<em class="nu">()</em>;<br/>                <em class="nu">} </em>else <em class="nu">{<br/>                  </em>startVideoRecording<em class="nu">()</em>;<br/>                <em class="nu">}<br/>              }<br/>            }</em>,<br/>          <em class="nu">)</em>,<br/>        <em class="nu">)</em>,<br/>        IconButton<em class="nu">(<br/>          </em>icon: Icon<em class="nu">(<br/>            (</em>_isRecordingMode<em class="nu">) </em>? Icons.<em class="nu">camera_alt </em>: Icons.<em class="nu">videocam</em>,<br/>            color: Colors.<em class="nu">white</em>,<br/>          <em class="nu">)</em>,<br/>          onPressed: <em class="nu">() {<br/>            </em>setState<em class="nu">(() {<br/>              </em>_isRecordingMode = !_isRecordingMode;<br/>            <em class="nu">})</em>;<br/>          <em class="nu">}</em>,<br/>        <em class="nu">)</em>,<br/>      <em class="nu">]</em>,<br/>    <em class="nu">)</em>,<br/>  <em class="nu">)</em>;<br/><em class="nu">}</em></span></pre><h1 id="5b61" class="lw lx iq bd ly lz nw mb mc md nx mf mg jw ny jx mi jz nz ka mk kc oa kd mm mn bi translated">æ•æ‰å›¾åƒ</h1><p id="b3e5" class="pw-post-body-paragraph kr ks iq kt b ku mo jr kw kx mp ju kz la mq lc ld le mr lg lh li ms lk ll lm ij bi translated">ç”¨ç›¸æœºæ§åˆ¶å™¨æ•æ‰å›¾åƒéå¸¸å®¹æ˜“ã€‚</p><ol class=""><li id="6eab" class="mx my iq kt b ku kv kx ky la mz le na li nb lm oh nd ne nf bi translated">æ£€æŸ¥ç›¸æœºæ§åˆ¶å™¨æ˜¯å¦å·²åˆå§‹åŒ–ã€‚</li><li id="ebb2" class="mx my iq kt b ku ng kx nh la ni le nj li nk lm oh nd ne nf bi translated">æ„å»ºä¸€ä¸ªç›®å½•å¹¶å®šä¹‰è·¯å¾„ã€‚</li><li id="99df" class="mx my iq kt b ku ng kx nh la ni le nj li nk lm oh nd ne nf bi translated">ä½¿ç”¨CameraControlleræ•è·å›¾åƒï¼Œå¹¶å°†å…¶ä¿å­˜åˆ°ç»™å®šçš„è·¯å¾„ã€‚</li></ol><pre class="kg kh ki kj gt nl mw nm nn aw no bi"><span id="4cfe" class="np lx iq mw b gy nq nr l ns nt">void _captureImage<em class="nu">() </em>async <em class="nu">{<br/>  </em>if <em class="nu">(</em>_controller.value.isInitialized<em class="nu">) {<br/>    </em>final Directory extDir = await getApplicationDocumentsDirectory<em class="nu">()</em>;<br/>    final String dirPath = '<em class="nu">${</em>extDir.path<em class="nu">}</em>/media';<br/>    await Directory<em class="nu">(</em>dirPath<em class="nu">)</em>.create<em class="nu">(</em>recursive: true<em class="nu">)</em>;<br/>    final String filePath = '$dirPath/<em class="nu">${</em>_timestamp<em class="nu">()}</em>.jpeg';<br/>    await _controller.takePicture<em class="nu">(</em>filePath<em class="nu">)</em>;<br/>    setState<em class="nu">(() {})</em>;<br/>  <em class="nu">}<br/>}</em></span></pre><h1 id="edbf" class="lw lx iq bd ly lz nw mb mc md nx mf mg jw ny jx mi jz nz ka mk kc oa kd mm mn bi translated">å½•åˆ¶è§†é¢‘</h1><p id="9029" class="pw-post-body-paragraph kr ks iq kt b ku mo jr kw kx mp ju kz la mq lc ld le mr lg lh li ms lk ll lm ij bi translated">æˆ‘ä»¬å¯ä»¥å°†å½•åˆ¶è§†é¢‘çš„è¿‡ç¨‹åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†:</p><p id="aeef" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">å¼€å§‹å½•åƒ:</strong></p><ol class=""><li id="6d3a" class="mx my iq kt b ku kv kx ky la mz le na li nb lm oh nd ne nf bi translated">æ£€æŸ¥ç›¸æœºæ§åˆ¶å™¨æ˜¯å¦å·²åˆå§‹åŒ–ã€‚</li><li id="a8a6" class="mx my iq kt b ku ng kx nh la ni le nj li nk lm oh nd ne nf bi translated">å¯åŠ¨è®¡æ—¶å™¨ï¼Œæ˜¾ç¤ºå½•åˆ¶çš„è§†é¢‘æ—¶é—´ã€‚(å¯é€‰)</li><li id="f604" class="mx my iq kt b ku ng kx nh la ni le nj li nk lm oh nd ne nf bi translated">æ„å»ºä¸€ä¸ªç›®å½•å¹¶å®šä¹‰è·¯å¾„ã€‚</li><li id="53cf" class="mx my iq kt b ku ng kx nh la ni le nj li nk lm oh nd ne nf bi translated">ä½¿ç”¨æ‘„åƒæœºæ§åˆ¶å™¨å¼€å§‹å½•åˆ¶ï¼Œå¹¶å°†è§†é¢‘ä¿å­˜åœ¨å®šä¹‰çš„è·¯å¾„ä¸Šã€‚</li></ol><pre class="kg kh ki kj gt nl mw nm nn aw no bi"><span id="a307" class="np lx iq mw b gy nq nr l ns nt">Future<em class="nu">&lt;</em>String<em class="nu">&gt; </em>startVideoRecording<em class="nu">() </em>async <em class="nu">{<br/>  </em>print<em class="nu">(</em>'startVideoRecording'<em class="nu">)</em>;<br/>  if <em class="nu">(</em>!_controller.value.isInitialized<em class="nu">) {<br/>    </em>return null;<br/>  <em class="nu">}<br/>  </em>setState<em class="nu">(() {<br/>    </em>_isRecording = true;<br/>  <em class="nu">})</em>;<br/>  _timerKey.currentState.startTimer<em class="nu">()</em>;<br/><br/>  final Directory extDir = await getApplicationDocumentsDirectory<em class="nu">()</em>;<br/>  final String dirPath = '<em class="nu">${</em>extDir.path<em class="nu">}</em>/media';<br/>  await Directory<em class="nu">(</em>dirPath<em class="nu">)</em>.create<em class="nu">(</em>recursive: true<em class="nu">)</em>;<br/>  final String filePath = '$dirPath/<em class="nu">${</em>_timestamp<em class="nu">()}</em>.mp4';<br/><br/>  if <em class="nu">(</em>_controller.value.isRecordingVideo<em class="nu">) {<br/>    </em>// A recording is already started, do nothing.<br/>    return null;<br/>  <em class="nu">}<br/><br/>  </em>try <em class="nu">{<br/>    </em>await _controller.startVideoRecording<em class="nu">(</em>filePath<em class="nu">)</em>;<br/>  <em class="nu">} </em>on CameraException catch <em class="nu">(</em>e<em class="nu">) {<br/>    </em>_showCameraException<em class="nu">(</em>e<em class="nu">)</em>;<br/>    return null;<br/>  <em class="nu">}<br/>  </em>return filePath;<br/><em class="nu">}</em></span></pre><p id="c1fc" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">åœæ­¢å½•åƒ:</strong></p><ol class=""><li id="92a9" class="mx my iq kt b ku kv kx ky la mz le na li nb lm oh nd ne nf bi translated">æ£€æŸ¥ç›¸æœºæ§åˆ¶å™¨æ˜¯å¦å·²åˆå§‹åŒ–ã€‚</li><li id="40dc" class="mx my iq kt b ku ng kx nh la ni le nj li nk lm oh nd ne nf bi translated">åœæ­¢è®¡æ—¶å™¨ã€‚</li><li id="0538" class="mx my iq kt b ku ng kx nh la ni le nj li nk lm oh nd ne nf bi translated">ä½¿ç”¨ç›¸æœºæ§åˆ¶å™¨åœæ­¢è§†é¢‘å½•åˆ¶ã€‚</li></ol><pre class="kg kh ki kj gt nl mw nm nn aw no bi"><span id="2ca0" class="np lx iq mw b gy nq nr l ns nt">Future<em class="nu">&lt;</em>void<em class="nu">&gt; </em>stopVideoRecording<em class="nu">() </em>async <em class="nu">{<br/>  </em>if <em class="nu">(</em>!_controller.value.isRecordingVideo<em class="nu">) {<br/>    </em>return null;<br/>  <em class="nu">}<br/>  </em>_timerKey.currentState.stopTimer<em class="nu">()</em>;<br/>  setState<em class="nu">(() {<br/>    </em>_isRecording = false;<br/>  <em class="nu">})</em>;<br/><br/>  try <em class="nu">{<br/>    </em>await _controller.stopVideoRecording<em class="nu">()</em>;<br/>  <em class="nu">} </em>on CameraException catch <em class="nu">(</em>e<em class="nu">) {<br/>    </em>_showCameraException<em class="nu">(</em>e<em class="nu">)</em>;<br/>    return null;<br/>  <em class="nu">}<br/>}</em></span></pre><p id="48b4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">è¿™æ˜¯ç›¸æœºå±å¹•çš„å®Œæ•´ä»£ç ã€‚</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oi oj l"/></div></figure></div><div class="ab cl lp lq hu lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ij ik il im in"><h1 id="f12f" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">å›¾åº“è§†å›¾</h1><p id="d608" class="pw-post-body-paragraph kr ks iq kt b ku mo jr kw kx mp ju kz la mq lc ld le mr lg lh li ms lk ll lm ij bi translated">æˆ‘ä»¬çš„ç›¸æœºå·²ç»å®Œæˆï¼Œéšæ—¶å¯ä»¥ä½¿ç”¨ã€‚ä½†æ˜¯æˆ‘ä»¬å¦‚ä½•çœ‹åˆ°æˆ‘ä»¬æ‹æ‘„çš„å›¾åƒå’Œå½•åˆ¶çš„è§†é¢‘å‘¢ï¼Ÿæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªå›¾åº“è§†å›¾ã€‚å®ƒå°†åŒ…æ‹¬ä¸€ä¸ªæ°´å¹³çš„æµè§ˆé‡å’Œåº•éƒ¨çš„åº”ç”¨ç¨‹åºæ ï¼Œä¸€ä¸ªå…±äº«æŒ‰é’®å’Œä¸€ä¸ªåˆ é™¤æŒ‰é’®ã€‚</p><p id="c6da" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">æˆ‘ä»¬æ­£åœ¨æ£€æŸ¥æ–‡ä»¶çš„æ‰©å±•åã€‚å¦‚æœæ–‡ä»¶æ‰©å±•åæ˜¯<code class="fe mt mu mv mw b">jpeg</code>ï¼Œæˆ‘ä»¬å°†å®ƒæ˜¾ç¤ºä¸ºå›¾åƒï¼Œå¦åˆ™æˆ‘ä»¬å°†ä½¿ç”¨<code class="fe mt mu mv mw b">VideoPreview</code>å°éƒ¨ä»¶æ˜¾ç¤ºè§†é¢‘ã€‚</p><pre class="kg kh ki kj gt nl mw nm nn aw no bi"><span id="ce5e" class="np lx iq mw b gy nq nr l ns nt">String currentFilePath;<br/>@override<br/>Widget build<em class="nu">(</em>BuildContext context<em class="nu">) {<br/>  </em>return Scaffold<em class="nu">(<br/>    </em>backgroundColor: Theme.<em class="nu">of(</em>context<em class="nu">)</em>.backgroundColor,<br/>    appBar: AppBar<em class="nu">(<br/>      </em>backgroundColor: Colors.<em class="nu">black</em>,<br/>    <em class="nu">)</em>,<br/>    body: FutureBuilder<em class="nu">(<br/>      </em>future: _getAllImages<em class="nu">()</em>,<br/>      builder: <em class="nu">(</em>context, AsyncSnapshot<em class="nu">&lt;</em>List<em class="nu">&lt;</em>FileSystemEntity<em class="nu">&gt;&gt; </em>snapshot<em class="nu">) {<br/>        </em>if <em class="nu">(</em>!snapshot.hasData || snapshot.data.isEmpty<em class="nu">) {<br/>          </em>return Container<em class="nu">()</em>;<br/>        <em class="nu">}<br/>        </em>print<em class="nu">(</em>'<em class="nu">${</em>snapshot.data.length<em class="nu">} ${</em>snapshot.data<em class="nu">}</em>'<em class="nu">)</em>;<br/>        if <em class="nu">(</em>snapshot.data.length == 0<em class="nu">) {<br/>          </em>return Center<em class="nu">(<br/>            </em>child: Text<em class="nu">(</em>'No images found.'<em class="nu">)</em>,<br/>          <em class="nu">)</em>;<br/>        <em class="nu">}<br/><br/>        </em>return PageView.builder<em class="nu">(<br/>          </em>itemCount: snapshot.data.length,<br/>          itemBuilder: <em class="nu">(</em>context, index<em class="nu">) {<br/>            </em>currentFilePath = snapshot.data<em class="nu">[</em>index<em class="nu">]</em>.path;<br/>            var extension = path.extension<em class="nu">(</em>snapshot.data<em class="nu">[</em>index<em class="nu">]</em>.path<em class="nu">)</em>;<br/>            if <em class="nu">(</em>extension == '.jpeg'<em class="nu">) {<br/>              </em>return Container<em class="nu">(<br/>                </em>height: 300,<br/>                padding: const EdgeInsets.only<em class="nu">(</em>bottom: 8.0<em class="nu">)</em>,<br/>                child: Image.file<em class="nu">(<br/>                  </em>File<em class="nu">(</em>snapshot.data<em class="nu">[</em>index<em class="nu">]</em>.path<em class="nu">)</em>,<br/>                <em class="nu">)</em>,<br/>              <em class="nu">)</em>;<br/>            <em class="nu">} </em>else <em class="nu">{<br/>              </em>return VideoPreview<em class="nu">(<br/>                </em>videoPath: snapshot.data<em class="nu">[</em>index<em class="nu">]</em>.path,<br/>              <em class="nu">)</em>;<br/>            <em class="nu">}<br/>          }</em>,<br/>        <em class="nu">)</em>;<br/>      <em class="nu">}</em>,<br/>    <em class="nu">)</em>,<br/>    bottomNavigationBar: BottomAppBar<em class="nu">(<br/>      </em>child: Container<em class="nu">(<br/>        </em>height: 56.0,<br/>        child: Row<em class="nu">(<br/>          </em>mainAxisAlignment: MainAxisAlignment.spaceEvenly,<br/>          children: <em class="nu">&lt;</em>Widget<em class="nu">&gt;[<br/>            </em>IconButton<em class="nu">(<br/>              </em>icon: Icon<em class="nu">(</em>Icons.<em class="nu">share)</em>,<br/>              onPressed: <em class="nu">() </em>=&gt; _shareFile<em class="nu">()</em>,<br/>            <em class="nu">)</em>,<br/>            IconButton<em class="nu">(<br/>              </em>icon: Icon<em class="nu">(</em>Icons.<em class="nu">delete)</em>,<br/>              onPressed: _deleteFile,<br/>            <em class="nu">)</em>,<br/>          <em class="nu">]</em>,<br/>        <em class="nu">)</em>,<br/>      <em class="nu">)</em>,<br/>    <em class="nu">)</em>,<br/>  <em class="nu">)</em>;<br/><em class="nu">}</em></span></pre><h2 id="1ac6" class="np lx iq bd ly ok ol dn mc om on dp mg la oo op mi le oq or mk li os ot mm ou bi translated"><strong class="ak">ä»è®¾å¤‡ä¸­è·å–åª’ä½“æ–‡ä»¶</strong></h2><pre class="kg kh ki kj gt nl mw nm nn aw no bi"><span id="8bfb" class="np lx iq mw b gy nq nr l ns nt">Future<em class="nu">&lt;</em>List<em class="nu">&lt;</em>FileSystemEntity<em class="nu">&gt;&gt; </em>_getAllImages<em class="nu">() </em>async <em class="nu">{<br/>  </em>final Directory extDir = await getApplicationDocumentsDirectory<em class="nu">()</em>;<br/>  final String dirPath = '<em class="nu">${</em>extDir.path<em class="nu">}</em>/media';<br/>  final myDir = Directory<em class="nu">(</em>dirPath<em class="nu">)</em>;<br/>  List<em class="nu">&lt;</em>FileSystemEntity<em class="nu">&gt; </em>_images;<br/>  _images = myDir.listSync<em class="nu">(</em>recursive: true, followLinks: false<em class="nu">)</em>;<br/>  _images.sort<em class="nu">((</em>a, b<em class="nu">) {<br/>    </em>return b.path.compareTo<em class="nu">(</em>a.path<em class="nu">)</em>;<br/>  <em class="nu">})</em>;<br/>  return _images;<br/><em class="nu">}</em></span></pre><h2 id="0d81" class="np lx iq bd ly ok ol dn mc om on dp mg la oo op mi le oq or mk li os ot mm ou bi translated">åˆ é™¤åª’ä½“æ–‡ä»¶</h2><p id="d18b" class="pw-post-body-paragraph kr ks iq kt b ku mo jr kw kx mp ju kz la mq lc ld le mr lg lh li ms lk ll lm ij bi translated">åˆ é™¤æ–‡ä»¶ç›¸å½“å®¹æ˜“ã€‚åªéœ€å°†ç›®å½•æŒ‡å‘æ–‡ä»¶è·¯å¾„ï¼Œå¹¶ä½¿ç”¨<code class="fe mt mu mv mw b">deleteSync</code>åŠŸèƒ½å°†å…¶åˆ é™¤ã€‚</p><pre class="kg kh ki kj gt nl mw nm nn aw no bi"><span id="eb5e" class="np lx iq mw b gy nq nr l ns nt">_deleteFile<em class="nu">() {<br/>  </em>final dir = Directory<em class="nu">(</em>currentFilePath<em class="nu">)</em>;<br/>  dir.deleteSync<em class="nu">(</em>recursive: true<em class="nu">)</em>;<br/>  setState<em class="nu">(() {})</em>;<br/><em class="nu">}</em></span></pre><h2 id="edca" class="np lx iq bd ly ok ol dn mc om on dp mg la oo op mi le oq or mk li os ot mm ou bi translated">å…±äº«åª’ä½“æ–‡ä»¶</h2><p id="b63e" class="pw-post-body-paragraph kr ks iq kt b ku mo jr kw kx mp ju kz la mq lc ld le mr lg lh li ms lk ll lm ij bi translated">ä¸ºäº†å…±äº«æ–‡ä»¶ï¼Œæˆ‘ä»¬ä½¿ç”¨<code class="fe mt mu mv mw b">esys_flutter_share</code>æ’ä»¶ã€‚æ‚¨å¯ä»¥ä½¿ç”¨<code class="fe mt mu mv mw b">Share.file()</code>æ–¹æ³•è½»æ¾å…±äº«æ–‡ä»¶ï¼Œè¯¥æ–¹æ³•å°†String <code class="fe mt mu mv mw b">title</code>ã€String <code class="fe mt mu mv mw b">name</code>ã€List<em class="nu">&lt;</em>int<em class="nu">&gt;</em><code class="fe mt mu mv mw b">bytes</code>ã€String <code class="fe mt mu mv mw b">mimeType</code>ä½œä¸ºå¼ºåˆ¶å‚æ•°ã€‚æ‚¨å¯ä»¥ä½¿ç”¨<code class="fe mt mu mv mw b">readAsBytesSync</code>æ–¹æ³•ä»æ–‡ä»¶ä¸­è·å–å­—èŠ‚ã€‚</p><pre class="kg kh ki kj gt nl mw nm nn aw no bi"><span id="03aa" class="np lx iq mw b gy nq nr l ns nt">_shareFile<em class="nu">() </em>async <em class="nu">{<br/>  </em>var extension = path.extension<em class="nu">(</em>currentFilePath<em class="nu">)</em>;<br/>  await Share.<em class="nu">file(<br/>    </em>'image',<br/>    <em class="nu">(</em>extension == '.jpeg'<em class="nu">) </em>? 'image.jpeg' : '  video.mp4',<br/>    File<em class="nu">(</em>currentFilePath<em class="nu">)</em>.readAsBytesSync<em class="nu">()</em>,<br/>    <em class="nu">(</em>extension == '.jpeg'<em class="nu">) </em>? 'image/jpeg' : '  video/mp4',<br/>  <em class="nu">)</em>;<br/><em class="nu">}</em></span></pre><h1 id="767f" class="lw lx iq bd ly lz nw mb mc md nx mf mg jw ny jx mi jz nz ka mk kc oa kd mm mn bi translated">æˆ‘å¯¹ç›¸æœºæ’ä»¶çš„çœ‹æ³•</h1><p id="8ff4" class="pw-post-body-paragraph kr ks iq kt b ku mo jr kw kx mp ju kz la mq lc ld le mr lg lh li ms lk ll lm ij bi translated">åœ¨æˆ‘ä»¬å¾—å‡ºç»“è®ºä¹‹å‰ï¼Œæˆ‘ä»¬åº”è¯¥çŸ¥é“Flutterç›¸æœºæ’ä»¶ä»åœ¨å¼€å‘ä¸­ã€‚è¿™ä¸ªæ’ä»¶å¾ˆé€‚åˆåˆ¶ä½œä»»ä½•åƒæ ·çš„ç›¸æœºåº”ç”¨ç¨‹åºï¼Œä½†å®ƒæœ‰ä¸€ç‚¹ç‚¹é—®é¢˜ï¼Œç¼ºå°‘è®¸å¤šé«˜çº§åŠŸèƒ½ï¼Œå¦‚è‡ªåŠ¨æ›å…‰å’Œé—ªå…‰ç¯æ”¯æŒã€‚å¦‚æœä½ æƒ³äº†è§£ç›¸æœºæ’ä»¶å³å°†åˆ°æ¥çš„å˜åŒ–ï¼Œè¯·å…³æ³¨ç›¸æœºæ’ä»¶çš„æœªæ¥ã€‚æœ¬æœŸè®¨è®ºä¸€äº›å³å°†åœ¨ç›¸æœºæ’ä»¶ä¸­å‡ºç°çš„å¾ˆé…·çš„ç‰¹æ€§ã€‚</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ov oj l"/></div></figure></div><div class="ab cl lp lq hu lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ij ik il im in"><p id="e010" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">è¿™é‡Œ</strong>  <strong class="kt ir">å¯ä»¥çœ‹åˆ°é¡¹ç›®</strong> <a class="ae ln" href="https://github.com/divyanshub024/flutter_camera" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir">çš„å®Œæ•´æºä»£ç ã€‚</strong></a></p><div class="ow ox gp gr oy oz"><a href="https://github.com/divyanshub024/flutter_camera" rel="noopener  ugc nofollow" target="_blank"><div class="pa ab fo"><div class="pb ab pc cl cj pd"><h2 class="bd ir gy z fp pe fr fs pf fu fw ip bi translated">divyanshu 024/flutter _ camera</h2><div class="pg l"><h3 class="bd b gy z fp pe fr fs pf fu fw dk translated">æ–°çš„é¢¤æŒ¯åº”ç”¨ã€‚è¿™ä¸ªé¡¹ç›®æ˜¯é¢¤æŒ¯åº”ç”¨çš„èµ·ç‚¹ã€‚ä¸€äº›èµ„æºè®©ä½ â€¦</h3></div><div class="ph l"><p class="bd b dl z fp pe fr fs pf fu fw dk translated">github.com</p></div></div><div class="pi l"><div class="pj l pk pl pm pi pn kp oz"/></div></div></a></div></div><div class="ab cl lp lq hu lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ij ik il im in"><p id="aeae" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œè¯·åŠ¡å¿…ğŸ‘ä¸‹é¢ï¼Œå°±å’Œæˆ‘è¿çº¿ä¸Šçš„<a class="ae ln" href="https://twitter.com/divyanshub024" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir">Twitter</strong></a><strong class="kt ir"/><a class="ae ln" href="https://github.com/divyanshub024" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir">Github</strong></a><strong class="kt ir">å’Œ</strong><a class="ae ln" href="https://www.linkedin.com/in/divyanshub024/" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir">LinkedIn</strong></a><strong class="kt ir">ã€‚</strong></p></div></div>    
</body>
</html>