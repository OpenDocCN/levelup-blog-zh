<html>
<head>
<title>Packaging your Spring Boot and Angular 2+ projects together</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将您的Spring Boot和Angular 2+项目打包在一起</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/packaging-your-spring-boot-and-angular-2-projects-together-a13a9c5efdb7?source=collection_archive---------1-----------------------#2020-01-21">https://levelup.gitconnected.com/packaging-your-spring-boot-and-angular-2-projects-together-a13a9c5efdb7?source=collection_archive---------1-----------------------#2020-01-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="e98a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这篇文章展示了如何将前端和后端项目包装在一起。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/a405ccb0f3934f22d50e6c4a5c523d0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*dq7qjtOZorrgWAN_"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">由<a class="ae le" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的<a class="ae le" href="https://unsplash.com/@chuttersnap?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> chuttersnap </a>拍摄</figcaption></figure><h2 id="f309" class="lf lg it bd lh li lj dn lk ll lm dp ln kb lo lp lq kf lr ls lt kj lu lv lw lx bi translated">重要的事情先来</h2><p id="d995" class="pw-post-body-paragraph jq jr it js b jt ly jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj mc kl km kn im bi translated">首先，在使用这个解决方案之前，有必要给你一个背景。当您考虑本地项目时，这可能是有用的，例如，在本地项目中没有弹性(云架构最重要的好处之一)，您需要在单个容器或单个应用服务器中分发单个WAR(或JAR)文件。</p><p id="8576" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">解决方法并不简单。您不需要成为专家，但我假设您对Maven、Spring Boot和Angular有一些基本的了解，尤其是因为我将跳过项目的创建步骤。</p><p id="7dae" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我用的是Java 11，Maven 3.6.1，Spring Boot 2.2.1，Node 10.16.0和Angular 8.2.14。</p><p id="fae5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">首先，我推荐你从我的<a class="ae le" href="https://github.com/diegohordi/package-springboot-angular" rel="noopener ugc nofollow" target="_blank"> GitHub </a>中克隆这个项目。</p><p id="8e65" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们把手弄脏吧！</p></div><div class="ab cl md me hx mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="im in io ip iq"><h2 id="0952" class="lf lg it bd lh li lj dn lk ll lm dp ln kb lo lp lq kf lr ls lt kj lu lv lw lx bi translated">主项目</h2><p id="c8a9" class="pw-post-body-paragraph jq jr it js b jt ly jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj mc kl km kn im bi translated">主项目只是包含后端和前端项目作为模块，它的POM如下。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="ef5d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">请注意，我们在这里将Spring Boot启动器作为父POM。</p><h2 id="30db" class="lf lg it bd lh li lj dn lk ll lm dp ln kb lo lp lq kf lr ls lt kj lu lv lw lx bi translated">前端项目</h2><p id="a518" class="pw-post-body-paragraph jq jr it js b jt ly jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj mc kl km kn im bi translated">首先，您需要编辑<strong class="js iu"> package.json </strong>文件，并在“scripts”属性上放置一个新脚本，如第7行所示。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="dec4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这个改变是必要的，因为我们将使用<a class="ae le" href="https://github.com/eirslett/frontend-maven-plugin" rel="noopener ugc nofollow" target="_blank">前端Maven插件</a>来构建前端项目。</p><p id="6431" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这个插件值得很多星！有了它，就可以做很多很酷的事情，比如在本地安装Node.js和NPM并运行脚本。因此，为了使用它，我们需要设置de frontend的POM。所以一步一步来看。</p><p id="2a6d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在开始行中，我们设置父POM(到主项目)并定义前端属性，例如节点和NPM的版本。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="a686" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">之后，我们如下设置前端Maven插件。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="455c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">请注意，在第13行，我们设置了插件的工作目录——节点和NPM将被本地安装。最后，我们设置将在构建生命周期中执行的目标。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="b08b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">#1执行安装Node.js和NPM，#2安装项目依赖项，最后但同样重要的是，我们运行build-prod脚本来构建包。</p><h2 id="2e23" class="lf lg it bd lh li lj dn lk ll lm dp ln kb lo lp lq kf lr ls lt kj lu lv lw lx bi translated"><strong class="ak">后端项目</strong></h2><p id="52f0" class="pw-post-body-paragraph jq jr it js b jt ly jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj mc kl km kn im bi translated">后端项目包含一个非常简单的Spring Boot项目。你需要注意的主要方面是，事实上我们正在使用<a class="ae le" href="https://maven.apache.org/plugins/maven-resources-plugin/" rel="noopener ugc nofollow" target="_blank"> Maven资源插件</a> <strong class="js iu"> </strong>到<strong class="js iu"> </strong>来收集由前端项目构建的捆绑包和<a class="ae le" href="https://docs.spring.io/spring-boot/docs/current/maven-plugin/index.html" rel="noopener ugc nofollow" target="_blank"> Spring Boot Maven插件</a>来重新打包目标，以保持所有这些东西在一起。所以，我们一步步来看它的POM。</p><p id="bdde" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在开始行中，我们设置父POM(到主项目)并定义后端属性，就像我们在前端项目中所做的一样。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="b34e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">设置项目属性后，我们声明我们的依赖项，如下所示。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="4d47" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">最后，我们设置插件来编译、收集资源并打包所有这些东西。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="mk ml l"/></div></figure><h2 id="ca8f" class="lf lg it bd lh li lj dn lk ll lm dp ln kb lo lp lq kf lr ls lt kj lu lv lw lx bi translated"><strong class="ak">额外:角度路线问题</strong></h2><p id="4b54" class="pw-post-body-paragraph jq jr it js b jt ly jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj mc kl km kn im bi translated">就像我们需要在Apache HTTP服务器上使用重写模块，或者在NGINX上编写一些重写规则一样，当我们打包一个Angular项目，该项目在一个使用嵌入式Tomcat服务器的Spring Boot中使用路由器时，我们也需要处理它。关于如何解决这个问题，有很多解决方案，但我更喜欢编写一个过滤器来完成这项工作。它非常简单，易于更改，并且运行良好，没有任何外部依赖性。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="mk ml l"/></div></figure><h2 id="7a81" class="lf lg it bd lh li lj dn lk ll lm dp ln kb lo lp lq kf lr ls lt kj lu lv lw lx bi translated">创建包</h2><p id="b1cf" class="pw-post-body-paragraph jq jr it js b jt ly jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj mc kl km kn im bi translated">要创建包，只需在项目的主目录下运行下面的命令。</p><pre class="kp kq kr ks gt mm mn mo mp aw mq bi"><span id="4ff3" class="lf lg it mn b gy mr ms l mt mu">mvn package</span></pre><p id="972b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">执行后，将在后端的项目目录中的/target目录下生成一个可分发的WAR文件。</p></div><div class="ab cl md me hx mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="im in io ip iq"><h2 id="73bd" class="lf lg it bd lh li lj dn lk ll lm dp ln kb lo lp lq kf lr ls lt kj lu lv lw lx bi translated">结论</h2><p id="ad35" class="pw-post-body-paragraph jq jr it js b jt ly jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj mc kl km kn im bi translated">在这篇文章中，我打算与你分享我们如何将Angular 2+的前端和Spring Boot的后端打包在一个可分发的WAR文件中，只使用Maven插件，而不使用其他外部工具。</p><p id="7960" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">正如我在这篇文章的开头所说的，这个解决方案旨在当你必须处理基础设施限制时使用，所以，对于许多其他场景，我建议你把这些事情分开来。</p><p id="1f93" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">希望这个帖子有用。</p><p id="b840" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">感谢您的阅读，如果您有任何问题，请联系我！=)</p><h2 id="b504" class="lf lg it bd lh li lj dn lk ll lm dp ln kb lo lp lq kf lr ls lt kj lu lv lw lx bi translated">参考</h2><p id="a59a" class="pw-post-body-paragraph jq jr it js b jt ly jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj mc kl km kn im bi translated"><a class="ae le" href="https://github.com/eirslett/frontend-maven-plugin" rel="noopener ugc nofollow" target="_blank">前端Maven插件</a></p><p id="a6b8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><a class="ae le" href="https://maven.apache.org/plugins/maven-resources-plugin/" rel="noopener ugc nofollow" target="_blank"> Maven资源插件</a></p><p id="4ad3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><a class="ae le" href="https://docs.spring.io/spring-boot/docs/current/maven-plugin/index.html" rel="noopener ugc nofollow" target="_blank"> Spring Boot Maven插件</a></p></div></div>    
</body>
</html>