<html>
<head>
<title>JavaScript Breakpoint Debugging Tips</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript断点调试技巧</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/javascript-breakpoint-debugging-tips-ddefb1487c73?source=collection_archive---------16-----------------------#2022-10-17">https://levelup.gitconnected.com/javascript-breakpoint-debugging-tips-ddefb1487c73?source=collection_archive---------16-----------------------#2022-10-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="5381" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">本文将向您展示如何使用Google Chrome调试带有断点的JavaScript。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/eb26f2ffa8d71eff2d5af9d3bca7f240.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H_m2TpnkKrdkMu5EN_uufQ.png"/></div></div></figure><h1 id="a7f8" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated"><strong class="ak">为什么要使用调试器</strong></h1><p id="c890" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">本文将向您展示如何使用Google Chrome调试带有断点的JavaScript。在阅读本文之前，需要问一个问题:为什么要使用断点进行调试？我们都知道<code class="fe mf mg mh mi b">console.log</code>是前端开发中最常用的调试方法，它简单直接的解决了一些问题。但是遇到非常复杂的问题，<code class="fe mf mg mh mi b">console.log</code>就会变得笨拙。</p><p id="3860" class="pw-post-body-paragraph lj lk iq ll b lm mj jr lo lp mk ju lr ls ml lu lv lw mm ly lz ma mn mc md me ij bi translated"><strong class="ll ir">比如:</strong></p><ul class=""><li id="8335" class="mo mp iq ll b lm mj lp mk ls mq lw mr ma ms me mt mu mv mw bi translated">一个逻辑上复杂的算法当一个测试用例报告一个错误时，仅仅通过视觉检查有时很难识别出有问题的方法。</li><li id="0797" class="mo mp iq ll b lm mx lp my ls mz lw na ma nb me mt mu mv mw bi translated">一种繁殖步骤非常复杂的虫子。</li><li id="e3fe" class="mo mp iq ll b lm mx lp my ls mz lw na ma nb me mt mu mv mw bi translated">重现用了10分钟，但是只跟踪到了某一行代码，需要第二次添加log才能继续查找问题。查看日志-&gt;添加日志-&gt;查看日志…这个过程重复几次，</li><li id="5ff1" class="mo mp iq ll b lm mx lp my ls mz lw na ma nb me mt mu mv mw bi translated">运行长流程的一段代码</li></ul><p id="e480" class="pw-post-body-paragraph lj lk iq ll b lm mj jr lo lp mk ju lr ls ml lu lv lw mm ly lz ma mn mc md me ij bi translated">在这些情况下，断点调试是非常有价值的。</p><h1 id="eb7b" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">Chrome调试器的基本用法</h1><p id="e063" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">为了方便理解，介绍一个简单的例子，在一个文件夹中创建index.html和index.js，然后在index.html导入index.js。index.js的内容如下:</p><pre class="kg kh ki kj gt nc mi nd ne aw nf bi"><span id="2c9d" class="ng ks iq mi b gy nh ni l nj nk">const greet = () =&gt; {<br/>  const greeting = "hello debugger";<br/>  // Browser execution will pause here<br/>  debugger<br/>  console.log(greeting);<br/>};</span><span id="75d0" class="ng ks iq mi b gy nl ni l nj nk">greet();</span><span id="e600" class="ng ks iq mi b gy nl ni l nj nk">console.log("hi maxwell,evaluation done");</span></pre><p id="e577" class="pw-post-body-paragraph lj lk iq ll b lm mj jr lo lp mk ju lr ls ml lu lv lw mm ly lz ma mn mc md me ij bi translated">运行:</p><pre class="kg kh ki kj gt nc mi nd ne aw nf bi"><span id="0a37" class="ng ks iq mi b gy nh ni l nj nk">npm i -g serve<br/>serve .</span></pre><p id="3a95" class="pw-post-body-paragraph lj lk iq ll b lm mj jr lo lp mk ju lr ls ml lu lv lw mm ly lz ma mn mc md me ij bi translated">然后访问<a class="ae nm" href="http://localhost:5000" rel="noopener ugc nofollow" target="_blank"> http://localhost:5000 </a>打开开发者工具。这时，我们的hello world断点被命中，就像这样:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nn"><img src="../Images/a1b1a06ce31eb234c2f006f96dedacf0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LYWv8UB1zj7jco5IPXQ-HQ.png"/></div></div></figure><p id="e304" class="pw-post-body-paragraph lj lk iq ll b lm mj jr lo lp mk ju lr ls ml lu lv lw mm ly lz ma mn mc md me ij bi translated">该图分为四个区域，蓝色区域用于文件选择，页面列指的是当前页面中的JS文件，Filesystem将显示我们系统中的文件。通常我们用Page。</p><p id="2199" class="pw-post-body-paragraph lj lk iq ll b lm mj jr lo lp mk ju lr ls ml lu lv lw mm ly lz ma mn mc md me ij bi translated">粉色是代码的行号和内容。您可以单击代码的行号来添加新的断点，再次单击可以取消。</p><p id="f700" class="pw-post-body-paragraph lj lk iq ll b lm mj jr lo lp mk ju lr ls ml lu lv lw mm ly lz ma mn mc md me ij bi translated">黄色区域用于控制代码的执行。你只需要掌握前四个按钮的含义就可以处理大多数情况。按钮1是让代码继续执行(resume)，如果遇到下一个断点，将再次中断执行。按钮2可以让浏览器执行当前行(图中第三行)，然后中断下一行的代码，按钮3是进入当前函数，查看函数的具体内容。假设我们目前停在第7行greet()，点击按钮3将进入greet方法(即第2行)。如果不想再看greet方法，单击按钮4跳出这个方法，回到第8行。</p><p id="885c" class="pw-post-body-paragraph lj lk iq ll b lm mj jr lo lp mk ju lr ls ml lu lv lw mm ly lz ma mn mc md me ij bi translated">绿色区域允许您查看变量和当前调用堆栈的内容。</p><p id="cc33" class="pw-post-body-paragraph lj lk iq ll b lm mj jr lo lp mk ju lr ls ml lu lv lw mm ly lz ma mn mc md me ij bi translated">调试器是最简单粗暴的断点方式，但是需要修改我们的代码。需要注意的是，这些语句必须在上线前删除。也可以通过配置webpack自动删除。</p><h1 id="f6ee" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">条件断点</h1><p id="aa9e" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">在某些情况下，我们不希望每个命中的断点都发挥作用，而是在断点处执行该行，然后在满足某个条件时中断代码执行。这是一个条件断点。</p><pre class="kg kh ki kj gt nc mi nd ne aw nf bi"><span id="4e09" class="ng ks iq mi b gy nh ni l nj nk">for (let i = 0; i &lt; 10; i++) {<br/>  console.log("i", i);<br/>}</span></pre><p id="0b8c" class="pw-post-body-paragraph lj lk iq ll b lm mj jr lo lp mk ju lr ls ml lu lv lw mm ly lz ma mn mc md me ij bi translated">例如，在上面的代码中，假设我们在console.log的第二行遇到一个断点，这个断点总共会中断十次。这往往是我们不想看到的，也许我们只需要其中一个循环而不是全部。此时，右键单击并选择添加条件断点。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi no"><img src="../Images/b73ea11c0c7d7c91e260ba2bab54435b.png" data-original-src="https://miro.medium.com/v2/resize:fit:714/format:webp/1*DriqiGmCys0P82NtQSrPFQ.png"/></div></figure><p id="f3b6" class="pw-post-body-paragraph lj lk iq ll b lm mj jr lo lp mk ju lr ls ml lu lv lw mm ly lz ma mn mc md me ij bi translated">在我们输入i === 5的地方会出现一个输入框。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi np"><img src="../Images/5effb039b87ff87a2a61d201bc95c7d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:900/format:webp/1*WJbOfl8_61-1ERAHkV3egQ.png"/></div></figure><p id="727d" class="pw-post-body-paragraph lj lk iq ll b lm mj jr lo lp mk ju lr ls ml lu lv lw mm ly lz ma mn mc md me ij bi translated">此时开始调试，I为0–4时会被跳过，I为5时直接中断代码执行。当代码继续执行时，I为6–9的情况将被跳过。</p><p id="86a7" class="pw-post-body-paragraph lj lk iq ll b lm mj jr lo lp mk ju lr ls ml lu lv lw mm ly lz ma mn mc md me ij bi translated">当调试大量循环和if else判断时，条件断点非常有用，尤其是当某处的逻辑整体上符合预期，并且只有少数输出错误的特殊情况时，使用条件断点可以跳过这些正常情况。在某些情况下，只有在个别特殊情况发生时才中断执行，以便我们检查每个变量是否计算正常。</p><h1 id="d1b7" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">总结</h1><p id="7707" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">调试是日常工作中非常重要的一项能力，因为除了开发新功能，每天很大一部分时间都在调整旧代码，处理特殊情况下的逻辑错误。精通调试可以大大提高开发效率。一个复杂的bug卡住几个小时，很容易让人崩溃。但这并不是说断点调试是任何情况下的银弹，简单的逻辑还是可以愉快的console.log。</p></div></div>    
</body>
</html>