<html>
<head>
<title>Beginner iOS Dev — embed a UITextView inside a UITableView cell</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">初级iOS开发人员—在UITableView单元格中嵌入UITextView</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/beginner-ios-dev-embedded-uitextview-inside-a-uitableview-cell-56f59f3d0b45?source=collection_archive---------5-----------------------#2021-04-02">https://levelup.gitconnected.com/beginner-ios-dev-embedded-uitextview-inside-a-uitableview-cell-56f59f3d0b45?source=collection_archive---------5-----------------------#2021-04-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div class="gh gi jq"><img src="../Images/d457f4b61fe463370a591e8affa0df0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1120/1*KbTs9QPfe97JwMpccCXaYg.gif"/></div></figure><p id="07b8" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">对于像todo应用程序这样可能需要多行文本而UILabel不能满足要求的应用程序来说，这是一种方便的技术。不过，你确实失去了占位符的功能，但那是另一回事。</p><p id="6582" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">因此，让我们首先创建一个新的基本iOS项目—删除ViewController及其关联的ViewController.swift文件。将TableViewController拖到它所在的位置。不要忘记将新的控制器设置为初始的viewController。</p><figure class="kw kx ky kz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gh gi kv"><img src="../Images/7ebeff54a6286acb4b66ae5374ae42b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I-4W6t6iXeLn227fOqW0ew.png"/></div></div></figure><p id="77f3" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">添加一个新的cocoa touch文件—选择“UITableViewController”作为子类，这个类将是“TableViewController”</p><p id="1093" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">选择新的TableViewController，并在右侧将自定义类更改为“TableViewController”</p><figure class="kw kx ky kz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gh gi le"><img src="../Images/acc906babe4f8b91ab88d2261a1605d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Hj8ypeKGOhpmeWTfNYmLZA.png"/></div></div></figure><p id="a3bc" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">在内容视图的正下方(或者说内部)添加一个文本视图，如下所示:</p><figure class="kw kx ky kz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gh gi lf"><img src="../Images/0af807566f0a5a691cd1d9bdc1168bee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qHDSokjUnpq8cDzFQZZSBw.png"/></div></div></figure><p id="374f" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">选择文本视图并禁用滚动。</p><figure class="kw kx ky kz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gh gi lg"><img src="../Images/f32d644aa2288bc828e58f087fd4ed0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qcYwiNlicARTfTe4gwQjxw.png"/></div></div></figure><p id="e234" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">将文本视图背景的颜色改为灰色。例如，我使用“系统灰色5色”并将字体大小改为30。</p><figure class="kw kx ky kz gt ju gh gi paragraph-image"><div class="gh gi lh"><img src="../Images/c9440299f066dd3316ed4688b28e6334.png" data-original-src="https://miro.medium.com/v2/resize:fit:972/format:webp/1*nisWwzXajwJBJsn9GHWRNg.png"/></div></figure><p id="0915" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">接下来，选择表格视图，并将样式更改为插入分组。这给了tableview一个圆角，看起来更像我们例子中的记事本。</p><p id="aed7" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">选择tableView下的单元格，并添加一个重用标识符“textViewCell”</p><figure class="kw kx ky kz gt ju gh gi paragraph-image"><div class="gh gi li"><img src="../Images/76d91c6a0777ebe4f6a5f9ec5763fa18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1084/format:webp/1*3gDQ7XY7_UpK-aBqDWQFxQ.png"/></div></figure><figure class="kw kx ky kz gt ju gh gi paragraph-image"><div class="gh gi lj"><img src="../Images/92b89e1988b9511131597ddaf588ad10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1008/format:webp/1*XKRL5GWqQZIEnyvBwe2tsw.png"/></div></figure><p id="1279" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">我们将向文本视图添加简单的约束，基本上是将它固定在其超级视图ContentView的两侧。</p><figure class="kw kx ky kz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gh gi lk"><img src="../Images/c1c6687c0a7ac58e4d7cc0262eb24b3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tMP6yMVv6VjLYSmfeWFtYA.png"/></div></div></figure><figure class="kw kx ky kz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gh gi ll"><img src="../Images/a1bc025a67d38d9f8ad4f77d734eb838.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ATnLjU8eBECAX92UMXKNCg.png"/></div></div></figure><p id="5cf3" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">我们正在创建一个自定义的表格视图单元格，所以让我们创建一个适当的CocoaTouch文件，这次是“UItable view cell”的子类，我们将该类称为“TableViewCell”。</p><figure class="kw kx ky kz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gh gi lm"><img src="../Images/bf5caf3aa10056b5911f5c85628401be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e3cQWCBCntWCK-NS3Y7Y7w.png"/></div></div></figure><p id="42d4" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">创建后，您可以将自定义类添加到单元格中。</p><figure class="kw kx ky kz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gh gi ln"><img src="../Images/8cce1e92f90cf5ea50e8cd39905667cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Pp7XRkuJWneO_5lphgxhRQ.png"/></div></div></figure><p id="56cb" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">我们将需要一个到TextView的IBoutlet，有几种方法可以做到这一点，但我总是选择textViewCell，然后键入alt，用指针单击TextViewCell.swift文件，然后按住ctrl，拖动到代码上。</p><figure class="kw kx ky kz gt ju gh gi paragraph-image"><div class="gh gi lo"><img src="../Images/b98075452056394e7aaf17ddf82a09fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/1*owY2i8IK9Vop5IY-2jzzWA.gif"/></div></figure><p id="6ad7" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">让我们回到“TableViewController”并设置数据源，很简单，我们说我们想要一个5行的部分。</p><figure class="kw kx ky kz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gh gi lp"><img src="../Images/db3c681948027a00b0609e2cfe316ef8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OC2VAYX6UGWhmPFtV2B7cQ.png"/></div></div></figure><p id="617c" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">如图所示，在cellForRowAt委托函数下添加定义单元格本身的行。文件里应该已经有例子了，取消注释修改就行了。</p><p id="4af9" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">如果您现在构建并运行，您应该会看到如下图所示的内容，您可以在单元格中键入内容，但单元格不会扩展。</p><figure class="kw kx ky kz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gh gi lq"><img src="../Images/b2b729fef4756e5fcd2fd1fdf5155864.png" data-original-src="https://miro.medium.com/v2/resize:fit:708/1*T7qI8T_N5MLKflwtoJbduw.gif"/></div></div></figure><p id="91a0" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">为了让一切正常工作，我们需要设置几个快速代理。</p><p id="8ab1" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">首先，我们需要捕获对textView的任何更改，将这个扩展添加到TextViewCell.swift文件的底部。</p><figure class="kw kx ky kz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gh gi lr"><img src="../Images/4118f3f7049f4bef5fcc27efa8d8f745.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*raouUK6l4xx1YPkbj_C3yw.png"/></div></div></figure><p id="f0d3" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">我们还需要添加一行，说明这个类是textView的委托，所以仍然在TextViewCell中。</p><figure class="kw kx ky kz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gh gi ls"><img src="../Images/d54a7608fd3bd1e1e7d1897328012901.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2EVXi8ZI9cDeSViT9jrO0A.png"/></div></div></figure><p id="3f85" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">现在，我们需要创建我们自己的委托函数，我们将调用“TextViewCellDelegate ”,以使我们能够在TableViewController中执行一些操作(在我们的示例中是更新tableViewCell的高度)。仍然在TextViewCell.swift的顶部添加一个协议定义。</p><figure class="kw kx ky kz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gh gi lt"><img src="../Images/c2aa0f644b03796f01b96127df658efa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aeaBPA7iP2dfhJV7iVH8Gg.png"/></div></div></figure><p id="0627" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">对新委托进行引用。</p><figure class="kw kx ky kz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gh gi lu"><img src="../Images/915e9931b03af98d23036dc5d5241741.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GVrzmb013rvvnqPU6g4zFw.png"/></div></div></figure><p id="d466" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">最后，在这个文件中要做的最后一件事是，每当我们在文本视图中输入任何内容时，就调用这个函数。</p><figure class="kw kx ky kz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gh gi lu"><img src="../Images/3f0466b400f0f373fa91259520e3788a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QpOO-O26QG4w03309a0FMA.png"/></div></div></figure><p id="af27" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">整个文件应该是这样的(参见下面的要点):</p><figure class="kw kx ky kz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gh gi lv"><img src="../Images/e45060030a928b77c74a20eba7689141.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XvshIGI8ktOghDkgtciQrw.png"/></div></div></figure><figure class="kw kx ky kz gt ju"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="f922" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">还在吗？:)</p><p id="a6f5" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">现在只需要做几件小事。</p><p id="1094" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">将实际的“执行”函数添加到TableViewController.swift文件:</p><figure class="kw kx ky kz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gh gi ly"><img src="../Images/b43b6373d9aa27045cbad6fd5e51a66c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Zzb54qTdRgnxjA9jOpsfaw.png"/></div></div></figure><p id="cf44" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">如果我引用<a class="ae lz" href="https://developer.apple.com/documentation/uikit/uitableview/1614908-beginupdates" rel="noopener ugc nofollow" target="_blank">苹果文档</a>，开始和结束更新的目的是非常清楚的——“…在不重新加载单元格的情况下动画显示行高变化的方法。这组方法必须以调用<code class="fe ma mb mc md b"><a class="ae lz" href="https://developer.apple.com/documentation/uikit/uitableview/1614890-endupdates" rel="noopener ugc nofollow" target="_blank">endUpdates()</a></code>结束。</p><p id="c190" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">最后，我们还需要通过向CellForRow at函数添加“cell.delegate = self ”,告诉类它是TextViewCellDelegate的委托。</p><figure class="kw kx ky kz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gh gi me"><img src="../Images/8381fda3f9e90db9be5fd879f0020a7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UOS3eBwS4SFB5SuOUCnbuQ.png"/></div></div></figure><p id="441e" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">现在，如果我们建立并运行，你应该有一个工作的例子。</p><figure class="kw kx ky kz gt ju gh gi paragraph-image"><div class="gh gi jq"><img src="../Images/d457f4b61fe463370a591e8affa0df0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1120/1*KbTs9QPfe97JwMpccCXaYg.gif"/></div></figure><p id="623c" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">如果你到了这里，做得很好，感谢你的阅读。如果你喜欢这个或者觉得它有用，看看下面我的其他一些中型职位。</p><div class="mf mg gp gr mh mi"><a href="https://iosdevnewbie.medium.com/beginner-ios-dev-uibuttons-shadow-buttons-toggle-buttons-animated-with-frames-designable-6beacf1d96ca" rel="noopener follow" target="_blank"><div class="mj ab fo"><div class="mk ab ml cl cj mm"><h2 class="bd iu gy z fp mn fr fs mo fu fw is bi translated">初学者iOS开发-自定义用户界面按钮-阴影，切换按钮，动画帧，可设计…</h2><div class="mp l"><h3 class="bd b gy z fp mn fr fs mo fu fw dk translated">我最近整理了一个项目作为自己的参考，一种记录不同构建技术的方式…</h3></div><div class="mq l"><p class="bd b dl z fp mn fr fs mo fu fw dk translated">iosdevnewbie.medium.com</p></div></div><div class="mr l"><div class="ms l mt mu mv mr mw jv mi"/></div></div></a></div><div class="mf mg gp gr mh mi"><a rel="noopener  ugc nofollow" target="_blank" href="/beginner-ios-dev-in-app-purchase-iap-made-simple-with-swiftystorekit-3add60e9065d"><div class="mj ab fo"><div class="mk ab ml cl cj mm"><h2 class="bd iu gy z fp mn fr fs mo fu fw is bi translated">初学者iOS开发-通过SwiftyStoreKit简化应用程序内购买(IAP)。</h2><div class="mp l"><h3 class="bd b gy z fp mn fr fs mo fu fw dk translated">SwiftyStoreKit真的让基本的应用程序购买变得非常简单。在这个例子中，我将展示…</h3></div><div class="mq l"><p class="bd b dl z fp mn fr fs mo fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="mr l"><div class="mx l mt mu mv mr mw jv mi"/></div></div></a></div><div class="mf mg gp gr mh mi"><a rel="noopener  ugc nofollow" target="_blank" href="/swift-xcode-sharing-data-between-view-controllers-8d270e99ca1e"><div class="mj ab fo"><div class="mk ab ml cl cj mm"><h2 class="bd iu gy z fp mn fr fs mo fu fw is bi translated">Swift / Xcode:在视图控制器之间共享数据。</h2><div class="mp l"><h3 class="bd b gy z fp mn fr fs mo fu fw dk translated">在视图控制器之间共享数据是iOS开发人员的基本职责之一，想象一下一个应用程序拥有…</h3></div><div class="mq l"><p class="bd b dl z fp mn fr fs mo fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="mr l"><div class="my l mt mu mv mr mw jv mi"/></div></div></a></div></div></div>    
</body>
</html>