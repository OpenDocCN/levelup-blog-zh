<html>
<head>
<title>How and Why I Created Android Style Time Picker From Scratch in Angular</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我如何以及为什么在Angular中从头开始创建Android风格的时间选择器</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-and-why-i-created-android-style-time-picker-from-scratch-in-angular-d747cb5bdf36?source=collection_archive---------14-----------------------#2021-05-31">https://levelup.gitconnected.com/how-and-why-i-created-android-style-time-picker-from-scratch-in-angular-d747cb5bdf36?source=collection_archive---------14-----------------------#2021-05-31</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/9fe53323f41ec9e2193c2400953d14cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UdQagZ3nZfeCe861H9FLeA.png"/></div></div></figure></div><div class="ab cl jy jz hu ka" role="separator"><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd"/></div><div class="ij ik il im in"><h1 id="a738" class="kf kg iq bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">简介和动机</h1><p id="601a" class="pw-post-body-paragraph ld le iq lf b lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">这篇文章主要是一步一步的指导你从零开始构建一个角度风格的时间选择器。但是我想谈谈为什么我们需要重新发明轮子。简单的答案是边做边学。这一切都始于我脑海中的一个问题“如何像时钟一样在一个圆内定位元素”。令我惊讶的是，我们有<a class="ae mb" href="https://css-tricks.com/almanac/properties/s/shape-outside/" rel="noopener ugc nofollow" target="_blank"> <strong class="lf ir"> shape-outside </strong> </a>属性，它将内容包装在一个圆的外面，但没有什么东西可以在里面包装内容。就像蝴蝶效应一样，事情最终让我有了时间选择的要求，我决定自己做一个。我从这种方式中学到了很多，我想与社区分享。如果你把它当作一个挑战，自己建立一个，并在评论中贴上链接，我会很感激。事不宜迟，我们重新发明轮子吧！</p></div><div class="ab cl jy jz hu ka" role="separator"><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd"/></div><div class="ij ik il im in"><h1 id="d683" class="kf kg iq bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">逐渐地</h1><p id="19f7" class="pw-post-body-paragraph ld le iq lf b lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我们的第一项行动是创建一个小时拨号。从高层次上看，我们将创建一个圆形div，在其中，我们将创建12个大小相等的扇区，每个扇区代表一个小时，并循环排列它们。</p><p id="4e23" class="pw-post-body-paragraph ld le iq lf b lg mc li lj lk md lm ln lo me lq lr ls mf lu lv lw mg ly lz ma ij bi translated">下面是一个小的样板代码。</p><figure class="mh mi mj mk gt jr"><div class="bz fp l di"><div class="ml mm l"/></div></figure></div><div class="ab cl jy jz hu ka" role="separator"><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd"/></div><div class="ij ik il im in"><figure class="mh mi mj mk gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mn"><img src="../Images/ed9774d25178ccbadcfe4c6168194bb6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I9189dTFuvlOUJVEy0Mpcw.png"/></div></div></figure></div><div class="ab cl jy jz hu ka" role="separator"><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd"/></div><div class="ij ik il im in"><p id="cc2f" class="pw-post-body-paragraph ld le iq lf b lg mc li lj lk md lm ln lo me lq lr ls mf lu lv lw mg ly lz ma ij bi translated">现在是第一部分。在圆内添加12个扇区，并将它们放置在一个圆内。</p><figure class="mh mi mj mk gt jr"><div class="bz fp l di"><div class="ml mm l"/></div></figure></div><div class="ab cl jy jz hu ka" role="separator"><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd"/></div><div class="ij ik il im in"><figure class="mh mi mj mk gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mo"><img src="../Images/98bda84b9b235393cbe941cfcaf3353e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7q0zma3OmiPrHHsu9oVh5Q.png"/></div></div></figure><p id="5bcb" class="pw-post-body-paragraph ld le iq lf b lg mc li lj lk md lm ln lo me lq lr ls mf lu lv lw mg ly lz ma ij bi translated">每个扇区都是使用<strong class="lf ir">和<em class="mp">创建的。拨号盘</em> </strong> CSS类。在TS文件中，我们创建了一个名为<strong class="lf ir"> <em class="mp"> hoursWheel </em> </strong>的数组，并存储了所有的小时值。在HTML文件中，使用<strong class="lf ir"> <em class="mp"> ngFor </em> </strong>我们在我们的圆(<strong class="lf ir"> <em class="mp">)内创建了12个扇形div。拨号盘</em> </strong>)。</p><p id="24b3" class="pw-post-body-paragraph ld le iq lf b lg mc li lj lk md lm ln lo me lq lr ls mf lu lv lw mg ly lz ma ij bi translated">我们使用CSS变量为每个div分配唯一的值。—I]HTML中的属性绑定。最后，我们通过transform使用CSS中该变量的值来旋转扇区。由于有12个扇区，每个扇区将获得360/12 = 30度的空间。要记住的一点是将变换原点从中心改为底部中心。我使用<strong class="lf ir"> <em class="mp">剪辑路径</em> </strong>和扇区只是为了演示的目的。在最后阶段，我们将删除剪辑路径的风格，并留下他们作为透明的矩形组合成一个圆圈。</p><p id="da42" class="pw-post-body-paragraph ld le iq lf b lg mc li lj lk md lm ln lo me lq lr ls mf lu lv lw mg ly lz ma ij bi translated">这些扇区对于检测用户选择哪个小时是有用的。例如，如果用户将鼠标悬停在特定区域内的任何地方，我们将突出显示所选择的小时。在每个扇区内，有三个部分:小时值，荧光笔，以及连接所选小时和表盘中心的线条。</p><figure class="mh mi mj mk gt jr"><div class="bz fp l di"><div class="ml mm l"/></div></figure></div><div class="ab cl jy jz hu ka" role="separator"><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd"/></div><div class="ij ik il im in"><figure class="mh mi mj mk gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mq"><img src="../Images/1b7ca9338cbc59b9e7f48d94c43bf36a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yu_Rd-r5awFluwOpb338bQ.png"/></div></div></figure><p id="b1fe" class="pw-post-body-paragraph ld le iq lf b lg mc li lj lk md lm ln lo me lq lr ls mf lu lv lw mg ly lz ma ij bi translated">创建一个名为<strong class="lf ir"> <em class="mp"> selectedHours </em> </strong>的变量，它将存储所选择的小时值。我暂时将该值设为10。在HTML中，我们为每个扇区添加了<strong class="lf ir"> <em class="mp">扇区线</em> </strong>、<strong class="lf ir"> <em class="mp">扇区值</em> </strong>、<strong class="lf ir"> <em class="mp">扇区选择器</em> </strong> divs。<strong class="lf ir"> <em class="mp">扇区线</em> </strong>和<strong class="lf ir"> <em class="mp">扇区值</em> </strong>的活动样式只有在该扇区的索引等于<strong class="lf ir"> <em class="mp">选择的小时</em> </strong>变量时才会显示。在<strong class="lf ir"> <em class="mp"> sector-val </em> </strong>类中，我们通过应用变换来旋转div。这是必要的，因为由于<strong class="lf ir"> <em class="mp"> dial-sector </em> </strong>是<strong class="lf ir"> <em class="mp"> sector-val </em> </strong>的父级，我们旋转了父级，里面的内容也会旋转，因此文本值也会旋转。我现在给<strong class="lf ir"><em class="mp"/></strong>到<strong class="lf ir"> <em class="mp">扇区选择器</em> </strong>。接下来，我们将添加鼠标事件处理程序来突出显示用户选择。</p></div><div class="ab cl jy jz hu ka" role="separator"><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd"/></div><div class="ij ik il im in"><h1 id="b723" class="kf kg iq bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">让我们开始行动吧</h1><p id="bd4d" class="pw-post-body-paragraph ld le iq lf b lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">要选择一个值，用户必须<strong class="lf ir">点击鼠标左键</strong>，然后当<strong class="lf ir">用户在刻度盘</strong>内时，如果他们<strong class="lf ir">悬停在特定的扇区</strong>内，我们将高亮显示该扇区。一旦用户<strong class="lf ir">释放鼠标键</strong>，我们将锁定选择。</p><p id="a719" class="pw-post-body-paragraph ld le iq lf b lg mc li lj lk md lm ln lo me lq lr ls mf lu lv lw mg ly lz ma ij bi translated">有一个选择值的机制。下面是用户动作到鼠标事件的简单映射。</p><p id="4dc2" class="pw-post-body-paragraph ld le iq lf b lg mc li lj lk md lm ln lo me lq lr ls mf lu lv lw mg ly lz ma ij bi translated">点击鼠标左键:<strong class="lf ir"><em class="mp">【mousedown()</em></strong><br/>在表盘内:<strong class="lf ir"><em class="mp">mouseenter()</em></strong><br/>悬停在某个扇区内:<em class="mp"> mouseover() </em>  <br/>释放鼠标键:<strong class="lf ir"> <em class="mp"> mouseup() </em> </strong></p><p id="c820" class="pw-post-body-paragraph ld le iq lf b lg mc li lj lk md lm ln lo me lq lr ls mf lu lv lw mg ly lz ma ij bi translated">因此，要选择一个值，用户必须<strong class="lf ir">点击鼠标</strong>，<strong class="lf ir">进入刻度盘</strong>，<strong class="lf ir">悬停在所需值上，</strong>和<strong class="lf ir">释放鼠标</strong>。</p><figure class="mh mi mj mk gt jr"><div class="bz fp l di"><div class="ml mm l"/></div></figure></div><div class="ab cl jy jz hu ka" role="separator"><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd"/></div><div class="ij ik il im in"><figure class="mh mi mj mk gt jr gh gi paragraph-image"><div class="gh gi mr"><img src="../Images/ff96ed1b1725618672603f7031e0e390.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*klXpr476soc0ra2ThWNChA.gif"/></div></figure><p id="f890" class="pw-post-body-paragraph ld le iq lf b lg mc li lj lk md lm ln lo me lq lr ls mf lu lv lw mg ly lz ma ij bi translated">我在Wheel内部创建了两个新变量<strong class="lf ir"><em class="mp"/></strong>:当我们进入刻度盘时，我们将它设置为true，当我们离开刻度盘时，我们将它设置为false。<strong class="lf ir"> <em class="mp"> wheelClicked </em> </strong>:我们在点击鼠标的时候设置为true，如果松开鼠标则设置为false。</p><p id="3509" class="pw-post-body-paragraph ld le iq lf b lg mc li lj lk md lm ln lo me lq lr ls mf lu lv lw mg ly lz ma ij bi translated">当鼠标在转盘内时，<strong class="lf ir"> <em class="mp"> mouseEnter </em> </strong>方法将被调用，并将<strong class="lf ir"> <em class="mp"> insideWheel </em> </strong>值设置为<strong class="lf ir"> <em class="mp"> true </em> </strong>，单击时，<strong class="lf ir"> <em class="mp"> mouseDown </em> </strong>方法将被调用，并将被单击的<strong class="lf ir"><em class="mp">wheel</em></strong>设置为<strong class="lf ir"> <em class="mp"> true </em> </strong>。如果我们松开这个键，<strong class="lf ir"> <em class="mp"> mouseUp </em> </strong>将被调用，而<strong class="lf ir"> <em class="mp"> wheelClicked </em> </strong>将被设置为<strong class="lf ir"> <em class="mp"> false </em> </strong>。如果我们走到拨号盘外，<strong class="lf ir"> <em class="mp"> mouseExit </em> </strong>将被调用，并将<strong class="lf ir"> <em class="mp"> insideWheel </em> </strong>设置为<strong class="lf ir"> <em class="mp"> false </em> </strong>。当我们悬停在任何扇区上时，将调用<strong class="lf ir"> <em class="mp"> mouseOver </em> </strong>方法，我们将传递我们要更改的变量的名称(“selectedHour”)和要更改的值(“I”)。传递变量名是有原因的。我们还将创建一个分钟表盘。在那里，我们将发送设置分钟的变量。所以我们可以在那里重用这个方法。<strong class="lf ir"> <em class="mp"> mouseOver </em> </strong>方法将使用我们发送的索引设置<strong class="lf ir"> <em class="mp"> selectedHour </em> </strong>变量，前提是<strong class="lf ir"> <em class="mp"> insideWheel </em> </strong>和<strong class="lf ir"> <em class="mp"> wheelClicked </em> </strong>为真，这意味着鼠标被按下并且指针在刻度盘内部。否则，该值不会改变。还有<strong class="lf ir"><em class="mp">selectByClick</em></strong>()方法。如果用户单击一个小时数来设置值，而不是单击鼠标、悬停并在特定位置释放，则使用此方法来设置值。</p><p id="30ac" class="pw-post-body-paragraph ld le iq lf b lg mc li lj lk md lm ln lo me lq lr ls mf lu lv lw mg ly lz ma ij bi translated">当我们点击并悬停时，该动作被认为是默认选中的。当我们选择一个值时，浏览器将启动选择并选择文本。为了防止这种情况，我们在HTML中为<strong class="lf ir"> <em class="mp"> mousedown </em> </strong>事件返回false以防止默认行为。</p><p id="bb74" class="pw-post-body-paragraph ld le iq lf b lg mc li lj lk md lm ln lo me lq lr ls mf lu lv lw mg ly lz ma ij bi translated">我们完成了时间选择器的制作。缺少的部分是创建另一个分钟选择拨号，主要是重复上述步骤，并添加一个过渡到打开时间选择器点击图标或按钮或其他东西，并在选择小时，打开分钟拨号选择分钟。</p></div><div class="ab cl jy jz hu ka" role="separator"><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd"/></div><div class="ij ik il im in"><h1 id="a27c" class="kf kg iq bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated"><strong class="ak">不再等待分钟</strong></h1><p id="95c5" class="pw-post-body-paragraph ld le iq lf b lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我不会深究会议记录部分。我将粘贴代码，并给出一些概述和总结。</p><figure class="mh mi mj mk gt jr"><div class="bz fp l di"><div class="ml mm l"/></div></figure><figure class="mh mi mj mk gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ms"><img src="../Images/3197a00c465dfab130af402103c86b78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gaFZxUc2OqcYGnrYT4W1cQ.png"/></div></div></figure><p id="ec45" class="pw-post-body-paragraph ld le iq lf b lg mc li lj lk md lm ln lo me lq lr ls mf lu lv lw mg ly lz ma ij bi translated">我添加了<strong class="lf ir"> <em class="mp"> minutesWheel </em> </strong>数组来存储要显示的值，并添加了<strong class="lf ir"> <em class="mp"> selectedMinute </em> </strong>变量来存储所选分钟的值。这些变化主要出现在HTML文件中。与有12个扇区的小时表盘相比，这里有60个扇区。所以我减少了每个部分的宽度，只显示了5的倍数的分钟，其余的用一个小圆圈表示。之前我们讨论过<strong class="lf ir"> <em class="mp">剪辑路径</em> </strong>最后我们会移除它，在这里。如果我们保持剪辑路径属性，选择器气泡将不会是一个圆。你们自己试试。</p></div><div class="ab cl jy jz hu ka" role="separator"><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd"/></div><div class="ij ik il im in"><h1 id="5e38" class="kf kg iq bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">了结未了结的事情</h1><p id="c92f" class="pw-post-body-paragraph ld le iq lf b lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我们做了核心部分。现在是大多数人拖延的时候了。我将用尽可能少的细节来完成这一部分。</p><p id="87b9" class="pw-post-body-paragraph ld le iq lf b lg mc li lj lk md lm ln lo me lq lr ls mf lu lv lw mg ly lz ma ij bi translated">首先创建一个触发器来打开时间选择器。首先显示小时刻度，选择小时后，显示分钟刻度。始终在刻度盘和控件的顶部显示选定的值以选择AM或PM，并在底部添加一个按钮以关闭时间选择器。</p><figure class="mh mi mj mk gt jr"><div class="bz fp l di"><div class="ml mm l"/></div></figure><figure class="mh mi mj mk gt jr gh gi paragraph-image"><div class="gh gi mr"><img src="../Images/03c35090afe34b6958022a7bde429fbc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*ZT9Ewhd2o0HBZjrAJyW53w.gif"/></div></figure><p id="2906" class="pw-post-body-paragraph ld le iq lf b lg mc li lj lk md lm ln lo me lq lr ls mf lu lv lw mg ly lz ma ij bi translated">瞧啊。</p></div><div class="ab cl jy jz hu ka" role="separator"><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd"/></div><div class="ij ik il im in"><h1 id="fc33" class="kf kg iq bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">Farewell🥳🎉</h1><p id="7acc" class="pw-post-body-paragraph ld le iq lf b lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我希望你会同意重新发明轮子的思想。我们做了一些了不起的事情，这才是最重要的。一路上我们学到了很多。我期待着看到人们把这作为一个挑战，做出他们的版本并与我们分享。记住总有改进的空间。</p><p id="922a" class="pw-post-body-paragraph ld le iq lf b lg mc li lj lk md lm ln lo me lq lr ls mf lu lv lw mg ly lz ma ij bi translated">查看下面的参考资料，稍后见。</p><p id="5781" class="pw-post-body-paragraph ld le iq lf b lg mc li lj lk md lm ln lo me lq lr ls mf lu lv lw mg ly lz ma ij bi translated">github:<a class="ae mb" href="https://github.com/kumararduino/mat-time-picker" rel="noopener ugc nofollow" target="_blank">https://github.com/kumararduino/mat-time-picker</a></p><p id="c0b5" class="pw-post-body-paragraph ld le iq lf b lg mc li lj lk md lm ln lo me lq lr ls mf lu lv lw mg ly lz ma ij bi translated">现场演示:<a class="ae mb" href="https://angular-mat-time-picker.stackblitz.io" rel="noopener ugc nofollow" target="_blank">https://angular-mat-time-picker . stack blitz . io</a></p></div><div class="ab cl jy jz hu ka" role="separator"><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd"/></div><div class="ij ik il im in"><h1 id="f2e9" class="kf kg iq bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">分级编码</h1><p id="6cf3" class="pw-post-body-paragraph ld le iq lf b lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">感谢您成为我们社区的一员！<a class="ae mb" href="https://www.youtube.com/channel/UC3v9kBR_ab4UHXXdknz8Fbg?sub_confirmation=1" rel="noopener ugc nofollow" target="_blank">订阅我们的YouTube频道</a>或者加入<a class="ae mb" href="https://skilled.dev/" rel="noopener ugc nofollow" target="_blank"> <strong class="lf ir"> Skilled.dev编码面试课程</strong> </a>。</p><div class="mt mu gp gr mv mw"><a href="https://skilled.dev" rel="noopener  ugc nofollow" target="_blank"><div class="mx ab fo"><div class="my ab mz cl cj na"><h2 class="bd ir gy z fp nb fr fs nc fu fw ip bi translated">编写面试问题+获得开发工作</h2><div class="nd l"><h3 class="bd b gy z fp nb fr fs nc fu fw dk translated">掌握编码面试的过程</h3></div><div class="ne l"><p class="bd b dl z fp nb fr fs nc fu fw dk translated">技术开发</p></div></div><div class="nf l"><div class="ng l nh ni nj nf nk jw mw"/></div></div></a></div></div></div>    
</body>
</html>