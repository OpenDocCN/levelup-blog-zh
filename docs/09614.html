<html>
<head>
<title>The Easiest Way To Format Dates In JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用JavaScript格式化日期的最简单方法</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/the-easiest-way-to-format-dates-in-javascript-723ba42a94c4?source=collection_archive---------8-----------------------#2021-08-26">https://levelup.gitconnected.com/the-easiest-way-to-format-dates-in-javascript-723ba42a94c4?source=collection_archive---------8-----------------------#2021-08-26</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="c6e6" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">这比你想象的要简单</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/02a51c0812f0808c239613c24598cfc7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y1wx0A3hoCNNmOZTYrHZrw.png"/></div></div></figure><p id="7533" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">多年来，开发人员抱怨用JavaScript格式化他们的日期和时间。进行计算或适当的格式化需要像MomentJS这样的库。</p><p id="9c41" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">但是感谢ECMAScript国际化API，那些日子已经过去了！我们需要依赖外部因素来进行日期格式化、日期和时间计算等等的日子已经一去不复返了。</p><p id="2cf9" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">在这篇文章中，我想向您展示用国际化JavaScript API格式化日期是多么容易。</p><pre class="kk kl km kn gu lr ls lt lu aw lv bi"><span id="3c33" class="lw lx iu ls b gz ly lz l ma mb">1. JavaScript Libraries VS Internationalization API<br/>2. How To Format Dates in JavaScript<br/>3. Intl.DateTimeFormat<br/>4. Intl.RelativeTimeFormat</span></pre></div><div class="ab cl mc md hy me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="in io ip iq ir"><h1 id="3967" class="mj lx iu bd mk ml mm mn mo mp mq mr ms ka mt kb mu kd mv ke mw kg mx kh my mz bi translated">1.JavaScript库与国际化API</h1><p id="4ffa" class="pw-post-body-paragraph kv kw iu kx b ky na jv la lb nb jy ld le nc lg lh li nd lk ll lm ne lo lp lq in bi translated">我不知道你怎么想，但是格式化日期、数字和货币一直是JavaScript最讨厌的事情。开箱即用，你必须用普通的JavaScript做很多事情才能完成。</p><p id="00e6" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">对于日期<a class="ae nf" href="https://momentjs.com/" rel="noopener ugc nofollow" target="_blank"> Moment.js </a>是一个强大的球员。它们使得格式化、计算和其他所有与日期相关的事情变得更加容易。只有使用JavaScript库才能格式化日期。但这是一个庞大的图书馆。</p><p id="282c" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">但是由于库使事情变得更容易，它们也向您的JavaScript包添加了更多的数据。在大多数情况下，这不是一个问题，但如果你专注于性能，这可能是一个交易破坏者。</p><p id="83f5" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">这就是为什么我对<a class="ae nf" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl" rel="noopener ugc nofollow" target="_blank">国际化API </a>如此满意。他们让你格式化你的日期、数字、时间和货币。这个API的美妙之处在于，在所有主流浏览器中，对浏览器的支持几乎是100%。</p><p id="13ad" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">检查<a class="ae nf" href="https://caniuse.com/internationalization" rel="noopener ugc nofollow" target="_blank">CanIUse.com的浏览器支持数据</a></p><p id="438a" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">我建议我们进入兔子洞，深入国际化API的世界。享受旅程！🎢</p></div><div class="ab cl mc md hy me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="in io ip iq ir"><h1 id="18ac" class="mj lx iu bd mk ml mm mn mo mp mq mr ms ka mt kb mu kd mv ke mw kg mx kh my mz bi translated">如何用JavaScript格式化日期</h1><p id="8eb7" class="pw-post-body-paragraph kv kw iu kx b ky na jv la lb nb jy ld le nc lg lh li nd lk ll lm ne lo lp lq in bi translated">先说影响最大的。格式化日期很糟糕，但是有了<code class="fe ng nh ni ls b">Intl.DateTimeFormat()</code>和<code class="fe ng nh ni ls b">Intl.RelativeTimeFormat()</code>就变得容易多了。因为他们把它分成了两种方法。</p><h1 id="bc38" class="mj lx iu bd mk ml nj mn mo mp nk mr ms ka nl kb mu kd nm ke mw kg nn kh my mz bi translated">什么可以Intl。DateTimeFormat()做什么？</h1><p id="a9fb" class="pw-post-body-paragraph kv kw iu kx b ky na jv la lb nb jy ld le nc lg lh li nd lk ll lm ne lo lp lq in bi translated">I <a class="ae nf" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/DateTimeFormat/DateTimeFormat" rel="noopener ugc nofollow" target="_blank"> ntl。DateTimeFormat() </a>帮助格式化日期和时间。它通过执行这些格式来考虑位置和语言。</p><p id="b55c" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">像下面这样的格式示例将很容易执行。</p><ul class=""><li id="8075" class="no np iu kx b ky kz lb lc le nq li nr lm ns lq nt nu nv nw bi">12/01/2021</li><li id="2296" class="no np iu kx b ky nx lb ny le nz li oa lm ob lq nt nu nv nw bi">2021/12/09</li><li id="9cda" class="no np iu kx b ky nx lb ny le nz li oa lm ob lq nt nu nv nw bi translated">2021年8月5日</li><li id="bbd8" class="no np iu kx b ky nx lb ny le nz li oa lm ob lq nt nu nv nw bi translated">欧洲中部时间2020年12月20日星期日04:23</li><li id="dc16" class="no np iu kx b ky nx lb ny le nz li oa lm ob lq nt nu nv nw bi translated">即使是荷兰语:“宗达，2020年12月20日上午16时23分”</li></ul><h1 id="369f" class="mj lx iu bd mk ml nj mn mo mp nk mr ms ka nl kb mu kd nm ke mw kg nn kh my mz bi translated">如何使用Intl？DateTimeFormat()？</h1><p id="9bcc" class="pw-post-body-paragraph kv kw iu kx b ky na jv la lb nb jy ld le nc lg lh li nd lk ll lm ne lo lp lq in bi translated">DateTimeFormat非常容易使用。首先，我们必须配置<code class="fe ng nh ni ls b">Intl.DateTimeFormat</code>构造函数。有几种可能性。</p><pre class="kk kl km kn gu lr ls lt lu aw lv bi"><span id="6569" class="lw lx iu ls b gz ly lz l ma mb">new Intl.DateTimeFormat([])<br/>new Intl.DateTimeFormat(locales)<br/>new Intl.DateTimeFormat(locales, options)</span></pre><p id="3146" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">您可以像上面的示例一样轻松地使用构造函数。如果您想使用浏览器的区域设置，您必须在构造函数中传递一个空的<code class="fe ng nh ni ls b">Array</code>。如果你要自己设置语言环境，你必须以字符串<code class="fe ng nh ni ls b">en-US</code>或<code class="fe ng nh ni ls b">nl-NL</code>的形式传递它。</p><p id="31d5" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">第二个参数提供了一些其他的选项，可以对格式进行更多的控制。这些选项包括:</p><ul class=""><li id="095d" class="no np iu kx b ky kz lb lc le nq li nr lm ns lq nt nu nv nw bi translated"><code class="fe ng nh ni ls b">dateStyle</code>:“满”、“长”、“中”、“短”</li><li id="cbc1" class="no np iu kx b ky nx lb ny le nz li oa lm ob lq nt nu nv nw bi translated"><code class="fe ng nh ni ls b">timeStyle</code>:“满”、“长”、“中”、“短”</li><li id="b4e6" class="no np iu kx b ky nx lb ny le nz li oa lm ob lq nt nu nv nw bi translated"><code class="fe ng nh ni ls b">dayPeriod</code>:“窄”、“短”、“长”</li><li id="034c" class="no np iu kx b ky nx lb ny le nz li oa lm ob lq nt nu nv nw bi translated"><a class="ae nf" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/DateTimeFormat/DateTimeFormat#parameters" rel="noopener ugc nofollow" target="_blank">同时检查其他选项</a>。</li></ul><p id="0156" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">如您所见，您有许多选项来控制日期和时间的格式。</p><p id="3bdf" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">在下面的例子中，你可以看到我们在传递<code class="fe ng nh ni ls b">Date</code>的构造函数后面需要<code class="fe ng nh ni ls b">format</code>方法。</p><pre class="kk kl km kn gu lr ls lt lu aw lv bi"><span id="f07a" class="lw lx iu ls b gz ly lz l ma mb">function showDateTimeFormat() {<br/>  const today = new Date();<br/>  const formattedDate = new Intl.DateTimeFormat("en-US").format(today);<br/>  const formattedDateNL = new Intl.DateTimeFormat("nl-NL").format(today);<br/>  console.log(`<br/>    Unformatted date:, ${today}<br/>    Formatted date: ${formattedDate}<br/>    Formatted date NL: ${formattedDateNL}<br/>  `);<br/>}<br/>showDateTimeFormat();</span></pre><p id="c26a" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">该代码的结果将是:</p><pre class="kk kl km kn gu lr ls lt lu aw lv bi"><span id="e65e" class="lw lx iu ls b gz ly lz l ma mb">Unformatted date:, Fri Aug 13 2021 11:09:09 GMT+0200 (Central European Summer Time)<br/>Formatted date: 8/13/2021<br/>Formatted date NL: 13-8-2021</span></pre><p id="092a" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">这使得用每种语言、每种日历类型格式化您的日期变得轻而易举。我强烈建议查看<a class="ae nf" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/DateTimeFormat/DateTimeFormat" rel="noopener ugc nofollow" target="_blank"> MDN Web文档，了解更多详细信息</a>。</p></div><div class="ab cl mc md hy me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="in io ip iq ir"><h1 id="f0fd" class="mj lx iu bd mk ml mm mn mo mp mq mr ms ka mt kb mu kd mv ke mw kg mx kh my mz bi translated">什么可以Intl。RelativeTimeFormat()做什么？</h1><p id="d014" class="pw-post-body-paragraph kv kw iu kx b ky na jv la lb nb jy ld le nc lg lh li nd lk ll lm ne lo lp lq in bi translated">国际机场。RelativeTimeFormat() 有助于以人类可读的方式格式化日期和时间。</p><p id="5606" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">像下面这样的格式示例将很容易创建！更好的是，它根据位置和语言对它们进行格式化。</p><ul class=""><li id="a91f" class="no np iu kx b ky kz lb lc le nq li nr lm ns lq nt nu nv nw bi translated">一年前</li><li id="ed87" class="no np iu kx b ky nx lb ny le nz li oa lm ob lq nt nu nv nw bi translated">三分钟后</li><li id="edbd" class="no np iu kx b ky nx lb ny le nz li oa lm ob lq nt nu nv nw bi translated">10秒钟前</li><li id="f7cd" class="no np iu kx b ky nx lb ny le nz li oa lm ob lq nt nu nv nw bi translated">明天</li><li id="44f3" class="no np iu kx b ky nx lb ny le nz li oa lm ob lq nt nu nv nw bi translated">昨天</li></ul><h1 id="8014" class="mj lx iu bd mk ml nj mn mo mp nk mr ms ka nl kb mu kd nm ke mw kg nn kh my mz bi translated">如何使用Intl？RelativeTimeFormat()？</h1><p id="c371" class="pw-post-body-paragraph kv kw iu kx b ky na jv la lb nb jy ld le nc lg lh li nd lk ll lm ne lo lp lq in bi translated">RelativeTimeFormat类似于<code class="fe ng nh ni ls b">Intl.DateTimeFormat</code>。首先，我们必须配置<code class="fe ng nh ni ls b">Intl.RelativeTimeFormat</code>构造函数。有几种可能性。</p><pre class="kk kl km kn gu lr ls lt lu aw lv bi"><span id="fdbf" class="lw lx iu ls b gz ly lz l ma mb">new Intl.RelativeTimeFormat()<br/>new Intl.RelativeTimeFormat(locales)<br/>new Intl.RelativeTimeFormat(locales, options)</span></pre><p id="cc2b" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">与DateTimeFormat一样，RelativeTimeFormat也以同样的方式使用区域设置。传递一个空的<code class="fe ng nh ni ls b">Array</code>，它将选择浏览器默认的区域设置。但是如果你添加了<code class="fe ng nh ni ls b">en</code>或<code class="fe ng nh ni ls b">nl</code>，它将使用该语言进行格式化。</p><p id="2767" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">在构造函数的第二个参数中，您可以添加一些选项。(更多详情，请查看<a class="ae nf" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/RelativeTimeFormat/RelativeTimeFormat#parameters" rel="noopener ugc nofollow" target="_blank"> MDN网络文档</a>)</p><ul class=""><li id="5d53" class="no np iu kx b ky kz lb lc le nq li nr lm ns lq nt nu nv nw bi translated"><code class="fe ng nh ni ls b">localMatcher</code>:“查找”或“最佳匹配”(默认为最后一个)</li><li id="5ab3" class="no np iu kx b ky nx lb ny le nz li oa lm ob lq nt nu nv nw bi translated"><code class="fe ng nh ni ls b">numeric</code>:“始终”或“自动”(使用自动，您可以期待类似“昨天”而不是“一天前”的值</li><li id="c242" class="no np iu kx b ky nx lb ny le nz li oa lm ob lq nt nu nv nw bi translated"><code class="fe ng nh ni ls b">style</code>:“长”、“短”还是“窄”</li></ul><p id="07bd" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">这使得格式化每种语言和每种日历类型的相对时间变得轻而易举。我强烈建议查看<a class="ae nf" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/DateTimeFormat/DateTimeFormat" rel="noopener ugc nofollow" target="_blank"> MDN Web文档，了解更多详细信息</a>。</p><p id="77b4" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">要使用<code class="fe ng nh ni ls b">Intl.RelativeTimeFormat</code>，您需要计算日期。您可以自己做，但是我发现<a class="ae nf" href="https://date-fns.org/" rel="noopener ugc nofollow" target="_blank"> date-fns </a>是处理日期的最好的模块化JavaScript库之一。所以在这个例子中，我将使用这个库。</p><p id="c6c8" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">通过运行<code class="fe ng nh ni ls b">npm install date-fns</code>安装日期-fns。</p><pre class="kk kl km kn gu lr ls lt lu aw lv bi"><span id="6622" class="lw lx iu ls b gz ly lz l ma mb">import { differenceInHours } from 'date-fns';</span><span id="6109" class="lw lx iu ls b gz oc lz l ma mb">const diff = differenceInHours(<br/>  new Date(2021, 6, 2, 19, 0),<br/>  new Date(2021, 6, 2, 6, 50)<br/>)</span><span id="ad70" class="lw lx iu ls b gz oc lz l ma mb">const rtf = new Intl.RelativeTimeFormat("en");<br/>const rtf2 = new Intl.RelativeTimeFormat("nl");</span><span id="aef7" class="lw lx iu ls b gz oc lz l ma mb">console.log(rtf.format(diff, 'hour')) // Result: "1,300 hours ago"<br/>console.log(rtf2.format(diff2, 'hour')) // Result: "1.300 uur geleden"</span></pre><p id="f221" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">如您所见，结果非常方便。您不必手动翻译输出。但是你可以很容易地改变语言，用户得到一个可读的字符串。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="od oe l"/></div><figcaption class="of og gk gi gj oh oi bd b be z dk translated">将节点版本更改为最低版本16，否则无法工作😅</figcaption></figure><p id="fbfb" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">使用这个构造函数，您以前需要库来完成这项工作。是的，有了日期-fns，你也可以这样做。但是，如果浏览器可以毫不费力地做到这一点，为什么要使用库呢？</p><p id="1560" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated">date-fns的伟大之处在于它是模块化的。你不用的东西不会包含在你的代码里。方便保持你的代码库小。</p></div><div class="ab cl mc md hy me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="in io ip iq ir"><p id="ebaf" class="pw-post-body-paragraph kv kw iu kx b ky kz jv la lb lc jy ld le lf lg lh li lj lk ll lm ln lo lp lq in bi translated"><a class="ae nf" href="https://blog.byrayray.dev/subscribe" rel="noopener ugc nofollow" target="_blank"> <strong class="kx iv">通过电子邮件获取我的文章点击这里</strong> </a> <strong class="kx iv"> | </strong> <a class="ae nf" href="https://blog.byrayray.dev/membership" rel="noopener ugc nofollow" target="_blank"> <strong class="kx iv">购买5美元中等会员</strong> </a></p></div><div class="ab cl mc md hy me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="in io ip iq ir"><h1 id="4b01" class="mj lx iu bd mk ml mm mn mo mp mq mr ms ka mt kb mu kd mv ke mw kg mx kh my mz bi translated">结论</h1><p id="4256" class="pw-post-body-paragraph kv kw iu kx b ky na jv la lb nb jy ld le nc lg lh li nd lk ll lm ne lo lp lq in bi translated">我非常感谢那些花时间开发这些开发人员友好的浏览器API的聪明人。因此，让我们使用它们，并尽可能缩小我们的代码库。</p></div></div>    
</body>
</html>