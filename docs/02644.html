<html>
<head>
<title>Sentiment Analysis With Twitter Hashtags In R</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">R语言中Twitter标签的情感分析</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/sentiment-analysis-with-twitter-hashtags-in-r-af02655f2113?source=collection_archive---------6-----------------------#2020-03-27">https://levelup.gitconnected.com/sentiment-analysis-with-twitter-hashtags-in-r-af02655f2113?source=collection_archive---------6-----------------------#2020-03-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div class="gh gi jq"><img src="../Images/e924b5f35c1d37d77c9814a54aff8ed2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1390/format:webp/1*9JLiEhZ8A6YrCeEG0Kq64Q.png"/></div></figure><p id="1dce" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">在我们目前所处的混乱和疫情中，我们如何判断全球对某一特定事件的看法是否一致？</p><p id="2d44" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">或许消极大于积极，反之亦然。因此，我们可以创建一个从Twitter的推文中获得的情绪分析，来给我们一个特定事件的总体情绪的估计。</p><p id="2862" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">请注意，您可以将它复制到任何特定的兴趣上。我决定分析冠状病毒疾病或COVID19的情绪，因为在撰写本文时，这是一个广泛讨论的话题。</p><p id="d9d8" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">不管怎样，我们开始吧！</p><p id="f439" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">由于我们将基于twitter标签收集推文，我们将首先连接我们的twitter帐户。为此，您需要执行以下步骤:</p><ul class=""><li id="5961" class="kv kw it jz b ka kb ke kf ki kx km ky kq kz ku la lb lc ld bi translated">为标准API(<a class="ae le" href="https://developer.twitter.com/en" rel="noopener ugc nofollow" target="_blank">https://developer.twitter.com/en</a>)申请一个Twitter开发者账户</li><li id="5000" class="kv kw it jz b ka lf ke lg ki lh km li kq lj ku la lb lc ld bi translated">创建应用程序</li><li id="2695" class="kv kw it jz b ka lf ke lg ki lh km li kq lj ku la lb lc ld bi translated">消费者API密钥和访问令牌&amp;访问令牌秘密细节，以在R</li></ul><p id="0021" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">一旦您设法获得了以下内容，我们就可以开始加载我们分析所需的以下库。</p><p id="56f5" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">如果你还没有下载这些库，继续运行<em class="lk"> install.packages </em>命令或者在工具- &gt;库下手动搜索并安装它们。</p><figure class="lm ln lo lp gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi ll"><img src="../Images/d1758ea244f087fa3a741c70e6018a0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PUik9VUcaabyJbhzIBiyIA.png"/></div></div><figcaption class="lu lv gj gh gi lw lx bd b be z dk translated">加载我们分析所需的下列库</figcaption></figure><p id="99fb" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">一旦安装完毕，我们就可以使用上面提到的键来设置我们的Twitter帐户，从而开始我们的第一组代码。</p><p id="81e2" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">将***替换为您各自的密钥，这将允许您使用Twitter标准API的直接认证。</p><figure class="lm ln lo lp gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi ly"><img src="../Images/83a979a50b7338007d082d7be995a1cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J28CEmE_Xkw4HaRHLbQGEQ.png"/></div></div></figure><p id="25be" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">接下来，我们将使用下面的代码通过hashtags收集tweets。在这个例子中，我们决定收集500条tweets，用n表示，关于标签covid19。</p><p id="0291" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">如果你决定收集更多的推文，处理时间可能会长一点。我们还决定将列表转换成数据框。</p><figure class="lm ln lo lp gt ju gh gi paragraph-image"><div class="gh gi lz"><img src="../Images/6591bc8f30a0db1ff5f0fc545c0cd80f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jmZyMTRIwav_yoOXAGVLnA.png"/></div></figure><p id="6404" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">查看我们刚刚获得的推文</p><figure class="lm ln lo lp gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi ma"><img src="../Images/e7032ee4e55b78934b374656e1a71531.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AHpPuH_fyi_nEt6y_hB2_w.png"/></div></div></figure><p id="ed33" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">如您所知，我们对其他列不感兴趣，如favourited、favouriteCount等。并且仅在文本列中。因此，我们只关注使用以下代码的文本列。</p><figure class="lm ln lo lp gt ju gh gi paragraph-image"><div class="gh gi mb"><img src="../Images/122d08ffc48e4a4f95cda0a245bd7a8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:840/format:webp/1*9cA8TomrHYEFzfmTHFxaVw.png"/></div></figure><figure class="lm ln lo lp gt ju gh gi paragraph-image"><div class="gh gi mc"><img src="../Images/0cfb3af13e24d5ba07f62751937c5cef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1088/format:webp/1*H4hXK4qNswMwJGHmmgd_3A.png"/></div></figure><p id="9b07" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">正如你所看到的，虽然我们得到了我们想要的关于标签的文本，但是它并不是标准化的。有大写或大写的字符，标点符号或链接包括在内。</p><p id="9262" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">理想情况下，我们会想把这些都去掉，这样我们就只剩下一些简单的词来进行分析。根据你想要删除多少标点符号、链接或空格，常见的如下。</p><figure class="lm ln lo lp gt ju gh gi paragraph-image"><div class="gh gi md"><img src="../Images/914415333109729606b6213dfd98c474.png" data-original-src="https://miro.medium.com/v2/resize:fit:1244/format:webp/1*qgNL0ycsHn0bDVsDq2hqXg.png"/></div></figure><figure class="lm ln lo lp gt ju gh gi paragraph-image"><div class="gh gi me"><img src="../Images/8958f4676164c70b35d58a4963d1f4af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/1*MJhdy1lGhK-8s9SNARwf0g.png"/></div></figure><p id="52b3" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">与我们之前获得的未清除文本相比，之前应用函数后的结果。这看起来更加干净整洁，这将有助于我们以后的情感分析。</p><figure class="lm ln lo lp gt ju gh gi paragraph-image"><div class="gh gi mf"><img src="../Images/aa20783c118587b69189516343b4c5f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1090/format:webp/1*ca1DZqH8--ekLn3Nj0df_Q.png"/></div></figure><p id="b40b" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">在R中使用自然语言处理时，需要记住的一件关键事情是vector必须在一个语料库列表中。因此，我们将把我们的字符向量转换成一个语料库列表。</p><figure class="lm ln lo lp gt ju gh gi paragraph-image"><div class="gh gi mg"><img src="../Images/de5f0e1a5e549bc671b9970439ea61c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1066/format:webp/1*93PE9qo8CXSfHslOLbG4Zg.png"/></div></figure><p id="d2ae" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">在我们探索数据之前的最后一步是删除停用词。尤其是在NLP中，停用词是在我们的句子或文本中不增加任何价值的词。</p><p id="c7bc" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">停用词的示例包括:“the”、“a”、“An”、“in”</p><figure class="lm ln lo lp gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi mh"><img src="../Images/dc22c59cb2fa1b1da63fef7458b54262.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zAcx52lc0TGD07T--f3qtg.png"/></div></div></figure><p id="fbc4" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">太好了！一切看起来都准备好了，在运行我们的情绪分析之前，让我们享受一下视觉化的乐趣，好吗？为此，我们将使用wordcloud库。</p><figure class="lm ln lo lp gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi mi"><img src="../Images/11e28e51663a8bf059a282fe1c801c88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5Z4jTv6E0NDSJlEa4rJMGA.png"/></div></div></figure><p id="5920" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">单词云的工作原理是显示一组不同大小和粗细的单词。字云里出现的字越大越粗；它表示它在文本数据中出现的频率较高。</p><p id="5bcb" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">您计划创建的单词云的值可以通过包含和更改以下内容进行调整:</p><ul class=""><li id="1956" class="kv kw it jz b ka kb ke kf ki kx km ky kq kz ku la lb lc ld bi translated">单词:要绘制的单词</li><li id="764a" class="kv kw it jz b ka lf ke lg ki lh km li kq lj ku la lb lc ld bi translated">频率:它们的频率</li><li id="14e4" class="kv kw it jz b ka lf ke lg ki lh km li kq lj ku la lb lc ld bi translated">最小频率:频率低于最小频率的单词不会被标绘</li><li id="750f" class="kv kw it jz b ka lf ke lg ki lh km li kq lj ku la lb lc ld bi translated">最大字数:要绘制的最大字数</li><li id="c9a7" class="kv kw it jz b ka lf ke lg ki lh km li kq lj ku la lb lc ld bi translated">random.order:随机排列单词。如果为假，它们将以递减的频率绘制</li><li id="d239" class="kv kw it jz b ka lf ke lg ki lh km li kq lj ku la lb lc ld bi translated">rot.per:旋转90度的文字比例(垂直文本)</li><li id="5605" class="kv kw it jz b ka lf ke lg ki lh km li kq lj ku la lb lc ld bi translated">颜色:颜色词从最少到最多。例如，使用colors ="black "表示单色。</li></ul><p id="853e" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">在我们的实例中，wordcloud生成了以下与covid19相关的常见单词。</p><figure class="lm ln lo lp gt ju gh gi paragraph-image"><div class="gh gi jq"><img src="../Images/02120aca79f1e60b9c3dd2433d7129c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1390/format:webp/1*rPkOILeALLzSdmWPt_c5jA.png"/></div></figure><p id="3f15" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">如果你喜欢视觉效果，wordcloud是一个令人兴奋的探索包！好了，回到我们的最后一点，就是用我们收集的数据进行情感分析。</p><h1 id="1197" class="mj mk it bd ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng bi translated">情感分析</h1><p id="fe65" class="pw-post-body-paragraph jx jy it jz b ka nh kc kd ke ni kg kh ki nj kk kl km nk ko kp kq nl ks kt ku im bi translated">情感分析是自然语言处理的应用，用于从一段文本中识别和提取主观信息。与一段文字相关的信息与情感有关，如积极、消极、快乐、恐惧等。</p><p id="5df4" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">这对于全面了解人们在这种情况下对某个特定话题谈论或发微博的内容特别有用。</p><p id="784e" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">我们将首先使用我们之前加载的syuzhet库中的<em class="lk">get _ NRC _ perspective</em>函数。之后，我们将计算每种情绪的得分，并在列表中添加一些额外的列，如下所示。</p><figure class="lm ln lo lp gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi nm"><img src="../Images/28fa6d0df69506b3bfe8326432c351f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H2qdtgp0j9SW2fWSvBzTGw.png"/></div></div></figure><p id="4a60" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">一旦完成，我们最终可以使用<em class="lk"> ggplot2 </em>库来可视化我们的情感。</p><figure class="lm ln lo lp gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi nn"><img src="../Images/bbb0baccaf8ae3e953a6562a1b386873.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QcbBjhE8DZ_zJez958yYuA.png"/></div></div></figure><p id="dc0d" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">最终情感输出</p><figure class="lm ln lo lp gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi no"><img src="../Images/992fb232761fd3cc62cc5a0df06d73fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HfFBvmBVBfnsNA7YMtc7bg.png"/></div></div></figure><p id="5736" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">从情感评分中，我们可以看到大多数关于这个特定标签covid19的推文都非常积极，这是一个很好的指标。</p><p id="a3bf" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">最后，根据上下文，情感分析可以提供有趣的见解，当作为一个整体收集和分析时，它看起来像是一个单一的文本。</p></div><div class="ab cl np nq hx nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="im in io ip iq"><p id="25ab" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">好奇的学习者？释放你在媒体上学习的全部潜力，用不到一杯咖啡的钱支持像我这样的作家。</p><div class="nw nx gp gr ny nz"><a href="https://lzpdatascience.medium.com/membership" rel="noopener follow" target="_blank"><div class="oa ab fo"><div class="ob ab oc cl cj od"><h2 class="bd iu gy z fp oe fr fs of fu fw is bi translated">通过我的推荐链接加入媒体——杰森·LZP</h2><div class="og l"><h3 class="bd b gy z fp oe fr fs of fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="oh l"><p class="bd b dl z fp oe fr fs of fu fw dk translated">lzpdatascience.medium.com</p></div></div><div class="oi l"><div class="oj l ok ol om oi on jv nz"/></div></div></a></div><p id="2e82" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">刚接触R编程，不知道从哪里开始？看看我的电子书一步一步的指南！</p><div class="nw nx gp gr ny nz"><a href="https://link.medium.com/p0QTh0HMZbb" rel="noopener follow" target="_blank"><div class="oa ab fo"><div class="ob ab oc cl cj od"><h2 class="bd iu gy z fp oe fr fs of fu fw is bi translated">数据科学入门指南(PDF /电子书</h2><div class="og l"><h3 class="bd b gy z fp oe fr fs of fu fw dk translated">有一段时间了，我希望每个人都保持安全和健康。本月初，由于封锁，我刚刚…</h3></div><div class="oh l"><p class="bd b dl z fp oe fr fs of fu fw dk translated">link.medium.com</p></div></div><div class="oi l"><div class="oo l ok ol om oi on jv nz"/></div></div></a></div></div></div>    
</body>
</html>