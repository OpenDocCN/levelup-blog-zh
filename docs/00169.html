<html>
<head>
<title>Build and Deploy a Serverless Node.js App powered by Cosmic JS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">构建并部署一个由Cosmic JS支持的无服务器Node.js应用程序</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/build-and-deploy-a-serverless-node-js-app-powered-by-cosmic-js-69f7b4f024c9?source=collection_archive---------1-----------------------#2018-07-12">https://levelup.gitconnected.com/build-and-deploy-a-serverless-node-js-app-powered-by-cosmic-js-69f7b4f024c9?source=collection_archive---------1-----------------------#2018-07-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/e188d0dfcc232c4ad5c2a5d72eb8b797.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KF7g8JkBVDtB6no6vCzaBQ.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">这篇文章最初出现在<a class="ae kc" href="https://cosmicjs.com/articles" rel="noopener ugc nofollow" target="_blank">宇宙JS开发者文章</a></figcaption></figure><p id="68be" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">无服务器应用程序开发越来越受欢迎，这在很大程度上是因为“构建应用程序，而不是基础设施”这一吸引人的主张。这种构建应用程序的方式提供了许多好处，包括不必管理服务器基础架构、无限的可伸缩性以及不必为空闲的服务器时间付费，只需在使用您的服务时付费。</p><p id="ff75" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae kc" href="https://serverless.com/company/team/" rel="noopener ugc nofollow" target="_blank">无服务器</a>平台进一步将构建无服务器应用抽象为令人愉快的开发者体验，帮助您快速启动并运行基于云功能的应用。</p><p id="745c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本教程中，我将向你展示如何在几分钟内开始使用<a class="ae kc" href="https://github.com/cosmicjs/serverless-starter" rel="noopener ugc nofollow" target="_blank">宇宙JS无服务器启动应用</a>。另外，我将向您展示将任何Node.js应用程序转换为无限可扩展的Node.js无服务器应用程序的步骤。让我们开始吧。</p><h1 id="d562" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">TL；速度三角形定位法(dead reckoning)</h1><p id="f5c8" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">在GitHub上查看宇宙JS无服务器启动器</p><h1 id="9c98" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">安装无服务器启动器</h1><p id="7dde" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">要安装Cosmic JS无服务器启动程序，请运行以下命令:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="7562" class="mn lc iq mj b gy mo mp l mq mr">npm i -g cosmic-cli<br/>cosmic login<br/>cosmic init serverless-starter</span></pre><p id="a602" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这些命令执行以下操作:<br/> 1 .安装<a class="ae kc" href="https://www.npmjs.com/package/cosmic-cli" rel="noopener ugc nofollow" target="_blank">宇宙CLI</a>T11】2。登录你的<a class="ae kc" href="https://cosmicjs.com/" rel="noopener ugc nofollow" target="_blank">宇宙JS账户</a>(你可能需要创建一个新的桶，如果是这样，它会带你完成这个过程😀)<br/> 3。下载<a class="ae kc" href="https://github.com/cosmicjs/serverless-starter" rel="noopener ugc nofollow" target="_blank">无服务器启动器</a>并将演示内容导入您选择的存储桶。</p><p id="f6cf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">下载完成后，系统会提示您使用以下命令启动应用程序:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="0899" class="mn lc iq mj b gy mo mp l mq mr">cd serverless-starter<br/>cosmic develop</span></pre><p id="4918" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您的应用程序现在应该运行在<a class="ae kc" href="http://localhost:3000/" rel="noopener ugc nofollow" target="_blank"> http://localhost:3000 </a></p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ms"><img src="../Images/be4a994a8f8d71e8b7dd34e296a03933.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*4RaAQxgdIYvprMzX.png"/></div></div></figure><h1 id="c931" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">准备起飞</h1><p id="ccfd" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">既然我们已经在本地运行了我们的应用程序，让我们准备好将它发布到AWS cloud。首先，我们需要连接我们的AWS凭证。为了在你的AWS账户上找到这些，<a class="ae kc" href="https://serverless.com/framework/docs/providers/aws/guide/credentials/" rel="noopener ugc nofollow" target="_blank"> Serverless在他们的网站</a>上有一个很棒的浏览。</p><p id="8893" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">检索到AWS密钥后，运行以下命令:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="730a" class="mn lc iq mj b gy mo mp l mq mr">export AWS_ACCESS_KEY_ID=your-aws-key-id<br/>export AWS_SECRET_ACCESS_KEY=your-aws-secret-key</span></pre><p id="4d9c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，我们已经准备好向AWS发布我们的无服务器启动器。运行以下命令登录到无服务器服务并部署我们的应用程序:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="32a5" class="mn lc iq mj b gy mo mp l mq mr">npm i -g serverless<br/>serverless login<br/>COSMIC_BUCKET=your-bucket-slug serverless deploy</span></pre><p id="da54" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">无服务器部署命令为我们完成了所有繁重的工作。它使用我们的AWS帐户在幕后执行一些魔法，然后一旦我们的应用程序可用，它将提供端点来找到部署的应用程序。添加环境变量<code class="fe mt mu mv mj b">COSMIC_BUCKET</code>，通过Cosmic JS API将我们部署的应用程序连接到我们的Cosmic JS Bucket。这使我们能够从<a class="ae kc" href="https://cosmicjs.com/cms-api" rel="noopener ugc nofollow" target="_blank">宇宙JS管理仪表板</a>管理我们新部署的无服务器应用程序的内容。</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/e2f7c32ee97f7d643709d3165dafdd9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*BbCH-q0lDkATS3uh.png"/></div></div></figure><p id="6114" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从上面的输出中，您可以看到我们可用的<strong class="kf ir">端点</strong>，这里部署了我们的无服务器应用程序。</p><h1 id="15f7" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使任何Node.js应用程序无服务器就绪</h1><p id="2162" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">所以我们运行了几个命令，把Cosmic JS无服务器启动应用推送到AWS……酷。但是，让我们更深入一点，看看我们如何转换<a class="ae kc" href="https://github.com/cosmicjs/node-starter" rel="noopener ugc nofollow" target="_blank"> Node Starter应用程序</a>，以及我们如何将大多数any Node.js应用程序转换为无服务器应用程序。</p><p id="44b2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">编辑serverless.yml </strong> <br/>要将<a class="ae kc" href="https://github.com/cosmicjs/node-starter" rel="noopener ugc nofollow" target="_blank">节点启动器</a>转换为无服务器应用程序，我们必须创建一个<a class="ae kc" href="https://github.com/cosmicjs/serverless-starter/blob/master/serverless.yml" rel="noopener ugc nofollow" target="_blank"> serverless.yml </a>文件，并设置配置以处理动态路由。这是在功能&gt;应用&gt;事件区域中完成的，以指示动态http事件。看起来是这样的:</p><figure class="me mf mg mh gt jr"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="8f01" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">编辑app.js </strong> <br/>接下来我们需要编辑app的入口点，<a class="ae kc" href="https://github.com/cosmicjs/serverless-starter/blob/master/app.js" rel="noopener ugc nofollow" target="_blank"> app.js文件</a>以导出主处理函数。我们还包含了<a class="ae kc" href="https://www.npmjs.com/package/serverless-http" rel="noopener ugc nofollow" target="_blank">无服务器-http节点模块</a>来包装我们的Express应用程序以供无服务器使用。下面是转换为无服务器的app.js文件:</p><figure class="me mf mg mh gt jr"><div class="bz fp l di"><div class="mx my l"/></div></figure><h1 id="3260" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">最后</h1><p id="6c6f" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">通过一些编辑，您可以快速将Node.js应用程序转换为无服务器应用程序。<a class="ae kc" href="https://serverless.com/" rel="noopener ugc nofollow" target="_blank">无服务器</a>平台抽象了AWS账户配置的复杂性，给你一个愉快的开发体验。添加Cosmic JS支持的内容，您就有了一个无限可扩展的无服务器应用程序，其内容通过Cosmic JS API进行管理。无需管理服务器，无需维护CMS。构建应用而非基础设施才是未来！</p><p id="1c21" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你对用Cosmic JS构建无服务器应用有任何意见或问题，<a class="ae kc" href="https://twitter.com/cosmic_js" rel="noopener ugc nofollow" target="_blank">在Twitter上联系我们</a>和<a class="ae kc" href="https://cosmicjs.com/community" rel="noopener ugc nofollow" target="_blank">在Slack上加入对话</a>。</p></div></div>    
</body>
</html>