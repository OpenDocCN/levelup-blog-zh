<html>
<head>
<title>Why You Should Care About the Context Menu</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么您应该关注上下文菜单</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/why-you-should-care-about-the-context-menu-ea020316a29f?source=collection_archive---------13-----------------------#2022-05-11">https://levelup.gitconnected.com/why-you-should-care-about-the-context-menu-ea020316a29f?source=collection_archive---------13-----------------------#2022-05-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="385d" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">了解为什么以及如何在Windows和Linux上从右键菜单中直接调用代码和程序</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/14cf112388430ec7c7b68dba71dad07a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*bqhtIoVSswIvSeMG"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">Artem Sapegin 在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><h1 id="7f53" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">什么是上下文菜单？</h1><p id="81eb" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated"><strong class="lt iu">上下文菜单</strong>就是右击时出现的菜单。</p><p id="93dd" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">选项在很大程度上根据右键单击的内容而变化——如果右键单击文件夹而不是文件，您将获得不同的选项。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ms"><img src="../Images/bfbdc52ddc1e81f8afc4b5ad2f73cff6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SrpE0tAL-lSApghKI0kyVA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">上下文菜单的示例</figcaption></figure><h1 id="790b" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">我为什么要在乎？</h1><p id="6a5e" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">大多数开发人员经常忽略上下文菜单。对于一个与导航计算机同义的组件来说，令人惊讶的是几乎没有人支持它，特别是因为它仍然是几乎每个主要操作系统的典型组件。</p><p id="e790" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">但你越深入了解，就越觉得有道理。编辑上下文菜单并非易事，因为它充斥着<strong class="lt iu">糟糕的文档和令人沮丧的设计选择</strong>。</p><p id="0655" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">然而，在某些情况下，在右键菜单中添加<strong class="lt iu">自定义条目会<strong class="lt iu">非常方便</strong>，例如让某个程序打开某些文件类型或从给定文件夹中调用某个程序。能够使用上下文菜单<strong class="lt iu">为某些类型的软件</strong>提供了<em class="mt">至关重要的功能</em>。</strong></p><h1 id="89b8" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">解决方案</h1><p id="dc5d" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">你总是可以手动创建上下文菜单条目，但是以编程的方式创建它们是一件非常痛苦的事情，尤其是当你想要发布一个程序的时候。</p><p id="f782" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">在对这个问题做了大量的研究之后，我创建了开源项目<a class="ae ky" href="https://github.com/saleguas/context_menu" rel="noopener ugc nofollow" target="_blank">上下文菜单</a>来处理这个问题。</p><div class="mu mv gp gr mw mx"><a href="https://github.com/saleguas/context_menu" rel="noopener  ugc nofollow" target="_blank"><div class="my ab fo"><div class="mz ab na cl cj nb"><h2 class="bd iu gy z fp nc fr fs nd fu fw is bi translated">GitHub-saleguas/上下文菜单:💻一个Python库，用于创建和部署跨平台的本机…</h2><div class="ne l"><h3 class="bd b gy z fp nc fr fs nd fu fw dk translated">💻一个Python库，用于创建和部署跨平台的本地上下文菜单。💻文档可从…获得</h3></div><div class="nf l"><p class="bd b dl z fp nc fr fs nd fu fw dk translated">github.com</p></div></div><div class="ng l"><div class="nh l ni nj nk ng nl ks mx"/></div></div></a></div><h2 id="e4db" class="nm la it bd lb nn no dn lf np nq dp lj ma nr ns ll me nt nu ln mi nv nw lp nx bi translated">装置</h2><p id="616f" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">如果你还没有安装Python，从官网下载并运行一个安装程序:<a class="ae ky" href="https://www.python.org/downloads/" rel="noopener ugc nofollow" target="_blank">https://www.python.org/downloads/</a></p><p id="409b" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">一旦你有了Python，<em class="mt">剩下的就超级简单</em>。只需在终端中运行以下命令来安装软件包:</p><pre class="kj kk kl km gt ny nz oa ob aw oc bi"><span id="96d0" class="nm la it nz b gy od oe l of og">python -m pip install context_menu</span></pre><p id="da4f" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">或者如果你在Linux上:</p><pre class="kj kk kl km gt ny nz oa ob aw oc bi"><span id="ee0c" class="nm la it nz b gy od oe l of og">python3 -m pip install context_menu</span></pre><p id="b995" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><em class="mt">注意:如果你在Windows上，它说命令无法识别，请确保将</em> <a class="ae ky" href="https://datatofish.com/add-python-to-windows-path/" rel="noopener ugc nofollow" target="_blank"> <em class="mt"> Python添加到你的路径</em> </a> <em class="mt">中，并以管理员身份运行命令提示符</em></p><h2 id="7a05" class="nm la it bd lb nn no dn lf np nq dp lj ma nr ns ll me nt nu ln mi nv nw lp nx bi translated">快速入门</h2><p id="a3ff" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">假设您想在右键单击文件时创建一个基本的上下文菜单条目。<strong class="lt iu">超级简单！</strong>您可以创建少至3行的条目:</p><pre class="kj kk kl km gt ny nz oa ob aw oc bi"><span id="9d23" class="nm la it nz b gy od oe l of og">from context_menu import menus</span><span id="0035" class="nm la it nz b gy oh oe l of og">fc = menus.FastCommand('Example Fast Command 1', type='FILES', command='echo Hello')<br/>fc.compile()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/76cfdea8c129954ff71a9147a4455bc6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*B4CrqO_8k74Oh-vZ.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">上面代码的结果</figcaption></figure><p id="f28a" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">您所要做的就是导入库并定义您想要的上下文条目的类型。这些选项包括:</p><ul class=""><li id="67d8" class="oj ok it lt b lu mn lx mo ma ol me om mi on mm oo op oq or bi translated">上下文菜单<em class="mt">(有更多条目的条目)</em></li><li id="acda" class="oj ok it lt b lu os lx ot ma ou me ov mi ow mm oo op oq or bi translated">快速命令<em class="mt">(启动运行脚本的单个上下文菜单条目)</em></li><li id="b03d" class="oj ok it lt b lu os lx ot ma ou me ov mi ow mm oo op oq or bi translated">可以添加到菜单中的上下文命令，用于更复杂的命令</li></ul><p id="1c10" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">你可以结合使用这些来直观地制作界面。</p><pre class="kj kk kl km gt ny nz oa ob aw oc bi"><span id="c476" class="nm la it nz b gy od oe l of og">def foo2(filenames, params):<br/>    print('foo2')<br/>    print(filenames)<br/>    input()<br/><br/>def foo3(filenames, params):<br/>    print('foo3')<br/>    print(filenames)<br/>    input()<br/><br/>if __name__ == '__main__':<br/>    from context_menu import menus<br/><br/>    cm = menus.ContextMenu('Foo menu', type='FILES')<br/>    cm2 = menus.ContextMenu('Foo Menu 2')<br/>    cm3 = menus.ContextMenu('Foo Menu 3')<br/><br/>    cm3.add_items([<br/>        menus.ContextCommand('Foo One', command='echo hello &gt; example.txt'),<br/>    ])<br/>    cm2.add_items([<br/>        menus.ContextCommand('Foo Two', python=foo2),<br/>        cm3,<br/>    ])<br/>    cm.add_items([<br/>        cm2,<br/>        menus.ContextCommand('Foo Three', python=foo3)<br/>    ])<br/><br/>    cm.compile()</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ox"><img src="../Images/866ce57823cb62e0a27d1aa020e8b2a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Q0lAe0qVVdjVOcvu.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">以上代码的结果</figcaption></figure><p id="2976" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">哦对了，我提到过<strong class="lt iu">你可以从上下文菜单中直接运行Python函数吗？</strong>在制作<code class="fe oy oz pa nz b">ContextCommand</code>时，只需使用<code class="fe oy oz pa nz b">python</code>可选参数</p><pre class="kj kk kl km gt ny nz oa ob aw oc bi"><span id="770b" class="nm la it nz b gy od oe l of og">menus.ContextCommand('Foo Three', python=exampleFunc)</span></pre><p id="f3bf" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">该库具有超强的可扩展性，使用起来非常直观，并且可以跨平台支持许多操作系统。您可以在<a class="ae ky" href="https://github.com/saleguas/context_menu" rel="noopener ugc nofollow" target="_blank">项目页面</a>上找到更多详细信息。</p><h1 id="5525" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">最后的想法</h1><p id="bbc2" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">上下文菜单是所有主流操作系统都使用的一个特殊但重要的GUI。编辑它可能是一件痛苦的事，但是有了正确的信息和工具，你可以在开发时充分利用它。</p><p id="9167" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">感谢阅读！</p></div></div>    
</body>
</html>