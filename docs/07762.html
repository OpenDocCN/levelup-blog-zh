<html>
<head>
<title>Integrating P5 Sketches Into Your React App.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将P5草图集成到React应用程序中。</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/integrating-p5-sketches-into-your-react-app-de44a8c74e91?source=collection_archive---------3-----------------------#2021-03-08">https://levelup.gitconnected.com/integrating-p5-sketches-into-your-react-app-de44a8c74e91?source=collection_archive---------3-----------------------#2021-03-08</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/0313afb0646445da81f69e6bc8aa78d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*prNp0U-WcI5y1qwPa8Y1tw.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">React+P5.js</figcaption></figure><p id="52c3" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在这篇文章中，我们将学习如何将P5草图集成到React Web应用程序中。</p><h1 id="e76a" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">开始好玩吧:)</h1><p id="2d60" class="pw-post-body-paragraph kc kd iq ke b kf ly kh ki kj lz kl km kn ma kp kq kr mb kt ku kv mc kx ky kz ij bi translated">为此，让我们使用<a class="ae md" href="https://create-react-app.dev/" rel="noopener ugc nofollow" target="_blank"> <strong class="ke ir"> create-react-app </strong> </a>搭建一个简单的React应用程序</p><p id="72df" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><code class="fe me mf mg mh b">npx create-react-app my-sketch</code></p><p id="410c" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">这将创建一个名为<strong class="ke ir"> my-sketch </strong>的新文件夹，并安装react依赖项。</p><figure class="mj mk ml mm gt jr gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/36fc3b526697433000513ce1f195bb6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:630/format:webp/1*68MoV7JaqT-pO8DEwCVq0w.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">我的-sketch文件夹应该是这样的:)</figcaption></figure><p id="b662" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">让我们使用<code class="fe me mf mg mh b">npm run start</code>来运行我们的项目</p><figure class="mj mk ml mm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mn"><img src="../Images/af8cef08f812b33ceb0ae48baed4b6f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*traqN-jabAFy-tCSpH8Dew.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">执行该命令后，您的浏览器窗口应该如下所示。</figcaption></figure></div><div class="ab cl mo mp hu mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="ij ik il im in"><p id="bb52" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">现在我们实际上已经准备好开始编码我们的P5草图了。但是我们需要一个专门的工具来帮助我们集成P5和React，为此，我们将安装<a class="ae md" href="https://github.com/Gherciu/react-p5#readme" rel="noopener ugc nofollow" target="_blank"> <strong class="ke ir"> react-p5 </strong> </a>。</p><p id="15f3" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><code class="fe me mf mg mh b">npm i react-p5</code></p><p id="800b" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">现在我们准备写一些代码。</strong>先从这个简单的草图开始；)</p><figure class="mj mk ml mm gt jr"><div class="bz fp l di"><div class="mv mw l"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">App.jsx</figcaption></figure><p id="a757" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">现在我们已经准备好画布，我们的应用程序看起来会像这样。</p><figure class="mj mk ml mm gt jr gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/24d1ef130ff031ce2539848887899185.png" data-original-src="https://miro.medium.com/v2/resize:fit:1130/format:webp/1*_czr_agX6AJPmnAWtvbhGA.png"/></div></figure><p id="6f64" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">🥳乌拉我们简单的草图完成了！</p></div><div class="ab cl mo mp hu mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="ij ik il im in"><h1 id="b716" class="la lb iq bd lc ld my lf lg lh mz lj lk ll na ln lo lp nb lr ls lt nc lv lw lx bi translated">高级用法🤓</h1><p id="4d8b" class="pw-post-body-paragraph kc kd iq ke b kf ly kh ki kj lz kl km kn ma kp kq kr mb kt ku kv mc kx ky kz ij bi translated"><a class="ae md" href="https://github.com/Gherciu/react-p5#readme" rel="noopener ugc nofollow" target="_blank"> <strong class="ke ir"> react-p5 </strong> </a>要小心使用，因为它有一些用法<em class="nd">约定/原则</em>以免出现意外情况。</p><ul class=""><li id="ee82" class="ne nf iq ke b kf kg kj kk kn ng kr nh kv ni kz nj nk nl nm bi translated">不要在<strong class="ke ir"> draw </strong>函数内部或者在draw函数<em class="nd">内部调用的函数中使用<strong class="ke ir"> setState </strong>(因为draw函数是由P5在无限循环中执行的)。</em></li><li id="cd48" class="ne nf iq ke b kf nn kj no kn np kr nq kv nr kz nj nk nl nm bi translated">如果你想存储一些东西<em class="nd">(而不是组件状态)，使用在组件外部声明的类属性<strong class="ke ir">或</strong>变量。</em></li><li id="d433" class="ne nf iq ke b kf nn kj no kn np kr nq kv nr kz nj nk nl nm bi translated">如果你需要<a class="ae md" href="https://github.com/Gherciu/react-p5#readme" rel="noopener ugc nofollow" target="_blank"> <strong class="ke ir"> react-p5 </strong> </a>在你的Sketch方法之外使用的P5实例，那么你可以从<code class="fe me mf mg mh b">window.p5</code> <em class="nd">中获取。</em></li><li id="3b1e" class="ne nf iq ke b kf nn kj no kn np kr nq kv nr kz nj nk nl nm bi translated">在<code class="fe me mf mg mh b">setup</code>中创建画布时，请始终使用<code class="fe me mf mg mh b">.parent(canvasParentRef)</code>方法。因为如果没有它，P5将会在你的组件之外渲染你的画布，这可能是一个问题，因为<a class="ae md" href="https://github.com/Gherciu/react-p5#readme" rel="noopener ugc nofollow" target="_blank"> <strong class="ke ir"> react-p5 </strong> </a>将会失去对渲染画布的完全控制。</li></ul></div><div class="ab cl mo mp hu mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="ij ik il im in"><p id="fa86" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">感谢阅读。我希望这有所帮助。</p></div></div>    
</body>
</html>