<html>
<head>
<title>FizzBuzz in Ruby — Following TDD</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Ruby中的FizzBuzz遵循TDD</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/fizzbuzz-in-ruby-following-tdd-184cf2a6b521?source=collection_archive---------14-----------------------#2020-11-16">https://levelup.gitconnected.com/fizzbuzz-in-ruby-following-tdd-184cf2a6b521?source=collection_archive---------14-----------------------#2020-11-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/faac864aba266bcbaf1437c22006cd0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*h9Pmjkfcto1VwyvD"/></div></div></figure><div class=""/><p id="58ae" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在最近的一次最后阶段的面试中，在我的技术测试即将结束时，有人问我是否知道FizzBuzz，是否可以实现一些代码来编写一个成功的FizzBuzz脚本！对我带回家的评估表明我可以编写测试，但没有显示出我的思维、逻辑以及对如何编写测试的理解。现在，我的测试时间不多了，所以他们更想看看我会如何处理这个特殊的练习。</p><p id="e056" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">FizzBuzz的概念是:</p><ol class=""><li id="d261" class="kw kx jb ka b kb kc kf kg kj ky kn kz kr la kv lb lc ld le bi translated">给你一个数字(n)。该号码将是您的号码范围内的最后一个号码。从1点开始。所以你的范围是1..名词（noun的缩写）</li><li id="04da" class="kw kx jb ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">如果一个数能被3整除，它将返回“Fizz”。</li><li id="f3ca" class="kw kx jb ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">如果一个数能被5整除，它将返回“Buzz”。</li><li id="8d0f" class="kw kx jb ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">如果一个数能被3和5整除，它将返回“FizzBuzz”。</li><li id="62b8" class="kw kx jb ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">如果它不能被任何数整除，那么它将返回这个数。</li></ol><p id="aa26" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">所以如果你给出的数字是5。它会返回— 1，2，“嘶嘶”，4“嗡嗡”。</p><p id="1160" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">虽然我没有时间完全实现测试和代码，但我认为这是一个练习编写干净测试的很好的练习。</p><p id="123b" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">那么，我们开始吧。</p></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><p id="9484" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我已经开始了用必要的文件夹和文件为此建立一个基本的Ruby项目的步骤。</p><figure class="ls lt lu lv gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi lr"><img src="../Images/babe635ace466a99e50283bfb3ac73ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-ina0wcX6RxygG0o6C0NeA.png"/></div></div></figure><p id="1710" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您的项目应该是这样的。</p><figure class="ls lt lu lv gt is gh gi paragraph-image"><div class="gh gi lw"><img src="../Images/792222ddf116ceb836ccd31aa09ad5d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:888/format:webp/1*-GvS7DBJGHpvmoI4w9FKsA.png"/></div></figure><p id="518b" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">所以现在我们有了所有必要的文件夹和文件。让我们处理下一点，TDD。</p><p id="c8ff" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">关于TDD要记住的主要事情是红色、绿色、重构。</p><p id="8690" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为某些功能编写一个测试，使其失败。它失败是因为我们没有编写通过测试的代码。您编写代码使其通过，然后进行重构，在不检查功能的情况下寻找任何代码味道。干代码。</p></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><p id="c20e" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们的第一次测试！</p><p id="4a8f" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我喜欢写下我需要做的事情，因为在Ruby中，测试几乎是这样写的，所以它可以像英语句子一样被阅读。</p><ol class=""><li id="643b" class="kw kx jb ka b kb kc kf kg kj ky kn kz kr la kv lb lc ld le bi translated">我需要一个接受用户输入的数字的类。</li></ol><p id="71c9" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">因此，我们需要编写一个测试来检查我们的实例是用一个参数(数字)实例化的。</p><p id="3258" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在我们的fizzbuzz_spec.rb中放入下面的代码:</p><figure class="ls lt lu lv gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi lr"><img src="../Images/77e1c3ce63e310d5715a033ea2e5b5ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wjYhqxmXMKkUWp8363k35Q.png"/></div></div></figure><p id="4b59" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">使用rspec运行套件。(因为这是一个小目录，我们可以只运行rspec。有很多方法可以运行一个特定的测试套件文件或者单个测试，但是不要担心这些。)</p><figure class="ls lt lu lv gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi lx"><img src="../Images/a0cd972783d7c8e8ac95d4e039c75ac4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UXDAWB549v72TUtn1yG6Vw.png"/></div></div></figure><p id="9d2e" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">太好了！失败的测试。正是我们想看到的。让我们添加代码来完成这个过程。</p><figure class="ls lt lu lv gt is gh gi paragraph-image"><div class="gh gi ly"><img src="../Images/1683dc311e35a55c8d427b71b0e7d39e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1376/format:webp/1*MymQ9oyEFMc9SJn8KRBo_A.png"/></div></figure><p id="cf26" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这是我们测试通过所要实现的所有代码。它需要一个数字(n，默认值为1)，所以测试将总是用一个数字运行。</p><p id="5b7d" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">完美，我们的第一次测试。让我们继续讨论更多的方法论。</p><figure class="ls lt lu lv gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi lz"><img src="../Images/a24e0c8824770fbd5227958af83118da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DPECLPvQYkZaobVZRVsRSg.png"/></div></div></figure><p id="e292" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您也可以将它添加到我们的初始化描述中。它主要检查FizzBuzz的新实例是用1个参数还是0个参数创建的。它应该在没有参数的情况下工作，因为我们输入了一个默认值。</p></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><p id="5516" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">所以，让我们继续我们的主要方法。我们想写一个方法:</p><ol class=""><li id="3597" class="kw kx jb ka b kb kc kf kg kj ky kn kz kr la kv lb lc ld le bi translated">如果一个数能被3整除，它将返回“Fizz”。</li><li id="95c1" class="kw kx jb ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">如果一个数能被5整除，它将返回“Buzz”。</li><li id="ae11" class="kw kx jb ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">如果一个数能被3和5整除，它将返回“FizzBuzz”。</li><li id="16bc" class="kw kx jb ka b kb lf kf lg kj lh kn li kr lj kv lb lc ld le bi translated">如果它不能被任何数整除，那么它返回这个数。</li></ol><p id="5c4a" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">因此，我们想编写一个测试，它接受实例给出的数字，并通过调用。我在上面。然后我们想把它放入一个从1开始的范围，所以1..然后，我们可以循环遍历该范围，检查每个数字，并将其与上面的语句进行比较。</p><p id="e810" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这里有很多，所以让我们在测试中分解一下。</p><p id="4713" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们不需要检查n.to_i，因为我们知道1..我将创建一个范围，如果不是，我们的测试将显示出来。我们不需要过度测试。</p><p id="f059" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">所以记住，我们希望得到失败的测试，让它们工作，然后重构。下一部分就是一个很好的例子。</p><figure class="ls lt lu lv gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi lr"><img src="../Images/6d50e24febfffe98a026506a45ff5226.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uJ-QMf8ELtq1TWDZ__bDAA.png"/></div></div></figure><p id="3a87" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这有很多代码。它在每个上下文中创建了一个新实例，然后调用我将在这个新实例上创建的方法。然后，在每次测试结束时，我检查返回的内容是否等于数组。如你所见，对于可被3和5整除的数组，这是一个长数组。</p><p id="55e9" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">自然，这一切都失败了。所以，写代码，这是我写的。</p><figure class="ls lt lu lv gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ma"><img src="../Images/960ce99193ebe82b825e4794f46cfe69.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1MXXDOCIdBQ2p1KkCCXccg.png"/></div></div></figure><p id="8285" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">完美，一切都过去了。这正是我想要的。它输出一个数组，在那里我会有另一个文件来运行我想显示给用户的代码。所以数组很好。</p><p id="3b70" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">但是看看这个。在测试中看起来有很多代码，在这个方法中有一些事情正在进行。也许，我可以整理测试套件，并重构我的方法中的一些代码，使它更整洁、更易于使用。</p><p id="08c1" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">所以，这就是我们要做的。</p></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><p id="7f64" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让这个方法的一部分在另一个方法中检查每个数字不是很好吗？这样，我就可以在将来使用该方法来检查任何其他号码！我将创建一个方法，它以一个数字作为参数，输出我的fizz/buzz/fizzbuzz。</p><figure class="ls lt lu lv gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mb"><img src="../Images/1d3de1ecbda56d7d13a29e85ec837cb8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n7HxHccpi_72tQsCreNzOw.png"/></div></div></figure><p id="f723" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">所以在这里，这是测试一个方法，它接受一个没有编号的新实例。然后我给它传递一个参数为3的方法。这样，我可以编写一个测试，简单地检查特定数字的输出，而不是创建一个包含一系列数字的全部预期输出的数组。</p><p id="4e70" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这听起来可能有点令人困惑。但是我们想要的是一个简单的方法，它接受一个数字，并对照我们上一个方法中的fizzbuzz方法进行检查。</p><figure class="ls lt lu lv gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mc"><img src="../Images/85849948a0d99838b7a47f4c3d4d059e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kcVKHmvn0Q1m_w7HKe4V_Q.png"/></div></div></figure><p id="6519" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这是我们的方法。漂亮整洁。</p><p id="37bc" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这个方法需要一个数字。因此，让我们创建一个方法，简单地获取我们的输入数字，将它放入一个范围，并每次用我们的新方法遍历它。</p><figure class="ls lt lu lv gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi md"><img src="../Images/ff2d755a39e461f91e06e9d499a392e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8rnXfWof9IMTRt1KBArQEg.png"/></div></div></figure><p id="9d77" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">太神奇了。如果我们想测试它，我们可以简单地测试这个方法的输出，然后写一个数组。但是我们已经知道fizzbuzz_output方法正确地测试了每个数字，所以我就不做了。</p><p id="c75f" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">好，现在为我们的runner.rb文件添加以下内容:</p><figure class="ls lt lu lv gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi me"><img src="../Images/e7229394150297bf7882091f6ebf8674.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qgW8pNSHdoS-3kLiFonP8Q.png"/></div></div></figure><p id="5832" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后，当你放置ruby runner.rb 15时，你应该得到:</p><figure class="ls lt lu lv gt is gh gi paragraph-image"><div class="gh gi mf"><img src="../Images/4a546cc6e535cdafd8a1976f6c5dedf5.png" data-original-src="https://miro.medium.com/v2/resize:fit:940/format:webp/1*dRfQ2EjMQGWMRsNWEm-EaA.png"/></div></figure><p id="3e0a" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">以及我们的rspec测试套件。</p><figure class="ls lt lu lv gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi lx"><img src="../Images/3005118170b02b8a5ce92c5a6373722f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iCa9Z8JT_aW5YJ8UyW61LQ.png"/></div></div></figure><p id="9145" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我的FizzBuzz旅行结束了。请随意指出你要改变的任何东西，我对此相对较新，如果你有进一步的建议，我会很高兴。</p></div></div>    
</body>
</html>