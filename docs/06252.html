<html>
<head>
<title>Android RecyclerView Animations in Kotlin</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Kotlin中的Android RecyclerView动画</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/android-recyclerview-animations-in-kotlin-1e323ffd39be?source=collection_archive---------1-----------------------#2020-11-09">https://levelup.gitconnected.com/android-recyclerview-animations-in-kotlin-1e323ffd39be?source=collection_archive---------1-----------------------#2020-11-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/47005c1609516692b274b9c87bb05cfc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qbX1ymKywe_aF4xpIeOfRw.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">图片取自<a class="ae kc" href="https://101android.com/recyclerview-the-easiest-approach-weekly-series-day1/" rel="noopener ugc nofollow" target="_blank">101android.com</a></figcaption></figure><p id="0b8e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对app进行编码后，功能性对于一个好看的现代app来说是不够的。我认为每个人都接受今天，应用程序应该包括用户界面/UX，过渡动画，当然还有客户端。今天，我将尝试解释其中一个方面，即回收查看项目的动画。我将使用Android Studio和Kotlin。玩得开心:)</p><h1 id="df2e" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">让我们从基础开始</h1><p id="d966" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">首先，你需要创建一个anim文件夹来存储你的动画文件。</p><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div class="gh gi me"><img src="../Images/37cdbf3bc4952f650b2fc44b0aeffe5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1224/format:webp/1*e3qaxSD1j3BxECiRA-Axzg.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">res(右键)-&gt;新建-&gt;Android资源目录</figcaption></figure><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mj"><img src="../Images/5a2eed13bd171d949c5f8ee27cf787a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0EWKrRUI8K7oYQ906QOGlA.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">我们设定了“动画”这个名字</figcaption></figure><p id="4e1c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">之后右击anim文件夹，创建一个<em class="mk">“动画资源文件”</em>。</p><h1 id="9254" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">属性的解释</h1><p id="a859" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">当你创建<em class="mk">动画资源文件</em>时，你会在其中看到一些属性。我会试着解释它们，之后，我们会创作我们的动画。</p><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div class="gh gi ml"><img src="../Images/c8639f7eda11f3e64e83a0324ecc4351.png" data-original-src="https://miro.medium.com/v2/resize:fit:656/format:webp/1*uCW9s7HRlM_ItEZOXugyLQ.png"/></div></figure><h2 id="b15f" class="mm lc iq bd ld mn mo dn lh mp mq dp ll ko mr ms lp ks mt mu lt kw mv mw lx mx bi translated">-翻译</h2><p id="30c1" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">平移主要用于移动x轴和y轴上的项目。它有如下一些属性:</p><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div class="gh gi my"><img src="../Images/cb48f17dc5da70d27a16412a424585dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:440/format:webp/1*CcfS1h-0Ao7upSvc5xHn4w.png"/></div></figure><p id="c1fc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mk"> FromXDelta </em>和<em class="mk"> fromYDelta </em>代表物品将来自哪个方向。如果您为<em class="mk">“fromXDelta”</em>设置一个正值，它将来自屏幕的右侧。<em class="mk"> ToDelta </em>属性表示项目将停止的位置。通常，我使用0%的<em class="mk"> toDelta </em>属性。因为即使你设置了“-100%”，当动画持续时间结束时，该项目将返回到屏幕上，这看起来不太好<em class="mk">。</em>最后，<em class="mk">“时长”</em>是动画时间。让我们来看一个带有“仅平移”属性的动画。</p><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/a653b79b92be6793a13792170cc40134.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/1*E4UJayj4IxM60uUJWtm_pQ.gif"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">只有动漫</figcaption></figure><h2 id="5215" class="mm lc iq bd ld mn mo dn lh mp mq dp ll ko mr ms lp ks mt mu lt kw mv mw lx mx bi translated"><em class="na">-阿尔法</em></h2><p id="35b5" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">Alpha用于确定不透明度。该属性主要用于淡入/淡出动画。属性如下:</p><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/fe0a641d87a53e3247b921e25309e214.png" data-original-src="https://miro.medium.com/v2/resize:fit:400/format:webp/1*haxXOPgxrXkuINryovlc9g.png"/></div></figure><p id="9b10" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">淡入和淡出动画可以使用fromAlpha和toAlpha属性来实现。如果你使用上面的值，你将获得这个动画。</p><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/2917efa8dda6159ac94292857572b317.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/1*mwfbfDU6IySJ9yZpg8bBgg.gif"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">只有动漫</figcaption></figure></div><div class="ab cl nc nd hu ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="ij ik il im in"><h2 id="30b1" class="mm lc iq bd ld mn mo dn lh mp mq dp ll ko mr ms lp ks mt mu lt kw mv mw lx mx bi translated">-旋转</h2><p id="46c7" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">从名称可以理解，Rotate属性用于回收器视图项目的旋转动画。</p><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/007e8fa2d66419187f7b5c99dde83905.png" data-original-src="https://miro.medium.com/v2/resize:fit:480/format:webp/1*LtmbFMHp_SPrt-x5OCHTtA.png"/></div></figure><p id="88d8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这些属性在开始时也让我感到困惑，因此我会尽可能清晰地解释它们。FromDegrees属性表示项目将来自哪个级别。想象一下度数，现在看看图像。物品来自270度，顺时针旋转。透视属性类似于根据值固定项目。例如，如果您设置<em class="mk"> pivotX:100% </em>和<em class="mk"> pivotY:0% </em>和fromDegrees: 90，它会将项目锁定在右上角并相应地旋转它。动画可以在下面的gif中看到。</p><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/d93c04a22e9cebc7489eaf780bacc56f.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/1*A5cRPgQ61g3bYTv2CRW3rQ.gif"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">只有动漫</figcaption></figure><h2 id="6ef3" class="mm lc iq bd ld mn mo dn lh mp mq dp ll ko mr ms lp ks mt mu lt kw mv mw lx mx bi translated">-规模</h2><p id="2f91" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">Scale属性用于放大和缩小项目。这些属性比其他属性更多，所以让我们深入了解一下。</p><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/af1b191474267fce5182aca256896e5e.png" data-original-src="https://miro.medium.com/v2/resize:fit:458/format:webp/1*DmlGCwdBNVc0s5lL6H5O0A.png"/></div></figure><p id="ea3d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">枢轴属性在这里有一点不同的功能。两个枢轴的50%值表示项目的中心。我这样设置是因为我想从中间开始放大。<em class="mk"> FromScale </em>和<em class="mk"> ToScale </em>属性用于缩放项目。1表示原始尺寸，0表示起始尺寸。这些属性的输出如下所示。</p><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/b41b92a18871c2e0c640946ae8ce220d.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/1*euc7pgHXgR7C1U-dupI_Iw.gif"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><Scale/>只有动漫</figcaption></figure><h2 id="dbfc" class="mm lc iq bd ld mn mo dn lh mp mq dp ll ko mr ms lp ks mt mu lt kw mv mw lx mx bi translated">-设置</h2><pre class="mf mg mh mi gt nl nm nn no aw np bi"><span id="6cc1" class="mm lc iq nm b gy nq nr l ns nt">holder.shopDetailParent.<em class="mk">animation </em>=<br/>    AnimationUtils.loadAnimation(holder.itemView.<em class="mk">context</em>, R.anim.<em class="mk">example_anims</em>)</span></pre><p id="a113" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">首先，您需要在适配器中定义回收器视图项的视图，您希望将该视图动画化。之后，你可以使用上面<em class="mk"> OnBindViewHolder </em>上的代码片段添加你的动画。我想制作整个项目的动画，所以我在适配器中定义了我的<em class="mk"> shopDetailParent </em>卡片视图。<em class="mk">“example _ anims”</em>是我的anim文件所以，你需要把自己的文件名写到代码里。</p></div><div class="ab cl nc nd hu ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="ij ik il im in"><h1 id="0352" class="lb lc iq bd ld le nu lg lh li nv lk ll lm nw lo lp lq nx ls lt lu ny lw lx ly bi translated">一些漂亮的动画例子</h1><pre class="mf mg mh mi gt nl nm nn no aw np bi"><span id="8977" class="mm lc iq nm b gy nq nr l ns nt">//Animation One//<br/>&lt;translate<br/>    android:fromYDelta="100%"<br/>    android:toYDelta="0%"<br/>    android:duration="500"<br/>    /&gt;<br/><br/>&lt;alpha<br/>    android:fromAlpha="0.0"<br/>    android:toAlpha="1.0"<br/>    android:duration="500"/&gt;<br/><br/>&lt;scale<br/>    android:pivotX="50%"<br/>    android:pivotY="50%"<br/>    android:fromXScale="0.5"<br/>    android:fromYScale="0.5"<br/>    android:toXScale="1"<br/>    android:toYScale="1"<br/>    android:duration="500"<br/><br/>    /&gt;</span></pre><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/5d1e40ea4d704653c3f5eb712d239e96.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/1*WWogKFEfdJad4VXbVC-Pfw.gif"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">动画一</figcaption></figure><pre class="mf mg mh mi gt nl nm nn no aw np bi"><span id="c3f4" class="mm lc iq nm b gy nq nr l ns nt">//Animation Two//<br/>&lt;translate<br/>    android:fromXDelta="200%"<br/>    android:toYDelta="0%"<br/>    android:duration="500"<br/>    /&gt;<br/><br/>&lt;scale<br/>    android:pivotX="50%"<br/>    android:pivotY="50%"<br/>    android:fromXScale="0"<br/>    android:fromYScale="0"<br/>    android:toXScale="1"<br/>    android:toYScale="1"<br/>    android:duration="500"<br/><br/>    /&gt;</span></pre><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/f32d76d0def3f37844905b73b94b824f.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/1*Tfph1S9Wrn9n7oKQ5Q1ang.gif"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">动画二</figcaption></figure><pre class="mf mg mh mi gt nl nm nn no aw np bi"><span id="522c" class="mm lc iq nm b gy nq nr l ns nt">//Animation Three//<br/>&lt;translate<br/>    android:fromXDelta="200%"<br/>    android:toYDelta="0%"<br/>    android:duration="500"<br/>    /&gt;<br/>&lt;alpha<br/>    android:fromAlpha="0.0"<br/>    android:toAlpha="3.0"<br/>    android:duration="2500"/&gt;</span></pre><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/a88ae5319d44dd1a909d18a363611729.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/1*aGGuCHTWQ73cpbADwuOwaA.gif"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">动画三</figcaption></figure><h1 id="2693" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">插值器</h1><p id="3294" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们有最后一个属性是插值器。插值器基本上是动画的行为。通常动画在线性插值器上工作。该插值器在动画的每一帧上均匀地移动视图。(从现在开始所有的图都取自<a class="ae kc" href="https://jebware.com/interp/android-animation-interpolators.html" rel="noopener ugc nofollow" target="_blank">jebware.com</a>，你可以去网站上试试不同因子的插值器)它的图是这样的:</p><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/75e6eafa68f439a9b049e744991e7fb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:750/format:webp/1*L7hmdS8JZZjqodAZyQDYjQ.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">线性插值器</figcaption></figure><p id="41ad" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但是其他插值器有不同的线。我将向你展示如何添加插值器，并展示几个例子，然后你可以自己尝试。你所要做的就是将这一行添加到你的<em class="mk">集合中。</em></p><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/27af2a44be240f03009094e82bf41693.png" data-original-src="https://miro.medium.com/v2/resize:fit:914/format:webp/1*kpNRL8j2YTvVTP5V3KdkGQ.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">减速插值器将使项目从屏幕右外侧进入，并在它们接近最终位置时减慢它们的速度。</figcaption></figure><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/1132cf58c793d342d594454b100879b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/1*ptiaOJCgpMogPuQ9YTxmGQ.gif"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">减速插补器</figcaption></figure><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/0ab9c9a37fd1cdb88b8845c8cea9a4e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/1*hZ-2d9AsiM12Kba5xgc0Fg.gif"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">弹跳插值器</figcaption></figure><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/89402f144ec8595674c0da019c044f30.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/1*JCTofezT1MpmsZFFNKnmJA.gif"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">过冲插值器</figcaption></figure><p id="c205" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">来自<a class="ae kc" href="https://developer.android.com/guide/topics/resources/animation-resource" rel="noopener ugc nofollow" target="_blank"> developer.android </a>的插值器列表，但是你也可以编写自定义插值器。</p><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ob"><img src="../Images/a19faf3af0be2e6e2d91e510e2012206.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*htj27lmKmpwBWQhY5_-ZVg.png"/></div></div></figure><p id="f8a8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">感谢您阅读我的文章。我试图解释我所知道的。希望对你理解和应用recycler view的精美动画有所帮助:)</p><figure class="mf mg mh mi gt jr"><div class="bz fp l di"><div class="oc od l"/></div></figure></div></div>    
</body>
</html>