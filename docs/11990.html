<html>
<head>
<title>5 Hidden C# Features That Will Actually Boost Your Productivity</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">5个隐藏的C#特性，它们将真正提高你的工作效率</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/5-hidden-c-features-that-will-actually-boost-your-productivity-d192f7d66b27?source=collection_archive---------4-----------------------#2022-05-05">https://levelup.gitconnected.com/5-hidden-c-features-that-will-actually-boost-your-productivity-d192f7d66b27?source=collection_archive---------4-----------------------#2022-05-05</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/568a487f5458eda77e62e75b1ca79028.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S8XY_mtIibYXv49UIRCcPg.jpeg"/></div></div></figure><p id="2283" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果你想学习一门新的语言，从基础开始。熟悉代码语法，代码文法，如何写语句(if，for，switch，…)，类，接口。</p><p id="11e9" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">但是每一种编程语言都有自己的一套“隐藏”特性，小的快捷方式和酷的操作符，可以节省你的时间和代码行。您将写出更好、更简洁、可读性更强的代码。</p><p id="bf97" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在本文中，我将向您展示C#的5个您可能不知道的特性。所以我们不要再浪费时间了，从第一点开始。</p><h2 id="2367" class="kz la it bd lb lc ld dn le lf lg dp lh km li lj lk kq ll lm ln ku lo lp lq lr bi translated">1)行内"<code class="fe ls lt lu lv b">using"</code>语句</h2><figure class="lx ly lz ma gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi lw"><img src="../Images/63700eec4c0aea6b88d35ea0bce5f172.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aSFCoyyBlnoDaw2TcQuEpg.png"/></div></div></figure><p id="ffa9" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果您不熟悉<code class="fe ls lt lu lv b">using</code>语句，它定义了一个作用域，在该作用域的末尾将释放一个对象。这在安全执行I/O操作时特别有用，例如:</p><pre class="lx ly lz ma gt mb lv mc md aw me bi"><span id="408d" class="kz la it lv b gy mf mg l mh mi">using (var connection = new SqlConnection(connectionString)<br/>{<br/>	connection.Open();<br/>	[....]<br/>}</span><span id="2bd9" class="kz la it lv b gy mj mg l mh mi">//Here, the connection is already disposed for you</span></pre><p id="67cb" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">C# 8.0引入了一种新的编写<code class="fe ls lt lu lv b">using</code>语句的方式。基本上，不用打开一个块，只需在稍后要处理的对象之前使用相同的关键字<code class="fe ls lt lu lv b">using</code>。</p><pre class="lx ly lz ma gt mb lv mc md aw me bi"><span id="f468" class="kz la it lv b gy mf mg l mh mi">using var connection = new SqlConnection(connectionString)<br/>connection.Open();<br/>	<br/>[....]</span></pre><p id="cc9d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">不再有括号和缩进；代码现在可读性更好了。内联<code class="fe ls lt lu lv b">using</code>的生存期将延长到声明它的范围的末尾。例如，如果您在函数中使用连接，当函数终止时，它将被释放。上面的示例代码与此相同:</p><pre class="lx ly lz ma gt mb lv mc md aw me bi"><span id="64af" class="kz la it lv b gy mf mg l mh mi">var connection = new SqlConnection(connectionString)<br/>connection.Open();<br/>	<br/>[....]</span><span id="0f82" class="kz la it lv b gy mj mg l mh mi">connection.Close();<br/>return;</span></pre><h2 id="26f5" class="kz la it bd lb lc ld dn le lf lg dp lh km li lj lk kq ll lm ln ku lo lp lq lr bi translated">2)速记“开关”语句</h2><figure class="lx ly lz ma gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi lw"><img src="../Images/d16efc22c42b6098bc245fc79f634c5e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3b99U5sI3Zo_HpzUmO1Z9w.png"/></div></div></figure><p id="dc2c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我想你们都熟悉switch语句。您可以使用它来编写复杂的条件和分支操作</p><pre class="lx ly lz ma gt mb lv mc md aw me bi"><span id="e2f9" class="kz la it lv b gy mf mg l mh mi">switch (light.Status)<br/>{<br/>	case ON:<br/>		text = "Light is on";<br/>		break;<br/>	case OFF:<br/>		text = "Light is off";<br/>		break;<br/>	default:<br/>		text = "Unknown status";<br/>		break;<br/>}</span></pre><p id="f411" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">但是在大多数情况下，您将使用switch语句将一个值映射到另一个值。这就是为什么从C# 8.0开始，您可以使用<code class="fe ls lt lu lv b">switch expression</code>来计算候选表达式列表中的单个表达式。下面是同样的例子，用<code class="fe ls lt lu lv b">switch expression</code></p><pre class="lx ly lz ma gt mb lv mc md aw me bi"><span id="e06e" class="kz la it lv b gy mf mg l mh mi">text = light.Status switch<br/>{<br/>	ON =&gt; "Light is on",<br/>	OFF =&gt; "Light is off",<br/>	_ =&gt; "Unknown status"<br/>}</span></pre><p id="af41" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">你刚刚写了同样的东西，但是用了一半的行，并且用了一种更易读的方式。</p><h2 id="8a2c" class="kz la it bd lb lc ld dn le lf lg dp lh km li lj lk kq ll lm ln ku lo lp lq lr bi translated">3)零凝聚算子</h2><figure class="lx ly lz ma gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi lw"><img src="../Images/174496220657e80eb8acead9593c50be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nY7lU_sag-uMkmC55bnykg.png"/></div></div></figure><p id="be12" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">当处理可空类型时，在对变量做任何事情之前总是检查变量是否为空是很重要的。我相信大多数人，包括我自己，都依赖if语句来实现这个目标:</p><pre class="lx ly lz ma gt mb lv mc md aw me bi"><span id="1d0e" class="kz la it lv b gy mf mg l mh mi">variable = MightReturnNull();</span><span id="0173" class="kz la it lv b gy mj mg l mh mi">if(variable == null)<br/>{<br/>    variable = "default";<br/>}</span></pre><p id="f2f7" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在有一个更好的方法，如果不是<code class="fe ls lt lu lv b">null</code>，那么<code class="fe ls lt lu lv b">??</code>操作符返回其左边操作数的值；否则，它计算右边的操作数并返回结果。让我们用行动来展示这一点:</p><pre class="lx ly lz ma gt mb lv mc md aw me bi"><span id="b9eb" class="kz la it lv b gy mf mg l mh mi">var variable = MightReturnNull() ?? "default";</span></pre><p id="5a64" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">简单对吗？同样的事情，只有一行代码。</p><p id="ba53" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">甚至还有另一种操作符可以处理可空类型，即空合并赋值操作符。从C# 8.0开始，您可以使用<code class="fe ls lt lu lv b">??=</code>操作符来替换表单的代码</p><pre class="lx ly lz ma gt mb lv mc md aw me bi"><span id="59c2" class="kz la it lv b gy mf mg l mh mi">if (variable is null)<br/>{<br/>    variable = expression;<br/>}</span></pre><p id="a78e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">与以下内容</p><pre class="lx ly lz ma gt mb lv mc md aw me bi"><span id="0484" class="kz la it lv b gy mf mg l mh mi">variable ??= expression;</span></pre><h2 id="c56e" class="kz la it bd lb lc ld dn le lf lg dp lh km li lj lk kq ll lm ln ku lo lp lq lr bi translated">4)速记对象初始化</h2><figure class="lx ly lz ma gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi lw"><img src="../Images/ab8653fb32647162408df73355ddaee2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JSTGBdVJsiAGfxFvSdJ5dg.png"/></div></div></figure><p id="89e3" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在C#中，有两种标准的方法来声明变量。您可以编写值的类型，或者让编译器根据正确的赋值自动分配正确的类型。</p><pre class="lx ly lz ma gt mb lv mc md aw me bi"><span id="b205" class="kz la it lv b gy mf mg l mh mi">Car myCar = new Car();<br/>var myCar = new Car();</span></pre><p id="af60" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">但是还有第三种声明变量的方法，使用简短的<code class="fe ls lt lu lv b">new</code>关键字</p><pre class="lx ly lz ma gt mb lv mc md aw me bi"><span id="48ce" class="kz la it lv b gy mf mg l mh mi">Car myCar = new();</span></pre><h2 id="186a" class="kz la it bd lb lc ld dn le lf lg dp lh km li lj lk kq ll lm ln ku lo lp lq lr bi translated">5)文件范围的命名空间</h2><figure class="lx ly lz ma gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi lw"><img src="../Images/3c2abbf81139f58809498acdb7536c3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vM4HnDhUANuRgdBBSD4gpw.png"/></div></div></figure><p id="bff5" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这是我最喜欢的，因为它减少了整个文件的代码缩进。我仍然很惊讶为什么微软之前没有添加这个功能，因为许多语言从一开始就有这个功能(比如Java)。使用文件范围的命名空间，您可以替换以下形式的代码</p><pre class="lx ly lz ma gt mb lv mc md aw me bi"><span id="1a5a" class="kz la it lv b gy mf mg l mh mi">namespace MyNamespace<br/>{<br/>    class MyClass<br/>    {</span><span id="3bd5" class="kz la it lv b gy mj mg l mh mi">public void MyMethod()<br/>        {<br/>  <br/>        }</span><span id="0b60" class="kz la it lv b gy mj mg l mh mi">}<br/>}</span></pre><p id="6936" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">与以下内容</p><pre class="lx ly lz ma gt mb lv mc md aw me bi"><span id="2241" class="kz la it lv b gy mf mg l mh mi">namespace MyNameSpace;</span><span id="0cfc" class="kz la it lv b gy mj mg l mh mi">class MyClass<br/>{<br/>    public void MyMethod()<br/>    {<br/> <br/>    }<br/>}</span></pre><p id="f275" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这样更好，你不需要缩进大部分代码；更清晰，仪式感更少。</p><h2 id="1f59" class="kz la it bd lb lc ld dn le lf lg dp lh km li lj lk kq ll lm ln ku lo lp lq lr bi translated">结论</h2><p id="0344" class="pw-post-body-paragraph kb kc it kd b ke mk kg kh ki ml kk kl km mm ko kp kq mn ks kt ku mo kw kx ky im bi translated">在本文中，我介绍了C#最隐藏的五大特性。有了这些小技巧，C#变得更加有用了。代码现在更加清晰、易读和简洁。尽管微软在实现新功能(比如文件范围的名称空间)方面非常缓慢，但我们现在仍然可以从中受益。</p><p id="bca7" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">你已经知道所有这些特征了吗？请在评论中告诉我。</p></div></div>    
</body>
</html>