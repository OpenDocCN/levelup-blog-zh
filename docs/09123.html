<html>
<head>
<title>Sorting Workout in Golang</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Golang中的分类训练</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/sorting-workout-in-golang-5b49cbe9154f?source=collection_archive---------3-----------------------#2021-07-08">https://levelup.gitconnected.com/sorting-workout-in-golang-5b49cbe9154f?source=collection_archive---------3-----------------------#2021-07-08</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="85b8" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">对数据列表进行排序是最常见的任务之一，您可能会发现自己经常编写代码。本文探讨了Golang中的一些技术，这些技术应该可以简化任何数据集合的排序。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/252c27c55359096be02b11c3fd1cd04d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zY1Tk_4mJLQ4UFX1gqBG9A.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">詹姆斯·奥尔在<a class="ae kv" href="https://unsplash.com/s/photos/numbers?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="0690" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所有编程语言通常都提供现成的工具来对集合进行排序，因为在解决编码任务时，这一任务非常普遍。Go与它提供的用于执行所有可能的排序操作的排序包没有什么不同。</p><p id="8ba4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">注意:<em class="ls"> </em> </strong>在你进一步深入之前，我期望你对go语法和原语类型都有一个初级的了解，以理解源代码。</p><p id="f56f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Go有标准的<code class="fe lt lu lv lw b">sort</code>包来进行排序。排序功能就地对数据进行排序。对于基本的数据类型，我们有内置的函数，比如<code class="fe lt lu lv lw b">sort.Ints</code>和<code class="fe lt lu lv lw b">sort.Strings</code>。对于更复杂的类型，我们需要通过实现<code class="fe lt lu lv lw b">sort.Interface</code>来创建我们自己的排序。Golang的<code class="fe lt lu lv lw b">sort</code>这个包实现了对内置类型和用户自定义类型的排序。</p><h2 id="2160" class="lx ly iq bd lz ma mb dn mc md me dp mf lf mg mh mi lj mj mk ml ln mm mn mo mp bi translated">对整数集合进行排序</h2><p id="87eb" class="pw-post-body-paragraph kw kx iq ky b kz mq jr lb lc mr ju le lf ms lh li lj mt ll lm ln mu lp lq lr ij bi translated"><code class="fe lt lu lv lw b"><strong class="ky ir">sort.Ints</strong></code> <strong class="ky ir"> </strong>函数对一部分整数进行升序排序。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mv mw l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">代码清单1.1 — <a class="ae kv" href="https://play.golang.org/p/jhPEyIVt21k" rel="noopener ugc nofollow" target="_blank">点击运行</a></figcaption></figure><p id="3c24" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe lt lu lv lw b"><strong class="ky ir">sort.IntsAreSorted</strong></code>该方法还用于检查整数切片是否处于其排序形式。</p><h2 id="8250" class="lx ly iq bd lz ma mb dn mc md me dp mf lf mg mh mi lj mj mk ml ln mm mn mo mp bi translated">对字符串集合进行排序</h2><p id="bb2e" class="pw-post-body-paragraph kw kx iq ky b kz mq jr lb lc mr ju le lf ms lh li lj mt ll lm ln mu lp lq lr ij bi translated"><code class="fe lt lu lv lw b"><strong class="ky ir">sort.Strings</strong></code> <strong class="ky ir"> </strong>函数对一段字符串进行升序排序。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mv mw l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">代码清单1.2 — <a class="ae kv" href="https://play.golang.org/p/NCqPT7EVF3z" rel="noopener ugc nofollow" target="_blank">点击运行</a></figcaption></figure><p id="0d8d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe lt lu lv lw b"><strong class="ky ir">sort.StringsAreSorted</strong></code>该方法还用于检查一个字符串片段是否处于其排序形式。</p><h2 id="17fd" class="lx ly iq bd lz ma mb dn mc md me dp mf lf mg mh mi lj mj mk ml ln mm mn mo mp bi translated">对浮点集合进行排序</h2><p id="3fed" class="pw-post-body-paragraph kw kx iq ky b kz mq jr lb lc mr ju le lf ms lh li lj mt ll lm ln mu lp lq lr ij bi translated"><code class="fe lt lu lv lw b"><strong class="ky ir">sort.Float64s</strong></code> <strong class="ky ir"> </strong>函数对一片浮点值进行升序排序。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mv mw l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">代码清单1.3 — <a class="ae kv" href="https://play.golang.org/p/YE38WrThlND" rel="noopener ugc nofollow" target="_blank">点击运行</a></figcaption></figure><p id="9c10" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe lt lu lv lw b"><strong class="ky ir">math.NaN()</strong></code>返回一个IEEE 754“非数字”值。<code class="fe lt lu lv lw b"><strong class="ky ir">Float64sAreSorted()</strong></code>报告切片x是否按升序排序，非数字(NaN)值在任何其他值之前。</p><h2 id="d287" class="lx ly iq bd lz ma mb dn mc md me dp mf lf mg mh mi lj mj mk ml ln mm mn mo mp bi translated">使用匿名函数对结构集合进行排序</h2><p id="664a" class="pw-post-body-paragraph kw kx iq ky b kz mq jr lb lc mr ju le lf ms lh li lj mt ll lm ln mu lp lq lr ij bi translated">要对Golang中的一部分结构进行排序，需要使用一个<code class="fe lt lu lv lw b"><strong class="ky ir"><em class="ls">less</em></strong></code>函数以及<code class="fe lt lu lv lw b"><strong class="ky ir"><em class="ls">sort.Slice</em></strong></code>或<code class="fe lt lu lv lw b"><strong class="ky ir"><em class="ls">sort.SliceStable</em></strong></code>方法。您需要提供<code class="fe lt lu lv lw b">less</code>函数的实现来比较结构字段。下面是我们如何根据姓名和年龄对一部分人进行排序的方法，例如:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mv mw l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">代码清单1.4 — <a class="ae kv" href="https://play.golang.org/p/_rYx_01GRmQ" rel="noopener ugc nofollow" target="_blank">点击运行</a></figcaption></figure><p id="55fa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从<code class="fe lt lu lv lw b"><em class="ls">less</em></code>函数返回<code class="fe lt lu lv lw b"><em class="ls">true</em></code>将导致索引<code class="fe lt lu lv lw b"><em class="ls">i</em></code>处的元素被排序到比索引<code class="fe lt lu lv lw b"><em class="ls">j</em></code>更低的位置(索引<code class="fe lt lu lv lw b"><em class="ls">i</em></code>处的元素将出现在排序后的片的最前面)。否则，如果返回<code class="fe lt lu lv lw b"><em class="ls">false</em></code>，索引<code class="fe lt lu lv lw b"><em class="ls">j</em></code>处的元素将首先出现。</p><p id="98eb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe lt lu lv lw b"><em class="ls">sort.Slice</em></code>和<code class="fe lt lu lv lw b"><em class="ls">sort.SliceStable</em></code>的区别在于，后者会保持相等元素的原始顺序，而前者可能不会。</p><h2 id="7fa3" class="lx ly iq bd lz ma mb dn mc md me dp mf lf mg mh mi lj mj mk ml ln mm mn mo mp bi translated">使用Len、Less和Swap对自定义数据结构进行排序</h2><p id="16ce" class="pw-post-body-paragraph kw kx iq ky b kz mq jr lb lc mr ju le lf ms lh li lj mt ll lm ln mu lp lq lr ij bi translated">对于更复杂的类型，我们需要通过实现<code class="fe lt lu lv lw b">sort.Interface</code>来创建我们自己的排序:</p><pre class="kg kh ki kj gt mx lw my mz aw na bi"><span id="de57" class="lx ly iq lw b gy nb nc l nd ne">type Interface interface {<br/>    Len() int<br/>    Less(i, j int) bool<br/>    Swap(i, j int)<br/>}</span></pre><p id="b73e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面的例子说明了这种类型的实现。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mv mw l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">代码清单1.4 — <a class="ae kv" href="https://play.golang.org/p/7Y91NtIbrsK" rel="noopener ugc nofollow" target="_blank">点击运行</a></figcaption></figure><blockquote class="nf ng nh"><p id="d6a1" class="kw kx ls ky b kz la jr lb lc ld ju le ni lg lh li nj lk ll lm nk lo lp lq lr ij bi translated"><strong class="ky ir">原列表</strong>——[" rust-lang "、" golang "、" java "、" c "、" c++ "、" dot-net "、" perl"]</p><p id="7fef" class="kw kx ls ky b kz la jr lb lc ld ju le ni lg lh li nj lk ll lm nk lo lp lq lr ij bi translated"><strong class="ky ir">排序列表</strong>——[" c "、" c++ "、" perl "、" java "、" golang "、" dot-net "、" rust-lang"]</p></blockquote><p id="a24b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">定义了一个新的类型LengthBasedStrings来保存字符串列表。这种类型实现了所需的接口，因此很容易与<em class="ls"> sort一起使用。</em>排序()方法。Sort()方法的定义是</p><p id="a3bc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe lt lu lv lw b"><strong class="ky ir">func sort.Sort(data sort.Interface)</strong></code></p><h2 id="9d7e" class="lx ly iq bd lz ma mb dn mc md me dp mf lf mg mh mi lj mj mk ml ln mm mn mo mp bi translated">排序映射键或值</h2><p id="56a1" class="pw-post-body-paragraph kw kx iq ky b kz mq jr lb lc mr ju le lf ms lh li lj mt ll lm ln mu lp lq lr ij bi translated">Golang中的地图是<em class="ls">无序集合</em>，所以没有使用<code class="fe lt lu lv lw b"><em class="ls">sort</em></code>包对地图进行排序的规定。然而，如果您真的需要对一个映射进行排序，您可以通过将key&amp;值分开来为它编写您的自定义实现。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mv mw l"/></div></figure><h2 id="dc95" class="lx ly iq bd lz ma mb dn mc md me dp mf lf mg mh mi lj mj mk ml ln mm mn mo mp bi translated">结论</h2><p id="f9ae" class="pw-post-body-paragraph kw kx iq ky b kz mq jr lb lc mr ju le lf ms lh li lj mt ll lm ln mu lp lq lr ij bi translated">在Golang中，通过使用<code class="fe lt lu lv lw b"><em class="ls">sort</em></code>包对收集的数据进行排序是非常简单的，上面介绍的解决方案应该可以满足你将要面对的大多数情况。</p><blockquote class="nf ng nh"><p id="a709" class="kw kx ls ky b kz la jr lb lc ld ju le ni lg lh li nj lk ll lm nk lo lp lq lr ij bi translated">感谢您的阅读，祝您编码愉快！😃</p></blockquote></div></div>    
</body>
</html>