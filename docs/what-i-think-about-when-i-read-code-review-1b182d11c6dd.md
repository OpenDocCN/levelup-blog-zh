# 当我阅读《代码评审》时，我想到了什么

> 原文：<https://levelup.gitconnected.com/what-i-think-about-when-i-read-code-review-1b182d11c6dd>

优雅而有尊严地接受反馈的技巧。

![](img/7d10c1766952fcb043ed579ab284f925.png)

由[杰森·罗斯韦尔](https://unsplash.com/@jasonrosewell?utm_source=medium&utm_medium=referral)在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄的照片

像写作一样，编程是个人的和亲密的。你通过指尖将你的创造力和思想注入一台机器。那么，当你读到对你的代码的批评性评论时，你可能会感到有点生气，这就不足为奇了。

你如何处理批评？首先，不要生闷气，在为自己辩护或抨击他人之前先思考一下。下面是我阅读代码评审时的想法指南。

# 我能学到什么

代码审查在软件质量保证中起着至关重要的作用。一个好的反馈可能会在你的代码到达用户之前发现缺陷——程序正确性、性能问题、安全漏洞。

除了发现软件缺陷，让另一个人阅读你的代码可以帮助你发现你的代码哪里不太容易理解。作为作者，你理解你刚刚写的一段代码可能没有问题，但是如果没有你头脑中的上下文，其他人可能仍然很难理解。

代码评审对于改善你的编码风格也很有帮助。在编程中，表达一个想法的方式总是不止一种。无论是不同的算法、新的设计模式，甚至仅仅是别名或句法糖——就像用英语写作一样，[有时用不同的方式表达一个句子可以让它的意思更清楚](http://wiki.c2.com/?ThereIsMoreThanOneWayToDoIt)。

```
def factorial1(number)
  return number * factorial1(number - 1) if number > 1
  number
enddef factorial2(number)
  number > 1 ? number * factorial2(number - 1) : number
enddef factorial3(number)
  (1..number).inject(&:*)
enddef factorial4(number)
  (1..number).reduce(&:*)
enddef factorial5(number)
  1.upto(Float::INFINITY).take(number).inject(&:*)
end
```

Ruby 中的这五个阶乘实现你更喜欢哪一个？了解其他人如何在他们的代码评审中处理同样的问题。正如著名的日本设计师相叶マナブ·水野彩香在他关于品味的书里写的:

> 如果品味是一件艺术品，那么知识就是画布。

# 我能分享什么

不幸的是，我们生活在一个心灵感应还不存在的现实中。同时，同行评审是传播代码库知识的最有效方式。

当你为你的工作辩护时，请记住你的代码并不总是能抓住你的动机和背景。解释为什么选择一个特定的实现通常比如何实现更重要。

当您响应代码评审时，尝试主动提供上下文来消除任何混淆，并使用明确的代码示例来避免歧义。设身处地为对方着想，问问自己有没有什么背景资料可以提供，帮助别人看到你的观点。

当队友询问关于代码库的澄清性问题时，不要感到不耐烦，而是要高兴有机会打破知识筒仓。你可以在下次度假的时候感谢他们。

# 我可以标准化什么

代码评审中争论的一个来源是缺乏标准化。你可能在一些小事上有不同意见，比如缩进样式、命名约定或文件夹结构。

虽然冲突可能会令人不舒服，但解决分歧和建立规范最终会节省每个人的时间，并提高团队的整体绩效。

作为一个团队，你们可以采用“完成”的定义来分享对“完成”的理解。此外，您可以自动化集成测试、验收测试，并将一个 [linter](https://github.com/github/super-linter) 合并到您的持续集成管道中，这样您就不会浪费精力一遍又一遍地检查和争论相同的问题。

# 真正的谈话

尽管初衷是好的，但代码审查有时会造成伤害和打击士气。需要注意的一点是，每个人[的沟通方式都不一样](https://en.wikipedia.org/wiki/High-context_and_low-context_cultures)——有些人喜欢较少对抗性和高语境的沟通，而其他人则习惯于直接和直言不讳的批评。

无论如何，当你发现自己因为一条反馈而感到沮丧和气馁时，直接打电话给评论者并进行一次真正的对话不会有什么坏处。归根结底，软件开发是一项团队运动，我们都在同一个团队中。