<html>
<head>
<title>Story View in Flutter</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">颤振中的故事观</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/story-view-in-flutter-d828c2ca9ee8?source=collection_archive---------3-----------------------#2022-08-13">https://levelup.gitconnected.com/story-view-in-flutter-d828c2ca9ee8?source=collection_archive---------3-----------------------#2022-08-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="02a0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">故事视图是当今脸书、Instagram、Snapchat等社交媒体的显著特征之一。这篇文章将教我们如何在未来建立故事视图。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/4d041db5ef499ae4bc6ebb4f3b936e8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9-KojXklo6q7mpj34VrLKA.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">颤振中的故事观</figcaption></figure><p id="13bb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们的最终应用程序将如下工作:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi lb"><img src="../Images/cf2cb57a45ece5695f787e75a0537fcd.png" data-original-src="https://miro.medium.com/v2/resize:fit:576/1*ck_f3_qe7VfXPjRMUmbUvg.gif"/></div></figure><p id="8030" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">正如我们所看到的，我们将有故事的列表，当点击项目时，我们有我们的故事视图。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="lc ld l"/></div></figure><h2 id="b246" class="le lf iq bd lg lh li dn lj lk ll dp lm jy ln lo lp kc lq lr ls kg lt lu lv lw bi translated">文章视图的属性:</h2><ul class=""><li id="6b49" class="lx ly iq jp b jq lz ju ma jy mb kc mc kg md kk me mf mg mh bi translated"><strong class="jp ir">控制器</strong>:用于控制故事的回放。</li><li id="1911" class="lx ly iq jp b jq mi ju mj jy mk kc ml kg mm kk me mf mg mh bi translated"><strong class="jp ir"> storyItems </strong>:显示的是页面或项目。此属性不能为空。</li><li id="fc28" class="lx ly iq jp b jq mi ju mj jy mk kc ml kg mm kk me mf mg mh bi translated"><strong class="jp ir"> progressPosition </strong>:该属性用于对齐故事的进度指示器。</li><li id="d67b" class="lx ly iq jp b jq mi ju mj jy mk kc ml kg mm kk me mf mg mh bi translated"><strong class="jp ir"> onComplete: </strong>当故事的完整循环展现时调用。每次将<code class="fe mn mo mp mq b">repeat</code>属性设置为true时都会调用它。</li><li id="e1d8" class="lx ly iq jp b jq mi ju mj jy mk kc ml kg mm kk me mf mg mh bi translated"><strong class="jp ir"> onStoryShow </strong>:用于在故事播放时回调流程。</li><li id="02b6" class="lx ly iq jp b jq mi ju mj jy mk kc ml kg mm kk me mf mg mh bi translated"><strong class="jp ir">onVerticalSwipeComplete</strong>:用于检测到滑动手势时回调。不想听手势可以忽略。</li></ul><h2 id="2e42" class="le lf iq bd lg lh li dn lj lk ll dp lm jy ln lo lp kc lq lr ls kg lt lu lv lw bi translated"><strong class="ak">故事视图的特点:</strong></h2><ul class=""><li id="6b4c" class="lx ly iq jp b jq lz ju ma jy mb kc mc kg md kk me mf mg mh bi translated">每个故事项目的标题</li><li id="fdf7" class="lx ly iq jp b jq mi ju mj jy mk kc ml kg mm kk me mf mg mh bi translated">支持gif、图像和视频</li><li id="aa9f" class="lx ly iq jp b jq mi ju mj jy mk kc ml kg mm kk me mf mg mh bi translated">上一个、下一个和暂停的手势。</li><li id="1459" class="lx ly iq jp b jq mi ju mj jy mk kc ml kg mm kk me mf mg mh bi translated">每个故事项目的动画进度指示器。</li></ul><h1 id="3e0c" class="mr lf iq bd lg ms mt mu lj mv mw mx lm my mz na lp nb nc nd ls ne nf ng lv nh bi translated">让我们开始吧</h1><p id="7b87" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy ni ka kb kc nj ke kf kg nk ki kj kk ij bi translated">为了在Flutter中实现故事视图，我们需要两个依赖项。首先，在<code class="fe mn mo mp mq b">pubsec.yaml</code>文件中添加这些依赖关系<a class="ae nl" href="https://pub.dev/packages/story_view'" rel="noopener ugc nofollow" target="_blank"> story_view </a>和<a class="ae nl" href="https://pub.dev/packages/dashed_circle" rel="noopener ugc nofollow" target="_blank">虚线_circle </a>。</p><pre class="km kn ko kp gt nm mq nn no aw np bi"><span id="fc46" class="le lf iq mq b gy nq nr l ns nt">dependencies:<br/>  story_view: ^0.13.2<br/>  dashed_circle: ^0.0.2</span></pre><p id="3081" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，在<code class="fe mn mo mp mq b">lib</code>文件夹中创建一个<code class="fe mn mo mp mq b">homepage.dart</code>文件。我们将使用动画控制器，所以我们需要调用<code class="fe mn mo mp mq b">TickerProviderStateMixin</code>。</p><p id="9ede" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们在主页上创建变量。</p><pre class="km kn ko kp gt nm mq nn no aw np bi"><span id="8165" class="le lf iq mq b gy nq nr l ns nt">  late Animation&lt;double&gt; gap; //gap between the dashed<br/>  late Animation&lt;double&gt; base; //the point of anima<br/>  late Animation&lt;double&gt; reverse; //to reverse the animation<br/>  late AnimationController controller; // the controller</span></pre><p id="f1a1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们需要在主页的<code class="fe mn mo mp mq b">initState </code>中初始化动画控制器。</p><pre class="km kn ko kp gt nm mq nn no aw np bi"><span id="cd42" class="le lf iq mq b gy nq nr l ns nt"><a class="ae nl" href="http://twitter.com/override" rel="noopener ugc nofollow" target="_blank">@override</a><br/>  initState() {<br/>    super.initState();</span><span id="1a99" class="le lf iq mq b gy nu nr l ns nt">controller =<br/>        AnimationController(vsync: this, duration: const Duration(seconds: 10));</span><span id="bf65" class="le lf iq mq b gy nu nr l ns nt">base = CurvedAnimation(parent: controller, curve: Curves.easeOut);</span><span id="a423" class="le lf iq mq b gy nu nr l ns nt">reverse = Tween&lt;double&gt;(begin: 0.0, end: -1.0).animate(base);</span><span id="1932" class="le lf iq mq b gy nu nr l ns nt">gap = Tween&lt;double&gt;(begin: 15.0, end: 0.0).animate(base)<br/>      ..addListener(() {<br/>        setState(() {});<br/>      });</span><span id="11aa" class="le lf iq mq b gy nu nr l ns nt">controller.forward();<br/>  }</span></pre><blockquote class="nv nw nx"><p id="c0fe" class="jn jo ny jp b jq jr js jt ju jv jw jx nz jz ka kb oa kd ke kf ob kh ki kj kk ij bi translated">vsync: this :我们将它传递给动画控制器，在使用这个mixin的类中创建一个动画控制器</p><p id="1414" class="jn jo ny jp b jq jr js jt ju jv jw jx nz jz ka kb oa kd ke kf ob kh ki kj kk ij bi translated">如果我们不需要线性动画，我们就使用它。它为动物提供了曲线。当我们需要在动画向前和向后移动时有不同的曲线时，它是专门使用的。</p><p id="a265" class="jn jo ny jp b jq jr js jt ju jv jw jx nz jz ka kb oa kd ke kf ob kh ki kj kk ij bi translated"><strong class="jp ir">补间</strong>:提供起始值和结束值之间的线性插值。</p><p id="ce68" class="jn jo ny jp b jq jr js jt ju jv jw jx nz jz ka kb oa kd ke kf ob kh ki kj kk ij bi translated"><strong class="jp ir">..addListener(): </strong>这两点syantx定义了使用来自<code class="fe mn mo mp mq b">animate</code>的返回值调用<code class="fe mn mo mp mq b">addListener()</code>方法。</p></blockquote><p id="f755" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们根据这些变量的值制作虚线动画。为了制作窗口小部件的动画，我们使用了窗口小部件<code class="fe mn mo mp mq b">RotationTransition</code>。它负责制作小部件旋转的动画。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="oc ld l"/></div></figure><p id="b883" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当点击项目时，我们从主页传递一些值，这些值是<strong class="jp ir">索引</strong>和<strong class="jp ir">图片数组</strong>到<strong class="jp ir"> StoryViewPage </strong>。</p><pre class="km kn ko kp gt nm mq nn no aw np bi"><span id="d07b" class="le lf iq mq b gy nq nr l ns nt">Navigator.push(context, MaterialPageRoute(builder: (_) {<br/>  return StoryViewPage(index: index, model: model); }));</span></pre><p id="1020" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后点击以上项目的列表，我们显示故事视图。为此，创建名为<code class="fe mn mo mp mq b">story_view_page.dart</code>的新文件。</p><p id="b466" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这里，我们将故事视图创建为:</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="oc ld l"/></div></figure><h1 id="6073" class="mr lf iq bd lg ms mt mu lj mv mw mx lm my mz na lp nb nc nd ls ne nf ng lv nh bi translated">让我们连接起来</h1><p id="7a61" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy ni ka kb kc nj ke kf kg nk ki kj kk ij bi translated">我们可以成为朋友。在<a class="ae nl" href="https://www.facebook.com/nabin.dhakal.714/" rel="noopener ugc nofollow" target="_blank">脸书</a>、<a class="ae nl" href="https://www.linkedin.com/in/nabindhakal/" rel="noopener ugc nofollow" target="_blank"> Linkedin </a>、<a class="ae nl" href="https://github.com/nbnD" rel="noopener ugc nofollow" target="_blank"> Github </a>、<a class="ae nl" href="https://www.youtube.com/channel/UCW6oYt_3QSl7J2HSHNqwXWw" rel="noopener ugc nofollow" target="_blank"> Youtube </a>和<a class="ae nl" href="https://www.instagram.com/nbn_d_/" rel="noopener ugc nofollow" target="_blank"> Instagram </a>上查找。</p><h1 id="fb60" class="mr lf iq bd lg ms mt mu lj mv mw mx lm my mz na lp nb nc nd ls ne nf ng lv nh bi translated">结论</h1><p id="533c" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy ni ka kb kc nj ke kf kg nk ki kj kk ij bi translated">希望这篇文章对你有所帮助，让你学到新的东西。我在这篇文章中使用了一些对你们中的一些人来说可能是新的东西。</p><p id="d0aa" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你学到了新的东西或者想提出一些建议，请在评论中告诉我。</p><p id="d5ef" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你喜欢这篇文章，请点击👏图标，它为您提供了传递所有新事物的动力。</p><p id="eaa1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">此外，关注令人兴奋的文章和项目的更新。</p><p id="c90f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">通过分享学习对学习过程产生了巨大的影响，并使社区越来越大。</p><p id="dc25" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">分享是吸引其他爱好者的磁石。</p><p id="41d4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因此，让我们朝着扩大我们的学习社区迈出一小步。</p><p id="6e2e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">与你的朋友分享这篇文章，或者如果你喜欢这篇文章，就在推特上发表评论。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><a href="https://www.buymeacoffee.com/nabindhakal"><div class="gh gi od"><img src="../Images/b768ed307150d11444cf04000ec92315.png" data-original-src="https://miro.medium.com/v2/resize:fit:860/format:webp/0*I-DeHPxIPn5TeNDm.png"/></div></a><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">颤振中的故事观</figcaption></figure><h1 id="636a" class="mr lf iq bd lg ms mt mu lj mv mw mx lm my mz na lp nb nc nd ls ne nf ng lv nh bi translated">完整代码:</h1><div class="oe of gp gr og oh"><a href="https://github.com/nbnD/story_view_futter" rel="noopener  ugc nofollow" target="_blank"><div class="oi ab fo"><div class="oj ab ok cl cj ol"><h2 class="bd ir gy z fp om fr fs on fu fw ip bi translated">GitHub - nbnD/story_view_futter:颤振中的故事视图</h2><div class="oo l"><h3 class="bd b gy z fp om fr fs on fu fw dk translated">一个新的颤振项目。这个项目是颤振应用的起点。一些帮助您入门的资源…</h3></div><div class="op l"><p class="bd b dl z fp om fr fs on fu fw dk translated">github.com</p></div></div><div class="oq l"><div class="or l os ot ou oq ov kv oh"/></div></div></a></div></div><div class="ab cl ow ox hu oy" role="separator"><span class="oz bw bk pa pb pc"/><span class="oz bw bk pa pb pc"/><span class="oz bw bk pa pb"/></div><div class="ij ik il im in"><h1 id="a860" class="mr lf iq bd lg ms pd mu lj mv pe mx lm my pf na lp nb pg nd ls ne ph ng lv nh bi translated">分级编码</h1><p id="0959" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy ni ka kb kc nj ke kf kg nk ki kj kk ij bi translated">感谢您成为我们社区的一员！在你离开之前:</p><ul class=""><li id="d850" class="lx ly iq jp b jq jr ju jv jy pi kc pj kg pk kk me mf mg mh bi translated">👏为故事鼓掌，跟着作者走👉</li><li id="8321" class="lx ly iq jp b jq mi ju mj jy mk kc ml kg mm kk me mf mg mh bi translated">📰查看<a class="ae nl" href="https://levelup.gitconnected.com/?utm_source=pub&amp;utm_medium=post" rel="noopener ugc nofollow" target="_blank">升级编码出版物</a>中的更多内容</li><li id="07f6" class="lx ly iq jp b jq mi ju mj jy mk kc ml kg mm kk me mf mg mh bi translated">🔔关注我们:<a class="ae nl" href="https://twitter.com/gitconnected" rel="noopener ugc nofollow" target="_blank">Twitter</a>|<a class="ae nl" href="https://www.linkedin.com/company/gitconnected" rel="noopener ugc nofollow" target="_blank">LinkedIn</a>|<a class="ae nl" href="https://newsletter.levelup.dev" rel="noopener ugc nofollow" target="_blank">时事通讯</a></li></ul><p id="2a8b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">🚀👉<a class="ae nl" href="https://jobs.levelup.dev/talent/welcome?referral=true" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir">加入升级人才集体，找到一份神奇的工作</strong> </a></p></div></div>    
</body>
</html>