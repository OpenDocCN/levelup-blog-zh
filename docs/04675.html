<html>
<head>
<title>JavaScript Problems— Remove Line Breaks, Reversing Strings, Node ES6 Modules</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript问题—删除换行符、反转字符串、节点ES6模块</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/javascript-problems-remove-line-breaks-reversing-strings-node-es6-modules-ea0b573ec653?source=collection_archive---------4-----------------------#2020-07-09">https://levelup.gitconnected.com/javascript-problems-remove-line-breaks-reversing-strings-node-es6-modules-ea0b573ec653?source=collection_archive---------4-----------------------#2020-07-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/0152ecf3b63ce3f783ae81082ed38917.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5uaoPqMoIf6VoKxi"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">罗伯特·里奇在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="d028" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">像任何类型的应用程序一样，当我们编写JavaScript应用程序时，有一些困难的问题需要解决。</p><p id="96a1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本文中，我们将研究一些常见JavaScript问题的解决方案。</p><h1 id="5192" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">使用JavaScript向JSON对象添加新属性</h1><p id="59d1" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以用点或括号符号向JSON对象添加属性。</p><p id="9f4a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="3149" class="mq lf it mm b gy mr ms l mt mu">object["prop"] = value;</span></pre><p id="8d6a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">或者:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="ce75" class="mq lf it mm b gy mr ms l mt mu">object.prop = value;</span></pre><h1 id="4bc0" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">将消息打印到控制台</h1><p id="c8d3" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以用<code class="fe mv mw mx mm b">console.log</code>、<code class="fe mv mw mx mm b">console.error</code>、<code class="fe mv mw mx mm b">console.warn</code>或<code class="fe mv mw mx mm b">console.info</code>方法将消息打印到控制台。</p><p id="a28a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mv mw mx mm b">console.log</code>向控制台记录消息。</p><p id="1037" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mv mw mx mm b">console.error</code>将错误信息记录到控制台。</p><p id="550a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mv mw mx mm b">console.warn</code>记录警告。</p><p id="7eab" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mv mw mx mm b">console.info</code>记录信息性消息。</p><p id="a83a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以用<code class="fe mv mw mx mm b">%c</code>标签将CSS添加到控制台日志输出中:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="5884" class="mq lf it mm b gy mr ms l mt mu">console.log('%c hello', "background: blue; color: white");</span></pre><h1 id="4597" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">禁用在引导模式区域外单击以关闭模式</h1><p id="ad6a" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">通过使用<code class="fe mv mw mx mm b">keyboard</code>和<code class="fe mv mw mx mm b">backdrop</code>属性，我们可以禁止在引导模式区域之外点击来关闭模式:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="22a4" class="mq lf it mm b gy mr ms l mt mu">$('#modal').modal({ backdrop: 'static', keyboard: false });</span></pre><p id="f5e6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mv mw mx mm b">backdrop</code>设置为<code class="fe mv mw mx mm b">'static'</code>让我们通过点击模态外部来禁止关闭模态。</p><p id="68c5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mv mw mx mm b">keyboard</code>设置为<code class="fe mv mw mx mm b">false</code>禁止按Esc键关闭模态。</p><h1 id="8ba2" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">Javascript向日期添加前导零</h1><p id="ac2a" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以通过获取日期部分，然后将0添加到该部分，来将前导零添加到日期中。</p><p id="211a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="666b" class="mq lf it mm b gy mr ms l mt mu">const dateStr = `0${date.getDate().toString().slice(-2)}/0${(date.getMonth() + 1).toString().slice(-2)}/${date.getFullYear()}`;</span></pre><p id="6e76" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在添加前导零之前，我们应该确保日期和月份是个位数。</p><h1 id="a7fc" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">移除字符串中的所有换行符</h1><p id="c3ab" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以删除所有的换行符，方法是使用正则表达式来匹配所有的换行符:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="9392" class="mq lf it mm b gy mr ms l mt mu">str = str.replace(/(\r\n|\n|\r)/gm, "");</span></pre><p id="4b97" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mv mw mx mm b">\r\n</code>是Windows使用的CRLF换行符。</p><p id="a9f3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mv mw mx mm b">\n</code>是一个LF换行符，被其他所有东西使用。</p><p id="686b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mv mw mx mm b">\r</code>是回车。</p><p id="0bc8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mv mw mx mm b">g</code>获取换行符的所有实例。</p><p id="ee97" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们用空字符串替换它们来移除它们。</p><h1 id="b550" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">Node.js错误-语法错误:意外的标记导入</h1><p id="e309" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">ES6模块导入仅在节点12或更高版本中可用。</p><p id="1f46" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以通过用<code class="fe mv mw mx mm b">mjs</code>扩展名保存模块文件来使用它。</p><p id="e636" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">或者我们可以在最近的<code class="fe mv mw mx mm b">package.json</code>里加上<code class="fe mv mw mx mm b">{ "type": "module" }</code>。</p><p id="c04c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在节点9和12之间，我们可以导入没有<code class="fe mv mw mx mm b">— -experiemental-modules</code>标志的模块。</p><p id="620b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">否则，我们可以使用<code class="fe mv mw mx mm b">require</code>来导入模块。</p><p id="839b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">同样，我们可以使用巴别塔节点。</p><p id="0d8a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了使用它，我们运行:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="5e38" class="mq lf it mm b gy mr ms l mt mu">npm install babel-register babel-preset-env --save-dev</span></pre><p id="10c7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">那么在<code class="fe mv mw mx mm b">.babelrc</code>中，我们可以写:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="7df7" class="mq lf it mm b gy mr ms l mt mu">{<br/>  "presets": ["env"]<br/>}</span></pre><p id="9ce7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后在<code class="fe mv mw mx mm b">package.json</code>中，我们可以添加:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="b79b" class="mq lf it mm b gy mr ms l mt mu">"scripts": {<br/>  "start": "babel-node src/index.js"<br/>}</span></pre><p id="b971" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">假设<code class="fe mv mw mx mm b">src/index.js</code>是我们app的入口。</p><h1 id="9393" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">将JavaScript日期初始化为午夜的最佳方式</h1><p id="8c40" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">为了将日期设置为午夜，我们使用了<code class="fe mv mw mx mm b">setHours</code>方法。</p><p id="a4e3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="81cf" class="mq lf it mm b gy mr ms l mt mu">const d = new Date();<br/>d.setHours(0, 0, 0, 0);</span></pre><p id="ffba" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们调用全零的<code class="fe mv mw mx mm b">setHours</code>将小时、日、分钟、秒和毫秒都设置为零。</p><p id="7603" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">那我们的约会就定在午夜。</p><h1 id="fa66" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">从数组中移除最后一项</h1><p id="65a0" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以用几种方法从数组中移除最后一项。</p><p id="8773" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以使用<code class="fe mv mw mx mm b">splice</code>方法:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="0fc0" class="mq lf it mm b gy mr ms l mt mu">arr.splice(-1, 1)</span></pre><p id="939c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mv mw mx mm b">-1</code>是数组的最后一个索引，1表示我们删除1项。</p><p id="6382" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">同样，我们可以调用<code class="fe mv mw mx mm b">pop</code>:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="b73a" class="mq lf it mm b gy mr ms l mt mu">arr.pop();</span></pre><p id="5d61" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这将从<code class="fe mv mw mx mm b">arr</code>中移除最后一个项目。</p><h1 id="d1fa" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">在JavaScript中原地反转字符串</h1><p id="ac9d" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以通过使用<code class="fe mv mw mx mm b">split</code>、<code class="fe mv mw mx mm b">reverse</code>和<code class="fe mv mw mx mm b">join</code>方法在JavaScript中将字符串反转:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="4db4" class="mq lf it mm b gy mr ms l mt mu">const reverse = (s) =&gt; {<br/>  return s.split("").reverse().join("");<br/>}</span></pre><p id="5e65" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们将字符串分割成一个字符数组。</p><p id="24b0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们在数组上调用<code class="fe mv mw mx mm b">reverse</code>，然后我们调用<code class="fe mv mw mx mm b">join</code>将其回调。</p><p id="9d8e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以用扩展操作符代替<code class="fe mv mw mx mm b">split</code>:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="a0ac" class="mq lf it mm b gy mr ms l mt mu">const reverse = (s) =&gt; {<br/>  return [...s].reverse().join("");<br/>}</span></pre><p id="0ea3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这做同样的事情。</p><figure class="mh mi mj mk gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi my"><img src="../Images/b7de034a1c2fdc23750affb8b0710fd7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*F5BDS5uVrkOLxMZ1"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">照片由<a class="ae kf" href="https://unsplash.com/@daserafin?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Dmitriy Serafin </a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><h1 id="a376" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">结论</h1><p id="4fca" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以用<code class="fe mv mw mx mm b">reverse</code>和<code class="fe mv mw mx mm b">join</code>反串。</p><p id="dcf4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">有多种方法可以将事情记录到控制台。</p><p id="b731" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果我们有一个最新版本的节点，我们可以使用节点应用程序导入。</p><p id="aa55" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">可以用正则表达式和<code class="fe mv mw mx mm b">replace</code>删除换行符。</p></div></div>    
</body>
</html>