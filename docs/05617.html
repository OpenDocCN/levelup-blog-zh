<html>
<head>
<title>Monitoring website uptime using Kibana</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Kibana监控网站正常运行时间</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/monitoring-website-uptime-using-kibana-cf9701c86b5d?source=collection_archive---------18-----------------------#2020-09-14">https://levelup.gitconnected.com/monitoring-website-uptime-using-kibana-cf9701c86b5d?source=collection_archive---------18-----------------------#2020-09-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/5e2d583d7422345f7fe82399ea19d618.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tLEuFF5v_s2Ty19824WepA.jpeg"/></div></div></figure><p id="3d49" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">Kibana为我们提供了各种数据可视化和分析功能，我们将在这篇博客中讨论的功能之一是正常运行时间。使用Kibana Uptime，我们可以使用不同的协议(如HTTP、HTTPS、TCP等)监控网络端点。我将解释一个非常基本的用例来解释正常运行时间，那就是监控基于web的应用程序的正常运行时间。目的是如果一个或多个基于web的应用程序运行正常，就在仪表板中获取状态。它还为我们提供了历史数据来了解应用程序是否运行良好。</p><p id="edc4" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我将使用Kibana正常运行时间来监控bqstack.com网站。我们可以添加多个网站进行正常运行时间监控。但是在监控网站正常运行时间之前，我们需要做一些安装和配置。因此，请在我们为正常运行时间监控搭建平台时查看一下。我们需要做到以下几点:</p><p id="52f7" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们首先需要下载并安装Heartbeat，这里我正在一个基于Ubuntu的操作系统上进行配置。我们需要执行以下命令:</p><pre class="kz la lb lc gt ld le lf lg aw lh bi"><span id="ab7a" class="li lj it le b gy lk ll l lm ln">curl -L -O <a class="ae lo" href="https://artifacts.elastic.co/downloads/beats/heartbeat/heartbeat-7.6.2-amd64.deb" rel="noopener ugc nofollow" target="_blank">https://artifacts.elastic.co/downloads/beats/heartbeat/heartbeat-7.6.2-amd64.deb</a><br/>sudo dpkg -i heartbeat-7.6.2-amd64.deb</span></pre><p id="0e41" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在安装完成后，我们需要修改/etc/heartbeat/heartbeat.yml文件，以设置连接信息:</p><pre class="kz la lb lc gt ld le lf lg aw lh bi"><span id="1045" class="li lj it le b gy lk ll l lm ln">output.elasticsearch:<br/> hosts: ["&lt;elaticsearch_url&gt;"]<br/> username: "elastic"<br/> password: "&lt;password&gt;"<br/>setup.kibana:<br/> host: "&lt;kibana_url&gt;"</span></pre><p id="d475" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在上面的心跳配置文件片段中，我们需要更新Elasticsearch URL、elastic用户的密码和Kibana URL。</p><p id="5a32" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在添加了Elasticsearch和Kibana细节之后，我们需要添加用于监视URL的监视器。为了进行测试，我将监控本地主机上index.php文件的正常运行时间。这个PHP脚本只是在屏幕上显示一条hello消息，请参考index.php的以下代码:</p><p id="ccea" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们需要编辑以下代码片段来监视本地主机上的index.php文件:</p><pre class="kz la lb lc gt ld le lf lg aw lh bi"><span id="6ff1" class="li lj it le b gy lk ll l lm ln">heartbeat.monitors:<br/>- type: http<br/> urls: ["http://localhost/index.php"]<br/> schedule: "@every 10s"</span></pre><p id="f96b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">更新这些细节后，我们需要保存心跳配置文件。在修改心跳配置文件之后，我们需要执行setup命令来加载Kibana索引模式。</p><pre class="kz la lb lc gt ld le lf lg aw lh bi"><span id="5f15" class="li lj it le b gy lk ll l lm ln">sudo heartbeat setup</span></pre><p id="eeb1" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">执行setup命令后，我们需要启动Heartbeat服务。</p><pre class="kz la lb lc gt ld le lf lg aw lh bi"><span id="8e92" class="li lj it le b gy lk ll l lm ln">sudo service heartbeat-elastic start</span></pre><p id="c284" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们可以通过执行以下命令来验证心跳服务是否正在运行:</p><pre class="kz la lb lc gt ld le lf lg aw lh bi"><span id="c244" class="li lj it le b gy lk ll l lm ln">sudo service heartbeat-elastic status</span></pre><p id="b4b6" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在，我们可以通过点击左侧菜单中的正常运行时间链接来打开Kibana的正常运行时间屏幕。它将打开以下屏幕:</p><figure class="kz la lb lc gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi lp"><img src="../Images/43d1ab7e243072319c3227b484965bea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ZCmaAJ35l6wLeTyr.png"/></div></div></figure><p id="46b8" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在上面的正常运行时间概览屏幕中，我们可以看到正常运行时间的详细信息，如网站/服务是打开还是关闭，一段时间内的pings，监视器状态等。我们可以单击监视器状态名称来查看正常运行时间监视的详细信息。它不仅有助于我们监控网站/服务的当前状态，还使我们能够查看历史数据，如果有任何中断，我们可以很容易地找到这些数据。</p><p id="9bde" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这样，我们可以为正常运行时间监控配置不同的URL。它帮助我们跟踪不同的服务或web应用程序的正常运行时间。</p><p id="089b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><a class="ae lo" href="https://bqstack.com/b/detail/76/Configure-Logstash-to-push-MySQL-data-into-Elasticsearch" rel="noopener ugc nofollow" target="_blank">配置Logstash将MongoDB数据推送到Elasticsearch </a> <br/> <a class="ae lo" href="https://bqstack.com/b/detail/96/Load-csv-Data-into-Elasticsearch" rel="noopener ugc nofollow" target="_blank">将CSV数据加载到Elastic Search</a><a class="ae lo" href="https://bqstack.com/b/detail/31/Introduction-to-Elasticsearch" rel="noopener ugc nofollow" target="_blank"><br/>Elastic Search简介</a> <br/> <a class="ae lo" href="http://bqstack.com/b/detail/52/Elasticsearch-Installation-and-Configuration-on-Ubuntu-14.04" rel="noopener ugc nofollow" target="_blank"> Elasticsearch在Ubuntu 14.04上的安装和配置</a> <br/> <a class="ae lo" href="http://bqstack.com/b/detail/1/Log-analysis-with-Elastic-stack" rel="noopener ugc nofollow" target="_blank">带弹性栈的日志分析<br/></a><a class="ae lo" href="https://bqstack.com/b/detail/83/Elasticsearch-Rest-API" rel="noopener ugc nofollow" target="_blank">Elastic Search Rest API</a><br/><a class="ae lo" href="https://bqstack.com/b/detail/84/Basics-of-Data-Search-in-Elasticsearch" rel="noopener ugc nofollow" target="_blank">Elastic Search中数据搜索的基础知识</a> <br/> <a class="ae lo" href="https://bqstack.com/b/detail/83/Elasticsearch-Rest-API" rel="noopener ugc nofollow" target="_blank"> Elasticsearch</a></p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><p id="0077" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">《学习基巴纳7》被评为最佳新弹性搜索书籍</p><figure class="kz la lb lc gt ju gh gi paragraph-image"><div class="gh gi lx"><img src="../Images/e9e34d3e2f02455225f888e14a19a28c.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/0*YISEo8biYXvUHFf3"/></div></figure><p id="6190" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我很高兴地宣布，我的书《学习Kibana 7:用Kibana的数据可视化功能构建强大的弹性仪表板，第二版》获得了https://bookauthority.org/books/new-elasticsearch-books?<a class="ae lo" href="https://bookauthority.org/books/new-elasticsearch-books?t=11vp86&amp;s=award&amp;book=1838550364" rel="noopener ugc nofollow" target="_blank">book authority的最佳新弹性搜索书籍</a> : <br/> <a class="ae lo" href="https://bookauthority.org/books/new-elasticsearch-books?t=11vp86&amp;s=award&amp;book=1838550364" rel="noopener ugc nofollow" target="_blank">t = 11vp 86&amp;s = award&amp;book = 1838550364</a><br/>book authority收集并排名世界上最好的书籍，能得到这种认可是莫大的荣幸。谢谢大家的支持！这本书在亚马逊上<a class="ae lo" href="https://www.amazon.com/dp/1838550364?tag=uuid10-20" rel="noopener ugc nofollow" target="_blank">有售。</a></p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><p id="7f0e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如有任何疑问，请留下您的意见。你也可以在推特上关注我:<a class="ae lo" href="https://twitter.com/anu4udilse" rel="noopener ugc nofollow" target="_blank">https://twitter.com/anu4udilse</a></p><p id="a0df" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><em class="ly">如果你觉得这篇文章很有趣，那么你可以探索一下“</em> <a class="ae lo" href="https://www.amazon.com/Mastering-Kibana-6-x-Visualize-histograms/dp/1788831039/ref=olp_product_details?_encoding=UTF8&amp;me=" rel="noopener ugc nofollow" target="_blank"> <em class="ly">掌握基巴纳6.0 </em> </a> <em class="ly">”、“</em> <a class="ae lo" href="https://www.amazon.com/Kibana-Quick-Start-Guide-Elasticsearch/dp/1789804035" rel="noopener ugc nofollow" target="_blank"> <em class="ly">基巴纳7快速入门指南</em> </a> <em class="ly">”、“</em> <a class="ae lo" href="https://www.amazon.com/Learning-Kibana-dashboards-visualization-capabilities-ebook/dp/B07V4SQR6T" rel="noopener ugc nofollow" target="_blank"> <em class="ly">学习基巴纳7 </em> </a> <em class="ly">”、</em> <a class="ae lo" href="https://www.amazon.com/gp/product/1789803322?pf_rd_p=2d1ab404-3b11-4c97-b3db-48081e145e35" rel="noopener ugc nofollow" target="_blank"> <em class="ly"> Elasticsearch 7快速入门指南</em> </a> <em class="ly"/></p></div><div class="ab cl lq lr hx ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="im in io ip iq"><p id="c42f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><em class="ly">最初发表于</em><a class="ae lo" href="https://bqstack.com/b/detail/176/Monitoring-website-uptime-using-Kibana" rel="noopener ugc nofollow" target="_blank"><em class="ly">https://bqstack.com</em></a>T43。</p></div></div>    
</body>
</html>