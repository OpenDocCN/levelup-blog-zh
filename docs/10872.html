<html>
<head>
<title>Why Machine Learning Models Die In Silence</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么机器学习模型会无声无息地死去</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/concept-drift-in-machine-learning-1fc7a4396b10?source=collection_archive---------13-----------------------#2022-01-18">https://levelup.gitconnected.com/concept-drift-in-machine-learning-1fc7a4396b10?source=collection_archive---------13-----------------------#2022-01-18</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="0118" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">你如何拯救它</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/bd5e93ae6fde6e27d5932c4352f02557.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Sm5lymUgKJj2uT7Sr6P9Lg.jpeg"/></div></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">照片由<a class="ae kz" href="https://www.pexels.com/@liza-summer?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">丽莎夏</a>从<a class="ae kz" href="https://www.pexels.com/photo/unrecognizable-upset-lady-embracing-knees-sitting-on-chair-6382642/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">派克斯</a>拍摄</figcaption></figure><blockquote class="la lb lc"><p id="7d9d" class="ld le lf lg b lh li jv lj lk ll jy lm ln lo lp lq lr ls lt lu lv lw lx ly lz in bi translated">人生的意义因人而异，因日而异，因时而异——维克多·e·弗兰克，《人类对意义的探索》。</p></blockquote><p id="55a9" class="pw-post-body-paragraph ld le iu lg b lh li jv lj lk ll jy lm ma lo lp lq mb ls lt lu mc lw lx ly lz in bi translated">弗兰克尔不仅对生命的意义是正确的，他的说法对生产中的机器学习模型也是正确的。</p><p id="c62a" class="pw-post-body-paragraph ld le iu lg b lh li jv lj lk ll jy lm ma lo lp lq mb ls lt lu mc lw lx ly lz in bi translated">当您在生产中部署ML模型时，它们表现良好。然而，他们的表现一路下滑。它的预测质量会下降，很快变得不那么有价值。</p><p id="5e3a" class="pw-post-body-paragraph ld le iu lg b lh li jv lj lk ll jy lm ma lo lp lq mb ls lt lu mc lw lx ly lz in bi translated">这是软件部署和机器学习部署之间的主要区别。软件程序每次都以同样的方式执行任务。即使创造了几十年，它们仍然有用，除非新技术超越了它们，或者最初创造它们的目的已经过时。</p><p id="fe82" class="pw-post-body-paragraph ld le iu lg b lh li jv lj lk ll jy lm ma lo lp lq mb ls lt lu mc lw lx ly lz in bi translated">大多数公司在不知道这种差异的情况下，试图在业务运营中使用机器学习，但都失败了。他们在从这项技术提供的价值中获益之前就退出了。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj md"><img src="../Images/1769fce6764a1c6a1dabd2e999e5e602.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iuX4x-q8ylVUBxWsifqkyw.png"/></div></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">使用机器学习和人工智能来推动业务运营的公司越来越少。—图片由<a class="ae kz" href="https://linkedin.com/in/thuwarakesh" rel="noopener ugc nofollow" target="_blank">作者</a>提供。</figcaption></figure><p id="a0a1" class="pw-post-body-paragraph ld le iu lg b lh li jv lj lk ll jy lm ma lo lp lq mb ls lt lu mc lw lx ly lz in bi translated">根据美国人口普查局2018年对583，000家美国公司的<a class="ae kz" href="https://conference.nber.org/conf_papers/f138039.pdf" rel="noopener ugc nofollow" target="_blank">调查</a>，只有2.8%的公司使用机器学习来利用优势进行运营。大约8.9%的被调查者使用某种形式的人工智能，如语音识别。</p><h1 id="1572" class="me mf iu bd mg mh mi mj mk ml mm mn mo ka mp kb mq kd mr ke ms kg mt kh mu mv bi translated">为什么ML模型在生产中性能会下降？</h1><p id="02c9" class="pw-post-body-paragraph ld le iu lg b lh mw jv lj lk mx jy lm ma my lp lq mb mz lt lu mc na lx ly lz in bi translated">你花了几周甚至几个月的时间来训练一个机器学习模型，最后，它进入了生产阶段。现在，你应该看到你努力工作的好处了。</p><p id="5956" class="pw-post-body-paragraph ld le iu lg b lh li jv lj lk ll jy lm ma lo lp lq mb ls lt lu mc lw lx ly lz in bi translated">但是，您会注意到模型性能随着时间的推移而慢慢降低。什么会导致这种情况？</p><p id="cc5c" class="pw-post-body-paragraph ld le iu lg b lh li jv lj lk ll jy lm ma lo lp lq mb ls lt lu mc lw lx ly lz in bi translated">如果没有持续监控和充分评估预测的质量下降，概念漂移可能会在机器学习模型的预期退役日期之前杀死它。</p><h2 id="61d3" class="nb mf iu bd mg nc nd dn mk ne nf dp mo ma ng nh mq mb ni nj ms mc nk nl mu nm bi translated">什么是概念漂移？</h2><p id="9913" class="pw-post-body-paragraph ld le iu lg b lh mw jv lj lk mx jy lm ma my lp lq mb mz lt lu mc na lx ly lz in bi translated">当训练集样本的分布发生变化时，就会发生概念漂移。</p><blockquote class="la lb lc"><p id="2ba5" class="ld le lf lg b lh li jv lj lk ll jy lm ln lo lp lq lr ls lt lu lv lw lx ly lz in bi translated">在最基本的层面上，随着时间的推移，概念漂移导致曾经被认为是一个概念的例子的数据点被完全视为另一个概念。</p></blockquote><p id="1545" class="pw-post-body-paragraph ld le iu lg b lh li jv lj lk ll jy lm ma lo lp lq mb ls lt lu mc lw lx ly lz in bi translated">例如，当欺诈的概念不断变化时，欺诈检测模型存在概念漂移的风险。</p><p id="6754" class="pw-post-body-paragraph ld le iu lg b lh li jv lj lk ll jy lm ma lo lp lq mb ls lt lu mc lw lx ly lz in bi translated">这可能导致模型性能下降，特别是在概念漂移持续发生而未被您的监控系统检测到的长时间内。</p><h2 id="8c40" class="nb mf iu bd mg nc nd dn mk ne nf dp mo ma ng nh mq mb ni nj ms mc nk nl mu nm bi translated">是什么原因导致了观念漂移？</h2><p id="d008" class="pw-post-body-paragraph ld le iu lg b lh mw jv lj lk mx jy lm ma my lp lq mb mz lt lu mc na lx ly lz in bi translated">概念漂移发生的主要原因是应用程序中的底层数据分布在不断变化。</p><p id="6491" class="pw-post-body-paragraph ld le iu lg b lh li jv lj lk ll jy lm ma lo lp lq mb ls lt lu mc lw lx ly lz in bi translated">当分布发生变化时，旧的机器学习模型不再能够做出准确的预测，必须完全重新定义或重新训练以适应这些变化。</p><p id="ff1c" class="pw-post-body-paragraph ld le iu lg b lh li jv lj lk ll jy lm ma lo lp lq mb ls lt lu mc lw lx ly lz in bi translated">虽然这听起来像是你永远不希望在应用程序中发生的事情，但尽可能频繁地更新是许多机器学习模型的目标。</p><p id="153a" class="pw-post-body-paragraph ld le iu lg b lh li jv lj lk ll jy lm ma lo lp lq mb ls lt lu mc lw lx ly lz in bi translated">这是因为从生产环境中收集的新数据包含有价值的信息，这些信息有助于提高模型所做预测的准确性。</p><p id="7c35" class="pw-post-body-paragraph ld le iu lg b lh li jv lj lk ll jy lm ma lo lp lq mb ls lt lu mc lw lx ly lz in bi translated">由于外部原因或预测本身，输入数据的分布可能会发生变化。例如，消费者的购买行为受到宏观经济趋势的影响。然而，他们在你平台上的行为也可能是你推荐系统的直接后果。</p><h1 id="3b86" class="me mf iu bd mg mh mi mj mk ml mm mn mo ka mp kb mq kd mr ke ms kg mt kh mu mv bi translated">如何解决生产中模型的概念漂移？</h1><p id="6695" class="pw-post-body-paragraph ld le iu lg b lh mw jv lj lk mx jy lm ma my lp lq mb mz lt lu mc na lx ly lz in bi translated">虽然概念漂移看起来很吓人，但还是有办法解决的。这是所有机器学习开发者迟早都会面临的普遍问题。</p><p id="7210" class="pw-post-body-paragraph ld le iu lg b lh li jv lj lk ll jy lm ma lo lp lq mb ls lt lu mc lw lx ly lz in bi translated">这个概念会随着时间的推移而漂移，并且数据会从用于训练模型的数据发生变化。如果你没有监控这种漂移的方法，你的准确性会慢慢下降，直到最终没有人再相信你的预测。</p><h2 id="2331" class="nb mf iu bd mg nc nd dn mk ne nf dp mo ma ng nh mq mb ni nj ms mc nk nl mu nm bi translated">随着时间的推移监视模型的输入和输出。</h2><p id="38d4" class="pw-post-body-paragraph ld le iu lg b lh mw jv lj lk mx jy lm ma my lp lq mb mz lt lu mc na lx ly lz in bi translated">通过监视输入和输出数据分布，我们可以确定性能泄漏是数据问题还是模型问题。</p><p id="c5b7" class="pw-post-body-paragraph ld le iu lg b lh li jv lj lk ll jy lm ma lo lp lq mb ls lt lu mc lw lx ly lz in bi translated">如果是数据问题，那么你可以调查是什么变化导致了这种转变。这可能是数据收集方法或趋势的真正转变。</p><p id="9733" class="pw-post-body-paragraph ld le iu lg b lh li jv lj lk ll jy lm ma lo lp lq mb ls lt lu mc lw lx ly lz in bi translated">如果是一个模型问题，你应该看看你的模型的什么特性可能导致这种分布的变化。这可能是由诸如模型中的偏差甚至环境变化等因素造成的，这些因素会导致训练集与实际数据不匹配。</p><h2 id="9dd7" class="nb mf iu bd mg nc nd dn mk ne nf dp mo ma ng nh mq mb ni nj ms mc nk nl mu nm bi translated">随着时间的推移跟踪模型预测质量</h2><p id="4f74" class="pw-post-body-paragraph ld le iu lg b lh mw jv lj lk mx jy lm ma my lp lq mb mz lt lu mc na lx ly lz in bi translated">随着时间的推移监控不同的性能指标是至关重要的，因为我们可以通过仔细观察它们来找出任何偏差。一些关键的模型性能指标包括精确度、召回率、F-measure和ROC。</p><p id="e81c" class="pw-post-body-paragraph ld le iu lg b lh li jv lj lk ll jy lm ma lo lp lq mb ls lt lu mc lw lx ly lz in bi translated"><a class="ae kz" href="https://developers.google.com/machine-learning/crash-course/classification/precision-and-recall" rel="noopener ugc nofollow" target="_blank"> <strong class="lg iv">精度</strong> </a>是当真阳性除以所有做出的预测时，预测的准确程度。如果你观察一段时间内的精度，这表明我们的模型从实际数据分布偏离到它现在预测的程度。</p><p id="0042" class="pw-post-body-paragraph ld le iu lg b lh li jv lj lk ll jy lm ma lo lp lq mb ls lt lu mc lw lx ly lz in bi translated"><a class="ae kz" href="https://developers.google.com/machine-learning/crash-course/classification/precision-and-recall" rel="noopener ugc nofollow" target="_blank"> <strong class="lg iv">回忆</strong> </a>告诉我们是否捕捉到了足够多的正面例子。</p><p id="1541" class="pw-post-body-paragraph ld le iu lg b lh li jv lj lk ll jy lm ma lo lp lq mb ls lt lu mc lw lx ly lz in bi translated">如果召回率随着时间的推移而下降，这表明我们的模型已经从真阳性漂移到假阴性，这不适合商业决策。</p><p id="4bd3" class="pw-post-body-paragraph ld le iu lg b lh li jv lj lk ll jy lm ma lo lp lq mb ls lt lu mc lw lx ly lz in bi translated"><a class="ae kz" href="https://link.springer.com/article/10.1007/s10994-021-05964-1" rel="noopener ugc nofollow" target="_blank"> <strong class="lg iv"> F-measure </strong> </a>使用精度和召回值的调和平均值将精度和召回值组合成一个数字。如果F-measure随着精度而变化，那么这也表明存在模型漂移。</p><p id="8602" class="pw-post-body-paragraph ld le iu lg b lh li jv lj lk ll jy lm ma lo lp lq mb ls lt lu mc lw lx ly lz in bi translated"><a class="ae kz" href="https://towardsdatascience.com/understanding-auc-roc-curve-68b2303cc9c5" rel="noopener" target="_blank"> <strong class="lg iv"> ROC </strong> </a>让我们能够对照所有其他预测来查看一个真阳性，这有助于识别任何分类器偏差问题或导致假阳性的特征变化。可以看作是精度和召回率的扩展，但是它有更多的信息。</p><h2 id="96be" class="nb mf iu bd mg nc nd dn mk ne nf dp mo ma ng nh mq mb ni nj ms mc nk nl mu nm bi translated">使用新数据定期重新训练您的模型，以保持准确性和可信度。</h2><p id="e276" class="pw-post-body-paragraph ld le iu lg b lh mw jv lj lk mx jy lm ma my lp lq mb mz lt lu mc na lx ly lz in bi translated">虽然跟踪绩效矩阵可以尽早发现概念漂移，但定期的再培训会主动尝试消除这种情况。</p><p id="f5d2" class="pw-post-body-paragraph ld le iu lg b lh li jv lj lk ll jy lm ma lo lp lq mb ls lt lu mc lw lx ly lz in bi translated">不断地重新训练你的模型可能会花费大量的时间和资源，但从长远来看，这是一项值得的投资。</p><p id="b4b5" class="pw-post-body-paragraph ld le iu lg b lh li jv lj lk ll jy lm ma lo lp lq mb ls lt lu mc lw lx ly lz in bi translated">再培训的频率很大程度上取决于领域。在电子商务中，每周重新训练模型可能是有意义的。但是对于欺诈用户行为不断变化的欺诈检测系统，您可能需要每天重新训练您的模型。</p><h2 id="52d9" class="nb mf iu bd mg nc nd dn mk ne nf dp mo ma ng nh mq mb ni nj ms mc nk nl mu nm bi translated">使用一组模型。</h2><p id="a303" class="pw-post-body-paragraph ld le iu lg b lh mw jv lj lk mx jy lm ma my lp lq mb mz lt lu mc na lx ly lz in bi translated">这些都是防止或解决生产中机器学习漂移的优秀策略。然而，解决这个问题的另一种方法是使用集合模型。</p><p id="147e" class="pw-post-body-paragraph ld le iu lg b lh li jv lj lk ll jy lm ma lo lp lq mb ls lt lu mc lw lx ly lz in bi translated">集合模型同时使用多种算法，并将它们的预测组合成一个比任何单个算法都更准确的最终预测。</p><p id="47eb" class="pw-post-body-paragraph ld le iu lg b lh li jv lj lk ll jy lm ma lo lp lq mb ls lt lu mc lw lx ly lz in bi translated">这是提高精度和防止随着时间推移出现任何漂移的好方法。</p><h1 id="29e6" class="me mf iu bd mg mh mi mj mk ml mm mn mo ka mp kb mq kd mr ke ms kg mt kh mu mv bi translated">最后的想法</h1><p id="8161" class="pw-post-body-paragraph ld le iu lg b lh mw jv lj lk mx jy lm ma my lp lq mb mz lt lu mc na lx ly lz in bi translated">概念漂移导致机器学习模型在生产中的表现不同于它们在训练中的表现。这是一个大问题，如果没有正确预测漂移，可能会导致糟糕的用户体验，甚至导致模型失败。</p><p id="9972" class="pw-post-body-paragraph ld le iu lg b lh li jv lj lk ll jy lm ma lo lp lq mb ls lt lu mc lw lx ly lz in bi translated">概念漂移在生产中最常见的方式是当您的数据随时间变化时(例如，添加新功能，删除一些现有功能)。监控您的数据并尽快发现偏差是非常重要的。</p><p id="0154" class="pw-post-body-paragraph ld le iu lg b lh li jv lj lk ll jy lm ma lo lp lq mb ls lt lu mc lw lx ly lz in bi translated">你也应该使用像定期再培训或集合这样的技术来防止漂移。</p><p id="057e" class="pw-post-body-paragraph ld le iu lg b lh li jv lj lk ll jy lm ma lo lp lq mb ls lt lu mc lw lx ly lz in bi translated">你必须在用户开始报告你的产品的糟糕体验之前解决机器学习漂移。如果发生这种情况，它将很快导致信任的丧失，并为以后的修复工作带来非常高的成本。积极主动！</p></div></div>    
</body>
</html>