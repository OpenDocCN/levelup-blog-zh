<html>
<head>
<title>Cross-Running Applications</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">交叉运行的应用程序</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/cross-running-applications-345131f7b55f?source=collection_archive---------3-----------------------#2022-09-25">https://levelup.gitconnected.com/cross-running-applications-345131f7b55f?source=collection_archive---------3-----------------------#2022-09-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="a0f9" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph">系统程序设计</h2><div class=""/><div class=""><h2 id="6726" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">在x86上运行Arm64二进制文件</h2></div><p id="0e60" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">Arm64架构比以往更加普及。该架构不再仅仅用于电话，也用于个人计算机和服务器计算机。学习一些基本的汇编已经成为必要。</p><p id="9c40" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">除了在本文中学习一些基本的汇编之外，我们将使用QEMU的一个强大的子工具，它允许从其他架构交叉运行本机应用程序。在我们的例子中，我们将在x86_64上运行arm64(又名aarch64)二进制文件。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div class="gh gi lk"><img src="../Images/5d744b2df73db844762db638f440e985.png" data-original-src="https://miro.medium.com/v2/resize:fit:564/format:webp/1*EeAzC-exveJpNkWIhv0-bg.png"/></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk translated">考虑的技术堆栈</figcaption></figure><h1 id="d6a2" class="lw lx iq bd ly lz ma mb mc md me mf mg kf mh kg mi ki mj kj mk kl ml km mm mn bi translated">TL；速度三角形定位法(dead reckoning)</h1><p id="8aaa" class="pw-post-body-paragraph ko kp iq kq b kr mo ka kt ku mp kd kw kx mq kz la lb mr ld le lf ms lh li lj ij bi translated">最快的方法是使用下面的docker:</p><pre class="ll lm ln lo gt mt mu mv mw aw mx bi"><span id="96d6" class="my lx iq mu b gy mz na l nb nc"><strong class="mu ja">docker run -it amine2029/qemu-user-aarch64</strong><br/># wait for the bash from the docker; then</span><span id="6988" class="my lx iq mu b gy nd na l nb nc"><strong class="mu ja">make<br/>make run</strong></span></pre></div><div class="ab cl ne nf hu ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ij ik il im in"><h1 id="524c" class="lw lx iq bd ly lz nl mb mc md nm mf mg kf nn kg mi ki no kj mk kl np km mm mn bi translated">环境</h1><p id="5aa6" class="pw-post-body-paragraph ko kp iq kq b kr mo ka kt ku mp kd kw kx mq kz la lb mr ld le lf ms lh li lj ij bi translated">要在ubuntu上安装环境，请使用以下apt命令:</p><pre class="ll lm ln lo gt mt mu mv mw aw mx bi"><span id="0e18" class="my lx iq mu b gy mz na l nb nc"><strong class="mu ja">sudo apt install gcc-aarch64-linux-gnu                                                                                                                                 sudo apt install qemu-user<br/>sudo apt install make</strong></span></pre></div><div class="ab cl ne nf hu ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ij ik il im in"><h1 id="386d" class="lw lx iq bd ly lz nl mb mc md nm mf mg kf nn kg mi ki no kj mk kl np km mm mn bi translated">Hello World示例</h1><h2 id="25eb" class="my lx iq bd ly nq nr dn mc ns nt dp mg kx nu nv mi lb nw nx mk lf ny nz mm iw bi translated">源代码</h2><figure class="ll lm ln lo gt lp"><div class="bz fp l di"><div class="oa ob l"/></div></figure><h2 id="0a90" class="my lx iq bd ly nq nr dn mc ns nt dp mg kx nu nv mi lb nw nx mk lf ny nz mm iw bi translated">交叉编译并链接“hello.asm”</h2><pre class="ll lm ln lo gt mt mu mv mw aw mx bi"><span id="6d14" class="my lx iq mu b gy mz na l nb nc"><strong class="mu ja">aarch64-linux-gnu-as hello.asm -o hello.o<br/>aarch64-linux-gnu-gcc hello.o -o hello.elf -nostdlib -static</strong></span></pre><h2 id="7424" class="my lx iq bd ly nq nr dn mc ns nt dp mg kx nu nv mi lb nw nx mk lf ny nz mm iw bi translated">运行交叉编译的二进制文件</h2><pre class="ll lm ln lo gt mt mu mv mw aw mx bi"><span id="f41a" class="my lx iq mu b gy mz na l nb nc"><strong class="mu ja">qemu-aarch64 ./hello.elf</strong></span></pre></div><div class="ab cl ne nf hu ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ij ik il im in"><p id="f27c" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">链接到GitHub:<a class="ae oc" href="https://github.com/Aminem2019/qemu-user-example" rel="noopener ugc nofollow" target="_blank">https://github.com/techexplorer42/qemu-user-example</a></p><p id="a5fa" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">今天到此为止，欢迎评论，不要忘记鼓掌并关注更多内容；)</p></div></div>    
</body>
</html>