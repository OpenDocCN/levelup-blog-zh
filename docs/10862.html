<html>
<head>
<title>How to self-host fonts in NextJS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在NextJS中自宿主字体</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-self-host-fonts-in-nextjs-5a9930d8c67a?source=collection_archive---------3-----------------------#2022-01-18">https://levelup.gitconnected.com/how-to-self-host-fonts-in-nextjs-5a9930d8c67a?source=collection_archive---------3-----------------------#2022-01-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/07c1e41fdb5b73609070dd0f7ef44867.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*wKGXnGcQyXJKRkJE"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">照片由<a class="ae kc" href="https://unsplash.com/@amadorloureiroblanco?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">阿玛多·洛雷罗</a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="1234" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">假设您从客户那里收到了一个定制字体，用于您正在进行的NextJS项目。考虑到你到目前为止使用的所有字体都来自谷歌字体或其他字体提供商，你如何添加这种新字体？这个看起来很容易实现的东西花了相当多的时间，因为它没有在NextJS文档中记录。这篇文章应该可以帮助你解决这个问题。</p><blockquote class="lb lc ld"><p id="67ef" class="kd ke le kf b kg kh ki kj kk kl km kn lf kp kq kr lg kt ku kv lh kx ky kz la ij bi translated">我将在下面的例子中使用Typescript，但是您可以通过移除类型/接口并使用<code class="fe li lj lk ll b">js/jsx</code>格式而不是<code class="fe li lj lk ll b">ts/tsx</code>来获得相同的结果。</p></blockquote><p id="b84a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将使用由Manfred Klein创建的dafont.com的免费字体。</p><p id="a790" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们开始吧。</p></div><div class="ab cl lm ln hu lo" role="separator"><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr"/></div><div class="ij ik il im in"><p id="cd9e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们的“秘密”配方只需要三种原料:</p><ul class=""><li id="c9fc" class="lt lu iq kf b kg kh kk kl ko lv ks lw kw lx la ly lz ma mb bi translated">您的字体文件(或文件)方便地放置在<code class="fe li lj lk ll b">/public/fonts</code></li><li id="5fb3" class="lt lu iq kf b kg mc kk md ko me ks mf kw mg la ly lz ma mb bi translated">一个<code class="fe li lj lk ll b">fonts.css</code>文件，为了结构的缘故放在<code class="fe li lj lk ll b">/styles</code></li><li id="d4f4" class="lt lu iq kf b kg mc kk md ko me ks mf kw mg la ly lz ma mb bi translated">和<code class="fe li lj lk ll b">/pages</code>中的<code class="fe li lj lk ll b">_document.tsx</code>文件</li></ul><p id="7731" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，它应该看起来像这样:</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/972a2458ee3fab141696cf40be13b604.png" data-original-src="https://miro.medium.com/v2/resize:fit:616/format:webp/1*jeP3w6dEhQpRkKfV5s9ahQ.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">当前项目结构</figcaption></figure><h2 id="3743" class="mm mn iq bd mo mp mq dn mr ms mt dp mu ko mv mw mx ks my mz na kw nb nc nd ne bi translated">"但是我没有字体文件夹！"</h2><p id="1c5c" class="pw-post-body-paragraph kd ke iq kf b kg nf ki kj kk ng km kn ko nh kq kr ks ni ku kv kw nj ky kz la ij bi translated">不用担心，只要在<code class="fe li lj lk ll b">/public</code>中创建一个并把你的字体文件放在那里，不管是什么格式。</p><h2 id="594d" class="mm mn iq bd mo mp mq dn mr ms mt dp mu ko mv mw mx ks my mz na kw nb nc nd ne bi translated">"我们在fonts.css中放什么？"</h2><p id="5eb5" class="pw-post-body-paragraph kd ke iq kf b kg nf ki kj kk ng km kn ko nh kq kr ks ni ku kv kw nj ky kz la ij bi translated">这是我们将使用<code class="fe li lj lk ll b">@font-face</code> <a class="ae kc" href="https://developer.mozilla.org/en-US/docs/Web/CSS/@font-face" rel="noopener ugc nofollow" target="_blank"> at-rule </a>定义自定义字体的地方。对于我们添加的每个字体文件，我们需要添加各自的at-rule。在我们的例子中，我们有两个字体文件，编写的CSS看起来像这样:</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nk"><img src="../Images/54464a9d6207eccdbcaac8dd295c9b80.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nT0nF_q2ce-hj-qyExMGJg.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">fonts.css文件</figcaption></figure><p id="eb27" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe li lj lk ll b">@font-family</code>指定将用作字体属性字体值的名称。我们可以在这里写任何我们想写的东西，但是按照它实际的名字命名是有意义的。</p><p id="db30" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe li lj lk ll b">src</code>参数中，<code class="fe li lj lk ll b">url</code>函数是我们写入字体路径的地方，而format函数为浏览器提供了字体资源是什么格式的提示，因此它可以选择一个合适的字体。可用类型有:<code class="fe li lj lk ll b">"woff"</code>、<code class="fe li lj lk ll b">"woff2"</code>、<code class="fe li lj lk ll b">"truetype"</code>、<code class="fe li lj lk ll b">"opentype"</code>、<code class="fe li lj lk ll b">"embedded-opentype"</code>、<code class="fe li lj lk ll b">"svg"</code>。</p><p id="74cb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于<code class="fe li lj lk ll b">font-weight</code>，我们可以使用数值，如400、600，或者描述符，如<code class="fe li lj lk ll b">normal</code>和<code class="fe li lj lk ll b">bold</code>。</p><p id="8912" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe li lj lk ll b">font-style</code> CSS属性设置一个字体是否应该从它的<code class="fe li lj lk ll b">font-family</code>开始使用正常、倾斜或倾斜的字体样式。</p><p id="c5aa" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了正确加载字体，不要忘记导入<code class="fe li lj lk ll b">_app.tsx</code>中的<code class="fe li lj lk ll b">fonts.css</code>文件</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/3e54d2fbb3691b042160ed0f4377e2bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1368/format:webp/1*GCIJE4C_QYzc6ieQuJpS4Q.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">太多次忘记在这里导入…</figcaption></figure><h2 id="79aa" class="mm mn iq bd mo mp mq dn mr ms mt dp mu ko mv mw mx ks my mz na kw nb nc nd ne bi translated">"为什么叫文档，为什么用下划线？"</h2><p id="7b4f" class="pw-post-body-paragraph kd ke iq kf b kg nf ki kj kk ng km kn ko nh kq kr ks ni ku kv kw nj ky kz la ij bi translated">解释什么是<code class="fe li lj lk ll b">_document.tsx</code>文件超出了本文的范围，但是您可以在这里阅读关于它的所有内容。下面你可以看到一个基本的样子。</p><figure class="mi mj mk ml gt jr"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="d720" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这个文件中，我们将通过使用NextJS Head组件中的link标签导入前面添加的字体文件。</p><figure class="mi mj mk ml gt jr"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="c974" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的要点中，我们从“next/document”中导入了Head组件，并为我们的字体文件添加了链接。根据你的字体格式，你可能需要改变的唯一的东西就是链接类型。在我们的例子中,“font/ttf”就可以了。</p><h2 id="03cd" class="mm mn iq bd mo mp mq dn mr ms mt dp mu ko mv mw mx ks my mz na kw nb nc nd ne bi translated">“就这样？”</h2><p id="359c" class="pw-post-body-paragraph kd ke iq kf b kg nf ki kj kk ng km kn ko nh kq kr ks ni ku kv kw nj ky kz la ij bi translated">差不多吧，是的。现在你应该能够将你的字体添加到你的内容中了，比如像这样，瞧！</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi no"><img src="../Images/a438ca2576bee262fe332baa7739485b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VXofNkSgqAq-5Y407qIqdw.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">终于，我们有了自己的字体</figcaption></figure><h2 id="e757" class="mm mn iq bd mo mp mq dn mr ms mt dp mu ko mv mw mx ks my mz na kw nb nc nd ne bi translated">额外收获:TailwindCSS的自定义字体</h2><p id="6514" class="pw-post-body-paragraph kd ke iq kf b kg nf ki kj kk ng km kn ko nh kq kr ks ni ku kv kw nj ky kz la ij bi translated">因为几乎每个人和他们的猫都在挖掘TailwindCSS，下面是如何将自定义字体合并到TailwindCSS类中。</p><figure class="mi mj mk ml gt jr"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="22c7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在您的<code class="fe li lj lk ll b">tailwind.config.js</code>文件中，通过在<code class="fe li lj lk ll b">fontFamily</code>键中添加一个新条目来扩展默认主题，其中键是您想要如何命名新的Tailwind类，值是将分配给该类的字体系列。在上面的例子中，我们添加了多个字体系列，以防我们的字体由于某种原因无法加载。你现在应该能够像这样使用<code class="fe li lj lk ll b">font-OptimusPrinceps</code>类了:</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi np"><img src="../Images/b0a4e50bafa6a290698ec9a430909294.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n58AL0Cr0uc5zNJipATTPA.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">使用一个Tailwind类来设置我们的自定义字体。</figcaption></figure></div><div class="ab cl lm ln hu lo" role="separator"><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr"/></div><div class="ij ik il im in"><p id="7069" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">就这样了，伙计们。这就是在NextJS中使用自定义字体的方法。</p><p id="30a9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">资源:</strong></p><ul class=""><li id="08e1" class="lt lu iq kf b kg kh kk kl ko lv ks lw kw lx la ly lz ma mb bi translated">擎天柱王子字体:<a class="ae kc" href="https://www.dafont.com/optimusprinceps.font" rel="noopener ugc nofollow" target="_blank">https://www.dafont.com/optimusprinceps.font</a></li><li id="3996" class="lt lu iq kf b kg mc kk md ko me ks mf kw mg la ly lz ma mb bi translated">@ font-face:【https://developer.mozilla.org/en-US/docs/Web/CSS/@font-face】T2</li><li id="75f8" class="lt lu iq kf b kg mc kk md ko me ks mf kw mg la ly lz ma mb bi translated">NextJS自定义文档:【https://nextjs.org/docs/advanced-features/custom-document T4】</li></ul></div></div>    
</body>
</html>