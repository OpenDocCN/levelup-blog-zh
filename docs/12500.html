<html>
<head>
<title>TypeScript — Difference between ‘any’ and ‘unknown’ Types</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">TypeScript——“任何”和“未知”类型之间的区别</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/typescript-difference-between-any-and-unknown-types-1fff4bf232a?source=collection_archive---------2-----------------------#2022-06-15">https://levelup.gitconnected.com/typescript-difference-between-any-and-unknown-types-1fff4bf232a?source=collection_archive---------2-----------------------#2022-06-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/1a688edc63405491744c700f8c6ff122.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*VKN3KCyjfzZPKdJH"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><a class="ae kc" href="https://unsplash.com/@bradhelmink?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Brad Helmink </a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="cbe8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我猜你已经知道TypeScript是<a class="ae kc" href="https://www.w3schools.com/js/default.asp" rel="noopener ugc nofollow" target="_blank"> JavaScript </a>的“风味”。</p><p id="6924" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">本文假设您对这两者或多或少都很熟悉。但是，我将首先简要介绍一下TypeScript。</p><p id="55dd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">基本上，TypeScript是添加了类型语法的JavaScript。<a class="ae kc" href="https://www.w3schools.com/" rel="noopener ugc nofollow" target="_blank"> W3Schools </a>将TypeScript定义为JavaScript的语法超集，增加了静态类型。这基本上意味着TypeScript在JavaScript之上添加了语法，允许开发人员添加类型。</p><h1 id="c274" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">TypeScript基本类型</h1><p id="6187" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">下面是TypeScript中的主要基元类型:</p><p id="b6a8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">布尔值— </strong>真值或假值</p><p id="a36b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">数字— </strong>整数和浮点值</p><p id="1b40" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">字符串— </strong>用引号括起来的文本值。例如<code class="fe me mf mg mh b">"TypeScript is Awesome"</code></p><p id="50e2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir"> any </strong> —禁用类型检查，有效地允许使用所有类型</p><p id="fcae" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">未知的——类似于任何一种选择，但更安全</p><p id="3a03" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir"> never </strong> —有效地抛出一个定义的错误</p><p id="18f5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你一定注意到了上面对<code class="fe me mf mg mh b">any</code>和<code class="fe me mf mg mh b">unknown</code>类型的描述之间的模糊性。这就把我们带到了今天讨论的核心。</p><h1 id="6e73" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">“任何”和“未知”类型之间的区别</h1><p id="f1df" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我将介绍<code class="fe me mf mg mh b">any</code>和<code class="fe me mf mg mh b">unknown</code>的两个主要区别</p><ol class=""><li id="84eb" class="mi mj iq kf b kg kh kk kl ko mk ks ml kw mm la mn mo mp mq bi translated">TypeScript强迫我们在处理<code class="fe me mf mg mh b">unknown</code>值之前确定它的类型，但是它不处理<code class="fe me mf mg mh b">any</code>值。</li></ol><p id="1637" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir"> <em class="mr">例如:</em> </strong></p><pre class="ms mt mu mv gt mw mh mx my aw mz bi"><span id="eeb0" class="na lc iq mh b gy nb nc l nd ne">let anyValue: any = 1;<br/>let unknownValue: unknown = 1;</span><span id="d73c" class="na lc iq mh b gy nf nc l nd ne">anyValue.helloworld(); <em class="mr">// No error</em><br/>unknownValue.helloWorld();  <em class="mr">// we get a TypeScript error</em></span></pre><p id="3a21" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">2.我们不能将<code class="fe me mf mg mh b">unknown</code>赋给除了它本身或<code class="fe me mf mg mh b">any</code>之外的任何东西，但是我们可以将<code class="fe me mf mg mh b">any</code>赋给任何东西。</p><p id="65cd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir"> <em class="mr">举例:</em> </strong></p><pre class="ms mt mu mv gt mw mh mx my aw mz bi"><span id="fbbc" class="na lc iq mh b gy nb nc l nd ne">let anyValue: any = 1;<br/>let unknownValue: unknown = 1;</span><span id="2a93" class="na lc iq mh b gy nf nc l nd ne">let str: string;</span><span id="fad8" class="na lc iq mh b gy nf nc l nd ne">str = anyValue; <em class="mr">// No error</em><br/>str = unknownValue; <em class="mr">// We get a TypeScript error</em></span></pre><p id="9fc6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如您所见，这些约束确保我们在使用<code class="fe me mf mg mh b">unknown</code>值之前对其进行验证，这对于减少运行时错误的可能性非常重要。</p><p id="f98c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们看几个使用案例:</p><h1 id="827f" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><strong class="ak">用例1-描述未知值:</strong></h1><p id="e3d7" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用<code class="fe me mf mg mh b">unknown</code>类型来描述一个我们不知道的值。例如，从网络调用返回的值:</p><pre class="ms mt mu mv gt mw mh mx my aw mz bi"><span id="a706" class="na lc iq mh b gy nb nc l nd ne">let data: unknown = getSomeValueFromSomeWhere();</span><span id="05cf" class="na lc iq mh b gy nf nc l nd ne">if (typeof data === 'string') {<br/>   //data is a string.<br/>} else if (Array.isArray(data)) {<br/>   //data is an array.<br/>} else if (typeof data === 'object') {<br/>   //data is an object.<br/>}</span></pre><h1 id="88b1" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">用例2 —在类型断言中:</h1><p id="b0e8" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">在TypeScript中，<a class="ae kc" href="https://www.geeksforgeeks.org/explain-type-assertions-in-typescript/#:~:text=In%20Typescript%2C%20Type%20assertion%20is,compiler%20not%20to%20deduce%20it." rel="noopener ugc nofollow" target="_blank">类型断言</a>是一种通知编译器变量类型的技术。类型断言类似于类型转换，但它不重构代码。我们可以使用类型断言来指定一个值的类型，并告诉编译器不要推断它。</p><p id="4aa5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但是，我们不能简单地断言一个值可以有我们想要的任何类型。我们不能断言一个值的类型与该值的实际类型不重叠。</p><p id="0a09" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir"> <em class="mr">举例:</em> </strong></p><pre class="ms mt mu mv gt mw mh mx my aw mz bi"><span id="e20d" class="na lc iq mh b gy nb nc l nd ne">let value = '1' as number; /<em class="mr">/ Error, we can't say that a string is a number</em></span><span id="43a1" class="na lc iq mh b gy nf nc l nd ne">interface Vehicle {<br/>  name: string;<br/>  model: string;<br/>}</span><span id="6201" class="na lc iq mh b gy nf nc l nd ne">function buyVehicle(vehicle: Vehicle){}</span><span id="ea54" class="na lc iq mh b gy nf nc l nd ne">buyVehicle({niceVehicle: ''} as Vehicle); <em class="mr">// Error, this object doesn't have the required properties of the Vehicle interface.</em></span></pre><p id="e8fc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">断言一个值的类型不与该值的实际类型重叠的一种解决方法是首先断言该值是未知的:</p><pre class="ms mt mu mv gt mw mh mx my aw mz bi"><span id="37a5" class="na lc iq mh b gy nb nc l nd ne">buyVehicle({niceVehicle: ''} as unknown as Vehicle)</span></pre><p id="8fb3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然而，我们应该避免这种变通方法，因为它只会使我们的代码不安全。</p><h1 id="1bab" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><strong class="ak">结论</strong></h1><p id="7186" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">类型<code class="fe me mf mg mh b">any</code>和<code class="fe me mf mg mh b">unknown</code>是TypeScript中的两种基本类型，有时会派上用场。</p><p id="3d02" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">any</code>可能是一种有用的方法，因为它禁用了类型检查，但TypeScript将无法提供类型安全，并且依赖于类型数据的工具(如自动完成)将无法工作。</p><p id="2e53" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">unknown</code>最适合在我们不知道数据类型的时候使用。要在以后添加类型，我们需要转换它。</p><p id="5e9c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir"> NB: </strong>我们要尽量避免使用<code class="fe me mf mg mh b">any</code>。</p><p id="2ad1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi">— -</p><p id="0d18" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">希望你对这篇文章感兴趣，如果你感兴趣，请留下一些掌声，如果你还不知道，请不要忘记关注我，这样你就可以在我每次发帖时获得更多精彩的内容。谢了。</p></div></div>    
</body>
</html>