<html>
<head>
<title>Our Enterprise Docker Solution for Migration to the Cloud</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我们面向云迁移的企业Docker解决方案</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/our-enterprise-docker-solution-for-migration-to-the-cloud-d7bb9d1a796b?source=collection_archive---------18-----------------------#2021-06-27">https://levelup.gitconnected.com/our-enterprise-docker-solution-for-migration-to-the-cloud-d7bb9d1a796b?source=collection_archive---------18-----------------------#2021-06-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="744b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这是一个关于我们第一次推出Docker的故事，它发生在我以前作为承包商工作过的一家公司。代码，以及我们遇到的陷阱，都有详细介绍。被警告；这篇博客文章不是对Docker的介绍。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/8eeaa8b4120621d955f43869cf010783.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qkaqNqT-JO4rfiGdREDmGw.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated"><em class="le">图一。我们的目标是实现向云迁移的应用现代化。图片:</em> <a class="ae lf" href="https://cloud.google.com/blog/products/application-development/application-rationalization-what-why-and-how" rel="noopener ugc nofollow" target="_blank"> <em class="le">风镜云博客</em> </a> <em class="le">。</em></figcaption></figure><h2 id="7d8a" class="lg lh it bd li lj lk dn ll lm ln dp lo kb lp lq lr kf ls lt lu kj lv lw lx ly bi translated">一开始，是有要求的。</h2><p id="723b" class="pw-post-body-paragraph jq jr it js b jt lz jv jw jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn im bi translated">我在一个<em class="me">开发</em>团队中，该团队被重新定向为创建Docker图像，以便在全公司范围内使用。</p><p id="dd6e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">无论我们得出什么样的解决方案，都必须有助于向云的迁移。我们决定先循序渐进，解决本地问题，然后再考虑云需求。</p><p id="16c5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们让我们的决定变得简单，注意到我们所有的应用都需要从单片架构升级到微服务架构。</p><p id="1a66" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">坦白地说，我们还没有准备好带着重构建议去找上层管理人员。目标是降低成本，而不是增加迁移到云的开发时间和成本。这是以后的另一篇博客文章。</p><h2 id="c61b" class="lg lh it bd li lj lk dn ll lm ln dp lo kb lp lq lr kf ls lt lu kj lv lw lx ly bi translated">我们从需要解决的本地开发和测试问题开始。</h2><p id="5ffd" class="pw-post-body-paragraph jq jr it js b jt lz jv jw jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn im bi translated">以前，每个开发人员都有自己独特的沙箱来进行开发。如果开发人员必须恢复他们的开发环境，这将需要几个小时。由于<em class="me">历史</em>特性，一些开发人员转而使用Pycharm。这个特性有助于解决Python包的版本控制和名称空间冲突，但没有解决。</p><p id="e5c8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="me">测试</em>需要一天或更长的时间来创建一个requirements.txt环境，通过查看源文件来解开导入语句。——他们不快乐。</p><p id="9948" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们为每个项目使用私有的Github，为<em class="me">开发</em>、<em class="me">测试</em>、<em class="me">阶段</em>和<em class="me">生产</em>使用单独的回购(sitories)。开发过程。</p><p id="af50" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">开发人员完成单元测试。代码在提交到Github repo(sitory)之前必须通过单元测试。其他<em class="me">开发</em>团队执行代码审查、集成测试，并合并到<em class="me">开发</em> Github repo(sitory)中。</p><p id="5781" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">技术决策者认为这是开发/运营部门的责任。一旦这样一个团队有了工作人员，与Docker相关的东西将会移交给他们。</p><p id="5d38" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu"> <em class="me">注</em> </strong> <em class="me">:被称为测试的组是验收测试。性能测试决定了阶段和产品是否接受代码更改。</em></p><h2 id="7cc7" class="lg lh it bd li lj lk dn ll lm ln dp lo kb lp lq lr kf ls lt lu kj lv lw lx ly bi translated">Docker图像的第一个alpha版本</h2><p id="5649" class="pw-post-body-paragraph jq jr it js b jt lz jv jw jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn im bi translated">我们开始从一组<em class="me">开发</em>和<em class="me">测试</em> Python <em class="me"> </em>包和工具构建Docker映像。</p><p id="c597" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们向六个<em class="me">开发</em>团队中的两个发布了alpha版本。第一个alpha版本是一个失败，因为只有一个开发组(我们的)会/可以使用这个Docker映像。</p><p id="a549" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们被告知Docker图像的第一个alpha版本(未显示)是DOA(到达时死亡)。事实证明，我们严重偏向于Python-机器学习-后端类型。我们将大多数开发人员排除在第一批alpha Docker映像之外。</p><h2 id="ebb8" class="lg lh it bd li lj lk dn ll lm ln dp lo kb lp lq lr kf ls lt lu kj lv lw lx ly bi translated">Docker图像的第二个alpha版本</h2><p id="f3c0" class="pw-post-body-paragraph jq jr it js b jt lz jv jw jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn im bi translated">然后我们出去听听，看看其他小组，看看他们在用什么。<em class="me">开发</em>和<em class="me">测试</em>使用一个<em class="me"> </em>大范围的封装。其中一些Python包并不是生产所必需的。<em class="me">测试</em>需要一个用于<em class="me">生产</em>的Docker映像，它是验收测试所需包的子集。</p><p id="f43b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">起初，我们认为这些是相互冲突的需求。然后我们意识到这些额外的需求并不是我们的需求。这是我们第一次发布的错误。</p><p id="bc77" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">第二个alpha版本是成功的，因为所有的<em class="me">开发</em>团队都部署了Docker映像来进行<em class="me">测试</em>。他们通过git克隆一个URL与其他人分享他们的工作。URL在标记为Docker的子目录中有<em class="me"> Dockerfile </em>和Docker image。开发人员将定制说明和构建说明放在README.md中。<em class="me"> Dev </em>需要的Python包的最小集合在<code class="fe mf mg mh mi b">requirements.txt</code>文件中列出。</p><p id="faf4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这种方法虽然简单，但已经成功地扩展到所有六个<em class="me">开发</em>团队和两个<em class="me">测试</em>团队。更重要的是，<em class="me"> Test发现【the requirements.txt文件是关于开发人员使用了什么以及<em class="me"> Production </em> Docker映像需要什么的文档。</em></p><p id="e619" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="me">开发人员的</em>和<em class="me">测试人员的</em>最显著的回报是在标准Docker映像中创建和测试应用程序，尽管<em class="me">开发人员的</em>操作系统是MacOS，而<em class="me">测试、试运行和生产的操作系统是</em> Ubuntu。</p><p id="d3f4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">基于这次展示，官方的公司目标是将每个人都转移到Docker: <config>。</config></p><p id="9ff8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我希望这为我们迁移到持续集成/持续交付(CI/CD)文化奠定了基础。</p><p id="e8d5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">当用户说“我在Docker: <em class="me"> Dev </em>或Docker: &lt; config &gt;上”时，就是成功的量度而不是“我在苹果电脑上:&lt;什么的&gt;”我们想要创造一个比电脑操作系统更重要的世界。</p><h2 id="0d6e" class="lg lh it bd li lj lk dn ll lm ln dp lo kb lp lq lr kf ls lt lu kj lv lw lx ly bi translated">Docker和Docker-撰写</h2><p id="0a62" class="pw-post-body-paragraph jq jr it js b jt lz jv jw jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn im bi translated">Docker用于管理应用程序的单个容器映像。</p><p id="3d87" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Docker-Compose用于为同一个应用程序同时管理几个容器。这个工具提供了与Docker相同的功能，但是允许您拥有更复杂的应用程序。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/d2a0729ff320e358f25093dc6ff3b168.png" data-original-src="https://miro.medium.com/v2/resize:fit:1296/format:webp/1*onkQl6UNLaa3h0Os4TKSfA.jpeg"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">插图由<a class="ae lf" href="http://ralvearcottman@gmail.com" rel="noopener ugc nofollow" target="_blank">雷切尔·科特曼</a>绘制</figcaption></figure><p id="c937" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">目前，我们只对一个Docker图像使用Docker合成。在某些时候，我们认为我们在云上使用Docker图像和Kubernetes。</p><p id="855f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="me">开发、测试和阶段</em>的<code class="fe mf mg mh mi b">dockerfile </code>为:</p><pre class="kp kq kr ks gt mk mi ml mm aw mn bi"><span id="1f0e" class="lg lh it mi b gy mo mp l mq mr"><strong class="mi iu">FROM </strong>python:3.7<br/><strong class="mi iu">FROM </strong>jupyter<strong class="mi iu">/</strong>minimal-notebook<br/><strong class="mi iu">WORKDIR /</strong>dev-base<br/><strong class="mi iu">RUN </strong>python <strong class="mi iu">-</strong>m pip install <strong class="mi iu">--</strong>upgrade pip<br/><strong class="mi iu">RUN </strong>python <strong class="mi iu">-</strong>m pip install jupyterthemes<br/><strong class="mi iu">RUN </strong>python <strong class="mi iu">-</strong>m pip  install <strong class="mi iu">--</strong>upgrade jupyterthemes<br/><strong class="mi iu">RUN </strong>python <strong class="mi iu">-</strong>m pip  install jupyter_contrib_nbextensions<br/><strong class="mi iu">RUN </strong>jupyter contrib nbextension install <strong class="mi iu">--</strong>user<br/><strong class="mi iu">COPY </strong>requirements.txt .<strong class="mi iu">/</strong>requirements.txt<br/><strong class="mi iu">RUN </strong>python <strong class="mi iu">-</strong>m pip  install <strong class="mi iu">-</strong>r requirements.txt</span><span id="5908" class="lg lh it mi b gy ms mp l mq mr"><strong class="mi iu">COPY ../</strong>requirements.txt .<strong class="mi iu">/</strong>requirements.txt<br/><strong class="mi iu">RUN </strong>python <strong class="mi iu">-</strong>m pip install <strong class="mi iu">-</strong>r requirements.txt</span></pre><p id="ba2a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">参考<strong class="js iu">:</strong><a class="ae lf" href="https://docs.docker.com/engine/reference/builder/" rel="noopener ugc nofollow" target="_blank">https://docs.docker.com/engine/reference/builder/</a></p><p id="1590" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">第二个alpha版本的主要特点是使用本地<code class="fe mf mg mh mi b">&lt;project-name&gt;/requirements.txt.</code>我们发布了一个<code class="fe mf mg mh mi b">dockerfile</code>模板，使得<em class="me">开发</em>和<em class="me">测试</em>能够通过<code class="fe mf mg mh mi b">dockerfile.</code>定制每个Docker图像</p><p id="693e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe mf mg mh mi b">python -m pip install ...</code>是因为<code class="fe mf mg mh mi b">pip install ... </code>被弃用。</p><p id="13b2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Docker Compose可以将多个Docker容器合并到一个运行时映像中。将来，当我们的本地环境需要多个容器映像时，我们将需要这个工具。</p><p id="f2bc" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="me"> Dev </em>的<code class="fe mf mg mh mi b">dockerfile-compose.yml </code>为:</p><pre class="kp kq kr ks gt mk mi ml mm aw mn bi"><span id="f4c5" class="lg lh it mi b gy mo mp l mq mr"><strong class="mi iu">version</strong>: '3'<br/><strong class="mi iu">services</strong>:<br/>  <strong class="mi iu">notebook</strong>:<br/>    <strong class="mi iu">build</strong>:<br/>      <strong class="mi iu">context</strong>: ./docker<br/>    <strong class="mi iu">ports</strong>:<br/>        - "8888:8888"<br/>    <strong class="mi iu">volumes</strong>:<br/>      - ../../.:/docker</span><span id="1bff" class="lg lh it mi b gy ms mp l mq mr"><strong class="mi iu">working_dir</strong>: /docker</span></pre><p id="b185" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">参考:<a class="ae lf" href="https://docs.docker.com/compose/compose-file/" rel="noopener ugc nofollow" target="_blank">https://docs.docker.com/compose/compose-file</a>/</p><p id="1787" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">使用以下命令构建、运行和关闭docker容器映像:</p><pre class="kp kq kr ks gt mk mi ml mm aw mn bi"><span id="93c4" class="lg lh it mi b gy mo mp l mq mr"><em class="me">#  compose all containers (services) into one image<br/>#    $ cd to docker-compose.yaml directory;<br/>$ docker-compose build</em></span><span id="16aa" class="lg lh it mi b gy ms mp l mq mr"><em class="me"># runs docker-compose image in background<br/>$ docker-compose up &amp;</em></span><span id="af96" class="lg lh it mi b gy ms mp l mq mr"><em class="me"># shuts down docker-compose image in background<br/>$ docker-compose down</em></span></pre><h2 id="8aad" class="lg lh it bd li lj lk dn ll lm ln dp lo kb lp lq lr kf ls lt lu kj lv lw lx ly bi translated">第二个Alpha版本的开发目录结构</h2><p id="5780" class="pw-post-body-paragraph jq jr it js b jt lz jv jw jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn im bi translated">我们有一个共享磁盘，任何人都可以将模板文件复制到他们的本地目录结构中。</p><pre class="kp kq kr ks gt mk mi ml mm aw mn bi"><span id="e9c4" class="lg lh it mi b gy mo mp l mq mr">|-- dockerSeasons<br/>     |-- dev<br/>         |-- Docker<br/>             |--- Dockerfile<br/>         |--- docker-compose.yml</span></pre><p id="aaaf" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这有点苛刻，但是我们要求<em class="me"> Dev，</em>实际上任何涉及到我们软件服务生命周期的人，将他们开发目录结构的顶层节点命名为<code class="fe mf mg mh mi b">PROJECTS.</code></p><p id="eb1d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">开发人员创建了以下目录结构:</p><pre class="kp kq kr ks gt mk mi ml mm aw mn bi"><span id="b11f" class="lg lh it mi b gy mo mp l mq mr">- PROJECTS<br/>.<br/>.<br/>.<br/>    |-- &lt;project-name&gt;<br/>        |-- docker<br/>            |--- Dockerfile<br/>        |--- docker-compose.yml<br/>        |-- src<br/>        |-- test<br/>        |--- requirements.txt<br/>        |--- README.md<br/>.<br/>.</span></pre><p id="088b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">然后开发者创建<code class="fe mf mg mh mi b">&lt;project-name&gt;/docker/requirements.txt</code>(在<code class="fe mf mg mh mi b">&lt;project-name&gt;/docker</code>目录下):</p><pre class="kp kq kr ks gt mk mi ml mm aw mn bi"><span id="43bd" class="lg lh it mi b gy mo mp l mq mr"><em class="me">$ ln ../requirements.txt requirements.txt</em></span></pre><p id="2f96" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="me">测试</em>创建了以下目录结构:</p><pre class="kp kq kr ks gt mk mi ml mm aw mn bi"><span id="9df6" class="lg lh it mi b gy mo mp l mq mr">- PROJECTS<br/>.<br/>.<br/>.<br/>    |-- &lt;project-name&gt;<br/>         |-- src<br/>         |-- test<br/>             |-- docker<br/>                 |--- Dockerfile<br/>             |--- docker-compose.yml</span><span id="38d5" class="lg lh it mi b gy ms mp l mq mr">|-- test<br/>             |--- requirements.txt<br/>             |--- README.md<br/>         |-- stage<br/>             |-- docker<br/>                 |--- Dockerfile<br/>             |--- docker-compose.yml<br/>             |--- requirements.txt<br/>             |--- README.md<br/>.<br/>.<br/>.</span></pre><p id="4d36" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="me">测试</em>将暂存文件移动到3台冗余生产服务器。服务器场是内部的。</p><h2 id="014e" class="lg lh it bd li lj lk dn ll lm ln dp lo kb lp lq lr kf ls lt lu kj lv lw lx ly bi translated">我们Docker解决方案的说明在README.md中</h2><p id="2904" class="pw-post-body-paragraph jq jr it js b jt lz jv jw jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn im bi translated"><code class="fe mf mg mh mi b">README.md </code>文件是:</p><pre class="kp kq kr ks gt mk mi ml mm aw mn bi"><span id="4490" class="lg lh it mi b gy mo mp l mq mr"><em class="me"># docker-compose commands<br/># ref email: deploying &lt;name-withheld&gt; docker for your &lt;project-name&gt;<br/># 1. copy http:&lt;devBase&gt;/dist/dockerSeasons/docker directory <br/>#    in each of your &lt;project-name&gt;s directories.<br/># 2. copy http:&lt;devBase&gt;/dist/dockerSeasons/docker-compose.yaml file <br/>#    in each of your &lt;project-name&gt;s directories.<br/># 3. symbolically link your  &lt;project-name&gt;s requirements.txt <br/>#    to /docker/requirements.txt<br/>#    (goto &lt;project-name&gt;/docker);<br/>#    $ ln ../requirements.txt requirements.txt<br/># ref: </em><a class="ae lf" href="https://pip.pypa.io/en/stable/user_guide/#requirements-files" rel="noopener ugc nofollow" target="_blank"><em class="me">https://pip.pypa.io/en/stable/user_guide/#requirements-files</em></a></span><span id="2d24" class="lg lh it mi b gy ms mp l mq mr"><em class="me"># 4. compose all containers (services) into one image<br/>#    $ cd to docker-compose.yaml directory;<br/>#    $ docker-compose build</em></span><span id="132b" class="lg lh it mi b gy ms mp l mq mr"><em class="me"># 5.runs docker-compose image in background<br/>#    $ docker-compose up &amp; (add to &lt;home&gt;/&lt;uid&gt;/.prolile)<br/>#  note:<br/>#    $ docker-compose up -d<br/>#    will NOT output <br/>#  </em><a class="ae lf" href="http://127.0.0.1:8888/?token=a5bcd81e7c5b126cb1b67ddf7fa6ce4a49eff7cef9f48ad" rel="noopener ugc nofollow" target="_blank"><em class="me">http://127.0.0.1:8888/?token=a5bcd81e7c5b126cb1b67ddf7fa6ce4a49eff7cef9f48ad</em></a><em class="me"> (example)<br/># 6.shuts down docker-compose image in background<br/>#    $ docker-compose down</em></span><span id="9179" class="lg lh it mi b gy ms mp l mq mr"><em class="me"># note: image is a running container</em></span><span id="326a" class="lg lh it mi b gy ms mp l mq mr"><em class="me">#  show all docker images <br/>#  $ docker ps -a<br/>#  show all container that can make images<br/>#   $ docker images</em></span><span id="71ba" class="lg lh it mi b gy ms mp l mq mr"><em class="me"># stops all docker images<br/>#### docker stop $(docker ps -a -q)<br/># removes all stopped docker images<br/>#### docker rm $(docker ps -a -q)</em></span><span id="aecc" class="lg lh it mi b gy ms mp l mq mr"><em class="me">#  delete containers and images<br/>#  - all stopped containers<br/>#  - all networks not used by at least one container<br/>#  - all dangling images<br/>#  - all dangling build cache<br/># $ docker system prune<br/># and all unused images <br/># $ docker system prune -a</em></span><span id="49b0" class="lg lh it mi b gy ms mp l mq mr"><em class="me"># if using Pycharm<br/># ref: </em><a class="ae lf" href="https://www.jetbrains.com/help/pycharm/using-docker-as-a-remote-interpreter.html" rel="noopener ugc nofollow" target="_blank"><em class="me">https://www.jetbrains.com/help/pycharm/using-docker-as-a-remote-interpreter.html</em></a><em class="me"><br/>#</em></span><span id="353e" class="lg lh it mi b gy ms mp l mq mr"><em class="me"># if you want add to .bashrc_profile or bashrc.txt<br/>#    alias up&lt;project-name&gt;="cd ~/Documents/PROJECTS/paso; docker-compose up &amp;"<br/>#    alias down&lt;project-name&gt;="cd ~/PROJECTS/paso; docker-compose down"<br/>#    alias buil&lt;project-name&gt;="cd ~/PROJECTS/paso; docker-compose build"</em></span></pre><h2 id="df96" class="lg lh it bd li lj lk dn ll lm ln dp lo kb lp lq lr kf ls lt lu kj lv lw lx ly bi translated">该公司没有使用云</h2><p id="11cf" class="pw-post-body-paragraph jq jr it js b jt lz jv jw jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn im bi translated">财务部门决定公司是否应该将部分或全部<em class="me">开发</em>、<em class="me">测试</em>和<em class="me">生产</em>转移到云上。公司决策者认为这是外包。</p><p id="945d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果让我猜测，我们会通过转移我们的一些<em class="me">生产</em>服务，与至少两家云提供商进行试验。可靠性和可扩展性是首要的，而成本也是该公司优先考虑的问题。内部服务器群的生产仍然存在。</p><p id="3006" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们楼层从来没有停电过。(好吧，打印机有时候会离线。).此外，还有一个备份位置，以防这个网站关闭。</p><p id="e1d0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我意识到我们的足迹很不寻常。然而，该公司的资金比成本更大，以保证停机时间少于全球金融市场停机时间。公司希望承担比我们所知的世界末日概率更小的风险，</p><h2 id="13a9" class="lg lh it bd li lj lk dn ll lm ln dp lo kb lp lq lr kf ls lt lu kj lv lw lx ly bi translated">Docker资源</h2><p id="c4be" class="pw-post-body-paragraph jq jr it js b jt lz jv jw jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn im bi translated">许多有用的资源解释了Docker如何以及为什么是目前领先的虚拟化平台。我仅列举其中几个参考文献。</p><div class="mt mu gp gr mv mw"><a href="https://docs.docker.com/engine/docker-overview/" rel="noopener  ugc nofollow" target="_blank"><div class="mx ab fo"><div class="my ab mz cl cj na"><h2 class="bd iu gy z fp nb fr fs nc fu fw is bi translated">Docker概述</h2><div class="nd l"><h3 class="bd b gy z fp nb fr fs nc fu fw dk translated">Docker是一个开发、发布和运行应用程序的开放平台。Docker使您能够分离您的…</h3></div><div class="ne l"><p class="bd b dl z fp nb fr fs nc fu fw dk translated">docs.docker.com</p></div></div><div class="nf l"><div class="ng l nh ni nj nf nk ky mw"/></div></div></a></div><div class="mt mu gp gr mv mw"><a href="https://www.guru99.com/docker-tutorial.html" rel="noopener  ugc nofollow" target="_blank"><div class="mx ab fo"><div class="my ab mz cl cj na"><h2 class="bd iu gy z fp nb fr fs nc fu fw is bi translated">Docker初学者教程:什么是，架构，安装，命令</h2><div class="nd l"><h3 class="bd b gy z fp nb fr fs nc fu fw dk translated">早期，部署服务的过程缓慢而痛苦。首先，开发人员正在编写代码；然后…</h3></div><div class="ne l"><p class="bd b dl z fp nb fr fs nc fu fw dk translated">www.guru99.com</p></div></div><div class="nf l"><div class="nl l nh ni nj nf nk ky mw"/></div></div></a></div><div class="mt mu gp gr mv mw"><a href="https://github.com/docker/labs/tree/master/12factor" rel="noopener  ugc nofollow" target="_blank"><div class="mx ab fo"><div class="my ab mz cl cj na"><h2 class="bd iu gy z fp nb fr fs nc fu fw is bi translated">码头工人/实验室</h2><div class="nd l"><h3 class="bd b gy z fp nb fr fs nc fu fw dk translated">如今，许多应用程序都是部署在云中的服务，部署在云提供商(如Amazon)的基础设施上…</h3></div><div class="ne l"><p class="bd b dl z fp nb fr fs nc fu fw dk translated">github.com</p></div></div><div class="nf l"><div class="nm l nh ni nj nf nk ky mw"/></div></div></a></div><h1 id="e9ac" class="nn lh it bd li no np nq ll nr ns nt lo nu nv nw lr nx ny nz lu oa ob oc lx od bi translated">摘要</h1><p id="9043" class="pw-post-body-paragraph jq jr it js b jt lz jv jw jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn im bi translated">在这篇文章中，我详细介绍了我们为什么以及如何在公司中启用Docker解决方案。我展示了目录结构和Docker代码。我们发现使用Docker-Compose解决方案更加灵活。</p><p id="37c2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">本文中显示的所有代码都是<a class="ae lf" href="https://github.com/bcottman/dockerSeasons" rel="noopener ugc nofollow" target="_blank">这里。</a></p><p id="d5a2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我被允许分享我们迄今为止的旅程。当我们做出重大改变时，将会有更新。</p><p id="72cf" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">编码快乐！</p></div></div>    
</body>
</html>