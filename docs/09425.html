<html>
<head>
<title>Optimize Images From an External Website With the Image Component From Next.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Next.js中的图像组件优化外部网站中的图像</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/optimize-images-from-an-external-website-with-the-image-component-from-next-js-aa104a1f78e0?source=collection_archive---------2-----------------------#2021-08-10">https://levelup.gitconnected.com/optimize-images-from-an-external-website-with-the-image-component-from-next-js-aa104a1f78e0?source=collection_archive---------2-----------------------#2021-08-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="dc57" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Next.js中图像组件的介绍</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/2dc90a8124223f860b132a416b9a7bdd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*CrYdlwSQ95QjgGL6"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">马库斯·斯皮斯克在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="ce1c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Next.js是我最喜欢的前端框架，因为它比一个基本的React应用程序有很多好处。其中一个好处是他们在版本10中添加的内置图像组件和自动图像优化。</p><p id="e4e3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我们将看看Next.js中的Image组件，并学习如何使用它来优化来自外部网站的图像。对于这个例子，我们将在一个<code class="fe lv lw lx ly b">create-next-app</code>起始项目中工作。</p><p id="ba5f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您不知道Next.js是什么，请查看下面的文章开始学习。然后回到本文来学习图像组件。</p><div class="lz ma gp gr mb mc"><a href="https://blog.devgenius.io/what-i-learned-from-the-create-a-next-js-app-tutorial-1f506b56173d" rel="noopener  ugc nofollow" target="_blank"><div class="md ab fo"><div class="me ab mf cl cj mg"><h2 class="bd iu gy z fp mh fr fs mi fu fw is bi translated">我从Create a Next.js应用程序教程中学到了什么</h2><div class="mj l"><h3 class="bd b gy z fp mh fr fs mi fu fw dk translated">Next.js路由、样式、预渲染和部署简介</h3></div><div class="mk l"><p class="bd b dl z fp mh fr fs mi fu fw dk translated">blog.devgenius.io</p></div></div><div class="ml l"><div class="mm l mn mo mp ml mq ks mc"/></div></div></a></div><p id="0ab9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文结束时，您应该对以下内容有所了解:</p><ul class=""><li id="2ebe" class="mr ms it lb b lc ld lf lg li mt lm mu lq mv lu mw mx my mz bi translated">图像组件是什么？</li><li id="0261" class="mr ms it lb b lc na lf nb li nc lm nd lq ne lu mw mx my mz bi translated">使用图像组件有什么好处？</li><li id="e4a8" class="mr ms it lb b lc na lf nb li nc lm nd lq ne lu mw mx my mz bi translated">如何优化外部网站托管的图片？</li><li id="e141" class="mr ms it lb b lc na lf nb li nc lm nd lq ne lu mw mx my mz bi translated">如何在项目中使用图像组件？</li><li id="3b9a" class="mr ms it lb b lc na lf nb li nc lm nd lq ne lu mw mx my mz bi translated">如何拉伸图像以适合父元素？</li></ul></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><h1 id="c967" class="nm nn it bd no np nq nr ns nt nu nv nw jz nx ka ny kc nz kd oa kf ob kg oc od bi translated">图像组件</h1><p id="f72f" class="pw-post-body-paragraph kz la it lb b lc oe ju le lf of jx lh li og lk ll lm oh lo lp lq oi ls lt lu im bi translated">来自Next.js的图像组件是HTML <code class="fe lv lw lx ly b">&lt;img&gt;</code>元素的扩展。我们可以通过从<code class="fe lv lw lx ly b">next/image</code>导入图像组件来使用它。</p><pre class="kj kk kl km gt oj ly ok ol aw om bi"><span id="ef57" class="on nn it ly b gy oo op l oq or">import Image from 'next/image';</span></pre><h2 id="260e" class="on nn it bd no os ot dn ns ou ov dp nw li ow ox ny lm oy oz oa lq pa pb oc pc bi translated">利益</h2><ul class=""><li id="2c61" class="mr ms it lb b lc oe lf of li pd lm pe lq pf lu mw mx my mz bi translated">允许以现代格式调整大小、优化和提供图像，避免将大图像发送到具有较小视窗的设备。</li><li id="dfe5" class="mr ms it lb b lc na lf nb li nc lm nd lq ne lu mw mx my mz bi translated">允许Next.js自动采用未来的图像格式，并提供给支持这些格式的浏览器。</li><li id="267f" class="mr ms it lb b lc na lf nb li nc lm nd lq ne lu mw mx my mz bi translated">按需而不是在构建时优化映像，因此构建时间不会增加。</li><li id="b18f" class="mr ms it lb b lc na lf nb li nc lm nd lq ne lu mw mx my mz bi translated">默认情况下，图像是延迟加载的，这意味着页面的速度不受视窗外图像的影响。</li><li id="e39f" class="mr ms it lb b lc na lf nb li nc lm nd lq ne lu mw mx my mz bi translated">图像以避免累积布局变化的方式呈现，这有助于提高在谷歌的搜索排名。</li></ul><h1 id="a9de" class="nm nn it bd no np pg nr ns nt ph nv nw jz pi ka ny kc pj kd oa kf pk kg oc od bi translated">配置域</h1><p id="d226" class="pw-post-body-paragraph kz la it lb b lc oe ju le lf of jx lh li og lk ll lm oh lo lp lq oi ls lt lu im bi translated">我们可以利用Next.js的图片优化来处理其他网站上的图片。</p><p id="7c3b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为此，我们需要向<code class="fe lv lw lx ly b">next.config.js</code>文件添加一个配置。我们需要指定允许从哪些域优化图像。</p><p id="9cd1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于这个例子，我想允许来自<a class="ae ky" href="https://unsplash.com/" rel="noopener ugc nofollow" target="_blank">https://unsplash.com/</a>的图像。因此，我将添加<code class="fe lv lw lx ly b">images.unsplash.com</code>作为可接受的外部域名。</p><pre class="kj kk kl km gt oj ly ok ol aw om bi"><span id="656e" class="on nn it ly b gy oo op l oq or">module.exports = {<br/>  <strong class="ly iu">images: {<br/>    domains: ['images.unsplash.com'],<br/>  },</strong><br/>}</span></pre><h1 id="88ac" class="nm nn it bd no np pg nr ns nt ph nv nw jz pi ka ny kc pj kd oa kf pk kg oc od bi translated">必需的道具</h1><p id="9d5f" class="pw-post-body-paragraph kz la it lb b lc oe ju le lf of jx lh li og lk ll lm oh lo lp lq oi ls lt lu im bi translated">现在我们可以渲染我们的图像。图像组件需要4个必需的道具。</p><ul class=""><li id="7aa3" class="mr ms it lb b lc ld lf lg li mt lm mu lq mv lu mw mx my mz bi translated"><strong class="lb iu"> src </strong> —要从Unsplash获取任何图像的源，只需右键单击图像并选择<em class="pl">“复制图像地址”</em>。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pm"><img src="../Images/d5ea255fb336c1fa352f4776f2283521.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6vQ0HO_nxNBv-mQqGpT59w.png"/></div></div></figure><ul class=""><li id="ad79" class="mr ms it lb b lc ld lf lg li mt lm mu lq mv lu mw mx my mz bi translated"><strong class="lb iu"> alt </strong> —描述图像的有意义的文本。</li><li id="8b4e" class="mr ms it lb b lc na lf nb li nc lm nd lq ne lu mw mx my mz bi translated"><strong class="lb iu">宽度</strong> —图像的宽度，以像素为单位。</li><li id="c35b" class="mr ms it lb b lc na lf nb li nc lm nd lq ne lu mw mx my mz bi translated"><strong class="lb iu">高度</strong> —图像的高度，以像素为单位。</li></ul><pre class="kj kk kl km gt oj ly ok ol aw om bi"><span id="6e9b" class="on nn it ly b gy oo op l oq or">&lt;<em class="pl">Image<br/>  src</em>="https://images.unsplash.com/photo-1519861531473-9200262188bf?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8<em class="pl">&amp;</em>ixlib=rb-1.2.1<em class="pl">&amp;</em>auto=format<em class="pl">&amp;</em>fit=crop<em class="pl">&amp;</em>w=2102<em class="pl">&amp;</em>q=80"<br/>  <em class="pl">alt</em>="basketball"<br/>  <em class="pl">height</em>={426}<br/>  <em class="pl">width</em>={640}<br/>/&gt;</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pn"><img src="../Images/c78d2b547ab4572c6bbc4d555635cced.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7UfskKx6U0wcm1YDKIYfCg.png"/></div></div></figure><p id="f609" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">添加图像的宽度和高度时，请确保添加正确的图像尺寸。这很重要！</p><p id="50fc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以通过点击右上角的箭头在Unsplash中找到图像的尺寸。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi po"><img src="../Images/e75429e5d5f8e0a5051a96b159ec8f19.png" data-original-src="https://miro.medium.com/v2/resize:fit:980/format:webp/1*p-V638bKIR_76LoLs1FyZQ.png"/></div></figure><p id="be07" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果我们添加不同长宽比的宽度和高度，图像会相应地调整。例如，如果我们将此图像的宽度和高度分别更改为400个像素的正方形，将会产生以下图像。</p><pre class="kj kk kl km gt oj ly ok ol aw om bi"><span id="918e" class="on nn it ly b gy oo op l oq or">&lt;<em class="pl">Image<br/>  src</em>="https://images.unsplash.com/photo-1519861531473-9200262188bf?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8<em class="pl">&amp;</em>ixlib=rb-1.2.1<em class="pl">&amp;</em>auto=format<em class="pl">&amp;</em>fit=crop<em class="pl">&amp;</em>w=2102<em class="pl">&amp;</em>q=80"<br/>  <em class="pl">alt</em>="basketball"<br/>  <strong class="ly iu"><em class="pl">height</em>={400}<br/>  <em class="pl">width</em>={400}</strong><br/>/&gt;</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pp"><img src="../Images/1a88fe038300330efd9b346f08447d7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iwEKAmysmSeMDHA-LOPz0A.png"/></div></div></figure><p id="3216" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如您所见，图像被压缩以适应我们指定的宽度和高度。</p><h1 id="70f1" class="nm nn it bd no np pg nr ns nt ph nv nw jz pi ka ny kc pj kd oa kf pk kg oc od bi translated">处理各种尺寸</h1><p id="bdb4" class="pw-post-body-paragraph kz la it lb b lc oe ju le lf of jx lh li og lk ll lm oh lo lp lq oi ls lt lu im bi translated">有时，您可能不知道图像的宽度和高度，但仍然希望它填充整个空间，同时保持其纵横比。</p><p id="218c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这种情况下，您可以省略图像组件上的宽度和高度属性。而是加一个<code class="fe lv lw lx ly b">layout="fill"</code>的道具。这将把图像拉伸到父元素的宽度和高度。使用<code class="fe lv lw lx ly b">layout="fill"</code>道具时，通常最好搭配<code class="fe lv lw lx ly b">objectFit="cover"</code>。这将允许图像在填充元素的整个内容框时保持其纵横比。</p><p id="1d10" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为此，将Image组件包装成一个<code class="fe lv lw lx ly b">&lt;div&gt;</code>元素的子元素。然后给父元素<code class="fe lv lw lx ly b">&lt;div&gt;</code>添加一个宽度和高度，并赋予它一个<code class="fe lv lw lx ly b">position="relative"</code>。</p><pre class="kj kk kl km gt oj ly ok ol aw om bi"><span id="290c" class="on nn it ly b gy oo op l oq or"><strong class="ly iu">&lt;div <em class="pl">className</em>={styles.image}&gt;</strong><br/>  &lt;<em class="pl">Image<br/>    src</em>="https://images.unsplash.com/photo-1519861531473-9200262188bf?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8<em class="pl">&amp;</em>ixlib=rb-1.2.1<em class="pl">&amp;</em>auto=format<em class="pl">&amp;</em>fit=crop<em class="pl">&amp;</em>w=2102<em class="pl">&amp;</em>q=80"<br/>    <em class="pl">alt</em>="basketball"<br/>    <strong class="ly iu"><em class="pl">layout</em>="fill"<br/>    <em class="pl">objectFit</em>="cover"</strong><br/>  /&gt;<br/><strong class="ly iu">&lt;/div&gt;</strong></span><span id="9fa4" class="on nn it ly b gy pq op l oq or"><em class="pl">// styles<br/></em><strong class="ly iu"><em class="pl">.image</em> {<br/>  height: 400px;<br/>  width: 400px;<br/>  position: relative;<br/>}</strong></span></pre><p id="6dc9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这里，我们可以看到图像占据了我们想要的400像素的正方形，但是图像的纵横比保持不变。不适合父元素的图像部分将被剪裁。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pr"><img src="../Images/76c68862eae305b5c6ff17446eeead24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*epPoF17SqAsAl1gGiQtGLw.png"/></div></div></figure><p id="ce0b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于更高级的情况，您还可以将其他道具添加到图像组件中。点击查看完整文档<a class="ae ky" href="https://nextjs.org/docs/api-reference/next/image" rel="noopener ugc nofollow" target="_blank">。</a></p></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><h1 id="4b9b" class="nm nn it bd no np nq nr ns nt nu nv nw jz nx ka ny kc nz kd oa kf ob kg oc od bi translated">结论</h1><p id="06dc" class="pw-post-body-paragraph kz la it lb b lc oe ju le lf of jx lh li og lk ll lm oh lo lp lq oi ls lt lu im bi translated">感谢阅读！我希望这篇文章对你开始使用Next.js的图像组件有所帮助。你可以在这里阅读更多关于图像优化的内容。</p><p id="995d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你正在做一个Next.js项目，我强烈推荐使用Image组件而不是普通的<code class="fe lv lw lx ly b">&lt;img&gt;</code>标签。实施起来很容易，而且随之而来的好处很多。</p><p id="8aad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您想了解如何在Next.js中处理路由，请查看下面的文章。</p><div class="lz ma gp gr mb mc"><a rel="noopener  ugc nofollow" target="_blank" href="/how-to-handle-routing-in-your-next-js-app-6ba71280b922"><div class="md ab fo"><div class="me ab mf cl cj mg"><h2 class="bd iu gy z fp mh fr fs mi fu fw is bi translated">如何在你的Next.js应用中处理路由</h2><div class="mj l"><h3 class="bd b gy z fp mh fr fs mi fu fw dk translated">查看页面目录、动态路由、链接组件和用户外部挂钩</h3></div><div class="mk l"><p class="bd b dl z fp mh fr fs mi fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="ml l"><div class="ps l mn mo mp ml mq ks mc"/></div></div></a></div></div></div>    
</body>
</html>