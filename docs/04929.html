<html>
<head>
<title>Functional Programming: Higher Order Functions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">函数式编程:高阶函数</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/functional-programming-higher-order-functions-80aa61e5799c?source=collection_archive---------4-----------------------#2020-07-24">https://levelup.gitconnected.com/functional-programming-higher-order-functions-80aa61e5799c?source=collection_archive---------4-----------------------#2020-07-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="e624" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">更好地理解JavaScript的高阶函数。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi ko"><img src="../Images/d0bd5a57eedadffbe519488d91f762af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1392/format:webp/1*Z10_3Wi8P2GVobS641QNrg.png"/></div></figure><p id="9543" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><a class="ae kw" href="https://medium.com/@FunctionalWorks/what-functional-programming-is-why-it-makes-you-better-29ee34284a6e" rel="noopener">函数式编程</a>牛逼！它让编程变得有趣。</p><p id="70f5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">学习“函数式”编程会让你成为一名出色的程序员，你会对自己的工作质量感到安全。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi kx"><img src="../Images/700c6ce074074c185c8ab915543ca467.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qlzjoHGXuDduCepExg9q4Q.jpeg"/></div></div></figure><p id="caf2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">你将能够用更少的错误和更少的时间编写你的程序，因为你将能够重用你的代码。</strong></p><p id="a61f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在这个范例中，我们将关注函数式编程中最重要的概念之一，那就是<a class="ae kw" href="https://eloquentjavascript.net/05_higher_order.html" rel="noopener ugc nofollow" target="_blank"> <strong class="js iu">高阶函数</strong> </a>。</p></div><div class="ab cl lc ld hx le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="im in io ip iq"><p id="d1d6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">所以让我们开始吧！</p><p id="581f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在JavaScript和许多函数式编程语言中，<strong class="js iu">函数是值。</strong></p><p id="d282" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们以一个简单的函数为例:</p><pre class="kp kq kr ks gt lj lk ll lm aw ln bi"><span id="af02" class="lo lp it lk b gy lq lr l ls lt">function double(x) {<br/>  return x * 2<br/>}</span></pre><p id="6239" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">JavaScript的超酷之处在于，我们可以把这个函数做成匿名函数，通过声明一个变量来传递和重用它。</p><pre class="kp kq kr ks gt lj lk ll lm aw ln bi"><span id="4a00" class="lo lp it lk b gy lq lr l ls lt">let double = function(x) {<br/>    return x * 2<br/> }</span><span id="e10a" class="lo lp it lk b gy lu lr l ls lt">let pancake = double </span><span id="f54a" class="lo lp it lk b gy lu lr l ls lt">pancake(40) // 80</span></pre><p id="5dd1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们声明了一个变量<em class="lv"> double </em>，并将它赋给了匿名函数。然后我们声明了另一个变量，<em class="lv"> pancake </em>，并将其赋给同一个函数。就像字符串和数字一样，函数也可以赋给变量。</p><p id="cfac" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">所以，在函数式编程中，<strong class="js iu">函数是值，它们可以赋给变量，也可以传递给其他函数。</strong></p><blockquote class="lw"><p id="c00a" class="lx ly it bd lz ma mb mc md me mf kn dk translated"><strong class="ak">对其他函数进行操作的函数，无论是将它们作为自变量还是通过返回它们，都被称为<em class="mg">高阶函数。—参见雄辩的JavaScript </em> </strong></p></blockquote><p id="0868" class="pw-post-body-paragraph jq jr it js b jt mh jv jw jx mi jz ka kb mj kd ke kf mk kh ki kj ml kl km kn im bi translated">换句话说，就像我们的例子一样，高阶函数可以被理解为传递给其他函数来做令人惊叹的事情的函数！！！</p><p id="ff43" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">当然，有道理，对吧？但是这些有什么用呢？</p><blockquote class="lw"><p id="d16c" class="lx ly it bd lz ma mb mc md me mf kn dk translated">作文。</p></blockquote><p id="0094" class="pw-post-body-paragraph jq jr it js b jt mh jv jw jx mi jz ka kb mj kd ke kf mk kh ki kj ml kl km kn im bi translated">我们可以将一个函数放入另一个函数，这一事实允许我们将许多小函数组合成更大的函数。</p><p id="850c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们看看如何使用这些高阶函数之一。可能最基本和最有用的功能是</p><h1 id="0ac8" class="mm lp it bd mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni bi translated">过滤器( )</h1><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/1e59461442e62082ed35bee1925c6585.png" data-original-src="https://miro.medium.com/v2/resize:fit:1098/format:webp/1*ffpkP4qA7Po2DXsgV9gSNA.png"/></div></figure><p id="fec1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Filter()是数组上的一个函数，它接受另一个函数作为它的参数，它将使用这个参数返回数组的一个新的过滤版本。</p><p id="4618" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们做一些有趣的东西。</p><pre class="kp kq kr ks gt lj lk ll lm aw ln bi"><span id="1af5" class="lo lp it lk b gy lq lr l ls lt">const pets = [</span><span id="68c3" class="lo lp it lk b gy lu lr l ls lt">  { name: 'Flip flop', species: 'rabbit' },</span><span id="4b5e" class="lo lp it lk b gy lu lr l ls lt">  { name: 'Dino', species: 'dog' },</span><span id="3924" class="lo lp it lk b gy lu lr l ls lt">  { name: 'Ralph', species: 'fish' },</span><span id="d910" class="lo lp it lk b gy lu lr l ls lt">  { name: 'Chuchi', species: 'cat' },</span><span id="80dd" class="lo lp it lk b gy lu lr l ls lt">  { name: 'Ari', species: 'dog' },</span><span id="93c4" class="lo lp it lk b gy lu lr l ls lt">  { name: 'Spock', species: 'dog' },</span><span id="4c64" class="lo lp it lk b gy lu lr l ls lt">  { name: 'ying yang', species: 'cat' },</span><span id="7676" class="lo lp it lk b gy lu lr l ls lt">]</span></pre><p id="0999" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们在这里想要做的只是“过滤”掉所有的狗。</p><p id="1d65" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们的输出必须包括迪诺，阿里和斯波克。😆</p><p id="138d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">问题:我如何用一个普通的循环来做这件事？</p><pre class="kp kq kr ks gt lj lk ll lm aw ln bi"><span id="33db" class="lo lp it lk b gy lq lr l ls lt">let dogs = []</span><span id="811f" class="lo lp it lk b gy lu lr l ls lt">for (let i = 0; i &lt; pets.length; i++) {<br/>   if (pets[i].species === 'dog')<br/>     dogs.push(pets[i])<br/>}</span></pre><p id="0465" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这创建了一个数组来保存所有的狗，然后它遍历<em class="lv">宠物</em>数组来检查物种是否等于“狗”——然后它将把它推入<em class="lv">狗</em>数组。如果你控制台. log(狗)你会看到一系列的对象。</p><p id="62eb" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">精彩！</p><p id="126b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在让我们使用<strong class="js iu">过滤器()</strong>的方法来做这件事🤔</p><pre class="kp kq kr ks gt lj lk ll lm aw ln bi"><span id="dfbb" class="lo lp it lk b gy lq lr l ls lt">let dogs = pets.filter(function(<em class="lv">pet</em>){<br/>   return pet.species === 'dog'<br/>})</span><span id="b34b" class="lo lp it lk b gy lu lr l ls lt">console.log(dogs) </span><span id="508b" class="lo lp it lk b gy lu lr l ls lt">// output<br/>[<br/>  { name: 'Dino', species: 'dog' },<br/>  { name: 'Ari', species: 'dog' },<br/>  { name: 'Spock', species: 'dog' }<br/>]</span></pre><p id="4862" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Filter()接受一个参数:另一个函数。像这样的函数叫做<a class="ae kw" href="https://developer.mozilla.org/en-US/docs/Glossary/Callback_function" rel="noopener ugc nofollow" target="_blank">回调函数</a>。</p><p id="e4bd" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">那么，filter()在这里是如何工作的呢？</p><p id="743f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">filter()将遍历<em class="lv"> pets </em>数组中的每一项，对于每一项，它将把它传递给一个回调函数，该函数将告诉filter()无论什么是真或假，并告诉每一项是否应该在新数组中。这种情况会一直发生，直到针对这种情况对每个项目进行了测试。</p><p id="3646" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们再读一遍，好吗？</p><p id="d683" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">过滤器()…</p><ol class=""><li id="e004" class="nk nl it js b jt ju jx jy kb nm kf nn kj no kn np nq nr ns bi translated">将遍历<em class="lv"> pets数组</em>中的每一项</li><li id="6954" class="nk nl it js b jt nt jx nu kb nv kf nw kj nx kn np nq nr ns bi translated">会将每一项传递给一个回调函数</li><li id="5412" class="nk nl it js b jt nt jx nu kb nv kf nw kj nx kn np nq nr ns bi translated">那个回调函数会告诉filter()某个东西是真还是假(因为给了它一个条件)</li><li id="d1cf" class="nk nl it js b jt nt jx nu kb nv kf nw kj nx kn np nq nr ns bi translated">这将决定哪个项应该在新数组中，或者不在。</li><li id="c789" class="nk nl it js b jt nt jx nu kb nv kf nw kj nx kn np nq nr ns bi translated">所有满足条件的项目将显示在新的数组中。</li></ol><p id="4f06" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们正在编写更少的逻辑，当我们编写这样的软件时，它允许我们重用这个软件。并且，filter()为我们创建了一个新的数组:我们不需要像以前那样编写它(for循环)。回调函数和过滤器( )挂在一起。友情！</p><p id="4548" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们实际上花一点时间，通过将回调函数与过滤器分开来打破这种友谊( )</p><pre class="kp kq kr ks gt lj lk ll lm aw ln bi"><span id="d9af" class="lo lp it lk b gy lq lr l ls lt">let isDog = function(<em class="lv">pet</em>) {<br/>   return pet.species === 'dog'<br/>}</span><span id="900e" class="lo lp it lk b gy lu lr l ls lt">let dogs = pets.filter(isDog)</span><span id="94a6" class="lo lp it lk b gy lu lr l ls lt">// i miss you... </span></pre><p id="a043" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们看到filter()接受了<em class="lv"> isDog </em>回调函数，然后执行任务。我们有两组完全不同的问题。询问宠物是不是狗，以及<strong class="js iu"> 2。</strong>把它们放在一个单独的数组里的想法。</p><p id="5ac3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">使用高阶函数可以让我们同时完成这两项任务。友情！</p><h1 id="0444" class="mm lp it bd mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni bi translated">概念回顾:<strong class="ak"> JavaScript函数是值，您可以通过将代码分成小的简单函数并用高阶函数组合在一起来利用这一点。</strong></h1></div><div class="ab cl lc ld hx le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="im in io ip iq"><p id="b7b5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">好吧！现在是时候看看另一个神奇的高阶函数了。</p><h1 id="83a6" class="mm lp it bd mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni bi translated">地图( )</h1><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi ny"><img src="../Images/1d4ba84558cc0683d0044419b2592a48.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XMcZITBs5CqfolxCh8oV0w.png"/></div></div></figure><p id="fc72" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">因此，很像filter()，map()函数遍历数组，但不像filter()，它不会丢弃不符合条件的对象。相反，它改变了他们！！！！</p><p id="531c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这到底是什么意思？改造他们？巫术！</p><p id="1c2c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我会给你看的！再来看看我们的超萌宠物阵列。</p><pre class="kp kq kr ks gt lj lk ll lm aw ln bi"><span id="988b" class="lo lp it lk b gy lq lr l ls lt">const pets = [</span><span id="8377" class="lo lp it lk b gy lu lr l ls lt">  { name: 'Flip flop', species: 'rabbit' },</span><span id="6008" class="lo lp it lk b gy lu lr l ls lt">  { name: 'Dino', species: 'dog' },</span><span id="ce4b" class="lo lp it lk b gy lu lr l ls lt">  { name: 'Ralph', species: 'fish' },</span><span id="39ba" class="lo lp it lk b gy lu lr l ls lt">  { name: 'Chuchi', species: 'cat' },</span><span id="14ec" class="lo lp it lk b gy lu lr l ls lt">  { name: 'Ari', species: 'dog' },</span><span id="7d20" class="lo lp it lk b gy lu lr l ls lt">  { name: 'Spock', species: 'dog' },</span><span id="1b34" class="lo lp it lk b gy lu lr l ls lt">  { name: 'ying yang', species: 'cat' },</span><span id="32e3" class="lo lp it lk b gy lu lr l ls lt">]</span></pre><p id="e367" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在这个例子中，<strong class="js iu">我们想要得到一个包含所有宠物名字的数组。</strong></p><p id="f84f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们的输出看起来会像这样</p><pre class="kp kq kr ks gt lj lk ll lm aw ln bi"><span id="fc71" class="lo lp it lk b gy lq lr l ls lt">['Flip flop', 'Dino', 'Ralph', 'Chuchi', 'Ari', 'Spock', 'ying yang']</span></pre><p id="2d65" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在我们使用map()函数解决这个问题之前，让我们先在一个for循环中完成它！！！—你知道这很重要。</p><pre class="kp kq kr ks gt lj lk ll lm aw ln bi"><span id="ac21" class="lo lp it lk b gy lq lr l ls lt">let names = []</span><span id="71a3" class="lo lp it lk b gy lu lr l ls lt">for (let i =0; i &lt; pets.length; i++) {<br/>   names.push(pets[i].name)<br/>}</span><span id="9565" class="lo lp it lk b gy lu lr l ls lt">console.log(names) </span></pre><p id="a8d7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">因此，for循环遍历<em class="lv">宠物</em>数组，并为每只宠物挑选名字属性并将其推入<em class="lv">名字</em>数组。</p><p id="bf57" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在，让我们在map()中这样做</p><p id="5830" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">记住，filter()处理真或假条件，map()期望回调函数返回一个<em class="lv">转换的对象。</em></p><pre class="kp kq kr ks gt lj lk ll lm aw ln bi"><span id="5bc4" class="lo lp it lk b gy lq lr l ls lt">let names = pets.map(function(<em class="lv">pet</em>) {<br/>   return pet.name<br/>})</span><span id="afbd" class="lo lp it lk b gy lu lr l ls lt">console.log(names)</span><span id="95a9" class="lo lp it lk b gy lu lr l ls lt">// output<br/>['Flip flop', 'Dino', 'Ralph', 'Chuchi', 'Ari', 'Spock', 'ying yang']</span></pre><p id="c231" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">精彩！多整洁啊！太牛逼了！</p><blockquote class="lw"><p id="40d4" class="lx ly it bd lz ma mb mc md me mf kn dk translated">更少的代码几乎总是意味着更少的错误</p></blockquote><p id="28e4" class="pw-post-body-paragraph jq jr it js b jt mh jv jw jx mi jz ka kb mj kd ke kf mk kh ki kj ml kl km kn im bi translated"><strong class="js iu"> <em class="lv">使用map()返回一个对象的子集是常见的使用模式。</em>T9】</strong></p><p id="ed19" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">因为map()期望回调函数返回任何对象，所以我们可以用它来返回全新的对象。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/95da2b0074a91640e2bcb73f6accf8d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/format:webp/1*DljOC9n7NfjunbcpKfv5vw.jpeg"/></div><figcaption class="oa ob gj gh gi oc od bd b be z dk translated">全新的我</figcaption></figure><p id="475f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们重构代码，返回一个新的“更酷”的对象</p><pre class="kp kq kr ks gt lj lk ll lm aw ln bi"><span id="0d02" class="lo lp it lk b gy lq lr l ls lt">let names = pets.map(function(<em class="lv">pet</em>) {<br/>   return pet.name + ' is a ' + pet.species<br/>})</span><span id="8e4d" class="lo lp it lk b gy lu lr l ls lt">console.log(names)</span><span id="134b" class="lo lp it lk b gy lu lr l ls lt">// output </span><span id="c661" class="lo lp it lk b gy lu lr l ls lt">[ 'Flip flop is a rabbit',<br/>  'Dino is a dog',<br/>  'Ralph is a fish',<br/>  'Chuchi is a cat',<br/>  'Ari is a dog',<br/>  'Spock is a dog',<br/>  'ying yang is a cat' ]</span></pre><p id="af52" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">刚刚发生了什么！？这太美了！与前面的for循环相比，这样的代码很少。</p><p id="4750" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我实际上想通过使用一个<a class="ae kw" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions" rel="noopener ugc nofollow" target="_blank">箭头函数</a>让它更漂亮。是的。</p><pre class="kp kq kr ks gt lj lk ll lm aw ln bi"><span id="2f54" class="lo lp it lk b gy lq lr l ls lt">let names = pets.map((pet) =&gt; pet.name + ' is a ' + pet.species)</span></pre><p id="07a0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我的天啊。太棒了。一行。</p><p id="14f4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在ES6箭头函数中，我们可以删除回车，因为箭头后面的内容将被隐式返回。哇，谢谢<a class="ae kw" href="https://www.ecma-international.org/publications/standards/Ecma-262.htm" rel="noopener ugc nofollow" target="_blank"> ECMAScript </a>😃</p></div><div class="ab cl lc ld hx le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="im in io ip iq"><p id="74d2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在是我们讨论所有高阶函数中最强大的函数的时候了。</p><blockquote class="lw"><p id="06ea" class="lx ly it bd lz ma mb mc md me mf kn dk translated">一个功能来统治他们所有人</p></blockquote><figure class="of og oh oi oj kt gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi oe"><img src="../Images/c57d1aedfa3af32e60907ff640313468.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pzOSK8u2-eZmYhXQEqyrvw.png"/></div></div></figure><h1 id="e275" class="mm lp it bd mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni bi translated">减少( )</h1><p id="6a9f" class="pw-post-body-paragraph jq jr it js b jt ok jv jw jx ol jz ka kb om kd ke kf on kh ki kj oo kl km kn im bi translated">但是在我们进入reduce()的能力之前，所有这些的共同点是它们将一个数组转换成其他东西。</p><p id="13f9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="lv"> map()将获取一个数组，并将该数组转换成一个长度相同的数组，但是每个单独的项都进行了转换。</em></p><p id="4770" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="lv"> filter()将一个数组转换成一个更小的数组。</em></p><p id="2159" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">还有其他几个高阶函数，但我们只关注这三个。</p><p id="ab08" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Enter: <strong class="js iu"> reduce( ) —使用reduce，您可以做所有高阶函数可以做的事情。它是数组变换的多工具。</strong></p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi kx"><img src="../Images/b98d69eb35057280810ca766f2e85834.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XM-WfemLju-wMit4Fvqr5w.jpeg"/></div></div></figure><p id="0e9b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">还可以将reduce()与其他高阶函数一起使用。(在另一篇文章中，我将更详细地介绍reduce()，但是现在，让我们找点乐子吧)</p><p id="6066" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们做一个新的简单数组。得让那些宠物休息一下。</p><pre class="kp kq kr ks gt lj lk ll lm aw ln bi"><span id="266a" class="lo lp it lk b gy lq lr l ls lt">const orders = [</span><span id="abd2" class="lo lp it lk b gy lu lr l ls lt">   { amount: 250 },</span><span id="38b7" class="lo lp it lk b gy lu lr l ls lt">   { amount: 400 },</span><span id="0257" class="lo lp it lk b gy lu lr l ls lt">   { amount: 100 },</span><span id="c5a2" class="lo lp it lk b gy lu lr l ls lt">   { amount: 325 },<br/>]</span></pre><p id="71af" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们在这里试图解决的问题是<strong class="js iu">我们想要汇总订单数组中的所有金额。</strong></p><p id="9a10" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">本着传统的精神，让我们先在for循环中这样做！</p><pre class="kp kq kr ks gt lj lk ll lm aw ln bi"><span id="8753" class="lo lp it lk b gy lq lr l ls lt">let totalAmount = 0</span><span id="92b7" class="lo lp it lk b gy lu lr l ls lt">for(let i = 0; i &lt; orders.length; i++) {<br/>  totalAmount += orders[i].amount<br/>}</span><span id="9b47" class="lo lp it lk b gy lu lr l ls lt">console.log(totalAmount)</span><span id="6a96" class="lo lp it lk b gy lu lr l ls lt">//output 1075</span></pre><p id="aab3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">啊哈！<strong class="js iu">因此，对于每个订单，我们获取金额值，并将其添加到总金额中。</strong></p><p id="09ec" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在，让我们使用reduce()来实现它</p><pre class="kp kq kr ks gt lj lk ll lm aw ln bi"><span id="0d47" class="lo lp it lk b gy lq lr l ls lt">let totalAmount = orders.reduce(function(sum, order) {</span><span id="99ca" class="lo lp it lk b gy lu lr l ls lt">   console.log('hello', sum, order)</span><span id="cc8b" class="lo lp it lk b gy lu lr l ls lt">   return sum + order.amount<br/>}, 0)</span></pre><p id="1226" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">所以就像map()或者filter()一样，reduce()取的是回调函数，但是和它们不一样，它要的是对象。你可以把这个物体看作我们求和的起点。</p><p id="44b1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这个sum将作为第一个参数传递给reduce()回调函数，就像map()和filter()一样，reduce()也将接收迭代项，但它将作为第二个参数。</p><p id="9959" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">然后，我们将得到我们收到的总额(初始值),并将订单金额添加到其中。</p><p id="ea33" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="lv">注意0:该函数将获取第一阶，并向其添加0，然后返回值。</em></p><p id="f837" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在下一种情况下，该值将依次作为总和传递，这又会将它的数量添加到该值中，并返回该值，依此类推，直到所有值相加。</p><p id="9c85" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">reduce函数中的console.log以一种时髦的方式说明了这一点。它是对<em class="lv">总数</em>和<em class="lv">订单</em>的呼应。让我们来看看上面函数的输出。</p><pre class="kp kq kr ks gt lj lk ll lm aw ln bi"><span id="ccba" class="lo lp it lk b gy lq lr l ls lt">// output</span><span id="e6c4" class="lo lp it lk b gy lu lr l ls lt"> hello 0 { amount: 250}</span><span id="c5cc" class="lo lp it lk b gy lu lr l ls lt"> hello 250 { amount: 400}</span><span id="45e9" class="lo lp it lk b gy lu lr l ls lt"> hello 650 { amount: 100}</span><span id="fec3" class="lo lp it lk b gy lu lr l ls lt"> hello 750 { amount: 325}</span><span id="8008" class="lo lp it lk b gy lu lr l ls lt"> 1075</span></pre><p id="da99" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在第一种情况下，我们接收数组中的第一个对象，我们还获得了作为reduce中的第二个参数传递的起始值。(那是零点)</p><p id="1db4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们在这里返回一个值，该值将是零加250，该值将被传递到reduce的第二次迭代中，我们在“hello 250 { amount: 400 }”中看到该值，我们将400 + 250 = 650相加。然后我们返回650，它将被传递到第三次迭代，并被加到100。</p><p id="ee36" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这种情况会一直持续下去，直到所有的值都被计算出来，并返回最终的和，在我们的例子中是1075。</p><p id="9eac" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">哇！！！</p><p id="9da5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">好吧，好吧，我快好了。</p><p id="851f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">作为对自己的一个练习，为什么不试着用箭头函数编写我们的reduce函数，并欣赏它的优雅呢？是的，很好。</p><p id="ecee" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我就把这个放在这里，作为我们理解的总结—</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi op"><img src="../Images/e1dc3c6e0071e784f09ab1de1a53ab8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VYFQhO8MTZpOORurLz3mwA.png"/></div></div></figure><p id="8536" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="lv">结论性概念回顾:</em></p><p id="f8ba" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu"> JavaScript函数是值，您可以利用这一点，将代码分成简单的小函数，并用高阶函数组合在一起。</strong></p><p id="0473" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">高阶函数是数组变换。而reduce()是一个数组转换的多工具。</strong></p></div></div>    
</body>
</html>