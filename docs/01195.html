<html>
<head>
<title>React Utility Components: Building 4 React Components that Improve Any App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React实用程序组件:构建4个React组件来改进任何应用程序</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/react-utility-components-building-4-react-components-that-improve-any-app-2fa0e4672e0f?source=collection_archive---------6-----------------------#2019-11-25">https://levelup.gitconnected.com/react-utility-components-building-4-react-components-that-improve-any-app-2fa0e4672e0f?source=collection_archive---------6-----------------------#2019-11-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="ed6e" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如何构建4个可以立即集成的React附加组件来解决应用中的常见问题</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/9d9c6dde43c0ed7861e731206456c637.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZdKoe26KmROzM2ESExAg9g.png"/></div></div></figure><p id="0ae3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">React即使不是最受欢迎的JavaScript库，也是其中之一，但它不像其他框架那样自带助手(即Vue.js中的<em class="ln">指令</em>)。</p><p id="61e7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我将向您展示如何构建<strong class="kt ir"> 4个有用且可重用的react组件</strong>来最大化您的编码效率。</p><p id="2ff2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们将构建一个条件呈现组件、一个处理破损图像的组件、一个处理迭代的组件和一个表格组件。</p><h1 id="038b" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">条件呈现组件</h1><p id="69e1" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated"><code class="fe ml mm mn mo b">If</code>组件是具有<code class="fe ml mm mn mo b">condition</code>和<code class="fe ml mm mn mo b">otherwise</code>属性的功能组件。</p><p id="4a7c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe ml mm mn mo b">condition</code>属性是一个非常简单的条件语句。如果给定的条件为真，将返回一个预定义的<a class="ae mp" href="https://reactjs.org/docs/glossary.html#propschildren" rel="noopener ugc nofollow" target="_blank">子属性</a>，否则将呈现传入<code class="fe ml mm mn mo b">otherwise</code>属性的任何值，或者什么都不呈现。</p><h2 id="f366" class="mq lp iq bd lq mr ms dn lu mt mu dp ly la mv mw ma le mx my mc li mz na me nb bi translated">使用</h2><pre class="kg kh ki kj gt nc mo nd ne aw nf bi"><span id="4168" class="mq lp iq mo b gy ng nh l ni nj">&lt;If condition={flag} otherwise="render that"&gt;<br/>  render this...<br/>&lt;/If&gt;</span></pre><h2 id="7514" class="mq lp iq bd lq mr ms dn lu mt mu dp ly la mv mw ma le mx my mc li mz na me nb bi translated">If.js</h2><pre class="kg kh ki kj gt nc mo nd ne aw nf bi"><span id="4087" class="mq lp iq mo b gy ng nh l ni nj">import React from 'react';<br/>import Proptypes from 'prop-types';</span><span id="8cc1" class="mq lp iq mo b gy nk nh l ni nj">function If(props) {<br/>  return props.condition ? props.children : props.otherwise;<br/>}</span><span id="6007" class="mq lp iq mo b gy nk nh l ni nj">If.propsTypes = {<br/>  condition: Proptypes.bool,<br/>  otherwise: Proptypes.oneOfType([<br/>      Proptypes.arrayOf(Proptypes.node),<br/>      Proptypes.node<br/>  ]),<br/>  children: Proptypes.oneOfType([<br/>    Proptypes.arrayOf(Proptypes.node),<br/>    Proptypes.node<br/>  ])<br/>};</span><span id="6a62" class="mq lp iq mo b gy nk nh l ni nj">If.defaultProps = {<br/>  otherwise: null<br/>};</span><span id="cbf0" class="mq lp iq mo b gy nk nh l ni nj">export default If;</span></pre><blockquote class="nl nm nn"><p id="cb18" class="kr ks ln kt b ku kv jr kw kx ky ju kz no lb lc ld np lf lg lh nq lj lk ll lm ij bi translated"><em class="iq">我假设您已经在应用程序中安装了</em> <code class="fe ml mm mn mo b"><em class="iq">prop-types</em></code> <em class="iq">或其他类型的检查包。</em></p></blockquote><h1 id="0950" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">破碎的图像</h1><p id="8404" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated"><code class="fe ml mm mn mo b">Image</code>组件用一个<code class="fe ml mm mn mo b">fallback</code>属性(image)替换图像的破损<code class="fe ml mm mn mo b">src</code>作为其默认占位符。</p><h2 id="83a0" class="mq lp iq bd lq mr ms dn lu mt mu dp ly la mv mw ma le mx my mc li mz na me nb bi translated">使用</h2><pre class="kg kh ki kj gt nc mo nd ne aw nf bi"><span id="5636" class="mq lp iq mo b gy ng nh l ni nj">&lt;Image src={pathToBrokentImage} alt="..." /&gt;</span></pre><h2 id="c18d" class="mq lp iq bd lq mr ms dn lu mt mu dp ly la mv mw ma le mx my mc li mz na me nb bi translated">Image.js</h2><pre class="kg kh ki kj gt nc mo nd ne aw nf bi"><span id="7884" class="mq lp iq mo b gy ng nh l ni nj">import React from 'react';<br/>import Proptypes from 'prop-types';</span><span id="9b71" class="mq lp iq mo b gy nk nh l ni nj">function Image(props) {<br/>  const { fallback, alt, ...rest } = props;<br/>  const handleBrokenImage = (event) =&gt; event.target.src = fallback;</span><span id="beb8" class="mq lp iq mo b gy nk nh l ni nj">  return &lt;img {...rest} alt={alt} onError={handleBrokenImage} /&gt;;<br/>}</span><span id="273b" class="mq lp iq mo b gy nk nh l ni nj">Image.propTypes = {<br/>  fallback: Proptypes.string,<br/>  alt: Proptypes.string,<br/>};</span><span id="e1d8" class="mq lp iq mo b gy nk nh l ni nj">Image.defaultProps = {<br/>  alt: 'Default alt for a11y',<br/>  fallback: 'path/to/default/image/or/placeholder'<br/>};</span><span id="329a" class="mq lp iq mo b gy nk nh l ni nj">export default Image;</span></pre><blockquote class="nl nm nn"><p id="bd2d" class="kr ks ln kt b ku kv jr kw kx ky ju kz no lb lc ld np lf lg lh nq lj lk ll lm ij bi translated">注意:我将创建一个简单的arrow函数作为util，在接下来的两个组件中使用，为每个元素生成一个随机的<a class="ae mp" href="https://reactjs.org/docs/lists-and-keys.html#keys" rel="noopener ugc nofollow" target="_blank">键</a>,因为我们将遍历元素的数据列表(以防止控制台中出现任何警告/错误日志)</p><p id="d16c" class="kr ks ln kt b ku kv jr kw kx ky ju kz no lb lc ld np lf lg lh nq lj lk ll lm ij bi translated"><code class="fe ml mm mn mo b">const getRandomKey = () =&gt; Math.random().toString(36).substr(2, 3);</code></p></blockquote><h1 id="8652" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">将数组映射到元素</h1><p id="b77b" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated"><code class="fe ml mm mn mo b">For</code>组件迭代接受数据数组的<code class="fe ml mm mn mo b">of</code>属性。例如，这可能是字符串列表或对象列表。</p><h2 id="5475" class="mq lp iq bd lq mr ms dn lu mt mu dp ly la mv mw ma le mx my mc li mz na me nb bi translated">使用</h2><pre class="kg kh ki kj gt nc mo nd ne aw nf bi"><span id="67f6" class="mq lp iq mo b gy ng nh l ni nj">const data = ['...', '...', '...'];</span><span id="fe1b" class="mq lp iq mo b gy nk nh l ni nj">&lt;For of={data} type='p' /&gt;</span><span id="2277" class="mq lp iq mo b gy nk nh l ni nj">const anotherData = [<br/>  {<br/>   label: '...',<br/>   value: '...',<br/>  }<br/>  {<br/>   label: '...',<br/>   value: '...',<br/>  }<br/>  {<br/>   label: '...',<br/>   value: '...',<br/>  }<br/>];</span><span id="fa4b" class="mq lp iq mo b gy nk nh l ni nj">&lt;For of={anotherData} type='li' parent='ul' iteratee='label' /&gt;</span></pre><p id="22a9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果没有提供<code class="fe ml mm mn mo b">iteratee</code>属性，组件将返回数组中每个对象的第一个键值。</p><h2 id="8ee6" class="mq lp iq bd lq mr ms dn lu mt mu dp ly la mv mw ma le mx my mc li mz na me nb bi translated">For.js</h2><pre class="kg kh ki kj gt nc mo nd ne aw nf bi"><span id="f35b" class="mq lp iq mo b gy ng nh l ni nj">import React, { PureComponent, createElement } from 'react';<br/>import Proptypes from 'prop-types';</span><span id="f44b" class="mq lp iq mo b gy nk nh l ni nj">export default class For extends PureComponent {<br/>  static propTypes = {<br/>    of: Proptypes.array,<br/>    type: Proptypes.string.isRequired,<br/>    parent: Proptypes.string,<br/>    iteratee: Proptypes.string,<br/>  };</span><span id="9889" class="mq lp iq mo b gy nk nh l ni nj">  getIteratee = (item) =&gt; {<br/>    return item[this.props.iteratee] || item[Object.keys(item)[0]];<br/>  };</span><span id="cceb" class="mq lp iq mo b gy nk nh l ni nj">  list = () =&gt; {<br/>    const { of, type } = this.props;<br/>    return of.map((item) =&gt; {<br/>      const children = typeof item === 'object' ? this.getIteratee(item) : item;<br/>      return createElement(type, {<br/>        key: getRandomKey()<br/>      }, children)<br/>    })<br/>  };</span><span id="d5a3" class="mq lp iq mo b gy nk nh l ni nj">  children = () =&gt; {<br/>    const { parent } = this.props;<br/>    return parent ? createElement(parent, null, this.list()) : this.list();<br/>  };</span><span id="f5cd" class="mq lp iq mo b gy nk nh l ni nj">  render() {<br/>    return this.props.of.length ? this.children() : null;<br/>  }<br/>}</span></pre><h1 id="9fc6" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">数据表</h1><p id="422a" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">一个基本的<code class="fe ml mm mn mo b">Table</code>组件，呈现一个带有<code class="fe ml mm mn mo b">headers</code>、<code class="fe ml mm mn mo b">body</code>和<code class="fe ml mm mn mo b">footer</code>的数据表。</p><h2 id="1aa9" class="mq lp iq bd lq mr ms dn lu mt mu dp ly la mv mw ma le mx my mc li mz na me nb bi translated">使用</h2><pre class="kg kh ki kj gt nc mo nd ne aw nf bi"><span id="dae8" class="mq lp iq mo b gy ng nh l ni nj">const data = {<br/>  headers: ['...', '...'],<br/>  body: [<br/>    ['...', '...'],<br/>    ['...', '...'],  <br/>  ],<br/>  footer: ['...', '...'],<br/>};</span><span id="2d31" class="mq lp iq mo b gy nk nh l ni nj">&lt;Table {...data} /&gt;</span></pre><h2 id="b064" class="mq lp iq bd lq mr ms dn lu mt mu dp ly la mv mw ma le mx my mc li mz na me nb bi translated">Table.js</h2><blockquote class="nl nm nn"><p id="8b88" class="kr ks ln kt b ku kv jr kw kx ky ju kz no lb lc ld np lf lg lh nq lj lk ll lm ij bi translated">你可以通过增加更多的选项来增加挑战性。比如各种表格布局等等。</p></blockquote><pre class="kg kh ki kj gt nc mo nd ne aw nf bi"><span id="25e1" class="mq lp iq mo b gy ng nh l ni nj">import React from 'react';<br/>import Proptypes from 'prop-types';</span><span id="3007" class="mq lp iq mo b gy nk nh l ni nj">export default class Table extends React.PureComponent {<br/>  static propTypes = {<br/>    header: Proptypes.array,<br/>    body: Proptypes.array,<br/>    footer: Proptypes.array,<br/>  };</span><span id="e75f" class="mq lp iq mo b gy nk nh l ni nj">  static defaultProps = {<br/>    header: [],<br/>    body: [],<br/>    footer: [],<br/>  };</span><span id="3e21" class="mq lp iq mo b gy nk nh l ni nj">  static Cells = ({ data = [], cell = 'td' }) =&gt; data.length ? (<br/>      data.map((d) =&gt; (<br/>          cell === 'th' ?<br/>              &lt;th key={`th-${getRandomKey()}`}&gt;{d}&lt;/th&gt; :<br/>              &lt;td key={`td-${getRandomKey()}`}&gt;{d}&lt;/td&gt;<br/>      ))<br/>  ) : null;</span><span id="bf36" class="mq lp iq mo b gy nk nh l ni nj">  render() {<br/>    const { header, body, footer, ...rest } = this.props;<br/>    const bodyRows = body.map((row) =&gt; (<br/>        &lt;tr key={`th-${getRandomKey()}`}&gt;<br/>          &lt;Table.Cells data={row} /&gt;<br/>        &lt;/tr&gt;<br/>    ));</span><span id="e49e" class="mq lp iq mo b gy nk nh l ni nj">    return (<br/>        &lt;table {...rest}&gt;<br/>          {header.length ? (<br/>              &lt;thead&gt;<br/>                &lt;tr&gt;<br/>                  &lt;Table.Cells data={header} cell="th" /&gt;<br/>                &lt;/tr&gt;<br/>              &lt;/thead&gt;<br/>          ) : null}<br/>          {body.length ? &lt;tbody&gt;{bodyRows}&lt;/tbody&gt; : null}<br/>          {footer.length ? (<br/>              &lt;tfoot&gt;<br/>                &lt;tr&gt;<br/>                  &lt;Table.Cells data={footer} /&gt;<br/>                &lt;/tr&gt;<br/>              &lt;/tfoot&gt;<br/>          ) : null}<br/>        &lt;/table&gt;<br/>    )<br/>  }<br/>}</span></pre><h1 id="79ea" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">演示</h1><p id="66c9" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">我做了一个简单的应用程序来玩。从下面的演示中可以看出，它有几个部分。每个组件都有一个样本测试。请随意使用这些代码。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div></figure></div></div>    
</body>
</html>