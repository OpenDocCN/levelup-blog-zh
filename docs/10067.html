<html>
<head>
<title>How to Deploy a Node.js Application to AWS Lambda using Serverless Framework</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用无服务器框架将Node.js应用程序部署到AWS Lambda</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-deploy-a-node-js-application-to-aws-lambda-using-serverless-framework-cadd32e8409?source=collection_archive---------4-----------------------#2021-10-22">https://levelup.gitconnected.com/how-to-deploy-a-node-js-application-to-aws-lambda-using-serverless-framework-cadd32e8409?source=collection_archive---------4-----------------------#2021-10-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="d7fb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">做一个开发者是很牛逼的。写代码，解决问题，为复杂的算法想出巧妙的解决方案是我们活着的目的。但是，篱笆这边的草并不总是那么绿。迟早，你需要弄脏你的手，部署你辛辛苦苦开发的应用程序。部署并不总是容易的。坦率地说，它们可能具有挑战性且耗时。这就是我们将在本教程中解决的问题。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/93d2e0b84fa9d4914c741b767db5bd09.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UWjEaoVpjzL8pbYnzs5GKw.png"/></div></div></figure><p id="af02" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kx">对于可复制的代码片段，</em> <a class="ae ky" href="https://dashbird.io/blog/how-to-deploy-nodejs-application-aws-lambda/" rel="noopener ugc nofollow" target="_blank"> <em class="kx">参见原文</em> </a> <em class="kx">。</em></p><h1 id="6aef" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">目标</h1><p id="b70c" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">今天，您将学习如何在无服务器框架的帮助下将Node.js应用程序部署到AWS Lambda。</p><p id="4278" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">该演练还将涵盖部署应用程序生产版本的真实场景，包括环境变量、<a class="ae ky" href="https://dashbird.io/serverless-observability/" rel="noopener ugc nofollow" target="_blank">适当的监控</a>，当然还有<a class="ae ky" href="https://dashbird.io/aws-lambda-troubleshooting/" rel="noopener ugc nofollow" target="_blank">简单的调试</a>。哦，我多么喜欢看到漂亮的堆栈跟踪！</p><h1 id="535d" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">先决条件</h1><p id="1c3a" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">本教程将需要你已经设置了一些简单的东西。不要担心，它不会很长，将涵盖只是基本的。</p><ul class=""><li id="ea94" class="mc md iq jp b jq jr ju jv jy me kc mf kg mg kk mh mi mj mk bi translated"><a class="ae ky" href="https://aws.amazon.com/console/" rel="noopener ugc nofollow" target="_blank"> AWS账户</a> — AWS有12个月的免费等级和大量的终身免费等级，所以不用担心会倾家荡产。</li><li id="ebbc" class="mc md iq jp b jq ml ju mm jy mn kc mo kg mp kk mh mi mj mk bi translated"><a class="ae ky" href="https://nodejs.org/en/download/" rel="noopener ugc nofollow" target="_blank"> Node.js和npm已安装</a>——这里有一个快速参考，确保您已经安装了它们。</li><li id="e708" class="mc md iq jp b jq ml ju mm jy mn kc mo kg mp kk mh mi mj mk bi translated"><a class="ae ky" href="https://hackernoon.com/a-crash-course-on-serverless-with-node-js-632b37d58b44#422a" rel="noopener ugc nofollow" target="_blank">安装了无服务器框架</a> —查看这是一个很好的参考，并遵循步骤1–3。</li><li id="fa28" class="mc md iq jp b jq ml ju mm jy mn kc mo kg mp kk mh mi mj mk bi translated"><a class="ae ky" href="https://dashbird.io/features" rel="noopener ugc nofollow" target="_blank"> Dashbird帐户</a> —这将为我们提供所需的概述，以了解我们的应用程序发生了什么。</li></ul><p id="d69d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">准备好了吗？我们走吧！</p><p id="a358" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kx">对于可复制的代码片段，</em> <a class="ae ky" href="https://dashbird.io/blog/how-to-deploy-nodejs-application-aws-lambda/" rel="noopener ugc nofollow" target="_blank"> <em class="kx">参见原文</em> </a> <em class="kx">。</em></p><h1 id="4c95" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">什么是AWS Lambda？</h1><p id="3aef" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">AWS Lambda是一项现收现付的无服务器计算服务，这意味着什么呢？好吧，你只需要把你的源代码部署到AWS，他们会处理剩下的。太神奇了！不需要摆弄服务器、ssh连接、Linux或Vim。但是，想知道更好的是什么吗？它可以自动扩展，并且没有停机时间。我会让它深入人心的…</p><p id="34de" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">AWS Lambda的技术定义是“功能即服务”。你部署一些代码；它被调用，处理一些输入，然后返回值。简单！</p><p id="33b2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">等一下。我们需要提到一个至关重要的事实。所有lambda函数都是无状态的，这意味着它们不能存储持久数据。如果我刚才说了功能即服务，我们如何将整个Node.js应用程序部署到AWS Lambda？</p><h1 id="f42e" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">它是如何工作的？</h1><p id="d7d1" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">仔细想想，其实也没那么复杂。单个lambda函数本质上只是一个微小的Node.js运行时环境。你可以在里面随心所欲地跑。这就是我们要做的，打包一个Node.js应用程序，并将其发送给AWS Lambda。鬼鬼祟祟。</p><h1 id="fd51" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">我们将部署什么？</h1><p id="3057" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">我们将部署的代码只有7行，以使这个例子尽可能简单。但是，它可以和您在生产中使用的任何Node.js应用程序一样大，而且它会非常好用。耐人寻味…</p><h1 id="3dde" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">我们如何部署它？</h1><p id="3bd4" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">无服务器框架就像一匹骑着白骑士的马！托起；我可能会落后。</p><p id="7491" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">无论如何，这个优秀的框架使我们既可以像以前一样在本地开发应用程序，又可以用简单的命令部署它们。嗯…多告诉我一些。</p><h1 id="78fd" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">让我们开始编码吧！</h1><p id="8349" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">最重要的是。打开你的终端；我们需要安装一些软件包。耶，安装东西，爱死了！</p><h1 id="2b4f" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">1.安装和配置无服务器框架</h1><p id="b0d1" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated"><em class="kx"> $ npm install -g无服务器</em></p><p id="f940" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果您在Linux上运行这个命令，那么在命令前面加上前缀<code class="fe mq mr ms mt b">sudo</code>。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mu"><img src="../Images/5761caff3915a7944e7fc2455ebbb98f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f07DB-LclnGa-PDprWnumg.png"/></div></div></figure><p id="3b00" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kx">对于可复制的代码片段，</em> <a class="ae ky" href="https://dashbird.io/blog/how-to-deploy-nodejs-application-aws-lambda/" rel="noopener ugc nofollow" target="_blank"> <em class="kx">参见原文</em> </a> <em class="kx">。</em></p><p id="d84f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">确保添加IAM用户的公钥和私钥，而不是我在上面指定的占位符。用户需要编程访问和管理权限。<a class="ae ky" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_users_create.html#id_users_create_console" rel="noopener ugc nofollow" target="_blank">这是AWS文档中的官方指南</a>。</p><h1 id="649c" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">2.创建样板代码</h1><p id="8914" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">让我们创建一个新文件夹，并给它一个唯一的名称。跳到您的终端，运行下面的命令。</p><p id="6806" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kx">$ mkdir server less-nodejs-app</em><strong class="jp ir"><em class="kx">&amp;&amp;</em></strong><em class="kx">CD server less-nodejs-app</em></p><p id="aa15" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">很好，现在剩下的就是运行create命令来为我们生成一些启动代码。这被称为无服务器服务。</p><p id="9909" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kx">$ SLS create-t AWS-nodejs-n server less-nodejs-app</em></p><p id="3611" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在打开代码编辑器之前只需要一个步骤。</p><h1 id="c8c6" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">3.安装依赖项</h1><p id="28d6" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">就像你在上面的代码片段中看到的，我们需要先安装几个模块。幸运的是，只有两个，而且就像运行一个命令一样简单。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mv"><img src="../Images/a01f9ee26d2b17c0698f801da8887c2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kCBDumtkDwf0FYTQarEUgA.png"/></div></div></figure><p id="6557" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kx">对于可复制的代码片段，</em> <a class="ae ky" href="https://dashbird.io/blog/how-to-deploy-nodejs-application-aws-lambda/" rel="noopener ugc nofollow" target="_blank"> <em class="kx">参见原文</em> </a> <em class="kx">。</em></p><p id="cad4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">就是这样！让我们在代码编辑器中打开它，进行一些实际的编码。</p><h1 id="c101" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">4.真实编码</h1><p id="4adf" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">一旦打开代码编辑器，您会看到三个文件。忽略<code class="fe mq mr ms mt b">.gitignore file</code>，让我先解释一下<code class="fe mq mr ms mt b">handler.js</code>是什么，然后我将继续讨论<code class="fe mq mr ms mt b">serverless.yml</code>。处理程序将保存你所有的应用程序逻辑，所有的代码。相比之下，<code class="fe mq mr ms mt b">servereless.yml</code>是您将在AWS上创建的资源的配置文件。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mw"><img src="../Images/bc2b537413271dfd88c91d53f621fbb7.png" data-original-src="https://miro.medium.com/v2/resize:fit:634/0*hJ_ArZ42uAVwD1Dz"/></div></div></figure><p id="ee97" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">继续并将<code class="fe mq mr ms mt b">handler.js</code>重命名为<code class="fe mq mr ms mt b">app.js</code>，只是为了简化我们，让我们知道什么去哪里。</p><p id="a3d4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">删除所有的起始代码，并将这段代码粘贴到<code class="fe mq mr ms mt b">app.js</code>文件中。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mx"><img src="../Images/acead9401f64c74bdab9eec38e34edf0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zOQyTjrobsn2uJpS7hKwdw.png"/></div></div></figure><p id="f862" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kx">对于可复制的代码片段，</em> <a class="ae ky" href="https://dashbird.io/blog/how-to-deploy-nodejs-application-aws-lambda/" rel="noopener ugc nofollow" target="_blank"> <em class="kx">参见原文</em> </a> <em class="kx">。</em></p><p id="689a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">七行代码？看起来很眼熟吧？就像你习惯的那样。就是这样。信不信由你，没别的了。让我们继续进行<code class="fe mq mr ms mt b">serverless.yml</code>。</p><p id="b722" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">再一次，删除所有的样板代码并粘贴进来。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi my"><img src="../Images/d47c50681e210ea3d34879eda99bd7c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xuvu5WQjWFdVu8fcw85ZzQ.png"/></div></div></figure><p id="0c1f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kx">对于可复制的代码片段，</em> <a class="ae ky" href="https://dashbird.io/blog/how-to-deploy-nodejs-application-aws-lambda/" rel="noopener ugc nofollow" target="_blank"> <em class="kx">参见原文</em> </a> <em class="kx">。</em></p><p id="2eae" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">搞定了。剩下的就是部署它了。</p><h1 id="d7c5" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">准备部署！</h1><p id="f9b1" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">切换回终端窗口。通过运行一个命令，您的应用程序将被部署。</p><p id="e27b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kx"> $ sls部署</em></p><p id="d376" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">无服务器框架现在将把所有东西打包成一个漂亮的包，从<em class="kx"> serverless.yml </em>创建一个CloudFormation文件，并把它发送到AWS S3。一旦创建了资源，部署了代码，您将在终端中看到发送给您的端点。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mz"><img src="../Images/94cf82c634b38194a09042d0788e9ef5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*YpslR8q6QeyoYngH"/></div></div></figure><p id="591c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在浏览器中打开提供的网址，你会看到<em class="kx">“你好，世界！”</em>给你送回去。</p><h1 id="c30b" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">部署到生产环境！</h1><p id="8a11" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">这很好，但是还没有准备好投入生产环境。不要担心！您会惊讶地发现，让它投入生产是多么简单。</p><h1 id="ac34" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">1.为环境变量添加一个<code class="fe mq mr ms mt b">secrets.json</code>文件</h1><p id="df43" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">现在，让我们只在<code class="fe mq mr ms mt b">secrets.json</code>中添加<code class="fe mq mr ms mt b">NODE_ENV</code>。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi na"><img src="../Images/03b50fe1cd4a3f310459f6b610a4683d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UcdUBWK5LkE3Wv-G9Gpnlg.png"/></div></div></figure><h1 id="4c50" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">2.在<code class="fe mq mr ms mt b">serverless.yml</code>中增加<code class="fe mq mr ms mt b">secrets.json</code>的引用</h1><p id="ac6c" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">就像添加秘密文件一样简单，在<code class="fe mq mr ms mt b">serverless.yml</code>中引用该文件甚至更容易。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nb"><img src="../Images/308f8d4a75842e0699354bddf0446a3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JS-9PZEUDt4b42RXJQ4FzA.png"/></div></div></figure><p id="3ef2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kx">对于可复制的代码片段，</em> <a class="ae ky" href="https://dashbird.io/blog/how-to-deploy-nodejs-application-aws-lambda/" rel="noopener ugc nofollow" target="_blank"> <em class="kx">参见原文</em> </a> <em class="kx">。</em></p><p id="4c91" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">厉害了，就是这样！从服务中删除<code class="fe mq mr ms mt b">node_modules</code>和<code class="fe mq mr ms mt b">.serverless</code>文件夹，并再次运行npm install，但这次使用<code class="fe mq mr ms mt b">--production</code>标志。</p><p id="c9e3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kx"> $ npm安装—生产</em></p><p id="51f9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">太好了！剩下的工作就是重新部署服务，一切就绪。</p><p id="b2fc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kx"> $ sls部署</em></p><p id="c68b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这就是我们的结局。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/b30ea275e64bb9fa94487b48dcbb5b94.png" data-original-src="https://miro.medium.com/v2/resize:fit:720/0*3aErKjyC-Wyoj-UJ"/></div></figure><p id="fbfc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我想我们结束了？不完全是。</p><p id="af62" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">仅仅因为你用<code class="fe mq mr ms mt b">--production</code>安装了npm模块，就让一个应用程序在生产环境中运行，这并不能解决问题。为了晚上能睡个好觉，我需要多一点。这就是适当的系统洞察力和监控工具发挥作用的地方。</p><p id="a3a8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我展示给你看。</p><h1 id="da95" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">如何洞察你的系统？</h1><p id="d666" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">所有无服务器应用程序的首要问题是它们的分布式本质。简单明了地说，要对所有正在发生的事情有一个总体的了解是不可能的。更不用说出问题的时候调试有多难了。</p><p id="055d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了平息我的恐惧，我使用<a class="ae ky" href="https://dashbird.io/" rel="noopener ugc nofollow" target="_blank"> Dashbird </a>。这是一个简单的监控工具，不需要我修改任何代码，也没有任何开销。因此，也没有性能命中。不错！</p><p id="6c27" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">谢天谢地，他们有合理的文档，这使得入职过程变得轻而易举。继续并遵循他们的<a class="ae ky" href="https://dashbird.io/docs/quickstart/setting-up-dashbird/" rel="noopener ugc nofollow" target="_blank">快速入门指南</a>。不过，别忘了回来。</p><p id="e006" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一旦完成，所有的请求将开始一个接一个地堆积，您应该会看到类似这样的内容。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nd"><img src="../Images/f104e30b9e241ac4c8d350fbf9f937f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*VW0FxSJ60thYmGoN"/></div></div></figure><p id="c8f4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">函数详细信息将为您提供函数如何随时间变化的概述，因此这里汇总了多个调用。</p><p id="2e7e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果单击左下方最近的一次调用，将会深入到跟踪和记录数据的调用级别的详细信息。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ne"><img src="../Images/81f2ac55cf6d585ed1bc65629d781370.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*W2XBuVbWR3WbNpNL"/></div></div></figure><h1 id="4f7a" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">包扎</h1><p id="b0a4" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">这很有趣！</p><p id="fe0b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Lambda太牛逼了！当与HTTP事件触发器(如<a class="ae ky" href="https://dashbird.io/knowledge-base/api-gateway/what-is-aws-api-gateway/" rel="noopener ugc nofollow" target="_blank"> API Gateway </a>)、开发工具(如无服务器框架)和观察工具(如<a class="ae ky" href="https://dashbird.io/" rel="noopener ugc nofollow" target="_blank"> Dashbird </a>)相结合时，事情就变得如此简单。</p><p id="367b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们上面编写的这个简单的API示例只是一个概念证明。但是你能明白这一点。它为您提供了一个起点，您可以在此基础上创建出色的生产应用程序！</p><p id="6e87" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你错过了上面的任何步骤，<a class="ae ky" href="https://github.com/adnanrahic/express-sls-app" rel="noopener ugc nofollow" target="_blank">这里有所有代码的库</a>。</p></div><div class="ab cl nf ng hu nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="ij ik il im in"><p id="84f1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kx">延伸阅读:</em></p><p id="91ff" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae ky" href="https://dashbird.io/blog/nft-aws-lambda-serverless-blockchain/" rel="noopener ugc nofollow" target="_blank">如何使用AWS Lambda检查NFT供应</a></p><p id="7c99" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae ky" href="https://dashbird.io/blog/how-to-test-serverless-applications/" rel="noopener ugc nofollow" target="_blank">如何测试无服务器应用</a></p><p id="e413" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae ky" href="https://dashbird.io/blog/top-aws-lambda-performance-monitoring-tools/" rel="noopener ugc nofollow" target="_blank">六大AWS Lambda监控工具</a></p><p id="b32f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae ky" href="https://dashbird.io/blog/can-we-solve-serverless-cold-starts/" rel="noopener ugc nofollow" target="_blank">如何解决无服务器冷启动</a></p><p id="c932" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae ky" href="https://dashbird.io/event-library/aws-lambda/aws-lambda-node-js-errors-and-exceptions/" rel="noopener ugc nofollow" target="_blank"> AWS Lambda Node.js错误和异常</a></p></div></div>    
</body>
</html>