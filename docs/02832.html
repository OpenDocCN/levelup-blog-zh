<html>
<head>
<title>Yet another TODO app! With Redis and Go (Part 1)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">又一个TODO应用！使用Redis和Go(第1部分)</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/yet-another-todo-app-with-redis-and-go-part-1-7a1134f5752e?source=collection_archive---------11-----------------------#2020-04-06">https://levelup.gitconnected.com/yet-another-todo-app-with-redis-and-go-part-1-7a1134f5752e?source=collection_archive---------11-----------------------#2020-04-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="3a52" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">通过使用Go构建CLI应用程序来学习Redis</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/470552d9bed7c224ecc0f07f9ecdd3b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6ZnlHRBxtXq3nG8m"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">格伦·卡斯滕斯-彼得斯在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="4298" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="https://redis.io/" rel="noopener ugc nofollow" target="_blank"> Redis </a>是一个多功能的键值存储，支持多种<a class="ae kv" href="https://redis.io/commands/" rel="noopener ugc nofollow" target="_blank">丰富的数据结构</a>，如<code class="fe ls lt lu lv b">List</code>、<code class="fe ls lt lu lv b">Set</code>、<code class="fe ls lt lu lv b">Sorted Set</code>、<code class="fe ls lt lu lv b">Hash</code>等。——这意味着价值观可以不仅仅是简单的<code class="fe ls lt lu lv b">string</code>。这些数据结构结合在一起，可以用于构建强大的应用程序，包括缓存(Redis的基础)、实时处理、分布式工作队列、排行榜、会话存储等。</p><p id="544b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这个<em class="lw">两部分的博客系列</em>将借助一个简单而实用的例子讲述一些Redis数据结构:<em class="lw">又一个</em> <strong class="ky ir"> TODO应用</strong>！😉而不是构建一个基于web的前端界面(老实说，这真的不是我喜欢的！)我选择保持简单，提供一个命令行界面(CLI)。它内置于<code class="fe ls lt lu lv b"><a class="ae kv" href="https://golang.org/" rel="noopener ugc nofollow" target="_blank">Go</a></code>中，带有流行的用于CLI应用的<code class="fe ls lt lu lv b"><a class="ae kv" href="https://github.com/spf13/cobra" rel="noopener ugc nofollow" target="_blank">cobra</a></code>库，并使用<code class="fe ls lt lu lv b">Redis</code>作为后端存储。</p><p id="8d32" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">通过阅读本系列，您将了解到:</p><ul class=""><li id="2a82" class="lx ly iq ky b kz la lc ld lf lz lj ma ln mb lr mc md me mf bi translated">通用的<code class="fe ls lt lu lv b">Redis</code>数据结构——这个应用程序利用了<code class="fe ls lt lu lv b">HASH</code>和<code class="fe ls lt lu lv b">SET</code></li><li id="bbe3" class="lx ly iq ky b kz mg lc mh lf mi lj mj ln mk lr mc md me mf bi translated">使用<code class="fe ls lt lu lv b"><a class="ae kv" href="https://github.com/go-redis/redis" rel="noopener ugc nofollow" target="_blank">go-redis</a></code>客户端与Redis交互</li><li id="89a7" class="lx ly iq ky b kz mg lc mh lf mi lj mj ln mk lr mc md me mf bi translated">如何使用<code class="fe ls lt lu lv b">cobra</code>库(它也支持CLI工具，如<code class="fe ls lt lu lv b">docker</code>、<code class="fe ls lt lu lv b">kubectl</code>等)。)</li><li id="2aad" class="lx ly iq ky b kz mg lc mh lf mi lj mj ln mk lr mc md me mf bi translated">你可以试用有几个不同选项的<code class="fe ls lt lu lv b">todo</code>应用程序:<code class="fe ls lt lu lv b">Docker</code>或<a class="ae kv" href="https://docs.microsoft.com/azure/azure-cache-for-redis/?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"> Azure Redis缓存</a></li></ul><p id="1177" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了简单起见，我把它分成了两部分。第一部分(这个博客)将提供一个应用程序，安装和设置(包括<code class="fe ls lt lu lv b">Azure Redis Cache</code>)的快速概述，并尝试它。第二部分将深入研究代码和实现细节</p><blockquote class="ml mm mn"><p id="9437" class="kw kx lw ky b kz la jr lb lc ld ju le mo lg lh li mp lk ll lm mq lo lp lq lr ij bi translated"><em class="iq">代码为</em> <a class="ae kv" href="https://github.com/abhirockzz/redis-todo-cli-app" rel="noopener ugc nofollow" target="_blank"> <em class="iq">可在Github </em> </a>上获得</p></blockquote></div><div class="ab cl mr ms hu mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="ij ik il im in"><h1 id="2535" class="my mz iq bd na nb nc nd ne nf ng nh ni jw nj jx nk jz nl ka nm kc nn kd no np bi translated"><code class="fe ls lt lu lv b">todo</code>应用概述</h1><p id="28c8" class="pw-post-body-paragraph kw kx iq ky b kz nq jr lb lc nr ju le lf ns lh li lj nt ll lm ln nu lp lq lr ij bi translated">下面是您可以使用<code class="fe ls lt lu lv b">todo</code> CLI应用程序做些什么的快速概述。使用<code class="fe ls lt lu lv b">todo --help</code>很容易解决这个问题:输出是不言自明的:</p><pre class="kg kh ki kj gt nv lv nw nx aw ny bi"><span id="1913" class="nz mz iq lv b gy oa ob l oc od">Yet another TODO app. Uses Go and Redis</span><span id="6cc3" class="nz mz iq lv b gy oe ob l oc od">Usage:<br/>  todo [command]</span><span id="3bf4" class="nz mz iq lv b gy oe ob l oc od">Available Commands:<br/>  create      create a todo with description<br/>  delete      delete a todo<br/>  help        Help about any command<br/>  list        list all todos<br/>  update      update todo description, status or both</span><span id="8466" class="nz mz iq lv b gy oe ob l oc od">Flags:<br/>  -h, --help      help for todo<br/>  -v, --version   version for todo</span><span id="09cb" class="nz mz iq lv b gy oe ob l oc od">Use "todo [command] --help" for more information about a command.</span></pre><p id="35e1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">可以<code class="fe ls lt lu lv b">create</code>、<code class="fe ls lt lu lv b">list</code>、<code class="fe ls lt lu lv b">update</code>和<code class="fe ls lt lu lv b">delete</code> todos(好老的CRUD！)</p><ul class=""><li id="0fb6" class="lx ly iq ky b kz la lc ld lf lz lj ma ln mb lr mc md me mf bi translated">要<code class="fe ls lt lu lv b">create</code> a <code class="fe ls lt lu lv b">todo</code>，只需输入<code class="fe ls lt lu lv b">description</code> -详情请使用<code class="fe ls lt lu lv b">todo create --help</code></li><li id="1170" class="lx ly iq ky b kz mg lc mh lf mi lj mj ln mk lr mc md me mf bi translated">要<code class="fe ls lt lu lv b">list</code>所有待办事项，只需使用<code class="fe ls lt lu lv b">todo list</code>。也可以通过<code class="fe ls lt lu lv b">status</code>(已完成或未完成)进行过滤——详情请使用<code class="fe ls lt lu lv b">todo list --help</code></li></ul><p id="d213" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">以下是来自<code class="fe ls lt lu lv b">todo list</code>的输出:</p><pre class="kg kh ki kj gt nv lv nw nx aw ny bi"><span id="4b85" class="nz mz iq lv b gy oa ob l oc od">+----+--------------------------------+-------------+<br/>| ID |          DESCRIPTION           |   STATUS    |<br/>+----+--------------------------------+-------------+<br/>|  3 | push redis todo cli app code   | pending     |<br/>|    | to github                      |             |<br/>|  2 | write tutorial for redis todo  | in-progress |<br/>|    | cli app                        |             |<br/>|  1 | implement todo cli app         | completed   |<br/>+----+--------------------------------+-------------+</span></pre><ul class=""><li id="50bd" class="lx ly iq ky b kz la lc ld lf lz lj ma ln mb lr mc md me mf bi translated">您可以通过指定todo <code class="fe ls lt lu lv b">id</code>来<code class="fe ls lt lu lv b">update</code>一个<code class="fe ls lt lu lv b">todo</code>的<code class="fe ls lt lu lv b">description</code>、<code class="fe ls lt lu lv b">status</code>(或两者都有)——详细信息，请使用<code class="fe ls lt lu lv b">todo update --help</code></li><li id="a7be" class="lx ly iq ky b kz mg lc mh lf mi lj mj ln mk lr mc md me mf bi translated">对于<code class="fe ls lt lu lv b">delete</code>待办事项，只需使用<code class="fe ls lt lu lv b">todo delete</code>和它的<code class="fe ls lt lu lv b">id</code>即可——详情请使用<code class="fe ls lt lu lv b">todo delete --help</code></li></ul><h1 id="47a0" class="my mz iq bd na nb of nd ne nf og nh ni jw oh jx nk jz oi ka nm kc oj kd no np bi translated"><code class="fe ls lt lu lv b">todo</code>应用程序安装</h1><blockquote class="ml mm mn"><p id="68f4" class="kw kx lw ky b kz la jr lb lc ld ju le mo lg lh li mp lk ll lm mq lo lp lq lr ij bi translated"><em class="iq">我假设你已经安装了</em><code class="fe ls lt lu lv b"><a class="ae kv" href="https://golang.org/" rel="noopener ugc nofollow" target="_blank"><em class="iq">Go</em></a></code><em class="iq"/></p></blockquote><p id="6c28" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从克隆回购开始:</p><pre class="kg kh ki kj gt nv lv nw nx aw ny bi"><span id="deeb" class="nz mz iq lv b gy oa ob l oc od">git clone https://github.com/abhirockzz/redis-todo-cli-app<br/>cd redis-todo-cli-app</span></pre><p id="509c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">构建应用程序并设置<code class="fe ls lt lu lv b">PATH</code>变量</p><pre class="kg kh ki kj gt nv lv nw nx aw ny bi"><span id="52f4" class="nz mz iq lv b gy oa ob l oc od">go build -o todo<br/>export PATH=$(pwd):$PATH</span></pre><p id="bb0b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要确认，使用<code class="fe ls lt lu lv b">todo --help</code></p><p id="3ce6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在使用该应用程序之前，设置一个Redis实例</p></div><div class="ab cl mr ms hu mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="ij ik il im in"><h1 id="0fc5" class="my mz iq bd na nb nc nd ne nf ng nh ni jw nj jx nk jz nl ka nm kc nn kd no np bi translated">Redis设置</h1><p id="63c5" class="pw-post-body-paragraph kw kx iq ky b kz nq jr lb lc nr ju le lf ns lh li lj nt ll lm ln nu lp lq lr ij bi translated"><code class="fe ls lt lu lv b">todo</code>存储在<code class="fe ls lt lu lv b">Redis</code>中。获得<code class="fe ls lt lu lv b">Redis</code>实例的最快方法之一是提取它的Docker映像并开始使用它:</p><pre class="kg kh ki kj gt nv lv nw nx aw ny bi"><span id="47d0" class="nz mz iq lv b gy oa ob l oc od">docker pull redis<br/>docker run -d --name todo_redis -p 6379:6379 redis</span></pre><p id="fb31" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在你应该有Redis Docker容器在后台运行，并且应该可以通过端口<code class="fe ls lt lu lv b">6379</code>访问</p><blockquote class="ml mm mn"><p id="206c" class="kw kx lw ky b kz la jr lb lc ld ju le mo lg lh li mp lk ll lm mq lo lp lq lr ij bi translated"><em class="iq">要删除容器(不是图像)，只需使用</em> <code class="fe ls lt lu lv b"><em class="iq">docker rm -f todo_redis</em></code></p></blockquote><p id="cf97" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你使用基于Docker的设置，你可以跳过剩下的部分，直接进入下一个(最后的)部分，因为这个应用程序使用<code class="fe ls lt lu lv b">localhost:6379</code>作为默认的Redis主机</p><p id="0baf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您已经想覆盖它，只需设置<code class="fe ls lt lu lv b">REDIS_HOST</code>环境变量，例如</p><pre class="kg kh ki kj gt nv lv nw nx aw ny bi"><span id="3dc9" class="nz mz iq lv b gy oa ob l oc od">export REDIS_HOST=myredis:6379</span></pre><p id="e245" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您的Redis实例受密码保护，只需将<code class="fe ls lt lu lv b">REDIS_PASSWORD_REQUIRED</code>环境变量设置为<code class="fe ls lt lu lv b">true</code>并使用<code class="fe ls lt lu lv b">REDIS_PASSWORD</code>环境变量来指定密码，例如</p><pre class="kg kh ki kj gt nv lv nw nx aw ny bi"><span id="82ce" class="nz mz iq lv b gy oa ob l oc od">export REDIS_HOST=my-secure-redis:6379<br/>export REDIS_PASSWORD_REQUIRED=true<br/>export REDIS_PASSWORD=foobarredis</span></pre><h2 id="b216" class="nz mz iq bd na ok ol dn ne om on dp ni lf oo op nk lj oq or nm ln os ot no ou bi translated">Azure Redis缓存</h2><p id="3787" class="pw-post-body-paragraph kw kx iq ky b kz nq jr lb lc nr ju le lf ns lh li lj nt ll lm ln nu lp lq lr ij bi translated"><a class="ae kv" href="https://docs.microsoft.com/azure/azure-cache-for-redis/cache-overview?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"> Azure Cache for Redis是云中的托管产品</a>。它提供对托管在Azure中的安全专用Redis缓存的访问，Azure内外的任何应用程序都可以访问该缓存。</p><p id="553f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">出于这篇博客的目的，我们将设置一个带有<code class="fe ls lt lu lv b">Basic</code>层的Azure Redis缓存，这是一个非常适合开发/测试和非关键工作负载的单节点缓存。请注意，您还可以从<code class="fe ls lt lu lv b">Standard</code>和<code class="fe ls lt lu lv b">Premium</code>层中选择<a class="ae kv" href="https://docs.microsoft.com/azure/azure-cache-for-redis/cache-overview?WT.mc_id=medium-blog-abhishgu#feature-comparison" rel="noopener ugc nofollow" target="_blank">提供不同的特性，包括持久性、集群、地理复制等</a>。</p><p id="6c91" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以使用Azure CLI通过<code class="fe ls lt lu lv b"><a class="ae kv" href="https://docs.microsoft.com/cli/azure/redis?view=azure-cli-latest&amp;WT.mc_id=medium-blog-abhishgu#az-redis-create" rel="noopener ugc nofollow" target="_blank">az redis create</a></code>命令快速设置Azure Redis缓存实例，例如</p><pre class="kg kh ki kj gt nv lv nw nx aw ny bi"><span id="0e75" class="nz mz iq lv b gy oa ob l oc od">az redis create --location westus2 --name todo-redis --resource-group todo-app-group --sku Basic --vm-size c0</span></pre><blockquote class="ml mm mn"><p id="cf83" class="kw kx lw ky b kz la jr lb lc ld ju le mo lg lh li mp lk ll lm mq lo lp lq lr ij bi translated"><em class="iq">结帐</em> <a class="ae kv" href="https://docs.microsoft.com/azure/azure-cache-for-redis/scripts/create-cache?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"> <em class="iq">“为Redis创建Azure缓存”</em> </a> <em class="iq">获取分步指南</em></p></blockquote><p id="1b19" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">完成后，您需要获取连接到Azure Redis缓存实例所需的信息，即主机、端口和访问密钥。这也可以使用CLI来完成，例如</p><pre class="kg kh ki kj gt nv lv nw nx aw ny bi"><span id="e16d" class="nz mz iq lv b gy oa ob l oc od">//host and (SSL) port<br/>az redis show --name todo-redis --resource-group todo-app-group --query [hostName,sslPort] --output tsv</span><span id="bbc0" class="nz mz iq lv b gy oe ob l oc od">//primary access key<br/>az redis list-keys --name todo-redis --resource-group todo-app-group --query [primaryKey] --output tsv</span></pre><blockquote class="ml mm mn"><p id="4b6f" class="kw kx lw ky b kz la jr lb lc ld ju le mo lg lh li mp lk ll lm mq lo lp lq lr ij bi translated"><em class="iq"> Checkout </em> <a class="ae kv" href="https://docs.microsoft.com/azure/azure-cache-for-redis/scripts/cache-keys-ports?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"> <em class="iq">“获取Redis的Azure缓存的主机名、端口和密钥”</em> </a> <em class="iq">获取分步指南</em></p></blockquote><p id="6d84" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">好了，现在您可以用刚刚提取的信息设置所需的环境变量，例如</p><pre class="kg kh ki kj gt nv lv nw nx aw ny bi"><span id="6331" class="nz mz iq lv b gy oa ob l oc od">//todo-redis is the name of the cache<br/>export REDIS_HOST=todo-redis.redis.cache.windows.net:6380<br/>export REDIS_PASSWORD_REQUIRED=true<br/>export REDIS_PASSWORD=[primary access key]<br/>export REDIS_SSL_REQUIRED=true</span></pre><blockquote class="ml mm mn"><p id="9a7a" class="kw kx lw ky b kz la jr lb lc ld ju le mo lg lh li mp lk ll lm mq lo lp lq lr ij bi translated"><em class="iq">应用程序使用TLS 1.2通过SSL连接到Redis—</em><a class="ae kv" href="https://docs.microsoft.com/azure/azure-cache-for-redis/cache-remove-tls-10-11?WT.mc_id=medium-blog-abhishgu" rel="noopener ugc nofollow" target="_blank"><em class="iq">这是推荐的方法</em> </a></p></blockquote><p id="32df" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你应该已经准备好试用这个应用程序了</p></div><div class="ab cl mr ms hu mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="ij ik il im in"><h1 id="825e" class="my mz iq bd na nb nc nd ne nf ng nh ni jw nj jx nk jz nl ka nm kc nn kd no np bi translated">一些todos！</h1><p id="c1bf" class="pw-post-body-paragraph kw kx iq ky b kz nq jr lb lc nr ju le lf ns lh li lj nt ll lm ln nu lp lq lr ij bi translated">首先创建一个<code class="fe ls lt lu lv b">todo</code></p><pre class="kg kh ki kj gt nv lv nw nx aw ny bi"><span id="73e4" class="nz mz iq lv b gy oa ob l oc od">todo create --description "write the todo cli app"</span></pre><p id="6fbe" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您应该会看到这个响应</p><pre class="kg kh ki kj gt nv lv nw nx aw ny bi"><span id="b29b" class="nz mz iq lv b gy oa ob l oc od">created todo! use 'todo list' to get your todos</span></pre><p id="aad5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">多创造一些</p><pre class="kg kh ki kj gt nv lv nw nx aw ny bi"><span id="8cad" class="nz mz iq lv b gy oa ob l oc od">todo create --description "write the tutorial for redis cli app using go"<br/>todo create --description "push cli app code to github"<br/>todo create --description "get some sleep"</span></pre><p id="a649" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">用<code class="fe ls lt lu lv b">todo list</code>列出你所有的<code class="fe ls lt lu lv b">todo</code>。您应该看到:</p><pre class="kg kh ki kj gt nv lv nw nx aw ny bi"><span id="cb3d" class="nz mz iq lv b gy oa ob l oc od">+----+--------------------------------+---------+<br/>| ID |          DESCRIPTION           | STATUS  |<br/>+----+--------------------------------+---------+<br/>|  3 | push cli app code to github    | pending |<br/>|  2 | write the tutorial for redis   | pending |<br/>|    | cli app using go               |         |<br/>|  1 | write the todo cli app         | pending |<br/>|  4 | get some sleep                 | pending |<br/>+----+--------------------------------+---------+</span></pre><p id="ba44" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">更新几个<code class="fe ls lt lu lv b">todo</code>年代</p><pre class="kg kh ki kj gt nv lv nw nx aw ny bi"><span id="8886" class="nz mz iq lv b gy oa ob l oc od">todo update --id 1 --status completed<br/>todo update --id 2 --status in-progress<br/>todo update --id 4 --description "get some sleep NOW"</span></pre><p id="9f17" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">列出<code class="fe ls lt lu lv b">todo</code>应该会给你更新的信息:</p><pre class="kg kh ki kj gt nv lv nw nx aw ny bi"><span id="a02b" class="nz mz iq lv b gy oa ob l oc od">+----+--------------------------------+-------------+<br/>| ID |          DESCRIPTION           |   STATUS    |<br/>+----+--------------------------------+-------------+<br/>|  3 | push cli app code to github    | pending     |<br/>|  2 | write the tutorial for redis   | in-progress |<br/>|    | cli app using go               |             |<br/>|  1 | write the todo cli app         | completed   |<br/>|  4 | get some sleep NOW             | pending     |<br/>+----+--------------------------------+-------------+</span></pre><p id="5f9a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">仅列出<code class="fe ls lt lu lv b">pending</code> <code class="fe ls lt lu lv b">todo</code> s:</p><pre class="kg kh ki kj gt nv lv nw nx aw ny bi"><span id="9d84" class="nz mz iq lv b gy oa ob l oc od">todo list --status pending</span></pre><p id="f171" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您应该得到:</p><pre class="kg kh ki kj gt nv lv nw nx aw ny bi"><span id="0b4a" class="nz mz iq lv b gy oa ob l oc od">+----+-----------------------------+---------+<br/>| ID |         DESCRIPTION         | STATUS  |<br/>+----+-----------------------------+---------+<br/>|  3 | push cli app code to github | pending |<br/>|  4 | get some sleep NOW          | pending |<br/>+----+-----------------------------+---------+</span></pre><p id="9727" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">先删了<code class="fe ls lt lu lv b">todo</code> #4(谁需要睡觉！？)</p><pre class="kg kh ki kj gt nv lv nw nx aw ny bi"><span id="d1e8" class="nz mz iq lv b gy oa ob l oc od">todo delete --id 4</span></pre><p id="61d2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">不再需要睡眠！(根据<code class="fe ls lt lu lv b">todo list</code></p><pre class="kg kh ki kj gt nv lv nw nx aw ny bi"><span id="a8c1" class="nz mz iq lv b gy oa ob l oc od">+----+--------------------------------+-------------+<br/>| ID |          DESCRIPTION           |   STATUS    |<br/>+----+--------------------------------+-------------+<br/>|  3 | push cli app code to github    | pending     |<br/>|  2 | write the tutorial for redis   | in-progress |<br/>|    | cli app using go               |             |<br/>|  1 | write the todo cli app         | completed   |<br/>+----+--------------------------------+-------------+</span></pre><h2 id="37d1" class="nz mz iq bd na ok ol dn ne om on dp ni lf oo op nk lj oq or nm ln os ot no ou bi translated">不要忘记检查Redis</h2><p id="5d25" class="pw-post-body-paragraph kw kx iq ky b kz nq jr lb lc nr ju le lf ns lh li lj nt ll lm ln nu lp lq lr ij bi translated">让我们通过查看Redis数据结构来确认一下。为此，您可以使用<code class="fe ls lt lu lv b"><a class="ae kv" href="https://redis.io/topics/rediscli" rel="noopener ugc nofollow" target="_blank">redis-cli</a></code>。如果你使用Azure Redis缓存，我会推荐使用一个非常方便的基于web的Redis控制台</p><p id="19ae" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们检查已经创建的数据结构。我们使用<code class="fe ls lt lu lv b">todo</code>来命名数据结构(实现细节在下一篇博文中)，所以我们可以使用<code class="fe ls lt lu lv b"><a class="ae kv" href="https://redis.io/commands/scan" rel="noopener ugc nofollow" target="_blank">SCAN</a></code>来使用这个模式</p><pre class="kg kh ki kj gt nv lv nw nx aw ny bi"><span id="392e" class="nz mz iq lv b gy oa ob l oc od">SCAN 0 COUNT 1000 MATCH todo*</span></pre><blockquote class="ml mm mn"><p id="0a5a" class="kw kx lw ky b kz la jr lb lc ld ju le mo lg lh li mp lk ll lm mq lo lp lq lr ij bi translated"><em class="iq">出于性能考虑</em> <code class="fe ls lt lu lv b"><a class="ae kv" href="https://redis.io/commands/keys" rel="noopener ugc nofollow" target="_blank"><em class="iq">KEYS</em></a></code> <em class="iq">命令被禁止</em></p></blockquote><p id="9869" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您将看到以下输出:</p><pre class="kg kh ki kj gt nv lv nw nx aw ny bi"><span id="c549" class="nz mz iq lv b gy oa ob l oc od">1) "0"<br/>2) 1) "todos-id-set"<br/>   2) "todo:1"<br/>   3) "todo:2"<br/>   4) "todo:3"<br/>   5) "todoid"</span></pre><p id="f833" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b">todos-id-set</code>和<code class="fe ls lt lu lv b">todoid</code>分别对应<code class="fe ls lt lu lv b">SET</code>和<code class="fe ls lt lu lv b">STRING</code>(计数器)数据类型。<code class="fe ls lt lu lv b">todo:1</code>、<code class="fe ls lt lu lv b">todo:2</code>和<code class="fe ls lt lu lv b">todo:3</code>是包含<code class="fe ls lt lu lv b">todo</code>细节的<code class="fe ls lt lu lv b">HASH</code>数据类型。让我们看看<code class="fe ls lt lu lv b">todo:1</code>(即<code class="fe ls lt lu lv b">todo</code>与<code class="fe ls lt lu lv b">id</code> 1)</p><pre class="kg kh ki kj gt nv lv nw nx aw ny bi"><span id="5965" class="nz mz iq lv b gy oa ob l oc od">HGETALL todo:1</span></pre><p id="afa8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您应该会得到以下响应:</p><pre class="kg kh ki kj gt nv lv nw nx aw ny bi"><span id="527f" class="nz mz iq lv b gy oa ob l oc od">1) "status"<br/>2) "pending"<br/>3) "desc"<br/>4) "write the todo cli app"</span></pre><blockquote class="ml mm mn"><p id="9708" class="kw kx lw ky b kz la jr lb lc ld ju le mo lg lh li mp lk ll lm mq lo lp lq lr ij bi translated"><em class="iq">作为练习，确认其他</em> <code class="fe ls lt lu lv b"><em class="iq">todo</em></code> <em class="iq"> s，同时查看</em> <code class="fe ls lt lu lv b"><em class="iq">SET</em></code> <em class="iq">和</em> <code class="fe ls lt lu lv b"><em class="iq">STRING</em></code> <em class="iq">计数器数据类型</em></p></blockquote><p id="07bb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">好吧！这篇博文到此结束。请继续关注第二部分，我们将探索代码并了解事情是如何工作的。</p></div></div>    
</body>
</html>