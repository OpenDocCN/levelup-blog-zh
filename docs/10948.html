<html>
<head>
<title>How to Convert Index to Column in Pandas</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Pandas中将索引转换为列</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/index-to-column-pandas-911cc86a0773?source=collection_archive---------1-----------------------#2022-01-30">https://levelup.gitconnected.com/index-to-column-pandas-911cc86a0773?source=collection_archive---------1-----------------------#2022-01-30</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="99d9" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">将索引和多索引转换为pandas数据框架列</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/b559bb792f26b165dddd2fd33e518420.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bemSFW22nAIRD5Tg-qVssA.jpeg"/></div></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">由<a class="ae kz" href="https://unsplash.com/@kellysikkema?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Kelly Sikkema </a>在<a class="ae kz" href="https://unsplash.com/s/photos/add?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><h2 id="6c19" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">介绍</h2><p id="7a1b" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">pandas数据帧的索引是一个不可变的序列，用于索引和对齐。即使没有显式定义，pandas也会隐式地为创建的数据帧创建一个数字索引。此外，pandas支持多索引(也称为层次索引)。您可以将<code class="fe mp mq mr ms b">MultiIndex</code>视为一个元组数组，其中每个元组都是唯一的。多维索引通常出现在高维数据中。</p><p id="dff8" class="pw-post-body-paragraph lw lx iu ly b lz mu jv mb mc mv jy me lj mw mg mh ln mx mj mk lr my mm mn mo in bi translated">在今天的简短教程中，我们将展示<strong class="ly iv">如何将一只熊猫</strong> <code class="fe mp mq mr ms b"><strong class="ly iv">Index</strong></code> <strong class="ly iv">或</strong> <code class="fe mp mq mr ms b"><strong class="ly iv">MultiIndex</strong></code> <strong class="ly iv">转换成特定熊猫数据帧的实际列</strong>。</p></div><div class="ab cl mz na hy nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="in io ip iq ir"><p id="ab39" class="pw-post-body-paragraph lw lx iu ly b lz mu jv mb mc mv jy me lj mw mg mh ln mx mj mk lr my mm mn mo in bi translated">首先，让我们创建两个数据帧——一个有一个索引，另一个有<code class="fe mp mq mr ms b">MultiIndex</code>。</p><pre class="kk kl km kn gu ng ms nh ni aw nj bi"><span id="adfd" class="la lb iu ms b gz nk nl l nm nn">import pandas as pd<br/></span><span id="7123" class="la lb iu ms b gz no nl l nm nn"># pandas DF with a single index<br/>df_1 = pd.DataFrame(<br/>    [<br/>        (1, 'A', 10.1),<br/>        (2, 'B', 15.2),<br/>        (3, 'C', 12.2),<br/>        (4, 'D', 10.0),<br/>        (5, 'E', 5.0),<br/>    ],<br/>    columns=['col1', 'col2', 'col3'],<br/>    index=['AA', 'BB', 'CC', 'DD', 'EE'],<br/>)</span><span id="7904" class="la lb iu ms b gz no nl l nm nn">print(df_1)</span><span id="5519" class="la lb iu ms b gz no nl l nm nn"><strong class="ms iv"><em class="mt">    col1 col2  col3<br/>AA     1    A  10.1<br/>BB     2    B  15.2<br/>CC     3    C  12.2<br/>DD     4    D  10.0<br/>EE     5    E   5.0<br/></em></strong></span><span id="be76" class="la lb iu ms b gz no nl l nm nn"># pandas DF with MultiIndex<br/>df_2 = pd.DataFrame(<br/>    [<br/>        (1, 'A', 10.1),<br/>        (2, 'B', 15.2),<br/>        (3, 'C', 12.2),<br/>        (4, 'D', 10.0),<br/>        (5, 'E', 5.0),<br/>    ],<br/>    columns=['col1', 'col2', 'col3'],<br/>    index=<!-- -->pd.MultiIndex.from_arrays(<br/>         [<br/>             ['AA', 'BB', 'CC', 'DD', 'EE'],<br/>             [100, 200, 300, 400, 500]<br/>         ],<br/>         names=['col0', 'col4']<br/>    )<br/>)</span><span id="6469" class="la lb iu ms b gz no nl l nm nn">print(df_2)<br/><strong class="ms iv"><em class="mt">           col1 col2  col3<br/>col0 col4<br/>AA   100      1    A  10.1<br/>BB   200      2    B  15.2<br/>CC   300      3    C  12.2<br/>DD   400      4    D  10.0<br/>EE   500      5    E   5.0</em></strong></span></pre></div><div class="ab cl mz na hy nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="in io ip iq ir"><h2 id="2148" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">将索引转换为DataFrame列</h2><p id="0ed3" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">我们的第一个选择是通过简单地选择<code class="fe mp mq mr ms b">df.index</code>来插入一个新列:</p><pre class="kk kl km kn gu ng ms nh ni aw nj bi"><span id="5c32" class="la lb iu ms b gz nk nl l nm nn"><strong class="ms iv">df_1['col0'] = df.index</strong></span><span id="c87e" class="la lb iu ms b gz no nl l nm nn">print(df)<br/><em class="mt">    col1 col2  col3 col0<br/>AA     1    A  10.1   AA<br/>BB     2    B  15.2   BB<br/>CC     3    C  12.2   CC<br/>DD     4    D  10.0   DD<br/>EE     5    E   5.0   EE</em></span></pre><p id="807c" class="pw-post-body-paragraph lw lx iu ly b lz mu jv mb mc mv jy me lj mw mg mh ln mx mj mk lr my mm mn mo in bi translated">即使我们成功地插入了包含相应索引值的新列，索引本身也将保持不变。</p><p id="dbc9" class="pw-post-body-paragraph lw lx iu ly b lz mu jv mb mc mv jy me lj mw mg mh ln mx mj mk lr my mm mn mo in bi translated">相反，我们可以使用<code class="fe mp mq mr ms b"><a class="ae kz" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.reset_index.html" rel="noopener ugc nofollow" target="_blank">reset_index()</a></code>方法来重置索引或只是它的一个级别。</p><pre class="kk kl km kn gu ng ms nh ni aw nj bi"><span id="7277" class="la lb iu ms b gz nk nl l nm nn"><strong class="ms iv">df_1.reset_index(inplace=True)<br/></strong></span><span id="da51" class="la lb iu ms b gz no nl l nm nn">print(df)</span><span id="fdf4" class="la lb iu ms b gz no nl l nm nn"><em class="mt">  index  col1 col2  col3<br/>0    AA     1    A  10.1<br/>1    BB     2    B  15.2<br/>2    CC     3    C  12.2<br/>3    DD     4    D  10.0<br/>4    EE     5    E   5.0</em></span></pre><p id="9cf6" class="pw-post-body-paragraph lw lx iu ly b lz mu jv mb mc mv jy me lj mw mg mh ln mx mj mk lr my mm mn mo in bi translated">默认情况下，<code class="fe mp mq mr ms b">reset_index()</code>将创建一个以索引名命名的新列。如果您想为新列指定一个特定的名称，只需运行:</p><pre class="kk kl km kn gu ng ms nh ni aw nj bi"><span id="a45f" class="la lb iu ms b gz nk nl l nm nn"><strong class="ms iv">df_1.rename_axis('col0').reset_index(inplace=True)<br/></strong></span><span id="b167" class="la lb iu ms b gz no nl l nm nn">print(df)</span><span id="a7f4" class="la lb iu ms b gz no nl l nm nn"><em class="mt">  col0  col1 col2  col3<br/>0   AA     1    A  10.1<br/>1   BB     2    B  15.2<br/>2   CC     3    C  12.2<br/>3   DD     4    D  10.0<br/>4   EE     5    E   5.0</em></span></pre></div><div class="ab cl mz na hy nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="in io ip iq ir"><h2 id="3028" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">将多索引转换为DataFrame列</h2><p id="4a0f" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated"><code class="fe mp mq mr ms b">reset_index()</code>也适用于多索引的数据帧。默认情况下，该方法会将<code class="fe mp mq mr ms b">MultiIndex</code>的所有级别转换为列:</p><pre class="kk kl km kn gu ng ms nh ni aw nj bi"><span id="8345" class="la lb iu ms b gz nk nl l nm nn"><strong class="ms iv">df_2.rename_axis(inplace=True)<br/></strong></span><span id="0b13" class="la lb iu ms b gz no nl l nm nn">print(df)</span><span id="4505" class="la lb iu ms b gz no nl l nm nn"><em class="mt">  col0  col4  col1 col2  col3<br/>0   AA   100     1    A  10.1<br/>1   BB   200     2    B  15.2<br/>2   CC   300     3    C  12.2<br/>3   DD   400     4    D  10.0<br/>4   EE   500     5    E   5.0</em></span></pre><p id="ba35" class="pw-post-body-paragraph lw lx iu ly b lz mu jv mb mc mv jy me lj mw mg mh ln mx mj mk lr my mm mn mo in bi translated">同样，您可以通过调用<code class="fe mp mq mr ms b">rename()</code>来重命名新创建的列:</p><pre class="kk kl km kn gu ng ms nh ni aw nj bi"><span id="1eaf" class="la lb iu ms b gz nk nl l nm nn"><strong class="ms iv">df_2 = df_2 \<br/>  .rename_axis() \<br/>  </strong><strong class="ms iv">.rename(columns={'col0':'bar', 'col4': 'foo'})</strong></span><span id="5baf" class="la lb iu ms b gz no nl l nm nn"><br/>print(df)</span><span id="5f85" class="la lb iu ms b gz no nl l nm nn"><em class="mt">  bar  foo  col1 col2  col3<br/>0  AA  100     1    A  10.1<br/>1  BB  200     2    B  15.2<br/>2  CC  300     3    C  12.2<br/>3  DD  400     4    D  10.0<br/>4  EE  500     5    E   5.0</em></span></pre><p id="b96c" class="pw-post-body-paragraph lw lx iu ly b lz mu jv mb mc mv jy me lj mw mg mh ln mx mj mk lr my mm mn mo in bi translated">现在，您可以选择只转换多索引的子集。如果是这种情况，您需要指定<code class="fe mp mq mr ms b">level</code>参数，该参数定义要重置<code class="fe mp mq mr ms b">MultiIndex</code>的哪个(哪些)级别。</p><pre class="kk kl km kn gu ng ms nh ni aw nj bi"><span id="01b9" class="la lb iu ms b gz nk nl l nm nn"><strong class="ms iv"># Reset only first level of MultiIndex<br/>df_2.rename_axis(level=0, inplace=True)<br/></strong></span><span id="f3cd" class="la lb iu ms b gz no nl l nm nn">print(df_2)</span><span id="6d4e" class="la lb iu ms b gz no nl l nm nn"><em class="mt">     col0  col1 col2  col3<br/>col4<br/>100    AA     1    A  10.1<br/>200    BB     2    B  15.2<br/>300    CC     3    C  12.2<br/>400    DD     4    D  10.0<br/>500    EE     5    E   5.0</em></span><span id="7dd7" class="la lb iu ms b gz no nl l nm nn"># Reset only second level of MultiIndex<br/><strong class="ms iv">df_2.rename_axis(level=1, inplace=True)<br/></strong></span><span id="f8d1" class="la lb iu ms b gz no nl l nm nn">print(df_2)</span><span id="350e" class="la lb iu ms b gz no nl l nm nn"><em class="mt">      col4  col1 col2  col3<br/>col0<br/>AA     100     1    A  10.1<br/>BB     200     2    B  15.2<br/>CC     300     3    C  12.2<br/>DD     400     4    D  10.0<br/>EE     500     5    E   5.0</em></span></pre></div><div class="ab cl mz na hy nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="in io ip iq ir"><h2 id="78f3" class="la lb iu bd lc ld le dn lf lg lh dp li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">最后的想法</h2><p id="f311" class="pw-post-body-paragraph lw lx iu ly b lz ma jv mb mc md jy me lj mf mg mh ln mi mj mk lr ml mm mn mo in bi translated">在今天的简短指南中，我们在pandas数据框架的上下文中讨论了<code class="fe mp mq mr ms b">Index</code>和<code class="fe mp mq mr ms b">MultiIndex</code>，并展示了如何轻松地将索引转换为实际的列。</p></div><div class="ab cl mz na hy nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="in io ip iq ir"><p id="1b77" class="pw-post-body-paragraph lw lx iu ly b lz mu jv mb mc mv jy me lj mw mg mh ln mx mj mk lr my mm mn mo in bi translated"><a class="ae kz" href="https://gmyrianthous.medium.com/membership" rel="noopener"> <strong class="ly iv">成为会员</strong> </a> <strong class="ly iv">阅读介质上的每一个故事。你的会员费直接支持我和你看的其他作家。你也可以在媒体上看到所有的故事。</strong></p><div class="np nq gq gs nr ns"><a href="https://gmyrianthous.medium.com/membership" rel="noopener follow" target="_blank"><div class="nt ab fp"><div class="nu ab nv cl cj nw"><h2 class="bd iv gz z fq nx fs ft ny fv fx it bi translated">通过我的推荐链接加入Medium-Giorgos Myrianthous</h2><div class="nz l"><h3 class="bd b gz z fq nx fs ft ny fv fx dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="oa l"><p class="bd b dl z fq nx fs ft ny fv fx dk translated">gmyrianthous.medium.com</p></div></div><div class="ob l"><div class="oc l od oe of ob og kt ns"/></div></div></a></div></div><div class="ab cl mz na hy nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="in io ip iq ir"><p id="676e" class="pw-post-body-paragraph lw lx iu ly b lz mu jv mb mc mv jy me lj mw mg mh ln mx mj mk lr my mm mn mo in bi translated"><strong class="ly iv">你可能也会喜欢</strong></p><div class="np nq gq gs nr ns"><a href="https://towardsdatascience.com/how-to-efficiently-convert-a-pyspark-dataframe-to-pandas-8bda2c3875c3" rel="noopener follow" target="_blank"><div class="nt ab fp"><div class="nu ab nv cl cj nw"><h2 class="bd iv gz z fq nx fs ft ny fv fx it bi translated">加快PySpark和Pandas数据帧之间的转换</h2><div class="nz l"><h3 class="bd b gz z fq nx fs ft ny fv fx dk translated">将大火花数据帧转换为熊猫时节省时间</h3></div><div class="oa l"><p class="bd b dl z fq nx fs ft ny fv fx dk translated">towardsdatascience.com</p></div></div><div class="ob l"><div class="oh l od oe of ob og kt ns"/></div></div></a></div></div><div class="ab cl mz na hy nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="in io ip iq ir"><div class="kk kl km kn gu ns"><a href="https://towardsdatascience.com/loc-vs-iloc-in-pandas-92fc125ed8eb" rel="noopener follow" target="_blank"><div class="nt ab fp"><div class="nu ab nv cl cj nw"><h2 class="bd iv gz z fq nx fs ft ny fv fx it bi translated">熊猫中的loc与iloc</h2><div class="oa l"><p class="bd b dl z fq nx fs ft ny fv fx dk translated">towardsdatascience.com</p></div></div><div class="ob l"><div class="oi l od oe of ob og kt ns"/></div></div></a></div></div></div>    
</body>
</html>