<html>
<head>
<title>SMTP health, sending operations, and components</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">SMTP运行状况、发送操作和组件</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/smtp-health-sending-operations-and-components-ada8b13b9caf?source=collection_archive---------22-----------------------#2020-10-21">https://levelup.gitconnected.com/smtp-health-sending-operations-and-components-ada8b13b9caf?source=collection_archive---------22-----------------------#2020-10-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/7dd682ea81f92b1ec55e9b36cf22630f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2NkYBU_ZqMJzb0nm"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">埃内科·乌鲁内拉在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="8f7c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">电子邮件作为一种沟通机制已经存在了近40年，它仍然被认为是公司的一个关键组成部分，也是今天几乎所有事情的细节。电子邮件作为身份证明文件、护照甚至信用卡都很重要。照顾它是至关重要的。</p><p id="2c83" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在更进一步之前，我们需要确定，所有这一切都是可能的，因为互联网，这个著名的设备之间的网络，可以使每个人共享数据成为可能。还有，互联网中涉及的元素，比如IP地址、<strong class="kf ir">、DNS服务</strong>、<strong class="kf ir">、VPS </strong>、<strong class="kf ir"> SSL </strong>方式等等。</p><p id="621e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所有这些部分都有一定的功能，使一切都变得生动起来。借此机会，我将对电子邮件技术进行一个高层次的概述，它涉及哪些内容，当然，还有如何称赞健康的环境和声誉。</p><p id="f880" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们需要开始谈论一下<strong class="kf ir"> DNS </strong>，这是因为它执行域和IP地址之间的转换，这让我们很容易记住域名，而不是记住IP地址。这不是很好解释，你可以把一个DNS服务器比作一个电话簿，它将映射名称和IP地址。</p><p id="19f4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">免责声明:有很多直接涉及电子邮件操作的术语需要深入理解。在这节课中，我会简单地提到它，确保它不会对所有内容都公平。</p><h2 id="ee86" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">电子邮件发送操作</h2><p id="2505" class="pw-post-body-paragraph kd ke iq kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">你有没有问过自己，你的电子邮件客户端是如何收发邮件的？</p><p id="243a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是一个激烈的过程，但可以分成非常小的和一般的步骤。为此，我们需要讨论一下<strong class="kf ir">发送者</strong>和<strong class="kf ir">接收者</strong>。</p><p id="7953" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">假设您打开了Gmail或Outlook客户端，该软件配置为接收和发送操作。为了发送邮件，我们将使用<strong class="kf ir">SMTP</strong>T18】协议(简单消息传输协议)，因此:</p><ol class=""><li id="4c51" class="lz ma iq kf b kg kh kk kl ko mb ks mc kw md la me mf mg mh bi translated">在这里，<strong class="kf ir">发送者</strong>撰写并发送一封电子邮件(通过<strong class="kf ir"> SMTP </strong>协议)。这里的SMTP就像一个邮局，评估是否一切正常</li><li id="df97" class="lz ma iq kf b kg mi kk mj ko mk ks ml kw mm la me mf mg mh bi translated">一旦是好的，它就被重定向到一个<strong class="kf ir"> DNS </strong>服务器(那个地址簿)来解析发送者的IP地址。</li><li id="581c" class="lz ma iq kf b kg mi kk mj ko mk ks ml kw mm la me mf mg mh bi translated"><strong class="kf ir"> DNS </strong>再次将消息发送到<strong class="kf ir"> MTA服务器</strong>(邮件代理传输)，后者选择合适的收件人收件箱，将消息发送到该收件箱。</li><li id="73b8" class="lz ma iq kf b kg mi kk mj ko mk ks ml kw mm la me mf mg mh bi translated">信息被发送到收件箱。</li></ol><p id="e879" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，它来到了操作的<strong class="kf ir">接收者的</strong>侧。</p><p id="283d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这一点上，在MTA和收件箱之间，有一些协议用于客户端的输入/输出通信。这些是POP和IMAP协议。</p><p id="0eef" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">涉及的其他组件有一个通用的<strong class="kf ir"> VPS </strong>和<strong class="kf ir"> SSL </strong>，第一个是一个私有服务器，其中一个服务器将绑定到一个IP地址以进行正确处理<em class="mn">(此处需要额外的软件)，</em>也是最推荐的一个<strong class="kf ir"> SSL </strong>连接，其中所有发送和接收的流量都将被加密(非常有利于保护流量)。</p><p id="81c6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你是一名开发人员，也许你可以做一点研究，让自己托管自己的电子邮件服务器，像<strong class="kf ir"> Cpanel邮件服务器</strong>、<strong class="kf ir"> Webmin </strong>这样的流行工具，或者如果你是一名<strong class="kf ir"> AWS </strong>粉丝，你可以实现一个<strong class="kf ir"> AWS邮件服务器。</strong>这取决于你，几乎在所有情况下，你都需要为你的服务器配备操作系统，执行完整的<strong class="kf ir"> DNS </strong>管理，设置电子邮件创建、<strong class="kf ir"> SSL </strong> certs、<strong class="kf ir"> MX </strong>记录，以及更高级的东西，如<strong class="kf ir"> DNSSec </strong>、<strong class="kf ir"> SPF </strong>、<strong class="kf ir"> DKIM </strong>和<strong class="kf ir"> DMARC </strong>记录(稍后再说)</p><p id="5c28" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于VPS选项，任何知名的云计算提供商都可能是它的合适人选，可能是DigitalOcean的一个小水滴，也可能是AWS的实例</p><h2 id="7347" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">我们都准备好了。让我们热身</h2><p id="7b8b" class="pw-post-body-paragraph kd ke iq kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">这个热身的概念是关于创造和产生一个可接受的流量来提高我们的声誉。电子邮件以一种不确定的状态开始，所以很多时候，你的邮件会被放入垃圾邮件收件箱，而实际上并不是一封预期的垃圾邮件。</p><p id="8101" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这也是像Google这样的ISP进行身份验证的评估。如果你的信誉很好，那么优先发送。</p><p id="f5d7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">评估非常简单，它将取决于您的邮件列表、内容和许多其他因素，因此，为了健康，您需要注意您的收件人参与度、主题行，并生成有价值的内容以避免垃圾邮件问题</p><h2 id="a340" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">避免垃圾邮件</h2><p id="8082" class="pw-post-body-paragraph kd ke iq kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">垃圾邮件问题可以很容易地解决和防止，如果你使用Gmail或Outlook这样的解决方案，有很大的机会不出现这种行为，谷歌的IP是完美的，但是，对于公司帐户来说，这可能是一个挑战，所以，请确保这一点。</p><ol class=""><li id="6a3a" class="lz ma iq kf b kg kh kk kl ko mb ks mc kw md la me mf mg mh bi translated">避免不健康的电子邮件服务器，只需收集电子邮件，无需上网或购买邮件列表</li><li id="ed7f" class="lz ma iq kf b kg mi kk mj ko mk ks ml kw mm la me mf mg mh bi translated">在DNS方面，你应该有SPF和DKIM记录集，这使你的服务器更加安全</li><li id="8ec8" class="lz ma iq kf b kg mi kk mj ko mk ks ml kw mm la me mf mg mh bi translated">邮件正文很重要，内容很关键，你应该避免垃圾邮件。</li><li id="7782" class="lz ma iq kf b kg mi kk mj ko mk ks ml kw mm la me mf mg mh bi translated">获得良好的知识产权声誉</li></ol><h2 id="9486" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">高级DNS设置</h2><p id="22ce" class="pw-post-body-paragraph kd ke iq kf b kg lu ki kj kk lv km kn ko lw kq kr ks lx ku kv kw ly ky kz la ij bi translated">为了改善您的电子邮件健康状况，您可以对电子邮件服务器应用更多规则。如今，几乎所有云提供商都需要这些新类型的记录，以便更好地工作和提高安全性。</p><p id="264b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们从<strong class="kf ir"> SPF </strong>或<strong class="kf ir">发件人策略框架</strong>开始，这一特殊功能让您可以识别哪些域被允许使用您的服务器域来发送邮件。因此，如果有人损害你的电子邮件信用，并试图用你的电子邮件帐户发送电子邮件，它将不会被发送。</p><p id="b0ac" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">换句话说，当发送一封电子邮件时，你将输入'<strong class="kf ir">到'</strong>和'<strong class="kf ir">从'</strong>标题信息，对吗？如果电子邮件包含垃圾邮件内容，收件人会认为您发送了一封<strong class="kf ir">合法的恶意电子邮件</strong></p><p id="e51f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">SPF 将帮助您识别允许发送电子邮件的IP地址。</p><p id="fcc6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这里有一个例子:</p><p id="84ae" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mo mp mq mr b">TXT</code>记录:@(在<code class="fe mo mp mq mr b">host</code>)，并为<code class="fe mo mp mq mr b">TXT Value</code>添加要发送的可用IP。可以为<code class="fe mo mp mq mr b">1 hour</code>设置<code class="fe mo mp mq mr b">TTL</code></p><p id="d5c5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">继续前进，到<strong class="kf ir"> DKIM </strong>或<strong class="kf ir">域密钥标识符</strong></p><p id="724c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">该密钥是标识您的域服务器的签名。就是这样。</p><p id="854b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，当您发送电子邮件时，收件人将检查您的签名，并验证邮件是否来自该域。</p><p id="d306" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这里有一个例子:</p><p id="d6ba" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mo mp mq mr b">TXT</code>记录:为<code class="fe mo mp mq mr b">host</code>添加适当的标识符，为<code class="fe mo mp mq mr b">TXT Value</code>生成一个长文本，<code class="fe mo mp mq mr b">TTL</code>也被设置为<code class="fe mo mp mq mr b">1 hour</code></p><p id="669b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，<strong class="kf ir"> DMARC </strong>或<strong class="kf ir">域消息认证报告和一致性</strong>(听起来很吓人，但事实并非如此！)</p><p id="b248" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">该记录是针对SPF和DKIM的报告服务，主要用于部署，其唯一目标是报告两个记录都配置良好。</p><p id="4363" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">该示例遵循一个预定义的模板，该模板形成一个操作，因为DNS记录将如下所示。</p><p id="2528" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mo mp mq mr b">TXT</code>记录:对于<code class="fe mo mp mq mr b">host</code>，您将拥有一个带有可选附加信息的<code class="fe mo mp mq mr b">_dmarc</code>前缀，一个带有特定模板的<code class="fe mo mp mq mr b">TXT Value</code>和一个用于<code class="fe mo mp mq mr b">1 hour</code>的TTL</p><p id="77ad" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">DMARC模板如下所示:</p><p id="4984" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mo mp mq mr b">v=DMARC; p=none; fo=1; rua=mailto:dmarc@davidlares.com; ruf=mailto:dmarc@davidlares.com</code></p><p id="687d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这看起来很复杂，但有一个解释:</p><ol class=""><li id="e9c6" class="lz ma iq kf b kg kh kk kl ko mb ks mc kw md la me mf mg mh bi translated"><code class="fe mo mp mq mr b">v=DMARC</code>是版本</li><li id="68f1" class="lz ma iq kf b kg mi kk mj ko mk ks ml kw mm la me mf mg mh bi translated"><code class="fe mo mp mq mr b">p=none</code>声明不需要任何操作</li><li id="d980" class="lz ma iq kf b kg mi kk mj ko mk ks ml kw mm la me mf mg mh bi translated"><code class="fe mo mp mq mr b">fo=1</code>我很确定那是用于报告控制标志的</li><li id="7797" class="lz ma iq kf b kg mi kk mj ko mk ks ml kw mm la me mf mg mh bi translated"><code class="fe mo mp mq mr b">rua</code>是您希望接收汇总报告的电子邮件地址</li><li id="b2a7" class="lz ma iq kf b kg mi kk mj ko mk ks ml kw mm la me mf mg mh bi translated"><code class="fe mo mp mq mr b">ruf</code>是发送法医报告的邮件。</li></ol><p id="2fae" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">还有更多的内容要讲，我只是在解释最基本的东西。我写这篇文章的目的是分享一个健康的、配置良好的电子邮件系统有多重要的概述。你的很多业务都是通过你简单的电子邮件账户来完成的。</p><p id="00ed" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">保持简单、实用、安全。</p><p id="0382" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">快乐写作:)</p></div></div>    
</body>
</html>