<html>
<head>
<title>How to Create a Custom Context Manager in Python OOP: Python OOP Complete Course (Part 19)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Python OOP中创建自定义上下文管理器:Python OOP完整教程(第19部分)</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-create-a-custom-context-manager-in-python-oop-python-oop-complete-course-part-19-6f6647a97f5c?source=collection_archive---------8-----------------------#2022-07-28">https://levelup.gitconnected.com/how-to-create-a-custom-context-manager-in-python-oop-python-oop-complete-course-part-19-6f6647a97f5c?source=collection_archive---------8-----------------------#2022-07-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="96c5" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">了解什么是Python OOP中的上下文管理器特殊方法，以及如何覆盖它们。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/973b4a12aa411091555a1bf546a13536.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wowLpc-duxJEtpD1mLPM3w.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">穆罕默德·塔克什在<a class="ae ky" href="https://unsplash.com/s/photos/context" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="8217" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我们开始之前，让我告诉你:</p><ul class=""><li id="dd39" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">这篇文章是Python面向对象编程完整课程的一部分，你可以在这里找到它。</li><li id="738f" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">所有资源都可以在下面的“资源”部分找到。</li></ul></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h2 id="02c2" class="mq mr it bd ms mt mu dn mv mw mx dp my li mz na nb lm nc nd ne lq nf ng nh ni bi translated">介绍</h2><p id="385b" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">当您听到术语<strong class="lb iu">上下文管理器</strong>时，您必须记住的关键字是<code class="fe no np nq nr b">with</code></p><p id="6f6a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">提醒一下，<code class="fe no np nq nr b">with</code>关键字可用于打开文件进行读写，如下所示:</p><pre class="kj kk kl km gt ns nr nt nu aw nv bi"><span id="5490" class="mq mr it nr b gy nw nx l ny nz">with open('file_path', 'w') as file: <br/>    file.write('hello world !')</span></pre><p id="dbfa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通常，我们对文件使用<code class="fe no np nq nr b">with</code>关键字来保证<strong class="lb iu">在完成所有需要的处理后关闭</strong>文件。</p><p id="8fe5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">那么，如何让你的对象能够使用Python中的<code class="fe no np nq nr b">with</code>关键字呢？让我们一起来看看。</p><p id="e5ff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">目录</strong></p><ol class=""><li id="4328" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu oa mb mc md bi translated"><a class="ae ky" href="#aa30" rel="noopener ugc nofollow">上下文管理器有哪些特殊的方法？</a></li><li id="7cf1" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu oa mb mc md bi translated"><a class="ae ky" href="#9a52" rel="noopener ugc nofollow">可用上下文管理器的特殊方法</a></li><li id="dac8" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu oa mb mc md bi translated">如何覆盖上下文管理器的特殊方法？</li></ol><h2 id="aa30" class="mq mr it bd ms mt mu dn mv mw mx dp my li mz na nb lm nc nd ne lq nf ng nh ni bi translated">1.上下文管理器有哪些特殊的方法？</h2><p id="c716" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">一般来说，<strong class="lb iu">上下文管理器</strong>允许设置和清理对象的资源，当它们的创建被一个<code class="fe no np nq nr b">with</code>语句包装时(例如，数据库是在你使用完它们之后需要清理的资源之一。这种清理通过关闭连接来进行)。</p><p id="f035" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">特别是，<strong class="lb iu">上下文管理器的特殊方法</strong>是用于定义上下文管理器行为的方法。换句话说，它定义了当您进入该语句的代码块时要做什么，以及当您离开该代码块时要做什么。</p><p id="216f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，让我们检查一下有哪些可用的上下文管理器特殊方法。</p><h2 id="9a52" class="mq mr it bd ms mt mu dn mv mw mx dp my li mz na nb lm nc nd ne lq nf ng nh ni bi translated">2.可用的上下文管理器的特殊方法</h2><p id="02e3" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">如前所述，您必须在<code class="fe no np nq nr b">with</code>语句的代码块开始和代码块结束时定义行为。</p><p id="5e9b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，有两种上下文管理器方法:</p><ul class=""><li id="46a8" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated"><code class="fe no np nq nr b">__enter__(self)</code>:定义<strong class="lb iu">上下文管理器</strong>在<code class="fe no np nq nr b">with</code>语句创建的块的开头应该做什么。</li><li id="4283" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><code class="fe no np nq nr b">__exit__(self, exception_type, exception_value, traceback)</code>:它定义了<strong class="lb iu">上下文管理器</strong>在其块被执行或终止后应该做什么。</li></ul><p id="9dba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们看一个具体的例子来学习如何覆盖它们。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ob"><img src="../Images/1c5a4d6f9340d9e75416fe4d5aca7abd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HYe3FAMlabikySQq3OnwEw.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@alpduran" rel="noopener ugc nofollow" target="_blank"> Alp Duran </a>在<a class="ae ky" href="https://unsplash.com/s/photos/between" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</figcaption></figure></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><h2 id="51d2" class="mq mr it bd ms mt mu dn mv mw mx dp my li mz na nb lm nc nd ne lq nf ng nh ni bi translated">3.如何覆盖上下文管理器的特殊方法？</h2><p id="6a2c" class="pw-post-body-paragraph kz la it lb b lc nj ju le lf nk jx lh li nl lk ll lm nm lo lp lq nn ls lt lu im bi translated">首先，让我们举一个例子来说明为什么上下文管理器是有用的。</p><p id="7998" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设你有一个文件夹，它的名字是<code class="fe no np nq nr b">dataset</code>，在这个文件夹中你有文件<code class="fe no np nq nr b">dummy.txt</code>。</p><p id="b77c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们在两种情况下打开这个文件。</p><ul class=""><li id="a8c5" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated"><strong class="lb iu">不使用(上下文管理器)</strong>。</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oc od l"/></div></figure><p id="640f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">输出:</p><pre class="kj kk kl km gt ns nr nt nu aw nv bi"><span id="7bd9" class="mq mr it nr b gy nw nx l ny nz">Hi I am Dummy File<br/>True</span></pre><p id="3eae" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">前面的例子已经被执行，没有任何错误，正如你看到的<code class="fe no np nq nr b">file.closed</code>返回<code class="fe no np nq nr b">True</code>，这意味着文件<strong class="lb iu">被关闭</strong>。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><ul class=""><li id="2ac3" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">现在，如果在你关闭文件之前发生了错误，会发生什么？</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oc od l"/></div></figure><p id="4914" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">输出:</p><pre class="kj kk kl km gt ns nr nt nu aw nv bi"><span id="eec4" class="mq mr it nr b gy nw nx l ny nz">IndexError                                Traceback (most recent call last)<br/>&lt;ipython-input-2-9755d8bd0574&gt; in &lt;module&gt;<br/>      4 content = file.read()<br/>      5 a = [1, 2]<br/>----&gt; 6 b = a[10]<br/>      7 file.close()<br/>      8 print(content)</span><span id="7511" class="mq mr it nr b gy oe nx l ny nz">IndexError: list index out of range</span></pre><p id="7304" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在前面的例子中，您试图从只有两个元素的列表中访问<code class="fe no np nq nr b">10th</code>元素，因此您得到了一个错误。</p><ul class=""><li id="8054" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">检查文件是否关闭。</li></ul><pre class="kj kk kl km gt ns nr nt nu aw nv bi"><span id="bfd6" class="mq mr it nr b gy nw nx l ny nz">print(file.closed)</span></pre><p id="7174" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">输出:</p><pre class="kj kk kl km gt ns nr nt nu aw nv bi"><span id="f7b8" class="mq mr it nr b gy nw nx l ny nz">False</span></pre><p id="9945" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你得到<code class="fe no np nq nr b">False</code>是因为调用函数<code class="fe no np nq nr b">file.close()</code>前出错，文件还没有关闭<strong class="lb iu">。</strong></p><ul class=""><li id="e81f" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">现在让我们用上下文管理器来尝试前两个例子。</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oc od l"/></div></figure><p id="60ff" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">输出:</p><pre class="kj kk kl km gt ns nr nt nu aw nv bi"><span id="35d0" class="mq mr it nr b gy nw nx l ny nz">Hi I am Dummy File<br/>True</span></pre><p id="4afa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如你所见，它已经运行并且文件已经关闭，因为<strong class="lb iu">上下文管理器</strong>关闭了场景之外的文件。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><ul class=""><li id="4afd" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">让我们检查一下，如果在关闭文件之前发生了一个<code class="fe no np nq nr b">error</code>，会发生什么。</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oc od l"/></div></figure><p id="b6f6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">输出:</p><pre class="kj kk kl km gt ns nr nt nu aw nv bi"><span id="f24b" class="mq mr it nr b gy nw nx l ny nz">IndexError                                Traceback (most recent call last)<br/>&lt;ipython-input-6-7d029e3dc81d&gt; in &lt;module&gt;<br/>      3 with open(file_path) as fil:<br/>      4     a = [1, 2]<br/>----&gt; 5     b = a[10]<br/>      6     content = fil.read()<br/>      7</span><span id="1b84" class="mq mr it nr b gy oe nx l ny nz">IndexError: list index out of range</span></pre><p id="4a1b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如您所见，您遇到了一个错误。</p><ul class=""><li id="84d6" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">检查文件是否关闭。</li></ul><pre class="kj kk kl km gt ns nr nt nu aw nv bi"><span id="29ea" class="mq mr it nr b gy nw nx l ny nz">print(fil.closed)</span></pre><p id="d55d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">输出:</p><pre class="kj kk kl km gt ns nr nt nu aw nv bi"><span id="fe01" class="mq mr it nr b gy nw nx l ny nz">True</span></pre><p id="f4a0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">尽管发生了错误，您还是得到了<code class="fe no np nq nr b">True</code>。</p><p id="1941" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因此，<strong class="lb iu">上下文管理器</strong>帮助你<strong class="lb iu">清理</strong>资源，并且<strong class="lb iu">关闭</strong>文件，即使有错误。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><ul class=""><li id="8f1a" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">现在让我们定义模拟<code class="fe no np nq nr b">open()</code>功能的<code class="fe no np nq nr b">File</code>类。</li></ul><p id="f528" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设类<code class="fe no np nq nr b">File</code>有三个属性(<code class="fe no np nq nr b">file</code>、<code class="fe no np nq nr b">file_path</code>和<code class="fe no np nq nr b">mode</code>)，并且您想让您的类成为<strong class="lb iu">上下文管理器</strong>，那么您应该覆盖<code class="fe no np nq nr b">__enter__()</code>方法和<code class="fe no np nq nr b">__exit__()</code>方法。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oc od l"/></div></figure><p id="d46a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">输出:</p><pre class="kj kk kl km gt ns nr nt nu aw nv bi"><span id="d13b" class="mq mr it nr b gy nw nx l ny nz">Hi I am Dummy File</span><span id="9105" class="mq mr it nr b gy oe nx l ny nz">The file has been closed</span></pre><p id="2613" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如您所看到的，该类打开了文件，然后没有任何问题地关闭了它。</p><ul class=""><li id="3477" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">检查文件是否关闭。</li></ul><pre class="kj kk kl km gt ns nr nt nu aw nv bi"><span id="dc7c" class="mq mr it nr b gy nw nx l ny nz">print(f.closed)</span></pre><p id="749e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">输出:</p><pre class="kj kk kl km gt ns nr nt nu aw nv bi"><span id="c909" class="mq mr it nr b gy nw nx l ny nz">True</span></pre><p id="76ea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您得到了<code class="fe no np nq nr b">True</code>，这意味着您的上下文管理器类<code class="fe no np nq nr b">File</code>在文件从<code class="fe no np nq nr b">with</code> <strong class="lb iu"> </strong>语句体中退出后关闭了该文件。</p><ul class=""><li id="29e7" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">检查在<code class="fe no np nq nr b">with</code>范围内发生异常时会发生什么。</li></ul><pre class="kj kk kl km gt ns nr nt nu aw nv bi"><span id="332d" class="mq mr it nr b gy nw nx l ny nz">with File(file_path, 'r') as f:<br/>    cont = f.read()<br/>    a = [1,2]<br/>    b = a[10]<br/>    print(cont)<br/>    print()</span></pre><p id="13a2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">输出:</p><pre class="kj kk kl km gt ns nr nt nu aw nv bi"><span id="a677" class="mq mr it nr b gy nw nx l ny nz">The file has been closed</span><span id="0230" class="mq mr it nr b gy oe nx l ny nz">---------------------------------------------------------------------------<br/>IndexError                                Traceback (most recent call last)<br/>&lt;ipython-input-11-61758e09ee00&gt; in &lt;module&gt;<br/>      2     cont = f.read()<br/>      3     a = [1,2]<br/>----&gt; 4     b = a[10]<br/>      5     print(cont)<br/>      6     print()</span><span id="175f" class="mq mr it nr b gy oe nx l ny nz">IndexError: list index out of range</span></pre><p id="45b6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在前面的例子中，您试图从只有两个元素的列表中访问<code class="fe no np nq nr b">10th</code>元素，因此您得到了一个错误。</p><ul class=""><li id="c2c5" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">检查文件是否关闭。</li></ul><pre class="kj kk kl km gt ns nr nt nu aw nv bi"><span id="e6e2" class="mq mr it nr b gy nw nx l ny nz">print(f.closed)</span></pre><p id="afad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">输出:</p><pre class="kj kk kl km gt ns nr nt nu aw nv bi"><span id="7384" class="mq mr it nr b gy nw nx l ny nz">True</span></pre><p id="7d17" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您得到了<code class="fe no np nq nr b">True</code>,这意味着即使发生了错误，文件也是关闭的。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><p id="c670" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，假设您想要访问错误的类型，以便能够处理它。为此，您应该更新<code class="fe no np nq nr b">__exit__()</code>方法。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oc od l"/></div></figure><p id="af1a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">输出:</p><pre class="kj kk kl km gt ns nr nt nu aw nv bi"><span id="af95" class="mq mr it nr b gy nw nx l ny nz">The file has been closed<br/>exception_type: &lt;class 'IndexError'&gt;<br/>exception_value: list index out of range<br/>traceback: &lt;traceback object at 0x0000000004DD3D88&gt;</span><span id="f51e" class="mq mr it nr b gy oe nx l ny nz">---------------------------------------------------------------------------<br/>IndexError                                Traceback (most recent call last)<br/>&lt;ipython-input-14-565acbd5e564&gt; in &lt;module&gt;<br/>     22     cont = f.read()<br/>     23     a = [1,2]<br/>---&gt; 24     b = a[10]<br/>     25     print(cont)<br/>     26     print()</span><span id="0401" class="mq mr it nr b gy oe nx l ny nz">IndexError: list index out of range</span></pre><p id="9a8e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如您所看到的，当一个错误发生在<strong class="lb iu">上下文管理器</strong>范围内时，您可以获得关于这个错误的所有细节，这样您就可以根据您正在处理的用例轻松地处理它。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><p id="1b47" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，让我们总结一下我们在这篇文章中学到了什么。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi of"><img src="../Images/dd42ce95c035cbd870dff4fd5c710c5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*TtWnDRI2rzj6cEGozDqvyA.jpeg"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://www.pexels.com/@ann-h-45017/" rel="noopener ugc nofollow" target="_blank">安H </a>在<a class="ae ky" href="https://www.pexels.com/" rel="noopener ugc nofollow" target="_blank">像素</a>上拍摄</figcaption></figure><ul class=""><li id="673f" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated"><strong class="lb iu">上下文管理器的特殊方法:</strong>是用于在<code class="fe no np nq nr b">with </code>语句代码块的开头和结尾定义上下文管理器行为的方法。</li><li id="d074" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><code class="fe no np nq nr b">enter()</code>方法:定义<strong class="lb iu">上下文管理器</strong>在<code class="fe no np nq nr b">with</code>语句创建的块的开头应该做什么。</li><li id="105b" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated"><code class="fe no np nq nr b">exit()</code>方法:定义<strong class="lb iu">上下文管理器</strong>在块被执行或终止后应该做什么。</li></ul></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><p id="62e5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu"> <em class="og">附言</em> </strong>:万分感谢您花时间阅读我的故事。在你离开之前，让我快速地提两点:</p><ul class=""><li id="c5f0" class="lv lw it lb b lc ld lf lg li lx lm ly lq lz lu ma mb mc md bi translated">首先，要直接在您的收件箱中获得我的帖子，请在这里订阅<a class="ae ky" href="https://medium.com/@samersallam92/subscribe" rel="noopener"><strong class="lb iu"><em class="og"/></strong></a>，您可以在这里关注我<em class="og"/><a class="ae ky" href="https://medium.com/@samersallam92" rel="noopener"><strong class="lb iu"><em class="og"/></strong></a>。</li><li id="78fc" class="lv lw it lb b lc me lf mf li mg lm mh lq mi lu ma mb mc md bi translated">第二，作家在媒体上赚了几千美元。为了无限制地访问媒体故事并开始赚钱，<a class="ae ky" href="https://medium.com/@samersallam92/membership" rel="noopener"> <strong class="lb iu"> <em class="og">现在就注册成为媒体会员</em> </strong> </a>，每月仅需5美元。通过注册<em class="og"> </em> <a class="ae ky" href="https://medium.com/@samersallam92/membership" rel="noopener"> <strong class="lb iu"> <em class="og">与此链接</em> </strong> </a>，您可以直接支持我，无需您支付额外费用。</li></ul><div class="oh oi gp gr oj"><div role="button" tabindex="0" class="ab bv gv cb fp ok ol bn om ks ex"><div class="on l"><div class="ab q"><div class="l di"><img alt="Samer Sallam" class="l de bw oo op fe" src="../Images/7d756fa3da76843e747e5ecde71b84d0.png" width="20" height="20" loading="lazy" data-original-src="https://miro.medium.com/v2/resize:fill:40:40/1*4O9o5xxtyHdOvuDDgqPDiQ.jpeg"/><div class="fb bw l oo op fc n aw fd"/></div><div class="hh l fo"><p class="bd b dl z fp fq fr fs ft fu fv fw dk translated">萨梅尔·萨拉姆</p></div></div><div class="os ot gw l"><h2 class="bd iu tz lv fp ua fr fs ub fu fw is bi translated">Python面向对象编程的完整教程</h2></div><div class="ab q"><div class="l fo"><a class="bd b be z bi uc au ud ue uf qp ug an eh ei uh ui uj el em eo de bk ep" href="https://medium.com/@samersallam92/list/the-complete-course-in-objectoriented-programming-in-python-7b54126a7f4e?source=post_page-----6f6647a97f5c--------------------------------" rel="noopener follow" target="_top">View list</a></div><div class="uk l fo"><span class="bd b dl z dk">24 stories</span></div></div></div><div class="pf dh pg fp ab ph fo di"><div class="di ox bv oy oz"><div class="dh l"><img alt="A magnifying glass with the Python logo and a set of objects and arrows connecting between them to indicate that everything in Python is an object" class="dh" src="../Images/ce97e46734c67f4f565df3877a88bd11.png" width="194" height="194" loading="lazy" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/1*oEBVsGg3ZoemmQrO5XsEjg.png"/></div></div><div class="di ox bv pa pb pc"><div class="dh l"><img alt="A dummy image for better reading and navigation." class="dh" src="../Images/926249cc12e1f2c807e7711382599fb6.png" width="194" height="194" loading="lazy" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/1*-3K07ESmZjOLyOJfQx79Og.jpeg"/></div></div><div class="di bv pd pe pc"><div class="dh l"><img alt="A dummy image for better reading and navigation." class="dh" src="../Images/2d5e5c2a38605b91a621b6b26d9ab546.png" width="194" height="194" loading="lazy" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/1*v9F3xOiuKmEWZo37t0MuxQ.png"/></div></div></div></div></div></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><p id="114f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要回到上一篇文章，您可以使用以下链接:</p><p id="5c16" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://blog.devgenius.io/how-to-create-a-customized-sequence-class-python-oop-complete-course-part-18-8c47ac58b814" rel="noopener ugc nofollow" target="_blank">第18部分:如何创建定制的序列类</a></p><p id="557f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要阅读下一篇文章，您可以使用以下链接:</p><p id="71d2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/how-to-create-callable-objects-in-python-python-oop-complete-course-part-20-15fe46e3e2c3">第20部分:如何在Python中创建可调用对象</a></p><h2 id="7915" class="mq mr it bd ms mt mu dn mv mw mx dp my li mz na nb lm nc nd ne lq nf ng nh ni bi translated">资源:</h2><ul class=""><li id="14a9" class="lv lw it lb b lc nj lf nk li pl lm pm lq pn lu ma mb mc md bi translated">GitHub <a class="ae ky" href="https://github.com/samersallam/The-Complete-Course-in-Object-Oriented-Programming-in-Python/tree/main/Context%20Managers%20Special%20Methods" rel="noopener ugc nofollow" target="_blank">这里</a>。</li></ul></div></div>    
</body>
</html>