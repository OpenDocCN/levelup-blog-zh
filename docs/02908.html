<html>
<head>
<title>Yet another TODO app! With Redis and Go [Part 2]</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">åˆä¸€ä¸ªTODOåº”ç”¨ï¼ä½¿ç”¨Rediså’ŒGo[ç¬¬2éƒ¨åˆ†]</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://levelup.gitconnected.com/yet-another-todo-app-with-redis-and-go-part-2-326379d94d8b?source=collection_archive---------21-----------------------#2020-04-09">https://levelup.gitconnected.com/yet-another-todo-app-with-redis-and-go-part-2-326379d94d8b?source=collection_archive---------21-----------------------#2020-04-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/6c823752cdb04ec65c33d98f8d95cf96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Uj9HTyAgCsGh0Ikj"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">åŠ³ä¼¦Â·ç´¢å¾·åœ¨<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>ä¸Šæ‹æ‘„çš„ç…§ç‰‡</figcaption></figure><p id="e65d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">è¿™æ˜¯åšå®¢ç³»åˆ—çš„ç¬¬äºŒéƒ¨åˆ†(ä¹Ÿæ˜¯æœ€åä¸€éƒ¨åˆ†),åœ¨ä¸€ä¸ªç®€å•è€Œå®ç”¨çš„<strong class="kf ir"> todoåº”ç”¨</strong>çš„å¸®åŠ©ä¸‹ï¼Œæ¶µç›–äº†ä¸€äº›Redisæ•°æ®ç»“æ„ğŸ˜‰ä½¿ç”¨<code class="fe lb lc ld le b"><a class="ae kc" href="https://golang.org/" rel="noopener ugc nofollow" target="_blank">Go</a></code> <code class="fe lb lc ld le b"><a class="ae kc" href="https://github.com/spf13/cobra" rel="noopener ugc nofollow" target="_blank">cobra</a></code>(ä¸€ä¸ªæµè¡Œçš„CLIåº”ç”¨ç¨‹åºåº“)å’Œ<code class="fe lb lc ld le b">Redis</code>ä½œä¸ºåç«¯å­˜å‚¨æ„å»ºã€‚</p><div class="lf lg gp gr lh li"><a href="https://medium.com/@abhishek1987/yet-another-todo-app-with-redis-and-go-part-1-7a1134f5752e" rel="noopener follow" target="_blank"><div class="lj ab fo"><div class="lk ab ll cl cj lm"><h2 class="bd ir gy z fp ln fr fs lo fu fw ip bi translated">åˆä¸€ä¸ªTODOåº”ç”¨ï¼ä½¿ç”¨Rediså’ŒGo[ç¬¬1éƒ¨åˆ†]</h2><div class="lp l"><h3 class="bd b gy z fp ln fr fs lo fu fw dk translated">é€šè¿‡ä½¿ç”¨Goæ„å»ºCLIåº”ç”¨ç¨‹åºæ¥å­¦ä¹ Redis</h3></div><div class="lq l"><p class="bd b dl z fp ln fr fs lo fu fw dk translated">medium.com</p></div></div></div></a></div><p id="2de9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lb lc ld le b">Part 1</code>ä»‹ç»äº†<code class="fe lb lc ld le b">todo</code>åº”ç”¨çš„æ¦‚è¿°ã€è®¾ç½®å’Œè¯•ç”¨è¿‡ç¨‹ã€‚åœ¨è¿™ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬å°†æ·±å…¥äº†è§£ä»£ç </p><blockquote class="lr ls lt"><p id="7279" class="kd ke lu kf b kg kh ki kj kk kl km kn lv kp kq kr lw kt ku kv lx kx ky kz la ij bi translated"><em class="iq">ä»£ç ä¸º</em> <a class="ae kc" href="https://github.com/abhirockzz/redis-todo-cli-app" rel="noopener ugc nofollow" target="_blank"> <em class="iq">å¯åœ¨Github </em> </a>ä¸Šè·å¾—</p></blockquote><p id="1581" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">åœ¨æˆ‘ä»¬å¼€å§‹ä¹‹å‰ï¼Œå…ˆå›é¡¾ä¸€ä¸‹æ‚¨å¯ä»¥ç”¨<code class="fe lb lc ld le b">todo</code> CLIåšäº›ä»€ä¹ˆâ€”â€”å¥½çš„ï¼Œè€çš„<code class="fe lb lc ld le b">CRUD</code>ï¼æ¥è‡ª<code class="fe lb lc ld le b">todo --help</code>:</p><pre class="ly lz ma mb gt mc le md me aw mf bi"><span id="0bdc" class="mg mh iq le b gy mi mj l mk ml">Yet another TODO app. Uses Go and Redis</span><span id="7960" class="mg mh iq le b gy mm mj l mk ml">Usage:<br/>  todo [command]</span><span id="7480" class="mg mh iq le b gy mm mj l mk ml">Available Commands:<br/>  create      create a todo with description<br/>  delete      delete a todo<br/>  help        Help about any command<br/>  list        list all todos<br/>  update      update todo description, status or both</span><span id="a06f" class="mg mh iq le b gy mm mj l mk ml">Flags:<br/>  -h, --help      help for todo<br/>  -v, --version   version for todo</span><span id="dba1" class="mg mh iq le b gy mm mj l mk ml">Use "todo [command] --help" for more information about a command.</span></pre><p id="4908" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lb lc ld le b"><a class="ae kc" href="https://github.com/spf13/cobra" rel="noopener ugc nofollow" target="_blank">Cobra</a></code>ç”¨ä½œCLIæ¡†æ¶ã€‚è¿™æ˜¯ä¸€ä¸ªå—æ¬¢è¿çš„é¡¹ç›®ï¼Œå¹¶æ”¯æŒCLIå·¥å…·ï¼Œå¦‚<code class="fe lb lc ld le b">docker</code>ã€<code class="fe lb lc ld le b">kubectl</code>ç­‰ã€‚</p><p id="381a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ä»£ç ç»“æ„å¦‚ä¸‹æ‰€ç¤º:</p><pre class="ly lz ma mb gt mc le md me aw mf bi"><span id="4304" class="mg mh iq le b gy mi mj l mk ml">.<br/>â”œâ”€â”€ cmd<br/>â”‚   â”œâ”€â”€ create.go<br/>â”‚   â”œâ”€â”€ delete.go<br/>â”‚   â”œâ”€â”€ list.go<br/>â”‚   â”œâ”€â”€ root.go<br/>â”‚   â””â”€â”€ update.go<br/>â”œâ”€â”€ db<br/>â”‚   â””â”€â”€ todo-redis.go<br/>â”œâ”€â”€ go.mod<br/>â”œâ”€â”€ go.sum<br/>â””â”€â”€ main.go</span></pre><p id="3b37" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æ¯ä¸ª<code class="fe lb lc ld le b">todo</code>æ“ä½œ(<code class="fe lb lc ld le b">create</code>ã€<code class="fe lb lc ld le b">list</code>ç­‰)ã€‚)ç”±ä¸€ä¸ª<code class="fe lb lc ld le b">cobra</code>å‘½ä»¤æ§åˆ¶ã€‚<code class="fe lb lc ld le b">cmd</code>åŒ…åŒ…å«<code class="fe lb lc ld le b">create.go</code>ã€<code class="fe lb lc ld le b">list.go</code>ç­‰å®ç°ã€‚</p></div><div class="ab cl mn mo hu mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="ij ik il im in"><h1 id="0875" class="mu mh iq bd mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq bi translated"><code class="fe lb lc ld le b">root</code>å‘½ä»¤</h1><p id="2b99" class="pw-post-body-paragraph kd ke iq kf b kg nr ki kj kk ns km kn ko nt kq kr ks nu ku kv kw nv ky kz la ij bi translated">åœ¨<code class="fe lb lc ld le b">cobra</code>ä¸­ï¼Œæ ¹å‘½ä»¤æ˜¯æœ€é¡¶å±‚çš„çˆ¶å‘½ä»¤ã€‚å¯ä»¥å‘å…¶ä¸­æ·»åŠ å…¶ä»–å­å‘½ä»¤ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œ<code class="fe lb lc ld le b">todo</code>æ˜¯æ ¹å‘½ä»¤å’Œ<code class="fe lb lc ld le b">create</code>ã€<code class="fe lb lc ld le b">list</code>ç­‰ã€‚æ˜¯å­å‘½ä»¤(åŒæ ·ï¼Œæ¯ä¸ªå‘½ä»¤å¯ä»¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªåœ¨è°ƒç”¨æœŸé—´ä¼ é€’çš„æ ‡å¿—)</p><p id="2fb7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lb lc ld le b">todo</code>æ ¹å‘½ä»¤åœ¨<code class="fe lb lc ld le b">cmd/root.go</code>ä¸­å®šä¹‰</p><pre class="ly lz ma mb gt mc le md me aw mf bi"><span id="7ab1" class="mg mh iq le b gy mi mj l mk ml">var rootCmd = &amp;cobra.Command{Use: "todo", Short: "manage your todos", Version: "0.1.0"}</span></pre><p id="9997" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">è¯·æ³¨æ„ï¼Œå®ƒæ²¡æœ‰ä»»ä½•ç‰¹å®šçš„æ ‡å¿—â€”å®ƒåªæœ‰å­å‘½ä»¤ã€‚è®©æˆ‘ä»¬çœ‹çœ‹ä»–ä»¬</p></div><div class="ab cl mn mo hu mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="ij ik il im in"><h1 id="d00c" class="mu mh iq bd mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq bi translated">å­å‘½ä»¤â€” <code class="fe lb lc ld le b">create</code>ã€<code class="fe lb lc ld le b">list</code>ã€<code class="fe lb lc ld le b">update</code>ã€<code class="fe lb lc ld le b">delete</code></h1><p id="00c7" class="pw-post-body-paragraph kd ke iq kf b kg nr ki kj kk ns km kn ko nt kq kr ks nu ku kv kw nv ky kz la ij bi translated">å­å‘½ä»¤å®ç°é€»è¾‘éµå¾ªç›¸åŒçš„æ¨¡å¼:</p><ul class=""><li id="15a8" class="nw nx iq kf b kg kh kk kl ko ny ks nz kw oa la ob oc od oe bi translated">ä½¿ç”¨<code class="fe lb lc ld le b">init()</code>å‡½æ•°å¼•å¯¼å‘½ä»¤-è®¾ç½®å…¶æ ‡å¿—ï¼Œæ ‡è®°å¼ºåˆ¶æ ‡å¿—(å¦‚æœéœ€è¦)å¹¶å°†å…¶æ·»åŠ åˆ°æ ¹å‘½ä»¤</li><li id="f387" class="nw nx iq kf b kg of kk og ko oh ks oi kw oj la ob oc od oe bi translated">å®šä¹‰æ‰§è¡Œé€»è¾‘/åŠŸèƒ½â€”â€”åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œæ˜¯ä¸<code class="fe lb lc ld le b">Redis</code>ç›¸å…³çš„æ“ä½œ(æˆ‘ä»¬å°†å¾ˆå¿«æ·±å…¥å…¶ä¸­)</li></ul><p id="85f6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ä¸‹é¢æ˜¯<code class="fe lb lc ld le b">todo create</code>å®ç°çš„æ ·å­(åœ¨<code class="fe lb lc ld le b">cmd/create.go</code>ä¸­)</p><pre class="ly lz ma mb gt mc le md me aw mf bi"><span id="04f4" class="mg mh iq le b gy mi mj l mk ml">...<br/>var createCmd = &amp;cobra.Command{Use: "create", Short: "create a todo with description", Run: Create}</span><span id="6697" class="mg mh iq le b gy mm mj l mk ml">func init() {<br/>	createCmd.Flags().String("description", "", "create todo with description")<br/>	createCmd.MarkFlagRequired("description")<br/>	rootCmd.AddCommand(createCmd)<br/>}</span><span id="5ccb" class="mg mh iq le b gy mm mj l mk ml">// Create - todo create --description &lt;text&gt;<br/>func Create(cmd *cobra.Command, args []string) {<br/>	desc := cmd.Flag("description").Value.String()<br/>	db.CreateTodo(desc)<br/>}<br/>...</span></pre><p id="e5f1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lb lc ld le b">todo create</code>éœ€è¦<code class="fe lb lc ld le b">description</code>çš„å¼ºåˆ¶å€¼ï¼Œå¹¶ä½¿ç”¨<code class="fe lb lc ld le b">func Create(cmd *cobra.Command, args []string)</code>æ‰§è¡Œå®é™…çš„<code class="fe lb lc ld le b">todo</code>åˆ›å»ºã€‚è°ƒç”¨<code class="fe lb lc ld le b">db.CreateTodo(desc)</code>è¿›è¡ŒRedisç›¸å…³æ“ä½œï¼Œå°†<code class="fe lb lc ld le b">todo</code>ä¿¡æ¯ä¿å­˜åˆ°Redisä¸­ã€‚</p><p id="02bb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ä¸‹é¢æ˜¯<code class="fe lb lc ld le b">todo update</code>å®ç°çš„ä¸€ä¸ªç‰‡æ®µ(åœ¨<code class="fe lb lc ld le b">cmd/update.go</code>ä¸­)</p><pre class="ly lz ma mb gt mc le md me aw mf bi"><span id="4b0d" class="mg mh iq le b gy mi mj l mk ml">...<br/>var updateCmd = &amp;cobra.Command{Use: "update", Short: "update todo description, status or both", Run: Update}</span><span id="5b46" class="mg mh iq le b gy mm mj l mk ml">func init() {<br/>	updateCmd.Flags().String("id", "", "id of the todo you want to update")<br/>	updateCmd.MarkFlagRequired("id")<br/>	updateCmd.Flags().String("description", "", "new description")<br/>	updateCmd.Flags().String("status", "", "new status: completed, pending, in-progress")</span><span id="aae6" class="mg mh iq le b gy mm mj l mk ml">	rootCmd.AddCommand(updateCmd)<br/>}</span><span id="42af" class="mg mh iq le b gy mm mj l mk ml">// Update - todo update --id &lt;id&gt; --status &lt;new status&gt; --description &lt;new description&gt;<br/>func Update(cmd *cobra.Command, args []string) {<br/>	id := cmd.Flag("id").Value.String()<br/>	desc := cmd.Flag("description").Value.String()</span><span id="f715" class="mg mh iq le b gy mm mj l mk ml">	status := cmd.Flag("status").Value.String()</span><span id="2b3c" class="mg mh iq le b gy mm mj l mk ml">	if desc == "" &amp;&amp; status == "" {<br/>		log.Fatalf("either description or status is required")<br/>	}</span><span id="11b7" class="mg mh iq le b gy mm mj l mk ml">	if status == "completed" || status == "pending" || status == "in-progress" || status == "" {<br/>		db.UpdateTodo(id, desc, status)<br/>	} else {<br/>		log.Fatalf("provide valid status - completed, pending or in-progress")<br/>	}<br/>}</span></pre><p id="cc85" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lb lc ld le b">todo update</code>éœ€è¦ä¸€ä¸ªå¼ºåˆ¶<code class="fe lb lc ld le b">--id</code>æ ‡å¿—ï¼Œå¹¶ä¸”éœ€è¦æä¾›<code class="fe lb lc ld le b">status</code>æˆ–<code class="fe lb lc ld le b">description</code>(å¯ä»¥æ˜¯ä¸¤è€…)ã€‚å®ƒè¿›ä¸€æ­¥è°ƒç”¨<code class="fe lb lc ld le b">db.UpdateTodo</code>è¿›è¡ŒRedisç›¸å…³æ“ä½œï¼Œä»¥æ›´æ–°é€šè¿‡CLIä¼ å…¥çš„<code class="fe lb lc ld le b">todo</code>ä¿¡æ¯</p></div><div class="ab cl mn mo hu mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="ij ik il im in"><h1 id="16e9" class="mu mh iq bd mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq bi translated">é›·è¿ªæ–¯</h1><p id="b189" class="pw-post-body-paragraph kd ke iq kf b kg nr ki kj kk ns km kn ko nt kq kr ks nu ku kv kw nv ky kz la ij bi translated">ç°åœ¨ï¼Œè®©æˆ‘ä»¬æ¥æ¢ç´¢åº”ç”¨ç¨‹åºçš„æ ¸å¿ƒâ€”â€”Redisç›¸å…³çš„é€»è¾‘æ¥ç®¡ç†<code class="fe lb lc ld le b">todo</code>ä¿¡æ¯ã€‚Redisæ“ä½œå·²é›†ä¸­åœ¨ä¸€ä¸ªåœ°æ–¹ï¼Œå³<code class="fe lb lc ld le b">db</code>åŒ…ä¸­çš„<code class="fe lb lc ld le b">todo-redis.go</code>ã€‚å®ƒæœ‰å››ä¸ªåŠŸèƒ½ï¼Œæ¯ä¸ªåŠŸèƒ½æ˜ å°„åˆ°å„è‡ªçš„<code class="fe lb lc ld le b">todo</code>å­å‘½ä»¤:</p><ul class=""><li id="8743" class="nw nx iq kf b kg kh kk kl ko ny ks nz kw oa la ob oc od oe bi translated"><code class="fe lb lc ld le b">CreateTodo</code></li><li id="e732" class="nw nx iq kf b kg of kk og ko oh ks oi kw oj la ob oc od oe bi translated"><code class="fe lb lc ld le b">ListTodos</code></li><li id="e723" class="nw nx iq kf b kg of kk og ko oh ks oi kw oj la ob oc od oe bi translated"><code class="fe lb lc ld le b">UpdateTodo</code></li><li id="0b3b" class="nw nx iq kf b kg of kk og ko oh ks oi kw oj la ob oc od oe bi translated"><code class="fe lb lc ld le b">DeleteTodo</code></li></ul><p id="62b1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æˆ‘ç”¨è¿‡<code class="fe lb lc ld le b"><a class="ae kc" href="https://github.com/go-redis/redis" rel="noopener ugc nofollow" target="_blank">go-redis</a></code></p><blockquote class="lr ls lt"><p id="3e40" class="kd ke lu kf b kg kh ki kj kk kl km kn lv kp kq kr lw kt ku kv lx kx ky kz la ij bi translated"><code class="fe lb lc ld le b"><a class="ae kc" href="https://github.com/gomodule/redigo" rel="noopener ugc nofollow" target="_blank"><em class="iq">redigo</em></a></code> <em class="iq">æ˜¯å¦ä¸€ä¸ªæµè¡Œçš„å®¢æˆ·ç«¯</em></p></blockquote><p id="a4f0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æ‰€æœ‰çš„å‘½ä»¤éƒ½æ˜¯ä»è¿æ¥åˆ°<code class="fe lb lc ld le b">Redis</code>å¼€å§‹çš„(å¾ˆæ˜æ˜¾ï¼)</p><pre class="ly lz ma mb gt mc le md me aw mf bi"><span id="968a" class="mg mh iq le b gy mi mj l mk ml">c := redis.NewClient(&amp;redis.Options{Addr: redisHost})<br/>	err := c.Ping().Err()<br/>	if err != nil {<br/>		log.Fatal("redis connect failed", err)<br/>	}<br/>defer c.Close()</span></pre><p id="73d5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">è¿™æ˜¯ä¸€ä¸ªå•ç”¨æˆ·<code class="fe lb lc ld le b">cli</code>åº”ç”¨ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªé•¿æœŸè¿è¡Œçš„æœåŠ¡å™¨ç»„ä»¶ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å•ç‹¬æ“ä½œåè¿æ¥å’Œæ–­å¼€ï¼Œè€Œä¸æ˜¯åœ¨å…¨çƒå±‚é¢å¤„ç†Rediså®¢æˆ·ç«¯<code class="fe lb lc ld le b">redis.Client</code>ã€‚ç°åœ¨æˆ‘ä»¬æ¥çœ‹çœ‹æ¯ä¸ªæ“ä½œçš„ç›¸å…³ç‰‡æ®µ</p><p id="d18f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">åˆ›å»ºå¾…åŠäº‹é¡¹</strong></p><p id="54cb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ä¸ºäº†åœ¨Redisä¸­åˆ›å»ºä¸€ä¸ª<code class="fe lb lc ld le b">todo</code>ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªè®¡æ•°å™¨ä½œä¸ºtodo <code class="fe lb lc ld le b">id</code>ã€‚Rediså…è®¸æ‚¨ä½¿ç”¨<code class="fe lb lc ld le b">INCR</code>(å’Œç›¸å…³å‘½ä»¤)å°†<code class="fe lb lc ld le b">String</code>ç”¨ä½œåŸå­è®¡æ•°å™¨</p><pre class="ly lz ma mb gt mc le md me aw mf bi"><span id="1b09" class="mg mh iq le b gy mi mj l mk ml">id, err := c.Incr(todoIDCounter).Result()</span></pre><blockquote class="lr ls lt"><p id="86ce" class="kd ke lu kf b kg kh ki kj kk kl km kn lv kp kq kr lw kt ku kv lx kx ky kz la ij bi translated"><em class="iq">æ£€æŸ¥</em> <code class="fe lb lc ld le b"><em class="iq">INCR</em></code> <em class="iq">å‘½ä»¤ä¸ºå‚è€ƒ</em><a class="ae kc" href="https://redis.io/commands/incr" rel="noopener ugc nofollow" target="_blank"><em class="iq">https://redis.io/commands/incr</em></a></p></blockquote><p id="5bdc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Redis <code class="fe lb lc ld le b">SET</code>ä¸­çš„è¿™ä¸ªé€’å¢ID(å‰ç½®<code class="fe lb lc ld le b">todo:</code>)ã€‚Redis <code class="fe lb lc ld le b">Set</code>æ˜¯<code class="fe lb lc ld le b">Strings</code>çš„æ— åºé›†åˆï¼Œä¸å…è®¸é‡å¤ã€‚è¿™ä¸ª<code class="fe lb lc ld le b">id</code>æ„æˆäº†<code class="fe lb lc ld le b">HASH</code>(ä¸‹ä¸€æ­¥)çš„åç§°ï¼Œæˆ‘ä»¬å°†åœ¨å…¶ä¸­å­˜å‚¨<code class="fe lb lc ld le b">todo</code>ç»†èŠ‚ï¼Œä¾‹å¦‚ï¼Œå¯¹äºidä¸º42çš„<code class="fe lb lc ld le b">todo</code>ï¼Œç»†èŠ‚å°†å­˜å‚¨åœ¨åä¸º<code class="fe lb lc ld le b">todo:42</code>çš„<code class="fe lb lc ld le b">HASH</code>ä¸­ã€‚è¿™ä½¿å¾—<code class="fe lb lc ld le b">list</code>ã€<code class="fe lb lc ld le b">update</code>å’Œ<code class="fe lb lc ld le b">delete</code>å¾…åŠäº‹é¡¹å˜å¾—å¾ˆå®¹æ˜“</p><pre class="ly lz ma mb gt mc le md me aw mf bi"><span id="0ef1" class="mg mh iq le b gy mi mj l mk ml">err = c.SAdd(todoIDsSet, todoid).Err()</span></pre><blockquote class="lr ls lt"><p id="cf40" class="kd ke lu kf b kg kh ki kj kk kl km kn lv kp kq kr lw kt ku kv lx kx ky kz la ij bi translated"><em class="iq">æŸ¥çœ‹</em> <code class="fe lb lc ld le b"><em class="iq">SADD</em></code> <em class="iq">äº†è§£è¯¦æƒ…</em><a class="ae kc" href="https://redis.io/commands/sadd" rel="noopener ugc nofollow" target="_blank"><em class="iq">https://redis.io/commands/sadd</em></a></p></blockquote><p id="bb00" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æœ€åï¼Œå°†<code class="fe lb lc ld le b">todo</code>ä¿¡æ¯(<code class="fe lb lc ld le b">id</code>ã€<code class="fe lb lc ld le b">description</code>ã€<code class="fe lb lc ld le b">status</code>)å­˜å‚¨åœ¨<code class="fe lb lc ld le b">HASH</code>ä¸­ã€‚Redisæ˜¯å­—ç¬¦ä¸²å­—æ®µå’Œå­—ç¬¦ä¸²å€¼ä¹‹é—´çš„æ˜ å°„ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¿™ä½¿å¾—å®ƒä»¬é€‚åˆå­˜å‚¨å¯¹è±¡è¡¨ç¤ºï¼Œå¦‚<code class="fe lb lc ld le b">todo</code> info</p><pre class="ly lz ma mb gt mc le md me aw mf bi"><span id="964a" class="mg mh iq le b gy mi mj l mk ml">todo := map[string]interface{}{"desc": desc, "status": statusPending}<br/>err = c.HMSet(todoid, todo).Err()</span></pre><blockquote class="lr ls lt"><p id="a4c6" class="kd ke lu kf b kg kh ki kj kk kl km kn lv kp kq kr lw kt ku kv lx kx ky kz la ij bi translated"><em class="iq">æ£€æŸ¥</em> <code class="fe lb lc ld le b"><em class="iq">HMSET</em></code> <em class="iq">å‚è€ƒ</em><a class="ae kc" href="https://redis.io/commands/hmset" rel="noopener ugc nofollow" target="_blank"><em class="iq">https://redis.io/commands/hmset</em></a></p></blockquote><p id="44cd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">åˆ—è¡¨å¾…åŠäº‹é¡¹</strong></p><p id="c1a7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">è¦è·å–todosï¼Œæˆ‘ä»¬åªéœ€è·å–é›†åˆä¸­çš„æ‰€æœ‰æˆå‘˜ï¼Œå³<code class="fe lb lc ld le b">todo:1</code>ã€<code class="fe lb lc ld le b">todo:2</code>ç­‰ã€‚</p><pre class="ly lz ma mb gt mc le md me aw mf bi"><span id="e429" class="mg mh iq le b gy mi mj l mk ml">todoHashNames, err := c.SMembers(todoIDsSet).Result()</span></pre><blockquote class="lr ls lt"><p id="d12a" class="kd ke lu kf b kg kh ki kj kk kl km kn lv kp kq kr lw kt ku kv lx kx ky kz la ij bi translated"><em class="iq">æŸ¥</em> <code class="fe lb lc ld le b"><em class="iq">SMEMBERS</em></code> <em class="iq">ä½œå‚è€ƒ</em><a class="ae kc" href="https://redis.io/commands/smembers" rel="noopener ugc nofollow" target="_blank"><em class="iq">https://redis.io/commands/smembers</em></a></p></blockquote><p id="3499" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æˆ‘ä»¬å¾ªç¯éå†è¿™äº›ï¼Œæœç´¢æ¯ä¸ª<code class="fe lb lc ld le b">HASH</code>ï¼Œæå–ä¿¡æ¯(<code class="fe lb lc ld le b">id</code>ã€<code class="fe lb lc ld le b">description</code>ã€<code class="fe lb lc ld le b">status</code>)ï¼Œåˆ›å»ºä¸€ä¸ª<code class="fe lb lc ld le b">db.Todo</code>ç‰‡æ®µï¼Œæœ€ç»ˆä»¥è¡¨æ ¼å½¢å¼æ˜¾ç¤ºåœ¨CLIåº”ç”¨ç¨‹åºä¸­</p><pre class="ly lz ma mb gt mc le md me aw mf bi"><span id="447c" class="mg mh iq le b gy mi mj l mk ml">for _, todoHashName := range todoHashNames {<br/>	id := strings.Split(todoHashName, ":")[1]<br/>	todoMap, err := c.HGetAll(todoHashName).Result()<br/>    ....<br/>    todo = Todo{id, todoMap["desc"], todoMap["status"]}<br/>    ....<br/>    todos = append(todos, todo)<br/>....</span></pre><blockquote class="lr ls lt"><p id="0606" class="kd ke lu kf b kg kh ki kj kk kl km kn lv kp kq kr lw kt ku kv lx kx ky kz la ij bi translated"><em class="iq">æ£€æŸ¥</em> <code class="fe lb lc ld le b"><em class="iq">HGETALL</em></code> <em class="iq">å‚è€ƒ</em><a class="ae kc" href="https://redis.io/commands/hgetall" rel="noopener ugc nofollow" target="_blank"><em class="iq">https://redis.io/commands/hgetall</em></a></p></blockquote><p id="700f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">åˆ é™¤å¾…åŠäº‹é¡¹</strong></p><p id="6bf8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">è¦åˆ é™¤å¾…åŠäº‹é¡¹ï¼ŒåŒ…å«ä¿¡æ¯çš„<code class="fe lb lc ld le b">HASH</code>å°†è¢«åˆ é™¤</p><pre class="ly lz ma mb gt mc le md me aw mf bi"><span id="2c48" class="mg mh iq le b gy mi mj l mk ml">c.Del("todo:" + id).Result()</span></pre><blockquote class="lr ls lt"><p id="34c8" class="kd ke lu kf b kg kh ki kj kk kl km kn lv kp kq kr lw kt ku kv lx kx ky kz la ij bi translated"><em class="iq">æ£€æŸ¥ã€https://redis.io/commands/delã€‘</em>ä¸­çš„ <a class="ae kc" href="https://redis.io/commands/del" rel="noopener ugc nofollow" target="_blank"> <em class="iq">ä¸­çš„<code class="fe lb lc ld le b"><em class="iq">DEL</em></code> <em class="iq"/></em></a></p></blockquote><p id="ca4d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">éšåä»<code class="fe lb lc ld le b">SET</code>ä¸­ç§»é™¤<code class="fe lb lc ld le b">todo</code> idæ¡ç›®</p><pre class="ly lz ma mb gt mc le md me aw mf bi"><span id="7a78" class="mg mh iq le b gy mi mj l mk ml">err = c.SRem(todoIDsSet, "todo:"+id).Err()</span></pre><blockquote class="lr ls lt"><p id="5f4a" class="kd ke lu kf b kg kh ki kj kk kl km kn lv kp kq kr lw kt ku kv lx kx ky kz la ij bi translated"><em class="iq">æ£€æŸ¥</em> <code class="fe lb lc ld le b"><em class="iq">SREM</em></code> <em class="iq">å‚è€ƒ</em><a class="ae kc" href="https://redis.io/commands/srem" rel="noopener ugc nofollow" target="_blank"><em class="iq">https://redis.io/commands/srem</em></a></p></blockquote><p id="7485" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">æ›´æ–°å¾…åŠäº‹é¡¹</strong></p><p id="2989" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ä¸ºäº†é€šè¿‡idæ›´æ–°ä¸€ä¸ª<code class="fe lb lc ld le b">todo</code>ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦ç¡®è®¤å®ƒæ˜¯å¦æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„<code class="fe lb lc ld le b">id</code>ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯æ£€æŸ¥<code class="fe lb lc ld le b">SET</code>æ˜¯å¦åŒ…å«é‚£ä¸ª<code class="fe lb lc ld le b">todo</code></p><pre class="ly lz ma mb gt mc le md me aw mf bi"><span id="e26d" class="mg mh iq le b gy mi mj l mk ml">exists, err := c.SIsMember(todoIDsSet, "todo:"+id).Result()</span></pre><p id="9811" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">å¦‚æœæ˜¯çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­æ›´æ–°å®ƒçš„ä¿¡æ¯ã€‚æˆ‘ä»¬ç”¨ç”¨æˆ·ä¼ å…¥çš„æ–°çš„<code class="fe lb lc ld le b">status</code>ã€<code class="fe lb lc ld le b">description</code>(æˆ–ä¸¤è€…)åˆ›å»ºä¸€ä¸ª<code class="fe lb lc ld le b">map</code>ï¼Œå¹¶è°ƒç”¨<code class="fe lb lc ld le b">HMSet</code>å‡½æ•°</p><pre class="ly lz ma mb gt mc le md me aw mf bi"><span id="eb19" class="mg mh iq le b gy mi mj l mk ml">....<br/>	updatedTodo := map[string]interface{}{}<br/>	if status != "" {<br/>		updatedTodo["status"] = status<br/>	}</span><span id="eb76" class="mg mh iq le b gy mm mj l mk ml">	if desc != "" {<br/>		updatedTodo["desc"] = desc<br/>	}<br/>    c.HMSet("todo:"+id, updatedTodo).Err()<br/>    ....</span></pre><blockquote class="lr ls lt"><p id="c7c1" class="kd ke lu kf b kg kh ki kj kk kl km kn lv kp kq kr lw kt ku kv lx kx ky kz la ij bi translated"><em class="iq">æŸ¥çœ‹</em> <code class="fe lb lc ld le b"><em class="iq">HMSET</em></code> <em class="iq">å‚è€ƒ</em><a class="ae kc" href="https://redis.io/commands/hmset" rel="noopener ugc nofollow" target="_blank"><em class="iq">https://redis.io/commands/hmset</em></a></p></blockquote><p id="4beb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">è¿™ä¸ªç”±ä¸¤éƒ¨åˆ†ç»„æˆçš„åšå®¢ç³»åˆ—åˆ°æ­¤ç»“æŸã€‚ä¸€å¦‚æ—¢å¾€ï¼Œæ•¬è¯·æœŸå¾…æ›´å¤šï¼å¦‚æœè§‰å¾—è¿™æœ‰ç”¨ï¼Œåˆ«å¿˜äº†å–œæ¬¢å’Œåˆ†äº«ğŸ˜ƒå¾ˆé«˜å…´é€šè¿‡<a class="ae kc" href="https://twitter.com/abhi_tweeter" rel="noopener ugc nofollow" target="_blank"> Twitter </a>è·å¾—æ‚¨çš„åé¦ˆï¼Œæˆ–è€…å‘è¡¨è¯„è®ºğŸ™ğŸ»</p></div></div>    
</body>
</html>