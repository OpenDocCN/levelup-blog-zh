<html>
<head>
<title>Types of React Components</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React组件的类型</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/types-of-react-components-a38ce18e35ab?source=collection_archive---------0-----------------------#2019-12-01">https://levelup.gitconnected.com/types-of-react-components-a38ce18e35ab?source=collection_archive---------0-----------------------#2019-12-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="14bc" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">功能组件、类别组件、纯组件和高阶组件</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/b68c09fff58346768642cfb0641deabf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ot_nOtanT5a0GvRR.png"/></div></div></figure><h2 id="d35d" class="kr ks iq bd kt ku kv dn kw kx ky dp kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">什么是React组件？</h2><p id="6138" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv la lw lx ly le lz ma mb li mc md me mf ij bi translated">React组件是独立且可重用的代码。它们是任何React应用程序的构建块。组件的作用与JavaScript函数相同，但它们独立工作，将JSX代码作为元素返回给我们的UI。组件通常有两种类型，功能组件和类组件，但今天我们也将讨论纯组件和高阶组件。</p><h2 id="e3a3" class="kr ks iq bd kt ku kv dn kw kx ky dp kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">讨论的React组件类型</h2><ul class=""><li id="1d02" class="mg mh iq lp b lq lr lt lu la mi le mj li mk mf ml mm mn mo bi translated">功能组件</li><li id="e270" class="mg mh iq lp b lq mp lt mq la mr le ms li mt mf ml mm mn mo bi translated">类别组件</li><li id="287a" class="mg mh iq lp b lq mp lt mq la mr le ms li mt mf ml mm mn mo bi translated">纯成分</li><li id="373b" class="mg mh iq lp b lq mp lt mq la mr le ms li mt mf ml mm mn mo bi translated">高阶组件</li></ul><h2 id="afbb" class="kr ks iq bd kt ku kv dn kw kx ky dp kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">功能组件</h2><p id="689f" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv la lw lx ly le lz ma mb li mc md me mf ij bi translated">功能组件是接受道具并返回JSX的功能。它们本身没有状态或生命周期方法，但是可以通过实现React钩子来添加这种功能。功能组件通常用于显示信息。它们易于阅读、调试和测试。</p><pre class="kg kh ki kj gt mu mv mw mx aw my bi"><span id="1b9b" class="kr ks iq mv b gy mz na l nb nc">// Functional Component Example</span><span id="c93d" class="kr ks iq mv b gy nd na l nb nc">import React from 'react';</span><span id="c0b2" class="kr ks iq mv b gy nd na l nb nc">const HelloWorld = () =&gt; {<br/>   return (<br/>      &lt;div&gt;<br/>         &lt;p&gt;Hello World!&lt;/p&gt;<br/>      &lt;/div&gt;<br/>   )<br/>}</span><span id="6f1e" class="kr ks iq mv b gy nd na l nb nc">export default HelloWorld;</span></pre><p id="c55f" class="pw-post-body-paragraph ln lo iq lp b lq ne jr ls lt nf ju lv la ng lx ly le nh ma mb li ni md me mf ij bi translated">在上面的代码中，它是一个非常简单的组件，由一个常量变量<code class="fe nj nk nl mv b">HelloWorld</code>组成，该变量被分配给一个返回JSX的箭头函数。功能组件不必是箭头功能。它们可以用常规的JavaScript函数来声明。您还可以将<code class="fe nj nk nl mv b">props</code>传递给函数，并使用它们在JSX代码中呈现数据。</p><h2 id="c75f" class="kr ks iq bd kt ku kv dn kw kx ky dp kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">类别组件</h2><p id="8316" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv la lw lx ly le lz ma mb li mc md me mf ij bi translated">在这四种组件类型中，类组件以前是最常用的。这是因为类组件能够做功能组件所做的一切，甚至更多。可以利用React、<strong class="lp ir"> <em class="nm">状态</em> </strong>、<strong class="lp ir"> <em class="nm">道具</em> </strong>、<strong class="lp ir"> <em class="nm">生命周期方法</em> </strong>的主要功能。与功能组件不同，类组件由…嗯，一个类组成。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nn"><img src="../Images/6c4b3ad5c496919a3ad4ae63c58f098a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*rkcm9Khq16ILg_dg"/></div></div></figure><pre class="kg kh ki kj gt mu mv mw mx aw my bi"><span id="93cc" class="kr ks iq mv b gy mz na l nb nc">// Class Component Example</span><span id="c1d1" class="kr ks iq mv b gy nd na l nb nc">import React from 'react';</span><span id="9ba6" class="kr ks iq mv b gy nd na l nb nc">class HelloWorld extends React.Component {<br/>   render() {<br/>      return (<br/>         &lt;div&gt;<br/>            &lt;p&gt;Hello World!&lt;/p&gt;<br/>         &lt;/div&gt;<br/>      )<br/>   }<br/>}</span><span id="31d8" class="kr ks iq mv b gy nd na l nb nc">export default HelloWorld;</span></pre><p id="655e" class="pw-post-body-paragraph ln lo iq lp b lq ne jr ls lt nf ju lv la ng lx ly le nh ma mb li ni md me mf ij bi translated">类组件语法不同于功能组件语法。类组件在声明类<code class="fe nj nk nl mv b">HelloWorld</code>后使用<code class="fe nj nk nl mv b">extends React.Component</code>，并需要一个<code class="fe nj nk nl mv b">render()</code>方法返回JSX代码。在这个类组件中，可以声明一个<code class="fe nj nk nl mv b">state</code>，将其设置为一个JavaScript对象，使用<code class="fe nj nk nl mv b">props</code>作为初始状态或者在<strong class="lp ir"> <em class="nm">生命周期方法</em> </strong>中改变状态。一些生命周期方法有<code class="fe nj nk nl mv b">componentDidMount()</code>、<code class="fe nj nk nl mv b">componentDidUpdate()</code>和<code class="fe nj nk nl mv b">componentWillUnmount()</code>。除非使用React挂钩，否则功能组件无法执行这些操作。</p><h2 id="1255" class="kr ks iq bd kt ku kv dn kw kx ky dp kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">纯成分</h2><p id="bf97" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv la lw lx ly le lz ma mb li mc md me mf ij bi translated">纯组件就像更好的功能组件。只返回一个渲染函数的组件最适合纯组件发光。然而，你需要理解一个纯组件是做什么的。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi no"><img src="../Images/01ce2510369461a885369380befd37a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/0*34BNbO5V62NFzBmd.gif"/></div></figure><p id="5095" class="pw-post-body-paragraph ln lo iq lp b lq ne jr ls lt nf ju lv la ng lx ly le nh ma mb li ni md me mf ij bi translated">纯组件主要用于提供优化。它们是我们能编写的最简单和最快的组件。它们不依赖或修改其范围之外的变量的状态。因此，为什么纯组件可以取代简单的功能组件。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi np"><img src="../Images/f4f82981ae027b7af8b51a7ad9c08c2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/0*q3_tbO9UlBKWzlY6.gif"/></div></figure><p id="e405" class="pw-post-body-paragraph ln lo iq lp b lq ne jr ls lt nf ju lv la ng lx ly le nh ma mb li ni md me mf ij bi translated">但是，常规的<code class="fe nj nk nl mv b">React.Component</code>和<code class="fe nj nk nl mv b">React.PureComponent</code>之间的一个主要区别是，纯组件对状态变化执行<strong class="lp ir"> <em class="nm">浅层比较</em> </strong>。纯组件自己照顾<code class="fe nj nk nl mv b">shouldComponentUpdate()</code>。如果前一个<code class="fe nj nk nl mv b">state</code>和/或<code class="fe nj nk nl mv b">props</code>与下一个相同，组件不会被重新渲染。</p><p id="6a4c" class="pw-post-body-paragraph ln lo iq lp b lq ne jr ls lt nf ju lv la ng lx ly le nh ma mb li ni md me mf ij bi translated">React组件通常在以下情况下重新呈现:</p><ul class=""><li id="f2c4" class="mg mh iq lp b lq ne lt nf la nq le nr li ns mf ml mm mn mo bi translated"><code class="fe nj nk nl mv b">setState()</code>被称为</li><li id="6931" class="mg mh iq lp b lq mp lt mq la mr le ms li mt mf ml mm mn mo bi translated"><code class="fe nj nk nl mv b">props</code>值被更新</li><li id="23fe" class="mg mh iq lp b lq mp lt mq la mr le ms li mt mf ml mm mn mo bi translated"><code class="fe nj nk nl mv b">forceUpdate()</code>叫做</li></ul><p id="8ab0" class="pw-post-body-paragraph ln lo iq lp b lq ne jr ls lt nf ju lv la ng lx ly le nh ma mb li ni md me mf ij bi translated">但在纯组件中，React组件不会在不考虑更新的<code class="fe nj nk nl mv b">state</code>和<code class="fe nj nk nl mv b">props</code>的情况下盲目重新渲染。因此，如果<code class="fe nj nk nl mv b">state</code>和<code class="fe nj nk nl mv b">props</code>与之前的<code class="fe nj nk nl mv b">state</code>和<code class="fe nj nk nl mv b">props</code>相同，那么组件不会重新渲染。当您不想在<code class="fe nj nk nl mv b">props</code>和<code class="fe nj nk nl mv b">state</code>保持不变的情况下重新渲染某个组件时，这非常有用。</p><p id="d119" class="pw-post-body-paragraph ln lo iq lp b lq ne jr ls lt nf ju lv la ng lx ly le nh ma mb li ni md me mf ij bi translated">例如，您不希望一个组件(比如说音乐播放器)因为另一个组件更新而重新呈现，可能是在您创建播放列表时。您可能希望音乐播放器一直播放一首歌曲，而不是在您更改不同组件的状态或道具时重播。纯组件在这种情况下非常有用。</p><h2 id="34c8" class="kr ks iq bd kt ku kv dn kw kx ky dp kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">高阶组件</h2><p id="60a1" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv la lw lx ly le lz ma mb li mc md me mf ij bi translated">高阶组件(HOC)是React中重用组件逻辑的高级技术。它不是API中的React组件。这是一种从React的组合性质中出现的模式。基本上，hoc是返回组件的函数。它们用于与其他组件共享逻辑。</p><pre class="kg kh ki kj gt mu mv mw mx aw my bi"><span id="d2e0" class="kr ks iq mv b gy mz na l nb nc">// HOC Example</span><span id="2eda" class="kr ks iq mv b gy nd na l nb nc">import React from 'react';<br/>import MyComponent from './components/MyComponent';</span><span id="e41d" class="kr ks iq mv b gy nd na l nb nc">class HelloWorld extends React.Component {<br/>   render() {<br/>      return(<br/>         &lt;div&gt;<br/>            {this.props.myArray.map((element) =&gt; (<br/>               &lt;MyComponent data={element} key={element.key} /&gt;<br/>            ))}<br/>         &lt;/div&gt;<br/>      )<br/>   }<br/>}</span><span id="4c2d" class="kr ks iq mv b gy nd na l nb nc">export default HelloWorld;</span></pre><p id="586b" class="pw-post-body-paragraph ln lo iq lp b lq ne jr ls lt nf ju lv la ng lx ly le nh ma mb li ni md me mf ij bi translated">在上面的代码中，我有一个简单的组件，它简要描述了一个HOC。<code class="fe nj nk nl mv b">this.props.myArray.map((element) =&gt; (&lt;MyComponent /&gt;))</code>是关键的代码片段。这是一个根据数组中元素的数量返回一个或多个分量的函数，也称为HOC。这个函数获取一个数组，通常是用<strong class="lp ir"> <em class="nm"> fetch </em> </strong>从后端或者从父组件传递的props中获取的状态，<strong class="lp ir"> <em class="nm">映射</em> </strong>数组中的每个元素，将数组中的每个元素转换成React组件。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/267dd055a89cd6723b39817443519280.png" data-original-src="https://miro.medium.com/v2/resize:fit:440/0*4rPeDTKHi0-zZ7KH.gif"/></div></figure><p id="4ed0" class="pw-post-body-paragraph ln lo iq lp b lq ne jr ls lt nf ju lv la ng lx ly le nh ma mb li ni md me mf ij bi translated">高阶组件简单缩减:</p><ol class=""><li id="1045" class="mg mh iq lp b lq ne lt nf la nq le nr li ns mf nu mm mn mo bi translated">从state或props获取数据(应为数组)。</li><li id="4ad7" class="mg mh iq lp b lq mp lt mq la mr le ms li mt mf nu mm mn mo bi translated">映射数组并为每个元素返回一个React组件。</li></ol><p id="b628" class="pw-post-body-paragraph ln lo iq lp b lq ne jr ls lt nf ju lv la ng lx ly le nh ma mb li ni md me mf ij bi translated">hoc的一些例子是注释。当用户创建评论时，评论会被保存到后端。然后使用React，用<strong class="lp ir"> <em class="nm"> fetch </em> </strong>检索注释，并将数据作为数组放入组件的状态中。然后在呈现这些注释的组件上，映射注释数组并将每个注释转换成注释组件。</p><p id="7e8f" class="pw-post-body-paragraph ln lo iq lp b lq ne jr ls lt nf ju lv la ng lx ly le nh ma mb li ni md me mf ij bi translated">hoc非常有用，可以在几乎所有想要根据给定数据动态呈现多个组件的React应用程序中找到用途。</p><h2 id="b886" class="kr ks iq bd kt ku kv dn kw kx ky dp kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">结论</h2><p id="22e6" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv la lw lx ly le lz ma mb li mc md me mf ij bi translated">对所讨论的组件的简短总结:</p><ul class=""><li id="f213" class="mg mh iq lp b lq ne lt nf la nq le nr li ns mf ml mm mn mo bi translated"><strong class="lp ir">函数组件</strong> —返回JSX的函数。可以用React钩子做更多的事情。</li><li id="0e7c" class="mg mh iq lp b lq mp lt mq la mr le ms li mt mf ml mm mn mo bi translated"><strong class="lp ir">类组件</strong> —可以操纵状态、属性和生命周期方法的类。</li><li id="5e8e" class="mg mh iq lp b lq mp lt mq la mr le ms li mt mf ml mm mn mo bi translated"><strong class="lp ir">纯组件</strong> —自动执行<code class="fe nj nk nl mv b">shouldComponentUpdate()</code>的功能组件。仅当状态或道具不同于先前的状态或道具时才重新渲染。</li><li id="dbf4" class="mg mh iq lp b lq mp lt mq la mr le ms li mt mf ml mm mn mo bi translated"><strong class="lp ir">高阶分量</strong> —根据数组数据返回一个或多个分量的函数。</li></ul></div></div>    
</body>
</html>