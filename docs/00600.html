<html>
<head>
<title>Learn React Hooks By Building An Auth Based To Do App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">é€šè¿‡æ„å»ºä¸€ä¸ªåŸºäºæˆæƒçš„å¾…åŠäº‹é¡¹åº”ç”¨ç¨‹åºæ¥å­¦ä¹ React Hooks</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://levelup.gitconnected.com/learn-react-hooks-by-building-an-auth-based-to-do-app-c2d143928b0b?source=collection_archive---------0-----------------------#2019-05-28">https://levelup.gitconnected.com/learn-react-hooks-by-building-an-auth-based-to-do-app-c2d143928b0b?source=collection_archive---------0-----------------------#2019-05-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/79d6088f94bc2711978ad279d65886cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mxA59nnMwtSmJxb-CZPwDA.png"/></div></div></figure><p id="a2a9" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">å­¦ä¹ <a class="ae kz" href="https://reactjs.org/docs/hooks-reference.html" rel="noopener ugc nofollow" target="_blank"> Reacté’©å­</a>å¯èƒ½æœ‰ç‚¹å“äººï¼Œå› ä¸ºè¿™æ˜¯ä¸€ç§ä¸åŒçš„ç»„ä»¶å·¥ä½œæ–¹å¼ã€‚ä»¥å‰ä¸“å±äºåŸºäºç±»çš„ç»„ä»¶çš„åŠŸèƒ½ç°åœ¨å¯ä»¥ä¸åŠŸèƒ½ç»„ä»¶ä¸€èµ·ä½¿ç”¨ã€‚é€šè¿‡é’©å­ï¼ŒåŠŸèƒ½ç»„ä»¶å¯ä»¥ç”¨æ¥ç®¡ç†çŠ¶æ€ï¼Œåˆ©ç”¨ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ï¼Œä»¥åŠè¿æ¥åˆ°Reactåº”ç”¨ç¨‹åºçš„<a class="ae kz" href="https://reactjs.org/docs/context.html" rel="noopener ugc nofollow" target="_blank">ä¸Šä¸‹æ–‡</a>ã€‚</p><p id="3957" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">å› æ­¤ï¼Œæˆ‘ä»¬çš„åŠŸèƒ½ç»„ä»¶å°†æ¯”æˆ‘ä»¬å¯èƒ½ä¹ æƒ¯çš„è¦å¤æ‚ä¸€äº›ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¹¶ä¸æ˜¯ä½ å†™çš„æ¯ä¸ªå‡½æ•°ç»„ä»¶éƒ½å¿…é¡»ä½¿ç”¨é’©å­ã€‚æˆ‘è®¤ä¸ºæœ‰è¿™æ ·ä¸€ç§æ¨¡å¼è¿˜æ˜¯ä¸é”™çš„ï¼Œå³æˆ‘ä»¬æœ‰åŒ…å«ä¸šåŠ¡é€»è¾‘çš„å®¹å™¨ç»„ä»¶å’Œè´Ÿè´£UIè¡¨ç¤ºçš„è¡¨ç¤ºç»„ä»¶ã€‚</p><p id="afcb" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">æˆ‘åº”è¯¥ä»ä¸€å¼€å§‹å°±è¿™ä¹ˆè¯´ï¼Œæœ‰å¾ˆå¤šå…³äºç†è§£Reacté’©å­çš„æ–‡ç« å’Œæ•™ç¨‹ï¼Œæˆ‘é‡åˆ°çš„å¤§å¤šæ•°éƒ½éå¸¸å¥½ã€‚è¿™ç¯‡æ–‡ç« çš„ç›®çš„æ˜¯ä¸ºå¼€å‘è€…æä¾›ä¸€ä¸ªæ›¿ä»£ç°æœ‰æŒ‡å—çš„é€‰æ‹©ã€‚æˆ‘ä¸ä¼šè¯´è¿™ç§æ–¹æ³•æ›´å¥½ï¼Œä½†å¦‚æœä½ åƒæˆ‘ä¸€æ ·ï¼Œå–œæ¬¢é’»ç ”æ„å»ºä¸€ä¸ªå°åº”ç”¨ç¨‹åºæ¥æ¼”ç¤ºå’Œè§£é‡Šä½ æ­£åœ¨å­¦ä¹ çš„ä¸œè¥¿ï¼Œé‚£ä¹ˆè¿™ç§æ–¹æ³•é€‚åˆä½ ğŸ˜‰ã€‚</p><p id="420f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œè¯·åœ¨è¿™é‡Œç»™æˆ‘ä¹°æ¯å’–å•¡<a class="ae kz" href="https://www.buymeacoffee.com/lukemwila" rel="noopener ugc nofollow" target="_blank">â˜•ï¸</a>ğŸ˜ƒã€‚</p><h1 id="4c8f" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">ReactEurope 2020è™šæ‹Ÿä¼šè®®</h1><p id="deba" class="pw-post-body-paragraph kb kc it kd b ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku mc kw kx ky im bi translated">æˆ‘æœ‰å¹¸åœ¨è™šæ‹Ÿç‰ˆæœ¬çš„<a class="ae kz" href="https://www.react-europe.org/" rel="noopener ugc nofollow" target="_blank"> ReactEurope 2020 </a>ä¸Šä»¥æ¼”ç¤ºæ ¼å¼åˆ†äº«äº†è¿™ç¯‡æ–‡ç« ï¼Œå¦‚æœä½ çƒ­è¡·äºè§‚çœ‹è§†é¢‘æ¼”ç»ƒï¼Œè¯·ç»§ç»­æŸ¥çœ‹ä¸‹é¢çš„è§†é¢‘ã€‚</p><figure class="md me mf mg gt ju"><div class="bz fp l di"><div class="mh mi l"/></div></figure><h1 id="4571" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated"><strong class="ak">ä¸€äº›åŸºæœ¬è§„åˆ™</strong></h1><figure class="md me mf mg gt ju"><div class="bz fp l di"><div class="mj mi l"/></div></figure><p id="d24e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">åƒç”Ÿæ´»ä¸­çš„å¤§å¤šæ•°äº‹æƒ…ä¸€æ ·ï¼Œæˆ‘ä»¬ä¸èƒ½åœ¨ä»»ä½•åœ°æ–¹ä»¥ä»»ä½•æ–¹å¼ä½¿ç”¨è¿™äº›é’©å­â€”â€”æœ‰<a class="ae kz" href="https://reactjs.org/docs/hooks-rules.html" rel="noopener ugc nofollow" target="_blank"> <em class="mk">è§„åˆ™</em> </a>ã€‚æ‚¨åªèƒ½åœ¨å‡½æ•°ç»„ä»¶çš„é¡¶å±‚ä½¿ç”¨è¿™äº›é’©å­ã€‚å› æ­¤ï¼Œæˆ‘ä»¬ä¸èƒ½åœ¨åµŒå¥—å‡½æ•°æˆ–ä»£ç å—ä¸­å¯åŠ¨/å®ç°é’©å­ï¼Œæ¯”å¦‚ifè¯­å¥ã€forå¾ªç¯è¯­å¥æˆ–ä»»ä½•å…¶ä»–å½¢å¼çš„åµŒå¥—ã€‚å®ƒä»¬å¿…é¡»å‡ºç°åœ¨åŠŸèƒ½ç»„ä»¶çš„æ ¹çº§åˆ«çš„é¡¶éƒ¨ã€‚</p><h1 id="3e9d" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated"><strong class="ak">è¾¹æ„å»ºè¾¹å­¦ä¹ </strong></h1><p id="305e" class="pw-post-body-paragraph kb kc it kd b ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku mc kw kx ky im bi translated">ä¸ºäº†è®©ä½ å¯¹ReactæŒ‚é’©æœ‰æ›´å¤šçš„å®é™…æ„Ÿå—ï¼Œæˆ‘ä»¬å°†é€šè¿‡æ„å»ºä¸€ä¸ªéå¸¸å°çš„åº”ç”¨ç¨‹åºæ¥å­¦ä¹ ä¸€äº›ä¸»è¦çš„æˆ–æ ¸å¿ƒçš„æŒ‚é’©ï¼Œè¯¥åº”ç”¨ç¨‹åºå…·æœ‰åŸºæœ¬çš„èº«ä»½éªŒè¯(æ²¡æœ‰æ³¨å†Œæ­¥éª¤æˆ–å®é™…çš„æ•°æ®åº“)å’Œéå¸¸æ™®é€šçš„â€œå¾…åŠäº‹é¡¹â€ç¤ºä¾‹ğŸ™„ã€‚è¿™æ ·åšçš„ä¸»è¦ç›®çš„æ˜¯ç»™ä½ ä¸€ä¸ªå¦‚ä½•åœ¨ä½ è‡ªå·±çš„åº”ç”¨ç¨‹åºä¸­åˆ©ç”¨å„ç§é’©å­çš„å®é™…æƒ³æ³•ã€‚</p><figure class="md me mf mg gt ju gh gi paragraph-image"><div class="gh gi ml"><img src="../Images/0e4dd3da1c61600438ed426fbbdbe5fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1228/format:webp/1*b__H2ynow6Qjx_2XelLbzA.png"/></div><figcaption class="mm mn gj gh gi mo mp bd b be z dk translated">åŸºæœ¬å¾…åŠäº‹é¡¹åº”ç”¨ç¨‹åº</figcaption></figure><h1 id="5897" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated"><strong class="ak">å¿«é€Ÿè®¾ç½®</strong></h1><p id="0705" class="pw-post-body-paragraph kb kc it kd b ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku mc kw kx ky im bi translated">åœ¨è¿™ä¸ªç»ƒä¹ ä¸­ï¼Œæˆ‘å°†ä½¿ç”¨<a class="ae kz" href="https://github.com/facebook/create-react-app" rel="noopener ugc nofollow" target="_blank"> create-react-app </a>å’Œ<a class="ae kz" href="https://www.npmjs.com/package/typescript" rel="noopener ugc nofollow" target="_blank"> TypeScript </a>ã€‚å¦‚æœä½ ä¸å¤ªç¡®å®šå¦‚ä½•è®©TypeScriptä¸è„¸ä¹¦çš„æ ·æ¿æ–‡ä»¶ä¸€èµ·å·¥ä½œï¼Œä½ å¯ä»¥å¿«é€ŸæŸ¥çœ‹æˆ‘çš„å¦ä¸€ç¯‡æ–‡ç« <a class="ae kz" href="https://itnext.io/create-stripe-subscription-payments-using-react-aws-lambda-pt-2-building-our-react-frontend-28a6a167f7b9" rel="noopener ugc nofollow" target="_blank">è¿™é‡Œ</a>ï¼Œå¹¶é€šè¿‡å¤„ç†åˆå§‹è®¾ç½®æ­¥éª¤å’Œåˆ é™¤æˆ‘ä»¬ä¸éœ€è¦çš„æ ·æ¿æ–‡ä»¶ä»£ç çš„éƒ¨åˆ†æ¥å·¥ä½œã€‚</p><p id="9f06" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">å‡ºäºæ ·å¼åŒ–çš„ç›®çš„ï¼Œæˆ‘å°†ä½¿ç”¨<a class="ae kz" href="https://www.styled-components.com/" rel="noopener ugc nofollow" target="_blank">æ ·å¼åŒ–ç»„ä»¶</a>å’Œ<a class="ae kz" href="https://reactstrap.github.io/" rel="noopener ugc nofollow" target="_blank"> reactstrap </a>ã€<a class="ae kz" href="https://www.npmjs.com/package/validator" rel="noopener ugc nofollow" target="_blank">éªŒè¯å™¨</a>è¿›è¡Œè¾“å…¥éªŒè¯ï¼Œå¹¶ä½¿ç”¨<a class="ae kz" href="https://www.npmjs.com/package/uuid" rel="noopener ugc nofollow" target="_blank"> uuid </a>ç”Ÿæˆå”¯ä¸€idã€‚æ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£…æ¯ä¸ªç±»å‹å®šä¹‰åŒ…åŠå…¶å„è‡ªçš„ç±»å‹å®šä¹‰åŒ…:</p><pre class="md me mf mg gt mq mr ms mt aw mu bi"><span id="ab0c" class="mv lb it mr b gy mw mx l my mz">npm i --save bootstrap reactstrap styled-components validator uuid<br/>npm i --save-dev @types/reactstrap @types/styled-components @types/validator @types/uuid</span></pre><p id="57d2" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">åœ¨æˆ‘ä»¬çš„<strong class="kd iu"> src </strong>æ–‡ä»¶å¤¹ä¸­ï¼Œæ‚¨å¯ä»¥è®¾ç½®ä»¥ä¸‹æ–‡ä»¶å¤¹ç»“æ„:</p><pre class="md me mf mg gt mq mr ms mt aw mu bi"><span id="0a15" class="mv lb it mr b gy mw mx l my mz">â”œâ”€â”€ components<br/>â”œâ”€â”€ containers<br/>â”œâ”€â”€ contexts<br/>â”œâ”€â”€ custom-types<br/>â””â”€â”€ utils</span></pre><p id="7eca" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu"> utils </strong>æ–‡ä»¶å¤¹æ˜¯æˆ‘ä»¬çš„å®šåˆ¶é’©å­ã€å¸¸é‡å’Œè¾…åŠ©å‡½æ•°æ‰€åœ¨çš„åœ°æ–¹ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å°†åœ¨ä¸€ä¸ªåä¸ºçš„æ–‡ä»¶ä¸­æ·»åŠ ä¸€ä¸ªåŠ©æ‰‹å‡½æ•°ï¼Œä½ çŒœå¯¹äº†ğŸ˜„ï¼Œ<strong class="kd iu"> Helpers.ts </strong>ã€‚å½“æˆ‘ä»¬æƒ³è¦å‘å‡ºAPIè¯·æ±‚æ—¶ï¼Œè¿™ä¸ªå®ç”¨å‡½æ•°å°†è¢«å¯¼å…¥å’Œè°ƒç”¨ã€‚</p><pre class="md me mf mg gt mq mr ms mt aw mu bi"><span id="53e8" class="mv lb it mr b gy mw mx l my mz">/**<br/> * API Request handler<br/> * <a class="ae kz" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> url - api endpoint<br/> * <a class="ae kz" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> method - http method<br/> * <a class="ae kz" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> bodyParams - body parameters of request<br/> */</span><span id="5a9d" class="mv lb it mr b gy na mx l my mz">export const apiRequest = async (<br/>  url: string,<br/>  method: string,<br/>  bodyParams?: { email: string; password: string }<br/>): Promise&lt;any&gt; =&gt; {<br/>  const response = await fetch(url, {<br/>    method,<br/>    headers: {<br/>      Accept: "application/json",<br/>      "Content-Type": "application/json"<br/>    },<br/>    body: bodyParams ? JSON.stringify(bodyParams) : undefined<br/>  });</span><span id="d227" class="mv lb it mr b gy na mx l my mz">return await response.json();<br/>};</span></pre><p id="9cee" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">åœ¨<strong class="kd iu">ç»„ä»¶</strong>æ–‡ä»¶å¤¹ä¸­ï¼Œæ‚¨å¯ä»¥åˆ›å»ºä¸€ä¸ª<strong class="kd iu"> Styles.tsx </strong>æ–‡ä»¶ï¼Œå¹¶æ·»åŠ æˆ‘ä»¬å°†åœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºä¸­ä½¿ç”¨çš„ä»¥ä¸‹æ ·å¼ç»„ä»¶:</p><pre class="md me mf mg gt mq mr ms mt aw mu bi"><span id="6a5a" class="mv lb it mr b gy mw mx l my mz">import styled from "styled-components";</span><span id="b0d9" class="mv lb it mr b gy na mx l my mz">export const Wrapper = styled.div`<br/>  height: 100vh;<br/>  display: flex;<br/>  align-items: center;<br/>  justify-content: center;<br/>  &amp; button {<br/>    background: rgba(51, 51, 255, 1) !important;<br/>  }<br/>`;</span><span id="7f18" class="mv lb it mr b gy na mx l my mz">export const ToDoContainer = styled.div`<br/>  width: 400px;<br/>`;</span><span id="1607" class="mv lb it mr b gy na mx l my mz">export const ToDoItem = styled.div`<br/>  text-align: center;<br/>  font-weight: bold;<br/>  cursor: pointer;<br/>  text-decoration: ${(props: { complete?: boolean }) =&gt;<br/>    props.complete ? "line-through" : "none"};<br/>`;</span><span id="bd7e" class="mv lb it mr b gy na mx l my mz">export const JokeContainer = styled.div`<br/>  padding: 30px;<br/>  text-align: center;<br/>`;</span><span id="6185" class="mv lb it mr b gy na mx l my mz">export const Header = styled.h4`<br/>  text-transform: capitalize;<br/>  letter-spacing: 1px;<br/>  font-weight: bold;<br/>  text-align: center;<br/>`;</span><span id="0b02" class="mv lb it mr b gy na mx l my mz">export const Input = styled.input`<br/>  width: 100%;<br/>  border: 1px solid #f2f2f2;<br/>  padding: 10px;<br/>  margin-bottom: 10px;<br/>`;</span></pre><p id="3b37" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">ä¸€æ—¦ä½ å®Œæˆäº†è¿™äº›ï¼Œä½ å°±å¯ä»¥åœ¨<strong class="kd iu">å®¹å™¨</strong>æ–‡ä»¶å¤¹ä¸­æ·»åŠ ä¸€ä¸ªæ ¹å®¹å™¨(<strong class="kd iu"> RootContainer.tsx </strong>)ã€‚ç°åœ¨å®ƒå°†æ˜¯ä¸€ä¸ªåŸºæœ¬çš„åŠŸèƒ½ç»„ä»¶ï¼Œä½†æ˜¯ç¨åæˆ‘ä»¬å°†å‘å®ƒæ·»åŠ æ›´å¤šçš„é€»è¾‘ã€‚</p><pre class="md me mf mg gt mq mr ms mt aw mu bi"><span id="3726" class="mv lb it mr b gy mw mx l my mz">import * as React from "react";</span><span id="bd24" class="mv lb it mr b gy na mx l my mz">/** Presentation */<br/>import { Wrapper } from "../components/Styles";</span><span id="4269" class="mv lb it mr b gy na mx l my mz">import Login from "./Login";</span><span id="87c1" class="mv lb it mr b gy na mx l my mz">function RootContainer(){<br/>  return (<br/>    &lt;Wrapper&gt;<br/>      &lt;Login /&gt;<br/>    &lt;/Wrapper&gt;<br/>  );<br/>};</span><span id="ef7f" class="mv lb it mr b gy na mx l my mz">export default RootContainer;</span></pre><p id="bcbd" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">æˆ‘çŸ¥é“ä½ åœ¨æƒ³ä»€ä¹ˆï¼Œâ€œé’©å­åœ¨å“ªé‡Œï¼Ÿâ€é‚£ä¹ˆï¼Œä¸è¦å†æµªè´¹æ—¶é—´äº†â€¦</p><figure class="md me mf mg gt ju"><div class="bz fp l di"><div class="nb mi l"/></div></figure><h1 id="b22b" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated"><strong class="ak">ä½¿ç”¨çŠ¶æ€é’©å­(useState) </strong></h1><p id="f604" class="pw-post-body-paragraph kb kc it kd b ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku mc kw kx ky im bi translated">ä½¿ç”¨çŠ¶æ€é’©å­å…è®¸æˆ‘ä»¬ç»™åŠŸèƒ½ç»„ä»¶æ·»åŠ çŠ¶æ€ã€‚å®ƒè¿”å›ä¸€ä¸ªçŠ¶æ€å€¼å’Œä¸€ä¸ªæ›´æ–°è¯¥å€¼çš„å‡½æ•°ã€‚æˆ‘ä»¬é€šè¿‡<a class="ae kz" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment" rel="noopener ugc nofollow" target="_blank">ææ„èµ‹å€¼</a>è¯­æ³•æ¥ä½¿ç”¨å®ƒï¼Œå°±åƒæˆ‘ä»¬å¯¹å…¶ä»–é’©å­æ‰€åšçš„ä¸€æ ·ã€‚ä½ ä¼šæ³¨æ„åˆ°åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å‘<em class="mk"> useState </em>é’©å­ä¼ é€’ä¸€ä¸ªå€¼æ¥è®¾ç½®åˆå§‹çŠ¶æ€ã€‚</p><pre class="md me mf mg gt mq mr ms mt aw mu bi"><span id="02e3" class="mv lb it mr b gy mw mx l my mz">const [state, setState] = useState(initialState);</span></pre><p id="d810" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">è®©æˆ‘ä»¬ç»§ç»­åœ¨containersæ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ªå‡½æ•°ç»„ä»¶<strong class="kd iu"> Login.tsx </strong>ï¼Œæˆ‘ä»¬å°†åœ¨å…¶ä¸­ç®¡ç†<em class="mk">ç”¨æˆ·å</em>ã€<em class="mk">å¯†ç </em>å’Œ<em class="mk">åŠ è½½</em>(ç”¨äºæäº¤ç™»å½•è¡¨å•æ—¶)çš„çŠ¶æ€å€¼ï¼Œå¦‚ä¸‹æ‰€ç¤º:</p><pre class="md me mf mg gt mq mr ms mt aw mu bi"><span id="317e" class="mv lb it mr b gy mw mx l my mz">import * as React from "react";<br/>import { Button, Form, FormGroup, Input } from "reactstrap";</span><span id="3e04" class="mv lb it mr b gy na mx l my mz">/** Utils */<br/>import { Header } from "../components/Styles";</span><span id="e65f" class="mv lb it mr b gy na mx l my mz">function Login() {<br/>  const [userEmail, setUserEmail] = React.useState("");<br/>  const [userPassword, setUserPassword] = React.useState("");<br/>  const [loading, setLoading] = React.useState(false);</span><span id="dd7b" class="mv lb it mr b gy na mx l my mz">return (<br/>    &lt;Form<br/>      onSubmit={e =&gt; {<br/>        e.preventDefault();<br/>        // Auth handler<br/>      }}<br/>    &gt;<br/>      &lt;Header&gt;Sign in&lt;/Header&gt;<br/>      &lt;br /&gt;<br/>      &lt;FormGroup&gt;<br/>        &lt;Input<br/>          type="email"<br/>          name="email"<br/>          value={userEmail}<br/>          placeholder="<a class="ae kz" href="mailto:john@mail.com" rel="noopener ugc nofollow" target="_blank">john@mail.com</a>"<br/>          onChange={e =&gt; setUserEmail(e.target.value)}<br/>        /&gt;<br/>      &lt;/FormGroup&gt;<br/>      &lt;FormGroup&gt;<br/>        &lt;Input<br/>          type="password"<br/>          name="password"<br/>          value={userPassword}<br/>          placeholder="Password"<br/>          onChange={e =&gt; setUserPassword(e.target.value)}<br/>        /&gt;<br/>      &lt;/FormGroup&gt;<br/>      &lt;Button type="submit" disabled={loading} block={true}&gt;<br/>        {loading ? "Loading..." : "Sign In"}<br/>      &lt;/Button&gt;<br/>    &lt;/Form&gt;<br/>  );<br/>}</span><span id="6ff3" class="mv lb it mr b gy na mx l my mz">export default Login;</span></pre><p id="17aa" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">æˆ‘ä»¬å·²ç»æœ‰äº†æˆ‘ä»¬çš„ç™»å½•è¡¨å•ã€æˆ‘ä»¬éœ€è¦çš„ä¸¤ä¸ªè¾“å…¥å­—æ®µä»¥åŠæ¯æ¬¡åœ¨è¾“å…¥å­—æ®µä¸­æ£€æµ‹åˆ°å˜åŒ–æ—¶æ›´æ–°çš„çŠ¶æ€å€¼ã€‚</p><p id="3805" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">ç°åœ¨ï¼Œå¦‚æœæˆ‘ä»¬é‡åˆ°é”™è¯¯(ä¾‹å¦‚ï¼Œæœ‰äººè¯•å›¾ç”¨æ— æ•ˆçš„ç”¨æˆ·åæˆ–å¯†ç æäº¤è¡¨å•)ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿå½“ç„¶ï¼Œæˆ‘ä»¬åº”è¯¥æœ‰ä¸€äº›å¤„ç†è¿™ä¸ªé—®é¢˜çš„é€»è¾‘ï¼Œä»¥åŠå‘ç”¨æˆ·æ˜¾ç¤ºåé¦ˆçš„æ¶ˆæ¯ã€‚åœ¨æˆ‘ä»¬å¼€å§‹åœ¨è¿™ä¸ªç»„ä»¶ä¸­å®ç°é‚£ä¸ªé€»è¾‘ä¹‹å‰ï¼Œé”™è¯¯å¤„ç†ï¼Œå°±åƒåœ¨å¤§å¤šæ•°åº”ç”¨ç¨‹åºä¸­ä¸€æ ·ï¼Œæ˜¯æˆ‘ä»¬å¯èƒ½åœ¨ä¸æ­¢ä¸€ä¸ªåœ°æ–¹åšçš„äº‹æƒ…ã€‚é‚£ä¹ˆä¸ºä»€ä¹ˆä¸åˆ›é€ ä¸€äº›å¯é‡å¤ä½¿ç”¨çš„ä¸œè¥¿å‘¢ï¼Ÿè¿™æ˜¯æˆ‘ä»¬æ¢ç´¢å®šåˆ¶é’©å­çš„å®Œç¾ç»§ç»­ã€‚</p><h1 id="db0d" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated"><strong class="ak">ä½¿ç”¨è‡ªå®šä¹‰æŒ‚é’©(ä½¿ç”¨â€¦) </strong></h1><p id="96b1" class="pw-post-body-paragraph kb kc it kd b ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku mc kw kx ky im bi translated">è‡ªå®šä¹‰æŒ‚é’©å…è®¸æˆ‘ä»¬è½»æ¾åœ°è·¨ç»„ä»¶å…±äº«é€»è¾‘ï¼Œæˆ‘è®¤ä¸ºè¿™æ˜¯è®¸å¤šå¼€å‘äººå‘˜å°†ä¼šçˆ±ä¸Šâ¤ï¸çš„ä¸œè¥¿ï¼Œæˆ‘å½“ç„¶æœ‰ã€‚</p><p id="7765" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">ä½ å¯èƒ½æƒ³çŸ¥é“ä¸ºä»€ä¹ˆæˆ‘é€‰æ‹©åœ¨æ¥è§¦å…¶ä»–æ ¸å¿ƒé’©å­ä¹‹å‰ç›´æ¥è·³åˆ°å®šåˆ¶é’©å­ã€‚é¦–å…ˆï¼Œä½ ä¸éœ€è¦æ‹…å¿ƒé™¡å³­çš„å­¦ä¹ æ›²çº¿æˆ–ä»»ä½•ä¸»è¦çš„è¯­æ³•å·®å¼‚ã€‚å…¶æ¬¡ï¼Œè¿™æ˜¯æˆ‘ä»¬æ­£åœ¨æ„å»ºçš„åº”ç”¨ç¨‹åºçš„ä¸‹ä¸€ä¸ªé€»è¾‘æ­¥éª¤ã€‚ç¬¬ä¸‰ï¼Œå®ƒè®©æˆ‘ä»¬æœ‰æœºä¼šåˆ›å»ºä¸€ä¸ªå®šåˆ¶é’©å­ï¼Œåˆ©ç”¨æˆ‘ä»¬åˆšåˆšå­¦ä¹ çš„ç¬¬ä¸€ä¸ªcore Reacté’©å­ï¼Œ<em class="mk"> useState </em>ã€‚</p><p id="188b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">å®šåˆ¶é’©å­åªæ˜¯å¤„ç†ç‰¹å®šé€»è¾‘çš„ç®€å•å‡½æ•°ï¼Œä»¥å‡å°‘å¤æ‚æ€§å’Œé‡å¤ã€‚è¿™äº›å‡½æ•°å…è®¸æˆ‘ä»¬åˆ©ç”¨æ ¸å¿ƒReacté’©å­å¹¶æå–ç»„ä»¶é€»è¾‘ã€‚</p><p id="c4cf" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">éœ€è¦è®°ä½çš„é‡è¦ä¸€ç‚¹æ˜¯ï¼ŒReactæŒ‚é’©çš„è§„åˆ™ä»ç„¶é€‚ç”¨äºå®ƒä»¬ã€‚</p><p id="507c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">ç°åœ¨ï¼Œè®©æˆ‘ä»¬åˆ›å»ºæˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªè‡ªå®šä¹‰é’©å­ï¼Œå®ƒå°†åœ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­å¤„ç†é”™è¯¯ã€‚åœ¨<strong class="kd iu"> utils </strong>æ–‡ä»¶å¤¹ä¸­ï¼Œåˆ›å»ºå¦ä¸€ä¸ªåä¸º<strong class="kd iu"> custom-hooks </strong>çš„æ–‡ä»¶å¤¹ï¼Œæˆ‘ä»¬å°†åœ¨å…¶ä¸­æ·»åŠ <strong class="kd iu"> ErrorHandler.tsx </strong>ã€‚</p><pre class="md me mf mg gt mq mr ms mt aw mu bi"><span id="1ef1" class="mv lb it mr b gy mw mx l my mz">import * as React from "react";</span><span id="fe62" class="mv lb it mr b gy na mx l my mz">const useErrorHandler = (initialState: string | null) =&gt; {<br/>  const [error, setError] = React.useState(initialState);<br/>  const showError = (errorMessage: string | null) =&gt; {<br/>    setError(errorMessage);<br/>    window.setTimeout(() =&gt; {<br/>      setError(null);<br/>    }, 3000);<br/>  };<br/>  return { error, showError };<br/>};</span><span id="5398" class="mv lb it mr b gy na mx l my mz">export default useErrorHandler;</span></pre><p id="ebc9" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">è¿™é‡Œå‘ç”Ÿäº†ä»€ä¹ˆäº‹ğŸ¤”ï¼Ÿ</p><p id="2f67" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">é¦–å…ˆï¼Œæˆ‘ä»¬åˆ©ç”¨<em class="mk"> useState </em>é’©å­æ¥è·å¾—ä¸€ä¸ªé”™è¯¯çš„çŠ¶æ€å€¼å’Œä¸€ä¸ªæ›´æ–°è¯¥å€¼çš„å‡½æ•°ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªåä¸º<em class="mk"> showError </em>çš„å‡½æ•°ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ª<em class="mk"> errorMessage </em>å‚æ•°ï¼Œé€šè¿‡åˆ©ç”¨<em class="mk"> setError </em>æ›´æ–°å‡½æ•°æ¥æ›´æ–°é”™è¯¯çŠ¶æ€å€¼ã€‚åœ¨è®¾ç½®é”™è¯¯å€¼ä»¥ä¾¿ç”¨æˆ·å¯ä»¥çœ‹åˆ°åï¼Œå®ƒåˆ©ç”¨<em class="mk"> setTimeout </em>å‡½æ•°åœ¨3ç§’åå°†é”™è¯¯å€¼é‡ç½®å›nullã€‚æ‚¨å¯ä»¥éšæ„æ›´æ”¹é”™è¯¯ä¿¡æ¯æ˜¾ç¤ºçš„æŒç»­æ—¶é—´ã€‚</p><p id="bf61" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">æˆ‘ä»¬å¸Œæœ›ä»è¿™ä¸ªè‡ªå®šä¹‰é’©å­ä¸­å¾—åˆ°çš„åªæ˜¯é”™è¯¯æ¶ˆæ¯çš„å€¼å’Œå¤„ç†é”™è¯¯æ¶ˆæ¯è®¾ç½®å’Œé‡ç½®çš„å‡½æ•°ï¼Œå› æ­¤æˆ‘ä»¬åªå¯¼å‡º<em class="mk"> error </em>å’Œ<em class="mk"> showError </em>ã€‚</p><p id="433b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">å½“æˆ‘ä»¬å°†å®ƒå¯¼å…¥åˆ°æˆ‘ä»¬çš„<strong class="kd iu"> Login.tsx </strong>å®¹å™¨ä¸­æ—¶ï¼Œä¼šæ˜¯ä»€ä¹ˆæ ·å­å‘¢ï¼Ÿ</p><pre class="md me mf mg gt mq mr ms mt aw mu bi"><span id="fab7" class="mv lb it mr b gy mw mx l my mz">const { error, showError } = useErrorHandler(null);</span></pre><p id="afbe" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">åœ¨æˆ‘ä»¬å°†æ‰€æœ‰è¿™äº›æ”¾åœ¨ä¸€èµ·ä¹‹å‰ï¼Œè®©æˆ‘ä»¬æ·»åŠ ä¸€ä¸ªæ¼”ç¤ºç»„ä»¶ï¼Œåœ¨componentsæ–‡ä»¶å¤¹ä¸­æ˜¾ç¤ºæˆ‘ä»¬çš„é”™è¯¯æ¶ˆæ¯ã€‚å¯ä»¥å‘½åä¸º<strong class="kd iu"> ErrorMessage.tsx </strong>(å¥½åŸåˆ›)ã€‚è¯¥ç»„ä»¶å°†åŒ…å«ä»¥ä¸‹å†…å®¹:</p><pre class="md me mf mg gt mq mr ms mt aw mu bi"><span id="2c62" class="mv lb it mr b gy mw mx l my mz">import * as React from "react";<br/>import styled from "styled-components";</span><span id="ab62" class="mv lb it mr b gy na mx l my mz">const ErrorMessage = styled.p`<br/>  text-align: center;<br/>  margin-top: 10px;<br/>  color: #ff0000;<br/>`;</span><span id="106e" class="mv lb it mr b gy na mx l my mz">const ErrorMessageContainer: React.FC&lt;{ errorMessage: string | null }&gt; = ({<br/>  errorMessage<br/>}) =&gt; {<br/>  return &lt;ErrorMessage&gt;{errorMessage}&lt;/ErrorMessage&gt;;<br/>};</span><span id="8a28" class="mv lb it mr b gy na mx l my mz">export default ErrorMessageContainer;</span></pre><p id="4787" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">æˆ‘ä»¬è¿˜æƒ³æ·»åŠ éªŒè¯ç”¨æˆ·åœ¨ç™»å½•è¡¨å•ä¸Šæäº¤çš„ç”¨æˆ·å(ç”µå­é‚®ä»¶)å’Œå¯†ç çš„åŠŸèƒ½ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬åœ¨åä¸º<em class="mk"> validateLoginForm </em>çš„<strong class="kd iu"> Helpers.ts </strong>æ–‡ä»¶ä¸­åŒ…å«å¦ä¸€ä¸ªå‡½æ•°ã€‚</p><pre class="md me mf mg gt mq mr ms mt aw mu bi"><span id="7b7b" class="mv lb it mr b gy mw mx l my mz">import * as validator from "validator";</span><span id="0e5e" class="mv lb it mr b gy na mx l my mz">/** Handle form validation for the login form<br/> * <a class="ae kz" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> email - user's auth email<br/> * <a class="ae kz" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> password - user's auth password<br/> * <a class="ae kz" href="http://twitter.com/param" rel="noopener ugc nofollow" target="_blank">@param</a> setError - function that handles updating error state value<br/> */<br/>export const validateLoginForm = (<br/>  email: string,<br/>  password: string,<br/>  setError: (error: string | null) =&gt; void<br/>): boolean =&gt; {<br/>  // Check for undefined or empty input fields<br/>  if (!email || !password) {<br/>    setError("Please enter a valid email and password.");<br/>    return false;<br/>  }</span><span id="8e72" class="mv lb it mr b gy na mx l my mz">// Validate email<br/>  if (!validator.isEmail(email)) {<br/>    setError("Please enter a valid email address.");<br/>    return false;<br/>  }</span><span id="90f1" class="mv lb it mr b gy na mx l my mz">return true;<br/>};</span></pre><p id="7e9b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">æˆ‘ä»¬æ²¡æœ‰åç«¯æ¥æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å­˜åœ¨äºä»»ä½•çœŸå®çš„æ•°æ®åº“ä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬åªæ˜¯åœ¨æ¯æ¬¡ç”¨æˆ·ç‚¹å‡»ç™»å½•æ—¶å‘ä¸€ä¸ªå‡çš„REST APIå‘é€ä¸€ä¸ªå¸¦æœ‰ç”¨æˆ·åå’Œå¯†ç çš„POSTè¯·æ±‚ã€‚æˆ‘ä»¬å°†åœ¨æœ¬ä¾‹ä¸­ä½¿ç”¨çš„å‡REST APIæ˜¯<a class="ae kz" href="https://jsonplaceholder.typicode.com/" rel="noopener ugc nofollow" target="_blank"> JSONPlaceholder </a>ã€‚</p><p id="767e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">ç°åœ¨è®©æˆ‘ä»¬ä¸€èµ·æ¥â€¦</p><pre class="md me mf mg gt mq mr ms mt aw mu bi"><span id="50ea" class="mv lb it mr b gy mw mx l my mz">import * as React from "react";<br/>import { Button, Form, FormGroup, Input } from "reactstrap";</span><span id="36ed" class="mv lb it mr b gy na mx l my mz">/** Presentation */<br/>import ErrorMessage from "../components/ErrorMessage";</span><span id="71f1" class="mv lb it mr b gy na mx l my mz">/** Custom Hooks */<br/>import useErrorHandler from "../utils/custom-hooks/ErrorHandler";</span><span id="4758" class="mv lb it mr b gy na mx l my mz">/** Utils */<br/>import { apiRequest, validateLoginForm } from "../utils/Helpers";<br/>import { Header } from "../components/Styles";</span><span id="b0e6" class="mv lb it mr b gy na mx l my mz">function Login() {<br/>  const [userEmail, setUserEmail] = React.useState("");<br/>  const [userPassword, setUserPassword] = React.useState("");<br/>  const [loading, setLoading] = React.useState(false);<br/>  const { error, showError } = useErrorHandler(null);</span><span id="6a94" class="mv lb it mr b gy na mx l my mz">const authHandler = async () =&gt; {<br/>    try {<br/>      setLoading(true);<br/>      const userData = await apiRequest(<br/>        "<a class="ae kz" href="https://jsonplaceholder.typicode.com/users" rel="noopener ugc nofollow" target="_blank">https://jsonplaceholder.typicode.com/users</a>",<br/>        "post",<br/>        { email: userEmail, password: userPassword }<br/>      );<br/>      const { id, email } = userData;<br/>    } catch (err) {<br/>      setLoading(false);<br/>      showError(err.message);<br/>    }<br/>  };</span><span id="fd25" class="mv lb it mr b gy na mx l my mz">return (<br/>    &lt;Form<br/>      onSubmit={e =&gt; {<br/>        e.preventDefault();<br/>        if (validateLoginForm(userEmail, userPassword, showError)) {<br/>          authHandler();<br/>        }<br/>      }}<br/>    &gt;<br/>      &lt;Header&gt;Sign in&lt;/Header&gt;<br/>      &lt;br /&gt;<br/>      &lt;FormGroup&gt;<br/>        &lt;Input<br/>          type="email"<br/>          name="email"<br/>          value={userEmail}<br/>          placeholder="<a class="ae kz" href="mailto:john@mail.com" rel="noopener ugc nofollow" target="_blank">john@mail.com</a>"<br/>          onChange={e =&gt; setUserEmail(e.target.value)}<br/>        /&gt;<br/>      &lt;/FormGroup&gt;<br/>      &lt;FormGroup&gt;<br/>        &lt;Input<br/>          type="password"<br/>          name="password"<br/>          value={userPassword}<br/>          placeholder="Password"<br/>          onChange={e =&gt; setUserPassword(e.target.value)}<br/>        /&gt;<br/>      &lt;/FormGroup&gt;<br/>      &lt;Button type="submit" disabled={loading} block={true}&gt;<br/>        {loading ? "Loading..." : "Sign In"}<br/>      &lt;/Button&gt;<br/>      &lt;br /&gt;<br/>      {error &amp;&amp; &lt;ErrorMessage errorMessage={error} /&gt;}<br/>    &lt;/Form&gt;<br/>  );<br/>}</span><span id="c201" class="mv lb it mr b gy na mx l my mz">export default Login;</span></pre><figure class="md me mf mg gt ju gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/c0f0f1780dce7285ab8e24984dfe1524.png" data-original-src="https://miro.medium.com/v2/resize:fit:972/format:webp/1*pl75nh7QJQSGzZCBmBGGRQ.png"/></div></figure><p id="8693" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">ç°åœ¨æˆ‘ä»¬å·²ç»è¢«â€œè®¤è¯â€äº†ï¼Œæˆ‘ä»¬å¦‚ä½•å¤„ç†æˆ‘ä»¬çš„å‡REST APIè¿”å›çš„idå’Œemailå‘¢ï¼Ÿæ­¤å¤–ï¼Œæˆ‘ä»¬å¦‚ä½•ä½¿è¿™ä¸ªè®¤è¯çŠ¶æ€å¯¹æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºçš„å…¶ä½™éƒ¨åˆ†å¯ç”¨ï¼Ÿæ˜¯æ—¶å€™è¿›å…¥<em class="mk"> useContext </em>é’©å­äº†ã€‚</p><h1 id="066f" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated"><strong class="ak">ä½¿ç”¨ä¸Šä¸‹æ–‡æŒ‚é’©(useContext) </strong></h1><p id="bda7" class="pw-post-body-paragraph kb kc it kd b ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku mc kw kx ky im bi translated">ä¸Šä¸‹æ–‡APIå…è®¸æˆ‘ä»¬å›´ç»•ç»„ä»¶æ ‘ä¼ é€’å’Œè®¿é—®å…¨å±€çŠ¶æ€ï¼Œè€Œä¸å¿…ä¸€ç›´ä½œä¸ºé“å…·ä¼ é€’ä¸‹å»ã€‚åµŒå¥—åœ¨ä¸Šä¸‹æ–‡æä¾›ç¨‹åºä¸­çš„ä»»ä½•ç»„ä»¶éƒ½å¯ä»¥è¿›å…¥ä¸Šä¸‹æ–‡å¹¶æ£€ç´¢çŠ¶æ€å€¼ï¼Œä»¥åŠå¯¹å¯ä»¥ä½œç”¨äºçŠ¶æ€çš„å‡½æ•°çš„å¼•ç”¨ã€‚</p><p id="e57a" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">æˆ‘ä»¬å¯ä»¥è°ƒç”¨<em class="mk"> useContext </em>é’©å­æ¥è®¿é—®ä¸Šä¸‹æ–‡ã€‚ç„¶è€Œï¼Œæ­£å¦‚ä½ å¯èƒ½çŸ¥é“çš„ï¼Œæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­å¯ä»¥æœ‰ä¸åŒçš„ä¸Šä¸‹æ–‡ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ç§æ–¹æ³•æ¥è¯†åˆ«æˆ‘ä»¬æƒ³è¦åˆ©ç”¨çš„ä¸Šä¸‹æ–‡ã€‚ä¸ºæ­¤ï¼Œå¯¼å…¥ä¸Šä¸‹æ–‡å¹¶å°†å…¶ä½œä¸ºå‚æ•°ä¼ é€’ç»™useContextå‡½æ•°ï¼Œå¦‚ä¸‹æ‰€ç¤º:</p><pre class="md me mf mg gt mq mr ms mt aw mu bi"><span id="e949" class="mv lb it mr b gy mw mx l my mz">import { authContext } from "../contexts/AuthContext";</span><span id="cef1" class="mv lb it mr b gy na mx l my mz">const auth = React.useContext(authContext);</span></pre><p id="8b22" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">å¯¹äºæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºï¼Œæˆ‘å°†æŠŠæˆ‘çš„ä¸Šä¸‹æ–‡è®¾ç½®ä¸ºä¸€ä¸ªJavaScriptå¯¹è±¡ï¼Œå®ƒä¿å­˜å½“å‰çš„èº«ä»½éªŒè¯çŠ¶æ€ï¼Œè¿˜ä¿å­˜å¯¹ä½¿æˆ‘ä»¬èƒ½å¤Ÿæ›´æ”¹èº«ä»½éªŒè¯çŠ¶æ€çš„å‡½æ•°çš„å¼•ç”¨ã€‚</p><p id="1148" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">é¦–å…ˆï¼Œæˆ‘å°†ä¸ºç”¨æˆ·è®¤è¯çŠ¶æ€åˆ›å»ºä¸€ä¸ªé™æ€ç±»å‹ï¼Œå¹¶å°†è¯¥ç±»å‹æ”¾åœ¨<strong class="kd iu">è‡ªå®šä¹‰ç±»å‹</strong>æ–‡ä»¶å¤¹ä¸­çš„<strong class="kd iu"> index.ts </strong>æ–‡ä»¶ä¸­ã€‚<em class="mk"> UserAuth </em>ç±»å‹å°†ä¸ºç™»å½•çš„ç”¨æˆ·æä¾›ä¸€ä¸ªidå’Œemailå±æ€§ã€‚</p><pre class="md me mf mg gt mq mr ms mt aw mu bi"><span id="18b2" class="mv lb it mr b gy mw mx l my mz">export type UserAuth = {<br/>  id: number;<br/>  email: string;<br/>};</span></pre><p id="285c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">æˆ‘è¿˜æƒ³ä¸ºæœªç»éªŒè¯çš„ç”¨æˆ·è®¾ç½®ä¸€ä¸ªé»˜è®¤çŠ¶æ€ï¼Œå®ƒå°†ä½äº<strong class="kd iu"> utils </strong>æ–‡ä»¶å¤¹çš„<strong class="kd iu"> Consts.ts </strong>æ–‡ä»¶ä¸­ã€‚</p><pre class="md me mf mg gt mq mr ms mt aw mu bi"><span id="c062" class="mv lb it mr b gy mw mx l my mz">export const DEFAULT_USER_AUTH = { id: 0, email: "" };</span></pre><p id="9d5e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">åœ¨æˆ‘ä»¬å¼€å§‹åº”ç”¨<em class="mk"> useContext </em>ä¹‹å‰ï¼Œæˆ‘ä»¬å°†åˆ›å»ºå¦ä¸€ä¸ªå®šåˆ¶é’©å­ï¼Œå®ƒå°†åŒ…å«è®¾ç½®å’Œé‡ç½®è®¤è¯çŠ¶æ€çš„é€»è¾‘ã€‚æˆ‘å°†è°ƒç”¨è¿™ä¸ªæ–‡ä»¶<strong class="kd iu"> AuthHandler.tsx </strong>å¹¶å°†å…¶ä¿å­˜åœ¨<strong class="kd iu"> custom-hooks </strong>æ–‡ä»¶å¤¹ä¸­ã€‚</p><pre class="md me mf mg gt mq mr ms mt aw mu bi"><span id="581d" class="mv lb it mr b gy mw mx l my mz">import * as React from "react";</span><span id="28db" class="mv lb it mr b gy na mx l my mz">/** Custom types */<br/>import { UserAuth } from "../../custom-types";</span><span id="fd03" class="mv lb it mr b gy na mx l my mz">/** Utils */<br/>import { DEFAULT_USER_AUTH } from "../Consts";</span><span id="9a5f" class="mv lb it mr b gy na mx l my mz">const useAuthHandler = (initialState: UserAuth) =&gt; {<br/>  const [auth, setAuth] = React.useState(initialState);</span><span id="0d91" class="mv lb it mr b gy na mx l my mz">const setAuthStatus = (userAuth: UserAuth) =&gt; {<br/>    window.localStorage.setItem("UserAuth", JSON.stringify(userAuth));<br/>    setAuth(userAuth);<br/>  };</span><span id="6612" class="mv lb it mr b gy na mx l my mz">const setUnauthStatus = () =&gt; {<br/>    window.localStorage.clear();<br/>    setAuth(DEFAULT_USER_AUTH);<br/>  };</span><span id="ce8c" class="mv lb it mr b gy na mx l my mz">return {<br/>    auth,<br/>    setAuthStatus,<br/>    setUnauthStatus<br/>  };<br/>};</span><span id="8a79" class="mv lb it mr b gy na mx l my mz">export default useAuthHandler;</span></pre><p id="f8fa" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">æ‚¨å¯èƒ½å·²ç»æ³¨æ„åˆ°ï¼Œæˆ‘ä»¬ä¸ä»…åœ¨åº”ç”¨ç¨‹åºçš„stateä¸­æ›´æ–°auth statusçš„å€¼ï¼Œè€Œä¸”åœ¨æˆ‘ä»¬çš„<a class="ae kz" href="https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage" rel="noopener ugc nofollow" target="_blank">æœ¬åœ°å­˜å‚¨</a>ä¸­ä¹Ÿæ˜¯å¦‚æ­¤ã€‚åŸå› æ˜¯ï¼Œå¦‚æœä½ è¿˜æ²¡æœ‰çŒœåˆ°ï¼Œæˆ‘ä»¬ä¸æƒ³åœ¨æµè§ˆå™¨åˆ·æ–°æ—¶ä¸¢å¤±æˆ‘ä»¬çš„authçŠ¶æ€çš„å€¼ã€‚å› æ­¤ï¼Œæˆ‘å°†ç»§ç»­åˆ›å»ºå¦ä¸€ä¸ªåŠ©æ‰‹å‡½æ•°æ¥æ·»åŠ åˆ°<strong class="kd iu"> Helpers.ts </strong>æ–‡ä»¶ä¸­ï¼Œè¯¥æ–‡ä»¶ä»æœ¬åœ°å­˜å‚¨ä¸­æ£€ç´¢ç”¨æˆ·çš„authå€¼ã€‚</p><pre class="md me mf mg gt mq mr ms mt aw mu bi"><span id="e771" class="mv lb it mr b gy mw mx l my mz">/** Return user auth from local storage value */<br/>export const getStoredUserAuth = (): UserAuth =&gt; {<br/>  const auth = window.localStorage.getItem("UserAuth");<br/>  if (auth) {<br/>    return JSON.parse(auth);<br/>  }<br/>  return DEFAULT_USER_AUTH;<br/>};</span></pre><p id="939d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">ç°åœ¨æˆ‘ä»¬å·²ç»è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œè®©æˆ‘ä»¬åˆ›å»ºæˆ‘ä»¬çš„authä¸Šä¸‹æ–‡å¹¶å¯¼å‡ºå®ƒçš„æä¾›è€…ï¼æ‚¨å¯ä»¥åœ¨<strong class="kd iu">ä¸Šä¸‹æ–‡</strong>æ–‡ä»¶å¤¹ä¸­æ·»åŠ <strong class="kd iu"> AuthContext.tsx </strong>æ–‡ä»¶ã€‚</p><pre class="md me mf mg gt mq mr ms mt aw mu bi"><span id="56d0" class="mv lb it mr b gy mw mx l my mz">import * as React from "react";</span><span id="d76e" class="mv lb it mr b gy na mx l my mz">/** Custom types */<br/>import { UserAuth } from "../custom-types";<br/>/** Custom Hooks */<br/>import useAuthHandler from "../utils/custom-hooks/AuthHandler";<br/>/** Utils */<br/>import { DEFAULT_USER_AUTH } from "../utils/Consts";<br/>import { getStoredUserAuth } from "../utils/Helpers";</span><span id="8904" class="mv lb it mr b gy na mx l my mz">interface IAuthContextInterface {<br/>  auth: UserAuth;<br/>  setAuthStatus: (userAuth: UserAuth) =&gt; void;<br/>  setUnauthStatus: () =&gt; void;<br/>}</span><span id="a6cc" class="mv lb it mr b gy na mx l my mz">export const authContext = React.createContext&lt;IAuthContextInterface&gt;({<br/>  auth: DEFAULT_USER_AUTH,<br/>  setAuthStatus: () =&gt; {},<br/>  setUnauthStatus: () =&gt; {}<br/>});</span><span id="de4d" class="mv lb it mr b gy na mx l my mz">const { Provider } = authContext;</span><span id="b867" class="mv lb it mr b gy na mx l my mz">const AuthProvider: React.FC&lt;{ children: React.ReactNode }&gt; = ({<br/>  children<br/>}) =&gt; {<br/>  const { auth, setAuthStatus, setUnauthStatus } = useAuthHandler(<br/>    getStoredUserAuth()<br/>  );</span><span id="3728" class="mv lb it mr b gy na mx l my mz">return (<br/>    &lt;Provider value={{ auth, setAuthStatus, setUnauthStatus }}&gt;<br/>      {children}<br/>    &lt;/Provider&gt;<br/>  );<br/>};</span><span id="14e8" class="mv lb it mr b gy na mx l my mz">export default AuthProvider;</span></pre><p id="5158" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">å®Œæˆåï¼Œæˆ‘ä»¬éœ€è¦åšä¸¤ä»¶äº‹:</p><ol class=""><li id="dfb5" class="nd ne it kd b ke kf ki kj km nf kq ng ku nh ky ni nj nk nl bi translated">ä»æˆ‘ä»¬çš„authä¸Šä¸‹æ–‡å°†æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºç»„ä»¶åŒ…è£…åœ¨AuthProviderä¸­ã€‚</li><li id="651a" class="nd ne it kd b ke nm ki nn km no kq np ku nq ky ni nj nk nl bi translated">ä¸€æ—¦ç”¨æˆ·ç™»å½•ï¼Œè¿›å…¥èº«ä»½éªŒè¯ä¸Šä¸‹æ–‡å¹¶åœ¨ç™»å½•ç»„ä»¶ä¸­è®¾ç½®ç”¨æˆ·çš„èº«ä»½éªŒè¯çŠ¶æ€ã€‚</li></ol><p id="5820" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu"> App.tsx </strong></p><pre class="md me mf mg gt mq mr ms mt aw mu bi"><span id="4888" class="mv lb it mr b gy mw mx l my mz">import * as React from "react";</span><span id="e934" class="mv lb it mr b gy na mx l my mz">import RootContainer from "./containers/RootContainer";</span><span id="776c" class="mv lb it mr b gy na mx l my mz">/** Context API */<br/>import AuthContextProvider from "./contexts/AuthContext";</span><span id="100a" class="mv lb it mr b gy na mx l my mz">function App() {<br/>  return (<br/>    &lt;AuthContextProvider&gt;<br/>      &lt;RootContainer /&gt;<br/>    &lt;/AuthContextProvider&gt;<br/>  );<br/>}</span><span id="12e0" class="mv lb it mr b gy na mx l my mz">export default App;</span></pre><p id="f9f1" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu"> Login.tsx </strong></p><pre class="md me mf mg gt mq mr ms mt aw mu bi"><span id="61b6" class="mv lb it mr b gy mw mx l my mz">import * as React from "react";<br/>import { Button, Form, FormGroup, Input } from "reactstrap";</span><span id="b354" class="mv lb it mr b gy na mx l my mz">/** Presentation */<br/>import ErrorMessage from "../components/ErrorMessage";</span><span id="769e" class="mv lb it mr b gy na mx l my mz">/** Custom Hooks */<br/>import useErrorHandler from "../utils/custom-hooks/ErrorHandler";</span><span id="66f6" class="mv lb it mr b gy na mx l my mz">/** Context */<br/>import { authContext } from "../contexts/AuthContext";</span><span id="8a07" class="mv lb it mr b gy na mx l my mz">/** Utils */<br/>import { apiRequest, validateLoginForm } from "../utils/Helpers";<br/>import { Header } from "../components/Styles";</span><span id="e748" class="mv lb it mr b gy na mx l my mz">function Login() {<br/>  const [userEmail, setUserEmail] = React.useState("");<br/>  const [userPassword, setUserPassword] = React.useState("");<br/>  const [loading, setLoading] = React.useState(false);<br/>  const auth = React.useContext(authContext);<br/>  const { error, showError } = useErrorHandler(null);</span><span id="e7bc" class="mv lb it mr b gy na mx l my mz">const authHandler = async () =&gt; {<br/>    try {<br/>      setLoading(true);<br/>      const userData = await apiRequest(<br/>        "<a class="ae kz" href="https://jsonplaceholder.typicode.com/users" rel="noopener ugc nofollow" target="_blank">https://jsonplaceholder.typicode.com/users</a>",<br/>        "post",<br/>        { email: userEmail, password: userPassword }<br/>      );<br/>      const { id, email } = userData;<br/>      auth.setAuthStatus({ id, email });<br/>    } catch (err) {<br/>      setLoading(false);<br/>      showError(err.message);<br/>    }<br/>  };</span><span id="cc2e" class="mv lb it mr b gy na mx l my mz">return (<br/>    &lt;Form<br/>      onSubmit={e =&gt; {<br/>        e.preventDefault();<br/>        if (validateLoginForm(userEmail, userPassword, showError)) {<br/>          authHandler();<br/>        }<br/>      }}<br/>    &gt;<br/>      &lt;Header&gt;Sign in&lt;/Header&gt;<br/>      &lt;br /&gt;<br/>      &lt;FormGroup&gt;<br/>        &lt;Input<br/>          type="email"<br/>          name="email"<br/>          value={userEmail}<br/>          placeholder="<a class="ae kz" href="mailto:john@mail.com" rel="noopener ugc nofollow" target="_blank">john@mail.com</a>"<br/>          onChange={e =&gt; setUserEmail(e.target.value)}<br/>        /&gt;<br/>      &lt;/FormGroup&gt;<br/>      &lt;FormGroup&gt;<br/>        &lt;Input<br/>          type="password"<br/>          name="password"<br/>          value={userPassword}<br/>          placeholder="Password"<br/>          onChange={e =&gt; setUserPassword(e.target.value)}<br/>        /&gt;<br/>      &lt;/FormGroup&gt;<br/>      &lt;Button type="submit" disabled={loading} block={true}&gt;<br/>        {loading ? "Loading..." : "Sign In"}<br/>      &lt;/Button&gt;<br/>      &lt;br /&gt;<br/>      {error &amp;&amp; &lt;ErrorMessage errorMessage={error} /&gt;}<br/>    &lt;/Form&gt;<br/>  );<br/>}</span><span id="bde3" class="mv lb it mr b gy na mx l my mz">export default Login;</span></pre></div><div class="ab cl nr ns hx nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="im in io ip iq"><p id="b5c1" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">å¦‚æœä½ å†çœ‹ä¸€ä¸‹æˆ‘ä»¬çš„å¾…åŠäº‹é¡¹åº”ç”¨çš„ç•Œé¢æˆªå›¾ï¼Œä½ ä¼šæ³¨æ„åˆ°æ°å…‹Â·è¯ºé‡Œæ–¯çš„ä¸€ä¸ªç¬‘è¯å°±åœ¨æ ‡é¢˜â€œæˆ‘çš„å¾…åŠäº‹é¡¹åˆ—è¡¨â€ä¸‹é¢ã€‚æˆ‘ä»¬å¸Œæœ›åœ¨å†™ä¸‹è¦åšçš„äº‹æƒ…ä¹‹å‰ï¼Œç¡®ä¿æˆ‘ä»¬çš„ä¸€å¤©ä»å¾®ç¬‘å¼€å§‹ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬ç¡®ä¿ä¸€ä¸ªéšæœºçš„ç¬‘è¯å‡ºç°åœ¨æˆ‘ä»¬çš„è¡¨å•ä¸Šæ–¹ã€‚ä¸ºäº†æ„å»ºè¿™ä¸ªï¼Œæˆ‘ä»¬å°†ä½¿ç”¨<em class="mk"> useEffect </em>é’©å­ã€‚</p><h1 id="a9c2" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated"><strong class="ak">ä½¿ç”¨æ•ˆæœæŒ‚é’©(useEffect) </strong></h1><p id="fbbe" class="pw-post-body-paragraph kb kc it kd b ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku mc kw kx ky im bi translated"><em class="mk"> useEffect </em>é’©å­æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯åœ¨æ¯æ¬¡æ¸²æŸ“åæ‰§è¡Œ(æˆ–è¢«è°ƒç”¨)çš„å‡½æ•°ã€‚è¯¥å‡½æ•°å°†åœ¨ç»„ä»¶æŒ‚è½½å’Œæ›´æ–°æ—¶è¿è¡Œã€‚æ­¤å¤–ï¼Œå¦‚æœæ‚¨æƒ³è¦ä¸<a class="ae kz" href="https://reactjs.org/docs/react-component.html#componentwillunmount" rel="noopener ugc nofollow" target="_blank"><em class="mk">component will unmount</em></a>ç»™æˆ‘ä»¬ç›¸åŒçš„ç»„ä»¶æ¸…ç†åŠŸèƒ½ï¼Œæ‚¨å¯ä»¥ä»<em class="mk"> useEffect </em>é’©å­å†…éƒ¨è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒå°†ä½¿ç”¨è¯¥å‡½æ•°è¿›è¡Œæ¸…ç†ã€‚</p><p id="cc3f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">ç¬¬äºŒä¸ªè®ºç‚¹å‘¢ï¼Ÿæ‚¨å¯ä»¥é€‰æ‹©æä¾›ä¸€ä¸ªè¾“å…¥æ•°ç»„ã€‚å¦‚æœæ˜¯è¿™æ ·ï¼Œè¯¥æ•ˆæœå°†åªåœ¨é‚£äº›è¾“å…¥å·²ç»æ”¹å˜çš„æ¸²æŸ“ä¹‹åè¿è¡Œã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä¸æä¾›ç¬¬äºŒä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸­çš„å‡½æ•°(æˆ–æ•ˆæœ)å°†åœ¨ç»„ä»¶æ¯æ¬¡æ¸²æŸ“åè¿è¡Œã€‚ç¬¬äºŒä¸ªå‚æ•°çš„å¦ä¸€ä¸ªé€‰é¡¹æ˜¯æä¾›ä¸€ä¸ªç©ºæ•°ç»„ï¼Œè¿™æ„å‘³ç€åªåœ¨æŒ‚è½½å’Œå¸è½½æ—¶è¿è¡Œã€‚</p><pre class="md me mf mg gt mq mr ms mt aw mu bi"><span id="dd99" class="mv lb it mr b gy mw mx l my mz">const [todos, updateTodos] = useState([])</span><span id="2eee" class="mv lb it mr b gy na mx l my mz">// Only execute on mount<br/>useEffect(() =&gt; {<br/>  window.localStorage.setItem(â€˜todosâ€™, JSON.stringify(todos))<br/>}, [])</span><span id="52db" class="mv lb it mr b gy na mx l my mz">// Execute when thereâ€™s been a change in our todos list (componentDidUpdate):<br/>useEffect(() =&gt; {<br/>  window.localStorage.setItem(â€˜todosâ€™, JSON.stringify(todos))<br/>}, [todos])</span><span id="a8ee" class="mv lb it mr b gy na mx l my mz">// Execute clean up function on unmount<br/>useEffect(() =&gt; {<br/>  return () =&gt; { console.log(â€˜Clean up functionâ€™) }<br/>}, [])</span></pre><p id="0825" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">å¥½äº†ï¼Œè®©æˆ‘ä»¬åœ¨<strong class="kd iu">å®¹å™¨</strong>æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ªåä¸º<strong class="kd iu"> RandomJoke.tsx </strong>çš„ç»„ä»¶ï¼Œå¹¶ä»<a class="ae kz" href="https://github.com/sameerkumar18/geek-joke-api" rel="noopener ugc nofollow" target="_blank">éšæœºæå®¢ç¬‘è¯REST API </a>ä¸­è°ƒç”¨ä¸€ä¸ªéšæœºç¬‘è¯ï¼Œå®ƒå°†æ˜¾ç¤ºåœ¨æˆ‘ä»¬çš„å¾…åŠäº‹é¡¹åˆ—è¡¨ä¸Šæ–¹ã€‚æˆ‘ä»¬åªå¸Œæœ›åœ¨ç»„ä»¶æŒ‚è½½æ—¶å‘å‡ºä¸€æ¬¡è¯·æ±‚ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†ä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ é€’ä¸€ä¸ªç©ºæ•°ç»„ï¼Œç”¨äºæˆ‘ä»¬çš„<em class="mk"> useEffect </em>é’©å­ã€‚</p><pre class="md me mf mg gt mq mr ms mt aw mu bi"><span id="7c4b" class="mv lb it mr b gy mw mx l my mz">import * as React from "react";</span><span id="f082" class="mv lb it mr b gy na mx l my mz">/** Presentation/UI */<br/>import { JokeContainer } from "../components/Styles";<br/>/** Utils */<br/>import { apiRequest } from "../utils/Helpers";</span><span id="0f23" class="mv lb it mr b gy na mx l my mz">const RandomJoke: React.FC&lt;{}&gt; = () =&gt; {<br/>  const [joke, setJoke] = React.useState("");<br/>  const [loading, setLoading] = React.useState(false);</span><span id="27b3" class="mv lb it mr b gy na mx l my mz">React.useEffect(() =&gt; {<br/>    const getRandomJoke = async () =&gt; {<br/>      setLoading(true);<br/>      const joke = await apiRequest(<br/>        "<a class="ae kz" href="https://geek-jokes.sameerkumar.website/api" rel="noopener ugc nofollow" target="_blank">https://geek-jokes.sameerkumar.website/api</a>",<br/>        "get"<br/>      );<br/>      setLoading(false);<br/>      setJoke(joke);<br/>    };<br/>    getRandomJoke();<br/>  }, []);</span><span id="76f1" class="mv lb it mr b gy na mx l my mz">return (<br/>    &lt;JokeContainer&gt;<br/>      {loading ? "Why so serious, let's put a smile on your face :)" : joke}<br/>    &lt;/JokeContainer&gt;<br/>  );<br/>};</span><span id="a7ef" class="mv lb it mr b gy na mx l my mz">export default RandomJoke;</span></pre><p id="4022" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">è¿™åº”è¯¥ä¼šè®©æˆ‘ä»¬å¤§ç¬‘ï¼Œä½†å¯èƒ½ä¸ä¼šåƒè¿™ä¸ªäººé‚£æ ·åŠªåŠ›â€¦</p><figure class="md me mf mg gt ju"><div class="bz fp l di"><div class="ny mi l"/></div></figure><p id="76bc" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">è®©æˆ‘ä»¬ç»§ç»­åˆ›å»ºç”¨äºå¡«å……å¾…åŠäº‹é¡¹åˆ—è¡¨çš„è¡¨å•ã€‚å¯¹äºä¸‹ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨<em class="mk"> useRef </em>é’©å­ã€‚</p><h1 id="9276" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated"><strong class="ak">ä½¿ç”¨Refé’©å­(useRef) </strong></h1><p id="6fd0" class="pw-post-body-paragraph kb kc it kd b ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku mc kw kx ky im bi translated">å½“æˆ‘ä»¬ä½¿ç”¨åŸºäºç±»çš„ç»„ä»¶æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¼•ç”¨ä¸é¡µé¢ä¸Šçš„DOMå…ƒç´ è¿›è¡Œäº¤äº’ã€‚åœ¨é’©å­å‡ºç°ä¹‹å‰ï¼Œè¿™æ˜¯æˆ‘ä»¬ä¸èƒ½åœ¨å‡½æ•°ç»„ä»¶ä¸­åšçš„äº‹æƒ…ï¼Œå› ä¸ºå®ƒä»¬æ²¡æœ‰å¯ä»¥ç”¨æ¥å­˜å‚¨å¼•ç”¨çš„å±æ€§ã€‚</p><p id="e665" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">ç»§ç»­åœ¨åä¸º<strong class="kd iu"> AddToDo.tsx </strong>çš„æ–‡ä»¶ä¸­åˆ›å»ºä¸€ä¸ªå‡½æ•°ç»„ä»¶ã€‚æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªå¼•ç”¨ï¼Œå°†å…¶å­˜å‚¨åœ¨ä¸€ä¸ªåä¸º<em class="mk"> textInput </em>çš„å¸¸é‡ä¸­ã€‚æ‚¨å¯ä»¥é€‰æ‹©ä¸ºè¿™ä¸ªå¼•ç”¨è®¾ç½®ä¸€ä¸ªåˆå§‹å€¼ï¼Œæˆ‘å°†æŠŠå®ƒè®¾ç½®ä¸º<em class="mk"> null </em>ã€‚ä¸€æ—¦æˆ‘ä»¬å°†<em class="mk"> textInput </em>æ·»åŠ åˆ°è¾“å…¥JSXå…ƒç´ çš„refå±æ€§ä¸­ï¼Œå¯¹è¾“å…¥å­—æ®µçš„å¼•ç”¨å°±å­˜å‚¨åœ¨å¸¸é‡ä¸­ã€‚</p><pre class="md me mf mg gt mq mr ms mt aw mu bi"><span id="a84b" class="mv lb it mr b gy mw mx l my mz">const textInput = React.useRef&lt;HTMLInputElement&gt;(null);</span></pre><p id="0665" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">æˆ‘ä»¬å°†ä½¿ç”¨inputå…ƒç´ çš„å†…éƒ¨çŠ¶æ€ç®¡ç†ï¼Œå¹¶åœ¨éœ€è¦æ—¶ä½¿ç”¨refæå–å…¶å½“å‰å€¼ã€‚</p><p id="6c57" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">è¦è·å¾—inputå…ƒç´ çš„å€¼ï¼Œå¯ä»¥ä½¿ç”¨<em class="mk"> textInput </em>ï¼Œå®ƒè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡çš„å±æ€§å¼•ç”¨ç›¸å…³çš„HTMLå…ƒç´ ã€‚åƒè¿™æ ·:</p><pre class="md me mf mg gt mq mr ms mt aw mu bi"><span id="1c8d" class="mv lb it mr b gy mw mx l my mz">const toDo = textInput.current.value;</span></pre><p id="f152" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">å½“å‰å±æ€§ä¿å­˜å®é™…çš„HTMLå…ƒç´ å¼•ç”¨ã€‚åœ¨<em class="mk"> current </em>ä¸Šï¼Œæ‚¨å¯ä»¥è®¿é—®valueï¼Œå› ä¸ºå®ƒæŒ‡å‘inputå…ƒç´ ï¼Œå¹¶ä¸”JavaScriptä¸­çš„inputå…ƒç´ æœ‰ä¸€ä¸ªvalueå­—æ®µï¼Œè¿™æ˜¯å®ƒä»¬çš„å½“å‰å€¼ã€‚</p><p id="d0af" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">æˆ‘ä»¬æ·»åŠ ä¸€ä¸ªæ–°çš„â€œå¾…åŠäº‹é¡¹â€é¡¹çš„ç»„ä»¶å°†å¦‚ä¸‹æ‰€ç¤º:</p><pre class="md me mf mg gt mq mr ms mt aw mu bi"><span id="0f30" class="mv lb it mr b gy mw mx l my mz">import * as React from "react";<br/>import { Button, Form } from "reactstrap";</span><span id="bb4a" class="mv lb it mr b gy na mx l my mz">/** Presentation */<br/>import ErrorMessage from "../components/ErrorMessage";<br/>import { Input } from "../components/Styles";<br/>/** Custom Hooks */<br/>import useErrorHandler from "../utils/custom-hooks/ErrorHandler";</span><span id="c406" class="mv lb it mr b gy na mx l my mz">const AddToDo: React.FC&lt;{}&gt; = () =&gt; {<br/>  const { error, showError } = useErrorHandler(null);<br/>  const textInput = React.useRef&lt;HTMLInputElement&gt;(null);</span><span id="92f3" class="mv lb it mr b gy na mx l my mz">const addNewToDoItem = () =&gt; {<br/>    if (textInput.current) {<br/>      const toDo = textInput.current.value;<br/>      console.log('Today I want to:', toDo);<br/>    } else {<br/>      showError("Please type an item before clicking add.");<br/>    }<br/>  };</span><span id="2053" class="mv lb it mr b gy na mx l my mz">return (<br/>    &lt;Form<br/>      onSubmit={e =&gt; {<br/>        e.preventDefault();<br/>        addNewToDoItem();<br/>      }}<br/>    &gt;<br/>      &lt;Input type="text" ref={textInput} placeholder="Add to do item" /&gt;<br/>      &lt;Button type="submit" block={true}&gt;<br/>        Add<br/>      &lt;/Button&gt;<br/>      &lt;br /&gt;<br/>      {error &amp;&amp; &lt;ErrorMessage errorMessage={error} /&gt;}<br/>    &lt;/Form&gt;<br/>  );<br/>};</span><span id="9261" class="mv lb it mr b gy na mx l my mz">export default AddToDo;</span></pre></div><div class="ab cl nr ns hx nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="im in io ip iq"><p id="ef0f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">ç°åœ¨æˆ‘ä»¬å·²ç»å®Œæˆäº†ï¼Œæˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿå­˜å‚¨ã€è·å–å’Œæ›´æ–°å¾…åŠäº‹é¡¹åˆ—è¡¨ä¸­æ¯ä¸ªé¡¹ç›®çš„çŠ¶æ€ï¼Œè€Œä¸ä»…ä»…æ˜¯åœ¨æµè§ˆå™¨æ§åˆ¶å°ä¸­å•ç‹¬è®°å½•å®ƒä»¬ã€‚ä¸ºäº†å®ç°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä¸€ä¸ªæ–°çš„ä¸Šä¸‹æ–‡å’Œ<em class="mk"> useReducer </em>é’©å­ã€‚</p><h1 id="4ad7" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated"><strong class="ak">ä½¿ç”¨å‡é€Ÿé’©(useReducer) </strong></h1><p id="0de4" class="pw-post-body-paragraph kb kc it kd b ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku mc kw kx ky im bi translated">å¦‚æœä½ ç†Ÿæ‚‰<a class="ae kz" href="https://medium.com/@outlier.developer/what-on-earth-is-redux-why-should-i-consider-it-for-my-react-app-1f68a76ed79b" rel="noopener"> Redux </a>ï¼Œé‚£ä¹ˆä½ å¤§æ¦‚çŸ¥é“ä»€ä¹ˆæ˜¯å‡é€Ÿå™¨ã€‚å¦‚æœè¿™æ˜¯ä½ ç¬¬ä¸€æ¬¡å¬è¯´å‡é€Ÿå™¨ï¼Œä¸ç”¨æ‹…å¿ƒã€‚</p><p id="756d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">ç¼©å‡å™¨æ˜¯ä¸€ä¸ªå¸®åŠ©æˆ‘ä»¬ç®¡ç†åº”ç”¨ç¨‹åºçŠ¶æ€çš„åŠŸèƒ½ã€‚å®ƒæ˜¯ä¸€ä¸ªçº¯ç²¹çš„å‡½æ•°ï¼Œåœ¨è¿™ä¸ªæ„ä¹‰ä¸Šï¼Œç»™å®šæŸä¸ªè¾“å…¥ï¼Œå®ƒæ€»æ˜¯è¿”å›ç›¸åŒçš„è¾“å‡ºã€‚åœ¨reducerå‡½æ•°çš„æƒ…å†µä¸‹ï¼Œå®ƒæœ‰ä¸¤ä¸ªå‚æ•°ï¼Œå½“å‰çŠ¶æ€å’Œä¸€ä¸ªåŠ¨ä½œã€‚</p><pre class="md me mf mg gt mq mr ms mt aw mu bi"><span id="d7c8" class="mv lb it mr b gy mw mx l my mz">(state, action) =&gt; newState</span></pre><p id="ab8f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">åŠ¨ä½œæ˜¯å…·æœ‰ç±»å‹å±æ€§çš„å¯¹è±¡ï¼Œå¹¶ä¸”åŸºäºåŠ¨ä½œç±»å‹ï¼Œç¼©å‡å™¨æ‰§è¡Œç‰¹å®šçš„çŠ¶æ€è½¬æ¢:</p><pre class="md me mf mg gt mq mr ms mt aw mu bi"><span id="111d" class="mv lb it mr b gy mw mx l my mz">const counterReducer = (count, action) =&gt; {<br/>  if (action.type === 'INCREASE') {<br/>    return count + 1;<br/>  }</span><span id="2bff" class="mv lb it mr b gy na mx l my mz">  if (action.type === 'DECREASE') {<br/>    return count - 1;<br/>  }</span><span id="f3df" class="mv lb it mr b gy na mx l my mz">  return count;<br/>};</span></pre><p id="f840" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">åœ¨æˆ‘ä»¬åˆ›å»ºäº†æˆ‘ä»¬çš„reducerä¹‹åï¼Œæˆ‘ä»¬éœ€è¦æ³¨å†Œå®ƒå¹¶æ­£ç¡®åœ°ä½¿ç”¨å®ƒã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†å…¶ä½œä¸ºå‚æ•°ä¼ é€’ç»™<em class="mk"> useReducer </em>é’©å­ã€‚æˆ‘ä»¬å¯ä»¥å‘useReduceré’©å­ä¼ é€’ç¬¬äºŒä¸ªå‚æ•°ï¼Œè¿™å°†æ˜¯æˆ‘ä»¬çš„åˆå§‹çŠ¶æ€ã€‚ç„¶åæˆ‘ä»¬ä½¿ç”¨ä¸<em class="mk">ä½¿ç”¨çŠ¶æ€</em>ç›¸åŒçš„ææ„è¯­æ³•ã€‚</p><pre class="md me mf mg gt mq mr ms mt aw mu bi"><span id="f32c" class="mv lb it mr b gy mw mx l my mz">const [count, dispatch] = useReducer(counterReducer, [])</span></pre><p id="4e62" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">æ˜¯æ—¶å€™åœ¨æˆ‘ä»¬çš„åº”ç”¨ä¸­å®ç°å®ƒäº†ã€‚</p><p id="d9b7" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">è®©æˆ‘ä»¬åœ¨<strong class="kd iu">è‡ªå®šä¹‰ç±»å‹</strong>æ–‡ä»¶å¤¹ä¸­çš„<strong class="kd iu"> index.ts </strong>æ–‡ä»¶ä¸­åˆ›å»ºä¸€äº›é™æ€ç±»å‹ã€‚</p><pre class="md me mf mg gt mq mr ms mt aw mu bi"><span id="9cb8" class="mv lb it mr b gy mw mx l my mz">export type ToDoItemType = { id: string; toDo?: string; complete?: boolean };</span><span id="c55f" class="mv lb it mr b gy na mx l my mz">export enum ActionType {<br/>  add = "ADD",<br/>  delete = "DELETE",<br/>  updateStatus = "UPDATE"<br/>}</span></pre><p id="a7b4" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬åœ¨<strong class="kd iu">ä¸Šä¸‹æ–‡</strong>æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ªåä¸º<strong class="kd iu"> ToDoContext.tsx </strong>çš„å¾…åŠä¸Šä¸‹æ–‡ã€‚è¿™ä¸ªæ–‡ä»¶å°†åŒ…å«æˆ‘ä»¬çš„reducerï¼Œå®ƒå¤„ç†ç®¡ç†å¾…åŠäº‹é¡¹åˆ—è¡¨çŠ¶æ€çš„æ“ä½œï¼Œä»¥åŠå…è®¸æˆ‘ä»¬è®¿é—®çŠ¶æ€å€¼çš„ä¸Šä¸‹æ–‡å’Œå¯¹æ›´æ–°åº”ç”¨ç¨‹åºçŠ¶æ€çš„å‡½æ•°çš„å¼•ç”¨ã€‚</p><p id="3359" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">æˆ‘ä»¬çš„reducerå°†å¤„ç†å‘æˆ‘ä»¬çš„å¾…åŠäº‹é¡¹åˆ—è¡¨æ•°ç»„æ·»åŠ é¡¹ç›®:</p><pre class="md me mf mg gt mq mr ms mt aw mu bi"><span id="33b6" class="mv lb it mr b gy mw mx l my mz">case ActionType.add:<br/>  return {<br/>     toDoList: [...state.toDoList, action.payload]<br/>  };</span></pre><p id="06a0" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">å®ƒå°†å¤„ç†æ›´æ–°å¾…åŠåˆ—è¡¨æ•°ç»„ä¸­é¡¹ç›®çš„å®ŒæˆçŠ¶æ€:</p><pre class="md me mf mg gt mq mr ms mt aw mu bi"><span id="8873" class="mv lb it mr b gy mw mx l my mz">case ActionType.updateStatus:<br/>  return {<br/>    toDoList: state.toDoList.map(toDo =&gt; {<br/>      if (toDo.id === action.payload.id) {<br/>        return { ...toDo, complete: !toDo.complete };<br/>      }<br/>      return toDo;<br/>    })<br/>  };</span></pre><p id="f4d9" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">æœ€åï¼Œå®ƒå°†å¤„ç†ä»å¾…åŠäº‹é¡¹åˆ—è¡¨æ•°ç»„ä¸­åˆ é™¤ä¸€ä¸ªé¡¹ç›®:</p><pre class="md me mf mg gt mq mr ms mt aw mu bi"><span id="1e97" class="mv lb it mr b gy mw mx l my mz">case ActionType.delete:<br/>  return {<br/>     toDoList: state.toDoList.filter(toDo =&gt; toDo.id !== action.payload.id)<br/>  };</span></pre><p id="398b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu"> ToDoContext.tsx </strong></p><pre class="md me mf mg gt mq mr ms mt aw mu bi"><span id="088c" class="mv lb it mr b gy mw mx l my mz">import * as React from "react";</span><span id="7935" class="mv lb it mr b gy na mx l my mz">/** Custom types */<br/>import { ActionType } from "../custom-types";</span><span id="e1d3" class="mv lb it mr b gy na mx l my mz">interface IState {<br/>  toDoList: Array&lt;{ id: string; toDo?: string; complete?: boolean }&gt;;<br/>}</span><span id="a4ad" class="mv lb it mr b gy na mx l my mz">interface IAction {<br/>  type: ActionType;<br/>  payload: {<br/>    id: string;<br/>    toDo?: string;<br/>    complete?: boolean;<br/>  };<br/>}</span><span id="801b" class="mv lb it mr b gy na mx l my mz">interface ItoDoContextInterface {<br/>  state: {<br/>    toDoList: Array&lt;{ id: string; toDo?: string; complete?: boolean }&gt;;<br/>  };<br/>  updateToDoList: React.Dispatch&lt;IAction&gt;;<br/>}</span><span id="ca5e" class="mv lb it mr b gy na mx l my mz">const initialState: IState = { toDoList: [] };</span><span id="6ec6" class="mv lb it mr b gy na mx l my mz">const reducer: React.Reducer&lt;IState, IAction&gt; = (state, action) =&gt; {<br/>  switch (action.type) {<br/>    case ActionType.add:<br/>      return {<br/>        toDoList: [...state.toDoList, action.payload]<br/>      };<br/>    case ActionType.updateStatus:<br/>      return {<br/>        toDoList: state.toDoList.map(toDo =&gt; {<br/>          if (toDo.id === action.payload.id) {<br/>            return { ...toDo, complete: !toDo.complete };<br/>          }<br/>          return toDo;<br/>        })<br/>      };<br/>    case ActionType.delete:<br/>      return {<br/>        toDoList: state.toDoList.filter(toDo =&gt; toDo.id !== action.payload.id)<br/>      };<br/>    default:<br/>      throw new Error();<br/>  }<br/>};</span><span id="a5c4" class="mv lb it mr b gy na mx l my mz">export const toDoContext = React.createContext&lt;ItoDoContextInterface&gt;({<br/>  state: {<br/>    toDoList: []<br/>  },<br/>  updateToDoList: () =&gt; {}<br/>});</span><span id="0587" class="mv lb it mr b gy na mx l my mz">const { Provider } = toDoContext;</span><span id="df5f" class="mv lb it mr b gy na mx l my mz">const ToDoProvider: React.FC&lt;{ children: React.ReactNode }&gt; = ({<br/>  children<br/>}) =&gt; {<br/>  const [toDoList, updateToDoList] = React.useReducer(reducer, initialState);</span><span id="d8da" class="mv lb it mr b gy na mx l my mz">return (<br/>    &lt;Provider value={{ state: toDoList, updateToDoList }}&gt;<br/>      {children}<br/>    &lt;/Provider&gt;<br/>  );<br/>};</span><span id="1544" class="mv lb it mr b gy na mx l my mz">export default ToDoProvider;</span></pre><p id="6813" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">å¦‚æœä½ åç€æ„Ÿè§‰æœ‰ç‚¹è¶…è´Ÿè·ï¼Œä¸è¦ç´§å¼ ï¼Œå› ä¸ºæœ€å›°éš¾çš„éƒ¨åˆ†å·²ç»è¿‡å»äº†ğŸ’ªï¼Œæˆ‘ä»¬å¿«å®Œæˆäº†ã€‚</p><figure class="md me mf mg gt ju"><div class="bz fp l di"><div class="nz mi l"/></div></figure><p id="8540" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">è®©æˆ‘ä»¬æ›´æ–°æˆ‘ä»¬çš„AddToDo ( <strong class="kd iu"> AddToDo.tsx </strong>)ç»„ä»¶ï¼Œä»¥ä¾¿å®ƒæ¥å…¥æˆ‘ä»¬åˆšåˆšåˆ›å»ºçš„<strong class="kd iu"> toDoContext </strong>ã€‚</p><pre class="md me mf mg gt mq mr ms mt aw mu bi"><span id="0be2" class="mv lb it mr b gy mw mx l my mz">import * as React from "react";<br/>import { Button, Form } from "reactstrap";<br/>import uuid from "uuid";</span><span id="d5f9" class="mv lb it mr b gy na mx l my mz">/** Context */<br/>import { toDoContext } from "../contexts/ToDoContext";<br/>/** Presentation */<br/>import ErrorMessage from "../components/ErrorMessage";<br/>import { Input } from "../components/Styles";<br/>/** Custom Hooks */<br/>import useErrorHandler from "../utils/custom-hooks/ErrorHandler";<br/>/** Utils */<br/>import { ActionType } from "../custom-types";</span><span id="667c" class="mv lb it mr b gy na mx l my mz">const AddToDo: React.FC&lt;{}&gt; = () =&gt; {<br/>  const { updateToDoList } = React.useContext(toDoContext);<br/>  const { error, showError } = useErrorHandler(null);<br/>  const textInput = React.useRef&lt;HTMLInputElement&gt;(null);</span><span id="518d" class="mv lb it mr b gy na mx l my mz">const addNewToDoItem = () =&gt; {<br/>    if (textInput.current) {<br/>      const toDo = textInput.current.value;<br/>      updateToDoList({ type: ActionType.add, payload: { id: uuid(), toDo } });<br/>      textInput.current.value = "";<br/>    } else {<br/>      showError("Please type an item before clicking add.");<br/>    }<br/>  };</span><span id="6cb3" class="mv lb it mr b gy na mx l my mz">return (<br/>    &lt;Form<br/>      onSubmit={e =&gt; {<br/>        e.preventDefault();<br/>        addNewToDoItem();<br/>      }}<br/>    &gt;<br/>      &lt;Input type="text" ref={textInput} placeholder="Add to do item" /&gt;<br/>      &lt;Button type="submit" block={true}&gt;<br/>        Add<br/>      &lt;/Button&gt;<br/>      &lt;br /&gt;<br/>      {error &amp;&amp; &lt;ErrorMessage errorMessage={error} /&gt;}<br/>    &lt;/Form&gt;<br/>  );<br/>};</span><span id="6900" class="mv lb it mr b gy na mx l my mz">export default AddToDo;</span></pre><p id="db12" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">æ­£å¦‚æˆ‘ä¹‹å‰æåˆ°çš„ï¼Œæˆ‘ä»¬ä¸æƒ³ç®€å•åœ°è®°å½•æˆ‘ä»¬çš„å¾…åŠäº‹é¡¹åˆ—è¡¨ä¸­çš„é¡¹ç›®ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬åœ¨containersæ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ªç»„ä»¶ï¼Œå®ƒå°†å¾ªç¯æ˜¾ç¤ºæˆ‘ä»¬çš„é¡¹ç›®ï¼Œå¹¶å…è®¸æˆ‘ä»¬åˆ†åˆ«å•å‡»å®ƒä»¬æ¥åˆ‡æ¢å®ƒä»¬çš„å®ŒæˆçŠ¶æ€ã€‚</p><p id="bafd" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu"> ToDoList.tsx </strong></p><pre class="md me mf mg gt mq mr ms mt aw mu bi"><span id="8f93" class="mv lb it mr b gy mw mx l my mz">import * as React from "react";</span><span id="ac94" class="mv lb it mr b gy na mx l my mz">/** Context */<br/>import { toDoContext } from "../contexts/ToDoContext";<br/>/** Styles */<br/>import { ToDoItem } from "../components/Styles";<br/>/** Utils */<br/>import { ActionType, ToDoItemType } from "../custom-types";</span><span id="cc45" class="mv lb it mr b gy na mx l my mz">const ToDoList: React.FC&lt;{}&gt; = () =&gt; {<br/>  const { state, updateToDoList } = React.useContext(toDoContext);</span><span id="db4f" class="mv lb it mr b gy na mx l my mz">return (<br/>    &lt;React.Fragment&gt;<br/>      {state.toDoList.map(({ id, toDo, complete }: ToDoItemType, i: number) =&gt; {<br/>        return (<br/>          &lt;ToDoItem<br/>            key={id}<br/>            onClick={() =&gt;<br/>              updateToDoList({<br/>                type: ActionType.updateStatus,<br/>                payload: { id }<br/>              })<br/>            }<br/>            complete={complete}<br/>          &gt;<br/>            {i + 1}. {toDo}<br/>          &lt;/ToDoItem&gt;<br/>        );<br/>      })}<br/>    &lt;/React.Fragment&gt;<br/>  );<br/>};</span><span id="a46f" class="mv lb it mr b gy na mx l my mz">export default ToDoList;</span></pre><p id="09fc" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">ç°åœ¨æˆ‘ä»¬éœ€è¦ä¸€ä¸ªç»„ä»¶å°†ä»¥ä¸‹ç»„ä»¶åŒ…è£…æˆå­ç»„ä»¶:<strong class="kd iu"> RandomJoke.tsx </strong>ã€<strong class="kd iu"> AddToDo.tsx </strong>å’Œ<strong class="kd iu"> ToDoList.tsx </strong>ã€‚æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªå‡½æ•°ç»„ä»¶ï¼Œå¹¶å°†è¿™ä¸ªçˆ¶ç»„ä»¶ç§°ä¸º<strong class="kd iu"> ToDo.tsx </strong>ã€‚</p><pre class="md me mf mg gt mq mr ms mt aw mu bi"><span id="1d28" class="mv lb it mr b gy mw mx l my mz">import * as React from "react";</span><span id="e01d" class="mv lb it mr b gy na mx l my mz">/** Styles */<br/>import { Header } from "../components/Styles";</span><span id="345e" class="mv lb it mr b gy na mx l my mz">/** Components */<br/>import AddToDo from "./AddToDo";<br/>import RandomJoke from "./RandomJoke";<br/>import ToDoList from "./ToDoList";<br/>/** Presentation/UI */<br/>import { ToDoContainer } from "../components/Styles";</span><span id="83a1" class="mv lb it mr b gy na mx l my mz">function ToDo() {<br/>  return (<br/>    &lt;ToDoContainer&gt;<br/>      &lt;Header&gt;My to do list&lt;/Header&gt;<br/>      &lt;RandomJoke /&gt;<br/>      &lt;AddToDo /&gt;<br/>      &lt;ToDoList /&gt;<br/>    &lt;/ToDoContainer&gt;<br/>  );<br/>}</span><span id="ca81" class="mv lb it mr b gy na mx l my mz">export default ToDo;</span></pre><p id="bbb4" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">æœ€åï¼Œæˆ‘ä»¬å¸Œæœ›æˆ‘ä»¬çš„<strong class="kd iu"> RootContainer.tsx </strong>ç»„ä»¶<strong class="kd iu"> </strong>æ¥å…¥authä¸Šä¸‹æ–‡ï¼Œä»¥ä¾¿å½“ç”¨æˆ·é€šè¿‡èº«ä»½éªŒè¯æ—¶ï¼Œæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºå°†å‘ˆç°å¾…åŠäº‹é¡¹åˆ—è¡¨(<strong class="kd iu"> ToDo.tsx </strong>)ï¼Œå¦‚æœæœ¬åœ°å­˜å‚¨è¢«æ¸…ç©ºï¼Œç”¨æˆ·å°†è¢«æ³¨é”€ï¼Œç™»å½•(<strong class="kd iu"> Login.tsx </strong>)å°†å‘ˆç°åœ¨å±å¹•ä¸Šã€‚</p><pre class="md me mf mg gt mq mr ms mt aw mu bi"><span id="589c" class="mv lb it mr b gy mw mx l my mz">import * as React from "react";</span><span id="c027" class="mv lb it mr b gy na mx l my mz">/** Context */<br/>import { authContext } from "../contexts/AuthContext";<br/>/** Presentation */<br/>import { Wrapper } from "../components/Styles";</span><span id="0062" class="mv lb it mr b gy na mx l my mz">import Login from "./Login";<br/>import ToDo from "./ToDo";</span><span id="35fc" class="mv lb it mr b gy na mx l my mz">function RootContainer() {<br/>  const { auth } = React.useContext(authContext);<br/>  return (<br/>    &lt;Wrapper&gt;<br/>      {auth.id ? &lt;ToDo /&gt; : null}<br/>      {!auth.id &amp;&amp; &lt;Login /&gt;}<br/>    &lt;/Wrapper&gt;<br/>  );<br/>}</span><span id="6ea6" class="mv lb it mr b gy na mx l my mz">export default RootContainer;</span></pre></div><div class="ab cl nr ns hx nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="im in io ip iq"><p id="9bb9" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">ç°åœ¨æ˜¯ä½ ç­‰å¾…å’Œç¼–ç çš„æ—¶åˆ»äº†ğŸ™Œ</p><p id="71d0" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">ç»§ç»­è¿è¡Œ<code class="fe oa ob oc mr b">npm start</code></p><p id="a778" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">è¿˜æœ‰å‡ ä¸ªReacté’©å­æˆ‘ä»¬åœ¨æœ¬æ•™ç¨‹ä¸­æ²¡æœ‰çœ‹ï¼Œåˆ†åˆ«æ˜¯<a class="ae kz" href="https://reactjs.org/docs/hooks-reference.html#usecallback" rel="noopener ugc nofollow" target="_blank"> <em class="mk"> useCallback </em> </a>ï¼Œ<a class="ae kz" href="https://reactjs.org/docs/hooks-reference.html#usememo" rel="noopener ugc nofollow" target="_blank"> <em class="mk"> useMemo </em> </a>ï¼Œ<a class="ae kz" href="https://reactjs.org/docs/hooks-reference.html#useimperativehandle" rel="noopener ugc nofollow" target="_blank"><em class="mk">useImperativeHandle</em></a>ï¼Œ<a class="ae kz" href="https://reactjs.org/docs/hooks-reference.html#uselayouteffect" rel="noopener ugc nofollow" target="_blank"><em class="mk">useLayoutEffect</em></a>å’Œ<a class="ae kz" href="https://reactjs.org/docs/hooks-reference.html#usedebugvalue" rel="noopener ugc nofollow" target="_blank"><em class="mk">useDebugValue</em></a>ã€‚ç»§ç»­æ¢ç´¢å®ƒä»¬ï¼Œçœ‹çœ‹å¦‚ä½•åœ¨Reactåº”ç”¨ç¨‹åºä¸­åˆ©ç”¨å®ƒä»¬ã€‚</p><p id="6a97" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><em class="mk">ä½ å¯ä»¥åœ¨è¿™é‡Œ</em>  <em class="mk">æ‰¾åˆ°è¿™ä¸ªåº”ç”¨</em> <a class="ae kz" href="https://github.com/LukeMwila/react-hooks-by-example" rel="noopener ugc nofollow" target="_blank"> <em class="mk">çš„æºä»£ç ã€‚</em></a></p></div></div>    
</body>
</html>