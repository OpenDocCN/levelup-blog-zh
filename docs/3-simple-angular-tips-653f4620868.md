# 3 个简单的角尖

> 原文：<https://levelup.gitconnected.com/3-simple-angular-tips-653f4620868>

![](img/03c420f793d7182da7aacb83e14c886a.png)

苏珊·霍尔特·辛普森在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上的照片

在这篇博文中，我将分享任何人都可以在他们的项目中使用的最有价值和简单的技巧和窍门。不管你的项目是大是小，是老还是年轻。

# 不要订阅 Observables

用 RxJs 进行反应式编程是 Angular 中最自然的事情之一。我们都知道它是如何运作的。我们有一个可观察对象和一个订阅可观察对象的订阅者，后者向订阅者发送数据。因此，我们订阅一个可观察对象，解包它并将发出的值存储在某个类属性中，这样我们就可以在模板中使用它。

这段代码没有错，而且运行得非常好；甚至可以很好地处理退订，但是这种方法有一个缺陷。它之所以混乱，是因为代码臃肿。但是幸运的是，Angular 自带了所谓的异步管道，这是一个非常酷的特性，可以直接在模板中使用 observables。我们可以简单地绑定一个可观察对象并链接异步管道，当组件被销毁时，异步管道也会自动处理订阅和取消订阅。

如果你想做一些副作用，你可以声明一个包含一些管道操作符的管道，比如 tap，当数据被发出时执行。

# 使用行为主体

BehaviorSubjects 是 Subjects 的一个子集，它实际上已经非常强大了，因为它们允许多角色扮演。您需要知道一个可观察对象在默认情况下正在进行单播，这样每个订阅都会发出自己的值，并且没有订阅共享同一个数据流。另一方面，主题是多播的，因此任何订阅都将共享相同的数据流。这在通过存储共享状态的服务进行组件通信时尤其有用。但是有一个问题。如果您的组件依赖于您的 subject 立即发出数据，因为否则您的模板中的一些数据绑定最初会绑定到“未定义”怎么办？解决方案是 BehaviorSubject，它几乎等同于 Subject，但是有一个额外的特性，即它在被实例化时有一个初始值，当订阅时它会立即发出这个值。

# 使用路由解析器

解析器在路由中用于同步获取一些数据，并在组件被实例化之前将其传递给组件。你现在可能会想，为什么有人会这样做，而不只是在组件的 ngOnInit 生命周期挂钩中获取数据，答案是:嗯，你可以这样做，但这对 UX 不好。你想要什么？一个显示错误数据的组件，因为绑定会在最开始绑定到“未定义”上，或者你必须用 ngIf 手动保护所有的绑定，这很繁琐？或者您更愿意暂时不加载新页面，而是显示一个加载微调器？很可能，你是大多数人中的一员，更喜欢第二种变体。因此，只要数据提取正在进行，路由解析器就会阻止该过程。

(样本来自官方角度文件)

解析器完全自动地订阅和取消订阅可观察对象，并且只有当可观察对象关闭时，才加载被路由到的新组件。

(来自官方 Angular docs)

解析程序被分配给一个路径数据参数，该参数可通过 ActivatedRoute 的 data 属性在组件中进行访问。

为了添加一个装载微调器，我们必须监听路由器事件，并生成一个 if-else 来决定何时应该显示装载微调器。

# 结论

我希望你能从这篇博文中得到一些东西，对你的 Angular 项目有所帮助。如果你喜欢这篇博文，我建议你看看我在 Angular 上的其他博文。

如果你想在 Medium 上阅读无限量的文章，如果你使用我的推荐链接加入 Medium，我将不胜感激:

[](https://medium.com/@stefan.haas.privat/membership) [## 通过我的推荐链接-斯特凡·哈斯加入媒体

### 作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…

medium.com](https://medium.com/@stefan.haas.privat/membership) 

# 分级编码

感谢您成为我们社区的一员！更多内容见[级编码出版物](https://levelup.gitconnected.com/)。
跟随:[推特](https://twitter.com/gitconnected)，[领英](https://www.linkedin.com/company/gitconnected)，[通迅](https://newsletter.levelup.dev/)
**升一级正在改造理工大招聘➡️** [**加入我们的人才集体**](https://jobs.levelup.dev/talent/welcome?referral=true)