<html>
<head>
<title>How to add React Native to an existing iOS app in 2022</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在2022年将React Native添加到现有的iOS应用程序中</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-add-react-native-to-an-existing-ios-app-in-2022-97bb7d38cf96?source=collection_archive---------2-----------------------#2022-04-17">https://levelup.gitconnected.com/how-to-add-react-native-to-an-existing-ios-app-in-2022-97bb7d38cf96?source=collection_archive---------2-----------------------#2022-04-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="7312" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">关于如何在React本地站点上执行此操作的文档已经过时</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/382af89944f46be1c9f3842e7e88338e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DT5hEfgrKbRVu8_M0VEw9A.jpeg"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">作者声明:David Fekke</figcaption></figure><p id="722c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="le">原发布于</em><a class="ae lf" href="https://fek.io/blog/how-to-add-react-native-to-an-existing-i-os-app-in-2022/" rel="noopener ugc nofollow" target="_blank"><em class="le">https://fek . io</em></a><em class="le">。</em></p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="lg lh l"/></div></figure><p id="f0da" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我已经开始在我维护的现有iOS和Android应用中使用<a class="ae lf" href="https://reactnative.dev" rel="noopener ugc nofollow" target="_blank"> React Native </a>。我在React Native <a class="ae lf" href="https://www.reactnative.dev/docs/integration-with-existing-apps" rel="noopener ugc nofollow" target="_blank">文档</a>中发现的一个问题是，他们给出的添加到现有iOS应用程序的指南已经过时了。</p><h1 id="7f9e" class="li lj it bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">椰子足类</h1><p id="1e71" class="pw-post-body-paragraph jq jr it js b jt mg jv jw jx mh jz ka kb mi kd ke kf mj kh ki kj mk kl km kn im bi translated">当您向应用程序添加新模块时，React Native使用<a class="ae lf" href="https://cocoapods.org/" rel="noopener ugc nofollow" target="_blank"> Cocoapods </a>来添加iOS依赖项。Cocoapods是Apple开发生态系统的依赖管理器。自从Cocoapods推出以来，苹果已经添加了他们自己的Swift包管理器，但React Native是在此之前创建的。Cocoapods是将React Native及其' Native模块添加到iOS项目的唯一方式。</p><p id="ca89" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Cocoapods使用一个名为<code class="fe ml mm mn mo b">Podfile</code>的配置文件来指示Cocoapods依赖管理器将哪些模块添加到Xcode项目中。它通过创建一个工作空间文件，然后将项目和任何需要的模块添加到工作空间中来实现这一点。</p><p id="b1dc" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">指南中给出的用于将React Native添加到现有iOS项目的<code class="fe ml mm mn mo b">Podfile</code>将不起作用！我重复一遍。他们的<code class="fe ml mm mn mo b">Podfile</code>不会在现有的iOS项目中工作。他们有Objective-C和Swift的例子，但都不是React Native的最新版本。</p><h1 id="f9d6" class="li lj it bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">如何从2022年起添加React Native</h1><p id="a21b" class="pw-post-body-paragraph jq jr it js b jt mg jv jw jx mh jz ka kb mi kd ke kf mj kh ki kj mk kl km kn im bi translated">在这篇文章中，我假设你已经安装了Xcode。您还需要在<a class="ae lf" href="https://www.reactnative.dev/docs/environment-setup" rel="noopener ugc nofollow" target="_blank">环境设置指南</a>中为React Native CLI快速启动配置您的环境。安装程序将确保您安装了当前版本的<a class="ae lf" href="https://brew.sh/" rel="noopener ugc nofollow" target="_blank"> Homebrew </a>、<a class="ae lf" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank"> Node.js </a>，以及<code class="fe ml mm mn mo b">watchman</code>和<code class="fe ml mm mn mo b">Cocoapods</code>。我最近写了另一篇关于如何在基于M1的Mac上运行React Native <a class="ae lf" href="https://fek.io/blog/2022-04-13/how-to-setup-react-native-on-M1-mac-2022.md" rel="noopener ugc nofollow" target="_blank">设置</a>的文章。</p><h1 id="e9fb" class="li lj it bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">设置目录结构</h1><p id="2af8" class="pw-post-body-paragraph jq jr it js b jt mg jv jw jx mh jz ka kb mi kd ke kf mj kh ki kj mk kl km kn im bi translated">为您的项目创建新文件夹。这是我们保存React本机代码的地方。创建这个文件夹后，将现有的iOS项目复制到项目文件夹下的一个名为<code class="fe ml mm mn mo b">ios</code>的文件夹中。</p><h1 id="a8cb" class="li lj it bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">安装节点依赖项</h1><p id="1ac3" class="pw-post-body-paragraph jq jr it js b jt mg jv jw jx mh jz ka kb mi kd ke kf mj kh ki kj mk kl km kn im bi translated">在项目文件夹的根目录中，创建包含以下内容的package.json文件:</p><pre class="kp kq kr ks gt mp mo mq mr aw ms bi"><span id="277c" class="mt lj it mo b gy mu mv l mw mx">{<br/>  "name": "YourReactNativeApp",<br/>  "version": "1.0.0",<br/>  "private": true,<br/>  "scripts": {<br/>    "start": "yarn react-native start"<br/>  }<br/>}</span></pre><p id="9fd3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">确保您安装了<code class="fe ml mm mn mo b">yarn</code>软件包管理器。如果尚未安装，可以使用以下命令进行安装:</p><pre class="kp kq kr ks gt mp mo mq mr aw ms bi"><span id="295f" class="mt lj it mo b gy mu mv l mw mx">&gt; npm install yarn -g</span></pre><p id="f7e9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">要安装节点依赖项，可以使用以下命令:</p><pre class="kp kq kr ks gt mp mo mq mr aw ms bi"><span id="e4ba" class="mt lj it mo b gy mu mv l mw mx">&gt; yarn add react-native</span></pre><p id="68ca" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">当您运行此命令时，它将在您的终端中显示一条类似如下的消息:</p><p id="94da" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">| &gt; <a class="ae lf" href="mailto:react-native@0.68.1" rel="noopener ugc nofollow" target="_blank"> react-native@0.68.1 </a>“有未满足的对等依赖”<a class="ae lf" href="mailto:react@17.0.2" rel="noopener ugc nofollow" target="_blank"> react@ <strong class="js iu"> 17.0.2 </strong> </a>”。</p><p id="06a0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果您未满足的依赖项是react的特定版本，您将需要为消息中指定的特定版本添加React:</p><h1 id="3402" class="li lj it bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">为您的iOS应用程序设置Cocoapods</h1><p id="98bd" class="pw-post-body-paragraph jq jr it js b jt mg jv jw jx mh jz ka kb mi kd ke kf mj kh ki kj mk kl km kn im bi translated">现在您已经安装了React和React Native，将cd放入您的<code class="fe ml mm mn mo b">ios</code>子目录，并执行以下命令:</p><pre class="kp kq kr ks gt mp mo mq mr aw ms bi"><span id="855b" class="mt lj it mo b gy mu mv l mw mx">&gt; pod init</span></pre><p id="e221" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这个命令将创建一个<code class="fe ml mm mn mo b">Podfile</code>，Cocoapods使用这个配置文件向您的iOS应用程序添加依赖项。<code class="fe ml mm mn mo b">Podfile</code>应该是这样的:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="my lh l"/></div></figure><p id="5444" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">每个Xcode项目都应该有一个目标。目标是编译的目标。通常，如果您有多个平台需要支持，即MacOS、tvOS和iOS，那么每个平台都有一个目标。对于本例，我们将只修改iOS应用程序的目标。在上面的例子中，我的iOS目标叫做<code class="fe ml mm mn mo b">yourreactnativeapp</code>。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="my lh l"/></div></figure><p id="7176" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">一旦您修改了您的Podfile以包含您的目标的<code class="fe ml mm mn mo b">use_react_native!</code>函数，您现在可以运行下面的命令来添加您的React本机依赖项:</p><pre class="kp kq kr ks gt mp mo mq mr aw ms bi"><span id="a205" class="mt lj it mo b gy mu mv l mw mx">&gt; pod install</span></pre><p id="4cb9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在您使用pod install命令安装了您的依赖项之后，Cocoapods将会为您的项目创建一个工作空间(<code class="fe ml mm mn mo b">yourreactnativeapp.xcworkspace</code>)。它应该与项目文件同名。从现在开始，您将需要使用工作空间文件在Xcode中打开您的项目。</p><p id="b5df" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">你的新工作区会有两个项目，一个是你的iOS应用，另一个叫做<code class="fe ml mm mn mo b">Pods</code>。<code class="fe ml mm mn mo b">Pods</code>项目将包含在应用中运行React Native所需的所有依赖项。</p><h1 id="be46" class="li lj it bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">将React视图添加到iOS应用程序</h1><p id="1c0a" class="pw-post-body-paragraph jq jr it js b jt mg jv jw jx mh jz ka kb mi kd ke kf mj kh ki kj mk kl km kn im bi translated">既然我们已经将React原生依赖项添加到您的iOS应用程序中，我们就有了在您的应用程序中运行React原生内容所需的依赖项。让我们继续修改ViewController来显示我们的React本机应用程序:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="my lh l"/></div></figure><p id="487c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在让我们修改<code class="fe ml mm mn mo b">index.js</code>文件，如下所示:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="my lh l"/></div></figure><p id="e25d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">为了测试并确保设置正确，我们首先在项目的根目录下运行以下命令来启动Metro:</p><pre class="kp kq kr ks gt mp mo mq mr aw ms bi"><span id="d394" class="mt lj it mo b gy mu mv l mw mx">&gt; yarn start</span></pre><p id="9c62" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">一旦我们启动了Metro，我们可以再次运行我们的iOS应用程序，并导航到包含我们的<code class="fe ml mm mn mo b">RCTRootView</code>视图的ViewController。这将创建一个如下所示的屏幕:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi mz"><img src="../Images/e6e3249a001a901d0f7528a7e842184b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*e3onNbyJFGdBGerJ.png"/></div></div></figure><h1 id="4f8b" class="li lj it bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">结论</h1><p id="4a20" class="pw-post-body-paragraph jq jr it js b jt mg jv jw jx mh jz ka kb mi kd ke kf mj kh ki kj mk kl km kn im bi translated">我希望这解释了如何将React Native添加到现有的iOS应用程序中。React Native是iOS开发者可以用来构建原生应用的众多工具之一。React Native的一个好处是它是跨平台的。这使得在iOS和Android应用程序之间共享代码变得很容易。</p><div class="na nb gp gr nc nd"><a href="https://davidfekke.medium.com/how-to-set-up-react-native-on-m1-mac-2022-edition-24a0a5c27d9d" rel="noopener follow" target="_blank"><div class="ne ab fo"><div class="nf ab ng cl cj nh"><h2 class="bd iu gy z fp ni fr fs nj fu fw is bi translated">如何在M1 Mac 2022版上设置React Native</h2><div class="nk l"><h3 class="bd b gy z fp ni fr fs nj fu fw dk translated">React Native的文档不包含M1苹果硅细节</h3></div><div class="nl l"><p class="bd b dl z fp ni fr fs nj fu fw dk translated">davidfekke.medium.com</p></div></div><div class="nm l"><div class="nn l no np nq nm nr ky nd"/></div></div></a></div></div></div>    
</body>
</html>