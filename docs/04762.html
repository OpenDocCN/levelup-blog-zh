<html>
<head>
<title>JavaScript Best Practices — Comments, Nesting, and Parameters</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript最佳实践—注释、嵌套和参数</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/javascript-best-practices-comments-nesting-and-parameters-6659de54c731?source=collection_archive---------9-----------------------#2020-07-13">https://levelup.gitconnected.com/javascript-best-practices-comments-nesting-and-parameters-6659de54c731?source=collection_archive---------9-----------------------#2020-07-13</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/96231662117f59907f39fdd19a3d466f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5Tr6vnJgX0vfYe6b"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated"><a class="ae kf" href="https://unsplash.com/@hedgehog90?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">柳德米拉·德尼修</a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="fdcd" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了使代码易于阅读和维护，我们应该遵循一些最佳实践。</p><p id="0f90" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这篇文章中，我们将看看我们应该遵循的一些最佳实践，以使每个人的生活更轻松。</p><h1 id="72eb" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">我们的代码库中没有注释掉的代码</h1><p id="fac1" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们不应该在我们的代码库中注释掉代码。</p><p id="b237" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们有版本控制来记录我们的变更。</p><p id="9386" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">所以我们应该移除它们。</p><p id="94dd" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果我们有:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="9aa3" class="mq lf it mm b gy mr ms l mt mu">doStuff();<br/>// doMoreStuff();</span></pre><p id="1409" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">那么我们应该把它改写成:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="bece" class="mq lf it mm b gy mr ms l mt mu">doStuff();</span></pre><h1 id="2de2" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">没有日志注释</h1><p id="0a56" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们不应该有日志注释，因为版本控制有代码变更记录。</p><p id="1f3c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们不应该写:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="35ad" class="mq lf it mm b gy mr ms l mt mu">/**<br/> * 2019-02-03: Removed type-checking<br/> * 2018-03-14: Added add function<br/> */<br/>function add(a, b) {<br/>  return a + b;<br/>}</span></pre><p id="fdab" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们写道:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="03ad" class="mq lf it mm b gy mr ms l mt mu">function add(a, b) {<br/>  return a + b;<br/>}</span></pre><h1 id="ee16" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">没有位置标记</h1><p id="5895" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">位置标记只是噪音，我们不应该在代码中使用它们。</p><p id="ee8d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">而不是写:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="eb93" class="mq lf it mm b gy mr ms l mt mu">////////////////////////////////////////////////////////////////////////////////<br/>// initialize setup data<br/>////////////////////////////////////////////////////////////////////////////////<br/>const init = function() {<br/>  // ...<br/>};</span></pre><p id="8a30" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们写道:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="c6db" class="mq lf it mm b gy mr ms l mt mu">const init = function() {<br/>  // ...<br/>};</span></pre><h1 id="8907" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">每个文件的最大类别数</h1><p id="c713" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可能想要强制每个文件的类的最大数量，以减少文件的复杂性和责任。</p><p id="4d93" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以将类的数量限制为最多3个:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="fa15" class="mq lf it mm b gy mr ms l mt mu">class Foo {}<br/>class Bar {}<br/>class Baz {}</span></pre><h1 id="7423" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">块可以嵌套的最大深度</h1><p id="0c59" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">嵌套代码很难阅读。</p><p id="70a9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因此，我们应该尽可能地消除它们。</p><p id="d35b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一层或两层嵌套可能是可以容忍的最大值。</p><p id="4108" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，不要写</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="c58e" class="mq lf it mm b gy mr ms l mt mu">function foo() {<br/>  for (;;) { <br/>    while (true) {<br/>      if (true) { <br/>        if (true) {<br/>        }<br/>      }<br/>    }<br/>  }<br/>}</span></pre><p id="aa87" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">相反，我们写道:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="a05d" class="mq lf it mm b gy mr ms l mt mu">function foo() {<br/>  for (;;) {<br/>    <br/>  }<br/>}</span></pre><p id="2cdf" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以使用保护条款提前返回。</p><p id="3bf8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="742f" class="mq lf it mm b gy mr ms l mt mu">function foo() {<br/>  if (!cond) {<br/>    return;<br/>  }<br/>  while (true) { <br/><br/>  }<br/>}</span></pre><p id="3021" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">而不是:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="cac2" class="mq lf it mm b gy mr ms l mt mu">function foo() {<br/>  if (!cond) {<br/>    while (true) {</span><span id="6869" class="mq lf it mm b gy mv ms l mt mu">    }<br/>  }<br/>}</span></pre><p id="54ae" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们也可以使用<code class="fe mw mx my mm b">break</code>或<code class="fe mw mx my mm b">continue</code>来停止一个循环或移动到它的下一个迭代。</p><h1 id="7729" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">最大线路长度</h1><p id="3d9f" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们必须水平滚动来阅读长行。</p><p id="78ba" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因此，我们不应该写它们。</p><p id="c3e1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们不应该写:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="a8da" class="mq lf it mm b gy mr ms l mt mu">const foo = { "foo": "This is a foo.", "bar": { "qux": "This is a bar"}, "baz": "This is a baz" };</span></pre><p id="09d3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">它溢出了线。</p><p id="11be" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">相反，我们写道:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="a6ed" class="mq lf it mm b gy mr ms l mt mu">const foo = {<br/>  "foo": "This is a foo.",<br/>  "bar": {<br/>    "qux": "This is a bar"<br/>  },<br/>  "baz": "This is a baz"<br/>};</span></pre><p id="0be8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">每行都短得多，也更容易阅读。</p><p id="1cc7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以对注释做同样的事情。</p><h1 id="9d12" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">最大文件长度</h1><p id="ddaf" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">大文件很复杂，很难理解。</p><p id="de6b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因此，我们应该将它们分成更小的文件。</p><p id="7dbb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">通常建议最多300到500行。</p><h1 id="ca44" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">最大功能长度</h1><p id="0899" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们应该确保我们的函数只做一件事。</p><p id="28c2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因此，我们应该减少函数的长度。</p><p id="4a67" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="7994" class="mq lf it mm b gy mr ms l mt mu">function foo() {<br/>  let x = 0;<br/>}</span></pre><p id="a859" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这是一个简短的函数。</p><h1 id="500e" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">回调可以嵌套的最大深度</h1><p id="8a70" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们经常需要为同步和异步代码运行回调。</p><p id="ab92" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们必须运行它们中的许多来做我们想要做的所有事情。</p><p id="b646" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最糟糕的写法是把它们深深地嵌套起来。</p><p id="1372" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">所以我们不应该写这样的东西:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="4148" class="mq lf it mm b gy mr ms l mt mu">foo(function() {<br/>  bar(function() {<br/>    qux(function() {<br/>      abc(function() {</span><span id="4483" class="mq lf it mm b gy mv ms l mt mu">      });<br/>    });<br/>  });<br/>});</span></pre><p id="f2a1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这很难阅读和调试，尤其是如果我们在每个回调中有很多代码。</p><p id="20cb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们应该使用像承诺这样的替代方案。</p><h1 id="3172" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">函数定义中的最大参数数量</h1><p id="6c84" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们不应该在一个函数中有太多的参数。</p><p id="f9a2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们拥有的越多，就越难阅读。</p><p id="a038" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，不写:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="faa5" class="mq lf it mm b gy mr ms l mt mu">function foo(bar, baz, qux, abc) { <br/>  doSomething();<br/>}</span></pre><p id="ee3e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们写道:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="83bf" class="mq lf it mm b gy mr ms l mt mu">function foo({ bar, baz, qux, abc }) { <br/>  doSomething();<br/>}</span></pre><p id="05ef" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果我们需要很多参数，我们可以获取一个对象并析构它们。</p><figure class="mh mi mj mk gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mz"><img src="../Images/7ac67599b012e47e686d0dd28caa2ece.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*3gbpeSFbbdGzLF55"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">谢恩·杨在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><h1 id="83df" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">结论</h1><p id="d7ae" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们不应该注释掉代码或其他无用的注释。</p><p id="e56d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">嵌套、函数长度和参数数量应该最小化。</p><p id="9da6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">班级的数量也应该减少。</p><p id="61c5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一个文件不应该有太多行代码。</p></div></div>    
</body>
</html>