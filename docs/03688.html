<html>
<head>
<title>Useful Vue Directives — Money, Infinite Scrolling, and Truncating Text</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">有用的Vue指令——金钱、无限滚动和截断文本</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/useful-vue-directives-money-infinite-scrolling-and-truncating-text-3aa6802e2081?source=collection_archive---------16-----------------------#2020-05-22">https://levelup.gitconnected.com/useful-vue-directives-money-infinite-scrolling-and-truncating-text-3aa6802e2081?source=collection_archive---------16-----------------------#2020-05-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/f6333ad5e4693b3376d470ac2701f8a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7vDEnLTdWlkxwiS8"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">由<a class="ae kf" href="https://unsplash.com/@alexandermils?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Alexander Mils </a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="3ecd" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Vue.js是一个易于使用的web应用框架，我们可以用它来开发交互式前端应用。</p><p id="d4e6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本文中，我们将了解如何在Vue应用程序中添加金钱输入和无限滚动效果。</p><h1 id="0b31" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">虚拟货币</h1><p id="7929" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以用<code class="fe mh mi mj mk b">v-money</code>包添加一个带有美元符号或其他货币符号的输入控件。</p><p id="3c5b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要安装它，我们可以运行:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="24d9" class="mt lf it mk b gy mu mv l mw mx">npm install --save v-money</span></pre><p id="d4a1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们可以如下使用它:</p><p id="4fa6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">main.js</code>:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="cfcf" class="mt lf it mk b gy mu mv l mw mx">import Vue from "vue";<br/>import App from "./App.vue";<br/>import money from "v-money";</span><span id="d8af" class="mt lf it mk b gy my mv l mw mx">Vue.use(money, { precision: 4 });<br/>Vue.config.productionTip = false;</span><span id="1ca1" class="mt lf it mk b gy my mv l mw mx">new Vue({<br/>  render: h =&gt; h(App)<br/>}).$mount("#app");</span></pre><p id="c8eb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">App.vue</code>:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="0b5c" class="mt lf it mk b gy mu mv l mw mx">&lt;template&gt;<br/>  &lt;div&gt;<br/>    &lt;money v-model="price" v-bind="money"&gt;&lt;/money&gt;<br/>    {{price}}<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="a3ba" class="mt lf it mk b gy my mv l mw mx">&lt;script&gt;<br/>import { Money } from "v-money";</span><span id="9712" class="mt lf it mk b gy my mv l mw mx">export default {<br/>  components: { Money },<br/>  data() {<br/>    return {<br/>      price: 123.45,<br/>      money: {<br/>        decimal: ",",<br/>        thousands: ".",<br/>        prefix: "C$ ",<br/>        suffix: " #",<br/>        precision: 2,<br/>        masked: false<br/>      }<br/>    };<br/>  }<br/>};<br/>&lt;/script&gt;</span></pre><p id="46c6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在上面的代码中，我们使用了<code class="fe mh mi mj mk b">precision</code>属性来指定我们可以输入的最大小数位数。</p><p id="e606" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">此外，我们还添加了属性，其含义如下:</p><ul class=""><li id="bb2a" class="mz na it ki b kj kk kn ko kr nb kv nc kz nd ld ne nf ng nh bi translated"><code class="fe mh mi mj mk b">decimal</code> —带小数点分隔符的字符串</li><li id="37f9" class="mz na it ki b kj ni kn nj kr nk kv nl kz nm ld ne nf ng nh bi translated"><code class="fe mh mi mj mk b">thousands</code> —千位分隔符的字符串</li><li id="aa91" class="mz na it ki b kj ni kn nj kr nk kv nl kz nm ld ne nf ng nh bi translated"><code class="fe mh mi mj mk b">prefix</code>—货币符号的字符串</li><li id="134d" class="mz na it ki b kj ni kn nj kr nk kv nl kz nm ld ne nf ng nh bi translated"><code class="fe mh mi mj mk b">suffix</code> —出现在输入末尾的字符串</li><li id="bee1" class="mz na it ki b kj ni kn nj kr nk kv nl kz nm ld ne nf ng nh bi translated"><code class="fe mh mi mj mk b">masked</code> —一个布尔值，指示组件是否应包含掩码</li></ul><p id="49e9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">仅需要<code class="fe mh mi mj mk b">precision</code>。</p><h1 id="041a" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">无限卷轴</h1><p id="997e" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">应用程序经常有无限滚动的效果，每次加载一点数据。</p><p id="d390" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了方便添加无限滚动效果，我们可以使用<code class="fe mh mi mj mk b">vue-infinite-scroll</code>包。</p><p id="b7eb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以通过运行以下命令来安装它:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="ef73" class="mt lf it mk b gy mu mv l mw mx">npm install --save vue-infinite-scroll</span></pre><p id="6a4c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">那么我们可以如下使用它:</p><p id="3e8b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">main.js</code>:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="f2b8" class="mt lf it mk b gy mu mv l mw mx">import Vue from "vue";<br/>import App from "./App.vue";<br/>const infiniteScroll = require("vue-infinite-scroll");</span><span id="f74e" class="mt lf it mk b gy my mv l mw mx">Vue.use(infiniteScroll);<br/>Vue.config.productionTip = false;</span><span id="966e" class="mt lf it mk b gy my mv l mw mx">new Vue({<br/>  render: h =&gt; h(App)<br/>}).$mount("#app");</span></pre><p id="9a60" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">App.vue</code>:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="d6a4" class="mt lf it mk b gy mu mv l mw mx">&lt;template&gt;<br/>  &lt;div&gt;<br/>    &lt;div<br/>      v-infinite-scroll="onLoadMore"<br/>      infinite-scroll-disabled="busy"<br/>      infinite-scroll-distance="10"<br/>    &gt;<br/>      &lt;p v-for="n in nums"&gt;{{n}}&lt;/p&gt;<br/>    &lt;/div&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="7e1a" class="mt lf it mk b gy my mv l mw mx">&lt;script&gt;<br/>export default {<br/>  data() {<br/>    return {<br/>      busy: false,<br/>      nums: new Array(50).fill(0).map((_, i) =&gt; i),<br/>      max: 50<br/>    };<br/>  },<br/>  methods: {<br/>    onLoadMore() {<br/>      this.nums = [<br/>        ...this.nums,<br/>        ...new Array(50).fill(0).map((_, i) =&gt; i + this.max)<br/>      ];<br/>      this.max += 50;<br/>    }<br/>  }<br/>};<br/>&lt;/script&gt;</span></pre><p id="e6b6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在上面的代码中，我们使用了向页面添加更多数字的<code class="fe mh mi mj mk b">onLoadMore</code>方法。然后我们引用它作为<code class="fe mh mi mj mk b">v-infinite-scroll</code>指令的值。</p><p id="05df" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们还定义了<code class="fe mh mi mj mk b">infinite-scroll-disabled</code>和<code class="fe mh mi mj mk b">infinite-scroll-distance</code>道具。</p><p id="02ad" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果该属性的值为<code class="fe mh mi mj mk b">true</code>，则<code class="fe mh mi mj mk b">infinite-scroll-disabled</code>属性禁用无限滚动。</p><p id="7ad4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">infinite-scroll-distance</code>是一个数字，它指定了在我们传递给<code class="fe mh mi mj mk b">v-infinite-scroll</code>指令的方法运行之前，元素底部和视窗底部之间的最小距离。</p><p id="1a76" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">还有3个其他选项，分别是:</p><ul class=""><li id="6a38" class="mz na it ki b kj kk kn ko kr nb kv nc kz nd ld ne nf ng nh bi translated"><code class="fe mh mi mj mk b">infinite-scroll-immediate-check</code> —一个布尔值，表示指令应在绑定后立即检查。如果内容不够高，无法填满可滚动容器，这将非常有用。</li><li id="091a" class="mz na it ki b kj ni kn nj kr nk kv nl kz nm ld ne nf ng nh bi translated"><code class="fe mh mi mj mk b">infinite-scroll-listen-for-event</code> —当事件发出时，无限滚动将再次检查</li><li id="dfeb" class="mz na it ki b kj ni kn nj kr nk kv nl kz nm ld ne nf ng nh bi translated"><code class="fe mh mi mj mk b">infinite-scroll-throttle-delay</code> —下一次检查和当前时间之间的间隔，以毫秒为单位。</li></ul><figure class="ml mm mn mo gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nn"><img src="../Images/7f5790153cc19e3f3b3779dbac0cce42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*32okAMVyBkrq0lZr"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">照片由<a class="ae kf" href="https://unsplash.com/@fprado?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">费利克斯·普拉多</a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><h1 id="6ddc" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">Vue-Clampy</h1><p id="dba3" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated"><code class="fe mh mi mj mk b">vue-clampy</code>让我们截断元素内部的内容，并在末尾添加省略号。</p><p id="429a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以通过运行以下命令来安装它:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="4429" class="mt lf it mk b gy mu mv l mw mx">npm install --save @clampy-js/vue-clampy</span></pre><p id="b61e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们可以通过写来使用它:</p><p id="f25c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">main.js</code>:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="d44e" class="mt lf it mk b gy mu mv l mw mx">import Vue from "vue";<br/>import App from "./App.vue";<br/>import clampy from "<a class="ae kf" href="http://twitter.com/clampy" rel="noopener ugc nofollow" target="_blank">@clampy</a>-js/vue-clampy";</span><span id="01b2" class="mt lf it mk b gy my mv l mw mx">Vue.use(clampy);<br/>Vue.config.productionTip = false;</span><span id="d686" class="mt lf it mk b gy my mv l mw mx">new Vue({<br/>  render: h =&gt; h(App)<br/>}).$mount("#app");</span></pre><p id="93d4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">App.vue</code>:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="5383" class="mt lf it mk b gy mu mv l mw mx">&lt;template&gt;<br/>  &lt;div&gt;<br/>    &lt;div v-clampy="3"&gt;{{text}}&lt;/div&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="f98f" class="mt lf it mk b gy my mv l mw mx">&lt;script&gt;<br/>import clampy from "@clampy-js/vue-clampy";<br/>export default {<br/>  data() {<br/>    return {<br/>      text: "foo ".repeat(200).trim()<br/>    };<br/>  },<br/>  directives: {<br/>    clampy<br/>  }<br/>};<br/>&lt;/script&gt;</span></pre><p id="1332" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在上面的代码中，我们添加了<code class="fe mh mi mj mk b">v-clamp</code>指令，并将值设置为3，以截断3行后的文本。</p><p id="54d1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们也可以按如下方式更改截断字符:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="8955" class="mt lf it mk b gy mu mv l mw mx">import Vue from "vue";<br/>import App from "./App.vue";<br/>import clampy from "@clampy-js/vue-clampy";</span><span id="f4dc" class="mt lf it mk b gy my mv l mw mx">Vue.use(clampy, {<br/>  truncationChar: "✂️"<br/>});<br/>Vue.config.productionTip = false;</span><span id="4e79" class="mt lf it mk b gy my mv l mw mx">new Vue({<br/>  render: h =&gt; h(App)<br/>}).$mount("#app");</span></pre><h1 id="e257" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">结论</h1><p id="024e" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">通过让我们修改各种选项来创建我们的货币输入，这个<code class="fe mh mi mj mk b">v-money</code>包让我们可以轻松地添加货币输入。</p><p id="13fb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以使用<code class="fe mh mi mj mk b">vue-infinite-scroll</code>指令添加无限滚动效果，以便在滚动到底部时加载更多数据</p><p id="2633" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">vue-clampy</code>包让我们将文本截短到给定的行数。</p></div></div>    
</body>
</html>