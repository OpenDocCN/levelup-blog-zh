<html>
<head>
<title>Building a Calendar with Eleventy and CSS Grid</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Eleventy和CSS网格构建日历</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/building-a-calendar-with-eleventy-and-css-grid-febef21eb246?source=collection_archive---------10-----------------------#2022-05-06">https://levelup.gitconnected.com/building-a-calendar-with-eleventy-and-css-grid-febef21eb246?source=collection_archive---------10-----------------------#2022-05-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="e6e5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这不是什么秘密，我是静态网站的超级粉丝，并且使用<a class="ae kl" href="https://www.11ty.dev/" rel="noopener ugc nofollow" target="_blank"> Eleventy </a> (11ty)来构建它们。它让网站建设(不仅仅是基础网站)变得超级简单。</p><p id="7ba2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我和11ty一起建立的第一批网站之一是<a class="ae kl" href="https://birkscinema.co.uk/" rel="noopener ugc nofollow" target="_blank"> Birks Cinema </a>网站(我是该网站的受托人)——这是一个小型独立电影院、社区中心和咖啡馆，位于我居住的小村庄。11ty完全符合要求。该网站从各种来源获取数据——一个API的电影，另一个API的事件，第三个API的菜单，第四个API的流媒体视频。多亏了一个漂亮的Github动作，网站在一天中的预定时间更新(重建)以反映电影和事件的变化。</p><p id="4d75" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于11ty，所有这些都相对简单。因为11ty是一个静态站点生成器，所以整个站点都托管在<a class="ae kl" href="https://www.netlify.com/" rel="noopener ugc nofollow" target="_blank"> Netlify </a>上，这使得它非常具有成本效益(适用于免费计划)和极高的性能(在<a class="ae kl" href="https://pagespeed.web.dev/report?url=https%3A%2F%2Fbirkscinema.co.uk%2F&amp;form_factor=mobile" rel="noopener ugc nofollow" target="_blank"> PageSpeed Insights </a>上得分99+)。</p><p id="3af1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">由于许多内容(电影和社区活动)基于日期和时间，我们需要一个动态日历来显示每天的电影和活动。下面是我如何使用11ty和CSS Grid构建一个动态日历。</p><h1 id="faf5" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">数据</h1><p id="f654" class="pw-post-body-paragraph jn jo iq jp b jq lk js jt ju ll jw jx jy lm ka kb kc ln ke kf kg lo ki kj kk ij bi translated">要创建日期列表，我们首先需要创建一个日期数据源。我们将使用<a class="ae kl" href="https://www.11ty.dev/docs/data-global/" rel="noopener ugc nofollow" target="_blank"> 11ty的全局数据</a>来完成这项工作，并创建一个数据文件来导出一个日期数组。它输出什么日期完全由你决定。我选择导出未来6个月的一组日期，但是您可以随意导出任何日期范围。</p><p id="c89e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在您的<code class="fe lp lq lr ls b">dir.data</code>目录下创建一个名为<code class="fe lp lq lr ls b">dates.js</code>的文件(默认为<code class="fe lp lq lr ls b">_data</code>)。在这个文件中，我们将使用<code class="fe lp lq lr ls b">date-fns</code>库来创建一个日期数组(在本例中是接下来的6个月)。</p><pre class="lt lu lv lw gt lx ls ly lz aw ma bi"><span id="434a" class="mb kn iq ls b gy mc md l me mf">const eachDay = require(‘date-fns/eachDayOfInterval’);<br/>const addMonths = require(‘date-fns/addMonths’);</span><span id="409b" class="mb kn iq ls b gy mg md l me mf">module.exports = () =&gt; {<br/>  const dateRange = eachDay({start: new Date(), end: addMonths(new Date(), 6) });</span><span id="720f" class="mb kn iq ls b gy mg md l me mf">  return dateRange;<br/>}</span></pre><p id="d59a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有了这些全局数据，我们现在可以在任何模板中使用<code class="fe lp lq lr ls b">dates</code>变量输出一个日期列表。例如:</p><pre class="lt lu lv lw gt lx ls ly lz aw ma bi"><span id="0f5a" class="mb kn iq ls b gy mc md l me mf">{% for dateItem in dates %}<br/>  {{ dateItem }}<br/>{% endfor %}</span></pre><p id="0fa3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">将输出未来6个月每天的日期数组。</p><h1 id="8f2a" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">一个简单的帮助过滤器</h1><p id="863b" class="pw-post-body-paragraph jn jo iq jp b jq lk js jt ju ll jw jx jy lm ka kb kc ln ke kf kg lo ki kj kk ij bi translated">接下来，我们将创建一个简单的助手过滤器来格式化日期。这将允许我们将<code class="fe lp lq lr ls b">dates</code>数组中的日期格式化成我们想要的任何格式。我们将再次使用非常有用的<code class="fe lp lq lr ls b">date-fns</code>库来完成这个任务。</p><pre class="lt lu lv lw gt lx ls ly lz aw ma bi"><span id="240f" class="mb kn iq ls b gy mc md l me mf">const format = require(‘date-fns/format’);</span><span id="e63b" class="mb kn iq ls b gy mg md l me mf">const formatDate = (date, formatStr) =&gt; {<br/>  return format(date, formatStr);<br/>}</span><span id="4f66" class="mb kn iq ls b gy mg md l me mf">eleventyConfig.addFilter(‘formatDate’, formatDate);</span></pre><p id="0e5d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个<code class="fe lp lq lr ls b">formatDate</code>过滤器允许我们传递一个日期(来自我们的<code class="fe lp lq lr ls b">dates</code>全局数据)并以我们喜欢的任何方式格式化它。例如:</p><pre class="lt lu lv lw gt lx ls ly lz aw ma bi"><span id="5e3c" class="mb kn iq ls b gy mc md l me mf">{{ dateString | formatDate(‘MM/dd/yyyy’)) }}    // 05/06/2022</span></pre><h1 id="7bec" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">日历</h1><p id="8e02" class="pw-post-body-paragraph jn jo iq jp b jq lk js jt ju ll jw jx jy lm ka kb kc ln ke kf kg lo ki kj kk ij bi translated">现在我们有了日期，我们可以创建日历了。在其中一个模板中添加日历的基本模板代码。</p><pre class="lt lu lv lw gt lx ls ly lz aw ma bi"><span id="e3aa" class="mb kn iq ls b gy mc md l me mf">// HTML </span><span id="38df" class="mb kn iq ls b gy mg md l me mf">&lt;ul class="calendar"&gt;<br/>{% for dateItem in dates %}<br/>  &lt;li {% if loop.index == 1%}style="grid-column-start: {{ dateItem | formatDate(‘c’) }}"{% endif %}&gt;<br/>    {{ dateItem | formatDate(‘MM/dd/yyyy’) }}<br/>  &lt;/li&gt;<br/>{% endfor %}<br/>&lt;/ul&gt;</span><span id="5a46" class="mb kn iq ls b gy mg md l me mf">// CSS</span><span id="dc5a" class="mb kn iq ls b gy mg md l me mf">.calendar {<br/>  display: grid;<br/>  grid-template-columns: repeat(7, 1fr);<br/>}</span></pre><p id="0f58" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">内嵌样式可能引起了你的注意。这样做的目的是将第一天放在日历上正确的列中。例如，如果<code class="fe lp lq lr ls b">dates</code>数组中的第一天是星期三，我们希望日历上的第一天放在第4列(因为星期三是一周的第4天，使用的是Sun-Sat日历)。<code class="fe lp lq lr ls b">c</code>格式返回一周的第n天(1表示星期日，2表示星期一，3表示星期二，等等)，这将把第一天放在日历的正确列中。</p><p id="9eea" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这就是我们用Eleventy和CSS Grid制作的工作日历。</p><figure class="lt lu lv lw gt mi gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi mh"><img src="../Images/5bb9b71c771cbcced07c987e364ecc20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YxnZC5bOvGMVoPP4RiWVfA.png"/></div></div></figure><h1 id="0092" class="km kn iq bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">完整演示</h1><p id="6976" class="pw-post-body-paragraph jn jo iq jp b jq lk js jt ju ll jw jx jy lm ka kb kc ln ke kf kg lo ki kj kk ij bi translated">查看一个<a class="ae kl" href="https://bretts-eleventy-playground.netlify.app/calendar/" rel="noopener ugc nofollow" target="_blank">工作演示</a>，源代码可以在我的<a class="ae kl" href="https://github.com/brettdewoody/eleventy-playground" rel="noopener ugc nofollow" target="_blank">十一游乐场回购</a>中找到。</p><figure class="lt lu lv lw gt mi gh gi paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="gh gi mp"><img src="../Images/0c3d559b31e548d1ec8bbf7e572bc67d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Mv4GkyaA2C4b5DKsfaof2g.jpeg"/></div></div><figcaption class="mq mr gj gh gi ms mt bd b be z dk translated">照片由<a class="ae kl" href="https://unsplash.com/@priscilladupreez?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">普里西拉·杜·普里兹</a>在<a class="ae kl" href="https://unsplash.com/s/photos/calendar-digital?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure></div></div>    
</body>
</html>