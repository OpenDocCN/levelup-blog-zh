<html>
<head>
<title>Populate your AWS Kinesis data stream with Python: A short guide</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python填充AWS Kinesis数据流:一个简短的指南</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/populate-your-aws-kinesis-data-stream-with-python-a-short-guide-a9c67cc80866?source=collection_archive---------2-----------------------#2020-12-02">https://levelup.gitconnected.com/populate-your-aws-kinesis-data-stream-with-python-a-short-guide-a9c67cc80866?source=collection_archive---------2-----------------------#2020-12-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/ea978a8dcaa9e0214903aab912376011.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-bcrAFvNDuf0XtA7"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">由<a class="ae kc" href="https://unsplash.com/@pmpablo?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Pablo Molina </a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="5a0b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你正在使用AWS(就像我经常使用的那样)，你可能对AWS的Kinesis队列服务很熟悉。<a class="ae kc" href="https://aws.amazon.com/kinesis/" rel="noopener ugc nofollow" target="_blank">据亚马逊网站</a>报道，“亚马逊Kinesis数据流是一种可扩展且持久的实时数据流服务，可以每秒钟从数十万个来源中持续捕获数千兆字节的数据。”更重要的是，Kinesis可以与亚马逊的其他数据驱动服务、Lambda等无服务器应用程序、数据仓库等无缝协作。</p><p id="d0fe" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我将提供一个简短的代码示例，说明如何将消息推入Kinesis数据流，并解释如何做到这一点，尽管我不认为有太多需要解释的，因为它真的非常简单！</p></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><h1 id="31ff" class="li lj iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">但是首先，让我们来看看你需要做些什么！</h1><p id="8df9" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">您将需要以下各项(显然，除了连接到互联网之外！)连接到Kinesis:</p><ol class=""><li id="0ef3" class="ml mm iq kf b kg kh kk kl ko mn ks mo kw mp la mq mr ms mt bi translated">你的AWS证书。自然地，当你连接到你的Kinesis流时，你会想要一些安全，所以随着安全而来的是凭证。对于我们的例子，我们将使用一个API密钥和秘密。您应该能够通过AWS IAM服务生成这些。</li><li id="fff5" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">以下软件包安装在您的虚拟环境或Docker容器中(如果您使用Docker):</li></ol><pre class="mz na nb nc gt nd ne nf ng aw nh bi"><span id="c3c1" class="ni lj iq ne b gy nj nk l nl nm">json<br/>uuid<br/>boto3</span></pre><ol class=""><li id="0c2b" class="ml mm iq kf b kg kh kk kl ko mn ks mo kw mp la mq mr ms mt bi translated"><code class="fe nn no np ne b">json</code>是处理web开发的主要工具，如果你正在阅读这篇文章，你很可能已经遇到过这个包。</li><li id="67dc" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">在许多处理数据库的设置中，T1是一个非常有用和常用的包。如果你已经这样做了，你可能已经遇到了这个。</li><li id="d0ce" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated"><code class="fe nn no np ne b">boto3</code>是亚马逊网络服务的助手包，让连接到它的各种服务变得轻而易举。如果你和Kinesis一起工作或者想和Kinesis一起工作，不要重新发明轮子；已经拿到<code class="fe nn no np ne b">boto3</code>了！</li></ol><p id="26a9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">就这样…</p><h1 id="f968" class="li lj iq bd lk ll nq ln lo lp nr lr ls lt ns lv lw lx nt lz ma mb nu md me mf bi translated">我们来看看代码！</h1><p id="c9bc" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">让我们快速看一下助手类的代码:</p><figure class="mz na nb nc gt jr"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="d8e6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这个助手主要帮助连接到Kinesis，并添加一个记录。还有什么好说的？</p><p id="8151" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用这个助手将记录上传到Kinesis时，有几件事你需要注意:</p><ol class=""><li id="7661" class="ml mm iq kf b kg kh kk kl ko mn ks mo kw mp la mq mr ms mt bi translated">由于<code class="fe nn no np ne b">boto3</code>助手不会自动将python字典编码成字符串形式，助手将运行<code class="fe nn no np ne b">json.dumps</code>将其转换成fit。不要自己编码，因为这样会导致不可思议。</li><li id="8c52" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">在这一点上，如果你正在使用一个服务或运行某种处理来读取Kinesis数据，不要忘记解码数据，因为它是base64编码的。这相当简单，但超出了本文的范围，所以我们在这里跳过它。</li></ol><p id="546f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你如何使用这个助手将记录上传到Kinesis？简单！</p><pre class="mz na nb nc gt nd ne nf ng aw nh bi"><span id="6958" class="ni lj iq ne b gy nj nk l nl nm">from kinesis_helper import KinesisStream</span><span id="63b9" class="ni lj iq ne b gy nx nk l nl nm">data = {'my': 'data'}<br/>stream = KinesisStream('stream-name')<br/>stream.send_stream(data=data)</span></pre></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><p id="a50d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">就这样了！感谢您通读这篇文章。</p><p id="d479" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你也必须使用Elasticsearch，别忘了看看我写的关于如何使用它的文章！ <a class="ae kc" href="https://angysmark.medium.com/" rel="noopener">我还发表了一个关于优化Django的迷你系列文章，所以如果你想提高你的Django服务器的性能，就去看看吧！</a></p></div></div>    
</body>
</html>