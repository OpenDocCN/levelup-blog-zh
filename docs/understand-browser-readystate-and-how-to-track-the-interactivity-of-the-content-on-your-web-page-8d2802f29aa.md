# äº†è§£æµè§ˆå™¨å°±ç»ªçŠ¶æ€ä»¥åŠå¦‚ä½•è·Ÿè¸ªç½‘é¡µå†…å®¹çš„äº¤äº’æ€§

> åŸæ–‡ï¼š<https://levelup.gitconnected.com/understand-browser-readystate-and-how-to-track-the-interactivity-of-the-content-on-your-web-page-8d2802f29aa>

## äº†è§£å¦‚ä½•å¤„ç†æµè§ˆå™¨äº‹ä»¶å’Œæ–‡æ¡£çš„çŠ¶æ€ï¼Œä»¥ä¾¿è¿›è¡ŒåŠ è½½ã€äº¤äº’å’Œå®Œæˆ

![](img/adfed8c65175f3b7553d66f13fb18f51.png)

æ–‡æ¡£çš„ä¸åŒå°±ç»ªçŠ¶æ€

å¯ä»¥ä½¿ç”¨`document`å¯¹è±¡çš„`readyState`å±æ€§æ¥è®¿é—®æ–‡æ¡£çš„å½“å‰çŠ¶æ€ã€‚`document.readyState`å‘Šè¯‰æˆ‘ä»¬é¡µé¢åŠ è½½çš„çŠ¶æ€ã€‚

æœ‰ 3 ç§ä¸åŒçš„å¯èƒ½çŠ¶æ€:

*   `**loading**` â€”æ­£åœ¨åŠ è½½æ–‡æ¡£(æ­£åœ¨ä¸‹è½½/è§£æ`.html`æ–‡ä»¶)
*   `**interactive**` â€”åœ¨è¿™ç§çŠ¶æ€ä¸‹ï¼ŒDOM è¢«åŠ è½½å¹¶å¯è®¿é—®ã€‚ç„¶è€Œï¼Œåƒå›¾åƒã€æ ·å¼è¡¨å’Œ JavaScript æ–‡ä»¶è¿™æ ·çš„èµ„æºè¿˜æ²¡æœ‰å®Œæˆä¸‹è½½/åŠ è½½/è§£æã€‚
*   `**complete**` â€”æ–‡æ¡£å’Œå›¾åƒ/æ ·å¼è¡¨ç­‰æ‰€æœ‰èµ„æºå·²åŠ è½½å®Œæ¯•ã€‚

è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªä¾‹å­ã€‚æˆ‘ä»¬æœ‰ä¸€ä¸ªç½‘ç«™`gitconnected.com`ï¼Œè®©æˆ‘ä»¬æ¯”è¾ƒä¸€ä¸‹åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ URL å¹¶æŒ‰å›è½¦é”®æ—¶çš„`readyState`ã€‚

# 1.è£…è´§

ä»æœåŠ¡å™¨ä¸‹è½½`index.html`æ–‡ä»¶(å¦‚æœæ²¡æœ‰æŒ‡å®šï¼Œè¿™æ˜¯é»˜è®¤å€¼)å¹¶è§£æå®ƒã€‚å¦‚æœæ‚¨åŒ…å«äº†ä»»ä½•`script`æ ‡ç­¾ï¼Œé‚£ä¹ˆè¿™äº›æ ‡ç­¾ä¹Ÿä¼šè¢«ä¸‹è½½ã€è§£æå’Œæ‰§è¡Œã€‚

![](img/b895ff7467a6fc3ea98421e7f17fe316.png)

ä¸€æ—¦åŠ è½½äº† HTML æ–‡ä»¶ï¼Œ`readyState`å°±å˜æˆäº†`interactive`ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨`readystatechange`äº‹ä»¶æ¥æ£€æµ‹è¿™ä¸€ç‚¹ã€‚

# 2.ç›¸äº’ä½œç”¨çš„

åœ¨`interactive`çŠ¶æ€ä¸‹ï¼Œä¸‹è½½ css/image æ–‡ä»¶ç­‰é™„åŠ æ–‡ä»¶ã€‚ä¸€æ—¦`readyState`çŠ¶æ€ä¸º`interactive`ï¼Œè¿™æ„å‘³ç€ DOM å·²ç»åŠ è½½ï¼Œä½†æ˜¯èµ„æºæ­£åœ¨ä¸‹è½½ã€‚å½“`readyState`ä»`loading`å˜ä¸º`interactive`æ—¶ï¼Œä¹Ÿè§¦å‘`DOMContentLoaded`äº‹ä»¶ã€‚

![](img/86dbc954cff6d14788d383e3c224f393.png)

äº¤äº’çŠ¶æ€

ä¸€æ—¦ä¸‹è½½å¹¶è§£æå®Œæ‰€æœ‰æ–‡ä»¶ï¼Œæ–‡æ¡£`readystate`å°†å˜æˆ`complete`ã€‚åœ¨è¿™ç§çŠ¶æ€ä¸‹ï¼Œé¡µé¢çš„æ‰€æœ‰èµ„æºéƒ½æ˜¯å¯ç”¨çš„ã€‚

# 3.å®Œæˆ

å½“`readyState`æ›´æ”¹ä¸º`complete`æ—¶ï¼Œæ„å‘³ç€æ–‡æ¡£ç°åœ¨è¢«è§£æå’ŒåŠ è½½**å’Œ**æ‰€æœ‰å·²çŸ¥çš„é™„åŠ èµ„æºï¼Œå¦‚ CSSã€images å’Œ JS ä¹Ÿå·²ç»è¢«è§£æå’ŒåŠ è½½ã€‚

# `readyStateChange`äº‹ä»¶

ä¸ºäº†æ£€æµ‹çŠ¶æ€å˜åŒ–ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ–‡æ¡£ä¸­æ·»åŠ `readyStateChange`äº‹ä»¶ç›‘å¬å™¨ã€‚

```
document.addEventListener('readystatechange', function(ev) {
    console.log(**document.readyState**)
});
```

ä¸Šè¿°çŠ¶æ€çš„å®Œæ•´ç¤ºä¾‹:

å‚è€ƒ: [MDN](https://developer.mozilla.org/en-US/docs/Web/API/Document/readyState)

è·Ÿéš [Javascript å‰æ™®ğŸš™ğŸ’¨](https://medium.com/u/f9ffc26e7e69?source=post_page-----8d2802f29aa--------------------------------)ã€‚