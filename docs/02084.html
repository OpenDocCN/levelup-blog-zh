<html>
<head>
<title>10 Git Tips To Save Time And Improve Your Workflow</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">节省时间和改善工作流程的10个Git技巧</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/10-git-tips-to-save-time-and-improve-your-workflow-db45877a1152?source=collection_archive---------15-----------------------#2020-02-17">https://levelup.gitconnected.com/10-git-tips-to-save-time-and-improve-your-workflow-db45877a1152?source=collection_archive---------15-----------------------#2020-02-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/5d84feb0f32d7ed1923b5afe7add791e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8DXG4fjX3YXwqQRhE_xcZw.jpeg"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated"><a class="ae kf" href="https://unsplash.com/@joaosilas?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">乔·塞拉斯</a>在<a class="ae kf" href="https://unsplash.com/s/photos/history?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="0dd7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Git，<em class="le">愚蠢的内容追踪器</em>根据它的<a class="ae kf" href="https://manpages.debian.org/stretch/git-man/git.1.en.html" rel="noopener ugc nofollow" target="_blank">联机帮助页</a>，有很多特性，有些可能令人生畏。所以我们一遍又一遍地使用我们能记住的几个命令，而不是利用赋予我们的所有能力。</p><p id="fb64" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这篇文章也有中文版本:<a class="ae kf" href="https://www.infoq.cn/article/tgdOxMBqYHoVslvlZqxT" rel="noopener ugc nofollow" target="_blank">https://www.infoq.cn/article/tgdOxMBqYHoVslvlZqxT</a></p></div><div class="ab cl lf lg hx lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="im in io ip iq"><h1 id="bb45" class="lm ln it bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">技巧#1:改进您的配置</h1><p id="1867" class="pw-post-body-paragraph kg kh it ki b kj mk kl km kn ml kp kq kr mm kt ku kv mn kx ky kz mo lb lc ld im bi translated">Git在全球、用户和本地级别上都是高度可配置的。</p><p id="606c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae kf" href="https://git-scm.com/docs/git-config" rel="noopener ugc nofollow" target="_blank">https://git-scm.com/docs/git-config</a></p><h2 id="c685" class="mp ln it bd lo mq mr dn ls ms mt dp lw kr mu mv ma kv mw mx me kz my mz mi na bi translated">查找顺序</h2><p id="5c59" class="pw-post-body-paragraph kg kh it ki b kj mk kl km kn ml kp kq kr mm kt ku kv mn kx ky kz mo lb lc ld im bi translated">每个设置都可以被覆盖:</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="0bc8" class="mp ln it ng b gy nk nl l nm nn">$CWD/.git/config<br/>    ▼ ▼ ▼<br/>$HOME/.gitconfig`<br/>    ▼ ▼ ▼<br/>$HOME/.config/git/config<br/>    ▼ ▼ ▼<br/>/etc/gitconfig</span></pre><h2 id="f5f6" class="mp ln it bd lo mq mr dn ls ms mt dp lw kr mu mv ma kv mw mx me kz my mz mi na bi translated">更改设置</h2><p id="c76f" class="pw-post-body-paragraph kg kh it ki b kj mk kl km kn ml kp kq kr mm kt ku kv mn kx ky kz mo lb lc ld im bi translated">使用您最喜欢的编辑器或使用CLI编辑任何文件:</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="cf18" class="mp ln it ng b gy nk nl l nm nn"># GLOBAL SETTINGS<br/>git <strong class="ng iu">config --global <em class="le">&lt;keypath&gt; &lt;value&gt;</em></strong></span><span id="ea36" class="mp ln it ng b gy no nl l nm nn"># LOCAL SETTINGS<br/>git <strong class="ng iu">config <em class="le">&lt;keypath&gt; &lt;value&gt;</em></strong></span></pre><p id="0344" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果值包含任何空白字符，则需要用引号引起来。</p><h2 id="fe0e" class="mp ln it bd lo mq mr dn ls ms mt dp lw kr mu mv ma kv mw mx me kz my mz mi na bi translated">显示当前设置</h2><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="6e40" class="mp ln it ng b gy nk nl l nm nn"># SHOW CURRENT SETTINGS AND THEIR ORIGIN<br/>git <strong class="ng iu">config --list --show-origin</strong></span></pre><h2 id="904a" class="mp ln it bd lo mq mr dn ls ms mt dp lw kr mu mv ma kv mw mx me kz my mz mi na bi translated">有用的配置设置</h2><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="4afa" class="mp ln it ng b gy nk nl l nm nn"># SET YOUR IDENTITY<br/>git <strong class="ng iu">config --global user.name <em class="le">"&lt;your name&gt;"</em></strong><br/>git <strong class="ng iu">config --global user.email</strong> <em class="le">&lt;your email&gt;</em></span><span id="87a9" class="mp ln it ng b gy no nl l nm nn"># PREFERRED EDITOR<br/>git <strong class="ng iu">config --global <em class="le">core.editor vim</em></strong></span><span id="da8b" class="mp ln it ng b gy no nl l nm nn"># CREDENTIALS CACHE<br/># WINDOWS<br/>git <strong class="ng iu">config --global <em class="le">credential.helper manager</em></strong></span><span id="b343" class="mp ln it ng b gy no nl l nm nn"># LINUX (timeout in seconds)<br/>git <strong class="ng iu">config --global <em class="le">credential.helper "cache --timeout=3600"</em></strong></span><span id="073d" class="mp ln it ng b gy no nl l nm nn"># MACOS<br/>git<strong class="ng iu"> config --global <em class="le">credential.helper osxkeychain</em></strong></span></pre><p id="3aac" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae kf" href="https://git-scm.com/docs/gitcredentials" rel="noopener ugc nofollow" target="_blank">https://git-scm.com/docs/gitcredentials</a></p></div><div class="ab cl lf lg hx lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="im in io ip iq"><h1 id="13bb" class="lm ln it bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">技巧2:别名</h1><p id="0e88" class="pw-post-body-paragraph kg kh it ki b kj mk kl km kn ml kp kq kr mm kt ku kv mn kx ky kz mo lb lc ld im bi translated">要保存常用的git命令，请创建一个别名:</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="aaae" class="mp ln it ng b gy nk nl l nm nn"># CREATE AN ALIAS<br/>git <strong class="ng iu">config --global <em class="le">alias.&lt;alias-name&gt; "&lt;git command&gt;"</em></strong></span><span id="52e9" class="mp ln it ng b gy no nl l nm nn"># USE AN ALIAS<br/>git <strong class="ng iu"><em class="le">&lt;alias-name&gt; &lt;more optional arguments&gt;</em></strong></span></pre><h2 id="35d9" class="mp ln it bd lo mq mr dn ls ms mt dp lw kr mu mv ma kv mw mx me kz my mz mi na bi translated">有用的别名</h2><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="a653" class="mp ln it ng b gy nk nl l nm nn"># UNDO LAST COMMIT<br/>git <strong class="ng iu">config --global <em class="le">alias.undo "reset --soft HEAD^"</em></strong></span><span id="28ee" class="mp ln it ng b gy no nl l nm nn"># AMEND STAGED CHANGES TO LAST COMMIT (keep commit message)<br/>git <strong class="ng iu">config --global <em class="le">alias.amend "commit --amend --no-edit</em></strong><em class="le">"</em></span><span id="59aa" class="mp ln it ng b gy no nl l nm nn"># COMPACTER STATUS OUTPUT<br/>git <strong class="ng iu">config --global <em class="le">alias.st "status -sb"</em></strong></span><span id="7d17" class="mp ln it ng b gy no nl l nm nn"># COLORED LOG WITH GRAPH<br/>git <strong class="ng iu">config --global <em class="le">alias.lg "log --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&lt;%an&gt;%Creset'"</em></strong></span><span id="74dd" class="mp ln it ng b gy no nl l nm nn"># REMOVE ALL MERGED BRANCHES<br/>git <strong class="ng iu">config --global <em class="le">alias.rmb "!git branch --merged | grep -v '*' | xargs -n 1 git branch -d"</em></strong></span><span id="8289" class="mp ln it ng b gy no nl l nm nn"># RANK CONTRIBUTERS<br/>git config --global alias.rank "shortlog -n -s --no-merges"</span></pre></div><div class="ab cl lf lg hx lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="im in io ip iq"><h1 id="b3a9" class="lm ln it bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">技巧#3:查找提交和变更</h1><h2 id="2dd4" class="mp ln it bd lo mq mr dn ls ms mt dp lw kr mu mv ma kv mw mx me kz my mz mi na bi translated">通过提交消息</h2><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="9594" class="mp ln it ng b gy nk nl l nm nn"># BY COMMIT MESSAGE (all branches)<br/>git <strong class="ng iu">log --all --grep=<em class="le">'&lt;search term&gt;'</em></strong></span><span id="7403" class="mp ln it ng b gy no nl l nm nn"># BY COMMIT MESSAGE (include reflog)<br/>git <strong class="ng iu">log -g --grep=<em class="le">'&lt;search term&gt;'</em></strong></span></pre><h2 id="d041" class="mp ln it bd lo mq mr dn ls ms mt dp lw kr mu mv ma kv mw mx me kz my mz mi na bi translated">通过改变</h2><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="30f5" class="mp ln it ng b gy nk nl l nm nn"># BY CONTENT OF CHANGES<br/>git <strong class="ng iu">log -S <em class="le">'&lt;search term&gt;'</em></strong></span></pre><h2 id="0fa7" class="mp ln it bd lo mq mr dn ls ms mt dp lw kr mu mv ma kv mw mx me kz my mz mi na bi translated">按日期</h2><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="5f08" class="mp ln it ng b gy nk nl l nm nn"># BY DATE RANGE<br/>git <strong class="ng iu">log --after=<em class="le">'DEC 15 2019'</em> --until=<em class="le">'JAN 10 2020'</em></strong></span></pre></div><div class="ab cl lf lg hx lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="im in io ip iq"><h1 id="a3ee" class="lm ln it bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">技巧4:添加大块</h1><p id="efad" class="pw-post-body-paragraph kg kh it ki b kj mk kl km kn ml kp kq kr mm kt ku kv mn kx ky kz mo lb lc ld im bi translated">参数<code class="fe np nq nr ng b">--patch / -p</code>将交互地存放块，而不是仅仅用<code class="fe np nq nr ng b">git add &lt;filepath&gt;</code>添加文件的所有更改。</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="5856" class="mp ln it ng b gy nk nl l nm nn"># Patch Commands</span><span id="403f" class="mp ln it ng b gy no nl l nm nn">y = stage hunk<br/>n = don't stage this hunk<br/>q = quit<br/>a = stage this and all remaining hunks of the current file<br/>d = don't stage this and all remaining hunks of the current file<br/>/ = search for hunk (regex)<br/>s = split into smaller hunks<br/>e = manually edit hunk<br/>? = print help</span><span id="ea56" class="mp ln it ng b gy no nl l nm nn">g = select a hunk to go to<br/>j = leave hunk undecided, see next undecided hunk<br/>J = leave hunk undecided, see next hunk<br/>k = leave hunk undecided, see previous undecided hunk<br/>J = leave hunk undecided, see previous hunk</span></pre><p id="1a42" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae kf" href="https://git-scm.com/docs/git-add#Documentation/git-add.txt--i" rel="noopener ugc nofollow" target="_blank">https://git-scm.com/docs/git-add#Documentation/git-add.txt一号</a></p></div><div class="ab cl lf lg hx lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="im in io ip iq"><h1 id="349e" class="lm ln it bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">技巧5:不提交就隐藏变更</h1><p id="67e1" class="pw-post-body-paragraph kg kh it ki b kj mk kl km kn ml kp kq kr mm kt ku kv mn kx ky kz mo lb lc ld im bi translated">存储是当前更改的临时搁置。在他们的帮助下，我们可以返回到索引的当前状态，并可以在以后重新应用隐藏的更改。</p><p id="40d8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">默认情况下，只有当前跟踪文件中的更改将被隐藏，新文件将被忽略。</p><p id="da3d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">可以独立创建和应用多个stashes。</p><p id="57e9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae kf" href="https://git-scm.com/docs/git-stash" rel="noopener ugc nofollow" target="_blank">https://git-scm.com/docs/git-stash</a></p><h2 id="4cd9" class="mp ln it bd lo mq mr dn ls ms mt dp lw kr mu mv ma kv mw mx me kz my mz mi na bi translated">创造</h2><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="218c" class="mp ln it ng b gy nk nl l nm nn"># CREATE NEW STASH<br/>git <strong class="ng iu">stash</strong></span><span id="d6c3" class="mp ln it ng b gy no nl l nm nn"># CREATE NEW STASH (include untracked changes)<br/>git <strong class="ng iu">stash -u/--include-untracked</strong></span><span id="aba3" class="mp ln it ng b gy no nl l nm nn"># CREATE NEW STASH WITH NAME<br/>git <strong class="ng iu">stash save <em class="le">"&lt;stash name&gt;"</em></strong></span><span id="6b37" class="mp ln it ng b gy no nl l nm nn"># INTERACTIVE STASHING<br/>git <strong class="ng iu">stash -p</strong></span></pre><h2 id="f6d5" class="mp ln it bd lo mq mr dn ls ms mt dp lw kr mu mv ma kv mw mx me kz my mz mi na bi translated">列表</h2><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="84fb" class="mp ln it ng b gy nk nl l nm nn"># LIST ALL STASHES (providing "n" for other commands)<br/>git <strong class="ng iu">stash list</strong></span></pre><h2 id="7c0a" class="mp ln it bd lo mq mr dn ls ms mt dp lw kr mu mv ma kv mw mx me kz my mz mi na bi translated">看法</h2><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="4cd1" class="mp ln it ng b gy nk nl l nm nn"># VIEWING STASH CONTENT<br/>git <strong class="ng iu">stash show</strong></span><span id="2e88" class="mp ln it ng b gy no nl l nm nn"># VIEWING STASH DIFFS<br/>git <strong class="ng iu">stash show -p</strong></span></pre><h2 id="3fbb" class="mp ln it bd lo mq mr dn ls ms mt dp lw kr mu mv ma kv mw mx me kz my mz mi na bi translated">应用</h2><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="4f3a" class="mp ln it ng b gy nk nl l nm nn"># APPLY LAST STASH (delete stash)<br/>git <strong class="ng iu">stash pop</strong></span><span id="e312" class="mp ln it ng b gy no nl l nm nn"># APPLY LAST STASH (keep stash)<br/>git <strong class="ng iu">stash apply</strong></span><span id="56b7" class="mp ln it ng b gy no nl l nm nn"># APPLY SPECIFIC STASH (n = stash list number)<br/>git <strong class="ng iu">stash pop/apply stash@<em class="le">{n}</em></strong></span><span id="f3e7" class="mp ln it ng b gy no nl l nm nn"># CREATE NEW BRANCH FROM STASH (n = stash list number)<br/>git <strong class="ng iu">stash branch <em class="le">&lt;new branch name&gt;</em> stash@<em class="le">{n}</em></strong></span><span id="ba47" class="mp ln it ng b gy no nl l nm nn"># APPLY SINGLE FILE FROM STASH (n = stash list number)<br/>git <strong class="ng iu">checkout stash@<em class="le">{n}</em> -- <em class="le">&lt;filepath&gt;</em></strong></span></pre><h2 id="24ab" class="mp ln it bd lo mq mr dn ls ms mt dp lw kr mu mv ma kv mw mx me kz my mz mi na bi translated">清洁</h2><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="b688" class="mp ln it ng b gy nk nl l nm nn"># DROP SPECIFIC STASH (n = stash list number)<br/>git <strong class="ng iu">stash drop stash@<em class="le">{n}</em></strong></span><span id="4264" class="mp ln it ng b gy no nl l nm nn"># DROP ALL STASHES<br/>git <strong class="ng iu">stash clear</strong></span></pre></div><div class="ab cl lf lg hx lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="im in io ip iq"><h1 id="f165" class="lm ln it bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">技巧6:预演</h1><p id="ab99" class="pw-post-body-paragraph kg kh it ki b kj mk kl km kn ml kp kq kr mm kt ku kv mn kx ky kz mo lb lc ld im bi translated">许多git操作可能极具破坏性。例如，<code class="fe np nq nr ng b">git clean -f</code>将删除所有未被跟踪的文件，没有任何机会恢复它们。</p><p id="dcc9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了避免这种灾难性的结果，许多命令支持<em class="le">模拟运行</em>以在结果实际发生之前检查结果。遗憾的是，使用的选项并不总是相同的:</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="6efa" class="mp ln it ng b gy nk nl l nm nn">git <strong class="ng iu">clean -n/--dry-run</strong><br/>git <strong class="ng iu">add -n/--dry-run</strong><br/>git <strong class="ng iu">rm -n/--dry-run</strong></span><span id="0cde" class="mp ln it ng b gy no nl l nm nn"># GIT MERGE PSEUDO DRY-RUN<br/>git <strong class="ng iu">merge --no-commit --no-ff <em class="le">&lt;branch&gt;</em></strong><br/>git <strong class="ng iu">diff --cached</strong><br/>git <strong class="ng iu">merge --abort</strong></span></pre><p id="9261" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要知道<code class="fe np nq nr ng b">git commit -n</code>根本不是<em class="le">的预演</em>！其实就是选项<code class="fe np nq nr ng b">--no-verify</code>，忽略任何<code class="fe np nq nr ng b">pre-commit</code> / <code class="fe np nq nr ng b">commit-msg</code> <a class="ae kf" href="http://schacon.github.io/git/githooks.html" rel="noopener ugc nofollow" target="_blank"> githooks </a>。</p></div><div class="ab cl lf lg hx lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="im in io ip iq"><h1 id="cf22" class="lm ln it bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">技巧7:更安全的用力</h1><p id="718a" class="pw-post-body-paragraph kg kh it ki b kj mk kl km kn ml kp kq kr mm kt ku kv mn kx ky kz mo lb lc ld im bi translated">通过处理旧的提交、创建新的头等等，很容易搞乱分支。远程改变<em class="le">可以用<code class="fe np nq nr ng b">git <strong class="ki iu">push --force</strong></code>覆盖</em>，但是它们<em class="le">不应该</em>！</p><p id="fa90" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe np nq nr ng b">git <strong class="ki iu">push --force</strong></code>是一个<strong class="ki iu"> <em class="le">破坏性且危险的</em> </strong>操作，因为它无条件地工作，并且破坏其他提交者已经推送的任何提交。这对他人的储存库不一定是致命的，但改变历史和影响他人不是一个好主意。</p><p id="c5ed" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">更好的选择是使用<code class="fe np nq nr ng b">git <strong class="ki iu">push --force-with-lease</strong></code>来代替。</p><p id="1586" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">git不是无条件地覆盖上游远程，而是检查任何本地不可用的远程更改。如果是这样，它会失败，并显示一条“陈旧信息”消息，并希望我们先执行<code class="fe np nq nr ng b">git <strong class="ki iu">fetch</strong></code>。</p><p id="cd30" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae kf" href="https://git-scm.com/docs/git-push#Documentation/git-push.txt---force-with-leaseltrefnamegt" rel="noopener ugc nofollow" target="_blank">https://git-SCM . com/docs/git-push # Documentation/git-push . txt-force-with-leaseltrefnamegt</a></p></div><div class="ab cl lf lg hx lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="im in io ip iq"><h1 id="9f6f" class="lm ln it bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">技巧8:更改提交消息</h1><p id="c7fd" class="pw-post-body-paragraph kg kh it ki b kj mk kl km kn ml kp kq kr mm kt ku kv mn kx ky kz mo lb lc ld im bi translated">提交是不可变，且不能被改变。但是我们可以用新的消息来修改现有的提交。这将替换原来的提交，所以不要在已经推送的提交上使用它。</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="cea9" class="mp ln it ng b gy nk nl l nm nn">git <strong class="ng iu">commit --amend -m <em class="le">"&lt;new commit message&gt;"</em></strong><strong class="ng iu"><em class="le"> </em></strong></span></pre><p id="b55b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae kf" href="https://git-scm.com/docs/git-commit#Documentation/git-commit.txt---amend" rel="noopener ugc nofollow" target="_blank">https://git-SCM . com/docs/git-commit # Documentation/git-commit . txt-amend</a></p></div><div class="ab cl lf lg hx lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="im in io ip iq"><h1 id="395f" class="lm ln it bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">技巧9:更多地改变历史</h1><p id="6111" class="pw-post-body-paragraph kg kh it ki b kj mk kl km kn ml kp kq kr mm kt ku kv mn kx ky kz mo lb lc ld im bi translated">更改存储库的历史不会在最后一个提交消息时停止。使用<code class="fe np nq nr ng b">git rebase</code>可以更改多个提交:</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="e872" class="mp ln it ng b gy nk nl l nm nn"># RANGE OF COMMITS<br/>git <strong class="ng iu">rebase -i/--interactive <em class="le">HEAD~&lt;number of commits&gt;</em></strong></span><span id="e16f" class="mp ln it ng b gy no nl l nm nn"># ALL COMMITS AFTER &lt;commit-hash&gt;<br/>git <strong class="ng iu">rebase -i/--interactive <em class="le">&lt;commit hash&gt;</em></strong></span></pre><p id="8722" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在已配置的编辑器中会显示一个提交的逆序列表。大概是这样的:</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="efa2" class="mp ln it ng b gy nk nl l nm nn"># &lt;command&gt; &lt;commit hash&gt; &lt;commit message&gt;<br/>pick 5df8fbc revamped logic<br/>pick ca5154e README typos fixed<br/>pick a104aff added awesome new feature</span></pre><p id="77a2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">通过更改编辑器的实际内容，我们可以为git提供一个蓝图，告诉它如何重新构建基础:</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="a099" class="mp ln it ng b gy nk nl l nm nn"># p, pick   = use commit without changes<br/># r, reword = change commit message<br/># e, edit   = edit commit<br/># s, squash = meld into commit<br/># f, fixup  = like "squash", but discard commit message<br/># x, exec   = run command (rest of the line)<br/># d, drop   = remove commit</span></pre><p id="31db" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">保存编辑器后，git将运行这个蓝图重写历史。</p><p id="fb6c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe np nq nr ng b">e, edit</code>将暂停rebase，以编辑存储库的当前状态。最后，运行<code class="fe np nq nr ng b">git rebase --continue</code>。</p><p id="b2c8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果出现任何问题，比如合并冲突，我们想重新开始，总会有<code class="fe np nq nr ng b">git rebase --abort</code>。</p><p id="cf07" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae kf" href="https://git-scm.com/docs/git-rebase" rel="noopener ugc nofollow" target="_blank">https://git-scm.com/docs/git-rebase</a></p></div><div class="ab cl lf lg hx lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="im in io ip iq"><h1 id="1805" class="lm ln it bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">提示#10:存档跟踪的文件</h1><p id="b5e3" class="pw-post-body-paragraph kg kh it ki b kj mk kl km kn ml kp kq kr mm kt ku kv mn kx ky kz mo lb lc ld im bi translated">我们可以用不同的格式(<code class="fe np nq nr ng b">zip</code>或<code class="fe np nq nr ng b">tar</code>)压缩特定ref的跟踪文件:</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="73f6" class="mp ln it ng b gy nk nl l nm nn">git <strong class="ng iu">archive --format <em class="le">&lt;format&gt;</em> --output <em class="le">&lt;filename&gt; &lt;ref&gt;</em></strong></span></pre><p id="b1de" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe np nq nr ng b">&lt;ref&gt;</code>可以是分支、提交散列或标签。</p><p id="5ae5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae kf" href="https://git-scm.com/docs/git-archive" rel="noopener ugc nofollow" target="_blank">https://git-scm.com/docs/git-archive</a></p></div><div class="ab cl lf lg hx lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="im in io ip iq"><h1 id="98aa" class="lm ln it bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">额外提示:单个破折号</h1><p id="c99f" class="pw-post-body-paragraph kg kh it ki b kj mk kl km kn ml kp kq kr mm kt ku kv mn kx ky kz mo lb lc ld im bi translated">有一个代表先前使用的分支的快捷方式:单个破折号<code class="fe np nq nr ng b">-</code></p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="d064" class="mp ln it ng b gy nk nl l nm nn">git checkout my-branch<br/># Current branch: my-branch<br/>&lt;do some git operations, e.g. adding/commiting&gt;</span><span id="00e0" class="mp ln it ng b gy no nl l nm nn">git checkout develop<br/># Current branch: develop<br/>git merge -<br/># Merges my-branch into develop</span></pre><p id="9865" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">单破折号等于<code class="fe np nq nr ng b">@{-1}</code>。</p><p id="6481" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae kf" href="https://git-scm.com/docs/git-checkout#Documentation/git-checkout.txt-ltbranchgt" rel="noopener ugc nofollow" target="_blank">https://git-SCM . com/docs/git-check out # Documentation/git-check out . txt-ltbranchgt</a></p></div><div class="ab cl lf lg hx lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="im in io ip iq"><h1 id="164a" class="lm ln it bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">结论</h1><p id="434d" class="pw-post-body-paragraph kg kh it ki b kj mk kl km kn ml kp kq kr mm kt ku kv mn kx ky kz mo lb lc ld im bi translated">git还有很多主题，这只是皮毛。在另一篇文章中，我想展示如何用<code class="fe np nq nr ng b">git <strong class="ki iu">bisect</strong></code>有效地找到中断的提交，或者用<code class="fe np nq nr ng b">git <strong class="ki iu">reflog</strong></code>使用任何<code class="fe np nq nr ng b">git</code>操作的完整历史。</p></div><div class="ab cl lf lg hx lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="im in io ip iq"><h1 id="060e" class="lm ln it bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">资源</h1><ul class=""><li id="ec9e" class="ns nt it ki b kj mk kn ml kr nu kv nv kz nw ld nx ny nz oa bi translated"><a class="ae kf" href="https://git-scm.com/docs" rel="noopener ugc nofollow" target="_blank"> Git SCM文档</a></li><li id="2979" class="ns nt it ki b kj ob kn oc kr od kv oe kz of ld nx ny nz oa bi translated"><a class="ae kf" href="https://git-scm.com/book/en/v2" rel="noopener ugc nofollow" target="_blank"> Pro Git Book </a>(免费)</li><li id="6b8d" class="ns nt it ki b kj ob kn oc kr od kv oe kz of ld nx ny nz oa bi translated"><a class="ae kf" href="https://github.github.com/training-kit/downloads/github-git-cheat-sheet.pdf" rel="noopener ugc nofollow" target="_blank"> GitHub Git备忘单</a> (PDF)</li><li id="b6f5" class="ns nt it ki b kj ob kn oc kr od kv oe kz of ld nx ny nz oa bi translated"><a class="ae kf" href="https://ndpsoftware.com/git-cheatsheet.html" rel="noopener ugc nofollow" target="_blank">互动备忘单</a></li></ul></div></div>    
</body>
</html>