# 带有 React 挂钩的可重用代码

> 原文：<https://levelup.gitconnected.com/react-hooks-fed5502ca894>

用正确的钩子提高可重用性

![](img/891cfcd7b621aa38bbb775041acd6b3a.png)

照片由在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄的“我的镜头人生”

如果你还记得在 React 16.8.0 之前，组件生命周期在`componentDidMount`、`componentDidUpdate`和`componentWillUnmount`中是如何处理的。每个生命周期方法通常包含不相关的逻辑，而相互关联的逻辑被分离。这通常会导致复杂的组件难以重用，并且容易出现错误和不一致。

然后在 React 16.8.0 中发布了 hooks 来改善许多 React 开发者面临的这些日常问题。

> **钩子允许你根据相关的部分将一个组件分割成更小的功能(比如设置订阅或者获取数据)**，而不是根据生命周期方法强制分割。

这对于保持关注点的良好分离是非常好的，而且对于保持代码干燥也是非常好的。钩子允许你提取有状态的逻辑，这样它就可以被独立地测试并在其他组件中重用。这使得有状态逻辑不容易出错，并提供了更好的关注点分离。视图变得更加整洁，不再充斥着复杂的逻辑。

> 钩子不仅仅意味着通过使用 useEffect 来代替生命周期方法。

考虑下面的例子，我们正在制作一个`ArticlePreview`组件，就像这样:

![](img/62b813742c073bb3b25bd79fa1ab0ad4.png)

反应组件—文章预览

您可能会想写类似这样的东西:

这种方法的问题是，您的组件中混合了许多有状态逻辑。这使得有状态逻辑很难独立测试，也不可能在其他组件中重用，比如下面的`ArticleFull`组件:

![](img/2e4f84b0ce68cd2cf36d151d0296b016.png)

反应成分—物品全部

可以说，更好的方法是创建一个定制钩子`useArticle`，为`ArticlePreview`和`ArticleFull`组件处理可重用的有状态逻辑。一个`useArticle`钩子可能看起来像这样:

并且将有状态逻辑提取到它自己的定制钩子中，视图/组件看起来会像这样:

虽然这是一个简单的例子，但是关注点的分离要好得多，因为有状态逻辑被移动到一个可重用的*定制钩子*，并且组件更加干净，易于阅读和维护。

正如你所看到的，定制钩子是一个干净和可重用代码的好机制！