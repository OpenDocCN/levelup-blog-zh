<html>
<head>
<title>Keyboards Options for SwiftUI fields</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">SwiftUI字段的键盘选项</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/keyboards-options-for-swiftui-fields-c8ee81083a2?source=collection_archive---------19-----------------------#2020-06-21">https://levelup.gitconnected.com/keyboards-options-for-swiftui-fields-c8ee81083a2?source=collection_archive---------19-----------------------#2020-06-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/6583b85feb9cdb8bb25c5bb7b85cbf0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*NE95mVH4moeuvdsT"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">Camille Orgel 在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="d70e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当用户在iOS应用程序上填写表格时，改善用户体验的方法之一是使用键盘类型。键盘类型可用于根据字段的上下文显示不同的键盘。例如，如果它是一个电子邮件字段，您可能更喜欢呈现一个易于访问at ( <code class="fe le lf lg lh b">@</code>)和dot ( <code class="fe le lf lg lh b">.</code>)等字符的键盘。</p><p id="ba50" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本帖中，我们将看到不同的键盘选项如何与SwiftUI配合使用。首先，我们将涵盖“常见”场景，包括姓名、电子邮件、号码等字段的键盘。然后，我们将看看如何添加更多的自定义选项，如带有选择器视图的键盘。</p><h1 id="069c" class="li lj it bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">常见案例</h1><p id="1896" class="pw-post-body-paragraph kg kh it ki b kj mg kl km kn mh kp kq kr mi kt ku kv mj kx ky kz mk lb lc ld im bi translated">对于最常见的情况，SwiftUI在一个<code class="fe le lf lg lh b">View</code>扩展中提供了函数<code class="fe le lf lg lh b">keyboardType</code>。这个函数有一个类型为<code class="fe le lf lg lh b">UIKeyboardType</code>的参数，这是一个带有<code class="fe le lf lg lh b">emailAddress</code>、<code class="fe le lf lg lh b">numberPad</code>、<code class="fe le lf lg lh b">URL</code>等情况的枚举。</p><blockquote class="ml mm mn"><p id="bf66" class="kg kh mo ki b kj kk kl km kn ko kp kq mp ks kt ku mq kw kx ky mr la lb lc ld im bi translated"><em class="it">全套案例可以参考</em> <a class="ae kf" href="https://developer.apple.com/documentation/uikit/uikeyboardtype" rel="noopener ugc nofollow" target="_blank"> <em class="it">文档页</em> </a> <em class="it">。</em></p></blockquote><p id="5a9f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您可以通过以下方式在任何SwiftUI视图中使用该扩展:</p><pre class="ms mt mu mv gt mw lh mx my aw mz bi"><span id="c123" class="na lj it lh b gy nb nc l nd ne"><strong class="lh iu">TextField</strong>("Type the email...", text: $email)<br/>    <strong class="lh iu">.keyboardType</strong>(<strong class="lh iu">.</strong>emailAddress)</span></pre><figure class="ms mt mu mv gt ju gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/93eaee1569c8118b29811d3512136be3.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/format:webp/0*bi0fsY6nqWGljPpp.png"/></div></figure><p id="52d1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">但是如果我们想添加一个自定义视图呢？例如，一个picker视图，就像我们可以使用UIKit？</p><h1 id="fafd" class="li lj it bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">带有选取器视图的键盘</h1><p id="52ae" class="pw-post-body-paragraph kg kh it ki b kj mg kl km kn mh kp kq kr mi kt ku kv mj kx ky kz mk lb lc ld im bi translated">你可能已经猜到了，答案就在那里。</p><p id="3168" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们将不得不使用UIKit的<code class="fe le lf lg lh b">UITextField</code>，并通过创建一个符合<code class="fe le lf lg lh b">UIViewRepresentable</code>协议的结构来使它对SwiftUI可用。</p><p id="cec5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">不过还是一步一步来，看看怎么才能创造出<code class="fe le lf lg lh b">PickerField</code>；一个显示带有选择器的键盘的字段，如下图所示。</p><figure class="ms mt mu mv gt ju gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/bee1b8affbe3f69c653c9ca6ecdb7791.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/format:webp/0*Ftp6lAz0t_ktZghG.png"/></div></figure><p id="65f3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了保持事物的分离，让我们创建一个<code class="fe le lf lg lh b">UITextField</code>的子类，在这里我们将实现逻辑来显示一个带有选择器的键盘。</p><figure class="ms mt mu mv gt ju"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="00aa" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这个代码片段中，首先，我们声明两个属性；一个是选择器选项，一个是<code class="fe le lf lg lh b">Binding</code>属性，它既可以作为字段预填充时的输入，也可以作为用户更改选择器值时的输出。</p><p id="501c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后，在初始化器中，我们期待两个参数，我们将用它们来实例化这两个属性。之后，我们将属性<code class="fe le lf lg lh b">inputView</code>设置为<code class="fe le lf lg lh b">UIPickerView</code>的实例，并使用<code class="fe le lf lg lh b">inputAccessoryView</code>设置一个带有“完成”按钮的<code class="fe le lf lg lh b">UIToolbar</code>来帮助用户关闭键盘。</p><p id="28da" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最后，如果有预选值，我们从<code class="fe le lf lg lh b">UIPickerView</code>中选择该选项。</p><p id="9cd7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这个文件中，我们还添加了一个扩展来实现符合<code class="fe le lf lg lh b">UIPickerViewDataSource</code>和<code class="fe le lf lg lh b">UIPickerViewDelegate</code>的函数，并将<code class="fe le lf lg lh b">UIPickerView</code>的<code class="fe le lf lg lh b">dataSource</code>和<code class="fe le lf lg lh b">delegate</code>设置为self。</p><p id="4961" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">值得注意的是<code class="fe le lf lg lh b">didSelectRow</code>的实现，其中我们将选中的行设置为<code class="fe le lf lg lh b">Binding</code>属性<code class="fe le lf lg lh b">selectionIndex</code>，以将该信息传递给父视图。</p><p id="0f96" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这样，我们将创建一个新的结构，用于在UIKit视图和SwiftUI世界之间进行通信。</p><figure class="ms mt mu mv gt ju"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="51fb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">和<code class="fe le lf lg lh b">PickerTextField</code>类一样，这个结构也有两个属性；包含选项和字段值绑定属性的列表。</p><p id="f589" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们将再次使用初始化器通过它的参数传递这些属性的值。如果字段没有值，初始化器为<code class="fe le lf lg lh b">UITextField</code>的占位符多取一个参数。</p><p id="c6a3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后，我们提供了<code class="fe le lf lg lh b">UIViewRepresentable</code>协议的<code class="fe le lf lg lh b">makeUIView</code>和<code class="fe le lf lg lh b">updateUIView</code>需求的实现。</p><p id="2f0d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在第一个示例中，我们通过设置占位符的值来设置文本字段的初始状态。在第二个例子中，我们用从SwiftUI获得的任何新信息来更新<code class="fe le lf lg lh b">PickerField</code>的值。</p><p id="fc3b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最后，从任何SwiftUI视图来看，我们可以按以下方式使用这个结构:</p><figure class="ms mt mu mv gt ju"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="e00e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">你可以找到这个<code class="fe le lf lg lh b"><a class="ae kf" href="https://gist.github.com/diamantidis/061d101853f6400f76780345614b2c90#file-pickertextfield-swift" rel="noopener ugc nofollow" target="_blank">PickerTextField</a></code>的代码，以及<a class="ae kf" href="https://gist.github.com/diamantidis/061d101853f6400f76780345614b2c90#file-pickerfield-swift" rel="noopener ugc nofollow" target="_blank">其余的代码</a>和<a class="ae kf" href="https://gist.github.com/diamantidis/061d101853f6400f76780345614b2c90#file-contentview-swift" rel="noopener ugc nofollow" target="_blank">一个如何从SwiftUI视图</a>中使用它的例子。</p><h1 id="4ebf" class="li lj it bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">结论</h1><p id="6764" class="pw-post-body-paragraph kg kh it ki b kj mg kl km kn mh kp kq kr mi kt ku kv mj kx ky kz mk lb lc ld im bi translated">也就这样了！在这篇文章中，我们首先看到了SwiftUI的<code class="fe le lf lg lh b">TextField</code>对键盘类型的当前支持水平。然后，我们研究了如何依靠UIKit的UITextField及其属性<code class="fe le lf lg lh b">inputView</code>来提供对更多选项的支持。这样，我们可以呈现一个带有<code class="fe le lf lg lh b">UIPickerView</code>的键盘，或者我们想要的任何其他视图。</p><p id="a2fd" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">感谢阅读，我希望你觉得这篇文章有用，如果你对这篇文章有任何问题或评论，请随时在Twitter上联系我！</p><p id="1f22" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下次见！</p></div><div class="ab cl ni nj hx nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="im in io ip iq"><p id="a912" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="mo">原载于2020年6月21日</em><a class="ae kf" href="https://diamantidis.github.io/2020/06/21/keyboard-options-for-swiftui-fields" rel="noopener ugc nofollow" target="_blank"><em class="mo">https://diamantidis . github . io</em></a><em class="mo">。</em></p></div></div>    
</body>
</html>