<html>
<head>
<title>Learning C++: for Loops</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">学习C++:对于循环</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/learning-c-for-loops-229e5a803002?source=collection_archive---------21-----------------------#2020-07-10">https://levelup.gitconnected.com/learning-c-for-loops-229e5a803002?source=collection_archive---------21-----------------------#2020-07-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/45488cc868d5ee8e09ad509a002d8d3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*u83v2P2sSA6z9V53"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">由<a class="ae kf" href="https://unsplash.com/@twinsfisch?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">伊莎贝拉和路易莎·菲舍尔</a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="fc2c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">C++中有两种循环结构。其中之一是<code class="fe le lf lg lh b">while</code>循环，我将在另一篇文章中介绍它。另一个循环结构，也是我想在本文中讨论的，是<code class="fe le lf lg lh b">for</code>循环。</p><p id="bebe" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当您想要迭代或循环一组语句特定的次数时，可以使用<code class="fe le lf lg lh b">for </code>循环。如果你正在处理一个容器的元素，比如一个数组或者一个向量，你会想要使用一个<code class="fe le lf lg lh b">for</code>循环。如果你正在处理从程序用户那里收到的10条数据，你会想要使用一个<code class="fe le lf lg lh b">for</code>循环。</p><p id="285d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">不希望使用<code class="fe le lf lg lh b">for</code>循环的情况有:当您处理文件中的数据时，您不知道文件中有多少条数据，或者当您处理来自用户的数据时，您不知道将输入多少个数据元素。</p><h1 id="e11c" class="li lj it bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">对于循环类型</h1><p id="02b1" class="pw-post-body-paragraph kg kh it ki b kj mg kl km kn mh kp kq kr mi kt ku kv mj kx ky kz mk lb lc ld im bi translated">有两种类型的<code class="fe le lf lg lh b">for</code>循环。第一种我称之为变量控制。这意味着在<code class="fe le lf lg lh b">for</code>循环中，你初始化一个变量，该变量的值决定了<code class="fe le lf lg lh b">for</code>循环迭代的次数。</p><p id="373c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">另一种类型的<code class="fe le lf lg lh b">for</code>循环是范围<code class="fe le lf lg lh b">for</code>循环。这种类型的<code class="fe le lf lg lh b">for</code>循环遍历一个容器的所有元素，比如一个向量或一个数组。当您想要处理容器的每个元素时，可以使用这种类型的循环，从第一个元素开始，一直到最后一个元素。使用range <code class="fe le lf lg lh b">for</code>循环可以阻止任何类型的逻辑错误，这些错误可能是由于试图访问容器边界之外的元素而导致的。</p><h1 id="3945" class="li lj it bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">可变控制for循环</h1><p id="8f60" class="pw-post-body-paragraph kg kh it ki b kj mg kl km kn mh kp kq kr mi kt ku kv mj kx ky kz mk lb lc ld im bi translated">最常见的<code class="fe le lf lg lh b">for</code>回路类型是可变控制<code class="fe le lf lg lh b">for </code>回路。变量在循环体内初始化，以控制循环迭代的次数。我称之为<em class="ml">循环控制变量</em>。您可以在循环体之外初始化循环控制变量，但这样一来，变量的作用域就不在循环的本地了，这可能是您不想要的。</p><p id="22d5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">以下是定义变量控制for循环结构的语法模板:</p><p id="c34a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="ml"> for(变量-初始化；条件；变量-修改){ <br/>循环体；<br/> } </em></p><p id="9f61" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一个<code class="fe le lf lg lh b">for</code>循环有四个部分:1)变量初始化，你给一个变量赋值来控制循环(循环控制变量)；2)正在测试的停止循环的条件；3)变量修改，修改循环控制变量的值，使条件最终为真；以及4)循环体——执行循环工作的地方。</p><p id="4852" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们看一个简单的例子，演示变量控制的<code class="fe le lf lg lh b">for</code>循环是如何工作的。下面的程序显示“Hello，world！”对着屏幕5次:</p><pre class="mm mn mo mp gt mq lh mr ms aw mt bi"><span id="eda4" class="mu lj it lh b gy mv mw l mx my">int main()<br/>{<br/>  for (int i = 1; i &lt;= 5; i++) {<br/>    cout &lt;&lt; "Hello, world!" &lt;&lt; endl;<br/>  }<br/>  return 0;<br/>}</span></pre><p id="7d41" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">本例中的循环控制变量是<code class="fe le lf lg lh b">i</code>。虽然通常使用单个单词的变量名不是一个好主意，但是使用<code class="fe le lf lg lh b">for </code>循环这样做是很常见的。这样做的原因是因为<code class="fe le lf lg lh b">for</code>循环通常足够短，所以扫描循环以查看变量在哪里声明是很容易做到的。</p><p id="2392" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这个程序的输出是:</p><pre class="mm mn mo mp gt mq lh mr ms aw mt bi"><span id="a2e7" class="mu lj it lh b gy mv mw l mx my">Hello, world!<br/>Hello, world!<br/>Hello, world!<br/>Hello, world!<br/>Hello, world!</span></pre><p id="3f1e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我将通过对循环控制变量— <code class="fe le lf lg lh b"> i</code>进行变量跟踪来演示循环是如何工作的。</p><p id="e304" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">i: 1输出:你好，世界！<br/> i: 2输出:你好，世界！<br/> i: 3输出:你好，世界！<br/> i: 4输出:你好，世界！<br/> i: 5输出:你好，世界！<br/> i: 6输出:</p><p id="a13d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe le lf lg lh b">i</code>的值达到6，但是因为现在条件为假，循环停止并且不再有输出。</p><p id="472d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">变量控制的<code class="fe le lf lg lh b">for</code>循环的一个常见用途是访问数组或向量的元素。我将通过创建一个10个元素的数组并使用一个变量控制的<code class="fe le lf lg lh b">for</code>循环来对数组的元素求和，以找到元素的平均值来演示这一点。程序如下:</p><pre class="mm mn mo mp gt mq lh mr ms aw mt bi"><span id="be43" class="mu lj it lh b gy mv mw l mx my">int main () {<br/>  const int numElements = 10;<br/>  int grades[numElements] =<br/>    {81, 77, 91, 82, 75, 89, 92, 68, 98, 84};<br/>  int total = 0;<br/>  for (int i = 0; i &lt; numElements; i++) {<br/>    total += grades[i];<br/>  }<br/>  double average = static_cast&lt;double&gt;(total)/numElements;<br/>  cout &lt;&lt; "The average value of the grades is: "<br/>       &lt;&lt; average &lt;&lt; endl;<br/>  return 0;<br/>}</span></pre><p id="c9a3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这个程序的输出是:</p><pre class="mm mn mo mp gt mq lh mr ms aw mt bi"><span id="6266" class="mu lj it lh b gy mv mw l mx my">The average value of the grades is: 83.7</span></pre><p id="4196" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们也可以使用这种技术以相反的顺序显示数组的值。下面是实现这一点的程序:</p><pre class="mm mn mo mp gt mq lh mr ms aw mt bi"><span id="000c" class="mu lj it lh b gy mv mw l mx my">int main () {<br/>  const int numElements = 10;<br/>  int grades[numElements] =<br/>    {81, 77, 91, 82, 75, 89, 92, 68, 98, 84};<br/>  for (int i = numElements -1; i &gt;= 0; i--) {<br/>    cout &lt;&lt; grades[i] &lt;&lt; " ";<br/>  }<br/>  return 0;<br/>}</span></pre><p id="bbbf" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这个程序的输出是:</p><pre class="mm mn mo mp gt mq lh mr ms aw mt bi"><span id="69d5" class="mu lj it lh b gy mv mw l mx my">84 98 68 92 89 75 82 91 77 81</span></pre><p id="3cb2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">变量控制的for循环是访问数组或向量元素的常规方式，在大多数情况下非常实用。然而，随着C++11中range <code class="fe le lf lg lh b">for</code>循环的引入，这种新的<code class="fe le lf lg lh b">for</code>循环类型是在访问所有元素时访问数组的首选方式。在下一节中，我将介绍范围<code class="fe le lf lg lh b">for</code>循环是如何工作的。</p><h1 id="504f" class="li lj it bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">循环的范围</h1><p id="046c" class="pw-post-body-paragraph kg kh it ki b kj mg kl km kn mh kp kq kr mi kt ku kv mj kx ky kz mk lb lc ld im bi translated">在C++11中引入的range <code class="fe le lf lg lh b">for</code>循环提供了一种更简单的方法来访问数组或向量的所有元素，以及其他一些C++容器类型。range <code class="fe le lf lg lh b">for</code>循环使用迭代器从第一个元素到最后一个元素访问容器的元素。关于迭代器的概述，你可以在这里阅读我关于迭代器的文章。</p><p id="6488" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">以下是循环范围的语法模板:</p><p id="97f8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="ml"> for(数据类型变量名:容器){ <br/>循环体；<br/> } </em></p><p id="ab40" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">range <code class="fe le lf lg lh b">for</code>循环通过初始化一个与目标容器中的元素类型相同的数据类型的变量来工作。然后迭代器访问容器中的每个元素，将元素的值放入变量中。</p><p id="0a7e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们看看range <code class="fe le lf lg lh b">for</code>循环如何与我们在上一个例子中使用的数组一起工作:</p><pre class="mm mn mo mp gt mq lh mr ms aw mt bi"><span id="7d10" class="mu lj it lh b gy mv mw l mx my">int main () {<br/>  const int numElements = 10;<br/>  int grades[numElements] =<br/>    {81, 77, 91, 82, 75, 89, 92, 68, 98, 84};<br/>  for (int grade : grades) {<br/>    cout &lt;&lt; grade &lt;&lt; " ";<br/>  }<br/>  return 0;<br/>}</span></pre><p id="f7e0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这个程序的输出是:</p><pre class="mm mn mo mp gt mq lh mr ms aw mt bi"><span id="ebd7" class="mu lj it lh b gy mv mw l mx my">81 77 91 82 75 89 92 68 98 84</span></pre><p id="4809" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在让我们从数组切换到向量:</p><pre class="mm mn mo mp gt mq lh mr ms aw mt bi"><span id="6acd" class="mu lj it lh b gy mv mw l mx my">#include &lt;iostream&gt;<br/>#include &lt;vector&gt;<br/>using namespace std;</span><span id="d213" class="mu lj it lh b gy mz mw l mx my">int main () {<br/>  vector&lt;int&gt; grades = {81, 77, 91, 82, 75, 89, 92, 68, 98, 84};<br/>  for (int grade : grades) {<br/>    cout &lt;&lt; grade &lt;&lt; " ";<br/>  }<br/>  return 0;<br/>}</span></pre><p id="9cf0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这段代码产生的输出与前面的示例相同。</p><p id="3c39" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我再说一次T4循环的例子。每当你需要访问一个兼容容器的所有元素时，你应该在一个变量控制的<code class="fe le lf lg lh b">for</code>循环上使用一个范围<code class="fe le lf lg lh b">for </code>循环。范围<code class="fe le lf lg lh b">for</code>循环更安全，同样高效。真的就这么简单。</p><h1 id="b502" class="li lj it bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">对于循环滥用</h1><p id="157f" class="pw-post-body-paragraph kg kh it ki b kj mg kl km kn mh kp kq kr mi kt ku kv mj kx ky kz mk lb lc ld im bi translated">你偶尔会看到下面这个使用<code class="fe le lf lg lh b">for</code>循环的例子:</p><pre class="mm mn mo mp gt mq lh mr ms aw mt bi"><span id="cbd9" class="mu lj it lh b gy mv mw l mx my">int main () {<br/>  const int numElements = 10;<br/>  int grades[numElements] =<br/>    {81, 77, 91, 82, 75, 89, 92, 68, 98, 84};<br/>  int i;<br/>  for (i = 0; i &lt; numElements; i++) {<br/>    cout &lt;&lt; grades[i] &lt;&lt; " ";<br/>  }<br/>  return 0;<br/>}</span></pre><p id="e442" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果看不出区别，循环控制变量在<code class="fe le lf lg lh b">for</code>循环外声明，在循环内初始化。这使得变量<code class="fe le lf lg lh b">i</code>成为<code class="fe le lf lg lh b">main</code>函数的局部变量，这在大多数情况下是不需要的，并且会导致问题。</p><p id="e518" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">几乎在每种情况下，循环控制变量都应该在循环内部声明和初始化，这样变量的作用域就局限于<code class="fe le lf lg lh b">for</code>循环，而不是<code class="fe le lf lg lh b">main</code>函数。如果你像这样在本地声明它，你可以在程序的其他地方使用同一个变量而不会有任何冲突。</p><p id="d2be" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">你偶尔甚至会看到这个:</p><pre class="mm mn mo mp gt mq lh mr ms aw mt bi"><span id="dd34" class="mu lj it lh b gy mv mw l mx my">int main () {<br/>  const int numElements = 10;<br/>  int grades[numElements] =<br/>    {81, 77, 91, 82, 75, 89, 92, 68, 98, 84};<br/>  int i = 0;<br/>  for (; i &lt; numElements; i++) {<br/>    cout &lt;&lt; grades[i] &lt;&lt; " ";<br/>  }<br/>  return 0;<br/>}</span></pre><p id="b455" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">将<code class="fe le lf lg lh b">for </code>循环的第一部分写成空语句在语法上是正确的，但比上一个在循环外声明的例子更令人困惑。请不要像这样编写<code class="fe le lf lg lh b">for</code>循环，也不要将修改语句放在循环体内，如下例所示:</p><pre class="mm mn mo mp gt mq lh mr ms aw mt bi"><span id="0cf9" class="mu lj it lh b gy mv mw l mx my">int main () {<br/>  const int numElements = 10;<br/>  int grades[numElements] =<br/>    {81, 77, 91, 82, 75, 89, 92, 68, 98, 84};<br/>  int i;<br/>  for (i = 0; i &lt; numElements;) {<br/>    cout &lt;&lt; grades[i] &lt;&lt; " ";<br/>    i++;<br/>  }<br/>  return 0;<br/>}</span></pre><p id="451f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">同样，语法很好，但是用法不标准，应该避免。</p><h1 id="2ee9" class="li lj it bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">尽可能使用for循环</h1><p id="0486" class="pw-post-body-paragraph kg kh it ki b kj mg kl km kn mh kp kq kr mi kt ku kv mj kx ky kz mk lb lc ld im bi translated">我想用一个建议来结束这篇文章——尽可能使用<code class="fe le lf lg lh b">for</code>循环。它们比其他循环类型更容易阅读，通常也更容易调试。当然，有些情况下必须选择不同的循环类型，但这种情况可能不像您想象的那样常见。编程语言Go连<code class="fe le lf lg lh b">while</code>循环都没有。你必须使用一个<code class="fe le lf lg lh b">for</code>循环来完成你想在围棋中做的任何循环。我倾向于在C++中采纳他们的建议，尽可能使用<code class="fe le lf lg lh b">for</code>循环。</p><p id="a9db" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">感谢您阅读这篇文章，请给我发电子邮件，提出您的意见和建议。</p></div></div>    
</body>
</html>