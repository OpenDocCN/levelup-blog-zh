<html>
<head>
<title>What is the Difference between the Node HTTP library, Express, and Nestjs?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">节点HTTP库，Express，和Nestjs有什么区别？</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/what-is-the-difference-between-the-node-http-library-express-and-nestjs-df6a11ca0e48?source=collection_archive---------5-----------------------#2021-10-08">https://levelup.gitconnected.com/what-is-the-difference-between-the-node-http-library-express-and-nestjs-df6a11ca0e48?source=collection_archive---------5-----------------------#2021-10-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="ae83" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">理解节点框架的3个层次。</h2></div><p id="3cb6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当我们谈到与节点相关的web框架时，您可能会想到Express、Koa、Nestjs和Node的HTTP模块。那么你知道这些框架的区别吗？让我们在文章中讨论这个问题。</p><p id="6e95" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">简单概述:</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi le"><img src="../Images/a7c34042a888c55d820388696e2d48f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K7dBheFdIunif6XzuxKhNA.png"/></div></div></figure><h1 id="4ef4" class="lq lr it bd ls lt lu lv lw lx ly lz ma jz mb ka mc kc md kd me kf mf kg mg mh bi translated">HTTP图书馆</h1><p id="3a7c" class="pw-post-body-paragraph ki kj it kk b kl mi ju kn ko mj jx kq kr mk kt ku kv ml kx ky kz mm lb lc ld im bi translated">先说一下<code class="fe mn mo mp mq b">http</code>模块。<code class="fe mn mo mp mq b">http</code>模块是Node本机提供的一个库，用于处理HTTP请求和响应。它也是开发web服务器时最重要的模块。</p><p id="8f97" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mn mo mp mq b">http</code>库的用法一般是这样的:</p><figure class="lf lg lh li gt lj"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="dcd9" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">用图表表示，就是这样:</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi mt"><img src="../Images/d8e5054f6f1aae14e3226e2063079032.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9fkTjASd06IFgIDeNN6Log.png"/></div></div></figure><p id="2b27" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">作为Node原生提供的模块，它的作用是解析HTTP请求，生成HTTP响应，所以它提供的API非常灵活。我们可以通过<code class="fe mn mo mp mq b">req.url</code>获取请求的URL，通过<code class="fe mn mo mp mq b">req.method</code>获取请求消息的方法，通过<code class="fe mn mo mp mq b">res.end</code>发送响应消息。</p><p id="1520" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">但是如果我们需要完成一些稍微复杂的需求，使用<code class="fe mn mo mp mq b">http</code>模块就不是很方便了。</p><p id="4ff7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们的项目有这样的需求:</p><ul class=""><li id="c851" class="mu mv it kk b kl km ko kp kr mw kv mx kz my ld mz na nb nc bi translated">当用户访问<code class="fe mn mo mp mq b">/artciles/2</code>时，则返回id为2的文章内容；</li><li id="c18a" class="mu mv it kk b kl nd ko ne kr nf kv ng kz nh ld mz na nb nc bi translated">当用户访问<code class="fe mn mo mp mq b">/users/325</code>时，返回id为2的用户的信息。</li></ul><p id="437f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要直接使用<code class="fe mn mo mp mq b">http</code>模块，可以这样写:</p><figure class="lf lg lh li gt lj"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="892f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">显然，这种写作方式臃肿低效。这是因为<code class="fe mn mo mp mq b">http</code>模块只能算是一个库，而不是一个框架。这个时候我们需要Express、Koa等web框架。</p><h1 id="f34d" class="lq lr it bd ls lt lu lv lw lx ly lz ma jz mb ka mc kc md kd me kf mf kg mg mh bi translated">表达</h1><p id="561b" class="pw-post-body-paragraph ki kj it kk b kl mi ju kn ko mj jx kq kr mk kt ku kv ml kx ky kz mm lb lc ld im bi translated">Express，Koa，Fastify等。属于Web框架。它们基于Node的<code class="fe mn mo mp mq b">http</code>模块，封装了一些开发web服务器时常用的功能，比如路由。</p><p id="6107" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">快递的用法一般是这样的:</p><figure class="lf lg lh li gt lj"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="5897" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在图表中:</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi mt"><img src="../Images/3f3176b3b4f9a0b64b73f4a5864ae258.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p32NNkGIj3zzWuIg4KGzNA.png"/></div></div></figure><p id="256b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">有了Express提供的路由功能，我们再也不需要像以前一样写各种低效的<code class="fe mn mo mp mq b">if</code>语句了。在处理HTTP响应时，也可以通过<code class="fe mn mo mp mq b">res.json()</code>直接返回JSON文件，使用<code class="fe mn mo mp mq b">res.sendFile()</code>返回二进制文件。Express framework将自动为我们设置适当的内容类型，而不是手动设置内容类型。</p><p id="e13d" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">但是像Express这样的轻量级框架仍然没有解决一些问题:</p><ul class=""><li id="a4ad" class="mu mv it kk b kl km ko kp kr mw kv mx kz my ld mz na nb nc bi translated">(在大型项目中，)如何设计项目的架构？</li><li id="a102" class="mu mv it kk b kl nd ko ne kr nf kv ng kz nh ld mz na nb nc bi translated">如何设计项目的目录结构？</li></ul><p id="b1bf" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这时候就需要Nestjs、Eggjs这样的重量级框架了。</p><h1 id="ed42" class="lq lr it bd ls lt lu lv lw lx ly lz ma jz mb ka mc kc md kd me kf mf kg mg mh bi translated">Nestjs</h1><p id="437d" class="pw-post-body-paragraph ki kj it kk b kl mi ju kn ko mj jx kq kr mk kt ku kv ml kx ky kz mm lb lc ld im bi translated">Nest等框架要求我们使用固定的文件目录结构，使用特定的项目架构。它们本身不直接处理HTTP请求和响应，具体工作交给Express或Fastify等底层框架。</p><p id="1d54" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Nest生成的文件目录结构如下:</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi ni"><img src="../Images/d5b82758d5fd7845e056e615468f0388.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rOVEr0mM2OZcMd7x8E-CFw.png"/></div></div></figure><p id="3dde" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Nest项目的架构一般是这样的:</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi nj"><img src="../Images/83b26dd2405938ef05ce04a34117a18d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IuvPbfopkX7ky9FEghgXyg.png"/></div></div></figure><h1 id="9d3e" class="lq lr it bd ls lt lu lv lw lx ly lz ma jz mb ka mc kc md kd me kf mf kg mg mh bi translated">结论</h1><p id="b959" class="pw-post-body-paragraph ki kj it kk b kl mi ju kn ko mj jx kq kr mk kt ku kv ml kx ky kz mm lb lc ld im bi translated"><code class="fe mn mo mp mq b">http</code>模块提供的特性非常原始，适合开发框架，但不适合直接用于普通web项目的开发。</p><p id="44bc" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Express等框架提供了基于HTTP模块的合适的包，适合开发中小型项目。</p><p id="f66f" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Next等框架都是基于Express，Koa等。做二次包装，适合开发比较复杂的项目。</p><p id="eef6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最后，吃一个汉堡。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi nk"><img src="../Images/5161aea6211121fe5ae3002be905a289.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*V6iRGRc6rhQ07GmwQ8etbw.png"/></div></div></figure></div></div>    
</body>
</html>