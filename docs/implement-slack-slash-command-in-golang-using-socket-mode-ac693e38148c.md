# ä½¿ç”¨å¥—æ¥å­—æ¨¡å¼åœ¨ Golang ä¸­å®ç° Slack Slash å‘½ä»¤

> åŸæ–‡ï¼š<https://levelup.gitconnected.com/implement-slack-slash-command-in-golang-using-socket-mode-ac693e38148c>

## GOLANG SLACKBOT æ•™ç¨‹

## ä¸ºæ‚¨çš„ç”¨æˆ·æä¾›ä¾¿æ·çš„å¿«æ·æ–¹å¼

![](img/b88be9b25faf166968bc4a187c192419.png)

ç…§ç‰‡ç”± [Jean-Philippe Delberghe](https://unsplash.com/@jipy32?utm_source=medium&utm_medium=referral) åœ¨ [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) æ‹æ‘„ï¼ŒGopher ç”± [Egon Elbre](https://github.com/egonelbre) æ‹æ‘„ã€‚

æ–œæ å‘½ä»¤æ˜¯æ‚¨åœ¨å¯¹è¯æ¡†ä¸­é”®å…¥çš„æ¶ˆæ¯ï¼Œä»¥`"/"`å¼€å¤´ã€‚å®ƒä»¬å¯ä»¥è®©ä½ è½»æ¾åœ°æ‰©å±• Slack çš„åŠŸèƒ½ï¼Œå¹¶ä¸”å®ç°èµ·æ¥éå¸¸ç®€å•ã€‚æˆ‘è®¤ä¸ºå®ƒä»¬æ˜¯é€šè¿‡ä» Slack é€šé“è¿›è¡Œç¼–å†™æ¥ä¸æ‚¨çš„ç”Ÿæ€ç³»ç»Ÿè¿›è¡Œäº¤äº’çš„æ–¹å¼ï¼Œç„¶åæ‚¨çš„ Slack åº”ç”¨ç¨‹åºæ˜¯å¹•åçš„æŒ‡æŒ¥è€…ï¼Œå°†æ‚¨çš„ç”¨æˆ·è¯·æ±‚é‡å®šå‘åˆ°æ­£ç¡®çš„ç³»ç»Ÿã€‚ç®€è€Œè¨€ä¹‹ï¼Œæˆ‘æƒ³æŠŠå®ƒä»¬æè¿°ä¸ºå¯ä»¥ä» Slack è¿œç¨‹è§¦å‘çš„åŠŸèƒ½ã€‚å› æ­¤ï¼Œæ— è®ºæ‚¨æ˜¯æƒ³æ·»åŠ ç®€å•çš„å®ç”¨ç¨‹åºï¼Œè¿˜æ˜¯æƒ³å°†æ‚¨çš„å·¥ä½œåŒºå˜æˆä¸€ä¸ªåŠŸèƒ½é½å…¨çš„ ChatOps æ€»éƒ¨ï¼Œ**æ–œæ å‘½ä»¤æ˜¯ Slack åº”ç”¨ç¨‹åºä¸­çš„å¿…å¤‡å·¥å…·ã€‚**

è¿™ç¯‡æ–‡ç« å¯¹ slash å‘½ä»¤è¿›è¡Œäº†å¿«é€Ÿä»‹ç»ï¼Œå¹¶è¯¦ç»†è§£é‡Šäº†å¦‚ä½•ä½¿ç”¨ Socket æ¨¡å¼å¼€å§‹ä½¿ç”¨ Golangã€‚æ¼”ç¤ºçš„å…³é”® Slack API æ¦‚å¿µæ˜¯ Slack Slash å‘½ä»¤ã€çŸ­æš‚æ¶ˆæ¯å’Œäº¤äº’å¼æ¶ˆæ¯ã€‚

# ä½¿ç”¨æ–œæ å‘½ä»¤å¯ä»¥å®ç°ä»€ä¹ˆï¼Ÿ

æ‚¨å¯èƒ½ç†Ÿæ‚‰ Slack å†…ç½®å‘½ä»¤ã€‚å¦‚æœæ²¡æœ‰ï¼Œç¬¬ä¸€æ¬¡è¿›å…¥ä»»ä½•å¯¹è¯ç±»å‹`"/"`ï¼Œç„¶åç¬¬äºŒæ¬¡è¿›å…¥`"/"`ï¼Œä½ å°†åœ¨ä½ çš„å·¥ä½œåŒºçœ‹åˆ°æ‰€æœ‰å¯ç”¨çš„å‘½ä»¤ğŸ‘ã€‚

Slack å…è®¸æ‚¨ä¸ºåº”ç”¨ç¨‹åºåˆ›å»ºç±»ä¼¼å‘½ä»¤ã€‚æ‚¨é¦–å…ˆé€šè¿‡ slack åº”ç”¨ç¨‹åºåç«¯è¿›è¡Œè®¢é˜…ã€‚ç„¶åï¼Œæ‚¨ä¼šå¬åˆ°ç”¨æˆ·å‘å‡ºçš„å‘½ä»¤ï¼Œå¹¶æœ€ç»ˆå¼€å§‹ä¸ä»–ä»¬äº¤äº’ã€‚è¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æ–¹å¼æ¥åˆ›å»ºå®¹æ˜“æé†’å¿«æ·æ–¹å¼ï¼Œè®©æ‚¨çš„ç”¨æˆ·è¡ŒåŠ¨èµ·æ¥ã€‚æˆ‘çš„å·¥ä½œåŒºä¸­æœ€æµè¡Œçš„ Slack Slash å‘½ä»¤ä¹‹ä¸€ç»å¯¹æ˜¯`/giphy`ã€‚

![](img/4798697bc7718314893877b726bc2af8.png)

ç¤ºä¾‹/giphy å‘½ä»¤

æ–œæ å‘½ä»¤ç”±ä¸¤ä¸ªå…ƒç´ ç»„æˆã€‚ä¾‹å¦‚ï¼Œå½“ä½ è¾“å…¥`/rocket count=5`æ—¶ï¼Œä¿¡æ¯ä¼šè¢« Slack åˆ†æˆä¸¤éƒ¨åˆ†:

*   å‘½ä»¤`/rocket`
*   æ­£æ–‡`count=5`

å‘½ä»¤æ®µå¸®åŠ©æ‚¨å°†ç”¨æˆ·è¯·æ±‚åˆ†æ´¾ç»™æ­£ç¡®çš„æœåŠ¡æˆ–æ§åˆ¶å™¨ï¼Œå¹¶ä¸”éœ€è¦å¯¹æ–‡æœ¬éƒ¨åˆ†è¿›è¡Œè§£æï¼Œä»¥ä¾¿æ‚¨çš„åº”ç”¨ç¨‹åºèƒ½å¤Ÿç†è§£å®ƒã€‚å¦‚æœä½ å†™ä¸€ä¸ªä¼ ç»Ÿçš„å‘½ä»¤è¡Œç•Œé¢ï¼Œä½ å¯èƒ½ä¼šæœŸå¾…`key=value`å‚æ•°ã€‚ä½†æ˜¯è¦å°å¿ƒï¼›æ‚¨çš„ç”¨æˆ·å¯ä»¥åœ¨å‘½ä»¤åè¾“å…¥ä»»ä½•å†…å®¹ï¼Œå› æ­¤æ¯å½“å‘½ä»¤è¡Œçš„å‚æ•°ä¸æ­£ç¡®æ—¶ï¼Œæ€»æ˜¯è¦æä¾›ä¸€æ¡å¸®åŠ©æ¶ˆæ¯æ¥è§£é‡Šå‘½ä»¤è¡Œæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚å¥½æ¶ˆæ¯æ˜¯æ¾æ•£çš„äº¤äº’æ€§ï¼›å½“ä¸€ä¸ªå‘½ä»¤å‡ºé”™æ—¶ï¼Œä½ è¿˜å¯ä»¥å‘é€ä¸€æ¡äº¤äº’æ¶ˆæ¯æˆ–æ‰“å¼€ä¸€ä¸ªæ¨¡æ€æ¥æ”¶é›†æ‰€éœ€çš„ä¿¡æ¯ã€‚æˆ‘å‘ç°ç¬¬äºŒç§æ–¹æ³•æ›´åŠ ç”¨æˆ·å‹å¥½ğŸ¤—ã€‚

è¿™æ˜¯æ‚¨å°†åœ¨æœ¬æ•™ç¨‹ä¸­åˆ›å»ºçš„å‘½ä»¤çš„æ¦‚è¿°:

![](img/626fe115e4dfff2e6761879f354373e6.png)

æœ¬æ•™ç¨‹çš„ Slack å‘½ä»¤ç¤ºä¾‹

# æ•™ç¨‹æ­¥éª¤ 1 è‡³ 3:å‡†å¤‡å°±ç»ª

æˆ‘å·²ç»å†™äº†å‡ ç¯‡å…³äºåˆ›å»º Slack Bot çš„æ–‡ç« ï¼Œè¿™å‡ ä¸ªåŸºæœ¬æ­¥éª¤(1 åˆ° 3)æœ€ç»ˆæ˜¯ç›¸åŒçš„ğŸ˜“ã€‚å› æ­¤ï¼Œæˆ‘å°†å‘æ‚¨ç®€è¦ä»‹ç»éœ€è¦åšå“ªäº›å‡†å¤‡ã€‚å¦‚æœæ‚¨æœ‰ä»»ä½•ç–‘é—®ï¼Œè¯·é˜…è¯»ä¸“ç”¨æ–‡ç« ã€‚

[](https://medium.com/geekculture/build-slack-application-in-golang-using-socket-mode-setting-up-57f454e63c0a) [## ä½¿ç”¨å¥—æ¥å­—æ¨¡å¼åœ¨ Golang ä¸­æ„å»ºæ¾å¼›åº”ç”¨ç¨‹åºâ€”è®¾ç½®

### æ¯ä¸ª Slack åº”ç”¨ç¨‹åºéƒ½æ˜¯ä»å‡ ä¸ªç®€å•çš„æ­¥éª¤å¼€å§‹çš„ã€‚

medium.com](https://medium.com/geekculture/build-slack-application-in-golang-using-socket-mode-setting-up-57f454e63c0a) 

## ç¬¬ä¸€æ­¥

1.  åˆ›å»ºæ‚¨çš„[æ–°åº”ç”¨](https://api.slack.com/apps)
2.  åœ¨é€‚å½“çš„éƒ¨åˆ†æ¿€æ´»å¥—æ¥å­—æ¨¡å¼
3.  æ³¨å†Œæ‚¨éœ€è¦çš„ OAuth èŒƒå›´(chat:write â€”è®©æ‚¨åœ¨é€šé“ä¸­å‘å¸ƒæ¶ˆæ¯)
4.  æ³¨å†Œä¸€ä¸ªæ–œæ å‘½ä»¤

è¿™ä¸ª gif æ¼”ç¤ºäº†å¦‚ä½•æ³¨å†Œä¸€ä¸ªæ–°çš„ Slask å‘½ä»¤ã€‚å¯¹äºè¿™ä¸ªä¾‹å­ï¼Œæˆ‘å°†å…¶å‘½åä¸º`/rocket`ã€‚

## ç¬¬äºŒæ­¥

åˆ›å»ºé¡¹ç›®ç»“æ„ã€‚åé¢çš„æ¯ä¸€èŠ‚éƒ½å°†å…³æ³¨è¿™äº›æ–‡ä»¶ä¸­çš„ä¸€ä¸ªã€‚

```
+ controllers
|`- slashCommandController.go
+ drivers
|`- Slack.go
+ views
|`+ slackCommandAssets
| | `- rocket.json
|`- slashCommandView.go
+ main.go
```

## ç¬¬ä¸‰æ­¥

1.  åˆ›å»º driver/slack.go(æˆ–è€…ä»[è¿™é‡Œ](https://github.com/xNok/slack-go-demo-socketmode/blob/main/drivers/slack.go)å¤åˆ¶)
2.  åˆ›å»º main.go(æˆ–ä»è¿™é‡Œçš„[å¤åˆ¶](https://github.com/xNok/slack-go-demo-socketmode/blob/main/main.go))

# æ•™ç¨‹æ­¥éª¤ 4:åˆ›å»ºæ§åˆ¶å™¨-> slashCommandController.go

ä»¥ä¸‹æµç¨‹å›¾æè¿°äº†æ§åˆ¶å™¨çš„è¡Œä¸º:

*   æ¥æ”¶ä¸€ä¸ªæ¾å¼›å‘½ä»¤`/rocket`ç„¶åå‘é€ä¸€ä¸ªçŸ­æš‚çš„äº¤äº’æ¶ˆæ¯
*   å¦‚æœç”¨æˆ·åŒæ„ï¼Œæ›´æ–°æ¶ˆæ¯ä»¥æ˜¾ç¤ºç«ç®­å‘å°„å€’è®¡æ—¶ã€‚

![](img/abc6f3f40777420d94dbb1520fd8df0f.png)

## è®¾ç½®æ§åˆ¶å™¨

æˆ‘ä»¬é¦–å…ˆåˆ›å»ºä¸€ä¸ªåˆå§‹åŒ–æ„é€ å‡½æ•°ã€‚è¿™ä¸ªæ–¹æ³•ä½¿ç”¨`*socketmode.SocketmodeHandler`æ¥æ³¨å†Œæˆ‘ä»¬æƒ³è¦æ¥æ”¶çš„äº‹ä»¶ä»¥åŠå“ªä¸ªå‡½æ•°å°†å¤„ç†å®ƒä»¬ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¬åˆ°ä¸¤ä¸ªäº‹ä»¶:

*   å°†ç”±`c.launchRocketAnnoncement`å¤„ç†çš„æ–œçº¿å‘½ä»¤â€œ/ç«ç®­â€
*   ä¸æˆ‘ä»¬æ¶ˆæ¯çš„`approved`æŒ‰é’®çš„äº¤äº’å°†ç”±`c.launchRocket`å¤„ç†ã€‚è¿™ä¸ªæŒ‰é’®æ˜¯â€œäº¤äº’å—â€çš„ä¸€éƒ¨åˆ†ï¼Œç”±å¸¸é‡`views.RocketAnnoncementActionID`ä»£è¡¨çš„ ActionID å”¯ä¸€æ ‡è¯†ã€‚æˆ‘åœ¨è¿™é‡Œä½¿ç”¨ä¸€ä¸ªå¸¸é‡ï¼Œå› ä¸ºæˆ‘æƒ³ç¡®ä¿æˆ‘ç›‘å¬çš„`ActionID`ä¸ç”¨æˆ·è°ƒç”¨`/rocket`å‘½ä»¤åæˆ‘ä»¬å‘é€çš„æ¶ˆæ¯ä¸­å®šä¹‰çš„ç›¸åŒã€‚

## ç”¨ä¸€æ¡çŸ­æš‚çš„æ¶ˆæ¯å›åº”`rocket`

ç¼–å†™è¯¥å‡½æ•°çš„å…³é”®ç‚¹å¦‚ä¸‹:

1.  æ‚¨éœ€è¦å°†æ”¶åˆ°çš„æ³›å‹`socketmode.Event`è½¬æ¢ä¸º`slack.SlashCommand`
2.  æ‚¨éœ€è¦ç¡®è®¤æ‚¨æ”¶åˆ°äº†è¯¥äº‹ä»¶ã€‚(Slack å¸Œæœ›æ‚¨åœ¨ 3s å†…å›å¤)
3.  æ‚¨éœ€è¦åˆ›å»ºå°†è¦å‘é€çš„æ¶ˆæ¯ã€‚æˆ‘å°†åœ¨åé¢ç”¨å‡½æ•°`views.LaunchRocketAnnoncement`è®²è¿°è¿™ä¸€éƒ¨åˆ†ã€‚
4.  ä½ éœ€è¦é€šè¿‡ Slack API å‘é€ä½ çš„æ¶ˆæ¯ã€‚æ­¤æ“ä½œæœ‰ä¸¤ä¸ªé€‰é¡¹ã€‚é¦–å…ˆæ˜¯æ ‡å‡† API `chat.postmessage`çš„ä½¿ç”¨ã€‚ç¬¬äºŒç§æ˜¯ä½¿ç”¨ Slash å‘½ä»¤ä¸­æä¾›çš„å“åº” URLã€‚(ä¸‹ä¸€èŠ‚å°†è¯¦ç»†ä»‹ç»å“åº” URL)

## å¯¹ç”¨æˆ·åœ¨â€œæ‰¹å‡†â€æŒ‰é’®ä¸Šçš„æ“ä½œåšå‡ºååº”

è¯¥æ–¹æ³•çš„ç»“æ„ç±»ä¼¼äºå‰ä¸€ç§æ–¹æ³•ã€‚å¦‚æœä½ èƒ½ç¼–ç ä¸€ä¸ªï¼Œä½ ä¹Ÿèƒ½ç¼–ç è¿™ä¸ªğŸ˜‡ã€‚

å‚è§ slashCommandController.go å®Œæ•´ä»£ç [æ­¤å¤„](https://github.com/xNok/slack-go-demo-socketmode/blob/main/controllers/slashCommandController.go)ã€‚

# å…³äºå“åº” URL çš„æ›´å¤šä¿¡æ¯

å“åº” URL åŸºæœ¬ä¸Šæ˜¯ä¸€ä¸ª webhookï¼Œè®©æ‚¨åœ¨ 30 åˆ†é’Ÿå†…ä¸é¢‘é“äº’åŠ¨å¤šè¾¾ 5 æ¬¡ã€‚æ¯å½“è§¦å‘æ–œæ å‘½ä»¤æˆ–äº¤äº’æ¶ˆæ¯æ—¶ï¼ŒSlack éƒ½ä¼šæä¾›å“åº” URLã€‚

ä½¿ç”¨å“åº” URL æ—¶ï¼Œæ‚¨æœ‰ä¸¤ç§é€‰æ‹©:

*   å›åº”é¢‘é“ï¼Œè®©æ¯ä¸ªäººéƒ½èƒ½çœ‹åˆ°æœºå™¨äººçš„å›åº”`Slack.ResponseTypeInChannel`
*   ç”¨ä¸€ä¸ªçŸ­æš‚çš„æ¶ˆæ¯å“åº”ï¼Œåªæœ‰è§¦å‘å‘½ä»¤çš„ç”¨æˆ·æ‰èƒ½çœ‹åˆ°å®ƒ`slack.ResponseTypeEphemeral`

åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°†ä¸€ä¸ª`MsgOption`æ·»åŠ åˆ°æˆ‘ä»¬çš„`PostMessage`è°ƒç”¨ä¸­:

æœ‰å¿…è¦æåŠçš„æ˜¯ï¼Œå“åº” URL å…è®¸æ‚¨åœ¨é¢‘é“ä¸­å‘å¸ƒæ¶ˆæ¯ï¼Œå³ä½¿æ‚¨çš„ Bot å°šæœªæ·»åŠ åˆ°é¢‘é“ä¸­ã€‚å®é™…ä¸Š [chat.postMessage](https://api.slack.com/methods/chat.postMessage) åªå…è®¸ä½ å‘ä½ çš„æœºå™¨äººå·²ç»åŠ å…¥çš„é¢‘é“å‘å¸ƒæ¶ˆæ¯ï¼›å¦åˆ™ï¼Œæ‚¨ä¼šæ”¶åˆ°é”™è¯¯`not_in_channel`ã€‚æ¢å¥è¯è¯´ï¼Œå“åº” URL å…è®¸æ‚¨ä¸ç”¨æˆ·è¿›è¡Œäº¤äº’ï¼Œè€Œä¸è€ƒè™‘é€šå¸¸çš„æƒé™è§„åˆ™(å½“ç„¶ï¼Œä¸ºäº†å®‰å…¨èµ·è§ï¼Œæ¬¡æ•°æ˜¯æœ‰é™çš„)ã€‚

åˆ›å»ºå‘½ä»¤æ—¶è¦è€ƒè™‘çš„å…¶ä»–é€‰é¡¹:

*   å®‰æ’ä¸€æ¡æ¶ˆæ¯(å¦‚æœä½ çš„åº”ç”¨ç¨‹åºåˆ›å»ºäº†æŸç§æé†’)
*   åœ¨[åº”ç”¨ä¸»é¡µ](https://api.slack.com/start/overview#app_home)å‘é€æ¶ˆæ¯ã€‚ä¸çŸ­æš‚çš„æ¶ˆæ¯ç›¸æ¯”ï¼Œæˆ‘æ›´å–œæ¬¢è¿™ç§æ–¹æ³•ï¼Œå› ä¸ºå®ƒåœ¨ä¸€ä¸ªåœ°æ–¹ç•™ä¸‹äº†æ‚¨ä¸åº”ç”¨ç¨‹åºçš„æ‰€æœ‰äº¤äº’çš„ç—•è¿¹ã€‚
*   ä½¿ç”¨`slack.SlashCommand`ä¸­æä¾›çš„`trigger_id`æ‰“å¼€ä¸€ä¸ªæ¨¡æ€ã€‚è¿™æ˜¯ Slack çš„ä¸€ä¸ªè¿·äººçš„ç‰¹æ€§ã€‚æˆ‘æ›´å–œæ¬¢åœ¨å‘½ä»¤è¡Œä¸­è§£æå‚æ•°çš„æ–¹æ³•ï¼›å¯¹äºéå¼€å‘äººå‘˜æ¥è¯´ï¼Œå®ƒæ›´åŠ ç”¨æˆ·å‹å¥½ã€‚

# æ•™ç¨‹æ­¥éª¤ 5:åˆ›å»ºè§†å›¾> slashCommandView.go

æœ€åä½†åŒæ ·é‡è¦çš„æ˜¯ï¼Œæˆ‘ä»¬éœ€è¦å­¦ä¹ å¦‚ä½•ç”Ÿæˆæ¾å¼›ä¿¡æ¯ã€‚Slack æ¨å‡ºäº† [Block-kit](https://api.slack.com/block-kit) æ¥å¸®åŠ©æˆ‘ä»¬ä¸ç”¨è¯•é”™å°±èƒ½åˆ›å»ºæˆ‘ä»¬çš„ä¿¡æ¯ã€‚æˆ‘å¤„ç† slack æ¶ˆæ¯çš„æ–¹æ³•æ˜¯å°† Block-kit æœ‰æ•ˆè´Ÿè½½ä¿å­˜ä¸º JSON æ–‡ä»¶ï¼Œç„¶åä½¿ç”¨ [Go æ¨¡æ¿](https://golang.org/pkg/text/template/)æ¥å‘ˆç°æˆ‘çš„è§†å›¾å¹¶æ³¨å…¥å˜é‡ã€‚

æˆ‘å†™äº†ä¸€ç¯‡å…³äºè¿™ä¸ªä¸»é¢˜çš„ä¸“é—¨æ–‡ç« ï¼Œä»¥è¿›è¡Œæ›´æ·±å…¥çš„è§£é‡Š:

[](https://couedeloalexandre.medium.com/manage-static-assets-with-embed-golang-1-16-75c89c3eea39) [## ç®¡ç† Golang ä¸­çš„é™æ€èµ„äº§

### ä½¿ç”¨ Golang 1.16 æ–°åŒ…â€œåµŒå…¥â€çš„æ–°æ–¹æ³•

couedeloalexandre.medium.com](https://couedeloalexandre.medium.com/manage-static-assets-with-embed-golang-1-16-75c89c3eea39) 

æ‚¨å¯ä»¥åœ¨è¿™é‡Œå¾®è°ƒ Block-kit [ä¸­çš„ä¿¡æ¯ã€‚å°†æœ‰æ•ˆè´Ÿè½½ä¿å­˜ä¸ºä¸€ä¸ªåä¸ºã€‚`slackCommandAssets/annoncement.json`ã€‚](https://app.slack.com/block-kit-builder/T0B5XJYR2#%7B%22blocks%22:%5B%7B%22type%22:%22section%22,%22text%22:%7B%22type%22:%22mrkdwn%22,%22text%22:%22*You%20are%20about%20to%20lauch%20a%20new%20rocket*%22%7D%7D,%7B%22type%22:%22section%22,%22fields%22:%5B%7B%22type%22:%22mrkdwn%22,%22text%22:%22*Rocket:*%5CnFalcon%209%22%7D,%7B%22type%22:%22mrkdwn%22,%22text%22:%22*When:*%5Cn3s%20count%20down%22%7D%5D%7D,%7B%22type%22:%22actions%22,%22elements%22:%5B%7B%22type%22:%22button%22,%22text%22:%7B%22type%22:%22plain_text%22,%22emoji%22:true,%22text%22:%22Approve%22%7D,%22style%22:%22primary%22,%22value%22:%22click_me_123%22%7D,%7B%22type%22:%22button%22,%22text%22:%7B%22type%22:%22plain_text%22,%22emoji%22:true,%22text%22:%22Deny%22%7D,%22style%22:%22danger%22,%22value%22:%22click_me_123%22%7D%5D%7D%5D%7D)

åˆ›å»ºæ­¤è§†å›¾çš„è¦ç‚¹æ˜¯:

1.  Render æ¨¡æ¿å°†ç”¨æˆ·åæ³¨å…¥æ¶ˆæ¯ä¸­ã€‚æˆ‘åˆ›å»ºäº†ä¸€ä¸ªå°çš„å®ç”¨å‡½æ•°æ¥åšè¿™ä»¶äº‹ï¼Œå› ä¸ºæˆ‘åœ¨æ¯ä¸ªè§†å›¾ä¸­éƒ½é‡ç”¨å®ƒã€‚ [views/utils.go](https://github.com/xNok/slack-go-demo-socketmode/blob/main/views/utils.go) ã€‚æ¨¡æ¿ä¸­ä½¿ç”¨çš„å‚æ•°æœ‰:å€’è®¡æ—¶çš„ç§’æ•°`{{ .Number }}`ï¼Œæˆ‘ä»¬åœ¨åˆ›å»ºæ§åˆ¶å™¨`{{ .ActionID }}`æ—¶è®¨è®ºè¿‡çš„æ‰¹å‡†æŒ‰é’®çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œ
2.  å°†ç”Ÿæˆçš„æ¶ˆæ¯è§£ç»„ä¸ºä¸€ä¸ª Slack æ¶ˆæ¯ã€‚

è§ slashCommandView.go å®Œæ•´ä»£ç [æ­¤å¤„](https://github.com/xNok/slack-go-demo-socketmode/tree/main/views)ã€‚

# åç»­æ­¥éª¤

## å°è¯•æ­¤åº”ç”¨ç¨‹åº

æˆåŠŸå®Œæˆæ•™ç¨‹åğŸ’ªï¼Œæ‚¨å¯ä»¥è¿è¡Œæ‚¨çš„åº”ç”¨ç¨‹åº:

```
go run ./main.go
```

ä¹Ÿå¯ä»¥ç›´æ¥å…‹éš†[æˆ‘çš„åº“](https://github.com/xNok/slack-go-demo-socketmode)æå‰è¯•ä¸€è¯•ã€‚

## èƒ½æ”¹å–„å—ï¼Ÿ

ä¸€æ—¦å®Œæˆäº†æœ¬æ•™ç¨‹ï¼Œæ‚¨å°±ä¸ºæ‰€æœ‰åç»­çš„ Slack å‘½ä»¤æ‰“ä¸‹äº†åšå®çš„åŸºç¡€ã€‚æ‚¨ä¸ä»…å­¦ä¹ äº†æ–œæ å‘½ä»¤ï¼Œè¿˜å­¦ä¹ äº†å‘é€æ¶ˆæ¯(å®šæœŸçš„å’ŒçŸ­æš‚çš„)ã€ä½¿ç”¨ Block-kit å’Œåˆ›å»ºäº¤äº’å¼æ¶ˆæ¯ã€‚ä½†æ˜¯ä½ è¿˜è®°å¾—æˆ‘æåˆ°è¿‡æ¨¡æ€æ˜¯é€šè¿‡å‘½ä»¤è¡Œå‚æ•°æ”¶é›†ç”¨æˆ·è¾“å…¥çš„é¦–é€‰æ–¹å¼å—ï¼Ÿè¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„åç»­æŒ‘æˆ˜:

*   å‘ä¸´æ—¶æ¶ˆæ¯æ·»åŠ ä¸€ä¸ªæŒ‰é’®(ä¾‹å¦‚ï¼Œé…ç½® rocket ç±»å‹)
*   æ‰“å¼€ä¸€ä¸ªæ¨¡å¼ä»¥æä¾›å¯é…ç½®çš„é€‰é¡¹(ä¾‹å¦‚ï¼Œä½¿å€’è®¡æ—¶å¯é…ç½®)

# å‚è€ƒ

*   [https://api.slack.com/interactivity/slash-commands](https://api.slack.com/interactivity/slash-commands)
*   [https://api.slack.com/legacy/interactive-messages](https://api.slack.com/legacy/interactive-messages)