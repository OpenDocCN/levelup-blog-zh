<html>
<head>
<title>Developing DAPPs with Svelte and Web3/Ethers, using Polygon MATIC â€” Part 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ä½¿ç”¨Polygon MATICå¼€å‘å…·æœ‰Svelteå’ŒWeb3/Ethersçš„DAPPsç¬¬2éƒ¨åˆ†</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://levelup.gitconnected.com/developing-dapps-with-svelte-and-web3-ethers-using-polygon-matic-part-2-7a17af83ee6d?source=collection_archive---------4-----------------------#2022-11-12">https://levelup.gitconnected.com/developing-dapps-with-svelte-and-web3-ethers-using-polygon-matic-part-2-7a17af83ee6d?source=collection_archive---------4-----------------------#2022-11-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="f7d6" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">å¦‚ä½•å¼€å§‹ä½¿ç”¨Polygonçš„å­Ÿä¹°æµ‹è¯•ç½‘</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/c74d197d4bcee957288ad313138f2cc5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4faMpI2Y9ytGx5zYVdDPNQ.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">æ¥è‡ªAdobe Stockçš„è®¸å¯å›¾åƒ</figcaption></figure><p id="987b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å‘æ‚¨å±•ç¤ºäº†å¦‚ä½•åœ¨æµè§ˆå™¨ä¸­è®¾ç½®MetaMaskï¼Œåœ¨Polygon Mumbai Testnetä¸Šåˆ›å»ºä¸€ä¸ªå¸æˆ·ï¼Œç”¨MATICä¸ºè¯¥å¸æˆ·æä¾›èµ„é‡‘ï¼Œç”šè‡³åˆ›å»ºè‡ªå·±çš„ERC-20ä»¤ç‰Œ(åŠ å¯†è´§å¸)ã€‚</p><div class="lu lv gp gr lw lx"><a href="https://medium.com/coinmonks/developing-dapps-with-svelte-and-web3-using-polygon-matic-part-1-c3cc13adc4e4" rel="noopener follow" target="_blank"><div class="ly ab fo"><div class="lz ab ma cl cj mb"><h2 class="bd iu gy z fp mc fr fs md fu fw is bi translated">ä½¿ç”¨Polygon MATICç”¨Svelteå’ŒWeb3å¼€å‘DAPPsç¬¬1éƒ¨åˆ†</h2><div class="me l"><h3 class="bd b gy z fp mc fr fs md fu fw dk translated">å¦‚ä½•å¼€å§‹ä½¿ç”¨Polygonçš„å­Ÿä¹°æµ‹è¯•ç½‘</h3></div><div class="mf l"><p class="bd b dl z fp mc fr fs md fu fw dk translated">medium.com</p></div></div><div class="mg l"><div class="mh l mi mj mk mg ml ks lx"/></div></div></a></div><p id="dd58" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†ä»‹ç»å¦‚ä½•ç”¨Svelte(react . jsã€Angularã€Vueç­‰çš„æ›¿ä»£å“)åˆ›å»ºä¸€ä¸ªç®€å•çš„webåº”ç”¨ç¨‹åºã€‚)ï¼Œä½¿ç”¨Ethers.jså°†å…¶ä¸MetaMaské›†æˆï¼Œå¹¶ä¸Polygon Mumbai TestnetåŒºå—é“¾è¿›è¡Œé€šä¿¡ã€‚</p><p id="7c69" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">å¦‚æœå¯¹ç¬¬ä¸‰ç¯‡æ–‡ç« æ„Ÿå…´è¶£ï¼Œæˆ‘å°†æ¼”ç¤ºå¦‚ä½•å°†æ™ºèƒ½å¥‘çº¦éƒ¨ç½²åˆ°Polygon Mumbai Testnetä¸­ï¼Œå¹¶ä½¿ç”¨æˆ‘ä»¬çš„webåº”ç”¨ç¨‹åºä¸ä¹‹äº¤äº’ã€‚å¦‚æœè¿™æ˜¯ä½ æƒ³çœ‹åˆ°çš„ï¼Œè¯·è€ƒè™‘ä¸ºè¿™ä¸¤ç¯‡æ–‡ç« é¼“æŒã€‚</p><h2 id="41e8" class="mm mn it bd mo mp mq dn mr ms mt dp mu lh mv mw mx ll my mz na lp nb nc nd ne bi translated">å…ˆå†³æ¡ä»¶</h2><p id="3360" class="pw-post-body-paragraph ky kz it la b lb nf ju ld le ng jx lg lh nh lj lk ll ni ln lo lp nj lr ls lt im bi translated">ä¸ºäº†åˆ›å»ºæˆ‘ä»¬è‹—æ¡çš„webåº”ç”¨ç¨‹åºï¼Œæˆ‘ä»¬å°†éœ€è¦ä½¿ç”¨<a class="ae nk" href="https://www.npmjs.com/" rel="noopener ugc nofollow" target="_blank">èŠ‚ç‚¹åŒ…ç®¡ç†å™¨</a> ( <a class="ae nk" href="https://www.npmjs.com/" rel="noopener ugc nofollow" target="_blank"> NPM </a>)ã€‚è¿™æ€»æ˜¯æ•™ç¨‹ä¸­æ£˜æ‰‹çš„éƒ¨åˆ†ï¼Œå› ä¸ºè¯»è€…å¯èƒ½ä½¿ç”¨å¾®è½¯ã€OSXæˆ–Linuxç³»ç»Ÿã€‚æ ¹æ®æ‚¨çš„å¹³å°ï¼Œå®‰è£…ä¼šæœ‰æ‰€ä¸åŒã€‚æˆ‘ç”¨çš„æ˜¯è‹¹æœç”µè„‘ï¼Œæ‰€ä»¥æˆ‘åªæ˜¯ç”¨<a class="ae nk" href="https://brew.sh/" rel="noopener ugc nofollow" target="_blank">è‡ªåˆ¶è½¯ä»¶</a>æ¥å®‰è£…æˆ‘çš„ã€‚ä¾‹å¦‚â€œ<strong class="la iu"> brewæ›´æ–°</strong>â€ï¼Œç„¶åâ€œ<strong class="la iu"> brewå®‰è£…èŠ‚ç‚¹</strong>â€ã€‚å¦‚æœä¸€åˆ‡æŒ‰è®¡åˆ’è¿›è¡Œï¼Œå®ƒåº”è¯¥æ˜¯è¿™æ ·çš„(ç‰ˆæœ¬å¯èƒ½ä¼šæœ‰æ‰€ä¸åŒ)ã€‚</p><pre class="kj kk kl km gt nl nm nn bn no np bi"><span id="3f46" class="nq mn it nm b be nr ns l nt nu">% <strong class="nm iu">npm --version</strong><br/>8.3.1<br/><br/>% <strong class="nm iu">node --version</strong><br/>v17.4.0<br/><br/>% <strong class="nm iu">npx --version</strong><br/>8.3.1</span></pre><h2 id="ab43" class="mm mn it bd mo mp mq dn mr ms mt dp mu lh mv mw mx ll my mz na lp nb nc nd ne bi translated">è‹—æ¡å…¥é—¨åº”ç”¨</h2><p id="f1ab" class="pw-post-body-paragraph ky kz it la b lb nf ju ld le ng jx lg lh nh lj lk ll ni ln lo lp nj lr ls lt im bi translated">ä¸ºäº†å¼€å§‹ä½¿ç”¨Svelteï¼Œæˆ‘å»ºè®®ä½¿ç”¨æ¨¡æ¿åˆ›å»ºæ‚¨çš„åˆå§‹é¡¹ç›®ã€‚æˆ‘å°†æŠŠæˆ‘çš„å‘½åä¸ºâ€œ<strong class="la iu">ä¸­å‹dapp </strong>â€ã€‚</p><pre class="kj kk kl km gt nl nm nn bn no np bi"><span id="e1fc" class="nq mn it nm b be nr ns l nt nu">% <strong class="nm iu">npx degit sveltejs/template medium-dapp</strong><br/>Need to install the following packages:<br/>  degit<br/>Ok to proceed? (y) y<br/>&gt; cloned sveltejs/template#HEAD to medium-dapp</span></pre><p id="543b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">å®Œæˆåï¼Œå°†åˆ›å»ºä¸€ä¸ªåä¸ºâ€œ<strong class="la iu"> medium-dapp </strong>çš„æ–°ç›®å½•ï¼Œå…¶æ–‡ä»¶ç»“æ„å¦‚ä¸‹æ‰€ç¤ºã€‚</p><pre class="kj kk kl km gt nl nm nn bn no np bi"><span id="dd03" class="nq mn it nm b be nr ns l nv nu">% cd medium-dapp<br/>medium-dapp % tree .<br/><br/>.<br/>|____README.md<br/>|____rollup.config.js<br/>|____public<br/>| |____index.html<br/>| |____global.css<br/>| |____favicon.png<br/>|____.gitignore<br/>|____package.json<br/>|____scripts<br/>| |____setupTypeScript.js<br/>|____src<br/>| |____App.svelte<br/>| |____main.js</span></pre><p id="97a7" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">åœ¨ä¸€ä¸ªå®Œå…¨ä¸ç›¸å…³çš„é—®é¢˜ä¸Šâ€”â€”â€œ<strong class="la iu">tree</strong>â€åœ¨Linuxä¸Šæ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„å‘½ä»¤ï¼Œä½†æ˜¯å®ƒä¸åŒ…å«åœ¨OSXä¸Šã€‚ä½œä¸ºä¸€ç§æ–¹ä¾¿çš„è§£å†³æ–¹æ³•ï¼Œæ‚¨å¯ä»¥åˆ›å»ºä¸€ä¸ªåˆ«åï¼Œå¦‚ä¸‹æ‰€ç¤º(äº§ç”Ÿä¸Šé¢çš„è¾“å‡º)ã€‚</p><pre class="kj kk kl km gt nl nm nn bn no np bi"><span id="0f3a" class="nq mn it nm b be nr ns l nv nu">alias tree="find . -print | sed -e 's;[^/]*/;|____;g;s;____|; |;g'"</span></pre><p id="ac33" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">Svelteçš„åº“éœ€æ±‚å°†åŒ…å«åœ¨<strong class="la iu"> package.json </strong>æ–‡ä»¶ä¸­ã€‚</p><pre class="kj kk kl km gt nl nm nn bn no np bi"><span id="6a64" class="nq mn it nm b be nr ns l nv nu">{<br/>  "name": "svelte-app",<br/>  "version": "1.0.0",<br/>  "private": true,<br/>  "scripts": {<br/>    "build": "rollup -c",<br/>    "dev": "rollup -c -w",<br/>    "start": "sirv public --no-clear"<br/>  },<br/>  "devDependencies": {<br/>    "@rollup/plugin-commonjs": "^17.0.0",<br/>    "@rollup/plugin-node-resolve": "^11.0.0",<br/>    "rollup": "^2.3.4",<br/>    "rollup-plugin-css-only": "^3.1.0",<br/>    "rollup-plugin-livereload": "^2.0.0",<br/>    "rollup-plugin-svelte": "^7.0.0",<br/>    "rollup-plugin-terser": "^7.0.0",<br/>    "svelte": "^3.0.0"<br/>  },<br/>  "dependencies": {<br/>    "sirv-cli": "^2.0.0"<br/>  }<br/>}</span></pre><p id="26b0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">åœ¨â€œ<strong class="la iu"> medium-dapp </strong>â€ç›®å½•ä¸‹ï¼Œæ‚¨å¯ä»¥è¿è¡Œâ€œ<strong class="la iu"> yarn </strong>â€æˆ–â€œ<strong class="la iu"> npm </strong>â€æ¥å®‰è£…ä¾èµ–é¡¹ã€‚æˆ‘æ›´å–œæ¬¢ç”¨â€œ<strong class="la iu">çº±</strong>â€ä½†è¿™å–å†³äºä½ ã€‚</p><pre class="kj kk kl km gt nl nm nn bn no np bi"><span id="9036" class="nq mn it nm b be nr ns l nt nu">medium-dapp % <strong class="nm iu">yarn </strong><br/>yarn install v1.22.17<br/>info No lockfile found.<br/>[1/4] ğŸ”  Resolving packages...<br/>[2/4] ğŸšš  Fetching packages...<br/>[3/4] ğŸ”—  Linking dependencies...<br/>[4/4] ğŸ”¨  Building fresh packages...<br/>success Saved lockfile.<br/>warning Your current version of Yarn is out of date. The latest version is "1.22.19", while you're on "1.22.17".<br/>info To upgrade, run the following command:<br/>$ brew upgrade yarn<br/>âœ¨  Done in 13.14s.</span></pre><p id="5147" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">å¦‚æœä¸€åˆ‡éƒ½æŒ‰è®¡åˆ’è¿›è¡Œï¼Œæ‚¨åº”è¯¥èƒ½å¤Ÿå¯åŠ¨â€œ<strong class="la iu"> hello world </strong>â€ç½‘ç«™ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚</p><pre class="kj kk kl km gt nl nm nn bn no np bi"><span id="c495" class="nq mn it nm b be nr ns l nt nu">medium-dapp % <strong class="nm iu">npm run dev</strong><br/><br/>&gt; svelte-app@1.0.0 dev<br/>&gt; rollup -c -w<br/><br/>rollup v2.79.1<br/>bundles src/main.js â†’ public/build/bundle.js...<br/>LiveReload enabled<br/>created public/build/bundle.js in 202ms<br/><br/>[2022-11-12 09:48:50] waiting for changes...<br/><br/>&gt; svelte-app@1.0.0 start<br/>&gt; sirv public --no-clear "--dev"<br/><br/><br/>  Your application is ready~! ğŸš€<br/><br/>  - Local:      http://localhost:8080<br/>  - Network:    Add `--host` to expose<br/><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ LOGS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nw"><img src="../Images/2a9681a133953d914d35168d301ee31f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G2GxRaH6PcWvprDHT8KcaQ.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">ä½œè€…æˆªå›¾</figcaption></figure><p id="01f2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">åœ¨å¼€å‘è€…æ¨¡å¼ä¸‹è¿è¡Œå®ƒçš„å¥½å¤„æ˜¯ï¼Œä»»ä½•ä»£ç æ›´æ–°éƒ½å°†è‡ªåŠ¨åœ¨æµè§ˆå™¨ä¸­é‡æ–°åŠ è½½ï¼Œè€Œæ— éœ€é‡å¯ç«™ç‚¹ã€‚</p><p id="0a3a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">ä¾‹å¦‚ï¼Œæˆ‘è®©ç°æœ‰çš„â€œ<strong class="la iu"> npm run dev </strong>â€ç»ˆç«¯è¿è¡Œã€‚æˆ‘æ‰“å¼€ä¸€ä¸ªæ–°çš„ç»ˆç«¯ï¼Œå¹¶åœ¨æˆ‘çš„IDEä¸­æ‰“å¼€ç›®å½•ï¼Œè¿™æ˜¯<a class="ae nk" href="https://code.visualstudio.com/" rel="noopener ugc nofollow" target="_blank"> Visual Studioä»£ç </a>ã€‚</p><pre class="kj kk kl km gt nl nm nn bn no np bi"><span id="c600" class="nq mn it nm b be nr ns l nt nu">medium-dapp % code .<br/>medium-dapp % </span></pre><p id="002e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">æˆ‘å°†â€œ<strong class="la iu"> HELLO WORLD </strong>â€çš„é¢œè‰²ä»çº¢è‰²æ”¹ä¸ºè“è‰²ï¼Œå¹¶ä¿å­˜äº†æ–‡ä»¶ã€‚</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/950e9d915d4590262e683b52caace3ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5wBdDTFfXkdtMI0DFBFMjg.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">ä½œè€…æˆªå›¾</figcaption></figure><p id="54ad" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">è¿™äº›å˜åŒ–é©¬ä¸Šå°±åæ˜ å‡ºæ¥äº†ã€‚</p><pre class="kj kk kl km gt nl nm nn bn no np bi"><span id="90f2" class="nq mn it nm b be nr ns l nv nu">bundles src/main.js â†’ public/build/bundle.js...<br/>created public/build/bundle.js in 99ms<br/><br/>[2022-11-12 09:54:16] waiting for changes...<br/>  [09:54:57] 200 â”€ 4.54ms â”€ /<br/>  [09:54:57] 200 â”€ 3.66ms â”€ /global.css<br/>  [09:54:57] 200 â”€ 4.48ms â”€ /build/bundle.css<br/>  [09:54:57] 200 â”€ 0.97ms â”€ /build/bundle.js<br/>  [09:54:57] 200 â”€ 0.96ms â”€ /favicon.png<br/>  [09:55:27] 200 â”€ 0.58ms â”€ /<br/>  [09:55:27] 200 â”€ 5.08ms â”€ /global.css<br/>  [09:55:27] 200 â”€ 5.96ms â”€ /build/bundle.css<br/>  [09:55:27] 200 â”€ 2.19ms â”€ /build/bundle.js<br/>  [09:55:27] 200 â”€ 0.80ms â”€ /favicon.png</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/b576bc907b8029b3459b3b724289feef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y-IXT8EYI3Vc56nclstvZA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">ä½œè€…æˆªå›¾</figcaption></figure><p id="15a0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">æˆ‘ä»¬ç°åœ¨æœ‰ä¸€ä¸ªåŸºæœ¬çš„è‹—æ¡çš„åº”ç”¨ç¨‹åºå¯åŠ¨å’Œè¿è¡Œã€‚ä¸‹ä¸€æ­¥å°†å¼€å§‹å°†å®ƒä¸å…ƒæ©ç é›†æˆã€‚</p><h2 id="5eb8" class="mm mn it bd mo mp mq dn mr ms mt dp mu lh mv mw mx ll my mz na lp nb nc nd ne bi translated">Web3ä¸ä»¥å¤ªç½‘</h2><p id="2dc0" class="pw-post-body-paragraph ky kz it la b lb nf ju ld le ng jx lg lh nh lj lk ll ni ln lo lp nj lr ls lt im bi translated">è¿™ä¸¤ä¸ªJavascriptåº“çš„è¯­æ³•ç•¥æœ‰ä¸åŒï¼Œä½†å®ƒä»¬æœ¬è´¨ä¸Šåšçš„æ˜¯ç›¸åŒçš„äº‹æƒ…ã€‚å®ƒä»¬éƒ½æ˜¯"<strong class="la iu">åŒæ ·å—æ¬¢è¿çš„</strong>"ï¼Œä½†æ˜¯å°±æˆ‘æ‰€è§"<strong class="la iu">é†šç±»</strong>"ä¼¼ä¹æ˜¯ç°åœ¨å¤§å¤šæ•°å¼€å‘äººå‘˜çš„é¦–é€‰(è‡³å°‘åœ¨æˆ‘ä»äº‹çš„é¡¹ç›®ä¸­)ã€‚Web3ä¼¼ä¹æ˜¯"<strong class="la iu">è¥é”€åç§°</strong>"ä½ å¬åˆ°çš„å¾ˆå¤šå¯èƒ½æ›´å¤šçš„æ˜¯æŒ‡å®ƒæ‰§è¡Œçš„åŠŸèƒ½ï¼Œè€Œä¸æ˜¯å®ƒå®é™…ä¸Šæ˜¯ä»€ä¹ˆã€‚å½’æ ¹ç»“åº•ï¼Œé€‰æ‹©æƒåœ¨ä½ ã€‚å®ƒä»¬å„æœ‰åˆ©å¼Šï¼Œä½†å¤§å¤šæ˜¯è£…é¥°æ€§çš„ã€‚è¿™ç¯‡æ–‡ç« ä¸æ‰“ç®—æƒè¡¡åˆ©å¼Šï¼Œä½†æˆ‘ä»ç„¶æƒ³æä¾›æ›´å¤šçš„ä¿¡æ¯ã€‚æˆ‘å‘ç°äº†è¿™ä¸ªYouTubeè§†é¢‘ï¼Œè¿™ä¸ªäººè§£é‡Šå¾—å¾ˆå¥½ï¼Œæ‰€ä»¥æˆ‘ä¸æ‰“ç®—é‡æ–°å‘æ˜è½®å­ã€‚æˆ‘æ¯”å…¶ä»–äººæ›´å–œæ¬¢è¿™ä¸ªè§£é‡Šçš„åŸå› æ˜¯ï¼Œä»–åœ¨ä»–çš„Github repoä¸­ä¹Ÿæä¾›äº†ç±»ä¼¼çš„ä¾‹å­ï¼Œæ‰€ä»¥ä½ å¯ä»¥è¿›è¡Œæ¯”è¾ƒã€‚</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nz oa l"/></div></figure><h2 id="b866" class="mm mn it bd mo mp mq dn mr ms mt dp mu lh mv mw mx ll my mz na lp nb nc nd ne bi translated">ä½¿ç”¨é†šä¸è¶…è–„è¶…å±è”½é€šä¿¡</h2><p id="d946" class="pw-post-body-paragraph ky kz it la b lb nf ju ld le ng jx lg lh nh lj lk ll ni ln lo lp nj lr ls lt im bi translated">æ˜¯çš„ï¼Œâ€œ<strong class="la iu">é†šç±»</strong>â€â€¦æˆ‘å–œæ¬¢â€œ<strong class="la iu">é†šç±»</strong>â€ï¼Œæˆ‘åœ¨Svelteä¸­åšçš„æ•´åˆå°†ä½¿ç”¨è¿™ä¸ªåº“ã€‚å¦‚æœä½ å¯¹ä½¿ç”¨â€œ<strong class="la iu"> web3 </strong>â€æœ‰å¼ºçƒˆçš„æ„Ÿè§‰ï¼Œç›¸åå®ƒéå¸¸ç›¸ä¼¼ï¼Œæ‰€ä»¥è½¬æ¢åº”è¯¥å¾ˆå®¹æ˜“ã€‚</p><p id="3553" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">ä½ éœ€è¦åœ¨ä½ çš„é¡¹ç›®ä¸­å®‰è£…<strong class="la iu"> ethers </strong>ã€‚å¦‚æœç½‘ç«™è¿˜åœ¨è¿è¡Œï¼Œåœæ­¢ç½‘ç«™ï¼Œè¿è¡Œâ€œ<strong class="la iu">çº±çº¿æ·»åŠ é†š</strong>â€æˆ–â€œ<strong class="la iu"> npmå®‰è£…é†š</strong>â€ï¼Œéšä½ å–œæ¬¢ã€‚</p><pre class="kj kk kl km gt nl nm nn bn no np bi"><span id="84b3" class="nq mn it nm b be nr ns l nt nu">medium-dapp % <strong class="nm iu">yarn add ethers</strong><br/>yarn add v1.22.17<br/>[1/4] ğŸ”  Resolving packages...<br/>[2/4] ğŸšš  Fetching packages...<br/>[3/4] ğŸ”—  Linking dependencies...<br/>[4/4] ğŸ”¨  Building fresh packages...<br/><br/>success Saved lockfile.<br/>success Saved 18 new dependencies.<br/>info Direct dependencies<br/>â””â”€ ethers@5.7.2<br/>info All dependencies<br/>â”œâ”€ @ethersproject/abi@5.7.0<br/>â”œâ”€ @ethersproject/contracts@5.7.0<br/>â”œâ”€ @ethersproject/json-wallets@5.7.0<br/>â”œâ”€ @ethersproject/providers@5.7.2<br/>â”œâ”€ @ethersproject/solidity@5.7.0<br/>â”œâ”€ @ethersproject/units@5.7.0<br/>â”œâ”€ @ethersproject/wallet@5.7.0<br/>â”œâ”€ aes-js@3.0.0<br/>â”œâ”€ bech32@1.1.4<br/>â”œâ”€ brorand@1.1.0<br/>â”œâ”€ elliptic@6.5.4<br/>â”œâ”€ ethers@5.7.2<br/>â”œâ”€ hash.js@1.1.7<br/>â”œâ”€ hmac-drbg@1.0.1<br/>â”œâ”€ js-sha3@0.8.0<br/>â”œâ”€ minimalistic-assert@1.0.1<br/>â”œâ”€ scrypt-js@3.0.1<br/>â””â”€ ws@7.4.6<br/>âœ¨  Done in 8.30s.</span></pre><p id="ca55" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">å†æ¬¡å¯åŠ¨æ‚¨çš„webæœåŠ¡å™¨ï¼Œâ€œnpm run dev â€ï¼Œå¹¶æ‰“å¼€ä¸€ä¸ªå•ç‹¬çš„çª—å£æ¥ç¼–è¾‘ä»£ç ã€‚</p><p id="d3ba" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">ä¸ºäº†èŠ‚çœæ—¶é—´ï¼Œæˆ‘å°†é‡å¤ä½¿ç”¨ä¸Šé¢æåˆ°çš„å¯åŠ¨ä»£ç ã€‚æˆ‘å°†åªåœ¨src/App.svelteæ–‡ä»¶ä¸­å·¥ä½œã€‚</p><p id="ceda" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">æˆ‘ä»¬çš„æœ€ç»ˆç»“æœå°†æ˜¯è¿™æ ·çš„â€¦</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ny"><img src="../Images/76ec3bcb0445747824f5a8af3fa9f0c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3yaYg2RSFwl63DdRU3s1uw.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">ä½œè€…æˆªå›¾</figcaption></figure><ul class=""><li id="7bd1" class="ob oc it la b lb lc le lf lh od ll oe lp of lt og oh oi oj bi translated">åŠ è½½é¡µé¢æ—¶ï¼Œå…ƒæ©ç å°†è‡ªåŠ¨è¿æ¥</li><li id="d97d" class="ob oc it la b lb ok le ol lh om ll on lp oo lt og oh oi oj bi translated">å¦‚æœå…ƒæ©ç å·²å®‰è£…ã€è§£é”å¹¶è¿æ¥ï¼Œå®ƒå°†è¿”å›(æ¯3ç§’æ£€æŸ¥ä¸€æ¬¡)</li><li id="3d12" class="ob oc it la b lb ok le ol lh om ll on lp oo lt og oh oi oj bi translated">å¦‚æœå…ƒæ©ç ä¸­çš„è´¦æˆ·å‘ç”Ÿå˜åŒ–ï¼Œåˆ™â€œ<strong class="la iu">å…³è”è´¦æˆ·</strong>å°†ç«‹å³æ›´æ–°</li><li id="8456" class="ob oc it la b lb ok le ol lh om ll on lp oo lt og oh oi oj bi translated">å°†æ˜¾ç¤ºå½“å‰MetaMaské’±åŒ…ä¸­çš„â€œ<strong class="la iu">è‡ªåŠ¨ä½™é¢</strong>â€(æ¯3ç§’æ£€æŸ¥ä¸€æ¬¡)</li><li id="23d7" class="ob oc it la b lb ok le ol lh om ll on lp oo lt og oh oi oj bi translated">å°†å¯¹ç…§æˆ‘ä»¬åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­åˆ›å»ºçš„ERC-20ä»¤ç‰Œå¥‘çº¦æ¥æ£€æŸ¥â€œ<strong class="la iu">æƒ ç‰¹å°”ä½™é¢</strong>â€(æ¯3ç§’æ£€æŸ¥ä¸€æ¬¡)</li></ul><p id="009f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">æˆ‘æ•…æ„è¯•ç€ä¸è¦è®©å®ƒå˜å¾—å¤ªå¤æ‚ï¼Œæ‰€ä»¥å®ƒå¾ˆå®¹æ˜“ç†è§£ã€‚ä½ å¯ä»¥åšå¾ˆå¤šäº‹æƒ…æ¥æ”¹å–„è¿™ä¸€ç‚¹ï¼Œæ¯”å¦‚ä½¿ç”¨è‹—æ¡å•†åº—ã€‚å®ƒæœ‰ç‚¹åƒReact.jsçš„ç¿»ç‰ˆï¼Œä½†æ˜¯æ›´åŠ ç®€å•æ˜äº†ã€‚å®ƒåŸºæœ¬ä¸Šæ˜¯åº”ç”¨ç¨‹åºå˜é‡çš„ä¸­å¤®å­˜å‚¨ã€‚</p><p id="1333" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu">è®©æˆ‘ä»¬æ·±å…¥ç ”ç©¶ä»£ç â€¦â€¦</strong></p><p id="9c98" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">é¦–å…ˆï¼Œæˆ‘ä»¬å°†ä»<strong class="la iu"> &lt;è„šæœ¬&gt;â€¦&lt;/è„šæœ¬&gt; </strong>æ ‡ç­¾å†…çš„ä»£ç å¼€å§‹ã€‚è¿™æ˜¯æ‚¨çš„Javascriptå°†è¦å»çš„åœ°æ–¹ã€‚</p><p id="2ff4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">å°†Ethers.jså¯¼å…¥åˆ°æ‚¨çš„é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ä¹‹å‰å·²ç»å®‰è£…äº†å®ƒã€‚</p><pre class="kj kk kl km gt nl nm nn bn no np bi"><span id="fd04" class="nq mn it nm b be nr ns l nv nu">import { ethers } from "ethers";</span></pre><p id="b744" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">é…ç½®æ‚¨çš„å¸¸æ•°ã€‚æˆ‘ä½¿ç”¨äº†ERC 20ä»¤ç‰ŒABIçš„ä¸€ä¸ªå­é›†ã€‚é€šå¸¸æ‚¨ä¼šä»separe ERC20.jsonæ–‡ä»¶å¯¼å…¥æ•´ä¸ªABIã€‚å‡ºäºæœ¬æ–‡çš„ç›®çš„ï¼Œæˆ‘åªæ˜¯æ·»åŠ äº†æˆ‘ä»¬ç°åœ¨éœ€è¦çš„å†…å®¹ã€‚æˆ‘è¿˜åŒ…å«äº†â€œ<strong class="la iu"> tokenAddress </strong>â€ï¼Œè¿™æ˜¯æˆ‘çš„WHITTLEä»¤ç‰Œéƒ¨ç½²åœ¨åŒºå—é“¾ä¸Šçš„åˆåŒåœ°å€ã€‚<a class="ae nk" href="https://medium.com/coinmonks/developing-dapps-with-svelte-and-web3-using-polygon-matic-part-1-c3cc13adc4e4" rel="noopener">æ›´å¤šä¿¡æ¯è¯·å‚è€ƒä¸Šä¸€ç¯‡æ–‡ç« </a>ã€‚</p><pre class="kj kk kl km gt nl nm nn bn no np bi"><span id="00d2" class="nq mn it nm b be nr ns l nv nu">const ERC20_ABI = [<br/>  {<br/>    constant: true,<br/>    inputs: [<br/>      {<br/>        name: "_owner",<br/>        type: "address",<br/>      },<br/>    ],<br/>    name: "balanceOf",<br/>    outputs: [<br/>      {<br/>        name: "balance",<br/>        type: "uint256",<br/>      },<br/>    ],<br/>    payable: false,<br/>    type: "function",<br/>  },<br/>];<br/><br/>const tokenAddress = "0x348B9EaA3350EC3EfDB731FAc13EA1De234d2DE6";</span></pre><p id="2cc1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">ç„¶åæˆ‘ä»¬å®šä¹‰å…¨å±€å˜é‡ã€‚å¸Œæœ›å®ƒä»¬æ˜¯ä¸è¨€è‡ªæ˜çš„ï¼Œä¸éœ€è¦è§£é‡Šã€‚</p><pre class="kj kk kl km gt nl nm nn bn no np bi"><span id="3464" class="nq mn it nm b be nr ns l nv nu">let provider;<br/>let signer;<br/>let signerAddress;<br/>let tokenContract;<br/>let tokenBalance = 0;<br/>let accountBalance = 0;<br/>let isConnected = false;<br/>let isUnlocked = false;<br/>let initialized = false;<br/>let isPermanentlyDisconnected = false;<br/>let metamaskStatus = "...";</span></pre><p id="b41a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">ç„¶åæˆ‘åˆ›å»ºäº†ä¸€ä¸ªåä¸ºâ€œ<strong class="la iu"> connectWallet </strong>â€çš„å¼‚æ­¥å‡½æ•°ã€‚æˆ‘åœ¨é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨è¿è¡Œè¿™ä¸ªï¼Œä½†æ˜¯ä½ å¯ä»¥å¾ˆå®¹æ˜“åœ°å°†å®ƒé™„åŠ åˆ°ä¸€ä¸ªæŒ‰é’®ä¸Šã€‚è¿™ä¸ªå‡½æ•°æœ‰ä¸€äº›åŸºæœ¬çš„å…ƒæ©ç é”™è¯¯å¤„ç†æ¥æ£€æµ‹çŠ¶æ€ã€‚æˆ‘è§è¿‡å¤ªå¤šè¿™æ–¹é¢åšå¾—ä¸å¥½çš„åœ°æ–¹ã€‚å…ƒæ©ç å¯ä»¥å®‰è£…æˆ–ä¸å­˜åœ¨ã€é”å®šæˆ–è§£é”ã€è¿æ¥æˆ–ä¸è¿æ¥ç­‰ã€‚ä¹Ÿæœ‰å¯èƒ½åœ¨è°ƒç”¨"<strong class="la iu"> connectWallet </strong>"ä¹‹åè¿™ç§æƒ…å†µä¼šå‘ç”Ÿå˜åŒ–ï¼Œæ‰€ä»¥åªæ£€æŸ¥ä¸€æ¬¡æ˜¯ä¸å¤Ÿçš„ã€‚åœ¨è¿™ä¸ªå‡½æ•°ä¸­ï¼Œæˆ‘æ£€ç´¢é‡è¦çš„ä¿¡æ¯ï¼Œæ¯”å¦‚å…ƒæ©ç ä¸­æ´»åŠ¨å¸æˆ·çš„åœ°å€ã€å…ƒæ©ç ä¸­çš„å¸æˆ·ä½™é¢ä»¥åŠå…ƒæ©ç ä¸­æ´»åŠ¨å¸æˆ·çš„ä»¤ç‰Œä½™é¢ã€‚</p><pre class="kj kk kl km gt nl nm nn bn no np bi"><span id="54b0" class="nq mn it nm b be nr ns l nv nu">async function connectWallet() {<br/>  const { ethereum } = window;<br/><br/>  if (typeof window.ethereum !== "undefined") {<br/>    // connect<br/>    await ethereum.request({ method: "eth_requestAccounts" }).catch((err) =&gt; {<br/>      if (err.code === 4001) {<br/>        // EIP-1193 userRejectedRequest<br/>        alert("You need to install MetaMask");<br/>      } else {<br/>        console.error(err);<br/>      }<br/>    });<br/><br/>    // get provider<br/>    provider = new ethers.providers.Web3Provider(ethereum);<br/><br/>    // get signer<br/>    signer = provider.getSigner();<br/><br/>    // get connected wallet address<br/>    signerAddress = await signer.getAddress();<br/><br/>    // get account balance<br/>    accountBalance = await provider.getBalance(signerAddress);<br/><br/>    // erc-20 token<br/>    tokenContract = new ethers.Contract(tokenAddress, ERC20_ABI, provider);<br/>    tokenBalance = await tokenContract.balanceOf(signerAddress);<br/><br/>    // update on account change<br/>    ethereum.on("accountsChanged", function (accounts) {<br/>      signerAddress = accounts[0];<br/>    });<br/>  } else {<br/>    alert("MetaMask has not been detected in your browser!");<br/>    console.err("MetaMask has not been detected in your browser!");<br/>  }<br/>}</span></pre><p id="c009" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">æ­£å¦‚æˆ‘ä¸Šé¢æåˆ°çš„ï¼Œåœ¨æœ€åˆçš„è¿æ¥ä¹‹åï¼Œå¾ˆå¤šäº‹æƒ…éƒ½ä¼šæ”¹å˜ã€‚ä¸ä»…æ˜¯è¿æ¥çŠ¶æ€ï¼Œè¿˜æœ‰å¸æˆ·ä½™é¢ã€‚ä¾‹å¦‚ï¼Œå¦‚æœåœ¨MetaMaskçš„è´¦æˆ·ä¸­è¿›è¡Œäº†è½¬è´¦ï¼Œä½†webåº”ç”¨ç¨‹åºæ²¡æœ‰æ›´æ–°æ˜¾ç¤ºçš„ä½™é¢ï¼Œè¿™å°±ä¸å¥½äº†ã€‚è¯¥é¢„å®šåŠŸèƒ½æ¯3ç§’è¿è¡Œä¸€æ¬¡ã€‚å®ƒç¡®ä¿ä½™é¢å¾—åˆ°æ›´æ–°ï¼Œå¹¶æ˜¾ç¤ºæ­£ç¡®çš„çŠ¶æ€ã€‚</p><pre class="kj kk kl km gt nl nm nn bn no np bi"><span id="e5b5" class="nq mn it nm b be nr ns l nv nu">var accountInterval = setInterval(function () {<br/>  if (provider) {<br/>    ({ isConnected, isUnlocked, initialized, isPermanentlyDisconnected } =<br/>      window.ethereum._state);<br/><br/>    if (isConnected &amp;&amp; !isPermanentlyDisconnected &amp;&amp; initialized) {<br/>      if (isUnlocked) {<br/>        metamaskStatus = `&lt;span style="color: green;"&gt;MetaMask has been successfully detected in your browser, with external connectivity, and is unlocked.&lt;/span&gt;`;<br/><br/>        // get account balance<br/>        provider.getBalance(signerAddress).then((_accountBalance) =&gt; {<br/>          accountBalance = _accountBalance;<br/>        });<br/><br/>        // erc-20 token balance<br/>        tokenContract.balanceOf(signerAddress).then((_tokenBalance) =&gt; {<br/>          tokenBalance = _tokenBalance;<br/>        });<br/>      } else {<br/>        metamaskStatus = `&lt;span style="color: red;"&gt;Please unlock your MetaMask and reload.&lt;/span&gt;`;<br/>      }<br/>    } else {<br/>      if (isUnlocked) {<br/>        metamaskStatus = `&lt;span style="color: red;"&gt;MetaMask has been successfully detected in your browser, but without external connectivity.&lt;/span&gt;`;<br/>      } else {<br/>        metamaskStatus = `&lt;span style="color: red;"&gt;Please unlock your MetaMask and reload.&lt;/span&gt;`;<br/>      }<br/>    }<br/>  }<br/>}, 3000);</span></pre><p id="cc21" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">æ‚¨ä¼šæ³¨æ„åˆ°ï¼Œæˆ‘å¯¹å˜é‡â€œ<strong class="la iu"> metamaskStatus </strong>â€ä½¿ç”¨äº†åæ–œæ ã€‚æˆ‘æƒ³åŒ…æ‹¬HTMLï¼Œè¿™å°†æ ¹æ®çŠ¶æ€ç±»å‹åˆ‡æ¢é¢œè‰²ã€‚</p><p id="ba02" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">æœ€åä¸€è¡Œåªæ˜¯è¿è¡Œï¼Œâ€œ<strong class="la iu"> connectWallet </strong>â€ã€‚æ­£å¦‚æˆ‘ä¸Šé¢æåˆ°çš„ï¼Œå½“é¡µé¢åŠ è½½æ—¶æˆ‘ä¼šè‡ªåŠ¨è¿è¡Œå®ƒï¼Œä½†æ˜¯ä½ ä¹Ÿå¯ä»¥å¾ˆå®¹æ˜“åœ°å°†å®ƒç»‘å®šåˆ°ä¸€ä¸ªæŒ‰é’®ä¸Šã€‚</p><pre class="kj kk kl km gt nl nm nn bn no np bi"><span id="898d" class="nq mn it nm b be nr ns l nv nu">connectWallet();</span></pre><p id="9a27" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">æ¥ä¸‹æ¥çš„éƒ¨åˆ†æ˜¯<strong class="la iu"> &lt;ä¸»&gt;â€¦&lt;/ä¸»&gt; </strong>æ ‡ç­¾ã€‚æˆ‘ç”¨è¿™ä¸ªæ›¿æ¢äº†åˆå§‹æ¨¡æ¿ä¸­çš„å†…å®¹ã€‚</p><pre class="kj kk kl km gt nl nm nn bn no np bi"><span id="3c02" class="nq mn it nm b be nr ns l nv nu">&lt;main&gt;<br/>  &lt;h1&gt;MetaMask Integration&lt;/h1&gt;<br/>  &lt;p&gt;&lt;b&gt;Connected Account&lt;/b&gt;: {signerAddress}&lt;/p&gt;<br/>  &lt;p&gt;&lt;b&gt;MATIC Balance&lt;/b&gt;: {ethers.utils.formatEther(accountBalance)}&lt;/p&gt;<br/>  &lt;p&gt;&lt;b&gt;WHITTLE Balance&lt;/b&gt;: {ethers.utils.formatEther(tokenBalance)}&lt;/p&gt;<br/><br/>  &lt;br /&gt;<br/>  &lt;p&gt;{@html metamaskStatus}&lt;/p&gt;<br/>&lt;/main&gt;</span></pre><p id="8533" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">è¿™é‡Œè¦æ³¨æ„çš„è¦ç‚¹æ˜¯ï¼Œæˆ‘å°†ä½™é¢ä»ä¸€ä¸ªâ€œ<strong class="la iu">å¤§æ•°å­—</strong>â€æ ¼å¼åŒ–æˆå¯è¯»çš„ä¸œè¥¿ã€‚æ‚¨è¿˜ä¼šæ³¨æ„åˆ°ï¼Œæˆ‘å¯¹å˜é‡â€œ<strong class="la iu"> metamaskStatus </strong>â€çš„æ˜¾ç¤ºåšäº†ä¸€äº›ç‰¹æ®Šçš„å¤„ç†ã€‚å¦‚æœä¹‹å‰æ²¡æœ‰åŒ…å«htmlæ ‡ç­¾ï¼Œé‚£ä¹ˆâ€œ<strong class="la iu"> metamaskStatus </strong>â€çš„å†…å®¹å°†è¢«å‡†ç¡®è¿”å›ã€‚æˆ‘ä»¬å®é™…ä¸Šå¸Œæœ›è§£é‡Šå˜é‡å­—ç¬¦ä¸²ä¸­çš„HTMLã€‚</p><p id="6d9f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">æˆ‘æ²¡æœ‰ä»æ¨¡æ¿ä¸­ä¿®æ”¹<strong class="la iu"> &lt;æ ·å¼&gt;â€¦&lt;/æ ·å¼&gt; </strong>æ ‡ç­¾ã€‚</p><p id="6fba" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">å®Œæ•´çš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºâ€¦</p><pre class="kj kk kl km gt nl nm nn bn no np bi"><span id="6c84" class="nq mn it nm b be nr ns l nv nu">&lt;script&gt;<br/>  import { ethers } from "ethers";<br/><br/>  const ERC20_ABI = [<br/>    {<br/>      constant: true,<br/>      inputs: [<br/>        {<br/>          name: "_owner",<br/>          type: "address",<br/>        },<br/>      ],<br/>      name: "balanceOf",<br/>      outputs: [<br/>        {<br/>          name: "balance",<br/>          type: "uint256",<br/>        },<br/>      ],<br/>      payable: false,<br/>      type: "function",<br/>    },<br/>  ];<br/><br/>  const tokenAddress = "0x348B9EaA3350EC3EfDB731FAc13EA1De234d2DE6";<br/><br/>  let provider;<br/>  let signer;<br/>  let signerAddress;<br/>  let tokenContract;<br/>  let tokenBalance = 0;<br/>  let accountBalance = 0;<br/>  let isConnected = false;<br/>  let isUnlocked = false;<br/>  let initialized = false;<br/>  let isPermanentlyDisconnected = false;<br/>  let metamaskStatus = "...";<br/><br/>  async function connectWallet() {<br/>    const { ethereum } = window;<br/><br/>    if (typeof window.ethereum !== "undefined") {<br/>      // connect<br/>      await ethereum.request({ method: "eth_requestAccounts" }).catch((err) =&gt; {<br/>        if (err.code === 4001) {<br/>          // EIP-1193 userRejectedRequest<br/>          alert("You need to install MetaMask");<br/>        } else {<br/>          console.error(err);<br/>        }<br/>      });<br/><br/>      // get provider<br/>      provider = new ethers.providers.Web3Provider(ethereum);<br/><br/>      // get signer<br/>      signer = provider.getSigner();<br/><br/>      // get connected wallet address<br/>      signerAddress = await signer.getAddress();<br/><br/>      // get account balance<br/>      accountBalance = await provider.getBalance(signerAddress);<br/><br/>      // erc-20 token<br/>      tokenContract = new ethers.Contract(tokenAddress, ERC20_ABI, provider);<br/>      tokenBalance = await tokenContract.balanceOf(signerAddress);<br/><br/>      // update on account change<br/>      ethereum.on("accountsChanged", function (accounts) {<br/>        signerAddress = accounts[0];<br/>      });<br/>    } else {<br/>      alert("MetaMask has not been detected in your browser!");<br/>      console.err("MetaMask has not been detected in your browser!");<br/>    }<br/>  }<br/><br/>  var accountInterval = setInterval(function () {<br/>    if (provider) {<br/>      ({ isConnected, isUnlocked, initialized, isPermanentlyDisconnected } =<br/>        window.ethereum._state);<br/><br/>      if (isConnected &amp;&amp; !isPermanentlyDisconnected &amp;&amp; initialized) {<br/>        if (isUnlocked) {<br/>          metamaskStatus = `&lt;span style="color: green;"&gt;MetaMask has been successfully detected in your browser, with external connectivity, and is unlocked.&lt;/span&gt;`;<br/><br/>          // get account balance<br/>          provider.getBalance(signerAddress).then((_accountBalance) =&gt; {<br/>            accountBalance = _accountBalance;<br/>          });<br/><br/>          // erc-20 token balance<br/>          tokenContract.balanceOf(signerAddress).then((_tokenBalance) =&gt; {<br/>            tokenBalance = _tokenBalance;<br/>          });<br/>        } else {<br/>          metamaskStatus = `&lt;span style="color: red;"&gt;Please unlock your MetaMask and reload.&lt;/span&gt;`;<br/>        }<br/>      } else {<br/>        if (isUnlocked) {<br/>          metamaskStatus = `&lt;span style="color: red;"&gt;MetaMask has been successfully detected in your browser, but without external connectivity.&lt;/span&gt;`;<br/>        } else {<br/>          metamaskStatus = `&lt;span style="color: red;"&gt;Please unlock your MetaMask and reload.&lt;/span&gt;`;<br/>        }<br/>      }<br/>    }<br/>  }, 3000);<br/><br/>  connectWallet();<br/>&lt;/script&gt;<br/><br/>&lt;main&gt;<br/>  &lt;h1&gt;MetaMask Integration&lt;/h1&gt;<br/>  &lt;p&gt;&lt;b&gt;Connected Account&lt;/b&gt;: {signerAddress}&lt;/p&gt;<br/>  &lt;p&gt;&lt;b&gt;MATIC Balance&lt;/b&gt;: {ethers.utils.formatEther(accountBalance)}&lt;/p&gt;<br/>  &lt;p&gt;&lt;b&gt;WHITTLE Balance&lt;/b&gt;: {ethers.utils.formatEther(tokenBalance)}&lt;/p&gt;<br/><br/>  &lt;br /&gt;<br/>  &lt;p&gt;{@html metamaskStatus}&lt;/p&gt;<br/>&lt;/main&gt;<br/><br/>&lt;style&gt;<br/>  main {<br/>    text-align: center;<br/>    padding: 1em;<br/>    max-width: 240px;<br/>    margin: 0 auto;<br/>  }<br/><br/>  h1 {<br/>    color: red;<br/>    text-transform: uppercase;<br/>    font-size: 4em;<br/>    font-weight: 100;<br/>  }<br/><br/>  @media (min-width: 640px) {<br/>    main {<br/>      max-width: none;<br/>    }<br/>  }<br/>&lt;/style&gt;</span></pre><p id="41bf" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">å¦‚æœä½ æƒ³è®©æˆ‘ç»§ç»­å­¦ä¹ è¿™ç¯‡æ•™ç¨‹ï¼Œè¯·ä¸è¦å¿˜è®°ä¸ºæ–‡ç« é¼“æŒã€‚å¦‚æœä½ æƒ³è®©æˆ‘å‘ä½ å±•ç¤ºå¦‚ä½•éƒ¨ç½²ä¸€ä¸ªæ™ºèƒ½è”ç³»äººå¹¶ä¸ä¹‹äº’åŠ¨ï¼Œæˆ–è€…å‘Šè¯‰æˆ‘è‹—æ¡å•†åº—æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œè¯·åœ¨è¯„è®ºä¸­å‘Šè¯‰æˆ‘ã€‚å¦‚æœä½ è¿˜æœ‰ä»€ä¹ˆæƒ³çœ‹çš„æˆ–è€…å·²ç»è§£é‡Šè¿‡çš„ï¼Œè¯·å‘Šè¯‰æˆ‘ã€‚</p><p id="f8e9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">æˆ‘å¸Œæœ›ä½ è§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰è¶£å¹¶ä¸”æœ‰ç”¨ã€‚å¦‚æœæ‚¨æƒ³éšæ—¶äº†è§£æƒ…å†µï¼Œè¯·ä¸è¦å¿˜è®°å…³æ³¨æˆ‘ï¼Œæ³¨å†Œæˆ‘çš„<a class="ae nk" href="https://whittle.medium.com/subscribe" rel="noopener">ç”µå­é‚®ä»¶é€šçŸ¥</a>ã€‚</p><h1 id="8f69" class="op mn it bd mo oq or os mr ot ou ov mu jz ow ka mx kc ox kd na kf oy kg nd oz bi translated">è¿ˆå…‹å°”Â·æƒ ç‰¹å°”</h1><ul class=""><li id="37ff" class="ob oc it la b lb nf le ng lh pa ll pb lp pc lt og oh oi oj bi translated"><strong class="la iu"> <em class="pd">å¦‚æœä½ å–œæ¬¢è¿™ä¸ªï¼Œè¯·</em> </strong> <a class="ae nk" href="https://whittle.medium.com/" rel="noopener"> <strong class="la iu"> <em class="pd">è·Ÿæˆ‘ä¸Šåª’</em> </strong> </a></li><li id="4586" class="ob oc it la b lb ok le ol lh om ll on lp oo lt og oh oi oj bi translated"><strong class="la iu"> <em class="pd">æ›´å¤šæœ‰è¶£çš„æ–‡ç« ï¼Œè¯·</em> </strong> <a class="ae nk" href="https://medium.com/trading-data-analysis" rel="noopener"> <strong class="la iu"> <em class="pd">å…³æ³¨æˆ‘çš„åˆŠç‰©</em> </strong> </a></li><li id="8aea" class="ob oc it la b lb ok le ol lh om ll on lp oo lt og oh oi oj bi translated"><strong class="la iu"> <em class="pd">æœ‰å…´è¶£åˆä½œå—ï¼Ÿ</em> </strong> <a class="ae nk" href="https://www.linkedin.com/in/miwhittle/" rel="noopener ugc nofollow" target="_blank"> <strong class="la iu"> <em class="pd">æˆ‘ä»¬ä¸Šé¢†è‹±</em> </strong> </a>è¿çº¿ä¸€ä¸‹</li><li id="1150" class="ob oc it la b lb ok le ol lh om ll on lp oo lt og oh oi oj bi translated"><strong class="la iu"> <em class="pd">æ”¯æŒæˆ‘å’Œå…¶ä»–åª’ä½“ä½œè€…</em> </strong> <a class="ae nk" href="https://whittle.medium.com/membership" rel="noopener"> <strong class="la iu"> <em class="pd">åœ¨æ­¤æŠ¥å</em> </strong> </a></li><li id="8f99" class="ob oc it la b lb ok le ol lh om ll on lp oo lt og oh oi oj bi translated"><strong class="la iu"> <em class="pd">è¯·åˆ«å¿˜äº†ä¸ºæ–‡ç« é¼“æŒ:)â†è°¢è°¢ï¼</em>T57ã€‘</strong></li></ul></div></div>    
</body>
</html>