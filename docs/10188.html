<html>
<head>
<title>How To Remove # Hash Symbol From URL with Flutter Web</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Flutter Web从URL中删除# Hash符号</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-remove-hash-symbol-from-url-with-flutter-web-d917137b8041?source=collection_archive---------3-----------------------#2021-11-04">https://levelup.gitconnected.com/how-to-remove-hash-symbol-from-url-with-flutter-web-d917137b8041?source=collection_archive---------3-----------------------#2021-11-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="3904" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">处理根URL后面的默认标签</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/d5ab5bf4f81345544ca14c47c5fa0999.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z8NGQGEkiZqk8SAKwzBa8g.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@kharp?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">凯蒂·哈普</a>在<a class="ae kv" href="https://unsplash.com/s/photos/url-hashtag?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</figcaption></figure><blockquote class="kw kx ky"><p id="0aaf" class="kz la lb lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">在<strong class="lc ir">的flutter web </strong>中，根URL后面有一个默认的标签。因此，如果我们使用一个包含网页浏览器地址栏标签的URL，我们总是导航到网站的根页面。因此，我们必须执行一些配置更改来解决这个问题。</p></blockquote><p id="d654" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">让我们按照下面的步骤来完成它…..</p></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><ol class=""><li id="889f" class="mg mh iq lc b ld le lg lh lw mi lx mj ly mk lv ml mm mn mo bi translated">转到<strong class="lc ir"> <em class="lb"> pubspec.yaml </em> </strong>文件，然后转到依赖项类别并添加<a class="ae kv" href="https://pub.dev/packages/url_strategy" rel="noopener ugc nofollow" target="_blank"> <strong class="lc ir"> <em class="lb"> url_strategy包</em> </strong> </a></li></ol><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/ac7b1412e9fce1d8b649f6d56ec7c1f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1174/format:webp/1*V9TOCXbM5ttpTSf05M9C2g.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</figcaption></figure><p id="f438" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">2.转到main.dart文件并导入，</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="37b1" class="mv mw iq mr b gy mx my l mz na">import 'package:url_strategy/url_strategy.dart';</span></pre><p id="6aa9" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">3.在<strong class="lc ir"> main()方法</strong>下，</p><p id="9f42" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">添加<strong class="lc ir"><em class="lb">setpathurlrstrategy()</em></strong>和<strong class="lc ir"><em class="lb">widgetsfutterbinding . ensureinitialized()</em></strong></p><p id="3ee8" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">在runApp(MyApp())之前；</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nb"><img src="../Images/3e6c9f6b82608cc4db991f65db01f2a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KxAD4Ly5ECTwkHFVCKit8g.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</figcaption></figure><blockquote class="nc"><p id="1517" class="nd ne iq bd nf ng nh ni nj nk nl lv dk translated">通过正确地遵循这些步骤，您将最终得到在根URL之后不包含hashtag的URL，现在您可以毫无问题地导航到其他路由。</p></blockquote><p id="9c14" class="pw-post-body-paragraph kz la iq lc b ld nm jr lf lg nn ju li lw no ll lm lx np lp lq ly nq lt lu lv ij bi translated">值得一提的是，当您的应用程序处于调试模式时，上面提到的所有这些都可以正常工作。但是在将您的应用程序托管或部署到生产环境并且应用程序处于发布模式之后。那么没有Hashtag的URL将不会导航到相关的网页，并显示page not found 404页面。</p><p id="f631" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">要解决这个问题，我们必须更改服务器配置。为此，您可以使用两种解决方案。</p><h1 id="5a47" class="nr mw iq bd ns nt nu nv nw nx ny nz oa jw ob jx oc jz od ka oe kc of kd og oh bi translated">解决方案1:</h1><ol class=""><li id="83cf" class="mg mh iq lc b ld oi lg oj lw ok lx ol ly om lv ml mm mn mo bi translated">创建一个<strong class="lc ir"> <em class="lb">。htaccess </em> </strong>根目录下的文件(这里存在同一级的index.html文件)。</li><li id="6f1c" class="mg mh iq lc b ld on lg oo lw op lx oq ly or lv ml mm mn mo bi translated">在...里面。htaccess文件，我们必须通过添加<strong class="lc ir">重写器将所有未知路由重定向到index.html。/index.html [L] </strong></li></ol><h1 id="a53d" class="nr mw iq bd ns nt nu nv nw nx ny nz oa jw ob jx oc jz od ka oe kc of kd og oh bi translated">解决方案2:</h1><p id="235e" class="pw-post-body-paragraph kz la iq lc b ld oi jr lf lg oj ju li lw os ll lm lx ot lp lq ly ou lt lu lv ij bi translated">一些托管平台不支持。<strong class="lc ir"> <em class="lb"> htaccess </em> </strong>文件创建机制和一般解决方案如下。</p><ol class=""><li id="8c3b" class="mg mh iq lc b ld le lg lh lw mi lx mj ly mk lv ml mm mn mo bi translated">在根目录下创建一个<strong class="lc ir"><em class="lb">【404.html】</em></strong>文件(与index.html文件同级)</li><li id="9a55" class="mg mh iq lc b ld on lg oo lw op lx oq ly or lv ml mm mn mo bi translated">转到<strong class="lc ir"><em class="lb">【index.html】</em></strong>文件，复制<strong class="lc ir"><em class="lb">index.html</em></strong>文件的全部内容</li><li id="1461" class="mg mh iq lc b ld on lg oo lw op lx oq ly or lv ml mm mn mo bi translated">转到<strong class="lc ir"><em class="lb"/></strong>文件，粘贴全部内容并保存</li></ol><p id="3b02" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">酷……😎现在也解决了在flutter web中释放模式下移除散列符号的问题。</p><h2 id="8a06" class="mv mw iq bd ns ov ow dn nw ox oy dp oa lw oz pa oc lx pb pc oe ly pd pe og pf bi translated">总结:</h2><blockquote class="kw kx ky"><p id="91bb" class="kz la lb lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">如果客户端从服务器的根发出请求，它基本上是在处理index.html文件并导航到相关的网页。</p></blockquote><p id="6250" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated"><strong class="lc ir"> <em class="lb">路径策略</em> </strong></p><p id="77ad" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated"><em class="lb">在路径策略中，如果客户端请求任何其他URL，那么服务器将导航到404.html文件，或者在没有的情况下，特定浏览器中的默认“未找到页面”是一种解决方案。另一个解决方案是重写index.html。</em></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pg"><img src="../Images/c977ad4b16d880f9a03f6d1ee408589d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OcPk7zU1TK-l-pQkkkk7HA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</figcaption></figure><p id="36dc" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated"><strong class="lc ir"> <em class="lb">哈希策略</em> </strong></p><p id="9451" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated"><em class="lb">在哈希策略中，#标签后的路径不会发送到服务器，因此它总是返回到flutter web应用程序中的index.html。这不需要额外的服务器配置，从服务器加载index.html文件后，Flutter会选择URL的最后一部分并导航到相关的URL </em></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pg"><img src="../Images/7ea2d3356ceb6bdf740ce3983a805d47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mPgeuHfzDP7gbw5A8sntuQ.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">作者图片</figcaption></figure><blockquote class="nc"><p id="2dcb" class="nd ne iq bd nf ng nh ni nj nk nl lv dk translated">我希望你通过这篇文章获得一些重要的事实。如果你喜欢这篇文章，那就鼓掌吧。🙌</p></blockquote><p id="634b" class="pw-post-body-paragraph kz la iq lc b ld nm jr lf lg nn ju li lw no ll lm lx np lp lq ly nq lt lu lv ij bi translated">感谢您的阅读。😎</p><p id="c2fb" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">继续学习！！！继续扑腾！！！</p></div></div>    
</body>
</html>