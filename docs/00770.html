<html>
<head>
<title>Folding the Flat with CSS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用CSS折叠平面</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/folding-the-flat-with-css-3a88bd0ecd0b?source=collection_archive---------4-----------------------#2019-07-22">https://levelup.gitconnected.com/folding-the-flat-with-css-3a88bd0ecd0b?source=collection_archive---------4-----------------------#2019-07-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="d0dc" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">一种纯粹的CSS方法，将屏幕外的面板折叠成平面。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/ec9da73e56468d39b8ba24edab3d133e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WukqvNr6vo8E6DwJelH0hQ.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae kv" href="https://elmahdim.github.io/OffScreenPanel/" rel="noopener ugc nofollow" target="_blank">演示</a></figcaption></figure><p id="aa06" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本文中，我们将创建一个屏幕外面板，它具有折叠效果和内部内容的弹性运动。</p><p id="9eba" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这些年来，我在互联网上看到了很多很酷的演示，都是用Canvas、Threejs和所有这些沉重的技术完成的。从那以后我一直在寻找更简单的方法！</p><p id="8f6a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">前几天我有一个任务，为我正在做的项目建立一个聊天面板，点击用户个人资料上的“发送消息”按钮就会出现，这样用户就可以互相交流了。在完成主要功能并充分工作后，基于我们的工作流程，我必须在完成后将其转发给QA团队，以便他们开始测试！在这种情况下，我有足够的时间，我想用较少的努力使聊天成为一个可折叠的动画面板🦸‍♂️.片刻之后，我刮了刮胡子，决定使用一点CSS <code class="fe ls lt lu lv b">transition</code>和<a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/CSS/clip-path" rel="noopener ugc nofollow" target="_blank">剪辑路径</a> <code class="fe ls lt lu lv b">polygon(...)</code>来完成这个功能/任务。</p><h1 id="ca2f" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">演示</h1><p id="7b8b" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated">我在这个演示中使用了一个<a class="ae kv" href="https://github.com/facebook/create-react-app" rel="noopener ugc nofollow" target="_blank"> CRA </a>样板来创建一个<a class="ae kv" href="https://reactjs.org/" rel="noopener ugc nofollow" target="_blank">反应</a>组件。但你可以坚持使用你觉得合适的筹码。</p><p id="6561" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">演示链接:<a class="ae kv" href="https://elmahdim.github.io/OffScreenPanel/" rel="noopener ugc nofollow" target="_blank">https://elmahdim.github.io/OffScreenPanel/</a></p><h1 id="cc0c" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">屏幕外面板组件</h1><pre class="kg kh ki kj gt mt lv mu mv aw mw bi"><span id="ffc7" class="mx lx iq lv b gy my mz l na nb">import React, { useState } from 'react';<br/>import classNames from 'classnames';<br/>import PropTypes from 'prop-types';</span><span id="07ea" class="mx lx iq lv b gy nc mz l na nb">import styles from './OffScreenPanel.module.css';</span><span id="d521" class="mx lx iq lv b gy nc mz l na nb">export const OffScreenPanel = (props) =&gt; {<br/>  const [open, toggleVisibility] = useState(false);<br/>  const toggle = () =&gt; toggleVisibility(!open);</span><span id="4319" class="mx lx iq lv b gy nc mz l na nb">  return (<br/>    &lt;div className={classNames('offScreenPanel', {<br/>      [styles.open]: open<br/>    })}&gt;<br/>      &lt;button type="button" className={styles.button} onClick={toggle}&gt;<br/>        ....<br/>      &lt;/button&gt;<br/>      &lt;div className={styles.panel}&gt;<br/>        &lt;div className={styles.body}&gt;{open &amp;&amp; props.children}&lt;/div&gt;<br/>      &lt;/div&gt;<br/>      &lt;div role="presentation" className={styles.overlay} onClick={toggle} /&gt;<br/>    &lt;/div &gt;<br/>  );<br/>};</span><span id="a3fa" class="mx lx iq lv b gy nc mz l na nb">OffScreenPanel.propTypes = {<br/>  children: PropTypes.any,<br/>};</span><span id="9c99" class="mx lx iq lv b gy nc mz l na nb">export default OffScreenPanel;</span></pre><p id="86ea" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">上面的代码代表了一个使用<a class="ae kv" href="https://reactjs.org/docs/hooks-intro.html" rel="noopener ugc nofollow" target="_blank">钩子</a>和<a class="ae kv" href="https://facebook.github.io/create-react-app/docs/adding-a-css-modules-stylesheet" rel="noopener ugc nofollow" target="_blank"> CSS模块样式表</a>的功能性<code class="fe ls lt lu lv b">OffScreenPanel</code>组件。</p><h1 id="5c9f" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">普通HTML</h1><p id="3032" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated">我们需要折叠/展开面板的主要元素没有反应。</p><pre class="kg kh ki kj gt mt lv mu mv aw mw bi"><span id="5ccd" class="mx lx iq lv b gy my mz l na nb">&lt;div class="offScreenPanel open"&gt;<br/>  &lt;div class="panel"&gt;<br/>    &lt;div class="body"&gt;...&lt;/div&gt;<br/>  &lt;/div&gt;<br/>  &lt;div role="presentation" class="overlay"&gt;&lt;/div&gt;<br/>&lt;/div&gt;</span></pre><p id="0aa6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<code class="fe ls lt lu lv b">offScreenPanel</code>元素上<code class="fe ls lt lu lv b">open</code>类是可切换的(通过JavaScript)。它没有关联的样式。</p><p id="a4d0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b">panel</code>元素负责折叠/展开其布局。我们有两个选择来达到这个效果:添加两个额外的元素，或者使用一个CSS伪元素！</p><p id="ad3c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我将选择第二个选项，它使用伪元素(<code class="fe ls lt lu lv b">::before</code>，<code class="fe ls lt lu lv b">::after</code>)。它使我们的标记更干净，HTML代码更少。</p><p id="be73" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">内部内容将由元素<code class="fe ls lt lu lv b">body</code>包装。</p><h1 id="0bde" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">风格</h1><pre class="kg kh ki kj gt mt lv mu mv aw mw bi"><span id="3077" class="mx lx iq lv b gy my mz l na nb">/*<br/> * panel:<br/> * is out of screen (offset right) by default<br/> */<br/>.panel {<br/>  position: fixed;<br/>  top: 0;<br/>  right: 0;<br/>  width: 450px;<br/>  bottom: 0;<br/>  z-index: 2;<br/>  transform: translateX(450px);<br/>}</span><span id="4649" class="mx lx iq lv b gy nc mz l na nb">/*<br/> * panel:<br/> * on open we set its horizontally offset to "0"<br/> */<br/>.open .panel {<br/>  transform: translateX(0);<br/>  transition: all 400ms ease;<br/>}</span><span id="778c" class="mx lx iq lv b gy nc mz l na nb">/*<br/> * panel - the folding element [[]]<br/> * make each element half width of its parent (panel) size<br/> */<br/>.panel::before,<br/>.panel::after {<br/>  content: '';<br/>  position: absolute;<br/>  top: 0;<br/>  bottom: 0;<br/>  width: 225px;<br/>  transition: all 400ms ease-out;<br/>}</span><span id="87f9" class="mx lx iq lv b gy nc mz l na nb">/*<br/> * panel - the folding element []]<br/> */<br/>.panel::before {<br/>  clip-path: polygon(100% 10%, 100% 0, 100% 100%, 100% 90%);<br/>  left: 0;<br/>}</span><span id="5838" class="mx lx iq lv b gy nc mz l na nb">/*<br/> * panel - the folding element []]<br/> */<br/>.panel::after {<br/>  background: #f0f0f0 linear-gradient(to right, #f7f7f7 0%, #fff 100%);<br/>  clip-path: polygon(100% 50%, 100% 0, 100% 100%, 100% 50%);<br/>  right: 0;<br/>}</span><span id="501b" class="mx lx iq lv b gy nc mz l na nb">/*<br/> * panel - the folding element []]<br/> */<br/>.open .panel::before,<br/>.open .panel::after {<br/>  clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%);<br/>}</span><span id="ec16" class="mx lx iq lv b gy nc mz l na nb">/*<br/> * panel - the folding element [[]<br/> * giving the left panel a paper book like background,<br/> * off-white and light grey<br/> */<br/>.open .panel::before {<br/>  transition-delay: 400ms;<br/>  background: #f0f0f0 linear-gradient(to right, #f3f3f3 0%, #f1f1f1 48%, #f1f1f1 100%);<br/>}</span><span id="8316" class="mx lx iq lv b gy nc mz l na nb">/*<br/> * body, one thin line centered by default<br/> */<br/>.body {<br/>  position: absolute;<br/>  top: 0;<br/>  right: 0;<br/>  height: 100%;<br/>  left: 0;<br/>  background-color: #fff;<br/>  transition: all 300ms cubic-bezier(0.22, 0.61, 0.36, 1);<br/>  z-index: 1;<br/>  clip-path: polygon(50% 50%, 50% 50%, 50% 50%, 50% 50%);<br/>}</span><span id="ea17" class="mx lx iq lv b gy nc mz l na nb">/*<br/> * body, folded and fits its parent with on open<br/> */<br/>.open .panel .body {<br/>  transition-delay: 0.8s;<br/>  clip-path: polygon(0 0, 100% 0, 100% 100%, 0% 100%);<br/>}</span><span id="8176" class="mx lx iq lv b gy nc mz l na nb">/*<br/> * overlay, hidden by default. to overlap the content behind<br/> * and closes the panel on click outside<br/> */<br/>.overlay {<br/>  background-color: rgba(0, 0, 0, 0.2);<br/>  position: fixed;<br/>  visibility: hidden;<br/>  top: 0;<br/>  right: 0;<br/>  bottom: 0;<br/>  width: 100%;<br/>  height: 100%;<br/>  z-index: 1;<br/>  opacity: 0;<br/>}</span><span id="c71c" class="mx lx iq lv b gy nc mz l na nb">/*<br/> * overlay, visible on open<br/> */<br/>.open .panel + .overlay {<br/>  opacity: 1;<br/>  visibility: visible;<br/>  transition: all 400ms ease;<br/>}</span></pre><p id="b3c3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是它在两种状态下的样子:默认和打开</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nd"><img src="../Images/b3bb8c56c9754ca82ecbe9b4866ec6b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*S0d_S7T7oXxuu2-w.png"/></div></div></figure></div></div>    
</body>
</html>