# ä¿æŠ¤å…¬å…±æ–¹æ³•å…å—ä¸åˆé€»è¾‘çš„è°ƒç”¨ã€‚NET C#

> åŸæ–‡ï¼š<https://levelup.gitconnected.com/protecting-public-methods-from-illogical-calls-in-net-c-91fcbb8bee33>

## æç¤ºå’ŒæŠ€å·§

## åŒ…å«ä»£ç ç¤ºä¾‹å’Œè§£é‡Šçš„å®Œæ•´æŒ‡å—ã€‚

![](img/99ca9803a95b66321058e9a4da292796.png)

**ä¿æŠ¤å…¬å…±æ–¹æ³•å…å—ä¸åˆé€»è¾‘çš„è°ƒç”¨ã€‚NET C#** ã€‚ç…§ç‰‡ç”±[åœ¨](https://unsplash.com/@flyd2069?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) [Unsplash](https://unsplash.com/?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) ä¸Šé£è¡Œçš„:D æ‹æ‘„ï¼Œç”± [Ahmed Tarek](https://medium.com/@eng_ahmed.tarek) è°ƒæ•´

åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†å‘ä½ å±•ç¤ºä¸€ç§æŠ€æœ¯æ¥ä¿æŠ¤ä½ çš„æ¨¡å—å…¬å…±æ–¹æ³•å…å—æœªç»æˆæƒçš„è°ƒç”¨ï¼Œæˆ–è€…è¯´ï¼Œä¸åˆé€»è¾‘çš„è°ƒç”¨ã€‚

ä½ å¯èƒ½ä¼šè¯´:

> å¦‚æœå®ƒä»¬æ˜¯å…¬å…±çš„ï¼Œé‚£ä¹ˆæˆ‘è®¤ä¸ºä»»ä½•æ¨¡å—éƒ½å¯ä»¥è°ƒç”¨å®ƒä»¬ã€‚å¦‚æœæˆ‘æƒ³é˜»æ­¢æŸä¸ªæ¨¡å—è°ƒç”¨å…¬å…±æ–¹æ³•ï¼Œé‚£ä¹ˆå®ƒé¦–å…ˆå°±ä¸åº”è¯¥æ˜¯å…¬å…±çš„ã€‚

æˆ‘éƒ¨åˆ†åŒæ„ä½ çš„è§‚ç‚¹ï¼ŒåŸå› æœ‰äºŒ:

1.  æœ‰æ—¶å…¬å…±æ–¹æ³•åœ¨ä½ ä½¿ç”¨çš„ç¬¬ä¸‰æ–¹åº“ä¸Šï¼Œå®ƒä»¬æ²¡æœ‰è¢«æ­£ç¡®åœ°æŠ½è±¡ã€‚
2.  å³ä½¿ä½ æŠŠä½ çš„æ–¹æ³•åˆ†æˆå®šä¹‰è‰¯å¥½çš„æ¥å£ï¼Œä¹Ÿä¸è¦ä½ä¼°å¼€å‘äººå‘˜åšå‡ºé”™è¯¯å†³å®šçš„èƒ½åŠ›ã€‚

è¿˜æ˜¯ä¸æ˜ç™½ï¼Œå¯¹å§ï¼Ÿè®©æˆ‘ç»™ä½ çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ã€‚

![](img/dae42316c04548aad197e34b378e3bf1.png)[](https://medium.com/subscribe/@eng_ahmed.tarek) [## ğŸ”¥è®¢é˜…è‰¾å“ˆè¿ˆå¾·çš„æ—¶äº‹é€šè®¯ğŸ”¥

### è®¢é˜…è‰¾å“ˆè¿ˆå¾·çš„æ—¶äº‹é€šè®¯ğŸ“°ç›´æ¥è·å¾—æœ€ä½³å®è·µã€æ•™ç¨‹ã€æç¤ºã€æŠ€å·§å’Œè®¸å¤šå…¶ä»–å¾ˆé…·çš„ä¸œè¥¿â€¦

medium.com](https://medium.com/subscribe/@eng_ahmed.tarek) ![](img/9ff238cb3b274f87df37940cd5a9d0ee.png)

**ç»Šå€’ä¸€ä¸ªå¼€å‘è€…çš„ç—…æ€å¿ƒç†**ã€‚ç…§ç‰‡ç”± [NeONBRAND](https://unsplash.com/@neonbrand?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) åœ¨ [Unsplash](https://unsplash.com/?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) ä¸Šæ‹æ‘„ï¼Œç”± [Ahmed Tarek](https://medium.com/@eng_ahmed.tarek) è°ƒæ•´

# ç»Šå€’ä¸€ä¸ªå¼€å‘è€…çš„ç—…æ€æ€ç»´

è®©æˆ‘ä»¬æ£€æŸ¥ä¸‹é¢çš„ä»£ç ç¤ºä¾‹ã€‚

æ­£å¦‚æ‚¨åœ¨ä»£ç ç¤ºä¾‹ä¸­çœ‹åˆ°çš„ï¼Œåœ¨ç¬¬ **57** å’Œ **62** è¡Œï¼Œå¼€å‘äººå‘˜å°†`IRead`è½¬æ¢ä¸º`IWrite`å¹¶å°†`IWrite`è½¬æ¢ä¸º`IRead`ï¼Œè¿™å°†ä¼šæˆåŠŸï¼Œå› ä¸ºä¼ å…¥çš„å¯¹è±¡å·²ç»å®ç°äº†è¿™ä¸¤ä¸ªæ¥å£ã€‚æ˜¯çš„ï¼Œè¿™æ˜¯ä¸åˆé€»è¾‘çš„ï¼Œä½†å®ƒå¯èƒ½ä¼šå‘ç”Ÿã€‚

æˆ‘çŸ¥é“ï¼Œæˆ‘çŸ¥é“ã€‚æˆ‘ä»¬ä¸åº”è¯¥æŠŠæˆ‘ä»¬çš„ä»£ç è®¾è®¡æˆâ€œè¿™ç§æ— çŸ¥æ°´å¹³â€ï¼Œä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬èƒ½åšå¾—æ›´å¥½ï¼Œä¸ºä»€ä¹ˆä¸å‘¢ï¼Ÿ

åœ¨æ¥ä¸‹æ¥çš„éƒ¨åˆ†ä¸­ï¼Œæˆ‘å°†å‘æ‚¨å±•ç¤ºä¸¤ç§æ–¹æ³•æ¥ä½¿æ‚¨çš„ä»£ç æ›´å¥å£®åœ°åº”å¯¹è¿™ç§è¡Œä¸ºã€‚

![](img/579ff440313d33ba4009e2fb6f8e5514.png)

**é—®é¢˜**ã€‚ç”± [Elisa Ventur](https://unsplash.com/@elisa_ventur?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) åœ¨ [Unsplash](https://unsplash.com/?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) ä¸Šæ‹æ‘„ï¼Œç”± [Ahmed Tarek](https://medium.com/@eng_ahmed.tarek) è°ƒæ•´

# é—®é¢˜æ˜¯

ç°åœ¨è®©æˆ‘ä»¬æƒ³å‡ºä¸€ä¸ªæ›´æ¸…æ¥šçš„ä¾‹å­æ¥è¯´æ˜æˆ‘ä»¬è¦è§£å†³çš„é—®é¢˜ã€‚

å‡è®¾æˆ‘ä»¬æ­£åœ¨åšä¸€ä¸ªåƒäºšé©¬é€Šä¸€æ ·çš„åœ¨çº¿å•†åº—ç½‘ç«™ã€‚åœ¨è¿™ä¸ªé¡¹ç›®ä¸Šï¼Œæˆ‘ä»¬æœ‰ä¸æ­¢ä¸€ä¸ªæ¨¡å—çš„å·¥ä½œã€‚

æˆ‘ä»¬æœ‰**å•†åº—**æ¨¡å—ï¼Œæœ€ç»ˆç”¨æˆ·å°†èƒ½å¤Ÿçœ‹åˆ°æ‰€æœ‰äº§å“ï¼Œå¹¶é€‰æ‹©äº§å“æ·»åŠ åˆ°ä»–çš„è´­ç‰©è½¦ã€‚

æˆ‘ä»¬æœ‰**è´­ç‰©è½¦**æ¨¡å—ï¼Œç»ˆç«¯ç”¨æˆ·å¯ä»¥çœ‹åˆ°ä»–æ·»åŠ è´­ä¹°çš„äº§å“ã€‚

æˆ‘ä»¬æœ‰**ç»“å¸**æ¨¡å—ï¼Œç»ˆç«¯ç”¨æˆ·å¯ä»¥çœ‹åˆ°ä»–çš„äº§å“å’Œæ”¯ä»˜é‡‘é¢çš„æ‘˜è¦ã€‚

å¯¹äºæˆ‘ä»¬çš„ä¾‹å­ï¼Œæˆ‘ä»¬ç‰¹åˆ«å…³å¿ƒ**è´­ç‰©è½¦**æ¨¡å—ï¼Œä»¥åŠå®ƒå¦‚ä½•è¢«å…¶ä»–ä¸¤ä¸ªæ¨¡å—ä½¿ç”¨ï¼›**å­˜å‚¨**å’Œ**æ£€æŸ¥**æ¨¡å—ã€‚

ç°åœ¨è®©æˆ‘ä»¬ç›´æ¥è¿›å…¥ä»£ç ã€‚

æ­£å¦‚æ‚¨åœ¨ä»£ç ç¤ºä¾‹ä¸­æ³¨æ„åˆ°çš„ï¼Œæ²¡æœ‰ä»€ä¹ˆå¤ªå¤æ‚çš„ã€‚

ç„¶è€Œï¼Œåœ¨ç¬¬ **52** å’Œ **68** è¡Œï¼Œæ²¡æœ‰ä»»ä½•ä¸œè¥¿å¯ä»¥é˜»æ­¢å¼€å‘äººå‘˜é€šè¿‡è°ƒç”¨åœ¨è¿™äº›ä¸Šä¸‹æ–‡ä¸­ä¸åº”è¯¥è°ƒç”¨çš„æ–¹æ³•æ¥è¿›è¡Œè¿™äº›è½¬æ¢å’Œä»¥é”™è¯¯çš„æ–¹å¼ä½¿ç”¨`ShoppingCart`ã€‚

å±é™©çš„æ˜¯ä»£ç å®é™…ä¸Šä¼šè¢«æ‰§è¡Œï¼Œå› ä¸ºä¼ å…¥çš„å¯¹è±¡å·²ç»å®ç°äº†`IStoreShoppingItems`å’Œ`IListShoppingItems`æ¥å£ã€‚å¦‚æœè¿™æ˜¯ä¸€ä¸ªé“¶è¡Œç³»ç»Ÿæˆ–å¦‚æ­¤å…³é”®çš„ä¸œè¥¿ï¼Œè¿™å°†æ˜¯ä¸€åœºå½»åº•çš„ç¾éš¾ã€‚

ä¸ºäº†é˜²æ­¢è¿™ç§æƒ…å†µå‘ç”Ÿï¼Œæˆ‘ä»¬æœ‰ä¸¤ç§æ–¹æ³•:

1.  å…è®¸å¼€å‘äººå‘˜è¿›è¡Œå¼ºåˆ¶è½¬æ¢ï¼Œä½†è¦ç¡®ä¿å®ƒæŠ›å‡ºå¼‚å¸¸ã€‚
2.  é¦–å…ˆé˜»æ­¢å¼€å‘äººå‘˜è¿›è¡Œé€ å‹ã€‚

è¿™ä¸¤ç§æ–¹æ³•åœ¨è®¾è®¡å’Œå®ç°æ–¹é¢æ˜¯ä¸åŒçš„ã€‚

![](img/817d7ff3e3683f9af5466f528d133e5d.png)

**æ–¹æ³•ä¸€**ã€‚å›¾ç‰‡ç”±[è‰¾å“ˆè¿ˆå¾·Â·å¡”é‡Œå…‹](https://medium.com/@eng_ahmed.tarek)æ‹æ‘„

# æ–¹æ³• 1

åœ¨è¿™ç§æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬å°†å…è®¸å¼€å‘äººå‘˜è¿›è¡Œå¼ºåˆ¶è½¬æ¢ï¼Œä½†è¦ç¡®ä¿å®ƒä¼šæŠ›å‡ºå¼‚å¸¸ã€‚

`IStoreShoppingItems`ã€`IListShoppingItems`ã€`ShoppingCart`ã€`Store`å’Œ`CheckOutManager`éƒ½å°†å…·æœ‰ç›¸åŒçš„æ—§å®ç°ã€‚

ç„¶åï¼Œæˆ‘ä»¬å°†æ·»åŠ ä»¥ä¸‹å†…å®¹:

æˆ‘ä»¬åœ¨è¿™é‡Œå®é™…åšçš„æ˜¯ä¸º`ShoppingCart`ç±»åˆ›å»ºä¸¤ä¸ªç‹¬ç«‹çš„åŒ…è£…å™¨ï¼Œä¸€ä¸ªè´Ÿè´£**è¯»**æ“ä½œï¼Œå¦ä¸€ä¸ªè´Ÿè´£**å†™**æ“ä½œã€‚

ç„¶åæˆ‘ä»¬å°†å¼€å§‹ä½¿ç”¨è¿™äº›åŒ…è£…å™¨ï¼Œè€Œä¸æ˜¯æœ€åˆçš„`ShoppingCart`ç±»ï¼Œå¦‚ä¸‹æ‰€ç¤º:

è¿™æ ·ï¼Œå¦‚æœå¼€å‘äººå‘˜è¯•å›¾åšåŒæ ·çš„éæ³•/ä¸åˆé€»è¾‘çš„è½¬æ¢ï¼Œè¿è¡Œæ—¶å°†æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼Œå› ä¸ºç°åœ¨ä¼ å…¥çš„å¯¹è±¡æ˜¯æ— è®ºæ˜¯`ReadShoppingCart`è¿˜æ˜¯`WriteShoppingCart`ï¼Œè€Œä¸æ˜¯åƒä»¥å‰ä¸€æ ·æ˜¯`ShoppingCart`ã€‚

![](img/299d5e60531b6577113b48fc2daeee28.png)

**æ–¹æ³• 2â€”â€”å¦‚æœä»£ç æ˜¯è‡ªæœ‰çš„**ã€‚å›¾ç‰‡ç”±[è‰¾å“ˆè¿ˆå¾·Â·å¡”é‡Œå…‹](https://medium.com/@eng_ahmed.tarek)æ‹æ‘„

# æ–¹æ³• 2 -å¦‚æœä»£ç æ˜¯è‡ªæœ‰çš„

åœ¨è¿™ç§æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬å°†é¦–å…ˆé˜»æ­¢å¼€å‘äººå‘˜è¿›è¡Œé€ å‹ã€‚

åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å‡è®¾æ•´ä¸ªä»£ç å½’æˆ‘ä»¬æ‰€æœ‰ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥å¯¹æ•´ä¸ªä»£ç åº”ç”¨æ›´æ”¹ã€‚

è¿™ç§æ–¹æ³•çš„ä¸»è¦æ€æƒ³æ˜¯ç”¨å¤šä¸ª**å¯†é’¥**æ¥ä¿æŠ¤å¯¹å…¬å…±æ–¹æ³•çš„è°ƒç”¨ï¼›ä¸€ä¸ª**å¯†é’¥**ç”¨äº**è¯»**æ“ä½œï¼Œå¦ä¸€ä¸ª**å¯†é’¥**ç”¨äº**å†™**æ“ä½œã€‚è¿™äº›å¯†é’¥æ˜¯åœ¨åˆ›å»º`ShoppingCart`ç±»çš„å®ä¾‹æ—¶åˆ›å»ºçš„ã€‚

è¿™äº›**å¯†é’¥**çš„æ‰€æœ‰è€…æ˜¯ä¸»æ¨¡å—ï¼Œç„¶åä¸»æ¨¡å—è´Ÿè´£å°†æ­£ç¡®çš„**å¯†é’¥**å…±äº«ç»™æ­£ç¡®çš„æ¨¡å—ã€‚

å› æ­¤ï¼Œæˆ‘ä»¬å°†åº”ç”¨è¿™äº›æ›´æ”¹:

**å†å²è´­ç‰©é¡¹ç›®**å’Œ**å†å²è´­ç‰©é¡¹ç›®:**

æˆ‘ä»¬åœ¨è¿™é‡Œå¯ä»¥æ³¨æ„åˆ°:

1.  æˆ‘ä»¬æ·»åŠ äº†`string writingSecretKey`ä½œä¸º`AddShoppingItem`æ–¹æ³•çš„å‚æ•°ã€‚
2.  è¿™æ„å‘³ç€æ— è®ºå“ªä¸ªæ¨¡å—è°ƒç”¨`AddShoppingItem`æ–¹æ³•ï¼Œå®ƒéƒ½éœ€è¦æä¾›ä¸€ä¸ª**å†™å¯†é’¥**ï¼Œè¯¥å¯†é’¥åº”è¯¥ä¸æœ€åˆå®šä¹‰å¹¶ä¿å­˜åˆ°`ShoppingCart`å¯¹è±¡ä¸­çš„å¯†é’¥ç›¸åŒ¹é…ã€‚
3.  å¦åˆ™ï¼Œå°†å¼•å‘å¼‚å¸¸ã€‚
4.  æˆ‘ä»¬æ·»åŠ äº†`string readingSecretKey`ä½œä¸º`GetShoppingItems`æ–¹æ³•çš„å‚æ•°ã€‚
5.  è¿™æ„å‘³ç€æ— è®ºå“ªä¸ªæ¨¡å—è°ƒç”¨`GetShoppingItems`æ–¹æ³•ï¼Œå®ƒéƒ½éœ€è¦æä¾›ä¸€ä¸ª**è¯»å–å¯†é’¥**ï¼Œè¯¥å¯†é’¥åº”è¯¥ä¸æœ€åˆå®šä¹‰å¹¶ä¿å­˜åœ¨`ShoppingCart`å¯¹è±¡ä¸­çš„å¯†é’¥ç›¸åŒ¹é…ã€‚
6.  å¦åˆ™ï¼Œå°†å¼•å‘å¼‚å¸¸ã€‚

**è´­ç‰©è½¦**:

æˆ‘ä»¬åœ¨è¿™é‡Œå¯ä»¥æ³¨æ„åˆ°:

1.  æˆ‘ä»¬å¢åŠ äº†`private readonly string m_WritingSecretKey;`å’Œ`private readonly string m_ReadingSecretKey;`
2.  å®ƒä»¬å°†ç”±æ„é€ å‡½æ•°ä¸­ä¼ é€’çš„å€¼åˆå§‹åŒ–ã€‚è¿™ä¸€ç‚¹éå¸¸é‡è¦ï¼Œå› ä¸ºæˆ‘ä»¬å¸Œæœ›å°†å®ƒä»¬çš„åˆå§‹åŒ–å§”æ‰˜ç»™æ‰€æœ‰è€…æ¨¡å—ã€‚
3.  æ­¤å¤–ï¼Œå€¼å¾—ä¸€æçš„æ˜¯ï¼Œå®ƒä»¬åº”è¯¥æ˜¯ä¸å¯å˜çš„ï¼Œå¹¶å¯¹å¤–ç•Œéšè—ã€‚
4.  åœ¨`AddShoppingItem`æ–¹æ³•çš„å¼€å§‹ï¼Œæˆ‘ä»¬æ£€æŸ¥ä¼ å…¥çš„`writingSecretKey`æ˜¯å¦ä¸`m_WritingSecretKey`ç›¸åŒã€‚å¦åˆ™ï¼Œå°†æŠ›å‡ºä¸€ä¸ª`UnauthorizedAccessException`å¼‚å¸¸ã€‚
5.  åœ¨`GetShoppingItems`æ–¹æ³•çš„å¼€å§‹ï¼Œæˆ‘ä»¬æ£€æŸ¥ä¼ å…¥çš„`readingSecretKey`æ˜¯å¦ä¸`m_ReadingSecretKey`ç›¸åŒã€‚å¦åˆ™ï¼Œå°†æŠ›å‡ºä¸€ä¸ª`UnauthorizedAccessException`å¼‚å¸¸ã€‚
6.  å°±æ˜¯è¿™æ ·ï¼Œå°±è¿™ä¹ˆç®€å•ã€‚

**åº—é“º:**

æˆ‘ä»¬åœ¨è¿™é‡Œå¯ä»¥æ³¨æ„åˆ°:

1.  æˆ‘ä»¬æ·»åŠ äº†`private readonly string m_WritingSecretKey;`
2.  å®ƒå°†ç”±æ„é€ å‡½æ•°ä¸­ä¼ é€’çš„å€¼åˆå§‹åŒ–ã€‚è¿™ä¸€ç‚¹éå¸¸é‡è¦ï¼Œå› ä¸ºæˆ‘ä»¬å¸Œæœ›å°†å®ƒä»¬çš„åˆå§‹åŒ–å§”æ‰˜ç»™æ‰€æœ‰è€…æ¨¡å—ã€‚
3.  æ­¤å¤–ï¼Œå€¼å¾—ä¸€æçš„æ˜¯ï¼Œå®ƒåº”è¯¥æ˜¯ä¸å¯å˜çš„ï¼Œå¹¶å¯¹å¤–ç•Œéšè—ã€‚
4.  å½“è°ƒç”¨`ShoppingCart`çš„`AddShoppingItem`æ—¶ï¼Œä¼šä¼ å…¥å¯†é’¥ã€‚
5.  å€¼å¾—ä¸€æçš„æ˜¯ï¼Œåœ¨ç¬¬ **26** è¡Œï¼Œå¦‚æœå¼€å‘äººå‘˜è¯•å›¾è¿›è¡Œéæ³•/ä¸åˆé€»è¾‘çš„å¼ºåˆ¶è½¬æ¢è°ƒç”¨`GetShoppingItems`æ–¹æ³•ï¼Œä»–ä¼šå‘ç°ä»–éœ€è¦ä¼ å…¥ä¸€ä¸ªä»–æ²¡æœ‰çš„**è¯»å–å¯†é’¥**ã€‚
6.  è¿™å°†ä½¿ä»–è¯•å›¾åšä¸€äº›é”™è¯¯çš„äº‹æƒ…å¬èµ·æ¥å¾ˆæ¸…æ¥šã€‚
7.  æ­¤å¤–ï¼Œå³ä½¿å¼€å‘äººå‘˜å†³å®šä¸º**è¯»å–å¯†é’¥**ä¼ å…¥ä»»ä½•å€¼ï¼Œä¹Ÿä¼šæŠ›å‡ºå¼‚å¸¸ã€‚

æ£€å‡ºç®¡ç†å™¨:

æˆ‘ä»¬åœ¨è¿™é‡Œå¯ä»¥æ³¨æ„åˆ°:

1.  æˆ‘ä»¬æ·»åŠ äº†`private readonly string m_ReadingSecretKey;`
2.  å®ƒå°†ç”±æ„é€ å‡½æ•°ä¸­ä¼ é€’çš„å€¼åˆå§‹åŒ–ã€‚è¿™ä¸€ç‚¹éå¸¸é‡è¦ï¼Œå› ä¸ºæˆ‘ä»¬å¸Œæœ›å°†å®ƒä»¬çš„åˆå§‹åŒ–å§”æ‰˜ç»™æ‰€æœ‰è€…æ¨¡å—ã€‚
3.  æ­¤å¤–ï¼Œå€¼å¾—ä¸€æçš„æ˜¯ï¼Œå®ƒåº”è¯¥æ˜¯ä¸å¯å˜çš„ï¼Œå¹¶å¯¹å¤–ç•Œéšè—ã€‚
4.  å½“è°ƒç”¨`ShoppingCart`çš„`GetShoppingItems`æ—¶ï¼Œå®ƒä¼šä¼ å…¥å¯†é’¥ã€‚
5.  å€¼å¾—ä¸€æçš„æ˜¯ï¼Œåœ¨ç¬¬ **15** è¡Œï¼Œå¦‚æœå¼€å‘è€…è¯•å›¾è¿›è¡Œéæ³•/ä¸åˆé€»è¾‘çš„å¼ºåˆ¶è½¬æ¢è°ƒç”¨`GetShoppingItems`æ–¹æ³•ï¼Œä»–ä¼šå‘ç°ä»–éœ€è¦ä¼ å…¥ä¸€ä¸ªä»–æ²¡æœ‰çš„**å†™å¯†é’¥**ã€‚
6.  è¿™å°†ä½¿ä»–è¯•å›¾åšä¸€äº›é”™è¯¯çš„äº‹æƒ…å¬èµ·æ¥å¾ˆæ¸…æ¥šã€‚
7.  æ­¤å¤–ï¼Œå³ä½¿å¼€å‘äººå‘˜å†³å®šä¸º**å†™å¯†é’¥**ä¼ å…¥ä»»ä½•å€¼ï¼Œä¹Ÿä¼šæŠ›å‡ºå¼‚å¸¸ã€‚

**ç¨‹åº**:

æˆ‘ä»¬åœ¨è¿™é‡Œå¯ä»¥æ³¨æ„åˆ°:

1.  æˆ‘ä»¬æ­£åœ¨åˆå§‹åŒ–`m_WritingSecretKey`å’Œ`m_ReadingSecretKey`ã€‚
2.  æˆ‘ä»¬æ­£åœ¨åˆ›å»ºä¸€ä¸ªä¼ å…¥é”®çš„`ShoppingCart`å®ä¾‹ã€‚
3.  æˆ‘ä»¬ä¸`Store`å…±äº«**å†™å¯†é’¥**ã€‚
4.  æˆ‘ä»¬ä¸`CheckOutManager`å…±äº«**è¯»å–å¯†é’¥**ã€‚
5.  å°±æ˜¯è¿™æ ·ã€‚

å°†è¿™äº›ä»£ç ä¿®æ”¹åˆ°ä½å°†ä½¿æ•´ä¸ªè§£å†³æ–¹æ¡ˆåƒ charm ä¸€æ ·å·¥ä½œã€‚

![](img/829ec773b29401f971b3b987581ee502.png)

**æ–¹æ³• 2â€”â€”å¦‚æœä»£ç ä¸ºç¬¬ä¸‰æ–¹æ‰€æœ‰**ã€‚å›¾ç‰‡ç”±[è‰¾å“ˆè¿ˆå¾·Â·å¡”é‡Œå…‹](https://medium.com/@eng_ahmed.tarek)æ‹æ‘„

# æ–¹æ³• 2 -å¦‚æœä»£ç ä¸ºç¬¬ä¸‰æ–¹æ‰€æœ‰

åœ¨è¿™ç§æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬å°†é¦–å…ˆé˜»æ­¢å¼€å‘äººå‘˜è¿›è¡Œé€ å‹ã€‚

åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å‡è®¾æ•´ä¸ªä»£ç ç”±ç¬¬ä¸‰æ–¹åº“æ‹¥æœ‰ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬ä¸èƒ½åœ¨ä¸»ä»£ç ä¸Šåº”ç”¨æ›´æ”¹ã€‚

è¿™ç§æ–¹æ³•çš„ä¸»è¦æ€æƒ³æ˜¯ç”¨å¤šä¸ª**å¯†é’¥**ä¿æŠ¤å¯¹å…¬å…±æ–¹æ³•çš„è°ƒç”¨ï¼›ä¸€ä¸ª**å¯†é’¥**ç”¨äº**è¯»**æ“ä½œï¼Œå¦ä¸€ä¸ª**å¯†é’¥**ç”¨äº**å†™**æ“ä½œã€‚è¿™äº›å¯†é’¥æ˜¯åœ¨åˆ›å»º`ShoppingCart`ç±»çš„å®ä¾‹æ—¶åˆ›å»ºçš„ã€‚

è¿™äº›**å¯†é’¥**çš„æ‰€æœ‰è€…æ˜¯ä¸»æ¨¡å—ï¼Œç„¶åä¸»æ¨¡å—è´Ÿè´£å°†æ­£ç¡®çš„**å¯†é’¥**å…±äº«ç»™æ­£ç¡®çš„æ¨¡å—ã€‚

å› æ­¤ï¼Œæˆ‘ä»¬å‡è®¾è¿™æ˜¯ç¬¬ä¸‰æ–¹ä»£ç :

ç°åœ¨æˆ‘ä»¬è¦åšçš„æ˜¯å°†å®ƒä»¬åŒ…è£…åˆ°æˆ‘ä»¬çš„ä¿æŠ¤å±‚ä¸­ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚

**iprotecttedstoreshopping items**å’Œ**iprotecttedlistshopping items**:

**å—ä¿æŠ¤çš„è´­ç‰©è½¦**:

è¿™é‡Œå”¯ä¸€çš„æ–°ä¸œè¥¿æ˜¯æˆ‘ä»¬åœ¨å†…éƒ¨ä½¿ç”¨äº†ä¸å—ä¿æŠ¤çš„`ShoppingCart`ç±»ï¼Œä½†æ˜¯ç”¨æˆ‘ä»¬çš„**å¯†é’¥**æ£€æŸ¥åŒ…è£…äº†å®ƒã€‚

**å—ä¿æŠ¤çš„å•†åº—**:

åŒæ ·çš„æ¦‚å¿µä¹Ÿé€‚ç”¨äºè¿™é‡Œï¼Œæˆ‘ä»¬åœ¨å†…éƒ¨ä½¿ç”¨æœªå—ä¿æŠ¤çš„`Store`ç±»ï¼Œä½†æ˜¯ç”¨æˆ‘ä»¬çš„**å†™** **å¯†é’¥**æ£€æŸ¥æ¥åŒ…è£…å®ƒã€‚

**å—ä¿æŠ¤çš„æ£€å‡ºç®¡ç†å™¨**:

è¿™é‡Œåº”ç”¨äº†ç›¸åŒçš„æ¦‚å¿µï¼Œæˆ‘ä»¬åœ¨å†…éƒ¨ä½¿ç”¨äº†æœªå—ä¿æŠ¤çš„`CheckOutManager`ç±»ï¼Œä½†æ˜¯ç”¨æˆ‘ä»¬çš„**è¯»å–å¯†é’¥**æ£€æŸ¥åŒ…è£…äº†å®ƒã€‚

**ç¨‹åº**:

è¿™é‡Œå”¯ä¸€çš„æ–°ä¸œè¥¿æ˜¯ï¼Œæˆ‘ä»¬åˆ›å»ºäº†å—ä¿æŠ¤çš„åŒ…è£…å™¨ï¼Œä¼ å…¥äº†ä¸å—ä¿æŠ¤çš„å¯¹è±¡ï¼Œå¹¶æœ€ç»ˆå‘å¤–ç•Œå…¬å¼€äº†è¿™äº›å—ä¿æŠ¤çš„åŒ…è£…å™¨ã€‚

![](img/8e623343d6e0cec7859c37a43792b118.png)

**æœ€ç»ˆæƒ³æ³•**ã€‚ç”± [Erwan Hesry](https://unsplash.com/@erwanhesry?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) åœ¨ [Unsplash](https://unsplash.com/?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) ä¸Šæ‹æ‘„ï¼Œç”± [Ahmed Tarek](https://medium.com/@eng_ahmed.tarek) è°ƒæ•´

# æœ€åçš„æƒ³æ³•

ç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»æ¢ç´¢äº†å¤šç§æ–¹æ³•æ¥ä½¿æˆ‘ä»¬çš„ä»£ç æ›´åŠ å¥å£®ï¼Œä½†æ˜¯ï¼Œé—®é¢˜æ˜¯:

> æˆ‘ä¼šå»ºè®®ä½ æ€»æ˜¯ä½¿ç”¨è¿™äº›æ–¹æ³•å—ï¼Ÿ

ç­”æ¡ˆå¾ˆç®€å•:

> ä¸ï¼Œåªåœ¨éœ€è¦çš„æ—¶å€™ä½¿ç”¨ã€‚å¦‚æœæ‚¨çš„ç³»ç»Ÿæœ‰ä¸€äº›å…³é”®æ¨¡å—éœ€è¦é¢å¤–çš„å®‰å…¨å±‚ï¼Œé‚£ä¹ˆæ‚¨å¯ä»¥ä½¿ç”¨è¿™äº›æ–¹æ³•ã€‚å¦åˆ™ï¼Œæ‚¨å°†å¢åŠ ç³»ç»Ÿçš„å¤æ‚æ€§ï¼Œå´æ²¡æœ‰ä»»ä½•å›æŠ¥ã€‚

å› æ­¤ï¼Œè¯è™½å¦‚æ­¤ï¼Œå¸Œæœ›ä½ è§‰å¾—è¯»è¿™ä¸ªæ•…äº‹å’Œæˆ‘å†™å®ƒä¸€æ ·æœ‰è¶£ã€‚

![](img/dae42316c04548aad197e34b378e3bf1.png)

# å¸Œæœ›è¿™äº›å†…å®¹å¯¹ä½ æœ‰ç”¨ã€‚å¦‚æœæ‚¨æƒ³æ”¯æŒ:

å¦‚æœæ‚¨è¿˜ä¸æ˜¯**ä¸­**ä¼šå‘˜ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ [**æˆ‘çš„æ¨èé“¾æ¥**](https://medium.com/@eng_ahmed.tarek/membership) ï¼Œè¿™æ ·æˆ‘å¯ä»¥ä»**ä¸­**è·å¾—æ‚¨çš„ä¸€éƒ¨åˆ†è´¹ç”¨ï¼Œæ‚¨æ— éœ€æ”¯ä»˜ä»»ä½•é¢å¤–è´¹ç”¨ã€‚è®¢é˜…
[**æˆ‘çš„ç®€è®¯**](https://medium.com/subscribe/@eng_ahmed.tarek) å°†æœ€ä½³å®è·µã€æ•™ç¨‹ã€æç¤ºã€æŠ€å·§å’Œè®¸å¤šå…¶ä»–å¾ˆé…·çš„ä¸œè¥¿ç›´æ¥å‘é€åˆ°æ‚¨çš„æ”¶ä»¶ç®±ã€‚

![](img/dae42316c04548aad197e34b378e3bf1.png)

# å…¶ä»–èµ„æº

è¿™äº›æ˜¯ä½ å¯èƒ½ä¼šå‘ç°æœ‰ç”¨çš„å…¶ä»–èµ„æºã€‚

[](/flagged-enumerations-how-to-represent-features-combinations-into-one-field-f32e46a0885) [## æ ‡è®°æšä¸¾:å¦‚ä½•åœ¨ä¸€ä¸ªå­—æ®µä¸­è¡¨ç¤ºç‰¹å¾ç»„åˆ

### å°†[è¯»ã€å†™ã€ä¿®æ”¹â€¦â€¦]ç­‰åŠŸèƒ½åŠå…¶ç»„åˆè¡¨ç¤ºåˆ°å•ä¸ªå­—æ®µä¸­ã€‚

levelup.gitconnected.com](/flagged-enumerations-how-to-represent-features-combinations-into-one-field-f32e46a0885) [](/what-is-caching-in-software-systems-cfa71c385bfc) [## ä»€ä¹ˆæ˜¯è½¯ä»¶ç³»ç»Ÿä¸­çš„ç¼“å­˜

### è½¯ä»¶ç³»ç»Ÿä¸­ç¼“å­˜çš„å®šä¹‰å’Œæœ€ä½³å®è·µã€‚

levelup.gitconnected.com](/what-is-caching-in-software-systems-cfa71c385bfc) [](/chain-of-responsibility-design-pattern-in-net-c-666bb4dc2816) [## ä¸­çš„è´£ä»»é“¾è®¾è®¡æ¨¡å¼ã€‚NET C#

### å­¦ä¹ ä¸­çš„è´£ä»»é“¾è®¾è®¡æ¨¡å¼ã€‚å¸¦æœ‰å¢å¼ºåŠŸèƒ½çš„. NET C#ã€‚

levelup.gitconnected.com](/chain-of-responsibility-design-pattern-in-net-c-666bb4dc2816) ![](img/dae42316c04548aad197e34b378e3bf1.png)