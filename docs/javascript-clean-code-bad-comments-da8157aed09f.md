# JavaScript 干净代码——糟糕的注释

> 原文：<https://levelup.gitconnected.com/javascript-clean-code-bad-comments-da8157aed09f>

![](img/57ec18c8e5272c761c699b527cbe3e7f.png)

照片由[丹尼斯·莱昂](https://unsplash.com/@denisseleon?utm_source=medium&utm_medium=referral)在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 拍摄

注释有时用来解释我们无法用代码解释的想法。其他时候，它用于解释一些混乱的代码在做什么。

在这篇文章中，我们将看看各种类型的不好的评论。

大部分评论都是差评。它们被用来解释糟糕的决策或糟糕的代码。我们应该避免这种评论。

# 咕哝

仅仅因为我们喜欢或者过程需要而添加评论并不是一个好的理由。

如果我们要写的话，至少评论必须有用。例如，如果我们有:

```
try {
  loadProperties();
} catch (e) {
  // No properties means everything is loaded
}
```

然后我们有一个在`catch`块中不太有用的注释。我们不知道作者想说什么。

我们不知道“属性”是什么意思。什么时候所有东西都装好了？只是没有告诉我们太多有用的信息。

这可能会让更多帮助他们的人感到困惑。我们可能最终只是查看代码，看看`loadProperties`函数做了什么来获得代码的知识。

# 多余的评论

这些注释解释了代码已经解释过的同样的事情。

例如，如果我们有:

```
// adds 2 numbers;
const add = (a, b) => a + b;
```

那么“增加 2 个数字”的注释是多余的，因为我们已经知道这个函数叫做`add`，它接受 2 个数字并返回它们的和。因此，我们不需要在它之前添加注释来解释代码中已经显示的内容。

# 误导性的评论

误导性的评论会导致开发人员对代码有错误的理解，做出错误的决定并产生错误。

因此显然不是食物。这导致了更多的调试时间来找出为什么有些东西不能像他们在评论中描述的那样工作。

# 强制性意见

如果一段代码不是供公众使用的，那么就没有读者来评论他们，因为我们不需要为他们生成文档。

它只是用额外的文本使代码文件变得混乱，这对读者和其他开发人员没有多大帮助。

## 日志注释

用一段代码的所有变更的日志写一个长注释是没有用的。它们很长，并且不提供太多信息，因为我们已经在版本控制系统中有了变更历史。

如果我们没有使用版本控制来版本化我们的代码，现在是时候使用它了，这样我们就可以记录变更历史，用分支创建副本，并在团队工作时将不同人的代码合并成一个。

# 噪音评论

噪音评论不过是噪音。它们毫无用处，只会占用屏幕和磁盘空间。

我们回到这个例子:

```
// adds 2 numbers;
const add = (a, b) => a + b;
```

这显然不是很有用，因为代码已经用与注释相同的方式解释了一切。

# 当标识符可以更好地命名时，不要使用注释

我们可以很容易地编写代码来解释它们自己。例如，不要写:

```
// check if employee is eligible for child care benefits
if (employee.salary < 50000 && employee.hasChild) {
  //...
}
```

我们可以写:

```
const isEligibleForChildCareBenefits = (employee) => {
  return employee.salary < 50000 && employee.hasChild;
}if (isEligibleForChildCareBenefits(employee)) {
  //...
}
```

我们的新功能解释了和评论一样的东西，但是用了更少的词。

注释也会很快过时，因为当代码被修改时，它们经常被忽略。

![](img/b52510e6a929db749b1ab124a1dcbc72.png)

安斯利·文图拉在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上的照片

# 位置标记

一些开发人员喜欢放置如下位置标记:

```
// //////////
```

这些额外注释的使用大多数时候都是有问题的。只有当它们真的很重要的时候才使用它们。

# 右大括号注释

有些人喜欢用右括号标记行，并附上如下注释:

```
if (employee.salary < 50000 && employee.hasChild) {
  //...
} // if
```

这是显而易见的，所以没什么用。大多数文本编辑器和 ide 会在你把光标放在它上面的时候突出显示左右括号，这样我们就不会错过它们。

# 属性和副线

这类似于:

```
/* Added by Bob */
```

源代码控制系统已经提供了这些信息，所以我们的代码中肯定不需要它们。

# 注释掉的代码

注释我们的代码弄乱了我们的文件和屏幕。此外，它没有提供任何价值，因为它们被注释掉了。这也导致开发人员在阅读代码时质疑为什么他们首先被注释掉了。

用它们很容易误导开发者，应该去掉。如果程序在注释掉它们的情况下仍然工作，它们就不需要出现在代码中。

如果我们需要它们，我们可以从源代码控制系统的变更历史中获取它们。

# HTML 注释

HTML 注释绝对不属于代码。人类无法阅读它们。因此，从我们人类可读的注释中生成 HTML 代码应该是文档程序的责任。

# 信息太多

没人想在评论里看文章，所以我们不应该写。如果我们真的需要的话，最好保持简短。

# 非公共代码中的 JSDoc

没有向公众公开的代码不需要像为公众制作的那样进行文档化。所以我们不应该这样做，这样可以节省大量的时间来记录那些不应该被记录的代码。

# 结论

正如我们所看到的，有许多类型的不好的评论。我们应该避免所有这些，以节省我们自己和其他开发人员的时间。他们没有贡献任何价值或者他们误导了人们，这更糟糕。