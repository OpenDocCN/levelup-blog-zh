<html>
<head>
<title>Ionic-React Login Authentication with RESTful API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Ionic-React使用RESTful API进行登录认证</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/ionic-react-login-authentication-with-restful-api-79352883b9f3?source=collection_archive---------1-----------------------#2020-09-14">https://levelup.gitconnected.com/ionic-react-login-authentication-with-restful-api-79352883b9f3?source=collection_archive---------1-----------------------#2020-09-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="30c7" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">了解如何使用Ionic-React框架编写本地移动应用程序。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/272dba1a8771ba1c4ed8eb431559ef72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Qhqd8qBNtbrWLq6ZVtzXCA.png"/></div></div></figure><p id="c3d1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在本教程中，我将通过构建一个简单的登录认证应用程序来帮助您开始使用Ionic-React框架。下面的视频展示了我们将一起开发的应用程序。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ln lo l"/></div></figure><p id="c22c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">那么，什么是<a class="ae lp" href="https://ionicframework.com/docs/react" rel="noopener ugc nofollow" target="_blank">离子反应</a>以及为什么使用它？Ionic-React是“React Native”的Ionic版本，用于构建“本地”移动应用程序。该框架提供了许多现成的移动UI组件，用于构建很酷的移动应用程序。与“React Native”相比，该框架的一个主要优势是它允许您利用现有的CSS技能。这意味着你可以使用“日常”的css元素，如按钮、h1标签、p标签等来创建整个移动用户界面。多酷啊！</p><p id="61f3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我假设你有基本的React知识，并且理解组件和钩子等概念。我已经创建了一个很棒的教程来帮助你开始使用R <a class="ae lp" rel="noopener ugc nofollow" target="_blank" href="/react-material-table-crud-operations-with-restful-api-data-ca1af738d3c5?source=friends_link&amp;sk=971af34c01f09c724d94a9de67c8e70b"> eact和Material UI</a>——是的，去看看吧！本教程并不要求具备离子技术，但拥有它是很好的。另外，我已经在Github 上传了<a class="ae lp" href="https://github.com/effiongcharles/login_auth" rel="noopener ugc nofollow" target="_blank">完整的项目源代码，供你下载和试用。</a></p><p id="8c5d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">为了开始使用Ionic-React，我们需要使用下面的命令安装它:</p><pre class="kg kh ki kj gt lq lr ls lt aw lu bi"><span id="d4d7" class="lv lw iq lr b gy lx ly l lz ma">npm install -g @ionic/cli</span></pre><p id="77cd" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在我们已经安装了Ionic-React，是时候使用下面的命令创建我们的应用程序了:</p><pre class="kg kh ki kj gt lq lr ls lt aw lu bi"><span id="05e2" class="lv lw iq lr b gy lx ly l lz ma">ionic start <strong class="lr ir">Auth</strong> blank --type=react</span></pre><p id="a0ed" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">该命令使用空白模板创建一个名为“Auth”的Ionic-React应用程序。通过运行以下命令，我们可以立即在网络浏览器上查看该应用程序:</p><pre class="kg kh ki kj gt lq lr ls lt aw lu bi"><span id="0277" class="lv lw iq lr b gy lx ly l lz ma">ionic serve</span></pre><p id="f48a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">当web浏览器打开时，会显示下图中的屏幕截图。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mb"><img src="../Images/970acf68afc8e699ea0e0b361ed90000.png" data-original-src="https://miro.medium.com/v2/resize:fit:1272/format:webp/1*OkIv8qw7d0OLjtZRFc8UMA.png"/></div></figure><p id="c366" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">恭喜你！您已经创建了您的第一个Ionic-React移动应用程序。那不是很容易吗？☺️注意到，显示的页面或屏幕是Ionic-React样板文件附带的默认“主页”。“<em class="mc"> &lt;项目&gt; /pages </em>”目录包含主页的源文件，即“<em class="mc"> Home.tsx. </em>”在我们开始用Ionic-React组件创建自己的页面之前，让我们先讨论一下我们应用程序的后端。</p><h1 id="d6f3" class="md lw iq bd me mf mg mh mi mj mk ml mm jw mn jx mo jz mp ka mq kc mr kd ms mt bi translated">后端</h1><p id="1eb6" class="pw-post-body-paragraph kr ks iq kt b ku mu jr kw kx mv ju kz la mw lc ld le mx lg lh li my lk ll lm ij bi translated">我们的应用程序使用免费的在线RESTful API，这使我们能够抽象出自己开发这样一个API的复杂性。它使用了<a class="ae lp" href="https://reqres.in/" rel="noopener ugc nofollow" target="_blank"><em class="mc"/></a>提供的免费API。<em class="mc"> Regres </em>提供了许多api端点，我发现它们对原型开发非常有用。我们将使用<strong class="kt ir"> <em class="mc"> /api/login </em> </strong>端点来认证用户。该端点需要两个参数—电子邮件和密码，如下面的代码片段所示:</p><pre class="kg kh ki kj gt lq lr ls lt aw lu bi"><span id="8d85" class="lv lw iq lr b gy lx ly l lz ma">//request<br/>{<br/>    "email": "eve.holt@reqres.in",<br/>    "password": "cityslicka"<br/>}</span><span id="a357" class="lv lw iq lr b gy mz ly l lz ma">//success  - Response 200</span><span id="ede2" class="lv lw iq lr b gy mz ly l lz ma">{<br/>    "token": "QpwL5tke4Pnpja7X4"<br/>}</span><span id="5491" class="lv lw iq lr b gy mz ly l lz ma">//failure - Response 400<br/>{<br/>    "error": "Missing password"<br/>}</span></pre><p id="3372" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">因此，在发起一个api请求后，我们从服务器得到一个响应。在这种情况下，我们为成功的服务器响应取回一个有效的令牌(通常以加密形式存储用户详细信息)。否则，我们会返回一个错误。</p><p id="a76b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在让我们转到应用程序的前端，现在您已经对后端过程有了很好的理解。</p><h1 id="fea6" class="md lw iq bd me mf mg mh mi mj mk ml mm jw mn jx mo jz mp ka mq kc mr kd ms mt bi translated">前端</h1><p id="58ea" class="pw-post-body-paragraph kr ks iq kt b ku mu jr kw kx mv ju kz la mw lc ld le mx lg lh li my lk ll lm ij bi translated">Ionic-React框架提供了许多开箱即用的移动UI组件，如提醒、工具栏、卡片等。这使得设置移动页面变得容易，而不需要编写一行css代码，就像材料UI和引导程序一样。然而，Ionic-React应用程序采用了底层平台的外观和感觉，该平台可以是android或IOS。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi na"><img src="../Images/523bafb9614b3a285678c284706bd405.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j0RDnjzvwPi4oL7SLO4MRw.png"/></div></div></figure><p id="79aa" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">上图显示了我们的页面登录页面，这是典型的大多数登录页面。页面分为标题(包含页面标题，即登录)和页面内容。页面上的每一项实际上都是一种离子反应成分。</p><p id="25ae" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Ionic-React UI组件很容易使用，使用这些组件应该没有问题，特别是如果你已经使用过其他UI框架，比如bootstrap。让我们来看看用于呈现页面的一些组件。</p><pre class="kg kh ki kj gt lq lr ls lt aw lu bi"><span id="1850" class="lv lw iq lr b gy lx ly l lz ma">&lt;IonHeader&gt;<br/>  &lt;IonToolbar&gt;<br/>    &lt;IonTitle&gt;Login&lt;/IonTitle&gt;<br/>  &lt;/IonToolbar&gt;<br/>&lt;/IonHeader&gt;</span></pre><p id="dc09" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">上面的代码片段用于呈现页面标题。首先，我们指定页面的标题部分(使用<em class="mc"> IonHeader组件)</em>，然后使用<em class="mc"> Iontoolbar </em>组件将标题放在页面的顶部(标题部分)。工具栏组件也可用于将组件放置在页面底部，使用<em class="mc"> IonFooter </em>组件作为父组件。</p><pre class="kg kh ki kj gt lq lr ls lt aw lu bi"><span id="6b33" class="lv lw iq lr b gy lx ly l lz ma">&lt;IonRow&gt;<br/>  &lt;IonCol&gt;<br/>    &lt;IonIcon<br/>      style={{ fontSize: "70px", color: "#0040ff" }}<br/>      icon={personCircle}<br/>    /&gt;<br/>  &lt;/IonCol&gt;<br/>&lt;/IonRow&gt;</span></pre><p id="670c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">与大多数css框架类似，Ionic-React允许我们在网格布局中，即在行/列中布局内容。上面的代码片段使用<em class="mc">io icon</em>组件呈现页面图标，即人物图标。请注意，我们可以使用传统的css来改变图标样式，这是Ionic-React相对于React-Native框架的优势之一。</p><pre class="kg kh ki kj gt lq lr ls lt aw lu bi"><span id="852f" class="lv lw iq lr b gy lx ly l lz ma">&lt;IonRow&gt;<br/>  &lt;IonCol&gt;<br/>    &lt;IonItem&gt;<br/>      &lt;IonLabel position="floating"&gt; Email&lt;/IonLabel&gt;<br/>      &lt;IonInput<br/>        type="email"<br/>        value={email}<br/>        onIonChange={(e) =&gt; setEmail(e.detail.value!)}<br/>        &gt;<br/>      &lt;/IonInput&gt;<br/>    &lt;/IonItem&gt;<br/>  &lt;/IonCol&gt;<br/>&lt;/IonRow&gt;</span></pre><p id="883f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">上面的代码片段使用<em class="mc"> IonLabel </em>(用于显示标签)和<em class="mc"> IonInput </em>显示实际的电子邮件输入字段，显示页面的电子邮件区域。注意，我们可以指定类似于传统css的输入类型(文本、电子邮件、密码)。当用户通过<em class="mc"> onIonChange </em>函数输入电子邮件地址时，我们改变“电子邮件状态”对象。这类似于输入元素的传统css <em class="mc"> onChange </em>事件。</p><pre class="kg kh ki kj gt lq lr ls lt aw lu bi"><span id="bd7d" class="lv lw iq lr b gy lx ly l lz ma">&lt;IonRow&gt;<br/>  &lt;IonCol&gt;<br/>    &lt;p style={{ fontSize: "small" }}&gt;<br/>      By clicking LOGIN you agree to our &lt;a href="#"&gt;Policy&lt;/a<br/>    &lt;/p&gt;</span><span id="86b4" class="lv lw iq lr b gy mz ly l lz ma">    &lt;IonButton expand="block" onClick={handleLogin}&gt;<br/>      Login<br/>    &lt;/IonButton&gt;</span><span id="473a" class="lv lw iq lr b gy mz ly l lz ma">    &lt;p style={{ fontSize: "medium" }}&gt;<br/>      Don't have an account? &lt;a href="#"&gt;Sign up!&lt;/a&gt;<br/>    &lt;/p&gt;<br/>  &lt;/IonCol&gt;<br/>&lt;/IonRow&gt;</span></pre><p id="de29" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">上面的代码片段显示了助手文本和登录按钮。请注意，我们可以使用传统的css元素来显示文本，并根据我们的喜好设置样式。Ionic-React为我们提供了用于呈现按钮的<em class="mc"> IonButton </em>组件。我们使用了“block”属性来允许按钮跨越整个屏幕宽度。注意，点击按钮时会调用<em class="mc"> handleLogin </em>函数。接下来我们来看看这个函数。</p><pre class="kg kh ki kj gt lq lr ls lt aw lu bi"><span id="1289" class="lv lw iq lr b gy lx ly l lz ma">const handleLogin = () =&gt; {<br/>  //validate inputs code not shown</span><span id="443b" class="lv lw iq lr b gy mz ly l lz ma">  const loginData = {<br/>    email: email,<br/>    password: password,<br/>  };</span><span id="8935" class="lv lw iq lr b gy mz ly l lz ma">  const api = axios.create({<br/>    baseURL: `https://reqres.in/api`,<br/>  });</span><span id="5e74" class="lv lw iq lr b gy mz ly l lz ma">  api.post("/login", loginData)<br/>    .then((res) =&gt; {<br/>      history.push("/dashboard/" + email);<br/>    })<br/>    .catch((error) =&gt; {<br/>      setMessage("Auth failure! Please create an account");<br/>      setIserror(true);<br/>    });<br/>};</span></pre><p id="7ce0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">上面显示了<em class="mc"> handleLogin </em>函数代码片段。首先，我们验证用户输入(为了简单起见，这里没有显示代码，但是可以在项目源代码中找到)。接下来，我们使用axios包发起一个api请求。这个包很适合启动api调用，可以使用“<strong class="kt ir"><em class="mc">NPM install axios</em></strong>”来安装请注意，我们正在向后端api发出post请求，并传入一个包含用户登录凭证(即电子邮件和密码)的<em class="mc"> JSON </em>对象。接下来，我们处理服务器(API)响应，并决定要执行的正确操作。如果我们收到错误代码(例如400、401)，这意味着出现了问题，服务器无法验证用户。在这种情况下，我们捕捉错误并向用户显示一条好消息。另一方面，如果一切顺利，我们只需将用户重定向到仪表板屏幕。</p><div class="kg kh ki kj gt ab cb"><figure class="nb kk nc nd ne nf ng paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/a8fc23db9aad20f64c2dc378ff2e3660.png" data-original-src="https://miro.medium.com/v2/resize:fit:666/format:webp/1*uJMS3l152bSoqE6KmwDfZQ.png"/></div></figure><figure class="nb kk nh nd ne nf ng paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/6d54c5dc135f6228fb9bc48eb358fc63.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*hE_xcZYq8_Rw0EEiPsYZEA.png"/></div></figure><figure class="nb kk ni nd ne nf ng paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/85df335399c28606cfc3c4de2712da5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*JqXq6ODKTdgabfVOR5JI1w.png"/></div><figcaption class="nj nk gj gh gi nl nm bd b be z dk nn di no np translated"><strong class="bd me">左</strong>:无效邮件。<strong class="bd me">中间</strong>:认证失败。<strong class="bd me">右侧</strong>:登录成功——仪表板页面</figcaption></figure></div><p id="319f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">上面的截图显示了上面讨论的一些案例。Dashbord页面显示了从RESTful API获取的使用列表。使用<em class="mc"> IonList </em>组件显示获取的数据。</p><p id="eef6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">总结</strong></p><p id="17c3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我已经向您展示了如何通过开发一个简单的身份验证应用程序，使用Ion-React组件和来自RESTful API的数据快速开始移动应用程序开发。本教程阐释了可用于构建其他复杂移动应用程序的核心概念。</p><p id="f7dd" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Ion-React确实是一个伟大的框架，包含了大量用于快速移动应用开发的组件。与React-Native相比，学习曲线更快，因为我们可以利用现有的css知识，而不是像React-Native那样学习新的组件样式。我相信你会喜欢用Ionic-React学习和构建很酷的应用程序。</p><p id="1655" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我希望你在这篇教程中学到了一些东西。</p><p id="de00" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">请随意在Github上下载/克隆项目源代码。</p><p id="ff13" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果你是haven't☺️ 的话，可以看看我其他的关于<a class="ae lp" rel="noopener ugc nofollow" target="_blank" href="/react-material-table-crud-operations-with-restful-api-data-ca1af738d3c5?source=friends_link&amp;sk=971af34c01f09c724d94a9de67c8e70b"> React/Material UI </a>和<a class="ae lp" rel="noopener ugc nofollow" target="_blank" href="/program-your-first-multiple-user-network-game-in-python-9f4cc3650de2?source=friends_link&amp;sk=312059e7967875fdbf4c7b67520bbdc9">python网络游戏编程的教程</a></p><p id="ffcc" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">祝编程愉快！</p></div></div>    
</body>
</html>