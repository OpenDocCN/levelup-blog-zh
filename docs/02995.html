<html>
<head>
<title>Debugging TypeScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">调试类型脚本</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/debugging-typescript-3b3aaf059f76?source=collection_archive---------11-----------------------#2020-04-14">https://levelup.gitconnected.com/debugging-typescript-3b3aaf059f76?source=collection_archive---------11-----------------------#2020-04-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="fcc0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我理解那种感觉，当反复尝试解决问题却没有解决问题时的愤怒和沮丧。Console.log语句，以查看哪些方法被调用，哪些方法先完成。不要在屏幕上打孔，用调试器代替。🙃</p><p id="14d7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">调试器是一项非常漂亮但有时未被充分利用的技术，可用于逐行运行程序，查看所有变量的状态变化，堆栈信息，并在程序运行时检查整个程序的状态。</p><p id="112f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">当我使用Java作为后端时，这是很容易做到的。如果出现意外情况，我会使用调试器来找出发生了什么。然而，对于JavaScript，我的第一反应总是放下一堆console.logs并重复运行代码来找出发生了什么。我猜这是由于我当时工作的前端和后端环境之间的巨大差异。</p><p id="f99d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在我已经转向了面向前端和后端的TypeScript，统一调试的体验非常愉快。我将在本文中分享一些调试TypeScript的方法。这些方法也适用于JavaScript。这些都在<strong class="js iu"> VS代码</strong>中，因为那是我使用的代码，但是其中的一些部分对于其他ide来说是相似的。我会在最后附上一些可能对其他ide有用的链接。</p><h1 id="7119" class="ko kp it bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">设置</h1><p id="cb7f" class="pw-post-body-paragraph jq jr it js b jt lm jv jw jx ln jz ka kb lo kd ke kf lp kh ki kj lq kl km kn im bi translated">记住，运行的不是TypeScript。它被转换成JavaScript，这就是执行的内容。我们需要一种方法将输出JavaScript映射到源代码。很简单。只需在<strong class="js iu"> tsconfig.json </strong>中添加<code class="fe lr ls lt lu b">“sourceMap”: true,</code>到<code class="fe lr ls lt lu b">compilerOptions </code>即可。这将告诉编译器为我们生成<strong class="js iu"> .js.map </strong>文件。这被称为<strong class="js iu">源映射</strong>，它保存了关于源代码如何被转换成输出的信息，使得浏览器/节点能够重构原始源代码并将其呈现在调试器中。</p><p id="0d39" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这是tsconfig的最小版本。</p><pre class="lv lw lx ly gt lz lu ma mb aw mc bi"><span id="7996" class="md kp it lu b gy me mf l mg mh">{<br/>  "compilerOptions": {<br/>    "target": "es5",<br/>    "module": "commonjs",<br/>    "rootDir": "src",<br/>    "outDir": "build",<br/>    "sourceMap": true<br/>  }<br/>}</span></pre><h1 id="b5fa" class="ko kp it bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">节点-后端</h1><p id="1c04" class="pw-post-body-paragraph jq jr it js b jt lm jv jw jx ln jz ka kb lo kd ke kf lp kh ki kj lq kl km kn im bi translated">当我们启动一个带有<code class="fe lr ls lt lu b">--inspect</code>标志的程序时，节点将开始监听默认主机和端口<code class="fe lr ls lt lu b">127.0.0.1:9229</code>上的调试客户端。然后，我们可以使用任何IDE将调试器客户端附加到正在运行的进程，并开始调试。</p><p id="2d79" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">有两种方法可以解决这个问题。要么我们让VS代码处理整个生命周期，要么我们可以在调试模式下单独运行程序，并使用VS代码为它附加一个调试器。</p><h2 id="aa70" class="md kp it bd kq mi mj dn ku mk ml dp ky kb mm mn lc kf mo mp lg kj mq mr lk ms bi translated">VS代码处理一切</h2><ol class=""><li id="db7e" class="mt mu it js b jt lm jx ln kb mv kf mw kj mx kn my mz na nb bi translated">对于单个文件，程序在文件打开时按F5键。它将在调试模式下运行文件，就这样。通常不会出现这种情况。</li></ol><figure class="lv lw lx ly gt nc"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="9a15" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">2.创造。并添加以下代码。更换&lt;&gt;中的任何东西。</p><p id="eb44" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">3.转到调试/运行面板，从配置下拉菜单中选择<em class="nf">启动程序</em>并点击运行。</p><h2 id="0f61" class="md kp it bd kq mi mj dn ku mk ml dp ky kb mm mn lc kf mo mp lg kj mq mr lk ms bi translated">附加调试器</h2><ol class=""><li id="a3a9" class="mt mu it js b jt lm jx ln kb mv kf mw kj mx kn my mz na nb bi translated">创造。并添加以下代码。</li></ol><figure class="lv lw lx ly gt nc"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="cf6c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">2.使用<code class="fe lr ls lt lu b">--inspect</code>标志启动您的应用程序。</p><p id="9f3f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">3.转到调试/运行面板，从配置下拉列表中选择<em class="nf">连接</em>并点击运行。</p><h1 id="cb2d" class="ko kp it bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">铬合金前端</h1><p id="8c91" class="pw-post-body-paragraph jq jr it js b jt lm jv jw jx ln jz ka kb lo kd ke kf lp kh ki kj lq kl km kn im bi translated">Chrome可以使用chrome.exe<code class="fe lr ls lt lu b">--remote-debugging-port=9222</code>在调试模式下启动。这将告诉Chrome监听端口<code class="fe lr ls lt lu b">127.0.0.1:9222</code>来调试客户端。然后，我们可以使用任何可以与chrome调试协议接口的IDE来为它附加一个调试器。</p><p id="a023" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Chrome 有一个扩展<a class="ae ng" href="https://marketplace.visualstudio.com/items?itemName=msjsdiag.debugger-for-chrome" rel="noopener ugc nofollow" target="_blank">调试器，需要安装它才能工作。之后，有两种与Node相同的设置调试器的方法。</a></p><h2 id="84bd" class="md kp it bd kq mi mj dn ku mk ml dp ky kb mm mn lc kf mo mp lg kj mq mr lk ms bi translated">通过VS代码启动</h2><ol class=""><li id="be37" class="mt mu it js b jt lm jx ln kb mv kf mw kj mx kn my mz na nb bi translated">创造。并添加以下代码。更换&lt;&gt;中的任何东西。</li></ol><figure class="lv lw lx ly gt nc"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="2e53" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">2.转到调试/运行面板，从配置下拉列表中选择<em class="nf">启动Chrome对抗本地主机</em>并点击运行。</p><h2 id="b14a" class="md kp it bd kq mi mj dn ku mk ml dp ky kb mm mn lc kf mo mp lg kj mq mr lk ms bi translated">附加调试器</h2><ol class=""><li id="e710" class="mt mu it js b jt lm jx ln kb mv kf mw kj mx kn my mz na nb bi translated">创造。并添加以下代码。</li></ol><figure class="lv lw lx ly gt nc"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="6833" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">2.用<code class="fe lr ls lt lu b">--remote-debugging-port=9222</code>启动chrome并导航到你的页面。</p><p id="347b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">3.转到调试/运行面板，从配置下拉列表中选择<em class="nf">连接到本地主机</em>并点击运行。</p><h2 id="b874" class="md kp it bd kq mi mj dn ku mk ml dp ky kb mm mn lc kf mo mp lg kj mq mr lk ms bi translated">问题</h2><p id="1ff7" class="pw-post-body-paragraph jq jr it js b jt lm jv jw jx ln jz ka kb lo kd ke kf lp kh ki kj lq kl km kn im bi translated">chrome的初始设置有点问题。设置<code class="fe lr ls lt lu b">webRoot </code>和<code class="fe lr ls lt lu b">sourceMapPathOverrides </code>可能有点挑战。我发现Github上的<a class="ae ng" href="https://github.com/Microsoft/vscode-chrome-debug/issues/582" rel="noopener ugc nofollow" target="_blank">这个</a>线程有助于我为自己的项目做出决定。</p><h1 id="b74c" class="ko kp it bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">使用调试器</h1><ul class=""><li id="e8aa" class="mt mu it js b jt lm jx ln kb mv kf mw kj mx kn nh mz na nb bi translated">调试器运行时，将鼠标悬停在。VS代码中的ts文件。出现了一个暗红色的圆圈。点击它来设置断点。</li><li id="28c0" class="mt mu it js b jt ni jx nj kb nk kf nl kj nm kn nh mz na nb bi translated">调试时，文件名旁边的顶部会显示一个栏。即有<em class="nf">步过</em>、<em class="nf">步入</em>、<em class="nf">步出</em>、<em class="nf">重启</em>、<em class="nf">停止</em>和<em class="nf">暂停</em>的命令。</li><li id="7fe3" class="mt mu it js b jt ni jx nj kb nk kf nl kj nm kn nh mz na nb bi translated">在VS代码中有一个调试控制台，我们可以在调试模式下使用它来编写脚本，与程序进行交互。无论调试器是否在断点处停止，这些都将运行。<code class="fe lr ls lt lu b">Ctrl+Shift+Y</code>将打开调试控制台。</li></ul><figure class="lv lw lx ly gt nc gh gi paragraph-image"><div role="button" tabindex="0" class="no np di nq bf nr"><div class="gh gi nn"><img src="../Images/1604364790d23008fea92f1f722b8cfd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P-WXZxkDZ9MJATNR9rbprQ.png"/></div></div><figcaption class="nu nv gj gh gi nw nx bd b be z dk translated">调试器在运行</figcaption></figure></div><div class="ab cl ny nz hx oa" role="separator"><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od"/></div><div class="im in io ip iq"><p id="7054" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">延伸阅读:</p><ol class=""><li id="5dbf" class="mt mu it js b jt ju jx jy kb of kf og kj oh kn my mz na nb bi translated"><a class="ae ng" href="https://nodejs.org/en/docs/guides/debugging-getting-started/" rel="noopener ugc nofollow" target="_blank">节点js检查员</a></li><li id="95eb" class="mt mu it js b jt ni jx nj kb nk kf nl kj nm kn my mz na nb bi translated"><a class="ae ng" href="https://chromedevtools.github.io/devtools-protocol/" rel="noopener ugc nofollow" target="_blank"> Chrome DevTools协议</a></li><li id="6dea" class="mt mu it js b jt ni jx nj kb nk kf nl kj nm kn my mz na nb bi translated"><a class="ae ng" href="https://code.visualstudio.com/docs/typescript/typescript-debugging" rel="noopener ugc nofollow" target="_blank"> VS代码——调试打字稿</a></li><li id="0974" class="mt mu it js b jt ni jx nj kb nk kf nl kj nm kn my mz na nb bi translated"><a class="ae ng" href="https://github.com/Microsoft/vscode-chrome-debug/issues/582" rel="noopener ugc nofollow" target="_blank"> WebRoot一期</a></li></ol></div></div>    
</body>
</html>