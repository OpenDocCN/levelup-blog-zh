<html>
<head>
<title>Why I Built My Own Static Site Generator</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么我建立了自己的静态站点生成器</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/why-i-built-my-own-static-site-generator-d0b142db6407?source=collection_archive---------0-----------------------#2021-10-17">https://levelup.gitconnected.com/why-i-built-my-own-static-site-generator-d0b142db6407?source=collection_archive---------0-----------------------#2021-10-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="0b19" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">剧透:主要是为了好玩</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/29e38ebb9ed3867db261ccc102fba581.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WhR0GNM_wrfEawQ4HfU2ZQ.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@clemhlrdt?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">克莱门特·海尔多特</a>拍摄</figcaption></figure><blockquote class="kz la lb"><p id="1a17" class="lc ld le lf b lg lh ju li lj lk jx ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">最初发表于<a class="ae ky" href="https://yakkomajuri.github.io/blog/teeny" rel="noopener ugc nofollow" target="_blank">我的个人博客</a>。</p></blockquote><h1 id="709f" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated"><strong class="ak">背景故事</strong></h1><p id="7929" class="pw-post-body-paragraph lc ld it lf b lg mr ju li lj ms jx ll mt mu lo lp mv mw ls lt mx my lw lx ly im bi translated">我的<a class="ae ky" href="https://yakkomajuri.github.io/" rel="noopener ugc nofollow" target="_blank">个人博客</a>是使用名为<a class="ae ky" href="https://github.com/yakkomajuri/teeny" rel="noopener ugc nofollow" target="_blank"> Teeny </a>的静态站点生成器创建的。</p><p id="6ace" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mt ln lo lp mv lr ls lt mx lv lw lx ly im bi translated">直到博客发布的前一天，Teeny甚至还不是一个概念。它根本不存在，甚至在我的脑海里也不存在。</p><p id="01cb" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mt ln lo lp mv lr ls lt mx lv lw lx ly im bi translated">你看，很长一段时间以来，我一直想推出一个个人博客。</p><p id="b8c4" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mt ln lo lp mv lr ls lt mx lv lw lx ly im bi translated">我曾经是Medium上技术内容的定期作者(不幸的是，这些天我没有太多时间)，但我渴望有一个家来出版更多未经打磨的、个人的“意识流”作品。</p><p id="b0df" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mt ln lo lp mv lr ls lt mx lv lw lx ly im bi translated">我热爱写作，只是想有一些东西激励我坚持下去，即使没有人阅读。</p><p id="6eb3" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mt ln lo lp mv lr ls lt mx lv lw lx ly im bi translated">问题是，我遇到了大多数程序员都非常熟悉的一种情况:一种为附带项目增加越来越多范围的诀窍，以至于它们被放弃，再也见不到阳光。</p><p id="d8c9" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mt ln lo lp mv lr ls lt mx lv lw lx ly im bi translated">在许多周末，我开始使用所有正确的工具和技术建立一个博客，编写干净的代码，让它“点燃喜悦”，然后到了周日晚上，手里拿着另一个回购协议，我再也不会重温。</p><p id="c5f7" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mt ln lo lp mv lr ls lt mx lv lw lx ly im bi translated">所以几周前，我打破了这个循环。我发表了这个:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/387ef9c537053ad77fa0b52b511e4ec6.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/1*qWsHA7x-D-WIuGDHpmQB5A.png"/></div></figure><p id="f0fa" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mt ln lo lp mv lr ls lt mx lv lw lx ly im bi translated">这是一个用普通HTML编写的糟糕的代码。但它比其他任何东西都好，原因很简单:它上线了。</p><p id="a166" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mt ln lo lp mv lr ls lt mx lv lw lx ly im bi translated">这是一个很好的开始，但是，不幸的是，它缺少了我想要的一件东西:在Markdown中写作的能力。</p><p id="2150" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mt ln lo lp mv lr ls lt mx lv lw lx ly im bi translated">Markdown是自切片面包以来最好的东西，所以我的博客可能很烂，但它最好能够解析Markdown。</p><p id="e8cf" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mt ln lo lp mv lr ls lt mx lv lw lx ly im bi translated">所以我转向杰基尔。GitHub页面本身支持Jekyll，只需在GitHub UI中点击几下，您就可以开始运行了。</p><p id="2c46" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mt ln lo lp mv lr ls lt mx lv lw lx ly im bi translated">这很好，但是我失去了我想要定制页面的灵活性——GitHub让你选择一个主题，就这样。</p><p id="d225" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mt ln lo lp mv lr ls lt mx lv lw lx ly im bi translated">这是与GitHub页面原生集成的结果——如果我自己设置了Jekyll，我就会拥有我需要的控制。但是我不是Ruby工具的忠实粉丝，所以我放弃了这个想法。</p><p id="22ec" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mt ln lo lp mv lr ls lt mx lv lw lx ly im bi translated">所以，我再一次求助于一个我相当熟悉的工具:盖茨比。</p><p id="29bd" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mt ln lo lp mv lr ls lt mx lv lw lx ly im bi translated">盖茨比很棒，我和他合作了很久。</p><p id="6b96" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mt ln lo lp mv lr ls lt mx lv lw lx ly im bi translated">在PostHog，<a class="ae ky" href="https://github.com/PostHog/posthog.com" rel="noopener ugc nofollow" target="_blank">我们的网站是用Gatsby </a>构建的，我在工作的时候利用了很多Gatsby的工具(包括“底层”的东西)来完成工作。</p><p id="cae9" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mt ln lo lp mv lr ls lt mx lv lw lx ly im bi translated">这应该是我的舒适区。</p><p id="c184" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mt ln lo lp mv lr ls lt mx lv lw lx ly im bi translated">我上了盖茨比的网站，选了一个主题，然后去工作。很快，问题就很明显了:太多了。</p><p id="531c" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mt ln lo lp mv lr ls lt mx lv lw lx ly im bi translated">除了Gatsby附带的所有额外内容，许多Gatsby博客主题试图通过抽象出内部内容并展示一个<code class="fe na nb nc nd b">config.js</code>文件来让事情变得“更简单”,在那里你可以添加你的名字、简历、一些链接，剩下的事情由Gatsby来做。</p><p id="2c85" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mt ln lo lp mv lr ls lt mx lv lw lx ly im bi translated">但这是有代价的。我在目录中搜索了一会儿favicon文件，发现一些插件根据您可以在配置中设置的个人资料照片的路径自动生成了它，这清楚地表明了我的成本。</p><p id="dfcc" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mt ln lo lp mv lr ls lt mx lv lw lx ly im bi translated">我真的不需要这些。</p><p id="e86f" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mt ln lo lp mv lr ls lt mx lv lw lx ly im bi translated">因此，我们又回到了起点。</p><p id="5d15" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mt ln lo lp mv lr ls lt mx lv lw lx ly im bi translated">在这个阶段，选择是:花一点时间做一些研究，可能找到一个适合我的工具，或者自己开发一个工具来做我需要的事情，仅此而已。</p><p id="2cd6" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mt ln lo lp mv lr ls lt mx lv lw lx ly im bi translated">你已经知道发生了什么。</p><h1 id="ee51" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated"><strong class="ak">介绍田晶晶</strong></h1><p id="ca30" class="pw-post-body-paragraph lc ld it lf b lg mr ju li lj ms jx ll mt mu lo lp mv mw ls lt mx my lw lx ly im bi translated">Teeny是一个超级简单的静态网站生成器，专为满足我的需求而构建。</p><p id="a874" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mt ln lo lp mv lr ls lt mx lv lw lx ly im bi translated">它所做的只是基于HTML模板和Markdown内容生成页面。</p><p id="1811" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mt ln lo lp mv lr ls lt mx lv lw lx ly im bi translated">它做得很少，而且非常固执己见(<em class="le">阅读:我太懒了，不想构建定制/条件处理程序</em>)，但是它允许我非常快速地构建一个我满意的博客。</p><p id="4e6f" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mt ln lo lp mv lr ls lt mx lv lw lx ly im bi translated">本质上，你只需要考虑两个概念:模板和页面。</p><p id="69ef" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mt ln lo lp mv lr ls lt mx lv lw lx ly im bi translated"><strong class="lf iu">模板</strong></p><p id="3520" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mt ln lo lp mv lr ls lt mx lv lw lx ly im bi translated">模板是普通的HTML，应该添加到一个<code class="fe na nb nc nd b">templates/</code>子目录中。</p><p id="2ba3" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mt ln lo lp mv lr ls lt mx lv lw lx ly im bi translated">它们可以包含一个id为<code class="fe na nb nc nd b">page-content</code>的元素，Teeny在这里添加解析Markdown内容生成的HTML。</p><p id="7848" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mt ln lo lp mv lr ls lt mx lv lw lx ly im bi translated"><strong class="lf iu">页面</strong></p><p id="0c41" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mt ln lo lp mv lr ls lt mx lv lw lx ly im bi translated">Markdown是Teeny的一等公民，所以你网站的所有页面都是由Markdown文件定义的。</p><p id="90c3" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mt ln lo lp mv lr ls lt mx lv lw lx ly im bi translated">文件不需要有任何实际的内容，所以如果你想用HTML定义一个页面，你只需要创建一个从页面文件引用的模板。</p><p id="39f9" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mt ln lo lp mv lr ls lt mx lv lw lx ly im bi translated">要指定页面应该使用什么样的模板，可以在页面文件的第一行添加HTML注释，如下所示:</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="8743" class="ni ma it nd b gy nj nk l nl nm">&lt;!-- template: blog --&gt;</span></pre><p id="dc45" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mt ln lo lp mv lr ls lt mx lv lw lx ly im bi translated">在上面的例子中，Teeny会寻找一个名为<code class="fe na nb nc nd b">blog.html</code>的模板。如果没有指定模板，Teeny会在<code class="fe na nb nc nd b">templates/</code>中寻找一个<code class="fe na nb nc nd b">default.html</code>文件并使用它。</p><p id="d71c" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mt ln lo lp mv lr ls lt mx lv lw lx ly im bi translated">这是一个青少年工作的例子。</p><blockquote class="kz la lb"><p id="62bf" class="lc ld le lf b lg lh ju li lj lk jx ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated"><strong class="lf iu"> <em class="it">旁注:</em> </strong> <em class="it"> Teeny是我在看电影和打篮球之间编写的未经充分测试的代码。</em> <strong class="lf iu"> <em class="it">但是</em> </strong> <em class="it">，如果想试试，可以用</em> <code class="fe na nb nc nd b"><em class="it">npm i -g teeny-cli</em></code> <em class="it">或者</em> <code class="fe na nb nc nd b"><em class="it">yarn global add teeny-cli</em></code> <em class="it">安装。这里的</em>  <em class="it">代码可用</em> <a class="ae ky" href="https://github.com/yakkomajuri/teeny" rel="noopener ugc nofollow" target="_blank"> <em class="it">。</em></a></p></blockquote><p id="4944" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mt ln lo lp mv lr ls lt mx lv lw lx ly im bi translated">要启动一个小项目，运行<code class="fe na nb nc nd b">teeny init</code>。这将在您的当前目录中创建以下内容:</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="9b95" class="ni ma it nd b gy nj nk l nl nm">.<br/>├── pages<br/>│   └── index.md<br/>├── static<br/>│   └── main.js<br/>└── templates<br/>    ├── default.html<br/>    └── homepage.html</span></pre><p id="da56" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mt ln lo lp mv lr ls lt mx lv lw lx ly im bi translated">如果您随后运行<code class="fe na nb nc nd b">teeny build</code>，您将得到这样的结果:</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="a8b8" class="ni ma it nd b gy nj nk l nl nm">.<br/>├── pages<br/>│   └── index.md<br/>├── public<br/>│   ├── index.html<br/>│   └── main.js<br/>├── static<br/>│   └── main.js<br/>└── templates<br/>    ├── default.html<br/>    └── homepage.html</span></pre><p id="d88e" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mt ln lo lp mv lr ls lt mx lv lw lx ly im bi translated"><code class="fe na nb nc nd b">index.md</code>使用<code class="fe na nb nc nd b">homepage</code>模板，他们一起生成<code class="fe na nb nc nd b">index.html</code>。作为其他SSG的标准，静态文件从<code class="fe na nb nc nd b">public/</code>开始提供。</p><p id="a234" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mt ln lo lp mv lr ls lt mx lv lw lx ly im bi translated">你还会注意到<code class="fe na nb nc nd b">main.js</code>也被移到了<code class="fe na nb nc nd b">public/</code>。Teeny实际上将从<code class="fe na nb nc nd b">pages/</code>、<code class="fe na nb nc nd b">templates/</code>和<code class="fe na nb nc nd b">static/</code>中取出所有非模板和非页面文件，并按照与原始目录相同的结构将它们复制到<code class="fe na nb nc nd b">public/</code>。</p><p id="0d2a" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mt ln lo lp mv lr ls lt mx lv lw lx ly im bi translated">这样做的原因是，我实际上不希望有“神奇的”导入，即您必须从与实际目录结构不对应的路径中导入静态资产。因此，我决定在必要时静态文件只存在于<code class="fe na nb nc nd b">templates/</code>和<code class="fe na nb nc nd b">pages/</code>中。</p><p id="360e" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mt ln lo lp mv lr ls lt mx lv lw lx ly im bi translated">后来，我确实放弃了<code class="fe na nb nc nd b">static/</code>目录方法，因为可能有页面和模板都想使用的资产。来自<code class="fe na nb nc nd b">static/</code>的导入是“神奇的”，意味着你需要考虑<code class="fe na nb nc nd b">teeny build</code>的输出才能让它们工作。</p><p id="7627" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mt ln lo lp mv lr ls lt mx lv lw lx ly im bi translated">Teeny支持的最后一个命令是<code class="fe na nb nc nd b">teeny develop</code>。这将创建一个HTTP服务器来从<code class="fe na nb nc nd b">public/</code>子目录中提供文件。</p><p id="0354" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mt ln lo lp mv lr ls lt mx lv lw lx ly im bi translated">它监听对文件的更改，并动态更新静态文件(天真地说，每次检测到更改时都要重新构建)。</p><h1 id="44cc" class="lz ma it bd mb mc md me mf mg mh mi mj jz mk ka ml kc mm kd mn kf mo kg mp mq bi translated"><strong class="ak">最后的润色</strong></h1><p id="ca08" class="pw-post-body-paragraph lc ld it lf b lg mr ju li lj ms jx ll mt mu lo lp mv mw ls lt mx my lw lx ly im bi translated">一旦我完成了Teeny的建设，我只用了很少的时间就建立并运行了这个博客。</p><p id="ddf6" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mt ln lo lp mv lr ls lt mx lv lw lx ly im bi translated">我把<a class="ae ky" href="https://picocss.com/docs/" rel="noopener ugc nofollow" target="_blank"> Pico.css </a>放在我的模板上，让网站立刻看起来好了100倍(对他们来说，大声喊出来，我喜欢它)，并部署我刚刚运行的新版本:</p><pre class="kj kk kl km gt ne nd nf ng aw nh bi"><span id="94b8" class="ni ma it nd b gy nj nk l nl nm">teeny build &amp;&amp; gh-pages -d public/</span></pre><p id="1637" class="pw-post-body-paragraph lc ld it lf b lg lh ju li lj lk jx ll mt ln lo lp mv lr ls lt mx lv lw lx ly im bi translated">这就是我如何在大约半天的时间里整理好我的博客。</p></div></div>    
</body>
</html>