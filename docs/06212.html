<html>
<head>
<title>Creating a Recipe API with the Django Rest Framework.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Django Rest框架创建食谱API。</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/creating-a-recipe-api-with-django-rest-framework-6c2512d71d5b?source=collection_archive---------5-----------------------#2020-11-03">https://levelup.gitconnected.com/creating-a-recipe-api-with-django-rest-framework-6c2512d71d5b?source=collection_archive---------5-----------------------#2020-11-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="2cce" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如何借助Django和Python创建一个简单的Recipe API？</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/d43cd706cda76d2dac144e644334222f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xi6U9YW2csfpgin4"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">费萨尔·米在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="e35f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">拥有一个跨平台无缝执行CRUD的API非常重要。在这个时代，为应用程序和网站等各种平台提供单一数据源是必不可少的。</p><p id="1923" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Django让我们能够在最短的时间内创建API，同时保留Python的通用性。我们可以在几分钟内创建带有全功能仪表板的API。最重要的是，它有一个带有管理员登录的GUI，如已经内置的身份验证添加用户。</p><p id="79bc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这篇文章中，我们将能够创建一个简单的食谱应用程序，可以通过POSTMAN或任何其他URL调用来使用。</p><p id="de72" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">* *详细信息和实际文档的免责声明。<a class="ae kv" href="https://docs.djangoproject.com/en/3.1/topics/" rel="noopener ugc nofollow" target="_blank">姜戈文件</a></p><h2 id="702e" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">创造环境</h2><p id="4a03" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">创建API需要的东西:</p><ol class=""><li id="2acc" class="mq mr iq ky b kz la lc ld lf ms lj mt ln mu lr mv mw mx my bi translated"><a class="ae kv" href="http://.https://www.python.org/downloads/" rel="noopener ugc nofollow" target="_blank"> Python 3+ </a></li><li id="0ccc" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr mv mw mx my bi translated">Git Bash (或者Powershell)</li><li id="c2bc" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr mv mw mx my bi translated"><a class="ae kv" href="https://code.visualstudio.com/" rel="noopener ugc nofollow" target="_blank"> Visual Studio代码</a>或任何你喜欢的文本编辑器</li></ol><p id="8775" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但首先，我们需要创建一个隔离的虚拟环境。</p><p id="0af9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">虚拟环境是一种工具，通过为不同项目创建隔离的Python虚拟环境，有助于保持不同项目所需的依赖关系分离。这是大多数Python开发人员使用的最重要的工具之一。</p><p id="bc36" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">以下命令用于设置和激活。</p><p id="3e98" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在您的任何首选驱动器中为此环境创建目录。</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="d4dc" class="ls lt iq nf b gy nj nk l nl nm">mkdir /C/”your project”</span><span id="0c52" class="ls lt iq nf b gy nn nk l nl nm">cd /C/”project”</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi no"><img src="../Images/ec58de87c11a8270ab1d4b5604af09ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DlEcNRWALi-l6owFkiZpIA.png"/></div></div></figure><p id="0f36" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在您在项目目录中。是时候建立虚拟环境了。</p><p id="6dd6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你正在使用Python 2，尽管这并不是你的首选。</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="a850" class="ls lt iq nf b gy nj nk l nl nm">python -m virtualenv djangoapi</span></pre><p id="fd79" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">否则，如果在Python 3中，使用。</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="f803" class="ls lt iq nf b gy nj nk l nl nm">python -m venv djangoapi</span></pre><p id="8d3e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在激活虚拟环境。</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="ae0a" class="ls lt iq nf b gy nj nk l nl nm"><strong class="nf ir">In Windows</strong></span><span id="5cce" class="ls lt iq nf b gy nn nk l nl nm"><strong class="nf ir">Source venv/scripts/activate</strong></span><span id="d9f6" class="ls lt iq nf b gy nn nk l nl nm"><strong class="nf ir">in Mac </strong></span><span id="33a3" class="ls lt iq nf b gy nn nk l nl nm"><strong class="nf ir">source bin/activate</strong></span></pre><p id="0890" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以看到安装在环境内部的包。您可以使用<strong class="ky ir"> pip冻结进行检查。</strong>到目前为止，您不会看到任何已添加的包列表。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi np"><img src="../Images/84002e83eeebb70c5c81a5ef28176763.png" data-original-src="https://miro.medium.com/v2/resize:fit:658/format:webp/1*Jhf9oyYMPzW-rYKNAbeJ9Q.png"/></div></figure><p id="544a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，我们安装我们需要的所有依赖项。然后您应该运行pip freeze来查看更改。</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="f6b1" class="ls lt iq nf b gy nj nk l nl nm">pip install Django</span><span id="22b7" class="ls lt iq nf b gy nn nk l nl nm">pip install Djangorestapi</span></pre><p id="be83" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一旦您成功安装了所有的依赖项，它应该看起来像这样。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/3848b350d7d6ffd64f379fd39ec23aa7.png" data-original-src="https://miro.medium.com/v2/resize:fit:786/format:webp/1*s_fqieRS6kt6Mto2YmzxiA.png"/></div></figure></div><div class="ab cl nr ns hu nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="ij ik il im in"><h1 id="a333" class="ny lt iq bd lu nz oa ob lx oc od oe ma jw of jx md jz og ka mg kc oh kd mj oi bi translated">开始项目</h1><p id="fed6" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">一旦我们成功安装了Django，就该创建我们的recipe项目了。Django通过给出一系列预定义的命令，让我们的生活变得更加轻松。您可以使用“启动项目”命令来</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="d7c3" class="ls lt iq nf b gy nj nk l nl nm">django-admin.py startproject djangoapiproject</span></pre><p id="9446" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在点击<strong class="ky ir"> ls </strong>查看目录。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/32ba3d21158c4319c08349c3ef672a6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:940/format:webp/1*VQihk5BtyBOmpOu9G4XL1g.png"/></div></figure><p id="3ed3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们的项目目录已经创建好了。</p><p id="392c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们现在可以转移到文本编辑器，我的偏好是Visual Studio代码。</p><p id="45b3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">选择您的指定文件夹在我的情况下，这是</p><p id="6391" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">C/Djangoapi/Djangoapi项目</p><p id="234d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我们可以迁移所有的依赖项之前，我们需要首先查看它们是否都列在settings.py中。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/7833b6bbf2bb33537eb51055ee61af10.png" data-original-src="https://miro.medium.com/v2/resize:fit:588/format:webp/1*Tc2tBJTfsig367Dcnf0_vA.png"/></div></figure><p id="91b3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">既然我们已经添加了应用程序列表，现在我们可以迁移依赖项了。</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="8d93" class="ls lt iq nf b gy nj nk l nl nm">winpty python manage.py migrate</span></pre><p id="3f7b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您将看到所有的管理依赖项都被迁移到manage.py中</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/56c5c713d98219878822f8bc1c3e9d79.png" data-original-src="https://miro.medium.com/v2/resize:fit:954/format:webp/1*yO5eNBwtkDODJw4yK-vTBg.png"/></div></figure><p id="e883" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，manage.py文件将成为我们项目的焦点。<br/>查看修改成功安装。</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="6709" class="ls lt iq nf b gy nj nk l nl nm">python manage.py runserver</span></pre><p id="5435" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以通过转到localhost:8000来观察下面的活动项目</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi om"><img src="../Images/67bfc998996db81c54e0e383fe137538.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qUKrPD4TByPeDqIN5lFtTg.png"/></div></div></figure><p id="3a91" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们准备创建我们自己的第一个API。</p><h1 id="2f2c" class="ny lt iq bd lu nz on ob lx oc oo oe ma jw op jx md jz oq ka mg kc or kd mj oi bi translated">用Startapp制作我们的食谱API。</h1><p id="3614" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">我们要做的下一件事是创建一个新的应用程序，使用启动应用程序模块。运行命令:</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="2c37" class="ls lt iq nf b gy nj nk l nl nm">python manage.py Startapp recipe.</span></pre><p id="906e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这将创建您自己的Django应用程序。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi os"><img src="../Images/5baf49b102151bc72f1e6fccef75d38f.png" data-original-src="https://miro.medium.com/v2/resize:fit:492/format:webp/1*DoCMh2LXhurAMtL8CAg4IA.png"/></div></figure><p id="3f1c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们有了这个应用程序设置，然后我们可以继续为我们的API创建URL。我们的目录中没有urls.py文件，请从Djangoapiproject目录中复制它。</p><p id="9ba5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一旦您复制了文件，您还需要修改Djangoapiproject中的urls.py文件。它需要指向配方文件夹中的那个。</p><p id="1f2c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">添加<strong class="ky ir">路径:path(')，include('recipe/urls.py ')。</strong></p><p id="6dea" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这一行命令URL重定向到我们在根文件夹被调用时创建的URL。为此，您必须随路径一起导入include。如下图。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/5365571f0c01657217681007ae06ce1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:914/format:webp/1*ltyP_qt06rhgDhL11Ng4Fw.png"/></div></figure><p id="6efe" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在返回到菜谱中的urls.py文件，进行相应的修改。删除URL模式，我们将在以后为我们的API添加我们自己的URL。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/44b47d6c9303861125dac0610129c869.png" data-original-src="https://miro.medium.com/v2/resize:fit:858/format:webp/1*rQ2b-v4z5XBljETmwk4Xbg.png"/></div></figure><h1 id="e4be" class="ny lt iq bd lu nz on ob lx oc oo oe ma jw op jx md jz oq ka mg kc or kd mj oi bi translated">管理和数据库</h1><p id="54eb" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">为了创建数据库和存储数据，我们需要登录到我们创建的Django应用程序的管理面板。要创建可以登录并创建数据库的用户，我们可以运行:</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="04d9" class="ls lt iq nf b gy nj nk l nl nm"> winpty python manage.py createsuperuser</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ov"><img src="../Images/6cc3061897432f333a6c69036fb1a254.png" data-original-src="https://miro.medium.com/v2/resize:fit:1214/format:webp/1*SM-MkO_a03YeZtEI-2kLgQ.png"/></div></figure><p id="f073" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它会带你通过一个表格，你可以提交一个用户名和密码。然后启动服务器并登录到localhost:8000/admin。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/43ff63361f8f19dea36b692a96fdd597.png" data-original-src="https://miro.medium.com/v2/resize:fit:782/format:webp/1*FQaZeuHxR03pSvj-i98vWg.png"/></div></figure><p id="a1fc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您将看到各种东西，如您创建的用户配置文件和您管理的数据库。</p><h2 id="2597" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">建立模型。</h2><p id="f85d" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">然后我们需要修复我们的数据库。最好是像配方名称、创建过程、花费时间等字段。</p><p id="74d4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Django通过使用模型来实现这一点。</p><p id="7685" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">模型的定义。</p><p id="7191" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">创建一个模型</p><p id="f133" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">创建一个文件model.py，并为模型声明一个类。在这里，我们将它声明为一个食谱。</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="4100" class="ls lt iq nf b gy nj nk l nl nm">from django.db import models</span><span id="e5f2" class="ls lt iq nf b gy nn nk l nl nm">class recipe(models.Model)://declaration of class</span><span id="cbce" class="ls lt iq nf b gy nn nk l nl nm"> //diffeerent fields</span><span id="0c08" class="ls lt iq nf b gy nn nk l nl nm">     name = models.CharField(max_length=400)</span><span id="758c" class="ls lt iq nf b gy nn nk l nl nm">     ingriedient = models.CharField(max_length=1000)</span><span id="df54" class="ls lt iq nf b gy nn nk l nl nm">     time=models.IntegerField()</span><span id="d4e2" class="ls lt iq nf b gy nn nk l nl nm">     process= models.CharField(max_length=2000)</span><span id="d39f" class="ls lt iq nf b gy nn nk l nl nm">//function to return the name of record as name</span><span id="084f" class="ls lt iq nf b gy nn nk l nl nm">     def __str__(self):</span><span id="f43a" class="ls lt iq nf b gy nn nk l nl nm">     return self.name</span></pre><p id="5bf1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一旦你创建了这个模型。您将需要以数据库架构的形式迁移您的更改。在Django，我们使用SQL。</p><p id="7710" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于此迁移，运行以下命令。</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="d0e9" class="ls lt iq nf b gy nj nk l nl nm">python manage.py makemigrations recipe</span><span id="157f" class="ls lt iq nf b gy nn nk l nl nm">python manage.py migrate</span></pre><p id="4d24" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，这些迁移更改将在您的管理面板中可用。你将会看到Django的美妙之处，因为你可以执行CRUD操作而不用编写任何代码。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ox"><img src="../Images/b437b1470f7f109d5cfcecb8e60fcda1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QwTZyvslkzQzurYC7r_gaA.png"/></div></div></figure><p id="7e75" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我添加了一个虚拟数据来测试你可以添加任何你喜欢的对象的逻辑。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ox"><img src="../Images/c76415a3c3615fe78bea75debe6a6531.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4aBp7fJLaXGekPdrdUqvNA.png"/></div></div></figure><h1 id="ab74" class="ny lt iq bd lu nz on ob lx oc oo oe ma jw op jx md jz oq ka mg kc or kd mj oi bi translated">传送数据和添加视图。</h1><p id="fa11" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">在高质量的Web应用程序中，干净、优雅的URL方案是一个重要的细节。Django允许你随心所欲地设计URL，没有框架限制。</p><p id="50f8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Views.py文件控制Django中的数据流。我们需要调用模型，并将其数据准备为JSON。为了将模型数据转换成JSON，我们使用了一个叫做序列化器的概念。欲了解更多详情，请访问文档。</p><p id="38fe" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">若要创建序列化程序，请创建单独的文件serializer.py</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="8e42" class="ls lt iq nf b gy nj nk l nl nm">from rest_framework import serializers</span><span id="69c8" class="ls lt iq nf b gy nn nk l nl nm">from .models import recipe</span><span id="1fef" class="ls lt iq nf b gy nn nk l nl nm">class RecipeSerializer(serializers.ModelSerializer):</span><span id="e196" class="ls lt iq nf b gy nn nk l nl nm">   class Meta://to create the JSON fields</span><span id="08e8" class="ls lt iq nf b gy nn nk l nl nm">       model = recipe</span><span id="9271" class="ls lt iq nf b gy nn nk l nl nm">       fields = ('id','name','ingriedient ','time','process')</span></pre><p id="7776" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们有了JSON格式的DB字段。我们只需要创建一个视图来输出数据。把路线加到这里。</p><h2 id="dbb5" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">创建视图</h2><p id="96e8" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">view函数，或简称为<em class="oy"> view </em>，是一个接受Web请求并返回Web响应的Python函数。这个响应可以是网页的HTML内容、重定向、404错误、XML文档或图像。。。或者别的什么，真的。视图本身包含返回响应所需的任意逻辑。这段代码可以放在任何你想放的地方，只要它在你的Python路径上。</p><p id="a5a0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">转到View.py并根据需要修改代码。您需要调用序列化程序。</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="0283" class="ls lt iq nf b gy nj nk l nl nm">from django.shortcuts import render</span><span id="3c18" class="ls lt iq nf b gy nn nk l nl nm">from rest_framework import viewsets</span><span id="c6fb" class="ls lt iq nf b gy nn nk l nl nm">from .models import recipe</span><span id="5131" class="ls lt iq nf b gy nn nk l nl nm">from .serializer import RecipeSerializer</span><span id="5509" class="ls lt iq nf b gy nn nk l nl nm">class RecipeView(viewsets.ModelViewSet):</span><span id="35a3" class="ls lt iq nf b gy nn nk l nl nm">     queryset= recipe.objects.all()//spit out all the fields</span><span id="24b2" class="ls lt iq nf b gy nn nk l nl nm">     serializer_class= RecipeSerializer</span></pre><p id="8d77" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">既然我们已经有了自己的观点。我们可以把我们的路线加进去。添加routed将决定当用户从API请求时必须检索视图的URL。</p><p id="dc21" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为此，我们转到views.py并添加URL_pattern的路径。</p><p id="5ca0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们需要创建一个默认路由器，然后注册我们将要定义的路由。</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="4cea" class="ls lt iq nf b gy nj nk l nl nm">from django.urls import path,include</span><span id="65d8" class="ls lt iq nf b gy nn nk l nl nm">from . import views</span><span id="fd26" class="ls lt iq nf b gy nn nk l nl nm">from rest_framework import routers</span><span id="e67f" class="ls lt iq nf b gy nn nk l nl nm">router = routers.DefaultRouter()</span><span id="019a" class="ls lt iq nf b gy nn nk l nl nm">router.register('recipe',views.RecipeView)//registering routers.</span><span id="19e5" class="ls lt iq nf b gy nn nk l nl nm">urlpatterns = [</span><span id="c691" class="ls lt iq nf b gy nn nk l nl nm">    path('',include(router.urls)),</span><span id="a5d0" class="ls lt iq nf b gy nn nk l nl nm">]</span></pre><p id="597d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们已经为视图设置了路径，让我们运行服务器来查看我们所做的实时更改。</p><p id="4ce1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">前往<strong class="ky ir"> localhost/8000/recipe。</strong>你将默认显示它一个get请求的数据。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oz"><img src="../Images/b4d6a8b3f1d7364a7acf0b46c2540e4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dDWuqT6zhD-JOSSOxieeEw.png"/></div></div></figure><p id="62ad" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在选项菜单中，您可以看到我们可以执行的所有CRUD操作。如果您需要选择特定的数据，您可以只输入URL并添加一个斜杠id号来检索单个记录。</p><p id="8244" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您现在将能够执行各种请求操作。对于添加操作，您只需构建视图的所有链接。您可以进一步修改以充分发挥其潜力，例如通过表单添加帖子信息、删除单个记录等。</p><p id="4c2b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有兴趣查看完整代码吗？</p><div class="pa pb gp gr pc pd"><a href="https://github.com/purushottambanerjee/FoodRecipeAPI_with_DJango" rel="noopener  ugc nofollow" target="_blank"><div class="pe ab fo"><div class="pf ab pg cl cj ph"><h2 class="bd ir gy z fp pi fr fs pj fu fw ip bi translated">purushottambanerjee/FoodRecipeAPI _ with _ DJango</h2><div class="pk l"><h3 class="bd b gy z fp pi fr fs pj fu fw dk translated">创建一个跨平台无缝执行CRUD的API非常重要。拥有单一数据来源…</h3></div><div class="pl l"><p class="bd b dl z fp pi fr fs pj fu fw dk translated">github.com</p></div></div><div class="pm l"><div class="pn l po pp pq pm pr kp pd"/></div></div></a></div><p id="cd28" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">编码快乐！！</p></div></div>    
</body>
</html>