<html>
<head>
<title>How to implement Netflix slider with React and hooks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用React和钩子实现网飞滑块</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-implement-netflix-slider-with-react-and-hooks-bdb9b99d1ce4?source=collection_archive---------0-----------------------#2019-03-07">https://levelup.gitconnected.com/how-to-implement-netflix-slider-with-react-and-hooks-bdb9b99d1ce4?source=collection_archive---------0-----------------------#2019-03-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="7265" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">一些关于网飞UI的东西，用React写的，用CSS制作动画。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/a8c4929bc1a08309f03d6601f7605ef9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lpzVlvf7yMsWQrBvhaocyw.png"/></div></div></figure><p id="4d74" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">你可能已经看过网飞的用户界面。这个界面的大部分由大滑块组成，具有富于表情的悬停效果，用于显示电影和相关信息。每个元素都包含一个电影的缩略图，但是当你<em class="ln">悬停</em>时，它会被缩放，其余的元素会横向平移——这就是它的基本工作方式。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lo lp l"/></div></figure><p id="b66f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">今天我想向你们展示，没有魔法，只需几个步骤就可以做到。</p><h1 id="2014" class="lq lr iq bd ls lt lu lv lw lx ly lz ma jw mb jx mc jz md ka me kc mf kd mg mh bi translated">💡从容器开始</h1><p id="fd8f" class="pw-post-body-paragraph kr ks iq kt b ku mi jr kw kx mj ju kz la mk lc ld le ml lg lh li mm lk ll lm ij bi translated">开始时，让我们试着写一个滑块，但是没有任何悬停或滑动效果。这将是下一步的基础。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mn"><img src="../Images/3a8a0e8553462f69939a486b1c58d02a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nWACuBxqNLgDTIktFcyk3Q.png"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">起点:所有的元素都在容器中</figcaption></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ms lp l"/></div></figure><p id="89b3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">没有什么复杂的——它只是一个内部包含元素的容器。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ms lp l"/></div></figure><p id="c37e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="ln"> CSS </em>也很短——容器有<em class="ln">flex</em>T11】display并且所有的项目都属于他，大小不变。</p><h1 id="0000" class="lq lr iq bd ls lt lu lv lw lx ly lz ma jw mb jx mc jz md ka me kc mf kd mg mh bi translated">💡把他们推到左边！</h1><p id="926a" class="pw-post-body-paragraph kr ks iq kt b ku mi jr kw kx mj ju kz la mk lc ld le ml lg lh li mm lk ll lm ij bi translated">该算法从简单的<em class="ln">翻译</em>开始。我们必须将所有元素移动到容器的左侧。所以当我们将鼠标悬停在容器上时，所有的元素都应该向左移动。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mn"><img src="../Images/289e10d304cce92ed0ded10bd8289900.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o0lRQZNsSV4l8ui4kZInrw.png"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">步骤1:向左移动所有元素</figcaption></figure><p id="d553" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">有一段代码可以做到这一点:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ms lp l"/></div></figure><p id="e831" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们在这里使用的翻译值为<em class="ln"> 25%，</em>我将在文章的后面解释这个推理。</p><h1 id="f3e8" class="lq lr iq bd ls lt lu lv lw lx ly lz ma jw mb jx mc jz md ka me kc mf kd mg mh bi translated">💡嗯，现在向右！</h1><p id="0c6b" class="pw-post-body-paragraph kr ks iq kt b ku mi jr kw kx mj ju kz la mk lc ld le ml lg lh li mm lk ll lm ij bi translated">下一步和上一步非常相似。基本上，我们必须做同样的翻译，但是在另一边，并且…不移动前面的元素。这意味着我们必须只滑动在<em class="ln">悬停的</em>元素之后的元素。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mn"><img src="../Images/e64cc041ad10f33ea7a410e382f0c962.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YCM90Fs8zPksl0SXI09B0w.png"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">步骤2:向右移动元素</figcaption></figure><p id="27d9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">下面的代码代表它:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ms lp l"/></div></figure><p id="777e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">还是那句话，可以看<em class="ln"> 25% </em>，耐心点！</p><h1 id="d2d0" class="lq lr iq bd ls lt lu lv lw lx ly lz ma jw mb jx mc jz md ka me kc mf kd mg mh bi translated">💡应用悬停效果</h1><p id="930a" class="pw-post-body-paragraph kr ks iq kt b ku mi jr kw kx mj ju kz la mk lc ld le ml lg lh li mm lk ll lm ij bi translated">现在，我们可以散开了！我们需要做的最后一件事是扩展。我们必须使用另一个<code class="fe mt mu mv mw b">transform</code>也就是<code class="fe mt mu mv mw b">scale</code>。缩放的值是<code class="fe mt mu mv mw b">1.5</code> —这就是我们使用<em class="ln">翻译</em>和<em class="ln"> 25% </em>的原因。通过使用1.5值来缩放该元素，它会将大小增加<em class="ln"> 150%，</em>并且这50%被分割成每一侧的25%平移。你可以改变这些值，当然，只是要确保数学是正确的。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mn"><img src="../Images/d79ed072d4d8bc8d1b3d0938763828e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5GCfDWaXYqy1Nlhr3bJhGw.png"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">第三步:放大特定的一个</figcaption></figure><p id="3106" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="ln">缩放</em>代码:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ms lp l"/></div></figure><h1 id="daf8" class="lq lr iq bd ls lt lu lv lw lx ly lz ma jw mb jx mc jz md ka me kc mf kd mg mh bi translated">💡给我看看你有什么！</h1><p id="d31e" class="pw-post-body-paragraph kr ks iq kt b ku mi jr kw kx mj ju kz la mk lc ld le ml lg lh li mm lk ll lm ij bi translated">我们有<em class="ln">悬停</em>效果，但是当你点击底部箭头时，这个滑块也显示内容。除了后面的背景没什么特别的，它有左(暗)边的<em class="ln"> 30% </em>和预览/图片的<em class="ln"> 70% </em>。此外，这两个元素之间是渐变，使左侧边缘更平滑。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mx"><img src="../Images/4c92e90164170538e6cdd61c459fa35d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c2EXMbnec656TAJ5gwM91Q.png"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">所选电影的内容</figcaption></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mn"><img src="../Images/95492a733ca3d33129b8a621d126e9ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TytMRpcnmxSFEb1DsxDARg.png"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">梯度在哪里</figcaption></figure><p id="5800" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如何实现后台？简单来说，<em class="ln">在</em>之前，<code class="fe mt mu mv mw b">:before</code> …</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ms lp l"/></div></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ms lp l"/></div></figure><p id="5117" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在所有的内容必须在<code class="fe mt mu mv mw b">position: absolute</code>(相对于容器)上，因为它需要覆盖背景。</p><h1 id="7135" class="lq lr iq bd ls lt lu lv lw lx ly lz ma jw mb jx mc jz md ka me kc mf kd mg mh bi translated">💡反应从何而来</h1><p id="4302" class="pw-post-body-paragraph kr ks iq kt b ku mi jr kw kx mj ju kz la mk lc ld le ml lg lh li mm lk ll lm ij bi translated">是时候把这个和<em class="ln">反应</em>联系起来了。让我们试着用滑动功能扩展这个想法，就像在网飞网站上一样。<a class="ae my" href="https://github.com/andrzejewsky/netflix-slider" rel="noopener ugc nofollow" target="_blank"> <em class="ln">那里</em> </a>有一个完整的<em class="ln"> React </em>这个滑块的代码，但是我想解释一下达到最终效果最重要的东西，所以让我们把重点放在这两个文件上:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ms lp l"/></div></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ms lp l"/></div></figure><h2 id="6ebe" class="mz lr iq bd ls na nb dn lw nc nd dp ma la ne nf mc le ng nh me li ni nj mg nk bi translated">通过使用上下文API共享逻辑</h2><p id="4411" class="pw-post-body-paragraph kr ks iq kt b ku mi jr kw kx mj ju kz la mk lc ld le ml lg lh li mm lk ll lm ij bi translated">如你所见，在这两个文件中，我都使用了<em class="ln">上下文</em> <em class="ln"> API </em>。这是因为我想在父组件和子组件之间共享事件处理程序。显然，你可以用<code class="fe mt mu mv mw b">render-props</code>做同样的事情，但是用上下文API <em class="ln">，</em>我不需要记住如何传递处理程序给条目——我可以使用条目组件而不用考虑它在内部是如何完成的。</p><h2 id="d734" class="mz lr iq bd ls na nb dn lw nc nd dp ma la ne nf mc le ng nh me li ni nj mg nk bi translated">使用钩子做一些计算</h2><p id="76a0" class="pw-post-body-paragraph kr ks iq kt b ku mi jr kw kx mj ju kz la mk lc ld le ml lg lh li mm lk ll lm ij bi translated">为了实现滑动功能，我写了两个钩子。第一个用于读取容器的宽度(<code class="fe mt mu mv mw b">useSizeElement</code>)，第二个用于实现滑动逻辑本身(<code class="fe mt mu mv mw b">useSliding</code>)。我在下面附上两个代码示例:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ms lp l"/></div></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ms lp l"/></div></figure><p id="4da5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">它们是如何工作的？我使用了<code class="fe mt mu mv mw b">refs</code>来获取关于尺寸的信息(<code class="fe mt mu mv mw b">width</code>)，并共享了处理上一次和下一次点击的函数。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lo lp l"/></div></figure><h1 id="274b" class="lq lr iq bd ls lt lu lv lw lx ly lz ma jw mb jx mc jz md ka me kc mf kd mg mh bi translated">寥寥数语…</h1><p id="7368" class="pw-post-body-paragraph kr ks iq kt b ku mi jr kw kx mj ju kz la mk lc ld le ml lg lh li mm lk ll lm ij bi translated">下面，您可以看到最终的结果和到存储库的链接。当然，这只是一小段文字，展示了如何实现主要功能，如悬停或滑动。<strong class="kt ir">没有完成滑块库——很少边缘案例也需要实现！</strong></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nl lp l"/></div></figure><p id="c3ba" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">GitHub:<a class="ae my" href="https://github.com/andrzejewsky/netflix-slider" rel="noopener ugc nofollow" target="_blank">https://github.com/andrzejewsky/netflix-slider</a></p><p id="0729" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">干杯！</p><p id="1474" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">PS。React挂钩很棒，但它需要一些时间来适应和发展最佳实践。</p></div><div class="ab cl nm nn hu no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="ij ik il im in"><figure class="kg kh ki kj gt kk gh gi paragraph-image"><a href="https://levelup.gitconnected.com"><div class="gh gi nt"><img src="../Images/9914c5dd23ac08b70eea6f4f9ba6fed2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E6CoI_MRyZ1JInNPsBSHtA.png"/></div></a></figure><div class="nu nv gp gr nw nx"><a href="https://gitconnected.com/learn/react" rel="noopener  ugc nofollow" target="_blank"><div class="ny ab fo"><div class="nz ab oa cl cj ob"><h2 class="bd ir gy z fp oc fr fs od fu fw ip bi translated">学习React -最佳React教程(2019) | gitconnected</h2><div class="oe l"><h3 class="bd b gy z fp oc fr fs od fu fw dk translated">排名前49的React教程-免费学习React。课程由开发人员提交并投票，使您能够…</h3></div><div class="of l"><p class="bd b dl z fp oc fr fs od fu fw dk translated">gitconnected.com</p></div></div><div class="og l"><div class="oh l oi oj ok og ol kp nx"/></div></div></a></div></div></div>    
</body>
</html>