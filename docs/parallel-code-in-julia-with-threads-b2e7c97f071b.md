# Julia ä¸­å¸¦çº¿ç¨‹çš„å¹¶è¡Œä»£ç 

> åŸæ–‡ï¼š<https://levelup.gitconnected.com/parallel-code-in-julia-with-threads-b2e7c97f071b>

æé«˜ä»£ç é€Ÿåº¦çš„æœ€ç®€å•æ–¹æ³•:ThreadsX.jl

æˆ‘ä» 2014 å¹´å·¦å³å¼€å§‹å…³æ³¨èŒ±è‰äºšè¯­è¨€ã€‚Julia æœ€å¸å¼•äººçš„ä¸€ç‚¹æ˜¯ï¼Œå®ƒä»ä¸€å¼€å§‹å°±æ˜¯ä¸ºå¤šæ ¸æœºå™¨è€Œæ„å»ºçš„(åœ¨ Python ä¸­ä½¿ç”¨ joblib ç®€ç›´æ˜¯ä¸€åœºå™©æ¢¦â€¦â€¦)ã€‚ä½†æ˜¯æœ€è¿‘ï¼Œè¯¥è¯­è¨€çš„å¤šçº¿ç¨‹èƒ½åŠ›å˜å¾—æ›´å¥½äº†ï¼Œæ‰€ä»¥æˆ‘èŠ±äº†ä¸€äº›æ—¶é—´æ¥æ¢ç´¢åœ¨ 2022 å¹´ä½ å¯ä»¥ç”¨ Julia å’Œä¸€äº›é¢å¤–çš„å†…æ ¸åšäº›ä»€ä¹ˆã€‚

![](img/5e9d8f372961c9b72ec5e78abd6395fd.png)

ç…§ç‰‡ç”±[é˜¿å·´æ–¯Â·ç‰¹æ‹‰å°¼](https://unsplash.com/@phorgod?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)åœ¨ [Unsplash](https://unsplash.com/s/photos/parallel?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) ä¸Šæ‹æ‘„

# ç”¨æ›´å¤šçº¿ç¨‹å¯åŠ¨ Julia

åœ¨æˆ‘ä»¬æ·±å…¥æ¢è®¨å¯ä»¥ä½¿ç”¨ä»€ä¹ˆæ¥å¹¶è¡Œè¿è¡Œä»£ç ä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»**ç¡®ä¿æœ‰å¯ä¾› Julia** ä½¿ç”¨çš„çº¿ç¨‹ã€‚è¦æ£€æŸ¥ Julia æ­£åœ¨è¿è¡Œå¤šå°‘çº¿ç¨‹ï¼Œåªéœ€è¿è¡Œä»¥ä¸‹ä»£ç :

```
julia> using Base.Threadsjulia> Threads.nthreads()
1
```

ä¸ºäº†ç”¨æ›´å¤šçš„çº¿ç¨‹å¯åŠ¨æˆ‘ä»¬çš„ REPLï¼Œæˆ‘ä»¬å¯ä»¥å°†`--threads`é€‰é¡¹ä¼ é€’ç»™ Julia å¹¶è·å¾—æ›´å¤šçš„èƒ½åŠ›ï¼ï¼ï¼

```
julia --threads 6
```

> æ³¨æ„:æˆ‘åœ¨è¿™é‡Œä½¿ç”¨ 6 ä¸ªå†…æ ¸ï¼Œå› ä¸ºæˆ‘çš„æœºå™¨ä¸Šæœ‰ 6 ä¸ªå†…æ ¸ã€‚

å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯ VSCodeï¼Œæ‚¨å¯ä»¥ç¼–è¾‘æ‚¨çš„`settings.json`æ–‡ä»¶ï¼Œé€šè¿‡æ·»åŠ ä¸‹é¢ä¸€è¡Œæ¥æŒ‡å®šæ‚¨å¸Œæœ› Julia ä½¿ç”¨çš„çº¿ç¨‹æ•°é‡ã€‚

```
"julia.NumThreads": 6
```

# æˆ‘ä»¬æ„šè ¢çš„åŠŸèƒ½

ä¸ºäº†æ¼”ç¤ºå¦‚ä½•å¹¶è¡Œè¿è¡Œä»£ç ï¼Œæˆ‘ä»¬åº”è¯¥é¦–å…ˆæƒ³å‡ºä¸€ä¸ªæˆ‘ä»¬æƒ³è¦è¿è¡Œçš„å‡½æ•°ï¼Œç„¶å**å»ºç«‹æˆ‘ä»¬çš„å•æ ¸åŸºç¡€æ¡ˆä¾‹**ã€‚å†…æ ¸è¶Šå¤šå¹¶ä¸æ€»æ˜¯è¶Šå¥½ï¼Œå› ä¸ºå¹¶è¡Œä»£ç ä¹Ÿä¼šå¸¦æ¥å¼€é”€ã€‚è¿™äº›è¿›ç¨‹å¿…é¡»ç›¸äº’é€šä¿¡ï¼Œè¿™éœ€è¦èµ„æºå’Œæ—¶é—´ã€‚

æˆ‘æƒ³ä¿æŒç®€å•ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„å‡½æ•°ä¼šæ‰¾åˆ°æ‰€æœ‰èƒ½è¢« 12 æ•´é™¤çš„æ•°å­—ã€‚ç„¶åæˆ‘ä»¬å°†ä½¿ç”¨è¿™ä¸ªå‡½æ•°æ¥æ‰¾å‡ºåœ¨ 1 åˆ° 10ï¼Œ000 ä¹‹é—´æœ‰å¤šå°‘ä¸ªæ•°å­—èƒ½è¢« 12 æ•´é™¤ã€‚æˆ‘çŸ¥é“è¿™æ˜¯ä¸€ä¸ªæ„šè ¢çš„ä¾‹å­ï¼Œä½†æˆ‘ä»¬å¿…é¡»ä»æŸä¸ªåœ°æ–¹å¼€å§‹ã€‚ğŸ˜…

ä½ å¯ä»¥çœ‹åˆ°æˆ‘å·²ç»ä¸ºæˆ‘ä»¬çš„å‡½æ•°åŠ å…¥äº†å‡ ä¸ª**å•å…ƒæµ‹è¯•**æ¥ç¡®ä¿æˆ‘ä»¬çš„å‡½æ•°åšäº†æ­£ç¡®çš„äº‹æƒ…ã€‚æˆ‘é¼“åŠ±ä½ å¯¹ä½ æ‰€æœ‰çš„åŠŸèƒ½éƒ½è¿™æ ·åšã€‚éšç€äº‹æƒ…å˜å¾—è¶Šæ¥è¶Šå¤æ‚ï¼Œè¿™å°†ä½¿ä½ çš„ç”Ÿæ´»å˜å¾—å®¹æ˜“å¾—å¤šã€‚

> å¦‚æœä½ ä»¥å‰ä»æœªä½¿ç”¨è¿‡å•å…ƒæµ‹è¯•ï¼Œå¼€å§‹åœ¨ä½ çš„ Julia ä»£ç ä¸­åŠ å…¥ä¸€äº›`@test`å®å§ï¼è¿™æ˜¯è¿„ä»Šä¸ºæ­¢æˆ‘è§è¿‡çš„æ‰€æœ‰è¯­è¨€ä¸­æœ€ç®€å•çš„å•å…ƒæµ‹è¯•æ¡†æ¶ã€‚

æˆ‘ä»¬å°†ä½¿ç”¨æ¥è‡ª`BenchmarkTools`çš„`@btime`æ¥ä¸ºæˆ‘ä»¬çš„è¿è¡Œæ—¶é—´è·å¾—ä¸€ä¸ªå¥½çš„æ—¶é—´ä¼°è®¡ï¼Œæˆ‘å°†å±•ç¤ºä¸€äº›ä¸åŒçš„æ–¹æ³•æ¥å°†è¿™ä¸ªå‡½æ•°åº”ç”¨åˆ°æ›´å¤šçš„æ•°å­—:

æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œä»…ä»…é€šè¿‡ä¸ä½¿ç”¨å¹¿æ’­`.`å’Œåˆ©ç”¨`sum`æœ‰å¤šä¸ªç›¸å…³æ–¹æ³•çš„äº‹å®ï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥å‡å°‘ 40%çš„æ—¶é—´ã€‚ä¸Šé¢`sum`çš„ç¬¬ä¸€ä¸ªç”¨æ³•æ˜¯å–ä¸€ä¸ªæ•°ç»„ï¼Œå¹¶å¯¹å…¶æ±‚å’Œã€‚ç¬¬äºŒç§æ–¹æ³•é‡‡ç”¨ä¸€ä¸ªå‡½æ•°ï¼Œå°†å®ƒåº”ç”¨äºä¸€ä¸ª iterable çš„æ‰€æœ‰å…ƒç´ ï¼Œå¹¶å°†è¿™äº›ç»“æœç›¸åŠ ã€‚

> è¯·åŠ¡å¿…é˜…è¯»å…³äºæ‚¨æ­£åœ¨ä½¿ç”¨çš„åŠŸèƒ½çš„æ–‡æ¡£ã€‚å¯èƒ½æœ‰ä¸€ç§æ–¹æ³•å¯ä»¥è®©ä½ çš„ä»£ç æ›´å¿«æ›´ä¼˜é›…ï¼

# æœ´ç´ å¹¶è¡Œ for å¾ªç¯

ç°åœ¨æˆ‘ä»¬å·²ç»æœ‰äº†ä¸€ä¸ªåŸºå‡†ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•è®©å®ƒå¹¶è¡Œè¿è¡Œã€‚æˆ‘ä»¬çš„ç¬¬ä¸€æ¬¡å°è¯•å°†ä½¿ç”¨`Threads`,æˆ‘æŠŠå®ƒæ”¾åœ¨è¿™é‡Œï¼Œå› ä¸ºè¿™å¯ä»¥æŠ“ä½ä¸€äº›åˆå­¦è€…ã€‚

ç°åœ¨ä½ å¯èƒ½è®¤ä¸ºè¿™æ®µä»£ç æ²¡æœ‰é—®é¢˜ï¼Œä½†è¿™æ­£æ˜¯æ‹¥æœ‰ä¸€ä¸ªå•ä¸€æ ¸å¿ƒåŸºçº¿å¯¹æˆ‘ä»¬æœ‰æ‰€å¸®åŠ©çš„åœ°æ–¹ã€‚å¦‚æœä½ è¿è¡Œä¸Šé¢çš„ä»£ç ï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ªä¸æˆ‘ä»¬ç®€å•çš„`sum`è§£å†³æ–¹æ¡ˆä¸åŒçš„ç­”æ¡ˆã€‚äº‹å®ä¸Šï¼Œæ¯æ¬¡è¿è¡Œè¿™ä¸ªå‡½æ•°æ—¶ï¼Œæ‚¨å¯èƒ½ä¼šå¾—åˆ°ä¸åŒçš„ç­”æ¡ˆï¼Œè€Œè¿™ä¸ªç­”æ¡ˆä¸çœŸå®ç­”æ¡ˆç›¸å·®ç”šè¿œ:

```
julia> sum(ismultiple12.(1:N))
833julia> for _ in 1:10
           println(sumupto(ismultiple12, N))
       end
263
265
329
268
322
479
382
270
484
361
```

è¿™æ˜¯å› ä¸ºæˆ‘ä»¬çš„å˜é‡`s`ä¸æ˜¯åŸå­çš„ã€‚è¿™æ„å‘³ç€ä¸€ä¸ªçº¿ç¨‹å¯èƒ½åœ¨å¦ä¸€ä¸ªçº¿ç¨‹è¯•å›¾è®¿é—®å®ƒçš„åŒæ—¶å°†å…¶å€¼ä»`0`æ›´æ–°åˆ°`1`ã€‚å› æ­¤ä¼šå‘ç”Ÿä»¥ä¸‹æƒ…å†µ:

1.  å½“`s`ä¸º 0 æ—¶ï¼Œçº¿ç¨‹ 1 è·å–å…¶å€¼
2.  Thread2 å¾—åˆ°äº†`s`çš„å€¼ï¼Œå®ƒä»ç„¶æ˜¯ 0
3.  Thread1 åŠ  0 + 1 å¹¶å°†`s`çš„å€¼æ›´æ–°ä¸º 1
4.  Thread2 åŠ  0 + 1 å¹¶å°†`s`çš„å€¼æ›´æ–°ä¸º 1 â€” **å®ƒä¸çŸ¥é“ Thread1 å·²ç»ç»™å®ƒåŠ äº† 1**ã€‚

æ‰€ä»¥å¾ˆæ˜æ˜¾æˆ‘ä»¬åº”è¯¥ä¸¤æ¬¡ç»™`s`åŠ  1ï¼Œä½†æ˜¯æˆ‘ä»¬æç ¸äº†ã€‚ä½ å¯ä»¥è¯•ç€æŠŠ`s`åšæˆä¸€ä¸ªåŸå­æ•°ç»„å¹¶è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½†æ˜¯è¿™å¯¹æˆ‘ä»¬çš„ä¾‹å­æ¥è¯´æ˜¯æ··ä¹±å’Œä¸å¿…è¦çš„ï¼Œæ‰€ä»¥æˆ‘ä¼šè®©ä½ å»é˜…è¯» Julia æ–‡æ¡£ä¸­çš„ç›¸å…³å†…å®¹ã€‚æ­¤å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªæ›´ç®€å•çš„æ–¹æ³•â€¦

# ThreadsX.jl ç®€ä»‹

[](https://github.com/tkf/ThreadsX.jl) [## GitHub - tkf/ThreadsX.jl:å¹¶è¡ŒåŒ–çš„åŸºæœ¬å‡½æ•°

### æ·»åŠ å‰ç¼€ ThreadsXã€‚å¦‚æœæ”¯æŒçš„è¯ï¼Œè°ƒç”¨ Base ä¸­çš„å‡½æ•°æ¥è·å¾—ä¸€äº›åŠ é€Ÿã€‚ç¤ºä¾‹:è¦äº†è§£æ”¯æŒçš„åŠŸèƒ½â€¦

github.com](https://github.com/tkf/ThreadsX.jl) 

ThreadsX.jl æ˜¯ä¸€ä¸ªå¼€æºçš„ Julia åŒ…ï¼ŒåŒæ ·ä»¤äººå°è±¡æ·±åˆ»ï¼Œä½¿ç”¨ç®€å•ã€‚å®ƒä»¥å¹¶è¡Œçš„æ–¹å¼å®ç°äº†é€šç”¨çš„åŸºæœ¬ Julia å‡½æ•°ï¼Œä¾‹å¦‚`sum`ã€`map`ã€`findall`ã€`minimum`ä»¥åŠè®¸å¤šå…¶ä»–å‡½æ•°ã€‚ä½¿ç”¨è¿™äº›è¶…çº§ç®€å•ï¼Œåªéœ€ç”¨`ThreadsX`ç‰ˆæœ¬æ›¿æ¢ä½ çš„å‡½æ•°è°ƒç”¨:

ä½ ä¸å¿…æ‹…å¿ƒæ¯”èµ›æ¡ä»¶ï¼Œåªéœ€ç”³è¯·å’Œäº«å—ã€‚ğŸ‰

> æ„Ÿè°¢å¼€å‘äººå‘˜åˆ¶ä½œäº†è¿™ä¸ªåŒ…ï¼åœ¨ [GitHub](https://github.com/tkf/ThreadsX.jl) ä¸ŠæŸ¥çœ‹è¯¥åŒ…ï¼

# ä½†æ˜¯æˆ‘ä»¬æ›´å¿«äº†å—ï¼Ÿ

![](img/f393f3b1b1276b5df4142aea77474607.png)

ç…§ç‰‡ç”±[Ğ¼Ğ¸Ñ…Ğ°Ğ¸Ğ»Ğ¿Ğ°Ğ²Ğ»ĞµĞ½ĞºĞ¾](https://unsplash.com/@pavlenko?utm_source=medium&utm_medium=referral)åœ¨ [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) ä¸Šæ‹æ‘„

ç°åœ¨æˆ‘ä»¬æœ‰ä¸¤ä¸ªå¹¶è¡Œçš„å®ç°ï¼Œä½†æ˜¯æˆ‘ä»¬æœ‰æ²¡æœ‰æ›´å¿«å‘¢ï¼Ÿ**æˆ‘ä»¬æ­£åœ¨ä½¿ç”¨è¿™äº›å†…æ ¸å—ï¼Ÿ**è®©æˆ‘ä»¬åšä¸€äº›åŸºå‡†æµ‹è¯•:

```
julia> [@btime](http://twitter.com/btime) sum(ismultiple12, 1:N)
  5.712 Î¼s (4 allocations: 112 bytes)
833julia> [@btime](http://twitter.com/btime) ThreadsX.sum(ismultiple12, 1:N)
  36.061 Î¼s (423 allocations: 30.86 KiB)
833
```

å¦‚ä½ æ‰€è§ï¼Œæˆ‘ä»¬å¾—åˆ°äº†æ­£ç¡®çš„ç­”æ¡ˆï¼Œä½†å®é™…ä¸Šæˆ‘ä»¬å˜å¾—æ…¢äº†å¾ˆå¤šã€‚å¥½åƒæ…¢äº† 6 å€ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬éœ€è¦åè°ƒæ‰€æœ‰è¿™äº›æ ¸å¿ƒã€‚

æˆ‘ä»¬çŠ¯äº†è®¡ç®—æœºç¼–ç¨‹çš„ä¸€ä¸ªå¤§ç½ª:**è¿‡æ—©ä¼˜åŒ–**ï¼è®©è¿™æˆä¸ºä½ çš„è­¦å‘Šï¼Œå¦‚æœä½ çš„åŠŸèƒ½è¶³å¤Ÿå¿«ï¼Œä½ ä¸éœ€è¦è®©å®ƒæ›´å¿«ã€‚è€Œæ˜¯åšä¸€äº›æœ‰ç”¨çš„äº‹æƒ…ã€‚ğŸ˜‰

# æ˜¯çš„ï¼Œæˆ‘ä»¬æ›´å¿«ï¼

![](img/d32451dd8c31a4982097438a7fe0deea.png)

ç…§ç‰‡ç”± [Sammy Wong](https://unsplash.com/@vr2ysl?utm_source=medium&utm_medium=referral) åœ¨ [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) ä¸Šæ‹æ‘„

ç°åœ¨ï¼Œä¸ºäº†æ¼”ç¤ºä¸€ä¸ªæ›´çœŸå®çš„åœºæ™¯ï¼Œæˆ‘ä»¬å°†æŠŠæˆ‘ä»¬çš„å‡½æ•°å¤æ‚åŒ–ã€‚è¿™å°†ç¡®ä¿å¹¶è¡Œè®¡ç®—çš„**æ”¶ç›Šå¯ä»¥æŠµæ¶ˆå†…æ ¸åè°ƒçš„å¼€é”€**ã€‚æˆ‘ä»ç„¶æƒ³ä¿æŒç®€å•ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†å¯»æ‰¾å¢åŠ æ¯ä¸ªæ•´æ•°çš„è´¨æ•°ï¼Œç›´åˆ° 10ï¼Œ000ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ Primes.jlï¼Œå¹¶ä¸”æˆ‘ä»¬å°†åœ¨å‰æœŸè¿›è¡Œé€šå¸¸çš„å•å…ƒæµ‹è¯•:

ä½¿ç”¨è¿™ä¸ªæ–°å‡½æ•°è¿è¡Œæˆ‘ä»¬çš„ sum å‡½æ•°ä¼šå¾—åˆ°ä»¥ä¸‹ç»“æœ:

```
julia> @btime sum(num_prime_divisors, 1:N)
  734.400 Î¼s (10037 allocations: 1.23 MiB)
24300

julia> @btime ThreadsX.sum(num_prime_divisors, 1:N)
  163.300 Î¼s (10518 allocations: 1.26 MiB)
24300
```

æˆ‘ä»¬è·å¾—äº† 4.5 å€çš„åŠ é€Ÿï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬çš„ 6 ä¸ªçº¿ç¨‹æœ€ç»ˆå¾—åˆ°äº†åˆ©ç”¨ã€‚

# å†ä¸¾ä¸€ä¸ªä¾‹å­

![](img/0bea93b377390b5b1bd88843b501b3f4.png)

ç”±[å¸ƒé›·ç‰¹Â·ä¹”ä¸¹](https://unsplash.com/@brett_jordan?utm_source=medium&utm_medium=referral)åœ¨ [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) ä¸Šæ‹æ‘„çš„ç…§ç‰‡

ä»æŠ€æœ¯ä¸Šè®²ï¼Œè¿™ä¸æ˜¯æœ¬æ–‡æ‰€å¿…éœ€çš„ï¼Œå› ä¸ºæˆ‘å·²ç»å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ ThreadsX è½»æ¾åœ°å¹¶è¡ŒåŒ–ä¸€äº›å•çº¿ç¨‹ Julia å‡½æ•°ã€‚ç„¶è€Œï¼Œæœ‰ä¸€ä¸ªå«åš[exercism.org](http://exercism.org)çš„å¾ˆæ£’çš„ç½‘ç«™ï¼Œä¸Šé¢æœ‰ä¸€äº›éå¸¸å¥½çš„ç»ƒä¹ è®©ä½ å­¦ä¹ èŒ±è‰äºšã€‚æˆ‘æœ€å–œæ¬¢çš„è¿åŠ¨ä¹‹ä¸€æ˜¯æ‹¼å­—æ¸¸æˆè¯„åˆ†ã€‚ä¸€ä»¶äº‹æ¥ç€ä¸€ä»¶äº‹ï¼Œæˆ‘å‘ç°è‡ªå·±åœ¨é—®è¿™æ ·ä¸€ä¸ªé—®é¢˜:â€œèå£«æ¯”äºšåœ¨æ‹¼å­—æ¸¸æˆã€Šç½—å¯†æ¬§ä¸æœ±ä¸½å¶ã€‹ä¸­èƒ½å¾—å¤šå°‘åˆ†ï¼Ÿâ€ã€‚æˆ‘ä»¬èƒ½åŒæ—¶è®¡ç®—ä»–çš„åˆ†æ•°å—ï¼Ÿ

é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ä¸€äº›å‡½æ•°æ¥è®¡ç®—æ¯ä¸ªå­—ç¬¦çš„åˆ†æ•°:

è¿™é‡Œçš„è¯„åˆ†å‡½æ•°çœ‹èµ·æ¥æœ‰ç‚¹å¤æ‚ï¼Œæ‰€ä»¥è®©æˆ‘è§£é‡Šä¸€ä¸‹:

*   `mapreduce`å°†å¯¹æ¯å°ä¿¡åº”ç”¨åŒ¿åå‡½æ•°`letter -> get(scores, letter, 0)`ã€‚è¿™å°†å°è¯•åœ¨æˆ‘ä»¬çš„å­—å…¸ä¸­æŸ¥æ‰¾æ¯ä¸ªå­—æ¯ï¼Œå¹¶æŠŠå®ƒå˜æˆä¸€ä¸ªæ•°å­—ã€‚å¦‚æœåœ¨å­—å…¸é‡Œæ‰¾ä¸åˆ°ï¼Œæˆ‘ä»¬å°±ç”¨ 0 ä»£æ›¿ã€‚è¿™ä¸ªåŠŸèƒ½å°±æ˜¯`map`éƒ¨åˆ†
*   ä¸‹ä¸€ä¸ªæ“ä½œç¬¦`+`æ„å‘³ç€æˆ‘ä»¬å°†æŠŠæ‰€æœ‰ç»“æœç›¸åŠ ã€‚è¿™æ˜¯`reduce`çš„éƒ¨åˆ†ã€‚è¿™å¯ä»¥æ˜¯å¯¹ 2 ä¸ªè¾“å…¥è¿›è¡Œæ“ä½œçš„ä»»ä½•å‡½æ•°ã€‚
*   ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯æˆ‘ä»¬æƒ³è¦å‡å°‘çš„æ–‡æœ¬ã€‚
*   æœ€åï¼Œæˆ‘ä»¬ä» 0 å¼€å§‹è®¡æ•°ï¼Œå› æ­¤æˆ‘ä»¬çš„ç´¯åŠ å™¨åº”è¯¥ä»é‚£é‡Œå¼€å§‹ã€‚è¿™åœ¨å‘`mapreduce`ä¼ é€’ç©ºå­—ç¬¦ä¸²çš„æƒ…å†µä¸‹å¾ˆæœ‰ç”¨ã€‚

å½“å¾—åˆ°ç½—å¯†æ¬§ä¸æœ±ä¸½å¶æ–‡æœ¬æ—¶ï¼Œæˆ‘ä¸ä¼šè´¹å¿ƒå»æ¸…ç†ç¼–è¾‘çš„åå­—ç­‰ï¼Œæˆ‘å®æ„¿åªä½¿ç”¨`Pipe`åŒ…æ¥å†™ä¸€äº›æ•´æ´çš„ä»£ç å¹¶ç»§ç»­å·¥ä½œ:

ç°åœ¨æˆ‘ä»¬å·²ç»å‡†å¤‡å¥½å¹¶è¡Œè¿è¡Œå®ƒï¼Œå› ä¸º ThreadsX å·²ç»å®ç°äº†`mapreduce`ï¼Œæ‰€ä»¥è¿™éå¸¸ç®€å•:

åŸºå‡†æ—¶é—´:

```
julia> @btime score(romeoAndJuliet)
  5.770 ms (136306 allocations: 2.48 MiB)
184297

julia> @btime score_parallel(romeoAndJuliet)
  1.976 ms (227097 allocations: 3.91 MiB)
184297
```

# ç»“è®º

æ€»ä¹‹ï¼Œå¦‚æœä½ æƒ³è®© Julia å……åˆ†åˆ©ç”¨ä½ çš„è®¡ç®—æœºå†…éƒ¨çš„å†…æ ¸ï¼Œå¯ä»¥çœ‹çœ‹ ThreadsX.jlï¼Œå®ƒå¯ä»¥æ¶ˆé™¤çº¿ç¨‹åŒ–ä»£ç çš„éº»çƒ¦ï¼Œå¹¶è®©ä½ çš„é€Ÿåº¦å¾—åˆ°å¿«é€Ÿæå‡ã€‚

ä½ è¿˜å¯ä»¥å°è¯•å¾ˆå¤šå…¶ä»–åŠŸèƒ½ï¼Œåªéœ€åœ¨ REPL ä¸­é”®å…¥`ThreadsX.`å¹¶ç‚¹å‡» tab é”®ï¼Œå°±å¯ä»¥çœ‹åˆ°ä»–ä»¬è¿˜æœ‰ä»€ä¹ˆåŠŸèƒ½ã€‚

```
julia> ThreadsX.
Implementations  all              count            foreach          mapreduce        sort
MergeSort        any              extrema          issorted         maximum          sort!
QuickSort        collect          findall          map              minimum          sum
Set              copy!            findfirst        map!             prod             unique
StableQuickSort  copyto!          findlast         mapi             reduce
```

å¦‚æœä½ è§‰å¾— exercism.org çš„ç»ƒä¹ å¾ˆæœ‰è¶£ï¼Œé‚£å°±å»çœ‹çœ‹å§ã€‚æˆ‘è¿˜æœ‰ä¸€ç¯‡æ–‡ç« ï¼Œæ˜¯å…³äºæˆ‘åœ¨é‚£é‡Œå®Œæˆä¸€ç³»åˆ— Julia ç»ƒä¹ åå­¦åˆ°çš„æ‰€æœ‰ä¸œè¥¿çš„:

[](/15-things-i-learned-about-julia-after-completing-all-easy-exercism-tasks-b982643d79df) [## å®Œæˆæ‰€æœ‰ç®€å•çš„é”»ç‚¼ä»»åŠ¡åï¼Œæˆ‘å¯¹ Julia äº†è§£äº† 15 ä»¶äº‹

### Julia è¯­è¨€çš„ä¸€äº›å¾ˆé…·çš„ç‰¹æ€§

levelup.gitconnected.com](/15-things-i-learned-about-julia-after-completing-all-easy-exercism-tasks-b982643d79df) 

> æˆ‘å†™æœ±è‰å¨…å’Œå…¶ä»–å¾ˆé…·çš„ä¸œè¥¿ã€‚å¦‚æœä½ å–œæ¬¢è¿™æ ·çš„æ–‡ç« ï¼Œè¯·è€ƒè™‘å…³æ³¨æˆ‘ã€‚è¦è·å¾—æ‰€æœ‰åª’ä½“æ–‡ç« çš„å®Œæ•´è®¿é—®æƒé™ï¼ŒåŒ…æ‹¬æˆ‘çš„æ–‡ç« ï¼Œè¯·è€ƒè™‘åœ¨æ­¤è®¢é˜…ã€‚

# åˆ†çº§ç¼–ç 

æ„Ÿè°¢æ‚¨æˆä¸ºæˆ‘ä»¬ç¤¾åŒºçš„ä¸€å‘˜ï¼åœ¨ä½ ç¦»å¼€ä¹‹å‰:

*   ğŸ‘ä¸ºæ•…äº‹é¼“æŒï¼Œè·Ÿç€ä½œè€…èµ°ğŸ‘‰
*   ğŸ“°æŸ¥çœ‹[çº§ç¼–ç å‡ºç‰ˆç‰©](https://levelup.gitconnected.com/?utm_source=pub&utm_medium=post)ä¸­çš„æ›´å¤šå†…å®¹
*   ğŸ””å…³æ³¨æˆ‘ä»¬:[æ¨ç‰¹](https://twitter.com/gitconnected) | [LinkedIn](https://www.linkedin.com/company/gitconnected) | [æ—¶äº‹é€šè®¯](https://newsletter.levelup.dev)

ğŸš€ğŸ‘‰ [**åŠ å…¥å‡çº§äººæ‰é›†ä½“ï¼Œæ‰¾åˆ°ä¸€ä»½æƒŠè‰³çš„å·¥ä½œ**](https://jobs.levelup.dev/talent/welcome?referral=true)