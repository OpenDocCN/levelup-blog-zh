<html>
<head>
<title>Codespaces in GitHub</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">GitHub中的代码空间</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/codespaces-in-github-6457533fc7f1?source=collection_archive---------0-----------------------#2020-09-16">https://levelup.gitconnected.com/codespaces-in-github-6457533fc7f1?source=collection_archive---------0-----------------------#2020-09-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="61c1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">创建和设置Python开发环境</p><h1 id="b8b6" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">介绍</h1><p id="6040" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">GitHub Codespaces就是运行在Azure中的Linux上的Visual Studio代码，使用你的GitHub帐户。这意味着您可以在您最喜欢的开发环境(VSCode IDE)中直接从GitHub repository页面打开您的项目代码，并提供所有必要的依赖项来开始工作/测试/运行。这很酷，因为它完全在浏览器中运行，所以不需要安装任何东西，也不需要修改本地计算机的配置。</p><p id="2587" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果您喜欢从Visual Studio代码空间开始，请参阅我的前一篇文章。本文中描述的大部分定制都适用于<strong class="jp ir"> Visual Studio代码空间</strong>和<strong class="jp ir"> GitHub代码空间</strong>，因为它们基本上是相同的服务。</p><h1 id="50f5" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">从哪里开始</h1><p id="0a54" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">我假设你已经有一个GitHub帐户，如果没有注册免费帐户<a class="ae lo" href="https://github.com/" rel="noopener ugc nofollow" target="_blank">在这里</a>。GitHub Codespaces有测试版，所以首先你需要<a class="ae lo" href="https://github.com/features/codespaces" rel="noopener ugc nofollow" target="_blank">请求访问Codespaces </a>。一旦您获得了对代码空间的访问权，您就可以打开代码空间中的任何存储库。下面让我们看看如何创建和配置您的第一个代码空间。</p><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi lp"><img src="../Images/697b56f38c7ba0ff16305c6efb06a594.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BA1Qb02WL2qd7N1NzPAwUw.png"/></div></div></figure><h1 id="1df4" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">用户特定定制</h1><p id="2049" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">在GitHub帐户中创建名为“dotfiles”的公共存储库，并将所有公共定制文件独立于该存储库中的任何项目/环境。常见的例子有。bashrc，。gitignore和. editorconfig。请注意，该方法将为您在Codespaces中打开的任何项目的GitHub用户帐户中的所有Codespaces环境应用定制。你可以在<a class="ae lo" href="https://github.com/nsanka/dotfiles" rel="noopener ugc nofollow" target="_blank">这里</a>看到我的一些示例文件。</p><h1 id="6665" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">项目特定定制</h1><p id="c42e" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">为你的项目创建一个新的资源库，姑且称之为“my_project”。这个存储库应该是公共的，以便代码空间从现在开始工作。您也可以选择添加您选择的自述文件和许可文件。一旦它被创建，它将带你到那个库的代码页。</p><p id="72ae" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在存储库主文件夹中，单击“添加文件”-&gt;“创建新文件”按钮。在文件名框中输入"。devcontainer/devcontainer.json”。这个文件将用于为使用这个特定项目的任何用户应用代码空间环境的定制。定制代码空间的更多细节可以在<a class="ae lo" href="https://docs.microsoft.com/en-us/visualstudio/codespaces/reference/configuring#use-docker-within-a-codespace" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><pre class="lq lr ls lt gt mb mc md me aw mf bi"><span id="231c" class="mg km iq mc b gy mh mi l mj mk">{<br/>  "name": "Machine Learning in Python",<br/>  //"dockerFile": "Dockerfile",<br/>  <br/>  "appPort": [3000],<br/>  //"forwardPorts": [8080, 8081],</span><span id="0128" class="mg km iq mc b gy ml mi l mj mk">  // Set *default* container specific settings.json values<br/>  "settings": { <br/>    "terminal.integrated.shell.linux": "/bin/bash",<br/>  },</span><span id="d4d8" class="mg km iq mc b gy ml mi l mj mk">  // Add the IDs of extensions you want to install<br/>  "extensions": [<br/>    "ms-python.python",<br/>  ],</span><span id="9649" class="mg km iq mc b gy ml mi l mj mk">  // Commands to run after the container is created.<br/>  // "postCreateCommand": "python --version",</span><span id="adeb" class="mg km iq mc b gy ml mi l mj mk">  // Uncomment to connect as a non-root user.<br/>  //"remoteUser": "vscode",<br/>}</span></pre><h1 id="5661" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">容器特定定制</h1><p id="1d71" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">这一步是可选的。如果我们没有在“devcontainer.json”文件中指定任何Dockerfile，GitHub将创建一个包含基本Linux映像的代码空间。基本Linux映像包括用于跟踪框架或SDK的工具。</p><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi mm"><img src="../Images/8733086ec5bc2e95bea47f0978cc3343.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*OurwYA0-Co7z7dww.png"/></div></div></figure><p id="2ac8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果您想要构建自定义容器，请在您的存储库主文件夹中单击Add file -&gt; Create new file按钮。在文件名框中输入"。devcontainer/Dockerfile”。您的自定义容器可以包含您想要的任何内容。如果您正在使用标准映像中不存在的框架或SDK，或者如果您必须安装特定的包，这将非常有用。我建议使用<strong class="jp ir">标准代码空间图像</strong>作为基础图像，然后在此基础上构建，如下所示。如果您想从不同于标准映像的框架开始，请检查在<a class="ae lo" href="https://github.com/microsoft/vscode-dev-containers" rel="noopener ugc nofollow" target="_blank"> vscode-dev-containers </a>存储库中提供的Visual Studio代码的预构建容器配置。</p><pre class="lq lr ls lt gt mb mc md me aw mf bi"><span id="1df3" class="mg km iq mc b gy mh mi l mj mk">FROM mcr.microsoft.com/vscode/devcontainers/universal:linux</span><span id="090a" class="mg km iq mc b gy ml mi l mj mk"># [Optional] Uncomment this section to install additional OS packages.<br/># RUN apt-get update &amp;&amp; export DEBIAN_FRONTEND=noninteractive \<br/>#     &amp;&amp; apt-get -y install --no-install-recommends &lt;your-package-list-here&gt;</span></pre><h1 id="91a0" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">开放代码空间</h1><p id="dcc7" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">我们已经设置好一切，准备开始代码空间。从您的存储库主页中，单击绿色的“代码”按钮，“使用代码空间打开”和“新代码空间”。这需要几秒钟的时间，你会在浏览器中看到你的代码空间。</p><figure class="lq lr ls lt gt lu gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi mn"><img src="../Images/493e53500a0cb5931e93d09cdfeda872.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jFiwNNmqETEtFzPJjPVHbw.png"/></div></div></figure><h1 id="fa56" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">设置Python环境</h1><p id="91db" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">为了在Linux下得到Python，我建议安装Anaconda个人版。Anaconda个人版是一个免费的、易于安装的包管理器、环境管理器和Python发行版，它收集了1500多个开源包，并有<a class="ae lo" href="https://groups.google.com/a/anaconda.com/forum/?fromgroups#!forum/anaconda" rel="noopener ugc nofollow" target="_blank">免费社区支持</a>。Anaconda是平台无关的，所以无论您是在Windows、macOS还是Linux上都可以使用它。</p><p id="711f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">要安装Anaconda，请在代码空间浏览器窗口中打开一个新的终端(Ctrl+Shift+` ),并输入以下命令。详细说明可以在<a class="ae lo" href="https://docs.anaconda.com/anaconda/install/linux/" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><pre class="lq lr ls lt gt mb mc md me aw mf bi"><span id="8997" class="mg km iq mc b gy mh mi l mj mk"># Download Anaconda script<br/>wget <a class="ae lo" href="https://repo.anaconda.com/archive/Anaconda3-2020.07-Linux-x86_64.sh" rel="noopener ugc nofollow" target="_blank">https://repo.anaconda.com/archive/Anaconda3-2020.07-Linux-x86_64.sh</a></span><span id="0e14" class="mg km iq mc b gy ml mi l mj mk"># Verify the downloaded file<br/>sha256sum <a class="ae lo" href="https://repo.anaconda.com/archive/Anaconda3-2020.07-Linux-x86_64.sh" rel="noopener ugc nofollow" target="_blank">https://repo.anaconda.com/archive/Anaconda3-2020.07-Linux-x86_64.sh</a></span><span id="8c9b" class="mg km iq mc b gy ml mi l mj mk"># Install<br/>bash <a class="ae lo" href="https://repo.anaconda.com/archive/Anaconda3-2020.07-Linux-x86_64.sh" rel="noopener ugc nofollow" target="_blank">https://repo.anaconda.com/archive/Anaconda3-2020.07-Linux-x86_64.sh</a></span><span id="8b81" class="mg km iq mc b gy ml mi l mj mk"># Follow the instructions such as Accept License, Select Path, yes to initialize conda</span><span id="1494" class="mg km iq mc b gy ml mi l mj mk">source ~/.bashrc</span><span id="b49b" class="mg km iq mc b gy ml mi l mj mk"># Verify Installation<br/>conda list</span></pre><p id="a5d0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">除了选择标准的Linux映像并安装Anaconda，您还可以使用用于Visual Studio代码的<a class="ae lo" href="https://github.com/microsoft/vscode-dev-containers/tree/master/containers/python-3-anaconda" rel="noopener ugc nofollow" target="_blank"> Anaconda Python容器</a>。</p><h1 id="bff6" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">使用SSH访问代码空间</h1><p id="14de" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">要启用SSH，首先我们需要更新代码空间用户的密码。连接到代码空间后，使用VS代码中的终端来设置密码。</p><pre class="lq lr ls lt gt mb mc md me aw mf bi"><span id="274e" class="mg km iq mc b gy mh mi l mj mk"># Change current user password<br/>sudo passwd $(whoami)</span></pre><p id="c188" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，按F1并选择转发端口…并输入端口2222。在本地终端中使用下面的命令，通过SSH连接到代码空间。如果您没有使用代码空间用户，请相应地更改命令。</p><pre class="lq lr ls lt gt mb mc md me aw mf bi"><span id="24ae" class="mg km iq mc b gy mh mi l mj mk"># SSH using port 2222<br/>ssh -p 2222 -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null codespace@localhost</span></pre><h1 id="1d3b" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">安装VNC服务器</h1><p id="a79e" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">我们可以使用代码空间环境来开发控制台和web应用程序。我们可以使用代码空间中的端口转发特性在本地计算机中打开web应用程序，以查看和测试该应用程序。如果您想将此环境用于需要GUI的桌面应用程序，我们可以安装vnc服务器，并在任何VNC查看器中打开进行调试/测试。详细说明可以关注<a class="ae lo" rel="noopener ugc nofollow" target="_blank" href="/setting-up-development-environment-in-visual-studio-codespaces-9e003e3ece61?source=friends_link&amp;sk=66173d3c7ae1b81a9ea94466f51575a2">我的另一篇文章</a>。现在，您可以使用SSH隧道通过本地VNC客户端打开VNC服务器。</p><p id="1e6d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你想在浏览器中使用它，我们将安装noVNC在任何浏览器中访问这个VNC服务器，而不是VNC客户端。您可以输入以下命令来安装noVNC。</p><pre class="lq lr ls lt gt mb mc md me aw mf bi"><span id="f01b" class="mg km iq mc b gy mh mi l mj mk"># Install noVNC<br/>sudo git clone <a class="ae lo" href="https://github.com/novnc/noVNC.git" rel="noopener ugc nofollow" target="_blank">https://github.com/novnc/noVNC.git</a> /opt/novnc</span><span id="0f7e" class="mg km iq mc b gy ml mi l mj mk"># Install Websockify<br/>sudo git clone <a class="ae lo" href="https://github.com/novnc/websockify" rel="noopener ugc nofollow" target="_blank">https://github.com/novnc/websockify</a> /opt/novnc/utils/websockify</span><span id="22aa" class="mg km iq mc b gy ml mi l mj mk"># Create default page for noVNC<br/>echo "&lt;html&gt;&lt;head&gt;&lt;meta http-equiv=\"Refresh\" content=\"0; url=vnc.html?autoconnect=true&amp;reconnect=true&amp;reconnect_delay=1000&amp;resize=scale&amp;quality=9\"&gt;&lt;/head&gt;&lt;/html&gt;" &gt; index.html</span><span id="d09f" class="mg km iq mc b gy ml mi l mj mk"># Move the default page to correct location<br/>sudo mv index.html /opt/novnc/index.html</span></pre><p id="5edf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">添加以下命令来创建别名，以启动VNC服务器和VNC服务器。代码空间将自动转发5901、6080端口。</p><pre class="lq lr ls lt gt mb mc md me aw mf bi"><span id="a452" class="mg km iq mc b gy mh mi l mj mk"><br/># Add Start VNC Shortcut<br/>echo "alias svnc='vncserver -kill :1 &amp;&amp; vncserver -geometry 1920x1080 &amp;&amp; /opt/novnc/utils/launch.sh --web /opt/novnc --vnc localhost:5901 --listen 6080 &gt;/dev/null 2&gt;&amp;1 &amp;'" &gt;&gt; ~/.bashrc</span><span id="78fb" class="mg km iq mc b gy ml mi l mj mk"># Reload Terminal or Source<br/>source ~/.bashrc</span><span id="08f2" class="mg km iq mc b gy ml mi l mj mk"># Run VNC Server<br/>svnc</span></pre><p id="442c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果端口由于某种原因没有被转发，您可以通过单击端口选项卡中的转发端口按钮来转发它们。打开6080端口旁边的链接查看VNC会话。</p><p id="813b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这就完成了我们在GitHub代码空间中的Python开发环境设置。</p><h1 id="68b9" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">结论</h1><p id="4b1e" class="pw-post-body-paragraph jn jo iq jp b jq lj js jt ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk ij bi translated">GitHub Codespaces对开发者来说是一个非常棒的基于云的环境，我们可以在预定义的环境中快速打开项目代码，构建并测试它。随着GitHub Codespaces的推出，为软件开发创建和维护开发环境的难度进一步降低。</p><h1 id="eeda" class="kl km iq bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">参考和链接:</h1><ul class=""><li id="15f0" class="mo mp iq jp b jq lj ju lk jy mq kc mr kg ms kk mt mu mv mw bi translated"><a class="ae lo" href="https://youtu.be/dy2eYaNxaQc" rel="noopener ugc nofollow" target="_blank"> GitHub卫星演示视频</a></li><li id="a2bb" class="mo mp iq jp b jq mx ju my jy mz kc na kg nb kk mt mu mv mw bi translated"><a class="ae lo" href="https://docs.github.com/en/github/developing-online-with-codespaces" rel="noopener ugc nofollow" target="_blank"> GitHub代码空间文档</a></li></ul></div></div>    
</body>
</html>