<html>
<head>
<title>String Efficiency In .NET</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">字符串效率。网</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/string-efficiency-in-net-befe7bb46a7e?source=collection_archive---------10-----------------------#2019-12-13">https://levelup.gitconnected.com/string-efficiency-in-net-befe7bb46a7e?source=collection_archive---------10-----------------------#2019-12-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="4d52" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">文本框。append text(" string ")；Vs文本框。text+= " string "；</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/7cde00b4cabeddc3632ea8c4a8d1f00f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*cfjVyyNiaFFS-6zV"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@jack_scorner" rel="noopener ugc nofollow" target="_blank">托马斯·格里斯贝克</a>在<a class="ae kv" href="https://unsplash.com/" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="e9c9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你有没有想过使用<code class="fe ls lt lu lv b">TextBox.AppendText(“string”)</code>还是<code class="fe ls lt lu lv b">TextBox.Text += “string”;</code>更高效？</p><p id="f1ae" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我使用Windows窗体应用程序对此进行了测试，结果非常有趣</p><p id="6be3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在Windows窗体应用程序中，我有4个按钮:</p><ul class=""><li id="5535" class="lw lx iq ky b kz la lc ld lf ly lj lz ln ma lr mb mc md me bi translated">串联按钮</li><li id="3102" class="lw lx iq ky b kz mf lc mg lf mh lj mi ln mj lr mb mc md me bi translated">StringBuilder串联按钮</li><li id="5e6f" class="lw lx iq ky b kz mf lc mg lf mh lj mi ln mj lr mb mc md me bi translated">AppendText按钮</li><li id="f5cf" class="lw lx iq ky b kz mf lc mg lf mh lj mi ln mj lr mb mc md me bi translated">StringBuilder AppendText按钮</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/436c35ddb3b0159a5966247b1aee737c.png" data-original-src="https://miro.medium.com/v2/resize:fit:620/0*u-dNufn3g4-BSrHq.JPG"/></div></figure><p id="e15f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">串联按钮在1000次迭代的for循环中使用了<code class="fe ls lt lu lv b">textBox1.Text += “s”</code>。</p><p id="dce1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">AppendText按钮在1000次迭代的for循环中使用了<code class="fe ls lt lu lv b">textBox1.AppendText(“s”)</code>。</p><p id="4bb5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b">StringBuilder</code>按钮的等效物基本上做了同样的事情，但是它没有使用<code class="fe ls lt lu lv b">+=</code>或<code class="fe ls lt lu lv b">AppendText()</code>方法进行追加，而是在for循环中使用了<code class="fe ls lt lu lv b">StringBuilder</code>实例的<code class="fe ls lt lu lv b">Append()</code>方法，然后在for循环的末尾追加或连接了<code class="fe ls lt lu lv b">StringBuilder</code>实例的字符串值。</p><p id="63c3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">看看下面4个按钮的代码:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ml mm l"/></div></figure><h1 id="4cb6" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">结果</h1><p id="315b" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">这四种方法的结果都挺有意思的。</p><h2 id="2ad4" class="nk mo iq bd mp nl nm dn mt nn no dp mx lf np nq mz lj nr ns nb ln nt nu nd nv bi translated">文本框。Multiline = True</h2><p id="2bf8" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">用<code class="fe ls lt lu lv b">StringBuilder</code>:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/ffac76356a5be4f4e136593cc6663221.png" data-original-src="https://miro.medium.com/v2/resize:fit:486/format:webp/1*2uP4XMa-sFB-rICQKCPQDw.png"/></div></figure><p id="0e47" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b">AppendText()</code>快了78个刻度。</p><p id="6eef" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">不带<code class="fe ls lt lu lv b">StringBuilder:</code></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/e2052b2d26681a2818827557ac7d4e0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:482/format:webp/1*ls8hm-t2kRN0lOsFVEYAOw.png"/></div></figure><p id="2df7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b">AppendText()</code>快了33884285个滴答。</p><h2 id="73ae" class="nk mo iq bd mp nl nm dn mt nn no dp mx lf np nq mz lj nr ns nb ln nt nu nd nv bi translated">文本框。Multiline = False</h2><p id="f887" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">用<code class="fe ls lt lu lv b">StringBuilder:</code></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/2ee5620ea6e1360aa57cbcacc10fd1db.png" data-original-src="https://miro.medium.com/v2/resize:fit:488/format:webp/1*sqxRRUl0GJtvzIdqbSa_wQ.png"/></div></figure><p id="ed01" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">串联快了9990个节拍。</p><p id="1e43" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">不带<code class="fe ls lt lu lv b">StringBuilder:</code></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/0cb3f476812253210ada2e9e2fc7f3ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:486/format:webp/1*rfFy2LvhJSaecwoEUO8lPA.png"/></div></figure><p id="7315" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">串联快了6690788个节拍。</p><p id="94c6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如结果所示，如果<code class="fe ls lt lu lv b">TextBox.Multiline</code>属性设置为<code class="fe ls lt lu lv b">true</code>，那么<code class="fe ls lt lu lv b">TextBox.AppendText()</code>更快。</p><p id="a29f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">而如果<code class="fe ls lt lu lv b">Multiline = false</code>，拼接会更快。</p><p id="78ea" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用<code class="fe ls lt lu lv b">StringBuilder</code>实例只是显示了在for循环中构建字符串时，它比串联要高效得多。</p></div></div>    
</body>
</html>