<html>
<head>
<title>Razorpay Payment Gateway Integration with Website in PHP</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Razorpay支付网关与PHP网站的集成</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/razorpay-payment-gateway-integration-with-website-in-php-e25dd1c10c5e?source=collection_archive---------0-----------------------#2022-04-09">https://levelup.gitconnected.com/razorpay-payment-gateway-integration-with-website-in-php-e25dd1c10c5e?source=collection_archive---------0-----------------------#2022-04-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/d90afa28d1bcc57576319a734a75264f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*02W5o1m1sgJLi07oYWGZDQ.png"/></div></div></figure><p id="46f6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">本教程的目的是向我们展示如何通过使用<a class="ae kw" href="https://rzp.io/i/2wiHeXb3dt" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir">razor pay</strong></a>API和库在PHP中集成支付网关和我们的网站。</p><p id="ed25" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们需要遵循这些步骤来实现这一点。</p><ol class=""><li id="7dae" class="kx ky iq ka b kb kc kf kg kj kz kn la kr lb kv lc ld le lf bi translated">用这个注册<a class="ae kw" href="https://rzp.io/i/2wiHeXb3dt" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir">网址</strong> </a>创建<a class="ae kw" href="https://rzp.io/i/2wiHeXb3dt" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir"> Razorpay </strong> </a>账户。</li><li id="7dd8" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">从仪表盘中获取<a class="ae kw" href="https://rzp.io/i/2wiHeXb3dt" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir"> Razorpay </strong> </a>密钥id和秘密Id。</li><li id="b0fe" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">创建HTML表单以获取订单详细信息。</li><li id="b6e4" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">使用<a class="ae kw" href="https://rzp.io/i/2wiHeXb3dt" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir"> Razorpay </strong> </a>库创建订单详情。</li><li id="3406" class="kx ky iq ka b kb lg kf lh kj li kn lj kr lk kv lc ld le lf bi translated">执行付款以获得付款。</li></ol><p id="80f9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们从给出的步骤开始，一个一个地详细说明。</p><p id="6fba" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">第一步:Razorpay账户创建</strong> —要创建<a class="ae kw" href="https://rzp.io/i/2wiHeXb3dt" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir"> Razorpay </strong> </a>账户，请<a class="ae kw" href="https://rzp.io/i/2wiHeXb3dt" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir">点击此处</strong> </a>并填写所需的详细信息。您也可以使用您的google mail帐户来创建帐户。</p><figure class="lm ln lo lp gt jr gh gi paragraph-image"><div class="gh gi ll"><img src="../Images/378cb6518b440d28e04fa7fb9fc48601.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/0*jah9KAYBmVS8XXsJ.png"/></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk translated">Razorpay注册屏幕</figcaption></figure></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><p id="4208" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">第二步:API密钥生成— </strong>当您拥有<a class="ae kw" href="https://rzp.io/i/2wiHeXb3dt" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir"> Razorpay </strong> </a>的账户时，请转到仪表板并创建API密钥，为此，请转到:<strong class="ka ir">设置= &gt; API密钥</strong></p><figure class="lm ln lo lp gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mb"><img src="../Images/3a1140b45a7ec818c6faadf529a325da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*iLpOJEC_buQbObHH.png"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk translated">API密钥生成的导航屏幕</figcaption></figure><p id="12a3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在上面的屏幕中，您需要为<strong class="ka ir">测试</strong>和<strong class="ka ir">实时</strong>模式生成<strong class="ka ir"> API密钥</strong>，并保存<strong class="ka ir">密钥Id </strong>和<strong class="ka ir">密钥秘密</strong>。下面你会找到每种模式的导航。</p><figure class="lm ln lo lp gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mb"><img src="../Images/88790fc031a64f575ed1a913725f59e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*drSH4h07xc6PWtuy.png"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk translated">测试和实时模式API密钥生成屏幕</figcaption></figure></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><p id="383c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">步骤3:创建您的HTML表单</strong> —在您的网站上创建一个HTML表单，其中包含必需的字段，以便将其传递到<a class="ae kw" href="https://rzp.io/i/2wiHeXb3dt" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir"> Razorpay </strong> </a>库，并检索订单id和支付步骤所需的更多详细信息。这是一个HTML表单域的例子。物品名称、数量、金额、物品描述、物品地址、用户名等。</p><p id="86d7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">一旦创建了HTML表单，下一步就是在<a class="ae kw" href="https://rzp.io/i/2wiHeXb3dt" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir"> Razorpay </strong> </a>库的帮助下创建订单细节。</p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><p id="5a8f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">步骤4:使用</strong><a class="ae kw" href="https://rzp.io/i/2wiHeXb3dt" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir">razor pay</strong></a><strong class="ka ir">库</strong>创建订单细节——在创建订单细节之前，您需要从GitHub上的releases部分下载最新的<a class="ae kw" href="https://github.com/razorpay/razorpay-php/releases/" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir"> razorpay-php.zip文件</strong> </a>。razorpay-php.zip是预编译的，包含了所有的依赖项。</p><p id="4afe" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，让我们按如下方式创建订单详细信息。</p><pre class="lm ln lo lp gt mc md me mf aw mg bi"><span id="9c35" class="mh mi iq md b gy mj mk l ml mm">&lt;?php</span><span id="d382" class="mh mi iq md b gy mn mk l ml mm">/* In this config file you may set Keyid and secret id of the Razorpay and other credentials*/<br/>require('config.php');</span><span id="960b" class="mh mi iq md b gy mn mk l ml mm">/* This is from downloaded Github folder just put in directory and using here */<br/>require('razorpay-php/Razorpay.php');<br/>session_start();<br/>use Razorpay\Api\Api;</span><span id="e1a2" class="mh mi iq md b gy mn mk l ml mm">$api = new Api($keyId, $keySecret);<br/>$orderData = [<br/>    'receipt'         =&gt; 3456,<br/>    'amount'          =&gt; $_POST['amount'] * 100,<br/>    'currency'        =&gt; $_POST['currency'],<br/>    'payment_capture' =&gt; 1<br/>];<br/>$razorpayOrder = $api-&gt;order-&gt;create($orderData);<br/>$razorpayOrderId = $razorpayOrder['id'];<br/>$_SESSION['razorpay_order_id'] = $razorpayOrderId;<br/>$displayAmount = $amount = $orderData['amount'];<br/>?&gt;</span></pre><p id="f029" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">注意:</strong>在上面的例子中，<strong class="ka ir">收据</strong> ID可以是任何东西，<strong class="ka ir">金额</strong>应该是100的倍数，因为Razorpay只接受一个派萨，这是印度最小的货币单位INR。<strong class="ka ir">例如</strong>，如果我们将10卢比/-作为订单金额，那么我们需要将<strong class="ka ir"> 10*100 = 1000 </strong> paisa传递给Razorpay订单创建流程。一旦我们将这些细节传递给订单创建API，我们将收到<strong class="ka ir"> $razorpayOrderId </strong>，我们将把它存储在会话中以供进一步处理。</p><p id="ff1e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们将把所有的支付细节存储到一个数组中，编码成JSON，并返回到<strong class="ka ir">支付PHP文件</strong>来执行支付。你可以创建下面的json数组样本，把它发送到付款PHP文件。</p><pre class="lm ln lo lp gt mc md me mf aw mg bi"><span id="d148" class="mh mi iq md b gy mj mk l ml mm">&lt;?php<br/>$data = [<br/>    "key"               =&gt; $keyId,<br/>    "amount"            =&gt; $amount,<br/>    "name"              =&gt; $_POST['item_name'],<br/>    "description"       =&gt; $_POST['item_description'],<br/>    "image"             =&gt; "",<br/>    "prefill"           =&gt; [<br/>    "name"              =&gt; $_POST['cust_name'],<br/>    "email"             =&gt; $_POST['email'],<br/>    "contact"           =&gt; $_POST['contact'],<br/>    ],<br/>    "notes"             =&gt; [<br/>    "address"           =&gt; $_POST['address'],<br/>    "merchant_order_id" =&gt; "12312321",<br/>    ],<br/>    "theme"             =&gt; [<br/>    "color"             =&gt; "#F37254"<br/>    ],<br/>    "order_id"          =&gt; $razorpayOrderId,<br/>];<br/>?&gt;</span></pre><p id="5f65" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">第5步:执行支付以获得支付— </strong>作为这一步的一部分，您必须获得编码的JSON数据并按如下方式解析它，并且为了执行支付功能，我们需要将checkout JavaScript文件作为<strong class="ka ir"> checkout.js </strong>包含在内。请参见下面的示例代码。</p><pre class="lm ln lo lp gt mc md me mf aw mg bi"><span id="5331" class="mh mi iq md b gy mj mk l ml mm">&lt;button id="rzp-button1" class="btn btn-primary"&gt;Pay with Razorpay&lt;/button&gt;<br/>&lt;script src="https://checkout.razorpay.com/v1/checkout.js"&gt;&lt;/script&gt;<br/>&lt;form name='razorpayform' action="verify.php" method="POST"&gt;<br/>    &lt;input type="hidden" name="razorpay_payment_id" id="razorpay_payment_id"&gt;<br/>    &lt;input type="hidden" name="razorpay_signature"  id="razorpay_signature" &gt;<br/>&lt;/form&gt;<br/>&lt;script&gt;<br/>var options = &lt;?php echo $json_data?&gt;;<br/>options.handler = function (response){<br/>    document.getElementById('razorpay_payment_id').value = response.razorpay_payment_id;<br/>    document.getElementById('razorpay_signature').value = response.razorpay_signature;<br/>    document.razorpayform.submit();<br/>};<br/>options.theme.image_padding = false;<br/>options.modal = {<br/>    ondismiss: function() {<br/>        console.log("This code runs when the popup is closed");<br/>    },<br/>    escape: true,<br/>    backdropclose: false<br/>};<br/>var rzp = new Razorpay(options);<br/>document.getElementById('rzp-button1').onclick = function(e){<br/>    rzp.open();<br/>    e.preventDefault();<br/>}<br/>&lt;/script&gt;</span></pre><p id="9a64" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">上面的代码包括checkout.js来处理<a class="ae kw" href="https://rzp.io/i/2wiHeXb3dt" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir">razor pay</strong></a>check out功能。它还从支付PHP文件中获取数据，并将其传递给<a class="ae kw" href="https://rzp.io/i/2wiHeXb3dt" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir"> Razorpay </strong> </a>选项处理程序。<a class="ae kw" href="https://rzp.io/i/2wiHeXb3dt" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir"> Razorpay </strong> </a>付款id和签名用于在此过程中验证付款细节。</p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><p id="63e9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你有兴趣学习Google Apps脚本和自动化你的Google Workspace？一定要试试这本<strong class="ka ir">电子书</strong>上的<a class="ae kw" href="https://www.amazon.com/dp/B0BTJC9X5R" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir">谷歌应用套件脚本:初学者指南</strong> </a></p><p id="6622" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我希望这篇文章对你有用，如果你有任何问题，请在评论中告诉我。</p><p id="d421" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">非常感谢。快乐学习！</p><p id="83e2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">对于与本文相关的任何疑问或任何其他技术建议，我们可以在<strong class="ka ir">C</strong><a class="ae kw" href="https://clueby.com/dilipk" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir">lueby here</strong></a>上聊天。</p></div></div>    
</body>
</html>