<html>
<head>
<title>How to do Machine Learning With PHP</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用PHP做机器学习</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/do-machine-learning-in-php-83bb226d5262?source=collection_archive---------6-----------------------#2022-09-08">https://levelup.gitconnected.com/do-machine-learning-in-php-83bb226d5262?source=collection_archive---------6-----------------------#2022-09-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="22f9" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">比你想象的容易！✨</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/11e24362c7552ae9de23e63c3a38503a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*RGaiUfn2YsdjRqxC"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@deepmind?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> DeepMind </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="6ba2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">目前，我正在进行一个客户群细分项目，以验证我的机器学习工程师头衔。我让我的2名数据营销硕士学生从事一个由<a class="ae ky" href="https://www.prestashop-project.org/" rel="noopener ugc nofollow" target="_blank"> PrestaShop </a>开发的电子商务网站的细分工作。</p><p id="4838" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由于PrestaShop基于PHP/MySQL组合，我想知道我们是否有一天可以开发一个或多个模块，为电子零售商提供更多关于他们客户的信息，而不需要来自<a class="ae ky" href="https://analytics.google.com/analytics/web/" rel="noopener ugc nofollow" target="_blank"> Google Analytics </a>或<a class="ae ky" href="https://fr.matomo.org/" rel="noopener ugc nofollow" target="_blank"> Matomo </a>的数据。</p><p id="aca0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">奇怪的巧合是，谷歌分析解决方案的使用目前在欧盟被认为是非法的，因为它不尊重GDPR。</p><p id="0219" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我读过一些营销团队或电子零售商在客户知识方面所做的工作，我的印象是，他们中99%的人只是通过基于跟踪工具的“网站上的客户之旅”来看待客户知识。</p><p id="18ee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，一旦你有了一点历史，那么多的信息和决策都可能不被追踪！</p><h2 id="368b" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">但是什么是细分呢？RFM的例子</h2><p id="ab78" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">追踪解决方案的目标至少是对那些被认为有相同行为和相同购买习惯的顾客群体进行研究。</p><p id="4e28" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这就是我们所说的细分，目标是采取营销行动，而不是在整个客户群的规模上，而是根据他们的路径和在网站上采取的行动来确定细分的基础。</p><p id="013b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在最著名的分割例子中，RFM分割是最容易解释的。</p><p id="4097" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于数据库中的每个客户，我们收集以下指标:</p><ul class=""><li id="bb92" class="mt mu it lb b lc ld lf lg li mv lm mw lq mx lu my mz na nb bi translated">最后一次购买的日期(也称为“<strong class="lb iu">最近</strong>”)；</li><li id="6148" class="mt mu it lb b lc nc lf nd li ne lm nf lq ng lu my mz na nb bi translated">一定时期内的<strong class="lb iu">购买频率</strong>:例如每月；</li><li id="2086" class="mt mu it lb b lc nc lf nd li ne lm nf lq ng lu my mz na nb bi translated">在现场花费的总金额(也称为“<strong class="lb iu">货币</strong>”)；</li></ul><p id="1672" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">此外，您还可以随意使用其他信息(如注册日期、城市、年龄、性别等。)，我们可以通过建立RFM评分，根据这些指标对客户进行分组。</p><p id="4cac" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，在研究了这些指标的值之后，我们可以将它们分成四分位数(25%)，并给它们分配几个点。</p><p id="8013" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">总消费金额:</strong></p><ul class=""><li id="aac7" class="mt mu it lb b lc ld lf lg li mv lm mw lq mx lu my mz na nb bi translated">第一个四分位数得1分；</li><li id="8467" class="mt mu it lb b lc nc lf nd li ne lm nf lq ng lu my mz na nb bi translated">第二个四分位数给2分；</li><li id="bab1" class="mt mu it lb b lc nc lf nd li ne lm nf lq ng lu my mz na nb bi translated">等等…</li></ul><p id="451d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">对于最后一次购买的日期，则相反！</strong></p><p id="7be3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一般来说，我们更喜欢最近购买过的客户。因此，我们可以计算最后一次购买日期和今天之间的天数，并以四分位数进行“评分”:</p><ul class=""><li id="6465" class="mt mu it lb b lc ld lf lg li mv lm mw lq mx lu my mz na nb bi translated">第一个四分位数给4分；</li><li id="ff05" class="mt mu it lb b lc nc lf nd li ne lm nf lq ng lu my mz na nb bi translated">第二个四分位数给3分；</li><li id="9cf3" class="mt mu it lb b lc nc lf nd li ne lm nf lq ng lu my mz na nb bi translated">等等…</li></ul><p id="70d7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你做得对，在不了解任何机器学习的情况下，你将很快获得一个包含你的客户群的表格，然后是RFM评分。</p><p id="337c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后，您必须研究这些聚合，并为每个组建立一个角色和营销活动！</p><blockquote class="nh ni nj"><p id="594e" class="kz la nk lb b lc ld ju le lf lg jx lh nl lj lk ll nm ln lo lp nn lr ls lt lu im bi translated">如果你想在PrestaShop数据库上试验RFM分段，我已经贡献了SQL查询给<a class="ae ky" href="https://github.com/friends-of-presta/SQL-request/blob/main/1.7/orders/rfm_complete_statistics.sql" rel="noopener ugc nofollow" target="_blank">在“PrestaShop之友”GitHub组织中收集。</a></p></blockquote><h2 id="16b1" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">该死的！我们想用PHP做机器学习😣</h2><p id="7921" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">放松，我快到了😅</p><p id="933e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最终，我们试图将客户聚集在具有<strong class="lb iu">同质行为</strong>的群体中。</p><p id="3072" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">机器学习的一整个分支都致力于这个问题，叫做<strong class="lb iu">无监督学习</strong>。</p><p id="c37d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">目标是为算法提供一定量的数据，以便它们自己对个体进行分组。</p><p id="7779" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在前面的示例中，我们必须手动对客户进行细分，并在细分市场上建立我们的条件(得分从0到1，然后从2到3，等等。).</p><p id="7cba" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里，是机器学习模型将使用数学假设和约束来建立群组🙂</p><blockquote class="nh ni nj"><p id="99a3" class="kz la nk lb b lc ld ju le lf lg jx lh nl lj lk ll nm ln lo lp nn lr ls lt lu im bi translated">请注意，您仍需要对这些群体进行解读，以建立角色和营销活动<em class="it"> ⛔ </em></p></blockquote><p id="2215" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但事情是这样的，PHP中的机器学习是不存在的:你必须做Python，R，Java …</p><p id="382b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但直到最近我也是这么想的！那是在我发现Rubix ML库之前🤩</p><h2 id="93ee" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">使用Rubix ML进行客户细分</h2><p id="8317" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated"><em class="nk">你会在GitHub上找到</em> <a class="ae ky" href="https://github.com/mickaelandrieu/php_customers_segmentation" rel="noopener ugc nofollow" target="_blank"> <em class="nk">完整的代码</em> </a> <em class="nk">。</em></p><p id="5c8f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了对客户群进行细分，我选择以RFM行为指标为基础，训练一个名为K-Means的机器学习模型。</p><p id="e8ce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我就不解释K均值了。这是一个关于这个主题的非常好的视频:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="1b2b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">PHP Rubix ML可以执行以下操作:</p><ul class=""><li id="d7ea" class="mt mu it lb b lc ld lf lg li mv lm mw lq mx lu my mz na nb bi translated"><strong class="lb iu">将你的数据</strong>加载到一个名为“Dataset”的结构中；</li><li id="e7e9" class="mt mu it lb b lc nc lf nd li ne lm nf lq ng lu my mz na nb bi translated">应用数据准备操作；</li><li id="d123" class="mt mu it lb b lc nc lf nd li ne lm nf lq ng lu my mz na nb bi translated"><strong class="lb iu">创建一个模型</strong>实例(这里指K-Means)；</li><li id="2038" class="mt mu it lb b lc nc lf nd li ne lm nf lq ng lu my mz na nb bi translated"><strong class="lb iu">用你的数据训练它</strong>；</li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nq np l"/></div></figure><p id="a4c0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦模型定型(可能很长)，它就用于预测数据库中每个客户的细分市场。</p><p id="248e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们选择了三个部分:可能这个值不是最相关的！您必须执行几项测试，以确定哪个数量的细分市场最能代表您的客户。</p><p id="2c52" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是我们如何使用训练好的模型通过Rubix ML预测细分市场:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nq np l"/></div></figure><p id="15c2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们在一个CSV文件中恢复了一个名为“cluster”的新列，它将包含客户的细分预测。</p><p id="8754" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">因为我们选择了3个集群，所以可能的值是0、1和2:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nq np l"/></div></figure><h2 id="18e6" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">好吧，但我怎么知道它是否被正确分割？</h2><p id="ae81" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">这是PHP生态系统的担忧；没有专门用于数据分析和可视化的库🤔</p><p id="ad2f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了结束本文，下面是使用Rubix ML获得的集群的可视化表示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/948268b1fb87d7ba0f320d0685e740a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vt1am37lE-TUX9mkbJBgnw.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">Rubix ML集群的图形表示(5万客户)</figcaption></figure><p id="8688" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">正如我们所看到的，很难区分哪些部分是不同的。</p><p id="39f7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">出于好奇，通过对相同的数据应用相同的转换，下面是使用Python <a class="ae ky" href="https://scikit-learn.org/stable/" rel="noopener ugc nofollow" target="_blank"> Scikit-Learn </a>库呈现的相同训练:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/1773ea2e93d2b91b7d7c93b039a213a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YZEFjnkZkDMZXpGCLHNYdw.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">Scikit-Learn集群的可视化表示(50，000客户)</figcaption></figure><p id="a79c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们这次看到Scikit-Learn能够检测到第三个片段，即使理解不同组之间的区别仍然很复杂:</p><ul class=""><li id="0a04" class="mt mu it lb b lc ld lf lg li mv lm mw lq mx lu my mz na nb bi translated">0组不是很清楚😯；</li><li id="56f3" class="mt mu it lb b lc nc lf nd li ne lm nf lq ng lu my mz na nb bi translated">组1似乎有一个低频率和总购买量🙄；</li><li id="f6e9" class="mt mu it lb b lc nc lf nd li ne lm nf lq ng lu my mz na nb bi translated">第2组看起来是最好的客户群，但可能会再次被分开🤨；</li></ul><blockquote class="nh ni nj"><p id="319e" class="kz la nk lb b lc ld ju le lf lg jx lh nl lj lk ll nm ln lo lp nn lr ls lt lu im bi translated">我很失望，我以为我可以做机器学习<em class="it">😑</em></p></blockquote><p id="8ba7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我明白，但是机器学习不同于传统的软件开发(网络、移动、桌面)，它需要一些非常高级的数学技能🤓。</p><p id="513b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">为了更好地对我们的数据进行<strong class="lb iu">聚类</strong>，我必须在这篇文章中引入许多数据分析概念，并理解K-Means是如何工作的😶</p><p id="e6dc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，这里有一些建议给那些想改善结果的人:</p><ul class=""><li id="0b5a" class="mt mu it lb b lc ld lf lg li mv lm mw lq mx lu my mz na nb bi translated">在保留客户id的同时训练模型值得吗？</li><li id="f807" class="mt mu it lb b lc nc lf nd li ne lm nf lq ng lu my mz na nb bi translated">您确定客户id是唯一的吗？</li><li id="18ef" class="mt mu it lb b lc nc lf nd li ne lm nf lq ng lu my mz na nb bi translated">数据集中有异常值吗？</li><li id="7fd3" class="mt mu it lb b lc nc lf nd li ne lm nf lq ng lu my mz na nb bi translated">每个变量的值的分布是什么？</li><li id="bbfa" class="mt mu it lb b lc nc lf nd li ne lm nf lq ng lu my mz na nb bi translated">K-Means模型有哪些特定的条件/优化？</li><li id="7125" class="mt mu it lb b lc nc lf nd li ne lm nf lq ng lu my mz na nb bi translated">考虑3、4或5个集群会有什么结果？</li><li id="a734" class="mt mu it lb b lc nc lf nd li ne lm nf lq ng lu my mz na nb bi translated">如果我们只相信得分的中间四分位数而不相信原始值，会有什么结果？</li></ul></div><div class="ab cl ns nt hx nu" role="separator"><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx"/></div><div class="im in io ip iq"><p id="bcfa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您喜欢这篇文章，并希望在未来文章发布时得到通知，请随时<a class="ae ky" href="https://mickael-andrieu.medium.com/" rel="noopener">关注我</a>并添加一些掌声！</p></div></div>    
</body>
</html>