<html>
<head>
<title>Content Delivery Network: What You Need to Know</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">内容交付网络:你需要知道什么</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/content-delivery-network-what-you-need-to-know-c404c7330991?source=collection_archive---------19-----------------------#2022-09-08">https://levelup.gitconnected.com/content-delivery-network-what-you-need-to-know-c404c7330991?source=collection_archive---------19-----------------------#2022-09-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="4157" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">了解CDN的工作原理</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/7412d498c3667a3b3bfb95b8fde13425.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qFgPdvAkM8BGxfodnsb_bQ.jpeg"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">照片由<a class="ae le" href="https://unsplash.com/@bracht?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">法比奥·布拉克特</a>在<a class="ae le" href="https://unsplash.com/s/photos/connection?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="472a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">今天，我们将讨论内容交付网络(cdn)。CDN是边缘服务器的分布式网络，有助于向全球用户交付web内容。</p><p id="e2e4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">传统上，大多数公司依赖于单个原始服务器，并对其进行水平扩展以支持其用户群。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi lf"><img src="../Images/08e3f6d825e29d374c943b3f76aec549.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Biu2Mzit5fmPPN6hznKymw.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">作者图片</figcaption></figure><p id="31df" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">对于远离原始服务器的用户来说，这种结构会导致额外的分组丢失、延迟和抖动。如果需要多次往返才能生成完整的web内容，这可能会成为一个大问题。此外，装载时间的增加往往会赶走客户，导致转化率降低。</p></div><div class="ab cl lg lh hx li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="im in io ip iq"><h1 id="e0d7" class="ln lo it bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">内容交付网络</h1><p id="9541" class="pw-post-body-paragraph jq jr it js b jt ml jv jw jx mm jz ka kb mn kd ke kf mo kh ki kj mp kl km kn im bi translated"><a class="ae le" href="https://docs.microsoft.com/en-us/azure/cdn/cdn-overview" rel="noopener ugc nofollow" target="_blank"> CDN </a>架构的概念是让内容更贴近用户，不管他们在哪里。</p><p id="3717" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">CDN背后的基本概念是多个物理节点分布在世界各地，为最近的用户提供高带宽的缓存内容。这些节点被称为存在点<a class="ae le" href="https://en.wikipedia.org/wiki/Point_of_presence" rel="noopener ugc nofollow" target="_blank"> </a> ( <a class="ae le" href="https://en.wikipedia.org/wiki/Point_of_presence" rel="noopener ugc nofollow" target="_blank"> POP </a>)。至于动态内容，大多数CDN提供商利用某种形式的网络和路由优化来自动将流量重新路由到最近的POP。</p><p id="f211" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">此外，CDN提供商还利用某些形式的图像/视频优化或压缩来提供海量的媒体相关内容。这就是为什么你上传到YouTube的视频最初默认为360p的质量。处理内容并将其分发到所有边缘服务器需要时间。然后，基于用户位置和带宽，它被缓存作为对用户的服务。较高质量的视频通常需要几个小时才能以相同的分辨率提供给用户。</p><p id="27fb" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">使用CDN的主要目的是:</p><ul class=""><li id="72cf" class="mq mr it js b jt ju jx jy kb ms kf mt kj mu kn mv mw mx my bi translated">减少加载时间和延迟</li><li id="1ccd" class="mq mr it js b jt mz jx na kb nb kf nc kj nd kn mv mw mx my bi translated">防止服务器过载并确保更好的可靠性</li><li id="e3e9" class="mq mr it js b jt mz jx na kb nb kf nc kj nd kn mv mw mx my bi translated">提高安全性并减少任何DDoS攻击</li></ul><p id="99f0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">下图概述了cdn的工作原理。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ne"><img src="../Images/650c7ee1a23518bc221cd628cf5b72a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fhM_ZqLQr6OjOFiGda6ZjA.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">作者图片</figcaption></figure><h2 id="b85a" class="nf lo it bd lp ng nh dn lt ni nj dp lx kb nk nl mb kf nm nn mf kj no np mj nq bi translated">减少加载时间和延迟</h2><p id="d0c8" class="pw-post-body-paragraph jq jr it js b jt ml jv jw jx mm jz ka kb mn kd ke kf mo kh ki kj mp kl km kn im bi translated">CDN架构不是直接为用户服务，而是将内容分发到位于不同位置的多个边缘服务器。然后，根据用户的位置向他们提供内容。这大大减少了加载时间和延迟，因为内容来自最近的服务器。</p><h2 id="e7b6" class="nf lo it bd lp ng nh dn lt ni nj dp lx kb nk nl mb kf nm nn mf kj no np mj nq bi translated">防止服务器过载</h2><p id="db12" class="pw-post-body-paragraph jq jr it js b jt ml jv jw jx mm jz ka kb mn kd ke kf mo kh ki kj mp kl km kn im bi translated">边缘服务器能够在将相同的内容提供给用户之前对其进行缓存。当用户请求特定的web内容时，在从源服务器请求之前，每个边缘服务器检查他们在边缘中是否有该文件。</p><p id="ef6d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">该文件通常作为缓存保留在边缘服务器中，直到底层生存时间(<a class="ae le" href="https://en.wikipedia.org/wiki/Time_to_live" rel="noopener ugc nofollow" target="_blank"> TTL </a>)到期。通常的有效期是七天左右。</p><p id="ca20" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">边缘服务器一次又一次地重复使用同一个缓存，为请求同一个文件的多个用户提供服务。这大大降低了源服务器的负载，提供了更好的用户体验。</p><h2 id="1803" class="nf lo it bd lp ng nh dn lt ni nj dp lx kb nk nl mb kf nm nn mf kj no np mj nq bi translated">更好的安全性</h2><p id="620c" class="pw-post-body-paragraph jq jr it js b jt ml jv jw jx mm jz ka kb mn kd ke kf mo kh ki kj mp kl km kn im bi translated">由于用户访问最近的边缘服务器，而不是原始服务器，每个独立的边缘服务器充当一个层，可以减轻<a class="ae le" href="https://en.wikipedia.org/wiki/Denial-of-service_attack" rel="noopener ugc nofollow" target="_blank"> DDoS </a>攻击。这可以保护源服务器不被恶意用户关闭或访问。</p><h2 id="15a9" class="nf lo it bd lp ng nh dn lt ni nj dp lx kb nk nl mb kf nm nn mf kj no np mj nq bi translated">CDN中断</h2><p id="aa3e" class="pw-post-body-paragraph jq jr it js b jt ml jv jw jx mm jz ka kb mn kd ke kf mo kh ki kj mp kl km kn im bi translated">然而，CDN提供商也容易出现中断和停机。例如，2021年6月8日发生了大规模停电，导致许多主要网络和在线服务中断。受影响最大的公司是:</p><ul class=""><li id="faba" class="mq mr it js b jt ju jx jy kb ms kf mt kj mu kn mv mw mx my bi translated">葫芦</li><li id="7eeb" class="mq mr it js b jt mz jx na kb nb kf nc kj nd kn mv mw mx my bi translated">美国有线新闻网；卷积神经网络</li><li id="8e5f" class="mq mr it js b jt mz jx na kb nb kf nc kj nd kn mv mw mx my bi translated">《纽约时报》</li><li id="c753" class="mq mr it js b jt mz jx na kb nb kf nc kj nd kn mv mw mx my bi translated">《卫报》</li><li id="c93e" class="mq mr it js b jt mz jx na kb nb kf nc kj nd kn mv mw mx my bi translated">推趣</li><li id="a134" class="mq mr it js b jt mz jx na kb nb kf nc kj nd kn mv mw mx my bi translated">Reddit</li><li id="cdca" class="mq mr it js b jt mz jx na kb nb kf nc kj nd kn mv mw mx my bi translated">Spotify</li><li id="7bb9" class="mq mr it js b jt mz jx na kb nb kf nc kj nd kn mv mw mx my bi translated">Vimeo</li><li id="9e98" class="mq mr it js b jt mz jx na kb nb kf nc kj nd kn mv mw mx my bi translated">拼趣</li><li id="f08b" class="mq mr it js b jt mz jx na kb nb kf nc kj nd kn mv mw mx my bi translated">HBO Max</li></ul><p id="f642" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">一项<a class="ae le" href="https://edition.cnn.com/2021/06/09/tech/fastly-internet-outage/index.html" rel="noopener ugc nofollow" target="_blank">调查</a>显示问题出在CDN提供商Fastly身上。他们在2021年5月12日应用了一个软件更新，其中包含一个可能由客户在配置服务时触发的错误。结果，他们的大部分网络在那一天返回错误，导致整个网络服务的巨大中断。幸运的是，一个小时后问题被修复，所有依赖的服务都恢复了。</p></div><div class="ab cl lg lh hx li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="im in io ip iq"><h1 id="d57e" class="ln lo it bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">部署策略</h1><h2 id="9752" class="nf lo it bd lp ng nh dn lt ni nj dp lx kb nk nl mb kf nm nn mf kj no np mj nq bi translated">数据版本化</h2><p id="e4d7" class="pw-post-body-paragraph jq jr it js b jt ml jv jw jx mm jz ka kb mn kd ke kf mo kh ki kj mp kl km kn im bi translated">拥有适当的数据版本控制是必不可少的。它确保当出现导致应用程序功能出现重大问题的编码问题时，您可以轻松地回滚到以前的工作状态。您可能需要对旧版本和新版本使用不同的CDN实例，以防止出现问题，例如单个CDN实例从其缓存中提供旧内容。</p><h2 id="eb95" class="nf lo it bd lp ng nh dn lt ni nj dp lx kb nk nl mb kf nm nn mf kj no np mj nq bi translated">捆绑和缩小</h2><p id="bf19" class="pw-post-body-paragraph jq jr it js b jt ml jv jw jx mm jz ka kb mn kd ke kf mo kh ki kj mp kl km kn im bi translated">您可以通过捆绑和缩小来减少内容的文件大小，从而减少加载时间。这通常用于CSS和JavaScript等文件，在不改变底层功能的情况下删除不必要的字符。</p><h2 id="1446" class="nf lo it bd lp ng nh dn lt ni nj dp lx kb nk nl mb kf nm nn mf kj no np mj nq bi translated">文件压缩</h2><p id="726a" class="pw-post-body-paragraph jq jr it js b jt ml jv jw jx mm jz ka kb mn kd ke kf mo kh ki kj mp kl km kn im bi translated">除此之外，另一个选择是在发送给CDN提供商或客户之前压缩文件。由于减小了文件大小，这大大提高了性能。确保不要过度使用它，一些CDN提供商不鼓励在MP3、MP4、ZIP或JPG等压缩格式文件上使用这种技术。</p><p id="3f4b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">一些CDN提供商通过缓存仅支持静态内容，而大型CDN提供商，如Azure，可以处理静态内容(S3存储)和动态内容(S1威瑞森，阿卡迈S2)。话虽如此，截至目前还不支持与Azure Data Lake的集成。</p><blockquote class="nr ns nt"><p id="47f1" class="jq jr nu js b jt ju jv jw jx jy jz ka nv kc kd ke nw kg kh ki nx kk kl km kn im bi translated">存储和数据湖是两个不同的概念。存储是指云上存储结构化有用数据的文件系统服务。您可以将数据上传并保存到云中，而不是存储在本地。然后，您可以轻松地在您的终端应用程序上提供它。</p><p id="c2dd" class="jq jr nu js b jt ju jv jw jx jy jz ka nv kc kd ke nw kg kh ki nx kk kl km kn im bi translated">数据湖是一个集中的存储库，可以存储任何规模的所有形式的数据。数据可以是结构化的，也可以是非结构化的。你可以把它想象成原始数据的垃圾场。然后，您可以根据需要访问和处理数据。它主要用于大数据、实时分析和存储机器学习训练数据</p></blockquote></div><div class="ab cl lg lh hx li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="im in io ip iq"><h1 id="ee09" class="ln lo it bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">结论</h1><p id="e112" class="pw-post-body-paragraph jq jr it js b jt ml jv jw jx mm jz ka kb mn kd ke kf mo kh ki kj mp kl km kn im bi translated">让我们回顾一下你今天所学的内容。</p><p id="1315" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">本文首先简要介绍了CDNs以及通过传统方法提供内容时面临的问题。然后，它转移到CDN背后的基本概念及其提供的优势。</p><p id="367f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">最后，它讨论了CDN提供商如何避免中断，以及不同提供商在提供静态和动态内容时的差异。</p><p id="ef0b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">感谢阅读。祝你有美好的一天！</p></div><div class="ab cl lg lh hx li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="im in io ip iq"><h1 id="27ee" class="ln lo it bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">参考</h1><ol class=""><li id="7722" class="mq mr it js b jt ml jx mm kb ny kf nz kj oa kn ob mw mx my bi translated"><a class="ae le" href="https://en.wikipedia.org/wiki/Content_delivery_network" rel="noopener ugc nofollow" target="_blank">维基百科——内容交付网络</a></li><li id="16a9" class="mq mr it js b jt mz jx na kb nb kf nc kj nd kn ob mw mx my bi translated"><a class="ae le" href="https://www.sciencedirect.com/topics/computer-science/content-delivery-network" rel="noopener ugc nofollow" target="_blank">科学指导——内容交付网络</a></li><li id="d1e8" class="mq mr it js b jt mz jx na kb nb kf nc kj nd kn ob mw mx my bi translated"><a class="ae le" href="https://edition.cnn.com/2021/06/09/tech/fastly-internet-outage/index.html" rel="noopener ugc nofollow" target="_blank">美国有线电视新闻网——快速网络中断</a></li></ol></div><div class="ab cl lg lh hx li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="im in io ip iq"><h1 id="a6ae" class="ln lo it bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">分级编码</h1><p id="b7a5" class="pw-post-body-paragraph jq jr it js b jt ml jv jw jx mm jz ka kb mn kd ke kf mo kh ki kj mp kl km kn im bi translated">感谢您成为我们社区的一员！在你离开之前:</p><ul class=""><li id="06f0" class="mq mr it js b jt ju jx jy kb ms kf mt kj mu kn mv mw mx my bi translated">👏为故事鼓掌，跟着作者走👉</li><li id="e3d0" class="mq mr it js b jt mz jx na kb nb kf nc kj nd kn mv mw mx my bi translated">📰查看<a class="ae le" href="https://levelup.gitconnected.com/?utm_source=pub&amp;utm_medium=post" rel="noopener ugc nofollow" target="_blank">升级编码出版物</a>中的更多内容</li><li id="4c13" class="mq mr it js b jt mz jx na kb nb kf nc kj nd kn mv mw mx my bi translated">🔔关注我们:<a class="ae le" href="https://twitter.com/gitconnected" rel="noopener ugc nofollow" target="_blank">Twitter</a>|<a class="ae le" href="https://www.linkedin.com/company/gitconnected" rel="noopener ugc nofollow" target="_blank">LinkedIn</a>|<a class="ae le" href="https://newsletter.levelup.dev" rel="noopener ugc nofollow" target="_blank">时事通讯</a></li></ul><p id="3920" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">🚀👉<a class="ae le" href="https://jobs.levelup.dev/talent/welcome?referral=true" rel="noopener ugc nofollow" target="_blank"> <strong class="js iu">加入升级人才集体，找到一份神奇的工作</strong> </a></p></div></div>    
</body>
</html>