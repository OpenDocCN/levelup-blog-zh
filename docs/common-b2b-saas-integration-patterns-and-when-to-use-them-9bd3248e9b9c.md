# 常见的 B2B SaaS 集成模式以及何时使用它们

> 原文：<https://levelup.gitconnected.com/common-b2b-saas-integration-patterns-and-when-to-use-them-9bd3248e9b9c>

![](img/beff3b2e7597cfc328cce6cb5f106236.png)

根据最近的一项调查，SaaS 公司的数量已经增长到全球超过 25，000 家。一般来说，订阅 SaaS 产品的企业与多家 SaaS 供应商合作，并期望这些应用程序能够相互集成。为了解决这个问题，一些 SaaS 公司在其应用程序中构建定制集成，而其他公司则采用[嵌入式集成平台](http://prismatic.io/)来满足客户的集成需求。

不管你采用什么方法来集成你的应用程序，你会发现大多数集成都符合一些常见的模式。了解这些模式将有助于你发现自己正在进行一个集成项目，刚刚开始构建你的 API，或者在计划一个新的 SaaS 应用的早期。

在本帖中，我们将简要分析这些模式，并了解每种模式的优点。

# 通用集成模式

*   **事件驱动** —一个 app 中发生事件，导致数据被发送到另一个 app。事件可能在您的应用程序中，也可能在您正在集成的第三方应用程序中。这是 SaaS 应用程序之间最常见的集成类型。
*   **Scheduled** —按照固定时间表(每分钟、每小时、每天等)运行的集成。)这些集成包括导出(如重复性报告)和导入(如轮询 API 以请求数据导入到您的应用程序)。计划集成通常用于 SaaS 应用程序和非 SaaS 应用程序之间。
*   **同步** —一个应用程序发出一个请求，然后等待集成完成并响应一个回答。由于时间的原因，这可能是最难成功实现的集成类型。它不像事件驱动和计划集成模式那样经常使用。
*   **混合** —这个与其说是一个模式，不如说是其他模式的组合。

# 事件驱动的集成

这可能是 SaaS 应用程序最常见的集成类型。当源系统中发生事件时(例如，在 CRM 中更新客户记录或在 POS 中支付发票)，有关事件的数据被发送到目标系统。

这些数据通常是通过网络钩子发送的。webhook 是对应用程序(导入集成的第三方应用程序或导出集成的您的应用程序)的事件触发请求。有效负载是由 webhook 发送到目标系统的数据。

如果源应用程序没有使用带有 webhooks 的 API，它可能使用了不同类型的发布/订阅系统，如 Amazon SNS、Apache Kafka，甚至电子邮件。在这些情况下，目标应用程序订阅这些系统提供的内容。

事件驱动 API 的一个很好的例子是 GitHub，它有各种各样的事件可以触发 webhook 。GitHub 还提供了通过每个 webhook 发送的有效负载的形状。当您与 GitHub 集成时，您将创建[端点来接收这些有效负载](https://docs.github.com/en/rest/reference/webhooks#create-a-repository-webhook)。

如果您希望确保数据能够快速传输，事件驱动的 API 能够在多个集成中重用，并且第三方开发人员能够轻松构建与您的应用程序的集成，那么您肯定希望设置您的应用程序和 API 来支持 webhooks。

在接下来的小节中，我们将看看各种事件驱动的集成。

# 事件驱动的导入集成

事件驱动的导入集成是基于第三方应用中的一个或多个事件将数据从第三方应用导入到您的应用。该集成可以具有单个有效载荷或多个有效载荷。在集成中，一个有效负载可能会通过一个活动序列(一个流)，或者它可能会通过多个流或分支逻辑进行过滤或转换，然后您的应用程序才会使用这些数据。

用于导入的事件驱动集成的关键是第三方应用发布数据(通过 webhooks 或另一个发布/订阅系统)，而您的应用订阅该数据。

# 事件驱动的导出集成

事件驱动的导出集成是基于应用中的一个或多个事件将数据从应用导出到第三方应用。与导入集成一样，您可以处理单个有效负载或多个有效负载。并且逻辑可以是简单的(单个流程)或复杂的(多个流程)。

用于导出的事件驱动集成的关键是您的应用程序发布数据(通过 webhooks 或另一个发布/订阅系统)，第三方应用程序订阅该数据。

# 事件驱动的双向集成

事件驱动的双向集成将导入和导出功能融合到一个集成中。导入部分将有它自己的逻辑，导出部分将有单独的逻辑，但是一切都包含在一个集成中。双向集成可以分为单独的导入和导出集成，但是它们通常被组合在一起以提供简单的部署和支持流程。

在事件驱动的双向集成中，您的应用程序和第三方应用程序都是发布者和订阅者。

# 计划集成

当您需要从中传输数据的系统没有 webhooks 或您可以订阅的其他发布/订阅系统时，您需要使用一个预定的集成。计划的集成可以是导入或导出。计划集成不是在集成收到通知时触发，而是在特定时间或时间间隔触发。您的集成可以查询数据，然后将数据发送到另一个应用程序、数据存储系统或消息系统，如 Slack、电子邮件或 SMS。

对于经常重复出现的计划集成，数据可能只有一两分钟，但不会像事件驱动集成中的数据那样新。

在接下来的部分中，我们将查看各种计划的集成。

# 计划的数据导入集成

您需要一个预定的集成来从没有 webhooks 或其他发布/订阅系统的第三方 API 导入数据。在这种情况下，集成必须包装包含集成将查询的数据的第三方 API 端点。然后，API 处理查询并返回请求的有效负载。

# 计划的文件导入集成

一些第三方应用程序可能配置了文件导出功能，而不是 API。这种情况更有可能发生在非 SaaS(遗留)系统中。在这种情况下，应用程序可能会将数据以 PDF、XML、CSV 或其他文件类型的形式输出到外部数据源，如 Dropbox 或 SFTP。为了导入这些数据，您将构建一个集成，根据一个常规的时间表检查位置，以查看是否有新的文件要处理。

当位置中有新数据时(例如，Dropbox 文件夹中的新 XML 文件)，您的集成将遍历每个文件，处理这些文件，然后移动或删除已处理的文件。与其他计划的集成一样，这仍然不是接近实时的，但在文件被放置到外部数据源的几分钟内可以是当前的。

# 计划的文件导出集成

当您需要生成并向客户发送定期报告时，您将使用这种类型的集成。您设置了一个集成，在该集成中，您可以查询您的 API(针对您的应用程序)或第三方 API 来获取特定数据。

数据返回后，您的集成会生成一个文件，其中包含必要格式的数据(PDF、XML、CSV 等。)最后，这个文件被打包并发送到目的地(可以是文件系统，也可以是电子邮件或 SMS)。

# 同步集成

如果您现在必须拥有来自第三方应用程序的数据，那么同步集成可能是您所需要的。这种类型的集成调用集成 URL，然后等待响应。

如果同步集成能够快速工作，并且在调用和响应之间几乎没有延迟，那么它应该能够很好地工作。但是，如果集成需要一段时间来运行(需要处理大量数据，第三方应用程序在满足请求方面速度很慢，等等)。)，集成容易受到网络断开和超时的影响。

当操作顺序很重要时，同步集成很有用。例如，如果您的销售系统收到订单，并且您将数据发送到付款处理器集成，您可能希望在将数据发送到订单执行集成之前，等待付款已成功过帐的响应。当您为这些场景构建集成时，您需要决定等待响应是否适合您，或者当支付成功异步运行时，您是否应该让支付处理系统“回电”。

# 混合集成

混合集成是其他集成类型的某种组合。举个例子，假设你的应用支持 webhooks，但是你正在使用的第三方应用只有一个没有 webhooks 的 API。因此，您可能会构建一个混合集成，从您的应用程序进行事件驱动的导出，但从第三方应用程序运行预定的数据导入。您不需要将它设置为两个独立的集成，而是能够将它们组合在同一个集成中，具有不同的流程和逻辑。

# 结论

虽然集成可以简单地定义为将数据从一个系统传输到另一个系统的软件，但是各个集成的细节可能会有很大的不同。在规划和构建您的应用程序和客户的第三方应用程序之间的集成时，考虑集成模式是至关重要的，以确保您为每个集成场景使用最佳模式。