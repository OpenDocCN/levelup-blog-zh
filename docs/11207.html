<html>
<head>
<title>What they don’t explain when migrating to react-router v6</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">迁移到react-router v6时，他们没有解释什么</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/what-they-dont-explain-when-migrating-to-react-router-v6-2e8fb63c64de?source=collection_archive---------3-----------------------#2022-02-25">https://levelup.gitconnected.com/what-they-dont-explain-when-migrating-to-react-router-v6-2e8fb63c64de?source=collection_archive---------3-----------------------#2022-02-25</a></blockquote><div><div class="fc ii ij ik il im"/><div class="in io ip iq ir"><div class=""/><div class=""><h2 id="49bb" class="pw-subtitle-paragraph jr it iu bd b js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki dk translated">如何在使用神奇的renderRoutes时迁移代码</h2></div><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/5eb5dd16e733337e44c3e7a0bed17867.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*CBDMhI0ZQDnbZ5Og"/></div></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">泰勒·卢瑟福在<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="4376" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我喜欢<a class="ae kz" href="https://reactrouter.com/" rel="noopener ugc nofollow" target="_blank">反应路由器</a>。它很容易使用，有很多功能，从v5开始他们开始使用React钩子。</p><p id="cd72" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我也喜欢从一开始就定义我的所有路线，所以我使用了他们的包<a class="ae kz" href="https://github.com/remix-run/react-router/tree/v5/packages/react-router-config" rel="noopener ugc nofollow" target="_blank"> react-router-config </a>和神奇的函数<code class="fe lw lx ly lz b">renderRoutes</code>来呈现嵌套的路线。</p><p id="8f93" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">然后v6出来了。改进看起来很棒。甚至还有一个迁移指南，乍一看似乎足够详细地介绍了如何迁移到v6，还有一个专门的部分是为像我这样使用<a class="ae kz" href="https://reactrouter.com/docs/en/v6/upgrading/v5#use-useroutes-instead-of-react-router-config" rel="noopener ugc nofollow" target="_blank"> react-router-config </a>的人准备的。</p><p id="7627" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">但是读了又读，读了又读，我找不到一篇关于如何迁移<code class="fe lw lx ly lz b">renderRoutes</code>代码的参考文献。一点风声也没有。包裹<code class="fe lw lx ly lz b">react-router-config</code>也不见了，我被卡住了。</p><p id="606a" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">现在我开始出汗了。如果我呈现嵌套路由的主要功能消失了，我该如何迁移到v6？我应该放弃我喜欢的定义路线的方式，开始使用<code class="fe lw lx ly lz b">&lt;Route /&gt;</code>或<code class="fe lw lx ly lz b">&lt;Switch /&gt;</code>吗？一定有办法的。React Router的团队不会放弃这项功能。</p><p id="eb79" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">我休息了一会儿，然后又开始查看他们的文档。我找到了这个关于路由对象的<a class="ae kz" href="https://reactrouter.com/docs/en/v6/examples/route-objects" rel="noopener ugc nofollow" target="_blank">指南</a>，它引导我找到了关于它们如何实现它的代码。然后我从他们的<a class="ae kz" href="https://github.com/remix-run/react-router/tree/main/packages/react-router-dom" rel="noopener ugc nofollow" target="_blank"> react-router-dom </a> : <code class="fe lw lx ly lz b">&lt;Outlet /&gt;</code>中看到了一个新组件。</p><p id="35dc" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">有了这些新信息，我回到迁移指南，在这里找到了对<code class="fe lw lx ly lz b">&lt;Outlet /&gt;</code> <a class="ae kz" href="https://reactrouter.com/docs/en/v6/upgrading/v5#advantages-of-route-element" rel="noopener ugc nofollow" target="_blank">的引用</a>。为什么我以前没有发现？正如我之前所说，我不使用<code class="fe lw lx ly lz b">&lt;Route /&gt;</code>来建立我的路线。</p><p id="c11a" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">在我看来，迁移指南遗漏了一个解释如何使用<code class="fe lw lx ly lz b">renderRoutes</code>更新代码的例子。至少React Router的团队应该提到过，在使用<code class="fe lw lx ly lz b">&lt;Route /&gt;</code>时，需要用和我们一样的方式来完成。</p><p id="a428" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">理想情况下，类似这样的事情会省去我很多麻烦:</p><pre class="kk kl km kn gu ma lz mb mc aw md bi"><span id="0abe" class="me mf iu lz b gz mg mh l mi mj">// define routes<br/>const Routes = () =&gt; {<br/>  const route = useRoutes([<br/>    {<br/>      element: &lt;App /&gt;,<br/>      path: '/',<br/>      children: [<br/>        {<br/>          path: '/',<br/>          element: &lt;Home /&gt;<br/>        },<br/>        {<br/>          path: '/dashboard',<br/>          element: &lt;Dashboard /&gt;<br/>        },<br/>      ]<br/>    }<br/>  ])</span><span id="391c" class="me mf iu lz b gz mk mh l mi mj">  return route<br/>}</span><span id="0f40" class="me mf iu lz b gz mk mh l mi mj">// render nested routes<br/>const App = () =&gt; {<br/>  return (<br/>    &lt;Outlet /&gt;<br/>  )<br/>}</span></pre><p id="e3f5" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">不管怎样，问题解决了，迁移到v6不再是一件痛苦的事情。</p><p id="18d0" class="pw-post-body-paragraph la lb iu lc b ld le jv lf lg lh jy li lj lk ll lm ln lo lp lq lr ls lt lu lv in bi translated">这里是对<a class="ae kz" href="https://reactrouter.com/docs/en/v6/api#outlet" rel="noopener ugc nofollow" target="_blank">出口</a>组件的API引用。</p></div></div>    
</body>
</html>