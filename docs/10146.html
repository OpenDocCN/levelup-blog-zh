<html>
<head>
<title>I Tried To Code the Engine of 1993 RPG Game Lands of Lore in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我试图用JavaScript编写1993年RPG游戏《知识之地》的引擎</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/i-tried-to-code-the-engine-of-1993-rpg-game-lands-of-lore-in-javascript-c78368d1e2f0?source=collection_archive---------8-----------------------#2021-10-30">https://levelup.gitconnected.com/i-tried-to-code-the-engine-of-1993-rpg-game-lands-of-lore-in-javascript-c78368d1e2f0?source=collection_archive---------8-----------------------#2021-10-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="a711" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">这篇文章展示了我用Vanilla JS编写Lore引擎的方法和想法。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/1797fd9fa4be1116af33d456872ced9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*COYtP5fdddrD2Pd_fi0jFA.jpeg"/></div></div></figure><p id="3b10" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><a class="ae lo" href="https://en.wikipedia.org/wiki/Westwood_Studios" rel="noopener ugc nofollow" target="_blank">韦斯特伍德工作室</a>制作的《知识之地:混乱王座是我最喜欢的游戏之一(<a class="ae lo" href="https://medium.com/@stephan.romhart/my-top-10-pc-games-f9075cfc6c30" rel="noopener">这里是我最喜欢的10款游戏</a>)。我已经玩过无数次了。</p><p id="ecab" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">2016年，我已经决定，以我当时的编程技能，我会尝试用Javascript为游戏重新编程引擎。</p><blockquote class="lp lq lr"><p id="8d40" class="kr ks ln kt b ku kv jr kw kx ky ju kz ls lb lc ld lt lf lg lh lu lj lk ll lm ij bi translated">在本文的结尾，您会找到一个到Github的链接，在那里可以下载所有的项目文件。</p></blockquote><h2 id="8b79" class="lv lw iq bd lx ly lz dn ma mb mc dp md la me mf mg le mh mi mj li mk ml mm mn bi translated">这是一个展示引擎运行的短片</h2><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mo mp l"/></div></figure><h1 id="f350" class="mq lw iq bd lx mr ms mt ma mu mv mw md jw mx jx mg jz my ka mj kc mz kd mm na bi translated">技术演示</h1><p id="811d" class="pw-post-body-paragraph kr ks iq kt b ku nb jr kw kx nc ju kz la nd lc ld le ne lg lh li nf lk ll lm ij bi translated">在下面的链接中，你可以自己测试我的游戏引擎的技术演示。注意:该引擎目前只能在桌面上用鼠标和键盘进行正确控制。</p><p id="e310" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><a class="ae lo" href="https://www.stephan-romhart.de/medium.com/land-of-lore-javascript-engine" rel="noopener ugc nofollow" target="_blank">👉Javascript中的绝杀游戏引擎(stephan-romhart.de) </a></p><p id="fb3a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">请随意阅读我的代码。😀</p></div><div class="ab cl ng nh hu ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="ij ik il im in"><h1 id="6e03" class="mq lw iq bd lx mr nn mt ma mu no mw md jw np jx mg jz nq ka mj kc nr kd mm na bi translated">技术背景</h1><p id="97cb" class="pw-post-body-paragraph kr ks iq kt b ku nb jr kw kx nc ju kz la nd lc ld le ne lg lh li nf lk ll lm ij bi translated">该引擎在HTML canvas元素中运行，并且是基于图块的。每个图块都有如下属性</p><ul class=""><li id="17b2" class="ns nt iq kt b ku kv kx ky la nu le nv li nw lm nx ny nz oa bi translated">实心:0 / 1</li><li id="46ea" class="ns nt iq kt b ku ob kx oc la od le oe li of lm nx ny nz oa bi translated">已探索:0 / 1</li><li id="7e24" class="ns nt iq kt b ku ob kx oc la od le oe li of lm nx ny nz oa bi translated">项目:[[]，[]，[]]</li><li id="7769" class="ns nt iq kt b ku ob kx oc la od le oe li of lm nx ny nz oa bi translated">纹理[100，100，100，100，100，100]</li></ul><p id="a54d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">固体定义了一个瓷砖是否可行走，探索了瓷砖是否已经显示在自动地图上。理论上，每个方块可以有四个无限堆叠物品的位置。我在纹理中定义了天花板、地板和墙壁部分。</p><p id="a78a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">要渲染视图，您需要一个查看方向。然后，循环遍历您面前深度为4的所有图块，并将纹理图形写入画布缓存，以输出组合的图像。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi og"><img src="../Images/164a756e977b7f780b6e4d08c42eed7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QxnCkWCvociOAfPjtgskWg.png"/></div></div><figcaption class="oh oi gj gh gi oj ok bd b be z dk translated">呈现视图的图形元素。</figcaption></figure><h1 id="cd97" class="mq lw iq bd lx mr ms mt ma mu mv mw md jw mx jx mg jz my ka mj kc mz kd mm na bi translated">跑步动画及其他</h1><p id="15f7" class="pw-post-body-paragraph kr ks iq kt b ku nb jr kw kx nc ju kz la nd lc ld le ne lg lh li nf lk ll lm ij bi translated">为了弄清楚韦斯特伍德在1993年是如何在瓷砖格子中奔跑的，我一帧一帧地观看了《让我们来玩知识之地》的镜头。</p><p id="9636" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">结果是，当玩家在两个瓷砖之间移动时，视图从中心开始缩放，直到缩放比例与下一个瓷砖的同一视线中的视图相对应。然后玩家位置被放置在新的牌上。</p><p id="a0fb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">当向左转或向右转时，视图被拉长，模拟一种运动模糊。</p><p id="baba" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我在动作动画上坐了整整一周，直到它们变圆。<em class="ln">我知道，对于世界上所有的年轻玩家来说，这些动画都是生涩的。</em>😂</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ol"><img src="../Images/db3a574944a9f9c3e56e24a80303be05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5o6w8IsyZ8diC6jJlD8oew.jpeg"/></div></div><figcaption class="oh oi gj gh gi oj ok bd b be z dk translated">运行引擎截图。</figcaption></figure><p id="bcfc" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">此外，我设计了一个撞击动画，当你撞到墙上或者关上的门时。当你撞到什么东西时，你失去了一点生命。</p><h1 id="b1bd" class="mq lw iq bd lx mr ms mt ma mu mv mw md jw mx jx mg jz my ka mj kc mz kd mm na bi translated">自动地图</h1><p id="5dc2" class="pw-post-body-paragraph kr ks iq kt b ku nb jr kw kx nc ju kz la nd lc ld le ne lg lh li nf lk ll lm ij bi translated">在《知识之地》中，有一张自动地图，显示了到目前为止已经探索过的地方以及你仍然可以去的地方，可以通过非棕色的外墙辨认出来。我用了大约一天的时间编写了地图渲染器。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi om"><img src="../Images/66c4a0b8f5e84f401e5b13750d5bfbfc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Hx-ZeDrmrBwELYCG2Sq3GA.jpeg"/></div></div><figcaption class="oh oi gj gh gi oj ok bd b be z dk translated">编码自动地图的屏幕截图。</figcaption></figure><p id="36f6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">对于地图，我仍然需要一个位图字体渲染器类，它可以自动将地图名称和地图的重要元素(玩家位置、门、宝箱等)写入图例。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi on"><img src="../Images/da22418c0e45716ac4f46e4c1394e203.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5L86QT9b7AACXiXfVc3uew.png"/></div></div><figcaption class="oh oi gj gh gi oj ok bd b be z dk translated">位图字体文件</figcaption></figure><h1 id="81dc" class="mq lw iq bd lx mr ms mt ma mu mv mw md jw mx jx mg jz my ka mj kc mz kd mm na bi translated">库存和项目</h1><p id="87c3" class="pw-post-body-paragraph kr ks iq kt b ku nb jr kw kx nc ju kz la nd lc ld le ne lg lh li nf lk ll lm ij bi translated">清单是一个无限滚动的功能区，您可以用鼠标填充它。可以将项目拖放到清单中，或者从清单中删除。</p><p id="eb33" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我没有成功地整合治疗药剂和角色之间的互动。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oo"><img src="../Images/a41dd4d883975bbd5d6e99bca2811960.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1JdEstMfUcqOUC80ROTBhg.jpeg"/></div></div><figcaption class="oh oi gj gh gi oj ok bd b be z dk translated">库存截图。</figcaption></figure><h1 id="e05e" class="mq lw iq bd lx mr ms mt ma mu mv mw md jw mx jx mg jz my ka mj kc mz kd mm na bi translated">互动</h1><p id="4650" class="pw-post-body-paragraph kr ks iq kt b ku nb jr kw kx nc ju kz la nd lc ld le ne lg lh li nf lk ll lm ij bi translated">除了项目之外，引擎中还集成了另外两个交互:</p><ul class=""><li id="1f68" class="ns nt iq kt b ku kv kx ky la nu le nv li nw lm nx ny nz oa bi translated">开门和关门。</li><li id="f255" class="ns nt iq kt b ku ob kx oc la od le oe li of lm nx ny nz oa bi translated">通过楼梯传送到其他地图</li></ul><p id="338f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这两个都是引擎的重要元素，我花了几周时间研究这两个特性，直到它们工作得相当好。</p><p id="c429" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">例如，当通过楼梯切换地图时，我在视口中编写了淡出和淡入动画，以使连接感觉不那么刺耳。</p><h1 id="c901" class="mq lw iq bd lx mr ms mt ma mu mv mw md jw mx jx mg jz my ka mj kc mz kd mm na bi translated">游戏编辑器</h1><p id="b981" class="pw-post-body-paragraph kr ks iq kt b ku nb jr kw kx nc ju kz la nd lc ld le ne lg lh li nf lk ll lm ij bi translated">在jQuery的帮助下(是的，这在2016年完全没问题)，我随后为自己构建了一个可以改变地图、纹理、交互和相机位置的关卡编辑器。</p><p id="8520" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">对于一次扑救，我的精神耐力已经不够了。😅</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi op"><img src="../Images/d5343d9c908bdccb397f854b7d828d15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ADGNfP9lPKbTcswU0sSaOA.jpeg"/></div></div><figcaption class="oh oi gj gh gi oj ok bd b be z dk translated">创建地图数据的游戏编辑器截图。</figcaption></figure><h1 id="1773" class="mq lw iq bd lx mr ms mt ma mu mv mw md jw mx jx mg jz my ka mj kc mz kd mm na bi translated">文件</h1><p id="00fa" class="pw-post-body-paragraph kr ks iq kt b ku nb jr kw kx nc ju kz la nd lc ld le ne lg lh li nf lk ll lm ij bi translated">总的来说，没有纹理，声音和级别数据的引擎没有达到100kb的项目大小。封装在单个文件中，最终有17个javascript文件。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oq"><img src="../Images/8610febf3c54a3481efb134a3faf2dc0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KrCcy0qOSPUZ36wR_3n-nQ.jpeg"/></div></div><figcaption class="oh oi gj gh gi oj ok bd b be z dk translated">所有使用的javascript文件</figcaption></figure><h1 id="e530" class="mq lw iq bd lx mr ms mt ma mu mv mw md jw mx jx mg jz my ka mj kc mz kd mm na bi translated">Photoshop中的纹理创建</h1><p id="e9c9" class="pw-post-body-paragraph kr ks iq kt b ku nb jr kw kx nc ju kz la nd lc ld le ne lg lh li nf lk ll lm ij bi translated">我在Photoshop中创建了所有的纹理。为半真半假的环境画几幅艺术品需要相当大的努力。为了更快地获得成功，我只是直接从传说之地中获取了一些视觉元素。<br/>我用Photoshop做了所有的图形。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi or"><img src="../Images/7a0732149723797615c13329c3c23fb8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YL6TzNcZDBTxnO9pFePT5A.jpeg"/></div></div></figure></div><div class="ab cl ng nh hu ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="ij ik il im in"><h1 id="3600" class="mq lw iq bd lx mr nn mt ma mu no mw md jw np jx mg jz nq ka mj kc nr kd mm na bi translated">为什么我停止了在引擎上的开发？</h1><p id="53f8" class="pw-post-body-paragraph kr ks iq kt b ku nb jr kw kx nc ju kz la nd lc ld le ne lg lh li nf lk ll lm ij bi translated">在发动机上工作了大约五个月之后，我简直精疲力竭了。我已经开始将NPC和敌人集成到引擎中，但我不想在碰撞检测、初级人工智能或战斗系统方面取得成功，所以我停止了这个项目的开发。</p><p id="6ae6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">总之，这个项目对我来说很有教育意义，也很有趣。也许我会重新振作起来，继续制造引擎。</p><p id="a824" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果你觉得这样的文章有趣，请告诉我。我很想听听你对我如何建造知识引擎的想法。😊</p></div><div class="ab cl ng nh hu ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="ij ik il im in"><h1 id="4afe" class="mq lw iq bd lx mr nn mt ma mu no mw md jw np jx mg jz nq ka mj kc nr kd mm na bi translated">Github链接</h1><p id="e97e" class="pw-post-body-paragraph kr ks iq kt b ku nb jr kw kx nc ju kz la nd lc ld le ne lg lh li nf lk ll lm ij bi translated"><a class="ae lo" href="https://github.com/stephan-romhart/Lands-of-Lore-Engine-in-Javascript" rel="noopener ugc nofollow" target="_blank">Stephan-rom hart/Lands-of-Lore-Engine-in-Javascript:我试图用普通的Javascript编写1993年的Westwood Studios游戏《知识之地:混乱王座》的引擎。</a>(github.com)</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi os"><img src="../Images/93a3a0aa5a7916aa7a1f4de04a613744.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pdUZD-Thypd9FTZNj2l5fA.jpeg"/></div></div></figure><p id="8c6f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">感谢阅读。<br/> </strong>期待您的反馈。😍</p><p id="b30d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">请评论、书签或关注我，支持我的频道。</p><p id="c987" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果你心中有一个特定的主题，你会希望我写下来，让我在推特上知道:<a class="ae lo" href="https://www.twitter.com/@stephan_romhart" rel="noopener ugc nofollow" target="_blank">https://www.twitter.com/@stephan_romhart</a></p></div></div>    
</body>
</html>