<html>
<head>
<title>Handling Dynamic Routes with Vue Router</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Vue路由器处理动态路由</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/handling-dynamic-routes-with-vue-router-vuejs-tutorial-9fb4892d3ba5?source=collection_archive---------3-----------------------#2019-11-11">https://levelup.gitconnected.com/handling-dynamic-routes-with-vue-router-vuejs-tutorial-9fb4892d3ba5?source=collection_archive---------3-----------------------#2019-11-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/8326ca3d2b1df134b65f04a51b38dda9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*uMeaxw4tomh7Opcn"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">卢克·切瑟在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="fde8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">没有人会记得这个url，<code class="fe le lf lg lh b">http://yourwebsite.com/product/item-advxv12323-asdfa123</code>——所以让我们把它转换成更好的东西。</p><p id="692d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">虽然Vue Router非常简单，但我经常发现自己在构建不同应用程序时面临的一个问题是试图为页面创建更漂亮的路径。</p><p id="921e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">本文假设您已经了解Vue路由器的基础知识。只要你能使用默认的Vue路由器选项设置你的Vue项目(就像我的ToDo应用教程<em class="li"> *wink* </em>)你就有了一个很好的起点。</p><p id="705b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">本文将向您展示如何获取URL路径中的值并将其传递给Vue组件，从而允许您处理动态路由。</p><h1 id="8e58" class="lj lk it bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">概观</h1><p id="9e13" class="pw-post-body-paragraph kg kh it ki b kj mh kl km kn mi kp kq kr mj kt ku kv mk kx ky kz ml lb lc ld im bi translated">我要用的例子是产品页面。本质上，我们所要做的就是利用Vue路由器捕捉动态路由的能力，并将其作为道具传递给Vue组件。然后，我们可以分析URL来确定它是否与现有产品匹配。如果是的话，让我们展示产品；否则，重定向到404页面。</p><h1 id="9b2e" class="lj lk it bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">设置组件</h1><p id="b5e9" class="pw-post-body-paragraph kg kh it ki b kj mh kl km kn mi kp kq kr mj kt ku kv mk kx ky kz ml lb lc ld im bi translated">我们需要添加两个组件:</p><ul class=""><li id="3012" class="mm mn it ki b kj kk kn ko kr mo kv mp kz mq ld mr ms mt mu bi translated">产品页面</li><li id="f655" class="mm mn it ki b kj mv kn mw kr mx kv my kz mz ld mr ms mt mu bi translated">404页。</li></ul><p id="ec29" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我不打算深入探讨页面的设计，我们只需要它们存在的导航目的。以下是我使用的示例页面。</p><h2 id="ba65" class="na lk it bd ll nb nc dn lp nd ne dp lt kr nf ng lx kv nh ni mb kz nj nk mf nl bi translated">产品. vue</h2><pre class="nm nn no np gt nq lh nr ns aw nt bi"><span id="929e" class="na lk it lh b gy nu nv l nw nx">&lt;template lang="html"&gt;<br/>  &lt;div&gt;<br/>    Product Displayed: {{ product }}<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="53d2" class="na lk it lh b gy ny nv l nw nx">&lt;script&gt;<br/>export default {<br/>  props: ["product-path"],<br/>  data () {<br/>    return {<br/>      product: {}<br/>    }<br/>  },<br/>  created () {<br/>   // look up the product</span><span id="a8c2" class="na lk it lh b gy ny nv l nw nx">   // if it exists, proceed<br/>  }<br/>}<br/>&lt;/script&gt;</span><span id="4a74" class="na lk it lh b gy ny nv l nw nx">&lt;style lang="scss"&gt;<br/>&lt;/style&gt;</span></pre><h2 id="a4af" class="na lk it bd ll nb nc dn lp nd ne dp lt kr nf ng lx kv nh ni mb kz nj nk mf nl bi translated"><code class="fe le lf lg lh b">PageNotFound.vue</code></h2><pre class="nm nn no np gt nq lh nr ns aw nt bi"><span id="4443" class="na lk it lh b gy nu nv l nw nx">&lt;template lang="html"&gt;<br/>  &lt;div&gt;<br/>    Error - Page Not Found<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="e9a6" class="na lk it lh b gy ny nv l nw nx">&lt;script&gt;<br/>export default {<br/>}<br/>&lt;/script&gt;</span><span id="18a7" class="na lk it lh b gy ny nv l nw nx">&lt;style lang="scss"&gt;<br/>&lt;/style&gt;</span></pre><h1 id="9259" class="lj lk it bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">配置Vue路由器</h1><p id="704d" class="pw-post-body-paragraph kg kh it ki b kj mh kl km kn mi kp kq kr mj kt ku kv mk kx ky kz ml lb lc ld im bi translated">设置Vue路由器非常容易，我们只需添加两条路由，以便映射到我们的两个组件。</p><p id="0fd3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">首先，更容易添加的是404页面。只需将这段代码添加到您的routes数组中。</p><pre class="nm nn no np gt nq lh nr ns aw nt bi"><span id="2c06" class="na lk it lh b gy nu nv l nw nx">{<br/>      path: '/404',<br/>      name: '404',<br/>      component: () =&gt;<br/>        import('./views/PageNotFound.vue')<br/>}</span></pre><p id="50de" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在是稍微复杂一点的(仍然很简单，不要担心)，它允许动态URL和参数。这与从Node.js中的URL获取参数遵循相同的模式，因此如果您对此有所了解，这应该是一件轻而易举的事情。如果你不这样做，你会很快看到它是如何工作的。</p><p id="e606" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">正确地将参数从Vue路由器传递到组件的唯一区别是，我们需要在这个路由中指定<code class="fe le lf lg lh b">props: true</code>。</p><p id="23ba" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这条路线的完整代码如下所示。</p><pre class="nm nn no np gt nq lh nr ns aw nt bi"><span id="62bc" class="na lk it lh b gy nu nv l nw nx">{<br/>    path: "/:product",<br/>    name: "Product",<br/>    props: true,<br/>    component: () =&gt; import("../views/Product.vue")<br/>}</span></pre><p id="8082" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">路径中的冒号表示该路由将选取所有匹配该模式的路径。换句话说，可以有任何不匹配另一个路由的字符串，而不是<code class="fe le lf lg lh b">:product</code>。由于我们将props设置为true，该字符串将作为名为<code class="fe le lf lg lh b">product</code>的属性传递给<code class="fe le lf lg lh b">Product.vue</code>组件。</p><h1 id="560c" class="lj lk it bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">示例实现</h1><p id="c64d" class="pw-post-body-paragraph kg kh it ki b kj mh kl km kn mi kp kq kr mj kt ku kv mk kx ky kz ml lb lc ld im bi translated">现在我们有了映射到产品组件的所有动态路由，最后一步是确定何时我们有了实际的产品，何时我们需要重定向到404页面。</p><p id="4ef8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在完整的应用程序中，这通常是到某个数据库的连接，该数据库包含URL路径和产品之间的查找。然而，我认为没有必要在这里展示，因为我们只是主要关注这个问题的Vue路由器部分。</p><p id="0f75" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了模拟这一点，我简单地将一个查找表硬编码到<code class="fe le lf lg lh b">Product.vue</code>中</p><p id="3630" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在<code class="fe le lf lg lh b">created</code>钩子中，我们首先查找当前的URL路径是否映射到有效的产品。如果有，就展示出来。否则，我们使用命令<code class="fe le lf lg lh b">this.$router.push(“/404”)</code>将用户重定向到404页面。</p><pre class="nm nn no np gt nq lh nr ns aw nt bi"><span id="37f5" class="na lk it lh b gy nu nv l nw nx">// Product.vue</span><span id="3eea" class="na lk it lh b gy ny nv l nw nx">&lt;script&gt;<br/>const products = [<br/>  {<br/>    path: "example-product-1",<br/>    product: {name: "Product 1", price: 500}<br/>  },<br/>  {<br/>    path: "example-product-2",<br/>    product: {name: "Product 2", price: 1000}<br/>  },<br/>  {<br/>    path: "example-product-3",<br/>    product: {name: "Product 3", price: 1500}<br/>  }<br/>]<br/>export default {<br/>  props: ["productPath"],<br/>  data () {<br/>    return {<br/>      product: {}<br/>    }<br/>  },<br/>  created () {<br/>   // look up the product<br/>   const foundProduct = products.filter(product =&gt; {<br/>     return product.path === this.productPath<br/>   });</span><span id="75a9" class="na lk it lh b gy ny nv l nw nx">// if it exists, proceed<br/>   if (foundProduct.length &gt; 0) {<br/>     this.product = foundProduct;<br/>   } else {<br/>     // otherwise, go to the 404 page<br/>     this.$router.push("/404");<br/>   }<br/>  }<br/>}<br/>&lt;/script&gt;</span></pre><p id="bd30" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在你知道了！这是将属性从路由传递到Vue组件并使用该信息来确定路由是否有效的基础。</p><p id="81cb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你想看我的示例代码，你可以在<a class="ae kf" href="https://github.com/matthewmaribojoc/vue-router-tutorial" rel="noopener ugc nofollow" target="_blank"> Github </a>上查看。</p><h1 id="752c" class="lj lk it bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">扩展它的方法</h1><p id="ec0e" class="pw-post-body-paragraph kg kh it ki b kj mh kl km kn mi kp kq kr mj kt ku kv mk kx ky kz ml lb lc ld im bi translated">当然，这只是一个简单的教程，向您展示如何在Vue路由器中使用动态路由。这里有几个方法可以让它变得更高级。</p><ul class=""><li id="5ba8" class="mm mn it ki b kj kk kn ko kr mo kv mp kz mq ld mr ms mt mu bi translated">实现数据库连接。</li><li id="1274" class="mm mn it ki b kj mv kn mw kr mx kv my kz mz ld mr ms mt mu bi translated">您可以实现条件组件呈现，以便能够处理不仅仅是产品(或任何其他类型的需要动态URL的对象)。这可以通过使用<code class="fe le lf lg lh b">&lt;component :is=''&gt;</code>标签来完成。</li></ul><h1 id="e4ae" class="lj lk it bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">额外阅读</h1><p id="b5dc" class="pw-post-body-paragraph kg kh it ki b kj mh kl km kn mi kp kq kr mj kt ku kv mk kx ky kz ml lb lc ld im bi translated">如果您对更高级的vue路由器功能感兴趣，那么<a class="ae kf" href="https://router.vuejs.org/guide/essentials/passing-props.html" rel="noopener ugc nofollow" target="_blank">文档</a>非常棒！在Vue路由器中，您可以做很多事情来消除不必要的重定向。</p></div><div class="ab cl nz oa hx ob" role="separator"><span class="oc bw bk od oe of"/><span class="oc bw bk od oe of"/><span class="oc bw bk od oe"/></div><div class="im in io ip iq"><p id="d0fe" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><a class="ae kf" href="https://learnvue.co/vue-3-essentials-cheatsheet/" rel="noopener ugc nofollow" target="_blank">如果你有兴趣了解更多关于Vue 3的知识，请下载我的免费Vue 3备忘单，里面有一些基本知识，比如合成API、Vue 3模板语法和事件处理。</a></p></div></div>    
</body>
</html>