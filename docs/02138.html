<html>
<head>
<title>Object Labelling Tool on Vue.js (Part 3: Labelling)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Vue.js上的对象标记工具(第3部分:标记)</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/object-labelling-tool-on-vue-js-part-3-labelling-f15d4c482143?source=collection_archive---------17-----------------------#2020-02-20">https://levelup.gitconnected.com/object-labelling-tool-on-vue-js-part-3-labelling-f15d4c482143?source=collection_archive---------17-----------------------#2020-02-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="cdba" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在是时候继续讨论这个问题了。标签是我们在这里的目的。让我们开门见山吧。</p><p id="72de" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你需要了解我们如何在Vue中绘制方框，请从第1部分开始。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/85646a4ef539c55005c366c0bb74a923.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GDvaStxhSw7qWV80RizfVg.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated">这就是我们要通过这种方式实现的目标</figcaption></figure><p id="c821" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先，我们需要给Box组件添加“标签”属性。</p><pre class="kn ko kp kq gt lc ld le lf aw lg bi"><span id="81ba" class="lh li iq ld b gy lj lk l ll lm">&lt;template&gt;<br/>    &lt;div class="box-wrapper"&gt;<br/>        <strong class="ld ir">&lt;div class="label"<br/>             v-if="bLabel"<br/>             :style="{<br/>                 top: (bTop - 10) + 'px', <br/>                 left: bLeft + 'px', <br/>                 width: (bWidth + 4) + 'px'}"&gt;<br/>            {{ bLabel }}<br/>        &lt;/div&gt;</strong><br/>        &lt;a class="box-delete"<br/>           v-on:click="removeMyself"<br/>           v-if="bActive"<br/>           :style="{<br/>               top: (bTop - 18) +'px',<br/>               left: (bLeft + bWidth) + 'px'<br/>               }"&gt;<br/>            x<br/>        &lt;/a&gt;<br/>        &lt;div class="box" :style="{<br/>                 top: bTop + 'px',<br/>                 left: bLeft + 'px',<br/>                 width: bWidth + 'px',<br/>                 height: bHeight + 'px'<br/>             }"<br/>             v-bind:class="{'active': bActive}"<br/>             @mousedown="selectBox"<br/>        &gt;<br/>        &lt;/div&gt;<br/>    &lt;/div&gt;<br/>&lt;/template&gt;<br/><br/>&lt;script&gt;<br/>    export default {<br/>        name: "Box",<br/>        props: [<br/>            'b-top', 'b-left', 'b-width', 'b-height', <strong class="ld ir">'b-label',</strong><br/>            'on-select', 'b-active', 'b-index', 'on-delete'<br/>        ],<br/>        methods: {<br/>            selectBox() {<br/>                this.onSelect(this.bIndex)<br/>            },<br/>            removeMyself() {<br/>                this.onDelete(this.bIndex)<br/>            },<br/>        }<br/>    }<br/>&lt;/script&gt;<br/><br/>&lt;style lang="scss" scoped&gt;<br/>    .box {<br/>        position: absolute;<br/>        border: 2px #90ee90 solid;<br/><br/>        &amp;:hover, &amp;.active {<br/>            background-color: rgba(144, 238, 144, .2);<br/>        }<br/><br/>        z-index: 3;<br/>    }<br/>    <strong class="ld ir">.label {<br/>        position: absolute;<br/>        height: 22px;<br/>        font-size: 16px;<br/>        color: #000;<br/>        font-weight: bold;<br/>        background-color: #90ee90;<br/>        z-index: 4;<br/>    }</strong><br/>    .box-delete {<br/>        position: absolute;<br/>        z-index: 6;<br/>        font-weight: bold;<br/>        color: red;<br/>        cursor: pointer;<br/>        font-size: 24px;<br/>        font-weight: bold;<br/>    }<br/>&lt;/style&gt;</span></pre><p id="c76c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以现在每个盒子都有属性“label ”,我们将输入内容为每个盒子插入一个标签。这是完整的应用程序代码，突出显示了新行。</p><pre class="kn ko kp kq gt lc ld le lf aw lg bi"><span id="0a88" class="lh li iq ld b gy lj lk l ll lm">&lt;template&gt;<br/>    &lt;div id="app"&gt;<br/>        <strong class="ld ir">&lt;div id="label-bar"&gt;<br/>            &lt;h4&gt;Your boxes&lt;/h4&gt;<br/>            &lt;ul&gt;<br/>                &lt;li v-for="(<em class="ln">box</em>, <em class="ln">i</em>) in boxes" :key="<em class="ln">i</em>" <br/>                    v-bind:class="{'active': <em class="ln">i</em>===activeBoxIndex}"&gt;<br/>                    &lt;input v-model="<em class="ln">box</em>.label" <br/>                           v-on:click="makeBoxActive(<em class="ln">i</em>)"/&gt;<br/>                    &lt;a @click="removeBox(<em class="ln">i</em>)"&gt;x&lt;/a&gt;<br/>                &lt;/li&gt;<br/>            &lt;/ul&gt;<br/>        &lt;/div&gt;</strong><br/>        &lt;div id="image-wrapper" :style="{backgroundImage: `url(caterpillar.jpg)`}"<br/>             @mousedown="startDrawingBox"<br/>             @mousemove="changeBox"<br/>             @mouseup="stopDrawingBox"&gt;<br/>            &lt;Box v-if="drawingBox.active"<br/>                 :b-width="drawingBox.width"<br/>                 :b-height="drawingBox.height"<br/>                 :b-top="drawingBox.top"<br/>                 :b-left="drawingBox.left"/&gt;<br/>            &lt;Box v-for="(<strong class="ld ir"><em class="ln">box</em></strong>, <strong class="ld ir"><em class="ln">i</em></strong>) in boxes" :key="<strong class="ld ir"><em class="ln">i</em></strong>"<br/>                 :b-top="<strong class="ld ir"><em class="ln">box</em></strong>.top" :b-left="<strong class="ld ir"><em class="ln">box</em></strong>.left"<br/>                 :b-label="<strong class="ld ir"><em class="ln">box</em></strong>.label"<br/>                 :b-width="<strong class="ld ir"><em class="ln">box</em></strong>.width" :b-height="<strong class="ld ir"><em class="ln">box</em></strong>.height"<br/>                 :b-active="<strong class="ld ir"><em class="ln">i</em></strong>===activeBoxIndex"<br/>                 :on-select="makeBoxActive" :b-index="<strong class="ld ir"><em class="ln">i</em></strong>"<br/>                 :on-delete="removeBox"<br/>            /&gt;<br/>        &lt;/div&gt;<br/>    &lt;/div&gt;<br/>&lt;/template&gt;<br/><br/>&lt;script&gt;<br/>    import Box from "./components/Box";<br/>    import {pick} from 'lodash';<br/><br/>    const getCoursorLeft = (e) =&gt; {<br/>        return e.pageX - 10;<br/>    };<br/><br/>    const getCoursorTop = (e) =&gt; {<br/>        return e.pageY - 10;<br/>    };<br/><br/>    export default {<br/>        name: 'app',<br/>        components: {Box},<br/>        data: function () {<br/>            return {<br/>                drawingBox: {<br/>                    active: false,<br/>                    top: 0,<br/>                    left: 0,<br/>                    height: 0,<br/>                    width: 0<br/>                },<br/>                boxes: [],<br/>                activeBoxIndex: null,<br/>            }<br/>        },<br/>        methods: {<br/>            startDrawingBox(e) {<br/>                this.drawingBox = {<br/>                    width: 0,<br/>                    height: 0,<br/>                    top: getCoursorTop(e),<br/>                    left: getCoursorLeft(e),<br/>                    active: true,<br/>                };<br/>            },<br/>            changeBox(e) {<br/>                if (this.drawingBox.active) {<br/>                    this.drawingBox = {<br/>                        ...this.drawingBox,<br/>                        width: getCoursorLeft(e) - this.drawingBox.left,<br/>                        height: getCoursorTop(e) - this.drawingBox.top,<br/>                    };<br/>                }<br/>            },<br/>            stopDrawingBox() {<br/>                if (this.drawingBox.active) {<br/>                    if (this.drawingBox.width &gt; 5) {<br/>                        this.boxes.push({...pick(this.drawingBox, ['width', 'height', 'top', 'left'])});<br/>                    }<br/>                    this.drawingBox = {<br/>                        active: false,<br/>                        top: 0,<br/>                        left: 0,<br/>                        height: 0,<br/>                        width: 0<br/>                    }<br/>                }<br/>            },<br/>            makeBoxActive(i) {<br/>                this.activeBoxIndex = i;<br/>            },<br/>            removeBox(i) {<br/>                this.boxes = this.boxes.filter((elem, index) =&gt; {<br/>                    return index !== i;<br/>                });<br/>                this.activeBoxIndex = null;<br/>            },<br/>        }<br/>    }<br/>&lt;/script&gt;<br/><br/>&lt;style lang="scss" scoped&gt;<br/>    #app {<br/>        font-family: 'Avenir', Helvetica, Arial, sans-serif;<br/>        -webkit-font-smoothing: antialiased;<br/>        -moz-osx-font-smoothing: grayscale;<br/>        text-align: center;<br/>        color: #2c3e50;<br/><br/>        #image-wrapper {<br/>            height: 640px;<br/>            width: 640px;<br/>            background-repeat: no-repeat;<br/>            position: relative;<br/>        }<br/><br/>        <strong class="ld ir">#label-bar {<br/>            float: right;<br/>            margin-right: 50px;<br/>            width: 220px;<br/><br/>            ul {<br/>                padding: 0;<br/><br/>                li {<br/>                    list-style-type: none;<br/>                    padding: 8px 16px;<br/><br/>                    &amp;.active {<br/>                        background-color: lightblue;<br/>                    }<br/><br/>                    a {<br/>                        cursor: pointer;<br/>                        display: inline-block;<br/>                        margin-left: 4px;<br/>                        font-weight: bold;<br/>                        color: red;<br/>                    }<br/>                }<br/>            }<br/>        }</strong><br/>    }<br/><br/>&lt;/style&gt;</span></pre><p id="6a6d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如你所见，我使用了已经存在的函数<em class="ln"> makeBoxActive </em>和<em class="ln"> removeBox </em>以及相同的<em class="ln">box</em>数组。在这一步，我们需要添加标签系统的是一个带有输入列表(#label-bar)的侧边栏，突出显示活动输入和单击时显示它们已连接的框，以及一个数据源(框数组)。</p><p id="a77e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当然，这不是完整的标签生命周期，因为我们不保存数据，不上传已经创建的标签和坐标。但是有相当多的格式可以用来保存坐标和标签:csv、xml、json，也许还有你自己的格式。</p><p id="a2e9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">此外，为了更舒适地工作，还有许多功能需要实现，如标签验证(排除输入错误)、框拖动、框大小调整，所以您在这里看到的是最基本的功能。</p><p id="972c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">请随意评论你想在这个文章周期中看到的东西，以扩展主题，如果有人对此感兴趣，我可能会做续集:)</p></div></div>    
</body>
</html>