# ä»€ä¹ˆæ˜¯ Android Gradle æ’ä»¶

> åŸæ–‡ï¼š<https://levelup.gitconnected.com/what-is-the-android-gradle-plugin-d859303c0b68>

## Android Studio çš„æ¯ä¸ªé¡¹ç›®éƒ½è¦ç»è¿‡ Gradleï¼Œæ˜¯ä»€ä¹ˆï¼Ÿ

Gradle æˆä¸º Android å®˜æ–¹æ„å»ºå·¥å…·å·²ç»æœ‰ä¸€æ®µæ—¶é—´äº†ã€‚å®ƒæ˜¯ä¸ Android Studio ä¸€èµ·æ¨å‡ºçš„ã€‚åœ¨ Android Gradle æ’ä»¶ä¹‹å‰ï¼ŒAndroid åº”ç”¨ç¨‹åºæ˜¯ç”¨å¦ä¸€ä¸ªæ„å»ºå·¥å…· ANT åœ¨ Eclipse ä¸­æ„å»ºçš„ã€‚ä½†å³ä½¿å®ƒæ˜¯æˆ‘ä»¬ä½œä¸º Android å¼€å‘è€…çš„åŸºæœ¬æ—¥å¸¸å·¥å…·ä¹‹ä¸€ï¼Œæœ‰æ—¶æˆ‘ä»¬ä¹Ÿä¸çŸ¥é“å®ƒèƒŒåæ˜¯ä»€ä¹ˆã€‚è®©æˆ‘ä»¬æ¥äº†è§£ä¸€ä¸‹è¿™ä¸ªå¼ºå¤§å·¥å…·çš„èƒŒåæ˜¯ä»€ä¹ˆã€‚

![](img/eef5b4d8516fb235dc508e0630fd1daf.png)

æ¯”äºšÂ·å®‰å¾·æ‹‰å¾·åœ¨ [Unsplash](https://unsplash.com/s/photos/mix?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) ä¸Šçš„ç…§ç‰‡

# æ ¼æ‹‰å¾·æ˜¯ä»€ä¹ˆï¼Ÿ

æˆ‘ä»¬é¦–å…ˆéœ€è¦å®šä¹‰å’Œç†è§£ Gradle æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚è®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹ Gradle å®˜æ–¹é¡µé¢ä¸­çš„å®šä¹‰:

> *Gradle æ˜¯ä¸€ä¸ªå¼€æºçš„æ„å»ºè‡ªåŠ¨åŒ–å·¥å…·ï¼Œä¸“æ³¨äºçµæ´»æ€§å’Œæ€§èƒ½ã€‚Gradle æ„å»ºè„šæœ¬æ˜¯ä½¿ç”¨ Groovy æˆ– Kotlin DSL ç¼–å†™çš„ã€‚é˜…è¯» Gradle ç‰¹æ€§ï¼Œäº†è§£ Gradle çš„åŠŸèƒ½ã€‚*
> 
> [*https://docs.gradle.org/current/userguide/userguide.html*](https://docs.gradle.org/current/userguide/userguide.html)

# æ„å»ºè‡ªåŠ¨åŒ–

ç»¼ä¸Šæ‰€è¿°ï¼Œç†è§£ä»€ä¹ˆæ˜¯æ„å»ºè‡ªåŠ¨åŒ–æ˜¯å¾ˆé‡è¦çš„ã€‚å®ƒæ˜¯æ„å»ºè½¯ä»¶çš„å®Œæ•´è¿‡ç¨‹ï¼Œç”±ä¸€ä¸ªç¨‹åºåœ¨æ²¡æœ‰æˆ‘ä»¬äº¤äº’çš„æƒ…å†µä¸‹å®Œæˆã€‚å…¶ä¸­å‘ç”Ÿçš„ä¸€äº›è¿‡ç¨‹æ˜¯å°†ä½ çš„ä»£ç ç¼–è¯‘æˆäºŒè¿›åˆ¶ã€æ‰“åŒ…å’Œè¿è¡Œè‡ªåŠ¨åŒ–æµ‹è¯•ã€‚

æœ‰ä¸¤ç§ç±»å‹çš„æ„å»ºè‡ªåŠ¨åŒ–å·¥å…·ã€‚

1.  æ„å»ºè‡ªåŠ¨åŒ–æœåŠ¡å™¨â€”â€”é¡¾åæ€ä¹‰ï¼Œå®ƒä»¬æ˜¯åœ¨çº¿å·¥å…·ï¼Œä»¥é¢„å®šçš„æ–¹å¼æˆ–é€šè¿‡æ‰‹åŠ¨è§¦å‘æ¥è‡ªè¡Œæ„å»ºã€‚åœ¨ä»äº‹å¤§å‹é¡¹ç›®æ—¶ï¼Œæ‚¨é€šå¸¸ä¼šçœ‹åˆ°è¿™äº›å·¥å…·ã€‚ä¾‹å¦‚ï¼Œæ„å»ºå¯ä»¥åœ¨æ™šä¸Šè¿è¡Œï¼Œç¬¬äºŒå¤©æ—©ä¸Šä½ å°±æœ‰äº†æ‰€æœ‰åˆå¹¶å˜æ›´çš„æ–°ç‰ˆæœ¬ã€‚
2.  æ„å»ºè‡ªåŠ¨åŒ–å·¥å…·â€”â€”è¿™æ˜¯ Gradle æ‰€å±çš„ç»„ã€‚å®ƒä»¬å®‰è£…åœ¨æœ¬åœ°æœºå™¨ä¸Šï¼Œæ‚¨æ‰‹åŠ¨åˆ›å»ºæ„å»ºã€‚

![](img/7ff491a0745d77d15c285fc8f0f17d97.png)

Jo Szczepanska åœ¨ [Unsplash](https://unsplash.com/s/photos/tools?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) ä¸Šæ‹æ‘„çš„ç…§ç‰‡

# ä¸ºä»€ä¹ˆæ˜¯å¤–æŒ‚ï¼Ÿ

Gradle åœ¨ä»–ä»¬çš„ç½‘ç«™ä¸Šè§£é‡Šå¾—å¾ˆå¥½:

> Gradle æœ¬è´¨ä¸Šæœ‰æ„ä¸ºç°å®ä¸–ç•Œçš„è‡ªåŠ¨åŒ–æä¾›å¾ˆå°‘çš„ä¸œè¥¿ã€‚æ‰€æœ‰æœ‰ç”¨çš„ç‰¹æ€§ï¼Œæ¯”å¦‚ç¼–è¯‘ Java ä»£ç çš„èƒ½åŠ›ï¼Œéƒ½æ˜¯ç”±æ’ä»¶*æ·»åŠ çš„ã€‚*
> 
> [*https://docs.gradle.org/current/userguide/plugins.html*](https://docs.gradle.org/current/userguide/plugins.html)

*ç®€è€Œè¨€ä¹‹ï¼ŒAndroid Gradle æ’ä»¶åŒ…å«äº†æ„å»º Android åº”ç”¨ç¨‹åºæ‰€éœ€çš„æ‰€æœ‰æ“ä½œã€‚å¦‚æœä½ æ²¡æœ‰æ’ä»¶å’Œ Gradle æ–‡ä»¶ï¼Œä½ å°†ä¸å¾—ä¸åœ¨ç»ˆç«¯ä¸­ä¸€ä¸ªæ¥ä¸€ä¸ªåœ°è¿è¡Œè®¸å¤šå‘½ä»¤ã€‚æ­¤å¤–ï¼Œå¦‚æœæ‚¨æ‰‹åŠ¨æ‰§è¡Œæ‰€æœ‰è¿™äº›å‘½ä»¤ï¼Œæ‚¨å°†èŠ±è´¹æ›´å¤šæ—¶é—´æ¥åˆ›å»ºæ‚¨çš„é¡¹ç›®ï¼Œå› ä¸º Gradle çŸ¥é“å¦‚ä½•ä¼˜åŒ–å’Œé‡ç”¨è¿™äº›ä¿¡æ¯ã€‚*

# *Android Studio ä¸­çš„ Android Gradle æ’ä»¶æ˜¯åšä»€ä¹ˆçš„ï¼Ÿ*

*åŸºæœ¬ä¸Šï¼Œå®ƒè¿è¡Œæ†ç»‘æ‰€æœ‰èµ„æº(å›¾åƒã€å¸ƒå±€ XML æ–‡ä»¶ã€å­—ç¬¦ä¸²èµ„æºç­‰)ã€Kotlin æˆ– Java æºä»£ç ã€æ·»åŠ åˆ°é¡¹ç›®ä¸­çš„ä»»ä½•åº“çš„è¿‡ç¨‹ã€‚*

```
*Note: It is important to understand that Gradle in itself is not the compiler, linker or bundler itself. It is just the tool that supervises the compilation, and other processes that happen to get the final Android executable.*
```

*![](img/19fade45987f0caebf07bf62d1033783.png)*

*ç…§ç‰‡ç”±[è¿ˆå…‹Â·å½¼å¾—é²å¥‡](https://unsplash.com/@mikepetrucci?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)åœ¨ [Unsplash](https://unsplash.com/s/photos/mix?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) ä¸Šæ‹æ‘„*

*å®ƒæŠŠä¸€åˆ‡å˜æˆäº†**ã€‚dex** æ–‡ä»¶ã€‚åœ¨å¹•åï¼ŒAndroid ä½¿ç”¨äº†ä¸€ä¸ªåä¸º ***Dalvik*** çš„è™šæ‹Ÿæœºã€‚Dex ä»£è¡¨ Dalvik å¯æ‰§è¡Œæ–‡ä»¶ã€‚æœ€æ–°ç‰ˆæœ¬çš„ Android å·²ç»ç§»æ¤åˆ°ä¸€ä¸ªå«åš ART çš„ç³»ç»Ÿä¸­ï¼Œè¿™æ˜¯ Android Runtime çš„ç¼©å†™ã€‚è™½ç„¶ Dalvik å’Œ ART ç•¥æœ‰ä¸åŒï¼Œä½†éƒ½è¿è¡Œ Dex æ–‡ä»¶ã€‚*

*æœ€åï¼ŒGradle è¾“å‡ºä¸€ä¸ª APK æ–‡ä»¶ï¼Œè¿™æ˜¯ Android çš„ä¸»è¦å¯æ‰§è¡Œæ–‡ä»¶ã€‚åœ¨è¿™ä¸ª APK ä¸­ï¼Œæ‚¨å¯ä»¥æ‰¾åˆ° Android ä½¿ç”¨çš„ä¸€ç»„ Dex æ–‡ä»¶å’Œå…¶ä»–èµ„æºã€‚ç±»ä¼¼äºä¸€ä¸ª zip æ–‡ä»¶ï¼Œé‡Œé¢æœ‰ä¸€å †å…¶ä»–æ–‡ä»¶ï¼Œä½†æ˜¯æœ‰ Android çš„æ–‡ä»¶ç±»å‹ã€‚*

*è¿™å¬èµ·æ¥å¯èƒ½éå¸¸ç®€å•ï¼Œå‡ åˆ†é’Ÿå°±èƒ½å®Œæˆï¼Œä½†æ˜¯è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œç¡®å®éœ€è¦å¤§é‡çš„å·¥ä½œå’Œä¼˜åŒ–ã€‚å¦‚æœæˆ‘ä»¬æ²¡æœ‰ä¸€ä¸ªé«˜æ•ˆçš„æ’ä»¶ï¼Œæ„å»ºä¼šèŠ±è´¹å¾ˆå¤šæ—¶é—´ï¼Œæˆ‘ä»¬çš„å¼€å‘ä¼šå¤§å¤§å‡æ…¢ã€‚*

# *ä¸€ä¸ª settings.gradle æ–‡ä»¶*

*è¿™ä¸ªæ–‡ä»¶åªæ˜¯ç”¨æ¥æ˜ å°„åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨çš„æ‰€æœ‰â€œæ¨¡å—â€ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“æ‚¨åœ¨ Android Studio ä¸­åˆ›å»ºåº”ç”¨ç¨‹åºæ—¶ï¼Œå®ƒåªæœ‰ä¸€ä¸ªåä¸º app çš„æ¨¡å—ï¼Œå› æ­¤ settings.gradle æ–‡ä»¶é€šå¸¸å¦‚ä¸‹æ‰€ç¤º:*

```
*rootProject.name='EvanaApp' include ':app'*
```

*åœ¨å¤§å‹åº”ç”¨ç¨‹åºä¸­ï¼Œä½ æœ€ç»ˆä¼šæŠŠä½ çš„ä»£ç åˆ†è§£æˆå¤šä¸ªæ¨¡å—ï¼Œå¾ˆå¯èƒ½å®ƒä»¬å°±ä¸å«â€œappâ€äº†ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨æœ€ç»ˆä¼šåœ¨ settings.gradle æ–‡ä»¶ä¸­åŒ…å«å¤šä¸ª includesã€‚*

*ä¸€ä¸ªå¸¸è§çš„ä¾‹å­æ˜¯ï¼Œå½“ä½ å¼€å‘ä¸€ä¸ªæ‰‹æœºåº”ç”¨ç¨‹åºå’Œä¸€ä¸ªç”µè§†åº”ç”¨ç¨‹åºæ—¶ï¼Œä½ å¯èƒ½æœ‰å‡ ä¸ªæ¨¡å—ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ¯ä¸€ä¸ªéƒ½æœ‰è‡ªå·±çš„æ¨¡å—ï¼Œä½†æ˜¯å®ƒä»¬éƒ½å¯ä»¥åŒ…å«åœ¨åŒä¸€ä¸ªé¡¹ç›®ä¸­ã€‚*

*![](img/866b0045408a1ecfc3a483651080050a.png)*

*ä½ å¥½ï¼Œæˆ‘æ˜¯å°¼å…‹ğŸŒ on [Unsplash](https://unsplash.com/s/photos/build?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)*

# *é¡¹ç›®çº§ build.gradle æ–‡ä»¶*

*å¦‚æœä½ å·²ç»ä¸º Android å¼€å‘äº†ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œä½ å¯èƒ½å·²ç»æ³¨æ„åˆ°å¤§å¤šæ•°é¡¹ç›®éƒ½æœ‰ä¸¤ä¸ª Gradle æ–‡ä»¶ã€‚å¦‚æœä½ è¿˜æ²¡æœ‰ï¼Œä½ å¯ä»¥çœ‹çœ‹æˆ‘çš„[æ–° Android Studio é¡¹ç›®ä¸­æœ€åŸºæœ¬çš„ä¾‹å­â€”â€”æ•™ç¨‹](http://www.evanamargain.com/blog/wp-admin/post.php?post=212&action=edit)ã€‚*

*æ·»åŠ åº“æˆ–ä¾èµ–é¡¹æ—¶ï¼Œæœ‰æ—¶ä¼šå°†å®ƒä»¬æ·»åŠ åˆ° App Gradleï¼Œæœ‰æ—¶ä¼šæ·»åŠ åˆ° Project Gradleã€‚*

*è¿™ä¸ªæ–‡ä»¶å°±æ˜¯ä½ é€šå¸¸å‘ç°çš„ build.gradle(é¡¹ç›®:EvanaApp)ã€‚å¯¹äºæ¯ä¸ªé¡¹ç›®ï¼Œæ— è®ºå®ƒæœ‰ä¸€ä¸ªè¿˜æ˜¯å¤šä¸ªæ¨¡å—ï¼Œéƒ½åªæœ‰ä¸€ä¸ªé¡¹ç›®çº§çš„ build.gradleã€‚è¯¥æ–‡ä»¶ä¸­åº”ç”¨çš„é…ç½®å°†è¢« settings.gradle æ–‡ä»¶ä¸­åˆ—å‡ºçš„æ¯ä¸ªæ¨¡å—ç»§æ‰¿ã€‚*

# *æ¨¡å—çº§ build.gradle æ–‡ä»¶*

*é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™ä¸ªæ–‡ä»¶çš„åç§°æ˜¯ build.gradle(Module: app)ã€‚å¯¹äºé¡¹ç›®ä¸­çš„æ¯ä¸ªæ¨¡å—ï¼Œæ‚¨éƒ½ä¼šæœ‰ä¸€ä¸ªã€‚è¿™æ„å‘³ç€æ‚¨å°†æ‹¥æœ‰ä¸ settings.gradle æ–‡ä»¶ä¸­åˆ—å‡ºçš„æ¨¡å—ä¸€æ ·å¤šçš„æ¨¡å—çº§æ–‡ä»¶ã€‚*

*![](img/c9b236a728140976900afc03a1bc3633.png)*

*ç…§ç‰‡ç”± [Unsplash](https://unsplash.com/s/photos/mix?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) ä¸Šçš„ [Bilal O.](https://unsplash.com/@lightcircle?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) æ‹æ‘„*

# *åŒ…æ‰*

*è¿™æ˜¯ Android ä¸­ Gradle æ’ä»¶èƒŒåé€»è¾‘çš„åŸºæœ¬åˆ†è§£ã€‚å¸Œæœ›è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰ç”¨ã€‚å¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜ï¼Œè¯·åœ¨ä¸‹é¢çš„è¯„è®ºä¸­å‘Šè¯‰æˆ‘ã€‚*

*ä¸‹æ¬¡è§ï¼*

*åŸƒå¨ƒå¨œÂ·é©¬å°”ç”˜Â·æ™®ä¼Šæ ¼*