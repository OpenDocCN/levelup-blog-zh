<html>
<head>
<title>Express.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">快递. js</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/express-js-9e17c6080fed?source=collection_archive---------5-----------------------#2019-12-22">https://levelup.gitconnected.com/express-js-9e17c6080fed?source=collection_archive---------5-----------------------#2019-12-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="71ab" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Node.js Web应用程序框架</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/ba39abe83e405cc2187358803635456f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*m1VOQP0FtcQufLgw.png"/></div></div></figure><h2 id="7c40" class="ku kv it bd kw kx ky dn kz la lb dp lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">什么是Express.js？</h2><p id="2c0f" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly ld lz ma mb lh mc md me ll mf mg mh mi im bi translated">Express是Node.js的一个web应用程序框架，它是为构建web应用程序和API而设计的，很像Ruby on Rails和其他后端/服务器端框架。Express帮助您管理路线并处理请求和视图。</p><h2 id="9c5a" class="ku kv it bd kw kx ky dn kz la lb dp lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">使用快递</h2><p id="bc99" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly ld lz ma mb lh mc md me ll mf mg mh mi im bi translated">在终端中安装Express:</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="6be9" class="ku kv it mk b gy mo mp l mq mr">npm install express</span></pre><p id="ef58" class="pw-post-body-paragraph lq lr it ls b lt ms ju lv lw mt jx ly ld mu ma mb lh mv md me ll mw mg mh mi im bi translated">将Express导入JS文件:</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="5595" class="ku kv it mk b gy mo mp l mq mr">const express = require('express');</span></pre><p id="b914" class="pw-post-body-paragraph lq lr it ls b lt ms ju lv lw mt jx ly ld mu ma mb lh mv md me ll mw mg mh mi im bi translated">设置基本服务器:</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="2f05" class="ku kv it mk b gy mo mp l mq mr">const express = require('express');<br/>const app = express();</span><span id="59e1" class="ku kv it mk b gy mx mp l mq mr">const PORT = process.env.PORT || 5000;</span><span id="a4f8" class="ku kv it mk b gy mx mp l mq mr">app.listen(PORT, () =&gt; console.log(`Server started on port ${PORT}`));</span></pre><h2 id="f853" class="ku kv it bd kw kx ky dn kz la lb dp lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">处理请求</h2><p id="7446" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly ld lz ma mb lh mc md me ll mf mg mh mi im bi translated">web应用程序有四种基本的HTML请求:GET、POST、PUT/PATCH和DELETE。为了使用这些请求，我提供了样本数据来测试这些方法。</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="a737" class="ku kv it mk b gy mo mp l mq mr">// Sample data<br/>const members = [<br/>  {<br/>    id: 1,<br/>    name: 'John Doe',<br/>    email: 'john@gmail.com',<br/>    status: 'active'<br/>  },<br/>  {<br/>    id: 2,<br/>    name: 'Bob Williams',<br/>    email: 'bob@gmail.com',<br/>    status: 'inactive'<br/>  },<br/>  {<br/>    id: 3,<br/>    name: 'Shannon Jackson',<br/>    email: 'shannon@gmail.com',<br/>    status: 'active'<br/>  }<br/>]</span></pre><p id="a793" class="pw-post-body-paragraph lq lr it ls b lt ms ju lv lw mt jx ly ld mu ma mb lh mv md me ll mw mg mh mi im bi translated"><strong class="ls iu">获取请求:</strong></p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="85e4" class="ku kv it mk b gy mo mp l mq mr">// Sample GET Requests</span><span id="2cc4" class="ku kv it mk b gy mx mp l mq mr">// Get All Members<br/>app.get('/api/members', (req, res) =&gt; {<br/>   res.json(members)<br/>}</span><span id="a602" class="ku kv it mk b gy mx mp l mq mr">// Get Single Member<br/>app.get('/api/members/:id', (req, res) =&gt; {<br/>   const found = members.some(member =&gt; {<br/>      member.id == req.params.id<br/>   });<br/>   if (found) {<br/>      res.json(members.filter(member =&gt; {<br/>         return member.id == req.params.id<br/>      }))<br/>   } else {<br/>      res.status(400).json({ msg: `No member with the id of ${req.params.id}` })<br/>}</span></pre><p id="8a14" class="pw-post-body-paragraph lq lr it ls b lt ms ju lv lw mt jx ly ld mu ma mb lh mv md me ll mw mg mh mi im bi translated">GET请求读取数据，通常将数据作为响应返回。在上面的例子中，一个GET请求返回数据中所有成员的数组。另一个Get请求返回具有特定“id”的单个成员的对象。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi my"><img src="../Images/7b5ab4100f85f80f1bf9baee240d9fc2.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/0*tFKpNyHQ6I6dHvT_.gif"/></div></figure><p id="c230" class="pw-post-body-paragraph lq lr it ls b lt ms ju lv lw mt jx ly ld mu ma mb lh mv md me ll mw mg mh mi im bi translated"><strong class="ls iu">发布请求:</strong></p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="a9e8" class="ku kv it mk b gy mo mp l mq mr">// Sample POST Request</span><span id="eadc" class="ku kv it mk b gy mx mp l mq mr">// Create Member<br/>app.post('/api/members', (req, res) =&gt; {<br/>  const newMember = {<br/>    id: uuid.v4(),<br/>    name: req.body.name,<br/>    email: req.body.email,<br/>    status: "active"<br/>  }<br/>  if (!newMember.name || !newMember.email) {<br/>    res.status(400).json({ msg: 'Please include a name and email' })<br/>  }</span><span id="f5f2" class="ku kv it mk b gy mx mp l mq mr">  members.push(newMember);<br/>  res.json(members); // returns all members including new member<br/>})</span></pre><p id="7a11" class="pw-post-body-paragraph lq lr it ls b lt ms ju lv lw mt jx ly ld mu ma mb lh mv md me ll mw mg mh mi im bi translated">POST请求创建一个新的数据对象，并将其添加到数据列表中。在上面的例子中，您看到一个新成员是通过接收用户在新成员的正文中请求的信息而创建的。然后，<em class="mz">将</em>推入成员数组，并返回所有成员的响应，包括新成员。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi na"><img src="../Images/1adf14776d295afa8a5d15a390b79ab2.png" data-original-src="https://miro.medium.com/v2/resize:fit:700/0*Pqy5nl6KyKf5G9Kj.gif"/></div></figure><p id="f0bc" class="pw-post-body-paragraph lq lr it ls b lt ms ju lv lw mt jx ly ld mu ma mb lh mv md me ll mw mg mh mi im bi translated"><strong class="ls iu">上传请求:</strong></p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="b679" class="ku kv it mk b gy mo mp l mq mr">// Sample PUT Request</span><span id="a86c" class="ku kv it mk b gy mx mp l mq mr">app.put('/api/members/:id', (req, res) =&gt; {</span><span id="673d" class="ku kv it mk b gy mx mp l mq mr">   const found = members.some(member =&gt; {<br/>      return member.id == req.params.id<br/>   })</span><span id="51cc" class="ku kv it mk b gy mx mp l mq mr">   if (found) {<br/>      const updateMember = req.body;<br/>      members.forEach(member =&gt; {<br/>         if (member.id == req.params.id) {<br/>            member.name = updateMember.name ? updateMember.name : member.name;<br/>            member.email = updateMember.email ? updateMember.email : member.email;<br/>         res.json({ msg: 'Member updated', member })<br/>         }<br/>      })<br/>   } else {<br/>      res.status(400).json({ msg: `No member with the id of ${req.params.id}` })<br/>   }<br/>});</span></pre><p id="c0c1" class="pw-post-body-paragraph lq lr it ls b lt ms ju lv lw mt jx ly ld mu ma mb lh mv md me ll mw mg mh mi im bi translated">PUT请求更新现有的数据对象，并根据用户的请求更改其属性。在上面的示例中，您看到一个成员的姓名或电子邮件被更改为用户要求编辑的不同姓名或电子邮件。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/30d3ceaf1c21e24026c99a91c3092993.png" data-original-src="https://miro.medium.com/v2/resize:fit:996/0*rrh_LtnFNbKJoOJ1"/></div></figure><p id="f0a7" class="pw-post-body-paragraph lq lr it ls b lt ms ju lv lw mt jx ly ld mu ma mb lh mv md me ll mw mg mh mi im bi translated"><strong class="ls iu">删除请求:</strong></p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="0092" class="ku kv it mk b gy mo mp l mq mr">// Sample DELETE Request</span><span id="b670" class="ku kv it mk b gy mx mp l mq mr">// Delete Member<br/>app.delete('/:id', (req, res) =&gt; {</span><span id="9b64" class="ku kv it mk b gy mx mp l mq mr">  const found = members.some(member =&gt; {<br/>    return member.id == req.params.id<br/>  })</span><span id="cda6" class="ku kv it mk b gy mx mp l mq mr">  if (found) {<br/>    res.json({<br/>      msg: 'Member Deleted',<br/>      members: members.filter(member =&gt; {<br/>        return member.id != req.params.id<br/>      })<br/>    })<br/>  } else {<br/>    res.status(400).json({ msg: `No member with the id of ${req.params.id}` })<br/>  }<br/>});</span></pre><p id="614c" class="pw-post-body-paragraph lq lr it ls b lt ms ju lv lw mt jx ly ld mu ma mb lh mv md me ll mw mg mh mi im bi translated">删除请求从数据列表中删除数据对象。在上面的例子中，目标成员是通过<em class="mz"> id </em>找到的，非常类似于PUT请求，并使用filter方法删除，以包含与用户请求的<em class="mz"> id </em>不具有相同<em class="mz"> id </em>的所有成员。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nc"><img src="../Images/ce8265fea6921d5d767bb65117b92178.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/0*1hZ64rc7HweFWb3R.gif"/></div></div></figure><h2 id="d60f" class="ku kv it bd kw kx ky dn kz la lb dp lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">管理路线</h2><p id="79e4" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly ld lz ma mb lh mc md me ll mf mg mh mi im bi translated">您可以在Express中管理您的路线。这很简单。您所要做的就是对您的应用程序进行一些更改。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/37a990a6efae0703e0d36228d9abeff0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/0*fnsmfTbdIwzjW9ks.gif"/></div></figure><p id="ae63" class="pw-post-body-paragraph lq lr it ls b lt ms ju lv lw mt jx ly ld mu ma mb lh mv md me ll mw mg mh mi im bi translated">制作路由器:</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="754d" class="ku kv it mk b gy mo mp l mq mr">// index.js<br/>const express = require('express');<br/>const app = express();</span><span id="4654" class="ku kv it mk b gy mx mp l mq mr">// Members API Routes<br/>app.use('/api/members', require('./routes/api/members'));<br/></span><span id="16a4" class="ku kv it mk b gy mx mp l mq mr">// members.js<br/>const express = require('express');<br/>const router = express.Router();</span><span id="81b6" class="ku kv it mk b gy mx mp l mq mr">router.get('/', (req, res) =&gt; {<br/>   res.json(members)<br/>}</span></pre><p id="8b8a" class="pw-post-body-paragraph lq lr it ls b lt ms ju lv lw mt jx ly ld mu ma mb lh mv md me ll mw mg mh mi im bi translated">变化:</p><ul class=""><li id="364e" class="ne nf it ls b lt ms lw mt ld ng lh nh ll ni mi nj nk nl nm bi translated">将您的HTML请求移动到<em class="mz"> api </em>和<em class="mz"> routes </em>文件夹下的不同文件中</li><li id="6577" class="ne nf it ls b lt nn lw no ld np lh nq ll nr mi nj nk nl nm bi translated">添加<em class="mz">成员API路由</em>代码片段</li><li id="5de1" class="ne nf it ls b lt nn lw no ld np lh nq ll nr mi nj nk nl nm bi translated">相应地更改您的HTML请求路由</li></ul><p id="2eb4" class="pw-post-body-paragraph lq lr it ls b lt ms ju lv lw mt jx ly ld mu ma mb lh mv md me ll mw mg mh mi im bi translated">这些更改使您的代码更有条理，并使您更容易编程。</p><h2 id="3779" class="ku kv it bd kw kx ky dn kz la lb dp lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">渲染视图</h2><p id="5fca" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly ld lz ma mb lh mc md me ll mf mg mh mi im bi translated">快速渲染带有快速手柄的模板。</p><p id="9d55" class="pw-post-body-paragraph lq lr it ls b lt ms ju lv lw mt jx ly ld mu ma mb lh mv md me ll mw mg mh mi im bi translated">在候机楼安装快速把手:</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="dbe8" class="ku kv it mk b gy mo mp l mq mr">npm install express-handlebars</span></pre><p id="f596" class="pw-post-body-paragraph lq lr it ls b lt ms ju lv lw mt jx ly ld mu ma mb lh mv md me ll mw mg mh mi im bi translated">使用快速把手:</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="ead6" class="ku kv it mk b gy mo mp l mq mr">// index.js</span><span id="0128" class="ku kv it mk b gy mx mp l mq mr">const exphbs = require('express-handlebars);</span><span id="17bd" class="ku kv it mk b gy mx mp l mq mr">// Handlebars Middleware<br/>app.engine('handlebars', exphbs({ defaultLayout: 'main' }));<br/>app.set('view engine', 'handlebars');</span></pre><p id="5f43" class="pw-post-body-paragraph lq lr it ls b lt ms ju lv lw mt jx ly ld mu ma mb lh mv md me ll mw mg mh mi im bi translated">在index.js中，导入<code class="fe ns nt nu mk b">express-handlebars</code>，声明为变量。然后在“手柄中间件”下添加两行代码，以便使用它来渲染视图。在你的根文件夹中，在<code class="fe ns nt nu mk b">views</code>下创建一个<code class="fe ns nt nu mk b">views</code>文件夹和一个<code class="fe ns nt nu mk b">layouts</code>文件夹。在这两个文件夹中，你可以制作扩展名为<code class="fe ns nt nu mk b">.handlebars</code>的HTML模板。</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="3a6a" class="ku kv it mk b gy mo mp l mq mr">// Sample .handlebars in layouts folder<br/>&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;meta charset="utf-8"&gt;<br/>    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;<br/>    &lt;meta http-equiv="X-UA-Compatible" content="ie=edge"&gt;<br/>    &lt;link rel="stylesheet" href="<a class="ae nv" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" rel="noopener ugc nofollow" target="_blank">https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css</a>" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous"&gt;<br/>    &lt;title&gt;Members App&lt;/title&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div class="container-mt4"&gt;<br/>      {{{ body }}}<br/>    &lt;/div&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span><span id="81c9" class="ku kv it mk b gy mx mp l mq mr">// Sample .handlebars in views folder<br/>&lt;h1 class="text-center mb-3"&gt;{{title}}&lt;/h1&gt;<br/>&lt;form class="mb-4" action="/api/members" method="post"&gt;<br/>  &lt;div class="form-group"&gt;<br/>    &lt;label for="name"&gt;Name&lt;/label&gt;<br/>    &lt;input type="text" name="name" class="form-control"&gt;<br/>  &lt;/div&gt;<br/>  &lt;div class="form-group"&gt;<br/>    &lt;label for="email"&gt;Email&lt;/label&gt;<br/>    &lt;input type="email" name="email" class="form-control"&gt;<br/>  &lt;/div&gt;<br/>  &lt;input type="submit" value="Add Member" class="btn btn-primary btn-block"&gt;<br/>&lt;/form&gt;<br/>&lt;h4&gt;Members&lt;/h4&gt;<br/>&lt;ul class="list-group"&gt;<br/>  {{#each members}}<br/>    &lt;li class="list-group-item"&gt;{{this.name}}: {{this.email}}&lt;/li&gt;<br/>  {{/each}}<br/>&lt;/ul&gt;</span></pre><p id="831a" class="pw-post-body-paragraph lq lr it ls b lt ms ju lv lw mt jx ly ld mu ma mb lh mv md me ll mw mg mh mi im bi translated">使用Express Handlebars允许用户查看页面来执行HTML请求。它基本上使应用程序与用户更具交互性。您可以通过页面创建新成员，而不是使用代码语言来创建成员。但是，当执行某些操作时，您必须呈现视图并重定向到其他视图。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi my"><img src="../Images/e7f6ef75421bbecbef5fbc7945325128.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/0*HS-Xna6L-2Xi0ZLE.gif"/></div></figure><p id="6197" class="pw-post-body-paragraph lq lr it ls b lt ms ju lv lw mt jx ly ld mu ma mb lh mv md me ll mw mg mh mi im bi translated">您希望应用程序将用户重定向到不同的页面或重新呈现当前页面，而不是从服务器获得JSON作为响应。</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="8ef2" class="ku kv it mk b gy mo mp l mq mr">// Changes to HTML Requests</span><span id="1f28" class="ku kv it mk b gy mx mp l mq mr">// comment 'res.json(members)' from POST request<br/>res.redirect('/'); // &lt;--- replace with this code</span></pre><p id="69b7" class="pw-post-body-paragraph lq lr it ls b lt ms ju lv lw mt jx ly ld mu ma mb lh mv md me ll mw mg mh mi im bi translated">您希望将几乎所有的<code class="fe ns nt nu mk b">res.json()</code>代码都改为<code class="fe ns nt nu mk b">res.redirect()</code>，这样用户就会收到一个页面而不是JSON作为响应。当您创建成员、更新成员和删除成员时，您很可能希望重定向到某个页面。</p><h2 id="9bb6" class="ku kv it bd kw kx ky dn kz la lb dp lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">结论</h2><p id="f625" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly ld lz ma mb lh mc md me ll mf mg mh mi im bi translated">对于那些有后端编程经验的人来说，Express是一个很好的服务器端web应用程序框架。对于想要了解后端的初学者来说可能很难，因为一些词汇可能会让新开发人员感到困惑。我是一个相当有经验的开发人员，我使用Ruby on Rails作为我的第一个后端框架。连我都不知道什么是‘车把’，直到我学会了快递。对于开始学习后端编程的开发人员，我推荐Ruby on Rails。Express似乎是为那些更有经验和使用JavaScript和Node的人提供的一个框架。</p><p id="4edf" class="pw-post-body-paragraph lq lr it ls b lt ms ju lv lw mt jx ly ld mu ma mb lh mv md me ll mw mg mh mi im bi translated">作为MERN的一部分，Express与Node.js、React和MongoDB配合得非常好。我在Node.js和React上有几篇博文。我可能会在不久的将来发布一篇关于使用MongoDB的博文来完成MERN教程。</p><div class="nw nx gp gr ny nz"><a href="https://medium.com/@peterlin5301997/node-js-b6c382d3f72b" rel="noopener follow" target="_blank"><div class="oa ab fo"><div class="ob ab oc cl cj od"><h2 class="bd iu gy z fp oe fr fs of fu fw is bi translated">节点. js</h2><div class="og l"><h3 class="bd b gy z fp oe fr fs of fu fw dk translated">Node.js是什么，是做什么的？</h3></div><div class="oh l"><p class="bd b dl z fp oe fr fs of fu fw dk translated">medium.com</p></div></div><div class="oi l"><div class="oj l ok ol om oi on ks nz"/></div></div></a></div><div class="nw nx gp gr ny nz"><a href="https://medium.com/@peterlin5301997/types-of-react-components-a38ce18e35ab" rel="noopener follow" target="_blank"><div class="oa ab fo"><div class="ob ab oc cl cj od"><h2 class="bd iu gy z fp oe fr fs of fu fw is bi translated">React组件的类型</h2><div class="og l"><h3 class="bd b gy z fp oe fr fs of fu fw dk translated">功能组件、类别组件、纯组件和高阶组件</h3></div><div class="oh l"><p class="bd b dl z fp oe fr fs of fu fw dk translated">medium.com</p></div></div><div class="oi l"><div class="oo l ok ol om oi on ks nz"/></div></div></a></div></div></div>    
</body>
</html>