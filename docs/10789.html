<html>
<head>
<title>How to Group Timestamps Every 5 Minute</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何每5分钟对时间戳进行分组</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-group-timestamps-every-5-minute-de416a59695e?source=collection_archive---------1-----------------------#2022-01-11">https://levelup.gitconnected.com/how-to-group-timestamps-every-5-minute-de416a59695e?source=collection_archive---------1-----------------------#2022-01-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="b5b0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">假设我们有一个时间戳和标志的列表来指示记录是否异常(1表示异常，0表示正常)。</p><pre class="ko kp kq kr gt ks kt ku kv aw kw bi"><span id="fa9e" class="kx ky it kt b gy kz la l lb lc">timestamp            is_anomaly<br/>2021-07-05T00:00:32  False<br/>2021-07-05T00:01:32  False<br/>2021-07-05T00:01:45  True<br/>2021-07-05T00:02:01  False<br/>2021-07-05T00:05:12  False<br/>2021-07-05T00:05:24  True<br/>2021-07-05T00:05:37  True<br/>2021-07-05T00:08:11  True<br/>2021-07-05T00:09:12  False<br/>2021-07-05T00:10:15  False<br/>2021-07-05T00:11:23  False</span></pre><p id="db6a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们希望将时间戳分组为5分钟间隔，并返回每个5分钟间隔内的异常总数。</p><p id="a07f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在本帖中，我们将使用两种方法来解决这个问题:</p><ul class=""><li id="081a" class="ld le it js b jt ju jx jy kb lf kf lg kj lh kn li lj lk ll bi translated">方法1:实践方法</li><li id="bbc4" class="ld le it js b jt lm jx ln kb lo kf lp kj lq kn li lj lk ll bi translated">方法二:用熊猫的<code class="fe lr ls lt kt b">resample()</code>法</li></ul><h1 id="25ac" class="lu ky it bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">动手的方式</h1><p id="34ee" class="pw-post-body-paragraph jq jr it js b jt mr jv jw jx ms jz ka kb mt kd ke kf mu kh ki kj mv kl km kn im bi translated">公式很简单</p><figure class="ko kp kq kr gt mx gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/ade59d98b50f87f9504b7e5e25b84e35.png" data-original-src="https://miro.medium.com/v2/resize:fit:712/format:webp/1*O4LfD-LHaGZegXJSwwGSeg.png"/></div></figure><p id="987e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们使用<code class="fe lr ls lt kt b">floor</code>函数将时间戳除以时间间隔，然后乘以时间间隔。这将删除剩余部分，只给我们目标时间戳组。</p><p id="4df8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们用电子表格计算来解释一下。</p><figure class="ko kp kq kr gt mx gh gi paragraph-image"><div role="button" tabindex="0" class="nb nc di nd bf ne"><div class="gh gi na"><img src="../Images/0a6dc4bf53af3819d31f2028785b3ef3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0k4WLKkfuK68kUWn0I6SBw.png"/></div></div></figure><p id="4bd7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">列描述:</p><ul class=""><li id="3a2c" class="ld le it js b jt ju jx jy kb lf kf lg kj lh kn li lj lk ll bi translated">答:时间戳的字符串格式。</li><li id="b6e1" class="ld le it js b jt lm jx ln kb lo kf lp kj lq kn li lj lk ll bi translated">b:异常标志，只是一个简单的字段，带有时间戳。</li><li id="b3c5" class="ld le it js b jt lm jx ln kb lo kf lp kj lq kn li lj lk ll bi translated">c:从Unix纪元开始的时间戳<a class="ae nf" href="https://en.wikipedia.org/wiki/Unix_time" rel="noopener ugc nofollow" target="_blank"/></li><li id="44cb" class="ld le it js b jt lm jx ln kb lo kf lp kj lq kn li lj lk ll bi translated">d:考虑到5分钟的间隔，我们使用<code class="fe lr ls lt kt b">floor</code>函数将时间戳向下舍入到最接近的分钟。</li><li id="eb67" class="ld le it js b jt lm jx ln kb lo kf lp kj lq kn li lj lk ll bi translated">e:我们将时间戳转换为目标组。</li></ul><p id="05bd" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">相当容易😃？让我们通过使用<a class="ae nf" href="https://pandas.pydata.org/docs/user_guide/10min.html" rel="noopener ugc nofollow" target="_blank">熊猫</a>包来探索一个更简单的解决方案。</p><h1 id="fed4" class="lu ky it bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">熊猫的重采样功能</h1><p id="78bf" class="pw-post-body-paragraph jq jr it js b jt mr jv jw jx ms jz ka kb mt kd ke kf mu kh ki kj mv kl km kn im bi translated"><code class="fe lr ls lt kt b">resample</code>功能将按照指定的频率对数据进行分组。在这种情况下，我们将5分钟分组，然后使用<code class="fe lr ls lt kt b">sum</code>函数获得每个5分钟间隔内的异常总数。</p><p id="6d65" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">以下是完整的代码:</p><figure class="ko kp kq kr gt mx"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="765a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果想了解重采样功能，可以参考下面的链接。</p><div class="ni nj gp gr nk nl"><a href="https://towardsdatascience.com/using-the-pandas-resample-function-a231144194c4" rel="noopener follow" target="_blank"><div class="nm ab fo"><div class="nn ab no cl cj np"><h2 class="bd iu gy z fp nq fr fs nr fu fw is bi translated">使用熊猫的“重新取样”功能</h2><div class="ns l"><h3 class="bd b gy z fp nq fr fs nr fu fw dk translated">仅次于改变过去的最好方法——聚合过去。熊猫重采样功能的技术介绍。</h3></div><div class="nt l"><p class="bd b dl z fp nq fr fs nr fu fw dk translated">towardsdatascience.co</p></div></div><div class="nu l"><div class="nv l nw nx ny nu nz my nl"/></div></div></a></div></div><div class="ab cl oa ob hx oc" role="separator"><span class="od bw bk oe of og"/><span class="od bw bk oe of og"/><span class="od bw bk oe of"/></div><div class="im in io ip iq"><p id="0e4e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">发现这篇文章很有用👏？看看我下面的其他文章吧！</p><div class="ni nj gp gr nk nl"><a href="https://medium.com/swlh/how-to-remember-all-these-classification-concepts-forever-761c065be33" rel="noopener follow" target="_blank"><div class="nm ab fo"><div class="nn ab no cl cj np"><h2 class="bd iu gy z fp nq fr fs nr fu fw is bi translated">如何永远记住所有这些分类概念</h2><div class="ns l"><h3 class="bd b gy z fp nq fr fs nr fu fw dk translated">混淆矩阵、准确度、精密度、灵敏度、特异性、F1评分、Roc曲线，让我们记住它们一次…</h3></div><div class="nt l"><p class="bd b dl z fp nq fr fs nr fu fw dk translated">medium.com</p></div></div><div class="nu l"><div class="oh l nw nx ny nu nz my nl"/></div></div></a></div><div class="ni nj gp gr nk nl"><a href="https://medium.com/analytics-vidhya/understanding-calculation-of-tf-idf-by-example-8975304e7fc4" rel="noopener follow" target="_blank"><div class="nm ab fo"><div class="nn ab no cl cj np"><h2 class="bd iu gy z fp nq fr fs nr fu fw is bi translated">通过实例理解TF-IDF的计算</h2><div class="ns l"><h3 class="bd b gy z fp nq fr fs nr fu fw dk translated">TF-IDF(术语频率-逆文档频率)是一种统计方法，用于评估一个单词与一个文档的相关程度</h3></div><div class="nt l"><p class="bd b dl z fp nq fr fs nr fu fw dk translated">medium.com</p></div></div><div class="nu l"><div class="oi l nw nx ny nu nz my nl"/></div></div></a></div></div></div>    
</body>
</html>