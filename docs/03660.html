<html>
<head>
<title>What is git cherry-pick and how to use it effectively</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">什么是git cherry-pick以及如何有效地使用它</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/what-is-git-cherry-pick-and-how-to-use-it-effectively-665247192442?source=collection_archive---------12-----------------------#2020-05-21">https://levelup.gitconnected.com/what-is-git-cherry-pick-and-how-to-use-it-effectively-665247192442?source=collection_archive---------12-----------------------#2020-05-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/7166b00865c9423981f03c09e218a602.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/0*-RSqFP8mXrCbD-ZC.gif"/></div></figure><p id="f730" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">git cherry-pick是git中有用的命令之一，它可以帮助您将提交从一个分支复制、粘贴到另一个分支。简单。</p><p id="09a1" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">请注意，cherry-pick将复制提交，以便原始提交仍然存在于源分支中。</p><p id="0ef1" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">大多数开发人员会认为挑选是一种不好的做法，会导致在多个分支中重复提交、搞乱git历史等问题。但是，精选是最强大的工具之一，如果你明白它是如何工作的，如果小心使用，那么它会非常有用。</p><p id="87e1" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">挑选的一些用例是，您可能在错误的分支中有一些提交，您可以将它们挑选到正确的分支。像你这样的其他用例不需要合并整个分支(因为它可能已经过时了)但是你只需要特定的提交。然后你可以挑选那些提交到你的分支。</p><h2 id="066f" class="ks kt iq bd ku kv kw dn kx ky kz dp la kf lb lc ld kj le lf lg kn lh li lj lk bi translated">如何挑选樱桃</h2><pre class="ll lm ln lo gt lp lq lr ls aw lt bi"><span id="4060" class="ks kt iq lq b gy lu lv l lw lx">git cherry-pick &lt;commit hash&gt;</span></pre><p id="6f2e" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">如您所知，您可以从<code class="fe ly lz ma lq b">git log</code>或其他地方获得提交散列。</p><p id="1c49" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">上述命令将复制带有相应散列的提交，并将其粘贴到您所在的当前分支中。</p><figure class="ll lm ln lo gt jr gh gi paragraph-image"><div class="gh gi mb"><img src="../Images/55992a7150a6b6243023859633e4d80f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1286/format:webp/0*GL1hv0spJYlxZ8e2.png"/></div></figure><p id="0739" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在上图中，您可以看到我已经精心挑选了一个提交，并且它已经被应用到当前分支<code class="fe ly lz ma lq b"><strong class="jw ir">develop</strong></code>。</p><p id="7566" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">考虑下面的提交历史。</p><pre class="ll lm ln lo gt lp lq lr ls aw lt bi"><span id="ac82" class="ks kt iq lq b gy lu lv l lw lx">A - B - C - D - E - F (Branch A)<br/>     \         <br/>      G - H - I (Branch B)</span></pre><p id="23d5" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">如果我们要从分支B中挑选出<strong class="jw ir"> I </strong>，那么提交历史会如下所示发生变化</p><pre class="ll lm ln lo gt lp lq lr ls aw lt bi"><span id="b6e6" class="ks kt iq lq b gy lu lv l lw lx">A - B - C - D - E - F - I<br/>     \         <br/>      G - H - I</span></pre><p id="0cf4" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">你可以看到<strong class="jw ir"> I </strong>现在出现在两个分支中。</p><p id="b58a" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在某些情况下，您还不需要提交更改。你只需要复制所有的修改。</p><pre class="ll lm ln lo gt lp lq lr ls aw lt bi"><span id="55ac" class="ks kt iq lq b gy lu lv l lw lx">git cherry-pick -n &lt;commit hash&gt;</span></pre><p id="09bb" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在这种情况下，git将复制提交，然后它将暂存所有的更改，但不会提交当前分支中的更改。您可以自己提交变更，也可以取消其中的一部分，或者做其他任何事情。</p><figure class="ll lm ln lo gt jr gh gi paragraph-image"><div class="gh gi mc"><img src="../Images/2287a31f4a340b8d98d028bd86860211.png" data-original-src="https://miro.medium.com/v2/resize:fit:1364/format:webp/0*6gJzZMLWjXvxbw2N.png"/></div></figure><p id="79df" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在上面的图像中，您可以看到精心挑选的更改已经准备好了，但是还没有提交。</p><h2 id="a2a8" class="ks kt iq bd ku kv kw dn kx ky kz dp la kf lb lc ld kj le lf lg kn lh li lj lk bi translated">有冲突的git精选</h2><p id="4558" class="pw-post-body-paragraph ju jv iq jw b jx md jz ka kb me kd ke kf mf kh ki kj mg kl km kn mh kp kq kr ij bi translated">如果你挑选时发生了冲突。Git将暂停挑选樱桃。您必须解决冲突，并要求git继续进行挑选。</p><figure class="ll lm ln lo gt jr gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/e376b1feae4019a7d9a2a3c0ff705679.png" data-original-src="https://miro.medium.com/v2/resize:fit:1264/format:webp/0*-p3oc9boW2xeykDe.png"/></div></figure><p id="128e" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在上面的例子中，我试图挑选一个特定的提交，但是它导致了一个冲突。你可以在上图中看到这种冲突。所以我们必须解决冲突，然后继续挑选。</p><p id="1119" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">解决冲突后，您可以使用下面的命令继续进行挑选。</p><pre class="ll lm ln lo gt lp lq lr ls aw lt bi"><span id="9936" class="ks kt iq lq b gy lu lv l lw lx">git cherry-pick -continue</span></pre><p id="07de" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">如果您决定中止有冲突的精选，您可以使用</p><pre class="ll lm ln lo gt lp lq lr ls aw lt bi"><span id="f021" class="ks kt iq lq b gy lu lv l lw lx">git cherry-pick -abort</span></pre><figure class="ll lm ln lo gt jr gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/e2694706f295e7d3aa6879401fdd88d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1048/format:webp/0*eyOBxPWNpbxG8mnV.png"/></div></figure><p id="3755" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在上面的示例中，我已经解决了冲突，然后暂存了文件。在那之后，我继续挑选樱桃。</p><h2 id="90e8" class="ks kt iq bd ku kv kw dn kx ky kz dp la kf lb lc ld kj le lf lg kn lh li lj lk bi translated">git挑选一系列提交</h2><pre class="ll lm ln lo gt lp lq lr ls aw lt bi"><span id="4fd7" class="ks kt iq lq b gy lu lv l lw lx">git cherry-pick A..B</span></pre><p id="33f3" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在上面的命令中，A和B是提交散列。</p><p id="3b05" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">上面的命令将包括从A到B的所有提交，不包括A。记住<strong class="jw ir"> A应该比B老。</strong></p><pre class="ll lm ln lo gt lp lq lr ls aw lt bi"><span id="83e4" class="ks kt iq lq b gy lu lv l lw lx">git cherry-pick A^..B</span></pre><p id="5290" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">该命令将包括从A到B的所有提交，包括A。</p><h2 id="a5bd" class="ks kt iq bd ku kv kw dn kx ky kz dp la kf lb lc ld kj le lf lg kn lh li lj lk bi translated">git精选一个合并提交</h2><p id="cf0b" class="pw-post-body-paragraph ju jv iq jw b jx md jz ka kb me kd ke kf mf kh ki kj mg kl km kn mh kp kq kr ij bi translated">挑选合并提交有点棘手。当合并时，包含两个分支。父B分支被合并到父A分支中。</p><p id="aa15" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">所以当你挑选一个合并提交时，你必须指定你是需要挑选父A分支还是父B分支。</p><pre class="ll lm ln lo gt lp lq lr ls aw lt bi"><span id="c82f" class="ks kt iq lq b gy lu lv l lw lx">A - B - C - E - F (branch A)<br/>     \     /<br/>      G - H - I (branch B)</span></pre><p id="0a28" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在上面的例子中，<strong class="jw ir"> E </strong>是合并提交。如果你运行<code class="fe ly lz ma lq b"><strong class="jw ir">git cherry-pick E </strong></code>，git将抛出一个警告。你必须提到母分公司的号码。</p><p id="6540" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">你能做到</p><pre class="ll lm ln lo gt lp lq lr ls aw lt bi"><span id="5670" class="ks kt iq lq b gy lu lv l lw lx">git cherry-pick -m 1 E</span></pre><p id="7d6c" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">这将获取来自<strong class="jw ir"> C — E </strong>的所有提交。</p><p id="079d" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">或者你可以</p><pre class="ll lm ln lo gt lp lq lr ls aw lt bi"><span id="769f" class="ks kt iq lq b gy lu lv l lw lx">git cherry-pick -m 2 E</span></pre><p id="db1b" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">这将接受来自<strong class="jw ir"> G — H — E </strong>的提交。</p><p id="ba25" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">但是在挑选合并提交时，总是要小心谨慎。很有可能你会搞乱历史。因此，您必须在给定的情况下决定挑选一个合并提交是好是坏。</p><h2 id="4bf2" class="ks kt iq bd ku kv kw dn kx ky kz dp la kf lb lc ld kj le lf lg kn lh li lj lk bi translated">我发现的其他有用的命令</h2><pre class="ll lm ln lo gt lp lq lr ls aw lt bi"><span id="d1cd" class="ks kt iq lq b gy lu lv l lw lx">git cherry-pick &lt;branch-name&gt;</span></pre><p id="3b21" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">该命令将只复制来自给定分支的最新提交，并将其应用于当前分支。只记住给定分支中的最新提交。</p><pre class="ll lm ln lo gt lp lq lr ls aw lt bi"><span id="21fe" class="ks kt iq lq b gy lu lv l lw lx">git cherry-pick ..&lt;branch-name&gt;</span></pre><p id="35cf" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">该命令将从给定分支获取比您所在的当前分支更早的所有提交，并将其应用于当前分支。</p><p id="c30e" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">假设您有分支A和B。如果您从分支A应用这个命令，那么来自B的比分支A更早的所有提交都将应用到分支A。</p><h2 id="d01c" class="ks kt iq bd ku kv kw dn kx ky kz dp la kf lb lc ld kj le lf lg kn lh li lj lk bi translated">要记住的要点</h2><ol class=""><li id="dc86" class="mk ml iq jw b jx md kb me kf mm kj mn kn mo kr mp mq mr ms bi translated"><strong class="jw ir">git cherry-pick&lt;commit-hash&gt;</strong>从另一个分支中挑选提交。</li><li id="fd1a" class="mk ml iq jw b jx mt kb mu kf mv kj mw kn mx kr mp mq mr ms bi translated"><strong class="jw ir">git cherry-pick-n&lt;commit-hash&gt;</strong>来挑选提交，但是它不会提交更改。它将只展示所有的变化。</li><li id="6511" class="mk ml iq jw b jx mt kb mu kf mv kj mw kn mx kr mp mq mr ms bi translated"><strong class="jw ir">git cherry-pick-continue</strong>或<strong class="jw ir"> git cherry-pick -abort </strong>当你在挑选过程中遇到冲突时。</li><li id="fc6a" class="mk ml iq jw b jx mt kb mu kf mv kj mw kn mx kr mp mq mr ms bi translated"><strong class="jw ir"> git cherry-pick -m </strong>在您挑选合并提交时提及父分支号。</li><li id="92ba" class="mk ml iq jw b jx mt kb mu kf mv kj mw kn mx kr mp mq mr ms bi translated">git精选A..B 挑选一系列提交。</li></ol><p id="fe04" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">感谢您的阅读:)</p><p id="6151" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">如果您有任何疑问、反馈或任何问题，可以留下评论:)</p><p id="bafa" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">你可以在这里找到我的其他git相关文章</strong></p><pre class="ll lm ln lo gt lp lq lr ls aw lt bi"><span id="afc0" class="ks kt iq lq b gy lu lv l lw lx">1. <a class="ae my" rel="noopener ugc nofollow" target="_blank" href="/automate-repetitive-tasks-with-custom-git-commands-76a4b71d262f">Automate repetitive tasks in Git</a></span><span id="4689" class="ks kt iq lq b gy mz lv l lw lx">2. <a class="ae my" rel="noopener ugc nofollow" target="_blank" href="/how-to-use-git-fetch-and-git-pull-effectively-c6a4becfbc16">Useful tricks of git fetch and git pull</a></span><span id="907e" class="ks kt iq lq b gy mz lv l lw lx">3. <a class="ae my" href="https://medium.com/@srebalaji/a-very-basic-intro-of-git-b9cab0e64153" rel="noopener">A very basic intro of Git</a></span></pre><p id="1dae" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">本帖原载于我的简讯</strong><a class="ae my" href="https://gitbetter.substack.com/" rel="noopener ugc nofollow" target="_blank"><strong class="jw ir">GitBetter</strong></a><strong class="jw ir">。如果你已经来了这么久，那么我想你会对Git非常感兴趣。可以订阅</strong><a class="ae my" href="https://gitbetter.substack.com/" rel="noopener ugc nofollow" target="_blank"><strong class="jw ir">Git better</strong></a><strong class="jw ir">获取Git的招数、技巧、高级话题。</strong></p></div></div>    
</body>
</html>