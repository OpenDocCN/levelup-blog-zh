<html>
<head>
<title>Typescript Enum Pitfalls and Solutions Must Know</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Typescript枚举陷阱和解决方案必须知道</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/typescript-enum-pitfalls-and-solutions-must-know-bb971cb0f7d2?source=collection_archive---------20-----------------------#2022-11-17">https://levelup.gitconnected.com/typescript-enum-pitfalls-and-solutions-must-know-bb971cb0f7d2?source=collection_archive---------20-----------------------#2022-11-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="68e8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">本文旨在演示Typescript枚举的当前问题，并推荐其正确用法/替代方法。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/0aa3a3a40107a802a8a78de08808b3d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MGRV6uBiq93ZB0vlZ8MYOg.jpeg"/></div></div></figure><h1 id="b4bf" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">问题是</h1><p id="c945" class="pw-post-body-paragraph jq jr it js b jt ly jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj mc kl km kn im bi translated">假设我们有一个只定义了键的基本枚举<code class="fe md me mf mg b">Status</code>。</p><pre class="kp kq kr ks gt mh mg mi bn mj mk bi"><span id="d40c" class="ml lb it mg b be mm mn l mo mp">enum Status {<br/>  NotStarted,<br/>  InProgress,<br/>  Done,<br/>}</span></pre><h2 id="ab68" class="mq lb it bd lc mr ms dn lg mt mu dp lk kb mv mw lo kf mx my ls kj mz na lw nb bi translated">当前的行为</h2><p id="3ed3" class="pw-post-body-paragraph jq jr it js b jt ly jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj mc kl km kn im bi translated">它输出一个奇怪的对象，并拖入了额外的内容。</p><pre class="kp kq kr ks gt mh mg mi bn mj mk bi"><span id="9e40" class="ml lb it mg b be mm mn l mo mp">console.log(status) // output below<br/>// {<br/>//   '0': 'NotStarted',<br/>//   '1': 'InProgress',<br/>//   '2': 'Done',<br/>//   NotStarted: 0,<br/>//   InProgress: 1,<br/>//   Done: 2<br/>// }</span></pre><p id="b20d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果我们想看到每个枚举值，这就是它</p><pre class="kp kq kr ks gt mh mg mi bn mj mk bi"><span id="8757" class="ml lb it mg b be mm mn l mo mp">console.log(Status.NotStarted); // 0<br/>console.log(Status.InProgress); // 1<br/>console.log(Status.Done); // 2<br/><br/>// not intuitive but getting the keys by indexing with the numeric value<br/>console.log(Status[0]) // NotStarted<br/>console.log(Status[1]) // InProgress<br/>console.log(Status[2]) // Done</span></pre><h2 id="5c5f" class="mq lb it bd lc mr ms dn lg mt mu dp lk kb mv mw lo kf mx my ls kj mz na lw nb bi translated">冒险的改变</h2><p id="d6a6" class="pw-post-body-paragraph jq jr it js b jt ly jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj mc kl km kn im bi translated">然后一个新的需求进来了，我们想要添加一个新的状态<code class="fe md me mf mg b">InReview</code>。如果我们只是将它添加到错误的位置，问题就出现了，这很容易发生。</p><pre class="kp kq kr ks gt mh mg mi bn mj mk bi"><span id="8fbc" class="ml lb it mg b be mm mn l mo mp">enum Status {<br/>  NotStarted,<br/>  InProgress,<br/>  InReview,<br/>  Done,<br/>}<br/>console.log(Status.InReview); // this is 2<br/>console.log(Status.Done); // 3 which is not 2 any more, a breaking change</span></pre><h1 id="f7b0" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">解决方案</h1><h2 id="31a0" class="mq lb it bd lc mr ms dn lg mt mu dp lk kb mv mw lo kf mx my ls kj mz na lw nb bi translated"><strong class="ak"> 1。实施开发实践</strong></h2><p id="aade" class="pw-post-body-paragraph jq jr it js b jt ly jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj mc kl km kn im bi translated">为了避免弄乱枚举值<br/>的内部索引/编号，只在末尾添加新值，但是这样做，我们失去了按照我们喜欢的顺序对枚举值进行排序的能力(在这种情况下，not started-&gt;in progress-&gt;in review-&gt;Done对许多进程来说看起来很直观和自然)</p><pre class="kp kq kr ks gt mh mg mi bn mj mk bi"><span id="29e7" class="ml lb it mg b be mm mn l mo mp">enum Status {<br/>  NotStarted,<br/>  InProgress,<br/>  Done,<br/>  InReview,<br/>}</span></pre><h2 id="03fa" class="mq lb it bd lc mr ms dn lg mt mu dp lk kb mv mw lo kf mx my ls kj mz na lw nb bi translated">2.将枚举定义为键值对</h2><pre class="kp kq kr ks gt mh mg mi bn mj mk bi"><span id="80fa" class="ml lb it mg b be mm mn l mo mp">enum Status {<br/>  NotStarted = 'NotStarted',<br/>  InProgress = 'InProgress',<br/>  Done = 'Done',<br/>}<br/>console.log(Status.NotStarted); // NotStarted<br/>console.log(Status.InProgress); // InProgress<br/>console.log(Status.Done); // Done</span></pre><p id="19e5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这种做法似乎很常见，以复制代码的轻微代价解决了问题。</p><h2 id="9e1f" class="mq lb it bd lc mr ms dn lg mt mu dp lk kb mv mw lo kf mx my ls kj mz na lw nb bi translated">3.使用联合</h2><pre class="kp kq kr ks gt mh mg mi bn mj mk bi"><span id="e8f8" class="ml lb it mg b be mm mn l mo mp">type Status = 'NotStarted' | 'InProgress' | 'Done';</span></pre><h2 id="67a0" class="mq lb it bd lc mr ms dn lg mt mu dp lk kb mv mw lo kf mx my ls kj mz na lw nb bi translated">延伸阅读:</h2><ul class=""><li id="41b8" class="nc nd it js b jt ly jx lz kb ne kf nf kj ng kn nh ni nj nk bi translated"><a class="ae nl" rel="noopener ugc nofollow" target="_blank" href="/typescript-must-know-fundamentals-for-your-next-tech-interview-or-project-255ae70df0a3"> TypeScript必备基础知识—类型别名和接口</a></li><li id="6067" class="nc nd it js b jt nm jx nn kb no kf np kj nq kn nh ni nj nk bi translated"><a class="ae nl" rel="noopener ugc nofollow" target="_blank" href="/use-typescript-keyof-like-a-pro-56f3a3d06b73">像专业人士一样使用Typescript keyof】</a></li><li id="81d8" class="nc nd it js b jt nm jx nn kb no kf np kj nq kn nh ni nj nk bi translated"><a class="ae nl" rel="noopener ugc nofollow" target="_blank" href="/typescript-classes-from-zero-to-hero-a429a3c96189">打字稿类——从零到英雄</a></li><li id="c559" class="nc nd it js b jt nm jx nn kb no kf np kj nq kn nh ni nj nk bi translated"><a class="ae nl" rel="noopener ugc nofollow" target="_blank" href="/next-level-your-typescript-runtime-type-validation-using-class-and-decorators-ddd2ce3c86f3">使用类和装饰器的下一级Typescript运行时类型验证</a></li><li id="68aa" class="nc nd it js b jt nm jx nn kb no kf np kj nq kn nh ni nj nk bi translated"><a class="ae nl" rel="noopener ugc nofollow" target="_blank" href="/mastering-typescript-generics-the-ultimate-guide-3a62afeff44">掌握类型脚本泛型:终极指南</a></li><li id="c096" class="nc nd it js b jt nm jx nn kb no kf np kj nq kn nh ni nj nk bi translated"><a class="ae nl" href="https://bootcamp.uxdesign.cc/typescript-tricks-and-tips-become-a-pro-in-no-time-5390aba151be" rel="noopener" target="_blank">打字技巧和提示:立即成为专业人士</a></li><li id="f813" class="nc nd it js b jt nm jx nn kb no kf np kj nq kn nh ni nj nk bi translated"><a class="ae nl" rel="noopener ugc nofollow" target="_blank" href="/generics-in-typescript-must-know-fundamentals-stupidly-simplified-e7b4d7ffc0e3">TypeScript中的泛型——愚蠢简化的基础知识</a></li><li id="c0f9" class="nc nd it js b jt nm jx nn kb no kf np kj nq kn nh ni nj nk bi translated"><a class="ae nl" rel="noopener ugc nofollow" target="_blank" href="/typescript-missed-this-but-you-shouldnt-runtime-type-validation-aa8a81ce4289"> Typescript遗漏了这一点，但你不应该—运行时类型验证</a></li><li id="ff23" class="nc nd it js b jt nm jx nn kb no kf np kj nq kn nh ni nj nk bi translated"><a class="ae nl" rel="noopener ugc nofollow" target="_blank" href="/typescript-enum-pitfalls-and-solutions-must-know-bb971cb0f7d2"> Typescript枚举陷阱和解决方案必须知道</a></li><li id="27e6" class="nc nd it js b jt nm jx nn kb no kf np kj nq kn nh ni nj nk bi translated"><a class="ae nl" href="https://bootcamp.uxdesign.cc/mastering-typescript-generics-the-ultimate-guide-essential-interface-techniques-86e793cf1fc" rel="noopener" target="_blank">掌握类型脚本泛型—终极指南—基本接口技术</a></li><li id="0a9f" class="nc nd it js b jt nm jx nn kb no kf np kj nq kn nh ni nj nk bi translated">【Javascript开发者经常忽略的Typescript特性</li><li id="bc34" class="nc nd it js b jt nm jx nn kb no kf np kj nq kn nh ni nj nk bi translated"><a class="ae nl" rel="noopener ugc nofollow" target="_blank" href="/mastering-intersection-and-union-types-in-typescript-the-ultimate-guide-essential-techniques-49aa9f6a188a">掌握打字稿中的交集和并集类型:终极指南和基本技巧</a></li></ul></div><div class="ab cl nr ns hx nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="im in io ip iq"><p id="f06a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果你觉得这个指南有帮助，请鼓掌并跟我来。通过<a class="ae nl" href="https://medium.com/@caopengau/membership" rel="noopener">链接</a>加入medium，获取我和所有其他优秀作家在medium上发表的所有优质文章。</p></div></div>    
</body>
</html>