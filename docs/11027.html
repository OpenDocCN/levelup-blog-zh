<html>
<head>
<title>How to schedule an SMS Marketing message with PHP and the Twilio Messaging API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用PHP和Twilio消息传递API安排SMS营销消息</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-schedule-an-sms-marketing-message-with-php-and-the-twilio-messaging-api-d2652ee9a644?source=collection_archive---------24-----------------------#2022-02-07">https://levelup.gitconnected.com/how-to-schedule-an-sms-marketing-message-with-php-and-the-twilio-messaging-api-d2652ee9a644?source=collection_archive---------24-----------------------#2022-02-07</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/6abcbfebfe4cef122920bdc82d32a4f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IkC7GE4qx4P6xzm2rncsUw.jpeg"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">肖恩·林在<a class="ae kf" href="https://unsplash.com/s/photos/programming?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="4f20" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">随着世界变得越来越数字化，智能手机开始在我们的日常生活中扮演越来越重要的角色。这些袖珍设备帮助我们更有效地工作，与来自世界任何地方的任何人交往，并允许我们访问无限的信息。如果所有这些活动变得相当激烈，我们可以通过一些购物疗法来放松，这又要感谢我们的智能手机。难怪我们会上瘾。</p><p id="b3ec" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一个普通人每天查看他们的智能手机<a class="ae kf" href="https://smallbiztrends.com/2020/03/2020-mobile-phone-usage-statistics.html" rel="noopener ugc nofollow" target="_blank"> <strong class="ki iu"> 160次</strong> </a>，34%的人在收到短信的<a class="ae kf" href="https://99firms.com/blog/sms-marketing-stats/#gref" rel="noopener ugc nofollow" target="_blank"> <strong class="ki iu"> 5分钟</strong> </a>内阅读短信，平均回复率为45%  ，很明显，智能手机对于任何一个坚定的数字营销者来说都是有价值的不动产。当然，社交媒体和电子邮件营销可能会产生所有的嗡嗡声，但对于任何认真想把竞争对手甩在身后的品牌来说，短信是一个不可忽视的渠道。</p><p id="54ab" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">短信营销非常有效，因为它以一种更加个性化的方式提供了与客户或潜在客户的直接接触。出于这个原因，它非常适合那些你想推动节日促销，发送秘密销售警报，甚至只是偶尔的生日问候的场景。通过在短信中加入你的产品或业务链接，你可以大幅提升你的参与度，因为短信的打开率要优于电子邮件。</p><p id="9aaf" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">目前，电子邮件的<a class="ae kf" href="https://neilpatel.com/blog/sms-marketing/" rel="noopener ugc nofollow" target="_blank"> <strong class="ki iu">使用率为98%</strong></a><strong class="ki iu"/>仅为20%，手机短信可能是信息过载的<a class="ae kf" href="https://www.forbes.com/sites/marketshare/2013/03/04/pulling-back-the-curtain-on-text-message-mobile-marketing/" rel="noopener ugc nofollow" target="_blank"><strong class="ki iu"/></a>数字营销世界中最有保障的阅读方式。然而，似乎许多公司宁愿使用<a class="ae kf" href="https://www.forbes.com/sites/marketshare/2013/03/04/pulling-back-the-curtain-on-text-message-mobile-marketing/" rel="noopener ugc nofollow" target="_blank"> <strong class="ki iu">莫尔斯电码</strong> </a>进行广告宣传，也不愿接近短信营销。如果你是短信害羞的营销人员，不要担心，因为有希望。恰好在2022年1月12日，Twilio发布了一个<a class="ae kf" href="https://support.twilio.com/hc/en-us/articles/4406956913307-Can-I-schedule-Twilio-messages-to-be-sent-at-a-future-time-or-date-" rel="noopener ugc nofollow" target="_blank"> <strong class="ki iu">消息调度功能</strong> </a>，我们将利用它来执行一次短信营销活动。</p><p id="c5b6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本教程中，您将学习如何使用PHP和Twilio Messaging API发送预定的SMS营销消息。</p><h1 id="05dc" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">教程要求</h1><ul class=""><li id="b548" class="mc md it ki b kj me kn mf kr mg kv mh kz mi ld mj mk ml mm bi translated">PHP 7.4。最好是版本8或更高版本</li><li id="30ea" class="mc md it ki b kj mn kn mo kr mp kv mq kz mr ld mj mk ml mm bi translated"><a class="ae kf" href="https://getcomposer.org/" rel="noopener ugc nofollow" target="_blank">全球安装的作曲家</a></li><li id="8bf7" class="mc md it ki b kj mn kn mo kr mp kv mq kz mr ld mj mk ml mm bi translated">Twilio账户:如果你是Twilio <a class="ae kf" href="http://www.twilio.com/referral/QlBtVJ" rel="noopener ugc nofollow" target="_blank">的新手，点击这里创建一个免费账户</a>。</li><li id="de5e" class="mc md it ki b kj mn kn mo kr mp kv mq kz mr ld mj mk ml mm bi translated">接收短信的智能手机</li></ul><h1 id="b421" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">开立一个Twilio帐户并获得一个电话号码</h1><p id="d4e1" class="pw-post-body-paragraph kg kh it ki b kj me kl km kn mf kp kq kr ms kt ku kv mt kx ky kz mu lb lc ld im bi translated">如果你是Twilio新手，那么首先要做的就是免费注册<a class="ae kf" href="https://www.twilio.com/" rel="noopener ugc nofollow" target="_blank"><strong class="ki iu"/></a>并购买一个电话号码。Twilio向所有新用户提供10美元的信用，您可以将这些信用用于该项目。</p><p id="4ef5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">注册后，您需要选择您的Twilio电话号码，为此，请登录您的<a class="ae kf" href="https://console.twilio.com/?frameUrl=%2Fconsole%3Fx-target-region%3Dus1" rel="noopener ugc nofollow" target="_blank"> <strong class="ki iu">控制台</strong> </a>并点击“探索产品”。</p><figure class="mw mx my mz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mv"><img src="../Images/315d5481a72a24ee2dfb1aff8d9f6f99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ZoyCXJYiorZAL6nS"/></div></div></figure><p id="e948" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后滚动到页面底部，在“超级网络”下，点击“电话号码”。然后点击“购买号码”选项，在此页面上，您可以继续选择您的号码。尽管您可以选择特定于您所在国家的号码，但请注意，并非所有国家都具备语音、短信、彩信和传真的全部功能。我在伦敦，Twilio的英国号码没有彩信功能，所以我将选择美国号码。这是因为我想要一个数字，让我可以灵活地创造我想要的任何东西。</p><figure class="mw mx my mz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mv"><img src="../Images/f80124fa8986de5110da26e747853ef4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*MmJg1xPaZHx9DPvt"/></div></div></figure><p id="9bb8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在点击搜索按钮查看可用号码列表。如果您不喜欢呈现给您的第一个列表，请单击页面底部的“刷新结果”按钮，获得一个全新的列表。单击您要购买的号码旁边的“购买”按钮。</p><h1 id="ae6a" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">消息服务设置</h1><p id="2cd5" class="pw-post-body-paragraph kg kh it ki b kj me kl km kn mf kp kq kr ms kt ku kv mt kx ky kz mu lb lc ld im bi translated">接下来，您需要设置消息服务。再次点击“探索产品”,这次选择“信息”选项。点击服务，然后点击“创建信息服务”按钮。</p><figure class="mw mx my mz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mv"><img src="../Images/fd2e5fb32296435c163355d6b63ddc7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ra9FHCFWfyXEz5cE"/></div></div></figure><p id="e957" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本教程中，我将通知我的用户一个情人节促销，所以我将在“消息服务友好名称”文本字段中键入“情人节促销”。你可以选择任何你想要的名字。然后在下拉列表中选择“选择您希望使用消息的目的”，点击“通知我的用户”选项。</p><figure class="mw mx my mz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mv"><img src="../Images/1334446ccfa749dbc527c55916cdd206.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FTS1BlNhVizaUwhM"/></div></div></figure><p id="fa4f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">完成后，单击“创建消息服务”按钮，这样您就可以进入此设置的第二步。接下来，您需要添加发件人。发送者代表可以使用Twilio消息传递API发送和接收消息的通道、号码类型或消息传递类型。您将在这里添加您刚刚购买的Twilio号码，因此请单击“添加发件人”按钮开始添加。选择“电话号码”选项，然后点击继续。</p><figure class="mw mx my mz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi na"><img src="../Images/e216e4cb410d9dc360c1c5111a69d11c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*MWorMwnPnra0sVFA"/></div></div></figure><p id="9351" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">单击您要添加的号码旁边的复选框，然后单击“添加电话号码”按钮。</p><figure class="mw mx my mz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mv"><img src="../Images/832e7ed15e82a5b78c924815fce9b0cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*YGyc65soo59GZl2U"/></div></div></figure><p id="13b4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，单击“步骤3:设置集成”按钮。您不需要更新此页面上的任何信息，因此请点击“第4步:添加合规信息”按钮。同样，此页面不需要进行任何更改，因此请单击“完成消息服务设置”按钮。</p><figure class="mw mx my mz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mv"><img src="../Images/f60f6cffbe4cca49da95b8d55e2c474b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8h0nxmmwu2a74u5o"/></div></div></figure><p id="ce70" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在让我们通过点击“尝试发送消息”按钮来测试它是否工作。</p><figure class="mw mx my mz gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nb"><img src="../Images/be0c6d4e5e1cb98a5ff4f8d28c340709.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*RQgQJNdAnRJqsNuJ"/></div></div></figure><p id="7a90" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在“至电话号码”文本字段中，添加您的<a class="ae kf" href="https://support.twilio.com/hc/en-us/articles/223180048-Adding-a-Verified-Phone-Number-or-Caller-ID-with-Twilio" rel="noopener ugc nofollow" target="_blank">验证过的</a>个人电话号码。在“来自消息服务SID”中，选择您新创建的消息服务。对于“正文”字段，我添加了情人节<a class="ae kf" href="https://www.crazyegg.com/blog/call-to-action-examples/" rel="noopener ugc nofollow" target="_blank"> <strong class="ki iu">号召行动</strong> </a>消息，但是你可以写任何你想写的。点击“发送测试短信”按钮，然后确认您的手机已收到该消息。</p><figure class="mw mx my mz gt ju gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/28b8c966a1989ac6dccbef688954b9e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:666/format:webp/1*gVK_tyT6smqMV_sLeDwtYw.png"/></div></figure><p id="70e8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">祝贺您成功设置了新的消息服务。现在是时候写一些PHP代码了，这样我们就可以安排我们的短信营销信息。</p><h1 id="ed0f" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">让我们创建PHP项目</h1><p id="d282" class="pw-post-body-paragraph kg kh it ki b kj me kl km kn mf kp kq kr ms kt ku kv mt kx ky kz mu lb lc ld im bi translated">首先，您需要创建一个项目目录，然后切换到该目录并安装Twilio PHP助手库。要做到这一切，请在终端中键入以下内容。</p><figure class="mw mx my mz gt ju"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="9282" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了能够使用Twilio发送SMS消息，您的PHP应用程序需要访问您的帐户凭证，为此，您需要将以下代码行复制并粘贴到终端。</p><figure class="mw mx my mz gt ju"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="bf16" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">接下来，我们将创建一个名为“sms-scheduler.php”的文件来存放所有的代码，用于安排我们将发送给用户的sms营销消息。为此，请在项目的根目录中运行以下代码。</p><figure class="mw mx my mz gt ju"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="23cd" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们现在需要编写代码来安排SMS营销消息。</p><h1 id="ca79" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">让我们写一些代码</h1><p id="8a7e" class="pw-post-body-paragraph kg kh it ki b kj me kl km kn mf kp kq kr ms kt ku kv mt kx ky kz mu lb lc ld im bi translated">打开sms-scheduler.php文件，然后将以下代码复制并粘贴到其中。</p><figure class="mw mx my mz gt ju"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="70c8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">代码首先需要您需要的所有依赖项。然后一个新的Twilio对象用你的Twilio账户SID和令牌值初始化。然后，首先添加您的Twilio验证个人号码，创建一条短信发送给您的用户。接下来，您需要包含您之前创建的“消息服务ID”。你可以进入你的控制台，点击“信息”下的“服务”来找到它</p><p id="ed10" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">“正文”字段包含您想要发送的实际消息。“send_at”设置要发送的文本消息的确切日期和时间。目前，该功能仅允许提前1小时到7天安排消息。“scheduleType”描述了要设置的调度类型。同样，该功能目前仅允许“固定”选项最后，代码以一个命令结束，该命令打印出您在开始时用来初始化Twilio对象的“$sid”号。</p><h1 id="3a95" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">我们去试驾吧</h1><p id="cbaf" class="pw-post-body-paragraph kg kh it ki b kj me kl km kn mf kp kq kr ms kt ku kv mt kx ky kz mu lb lc ld im bi translated">为了测试代码是否有效，通过在项目的根目录下运行下面的命令，使用PHP的内置服务器启动应用程序。</p><figure class="mw mx my mz gt ju"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="6c5e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">接下来，打开您的浏览器到<a class="ae kf" href="http://0.0.0.0:8080" rel="noopener ugc nofollow" target="_blank"> http://0.0.0.0:8080 </a>，假设一切顺利，您应该看到您的帐户“$id”打印在屏幕上。你需要等一个小时才能收到短信。</p><figure class="mw mx my mz gt ju gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/c784363235fafdd780a64bb5a03a78f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:666/format:webp/1*puhKQq2Vycbw4IQkhI8pHQ.png"/></div></figure><p id="fe9f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">祝贺您完成本教程！</p><p id="2787" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，您已经拥有了以编程方式安排SMS营销活动所需的所有工具和知识。</p></div></div>    
</body>
</html>