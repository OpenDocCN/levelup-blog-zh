<html>
<head>
<title>Chaos Engineering — How to break your AWS Infrastructure on purpose</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">混沌工程——如何故意破坏您的AWS基础设施</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/chaos-engineering-how-to-break-aws-infrastructure-on-purpose-3a48ba32aa2e?source=collection_archive---------11-----------------------#2020-06-24">https://levelup.gitconnected.com/chaos-engineering-how-to-break-aws-infrastructure-on-purpose-3a48ba32aa2e?source=collection_archive---------11-----------------------#2020-06-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="0bf5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">故意破坏您的系统基础设施—真的吗？为什么会有人这么做？</p><p id="fa35" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这可能是你想到的第一个问题。但是，这正是我们在这里努力实现的目标。</p><p id="80db" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这篇文章中，我将谈论:</p><ol class=""><li id="1b4d" class="kl km iq jp b jq jr ju jv jy kn kc ko kg kp kk kq kr ks kt bi translated">什么是混沌工程及其重要性。</li><li id="82cc" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">满足先决条件—设置您的AWS帐户、终端上的CLI、设置基础架构(创建自动扩展组(ASG)并连接3个EC2实例)</li><li id="fe56" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">设置我们的第一个混沌实验——确定稳态假设，并使用AWS CLI删除一个随机EC2实例</li><li id="0bef" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">混沌实验观察——检查你的基础强度并完成你的混沌实验。</li><li id="3c24" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">可以实现的其他类型的混沌实验想法(一些有趣的想法..！！！).</li></ol><blockquote class="kz"><p id="ba57" class="la lb iq bd lc ld le lf lg lh li kk dk translated">1.什么是混沌工程及其重要性。</p></blockquote><figure class="lk ll lm ln lo lp gh gi paragraph-image"><div class="gh gi lj"><img src="../Images/f1e9ea3ff41044a7a97361f566ecd36a.png" data-original-src="https://miro.medium.com/v2/resize:fit:440/format:webp/1*lbMxBjhAaH_1ckgthGekQQ.png"/></div></figure><p id="62fd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">混沌工程是一种在没有人工干预的情况下测试系统的健壮性、可靠性和在灾难中生存的能力的工程。</p><p id="a504" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这个过程中，我们手动高效地中断我们的基础设施，并测试我们的应用程序和基础设施自我修复的速度和效率，以及它们在灾难或任何系统灾难期间茁壮成长的能力。</p><p id="cbc6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">听起来很有趣，是吧？</p><p id="b5f1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">嗯，这非常有趣，因为我们会试验、玩和破坏我们的基础设施，并敏锐地观察它如何反应，从中学习和改进。这使得我们的基础架构更加健壮、稳定，并对我们的生产堆栈更有信心(我认为这非常重要)。</p><p id="510e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们将了解我们系统中的弱点和漏洞，并帮助我们在测试环境中提前克服这些问题。</p><p id="f555" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们可以在我们的系统上进行许多混沌实验，比如删除一个随机的EC2实例，删除服务等等，这些我们将在最后一节中探讨。</p><blockquote class="kz"><p id="b330" class="la lb iq bd lc ld ls lt lu lv lw kk dk translated">解决先决条件—在终端上设置您的AWS帐户和CLI</p></blockquote><p id="b12e" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">让我们通过设置我们的基础设施来破坏。</p><blockquote class="mc md me"><p id="8577" class="jn jo mf jp b jq jr js jt ju jv jw jx mg jz ka kb mh kd ke kf mi kh ki kj kk ij bi translated">先决条件:</p></blockquote><ol class=""><li id="5dc7" class="kl km iq jp b jq jr ju jv jy kn kc ko kg kp kk kq kr ks kt bi translated">从AWS帐户获取访问密钥ID和秘密访问密钥</li><li id="4836" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">在本地计算机上安装AWS CLI</li><li id="bda2" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">在您的计算机上为AWS帐户配置AWS凭据</li><li id="a944" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">设置基础架构—创建一个自动扩展组，并根据需要和最小容量将3个EC2实例连接到该组(假设其中正在运行任务/服务)。</li><li id="a148" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">通过对照新创建的ASG检查实例数量来验证AWS CLI。</li></ol><blockquote class="mc md me"><p id="0056" class="jn jo mf jp b jq jr js jt ju jv jw jx mg jz ka kb mh kd ke kf mi kh ki kj kk ij bi translated">从AWS帐户获取访问密钥ID和秘密访问密钥</p></blockquote><p id="d912" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">前往<a class="ae mj" href="https://aws.amazon.com/console/" rel="noopener ugc nofollow" target="_blank">https://aws.amazon.com/console</a>/并登录AWS控制台。导航到IAM部分- &gt;仪表板- &gt;管理安全凭证→访问密钥选项卡，提取您的访问密钥ID和秘密访问密钥。</p><p id="c7c5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你还没有，那就继续创造吧。</p><figure class="ml mm mn mo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi mk"><img src="../Images/6bb70ff845de36a8a1629ef3aafc0bcc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sgiktbAy8vkC-3cCI7Oryw.png"/></div></div><figcaption class="mt mu gj gh gi mv mw bd b be z dk translated">AWS访问键(出于安全考虑，被屏蔽)</figcaption></figure><blockquote class="mc md me"><p id="9428" class="jn jo mf jp b jq jr js jt ju jv jw jx mg jz ka kb mh kd ke kf mi kh ki kj kk ij bi translated">在本地计算机上安装AWS CLI</p></blockquote><p id="eebc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">记下密钥后，让我们在您的系统上安装AWS CLI v2。如果您已经进行了配置，请继续执行步骤3，在此我们将创建AWS基础架构。</p><p id="b7e9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">按照AWS文档中提到的命令安装AWS CLI。</p><div class="mx my gp gr mz na"><a href="https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2-mac.html" rel="noopener  ugc nofollow" target="_blank"><div class="nb ab fo"><div class="nc ab nd cl cj ne"><h2 class="bd ir gy z fp nf fr fs ng fu fw ip bi translated">在macOS上安装AWS CLI版本2</h2><div class="nh l"><h3 class="bd b gy z fp nf fr fs ng fu fw dk translated">本主题介绍如何在macOS上安装、更新和删除AWS CLI版本2。AWS CLI版本1和2使用…</h3></div><div class="ni l"><p class="bd b dl z fp nf fr fs ng fu fw dk translated">docs.aws.amazon.com</p></div></div></div></a></div><p id="2f07" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">安装AWS CLI后，在你的mac终端输入<code class="fe nj nk nl nm b">aws</code>,应该会列出类似下图的内容。这将确认并验证AWS CLI已成功配置。</p><figure class="ml mm mn mo gt lp gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/d50e3b15b8a24c9f8d0fd7f339067c56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1252/format:webp/1*JsrxGjSDiySRVvDLIysBJA.png"/></div><figcaption class="mt mu gj gh gi mv mw bd b be z dk translated">AWS CLI验证</figcaption></figure><blockquote class="mc md me"><p id="2d40" class="jn jo mf jp b jq jr js jt ju jv jw jx mg jz ka kb mh kd ke kf mi kh ki kj kk ij bi translated">在您的计算机上为AWS帐户配置AWS凭据</p></blockquote><p id="8b67" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，是时候在本地机器上映射您的AWS凭证了。我们需要在您的机器上配置访问密钥ID和秘密访问密钥，以便您可以从您的机器连接到您的AWS帐户，并使用AWS CLI创建和中断Infra。</p><p id="4de9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe nj nk nl nm b">aws configure</code>应该做的把戏，并要求凭据，地区和输出格式。您可能希望将其配置为下图所示。</p><figure class="ml mm mn mo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi no"><img src="../Images/897e9b485b8513b7b7c4ee4222c23146.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K1QLE3YxWS8muyvxdiN3Ng.png"/></div></div></figure><p id="2c3e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们可以去你的<code class="fe nj nk nl nm b">~/.aws/credentials</code>验证这一点</p><p id="fb7b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个文件验证我们刚刚在终端中添加的凭证，并显示密钥。完成这一步后，我们现在可以通过AWS CLI从我们的机器访问AWS帐户。尤里卡…！！！</p><blockquote class="mc md me"><p id="021c" class="jn jo mf jp b jq jr js jt ju jv jw jx mg jz ka kb mh kd ke kf mi kh ki kj kk ij bi translated">设置基础架构—创建一个自动扩展组，并根据需要和最小容量将3个EC2实例连接到该组(假设其中正在运行任务/服务)。</p></blockquote><p id="c472" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们将使用AWS CLI来创建一个混沌实验并破坏实例。目前，我们将创建一个自动缩放组，并使用AWS控制台附加3个EC2实例。</p><p id="a255" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">直接进入AWS控制台，搜索EC2，进入“自动缩放组”选项卡，创建一个新的自动缩放组。</p><p id="7266" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">a.选择适当的实例类型(最好是t2.micro -free层)</p><p id="8a7d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">b.创建新的启动配置，并关联IAM角色(如果有)。</p><p id="4b68" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">c.用最少3个、最多6个EC2实例创建ASG，并将其添加到所需的VPC和子网中。对于这个示例实验，默认值就足够了。</p><figure class="ml mm mn mo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi np"><img src="../Images/cb8934a25bdd8d911bcef6a9bb16df58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*beHBcRdlW9RAbt3L730BSQ.png"/></div></div></figure><figure class="ml mm mn mo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi nq"><img src="../Images/65d93e4fa533ea31f0d370f02a3d313d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U1kFKSInoCH1WLwFVcjXvg.png"/></div></div></figure><blockquote class="mc md me"><p id="071e" class="jn jo mf jp b jq jr js jt ju jv jw jx mg jz ka kb mh kd ke kf mi kh ki kj kk ij bi translated">通过对照新创建的ASG检查实例数量来验证AWS CLI。</p></blockquote><p id="4fb5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">新的ASG被创建，3个新的EC2实例被自动启动并进入稳定状态。我们建立了基础设施。对于这个实验，我们可以假设这就是我们后端基础设施的设置方式，现在我们将开始中断。我们可以在最后一节讨论更多的中断技术。</p><figure class="ml mm mn mo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi nr"><img src="../Images/cb004e6ab593a29ed384468c80b030cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qhaUq3RMLcH0XjZtZ1IBhg.png"/></div></div></figure><blockquote class="kz"><p id="1074" class="la lb iq bd lc ld le lf lg lh li kk dk translated">设置我们的第一个混沌实验——确定稳态假设，并使用AWS CLI删除一个随机EC2实例</p></blockquote><blockquote class="mc md me"><p id="7711" class="jn jo mf jp b jq lx js jt ju ly jw jx mg lz ka kb mh ma ke kf mi mb ki kj kk ij bi translated">混沌实验装置:</p></blockquote><p id="c3f1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，我们将从我们的自动缩放组中有意地破坏一个随机EC2实例，并观察它如何自愈和重新稳定自己。我们将测试实例的可用性，并仔细观察达到稳定状态所需的时间。</p><p id="9046" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">转到您的终端，获取与我们的ASG相关联的EC2实例的列表。我们将获得列表和实例细节及其id。</p><p id="8d8d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们将从这个列表中选择一个随机实例，从中获取实例ID，并提供CLI命令来动态终止这个随机实例，并观察自动修复是如何发生的。</p><blockquote class="mc md me"><p id="1f6d" class="jn jo mf jp b jq jr js jt ju jv jw jx mg jz ka kb mh kd ke kf mi kh ki kj kk ij bi translated">获取ASG的详细信息:我创建的ASG名称是“中型助理秘书长”</p></blockquote><p id="17a9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe nj nk nl nm b">aws autoscaling describe-auto-scaling-groups --auto-scaling-group-name medium-asg</code></p><figure class="ml mm mn mo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi ca"><img src="../Images/8b57cda45c55e25aea7faae5013309aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*StO0OtrLyAnnNf9_HR6HRg.png"/></div></div></figure><p id="f3ec" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">“实例”部分中的上述列表确认了我们目前在ASG的AWS帐户中有3个EC2实例在运行。</p><blockquote class="mc md me"><p id="048f" class="jn jo mf jp b jq jr js jt ju jv jw jx mg jz ka kb mh kd ke kf mi kh ki kj kk ij bi translated">现在，让我们提取一个EC2实例ID</p></blockquote><p id="5deb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">instance id = ` AWS auto scaling describe-auto-scaling-groups-auto-scaling-group-name medium-ASG-query auto scaling groups[0]。{val:Instances[0]。InstanceId} —输出文本` 1</p><p id="b06e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们遍历上面收到的JSON，并在里面循环，从数组的第一个值中提取instanceId，并将其赋给临时变量InstanceID。我们将把这个变量传递给下一个命令，在那里终止实例。</p><figure class="ml mm mn mo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi ns"><img src="../Images/d8beec912e21f62718b3f77caf456f98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RYKwHJXnBArrJwfVy_dtzg.png"/></div></div></figure><blockquote class="mc md me"><p id="39ad" class="jn jo mf jp b jq jr js jt ju jv jw jx mg jz ka kb mh kd ke kf mi kh ki kj kk ij bi translated">从ASG中删除实例</p></blockquote><p id="6729" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">aws自动扩展termin ate-instance-in-auto-scaling-group-instance-id＄instance id-no-should-decrement-desired-capacity</p><figure class="ml mm mn mo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi nt"><img src="../Images/5aadac98995753c510505858448d5092.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N-OFU37TGUyiaSx1QJSZEQ.png"/></div></div></figure><p id="97c6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">响应应该返回一个JSON，表明实例正在被取出并正在进行中。</p><blockquote class="kz"><p id="4745" class="la lb iq bd lc ld ls lt lu lv lw kk dk translated">混沌实验观察——检查你的基础强度并完成你的混沌实验。</p></blockquote><p id="e759" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">立即转到AWS控制台，打开EC2实例部分。我们必须观察到我们的EC2实例(我们在上面的终止命令中提供的ID)被终止了，或者正在被终止。</p><p id="f778" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">新的EC2实例也应该立即出现。</p><figure class="ml mm mn mo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi nu"><img src="../Images/f15a68da88be6866f7ce273f3462b5d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U_opBoMmExuWEXiZ-krUlQ.png"/></div></div></figure><p id="8aed" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是本实验中最重要的一步，因为这证明了我们的基础架构是稳定的，并且一个新的实例正在同一个可用性区域中出现。请注意，这个新实例可能出现在同一个AZ中，也可能不出现在同一个AZ中。这取决于在创建ASG时定义了多少个az，以确保我们获得最大的可用性。</p><p id="1085" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果旧的EC2实例没有终止，或者新的EC2实例没有出现，那么我们可能需要检查ASG策略配置。</p><p id="7855" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你已经走了这么远，那么恭喜你…！！！你已经完成了你的第一个混沌实验。干得好。</p><blockquote class="kz"><p id="c04f" class="la lb iq bd lc ld ls lt lu lv lw kk dk translated">可以实现的其他类型的混沌实验想法(一些有趣的想法..！！！).</p></blockquote><p id="bcdf" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">这是我们在这里进行的一个非常小的实验，破坏了一个随机的EC2实例。我们可以将这种干扰扩展到许多领域，并在您的基础设施上安排各种实验，以提高您的信心水平。</p><ol class=""><li id="0297" class="kl km iq jp b jq jr ju jv jy kn kc ko kg kp kk kq kr ks kt bi translated">停止在您的群集上运行的随机ECS服务，并查看您的ECS如何启动新服务—与EC2实例相比，ECS启动新服务所需的时间应该相对较快。</li><li id="8a7c" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">将ECS服务的数量降低到期望的水平。例如，配置您的命令/实验，将ECS服务(任务)减少到50%。—一旦您将这些任务提交下来，ECS就会介入并提交这些任务。在集群级别的AWS控制台上观察这一点。</li><li id="f885" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">将ASG中的实例数量减少到50%或75%。在此中断期间，继续点击您的ELB，观察您得到的5xx个错误的数量。您可能希望这个数字非常低。</li><li id="4ee3" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">如果您的应用程序在us-east-1和us-west-1等不同区域具有弹性，并且您在Route 53级别启用了自动故障转移，那么就继续中断一个区域。安排您的实验，通过删除一个区域中的所有实例来关闭整个区域，并查看您的基础架构故障转移到另一个区域的速度和效率。—这应该是快速的，否则你将会有更多的错误。确定53号路线是明智的，但我们仍然需要混乱的度量标准。</li><li id="3568" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">如果您在Apache Kafka上有一个作为生产者或消费者运行的微服务，那么在一个区域上中断您的主题，并确保您的故障转移主题被禁用，并且故障转移是无缝的。</li><li id="677c" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">在你的微服里，引入一个功能，一段时间后生效，随机抛出5xx。确保您的CloudWatch警报启动并进行故障转移，或者按照预期采取相应的行动。</li></ol><blockquote class="mc md me"><p id="740d" class="jn jo mf jp b jq jr js jt ju jv jw jx mg jz ka kb mh kd ke kf mi kh ki kj kk ij bi translated"><strong class="jp ir"> <em class="iq">请注意:在实验进行的同时，让JMeter脚本针对您的微服务/API运行总是明智的，这样我们就可以跟踪应用程序在混乱期间如何响应的指标。</em>T3】</strong></p></blockquote><p id="a8bb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们的目标是尽量减少错误。如果错误数量更多，我们需要微调我们的基础架构、警报和故障转移技术，以获得更好的结果。</p><p id="da12" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这些是实现混沌工程的一些方法。这个列表并不详尽，关于如何制造混乱有很多想法。请尽可能地探索。</p><p id="f3b2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我希望我的这篇文章已经帮助你更好地理解了混沌工程的概念。快乐编码..！！</p><p id="9924" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你喜欢这篇文章，请尽可能多地在页面底部拍手。它鼓励我写更多。</p></div></div>    
</body>
</html>