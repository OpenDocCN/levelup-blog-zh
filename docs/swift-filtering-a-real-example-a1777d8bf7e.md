# 快速过滤:一个真实的例子

> 原文：<https://levelup.gitconnected.com/swift-filtering-a-real-example-a1777d8bf7e>

![](img/006f7ac9c5c357f33b61f22c2d29c5a6.png)

内森·杜姆劳在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上的照片

在任何语言中，你都可以管理*事物的列表*。最有可能的是，如果你有一个列表，那么在某个时候你必须过滤它。最有可能的是，您将不得不根据众多标准对其进行多次过滤。让我们从基础开始。

# 一次一个过滤器

现在是讨论高阶函数的时候了。高阶函数是以另一个函数为参数的函数。也可以是返回函数的函数，但我们不会讨论这个。接受函数的函数。一开始可能看起来很陡，但是一旦你看到了，你就会明白。

筛选数据最简单的方法是创建一个新列表，只复制所需的元素。

你可以把这个放到一个函数里，每次都用。但是多亏了高阶函数，我们现在可以更快地完成它。

filter 函数接受一个函数，并将其应用于所有元素。然后，我们使用变量 *bookBefore2020HOF* 来存储结果。

你可以在媒体和互联网上找到很多这方面的文章。如果你还不熟悉这个概念，我强烈建议你查阅其他文章来获得更多的解释。

# 多次过滤，多次过滤。

让我们深入当前的主题:如何根据多个标准过滤列表。我们的图书清单将不得不根据三个不同的标准(年份，最喜欢的，作者的名字)过滤。你可以同时应用所有的需求，或者任何其他的可能性。

这八个选项是:

*   没有过滤器
*   仅过滤器 1
*   仅过滤器 2
*   仅过滤器 3
*   过滤器 1 和过滤器 2
*   过滤器 1 和过滤器 3
*   过滤器 2 和过滤器 3
*   过滤器 1、过滤器 2 和过滤器 3

让我们试试**而不是**写八个不同的函数。**我们只写一个函数吧。**

我们的函数将接受数组和我们将创建的过滤器对象。

我们的过滤器结构将代表这三个标准。

你可以看到最喜欢的是一个枚举。这是代码。

每次你在一个布尔值上有一个过滤器，你只有两种可能:是和不是*这就是为什么我们有布尔值；).*

但是如果你考虑到过滤器可以或者不可以被应用的事实，那么你有三种可能:是，否，没有过滤器。

在这种情况下，使用枚举比管理 IF 情况更快。

我们得到了支持它的结构和必要的枚举。让我们转到函数。该函数将使用数组和结构 SearchingBook。该方法的输出将是一个新的数组，其中的数据已被过滤。

我们得到了签名:

```
func filterBooks(books: [Book], by filters: SearchingBook) -> [Book]
```

对于代码，这里有两个逻辑。

您可以从一个空数组开始，然后添加与过滤器匹配的书籍。或者可以从一本集子开始，去掉不符合的书。第一种方法需要处理重复。这并不难，但却是我们可以避免的额外一步。

让我们用第二个选择。

由于第一个过滤器很简单，我们将直接应用它。

我们拿出完整的列表，应用第一个过滤器。我们使用 double 条件来处理 *No Filter* 。如果值为 0，表达式将始终为真，我们将保留所有的书。

我们的第二个过滤器是在*最喜欢的*领域。

我们使用 ENUM 来处理这三种可能性。

如果我们只想要最喜欢的书，我们就去掉不喜欢的。如果我们只想要不喜欢的书，我们会删除所有喜欢的书。

最后，如果我们想要所有的书，我们退出开关而不删除任何东西。

我相信你注意到了另一个高阶函数 *removeAll(where:)* 的使用。名字说明了一切。它从列表中移除符合特定条件的所有元素。

最后一个过滤器在作者的名字上。我们将混合使用这两种过滤器。我们将使用 IF 语句来处理 *No Filter* 的情况，并使用 *removeAll(where:)* 高阶函数来过滤书籍。

现在我们已经应用了三个过滤器，可以返回数据了。

```
**return** bookFiltered
```

*完整功能*

让我们回顾一下我们所拥有的:

*   处理不同过滤器的结构
*   用于处理布尔筛选器的枚举
*   一个将它们混合起来过滤数据的函数

首先，你可以一直使用你的函数，过滤或者不过滤。

不再有*if*来处理所有的可能性。添加新的过滤器也更容易。你只需要更新结构和功能，仅此而已。

第二，这与 SwiftUI 配合得非常好；).

您需要将过滤器按钮映射到结构，并使用列表中的函数。仅此而已，没别的了。

当用户激活过滤器时，数据被过滤并呈现。如果用户取消所有选择，将显示所有数据。

可以在这里找到我的游乐场项目:[游乐场](https://github.com/satan87/MEDIUM_FiltersSort)。