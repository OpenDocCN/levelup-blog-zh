<html>
<head>
<title>Automated Crypto Trading with Python and Binance</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python和币安实现自动加密交易</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/automated-crypto-trading-with-python-and-binance-7223b1ad36d8?source=collection_archive---------23-----------------------#2022-10-17">https://levelup.gitconnected.com/automated-crypto-trading-with-python-and-binance-7223b1ad36d8?source=collection_archive---------23-----------------------#2022-10-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="c00e" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">python-币安简介</h2></div><p id="0a16" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="kk iu">免责声明</strong>:我不鼓励人们交易加密货币，也不对由此造成的损失承担任何责任。事实上，我对高风险投资抱有相当程度的怀疑，尤其是加密货币。当然，盈利是可能的，但你的资产也会完全亏损。</p><figure class="lf lg lh li gt lj gh gi paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="gh gi le"><img src="../Images/4efbf6249b854a4c60f4c1593704aba5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OjWfTjScBX4f-6qtB8NmtA.jpeg"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk translated"><a class="ae lu" href="https://unsplash.com/@kanchanara?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">坎查纳拉</a>在<a class="ae lu" href="https://unsplash.com/s/photos/binance?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="66ec" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然而，如果你仍然对这个话题感兴趣，特别是对Python和币安的自动化交易，这篇文章应该分享一些见解。</p><h1 id="d247" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">币安</h1><p id="e829" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">这篇文章涵盖了币安的Python API的用法。<a class="ae lu" href="https://www.binance.com/en" rel="noopener ugc nofollow" target="_blank">币安</a>可以说是全球最大的加密货币交易所之一。它的一些优点是使用简单(包括自动化)，以及相对较低的交易费用(1%)。当然也有其他的，也提供编程访问的API，你应该选择最适合你的——但是这篇文章与币安和Python有关。</p><p id="0f9a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你刚到币安，请随时使用我的<a class="ae lu" href="https://www.binance.com/en-GB/activity/referral-entry/CPA?fromActivityPage=true&amp;ref=CPA_008DHX4MEN" rel="noopener ugc nofollow" target="_blank">推荐链接</a>注册，这样对每个人都有好处。</p><h1 id="9e6c" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">API设置</h1><p id="a725" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">对于API的选择，也有几个选项——这里我们讨论<a class="ae lu" href="https://python-binance.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank">python-币安</a>，这可能是最常用的。</p><p id="5b51" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要安装，请运行:</p><pre class="lf lg lh li gt ms mt mu mv aw mw bi"><span id="69db" class="mx lw it mt b gy my mz l na nb">pip install python-binance</span></pre><p id="90be" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">接下来，我们必须创建一个API密钥。为此，请登录币安，点击您的个人资料图标，然后选择“API管理”。然后，选择“创建API”并完成安全问题。</p><p id="c9d7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">请注意显示的<strong class="kk iu"> API密钥</strong>和<strong class="kk iu">密钥</strong> —当导航离开该站点时，该密钥将不再可见。为了能够在即将到来的应用程序中使用该键，选择“编辑权限”，然后切换“启用现货&amp;保证金交易”(以及您想到的任何其他可能的用例)。不过需要注意的是:这将密钥设置为“live ”,拥有它的每个人都可以用你的账户执行任意交易。</p><p id="88d5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">管理键而不把它们粘贴到代码中(并把它们提交给git……)的一种方法是使用环境变量。为此(在Linux下)，执行</p><pre class="lf lg lh li gt ms mt mu mv aw mw bi"><span id="a3ec" class="mx lw it mt b gy my mz l na nb">echo ‘export binance_api={API Key}’ &gt;&gt; ~/.bashrc</span><span id="b3ab" class="mx lw it mt b gy nc mz l na nb">echo ‘export binance_secret={Secret Key}’ &gt;&gt; ~/.bashrc</span></pre><p id="3580" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">并重新加载您的终端。</p><h1 id="3b8a" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">API用法</h1><p id="747b" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">首先，我们初始化币安客户端:</p><pre class="lf lg lh li gt ms mt mu mv aw mw bi"><span id="f352" class="mx lw it mt b gy my mz l na nb">api_key = os.environ.get(‘binance_api’) </span><span id="f1d8" class="mx lw it mt b gy nc mz l na nb">api_secret = os.environ.get(‘binance_secret’) </span><span id="b1dc" class="mx lw it mt b gy nc mz l na nb">client = Client(api_key, api_secret)</span></pre><p id="7a63" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们从查询我们拥有的BTC(比特币)数量开始:</p><pre class="lf lg lh li gt ms mt mu mv aw mw bi"><span id="8569" class="mx lw it mt b gy my mz l na nb">client.get_asset_balance(asset=’BTC’)[‘free’]</span></pre><p id="ad9a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">自然，用任何其他标记替换“BTC”都会返回相应的值。</p><p id="552e" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要询问令牌的当前价格(在USDT)，请运行:</p><pre class="lf lg lh li gt ms mt mu mv aw mw bi"><span id="053c" class="mx lw it mt b gy my mz l na nb">client.get_symbol_ticker(symbol=’BTCUSDT’)[‘price’]</span></pre><p id="97c3" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在让我们来看看购买/销售密码:</p><p id="ecca" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这里，我们只使用<a class="ae lu" href="https://www.schwab.com/learn/story/3-order-types-market-limit-and-stop-orders#:~:text=A%20market%20order%20is%20an,to%20execute%20the%20trade%20immediately." rel="noopener ugc nofollow" target="_blank">市价订单</a>(即在给定市价买入/卖出的订单)，并将高级订单类型留给读者。</p><p id="cf61" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要购买0.01 BNB，请执行以下操作:</p><pre class="lf lg lh li gt ms mt mu mv aw mw bi"><span id="7c5e" class="mx lw it mt b gy my mz l na nb">buy_order = self.client.order_market_buy(symbol=‘BNBUSDT’, quantity=0.01)</span></pre><p id="8df4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe nd ne nf mt b">buy_order</code>然后包含一个订单摘要。</p><p id="797c" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">相反，要卖出之前买入的BNB，运行:</p><pre class="lf lg lh li gt ms mt mu mv aw mw bi"><span id="f705" class="mx lw it mt b gy my mz l na nb">sell_order = self.client.order_market_sell(symbol=‘BNBUSDT’, quantity=sell_quantity)</span></pre><p id="1b62" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">请注意，除非你非常幸运，价格上涨很快，否则这两行代码不会在一个空账户上相继执行，因为币安收取1%的交易费。</p><p id="72c5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">进一步值得强调的是，硬币不能以任意精度进行交易——这里的关键术语是<em class="ng">精度</em>和<em class="ng">批量</em>，例如可以通过<code class="fe nd ne nf mt b"><a class="ae lu" href="https://python-binance.readthedocs.io/en/latest/binance.html#binance.client.Client.get_exchange_info" rel="noopener ugc nofollow" target="_blank">client.get_exchange_info()</a></code>进行查询。</p><p id="8d56" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最后，让我们看看如何使用<code class="fe nd ne nf mt b">get_historical_klines()</code>查询历史市场数据。此函数可用于不同的参数和不同的方式—以下返回ETH最近7天的市场信息，每天汇总一次:</p><pre class="lf lg lh li gt ms mt mu mv aw mw bi"><span id="a3d2" class="mx lw it mt b gy my mz l na nb">klines = client.get_historical_klines(“ETHUSDT”, Client.KLINE_INTERVAL_1DAY, “7 days ago UTC”)</span></pre><p id="b6e2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe nd ne nf mt b">klines</code>现在是一个长度为7的列表，代表过去7天的信息——每个这样的“信息”由另一个长度为12 的<a class="ae lu" href="https://www.programcreek.com/python/?CodeExample=get+klines" rel="noopener ugc nofollow" target="_blank">列表组成，其中例如前4个值是:<em class="ng">开盘时间</em>、<em class="ng">开盘价</em>、<em class="ng">最高价</em>和<em class="ng">最低价</em>。</a></p><p id="9899" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">希望你喜欢这次短途旅行——如果是的话，请尽快回来——如果有任何问题，请联系我。</p></div><div class="ab cl nh ni hx nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="im in io ip iq"><h1 id="e70c" class="lv lw it bd lx ly no ma mb mc np me mf jz nq ka mh kc nr kd mj kf ns kg ml mm bi translated">分级编码</h1><p id="a729" class="pw-post-body-paragraph ki kj it kk b kl mn ju kn ko mo jx kq kr mp kt ku kv mq kx ky kz mr lb lc ld im bi translated">感谢您成为我们社区的一员！在你离开之前:</p><ul class=""><li id="1f28" class="nt nu it kk b kl km ko kp kr nv kv nw kz nx ld ny nz oa ob bi translated">👏为故事鼓掌，跟着作者走👉</li><li id="50e7" class="nt nu it kk b kl oc ko od kr oe kv of kz og ld ny nz oa ob bi translated">📰查看<a class="ae lu" href="https://levelup.gitconnected.com/?utm_source=pub&amp;utm_medium=post" rel="noopener ugc nofollow" target="_blank">升级编码出版物</a>中的更多内容</li><li id="fd94" class="nt nu it kk b kl oc ko od kr oe kv of kz og ld ny nz oa ob bi translated">💰免费编码面试课程<a class="ae lu" href="https://skilled.dev/?utm_source=luc&amp;utm_medium=article" rel="noopener ugc nofollow" target="_blank">查看课程</a></li><li id="0274" class="nt nu it kk b kl oc ko od kr oe kv of kz og ld ny nz oa ob bi translated">🔔关注我们:<a class="ae lu" href="https://twitter.com/gitconnected" rel="noopener ugc nofollow" target="_blank">Twitter</a>|<a class="ae lu" href="https://www.linkedin.com/company/gitconnected" rel="noopener ugc nofollow" target="_blank">LinkedIn</a>|<a class="ae lu" href="https://newsletter.levelup.dev" rel="noopener ugc nofollow" target="_blank">时事通讯</a></li></ul><p id="f202" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">🚀👉<a class="ae lu" href="https://jobs.levelup.dev/talent/welcome?referral=true" rel="noopener ugc nofollow" target="_blank"> <strong class="kk iu">加入升级达人集体，找到一份惊艳的工作</strong> </a></p></div></div>    
</body>
</html>