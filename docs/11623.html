<html>
<head>
<title>Mastering React — Build your own React hook</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">掌握React —构建您自己的React挂钩</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/mastering-react-build-your-own-react-hook-12011113a949?source=collection_archive---------0-----------------------#2022-03-31">https://levelup.gitconnected.com/mastering-react-build-your-own-react-hook-12011113a949?source=collection_archive---------0-----------------------#2022-03-31</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/f034a23a7e6faa0ee8f73e4377adaeb8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A4HWj_r4jt74mkYA6oruqA.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">JoshuaWoroniecki 皮查拜</figcaption></figure><h1 id="6bca" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">🤔动机</h1><p id="0a1e" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">您能想象在React中编写代码时组件内部没有杂乱的逻辑片段吗？你愿意以最优雅的方式不止一次地使用逻辑的某些部分吗？你来对地方了。</p></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><h1 id="ff46" class="kd ke iq bd kf kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la bi translated">✨简介</h1><p id="d0ac" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">在我们开始之前，你需要知道基本的钩子(<a class="ae kc" href="https://david-nienajadlo.medium.com/mastering-react-basic-hooks-explained-9e579fcf4794" rel="noopener">阅读我以前的文章</a>)。开始时需要这些知识。</p></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><h1 id="e4f1" class="kd ke iq bd kf kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la bi translated">🚀让我们建立我们的自定义挂钩</h1><p id="ccc1" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">今天我们将构建一个<strong class="ld ir"> useMediaQuery </strong>钩子作为一个很棒的可重用钩子。</p><p id="7b36" class="pw-post-body-paragraph lb lc iq ld b le ml lg lh li mm lk ll lm mn lo lp lq mo ls lt lu mp lw lx ly ij bi translated">为了创建这个钩子，我们需要使用一个resize监听器——在组件被挂载时创建一个监听器，在卸载时删除它。所以我们需要使用组件生命周期。</p><p id="8f20" class="pw-post-body-paragraph lb lc iq ld b le ml lg lh li mm lk ll lm mn lo lp lq mo ls lt lu mp lw lx ly ij bi translated">让我们准备我们的功能。我准备了MediaQueryType类型，因为我们之前需要知道媒体查询规则类型。</p><figure class="mr ms mt mu gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mq"><img src="../Images/b299e20463744a1dbd037bf23f1ec587.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*peK3GZjGe8liBXabX-B8zg.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">使用MediaQuery空样板</figcaption></figure><p id="4207" class="pw-post-body-paragraph lb lc iq ld b le ml lg lh li mm lk ll lm mn lo lp lq mo ls lt lu mp lw lx ly ij bi translated">所以现在我们需要创建一个函数来检查媒体查询是否匹配。我们可以使用<strong class="ld ir"> window.matchMedia() </strong>函数来获取它。</p><figure class="mr ms mt mu gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mv"><img src="../Images/36ab391f347acc6002fb5775b200e908.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HRx0TLs9TN3SlYO_EnATVg.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">媒体查询规则匹配检查功能</figcaption></figure><p id="1ad5" class="pw-post-body-paragraph lb lc iq ld b le ml lg lh li mm lk ll lm mn lo lp lq mo ls lt lu mp lw lx ly ij bi translated">现在我们需要编写精确的钩子逻辑。我们真正需要做的是什么？<br/> -安装组件时创建监听器<br/> -安装组件时检查媒体是否匹配(因为我们想知道安装时媒体是否匹配)，<br/> -卸载组件时移除监听器</p><p id="b414" class="pw-post-body-paragraph lb lc iq ld b le ml lg lh li mm lk ll lm mn lo lp lq mo ls lt lu mp lw lx ly ij bi translated">这里我们应该使用<strong class="ld ir"> useEffect </strong>钩子来使用组件的生命周期，当然我们需要在某个地方存储逻辑状态，所以我们应该使用<strong class="ld ir"> useState。</strong></p><p id="cfb0" class="pw-post-body-paragraph lb lc iq ld b le ml lg lh li mm lk ll lm mn lo lp lq mo ls lt lu mp lw lx ly ij bi translated">所以我们的钩子看起来像这样</p><figure class="mr ms mt mu gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/ed975fa90d6774811112008a15fb1276.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FHFBQsJ97v0jvCBoCxU01A.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">使用MediaQuery挂钩</figcaption></figure><p id="cc38" class="pw-post-body-paragraph lb lc iq ld b le ml lg lh li mm lk ll lm mn lo lp lq mo ls lt lu mp lw lx ly ij bi translated">但是现在——如何使用它？真的很简单</p><figure class="mr ms mt mu gt jr gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/d1bc06ed2e47afc3a3cedb518f231c40.png" data-original-src="https://miro.medium.com/v2/resize:fit:986/format:webp/1*6KON2YHlP2R-wh9obJMFkA.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">useMediaQuery挂钩示例用法</figcaption></figure></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><h1 id="a5c3" class="kd ke iq bd kf kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la bi translated">🍟摘要</h1><p id="8ae7" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">正如你所看到的，建立自己的钩子真的很容易。现在，您可以编写可重用的特性，使您的代码更加整洁，并提高您的编程技能。</p></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><h1 id="f7b0" class="kd ke iq bd kf kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la bi translated">👍谢谢大家！</h1><p id="273e" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">希望你真的喜欢这篇文章。</p></div></div>    
</body>
</html>