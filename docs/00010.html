<html>
<head>
<title>The Joys of building React Native Apps with Expo</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Expo构建本地应用的乐趣</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/react-native-with-expo-is-a-joyride-671d706b7a19?source=collection_archive---------3-----------------------#2017-09-06">https://levelup.gitconnected.com/react-native-with-expo-is-a-joyride-671d706b7a19?source=collection_archive---------3-----------------------#2017-09-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="381c" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">为需要XCode和Android Studio在React原生应用上工作而烦恼？希望只需一个按钮就能与其他用户分享您的手机应用程序？让我们看一看世博会。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/4d1221fbf3ab20c6999cb267b50282ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*THdM-gSb7HPQnpGdGi5NwA.jpeg"/></div></div></figure><p id="09fc" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="ln">TL；DR </em> <a class="ae lo" href="http://expo.io" rel="noopener ugc nofollow" target="_blank"> <em class="ln"> Expo </em> </a> <em class="ln">为你的移动应用开发提供扩展的SDK和托管服务，无需再次接触XCode或Android Studio(大多数情况下)。</em></p><h1 id="c6ec" class="lp lq iq bd lr ls lt lu lv lw lx ly lz jw ma jx mb jz mc ka md kc me kd mf mg bi translated">反应原生是开始</h1><p id="c3c7" class="pw-post-body-paragraph kr ks iq kt b ku mh jr kw kx mi ju kz la mj lc ld le mk lg lh li ml lk ll lm ij bi translated">React Native 仍然是一个非常年轻的项目，但它肯定会越来越受欢迎，并且已经成为创建移动应用程序(以及其他应用程序)的首选统一方式。当你可以只学习JavaScript并达到相同的目标时，为什么你需要两种不同的语言(Android和iOS)？好了，甜言蜜语说够了，我们走吧。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/8ad0c4c8d977b2cc3632e23a6ef5754e.png" data-original-src="https://miro.medium.com/v2/resize:fit:446/format:webp/1*BQa7E0AcqDbuqoVDCISuHw.png"/></div></figure><p id="a99f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">该框架涵盖了一些重要的API，用于你在移动应用中可能需要的东西，比如用于制作动画的<a class="ae lo" href="https://facebook.github.io/react-native/docs/animated.html" rel="noopener ugc nofollow" target="_blank">Animated</a>(<em class="ln">非常强大的</em>)、用于操作系统剪贴板内容的<a class="ae lo" href="https://facebook.github.io/react-native/docs/clipboard.html" rel="noopener ugc nofollow" target="_blank"> Clipboard </a>，或者用于以表演方式呈现列表的<a class="ae lo" href="https://facebook.github.io/react-native/docs/flatlist.html" rel="noopener ugc nofollow" target="_blank"> FlatList </a>。如果没有React Native，您将不得不用一种本地语言自己编写大部分内容。</p><p id="a37c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">不过React Native有一个相当大的痛点:如果你打算支持这两个平台，你需要同时安装XCode ( <em class="ln">仅适用于Mac用户</em>)和Android Studio。每当你想在模拟器中看到你的应用程序的结果时，你仍然需要使用这些(可怕的)开发工具。</p><h1 id="bdf1" class="lp lq iq bd lr ls lt lu lv lw lx ly lz jw ma jx mb jz mc ka md kc me kd mf mg bi translated">世博会就像一种止痛药，可以缓解你天生的疼痛</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/5d1eba37084d52b1813344409f9bd0cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:478/format:webp/1*6QL77YANSRL46TOb-dJKmA.png"/></div></figure><p id="2d89" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Expo是React Native的补充工具包。它让你可以访问额外的API，包装本地代码来完成常见任务，这样你就可以继续使用你心爱的JavaScript，包括<a class="ae lo" href="https://docs.expo.io/versions/latest/sdk/contacts.html" rel="noopener ugc nofollow" target="_blank">读取手机联系人</a>、<a class="ae lo" href="https://docs.expo.io/versions/latest/sdk/gyroscope.html" rel="noopener ugc nofollow" target="_blank">访问手机陀螺仪</a>，或者<a class="ae lo" href="https://docs.expo.io/versions/latest/sdk/facebook.html" rel="noopener ugc nofollow" target="_blank">用脸书</a>为用户登录。所有这些功能通常被称为Expo SDK，并且它的<a class="ae lo" href="https://expo.canny.io/feature-requests" rel="noopener ugc nofollow" target="_blank">仍在增长</a>。</p><blockquote class="mo mp mq"><p id="6461" class="kr ks ln kt b ku kv jr kw kx ky ju kz mr lb lc ld ms lf lg lh mt lj lk ll lm ij bi translated">有了Expo，你就不会有任何可怕的ios/android文件夹，就像你可能在pure React Native上看到的那样。这是完全正常的，因为你不需要这些。更多详情，请点击查看指南。</p></blockquote><p id="a3e3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">除了SDK，Expo平台还有另一个非常重要的部分:构建<strong class="kt ir">和</strong>分发你的应用。只需按下一个按钮(在expo.io上注册一个帐户)，几分钟之内，你就可以向你的朋友或同事发送公开网址，实时演示你的应用程序！一个小缺点是，每个人都需要在他们的设备上安装Expo应用程序(<a class="ae lo" href="https://play.google.com/store/apps/details?id=host.exp.exponent" rel="noopener ugc nofollow" target="_blank"> Android </a>和<a class="ae lo" href="https://itunes.com/apps/exponent" rel="noopener ugc nofollow" target="_blank"> iOS </a>)。</p><blockquote class="mu"><p id="5c4b" class="mv mw iq bd mx my mz na nb nc nd lm dk translated">您可以直接从您的电脑上共享您的应用程序开发版本，其他人可以查看您所做的更改，而无需任何发布步骤！</p></blockquote><p id="0b0d" class="pw-post-body-paragraph kr ks iq kt b ku ne jr kw kx nf ju kz la ng lc ld le nh lg lh li ni lk ll lm ij bi translated">当你用Expo发布一个应用时，JavaScript代码被捆绑并发送到Expo服务器。公共页面(<a class="ae lo" href="https://expo.io/@community/native-component-list" rel="noopener ugc nofollow" target="_blank">像这样的</a>)会为你创建。任何人都可以轻松安装并试用你的应用。没错。除非你想与公众分享你的应用，否则你不需要为Google Play或Apple Store及其严格的政策而烦恼。这给了你一个很好的机会来演练想法，而不会产生任何假设或对应用程序产生不好的评论，供未来的消费者阅读。</p><blockquote class="mo mp mq"><p id="12cb" class="kr ks ln kt b ku kv jr kw kx ky ju kz mr lb lc ld ms lf lg lh mt lj lk ll lm ij bi translated">这个过程在技术上与<a class="ae lo" href="https://microsoft.github.io/code-push/" rel="noopener ugc nofollow" target="_blank">代码推送</a>或<a class="ae lo" href="https://rollout.io/" rel="noopener ugc nofollow" target="_blank">展示</a>非常相似，在官方商店看来是完全合法的。你不需要在那里更新应用程序，除非你改变应用程序的范围或更新SDK版本。</p></blockquote><h1 id="0511" class="lp lq iq bd lr ls lt lu lv lw lx ly lz jw ma jx mb jz mc ka md kc me kd mf mg bi translated">世博会可能是一剂良方</h1><p id="0cca" class="pw-post-body-paragraph kr ks iq kt b ku mh jr kw kx mi ju kz la mj lc ld le mk lg lh li ml lk ll lm ij bi translated">你可能认为本地开发现在很好很容易，但是你可能不太喜欢你的用户不得不安装一些他们从未听说过的<em class="ln">怪异</em> Expo应用程序，只是为了运行你的应用程序。有时候很难向习惯只从官方商店安装app的人解释这背后的原因。他们甚至担心这个Expo应用程序会损害他们的设备。那为什么还要为世博会费心呢？</p><p id="309c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这就是独立应用的用武之地。Expo提供构建服务器，能够为您远程创建APK/IPA文件，然后您可以将其分发给您的用户或上传到官方商店。你的用户不会再需要Expo app了(虽然还能用)。您的应用程序将照常安装，带有自己的图标或定制的加载程序屏幕(查看<a class="ae lo" href="https://docs.expo.io/versions/latest/guides/configuration.html" rel="noopener ugc nofollow" target="_blank">您的所有选项</a>)。你仍然不需要Android Studio或XCode来做这些。那不是很美吗？</p><p id="e644" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="ln">注意，如果你正在尝试构建iOS独立app，你将不得不支付</em> <a class="ae lo" href="https://developer.apple.com/programs/" rel="noopener ugc nofollow" target="_blank"> <em class="ln">苹果开发者计划</em> </a> <em class="ln">。这是必需的，以便Expo可以使用Apple提供的证书签署您的应用程序。没有它，甚至不可能创建一个IPA包。Android应用程序可以获得自签名证书。</em></p><p id="f196" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这款独立应用的工作方式与Expo应用几乎相同，<em class="ln">除了</em>没有Expo用户界面，用户必须通过它来启动应用。它下载与之相关的已发布的JS包并运行它。就是这样。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nj"><img src="../Images/162707b8662d2d6668c33ad1737121ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C547D5BdRsA6qdzFz-5GgA.jpeg"/></div></div><figcaption class="nk nl gj gh gi nm nn bd b be z dk translated"><a class="ae lo" href="https://unsplash.com/photos/PC_lbSSxCZE?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">克里斯托佛罗拉</a>在<a class="ae lo" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</figcaption></figure><h1 id="4f78" class="lp lq iq bd lr ls lt lu lv lw lx ly lz jw ma jx mb jz mc ka md kc me kd mf mg bi translated">稍后更新应用程序</h1><p id="c4e2" class="pw-post-body-paragraph kr ks iq kt b ku mh jr kw kx mi ju kz la mj lc ld le mk lg lh li ml lk ll lm ij bi translated">因此，有一个独立的应用程序和一个JS包。谁知道什么时候更新什么？又是怎么做到的？</p><p id="ba7a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">只要你只使用JavaScript代码，你就不需要担心你的用户已经安装了一个独立的应用程序。只需使用XDE(或<a class="ae lo" href="https://docs.expo.io/versions/latest/guides/exp-cli.html" rel="noopener ugc nofollow" target="_blank"> exp实用程序</a>)来发布包。下次用户打开你的应用时，它将被更新。</p><p id="ad47" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">每当你需要从<em class="ln"> app.json </em>文件、<strong class="kt ir">中改变设置，包括</strong>更新SDK的版本，那么你需要重新构建一个独立的app并再次分发。</p><p id="6642" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">不过，有一个小问题可能会让你大吃一惊。尤其是在第一次开发运行期间。当用户打开应用程序时，JS包会在后台下载。在应用程序的使用过程中，不会有即时更新。用户将需要实际关闭应用程序，并在重新打开时，更新将被应用。</p><p id="d967" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="ln">如果你需要确保用户始终使用最新版本的应用程序，有一个</em> <a class="ae lo" href="https://gist.github.com/FredyC/b79b9d09c72e60bd1e89238e25e23387#file-app-js-L10-L13" rel="noopener ugc nofollow" target="_blank"> <em class="ln">要点</em> </a> <em class="ln">可以帮助你做到这一点。根据您的需要，您可能希望对其进行扩展:</em></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="no np l"/></div></figure><h1 id="a098" class="lp lq iq bd lr ls lt lu lv lw lx ly lz jw ma jx mb jz mc ka md kc me kd mf mg bi translated">结论</h1><p id="dbaf" class="pw-post-body-paragraph kr ks iq kt b ku mh jr kw kx mi ju kz la mj lc ld le mk lg lh li ml lk ll lm ij bi translated">Expo仍然是一个年轻的项目，需要解决一些棘手的问题，但当它完成时，它可能会成为移动开发的主要工具。</p><p id="22cf" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">本文仅涵盖理想情况，即您能够仅使用React Native + Expo API来实现应用程序的功能。一旦你想从中得到更多，你将不得不<a class="ae lo" href="https://docs.expo.io/versions/latest/guides/detach.html#1-install-exp" rel="noopener ugc nofollow" target="_blank">分离到ExpoKit </a>或者完全离开世博会的安全水域。我已经在我的后续文章<a class="ae lo" href="https://medium.com/@DanielKrejci/compile-react-native-with-expokit-easily-46e9e94abb97" rel="noopener">编译React Native with Expo kit easy</a>中详细介绍了这一点。</p></div></div>    
</body>
</html>