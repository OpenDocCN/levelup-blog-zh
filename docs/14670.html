<html>
<head>
<title>Catalog Your Open Source Software Usage Using License Finder</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用许可证查找器对您的开源软件使用情况进行分类</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/catalog-your-open-source-software-usage-using-license-finder-1f3d85b8e709?source=collection_archive---------6-----------------------#2022-12-15">https://levelup.gitconnected.com/catalog-your-open-source-software-usage-using-license-finder-1f3d85b8e709?source=collection_archive---------6-----------------------#2022-12-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="d974" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">需要弄清楚你的软件到底依赖于哪些开源许可？我最近发现了一个很棒的工具，您可以在本地和CI/CD工作流中使用，以确保您不会使用坏的许可证。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/acb3d4af9d270b9da6b03425ec77a588.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*A9lAsv9Yr4zStGu6"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">照片由<a class="ae le" href="https://unsplash.com/@dkfra19?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">迪米特里·卡拉斯泰列夫</a>在<a class="ae le" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="477d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><a class="ae le" href="https://github.com/pivotal/LicenseFinder" rel="noopener ugc nofollow" target="_blank">https://github.com/pivotal/LicenseFinder</a></p><p id="9cac" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这款应用被称为“许可证查找器”，这一点也不奇怪。对于您的每一个依赖项，它会出去找到特定的许可证，并给你一个漂亮的报告。不仅如此，它还会检查您是否批准或允许了某些许可证，您可以在单个回购中管理这些许可证，或者在一个组织的多个回购中继承决策。</p><blockquote class="lf lg lh"><p id="a19f" class="jq jr li js b jt ju jv jw jx jy jz ka lj kc kd ke lk kg kh ki ll kk kl km kn im bi translated">LicenseFinder与您的软件包管理器一起工作，查找依赖项，检测软件包中的许可证，将这些许可证与用户定义的许可许可证列表进行比较，并向您提供可操作的异常报告。</p></blockquote><p id="d7af" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如本文所述，license finder可与多种语言(包括Python、Java、.网，仙丹，等等。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi lm"><img src="../Images/efdbc4c9df83f4360a20835e5d224a22.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YZ9vXAHwS8IlqdEftVXLNg.png"/></div></div></figure><h1 id="c9a5" class="ln lo it bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">本地设置</h1><p id="73bb" class="pw-post-body-paragraph jq jr it js b jt ml jv jw jx mm jz ka kb mn kd ke kf mo kh ki kj mp kl km kn im bi translated">如果你在Mac上，你至少需要Ruby 2.4，你可以通过Ruby版本管理器或者通过<code class="fe mq mr ms mt b">brew install ruby</code>安装。</p><p id="3e7d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">从那里你可以运行<code class="fe mq mr ms mt b">gem install license_finder</code>,它将在你的系统上安装许可证查找器。</p><p id="ca38" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">安装完gem后，你可以从你的代码库的根目录运行<code class="fe mq mr ms mt b">license_finder</code>，它会检测你正在使用哪种项目和哪个包管理器，并获取你的依赖项的许可证。</p><p id="7954" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">运行该命令后，您应该会看到一长串未经许可的许可证输出，如果没有，请查看错误消息以解决问题。</p><h1 id="8b77" class="ln lo it bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">在CI/CD中设置</h1><p id="1645" class="pw-post-body-paragraph jq jr it js b jt ml jv jw jx mm jz ka kb mn kd ke kf mo kh ki kj mp kl km kn im bi translated">我在GitHub操作中使用了license finder，配置如下:</p><pre class="kp kq kr ks gt mu mt mv bn mw mx bi"><span id="9063" class="my lo it mt b be mz na l nb nc">name: License Finder Check<br/><br/>on:<br/>  pull_request:<br/>    branches: [main]<br/>  push:<br/>    branches: [main]<br/><br/>jobs:<br/>  license_finder:<br/>    name: "Run license finder"<br/>    runs-on: ubuntu-latest<br/>    steps:<br/>      - uses: actions/checkout@v2<br/>      - name: Set up Ruby<br/>        uses: ruby/setup-ruby@v1<br/>        with:<br/>          bundler-cache: true<br/>          cache-version: 1<br/>          ruby-version: 3.0.3<br/>      - name: Set up License Finder<br/>        run: gem install license_finder<br/>      - name: License Finder<br/>        working-directory: ui<br/>        run: license_finder</span></pre><p id="0bea" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">每当添加具有新许可证的新依赖项时，该构建将在PR上失败，以便在合并到代码库之前解决它。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nd"><img src="../Images/a9685b024969d40f67f99008c0cec8e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*VAvV6Nm1nhydKrGc"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">马库斯·斯皮斯克在<a class="ae le" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><h1 id="cc1b" class="ln lo it bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">许可和批准</h1><p id="3702" class="pw-post-body-paragraph jq jr it js b jt ml jv jw jx mm jz ka kb mn kd ke kf mo kh ki kj mp kl km kn im bi translated">现在您可以运行<code class="fe mq mr ms mt b">license_finder</code>，要将许可的许可证添加到您的列表中，只需运行:</p><pre class="kp kq kr ks gt mu mt mv bn mw mx bi"><span id="eaf1" class="my lo it mt b be mz na l nb nc">license_finder permitted_licenses add MIT</span></pre><p id="4cc7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这个特定的许可证将存储在您的<code class="fe mq mr ms mt b">doc/dependency_decisions.yml</code>文件中。如果您再次运行<code class="fe mq mr ms mt b">license_finder</code>，您应该不会再看到任何关于“MIT”许可的错误。</p><p id="e071" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果您有一个内部库或想要排除一个特定的库而不允许它使用许可证，您可以运行:</p><pre class="kp kq kr ks gt mu mt mv bn mw mx bi"><span id="af35" class="my lo it mt b be mz na l nb nc">license_finder approvals add awesome_gpl_gem --who CTO --why "Go ahead"</span></pre><p id="bf2a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这也将附加到<code class="fe mq mr ms mt b">dependency_decisions</code>文件中，并且在运行<code class="fe mq mr ms mt b">license_finder</code>时不会再出错。</p><h1 id="eaea" class="ln lo it bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">继承全球批准</h1><p id="8188" class="pw-post-body-paragraph jq jr it js b jt ml jv jw jx mm jz ka kb mn kd ke kf mo kh ki kj mp kl km kn im bi translated">如果您有几个repos，并且想要远程共享一个通用的许可决策文件，您可以通过开发机器上的符号链接共享该文件，或者将该文件放在每个人都可以访问的地方(例如，一个新的GitHub存储库)。</p><p id="eb92" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">要从GitHub添加继承的决策文件，您可以运行:</p><pre class="kp kq kr ks gt mu mt mv bn mw mx bi"><span id="247d" class="my lo it mt b be mz na l nb nc">license_finder inherited_decisions add https://github.com/example/doc/dependency_decisions.yml</span></pre><p id="3242" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果您需要包含一个访问令牌，您可以像这样运行:</p><pre class="kp kq kr ks gt mu mt mv bn mw mx bi"><span id="b56e" class="my lo it mt b be mz na l nb nc">license_finder inherited_decisions add_with_auth https://github.com/example/doc/dependency_decisions.yml Bearer '$TOKEN'</span></pre><p id="6e74" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">请注意，这将在您的本地<code class="fe mq mr ms mt b">dependency_decisions.yml</code>文件中创建一个条目，然后您可以批准或允许特定于您的存储库的许可。</p><h1 id="8403" class="ln lo it bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">报告</h1><p id="aab0" class="pw-post-body-paragraph jq jr it js b jt ml jv jw jx mm jz ka kb mn kd ke kf mo kh ki kj mp kl km kn im bi translated">一旦你配置好了一切，你就可以运行<code class="fe mq mr ms mt b">license_finder report</code>了，你会得到一个CSV格式的正在使用的许可证输出。其他支持的输出是文本、html或markdown。</p><p id="9c46" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果您一直在推迟获取您所有的开源软件许可证，或者只是不知道从哪里开始，请查看license finder作为一个解决方案来帮助您！</p></div><div class="ab cl ne nf hx ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="im in io ip iq"><p id="ec83" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果你喜欢这篇文章，考虑一下<a class="ae le" href="https://medium.com/@ascourter/membership" rel="noopener">订阅Medium </a>！</p><p id="5ad0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果你或你的公司有兴趣找人进行技术面试，那么请在Twitter ( <a class="ae le" href="http://twitter.com/Exosyphon" rel="noopener ugc nofollow" target="_blank"> @Exosyphon </a>)上给我发DM，或者访问我的<a class="ae le" href="https://andrewcourter.com/" rel="noopener ugc nofollow" target="_blank">网站</a>。如果你喜欢这样的话题，那么你可能也会喜欢我的Youtube频道。如果你喜欢3D打印的东西，去我的<a class="ae le" href="https://www.etsy.com/listing/1273702925/6-sided-fidget-cube" rel="noopener ugc nofollow" target="_blank"> Etsy商店</a>看看。祝您愉快！</p></div></div>    
</body>
</html>