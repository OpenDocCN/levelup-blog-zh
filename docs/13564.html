<html>
<head>
<title>Git Stash — Everything about stashing changes in git</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Git Stash——在git中存储变更的所有内容</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/git-stash-everything-about-stashing-changes-in-git-9e94ef7e8213?source=collection_archive---------24-----------------------#2022-09-15">https://levelup.gitconnected.com/git-stash-everything-about-stashing-changes-in-git-9e94ef7e8213?source=collection_archive---------24-----------------------#2022-09-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/bab7d6896221c3bc7bd3f8d8279e4525.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bEH8diINltW72Bdj5PPurA.png"/></div></div></figure><p id="f667" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">有时，当我们在git中对一个项目进行更改时，我们会突然意识到我们需要恢复到我们项目的最后一个干净的工作目录版本——这意味着没有应用本地更改的版本。例如，假设您最近克隆或提取了一个项目的版本到您的本地计算机，并对三个文件做了一些本地更改。要将项目恢复到您克隆或提取的版本，您可以运行以下命令:</p><pre class="kz la lb lc gt ld le lf lg aw lh bi"><span id="7911" class="li lj it le b gy lk ll l lm ln">git stash</span></pre><p id="a9e9" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这既可以保存您的更改，将它们藏在安全的地方，也可以恢复到一个干净的项目版本，然后您可以保存、编辑或做任何您喜欢的事情。大多数人都知道他们可以使用<code class="fe lo lp lq le b">git stash</code>来做这件事，但是还有一些其他的事情<code class="fe lo lp lq le b">git stash</code>也可以让我们做。说到<code class="fe lo lp lq le b">git stash</code>，有几个真正有用的命令你应该知道:</p><ul class=""><li id="44a6" class="lr ls it kd b ke kf ki kj km lt kq lu ku lv ky lw lx ly lz bi translated"><code class="fe lo lp lq le b">git stash list</code></li><li id="21f6" class="lr ls it kd b ke ma ki mb km mc kq md ku me ky lw lx ly lz bi translated"><code class="fe lo lp lq le b">git stash show</code></li><li id="31e6" class="lr ls it kd b ke ma ki mb km mc kq md ku me ky lw lx ly lz bi translated"><code class="fe lo lp lq le b">git stash apply</code></li><li id="fbb3" class="lr ls it kd b ke ma ki mb km mc kq md ku me ky lw lx ly lz bi translated"><code class="fe lo lp lq le b">git stash pop</code></li><li id="4db2" class="lr ls it kd b ke ma ki mb km mc kq md ku me ky lw lx ly lz bi translated"><code class="fe lo lp lq le b">git stash push</code></li><li id="9504" class="lr ls it kd b ke ma ki mb km mc kq md ku me ky lw lx ly lz bi translated"><code class="fe lo lp lq le b">git stash clear</code></li><li id="a16c" class="lr ls it kd b ke ma ki mb km mc kq md ku me ky lw lx ly lz bi translated"><code class="fe lo lp lq le b">git stash drop</code></li></ul><h1 id="3327" class="mf lj it bd mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb bi translated">列出或显示所有git stash的变化<a class="ae nc" href="https://fjolt.com/article/git-mastering-stash#listing-or-showing-all-git-stash-changes" rel="noopener ugc nofollow" target="_blank"> # </a></h1><p id="c903" class="pw-post-body-paragraph kb kc it kd b ke nd kg kh ki ne kk kl km nf ko kp kq ng ks kt ku nh kw kx ky im bi translated">虽然我们可以很容易地使用<code class="fe lo lp lq le b">git stash</code>来清理我们的工作树，但是我们也可以使用下面的命令来查看所有的栈:</p><pre class="kz la lb lc gt ld le lf lg aw lh bi"><span id="e748" class="li lj it le b gy lk ll l lm ln">git stash list</span></pre><p id="a45c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">有趣的是，这将显示在过去发生的多个stashes。因此Git会存储所有的隐藏内容，以防将来需要检索它们。例如，在运行<code class="fe lo lp lq le b">git stash list</code>之后，下面是一个有许多仓库的项目:</p><pre class="kz la lb lc gt ld le lf lg aw lh bi"><span id="74f4" class="li lj it le b gy lk ll l lm ln">stash@{0}: WIP on master: abf89a3 feat-ui: updated look and feel<br/>stash@{1}: WIP on master: 39329d5 feat-ui: Updated CSS Quiz Button<br/>stash@{2}: WIP on master: 46bc7aa feat-ui: Bug fix on article API<br/>stash@{3}: WIP on master: 5dafc53 feat-ui: Fixed issue with secondary-navigation overflow</span></pre><p id="6621" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">所有的隐藏都存储在您的<code class="fe lo lp lq le b">ref/stash</code>文件中，在<code class="fe lo lp lq le b">.git</code>文件夹中。最近<code class="fe lo lp lq le b">git stash</code>的更详细视图也可通过<code class="fe lo lp lq le b">git stash show</code>查看:</p><pre class="kz la lb lc gt ld le lf lg aw lh bi"><span id="0ba5" class="li lj it le b gy lk ll l lm ln">common.js      | 405 +--------------------------------------------------------<br/>public/quiz.js | 267 +------------------------------------</span></pre><p id="80ce" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">虽然这对于某些人来说没什么问题，但是通过运行以下命令可以显示包括代码级别更改在内的更详细的视图:</p><pre class="kz la lb lc gt ld le lf lg aw lh bi"><span id="9c52" class="li lj it le b gy lk ll l lm ln">git stash show -p</span></pre><p id="b871" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><code class="fe lo lp lq le b">git stash show</code>还有一些其他有用的选项:</p><ul class=""><li id="4d3e" class="lr ls it kd b ke kf ki kj km lt kq lu ku lv ky lw lx ly lz bi translated"><code class="fe lo lp lq le b">-u</code>或<code class="fe lo lp lq le b">--include-untracked</code>，显示<code class="fe lo lp lq le b">git show</code>中隐藏的未跟踪文件，即<code class="fe lo lp lq le b">git stash show -u</code></li><li id="032e" class="lr ls it kd b ke ma ki mb km mc kq md ku me ky lw lx ly lz bi translated"><code class="fe lo lp lq le b">--only-untracked</code>，仅显示<code class="fe lo lp lq le b">git show</code>中未被跟踪的文件，即<code class="fe lo lp lq le b">git stash show --only-untracked</code></li></ul><h1 id="f59e" class="mf lj it bd mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb bi translated">使用apply或pop恢复git存储库<a class="ae nc" href="https://fjolt.com/article/git-mastering-stash#recovering-a-git-stash-with-apply-or-pop" rel="noopener ugc nofollow" target="_blank"> # </a></h1><p id="e480" class="pw-post-body-paragraph kb kc it kd b ke nd kg kh ki ne kk kl km nf ko kp kq ng ks kt ku nh kw kx ky im bi translated">虽然知道藏了什么本身是有用的，但能够找回藏起来的东西也是非常有用的。要恢复最新的代码，可以运行以下命令:</p><pre class="kz la lb lc gt ld le lf lg aw lh bi"><span id="5f46" class="li lj it le b gy lk ll l lm ln">git stash apply</span></pre><p id="b936" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">不过，如果你像我一样，有成吨的未使用的储备，有时找回以前的储备也是有用的，比如<code class="fe lo lp lq le b">stash@{3}</code>或<code class="fe lo lp lq le b">stash@{25}</code>，就像我们之前看到的列表一样。在这些情况下，我们只需在命令后列出存储的编号。例如，为了恢复<code class="fe lo lp lq le b">stash@{25}</code>，我们将运行以下命令:</p><pre class="kz la lb lc gt ld le lf lg aw lh bi"><span id="9f9e" class="li lj it le b gy lk ll l lm ln">git stash apply 25</span></pre><p id="ee67" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">正如您所料，如果您修改了文件，然后试图在上面运行<code class="fe lo lp lq le b">git stash apply</code>，您可能会遇到合并冲突。因此，在运行这个命令之前，请确保已经处理好了这些问题。</p><h1 id="e9e6" class="mf lj it bd mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb bi translated">git stash apply与git stash pop</h1><p id="b4ed" class="pw-post-body-paragraph kb kc it kd b ke nd kg kh ki ne kk kl km nf ko kp kq ng ks kt ku nh kw kx ky im bi translated">刚才，我们已经用<code class="fe lo lp lq le b">git stash apply</code>恢复了一堆代码。这将获取我们隐藏的代码，并将其应用到我们的工作树上。它还会将代码的隐藏副本留在您的隐藏代码列表中——这样您就不会丢失它。如果您想要恢复隐藏的代码，并从您的隐藏列表中删除该代码，您必须使用<code class="fe lo lp lq le b">pop</code>来代替:</p><pre class="kz la lb lc gt ld le lf lg aw lh bi"><span id="c9dd" class="li lj it le b gy lk ll l lm ln">git stash pop</span></pre><h1 id="1b3c" class="mf lj it bd mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb bi translated">把你的藏物变成树枝<a class="ae nc" href="https://fjolt.com/article/git-mastering-stash#turning-your-stash-into-a-branch" rel="noopener ugc nofollow" target="_blank"> # </a></h1><p id="18c5" class="pw-post-body-paragraph kb kc it kd b ke nd kg kh ki ne kk kl km nf ko kp kq ng ks kt ku nh kw kx ky im bi translated"><code class="fe lo lp lq le b">git stash</code>做的另一件未被充分利用的有用的事情是，它允许我们从隐藏的代码中创建一个新的分支。如果您有一些隐藏的代码，您可以将您当前的项目和其中的更改放在一起，在上面应用您隐藏的代码，然后根据您的喜好创建一个新的分支。例如，下面将创建一个名为<code class="fe lo lp lq le b">new-code</code>的分支:</p><pre class="kz la lb lc gt ld le lf lg aw lh bi"><span id="f06b" class="li lj it le b gy lk ll l lm ln">git stash branch new-code</span></pre><h1 id="78be" class="mf lj it bd mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb bi translated">其他方法保存您的存储和git存储推送<a class="ae nc" href="https://fjolt.com/article/git-mastering-stash#other-ways-to-save-your-stash-and-git-stash-push" rel="noopener ugc nofollow" target="_blank"> # </a></h1><p id="aeb7" class="pw-post-body-paragraph kb kc it kd b ke nd kg kh ki ne kk kl km nf ko kp kq ng ks kt ku nh kw kx ky im bi translated">虽然我们已经介绍了如何使用<code class="fe lo lp lq le b">git stash</code>来隐藏最新的代码，但是您也可以在野外看到下面的命令:</p><pre class="kz la lb lc gt ld le lf lg aw lh bi"><span id="37fb" class="li lj it le b gy lk ll l lm ln">git stash push</span></pre><p id="40c8" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这个命令实际上与<code class="fe lo lp lq le b">git stash</code>相同，但是如果你没有意识到这一点，可能会有点混乱。除此之外，<code class="fe lo lp lq le b">git stash</code>和<code class="fe lo lp lq le b">git stash push</code>还提供了许多有用的选项，如果你想使用它们的话:</p><ul class=""><li id="c6e1" class="lr ls it kd b ke kf ki kj km lt kq lu ku lv ky lw lx ly lz bi translated"><code class="fe lo lp lq le b">-a</code>或<code class="fe lo lp lq le b">--all</code>，将整个工作树保存到stash，即<code class="fe lo lp lq le b">git stash push -a</code></li><li id="5d3e" class="lr ls it kd b ke ma ki mb km mc kq md ku me ky lw lx ly lz bi translated"><code class="fe lo lp lq le b">-S</code>或<code class="fe lo lp lq le b">--staged</code>，将仅保存使用<code class="fe lo lp lq le b">git add</code>，即<code class="fe lo lp lq le b">git stash push -S</code>添加的阶段性变更</li><li id="dfb4" class="lr ls it kd b ke ma ki mb km mc kq md ku me ky lw lx ly lz bi translated"><code class="fe lo lp lq le b">-p</code>或<code class="fe lo lp lq le b">--patch</code>，将允许您浏览每一个更改，并选择性地决定是否要保存它，即<code class="fe lo lp lq le b">git stash -p</code></li><li id="490e" class="lr ls it kd b ke ma ki mb km mc kq md ku me ky lw lx ly lz bi translated"><code class="fe lo lp lq le b">-u</code>或<code class="fe lo lp lq le b">--include-untracked</code>，将所有未跟踪的文件与您的存储一起保存，即<code class="fe lo lp lq le b">git stash push -u</code></li></ul><h1 id="eb25" class="mf lj it bd mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb bi translated">使用git stash抑制消息</h1><p id="c937" class="pw-post-body-paragraph kb kc it kd b ke nd kg kh ki ne kk kl km nf ko kp kq ng ks kt ku nh kw kx ky im bi translated">顺便提一下，在这一点上，提到几乎所有的<code class="fe lo lp lq le b">git stash</code>命令都带有<code class="fe lo lp lq le b">-q</code>选项是有意义的，它抑制了任何消息或错误:</p><pre class="kz la lb lc gt ld le lf lg aw lh bi"><span id="ef4d" class="li lj it le b gy lk ll l lm ln">git stash apply -q</span></pre><h1 id="2b07" class="mf lj it bd mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb bi translated">移走你的藏物<a class="ae nc" href="https://fjolt.com/article/git-mastering-stash#removing-your-stash" rel="noopener ugc nofollow" target="_blank"> # </a></h1><p id="c9e6" class="pw-post-body-paragraph kb kc it kd b ke nd kg kh ki ne kk kl km nf ko kp kq ng ks kt ku nh kw kx ky im bi translated">最后，有时你想把所有的存货都拿走。这有点危险，所以要小心使用，但是如果你想的话，你只需要运行:</p><pre class="kz la lb lc gt ld le lf lg aw lh bi"><span id="45de" class="li lj it le b gy lk ll l lm ln">git stash clear</span></pre><p id="3342" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果你不想这样做，但仍然想删除一个特定的隐藏项目，你可以运行<code class="fe lo lp lq le b">git stash drop</code>删除最近隐藏的条目，或者<code class="fe lo lp lq le b">git stash drop 25</code>删除在你的<code class="fe lo lp lq le b">git stash list</code>结果中列为<code class="fe lo lp lq le b">stash@{25}</code>的隐藏项目。</p></div><div class="ab cl ni nj hx nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="im in io ip iq"><h1 id="9a9f" class="mf lj it bd mg mh np mj mk ml nq mn mo mp nr mr ms mt ns mv mw mx nt mz na nb bi translated">分级编码</h1><p id="2aeb" class="pw-post-body-paragraph kb kc it kd b ke nd kg kh ki ne kk kl km nf ko kp kq ng ks kt ku nh kw kx ky im bi translated">感谢您成为我们社区的一员！在你离开之前:</p><ul class=""><li id="004e" class="lr ls it kd b ke kf ki kj km lt kq lu ku lv ky lw lx ly lz bi translated">👏为故事鼓掌，跟着作者走👉</li><li id="777b" class="lr ls it kd b ke ma ki mb km mc kq md ku me ky lw lx ly lz bi translated">📰查看<a class="ae nc" href="https://levelup.gitconnected.com/?utm_source=pub&amp;utm_medium=post" rel="noopener ugc nofollow" target="_blank">升级编码出版物</a>中的更多内容</li><li id="ffd3" class="lr ls it kd b ke ma ki mb km mc kq md ku me ky lw lx ly lz bi translated">🔔关注我们:<a class="ae nc" href="https://twitter.com/gitconnected" rel="noopener ugc nofollow" target="_blank">Twitter</a>|<a class="ae nc" href="https://www.linkedin.com/company/gitconnected" rel="noopener ugc nofollow" target="_blank">LinkedIn</a>|<a class="ae nc" href="https://newsletter.levelup.dev" rel="noopener ugc nofollow" target="_blank">时事通讯</a></li></ul><p id="18d4" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">🚀👉<a class="ae nc" href="https://jobs.levelup.dev/talent/welcome?referral=true" rel="noopener ugc nofollow" target="_blank"> <strong class="kd iu">加入升级人才集体，找到一份神奇的工作</strong> </a></p></div></div>    
</body>
</html>