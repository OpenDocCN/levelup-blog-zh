<html>
<head>
<title>Making a Fantasy Premier League Change Recommender with AWS API Gateway, Step Functions and Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用AWS API Gateway、Step函数和Python制作一个梦幻英超变更推荐器</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/making-a-fantasy-premier-league-change-recommender-with-aws-api-gateway-step-functions-and-python-38a9648efdf?source=collection_archive---------3-----------------------#2022-10-09">https://levelup.gitconnected.com/making-a-fantasy-premier-league-change-recommender-with-aws-api-gateway-step-functions-and-python-38a9648efdf?source=collection_archive---------3-----------------------#2022-10-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="efd0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">去年，我用不同的算法在梦幻英超中运行了100个完整的bot团队，结果不一。我没有取得特别高的成绩，但我确实学到了很多。</p><p id="6a34" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">随着新赛季的开始，梦幻超级联赛已经关闭了其API的认证请求，所以我今年不能做同样的事情。我以前的帖子现在没有那么有用了，因为你不能再自动更新你的团队了，但是我会把它们留下来。</p><p id="a088" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我试图通过使用Selenium绕过身份验证限制，但验证码仍然保持不败。我不能再像在我的<a class="ae kl" href="https://conor-aspell.medium.com/fpl-bot-part-3-adding-betting-data-to-the-algorithm-with-aws-step-functions-e553978dbe18" rel="noopener">上一篇文章</a>中那样每周更新100个团队，所以今年我将只使用一个。</p><p id="c0d3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这有利于FPL的整体健康，普通玩家会有更好的体验，因为他们不需要与成千上万的机器人竞争。</p><h2 id="5b4b" class="km kn iq bd ko kp kq dn kr ks kt dp ku jy kv kw kx kc ky kz la kg lb lc ld le bi translated">2022/23赛季计划</h2><p id="38a7" class="pw-post-body-paragraph jn jo iq jp b jq lf js jt ju lg jw jx jy lh ka kb kc li ke kf kg lj ki kj kk ij bi translated">今年，我将转向混合方法，而不是完全的bot方法。我将使用Python来推荐一个改变。并自己输入更改。</p><p id="d213" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是一个很好的机会来谈论我最喜欢的AWS服务之一，<a class="ae kl" href="https://aws.amazon.com/api-gateway/" rel="noopener ugc nofollow" target="_blank"> AWS API Gateway </a>，以及API设计。</p><p id="ed89" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">AWS API Gateway是一项允许我们快速、廉价地创建RESTful APIs的服务。</p><p id="ee07" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们将制作一个API，向FPL团队推荐变更。只需发送一个包含你的团队ID的请求，API就会给出一个建议的修改和建议的队列。</p><h2 id="90f3" class="km kn iq bd ko kp kq dn kr ks kt dp ku jy kv kw kx kc ky kz la kg lb lc ld le bi translated">API的布局</h2><p id="ba4b" class="pw-post-body-paragraph jn jo iq jp b jq lf js jt ju lg jw jx jy lh ka kb kc li ke kf kg lj ki kj kk ij bi translated">这是我对API设计的第一个想法。向FPL API询问用户团队，然后向FPL询问每个玩家的数据，然后回复一个团队变更。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi lk"><img src="../Images/daa607a849f87acbf5dc0e4e2452f581.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*880JR5zt7rf-nZ9-kWx2hw.png"/></div></div></figure><p id="7820" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是一个标准的ETL设计模式。我们<strong class="jp ir">从API中提取</strong>数据，使用这些数据对每个玩家进行加权，<strong class="jp ir">将</strong>数据转换成推荐，然后<strong class="jp ir">将</strong>数据作为JSON响应加载。</p><p id="6818" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然而，这种方法非常慢而且昂贵，它在Lambda内部做了太多的工作，每次调用它时都要执行这些工作。</p><p id="43b0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一般来说，你会希望将尽可能多的工作转移到Lambda之外的每周工作中。在这种情况下，我相信我们可以将从FPL API获取所有球员数据并计算所有体重(进出体重)的工作转移到每周一次的工作中，并将结果存储在S3桶中。</p><p id="49af" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们仍然需要使用FPL API来获得请求的经理球员，但一旦我们有了他们，我们只需选择具有最高“重量”的球员，并选择具有最高“重量”的有效球员。</p><p id="79df" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因为我们可以控制存储的内容，所以我们可以通过删除所有不必要的列来减少数据的大小。这是REST APIs的一个大缺陷，也是GraphQL越来越受欢迎的原因，使用REST，您需要请求每一列，而使用GraphQL，您可以指定您想要的列。减少每个请求中的列数是一个好习惯。</p><p id="b0a8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们还可以增加投注数据收集，正如我在p <a class="ae kl" href="https://conor-aspell.medium.com/fpl-bot-part-3-adding-betting-data-to-the-algorithm-with-aws-step-functions-e553978dbe18" rel="noopener">上一篇文章</a>中所展示的，以做出更好的比赛难度评级。我们可以使用如下图所示的阶跃函数协调从多个来源收集数据。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi lw"><img src="../Images/29577afb4f8bc22ad0a5d0e5d7829b13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pQDBrYJMrthQkUHAKdvzDw.png"/></div></div><figcaption class="lx ly gj gh gi lz ma bd b be z dk translated">改进的架构</figcaption></figure><h2 id="3a24" class="km kn iq bd ko kp kq dn kr ks kt dp ku jy kv kw kx kc ky kz la kg lb lc ld le bi translated">制作阶跃函数的Lambdas</h2><p id="d4b8" class="pw-post-body-paragraph jn jo iq jp b jq lf js jt ju lg jw jx jy lh ka kb kc li ke kf kg lj ki kj kk ij bi translated">我们将从图的上半部分开始，使用阶跃函数。</p><p id="d9c4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我在<a class="ae kl" href="https://conor-aspell.medium.com/fpl-bot-part-3-adding-betting-data-to-the-algorithm-with-aws-step-functions-e553978dbe18" rel="noopener">的上一篇文章</a>中介绍了阶跃函数。阶跃函数是几个lambdas一起的编排。</p><p id="635e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我将重用我为那篇文章制作的Odds Getter Lambda以及一个新的Lambda，它将从FPL API获取数据并将数据存储在S3。</p><p id="74f2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是将你的Lambdas分解成阶跃函数的一大优势。您可以在其他step函数中轻松重用组件。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi mb"><img src="../Images/e508cd9abbb31942f2d9a2c89ae6fae1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7Agdn7yd_zOQ0zisp0bVHA.png"/></div></div></figure><p id="a1cc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我将保持与我之前的<a class="ae kl" href="https://conor-aspell.medium.com/fpl-bot-part-3-adding-betting-data-to-the-algorithm-with-aws-step-functions-e553978dbe18" rel="noopener">帖子</a>相似的玩家进出选择逻辑。我将使用权重来挑选应该被替换的球员，并推荐一名球员被替换。</p><p id="b204" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我之前使用了加权随机性，因为我希望在一个大的团队中有多样性，这次我只想推荐最好的改变，因为我只和一个团队打交道。</p><p id="fbe0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这些重量将通过以下方式确定:</p><ul class=""><li id="69d2" class="mc md iq jp b jq jr ju jv jy me kc mf kg mg kk mh mi mj mk bi translated">即将到来的比赛难度</li><li id="ff5d" class="mc md iq jp b jq ml ju mm jy mn kc mo kg mp kk mh mi mj mk bi translated">球员的状态。</li><li id="e4e4" class="mc md iq jp b jq ml ju mm jy mn kc mo kg mp kk mh mi mj mk bi translated">玩家的可用性。</li></ul><p id="034e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我可以使用更多的数据，如球员所有权、FPLs创造力、影响力、威胁指数或FPLs团队实力评级，但我不喜欢这些指标，因为根据我的经验，这将导致一个“模板”团队，我宁愿有一个更独特的团队。</p><p id="01e0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们可以从FPL API获得球员状态和可用性的数据，我们也可以获得他们的“比赛难度评级”，但我不喜欢它，更喜欢使用博彩赔率来评估比赛的难度。</p><p id="bc27" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">夹具难度——赔率获取器</strong></p><p id="69b6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们将使用Odds API向William Hill请求赔率，并将其保存在S3存储桶中。</p><p id="1dcb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">代码非常简单，我们只需要从odds api请求数据，通过它循环构建一个包含球队和赔率的数据框架，然后将它放入一个S3桶中。</p><p id="7166" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">由于我们得到了当前提供的每一个游戏，包括不在这个游戏周发生的游戏，我们请求游戏周日期，并跳过在这个截止日期和下一个截止日期之间不发生的任何游戏。</p><p id="b976" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们使用今天的日期将它保存在我们的S3桶中。</p><figure class="ll lm ln lo gt lp"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="5112" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这导致这个csv被存储起来供我们以后访问。</p><figure class="ll lm ln lo gt lp"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="52a3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">切尔西和曼城是本周的最大热门。</p><p id="9095" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">获取FPL数据并计算权重-存储FPL数据</strong></p><p id="2a7f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">从FPL API获取数据非常容易，我在以前的帖子中已经做过几次了。我们将:</p><ul class=""><li id="a61a" class="mc md iq jp b jq jr ju jv jy me kc mf kg mg kk mh mi mj mk bi translated">获取数据</li><li id="3bac" class="mc md iq jp b jq ml ju mm jy mn kc mo kg mp kk mh mi mj mk bi translated">清理它</li><li id="d2ab" class="mc md iq jp b jq ml ju mm jy mn kc mo kg mp kk mh mi mj mk bi translated">获取赔率数据</li><li id="9879" class="mc md iq jp b jq ml ju mm jy mn kc mo kg mp kk mh mi mj mk bi translated">计算我们的重量</li><li id="ba3e" class="mc md iq jp b jq ml ju mm jy mn kc mo kg mp kk mh mi mj mk bi translated">把它邮寄到S3</li></ul><p id="c414" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">FPL有一个完全开放的API，不需要密钥。唯一的问题是它包含了许多不必要的列。这样做的代码相当长，你可以在这里查看全部<a class="ae kl" href="https://gist.github.com/ConorAspell/1da59c7531b92d80b1087f8b51ac9d17" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="69ce" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">决定哪个球员出局和替补上场是非常不同的，需要两个不同的权重。这是最主观的部分，我决定只增加一个球员的状态和难度等级，减去他们参加比赛的机会。</p><p id="d59b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于超重，我从100开始，用类似的方法减去分数。我决定降低守门员被替换下场的可能性。</p><figure class="ll lm ln lo gt lp"><div class="bz fp l di"><div class="mq mr l"/></div></figure><figure class="ll lm ln lo gt lp"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="0e0a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所有这些导致csv看起来像这样，所以API只需要在运行时挑选出最好的播放器:</p><figure class="ll lm ln lo gt lp"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="4b3f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">制作步进功能</strong></p><p id="1301" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一旦我们有了2个Lambdas，进入<a class="ae kl" href="https://eu-west-1.console.aws.amazon.com/states/home?region=eu-west-1#/statemachines" rel="noopener ugc nofollow" target="_blank">步骤功能</a>控制台，点击“创建状态机”。</p><p id="f2ee" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">选择“用代码编写您的工作流程”</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi ms"><img src="../Images/acb04b74b1894e5b573fc23142e86364.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*gJMQg5Jt5yky_p4v.png"/></div></div></figure><p id="319c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在左侧，您应该会看到一个允许您定义工作流的控制台，在右侧是您的状态机的可视化。</p><p id="37c6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">左手边的语言是用<a class="ae kl" href="https://docs.aws.amazon.com/step-functions/latest/dg/concepts-amazon-states-language.html" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir">亚马逊州语言</strong> </a> <strong class="jp ir"> </strong>编写的，非常简单。它允许你用你的lambdas创建任何状态机逻辑。</p><figure class="ll lm ln lo gt lp"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="c403" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这里，您在“function:”后面输入您的AWS帐号$ AccountNumber和您的函数名。它应该会自动完成。</p><p id="3184" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后我们应该会在右侧看到类似这样的表示:</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi mb"><img src="../Images/e508cd9abbb31942f2d9a2c89ae6fae1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7Agdn7yd_zOQ0zisp0bVHA.png"/></div></div></figure><h2 id="78b8" class="km kn iq bd ko kp kq dn kr ks kt dp ku jy kv kw kx kc ky kz la kg lb lc ld le bi translated">将规则附加到阶跃函数</h2><p id="a451" class="pw-post-body-paragraph jn jo iq jp b jq lf js jt ju lg jw jx jy lh ka kb kc li ke kf kg lj ki kj kk ij bi translated">导航到<a class="ae kl" href="https://eu-west-1.console.aws.amazon.com/events/home?region=eu-west-1#/rules" rel="noopener ugc nofollow" target="_blank">亚马逊事件桥</a>并转到“规则”。</p><p id="d1d5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">选择“创建规则”并填写表格。</p><p id="16c5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于带有“每日”的名称，选择日程安排并说1天。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/5baa8685bc77b04be217b9bf78d54ae5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1358/format:webp/0*7KpMnOCfvLrTjXtH.png"/></div></figure><p id="b92c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">选择“步进功能步进机”和您的状态机。</p><p id="72a9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后点击“创建”。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/dca89432a74c6916624a37bbf7adf38e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/0*UFH2UR-PFkWbqbjd.png"/></div></figure><p id="4e0f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">推荐者背后的信息现在将定期更新。</p><h2 id="b7ad" class="km kn iq bd ko kp kq dn kr ks kt dp ku jy kv kw kx kc ky kz la kg lb lc ld le bi translated">创建API网关</h2><p id="b39f" class="pw-post-body-paragraph jn jo iq jp b jq lf js jt ju lg jw jx jy lh ka kb kc li ke kf kg lj ki kj kk ij bi translated">现在我们已经完成了每周的工作，我们可以继续讨论API网关的Lambda了。</p><p id="b1a6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们需要在这里做一些工作，但如果我们没有每周的工作，就不会做那么多。</p><p id="17d2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们需要创建一个响应对象来发送回请求者。</p><p id="2045" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们取出用户在请求中传递的团队id，并使用它来获取他们的团队和他们的银行余额。我们还可以获得之前存储的数据。</p><p id="8e2f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们简单地挑选出权重最高的玩家，过滤掉所有无效的玩家，返回权重最高的玩家。我们也推荐体重最高的首发队以及队长。</p><figure class="ll lm ln lo gt lp"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="4c59" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一旦你制造出兰姆达。我们可以很容易地把它变成一个API。</p><p id="6bb0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">单击AWS控制台上的“添加触发器”。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi mv"><img src="../Images/30010252ed9ebee73aef616352bfa501.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dRtIxOswwkswjSo3TWrEpw.png"/></div></div></figure><p id="af97" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">像这样填写添加触发器表单:</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi mw"><img src="../Images/514b5146b3d98e67083176df12f1b230.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*V11N1hWXo1IuDf8XGmD7ZQ.png"/></div></div></figure><p id="4da1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这将使每个人都可以访问你的API，对于商业API，你应该添加必要的密钥和安全性。</p><p id="da92" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您应该在配置&gt;触发器下看到这一点:</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi mx"><img src="../Images/bb33fa890f39cfb2f9b9c656eed6d638.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wsU8fyhQsvTr6CasTwbgpQ.png"/></div></div></figure><p id="4f55" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">单击上面截图中的API网关资源名称(team-change-recommender-API)。</p><p id="7752" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在API Gateway菜单中，单击Actions&gt;Create Method，然后从下拉列表中选择“Get”。</p><p id="ab3d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">像下面一样填写表格。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi my"><img src="../Images/1ebc4001c9c635cb349cc18fee3c02a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ghLvY2KUE4mcCW5J15AJZg.png"/></div></div></figure><p id="159c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，抓住你的端点，加上？team_id=和您的FPL团队id，您可以从您的“积分”页面获得。比如我的是3495082。我的观点是:</p><p id="7014" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae kl" href="https://23ak5jkavl.execute-api.eu-west-1.amazonaws.com/default/team-change-recommender?team_id=3495082" rel="noopener ugc nofollow" target="_blank">https://23ak 5 JK AVL . execute-API . eu-west-1 . Amazon AWS . com/default/team-change-recommender？team_id=3495082 </a></p><p id="5437" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我得到一个回应，告诉我替换掉博特曼，因为他一直在纽卡斯尔队中进进出出，替换掉狼队的乔尼，因为他们的防守很强。</p><figure class="ll lm ln lo gt lp"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="fe63" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你可以把你的ID加入到上面的URL中，得到你自己推荐的改变和队长。</p><h2 id="8fd9" class="km kn iq bd ko kp kq dn kr ks kt dp ku jy kv kw kx kc ky kz la kg lb lc ld le bi translated">我这一季表现如何</h2><p id="3972" class="pw-post-body-paragraph jn jo iq jp b jq lf js jt ju lg jw jx jy lh ka kb kc li ke kf kg lj ki kj kk ij bi translated">上个赛季，我真的很难用完整的机器人方法做好，今年用我自己根据数据选择的混合方法，我做得更好，目前在全球排名616位(在超过1000万名玩家中！).</p><p id="f31e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这部分是因为我选择了一个好的首发阵容，但我能够从糟糕的比赛中轮换，并做出一些聪明的替换，最大限度地提高我的分数，例如在一场比赛中用我的守门员波普换下桑切斯，这是我通常不会做的事情。我是全球头号爱尔兰富勒姆球迷。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/c40ccaccda1bd80c0f1dab3a4c789e7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1144/format:webp/1*-I2p8GkzCqPnGFnuXgWjGg.png"/></div><figcaption class="lx ly gj gh gi lz ma bd b be z dk translated">是的，我是富勒姆球迷</figcaption></figure></div><div class="ab cl na nb hu nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="ij ik il im in"><p id="ed68" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你喜欢这个，请鼓掌，并随时关注我的媒体和<a class="ae kl" href="https://www.linkedin.com/in/conor-aspell/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>。</p></div></div>    
</body>
</html>