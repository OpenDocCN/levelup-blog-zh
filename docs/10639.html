<html>
<head>
<title>Understanding JavaScript Anonymous Function</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">理解JavaScript匿名函数</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/understanding-javascript-anonymous-function-a77d12db8a0f?source=collection_archive---------9-----------------------#2021-12-28">https://levelup.gitconnected.com/understanding-javascript-anonymous-function-a77d12db8a0f?source=collection_archive---------9-----------------------#2021-12-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="7de7" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">了解如何在JavaScript应用程序中编写和使用匿名函数</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/630b11d73ea41c79e11ad7be5e23f2f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tIeypn0CRFbBC7NF"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@hishahadat?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">沙哈达特·拉赫曼</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="46b8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">无论您正在编写一个web3应用程序来与您的Etherum智能合约接口，还是一个基于NodeJS的REST API，您都需要了解JavaScript——支持web的核心编程语言之一。</p><p id="4622" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在本文中，我想谈谈<em class="lv">匿名函数</em>，这是你在编写JavaScript代码时经常会遇到的东西。希望在本文结束时，您能够很好地理解匿名函数是如何工作的，以及如何在您的应用程序中使用它。</p><h1 id="300b" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">JavaScript中的函数</h1><p id="5436" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">让我们开始讨论如何在JavaScript中定义函数。下面的代码片段显示了JavaScript中定义的函数— <code class="fe mt mu mv mw b">displayAlert()</code>:</p><pre class="kj kk kl km gt mx mw my mz aw na bi"><span id="c86f" class="nb lx it mw b gy nc nd l ne nf">&lt;!-- TestJavaScript.html --&gt;<br/>&lt;html&gt;<br/>&lt;script&gt;<br/>    <strong class="mw iu">function displayAlert(message) {<br/>        alert(message)        <br/>    }</strong></span><span id="622d" class="nb lx it mw b gy ng nd l ne nf"><strong class="mw iu">    </strong>// calls the displayAlert() function<strong class="mw iu"><br/></strong>    displayAlert("Hello, JavaScript!")<br/>&lt;/script&gt;<br/>&lt;/html&gt;</span></pre><p id="cb8e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该功能在窗口中显示一个警告。要调用该函数，只需按其名称调用该函数，并向其传递一个参数:</p><pre class="kj kk kl km gt mx mw my mz aw na bi"><span id="0304" class="nb lx it mw b gy nc nd l ne nf">    // calls the displayAlert() function<strong class="mw iu"><br/></strong>    <strong class="mw iu">displayAlert("Hello, JavaScript!")</strong></span></pre><p id="b84a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在将显示包含该消息的警报:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nh"><img src="../Images/b43a9688f1fe04699b8579bdf650a82a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gDeLkBo-lVA4yZShEUaq8g.png"/></div></div></figure><p id="1091" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在让我们将<code class="fe mt mu mv mw b">displayAlert()</code>函数重写为一个匿名函数:</p><pre class="kj kk kl km gt mx mw my mz aw na bi"><span id="797b" class="nb lx it mw b gy nc nd l ne nf">&lt;html&gt;<br/>&lt;script&gt;<br/>    f = <strong class="mw iu">function(message) {<br/>        alert(message)        <br/>    }</strong><br/>    f("Hello, JavaScript!")<br/>&lt;/script&gt;<br/>&lt;/html&gt;</span></pre><p id="93ae" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这里，函数名被删除，剩下的是一个匿名函数(没有名字的函数):</p><pre class="kj kk kl km gt mx mw my mz aw na bi"><span id="416e" class="nb lx it mw b gy nc nd l ne nf"><strong class="mw iu">    </strong>function(message) {<br/>        alert(message)        <br/>    }</span></pre><p id="d2ed" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然后它被赋给一个名为<code class="fe mt mu mv mw b">f</code>的变量。要调用这个匿名函数，只需将变量<code class="fe mt mu mv mw b">f</code>视为一个函数:</p><pre class="kj kk kl km gt mx mw my mz aw na bi"><span id="20a2" class="nb lx it mw b gy nc nd l ne nf">f("Hello, JavaScript!")</span></pre><p id="d989" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您想在声明匿名函数后直接调用它，可以使用以下语法:</p><pre class="kj kk kl km gt mx mw my mz aw na bi"><span id="6c29" class="nb lx it mw b gy nc nd l ne nf">    <strong class="mw iu">(</strong>function(message) {<br/>        alert(message)        <br/>    }<strong class="mw iu">)("Hello, world!")</strong></span></pre><p id="8656" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当您加载HTML页面时，您应该会看到警告:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ni"><img src="../Images/3800a0cdc2d7a35f788a236b2ba425b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6iZGlzVIuU_VCTBbHmVeWg.png"/></div></div></figure><h1 id="b5e4" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">匿名函数的使用</h1><p id="00a7" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">现在您已经看到了匿名函数的样子，是时候看看匿名函数在您的应用程序中是如何有用的了。</p><p id="5bf9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">匿名函数的一个很好的用途是将一个函数传递给另一个函数。例如，JavaScript中的<code class="fe mt mu mv mw b">setTimeout()</code>函数允许您在指定的时间(以毫秒为单位)过后执行一个函数。在下面的例子中，五秒钟后，传递给<code class="fe mt mu mv mw b">setTimeout()</code>函数的匿名函数将被执行:</p><pre class="kj kk kl km gt mx mw my mz aw na bi"><span id="bfe3" class="nb lx it mw b gy nc nd l ne nf">&lt;html&gt;<br/>&lt;script&gt;    <br/>    setTimeout(<strong class="mw iu">function() {<br/>        alert("Time's up!")        <br/>    }</strong>, 5000)<strong class="mw iu"><br/></strong>&lt;/script&gt;<br/>&lt;/html&gt;</span></pre><p id="6efa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">5秒钟后，您将看到一条警告显示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ni"><img src="../Images/690679d52386d5d0a94d8aa049bda346.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HDHrThWBT7nq0oN7sTxcMg.png"/></div></div></figure><p id="36c3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用匿名函数的另一个好例子是用于数组的<code class="fe mt mu mv mw b">filter()</code>函数。假设您有一个整数值数组:</p><pre class="kj kk kl km gt mx mw my mz aw na bi"><span id="966e" class="nb lx it mw b gy nc nd l ne nf">    let nums = [4,5,3,7,1,2,8,9]</span></pre><p id="ed1a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您想提取这个数组中的所有偶数，您可以通过向其传递一个匿名函数来调用<code class="fe mt mu mv mw b">filter()</code>方法:</p><pre class="kj kk kl km gt mx mw my mz aw na bi"><span id="4396" class="nb lx it mw b gy nc nd l ne nf">    let evens = nums.filter(<strong class="mw iu">function(val) {<br/>        return val % 2 == 0<br/>    }</strong>)</span></pre><p id="eb5d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">匿名函数的主体指定了您希望结果所处的条件—在这种情况下，您希望数组中的每个值都能被2整除。换句话说，您需要数组中的所有偶数。然后，<code class="fe mt mu mv mw b">filter()</code>函数将结果作为数组返回，您可以打印出来:</p><pre class="kj kk kl km gt mx mw my mz aw na bi"><span id="331c" class="nb lx it mw b gy nc nd l ne nf">    alert(evens)  // 4,2,8</span></pre><p id="2240" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果需要数组中的所有奇数，则相应地更改匿名函数中的条件:</p><pre class="kj kk kl km gt mx mw my mz aw na bi"><span id="9571" class="nb lx it mw b gy nc nd l ne nf">    let evens = nums.filter(function(val) {<strong class="mw iu"><br/>        return val % 2 == 1<br/></strong>    })</span></pre><h1 id="96c0" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">实现使用匿名函数的函数</h1><p id="0e10" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">在上一节中，您看到了如何将匿名函数传递给<code class="fe mt mu mv mw b">filter()</code>方法。你自己写一个接受匿名函数的函数怎么样？</p><p id="c21e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设你想写自己的过滤函数，比如说<code class="fe mt mu mv mw b">myfilter()</code>。第一步是创建一个匿名函数，如下所示:</p><pre class="kj kk kl km gt mx mw my mz aw na bi"><span id="a4f5" class="nb lx it mw b gy nc nd l ne nf">    filterFunction = <strong class="mw iu">function(f) {<br/>        result = []<br/>        for (let i = 0; i &lt;= this.length; i++) {<br/>            if (f(this[i])) {<br/>                result.push(this[i])<br/>            }<br/>        }<br/>        return result        <br/>    }</strong></span></pre><p id="6f2b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">上面的代码片段:</p><ul class=""><li id="98f3" class="nj nk it lb b lc ld lf lg li nl lm nm lq nn lu no np nq nr bi translated">创建一个匿名函数，并将其赋给一个名为<code class="fe mt mu mv mw b">filterFunction</code>的变量</li><li id="439e" class="nj nk it lb b lc ns lf nt li nu lm nv lq nw lu no np nq nr bi translated">创建一个接受单个参数的匿名函数— <code class="fe mt mu mv mw b">f</code>，这是另一个匿名函数</li><li id="6666" class="nj nk it lb b lc ns lf nt li nu lm nv lq nw lu no np nq nr bi translated">使用<code class="fe mt mu mv mw b">this</code>关键字绑定到这个匿名函数被分配到的对象。例如，如果这个匿名函数被分配给一个数组，那么<code class="fe mt mu mv mw b">this</code>将引用这个数组</li><li id="2b84" class="nj nk it lb b lc ns lf nt li nu lm nv lq nw lu no np nq nr bi translated">对数组中的每个元素调用<code class="fe mt mu mv mw b">f</code>匿名函数，如果匿名函数的计算结果为<code class="fe mt mu mv mw b">true</code>，该元素将被添加到<code class="fe mt mu mv mw b">result</code>数组中</li><li id="d1cb" class="nj nk it lb b lc ns lf nt li nu lm nv lq nw lu no np nq nr bi translated">返回函数末尾的<code class="fe mt mu mv mw b">result</code>数组</li></ul><p id="a7d1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">要将上述匿名函数附加到数组，请指定要创建的新方法的名称，然后为其分配匿名函数:</p><pre class="kj kk kl km gt mx mw my mz aw na bi"><span id="5804" class="nb lx it mw b gy nc nd l ne nf">    let nums = [4,5,3,7,1,2,8,9]<br/><strong class="mw iu">    nums.myfilter = filterFunction</strong></span></pre><p id="eb7e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在上面，<code class="fe mt mu mv mw b">myfilter()</code>是新增加的方法。您现在可以像这样使用<code class="fe mt mu mv mw b">myfilter()</code>方法:</p><pre class="kj kk kl km gt mx mw my mz aw na bi"><span id="d569" class="nb lx it mw b gy nc nd l ne nf">    let evens = <strong class="mw iu">nums.myfilter(function(val) {<br/>        return val % 2 == 0<br/>    })</strong><br/>    alert(evens)  // 4,2,8</span></pre><h1 id="c8ba" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">箭头功能</h1><p id="d073" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">在ES6中，您可以使用声明匿名函数的简写方式。这种简写被称为<em class="lv">箭头功能</em>。考虑一下您之前看到的例子:</p><pre class="kj kk kl km gt mx mw my mz aw na bi"><span id="4013" class="nb lx it mw b gy nc nd l ne nf">    displayAlert = function(message) {<br/>        alert(message)        <br/>    }<br/>    displayAlert("Hello, JavaScript!")</span></pre><p id="bc54" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">使用箭头功能，您现在可以删除<code class="fe mt mu mv mw b">function</code>关键字并添加<em class="lv">粗箭头</em>操作符<code class="fe mt mu mv mw b">=&gt;</code>:</p><pre class="kj kk kl km gt mx mw my mz aw na bi"><span id="535a" class="nb lx it mw b gy nc nd l ne nf">    <strong class="mw iu">displayAlert = (message) =&gt;<br/>        alert(message)        </strong><br/>    <br/>    displayAlert("Hello, JavaScript!")</span></pre><p id="15e5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请注意，如果您的匿名函数只有一个语句/表达式，也可以删除这对<code class="fe mt mu mv mw b">{}</code>。如果函数中有多个语句/表达式(甚至是单个语句/表达式)，可以使用<code class="fe mt mu mv mw b">{}</code>:</p><pre class="kj kk kl km gt mx mw my mz aw na bi"><span id="5a45" class="nb lx it mw b gy nc nd l ne nf">    displayAlert = (message) =&gt; <strong class="mw iu">{</strong><br/>        alert(message)        <br/><strong class="mw iu">    }</strong></span></pre><p id="7e14" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">考虑您之前看到的另一个示例:</p><pre class="kj kk kl km gt mx mw my mz aw na bi"><span id="2485" class="nb lx it mw b gy nc nd l ne nf">    let evens = nums.filter(<strong class="mw iu">function(val) {<br/>        return val % 2 == 0<br/>    }</strong>)<br/>    alert(evens)</span></pre><p id="1dc8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以使用箭头函数重写匿名函数:</p><pre class="kj kk kl km gt mx mw my mz aw na bi"><span id="21c5" class="nb lx it mw b gy nc nd l ne nf">    let evens = nums.filter( <strong class="mw iu">(val) =&gt;<br/>        val % 2 == 0<br/>    )</strong><br/>    alert(evens)</span></pre><p id="8dce" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">请注意以下几点:</p><ul class=""><li id="8192" class="nj nk it lb b lc ld lf lg li nl lm nm lq nn lu no np nq nr bi translated">如果没有<code class="fe mt mu mv mw b">{}</code>封闭匿名函数体，就不能使用<code class="fe mt mu mv mw b">return</code>关键字(表达式的值是隐式返回的)。</li><li id="8ee0" class="nj nk it lb b lc ns lf nt li nu lm nv lq nw lu no np nq nr bi translated">如果您使用<code class="fe mt mu mv mw b">{}</code>来包含匿名函数的主体，那么如果您想要返回表达式的值，那么<code class="fe mt mu mv mw b">return</code>关键字是强制的，如下所示:</li></ul><pre class="kj kk kl km gt mx mw my mz aw na bi"><span id="006e" class="nb lx it mw b gy nc nd l ne nf">    let evens = nums.filter( (val) =&gt; <strong class="mw iu">{</strong><br/>        <strong class="mw iu">return</strong> val % 2 == 0<br/>    <strong class="mw iu">}</strong>)</span></pre><p id="02e5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于多语句/表达式匿名函数，关键字<code class="fe mt mu mv mw b">return</code>对于返回表达式的值是必需的。</p><pre class="kj kk kl km gt mx mw my mz aw na bi"><span id="1eeb" class="nb lx it mw b gy nc nd l ne nf">    let evens = nums.filter( (val) =&gt; {<br/>        console.log(val)<br/>        <strong class="mw iu">return</strong> val % 2 == 0<br/>    })</span></pre><h1 id="7d69" class="lw lx it bd ly lz ma mb mc md me mf mg jz mh ka mi kc mj kd mk kf ml kg mm mn bi translated">摘要</h1><p id="da29" class="pw-post-body-paragraph kz la it lb b lc mo ju le lf mp jx lh li mq lk ll lm mr lo lp lq ms ls lt lu im bi translated">这篇短文简要概述了JavaScript中的匿名函数。希望它可以作为下次开始用JavaScript编码时的快速参考！</p><div class="nx ny gp gr nz oa"><a href="https://weimenglee.medium.com/membership" rel="noopener follow" target="_blank"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd iu gy z fp of fr fs og fu fw is bi translated">加入媒介与我的介绍链接-李伟孟</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">weimenglee.medium.com</p></div></div><div class="oj l"><div class="ok l ol om on oj oo ks oa"/></div></div></a></div></div></div>    
</body>
</html>