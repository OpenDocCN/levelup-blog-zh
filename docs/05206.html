<html>
<head>
<title>Learning C++: Table-Driven Selection</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">学习C++:表格驱动的选择</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/learning-c-table-driven-selection-5064338a5446?source=collection_archive---------8-----------------------#2020-08-11">https://levelup.gitconnected.com/learning-c-table-driven-selection-5064338a5446?source=collection_archive---------8-----------------------#2020-08-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/d05fc6b2b1dd2347730fce63834c5c80.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2ZgejBla_Gdz_r03"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">照片由<a class="ae kf" href="https://unsplash.com/@chuttersnap?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> chuttersnap </a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="a982" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在C++中执行选择(或分支)的典型方式是使用if语句。然而，对于许多不断出现的场景，将逻辑放入表中是在代码中执行选择的更有效的方式。在这篇文章中，我将展示几种用表格代替复杂if语句的方法。</p><h1 id="9e3e" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">直接访问表</h1><p id="af05" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我想讨论的第一种表驱动选择是使用直接访问表。我将用来演示直接访问表的例子是确定一个月中的天数。</p><p id="dc95" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">解决这个问题的典型方法，或者我称之为计算机科学101方法，是用一个<code class="fe mh mi mj mk b">if-else if</code>语句对一个月中的日子进行编码，就像这样:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="ee79" class="mt lf it mk b gy mu mv l mw mx">if (month == 1) {<br/>  days = 31;<br/>}<br/>else if (month == 2) {<br/>  days = 28;<br/>}<br/>else if (month == 3) {<br/>  days = 31;<br/>}<br/>else if (month == 4) {<br/>  days = 30;<br/>}<br/>else if (month == 5) {<br/>  days = 31;<br/>}<br/>else if (month == 6) {<br/>  days = 30;<br/>}<br/>else if (month == 7) {<br/>  days = 31;<br/>}<br/>else if (month == 8) {<br/>  days = 31;<br/>}<br/>else if (month == 9) {<br/>  days = 30;<br/>}<br/>else if (month == 10) {<br/>  days = 31;<br/>}<br/>else if (month == 11) {<br/>  days = 30;<br/>}<br/>else if (month == 12) {<br/>  days = 31;<br/>}</span></pre><p id="ac32" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这是一大堆代码，占据了程序中很大的空间，需要花很多时间来通读。</p><p id="4d6c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">对这些数据进行编码的一种更简单的方法是在一个数组中，数组索引表示月份数，存储在该索引中的元素是该月的天数。</p><p id="b9b0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下面的程序演示了如何使用数组作为直接访问表来查找一个月中的日子:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="e152" class="mt lf it mk b gy mu mv l mw mx">#include &lt;iostream&gt;<br/>using namespace std;</span><span id="db95" class="mt lf it mk b gy my mv l mw mx">int main ()<br/>{<br/>  int month = 0;<br/>  int days = 0;<br/>  const int numMonths = 12;<br/>  int monthDays[numMonths] =<br/>    {31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};<br/>  string another = "y";<br/>  do {<br/>    cout &lt;&lt; "Month number to look up? ";<br/>    cin &gt;&gt; month;<br/>    days = monthDays[month-1];<br/>    cout &lt;&lt; "There are " &lt;&lt; days &lt;&lt; " days." &lt;&lt; endl;<br/>    cout &lt;&lt; "Do another (y/n)? ";<br/>    cin &gt;&gt; another;<br/>  } while (another == "y");<br/>  return 0;<br/>}</span></pre><p id="bf9e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">以下是该程序的输出示例:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="5c49" class="mt lf it mk b gy mu mv l mw mx">Month number to look up? 7<br/>There are 31 days.<br/>Do another (y/n)? y<br/>Month number to look up? 2<br/>There are 28 days.<br/>Do another (y/n)? n</span></pre><p id="828a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">使用直接访问表查找的完整程序比上面使用的<code class="fe mh mi mj mk b">if-else if </code>语句要短。</p><h1 id="1810" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">阶梯式存取表</h1><p id="0a0d" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">代替<code class="fe mh mi mj mk b">if-else if </code>语句的第二种类型的表查找是阶梯访问表，如史蒂夫·麦康奈尔在他的书<em class="mz">代码完成</em>中所描述的。</p><p id="4790" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">阶梯式表格背后的思想是，表格条目对一定范围的数据有效，而不是对特定值有效。一个经典的例子是给数字考试分数分配字母等级。在许多教师使用的标准90-80-70-60方案中,“A”级对应于90到100的数字分数；“B”级对应于从80到89的数字分数；“C”级对应于从70到79的数字分数；诸如此类。</p><p id="23ad" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下面是一个为字母等级实现阶梯过程的程序:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="a419" class="mt lf it mk b gy mu mv l mw mx">int main ()<br/>{<br/>  int gradeLimits[] = {60, 70, 80, 90, 100};<br/>  string grades[] = {"F", "D", "C", "B", "A"};<br/>  int gradeLevel = 0;<br/>  int maxGradeLevel = 5;<br/>  int score;<br/>  cout &lt;&lt; "What was the numeric score? ";<br/>  cin &gt;&gt; score;<br/>  string stuGrade = "A";<br/>  while ((stuGrade == "A") &amp;&amp; (gradeLevel &lt; maxGradeLevel)) {<br/>    if (score &lt; gradeLimits[gradeLevel]) {<br/>      stuGrade = grades[gradeLevel];<br/>    }<br/>    gradeLevel++;<br/>  }<br/>  cout &lt;&lt; "A numeric score of " &lt;&lt; score<br/>       &lt;&lt; " is the letter grade " &lt;&lt; stuGrade &lt;&lt; ".";<br/>  return 0;<br/>}</span></pre><p id="64e6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">以下是该程序的几次运行:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="9998" class="mt lf it mk b gy mu mv l mw mx">What was the numeric score? 73<br/>A numeric score of 73 is the letter grade C.<br/>What was the numeric score? 91<br/>A numeric score of 91 is the letter grade A.</span></pre><p id="deb8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这个程序比一个<code class="fe mh mi mj mk b">if-else if</code>版本要短得多，更高效，也更容易阅读。</p><h1 id="0033" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">索引访问表</h1><p id="783a" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">进行表驱动选择的另一种方法是使用索引访问表。在这里，表的表现很像哈希表。对于字母等级示例，数字分数是索引，与该分数相关联的字母等级存储在该索引的位置，就像散列表中的键被转换为数组索引值一样。</p><p id="2af7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">索引访问表可以手动创建并存储在库中，也可以在程序启动时由函数生成。下面的示例通过在程序开始时创建索引访问表并在创建后立即演示来简化这一过程。</p><p id="0d8e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">程序如下:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="f53f" class="mt lf it mk b gy mu mv l mw mx">int main ()<br/>{<br/>  // this step will be in another program or function<br/>  const int numElements = 101;<br/>  string letterGrades[numElements];<br/>  for (int i = 0; i &lt; numElements; i++) {<br/>    if ((i &gt;= 0) &amp;&amp; (i &lt;= 60)) {<br/>      letterGrades[i] = "F";<br/>    }<br/>    else if ((i &gt;= 60) &amp;&amp; (i &lt;= 69)) {<br/>      letterGrades[i] = "D";<br/>    }<br/>    else if ((i &gt;= 70) &amp;&amp; (i &lt;= 79)) {<br/>      letterGrades[i] = "C";<br/>    }<br/>    else if ((i &gt;= 80) &amp;&amp; (i &lt;= 89)) {<br/>      letterGrades[i] = "B";<br/>    }<br/>    else {<br/>      letterGrades[i] = "A";<br/>    }<br/>  }<br/>  // table processing part<br/>  int score = 77;<br/>  cout &lt;&lt; score &lt;&lt; ": Letter grade: "<br/>       &lt;&lt; letterGrades[score] &lt;&lt; endl;<br/>  score = 62;<br/>  cout &lt;&lt; score &lt;&lt; ": Letter grade: "<br/>       &lt;&lt; letterGrades[score] &lt;&lt; endl;<br/>  score = 82;<br/>  cout &lt;&lt; score &lt;&lt; ": Letter grade: "<br/>       &lt;&lt; letterGrades[score] &lt;&lt; endl;<br/>  score = 98;<br/>  cout &lt;&lt; score &lt;&lt; ": Letter grade: "<br/>       &lt;&lt; letterGrades[score] &lt;&lt; endl;<br/>  score = 54;<br/>  cout &lt;&lt; score &lt;&lt; ": Letter grade: "<br/>       &lt;&lt; letterGrades[score] &lt;&lt; endl;<br/>  return 0;<br/>}</span></pre><p id="721c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下面是这个程序运行一次的输出:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="9b8a" class="mt lf it mk b gy mu mv l mw mx">77: Letter grade: C<br/>62: Letter grade: D<br/>82: Letter grade: B<br/>98: Letter grade: A<br/>54: Letter grade: F</span></pre><h1 id="2782" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">考虑长if-else if语句上的表驱动选择</h1><p id="4278" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">如果您发现自己在程序中编写了一长串<code class="fe mh mi mj mk b">if-else if</code>语句，您应该考虑在程序中采用这些表格驱动的选择方法之一。表格更容易阅读，也不容易出错。它们也更有效，尤其是当它所替换的<code class="fe mh mi mj mk b">if-else if </code>语句很长并且使用复杂的逻辑时。</p><p id="d6b9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">感谢您的阅读，请给我发电子邮件提出意见和建议。如果你对我的计算机编程课程感兴趣，请访问我的网站:【https://learningcpp.teachable.com】T2。</p></div></div>    
</body>
</html>