<html>
<head>
<title>Build a Todo App in Golang, MongoDB, and React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Golang、MongoDB和React中构建Todo应用程序</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/build-a-todo-app-in-golang-mongodb-and-react-e1357b4690a6?source=collection_archive---------1-----------------------#2019-08-06">https://levelup.gitconnected.com/build-a-todo-app-in-golang-mongodb-and-react-e1357b4690a6?source=collection_archive---------1-----------------------#2019-08-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="b875" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如何在Golang中创建todo应用程序的完整分步教程</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/dd527d779e3c5a7387a004b662d594c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZUuS_BuHEMz_QmlSPl0vSg.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae kv" href="https://canva.7eqqol.net/KD6B9" rel="noopener ugc nofollow" target="_blank">采用Canva设计的盖子</a></figcaption></figure><p id="c70d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">本教程的主要目的是获得Golang的实践经验。当我学习Golang时，我意识到很少有教程和文章能给你完整的端到端实践体验。</p><p id="8646" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是完整代码的<a class="ae kv" href="https://github.com/schadokar/go-to-do-app/" rel="noopener ugc nofollow" target="_blank"> GitHub链接</a>。</p><blockquote class="ls lt lu"><p id="3442" class="kw kx lv ky b kz la jr lb lc ld ju le lw lg lh li lx lk ll lm ly lo lp lq lr ij bi translated">查看我在<a class="ae kv" href="http://schadokar.dev/" rel="noopener ugc nofollow" target="_blank"> schadokar.dev </a>上的其他教程</p></blockquote></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><p id="81f8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本教程中，我们将构建一个todo应用程序，其中服务器将在Golang中，数据库将在MongoDB中，前端将在React中。</p><ol class=""><li id="b3d4" class="mg mh iq ky b kz la lc ld lf mi lj mj ln mk lr ml mm mn mo bi translated"><strong class="ky ir">服务器—转到</strong></li><li id="497f" class="mg mh iq ky b kz mp lc mq lf mr lj ms ln mt lr ml mm mn mo bi translated"><strong class="ky ir">数据库— MongoDB </strong></li><li id="540e" class="mg mh iq ky b kz mp lc mq lf mr lj ms ln mt lr ml mm mn mo bi translated"><strong class="ky ir">前端—反应</strong></li></ol></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><p id="82e6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我假设你已经安装了Go并且对它有一个基本的了解。如果你没有，我会解释所有的步骤，并会提到相关主题的参考。</p><blockquote class="ls lt lu"><p id="20d0" class="kw kx lv ky b kz la jr lb lc ld ju le lw lg lh li lx lk ll lm ly lo lp lq lr ij bi translated"><strong class="ky ir">注意:</strong>这个项目是在GOPATH之外开发的，因此本地导入正在工作。</p></blockquote><p id="1abb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">创建一个项目目录，并给它一个合适的名称。</p><p id="080c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我在用<code class="fe mu mv mw mx b">go-todo</code>。</p><p id="3b8d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们首先创建服务器。</p><h2 id="4628" class="my mz iq bd na nb nc dn nd ne nf dp ng lf nh ni nj lj nk nl nm ln nn no np nq bi translated">Golang的服务器</h2><p id="5ade" class="pw-post-body-paragraph kw kx iq ky b kz nr jr lb lc ns ju le lf nt lh li lj nu ll lm ln nv lp lq lr ij bi translated">在<code class="fe mu mv mw mx b">go-todo</code>中创建一个<code class="fe mu mv mw mx b">server</code>目录。</p><p id="ab10" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe mu mv mw mx b">server</code>目录结构将是:</p><pre class="kg kh ki kj gt nw mx nx ny aw nz bi"><span id="34a4" class="my mz iq mx b gy oa ob l oc od">go-todo<br/>  - server<br/>    - middleware<br/>      - middleware.go<br/>    - models <br/>      - models.go<br/>    - router <br/>      - router.go<br/>    - main.go</span></pre><p id="05fe" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在服务器中，我们需要2个依赖项:第一个用于连接MongoDB，第二个用于创建RESTAPIs。</p><p id="b7ec" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将使用MongoDB官方的<a class="ae kv" href="https://github.com/mongodb/mongo-go-driver" rel="noopener ugc nofollow" target="_blank"> MongoDB Go驱动程序</a>。</p><p id="0be7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要安装它，请在终端或命令窗口中运行以下命令。</p><pre class="kg kh ki kj gt nw mx nx ny aw nz bi"><span id="8e22" class="my mz iq mx b gy oa ob l oc od">go get go.mongodb.org/mongo-driver</span></pre><p id="a08e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">其次，为路由器安装<code class="fe mu mv mw mx b">gorilla/mux</code>包<a class="ae kv" href="https://github.com/gorilla/mux" rel="noopener ugc nofollow" target="_blank"/>。<code class="fe mu mv mw mx b">mux</code>是Golang中最受欢迎的路由器包之一。</p><p id="07ff" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要安装它，请在终端或命令窗口中运行以下命令。</p><pre class="kg kh ki kj gt nw mx nx ny aw nz bi"><span id="b22f" class="my mz iq mx b gy oa ob l oc od">go get -u github.com/gorilla/mux</span></pre><h2 id="5861" class="my mz iq bd na nb nc dn nd ne nf dp ng lf nh ni nj lj nk nl nm ln nn no np nq bi translated"><strong class="ak">型号</strong></h2><p id="d6a8" class="pw-post-body-paragraph kw kx iq ky b kz nr jr lb lc ns ju le lf nt lh li lj nu ll lm ln nv lp lq lr ij bi translated">一旦两个包都成功安装，创建一个<code class="fe mu mv mw mx b">models</code>目录和<code class="fe mu mv mw mx b">models.go</code>文件并粘贴下面的代码。</p><pre class="kg kh ki kj gt nw mx nx ny aw nz bi"><span id="e4cd" class="my mz iq mx b gy oa ob l oc od">package models</span><span id="cb24" class="my mz iq mx b gy oe ob l oc od">import "go.mongodb.org/mongo-driver/bson/primitive"</span><span id="76b5" class="my mz iq mx b gy oe ob l oc od">type ToDoList struct {<br/> <br/>  ID     primitive.ObjectID `json:"_id,omitempty" bson:"_id,omitempty"`</span><span id="515c" class="my mz iq mx b gy oe ob l oc od">  Task   string             `json:"task,omitempty"`<br/>  Status bool               `json:"status,omitempty"`<br/>}</span></pre><p id="f357" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">第一行是这个文件的包名。要了解更多关于软件包的信息，请点击此<a class="ae kv" href="https://medium.com/rungo/everything-you-need-to-know-about-packages-in-go-b8bac62b74cc" rel="noopener">链接</a>。</p><p id="47ab" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">第二行是来自<code class="fe mu mv mw mx b">mongo-driver</code>包的<code class="fe mu mv mw mx b">import</code>原语。</p><p id="51e3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了定义数据如何存储在数据库中，我们必须为它创建一个<code class="fe mu mv mw mx b">model</code>。在Golang中，我们对此使用<code class="fe mu mv mw mx b">struct</code>类型。</p><p id="fef9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<code class="fe mu mv mw mx b">ToDoList</code>我们有3个领域:</p><ol class=""><li id="acfa" class="mg mh iq ky b kz la lc ld lf mi lj mj ln mk lr ml mm mn mo bi translated">ID:这个objectID将由MongoDB生成</li><li id="790a" class="mg mh iq ky b kz mp lc mq lf mr lj ms ln mt lr ml mm mn mo bi translated">任务:测试</li><li id="e90b" class="mg mh iq ky b kz mp lc mq lf mr lj ms ln mt lr ml mm mn mo bi translated">状态:<code class="fe mu mv mw mx b">true</code>或<code class="fe mu mv mw mx b">false</code></li></ol><p id="1605" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">MongoDB中id的类型是<code class="fe mu mv mw mx b">Object(id)</code>。</p><blockquote class="ls lt lu"><p id="2345" class="kw kx lv ky b kz la jr lb lc ld ju le lw lg lh li lx lk ll lm ly lo lp lq lr ij bi translated">注意:ToDoList在导出时必须是大写的。</p></blockquote></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><h2 id="2042" class="my mz iq bd na nb nc dn nd ne nf dp ng lf nh ni nj lj nk nl nm ln nn no np nq bi translated"><strong class="ak">中间件</strong></h2><p id="de46" class="pw-post-body-paragraph kw kx iq ky b kz nr jr lb lc ns ju le lf nt lh li lj nu ll lm ln nv lp lq lr ij bi translated">在<code class="fe mu mv mw mx b">server</code>目录下创建一个名为<code class="fe mu mv mw mx b">middleware</code>的新文件夹，并在其中创建一个新文件<code class="fe mu mv mw mx b">middleware.go</code>并将下面的代码粘贴到其中。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="of og l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">中间件. go</figcaption></figure><p id="67ed" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我解释一下它的功能。所有大写的函数都被导出，并将在我们稍后要写的<code class="fe mu mv mw mx b">router.go</code>中使用。</p><ul class=""><li id="c8b7" class="mg mh iq ky b kz la lc ld lf mi lj mj ln mk lr oh mm mn mo bi translated"><code class="fe mu mv mw mx b"><strong class="ky ir">init()</strong></code> <strong class="ky ir"> : </strong>在整个程序生命周期中只运行一次。在init函数中，将建立到MongoDB的连接。查看StackOverflow 上的这个<a class="ae kv" href="https://stackoverflow.com/a/49831018/9790416" rel="noopener ugc nofollow" target="_blank">答案，了解更多关于init的信息。</a></li><li id="01ab" class="mg mh iq ky b kz mp lc mq lf mr lj ms ln mt lr oh mm mn mo bi translated"><code class="fe mu mv mw mx b"><strong class="ky ir">GetAllTask</strong></code> <strong class="ky ir"> : </strong>首先设置头来处理cors问题，然后调用<code class="fe mu mv mw mx b">getAllTask()</code>函数。它使用一个<code class="fe mu mv mw mx b">bson</code>包从MongoDB获取数据。使用<code class="fe mu mv mw mx b"><em class="lv">bson.M</em></code> <em class="lv">其中M是BSON文档的无序、简洁表示。它通常应该用于序列化BSON。</em>以<code class="fe mu mv mw mx b">primitive.M</code>类型返回的所有文件。包<code class="fe mu mv mw mx b">primitive</code>包含类似于Go原语的类型，因为BSON类型可以没有直接的Go原语表示。</li><li id="6992" class="mg mh iq ky b kz mp lc mq lf mr lj ms ln mt lr oh mm mn mo bi translated"><code class="fe mu mv mw mx b"><strong class="ky ir">CreateTask</strong></code> <strong class="ky ir"> : </strong>首先解码请求体，并存储在<code class="fe mu mv mw mx b">models.ToDoList</code>类型中。它是从一个<code class="fe mu mv mw mx b">models</code>包里进口的。然后会调用<code class="fe mu mv mw mx b">insertOneTask</code>函数，将任务插入到集合中。</li><li id="8a97" class="mg mh iq ky b kz mp lc mq lf mr lj ms ln mt lr oh mm mn mo bi translated"><code class="fe mu mv mw mx b"><strong class="ky ir">TaskComplete</strong></code> <strong class="ky ir"> : </strong>这是一个更新请求，根据任务ID更新任务的状态。为了从URL获取<code class="fe mu mv mw mx b">params</code>,我们使用了<code class="fe mu mv mw mx b">mux</code>包。使用<code class="fe mu mv mw mx b">mux</code>，将任务id作为字符串发送给<code class="fe mu mv mw mx b">taskComplete</code>函数。MongoDB将ID分配给ObjectID格式的数据。为了从任务ID(字符串)中获取ObjectID，我们使用了<code class="fe mu mv mw mx b">primitive</code>包的方法<code class="fe mu mv mw mx b">ObjectIDFromHex</code>。它将返回<code class="fe mu mv mw mx b">ObjectID</code>。<code class="fe mu mv mw mx b">updateOne</code>方法需要3个参数<code class="fe mu mv mw mx b">context</code>、<code class="fe mu mv mw mx b">filter</code>和<code class="fe mu mv mw mx b">update</code>。<code class="fe mu mv mw mx b">context</code>是<code class="fe mu mv mw mx b">Background</code>你可以通过此<a class="ae kv" href="https://golang.org/pkg/context/#Background" rel="noopener ugc nofollow" target="_blank">链接</a>了解更多关于上下文包的信息。第二个参数是<code class="fe mu mv mw mx b">filter</code>，按id过滤，第三个参数是<code class="fe mu mv mw mx b">update</code>，其中状态更新为<code class="fe mu mv mw mx b">true</code>。</li><li id="8bea" class="mg mh iq ky b kz mp lc mq lf mr lj ms ln mt lr oh mm mn mo bi translated"><code class="fe mu mv mw mx b"><strong class="ky ir">UndoTask</strong></code> <strong class="ky ir"> : </strong>与TaskComplete相同，只是将任务的状态更新为<code class="fe mu mv mw mx b">false</code></li><li id="6017" class="mg mh iq ky b kz mp lc mq lf mr lj ms ln mt lr oh mm mn mo bi translated"><code class="fe mu mv mw mx b"><strong class="ky ir">DeleteTask</strong></code> <strong class="ky ir"> : </strong>是删除请求。首先，它将从URL获取任务id，然后将其传递给<code class="fe mu mv mw mx b">deleteOneTask</code>。它将检索任务的<code class="fe mu mv mw mx b">ObjectID</code>,然后根据id从集合中删除任务。</li><li id="86fe" class="mg mh iq ky b kz mp lc mq lf mr lj ms ln mt lr oh mm mn mo bi translated"><code class="fe mu mv mw mx b"><strong class="ky ir">DeleteAllTask</strong></code> <strong class="ky ir"> : </strong>顾名思义，它从集合中删除所有任务。</li></ul><p id="e741" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">中间件完成了。</p></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><p id="5298" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> MongoDB设置</strong></p><p id="c75d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先设置MongoDB连接。</p><p id="6aa5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这里，我使用MongoDB Atlas进行演示。您可以注册免费层，它给你512MB的存储空间，这对于学习来说绰绰有余。</p><p id="035a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="https://docs.atlas.mongodb.com/getting-started/" rel="noopener ugc nofollow" target="_blank">报名</a>MongoDB图集。按照链接说明进行操作。</p><p id="cbc9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一旦集群准备好了，就需要做一些事情。</p><p id="9aa1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，白名单你的IP地址。</p><ul class=""><li id="5b27" class="mg mh iq ky b kz la lc ld lf mi lj mj ln mk lr oh mm mn mo bi translated">点击“安全”下的“网络访问”。</li><li id="d633" class="mg mh iq ky b kz mp lc mq lf mr lj ms ln mt lr oh mm mn mo bi translated">点击“添加IP地址”并选择“添加当前IP地址”。这将只允许您的计算机与之交互。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oi"><img src="../Images/0c5d1738f0b32a4b30e13ab1d78f7e49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C7nfL2-4BU4v2DlpuxRtow.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">白名单IP地址</figcaption></figure><p id="8e06" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">第二，创建用户。你可以在这个<a class="ae kv" href="https://docs.atlas.mongodb.com/getting-started/#create-a-mongodb-user-for-your-cluster" rel="noopener ugc nofollow" target="_blank">链接</a>中了解更多关于用户的信息。</p><ul class=""><li id="0a84" class="mg mh iq ky b kz la lc ld lf mi lj mj ln mk lr oh mm mn mo bi translated">点击“安全”下的“数据库访问”并创建一个新用户。</li><li id="a455" class="mg mh iq ky b kz mp lc mq lf mr lj ms ln mt lr oh mm mn mo bi translated">我有<code class="fe mu mv mw mx b">admin</code>作为用户。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oj"><img src="../Images/fc92a2ec4dd2ca8ef6a2b05e96a2407c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AbdyOLCDGCDb57YKSU2sQQ.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">atlas用户</figcaption></figure><p id="dd45" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，是时候获取连接字符串了。</p><ul class=""><li id="ec76" class="mg mh iq ky b kz la lc ld lf mi lj mj ln mk lr oh mm mn mo bi translated">转到“集群”，点击“连接”，然后“连接您的应用程序”。</li><li id="5db8" class="mg mh iq ky b kz mp lc mq lf mr lj ms ln mt lr oh mm mn mo bi translated">复制连接字符串并粘贴到<code class="fe mu mv mw mx b">middleware.go</code>的<code class="fe mu mv mw mx b">connectionString</code>中</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ok"><img src="../Images/b40958a21330d7e1e8e80fee09f78613.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QP82h8R88HQz_ZOQ_hRS2Q.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">连接字符串</figcaption></figure></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><h2 id="2d96" class="my mz iq bd na nb nc dn nd ne nf dp ng lf nh ni nj lj nk nl nm ln nn no np nq bi translated">路由器</h2><p id="ec28" class="pw-post-body-paragraph kw kx iq ky b kz nr jr lb lc ns ju le lf nt lh li lj nu ll lm ln nv lp lq lr ij bi translated">在<code class="fe mu mv mw mx b">server</code>目录下创建一个<code class="fe mu mv mw mx b">router</code>文件夹，然后在其中新建一个文件<code class="fe mu mv mw mx b">router.go</code>。将下面的代码粘贴到文件中。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="of og l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">路由器</figcaption></figure><p id="0072" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，我们从<code class="fe mu mv mw mx b">middleware</code>包中导入所有的任务函数。</p><p id="744c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">其次，我们使用<code class="fe mu mv mw mx b">mux</code>包来创建路线。</p><ul class=""><li id="53e0" class="mg mh iq ky b kz la lc ld lf mi lj mj ln mk lr oh mm mn mo bi translated">第11行:使用<code class="fe mu mv mw mx b">mux.NewRouter()</code>创建路由器的新实例</li><li id="8625" class="mg mh iq ky b kz mp lc mq lf mr lj ms ln mt lr oh mm mn mo bi translated">第13行:<code class="fe mu mv mw mx b">GET</code>从数据库中获取所有任务的方法。在<code class="fe mu mv mw mx b">Methods</code>中，第一个参数是<code class="fe mu mv mw mx b">Method</code>，这里是<code class="fe mu mv mw mx b">GET</code>和第二个<code class="fe mu mv mw mx b">OPTIONS</code>，这是为了处理<code class="fe mu mv mw mx b">cors</code>。</li><li id="039f" class="mg mh iq ky b kz mp lc mq lf mr lj ms ln mt lr oh mm mn mo bi translated">第14行:<code class="fe mu mv mw mx b">POST</code>在DB中创建任务的方法。</li><li id="839e" class="mg mh iq ky b kz mp lc mq lf mr lj ms ln mt lr oh mm mn mo bi translated">第15行:<code class="fe mu mv mw mx b">PUT</code>方法在DB中将任务的状态更新为<code class="fe mu mv mw mx b">true</code>。任务的id作为URL中的参数传递。</li><li id="e692" class="mg mh iq ky b kz mp lc mq lf mr lj ms ln mt lr oh mm mn mo bi translated">第16行:<code class="fe mu mv mw mx b">PUT</code>方法在DB中将任务的状态更新为<code class="fe mu mv mw mx b">false</code>。任务的id作为URL中的参数传递。</li><li id="169e" class="mg mh iq ky b kz mp lc mq lf mr lj ms ln mt lr oh mm mn mo bi translated">第17行:<code class="fe mu mv mw mx b">DELETE</code>从DB中删除任务的方法。任务的id作为URL中的参数传递。</li><li id="343e" class="mg mh iq ky b kz mp lc mq lf mr lj ms ln mt lr oh mm mn mo bi translated">第18行:<code class="fe mu mv mw mx b">DELETE</code>方法从DB中删除所有任务。</li><li id="5690" class="mg mh iq ky b kz mp lc mq lf mr lj ms ln mt lr oh mm mn mo bi translated">第19行:返回<code class="fe mu mv mw mx b">router</code>实例。该路由器将在<code class="fe mu mv mw mx b">main.go</code>中提供服务</li></ul><h2 id="6d9d" class="my mz iq bd na nb nc dn nd ne nf dp ng lf nh ni nj lj nk nl nm ln nn no np nq bi translated">main.go</h2><p id="98a3" class="pw-post-body-paragraph kw kx iq ky b kz nr jr lb lc ns ju le lf nt lh li lj nu ll lm ln nv lp lq lr ij bi translated">在<code class="fe mu mv mw mx b">server</code>目录下创建一个<code class="fe mu mv mw mx b">main.go</code>文件。将下面的代码粘贴到其中。</p><pre class="kg kh ki kj gt nw mx nx ny aw nz bi"><span id="7a14" class="my mz iq mx b gy oa ob l oc od">package main</span><span id="7aae" class="my mz iq mx b gy oe ob l oc od">import (<br/>    "fmt"<br/>    "log"<br/>    "net/http"<br/>    "./router"<br/>)</span><span id="0a61" class="my mz iq mx b gy oe ob l oc od">func main() {</span><span id="0fc3" class="my mz iq mx b gy oe ob l oc od">    r := router.Router()</span><span id="9a4c" class="my mz iq mx b gy oe ob l oc od">    fmt.Println("Starting server on the port 8080...")</span><span id="9465" class="my mz iq mx b gy oe ob l oc od">    log.Fatal(http.ListenAndServe(":8080", r))<br/>}</span></pre><p id="b70e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">进口<code class="fe mu mv mw mx b">net/http</code>包服务于<code class="fe mu mv mw mx b">8080</code>港的航线，<code class="fe mu mv mw mx b">./router</code>进口<code class="fe mu mv mw mx b">router</code>包。</p><p id="5f6f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">创建一个<code class="fe mu mv mw mx b">router</code>包的实例。</p><pre class="kg kh ki kj gt nw mx nx ny aw nz bi"><span id="2337" class="my mz iq mx b gy oa ob l oc od">r := router.Router()</span></pre><p id="1a4b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<code class="fe mu mv mw mx b">8080</code>端口上服务/托管应用程序。</p><pre class="kg kh ki kj gt nw mx nx ny aw nz bi"><span id="b894" class="my mz iq mx b gy oa ob l oc od">http.ListenAndServe(":8080", r)</span></pre><p id="05bb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一个<code class="fe mu mv mw mx b">log</code>包用于跟踪日志。</p><p id="38f4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从<code class="fe mu mv mw mx b">server</code>目录打开终端，运行下面的命令来服务服务器。您将看到图像输出。</p><pre class="kg kh ki kj gt nw mx nx ny aw nz bi"><span id="298b" class="my mz iq mx b gy oa ob l oc od">go run main.go</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ol"><img src="../Images/ea37156cdbdd5f1b6d762f3c6213bf1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1_KkZ3GUIhHTdPJhRty98w.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">服务</figcaption></figure><p id="819b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以使用<code class="fe mu mv mw mx b">POSTMAN</code>来测试API。</p></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><h2 id="71c1" class="my mz iq bd na nb nc dn nd ne nf dp ng lf nh ni nj lj nk nl nm ln nn no np nq bi translated">反应中的前端</h2><p id="2075" class="pw-post-body-paragraph kw kx iq ky b kz nr jr lb lc ns ju le lf nt lh li lj nu ll lm ln nv lp lq lr ij bi translated">我们使用<code class="fe mu mv mw mx b">create-react-app</code>模块作为这个项目的样板。你可以在这里了解更多。</p><p id="66fb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从项目目录运行下面的命令<code class="fe mu mv mw mx b">go-todo</code></p><pre class="kg kh ki kj gt nw mx nx ny aw nz bi"><span id="cf16" class="my mz iq mx b gy oa ob l oc od">npx create-react-app client</span></pre><p id="86e0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">安装需要一段时间。完成后，为项目安装以下依赖项。从<code class="fe mu mv mw mx b">client</code>目录打开终端。</p><ol class=""><li id="d3c8" class="mg mh iq ky b kz la lc ld lf mi lj mj ln mk lr ml mm mn mo bi translated">Axios: 用于与服务器rest APIs交互。</li><li id="326b" class="mg mh iq ky b kz mp lc mq lf mr lj ms ln mt lr ml mm mn mo bi translated"><strong class="ky ir"> semantic-ui-react: </strong>是一个很棒的react组件库，可以快速搭建一个前端。参考此<a class="ae kv" href="https://react.semantic-ui.com/" rel="noopener ugc nofollow" target="_blank">链接</a>了解更多信息。</li></ol><pre class="kg kh ki kj gt nw mx nx ny aw nz bi"><span id="6f1e" class="my mz iq mx b gy oa ob l oc od">npm install axios</span><span id="6e24" class="my mz iq mx b gy oe ob l oc od">npm install semantic-ui-react</span></pre><p id="8103" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">语义UI React提供React组件，而语义UI以CSS样式表的形式提供主题。将样式表添加到<code class="fe mu mv mw mx b">public</code>文件夹内的<code class="fe mu mv mw mx b">index.html</code>中。从这个<a class="ae kv" href="https://react.semantic-ui.com/usage" rel="noopener ugc nofollow" target="_blank">链接</a>查看语义UI版本。</p><pre class="kg kh ki kj gt nw mx nx ny aw nz bi"><span id="449b" class="my mz iq mx b gy oa ob l oc od">&lt;link rel="stylesheet" href="//cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css"/&gt;</span></pre><p id="c708" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">更新<code class="fe mu mv mw mx b">title</code>标签中的标题。这将是浏览器中选项卡的标题。保存<code class="fe mu mv mw mx b">index.html</code></p><pre class="kg kh ki kj gt nw mx nx ny aw nz bi"><span id="9379" class="my mz iq mx b gy oa ob l oc od">&lt;title&gt;ToDo App&lt;/title&gt;</span></pre><p id="6468" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">转到<code class="fe mu mv mw mx b">src</code>文件夹并打开<code class="fe mu mv mw mx b">App.js</code>。删除其中的内容并粘贴下面的代码。</p><pre class="kg kh ki kj gt nw mx nx ny aw nz bi"><span id="7b2d" class="my mz iq mx b gy oa ob l oc od">import React from "react";<br/>import "./App.css";</span><span id="eb7f" class="my mz iq mx b gy oe ob l oc od">// import the Container Component from the semantic-ui-react<br/>import { Container } from "semantic-ui-react";</span><span id="78d1" class="my mz iq mx b gy oe ob l oc od">// import the ToDoList component<br/>import ToDoList from "./To-Do-List";</span><span id="0aed" class="my mz iq mx b gy oe ob l oc od">function App() {<br/>  return (<br/>    &lt;div&gt;<br/>      &lt;Container&gt;<br/>        &lt;ToDoList /&gt;<br/>      &lt;/Container&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}<br/>export default App;</span></pre><p id="c6ae" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<code class="fe mu mv mw mx b">src</code>文件夹中创建一个新文件<code class="fe mu mv mw mx b">To-Do-List.js</code>。这个组件将是前端。</p><p id="c7ea" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你可以从<a class="ae kv" href="https://github.com/schadokar/go-to-do-app/blob/master/client/src/To-Do-List.js" rel="noopener ugc nofollow" target="_blank"> GitHub </a>下载这个组件。</p><p id="6f26" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以保存该文件，然后它就可以运行了。</p></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><p id="7e16" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">运行应用程序</strong></p><ul class=""><li id="528a" class="mg mh iq ky b kz la lc ld lf mi lj mj ln mk lr oh mm mn mo bi translated">打开终端，从服务器目录启动<code class="fe mu mv mw mx b">server</code>。</li></ul><pre class="kg kh ki kj gt nw mx nx ny aw nz bi"><span id="5416" class="my mz iq mx b gy oa ob l oc od">go run main.go</span></pre><ul class=""><li id="e1b4" class="mg mh iq ky b kz la lc ld lf mi lj mj ln mk lr oh mm mn mo bi translated">打开终端，从客户端目录启动react应用程序。</li></ul><pre class="kg kh ki kj gt nw mx nx ny aw nz bi"><span id="424d" class="my mz iq mx b gy oa ob l oc od">npm start</span></pre><ul class=""><li id="34a8" class="mg mh iq ky b kz la lc ld lf mi lj mj ln mk lr oh mm mn mo bi translated">转到<code class="fe mu mv mw mx b">http://localhost:3000</code></li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oj"><img src="../Images/95907a48ea9d28bbacbe5cbc3ce55ec9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mG0ltuzwIK6oI5_QwT_RPw.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">指数</figcaption></figure><ul class=""><li id="f464" class="mg mh iq ky b kz la lc ld lf mi lj mj ln mk lr oh mm mn mo bi translated"><strong class="ky ir">创建任务</strong></li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi om"><img src="../Images/36804b799ba0ea6a99411d7303ace550.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tDNWhYD0JFqqMOiTPWda5Q.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">创建任务</figcaption></figure><ul class=""><li id="f484" class="mg mh iq ky b kz la lc ld lf mi lj mj ln mk lr oh mm mn mo bi translated"><strong class="ky ir">点击</strong> <code class="fe mu mv mw mx b">Done</code>完成任务</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi on"><img src="../Images/85459ea329098669e497163548abc874.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lurpOVw4FdwM4M6KiDcThw.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">任务完成</figcaption></figure><ul class=""><li id="bdff" class="mg mh iq ky b kz la lc ld lf mi lj mj ln mk lr oh mm mn mo bi translated"><strong class="ky ir">撤销任务</strong></li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi om"><img src="../Images/36804b799ba0ea6a99411d7303ace550.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tDNWhYD0JFqqMOiTPWda5Q.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">撤消任务</figcaption></figure><ul class=""><li id="29de" class="mg mh iq ky b kz la lc ld lf mi lj mj ln mk lr oh mm mn mo bi translated"><strong class="ky ir">删除任务</strong></li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oo"><img src="../Images/f790b7ede4f25303f21f9006d2a1e72e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*66XhCBq44x79SjFcLnAmUg.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">删除任务</figcaption></figure></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><h1 id="8f1f" class="op mz iq bd na oq or os nd ot ou ov ng jw ow jx nj jz ox ka nm kc oy kd np oz bi translated">恭喜🎉</h1><p id="b93f" class="pw-post-body-paragraph kw kx iq ky b kz nr jr lb lc ns ju le lf nt lh li lj nu ll lm ln nv lp lq lr ij bi translated">恭喜你！你只需在Golang中创建一个待办事项应用程序。</p><p id="5136" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">完整的代码。这是<a class="ae kv" href="https://github.com/schadokar/go-to-do-app/" rel="noopener ugc nofollow" target="_blank"> Github链接。</a></p><blockquote class="ls lt lu"><p id="ce1b" class="kw kx lv ky b kz la jr lb lc ld ju le lw lg lh li lx lk ll lm ly lo lp lq lr ij bi translated">如果你喜欢这个教程，你可以在<a class="ae kv" href="https://schadokar.dev" rel="noopener ugc nofollow" target="_blank">我的博客上阅读我的最新教程。</a> <em class="iq">📑</em></p></blockquote><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pa og l"/></div></figure><div class="pb pc gp gr pd pe"><a href="https://gitconnected.com/learn/golang" rel="noopener  ugc nofollow" target="_blank"><div class="pf ab fo"><div class="pg ab ph cl cj pi"><h2 class="bd ir gy z fp pj fr fs pk fu fw ip bi translated">学习围棋-最佳围棋教程(2019) | gitconnected</h2><div class="pl l"><h3 class="bd b gy z fp pj fr fs pk fu fw dk translated">Go是一种静态类型的命令式编译语言。然而，与许多编译编程语言不同，Go是…</h3></div><div class="pm l"><p class="bd b dl z fp pj fr fs pk fu fw dk translated">gitconnected.com</p></div></div><div class="pn l"><div class="po l pp pq pr pn ps kp pe"/></div></div></a></div></div></div>    
</body>
</html>