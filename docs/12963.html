<html>
<head>
<title>Building an IoT Application Using an HTTP API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ä½¿ç”¨HTTP APIæ„å»ºç‰©è”ç½‘åº”ç”¨</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://levelup.gitconnected.com/building-an-iot-application-using-an-http-api-d60d42ac2599?source=collection_archive---------14-----------------------#2022-07-26">https://levelup.gitconnected.com/building-an-iot-application-using-an-http-api-d60d42ac2599?source=collection_archive---------14-----------------------#2022-07-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/84f939b6df355ef5e57b3e3b7b526df6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6crEmES9Ks_wo5ogQfY-dQ.jpeg"/></div></div><figcaption class="jc jd gj gh gi je jf bd b be z dk translated">ç…§ç‰‡ç”±<a class="ae jg" href="https://unsplash.com/@kwan_fvng?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">å…³å³°</a>åœ¨<a class="ae jg" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>ä¸Šæ‹æ‘„</figcaption></figure><h2 id="1fac" class="jh ji jj bd b dl jk jl jm jn jo jp dk jq translated" aria-label="kicker paragraph">å’–å•¡åº—é‡Œçš„ç¼–ç </h2><div class=""/><div class=""><h2 id="0cb7" class="pw-subtitle-paragraph kp js jj bd b kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg dk translated">M5Stackã€çº½çº¦å¸‚MTAå’ŒGraviteeè®¾è®¡å¸ˆ</h2></div><p id="8939" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">å¤šå¹´æ¥ï¼Œä¸–ç•Œä¸Šä¸€ç›´å……æ–¥ç€ç‰©è”ç½‘è®¾å¤‡ã€‚è¿™äº›è®¾å¤‡ä»æ˜¾ç¤ºå½“å‰å¤©æ°”çš„é—¹é’Ÿåˆ°æ˜¾ç¤ºé™„è¿‘é£Ÿå“ä»·æ ¼çš„å†°ç®±ã€‚æ— è®ºå…·ä½“æƒ…å†µå¦‚ä½•ï¼Œè¿™äº›è®¾å¤‡éƒ½ä¾èµ–APIä¸æ•°æ®æºè¿›è¡Œé€šä¿¡ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬ç©¶ç«Ÿå¦‚ä½•è¿æ¥æ¶ˆæ¯ã€æ•°æ®å’Œè®¾å¤‡å‘¢ï¼Ÿ</p><p id="f104" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">åœ¨æœ¬å¸–ä¸­ï¼Œæˆ‘ä»¬å°†å‘æ‚¨å±•ç¤ºå¦‚ä½•ä¸ºç‰©è”ç½‘è®¾å¤‡è®¾è®¡å’Œå»ºæ¨¡æ•°æ®çš„ç¤ºä¾‹ã€‚æˆ‘ä»¬å°†ä½¿ç”¨<a class="ae jg" href="https://m5stack.com" rel="noopener ugc nofollow" target="_blank">M5 stack</a>â€”â€”ä¸€ç§å¸¦æœ‰æ˜¾ç¤ºå±çš„å°å‹æ¨¡å—åŒ–ç‰©è”ç½‘è®¾å¤‡â€”â€”å¹¶è¿æ¥åˆ°çº½çº¦å¸‚å¤§éƒ½ä¼šè¿è¾“ç®¡ç†å±€(MTAçº½çº¦å¸‚)çš„<a class="ae jg" href="https://new.mta.info/developers" rel="noopener ugc nofollow" target="_blank"> APIï¼Œä»¥å‘ˆç°å„ä¸ªè½¦ç«™çš„æœ€æ–°åœ°é“æ—¶é—´ã€‚</a></p><figure class="me mf mg mh gt iv gh gi paragraph-image"><div class="gh gi md"><img src="../Images/62972bba091db35bb18e796bc36dbf27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1290/format:webp/1*4zCm1Wny_HFH5Z8zbMdU0Q.jpeg"/></div></figure><p id="54d2" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">è™½ç„¶æˆ‘ä»¬å°†é‡ç‚¹å…³æ³¨M5Stackï¼Œä½†æˆ‘ä»¬å°†è®¨è®ºçš„æ¦‚å¿µå°†é€‚ç”¨äºè·¨å„ç§è®¾å¤‡è®¾è®¡ç‰©è”ç½‘åº”ç”¨ã€‚</p><p id="f7cd" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">æ‰€ä»¥è®©æˆ‘ä»¬å¼€å§‹å§ï¼</p><h1 id="4a81" class="mi mj jj bd mk ml mm mn mo mp mq mr ms ky mt kz mu lb mv lc mw le mx lf my mz bi translated">å…ˆå†³æ¡ä»¶</h1><p id="4ce0" class="pw-post-body-paragraph lh li jj lj b lk na kt lm ln nb kw lp lq nc ls lt lu nd lw lx ly ne ma mb mc im bi translated">åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†å›´ç»•å¦‚ä½•ä»APIè¯·æ±‚æ•°æ®æ¥å…³æ³¨æ›´å¤§çš„æ¦‚å¿µã€‚<em class="nf">ä¸€äº›</em>ç¼–ç¨‹çŸ¥è¯†ä¼šå¾ˆæœ‰å¸®åŠ©ã€‚è™½ç„¶ä½ ä¸éœ€è¦ä¸€ä¸ªM5Stackï¼Œä½†æ˜¯å¦‚æœä½ <em class="nf">æœ‰ä¸€ä¸ª</em>çš„è¯ï¼Œé‚£ä¹ˆä½ å¯ä»¥è·Ÿç€åšï¼ŒæŠŠå®Œæˆçš„é¡¹ç›®ä¸Šä¼ åˆ°ä½ è‡ªå·±çš„è®¾å¤‡ä¸Šã€‚</p><p id="2aae" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">è®°ä½è¿™ä¸€ç‚¹ï¼Œä½ å¯ä»¥ä¸‹è½½<a class="ae jg" href="https://code.visualstudio.com" rel="noopener ugc nofollow" target="_blank"> VSä»£ç IDE </a>å’Œ<a class="ae jg" href="https://marketplace.visualstudio.com/items?itemName=curdeveryday.vscode-m5stack-mpy" rel="noopener ugc nofollow" target="_blank">M5 stackæ’ä»¶</a>ã€‚å¦‚æœä½ ä»¥å‰ä»æœªå¯åŠ¨è¿‡M5Stackï¼Œ<a class="ae jg" href="https://m5stack.github.io/UIFlow_doc/en/en/base/Setting_WIFI.html" rel="noopener ugc nofollow" target="_blank">æŒ‰ç…§ä»–ä»¬çš„æŒ‡å¯¼</a>æ¥è®¾ç½®WiFiå’Œå¿…è¦çš„å›ºä»¶ã€‚å¯¹äºè¿™ä¸ªé¡¹ç›®ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨<a class="ae jg" href="https://www.python.org/downloads/" rel="noopener ugc nofollow" target="_blank"> Python 3 </a>ï¼Œè¿™æ˜¯M5Stackä½¿ç”¨çš„ä¸»è¦ç¼–ç¨‹è¯­è¨€ã€‚</p><p id="1176" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">ä½ éœ€è¦<a class="ae jg" href="https://api.mta.info/#/landing" rel="noopener ugc nofollow" target="_blank">æ³¨å†Œä¸€ä¸ªçº½çº¦MTAå¼€å‘è€…è´¦æˆ·</a>ï¼Œè·å¾—ä¸€ä¸ªå…è´¹çš„å¼€å‘è€…APIå¯†åŒ™æ¥è®¿é—®ä»–ä»¬çš„å®æ—¶åœ°é“æ•°æ®ã€‚</p><p id="f263" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">æœ€åï¼Œæ‚¨åº”è¯¥æ³¨å†Œä¸€ä¸ªå…è´¹çš„Graviteeå¸æˆ·æ¥ä½¿ç”¨<a class="ae jg" href="https://www.gravitee.io/platform/api-designer?hsLang=en" rel="noopener ugc nofollow" target="_blank"> APIè®¾è®¡å™¨</a>ï¼Œè¿™å°†ä½¿æ‚¨æ›´å®¹æ˜“å¯è§†åŒ–å’Œç†è§£APIè°ƒç”¨ä¸­çš„æ•°æ®æµï¼</p><p id="6870" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">è¿™ä¸ªé¡¹ç›®åŸå§‹èµ„æ–™æ˜¯å—<a class="ae jg" href="https://github.com/neoterix/nyc-mta-arrival-notify" rel="noopener ugc nofollow" target="_blank">è¿™ä¸ªå¼€æºé¡¹ç›®</a>çš„å¯å‘ï¼Œæ‰€ä»¥å¦‚æœæœ‰å¸®åŠ©çš„è¯ï¼Œå°±å¼€å§‹åˆ›å»ºè¿™ä¸ªåº“å§ã€‚</p><h1 id="d0e1" class="mi mj jj bd mk ml mm mn mo mp mq mr ms ky mt kz mu lb mv lc mw le mx lf my mz bi translated">è®¾è®¡APIäº¤äº’</h1><p id="bd4f" class="pw-post-body-paragraph lh li jj lj b lk na kt lm ln nb kw lp lq nc ls lt lu nd lw lx ly ne ma mb mc im bi translated">åœ¨å†™ä¸€è¡Œä»£ç ä¹‹å‰ï¼Œè®©æˆ‘ä»¬åé€€ä¸€æ­¥ï¼Œè€ƒè™‘ä¸€ä¸‹å®Œæˆè¿™ä¸ªé¡¹ç›®éœ€è¦ä»€ä¹ˆæ ·çš„ä¿¡æ¯:</p><ul class=""><li id="51f3" class="ng nh jj lj b lk ll ln lo lq ni lu nj ly nk mc nl nm nn no bi translated">ç›¸å…³åœ°é“ç«™çš„ä¿¡æ¯</li><li id="3788" class="ng nh jj lj b lk np ln nq lq nr lu ns ly nt mc nl nm nn no bi translated">å“ªè¶Ÿåˆ—è½¦ç»è¿‡é‚£äº›è½¦ç«™</li><li id="d208" class="ng nh jj lj b lk np ln nq lq nr lu ns ly nt mc nl nm nn no bi translated">å…³äºé‚£äº›ç«è½¦çš„æœ€æ–°å®æ—¶æ•°æ®</li></ul><p id="73d2" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">æ ¹æ®æ–‡æ¡£ï¼ŒAPIåˆ†ä¸º<a class="ae jg" href="http://web.mta.info/developers/developer-data-terms.html#data" rel="noopener ugc nofollow" target="_blank">é™æ€æ•°æ®é¦ˆé€</a>å’Œ<a class="ae jg" href="https://api.mta.info/#/subwayRealTimeFeeds" rel="noopener ugc nofollow" target="_blank">å®æ—¶æ•°æ®é¦ˆé€</a>ã€‚</p><p id="d092" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">é™æ€æ•°æ®é¦ˆé€ä¿å­˜æœ‰å…³ç”µå°çš„ä¿¡æ¯ã€‚æœ‰äº†è¿™äº›ä¿¡æ¯ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä»å®æ—¶æ•°æ®é¦ˆé€APIè·å¾—å®é™…çš„å®æ—¶è®­ç»ƒæ•°æ®ã€‚MTAæä¾›çš„æ•°æ®é‡‡ç”¨ä»¥ä¸‹CSVæ ¼å¼:</p><pre class="me mf mg mh gt nu nv nw nx aw ny bi"><span id="76ca" class="nz mj jj nv b gy oa ob l oc od">stop_id,stop_code,stop_name,stop_desc,stop_lat,stop_lon,zone_id,stop_url,location_type,parent_station</span></pre><p id="f623" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">å› ä¸ºæˆ‘ä»¬éœ€è¦çš„å”¯ä¸€é™æ€ä¿¡æ¯æ˜¯ç”µå°IDï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç®€å•åœ°é€‰å–ä¸€ä¸ªéšæœºçš„ç”µå°IDï¼Œå¹¶å°†å…¶ç”¨äºå®æ—¶æè¦ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘é€‰æ‹©<a class="ae jg" href="https://en.wikipedia.org/wiki/Hoyt%E2%80%93Schermerhorn_Streets_station" rel="noopener ugc nofollow" target="_blank">Hoytâ€“Schermerhornç«™</a>æ˜¯å› ä¸ºå®ƒç›¸å¯¹å¤æ‚:ä¸¤åˆ—ç‹¬ç«‹çš„ç«è½¦é€šè¿‡å®ƒ(Aå’ŒC)ã€‚è½¦ç«™ä¹Ÿé€šè¿‡å®ƒä»¬æ˜¯åŒ—è¡Œè¿˜æ˜¯å—è¡Œæ¥è¯†åˆ«ã€‚</p><pre class="me mf mg mh gt nu nv nw nx aw ny bi"><span id="f5e4" class="nz mj jj nv b gy oa ob l oc od">A42,,Hoyt-Schermerhorn Sts,,40.688484,-73.985001,,,1,<br/>A42N,,Hoyt-Schermerhorn Sts,,40.688484,-73.985001,,,0,A42<br/>A42S,,Hoyt-Schermerhorn Sts,,40.688484,-73.985001,,,0,A42</span></pre><p id="8457" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">ä»è¿™äº›è¡Œä¸­ï¼Œæˆ‘ä»¬éœ€è¦çš„åªæ˜¯çˆ¶ç«™ç‚¹ID (A42)æ¥æ ‡è¯†é€šè¿‡è¯¥ç«™çš„åˆ—è½¦ï¼ŒåŒ…æ‹¬åŒ—è¡Œ(A42N)å’Œå—è¡Œ(A42S)ã€‚</p><p id="6bd7" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">å®æ—¶ä¿¡æ¯ä»¥è°·æ­Œçš„GTFSæ ¼å¼è¡¨ç¤ºï¼Œè¯¥æ ¼å¼åŸºäºåè®®ç¼“å†²åŒºã€‚è™½ç„¶çº½çº¦MTAæ²¡æœ‰è®°å½•åœ¨æ¡ˆçš„å…·ä½“ä¿¡æ¯æ¥æºï¼Œä½†GTFSå´æœ‰ã€‚ä»GTFSçš„æ–‡æ¡£ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“å¦‚ä½•ä»¥protobufæ ¼å¼è·å¾—æœ€æ–°åˆ—è½¦åˆ°è¾¾ç‰¹å®šè½¦ç«™çš„æ—¶é—´ã€‚</p><p id="306d" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">ä¸‹é¢æ˜¯ä¸€ä¸ªæ¥è‡ªGTFSç«¯ç‚¹çš„å“åº”ç¤ºä¾‹ï¼Œä¸ºäº†ä¾¿äºå¯è§†åŒ–ï¼Œå®ƒè¢«è½¬æ¢æˆäº†JSON:</p><pre class="me mf mg mh gt nu nv nw nx aw ny bi"><span id="1ad0" class="nz mj jj nv b gy oa ob l oc od">{<br/>  "trip":{<br/>     "trip_id":"120700_A..N",<br/>     "start_time":"20:07:00",<br/>     "start_date":"20220531",<br/>     "route_id":"A"<br/>  },<br/>  "stop_time_update":[<br/>     {<br/>        "arrival":{<br/>           "time":1654042672<br/>        },<br/>        "departure":{<br/>           "time":1654042672<br/>        },<br/>        "stop_id":"H06N"<br/>     },</span><span id="e4d3" class="nz mj jj nv b gy oe ob l oc od">//â€¦more stopsâ€¦</span><span id="46f4" class="nz mj jj nv b gy oe ob l oc od">{<br/>        "arrival":{<br/>           "time":1654044957<br/>        },<br/>        "departure":{<br/>           "time":1654044957<br/>        },<br/>        "stop_id":"A42N"<br/>     }<br/>  ]<br/>}</span></pre><p id="eced" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">ç”±äºçº½çº¦å¸‚MTA APIä¼šå‘æ‚¨æä¾›å¤§é‡ä¿¡æ¯ï¼Œå› æ­¤ä½¿ç”¨Gravitee APIè®¾è®¡å™¨å¯¹APIè¿”å›çš„å†…å®¹è¿›è¡Œå»ºæ¨¡ã€ç»˜åˆ¶å’Œå¯è§†åŒ–æ•°æ®ä¼šéå¸¸æœ‰å¸®åŠ©ã€‚è¿™æ˜¯æˆ‘ä»¬çš„APIè®¾è®¡è€…æ€ç»´å¯¼å›¾çš„å¿«ç…§:</p><figure class="me mf mg mh gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi of"><img src="../Images/394b160b056cee24ff9e59d825a94dc5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xYG2lFI4arwXyeDl"/></div></div></figure><p id="898b" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">APIè®¾è®¡å™¨å¸®åŠ©æ‚¨è¯†åˆ«APIçš„æ‰€æœ‰èµ„æº(ç«¯ç‚¹),ä»¥åŠä¸æˆ‘ä»¬çš„èµ„æºç›¸å…³çš„æ•°æ®å±æ€§ã€‚è¿™äº›å±æ€§å°†åŒ…æ‹¬ç«¯ç‚¹éœ€è¦çš„è¾“å…¥å’Œå®ƒæä¾›çš„è¾“å‡ºã€‚</p><p id="9f1d" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">åœ¨æˆ‘ä»¬çš„åœ°å›¾ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªè·¯å¾„ä¸º<code class="fe og oh oi nv b">/gtfs/</code>çš„èµ„æºã€‚æˆ‘ä»¬å¯ä»¥æ ¹æ®éœ€è¦é™„åŠ ä»»æ„å¤šçš„å±æ€§ï¼Œå¹¶ä¸”å¯ä»¥ç”¨æ•°æ®ç±»å‹æ¥æ³¨é‡Šè¿™äº›å±æ€§ã€‚é€šè¿‡æŸ¥çœ‹æˆ‘ä»¬çš„åœ°å›¾ï¼Œæˆ‘ä»¬å¯ä»¥ç»˜åˆ¶ä¸€æ¡ä»ç»ˆç‚¹åˆ°å³ä¸‹è§’æ ‡è¯†çš„åˆ°è¾¾å’Œç¦»å¼€æ—¶é—´çš„ç›´æ¥è·¯å¾„ã€‚</p><p id="0612" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">å› æ­¤ï¼Œä¸ºäº†è¡¨ç¤ºæˆ‘ä»¬éœ€è¦çš„æ•°æ®ï¼Œæˆ‘ä»¬éœ€è¦:</p><ul class=""><li id="a2bf" class="ng nh jj lj b lk ll ln lo lq ni lu nj ly nk mc nl nm nn no bi translated">è¯†åˆ«æˆ‘ä»¬è¦è·å–åˆ—è½¦ä¿¡æ¯çš„è½¦ç«™çš„ID</li><li id="cbd7" class="ng nh jj lj b lk np ln nq lq nr lu ns ly nt mc nl nm nn no bi translated">é’ˆå¯¹æˆ‘ä»¬æ„Ÿå…´è¶£çš„ç«è½¦çº¿è·¯ï¼Œå‘çº½çº¦å¸‚MTAçš„GTFS feedå‘å‡ºHTTPè¯·æ±‚</li><li id="6d62" class="ng nh jj lj b lk np ln nq lq nr lu ns ly nt mc nl nm nn no bi translated">è¿­ä»£ç»“æœï¼Œå°†å“åº”æ•°ç»„ä¸­çš„stop_idä¸æˆ‘ä»¬çš„ç«™idè¿›è¡Œæ¯”è¾ƒ</li><li id="c20a" class="ng nh jj lj b lk np ln nq lq nr lu ns ly nt mc nl nm nn no bi translated">ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®ç‰¹å®šè½¦ç«™å’Œåˆ—è½¦çš„æ—¶é—´ä¿¡æ¯é‡‡å–è¡ŒåŠ¨</li></ul><p id="15b4" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">è¿™ä»£è¡¨äº†å‡ ä¸ªç§»åŠ¨çš„éƒ¨åˆ†ï¼Œä½†å®ƒä¸åº”è¯¥æ˜¯æˆ‘ä»¬ä¸èƒ½å¤„ç†çš„ä»»ä½•äº‹æƒ…ï¼</p><h1 id="9cbd" class="mi mj jj bd mk ml mm mn mo mp mq mr ms ky mt kz mu lb mv lc mw le mx lf my mz bi translated">ç¼–ç å®ƒ</h1><p id="6997" class="pw-post-body-paragraph lh li jj lj b lk na kt lm ln nb kw lp lq nc ls lt lu nd lw lx ly ne ma mb mc im bi translated">åœ¨æˆ‘ä»¬çš„M5Stackä¸Šè¿è¡Œä»»ä½•ä¸œè¥¿ä¹‹å‰ï¼Œè®©æˆ‘ä»¬é¦–å…ˆç¡®ä¿æˆ‘ä»¬çš„ä»£ç åœ¨æœ¬åœ°å·¥ä½œã€‚æˆ‘ä»¬å°†å®‰è£…å‡ ä¸ªPythonåŒ…æ¥ä½¿æˆ‘ä»¬çš„é¡¹ç›®æ›´å®¹æ˜“æ„å»ºã€‚</p><pre class="me mf mg mh gt nu nv nw nx aw ny bi"><span id="8317" class="nz mj jj nv b gy oa ob l oc od">pip3 install - upgrade gtfs-realtime-bindings<br/>pip3 install protobuf3_to_dict<br/>pip3 install requests</span></pre><p id="edc9" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">å‰ä¸¤ä¸ªåŒ…å°†åè®®ç¼“å†²åŒºè½¬æ¢æˆPythonå­—å…¸(æˆ–æ•£åˆ—)ï¼Œè¿™ä½¿å¾—æ•°æ®æ¨¡å‹æ›´å®¹æ˜“ä½¿ç”¨ã€‚æœ€åä¸€ä¸ªåŒ…ä½¿å¾—ä»Pythonå‘å‡ºHTTPè¯·æ±‚å˜å¾—æ›´åŠ å®¹æ˜“ã€‚</p><p id="52d4" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">æˆ‘ä»¬å°†ä»å¯¼å…¥PythonåŒ…å¼€å§‹æˆ‘ä»¬çš„ç¨‹åº:</p><p id="54d5" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">ä»google.transitå¯¼å…¥gtfs_realtime_pb2 <br/>å¯¼å…¥è¯·æ±‚<br/>å¯¼å…¥æ—¶é—´</p><p id="3d09" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†å‘çº½çº¦MTA GTFSæè¦å‘å‡ºHTTPè¯·æ±‚:</p><pre class="me mf mg mh gt nu nv nw nx aw ny bi"><span id="12a4" class="nz mj jj nv b gy oa ob l oc od">api_key = "YOUR_API_KEY"</span><span id="a792" class="nz mj jj nv b gy oe ob l oc od"># Requests subway status data feed from the NYC MTA API<br/>headers = {'x-api-key': api_key}<br/>feed = gtfs_realtime_pb2.FeedMessage()<br/>response = requests.get(<br/>    '<a class="ae jg" href="https://api-endpoint.mta.info/Dataservice/mtagtfsfeeds/nyct%2Fgtfs-ace'" rel="noopener ugc nofollow" target="_blank">https://api-endpoint.mta.info/Dataservice/mtagtfsfeeds/nyct%2Fgtfs-ace'</a>,<br/>    headers=headers)<br/>feed.ParseFromString(response.content)</span></pre><p id="d9df" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä¸€åˆ‡é¡ºåˆ©ã€‚æˆ‘ä»¬åœ¨è¿™é‡Œä½¿ç”¨çš„GTFSç«¯ç‚¹æ˜¯ç”¨äºA/C/Eåˆ—è½¦çš„ç«¯ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡URLä¸Šçš„åç¼€<code class="fe og oh oi nv b">-ace</code>æ¥è¯†åˆ«å®ƒã€‚(é™¤æ­¤ä¹‹å¤–ï¼Œå¯¹äºè¿™ä¸ªdemoï¼Œæˆ‘ä»¬ä¸å…³å¿ƒEç«è½¦â€”â€”å¯¹ä¸èµ·ï¼ŒEç«è½¦ï¼)</p><p id="1421" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">è®©æˆ‘ä»¬å°†GTFSåè®®ç¼“å†²å“åº”è½¬æ¢æˆä¸€ä¸ªå­—å…¸:</p><pre class="me mf mg mh gt nu nv nw nx aw ny bi"><span id="ba32" class="nz mj jj nv b gy oa ob l oc od">from protobuf_to_dict import protobuf_to_dict<br/>subway_feed = protobuf_to_dict(feed)  # converts MTA data feed to a dictionary<br/>realtime_data = subway_feed['entity']</span></pre><p id="e0a2" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">æ­¤æ—¶ï¼Œæˆ‘å¼ºçƒˆå»ºè®®å‘å‡ºprint(realtime_data ),è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ°å®é™…çš„æ•°æ®ç»“æ„æ˜¯ä»€ä¹ˆæ ·å­ã€‚å¦‚æœè¿™æ˜¯ä¸€ä¸ªçœŸå®çš„é¡¹ç›®ï¼Œè¿™æ ·çš„åˆ†æå¯èƒ½ä¼šå¸®åŠ©æ‚¨ç¡®å®šéœ€è¦è¿­ä»£å­—å…¸ä¸­çš„å“ªäº›é”®å’Œå€¼â€”â€”ä½†æ˜¯ç”±äºè¿™æ˜¯ä¸€ä¸ªæ•™ç¨‹ï¼Œæˆ‘ä»¬å·²ç»è®¨è®ºè¿‡äº†ã€‚</p><pre class="me mf mg mh gt nu nv nw nx aw ny bi"><span id="4c9c" class="nz mj jj nv b gy oa ob l oc od">def station_time_lookup(train_data, station):<br/>   for trains in train_data:<br/>       if trains.__contains__('trip_update'):<br/>           unique_train_schedule = trains['trip_update']<br/>           if unique_train_schedule.__contains__('stop_time_update'):<br/>             unique_arrival_times = unique_train_schedule['stop_time_update']<br/>             for scheduled_arrivals in unique_arrival_times:<br/>                 stop_id = scheduled_arrivals.get('stop_id', False)<br/>                 if stop_id == f'{station}N':<br/>                     time_data = scheduled_arrivals['arrival']<br/>                     unique_time = time_data['time']<br/>                     if unique_time != None:<br/>                         northbound_times.append(unique_time)<br/>                 elif stop_id == f'{station}S':<br/>                     time_data = scheduled_arrivals['arrival']<br/>                     unique_time = time_data['time']<br/>                     if unique_time != None:<br/>                         southbound_times.append(unique_time)</span><span id="8bda" class="nz mj jj nv b gy oe ob l oc od"># Keep a global list to collect various train times<br/>northbound_times = []<br/>southbound_times = []</span><span id="7539" class="nz mj jj nv b gy oe ob l oc od"># Run the above function for the station ID for Hoyt-Schermerhorn<br/>station_time_lookup(realtime_data, 'A42')</span></pre><p id="4606" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">çªç„¶æˆ‘ä»¬æœ‰äº†å¾ˆå¤šä»£ç ï¼ä½†æ˜¯ä¸è¦æ‹…å¿ƒâ€”â€”æˆ‘ä»¬æ­£åœ¨åšçš„äº‹æƒ…å¹¶ä¸å¤æ‚:</p><ul class=""><li id="5bbf" class="ng nh jj lj b lk ll ln lo lq ni lu nj ly nk mc nl nm nn no bi translated">æˆ‘ä»¬è¿­ä»£A/Cçº¿çš„åˆ—è½¦ä¿¡æ¯æ•°ç»„ã€‚</li><li id="cbce" class="ng nh jj lj b lk np ln nq lq nr lu ns ly nt mc nl nm nn no bi translated">å¯¹äºæ¯ä¸ªæ•°ç»„æ¡ç›®ï¼Œæˆ‘ä»¬éªŒè¯æˆ‘ä»¬æ‹¥æœ‰æ‰€æœ‰éœ€è¦çš„é”®çš„å€¼ã€‚è¿™æ˜¯é˜²å¾¡æ€§ç¼–ç ï¼Œå› ä¸ºæˆ‘ä»¬ä¸èƒ½100%ç¡®å®šè¿™ä¸ªç¬¬ä¸‰æ–¹æœåŠ¡åœ¨æˆ‘ä»¬éœ€è¦çš„æ—¶å€™æœ‰æˆ‘ä»¬éœ€è¦çš„ä¸œè¥¿ï¼</li><li id="a798" class="ng nh jj lj b lk np ln nq lq nr lu ns ly nt mc nl nm nn no bi translated">ä¹‹åï¼Œæˆ‘ä»¬è¿­ä»£æ‰€æœ‰çš„è½¦ç«™ä¿¡æ¯ï¼Œå¹¶åœ¨åˆ°è¾¾åŒ—å‘å’Œå—å‘åˆ—è½¦éƒ½éœ€è¦çš„çˆ¶ID(<code class="fe og oh oi nv b">A42</code>)æ—¶åœæ­¢ã€‚</li><li id="8a11" class="ng nh jj lj b lk np ln nq lq nr lu ns ly nt mc nl nm nn no bi translated">æœ€åï¼Œæˆ‘ä»¬åœ¨ä¸¤ä¸ªå•ç‹¬çš„å…¨å±€å˜é‡ä¸­ä¿å­˜äº†å³å°†åˆ°æ¥çš„ç«è½¦åˆ°è¾¾æ—¶é—´çš„åˆ—è¡¨ã€‚</li></ul><p id="c17e" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬å±•ç¤ºè¿™äº›ä¿¡æ¯:</p><pre class="me mf mg mh gt nu nv nw nx aw ny bi"><span id="988e" class="nz mj jj nv b gy oa ob l oc od"># Sort collected times in chronological order<br/>northbound_times.sort()<br/>southbound_times.sort()</span><span id="022f" class="nz mj jj nv b gy oe ob l oc od"># Pop off the earliest and second earliest arrival times from the list<br/>nearest_northbound_arrival_time = northbound_times[0]<br/>second_northbound_arrival_time = northbound_times[1]</span><span id="aece" class="nz mj jj nv b gy oe ob l oc od">nearest_southbound_arrival_time = southbound_times[0]<br/>second_southbound_arrival_time = southbound_times[1]</span><span id="55db" class="nz mj jj nv b gy oe ob l oc od">### UI FOR M5STACK SHOULD GO HERE ###</span><span id="46fd" class="nz mj jj nv b gy oe ob l oc od">def print_train_arrivals(<br/>        direction,<br/>        time_until_train,<br/>        nearest_arrival_time,<br/>        second_arrival_time):<br/>    if time_until_train &lt;= 0:<br/>        next_arrival_time = second_arrival_time<br/>    else nearest_arrival_time:<br/>        next_arrival_time_s = time.strftime(<br/>            "%I:%M %p",<br/>            time.localtime(next_arrival_time))<br/>    print(f"The next {direction} train will arrive at {next_arrival_time_s}")</span><span id="bf2e" class="nz mj jj nv b gy oe ob l oc od"># Grab the current time so that you can find out the minutes to arrival<br/>current_time = int(time.time())<br/>time_until_northbound_train = int(<br/>    ((nearest_northbound_arrival_time - current_time) / 60))<br/>time_until_southbound_train = int(<br/>    ((nearest_southbound_arrival_time - current_time) / 60))<br/>current_time_s = time.strftime("%I:%M %p")<br/>print(f"It's currently {current_time_s}")</span><span id="3087" class="nz mj jj nv b gy oe ob l oc od">print_train_arrivals(<br/>    "northbound",<br/>    time_until_northbound_train,<br/>    nearest_northbound_arrival_time,<br/>    second_northbound_arrival_time)<br/>print_train_arrivals(<br/>    "southbound",<br/>    time_until_southbound_train,<br/>    nearest_southbound_arrival_time,<br/>    time_until_southbound_train)</span></pre><p id="483d" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">æˆ‘ä»¬ä¸Šé¢åšçš„å¤§éƒ¨åˆ†æ˜¯æ•°æ®æ ¼å¼åŒ–ã€‚å…³é”®æ­¥éª¤å¦‚ä¸‹:</p><ul class=""><li id="ac78" class="ng nh jj lj b lk ll ln lo lq ni lu nj ly nk mc nl nm nn no bi translated">æˆ‘ä»¬åœ¨è½¦ç«™å¯¹åŒ—ä¸Šå’Œå—ä¸‹åˆ—è½¦çš„åˆ°è¾¾æ—¶é—´è¿›è¡Œæ’åºã€‚</li><li id="c643" class="ng nh jj lj b lk np ln nq lq nr lu ns ly nt mc nl nm nn no bi translated">æˆ‘ä»¬ä¹˜åå‰ä¸¤æ¬¡(åˆ°è¾¾çš„â€œæœ€å¿«â€åˆ—è½¦)ã€‚</li><li id="31fb" class="ng nh jj lj b lk np ln nq lq nr lu ns ly nt mc nl nm nn no bi translated">æˆ‘ä»¬å°†è¿™äº›æ—¶é—´ä¸å½“å‰æ—¶é—´è¿›è¡Œæ¯”è¾ƒï¼Œä»¥è·å¾—ç«è½¦åˆ°è¾¾çš„åˆ†é’Ÿè·ç¦»ã€‚æˆ‘ä»¬å°†è¿™äº›ç«è½¦åˆ°è¾¾æ—¶é—´ä¼ é€’ç»™print_train_arrivalsã€‚</li><li id="9316" class="ng nh jj lj b lk np ln nq lq nr lu ns ly nt mc nl nm nn no bi translated">å¦‚æœä¸‹ä¸€ç­ç«è½¦ä¸åˆ°ä¸€åˆ†é’Ÿå°±è¦åˆ°è¾¾ï¼Œæˆ‘ä»¬ä¼šæ˜¾ç¤ºç¬¬<em class="nf">ç§’</em>åˆ°è¾¾æ—¶é—´â€”â€”ææ€•ä½ èµ¶ä¸ä¸Šé‚£ç­ç«è½¦äº†ï¼å¦åˆ™ï¼Œæˆ‘ä»¬å°†æ˜¾ç¤ºæœ€è¿‘çš„åˆ°è¾¾æ—¶é—´ã€‚</li></ul><p id="582f" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">å¦‚æœæ‚¨åœ¨ç»ˆç«¯ä¸Šè¿è¡Œè¿™ä¸ªè„šæœ¬ï¼Œé‚£ä¹ˆæ‚¨åº”è¯¥ä¼šçœ‹åˆ°ç±»ä¼¼å¦‚ä¸‹çš„æ¶ˆæ¯:</p><pre class="me mf mg mh gt nu nv nw nx aw ny bi"><span id="8581" class="nz mj jj nv b gy oa ob l oc od">It's currently 05:59 PM<br/>The next northbound train will arrive at 06:00 PM<br/>The next southbound train will arrive at 06:02 PM</span></pre><h1 id="282c" class="mi mj jj bd mk ml mm mn mo mp mq mr ms ky mt kz mu lb mv lc mw le mx lf my mz bi translated">éƒ¨ç½²åˆ°M5å †æ ˆ</h1><p id="6c73" class="pw-post-body-paragraph lh li jj lj b lk na kt lm ln nb kw lp lq nc ls lt lu nd lw lx ly ne ma mb mc im bi translated">æ—¢ç„¶æˆ‘ä»¬å·²ç»åœ¨æœ¬åœ°æµ‹è¯•äº†æˆ‘ä»¬çš„Pythonä»£ç å¯ä»¥ä¸çº½çº¦MTA APIé€šä¿¡ï¼Œé‚£ä¹ˆæ˜¯æ—¶å€™è®©è¿™æ®µä»£ç åœ¨æˆ‘ä»¬çš„M5Stackä¸Šè¿è¡Œäº†ã€‚å¯¹M5Stackç¼–ç¨‹æœ€ç®€å•çš„æ–¹æ³•æ˜¯é€šè¿‡å…è´¹çš„UI Flow IDE è¿›è¡Œ<a class="ae jg" href="https://flow.m5stack.com" rel="noopener ugc nofollow" target="_blank">ï¼Œè¿™åªæ˜¯ä¸€ä¸ªé€šè¿‡WiFiä¸æ‚¨çš„è®¾å¤‡è¿›è¡Œé€šä¿¡çš„ç½‘é¡µã€‚æ‚¨å¯ä»¥é€šè¿‡</a><a class="ae jg" href="https://docs.m5stack.com/en/quick_start/core2/uiflow" rel="noopener ugc nofollow" target="_blank">ä»–ä»¬çš„æ–‡æ¡£</a>äº†è§£æœ‰å…³å¦‚ä½•é…ç½®æ‚¨çš„è®¾å¤‡è¿›è¡ŒWiFiè®¿é—®çš„æ›´å¤šä¿¡æ¯ã€‚</p><p id="c1cb" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">è™½ç„¶M5Stackå¯ä»¥é€šè¿‡WYSIWYG UIå…ƒç´ è¿›è¡Œç¼–ç¨‹ï¼Œä½†å®ƒä¹Ÿå¯ä»¥æ¥å—(å¹¶è¿è¡Œ)Pythonä»£ç ã€‚ç„¶è€Œï¼ŒWYSIWYGå…ƒç´ çš„ä¸»è¦ä¼˜ç‚¹æ˜¯å®ƒä½¿å¾—åœ¨å±å¹•ä¸Šç»˜åˆ¶çš„æ–‡æœ¬æ›´åŠ å®¹æ˜“å¯è§†åŒ–:</p><figure class="me mf mg mh gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi oj"><img src="../Images/40a49bcb2a69d2d231e09082bffc06d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ZYmSd7f2NdOjufwU"/></div></div></figure><p id="3e6b" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">åœ¨è¿™ä¸ªGIFä¸­ï¼Œæˆ‘åœ¨ç¤ºä¾‹M5Stackå±å¹•ä¸Šç”¨é»˜è®¤å­—ç¬¦ä¸²â€œTextâ€åˆ›å»ºäº†ä¸€ä¸ªæ ‡ç­¾ã€‚å½“æˆ‘åˆ‡æ¢åˆ°Pythonæ—¶ï¼Œæˆ‘ä»¬çœ‹åˆ°æ ‡ç­¾æ˜¯ä¸€ä¸ªåä¸ºM5TextBoxçš„å¯¹è±¡çš„å®ä¾‹åŒ–ã€‚å½“æ‹–åŠ¨æ ‡ç­¾æ—¶ï¼Œå…¶Xå’ŒYåæ ‡(æ„é€ å‡½æ•°ä¸­çš„å‰ä¸¤ä¸ªå‚æ•°)åœ¨Pythonä¸­ä¼šå‘ç”Ÿå˜åŒ–ã€‚è¿™ä½¿å¾—å¾ˆå®¹æ˜“çœ‹åˆ°ä½ çš„ç¨‹åºå°†å¦‚ä½•æ˜¾ç¤ºã€‚æ‚¨è¿˜å¯ä»¥é€šè¿‡å•å‡»æ ‡ç­¾æœ¬èº«æ¥æ›´æ”¹Pythonä»£ç ä¸­ä½¿ç”¨çš„å˜é‡(ä»¥åŠå…¶ä»–å±æ€§):</p><figure class="me mf mg mh gt iv gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/3e5ec540a09704e754f5698f3d9f5cff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1362/0*bwxmagS2e3Njxoqt"/></div></figure><p id="35e4" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ç¼–å†™çš„Pythonè„šæœ¬å¯ä»¥åœ¨M5Stackä¸Šä½¿ç”¨ï¼Œåªéœ€ç¨åŠ ä¿®æ”¹ã€‚æˆ‘ä»¬å¯ä»¥ä»æœ¬åœ°æœºå™¨å¤åˆ¶Pythonä»£ç ï¼Œå¹¶å°†å…¶ç²˜è´´åˆ°UIæµIDEçš„Pythoné€‰é¡¹å¡ä¸­ã€‚</p><p id="3391" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">åœ¨æˆ‘ä»¬çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬æ‰¾åˆ°äº†<code class="fe og oh oi nv b">### UI FOR M5STACK SHOULD GO HERE ###</code>æ³¨é‡Šå¹¶ç”¨ä¸‹é¢çš„ä»£ç æ›¿æ¢å®ƒä¸‹é¢çš„æ‰€æœ‰å†…å®¹:</p><pre class="me mf mg mh gt nu nv nw nx aw ny bi"><span id="1235" class="nz mj jj nv b gy oa ob l oc od">time_label = M5TextBox(146, 27, "", lcd.FONT_Default, 0xFFFFFF, rotate=0)<br/>northbound_label = M5TextBox(146, 95, "", lcd.FONT_Default, 0xFFFFFF, rotate=0)<br/>southbound_label = M5TextBox(146, 163, "", lcd.FONT_Default, 0xFFFFFF, rotate=0)</span><span id="1399" class="nz mj jj nv b gy oe ob l oc od">def print_train_arrivals(<br/>        direction,<br/>        label,<br/>        time_until_train,<br/>        nearest_arrival_time,<br/>        second_arrival_time):<br/>    if time_until_train &lt;= 0:<br/>        next_arrival_time = second_arrival_time<br/>    else nearest_arrival_time:<br/>        next_arrival_time_s = time.strftime(<br/>            "%I:%M %p",<br/>            time.localtime(next_arrival_time))<br/>    label.setText(f"The next {direction} train will arrive at {next_arrival_time_s}")</span><span id="5f99" class="nz mj jj nv b gy oe ob l oc od">while True:<br/>    # Grab the current time so that you can find out the minutes to arrival<br/>    current_time = int(time.time())<br/>    time_until_northbound_train = int(<br/>        ((nearest_northbound_arrival_time - current_time) / 60))<br/>    time_until_southbound_train = int(<br/>        ((nearest_southbound_arrival_time - current_time) / 60))<br/>    current_time_s = time.strftime("%I:%M %p")<br/>    time_label.setText(f"It's currently {current_time_s}")</span><span id="c252" class="nz mj jj nv b gy oe ob l oc od">print_train_arrivals(<br/>        "northbound",<br/>        northbound_label,<br/>        time_until_northbound_train,<br/>        nearest_northbound_arrival_time,<br/>        second_northbound_arrival_time)<br/>    print_train_arrivals(<br/>        "southbound",<br/>        southbound_label,<br/>        time_until_southbound_train,<br/>        nearest_southbound_arrival_time,<br/>        time_until_southbound_train)<br/>  <br/>    sleep 5</span></pre><p id="570a" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">è¿™å…¶ä¸­çš„å¤§éƒ¨åˆ†åº”è¯¥çœ‹èµ·æ¥å¾ˆç†Ÿæ‚‰ï¼è¦è®©è¿™æ®µä»£ç åœ¨M5Stackä¸Šè¿è¡Œï¼Œæœ‰ä¸¤ä¸ªä¸»è¦çš„ä¿®æ”¹ã€‚</p><p id="e196" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">é¦–å…ˆï¼Œæˆ‘ä»¬åˆ›å»ºäº†æ ‡ç­¾ï¼Œä½œä¸ºæ—¶é—´å’Œè®­ç»ƒæ•°æ®çš„å ä½ç¬¦:</p><ul class=""><li id="844a" class="ng nh jj lj b lk ll ln lo lq ni lu nj ly nk mc nl nm nn no bi translated"><code class="fe og oh oi nv b">time_label</code></li><li id="c6cf" class="ng nh jj lj b lk np ln nq lq nr lu ns ly nt mc nl nm nn no bi translated"><code class="fe og oh oi nv b">northbound_label</code></li><li id="07c5" class="ng nh jj lj b lk np ln nq lq nr lu ns ly nt mc nl nm nn no bi translated"><code class="fe og oh oi nv b">southbound_label</code></li></ul><p id="ae30" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">ç¬¬äºŒï¼Œæˆ‘ä»¬æŠŠæ‰€æœ‰ä¸œè¥¿éƒ½æ”¾åœ¨äº†ä¸€ä¸ª<code class="fe og oh oi nv b">while</code>å¾ªç¯ä¸­ï¼Œè¿™ä¸ªå¾ªç¯å°†è·å–å½“å‰æ—¶é—´å¹¶è®¾ç½®æ ‡ç­¾æ–‡æœ¬ã€‚å¾ªç¯å°†ä¼‘çœ äº”ç§’é’Ÿï¼Œç„¶åé‡æ–°å¼€å§‹è¯¥è¿‡ç¨‹ã€‚</p><p id="54ed" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">å°±æ˜¯è¿™æ ·ï¼å½“æˆ‘ä»¬ç‚¹å‡»<strong class="lj jt"> Run </strong>æŒ‰é’®æ—¶ï¼Œæˆ‘ä»¬åº”è¯¥çœ‹åˆ°æˆ‘ä»¬çš„ç«è½¦å­—ç¬¦ä¸²æ¯äº”ç§’æ›´æ–°ä¸€æ¬¡æœ€æ–°çš„è·¯çº¿æ•°æ®ã€‚</p><h1 id="fb40" class="mi mj jj bd mk ml mm mn mo mp mq mr ms ky mt kz mu lb mv lc mw le mx lf my mz bi translated">ç»“è®º</h1><p id="dd4d" class="pw-post-body-paragraph lh li jj lj b lk na kt lm ln nb kw lp lq nc ls lt lu nd lw lx ly ne ma mb mc im bi translated">å°±æ˜¯è¿™æ ·ï¼çˆ±å¥½è€…ç»å¸¸ä½¿ç”¨ç‰©è”ç½‘è®¾å¤‡ï¼Œä½†å¦‚æœä½ ç»§ç»­ä»äº‹è¿™ä¸ªé¡¹ç›®ï¼Œæœ‰å‡ ä¸ªç°å®ä¸–ç•Œçš„è€ƒè™‘å› ç´ ã€‚ä¸€ä¸ªè€ƒè™‘æ˜¯é€Ÿç‡é™åˆ¶ï¼Œç¡®ä¿æ‚¨ä»MTA APIä»¥æœ‰æ•ˆçš„æ–¹å¼è¯·æ±‚æ•°æ®ã€‚å¦ä¸€ä¸ªè€ƒè™‘æ˜¯è¿æ¥æ€§ã€‚å¦‚æœæ‚¨çš„è®¾å¤‡æš‚æ—¶å¤±å»WiFiè®¿é—®ï¼Œå®ƒå°†å¦‚ä½•é‡æ–°å»ºç«‹è¿æ¥ä»¥è·å–æ‰€éœ€çš„ä¿¡æ¯ï¼Ÿ</p><p id="cbca" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">ä¸€æ—¦æ‚¨å¼€å§‹è€ƒè™‘è¿™äº›ç”Ÿäº§çº§çš„é—®é¢˜ï¼Œæˆ–è€…å¦‚æœæ‚¨æƒ³è¦è·¨å¤šä¸ªè®¾å¤‡æ‰©å±•æ‚¨çš„é¡¹ç›®ï¼Œæ‚¨è¿˜éœ€è¦è€ƒè™‘APIç®¡ç†ã€‚æˆ‘åœ¨æœ¬æ–‡å‰é¢æåˆ°è¿‡Gravitee Designerï¼Œå®ƒåœ¨è®¾è®¡é˜¶æ®µéå¸¸æœ‰ç”¨ã€‚Graviteeæ‹¥æœ‰å…¶ä»–APIç®¡ç†å·¥å…·ï¼Œå¦‚APIç½‘å…³ã€ç›‘æ§å’Œå®æ—¶åˆ†æã€éƒ¨ç½²ã€‚</p><p id="7eff" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">å¯¹äºä¹ æƒ¯äºä¸ºä¼ ç»ŸæœåŠ¡å™¨å’Œwebæµè§ˆå™¨ç¼–å†™ä»£ç çš„å¼€å‘äººå‘˜æ¥è¯´ï¼Œç‰©è”ç½‘åº”ç”¨å¼€å‘ä¼¼ä¹ä»¤äººæœ›è€Œç”Ÿç•ã€‚ç„¶è€Œï¼Œå‘ç‰©è”ç½‘è®¾å¤‡çš„é£è·ƒå®é™…ä¸Šç›¸å½“å°ã€‚ä»Šå¤©çš„è®¾å¤‡ï¼Œå‡­å€Ÿå…¶å¯¹æµè¡Œè¯­è¨€å’Œæ¡†æ¶çš„å†…ç½®æ”¯æŒï¼Œä½¿ç‰©è”ç½‘æˆä¸ºæ„å»ºæˆ–é›†æˆAPIå’Œåº”ç”¨ç¨‹åºçš„æœ‰è¶£å’Œåˆ›æ–°çš„æ–¹å¼ã€‚</p></div><div class="ab cl ol om hx on" role="separator"><span class="oo bw bk op oq or"/><span class="oo bw bk op oq or"/><span class="oo bw bk op oq"/></div><div class="im in io ip iq"><h1 id="b7dc" class="mi mj jj bd mk ml os mn mo mp ot mr ms ky ou kz mu lb ov lc mw le ow lf my mz bi translated">åˆ†çº§ç¼–ç </h1><p id="1939" class="pw-post-body-paragraph lh li jj lj b lk na kt lm ln nb kw lp lq nc ls lt lu nd lw lx ly ne ma mb mc im bi translated">æ„Ÿè°¢æ‚¨æˆä¸ºæˆ‘ä»¬ç¤¾åŒºçš„ä¸€å‘˜ï¼åœ¨ä½ ç¦»å¼€ä¹‹å‰:</p><ul class=""><li id="933c" class="ng nh jj lj b lk ll ln lo lq ni lu nj ly nk mc nl nm nn no bi translated">ğŸ‘ä¸ºæ•…äº‹é¼“æŒï¼Œè·Ÿç€ä½œè€…èµ°ğŸ‘‰</li><li id="a247" class="ng nh jj lj b lk np ln nq lq nr lu ns ly nt mc nl nm nn no bi translated">ğŸ“°æŸ¥çœ‹<a class="ae jg" href="https://levelup.gitconnected.com/?utm_source=pub&amp;utm_medium=post" rel="noopener ugc nofollow" target="_blank">å‡çº§ç¼–ç å‡ºç‰ˆç‰©</a>ä¸­çš„æ›´å¤šå†…å®¹</li><li id="a31a" class="ng nh jj lj b lk np ln nq lq nr lu ns ly nt mc nl nm nn no bi translated">ğŸ””å…³æ³¨æˆ‘ä»¬:<a class="ae jg" href="https://twitter.com/gitconnected" rel="noopener ugc nofollow" target="_blank">Twitter</a>|<a class="ae jg" href="https://www.linkedin.com/company/gitconnected" rel="noopener ugc nofollow" target="_blank">LinkedIn</a>|<a class="ae jg" href="https://newsletter.levelup.dev" rel="noopener ugc nofollow" target="_blank">æ—¶äº‹é€šè®¯</a></li></ul><p id="db44" class="pw-post-body-paragraph lh li jj lj b lk ll kt lm ln lo kw lp lq lr ls lt lu lv lw lx ly lz ma mb mc im bi translated">ğŸš€ğŸ‘‰<a class="ae jg" href="https://jobs.levelup.dev/jobs?utm_source=pub&amp;utm_medium=post" rel="noopener ugc nofollow" target="_blank"> <strong class="lj jt">è½¯ä»¶å·¥ç¨‹å¸ˆçš„çƒ­é—¨èŒä½</strong> </a></p></div></div>    
</body>
</html>