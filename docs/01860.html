<html>
<head>
<title>VSCode Remote Development with Digital Ocean</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">基于数字海洋的VSCode远程开发</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/vscode-remote-development-with-digital-ocean-a875cab79f25?source=collection_archive---------8-----------------------#2020-02-03">https://levelup.gitconnected.com/vscode-remote-development-with-digital-ocean-a875cab79f25?source=collection_archive---------8-----------------------#2020-02-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/556e7603d01258ef47331ea08f0096e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZPDH5RVgqn5RpN91T4ATdQ.jpeg"/></div></div></figure><p id="f98f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">什么是远程开发，为什么它越来越受开发人员的欢迎？</p><p id="cb22" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果你和我一样，讨厌新Macbooks自带的触摸条(物理退出键被低估)，并且你使用的是旧型号，有时在本地进行开发会把你的电脑变成一个由喷气发动机驱动的空间加热器。这不是一个有趣的体验，而且可能对你的电脑也不好。</p><p id="e783" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">或者也许你像我一样，你有一台Windows机器，你想用它来进行开发，但你真的不想让所有东西都与Windows兼容，因为你阅读的每个教程都是为*nix (Linux，Mac)编写的。</p><p id="df26" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">进入远程开发——在云中的机器上进行开发，这样您在本地做的唯一事情就是运行文本编辑器和bash。即使是最古老的计算机也应该能够毫不费力地做到这一点。</p><p id="9710" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在远程机器上开发有很多优点和缺点，但是为了简洁起见，这里以列表的形式列出了一些:</p><p id="6142" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">远程开发的优点:</p><ul class=""><li id="f7c2" class="la lb it kd b ke kf ki kj km lc kq ld ku le ky lf lg lh li bi translated">从任何计算机重新连接到同一工作空间</li><li id="a210" class="la lb it kd b ke lj ki lk km ll kq lm ku ln ky lf lg lh li bi translated">机器的资源仅用于满足您的开发需求</li><li id="13e1" class="la lb it kd b ke lj ki lk km ll kq lm ku ln ky lf lg lh li bi translated">你的电脑粉丝不会为了处理你的代码/服务器/模拟/等等而过度兴奋</li><li id="4098" class="la lb it kd b ke lj ki lk km ll kq lm ku ln ky lf lg lh li bi translated">机器始终处于运行状态(无论本地计算机的状态如何，您运行的任何服务仍在运行)</li><li id="25d6" class="la lb it kd b ke lj ki lk km ll kq lm ku ln ky lf lg lh li bi translated">轻松拆卸或安装新机器</li><li id="7ca1" class="la lb it kd b ke lj ki lk km ll kq lm ku ln ky lf lg lh li bi translated">您的服务通常在互联网上托管/公开</li></ul><p id="b1a3" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">远程开发的缺点:</p><ul class=""><li id="2df5" class="la lb it kd b ke kf ki kj km lc kq ld ku le ky lf lg lh li bi translated">需要稳定的互联网连接</li><li id="beff" class="la lb it kd b ke lj ki lk km ll kq lm ku ln ky lf lg lh li bi translated">这(通常)要花钱</li><li id="88f1" class="la lb it kd b ke lj ki lk km ll kq lm ku ln ky lf lg lh li bi translated">与底层机器的交互需要命令行知识(如果您习惯使用bash，这可能是专业的)</li><li id="ec05" class="la lb it kd b ke lj ki lk km ll kq lm ku ln ky lf lg lh li bi translated">您的服务通常在互联网上托管/公开</li></ul></div><div class="ab cl lo lp hx lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="im in io ip iq"><h1 id="d753" class="lv lw it bd lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms bi translated">设置</h1><p id="d28c" class="pw-post-body-paragraph kb kc it kd b ke mt kg kh ki mu kk kl km mv ko kp kq mw ks kt ku mx kw kx ky im bi translated">开始之前，您应该:</p><ul class=""><li id="2d68" class="la lb it kd b ke kf ki kj km lc kq ld ku le ky lf lg lh li bi translated">创建一个数字海洋账户(在<a class="ae my" href="https://m.do.co/c/e03008829614" rel="noopener ugc nofollow" target="_blank">注册此链接</a>，在60天内获得100美元的信用点数)</li><li id="a748" class="la lb it kd b ke lj ki lk km ll kq lm ku ln ky lf lg lh li bi translated">下载并安装<a class="ae my" href="https://code.visualstudio.com/insiders/" rel="noopener ugc nofollow" target="_blank"> VSCode Insiders </a>，它允许你测试更新的特性。与稳定版本不冲突。</li></ul></div><div class="ab cl lo lp hx lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="im in io ip iq"><h1 id="09b9" class="lv lw it bd lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms bi translated">设置数字海洋水滴</h1><p id="ef48" class="pw-post-body-paragraph kb kc it kd b ke mt kg kh ki mu kk kl km mv ko kp kq mw ks kt ku mx kw kx ky im bi translated">通过创建一个数字海洋水滴，我们正在租用在线服务器空间，这将产生一些费用。在撰写本文时，最便宜的droplet配备了1GB RAM、1个CPU、25GB磁盘空间(SSD)，每月费用为5美元。Droplet的费用是根据你拥有它的时间长短按比例分配的，所以如果你启动这个droplet并在一周后删除它，它只会花费你一美元和零钱。只要知道液滴即使不被使用也会产生费用——如果你不想为一滴而被收费，你必须销毁它。</p><p id="2b14" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在我们创建droplet之前，我们需要一个SSH密钥。如果你已经有了一个可以用于这个目的的键，跳到“创建水滴”</p><h2 id="5b9f" class="mz lw it bd lx na nb dn mb nc nd dp mf km ne nf mj kq ng nh mn ku ni nj mr nk bi translated">生成新的SSH密钥</h2><p id="5135" class="pw-post-body-paragraph kb kc it kd b ke mt kg kh ki mu kk kl km mv ko kp kq mw ks kt ku mx kw kx ky im bi translated">您将需要一个SSH密钥来使用VSCode Insiders进行远程开发，这是从整体上访问您的远程机器的推荐方法。Digital ocean有一些关于生成SSH密钥的好文档，网上甚至有更多的资源，但是TL；博士是:</p><ol class=""><li id="26d5" class="la lb it kd b ke kf ki kj km lc kq ld ku le ky nl lg lh li bi translated">打开你的外壳:终端(Mac)或类似Windows的<a class="ae my" href="https://cmder.net/" rel="noopener ugc nofollow" target="_blank"> Cmdr </a></li><li id="c95a" class="la lb it kd b ke lj ki lk km ll kq lm ku ln ky nl lg lh li bi translated">输入<code class="fe nm nn no np b">ssh-keygen -t rsa</code></li><li id="c241" class="la lb it kd b ke lj ki lk km ll kq lm ku ln ky nl lg lh li bi translated">按enter键使用默认的文件路径，或者选择一个新的路径(如果您不熟悉这个，建议使用默认路径)</li><li id="89da" class="la lb it kd b ke lj ki lk km ll kq lm ku ln ky nl lg lh li bi translated">输入密码短语(两次)</li></ol><figure class="nr ns nt nu gt ju gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/54d133f0cb79a8d18844a32b6edcfb00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1176/format:webp/1*8IIUIScbhVPYjCNuT5Bu_Q.png"/></div></figure><p id="5255" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">就这样，你得到了两个新文件，可能叫做<code class="fe nm nn no np b">id_rsa</code>和<code class="fe nm nn no np b">id_rsa.pub</code>。前者是您的私钥—不要与任何人共享该文件的内容。如果您需要复习一下公钥加密是如何工作的，<a class="ae my" href="https://www.cloudflare.com/learning/ssl/how-does-public-key-encryption-work/" rel="noopener ugc nofollow" target="_blank">这里有一篇简短的Cloudflare文章</a>。</p><h2 id="fa99" class="mz lw it bd lx na nb dn mb nc nd dp mf km ne nf mj kq ng nh mn ku ni nj mr nk bi translated">创建液滴</h2><p id="103b" class="pw-post-body-paragraph kb kc it kd b ke mt kg kh ki mu kk kl km mv ko kp kq mw ks kt ku mx kw kx ky im bi translated">首先，在你的数字海洋仪表盘上，点击“创建”-&gt;“水滴”或者直接点击“创建水滴”。</p><p id="8cd4" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">确保选择Ubuntu v18，选择首选的大小和价格(如果您只是尝试一下，我们建议您选择最小类型的Droplet)，并选择离您最近的数据中心区域。</p><figure class="nr ns nt nu gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nv"><img src="../Images/a74925319aa93e110c68a2f694a60561.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UvXGMoP8AbF_Wb4VHyjKsA.png"/></div></div></figure><p id="4f05" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在Authentication下，点击“New SSH Key”，粘贴你的公钥(你的<code class="fe nm nn no np b">id_rsa.pub</code>文件的内容)，给它一个名字，点击“Add SSH Key”。数字海洋会验证密钥，所以如果你忘记复制一个字符或什么的，它会让你知道。</p><p id="0f1a" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在主机名下，为droplet命名。最好是简单的。为了这篇文章的目的，我将命名我的<code class="fe nm nn no np b">demo</code>。</p><p id="ca43" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">就是这样！点击“创建液滴”按钮，让魔法展开。</p></div><div class="ab cl lo lp hx lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="im in io ip iq"><h1 id="d1d9" class="lv lw it bd lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms bi translated">第一次连接到水滴</h1><p id="aa4a" class="pw-post-body-paragraph kb kc it kd b ke mt kg kh ki mu kk kl km mv ko kp kq mw ks kt ku mx kw kx ky im bi translated">获取droplet的IP地址，并在您的shell中运行以下命令(不带尖括号):</p><pre class="nr ns nt nu gt nw np nx ny aw nz bi"><span id="73ed" class="mz lw it np b gy oa ob l oc od">ssh root@&lt;droplet's IP address&gt;</span></pre><p id="776b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">你会得到一些关于你的计算机不确定主机是否是它应该是谁的信息。这将发生在你第一次连接任何东西的任何时候。在这里说“是”，然后输入您的密码短语(如果您设置了密码短语的话)。</p><figure class="nr ns nt nu gt ju gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/ef77145006f0bea83231d66f9b2b259d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1314/format:webp/1*3AnZr3twLPb_gULX8tSKGA.png"/></div></figure><p id="f6cc" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们可能不应该以root用户的身份做任何事情，所以让我们为将来的ssh登录创建一个新用户:</p><h2 id="d96d" class="mz lw it bd lx na nb dn mb nc nd dp mf km ne nf mj kq ng nh mn ku ni nj mr nk bi translated">创建新用户</h2><ol class=""><li id="ca67" class="la lb it kd b ke mt ki mu km of kq og ku oh ky nl lg lh li bi translated">通过运行<code class="fe nm nn no np b">sudo adduser &lt;username&gt;</code>创建新用户，例如<code class="fe nm nn no np b">sudo adduser timmy</code>创建一个名为<code class="fe nm nn no np b">timmy</code>的用户</li><li id="91b6" class="la lb it kd b ke lj ki lk km ll kq lm ku ln ky nl lg lh li bi translated">浏览创建用户的流程</li><li id="7b2a" class="la lb it kd b ke lj ki lk km ll kq lm ku ln ky nl lg lh li bi translated">键入<code class="fe nm nn no np b">exit</code>返回到您的本地机器</li></ol><h2 id="cd2d" class="mz lw it bd lx na nb dn mb nc nd dp mf km ne nf mj kq ng nh mn ku ni nj mr nk bi translated">为新用户创建SSH密钥</h2><ol class=""><li id="ed2a" class="la lb it kd b ke mt ki mu km of kq og ku oh ky nl lg lh li bi translated">运行<code class="fe nm nn no np b">mv id_rsa id_rsa_root;mv id_rsa.pub id_rsa_root.pub</code>重命名之前生成的密钥</li><li id="179e" class="la lb it kd b ke lj ki lk km ll kq lm ku ln ky nl lg lh li bi translated">在您的本地机器上，运行<code class="fe nm nn no np b">ssh-keygen -t rsa</code>并完成动作。除非你真的关心你的droplet的安全，否则你不需要在这个上面设置密码</li><li id="167b" class="la lb it kd b ke lj ki lk km ll kq lm ku ln ky nl lg lh li bi translated">在您制作密钥的文件夹中(通常是用户主文件夹中的目录<code class="fe nm nn no np b">.ssh</code>，编辑<code class="fe nm nn no np b">config</code>文件，或者创建一个不存在的文件。该文件没有扩展名。</li><li id="8d9a" class="la lb it kd b ke lj ki lk km ll kq lm ku ln ky nl lg lh li bi translated">粘贴以下内容(不带<code class="fe nm nn no np b">&lt;&gt;</code> s，<code class="fe nm nn no np b">username</code>是您在远程机器上创建的用户名):</li></ol><pre class="nr ns nt nu gt nw np nx ny aw nz bi"><span id="b145" class="mz lw it np b gy oa ob l oc od">Host droplet<br/>    HostName &lt;ip address&gt;<br/>    User root<br/>    IdentityFile ~/.ssh/id_rsa_root<br/>Host droplet<br/>    HostName &lt;ip address&gt;<br/>    User &lt;username&gt;<br/>    IdentityFile ~/.ssh/id_rsa</span></pre><p id="535e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这将允许您使用<code class="fe nm nn no np b">droplet</code>代替IP地址。在您的shell中，只需使用<code class="fe nm nn no np b">ssh root@droplet</code>以root用户身份登录。</p><p id="c4fc" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果您尝试过，您可能会注意到运行<code class="fe nm nn no np b">ssh username@droplet</code>不起作用。这是因为新用户没有任何被列为授权的SSH密钥。</p><p id="9ecf" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">要解决这个问题，请在您的远程计算机上运行以下命令:</p><pre class="nr ns nt nu gt nw np nx ny aw nz bi"><span id="644d" class="mz lw it np b gy oa ob l oc od">cd /home/&lt;username&gt;<br/>mkdir .ssh<br/>touch .ssh/authorized_keys</span></pre><p id="3093" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在是棘手的部分。如果您愿意使用vim或emacs将您的公钥粘贴到<code class="fe nm nn no np b">authorized_keys</code>中，那么就这样做。否则，您可以在没有任何终端编辑器的情况下这样做:</p><p id="44f9" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">仍然在您的新用户的远程机器<code class="fe nm nn no np b">.ssh</code>目录中，键入以下内容:<code class="fe nm nn no np b">cat &gt;&gt; authorized_keys &lt;&lt; EOF</code>并按回车键。</p><p id="805f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">粘贴您的公钥。</p><p id="fe35" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">键入<code class="fe nm nn no np b">EOF</code>并按回车键。</p><p id="5bc1" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">作为健全性检查，键入<code class="fe nm nn no np b">cat authorized_keys</code>并按enter，您应该看到您的公钥被打印到终端上。</p><figure class="nr ns nt nu gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi oi"><img src="../Images/76f134f49bb9795923343f656511d532.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FJwrSynaf8YTwGXIaWmaQA.png"/></div></div></figure><p id="fd8d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">您现在可以通过<code class="fe nm nn no np b">ssh &lt;username&gt;@droplet</code>以您的用户身份登录<code class="fe nm nn no np b">exit</code>！</p></div><div class="ab cl lo lp hx lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="im in io ip iq"><h1 id="351e" class="lv lw it bd lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms bi translated">设置VSCode远程开发</h1><p id="0b09" class="pw-post-body-paragraph kb kc it kd b ke mt kg kh ki mu kk kl km mv ko kp kq mw ks kt ku mx kw kx ky im bi translated">现在是有趣的部分——发布VSCode Insiders。</p><p id="4735" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">应该已经安装了“Remote — SSH”扩展。如果没有，请在扩展选项卡中安装它。</p><p id="ee5b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">按Ctrl+Shift+P (Windows)或Cmd+Shift+P (Mac)调出编辑器命令面板，找到/选择“Remote — SSH: Connect to Host”。</p><p id="c345" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">输入<code class="fe nm nn no np b">&lt;username&gt;@droplet</code>并按回车键。</p><figure class="nr ns nt nu gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi oj"><img src="../Images/2ea9b0fb078231cfa0c79e21daa83738.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*46lgBE1AHl9YY8i0w7J1ig.png"/></div></div></figure><p id="c034" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">应该会出现一个新窗口，左下角显示绿色的“SSH: droplet”。</p><p id="548d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">就是这样！您的VSCode现在可以打开/编辑远程机器上的文件了！再次打开编辑器命令调板，找到“终端:创建新的集成终端”在编辑器中打开一个终端。</p></div><div class="ab cl lo lp hx lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="im in io ip iq"><p id="1190" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">请随时留下您的任何反馈或问题！</p><p id="9b6d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><em class="kz">别担心，为创建本教程而生成的任何键或液滴都将不复存在。</em></p></div></div>    
</body>
</html>