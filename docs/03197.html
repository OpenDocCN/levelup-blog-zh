<html>
<head>
<title>JavaScript Code Styles Issues to Look Out For</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">需要注意的JavaScript代码风格问题</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/javascript-code-styles-issues-to-look-out-for-64c97bc0feb6?source=collection_archive---------15-----------------------#2020-04-24">https://levelup.gitconnected.com/javascript-code-styles-issues-to-look-out-for-64c97bc0feb6?source=collection_archive---------15-----------------------#2020-04-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/7d04bc4d1e7093d8e9414fdcd73234f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*wpvKnuKysxjiZN17"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">由<a class="ae kf" href="https://unsplash.com/@dipankargogoi55?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">迪潘卡尔·戈戈伊</a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="a439" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">JavaScript是一种非常宽容的语言。编写可以运行但有错误的代码很容易。</p><p id="835c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本文中，我们将关注一些JavaScript代码风格的问题，以便代码易于阅读和理解。</p><h1 id="bf26" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">花括号</h1><p id="32b1" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">有时候，我们可以在JavaScript中定义一个没有花括号的块。例如，只有一行的<code class="fe mh mi mj mk b">if</code>块可以不用花括号来写。例如，如果我们有:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="5b26" class="mt lf it mk b gy mu mv l mw mx">let foo = true;<br/>let bar = 1;<br/>if (foo) <br/>  bar = 2;</span></pre><p id="cac4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">那么<code class="fe mh mi mj mk b">bar</code>将被赋值为2，因为<code class="fe mh mi mj mk b">foo</code>是<code class="fe mh mi mj mk b">true</code>并且<code class="fe mh mi mj mk b">bar = 2</code>被认为是<code class="fe mh mi mj mk b">if</code>块的一部分。</p><p id="1e1c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然而，如果我们有:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="b426" class="mt lf it mk b gy mu mv l mw mx">let foo = false;<br/>let bar = 1;<br/>let baz;<br/>if (foo)<br/>  bar = 2;<br/>  baz = 3;</span></pre><p id="d4c2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们得到<code class="fe mh mi mj mk b">bar</code>是1，但是<code class="fe mh mi mj mk b">baz</code>是3。这是因为<code class="fe mh mi mj mk b">baz = 3</code>不是<code class="fe mh mi mj mk b">if</code>块的一部分，但它看起来像是。</p><p id="874a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了避免这种歧义，我们应该总是用花括号将<code class="fe mh mi mj mk b">if</code>块括起来，以消除任何可能的歧义。</p><p id="218d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因此，我们应该写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="a65f" class="mt lf it mk b gy mu mv l mw mx">let foo = true;<br/>let bar = 1;<br/>if (foo) {<br/>  bar = 2;<br/>}</span></pre><p id="5ff2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">并且:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="6fa6" class="mt lf it mk b gy mu mv l mw mx">let foo = false;<br/>let bar = 1;<br/>let baz;<br/>if (foo){<br/>  bar = 2;<br/>  baz = 3;<br/>}</span></pre><h1 id="eeb7" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">Switch语句中的默认情况</h1><p id="a41f" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">JavaScript <code class="fe mh mi mj mk b">switch</code>语句不需要默认的大小写。然而，我们有时希望包含ut，以便不管设置了什么值，它都返回一些东西。</p><p id="43fd" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可能想给<code class="fe mh mi mj mk b">switch</code>语句添加一个<code class="fe mh mi mj mk b">default</code>块，以避免返回<code class="fe mh mi mj mk b">undefined</code>，如下所示:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="a6b9" class="mt lf it mk b gy mu mv l mw mx">const foo = (a) =&gt; {<br/>  switch (a) {<br/>    case 1:<br/>      return 'one';<br/>    default:<br/>      return 'bar';<br/>  }<br/>}</span></pre><p id="7b9d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这样，我们就不必检查<code class="fe mh mi mj mk b">foo</code>是否返回了<code class="fe mh mi mj mk b">undefined</code>。我们知道它总是会返回一些东西。</p><h1 id="364a" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">默认参数应该是最后一个</h1><p id="1323" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">默认参数最好放在最后，这样函数调用可以跳过尾部参数。可选参数只能在没有默认值的所有参数之后省略。</p><p id="1fd4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因此，与其写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="4ec1" class="mt lf it mk b gy mu mv l mw mx">const foo = (b = 1, a) =&gt; {}<br/>foo(undefined, 0);</span></pre><p id="053c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们应该写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="3833" class="mt lf it mk b gy mu mv l mw mx">const foo = (a, b = 1) =&gt; {}<br/>foo(0);</span></pre><p id="8a75" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因此，除了必需的参数之外，我们不必为带有默认值的参数传递参数。</p><h1 id="ab73" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">放置点和换行符的一致性</h1><p id="3091" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">JavaScript允许我们在任何地方放置点和换行符。保持一致性使我们的代码更具可读性。例如，如果我们想写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="3d5d" class="mt lf it mk b gy mu mv l mw mx">const a = foo.<br/>  bar;</span></pre><p id="c1c8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们总是用行尾的<code class="fe mh mi mj mk b">.</code>来写代码。</p><p id="b408" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们也可以选择将<code class="fe mh mi mj mk b">.</code>写在该行之前:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="4dc5" class="mt lf it mk b gy mu mv l mw mx">const a = foo<br/>  .bar;</span></pre><p id="f453" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">此外，我们可以将代码与其他内容放在一行:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="dc28" class="mt lf it mk b gy mu mv l mw mx">const a = foo.bar;</span></pre><p id="162c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">位置的一致性使代码更具可读性。</p><figure class="ml mm mn mo gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi my"><img src="../Images/0b959258809442784811df97d644d067.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*r0Nbz6yNyZ463mwH"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">约翰·邓肯在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><h1 id="8023" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">尽可能使用点符号</h1><p id="b394" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">点符号是访问对象属性最常用的语法。如果属性名是有效的标识符，则可以使用它。每当我们试图访问静态属性时，都可以使用点语法。</p><p id="c91e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果我们的JavaScript代码需要动态访问对象属性，如果对象属性不是一个有效的标识符，或者如果标识符是一个符号，那么我们必须使用括号符号。</p><p id="918c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">理想情况下，我们用点符号而不是括号符号来访问大多数属性，这样JavaScript bundlers和minify化代码会更积极。它也更容易阅读，更少罗嗦。</p><p id="0a18" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，这是我们大多数时候想要的:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="36f7" class="mt lf it mk b gy mu mv l mw mx">let x = foo.bar;</span></pre><p id="8053" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">比:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="b94c" class="mt lf it mk b gy mu mv l mw mx">let x = foo['bar'];</span></pre><p id="88cc" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">但是，如果我们的对象属性名被赋给一个变量，那么我们别无选择，只能使用括号符号:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="664c" class="mt lf it mk b gy mu mv l mw mx">let bar = 'bar';<br/>let x = foo[bar];</span></pre><p id="afb0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">或者:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="e6e6" class="mt lf it mk b gy mu mv l mw mx">let foo = {};<br/>let bar = Symbol('bar');<br/>let x = foo[bar];</span></pre><h1 id="d6cb" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">结论</h1><p id="09c1" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">花括号对于消除代码中的任何歧义非常重要。例如，单行的<code class="fe mh mi mj mk b">if</code>块应该用花括号括起来以避免歧义。有了它们，我们就不用猜周围的线是不是<code class="fe mh mi mj mk b">if</code>块的一部分了。</p><p id="1759" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">理想情况下，默认情况应该在<code class="fe mh mi mj mk b">switch</code>语句中，这样我们就可以假设它总是返回一些东西。</p><p id="ab57" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">将默认参数放在最后更好，因为如果它们在最后，我们可以在调用带有默认参数的函数时跳过它们。</p><p id="8424" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">点的位置应该是一致的，这样代码更容易阅读。此外，应该尽可能多地使用点符号，以便更积极地缩小代码，使代码更短，更容易阅读。</p></div></div>    
</body>
</html>