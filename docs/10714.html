<html>
<head>
<title>100x Faster Data Processing in Javascript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Javascript中的数据处理速度提高100倍</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/100x-faster-data-processing-in-javascript-923215f34c00?source=collection_archive---------1-----------------------#2022-01-04">https://levelup.gitconnected.com/100x-faster-data-processing-in-javascript-923215f34c00?source=collection_archive---------1-----------------------#2022-01-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="1ea1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi kl translated">ode.js有一个非常广泛的生态系统，几乎所有东西都有它的工具。然而，与其他语言相比，数据处理工具&amp;框架总是有点暗淡。像Apache Spark和Pandas这样的框架为处理复杂的数据转换提供了优秀的接口。出于这样或那样的原因，JS生态系统中总是缺少这种框架。</p><p id="0fac" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在Javascript &amp; Node中，从来没有一个成熟的库有类似的功能。</p><p id="2730" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> <em class="ku">到现在… </em> </strong></p><blockquote class="kv"><p id="c531" class="kw kx iq bd ky kz la lb lc ld le kk dk translated">为了填补节点生态系统中的这一空白，Polars扩展了其官方支持的语言，包括Node.js。</p><p id="d575" class="kw kx iq bd ky kz la lb lc ld le kk dk translated">NPM现在有了一个名为<code class="fe lf lg lh li b"><a class="ae lj" href="https://www.npmjs.com/package/nodejs-polars" rel="noopener ugc nofollow" target="_blank">nodejs-polars</a></code>的Node.js库</p></blockquote></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><h1 id="95fc" class="lr ls iq bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">Polars是一个非常快的数据帧库，在Rust中实现，使用Apache Arrow Columnar格式作为内存模型。</h1><ul class=""><li id="6ce1" class="mp mq iq jp b jq mr ju ms jy mt kc mu kg mv kk mw mx my mz bi translated">懒惰|渴望执行</li><li id="0281" class="mp mq iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">多线程</li><li id="e107" class="mp mq iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">SIMD</li><li id="7290" class="mp mq iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">查询优化</li><li id="be30" class="mp mq iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">强大的表达式API</li></ul></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><h1 id="934f" class="lr ls iq bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">Polars由两个主要部分组成。</h1><h2 id="f742" class="nf ls iq bd lt ng nh dn lx ni nj dp mb jy nk nl mf kc nm nn mj kg no np mn nq bi translated">系列</h2><p id="0c92" class="pw-post-body-paragraph jn jo iq jp b jq mr js jt ju ms jw jx jy nr ka kb kc ns ke kf kg nt ki kj kk ij bi translated">系列类似于数组，只是它只能包含一种数据类型。</p><figure class="nu nv nw nx gt ny"><div class="bz fp l di"><div class="nz oa l"/></div></figure><h2 id="dec9" class="nf ls iq bd lt ng nh dn lx ni nj dp mb jy nk nl mf kc nm nn mj kg no np mn nq bi translated">数据帧</h2><p id="80f9" class="pw-post-body-paragraph jn jo iq jp b jq mr js jt ju ms jw jx jy nr ka kb kc ns ke kf kg nt ki kj kk ij bi translated">一个数据帧包含多个系列。</p><figure class="nu nv nw nx gt ny"><div class="bz fp l di"><div class="nz oa l"/></div></figure><h2 id="6380" class="nf ls iq bd lt ng nh dn lx ni nj dp mb jy nk nl mf kc nm nn mj kg no np mn nq bi translated"><strong class="ak">什么是数据框架？</strong></h2><blockquote class="ob oc od"><p id="8fd8" class="jn jo ku jp b jq jr js jt ju jv jw jx oe jz ka kb of kd ke kf og kh ki kj kk ij bi translated"><strong class="jp ir"> DataFrame </strong>是一种数据结构，它将数据组织成由行和列组成的二维表格，很像电子表格。数据帧是现代数据分析中最常用的数据结构之一，因为它们是存储和处理数据的一种灵活而直观的方式。</p></blockquote></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><h2 id="9da1" class="nf ls iq bd lt ng nh dn lx ni nj dp mb jy nk nl mf kc nm nn mj kg no np mn nq bi translated">这些和性能有什么关系呢？</h2><h1 id="2b77" class="lr ls iq bd lt lu oh lw lx ly oi ma mb mc oj me mf mg ok mi mj mk ol mm mn mo bi translated">Polars DataFrame &amp;系列提供无与伦比的性能</h1><p id="9ed2" class="pw-post-body-paragraph jn jo iq jp b jq mr js jt ju ms jw jx jy nr ka kb kc ns ke kf kg nt ki kj kk ij bi translated">演示Polars如何将代码性能提高100倍或更多。我们进行了一系列基准测试，将Polars与NPM的其他常用库进行比较。</p><h1 id="1177" class="lr ls iq bd lt lu oh lw lx ly oi ma mb mc oj me mf mg ok mi mj mk ol mm mn mo bi translated"><strong class="ak">系列基准</strong></h1><p id="e9c5" class="pw-post-body-paragraph jn jo iq jp b jq mr js jt ju ms jw jx jy nr ka kb kc ns ke kf kg nt ki kj kk ij bi translated"><strong class="jp ir">库测试了</strong> nodejs-polars、ramda、lodash <br/>数据集<strong class="jp ir">随机生成的100万条记录数据</strong></p><figure class="nu nv nw nx gt ny"><div class="bz fp l di"><div class="nz oa l"/></div><figcaption class="om on gj gh gi oo op bd b be z dk translated">系列基准</figcaption></figure><blockquote class="kv"><p id="905d" class="kw kx iq bd ky kz oq or os ot ou kk dk translated">在最糟糕的情况下，系列赛的表现比亚军高出约2倍</p><p id="f0a7" class="kw kx iq bd ky kz la lb lc ld le kk dk translated">最好的情况下，Series的性能超过80倍。</p><p id="c673" class="kw kx iq bd ky kz la lb lc ld le kk dk translated">总的来说，Series在每个测试的操作中都比其他产品表现更好</p></blockquote></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><h1 id="0575" class="lr ls iq bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">CSV基准</h1><p id="eaab" class="pw-post-body-paragraph jn jo iq jp b jq mr js jt ju ms jw jx jy nr ka kb kc ns ke kf kg nt ki kj kk ij bi translated"><strong class="jp ir">图书馆测试</strong> nodejs-polars，csv，fast-csv <br/>数据集:以太坊交易数据10k-1M记录**</p><figure class="nu nv nw nx gt ny"><div class="bz fp l di"><div class="nz oa l"/></div><figcaption class="om on gj gh gi oo op bd b be z dk translated">CSV基准</figcaption></figure><blockquote class="ob oc od"><p id="ac74" class="jn jo ku jp b jq jr js jt ju jv jw jx oe jz ka kb of kd ke kf og kh ki kj kk ij bi translated">将一个<em class="iq"> CSV文件</em>读入Polars中16列500k行的内存显示出比本机<code class="fe lf lg lh li b">fs</code>模块快114倍的执行时间，比最慢的执行程序快170倍以上</p><p id="4f1a" class="jn jo ku jp b jq jr js jt ju jv jw jx oe jz ka kb of kd ke kf og kh ki kj kk ij bi translated">10k数据集读取操作快了大约40倍。过滤速度比原生<code class="fe lf lg lh li b"><em class="iq">fs</em></code>模块快15倍。</p><p id="1b44" class="jn jo ku jp b jq jr js jt ju jv jw jx oe jz ka kb of kd ke kf og kh ki kj kk ij bi translated">用于1M记录的fs过滤器是唯一一个耗尽内存的过滤器。作为基线，我使用了<code class="fe lf lg lh li b"><em class="iq">fs.readFileSync</em></code>方法来获取数据。这可能是内存不足错误的原因，因为这是唯一不使用流或数据帧的测试。</p><p id="8a63" class="jn jo ku jp b jq jr js jt ju jv jw jx oe jz ka kb of kd ke kf og kh ki kj kk ij bi translated">Polars通过利用多线程Rust后端提供了这种惊人的性能。如果你想了解更多关于库背后的算法，请阅读这篇<a class="ae lj" href="https://www.ritchievink.com/blog/2021/02/28/i-wrote-one-of-the-fastest-dataframe-libraries/" rel="noopener ugc nofollow" target="_blank">文章</a>！</p></blockquote></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><h1 id="97e5" class="lr ls iq bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">使用极坐标</h1><p id="f287" class="pw-post-body-paragraph jn jo iq jp b jq mr js jt ju ms jw jx jy nr ka kb kc ns ke kf kg nt ki kj kk ij bi translated">除了令人难以置信的性能之外，Dataframe &amp; Series还提供了富有表现力的API，允许您对数据进行操作，而不必为常见操作编写样板文件。</p><p id="35e1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Polars有广泛的内置操作。从累积和、滚动平均、标准偏差等统计操作，到base64解码、正则表达式替换、字符串包含等基于字符串的操作</p><p id="8cb1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> …还有更多</strong></p></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><h1 id="29c8" class="lr ls iq bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">举几个例子。</h1><h2 id="b5c2" class="nf ls iq bd lt ng nh dn lx ni nj dp mb jy nk nl mf kc nm nn mj kg no np mn nq bi translated"><strong class="ak">过滤</strong> <code class="fe lf lg lh li b"><strong class="ak">input !== '0x'</strong></code> <strong class="ak">中的记录，并将结果作为排序列表</strong></h2><p id="1516" class="pw-post-body-paragraph jn jo iq jp b jq mr js jt ju ms jw jx jy nr ka kb kc ns ke kf kg nt ki kj kk ij bi translated"><strong class="jp ir"> <em class="ku">旧方式通过流式csv库</em> </strong></p><figure class="nu nv nw nx gt ny"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="ecf2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> <em class="ku">采用极化方式</em> </strong></p><figure class="nu nv nw nx gt ny"><div class="bz fp l di"><div class="nz oa l"/></div><figcaption class="om on gj gh gi oo op bd b be z dk translated">极地之路</figcaption></figure></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><h1 id="64ea" class="lr ls iq bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated"><strong class="ak">从单个字段中提取唯一值并写入JSON </strong></h1><p id="86eb" class="pw-post-body-paragraph jn jo iq jp b jq mr js jt ju ms jw jx jy nr ka kb kc ns ke kf kg nt ki kj kk ij bi translated"><strong class="jp ir"> <em class="ku">一种分流方式</em>一种分流方式</strong></p><figure class="nu nv nw nx gt ny"><div class="bz fp l di"><div class="nz oa l"/></div><figcaption class="om on gj gh gi oo op bd b be z dk translated">老办法</figcaption></figure><p id="d55f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> <em class="ku">中极化方式</em> </strong></p><figure class="nu nv nw nx gt ny"><div class="bz fp l di"><div class="nz oa l"/></div><figcaption class="om on gj gh gi oo op bd b be z dk translated">极地之路</figcaption></figure></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><h1 id="e049" class="lr ls iq bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">连接一个键</h1><p id="3b79" class="pw-post-body-paragraph jn jo iq jp b jq mr js jt ju ms jw jx jy nr ka kb kc ns ke kf kg nt ki kj kk ij bi translated"><strong class="jp ir"> <em class="ku">一种程序方法</em> </strong></p><figure class="nu nv nw nx gt ny"><div class="bz fp l di"><div class="nz oa l"/></div></figure><p id="9a20" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> <em class="ku">中极化方式</em> </strong></p><figure class="nu nv nw nx gt ny"><div class="bz fp l di"><div class="nz oa l"/></div></figure></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><h1 id="a0a0" class="lr ls iq bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">结束了。</h1><blockquote class="kv"><p id="d5e8" class="kw kx iq bd ky kz la lb lc ld le kk dk translated">Polars提供了出色的性能，包装简单易用。</p></blockquote><ul class=""><li id="08ca" class="mp mq iq jp b jq ov ju ow jy ox kc oy kg oz kk mw mx my mz bi translated">Polars可以加速简单的操作，比如数组排序。</li><li id="d314" class="mp mq iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated"><strong class="jp ir">它可以同时简化和加速复杂的流管道。</strong></li><li id="76bd" class="mp mq iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">Polars可以作为Ramda、下划线和Lodash等库的高性能替代品</li></ul><h2 id="a13e" class="nf ls iq bd lt ng nh dn lx ni nj dp mb jy nk nl mf kc nm nn mj kg no np mn nq bi">=========================</h2><h2 id="3186" class="nf ls iq bd lt ng nh dn lx ni nj dp mb jy nk nl mf kc nm nn mj kg no np mn nq bi translated"><strong class="ak">基准测试硬件规格</strong></h2><h2 id="3a1f" class="nf ls iq bd lt ng nh dn lx ni nj dp mb jy nk nl mf kc nm nn mj kg no np mn nq bi">=========================</h2><ul class=""><li id="3fbf" class="mp mq iq jp b jq mr ju ms jy mt kc mu kg mv kk mw mx my mz bi translated">处理器:AMD锐龙7微软Surface版2.00 GHz</li><li id="2cf8" class="mp mq iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">安装的内存:16.0 GB</li><li id="a737" class="mp mq iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">系统类型:64位操作系统，x64处理器</li><li id="d55e" class="mp mq iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">Linux版本:Ubuntu 18.04</li><li id="09b9" class="mp mq iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">Polars版本:0.0.8</li></ul></div></div>    
</body>
</html>