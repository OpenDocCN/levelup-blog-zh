<html>
<head>
<title>How to Compare and Update Files in Unix</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Unix中比较和更新文件</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-compare-and-update-files-in-unix-73452c063e57?source=collection_archive---------3-----------------------#2022-02-04">https://levelup.gitconnected.com/how-to-compare-and-update-files-in-unix-73452c063e57?source=collection_archive---------3-----------------------#2022-02-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="d157" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">关于diff和patch命令的教程</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/4572866e2d94ed6cae79bde27c450a8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JSfc1jpJPl8yVAr8"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@jeroendenotter?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">耶鲁安穴獭</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="161f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">假设我们想要比较Unix中的两个文件。<code class="fe lv lw lx ly b">first.R</code>和<code class="fe lv lw lx ly b">final.R</code>分别是:</p><p id="0207" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">首先。R </strong></p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="8e45" class="md me it ly b gy mf mg l mh mi">my_models&lt;-list()<br/> <br/>for (s in unique(iris$Species)) {<br/>    tmp&lt;-iris[iris$Species==s,]<br/>    my_models[[s]]&lt;-lm(Sepal.Length~Sepal.Width+Petal.Length+Petal.Width, data=tmp)<br/>}</span><span id="f85d" class="md me it ly b gy mj mg l mh mi">my_models</span></pre><p id="4397" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">决赛。R </strong></p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="3d05" class="md me it ly b gy mf mg l mh mi"># create an empty list<br/># to store the models<br/>my_models&lt;-list()<br/> <br/>for (s in unique(iris$Species)) {<br/>    tmp&lt;-iris[iris$Species==s,]<br/>    my_models[[s]]&lt;-lm(Sepal.Length~Sepal.Width+Petal.Length+Petal.Width, data=tmp)<br/>}<br/> <br/># get the 'setosa' model<br/>my_models[['setosa']]</span></pre><h1 id="04c1" class="mk me it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">使用diff命令比较文件</h1><p id="303a" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">在Unix中，我们可以如下运行<code class="fe lv lw lx ly b">diff</code>命令:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="4a47" class="md me it ly b gy mf mg l mh mi">$ diff -u first.R final.R</span></pre><p id="1926" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们得到了:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="c882" class="md me it ly b gy mf mg l mh mi">$ diff -u first.R final.R<br/>--- first.R     2021-02-21 13:47:57.875639200 +0200<br/>+++ final.R     2021-02-21 13:46:59.259101400 +0200<br/>@@ -1,8 +1,11 @@<br/>+# create an empty list<br/>+# to store the models<br/> my_models&lt;-list()<br/><br/> for (s in unique(iris$Species)) {<br/>     tmp&lt;-iris[iris$Species==s,]<br/>     my_models[[s]]&lt;-lm(Sepal.Length~Sepal.Width+Petal.Length+Petal.Width, data=tmp)<br/> }<br/>-<br/>-my_models<br/>\ No newline at end of file<br/>+<br/>+# get the 'setosa' model<br/>+my_models[['setosa']]<br/>\ No newline at end of file</span></pre><p id="c156" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">其中<code class="fe lv lw lx ly b">--</code>是指<code class="fe lv lw lx ly b">first.R</code>，而<code class="fe lv lw lx ly b">++</code>是指<code class="fe lv lw lx ly b">final.R</code>。它告诉我们哪些行被添加了，哪些行被删除了。</p><h1 id="50ce" class="mk me it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">创建差异文件</h1><p id="2fe0" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">您可以创建一个<code class="fe lv lw lx ly b">patch</code>文件，新旧文件的区别如下:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="4a90" class="md me it ly b gy mf mg l mh mi">$ diff -u first.R final.R &gt; diff_file.patch</span></pre><h1 id="b04e" class="mk me it bd ml mm mn mo mp mq mr ms mt jz mu ka mv kc mw kd mx kf my kg mz na bi translated">使用patch命令更新差异文件</h1><p id="eeff" class="pw-post-body-paragraph kz la it lb b lc nb ju le lf nc jx lh li nd lk ll lm ne lo lp lq nf ls lt lu im bi translated">如果您有差异文件，如<code class="fe lv lw lx ly b">diff_file.patch</code>和初始文件<code class="fe lv lw lx ly b">first.R</code>，您可以如下创建<code class="fe lv lw lx ly b">final.R</code>:</p><p id="15c3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们创建一个<code class="fe lv lw lx ly b">first.R</code>的副本</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="fe9e" class="md me it ly b gy mf mg l mh mi">$ cp first.R first_mod.R</span></pre><p id="07be" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在我们可以在<code class="fe lv lw lx ly b">first_mod.R</code>上运行批处理</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="18b4" class="md me it ly b gy mf mg l mh mi">$ patch first_mod.R &lt; diff_file.patch</span></pre><p id="6c71" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">并且<code class="fe lv lw lx ly b">first_mod.R</code>变得与<code class="fe lv lw lx ly b">final.R</code>相同</p><p id="69af" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您可以通过键入以下命令进行确认:</p><pre class="kj kk kl km gt lz ly ma mb aw mc bi"><span id="8b2e" class="md me it ly b gy mf mg l mh mi">diff -u first_mod.R final.R</span></pre></div><div class="ab cl ng nh hx ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="im in io ip iq"><p id="8045" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最初由<a class="ae ky" href="https://predictivehacks.com/?all-tips=how-to-compare-and-update-files-in-unix-with-diff-and-patch-commands" rel="noopener ugc nofollow" target="_blank">预测黑客</a>发布</p></div></div>    
</body>
</html>