<html>
<head>
<title>How to Display Images Using the Masonry Effect in an Angular App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Angular应用程序中使用砖石效果显示图像</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-display-images-like-pinterest-and-flickr-in-an-angular-app-6f6fa9c3cc35?source=collection_archive---------1-----------------------#2019-12-29">https://levelup.gitconnected.com/how-to-display-images-like-pinterest-and-flickr-in-an-angular-app-6f6fa9c3cc35?source=collection_archive---------1-----------------------#2019-12-29</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="7a9f" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">将Pinterest和Flickr等图片放在一个有角度的应用程序中</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/6b26006faf8f8ad332e7b3062718f44d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sw1P0Fmzq_gCODq5HKVWqw.jpeg"/></div></div></figure><p id="a17c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果你使用像Pinterest或Flickr这样的图片搜索网站，你会注意到它们的图片显示在一个看起来像砖墙的网格中。这些图像高度不均匀，但宽度相等。这被称为砖石效应，因为它看起来像一堵砖墙。</p><p id="c353" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">为了实现砖石效果，我们必须将图像的宽度设置为与屏幕宽度成比例，并将图像的高度设置为与图像的纵横比成比例。</p><p id="84b4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果没有任何库，这是一件痛苦的事情，所以人们制作了包来创造这种效果。</p><p id="8720" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在本文中，我们将构建一个照片应用程序，允许用户搜索图像并在砖石网格中显示图像。图像网格将无限滚动，以获得更多的图像。我们将用Angular和砌体布局和Ng砌体网格库来构建它。我们将把Ngx-Infinite-Scroll组件包装在Ng-Masonry-Grid之外，以获得显示图像时的无限滚动效果。</p><p id="8d38" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们的应用程序将显示来自Pixabay API的图像。你可以在<a class="ae lq" href="https://pixabay.com/api/docs/" rel="noopener ugc nofollow" target="_blank">https://pixabay.com/api/docs/</a>查看API文档并注册一个密钥</p><h2 id="5176" class="lr ls it bd lt lu lv dn lw lx ly dp lz ld ma mb mc lh md me mf ll mg mh mi mj bi translated">入门指南</h2><p id="589a" class="pw-post-body-paragraph ku kv it kw b kx mk ju kz la ml jx lc ld mm lf lg lh mn lj lk ll mo ln lo lp im bi translated">首先，我们运行Angular CLI来启动项目。如果还没有安装，我们运行<code class="fe mp mq mr ms b">npm i -g @angular/cli</code>来安装Angular CLI。然后运行<code class="fe mp mq mr ms b">ng new image-app</code>来创建项目。在向导中，选择包含路由并使用SCSS作为CSS预处理器。</p><p id="5063" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">接下来，我们安装我们的软件包。我们需要为无限卷轴安装Ngx-Infinite-Scroll，为砌体网格布局安装Ng-Masonry-Grid及其依赖项。为了安装所有东西，我们运行:</p><pre class="kj kk kl km gt mt ms mu mv aw mw bi"><span id="1084" class="lr ls it ms b gy mx my l mz na">npm i imagesloaded masonry-layout ng-masonry-grid ngx-infinite-scroll</span></pre><p id="aa95" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">接下来，我们继续编写代码。首先，我们通过运行以下命令来创建我们需要的文件:</p><pre class="kj kk kl km gt mt ms mu mv aw mw bi"><span id="e5fd" class="lr ls it ms b gy mx my l mz na">ng g component homePage<br/>ng g component searchPage<br/>ng g service image</span></pre><p id="9b6f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">然后在<code class="fe mp mq mr ms b">home-page.component.html</code>中，我们将现有代码替换为:</p><pre class="kj kk kl km gt mt ms mu mv aw mw bi"><span id="4341" class="lr ls it ms b gy mx my l mz na">&lt;h1 class="text-center"&gt;Home&lt;/h1&gt;<br/>&lt;div<br/>  class="search-results"<br/>  infiniteScroll<br/>  [infiniteScrollDistance]="10"<br/>  [infiniteScrollThrottle]="50"<br/>  (scrolled)="getImages()"<br/>&gt;<br/>  &lt;ng-masonry-grid<br/>    [masonryOptions]="{<br/>      transitionDuration: '0.8s',<br/>      gutter: 5,<br/>      columnWidth: 300,<br/>      fitWidth: true<br/>    }"<br/>    [useAnimation]="true"<br/>    [useImagesLoaded]="true"<br/>    [scrollAnimationOptions]="{<br/>      animationEffect: 'effect-4',<br/>      minDuration: 0.4,<br/>      maxDuration: 0.7<br/>    }"<br/>  &gt;<br/>    &lt;ng-masonry-grid-item<br/>      id="{{ 'masonry-item-' + i }}"<br/>      *ngFor="let item of images"<br/>      class="masonry-item"<br/>    &gt;<br/>      &lt;img [src]="item.previewURL" /&gt;<br/>    &lt;/ng-masonry-grid-item&gt;<br/>  &lt;/ng-masonry-grid&gt;<br/>&lt;/div&gt;</span></pre><h2 id="91b3" class="lr ls it bd lt lu lv dn lw lx ly dp lz ld ma mb mc lh md me mf ll mg mh mi mj bi translated">构建组件</h2><p id="34e2" class="pw-post-body-paragraph ku kv it kw b kx mk ju kz la ml jx lc ld mm lf lg lh mn lj lk ll mo ln lo lp im bi translated">添加内部带有砖石网格组件的无限滚动容器。我们将<code class="fe mp mq mr ms b">infiniteScrollDistance</code>设置为10，这样当我们浏览完90%的内容时，它将开始加载新数据，然后我们将<code class="fe mp mq mr ms b">infiniteScrollThrottle</code>设置为50，这样当我们到达页面底部时，它在加载新数据之前会等待50毫秒。</p><p id="0533" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><code class="fe mp mq mr ms b">scrolled</code>事件是当我们滚动得足够低时加载新数据。在这种情况下，我们通过调用<code class="fe mp mq mr ms b">getImages</code>获得更多的图像。</p><p id="38ab" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在<code class="fe mp mq mr ms b">ng-masonry-grid</code>组件中，我们设置我们的砖石选项。我们用内置效果之一的<code class="fe mp mq mr ms b">transitionDuration: ‘0.8s'</code>和<code class="fe mp mq mr ms b">scrollAnimationOptions</code>、<code class="fe mp mq mr ms b">effect-4</code>给网格添加一些动画。它显示一个闪光。同样，我们用<code class="fe mp mq mr ms b">minDuration</code>和<code class="fe mp mq mr ms b">maxDuration</code>属性设置动画的持续时间。在组件内部，我们展示了来自Pixabay API的图像。</p><p id="3ecd" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在<code class="fe mp mq mr ms b">home-page.component.ts</code>中，我们将现有代码替换为:</p><pre class="kj kk kl km gt mt ms mu mv aw mw bi"><span id="976a" class="lr ls it ms b gy mx my l mz na">import { Component, OnInit } from '<a class="ae lq" href="http://twitter.com/angular/core" rel="noopener ugc nofollow" target="_blank">@angular/core</a>';<br/>import { ImageService } from '../image.service';</span><span id="1d0f" class="lr ls it ms b gy nb my l mz na"><a class="ae lq" href="http://twitter.com/Component" rel="noopener ugc nofollow" target="_blank">@Component</a>({<br/>  selector: 'app-home-page',<br/>  templateUrl: './home-page.component.html',<br/>  styleUrls: ['./home-page.component.scss']<br/>})<br/>export class HomePageComponent implements OnInit {<br/>  images: any[] = [];<br/>  page = 1;</span><span id="4e38" class="lr ls it ms b gy nb my l mz na">  constructor(private imageService: ImageService) { }</span><span id="13f0" class="lr ls it ms b gy nb my l mz na">  ngOnInit() {<br/>    this.getImages();<br/>  }</span><span id="0caf" class="lr ls it ms b gy nb my l mz na">  getImages() {<br/>    this.page++;<br/>    this.imageService.getImages(this.page)<br/>      .subscribe((res: any) =&gt; {<br/>        this.images = this.images.concat(res.hits);<br/>      })<br/>  }</span><span id="de51" class="lr ls it ms b gy nb my l mz na">}</span></pre><p id="affe" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这将在页面首次加载时获取图像，并在我们滚动时追加更多图像。</p><p id="a48a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">接下来在<code class="fe mp mq mr ms b">search-page.component.html</code>中，我们将现有代码替换为:</p><pre class="kj kk kl km gt mt ms mu mv aw mw bi"><span id="3677" class="lr ls it ms b gy mx my l mz na">&lt;h1 class="text-center"&gt;Search&lt;/h1&gt;<br/>&lt;form (ngSubmit)="search(searchForm)" #searchForm="ngForm"&gt;<br/>  &lt;div class="form-group"&gt;<br/>    &lt;label&gt;Keyword&lt;/label&gt;<br/>    &lt;input<br/>      type="text"<br/>      class="form-control"<br/>      placeholder="Keyword"<br/>      #keyword="ngModel"<br/>      name="keyword"<br/>      [(ngModel)]="form.keyword"<br/>      required<br/>    /&gt;<br/>    &lt;div *ngIf="keyword?.invalid &amp;&amp; (keyword.dirty || keyword.touched)"&gt;<br/>      &lt;div *ngIf="keyword.errors.required"&gt;<br/>        Keyword is required.<br/>      &lt;/div&gt;<br/>      &lt;div *ngIf="keyword.invalid"&gt;<br/>        Keyword is invalid.<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;<br/>  &lt;/div&gt;</span><span id="461f" class="lr ls it ms b gy nb my l mz na">&lt;button class="btn btn-primary"&gt;Search&lt;/button&gt;<br/>&lt;/form&gt;</span><span id="554a" class="lr ls it ms b gy nb my l mz na">&lt;br /&gt;</span><span id="494c" class="lr ls it ms b gy nb my l mz na">&lt;div<br/>  class="search-results"<br/>  infiniteScroll<br/>  [infiniteScrollDistance]="10"<br/>  [infiniteScrollThrottle]="50"<br/>  (scrolled)="getImages()"<br/>&gt;<br/>  &lt;ng-masonry-grid<br/>    [masonryOptions]="{<br/>      transitionDuration: '0.8s',<br/>      gutter: 5,<br/>      columnWidth: 300,<br/>      fitWidth: true<br/>    }"<br/>    [useAnimation]="true"<br/>    [useImagesLoaded]="true"<br/>    [scrollAnimationOptions]="{<br/>      animationEffect: 'effect-4',<br/>      minDuration: 0.4,<br/>      maxDuration: 0.7<br/>    }"<br/>  &gt;<br/>    &lt;ng-masonry-grid-item<br/>      id="{{ 'masonry-item-' + i }}"<br/>      *ngFor="let item of images"<br/>      class="masonry-item"<br/>    &gt;<br/>      &lt;img [src]="item.previewURL" /&gt;<br/>    &lt;/ng-masonry-grid-item&gt;<br/>  &lt;/ng-masonry-grid&gt;<br/>&lt;/div&gt;</span></pre><p id="edcb" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们有和主页一样的无限滚动容器和砖石网格。我们唯一添加的是通过关键字搜索图片的搜索表单。我们使用Angular的内置表单验证来检查是否输入了关键字。然后我们在组件代码中调用<code class="fe mp mq mr ms b">search</code>函数来搜索图像。</p><p id="24e0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">接下来在<code class="fe mp mq mr ms b">search-page.component.ts</code>中，我们将代码替换为:</p><pre class="kj kk kl km gt mt ms mu mv aw mw bi"><span id="d318" class="lr ls it ms b gy mx my l mz na">import { Component, OnInit } from '<a class="ae lq" href="http://twitter.com/angular/core" rel="noopener ugc nofollow" target="_blank">@angular/core</a>';<br/>import { ImageService } from '../image.service';<br/>import { NgForm } from '<a class="ae lq" href="http://twitter.com/angular/forms" rel="noopener ugc nofollow" target="_blank">@angular/forms</a>';</span><span id="3bb7" class="lr ls it ms b gy nb my l mz na"><a class="ae lq" href="http://twitter.com/Component" rel="noopener ugc nofollow" target="_blank">@Component</a>({<br/>  selector: 'app-search-page',<br/>  templateUrl: './search-page.component.html',<br/>  styleUrls: ['./search-page.component.scss']<br/>})<br/>export class SearchPageComponent implements OnInit {<br/>  images: any[] = [];<br/>  form: any = &lt;any&gt;{};<br/>  page = 1;</span><span id="ce5a" class="lr ls it ms b gy nb my l mz na">  constructor(private imageService: ImageService) { }</span><span id="639a" class="lr ls it ms b gy nb my l mz na">  ngOnInit() {</span><span id="a39b" class="lr ls it ms b gy nb my l mz na">  }</span><span id="8340" class="lr ls it ms b gy nb my l mz na">  getImages() {<br/>    this.page++;<br/>    this.imageService.searchImages(this.form.keyword, this.page)<br/>      .subscribe((res: any) =&gt; {<br/>        this.images = this.images.concat(res.hits);<br/>      })<br/>  }</span><span id="c000" class="lr ls it ms b gy nb my l mz na">  search(searchForm: NgForm) {<br/>    if (searchForm.invalid) {<br/>      return;<br/>    }<br/>    this.images = [];<br/>    this.imageService.searchImages(this.form.keyword, this.page)<br/>      .subscribe((res: any) =&gt; {<br/>        this.images = this.images.concat(res.hits);<br/>      })<br/>  }<br/>}</span></pre><p id="7616" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这个文件有我们在模板中调用的<code class="fe mp mq mr ms b">search</code>函数，以及我们在无限滚动容器中调用的<code class="fe mp mq mr ms b">getImages</code>函数，以获取更多图像并将其附加到我们的<code class="fe mp mq mr ms b">images</code>数组中。<code class="fe mp mq mr ms b">search</code>函数采用关键字和页码，通过关键字进行图像搜索。</p><p id="6ba7" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在<code class="fe mp mq mr ms b">app-routing.module.ts</code>中，我们输入:</p><pre class="kj kk kl km gt mt ms mu mv aw mw bi"><span id="a918" class="lr ls it ms b gy mx my l mz na">import { NgModule } from '<a class="ae lq" href="http://twitter.com/angular/core" rel="noopener ugc nofollow" target="_blank">@angular/core</a>';<br/>import { Routes, RouterModule } from '<a class="ae lq" href="http://twitter.com/angular/router" rel="noopener ugc nofollow" target="_blank">@angular/router</a>';<br/>import { HomePageComponent } from './home-page/home-page.component';<br/>import { SearchPageComponent } from './search-page/search-page.component';</span><span id="4609" class="lr ls it ms b gy nb my l mz na">const routes: Routes = [<br/>  { path: '', component: HomePageComponent },<br/>  { path: 'search', component: SearchPageComponent },<br/>];</span><span id="3884" class="lr ls it ms b gy nb my l mz na"><a class="ae lq" href="http://twitter.com/NgModule" rel="noopener ugc nofollow" target="_blank">@NgModule</a>({<br/>  imports: [RouterModule.forRoot(routes)],<br/>  exports: [RouterModule]<br/>})<br/>export class AppRoutingModule { }</span></pre><p id="9814" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">当用户点击链接或输入URL时，他们可以看到我们刚刚添加的页面。</p><p id="704f" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">接下来在<code class="fe mp mq mr ms b">app.component.html</code>中，我们输入:</p><pre class="kj kk kl km gt mt ms mu mv aw mw bi"><span id="8fac" class="lr ls it ms b gy mx my l mz na">&lt;nav class="navbar navbar-expand-lg navbar-light bg-light"&gt;<br/>  &lt;a class="navbar-brand" routerLink="/"&gt;Image App&lt;/a&gt;<br/>  &lt;button<br/>    class="navbar-toggler"<br/>    type="button"<br/>    data-toggle="collapse"<br/>    data-target="#navbarSupportedContent"<br/>    aria-controls="navbarSupportedContent"<br/>    aria-expanded="false"<br/>    aria-label="Toggle navigation"<br/>  &gt;<br/>    &lt;span class="navbar-toggler-icon"&gt;&lt;/span&gt;<br/>  &lt;/button&gt;</span><span id="7ffd" class="lr ls it ms b gy nb my l mz na">&lt;div class="collapse navbar-collapse" id="navbarSupportedContent"&gt;<br/>    &lt;ul class="navbar-nav mr-auto"&gt;<br/>      &lt;li class="nav-item active"&gt;<br/>        &lt;a class="nav-link" routerLink="/"&gt;Home &lt;/a&gt;<br/>      &lt;/li&gt;<br/>      &lt;li class="nav-item active"&gt;<br/>        &lt;a class="nav-link" routerLink="/search"&gt;Image &lt;/a&gt;<br/>      &lt;/li&gt;<br/>    &lt;/ul&gt;<br/>  &lt;/div&gt;<br/>&lt;/nav&gt;</span><span id="0419" class="lr ls it ms b gy nb my l mz na">&lt;div class="page"&gt;<br/>  &lt;router-outlet&gt;&lt;/router-outlet&gt;<br/>&lt;/div&gt;</span></pre><p id="cdf9" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这将链接添加到我们的页面，并暴露<code class="fe mp mq mr ms b">router-outlet</code>以便用户可以看到我们的页面。</p><p id="cfc2" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">然后在<code class="fe mp mq mr ms b">app.component.scss</code>中，我们添加:</p><pre class="kj kk kl km gt mt ms mu mv aw mw bi"><span id="7f88" class="lr ls it ms b gy mx my l mz na">.page {<br/>  padding: 20px;<br/>}</span><span id="eb62" class="lr ls it ms b gy nb my l mz na">nav {<br/>  background-color: lightpink !important;<br/>}</span></pre><p id="e6d5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在<code class="fe mp mq mr ms b">app.module.ts</code>中，我们将现有代码替换为:</p><pre class="kj kk kl km gt mt ms mu mv aw mw bi"><span id="6744" class="lr ls it ms b gy mx my l mz na">import { BrowserModule } from '<a class="ae lq" href="http://twitter.com/angular/platform-browser" rel="noopener ugc nofollow" target="_blank">@angular/platform-browser</a>';<br/>import { NgModule } from '<a class="ae lq" href="http://twitter.com/angular/core" rel="noopener ugc nofollow" target="_blank">@angular/core</a>';</span><span id="f96b" class="lr ls it ms b gy nb my l mz na">import { AppRoutingModule } from './app-routing.module';<br/>import { AppComponent } from './app.component';<br/>import { HomePageComponent } from './home-page/home-page.component';<br/>import { SearchPageComponent } from './search-page/search-page.component';<br/>import { NgMasonryGridModule } from 'ng-masonry-grid';<br/>import { FormsModule } from '<a class="ae lq" href="http://twitter.com/angular/forms" rel="noopener ugc nofollow" target="_blank">@angular/forms</a>';<br/>import { HttpClientModule } from '<a class="ae lq" href="http://twitter.com/angular/common" rel="noopener ugc nofollow" target="_blank">@angular/common</a>/http';<br/>import { ImageService } from './image.service';<br/>import { InfiniteScrollModule } from 'ngx-infinite-scroll';</span><span id="130d" class="lr ls it ms b gy nb my l mz na"><a class="ae lq" href="http://twitter.com/NgModule" rel="noopener ugc nofollow" target="_blank">@NgModule</a>({<br/>  declarations: [<br/>    AppComponent,<br/>    HomePageComponent,<br/>    SearchPageComponent<br/>  ],<br/>  imports: [<br/>    BrowserModule,<br/>    AppRoutingModule,<br/>    NgMasonryGridModule,<br/>    FormsModule,<br/>    HttpClientModule,<br/>    InfiniteScrollModule<br/>  ],<br/>  providers: [ImageService],<br/>  bootstrap: [AppComponent]<br/>})<br/>export class AppModule { }</span></pre><p id="bbf6" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">我们添加我们在应用中使用的组件、服务和库。</p><p id="b688" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">在<code class="fe mp mq mr ms b">image.service.ts</code>中，我们将代码替换为:</p><pre class="kj kk kl km gt mt ms mu mv aw mw bi"><span id="a396" class="lr ls it ms b gy mx my l mz na">import { Injectable } from '<a class="ae lq" href="http://twitter.com/angular/core" rel="noopener ugc nofollow" target="_blank">@angular/core</a>';<br/>import { HttpClient } from '<a class="ae lq" href="http://twitter.com/angular/common" rel="noopener ugc nofollow" target="_blank">@angular/common</a>/http';<br/>import { environment } from 'src/environments/environment.prod';</span><span id="0996" class="lr ls it ms b gy nb my l mz na"><a class="ae lq" href="http://twitter.com/Injectable" rel="noopener ugc nofollow" target="_blank">@Injectable</a>({<br/>  providedIn: 'root'<br/>})<br/>export class ImageService {</span><span id="d133" class="lr ls it ms b gy nb my l mz na">  constructor(private http: HttpClient) { }</span><span id="a81e" class="lr ls it ms b gy nb my l mz na">  getImages(page = 1) {<br/>    return this.http.get(`${environment.apiUrl}/?key=${environment.apiKey}&amp;page=${page}`)<br/>  }</span><span id="7bb6" class="lr ls it ms b gy nb my l mz na">  searchImages(keyword, page = 1) {<br/>    return this.http.get(`${environment.apiUrl}/?key=${environment.apiKey}&amp;q=${keyword}&amp;page=${page}`)<br/>  }</span><span id="c65a" class="lr ls it ms b gy nb my l mz na">}</span></pre><p id="9f73" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这让我们可以在组件中发出请求，从Pixabay API获取必要的数据。我们有<code class="fe mp mq mr ms b">getImages</code>功能来获取图片，还有<code class="fe mp mq mr ms b">searchImages</code>功能来通过关键字搜索图片。</p><p id="0fd4" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">然后在<code class="fe mp mq mr ms b">styles.scss</code>中，我们添加:</p><pre class="kj kk kl km gt mt ms mu mv aw mw bi"><span id="baea" class="lr ls it ms b gy mx my l mz na">$width: 300px;<br/>$auto: auto;<br/>ng-masonry-grid {<br/>  margin: 0 $auto;<br/>}</span><span id="7eac" class="lr ls it ms b gy nb my l mz na">.masonry-item {<br/>  height: $auto;<br/>  width: $width;<br/>  img {<br/>    height: $auto;<br/>    width: $width;<br/>    display: inline-block;<br/>  }<br/>}</span></pre><p id="5853" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这会将图像宽度更改为300像素，并自动调整高度以保持图像的纵横比。</p><p id="0e28" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">最后，在<code class="fe mp mq mr ms b">index.html</code>中，我们将代码替换为:</p><pre class="kj kk kl km gt mt ms mu mv aw mw bi"><span id="5d88" class="lr ls it ms b gy mx my l mz na">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;meta charset="utf-8" /&gt;<br/>    &lt;title&gt;Image App&lt;/title&gt;<br/>    &lt;base href="/" /&gt;</span><span id="935e" class="lr ls it ms b gy nb my l mz na">&lt;meta name="viewport" content="width=device-width, initial-scale=1" /&gt;<br/>    &lt;link rel="icon" type="image/x-icon" href="favicon.ico" /&gt;<br/>    &lt;link<br/>      href="<a class="ae lq" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="noopener ugc nofollow" target="_blank">https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css</a>"<br/>      rel="stylesheet"<br/>    /&gt;<br/>    &lt;script<br/>      src="<a class="ae lq" href="https://code.jquery.com/jquery-3.3.1.slim.min.js" rel="noopener ugc nofollow" target="_blank">https://code.jquery.com/jquery-3.3.1.slim.min.js</a>"<br/>      integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"<br/>      crossorigin="anonymous"<br/>    &gt;&lt;/script&gt;<br/>    &lt;script<br/>      src="<a class="ae lq" href="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" rel="noopener ugc nofollow" target="_blank">https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js</a>"<br/>      integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"<br/>      crossorigin="anonymous"<br/>    &gt;&lt;/script&gt;<br/>    &lt;script<br/>      src="<a class="ae lq" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" rel="noopener ugc nofollow" target="_blank">https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js</a>"<br/>      integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"<br/>      crossorigin="anonymous"<br/>    &gt;&lt;/script&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;app-root&gt;&lt;/app-root&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="b7eb" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这将引导CSS和JavaScript依赖项添加到我们的应用程序中，并更改了标题。</p><p id="e472" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">做完所有工作，我们就可以运行<code class="fe mp mq mr ms b">ng serve</code>来运行app了。那么我们应该得到:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nc"><img src="../Images/6fca430c698cc1b77a328bf34cbd50f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r8XbRbUhJkjIzg-qyAyMXQ.png"/></div></div></figure></div></div>    
</body>
</html>