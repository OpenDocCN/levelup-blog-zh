# GitFlow 在大型团队中工作

> 原文：<https://levelup.gitconnected.com/gitflow-working-in-big-teams-aa606a953147>

## 另一种 Git 分支模型，包括使用特性分支和多个主分支

![](img/3aaefcdf44e5976367a0be3143f5add2.png)

照片由来自[佩克斯](https://www.pexels.com/photo/eyeglasses-in-front-of-laptop-computer-1181253/?utm_content=attributionCopyText&utm_medium=referral&utm_source=pexels)的[克里斯蒂娜·莫里洛](https://www.pexels.com/@divinetechygirl?utm_content=attributionCopyText&utm_medium=referral&utm_source=pexels)拍摄

创建了我们的存储库之后，让我们看看如何使用 GitFlow(当团队相当大时，这通常是最好的解决方案之一)。在详细讨论流程之前，让我们先定义一些分支命名的规则以及它们的角色。

## 创建存储库

当我们创建存储库时，我们会注意到我们拥有的唯一分支叫做 master。我们将在后面解释这个分支应该包含什么。

## 主要分支(开发/主)

现在让我们创建一个名为“**开发**的新分支。这个和主分支将是我们的主要分支。主分支通常只在应用程序上线时更新(所以我们有商店版本),而开发分支将在每次拉请求或团队分支完成时更新。

## 团队分支

从事某个功能的每个成员都应该创建一个新的分支，其路径应该是 ***team/branch_name。***

***注意，所有的分支都应该是从 Develop 分支开始创建的。***

在我目前的工作中，我们有很多开发人员负责应用程序的特定功能(例如，一个团队只负责支付，另一个团队负责报价，还有一个团队负责支持，等等)。

我们假设我们属于支付团队，我们需要创建一个新的功能来支持贝宝支付。我们的分公司应该叫做这样的:**支付/paypal _ 集成**

在大型团队中，为加入您的团队的新人制定这些规则是很好的，这样您就不会因为不同的名字而弄乱存储库。

如果项目有几个人，比如 2-3 个人，你不需要团队名称，你可以在这一步使用**特征/我的分支**

## 发布分支

当所有团队都将代码合并到 develop 中，并且应用程序准备好进行测试时，将会用到这个分支。命名应该是这样的:release/1.0.1 哪个 1.0.1 是我们的应用程序版本。

## 修补程序分支

只有在之前的分支(版本)在测试中有一些问题，我们需要执行一个 bug 修复时，才会使用这个。这通常从发布分支开始创建。命名应该是 hotfix/my_bug

## 流动

现在我们已经解释了我们将要使用的分支，让我们来看一下流程。让我们假设我们有 2 个团队和 3 个必须实现的特性。正如我们之前所说，第一个团队负责付款，第二个团队负责报价。我们的任务将是 Paypal 集成，并为支付团队导出 pdf 格式的收据和黑色星期五横幅，该横幅应在当天显示在我们的应用程序中，供报价团队使用。

我们目前已经创建了**个开发和主**个分支。所有的开发人员现在都开始了他们的冲刺，他们应该创建他们的分支。

从**开发**分支开始，支付团队将创建支付/paypal_integration 和支付/export_pdf 分支。第二个团队将创建一个名为 offers/black_friday 的分支。我们的存储库现在将具有这样的结构:

**开发
支付/paypal_integration
支付/export_pdf
优惠/黑色星期五**

现在让我们假设 paypal_integration 的开发人员已经完成了他的工作，他需要合并他的分支(注意:最好创建一个 pull 请求，以便您的功能被审查，但是现在让我们只关注流程)

开发人员在合并他的特性之前应该做的第一件事是将 develop 反向合并到他的分支(这意味着他将获取 Develop 的最新代码并更新他的代码，因为可能有人将他的特性合并到 Develop 中，而他的代码尚未更新)。在将开发分支合并到他的“支付/paypal _ 集成”分支并解决了所有可能的冲突后，现在是时候将他的分支合并到开发分支了。

> **你需要删除合并到 Develop** 中的每一个分支

其他团队应该做同样的事情。一旦经理决定是时候上线了，我们将检查开发分支，现在包括我们开发的所有功能，并创建一个名为 **release/1.0.1** 的新分支

从这个分支，我们将把我们的应用程序分发给 UAT 团队，开始测试并确保一切正常。

不幸的是，他们发现了一个 bug，我们需要在上线之前解决它。我们需要创建一个名为 **hotfix/failed_payment** 的新分支，但这次从 **release/1.0.1** 分支开始。UAT 团队现在将测试来自热修复分支的应用程序。

我们修复了 bug！**热修复分支应该合并到发布分支，合并后删除热修复分支**。

所有测试都通过了。现在我们已经准备好上线了！在商店批准我们的应用程序或项目**后，我们需要将发布/1.0.1 分支合并到开发和主分支**中，并在合并后删除发布分支。

我们现在有了具有相同代码的开发和主分支，我们还需要一个步骤来完成我们的流程。

## 标签

从主分支创建一个标签来标记您的版本。标签的名称应该是 1.0.1。我们需要这一步，因为在某些情况下，一个特定的版本有一个 bug，我们需要为了调试的目的检验这个版本。

我知道这看起来很复杂，但是一旦你习惯了，你就会喜欢这个分支模型，你就不会有无限冲突了，:D

感谢阅读