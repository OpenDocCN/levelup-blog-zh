<html>
<head>
<title>Automatic Conversion To Local Time Client-Side With JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用JavaScript自动转换到本地时间客户端</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/automatic-conversion-to-local-time-client-side-with-javascript-1b7c27e8b6f2?source=collection_archive---------12-----------------------#2020-10-19">https://levelup.gitconnected.com/automatic-conversion-to-local-time-client-side-with-javascript-1b7c27e8b6f2?source=collection_archive---------12-----------------------#2020-10-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/eab9e1aaab3fd32c2fd3c1cc89cbbfe8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZIMho2X6A91nX8PydKT0RA.jpeg"/></div></div></figure><p id="1092" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这一次我们来个速战速决。只是我越来越多地用来提高网站可用性的一小段JavaScript代码。</p><p id="c0e1" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">HTML 5的<code class="fe kz la lb lc b">&lt;time&gt;</code>标签是对该语言的一个更好的补充。在一片毫无意义的冗余和概念的海洋中，它是为数不多的闪亮宝石之一。</p><p id="4418" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">最重要的是包含了<code class="fe kz la lb lc b">datetime</code>属性，它允许您为机器解析指定一个合适的完整时间，同时内容可以更加“用户友好”。</p><pre class="ld le lf lg gt lh lc li lj aw lk bi"><span id="f5a0" class="ll lm it lc b gy ln lo l lp lq">&lt;time datetime="2020-03-27T15:44:00.000Z"&gt;<br/> 27 March 2020 07:44 PST<br/>&lt;/time&gt;</span></pre><p id="d851" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">但是，如果我们能让这个标签的内容根据用户的当地时间自动调整，那不是很好吗？而不需要他们报账或宣布当地时间？听起来不太可能，对吧？</p><p id="df3c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">多亏了那个<code class="fe kz la lb lc b">datetime</code>属性和<code class="fe kz la lb lc b">Date</code>对象的<code class="fe kz la lb lc b">toLocaleString</code>方法，我们才能做到！</p><h1 id="c0c5" class="lr lm it bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">JavaScript拯救世界</h1><p id="33e2" class="pw-post-body-paragraph kb kc it kd b ke mo kg kh ki mp kk kl km mq ko kp kq mr ks kt ku ms kw kx ky im bi translated">通常你会听到我抱怨JavaScript的使用，以及HTML和CSS如何在没有它的情况下做这么多事情。但是我的意思并不是说JavaScript是邪恶的，或者不应该被使用，而是把它放在你的裤子里，在需要的时候使用它，并增强用户体验。它不应该成为你解决所有问题的方法。</p><p id="420a" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">正如我在上一篇文章中概述的，好的JavaScript应该增强已经工作的页面，而不是提供功能的唯一手段。就在这里，我们有一个很好的例子。该页面是可用的，并且向用户呈现有用的信息。我们所说的只是调整时间标签的内容以反映当地时间。</p><p id="ea6b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这很简单:</p><pre class="ld le lf lg gt lh lc li lj aw lk bi"><span id="7912" class="ll lm it lc b gy ln lo l lp lq">for (let time of document.getElementsByTagName('time')) {<br/>  time.textContent = new Date(<br/>    time.getAttribute('datetime')<br/>  ).toLocaleString();<br/>}</span></pre><p id="f1d8" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在你的</p><h1 id="6fa3" class="lr lm it bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">现场演示</h1><p id="32a3" class="pw-post-body-paragraph kb kc it kd b ke mo kg kh ki mp kk kl km mq ko kp kq mr ks kt ku ms kw kx ky im bi translated">这里有一个简单的例子:</p><figure class="ld le lf lg gt ju"><div class="bz fp l di"><div class="mu mv l"/></div></figure><h1 id="c243" class="lr lm it bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">未来</h1><p id="9c44" class="pw-post-body-paragraph kb kc it kd b ke mo kg kh ki mp kk kl km mq ko kp kq mr ks kt ku ms kw kx ky im bi translated">随着ECMAScript 2021最终带来了正确的日期格式，我们可能很快就能够对输出进行更多的格式化和调整。当准备好用于生产时，我可能会使用一个可选的数据属性来声明输出的格式。</p></div></div>    
</body>
</html>