<html>
<head>
<title>How to Create an Image Gallery App with Vue.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Vue.js创建图片库应用程序</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-create-an-image-gallery-app-with-vue-js-2be350ffe4d5?source=collection_archive---------1-----------------------#2019-10-01">https://levelup.gitconnected.com/how-to-create-an-image-gallery-app-with-vue-js-2be350ffe4d5?source=collection_archive---------1-----------------------#2019-10-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/775e303fbf10d6207f45d742389b37a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xJ-yBKJz83eNhiPpSjOCnw.png"/></div></div></figure><p id="de4d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">用Vue.js建立图片库很容易。已经有一些库可以用来制作一个好看的图库应用程序。使用Vue.js，构建图片库应用程序是一种令人愉快的体验。我们将使用Vue材料使应用程序看起来有吸引力，我们使用位于<a class="ae kz" href="https://pixabay.com/api/docs/" rel="noopener ugc nofollow" target="_blank">https://pixabay.com/api/docs/</a>的Pixabay API</p><p id="d701" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在我们的应用程序中，我们将提供图像和视频搜索页面，主页将有一个无限滚动的图像库，让用户查看来自Pixabay API的热门图像。</p><p id="7caf" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">首先，我们通过运行<code class="fe la lb lc ld b">npm i @vue/cli</code>来安装Vue CLI。然后我们通过运行<code class="fe la lb lc ld b">vue create pixabay-app</code>来创建项目。当提示选项时，我们选择自定义选项，并选择包括Babel、Vuex、Vue路由器和CSS预处理器。我们需要所有这些，因为我们正在构建一个在组件间共享状态的页面，CSS预处理器减少了CSS的重复。</p><p id="f303" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">接下来，我们必须安装一些我们的应用程序运行所需的库。运行<code class="fe la lb lc ld b">npm i axios querystring vue-material vee-validate vue-infinite-scroll</code>来安装我们需要的包。<code class="fe la lb lc ld b">axios</code>是我们的HTTP客户端，<code class="fe la lb lc ld b">querystring</code>是将对象转化为查询字符串的包，<code class="fe la lb lc ld b">vue-material</code>为我们的应用程序提供了具体的设计元素，使其看起来更有吸引力。<code class="fe la lb lc ld b">vee-validate</code>是一个表单验证库。<code class="fe la lb lc ld b">vue-infinite-scroll</code>是无限卷轴库。</p><p id="1f9d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在我们可以开始写代码了。我们从编写页面将使用的共享代码开始。在<code class="fe la lb lc ld b">components</code>文件夹中，我们创建一个名为<code class="fe la lb lc ld b">Results.vue</code>的文件，并添加以下内容:</p><pre class="le lf lg lh gt li ld lj lk aw ll bi"><span id="7f3e" class="lm ln it ld b gy lo lp l lq lr">&lt;template&gt;<br/>  &lt;div class="center"&gt;<br/>    &lt;div class="results"&gt;<br/>      &lt;md-card v-for="r in searchResults" :key="r.id"&gt;<br/>        &lt;md-card-media v-if="type == 'image'"&gt;<br/>          &lt;img :src="r.previewURL" class="image" /&gt;<br/>        &lt;/md-card-media&gt;<br/>        &lt;md-card-media v-if="type == 'video'"&gt;<br/>          &lt;video class="image"&gt;<br/>            &lt;source :src="r.videos.tiny.url" type="video/mp4" /&gt;<br/>          &lt;/video&gt;<br/>        &lt;/md-card-media&gt;<br/>      &lt;/md-card&gt;<br/>    &lt;/div&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="7b34" class="lm ln it ld b gy ls lp l lq lr">&lt;script&gt;<br/>export default {<br/>  name: "results",<br/>  props: {<br/>    type: String<br/>  },<br/>  computed: {<br/>    searchResults() {<br/>      return this.$store.state.searchResults;<br/>    }<br/>  },<br/>  data() {<br/>    return {};<br/>  }<br/>};<br/>&lt;/script&gt;</span><span id="6bf0" class="lm ln it ld b gy ls lp l lq lr">&lt;!-- Add "scoped" attribute to limit CSS to this component only --&gt;<br/>&lt;style scoped lang="scss"&gt;<br/>.md-card {<br/>  width: 30vw;<br/>  margin: 4px;<br/>  display: inline-block;<br/>  vertical-align: top;<br/>}<br/>&lt;/style&gt;</span></pre><p id="fd55" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在这个文件中，我们从Vuex存储中获取数据，然后将它们显示给用户。<code class="fe la lb lc ld b">this.$store</code>由Vuex注入，为状态提供<code class="fe la lb lc ld b">state</code>属性。搜索结果可以是图像或视频，所以我们允许使用一个<code class="fe la lb lc ld b">type</code>道具来区分结果的类型。状态在<code class="fe la lb lc ld b">computed</code>属性中，因此我们可以从状态中获取它。</p><p id="2b7d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">接下来，我们添加一个mixin用于发出请求。为此，我们添加一个<code class="fe la lb lc ld b">mixins</code>文件夹，添加一个名为<code class="fe la lb lc ld b">photosMixin.js</code>的文件，并用以下内容填充它:</p><pre class="le lf lg lh gt li ld lj lk aw ll bi"><span id="d36d" class="lm ln it ld b gy lo lp l lq lr">const axios = require('axios');<br/>const querystring = require('querystring');<br/>const apiUrl = '<a class="ae kz" href="https://pixabay.com/api'" rel="noopener ugc nofollow" target="_blank">https://pixabay.com/api'</a>;<br/>const apikey = 'Pixabay api key';</span><span id="681f" class="lm ln it ld b gy ls lp l lq lr">export const photosMixin = {<br/>    methods: {<br/>      getPhotos(page = 1) {<br/>            const params = {<br/>                page,<br/>                key: apikey,<br/>                per_page: 21<br/>            }<br/>            const queryString = querystring.stringify(params);<br/>            return axios.get(`${apiUrl}/?${queryString}`);<br/>        },</span><span id="19f7" class="lm ln it ld b gy ls lp l lq lr">      searchPhoto(data) {<br/>            let params = Object.assign({}, data);<br/>            params['key'] = apikey;<br/>            params['per_page'] = 21;<br/>            Object.keys(params).forEach(key =&gt; {<br/>                if (!params[key]) {<br/>                    delete params[key];<br/>                }<br/>            })<br/>            const queryString = querystring.stringify(params);<br/>            return axios.get(`${apiUrl}/?${queryString}`);<br/>        },</span><span id="7a41" class="lm ln it ld b gy ls lp l lq lr">      searchVideo(data) {<br/>            let params = Object.assign({}, data);<br/>            params['key'] = apikey;<br/>            params['per_page'] = 21;<br/>            Object.keys(params).forEach(key =&gt; {<br/>                if (!params[key]) {<br/>                    delete params[key];<br/>                }<br/>            })<br/>            const queryString = querystring.stringify(params);<br/>            return axios.get(`${apiUrl}/videos/?${queryString}`);<br/>        }<br/>    }<br/>}</span></pre><p id="a3d1" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这是我们从Pixabay API获得图像和视频结果的地方。我们用<code class="fe la lb lc ld b">querystring</code>包将搜索数据传递到查询字符串中。</p><p id="f489" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">助手代码完成后，我们可以开始构建一些页面了。我们首先在主页上工作，它将显示一个图像网格，用户可以向下滚动查看更多。我们在<code class="fe la lb lc ld b">views</code>文件夹中创建一个不存在的名为<code class="fe la lb lc ld b">Home.vue</code>的文件，并添加以下内容:</p><pre class="le lf lg lh gt li ld lj lk aw ll bi"><span id="e1c4" class="lm ln it ld b gy lo lp l lq lr">&lt;template&gt;<br/>  &lt;div class="home"&gt;<br/>    &lt;div class="center"&gt;<br/>      &lt;h1&gt;Home&lt;/h1&gt;<br/>      &lt;div<br/>        v-infinite-scroll="loadMore"<br/>        infinite-scroll-disabled="busy"<br/>        infinite-scroll-distance="10"<br/>      &gt;<br/>        &lt;md-card v-for="p in photos" :key="p.id"&gt;<br/>          &lt;md-card-media&gt;<br/>            &lt;img :src="p.previewURL" class="image" /&gt;<br/>          &lt;/md-card-media&gt;<br/>        &lt;/md-card&gt;<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="9219" class="lm ln it ld b gy ls lp l lq lr">&lt;script&gt;<br/>// @ is an alias to /src<br/>import Results from "@/components/Results.vue";<br/>import { photosMixin } from "@/mixins/photosMixin";</span><span id="4742" class="lm ln it ld b gy ls lp l lq lr">export default {<br/>  name: "home",<br/>  components: {<br/>    Results<br/>  },<br/>  data() {<br/>    return {<br/>      photos: [],<br/>      page: 1<br/>    };<br/>  },<br/>  mixins: [photosMixin],<br/>  beforeMount() {<br/>    this.getAllPhotos();<br/>  },<br/>  methods: {<br/>    async getAllPhotos() {<br/>      const response = await this.getPhotos();<br/>      this.photos = response.data.hits;<br/>    },</span><span id="71f0" class="lm ln it ld b gy ls lp l lq lr">    async loadMore() {<br/>      this.page++;<br/>      const response = await this.getPhotos(this.page);<br/>      this.photos = this.photos.concat(response.data.hits);<br/>    }<br/>  }<br/>};<br/>&lt;/script&gt;</span><span id="7ee4" class="lm ln it ld b gy ls lp l lq lr">&lt;style lang="scss" scoped&gt;<br/>.md-card {<br/>  width: 30vw;<br/>  margin: 4px;<br/>  display: inline-block;<br/>  vertical-align: top;<br/>}</span><span id="a509" class="lm ln it ld b gy ls lp l lq lr">.home {<br/>  margin: 0 auto;<br/>}<br/>&lt;/style&gt;</span></pre><p id="351d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><code class="fe la lb lc ld b">v-infinite-scroll</code>道具是由<code class="fe la lb lc ld b">vue-infinite-scroll</code>提供的事件处理程序，让我们在用户向下滚动时做一些事情。在这种情况下，我们调用<code class="fe la lb lc ld b">loadMore</code>函数从下一页加载数据，并将其添加到<code class="fe la lb lc ld b">this.photos</code>数组中。我们在卡片视图中显示图像。<code class="fe la lb lc ld b">infinite-scroll-distance=”10"</code>意味着当用户滚动到当前页面的90%时，我们运行<code class="fe la lb lc ld b">v-infinite-scroll</code>中定义的处理程序。</p><p id="d3dc" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">接下来，我们创建一个图像搜索页面。在<code class="fe la lb lc ld b">views</code>文件夹中，我们创建一个名为<code class="fe la lb lc ld b">ImageSearch.vue</code>的文件，并添加以下内容:</p><pre class="le lf lg lh gt li ld lj lk aw ll bi"><span id="e4b7" class="lm ln it ld b gy lo lp l lq lr">&lt;template&gt;<br/>  &lt;div class="imagesearch"&gt;<br/>    &lt;div class="center"&gt;<br/>      &lt;h1&gt;Image Search&lt;/h1&gt;<br/>    &lt;/div&gt;<br/>    &lt;form <a class="ae kz" href="http://twitter.com/submit" rel="noopener ugc nofollow" target="_blank">@submit</a>="search" novalidate&gt;<br/>      &lt;md-field :class="{ 'md-invalid': errors.has('q') }"&gt;<br/>        &lt;label for="q"&gt;Keyword&lt;/label&gt;<br/>        &lt;md-input type="text" name="q" v-model="searchData.q" v-validate="'required'"&gt;&lt;/md-input&gt;<br/>        &lt;span class="md-error" v-if="errors.has('q')"&gt;{{errors.first('q')}}&lt;/span&gt;<br/>      &lt;/md-field&gt;</span><span id="6276" class="lm ln it ld b gy ls lp l lq lr">&lt;md-field :class="{ 'md-invalid': errors.has('minWidth') }"&gt;<br/>        &lt;label for="minWidth"&gt;Min Width&lt;/label&gt;<br/>        &lt;md-input<br/>          type="text"<br/>          name="minWidth"<br/>          v-model="searchData.min_width"<br/>          v-validate="'numeric|min_value:0'"<br/>        &gt;&lt;/md-input&gt;<br/>        &lt;span class="md-error" v-if="errors.has('minWidth')"&gt;{{errors.first('minWidth')}}&lt;/span&gt;<br/>      &lt;/md-field&gt;</span><span id="3409" class="lm ln it ld b gy ls lp l lq lr">&lt;md-field :class="{ 'md-invalid': errors.has('minHeight') }"&gt;<br/>        &lt;label for="minHeight"&gt;Min Height&lt;/label&gt;<br/>        &lt;md-input<br/>          type="text"<br/>          name="minHeight"<br/>          v-model="searchData.min_height"<br/>          v-validate="'numeric|min_value:0'"<br/>        &gt;&lt;/md-input&gt;<br/>        &lt;span class="md-error" v-if="errors.has('minHeight')"&gt;{{errors.first('minHeight')}}&lt;/span&gt;<br/>      &lt;/md-field&gt;</span><span id="7696" class="lm ln it ld b gy ls lp l lq lr">&lt;md-field&gt;<br/>        &lt;label for="movie"&gt;Colors&lt;/label&gt;<br/>        &lt;md-select v-model="searchData.colors" name="colors"&gt;<br/>          &lt;md-option :value="c" v-for="c in colorChoices" :key="c"&gt;{{c}}&lt;/md-option&gt;<br/>        &lt;/md-select&gt;<br/>      &lt;/md-field&gt;</span><span id="ced2" class="lm ln it ld b gy ls lp l lq lr">&lt;md-button class="md-raised" type="submit"&gt;Search&lt;/md-button&gt;<br/>    &lt;/form&gt;<br/>    &lt;Results type='image' /&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="bc1f" class="lm ln it ld b gy ls lp l lq lr">&lt;script&gt;<br/>// @ is an alias to /src<br/>import Results from "@/components/Results.vue";<br/>import { photosMixin } from "@/mixins/photosMixin";</span><span id="a639" class="lm ln it ld b gy ls lp l lq lr">export default {<br/>  name: "home",<br/>  components: {<br/>    Results<br/>  },<br/>  data() {<br/>    return {<br/>      photos: [],<br/>      searchData: {},<br/>      colorChoices: [<br/>        "grayscale",<br/>        "transparent",<br/>        "red",<br/>        "orange",<br/>        "yellow",<br/>        "green",<br/>        "turquoise",<br/>        "blue",<br/>        "lilac",<br/>        "pink",<br/>        "white",<br/>        "gray",<br/>        "black",<br/>        "brown"<br/>      ]<br/>    };<br/>  },<br/>  mixins: [photosMixin],<br/>  beforeMount() {<br/>    this.$store.commit("setSearchResults", []);<br/>  },<br/>  computed: {<br/>    isFormDirty() {<br/>      return Object.keys(this.fields).some(key =&gt; this.fields[key].dirty);<br/>    }<br/>  },<br/>  methods: {<br/>    async search(evt) {<br/>      evt.preventDefault();<br/>      if (!this.isFormDirty || this.errors.items.length &gt; 0) {<br/>        return;<br/>      }<br/>      const response = await this.searchPhoto(this.searchData);<br/>      this.photos = response.data.hits;<br/>      this.$store.commit("setSearchResults", response.data.hits);<br/>    }<br/>  }<br/>};<br/>&lt;/script&gt;</span></pre><p id="a78f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">该页面为用户提供了一个表单，用于输入一些搜索参数，如关键字、图像尺寸和颜色。我们用<code class="fe la lb lc ld b">vee-validate</code>包提供的<code class="fe la lb lc ld b">v-validate</code>属性检查每个字段的正确数据。所以对于<code class="fe la lb lc ld b">minWidth</code>和<code class="fe la lb lc ld b">minHeight</code>，我们确保它们是非负数。如果不是，我们会显示一个错误。</p><p id="6827" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果表单数据通过<code class="fe la lb lc ld b">vee-validate</code>提供的<code class="fe la lb lc ld b">this.errors.items.length &gt; 0</code>检查无效，我们也不允许提交。如果一切都有效，我们调用<code class="fe la lb lc ld b">photoMixin</code>提供的<code class="fe la lb lc ld b">this.searchPhotos</code>函数，并在商店返回时用商店提供的<code class="fe la lb lc ld b">this.$store.commit</code>函数设置结果。我们将<code class="fe la lb lc ld b">image</code>传递给结果的<code class="fe la lb lc ld b">type</code>属性，以便显示图像结果。</p><p id="a053" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">类似地，对于视频搜索页面，我们在<code class="fe la lb lc ld b">views</code>文件夹中创建一个名为<code class="fe la lb lc ld b">VideoSearch.vue</code>的新文件。我们提出以下内容:</p><pre class="le lf lg lh gt li ld lj lk aw ll bi"><span id="e556" class="lm ln it ld b gy lo lp l lq lr">&lt;template&gt;<br/>  &lt;div class="videosearch"&gt;<br/>    &lt;div class="center"&gt;<br/>      &lt;h1&gt;Video Search&lt;/h1&gt;<br/>    &lt;/div&gt;<br/>    &lt;form <a class="ae kz" href="http://twitter.com/submit" rel="noopener ugc nofollow" target="_blank">@submit</a>="search" novalidate&gt;<br/>      &lt;md-field :class="{ 'md-invalid': errors.has('q') }"&gt;<br/>        &lt;label for="q"&gt;Keyword&lt;/label&gt;<br/>        &lt;md-input type="text" name="q" v-model="searchData.q" v-validate="'required'"&gt;&lt;/md-input&gt;<br/>        &lt;span class="md-error" v-if="errors.has('q')"&gt;{{errors.first('q')}}&lt;/span&gt;<br/>      &lt;/md-field&gt;</span><span id="e71a" class="lm ln it ld b gy ls lp l lq lr">&lt;md-field :class="{ 'md-invalid': errors.has('minWidth') }"&gt;<br/>        &lt;label for="minWidth"&gt;Min Width&lt;/label&gt;<br/>        &lt;md-input<br/>          type="text"<br/>          name="minWidth"<br/>          v-model="searchData.min_width"<br/>          v-validate="'numeric|min_value:0'"<br/>        &gt;&lt;/md-input&gt;<br/>        &lt;span class="md-error" v-if="errors.has('minWidth')"&gt;{{errors.first('minWidth')}}&lt;/span&gt;<br/>      &lt;/md-field&gt;</span><span id="745f" class="lm ln it ld b gy ls lp l lq lr">&lt;md-field :class="{ 'md-invalid': errors.has('minHeight') }"&gt;<br/>        &lt;label for="minHeight"&gt;Min Height&lt;/label&gt;<br/>        &lt;md-input<br/>          type="text"<br/>          name="minHeight"<br/>          v-model="searchData.min_height"<br/>          v-validate="'numeric|min_value:0'"<br/>        &gt;&lt;/md-input&gt;<br/>        &lt;span class="md-error" v-if="errors.has('minHeight')"&gt;{{errors.first('minHeight')}}&lt;/span&gt;<br/>      &lt;/md-field&gt;</span><span id="4d13" class="lm ln it ld b gy ls lp l lq lr">&lt;md-field&gt;<br/>        &lt;label for="categories"&gt;Categories&lt;/label&gt;<br/>        &lt;md-select v-model="searchData.category" name="categories"&gt;<br/>          &lt;md-option :value="c" v-for="c in categories" :key="c"&gt;{{c}}&lt;/md-option&gt;<br/>        &lt;/md-select&gt;<br/>      &lt;/md-field&gt;</span><span id="00fc" class="lm ln it ld b gy ls lp l lq lr">&lt;md-field&gt;<br/>        &lt;label for="type"&gt;Type&lt;/label&gt;<br/>        &lt;md-select v-model="searchData.video_type" name="type"&gt;<br/>          &lt;md-option :value="v" v-for="v in videoTypes" :key="v"&gt;{{v}}&lt;/md-option&gt;<br/>        &lt;/md-select&gt;<br/>      &lt;/md-field&gt;</span><span id="7fcd" class="lm ln it ld b gy ls lp l lq lr">&lt;md-button class="md-raised" type="submit"&gt;Search&lt;/md-button&gt;<br/>    &lt;/form&gt;<br/>    &lt;Results type="video" /&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="46cf" class="lm ln it ld b gy ls lp l lq lr">&lt;script&gt;<br/>import Results from "@/components/Results.vue";<br/>import { photosMixin } from "@/mixins/photosMixin";</span><span id="a184" class="lm ln it ld b gy ls lp l lq lr">export default {<br/>  name: "home",<br/>  components: {<br/>    Results<br/>  },<br/>  data() {<br/>    return {<br/>      photos: [],<br/>      searchData: {},<br/>      videoTypes: ["all", "film", "animation"],<br/>      categories: `<br/>       fashion, nature, backgrounds,<br/>       science, education, people, feelings,<br/>       religion, health, places, animals, industry,<br/>       food, computer, sports, transportation,<br/>       travel, buildings, business, music<br/>      `<br/>        .replace(/ /g, "")<br/>        .split(",")<br/>    };<br/>  },<br/>  mixins: [photosMixin],<br/>  beforeMount() {<br/>    this.$store.commit("setSearchResults", []);<br/>  },<br/>  computed: {<br/>    isFormDirty() {<br/>      return Object.keys(this.fields).some(key =&gt; this.fields[key].dirty);<br/>    }<br/>  },<br/>  methods: {<br/>    async search(evt) {<br/>      evt.preventDefault();<br/>      if (!this.isFormDirty || this.errors.items.length &gt; 0) {<br/>        return;<br/>      }<br/>      const response = await this.searchVideo(this.searchData);<br/>      this.photos = response.data.hits;<br/>      this.$store.commit("setSearchResults", response.data.hits);<br/>    }<br/>  }<br/>};<br/>&lt;/script&gt;</span></pre><p id="8d19" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们允许用户通过关键词、类型、维度和类别进行搜索。表单验证和搜索的逻辑与图像搜索页面类似，只是我们将<code class="fe la lb lc ld b">video</code>传递给结果的<code class="fe la lb lc ld b">type</code>属性，以便显示图像结果。</p><p id="65dc" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在<code class="fe la lb lc ld b">App.vue</code>中，我们添加了顶部栏和左侧导航菜单。我们用以下代码替换现有代码:</p><pre class="le lf lg lh gt li ld lj lk aw ll bi"><span id="0103" class="lm ln it ld b gy lo lp l lq lr">&lt;template&gt;<br/>  &lt;div id="app"&gt;<br/>    &lt;md-toolbar&gt;<br/>      &lt;md-button class="md-icon-button" <a class="ae kz" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>="showNavigation = true"&gt;<br/>        &lt;md-icon&gt;menu&lt;/md-icon&gt;<br/>      &lt;/md-button&gt;<br/>      &lt;h3 class="md-title"&gt;Pixabay App&lt;/h3&gt;<br/>    &lt;/md-toolbar&gt;<br/>    &lt;md-drawer :md-active.sync="showNavigation" md-swipeable&gt;<br/>      &lt;md-toolbar class="md-transparent" md-elevation="0"&gt;<br/>        &lt;span class="md-title"&gt;Pixabay App&lt;/span&gt;<br/>      &lt;/md-toolbar&gt;</span><span id="1c8a" class="lm ln it ld b gy ls lp l lq lr">&lt;md-list&gt;<br/>        &lt;md-list-item&gt;<br/>          &lt;router-link to="/"&gt;<br/>            &lt;span class="md-list-item-text"&gt;Home&lt;/span&gt;<br/>          &lt;/router-link&gt;<br/>        &lt;/md-list-item&gt;</span><span id="1c93" class="lm ln it ld b gy ls lp l lq lr">&lt;md-list-item&gt;<br/>          &lt;router-link to="/imagesearch"&gt;<br/>            &lt;span class="md-list-item-text"&gt;Image Search&lt;/span&gt;<br/>          &lt;/router-link&gt;<br/>        &lt;/md-list-item&gt;</span><span id="9508" class="lm ln it ld b gy ls lp l lq lr">&lt;md-list-item&gt;<br/>          &lt;router-link to="/videosearch"&gt;<br/>            &lt;span class="md-list-item-text"&gt;Video Search&lt;/span&gt;<br/>          &lt;/router-link&gt;<br/>        &lt;/md-list-item&gt;<br/>      &lt;/md-list&gt;<br/>    &lt;/md-drawer&gt;</span><span id="673f" class="lm ln it ld b gy ls lp l lq lr">&lt;router-view /&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="a826" class="lm ln it ld b gy ls lp l lq lr">&lt;script&gt;<br/>export default {<br/>  name: "app",<br/>  data: () =&gt; {<br/>    return {<br/>      showNavigation: false<br/>    };<br/>  }<br/>};<br/>&lt;/script&gt;</span><span id="3a6b" class="lm ln it ld b gy ls lp l lq lr">&lt;style&gt;<br/>.center {<br/>  text-align: center;<br/>}</span><span id="e18f" class="lm ln it ld b gy ls lp l lq lr">form {<br/>  width: 95vw;<br/>  margin: 0 auto;<br/>}</span><span id="bb1b" class="lm ln it ld b gy ls lp l lq lr">.md-toolbar.md-theme-default {<br/>  background: #009688 !important;<br/>  height: 60px;<br/>}</span><span id="6be6" class="lm ln it ld b gy ls lp l lq lr">.md-title,<br/>.md-toolbar.md-theme-default .md-icon {<br/>  color: #fff !important;<br/>}<br/>&lt;/style&gt;</span></pre><p id="5978" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><code class="fe la lb lc ld b">md-list</code>包含到我们页面的链接，我们有一个<code class="fe la lb lc ld b">showNavigation</code>标志来存储菜单状态并让我们切换菜单。</p><p id="1bfe" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在<code class="fe la lb lc ld b">main.js</code>中，我们包括了我们在该应用中使用的库:</p><pre class="le lf lg lh gt li ld lj lk aw ll bi"><span id="2548" class="lm ln it ld b gy lo lp l lq lr">import Vue from 'vue'<br/>import App from './App.vue'<br/>import router from './router'<br/>import store from './store'<br/>import VueMaterial from 'vue-material';<br/>import VeeValidate from 'vee-validate';<br/>import 'vue-material/dist/vue-material.min.css'<br/>import 'vue-material/dist/theme/default.css'<br/>import infiniteScroll from 'vue-infinite-scroll'</span><span id="ce1f" class="lm ln it ld b gy ls lp l lq lr">Vue.use(infiniteScroll)<br/>Vue.use(VueMaterial);<br/>Vue.use(VeeValidate);<br/>Vue.config.productionTip = false</span><span id="223d" class="lm ln it ld b gy ls lp l lq lr">new Vue({<br/>  router,<br/>  store,<br/>  render: h =&gt; h(App)<br/>}).$mount('#app')</span></pre><p id="d960" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在<code class="fe la lb lc ld b">router.js</code>中，我们添加了我们的路线，这样当用户键入网址或点击菜单上的链接时，就可以看到这个应用程序:</p><pre class="le lf lg lh gt li ld lj lk aw ll bi"><span id="b9df" class="lm ln it ld b gy lo lp l lq lr">import Vue from 'vue'<br/>import Router from 'vue-router'<br/>import Home from './views/Home.vue';<br/>import Search from './views/Search.vue';</span><span id="e9db" class="lm ln it ld b gy ls lp l lq lr">Vue.use(Router)</span><span id="a0a9" class="lm ln it ld b gy ls lp l lq lr">export default new Router({<br/>  mode: 'history',<br/>  base: process.env.BASE_URL,<br/>  routes: [<br/>    {<br/>      path: '/',<br/>      name: 'home',<br/>      component: Home<br/>    },<br/>    {<br/>      path: '/search',<br/>      name: 'search',<br/>      component: Search<br/>    }<br/>  ]<br/>})</span></pre><p id="195d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在<code class="fe la lb lc ld b">store.js</code>中，我们输入:</p><pre class="le lf lg lh gt li ld lj lk aw ll bi"><span id="675d" class="lm ln it ld b gy lo lp l lq lr">import Vue from 'vue'<br/>import Vuex from 'vuex'</span><span id="2b8e" class="lm ln it ld b gy ls lp l lq lr">Vue.use(Vuex)</span><span id="b799" class="lm ln it ld b gy ls lp l lq lr">export default new Vuex.Store({<br/>  state: {<br/>    searchResults: []<br/>  },<br/>  mutations: {<br/>    setSearchResults(state, payload) {<br/>      state.searchResults = payload;<br/>    }<br/>  },<br/>  actions: {</span><span id="da16" class="lm ln it ld b gy ls lp l lq lr">  }<br/>})</span></pre><p id="b08b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这允许从页面设置结果并显示在<code class="fe la lb lc ld b">Results</code>组件中。<code class="fe la lb lc ld b">this.$store.commit</code>函数设置数据，<code class="fe la lb lc ld b">this.$store.state</code>属性检索状态。</p><p id="9ff3" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">当我们运行<code class="fe la lb lc ld b">npm run serve</code>时，我们得到:</p><figure class="le lf lg lh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/775e303fbf10d6207f45d742389b37a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xJ-yBKJz83eNhiPpSjOCnw.png"/></div></div></figure><figure class="le lf lg lh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/c24463d2d0399905fddf11bb0736b664.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bDYKxd4IpehVqfTZamVMHw.png"/></div></div></figure><figure class="le lf lg lh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi lt"><img src="../Images/3b803e1de4c6f9f9dd0f1738de6078ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kyr3FC_D1BDb1CnVZbXnDg.png"/></div></div></figure></div></div>    
</body>
</html>