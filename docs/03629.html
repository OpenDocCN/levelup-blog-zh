<html>
<head>
<title>How to Do Common Date Tasks with JavaScript — Tomorrow, Yesterday, and Sorting</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用JavaScript完成常见的日期任务——明天、昨天和排序</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-do-common-date-tasks-with-javascript-tomorrow-yesterday-and-sorting-b29686c9eb46?source=collection_archive---------14-----------------------#2020-05-19">https://levelup.gitconnected.com/how-to-do-common-date-tasks-with-javascript-tomorrow-yesterday-and-sorting-b29686c9eb46?source=collection_archive---------14-----------------------#2020-05-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/9de74d5ef84abaf4fd7df6d91e2232ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*QcbfFn6UDmKRbem_"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">照片由<a class="ae kf" href="https://unsplash.com/@brookecagle?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">布鲁克·卡吉尔</a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="bb96" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在JavaScript中，<code class="fe le lf lg lh b">Date</code>构造函数为我们提供了一些日期和时间操作功能。但是，很多操作不能只通过一次方法调用来完成。</p><p id="0c65" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本文中，我们将了解如何从JavaScript日期中获取月份名称，获取昨天的日期，明天的日期，按日期对数组进行排序。</p><h1 id="ed04" class="li lj it bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">从JavaScript日期中获取月份名称</h1><p id="1803" class="pw-post-body-paragraph kg kh it ki b kj mg kl km kn mh kp kq kr mi kt ku kv mj kx ky kz mk lb lc ld im bi translated">我们可以用<code class="fe le lf lg lh b">Date</code>实例的<code class="fe le lf lg lh b">toLocaleString</code>方法从<code class="fe le lf lg lh b">Date</code>对象中获取月份名称。</p><p id="dfbe" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以编写以下代码来获取月份名称，如下所示:</p><pre class="ml mm mn mo gt mp lh mq mr aw ms bi"><span id="b913" class="mt lj it lh b gy mu mv l mw mx">const date = new Date(2020, 0, 1);<br/>const month = date.toLocaleString('default', {<br/>  month: 'short'<br/>})</span></pre><p id="9231" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在上面的代码中，我们创建了<code class="fe le lf lg lh b">Date</code>实例。然后我们用<code class="fe le lf lg lh b">'default'</code>作为参数在上面调用<code class="fe le lf lg lh b">toLocaleString</code>。此参数是区域设置。<code class="fe le lf lg lh b">'default'</code>表示您的本地操作系统设置的语言环境。</p><p id="1876" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们传入的第二个参数是一个带有想要传入的选项的对象。在这种情况下，因为我们想要获得月份名称，所以我们添加了值为<code class="fe le lf lg lh b">'short'</code>的<code class="fe le lf lg lh b">month</code>属性来获得月份的缩写名称。</p><p id="aa25" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">所以<code class="fe le lf lg lh b">month</code>的值就是<code class="fe le lf lg lh b">'Jan’</code>。</p><p id="9c43" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们也可以通过将<code class="fe le lf lg lh b">'short'</code>改为<code class="fe le lf lg lh b">'long'</code>获得一个长月份名称，如下所示:</p><pre class="ml mm mn mo gt mp lh mq mr aw ms bi"><span id="2013" class="mt lj it lh b gy mu mv l mw mx">const date = new Date(2020, 0, 1);<br/>const month = date.toLocaleString('default', {<br/>  month: 'long'<br/>})</span></pre><p id="b7ed" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们得到<code class="fe le lf lg lh b">month</code>的值是<code class="fe le lf lg lh b">'January'</code>。</p><h1 id="690d" class="li lj it bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">获取昨天的日期</h1><p id="9c04" class="pw-post-body-paragraph kg kh it ki b kj mg kl km kn mh kp kq kr mi kt ku kv mj kx ky kz mk lb lc ld im bi translated">我们可以通过获取今天的日期来获取昨天的日期，然后在那个日期对象上调用<code class="fe le lf lg lh b">getDate</code>，并将其减去1，然后将整个表达式传递给<code class="fe le lf lg lh b">setDate</code>。</p><p id="52f2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为此，我们可以编写以下代码:</p><pre class="ml mm mn mo gt mp lh mq mr aw ms bi"><span id="c418" class="mt lj it lh b gy mu mv l mw mx">const today = new Date();<br/>const yesterday = new Date(today);<br/>yesterday.setDate(yesterday.getDate() - 1)</span></pre><p id="1159" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在上面的代码中，我们在第一行创建了<code class="fe le lf lg lh b">today</code>的日期。然后我们用<code class="fe le lf lg lh b">Date</code>构造函数复制<code class="fe le lf lg lh b">today</code>，为<code class="fe le lf lg lh b">yesterday</code>创建另一个对象。</p><p id="8bd1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们通过传入<code class="fe le lf lg lh b">yesterday.getDate() — 1</code>来调用<code class="fe le lf lg lh b">yesterday</code>上的<code class="fe le lf lg lh b">setDate</code>,用1天减去<code class="fe le lf lg lh b">yesterday</code>,得到昨天的日期。</p><p id="f52d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后，当我们记录两个日期对象的值时，如下所示:</p><pre class="ml mm mn mo gt mp lh mq mr aw ms bi"><span id="5ab7" class="mt lj it lh b gy mu mv l mw mx">console.log(today.toDateString())<br/>console.log(yesterday.toDateString())</span></pre><p id="1e38" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们得到<code class="fe le lf lg lh b">yesterday</code>比<code class="fe le lf lg lh b">today</code>晚一天。</p><h1 id="c58a" class="li lj it bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">获取明天的日期</h1><p id="ea47" class="pw-post-body-paragraph kg kh it ki b kj mg kl km kn mh kp kq kr mi kt ku kv mj kx ky kz mk lb lc ld im bi translated">类似于得到昨天的日期，我们可以通过做类似的事情得到明天的日期。</p><p id="079e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以这样写:</p><pre class="ml mm mn mo gt mp lh mq mr aw ms bi"><span id="0b2e" class="mt lj it lh b gy mu mv l mw mx">const today = new Date();<br/>const tomorrow = new Date(today);<br/>tomorrow.setDate(tomorrow.getDate() + 1)</span></pre><p id="5a69" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">得到昨天的日期和明天的日期的唯一区别是我们用<code class="fe le lf lg lh b">tomorrow.getDate() + 1</code>而不是<code class="fe le lf lg lh b">yesterday.getDate() — 1</code>来加一天而不是减1。</p><p id="2b71" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">那么当我们检查如下值时:</p><pre class="ml mm mn mo gt mp lh mq mr aw ms bi"><span id="6664" class="mt lj it lh b gy mu mv l mw mx">console.log(today.toDateString())<br/>console.log(tomorrow.toDateString())</span></pre><p id="94bc" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们得到<code class="fe le lf lg lh b">tomorrow </code>比<code class="fe le lf lg lh b">today</code>早1天。</p><h1 id="2728" class="li lj it bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">在JavaScript中按日期值对数组排序</h1><p id="9c5b" class="pw-post-body-paragraph kg kh it ki b kj mg kl km kn mh kp kq kr mi kt ku kv mj kx ky kz mk lb lc ld im bi translated">我们可以使用数组实例的<code class="fe le lf lg lh b">sort</code>方法按照日期对数组进行排序。<code class="fe le lf lg lh b">sort</code>方法接受一个回调，该回调接受两个参数和要比较的数组项。</p><p id="6f2d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以通过将两个<code class="fe le lf lg lh b">Date</code>对象转换成UNIX时间戳来比较它们，时间戳是整数，然后我们可以减去它们来比较它们。</p><p id="58b7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果差值为负，则第一个条目晚于第二个条目。否则，第二个条目晚于第一个条目。</p><p id="86e8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，如果我们有以下数组:</p><pre class="ml mm mn mo gt mp lh mq mr aw ms bi"><span id="759e" class="mt lj it lh b gy mu mv l mw mx">const tasks = [{<br/>    name: 'eat',<br/>    date: new Date(2020, 0, 1)<br/>  },<br/>  {<br/>    name: 'drink',<br/>    date: new Date(2020, 0, 2)<br/>  },<br/>  {<br/>    name: 'sleep',<br/>    date: new Date(2019, 11, 31)<br/>  },<br/>]</span></pre><p id="19c6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们可以通过写下升序日期按数组排序:</p><pre class="ml mm mn mo gt mp lh mq mr aw ms bi"><span id="899a" class="mt lj it lh b gy mu mv l mw mx">const sortedTasks = tasks.sort((a, b) =&gt; +a.date - +b.date);</span></pre><p id="a17d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在上面的代码中，我们有一个回调函数，它用一元运算符<code class="fe le lf lg lh b">+</code>将两个条目的<code class="fe le lf lg lh b">date</code>属性转换成UNIX时间戳。然后我们减去两个时间戳，得到哪个先出现。</p><p id="9dad" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果差值为负，则第一个条目在第二个条目之前。否则，第二个在第一个之前。</p><p id="e02a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一旦我们调用了<code class="fe le lf lg lh b">sort</code>，我们就会得到一个新的排序后的数组。那么<code class="fe le lf lg lh b">sortedTasks</code>应该是:</p><pre class="ml mm mn mo gt mp lh mq mr aw ms bi"><span id="e216" class="mt lj it lh b gy mu mv l mw mx">[<br/>  {<br/>    "name": "sleep",<br/>    "date": "2019-12-31T08:00:00.000Z"<br/>  },<br/>  {<br/>    "name": "eat",<br/>    "date": "2020-01-01T08:00:00.000Z"<br/>  },<br/>  {<br/>    "name": "drink",<br/>    "date": "2020-01-02T08:00:00.000Z"<br/>  }<br/>]</span></pre><p id="f70a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">正如我们所见，日期是按升序排列的。如果我们想按日期降序排序，我们可以写:</p><pre class="ml mm mn mo gt mp lh mq mr aw ms bi"><span id="d25b" class="mt lj it lh b gy mu mv l mw mx">const sortedTasks = tasks.sort((a, b) =&gt; +b.date - +a.date);</span></pre><p id="bc8c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们只是将<code class="fe le lf lg lh b">b</code>和<code class="fe le lf lg lh b">a</code>翻转过来，那么<code class="fe le lf lg lh b">sortedTasks</code>应该是:</p><pre class="ml mm mn mo gt mp lh mq mr aw ms bi"><span id="c120" class="mt lj it lh b gy mu mv l mw mx">[<br/>  {<br/>    "name": "drink",<br/>    "date": "2020-01-02T08:00:00.000Z"<br/>  },<br/>  {<br/>    "name": "eat",<br/>    "date": "2020-01-01T08:00:00.000Z"<br/>  },<br/>  {<br/>    "name": "sleep",<br/>    "date": "2019-12-31T08:00:00.000Z"<br/>  }<br/>]</span></pre><figure class="ml mm mn mo gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi my"><img src="../Images/7fd8b98b6e37b9e0d6ba11034b7f0615.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*DXDbIri3eTi6gO5v"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">照片由<a class="ae kf" href="https://unsplash.com/@intheview?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">苏珊·莫尔</a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><h1 id="ba84" class="li lj it bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">结论</h1><p id="6ba7" class="pw-post-body-paragraph kg kh it ki b kj mg kl km kn mh kp kq kr mi kt ku kv mj kx ky kz mk lb lc ld im bi translated">我们可以使用<code class="fe le lf lg lh b">toLocaleString</code>方法获得日期的月份名称。</p><p id="3a42" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果想得到昨天的日期，可以调用<code class="fe le lf lg lh b">getDate</code>然后减1。同样，如果我们想得到明天的日期，我们可以调用<code class="fe le lf lg lh b">getDate</code>然后加1。</p><p id="d983" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最后，为了按日期排序，我们可以将日期转换成时间戳，然后在数组实例的<code class="fe le lf lg lh b">sort</code>方法的回调中减去时间戳。</p></div></div>    
</body>
</html>