<html>
<head>
<title>HTML/CSS “Analog Clock” With Minimal Javascript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">HTML/CSS“模拟时钟”,使用最少的Javascript</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/html-css-analog-clock-with-minimal-javascript-9dcf9a16e079?source=collection_archive---------2-----------------------#2020-11-25">https://levelup.gitconnected.com/html-css-analog-clock-with-minimal-javascript-9dcf9a16e079?source=collection_archive---------2-----------------------#2020-11-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/0221c2aa04febcdf2a962f3b47fb8a08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R1M4dLwHaZcibw9n_k2xEA.png"/></div></div></figure><p id="bb99" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在DigitalPoint上，有人问是否可以只用HTML和CSS制作一个钟面。虽然我在一次路过式的回答中尽可能干净利落地回答了他们的问题，但我认为一篇更精致、更健壮的文章会是一篇好文章。</p><p id="50e8" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我经常看到的一件事是，有多少实现倾向于使用大量的JavaScript，而没有脚本化的优雅降级计划。仿佛<noscript>是一本晦涩难懂的巨著。任何脚本最需要做的<em class="la">(除非使用画布)</em>就是将元素插入钟面，然后操纵它们旋转。</noscript></p><p id="3ee2" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">然而最大的缺陷是人们总是在最不容易接近的度量标准——像素上工作。这意味着它不能像EM那样根据用户偏好进行缩放，而且它也很难调整大小。如果我们在EM中做所有的事情，我们只需要在最外层的容器中使用font-size就可以像这样调整元素的大小！</p><p id="3423" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">HTML和CSS本身可以创造奇迹，但是也要小心，不要在标记中放入“仅脚本化”的元素，因为它们会使屏幕阅读器、盲文阅读器等用户感到困惑。</p><h1 id="c9ea" class="lb lc it bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">基本标记</h1><p id="6c99" class="pw-post-body-paragraph kb kc it kd b ke lz kg kh ki ma kk kl km mb ko kp kq mc ks kt ku md kw kx ky im bi translated">即使我们要在最终版本的脚本中生成内部标记，先编写一个标记元素的基本示例也会有所帮助，这样我们就可以确保所有的事情都在一行中。</p><p id="dab0" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">使用生成的内容，我们可以插入我们的各种片段，但是我们仍然需要在标记中加入大量额外的容器来挂钩我们的before:after to。</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="247e" class="mn lc it mj b gy mo mp l mq mr">&lt;div id="clock"&gt; &lt;!-- 12 and 6 --&gt;<br/>  &lt;b&gt;&lt;/b&gt;       &lt;!-- 3 and 9 --&gt;<br/>  &lt;span&gt;&lt;/span&gt; &lt;!-- 30deg 60deg 210deg 240deg markers --&gt;<br/>  &lt;span&gt;&lt;/span&gt; &lt;!-- 120deg 150deg 300deg 330deg markers --&gt;<br/>  &lt;i&gt;&lt;/i&gt;       &lt;!-- hour hand --&gt;<br/>  &lt;i&gt;&lt;/i&gt;       &lt;!-- minute hand --&gt;<br/>  &lt;i&gt;&lt;/i&gt;       &lt;!-- second hand --&gt;<br/>&lt;!-- .clockFace --&gt;&lt;/div&gt;</span></pre><h1 id="35b5" class="lb lc it bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">样式表</h1><p id="d901" class="pw-post-body-paragraph kb kc it kd b ke lz kg kh ki ma kk kl km mb ko kp kq mc ks kt ku md kw kx ky im bi translated">首先，让我们用一个漂亮的盒子阴影生成的边界来设计外部容器的样式。</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="83e5" class="mn lc it mj b gy mo mp l mq mr">#clock {<br/>  position:relative;<br/>  width:10em;<br/>  height:10em;<br/>  line-height:1.5em;<br/>  margin:1em auto;<br/>  border:0.0625em solid #444;<br/>  border-radius:50%;<br/>  box-shadow:<br/>    inset 0.125em 0.25em 0.5em #0005,<br/>    -0.25em -0.5em 0.5em #FFFC,<br/>    0 0 0.0625em 0.5em #777,<br/>    0 0 0.0625em 0.5625em #000,<br/>    0.125em 0.25em 0.5em 0.5em #0004;<br/>}</span></pre><figure class="me mf mg mh gt ju gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/86438fe3335209f676257694d7729605.png" data-original-src="https://miro.medium.com/v2/resize:fit:890/format:webp/1*nKWs5qEe0K64U93X4zO1YQ.png"/></div></figure><p id="b664" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">再次注意，大部分测量单位都是EM，这样可以方便地调整时钟。你想让它变大或变小，只需改变#clock上的字体大小，里面的一切都会随之改变。这也意味着我们不必像做“左:50%”那样玩“百分比游戏”；最高:50%；”+负边距技巧。</p><p id="43d5" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">行高将与我们在数字上的固定宽度相同，以方便和一致的对齐。</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="3ace" class="mn lc it mj b gy mo mp l mq mr">#clock *,<br/>#clock *:before,<br/>#clock *:after {<br/>  box-sizing:border-box;<br/>  background-clip:padding-box;<br/>}</span></pre><p id="54ab" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">每当你有共享行为时，试着浓缩你的选择器。在这种情况下，我们#clock中的所有东西都需要这些属性。框尺寸:border-box将边框放在宽度/高度内，这是一个我们可以用来使刻度和指针变短的技巧。我们将容器设置为所有刻度和指针的最大尺寸，然后我们可以使用透明边框使它们变小！为此，我们需要将background-clip设置为padding-box，因为默认的边框行为实际上会在边框下绘制背景。<em class="la">(哪个IMHO真傻逼..HTML/CSS中有很多非常愚蠢的默认设置)</em></p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="16b0" class="mn lc it mj b gy mo mp l mq mr">#clock:before,<br/>#clock:after,<br/>#clock b:before,<br/>#clock b:after {<br/>  position:absolute;<br/>  width:1.5em;<br/>  text-align:center;<br/>}</span></pre><p id="5db7" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">#clock和<b>生成的内容都以相同的大小/宽度绝对定位。这将是我们的四个号码。</b></p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="38f1" class="mn lc it mj b gy mo mp l mq mr">#clock b {<br/>  position:absolute;<br/>  top:4.25em;<br/>  width:100%;<br/>}</span></pre><p id="f52c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们将<b>——它将容纳9和3——向下滑动一半减去一半行高。我们可以尝试更花哨的技巧，如flex或grid，但当你有一堆重叠的元素时，就像我们在这里做的一样，它们实际上更难。</b></p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="9e6e" class="mn lc it mj b gy mo mp l mq mr">#clock:before,<br/>#clock:after {<br/>  left:4.25em;<br/>}</span></pre><p id="a3eb" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">#clock生成的内容也进行了一半。</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="1143" class="mn lc it mj b gy mo mp l mq mr">#clock:before {<br/>  content:"12";<br/>  top:0;<br/>}</span><span id="16ab" class="mn lc it mj b gy mt mp l mq mr">#clock:after {<br/>  content:"6";<br/>  bottom:0;<br/>}</span><span id="ac21" class="mn lc it mj b gy mt mp l mq mr">#clock b:before {<br/>  left:0;<br/>  content:"9";<br/>}</span><span id="73b5" class="mn lc it mj b gy mt mp l mq mr">#clock b:after {<br/>  right:0;<br/>  content:"3";<br/>}</span></pre><figure class="me mf mg mh gt ju gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/3f6f08273adc86ecba37444b94d838bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:840/format:webp/1*prtKzJysVROzwvmecGijXA.png"/></div></figure><p id="8c5c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">非常清楚，插入我们的数字，并适当地定位它们。</p><p id="2d36" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这是我们的数字，那么每12个小时的刻度呢？</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="3d85" class="mn lc it mj b gy mo mp l mq mr">#clock span {<br/> position:absolute;<br/> top:0;<br/> left:4.9375em;<br/> width:0.125em;<br/> height:100%;<br/>}</span></pre><p id="ade4" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">span本身只是我们生成的内容的包装器，我们把它做成全高，然后把它们滑到中间，再次计算从#clock宽度的一半减去我们想要的宽度的一半。</p><p id="30b3" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">一个有趣的技巧是，我们可以生成30度和60度的:before和:after，然后:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="5dd7" class="mn lc it mj b gy mo mp l mq mr">#clock span + span {<br/>  transform:rotate(90deg);<br/>}</span></pre><p id="9c5c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">将它旋转90度，得到120度和150度。生成的内容将绘制相对的两边。</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="0655" class="mn lc it mj b gy mo mp l mq mr">#clock i,<br/>#clock span:before,<br/>#clock span:after {<br/>  position:absolute;<br/>  top:0.5em;<br/>  left:0;<br/>  width:100%;<br/>  height:9em;<br/>}</span></pre><p id="5dc4" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">指针和刻度也得到绝对定位。我们缩小它们的尺寸，这样它们就不会跑到钟面的边缘，并相应地调整顶部位置。</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="09b5" class="mn lc it mj b gy mo mp l mq mr">#clock span:before,<br/>#clock span:after {<br/>  content:"";<br/>  border-style:solid;<br/>  border-color:#000;<br/>  border-width:0.5em 0;<br/>  transform:rotate(30deg);<br/>}</span></pre><p id="ed49" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们的span:before和after中的每一个都有一个黑色的边框，它们的中心保持透明。这是魔术，边界顶部和底部是我们的刻度线，从那里我们只需将它们旋转30度。一个接一个:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="012c" class="mn lc it mj b gy mo mp l mq mr">#clock span:after {<br/>  transform:rotate(60deg);<br/>}</span></pre><p id="3020" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">取而代之的是60度旋转。基本上，跨度上的:before和:after中的每一个都在表面上做两个相对的记号，然后我们只需将它们旋转到我们想要的位置。</p><p id="f8ca" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">总共给了我们:</p><figure class="me mf mg mh gt ju gh gi paragraph-image"><div class="gh gi mv"><img src="../Images/c322e478929283c94944273e10b5cc52.png" data-original-src="https://miro.medium.com/v2/resize:fit:838/format:webp/1*WTkCAEXVl50OvbvvN3tnLQ.png"/></div></figure><p id="1726" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">您可能会对此感到困惑，让我们在span:before和span:after上设置一个背景色来说明实际发生的情况。如果我们加上<code class="fe mw mx my mj b">background-color:#0F0;</code>,我们得到:</p><figure class="me mf mg mh gt ju gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/02f1ddbf36a19b83977227f93c1e8e54.png" data-original-src="https://miro.medium.com/v2/resize:fit:826/format:webp/1*y_KlT2IrF9sUKNPxFC6hUg.png"/></div></figure><p id="1a7d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">双手没什么不同:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="31a1" class="mn lc it mj b gy mo mp l mq mr">#clock i {<br/>  z-index:2;<br/>  left:4.85em;<br/>  width:0.3em;<br/>  background-color:#000;<br/>  border:solid transparent;<br/>  border-width:0 0 3em;<br/>  border-radius:40%;<br/>}</span></pre><p id="83a2" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><em class="la">注意，我们必须说背景色，就像你使用简写的背景:属性，你将覆盖背景剪辑。</em></p><p id="aeb8" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这些需要一个z-index，所以它们将对6进行深度排序，这是作为#clock:after附加的。这些元素再次以父元素宽度的一半减去元素宽度的一半为中心。</p><p id="e284" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">颜色与我们做刻度线的方式相反。我们给它一个背景颜色，然后使边界透明。这让我们可以通过设置边框宽度来设置手的每个“茎”的大小。在这种情况下，我们设置底部宽度，使一边更短。</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="2bde" class="mn lc it mj b gy mo mp l mq mr">#clock i:first-of-type {<br/>  border-width:1.5em 0 3em;<br/>}</span></pre><p id="db91" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">因为我们的第一个是时针，我们通过增加顶部边框来缩短它。</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="9f34" class="mn lc it mj b gy mo mp l mq mr">#clock i:last-of-type {<br/>  background-color:#F00;<br/>}</span></pre><p id="77e9" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">最后一个是秒针，我们把它做成红色吧。</p><p id="4a6d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在，为了让它更漂亮，让我们在中间添加几个同心圆来代表它们通常连接的环和茎。我们可以把它们挂在秒针上，因为作为圆圈，它们在旋转时不会有任何不同。</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="9b1c" class="mn lc it mj b gy mo mp l mq mr">#clock i:last-of-type:before,<br/>#clock i:last-of-type:after {<br/>  content:"";<br/>  position:absolute;<br/>  border-radius:50%;<br/>}</span><span id="5d38" class="mn lc it mj b gy mt mp l mq mr">#clock i:last-of-type:before {<br/>  top:4em;<br/>  left:-0.375em;<br/>  width:1em;<br/>  height:1em;<br/>  background:#000;<br/>}</span><span id="5e5a" class="mn lc it mj b gy mt mp l mq mr">#clock i:last-of-type:after {<br/>  top:4.25em;<br/>  left:-0.125em;<br/>  width:0.5em;<br/>  height:0.5em;<br/>  background:#ABC;<br/>}</span></pre><p id="7232" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">计算左上时，你不仅要考虑戒指的大小，还要考虑它们与秒针位置的关系。</p><p id="6dad" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这就是我们的风格，现在看起来像这样:</p><figure class="me mf mg mh gt ju gh gi paragraph-image"><div class="gh gi na"><img src="../Images/2caee6228b92ce12f26293f1f7e68faa.png" data-original-src="https://miro.medium.com/v2/resize:fit:812/format:webp/1*3alJPVFxP6AtcmULA8L-XQ.png"/></div></figure><p id="99a0" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">自然，我们看不到所有的手，因为它们是一层一层地叠在一起的。请注意，50%的边界半径实际上是如何让我们一端“尖”而另一端更圆的。记住，在这些上，边界是透明的，背景是颜色。</p><p id="12b7" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这就是我们所有的标记和风格…现在让它做点什么。</p><h1 id="980d" class="lb lc it bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">脚本</h1><p id="823b" class="pw-post-body-paragraph kb kc it kd b ke lz kg kh ki ma kk kl km mb ko kp kq mc ks kt ku md kw kx ky im bi translated">首先，我总是把我的脚本放在客户端工作的生活中。当然，我们有新的东西，如type="module "或@import with classes，但坦率地说，我发现这些东西在客户端部署方面没有给我带来通用性。</p><p id="a4e4" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">尤其是像将“文档”或“窗口”作为“d”和“w”传递给生活这样的技巧，省去了我不停地到处键入它们的麻烦。如果对谷歌来说足够好，对我来说也足够好！</p><p id="bf91" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">所以，我们从:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="0770" class="mn lc it mj b gy mo mp l mq mr">(function(d) {<br/>})(document);</span></pre><p id="e986" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在，正如我之前提到的，我们希望避免在标记中出现垃圾脚本，所以我们希望将HTML简化为:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="ee97" class="mn lc it mj b gy mo mp l mq mr">&lt;div id="clock"&gt;<br/>  &lt;noscript&gt;<br/>    &lt;p&gt;<br/>      The page clock requires JavaScript to function, please revisit in a scripting capable browser.<br/>    &lt;/p&gt;<br/>  &lt;/noscript&gt;<br/>&lt;!-- .clockFace --&gt;&lt;/div&gt;</span></pre><p id="d85b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">然后让我们的脚本插入这些值。因为我们使用斜体标记来表示手，并且我们希望将这些标记用于脚本，所以我们可以在构建它们时将它们放入数组中。</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="b71b" class="mn lc it mj b gy mo mp l mq mr">var clockElements = makeClockElements(<br/>  'b', 'span', 'span', 'i', 'i', 'i'<br/>);</span><span id="270b" class="mn lc it mj b gy mt mp l mq mr">function makeClockElements(tags) {<br/>  var<br/>    clock = d.getElementById('clock'),<br/>    result = [];<br/>  for (var i = 0; tagName = arguments[i]; i++) {<br/>    var element = clock.appendChild(d.createElement(tagName));<br/>    if (tagName === 'i') result.push(element);<br/>  }<br/>  return result;<br/>}</span></pre><p id="558d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">拥有这些类型的“make”函数通常是很方便的，这样可以避免使用innerHTML破坏DOM以及所有常见的令人痛苦的问题。(比如触发解析器比上面慢30倍)。</p><p id="ee71" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在我们有了这些斜体标签的钩子，我们可以:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="1e45" class="mn lc it mj b gy mo mp l mq mr">function clockUpdate() {<br/>  var now = new Date();<br/>  clockElements[0].style.transform = 'rotate(' + (<br/>    now.getHours() * 30 + (Math.floor(now.getMinutes() / 12) * 6)<br/>  ) + 'deg)';<br/>  clockElements[1].style.transform = 'rotate(' + (<br/>    now.getMinutes() * 6<br/>  ) + 'deg)';<br/>  clockElements[2].style.transform = 'rotate(' + (<br/>    now.getSeconds() * 6<br/>  ) + 'deg)';<br/>}</span><span id="3a93" class="mn lc it mj b gy mt mp l mq mr">clockUpdate();<br/>setInterval(clockUpdate, 1000);</span></pre><p id="34a1" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">您可能想知道为什么小时计算得到分钟。这是因为与其让它一下子跳30度，不如让它像其他指针一样更新6度。“真正的”模拟时钟——尤其是老式的——通常是60进制的“数字”时钟，甚至是机械钟。他们不会每一秒都降档，因为那样会浪费钟摆/弹簧的能量，而是只在必要时“降档”。</p><p id="79a6" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">但这就是脚本更新时钟所要做的全部工作，就是设置旋转。以度计。我经常看到一些人在这方面使用的边界微积分，对此我感到非常惊讶…人们并没有那么复杂。<em class="la">但是我知道什么？我使用atan2而不是除以z来做3d投影</em></p><p id="0dc9" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">自然，我们希望在加载时绘制当前时间，然后设置1秒更新。</p><p id="9f5c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">上面的脚本应该包含在</p><h1 id="8453" class="lb lc it bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">现场演示</h1><p id="4955" class="pw-post-body-paragraph kb kc it kd b ke lz kg kh ki ma kk kl km mb ko kp kq mc ks kt ku md kw kx ky im bi translated">和我的大部分代码一样，这里有一个演示:</p><div class="nb nc gp gr nd ne"><a href="https://cutcodedown.com/for_others/medium_articles/clock/clock.html" rel="noopener  ugc nofollow" target="_blank"><div class="nf ab fo"><div class="ng ab nh cl cj ni"><h2 class="bd iu gy z fp nj fr fs nk fu fw is bi translated">时钟演示</h2><div class="nl l"><h3 class="bd b gy z fp nj fr fs nk fu fw dk translated">编辑描述</h3></div><div class="nm l"><p class="bd b dl z fp nj fr fs nk fu fw dk translated">cutcodedown.com</p></div></div></div></a></div><p id="031e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">目录:<br/><a class="ae kz" href="https://cutcodedown.com/for_others/medium_articles/clock/" rel="noopener ugc nofollow" target="_blank">https://cutcodedown.com/for_others/medium_articles/clock/</a></p><p id="0824" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">是完全开放的，很容易接触到黏糊糊的东西，我也把整个事情的一个rar文件放在那里。</p><p id="702a" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我知道有些人更喜欢钢笔，所以给你:</p><figure class="me mf mg mh gt ju"><div class="bz fp l di"><div class="nn no l"/></div></figure><h1 id="a970" class="lb lc it bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="207a" class="pw-post-body-paragraph kb kc it kd b ke lz kg kh ki ma kk kl km mb ko kp kq mc ks kt ku md kw kx ky im bi translated">使用HTML和CSS来完成我们的大部分时钟生成，使我们能够动态扩展它，并且看起来就像大多数人浪费图像或过多脚本(如canvas)一样好。你想让它变大或变小，只要在#clock上改变字体大小就行了。</p><p id="2472" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这可以让JavaScript专注于插入所需的HTML——避免只编写元素脚本在非脚本环境中可能导致的问题——并且除了在手上设置“transform:rotate”之外，什么也不做。</p><p id="ef5a" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">要是所有的事情都这么简单就好了。</p><h2 id="042f" class="mn lc it bd ld np nq dn lh nr ns dp ll km nt nu lp kq nv nw lt ku nx ny lx nz bi translated">信用</h2><p id="00af" class="pw-post-body-paragraph kb kc it kd b ke lz kg kh ki ma kk kl km mb ko kp kq mc ks kt ku md kw kx ky im bi translated">特别感谢DigitalPoint上的“iago111”和“qwikad”；前者是因为这个想法，后者是因为建议我把它作为一篇文章发表出来。</p></div></div>    
</body>
</html>