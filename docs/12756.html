<html>
<head>
<title>Setting CSS Styles Using JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用JavaScript设置CSS样式</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/setting-css-styles-using-javascript-470592457972?source=collection_archive---------14-----------------------#2022-07-05">https://levelup.gitconnected.com/setting-css-styles-using-javascript-470592457972?source=collection_archive---------14-----------------------#2022-07-05</a></blockquote><div><div class="fc if ig ih ii ij"/><div class="ik il im in io"><div class=""/><div class=""><h2 id="9c81" class="pw-subtitle-paragraph jo iq ir bd b jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf dk translated">设置CSS样式的4种方法</h2></div><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj kg"><img src="../Images/35e0c51590c67138e4004e8b473a2f04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*jfMXc-nDGkclXzxz"/></div></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk translated">由<a class="ae kw" href="https://unsplash.com/@kobuagency?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> KOBU机构</a>在<a class="ae kw" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><h1 id="ad46" class="kx ky ir bd kz la lb lc ld le lf lg lh jx li jy lj ka lk kb ll kd lm ke ln lo bi translated">前言</h1><p id="411f" class="pw-post-body-paragraph lp lq ir lr b ls lt js lu lv lw jv lx ly lz ma mb mc md me mf mg mh mi mj mk ik bi translated">开发页面通常使用CSS文件来设计样式。如果你去看网站的源代码，你可以发现它基本上包含了至少一个样式文件。CSS文件适合处理不需要交互的演示文稿。如果需要根据用户行为改变元素在页面上的显示，就需要依靠JavaScript来改变元素的样式。下面将介绍4种通过JavaScript设置CSS样式的方法。</p><h1 id="d7cd" class="kx ky ir bd kz la lb lc ld le lf lg lh jx li jy lj ka lk kb ll kd lm ke ln lo bi translated">设置单个CSS样式</h1><p id="98ab" class="pw-post-body-paragraph lp lq ir lr b ls lt js lu lv lw jv lx ly lz ma mb mc md me mf mg mh mi mj mk ik bi translated">每个dom元素都有一个<code class="fe ml mm mn mo b">style</code>属性，这是一个JavaScript对象。通过<code class="fe ml mm mn mo b">style</code>对象，可以获取或设置用户设置的样式。</p><p id="5e91" class="pw-post-body-paragraph lp lq ir lr b ls mp js lu lv mq jv lx ly mr ma mb mc ms me mf mg mt mi mj mk ik bi translated">假设页面的背景色是白色，那么通过CSS文件初始设置给页面的样式是:</p><pre class="kh ki kj kk gu mu mo mv mw aw mx bi"><span id="ca56" class="my ky ir mo b gz mz na l nb nc">body {</span><span id="6611" class="my ky ir mo b gz nd na l nb nc">  background-color: #000;</span><span id="62e4" class="my ky ir mo b gz nd na l nb nc">}</span></pre><p id="708d" class="pw-post-body-paragraph lp lq ir lr b ls mp js lu lv mq jv lx ly mr ma mb mc ms me mf mg mt mi mj mk ik bi translated">如果我们需要将页面背景色修改为红色，我们可以通过以下方式使用<code class="fe ml mm mn mo b">style</code>对象来实现:</p><pre class="kh ki kj kk gu mu mo mv mw aw mx bi"><span id="6651" class="my ky ir mo b gz mz na l nb nc">document.body.style.backgroundColor = '#f00';</span></pre><p id="27b9" class="pw-post-body-paragraph lp lq ir lr b ls mp js lu lv mq jv lx ly mr ma mb mc ms me mf mg mt mi mj mk ik bi translated">看起来很简单，但是有一天你发现样式集不起作用了。你这么聪明，打开chrome的devtools就发现问题了，原来的CSS样式文件被人修改了:</p><pre class="kh ki kj kk gu mu mo mv mw aw mx bi"><span id="2869" class="my ky ir mo b gz mz na l nb nc">body {</span><span id="d7e0" class="my ky ir mo b gz nd na l nb nc">  background-color: #000 !important;</span><span id="f097" class="my ky ir mo b gz nd na l nb nc">}</span></pre><p id="38ae" class="pw-post-body-paragraph lp lq ir lr b ls mp js lu lv mq jv lx ly mr ma mb mc ms me mf mg mt mi mj mk ik bi translated">Javascript设置的样式优先级不够，导致样式失败。那么有什么办法可以解决这个问题呢？<br/>当然，<code class="fe ml mm mn mo b">style</code>对象也提供了一个API来设置样式</p><pre class="kh ki kj kk gu mu mo mv mw aw mx bi"><span id="dbde" class="my ky ir mo b gz mz na l nb nc">element.style.setProperty(propertyName, value?, priority?);</span></pre><p id="e39c" class="pw-post-body-paragraph lp lq ir lr b ls mp js lu lv mq jv lx ly mr ma mb mc ms me mf mg mt mi mj mk ik bi translated">第三个参数是设置CSS优先级，可以是<code class="fe ml mm mn mo b">important</code>，未定义，空字符串。所以我们可以用它来设置CSS样式:</p><pre class="kh ki kj kk gu mu mo mv mw aw mx bi"><span id="5fdb" class="my ky ir mo b gz mz na l nb nc">document.body.style.setProperty('background-color', '#f00', 'important' );</span></pre><p id="d131" class="pw-post-body-paragraph lp lq ir lr b ls mp js lu lv mq jv lx ly mr ma mb mc ms me mf mg mt mi mj mk ik bi translated">太酷了，页面显示又正常了。但是很快就会有新的变化，不仅需要改变页面背景颜色，还需要改变字体颜色和页边距，所以你可以马上想到:</p><pre class="kh ki kj kk gu mu mo mv mw aw mx bi"><span id="332b" class="my ky ir mo b gz mz na l nb nc">document.body.style.backgroundColor = '#f00';</span><span id="7b1f" class="my ky ir mo b gz nd na l nb nc">document.body.style.color = '#0f0';</span><span id="e6f0" class="my ky ir mo b gz nd na l nb nc">document.body.style.margin = '20px';</span></pre><p id="7ea3" class="pw-post-body-paragraph lp lq ir lr b ls mp js lu lv mq jv lx ly mr ma mb mc ms me mf mg mt mi mj mk ik bi translated">随着越来越多的风格被改变，这是很难维持的。有什么方法可以批量设置属性？</p><h1 id="6f5a" class="kx ky ir bd kz la lb lc ld le lf lg lh jx li jy lj ka lk kb ll kd lm ke ln lo bi translated">批量设置CSS样式</h1><p id="1359" class="pw-post-body-paragraph lp lq ir lr b ls lt js lu lv lw jv lx ly lz ma mb mc md me mf mg mh mi mj mk ik bi translated"><code class="fe ml mm mn mo b">style</code>对象提供了一个<code class="fe ml mm mn mo b">cssText</code>属性，支持设置多种CSS样式<br/>如果需要修改页面的背景颜色，同时改变字体颜色和边距，可以使用:</p><pre class="kh ki kj kk gu mu mo mv mw aw mx bi"><span id="3649" class="my ky ir mo b gz mz na l nb nc">document.body.style.cssText = "background-color: #f00; color: #0f0; margin: 20px;";</span></pre><p id="b76a" class="pw-post-body-paragraph lp lq ir lr b ls mp js lu lv mq jv lx ly mr ma mb mc ms me mf mg mt mi mj mk ik bi translated">当然，你也可以像在CSS文件中一样设置属性的优先级:</p><pre class="kh ki kj kk gu mu mo mv mw aw mx bi"><span id="5f5e" class="my ky ir mo b gz mz na l nb nc">document.body.style.cssText = "background-color: #f00 !important; color: #0f0; margin: 20px;";</span></pre><p id="bec3" class="pw-post-body-paragraph lp lq ir lr b ls mp js lu lv mq jv lx ly mr ma mb mc ms me mf mg mt mi mj mk ik bi translated">另一个想法是通过构造html的样式标签来动态插入样式文件。并将需要修改的CSS样式包装成CSS类。</p><pre class="kh ki kj kk gu mu mo mv mw aw mx bi"><span id="f70e" class="my ky ir mo b gz mz na l nb nc">function styleInject(cssText) {</span><span id="c272" class="my ky ir mo b gz nd na l nb nc">  const head = document.head || document.getElementsByTagName('head')[0];</span><span id="96c1" class="my ky ir mo b gz nd na l nb nc">  const style = document.createElement('style');</span><span id="2029" class="my ky ir mo b gz nd na l nb nc">  style.type = 'text/css';</span><span id="ef05" class="my ky ir mo b gz nd na l nb nc">  style.appendChild(document.createTextNode(cssText));</span><span id="e714" class="my ky ir mo b gz nd na l nb nc">  head.appendChild(style);</span><span id="bbc1" class="my ky ir mo b gz nd na l nb nc">}<br/>// insert the css styles<br/>styleInject(`<br/>  body {<br/>    background-color: #f00 !important; <br/>    color: #0f0; <br/>    margin: 20px;<br/>  }<br/>`);</span></pre><p id="f502" class="pw-post-body-paragraph lp lq ir lr b ls mp js lu lv mq jv lx ly mr ma mb mc ms me mf mg mt mi mj mk ik bi translated">这是一种动态插入CSS文件的方式，也在Webpack中使用。</p><h1 id="0380" class="kx ky ir bd kz la lb lc ld le lf lg lh jx li jy lj ka lk kb ll kd lm ke ln lo bi translated">结论</h1><p id="4ce5" class="pw-post-body-paragraph lp lq ir lr b ls lt js lu lv lw jv lx ly lz ma mb mc md me mf mg mh mi mj mk ik bi translated">如果你需要使用JavaScript来修改一个元素的样式，有4种方法，你都掌握了吗？</p><p id="a842" class="pw-post-body-paragraph lp lq ir lr b ls mp js lu lv mq jv lx ly mr ma mb mc ms me mf mg mt mi mj mk ik bi translated">1.element . style[属性名] =值</p><p id="3c25" class="pw-post-body-paragraph lp lq ir lr b ls mp js lu lv mq jv lx ly mr ma mb mc ms me mf mg mt mi mj mk ik bi translated">2.element.style.setProperty(属性名，值，优先级)</p><p id="2f03" class="pw-post-body-paragraph lp lq ir lr b ls mp js lu lv mq jv lx ly mr ma mb mc ms me mf mg mt mi mj mk ik bi translated">3.element . style . CSS text = values string</p><p id="bcab" class="pw-post-body-paragraph lp lq ir lr b ls mp js lu lv mq jv lx ly mr ma mb mc ms me mf mg mt mi mj mk ik bi translated">4.动态插入html的样式标签</p><p id="4187" class="pw-post-body-paragraph lp lq ir lr b ls mp js lu lv mq jv lx ly mr ma mb mc ms me mf mg mt mi mj mk ik bi translated">如果是单一的CSS样式修改，建议使用前两种。如果需要批量修改，建议使用后两种。</p></div></div>    
</body>
</html>