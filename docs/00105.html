<html>
<head>
<title>How To Write Code That Will Last Forever 🔊</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何编写永久有效的代码🔊</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-write-code-that-will-last-forever-f8c4b1c0c867?source=collection_archive---------0-----------------------#2018-03-29">https://levelup.gitconnected.com/how-to-write-code-that-will-last-forever-f8c4b1c0c867?source=collection_archive---------0-----------------------#2018-03-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="4ebf" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">这并不是因为每个人都不敢碰它</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/bde22f25b41be64acfcce865f5dd4ddf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Zlr7AOGBHwC7snVaXshQuw.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">澳大利亚昆士兰州努沙国家公园<a class="ae kv" href="https://goo.gl/maps/ztGpcX46zYk" rel="noopener ugc nofollow" target="_blank">海豚角了望台</a>岩石海岸的一张照片。水是如此透明，以至于底部的岩石和沙子都清晰可见。像这样的公园有为公众精心设计的战略性了望台，因此它们的美丽可以持续很长时间。</figcaption></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="kw kx l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">听听音频版！</figcaption></figure></div><div class="ab cl ky kz hu la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ij ik il im in"><p id="f892" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">伟大的设计师不会创造出完美的杰作。他们建立了坚实的基础来支持一个环境，在这个环境中，建造一个杰作是不可避免的。</p><p id="1c32" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">你还记得电影<a class="ae kv" href="https://en.wikipedia.org/wiki/Space_Jam" rel="noopener ugc nofollow" target="_blank">太空堵塞</a>吗？</p><p id="c757" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">电影的<a class="ae kv" href="https://www.warnerbros.com/archive/spacejam/movie/jam.htm" rel="noopener ugc nofollow" target="_blank">网站创建于1996年。22年后的今天，它看起来和过去一模一样。</a></p><p id="4961" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">这怎么可能呢？</p><p id="fb3a" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">尽管HTML格式随着时间的推移发生了变化，浏览器仍然知道如何支持旧的元素，比如<code class="fe mb mc md me b">center</code>和<code class="fe mb mc md me b">frame</code>标签。这使得Space Jam网站几十年来保持向后兼容。</p><p id="e4e3" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">默认情况下浏览器向后兼容的原因是它们的代码主要是为了解释HTML而编写的。他们以一种格式编写代码，这种格式可以表示页面的状态，而浏览器不需要知道页面是如何构造的。</p><p id="3547" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">他们只需要编写一次理解这种格式的代码，别无其他。</p><p id="1af0" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">这里有一个例子:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mf kx l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae kv" href="https://gist.github.com/FagnerMartinsBrack/3ff6fcba23abd62f4763fb0fb6b3dfc9" rel="noopener ugc nofollow" target="_blank">代表虚拟浏览器内部的代码</a>。有一个“页面内容”变量代表页面的根。该变量调用一个方法来检索每个“子元素”对于每个“子”元素，它运行一个名为“渲染元素和子元素”的函数该函数的代码检查元素是“脚本”、“容器”、“文本节点”还是“输入”如果它是一个“容器”，它会再次递归遍历所有元素。对于所有其他类型，它只是相应地呈现它们。</figcaption></figure><p id="7a09" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">浏览器针对HTML编码是有意义的。如果他们要为网站的特定结构编写代码，他们必须编写如下内容:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mf kx l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae kv" href="https://gist.github.com/FagnerMartinsBrack/eb3b13dacf72dbe227211b299ad83889" rel="noopener ugc nofollow" target="_blank">代表虚拟浏览器内部的代码</a>。它获取“容器”类型的第一个元素，然后获取假定存在于“容器”内部的“输入”类型的第一个元素。它包含在一个条件中，只有当网站是“google.com”时才运行</figcaption></figure><p id="1ddc" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">上面的代码假设页面上存在一个“容器”。它还假设“容器”有一个“输入”子元素。如果网站改变结构删除容器，每个浏览器都必须更新。</p><p id="6a54" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">元素类型“容器”、“脚本”、“文本节点”和“输入”并不完全代表浏览器如何在内部定义元素。真正的浏览器需要担心<a class="ae kv" href="https://medium.com/@fagnerbrack/html-and-state-a-challenging-way-to-look-at-web-performance-e3084fcff70d" rel="noopener">性能</a>和支持不同<a class="ae kv" href="https://dev.w3.org/html5/html-author/#elements" rel="noopener ugc nofollow" target="_blank">种类的元素</a>。</p><p id="bd6e" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">这里的要点是表明你可以<strong class="lh ir">写一次代码</strong>，它可以<strong class="lh ir">解析任何东西</strong>，而不需要知道另一个系统是如何构造的。想法是<strong class="lh ir">建立能力</strong>，而不仅仅是写一些漂亮的代码来解决眼前的问题。</p><blockquote class="mg"><p id="8192" class="mh mi iq bd mj mk ml mm mn mo mp ma dk translated">您可以编写一次可以解析任何内容的代码，只要您针对功能进行编码。</p></blockquote><p id="13f8" class="pw-post-body-paragraph lf lg iq lh b li mq jr lk ll mr ju ln lo ms lq lr ls mt lu lv lw mu ly lz ma ij bi translated">在“现代”前端开发中，从服务器返回一个JSON是很常见的做法，该JSON的结构被绑定到它运行的确切网站:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mv kx l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae kv" href="https://jsfiddle.net/fagnerbrack/zd690oe6/" rel="noopener ugc nofollow" target="_blank">可运行代码</a>表示两个服务器端响应，解析为JSON并呈现在客户端HTML模板中。第一个响应包含一个名为“user”的属性“user”属性包含一个对象文字，该对象文字包含一个名为“name”的属性“name”属性的值是一个名为“Mary”的字符串第二个响应只包含一个名为“用户名”的属性“用户名”属性的值也是名为“Mary”的字符串客户端HTML模板呈现“user”对象文字模型中的“name”属性。如果您更改来自服务器的响应，客户端将呈现字符串“未定义”</figcaption></figure><p id="c477" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">在之前的<a class="ae kv" href="https://medium.com/@fagnerbrack/front-end-separation-and-the-irrational-love-for-curly-braces-b6472f48bde7" rel="noopener">帖子</a>中，我已经展示了这是如何在网站上被编码并被贴上“单页应用”的标签的。</p><p id="f8fe" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">问题是如果服务器响应的结构改变了，客户端代码就会中断。</p><p id="c7a0" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">那是极其脆弱的。</p><p id="bbdd" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">如果你开始应用构建网站功能的原则，用JavaScript和JSON重新创建HTML，你最终会重新发明HTML。</p><p id="54d8" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">如果是这样的话，那么从服务器返回HTML就可以了！</p><blockquote class="mw mx my"><p id="0011" class="lf lg mz lh b li lj jr lk ll lm ju ln na lp lq lr nb lt lu lv nc lx ly lz ma ij bi translated">酷，HTML对浏览器来说很棒。然而，如果你从你的服务器发送HTML，你实际上是在编写只适用于浏览器的代码！如果你不得不支持像移动客户端这样的东西，这似乎毫无意义，除非你想把你的网站放在一个“网络视图”中</p></blockquote><p id="52b9" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">没错。</p><p id="fbb5" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">HTML是浏览器能够有效解析的唯一格式。这是一种在“交换”、“触摸”或“摇动”等控件出现之前就已经创建的格式。为了在浏览器中访问这些控件，您必须编写<a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/API/Touch_events#Setting_up_the_event_handlers" rel="noopener ugc nofollow" target="_blank">自定义JavaScript </a>。</p><p id="a852" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">“网络视图”的概念在<a class="ae kv" href="https://developer.android.com/reference/android/webkit/WebView.html" rel="noopener ugc nofollow" target="_blank"> Android </a>和<a class="ae kv" href="https://developer.apple.com/documentation/uikit/uiwebview" rel="noopener ugc nofollow" target="_blank"> iOS </a>上都存在。它允许你将一个网站加载到一个本地移动应用程序中。创建一个在浏览器中运行的网站并把相同的代码库加载到“web视图”中是非常容易的如果你这样做，你就可以避免为你的产品编写另一个前端。</p><blockquote class="mg"><p id="06e2" class="mh mi iq bd mj mk ml mm mn mo mp ma dk translated">仅仅因为它很容易，并不意味着它是理想的。</p></blockquote><p id="9367" class="pw-post-body-paragraph lf lg iq lh b li mq jr lk ll mr ju ln lo ms lq lr ls mt lu lv lw mu ly lz ma ij bi translated">如果你有一些手机应用的经验，你会知道“网络视图”不会没有折衷。</p><p id="4b3f" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">它没有伸缩性。</p><p id="cee3" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">随着更多的代码和功能被添加到“网络”中，“移动”版本将会变得更慢随着更多的代码和功能添加到“移动”中，“网络”版本将变得更慢</p><p id="9bb1" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">随着时间的推移，针对“移动”和“网络”的产品会有所不同在某种程度上，随着<a class="ae kv" href="https://en.wikipedia.org/wiki/Software_entropy" rel="noopener ugc nofollow" target="_blank">复杂性开始增加</a>，每个人都会意识到“移动”和“网络”之间的工作流程是完全不同的。</p><p id="09a5" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">它们基本上是<a class="ae kv" href="https://medium.com/@fagnerbrack/why-do-you-need-to-know-package-coupling-fundamentals-8e0fa8e33e20" rel="noopener">解耦</a>和<a class="ae kv" href="https://medium.com/@fagnerbrack/why-do-you-need-to-know-package-cohesion-fundamentals-8a3510cba2c1" rel="noopener">内聚</a>的。</p><blockquote class="mg"><p id="9062" class="mh mi iq bd mj mk ml mm mn mo mp ma dk translated">你可以将网站的相同代码库应用到移动“网络视图”中然而，这并不具有可扩展性。</p></blockquote><p id="27a8" class="pw-post-body-paragraph lf lg iq lh b li mq jr lk ll mr ju ln lo ms lq lr ls mt lu lv lw mu ly lz ma ij bi translated">那么还有什么选择呢？</p><p id="05c8" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">你可以构建原生的移动应用程序——不需要HTML——使用与使网络保持强大和向后兼容的相同的原则。</p><p id="23a9" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">想象一下，一方面你有一个服务器为一个HTTP请求返回不同的标记语言，让我们称之为<strong class="lh ir">DML</strong>—<strong class="lh ir">D</strong>different<strong class="lh ir">M</strong>arkup<strong class="lh ir">L</strong>language。该标记语言符合为移动设备优化的特定格式。它允许程序编写代码来理解这种格式，就像浏览器编写代码来解释HTML一样。</p><p id="099f" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">另一边，你有客户。这是一款类似“浏览器”的原生移动应用然而，它不理解HTML，也没有“web视图”它被优化来解析<strong class="lh ir"> DML </strong>并从服务器构建整个应用程序。</p><p id="80ba" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">在这个设置中，你可以改变所有的用户界面，包括交互，而不需要改变你的应用程序中的任何一行代码。</p><p id="8c8e" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">这就像“HTTP上的本地应用程序”</p><p id="d7b9" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">那不是很好吗？</p><blockquote class="mg"><p id="f01c" class="mh mi iq bd mj mk ml mm mn mo mp ma dk translated">一个可以改变服务器和更新移动应用的系统将会改变游戏规则。</p></blockquote><p id="39ef" class="pw-post-body-paragraph lf lg iq lh b li mq jr lk ll mr ju ln lo ms lq lr ls mt lu lv lw mu ly lz ma ij bi translated">好消息是它已经存在了。</p><p id="44f5" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">作者称之为“<a class="ae kv" href="https://jasonette.com/" rel="noopener ugc nofollow" target="_blank"> jasonette </a>”:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nd kx l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">jasonette作者的一段视频，介绍了其背后的核心思想。可以在服务器上编写用于创建移动应用程序的代码。</figcaption></figure><p id="f9dc" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">Jasonette就是一个很好的例子。</p><p id="656e" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">你没有<a class="ae kv" href="https://medium.com/@fagnerbrack/front-end-separation-and-the-irrational-love-for-curly-braces-b6472f48bde7" rel="noopener">必须以特定的顺序部署多个项目</a>的问题。您只需要在后端部署更改，它就会一直工作。</p><p id="23f8" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">你永远不需要专门为一个移动应用程序写代码，你有一个可以理解格式的客户端和一个可以写入格式的服务器。</p><p id="195e" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">想象一本书。</p><p id="97d8" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">这本书是由一个人脑写的，他用书面语言向另一个人脑传达信息。人类的大脑可以被认为是生物<a class="ae kv" href="https://en.wikipedia.org/wiki/Turing_machine" rel="noopener ugc nofollow" target="_blank">图灵机</a>。阅读的能力已经被编程到人脑中，这样它就能有效地理解别人试图传递的信息。</p><p id="9046" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">在这种情况下，作者的人脑代表服务器。读者的人脑代表浏览器。书就是网站。这本书的内容是HTML消息。</p><p id="ba6b" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">理解书的内容的能力是与生俱来的。对于一个人来说，被专门编码来阅读一本书是没有意义的。</p><p id="6376" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">由于进化造就了我们，书的内容可以改变，但人类不必改变。它唯一需要的是用特定语言阅读的能力。它只需要知道<strong class="lh ir">通信格式</strong>。</p><p id="4991" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">这就是浏览器对于HTML的意义:一个能理解一种<strong class="lh ir">通信格式</strong>的人工大脑。</p><blockquote class="mg"><p id="6373" class="mh mi iq bd mj mk ml mm mn mo mp ma dk translated">只要服务器和客户端符合通用的消息格式，浏览器可以像阅读书籍一样高效地阅读网站。</p></blockquote><p id="b060" class="pw-post-body-paragraph lf lg iq lh b li mq jr lk ll mr ju ln lo ms lq lr ls mt lu lv lw mu ly lz ma ij bi translated">有时候伟大的想法隐藏在众目睽睽之下。</p><p id="6f2d" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">如果您按照消息的格式而不是结构编码，您可以构建一个不需要多个有序部署的伟大系统。</p><p id="37af" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">就像你现在正在阅读的文本一样，计算机也可以理解一种通用语言，并有效地传递信息。</p><p id="c4ff" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">有了这个<a class="ae kv" href="https://hackernoon.com/the-doctor-and-the-scalpel-78656f508c9a" rel="noopener ugc nofollow" target="_blank">基本</a>原则，你今天就能创造出可能成为明天下一个Space Jam网站的东西。</p><p id="9aa3" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">你只需写一次……<strong class="lh ir">就能永远使用的代码</strong>。</p></div><div class="ab cl ky kz hu la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ij ik il im in"><p id="c416" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">感谢阅读。如果你有一些反馈，请在<a class="ae kv" href="https://twitter.com/FagnerBrack" rel="noopener ugc nofollow" target="_blank">推特</a>、<a class="ae kv" href="https://www.facebook.com/fagner.brack" rel="noopener ugc nofollow" target="_blank">脸书</a>或<a class="ae kv" href="http://github.com/FagnerMartinsBrack" rel="noopener ugc nofollow" target="_blank"> Github </a>上联系我。</p><p id="fc0b" class="pw-post-body-paragraph lf lg iq lh b li lj jr lk ll lm ju ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">感谢<a class="ae kv" href="https://twitter.com/mamund" rel="noopener ugc nofollow" target="_blank">迈克·阿蒙森</a>对这篇文章的深刻见解。</p></div></div>    
</body>
</html>