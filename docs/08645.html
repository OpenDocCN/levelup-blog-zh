<html>
<head>
<title>How to create a self-regenerating stamina bar in Unity</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Unity中创建一个自我再生的耐力条</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-create-a-self-regenerating-stamina-bar-in-unity-44ab156dbad9?source=collection_archive---------9-----------------------#2021-05-20">https://levelup.gitconnected.com/how-to-create-a-self-regenerating-stamina-bar-in-unity-44ab156dbad9?source=collection_archive---------9-----------------------#2021-05-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/396284b72337ce22172b38933dbceadf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*j8AIQ04MMagspbZNzk2bMw.gif"/></div></div></figure><p id="9dfd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">耐力条已经成为游戏中非常受欢迎的功能，这已经不是什么秘密了。耐力机制通过附加必要的动作来保持游戏的活力、吸引力和挑战性。当耐力被用来覆盖这些元素时，耗尽耐力会增加游戏的挑战性和战略性。</p><p id="23bf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">目标</strong>:在这篇文章中，你将学习如何制作一个按下一个键就会耗尽的耐力棒，并且当它不再被使用时会重新充满。</p></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><h1 id="7fef" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated"><strong class="ak">使用滑块</strong></h1><figure class="mc md me mf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mb"><img src="../Images/a71f58136be7dd730029704d9daaf9bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*g9Af3yf4rmrmoOl5GKMhUw.gif"/></div></div><figcaption class="mg mh gj gh gi mi mj bd b be z dk translated"><a class="ae mk" href="https://in.pinterest.com/pin/35254809569571045/" rel="noopener ugc nofollow" target="_blank">滑块动画</a></figcaption></figure><p id="dc2e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae mk" href="https://docs.unity3d.com/2018.3/Documentation/ScriptReference/UI.Slider.html" rel="noopener ugc nofollow" target="_blank">滑块</a>是一个可选的UI元素，通常用于需要一组最大和最小值的用户数据，如音量和屏幕亮度。然而，当通过代码进行调整时，它们可以更加通用。</p><p id="16f4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在本教程中，我们的耐力栏将由一个滑块来表示</p><ol class=""><li id="7cf1" class="ml mm iq ka b kb kc kf kg kj mn kn mo kr mp kv mq mr ms mt bi translated">通过右键单击→ UI →Slider创建一个滑块，然后适当地命名它。</li></ol><figure class="mc md me mf gt jr gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/0d69c59559092cb71d4820ea65aae682.png" data-original-src="https://miro.medium.com/v2/resize:fit:982/1*efggsboAcq9Mb3Nhowhy9w.gif"/></div></figure><p id="15ba" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">2.将滑块放在您喜欢的任何位置，并确保将其固定到相应的位置。</p><figure class="mc md me mf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mv"><img src="../Images/a95eeffb4a6f235877bb83e8a759865c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*AzRnaVyofZLUEzebvdg8DQ.gif"/></div></div></figure><p id="3f3e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">3.我们不会使用句柄，所以您可以在检查器中删除或停用它。</p><figure class="mc md me mf gt jr gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/f1540569205a5a27d2539941220df358.png" data-original-src="https://miro.medium.com/v2/resize:fit:1288/1*k9SglAeWPTUnQ1hOsvFQTw.gif"/></div></figure><p id="2ea3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">4.确保选中“使用整数”并设置最小值和最大值。</p><figure class="mc md me mf gt jr gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/708b758cd42febb8e1fa130138f1bf9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1378/1*Es1WpA2e9NcOp9Z2BrxbCQ.gif"/></div></figure><p id="b886" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">5.现在，是时候设置颜色了。首先，我们设置背景颜色，这是当仪表用完时可以看到的颜色。您可以选择任何颜色或使其完全透明。</p><figure class="mc md me mf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi my"><img src="../Images/7f527a3c42b373ddeb454dade8709ad6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1392/1*GQRksb5Z2aPqWnZJzm8r_w.gif"/></div></div></figure><p id="2442" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">6.然后，我们可以选择代表完整仪表的填充颜色。</p><figure class="mc md me mf gt jr gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/257af81101abbfd12eeb79fad89c08e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1388/1*g8J3x3xU2e4u6MlaVOh9YQ.gif"/></div></figure><p id="94fc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">7.确保滑块不可交互，因为我们将对其全部功能进行编程。</p><figure class="mc md me mf gt jr gh gi paragraph-image"><div class="gh gi na"><img src="../Images/52cb3d39eb577faa0a672c96385fb1e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1310/1*utWtO37ZTbkMu10CWdHKTw.gif"/></div></figure></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><h1 id="ad17" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">滑块编程</h1><p id="ae23" class="pw-post-body-paragraph jy jz iq ka b kb nb kd ke kf nc kh ki kj nd kl km kn ne kp kq kr nf kt ku kv ij bi translated">下面的例子展示了我为2D太空射手推力机构编写的代码，然而，同样的逻辑也适用于耐力棒。</p><ol class=""><li id="4e1d" class="ml mm iq ka b kb kc kf kg kj mn kn mo kr mp kv mq mr ms mt bi translated">首先，我们的代码中需要Unity UI库。</li></ol><figure class="mc md me mf gt jr gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/ad770fccfa3c2ab1bc663dae4888aee7.png" data-original-src="https://miro.medium.com/v2/resize:fit:700/format:webp/1*luhuzP0_6I9H-1ckqV0aWA.png"/></div></figure><p id="f2d6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">2.现在我们可以访问UI了，我们可以为滑块创建一个引用。这将是一个SerializeField，以便我们可以在检查器中设置它。</p><figure class="mc md me mf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nh"><img src="../Images/c5d27ffc82a3126f1841cc647ff631b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2AFabRVACpGOq0QB2zZltQ.png"/></div></div></figure><figure class="mc md me mf gt jr gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/c2f3e2af3d6c1707464e57aee9555fe4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1396/1*BoR7lljR6kQ8zwds9D8g5g.gif"/></div></figure><p id="efc0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">3.在Start方法中获取Slider组件。</p><figure class="mc md me mf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nj"><img src="../Images/eb523212cecebc2fcca9003d87f88e01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DZducdJUd845KChqEw5qgg.png"/></div></div></figure><p id="45be" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">4.在试图在代码中使用组件之前，最好先检查它是否为空。</p><figure class="mc md me mf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nj"><img src="../Images/167f7f662a82f6f97b8e2ef7d7a63d31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mdPY0uSb4f75Orf1lp83fw.png"/></div></div></figure><p id="e880" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">5.为最大或总燃料值创建一个全局<strong class="ka ir">变量，并创建一个<strong class="ka ir">布尔变量，帮助我们稍后控制推力</strong>特性。默认情况下，推力变量将被设置为假，因为我们的球员不只是开始推力或运行。</strong></p><figure class="mc md me mf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nk"><img src="../Images/d8954fe7641ac402f20434f0a2e238eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g9q3G4rDuTPtfIxx-7jEqQ.png"/></div></div></figure><p id="552c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">5.在Update方法中设置滑块值。</p><figure class="mc md me mf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nl"><img src="../Images/d9a6b5e8c56286554d6184d4fd709c3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qqrMPETXEv1RdjEeNFOePw.png"/></div></div></figure><p id="c5ff" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">6.创建void方法来处理先前建立的布尔值。最佳实践是使用方法来更改此类变量的值，而不是动态更改。</p><p id="4138" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">请注意，每当玩家停止推进时，玩家代码中的速度变量是如何设置为默认值的，这意味着在此期间他们不会移动得更快。</p><figure class="mc md me mf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nm"><img src="../Images/b7442206b97eaed9ebbd92573483e6cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vk_RdQcAHvLbk5vXiof2Cg.png"/></div></div></figure><p id="b34f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">7.创建更新仪表或条形图的方法。这种方法是根据油量计减少或增加的速度来计算燃油总量的。int参数值将在协程中设置。下面的if语句使用stopThrusting方法来确保当横杠用完时播放器的速度被设置为默认值。</p><figure class="mc md me mf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nm"><img src="../Images/4139e3c9887a177f3433c3fd53144e9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LV9fiBFJ8gTG6Mt6hbaDaA.png"/></div></div></figure><p id="d1ea" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">8.第一个协程用于推进或冲刺功能。只要我们之前创建的布尔值为真，while循环就会运行，在此期间，它会每秒钟减少20的耐力，或者您在代码中选择的时间长度。</p><p id="2871" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">因为滑块值是在更新中设置的，所以这种计算会在发生时被它主动反映出来。</p><blockquote class="nn no np"><p id="8737" class="jy jz nq ka b kb kc kd ke kf kg kh ki nr kk kl km ns ko kp kq nt ks kt ku kv ij bi translated"><strong class="ka ir">注意</strong>:你可以在这里获得更多关于如何使用协程<a class="ae mk" href="https://medium.com/codex/coroutines-with-unity-b5a2b3fc3426" rel="noopener">的信息。</a></p></blockquote><figure class="mc md me mf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nu"><img src="../Images/56ca5c2d20a427020e90b95269a5c45f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ARMbxCuLC0vmtuisISSzeg.png"/></div></div></figure><p id="be08" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">9.第二个协程是重新填充量表，总体上遵循与前一个相同的逻辑。</p><figure class="mc md me mf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nm"><img src="../Images/bd023a674695b3701ea4fecbf569ff92.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W2JHi8Y6HD-QXbCvbSgksA.png"/></div></div></figure><p id="412c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">10.最后，我们需要能够完成按键时的行为。这就是使用处理布尔值的方法的地方，通过在按键被按下或释放时调用它们，我们可以控制协程内的while循环何时激活，并且只要条件分别为真或假，就连续执行它们。</p><figure class="mc md me mf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nu"><img src="../Images/c85c4e9cfb6c7af72b73d567ac89bc83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wB5fIFayvzOA-LK6Zfrtbg.png"/></div></div></figure><h2 id="d7a4" class="nv le iq bd lf nw nx dn lj ny nz dp ln kj oa ob lr kn oc od lv kr oe of lz og bi translated"><strong class="ak">结果:</strong></h2><figure class="mc md me mf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oh"><img src="../Images/6632f2e9fd671a4d37ca440f1a96d471.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Ut9Kr1LHZEOKejqNh9HLKQ.gif"/></div></div></figure></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><p id="f319" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这篇文章是我在GameDevHQ学徒期间正在进行的一系列编码挑战的一部分。接下来的文章将会涉及更多的内容！</p></div></div>    
</body>
</html>