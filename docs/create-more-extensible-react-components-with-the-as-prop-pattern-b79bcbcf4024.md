# 使用“as”prop 模式创建更多可扩展的 React 组件

> 原文：<https://levelup.gitconnected.com/create-more-extensible-react-components-with-the-as-prop-pattern-b79bcbcf4024>

![](img/4987cfb4eb289f033dc8c30b565c5cea.png)

React 组件将 HTML 语义烘焙到它们的实现中。以这个`Title`组件为例:

虽然这不是一个特别有趣或健壮的组件，但它将有助于说明一个有用的概念。该组件创建一个 HTML `h1`元素，将一个`className`属性集应用到`"title"`来对其进行样式化，然后允许组件的消费者传递他们想要使用`children`属性呈现的任何内容。在这种情况下，语义是表示为`h1`元素的标题级别 1。

该组件可以这样使用:

我们可以预期`Demo`会产生如下效果:

基于此，我们可以清楚地看到`Demo`创建了一个`section`元素，而`Title`创建了一个`h1`。对于这个简单但不自然的用例来说，这很好。

当我们需要我们的`Title`组件来渲染其他东西时，我们该怎么做？我们可能需要它呈现为一个`h2`或者一个普通的`div`。当针对 SEO 进行优化或提高页面的可访问性时，我们通常需要这种灵活性(方便地改善其中一个往往会改善另一个)。不管我们的理由是什么，我们该如何处理？创建一个`TitleH2`或`TitleDiv`除了用不同的元素替换包装器 HTML 元素之外什么也不做，这似乎一点也不明智。正如您现在可能已经猜到的，这就是可以利用`as`道具产生巨大效果的地方。

# `as`道具

下面是使用`as`道具的样子:

`as` prop 正在指示组件(`Title`)将其包装器元素*呈现为*别的东西。如果我们不指定一个`as`属性，组件将使用它内部定义的默认值。

下面是它在代码中的工作方式:

让我们来分析一下这里发生了什么。在`Title`函数中，我们正在析构`props`的两个属性:`as`和`children`。除了我们现在使用析构变量代替了`props.children`之外，使用`children`并没有真正改变什么。我们还对`as`属性进行了析构，然后将其别名化为一个名为`Component`的新常量。由于有了`defaultProps`，如果`Title`的消费者没有为`as`指定一个值，`Component`将评估为`'h1'`。在这种情况下，`Title`将呈现:

然而，如果`Title`的用户确实指定了一个`as`值，那么变成了被渲染的*。*

# 为什么把`as`道具别名为`Component`？

类似于“as”这个名字，`Component`这个名字有些武断。重要的一点是，当你在 React 元素的上下文中返回 prop(例如`<Component />`)时，它必须大写。这只是一个反应规则。小写组件名是为 DOM 节点保留的，来自 react-dom 库。

# 如同自定义组件一样使用

关于`as` prop 的一件很酷的事情是它不局限于 HTML 元素。您可以传入自定义的 React 组件，而无需任何额外的工作。让我们假设我们有一个名为`SpecialButton`的组件，我们希望它看起来像一个`Title`但呈现为一个按钮。

如果我们分析一下这是怎么回事，它看起来像这样:

注意，为了让`Title`组件样式(即`className="title"`)正确地前进到最后的`<button />`，我们需要在`SpecialButton`组件上析构`className`，然后将道具前进到最后的按钮。

和`SpecialButton`中的情况一样，我发现沿着`className`道具转发是一种有用的通用最佳实践。我计划在后续的帖子中对此进行扩展，我将举例说明一种更健壮的处理`className`和其他你可能想要转发的道具的方法。

这就是它的工作原理。`as`道具没什么特别的。它只是一个和其他一样的道具。