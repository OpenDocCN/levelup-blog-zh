<html>
<head>
<title>Making the perfect commit</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">做出完美的承诺</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/making-the-perfect-commit-b2d98e82bf48?source=collection_archive---------20-----------------------#2022-11-20">https://levelup.gitconnected.com/making-the-perfect-commit-b2d98e82bf48?source=collection_archive---------20-----------------------#2022-11-20</a></blockquote><div><div class="fc ht hu hv hw hx"/><div class="hy hz ia ib ic"><div class=""/><p id="fe7d" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hy bi translated">进行完美提交时要记住的几点</p><figure class="kb kc kd ke gg kf fu fv paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="fu fv ka"><img src="../Images/dd07b01f305782a48263e58339bedb49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*u5PsBf9xxGmopIAY"/></div></div><figcaption class="km kn fw fu fv ko kp bd b be z dk translated">照片由<a class="ae kq" href="https://unsplash.com/ja/@yancymin?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">扬西·敏</a>在<a class="ae kq" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="5607" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hy bi translated">作为一名开发人员，您可能有一天会思考“完美的提交看起来像什么？”</p><p id="9183" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hy bi translated">如果是，那么这篇文章就是给你的！</p><p id="0650" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hy bi translated">请记住，这些仅仅是我的观点。这些可能因开发者而异。这里的最终目标是能够提高生产力，使变更管理更加有效和容易。</p><p id="1ea8" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hy bi translated">说到这里，让我们开始吧！</p><h1 id="ccd9" class="kr ks if bd kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">完美提交的特征</h1><p id="3b83" class="pw-post-body-paragraph jc jd if je b jf lp jh ji jj lq jl jm jn lr jp jq jr ls jt ju jv lt jx jy jz hy bi translated">根据我的观点，以下是完美提交的特征:</p><ol class=""><li id="6726" class="lu lv if je b jf jg jj jk jn lw jr lx jv ly jz lz ma mb mc bi translated">一个单一的重点变化。</li><li id="1c4c" class="lu lv if je b jf md jj me jn mf jr mg jv mh jz lz ma mb mc bi translated">添加/更新了必要时详细阐述实施的注释。</li><li id="a807" class="lu lv if je b jf md jj me jn mf jr mg jv mh jz lz ma mb mc bi translated">增加/更新了解释变更的文档。</li><li id="70da" class="lu lv if je b jf md jj me jn mf jr mg jv mh jz lz ma mb mc bi translated">确保引入的变更正常运行的相关测试。</li><li id="9f0b" class="lu lv if je b jf md jj me jn mf jr mg jv mh jz lz ma mb mc bi translated">一个小而恰当的提交消息。提交消息必须链接到问题/票据。</li><li id="dfad" class="lu lv if je b jf md jj me jn mf jr mg jv mh jz lz ma mb mc bi translated">它必须是一个稳定的、可以部署的单位。</li></ol><p id="06e5" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hy bi translated">在本文接下来的部分，我将说明如何确保尽可能遵循所有的步骤。</p><h1 id="1132" class="kr ks if bd kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">1.单一焦点变化</h1><p id="5088" class="pw-post-body-paragraph jc jd if je b jf lp jh ji jj lq jl jm jn lr jp jq jr ls jt ju jv lt jx jy jz hy bi translated">这里所说的“改变”可以是任何东西，从一个bug的修复，到一个特性的实现或者一个打字错误的纠正。不管它是什么，你必须确保已经被改变/新添加/删除的东西都与那个改变直接一致。</p><p id="e82a" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hy bi translated">与当前变更无关的额外变更不得添加到提交中。</p><p id="14dd" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hy bi translated">这里的目标是能够实现一些可以实现的事情</p><ol class=""><li id="764b" class="lu lv if je b jf jg jj jk jn lw jr lx jv ly jz lz ma mb mc bi translated">通过<a class="ae kq" href="https://git-scm.com/docs/git-blame" rel="noopener ugc nofollow" target="_blank"> <em class="mi"> git责备</em> </a>或<a class="ae kq" href="https://git-scm.com/docs/git-blame" rel="noopener ugc nofollow" target="_blank"> <em class="mi"> git平分</em> </a>，在PRs中轻松地进行原子式审查</li><li id="ce4c" class="lu lv if je b jf md jj me jn mf jr mg jv mh jz lz ma mb mc bi translated">如果情况需要，可以使用<a class="ae kq" href="https://git-scm.com/docs/git-revert" rel="noopener ugc nofollow" target="_blank"> <em class="mi"> git回复</em> </a>轻松回复</li><li id="f817" class="lu lv if je b jf md jj me jn mf jr mg jv mh jz lz ma mb mc bi translated">轻易地将<a class="ae kq" href="https://git-scm.com/docs/git-cherry-pick" rel="noopener ugc nofollow" target="_blank"> <em class="mi">樱桃摘下</em> </a>放到其他树枝上</li></ol><p id="986d" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hy bi translated">一个人可以通过了解</p><ol class=""><li id="254e" class="lu lv if je b jf jg jj jk jn lw jr lx jv ly jz lz ma mb mc bi translated">什么不能犯。项目必须有一个<a class="ae kq" href="https://www.atlassian.com/git/tutorials/saving-changes/gitignore" rel="noopener ugc nofollow" target="_blank">。gitignore </a>文件。</li><li id="56dc" class="lu lv if je b jf md jj me jn mf jr mg jv mh jz lz ma mb mc bi translated">如何存放提交的特定文件</li><li id="6fb3" class="lu lv if je b jf md jj me jn mf jr mg jv mh jz lz ma mb mc bi translated">如何为提交准备文件的特定行，而不是整个文件(是的，这是可能的！借助<a class="ae kq" href="https://git-scm.com/docs/git-add#Documentation/git-add.txt--p" rel="noopener ugc nofollow" target="_blank"> <em class="mi"> git add -p </em> </a></li></ol><p id="0a7b" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hy bi translated">一个人必须避免落入利用的陷阱</p><pre class="kb kc kd ke gg mj mk ml bn mm mn bi"><span id="d542" class="mo ks if mk b be mp mq l mr ms">git add .</span></pre><h1 id="3d22" class="kr ks if bd kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">2.相关评论</h1><p id="403b" class="pw-post-body-paragraph jc jd if je b jf lp jh ji jj lq jl jm jn lr jp jq jr ls jt ju jv lt jx jy jz hy bi translated">最好的代码是不需要额外注释的代码。然而，随着应用程序的复杂性和规模的增长，我们必须避免落入使用的陷阱。我们不是唯一在代码库上工作的人，添加注释是必要的。</p><p id="699c" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hy bi translated">在代码中编写适当的注释时，有几点必须牢记在心</p><ol class=""><li id="f798" class="lu lv if je b jf jg jj jk jn lw jr lx jv ly jz lz ma mb mc bi translated">不重复代码。这种评论因其多余而变得毫无用处。</li><li id="ccf0" class="lu lv if je b jf md jj me jn mf jr mg jv mh jz lz ma mb mc bi translated">不要含糊。它们必须只有一种解释，并且不应留下任何疑问。</li><li id="45b6" class="lu lv if je b jf md jj me jn mf jr mg jv mh jz lz ma mb mc bi translated">消除混乱而不是引起混乱。</li><li id="28e0" class="lu lv if je b jf md jj me jn mf jr mg jv mh jz lz ma mb mc bi translated">必须提供在编写代码时使用的参考/原始源代码的链接。</li><li id="d738" class="lu lv if je b jf md jj me jn mf jr mg jv mh jz lz ma mb mc bi translated">必须用于标记未完成的实现。</li></ol><pre class="kb kc kd ke gg mj mk ml bn mm mn bi"><span id="8c06" class="mo ks if mk b be mp mq l mr ms">// TODO : Add fallback values for unavailable keys</span></pre><p id="c74e" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hy bi translated">6.必要时提供文档注释、功能注释和逻辑注释。</p><p id="ac82" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hy bi translated">7.在编写注释时，使用适当的代码注释或标记。例如Javascript使用<a class="ae kq" href="https://jsdoc.app/about-getting-started.html" rel="noopener ugc nofollow" target="_blank"> <em class="mi"> JSDoc </em> </a> <em class="mi"> </em>而JAVA使用<em class="mi"/><a class="ae kq" href="https://www.oracle.com/be/technical-resources/articles/java/javadoc-tool.html" rel="noopener ugc nofollow" target="_blank"><em class="mi">JavaDoc</em></a><em class="mi">。</em></p><p id="033d" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hy bi translated">8.使用适当的扩展来提高生产力，例如<a class="ae kq" href="https://marketplace.visualstudio.com/items?itemName=Stepsize.stepsize" rel="noopener ugc nofollow" target="_blank">步长</a>或<a class="ae kq" href="https://marketplace.visualstudio.com/items?itemName=aaron-bond.better-comments" rel="noopener ugc nofollow" target="_blank">更好的评论</a>来改进问题和评论管理。</p><p id="f359" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hy bi translated">有关良好评论实践的更多信息，请参考<a class="ae kq" href="https://stackoverflow.blog/2021/12/23/best-practices-for-writing-code-comments/" rel="noopener ugc nofollow" target="_blank"> <em class="mi">本</em> </a> <em class="mi">。</em></p><h1 id="e017" class="kr ks if bd kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">3.相关文件</h1><p id="11cc" class="pw-post-body-paragraph jc jd if je b jf lp jh ji jj lq jl jm jn lr jp jq jr ls jt ju jv lt jx jy jz hy bi translated">一个完整的、明确的和精确的文档是开发者的朋友。必须确保不仅是正在编写的代码，而且相关的文档也同时得到更新和版本控制。</p><p id="2502" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hy bi translated">这也包括更新团队使用的邮递员集合、SLA协议等。</p><h1 id="6f66" class="kr ks if bd kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">4.同时测试</h1><p id="d975" class="pw-post-body-paragraph jc jd if je b jf lp jh ji jj lq jl jm jn lr jp jq jr ls jt ju jv lt jx jy jz hy bi translated">测试驱动开发或简称为TDD是众所周知的开发实践。然而，你不能坚持认为这是做事的唯一方式。</p><p id="a7a8" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hy bi translated">测试的最终目标是确保添加的新东西不会破坏已经工作的东西。当测试企业级应用程序时，人们可能会发现手动测试所有可能的工作流是一项非常艰巨的任务。</p><p id="5998" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hy bi translated">因此，建议确保建立适当的测试框架，并在代码库发生变化时不断添加/更新测试。</p><h1 id="da0f" class="kr ks if bd kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">5.适当的提交消息</h1><p id="60e3" class="pw-post-body-paragraph jc jd if je b jf lp jh ji jj lq jl jm jn lr jp jq jr ls jt ju jv lt jx jy jz hy bi translated">我们开发人员可能会发现自己正在努力解决的一件事是提出一个漂亮而简短的提交消息。我们中的一些人甚至试图在提交消息中解释变更的整个实现。然而，我想提出以下建议</p><ol class=""><li id="54f5" class="lu lv if je b jf jg jj jk jn lw jr lx jv ly jz lz ma mb mc bi translated">始终在您的提交消息中包含问题/票据编号。这有助于将变化与相应的任务联系起来。该问题/票据将包含</li></ol><ul class=""><li id="3d5e" class="lu lv if je b jf jg jj jk jn lw jr lx jv ly jz mt ma mb mc bi translated">变更的进一步描述。</li><li id="dbe6" class="lu lv if je b jf md jj me jn mf jr mg jv mh jz mt ma mb mc bi translated">验证和/或重现问题的步骤。</li><li id="8db4" class="lu lv if je b jf md jj me jn mf jr mg jv mh jz mt ma mb mc bi translated">一个对话链，解释什么使这种改变成为必要，以及在实施改变时所有的发现是什么。</li><li id="d55a" class="lu lv if je b jf md jj me jn mf jr mg jv mh jz mt ma mb mc bi translated">结论以及为什么决定采用这种方法。</li><li id="69c2" class="lu lv if je b jf md jj me jn mf jr mg jv mh jz mt ma mb mc bi translated">最后，证明已实施的变更是有效的。</li></ul><p id="46f8" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hy bi translated">让这个讨论远离提交消息给了我们尽可能描述的自由。而不是编写冗长的提交消息。始终瞄准一个只是作为标题。</p><p id="e472" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hy bi translated">2.遵循编写提交消息的标准。例如，我更喜欢我的提交消息的格式</p><pre class="kb kc kd ke gg mj mk ml bn mm mn bi"><span id="de4b" class="mo ks if mk b be mp mq l mr ms">git commit -m "&lt;Issue-number&gt;; &lt;Message&gt;"</span></pre><p id="b832" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hy bi translated">该消息通常包括一个动作动词，如fixed、implemented、resolved等，它表示首先要做的是什么，然后是什么。</p><p id="bdbc" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hy bi translated">例子</p><ul class=""><li id="6cdb" class="lu lv if je b jf jg jj jk jn lw jr lx jv ly jz mt ma mb mc bi translated">"#53;将节点版本从13.14.0升级到16.16.0 "</li><li id="55e7" class="lu lv if je b jf md jj me jn mf jr mg jv mh jz mt ma mb mc bi translated">"#47, #69;修复了react@18的冲突对等依赖关系</li><li id="4fdb" class="lu lv if je b jf md jj me jn mf jr mg jv mh jz mt ma mb mc bi translated">"#12;已实施RBAC”</li><li id="f2ac" class="lu lv if je b jf md jj me jn mf jr mg jv mh jz mt ma mb mc bi translated">"#13;回复#12 RBAC实施"</li></ul><p id="717f" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hy bi translated">这是我所遵循的。你的团队可能会提出他们自己的书写信息的标准。必须使用<a class="ae kq" href="https://www.conventionalcommits.org/en/v1.0.0/#summary" rel="noopener ugc nofollow" target="_blank">常规提交</a>或类似的标准化概念。对于这个点的补充解读可能是<a class="ae kq" href="https://dev.to/visuellverstehen/new-git-guidelines-we-have-switched-to-conventional-commits-1p0c" rel="noopener ugc nofollow" target="_blank"> <em class="mi">这个</em> </a> <em class="mi">。</em></p><h1 id="375d" class="kr ks if bd kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">6.可部署的代码单元</h1><p id="c41c" class="pw-post-body-paragraph jc jd if je b jf lp jh ji jj lq jl jm jn lr jp jq jr ls jt ju jv lt jx jy jz hy bi translated">这是要记住的最重要的事情之一。您做出的每个承诺都必须值得部署。永远不要提交中断的代码。</p><p id="0900" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hy bi translated">提交必须通过构建、静态代码分析、漏洞评估、基于团队格式化风格指南的统一格式化，并且必须通过团队实施的任何其他相关检查。可以使用<a class="ae kq" href="https://typicode.github.io/husky/#/" rel="noopener ugc nofollow" target="_blank"> husky </a>设置预提交挂钩，以确保在提交之前运行检查，从而避免任何不正确的提交。</p><p id="7abf" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hy bi translated">这些检查也可以在拉请求上执行，在拉请求中，除非所有检查都通过，否则不允许合并更改。</p><p id="fe95" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hy bi translated">这是我见过的新开发人员最常犯的错误之一。因为这样或那样的原因，他们提交了一个不完整的变更。</p><p id="3970" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hy bi translated">万一你发现自己正处于做出改变的过程中，但必须紧急转移到另一项任务，那么请<a class="ae kq" href="https://git-scm.com/docs/git-stash" rel="noopener ugc nofollow" target="_blank"> <em class="mi">保存</em> </a>你的改变，而不是提交不完整的改变。人们总是可以回到隐藏的变化，并继续工作。</p></div><div class="ab cl mu mv hj mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="hy hz ia ib ic"><p id="2343" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hy bi translated">我希望我能给你提供至少一条你以前不知道的有用信息。如果你对此有任何好的建议，请留下评论解释。我很乐意将它们包含在上面的文章中。</p><p id="6c6a" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hy bi translated"><em class="mi">都是乡亲们！直到下一次</em>👋</p></div><div class="ab cl mu mv hj mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="hy hz ia ib ic"><h1 id="5857" class="kr ks if bd kt ku nb kw kx ky nc la lb lc nd le lf lg ne li lj lk nf lm ln lo bi translated">分级编码</h1><p id="228d" class="pw-post-body-paragraph jc jd if je b jf lp jh ji jj lq jl jm jn lr jp jq jr ls jt ju jv lt jx jy jz hy bi translated">感谢您成为我们社区的一员！在你离开之前:</p><ul class=""><li id="0d4e" class="lu lv if je b jf jg jj jk jn lw jr lx jv ly jz mt ma mb mc bi translated">👏为故事鼓掌，跟着作者走👉</li><li id="ba47" class="lu lv if je b jf md jj me jn mf jr mg jv mh jz mt ma mb mc bi translated">📰查看<a class="ae kq" href="https://levelup.gitconnected.com/?utm_source=pub&amp;utm_medium=post" rel="noopener ugc nofollow" target="_blank">升级编码出版物</a>中的更多内容</li><li id="b4ab" class="lu lv if je b jf md jj me jn mf jr mg jv mh jz mt ma mb mc bi translated">🔔关注我们:<a class="ae kq" href="https://twitter.com/gitconnected" rel="noopener ugc nofollow" target="_blank">Twitter</a>|<a class="ae kq" href="https://www.linkedin.com/company/gitconnected" rel="noopener ugc nofollow" target="_blank">LinkedIn</a>|<a class="ae kq" href="https://newsletter.levelup.dev" rel="noopener ugc nofollow" target="_blank">时事通讯</a></li></ul><p id="7c4f" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hy bi translated">🚀👉<a class="ae kq" href="https://jobs.levelup.dev/talent/welcome?referral=true" rel="noopener ugc nofollow" target="_blank"> <strong class="je ig">加入升级人才集体，找到一份神奇的工作</strong> </a></p></div></div>    
</body>
</html>