<html>
<head>
<title>Debounce in JavaScript — Improve Your Application’s Performance</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript中的去抖——提高应用程序的性能</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/debounce-in-javascript-improve-your-applications-performance-5b01855e086?source=collection_archive---------0-----------------------#2017-10-02">https://levelup.gitconnected.com/debounce-in-javascript-improve-your-applications-performance-5b01855e086?source=collection_archive---------0-----------------------#2017-10-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="e81e" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">解释去抖函数以及如何在JavaScript代码中使用它来提高性能</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/1459524c74d2d2f075cd234317d48ce3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*-r8hP_iDBPrj-odjIZajzw.gif"/></div></div></figure><p id="6978" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"> <em class="ln">了解一种类似的技术叫做</em> </strong> <a class="ae lo" href="https://skilled.dev/course/throttle" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="ln">节流</em> </strong> </a></p><p id="f174" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">你有没有注意到，当你输入一个搜索结果时，会有一个延迟，然后才会出现结果。该功能通常由一个名为<code class="fe lp lq lr ls b">debounce</code>的函数控制(它也可以是一个具有类似结果的<code class="fe lp lq lr ls b">throttle</code>函数)。<code class="fe lp lq lr ls b">debounce</code>功能延迟<code class="fe lp lq lr ls b">keyup</code>事件的处理，直到用户停止输入一段预定的时间。</p><p id="df87" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这避免了用户界面代码需要处理每个事件，也大大减少了发送到服务器的API调用的数量。处理输入的每个字符会损害性能，并给后端增加不必要的负载。</p><p id="ddbb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">从头实现去抖是一个常见的面试问题。它测试你对中级和高级JavaScript概念的理解，比如:异步编程、回调、作用域和闭包。这也是在现实世界的应用程序中使用的提高性能的实用解决方案，并表明您了解为真实用户编写良好代码的工具。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi lt"><img src="../Images/aced8a676f6e35c5f7a618a71ff5fd7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TLAWV1AQAnbMj9Ravbgq7A.png"/></div></div></figure><p id="c0da" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我建了一个课程帮助你<a class="ae lo" href="https://skilled.dev" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir">掌握编码面试&gt; </strong> </a></p><div class="lu lv gp gr lw lx"><a href="https://skilled.dev" rel="noopener  ugc nofollow" target="_blank"><div class="ly ab fo"><div class="lz ab ma cl cj mb"><h2 class="bd ir gy z fp mc fr fs md fu fw ip bi translated">编写面试问题</h2><div class="me l"><h3 class="bd b gy z fp mc fr fs md fu fw dk translated">一个完整的平台，在这里我会教你找到下一份工作所需的一切，以及…</h3></div><div class="mf l"><p class="bd b dl z fp mc fr fs md fu fw dk translated">技术开发</p></div></div><div class="mg l"><div class="mh l mi mj mk mg ml kp lx"/></div></div></a></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi lt"><img src="../Images/aced8a676f6e35c5f7a618a71ff5fd7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TLAWV1AQAnbMj9Ravbgq7A.png"/></div></div></figure><p id="9a03" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">去抖是节流的表亲，它们都提高了网络应用的性能。但是，它们用于不同的情况。当您只关心最终状态时，可以使用去抖。例如，等待直到用户停止键入来获取提前键入搜索结果。当你想处理所有的中间状态，但速度可控时，最好使用节流。例如，在用户调整窗口大小时跟踪屏幕宽度，并在页面内容改变时重新排列页面内容，而不是等到用户完成。</p><p id="6aca" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们深入了解一下去抖是什么样的:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="4ee2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">去抖是一个高阶函数，它是一个返回另一个函数的函数(为了清楚起见，这里命名为<code class="fe lp lq lr ls b">executedFunction</code>)。这样做是为了在<code class="fe lp lq lr ls b">func</code>和<code class="fe lp lq lr ls b">wait</code>函数参数和<code class="fe lp lq lr ls b">timeout</code>变量周围形成一个<a class="ae lo" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Closures" rel="noopener ugc nofollow" target="_blank">闭包</a>，以便保存它们的值。以下是每个变量的定义:</p><ul class=""><li id="3cdc" class="mo mp iq kt b ku kv kx ky la mq le mr li ms lm mt mu mv mw bi translated"><code class="fe lp lq lr ls b">func</code>:在去抖时间后，您想要执行的功能</li><li id="c7ce" class="mo mp iq kt b ku mx kx my la mz le na li nb lm mt mu mv mw bi translated"><code class="fe lp lq lr ls b">wait</code>:在执行<code class="fe lp lq lr ls b">func</code>之前，您希望去抖功能在最后一次接收动作之后等待的时间。对于我们的typeahead示例，它是最后一次按键后等待的时间。</li><li id="2ccd" class="mo mp iq kt b ku mx kx my la mz le na li nb lm mt mu mv mw bi translated"><code class="fe lp lq lr ls b">timeout</code>:用于指示正在运行的去抖的值。</li></ul><p id="fd5b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们可以使用去抖功能:</p><pre class="kg kh ki kj gt nc ls nd ne aw nf bi"><span id="b4bf" class="ng nh iq ls b gy ni nj l nk nl">var returnedFunction = debounce(function() {<br/>  // All the taxing stuff you do<br/>}, 250);<br/><br/>window.addEventListener('resize', returnedFunction);</span></pre><p id="d0ff" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">因为去抖返回一个函数，所以第一个例子中的<code class="fe lp lq lr ls b">executedFunction</code>和第二个例子中的<code class="fe lp lq lr ls b">returnedFunction</code>是同一个函数。每次调整窗口大小时，都会执行<code class="fe lp lq lr ls b">executedFunction</code> / <code class="fe lp lq lr ls b">returnedFunction</code>。</p><p id="7274" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们的<code class="fe lp lq lr ls b">executedFunction</code>扩展了参数<code class="fe lp lq lr ls b">(...args)</code>以允许去抖函数接收任意数量的参数传递给回调函数。</p><p id="78f9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们声明一个名为<code class="fe lp lq lr ls b">later</code>的回调函数，它是在去抖计时器结束后执行的函数。这是<code class="fe lp lq lr ls b">setTimeout</code>到期后将被调用的内容。</p><p id="0867" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">接下来，我们<code class="fe lp lq lr ls b">clearTimeout</code>阻止了回调的执行，从而重新开始去抖。然后我们(重新)声明<code class="fe lp lq lr ls b">timeout</code>，开始去抖等待周期。如果在另一个事件之前已经过了完整的<code class="fe lp lq lr ls b">wait</code>时间，那么我们执行<code class="fe lp lq lr ls b">later</code>回调函数。<code class="fe lp lq lr ls b">timeout</code>被设置为<code class="fe lp lq lr ls b">null</code>，这意味着去抖已经结束。这执行<code class="fe lp lq lr ls b">func(...args)</code>。</p><p id="1b42" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">有一个更高级的版本，我们可以将一个<code class="fe lp lq lr ls b">immediate</code>标志传递给<code class="fe lp lq lr ls b">debounce</code>。目前我们总是等到去抖结束才执行回调，但是使用<code class="fe lp lq lr ls b">immediate</code>，你可以改变它，使函数在前沿执行，直到它延迟调用足够长的时间耗尽定时器，才允许你再次执行。</p><p id="ca2a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这也是这个函数的注释版本。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="b15b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">去抖的常见情况是<code class="fe lp lq lr ls b">resize</code>、<code class="fe lp lq lr ls b">scroll</code>和<code class="fe lp lq lr ls b">keyup/keydown</code>事件。此外，您应该考虑将任何触发过度计算或API调用的交互用去抖封装起来。</p></div><div class="ab cl nm nn hu no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="ij ik il im in"><p id="c030" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="ln">如果您觉得本文有帮助，请点击</em>👏<em class="ln">。</em> <a class="ae lo" href="https://medium.com/@treyhuffine" rel="noopener"> <em class="ln">关注我</em> </a> <em class="ln">了解更多关于React、Node.js、JavaScript和开源软件的文章！你也可以在</em><a class="ae lo" href="https://twitter.com/treyhuffine" rel="noopener ugc nofollow" target="_blank"><em class="ln">Twitter</em></a><em class="ln">或者</em><a class="ae lo" href="https://gitconnected.com/treyhuffine" rel="noopener ugc nofollow" target="_blank"><em class="ln">git connected</em></a><em class="ln">上找到我。</em></p><div class="lu lv gp gr lw lx"><a href="https://gitconnected.com/resume-builder" rel="noopener  ugc nofollow" target="_blank"><div class="ly ab fo"><div class="lz ab ma cl cj mb"><h2 class="bd ir gy z fp mc fr fs md fu fw ip bi translated">软件工程师简历生成器| gitconnected</h2><div class="me l"><h3 class="bd b gy z fp mc fr fs md fu fw dk translated">免费打造不到5分钟的高质量软件工程简历。同步您的个人资料，我们会处理…</h3></div><div class="mf l"><p class="bd b dl z fp mc fr fs md fu fw dk translated">gitconnected.com</p></div></div><div class="mg l"><div class="nt l mi mj mk mg ml kp lx"/></div></div></a></div></div></div>    
</body>
</html>