<html>
<head>
<title>Looking to Deploy Your Django App?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">想部署你的Django应用吗？</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/deploying-django-from-the-aws-elastic-beanstalk-console-e9e726e662bf?source=collection_archive---------8-----------------------#2021-03-04">https://levelup.gitconnected.com/deploying-django-from-the-aws-elastic-beanstalk-console-e9e726e662bf?source=collection_archive---------8-----------------------#2021-03-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/adc74ee261455ef25f2183927f01dc16.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q47MtdUkFQAGR1X7Yy3Mgw.png"/></div></div></figure><p id="c8c6" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">Amazon Web Services为用户提供了两种部署弹性Beanstalk (EB)的选择:</p><p id="abf4" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">(1)<a class="ae kz" href="https://www.ordinarycoders.com/deploying-django" rel="noopener ugc nofollow" target="_blank">AWS弹性豆茎命令行界面(EB CLI) </a></p><p id="dd2d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">(AWS弹性豆茎控制台</p><p id="914d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这个Django + AWS Elastic Beanstalk教程将演示如何在AWS站点上提供的AWS EB控制台中部署Django web应用程序。</p><p id="0987" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><a class="ae kz" href="https://aws.amazon.com/free/?all-free-tier.sort-by=item.additionalFields.SortRank&amp;all-free-tier.sort-order=asc" rel="noopener ugc nofollow" target="_blank">按照下面列出的说明创建一个免费层AWS帐户</a>。</p><p id="ce12" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu"> <em class="la">注意:</em> </strong> <em class="la"> AWS EB目前只兼容Django版本</em> <code class="fe lb lc ld le b"><em class="la">2.1.15</em></code> <em class="la">或以下版本。使用较新版本的web framework会导致部署时出现兼容性问题。</em></p><h1 id="9cab" class="lf lg it bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated"><strong class="ak"> Django AWS弹性豆茎</strong></h1><p id="37a9" class="pw-post-body-paragraph kb kc it kd b ke md kg kh ki me kk kl km mf ko kp kq mg ks kt ku mh kw kx ky im bi translated">使用AWS Elastic Beanstalk控制台部署Django项目需要在上传之前将某些配置设置和文件添加到项目中。这包括一个<em class="la"> requirements.txt </em>文件、一个<em class="la"> ebextensions </em>文件和一个<em class="la"> django.config </em>文件。</p><p id="e2a5" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu">弹性豆茎要求. txt </strong></p><p id="d3d4" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><em class="la"> macOS终端</em></p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="333d" class="mq lg it le b gy mr ms l mt mu">(env)User-Macbook:mysite user$<br/>(env)User-Macbook:mysite user$ pip freeze &gt; requirements.txt</span></pre><p id="686b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><em class="la"> Windows命令提示符</em></p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="3331" class="mq lg it le b gy mr ms l mt mu">(env) C:\Users\Owner\desktop\code\env\mysite&gt;<br/>(env) C:\Users\Owner\desktop\code\env\mysite&gt; pip freeze &gt; requirements.txt</span></pre><p id="427c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">从运行完整应用程序的本地服务器开始。Ctrl + C并停止运行服务器。激活虚拟环境后，您应该还在<em class="la"> mysite </em>文件夹中。</p><p id="6fd9" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">然后将所有安装的应用程序保存在由命令<code class="fe lb lc ld le b">pip freeze &gt; requirements.txt</code>创建的<em class="la"> requirements.txt </em>文件中。这将允许Elastic Beanstalk使用本地安装的所有包。</p><p id="750f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu">查看requirements.txt文件</strong></p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="9e1e" class="mq lg it le b gy mr ms l mt mu">#<em class="la">env &gt; mysite &gt; requirements.txt</em></span><span id="41be" class="mq lg it le b gy mv ms l mt mu">Django==2.1.15<br/>...</span></pre><p id="cfae" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在代码编辑器中打开<em class="la"> requirements.txt </em>文件。<strong class="kd iu">如果有列出版本<code class="fe lb lc ld le b">0.0.0</code>的包，则仅</strong>编辑文件。<strong class="kd iu">删除</strong>此版本0.0.0包，如果列出，以防止部署时出错。保存对文件所做的更改。</p><p id="b827" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu">创造一个。ebextensions文件夹</strong></p><p id="99f7" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><em class="la"> macOS终端</em></p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="bd57" class="mq lg it le b gy mr ms l mt mu">(env)User-Macbook:mysite user$ mkdir .ebextensions</span></pre><p id="0af2" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu"> <em class="la"> Windows命令提示符</em> </strong></p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="0915" class="mq lg it le b gy mr ms l mt mu">(env) C:\Users\Owner\desktop\code\env\mysite&gt; mkdir .ebextensions</span></pre><p id="1c4f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在CLI中，运行命令<code class="fe lb lc ld le b">mkdir .ebextensions</code>创建一个<em class="la">。ebextensions </em>文件夹。这个文件夹将保存Django + AWS弹性豆茎设置。</p><p id="353c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu">创建一个django.config文件</strong></p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="760a" class="mq lg it le b gy mr ms l mt mu">#<em class="la">env &gt; mysite &gt; .ebextensions &gt; (New File) django.config</em></span><span id="6eda" class="mq lg it le b gy mv ms l mt mu">option_settings:<br/>  aws:elasticbeanstalk:container:python:<br/>    WSGIPath: mysite.wsgi:application</span></pre><p id="b263" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">打开新文件夹<em class="la">。ebextensions </em>并创建一个名为<em class="la"> django.config </em>的新文件。</p><p id="20ff" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">将上述ebextensions <code class="fe lb lc ld le b">option_settings</code>配置放入文件中，以允许AWS EB找到<em class="la"> wsgi.py </em>文件，并在生产中正确转发请求。</p><p id="ef44" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果你的项目不叫<em class="la"> mysite </em>，把它改成正确的名字。</p><h1 id="dc34" class="lf lg it bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated"><strong class="ak">将Django部署到AWS弹性豆茎控制台</strong></h1><p id="45c4" class="pw-post-body-paragraph kb kc it kd b ke md kg kh ki me kk kl km mf ko kp kq mg ks kt ku mh kw kx ky im bi translated">添加了适当的配置后，我们可以继续压缩根目录并将其部署到AWS Elastic Beanstalk控制台。</p><p id="3bb5" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu">压缩Django项目</strong></p><p id="f94d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">接下来，在Windows文件资源管理器或Mac Finder中找到您的Django项目，并将位于项目目录中<strong class="kd iu">的所有文件压缩。</strong></p><p id="09b5" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><em class="la">做</em> <strong class="kd iu"> <em class="la">而不是</em> </strong> <em class="la">压缩项目文件夹本身。</em></p><p id="d4d9" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">被压缩的物品应包括<em class="la">。ebextensions </em>、<em class="la"> main、</em>和<em class="la"> mysite </em>文件夹以及数据库、<em class="la"> manage.py、</em>和<em class="la"> requirements.txt </em>文件。</p><figure class="mi mj mk ml gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mw"><img src="../Images/9d30c4a7a221d1eb609a43ae738e7f30.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0xkHZ9Fveswuwvm9.PNG"/></div></div></figure><p id="0f66" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu"> AWS弹性豆茎上传Zip </strong></p><p id="c438" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">登录您的AWS帐户并打开Elastic Beanstalk控制台。单击屏幕右侧的“创建应用程序”按钮。</p><p id="dfc1" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">然后在<em class="la">应用程序信息</em>部分命名您的应用程序。您可以将<em class="la">应用标签</em>部分保留为空白。</p><p id="95ef" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">为您的平台选择“Python ”,其余的<em class="la">平台</em>部分将自动填充。</p><p id="0d39" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">最后，在<em class="la">应用代码</em>下选择“上传您的代码”。将出现一个名为<em class="la">源代码来源</em>的新部分，您需要选择“本地文件”并上传上一步压缩的文件夹。</p><p id="26f8" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">文件夹上传完成后，单击页面底部的“创建应用程序”继续。AWS EB将开始启动您的项目。</p><figure class="mi mj mk ml gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mx"><img src="../Images/0178dd5f485714fe6d28dc0c25c3637d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*QaY16ggULS-RQD75.gif"/></div></div><figcaption class="my mz gj gh gi na nb bd b be z dk translated">可交换的图像格式</figcaption></figure><h1 id="a86d" class="lf lg it bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated"><strong class="ak">在浏览器中打开您的项目</strong></h1><p id="71a7" class="pw-post-body-paragraph kb kc it kd b ke md kg kh ki me kk kl km mf ko kp kq mg ks kt ku mh kw kx ky im bi translated">当您的项目完成部署时，您将被带到环境仪表板。要查看已部署的项目，请单击页面顶部列出的Elastic Beanstalk域。</p><p id="9eec" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果您的环境正在产生<code class="fe lb lc ld le b">WARN</code>事件，请确保您已经遵循了前面的所有步骤并正确配置了文件。</p><figure class="mi mj mk ml gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mx"><img src="../Images/7c3e3d73764aa73250aaf5a095de07f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*bAnGeZYMQQYCpRzS.PNG"/></div></div></figure><h1 id="9fbf" class="lf lg it bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated"><strong class="ak">处理更具体的错误</strong></h1><p id="bec0" class="pw-post-body-paragraph kb kc it kd b ke md kg kh ki me kk kl km mf ko kp kq mg ks kt ku mh kw kx ky im bi translated"><strong class="kd iu">错误:您的WSGIpath引用了一个不存在的文件</strong></p><p id="d3de" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果你得到的是<code class="fe lb lc ld le b"><em class="la">"ERROR Your WSGIPath refers to a file that does not exist."</em></code> <em class="la"> : </em></p><p id="1af2" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">检查<em class="la"> django.config </em>文件，确保它具有正确的代码和格式。保存对文件的更改，重新压缩项目，然后再次部署。</p><p id="91d4" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果你还在得到<code class="fe lb lc ld le b"><em class="la">"ERROR Your WSGIPath refers to a file that does not exist."</em></code> <em class="la"> : </em></p><p id="1237" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果重新部署后仍出现此错误，请转到环境页面并选择侧菜单上的<em class="la">配置</em>。</p><p id="ceac" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在<em class="la">软件</em>类别下，点击“编辑”并找到<em class="la"> WSGIPath </em>。</p><p id="2a4f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">将路径更改为<em class="la"> mysite/wsgi.py </em>，然后保存更改并等待环境更新。</p><p id="ca83" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果您的项目根目录不是名为<em class="la"> mysite </em>的，则添加您的项目名称来代替<em class="la"> mysite </em>。</p><p id="750a" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu">错误:。ebextensions不工作</strong></p><p id="b224" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果你的<em class="la">。ebextensions </em>文件夹不能正常工作，请检查它是否被添加到项目的根目录中。</p><p id="b9e8" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这是由命令<code class="fe lb lc ld le b">django-admin startproject</code>创建的文件夹。它也是包含数据库、<em class="la"> manage.py </em>和<em class="la"> requirements.txt </em>的文件夹。</p><p id="1354" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu">误差:500 </strong></p><p id="125f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果你得到一个500错误，并且一切似乎都配置正确，检查<em class="la"> requirements.txt </em>文件是否<strong class="kd iu">而不是</strong>有一个列出了版本<code class="fe lb lc ld le b">0.0.0</code>的包。</p><p id="4481" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这个版本号为0.0.0的包导致<em class="la"> requirements.txt </em>文件无法正确读取。删除包并重新部署应该可以解决这个问题</p></div><div class="ab cl nc nd hx ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="im in io ip iq"><p id="b6d8" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><em class="la">原载于</em><a class="ae kz" href="https://www.ordinarycoders.com/blog/article/deploying-from-aws-eb-console" rel="noopener ugc nofollow" target="_blank"><em class="la">https://www.ordinarycoders.com</em></a><em class="la">。</em></p></div></div>    
</body>
</html>