<html>
<head>
<title>Develop a Todo GraphQL Server in Golang 🔥</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Golang开发一个Todo GraphQL服务器🔥</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/develop-a-todo-graphql-server-in-golang-2bc6ecae1463?source=collection_archive---------8-----------------------#2022-07-05">https://levelup.gitconnected.com/develop-a-todo-graphql-server-in-golang-2bc6ecae1463?source=collection_archive---------8-----------------------#2022-07-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/bd352d4c209eaca906c3bde355e65da6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pbZqTH2PJ-gaSFsONMegQA.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">graph QL-服务器</figcaption></figure><h1 id="a92c" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">介绍</h1><p id="dac5" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">这是一个使用GraphQL在Golang中开发的简单的Todo应用程序。本教程帮助您找到在Go中构建自己的GraphQL服务器实现的正确方法。</p><p id="05d2" class="pw-post-body-paragraph la lb iq lc b ld ly lf lg lh lz lj lk ll ma ln lo lp mb lr ls lt mc lv lw lx ij bi translated"><a class="ae md" href="https://github.com/rahul-yr/learn-go-graphql" rel="noopener ugc nofollow" target="_blank">点击此处</a>获取完整源代码</p><p id="ef57" class="pw-post-body-paragraph la lb iq lc b ld ly lf lg lh lz lj lk ll ma ln lo lp mb lr ls lt mc lv lw lx ij bi translated"><a class="ae md" href="https://www.postman.com/rahul-public/workspace/learn-go-graphql-todo-app" rel="noopener ugc nofollow" target="_blank">点击此处</a>进入邮差合集。</p><p id="911a" class="pw-post-body-paragraph la lb iq lc b ld ly lf lg lh lz lj lk ll ma ln lo lp mb lr ls lt mc lv lw lx ij bi translated">在本教程中，我们将主要关注3件事</p><ul class=""><li id="2f7f" class="me mf iq lc b ld ly lh lz ll mg lp mh lt mi lx mj mk ml mm bi translated">它是初学者友好的。</li><li id="76da" class="me mf iq lc b ld mn lh mo ll mp lp mq lt mr lx mj mk ml mm bi translated">专注于行业最佳实践。</li><li id="b0b1" class="me mf iq lc b ld mn lh mo ll mp lp mq lt mr lx mj mk ml mm bi translated">部署到云。</li></ul><p id="ba64" class="pw-post-body-paragraph la lb iq lc b ld ly lf lg lh lz lj lk ll ma ln lo lp mb lr ls lt mc lv lw lx ij bi translated">本教程的范围主要集中在构建graphQL服务器，而不是Go基础。如果你对Golang完全陌生，我强烈建议你在阅读本文之前对Go基础知识有一个很好的了解。</p><h1 id="f43a" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">GraphQL是什么？</h1><p id="9e51" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">GraphQL由脸书创建，于2012年在他们的移动应用中实现，并于2015年开源。</p><p id="631d" class="pw-post-body-paragraph la lb iq lc b ld ly lf lg lh lz lj lk ll ma ln lo lp mb lr ls lt mc lv lw lx ij bi translated">GraphQL是一种用于API的查询语言和服务器端运行时。GraphQL提供了一种灵活而直观的语法，使客户能够准确地要求他们所需要的，而不是更多，从而更容易随着时间的推移发展API。</p><p id="8283" class="pw-post-body-paragraph la lb iq lc b ld ly lf lg lh lz lj lk ll ma ln lo lp mb lr ls lt mc lv lw lx ij bi translated">作为REST的替代方案，GraphQL允许开发人员在一个API调用中构造从多个数据源提取数据的请求。因此，减少网络呼叫和带宽可以节省电池寿命和后端应用消耗的CPU周期(<a class="ae md" href="https://graphql.org/" rel="noopener ugc nofollow" target="_blank">官方来源</a>)。</p><p id="d02b" class="pw-post-body-paragraph la lb iq lc b ld ly lf lg lh lz lj lk ll ma ln lo lp mb lr ls lt mc lv lw lx ij bi translated">此外，GraphQL为API维护人员提供了在不影响现有查询的情况下添加或删除字段的灵活性。</p><p id="26b8" class="pw-post-body-paragraph la lb iq lc b ld ly lf lg lh lz lj lk ll ma ln lo lp mb lr ls lt mc lv lw lx ij bi translated">GraphQL正迅速成为基于API的数据访问的标准。</p><h1 id="32b4" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">什么是模式？</h1><p id="ebb5" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">API开发人员创建的GraphQL模式描述了客户端可以通过该服务查询的所有可能的数据。GraphQL模式是由对象类型组成的，它定义了您可以请求的对象类型以及它所拥有的字段。</p><p id="6f76" class="pw-post-body-paragraph la lb iq lc b ld ly lf lg lh lz lj lk ll ma ln lo lp mb lr ls lt mc lv lw lx ij bi translated">任何GraphQL APIs上最常见的操作是<code class="fe ms mt mu mv b">Queries</code>和<code class="fe ms mt mu mv b">Mutations</code>。<code class="fe ms mt mu mv b">Queries</code>用于从API中读取数据。<code class="fe ms mt mu mv b">Mutations</code>用于创建、更新和删除操作。</p><p id="a42c" class="pw-post-body-paragraph la lb iq lc b ld ly lf lg lh lz lj lk ll ma ln lo lp mb lr ls lt mc lv lw lx ij bi translated">GraphQL模式中的每个操作都被附加到一个名为<code class="fe ms mt mu mv b">resolvers</code>的函数上。A <code class="fe ms mt mu mv b">resolver</code>用于执行<code class="fe ms mt mu mv b">Query</code>或<code class="fe ms mt mu mv b">Mutation</code>的实际执行。</p><h1 id="7efe" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">现场演示</h1><p id="0b7d" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated"><a class="ae md" href="https://learn-go-graphql.herokuapp.com/todo" rel="noopener ugc nofollow" target="_blank">使用此端点执行现场测试</a></p><figure class="mw mx my mz gt jr"><div class="bz fp l di"><div class="na nb l"/></div></figure><h1 id="ad47" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">在Go中开发一个GraphQL服务器</h1><ul class=""><li id="3f0e" class="me mf iq lc b ld le lh li ll nc lp nd lt ne lx mj mk ml mm bi translated">打开您最喜欢的代码编辑器，使用这个<code class="fe ms mt mu mv b">go mod init github.com/rahul-yr/learn-go-graphql</code>命令创建一个go模块。</li><li id="6d0f" class="me mf iq lc b ld mn lh mo ll mp lp mq lt mr lx mj mk ml mm bi translated">安装以下模块。</li></ul><figure class="mw mx my mz gt jr"><div class="bz fp l di"><div class="nf nb l"/></div></figure><ul class=""><li id="8387" class="me mf iq lc b ld ly lh lz ll mg lp mh lt mi lx mj mk ml mm bi translated">在根目录下创建一个名为<code class="fe ms mt mu mv b">todo</code>的文件夹和三个名为<code class="fe ms mt mu mv b">todo/models.go</code>、<code class="fe ms mt mu mv b">todo/schema.go</code>和<code class="fe ms mt mu mv b">todo/udf.go</code>的文件</li><li id="5110" class="me mf iq lc b ld mn lh mo ll mp lp mq lt mr lx mj mk ml mm bi translated">在<code class="fe ms mt mu mv b">todo/models.go</code>文件中创建一个Todo模型。此模型表示待办事项。</li></ul><figure class="mw mx my mz gt jr"><div class="bz fp l di"><div class="nf nb l"/></div></figure><h2 id="52c3" class="ng kd iq bd ke nh ni dn ki nj nk dp km ll nl nm kq lp nn no ku lt np nq ky nr bi translated">实现CRUD操作。</h2><ul class=""><li id="1e0d" class="me mf iq lc b ld le lh li ll nc lp nd lt ne lx mj mk ml mm bi translated">让我们为TODO模型创建CRUD操作(<code class="fe ms mt mu mv b">todo/udf.go</code>)。</li></ul><figure class="mw mx my mz gt jr"><div class="bz fp l di"><div class="nf nb l"/></div></figure><ul class=""><li id="17fb" class="me mf iq lc b ld ly lh lz ll mg lp mh lt mi lx mj mk ml mm bi translated">上面的代码片段有5个函数，其中2个为<code class="fe ms mt mu mv b">Queries</code>定义，3个为<code class="fe ms mt mu mv b">Mutations</code>定义。以及一个存储所有todo项的变量(您可以在这里使用一个数据库实例)。</li><li id="f58b" class="me mf iq lc b ld mn lh mo ll mp lp mq lt mr lx mj mk ml mm bi translated"><code class="fe ms mt mu mv b">GetTodos()</code>方法用于获取所有待办事项。</li><li id="9d61" class="me mf iq lc b ld mn lh mo ll mp lp mq lt mr lx mj mk ml mm bi translated"><code class="fe ms mt mu mv b">GetTodo(id int)</code>方法用于根据项目id提取todo项目。</li><li id="bead" class="me mf iq lc b ld mn lh mo ll mp lp mq lt mr lx mj mk ml mm bi translated"><code class="fe ms mt mu mv b">AddTodo(title string)</code>方法用于创建新的待办事项。</li><li id="1f6a" class="me mf iq lc b ld mn lh mo ll mp lp mq lt mr lx mj mk ml mm bi translated"><code class="fe ms mt mu mv b">UpdateTodo(id int, title string, completed bool)</code>方法用于根据项目id更新现有的待办事项。</li><li id="1e54" class="me mf iq lc b ld mn lh mo ll mp lp mq lt mr lx mj mk ml mm bi translated"><code class="fe ms mt mu mv b">DeleteTodo(id int)</code>方法用于根据项目id删除待办事项。</li></ul><h2 id="92cd" class="ng kd iq bd ke nh ni dn ki nj nk dp km ll nl nm kq lp nn no ku lt np nq ky nr bi translated">实现GraphQL模式</h2><ul class=""><li id="e4b2" class="me mf iq lc b ld le lh li ll nc lp nd lt ne lx mj mk ml mm bi translated">现在终于到了创建GraphQL模式的时候了(<code class="fe ms mt mu mv b">todo/schema.go</code>)。</li></ul><figure class="mw mx my mz gt jr"><div class="bz fp l di"><div class="nf nb l"/></div></figure><ul class=""><li id="7aae" class="me mf iq lc b ld ly lh lz ll mg lp mh lt mi lx mj mk ml mm bi translated">GraphQL模式使用这个<code class="fe ms mt mu mv b">graphql.NewSchema(graphql.SchemaConfig{...})</code>方法实现。这个方法实际上解析了GraphQL请求。</li><li id="f246" class="me mf iq lc b ld mn lh mo ll mp lp mq lt mr lx mj mk ml mm bi translated">你可以用这个<code class="fe ms mt mu mv b">graphql.NewObject(graphql.Objectconfig{...})</code>方法定义<code class="fe ms mt mu mv b">Queries</code>、<code class="fe ms mt mu mv b">Mutations</code>和其他<code class="fe ms mt mu mv b">object types</code>。</li><li id="4e93" class="me mf iq lc b ld mn lh mo ll mp lp mq lt mr lx mj mk ml mm bi translated">这个<code class="fe ms mt mu mv b">graphql.Fields{...}</code>方法对于定义字段很有用。</li><li id="4383" class="me mf iq lc b ld mn lh mo ll mp lp mq lt mr lx mj mk ml mm bi translated">下面的方法用于声明输入参数。</li></ul><pre class="mw mx my mz gt ns mv nt nu aw nv bi"><span id="4cb2" class="ng kd iq mv b gy nw nx l ny nz">graphql.FieldConfigArgument{<br/>                    "some_id": &amp;graphql.ArgumentConfig{<br/>                        Type: graphql.SomeDataType,<br/>                    },<br/>                }</span></pre><ul class=""><li id="8bc0" class="me mf iq lc b ld ly lh lz ll mg lp mh lt mi lx mj mk ml mm bi translated"><code class="fe ms mt mu mv b">Resolve</code>块是实际执行的地方。</li></ul><h2 id="ccf7" class="ng kd iq bd ke nh ni dn ki nj nk dp km ll nl nm kq lp nn no ku lt np nq ky nr bi translated">为GraphQL实现一个端点</h2><ul class=""><li id="0e5d" class="me mf iq lc b ld le lh li ll nc lp nd lt ne lx mj mk ml mm bi translated">创建一个路线处理程序(<code class="fe ms mt mu mv b">graph/router.go</code>)文件。</li><li id="147a" class="me mf iq lc b ld mn lh mo ll mp lp mq lt mr lx mj mk ml mm bi translated">这里我用了<code class="fe ms mt mu mv b">gin</code>包。您可以使用自己选择的任何http包来创建端点。</li><li id="0daf" class="me mf iq lc b ld mn lh mo ll mp lp mq lt mr lx mj mk ml mm bi translated">这里最重要的部分是添加这个<code class="fe ms mt mu mv b">graphql.Do(...)</code>方法。这实际上解决了graphql请求。</li></ul><figure class="mw mx my mz gt jr"><div class="bz fp l di"><div class="nf nb l"/></div></figure><h1 id="ff99" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">运行服务器</h1><ul class=""><li id="cb49" class="me mf iq lc b ld le lh li ll nc lp nd lt ne lx mj mk ml mm bi translated">为运行graphql服务器创建一个<code class="fe ms mt mu mv b">main.go</code>文件。</li></ul><figure class="mw mx my mz gt jr"><div class="bz fp l di"><div class="nf nb l"/></div></figure><ul class=""><li id="b030" class="me mf iq lc b ld ly lh lz ll mg lp mh lt mi lx mj mk ml mm bi translated">使用<code class="fe ms mt mu mv b">go run .</code>命令运行服务器</li><li id="eaae" class="me mf iq lc b ld mn lh mo ll mp lp mq lt mr lx mj mk ml mm bi translated">你可以在这里找到直播的<a class="ae md" href="https://www.postman.com/rahul-public/workspace/learn-go-graphql-todo-app" rel="noopener ugc nofollow" target="_blank"> postman API合集</a>。有关API规范，请参考此处。</li><li id="c2ad" class="me mf iq lc b ld mn lh mo ll mp lp mq lt mr lx mj mk ml mm bi translated">下面是使用Postman的API请求和响应的一些快照。</li></ul><h2 id="1d33" class="ng kd iq bd ke nh ni dn ki nj nk dp km ll nl nm kq lp nn no ku lt np nq ky nr bi translated">创建待办事项</h2><figure class="mw mx my mz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oa"><img src="../Images/08bb7228c09af359dfc2f1cb8a50001e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vSmSMNkxoOd4DNPOwuJ9Pw.png"/></div></div></figure><h2 id="058a" class="ng kd iq bd ke nh ni dn ki nj nk dp km ll nl nm kq lp nn no ku lt np nq ky nr bi translated">更新待办事项</h2><figure class="mw mx my mz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ob"><img src="../Images/e42974f7cabe406b7686a8cee8b56c95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j2oUiK3CHZMsakzXNWanQg.png"/></div></div></figure><h2 id="bf34" class="ng kd iq bd ke nh ni dn ki nj nk dp km ll nl nm kq lp nn no ku lt np nq ky nr bi translated">根据项目id读取待办事项</h2><figure class="mw mx my mz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oc"><img src="../Images/70b87d65a559087a69c2760e5974ee19.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lDLJ_JGZp6iCb9jUr-6MWg.png"/></div></div></figure><h2 id="69cc" class="ng kd iq bd ke nh ni dn ki nj nk dp km ll nl nm kq lp nn no ku lt np nq ky nr bi translated">阅读所有待办事项</h2><figure class="mw mx my mz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi od"><img src="../Images/a93ed0d46806ab5bdbff5ca9af80c426.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7sn2RDfyGY7MA0lbd4WSlA.png"/></div></div></figure><h2 id="9613" class="ng kd iq bd ke nh ni dn ki nj nk dp km ll nl nm kq lp nn no ku lt np nq ky nr bi translated">删除待办事项</h2><figure class="mw mx my mz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oe"><img src="../Images/d9156814afd462b8b3f556f27613bcd3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8BmE_R7tNRPo6-ESXPJg6w.png"/></div></div></figure><h1 id="c2d1" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">部署到云</h1><p id="2e34" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">知道如何将这个回购部署到Heroku吗？<a class="ae md" href="https://blog.rahuldev.in/how-to-deploy-any-backend-to-heroku-easily" rel="noopener ugc nofollow" target="_blank">点击这里找到正确的方法</a></p><h1 id="60a1" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">摘要</h1><p id="453b" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">可怕的🔥，您已经成功完成了本教程。我会💝听听你的反馈和意见，看看你能用它做些什么。如果你被困在某个地方，请随意评论。我随时都有空。请在<a class="ae md" href="https://github.com/rahul-yr/learn-go-graphql" rel="noopener ugc nofollow" target="_blank"> github </a>找到完整的代码</p></div><div class="ab cl of og hu oh" role="separator"><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok"/></div><div class="ij ik il im in"><h1 id="6a14" class="kc kd iq bd ke kf om kh ki kj on kl km kn oo kp kq kr op kt ku kv oq kx ky kz bi translated">分级编码</h1><p id="cb65" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">感谢您成为我们社区的一员！更多内容请参见<a class="ae md" href="https://levelup.gitconnected.com/" rel="noopener ugc nofollow" target="_blank">升级编码出版物</a>。<br/>跟随:<a class="ae md" href="https://twitter.com/gitconnected" rel="noopener ugc nofollow" target="_blank">推特</a>，<a class="ae md" href="https://www.linkedin.com/company/gitconnected" rel="noopener ugc nofollow" target="_blank">领英</a>，<a class="ae md" href="https://newsletter.levelup.dev/" rel="noopener ugc nofollow" target="_blank">通迅</a> <br/> <strong class="lc ir">升一级正在改造理工大招聘➡️ </strong> <a class="ae md" href="https://jobs.levelup.dev/talent/welcome?referral=true" rel="noopener ugc nofollow" target="_blank"> <strong class="lc ir">加入我们的人才集体</strong> </a></p></div></div>    
</body>
</html>