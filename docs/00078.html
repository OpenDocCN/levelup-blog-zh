<html>
<head>
<title>Elm: Make-Its &amp; Break-Its</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">榆树:成功与失败</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/some-thoughts-on-elm-862d39b35c26?source=collection_archive---------0-----------------------#2018-01-27">https://levelup.gitconnected.com/some-thoughts-on-elm-862d39b35c26?source=collection_archive---------0-----------------------#2018-01-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="cf38" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">对榆树利弊的解释</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/4963d9f1f5819d759f39f5cb116acc12.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*qbtYzGRmU2bi4oeU.png"/></div></div></figure><p id="b761" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我从2017年年中开始玩Elm分分合合。总之，榆树和我的关系很复杂。我<strong class="kt ir">喜欢</strong> Elm作为一门语言——它的语法有点脱离你的方式，让你专注于你实际写的东西。编译器是一位严格但充满爱心的老师。此外，确信编译的<em class="ln">代码不会抛出运行时异常</em>，这是一个巨大的安慰。</p><p id="6e98" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">与此同时，前端生态系统的其余部分正在向前冲刺(在许多方面！)，而且我在工作中使用React，所以很难在我的空闲时间中投入任何重要的部分来学习Elm。</p><p id="286a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">对于那些不太熟悉Elm的人来说，它是一种功能性的<em class="ln">编译成JavaScript的</em>语言，主要用于构建健壮的、抗bug的ui。虽然它是一种与JavaScript完全不同的语言，但它的预期用例使它成为其他JavaScript框架的直接竞争对手，如React、Angular和Vue。然而，差异是巨大的(不管是好是坏)——Elm真的是一种完全不同的语言！</p><p id="9b2d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">选择任何一种语言都是选择随之而来的权衡。这里有几个方面我觉得Elm非常可爱，也有几个方面我不太喜欢。</p><h1 id="ff27" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">Make-Its:为什么我喜欢Elm作为一种语言</h1><h1 id="fe92" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">1.强力打字</h1><p id="750b" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">Elm是一种<em class="ln">强类型</em>语言，与JavaScript的<em class="ln">弱类型</em>相反。这意味着你声明的所有函数都有一个<em class="ln">类型签名</em>。</p><p id="8fc2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">例如，如果我写了一个名为<code class="fe ml mm mn mo b">add</code>的函数，它采用两个数字&amp;返回相加的结果，它看起来就像这样。</p><h2 id="5880" class="mp lp iq bd lq mq mr dn lu ms mt dp ly la mu mv ma le mw mx mc li my mz me na bi translated">Java Script语言</h2><pre class="kg kh ki kj gt nb mo nc nd aw ne bi"><span id="390b" class="mp lp iq mo b gy nf ng l nh ni">const add = (a, b) =&gt; a + b</span></pre><h2 id="0a06" class="mp lp iq bd lq mq mr dn lu ms mt dp ly la mu mv ma le mw mx mc li my mz me na bi translated">榆树</h2><pre class="kg kh ki kj gt nb mo nc nd aw ne bi"><span id="c17b" class="mp lp iq mo b gy nf ng l nh ni">add: Number -&gt; Number -&gt; Number <br/>add a b = <br/>    a + b</span></pre><p id="2a4a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">当我想调用函数时，强类型的关键很重要。如果我忘记传递一个数字，而是传递字符串作为我的参数，会发生什么？</p><h2 id="d8a1" class="mp lp iq bd lq mq mr dn lu ms mt dp ly la mu mv ma le mw mx mc li my mz me na bi translated">Java Script语言</h2><pre class="kg kh ki kj gt nb mo nc nd aw ne bi"><span id="aa00" class="mp lp iq mo b gy nf ng l nh ni">const sum = add('a', 'b') // returns the string "ab" 🤔</span></pre><h2 id="96a6" class="mp lp iq bd lq mq mr dn lu ms mt dp ly la mu mv ma le mw mx mc li my mz me na bi translated">榆树</h2><pre class="kg kh ki kj gt nb mo nc nd aw ne bi"><span id="7127" class="mp lp iq mo b gy nf ng l nh ni">sum = add "a" "b" -- throws a compiler error that's helpful! 🎉</span></pre><p id="15cb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Elm中函数的定义包括一个<em class="ln">类型签名</em>——表明<code class="fe ml mm mn mo b">add</code>函数接受2个数字作为参数&amp;返回一个数字作为结果。由于Elm编译器通常足够智能，能够为您推断出您的类型签名，因此您实际上不必键入这个签名来获得所有强类型的东西。然而，我发现随着我玩Elm玩得越来越多，我发现自己在思考我正在编写的函数的类型签名。</p><p id="9a14" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">虽然JavaScript曾几次尝试引入类型(特别是<a class="ae nj" href="https://flow.org/" rel="noopener ugc nofollow" target="_blank">Flow</a>&amp;<a class="ae nj" href="https://www.typescriptlang.org/" rel="noopener ugc nofollow" target="_blank">TypeScript</a>)，但它们都远远达不到Elm的类型语法&amp;静态类型检查功能。在Elm中，类型声明更像是一等公民，鼓励开发人员更多地考虑类型。</p><h1 id="27ae" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">2.强制错误处理</h1><p id="919e" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">在Elm中，如果您不处理应用程序代码中的潜在故障点，编译器会非常生气。</p><p id="d920" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">例如，假设您对某个JSON发出网络请求。您将对这个JSON blob进行操作，以呈现一篇博客文章(就像您正在阅读的这篇文章。谢谢😜)你期望JSON是这样的。</p><pre class="kg kh ki kj gt nb mo nc nd aw ne bi"><span id="927e" class="mp lp iq mo b gy nf ng l nh ni">{ <br/>  "title": "Some cool stuff about Elm", <br/>  "body": "It's fun!", <br/>  "author": "Benjamin Johnson", <br/>  "dateCreated": "2018-01-25" <br/>}</span></pre><p id="91c8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">很简单，对吧？您只需获得JSON，并使用适当的键来呈现您的博客文章。</p><p id="0d64" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">没那么快。</strong></p><p id="c058" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果在用户加载您的web页面和发出请求的过程中网络中断了，会发生什么呢？如果JSON返回一个作者数组而不是一个字符串，会发生什么？如果<code class="fe ml mm mn mo b">dateCreated</code>是<code class="fe ml mm mn mo b">null</code>会怎么样？</p><p id="92d4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">所有这些都是可能的，特别是如果你依赖第三方API来交付你的内容或者你正在与其他开发者合作。尽管你可能想说“那不应该发生。后端工程师会让我知道他们何时改变了有效负载”——事实是，即使在最好的组织中，有时也会发生这种问题。</p><p id="74c2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在JavaScript中，您<em class="ln">可以</em>(不是说您总是这样做，也绝对不是说您应该这样做)编写代码，假设JSON响应每次都能完美加载。你可能不会发现你的应用失败了，直到你得到一个错误提示<code class="fe ml mm mn mo b">Cannot read property `body` of `undefined`</code>。现在你必须通过调试器爬行。或者你不小心把<code class="fe ml mm mn mo b">null</code>这个词渲染到你的屏幕上。远远不是最好的UX。</p><p id="0339" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Elm强迫你为任何可能导致<em class="ln">失败</em>的操作编写错误处理代码。比如网络请求、浏览器中的地理定位或基于时间的操作(例如，将字符串转换为时间戳)。它能够做到这一点的主要原因是静态类型系统。当编译器发现这些没有错误处理代码的“潜在失败”操作时，它会拒绝编译，直到您编写一些代码来处理您的错误。</p><p id="5d44" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">正如我所说的，可以编写JavaScript来处理这些潜在的错误，但是当您忘记编写错误处理程序时，有编译器在身边真的很有帮助。我见过很多因为开发人员忘记处理边缘情况或编写防御所有故障点的代码而发生的错误。</p><h1 id="c725" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">3.纯功能性的</h1><p id="6777" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">虽然纯粹的函数式语言很棒，但是没有某种形式的状态管理的纯粹性对于ui来说并不好用(我们需要能够响应用户输入和状态变化😜).Elm通过管理Elm运行时内部的状态突变来保持语言的纯净。这种管理状态更新的方法，通常被称为“<a class="ae nj" href="https://guide.elm-lang.org/architecture/" rel="noopener ugc nofollow" target="_blank">Elm架构</a>”，在Elm社区之外也很常见(React + Redux就是一个典型的例子)。</p><p id="4cb6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">用这种范式编程使你的UI成为应用程序状态的纯函数，这意味着推理你的应用程序的各个部分变得非常简单。<em class="ln">Elm中的所有东西都只是一个函数</em>，这往往会产生可读性很强、容易理解的代码(这是一个全方位的胜利！).</p><h1 id="c415" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">反驳:为什么我不是100%喜欢榆树</h1><h1 id="8d53" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">1.很难打败JavaScript生态系统</h1><p id="b436" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">说说你对“JavaScript疲劳”的看法，每周都有一个新的框架出现:在前端JS世界中有一个<em class="ln">吨</em>的竞争，这导致最好的解决方案上升到顶端(通常)。</p><p id="49ce" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">此外，如果你正在使用一个新的JS框架，将它与你喜欢的前端堆栈的其他部分(CSS/SCSS/LESS/CSS-in-JS，实用程序库等)集成起来通常不会太困难。).</p><p id="2e08" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">与JavaScript代码的混合使得Elm更难进行类型检查并实现其“无运行时异常”的承诺，因此有一个通过“端口”与JavaScript包通信的过程。然而，与JS端口进行通信可能会相当乏味，我发现自己编写了很多自己的逻辑，如果我是用JS工作的话，我可能会使用实用程序。</p><p id="0435" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我非常喜欢保持最小化&amp;只在你需要的时候使用第三方依赖，但是JS生态系统的一个美丽的部分是，当你需要快速移动或者当你想要隔离你正在学习的特定概念时，你可以在NPM上使用这些包(也就是说，你只想学习Vue作为一个框架，所以你使用Vue材料或Bootstrap，这样你就不会把所有宝贵的时间都花在设计你的组件上)。</p><h1 id="7822" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">2.HTML模板有点奇怪</h1><p id="71c1" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">Elm社区声称，随着时间的推移，您会习惯HTML语法，但它从未真正吸引我。这里有一个Elm“模板”(或“视图”功能)的简单例子。</p><pre class="kg kh ki kj gt nb mo nc nd aw ne bi"><span id="b2dd" class="mp lp iq mo b gy nf ng l nh ni">view model = <br/>    div [] [ <br/>        button [ onClick Decrement ] [ text " - " ] <br/>        , div [] [ text (toString model) ] <br/>        , button [ onClick Increment ] [ text " + " ] <br/>    ]</span></pre><p id="ef6d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在上面的例子中，每个HTML元素都是一个带有两个参数的函数，并以其对应的HTML标签命名。第一个参数包含一个应用于标签的所有HTML属性的<code class="fe ml mm mn mo b">List</code>(数组)。第二个参数包含元素的所有子元素的数组。以这种方式做HTML模板背后的理论是，Elm中的所有东西都是简单的函数，但是在实践中，我觉得有点笨拙。</p><p id="2ae4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">相比之下，像JSX，感觉更接近原始HTML。</p><pre class="kg kh ki kj gt nb mo nc nd aw ne bi"><span id="31a8" class="mp lp iq mo b gy nf ng l nh ni">const view = model =&gt; ( <br/>  &lt;div&gt; <br/>    &lt;button onClick={Decrement}&gt; - &lt;/button&gt; <br/>    &lt;div&gt;{model}&lt;/div&gt; <br/>    &lt;button onClick={Increment}&gt; + &lt;/button&gt; <br/>  &lt;/div&gt; <br/>)</span></pre><p id="dc59" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">或者类似Vue的模板语法，它只是建立在HTML之上</p><pre class="kg kh ki kj gt nb mo nc nd aw ne bi"><span id="aa2b" class="mp lp iq mo b gy nf ng l nh ni">&lt;div&gt; <br/>  &lt;button v-on:click="Decrement"&gt; - &lt;/button&gt; <br/>  &lt;div&gt;{{model}}&lt;/div&gt; <br/>  &lt;button v-on:click="Increment"&gt; + &lt;/button&gt; <br/>&lt;/div&gt;</span></pre><p id="6c17" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在我看来，React &amp; Vue模板语法更容易快速阅读，尽管它们可能不像Elm的HTML函数那样灵活和可组合。</p><h1 id="1d3f" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">3.缺乏大公司的支持</h1><p id="2861" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">一方面，我甚至不愿意将此作为反对Elm作为一种语言的理由。语言的好坏取决于它孤立运作的方式(在一个完美的世界中……)。</p><p id="8aa1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然而，我在与同事交谈时发现，关于Elm的主要问题是它没有得到任何大公司的支持。我敢说，我没有看到太多公司采用它的原因是，如果没有大公司的大笔资金，这种语言的发展和支持可能会突然结束。</p><p id="5e22" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">前端环境变化很快，保持语言的更新是一项全职工作(支持Elm的人)。此外，编译目标(JavaScript)并不是静止不动的——事实上，JavaScript正在以极快的速度发展，每年都在获得新的特性和浏览器API。希望我们能看到Elm继续存在并保持更新，因为它是一种非常令人愉快的语言。</p><h1 id="5da9" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">结论</h1><p id="582b" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">我仍然认为Elm 100%值得学习——如果你有时间的话。它的价值在于它迫使你思考编程。如果您从服务器收到的JSON没有您期望的密钥，会发生什么？如果用户的浏览器不能给你地理位置数据怎么办？(这两者都是我在过去一年左右从事的JS中特别棘手的错误的来源)。</p><p id="f534" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Elm强迫你处理所有的错误，点上所有的“我”，划掉所有的“t”。即使你没有开始在工作场所使用它，扩展你的思维和尝试新范式的好处是巨大的。</p><p id="88f1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">但是，我也知道和感受到开发商对Elm持保留态度的情绪。对于在前端生态系统中工作的许多人来说，它是一种不同的、不熟悉的语言，如果您试图快速移动或集成前端生态系统的其他部分，它在类型安全和运行时安全之间做出的权衡确实会增加一点复杂性。</p><p id="d49f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">喜欢你读的吗？不同意？请随意给我发推特或在T2的LinkedIn上联系我。感谢阅读！</p></div><div class="ab cl nk nl hu nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="ij ik il im in"><p id="d56d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="ln">原载于</em><a class="ae nj" href="https://www.benjaminjohnson.me/blog/thoughts-on-elm/" rel="noopener ugc nofollow" target="_blank"><em class="ln">www . Benjamin Johnson . me</em></a><em class="ln">。</em></p></div></div>    
</body>
</html>