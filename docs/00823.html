<html>
<head>
<title>What is GraphQL: History, Components, and Ecosystem</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">什么是GraphQL:历史、组件和生态系统</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/what-is-graphql-87fc7687b042?source=collection_archive---------0-----------------------#2019-08-13">https://levelup.gitconnected.com/what-is-graphql-87fc7687b042?source=collection_archive---------0-----------------------#2019-08-13</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/5a0219eaf51f244ee41fc06d433394d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K7cL5EO9bQJei8GrgRhoZQ.png"/></div></div></figure><p id="b4a5" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">RESTful web服务多年来一直为简单查询结构提供基本支持。然而，这些服务不提供对数据的细粒度控制，这种控制允许开发人员在不创建大量不必要的调用的情况下行使灵活性。</p><p id="7954" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">最初由脸书创建的GraphQL是一种API查询语言，它让开发者T2选择他们想要的请求类型，并在一个请求中接收他们需要的信息。</p><p id="f3cf" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在本文中，我将解释<a class="ae kz" href="https://blog.back4app.com/2019/08/08/what-is-graphql/" rel="noopener ugc nofollow" target="_blank">什么是GraphQL </a>，它是如何开始的，以及它是如何成为开发人员构建API的重要工具的。我们还将介绍GraphQL的关键组件以及GraphQL生态系统中的主要参与者。</p><p id="a62c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们开始吧！</p><h1 id="bbd9" class="lb lc it bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">GraphQL是什么？</h1><p id="8c3b" class="pw-post-body-paragraph kb kc it kd b ke lz kg kh ki ma kk kl km mb ko kp kq mc ks kt ku md kw kx ky im bi translated">最简单的形式是，GraphQL是一种用于从客户端应用程序查询数据库的开源语言。</p><p id="7cff" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">"<em class="la"> GraphQL是一种用于API的查询语言，它改变了客户端和服务器之间的契约，允许服务器说‘这些是我公开的功能’,并允许客户端以某种方式描述他们的需求，最终使产品开发人员能够构建他们想要创建的产品。</em>”—丹·斯查费，<a class="ae kz" href="https://www.youtube.com/watch?v=mRgvbtNuCZY" rel="noopener ugc nofollow" target="_blank"> GraphQL的联合创始人</a></p><p id="9f0e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在幕后，它告诉API如何将检索到的数据呈现给客户端。这使得开发人员能够提出精确的数据请求，这样他们就能得到他们所需要的东西——不多也不少。</p><p id="6b05" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">以下是GraphQL为开发人员提供的主要优势:</p><ul class=""><li id="ca27" class="me mf it kd b ke kf ki kj km mg kq mh ku mi ky mj mk ml mm bi translated">准确地声明他们需要服务器提供什么，并以可预测的方式接收请求的数据。</li><li id="dde1" class="me mf it kd b ke mn ki mo km mp kq mq ku mr ky mj mk ml mm bi translated">在单个请求中从服务器检索许多资源。</li><li id="98b5" class="me mf it kd b ke mn ki mo km mp kq mq ku mr ky mj mk ml mm bi translated">它是强类型的，也就是说，它允许API用户知道(1)什么数据是可用的，以及(2)它以什么形式存在。</li></ul><p id="242c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">GraphQL查询本质上是一个字符串，当发送到服务器时，它将JSON返回给客户机。这些查询反映了它们的响应，这使得<strong class="kd iu">预测运行查询返回的数据</strong>的形状变得容易。如果开发人员知道他们的应用程序需要什么样的数据，他们也可以很容易地编写查询。</p><p id="7dbd" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">与RESTful服务或SQL中复杂的join语句不同，GraphQL是分层的。这意味着它遵循对象之间的关系，这对于分层用户界面使用的图形结构数据来说很好。</p><p id="ea12" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">GraphQL利用现有的代码，而不是指定或提供数据存储库。它是<strong class="kd iu">自省的</strong>，这意味着GraphQL服务器可以被查询它们支持的类型，这使得工具很容易在这些信息的基础上构建。</p><p id="ec4a" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">使用GraphQL，返回的数据的形状完全取决于客户端的查询。因此，可以很容易地向服务器添加额外的字段(例如，在添加新产品功能时)，而不会影响现有的客户端。反之亦然。因此，当您淘汰旧功能时，相应的服务器字段将继续工作，即使它们已经过时。通过这种方式，GraphQL带来了一个向后兼容的过程，不再需要增加<strong class="kd iu">版本号</strong>。</p><p id="d6e5" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在我们对GraphQL 有了更好的了解，让我们快速看一下它是如何开始的。</p><h2 id="340b" class="ms lc it bd ld mt mu dn lh mv mw dp ll km mx my lp kq mz na lt ku nb nc lx nd bi translated"><strong class="ak">用数据库</strong>  <strong class="ak">构建一个</strong> <a class="ae kz" href="https://www.back4app.com/graphql-database" rel="noopener ugc nofollow" target="_blank"> <strong class="ak">即时GraphQL API，并开始探索这项技术是如何工作的。</strong></a></h2><h1 id="d9c1" class="lb lc it bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">这一切是如何开始的</h1><p id="1942" class="pw-post-body-paragraph kb kc it kd b ke lz kg kh ki ma kk kl km mb ko kp kq mc ks kt ku md kw kx ky im bi translated">那么，GraphQL是怎么入门的呢？在GraphQL出现之前，开发人员使用的是什么？它对他们有什么限制？让我们来了解一下！</p><h2 id="75bb" class="ms lc it bd ld mt mu dn lh mv mw dp ll km mx my lp kq mz na lt ku nb nc lx nd bi translated">GraphQL是如何起步的？</h2><h2 id="612d" class="ms lc it bd ld mt mu dn lh mv mw dp ll km mx my lp kq mz na lt ku nb nc lx nd bi translated">向移动的转变</h2><p id="1c05" class="pw-post-body-paragraph kb kc it kd b ke lz kg kh ki ma kk kl km mb ko kp kq mc ks kt ku md kw kx ky im bi translated">GraphQL的起源故事可以追溯到行业向移动的转变。当时，脸书的移动战略(即在移动设备上采用HTML5)由于网络使用率高的问题而未能奏效。因此，脸书决定使用本地技术从头开始重建iOS应用程序。</p><p id="520e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">脸书的<em class="la">新闻推送</em>在手机上实现的主要问题。这不仅仅是检索一个故事，谁写的，它说了什么，评论列表，以及谁喜欢这个帖子这么简单。每个故事都是相互联系、嵌套和递归的。现有的API并不允许开发人员在移动设备上展示丰富的、类似新闻提要的体验。它们没有层次结构，不允许开发人员选择他们需要的内容，也不具备显示异构提要故事列表的能力。</p><p id="0333" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">2012年，脸书决定他们需要建立一个新的新闻订阅API来构建脸书移动应用。这是GraphQL开始成形的时候，8月中旬，iOS 5.0版的脸书发布了新的GraphQL技术。它允许开发者通过利用其数据获取能力来减少网络使用。在接下来的一年半时间里，GraphQL API的应用范围扩大到了脸书iOS应用的大部分，除了新闻提要。2015年，GraphQL规范与JavaScript中的参考实现一起首次发布。</p><h2 id="e69e" class="ms lc it bd ld mt mu dn lh mv mw dp ll km mx my lp kq mz na lt ku nb nc lx nd bi translated">传统REST APIs的局限性</h2><p id="6f0f" class="pw-post-body-paragraph kb kc it kd b ke lz kg kh ki ma kk kl km mb ko kp kq mc ks kt ku md kw kx ky im bi translated">传统REST API的主要问题是速度慢，需要硬编码。加快速度的一个可能的解决方案是创建多个端点。然而，当您将此推断为涵盖应用程序需要的所有数据源和API客户端时，就会遇到REST APIs的局限性。</p><p id="5724" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">让我试着用一个类比来解释传统REST APIs的局限性。</p><p id="a7c9" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">比方说，你有一台自动售货机。使用传统的REST，你按下自动售货机上的一个按钮，就可以得到一样东西。所以，你必须一次按很多个按钮才能得到你需要的一切。这个过程很慢。</p><p id="92d0" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">但是如果你有特殊用途的按钮，你可以一次得到多个东西。例如，你可以按下一个特殊用途的按钮，从自动售货机里得到四样东西。</p><p id="3c5c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这两种方法的结合就是拥有一台自动售货机，在那里你可以按下你想要的按钮组合，然后一次性得到你需要的一切。这就是GraphQL所做的。</p><p id="8139" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">GraphQL旨在通过拥有一个“智能”端点而不是许多“哑”端点来解决这些问题。这里的主要好处是，智能端点能够接受复杂的查询，并根据客户端的要求调整数据输出。</p><p id="0097" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">本质上，GraphQL层存在于客户端和数据源之间。它的工作是接收客户机请求，并根据客户机的要求获取必要的数据。简单地说，GraphQL查询方法解决了大范围的大规模应用程序开发问题。</p><h1 id="a0c7" class="lb lc it bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">GraphQL是如何流行起来的</h1><p id="5487" class="pw-post-body-paragraph kb kc it kd b ke lz kg kh ki ma kk kl km mb ko kp kq mc ks kt ku md kw kx ky im bi translated">正如您可能想象的那样，行业中已经存在对GraphQL这样的解决方案的需求，这就是它迅速流行的原因。在最初的六个月里，不同的编程语言都实现了GraphQL，包括PHP、JavaScript、Scala、Python和Ruby。</p><p id="97eb" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">当新公司和业余爱好者开始建造它时，它很快变得流行起来。最终，这项技术被更大的公司采用，从2016年的GitHub开始，后来被Twitter、Yelp、纽约时报、Airbnb等公司采用。</p><h1 id="80e4" class="lb lc it bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">GraphQL关键组件</h1><p id="9a95" class="pw-post-body-paragraph kb kc it kd b ke lz kg kh ki ma kk kl km mb ko kp kq mc ks kt ku md kw kx ky im bi translated">实际上，GraphQL API使用三个主要组件:</p><ul class=""><li id="8fee" class="me mf it kd b ke kf ki kj km mg kq mh ku mi ky mj mk ml mm bi translated"><strong class="kd iu">查询。</strong>一个<a class="ae kz" href="https://graphql.org/learn/queries/" rel="noopener ugc nofollow" target="_blank">查询</a>是客户端发出的请求。查询字段可以指向数组并支持参数。</li><li id="fc85" class="me mf it kd b ke mn ki mo km mp kq mq ku mr ky mj mk ml mm bi translated"><strong class="kd iu">解决者。除非您告诉GraphQL服务器，否则它不知道如何处理收到的查询。这是使用<a class="ae kz" href="https://graphql.org/learn/execution/#root-fields-resolvers" rel="noopener ugc nofollow" target="_blank">分解器</a>完成的。简单地说，解析器告诉GraphQL如何(以及在哪里)获取与特定字段相对应的数据。使用GraphQL，您使用的API模式和数据库模式是分离的。这允许您将它们用作变异解析器来修改数据库的内容。</strong></li><li id="4729" class="me mf it kd b ke mn ki mo km mp kq mq ku mr ky mj mk ml mm bi translated"><strong class="kd iu">图式。</strong>一个<a class="ae kz" href="https://graphql.org/learn/schema/" rel="noopener ugc nofollow" target="_blank"> GraphQL模式</a>描述了客户端一旦连接到GraphQL服务器就可以使用的功能。模式中的核心构建块被称为<em class="la">类型</em>。</li></ul><h1 id="7329" class="lb lc it bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">GraphQL生态系统</h1><p id="19b9" class="pw-post-body-paragraph kb kc it kd b ke lz kg kh ki ma kk kl km mb ko kp kq mc ks kt ku md kw kx ky im bi translated">在这里，我们将快速浏览一下GraphQL生态系统中的主要参与者。</p><h1 id="d4d2" class="lb lc it bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">GraphQL服务器</h1><p id="9375" class="pw-post-body-paragraph kb kc it kd b ke lz kg kh ki ma kk kl km mb ko kp kq mc ks kt ku md kw kx ky im bi translated">因为GraphQL只是一个规范，所以您需要一些GraphQL服务器实现来开始。</p><ul class=""><li id="d61c" class="me mf it kd b ke kf ki kj km mg kq mh ku mi ky mj mk ml mm bi translated"><a class="ae kz" href="https://github.com/graphql/graphql-js" rel="noopener ugc nofollow" target="_blank"><strong class="kd iu">GraphQL-JS</strong></a><strong class="kd iu"/>是graph QL的原始参考实现，可以和<a class="ae kz" href="https://github.com/graphql/express-graphql" rel="noopener ugc nofollow" target="_blank"> Express </a>一起使用。</li><li id="3f37" class="me mf it kd b ke mn ki mo km mp kq mq ku mr ky mj mk ml mm bi translated"><a class="ae kz" href="https://www.apollographql.com/docs/apollo-server/" rel="noopener ugc nofollow" target="_blank"><strong class="kd iu">GraphQL-Server</strong></a>是Apollo的一体化graph QL服务器实现，正在迅速获得关注。可以从任何GraphQL客户端查询它。</li><li id="c69e" class="me mf it kd b ke mn ki mo km mp kq mq ku mr ky mj mk ml mm bi translated"><a class="ae kz" href="https://www.back4app.com/docs/parse-graphql/graphql-getting-started" rel="noopener ugc nofollow" target="_blank"><strong class="kd iu">graph QL-server less</strong></a>是Back4App instant GraphQL API完全集成了数据库(MongoDB)和云功能。在这里，您可以访问提供GraphQL APIs的后端服务。</li><li id="2124" class="me mf it kd b ke mn ki mo km mp kq mq ku mr ky mj mk ml mm bi translated"><a class="ae kz" href="https://github.com/prisma/graphql-yoga" rel="noopener ugc nofollow" target="_blank"> <strong class="kd iu"> GraphQL Yoga </strong> </a>是Prisma在Express和Apollo服务器上搭建的服务器实现。</li></ul><h1 id="ce2d" class="lb lc it bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">GraphQL客户端</h1><p id="2393" class="pw-post-body-paragraph kb kc it kd b ke lz kg kh ki ma kk kl km mb ko kp kq mc ks kt ku md kw kx ky im bi translated">虽然您可以直接查询您的GraphQL API，但是拥有一个专用的客户端库肯定会使事情变得更容易。</p><ul class=""><li id="5941" class="me mf it kd b ke kf ki kj km mg kq mh ku mi ky mj mk ml mm bi translated"><a class="ae kz" href="https://facebook.github.io/relay/" rel="noopener ugc nofollow" target="_blank"><strong class="kd iu">Relay</strong></a><strong class="kd iu"/>是脸书利用GraphQL构建React应用的JavaScript库。</li><li id="839f" class="me mf it kd b ke mn ki mo km mp kq mq ku mr ky mj mk ml mm bi translated"><a class="ae kz" href="http://www.apollodata.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="kd iu">阿波罗客户端</strong> </a>缓存请求并归一化数据，节省网络流量。它还支持分页、预取数据以及数据层与视图层之间的连接。</li></ul><h1 id="1223" class="lb lc it bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">GraphQL网关</h1><p id="d79f" class="pw-post-body-paragraph kb kc it kd b ke lz kg kh ki ma kk kl km mb ko kp kq mc ks kt ku md kw kx ky im bi translated">也许最流行的GraphQL网关是<a class="ae kz" href="https://www.apollographql.com/platform/" rel="noopener ugc nofollow" target="_blank"> <strong class="kd iu">阿波罗引擎</strong> </a>。<strong class="kd iu"> </strong>具有查询执行跟踪、查询缓存、错误跟踪、API性能趋势分析等功能。</p><h1 id="6592" class="lb lc it bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">开源应用和工具</h1><p id="85d4" class="pw-post-body-paragraph kb kc it kd b ke lz kg kh ki ma kk kl km mb ko kp kq mc ks kt ku md kw kx ky im bi translated">以下是一些利用GraphQL的开源应用:</p><ul class=""><li id="5173" class="me mf it kd b ke kf ki kj km mg kq mh ku mi ky mj mk ml mm bi translated">在GraphQL的支持下，<a class="ae kz" href="https://www.gatsbyjs.org/docs/" rel="noopener ugc nofollow" target="_blank"> <strong class="kd iu"> Gatsby </strong> </a>能够从多个GraphQL APIs获取数据，并利用它来创建一个静态的、客户端专用的React应用程序。</li><li id="6f27" class="me mf it kd b ke mn ki mo km mp kq mq ku mr ky mj mk ml mm bi translated"><a class="ae kz" href="http://vulcanjs.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="kd iu"> VulcanJS </strong> </a> <strong class="kd iu"> </strong>利用GraphQL让用户快速构建CRUD应用。</li><li id="111f" class="me mf it kd b ke mn ki mo km mp kq mq ku mr ky mj mk ml mm bi translated"><a class="ae kz" href="https://github.com/prisma/graphql-playground" rel="noopener ugc nofollow" target="_blank"><strong class="kd iu">GraphQL Playground</strong></a><strong class="kd iu"/>是一个强大的IDE，它为graph QL查询、变异、订阅、验证等功能打包了一个编辑器。它允许开发人员可视化模式的结构。</li><li id="b1c2" class="me mf it kd b ke mn ki mo km mp kq mq ku mr ky mj mk ml mm bi translated"><a class="ae kz" href="https://github.com/facebook/graphql/" rel="noopener ugc nofollow" target="_blank"><strong class="kd iu">graph QL</strong></a><strong class="kd iu"/>是一个浏览器内IDE，可以与GraphQL APIs交互，支持数据查询，执行变异，以及自动完成查询。</li></ul><h1 id="9fa4" class="lb lc it bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="d9fe" class="pw-post-body-paragraph kb kc it kd b ke lz kg kh ki ma kk kl km mb ko kp kq mc ks kt ku md kw kx ky im bi translated">虽然GraphQL是为了解决脸书的iOS应用新闻订阅API的一个非常具体的问题而构建的，但它很快扩展到解决脸书内部的更多问题，并最终开源成为更大公司使用的社区工具。</p><p id="3da3" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">你认为GraphQL会在未来几年成为行业标准吗？请在下面的评论区告诉我。</p></div></div>    
</body>
</html>