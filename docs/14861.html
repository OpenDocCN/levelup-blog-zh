<html>
<head>
<title>Reactive programming in RxJs ft. Angular</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">RxJs ftä¸­çš„æ— åŠŸç¼–ç¨‹ã€‚æœ‰è§’çš„</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://levelup.gitconnected.com/reactive-programming-in-rxjs-ft-angular-eb0c63b809f7?source=collection_archive---------4-----------------------#2022-12-29">https://levelup.gitconnected.com/reactive-programming-in-rxjs-ft-angular-eb0c63b809f7?source=collection_archive---------4-----------------------#2022-12-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="8132" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">ä½ çš„ä¸€ç”Ÿéƒ½æ˜¯è°è¨€</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/4473ad2ae05edbf569c6668ab407cefd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uINXPOykB6_2EFXT04fmtg.jpeg"/></div></div></figure><p id="305d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">åœ¨æˆ‘ä»¬çš„èŒä¸šç”Ÿæ¶¯ä¸­ï¼Œæˆ‘ä»¬å¤§å¤šæ•°äººéƒ½è¢«æ•™å¯¼è¦å†™ä¸€å¥—æŒ‡ä»¤å¹¶å®Œæˆå·¥ä½œã€‚å®ƒä¸»è¦é›†ä¸­åœ¨â€œ<strong class="kt ir">å¦‚ä½•</strong>â€è€Œä¸æ˜¯â€œ<strong class="kt ir">ä»€ä¹ˆ</strong>â€ä¸Šï¼Œè¿™å®Œå…¨æœ‰æ„ä¹‰ï¼Œè€Œä¸”å­¦ä¹ å¦‚ä½•è§£å†³é—®é¢˜ä¹Ÿå¾ˆé‡è¦ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸‹ä¸€ä¸ªçº§åˆ«ä»¥æ›´å¥½çš„æ–¹å¼æŒæ¡å†™ä½œæŠ€å·§ã€‚å½“æˆ‘è¯´ä»¥æ›´å¥½çš„æ–¹å¼ç¼–å†™å®ƒæ—¶ï¼Œæˆ‘æŒ‡çš„æ˜¯å°†<strong class="kt ir">æœ€å°çš„è®¤çŸ¥è´Ÿè·</strong>äº¤ç»™ä¸‹ä¸€ä¸ªå¼€å‘äººå‘˜ã€‚<strong class="kt ir">è®©äº‹æƒ…å˜å¾—æ›´ç®€å•</strong>è®©ä¸‹ä¸€ä¸ªå¼€å‘äººå‘˜(ä»¥åŠæœªæ¥çš„ä½ è‡ªå·±)ç†è§£æ­£åœ¨å‘ç”Ÿçš„äº‹æƒ…(è¿™æ®µä»£ç åšä»€ä¹ˆ)ã€‚</p><h2 id="9b5f" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">é—®é¢˜é™ˆè¿°</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mg"><img src="../Images/80e61acd1312cd7bc4337cdba38c0625.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k0w7PuD9Mu_mDIXqMZlpug.png"/></div></div><figcaption class="mh mi gj gh gi mj mk bd b be z dk translated">ä½¿ç”¨è§’å½¢ææ–™çš„ç”¨æˆ·åˆ—è¡¨</figcaption></figure><ul class=""><li id="f6e3" class="ml mm iq kt b ku kv kx ky la mn le mo li mp lm mq mr ms mt bi translated">å‘ˆç°ä»APIè·å–çš„ç”¨æˆ·åˆ—è¡¨<strong class="kt ir"/></li><li id="ccec" class="ml mm iq kt b ku mu kx mv la mw le mx li my lm mq mr ms mt bi translated">èƒ½å¤Ÿ<strong class="kt ir">æ·»åŠ </strong>æ–°ç”¨æˆ·(åå­—ã€å§“æ°å’Œç”µå­é‚®ä»¶)</li><li id="fffe" class="ml mm iq kt b ku mu kx mv la mw le mx li my lm mq mr ms mt bi translated">æ›´æ–°ç°æœ‰ç”¨æˆ·çš„èƒ½åŠ›</li><li id="b05b" class="ml mm iq kt b ku mu kx mv la mw le mx li my lm mq mr ms mt bi translated">èƒ½å¤Ÿ<strong class="kt ir">åˆ é™¤</strong>ç°æœ‰ç”¨æˆ·</li></ul><h2 id="710a" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">è¢«åŠ¨ç¬¬ä¸€çš„æ€ç»´æ¨¡å¼</h2><p id="be34" class="pw-post-body-paragraph kr ks iq kt b ku mz jr kw kx na ju kz la nb lc ld le nc lg lh li nd lk ll lm ij bi translated">ä»ç»„ä»¶éœ€è¦çš„åŠ¨ä½œå’ŒçŠ¶æ€çš„è§’åº¦æ¥è€ƒè™‘ï¼Œå…¶ä¸­ä¸€åˆ‡éƒ½æ˜¯å˜é‡(å¯è§‚å¯Ÿçš„æµ)ï¼Œè¿™å¯ä»¥è¢«è®¤ä¸ºæ˜¯ä¸€äº›å¢é‡çš„å‡½æ•°ï¼Œè¿™äº›å¢é‡(ä¹Ÿæ˜¯ä¸€äº›æµ)å¯ä»¥æ ¹æ®å®ƒä»¬æ‰€å…·æœ‰çš„å…³ç³»æˆ–ä¾èµ–æ€§ä½¿ç”¨RxJsæ“ä½œç¬¦ç»„åˆåœ¨ä¸€èµ·ã€‚(ä¾‹å¦‚<em class="ne"> sum$ = fn (delta1$ï¼Œdelta2$) </em>)</p><h2 id="c03c" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">è¡ŒåŠ¨</h2><pre class="kg kh ki kj gt nf ng nh bn ni nj bi"><span id="ee0f" class="nk lo iq ng b be nl nm l nn no">// fire this to add a new user<br/>addUserAction$$ = new Subject&lt;IUser&gt;();<br/>// fire this to delete a user<br/>deleteUserAction$$ = new Subject&lt;IUser&gt;();<br/>// fire this update a user<br/>updateUserAction$$ = new Subject&lt;IUser&gt;();</span></pre><h2 id="7164" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">æ•°æ®æ£€ç´¢æˆå‘˜</h2><pre class="kg kh ki kj gt nf ng nh bn ni nj bi"><span id="332e" class="nk lo iq ng b be nl nm l nn no">private fetchedUsers$ = this.http<br/>    .get&lt;IUser[]&gt;('api/users');<br/><br/>private addUser(user: IUser) {<br/>  return this.http.post&lt;IUser&gt;('api/users', user)<br/>    .pipe(map(() =&gt; user));<br/>}<br/><br/>private deleteUser(user: IUser) {<br/>  return this.http<br/>    .delete&lt;IUser&gt;(`api/users/${user.id}`)<br/>    .pipe(map(() =&gt; user));<br/>}<br/><br/>private updateUser(updatedUser: IUser) {<br/>  return this.http<br/>    .put&lt;IUser&gt;(`api/users/${updatedUser.id}`, updatedUser)<br/>    .pipe(map(() =&gt; updatedUser));<br/>}</span></pre><h2 id="b890" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">ç”¨æˆ·äº‹ä»¶</h2><pre class="kg kh ki kj gt nf ng nh bn ni nj bi"><span id="71ce" class="nk lo iq ng b be nl nm l nn no">private userAdded$ = this.addUserAction$$.pipe(<br/>  switchMap((userToBeAdded) =&gt; this.addUser(userToBeAdded))<br/>);<br/><br/>private userUpdated$ = this.updateUserAction$$.pipe(<br/>  switchMap((userToBeUpdated) =&gt; this.updateUser(userToBeUpdated))<br/>);<br/><br/>private userDeleted$ = this.deleteUserAction$$.pipe(<br/>  switchMap((userToBeDeleted) =&gt; this.deleteUser(userToBeDeleted))<br/>);</span></pre><p id="7d66" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">è¿™é‡Œï¼Œæ¯ä¸ªç”¨æˆ·äº‹ä»¶éƒ½æ˜¯è§¦å‘åŠ¨ä½œå’ŒAPIè°ƒç”¨çš„å‡½æ•°ã€‚æ¯”å¦‚:<code class="fe np nq nr ng b">userAdded$</code>æ˜¯<code class="fe np nq nr ng b">fn(addUserAction$$, addUserAPIRequest)</code>ï¼Œ<code class="fe np nq nr ng b">switchMap</code> (RxJsè¿ç®—ç¬¦)ç”¨æ¥æ”¯æŒè¿™ä¸¤ä¸ªdeltasä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œå½¢æˆåº•å±‚çš„<code class="fe np nq nr ng b">userAdded$</code>çŠ¶æ€ã€‚</p><pre class="kg kh ki kj gt nf ng nh bn ni nj bi"><span id="d72e" class="nk lo iq ng b be nl nm l nn no">userEvent$ = merge(this.userAdded$, this.userUpdated$, this.userDeleted$);</span></pre><p id="6084" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">è¿™äº›äº‹ä»¶ä¸­çš„ä»»ä½•ä¸€ä¸ªè§¦å‘ï¼Œ<code class="fe np nq nr ng b">userList$</code>éƒ½éœ€è¦æ›´æ–°ï¼Œå› ä¸º<code class="fe np nq nr ng b">userList$</code>æ˜¯<code class="fe np nq nr ng b">fetchedUsers$</code>å’Œ<code class="fe np nq nr ng b">userEvent$</code>ä¹‹é—´çš„å‡½æ•°(ä¾èµ–å…³ç³»)</p><pre class="kg kh ki kj gt nf ng nh bn ni nj bi"><span id="9d8f" class="nk lo iq ng b be nl nm l nn no">userList$ = this.userEvent$.pipe(<br/>    startWith(null),<br/>    switchMap(() =&gt; this.fetchedUsers$)<br/>);</span></pre><p id="a905" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">è¿™æ˜¯å®Œæ•´æ¼”ç¤ºçš„é“¾æ¥ğŸ‘‡</p><div class="ns nt gp gr nu nv"><a href="https://stackblitz.com/edit/angular-reactive-users?embed=1&amp;file=src/app/user.service.ts" rel="noopener  ugc nofollow" target="_blank"><div class="nw ab fo"><div class="nx ab ny cl cj nz"><h2 class="bd ir gy z fp oa fr fs ob fu fw ip bi translated">è¢«åŠ¨ç”¨æˆ·CRUD - StackBlitz</h2><div class="oc l"><h3 class="bd b gy z fp oa fr fs ob fu fw dk translated">ä½¿ç”¨ååº”å¼(å£°æ˜å¼)ç¼–ç¨‹èŒƒä¾‹å±•ç¤ºç”¨æˆ·å®ä½“ä¸Šçš„åŸºæœ¬CRUDæ“ä½œ</h3></div><div class="od l"><p class="bd b dl z fp oa fr fs ob fu fw dk translated">stackblitz.com</p></div></div><div class="oe l"><div class="of l og oh oi oe oj kp nv"/></div></div></a></div></div><div class="ab cl ok ol hu om" role="separator"><span class="on bw bk oo op oq"/><span class="on bw bk oo op oq"/><span class="on bw bk oo op"/></div><div class="ij ik il im in"><blockquote class="or"><p id="6bbb" class="os ot iq bd ou ov ow ox oy oz pa lm dk translated">æˆ‘ä¼šç”¨åŒæ ·çš„ååº”æ–¹æ³•æƒ³å‡ºæ›´å¤šçš„åœºæ™¯ï¼Œä½ çš„èµèµè‚¯å®šä¼šæ¿€åŠ±æˆ‘ã€‚è°¢è°¢ï¼ğŸ˜Š</p></blockquote></div></div>    
</body>
</html>