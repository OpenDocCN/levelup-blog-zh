<html>
<head>
<title>Reactive programming in RxJs ft. Angular</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">RxJs ft中的无功编程。有角的</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/reactive-programming-in-rxjs-ft-angular-eb0c63b809f7?source=collection_archive---------4-----------------------#2022-12-29">https://levelup.gitconnected.com/reactive-programming-in-rxjs-ft-angular-eb0c63b809f7?source=collection_archive---------4-----------------------#2022-12-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="8132" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">你的一生都是谎言</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/4473ad2ae05edbf569c6668ab407cefd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uINXPOykB6_2EFXT04fmtg.jpeg"/></div></div></figure><p id="305d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在我们的职业生涯中，我们大多数人都被教导要写一套指令并完成工作。它主要集中在“<strong class="kt ir">如何</strong>”而不是“<strong class="kt ir">什么</strong>”上，这完全有意义，而且学习如何解决问题也很重要，我们可以在下一个级别以更好的方式掌握写作技巧。当我说以更好的方式编写它时，我指的是将<strong class="kt ir">最小的认知负荷</strong>交给下一个开发人员。<strong class="kt ir">让事情变得更简单</strong>让下一个开发人员(以及未来的你自己)理解正在发生的事情(这段代码做什么)。</p><h2 id="9b5f" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">问题陈述</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mg"><img src="../Images/80e61acd1312cd7bc4337cdba38c0625.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k0w7PuD9Mu_mDIXqMZlpug.png"/></div></div><figcaption class="mh mi gj gh gi mj mk bd b be z dk translated">使用角形材料的用户列表</figcaption></figure><ul class=""><li id="f6e3" class="ml mm iq kt b ku kv kx ky la mn le mo li mp lm mq mr ms mt bi translated">呈现从API获取的用户列表<strong class="kt ir"/></li><li id="ccec" class="ml mm iq kt b ku mu kx mv la mw le mx li my lm mq mr ms mt bi translated">能够<strong class="kt ir">添加</strong>新用户(名字、姓氏和电子邮件)</li><li id="fffe" class="ml mm iq kt b ku mu kx mv la mw le mx li my lm mq mr ms mt bi translated">更新现有用户的能力</li><li id="b05b" class="ml mm iq kt b ku mu kx mv la mw le mx li my lm mq mr ms mt bi translated">能够<strong class="kt ir">删除</strong>现有用户</li></ul><h2 id="710a" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">被动第一的思维模式</h2><p id="be34" class="pw-post-body-paragraph kr ks iq kt b ku mz jr kw kx na ju kz la nb lc ld le nc lg lh li nd lk ll lm ij bi translated">从组件需要的动作和状态的角度来考虑，其中一切都是变量(可观察的流)，这可以被认为是一些增量的函数，这些增量(也是一些流)可以根据它们所具有的关系或依赖性使用RxJs操作符组合在一起。(例如<em class="ne"> sum$ = fn (delta1$，delta2$) </em>)</p><h2 id="c03c" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">行动</h2><pre class="kg kh ki kj gt nf ng nh bn ni nj bi"><span id="ee0f" class="nk lo iq ng b be nl nm l nn no">// fire this to add a new user<br/>addUserAction$$ = new Subject&lt;IUser&gt;();<br/>// fire this to delete a user<br/>deleteUserAction$$ = new Subject&lt;IUser&gt;();<br/>// fire this update a user<br/>updateUserAction$$ = new Subject&lt;IUser&gt;();</span></pre><h2 id="7164" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">数据检索成员</h2><pre class="kg kh ki kj gt nf ng nh bn ni nj bi"><span id="332e" class="nk lo iq ng b be nl nm l nn no">private fetchedUsers$ = this.http<br/>    .get&lt;IUser[]&gt;('api/users');<br/><br/>private addUser(user: IUser) {<br/>  return this.http.post&lt;IUser&gt;('api/users', user)<br/>    .pipe(map(() =&gt; user));<br/>}<br/><br/>private deleteUser(user: IUser) {<br/>  return this.http<br/>    .delete&lt;IUser&gt;(`api/users/${user.id}`)<br/>    .pipe(map(() =&gt; user));<br/>}<br/><br/>private updateUser(updatedUser: IUser) {<br/>  return this.http<br/>    .put&lt;IUser&gt;(`api/users/${updatedUser.id}`, updatedUser)<br/>    .pipe(map(() =&gt; updatedUser));<br/>}</span></pre><h2 id="b890" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">用户事件</h2><pre class="kg kh ki kj gt nf ng nh bn ni nj bi"><span id="71ce" class="nk lo iq ng b be nl nm l nn no">private userAdded$ = this.addUserAction$$.pipe(<br/>  switchMap((userToBeAdded) =&gt; this.addUser(userToBeAdded))<br/>);<br/><br/>private userUpdated$ = this.updateUserAction$$.pipe(<br/>  switchMap((userToBeUpdated) =&gt; this.updateUser(userToBeUpdated))<br/>);<br/><br/>private userDeleted$ = this.deleteUserAction$$.pipe(<br/>  switchMap((userToBeDeleted) =&gt; this.deleteUser(userToBeDeleted))<br/>);</span></pre><p id="7d66" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这里，每个用户事件都是触发动作和API调用的函数。比如:<code class="fe np nq nr ng b">userAdded$</code>是<code class="fe np nq nr ng b">fn(addUserAction$$, addUserAPIRequest)</code>，<code class="fe np nq nr ng b">switchMap</code> (RxJs运算符)用来支持这两个deltas之间的依赖关系，形成底层的<code class="fe np nq nr ng b">userAdded$</code>状态。</p><pre class="kg kh ki kj gt nf ng nh bn ni nj bi"><span id="d72e" class="nk lo iq ng b be nl nm l nn no">userEvent$ = merge(this.userAdded$, this.userUpdated$, this.userDeleted$);</span></pre><p id="6084" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这些事件中的任何一个触发，<code class="fe np nq nr ng b">userList$</code>都需要更新，因为<code class="fe np nq nr ng b">userList$</code>是<code class="fe np nq nr ng b">fetchedUsers$</code>和<code class="fe np nq nr ng b">userEvent$</code>之间的函数(依赖关系)</p><pre class="kg kh ki kj gt nf ng nh bn ni nj bi"><span id="9d8f" class="nk lo iq ng b be nl nm l nn no">userList$ = this.userEvent$.pipe(<br/>    startWith(null),<br/>    switchMap(() =&gt; this.fetchedUsers$)<br/>);</span></pre><p id="a905" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这是完整演示的链接👇</p><div class="ns nt gp gr nu nv"><a href="https://stackblitz.com/edit/angular-reactive-users?embed=1&amp;file=src/app/user.service.ts" rel="noopener  ugc nofollow" target="_blank"><div class="nw ab fo"><div class="nx ab ny cl cj nz"><h2 class="bd ir gy z fp oa fr fs ob fu fw ip bi translated">被动用户CRUD - StackBlitz</h2><div class="oc l"><h3 class="bd b gy z fp oa fr fs ob fu fw dk translated">使用反应式(声明式)编程范例展示用户实体上的基本CRUD操作</h3></div><div class="od l"><p class="bd b dl z fp oa fr fs ob fu fw dk translated">stackblitz.com</p></div></div><div class="oe l"><div class="of l og oh oi oe oj kp nv"/></div></div></a></div></div><div class="ab cl ok ol hu om" role="separator"><span class="on bw bk oo op oq"/><span class="on bw bk oo op oq"/><span class="on bw bk oo op"/></div><div class="ij ik il im in"><blockquote class="or"><p id="6bbb" class="os ot iq bd ou ov ow ox oy oz pa lm dk translated">我会用同样的反应方法想出更多的场景，你的赞赏肯定会激励我。谢谢！😊</p></blockquote></div></div>    
</body>
</html>