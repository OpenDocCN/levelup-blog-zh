<html>
<head>
<title>Using TypeScript — Function Return Values and Overloads</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用类型脚本—函数返回值和重载</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/using-typescript-function-return-values-and-overloads-93fcefaff11f?source=collection_archive---------21-----------------------#2020-06-16">https://levelup.gitconnected.com/using-typescript-function-return-values-and-overloads-93fcefaff11f?source=collection_archive---------21-----------------------#2020-06-16</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/e3a567119ad3dfa9802f030dc206689b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*BWZzf_fY_dW9TFxr"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">照片由<a class="ae kf" href="https://unsplash.com/@alisaanton?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">亚里沙·安东</a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="5709" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">TypeScript是JavaScript的自然扩展，在许多项目中取代了JavaScript。</p><p id="cc57" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然而，并不是每个人都知道它实际上是如何工作的。</p><p id="82c8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本文中，我们将看看如何控制函数返回值和重载。</p><h1 id="63f6" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">禁用隐式返回</h1><p id="9f71" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">JavaScript的返回类型非常灵活。</p><p id="5966" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果函数没有隐式的<code class="fe mh mi mj mk b">return</code>语句，JavaScript函数将返回<code class="fe mh mi mj mk b">undefined</code>。</p><p id="9073" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这就是所谓的隐式返回特性。</p><p id="854d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了防止隐式返回，我们可以将<code class="fe mh mi mj mk b">compilerOptions</code>中的<code class="fe mh mi mj mk b">noImplicitReturns</code>设置为<code class="fe mh mi mj mk b">true</code>。</p><p id="2503" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">通过这种方式，如果函数中的路径没有使用<code class="fe mh mi mj mk b">result</code>关键字显式地产生结果，就会抛出一个错误。</p><p id="8864" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果我们禁用隐式返回，那么我们必须明确返回什么。</p><p id="366a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，如果我们有一个参数可以是<code class="fe mh mi mj mk b">null</code>:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="e232" class="mt lf it mk b gy mu mv l mw mx">const getTax = (price: number | null, ...fees: number[]): number =&gt; {<br/>  return price * 0.2 - fees.reduce((total, fee) =&gt; total + fee, 0);<br/>};</span></pre><p id="7128" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们会从编译器那里得到一个关于<code class="fe mh mi mj mk b">price</code>可能是<code class="fe mh mi mj mk b">null</code>的警告。</p><p id="1c81" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要修复这个错误，我们必须使返回显式。</p><p id="d05f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="0a9e" class="mt lf it mk b gy mu mv l mw mx">const getTax = (price: number | null, ...fees: number[]) =&gt; {<br/>  if (price !== null) {<br/>    return price * 0.2 - fees.reduce((total, fee) =&gt; total + fee, 0);<br/>  }<br/>  return undefined;<br/>};</span></pre><p id="ffce" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们为<code class="fe mh mi mj mk b">price</code>添加了一个<code class="fe mh mi mj mk b">null</code>检查，如果是<code class="fe mh mi mj mk b">null</code>则返回<code class="fe mh mi mj mk b">undefined</code>。</p><h1 id="f3e0" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">无效函数</h1><p id="55b8" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">不返回任何东西的函数有一个<code class="fe mh mi mj mk b">void</code>返回类型。</p><p id="4efb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以这样定义一个<code class="fe mh mi mj mk b">void</code>函数:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="4654" class="mt lf it mk b gy mu mv l mw mx">const greet = (): void =&gt; {<br/>  console.log("hello");<br/>};</span></pre><p id="9a95" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因为我们的函数不返回任何东西，所以我们用<code class="fe mh mi mj mk b">void</code>来表示。</p><h1 id="2972" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">重载函数类型</h1><p id="2511" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">使用TypeScript，我们可以重载函数。</p><p id="a4cd" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这意味着我们可以为同名函数定义多个函数。</p><p id="ac66" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="f26f" class="mt lf it mk b gy mu mv l mw mx">function getTax(price: number): number;<br/>function getTax(price: null): number;<br/>function getTax(price: number | null): number {<br/>  if (price !== null) {<br/>    return price * 0.2;<br/>  }<br/>  return 0;<br/>}</span></pre><p id="bcbd" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在我们调用<code class="fe mh mi mj mk b">getTax</code>时可以带一个<code class="fe mh mi mj mk b">number</code>参数或者<code class="fe mh mi mj mk b">null</code>参数。</p><p id="2d5e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">重载仅向TypeScript编译器提供有关各种签名的信息。</p><p id="a293" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">它将被合并到我们实际运行的内置JavaScript代码中的一个函数中。</p><figure class="ml mm mn mo gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi my"><img src="../Images/b0d7f8641e1db32c4bc1b85cae650f74.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7GEwwQg7BenounaK"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">照片由<a class="ae kf" href="https://unsplash.com/@charitybethlong?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">慈善机构贝丝龙</a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><h1 id="c6a1" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">结论</h1><p id="dec1" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">使用TypeScript，就像JavaScript一样，如果没有显式指定<code class="fe mh mi mj mk b">return</code>语句，隐式返回<code class="fe mh mi mj mk b">undefined</code>。</p><p id="caa1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以将<code class="fe mh mi mj mk b">noImplicitReturns</code>选项设置为<code class="fe mh mi mj mk b">true</code>，让TypeScript编译器避免隐式返回。</p><p id="466d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">TypeScript允许我们为同一个函数定义多个函数签名。</p><p id="1910" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这让我们可以在一个函数中接受不同类型的数据，并以一种清晰的方式表达出来。</p></div></div>    
</body>
</html>