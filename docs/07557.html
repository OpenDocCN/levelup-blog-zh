<html>
<head>
<title>Death by Multicollinearity</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">多重共线性死亡</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/death-by-multicollinearity-3c338252ce2b?source=collection_archive---------26-----------------------#2021-02-23">https://levelup.gitconnected.com/death-by-multicollinearity-3c338252ce2b?source=collection_archive---------26-----------------------#2021-02-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="fc2f" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如何处理预测变量可以挽救你的MLR模型的生命</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/42e86ad8ffb46477ba50490f82ffce33.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*VVMu-pAhwfxKZf1N"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">Amir-abbas Abdolali 在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="d736" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，我们必须了解什么是MLR(多元线性回归的缩写)，以充分掌握多重共线性的概念。</p><p id="84bd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">MLR估计一个响应变量(也称为因变量)与两个或更多预测变量(也称为自变量)之间的关系。例如，利润是一个因变量，完全取决于独立变量，如产品数量、销售成本、管理费用等。，而且从来不是反过来。利润将线性依赖于所有这些独立变量。当我们阅读这篇文章时，我们会看到一个真实的MLR的例子，它显示了一个人的体重指数、年龄或吸烟习惯如何直接影响他们的保险费用。我们将看到多重共线性的存在是如何削弱你的MLR模型的</p><p id="00f5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">了解MLR模型及其参数:</strong></p><p id="bce1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">典型的MLR方程如下:</strong></p><p id="012c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">电荷= β0 + β1.bmi + β2 .年龄+ β3 .性别+ β4。儿童+ β5 .地区+ β5 .吸烟者+ ϵ </strong></p><p id="498f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">费用</strong> =响应变量，一般用Y表示</p><p id="822a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> bmi、年龄、性别、儿童、地区、吸烟者</strong>=预测变量，分别用X1、X2、X3和X4表示</p><p id="ca55" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> β0 = </strong> Y轴截距(始终为常数)</p><p id="0f43" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> β1，β2，β3，β4，β5 = </strong>回归系数</p><p id="0724" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> ϵ = </strong>误差项(残差)</p><p id="131f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ls">创建MLR模型时的重要假设是预测变量之间不应高度相关。一个好的MLR模型将遵循以下过程，即如果bmi增加β1个单位，费用变量将增加1个单位，保持其他预测变量不变，如果年龄增加β2个单位，费用变量将增加1个单位，保持包括bmi在内的其他预测变量不变。如果模型不符合这一假设，我们会说预测变量表现出高度多重共线性。</em></p><h1 id="acc1" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated"><strong class="ak">那么，到底什么是多重共线性呢？</strong></h1><p id="dae2" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">当你开始你的机器学习之旅时，你会遇到这个术语。这个术语一开始听起来很拗口，但是一旦你深入研究这个主题，希望你能掌握这个术语。多重共线性可以定义为预测变量彼此相关，而不仅仅是与响应变量相关的情况。让我们抛开技术术语，通过想象一些真实的生活场景来理解这个概念。</p><blockquote class="mq mr ms"><p id="5462" class="kw kx ls ky b kz la jr lb lc ld ju le mt lg lh li mu lk ll lm mv lo lp lq lr ij bi translated"><strong class="ky ir">案例1:无多重共线性</strong></p></blockquote><p id="572f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们想象你正在为你的家人做一道美味的肋眼牛排。你要准备肉，加入盐、胡椒、迷迭香、百里香等配料，并按照戈登·拉姆齐的建议，加入一小块黄油。每种配料都会给你的牛排增添风味。现在，如果这些成分没有互相压倒对方，一起工作，他们将创造你味蕾的交响乐。在这里，配料是预测变量，风味是你的反应变量。由于这些成分不会相互冲突，它们将避免多重共线性。让我们看看下面给出的另一个例子，以便更好地阐明我们的概念。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mw"><img src="../Images/32a2f6602ea3a75b7e78929f9c83ccda.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*1WHuXOj3_Yv0NB_g"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">由<a class="ae kv" href="https://unsplash.com/@emersonvieira?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">埃莫森·维埃拉</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</figcaption></figure><blockquote class="mq mr ms"><p id="d7b7" class="kw kx ls ky b kz la jr lb lc ld ju le mt lg lh li mu lk ll lm mv lo lp lq lr ij bi translated"><strong class="ky ir">情况2:高度多重共线性</strong></p></blockquote><p id="40a1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在想象一下，你的晚餐做好了，你想吃点甜食。你冲到厨房，开始搅拌白面粉、可可粉、鸡蛋和糖，却发现你的罐子里只剩下非常有限的白糖了。然后你记起你曾经在卢克餐厅喝咖啡的时候(吉尔摩女孩参考😁)而且你已经收藏这些红糖包有一段时间了。你用红糖代替白糖，做一份甜点，结束你的渴望。现在在这种情况下，白糖和红糖彼此高度相关，你很难分辨哪种糖给甜点增加了更多的甜味。同样，你的MLR模型也很难解码哪个预测变量实际上对你的响应变量产生了影响。</p><h1 id="5655" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">交易还是不交易？？</h1><p id="3bf2" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">即使模型显示高度多重共线性，相关变量也不会影响模型的整体拟合度，也不会影响预测。简而言之，它不影响良好拟合统计。正如你在我们的白糖/红糖例子中看到的，甜点的整体甜度不会受到影响。因此，如果您对解码每个单独的预测因子对您的模型的影响不感兴趣，那么您不必担心丢弃变量。</p><h2 id="b8cc" class="mx lu iq bd lv my mz dn lz na nb dp md lf nc nd mf lj ne nf mh ln ng nh mj ni bi translated"><strong class="ak">什么时候是你模特的麻烦制造者？</strong></h2><p id="c4b9" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">这是一个问题，因为它破坏了预测变量的统计显著性，因为它增加了系数的标准误差，这意味着它增加了系数的方差，使得预测非常不重要。现在，即使您的模型仍然能够做出很好的预测，但质量会受到影响，因为您的模型没有经过训练，无法区分每个预测变量对响应变量的影响。</p><h1 id="6a95" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated"><strong class="ak">检测问题！！！</strong></h1><p id="5367" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated"><strong class="ky ir"> VIF: </strong>这是一个定量指标，告诉我们单个预测变量与其他预测变量的相关程度。例如，如果没有多重共线性，1.7的VIF意味着特定系数的方差比其应有值大70%。</p><p id="2453" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它通常用1/1 R2来表示</p><p id="5715" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ls">行业标准规定的一般经验法则:</em></p><p id="f5a6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">a) VIF≥ 5:应治疗高度相关和可变</p><p id="d680" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">b) 1&gt;VIF&gt;5:中等相关，但可接受</p><p id="eb91" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">c) VIF = 1:不相关</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/29a6ac9c4826d5f313072cc025a0d61a.png" data-original-src="https://miro.medium.com/v2/resize:fit:604/format:webp/1*JJ4JJhswYS_DVtTBjjn0lg.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">治疗前的VIF</figcaption></figure><h1 id="5c31" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated"><strong class="ak">诊断潜在症状:</strong></h1><ol class=""><li id="5130" class="nk nl iq ky b kz ml lc mm lf nm lj nn ln no lr np nq nr ns bi translated"><strong class="ky ir">相关矩阵:</strong>可以通过热图工具可视化的相关矩阵将帮助我们进行双变量数值分析，并可以向我们显示一个变量与其他变量之间的相关性。(<em class="ls">注意，相关矩阵一次比较一个变量，而VIF将一个变量与所有其他数值变量相关联。)</em>这个矩阵可以给我们一个关于如何处理高度相关变量的合理想法，并指引我们忽略那些看起来不太相关的变量。<em class="ls">(注意:高相关系数意味着两个变量高度相关，但并不总是意味着VIF总是很高)</em></li></ol><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/9745588da3668b7a87ab0333a05825e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1270/format:webp/1*D89IbejYqbAhWBPdonY92w.png"/></div></figure><p id="638e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">2.<strong class="ky ir"> P值:</strong>第二级诊断是检查每个变量的P值。如果变量的p值大于0.05，那么它们可以被称为统计上不显著的，在考虑VIF之前，最好去除这些值。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/4fbf7d33ef2e62a2f3656363cc8fda76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1344/format:webp/1*fRiRewjFleO7Bf_dNFb8Bw.png"/></div></figure><p id="3d35" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi nv translated"><span class="l nw nx ny bm nz oa ob oc od di"> T </span> <strong class="ky ir">创建预测变量:</strong></p><ol class=""><li id="469d" class="nk nl iq ky b kz la lc ld lf oe lj of ln og lr np nq nr ns bi translated">检查预测变量的p值是否大于0.05，以便移除这些变量。删除这些变量将提高每个变量的VIF。</li><li id="9cd4" class="nk nl iq ky b kz oh lc oi lf oj lj ok ln ol lr np nq nr ns bi translated">检查是否有对业务领域和潜在问题陈述没有任何意义的变量。您可以查看关联热图，以了解某些变量是否与MLR相关。例如，如果你看到电荷和性别有-0.058的关系，意味着它们只有5.8%的相关性。删除这些值以提高VIF值。</li><li id="a7b6" class="nk nl iq ky b kz oh lc oi lf oj lj ok ln ol lr np nq nr ns bi translated">如果你仍然看到一个或多个变量的VIF大于5.00，即使你已经用以上两种方法处理了它们。丢弃如此高的VIF变量将极大地改善其他剩余变量的VIF。</li></ol><h1 id="1792" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated"><strong class="ak">后处理:</strong></h1><p id="f824" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">更新后的模型将具有低于5.00的VIF值和低于0.05的p值。</p><blockquote class="mq mr ms"><p id="9c5f" class="kw kx ls ky b kz la jr lb lc ld ju le mt lg lh li mu lk ll lm mv lo lp lq lr ij bi translated">T <strong class="ky ir">创建的p值:</strong></p></blockquote><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi om"><img src="../Images/5eb42a7af783f35cb053342c4d27cf57.png" data-original-src="https://miro.medium.com/v2/resize:fit:994/format:webp/1*wcKZSawOBULPhEfiWvMsdA.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">足够重要的p值仍然存在</figcaption></figure><blockquote class="mq mr ms"><p id="d301" class="kw kx ls ky b kz la jr lb lc ld ju le mt lg lh li mu lk ll lm mv lo lp lq lr ij bi translated"><strong class="ky ir">治疗过的VIF: </strong></p></blockquote><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi on"><img src="../Images/a49271750b56cf6c5d87e768429e5994.png" data-original-src="https://miro.medium.com/v2/resize:fit:654/format:webp/1*PigemprANKcL67Xpbl5w4w.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">治疗后更新的VIFs</figcaption></figure><p id="20eb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi nv translated"><span class="l nw nx ny bm nz oa ob oc od di"> C </span> <strong class="ky ir">结束语:</strong>本练习的最终目标是帮助您创建最佳的MLR模型，以便为解决现实世界的问题创建更好的预测。</p><p id="77a6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ls">如有任何与数据分析相关的疑问，请随时联系我..更多即将推出！！！</em></p><p id="1dee" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">再见！！😊</p></div></div>    
</body>
</html>