<html>
<head>
<title>Realtime Shopping List App with AWS Amplify, AppSync, GraphQL, and Vue.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">带有AWS Amplify、AppSync、GraphQL和Vue.js的实时购物清单应用程序</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/realtime-shopping-list-app-with-aws-amplify-appsync-graphql-and-vue-js-94f9d45fe9d2?source=collection_archive---------3-----------------------#2020-03-13">https://levelup.gitconnected.com/realtime-shopping-list-app-with-aws-amplify-appsync-graphql-and-vue-js-94f9d45fe9d2?source=collection_archive---------3-----------------------#2020-03-13</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/c6a1b58007084d492fc07c63c50177c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rtUUcH_Ji_IR7uCTIbPe4A.jpeg"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">照片由<a class="ae kf" href="https://www.pexels.com/@wdnet?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> PhotoMIX有限公司</a>从<a class="ae kf" href="https://www.pexels.com/photo/vegetables-stall-868110/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> Pexels </a>拍摄</figcaption></figure><p id="d953" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">与Firebase和Azure等其他无服务器提供商相比，AWS是出了名的难学。有太多的服务和配置选择，以至于启动并运行一个应用程序可能是一项艰巨的任务。</p><p id="b28d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这就是AWS Amplify大放异彩的地方。只需几个终端命令，您就可以在不到一个小时的时间内运行整个后端系统。我们所说的带认证的API比你早上准备的时间还要短😮。</p><h1 id="b7a5" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">视频教程</h1><figure class="mc md me mf gt ju"><div class="bz fp l di"><div class="mg mh l"/></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">视频教程</figcaption></figure><h1 id="5c5b" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">入门指南</h1><p id="2522" class="pw-post-body-paragraph kg kh it ki b kj mi kl km kn mj kp kq kr mk kt ku kv ml kx ky kz mm lb lc ld im bi translated">如果您还没有帐户，请前往<a class="ae kf" href="https://aws.amazon.com/" rel="noopener ugc nofollow" target="_blank"> AWS </a>创建一个帐户。接下来，我们需要安装CLI。打开您的终端并运行以下命令:</p><pre class="mc md me mf gt mn mo mp mq aw mr bi"><span id="a073" class="ms lf it mo b gy mt mu l mv mw">npm i -g @aws-amplify/cli</span></pre><h1 id="44d9" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">应用程序设置</h1><p id="63f3" class="pw-post-body-paragraph kg kh it ki b kj mi kl km kn mj kp kq kr mk kt ku kv ml kx ky kz mm lb lc ld im bi translated">在本文中，我们将使用Vue.js和AWS Amplify构建一个购物清单。它将提供认证和GraphQL API。如果您从未使用过<a class="ae kf" href="https://graphql.org/" rel="noopener ugc nofollow" target="_blank"> GraphQL </a>(我以前没有使用过)，请不要担心。Amplify和AppSync使它变得超级简单，因为它编写了我们检索和操作数据所需的查询。</p><h2 id="6631" class="ms lf it bd lg mx my dn lk mz na dp lo kr nb nc ls kv nd ne lw kz nf ng ma nh bi translated">Vue项目</h2><p id="5baf" class="pw-post-body-paragraph kg kh it ki b kj mi kl km kn mj kp kq kr mk kt ku kv ml kx ky kz mm lb lc ld im bi translated">要创建Vue项目，请打开您的终端，cd到您选择的目录，并运行以下命令:</p><pre class="mc md me mf gt mn mo mp mq aw mr bi"><span id="e1dd" class="ms lf it mo b gy mt mu l mv mw">npx @vue/cli create amplify-shopping-list</span></pre><p id="312f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这些是我在创建新项目时选择的CLI选项:</p><ol class=""><li id="eed9" class="ni nj it ki b kj kk kn ko kr nk kv nl kz nm ld nn no np nq bi translated">请选择一个预置:<br/> <strong class="ki iu">手动选择特性</strong></li><li id="5e96" class="ni nj it ki b kj nr kn ns kr nt kv nu kz nv ld nn no np nq bi translated">从列表中:<br/> <strong class="ki iu">通天塔、路由器、棉绒/格式化程序</strong></li><li id="e7cc" class="ni nj it ki b kj nr kn ns kr nt kv nu kz nv ld nn no np nq bi translated">对路由器使用历史模式？<br/>Y<strong class="ki iu">Y</strong></li><li id="7c7c" class="ni nj it ki b kj nr kn ns kr nt kv nu kz nv ld nn no np nq bi translated">选择短绒/格式器配置<br/><strong class="ki iu">ESLint+beauty</strong></li><li id="3578" class="ni nj it ki b kj nr kn ns kr nt kv nu kz nv ld nn no np nq bi translated">摘附加皮棉功能<br/>T21【皮棉上存</li><li id="fdc5" class="ni nj it ki b kj nr kn ns kr nt kv nu kz nv ld nn no np nq bi translated">你更喜欢把Babel，ESLint等的配置放在哪里？？<br/> <strong class="ki iu">在专用配置文件</strong>中</li></ol><p id="0fc1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">接下来，在您喜欢的代码编辑器中打开项目。我将使用VS代码。打开一个新终端(Terminal =&gt; New Terminal)并运行以下命令:</p><pre class="mc md me mf gt mn mo mp mq aw mr bi"><span id="b0f2" class="ms lf it mo b gy mt mu l mv mw">npm i bootstrap-vue <!-- -->aws-amplify aws-amplify-vue</span></pre><h2 id="7e58" class="ms lf it bd lg mx my dn lk mz na dp lo kr nb nc ls kv nd ne lw kz nf ng ma nh bi translated">AWS放大器</h2><p id="6651" class="pw-post-body-paragraph kg kh it ki b kj mi kl km kn mj kp kq kr mk kt ku kv ml kx ky kz mm lb lc ld im bi translated">现在，我们将设置我们的AWS IAM用户，我们将使用该用户以编程方式创建我们将在应用程序中使用的服务。在终端中运行，并按照说明操作:</p><pre class="mc md me mf gt mn mo mp mq aw mr bi"><span id="0689" class="ms lf it mo b gy mt mu l mv mw">amplify configure</span></pre></div><div class="ab cl nw nx hx ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="im in io ip iq"><p id="f576" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">接下来，我们将在项目中初始化amplify。在终端中运行以下命令:</p><pre class="mc md me mf gt mn mo mp mq aw mr bi"><span id="5821" class="ms lf it mo b gy mt mu l mv mw">amplify init</span></pre><p id="e9d6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu">选择以下选项:</strong></p><ol class=""><li id="672f" class="ni nj it ki b kj kk kn ko kr nk kv nl kz nm ld nn no np nq bi translated">输入项目名称:<br/> <strong class="ki iu">回车选择默认</strong></li><li id="6730" class="ni nj it ki b kj nr kn ns kr nt kv nu kz nv ld nn no np nq bi translated">输入环境的名称:<strong class="ki iu"> <br/> dev </strong></li><li id="a4fd" class="ni nj it ki b kj nr kn ns kr nt kv nu kz nv ld nn no np nq bi translated">选择你的默认编辑器:<br/> <strong class="ki iu"> Visual Studio代码</strong></li><li id="9b3c" class="ni nj it ki b kj nr kn ns kr nt kv nu kz nv ld nn no np nq bi translated">选择你正在构建的应用类型:<br/> <strong class="ki iu"> javascript </strong></li><li id="4f6d" class="ni nj it ki b kj nr kn ns kr nt kv nu kz nv ld nn no np nq bi translated">你用的是什么javascript框架:<br/> <strong class="ki iu"> vue </strong></li><li id="d108" class="ni nj it ki b kj nr kn ns kr nt kv nu kz nv ld nn no np nq bi translated">源目录路径:<br/> <strong class="ki iu">回车选择默认</strong> (src)</li><li id="b6d0" class="ni nj it ki b kj nr kn ns kr nt kv nu kz nv ld nn no np nq bi translated">分发目录路径:<br/> <strong class="ki iu">回车选择默认</strong> (dist)</li><li id="afe0" class="ni nj it ki b kj nr kn ns kr nt kv nu kz nv ld nn no np nq bi translated">构建命令:<br/> <strong class="ki iu">回车选择默认的</strong> (npm.cmd run-script build)</li><li id="ad56" class="ni nj it ki b kj nr kn ns kr nt kv nu kz nv ld nn no np nq bi translated">开始命令:<br/> <strong class="ki iu">回车选择默认</strong> (npm.cmd run-script serve)</li><li id="c678" class="ni nj it ki b kj nr kn ns kr nt kv nu kz nv ld nn no np nq bi translated">是否要使用AWS配置文件？:<br/>Y<strong class="ki iu">Y</strong></li><li id="95a6" class="ni nj it ki b kj nr kn ns kr nt kv nu kz nv ld nn no np nq bi translated">选择您在最后一步中设置的帐户</li></ol></div><div class="ab cl nw nx hx ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="im in io ip iq"><p id="f699" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在AWS amplify已经在项目中初始化，让我们用下面的命令添加我们的API和身份验证:</p><pre class="mc md me mf gt mn mo mp mq aw mr bi"><span id="b647" class="ms lf it mo b gy mt mu l mv mw">amplify add api</span></pre><p id="ffa2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><strong class="ki iu">选择以下选项:</strong></p><ol class=""><li id="6388" class="ni nj it ki b kj kk kn ko kr nk kv nl kz nm ld nn no np nq bi translated">请从下列服务中选择一项:<br/> <strong class="ki iu"> GraphQL </strong></li><li id="969f" class="ni nj it ki b kj nr kn ns kr nt kv nu kz nv ld nn no np nq bi translated">提供API名称:<strong class="ki iu"> <br/>回车默认(amplifyshoppinglist) </strong></li><li id="a82c" class="ni nj it ki b kj nr kn ns kr nt kv nu kz nv ld nn no np nq bi translated">选择API的默认授权类型:<strong class="ki iu"> <br/> Amazon Cognito用户池</strong></li><li id="3aa6" class="ni nj it ki b kj nr kn ns kr nt kv nu kz nv ld nn no np nq bi translated">您想使用默认的身份验证和安全配置吗？<strong class="ki iu">默认配置</strong></li><li id="79e7" class="ni nj it ki b kj nr kn ns kr nt kv nu kz nv ld nn no np nq bi translated">您希望用户如何登录？<br/> <strong class="ki iu">用户名</strong></li><li id="5111" class="ni nj it ki b kj nr kn ns kr nt kv nu kz nv ld nn no np nq bi translated">您想配置高级设置吗？<br/> <strong class="ki iu">不，我完成了。</strong></li><li id="7d30" class="ni nj it ki b kj nr kn ns kr nt kv nu kz nv ld nn no np nq bi translated">您想为GraphQL API配置高级设置吗:<br/> <strong class="ki iu">不，我完成了</strong></li><li id="d855" class="ni nj it ki b kj nr kn ns kr nt kv nu kz nv ld nn no np nq bi translated">你有带注释的GraphQL模式吗？<br/> <strong class="ki iu"> N </strong></li><li id="4a6c" class="ni nj it ki b kj nr kn ns kr nt kv nu kz nv ld nn no np nq bi translated"><strong class="ki iu">。你想要一个引导模式创建吗？<br/>Y<strong class="ki iu">Y</strong></strong></li><li id="7647" class="ni nj it ki b kj nr kn ns kr nt kv nu kz nv ld nn no np nq bi translated">什么最能描述您的项目:<br/> <strong class="ki iu">带有字段的单个对象(例如，带有ID、名称、描述的“Todo”)</strong></li><li id="741b" class="ni nj it ki b kj nr kn ns kr nt kv nu kz nv ld nn no np nq bi translated">您想现在编辑模式吗？<br/> <strong class="ki iu"> n </strong></li></ol><h2 id="067d" class="ms lf it bd lg mx my dn lk mz na dp lo kr nb nc ls kv nd ne lw kz nf ng ma nh bi translated">应用程序接口</h2><p id="95a7" class="pw-post-body-paragraph kg kh it ki b kj mi kl km kn mj kp kq kr mk kt ku kv ml kx ky kz mm lb lc ld im bi translated">设置完成后，您应该在项目的根目录下有一个新的“amplify”文件夹。在该文件夹中，导航到/back end/API/{ your _ project _ name }/schema . graph QL。该文件决定了我们将在GraphQL API中使用的数据模型。在该文件中粘贴以下内容:</p><pre class="mc md me mf gt mn mo mp mq aw mr bi"><span id="728a" class="ms lf it mo b gy mt mu l mv mw">type ShoppingListItem @model @auth(rules: [{allow: owner}]) {<br/>id: ID!<br/>itemName: String!<br/>}</span></pre><p id="3602" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这将建立一个DynamoDb表，其中的列与上述字段相匹配。它还将为我们的GraphQL API设置查询、变更和订阅，只有创建数据的所有者才能访问这些API(@ auth section)。我们需要做的就是保存所有内容，在VS代码中打开一个新的终端，并运行以下命令:</p><pre class="mc md me mf gt mn mo mp mq aw mr bi"><span id="c058" class="ms lf it mo b gy mt mu l mv mw">amplify push</span></pre><h2 id="e4a5" class="ms lf it bd lg mx my dn lk mz na dp lo kr nb nc ls kv nd ne lw kz nf ng ma nh bi translated"><strong class="ak">选择以下选项:</strong></h2><ol class=""><li id="65a3" class="ni nj it ki b kj mi kn mj kr od kv oe kz of ld nn no np nq bi translated">您想为新创建的GraphQL API: <br/> <strong class="ki iu"> Y </strong>生成代码吗</li><li id="16b1" class="ni nj it ki b kj nr kn ns kr nt kv nu kz nv ld nn no np nq bi translated">选择代码生成语言目标:<br/> <strong class="ki iu"> javascript </strong></li><li id="4db2" class="ni nj it ki b kj nr kn ns kr nt kv nu kz nv ld nn no np nq bi translated">输入graphql查询、突变和订阅的文件名模式<br/> <strong class="ki iu">回车默认为(src\graphql\**\*)。</strong></li><li id="1794" class="ni nj it ki b kj nr kn ns kr nt kv nu kz nv ld nn no np nq bi translated">您是否希望生成/更新所有可能的GraphQL操作—查询、变异和订阅<br/> <strong class="ki iu"> Y </strong></li><li id="544b" class="ni nj it ki b kj nr kn ns kr nt kv nu kz nv ld nn no np nq bi translated">输入最大语句深度[如果模式深度嵌套，则从默认值增加] <br/> <strong class="ki iu">按Enter键选择默认值(2) </strong></li></ol></div><div class="ab cl nw nx hx ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="im in io ip iq"><p id="5bc8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这将需要一些时间来运行，但完成后，你会看到你有一些新的文件夹和文件:</p><h2 id="398c" class="ms lf it bd lg mx my dn lk mz na dp lo kr nb nc ls kv nd ne lw kz nf ng ma nh bi translated">src/graphql文件夹</h2><p id="27c0" class="pw-post-body-paragraph kg kh it ki b kj mi kl km kn mj kp kq kr mk kt ku kv ml kx ky kz mm lb lc ld im bi translated">当您更改您的amplify schema.graphql时，该文件夹会自动创建和更新。它包含我们稍后将使用的查询、变更和订阅。</p><h2 id="30aa" class="ms lf it bd lg mx my dn lk mz na dp lo kr nb nc ls kv nd ne lw kz nf ng ma nh bi translated">. graphqlconfig.yml</h2><p id="6c5c" class="pw-post-body-paragraph kg kh it ki b kj mi kl km kn mj kp kq kr mk kt ku kv ml kx ky kz mm lb lc ld im bi translated">这个文件控制上面的代码生成选项，这些选项是我们在创建API时选择的。如果您想更改代码的文件路径或语言，您可以在这里进行更改。</p><h1 id="6ffc" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">Vue项目</h1><p id="ac42" class="pw-post-body-paragraph kg kh it ki b kj mi kl km kn mj kp kq kr mk kt ku kv ml kx ky kz mm lb lc ld im bi translated">在我们的main.js文件中，配置Vue项目以使用Amplify和BootstrapVue:</p><figure class="mc md me mf gt ju"><div class="bz fp l di"><div class="og mh l"/></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">在main.js中导入Amplify</figcaption></figure><h2 id="5b6d" class="ms lf it bd lg mx my dn lk mz na dp lo kr nb nc ls kv nd ne lw kz nf ng ma nh bi translated">证明</h2><p id="d6a7" class="pw-post-body-paragraph kg kh it ki b kj mi kl km kn mj kp kq kr mk kt ku kv ml kx ky kz mm lb lc ld im bi translated">好了，现在我们终于可以开始编码了🙌！在我们的views文件夹中，创建一个新文件Auth.vue。这将处理我们应用程序中的所有认证流程，Amplify已经神奇地通过他们的认证器组件和事件总线为我们处理了所有这些，我们可以监听这些动作。</p><p id="6d15" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在您的Auth.vue中粘贴以下代码:</p><figure class="mc md me mf gt ju"><div class="bz fp l di"><div class="og mh l"/></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">授权用户</figcaption></figure><h2 id="5940" class="ms lf it bd lg mx my dn lk mz na dp lo kr nb nc ls kv nd ne lw kz nf ng ma nh bi translated">购物单</h2><p id="86d8" class="pw-post-body-paragraph kg kh it ki b kj mi kl km kn mj kp kq kr mk kt ku kv ml kx ky kz mm lb lc ld im bi translated">既然我们已经设置了用户身份验证，现在是创建购物列表的时候了。在views文件夹中，创建一个新文件，并将其命名为ShoppingList.vue。我试图用注释来解释代码中发生了什么。</p><figure class="mc md me mf gt ju"><div class="bz fp l di"><div class="og mh l"/></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">ShoppingList.vue</figcaption></figure><h2 id="f460" class="ms lf it bd lg mx my dn lk mz na dp lo kr nb nc ls kv nd ne lw kz nf ng ma nh bi translated">路由器</h2><p id="0ec9" class="pw-post-body-paragraph kg kh it ki b kj mi kl km kn mj kp kq kr mk kt ku kv ml kx ky kz mm lb lc ld im bi translated">现在我们已经设置好了所有页面，我们需要配置我们的路由，并在路由器中添加一个路由保护。在src/router/index.js中添加以下代码:</p><figure class="mc md me mf gt ju"><div class="bz fp l di"><div class="og mh l"/></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">Vue路由器</figcaption></figure><p id="e3c9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在你有了一个实时购物清单应用程序。这只是一个简单的应用程序，还有很大的改进空间。如果您改进了这个应用程序或有任何其他问题，请在下面的评论中提出。</p><figure class="mc md me mf gt ju"><div class="bz fp l di"><div class="oh mh l"/></div></figure></div></div>    
</body>
</html>