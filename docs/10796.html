<html>
<head>
<title>How to write performant React code: rules, patterns, doâ€™s and donâ€™ts</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">å¦‚ä½•ç¼–å†™performant Reactä»£ç :è§„åˆ™ã€æ¨¡å¼ã€è¯¥åšä»€ä¹ˆå’Œä¸è¯¥åšä»€ä¹ˆ</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://levelup.gitconnected.com/how-to-write-performant-react-code-rules-patterns-dos-and-don-ts-89056af11ede?source=collection_archive---------4-----------------------#2022-01-12">https://levelup.gitconnected.com/how-to-write-performant-react-code-rules-patterns-dos-and-don-ts-89056af11ede?source=collection_archive---------4-----------------------#2022-01-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/e8f7f81636b4a61fe84162ceb4025271.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UK6zVXpR46PEb0G_AqsgSg.jpeg"/></div></div></figure><p id="6d3d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æ€§èƒ½å’Œååº”ï¼å¦‚æ­¤æœ‰è¶£çš„è¯é¢˜ï¼Œå´æœ‰å¦‚æ­¤å¤šæœ‰äº‰è®®çš„è§‚ç‚¹å’Œå¦‚æ­¤å¤šçš„æœ€ä½³å®è·µï¼Œå´åœ¨çŸ­çŸ­6ä¸ªæœˆå†…å˜æˆäº†åé¢ã€‚æœ‰æ²¡æœ‰å¯èƒ½åœ¨è¿™é‡Œè¯´äº›æ˜ç¡®çš„è¯ï¼Œæˆ–è€…æäº›ç¬¼ç»Ÿçš„å»ºè®®ï¼Ÿ</p><p id="4e01" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">é€šå¸¸ï¼Œæ€§èƒ½ä¸“å®¶æ˜¯â€œè¿‡æ—©ä¼˜åŒ–æ˜¯ä¸‡æ¶ä¹‹æºâ€å’Œâ€œåº¦é‡ä¼˜å…ˆâ€è§„åˆ™çš„æ”¯æŒè€…ã€‚å¤§è‡´ç¿»è¯‘è¿‡æ¥å°±æ˜¯â€œä¸è¦ä¿®ç†æ²¡æœ‰åçš„ä¸œè¥¿â€ï¼Œè¿™ä¸€ç‚¹å¾ˆéš¾åé©³ã€‚ä½†æ˜¯æˆ‘è¿˜æ˜¯è¦å»ğŸ˜‰</p><p id="b232" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æˆ‘å–œæ¬¢Reactçš„ä¸€ç‚¹æ˜¯ï¼Œå®ƒè®©å®ç°å¤æ‚çš„UIäº¤äº’å˜å¾—å¼‚å¸¸ç®€å•ã€‚æˆ‘ä¸å–œæ¬¢Reactçš„ä¸€ç‚¹æ˜¯ï¼Œå®ƒä¹Ÿè®©æˆ‘ä»¬éå¸¸å®¹æ˜“çŠ¯é”™è¯¯ï¼Œè€Œè¿™äº›é”™è¯¯ä¼šå¸¦æ¥æ— æ³•ç«‹å³çœ‹åˆ°çš„å·¨å¤§åæœã€‚å¥½æ¶ˆæ¯æ˜¯ï¼Œé˜²æ­¢è¿™äº›é”™è¯¯å¹¶ç«‹å³ç¼–å†™å¤§å¤šæ•°æƒ…å†µä¸‹éƒ½æ˜¯é«˜æ€§èƒ½çš„ä»£ç ä¹Ÿéå¸¸å®¹æ˜“ï¼Œä»è€Œå¤§å¤§å‡å°‘äº†è°ƒæŸ¥æ€§èƒ½é—®é¢˜æ‰€éœ€çš„æ—¶é—´å’Œç²¾åŠ›ï¼Œå› ä¸ºè¿™æ ·çš„é—®é¢˜ä¼šå°‘å¾—å¤šã€‚åŸºæœ¬ä¸Šï¼Œå½“æ¶‰åŠåˆ°ååº”å’Œæ€§èƒ½æ—¶ï¼Œâ€œè¿‡æ—©ä¼˜åŒ–â€å®é™…ä¸Šæ˜¯ä¸€ä»¶å¥½äº‹ï¼Œæ˜¯æ¯ä¸ªäººéƒ½åº”è¯¥åšçš„äº‹æƒ…ğŸ˜‰ã€‚ä½ åªéœ€è¦çŸ¥é“ä¸€äº›è¦æ³¨æ„çš„æ¨¡å¼ï¼Œå°±èƒ½æœ‰æ„ä¹‰åœ°åšåˆ°è¿™ä¸€ç‚¹ã€‚</p><p id="cc76" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æ‰€ä»¥è¿™æ­£æ˜¯æˆ‘æƒ³åœ¨è¿™ç¯‡æ–‡ç« ä¸­è¯æ˜çš„ğŸ˜Šã€‚æˆ‘å°†é€šè¿‡ä¸€æ­¥ä¸€æ­¥åœ°å®ç°ä¸€ä¸ªâ€œç°å®ç”Ÿæ´»â€çš„åº”ç”¨ç¨‹åºæ¥åšåˆ°è¿™ä¸€ç‚¹ï¼Œé¦–å…ˆä»¥ä¸€ç§â€œæ­£å¸¸â€çš„æ–¹å¼ï¼Œä½¿ç”¨ä½ å‡ ä¹åœ¨ä»»ä½•åœ°æ–¹éƒ½èƒ½çœ‹åˆ°çš„æ¨¡å¼ï¼Œå¹¶ä¸”ä½ è‡ªå·±è‚¯å®šä¼šå¤šæ¬¡ä½¿ç”¨è¿™äº›æ¨¡å¼ã€‚ç„¶ååœ¨è€ƒè™‘æ€§èƒ½çš„æƒ…å†µä¸‹é‡æ„æ¯ä¸€æ­¥ï¼Œä»æ¯ä¸€æ­¥ä¸­æç‚¼å‡ºä¸€ä¸ªå¯ä»¥åœ¨å¤§å¤šæ•°æ—¶å€™é€‚ç”¨äºå¤§å¤šæ•°appçš„é€šç”¨è§„åˆ™ã€‚ç„¶åæœ€åæ¯”è¾ƒç»“æœã€‚</p><p id="2d67" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æˆ‘ä»¬å¼€å§‹å§ï¼</p><p id="0fd3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æˆ‘ä»¬å°†ä¸ºä¸€ä¸ªåœ¨çº¿å•†åº—ç¼–å†™ä¸€ä¸ªâ€œè®¾ç½®â€é¡µé¢(æˆ‘ä»¬åœ¨ä»¥å‰çš„â€œReactå¼€å‘äººå‘˜çš„é«˜çº§ç±»å‹è„šæœ¬â€æ–‡ç« ä¸­ä»‹ç»è¿‡)ã€‚åœ¨è¯¥é¡µé¢ä¸Šï¼Œç”¨æˆ·å¯ä»¥ä»åˆ—è¡¨ä¸­é€‰æ‹©ä¸€ä¸ªå›½å®¶ï¼ŒæŸ¥çœ‹è¯¥å›½å®¶çš„æ‰€æœ‰å¯ç”¨ä¿¡æ¯(å¦‚è´§å¸ã€äº¤ä»˜æ–¹å¼ç­‰)ï¼Œç„¶åå°†è¯¥å›½å®¶ä¿å­˜ä¸ºä»–ä»¬é€‰æ‹©çš„å›½å®¶ã€‚è¯¥é¡µé¢çœ‹èµ·æ¥ä¼šåƒè¿™æ ·:</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi kw"><img src="../Images/0c83d6f710bb5de584d9a1a21ceaad92.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*v4Febg4DzA3jKnSp.png"/></div></div></figure><p id="bf70" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">åœ¨å·¦ä¾§ï¼Œæˆ‘ä»¬å°†æœ‰ä¸€ä¸ªå›½å®¶çš„åˆ—è¡¨ï¼Œæœ‰â€œä¿å­˜â€å’Œâ€œé€‰æ‹©â€çŠ¶æ€ï¼Œå½“åˆ—è¡¨ä¸­çš„ä¸€ä¸ªé¡¹ç›®è¢«å•å‡»æ—¶ï¼Œåœ¨å³ä¾§çš„åˆ—ä¸­æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯ã€‚å½“æŒ‰ä¸‹â€œä¿å­˜â€æŒ‰é’®æ—¶,â€œé€‰å®šâ€çš„å›½å®¶/åœ°åŒºå˜ä¸ºâ€œå·²ä¿å­˜â€,å¸¦æœ‰ä¸åŒçš„é¡¹ç›®é¢œè‰²ã€‚</p><p id="9dd8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">å“¦ï¼Œæˆ‘ä»¬å½“ç„¶å¸Œæœ›é‚£é‡Œæ˜¯é»‘æš—æ¨¡å¼ï¼Œæ¯•ç«Ÿç°åœ¨æ˜¯2022å¹´ï¼</p><p id="c457" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æ­¤å¤–ï¼Œè€ƒè™‘åˆ°Reactä¸­90%çš„æ€§èƒ½é—®é¢˜å¯ä»¥æ€»ç»“ä¸ºâ€œå¤ªå¤šçš„é‡æ–°æ¸²æŸ“â€ï¼Œæˆ‘ä»¬å°†ä¸»è¦å…³æ³¨å‡å°‘æ–‡ç« ä¸­çš„è¿™äº›é—®é¢˜ã€‚(å¦å¤–10%æ˜¯:â€œæ¸²æŸ“å¤ªé‡â€å’Œâ€œéœ€è¦è¿›ä¸€æ­¥è°ƒæŸ¥çš„éå¸¸å¥‡æ€ªçš„ä¸œè¥¿â€ã€‚)</p><h1 id="bfe0" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">è®©æˆ‘ä»¬é¦–å…ˆæ„å»ºæˆ‘ä»¬çš„åº”ç”¨ç¨‹åº</h1><p id="1a64" class="pw-post-body-paragraph jy jz iq ka b kb lz kd ke kf ma kh ki kj mb kl km kn mc kp kq kr md kt ku kv ij bi translated">é¦–å…ˆï¼Œè®©æˆ‘ä»¬çœ‹çœ‹è®¾è®¡ï¼Œç”»å‡ºæƒ³è±¡ä¸­çš„è¾¹ç•Œï¼Œå¹¶èµ·è‰æˆ‘ä»¬æœªæ¥åº”ç”¨ç¨‹åºçš„ç»“æ„ï¼Œä»¥åŠæˆ‘ä»¬éœ€è¦åœ¨é‚£é‡Œå®ç°å“ªäº›ç»„ä»¶:</p><ul class=""><li id="7e67" class="me mf iq ka b kb kc kf kg kj mg kn mh kr mi kv mj mk ml mm bi translated">ä¸€ä¸ªæ ¹â€œé¡µé¢â€ç»„ä»¶ï¼Œæˆ‘ä»¬åœ¨å…¶ä¸­å¤„ç†â€œæäº¤â€é€»è¾‘å’Œå›½å®¶é€‰æ‹©é€»è¾‘</li><li id="c21d" class="me mf iq ka b kb mn kf mo kj mp kn mq kr mr kv mj mk ml mm bi translated">ä¸€ä¸ªâ€œå›½å®¶åˆ—è¡¨â€ç»„ä»¶ï¼Œå°†æ‰€æœ‰å›½å®¶å‘ˆç°åœ¨ä¸€ä¸ªåˆ—è¡¨ä¸­ï¼Œå¹¶åœ¨æœªæ¥å¤„ç†åƒè¿‡æ»¤å’Œæ’åºçš„äº‹æƒ…</li><li id="b142" class="me mf iq ka b kb mn kf mo kj mp kn mq kr mr kv mj mk ml mm bi translated">â€œItemâ€ç»„ä»¶ï¼Œå®ƒå°†å›½å®¶å‘ˆç°åœ¨â€œå›½å®¶åˆ—è¡¨â€ä¸­</li><li id="708c" class="me mf iq ka b kb mn kf mo kj mp kn mq kr mr kv mj mk ml mm bi translated">ä¸€ä¸ªâ€œé€‰æ‹©çš„å›½å®¶â€ç»„ä»¶ï¼Œæä¾›å…³äºé€‰æ‹©çš„å›½å®¶çš„è¯¦ç»†ä¿¡æ¯ï¼Œå¹¶æœ‰â€œä¿å­˜â€æŒ‰é’®</li></ul><figure class="kx ky kz la gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi kw"><img src="../Images/77a4027cfab5bd32955b487860f06a55.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*63RUYTexQf21qHqN.png"/></div></div></figure><p id="6f2e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">å½“ç„¶ï¼Œè¿™ä¸æ˜¯å®ç°è¿™ä¸ªé¡µé¢çš„å”¯ä¸€å¯èƒ½çš„æ–¹å¼ï¼Œè¿™å°±æ˜¯Reactçš„ä¼˜ç‚¹å’Œç¼ºç‚¹:ä»»ä½•äº‹æƒ…éƒ½å¯ä»¥ç”¨ä¸€ç™¾ä¸‡ç§æ–¹å¼å®ç°ï¼Œä»»ä½•äº‹æƒ…éƒ½æ²¡æœ‰æ­£ç¡®æˆ–é”™è¯¯çš„ç­”æ¡ˆã€‚ä½†ä»é•¿è¿œæ¥çœ‹ï¼Œåœ¨å¿«é€Ÿå¢é•¿æˆ–å·²ç»å¾ˆå¤§çš„åº”ç”¨ç¨‹åºä¸­ï¼Œæœ‰ä¸€äº›æ¨¡å¼ç»å¯¹å¯ä»¥è¢«ç§°ä¸º<strong class="ka ir">â€œæ°¸è¿œä¸è¦è¿™æ ·åšâ€</strong>æˆ–<strong class="ka ir">â€œè¿™æ˜¯å¿…é¡»çš„â€</strong>ã€‚</p><p id="c3fa" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">è®©æˆ‘ä»¬çœ‹çœ‹æˆ‘ä»¬æ˜¯å¦èƒ½ä¸€èµ·è§£å†³å®ƒä»¬ğŸ™‚</p><h1 id="e757" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">å®ç°é¡µé¢ç»„ä»¶</h1><p id="e1f5" class="pw-post-body-paragraph jy jz iq ka b kb lz kd ke kf ma kh ki kj mb kl km kn mc kp kq kr md kt ku kv ij bi translated">ç°åœ¨ï¼Œç»ˆäºåˆ°äº†åŠ¨æ‰‹åšä¸€äº›ç¼–ç çš„æ—¶å€™äº†ã€‚è®©æˆ‘ä»¬ä»â€œæ ¹â€å¼€å§‹ï¼Œå®ç°é¡µé¢ç»„ä»¶ã€‚</p><p id="182d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">é¦–å…ˆ:æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå…·æœ‰ä¸€äº›é£æ ¼çš„åŒ…è£…å™¨ï¼Œå‘ˆç°é¡µé¢æ ‡é¢˜ï¼Œâ€œå›½å®¶åˆ—è¡¨â€å’Œâ€œé€‰å®šçš„å›½å®¶â€ç»„ä»¶ã€‚</p><p id="a18b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ç¬¬äºŒ:æˆ‘ä»¬çš„é¡µé¢åº”è¯¥ä»æŸä¸ªåœ°æ–¹æ¥æ”¶å›½å®¶åˆ—è¡¨ï¼Œç„¶åå°†å®ƒä¼ é€’ç»™<code class="fe ms mt mu mv b">CountriesList</code>ç»„ä»¶ï¼Œä»¥ä¾¿å®ƒå¯ä»¥å‘ˆç°è¿™äº›åˆ—è¡¨ã€‚</p><p id="3c98" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ç¬¬ä¸‰:æˆ‘ä»¬çš„é¡µé¢åº”è¯¥æœ‰ä¸€ä¸ªâ€œé€‰å®šâ€å›½å®¶çš„æ¦‚å¿µï¼Œå®ƒå°†ä»<code class="fe ms mt mu mv b">CountriesList</code>ç»„ä»¶æ¥æ”¶å¹¶ä¼ é€’ç»™<code class="fe ms mt mu mv b">SelectedCountry</code>ç»„ä»¶ã€‚</p><p id="3a4d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æœ€å:æˆ‘ä»¬çš„é¡µé¢åº”è¯¥æœ‰ä¸€ä¸ªâ€œä¿å­˜â€å›½å®¶çš„æ¦‚å¿µï¼Œå®ƒå°†ä»<code class="fe ms mt mu mv b">SelectedCountry</code>ç»„ä»¶æ¥æ”¶å¹¶ä¼ é€’ç»™<code class="fe ms mt mu mv b">CountriesList</code>ç»„ä»¶(å¹¶åœ¨å°†æ¥å‘é€åˆ°åç«¯)ã€‚</p><pre class="kx ky kz la gt mw mv mx my aw mz bi"><span id="056a" class="na lc iq mv b gy nb nc l nd ne"><em class="nf">export const Page = ({ countries }: { countries: Country[] }) =&gt; {<br/>  const [selectedCountry, setSelectedCountry] = useState&lt;Country&gt;(countries[0]);<br/>  const [savedCountry, setSavedCountry] = useState&lt;Country&gt;(countries[0]);<br/><br/>  return (<br/>    &lt;&gt;<br/>      &lt;h1&gt;Country settings&lt;/h1&gt;<br/>      &lt;div css={contentCss}&gt;<br/>        &lt;CountriesList<br/>          countries={countries}<br/>          onCountryChanged={(c) =&gt; setSelectedCountry(c)}<br/>          savedCountry={savedCountry}<br/>        /&gt;<br/>        &lt;SelectedCountry<br/>          country={selectedCountry}<br/>          onCountrySaved={() =&gt; setSavedCountry(selectedCountry)}<br/>        /&gt;<br/>      &lt;/div&gt;<br/>    &lt;/&gt;<br/>  );<br/>};</em></span></pre><p id="b311" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">è¿™æ˜¯â€œé¡µé¢â€ç»„ä»¶çš„å®Œæ•´å®ç°ï¼Œå®ƒæ˜¯éšå¤„å¯è§çš„æœ€åŸºæœ¬çš„ååº”ï¼Œåœ¨è¿™ä¸ªå®ç°ä¸­ç»å¯¹æ²¡æœ‰ä»»ä½•çŠ¯ç½ªè¡Œä¸ºã€‚é™¤äº†ä¸€ä»¶äº‹ã€‚å¥½å¥‡ï¼Œèƒ½çœ‹åˆ°å—ï¼Ÿ</p><h1 id="bea3" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">é‡æ„é¡µé¢ç»„ä»¶â€”è€ƒè™‘æ€§èƒ½</h1><p id="2bcc" class="pw-post-body-paragraph jy jz iq ka b kb lz kd ke kf ma kh ki kj mb kl km kn mc kp kq kr md kt ku kv ij bi translated">æˆ‘æƒ³ç°åœ¨å¤§å®¶éƒ½çŸ¥é“ï¼Œå½“çŠ¶æ€æˆ–é“å…·æ”¹å˜æ—¶ï¼Œreactä¼šé‡æ–°æ¸²æŸ“ç»„ä»¶ã€‚åœ¨æˆ‘ä»¬çš„é¡µé¢ç»„ä»¶ä¸­ï¼Œå½“è°ƒç”¨<code class="fe ms mt mu mv b">setSelectedCountry</code>æˆ–<code class="fe ms mt mu mv b">setSavedCountry</code>æ—¶ï¼Œå®ƒä¼šé‡æ–°å‘ˆç°ã€‚å¦‚æœæˆ‘ä»¬çš„é¡µé¢ç»„ä»¶ä¸­çš„å›½å®¶æ•°ç»„(props)å‘ç”Ÿå˜åŒ–ï¼Œå®ƒå°†é‡æ–°å‘ˆç°ã€‚åŒæ ·çš„é“ç†ä¹Ÿé€‚ç”¨äº<code class="fe ms mt mu mv b">CountriesList</code>å’Œ<code class="fe ms mt mu mv b">SelectedCountry</code>ç»„ä»¶â€”â€”å½“å®ƒä»¬çš„ä»»ä½•é“å…·æ”¹å˜æ—¶ï¼Œå®ƒä»¬ä¼šé‡æ–°æ¸²æŸ“ã€‚</p><p id="adda" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æ­¤å¤–ï¼Œä»»ä½•ä½¿ç”¨è¿‡Reactçš„äººéƒ½çŸ¥é“javascript <a class="ae ng" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Equality_comparisons_and_sameness" rel="noopener ugc nofollow" target="_blank">ç›¸ç­‰æ¯”è¾ƒ</a>ï¼ŒReactå¯¹propsè¿›è¡Œä¸¥æ ¼çš„ç›¸ç­‰æ¯”è¾ƒï¼Œå†…è”å‡½æ•°æ¯æ¬¡éƒ½åˆ›é€ æ–°çš„å€¼ã€‚è¿™å¯¼è‡´äº†ä¸€ä¸ªéå¸¸æ™®éçš„(è€Œä¸”ç»å¯¹é”™è¯¯çš„)æƒ³æ³•ï¼Œä¸ºäº†å‡å°‘<code class="fe ms mt mu mv b">CountriesList</code>å’Œ<code class="fe ms mt mu mv b">SelectedCountry</code>ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡åœ¨<code class="fe ms mt mu mv b">useCallback</code>ä¸­åŒ…è£…å†…è”å‡½æ•°æ¥é¿å…åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶é‡æ–°åˆ›å»ºå†…è”å‡½æ•°ã€‚ç”šè‡³<a class="ae ng" href="https://reactjs.org/docs/hooks-reference.html#usecallback" rel="noopener ugc nofollow" target="_blank"> React docs </a>åœ¨åŒä¸€å¥è¯ä¸­æåˆ°<code class="fe ms mt mu mv b">useCallback</code>ä¸â€œé˜²æ­¢ä¸å¿…è¦çš„æ¸²æŸ“â€ï¼çœ‹çœ‹è¿™ä¸ªæ¨¡å¼æ˜¯å¦çœ¼ç†Ÿ:</p><pre class="kx ky kz la gt mw mv mx my aw mz bi"><span id="ab0d" class="na lc iq mv b gy nb nc l nd ne"><em class="nf">export const Page = ({ countries }: { countries: Country[] }) =&gt; {<br/>  // ... same as before<br/><br/>  const onCountryChanged = useCallback((c) =&gt; setSelectedCountry(c), []);<br/>  const onCountrySaved = useCallback(() =&gt; setSavedCountry(selectedCountry), []);<br/><br/>  return (<br/>    &lt;&gt;<br/>      ...<br/>        &lt;CountriesList<br/>          onCountryChanged={onCountryChange}<br/>        /&gt;<br/>        &lt;SelectedCountry<br/>          onCountrySaved={onCountrySaved}<br/>        /&gt;<br/>      ...<br/>    &lt;/&gt;<br/>  );<br/>};</em></span></pre><p id="103a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ä½ çŸ¥é“æœ€æœ‰è¶£çš„æ˜¯ä»€ä¹ˆå—ï¼Ÿå®ƒå®é™…ä¸Š<strong class="ka ir">ä¸èµ·ä½œç”¨</strong>ã€‚å› ä¸ºå®ƒæ²¡æœ‰è€ƒè™‘Reactç»„ä»¶è¢«é‡æ¸²æŸ“çš„ç¬¬ä¸‰ä¸ªåŸå› :<strong class="ka ir">çˆ¶ç»„ä»¶è¢«é‡æ¸²æŸ“çš„æ—¶å€™</strong>ã€‚ä¸ç®¡æ˜¯ä»€ä¹ˆé“å…·ï¼Œ<code class="fe ms mt mu mv b">CountriesList</code>éƒ½ä¼šåœ¨é¡µé¢é‡æ–°æ¸²æŸ“çš„æ—¶å€™é‡æ–°æ¸²æŸ“ï¼Œå³ä½¿å®ƒæ ¹æœ¬æ²¡æœ‰ä»»ä½•é“å…·ã€‚</p><p id="5c1c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æˆ‘ä»¬å¯ä»¥å°†é¡µé¢ç¤ºä¾‹ç®€åŒ–ä¸º:</p><pre class="kx ky kz la gt mw mv mx my aw mz bi"><span id="a2fb" class="na lc iq mv b gy nb nc l nd ne"><em class="nf">const CountriesList = () =&gt; {<br/>  console.log("Re-render!!!!!");<br/>  return &lt;div&gt;countries list, always re-renders&lt;/div&gt;;<br/>};<br/><br/>export const Page = ({ countries }: { countries: Country[] }) =&gt; {<br/>  const [counter, setCounter] = useState&lt;number&gt;(1);<br/><br/>  return (<br/>    &lt;&gt;<br/>      &lt;h1&gt;Country settings&lt;/h1&gt;<br/>      &lt;button onClick={() =&gt; setCounter(counter + 1)}&gt;<br/>        Click here to re-render Countries list (open the console) {counter}<br/>      &lt;/button&gt;<br/>      &lt;CountriesList /&gt;<br/>    &lt;/&gt;<br/>  );<br/>};</em></span></pre><p id="3a74" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">è€Œæˆ‘ä»¬æ¯æ¬¡ç‚¹å‡»æŒ‰é’®ï¼Œéƒ½ä¼šçœ‹åˆ°<code class="fe ms mt mu mv b">CountriesList</code>è¢«é‡æ–°æ¸²æŸ“ï¼Œ<strong class="ka ir">å³ä½¿å®ƒæ ¹æœ¬æ²¡æœ‰ä»»ä½•é“å…·</strong>ã€‚<a class="ae ng" href="https://codesandbox.io/s/re-renders-simplified-bad-1giei?file=/src/country-settings/page.tsx" rel="noopener ugc nofollow" target="_blank"> Codesandboxä»£ç åœ¨è¿™é‡Œ</a>ã€‚</p><p id="d821" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æœ€åï¼Œè¿™è®©æˆ‘ä»¬å·©å›ºäº†æœ¬æ–‡çš„ç¬¬ä¸€æ¡è§„åˆ™:</p><blockquote class="nh ni nj"><p id="62d2" class="jy jz nf ka b kb kc kd ke kf kg kh ki nk kk kl km nl ko kp kq nm ks kt ku kv ij bi translated"><strong class="ka ir">è§„åˆ™1ã€‚å¦‚æœä½ æƒ³å°†propsä¸­çš„å†…è”å‡½æ•°æå–åˆ°useCallbackä¸­çš„å”¯ä¸€åŸå› æ˜¯ä¸ºäº†é¿å…å­ç»„ä»¶çš„é‡æ–°å‘ˆç°:ä¸è¦ã€‚å®ƒä¸èµ·ä½œç”¨ã€‚</strong></p></blockquote><p id="6d37" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ç°åœ¨ï¼Œæœ‰å‡ ç§æ–¹æ³•æ¥å¤„ç†ä¸Šè¿°æƒ…å†µï¼Œæˆ‘å°†åœ¨è¿™ä¸ªç‰¹æ®Šçš„åœºåˆä½¿ç”¨æœ€ç®€å•çš„æ–¹æ³•ã€‚å®ƒæ‰€åšçš„æ˜¯æœ¬è´¨ä¸Šâ€œç¼“å­˜â€ä½ ä¼ é€’ç»™å®ƒçš„ä»»ä½•å‡½æ•°çš„ç»“æœï¼Œå¹¶ä¸”åªåœ¨<code class="fe ms mt mu mv b">useMemo</code>çš„<em class="nf">ä¾èµ–</em>æ”¹å˜æ—¶åˆ·æ–°å®ƒä»¬ã€‚å¦‚æœæˆ‘åªæ˜¯å°†æ¸²æŸ“åçš„<code class="fe ms mt mu mv b">CountriesList</code>æå–åˆ°ä¸€ä¸ªå˜é‡<code class="fe ms mt mu mv b">const list = &lt;ComponentList /&gt;;</code>ä¸­ï¼Œç„¶åå¯¹å…¶åº”ç”¨<code class="fe ms mt mu mv b">useMemo</code>ï¼Œé‚£ä¹ˆåªæœ‰å½“useMemoä¾èµ–å…³ç³»æ”¹å˜æ—¶ï¼Œ<code class="fe ms mt mu mv b">ComponentList</code>ç»„ä»¶æ‰ä¼šè¢«é‡æ–°æ¸²æŸ“<strong class="ka ir">ã€‚</strong></p><pre class="kx ky kz la gt mw mv mx my aw mz bi"><span id="b56a" class="na lc iq mv b gy nb nc l nd ne"><em class="nf">export const Page = ({ countries }: { countries: Country[] }) =&gt; {<br/>  const [counter, setCounter] = useState&lt;number&gt;(1);<br/><br/>  const list = useMemo(() =&gt; {<br/>    return &lt;CountriesList /&gt;;<br/>  }, []);<br/><br/>  return (<br/>    &lt;&gt;<br/>      &lt;h1&gt;Country settings&lt;/h1&gt;<br/>      &lt;button onClick={() =&gt; setCounter(counter + 1)}&gt;<br/>        Click here to re-render Countries list (open the console) {counter}<br/>      &lt;/button&gt;<br/>      {list}<br/>    &lt;/&gt;<br/>  );<br/>};</em></span></pre><p id="871e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">åœ¨æœ¬ä¾‹ä¸­æ˜¯neverï¼Œå› ä¸ºå®ƒæ²¡æœ‰ä»»ä½•ä¾èµ–å…³ç³»ã€‚è¿™ç§æ¨¡å¼åŸºæœ¬ä¸Šå…è®¸æˆ‘æ‰“ç ´è¿™ç§â€œçˆ¶å…ƒç´ é‡æ–°æ¸²æŸ“â€”é‡æ–°æ¸²æŸ“æ‰€æœ‰å­å…ƒç´ â€çš„å¾ªç¯ï¼Œå¹¶æ§åˆ¶å®ƒã€‚æŸ¥çœ‹codesandbox ä¸­çš„<a class="ae ng" href="https://codesandbox.io/s/re-renders-simplified-memo-xcv5f?file=/src/country-settings/page.tsx" rel="noopener ugc nofollow" target="_blank">å®Œæ•´ç¤ºä¾‹ã€‚</a></p><p id="86f0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">éœ€è¦æ³¨æ„çš„æœ€é‡è¦çš„äº‹æƒ…æ˜¯<code class="fe ms mt mu mv b">useMemo</code>çš„ä¾èµ–åˆ—è¡¨ã€‚å¦‚æœå®ƒä¾èµ–äºå¯¼è‡´çˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“çš„å®Œå…¨ç›¸åŒçš„ä¸œè¥¿ï¼Œé‚£ä¹ˆå®ƒå°†åœ¨æ¯æ¬¡é‡æ–°æ¸²æŸ“æ—¶åˆ·æ–°å…¶ç¼“å­˜ï¼Œå¹¶ä¸”åŸºæœ¬ä¸Šå˜å¾—æ— ç”¨ã€‚ä¾‹å¦‚ï¼Œåœ¨è¿™ä¸ªç®€åŒ–çš„ä¾‹å­ä¸­ï¼Œå¦‚æœæˆ‘å°†<code class="fe ms mt mu mv b">counter</code>å€¼ä½œä¸ºä¾èµ–é¡¹ä¼ é€’ç»™<code class="fe ms mt mu mv b">list</code>å˜é‡(æ³¨æ„:ç”šè‡³ä¸æ˜¯memoisedç»„ä»¶çš„å±æ€§ï¼)ï¼Œè¿™å°†å¯¼è‡´<code class="fe ms mt mu mv b">useMemo</code>åœ¨æ¯æ¬¡çŠ¶æ€æ”¹å˜æ—¶åˆ·æ–°è‡ªå·±ï¼Œå¹¶å°†ä½¿<code class="fe ms mt mu mv b">CountriesList</code>å†æ¬¡é‡æ–°æ¸²æŸ“ã€‚</p><pre class="kx ky kz la gt mw mv mx my aw mz bi"><span id="d3a1" class="na lc iq mv b gy nb nc l nd ne"><em class="nf">const list = useMemo(() =&gt; {<br/>  return (<br/>    &lt;&gt;<br/>      {counter}<br/>      &lt;CountriesList /&gt;<br/>    &lt;/&gt;<br/>  );<br/>}, [counter]);</em></span></pre><p id="5726" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae ng" href="https://codesandbox.io/s/re-renders-simplified-memo-with-dep-9h433?file=/src/country-settings/page.tsx:363-491" rel="noopener ugc nofollow" target="_blank">å‚è§codesandboxç¤ºä¾‹ã€‚</a></p><p id="5208" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">å¥½çš„ï¼Œæ‰€æœ‰è¿™äº›éƒ½å¾ˆæ£’ï¼Œä½†æ˜¯å¦‚ä½•æ‰èƒ½å°†å®ƒåº”ç”¨åˆ°æˆ‘ä»¬çš„éç®€åŒ–é¡µé¢ç»„ä»¶ä¸­å‘¢ï¼Ÿå¦‚æœæˆ‘ä»¬å†æ¬¡ä»”ç»†è§‚å¯Ÿå®ƒçš„å®ç°</p><pre class="kx ky kz la gt mw mv mx my aw mz bi"><span id="1cd8" class="na lc iq mv b gy nb nc l nd ne"><em class="nf">export const Page = ({ countries }: { countries: Country[] }) =&gt; {<br/>  const [selectedCountry, setSelectedCountry] = useState&lt;Country&gt;(countries[0]);<br/>  const [savedCountry, setSavedCountry] = useState&lt;Country&gt;(countries[0]);<br/><br/>  return (<br/>    &lt;&gt;<br/>      &lt;h1&gt;Country settings&lt;/h1&gt;<br/>      &lt;div css={contentCss}&gt;<br/>        &lt;CountriesList<br/>          countries={countries}<br/>          onCountryChanged={(c) =&gt; setSelectedCountry(c)}<br/>          savedCountry={savedCountry}<br/>        /&gt;<br/>        &lt;SelectedCountry<br/>          country={selectedCountry}<br/>          onCountrySaved={() =&gt; setSavedCountry(selectedCountry)}<br/>        /&gt;<br/>      &lt;/div&gt;<br/>    &lt;/&gt;<br/>  );<br/>};</em></span></pre><p id="82ae" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æˆ‘ä»¬ä¼šçœ‹åˆ°:</p><ul class=""><li id="fe90" class="me mf iq ka b kb kc kf kg kj mg kn mh kr mi kv mj mk ml mm bi translated"><code class="fe ms mt mu mv b">selectedCountry</code>çŠ¶æ€ä»ä¸ç”¨äº<code class="fe ms mt mu mv b">CountriesList</code>ç»„ä»¶</li><li id="7511" class="me mf iq ka b kb mn kf mo kj mp kn mq kr mr kv mj mk ml mm bi translated"><code class="fe ms mt mu mv b">savedCountry</code>çŠ¶æ€ä»ä¸ç”¨äº<code class="fe ms mt mu mv b">SelectedCountry</code>ç»„ä»¶</li></ul><figure class="kx ky kz la gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nn"><img src="../Images/6f8ea303478b9a21e11b166fdeb6e2c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*tI_0Hid1PabstzLw.png"/></div></div></figure><p id="3941" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ä¹Ÿå°±æ˜¯è¯´å½“<code class="fe ms mt mu mv b">selectedCountry</code>çŠ¶æ€æ”¹å˜æ—¶ï¼Œ<code class="fe ms mt mu mv b">CountriesList</code>ç»„ä»¶æ ¹æœ¬ä¸éœ€è¦é‡æ–°æ¸²æŸ“ï¼è€ŒåŒæ ·çš„æ•…äº‹è¿˜æœ‰ç€<code class="fe ms mt mu mv b">savedCountry</code>çš„çŠ¶æ€å’Œ<code class="fe ms mt mu mv b">SelectedCountry</code>çš„æˆåˆ†ã€‚æˆ‘å¯ä»¥å°†å®ƒä»¬éƒ½æå–åˆ°å˜é‡ä¸­ï¼Œå¹¶å¯¹å®ƒä»¬è¿›è¡Œä¼˜åŒ–ï¼Œä»¥é˜²æ­¢ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“:</p><pre class="kx ky kz la gt mw mv mx my aw mz bi"><span id="a23d" class="na lc iq mv b gy nb nc l nd ne"><em class="nf">export const Page = ({ countries }: { countries: Country[] }) =&gt; {<br/>  const [selectedCountry, setSelectedCountry] = useState&lt;Country&gt;(countries[0]);<br/>  const [savedCountry, setSavedCountry] = useState&lt;Country&gt;(countries[0]);<br/><br/>  const list = useMemo(() =&gt; {<br/>    return (<br/>      &lt;CountriesList<br/>        countries={countries}<br/>        onCountryChanged={(c) =&gt; setSelectedCountry(c)}<br/>        savedCountry={savedCountry}<br/>      /&gt;<br/>    );<br/>  }, [savedCountry, countries]);<br/><br/>  const selected = useMemo(() =&gt; {<br/>    return (<br/>      &lt;SelectedCountry<br/>        country={selectedCountry}<br/>        onCountrySaved={() =&gt; setSavedCountry(selectedCountry)}<br/>      /&gt;<br/>    );<br/>  }, [selectedCountry]);<br/><br/>  return (<br/>    &lt;&gt;<br/>      &lt;h1&gt;Country settings&lt;/h1&gt;<br/>      &lt;div css={contentCss}&gt;<br/>        {list}<br/>        {selected}<br/>      &lt;/div&gt;<br/>    &lt;/&gt;<br/>  );<br/>};</em></span></pre><p id="eaed" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æœ€åï¼Œè®©æˆ‘ä»¬æ­£å¼ç¡®å®šæœ¬æ–‡çš„ç¬¬äºŒæ¡è§„åˆ™:</p><blockquote class="nh ni nj"><p id="5dc1" class="jy jz nf ka b kb kc kd ke kf kg kh ki nk kk kl km nl ko kp kq nm ks kt ku kv ij bi translated"><strong class="ka ir">è§„åˆ™#2 </strong>ã€‚å¦‚æœæ‚¨çš„ç»„ä»¶ç®¡ç†çŠ¶æ€ï¼Œè¯·æ‰¾åˆ°æ¸²æŸ“æ ‘ä¸­ä¸ä¾èµ–äºå·²æ›´æ”¹çŠ¶æ€çš„éƒ¨åˆ†ï¼Œå¹¶å¯¹å®ƒä»¬è¿›è¡Œä¼˜åŒ–ï¼Œä»¥æœ€å°åŒ–å®ƒä»¬çš„é‡æ–°æ¸²æŸ“ã€‚</p></blockquote><h1 id="71cf" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">å®æ–½å›½å®¶æ¸…å•</h1><p id="fd43" class="pw-post-body-paragraph jy jz iq ka b kb lz kd ke kf ma kh ki kj mb kl km kn mc kp kq kr md kt ku kv ij bi translated">ç°åœ¨ï¼Œæˆ‘ä»¬çš„é¡µé¢ç»„ä»¶å·²ç»å‡†å¤‡å°±ç»ªï¼Œæ˜¯æ—¶å€™å……å®å®ƒçš„å­ç»„ä»¶äº†ã€‚é¦–å…ˆï¼Œè®©æˆ‘ä»¬å®ç°å¤æ‚çš„ç»„ä»¶:<code class="fe ms mt mu mv b">CountriesList</code>ã€‚æˆ‘ä»¬å·²ç»çŸ¥é“ï¼Œè¿™ä¸ªç»„ä»¶åº”è¯¥æ¥å—å›½å®¶åˆ—è¡¨ï¼Œå½“åœ¨åˆ—è¡¨ä¸­é€‰æ‹©ä¸€ä¸ªå›½å®¶æ—¶åº”è¯¥è§¦å‘<code class="fe ms mt mu mv b">onCountryChanged</code>å›è°ƒï¼Œå¹¶ä¸”åº”è¯¥æ ¹æ®è®¾è®¡å°†<code class="fe ms mt mu mv b">savedCountry</code>çªå‡ºæ˜¾ç¤ºä¸ºä¸åŒçš„é¢œè‰²ã€‚æ‰€ä»¥è®©æˆ‘ä»¬ä»æœ€ç®€å•çš„æ–¹æ³•å¼€å§‹:</p><pre class="kx ky kz la gt mw mv mx my aw mz bi"><span id="3785" class="na lc iq mv b gy nb nc l nd ne"><em class="nf">type CountriesListProps = {<br/>  countries: Country[];<br/>  onCountryChanged: (country: Country) =&gt; void;<br/>  savedCountry: Country;<br/>};<br/><br/>export const CountriesList = ({<br/>  countries,<br/>  onCountryChanged,<br/>  savedCountry<br/>}: CountriesListProps) =&gt; {<br/>  const Item = ({ country }: { country: Country }) =&gt; {<br/>    // different className based on whether this item is "saved" or not<br/>    const className = savedCountry.id === country.id ? "country-item saved" : "country-item";<br/><br/>    // when the item is clicked - trigger the callback from props with the correct country in the arguments<br/>    const onItemClick = () =&gt; onCountryChanged(country);<br/>    return (<br/>      &lt;button className={className} onClick={onItemClick}&gt;<br/>        &lt;img src={country.flagUrl} /&gt;<br/>        &lt;span&gt;{country.name}&lt;/span&gt;<br/>      &lt;/button&gt;<br/>    );<br/>  };<br/><br/>  return (<br/>    &lt;div&gt;<br/>      {countries.map((country) =&gt; (<br/>        &lt;Item country={country} key={country.id} /&gt;<br/>      ))}<br/>    &lt;/div&gt;<br/>  );<br/>};</em></span></pre><p id="17d5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">å†è¯´ä¸€éï¼Œæœ€ç®€å•çš„ç»„ä»¶ï¼Œå®é™…ä¸Šåªå‘ç”Ÿäº†ä¸¤ä»¶äº‹:</p><ul class=""><li id="9d78" class="me mf iq ka b kb kc kf kg kj mg kn mh kr mi kv mj mk ml mm bi translated">æˆ‘ä»¬æ ¹æ®æ”¶åˆ°çš„é“å…·ç”Ÿæˆ<code class="fe ms mt mu mv b">Item</code>(è¿™å–å†³äº<code class="fe ms mt mu mv b">onCountryChanged</code>å’Œ<code class="fe ms mt mu mv b">savedCountry</code>)</li><li id="6648" class="me mf iq ka b kb mn kf mo kj mp kn mq kr mr kv mj mk ml mm bi translated">æˆ‘ä»¬åœ¨ä¸€ä¸ªå¾ªç¯ä¸­ä¸ºæ‰€æœ‰å›½å®¶æ¸²æŸ“è¿™ä¸ª<code class="fe ms mt mu mv b">Item</code></li></ul><p id="b055" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">å†è¯´ä¸€æ¬¡ï¼Œè¿™ç§<em class="nf">æœ¬èº«å¹¶æ²¡æœ‰ä»€ä¹ˆçŠ¯ç½ªçš„æˆåˆ†ï¼Œæˆ‘å·²ç»çœ‹åˆ°è¿™ç§æ¨¡å¼åœ¨å¾ˆå¤šåœ°æ–¹è¢«ä½¿ç”¨ã€‚</em></p><h1 id="877f" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">é‡æ„å›½å®¶åˆ—è¡¨ç»„ä»¶â€”è€ƒè™‘æ€§èƒ½</h1><p id="ff6d" class="pw-post-body-paragraph jy jz iq ka b kb lz kd ke kf ma kh ki kj mb kl km kn mc kp kq kr md kt ku kv ij bi translated">åˆåˆ°äº†æ›´æ–°Reactå¦‚ä½•æ¸²æŸ“äº‹ç‰©çš„çŸ¥è¯†çš„æ—¶å€™äº†ï¼Œè¿™æ¬¡â€”â€”å¦‚æœä¸€ä¸ªç»„ä»¶ï¼Œæ¯”å¦‚ä¸Šé¢çš„<code class="fe ms mt mu mv b">Item</code>ç»„ä»¶ï¼Œåœ¨å¦ä¸€ä¸ªç»„ä»¶æ¸²æŸ“æœŸé—´è¢«åˆ›å»º<em class="nf">ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿç®€è€Œè¨€ä¹‹ï¼Œæ²¡ä»€ä¹ˆå¥½çš„ï¼ŒçœŸçš„ã€‚ä»Reactçš„è§’åº¦æ¥çœ‹ï¼Œè¿™ä¸ª<code class="fe ms mt mu mv b">Item</code>åªæ˜¯ä¸€ä¸ªåœ¨æ¯æ¬¡æ¸²æŸ“æ—¶éƒ½æ˜¯æ–°çš„å‡½æ•°ï¼Œå®ƒåœ¨æ¯æ¬¡æ¸²æŸ“æ—¶éƒ½è¿”å›ä¸€ä¸ªæ–°çš„ç»“æœã€‚å› æ­¤ï¼Œå®ƒå°†åœ¨<strong class="ka ir">æ¯æ¬¡æ¸²æŸ“</strong>æ—¶ä»å¤´å¼€å§‹é‡æ–°åˆ›å»ºè¯¥å‡½æ•°çš„ç»“æœï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒåªä¼šå°†ä¹‹å‰çš„ç»„ä»¶çŠ¶æ€ä¸å½“å‰çŠ¶æ€è¿›è¡Œæ¯”è¾ƒï¼Œå°±åƒæ­£å¸¸é‡æ–°æ¸²æŸ“æ—¶å‘ç”Ÿçš„ä¸€æ ·ã€‚å®ƒå°†åˆ é™¤ä»¥å‰ç”Ÿæˆçš„ç»„ä»¶ï¼ŒåŒ…æ‹¬å®ƒçš„DOMæ ‘ï¼Œå°†å®ƒä»é¡µé¢ä¸­åˆ é™¤ï¼Œå¹¶ç”Ÿæˆå’Œå®‰è£…ä¸€ä¸ªå…¨æ–°çš„ç»„ä»¶ï¼Œæ¯æ¬¡é‡æ–°å‘ˆç°çˆ¶ç»„ä»¶æ—¶éƒ½æœ‰ä¸€ä¸ªå…¨æ–°çš„DOMæ ‘ã€‚</em></p><p id="fd93" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">å¦‚æœæˆ‘ä»¬ç®€åŒ–å›½å®¶çš„ä¾‹å­æ¥è¯´æ˜è¿™ç§å½±å“ï¼Œç»“æœå°†æ˜¯è¿™æ ·çš„:</p><pre class="kx ky kz la gt mw mv mx my aw mz bi"><span id="823b" class="na lc iq mv b gy nb nc l nd ne"><em class="nf">const CountriesList = ({ countries }: { countries: Country[] }) =&gt; {<br/>  const Item = ({ country }: { country: Country }) =&gt; {<br/>    useEffect(() =&gt; {<br/>      console.log("Mounted!");<br/>    }, []);<br/>    console.log("Render");<br/>    return &lt;div&gt;{country.name}&lt;/div&gt;;<br/>  };<br/><br/>  return (<br/>    &lt;&gt;<br/>      {countries.map((country) =&gt; (<br/>        &lt;Item country={country} /&gt;<br/>      ))}<br/>    &lt;/&gt;<br/>  );<br/>};</em></span></pre><p id="7b0f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">è¿™æ˜¯ä»–ä»¬æ‰€æœ‰ååº”ä¸­æœ€é‡çš„ä¸€æ¬¡è¡ŒåŠ¨ã€‚ä»æ€§èƒ½è§’åº¦æ¥çœ‹ï¼Œ10æ¬¡â€œæ­£å¸¸â€é‡æ–°æ¸²æŸ“ä¸å®Œå…¨é‡æ–°å®‰è£…ä¸€ä¸ªæ–°åˆ›å»ºçš„ç»„ä»¶ç›¸æ¯”æ ¹æœ¬ä¸ç®—ä»€ä¹ˆã€‚åœ¨æ­£å¸¸æƒ…å†µä¸‹ï¼Œä¸€ä¸ªç©ºçš„ä¾èµ–æ•°ç»„åªä¼šè¢«è§¦å‘ä¸€æ¬¡â€”â€”åœ¨ç»„ä»¶å®Œæˆå®‰è£…å’Œç¬¬ä¸€æ¬¡æ¸²æŸ“ä¹‹åã€‚ä¹‹åï¼ŒReactä¸­çš„è½»é‡çº§é‡æ–°æ¸²æŸ“è¿‡ç¨‹å¼€å§‹ï¼Œç»„ä»¶ä¸æ˜¯ä»å¤´å¼€å§‹åˆ›å»ºçš„ï¼Œè€Œæ˜¯åªåœ¨éœ€è¦æ—¶æ›´æ–°(è¿™å°±æ˜¯Reactå¦‚æ­¤å¿«é€Ÿçš„åŸå› )ã€‚ä½†åœ¨è¿™ç§æƒ…å†µä¸‹ä¸ä¼šâ€”â€”çœ‹çœ‹<a class="ae ng" href="https://codesandbox.io/s/creating-components-in-render-bad-8otem?file=/src/country-settings/page.tsx" rel="noopener ugc nofollow" target="_blank">è¿™ä¸ªä»£ç æ²™ç®±</a>,åœ¨æ‰“å¼€çš„æ§åˆ¶å°ä¸Šç‚¹å‡»â€œé‡æ–°æ¸²æŸ“â€æŒ‰é’®ï¼Œäº«å—æ¯æ¬¡ç‚¹å‡»éƒ½ä¼šå‘ç”Ÿçš„250æ¬¡æ¸²æŸ“å’Œå®‰è£…ã€‚</p><p id="a611" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">è§£å†³è¿™ä¸ªé—®é¢˜çš„æ–¹æ³•æ˜¾è€Œæ˜“è§:æˆ‘ä»¬åªéœ€è¦å°†<code class="fe ms mt mu mv b">Item</code>ç»„ä»¶ç§»å‡ºæ¸²æŸ“å‡½æ•°ã€‚</p><pre class="kx ky kz la gt mw mv mx my aw mz bi"><span id="4e5b" class="na lc iq mv b gy nb nc l nd ne"><em class="nf">const Item = ({ country }: { country: Country }) =&gt; {<br/>  useEffect(() =&gt; {<br/>    console.log("Mounted!");<br/>  }, []);<br/>  console.log("Render");<br/>  return &lt;div&gt;{country.name}&lt;/div&gt;;<br/>};<br/><br/>const CountriesList = ({ countries }: { countries: Country[] }) =&gt; {<br/>  return (<br/>    &lt;&gt;<br/>      {countries.map((country) =&gt; (<br/>        &lt;Item country={country} /&gt;<br/>      ))}<br/>    &lt;/&gt;<br/>  );<br/>};</em></span></pre><p id="3c23" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ç°åœ¨ï¼Œåœ¨æˆ‘ä»¬çš„<a class="ae ng" href="https://codesandbox.io/s/creating-components-in-render-fixed-cs7pe?file=/src/country-settings/page.tsx" rel="noopener ugc nofollow" target="_blank">ç®€åŒ–çš„codesandbox </a>ä¸­ï¼Œä¸ä¼šåœ¨æ¯æ¬¡é‡æ–°æ¸²æŸ“çˆ¶ç»„ä»¶æ—¶è¿›è¡ŒæŒ‚è½½ã€‚</p><p id="5444" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">å¦å¤–ï¼Œåƒè¿™æ ·çš„é‡æ„æœ‰åŠ©äºä¿æŒä¸åŒç»„ä»¶ä¹‹é—´çš„å¥åº·ç•Œé™ï¼Œå¹¶ä¿æŒä»£ç æ›´å¹²å‡€ã€æ›´ç®€æ´ã€‚å½“æˆ‘ä»¬å°†è¿™ç§æ”¹è¿›åº”ç”¨åˆ°æˆ‘ä»¬çš„â€œçœŸæ­£çš„â€åº”ç”¨ç¨‹åºæ—¶ï¼Œè¿™å°†å˜å¾—å°¤å…¶æ˜æ˜¾ã€‚ä¹‹å‰:</p><pre class="kx ky kz la gt mw mv mx my aw mz bi"><span id="b6fd" class="na lc iq mv b gy nb nc l nd ne"><em class="nf">export const CountriesList = ({<br/>  countries,<br/>  onCountryChanged,<br/>  savedCountry<br/>}: CountriesListProps) =&gt; {<br/><br/>  // only "country" in props<br/>  const Item = ({ country }: { country: Country }) =&gt; {<br/>    // ... same code<br/>  };<br/><br/>  return (<br/>    &lt;div&gt;<br/>      {countries.map((country) =&gt; (<br/>        &lt;Item country={country} key={country.id} /&gt;<br/>      ))}<br/>    &lt;/div&gt;<br/>  );<br/>};</em></span></pre><p id="d745" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ä¹‹å:</p><pre class="kx ky kz la gt mw mv mx my aw mz bi"><span id="4148" class="na lc iq mv b gy nb nc l nd ne"><em class="nf">type ItemProps = {<br/>  country: Country;<br/>  savedCountry: Country;<br/>  onItemClick: () =&gt; void;<br/>};<br/><br/>// turned out savedCountry and onItemClick were also used<br/>// but it was not obvious at all in the previous implementation<br/>const Item = ({ country, savedCountry, onItemClick }: ItemProps) =&gt; {<br/>  // ... same code<br/>};<br/><br/>export const CountriesList = ({<br/>  countries,<br/>  onCountryChanged,<br/>  savedCountry<br/>}: CountriesListProps) =&gt; {<br/>  return (<br/>    &lt;div&gt;<br/>      {countries.map((country) =&gt; (<br/>        &lt;Item<br/>          country={country}<br/>          key={country.id}<br/>          savedCountry={savedCountry}<br/>          onItemClick={() =&gt; onCountryChanged(country)}<br/>        /&gt;<br/>      ))}<br/>    &lt;/div&gt;<br/>  );<br/>};</em></span></pre><p id="21d4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ç°åœ¨ï¼Œæˆ‘ä»¬æ‘†è„±äº†æ¯æ¬¡é‡æ–°å‘ˆç°çˆ¶ç»„ä»¶æ—¶é‡æ–°è£…è½½<code class="fe ms mt mu mv b">Item</code>ç»„ä»¶çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥æå–æ–‡ç« çš„ç¬¬ä¸‰æ¡è§„åˆ™:</p><blockquote class="nh ni nj"><p id="c75e" class="jy jz nf ka b kb kc kd ke kf kg kh ki nk kk kl km nl ko kp kq nm ks kt ku kv ij bi translated"><strong class="ka ir">è§„åˆ™ä¸‰</strong>ã€‚ä¸è¦åœ¨å¦ä¸€ä¸ªç»„ä»¶çš„æ¸²æŸ“å‡½æ•°ä¸­åˆ›å»ºæ–°çš„ç»„ä»¶ã€‚</p></blockquote><h1 id="61e4" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">å®æ–½é€‰å®šçš„å›½å®¶</h1><p id="b953" class="pw-post-body-paragraph jy jz iq ka b kb lz kd ke kf ma kh ki kj mb kl km kn mc kp kq kr md kt ku kv ij bi translated">ä¸‹ä¸€æ­¥:ç»„ä»¶â€œé€‰å®šçš„å›½å®¶â€,è¿™å°†æ˜¯æ–‡ç« ä¸­æœ€çŸ­ä¹Ÿæ˜¯æœ€æ— èŠçš„éƒ¨åˆ†ï¼Œå› ä¸ºè¿™é‡Œæ²¡æœ‰ä»€ä¹ˆå¯å±•ç¤ºçš„:å®ƒåªæ˜¯ä¸€ä¸ªæ¥å—å±æ€§å’Œå›è°ƒå¹¶å‘ˆç°å‡ ä¸ªå­—ç¬¦ä¸²çš„ç»„ä»¶:</p><pre class="kx ky kz la gt mw mv mx my aw mz bi"><span id="6fb4" class="na lc iq mv b gy nb nc l nd ne"><em class="nf">const SelectedCountry = ({ country, onSaveCountry }: { country: Country; onSaveCountry: () =&gt; void }) =&gt; {<br/>  return (<br/>    &lt;&gt;<br/>      &lt;ul&gt;<br/>        &lt;li&gt;Country: {country.name}&lt;/li&gt;<br/>        ... // whatever country's information we're going to render<br/>      &lt;/ul&gt;<br/>      &lt;button onClick={onSaveCountry} type="button"&gt;Save&lt;/button&gt;<br/>    &lt;/&gt;<br/>  );<br/>};</em></span></pre><p id="c336" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ğŸ¤·ğŸ½â€â™€ï¸å°±æ˜¯è¿™æ ·ï¼è¿™åªæ˜¯ä¸ºäº†è®©æ¼”ç¤ºä»£ç æ›´åŠ æœ‰è¶£ğŸ™‚</p><h1 id="0862" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">æœ€åæ¶¦è‰²:ä¸»é¢˜åŒ–</h1><p id="c4b2" class="pw-post-body-paragraph jy jz iq ka b kb lz kd ke kf ma kh ki kj mb kl km kn mc kp kq kr md kt ku kv ij bi translated">ç°åœ¨æ˜¯æœ€åä¸€æ­¥:é»‘æš—æ¨¡å¼ï¼è°ä¸å–œæ¬¢è¿™äº›å‘¢ï¼Ÿè€ƒè™‘åˆ°å½“å‰ä¸»é¢˜åº”è¯¥åœ¨å¤§å¤šæ•°ç»„ä»¶ä¸­å¯ç”¨ï¼Œåœ¨ä»»ä½•åœ°æ–¹é€šè¿‡é“å…·ä¼ é€’å®ƒå°†æ˜¯ä¸€åœºå™©æ¢¦ï¼Œå› æ­¤React Contextæ˜¯è¿™é‡Œçš„è‡ªç„¶è§£å†³æ–¹æ¡ˆã€‚</p><p id="67f3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">é¦–å…ˆåˆ›å»ºä¸»é¢˜ä¸Šä¸‹æ–‡:</p><pre class="kx ky kz la gt mw mv mx my aw mz bi"><span id="bfa3" class="na lc iq mv b gy nb nc l nd ne"><em class="nf">type Mode = 'light' | 'dark';<br/>type Theme = { mode: Mode };<br/>const ThemeContext = React.createContext&lt;Theme&gt;({ mode: 'light' });<br/><br/>const useTheme = () =&gt; {<br/>  return useContext(ThemeContext);<br/>};</em></span></pre><p id="0beb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æ·»åŠ ä¸Šä¸‹æ–‡æä¾›ç¨‹åºå’ŒæŒ‰é’®ä»¥å°†å…¶åˆ‡æ¢åˆ°é¡µé¢ç»„ä»¶:</p><pre class="kx ky kz la gt mw mv mx my aw mz bi"><span id="5afc" class="na lc iq mv b gy nb nc l nd ne"><em class="nf">export const Page = ({ countries }: { countries: Country[] }) =&gt; {<br/>  // same as before<br/>  const [mode, setMode] = useState&lt;Mode&gt;("light");<br/><br/>  return (<br/>    &lt;ThemeContext.Provider value={{ mode }}&gt;<br/>      &lt;button onClick={() =&gt; setMode(mode === 'light' ? 'dark' : 'light')}&gt;Toggle theme&lt;/button&gt;<br/>      // the rest is the same as before<br/>    &lt;/ThemeContext.Provider&gt;<br/>  )<br/>}</em></span></pre><p id="384f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ç„¶åä½¿ç”¨ä¸Šä¸‹æ–‡æŒ‚é’©å°†æˆ‘ä»¬çš„æŒ‰é’®æ¶‚æˆé€‚å½“çš„ä¸»é¢˜:</p><pre class="kx ky kz la gt mw mv mx my aw mz bi"><span id="eac9" class="na lc iq mv b gy nb nc l nd ne"><em class="nf">const Item = ({ country }: { country: Country }) =&gt; {<br/>    const { mode } = useTheme();<br/>    const className = `country-item ${mode === "dark" ? "dark" : ""}`;<br/>    // the rest is the same<br/>}</em></span></pre><p id="0346" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">åŒæ ·ï¼Œåœ¨è¿™ä¸ªå®ç°ä¸­æ²¡æœ‰çŠ¯ç½ªï¼Œä¸€ä¸ªéå¸¸å¸¸è§çš„æ¨¡å¼ï¼Œç‰¹åˆ«æ˜¯ä¸»é¢˜åŒ–ã€‚</p><h1 id="1599" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">é‡æ„ä¸»é¢˜â€”â€”è€ƒè™‘æ€§èƒ½ã€‚</h1><p id="d0cd" class="pw-post-body-paragraph jy jz iq ka b kb lz kd ke kf ma kh ki kj mb kl km kn mc kp kq kr md kt ku kv ij bi translated">åœ¨æˆ‘ä»¬èƒ½å¤Ÿå‘ç°ä¸Šé¢çš„å®ç°æœ‰ä»€ä¹ˆé—®é¢˜ä¹‹å‰ï¼Œæ˜¯æ—¶å€™çœ‹çœ‹Reactç»„ä»¶å¯ä»¥è¢«é‡æ–°å‘ˆç°çš„ç¬¬å››ä¸ªåŸå› äº†ï¼Œè¿™ä¸€ç‚¹ç»å¸¸è¢«é—å¿˜:<strong class="ka ir">å¦‚æœä¸€ä¸ªç»„ä»¶ä½¿ç”¨ä¸Šä¸‹æ–‡æ¶ˆè´¹è€…ï¼Œé‚£ä¹ˆæ¯å½“ä¸Šä¸‹æ–‡æä¾›è€…çš„å€¼æ”¹å˜æ—¶ï¼Œå®ƒéƒ½ä¼šè¢«é‡æ–°å‘ˆç°ã€‚</strong></p><p id="c1fe" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">è¿˜è®°å¾—æˆ‘ä»¬ç®€åŒ–çš„ä¾‹å­å—ï¼Ÿåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¯¹æ¸²æŸ“ç»“æœè¿›è¡Œäº†è®°å¿†ï¼Œä»¥é¿å…å®ƒä»¬è¢«é‡æ–°æ¸²æŸ“ã€‚</p><pre class="kx ky kz la gt mw mv mx my aw mz bi"><span id="d7f0" class="na lc iq mv b gy nb nc l nd ne"><em class="nf">const Item = ({ country }: { country: Country }) =&gt; {<br/>  console.log("render");<br/>  return &lt;div&gt;{country.name}&lt;/div&gt;;<br/>};<br/><br/>const CountriesList = ({ countries }: { countries: Country[] }) =&gt; {<br/>  return (<br/>    &lt;&gt;<br/>      {countries.map((country) =&gt; (<br/>        &lt;Item country={country} /&gt;<br/>      ))}<br/>    &lt;/&gt;<br/>  );<br/>};<br/><br/>export const Page = ({ countries }: { countries: Country[] }) =&gt; {<br/>  const [counter, setCounter] = useState&lt;number&gt;(1);<br/><br/>  const list = useMemo(() =&gt; &lt;CountriesList countries={countries} /&gt;, [<br/>    countries<br/>  ]);<br/><br/>  return (<br/>    &lt;&gt;<br/>      &lt;h1&gt;Country settings&lt;/h1&gt;<br/>      &lt;button onClick={() =&gt; setCounter(counter + 1)}&gt;<br/>        Click here to re-render Countries list (open the console) {counter}<br/>      &lt;/button&gt;<br/>      {list}<br/>    &lt;/&gt;<br/>  );<br/>};</em></span></pre><p id="0730" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ç»„ä»¶ä¼šåœ¨æˆ‘ä»¬æ¯æ¬¡ç‚¹å‡»æŒ‰é’®æ—¶é‡æ–°æ¸²æŸ“ï¼Œå› ä¸ºå®ƒä¼šåœ¨æ¯æ¬¡ç‚¹å‡»æ—¶æ›´æ–°çŠ¶æ€ã€‚ä½†æ˜¯<code class="fe ms mt mu mv b">CountriesList</code>æ˜¯å†…å­˜åŒ–çš„ï¼Œå¹¶ä¸”ç‹¬ç«‹äºé‚£ä¸ªçŠ¶æ€ï¼Œæ‰€ä»¥å®ƒä¸ä¼šè¢«é‡æ–°æ¸²æŸ“ï¼Œå› æ­¤<code class="fe ms mt mu mv b">Item</code>ç»„ä»¶ä¹Ÿä¸ä¼šè¢«é‡æ–°æ¸²æŸ“ã€‚å‚è§<a class="ae ng" href="https://codesandbox.io/s/context-before-good-duhgf?file=/src/country-settings/page.tsx" rel="noopener ugc nofollow" target="_blank"> codesandboxè¿™é‡Œ</a>ã€‚</p><p id="4ebb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ç°åœ¨ï¼Œå¦‚æœæˆ‘åœ¨è¿™é‡Œæ·»åŠ ä¸»é¢˜ä¸Šä¸‹æ–‡ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ<code class="fe ms mt mu mv b">Page</code>ç»„ä»¶ä¸­çš„æä¾›è€…:</p><pre class="kx ky kz la gt mw mv mx my aw mz bi"><span id="1607" class="na lc iq mv b gy nb nc l nd ne"><em class="nf">export const Page = ({ countries }: { countries: Country[] }) =&gt; {<br/>  // everything else stays the same<br/><br/>  // memoised list is still memoised<br/>  const list = useMemo(() =&gt; &lt;CountriesList countries={countries} /&gt;, [<br/>    countries<br/>  ]);<br/><br/>  return (<br/>    &lt;ThemeContext.Provider value={{ mode }}&gt;<br/>      // same<br/>    &lt;/ThemeContext.Provider&gt;<br/>  );<br/>};</em></span></pre><p id="851d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">å’Œé¡¹ç›®ç»„ä»¶ä¸­çš„ä¸Šä¸‹æ–‡:</p><pre class="kx ky kz la gt mw mv mx my aw mz bi"><span id="593d" class="na lc iq mv b gy nb nc l nd ne"><em class="nf">const Item = ({ country }: { country: Country }) =&gt; {<br/>  const theme = useTheme();<br/>  console.log("render");<br/>  return &lt;div&gt;{country.name}&lt;/div&gt;;<br/>};</em></span></pre><p id="e007" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">å¦‚æœå®ƒä»¬åªæ˜¯æ™®é€šçš„ç»„ä»¶å’Œé’©å­ï¼Œä»€ä¹ˆéƒ½ä¸ä¼šå‘ç”Ÿâ€”â€”<code class="fe ms mt mu mv b">Item</code>ä¸æ˜¯<code class="fe ms mt mu mv b">Page</code>ç»„ä»¶çš„å­ç»„ä»¶ï¼Œ<code class="fe ms mt mu mv b">CountriesList</code>ä¸ä¼šå› ä¸ºå†…å­˜åŒ–è€Œé‡æ–°æ¸²æŸ“ï¼Œæ‰€ä»¥<code class="fe ms mt mu mv b">Item</code>ä¹Ÿä¸ä¼šã€‚ä¸åŒçš„æ˜¯ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®ƒæ˜¯ä¸€ä¸ªæä¾›è€…-æ¶ˆè´¹è€…çš„ç»„åˆï¼Œæ‰€ä»¥æ¯æ¬¡æä¾›è€…çš„å€¼æ”¹å˜æ—¶ï¼Œ<strong class="ka ir">æ‰€æœ‰çš„</strong>æ¶ˆè´¹è€…éƒ½ä¼šé‡æ–°å‘ˆç°ã€‚ç”±äºæˆ‘ä»¬ä¸€ç›´åœ¨ä¼ é€’æ–°çš„å¯¹è±¡ç»™å€¼ï¼Œ<code class="fe ms mt mu mv b"><em class="nf">Items</em></code> <em class="nf">å°†ä¼šä¸å¿…è¦çš„åœ¨æ¯ä¸ªè®¡æ•°å™¨</em>ä¸Šé‡æ–°å‘ˆç°ã€‚ä¸Šä¸‹æ–‡åŸºæœ¬ä¸Šç»•è¿‡äº†æˆ‘ä»¬æ‰€åšçš„è®°å¿†ï¼Œä½¿å®ƒå˜å¾—å‡ ä¹æ¯«æ— ç”¨å¤„ã€‚<a class="ae ng" href="https://codesandbox.io/s/context-bad-4zou7?file=/src/country-settings/page.tsx" rel="noopener ugc nofollow" target="_blank">å‚è§codesandboxã€‚</a></p><p id="8adb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æ­£å¦‚æ‚¨å¯èƒ½å·²ç»çŒœåˆ°çš„é‚£æ ·ï¼Œå¯¹å®ƒçš„ä¿®å¤åªæ˜¯ä¸ºäº†ç¡®ä¿æä¾›ç¨‹åºä¸­çš„<code class="fe ms mt mu mv b">value</code>ä¸ä¼šåšä¸å¿…è¦çš„æ›´æ”¹ã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åªéœ€è¦è®°ä½å®ƒ:</p><pre class="kx ky kz la gt mw mv mx my aw mz bi"><span id="1266" class="na lc iq mv b gy nb nc l nd ne"><em class="nf">export const Page = ({ countries }: { countries: Country[] }) =&gt; {<br/>  // everything else stays the same<br/><br/>  // memoising the object!<br/>  const theme = useMemo(() =&gt; ({ mode }), [mode]);<br/><br/>  return (<br/>    &lt;ThemeContext.Provider value={theme}&gt;<br/>      // same<br/>    &lt;/ThemeContext.Provider&gt;<br/>  );<br/>};</em></span></pre><p id="0953" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ç°åœ¨è®¡æ•°å™¨å°†å·¥ä½œï¼Œè€Œä¸ä¼šå¯¼è‡´æ‰€æœ‰çš„é¡¹ç›®é‡æ–°æ¸²æŸ“ï¼</p><p id="8b14" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æˆ‘ä»¬å¯ä»¥å°†å®Œå…¨ç›¸åŒçš„è§£å†³æ–¹æ¡ˆåº”ç”¨åˆ°éç®€åŒ–çš„<code class="fe ms mt mu mv b">Page</code>ç»„ä»¶ä¸Šï¼Œä»¥é˜²æ­¢ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“:</p><pre class="kx ky kz la gt mw mv mx my aw mz bi"><span id="df89" class="na lc iq mv b gy nb nc l nd ne"><em class="nf">export const Page = ({ countries }: { countries: Country[] }) =&gt; {<br/>  // same as before<br/>  const [mode, setMode] = useState&lt;Mode&gt;("light");<br/><br/>  // memoising the object!<br/>  const theme = useMemo(() =&gt; ({ mode }), [mode]);<br/><br/>  return (<br/>    &lt;ThemeContext.Provider value={theme}&gt;<br/>      &lt;button onClick={() =&gt; setMode(mode === 'light' ? 'dark' : 'light')}&gt;Toggle theme&lt;/button&gt;<br/>      // the rest is the same as before<br/>    &lt;/ThemeContext.Provider&gt;<br/>  )<br/>}</em></span></pre><p id="cdac" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">å¹¶å°†æ–°çŸ¥è¯†æç‚¼åˆ°æœ¬æ–‡çš„æœ€åä¸€æ¡è§„åˆ™ä¸­:</p><blockquote class="nh ni nj"><p id="a3cc" class="jy jz nf ka b kb kc kd ke kf kg kh ki nk kk kl km nl ko kp kq nm ks kt ku kv ij bi translated"><strong class="ka ir">è§„åˆ™#4 </strong>:å½“ä½¿ç”¨ä¸Šä¸‹æ–‡æ—¶ï¼Œå¦‚æœvalueå±æ€§ä¸æ˜¯æ•°å­—ã€å­—ç¬¦ä¸²æˆ–å¸ƒå°”å€¼ï¼Œè¦ç¡®ä¿å®ƒæ€»æ˜¯è¢«è®°å¿†ã€‚</p></blockquote><h1 id="70d8" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">å°†è¿™ä¸€åˆ‡ç»“åˆåœ¨ä¸€èµ·</h1><p id="f99f" class="pw-post-body-paragraph jy jz iq ka b kb lz kd ke kf ma kh ki kj mb kl km kn mc kp kq kr md kt ku kv ij bi translated">æœ€åï¼Œæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºå®Œæˆäº†ï¼æ•´ä¸ªå®ç°åœ¨è¿™ä¸ªä»£ç æ²™ç®±ä¸­<a class="ae ng" href="https://codesandbox.io/s/re-renders-final-good-luz8s?file=/src/country-settings/page.tsx" rel="noopener ugc nofollow" target="_blank">å¯ç”¨ã€‚å¦‚æœä½ ç”¨çš„æ˜¯æœ€æ–°çš„MacBookï¼Œé‚£å°±é™ä½ä½ çš„CPUï¼Œåƒæ™®é€šç”¨æˆ·ä¸€æ ·ä½“éªŒä¸–ç•Œï¼Œå¹¶å°è¯•åœ¨åˆ—è¡¨ä¸­çš„ä¸åŒå›½å®¶ä¹‹é—´è¿›è¡Œé€‰æ‹©ã€‚å³ä½¿å‡å°‘äº†6å€çš„CPUï¼Œå®ƒä»ç„¶éå¸¸å¿«ï¼ğŸ‰</a></p><p id="034d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ç°åœ¨ï¼Œæˆ‘æƒ³å¾ˆå¤šäººéƒ½æƒ³é—®ä¸€ä¸ªå¤§é—®é¢˜:â€œä½†æ˜¯Nadiaï¼Œæ— è®ºå¦‚ä½•ï¼ŒReactæœ¬èº«æ˜¯éå¸¸å¿«çš„ã€‚ä½ æ‰€åšçš„é‚£äº›â€œä¼˜åŒ–â€è‚¯å®šä¸ä¼šå¯¹ä¸€ä¸ªåªæœ‰250ä¸ªæ¡ç›®çš„ç®€å•åˆ—è¡¨äº§ç”Ÿå¤ªå¤§çš„å½±å“å§ï¼Ÿä½ ä¸æ˜¯å¤¸å¤§äº†è¿™é‡Œçš„é‡è¦æ€§å—ï¼Ÿâ€ã€‚</p><p id="dece" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æ˜¯å•Šï¼Œåˆšå¼€å§‹å†™è¿™ç¯‡æ–‡ç« çš„æ—¶å€™ï¼Œæˆ‘ä¹Ÿæ˜¯è¿™ä¹ˆæƒ³çš„ã€‚ä½†åæ¥æˆ‘ç”¨â€œéæ€§èƒ½â€çš„æ–¹å¼å®ç°äº†é‚£ä¸ªåº”ç”¨ã€‚<a class="ae ng" href="https://codesandbox.io/s/re-renders-final-bad-4znwe?file=/src/country-settings/page.tsx" rel="noopener ugc nofollow" target="_blank">åœ¨codesandbox </a>ä¸­æŸ¥çœ‹ã€‚æˆ‘ç”šè‡³ä¸éœ€è¦é™ä½CPUæ¥æŸ¥çœ‹é€‰æ‹©é¡¹ç›®ä¹‹é—´çš„å»¶è¿ŸğŸ˜±ã€‚ç¼©å°6å€ï¼Œå®ƒå¯èƒ½æ˜¯è¿™ä¸ªæ˜Ÿçƒä¸Šæœ€æ…¢çš„ç®€å•åˆ—è¡¨ï¼Œç”šè‡³æ— æ³•æ­£å¸¸å·¥ä½œ(å®ƒæœ‰ä¸€ä¸ªâ€œperformantâ€åº”ç”¨ç¨‹åºæ²¡æœ‰çš„ç„¦ç‚¹bug)ã€‚æˆ‘ç”šè‡³æ²¡æœ‰åšä»»ä½•ä»¤äººå‘æŒ‡å’Œæ˜æ˜¾çš„é‚ªæ¶ï¼ğŸ˜…</p><p id="8765" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æ‰€ä»¥è®©æˆ‘ä»¬åœ¨Reactç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶åˆ·æ–°<strong class="ka ir">:</strong></p><ul class=""><li id="1e98" class="me mf iq ka b kb kc kf kg kj mg kn mh kr mi kv mj mk ml mm bi translated">å½“é“å…·æˆ–çŠ¶æ€æ”¹å˜æ—¶</li><li id="0683" class="me mf iq ka b kb mn kf mo kj mp kn mq kr mr kv mj mk ml mm bi translated">å½“çˆ¶ç»„ä»¶é‡æ–°å‘ˆç°æ—¶</li><li id="2845" class="me mf iq ka b kb mn kf mo kj mp kn mq kr mr kv mj mk ml mm bi translated">å½“ç»„ä»¶ä½¿ç”¨ä¸Šä¸‹æ–‡å¹¶ä¸”å…¶æä¾›è€…çš„å€¼æ”¹å˜æ—¶</li></ul><p id="dfd4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æˆ‘ä»¬æå–çš„è§„åˆ™æ˜¯:</p><p id="128d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">å¦‚æœä½ æƒ³å°†propsä¸­çš„å†…è”å‡½æ•°æå–åˆ°<code class="fe ms mt mu mv b">useCallback</code>ä¸­çš„å”¯ä¸€åŸå› æ˜¯ä¸ºäº†é¿å…å­ç»„ä»¶çš„é‡æ–°æ¸²æŸ“:ä¸è¦ã€‚å®ƒä¸èµ·ä½œç”¨ã€‚</p><p id="56ae" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">è§„åˆ™#2 </strong>:å¦‚æœä½ çš„ç»„ä»¶ç®¡ç†çŠ¶æ€ï¼Œæ‰¾åˆ°æ¸²æŸ“æ ‘ä¸­ä¸ä¾èµ–äºæ”¹å˜åçš„çŠ¶æ€çš„éƒ¨åˆ†ï¼Œå¹¶å¯¹å®ƒä»¬è¿›è¡Œä¼˜åŒ–ä»¥æœ€å°åŒ–å®ƒä»¬çš„é‡æ–°æ¸²æŸ“ã€‚</p><p id="bb72" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">è§„åˆ™#3 </strong>ã€‚<em class="nf">æ°¸è¿œä¸è¦åœ¨å¦ä¸€ä¸ªç»„ä»¶çš„æ¸²æŸ“å‡½æ•°å†…åˆ›å»ºæ–°çš„ç»„ä»¶ã€‚</em></p><p id="7e93" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">è§„åˆ™#4 </strong>ã€‚å½“ä½¿ç”¨ä¸Šä¸‹æ–‡æ—¶ï¼Œç¡®ä¿<code class="fe ms mt mu mv b">value</code>å±æ€§æ˜¯<em class="nf">æ€»æ˜¯</em> memoisedï¼Œå¦‚æœå®ƒä¸æ˜¯æ•°å­—ã€å­—ç¬¦ä¸²æˆ–å¸ƒå°”å€¼ã€‚</p><p id="508f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">å°±æ˜¯è¿™æ ·ï¼æˆ‘å¸Œæœ›è¿™äº›è§„åˆ™å°†æœ‰åŠ©äºä»ä¸€å¼€å§‹å°±ç¼–å†™æ›´é«˜æ€§èƒ½çš„åº”ç”¨ç¨‹åºï¼Œå¹¶è®©é‚£äº›å†ä¹Ÿä¸ç”¨ä½“éªŒç¼“æ…¢äº§å“çš„ç”¨æˆ·æ›´åŠ æ»¡æ„ã€‚</p><h1 id="de65" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">é¢å¤–æ”¶è·:T2éš¾é¢˜</h1><p id="2979" class="pw-post-body-paragraph jy jz iq ka b kb lz kd ke kf ma kh ki kj mb kl km kn mc kp kq kr md kt ku kv ij bi translated">æˆ‘è§‰å¾—åœ¨ç»“æŸè¿™ç¯‡æ–‡ç« ä¹‹å‰ï¼Œæˆ‘éœ€è¦è§£å†³ä¸€ä¸ªè°œ:ä¸ºä»€ä¹ˆ<code class="fe ms mt mu mv b">useCallback</code>å¯¹å‡å°‘é‡æ–°å‘ˆç°æ¯«æ— ç”¨å¤„ï¼Œä¸ºä»€ä¹ˆReactæ–‡æ¡£å­—é¢ä¸Šè¯´â€œ[useCallback]åœ¨ä¼ é€’å›è°ƒåˆ°ä¾èµ–å¼•ç”¨ç›¸ç­‰æ¥é˜²æ­¢ä¸å¿…è¦å‘ˆç°çš„ä¼˜åŒ–å­ç»„ä»¶æ—¶æ˜¯æœ‰ç”¨çš„â€ï¼ŸğŸ¤¯</p><p id="58bf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ç­”æ¡ˆå°±åœ¨è¿™å¥è¯é‡Œ:<em class="nf">â€œä¾èµ–å¼•ç”¨ç›¸ç­‰çš„ä¼˜åŒ–å­ç»„ä»¶â€</em>ã€‚</p><p id="a041" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">è¿™é‡Œæœ‰ä¸¤ç§æƒ…å†µã€‚</p><p id="2021" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">ç¬¬ä¸€ä¸ª</strong>:æ¥æ”¶å›è°ƒçš„ç»„ä»¶è¢«åŒ…è£…åœ¨<code class="fe ms mt mu mv b">React.memo</code>ä¸­ï¼Œå¹¶æŠŠå›è°ƒä½œä¸ºä¾èµ–é¡¹ã€‚åŸºæœ¬ä¸Šæ˜¯è¿™æ ·:</p><pre class="kx ky kz la gt mw mv mx my aw mz bi"><span id="bcff" class="na lc iq mv b gy nb nc l nd ne"><em class="nf">const MemoisedItem = React.memo(Item);<br/><br/>const List = () =&gt; {<br/>  // this HAS TO be memoised, otherwise `React.memo` for the Item is useless<br/>  const onClick = () =&gt; {console.log('click!')};<br/><br/>  return &lt;MemoisedItem onClick={onClick} country="Austria" /&gt;<br/>}</em></span></pre><p id="fdc8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æˆ–è€…è¿™ä¸ª:</p><pre class="kx ky kz la gt mw mv mx my aw mz bi"><span id="68ef" class="na lc iq mv b gy nb nc l nd ne"><em class="nf">const MemoisedItem = React.memo(Item, (prev, next) =&gt; prev.onClick !== next.onClick);<br/><br/>const List = () =&gt; {<br/>  // this HAS TO be memoised, otherwise `React.memo` for the Item is useless<br/>  const onClick = () =&gt; {console.log('click!')};<br/><br/>  return &lt;MemoisedItem onClick={onClick} country="Austria" /&gt;<br/>}</em></span></pre><p id="c8f3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">ç¬¬äºŒä¸ª</strong>:å¦‚æœæ”¶åˆ°å›è°ƒçš„ç»„ä»¶åœ¨<code class="fe ms mt mu mv b">useMemo</code>ã€<code class="fe ms mt mu mv b">useCallback</code>æˆ–<code class="fe ms mt mu mv b">useEffect</code>ç­‰é’©å­ä¸­å°†è¯¥å›è°ƒä½œä¸ºä¾èµ–ã€‚</p><pre class="kx ky kz la gt mw mv mx my aw mz bi"><span id="54f8" class="na lc iq mv b gy nb nc l nd ne"><em class="nf">const Item = ({ onClick }) =&gt; {<br/>  useEffect(() =&gt; {<br/>    // some heavy calculation here<br/>    const data = ...<br/>    onClick(data);<br/><br/>  // if onClick is not memoised, this will be triggered on every single render<br/>  }, [onClick])<br/>  return &lt;div&gt;something&lt;/div&gt;<br/>}<br/>const List = () =&gt; {<br/>  // this HAS TO be memoised, otherwise `useEffect` in Item above<br/>  // will be triggered on every single re-render<br/>  const onClick = () =&gt; {console.log('click!')};<br/><br/>  return &lt;Item onClick={onClick} country="Austria" /&gt;<br/>}</em></span></pre><p id="4f13" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æ‰€æœ‰è¿™äº›éƒ½ä¸èƒ½æ¦‚æ‹¬ä¸ºç®€å•çš„â€œåšâ€æˆ–â€œä¸åšâ€ï¼Œå®ƒåªèƒ½ç”¨äºè§£å†³ç¡®åˆ‡ç»„ä»¶çš„ç¡®åˆ‡æ€§èƒ½é—®é¢˜ï¼Œè€Œä¸æ˜¯ä»¥å‰ã€‚</p><p id="20bd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ç°åœ¨æ–‡ç« ç»ˆäºå®Œæˆäº†ï¼Œè°¢è°¢ä½ é˜…è¯»åˆ°ç›®å‰ä¸ºæ­¢ï¼Œå¸Œæœ›ä½ è§‰å¾—æœ‰ç”¨ï¼å†è§ï¼Œä¸‹æ¬¡è§ï¼ŒâœŒğŸ¼</p></div><div class="ab cl no np hu nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="ij ik il im in"><p id="ac85" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="nf">åŸè½½äº</em><a class="ae ng" href="https://www.developerway.com/posts/how-to-write-performant-react-code" rel="noopener ugc nofollow" target="_blank"><em class="nf">https://www.developerway.com</em></a><em class="nf">ã€‚ç½‘ç«™ä¸Šæœ‰æ›´å¤šè¿™æ ·çš„æ–‡ç« </em>ğŸ˜‰</p><p id="27d0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae ng" href="https://www.developerway.com/" rel="noopener ugc nofollow" target="_blank"> <em class="nf">è®¢é˜…å¿«è®¯</em> </a>ã€<em class="nf"> </em> <a class="ae ng" href="https://www.linkedin.com/in/adevnadia/" rel="noopener ugc nofollow" target="_blank"> <em class="nf">åœ¨LinkedInä¸Šè¿æ¥</em> </a> <em class="nf">æˆ–</em> <a class="ae ng" href="https://twitter.com/adevnadia" rel="noopener ugc nofollow" target="_blank"> <em class="nf">åœ¨Twitterä¸Šå…³æ³¨</em> </a> <em class="nf">ä»¥ä¾¿åœ¨ä¸‹ä¸€ç¯‡æ–‡ç« å‡ºæ¥æ—¶ç«‹å³è·å¾—é€šçŸ¥ã€‚</em></p></div></div>    
</body>
</html>