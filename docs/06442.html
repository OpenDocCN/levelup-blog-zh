<html>
<head>
<title>How to Automate Notion with Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Python自动化概念</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-automate-notion-with-python-6fa5288ad830?source=collection_archive---------1-----------------------#2020-11-25">https://levelup.gitconnected.com/how-to-automate-notion-with-python-6fa5288ad830?source=collection_archive---------1-----------------------#2020-11-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/93ba4c5c6ba994f3d845af7b3e90fba8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kpnnttSojA8BXwhPIyRmiw.jpeg"/></div></div></figure><p id="2f45" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我喜欢<a class="ae kz" href="https://www.notion.so/" rel="noopener ugc nofollow" target="_blank">概念</a>。</p><p id="c0d3" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在我发现ideas之前，我所有的笔记、项目、进度跟踪和想法都分散在不同的地方。真是一团糟。</p><p id="16a9" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">观念把一切都带到了一个地方。每个项目，每个想法，我所有的笔记现在都在一个地方。我可以看到所有应用程序—我不需要在多个应用程序之间切换。我可以互相链接和引用。观念简化了我的工作流程，并以一种我不知道的方式改进了它。</p><p id="689e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我也喜欢自动化。我是那种宁愿花一两个晚上写脚本来自动化枯燥的重复任务，也不愿一遍又一遍地做的人。</p><p id="dcc0" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">带着这种心态，我审视了我在ideal中创建的工作流，并试图找到一种自动化它们的方法。</p><p id="d0fa" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">截至2020年11月底，idea没有任何可用的公共API。<a class="ae kz" href="https://www.notion.so/pricing" rel="noopener ugc nofollow" target="_blank">计费页面</a>称内容API已在路线图中，将仅适用于付费账户。什么概念的团队没有说的是，我们什么时候可以期待官方API发布。</p><p id="a361" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">幸运的是，我们现在可以使用<a class="ae kz" href="https://github.com/jamalex/notion-py" rel="noopener ugc nofollow" target="_blank">概念-py </a>包。</p><p id="42c7" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">opinion-py是opinion的非官方Python客户端。在幕后，它使用<a class="ae kz" href="https://pypi.org/project/requests/" rel="noopener ugc nofollow" target="_blank">请求</a>包以无头模式打开一个网页，并以这种方式获取数据。它也适用于免费和付费账户。</p><h1 id="7fc4" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">让我们自动化概念！</h1><p id="cfe7" class="pw-post-body-paragraph kb kc it kd b ke ly kg kh ki lz kk kl km ma ko kp kq mb ks kt ku mc kw kx ky im bi translated">在本文中，我将向您展示一个示例Python脚本来自动化一个简单的工作流。我们将使用习惯跟踪器模板，并编写一个脚本来添加一个带有正确格式日期的新行。</p><p id="e0ec" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在接触Python之前，我们先准备一下追踪器。点击左侧栏中的模板，选择<a class="ae kz" href="https://www.notion.so/Habit-tracker-60bb4401179745288da937ee44c2e8d0" rel="noopener ugc nofollow" target="_blank">习惯跟踪器</a>(可以在个人部分找到)。</p><figure class="me mf mg mh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi md"><img src="../Images/9117ae5cc002629eb1e429fbf80d6c13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g6E1o0EbR5JD21kotbdCuQ.png"/></div></div><figcaption class="mi mj gj gh gi mk ml bd b be z dk translated">这就是我们将要自动化的</figcaption></figure><p id="ac40" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们现在准备好了！让我们安装idea-py:</p><pre class="me mf mg mh gt mm mn mo mp aw mq bi"><span id="02ef" class="mr lb it mn b gy ms mt l mu mv">pip install notion</span></pre><p id="58a4" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">接下来，我们需要我们的认证令牌。它以cookie的形式存储在您的浏览器中，我们可以使用DevTools获取它。首先，在浏览器中打开你的概念空间——进入<a class="ae kz" href="https://www.notion.so/" rel="noopener ugc nofollow" target="_blank">概念. so </a>并登录你的账户。</p><p id="b876" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">然后打开DevTools(对于Chrome，在Mac上按⌥ +⌘ +I或者在Windows上按Ctrl+Alt+I)，进入应用程序选项卡，从左侧栏选择cookies，搜索<code class="fe mw mx my mn b">token_v2</code>。将这个cookie的值复制并保存到某个地方——idea-py将使用它来访问我们的概念页面。</p><p id="f6c1" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们现在已经拥有了与观念相联系的一切。下面的代码创建了idea-py客户端，并连接到习惯跟踪器页面。</p><figure class="me mf mg mh gt ju"><div class="bz fp l di"><div class="mz na l"/></div></figure><figure class="me mf mg mh gt ju gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/c9a5cf0c29d8441244260c73f90a18f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:806/format:webp/1*DDyLCsEtOU7nzv_Q_I7erA.png"/></div></figure><p id="c800" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">收藏网址是我们习惯追踪器的网址。你可以从地址栏得到它，或者在左边栏右击它，复制链接。</p><p id="9f8f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在，我们可以开始做一些有趣的事情，比如添加一个新行。</p><figure class="me mf mg mh gt ju"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="2738" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">运行完这段代码后，转到习惯跟踪页面，您应该会在那里看到新的一行。您还应该注意到，该行的冥想复选框被选中。以上代码片段中的第二行就是这么做的。创建了一个新行，并给了我们代表它的对象。</p><p id="ab89" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">opinion-py提供了对页面(在我们的例子中是行，因为行也是页面)的每个属性的访问。属性名是蛇形的，没有特殊字符。一旦你给这个属性分配了一个新值，idea-py就会发送一个更新。您可以通过更改屏幕时间值来尝试一下——只要您执行这段代码，概念就会更新。</p><figure class="me mf mg mh gt ju"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="0fea" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在让我们通过在习惯跟踪器中自动格式化新条目的日期来完成我们的脚本:</p><figure class="me mf mg mh gt ju"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="9689" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">就这样——我们刚刚创建了一个简单的机器人来自动化idea中的工作流！</p><p id="66c3" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这仅仅是一个简单的例子，说明了用概念和Python可以做些什么。我推荐去看看<a class="ae kz" href="https://github.com/jamalex/notion-py" rel="noopener ugc nofollow" target="_blank">idea-py指南</a>——它列出了更多可能的例子。</p><p id="22a4" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">试着想想你可以用Python和idea-py做什么——你可以自动化什么，你可以给计算机做哪些重复的任务，这样你就可以专注于对你来说重要的事情。</p><p id="1a42" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我希望这篇教程能启发你创建自己的概念机器人。让我知道你创造了什么！</p></div></div>    
</body>
</html>