<html>
<head>
<title>Using Data URLs to Load Dependencies in Deno</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">åœ¨Denoä¸­ä½¿ç”¨æ•°æ®URLåŠ è½½ä¾èµ–é¡¹</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://levelup.gitconnected.com/using-data-urls-to-load-dependencies-in-deno-18461713ec1e?source=collection_archive---------19-----------------------#2021-02-01">https://levelup.gitconnected.com/using-data-urls-to-load-dependencies-in-deno-18461713ec1e?source=collection_archive---------19-----------------------#2021-02-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/bd471c7f90bb31d29d8d00f59d4e3c9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tT9kikTTSAI04T95AiRWuw.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">è¿™æ˜¯ä¸€ä¸ªä½ å¯ä»¥ç”¨å®ƒåšä»€ä¹ˆçš„ä»£ç ç¤ºä¾‹</figcaption></figure><p id="464f" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">æœ€è¿‘<a class="ae la" href="https://deno.land/posts/v1.7" rel="noopener ugc nofollow" target="_blank"> Denoå‘å¸ƒäº†v1.7.0 </a>ï¼Œå…¶ä¸­æœ‰<a class="ae la" href="https://deno.land/posts/v1.7#support-for-importing-data-urls" rel="noopener ugc nofollow" target="_blank">å¯¹æ•°æ®URL</a>çš„æ”¯æŒã€‚æˆ‘è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªéå¸¸é…·çš„åŠ¨æ€åˆ›å»ºæ¨¡å—çš„æ–¹æ³•ã€‚è¿™å¯ä»¥ç”¨æ¥åŠ¨æ€åœ°ä¸€æ¬¡åŠ è½½æˆ‘ä»¬æƒ³è¦åœ¨æ–‡ä»¶ä¸­ä½¿ç”¨çš„æ‰€æœ‰ä¾èµ–é¡¹ã€‚</p><h1 id="743c" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">æ•°æ®URL</h1><p id="b9ac" class="pw-post-body-paragraph kc kd iq ke b kf md kh ki kj me kl km kn mf kp kq kr mg kt ku kv mh kx ky kz ij bi translated">æ•°æ®URLåŸºæœ¬ä¸Šæ˜¯URLï¼Œä½†æ•°æ®ä»¥æŸç§å½¢å¼ç¼–ç ï¼Œå› æ­¤å®ƒä¸æ˜¯æŒ‡å‘æ•°æ®çš„é“¾æ¥ï¼Œè€Œæ˜¯å°†æ•°æ®ä¿å­˜åœ¨è‡ªèº«å†…éƒ¨ã€‚æ•°æ®URLé¦–å…ˆéœ€è¦ä»¥<code class="fe lb lc ld le b">data:</code>å¼€å¤´ã€‚ç„¶åæˆ‘ä»¬éœ€è¦æ·»åŠ æ­£åœ¨åŠ è½½çš„æ–‡ä»¶çš„MIMEç±»å‹ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­æ˜¯<code class="fe lb lc ld le b">application/typescript</code>ï¼Œä½†æ˜¯æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨<code class="fe lb lc ld le b">application/javascript</code>ã€‚åœ¨æˆ‘ä»¬æ·»åŠ äº†æ–‡ä»¶çš„ç¼–ç æ ¼å¼åï¼Œåœ¨æœ¬æ•™ç¨‹ä¸­æˆ‘ä»¬å°†åªä½¿ç”¨<code class="fe lb lc ld le b">base64</code>ï¼Œç„¶åä½ ä¹Ÿå¯ä»¥æ·»åŠ ä¸€ä¸ª<code class="fe lb lc ld le b">,</code>ï¼Œåè·Ÿæ–‡ä»¶çš„å®é™…ç¼–ç ã€‚</p><h2 id="87f6" class="mi lg iq bd lh mj mk dn ll ml mm dp lp kn mn mo lt kr mp mq lx kv mr ms mb mt bi translated">ä¸€ä¸ªä¾‹å­</h2><p id="8022" class="pw-post-body-paragraph kc kd iq ke b kf md kh ki kj me kl km kn mf kp kq kr mg kt ku kv mh kx ky kz ij bi translated">å‡è®¾æˆ‘ä»¬æœ‰è¿™ä¸ªæ–‡ä»¶:</p><pre class="mu mv mw mx gt my le mz na aw nb bi"><span id="8485" class="mi lg iq le b gy nc nd l ne nf">export const add = (a: number, b: number) =&gt; a + b;</span></pre><p id="9c12" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">æˆ‘ä»¬æƒ³ä»æ•°æ®URLå¯¼å…¥å®ƒã€‚ç„¶åæˆ‘ä»¬ä¼šé¦–å…ˆå¾—åˆ°æ ·æ¿æ–‡ä»¶ã€‚</p><pre class="mu mv mw mx gt my le mz na aw nb bi"><span id="c5ae" class="mi lg iq le b gy nc nd l ne nf">const { add } = await import("data:application/typescript;base64,");</span></pre><p id="778c" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">ç„¶åæˆ‘ä»¬éœ€è¦æ·»åŠ base64ç¼–ç ã€‚ä¸ºæ­¤å®ƒ</p><pre class="mu mv mw mx gt my le mz na aw nb bi"><span id="4784" class="mi lg iq le b gy nc nd l ne nf">ZXhwb3J0IGNvbnN0IGFkZCA9IChhOiBudW1iZXIsIGI6IG51bWJlcikgPT4gYSArIGI7</span></pre><p id="9ae1" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">æ‰€ä»¥æœ€åçš„ä»£ç æ˜¯:</p><pre class="mu mv mw mx gt my le mz na aw nb bi"><span id="07ef" class="mi lg iq le b gy nc nd l ne nf">const { add } = await import("data:application/typescript;base64,ZXhwb3J0IGNvbnN0IGFkZCA9IChhOiBudW1iZXIsIGI6IG51bWJlcikgPT4gYSArIGI7");</span></pre><p id="bd8f" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">å®ƒå°†æ­£ç¡®åœ°å¯¼å‡º<code class="fe lb lc ld le b">add</code>å‡½æ•°ã€‚</p><h1 id="a586" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">åŠ è½½ä¾èµ–é¡¹</h1><p id="6475" class="pw-post-body-paragraph kc kd iq ke b kf md kh ki kj me kl km kn mf kp kq kr mg kt ku kv mh kx ky kz ij bi translated">ç°åœ¨æˆ‘ä»¬çŸ¥é“äº†å¦‚ä½•ä½¿ç”¨å®ƒä»¬ï¼Œè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªåŠ©æ‰‹å‡½æ•°æ¥åŠ è½½ä¾èµ–é¡¹ã€‚è®©æˆ‘ä»¬é¦–å…ˆåˆ›å»ºç±»å‹å®šä¹‰ã€‚</p><pre class="mu mv mw mx gt my le mz na aw nb bi"><span id="5a71" class="mi lg iq le b gy nc nd l ne nf">interface Dependency {<br/> url: string;<br/> name: string;<br/>}</span><span id="496c" class="mi lg iq le b gy ng nd l ne nf">function loadDependencies(deps: Dependency[]) {</span><span id="2c5f" class="mi lg iq le b gy ng nd l ne nf">}</span></pre><p id="4d01" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">æˆ‘ä»¬å¸Œæœ›ä¸ºè¦å¯¼å…¥çš„æ•°æ®URLåˆ›å»ºä¸€ä¸ªå˜é‡ï¼Œå¹¶ä¸ºå¯¼å…¥çš„æºä»£ç åˆ›å»ºä¸€ä¸ªå˜é‡ã€‚æˆ‘ä»¬è¿˜æƒ³å¯¹<code class="fe lb lc ld le b">deps</code>æ•°ç»„è¿›è¡Œå¾ªç¯ã€‚</p><pre class="mu mv mw mx gt my le mz na aw nb bi"><span id="d25d" class="mi lg iq le b gy nc nd l ne nf">function loadDependencies(deps: Dependency[]) {<br/> let code = "";<br/> let dataURL = "data:application/typescript;base64,";<br/> deps.forEach({ url, name} =&gt; {<br/>  <br/> });<br/>}</span></pre><p id="7b28" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">ç°åœ¨è®©æˆ‘ä»¬ä¸ºæ¯ä¸ªä¾èµ–é¡¹å°†å¯¼å‡ºè¿½åŠ åˆ°<code class="fe lb lc ld le b">code</code>ä¸­ã€‚</p><pre class="mu mv mw mx gt my le mz na aw nb bi"><span id="4447" class="mi lg iq le b gy nc nd l ne nf">function loadDependencies(deps: Dependency[]) {<br/> let code = "";<br/> let dataURL = "data:application/typescript;base64,";<br/> deps.forEach(({ url, name }) =&gt; {<br/>  code += `export * as ${name} from "${url}"`;<br/> });<br/>}</span></pre><p id="56c2" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">ç°åœ¨æˆ‘ä»¬æ¥ç¼–ç ä¸€ä¸‹ã€‚æˆ‘ä»¬è¿˜å¿…é¡»å‘æ ‡å‡†åº“æ·»åŠ ä¸€ä¸ªä¾èµ–é¡¹ã€‚</p><pre class="mu mv mw mx gt my le mz na aw nb bi"><span id="112e" class="mi lg iq le b gy nc nd l ne nf">import { encode } from "<a class="ae la" href="https://deno.land/std@0.84.0/encoding/base64.ts" rel="noopener ugc nofollow" target="_blank">https://deno.land/std@0.84.0/encoding/base64.ts</a>";</span></pre><p id="ee65" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">ç°åœ¨è®©æˆ‘ä»¬åšæœ€åçš„éƒ¨åˆ†ã€‚</p><pre class="mu mv mw mx gt my le mz na aw nb bi"><span id="be7c" class="mi lg iq le b gy nc nd l ne nf">function loadDependencies(deps: Dependency[]) {<br/> let code = "";<br/> let dataURL = "data:application/typescript;base64,";<br/> deps.forEach(({ url, name }) =&gt; {<br/>  code += `export * as ${name} from "${url}"`;<br/> });<br/> dataURL += encode(code);<br/> return import(dataURL);<br/>}</span></pre><p id="2d6d" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">å’ŒğŸ‰å¯ä»¥ç”¨å®ƒå¯¼å…¥ä¾èµ–é¡¹ï¼</p><pre class="mu mv mw mx gt my le mz na aw nb bi"><span id="fe77" class="mi lg iq le b gy nc nd l ne nf">const deps = await loadDependencies([{ name: "aleph", url: "<a class="ae la" href="https://deno.land/x/aleph/mod.ts" rel="noopener ugc nofollow" target="_blank">https://deno.land/x/aleph/mod.ts</a>" }]);</span></pre></div><div class="ab cl nh ni hu nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="ij ik il im in"><p id="d4ef" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><em class="no">å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘å»ºè®®ä½ åœ¨æˆ‘çš„åšå®¢</em> <a class="ae la" href="https://h.shadowtime2000.com" rel="noopener ugc nofollow" target="_blank"> <em class="no">ä¸ŠæŸ¥çœ‹æˆ‘çš„å…¶ä»–æ–‡ç« </em> </a> <em class="no">ã€‚</em></p></div></div>    
</body>
</html>