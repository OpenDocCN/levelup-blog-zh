<html>
<head>
<title>Github Search and BLoC</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Github搜索和拦截</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/github-search-and-bloc-523d51848c68?source=collection_archive---------7-----------------------#2021-03-03">https://levelup.gitconnected.com/github-search-and-bloc-523d51848c68?source=collection_archive---------7-----------------------#2021-03-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="4597" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">使用BLoC模式实现Github搜索</h2></div><figure class="ki kj kk kl gt km"><div class="bz fp l di"><div class="kn ko l"/></div><figcaption class="kp kq gj gh gi kr ks bd b be z dk translated">Github搜索和拦截</figcaption></figure><h1 id="015f" class="kt ku it bd kv kw kx ky kz la lb lc ld jz le ka lf kc lg kd lh kf li kg lj lk bi translated">介绍</h1><p id="c0ec" class="pw-post-body-paragraph ll lm it ln b lo lp ju lq lr ls jx lt lu lv lw lx ly lz ma mb mc md me mf mg im bi translated"><strong class="ln iu"> <em class="mh">等级:中级</em> </strong></p><p id="6a34" class="pw-post-body-paragraph ll lm it ln b lo mi ju lq lr mj jx lt lu mk lw lx ly ml ma mb mc mm me mf mg im bi translated">本文假设读者已经了解了<strong class="ln iu">集团模式。</strong></p><p id="6936" class="pw-post-body-paragraph ll lm it ln b lo mi ju lq lr mj jx lt lu mk lw lx ly ml ma mb mc mm me mf mg im bi translated">我们将涵盖:</p><ol class=""><li id="2b93" class="mn mo it ln b lo mi lr mj lu mp ly mq mc mr mg ms mt mu mv bi translated">集成Github API</li><li id="f0b4" class="mn mo it ln b lo mw lr mx lu my ly mz mc na mg ms mt mu mv bi translated">定义用户界面状态</li><li id="efd7" class="mn mo it ln b lo mw lr mx lu my ly mz mc na mg ms mt mu mv bi translated">创建搜索块</li><li id="133d" class="mn mo it ln b lo mw lr mx lu my ly mz mc na mg ms mt mu mv bi translated">根据状态更新用户界面</li></ol><p id="d2eb" class="pw-post-body-paragraph ll lm it ln b lo mi ju lq lr mj jx lt lu mk lw lx ly ml ma mb mc mm me mf mg im bi translated">点击此处观看演示</p><p id="54f8" class="pw-post-body-paragraph ll lm it ln b lo mi ju lq lr mj jx lt lu mk lw lx ly ml ma mb mc mm me mf mg im bi translated"><strong class="ln iu"> <em class="mh">网址:</em></strong><a class="ae nb" href="https://web.flatteredwithflutter.com/#/" rel="noopener ugc nofollow" target="_blank"><strong class="ln iu"><em class="mh">https://web.flatteredwithflutter.com/#/</em></strong></a></p><figure class="ki kj kk kl gt km gh gi paragraph-image"><div role="button" tabindex="0" class="nd ne di nf bf ng"><div class="gh gi nc"><img src="../Images/7eda0a9c0df8186a3ce0f74503c5c71f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VMtdpb0KFw7wucooqz0sRA.png"/></div></div></figure><h1 id="3428" class="kt ku it bd kv kw kx ky kz la lb lc ld jz le ka lf kc lg kd lh kf li kg lj lk bi translated">集成Github API</h1><p id="c87d" class="pw-post-body-paragraph ll lm it ln b lo lp ju lq lr ls jx lt lu lv lw lx ly lz ma mb mc md me mf mg im bi translated">我们定义了一个抽象类(又名<strong class="ln iu">契约</strong>)，其中包含一个方法。</p><figure class="ki kj kk kl gt km gh gi paragraph-image"><div role="button" tabindex="0" class="nd ne di nf bf ng"><div class="gh gi nj"><img src="../Images/08a77d70189a35fd6ff9bfb505784d4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G4KaI2oqwmMPQ49ZLmwFVQ.png"/></div></div><figcaption class="kp kq gj gh gi kr ks bd b be z dk translated">Github搜索和拦截</figcaption></figure><p id="f7cb" class="pw-post-body-paragraph ll lm it ln b lo mi ju lq lr mj jx lt lu mk lw lx ly ml ma mb mc mm me mf mg im bi translated">Github有一个<a class="ae nb" href="https://stackoverflow.com/questions/53747159/whats-the-correct-endpoint-to-access-github-repositories-on-github-api" rel="noopener ugc nofollow" target="_blank">公共端点</a>用于搜索存储库，我们将用户定义的搜索词附加到它上面。</p><pre class="ki kj kk kl gt nk nl nm nn aw no bi"><span id="0b09" class="np ku it nl b gy nq nr l ns nt">https://api.github.com/search/repositories?q='YOUR SEARCH TERM'</span></pre><p id="4264" class="pw-post-body-paragraph ll lm it ln b lo mi ju lq lr mj jx lt lu mk lw lx ly ml ma mb mc mm me mf mg im bi translated">所以现在，我们在我们的<strong class="ln iu"> GithubApi </strong>(我们的实现类名)中实现抽象类。</p><pre class="ki kj kk kl gt nk nl nm nn aw no bi"><span id="ac8a" class="np ku it nl b gy nq nr l ns nt">class GithubApi implements GithubSearchContract</span></pre><p id="be1d" class="pw-post-body-paragraph ll lm it ln b lo mi ju lq lr mj jx lt lu mk lw lx ly ml ma mb mc mm me mf mg im bi translated">我们的搜索功能是这样的</p><figure class="ki kj kk kl gt km gh gi paragraph-image"><div role="button" tabindex="0" class="nd ne di nf bf ng"><div class="gh gi nu"><img src="../Images/fdceab1c2601aecadde02753b17b505a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5I2qKaWZ8F7We_yv3h6m0w.png"/></div></div></figure><p id="f17a" class="pw-post-body-paragraph ll lm it ln b lo mi ju lq lr mj jx lt lu mk lw lx ly ml ma mb mc mm me mf mg im bi translated">在这里我们调用API，获取结果，并将它们转换成<strong class="ln iu"> SearchResult </strong>模型。</p></div><div class="ab cl nv nw hx nx" role="separator"><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa"/></div><div class="im in io ip iq"><h1 id="7468" class="kt ku it bd kv kw oc ky kz la od lc ld jz oe ka lf kc of kd lh kf og kg lj lk bi translated">定义用户界面状态</h1><p id="1439" class="pw-post-body-paragraph ll lm it ln b lo lp ju lq lr ls jx lt lu lv lw lx ly lz ma mb mc md me mf mg im bi translated">我们用公式表达UI可能拥有的所有状态，然后定义它们。</p><pre class="ki kj kk kl gt nk nl nm nn aw no bi"><span id="ac48" class="np ku it nl b gy nq nr l ns nt">enum States {<br/>  noTerm,<br/>  error,<br/>  loading,<br/>  populated,<br/>  empty,<br/>}</span></pre><p id="386f" class="pw-post-body-paragraph ll lm it ln b lo mi ju lq lr mj jx lt lu mk lw lx ly ml ma mb mc mm me mf mg im bi translated">我们创建一个基类(<strong class="ln iu"> SearchState </strong>)，每个状态(上面定义的)将实现这个基类。</p><pre class="ki kj kk kl gt nk nl nm nn aw no bi"><span id="d5ee" class="np ku it nl b gy nq nr l ns nt">@immutable<br/>class SearchState extends BlocState {<br/>  SearchState({this.state});</span><span id="b704" class="np ku it nl b gy oh nr l ns nt">  final States state;<br/>}</span><span id="1b2f" class="np ku it nl b gy oh nr l ns nt">abstract class BlocState extends Equatable {<br/>  @override<br/>  List&lt;Object&gt; get props =&gt; [];<br/>}</span></pre><p id="249d" class="pw-post-body-paragraph ll lm it ln b lo mi ju lq lr mj jx lt lu mk lw lx ly ml ma mb mc mm me mf mg im bi translated">我们的<strong class="ln iu"> SearchState </strong>类是内部扩展的<a class="ae nb" href="https://pub.dev/packages/equatable" rel="noopener ugc nofollow" target="_blank">equivalent</a>。Equatable完成了两个对象之间相等比较的繁重工作。</p><div class="oi oj gp gr ok ol"><a href="https://medium.com/flutter-community/dart-equatable-package-simplify-equality-comparisons-1a96a3fc4864" rel="noopener follow" target="_blank"><div class="om ab fo"><div class="on ab oo cl cj op"><h2 class="bd iu gy z fp oq fr fs or fu fw is bi translated">Dart等价包:简化等式比较</h2><div class="os l"><h3 class="bd b gy z fp oq fr fs or fu fw dk translated">如果您一直在编写Dart，那么您可能不得不重写==操作符和hashCode，以便比较…</h3></div><div class="ot l"><p class="bd b dl z fp oq fr fs or fu fw dk translated">medium.com</p></div></div><div class="ou l"><div class="ov l ow ox oy ou oz nh ol"/></div></div></a></div><h2 id="4f1a" class="np ku it bd kv pa pb dn kz pc pd dp ld lu pe pf lf ly pg ph lh mc pi pj lj pk bi translated">实现用户界面状态</h2><p id="57d7" class="pw-post-body-paragraph ll lm it ln b lo lp ju lq lr ls jx lt lu lv lw lx ly lz ma mb mc md me mf mg im bi translated">枚举中的所有值对应于一个UI状态，目前，我们的枚举中有<strong class="ln iu"> 5个值，因此我们将<strong class="ln iu">创建5个状态</strong>。</strong></p><pre class="ki kj kk kl gt nk nl nm nn aw no bi"><span id="b473" class="np ku it nl b gy nq nr l ns nt">class SearchNoTerm extends SearchState {<br/>  SearchNoTerm() : super(state: States.noTerm);<br/>}</span><span id="902c" class="np ku it nl b gy oh nr l ns nt">class SearchError extends SearchState {<br/>  SearchError() : super(state: States.error);<br/>}</span><span id="462e" class="np ku it nl b gy oh nr l ns nt">class SearchLoading extends SearchState {<br/>  SearchLoading() : super(state: States.loading);<br/>}</span><span id="3c84" class="np ku it nl b gy oh nr l ns nt">class SearchPopulated extends SearchState {<br/>  final SearchResult result;</span><span id="14ca" class="np ku it nl b gy oh nr l ns nt">  SearchPopulated(this.result) : super(state: States.populated);<br/>}</span><span id="b994" class="np ku it nl b gy oh nr l ns nt">class SearchEmpty extends SearchState {<br/>  SearchEmpty() : super(state: States.empty);<br/>}</span></pre><p id="32cf" class="pw-post-body-paragraph ll lm it ln b lo mi ju lq lr mj jx lt lu mk lw lx ly ml ma mb mc mm me mf mg im bi translated">正如我们在这里看到的，每个UI状态还包括来自enum的相应值。举个例子，</p><blockquote class="pl pm pn"><p id="e69a" class="ll lm mh ln b lo mi ju lq lr mj jx lt po mk lw lx pp ml ma mb pq mm me mf mg im bi translated"><strong class="ln iu"> SearchNoTerm state </strong>具有<strong class="ln iu"> States.noTerm </strong>的值，依此类推</p></blockquote><p id="41a1" class="pw-post-body-paragraph ll lm it ln b lo mi ju lq lr mj jx lt lu mk lw lx ly ml ma mb mc mm me mf mg im bi translated">结果只包含在<strong class="ln iu"> SearchPopulated </strong> <strong class="ln iu">状态</strong>中，其中有一个<strong class="ln iu"> SearchResult(我们的模型类)</strong>参数。</p><figure class="ki kj kk kl gt km gh gi paragraph-image"><div class="gh gi pr"><img src="../Images/b2da4162f18cd394cd7e5444f0305402.png" data-original-src="https://miro.medium.com/v2/resize:fit:768/0*2DSV6-sgsBWZgXF9.gif"/></div></figure><h1 id="14fd" class="kt ku it bd kv kw kx ky kz la lb lc ld jz le ka lf kc lg kd lh kf li kg lj lk bi translated">创建搜索块</h1><p id="d4ca" class="pw-post-body-paragraph ll lm it ln b lo lp ju lq lr ls jx lt lu lv lw lx ly lz ma mb mc md me mf mg im bi translated">创建我们期待已久的集团的时候到了。</p><figure class="ki kj kk kl gt km gh gi paragraph-image"><div role="button" tabindex="0" class="nd ne di nf bf ng"><div class="gh gi ps"><img src="../Images/3e8d94db92b3651443173c53ad709538.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T9wvQB0FjG481mqykxr1sQ.png"/></div></div><figcaption class="kp kq gj gh gi kr ks bd b be z dk translated">Github搜索和拦截</figcaption></figure><p id="c23b" class="pw-post-body-paragraph ll lm it ln b lo mi ju lq lr mj jx lt lu mk lw lx ly ml ma mb mc mm me mf mg im bi translated">bloc背后的想法是<strong class="ln iu">暴露</strong> <strong class="ln iu">接收器</strong>(对于用户定义的事件)并通过<strong class="ln iu">发出各自的状态</strong>根据这些事件做出反应。</p><p id="6c35" class="pw-post-body-paragraph ll lm it ln b lo mi ju lq lr mj jx lt lu mk lw lx ly ml ma mb mc mm me mf mg im bi translated">我们定义了搜索块，它将Github API的<strong class="ln iu">实现作为参数。</strong></p><pre class="ki kj kk kl gt nk nl nm nn aw no bi"><span id="fb0b" class="np ku it nl b gy nq nr l ns nt">class SearchBloc {<br/>  factory SearchBloc(GithubSearchContract api) {<br/>   //.....<br/>  }<br/>  <br/>  // Sink exposed to UI<br/>  final Sink&lt;String&gt; onTextChanged;</span><span id="b7bb" class="np ku it nl b gy oh nr l ns nt">  // State exposed to UI<br/>  final Stream&lt;SearchState&gt; state;<br/>}</span></pre><blockquote class="pl pm pn"><p id="f103" class="ll lm mh ln b lo mi ju lq lr mj jx lt po mk lw lx pp ml ma mb pq mm me mf mg im bi translated">我们公开了onTextChanged sink的<strong class="ln iu">并发出searchstate的<strong class="ln iu">流</strong>。</strong></p></blockquote><h2 id="7b75" class="np ku it bd kv pa pb dn kz pc pd dp ld lu pe pf lf ly pg ph lh mc pi pj lj pk bi translated">1.onTextChanged接收器</h2><p id="9392" class="pw-post-body-paragraph ll lm it ln b lo lp ju lq lr ls jx lt lu lv lw lx ly lz ma mb mc md me mf mg im bi translated">我们使用<a class="ae nb" href="https://pub.dev/packages/rxdart" rel="noopener ugc nofollow" target="_blank"> RxDart </a>来定义什么进入了我们的接收器。</p><blockquote class="pl pm pn"><p id="b68c" class="ll lm mh ln b lo mi ju lq lr mj jx lt po mk lw lx pp ml ma mb pq mm me mf mg im bi translated">RxDart为Dart <a class="ae nb" href="https://api.dart.dev/stable/dart-async/Stream-class.html" rel="noopener ugc nofollow" target="_blank">流</a>和<a class="ae nb" href="https://api.dart.dev/stable/dart-async/StreamController-class.html" rel="noopener ugc nofollow" target="_blank">流控制器</a>增加了额外的功能。</p></blockquote><pre class="ki kj kk kl gt nk nl nm nn aw no bi"><span id="4de8" class="np ku it nl b gy nq nr l ns nt">factory SearchBloc(GithubSearchContract api) {<br/>  final onTextChanged = PublishSubject&lt;String&gt;();</span><span id="e8db" class="np ku it nl b gy oh nr l ns nt">  final state = onTextChanged<br/>        .distinct()<br/>        .debounceTime(const Duration(milliseconds: 500))<br/>        .switchMap&lt;SearchState&gt;((String term) =&gt;                                                _helpers.eventTyping(term))<br/>        .startWith(SearchNoTerm());</span><span id="e998" class="np ku it nl b gy oh nr l ns nt">  return SearchBloc._(api, onTextChanged, state);<br/>}</span></pre><p id="57f4" class="pw-post-body-paragraph ll lm it ln b lo mi ju lq lr mj jx lt lu mk lw lx ly ml ma mb mc mm me mf mg im bi translated">我们创建一个字符串类型的<a class="ae nb" href="https://pub.dev/documentation/rxdart/latest/rx/PublishSubject-class.html" rel="noopener ugc nofollow" target="_blank"><strong class="ln iu">publish subject</strong></a>，因为我们将搜索一个字符串术语。</p><p id="7a33" class="pw-post-body-paragraph ll lm it ln b lo mi ju lq lr mj jx lt lu mk lw lx ly ml ma mb mc mm me mf mg im bi translated"><strong class="ln iu"> PublishSubject </strong>:发出订阅时可观察到的源的所有后续项目。</p><blockquote class="pl pm pn"><p id="e8ae" class="ll lm mh ln b lo mi ju lq lr mj jx lt po mk lw lx pp ml ma mb pq mm me mf mg im bi translated">与<code class="fe pt pu pv nl b">BehaviorSubject</code>不同，<code class="fe pt pu pv nl b">PublishSubject</code>不保留/缓存项目，因此，新的<code class="fe pt pu pv nl b">Observer</code>不会接收任何过去的项目。</p></blockquote><pre class="ki kj kk kl gt nk nl nm nn aw no bi"><span id="b561" class="np ku it nl b gy nq nr l ns nt"><strong class="nl iu">final</strong> subject = PublishSubject&lt;int&gt;();<br/><br/><em class="mh">// observer1 will receive all data and done events</em><br/>subject.stream.listen(observer1);<br/>subject.add(1);<br/>subject.add(2);<br/><br/><em class="mh">// observer2 will only receive 3 and done event</em><br/>subject.stream.listen(observe2);<br/>subject.add(3);<br/>subject.close();</span></pre><figure class="ki kj kk kl gt km gh gi paragraph-image"><div role="button" tabindex="0" class="nd ne di nf bf ng"><div class="gh gi nc"><img src="../Images/86434eec30535dfaf5d6c52c769bf96f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*FL3hhOXm-oNiJSU2.png"/></div></div><figcaption class="kp kq gj gh gi kr ks bd b be z dk translated">发布主题</figcaption></figure></div><div class="ab cl nv nw hx nx" role="separator"><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa"/></div><div class="im in io ip iq"><h2 id="d4df" class="np ku it bd kv pa pb dn kz pc pd dp ld lu pe pf lf ly pg ph lh mc pi pj lj pk bi translated">2.过滤槽</h2><p id="824c" class="pw-post-body-paragraph ll lm it ln b lo lp ju lq lr ls jx lt lu lv lw lx ly lz ma mb mc md me mf mg im bi translated">现在我们需要过滤进入我们的<strong class="ln iu">接收器的项目。</strong>我们使用<strong class="ln iu"> distinct </strong>来跳过与前一个数据事件相同的数据事件。</p><p id="4574" class="pw-post-body-paragraph ll lm it ln b lo mi ju lq lr mj jx lt lu mk lw lx ly ml ma mb mc mm me mf mg im bi translated">返回的流提供与此流相同的事件，只是它从不提供两个相等的连续数据事件。</p><blockquote class="pl pm pn"><p id="4e2b" class="ll lm mh ln b lo mi ju lq lr mj jx lt po mk lw lx pp ml ma mb pq mm me mf mg im bi translated"><a class="ae nb" href="https://rxmarbles.com/#distinct" rel="noopener ugc nofollow" target="_blank">不同</a>的交互描述。</p></blockquote></div><div class="ab cl nv nw hx nx" role="separator"><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa"/></div><div class="im in io ip iq"><h2 id="15ad" class="np ku it bd kv pa pb dn kz pc pd dp ld lu pe pf lf ly pg ph lh mc pi pj lj pk bi translated">3.去抖</h2><p id="2c76" class="pw-post-body-paragraph ll lm it ln b lo lp ju lq lr ls jx lt lu lv lw lx ly lz ma mb mc md me mf mg im bi translated">在运行搜索之前，我们等待用户停止输入500毫秒。这是通过使用<a class="ae nb" href="https://pub.dev/documentation/rxdart/latest/rx/DebounceExtensions/debounceTime.html" rel="noopener ugc nofollow" target="_blank">去抖</a>实现的。</p><pre class="ki kj kk kl gt nk nl nm nn aw no bi"><span id="8f56" class="np ku it nl b gy nq nr l ns nt">Stream.fromIterable([1, 2, 3, 4])<br/>  .debounceTime(Duration(seconds: 1))<br/>  .listen(print); <em class="mh">// prints 4</em></span></pre><h2 id="536f" class="np ku it bd kv pa pb dn kz pc pd dp ld lu pe pf lf ly pg ph lh mc pi pj lj pk bi translated">4.开关图</h2><p id="5117" class="pw-post-body-paragraph ll lm it ln b lo lp ju lq lr ls jx lt lu lv lw lx ly lz ma mb mc md me mf mg im bi translated">用给定的搜索词调用Github API。如果输入另一个搜索词，switchMap将确保放弃之前的搜索。</p><p id="b512" class="pw-post-body-paragraph ll lm it ln b lo mi ju lq lr mj jx lt lu mk lw lx ly ml ma mb mc mm me mf mg im bi translated">例如，当您只需要来自异步API的最新状态时，这可能很有用。</p><pre class="ki kj kk kl gt nk nl nm nn aw no bi"><span id="6563" class="np ku it nl b gy nq nr l ns nt">RangeStream(4, 1)<br/>  .switchMap((i) =&gt;<br/>    TimerStream(i, Duration(minutes: i))<br/>  .listen(print); <em class="mh">// prints 1</em></span></pre><p id="5fd8" class="pw-post-body-paragraph ll lm it ln b lo mi ju lq lr mj jx lt lu mk lw lx ly ml ma mb mc mm me mf mg im bi translated">最后，我们调用Github API:</p><pre class="ki kj kk kl gt nk nl nm nn aw no bi"><span id="0862" class="np ku it nl b gy nq nr l ns nt">Stream&lt;SearchState&gt; eventTyping(String term) async* {<br/>  if (term.isEmpty) {<br/>    yield SearchEmpty();<br/>  } else {<br/>    yield* Rx.fromCallable(() =&gt; api.search(term))<br/>        .map((result) =&gt;<br/>           result.isEmpty ? SearchEmpty() : SearchPopulated(result))<br/>        .startWith(SearchLoading())<br/>        .onErrorReturn(SearchError());<br/>  }<br/>}</span></pre><ul class=""><li id="4c18" class="mn mo it ln b lo mi lr mj lu mp ly mq mc mr mg pw mt mu mv bi translated">其中如果项为空，我们发出<strong class="ln iu"> SearchEmpty </strong>状态</li><li id="273f" class="mn mo it ln b lo mw lr mx lu my ly mz mc na mg pw mt mu mv bi translated">否则，调用API，将结果绑定到<strong class="ln iu">搜索填充的</strong>状态</li><li id="ce65" class="mn mo it ln b lo mw lr mx lu my ly mz mc na mg pw mt mu mv bi translated">出现错误时，发出<strong class="ln iu"> SearchError </strong>状态</li></ul></div><div class="ab cl nv nw hx nx" role="separator"><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa"/></div><div class="im in io ip iq"><h1 id="1d08" class="kt ku it bd kv kw oc ky kz la od lc ld jz oe ka lf kc of kd lh kf og kg lj lk bi translated">根据状态更新用户界面</h1><p id="7efa" class="pw-post-body-paragraph ll lm it ln b lo lp ju lq lr ls jx lt lu lv lw lx ly lz ma mb mc md me mf mg im bi translated">我们的块公开了一个流(<strong class="ln iu">称为状态</strong>)。在我们的UI中，我们简单地监听这个流，并根据发出的状态做出反应。</p><pre class="ki kj kk kl gt nk nl nm nn aw no bi"><span id="c306" class="np ku it nl b gy nq nr l ns nt">StreamBuilder&lt;SearchState&gt;(<br/>   builder: (context, model) {<br/>      final state = model.state;</span><span id="7cd9" class="np ku it nl b gy oh nr l ns nt">      if (state == States.loading) {<br/>          return const _Loading();<br/>      } else if (state == States.empty || state == States.noTerm) {<br/>          return const _Empty();<br/>      } else if (state == States.error) {<br/>          return const _Error();<br/>      } else if (state == States.populated) {<br/>          return const _DisplayWidget();<br/>      }</span><span id="307d" class="np ku it nl b gy oh nr l ns nt">      return const _Internal();<br/>   },<br/>   initialData: SearchNoTerm(),<br/>   stream: searchBloc.state,<br/>)</span></pre><figure class="ki kj kk kl gt km gh gi paragraph-image"><div class="gh gi px"><img src="../Images/dd498b6d995e546b1e559a5beed6b03a.png" data-original-src="https://miro.medium.com/v2/resize:fit:440/0*ZYZ-fZXRVm4yFVi7.gif"/></div></figure></div><div class="ab cl nv nw hx nx" role="separator"><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa"/></div><div class="im in io ip iq"><pre class="ki kj kk kl gt nk nl nm nn aw no bi"><span id="0adb" class="np ku it nl b gy nq nr l ns nt"><em class="mh">Hosted URL: </em><a class="ae nb" href="https://web.flatteredwithflutter.com/#/" rel="noopener ugc nofollow" target="_blank"><em class="mh">https://web.flatteredwithflutter.com/#/</em></a></span><span id="9844" class="np ku it nl b gy oh nr l ns nt"><a class="ae nb" href="https://github.com/AseemWangoo/experiments_with_web" rel="noopener ugc nofollow" target="_blank"><em class="mh">Source code for Flutter Web App.</em></a></span></pre><p id="154f" class="pw-post-body-paragraph ll lm it ln b lo mi ju lq lr mj jx lt lu mk lw lx ly ml ma mb mc mm me mf mg im bi translated">与Flutter相关的有趣文章在这里:</p><div class="oi oj gp gr ok ol"><a href="https://medium.com/flutter-community/flutterdesktop-and-c-7cd2e0106bd8" rel="noopener follow" target="_blank"><div class="om ab fo"><div class="on ab oo cl cj op"><h2 class="bd iu gy z fp oq fr fs or fu fw is bi translated">FlutterDesktop和C</h2><div class="os l"><h3 class="bd b gy z fp oq fr fs or fu fw dk translated">从FlutterDesktop MacOS调用C库</h3></div><div class="ot l"><p class="bd b dl z fp oq fr fs or fu fw dk translated">medium.com</p></div></div><div class="ou l"><div class="py l ow ox oy ou oz nh ol"/></div></div></a></div><div class="oi oj gp gr ok ol"><a href="https://medium.com/flutter-community/flutter-web-and-wasm-49217497b0ed" rel="noopener follow" target="_blank"><div class="om ab fo"><div class="on ab oo cl cj op"><h2 class="bd iu gy z fp oq fr fs or fu fw is bi translated">颤振腹板和WASM</h2><div class="os l"><h3 class="bd b gy z fp oq fr fs or fu fw dk translated">颤振腹板和WASM</h3></div><div class="ot l"><p class="bd b dl z fp oq fr fs or fu fw dk translated">颤振腹板和WASMmedium.com</p></div></div><div class="ou l"><div class="pz l ow ox oy ou oz nh ol"/></div></div></a></div><div class="oi oj gp gr ok ol"><a rel="noopener  ugc nofollow" target="_blank" href="/dart-ffi-and-cli-app-8cc5ed2f8aae"><div class="om ab fo"><div class="on ab oo cl cj op"><h2 class="bd iu gy z fp oq fr fs or fu fw is bi translated">Dart FFI和CLI应用程序</h2><div class="os l"><h3 class="bd b gy z fp oq fr fs or fu fw dk translated">Dart FFI和CLI应用程序</h3></div><div class="ot l"><p class="bd b dl z fp oq fr fs or fu fw dk translated">Dart FFI和Applevelup.gitconnected.com CLI</p></div></div><div class="ou l"><div class="qa l ow ox oy ou oz nh ol"/></div></div></a></div></div></div>    
</body>
</html>