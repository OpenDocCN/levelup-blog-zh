<html>
<head>
<title>BusyBox in K8S â€” The Swiss Army Knife of Embedded Linux</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">K8Sä¸­çš„BusyBoxåµŒå…¥å¼Linuxçš„ç‘å£«å†›åˆ€</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://levelup.gitconnected.com/busybox-in-k8s-the-swiss-army-knife-of-embedded-linux-ce7ced32de63?source=collection_archive---------7-----------------------#2022-07-11">https://levelup.gitconnected.com/busybox-in-k8s-the-swiss-army-knife-of-embedded-linux-ce7ced32de63?source=collection_archive---------7-----------------------#2022-07-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="833f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">è¿™ç¯‡æ–‡ç« å°†æè¿°BusyBoxåŠå…¶åœ¨å®¹å™¨åº”ç”¨ç¨‹åºä¸­çš„ä½¿ç”¨ï¼Œå°¤å…¶æ˜¯åœ¨K8Sç³»ç»Ÿä¸­ã€‚</p><h1 id="f1fe" class="ko kp it bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">ä»€ä¹ˆæ˜¯BusyBoxï¼Ÿ</h1><p id="4f9b" class="pw-post-body-paragraph jq jr it js b jt lm jv jw jx ln jz ka kb lo kd ke kf lp kh ki kj lq kl km kn im bi translated">BusyBoxæ˜ åƒæ˜¯ä¸€ä¸ªåŸºäºLinuxçš„æ˜ åƒï¼ŒåŒ…å«è®¸å¤šæ–¹ä¾¿çš„å®ç”¨ç¨‹åºã€‚</p><ul class=""><li id="e850" class="lr ls it js b jt ju jx jy kb lt kf lu kj lv kn lw lx ly lz bi translated">ä¸å…¶ä»–å›¾åƒç›¸æ¯”ï¼Œå®ƒå ç”¨çš„ç©ºé—´è¦å°å¾—å¤š(~1MB)ã€‚</li><li id="8c2b" class="lr ls it js b jt ma jx mb kb mc kf md kj me kn lw lx ly lz bi translated">å®ƒæœ‰400å¤šä¸ªå¸¸ç”¨å‘½ä»¤</li></ul><figure class="mg mh mi mj gt mk gh gi paragraph-image"><div role="button" tabindex="0" class="ml mm di mn bf mo"><div class="gh gi mf"><img src="../Images/b3b788ca903af7de490debe735f7b9b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NT2aUFeN4bjMwCYFiQ98_A.png"/></div></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk translated">Busyboxå›¾ç‰‡æ¥è‡ª<a class="ae mv" href="https://en.wikipedia.org/wiki/BusyBox" rel="noopener ugc nofollow" target="_blank">ç»´åŸºç™¾ç§‘</a></figcaption></figure><p id="8318" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨Busyboxæ˜ åƒè¿è¡ŒHTTP WebæœåŠ¡å™¨çš„åˆ†æ­¥ç¤ºä¾‹ã€‚</p><pre class="mg mh mi mj gt mw mx my mz aw na bi"><span id="3d55" class="nb kp it mx b gy nc nd l ne nf">// server.go<br/>package main</span><span id="ee82" class="nb kp it mx b gy ng nd l ne nf">import (<br/> "fmt"<br/> "net/http"<br/>)</span><span id="703e" class="nb kp it mx b gy ng nd l ne nf">func handler(w http.ResponseWriter, r *http.Request) {<br/> fmt.Fprintf(w, "Hello World!")<br/>}</span><span id="2fe1" class="nb kp it mx b gy ng nd l ne nf">func main() {<br/> http.HandleFunc("/", handler)<br/> fmt.Println("Server running...")<br/> http.ListenAndServe(":8080", nil)<br/>}</span></pre><ol class=""><li id="205b" class="lr ls it js b jt ju jx jy kb lt kf lu kj lv kn nh lx ly lz bi translated">ç¼–è¯‘ç¨‹åº</li></ol><pre class="mg mh mi mj gt mw mx my mz aw na bi"><span id="f4df" class="nb kp it mx b gy nc nd l ne nf">GOOS=linux GOARCH=amd64 go build server.go</span></pre><p id="1be3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">2.æ„å»ºdockeræ˜ åƒ</p><p id="75a7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Dockerfileæ–‡ä»¶</p><pre class="mg mh mi mj gt mw mx my mz aw na bi"><span id="3273" class="nb kp it mx b gy nc nd l ne nf"># Dockerfile<br/>FROM busybox</span><span id="ec8d" class="nb kp it mx b gy ng nd l ne nf">COPY . /app<br/>CMD /app/server</span></pre><p id="d465" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">æ„å»ºå‘½ä»¤</p><pre class="mg mh mi mj gt mw mx my mz aw na bi"><span id="f48d" class="nb kp it mx b gy nc nd l ne nf">docker build -t goexample .</span></pre><p id="f94c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">3.å¯åŠ¨å®¹å™¨</p><pre class="mg mh mi mj gt mw mx my mz aw na bi"><span id="e7d3" class="nb kp it mx b gy nc nd l ne nf">docker run -d -p 8080:8080 goexample</span></pre><p id="d2ab" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">4.è¯•éªŒ</p><pre class="mg mh mi mj gt mw mx my mz aw na bi"><span id="7b74" class="nb kp it mx b gy nc nd l ne nf">&gt; curl localhost:8080<br/>Hello World!</span></pre><h1 id="b476" class="ko kp it bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">åœ¨K8Sä¸­è¿è¡Œäº¤äº’å¼Pod</h1><figure class="mg mh mi mj gt mk gh gi paragraph-image"><div role="button" tabindex="0" class="ml mm di mn bf mo"><div class="gh gi ni"><img src="../Images/e5359a6143dacb064f524a3ccc2f8555.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ssPsWb_exvzqAUym.png"/></div></div></figure><p id="5a71" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">é™¤äº†ä½œä¸ºå…¶ä»–dockeræ˜ åƒçš„æ–¹ä¾¿åŸºç¡€ä¹‹å¤–ï¼ŒBusyboxè¿˜æ˜¯ä¸€ä¸ªæ–¹ä¾¿çš„å·¥å…·ç®±ï¼Œç”¨äºè°ƒè¯•podä¹‹é—´çš„k8sè‡ªå®šä¹‰ç½‘ç»œè¿æ¥é—®é¢˜ã€‚</p><p id="f50a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">ä»¥ä¸‹å‘½ä»¤éå¸¸æœ‰ç”¨ã€‚</p><pre class="mg mh mi mj gt mw mx my mz aw na bi"><span id="b7e7" class="nb kp it mx b gy nc nd l ne nf">kubectl run -i --tty busybox --image=busybox --restart=Never -- sh</span></pre><p id="201a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">å®ƒä»¥äº¤äº’æ¨¡å¼å¯åŠ¨ä¸€ä¸ªBusyboxå®¹å™¨ï¼Œç„¶åæ‰§è¡Œ<code class="fe nj nk nl mx b">sh</code> shellã€‚</p><p id="7b7a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">æ‚¨å¯ä»¥åœ¨shellä¸­æ‰§è¡Œä»»ä½•æƒ³è¦çš„å‘½ä»¤ã€‚ä¾‹å¦‚ï¼Œå‘½ä»¤<code class="fe nj nk nl mx b">nslooup</code>æŸ¥è¯¢åŸŸåç³»ç»Ÿä»¥è·å¾—åŸŸåå’ŒIPåœ°å€ä¹‹é—´çš„æ˜ å°„ã€‚</p><pre class="mg mh mi mj gt mw mx my mz aw na bi"><span id="23f8" class="nb kp it mx b gy nc nd l ne nf">/ # <strong class="mx iu">nslookup</strong> cache-redis-cluster-headless<br/>Server:         10.96.0.10<br/>Address:        10.96.0.10:53</span><span id="b97e" class="nb kp it mx b gy ng nd l ne nf">Name:   cache-redis-cluster-headless.default.svc.cluster.local<br/>Address: 172.17.0.7<br/>Name:   cache-redis-cluster-headless.default.svc.cluster.local<br/>Address: 172.17.0.8<br/>Name:   cache-redis-cluster-headless.default.svc.cluster.local<br/>Address: 172.17.0.9</span></pre><p id="5364" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">å®Œæˆåï¼Œå®¹å™¨å°†è¢«è‡ªåŠ¨ç§»é™¤ã€‚</p><h1 id="aa53" class="ko kp it bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">K8Sè¾¹è½¦é›†è£…ç®±</h1><p id="680c" class="pw-post-body-paragraph jq jr it js b jt lm jv jw jx ln jz ka kb lo kd ke kf lp kh ki kj lq kl km kn im bi translated">åœ¨k8sä¸­ï¼ŒBusyBoxå®¹å™¨å¯ä»¥å¸®åŠ©è¯Šæ–­dockerç½‘ç»œã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ä¸ªéå¸¸æ–¹ä¾¿çš„T2ã€‚</p><p id="cd53" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">å‡è®¾æ‚¨éœ€è¦åœ¨ä¸»å®¹å™¨å¯åŠ¨ä¹‹å‰è®¾ç½®ä¸€äº›ä¸œè¥¿ã€‚</p><p id="b5a9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">ä½œä¸ºä¸€ä¸ªå…·ä½“çš„ä¾‹å­ï¼Œå®˜æ–¹çš„<code class="fe nj nk nl mx b">redis</code>æ˜ åƒå¹¶ä¸ä½œä¸º<em class="nm"> rootã€</em>è¿è¡ŒRedisï¼Œæ‰€ä»¥å®ƒä¸èƒ½è®¿é—®æ–‡ä»¶ç³»ç»Ÿã€‚å¦‚æœæ‚¨ä½¿ç”¨ç£ç›˜å¤‡ä»½è¿è¡ŒRedisï¼Œæ‚¨å°†éœ€è¦æ‰“å¼€è¯¥ç£ç›˜æƒé™ã€‚</p><p id="ea3d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">ä¸€ä¸ªè§£å†³æ–¹æ¡ˆå¯èƒ½æ˜¯è¿™æ ·çš„:</p><pre class="mg mh mi mj gt mw mx my mz aw na bi"><span id="0b2a" class="nb kp it mx b gy nc nd l ne nf">initContainers:<br/>      - name: redis-data-permission-fix<br/>        image: busybox<br/>        command: ["/bin/chmod", "-R", "777", "/opt/data/redis"]<br/>        volumeMounts:<br/>        - name: data<br/>          mountPath: /opt/data/redis</span></pre><h1 id="dab8" class="ko kp it bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">ç»“è®º</h1><p id="494f" class="pw-post-body-paragraph jq jr it js b jt lm jv jw jx ln jz ka kb lo kd ke kf lp kh ki kj lq kl km kn im bi translated">åœ¨k8sä¸­ï¼ŒBusyBoxå®¹å™¨æ˜¯</p><ul class=""><li id="a5e6" class="lr ls it js b jt ju jx jy kb lt kf lu kj lv kn lw lx ly lz bi translated">ç”¨äºå…¶ä»–dockerå›¾åƒçš„è½»é‡çº§åŸºæœ¬å›¾åƒã€‚</li><li id="9a08" class="lr ls it js b jt ma jx mb kb mc kf md kj me kn lw lx ly lz bi translated">ä¸€æŠŠç‘å£«å†›åˆ€å¸®åŠ©æ‚¨è¯Šæ–­podä¹‹é—´çš„dockerç½‘ç»œè¿æ¥é—®é¢˜ã€‚</li><li id="8a0e" class="lr ls it js b jt ma jx mb kb mc kf md kj me kn lw lx ly lz bi translated">k8sè¾¹è½¦æ¨¡å¼ä¸­çš„ä¸€ä¸ªæœ‰ç”¨ç»„ä»¶ã€‚</li></ul></div><div class="ab cl nn no hx np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="im in io ip iq"><p id="490d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">å‘ç°è¿™ç¯‡æ–‡ç« å¾ˆæœ‰ç”¨ğŸ‘ï¼Ÿçœ‹çœ‹æˆ‘ä¸‹é¢çš„å…¶ä»–æ–‡ç« å§ï¼</p><ul class=""><li id="2674" class="lr ls it js b jt ju jx jy kb lt kf lu kj lv kn lw lx ly lz bi translated"><a class="ae mv" rel="noopener ugc nofollow" target="_blank" href="/circuit-breaker-example-in-golang-e6459c87eaeb">Golangçš„æ–­è·¯å™¨ç¤ºä¾‹</a></li><li id="5c74" class="lr ls it js b jt ma jx mb kb mc kf md kj me kn lw lx ly lz bi translated"><a class="ae mv" rel="noopener ugc nofollow" target="_blank" href="/how-does-golang-channel-works-6d66acd54753#:~:text=Understanding%20Inner%20workings%20of%20the%20Golang%20Channels&amp;text=A%20goroutine%20is%20a%20lightweight,is%20for%20communication%20between%20goroutines.">æˆˆæœ—é€šé“å¦‚ä½•å·¥ä½œ</a></li><li id="18b2" class="lr ls it js b jt ma jx mb kb mc kf md kj me kn lw lx ly lz bi translated"><a class="ae mv" rel="noopener ugc nofollow" target="_blank" href="/avoid-the-three-mistakes-when-using-a-map-in-go-699435db226c">é¿å…åœ¨Goä¸­ä½¿ç”¨åœ°å›¾æ—¶çš„ä¸‰ä¸ªé”™è¯¯</a></li></ul></div><div class="ab cl nn no hx np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="im in io ip iq"><h1 id="1d45" class="ko kp it bd kq kr nu kt ku kv nv kx ky kz nw lb lc ld nx lf lg lh ny lj lk ll bi translated">åˆ†çº§ç¼–ç </h1><p id="9fef" class="pw-post-body-paragraph jq jr it js b jt lm jv jw jx ln jz ka kb lo kd ke kf lp kh ki kj lq kl km kn im bi translated">æ„Ÿè°¢æ‚¨æˆä¸ºæˆ‘ä»¬ç¤¾åŒºçš„ä¸€å‘˜ï¼æ›´å¤šå†…å®¹è§<a class="ae mv" href="https://levelup.gitconnected.com/" rel="noopener ugc nofollow" target="_blank">çº§ç¼–ç å‡ºç‰ˆç‰©</a>ã€‚<br/>è·Ÿéš:<a class="ae mv" href="https://twitter.com/gitconnected" rel="noopener ugc nofollow" target="_blank">æ¨ç‰¹</a>ï¼Œ<a class="ae mv" href="https://www.linkedin.com/company/gitconnected" rel="noopener ugc nofollow" target="_blank">é¢†è‹±</a>ï¼Œ<a class="ae mv" href="https://newsletter.levelup.dev/" rel="noopener ugc nofollow" target="_blank">é€šè¿…</a> <br/> <strong class="js iu">å‡ä¸€çº§å°±æ˜¯è½¬å‹ç†å·¥æ‹›è˜</strong>ğŸ‘‰<a class="ae mv" href="https://jobs.levelup.dev/talent/welcome?referral=true" rel="noopener ugc nofollow" target="_blank"> <strong class="js iu">åŠ å…¥æˆ‘ä»¬çš„äººæ‰é›†ä½“</strong> </a></p></div></div>    
</body>
</html>