# 你现在应该开始使用的 10 大 PHP 8.1 特性

> 原文：<https://levelup.gitconnected.com/top-10-php-8-1-features-you-should-start-using-now-7161b91275fd>

## 了解 PHP 8.1 更新提供的最惊人的特性。

![](img/c6c901c65b2d4234ae6d351344fc7628.png)

PHP 8.1 现已推出，它提供了新的特性和性能改进——最令人兴奋的是新的 JIT 编译器。最近已于 2021 年 11 月 25 日上映。

我将详细演示 PHP 8.1 提供的 10 大特性，以便您可以开始在项目中使用它们，并改善您的 PHP 体验。初学者和有经验的开发人员可以从这篇文章中受益。

# PHP 8.1 提供的十大特性

1.  列举
2.  纤维
3.  “永不”返回类型
4.  “只读”属性
5.  最终类别常数
6.  新的“array_is_list()”函数
7.  新的“fsync()”和“fdatasync()”函数
8.  字符串键数组的数组解包支持
9.  用于目录上传的“$_FILES”中的新“full_path”键
10.  新的“IntlDatePatternGenerator”类

# 1.列举

PHP 8.1 增加了对枚举的支持，也称为 enum。它是一种逐项列出的类型，包含固定数量的可能值。请参考下面的代码片段，了解如何使用枚举。

# 2.纤维

PHP 8.1 增加了对纤程的支持，纤程是一个底层组件，它允许在 PHP 中执行并发代码。纤程是一个代码块，它包含自己的变量和状态堆栈。这些纤程可以被认为是应用程序线程，可以从主程序启动。一旦启动，主程序将不能暂停或终止纤程。它只能从光纤代码块内部暂停或端接。在纤程被挂起之后，控制权再次回到主程序，它可以从它被挂起的地方继续执行纤程。

> 纤程本身不允许同时执行多个纤程或主线程和一个纤程。然而，对于 PHP 框架来说，有效地管理执行堆栈并允许异步执行是一个巨大的优势。

参考下面的代码片段来理解如何使用纤程。

# 3.“永不”返回类型

PHP 8.1 增加了对名为`never`的新返回类型的支持。`never`类型可以用来表示一个函数将在执行一组指定的任务后终止程序执行。这可以通过抛出异常、调用`exit()`或`die()` 函数来实现。

> 永不返回类型类似于`void`返回类型。然而，`void`返回类型在函数完成一组指定的任务后继续执行。

请参考下面的代码片段，了解如何使用永不返回类型。

# 4.“只读”属性

PHP 8.1 增加了对名为`readonly`的新类属性的支持。声明为只读的类属性只能初始化一次。里面设置的值不能更改。如果您尝试强制更新该值，应用程序将会抛出一个错误。请参考下面的代码片段，了解如何使用只读属性。

# 5.最终类别常数

PHP 8.1 增加了对名为`final`的类常量的新标志的支持。最终的类常量不能被修改，即使通过执行继承，这意味着这些不能被子类扩展或覆盖。

> 此标志不能用于私有常量，因为它不能在类外部访问。同时声明 final 和 private 常量将导致致命错误。

请参考下面的代码片段，了解如何使用 final 标志。

# 6.新的“array_is_list()”函数

PHP 8.1 增加了对名为`array_is_list()`的新数组函数的支持。它标识指定数组是否包含从 0 开始的所有连续整数。如果数组是值的语义列表(数组的键从 0 开始，都是整数，中间没有间隔)，则该函数返回 true。对于空数组，它也返回 true。参考下面的代码片段来理解如何使用 array_is_list()函数。

如果数组的键不是从零开始，或者键不是整数，或者键是整数，但是没有按顺序出现，则该数组的值为 false。

# 7.新的“fsync()”和“fdatasync()”函数

PHP 8.1 增加了对`fsync()`和`fdatasync()`函数的支持。两者都与现有的`fflush()`函数相似，后者目前用于将缓冲区刷新到操作系统中。然而，`fsync()`和`fdatasync()`将缓冲区刷新到物理存储器。它们之间唯一的区别是`fsync()`函数在同步文件更改时包含元数据，而`fdatasync()`函数不包含。

> `fsync()`函数将获取一个文件指针，并尝试将更改提交到磁盘。如果成功，它将返回 true 如果失败，它将返回 false 如果资源不是文件，它将发出警告。`fdatasync()`函数以同样的方式工作，但是更快一些，因为 fsync()将尝试完全同步文件的数据变化和关于文件的元数据(最后修改时间等)。)，技术上是两次磁盘写入。

参考下面的代码片段来理解如何使用 fsync()和 fdatasync()函数。

# 8.字符串键数组的数组解包支持

PHP 8.1 增加了对解包字符串数组的支持。为了解开一个数组，PHP 使用了一个 spread `(…)`操作符。PHP 7.4 引入了这个操作符来合并两个或多个数组，但是语法更加简洁。但是在 PHP 8.1 之前，spread 操作符只支持带数字键的数组。请参考下面的代码片段，了解如何对字符串键数组使用 spread 运算符。

# 9.用于目录上传的“$_FILES”中的新“full_path”键

PHP 8.1 在`$_FILES`全局变量中增加了对新的`full_path`键的支持。在 PHP 8.1 之前，`$_FILES`没有存储相对路径或服务器的确切目录。因此，您无法使用 HTML 文件上传表单上传整个目录。新的`full_path`钥匙解决了这个问题。它存储相对路径，并在服务器上重建精确的目录结构，使目录上传成为可能。参考下面的代码片段来理解如何将`full_path`键与`$_FILES`全局变量一起使用。

# 10.新的“IntlDatePatternGenerator”类

PHP 8.1 增加了对新的`IntlDatePatternGenerator`类的支持。在 PHP 8.1 之前，只能用`IntlDateFormatter`创建本地化的日期和时间。它支持使用昨天、今天和明天的八种预定义格式。但是这些格式不像`IntlDatePatternGenerator`提供的那样可以定制。这个类允许指定日期、月份和时间的格式，顺序将由该类自动处理。请参考下面的代码片段，了解如何使用 IntlDatePatternGenerator 类。

太棒了。您已经学习完了 PHP 8.1 提供的特性。现在，您可以开始在当前或即将到来的项目中实现上述特性。

> 如果你喜欢读这篇文章，并且学到了一些新的东西，那么请鼓掌，与你的朋友分享，并关注我以获得我即将发布的文章的更新。你可以在 [LinkedIn](https://www.linkedin.com/in/tara-prasad-routray-b83027145/) 上联系我。