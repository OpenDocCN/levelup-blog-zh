# 微服务很棒。但是不要使用微服务！

> 原文：<https://levelup.gitconnected.com/microservices-are-great-but-dont-use-microservices-for-the-heck-of-it-12d8ed75550a>

## 管理微服务可能会变得很困难

![](img/35cd78475f8631b1a4d11fec51919a52.png)

德米特里·马什金在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上的照片

整体服务与微服务的争论已经持续了一段时间。我知道许多开发人员开始将他们的单片应用程序分解成几个微服务。我是其中之一。

微服务已经在开发人员社区中获得了很大的人气，我们不能忽视单片架构在某些应用中的优势。

您需要根据许多因素做出正确的体系结构选择，比如您团队的能力和您项目的部署是如何完成的。

## 将整体服务转换为微服务

我们有一个单片应用程序，随着时间的推移，它变得很大，内存占用也增加了。我们花了几年的时间，我们庞大的项目代码库爆炸了。我们不得不转移到更大的服务器来容纳应用程序。由于单个应用程序中有太多的功能，甚至代码库也变得难以管理。

我们有一个大项目，有很多后台工作人员和数百个 API。我们希望减少内存占用以提高性能，并减少 EC2 实例的大小。

我们开始将项目分解成多个逻辑部分。这样做有各种各样的**挑战**:

*   重组代码。*无法避免*。
*   维护多个项目和存储库。
*   部署脚本中的更改
*   需要完整的测试周期。

同时，我们看到了微服务的以下优点:

*   更小的内存占用
*   不同的项目可以独立扩展
*   云基础设施的成本节约

我们把这个项目分成 5 个较小的项目。分开他们是一场噩梦。我们将许多公共代码转移到了不同的库中。重新组织代码，对测试用例进行变更，以及部署变更所花费的时间比我们估计的要多得多(像往常一样)。

> 几周后我们开始看到优势。我们可以分别扩展不同的功能，这是我们以前无法做到的。它还降低了我们的云基础架构成本。

# 看好微服务

![](img/f38b6eb4f22b6fe77705c9a8e694e4fe.png)

照片由 [Japheth 桅杆](https://unsplash.com/@japhethmast?utm_source=medium&utm_medium=referral)在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄

最初对系统的改变反应良好。感觉微服务方法是解决所有问题的灵丹妙药。我们开始把同样的哲学应用到每一件事情上，实际上是每一件事情。在接下来的几个月里，我们创建了许多微服务。

> 创建新的代码库是令人兴奋的，这些代码库被单独部署并得到适当的维护。

我们忘乎所以，很快我们就有了 20 多个独立运行的服务。

# 严酷的事实

![](img/4844d191f10a895714bdc917cb177b62.png)

奥崔·塔赫里在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄的照片

没过多久，我们就开始面临这么多存储库的问题。在以下情况下更改如此多的代码库并不容易:

*   依赖代码库。
*   配置更改。
*   获得各种资源。
*   一项服务中的变化会影响其他服务。
*   基础设施变化

我们重新分析了我们的方法，并停止创建不必要的服务。事实上，我们联合了一些服务来简化变更。可维护性工作也减少了。

在这个过程中，我们创建了一些微服务，但我们这样做是因为需要它们。

# 包装它

微服务是一个很棒的概念，我喜欢它，并以一种好的和坏的方式使用它。我们将它视为解决问题的方法，同时，由于过度使用微服务，我们制造了相当多的复杂性。

在我看来，就像任何其他概念一样，在有需要的时候使用微服务。不要因为是热门话题就随便用。

*喜欢体验媒介的自己？考虑通过注册会员* *来支持我和其他作家* [***。会员每月只需 5 美元，它支持我们，作家，没有额外的费用。如果你这样做，我会收到一部分费用，不会多花你多少钱。谢谢大家！***](https://singhamrit.medium.com/membership)