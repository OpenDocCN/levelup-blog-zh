<html>
<head>
<title>Understanding Blockchain Fundamentals: Proof-Of-Work</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">了解区块链基础知识:工作证明</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/understanding-bitcoin-fundamentals-proof-of-work-dad1db12ad0a?source=collection_archive---------14-----------------------#2022-05-02">https://levelup.gitconnected.com/understanding-bitcoin-fundamentals-proof-of-work-dad1db12ad0a?source=collection_archive---------14-----------------------#2022-05-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="4c57" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">比特币区块链如何验证交易？</h2></div><h1 id="0ee2" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">预读</h1><p id="9b1e" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">在我开始之前，我喜欢<a class="ae lw" href="https://www.youtube.com/watch?v=XLcWy1uV8YM" rel="noopener ugc nofollow" target="_blank">这个<strong class="lc iu"> YouTube视频</strong> </a>来理解区块链网络使用的共识机制。<a class="ae lw" href="https://medium.com/p/9f039078aade" rel="noopener">在我之前的博文中，我讨论过<strong class="lc iu">比特币基本面</strong> </a>的基础知识。</p><h1 id="455a" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">什么是共识？</h1><p id="5647" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">一般来说，共识是网络中一组独立实体之间的一种协议形式。例如，在一个民主国家里，我们可以说选举实行多数票制，我们就谁应该成为国家领导人达成共识。由网络上成千上万个独立节点组成的分布式系统通常采用某种算法来达成共识。分布式一致性算法旨在允许一组计算机对系统中的一个节点提出的单个值达成一致(而不是编造随机值)。分布式系统面临的挑战是消息可能会丢失，或者机器可能会出现故障。Paxos保证，只要参与算法的大多数系统可用，一组机器将选择单个建议值。(<a class="ae lw" href="https://people.cs.rutgers.edu/~pxk/417/notes/content/consensus.html" rel="noopener ugc nofollow" target="_blank">来源:罗格斯大学</a></p><h1 id="8325" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">为什么需要共识模型？</h1><p id="f93b" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">在一般的数据库应用程序中，比如说一份医疗报告。通常，单个用户(管理员)或程序拥有访问数据库的权限。这意味着单个用户可以读取、写入或修改任何数据库记录。在医疗数据库的情况下，它将是关于不同患者的信息。通常，其他任何人都无权访问该帐户。因此，伪装成程序(比如病毒——特洛伊木马或间谍软件)的恶意用户或程序可以删除您的帐户或添加一个条目，说明您欠该机构10，000美元。工作证明是使用的第一个共识模型。在这篇博文中，我们将深入探讨工作证明共识模型。</p><h1 id="8c97" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">区块链共识模型</h1><p id="c6ee" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">如前一篇博文所述，区块链是一个分布式账本和自治系统。这意味着没有一个中央系统来维护系统的真值。贡献来自成千上万的用户(分布式网络的一部分)，使其正常运行。因此，以医疗记录应用程序上的恶意用户为例，他说您欠该机构10，000美元，其他成千上万的用户会将该索赔标记为欺诈。这是在分布式账本上使用一致算法的第一个显著优势。</p><h1 id="110f" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">一致性算法的基本特征</h1><p id="e37a" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">在现实世界的分布式分类帐中，我们需要以下属性来支持网络:</p><ul class=""><li id="46bd" class="lx ly it lc b ld lz lg ma lj mb ln mc lr md lv me mf mg mh bi translated">可靠性</li><li id="e2ba" class="lx ly it lc b ld mi lg mj lj mk ln ml lr mm lv me mf mg mh bi translated">公平</li><li id="644b" class="lx ly it lc b ld mi lg mj lj mk ln ml lr mm lv me mf mg mh bi translated">实时保证</li><li id="329d" class="lx ly it lc b ld mi lg mj lj mk ln ml lr mm lv me mf mg mh bi translated">效率</li><li id="7638" class="lx ly it lc b ld mi lg mj lj mk ln ml lr mm lv me mf mg mh bi translated">透明度</li></ul><p id="6249" class="pw-post-body-paragraph la lb it lc b ld lz ju lf lg ma jx li lj mn ll lm ln mo lp lq lr mp lt lu lv im bi translated">在我们了解比特币网络所使用的共识算法之前，让我们先来讨论和了解一下比特币上的共识算法旨在解决的问题——双重花费。</p><figure class="mr ms mt mu gt mv gh gi paragraph-image"><div role="button" tabindex="0" class="mw mx di my bf mz"><div class="gh gi mq"><img src="../Images/ed22823fac66cfc8ebe92d5491821958.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*tGCZGVRBwyKz5Eqo.png"/></div></div></figure><h1 id="41eb" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">什么是双重消费？</h1><p id="6bbd" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">我们有一个由Blob、Alice、John和Kara组成的区块链网络。假设鲍勃只有10美元。他可以继续给爱丽丝寄10美元。如果Bob是恶意的，并且网络处理交易很慢，他可以在短时间内给John发送10美元。这可能会导致网络出现问题，因为网络丢失了Bob从未丢失的10美元。传统上，这被称为双重支出，并使用集中式网络来解决。像Visa、Mastercard和UPI这样的货币网络使用运行数据库来验证交易的中央服务器来解决这个问题。</p><h1 id="a42c" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">工作证明</h1><p id="58cd" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">工作证明是比特币网络上的一种共识机制。这是一种使用大量计算工作来阻止、检测和消除恶意用户欺诈性操纵比特币区块链的算法。工作证明于2009年在比特币网络上推出，旨在解决重复消费的问题(如上所述)。</p><p id="37d5" class="pw-post-body-paragraph la lb it lc b ld lz ju lf lg ma jx li lj mn ll lm ln mo lp lq lr mp lt lu lv im bi translated">修订一下，区块链是一个区块列表。在比特币区块链上，每个区块都保存着不同用户所做交易的相关信息。因此，区块链持有的交易列表如下所示:</p><ul class=""><li id="ac19" class="lx ly it lc b ld lz lg ma lj mb ln mc lr md lv me mf mg mh bi translated">2022年1月1日，鲍勃付给爱丽丝10美元。</li><li id="1271" class="lx ly it lc b ld mi lg mj lj mk ln ml lr mm lv me mf mg mh bi translated">2022年1月10日，爱丽丝付给约翰5美元。</li><li id="fc20" class="lx ly it lc b ld mi lg mj lj mk ln ml lr mm lv me mf mg mh bi translated">2022年2月1日，爱丽丝付给卡拉5美元。</li></ul><p id="81fc" class="pw-post-body-paragraph la lb it lc b ld lz ju lf lg ma jx li lj mn ll lm ln mo lp lq lr mp lt lu lv im bi translated">实际上，一个区块链可以包含100个事务。</p><figure class="mr ms mt mu gt mv gh gi paragraph-image"><div role="button" tabindex="0" class="mw mx di my bf mz"><div class="gh gi mq"><img src="../Images/b233a0ba9c9a810ab59537ad9789eaee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*VphwBxcazIQIuVax.png"/></div></div></figure><h1 id="3e64" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">工作证明的一点历史</h1><p id="1efb" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated"><a class="ae lw" href="https://bitcoin.org/bitcoin.pdf" rel="noopener ugc nofollow" target="_blank">根据中本聪关于比特币的原始论文</a>，比特币区块链上使用的工作证明算法源自亚当·贝克的Hashcash ( <a class="ae lw" href="http://www.hashcash.org/papers/hashcash.pdf" rel="noopener ugc nofollow" target="_blank">论文</a>，<a class="ae lw" href="https://en.wikipedia.org/wiki/Hashcash" rel="noopener ugc nofollow" target="_blank">维基</a>)。根据Satoshi的论文，“工作证明包括扫描一个值，当散列时，如SHA-256，散列从几个零开始。所需的平均工作量与所需的零位数成指数关系，并且可以通过执行单个散列来验证。”系统设置了一个约束，即要生成的块的散列应该以预定数量的零开始。零的数量越多，对计算能力的要求就越高。这个想法“…要求用户计算一个中等难度，但不复杂的函数…”是由辛西娅·德沃克和莫尼·诺尔在他们1992年的论文“通过处理或打击垃圾邮件来定价”中提出的。</p><h1 id="f4d7" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">电子邮件中的用法</h1><p id="f423" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">Hashcash是一种加密的基于哈希的工作证明算法，它需要计算可选择的工作量，但可以有效地验证证明。它最初用于识别电子邮件中的垃圾邮件。对于电子邮件的使用，hashcash戳记的文本编码被添加到电子邮件的头部，以证明发送者在发送电子邮件之前已经花费了适量的CPU时间来计算戳记。换句话说，由于发件人花了一定的时间来生成戳记并发送电子邮件，因此他们不太可能是垃圾邮件发送者。接收者可以以可忽略的计算成本来验证该戳记是有效的。然而，找到具有必要属性的头的唯一已知方法是强力，尝试随机值直到找到答案；虽然测试单个字符串很容易，但满意的答案很少，需要大量的尝试才能找到答案。假设是，垃圾邮件发送者的商业模式依赖于他们以最小的每条消息成本发送大量电子邮件的能力，如果他们发送的每条垃圾邮件甚至有很小的成本，他们将不再盈利。收件人可以验证发件人是否进行了这样的投资，并使用结果来帮助过滤电子邮件。</p><h1 id="3a3a" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">新块是如何生成的？</h1><p id="473c" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">参与区块链并提供计算能力来创建新区块的用户称为矿工。矿工们大约需要10分钟才能找到一个新的区块，用于扩展区块链和进行新的交易。人们可能会问，为什么创建一个新的块几乎需要10分钟？矿工最终会做什么？要回答这些问题，让我们回头来看看积木的设计。区块链中的每个块都有一个加密哈希(数字签名或密码)，使块有效。还值得注意的是，区块链中的每个块都与前面的块链接在一起。区块链的矿工们最终为该区块创建了一个新密码。但是，根据设计，加密哈希只能猜测。猜测过程之后是验证，以便哈希与块保存的数据一致。这个猜测过程大约需要10分钟(平均)。一旦区块的哈希得到验证，参与猜测的矿工就可以从他们最终完成的工作中获得报酬。</p><h1 id="947f" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">工作证明的特征</h1><h1 id="cbb9" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">安全的</h1><p id="82f7" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">工作证明共识算法是安全的。以下两个理由将有助于论证这一情况。</p><p id="4bdc" class="pw-post-body-paragraph la lb it lc b ld lz ju lf lg ma jx li lj mn ll lm ln mo lp lq lr mp lt lu lv im bi translated"><strong class="lc iu">原因#1 </strong>:矿工在工作证明机制上的不当行为导致矿工被踢出局。</p><p id="cade" class="pw-post-body-paragraph la lb it lc b ld lz ju lf lg ma jx li lj mn ll lm ln mo lp lq lr mp lt lu lv im bi translated"><strong class="lc iu">原因#2 </strong>:为了控制共识机制，一个恶意用户需要控制网络上51%的用户。这相当于比特币网络上的数千亿美元。考虑到进行虚假交易所涉及的计算能力和金钱的数量，我们可以假设共识协议是安全的。</p><h1 id="ba04" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">共识；一致</h1><p id="5b55" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">当一个新的区块加入网络时，矿工广播交易的细节；所有其他矿工然后验证新区块的新细节。如果大多数矿工同意，他们离开他们的计算，并使用广播块作为真理。为了理解这一点，一组矿工试图解决一个谜题(给新区块的密码)，最快找到答案的矿工将获得比特币奖励，其他矿工必须同意该解决方案。这确保了系统中的每个矿工在网络中具有准确的块细节。这导致了共识(或广泛的一致)。</p><h1 id="7035" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">工作证明的问题</h1><p id="5cae" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">虽然工作证明共识算法非常强大，并且很好地服务于区块链，但是它也存在一些问题。本节讨论困扰使用工作证明的网络的一些问题。</p><h1 id="36c0" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">环境影响</h1><p id="54c0" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated"><a class="ae lw" href="https://www.bbc.com/news/science-environment-56215787" rel="noopener ugc nofollow" target="_blank">根据BBC 2021年</a>的报道，由于其重型防工作共识机制，比特币在2021年1月消耗的能量与荷兰的电力相当。</p><figure class="mr ms mt mu gt mv gh gi paragraph-image"><div role="button" tabindex="0" class="mw mx di my bf mz"><div class="gh gi mq"><img src="../Images/d0ea32bc13dc8572eec92bdbf3687a13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*v8LoEumq7NNfp2i5.png"/></div></div></figure><p id="3bfa" class="pw-post-body-paragraph la lb it lc b ld lz ju lf lg ma jx li lj mn ll lm ln mo lp lq lr mp lt lu lv im bi translated">另据报道，大约三分之二的能源使用来自化石燃料。</p><h1 id="1189" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">无法扩展</h1><p id="3cd1" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">在我们开始之前，让我们试着回答这个问题——为什么可扩展性对区块链来说是个问题？以比特币为例，寻找理想的答案。它每秒处理近7笔交易，而Visa每天处理近1700笔交易。(<a class="ae lw" href="https://101blockchains.com/blockchain-scalability-challenges" rel="noopener ugc nofollow" target="_blank">参考</a>)。这使得比特币区块链严重逊于维萨区块链。比特币网络的链上交易处理能力受限于10分钟的平均块创建时间和1兆字节的原始块大小限制。这些共同限制了网络的吞吐量。(<a class="ae lw" href="https://en.wikipedia.org/wiki/Bitcoin_scalability_problem" rel="noopener ugc nofollow" target="_blank">维基百科</a>)。下图显示了比特币区块链每月的交易数量。注:这是对数标度。2012年的交易量是10万笔，2022年已经增长了1000倍，达到1亿笔。</p><figure class="mr ms mt mu gt mv gh gi paragraph-image"><div role="button" tabindex="0" class="mw mx di my bf mz"><div class="gh gi mq"><img src="../Images/0a2b88d2b9ba3c0e958acac03ced612d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*QqaWX6yUev0Usj7g.png"/></div></div></figure><p id="6c93" class="pw-post-body-paragraph la lb it lc b ld lz ju lf lg ma jx li lj mn ll lm ln mo lp lq lr mp lt lu lv im bi translated">随着区块链中交易数量的增加，交易成本增加，从而对进入的交易施加反压力。这可能意味着，如果用户想要进行小额交易(比如10美元的转账)，总的燃气费(支付给区块链的转账金额)可能会大得多(比如20美元)。这使得区块链在峰值领先期间不可行。</p><p id="21e0" class="pw-post-body-paragraph la lb it lc b ld lz ju lf lg ma jx li lj mn ll lm ln mo lp lq lr mp lt lu lv im bi translated">已经提出了几种解决方案来克服这些限制，例如不同的散列计算方案(例如，<a class="ae lw" href="https://en.wikipedia.org/wiki/Schnorr_signature" rel="noopener ugc nofollow" target="_blank"> Schnorr签名</a>)、将交易验证卸载到第二层系统(例如，<a class="ae lw" href="https://en.wikipedia.org/wiki/Lightning_Network" rel="noopener ugc nofollow" target="_blank"> Lightning系统</a>)以及增加块大小。</p><p id="b605" class="pw-post-body-paragraph la lb it lc b ld lz ju lf lg ma jx li lj mn ll lm ln mo lp lq lr mp lt lu lv im bi translated">比特币网络的可扩展性是一个不断变化的目标，并将随着Web3技术的新进展而改善。</p><h1 id="a773" class="ki kj it bd kk kl km kn ko kp kq kr ks jz kt ka ku kc kv kd kw kf kx kg ky kz bi translated">关键要点</h1><p id="a543" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">总结一下，这篇博文的要点如下:</p><ol class=""><li id="c08f" class="lx ly it lc b ld lz lg ma lj mb ln mc lr md lv nc mf mg mh bi translated">诸如工作证明之类的共识机制非常有用。</li><li id="ea84" class="lx ly it lc b ld mi lg mj lj mk ln ml lr mm lv nc mf mg mh bi translated">工作证明是安全的，并保证在恶意用户攻击下的一致性</li><li id="216b" class="lx ly it lc b ld mi lg mj lj mk ln ml lr mm lv nc mf mg mh bi translated">工作证明共识算法有一些缺点，它对环境有不利影响，并且它不能扩展。</li></ol></div></div>    
</body>
</html>