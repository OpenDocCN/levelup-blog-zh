<html>
<head>
<title>How to use NFS in Kubernetes Cluster — Method 1.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Kubernetes集群中使用NFS—方法1。</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-use-nfs-in-kubernetes-cluster-method-1-4071724af37c?source=collection_archive---------0-----------------------#2020-12-17">https://levelup.gitconnected.com/how-to-use-nfs-in-kubernetes-cluster-method-1-4071724af37c?source=collection_archive---------0-----------------------#2020-12-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="85ad" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在<a class="ae ko" href="https://fabiofernandesx.medium.com/how-to-use-nfs-in-kubernetes-cluster-configuring-the-nfs-server-1bf4116641d4" rel="noopener">上一篇文章</a>中，我们开始了使用NFS服务器将我们应用程序的数据存储到Kubernetes集群的旅程。</p><p id="a9fb" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们现在有一个k8s集群在网络中运行，一个NFS服务器配置了我们需要访问的端点。在本文中，我将向您展示通过持久卷访问NFS的第一种方法。</p><h1 id="74c4" class="kp kq it bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">一般注意事项</h1><h2 id="251d" class="ln kq it bd kr lo lp dn kv lq lr dp kz kb ls lt ld kf lu lv lh kj lw lx ll ly bi translated">文章系列</h2><p id="9e65" class="pw-post-body-paragraph jq jr it js b jt lz jv jw jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn im bi translated">本文是关于Kubernetes使用NFS服务器作为持久性卷来源的系列文章的一部分。以下是本系列的文章列表:</p><ol class=""><li id="e97c" class="me mf it js b jt ju jx jy kb mg kf mh kj mi kn mj mk ml mm bi translated"><a class="ae ko" href="https://fabiofernandesx.medium.com/how-to-use-nfs-in-kubernetes-cluster-configuring-the-nfs-server-1bf4116641d4" rel="noopener">配置NFS服务器</a></li><li id="db15" class="me mf it js b jt mn jx mo kb mp kf mq kj mr kn mj mk ml mm bi translated"><strong class="js iu">方法1 —将NFS驱动器映射到每个节点(本节点)的本地文件夹。</strong></li><li id="9d77" class="me mf it js b jt mn jx mo kb mp kf mq kj mr kn mj mk ml mm bi translated"><a class="ae ko" href="https://fabiofernandesx.medium.com/how-to-use-nfs-in-kubernetes-cluster-method-2-73df4efb4c00" rel="noopener">方法2 —通过永久卷配置直接连接到NFS服务器</a></li><li id="c13d" class="me mf it js b jt mn jx mo kb mp kf mq kj mr kn mj mk ml mm bi translated"><a class="ae ko" href="https://fabiofernandesx.medium.com/how-to-use-nfs-in-kubernetes-cluster-storage-class-ed1179a83817" rel="noopener">创建存储类，通过声明自动创建持久卷</a>。</li></ol><h2 id="7720" class="ln kq it bd kr lo lp dn kv lq lr dp kz kb ls lt ld kf lu lv lh kj lw lx ll ly bi translated">源代码</h2><p id="fe49" class="pw-post-body-paragraph jq jr it js b jt lz jv jw jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn im bi translated">本文中使用的所有文件都发布在这个GitHub资源库中:<a class="ae ko" href="https://github.com/fabiofernandesx/k8s-volumes" rel="noopener ugc nofollow" target="_blank">https://github.com/fabiofernandesx/k8s-volumes</a>。如果您发现需要修复或添加的东西，可以随意克隆它，甚至打开一个拉请求。</p><h2 id="1dae" class="ln kq it bd kr lo lp dn kv lq lr dp kz kb ls lt ld kf lu lv lh kj lw lx ll ly bi translated">家庭实验室</h2><p id="27a7" class="pw-post-body-paragraph jq jr it js b jt lz jv jw jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn im bi translated">对于本系列文章，我将使用我的raspberry pi Kubernetes集群，但是这些命令应该可以在任何环境下工作，包括云和虚拟机。如果你对如何创建一个raspberry pi k8s集群感兴趣，你可以在这里找到它:<a class="ae ko" href="https://medium.com/swlh/yet-another-raspberry-pi-k8s-cluster-ea05fb48e9a8" rel="noopener">又一个Raspberry Pi k8的集群</a>，或者如果你对如何使用虚拟机器创建这个集群感兴趣，你可以看看这个:<a class="ae ko" href="https://fabiofernandesx.medium.com/preparing-virtual-box-vms-to-run-kubernetes-a31c7c851566" rel="noopener">准备虚拟机器来运行Kubernetes </a>。</p><h1 id="bf6e" class="kp kq it bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">将NFS驱动器映射到每个节点的本地文件夹中。</h1><p id="28c4" class="pw-post-body-paragraph jq jr it js b jt lz jv jw jx ma jz ka kb mb kd ke kf mc kh ki kj md kl km kn im bi translated">这种方法基本上包括将NFS端点直接映射到每个节点内的物理文件夹中，并使用持久卷来访问该本地文件夹。</p><p id="bf14" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果我们不能使用永久卷，它们就没有任何意义。因此，对于这个演示，我正在创建简单的网站(只有HTML和一些CSS)。然后，我将在我们的集群中创建持久卷，并用Nginx容器声明这些卷。</p><p id="9a94" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在这个系列文章中，我将展示和使用前三个网站；毕竟，除了NFS端点，其他两个需要相同的配置。</p><p id="01ed" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我开始创建我们的网站。它们本质上是相同的，只是标题和文本不同。</p><p id="c310" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">可以在Github库<a class="ae ko" href="https://github.com/fabiofernandesx/k8s-volumes" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><figure class="mt mu mv mw gt mx gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi ms"><img src="../Images/7a34053cf72c124c2814be73298dfcba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zfekPfwPz2esS98udMu4nQ.png"/></div></div></figure><p id="5c3e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">好了，现在让我们开始创建持久卷。请记住，PV与名称空间无关，所有持久卷都是在名称空间之外创建的，任何应用程序都可以声明一个PV。但是我们会成功的。</p><p id="bfe2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们创建第一个卷文件。它将使用已经在所有节点<code class="fe ne nf ng nh b">/ssd/host-mapped</code>中映射的文件夹(如果您需要关于如何进行此映射的更多信息，请参见这里的<a class="ae ko" href="https://fabiofernandesx.medium.com/how-to-use-nfs-in-kubernetes-cluster-configuring-the-nfs-server-1bf4116641d4" rel="noopener"/>)并创建一个10MB的卷供我们的应用程序使用。</p><figure class="mt mu mv mw gt mx gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi ni"><img src="../Images/407505bea5802772acb7a78d2570f206.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FvGul-FbfqCA88FTeunu_Q.png"/></div></div></figure><p id="2073" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">注意我们使用的是<code class="fe ne nf ng nh b">storageClassName: manual</code>,它没有任何意义，你可以随意标记。在这种情况下，它将帮助k8s将索赔与最合适的持久卷相匹配。</p><p id="cfe7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在，只需运行<code class="fe ne nf ng nh b">kubectl apply</code>命令并用<code class="fe ne nf ng nh b">kubectl get pv</code>检查PV</p><figure class="mt mu mv mw gt mx gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi nj"><img src="../Images/b07568ffbb5e4810fb233357c2292e95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7LSrcg-ANFZ2gWLABAiYdg.png"/></div></div></figure><p id="eed6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">正如您在图像中看到的，卷已创建，但尚未绑定到任何东西(一旦我们创建了声明，就会绑定到任何东西)</p><p id="a119" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">为了使这个PV可用，我们需要为我们的应用程序声明这个空间。与PV不同，永久卷声明(PVC)可以是名称空间的一部分。然后，让我们首先为这个演示创建一个命名空间，然后创建一个PVC来使用这个10MB的可用存储空间。</p><p id="fcf4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们可以通过命令来创建名称空间，但我更喜欢创建单独的文件，以使一切都有良好的文档记录并易于理解。我们可以将多个配置放在一个文件中，但是现在我将展示如何在单独的文件中创建所有内容。</p><figure class="mt mu mv mw gt mx gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/21fb14e2480cdfa2fc7eb5a9b0d59982.png" data-original-src="https://miro.medium.com/v2/resize:fit:1312/format:webp/1*jmr2xmZ9tWmnHOWeD8U14w.png"/></div></figure><p id="db1a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如您所见，名称空间yml文件是“不言自明的”</p><p id="3d9d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">同样的事情再次发生，运行<code class="fe ne nf ng nh b">kubectl apply</code>命令，然后<code class="fe ne nf ng nh b">kubectl get namespaces</code>检查它是否被创建</p><figure class="mt mu mv mw gt mx gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi nl"><img src="../Images/4e9bf36ea53f1a9854b05dea90f89210.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YJUAkSg1rD2fm3eJAvH2OQ.png"/></div></div></figure><p id="6f9e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在我们可以在这个名称空间下创建一个PVC:</p><figure class="mt mu mv mw gt mx gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/15884c8d3ced83a218d74fb52ade486e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1352/format:webp/1*MRNYGUqX0xLnpDuZyNxefQ.png"/></div></figure><p id="51d5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">应用该文件并重新检查PV。PV必须与我们的索赔绑定。</p><figure class="mt mu mv mw gt mx gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi nn"><img src="../Images/e0b3b5606e4e30b4bb57613345957d61.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qmxE3RieJUIkQ8UtYRTK0w.png"/></div></div></figure><p id="474b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">同样的事情从另一方面来说，寻找PVC的信息:</p><figure class="mt mu mv mw gt mx gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi no"><img src="../Images/2b3fed6c02a5e8277bc2e1189fa09e3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RzCxJEmoMuAef8fZYSmAwQ.png"/></div></div></figure><p id="1d8f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在，我们准备创建一个容器来使用这个PVC。我们将创建一个指向该文件夹的Nginx应用程序，然后将我们的HTML复制到那里。</p><p id="9e81" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">该网站必须在这一点上可用。</p><p id="9c97" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">以下是站点应用程序部署yml文件:</p><figure class="mt mu mv mw gt mx gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi np"><img src="../Images/f8809ccc18a41f6f9545aa3d08365d45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*40vmeICBei2YNd-SMCih2A.png"/></div></div></figure><p id="b518" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">只是比别人啰嗦一点。让我来引导您浏览内容:</p><p id="023b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">第1–7行:基本内容，这里我使用一个部署配置，位于名为host-mapped-ngnix的pv-demo名称空间下。我还添加了一个标签host-mapped-site，它将成为该配置文件其余部分的链接。</p><p id="0ac5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">第9行:我告诉k8s只部署这个容器的一个副本</p><p id="74df" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">第18–21行:我正在设置要使用的卷声明，并给它命名</p><p id="8e5b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">第22–27行:是容器本身，我们想要使用什么样的映像(在本例中是Nginx)，什么样的卷挂载，以及它在容器中的映射方式。所以我们告诉大家，主机映射pvc中的所有内容都将被映射为容器中的一个文件夹<code class="fe ne nf ng nh b">/usr/share/nginx/html</code>。</p><p id="7033" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这正是我们发布页面所需要的；Nginx会转到这个文件夹显示默认网站。</p><p id="9096" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们还可以在容器中映射另一个文件夹，比如配置和图像到同一个PVC或另一个PVC。在我们的例子中，我们只需要一个地方来存储一个简单的HTML，但是你得到了这个想法。</p><figure class="mt mu mv mw gt mx gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi nq"><img src="../Images/85b687313b390d94ba1abc1145de69e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Mg3Yj6ktWxsZfMYaviPfKQ.png"/></div></div></figure><p id="afc0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如上图所示，部署、副本集和pod(容器)已经创建并运行。</p><p id="75f0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">最后一步是将我们的页面复制到NFS服务器的文件夹中。你可以按你想的方式做。在这里，我将使用SCP通过命令行直接创建这个副本。</p><figure class="mt mu mv mw gt mx gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi nr"><img src="../Images/3015a2525bbd2fc91672ddca627836a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iMbVZgG7Gym_-je0hVHEFA.png"/></div></div></figure><p id="c140" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">虽然这不是持久卷的范围，我们仍然需要2个以上的文件，使网站可见，并证明它正在工作。</p><p id="6fef" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这个拼图的第一块是服务。k8的集群通过网络服务连接。它有很多优点，但我不想在这里过于深入的理论。</p><p id="6990" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">无论如何，我们需要这个服务基本上运行在pod(或多个pod)之上，它将把所有的传入流量(内部)定向到正确的容器。</p><figure class="mt mu mv mw gt mx gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/1aa3b4f67ef40184c1163f24452b25d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1308/format:webp/1*COyEPDORORVl2AUPz04zcw.png"/></div></figure><p id="f960" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">配置文件很简单，是一个名为host-mapped-service的服务，与之前使用的名称空间相同。</p><p id="3bb0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这里重要的细节是选择器部分；注意，我使用的是在部署配置文件中定义的应用程序名称，以及我们希望流量流动的协议和端口。</p><p id="b1cf" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">你知道这个练习，用<code class="fe ne nf ng nh b">kubectl apply -f</code>命令应用这个文件:</p><figure class="mt mu mv mw gt mx gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi nt"><img src="../Images/41767f5a743768cea0ced3a4e4bfaeed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Pl9Xq1mAF9PhZvz9dxqHEA.png"/></div></div></figure><p id="8ab9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在，我们需要配置入口，使我们的网站完全工作。</p><p id="1ddc" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">要配置我们的入口文件，我们首先需要知道负载平衡器正在使用什么外部IP。输入kubectl get services -A，您将能够看到在所有名称空间中发布的服务。</p><p id="c5fe" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">与我们相关的是负载平衡器的类型，然后检查分配给它的外部IP。在我的例子中是主节点的IP:192 . 168 . 2 . 101</p><figure class="mt mu mv mw gt mx gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi nu"><img src="../Images/a6ea5992b32ff273703047da5e620bbc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bw3S5DCSbxEc6wk4aAJYAA.png"/></div></div></figure><p id="3123" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如你所见，我使用的是随k3s安装的默认负载平衡器应用程序:traefik。这个信息很重要，因为入口配置文件需要特定于它。</p><p id="4e04" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我不打算用一个“招数”来规避DNS配置；毕竟，我的集群没有暴露在本地网络之外，所以这里不允许使用DNS。</p><p id="5377" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">但是我们有<a class="ae ko" href="http://nip.io" rel="noopener ugc nofollow" target="_blank"> nip.io </a>。基本上，你可以用&lt;或&gt;创建一个“即时”DNS。&lt;你要路由的IP&gt;. nip . io</p><p id="b7d3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">对于这个例子，我使用<a class="ae ko" href="http://host-mapped.192.168.2.101.nip.io" rel="noopener ugc nofollow" target="_blank">主机映射. 192.168.2.101.nip.io </a>来访问我的负载平衡器，它可以使用额外的信息(主机映射)将流量定向到集群内我的主机映射服务，然后定向到响应我的应用程序的pod和容器。</p><p id="3723" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">有时候解释比展示更难。如果你有任何问题或者想澄清某一点，请告诉我。</p><p id="f53d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">最终的入口配置文件应该是这样的:</p><figure class="mt mu mv mw gt mx gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi nv"><img src="../Images/6ec886bc17230a4b0979e93222f9b005.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8uJrozAZjwcwxSKxYlJ59w.png"/></div></div></figure><p id="c77a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">基本上，我告诉集群将任何对<a class="ae ko" href="http://host-mapped.192.168.2.101.nip.io" rel="noopener ugc nofollow" target="_blank">主机映射. 192.168.2.101.nip.io </a>的调用重定向到端口80的主机映射服务。</p><p id="e29b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们应用它，我们的网站应该是可见的。</p><figure class="mt mu mv mw gt mx gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi nw"><img src="../Images/866379f5d4bee379fe66d440e1a7914b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cqnUZV_S0y8-36CthmqB1A.png"/></div></div></figure><figure class="mt mu mv mw gt mx gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi nx"><img src="../Images/274fdf49ddc45f9a0de846e89b07c08a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_gh_jHp_KEwa_yOvpmO1xA.png"/></div></div></figure><p id="1a86" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">一切都好；在浏览器中输入<a class="ae ko" href="http://host-mapped.192.168.2.101.nip.io/" rel="noopener ugc nofollow" target="_blank">http://host-mapped.192.168.2.101.nip.io/</a>应该会指引我们到那个网站。</p><figure class="mt mu mv mw gt mx gh gi paragraph-image"><div role="button" tabindex="0" class="my mz di na bf nb"><div class="gh gi ny"><img src="../Images/6df85e1b471e43b2b785c5723a039ed2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5VI5mJpklHbe5KC9pRpz0Q.png"/></div></div></figure><p id="f46c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这就是在Kubernetes中使用NFS服务器和持久卷的第一种方式。</p><p id="264e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这种方法非常好，但是有一些缺点:</p><ul class=""><li id="e07c" class="me mf it js b jt ju jx jy kb mg kf mh kj mi kn nz mk ml mm bi translated">如果您更改了NFS服务器中的任何内容，您必须单独配置节点(通过命令和编辑文件)</li><li id="3701" class="me mf it js b jt mn jx mo kb mp kf mq kj mr kn nz mk ml mm bi translated">对于每个需要永久卷的应用程序，您必须手动配置它。</li></ul><p id="879e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们的下一个方法消除了第一项。</p></div></div>    
</body>
</html>