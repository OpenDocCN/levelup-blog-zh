<html>
<head>
<title>Learn how to create an application to upload files using Spring Boot</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">了解如何创建使用Spring Boot上传文件的应用程序</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/uploading-files-in-spring-boot-a2f6e3f653e1?source=collection_archive---------3-----------------------#2019-10-07">https://levelup.gitconnected.com/uploading-files-in-spring-boot-a2f6e3f653e1?source=collection_archive---------3-----------------------#2019-10-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="b9c2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">嘿，伙计们，在这个博客中，我们将使用Spring Boot构建一个应用程序，用于上传和处理它。这可以是任何文件，但我将用一个简单的文本文件来解释它。让我们开始吧。</p><p id="9341" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">但是在继续之前，我假设你已经知道以下几点。</p><p id="4ed6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">1.Gradle <br/> 2。Spring Boot <br/> 3。Java 8 <br/> 4。REST API</p><p id="8983" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们从<a class="ae kl" href="https://start.spring.io" rel="noopener ugc nofollow" target="_blank"> start.spring.io </a>创建一个新项目。我只添加了两个依赖项，<em class="km"> web </em>和<em class="km"> Lombok </em>。</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi kn"><img src="../Images/2aaeb7943dc1176cb8bb69e384d06b6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*931npp48g-orMlrE6ksOQw.png"/></div></div><figcaption class="kz la gj gh gi lb lc bd b be z dk translated">build.gradle</figcaption></figure><p id="c92c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们将从编写一个简单的REST控制器开始。在这个控制器中，我们有一个处理POST请求的方法，它将要求Spring在客户端中以<em class="km"> MultipartFile </em>对象的形式给出上传的文件。收到文件后，我们将阅读文件中的每一行并打印出来，这只是为了本教程的目的。</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi ld"><img src="../Images/06d50b4d664b42c31d412db4440f7b0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X4joGTXGGvnD6yWkACFPwA.png"/></div></div><figcaption class="kz la gj gh gi lb lc bd b be z dk translated">UploadController.java</figcaption></figure><p id="175f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们<a class="ae kl" href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/beans/factory/annotation/Autowired.html" rel="noopener ugc nofollow" target="_blank">自动连接</a>服务类，它将由Spring作为bean给出，并调用<em class="km"> consumeFile() </em>方法。就是这样。让我们编写处理这一部分的服务类。</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi le"><img src="../Images/181075a23dc30d326f4de86d8aaf8e52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qxtjIOFMvXMrWQ8a-GzcPA.png"/></div></div><figcaption class="kz la gj gh gi lb lc bd b be z dk translated">UploadService.java</figcaption></figure><p id="fac2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们只有一个方法将上传的文件作为一个<em class="km"> MultipartFile </em>对象并处理它。</p><ol class=""><li id="65c5" class="lf lg iq jp b jq jr ju jv jy lh kc li kg lj kk lk ll lm ln bi translated">创建一个多部分文件的<em class="km">输入流</em>。我们使用Java 7的<em class="km"> try-with-resource </em>来自动关闭<em class="km"> InputStream </em>。</li><li id="98d5" class="lf lg iq jp b jq lo ju lp jy lq kc lr kg ls kk lk ll lm ln bi translated">接下来是将<em class="km"> MultipartFile </em>对象中的内容复制到<em class="km"> temp </em>目录中的一个文本文件中。</li><li id="ac24" class="lf lg iq jp b jq lo ju lp jy lq kc lr kg ls kk lk ll lm ln bi translated">接下来，我们读取上一步中刚刚创建的文本文件中的所有行，并打印出来。</li><li id="bc1a" class="lf lg iq jp b jq lo ju lp jy lq kc lr kg ls kk lk ll lm ln bi translated">最后，我们将删除在temp目录下创建的文本文件，因为将其存储在磁盘上是没有意义的。</li></ol><p id="68fe" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">还有另一种方法来消费上传的文件并对其进行操作。是的，我们可以通过<em class="km">缓冲</em>来直接使用<em class="km"> inputStream </em>，而不是创建一个临时文件。这个方法比前一个更有效。下面是这样做的截图。我们创建一个<em class="km"> BufferedReader </em>并使用<em class="km"> lines() </em>方法获取每一行作为<em class="km"> Stream &lt; String &gt; </em>然后处理它，在这种情况下只是将它们打印出来。</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi lt"><img src="../Images/94c77c7ccf05647abf6866c54b3ff091.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vorEVE7aohKkCr8XXXfl6g.png"/></div></div><figcaption class="kz la gj gh gi lb lc bd b be z dk translated">UploadService.java</figcaption></figure><p id="a7fb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">瞧。我们完了。这是一个简短的例子。但是你可以用你的任何逻辑来扩展它。例如，如果您想上传一个电子表格文档中的主数据，您可以很容易地完成。或者，您可以创建一个“文件存储服务”，在内部将上传的文件存储到云存储中，我们可以返回文件的引用(可能是一个短URL)作为响应。有了这个参考，我们可以随时随地获取文件。</p><p id="371e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们运行并测试应用程序。我使用<em class="km"> Gradle wrapper </em>来构建jar，并将其作为独立的应用程序运行，因为Spring将默认提供嵌入式Tomcat服务器。运行下面的命令构建jar并运行应用程序。</p><blockquote class="lu lv lw"><p id="da33" class="jn jo km jp b jq jr js jt ju jv jw jx lx jz ka kb ly kd ke kf lz kh ki kj kk ij bi translated">。/gradlew干净生成</p><p id="1ced" class="jn jo km jp b jq jr js jt ju jv jw jx lx jz ka kb ly kd ke kf lz kh ki kj kk ij bi translated">爪哇罐。/build/libs/upload-demo-0 . 0 . 1-snapshot . jar</p></blockquote><p id="0953" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了测试API，我们可以使用<em class="km">邮递员</em>。下面是控制台中显示的输出。</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi ma"><img src="../Images/3b36cfbaf4392a6e6dd38d3e1efaf2d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*26DcfGckhAWPAv96HdMQNg.png"/></div></div></figure><p id="a4a3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">简单吧？分享您的反馈。感谢您的阅读！</p></div></div>    
</body>
</html>