<html>
<head>
<title>Private Functions Shouldn’t Be Used. Here’s What You Should Do Instead</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">不应该使用私有函数。以下是你应该做的</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/private-functions-shouldnt-be-used-here-s-what-you-should-do-instead-ceec746d5fd5?source=collection_archive---------10-----------------------#2020-10-21">https://levelup.gitconnected.com/private-functions-shouldnt-be-used-here-s-what-you-should-do-instead-ceec746d5fd5?source=collection_archive---------10-----------------------#2020-10-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="a4f3" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">友好的建议，以产生更好的代码库</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/9549aeb15997ff9619e8c251a494abad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*nshHnA-sGXs-OqiB"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的<a class="ae kv" href="https://unsplash.com/@mecdjino?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Sitraka Rakotoarivelo </a>拍摄</figcaption></figure><p id="0816" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">每一个好的编程概念都可以用一个简单的现实生活中的类比来解释。但是私有函数有相似之处吗？</p><p id="a980" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">事实上，没有这样的。有很多私有字段的例子，但是没有私有函数的例子。</p><p id="e59e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">以汽车为例。踩油门是公共功能。它的输出是轮子的运动。这个函数有一个非常复杂的实现，所以需要私有函数。</p><p id="eb2a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">仔细一看，没有一个函数是私有的。所有的都是几个部分公开地相互作用。显然，你在车里能找到的唯一私人功能是在汽车的电脑里，在它的软件里。</p><p id="4987" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">同样的模式随处可见:复杂的功能是通过封装几个相连的部分来实现的。没有任何私有函数直接融合到公共接口中。</p><p id="e8f2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果私有函数没有出现在任何工程分支中，它在面向对象软件中也没有一席之地。</p><p id="1152" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为什么？因为编写私有函数通常是为了从公共函数中抽象出底层细节。换句话说，<strong class="ky ir">私有函数使类违反了单一责任原则。</strong></p><p id="632b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">将代码提取到函数中是很重要的。但是，在这样做的时候，最好抓住这个机会<strong class="ky ir">把它们写成不同类的公共函数</strong>。</p><h1 id="45d7" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">例子</h1><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="f6ba" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">虽然将电子邮件验证提取给<code class="fe mm mn mo mp b">isValidEmail()</code>函数是一个聪明的举动，但是<code class="fe mm mn mo mp b">LoginPresenter</code>仍然忙于电子邮件验证，而不是它真正的工作:在UI和域逻辑之间进行协调。</p><h1 id="40c5" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">将电子邮件验证提取到另一个类</h1><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="1d4d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">通过向<code class="fe mm mn mo mp b">EmailValidator</code>提取电子邮件验证，将自动获得以下好处:</p><ul class=""><li id="39bf" class="mq mr iq ky b kz la lc ld lf ms lj mt ln mu lr mv mw mx my bi translated">没有低级细节的干扰</li><li id="1de7" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr mv mw mx my bi translated">所有的类都是在同一个抽象层次上编写的</li><li id="914a" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr mv mw mx my bi translated"><code class="fe mm mn mo mp b">EmailValidator</code>可重复使用</li><li id="5276" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr mv mw mx my bi translated">电子邮件验证行为可以单独测试</li><li id="5f15" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr mv mw mx my bi translated"><code class="fe mm mn mo mp b">LoginPresenter</code>可以通过提供嘲笑来测试<code class="fe mm mn mo mp b">EmailValidator</code></li></ul></div><div class="ab cl ne nf hu ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ij ik il im in"><p id="2b3c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">另一个问题是私有函数鼓励私有字段的修改。虽然有时这是期望的行为，但私有函数中某个字段的非故意变化往往会被忽略。因此，私有函数增加了意外副作用的可能性。</p><p id="dabd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，私有函数会给你一种封装的错觉。具有讽刺意味的是，私有函数的存在使得打破类的封装变得容易:经常看到程序员在任何机会天真地将访问“私有”改为“公共”，而不必过多考虑它是否安全。</p><h1 id="9a87" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">结论</h1><p id="6abc" class="pw-post-body-paragraph kw kx iq ky b kz nl jr lb lc nm ju le lf nn lh li lj no ll lm ln np lp lq lr ij bi translated">通过系统地将功能提取到专门的类，整个软件架构得到了改进。走这条路首先需要一种不同的心态，但从我的经验来看，它会很快带来回报。</p><p id="2b7e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">进一步阅读:<br/><a class="ae kv" href="https://carlosschults.net/en/are-private-methods-a-code-smell/" rel="noopener ugc nofollow" target="_blank">https://carlosschults . net/en/are-private-methods-a-code-smeet/</a></p></div><div class="ab cl ne nf hu ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ij ik il im in"><h1 id="1cee" class="ls lt iq bd lu lv nq lx ly lz nr mb mc jw ns jx me jz nt ka mg kc nu kd mi mj bi translated">分级编码</h1><p id="f705" class="pw-post-body-paragraph kw kx iq ky b kz nl jr lb lc nm ju le lf nn lh li lj no ll lm ln np lp lq lr ij bi translated">感谢您成为我们社区的一员！<a class="ae kv" href="https://www.youtube.com/channel/UC3v9kBR_ab4UHXXdknz8Fbg?sub_confirmation=1" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir">订阅我们的YouTube频道</strong> </a>或者加入<a class="ae kv" href="https://skilled.dev/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> Skilled.dev编码面试课程</strong> </a>。</p><div class="nv nw gp gr nx ny"><a href="https://skilled.dev" rel="noopener  ugc nofollow" target="_blank"><div class="nz ab fo"><div class="oa ab ob cl cj oc"><h2 class="bd ir gy z fp od fr fs oe fu fw ip bi translated">编写面试问题+获得开发工作</h2><div class="of l"><h3 class="bd b gy z fp od fr fs oe fu fw dk translated">掌握编码面试的过程</h3></div><div class="og l"><p class="bd b dl z fp od fr fs oe fu fw dk translated">技术开发</p></div></div><div class="oh l"><div class="oi l oj ok ol oh om kp ny"/></div></div></a></div></div></div>    
</body>
</html>