<html>
<head>
<title>What’s Mediastreamer2. Introduction</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">什么是Mediastreamer2。介绍</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/whats-mediastreamer2-80fa1c5e617?source=collection_archive---------11-----------------------#2020-09-02">https://levelup.gitconnected.com/whats-mediastreamer2-80fa1c5e617?source=collection_archive---------11-----------------------#2020-09-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/dfd0f28b7024dbf40cf84ed1f03ad35c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ihAeKukZa6fZSuk88JfflQ.png"/></div></div></figure><p id="3873" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">本文是关于使用Mediastreamer2引擎进行实时媒体处理的系列文章的开始。</p><h1 id="5f42" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">介绍</h1><p id="830d" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">Mediastreamer2库旨在构建基于VoIP技术的音频和视频处理/传输系统。由于其多功能性和插件接口，Mediastreamer2不仅可以用于这些系统的开发和原型制作，还可以用于处理其他数据。该库是GPLv3许可的自由软件。</p><p id="032f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">本系列中给出的代码示例演示了如何使用Mediastreamer2处理音频数据，但这并不妨碍您在构建视频处理方案时应用所学到的知识。</p><p id="2f69" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">章节<strong class="ka ir">功能概述</strong>和<strong class="ka ir">过滤器使用示例</strong>将描述如何使用Mediastreamer2和使用现成的Mediastreamer2过滤器编写C应用程序。</p><p id="7598" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">章节<strong class="ka ir">将展示如何开发你自己的过滤器(插件)。对此将给出一个详细的例子。</strong></p><p id="7c4a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">章节<strong class="ka ir">数据移动</strong>将描述Mediastreamer2中的数据移动机制，以帮助您的过滤器更有效地工作。</p><p id="40d8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">调试过滤器在章节<strong class="ka ir">调试工艺过滤器</strong>中讨论，它将向你展示如何找到并修复内存泄漏。</p><p id="f14b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">本系列的最后一章<strong class="ka ir">管理</strong>上的负载讨论了如何使数据流拓扑适应硬件平台的计算能力。</p><h1 id="4fe9" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">第1章功能概述</h1><p id="d3e9" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">Mediastreamer2库是流行的开源VoIP电话项目Linphone背后的媒体引擎:</p><p id="4ca6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae lz" href="https://www.linphone.org/" rel="noopener ugc nofollow" target="_blank">https://www.linphone.org/</a></p><p id="c616" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">它实现了Linphone的所有音频和视频功能。在此页面上可以看到该引擎功能的详细列表:</p><p id="d409" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae lz" href="http://linphone.org/technical-corner/mediastreamer2" rel="noopener ugc nofollow" target="_blank">http://linphone.org/technical-corner/mediastreamer2</a></p><p id="5ae4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">可以使用Mediastreamer2的平台列表可以由运行Linphone的平台列表确定，即IOS、Android、macOS、Windows desktop、Gnu / Linux。如果我们谈论硬件平台，媒体流2是朴实无华的，可以在个人电脑、电话、拉斯贝里·皮·3B等设备上工作。这次演讲将基于在个人电脑上使用Ubuntu操作系统的例子。</p><p id="c51d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在故事的过程中，将会涉及到在Linux终端上工作和用C语言编程的最低限度的技能。</p><p id="c8e5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在此页面上可以看到该引擎功能的详细列表:</p><p id="3ea3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae lz" href="https://www.linphone.org/technical-corner/mediastreamer2" rel="noopener ugc nofollow" target="_blank"><em class="ma">https://www.linphone.org/technical-corner/mediastreamer2</em></a></p><p id="4739" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">源代码在这里:</p><p id="582f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae lz" href="https://gitlab.linphone.org/BC/public/mediastreamer2" rel="noopener ugc nofollow" target="_blank"> GitLab </a></p><p id="4954" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">它的创建历史并不完全清楚，但从源代码来看，他以前使用过Glib库，这似乎暗示了它与GStreamer之间可能的远亲关系。相比之下，Mediastreamer2看起来更轻便。但是使用了相同的想法——通过松散连接的过滤器进行数据处理——具有严格定义的接口的软件模块。</p><p id="3b66" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">GStreamer的一个显著区别是，整个Mediastreamer2过滤器都经过了全面测试，而在GStreamer网站上，有一个特殊的表格，其中说明了每个过滤器是否经过测试。</p><p id="f8c2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Linphone的第一个版本出现在2001年，由两名来自格勒诺布尔的法国人编写:Linphone的原作者Simon Morlat和Jehan Monnier，他们之前在惠普电信部门工作了多年。原来此刻，Mediastreamer2已经存在和发展了快20年了。</p><p id="fea9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Mediastreamer2的核心是一种称为“数据流”的架构。这种架构的一个例子如图1.1所示。</p><figure class="mc md me mf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mb"><img src="../Images/af0725206ac236f843280090a125bd4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YaV3k-xIfbZKxNIV_j05lg.png"/></div></div><figcaption class="mg mh gj gh gi mi mj bd b be z dk translated">图1.1:数据流架构</figcaption></figure><p id="a5d7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在这种体系结构中，数据处理算法不是由程序代码指定的，而是由连接的程序模块的方案(图)指定的，程序模块可以以任何(几乎任何)顺序构建。这些模块被称为过滤器。</p><p id="2e5f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这种方法使得以连接到处理和传输方案的一组过滤器的形式实现媒体处理功能成为可能，例如VoIP电话的RTP流量。同时，开发人员有机会从过滤器内部的工作方式中抽象出来，从而在解决高层次任务时不会在细节上浪费时间。</p><p id="1324" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">将过滤器组合成任意方案的能力，新过滤器的简单开发，作为独立的单独库的Mediastreamer2的实现，允许您在其他项目中使用它。此外，该项目不一定来自VoIP领域，因为可以添加自己动手的过滤器。</p><h1 id="336e" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">1.1<br/>现成过滤器清单</h1><p id="7d6d" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">默认提供的过滤器集合非常丰富，正如已经提到的，可以用您自己设计的过滤器进行扩展。在本节中，我们将列出Mediastreamer2中包含的现成过滤器。在过滤器的简短描述之后，显示类型名称，当在程序代码中创建该过滤器的实例时使用该名称。</p><p id="fbc4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> —声音过滤器</strong></p><p id="5772" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">-捕获并播放音频:</strong></p><ul class=""><li id="5d4e" class="mk ml iq ka b kb kc kf kg kj mm kn mn kr mo kv mp mq mr ms bi translated">alsa(Linux):Alsa女士写，ALSA女士读</li><li id="4487" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">Android原生声音(lib media):MS _ ANDROID _ SOUND _ WRITE，<br/> MS_ANDROID_SOUND_READ</li><li id="4a50" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">音频队列服务(Mac OS X):MS _ AQ _写，<br/>MS _ AQ _读</li><li id="bce1" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">音频单元服务(Mac OS X)</li><li id="ea29" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">Arts (Linux): MS_ARTS_WRITE，MS_ARTS_READ</li><li id="1d81" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">direct sound(Windows):MS _ wins DDS _ WRITE，<br/>MS _ wins DDS _ READ</li><li id="8226" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">文件播放器(raw/wav/pcap文件)(Linux): <br/> MS_FILE_PLAYER</li><li id="d085" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">文件播放器(raw/wav文件)(Windows): <br/> MS_WINSND_READ</li><li id="ce7f" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">文件记录(wav文件)(Linux): MS_FILE_REC</li><li id="f103" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">文件记录(wav文件)(Windows): MS_WINSND_WRITE</li><li id="dffe" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">Mac音频单元(Mac OS X)</li><li id="3b7e" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">MME (Windows)</li><li id="b431" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">OSS (Linux): MS_OSS_WRITE，MS_OSS_READ</li><li id="7685" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">波迪奥(麦克·OS X)</li><li id="07a8" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">脉冲音频(Linux): MS_PULSE_WRITE，MS_PULSE_READ</li><li id="bde1" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">Windows声音(Windows)</li></ul><p id="8095" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">-音频编码/解码滤波器:</strong></p><ul class=""><li id="1659" class="mk ml iq ka b kb kc kf kg kj mm kn mn kr mo kv mp mq mr ms bi translated">g . 711 a-法律:ALAW女士，ALAW女士</li><li id="15f1" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">g . 711-法律:乌拉夫·德克女士、乌拉夫·恩茨女士</li><li id="3c60" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">G.722: MS_G722_DEC，MS_G722_ENC</li><li id="b364" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">G.726: MS_G726_32_ENC，MS_G726_24_ENC，<br/> MS_G726_16_ENC</li><li id="c0f1" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">GSM: MS_GSM_DEC，MS_GSM_ENC</li><li id="f35c" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">线性икм:MS _ L16 _ ENC，MS_L16_DEC</li><li id="fdd8" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">Speex: MS_SPEEX_ENC，MS_SPEEX_DEC</li></ul><p id="e1ac" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">-声音处理过滤器:</strong></p><ul class=""><li id="caac" class="mk ml iq ka b kb kc kf kg kj mm kn mn kr mo kv mp mq mr ms bi translated">声道转换(单声道-&gt;立体声，立体声-&gt;单声道):<br/> MS_CHANNEL_ADAPTER</li><li id="1976" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">会议:CONF女士</li><li id="9686" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">DTMF信号发生器:MS_DTMF_GEN</li><li id="4faa" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">回声消除(speex): MS_SPEEX_EC</li><li id="8612" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">均衡器:MS _均衡器</li><li id="fce7" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">混音器:MS_MIXER</li><li id="56be" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">丢包补偿器(PLC): MS_GENERIC_PLC</li><li id="cef4" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">重采样器:MS_RESAMPLE</li><li id="73ac" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">音调检测器:MS_TONE_DETECTOR</li><li id="e943" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">音量控制和信号电平测量:<br/> MS_VOLUME</li></ul><p id="9b9a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> —视频过滤器:</strong></p><p id="597f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">-捕捉和播放视频的滤镜:</strong></p><ul class=""><li id="7b32" class="mk ml iq ka b kb kc kf kg kj mm kn mn kr mo kv mp mq mr ms bi translated">Android捕获</li><li id="6fb4" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">Android play</li><li id="4ddd" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">AV基础采集(iOS)</li><li id="3b0a" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">AV基础游戏(iOS)</li><li id="dadb" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">DirectShow捕获(Windows)</li><li id="dcd0" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">DrawDib播放(Windows)</li><li id="6599" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">外部播放—向顶层发送视频</li><li id="ef35" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">GLX play (Linux): MS_GLXVIDEO</li><li id="769d" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">MIRE——合成动画:MS_MIRE</li><li id="8f37" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">OpenGL播放器(Mac OS X)</li><li id="f178" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">OpenGL ES2 play (Android)</li><li id="0993" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">Quicktime捕获(Mac OS X)</li><li id="ac48" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">SDL戏剧</li><li id="49e7" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">显示静止图像:<br/> MS_STATIC_IMAGE</li><li id="c043" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">Linux视频(V4L)捕获(Linux): MS_V4L</li><li id="b738" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">用于Linux 2 (V4L2)捕获的视频(Linux): MS_V4L2_CAPTURE</li><li id="8224" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">视频4windows (DirectShow)捕获(windows)</li><li id="940c" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">视频4windows (DirectShow)捕获(Windows CE)</li><li id="2525" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">Windows视频(vfw)捕获(Windows)</li><li id="5c02" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">XV play (Linux)</li></ul><p id="0351" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">-视频编码/解码过滤器:</strong></p><ul class=""><li id="e4f6" class="mk ml iq ka b kb kc kf kg kj mm kn mn kr mo kv mp mq mr ms bi translated">H.263，h . 263–1998，MP4V-ES，JPEG，MJPEG，Snow: <br/> MS_MJPEG_DEC，MS_H263_ENC，MS_H263_DEC</li><li id="240a" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">H.264(仅解码器):MS_H264_DEC</li><li id="a083" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">Theora: MS_THEORA_ENC，MS_THEORA_DEC</li><li id="2bb5" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">VP8: MS_VP8_ENC，MS_VP8_DEC</li></ul><p id="7f9f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">-视频处理过滤器:</strong></p><ul class=""><li id="8dc6" class="mk ml iq ka b kb kc kf kg kj mm kn mn kr mo kv mp mq mr ms bi translated">JPEG快照</li><li id="9cc6" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">像素格式转换器:MS_PIX_CONV</li><li id="eda9" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">尺寸调整器</li></ul><p id="cfa5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">-通用过滤器:</strong></p><ul class=""><li id="9d6d" class="mk ml iq ka b kb kc kf kg kj mm kn mn kr mo kv mp mq mr ms bi translated">执行线程之间的数据块交换:<br/> MS_ITC_SOURCE，MS_ITC_SINK</li><li id="dc36" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">将来自多个输入的数据块重定向到一个输出:<br/> MS_JOIN</li><li id="0b8b" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">RTP接收/发送:MS_RTP_SEND，MS_RTP_RECV</li><li id="ebd9" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">将输入数据复制到多个输出的分离器:<br/> MS_TEE</li><li id="ea62" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">匹配的负载:MS_VOID_SINK</li><li id="876a" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">沉默之源:MS_VOID_SOURCE</li></ul><p id="f5a0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> —现有插件列表:</strong></p><p id="4ba3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">-音频:</strong></p><ul class=""><li id="805b" class="mk ml iq ka b kb kc kf kg kj mm kn mn kr mo kv mp mq mr ms bi translated">AMR-NB编码器/解码器</li><li id="f59c" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">G.729编解码器</li><li id="ba6c" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">iLBC编码器/解码器</li><li id="2d85" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">丝绸编码器/解码器</li></ul><p id="ca26" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">-视频</strong>:</p><ul class=""><li id="e961" class="mk ml iq ka b kb kc kf kg kj mm kn mn kr mo kv mp mq mr ms bi translated">H.264软件编码器</li><li id="93f2" class="mk ml iq ka b kb mt kf mu kj mv kn mw kr mx kv mp mq mr ms bi translated">具有硬件加速的H.264 V4L2编码器/解码器</li></ul><h1 id="2ab3" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">第二章</h1><h1 id="4b45" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">入门指南</h1><p id="36f8" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">在本章中，我们将在计算机上安装Mediastreamer2，并基于它构建我们的第一个应用程序。</p><p id="c4a2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在Linux Ubuntu计算机或虚拟机上安装Mediastremer2不需要任何特殊技能。在下文中，“$”符号将表示用于输入命令的shell提示符。那些。如果在清单中，您在一行的开头看到这个符号，那么这是一行，其中显示了要在终端中执行的命令。</p><p id="5707" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">假设在本章描述的步骤中，您的计算机可以访问互联网。</p><h1 id="ea03" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">2.1软件包libmediastremer-dev <br/>安装</h1><p id="d3c8" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">启动终端并键入命令:</p><pre class="mc md me mf gt my mz na nb aw nc bi"><span id="0391" class="nd kx iq mz b gy ne nf l ng nh">$ sudo apt-get update</span></pre><p id="386f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">系统将提示您输入密码进行更改，输入密码，软件包管理器将更新其数据库。然后，您需要执行:</p><pre class="mc md me mf gt my mz na nb aw nc bi"><span id="da35" class="nd kx iq mz b gy ne nf l ng nh">$ sudo apt-get install libMediastreamer2-dev</span></pre><p id="da40" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">该命令将自动下载并安装所需的依赖包和Mediastreamer2库本身。下载的依赖deb包的总大小大约是35 MB。可以使用以下命令找到关于已安装软件包的详细信息:</p><pre class="mc md me mf gt my mz na nb aw nc bi"><span id="45c2" class="nd kx iq mz b gy ne nf l ng nh">$ dpkg -s libMediastreamer2-dev</span></pre><p id="a0e9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">样本响应:</p><pre class="mc md me mf gt my mz na nb aw nc bi"><span id="fadf" class="nd kx iq mz b gy ne nf l ng nh">Package: libMediastreamer2-dev<br/>Status: install ok installed<br/>Priority: optional<br/>Section: libdevel<br/>Installed-Size: 244<br/>Maintainer: Ubuntu Developers &lt;ubuntu-devel-discuss@lists.ubuntu.com&gt;<br/>Architecture: amd64<br/>Source: linphone<br/>Version: 3.6.1-2.5<br/>Depends: libMediastreamer2-base3 (= 3.6.1-2.5), libortp-dev<br/>Description: Linphone web phone's media library - development files<br/>Linphone is an audio and video internet phone using the SIP protocol. It<br/>has a GTK+ and console interface, includes a large variety of audio and video<br/>codecs, and provides IM features.<br/>.<br/>This package contains the development libraries for handling media operations.<br/>Original-Maintainer: Debian VoIP Team &lt;pkg-voip-maintainers@lists.alioth.debian.org&gt;<br/>Homepage: <a class="ae lz" href="http://www.linphone.org/" rel="noopener ugc nofollow" target="_blank">http://www.linphone.org/</a></span></pre><h1 id="0ce5" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">2.2开发工具<br/>安装</h1><p id="0c1d" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">安装C编译器和相关工具:</p><pre class="mc md me mf gt my mz na nb aw nc bi"><span id="7dcb" class="nd kx iq mz b gy ne nf l ng nh">$ sudo apt-get install gcc</span></pre><p id="1336" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们通过请求编译器版本来检查结果:</p><pre class="mc md me mf gt my mz na nb aw nc bi"><span id="cf99" class="nd kx iq mz b gy ne nf l ng nh">$ gcc --version</span></pre><p id="94ff" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">答案应该是这样的:</p><pre class="mc md me mf gt my mz na nb aw nc bi"><span id="9076" class="nd kx iq mz b gy ne nf l ng nh">gcc (Ubuntu 5.4.0-6ubuntu1~16.04.12) 5.4.0 20160609 Copyright (C) 2015 Free Software Foundation, Inc. This is free software; see the source for copying conditions. There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</span></pre><h1 id="67bd" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">2.3构建和运行<br/>第一个应用程序</h1><p id="b8cd" class="pw-post-body-paragraph jy jz iq ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">在<em class="ma"> home </em>文件夹中为我们的项目创建一个新文件夹<em class="ma"> mstutorial </em>:</p><pre class="mc md me mf gt my mz na nb aw nc bi"><span id="5a9c" class="nd kx iq mz b gy ne nf l ng nh">$ mkdir ~/mstutorial</span></pre><p id="93c0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">要创建一个试用应用程序，请使用您喜欢的文本编辑器并创建一个名为mstest.c的C程序文件，其内容如下:</p><pre class="mc md me mf gt my mz na nb aw nc bi"><span id="6817" class="nd kx iq mz b gy ne nf l ng nh">/* File mstest.c Trial application. */</span><span id="0c42" class="nd kx iq mz b gy ni nf l ng nh">#include "stdio.h"<br/>#include &lt;Mediastreamer2/mscommon.h&gt;<br/>int main()<br/>{<br/>  ms_init();<br/>  printf ("Mediastreamer2 is ready.\n");<br/>}</span></pre><p id="55c0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">它初始化Mediastreamer2，打印一个问候语，然后退出。</p><p id="0e93" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">保存文件，并使用以下命令编译示例应用程序:</p><pre class="mc md me mf gt my mz na nb aw nc bi"><span id="cc8f" class="nd kx iq mz b gy ne nf l ng nh">$ gcc mstest.c -o mstest `pkg-config Mediastreamer2 - -libs - -cflags`</span></pre><p id="abf6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">请注意，该行</p><pre class="mc md me mf gt my mz na nb aw nc bi"><span id="26e3" class="nd kx iq mz b gy ne nf l ng nh">`pkg-config Mediastreamer2 - -libs - -cflags`</span></pre><p id="6e06" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">用引号括起来，位于键盘上与“~”符号相同的位置。</p><p id="216f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果文件不包含错误，那么在编译之后，mstest文件将出现在目录中。运行程序:</p><pre class="mc md me mf gt my mz na nb aw nc bi"><span id="1574" class="nd kx iq mz b gy ne nf l ng nh">$ ./mstest</span></pre><p id="ec31" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">结果会是这样的:</p><pre class="mc md me mf gt my mz na nb aw nc bi"><span id="4ffd" class="nd kx iq mz b gy ne nf l ng nh">ALSA lib conf.c:4738:(snd_config_expand) Unknown parameters 0<br/>ALSA lib control.c:954:(snd_ctl_open_noupdate) Invalid CTL default:0<br/>ortp-warning-Could not attach mixer to card: Invalid argument<br/>ALSA lib conf.c:4738:(snd_config_expand) Unknown parameters 0<br/>ALSA lib pcm.c:2266:(snd_pcm_open_noupdate) Unknown PCM default:0<br/>ALSA lib conf.c:4738:(snd_config_expand) Unknown parameters 0<br/>ALSA lib pcm.c:2266:(snd_pcm_open_noupdate) Unknown PCM default:0<br/>ortp-warning-Strange, sound card HDA Intel PCH does not seems to be capable of anything, retrying with plughw...<br/>Mediastreamer2 is ready.</span></pre><p id="41f0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在这个清单中，我们看到了用于控制声卡的ALSA库显示的错误消息。Mediastreamer2的开发者自己认为这些消息不需要被关注。在这种情况下，我们会不由自主地认同他们。</p><p id="2c60" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在我们已经准备好使用Mediastreamer2了。我们安装了Mediastreamer2库、编译工具，并使用一个示例应用程序，验证工具已配置，Mediastreamer2正在成功初始化。</p><p id="0ec0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">(下一篇文章<a class="ae lz" rel="noopener ugc nofollow" target="_blank" href="/chapter-3-examples-of-using-filters-612f2121301">什么是Mediastreamer2。使用</a>的过滤器示例<br/></p></div></div>    
</body>
</html>