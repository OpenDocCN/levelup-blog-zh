<html>
<head>
<title>The Two Easiest Ways To Share Your ReactJS Project As a Widget</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将ReactJS项目作为小部件共享的两种最简单的方法</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/the-two-easiest-ways-to-share-your-reactjs-project-as-a-widget-971dfef66d98?source=collection_archive---------0-----------------------#2019-08-14">https://levelup.gitconnected.com/the-two-easiest-ways-to-share-your-reactjs-project-as-a-widget-971dfef66d98?source=collection_archive---------0-----------------------#2019-08-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="7c84" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">尽管开发人员多年来一直在成功地构建React应用程序，但我注意到他们中的许多人很难将他们的应用程序作为一个小部件共享，以便其他用户可以嵌入到他们的网站上。</p><p id="d377" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">不幸的是，大部分可用的信息都是针对那些要么熟悉黑客<a class="ae ko" href="https://medium.com/@sagiv.bengiat/integrate-react-with-other-applications-and-frameworks-94d443e3cc3f" rel="noopener"> Webpack </a>要么需要大量<a class="ae ko" href="https://medium.com/@sumn2u/loading-third-party-library-in-reactjs-b01c049df8d5" rel="noopener">第三方库</a>的开发者。此外，如果您像我一样，在<a class="ae ko" href="https://www.costansin.com/the-advantages-of-docker/" rel="noopener ugc nofollow" target="_blank"> Docker环境</a>中运行ReactJS项目，那么集成这些类型的解决方案可能并不容易。</p><p id="3d87" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">因此，本文是我自己的尝试，向您展示两种最简单的方法，使您的ReactJS项目或其特定组件作为小部件可用，以便其他用户可以在他们的网站上使用。选择哪一个取决于你是想选择iFrame解决方案还是Javascript解决方案。在文章的最后，我将分享一些指导方针来帮助你决定哪种解决方案最适合你。</p></div><div class="ab cl kp kq hx kr" role="separator"><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku"/></div><div class="im in io ip iq"><h1 id="e445" class="kw kx it bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">先决条件</h1><p id="0f5a" class="pw-post-body-paragraph jq jr it js b jt lu jv jw jx lv jz ka kb lw kd ke kf lx kh ki kj ly kl km kn im bi translated">为了这个项目，让我们使用由<strong class="js iu"> create-react-app </strong>创建的样板应用程序创建一个简单的React应用程序:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="7f64" class="mi kx it me b gy mj mk l ml mm">$ create-react-app hello-react<br/>$ npm start</span></pre><p id="f48c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这将在一个新的浏览器窗口中打开您的应用程序，在<code class="fe mn mo mp me b">http://localhost:3000</code>上呈现主要组件:</p><figure class="lz ma mb mc gt mr gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/d5f2c0a2b6d9edd26286dbbb395ecdc8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1322/format:webp/1*vGD5w9-uoriVlTVO-ClINA.png"/></div></figure><p id="2c8d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">此外，让我们旋转一个web服务器，它将提供一个简单的html页面，稍后我们将在其中嵌入我们的小部件。我建议使用<a class="ae ko" href="https://www.npmjs.com/package/http-server" rel="noopener ugc nofollow" target="_blank"> http-server </a>:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="67ce" class="mi kx it me b gy mj mk l ml mm">$ sudo npm install -g http-server</span></pre><p id="5836" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">创建一个简单的html文件，我们称之为<code class="fe mn mo mp me b">index.html</code>:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="76c1" class="mi kx it me b gy mj mk l ml mm">&lt;html&gt;                       <br/>  Hello World<br/>&lt;/html&gt;</span></pre><p id="653e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">启动http服务器:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="46cb" class="mi kx it me b gy mj mk l ml mm">$ http-server</span></pre><p id="1265" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这将运行一个本地http服务器，您可以在<a class="ae ko" href="http://localhost:8080:" rel="noopener ugc nofollow" target="_blank"> http://localhost:8080: </a>上打开一个新的浏览器窗口来查看页面</p><figure class="lz ma mb mc gt mr gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/d98dd4318252ec48f1bf3adaa27fe9ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1106/format:webp/1*NqAftHKzGryuKfWrPZhE0A.png"/></div></figure><p id="85c8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">概括地说，我们有一个运行spicy React徽标的React应用程序，以及一个呈现静态html页面的简单http服务器。我们的目标是将React应用作为一个小部件嵌入到html页面中。酷，让我们继续我们的第一个方法。</p><h1 id="93f9" class="kw kx it bd ky kz mv lb lc ld mw lf lg lh mx lj lk ll my ln lo lp mz lr ls lt bi translated">ReactJS以iFrame方式制作小部件</h1><p id="ef5d" class="pw-post-body-paragraph jq jr it js b jt lu jv jw jx lv jz ka kb lw kd ke kf lx kh ki kj ly kl km kn im bi translated">使用iFrames既简单又安全。如果您的组件需要特定的维度(比如时钟或日历)，这可能是一个非常可行的方法。这里不打算说太多，所以让我们直接跳到如何使用iFrames显示来自另一个网站的相同组件的代码。编辑前面的<code class="fe mn mo mp me b">index.html</code>(或创建它的副本)并粘贴以下代码:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="e380" class="mi kx it me b gy mj mk l ml mm">&lt;html&gt;<br/>  &lt;iframe src="http://localhost:3000"&gt;&lt;iframe&gt;<br/>&lt;/html&gt;</span></pre><p id="a1cf" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这将把React应用程序作为iFrame呈现在我们的静态页面中:</p><figure class="lz ma mb mc gt mr gh gi paragraph-image"><div class="gh gi na"><img src="../Images/ae81c7c7d20f2a3f059d52e69a6558d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1032/format:webp/1*qo5EP7F7DMTIieDIDjBEGA.png"/></div></figure><p id="ecfc" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">完美又轻松！</p><p id="8999" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在，如果您想将特定组件呈现为小部件，只需将iFrame源代码替换为正确的路径。例如，假设我们想要通过以下路径呈现React应用程序内部的时钟组件:<a class="ae ko" href="http://localhost:3000/parent-component/clock-component," rel="noopener ugc nofollow" target="_blank">http://localhost:3000/parent-component/Clock-component，</a>然后我们简单地引用iFrame:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="8dc2" class="mi kx it me b gy mj mk l ml mm">&lt;html&gt;<br/>  &lt;iframe src="http://localhost:3000/<a class="ae ko" href="http://localhost:3000/parent-component/clock-component," rel="noopener ugc nofollow" target="_blank">parent-component/clock-component</a>"&gt;&lt;iframe&gt;<br/>&lt;/html&gt;</span></pre><h1 id="3753" class="kw kx it bd ky kz mv lb lc ld mw lf lg lh mx lj lk ll my ln lo lp mz lr ls lt bi translated">ReactJS以Javascript方式制作小部件</h1><p id="bd69" class="pw-post-body-paragraph jq jr it js b jt lu jv jw jx lv jz ka kb lw kd ke kf lx kh ki kj ly kl km kn im bi translated">另一种方法，我称之为Google嵌入小部件的方式，就是使用Javascript标签。这比之前的iFrame方法稍微复杂一些。使用这种方法的一个原因是，如果你想让你的用户完全控制你的小部件在他们网站上的混合方式(比如CSS，dimensions等等)。</p><p id="e390" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">虽然这种方法一开始可能会令人困惑，但实际上，我们将模仿React在其主入口点上呈现其组件的方式。让我们快速回顾一下React是如何呈现其父组件的。但是首先，让我们构建React项目:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="487f" class="mi kx it me b gy mj mk l ml mm">$ npm run build</span></pre><p id="18c4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这将创建一个优化的生产构建，它将分别在<code class="fe mn mo mp me b">/build</code>和<code class="fe mn mo mp me b">/build/static</code>文件夹中生成一个<code class="fe mn mo mp me b">index.html</code>文件(React应用程序的主要入口点)和一个缩小的React javascript文件。让我们仔细看看<code class="fe mn mo mp me b">index.html</code>文件:</p><figure class="lz ma mb mc gt mr"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="aecf" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您可以看到构建操作创建了一个名为<code class="fe mn mo mp me b">/static/js/main.c9cd54b9.chunk.js</code>的缩小版React应用程序——注意，您环境中的实际名称可能不同。还要注意，这个Javascript文件是在<code class="fe mn mo mp me b">root</code>元素(<code class="fe mn mo mp me b">&lt;div <em class="nd">id</em>="root"&gt;&lt;/div&gt;</code>)中呈现的。</p><p id="7a21" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这一切意味着什么？基本上，我们可以模仿这种行为，并修改我们的静态html文件，如下所示:</p><figure class="lz ma mb mc gt mr"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="65aa" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">默认情况下，Create React App会生成一个构建，假设您的应用程序托管在服务器根目录下。要覆盖它，请在您的<code class="fe mn mo mp me b">package.json</code>中指定<code class="fe mn mo mp me b">homepage</code>，例如:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="3025" class="mi kx it me b gy mj mk l ml mm">"homepage": "http://mywebsite.com/relativepath",</span></pre><p id="3b39" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这将让Create React App正确推断要在生成的HTML文件中使用的根路径。这篇文章详细解释了这个过程:<a class="ae ko" href="https://create-react-app.dev/docs/deployment" rel="noopener ugc nofollow" target="_blank">https://create-react-app.dev/docs/deployment</a>。</p><p id="e44d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">或者，在我看来更容易，我会简单地为小部件的需要单独构建同一个项目。然后，我将更改路由逻辑(例如通过React-Router-v4)来设置小部件的默认路径。</p><h1 id="c76d" class="kw kx it bd ky kz mv lb lc ld mw lf lg lh mx lj lk ll my ln lo lp mz lr ls lt bi translated">iFrames与Javascript小部件</h1><p id="020d" class="pw-post-body-paragraph jq jr it js b jt lu jv jw jx lv jz ka kb lw kd ke kf lx kh ki kj ly kl km kn im bi translated">这两种方法都相对简单，所以下一个问题是，走哪条路——iframe还是Javascript？</p><p id="5e62" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这里不做过多的讨论，我认为如果你想让你的小部件更美观(比如css、颜色、尺寸等等)，你应该使用iFrames。</p><p id="10ef" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果你想让用户根据自己的需要控制小部件，那么就用Javascript解决方案。</p><p id="2228" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果你有任何问题让我知道。</p><p id="872f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">关于我</strong></p><p id="7132" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我是一名<a class="ae ko" href="https://www.jamesattard.com" rel="noopener ugc nofollow" target="_blank">技术和商业顾问</a>，专攻软件开发、系统架构、数据工程和新兴技术。</p></div></div>    
</body>
</html>