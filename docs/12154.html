<html>
<head>
<title>Setting up GoogleMaps API on React.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在React.js上设置GoogleMaps API</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/setting-up-googlemaps-api-on-react-js-33c37b9eb63f?source=collection_archive---------4-----------------------#2022-05-19">https://levelup.gitconnected.com/setting-up-googlemaps-api-on-react-js-33c37b9eb63f?source=collection_archive---------4-----------------------#2022-05-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/d98f5f203957509e1a24b7b7d6d8edfe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*iReGwQyEHhyn1jsD.png"/></div></div></figure><p id="9885" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在我的一个项目中，我决定集成谷歌地图API。我很快发现网上有很多文档，但是它们都有不同的实现Google Maps API的方法。尽管Google有关于在React.js中使用Google Maps API的文档，但我发现很难理解。因此，在谷歌搜索了许多使用谷歌地图API的不同方法后，我想我应该推出一个我认为最简单的入门指南。</p></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><p id="42d9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">首先，导航到<a class="ae ld" href="https://developers.google.com/maps" rel="noopener ugc nofollow" target="_blank">https://developers.google.com/maps</a>开始。你需要在Google的web开发者网站上注册来获得一个API密匙。他们有几个API可以和Maps API一起使用，但是现在，我们只需要“Maps Javascript API”、“Geocoding API”、“T10”、“Places API”来开始地图和自动完成功能。一旦你得到了你的API密匙，建议保持它的安全，尤其是如果你打算把它上传到Github的话。我们将使用另一个节点包来帮助我们进行设置，而不是使用Google的文档。</p><pre class="le lf lg lh gt li lj lk ll aw lm bi"><span id="e0c6" class="ln lo iq lj b gy lp lq l lr ls">npm i @react-google-maps/api</span></pre><p id="bbb1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们将使用这个包来运行我们的地图。这基本上是在地图组件中获得地图渲染所需的代码。</p><pre class="le lf lg lh gt li lj lk ll aw lm bi"><span id="41e6" class="ln lo iq lj b gy lp lq l lr ls">import { GoogleMap, useLoadScript } from '@react-google-maps/api';</span><span id="ddab" class="ln lo iq lj b gy lt lq l lr ls">const libraries = ["places"]</span><span id="1b4e" class="ln lo iq lj b gy lt lq l lr ls">export default function Map() {</span><span id="17d4" class="ln lo iq lj b gy lt lq l lr ls"><em class="lu">// Loads the map using API KEY</em></span><span id="34d5" class="ln lo iq lj b gy lt lq l lr ls">const { isLoaded } = useLoadScript({</span><span id="c799" class="ln lo iq lj b gy lt lq l lr ls">    googleMapsApiKey: &lt;YOUR API KEY HERE&gt;,</span><span id="0789" class="ln lo iq lj b gy lt lq l lr ls">    libraries</span><span id="7257" class="ln lo iq lj b gy lt lq l lr ls">});</span><span id="8796" class="ln lo iq lj b gy lt lq l lr ls"><em class="lu">// This returns while map is being loaded</em></span><span id="148e" class="ln lo iq lj b gy lt lq l lr ls">if (!isLoaded) return &lt;div&gt;Loading...&lt;/div&gt;</span><span id="8f58" class="ln lo iq lj b gy lt lq l lr ls">return (<br/>    &lt;GoogleMap <br/>        zoom={9}<br/>        center={{lat: -74, lng: 40.7}} <br/>        mapContainerClassName='map-container'<br/>    &gt;&lt;/GoogleMap&gt;<br/>    )<br/>}</span></pre><p id="8beb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">谷歌地图使用纬度和经度来确定位置。中心值将决定地图的中心位置。在这种情况下，{纬度:-74，液化天然气:40.7}将以纽约市为中心。缩放值决定了渲染时地图的初始缩放值。该值的范围从0到20，0对应于一直缩小。</p></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><p id="7b7c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们将需要设计GoogleMap组件的样式，以便您可以在窗口中看到它。您可以在CSS文件中或内嵌样式化组件。这取决于您，但是我将在样式表中对它进行样式化。</p><pre class="le lf lg lh gt li lj lk ll aw lm bi"><span id="34e7" class="ln lo iq lj b gy lp lq l lr ls">// App.css</span><span id="fbee" class="ln lo iq lj b gy lt lq l lr ls">.map-container {<br/>    height: 100vh;<br/>    width: 100%<br/>}</span></pre><p id="a5bb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">那很容易！现在我们应该在窗口上有一个地图渲染。但是我们可能想给我们的地图增加更多的功能，而不仅仅是在地图上滚动…如果能够在地图上搜索地点不是很好吗？</p></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><p id="8d0f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这就是Places API的用武之地。让我们继续安装更多的包来帮助利用位置API。</p><pre class="le lf lg lh gt li lj lk ll aw lm bi"><span id="f1ab" class="ln lo iq lj b gy lp lq l lr ls">npm i use-places-autocomplete    &lt;-- Accesses the Places API<br/>npm i @reach/combobox            &lt;-- Gives us a search box</span></pre><p id="6f23" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们将搜索框构建在它自己的组件中</p><pre class="le lf lg lh gt li lj lk ll aw lm bi"><span id="5f71" class="ln lo iq lj b gy lp lq l lr ls">** Map Component **<br/>return (<br/>    &lt;&gt;<br/>      &lt;Search /&gt;           &lt;--<br/>      &lt;GoogleMap <br/>         zoom={9}<br/>         center={{lat: -74, lng: 40.7}} <br/>         mapContainerClassName='map-container'<br/>       /&gt;<br/>    &lt;/&gt;<br/> )</span></pre><figure class="le lf lg lh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lv"><img src="../Images/650cf84b3d49624ebc32390d89e50f9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dT1hCWmQswEqbw7WNy-aAQ.png"/></div></div><figcaption class="lw lx gj gh gi ly lz bd b be z dk translated">自动完成组件</figcaption></figure><p id="5e7b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">那可是一大堆代码。</strong></p><p id="d0e5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为了使事情变得简单，<strong class="ka ir"> usePlacesAutocomplete() </strong>让我们能够对它的行为方式设置许多不同的选项。我在这里使用了两个选项:</p><p id="064a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">位置&amp;半径:</strong>{纬度:-74，lng: 40.7} &amp;半径100 * 1000。</p><ul class=""><li id="89f4" class="ma mb iq ka b kb kc kf kg kj mc kn md kr me kv mf mg mh mi bi translated">如果放在requestOptions中，这两个值必须一起声明</li><li id="c1d1" class="ma mb iq ka b kb mj kf mk kj ml kn mm kr mn kv mf mg mh mi bi translated">位置经过{纬度，液化天然气}</li><li id="214c" class="ma mb iq ka b kb mj kf mk kj ml kn mm kr mn kv mf mg mh mi bi translated">半径以米为单位。100 * 1000米等于100公里</li></ul><p id="dd6f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">去抖:</strong> 500</p><ul class=""><li id="799b" class="ma mb iq ka b kb kc kf kg kj mc kn md kr me kv mf mg mh mi bi translated">限制搜索查询。这将停止查询，直到输入字段不变。如果它没有检测到变化，将启动搜索</li><li id="5a41" class="ma mb iq ka b kb mj kf mk kj ml kn mm kr mn kv mf mg mh mi bi translated">值为500毫秒</li></ul><p id="956c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Combobox为我们提供了一个与谷歌地图兼容的搜索框，从而节省了我们的时间。</p><p id="6f61" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你也可以在这些github仓库上寻找更多信息:<a class="ae ld" href="https://github.com/wellyshen/use-places-autocomplete" rel="noopener ugc nofollow" target="_blank">https://github.com/wellyshen/use-places-autocomplete</a>https://github.com/JustFly1984/react-google-maps-apiT2</p></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><p id="3c35" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">目前，谷歌向使用谷歌地图平台的开发者提供300美元的初始积分和每月200美元的积分。他们有一个现收现付的结构，这里简单介绍一下:【https://mapsplatform.google.com/pricing/<a class="ae ld" href="https://mapsplatform.google.com/pricing/" rel="noopener ugc nofollow" target="_blank"/></p><p id="0193" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你想了解更多或者你被卡住了，你可以参考这个视频:<a class="ae ld" href="https://www.youtube.com/watch?v=2po9_CIRW7I&amp;t=593s" rel="noopener ugc nofollow" target="_blank">https://www.youtube.com/watch?v=2po9_CIRW7I&amp;t = 593s</a></p><p id="02d0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">谷歌地图API的功能比我之前介绍的要多得多。它具有诸如方向、放置标记和自定义地图样式等功能。然而，这个指南应该有希望让你开始并熟悉Google Maps API是如何工作的，这样你就可以继续使用它，让它满足你的需要。</p></div></div>    
</body>
</html>