# æ‹‰å§†è¾¾å†·å¯åŠ¨ï¼Œè¯­è¨€å¯¹æ¯”ğŸ•µ â„ï¸ (2018)

> åŸæ–‡ï¼š<https://levelup.gitconnected.com/lambda-cold-starts-language-comparison-%EF%B8%8F-a4f4b5f16a62>

![](img/c1521ac8649414fe972a339a47396dae.png)

ç”±[çº¦ä¹¦äºšÂ·å„å°”](https://unsplash.com/photos/-87JyMb9ZfU?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)åœ¨ [Unsplash](https://unsplash.com/search/photos/comparison?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) ä¸Šæ‹æ‘„çš„ç…§ç‰‡

*è‡ªä»å†™äº†è¿™ç¯‡æ–‡ç« æˆ‘è¿˜å†™äº†* [*ä¸€ç¯‡ 2019 æ›´æ–°*](/aws-lambda-cold-start-language-comparisons-2019-edition-ï¸-1946d32a0244) *ï¼*

èµ°å‘æ— æœåŠ¡å™¨æ¯”ä»¥å¾€ä»»ä½•æ—¶å€™éƒ½æ›´æœ‰åˆ©å¯å›¾ï¼Œä½†æ— æœåŠ¡å™¨çš„è­¦å‘Šæ€»æ˜¯è¶Šæ¥è¶Šå¤šã€‚é¿å…å†·å¯åŠ¨æ˜¯æ‹¥æœ‰æ•æ·ç”¨æˆ·ä½“éªŒçš„ä¸€ä¸ªé‡è¦éƒ¨åˆ†ï¼Œé€‰æ‹©ä¸€ç§è¯­è¨€æ¥å¸®åŠ©ä½ å®ç°è¿™ä¸€ç‚¹å¾ˆé‡è¦ï¼

## å†·å¯åŠ¨ï¼Ÿ

åœ¨æ— æœåŠ¡å™¨ä¸–ç•Œä¸­çš„â€œå†·å¯åŠ¨â€,æ˜¯åœ¨æŸä¸ªè®¾å®šçš„æ—¶é—´æ®µå†…ç¬¬ä¸€æ¬¡æœ‰è¯·æ±‚è¦æ±‚æ‰§è¡Œæ‚¨çš„ä»£ç ã€‚å› ä¸ºä½ åœ¨ä¸€ä¸ªæ²¡æœ‰æœåŠ¡å™¨çš„ä¸–ç•Œé‡Œï¼Œä¸éœ€è¦ä¸ºæœåŠ¡å™¨æ—¶é—´ä»˜è´¹ï¼Œä½ çš„å‡½æ•°æˆ–â€œlambda ä»£ç â€åªåœ¨æ¯ä¸ªè¯·æ±‚çš„åŸºç¡€ä¸Šæ‰§è¡Œã€‚

ä½†äº‹å®å¹¶éå¦‚æ­¤ï¼Œäº‹å®ä¸Šä½ çš„ lambda å‡½æ•°å®é™…ä¸Šæ˜¯ä¸ºä½ éƒ¨ç½²åˆ°ä¸€ä¸ªå®¹å™¨ä¸­çš„ï¼Œå¹¶ä¸”æœ‰ä¸€å®šçš„ç”Ÿå­˜æ—¶é—´ã€‚è™½ç„¶æ­¤ä»£ç æ˜¯â€œæ´»åŠ¨çš„â€,ä½†å®ƒä¸éœ€è¦é‡æ–°åˆå§‹åŒ–ï¼Œå¹¶ä¸”å“åº”é€Ÿåº¦å¿«å¾—å¤šï¼Œå› æ­¤è¢«è®¤ä¸ºæ˜¯â€œçƒ­çš„â€ã€‚è¿™æ˜¯æ— æœåŠ¡å™¨çš„ï¼ŒAWS å¤„ç†ç®¡ç†æœåŠ¡å™¨ã€å®¹å™¨å’Œæ‰©å±•çš„æŠ½è±¡ã€‚é€šå¸¸ä½ çš„ä»£ç æœ‰ 30-45 åˆ†é’Ÿçš„å¯¿å‘½ï¼

ä¸‹é¢æ˜¯å®Œå…¨ç›¸åŒçš„ lambda å‡½æ•°è¿è¡Œä¸¤æ¬¡çš„è¯·æ±‚è·Ÿè¸ªã€‚

![](img/a5ea3e69d85d61bf9a8f9e3ac51e8001.png)

è¯·æ±‚è·Ÿè¸ªä»è‡ªåŠ¨æ°”è±¡ç«™ X å°„çº¿æ•è·çš„â€œå†·â€å¯åŠ¨

æ‚¨å¯ä»¥åœ¨è·Ÿè¸ªä¸­çœ‹åˆ°ï¼Œåœ¨å¤–éƒ¨å‡½æ•°`AWS::Lambda`å°†ä»£ç ç§»äº¤ç»™æˆ‘çš„å‡½æ•°ä»£ç `AWS::Lambda::Function`ä¹‹å‰ï¼Œå¤§çº¦éœ€è¦ 650msï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œè¿˜éœ€è¦ä¸€æ®µåˆå§‹åŒ–æ—¶é—´ã€‚è¿™å°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„å†·å¯åŠ¨ï¼

![](img/ad2eb367e03e49202a6027ea2b8b5435.png)

è¯·æ±‚è·Ÿè¸ªâ€œçƒ­â€lambda å‡½æ•°

â€œå†·â€åŠŸèƒ½æ¯”â€œçƒ­â€åŠŸèƒ½æ…¢ 50 å€ä»¥ä¸Šã€‚æ›´é‡è¦çš„æ˜¯ï¼Œè¿™äº›æ˜¯ç®€å•åœ°è¿”å›â€œhello worldâ€çš„æµ‹è¯•å‡½æ•°ï¼Œå…·æœ‰ä¾èµ–æ€§æˆ–å®é™…æ‰§è¡Œæœ‰ç”¨è®¡ç®—çš„å‡½æ•°å¯èƒ½æ›´ç³Ÿã€‚

## **æ–¹æ³•è®º**

æˆ‘å†³å®šæµ‹è¯•æ‰€æœ‰æœ€æ–°çš„è¯­è¨€ï¼ŒNodejs8ï¼Œc#.net2ï¼ŒJava8ï¼ŒGo1.x & Python3ã€‚æˆ‘ä»æ§åˆ¶å°åˆ›å»ºäº†æ¯ä¸ª lambda å‡½æ•°ï¼Œä¿ç•™äº†é»˜è®¤çš„â€œhello worldâ€æ—¥å¿—ã€‚æˆ‘åˆ†åˆ«ä½¿ç”¨äº† 128mbã€1024mb å’Œ 3008mb çš„å†…å­˜ã€‚ç„¶åæˆ‘åˆ›å»ºäº†ä¸‰ä¸ª[æ­¥éª¤å‡½æ•°](https://aws.amazon.com/step-functions/)æ¥è§¦å‘æ¯ä¸ªå†…å­˜ç»„çš„æ‰€æœ‰ä½œä¸šï¼Œå¹¶é…ç½®äº†ä¸€ä¸ª cloudwatch è°ƒåº¦æ¥æ¯å°æ—¶è§¦å‘ä¸€æ¬¡ã€‚æˆ‘æ¯éš”è‡³å°‘ 7 ä¸ªå°æ—¶å›åˆ° [AWS X å°„çº¿](https://aws.amazon.com/xray/)ï¼Œè®°å½•å®ƒåœ¨è¿‡å» 6 ä¸ªå°æ—¶è§‚å¯Ÿåˆ°çš„å¹³å‡å€¼ã€‚

## **ç»“æœ**

> å†…å­˜åˆ†å‰²åœ¨è¿™é‡Œå¾ˆé‡è¦ï¼Œå› ä¸ºåˆ†é…ç»™ lambda å‡½æ•°çš„å†…å­˜å¢åŠ ï¼Œæ‰€ä»¥å®ƒçš„ [CPU æ—¶é—´ä¹Ÿçº¿æ€§å¢åŠ ã€‚](https://forums.aws.amazon.com/message.jspa?messageID=588722)

![](img/0c8a547e0a5bb8f299329e831c699dd6.png)

å¾ˆæ˜æ˜¾ï¼Œpython æ˜¯è¿™é‡Œæœ€å¼ºçš„ç©å®¶ï¼Œå®ƒä»¥ 128mb çš„å†…å­˜åœ¨å„ä¸ªé¢†åŸŸå‡»è´¥äº†å¤§å¤šæ•°è¯­è¨€ã€‚

è¿ç§»åˆ° 1024mb å†…å­˜ä½¿ golangã€nodejs & java å‡å°‘äº† 25%ï¼Œè€Œ python å’Œã€‚å‡€åˆ©æ¶¦ä¸‹é™äº† 30%ã€‚ä¸ 128mb çš„åŸºæ•°ç›¸æ¯”ï¼Œ3008mb åœ¨ pythonã€goã€node å’Œ java ä¸­å‡å°‘äº†çº¦ 42â€“45 %,è€Œ node ä»…å‡å°‘äº† 37%ã€‚

![](img/08a915292809d6a7567686cb78aea6de.png)

Lambda çš„è¯­è¨€æ—¶é—´è½´

æˆ‘å¾ˆæƒŠè®¶åœ°çœ‹åˆ° golang çš„å†·å¯åŠ¨æ—¶é—´ï¼Œä¸ nodejs ç›¸ä¼¼ã€‚æˆ‘çš„æœ€ä½³çŒœæµ‹æ˜¯å¹³å°ä¸Šçš„è¯­è¨€æˆç†Ÿåº¦å¼€å§‹å‘æŒ¥ä½œç”¨ã€‚ç”±äºå®ƒæœ€è¿‘äº 2018 å¹´ 1 æœˆå‘å¸ƒï¼Œä½ å¯ä»¥æ¨æµ‹ä¼šçœ‹åˆ°æ›´å¤šçš„æ”¹è¿›ã€‚

![](img/5bc082b946cb22dadeb9a78368891400.png)

å¹¶åˆ—æ¯”è¾ƒ

## **å…³äºå®šä»·çš„ä¸€å¥è¯**

Lambda çš„å®šä»·å®Œå…¨åœ¨ GB/s å·¦å³ï¼Œæ‰€ä»¥å®ƒæ˜¯è¿è¡Œæ—¶é—´å’Œèµ„æºæœ€å°åŒ–çš„å¹³è¡¡ã€‚

ä»¥ **70 rps** æˆ–**æ¯å¤© 100ï¼Œ000** æ¬¡ï¼Œæˆ–**æ¯æœˆ 300 ä¸‡**ä¸ªè¯·æ±‚è¿è¡Œ lambda å‡½æ•°ï¼Œå¹³å‡æ¯ä¸ªè¯·æ±‚è¿è¡Œ **0.5** ç§’ã€‚ç­‰åŒäº:

![](img/463dfa1d67e7095cb0fbdf71e24e3180.png)

AWS å®šä»·æ˜¯çº¿æ€§çš„ã€‚1024 æ¯” 128 è´µ 8 å€ã€‚3008 æ¯” 128 è´µ 24 å€ã€‚

å¯¹æ­¤è¦æœ‰æ‰€ä¿ç•™ï¼Œå› ä¸ºæ ¹æ®æ‚¨çš„å·¥ä½œè´Ÿè½½å¢åŠ å†…å­˜å’Œå¯ç”¨ CPUï¼Œå¯ä»¥æ˜¾è‘—å‡å°‘è¿è¡Œæ—¶é—´ã€‚æ­£å¦‚å‰å§†Â·åº·å®é›„è¾©åœ°è¯´çš„é‚£æ ·[â€˜è¶Šå¿«è¶Šä¾¿å®œâ€™](https://medium.com/@jconning/aws-lambda-faster-is-cheaper-6bf32f58d741)ï¼

## ç°å®ä¸–ç•Œ

ç”¨ lambda å‡½æ•°æ„å»ºæ—¶ï¼Œå†·å¯åŠ¨æ˜¯ä¸€ä¸ªå…³é”®è€ƒè™‘å› ç´ çš„çœŸå®ä¾‹å­ã€‚ä¸‹é¢æ˜¯æˆ‘åœ¨[ä¸Šä¸€ç¯‡åšæ–‡](https://medium.com/@nathan.malishev/going-serverless-on-aws-b6d78b43e691)ä¸­çš„[æ¼”ç¤º](http://accents.nathanmalishev.com)ï¼Œåœ¨é‚£é‡Œæˆ‘ä½¿ç”¨é…ç½®äº† 512mb çš„ nodejs å‡½æ•°æ„å»ºäº†ä¸€ä¸ªæ— æœåŠ¡å™¨åº”ç”¨ã€‚

![](img/1a7a9b6d53056dc081c28ef886420704.png)

çœŸå®ä¸–ç•Œâ€œå†·â€è¯·æ±‚è·Ÿè¸ª

å†·è¯·æ±‚éœ€è¦ 1.8 ç§’ï¼Œè€Œçƒ­è¯·æ±‚éœ€è¦ 281 æ¯«ç§’ï¼Œå¢åŠ äº† 6 å€ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œè®©ä½ çš„æœåŠ¡åœ¨ lambda å‡½æ•°ä¸Šé«˜åº¦åˆ†è§£ï¼Œç­‰å¾… 2-3 ç§’çš„å“åº”å¹¶ä¸å¥½ç©ã€‚å¹¸å¥½[å´”ç°](https://medium.com/u/d00f1e6b06a2?source=post_page-----a4f4b5f16a62--------------------------------)æœ‰ä¸€ç¯‡[å…³äºæš– lambda åŠŸèƒ½çš„å¤§æ–‡ç« ](https://hackernoon.com/im-afraid-you-re-thinking-about-aws-lambda-cold-starts-all-wrong-7d907f278a4f)ã€‚

![](img/338642b4c4588b4571f5e8eb368dc9f6.png)

çœŸå®ä¸–ç•Œâ€œçƒ­â€è¯·æ±‚è·Ÿè¸ª

æ„Ÿè°¢é˜…è¯»æˆ‘çš„æ–‡ç« ï¼Œå¦‚æœä½ å–œæ¬¢å®ƒï¼Œè¯·ä¸€å®šè¦é¼“æŒï¼

## å‚è€ƒ

[](https://blog.newrelic.com/2017/06/20/lambda-functions-xray-traces-custom-serverless-metrics/) [## å¦‚ä½•ä½¿ç”¨ AWS Lambda æé«˜æ— æœåŠ¡å™¨æ€§èƒ½

### è‡ªä»æˆ‘ä»¬ä¸Šä¸€æ¬¡åœ¨ Amazon Web Services Lambda ä¸Šå‘å¸ƒå¸–å­ä»¥æ¥ï¼Œæ— æœåŠ¡å™¨è®¡ç®—æœåŠ¡çš„ä½¿ç”¨æŒç»­å¢é•¿â€¦

blog.newrelic.com](https://blog.newrelic.com/2017/06/20/lambda-functions-xray-traces-custom-serverless-metrics/) [](https://medium.com/@jconning/aws-lambda-faster-is-cheaper-6bf32f58d741) [## AWS Lambda:æ›´å¿«æ›´ä¾¿å®œ

### éšç€ CPU èƒ½åŠ›çš„æé«˜ï¼ŒCPU ç›¸å…³çš„åŠŸèƒ½æ‰§è¡Œé€Ÿåº¦æ›´å¿«ï¼Œæˆæœ¬æ›´ä½

medium.com](https://medium.com/@jconning/aws-lambda-faster-is-cheaper-6bf32f58d741) [](https://hackernoon.com/im-afraid-you-re-thinking-about-aws-lambda-cold-starts-all-wrong-7d907f278a4f) [## ææ€•ä½ å¯¹ AWS Lambda å†·å¯åŠ¨çš„æƒ³æ³•å®Œå…¨é”™äº†

### å½“æˆ‘åœ¨ API Gateway çš„ä¸Šä¸‹æ–‡ä¸­ä¸äººä»¬è®¨è®º AWS Lambda å†·å¯åŠ¨æ—¶ï¼Œæˆ‘ç»å¸¸å¾—åˆ°è¿™æ ·çš„å›ç­”â€¦

hackernoon.com](https://hackernoon.com/im-afraid-you-re-thinking-about-aws-lambda-cold-starts-all-wrong-7d907f278a4f)