<html>
<head>
<title>Building COVID-19 Dashboard with Chart.js and Vue.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Chart.js和Vue.js构建新冠肺炎仪表板</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/building-covid-19-dashboard-with-charts-js-and-vue-js-5b054443fa4?source=collection_archive---------3-----------------------#2020-04-14">https://levelup.gitconnected.com/building-covid-19-dashboard-with-charts-js-and-vue-js-5b054443fa4?source=collection_archive---------3-----------------------#2020-04-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/2e798d0a28037361f85dfb1815d052ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qoF7yCK6Y99BbhAnV4K0Hw.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">新冠肺炎阳性病例</figcaption></figure><p id="36cd" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我们现在生活在恐惧和不确定的时代。随着新冠肺炎席卷全球，没有人的健康或生计是安全的。对我个人来说，我保持理智的一个重要方法就是保持忙碌。我也不看新闻，但仍然关注新冠肺炎是如何传播的。所以，我想我应该编写一个web应用程序来构建一个仪表板，并可视化病毒的传播。</p><p id="ad93" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">在本教程中，我们将看看如何使用Charts.js和Vue.js非常容易地可视化数据。幸运的是，有一个很好的API可以用于这里找到的数据:<a class="ae ld" href="https://covidtracking.com" rel="noopener ugc nofollow" target="_blank">https://covidtracking.com</a></p><p id="5863" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated"><strong class="kh iu"> ***滚动到底部查看视频教程*** </strong></p><h1 id="c46c" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">项目设置</h1><p id="ca64" class="pw-post-body-paragraph kf kg it kh b ki mc kk kl km md ko kp kq me ks kt ku mf kw kx ky mg la lb lc im bi translated">首先，让我们创建一个Vue项目。打开您的终端，将cd放入所需的目录并运行以下命令:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="e857" class="mq lf it mm b gy mr ms l mt mu">npx vue create covid-19-visualization</span></pre><p id="c5e7" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">接下来，在您选择的编辑器中打开项目(我将使用<a class="ae ld" href="https://code.visualstudio.com/" rel="noopener ugc nofollow" target="_blank"> VS代码</a>，打开一个新终端(Terminal = &gt; New Terminal)并运行以下命令:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="947d" class="mq lf it mm b gy mr ms l mt mu">npm install vue-chartjs chart.js axios moment bootstrap --save</span></pre><h1 id="1c9f" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">式样</h1><p id="d066" class="pw-post-body-paragraph kf kg it kh b ki mc kk kl km md ko kp kq me ks kt ku mf kw kx ky mg la lb lc im bi translated">在src/main.js中，我们将导入Boostrap，这样我们就有了一些基本的样式。在文件的顶部，将它添加到其他导入下:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="fe5f" class="mq lf it mm b gy mr ms l mt mu">import 'bootstrap/dist/css/bootstrap.css'</span></pre><p id="a66a" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">您的main.js应该如下所示:</p><figure class="mh mi mj mk gt ju"><div class="bz fp l di"><div class="mv mw l"/></div></figure><h1 id="483d" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">App.vue</h1><p id="3c8f" class="pw-post-body-paragraph kf kg it kh b ki mc kk kl km md ko kp kq me ks kt ku mf kw kx ky mg la lb lc im bi translated">接下来，打开src/App.vue并删除模板、脚本和样式标签中的所有内容。在文件的顶部，导入axios和moment。我们将使用axios来发出API请求，并使用moment来格式化日期。</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="7783" class="mq lf it mm b gy mr ms l mt mu"><em class="mx">import</em> axios <em class="mx">from</em> "axios";<br/><em class="mx">import</em> moment <em class="mx">from</em> "moment";</span></pre><p id="41cb" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">然后添加一个导出默认模块。在导出默认值中，我们将在数据属性中添加数组。这些将保存我们从API接收的图表数据。我们还将添加一些图表选项和颜色，我们将通过我们的图表组件。在选择图表颜色时，我使用了:<a class="ae ld" href="https://coolors.co/" rel="noopener ugc nofollow" target="_blank">https://coolors.co/</a></p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="6fb6" class="mq lf it mm b gy mr ms l mt mu"><em class="mx">export</em> <em class="mx">default</em> {<br/>  <em class="mx">data</em>() {<br/>    <em class="mx">return</em> {<br/>      arrPositive: [],<br/>      positiveChartColors: {<br/>        borderColor: "#077187",<br/>        pointBorderColor: "#0E1428",<br/>        pointBackgroundColor: "#AFD6AC",<br/>        backgroundColor: "#74A57F"<br/>      }, <br/>      arrHospitalized: [], <br/>      hospitalizedChartColors: {<br/>        borderColor: "#251F47",<br/>        pointBorderColor: "#260F26",<br/>        pointBackgroundColor: "#858EAB",<br/>        backgroundColor: "#858EAB"<br/>      },<br/>      arrInIcu: [],<br/>      inIcuColors: {<br/>        borderColor: "#190B28",<br/>        pointBorderColor: "#190B28",<br/>        pointBackgroundColor: "#E55381",<br/>        backgroundColor: "#E55381"<br/>      },<br/>      arrOnVentilators: [],<br/>      onVentilatorsColors: {<br/>        borderColor: "#784F41",<br/>        pointBorderColor: "#784F41",<br/>        pointBackgroundColor: "#BBE5ED",<br/>        backgroundColor: "#BBE5ED"<br/>      },<br/>      arrRecovered: [],<br/>      recoveredColors: {<br/>        borderColor: "#4E5E66",<br/>        pointBorderColor: "#4E5E66",<br/>        pointBackgroundColor: "#31E981",<br/>        backgroundColor: "#31E981"<br/>      },<br/>      arrDeaths: [],<br/>      deathColors: {<br/>        borderColor: "#E06D06",<br/>        pointBorderColor: "#E06D06",<br/>        pointBackgroundColor: "#402A2C",<br/>        backgroundColor: "#402A2C"<br/>      },<br/>      chartOptions: {<br/>        responsive: true,<br/>        maintainAspectRatio: false<br/>      }<br/>    };<br/>  },<br/>}</span></pre><p id="4e80" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">在数据属性下的导出默认值中，添加Vue生命周期挂钩创建。我们将使用它进行初始API调用来获取数据。当我们从API中获取数据时，我们将数据推入数组，这样我们就可以将它用于各个图表。</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="c2e0" class="mq lf it mm b gy mr ms l mt mu"><em class="mx">async</em> <em class="mx">created</em>() {<br/>  const<em class="mx"> </em>{<em class="mx"> data </em>}<em class="mx"> </em>=<em class="mx"> <br/>  await axios.get</em>("https://covidtracking.com/api/us/daily");<br/>  <br/>  <em class="mx">data.forEach</em>(d =&gt; {<br/>    const<em class="mx"> date </em>=<em class="mx"> moment</em>(<em class="mx">d.date</em>,<em class="mx"> </em>"YYYYMMDD")<em class="mx">.format</em>("MM/DD");<br/>  <br/>    const<em class="mx"> </em>{<br/>      <em class="mx">positive</em>,<br/>      <em class="mx">hospitalizedCurrently</em>, <br/>      <em class="mx">inIcuCurrently</em>,<br/>      <em class="mx">onVentilatorCurrently</em>,<br/>      <em class="mx">recovered</em>,<br/>      <em class="mx">death<br/>    </em>}<em class="mx"> </em>=<em class="mx"> </em>d;</span><span id="bbe9" class="mq lf it mm b gy my ms l mt mu">    this<em class="mx">.arrPositive.push</em>({ date, total: positive });<br/>     this<em class="mx">.arrHospitalized.push</em>({<br/>     date, total: hospitalizedCurrently <br/>    });<br/>    this<em class="mx">.arrInIcu.push</em>({ date, total: inIcuCurrently });<br/>    this<em class="mx">.arrOnVentilators.push</em>({ <br/>      date, total: onVentilatorCurrently <br/>    });<br/>    this<em class="mx">.arrRecovered.push</em>({ date, total: recovered });<br/>    this<em class="mx">.arrDeaths.push</em>({ date, total: death });<br/>  });<br/>}</span></pre><h1 id="3622" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">折线图组件</h1><p id="2378" class="pw-post-body-paragraph kf kg it kh b ki mc kk kl km md ko kp kq me ks kt ku mf kw kx ky mg la lb lc im bi translated">在components文件夹中，删除HelloWorld.vue组件，并添加一个新文件，将其命名为LineChart.vue。在此文件中，添加您的脚本标记，然后导入vue-chartjs库，以便在顶部绘制折线图:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="7d77" class="mq lf it mm b gy mr ms l mt mu"><em class="mx">import</em> { Line } <em class="mx">from</em> "vue-chartjs";</span></pre><p id="ebad" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">接下来，我们将使用extends属性添加我们的导出默认值，以使用折线图和4个属性，我们将使用显示数据和样式化图表:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="ef6a" class="mq lf it mm b gy mr ms l mt mu"><em class="mx">export</em> <em class="mx">default</em> {<br/>  extends: Line,<br/>  props: {<br/>  label: {<br/>    type: String<br/>  },<br/>  chartData: { <br/>    type: Array<br/>  },<br/>  options: { <br/>    type: Object<br/>  },<br/>  chartColors: {<br/>    type: Object<br/>  } <br/> }<br/>}</span></pre><p id="4d17" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">接下来，在export default中，我们将添加一个名为mounted的Vue生命周期挂钩，我们将使用它来呈现图表，并向它传递我们传递到props中的数据和颜色。图表不接受对象的数组，所以我们必须用地图将它们展平。我们还必须颠倒它们，因为日期是按照API的降序排列的。</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="ff3b" class="mq lf it mm b gy mr ms l mt mu"><em class="mx">mounted</em>() {<br/>  const<em class="mx"> dates </em>=<em class="mx"> this.chartData.map</em>(<em class="mx">d </em>=&gt;<em class="mx"> d.date</em>)<em class="mx">.reverse</em>();<br/>  const<em class="mx"> totals </em>=<em class="mx"> this.chartData.map</em>(<em class="mx">d </em>=&gt;<em class="mx"> d.total</em>)<em class="mx">.reverse</em>();</span><span id="a212" class="mq lf it mm b gy my ms l mt mu">  const<em class="mx"> </em>{<br/>    <em class="mx">borderColor</em>,<br/>    <em class="mx">pointBorderColor</em>,<br/>    <em class="mx">pointBackgroundColor</em>,<br/>    <em class="mx">backgroundColor<br/>  </em>}<em class="mx"> </em>=<em class="mx"> this.chartColors</em>;</span><span id="715d" class="mq lf it mm b gy my ms l mt mu">  this<em class="mx">.renderChart</em>({<br/>    labels: dates,<br/>    datasets: [{<br/>      label: this<em class="mx">.</em>label,<br/>      data: totals,<br/>      borderColor: borderColor,<br/>      pointBorderColor: pointBorderColor,<br/>      pointBackgroundColor: pointBackgroundColor,<br/>      backgroundColor: backgroundColor<br/>     }]<br/>    },<br/>    this<em class="mx">.</em>options);<br/>}</span></pre><p id="d15e" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">最终的LineChart.vue文件应该如下所示:</p><figure class="mh mi mj mk gt ju"><div class="bz fp l di"><div class="mv mw l"/></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">LineChart.vue</figcaption></figure><p id="982c" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">现在，我们要做的就是将组件导入到src/App.vue中，并将组件添加到模板中。要导入组件，请将其添加到文件的顶部:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="7199" class="mq lf it mm b gy mr ms l mt mu"><em class="mx">import</em> LineChart <em class="mx">from</em> "./components/LineChart";</span></pre><p id="022c" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">然后将其添加到导出默认值:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="fbd2" class="mq lf it mm b gy mr ms l mt mu">components: {<br/>  LineChart<br/>}</span></pre><p id="b9bc" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">接下来，我们将组件添加到模板标记中，以便显示我们的图表。确保通过组件标签上的道具传递数据。在显示数组之前，我们添加一个v-if来检查数组中是否有数据，这一点很重要。这将防止我们的图表显示空白。</p><p id="cff7" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我们还将在模板中添加一些引导样式，这样看起来会更好。最终的App.vue文件应该如下所示:</p><figure class="mh mi mj mk gt ju"><div class="bz fp l di"><div class="mv mw l"/></div></figure><h1 id="4f9b" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">结论</h1><p id="5e9a" class="pw-post-body-paragraph kf kg it kh b ki mc kk kl km md ko kp kq me ks kt ku mf kw kx ky mg la lb lc im bi translated">完成后，您应该会看到如下所示的内容:</p><figure class="mh mi mj mk gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mz"><img src="../Images/5c838bd5787f7e62415cf537c3624bb0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*qGEQL3hVf4cHBw9oHKv-EA.gif"/></div></div></figure><p id="7db2" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">就是这样！当然，这只是你可以使用的众多图表之一。而且，这只是一个简单的教程，但是我们很想看看你是如何改进它的！请在下面给我们留下您自己的项目和改进的评论。</p><h1 id="2513" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">视频教程</h1><figure class="mh mi mj mk gt ju"><div class="bz fp l di"><div class="na mw l"/></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">视频教程</figcaption></figure><p id="8ed5" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">你可以在这里找到这个项目的git repo:<a class="ae ld" href="https://bitbucket.org/TheDiligentDev/covid-19-data-visualization/src/master/" rel="noopener ugc nofollow" target="_blank">https://bit bucket . org/the ligent dev/新冠肺炎-数据可视化/src/master/ </a></p></div></div>    
</body>
</html>