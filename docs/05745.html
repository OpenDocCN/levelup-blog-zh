<html>
<head>
<title>Internationalise your React Application</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">国际化您的React应用程序</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/internationalise-your-react-application-6eba2262c328?source=collection_archive---------20-----------------------#2020-09-26">https://levelup.gitconnected.com/internationalise-your-react-application-6eba2262c328?source=collection_archive---------20-----------------------#2020-09-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/0b002f236d0a69a8a86916e295de2fa9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8IEjR1LlAgV_Q18WqPfJSQ.jpeg"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">照片由<a class="ae kf" href="https://www.pexels.com/photo/ball-shaped-blur-close-up-focus-346885/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> Pexels </a>的Porapak Apichodilok<a class="ae kf" href="https://www.pexels.com/@nurseryart?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">拍摄</a></figcaption></figure><p id="aa89" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在一个多语言的世界里(我说的不是编程语言！)我们需要我们的网络应用程序支持多种语言。</p><p id="f496" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">但是对于开发人员来说，维护这种多语言支持是一件非常痛苦的事情。</p><p id="b8db" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">以React-intl为例。因为他们使用上下文来启用多语言，所以很难在共享库中启用国际化，并在您的主应用程序中使用共享组件(冲突、上下文之间的混淆以及应用程序中的更多复杂性)。<br/> React应用程序已经够复杂了，这给解决方案增加了更多的复杂性。另一个问题是翻译的存储。一种语言只能使用一个JSON文件。我们有可能在将它们发送给提供商之前合并它们，但是这是一个复杂且非常方便的用法。最后，存储的键是一个唯一的长字符串，通过使用JSON，我们可以简单地嵌套它们。</p></div><div class="ab cl le lf hx lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="im in io ip iq"><p id="7d3b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这就是<a class="ae kf" href="https://github.com/psyycker/react-translation" rel="noopener ugc nofollow" target="_blank">反应的地方——翻译</a>改变它！</p><div class="ll lm gp gr ln lo"><a href="https://www.npmjs.com/package/@psyycker/react-translation" rel="noopener  ugc nofollow" target="_blank"><div class="lp ab fo"><div class="lq ab lr cl cj ls"><h2 class="bd iu gy z fp lt fr fs lu fu fw is bi translated">@ psycker/react-translation</h2><div class="lv l"><h3 class="bd b gy z fp lt fr fs lu fu fw dk translated">React的现代翻译库</h3></div><div class="lw l"><p class="bd b dl z fp lt fr fs lu fu fw dk translated">www.npmjs.com</p></div></div><div class="lx l"><div class="ly l lz ma mb lx mc jz lo"/></div></div></a></div><p id="4764" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">没有上下文，没有唯一的入口点，通过使用javascript事件，没有库的两个版本之间的冲突问题！</p><p id="7796" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">React翻译被认为是一种没有入口点，没有包装器，因此没有冲突风险的方法。</p><p id="2e3f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">可以从不同的地方添加翻译并自动合并它们。你可以按照你喜欢的方式对它们进行分类，并拥有一个更好的文件架构。和json文件中的长字符串说再见。您可以嵌套您的对象并更好地查看您的翻译文件！</p></div><div class="ab cl le lf hx lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="im in io ip iq"><h1 id="5e0f" class="md me it bd mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na bi translated">它是如何工作的？！</h1><p id="c1b2" class="pw-post-body-paragraph kg kh it ki b kj nb kl km kn nc kp kq kr nd kt ku kv ne kx ky kz nf lb lc ld im bi translated">当然你必须安装这个库！</p><pre class="ng nh ni nj gt nk nl nm nn aw no bi"><span id="2821" class="np me it nl b gy nq nr l ns nt">npm install --save @psyycker/react-translation</span></pre><h2 id="f286" class="np me it bd mf nu nv dn mj nw nx dp mn kr ny nz mr kv oa ob mv kz oc od mz oe bi translated">初始化</h2><p id="dc10" class="pw-post-body-paragraph kg kh it ki b kj nb kl km kn nc kp kq kr nd kt ku kv ne kx ky kz nf lb lc ld im bi translated">首先，你要初始化库。有一个默认的导出，它将初始化事件并将它们链接到应用程序的主体。</p><p id="7e03" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在你的应用程序的索引上(你可以使用一个共享库，可能在你的任何索引上)做一个简单的导入:</p><pre class="ng nh ni nj gt nk nl nm nn aw no bi"><span id="fa1b" class="np me it nl b gy nq nr l ns nt">import "@psyycker/react-translation"</span></pre><p id="b24c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">不要担心这个导入被多次执行(在共享库的情况下),因为它只会触发一次。其他时间不会覆盖事件</p><p id="d0e8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在需要设置默认区域设置时，您可以覆盖该配置:</p><pre class="ng nh ni nj gt nk nl nm nn aw no bi"><span id="dc54" class="np me it nl b gy nq nr l ns nt">import { setTranslationConfig } from "@psyycker/react-translation"<br/>// Always call first before initialising the config<br/>import "@psyycker/react-translation"<br/><br/>// Do not call inside a component<br/>setTranslationConfig({<br/>  defaultLocale: "en-US"<br/>})</span></pre><h2 id="ddc5" class="np me it bd mf nu nv dn mj nw nx dp mn kr ny nz mr kv oa ob mv kz oc od mz oe bi translated">注册您的翻译</h2><p id="0be6" class="pw-post-body-paragraph kg kh it ki b kj nb kl km kn nc kp kq kr nd kt ku kv ne kx ky kz nf lb lc ld im bi translated">假设你想使用英语(美国)</p><p id="1c53" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您首先要创建您的JSON文件:</p><pre class="ng nh ni nj gt nk nl nm nn aw no bi"><span id="1e20" class="np me it nl b gy nq nr l ns nt">{<br/>  "component": {<br/>    "title": "My Value"<br/>  }<br/>}</span></pre><p id="4637" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这个文件，我们把它命名为<code class="fe of og oh nl b">english-us.json</code>将会在<code class="fe of og oh nl b">translations</code>文件夹中(但是可以在任何地方！)</p><p id="fb6e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要将它的内容添加到应用程序中，您只需注册它:</p><pre class="ng nh ni nj gt nk nl nm nn aw no bi"><span id="e073" class="np me it nl b gy nq nr l ns nt">import { registerTranslations } from "@psyycker/react-translation";<br/>import englishUS from "./translations/english-us.json";<br/><br/>registerTranslations({<br/>  "en-US": englishUS<br/>})</span></pre><p id="ab52" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这将在库中注册新的区域设置<code class="fe of og oh nl b">en-US</code>，并在其中添加JSON文件的内容。如果你想为相同的地区注册翻译，但是来自不同的文件，只需再次调用register translations，它将合并两个翻译！没有超驰装置！</p><h2 id="423f" class="np me it bd mf nu nv dn mj nw nx dp mn kr ny nz mr kv oa ob mv kz oc od mz oe bi translated">使用你的翻译</h2><p id="aee1" class="pw-post-body-paragraph kg kh it ki b kj nb kl km kn nc kp kq kr nd kt ku kv ne kx ky kz nf lb lc ld im bi translated">有两种方法可以使用你的翻译。你可以选择挂钩<code class="fe of og oh nl b">useTranslation</code>或者使用<code class="fe of og oh nl b">Translation</code>组件。</p><p id="541d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果您想使用挂钩:</p><pre class="ng nh ni nj gt nk nl nm nn aw no bi"><span id="046f" class="np me it nl b gy nq nr l ns nt">import { useTranslation } from "@psyycker/react-translation"; <br/><br/>function MyComponent() {<br/><br/>  const { getTranslation } = useTranslation();<br/><br/>  return (<br/>    &lt;div&gt;<br/>     {getTranslation({<br/>      translationKey: "component.title",<br/>      defaultValue: "My Default Value"<br/>    })}&lt;/div&gt;<br/>  )<br/>}</span></pre><p id="b771" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果您想使用该组件:</p><pre class="ng nh ni nj gt nk nl nm nn aw no bi"><span id="e9ce" class="np me it nl b gy nq nr l ns nt">import { Translation} from "@psyycker/react-translation";<br/><br/>function MyComponent() {<br/><br/>  return (<br/>    &lt;div&gt;<br/>          &lt;Translation <br/>            translationKey="component.title" <br/>            defaultValue="My default value"<br/>         /&gt;<br/>    &lt;/div&gt;<br/>  )<br/>}</span></pre><p id="7e33" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这两种情况下，结果将显示相同。但是，使用组件会使代码更容易阅读，这是推荐的做法。</p><h2 id="c57d" class="np me it bd mf nu nv dn mj nw nx dp mn kr ny nz mr kv oa ob mv kz oc od mz oe bi translated">使用参数</h2><p id="d705" class="pw-post-body-paragraph kg kh it ki b kj nb kl km kn nc kp kq kr nd kt ku kv ne kx ky kz nf lb lc ld im bi translated">您可以使用参数，以便</p><pre class="ng nh ni nj gt nk nl nm nn aw no bi"><span id="d6d2" class="np me it nl b gy nq nr l ns nt">Hello {insertHere}</span></pre><p id="c37f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">成为</p><pre class="ng nh ni nj gt nk nl nm nn aw no bi"><span id="0df6" class="np me it nl b gy nq nr l ns nt">Hello World!</span></pre><p id="12f7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为此，让我们编辑一下我们的翻译文件:</p><pre class="ng nh ni nj gt nk nl nm nn aw no bi"><span id="78b0" class="np me it nl b gy nq nr l ns nt">{<br/>  "component": {<br/>    "title": "Hello {input}"<br/>  }<br/>}</span></pre><p id="60ad" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">输入可以是你喜欢的任何东西！</p><p id="4ffd" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后，以同样的方式，您可以在<code class="fe of og oh nl b">parameters</code>属性中添加您的<code class="fe of og oh nl b">input</code>值！</p><pre class="ng nh ni nj gt nk nl nm nn aw no bi"><span id="d0ee" class="np me it nl b gy nq nr l ns nt">import { Translation } from "@psyycker/react-translation"; <br/><br/><br/>function MyComponent() {<br/><br/>  return (<br/>    &lt;div&gt;<br/>          &lt;Translation <br/>            translationKey="component.title" <br/>            defaultValue="My default value"<br/>            parameters={{<br/>              input: "My Custom Input"<br/>            }}<br/>         /&gt;<br/>    &lt;/div&gt;<br/>  )<br/>}</span></pre><p id="29c8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">你也可以用钩子来做:</p><pre class="ng nh ni nj gt nk nl nm nn aw no bi"><span id="0d85" class="np me it nl b gy nq nr l ns nt">getTranslation({<br/>      translationKey: "component.title",<br/>      defaultValue: "My Default Value",<br/>      parameters: { input: "My Custom Input" }<br/>      })</span></pre><p id="7eea" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最后的结果会是没有任何意义的<code class="fe of og oh nl b">Hello My Custom Input</code>！</p><h2 id="c8c9" class="np me it bd mf nu nv dn mj nw nx dp mn kr ny nz mr kv oa ob mv kz oc od mz oe bi translated">更改区域设置</h2><p id="6048" class="pw-post-body-paragraph kg kh it ki b kj nb kl km kn nc kp kq kr nd kt ku kv ne kx ky kz nf lb lc ld im bi translated">最后，如果您想更改语言环境，只需调用从库中直接导入的<code class="fe of og oh nl b">changeLocale</code>函数即可。</p></div><div class="ab cl le lf hx lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="im in io ip iq"><p id="3a52" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这个库是其他库的替代品，非常新！不要犹豫，打开一个问题，以获得支持或有更多的功能！</p><p id="a2a6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">感谢您的阅读！</p></div></div>    
</body>
</html>