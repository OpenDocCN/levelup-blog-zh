<html>
<head>
<title>Go Programming | Copy function Explained</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">编程|复制功能说明</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/go-programming-copy-function-explained-d0493c4a9800?source=collection_archive---------3-----------------------#2021-11-26">https://levelup.gitconnected.com/go-programming-copy-function-explained-d0493c4a9800?source=collection_archive---------3-----------------------#2021-11-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/caf9690ad8f27fca912caa7dd2b4d337.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Hy7XlkgILxy7TpKc"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">Volodymyr Hryshchenko 在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="4893" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">内置的<a class="ae kf" href="https://pkg.go.dev/builtin#copy" rel="noopener ugc nofollow" target="_blank">复制函数</a>用于<strong class="ki iu">将</strong>元素<strong class="ki iu">从一个源片复制到另一个目的片。</strong></p><p id="96ba" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">复制功能的签名是:</p><pre class="le lf lg lh gt li lj lk ll aw lm bi"><span id="5ba3" class="ln lo it lj b gy lp lq l lr ls">func copy(dst, src []<a class="ae kf" href="https://pkg.go.dev/builtin#Type" rel="noopener ugc nofollow" target="_blank">Type</a>) <a class="ae kf" href="https://pkg.go.dev/builtin#int" rel="noopener ugc nofollow" target="_blank">int</a></span></pre><ul class=""><li id="3d83" class="lt lu it ki b kj kk kn ko kr lv kv lw kz lx ld ly lz ma mb bi translated">它有两个参数，一个目标和一个源片，它们的元素类型是相同的。</li><li id="1462" class="lt lu it ki b kj mc kn md kr me kv mf kz mg ld ly lz ma mb bi translated">这两个切片可以具有不同的长度。它返回复制的元素数量，这将是<code class="fe mh mi mj lj b">len(<strong class="ki iu">src</strong>) </code>和<code class="fe mh mi mj lj b">len(<strong class="ki iu">dst</strong>)</code>的最小值。</li><li id="e2e0" class="lt lu it ki b kj mc kn md kr me kv mf kz mg ld ly lz ma mb bi translated">作为一个特例，它也将把字节从一个字符串复制到一个字节片。</li><li id="b451" class="lt lu it ki b kj mc kn md kr me kv mf kz mg ld ly lz ma mb bi translated">一旦复制完成，<code class="fe mh mi mj lj b"><strong class="ki iu">dst</strong></code>中的任何变化都不会反映在<code class="fe mh mi mj lj b"><strong class="ki iu">src</strong></code>中，除非<code class="fe mh mi mj lj b"><strong class="ki iu">src</strong></code>和<code class="fe mh mi mj lj b"><strong class="ki iu">dst</strong></code>都引用同一个片。</li></ul><p id="a364" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们通过下面的例子来进一步理解这个函数。</p><h2 id="cc50" class="ln lo it bd mk ml mm dn mn mo mp dp mq kr mr ms mt kv mu mv mw kz mx my mz na bi translated">示例1:从长切片复制到短切片</h2><pre class="le lf lg lh gt li lj lk ll aw lm bi"><span id="6ba1" class="ln lo it lj b gy lp lq l lr ls">package main<br/><br/>import (<br/>	"fmt"<br/>)<br/><br/>func main() {<br/>	s6 := []int{-10, 1, 2, 3, 4, 5}<br/>	s4 := []int{-1, -2, -3, -4}<br/>	fmt.Println("s6:", s6)<br/>	fmt.Println("s4:", s4)<br/><br/>	<strong class="lj iu">copy</strong>(s6, s4)<br/><br/>	fmt.Println("s6:", s6)<br/>	fmt.Println("s4:", s4)<br/>}</span></pre><figure class="le lf lg lh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nb"><img src="../Images/07da9b0bd3ec8a0f5b56faf72de638e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uYsNNtcP_6qIgYK_TzwA6w.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">从长切片复制到短切片</figcaption></figure><h2 id="caa6" class="ln lo it bd mk ml mm dn mn mo mp dp mq kr mr ms mt kv mu mv mw kz mx my mz na bi translated">示例2:从短切片复制到长切片</h2><pre class="le lf lg lh gt li lj lk ll aw lm bi"><span id="c8a0" class="ln lo it lj b gy lp lq l lr ls">package main<br/><br/>import (<br/>	"fmt"<br/>)<br/><br/>func main() {<br/>	s6 := []int{-10, 1, 2, 3, 4, 5}<br/>	s4 := []int{-1, -2, -3, -4}<br/>	fmt.Println("s6:", s6)<br/>	fmt.Println("s4:", s4)<br/><br/>	<strong class="lj iu">copy</strong>(s4, s6)<br/><br/>	fmt.Println("s6:", s6)<br/>	fmt.Println("s4:", s4)<br/>	fmt.Println()<br/>}<br/></span></pre><figure class="le lf lg lh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nb"><img src="../Images/c164460b81fdb8079cb70f339fba0581.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*--KvWMDAZdvbslkjYQVPsw.png"/></div></div></figure><h2 id="c2cb" class="ln lo it bd mk ml mm dn mn mo mp dp mq kr mr ms mt kv mu mv mw kz mx my mz na bi translated">示例3:从短数组复制到长切片</h2><p id="aacd" class="pw-post-body-paragraph kg kh it ki b kj nc kl km kn nd kp kq kr ne kt ku kv nf kx ky kz ng lb lc ld im bi translated">我们可以从现有数组的元素中创建一个切片，然后将该切片复制到另一个数组中。</p><pre class="le lf lg lh gt li lj lk ll aw lm bi"><span id="47c7" class="ln lo it lj b gy lp lq l lr ls"><br/>package main<br/><br/>import (<br/>	"fmt"<br/>)<br/><br/>func main() {<br/>	array4 := [4]int{4, -4, 4, -4}<br/>	s6 := []int{1, 1, -1, -1, 5, -5}<br/><br/>	fmt.Println("array4:", array4)<br/>	fmt.Println("s6:", s6)<br/><br/>	<strong class="lj iu">copy</strong>(s6, array4[0:])<br/><br/>	fmt.Println("array4:", array4)<br/>	fmt.Println("s6:", s6)<br/>}<br/></span></pre><figure class="le lf lg lh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nh"><img src="../Images/23153456fb9bf5a7687cf0099cf554af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EhtSgOzyxv6g6SWpg0hvXA.png"/></div></div></figure><h2 id="fb3e" class="ln lo it bd mk ml mm dn mn mo mp dp mq kr mr ms mt kv mu mv mw kz mx my mz na bi translated">示例4:从长切片复制到短数组</h2><pre class="le lf lg lh gt li lj lk ll aw lm bi"><span id="2ca4" class="ln lo it lj b gy lp lq l lr ls">package main<br/><br/>import (<br/>	"fmt"<br/>)<br/><br/>func main() {<br/>	array4 := [4]int{4, -4, 4, -4}<br/>	s6 := []int{1, 1, -1, -1, 5, -5}<br/><br/>	fmt.Println("array4:", array4)<br/>	fmt.Println("s6:", s6)<br/><br/>	<strong class="lj iu">copy</strong>(array4[0:], s6)<br/><br/>	fmt.Println("array4:", array4)<br/>	fmt.Println("s6:", s6)<br/>}<br/></span></pre><figure class="le lf lg lh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nh"><img src="../Images/f755e974397ee75b69099dfa4f39cc03.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QI9SV5QNW2D1kDEDYpM4yg.png"/></div></div></figure><h2 id="51fc" class="ln lo it bd mk ml mm dn mn mo mp dp mq kr mr ms mt kv mu mv mw kz mx my mz na bi translated">示例5:从一个切片复制到其自身</h2><p id="2d9c" class="pw-post-body-paragraph kg kh it ki b kj nc kl km kn nd kp kq kr ne kt ku kv nf kx ky kz ng lb lc ld im bi translated">使用复制功能时，源和目标也可能重叠。因此，也可以从一个切片复制到其自身</p><pre class="le lf lg lh gt li lj lk ll aw lm bi"><span id="5f4f" class="ln lo it lj b gy lp lq l lr ls">package main<br/><br/>import (<br/>	"fmt"<br/>)<br/><br/>func main() {<br/>	s6 := []int{1, 1, -1, -1, 5, -5}<br/><br/>	fmt.Println("s6:", s6)<br/><br/>	copy(s6, s6[3:])<br/><br/>	fmt.Println("s6:", s6)<br/>}<br/></span></pre><figure class="le lf lg lh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ni"><img src="../Images/2dded7db3e8e33ece159a9dddae7b2f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OdoKK6LQBfv9A4vm_pto-Q.png"/></div></div></figure><h2 id="8b6f" class="ln lo it bd mk ml mm dn mn mo mp dp mq kr mr ms mt kv mu mv mw kz mx my mz na bi translated">示例6:从字符串复制到字节片(特殊情况)</h2><p id="4be4" class="pw-post-body-paragraph kg kh it ki b kj nc kl km kn nd kp kq kr ne kt ku kv nf kx ky kz ng lb lc ld im bi translated">我们知道字符串实际上是一个<code class="fe mh mi mj lj b">byte</code>序列包装器。实际上，我们可以把一个字符串看作一个(元素不可变的)字节片。</p><pre class="le lf lg lh gt li lj lk ll aw lm bi"><span id="1733" class="ln lo it lj b gy lp lq l lr ls">var b = make([]byte, 3)<br/>copy(b, "world!") // b == []byte("Hello")</span></pre><figure class="le lf lg lh gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nj"><img src="../Images/c17fb5b7b123b7c22db82f5fb3d598fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hZvrDfobTAoOJoLmtZDK5Q.png"/></div></div></figure></div><div class="ab cl nk nl hx nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="im in io ip iq"><p id="f0d6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我希望你喜欢读这篇文章😄。如果你想支持我☕作为一个作家，考虑报名参加<a class="ae kf" href="https://jerryan.medium.com/membership" rel="noopener">成为一个媒体成员</a>。你还可以无限制地访问媒体上的每个故事。</p></div></div>    
</body>
</html>