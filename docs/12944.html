<html>
<head>
<title>Adding SSL to Single Instance AWS Elastic BeanStalk</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">向单实例AWS弹性BeanStalk添加SSL</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/adding-ssl-to-single-instance-aws-elastic-beanstalk-5a1004daec8b?source=collection_archive---------1-----------------------#2022-07-25">https://levelup.gitconnected.com/adding-ssl-to-single-instance-aws-elastic-beanstalk-5a1004daec8b?source=collection_archive---------1-----------------------#2022-07-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/ff4e2e0f987cdcf75f278d070df31265.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fRYxPrR7W8YF8TjOCcrqEA.png"/></div></div></figure><p id="afb7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">最近，我受到了广受恐惧的AWS比尔·🥲🥲的攻击</p><p id="c436" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">像其他开发人员一样，我决定咆哮而不是试图优化我的架构。后来，我冷静下来，意识到我可以通过删除开发环境中的负载平衡器并替换为单实例容量来降低成本</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div class="gh gi kw"><img src="../Images/b0b9ac4cae67373af521f4ff9db7abc0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/1*U1qjYOXAiXYOtMNbMN3-Og.jpeg"/></div></figure><p id="3c4c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">一切都很好，直到我意识到SSL在单实例beanstalk环境中运行时不容易配置。所以我做了什么；再次咆哮，然后启用SSL🙂</p><p id="14e1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我向您介绍一下我是如何设置SSL的</p><h1 id="2b48" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">免费获取SSL证书</h1><p id="7097" class="pw-post-body-paragraph jy jz iq ka b kb lz kd ke kf ma kh ki kj mb kl km kn mc kp kq kr md kt ku kv ij bi translated">第一步是获得SSL证书。我的直觉是使用AWS证书管理器，因为我的应用程序部署在AWS上，但是ACM证书不能被EC2实例直接使用😒</p><p id="df5b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">后来我从SSL免费获得了一个SSL证书。整个过程非常简单，我只需要在53号公路上添加一个CNAME记录就可以了。</p><p id="3398" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">SSL For Free的免费层非常有限；顾名思义。如果你不想花钱，你也可以很容易地生成自己的证书</p><h1 id="4d0d" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">生成您自己的SSL证书</h1><p id="a17f" class="pw-post-body-paragraph jy jz iq ka b kb lz kd ke kf ma kh ki kj mb kl km kn mc kp kq kr md kt ku kv ij bi translated">我决定把这作为一篇独立的文章，你可以在这里阅读<a class="ae me" href="https://medium.com/@toluolatubosun/generate-ssl-certificate-with-lets-encrypt-a8e26cf0a378" rel="noopener">。</a></p><h1 id="9730" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">配置弹性BeanStalk环境</h1><p id="aa4e" class="pw-post-body-paragraph jy jz iq ka b kb lz kd ke kf ma kh ki kj mb kl km kn mc kp kq kr md kt ku kv ij bi translated">要配置使用SSL证书的环境，请将这里的代码<a class="ae me" href="https://github.com/toluolatubosun/aws-elastic-beanStalk-single-instance-SSL" rel="noopener ugc nofollow" target="_blank">添加到您的应用程序中。它包含两个文件夹，配置SSL证书，处理HTTP到HTTPS重定向，并且也是WebSocket兼容的</a></p><p id="8567" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后更新在中找到的配置</p><pre class="kx ky kz la gt mf mg mh mi aw mj bi"><span id="0042" class="mk lc iq mg b gy ml mm l mn mo">.ebextensions &gt; certs.config</span></pre><p id="f247" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">使用SSL证书文件中的代码和私钥。确保不要弄乱缩进，因为这是一个YAML文件，我们都知道谁与YAML文件😏</p><p id="1c22" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">使用这种配置，您的应用程序必须监听端口8081</p><p id="6b2a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你知道你在做什么，你可以编辑配置文件来使用不同的端口</p><h1 id="09ac" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">多一点</h1><p id="c80c" class="pw-post-body-paragraph jy jz iq ka b kb lz kd ke kf ma kh ki kj mb kl km kn mc kp kq kr md kt ku kv ij bi translated">如果您的生产环境运行负载平衡的多个实例，您肯定不希望您的配置文件进入应用程序的生产分支</p><p id="3b14" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我的处理方法是使用下面的git命令来合并、删除文件夹，然后提交</p><pre class="kx ky kz la gt mf mg mh mi aw mj bi"><span id="7908" class="mk lc iq mg b gy ml mm l mn mo">git merge --no-ff --no-commit dev</span><span id="c14b" class="mk lc iq mg b gy mp mm l mn mo">git reset HEAD .ebextensions .platform</span><span id="17d4" class="mk lc iq mg b gy mp mm l mn mo">git checkout -- .ebextensions .platform</span><span id="a447" class="mk lc iq mg b gy mp mm l mn mo">git commit -m "merged dev"</span><span id="4217" class="mk lc iq mg b gy mp mm l mn mo">git push origin main</span></pre><p id="98e9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我不确定这是最好的处理方式，我愿意听取你的建议</p><p id="83d4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你也可以随时联系我<a class="ae me" href="https://toluolatubosun.com/contact" rel="noopener ugc nofollow" target="_blank">这里</a>🤠</p><p id="3584" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">保持新鲜，下一集再见😎🖖</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/c8d17bfd055a20d56458ad34d958f2df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1154/format:webp/1*a-80uQYwIMF6p63kaCBaVg.jpeg"/></div></figure></div><div class="ab cl mr ms hu mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="ij ik il im in"><h1 id="741d" class="lb lc iq bd ld le my lg lh li mz lk ll lm na lo lp lq nb ls lt lu nc lw lx ly bi translated">分级编码</h1><p id="0c5c" class="pw-post-body-paragraph jy jz iq ka b kb lz kd ke kf ma kh ki kj mb kl km kn mc kp kq kr md kt ku kv ij bi translated">感谢您成为我们社区的一员！在你离开之前:</p><ul class=""><li id="c472" class="nd ne iq ka b kb kc kf kg kj nf kn ng kr nh kv ni nj nk nl bi translated">👏为故事鼓掌，跟着作者走👉</li><li id="9907" class="nd ne iq ka b kb nm kf nn kj no kn np kr nq kv ni nj nk nl bi translated">📰查看<a class="ae me" href="https://levelup.gitconnected.com/?utm_source=pub&amp;utm_medium=post" rel="noopener ugc nofollow" target="_blank">级编码出版物</a>中的更多内容</li><li id="28df" class="nd ne iq ka b kb nm kf nn kj no kn np kr nq kv ni nj nk nl bi translated">🔔关注我们:<a class="ae me" href="https://twitter.com/gitconnected" rel="noopener ugc nofollow" target="_blank">推特</a> | <a class="ae me" href="https://www.linkedin.com/company/gitconnected" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a> | <a class="ae me" href="https://newsletter.levelup.dev" rel="noopener ugc nofollow" target="_blank">时事通讯</a></li></ul><p id="c07f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">🚀👉<a class="ae me" href="https://jobs.levelup.dev/jobs?utm_source=pub&amp;utm_medium=post" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir">软件工程师的顶级工作</strong> </a></p></div></div>    
</body>
</html>