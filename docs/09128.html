<html>
<head>
<title>Space Shooter Challenge: Boss Part 3 — Turret Rotation and Health System</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">太空射手挑战:Boss第3部分-炮塔旋转和健康系统</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/space-shooter-challenge-boss-part-3-turret-rotation-and-health-system-1c958a439f97?source=collection_archive---------8-----------------------#2021-07-08">https://levelup.gitconnected.com/space-shooter-challenge-boss-part-3-turret-rotation-and-health-system-1c958a439f97?source=collection_archive---------8-----------------------#2021-07-08</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/860b87de0245e2409bdd3e6e46ac75c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*o5GEwBQD0mh4W6V-K1jeMQ.gif"/></div></div></figure><p id="a1d8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我现在有了功能性武器，但我想让我的<strong class="ka ir">炮塔</strong>在某种程度上跟踪<strong class="ka ir">玩家。</strong>为了防止完全旋转并且让9个<strong class="ka ir">炮塔</strong>都直接向<strong class="ka ir">玩家开火，</strong>我遇到了限制旋转的挑战。</p><p id="23ec" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我还想让每组<strong class="ka ir">炮塔</strong>看起来像三个一组的，所以对于我的<strong class="ka ir">目标方向</strong>我是从<strong class="ka ir"> Boss的变换</strong>中计算出来的，而不是每个单独的炮塔。</p><p id="deca" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后我可以将<strong class="ka ir">夹具</strong>设置在<strong class="ka ir">方向向量</strong>上，我通过想象每个点都在对角的正方形来计算，然后利用内角的基本知识，我为标准炮塔设置了45度的限制，较大的为15度。我选择了1:1和3:1的比例，但实际值可以根据屏幕空间的不同而增加或减少。</p><p id="a77f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">从这里，在使用<strong class="ka ir"> LookRotation </strong>之前，我可以将这些<strong class="ka ir">夹紧值</strong>输入到一个新的<strong class="ka ir">矢量3 </strong>中，以计算<strong class="ka ir">凸台</strong>的<strong class="ka ir">前进方向</strong>与<strong class="ka ir">夹紧目标方向之间的角度。</strong></p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi kw"><img src="../Images/38185a14a91bcd8651e2ae321ddf878e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u7aNpWC1jJah661-HiTDeQ.png"/></div></div></figure><p id="7230" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后<strong class="ka ir">旋转</strong>刀架本身，我用<strong class="ka ir"> Lerp </strong>从当前<strong class="ka ir">局部旋转，</strong>移动到<strong class="ka ir">目标旋转。为了找到所有合适的变量，我们做了大量的实验，我必须向奥斯汀·麦克雷尔发出呼喊，以获得各种消息和帮助！</strong></p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ld"><img src="../Images/c6d2fc91c72123463acaee4ac7c0009f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*T-so8kzL6mF7sxw60TcCwQ.gif"/></div></div></figure></div><div class="ab cl le lf hu lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="ij ik il im in"><p id="5bff" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">随着武器的完成，我现在可以考虑创建一个<strong class="ka ir">医疗系统。为了做到这一点，我想让每个<strong class="ka ir">炮塔</strong>都能够受到伤害，在触发最后阶段之前贡献大部分总体<strong class="ka ir"> Boss生命值</strong>。</strong></p><p id="7166" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">每个<strong class="ka ir">标准炮塔</strong>可以射击2次，每次造成10点伤害。而<strong class="ka ir">大型炮塔</strong>取4。总的来说，总共造成240点伤害，剩下60点伤害在最后阶段完成，总共造成300点伤害。</p><p id="e8e7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我创建了一个<strong class="ka ir"> UI滑块</strong>来显示在屏幕底部，这在以前的gif中已经出现过，它的值为300，所以可以直接关联到<strong class="ka ir">健康变量。</strong></p><p id="5307" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">每个<strong class="ka ir">炮塔</strong>负责通过在<strong class="ka ir">控制中心修改的变量来跟踪自己的<strong class="ka ir">健康</strong>。</strong></p><p id="cc08" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为了让<strong class="ka ir"> Boss </strong>计算它的总生命值，它首先需要从<strong class="ka ir">炮塔脚本中获取<strong class="ka ir"> int变量</strong>。</strong></p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi kw"><img src="../Images/b8c1f0bf7fb3320316229e5f928ea9e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Dm_hKxzHUdwT7Pq-Tg2RJA.png"/></div></div></figure><p id="3bf2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后在<strong class="ka ir">炮塔脚本</strong>中，我可以调用一个<strong class="ka ir">伤害方法</strong>来减少<strong class="ka ir">炮塔生命值</strong>并在<strong class="ka ir"> Boss脚本中调用一个<strong class="ka ir">炮塔伤害方法</strong>。</strong>在这里，我也检查了0生命值，将<strong class="ka ir">炮塔关闭，</strong>将其从<strong class="ka ir">活动炮塔列表中移除，</strong>并触发一些伤害视觉效果。</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi kw"><img src="../Images/59106d40fe20f93e6cc269ea1df442b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HnqY724NKf2tKm2siXOsZQ.png"/></div></div></figure><p id="7086" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">回到<strong class="ka ir"> Boss脚本，</strong>这里我可以做上面<strong class="ka ir">炮塔脚本</strong>调用的事情，然后更新<strong class="ka ir"> UI。</strong>我对<strong class="ka ir">健康变量</strong>进行了一些检查，以便稍后触发最终阶段和死亡功能。</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi kw"><img src="../Images/53416353a79aec36ddbea8cd108f7e95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oKkAD62ZOFVs4HsUVR2rEQ.png"/></div></div></figure><p id="7d73" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在<strong class="ka ir"> UIManager脚本中，</strong>我需要检查<strong class="ka ir"> Wave ID </strong>，这样我就可以关闭<strong class="ka ir"> Wave Display UI </strong>并在它的位置激活<strong class="ka ir"> Boss Display </strong>。稍后我可能会添加一些额外的<strong class="ka ir"> UI元素</strong>来提供一个老板正在接近的警告系统。</p><p id="c4e1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我还不得不在<strong class="ka ir">产卵管理器</strong>中做了一些修改，以防止普通敌人产卵，但允许电力仍然产卵。</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi kw"><img src="../Images/15796630880ca15c52ad211cccaebadc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rDpXJGGOYjPENMU9hrs1vg.png"/></div></div></figure><p id="9fbd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在剩下的就是一些收尾工作了！</p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ll"><img src="../Images/f3cf5456fa5a1edc5b1e9c9719fba54a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*iFRbupj6_ynGIEPj-QmIyw.gif"/></div></div></figure><p id="046d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在这里阅读它们<a class="ae lm" rel="noopener ugc nofollow" target="_blank" href="/space-shooter-challenge-boss-part-4-final-state-and-tidy-up-56243a6d6c70"/>！</p></div></div>    
</body>
</html>