<html>
<head>
<title>Powering React Native with Kotlin and Swift</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用科特林和斯威夫特给原生反应提供动力</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/powering-react-native-with-kotlin-swift-support-e5c1210a4e25?source=collection_archive---------2-----------------------#2019-12-17">https://levelup.gitconnected.com/powering-react-native-with-kotlin-swift-support-e5c1210a4e25?source=collection_archive---------2-----------------------#2019-12-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="fa8a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">React Native虽然进步不少，但还是缺乏对Kotlin和Swift的内置支持。它仍然附带了用于本机代码的Java和Objective-C模板。既然Android和iOS都已经下定决心将重心从遗留语言转移到Kotlin和Swift，那么开发者就应该转向最新的趋势。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/76e1c3c9cd283621a95b6a06cc1391bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*IDcLJfrhnutTpoLX.png"/></div></div></figure><p id="1690" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">由于Android和iOS分别为Kotlin和Swift提供一流的支持，它们已经为这两种语言建立了良好的文档。然而，它们仍然可以使用Java和Objective-C，而且仍然没有计划放弃对它们的支持。</p><p id="0163" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">当React本地开发人员需要使用桥构建本地实现时，Kotlin和Swift都很方便。因此，如果你已经在使用桥接或者计划学习/使用桥接，这篇文章将对你有所帮助。</p><h2 id="9386" class="la lb it bd lc ld le dn lf lg lh dp li kb lj lk ll kf lm ln lo kj lp lq lr ls bi translated">集成Kotlin对Android的支持</h2><ol class=""><li id="92aa" class="lt lu it js b jt lv jx lw kb lx kf ly kj lz kn ma mb mc md bi translated">打开并编辑<code class="fe me mf mg mh b">android/build.gradle</code></li></ol><p id="7f6a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">添加科特林版本</p><pre class="kp kq kr ks gt mi mh mj mk aw ml bi"><span id="f8bc" class="la lb it mh b gy mm mn l mo mp">buildscript {    <br/>  ext {  <br/>        kotlin_version = '1.3.61'<br/>        ...<br/>  }</span></pre><p id="8fcb" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">确保<code class="fe me mf mg mh b">google()</code>在<code class="fe me mf mg mh b">buildscript.repositories</code>和<code class="fe me mf mg mh b">allprojects.repositories</code>中</p><p id="a5dc" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">更新<code class="fe me mf mg mh b">build.tools</code>并将<code class="fe me mf mg mh b">kotlin-grade-plugin</code>类路径添加到依赖项中。</p><pre class="kp kq kr ks gt mi mh mj mk aw ml bi"><span id="6a00" class="la lb it mh b gy mm mn l mo mp">dependencies {             <br/>  classpath("com.android.tools.build:gradle:3.4.2")        <br/>  classpath("org.jetbrains.kotlin:kotlin-gradle-<br/>            plugin:$kotlin_version")<br/>}</span></pre><p id="077f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">最后，我们的<code class="fe me mf mg mh b">android/build.gradle</code>将是:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="ec2b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">2.在<code class="fe me mf mg mh b">android/app/build.gradle</code>中添加导入</p><pre class="kp kq kr ks gt mi mh mj mk aw ml bi"><span id="ba10" class="la lb it mh b gy mm mn l mo mp">apply plugin: "kotlin-android"<br/>apply plugin: "kotlin-android-extensions"</span></pre><p id="98b4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">3.删除<code class="fe me mf mg mh b">MainApplication.java</code>并创建一个新文件<code class="fe me mf mg mh b">MainApplication.kt</code></p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="0bfd" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">4.删除<code class="fe me mf mg mh b">MainActivity.java</code>并创建一个新文件<code class="fe me mf mg mh b">MainActivity.kt</code></p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="mq mr l"/></div></figure><h2 id="7a3f" class="la lb it bd lc ld le dn lf lg lh dp li kb lj lk ll kf lm ln lo kj lp lq lr ls bi translated">集成对iOS的Swift支持</h2><p id="a090" class="pw-post-body-paragraph jq jr it js b jt lv jv jw jx lw jz ka kb ms kd ke kf mt kh ki kj mu kl km kn im bi translated">1)在Xcode中打开工作空间项目</p><p id="ab24" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">2)删除这些文件:</p><ul class=""><li id="2c1e" class="lt lu it js b jt ju jx jy kb mv kf mw kj mx kn my mb mc md bi translated"><code class="fe me mf mg mh b">AppDelegate.h</code></li><li id="70b9" class="lt lu it js b jt mz jx na kb nb kf nc kj nd kn my mb mc md bi translated"><code class="fe me mf mg mh b">AppDelegate.m</code></li><li id="e9e8" class="lt lu it js b jt mz jx na kb nb kf nc kj nd kn my mb mc md bi translated"><code class="fe me mf mg mh b">main.m</code></li></ul><p id="b89c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">3)创建一个名为<code class="fe me mf mg mh b">AppDelegate</code>的新Swift文件，点击“下一步”，同时点击创建桥接标题</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ne"><img src="../Images/39313b7c5e2d723767d4098f9ff7a2a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-4I35p_zujSrQXjEqrms0w.png"/></div></div></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/546164eb1bfceabc501fc2747220db10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1326/format:webp/1*hPmZTUTc_F8895M_ZTR3ew.png"/></div></figure><p id="9f51" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">4)在<code class="fe me mf mg mh b">AppDelegate.swift</code>中复制以下内容</p><p id="68b3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">用您的项目名称替换文本<code class="fe me mf mg mh b"><em class="ng">REPLACE_WITH_YOUR_PROJECT_NAME</em></code> <strong class="js iu"> <em class="ng"> </em> </strong>。对我来说是<code class="fe me mf mg mh b">KotlinSwiftRN</code>。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="c4e2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">5)将以下代码复制到<code class="fe me mf mg mh b">Bridging</code>头文件中</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="eee2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在React Native方面，我们将保持我们的UI简单，使用特定于平台的<code class="fe me mf mg mh b">Image</code>和<code class="fe me mf mg mh b">Text</code>。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="mq mr l"/></div></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/2c6656174702b3586715d3bc4c1be85e.png" data-original-src="https://miro.medium.com/v2/resize:fit:932/format:webp/1*Kylyn_-NbdW4uvTSBTy1mA.png"/></div></figure><blockquote class="ni nj nk"><p id="0418" class="jq jr ng js b jt ju jv jw jx jy jz ka nl kc kd ke nm kg kh ki nn kk kl km kn im bi translated"><strong class="js iu">注意</strong>:如果构建失败，尝试切换到遗留构建系统，方法是转到文件菜单→工作区设置，然后选择遗留构建系统</p></blockquote><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi no"><img src="../Images/55c49251669ef74ff4c18ea88c4f8aa0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xehqE2jSLYDgNZbfKoAb9Q.png"/></div></div></figure><p id="82e7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">你可以参考我的GitHub Repo获得完整的代码库:</p><div class="np nq gp gr nr ns"><a href="https://github.com/KPS250/ReactNative_Kotlin-Swift" rel="noopener  ugc nofollow" target="_blank"><div class="nt ab fo"><div class="nu ab nv cl cj nw"><h2 class="bd iu gy z fp nx fr fs ny fu fw is bi translated">KPS 250/react national _ kot Lin-Swift</h2><div class="nz l"><h3 class="bd b gy z fp nx fr fs ny fu fw dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="oa l"><p class="bd b dl z fp nx fr fs ny fu fw dk translated">github.com</p></div></div><div class="ob l"><div class="oc l od oe of ob og ky ns"/></div></div></a></div></div></div>    
</body>
</html>