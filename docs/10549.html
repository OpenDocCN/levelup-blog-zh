<html>
<head>
<title>CodeIgniter 4 Query Helper $db-&gt;getLastQuery() method for SQL prototyping</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">CodeIgniter 4查询助手$db-&gt;getLastQuery()方法用于SQL原型</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/codeigniter-4-query-helper-db-getlastquery-method-for-sql-prototyping-b8c7d78f18a1?source=collection_archive---------16-----------------------#2021-12-19">https://levelup.gitconnected.com/codeigniter-4-query-helper-db-getlastquery-method-for-sql-prototyping-b8c7d78f18a1?source=collection_archive---------16-----------------------#2021-12-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="1019" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在开发程序和应用程序时，我们总是在代码中调试或原型化一些东西。</p><p id="3eb6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">作为一名<em class="ko"> SQL优先</em>类型的开发人员，我喜欢编写复杂的SQL查询，因此，<em class="ko">将它们通过</em>移植到我正在使用的任何ORM(或<em class="ko"> ORM-like </em>特性，如CodeIgniter 4查询构建器类)上。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi kp"><img src="../Images/d1fcdc62f9498b1fb45fb7c49118e00a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*H7wwqtksVVwWNEXAYYr4Iw.jpeg"/></div></figure><p id="6322" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我已经在几个项目中大量使用了CodeIgniter 4 PHP框架(我真的真的很喜欢它),并希望分享我在使用MySQL查询的Query Builder方法时的一个首选<em class="ko">工作流</em>。</p><div class="kx ky gp gr kz la"><a rel="noopener  ugc nofollow" target="_blank" href="/how-to-retrieve-mysql-last-insert-id-in-codeigniter-4-c727e68b3efb"><div class="lb ab fo"><div class="lc ab ld cl cj le"><h2 class="bd iu gy z fp lf fr fs lg fu fw is bi translated">如何在CodeIgniter 4中检索MySQL最后插入ID</h2><div class="lh l"><h3 class="bd b gy z fp lf fr fs lg fu fw dk translated">我在学习、个人项目和应用程序开发中大量使用CodeIgniter 4。在这篇文章中，我涵盖了2…</h3></div><div class="li l"><p class="bd b dl z fp lf fr fs lg fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="lj l"><div class="lk l ll lm ln lj lo kv la"/></div></div></a></div><p id="765c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">你是<a class="ae lp" href="http://medium.com/" rel="noopener">中级</a>会员吗？如果是这样，<a class="ae lp" href="https://parabollus.medium.com/subscribe" rel="noopener">每当我在这里发表博客文章时，都会收到电子邮件通知</a>。不是会员？别担心！使用<a class="ae lp" href="https://parabollus.medium.com/membership" rel="noopener">我的注册链接</a>(我将获得佣金，无需额外费用)并加入。我真的很喜欢阅读这里所有精彩的内容，我知道你也会喜欢的！！！</p><h2 id="d19e" class="lq lr it bd ls lt lu dn lv lw lx dp ly kb lz ma mb kf mc md me kj mf mg mh mi bi translated">查询助手$db-&gt;getLastQuery()</h2><p id="fc5b" class="pw-post-body-paragraph jq jr it js b jt mj jv jw jx mk jz ka kb ml kd ke kf mm kh ki kj mn kl km kn im bi translated">如果您也在使用CodeIgniter 4，并且想知道您的查询构建器<code class="fe mo mp mq mr b">$builder</code>方法如何<em class="ko">映射出</em>到实际执行的SQL，您可以使用<a class="ae lp" href="https://codeigniter.com/user_guide/database/helpers.html" rel="noopener ugc nofollow" target="_blank">查询助手</a> <code class="fe mo mp mq mr b"><a class="ae lp" href="https://codeigniter.com/user_guide/database/queries.html#the-query-class" rel="noopener ugc nofollow" target="_blank">$db-&gt;getLastQuery()</a></code> <a class="ae lp" href="https://codeigniter.com/user_guide/database/queries.html#the-query-class" rel="noopener ugc nofollow" target="_blank">方法</a>并且(可选)使用<a class="ae lp" href="https://codeigniter.com/user_guide/general/common_functions.html?highlight=log_message#log_message" rel="noopener ugc nofollow" target="_blank">全局</a> <code class="fe mo mp mq mr b"><a class="ae lp" href="https://codeigniter.com/user_guide/general/common_functions.html?highlight=log_message#log_message" rel="noopener ugc nofollow" target="_blank">log_message()</a></code> <a class="ae lp" href="https://codeigniter.com/user_guide/general/common_functions.html?highlight=log_message#log_message" rel="noopener ugc nofollow" target="_blank">函数</a>记录查询。</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><p id="d118" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><a class="ae lp" href="http://openlamptech.substack.com" rel="noopener ugc nofollow" target="_blank"> OpenLamp.tech </a>，<strong class="js iu"> <em class="ko">针对PHP/MySQL开发者的简讯</em> </strong>。立即注册(这是免费的)并帮助建立社区。</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><p id="5a1f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">为了便于理解，举一个我在一个模型类中创建的下面的<code class="fe mo mp mq mr b">someQuery()</code>方法，从众所周知的<a class="ae lp" href="https://dev.mysql.com/doc/sakila/en/" rel="noopener ugc nofollow" target="_blank"> sakila实践数据库</a>中设置“actor”表上的<code class="fe mo mp mq mr b">$db-&gt;table()</code>方法:</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="na nb di nc bf nd"><div class="gh gi mz"><img src="../Images/326a4a51fa7166dc9ff408297d0cdd2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wvvxuDbixkwijH6aCgIF7A.png"/></div></div><figcaption class="ne nf gj gh gi ng nh bd b be z dk translated">使用CodeIgniter 4的getLastQuery()方法进行调试。</figcaption></figure><p id="1475" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">下面是<code class="fe mo mp mq mr b">$db-&gt;getLastQuery()</code>的记录结果:</p><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="9c6f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe mo mp mq mr b">$db-&gt;getLastQuery()</code>方法返回发送到MySQL数据库的查询。因此，通过使用<code class="fe mo mp mq mr b">log_message()</code>记录查询，您可以看到实际的SQL查询，并根据需要进行相应的调整。</p><p id="bfa0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">对于复杂的查询——通常等同于复杂的<code class="fe mo mp mq mr b">$builder</code>模式——这是原型化和调试查询中不可或缺的方法。</p><p id="3c1d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我一直使用<code class="fe mo mp mq mr b">$db-&gt;getLastQuery()</code>方法。我希望你也能在你的工作流程中找到它的用处！</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><p id="60e9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><a class="ae lp" href="http://openlamptech.substack.com" rel="noopener ugc nofollow" target="_blank"> OpenLamp.tech </a>，<strong class="js iu">，<em class="ko">PHP/MySQL开发者快讯</em>，</strong>。立即注册(这是免费的)并帮助建立社区。</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><div class="kq kr ks kt gt la"><a rel="noopener  ugc nofollow" target="_blank" href="/codeigniter-4-anchor-url-helper-function-c7eefbf7252c"><div class="lb ab fo"><div class="lc ab ld cl cj le"><h2 class="bd iu gy z fp lf fr fs lg fu fw is bi translated">CodeIgniter 4 anchor() URL辅助函数</h2><div class="lh l"><h3 class="bd b gy z fp lf fr fs lg fu fw dk translated">最近，我尽可能依赖CodeIgniter 4框架的每一个内置功能。一个我已经…</h3></div><div class="li l"><p class="bd b dl z fp lf fr fs lg fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="lj l"><div class="nk l ll lm ln lj lo kv la"/></div></div></a></div><div class="kx ky gp gr kz la"><a href="https://parabollus.medium.com/openlamp-tech-issue-3-5-mysql-string-functions-you-should-know-efd900b14c4f" rel="noopener follow" target="_blank"><div class="lb ab fo"><div class="lc ab ld cl cj le"><h2 class="bd iu gy z fp lf fr fs lg fu fw is bi translated">OpenLamp.tech第3期—你应该知道的5个MySQL字符串函数</h2><div class="lh l"><h3 class="bd b gy z fp lf fr fs lg fu fw dk translated">这周的OpenLamp.tech，PHP/MySQL开发人员的时事通讯，已经出版了，它是每月一期的…</h3></div><div class="li l"><p class="bd b dl z fp lf fr fs lg fu fw dk translated">parabollus.medium.com</p></div></div><div class="lj l"><div class="nl l ll lm ln lj lo kv la"/></div></div></a></div><p id="e6ef" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">一如既往，如果你有任何问题或看到代码中的任何错误，请通过评论让我知道。建设性的意见有助于我提供准确的博客帖子，我非常感激。感谢您的阅读！</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><p id="ec47" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我总是在我的博客上写关于SQL、PHP和CodeIgniter的文章。此外，我正在用我的免费每周简讯<a class="ae lp" href="http://openlamptech.substack.com" rel="noopener ugc nofollow" target="_blank"> OpenLamp.tech </a>建立一个由志同道合的PHP/MySQL开发人员组成的社区，如果你注册的话，我会非常感激。</p></div></div>    
</body>
</html>