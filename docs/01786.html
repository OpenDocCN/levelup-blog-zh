<html>
<head>
<title>Visualize Your Data From MySQL in a Matter of Minutes With Grafana</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Grafana，在几分钟内从MySQL可视化您的数据</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/visualize-your-data-from-mysql-in-a-matter-of-minutes-with-grafana-54cf3e63a160?source=collection_archive---------9-----------------------#2020-01-29">https://levelup.gitconnected.com/visualize-your-data-from-mysql-in-a-matter-of-minutes-with-grafana-54cf3e63a160?source=collection_archive---------9-----------------------#2020-01-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="423d" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用Python、VS代码和Docker</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/c0b4239a7cb76f8515bcf961b954d6d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tEmUASehX8-m-NGx2EZHpw.png"/></div></div></figure><p id="9135" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">不管你是哪种类型的开发人员，可视化数据和创建趋势或图表的需求是必不可少的。本指南向您展示了开始使用优秀工具有多快。</p><h2 id="3696" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">你将被介绍给什么</h2><ul class=""><li id="3178" class="mg mh iq kt b ku mi kx mj la mk le ml li mm lm mn mo mp mq bi translated">在Docker中运行你的开发环境<strong class="kt ir"> </strong>并连接VS代码</li><li id="a192" class="mg mh iq kt b ku mr kx ms la mt le mu li mv lm mn mo mp mq bi translated">将数据从Python脚本写入MySQL数据库</li><li id="6197" class="mg mh iq kt b ku mr kx ms la mt le mu li mv lm mn mo mp mq bi translated">只需点击几下鼠标，就能看到<a class="ae mw" href="https://grafana.com/" rel="noopener ugc nofollow" target="_blank"> Grafana </a>中的数据</li></ul><h2 id="1f13" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">先决条件</h2><ul class=""><li id="c50f" class="mg mh iq kt b ku mi kx mj la mk le ml li mm lm mn mo mp mq bi translated"><a class="ae mw" href="https://code.visualstudio.com/" rel="noopener ugc nofollow" target="_blank"> Visual Studio代码</a>，以及<a class="ae mw" href="https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-containers" rel="noopener ugc nofollow" target="_blank">远程容器</a>扩展</li><li id="e655" class="mg mh iq kt b ku mr kx ms la mt le mu li mv lm mn mo mp mq bi translated"><a class="ae mw" href="https://www.docker.com/" rel="noopener ugc nofollow" target="_blank"> Docker和Docker组成</a></li></ul><p id="1d46" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">要测试先决条件，使用本指南<a class="ae mw" href="https://code.visualstudio.com/docs/remote/containers" rel="noopener ugc nofollow" target="_blank">并克隆“快速入门:尝试开发容器”下的一个示例存储库。</a></p><h2 id="3ddc" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">工具介绍以及为什么使用它们</h2><ul class=""><li id="0285" class="mg mh iq kt b ku mi kx mj la mk le ml li mm lm mn mo mp mq bi translated"><strong class="kt ir"> VS代码:</strong>最流行的文本编辑器之一<strong class="kt ir">。VS code本身是一个非常干净和标准的文本编辑器，但是添加扩展的可能性使得它可以兼容几乎所有的东西。因为受欢迎，网上找有很多帮助。</strong></li><li id="4254" class="mg mh iq kt b ku mr kx ms la mt le mu li mv lm mn mo mp mq bi translated"><strong class="kt ir"> VS Code Remote-Containers扩展:</strong>这个扩展允许您在Docker容器中开发、调试和运行代码。使用容器作为开发环境有几个好处。举几个例子:运行某些软件的不同版本很快，你可以轻松地运行完全分离的多个环境，你可以将你的docker文件传递给你的团队，他们可以在几分钟内完成开发，没有任何安装挑战。如果您也在一个容器中运行您的生产环境，那么您的开发和您的生产环境之间将会有很小的差异或者没有差异，这减少了您在将代码推向生产时可能得到的惊喜。</li><li id="2927" class="mg mh iq kt b ku mr kx ms la mt le mu li mv lm mn mo mp mq bi translated">Docker是一个可以在你的电脑上运行容器的软件。使用Docker的一个很好的理由是，几乎每个开发软件都有一个你可以拉取和使用的映像。只需搜索<a class="ae mw" href="https://hub.docker.com/" rel="noopener ugc nofollow" target="_blank">中枢</a>寻找你需要的东西，拉动它，运行它。例如，在本教程中，我为<a class="ae mw" href="https://hub.docker.com/_/mysql" rel="noopener ugc nofollow" target="_blank"> MySQL </a>、<a class="ae mw" href="https://hub.docker.com/_/adminer" rel="noopener ugc nofollow" target="_blank"> Adminer </a>和<a class="ae mw" href="https://hub.docker.com/r/grafana/grafana" rel="noopener ugc nofollow" target="_blank"> Grafana </a>使用了一张图片。</li><li id="fb12" class="mg mh iq kt b ku mr kx ms la mt le mu li mv lm mn mo mp mq bi translated"><strong class="kt ir"> Docker Compose: </strong>使运行一个包含多个容器的环境成为可能，使用一个命令，包含它们之间的网络连接。在本教程中，它使用Python、Grafana、MySQL和Adminer运行容器进行开发，其中Grafana使用网络从MySQL收集数据。</li><li id="862b" class="mg mh iq kt b ku mr kx ms la mt le mu li mv lm mn mo mp mq bi translated"><strong class="kt ir"> Grafana: </strong>这是一个为你制作图表的工具。它为许多数据源和许多插件提供了“开箱即用”的解决方案。它使得在几分钟内可视化数据成为可能。在本教程中，数据是从MySQL中收集的，并用Grafana中的图形可视化。</li></ul><h2 id="49cd" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">我们开始吧</h2><p id="4211" class="pw-post-body-paragraph kr ks iq kt b ku mi jr kw kx mj ju kz la mx lc ld le my lg lh li mz lk ll lm ij bi translated">需要三个主要步骤。(1)启动并运行您的开发环境。(2)将数据插入MySQL运行的实例中。(3)连接Grafana向MySQL请求数据。</p><ol class=""><li id="0e98" class="mg mh iq kt b ku kv kx ky la na le nb li nc lm nd mo mp mq bi translated">启动并运行您的开发</li></ol><p id="06d8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">像这样设置项目文件夹结构:</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="6efa" class="ln lo iq nf b gy nj nk l nl nm">projectname<br/>+-- test.py<br/>+-- .devcontainer<br/>    +-- devcontainer.json<br/>    +-- docker-compose.yml<br/>    +-- Dockerfile</span></pre><p id="1e5a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">添加文件的内容:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div><figcaption class="np nq gj gh gi nr ns bd b be z dk translated">文件的内容</figcaption></figure><p id="c64d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">通过使用VS代码打开容器中的文件夹来运行环境。打开VS代码，点击<code class="fe nt nu nv nf b">Ctrl+Shift+p</code> (Windows。打开命令选项板。)并开始键入“Remote-Containers”并选择“Remote-Containers:Open folder in container”并选择项目文件夹(不是。devcontainer)。码头工人将拉动和运行所需的4个集装箱，这将需要一些时间…</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nw"><img src="../Images/701b26889597ab8679bd28b91571ec86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZHYEaDnr776n1gUw0aHkug.png"/></div></div><figcaption class="np nq gj gh gi nr ns bd b be z dk translated">VS代码命令面板</figcaption></figure><p id="0160" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">通过在<code class="fe nt nu nv nf b">localhost:3000</code>访问浏览器中的Grafana实例来测试您的环境是否正在运行。您应该看到这个:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/10a3b5153513c57c18b34a83c8cbbed9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1364/format:webp/1*sB9mLtIvlhGsF0qkLnITIQ.png"/></div><figcaption class="np nq gj gh gi nr ns bd b be z dk translated">Grafana登录</figcaption></figure><p id="6c0f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">暂时先放着。</p><p id="4e9e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">2.首先将一些数据插入到MySQL的实例中，以便能够在Grafana中可视化一些数据。运行Python文件<code class="fe nt nu nv nf b">test.py</code>。这个脚本每秒钟向表中添加一个数据库、一个表和一个值。</p><p id="2871" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您可以使用“Adminer”的实例来检查数据是否被插入。在<code class="fe nt nu nv nf b">localhost:8080</code>上打开浏览器，用户名:<code class="fe nt nu nv nf b">root</code>，密码:<code class="fe nt nu nv nf b">example</code>。点击“我的数据库”，然后“测试表”，然后“选择数据”，你应该可以在一个表格中看到你的数据。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/1546c84019a1dc45c8d16b4b0c69681d.png" data-original-src="https://miro.medium.com/v2/resize:fit:790/format:webp/1*EMGG9tY9tK7kIlpS9YaYgA.png"/></div><figcaption class="np nq gj gh gi nr ns bd b be z dk translated">管理员测试表数据</figcaption></figure><p id="424f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">3.连接Grafana从MySQL请求数据。在<code class="fe nt nu nv nf b">localhost:3000</code>上打开浏览器，使用用户名<code class="fe nt nu nv nf b">admin</code>和密码<code class="fe nt nu nv nf b">admin</code>登录。系统会提示您输入新密码，您可以跳过它。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/a6e589c6a3a6ca34b86bebfa9cd99ed4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1398/format:webp/1*A1mMDZSHtysdISZ12MSSjQ.png"/></div><figcaption class="np nq gj gh gi nr ns bd b be z dk translated">Grafana主页仪表板</figcaption></figure><p id="9e57" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在“主页面板”点击“添加数据源”，选择“MySQL”。添加下面列出的配置:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/dcc2264809a23692b6fbef15a1391305.png" data-original-src="https://miro.medium.com/v2/resize:fit:1104/format:webp/1*aYOw0dKVfwLnb3aNV1F9aw.png"/></div><figcaption class="np nq gj gh gi nr ns bd b be z dk translated">Grafana数据源配置</figcaption></figure><p id="2835" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在“Home Dashboard”中，单击“Create your first dashboard”，单击“Add Query”，将查询更改为下面列出的配置:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/87e2c4e9658477f64f4b18d1d98ff348.png" data-original-src="https://miro.medium.com/v2/resize:fit:1078/format:webp/1*1kVpCF41eqdRaWh2Bv7G6g.png"/></div><figcaption class="np nq gj gh gi nr ns bd b be z dk translated">Grafana查询配置</figcaption></figure><p id="b73e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在右上角，将时间范围更改为最近5分钟。刷新率设置为5s。您现在应该可以看到可视化的数据。像这样:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oc"><img src="../Images/3e10cc1c6eb43f6f4a7bc73d9e430bde.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dEOrK1W8yLkItfyxoB4ozQ.png"/></div></div><figcaption class="np nq gj gh gi nr ns bd b be z dk translated">格拉夫纳面板</figcaption></figure><p id="d500" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">保存您的仪表板以备后用，在右上角。</p><p id="e4ab" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">可以向您的仪表板添加更多面板，以便能够在同一个仪表板上查看许多不同的值。网上有很多制作仪表盘的好资源。</p></div><div class="ab cl od oe hu of" role="separator"><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi"/></div><div class="ij ik il im in"><p id="38e0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">感谢您阅读我的作品，希望您能从中找到一些帮助！</p></div></div>    
</body>
</html>