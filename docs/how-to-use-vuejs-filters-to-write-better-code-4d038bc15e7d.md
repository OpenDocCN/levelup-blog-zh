# 如何使用 VueJS 过滤器编写更好的代码

> 原文：<https://levelup.gitconnected.com/how-to-use-vuejs-filters-to-write-better-code-4d038bc15e7d>

![](img/81416162015a6b2b843010db4d327d1f.png)

保罗·斯科鲁普斯卡斯在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上的照片

大多数 VueJS 开发人员都非常熟悉计算属性。它们是设计可读性更强的代码和清理模板的好方法。

然而，在某些情况下，有一个更好的解决方案可以产生更多的[可重用代码](https://learnvue.co/2019/12/building-reusable-components-in-vuejs-tabs/) : VueJS 过滤器。

在本文中，我们将回顾…

*   为什么要使用 VueJS 过滤器
*   如何给它们编码
*   高级过滤技术
*   计算属性与 VueJS 过滤器

最后，您应该对何时、为什么以及如何在您的项目中实现 VueJS 过滤器有了一个明确的想法。

3…2..1…过滤时间！

# 如何使用 VueJS 过滤器

首先，我们必须了解 VueJS 滤波器到底是什么。简单地说，过滤器为我们提供了一种创建可重用文本转换的方法。

Vue 过滤器在两个方面不同于[计算的属性](https://learnvue.co/2019/12/mastering-computed-properties-in-vuejs/)。

1.  计算的属性依赖于特定的属性，而过滤器可以在不同的值上重复使用
2.  计算属性可用于所有属性，而过滤器主要用于文本转换

第二，因为 VueJS 过滤器是用于文本转换的，它们只能在两个地方使用:**mustache interpolation**(模板中的花括号)和 **v-bind 表达式**。

> *计算属性依赖于特定属性的***，而过滤器可以在不同的值上重复使用**

# *那么我们如何给它们编码呢？*

*编写 Vue 滤镜应该感觉非常熟悉。像定义计算属性或组件方法一样，只需将它们放在 filters 对象内的组件选项对象中。*

*例如，假设我们需要一个预览过滤器，它接受一个字符串，返回前 50 个字符，后跟一个省略号。在我们的选项对象中，看起来有点像这样。*

```
*filters: {
    preview: (value) => {
      if (!value) {
        return ''
      }
      return value.substring(0, 50) + '...'
    }
}*
```

*这里有几件重要的事情需要注意。首先，我们做了一个错误检查，看看值是否为空。第二，我们必须确保我们**返回**值。*

*但总的来说，很简单，对吧？现在，让我们看看如何将它添加到您的模板中。*

*使用 Vue 过滤器需要一个简单的语法。格式为*值|过滤器**

*如前所述，有两种情况我们可以使用计算属性:在模板的花括号之间和使用 v-bind 的时候*

```
*<!-- Mustache Interpolation -->
{{ content | preview }}<!-- using a v-bind: -->
<div :class='rawID | formatID' />*
```

# *更先进的技术*

*既然我们已经介绍了 Vue 滤镜的基础知识，那么还有一些高级技巧和窍门可以让它们变得更加强大。*

*学习完这些技巧后，你可以添加的滤镜种类将会是无限的。*

## *声明全局过滤器*

*我们的第一个过滤器实现是在本地使用它们，这意味着这些过滤器只对我们定义它的组件可用。然而，在我们的整个 Vue 项目中，我们希望有一些通用的过滤器。*

*例如生成预览、日期格式化、标准化大小写等等。*

*幸运的是，就像 Vue 中的其他东西一样，很容易全局声明一个过滤器。我们所要做的就是在初始化 Vue 对象之前使用 Vue.filter 函数。*

```
*Vue.filter('preview', (value) => {
  if (!value) {
    return ''
  }
  return value.substring(0, 30) + '...'
})// init code
new Vue({...*
```

## *链接过滤器*

*也可以对一个值应用多个过滤器。*

*这很直观。我们所要做的就是在我们的第一个过滤器后插入另一个“管道”，然后声明我们的第二个过滤器。类似这样的。*

```
*{{ content | preview | capitalized }}*
```

*现在，两种文本转换都应用于我们的原始数据。*

# *将参数传递给过滤器*

*因为 Vue 过滤器实际上只是 Javascript 函数，所以我们可以给它们传递参数。它通常以你期望的方式工作，但是有一件**重要的**事情你必须知道。*

*无论您是否传递参数，您想要修改的值都将作为第一个参数传递。*

*例如，如果我们想在预览过滤器中添加一个允许我们更改截止点的参数，我们可以这样做。*

```
*filters: {
    preview: (value, cutoff) => {
      if (!value) {
        return ''
      }
      return value.substring(0, cutoff) + '...'
    }
}*
```

*然后，当我们声明我们的过滤器时，我们只需要在我们的值后添加第二个参数。它看起来会像这样。*

```
*{{ content | preview(15) }}*
```

*第一个参数是值，第二个、第三个等等是我们传递给函数的任何值。*

# *为什么不计算属性*

*你可能会问，“等等，难道我不能用计算属性来做这件事吗？”你可以的。然而，这并不总是最好的解决方案。*

*就像我们在文章前面讨论的，计算属性只是 [Vue 观察器](https://learnvue.co/2019/12/a-simple-vue-watcher-tutorial-for-beginners/)。因此，它们被绑定到特定的属性。这意味着它们不能被一般化并应用于所有类型的数据。*

*使用过滤器而不是计算属性非常有用的一个常见例子是**日期格式化。***

*假设我们有一个文章列表，我们想显示每一项的日期。如果我们使用计算属性，这将是非常困难的。我们需要为每个项目创建计算属性——这对于大多数实际项目来说在逻辑上是不可能的。*

*然而，如果我们使用过滤器，我们可以像这样格式化每个日期。*

```
*{{ article.date | formattedDate }}*
```

*因此，它们被绑定到特定的属性。这意味着它们不能被一般化并应用于所有类型的数据。*

*这使得它变得更加简单，可读性更好，并且可以省去很多令人头疼的问题。*

# *结论*

*唷。我们做到了。文章的结尾。*

*简而言之，VueJS 过滤器是在项目中实现可重用修改器的好方法。如果使用正确，它们可以非常强大，设计通用过滤器应该是每个 Vue 团队的首要步骤之一。*

*希望您已经了解了 Vue 滤波器的一两件事，并且已经想到了一些方法，可以将其应用到您自己的项目中。*

*如果你有兴趣了解更多关于 Vue 3 的知识，请下载我的免费 Vue 3 备忘单，里面有一些基本知识，比如合成 API、Vue 3 模板语法和事件处理。*

**原载于 2020 年 1 月 6 日*[*【https://learnvue.co】*](https://learnvue.co/2020/01/how-to-use-vuejs-filters-to-write-better-code)*。**