<html>
<head>
<title>Integrating SonarQube to your Flutter App using Docker</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Docker将SonarQube集成到您的Flutter应用程序中</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/integrating-sonarqube-to-your-flutter-app-using-docker-c7b2a8d94e49?source=collection_archive---------3-----------------------#2020-07-19">https://levelup.gitconnected.com/integrating-sonarqube-to-your-flutter-app-using-docker-c7b2a8d94e49?source=collection_archive---------3-----------------------#2020-07-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="d10e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi ko translated"><span class="l kp kq kr bm ks kt ku kv kw di">在</span>写这篇文章的时候，还没有清晰、直接的方法将SonarQube的(【https://www.sonarqube.org/】T2)静态代码分析工具添加到你的Flutter代码中。</p><p id="3f3b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在本文中，我将提供如何安装Docker、修改其状态、将容器保存为图像、添加SonarQube的SonarScanner以及对代码运行分析的分步说明。</p><p id="05fc" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">本教程中使用了一台运行MacOS的机器。</p><h2 id="bd43" class="ky kz it bd la lb lc dn ld le lf dp lg kb lh li lj kf lk ll lm kj ln lo lp lq bi translated">先决条件:</h2><ul class=""><li id="b002" class="lr ls it js b jt lt jx lu kb lv kf lw kj lx kn ly lz ma mb bi translated">dart SDK(【https://dart.dev/get-dart】T4)</li><li id="f6fe" class="lr ls it js b jt mc jx md kb me kf mf kj mg kn ly lz ma mb bi translated">码头工人(<a class="ae kx" href="https://docs.docker.com/engine/install/" rel="noopener ugc nofollow" target="_blank">https://docs.docker.com/engine/install/</a>)</li><li id="e603" class="lr ls it js b jt mc jx md kb me kf mf kj mg kn ly lz ma mb bi translated">声纳扫描颤振插件(<a class="ae kx" href="https://github.com/insideapp-oss/sonar-flutter" rel="noopener ugc nofollow" target="_blank">https://github.com/insideapp-oss/sonar-flutter</a>)</li><li id="cb9f" class="lr ls it js b jt mc jx md kb me kf mf kj mg kn ly lz ma mb bi translated">sonar scanner(<a class="ae kx" href="https://docs.sonarqube.org/latest/analysis/scan/sonarscanner/" rel="noopener ugc nofollow" target="_blank">https://docs . sonar qube . org/latest/analysis/scan/sonar scanner/</a>)</li></ul><h2 id="28ef" class="ky kz it bd la lb lc dn ld le lf dp lg kb lh li lj kf lk ll lm kj ln lo lp lq bi translated">1.下载Docker</h2><p id="7c45" class="pw-post-body-paragraph jq jr it js b jt lt jv jw jx lu jz ka kb mh kd ke kf mi kh ki kj mj kl km kn im bi translated">Docker是一个工具，旨在通过使用容器来简化应用程序的创建、部署和运行。容器允许开发人员将应用程序与它需要的所有部分打包在一起，例如库和其他依赖项，并将其作为单个包进行部署。</p><p id="5a5a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">下载:<a class="ae kx" href="https://docs.docker.com/engine/install/" rel="noopener ugc nofollow" target="_blank">https://docs.docker.com/engine/install/</a></p><p id="92f7" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">下载后，确保您已登录并保持运行。</p><p id="493c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="mk">如果您遇到问题，请尝试:</em></p><blockquote class="ml mm mn"><p id="63fb" class="jq jr mk js b jt ju jv jw jx jy jz ka mo kc kd ke mp kg kh ki mq kk kl km kn im bi translated">- docker注销</p><p id="7c81" class="jq jr mk js b jt ju jv jw jx jy jz ka mo kc kd ke mp kg kh ki mq kk kl km kn im bi translated">docker登录—用户名<username> —密码<password><a class="ae kx" href="https://hub.docker.com" rel="noopener ugc nofollow" target="_blank">https://hub.docker.com</a></password></username></p></blockquote><p id="b5b5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">或者</p><blockquote class="ml mm mn"><p id="5887" class="jq jr mk js b jt ju jv jw jx jy jz ka mo kc kd ke mp kg kh ki mq kk kl km kn im bi translated">docker登录</p></blockquote><h2 id="ecc2" class="ky kz it bd la lb lc dn ld le lf dp lg kb lh li lj kf lk ll lm kj ln lo lp lq bi translated">2.下载声纳扫描颤振插件</h2><p id="e5d0" class="pw-post-body-paragraph jq jr it js b jt lt jv jw jx lu jz ka kb mh kd ke kf mi kh ki kj mj kl km kn im bi translated">在撰写本文时，SonarScanner上还没有对Dart的官方支持，但幸运的是现在有一个插件可以帮助我们</p><p id="5813" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">下载“sonar-flutter-plugin-0.2.1.jar”文件后，将其粘贴到您的flutter项目的根目录下</p><p id="ef3e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">下载:<a class="ae kx" href="https://github.com/insideapp-oss/sonar-flutter" rel="noopener ugc nofollow" target="_blank">https://github.com/insideapp-oss/sonar-flutter</a></p><h2 id="d9a3" class="ky kz it bd la lb lc dn ld le lf dp lg kb lh li lj kf lk ll lm kj ln lo lp lq bi translated">3.创建SonarQube的项目属性文件</h2><p id="d087" class="pw-post-body-paragraph jq jr it js b jt lt jv jw jx lu jz ka kb mh kd ke kf mi kh ki kj mj kl km kn im bi translated">在颤振项目的根目录中，创建“sonar-project.properties ”,并添加以下内容:</p><blockquote class="ml mm mn"><p id="2678" class="jq jr mk js b jt ju jv jw jx jy jz ka mo kc kd ke mp kg kh ki mq kk kl km kn im bi translated">#在给定的SonarQube实例中必须是唯一的</p><p id="d2f0" class="jq jr mk js b jt ju jv jw jx jy jz ka mo kc kd ke mp kg kh ki mq kk kl km kn im bi translated">sonar . project key = flutter template</p><p id="b1c6" class="jq jr mk js b jt ju jv jw jx jy jz ka mo kc kd ke mp kg kh ki mq kk kl km kn im bi translated">sonar . project name = flutter template</p><p id="54d5" class="jq jr mk js b jt ju jv jw jx jy jz ka mo kc kd ke mp kg kh ki mq kk kl km kn im bi translated">sonar.projectVersion=1.0</p><p id="a755" class="jq jr mk js b jt ju jv jw jx jy jz ka mo kc kd ke mp kg kh ki mq kk kl km kn im bi translated"># Path相对于sonar-project.properties文件。默认为</p><p id="0570" class="jq jr mk js b jt ju jv jw jx jy jz ka mo kc kd ke mp kg kh ki mq kk kl km kn im bi translated">sonar.sources=lib</p><p id="e368" class="jq jr mk js b jt ju jv jw jx jy jz ka mo kc kd ke mp kg kh ki mq kk kl km kn im bi translated">声纳测试=测试</p><p id="e31c" class="jq jr mk js b jt ju jv jw jx jy jz ka mo kc kd ke mp kg kh ki mq kk kl km kn im bi translated">#源代码的编码。默认为默认系统编码</p><p id="f7ac" class="jq jr mk js b jt ju jv jw jx jy jz ka mo kc kd ke mp kg kh ki mq kk kl km kn im bi translated">sonar.sourceEncoding=UTF-8</p><p id="ea9f" class="jq jr mk js b jt ju jv jw jx jy jz ka mo kc kd ke mp kg kh ki mq kk kl km kn im bi translated">#排除覆盖测试的规格文件</p><p id="3474" class="jq jr mk js b jt ju jv jw jx jy jz ka mo kc kd ke mp kg kh ki mq kk kl km kn im bi translated">#sonar.exclusions=lib/test</p></blockquote><h2 id="2e82" class="ky kz it bd la lb lc dn ld le lf dp lg kb lh li lj kf lk ll lm kj ln lo lp lq bi translated">4.为您的操作系统下载SonarScanner</h2><p id="8ad0" class="pw-post-body-paragraph jq jr it js b jt lt jv jw jx lu jz ka kb mh kd ke kf mi kh ki kj mj kl km kn im bi translated">下载后，将文件提取到一个容易访问的路径，并将sonar-scanner添加到您的系统路径，以便可以从终端访问它:</p><p id="be33" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">$ PATH _ TO _ SONAR-SCANNER/SONAR-SCANNER-4 . 4 . 0 . 2170-ma cosx/bin</p><p id="ded0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">下载:<a class="ae kx" href="https://docs.sonarqube.org/latest/analysis/scan/sonarscanner/" rel="noopener ugc nofollow" target="_blank">https://docs . sonar qube . org/latest/analysis/scan/sonar scanner/</a></p><h2 id="67e5" class="ky kz it bd la lb lc dn ld le lf dp lg kb lh li lj kf lk ll lm kj ln lo lp lq bi translated">5.创建一个基本容器</h2><p id="6392" class="pw-post-body-paragraph jq jr it js b jt lt jv jw jx lu jz ka kb mh kd ke kf mi kh ki kj mj kl km kn im bi translated">运行:</p><blockquote class="ml mm mn"><p id="86eb" class="jq jr mk js b jt ju jv jw jx jy jz ka mo kc kd ke mp kg kh ki mq kk kl km kn im bi translated">docker create —名称sonarqube base-p 9000:9000 sonarqube</p></blockquote><p id="7292" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这将创建一个名为sonarqubebase的容器，以sonarqube(【https://hub.docker.com/_/sonarqube】)作为其基本映像，并公开端口9000</p><blockquote class="ml mm mn"><p id="df37" class="jq jr mk js b jt ju jv jw jx jy jz ka mo kc kd ke mp kg kh ki mq kk kl km kn im bi translated">检查图像:docker图像</p><p id="646c" class="jq jr mk js b jt ju jv jw jx jy jz ka mo kc kd ke mp kg kh ki mq kk kl km kn im bi translated">检查集装箱:docker ps -a</p></blockquote><h2 id="993b" class="ky kz it bd la lb lc dn ld le lf dp lg kb lh li lj kf lk ll lm kj ln lo lp lq bi translated">6.启动容器</h2><blockquote class="ml mm mn"><p id="94bb" class="jq jr mk js b jt ju jv jw jx jy jz ka mo kc kd ke mp kg kh ki mq kk kl km kn im bi translated">运行:docker sonarqubebase</p></blockquote><p id="37a3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">等待服务器启动，您可以在Docker桌面仪表板上查看日志</p><h2 id="2f26" class="ky kz it bd la lb lc dn ld le lf dp lg kb lh li lj kf lk ll lm kj ln lo lp lq bi translated">7.从容器中创建图像</h2><blockquote class="ml mm mn"><p id="a805" class="jq jr mk js b jt ju jv jw jx jy jz ka mo kc kd ke mp kg kh ki mq kk kl km kn im bi translated">运行:docker提交sonarqubebase</p><p id="0e74" class="jq jr mk js b jt ju jv jw jx jy jz ka mo kc kd ke mp kg kh ki mq kk kl km kn im bi translated">然后运行:docker图像</p></blockquote><p id="8d10" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在标记你的图像</p><p id="7c16" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">运行:</p><blockquote class="ml mm mn"><p id="b7ab" class="jq jr mk js b jt ju jv jw jx jy jz ka mo kc kd ke mp kg kh ki mq kk kl km kn im bi translated"><id>码头工人标签<tagname/></id></p></blockquote><h2 id="ee40" class="ky kz it bd la lb lc dn ld le lf dp lg kb lh li lj kf lk ll lm kj ln lo lp lq bi translated">8.为你的Flutter项目创建一个docker文件</h2><p id="e6c2" class="pw-post-body-paragraph jq jr it js b jt lt jv jw jx lu jz ka kb mh kd ke kf mi kh ki kj mj kl km kn im bi translated">在flutter项目的根目录下创建一个docker文件，代码如下:</p><blockquote class="ml mm mn"><p id="73ff" class="jq jr mk js b jt ju jv jw jx jy jz ka mo kc kd ke mp kg kh ki mq kk kl km kn im bi translated">来自sonarqubebase</p><p id="f5a4" class="jq jr mk js b jt ju jv jw jx jy jz ka mo kc kd ke mp kg kh ki mq kk kl km kn im bi translated">复制sonar-flutter-plugin-0 . 2 . 1 . jar/opt/sonar cube/extensions/plugins</p></blockquote><p id="639f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在这里，我们将非官方的声纳扫描仪插件复制到我们的docker图像中</p><h2 id="cda8" class="ky kz it bd la lb lc dn ld le lf dp lg kb lh li lj kf lk ll lm kj ln lo lp lq bi translated">9.构建和运行</h2><p id="8988" class="pw-post-body-paragraph jq jr it js b jt lt jv jw jx lu jz ka kb mh kd ke kf mi kh ki kj mj kl km kn im bi translated">在Flutter项目的根目录下运行以下命令:</p><blockquote class="ml mm mn"><p id="dc5e" class="jq jr mk js b jt ju jv jw jx jy jz ka mo kc kd ke mp kg kh ki mq kk kl km kn im bi translated">sudo docker build-tag sonarqubescan。</p></blockquote><p id="e2f1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">然后</p><blockquote class="ml mm mn"><p id="85cf" class="jq jr mk js b jt ju jv jw jx jy jz ka mo kc kd ke mp kg kh ki mq kk kl km kn im bi translated">sudo docker run-d-p 9000:9000 sonarkubescan</p></blockquote><h2 id="8a58" class="ky kz it bd la lb lc dn ld le lf dp lg kb lh li lj kf lk ll lm kj ln lo lp lq bi translated">10.运行代码分析</h2><p id="ca9d" class="pw-post-body-paragraph jq jr it js b jt lt jv jw jx lu jz ka kb mh kd ke kf mi kh ki kj mj kl km kn im bi translated">在您的颤振项目运行的根中:</p><blockquote class="ml mm mn"><p id="a117" class="jq jr mk js b jt ju jv jw jx jy jz ka mo kc kd ke mp kg kh ki mq kk kl km kn im bi translated">声纳扫描仪</p></blockquote><p id="edc9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">分析将很快开始，您将能够在<a class="ae kx" href="http://localhost:9000/" rel="noopener ugc nofollow" target="_blank"> http://localhost:9000/ </a>上查看您的报告</p><p id="d7f9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">您可以在颤振项目的根中为新报告运行另一个分析，使用:</p><blockquote class="ml mm mn"><p id="ffc7" class="jq jr mk js b jt ju jv jw jx jy jz ka mo kc kd ke mp kg kh ki mq kk kl km kn im bi translated">声纳扫描仪</p></blockquote><p id="e8dc" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">结果:</p><figure class="ms mt mu mv gt mw gh gi paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="gh gi mr"><img src="../Images/4101b40b72e0620405139014d58a259a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JRe_AKnoleaMdAwwS7SJEA.png"/></div></div></figure><p id="87d4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">感谢您的时间，我希望这篇文章对您有所帮助。</p></div></div>    
</body>
</html>