<html>
<head>
<title>Expand AWS EBS with Zero Downtime</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">零停机扩展AWS EBS</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/expand-aws-ebs-with-zero-downtime-197469b34cf7?source=collection_archive---------16-----------------------#2021-09-14">https://levelup.gitconnected.com/expand-aws-ebs-with-zero-downtime-197469b34cf7?source=collection_archive---------16-----------------------#2021-09-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/54551e96e9b22bbdfd097b97598fb640.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*06Fpfo5eDW2TmY0Y.jpeg"/></div></div></figure><p id="bbc7" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">每当您需要扩展EBS卷大小时，都可以应用这种方法，以避免停止实例和分离卷。</p><p id="c94f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">让我们开始吧。</p><p id="975e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">SSH到您的实例，并查看可用的存储</p><figure class="la lb lc ld gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi kz"><img src="../Images/a963b924c9d30c3ee088f2562433f87a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*bsLRemyPmY-gY0-9.png"/></div></div></figure><p id="0599" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">可以看到，存储是8G aprx。</p><p id="3460" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">您可以通过以下方式查看您的</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="255c" class="lj lk it lf b gy ll lm l ln lo">df -h</span></pre><p id="7589" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在让我们展开它。</p><h1 id="10f9" class="lp lk it bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">步骤:-</h1><p id="e1ec" class="pw-post-body-paragraph kb kc it kd b ke mm kg kh ki mn kk kl km mo ko kp kq mp ks kt ku mq kw kx ky im bi translated">从服务列表中选择“EC2 ”,然后选择要扩展的实例</p><figure class="la lb lc ld gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mr"><img src="../Images/dfb38975ea90443b26a21cf66ee9235b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*NymLMXc9tLoDb9Xl.png"/></div></div></figure><p id="2787" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">单击EC2描述下的卷ID</p><figure class="la lb lc ld gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ms"><img src="../Images/4c7604f15f7b67cf70d61c3af7786cb9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*IrUc2e-qJuYN8jeY.png"/></div></div></figure><p id="7911" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">选择要调整大小的卷，右键单击“修改卷”</p><figure class="la lb lc ld gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mt"><img src="../Images/6cb3e49453631eecab05fc755b78e239.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*v8j-rf5YUfyByoBJ.png"/></div></div></figure><p id="927e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">为您的EBS卷设置新的大小(在本例中，我将8GB卷扩展到16GB)</p><figure class="la lb lc ld gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mu"><img src="../Images/f97655a232fafd5f8044423ad46efa0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*BDNdHDwsMkA9hhsV.png"/></div></div></figure><p id="1eca" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">点击是</p><figure class="la lb lc ld gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mu"><img src="../Images/e00c45c10fc5d3dca2381cfeea761c8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*sq9JAlBqnBT-4wuq.png"/></div></div></figure><p id="f3d8" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">检查附加到EC2实例的大小</p><figure class="la lb lc ld gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mu"><img src="../Images/b746f9d9cea35463f6b3e64cb919781c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*dmRwmTfF9pKMGTXL.png"/></div></div></figure><p id="9741" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在，我们需要扩展分区本身。</p><p id="df4d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">SSH或通过任何其他方法连接到EC2实例，我们刚刚扩展的EBS连接到该实例。</p><figure class="la lb lc ld gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mu"><img src="../Images/7665c0b3dd50e4c3c25e689b551d1f01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*gdp2jbPtvQvULS-g.png"/></div></div></figure><p id="2cea" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">键入以下命令以列出我们的块设备:</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="c922" class="lj lk it lf b gy ll lm l ln lo">lsblk</span></pre><figure class="la lb lc ld gt ju gh gi paragraph-image"><div class="gh gi mv"><img src="../Images/391cf623de7e340c6037bffae66f4058.png" data-original-src="https://miro.medium.com/v2/resize:fit:1368/format:webp/0*zOF_kmXRkN_Q6Qdi.png"/></div></figure><p id="f81f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">正如您可以看到的，根卷的<em class="mw">大小反映了新的大小16GB，分区的大小反映了原始大小8 GB，并且在您可以扩展文件系统</em>之前必须进行扩展。</p><p id="642c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">为此，请键入以下命令:</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="ad13" class="lj lk it lf b gy ll lm l ln lo">sudo growpart /dev/xvda 1</span></pre><figure class="la lb lc ld gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mx"><img src="../Images/2816a31afece85e92421af161ce2bcbf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*D79xJf6GVjhFNGwu.png"/></div></div></figure><blockquote class="my mz na"><p id="7201" class="kb kc mw kd b ke kf kg kh ki kj kk kl nb kn ko kp nc kr ks kt nd kv kw kx ky im bi translated"><em class="it">小心，设备名和分区号之间有一个空格！</em></p></blockquote><p id="c4eb" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在，我们可以检查分区是否反映了增加的卷大小(我们可以使用已经使用过的lsblk命令进行检查):</p><figure class="la lb lc ld gt ju gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/817c8e35e6d91372961ef002630e6965.png" data-original-src="https://miro.medium.com/v2/resize:fit:1174/format:webp/0*f2HBSuxhJ-1tv9Ap.png"/></div></figure><p id="e1ff" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">最后但同样重要的是，我们需要扩展文件系统本身。<br/>如果您的文件系统是ext2、ext3或ext4，请键入:</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="b971" class="lj lk it lf b gy ll lm l ln lo">sudo resize2fs /dev/xvda1</span></pre><figure class="la lb lc ld gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nf"><img src="../Images/8b3e70ed14d17557981f9a6f3593ad5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ZDNvXLo2zBuxcxO3.png"/></div></div></figure><p id="ffa4" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果您的文件系统是XFS，请键入:</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="7063" class="lj lk it lf b gy ll lm l ln lo">sudo xfs_growfs /dev/xvda1</span></pre><p id="bf9f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">最后，我们可以通过键入以下命令来检查我们的扩展文件系统:</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="8c15" class="lj lk it lf b gy ll lm l ln lo">df -h</span></pre><p id="e16c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果一切顺利，我们应该能够看到我们的有效文件系统扩展大小:</p><figure class="la lb lc ld gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ng"><img src="../Images/5a9ffa4076fe8da5221e7c4ee7837732.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*9sOdsJzcODwRj0-U.png"/></div></div></figure><p id="9f34" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">您刚刚扩展了EBS卷大小，没有停机时间</p><h1 id="9e32" class="lp lk it bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">结论</h1><p id="0ac0" class="pw-post-body-paragraph kb kc it kd b ke mm kg kh ki mn kk kl km mo ko kp kq mp ks kt ku mq kw kx ky im bi translated">如果您发现需要扩展prod实例中的空间，这种方法将帮助您在不停机的情况下实现这一目标。</p></div></div>    
</body>
</html>