<html>
<head>
<title>MISP Installation for RedHat Enterprise Linux 7.9</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">RedHat Enterprise Linux 7.9的MISP安装</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/misp-installation-for-redhat-enterprise-linux-7-9-57483fa24b18?source=collection_archive---------5-----------------------#2022-12-06">https://levelup.gitconnected.com/misp-installation-for-redhat-enterprise-linux-7-9-57483fa24b18?source=collection_archive---------5-----------------------#2022-12-06</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/1988751f068ab71906a2b34a1f2035a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*1pkIhk5i_3ruP4IO"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated"><a class="ae kf" href="https://images.unsplash.com/photo-1496368077930-c1e31b4e5b44?ixlib=rb-4.0.3&amp;ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&amp;auto=format&amp;fit=crop&amp;w=2670&amp;q=80" rel="noopener ugc nofollow" target="_blank">https://images . unsplash . com/photo-1496368077930-C1 e 31 B4 e5b 44？IX lib = r b-4 . 0 . 3&amp;ixid = mnwxmja 3 fdb 8 mhxwag 90 by 1 wywdlfhx 8 fgvufdb 8 fhx 8&amp;auto = format&amp;fit = crop&amp;w = 2670&amp;q = 80</a></figcaption></figure><p id="b584" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这份文件是一本关于如何正确安装MISP的完整操作手册。大多数说明都来自GitHub上现成的在线指南。</p></div><div class="ab cl le lf hx lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="im in io ip iq"><h1 id="80ea" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated"><strong class="ak">先决条件</strong></h1><ul class=""><li id="0855" class="mj mk it ki b kj ml kn mm kr mn kv mo kz mp ld mq mr ms mt bi translated">RedHat登录——可以在这里创建，<a class="ae kf" href="https://www.redhat.com/wapps/ugc/register.html?_flowId=register-flow&amp;_flowExecutionKey=e1s1" rel="noopener ugc nofollow" target="_blank">https://www.redhat.com/wapps/ugc/register.html?_ flowId =寄存器流&amp; _flowExecutionKey=e1s1 </a></li><li id="53c6" class="mj mk it ki b kj mu kn mv kr mw kv mx kz my ld mq mr ms mt bi translated">基本UNIX CLI</li><li id="992f" class="mj mk it ki b kj mu kn mv kr mw kv mx kz my ld mq mr ms mt bi translated">操作系统:RedHat Enterprise Linux 7.9</li></ul></div><div class="ab cl le lf hx lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="im in io ip iq"><h1 id="c812" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated"><strong class="ak">构建</strong></h1><p id="b568" class="pw-post-body-paragraph kg kh it ki b kj ml kl km kn mm kp kq kr mz kt ku kv na kx ky kz nb lb lc ld im bi translated">在干净的RedHat Enterprise 7.9 Linux版本上。</p><p id="c9f0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">安装编译工具和git</p><pre class="nc nd ne nf gt ng nh ni bn nj nk bi"><span id="4b3e" class="nl lm it nh b be nm nn l no np">sudo yum install git gcc bcc gcc-c++ cmake -y</span></pre><p id="33f9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">从GitHub克隆安装库</p><pre class="nc nd ne nf gt ng nh ni bn nj nk bi"><span id="e959" class="nl lm it nh b be nm nn l no np">git clone https://github.com/MISP/MISP-RPM.git<br/>cd MISP-RPM</span></pre><p id="9f7d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">运行以下命令:</p><ul class=""><li id="ab28" class="mj mk it ki b kj kk kn ko kr nq kv nr kz ns ld mq mr ms mt bi translated">注册企业操作系统—它会提示输入用户名和密码</li><li id="2720" class="mj mk it ki b kj mu kn mv kr mw kv mx kz my ld mq mr ms mt bi translated">更新yum以包含所需的存储库</li><li id="8d5d" class="mj mk it ki b kj mu kn mv kr mw kv mx kz my ld mq mr ms mt bi translated">安装几个包</li></ul><pre class="nc nd ne nf gt ng nh ni bn nj nk bi"><span id="7d6d" class="nl lm it nh b be nm nn l no np">make prepare</span></pre><p id="3393" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">(可选)如果失败，您可以手动运行下面的。这将使正确的存储库能够在下面的步骤中下载所有需要的rpm包。</p><pre class="nc nd ne nf gt ng nh ni bn nj nk bi"><span id="3420" class="nl lm it nh b be nm nn l no np">sudo subscription-manager register --auto-attach<br/>sudo yum-config-manager --enable rhel-server-rhscl-7-rpms<br/>sudo subscription-manager repos --enable rhel-7-server-optional-rpms<br/>sudo yum install -y scl-utils ca-certificates git</span></pre><p id="6862" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">验证您在yum中启用了正确的存储库</p><pre class="nc nd ne nf gt ng nh ni bn nj nk bi"><span id="8166" class="nl lm it nh b be nm nn l no np">$ sudo yum repolist<br/>Loaded plugins: product-id, search-disabled-repos, subscription-manager<br/>repo id                                                                          repo name                                                                                                    status<br/>!rhel-7-server-optional-rpms/7Server/x86_64                                      Red Hat Enterprise Linux 7 Server - Optional (RPMs)                                                          23,636<br/>!rhel-7-server-rpms/7Server/x86_64                                               Red Hat Enterprise Linux 7 Server (RPMs)                                                                     33,381<br/>!rhel-server-rhscl-7-rpms/7Server/x86_64                                         Red Hat Software Collections RPMs for Red Hat Enterprise Linux 7 Server                                      14,337<br/>repolist: 71,354</span></pre><p id="93c7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">安装组件并构建rpm。结果应该可以在<code class="fe nt nu nv nh b">RPMS/</code>和<code class="fe nt nu nv nh b">RPMS-PREREQ-*/</code>目录中找到。</p><pre class="nc nd ne nf gt ng nh ni bn nj nk bi"><span id="9d3d" class="nl lm it nh b be nm nn l no np">make misp.rpm</span></pre><p id="f05a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">创建包含所有构建包和必备包的目录版本</p><pre class="nc nd ne nf gt ng nh ni bn nj nk bi"><span id="de48" class="nl lm it nh b be nm nn l no np">make release</span></pre><p id="eb12" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">发布示例:</p><pre class="nc nd ne nf gt ng nh ni bn nj nk bi"><span id="732f" class="nl lm it nh b be nm nn l no np">$ ls -1 release/<br/>cmake3–3.17.5–1.el7.x86_64.rpm<br/>cmake3-data-3.17.5–1.el7.noarch.rpm<br/>faup-1.6.0+8e81b17–1.el7.x86_64.rpm<br/>faup-devel-1.6.0+8e81b17–1.el7.x86_64.rpm<br/>gtcaca-1.0+98c7aa8–2.el7.x86_64.rpm<br/>gtcaca-devel-1.0+98c7aa8–2.el7.x86_64.rpm<br/>imlib2–1.4.5–9.el7.x86_64.rpm<br/>imlib2-devel-1.4.5–9.el7.x86_64.rpm<br/>libcaca-0.99–0.40.beta20.el7.x86_64.rpm<br/>libcaca-devel-0.99–0.40.beta20.el7.x86_64.rpm<br/>libuv-1.44.1–1.el7.x86_64.rpm<br/>libzstd-1.5.2–1.el7.x86_64.rpm<br/>misp-2.4.159–1.el7.x86_64.rpm<br/>misp-pear-crypt-gpg-2.4.159–1.el7.x86_64.rpm<br/>misp-pecl-rdkafka-2.4.159–1.el7.x86_64.rpm<br/>misp-pecl-redis-2.4.159–1.el7.x86_64.rpm<br/>misp-pecl-ssdeep-2.4.159–1.el7.x86_64.rpm<br/>misp-php-brotli-2.4.159–1.el7.x86_64.rpm<br/>misp-python-virtualenv-2.4.159–1.el7.x86_64.rpm<br/>rhash-1.3.4–2.el7.x86_64.rpm<br/>ssdeep-devel-2.14.1–1.el7.x86_64.rpm<br/>ssdeep-libs-2.14.1–1.el7.x86_64.rpm</span></pre></div><div class="ab cl le lf hx lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="im in io ip iq"><h1 id="7dbf" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated"><strong class="ak">安装</strong></h1><p id="6ab8" class="pw-post-body-paragraph kg kh it ki b kj ml kl km kn mm kp kq kr mz kt ku kv na kx ky kz nb lb lc ld im bi translated">(可选)如果未启用，请启用RHEL订阅和软件集合</p><pre class="nc nd ne nf gt ng nh ni bn nj nk bi"><span id="af30" class="nl lm it nh b be nm nn l no np">sudo subscription-manager register --auto-attach<br/>sudo yum install yum-utils -y<br/>sudo yum-config-manager --enable rhel-server-rhscl-7-rpms<br/>sudo subscription-manager repos --enable rhel-7-server-optional-rpms</span></pre><p id="5483" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">安装Apache服务器— <code class="fe nt nu nv nh b">httpd24</code></p><pre class="nc nd ne nf gt ng nh ni bn nj nk bi"><span id="5c49" class="nl lm it nh b be nm nn l no np">sudo yum install -y httpd24 httpd24-mod_ssl<br/>sudo systemctl enable httpd24-httpd<br/>sudo systemctl restart httpd24-httpd</span></pre><p id="c50e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">安装PHP — <code class="fe nt nu nv nh b">rh-php73</code></p><pre class="nc nd ne nf gt ng nh ni bn nj nk bi"><span id="df8e" class="nl lm it nh b be nm nn l no np">sudo yum install -y rh-php73</span></pre><p id="c5f1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为PHP运行时设置推荐的最大值<code class="fe nt nu nv nh b">/etc/opt/rh/rh-php73/php.ini</code></p><pre class="nc nd ne nf gt ng nh ni bn nj nk bi"><span id="4f95" class="nl lm it nh b be nm nn l no np">- max_execution_time = 30<br/>+ max_execution_time = 300<br/>- memory_limit = 128M<br/>+ memory_limit = 2048M<br/>- post_max_size = 8M<br/>+ post_max_size = 50M<br/>- upload_max_filesize = 2M<br/>+ upload_max_filesize = 50M</span></pre><p id="0da2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">按照以下顺序安装软件包，并根据需要调整版本</p><pre class="nc nd ne nf gt ng nh ni bn nj nk bi"><span id="8291" class="nl lm it nh b be nm nn l no np">cd release/</span></pre><p id="5e4f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">MISP的先决条件</p><pre class="nc nd ne nf gt ng nh ni bn nj nk bi"><span id="d426" class="nl lm it nh b be nm nn l no np">sudo yum install -y gtcaca-1.0+*.rpm libcaca*.rpm imlib2*.rpm<br/>sudo yum install -y faup-1.6.0+*.rpm<br/>sudo yum install -y ssdeep-libs*.rpm<br/></span></pre><p id="6816" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">适用于MISP的PHP扩展的先决条件</p><pre class="nc nd ne nf gt ng nh ni bn nj nk bi"><span id="00e5" class="nl lm it nh b be nm nn l no np">export mispver="2.4.159–1"<br/>sudo yum install -y misp-pear-crypt-gpg-$mispver.el7.x86_64.rpm \<br/>misp-pecl-rdkafka-$mispver.el7.x86_64.rpm \<br/>misp-pecl-redis-$mispver.el7.x86_64.rpm \<br/>misp-pecl-ssdeep-$mispver.el7.x86_64.rpm \<br/>misp-php-brotli-$mispver.el7.x86_64.rpm \<br/>misp-python-virtualenv-$mispver.el7.x86_64.rpm</span></pre><p id="d5ae" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">安装MISP RPM</p><pre class="nc nd ne nf gt ng nh ni bn nj nk bi"><span id="873d" class="nl lm it nh b be nm nn l no np">sudo yum install -y misp-$mispver.el7.x86_64.rpm</span></pre><p id="9884" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">阿帕奇/ <code class="fe nt nu nv nh b">httpd</code>配置</p><p id="c8be" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Apache虚拟主机配置示例:<code class="fe nt nu nv nh b">/opt/rh/httpd24/root/etc/httpd/conf.d/misp.conf</code></p><pre class="nc nd ne nf gt ng nh ni bn nj nk bi"><span id="e047" class="nl lm it nh b be nm nn l no np">&lt;VirtualHost _default_:80&gt;<br/>DocumentRoot /var/www/MISP/app/webroot<br/>&lt;Directory /var/www/MISP/app/webroot&gt;<br/>Options -Indexes<br/>AllowOverride all<br/>Require all granted<br/>&lt;/Directory&gt;<br/>LogLevel warn<br/>ErrorLog /var/log/httpd24/misp_error.log<br/>CustomLog /var/log/httpd24/misp_access.log combined<br/>ServerSignature Off<br/>Header always set X-Content-Type-Options nosniff<br/>Header always set X-Frame-Options SAMEORIGIN<br/>Header always unset "X-Powered-By"<br/>&lt;/VirtualHost&gt;</span></pre><p id="e6ea" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">配置更改后</p><pre class="nc nd ne nf gt ng nh ni bn nj nk bi"><span id="7cda" class="nl lm it nh b be nm nn l no np">sudo systemctl restart httpd24-httpd</span></pre><p id="9b1b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">安装MySQL数据库— <code class="fe nt nu nv nh b">rh-mariadb105-mariadb</code></p><pre class="nc nd ne nf gt ng nh ni bn nj nk bi"><span id="7ad3" class="nl lm it nh b be nm nn l no np">sudo yum install -y rh-mariadb105-mariadb rh-mariadb105-mariadb-server-utils<br/>sudo systemctl enable rh-mariadb105-mariadb.service<br/>sudo systemctl start rh-mariadb105-mariadb.service</span></pre><p id="c839" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">创建数据库、用户并授予权限。第一个命令应该打开一个MySQL shell/CLI，请更新密码，不要使用默认的<code class="fe nt nu nv nh b">changeme</code></p><pre class="nc nd ne nf gt ng nh ni bn nj nk bi"><span id="5af9" class="nl lm it nh b be nm nn l no np">sudo scl enable rh-mariadb105 mysql</span></pre><pre class="nw ng nh ni bn nj nk bi"><span id="08cb" class="nl lm it nh b be nm nn l no np">CREATE DATABASE misp;<br/>CREATE USER misp@'localhost' IDENTIFIED BY 'changeme';<br/>GRANT USAGE ON *.* to 'misp'@'localhost';<br/>GRANT ALL PRIVILEGES on misp.* to 'misp'@'localhost';<br/>FLUSH PRIVILEGES;<br/>exit;</span></pre><p id="c1f8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">加载初始MISP模式(系统会提示您输入上面设置的密码):</p><pre class="nc nd ne nf gt ng nh ni bn nj nk bi"><span id="1b2f" class="nl lm it nh b be nm nn l no np">sudo scl enable rh-mariadb105 'mysql -u misp -p misp' &lt; /var/www/MISP/INSTALL/MYSQL.sql</span></pre><p id="5491" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">MISP构型</p><p id="cb37" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">配置您的数据库访问权限(密码<code class="fe nt nu nv nh b">changeme</code>应根据之前的数据库设置阶段进行设置):</p><p id="7c39" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe nt nu nv nh b">/var/www/MISP/app/Config/database.php</code></p><pre class="nc nd ne nf gt ng nh ni bn nj nk bi"><span id="6365" class="nl lm it nh b be nm nn l no np">&lt;?php<br/>class DATABASE_CONFIG {<br/>  public $default = array(<br/>    'datasource' =&gt; 'Database/Mysql',<br/>    'persistent' =&gt; false,<br/>    'host' =&gt; 'localhost',<br/>    'login' =&gt; 'misp',<br/>    'port' =&gt; 3306,<br/>    'password' =&gt; 'changeme',<br/>    'database' =&gt; 'misp',<br/>    'prefix' =&gt; '',<br/>    'encoding' =&gt; 'utf8',<br/>  );<br/>}</span></pre><p id="1192" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">设置默认裸机配置(请查看MISP文档以了解完整的正确设置):</p><pre class="nc nd ne nf gt ng nh ni bn nj nk bi"><span id="bc34" class="nl lm it nh b be nm nn l no np">sudo cp -a /var/www/MISP/app/Config/core.default.php /var/www/MISP/app/Config/core.php<br/>sudo cp -a /var/www/MISP/app/Config/bootstrap.default.php /var/www/MISP/app/Config/bootstrap.php<br/>sudo cp -a /var/www/MISP/app/Config/config.default.php /var/www/MISP/app/Config/config.php<br/>sudo chmod o-rwx /var/www/MISP/app/Config/{config.php,database.php,email.php}<br/>sudo chown apache. /var/www/MISP/app/Config/{config.php,database.php,email.php}</span></pre><p id="ce8a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在<code class="fe nt nu nv nh b">/var/www/MISP/app/Config/config.php</code>中修改Python二进制路径</p><p id="b9d5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe nt nu nv nh b">‘python_bin’ =&gt; null,</code></p><p id="1668" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">应该变成(RPMs附带的完整Python Virtualenv的路径):</p><p id="d8ff" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe nt nu nv nh b">‘python_bin’ =&gt; ‘/var/www/cgi-bin/misp-virtualenv/bin/python’,</code></p><p id="25f2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">安装Redis服务器— <code class="fe nt nu nv nh b">rh-redis6-redis</code></p><pre class="nc nd ne nf gt ng nh ni bn nj nk bi"><span id="c976" class="nl lm it nh b be nm nn l no np">sudo yum install -y rh-redis6-redis<br/>sudo systemctl enable rh-redis6-redis<br/>sudo systemctl start rh-redis6-redis</span></pre><p id="f830" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">启用并启动misp-workers</p><pre class="nc nd ne nf gt ng nh ni bn nj nk bi"><span id="62f3" class="nl lm it nh b be nm nn l no np">sudo systemctl enable misp-workers<br/>sudo systemctl start misp-workers</span></pre><p id="3991" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">注意Systemd单元应该使用带有scl包装器的软件集合。</p><p id="da59" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe nt nu nv nh b">/etc/systemd/system/misp-workers.service</code>应该有类似于</p><pre class="nc nd ne nf gt ng nh ni bn nj nk bi"><span id="92a8" class="nl lm it nh b be nm nn l no np">Environment=SCL_PHP_WRAPPER=<br/>EnvironmentFile=-/etc/default/misp-workers<br/>Type=forking<br/>ExecStart=/bin/bash -c '${SCL_PHP_WRAPPER} /var/www/MISP/app/Console/worker/start.sh'</span></pre><p id="9a50" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">可选地加载并包含scl包装器的路径</p><p id="4d3d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe nt nu nv nh b">SCL_PHP_WRAPPER=/usr/bin/scl enable rh-php73</code></p><p id="4ec1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">设置所有者和<code class="fe nt nu nv nh b">selinux</code>上下文的最终额外设置项目</p><pre class="nc nd ne nf gt ng nh ni bn nj nk bi"><span id="e4a1" class="nl lm it nh b be nm nn l no np">sudo chown apache:apache /var/www/MISP/app/Config/config.php<br/>sudo chcon -t httpd_sys_rw_content_t /var/www/MISP/app/Config/config.php</span></pre><p id="7a5f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">验证PHP扩展是否正确启用(应该已经通过RPM安装完成)</p><pre class="nc nd ne nf gt ng nh ni bn nj nk bi"><span id="edd8" class="nl lm it nh b be nm nn l no np">cat /etc/opt/rh/rh-php73/php.d/40-redis.ini extension=redis<br/>cat /etc/opt/rh/rh-php73/php.d/40-ssdeep.ini extension=ssdeep<br/>cat /etc/opt/rh/rh-php73/php.d/40-brotli.ini extension=brotli<br/>cat /etc/opt/rh/rh-php73/php.d/40-rdkafka.ini extension=rdkafka</span></pre><p id="a85e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">外部访问配置<code class="fe nt nu nv nh b">firewalld</code></p><p id="90bf" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为http和https打开防火墙</p><pre class="nc nd ne nf gt ng nh ni bn nj nk bi"><span id="7b32" class="nl lm it nh b be nm nn l no np">sudo firewall-cmd - permanent - zone=public - add-service http<br/>sudo firewall-cmd - permanent - zone=public - add-service https<br/>sudo systemctl restart firewalld</span></pre></div><div class="ab cl le lf hx lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="im in io ip iq"><h1 id="12d1" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated"><strong class="ak">故障排除</strong></h1><figure class="nc nd ne nf gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nx"><img src="../Images/6b128ed8d84981c5996c9b9d9a7c2f45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k7cp9erckbiWA4ZyA_uuMQ.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">屏幕上显示程序运行的图片</figcaption></figure><p id="00a5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当前安装步骤中缺少此部分，因此需要执行以下操作来解决此问题。</p><p id="e35f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">设置丢失的<code class="fe nt nu nv nh b">gpg</code>键</p><pre class="nc nd ne nf gt ng nh ni bn nj nk bi"><span id="67bf" class="nl lm it nh b be nm nn l no np">sudo gpg - gen-key<br/>gpg (GnuPG) 2.0.22; Copyright © 2013 Free Software Foundation, Inc.<br/>This is free software: you are free to change and redistribute it.<br/>There is NO WARRANTY, to the extent permitted by law.<br/>Please select what kind of key you want:<br/>(1) RSA and RSA (default)<br/>(2) DSA and Elgamal<br/>(3) DSA (sign only)<br/>(4) RSA (sign only)<br/>Your selection? 1<br/>RSA keys may be between 1024 and 4096 bits long.<br/>What keysize do you want? (2048)<br/>Requested keysize is 2048 bits<br/>Please specify how long the key should be valid.<br/>0 = key does not expire<br/>&lt;n&gt; = key expires in n days<br/>&lt;n&gt;w = key expires in n weeks<br/>&lt;n&gt;m = key expires in n months<br/>&lt;n&gt;y = key expires in n years<br/>Key is valid for? (0)<br/>Key does not expire at all<br/>Is this correct? (y/N) y<br/>GnuPG needs to construct a user ID to identify your key.<br/>Real name: misp<br/>Name must be at least 5 characters long<br/>Real name: misp-rhel-79<br/>Email address: bonez@mail.com<br/>Comment:<br/>You selected this USER-ID:<br/>"misp-rhel-79 &lt;bonez@mail.com&gt;"<br/>Change (N)ame, ©omment, (E)mail or (O)kay/(Q)uit? o<br/>You need a Passphrase to protect your secret key.<br/>You don't want a passphrase - this is probably a *bad* idea!<br/>I will do it anyway. You can change your passphrase at any time,<br/>using this program with the option " - edit-key".<br/>We need to generate a lot of random bytes. It is a good idea to perform<br/>some other action (type on the keyboard, move the mouse, utilize the<br/>disks) during the prime generation; this gives the random number<br/>generator a better chance to gain enough entropy.<br/>We need to generate a lot of random bytes. It is a good idea to perform<br/>some other action (type on the keyboard, move the mouse, utilize the<br/>disks) during the prime generation; this gives the random number<br/>generator a better chance to gain enough entropy.<br/>gpg: key 411A94AB marked as ultimately trusted<br/>public and secret key created and signed.<br/>gpg: checking the trustdb<br/>gpg: 3 marginal(s) needed, 1 complete(s) needed, PGP trust model<br/>gpg: depth: 0 valid: 1 signed: 0 trust: 0-, 0q, 0n, 0m, 0f, 1u<br/>pub 2048R/411A94AB 2022–12–05<br/>Key fingerprint = 7D35 D4B8 4186 3C69 C11A 08DA 3CCE 383B 411A 94AB<br/>uid misp-rhel-79 &lt;s.uddin@reply.com&gt;<br/>sub 2048R/7471F59E 2022–12–05<br/>[ubuntu@misp-rhel-79 ~]$ sudo gpg - list-keys<br/>/root/.gnupg/pubring.gpg<br/> - - - - - - - - - - - - <br/>pub 2048R/411A94AB 2022–12–05<br/>uid misp-rhel-79 &lt;s.uddin@reply.com&gt;<br/>sub 2048R/7471F59E 2022–12–05<br/>sudo cp /root/.gnupg/pubring.gpg /var/www/MISP/app/webroot/gpg.asc<br/>sudo chown apache:apache -hR /var/www/MISP/</span></pre></div><div class="ab cl le lf hx lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="im in io ip iq"><p id="ac8e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，您可以在本地主机上打开浏览器来访问仪表板。</p><figure class="nc nd ne nf gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ny"><img src="../Images/77e0323b3bee4cae00302a23c486aff4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OOfBnd5vYgxP0A2Ud6-zSA.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">屏幕上显示程序运行的图片</figcaption></figure><p id="637c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">享受:)</p></div><div class="ab cl le lf hx lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="im in io ip iq"><h1 id="8cd0" class="ll lm it bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">分级编码</h1><p id="3c0f" class="pw-post-body-paragraph kg kh it ki b kj ml kl km kn mm kp kq kr mz kt ku kv na kx ky kz nb lb lc ld im bi translated">感谢您成为我们社区的一员！在你离开之前:</p><ul class=""><li id="476b" class="mj mk it ki b kj kk kn ko kr nq kv nr kz ns ld mq mr ms mt bi translated">👏为故事鼓掌，跟着作者走👉</li></ul></div></div>    
</body>
</html>