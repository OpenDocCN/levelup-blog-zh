<html>
<head>
<title>Minimal client-server example for Flutter and Node.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Flutter和Node.js的最小客户端-服务器示例</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/minimal-client-server-example-for-flutter-and-node-js-3e1b376f1093?source=collection_archive---------0-----------------------#2019-02-27">https://levelup.gitconnected.com/minimal-client-server-example-for-flutter-and-node-js-3e1b376f1093?source=collection_archive---------0-----------------------#2019-02-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/738c6c4f98ae5a81f02ff4d815ddd951.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PXxJ7n60xo97Qk27EtVCKg.png"/></div></div></figure><p id="6386" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在本教程中，我将向您展示如何设置Node.js服务器和与之交互的Flutter应用程序。服务器代码将在您的本地机器上运行，而Flutter应用程序将在Android模拟器或iOS模拟器上运行。</p><h1 id="7261" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">节点. js</h1><p id="70e3" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">我们将从设置服务器开始。本节基于<a class="ae mc" href="https://medium.com/@studymongolian/minimal-client-server-example-for-android-and-node-js-343780f28c28" rel="noopener">安卓版的本教程</a>。</p><p id="942a" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><a class="ae mc" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank">下载</a>并安装Node.js</p><p id="911a" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">为您的server应用程序创建目录。姑且称之为<strong class="kd iu"> node_server </strong>。</p><pre class="md me mf mg gt mh mi mj mk aw ml bi"><span id="36bb" class="mm la it mi b gy mn mo l mp mq">mkdir node_server<br/>cd node_server</span></pre><p id="3553" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">使用节点包管理器设置新项目:</p><pre class="md me mf mg gt mh mi mj mk aw ml bi"><span id="060d" class="mm la it mi b gy mn mo l mp mq">npm init</span></pre><p id="8b43" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">接受除入口点之外的默认值。我就用名字<strong class="kd iu"> app.js </strong>代替<strong class="kd iu"> index.js </strong>。然后创建一个名为<strong class="kd iu"> app.js </strong>的文件。</p><pre class="md me mf mg gt mh mi mj mk aw ml bi"><span id="64e1" class="mm la it mi b gy mn mo l mp mq">touch app.js</span></pre><p id="a2b0" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在您喜欢的编辑器中打开该文件。很多人用<a class="ae mc" href="https://code.visualstudio.com/" rel="noopener ugc nofollow" target="_blank"> Visual Studio代码</a>。</p><p id="7c25" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">让我们使用<a class="ae mc" href="https://nodejs.org/en/docs/guides/getting-started-guide/" rel="noopener ugc nofollow" target="_blank">入门指南</a>中的代码。将其粘贴到您的<strong class="kd iu"> app.js </strong>文件中。</p><pre class="md me mf mg gt mh mi mj mk aw ml bi"><span id="539d" class="mm la it mi b gy mn mo l mp mq">const http = require('http');</span><span id="6d05" class="mm la it mi b gy mr mo l mp mq">const hostname = '127.0.0.1';<br/>const port = 3000;</span><span id="9127" class="mm la it mi b gy mr mo l mp mq">const server = http.createServer((req, res) =&gt; {<br/>  res.statusCode = 200;<br/>  res.setHeader('Content-Type', 'text/plain');<br/>  res.end('Hello World\n');<br/>});</span><span id="8088" class="mm la it mi b gy mr mo l mp mq">server.listen(port, hostname, () =&gt; {<br/>  console.log(`Server running at http://${hostname}:${port}/`);<br/>});</span></pre><p id="075b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在运行应用程序。</p><pre class="md me mf mg gt mh mi mj mk aw ml bi"><span id="bf30" class="mm la it mi b gy mn mo l mp mq">node app.js</span></pre><p id="f8a5" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">您可以通过在浏览器栏中粘贴以下内容来测试它是否正常工作:</p><pre class="md me mf mg gt mh mi mj mk aw ml bi"><span id="89bc" class="mm la it mi b gy mn mo l mp mq"><a class="ae mc" href="http://localhost:3000/" rel="noopener ugc nofollow" target="_blank">http://localhost:3000/</a></span></pre><p id="bf93" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">您应该会看到显示的<code class="fe ms mt mu mi b">Hello World</code>。</p><h1 id="c5dd" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">摆动</h1><p id="0825" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">现在让我们继续设置一个Flutter应用程序来测试服务器。</p><h2 id="26da" class="mm la it bd lb mv mw dn lf mx my dp lj km mz na ln kq nb nc lr ku nd ne lv nf bi translated">1.布局</h2><p id="26e2" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">我们将创建以下UI布局。您还不需要做任何事情，因为下面将包含相关代码。</p><figure class="md me mf mg gt ju gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/ada9d989a67ad2825666590c898ed495.png" data-original-src="https://miro.medium.com/v2/resize:fit:1040/format:webp/1*kvOibkc0hKSRgfEkJfx0bg.png"/></div></figure><h2 id="d728" class="mm la it bd lb mv mw dn lf mx my dp lj km mz na ln kq nb nc lr ku nd ne lv nf bi translated">2.密码</h2><p id="0e7a" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">将http库添加到<strong class="kd iu"> pubspec.yaml </strong>:</p><pre class="md me mf mg gt mh mi mj mk aw ml bi"><span id="93ef" class="mm la it mi b gy mn mo l mp mq">dependencies:<br/>  http: ^0.13.3</span></pre><p id="412c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">用以下代码替换<strong class="kd iu">主镖</strong>:</p><pre class="md me mf mg gt mh mi mj mk aw ml bi"><span id="3729" class="mm la it mi b gy mn mo l mp mq">import 'dart:io';<br/><br/>import 'package:flutter/material.dart';<br/>import 'package:http/http.dart';<br/><br/>void main() =&gt; runApp(MyApp());<br/><br/>class MyApp extends StatelessWidget {<br/>  @override<br/>  Widget build(BuildContext context) {<br/>    return MaterialApp(<br/>      title: 'Node server demo',<br/>      debugShowCheckedModeBanner: false,<br/>      theme: ThemeData(<br/>        primarySwatch: Colors.<em class="nh">blue</em>,<br/>      ),<br/>      home: Scaffold(<br/>        appBar: AppBar(title: Text('Flutter Client')),<br/>        body: BodyWidget(),<br/>      ),<br/>    );<br/>  }<br/>}<br/><br/>class BodyWidget extends StatefulWidget {<br/>  @override<br/>  BodyWidgetState createState() {<br/>    return new BodyWidgetState();<br/>  }<br/>}<br/><br/>class BodyWidgetState extends State&lt;BodyWidget&gt; {<br/>  String serverResponse = 'Server response';<br/><br/>  @override<br/>  Widget build(BuildContext context) {<br/><br/>    return Padding(<br/>      padding: const EdgeInsets.all(32.0),<br/>      child: Align(<br/>        alignment: Alignment.<em class="nh">topCenter</em>,<br/>        child: SizedBox(<br/>          width: 200,<br/>          child: Column(<br/>            crossAxisAlignment: CrossAxisAlignment.center,<br/>            children: &lt;Widget&gt;[<br/>              ElevatedButton(<br/>                child: Text('Send request to server'),<br/>                onPressed: () {<br/>                  _makeGetRequest();<br/>                },<br/>              ),<br/>              Padding(<br/>                padding: const EdgeInsets.all(8.0),<br/>                child: Text(serverResponse),<br/>              ),<br/>            ],<br/>          ),<br/>        ),<br/>      ),<br/>    );<br/>  }<br/><br/>  _makeGetRequest() async {<br/>    final url = Uri.parse(_localhost());<br/>    Response response = await get(url);<br/>    setState(() {<br/>      serverResponse = response.body;<br/>    });<br/>  }<br/><br/>  String _localhost() {<br/>    if (Platform.<em class="nh">isAndroid</em>)<br/>      return 'http://10.0.2.2:3000';<br/>    else // for iOS simulator<br/>      return 'http://localhost:3000';<br/>  }<br/>}</span></pre><h2 id="7798" class="mm la it bd lb mv mw dn lf mx my dp lj km mz na ln kq nb nc lr ku nd ne lv nf bi translated">3.测试颤振应用程序</h2><p id="d47e" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">运行应用程序。按下按钮，您应该会看到<code class="fe ms mt mu mi b">Hello World</code>响应。</p><figure class="md me mf mg gt ju gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/8a5ac8572292ad52ea201c3d995cf227.png" data-original-src="https://miro.medium.com/v2/resize:fit:1036/format:webp/1*lNezdEkDjcEriQJWkY_7WQ.png"/></div></figure><p id="610b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">成功！Node.js和Flutter之间的客户端-服务器通信。</p><h1 id="0b93" class="kz la it bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">发生</h1><p id="86c0" class="pw-post-body-paragraph kb kc it kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky im bi translated">为了创建一个更完整的应用程序，您需要了解以下主题的更多信息。</p><ul class=""><li id="7278" class="nj nk it kd b ke kf ki kj km nl kq nm ku nn ky no np nq nr bi translated"><a class="ae mc" href="https://medium.com/@studymongolian/parsing-simple-json-in-flutter-83ee1809a6ab" rel="noopener">解析Flutter中的简单JSON</a></li><li id="8504" class="nj nk it kd b ke ns ki nt km nu kq nv ku nw ky no np nq nr bi translated"><a class="ae mc" href="https://medium.com/@studymongolian/easy-json-examples-7c70785b4707" rel="noopener">简单的JSON例子</a></li><li id="13e4" class="nj nk it kd b ke ns ki nt km nu kq nv ku nw ky no np nq nr bi translated"><a class="ae mc" href="https://stackoverflow.com/a/54915614/3681880" rel="noopener ugc nofollow" target="_blank">如何在Flutter中进行HTTP请求</a></li><li id="73b6" class="nj nk it kd b ke ns ki nt km nu kq nv ku nw ky no np nq nr bi translated"><a class="ae mc" href="https://www.youtube.com/watch?v=F7NVpxxmmgM&amp;list=PL0dzCUj1L5JE4w_OctDGyZOhML6OtJSqR" rel="noopener ugc nofollow" target="_blank">创建REST API </a></li><li id="a234" class="nj nk it kd b ke ns ki nt km nu kq nv ku nw ky no np nq nr bi translated"><a class="ae mc" href="https://www.youtube.com/watch?v=d4QDyHLHZ9c" rel="noopener ugc nofollow" target="_blank">如何获得免费SSL证书并配置HTTPS </a></li></ul></div></div>    
</body>
</html>