<html>
<head>
<title>CodeIgniter 4 CRUD Series with MySQL: Delete</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">带有MySQL的CodeIgniter 4 CRUD系列:删除</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/codeigniter-4-crud-series-with-mysql-delete-97d81274ea80?source=collection_archive---------3-----------------------#2021-09-23">https://levelup.gitconnected.com/codeigniter-4-crud-series-with-mysql-delete-97d81274ea80?source=collection_archive---------3-----------------------#2021-09-23</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="a10e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">SQL <code class="fe ko kp kq kr b">DELETE</code>命令用于从数据库表中删除现有数据。</p><p id="a3de" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">也许你想删除所有的数据。一个未过滤的<em class="ks"/><code class="fe ko kp kq kr b">DELETE</code>就可以做到这一点(小心！！！).</p><p id="4983" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">另一方面，也许您需要更加<em class="ks">选择性地</em>删除哪一行。这就是带有<code class="fe ko kp kq kr b">WHERE</code>条款的<code class="fe ko kp kq kr b">DELETE</code>的用武之地。或者一个<em class="ks">过滤掉的</em>T4。</p><h2 id="7ef5" class="kt ku it bd kv kw kx dn ky kz la dp lb kb lc ld le kf lf lg lh kj li lj lk ll bi translated">带有MySQL的CodeIgniter 4 CRUD系列</h2><p id="4b3c" class="pw-post-body-paragraph jq jr it js b jt lm jv jw jx ln jz ka kb lo kd ke kf lp kh ki kj lq kl km kn im bi translated">请务必访问整个系列中的任何当前帖子，以了解最新情况:</p><ul class=""><li id="7400" class="lr ls it js b jt ju jx jy kb lt kf lu kj lv kn lw lx ly lz bi translated"><a class="ae ma" rel="noopener ugc nofollow" target="_blank" href="/codeigniter-4-crud-series-with-mysql-create-f2533edbd5e8">使用MySQL的CodeIgniter 4 CRUD系列:创建</a></li><li id="30c5" class="lr ls it js b jt mb jx mc kb md kf me kj mf kn lw lx ly lz bi translated"><a class="ae ma" rel="noopener ugc nofollow" target="_blank" href="/codeigniter-4-crud-series-with-mysql-read-96c994e33e4e">带MySQL的CodeIgniter 4 CRUD系列:阅读</a></li><li id="4c56" class="lr ls it js b jt mb jx mc kb md kf me kj mf kn lw lx ly lz bi translated"><a class="ae ma" rel="noopener ugc nofollow" target="_blank" href="/codeigniter-4-crud-series-with-mysql-update-876a6d20335a">带MySQL的CodeIgniter 4 CRUD系列:更新</a></li></ul></div><div class="ab cl mg mh hx mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="im in io ip iq"><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/46f1e6216d311af7eb6adeb245fe6bff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*Ys8KyO5VK5hXnTDubi3Zow.png"/></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated">图片来自<a class="ae ma" href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=146096" rel="noopener ugc nofollow" target="_blank"> Pixabay </a></figcaption></figure></div><div class="ab cl mg mh hx mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="im in io ip iq"><p id="9757" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">你是<a class="ae ma" href="http://medium.com/" rel="noopener">中</a>成员吗？如果是这样，<a class="ae ma" href="https://parabollus.medium.com/subscribe" rel="noopener">每当我在这里发表博客文章时，都会收到电子邮件通知</a>。不是会员？别担心！使用<a class="ae ma" href="https://parabollus.medium.com/membership" rel="noopener">我的注册链接</a>(我会向你收取佣金，无需额外费用)并加入。我真的很喜欢阅读这里所有精彩的内容，我知道你也会喜欢的！！！</p></div><div class="ab cl mg mh hx mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="im in io ip iq"><h2 id="cd2b" class="kt ku it bd kv kw kx dn ky kz la dp lb kb lc ld le kf lf lg lh kj li lj lk ll bi translated">CodeIgniter 4模型delete()方法</h2><p id="6860" class="pw-post-body-paragraph jq jr it js b jt lm jv jw jx ln jz ka kb lo kd ke kf lp kh ki kj lq kl km kn im bi translated">CodeIgniter 4 Model<code class="fe ko kp kq kr b">delete()</code>method<a class="ae ma" href="https://codeigniter4.github.io/userguide/models/model.html#deleting-data" rel="noopener ugc nofollow" target="_blank">documentation</a>提供了这些信息(下面部分分享):</p><blockquote class="mz na nb"><p id="65c1" class="jq jr ks js b jt ju jv jw jx jy jz ka nc kc kd ke nd kg kh ki ne kk kl km kn im bi translated">将主键值作为第一个参数，并从模型的表中删除匹配的记录:</p><p id="170d" class="jq jr ks js b jt ju jv jw jx jy jz ka nc kc kd ke nd kg kh ki ne kk kl km kn im bi translated">如果模型的$useSoftDeletes值为true，这将更新行以将deleted_at设置为当前日期和时间。您可以通过将第二个参数设置为true来强制永久删除。</p><p id="840e" class="jq jr ks js b jt ju jv jw jx jy jz ka nc kc kd ke nd kg kh ki ne kk kl km kn im bi translated">主键数组可以作为第一个参数传入，以便一次删除多条记录</p><p id="80e5" class="jq jr ks js b jt ju jv jw jx jy jz ka nc kc kd ke nd kg kh ki ne kk kl km kn im bi translated">如果未传入任何参数，将像查询构建器的delete方法一样，需要事先调用where:</p></blockquote><h2 id="ff4e" class="kt ku it bd kv kw kx dn ky kz la dp lb kb lc ld le kf lf lg lh kj li lj lk ll bi translated">使用delete()方法</h2><p id="6d14" class="pw-post-body-paragraph jq jr it js b jt lm jv jw jx ln jz ka kb lo kd ke kf lp kh ki kj lq kl km kn im bi translated">在这篇文章中，我将介绍用Model <code class="fe ko kp kq kr b">delete()</code>方法只删除一条记录。</p><p id="c336" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们目前在MySQL数据库中有3个<em class="ks">项目</em>:</p><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div role="button" tabindex="0" class="ng nh di ni bf nj"><div class="gh gi nf"><img src="../Images/31393fcc8a520b8123c08eb6372e1827.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7JVM9uPquF3UitHNkzcF2A.png"/></div></div></figure><p id="1315" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我已经在<strong class="js iu"> app/Config/Routes.php </strong>文件中添加了这条路径:</p><p id="fcaa" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe ko kp kq kr b">$routes&gt;get(‘projects/delete/(:num)’,‘ProjectsController::deleteProject/$1’);</code></p></div><div class="ab cl mg mh hx mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="im in io ip iq"><p id="66e4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我每周写一封关于我正在学习并感兴趣的SQL/PHP的邮件。如果这听起来像是你想参与的事情，<a class="ae ma" href="https://digitalowlsprose.ck.page/1b35a06295" rel="noopener ugc nofollow" target="_blank">在这里</a>(非现场链接)了解更多。谢谢大家！</p></div><div class="ab cl mg mh hx mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="im in io ip iq"><h2 id="7656" class="kt ku it bd kv kw kx dn ky kz la dp lb kb lc ld le kf lf lg lh kj li lj lk ll bi translated">控制器deleteProject()方法</h2><p id="2a94" class="pw-post-body-paragraph jq jr it js b jt lm jv jw jx ln jz ka kb lo kd ke kf lp kh ki kj lq kl km kn im bi translated">在ProjectsController控制器文件中，我有这个<code class="fe ko kp kq kr b">deleteProject($id)</code>方法:</p><figure class="mo mp mq mr gt ms"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="5fa9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe ko kp kq kr b">deleteProject()</code>方法接受1个参数:表中行的<code class="fe ko kp kq kr b">$id</code>，我们希望是<code class="fe ko kp kq kr b">DELETE</code>。</p><p id="f26a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">单击项目三的<strong class="js iu">删除</strong>链接，将其从MySQL表中完全删除，我们将被重定向回所有项目视图:</p><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div role="button" tabindex="0" class="ng nh di ni bf nj"><div class="gh gi nm"><img src="../Images/61f4dad00a83ede9e2fd30d6aad6e858.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DbEWwLMK0nmxz9gYOTZVAw.png"/></div></div></figure><p id="f502" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如上面截图中的all projects表所示，项目3已经使用CodeIgniter 4 Model <code class="fe ko kp kq kr b">delete()</code>方法从MySQL数据库表中删除，出现在从第3行开始的<code class="fe ko kp kq kr b">if()</code>语句中，该行代码为:<code class="fe ko kp kq kr b">$this-&gt;project_model-&gt;delete($id)</code>。</p><p id="9eaa" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">正如在<code class="fe ko kp kq kr b">delete()</code>方法文档中提到的，提供主键作为单个参数会删除单独的数据行。</p><p id="3431" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">虽然这个操作在执行上很简单，但是在从数据库中删除记录时必须小心。除非你是在一个事务内操作，有机会执行一个<code class="fe ko kp kq kr b">ROLLBACK</code>，被删除的记录都不见了。</p><h2 id="c3ed" class="kt ku it bd kv kw kx dn ky kz la dp lb kb lc ld le kf lf lg lh kj li lj lk ll bi translated">包扎</h2><p id="12db" class="pw-post-body-paragraph jq jr it js b jt lm jv jw jx ln jz ka kb lo kd ke kf lp kh ki kj lq kl km kn im bi translated">带有MySQL的CodeIgniter 4 CRUD系列现在已经完成。这篇文章是拼图的第四块也是最后一块<em class="ks">。我希望你喜欢这个系列，并从帖子中学到一些有价值的东西。</em></p><p id="0348" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">请随意留下您可能有的任何意见或建议。</p></div><div class="ab cl mg mh hx mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="im in io ip iq"><p id="c58c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">一如既往，如果你有任何问题或看到代码中的任何错误，请通过评论让我知道。建设性的意见有助于我提供准确的博客帖子，我非常感激。感谢您的阅读</p></div><div class="ab cl mg mh hx mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="im in io ip iq"><p id="00ac" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">喜欢的内容，你在这个帖子里看过？那么你肯定会喜欢我博客上的博文，<a class="ae ma" href="http://joshuaotwell.com/" rel="noopener ugc nofollow" target="_blank">数字猫头鹰的散文</a>(非现场链接)。</p><p id="26eb" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在那里你会找到关于SQL数据库开发/编程和LAMP stack web开发的博文。</p></div></div>    
</body>
</html>