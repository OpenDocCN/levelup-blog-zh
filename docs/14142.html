<html>
<head>
<title>Creating interactive maps with Python, Folium, and some HTML</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python、Folium和一些HTML创建交互式地图</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/creating-interactive-maps-with-python-folium-and-some-html-f8ac716966f?source=collection_archive---------2-----------------------#2022-11-04">https://levelup.gitconnected.com/creating-interactive-maps-with-python-folium-and-some-html-f8ac716966f?source=collection_archive---------2-----------------------#2022-11-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/61168881731bf5bc4e4e03eb7399ca33.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*K8J20L7TpliRkD0ZmI_v_w.gif"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">让我们创建一个这样的</figcaption></figure><h2 id="5033" class="kc kd iq bd ke kf kg dn kh ki kj dp kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">了解如何使用Python的Learn库和一些HTML创建漂亮的交互式地图，以获得出色的样式。</h2><p id="b4c8" class="pw-post-body-paragraph ky kz iq la b lb lc ld le lf lg lh li kl lj lk ll kp lm ln lo kt lp lq lr ls ij bi lt translated"><span class="l lu lv lw bm lx ly lz ma mb di"> F </span>在我的研究项目中，有一个项目需要制作一个交互式地图，作为一名Python程序员，我知道几种方法来完成这项任务。为了完成这项工作，我选择使用leav库，但是可以设计的弹出标记是基本的，所以为了改进弹出窗口的设计，我将HTML集成到代码中。在本文中，我将给出一个简单但漂亮的例子。</p></div><div class="ab cl mc md hu me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="ij ik il im in"><h2 id="f1a0" class="kc kd iq bd ke kf kg dn kh ki kj dp kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">我们开始吧</h2><p id="1c7c" class="pw-post-body-paragraph ky kz iq la b lb lc ld le lf lg lh li kl lj lk ll kp lm ln lo kt lp lq lr ls ij bi translated">当使用Python创建交互式地图时，follow库做得很好，因为您不需要了解太多Python知识就可以完成这项工作并生成合适的地图。因此，让我们继续导入let和我们将需要的其他依赖项(这些将在我们遇到它们时解释)。</p><figure class="mj mk ml mm gt jr"><div class="bz fp l di"><div class="mn mo l"/></div></figure><p id="3cfe" class="pw-post-body-paragraph ky kz iq la b lb mp ld le lf mq lh li kl mr lk ll kp ms ln lo kt mt lq lr ls ij bi translated">在这个例子中，我们将使用特拉维夫顶级餐馆的数据。该数据包含几家餐馆的名称、位置、经度和纬度、营业时间、价格(一到四)和一些图像。所以让我们继续阅读熊猫的数据。</p><figure class="mj mk ml mm gt jr"><div class="bz fp l di"><div class="mn mo l"/></div></figure><figure class="mj mk ml mm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mu"><img src="../Images/6ae7694c59672fc2acca8a2ea5e5d010.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kKZRVjESGDdCx0t5XtcICQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">特拉维夫顶级餐厅的数据</figcaption></figure><p id="db88" class="pw-post-body-paragraph ky kz iq la b lb mp ld le lf mq lh li kl mr lk ll kp ms ln lo kt mt lq lr ls ij bi translated">现在让我们创建一个地图——一个简单明了的底图。</p><figure class="mj mk ml mm gt jr"><div class="bz fp l di"><div class="mn mo l"/></div></figure><p id="fd9e" class="pw-post-body-paragraph ky kz iq la b lb mp ld le lf mq lh li kl mr lk ll kp ms ln lo kt mt lq lr ls ij bi translated">“位置”参数采用地图中心的坐标。Folium附带了一些内置的地图tiles et，您可以使用“tiles”参数轻松指定它们。默认情况下是OpenStreetMap (OSM) tileset，但是leav也支持使用提供者公开提供的地图切片，例如<a class="ae mv" href="http://maps.stamen.com/#terrain/12/37.7706/-122.3782" rel="noopener ugc nofollow" target="_blank"> <em class="mw">【雄蕊】</em> </a>、<a class="ae mv" href="https://www.thunderforest.com/maps/" rel="noopener ugc nofollow" target="_blank"> <em class="mw">雷森林</em> </a>、<a class="ae mv" href="https://stadiamaps.com/" rel="noopener ugc nofollow" target="_blank"> <em class="mw">视距</em> </a> <em class="mw">、</em> <a class="ae mv" href="https://carto.com/basemaps/" rel="noopener ugc nofollow" target="_blank"> <em class="mw">卡图</em> </a>等。点击<a class="ae mv" href="https://leaflet-extras.github.io/leaflet-providers/preview/" rel="noopener ugc nofollow" target="_blank">链接</a>查看其中一些的对比。“zoom_start”定义地图的初始缩放,“control_scale”添加比例尺。Folium以HTML格式保存与地图相关的所有内容，因此这意味着您可以通过在浏览器中打开<code class="fe mx my mz na b">.html</code>文件来快速查看地图的外观:</p><figure class="mj mk ml mm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nb"><img src="../Images/e996b1fd4cd5e230b0fd3521a7b1dc79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZVRnqduizcw3wDeMEVvb1A.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">Folium的特拉维夫街道底图</figcaption></figure><p id="7829" class="pw-post-body-paragraph ky kz iq la b lb mp ld le lf mq lh li kl mr lk ll kp ms ln lo kt mt lq lr ls ij bi translated">就是这样！一行Python，我们已经有了一个明亮的，丰富多彩的底图。</p><h2 id="b620" class="kc kd iq bd ke kf kg dn kh ki kj dp kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">接下来，向地图添加标记</h2><p id="0fd0" class="pw-post-body-paragraph ky kz iq la b lb lc ld le lf lg lh li kl lj lk ll kp lm ln lo kt lp lq lr ls ij bi translated">让我们开始在地图上放一个标记。我们想按照它的坐标来放置，放在十进制坐标里为【纬度，经度】。当我们将鼠标移到光标上时，follow还允许我们轻松地添加带有标题的标签。这是通过“工具提示”参数完成的。</p><figure class="mj mk ml mm gt jr"><div class="bz fp l di"><div class="mn mo l"/></div></figure><figure class="mj mk ml mm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nc"><img src="../Images/f086836d7e2fea2433819f86f14567bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8m9Ihqq3zD_pMF4SbDdjEw.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">带有标记的follow底图。添加tooltip参数可以在光标位于短文本上时共享短文本。</figcaption></figure><p id="2bf1" class="pw-post-body-paragraph ky kz iq la b lb mp ld le lf mq lh li kl mr lk ll kp ms ln lo kt mt lq lr ls ij bi translated">下一步是使标记可点击，只需再添加一行代码并向标记方法添加另一个参数即可完成:</p><figure class="mj mk ml mm gt jr"><div class="bz fp l di"><div class="mn mo l"/></div></figure><p id="c542" class="pw-post-body-paragraph ky kz iq la b lb mp ld le lf mq lh li kl mr lk ll kp ms ln lo kt mt lq lr ls ij bi translated">Popup方法使我们能够添加文本并使用其他语言，如HTML。最大宽度和最大高度参数允许我们设置弹出窗口的大小限制，而Marker方法中的“popup”参数指定使用该弹出窗口的标记:</p><figure class="mj mk ml mm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nd"><img src="../Images/b2d4c4a384704197909d3f97236e687d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kobbh3CLocSou8FWy43VqQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">带有可点击标记的follow底图</figcaption></figure><p id="23ef" class="pw-post-body-paragraph ky kz iq la b lb mp ld le lf mq lh li kl mr lk ll kp ms ln lo kt mt lq lr ls ij bi translated">因为我们希望我们的交互式地图是功能性的和有吸引力的，我们不会仅仅把细节作为文本和结束。取而代之的是，我们将在折叠按钮下排列文本，并使用一些餐馆及其菜肴的图片。最好的方法是使用HTML。HTML通常用于设计网站，但在这种情况下，它允许我们设计更好的标记。所以首先:</p><h2 id="6a1d" class="kc kd iq bd ke kf kg dn kh ki kj dp kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">让我们为展示安排图片</h2><p id="0ccb" class="pw-post-body-paragraph ky kz iq la b lb lc ld le lf lg lh li kl lj lk ll kp lm ln lo kt lp lq lr ls ij bi translated">有几种方法可以在弹出窗口中显示图像，如幻灯片、视频等。，但是我们将使用一种简单的方法将这些图像打包成GIF。为此，我们将使用<a class="ae mv" href="https://imageio.readthedocs.io/en/stable/" rel="noopener ugc nofollow" target="_blank"> Imageio </a> Python包和<a class="ae mv" href="https://docs.opencv.org/4.x/d6/d00/tutorial_py_root.html" rel="noopener ugc nofollow" target="_blank"> cv2 </a>包，前者提供了一个简单的接口来读写各种图像数据，后者有许多用途，但我们将用它来生成GIF。</p><figure class="mj mk ml mm gt jr"><div class="bz fp l di"><div class="mn mo l"/></div></figure><p id="6b2a" class="pw-post-body-paragraph ky kz iq la b lb mp ld le lf mq lh li kl mr lk ll kp ms ln lo kt mt lq lr ls ij bi translated">我们首先通过JPEG名称对每个餐馆进行循环，并将JPEG本身附加到帧列表中。通过imageio.get_writer方法，我们编写了一个新的。gif文件，将显示每一帧的持续时间为2秒。最后，我们读取所有图像，并将其调整到相同的比例，然后将它们附加到writer中。这不是展示图像的最佳方法，但我发现这是最简单的方法:</p><figure class="mj mk ml mm gt jr gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/8016ff02759b619fd198d55b7f29df9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/1*rISAuWAy862HFPaXw6NCXQ.gif"/></div></figure><h2 id="4d63" class="kc kd iq bd ke kf kg dn kh ki kj dp kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">现在，让我们设计这些弹出窗口</h2><p id="d542" class="pw-post-body-paragraph ky kz iq la b lb lc ld le lf lg lh li kl lj lk ll kp lm ln lo kt lp lq lr ls ij bi translated">这里我们使用一个简单的for循环来遍历所有我们想要为它们创建标记的餐馆。请不要不知所措，因为我们会经历这一点。</p><figure class="mj mk ml mm gt jr"><div class="bz fp l di"><div class="mn mo l"/></div></figure><p id="cb56" class="pw-post-body-paragraph ky kz iq la b lb mp ld le lf mq lh li kl mr lk ll kp ms ln lo kt mt lq lr ls ij bi translated">folio有一个内置的方法将HTML集成到弹出窗口中。“Html ”,它将HTML代码作为其输入。为了允许我们灵活地将循环中每个餐馆的特征输入到适当的字段中，我们将使用f-string方法。</p><p id="fbbf" class="pw-post-body-paragraph ky kz iq la b lb mp ld le lf mq lh li kl mr lk ll kp ms ln lo kt mt lq lr ls ij bi translated">我们将为每个弹出窗口设置一个带有餐馆名称的标题。在这个例子中，我们将它居中对齐，使用Calibri字体，将其涂成白色，并设置为粗体(<strong>):</strong></p><figure class="mj mk ml mm gt jr"><div class="bz fp l di"><div class="mn mo l"/></div></figure><p id="e512" class="pw-post-body-paragraph ky kz iq la b lb mp ld le lf mq lh li kl mr lk ll kp ms ln lo kt mt lq lr ls ij bi translated">下面两行将我们的HTML页面链接到(1)字体awesome的图标，这样我们就可以在文本中使用它们，以及(2) bootstrap的CSS用于折叠按钮。下一个代码块表示一个折叠按钮，在本例中使用了四次:</p><figure class="mj mk ml mm gt jr"><div class="bz fp l di"><div class="mn mo l"/></div></figure><p id="0468" class="pw-post-body-paragraph ky kz iq la b lb mp ld le lf mq lh li kl mr lk ll kp ms ln lo kt mt lq lr ls ij bi translated">大部分是按钮的定义和它们之间的关系(点击一个关闭其他的)。要设置按钮文本的样式，您可以在<code class="fe mx my mz na b">&lt;h4 class="panel-title"</code>行中更改或添加“样式”。通过将<code class="fe mx my mz na b">&lt;i class="fa-light fa-newspaper"&gt;&lt;/i&gt;</code>改变为<a class="ae mv" href="https://fontawesome.com/icons/" rel="noopener ugc nofollow" target="_blank">字体网站</a>中许多其他图标中的一个。<code class="fe mx my mz na b">&lt;div class="panel-body"</code>负责按钮下的文字。在这种情况下，我们只是将它设置为“justify”对齐，但这也可以用颜色、字体系列、字体大小等进行样式化。HTML代码的最后一部分是上传我们的GIF:</p><figure class="mj mk ml mm gt jr"><div class="bz fp l di"><div class="mn mo l"/></div></figure><p id="c43e" class="pw-post-body-paragraph ky kz iq la b lb mp ld le lf mq lh li kl mr lk ll kp ms ln lo kt mt lq lr ls ij bi translated">这部分比较直接。“src”获取图像/gif位置，而“width”设置其大小。此外，为了给它一个更好的风格，我们将“边框半径”设置为50px，以获得更好的外观。</p><p id="8fc8" class="pw-post-body-paragraph ky kz iq la b lb mp ld le lf mq lh li kl mr lk ll kp ms ln lo kt mt lq lr ls ij bi translated">每个标记的最后两步是:( 1)定义包含HTML代码的弹出窗口，并像我们之前做的那样设置标记,( 2)设置一个漂亮的背景。在我们的例子中，我使用HTML定义了一个从顶部的蓝色到白色的线性渐变背景，在页面的25%之后完成过渡(弹出)。不过，你也可以用同样的方法来使用图像或gif——用我们用来呈现gif的行的相同结构来替换“背景:”后面的内容。所以我们得到的最终产品是:</p><figure class="mj mk ml mm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/61168881731bf5bc4e4e03eb7399ca33.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*K8J20L7TpliRkD0ZmI_v_w.gif"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">最后的结果</figcaption></figure></div><div class="ab cl mc md hu me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="ij ik il im in"><h2 id="26ea" class="kc kd iq bd ke kf kg dn kh ki kj dp kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">真的是这样！</h2><p id="91fa" class="pw-post-body-paragraph ky kz iq la b lb lc ld le lf lg lh li kl lj lk ll kp lm ln lo kt lp lq lr ls ij bi translated">我就说到这里，不过你可以在这里找到完成的<a class="ae mv" href="https://waeara.github.io/Creating-interactive-maps-with-Python-Folium-and-some-HTML/Tel%20Aviv%20Resturants.html" rel="noopener ugc nofollow" target="_blank">地图</a>。如果你有任何想法或问题，请随时留下评论🙂</p><p id="d336" class="pw-post-body-paragraph ky kz iq la b lb mp ld le lf mq lh li kl mr lk ll kp ms ln lo kt mt lq lr ls ij bi translated">感谢阅读！🍔</p></div><div class="ab cl mc md hu me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="ij ik il im in"><h1 id="a3d8" class="nf kd iq bd ke ng nh ni kh nj nk nl kk nm nn no ko np nq nr ks ns nt nu kw nv bi translated">分级编码</h1><p id="c528" class="pw-post-body-paragraph ky kz iq la b lb lc ld le lf lg lh li kl lj lk ll kp lm ln lo kt lp lq lr ls ij bi translated">感谢您成为我们社区的一员！在你离开之前:</p><ul class=""><li id="2138" class="nw nx iq la b lb mp lf mq kl ny kp nz kt oa ls ob oc od oe bi translated">👏为故事鼓掌，跟着作者走👉</li><li id="8414" class="nw nx iq la b lb of lf og kl oh kp oi kt oj ls ob oc od oe bi translated">📰查看<a class="ae mv" href="https://levelup.gitconnected.com/?utm_source=pub&amp;utm_medium=post" rel="noopener ugc nofollow" target="_blank">升级编码出版物</a>中的更多内容</li><li id="190a" class="nw nx iq la b lb of lf og kl oh kp oi kt oj ls ob oc od oe bi translated">🔔关注我们:<a class="ae mv" href="https://twitter.com/gitconnected" rel="noopener ugc nofollow" target="_blank">Twitter</a>|<a class="ae mv" href="https://www.linkedin.com/company/gitconnected" rel="noopener ugc nofollow" target="_blank">LinkedIn</a>|<a class="ae mv" href="https://newsletter.levelup.dev" rel="noopener ugc nofollow" target="_blank">时事通讯</a></li></ul><p id="8421" class="pw-post-body-paragraph ky kz iq la b lb mp ld le lf mq lh li kl mr lk ll kp ms ln lo kt mt lq lr ls ij bi translated">🚀👉<a class="ae mv" href="https://jobs.levelup.dev/talent/welcome?referral=true" rel="noopener ugc nofollow" target="_blank"> <strong class="la ir">加入升级人才集体，找到一份神奇的工作</strong> </a></p></div></div>    
</body>
</html>