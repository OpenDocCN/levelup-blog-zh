<html>
<head>
<title>JavaScript Best Practices — Cases and Loops</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript最佳实践—案例和循环</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/javascript-best-practices-cases-and-loops-9e9f5274d680?source=collection_archive---------17-----------------------#2020-05-27">https://levelup.gitconnected.com/javascript-best-practices-cases-and-loops-9e9f5274d680?source=collection_archive---------17-----------------------#2020-05-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/acf33369b5aed84725919b0d7b29abf1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JILquiLCwIMPUAkR"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">照片由<a class="ae kf" href="https://unsplash.com/@emilygreta?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">艾米丽·巴鲁法尔迪</a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="b529" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">JavaScript是一种非常宽容的语言。编写可以运行但有错误的代码很容易。</p><p id="fb05" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本文中，我们将看看如何使用<code class="fe le lf lg lh b">case</code>语句以及编写循环的最佳实践。</p><h1 id="5f67" class="li lj it bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">按字母或数字顺序排列案例</h1><p id="8267" class="pw-post-body-paragraph kg kh it ki b kj mg kl km kn mh kp kq kr mi kt ku kv mj kx ky kz mk lb lc ld im bi translated">我们可能希望按字母或数字顺序排列案例，以便于阅读。</p><p id="435c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="ml mm mn mo gt mp lh mq mr aw ms bi"><span id="4dd2" class="mt lj it lh b gy mu mv l mw mx">switch (val) {<br/>  case 1:<br/>    //...<br/>    break;<br/>  case 2:<br/>    //...<br/>    break;<br/>  default:<br/>    //...<br/>    break;<br/>}</span></pre><p id="d35f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">或者写:</p><pre class="ml mm mn mo gt mp lh mq mr aw ms bi"><span id="e2b4" class="mt lj it lh b gy mu mv l mw mx">switch (val) {<br/>  case 'a':<br/>    //...<br/>    break;<br/>  case 'b':<br/>    //...<br/>    break;<br/>  default:<br/>    //...<br/>    break;<br/>}</span></pre><h1 id="9e13" class="li lj it bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">把正常情况放在首位</h1><p id="e37e" class="pw-post-body-paragraph kg kh it ki b kj mg kl km kn mh kp kq kr mi kt ku kv mj kx ky kz mk lb lc ld im bi translated">如果我们把正常情况放在第一位，那么我们就不必经常因为短路而去考虑其他情况。</p><p id="7920" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因此，如果我们将<code class="fe le lf lg lh b">'success'</code>情况作为正常情况，我们可以写:</p><pre class="ml mm mn mo gt mp lh mq mr aw ms bi"><span id="9029" class="mt lj it lh b gy mu mv l mw mx">switch (val) {<br/>  case 'success':<br/>    //...<br/>    break;<br/>  case 'error':<br/>    //...<br/>    break;<br/>  default:<br/>    //...<br/>    break;<br/>}</span></pre><h1 id="a0d3" class="li lj it bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">保持每个案例的操作简单</h1><p id="270d" class="pw-post-body-paragraph kg kh it ki b kj mg kl km kn mh kp kq kr mi kt ku kv mj kx ky kz mk lb lc ld im bi translated">案例应该简短以保持可读性。如果<code class="fe le lf lg lh b">case</code>语句或块中的动作很复杂，我们应该编写函数来包含它们。</p><p id="6168" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以编写以下内容:</p><pre class="ml mm mn mo gt mp lh mq mr aw ms bi"><span id="5238" class="mt lj it lh b gy mu mv l mw mx">switch (val) {<br/>  case 'success':<br/>    handleSuccess();<br/>    break;<br/>  case 'error':<br/>    handleError();<br/>    break;<br/>  default:<br/>    //...<br/>    break;<br/>}</span></pre><h1 id="31db" class="li lj it bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">不要为了使用case语句而编造虚假的变量</h1><p id="87b2" class="pw-post-body-paragraph kg kh it ki b kj mg kl km kn mh kp kq kr mi kt ku kv mj kx ky kz mk lb lc ld im bi translated">case语句应该用于容易分类的数据。</p><p id="7b1a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因此，我们应该这样写:</p><pre class="ml mm mn mo gt mp lh mq mr aw ms bi"><span id="10d6" class="mt lj it lh b gy mu mv l mw mx">const action = command[0];<br/>switch (action) {<br/>  case 'a':<br/>    //...<br/>    break;<br/>  case 'b':<br/>    //...<br/>    break;<br/>  default:<br/>    //...<br/>    break;<br/>}</span></pre><p id="1671" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们传递给<code class="fe le lf lg lh b">switch</code>的变量应该是一个简单的变量。在检查案例之前，我们不应该做像从字符串中取出第一个字母这样的事情。</p><p id="29c3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">第一个字母可以由多个单词使用，所以我们希望在我们的案例中避免使用第一个字母。</p><h1 id="c08f" class="li lj it bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">仅使用default子句来检测合法的默认值</h1><p id="e20a" class="pw-post-body-paragraph kg kh it ki b kj mg kl km kn mh kp kq kr mi kt ku kv mj kx ky kz mk lb lc ld im bi translated"><code class="fe le lf lg lh b">default</code>条款应该只用于真正的违约。</p><p id="00dc" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果我们没有一个真正的默认值，那么我们就不需要一个<code class="fe le lf lg lh b">default</code>子句。</p><h1 id="8e3e" class="li lj it bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">使用default子句检测错误</h1><p id="61fb" class="pw-post-body-paragraph kg kh it ki b kj mg kl km kn mh kp kq kr mi kt ku kv mj kx ky kz mk lb lc ld im bi translated">如果有不应该发生的情况，我们可以使用<code class="fe le lf lg lh b">default</code>子句来捕捉这些情况。</p><p id="f352" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以这样写:</p><pre class="ml mm mn mo gt mp lh mq mr aw ms bi"><span id="5c76" class="mt lj it lh b gy mu mv l mw mx">switch (action) {<br/>  case 'a':<br/>    //...<br/>    break;<br/>  case 'b':<br/>    //...<br/>    break;<br/>  default:<br/>    handleError();<br/>    break;<br/>}</span></pre><p id="b8d5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们在默认情况下处理错误，以防遇到错误。</p><h1 id="415f" class="li lj it bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">避免跳过case语句的结尾</h1><p id="b2ba" class="pw-post-body-paragraph kg kh it ki b kj mg kl km kn mh kp kq kr mi kt ku kv mj kx ky kz mk lb lc ld im bi translated">JavaScript不会在每个case语句或块的末尾自动中断。</p><p id="32d6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因此，我们应该编写<code class="fe le lf lg lh b">break</code>关键字，在语句或块的末尾停止执行。</p><p id="9ed6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，不要写:</p><pre class="ml mm mn mo gt mp lh mq mr aw ms bi"><span id="e355" class="mt lj it lh b gy mu mv l mw mx">switch (action) {<br/>  case 'a':<br/>    //...    <br/>  case 'b':<br/>    //...    <br/>}</span></pre><p id="a21b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们写道:</p><pre class="ml mm mn mo gt mp lh mq mr aw ms bi"><span id="f59d" class="mt lj it lh b gy mu mv l mw mx">switch (action) {<br/>  case 'a':<br/>    //...    <br/>    break;<br/>  case 'b':<br/>    //...    <br/>    break;<br/>}</span></pre><figure class="ml mm mn mo gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi my"><img src="../Images/64b87fb426239144a37d145d736a9ba3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*cY9w6GgaTYEiqOo9"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">照片由<a class="ae kf" href="https://unsplash.com/@jannerboy62?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">缺口缺口</a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">缺口</a>处拍摄</figcaption></figure><h1 id="47fb" class="li lj it bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">何时使用while循环</h1><p id="1b85" class="pw-post-body-paragraph kg kh it ki b kj mg kl km kn mh kp kq kr mi kt ku kv mj kx ky kz mk lb lc ld im bi translated">我们应该使用<code class="fe le lf lg lh b">while</code>来测试循环结束时的退出条件。</p><p id="a31e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为此，我们写道:</p><pre class="ml mm mn mo gt mp lh mq mr aw ms bi"><span id="cbad" class="mt lj it lh b gy mu mv l mw mx">while (!done) {<br/>  if (condition) {<br/>    done = true;<br/>  }<br/>  //...<br/>}</span></pre><p id="af35" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这将检查循环体开始时的情况。</p><p id="04ff" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们也可以通过将<code class="fe le lf lg lh b">if</code>块移动到末端来检查末端。</p><p id="77af" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">此外，在检查继续循环的条件之前，我们使用了<code class="fe le lf lg lh b">do...while</code>循环来首先运行循环体。</p><p id="210c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="ml mm mn mo gt mp lh mq mr aw ms bi"><span id="9e0c" class="mt lj it lh b gy mu mv l mw mx">do {<br/>  if (condition) {<br/>    done = true;<br/>  }<br/>  //...<br/>}<br/>while (!done)</span></pre><p id="63a0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">那么第一次迭代总是运行。</p><h1 id="563d" class="li lj it bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">使用带出口的循环</h1><p id="a649" class="pw-post-body-paragraph kg kh it ki b kj mg kl km kn mh kp kq kr mi kt ku kv mj kx ky kz mk lb lc ld im bi translated">我们也可以把一个循环条件放在循环体的中间。</p><p id="ecf4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后，我们可以避免在退出检查之前产生的任何无效值所导致的错误。</p><p id="19f1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="ml mm mn mo gt mp lh mq mr aw ms bi"><span id="b96a" class="mt lj it lh b gy mu mv l mw mx">while (!done) {<br/>  //...<br/>  if (length &lt; 0 || width &lt; 0) {<br/>    done = true;<br/>  }<br/>  //...<br/>}</span></pre><p id="4b36" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后，如果<code class="fe le lf lg lh b">length</code>或<code class="fe le lf lg lh b">width</code>小于0，我们可以避免运行需要它们的其余代码。</p><h1 id="f32c" class="li lj it bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">结论</h1><p id="3e8d" class="pw-post-body-paragraph kg kh it ki b kj mg kl km kn mh kp kq kr mi kt ku kv mj kx ky kz mk lb lc ld im bi translated">我们可以使用<code class="fe le lf lg lh b">while</code>循环来重复运行代码，并检查每次迭代中的条件，这样我们就可以结束它。</p><p id="eb22" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">还有一个<code class="fe le lf lg lh b">do...while</code>循环，总是在检查我们的条件之前运行第一次迭代。</p><p id="a131" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果我们使用<code class="fe le lf lg lh b">switch</code>语句，我们可能希望将case语句按顺序排列，并且总是将<code class="fe le lf lg lh b">break</code>放在块的末尾。</p><p id="341b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">或者，我们也可以把正常情况放在前面，把错误情况放在后面。</p></div></div>    
</body>
</html>