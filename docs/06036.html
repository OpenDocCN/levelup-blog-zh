<html>
<head>
<title>Intro to Terraform: Provision EC2 Instance and Install Jenkins</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Terraform简介:供应EC2实例并安装Jenkins</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/intro-to-terraform-provision-ec2-instance-and-install-jenkins-3ccb7e2d60f6?source=collection_archive---------2-----------------------#2020-10-21">https://levelup.gitconnected.com/intro-to-terraform-provision-ec2-instance-and-install-jenkins-3ccb7e2d60f6?source=collection_archive---------2-----------------------#2020-10-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="f933" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如何轻松配置EC2实例并执行远程命令来安装Jenkins</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/a07b658db252da8590e9a5bec45a52ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6aMUVgLRdm1SmWx8"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">照片由<a class="ae le" href="https://unsplash.com/@lanceanderson?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">兰斯·安德森</a>在<a class="ae le" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><h1 id="a872" class="lf lg it bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">介绍</h1><p id="db5b" class="pw-post-body-paragraph jq jr it js b jt md jv jw jx me jz ka kb mf kd ke kf mg kh ki kj mh kl km kn im bi translated">Terraform是一种工具，允许您快速构建和提供代码形式的基础设施，并与许多提供商兼容，如AWS、Google Cloud、Digital Ocean等。</p><p id="50b0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在本文中，我将带您了解如何简单快速地利用Terraform在运行Ubuntu的AWS上提供EC2实例并安装Jenkins。</p></div><div class="ab cl mi mj hx mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="im in io ip iq"><h1 id="ad77" class="lf lg it bd lh li mp lk ll lm mq lo lp lq mr ls lt lu ms lw lx ly mt ma mb mc bi translated">先决条件</h1><ul class=""><li id="4fce" class="mu mv it js b jt md jx me kb mw kf mx kj my kn mz na nb nc bi translated"><a class="ae le" href="https://learn.hashicorp.com/tutorials/terraform/install-cli?in=terraform/aws-get-started" rel="noopener ugc nofollow" target="_blank">安装地形</a></li><li id="4ad0" class="mu mv it js b jt nd jx ne kb nf kf ng kj nh kn mz na nb nc bi translated">一个<a class="ae le" href="https://aws.amazon.com/free/?all-free-tier.sort-by=item.additionalFields.SortRank&amp;all-free-tier.sort-order=asc" rel="noopener ugc nofollow" target="_blank"> AWS帐户</a> —我们正在使用AWS免费层</li><li id="6d7f" class="mu mv it js b jt nd jx ne kb nf kf ng kj nh kn mz na nb nc bi translated">您在本地配置的<a class="ae le" href="https://learn.hashicorp.com/tutorials/terraform/aws-build?in=terraform/aws-get-started" rel="noopener ugc nofollow" target="_blank"> AWS凭证</a></li><li id="bff9" class="mu mv it js b jt nd jx ne kb nf kf ng kj nh kn mz na nb nc bi translated">安装了AWS CLI<a class="ae le" href="https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-install.html" rel="noopener ugc nofollow" target="_blank"/></li><li id="e61e" class="mu mv it js b jt nd jx ne kb nf kf ng kj nh kn mz na nb nc bi translated"><a class="ae le" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-key-pairs.html#having-ec2-create-your-key-pair" rel="noopener ugc nofollow" target="_blank"> AWS密钥对</a> —访问EC2实例</li><li id="7a14" class="mu mv it js b jt nd jx ne kb nf kf ng kj nh kn mz na nb nc bi translated">AWS的一些基础知识</li></ul></div><div class="ab cl mi mj hx mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="im in io ip iq"><h1 id="9e99" class="lf lg it bd lh li mp lk ll lm mq lo lp lq mr ls lt lu ms lw lx ly mt ma mb mc bi translated">设置EC2实例</h1><p id="021e" class="pw-post-body-paragraph jq jr it js b jt md jv jw jx me jz ka kb mf kd ke kf mg kh ki kj mh kl km kn im bi translated">在撰写本文时，我正在运行Terraform v0.13.4。让我们从为我们的工作目录创建一个文件夹并创建一个<code class="fe ni nj nk nl b">main.tf</code>文件开始。</p><pre class="kp kq kr ks gt nm nl nn no aw np bi"><span id="eabb" class="nq lg it nl b gy nr ns l nt nu">➜  ~ mkdir terraform-intro<br/>➜  ~ cd terraform-intro<br/>➜  terraform-into touch main.tf</span></pre><p id="9ee2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在您最喜欢的文本编辑器中打开<code class="fe ni nj nk nl b">main.tf</code>,然后粘贴以下内容。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="08db" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">provider块定义了使用哪个提供者，在我们的例子中是aws。在块内部，我们定义了相关的aws <code class="fe ni nj nk nl b">profile</code>和<code class="fe ni nj nk nl b">region</code>。对于本教程，我建议使用离您最近的地区。</p><p id="94a2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">数据块允许我们从aws获取特定的参数。我们想抓取最新的<code class="fe ni nj nk nl b">aws_ami</code> Ubuntu 20图片。</p><p id="d0cb" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">资源块定义了要供应的资源。我们告诉Terraform提供一个<code class="fe ni nj nk nl b">aws_instance</code>资源。第二个参数<code class="fe ni nj nk nl b">jenkins</code>仅在从Terraform代码的其他部分引用该资源时使用。</p><p id="7096" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在这个资源块中，我们指定了<code class="fe ni nj nk nl b">ami</code>、<code class="fe ni nj nk nl b">instance_type</code>和<code class="fe ni nj nk nl b">tags</code>。对于<code class="fe ni nj nk nl b">ami</code>，我们从上面的数据块中引用ubuntu镜像的id。</p><p id="f365" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在<code class="fe ni nj nk nl b">tags</code>块中，<code class="fe ni nj nk nl b">Name</code>将会显示在EC2控制台中。<code class="fe ni nj nk nl b">"Terraform" : "true"</code>行用于标记terraform提供的资源。这可以帮助我们在AWS中轻松地搜索和过滤资源。</p><p id="f3bb" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">接下来，让我们保存我们的<code class="fe ni nj nk nl b">main.tf</code>文件并启动它。</p></div><div class="ab cl mi mj hx mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="im in io ip iq"><h1 id="ca7e" class="lf lg it bd lh li mp lk ll lm mq lo lp lq mr ls lt lu ms lw lx ly mt ma mb mc bi translated">应用Terraform文件</h1><p id="c19a" class="pw-post-body-paragraph jq jr it js b jt md jv jw jx me jz ka kb mf kd ke kf mg kh ki kj mh kl km kn im bi translated">为了验证到目前为止一切都配置正确，让我们尝试启动我们的EC2实例。打开终端，导航到<code class="fe ni nj nk nl b">main.tf</code>文件所在的目录。</p><p id="3b2a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">首先，我们需要运行<code class="fe ni nj nk nl b">terraform init</code>来初始化terraform项目。Terraform将下载并安装配置中使用的提供程序。</p><pre class="kp kq kr ks gt nm nl nn no aw np bi"><span id="ad9b" class="nq lg it nl b gy nr ns l nt nu">➜  terraform-into terraform init</span><span id="42fa" class="nq lg it nl b gy nx ns l nt nu">Initializing the backend...</span><span id="b439" class="nq lg it nl b gy nx ns l nt nu">Initializing provider plugins...<br/>- Finding latest version of hashicorp/aws...<br/>- Installing hashicorp/aws v3.9.0...<br/>- Installed hashicorp/aws v3.9.0 (signed by HashiCorp)</span><span id="8b3c" class="nq lg it nl b gy nx ns l nt nu">The following providers do not have any version constraints in configuration,<br/>so the latest version was installed.</span><span id="f0a1" class="nq lg it nl b gy nx ns l nt nu">To prevent automatic upgrades to new major versions that may contain breaking<br/>changes, we recommend adding version constraints in a required_providers block<br/>in your configuration, with the constraint strings suggested below.</span><span id="6009" class="nq lg it nl b gy nx ns l nt nu">* hashicorp/aws: version = "~&gt; 3.9.0"</span><span id="9354" class="nq lg it nl b gy nx ns l nt nu">Terraform has been successfully initialized!</span><span id="38f6" class="nq lg it nl b gy nx ns l nt nu">You may now begin working with Terraform. Try running "terraform plan" to see<br/>any changes that are required for your infrastructure. All Terraform commands<br/>should now work.</span><span id="ea99" class="nq lg it nl b gy nx ns l nt nu">If you ever set or change modules or backend configuration for Terraform,<br/>rerun this command to reinitialize your working directory. If you forget, other<br/>commands will detect it and remind you to do so if necessary.</span></pre><p id="4b4e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">接下来，运行<code class="fe ni nj nk nl b">terraform validate</code>来验证我们的配置。如果配置有效，Terraform将返回一条成功消息。</p><pre class="kp kq kr ks gt nm nl nn no aw np bi"><span id="23fc" class="nq lg it nl b gy nr ns l nt nu">➜  terraform-into terraform validate<br/>Success! The configuration is valid.</span></pre><p id="c919" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在，我们可以应用我们的<code class="fe ni nj nk nl b">main.tf</code>配置，通过运行<code class="fe ni nj nk nl b">terraform apply</code>并在提示执行操作时输入<code class="fe ni nj nk nl b">yes</code>来创建我们的EC2实例。</p><pre class="kp kq kr ks gt nm nl nn no aw np bi"><span id="f015" class="nq lg it nl b gy nr ns l nt nu">➜  terraform-into terraform apply</span><span id="cad8" class="nq lg it nl b gy nx ns l nt nu">An execution plan has been generated and is shown below.<br/>Resource actions are indicated with the following symbols:<br/>  + create</span><span id="e844" class="nq lg it nl b gy nx ns l nt nu">Terraform will perform the following actions:</span><span id="5ade" class="nq lg it nl b gy nx ns l nt nu"># aws_instance.jenkins will be created<br/>  + resource "aws_instance" "jenkins" {<br/>      + ami                          = "ami-0c43b23f011ba5061"<br/>      + arn                          = (known after apply)<br/>      + associate_public_ip_address  = (known after apply)<br/>      + availability_zone            = (known after apply)<br/>      + cpu_core_count               = (known after apply)<br/>      + cpu_threads_per_core         = (known after apply)<br/>      + get_password_data            = false<br/>      + host_id                      = (known after apply)<br/>      + id                           = (known after apply)<br/>      + instance_state               = (known after apply)<br/>      + instance_type                = "t2.micro"<br/>      + ipv6_address_count           = (known after apply)<br/>      + ipv6_addresses               = (known after apply)</span><span id="c63b" class="nq lg it nl b gy nx ns l nt nu">## ... Output truncated</span><span id="c451" class="nq lg it nl b gy nx ns l nt nu">Plan: 1 to add, 0 to change, 0 to destroy.</span><span id="078f" class="nq lg it nl b gy nx ns l nt nu">Do you want to perform these actions?<br/>  Terraform will perform the actions described above.<br/>  Only 'yes' will be accepted to approve.</span><span id="f40d" class="nq lg it nl b gy nx ns l nt nu">Enter a value: yes</span><span id="92fd" class="nq lg it nl b gy nx ns l nt nu">aws_instance.jenkins: Creating...<br/>aws_instance.jenkins: Still creating... [10s elapsed]<br/>aws_instance.jenkins: Still creating... [20s elapsed]<br/>aws_instance.jenkins: Still creating... [30s elapsed]<br/>aws_instance.jenkins: Creation complete after 33s [id=i-01266db33e346d7ce]</span><span id="a873" class="nq lg it nl b gy nx ns l nt nu">Apply complete! Resources: 1 added, 0 changed, 0 destroyed.</span></pre><p id="be09" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">通过查看EC2控制台，验证新的EC2实例是否已经启动。注意<code class="fe ni nj nk nl b">Name</code>值是我们在<code class="fe ni nj nk nl b">aws_instance</code>资源块的<code class="fe ni nj nk nl b">tags</code>块中指定的。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ny"><img src="../Images/04d161d49e62d20927e1f1a364581bfa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TTbUPTm7-g6HE_0KZQISlQ.png"/></div></div></figure><p id="f618" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在让我们通过在终端中运行<code class="fe ni nj nk nl b">terraform destroy</code>来删除EC2实例。这将删除我们在执行terraform apply命令时所做的一切。</p><pre class="kp kq kr ks gt nm nl nn no aw np bi"><span id="61fb" class="nq lg it nl b gy nr ns l nt nu">➜  terraform-into terraform destroy<br/>data.aws_ami.ubuntu: Refreshing state... [id=ami-0c43b23f011ba5061]<br/>aws_instance.jenkins: Refreshing state... [id=i-01266db33e346d7ce]</span><span id="7f40" class="nq lg it nl b gy nx ns l nt nu">An execution plan has been generated and is shown below.<br/>Resource actions are indicated with the following symbols:<br/>  - destroy</span><span id="2354" class="nq lg it nl b gy nx ns l nt nu">Terraform will perform the following actions:</span><span id="734d" class="nq lg it nl b gy nx ns l nt nu"># aws_instance.jenkins will be destroyed<br/>  - resource "aws_instance" "jenkins" {<br/>      - ami                          = "ami-0c43b23f011ba5061" -&gt; null<br/>      - arn                          = "arn:aws:ec2:us-east-1:538578229126:instance/i-01266db33e346d7ce" -&gt; null<br/>      - associate_public_ip_address  = true -&gt; null<br/>      - availability_zone            = "us-east-1d" -&gt; null<br/>      - cpu_core_count               = 1 -&gt; null<br/>      - cpu_threads_per_core         = 1 -&gt; null<br/>      - disable_api_termination      = false -&gt; null<br/>      - ebs_optimized                = false -&gt; null<br/>      - get_password_data            = false -&gt; null<br/>      - hibernation                  = false -&gt; null<br/>      - id                           = "i-01266db33e346d7ce" -&gt; null<br/>      - instance_state               = "running" -&gt; null<br/>      - instance_type                = "t2.micro" -&gt; null</span><span id="42d5" class="nq lg it nl b gy nx ns l nt nu">## ... Output truncated</span><span id="a857" class="nq lg it nl b gy nx ns l nt nu">Plan: 0 to add, 0 to change, 1 to destroy.</span><span id="a41d" class="nq lg it nl b gy nx ns l nt nu">Do you really want to destroy all resources?<br/>  Terraform will destroy all your managed infrastructure, as shown above.<br/>  There is no undo. Only 'yes' will be accepted to confirm.</span><span id="c182" class="nq lg it nl b gy nx ns l nt nu">Enter a value: yes</span><span id="f852" class="nq lg it nl b gy nx ns l nt nu">aws_instance.jenkins: Destroying... [id=i-01266db33e346d7ce]<br/>aws_instance.jenkins: Still destroying... [id=i-01266db33e346d7ce, 10s elapsed]<br/>aws_instance.jenkins: Still destroying... [id=i-01266db33e346d7ce, 20s elapsed]<br/>aws_instance.jenkins: Still destroying... [id=i-01266db33e346d7ce, 30s elapsed]<br/>aws_instance.jenkins: Destruction complete after 30s</span><span id="a8d8" class="nq lg it nl b gy nx ns l nt nu">Destroy complete! Resources: 1 destroyed.</span></pre></div><div class="ab cl mi mj hx mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="im in io ip iq"><h1 id="aba7" class="lf lg it bd lh li mp lk ll lm mq lo lp lq mr ls lt lu ms lw lx ly mt ma mb mc bi translated">配置安全组</h1><p id="2434" class="pw-post-body-paragraph jq jr it js b jt md jv jw jx me jz ka kb mf kd ke kf mg kh ki kj mh kl km kn im bi translated">在本节中，我们将配置安全组，使我们的EC2实例可以公开访问。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nv nw l"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">添加“aws_security_group”资源</figcaption></figure><p id="6b1b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这里，我们定义了一个<code class="fe ni nj nk nl b">aws_security_group</code>资源块。提醒一下，<code class="fe ni nj nk nl b">prod_web</code>是资源块的第二个参数，仅在terraform内部引用时使用。</p><p id="4ef3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在资源块中，我们定义了<code class="fe ni nj nk nl b">name</code>和<code class="fe ni nj nk nl b">description</code>。在第15行，我们使用了一个动态块，这样我们可以遍历一个端口号列表来允许进入。端口列表(80，443)可以在第6行找到，<code class="fe ni nj nk nl b">ingressrules</code>变量。接下来，我们配置出口规则以允许所有流量。</p><p id="fb9e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在我们需要将安全组附加到aws_instance，如上面第47行所示。我们还需要<a class="ae le" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-key-pairs.html#having-ec2-create-your-key-pair" rel="noopener ugc nofollow" target="_blank">为实例创建/添加一个密钥对</a>，这样我们就可以通过SSH访问服务器，见第48行。</p><p id="988c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们运行<code class="fe ni nj nk nl b">terraform apply</code>来应用我们的新配置。如果一切都配置正确，您应该在AWS控制台内的EC2实例上看到附加的安全组。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nz"><img src="../Images/e690cb1a1d57028af99ea6eadc8353e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ETiMn2LgsVruYDCz7rzfWg.png"/></div></div></figure><p id="aefc" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们验证我们可以通过公共DNS名称通过SSH连接到EC2实例。公共DNS名称地址可以在网络选项卡上找到。用户名默认为“ubuntu”。</p><pre class="kp kq kr ks gt nm nl nn no aw np bi"><span id="33c2" class="nq lg it nl b gy nr ns l nt nu">➜  ~ ssh -i kluu.pem <a class="ae le" href="mailto:ubuntu@ec2-54-226-53-233.compute-1.amazonaws.com" rel="noopener ugc nofollow" target="_blank">ubuntu@ec2-54-226-53-233.compute-1.amazonaws.com</a><br/>Welcome to Ubuntu 20.04.1 LTS (GNU/Linux 5.4.0-1025-aws x86_64)</span><span id="1408" class="nq lg it nl b gy nx ns l nt nu">## ... Output truncated</span><span id="7374" class="nq lg it nl b gy nx ns l nt nu">To run a command as administrator (user "root"), use "sudo &lt;command&gt;".<br/>See "man sudo_root" for details.</span><span id="e33a" class="nq lg it nl b gy nx ns l nt nu">ubuntu@ip-172-31-23-99:~$</span></pre></div><div class="ab cl mi mj hx mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="im in io ip iq"><h1 id="d42e" class="lf lg it bd lh li mp lk ll lm mq lo lp lq mr ls lt lu ms lw lx ly mt ma mb mc bi translated">执行远程命令</h1><p id="6d97" class="pw-post-body-paragraph jq jr it js b jt md jv jw jx me jz ka kb mf kd ke kf mg kh ki kj mh kl km kn im bi translated">现在，我们要安装Java，Jenkins，并在服务器上配置从端口80到8080的端口转发，这样我们就可以公开访问Jenkins。我们可以使用provisioner和<code class="fe ni nj nk nl b">aws_instance</code>块中的<code class="fe ni nj nk nl b">“remote-exec”</code>在实例被提供后执行命令。<code class="fe ni nj nk nl b">inline</code>参数将按顺序逐行执行每个命令。</p><p id="403f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在<code class="fe ni nj nk nl b">connection</code>块中，我们指定了连接类型、主机、用户和私有密钥的路径。这就是Terraform在提供实例后连接到实例并运行我们的命令的方式。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="2674" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们再次运行<code class="fe ni nj nk nl b">terraform apply</code>命令。如果一切都配置和供应正确，您应该能够通过您的web浏览器使用公共DNS名称访问Jenkins。</p><p id="366a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">配置Jenkins超出了本文的范围，但是如果您在设置Jenkins时需要帮助，有许多关于如何设置Jenkins的文章。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ny"><img src="../Images/9e305e25a1c10416af65493035ef02c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2bT9ICMuvSy0nyVl2GPgiA.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">Jenkins安装在EC2实例上，可以公开访问</figcaption></figure></div><div class="ab cl mi mj hx mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="im in io ip iq"><h1 id="7a5d" class="lf lg it bd lh li mp lk ll lm mq lo lp lq mr ls lt lu ms lw lx ly mt ma mb mc bi translated">摘要</h1><p id="5832" class="pw-post-body-paragraph jq jr it js b jt md jv jw jx me jz ka kb mf kd ke kf mg kh ki kj mh kl km kn im bi translated">Terraform是一个强大的工具，允许我们通过代码快速创建、破坏和重建基础设施。在本文中，我们仅仅触及了Terraform的皮毛。我肯定会查看Terraform文档<a class="ae le" href="https://www.terraform.io/docs/index.html" rel="noopener ugc nofollow" target="_blank">以真正深入了解Terraform所提供的功能。</a></p><p id="a9f8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在本文中，我们讨论了:</p><ul class=""><li id="a135" class="mu mv it js b jt ju jx jy kb oa kf ob kj oc kn mz na nb nc bi translated">从最新的Ubuntu AMI创建EC2实例</li><li id="a3eb" class="mu mv it js b jt nd jx ne kb nf kf ng kj nh kn mz na nb nc bi translated">学会了如何使用标签</li><li id="6271" class="mu mv it js b jt nd jx ne kb nf kf ng kj nh kn mz na nb nc bi translated">为安全组创建入口/出口规则</li><li id="3bcd" class="mu mv it js b jt nd jx ne kb nf kf ng kj nh kn mz na nb nc bi translated">如何将安全组附加到EC2实例</li><li id="fdb5" class="mu mv it js b jt nd jx ne kb nf kf ng kj nh kn mz na nb nc bi translated">学习了如何使用动态块来迭代变量列表</li><li id="b6ff" class="mu mv it js b jt nd jx ne kb nf kf ng kj nh kn mz na nb nc bi translated">如何从Terraform执行远程命令</li></ul></div></div>    
</body>
</html>