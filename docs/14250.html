<html>
<head>
<title>Data Driven Testing with Cypress</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Cypress进行数据驱动测试</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/data-driven-testing-with-cypress-cf4ac76ea8fc?source=collection_archive---------5-----------------------#2022-11-11">https://levelup.gitconnected.com/data-driven-testing-with-cypress-cf4ac76ea8fc?source=collection_archive---------5-----------------------#2022-11-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="cf3f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如何编写动态测试</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/0318541bdc283aebca1e2a07240f5a17.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*taH1cVz60cemKTuo"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">佩德罗·洛佩斯在<a class="ae le" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</figcaption></figure><p id="d6b6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">数据驱动测试，也称为参数化测试或动态测试，专注于预先定义不同测试用例的输入和输出数据。使用Cypress，您可以<a class="ae le" href="https://learn.cypress.io/advanced-cypress-concepts/using-data-to-build-dynamic-tests" rel="noopener ugc nofollow" target="_blank">基于您的测试数据集自动生成</a>您的测试用例。对我们来说幸运的是，这在Cypress非常容易实现。</p><h1 id="d771" class="lf lg it bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">我们来分解一下。</h1><p id="e065" class="pw-post-body-paragraph jq jr it js b jt md jv jw jx me jz ka kb mf kd ke kf mg kh ki kj mh kl km kn im bi translated">首先，我们需要定义我们想要测试的场景。然后，我们可以为不同的测试用例收集必要的输入数据，并指定预期的结果。</p><p id="adf1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们将把数据放在fixtures文件夹的JSON文件的数组中。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi mi"><img src="../Images/1d16cb4c8efde072e9309a38d1163e04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w6iPV7F9YSH9KLs1z8ktVQ.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">testdata.json</figcaption></figure><h1 id="0991" class="lf lg it bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">现在，我们将编写您的规范。</h1><p id="4c4e" class="pw-post-body-paragraph jq jr it js b jt md jv jw jx me jz ka kb mf kd ke kf mg kh ki kj mh kl km kn im bi translated">创建您的test.cy.js(或者。ts)文件。这里我们将编写一个测试用例。我通常带着快乐的心情开始写这篇文章。如果幸运的话，对于所有场景都足够了。但是有些场景会改变应用流程吗？别担心，我会掩护你的。稍后会详细介绍。</p><p id="d068" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">但是现在，我们需要确保spec使用带有测试数据的fixture文件。所以我们需要导入、声明和定义它。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi mj"><img src="../Images/fd19e866b228e77ff86cd3d4717e723e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ks0CY6ineTyf3yVb0QVtYA.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">导入夹具</figcaption></figure><p id="dd36" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在最酷的部分来了。</p><h1 id="1da9" class="lf lg it bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">我们将围绕测试编写一个forEach循环。</h1><p id="59b6" class="pw-post-body-paragraph jq jr it js b jt md jv jw jx me jz ka kb mf kd ke kf mg kh ki kj mh kl km kn im bi translated">我们将从夹具中迭代不同的数据集。这将导致多个测试用例的生成。</p><p id="5d84" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在，您可以开始添加动态变量，如下所示:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi mk"><img src="../Images/118cd69a861dfd90483038426360aafe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dGKvNR_rcJAxm4NtZjrVig.png"/></div></div></figure><p id="a236" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如前所述，某些输入变量可能会触发不同的应用程序行为，从而导致测试失败。例如，当我选择一个车辆变量并注入一辆汽车时，我可能需要填写一个牌照字段。但是对于一辆自行车，我不必。因此，最好根据导致不同行为的变量值创建一个条件语句:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ml"><img src="../Images/dc496a1722361a1ef7980c1d305e11c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8OEVkgawss-Juhd6O-3T4Q.png"/></div></div></figure><p id="a7c1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这听起来可能不像是Cypress的最佳实践，但是如果您不这样做，您的测试将会失败。另一个解决方案是为各种路径创建多个规格和装置。这是一个很好的选择，尤其是当一切变得太大太复杂的时候。但是当处理循环时，您不必管理重复的(测试)代码。因为您的测试数据存储在一个单独的文件中，这里也没有“代码”重复。这听起来很像我们在遵循面向对象的开发方法。</p><h1 id="89c2" class="lf lg it bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">我们来做测试。</h1><p id="029d" class="pw-post-body-paragraph jq jr it js b jt md jv jw jx me jz ka kb mf kd ke kf mg kh ki kj mh kl km kn im bi translated">测试的所有迭代都出现在Cypress中。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi mm"><img src="../Images/c2be630521792737ea186e4007b7c603.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-3hom4cRfW6nkSLxfPjGSw.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">固定测试描述</figcaption></figure><p id="f2d4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">但是正如您所看到的，您的测试并不是那么可读，因为所有的测试都有相同的名称。</p><p id="2a22" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">幸运的是，我们可以解决这个问题。我们将通过注入一个变量来改变测试的名称并使其动态化。如果您愿意，您可以为每个测试用例添加一个场景名称。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi mn"><img src="../Images/fd17a7d1d1f633b9833d1e46812f8972.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tBi7bJqVqecDM29MjCosgA.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">所有东西放在一起</figcaption></figure></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi mv"><img src="../Images/f504ed2ea5c188154b4bdc0ef739c734.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JPqczG_DCCuexMQY_2XqZQ.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">动态测试描述</figcaption></figure><h1 id="700d" class="lf lg it bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">现在您已经用Cypress创建了一个数据驱动的测试方法！🥳</h1></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h1 id="f941" class="lf lg it bd lh li mw lk ll lm mx lo lp lq my ls lt lu mz lw lx ly na ma mb mc bi translated">我们做了什么？</h1><p id="cf06" class="pw-post-body-paragraph jq jr it js b jt md jv jw jx me jz ka kb mf kd ke kf mg kh ki kj mh kl km kn im bi translated">我们总结一下:</p><ol class=""><li id="85a1" class="nb nc it js b jt ju jx jy kb nd kf ne kj nf kn ng nh ni nj bi translated">我们已经用Cypress fixture文件中的所有测试数据集创建了一个数组，</li><li id="655a" class="nb nc it js b jt nk jx nl kb nm kf nn kj no kn ng nh ni nj bi translated">我们已经编写了一个规范文件，</li><li id="62a6" class="nb nc it js b jt nk jx nl kb nm kf nn kj no kn ng nh ni nj bi translated">然后我们导入fixture并创建for-each循环来迭代它，</li><li id="cff6" class="nb nc it js b jt nk jx nl kb nm kf nn kj no kn ng nh ni nj bi translated">在这之后，我们在测试脚本中注入了动态变量，</li><li id="6aad" class="nb nc it js b jt nk jx nl kb nm kf nn kj no kn ng nh ni nj bi translated">此外，我们需要开发if循环，其中应用程序行为会因某些变量的特定值而改变。</li><li id="f834" class="nb nc it js b jt nk jx nl kb nm kf nn kj no kn ng nh ni nj bi translated">最后，我们通过在标题中注入变量，使测试用例的名称动态化。</li></ol><p id="2b19" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">因此，通过六个简单快捷的步骤，我们在Cypress中创建了一个参数化测试框架！</p></div><div class="ab cl mo mp hx mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="im in io ip iq"><h2 id="46dc" class="np lg it bd lh nq nr dn ll ns nt dp lp kb nu nv lt kf nw nx lx kj ny nz mb oa bi translated"><strong class="ak">快乐动态测试🙂</strong></h2></div></div>    
</body>
</html>