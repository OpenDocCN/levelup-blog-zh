<html>
<head>
<title>Introducing Nexus — a Component Tree Visualizer for Next.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Nexus简介——next . js的组件树可视化工具</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/introducing-nexus-a-component-tree-visualizer-for-next-js-1109f31e118e?source=collection_archive---------1-----------------------#2022-03-10">https://levelup.gitconnected.com/introducing-nexus-a-component-tree-visualizer-for-next-js-1109f31e118e?source=collection_archive---------1-----------------------#2022-03-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/72b707c3c32a7810d241359bd3ac42c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dXDqOGNV6AVrYZUHZsi9ng.png"/></div></div></figure><h1 id="ac29" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">介绍</h1><p id="1ad3" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">没多久我们就爱上了来自<a class="ae lu" href="https://vercel.com/" rel="noopener ugc nofollow" target="_blank"> Vercel </a>的<a class="ae lu" href="https://nextjs.org/" rel="noopener ugc nofollow" target="_blank"> Next.js </a>框架。</p><p id="6343" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">从其直观的基于目录的路由架构，到其与服务器端呈现功能挂钩的本机数据获取功能，再到其快速刷新功能(无需构建工具进行实时重新加载)，Next.js创建了一个真正集成且功能强大的开箱即用的全栈开发人员体验。</p><p id="6231" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">由于我们主要在React的前端工作，选择Next.js是轻而易举的，因为它本质上是库的包装器。</p><p id="ab85" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">在<a class="ae lu" href="https://vercel.com/" rel="noopener ugc nofollow" target="_blank"> Vercel </a>的团队已经做出了一个杰出的框架。(他们还开发了许多其他伟大的技术和尖端产品，所以如果你还没有，一定要去看看。)</p></div><div class="ab cl ma mb hu mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ij ik il im in"><h1 id="12ab" class="jy jz iq bd ka kb mh kd ke kf mi kh ki kj mj kl km kn mk kp kq kr ml kt ku kv bi translated">问题</h1><p id="5d12" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">在寻找专门针对Next.js开发人员的工具时，我们在寻找一个第三方VSCode扩展，该扩展围绕Next.js的独特功能构建，同时在功能上仍然尊重它是基于React库构建的这一事实。本质上，我们在寻找一个组件树可视化工具，它应该是React开发人员所熟悉的，但其结构类似于Next.js应用程序，同时给出有关数据获取的粒度信息。</p><p id="fd51" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">Next.js最大的优势之一是服务器端渲染能力；与“普通”的React应用相比，这一特性让开发人员能够更好地控制如何优化性能。然而，我们发现，如果没有对父/子层次结构中每个组件的呈现行为的高级理解，利用服务器端呈现的真正优化能力对实现和调试都是一个挑战。本质上，我们需要一个高层次的组件视图来查看属性是通过静态站点生成、服务器端渲染还是两者都不通过。</p><p id="7d4d" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">由于我们找不到像这样专门为Next.js设计的工具，<a class="ae lu" href="https://nexus-js.com/" rel="noopener ugc nofollow" target="_blank">我们决定把它做成</a>。</p><h1 id="9014" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">认识Nexus…</h1><figure class="mn mo mp mq gt jr gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/5581f7ae2369bf6df830d0ad8617b191.png" data-original-src="https://miro.medium.com/v2/resize:fit:1040/format:webp/1*9zCFyPtyCdJSH1pfUVTiQg.png"/></div></figure><p id="11fb" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">…为Next.js开发设计的灵活、轻量级VSCode扩展。</p><p id="f980" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">使用Nexus，您可以查看以树状结构表示的Next.js代码库，所有嵌套组件的相关数据获取信息就在您的指尖。此外，作为一个VSCode扩展，您可以在ide的侧边栏中快速识别服务器端呈现机会或瓶颈，从而提供流畅的调试体验。</p><h2 id="ea6b" class="mr jz iq bd ka ms mt dn ke mu mv dp ki lh mw mx km ll my mz kq lp na nb ku nc bi translated"><strong class="ak">如何使用</strong></h2><p id="0cce" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">一旦您从VSCode marketplace安装了扩展并打开了它，只需上传入口点脚本，您的前端组件树就会显示在侧栏中。</p><figure class="mn mo mp mq gt jr"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="c928" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">加载组件树后，通过单击展开图标展开任何组件以查看其子组件。您将知道组件是一个叶子，因为它没有展开图标。</p><figure class="mn mo mp mq gt jr"><div class="bz fp l di"><div class="nf ne l"/></div></figure><p id="19bb" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">将鼠标悬停在组件的信息图标上可以查看相应的属性和数据获取方法。</p><figure class="mn mo mp mq gt jr"><div class="bz fp l di"><div class="nf ne l"/></div></figure><h2 id="dd2d" class="mr jz iq bd ka ms mt dn ke mu mv dp ki lh mw mx km ll my mz kq lp na nb ku nc bi translated">主要特征</h2><ul class=""><li id="0e83" class="ng nh iq ky b kz la ld le lh ni ll nj lp nk lt nl nm nn no bi translated">快速组件树生成</li><li id="1282" class="ng nh iq ky b kz np ld nq lh nr ll ns lp nt lt nl nm nn no bi translated">基于Next.js代码库中页面目录架构的逻辑组件树层次结构</li><li id="df37" class="ng nh iq ky b kz np ld nq lh nr ll ns lp nt lt nl nm nn no bi translated">可在每个组件级别查看的属性和数据获取方法列表</li><li id="d2fe" class="ng nh iq ky b kz np ld nq lh nr ll ns lp nt lt nl nm nn no bi translated">悬停时以模式显示粒度信息，以获得简洁的用户界面</li><li id="6660" class="ng nh iq ky b kz np ld nq lh nr ll ns lp nt lt nl nm nn no bi translated">能够接受来自Windows、WSL环境或MacOS的条目文件</li></ul><p id="e5ea" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated"><strong class="ky ir">此外</strong>我们的扩展能够解析<strong class="ky ir">next . js代码库或“普通”React代码库</strong>——由你上传的文件决定——并显示相应的组件树。<em class="nu">打开扩展时的指令会根据代码库将你引导到合适的入口点文件。</em></p><h2 id="99e2" class="mr jz iq bd ka ms mt dn ke mu mv dp ki lh mw mx km ll my mz kq lp na nb ku nc bi translated">网络连接2.0</h2><p id="f339" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">Nexus目前处于第一版，我们有很多想法可以让它变得更好。这里列出了我们打算在下一个版本中实现的一些特性。</p><ul class=""><li id="81fa" class="ng nh iq ky b kz lv ld lw lh nv ll nw lp nx lt nl nm nn no bi translated">查看为动态路由构建的模板组件</li><li id="d7a4" class="ng nh iq ky b kz np ld nq lh nr ll ns lp nt lt nl nm nn no bi translated">悬停模式中的附加静态路径信息，用于查看组件是否正在呈现动态组件</li><li id="2a38" class="ng nh iq ky b kz np ld nq lh nr ll ns lp nt lt nl nm nn no bi translated">属性依赖于API调用的组件的数据依赖关系信息</li><li id="8bf5" class="ng nh iq ky b kz np ld nq lh nr ll ns lp nt lt nl nm nn no bi translated">单击树中的一个组件，打开一个webview，其中包含有关该组件及其依赖项的数据的更多详细信息</li><li id="8781" class="ng nh iq ky b kz np ld nq lh nr ll ns lp nt lt nl nm nn no bi translated">在组件树中渲染链接组件</li><li id="5315" class="ng nh iq ky b kz np ld nq lh nr ll ns lp nt lt nl nm nn no bi translated">状态栏图标和交互式功能</li><li id="c71d" class="ng nh iq ky b kz np ld nq lh nr ll ns lp nt lt nl nm nn no bi translated">检查前端的条目文件时出错</li></ul></div><div class="ab cl ma mb hu mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ij ik il im in"><h1 id="9f78" class="jy jz iq bd ka kb mh kd ke kf mi kh ki kj mj kl km kn mk kp kq kr ml kt ku kv bi translated">它是如何工作的</h1><p id="036f" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">当用户上传文件时，React中内置的前端使用VSCode API方法向webview发布消息，包括文件路径作为有效负载。</p><p id="85af" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">扩展“后端”在Provider中监听这个消息，这是编写VSCode扩展时的一个特殊类，然后创建我们的解析器类的一个新实例，用文件路径实例化它。</p><p id="e585" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">然后我们使用<a class="ae lu" href="https://www.npmjs.com/package/acorn" rel="noopener ugc nofollow" target="_blank"> acorn库</a>创建一个抽象语法树，解析器递归地遍历它，通过跟踪每个组件中的导入和返回语句生成相关的节点和数据。特别是，解析器通过查找getStaticProps和getServerSideProps方法来捕获数据获取信息。</p><p id="eb5f" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">解析器将嵌套数据发送给提供者，然后提供者使用VSCode API方法将另一条消息发送给webview，包括作为有效负载的解析数据。</p><p id="9be1" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">然后，webview前端使用解析的数据更新状态，并适当地递归呈现父组件或叶组件。</p><p id="af81" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">最后，当用户单击图标展开父组件的子组件时，我们用存储子组件的缓存来更新该组件的状态，从而呈现子组件。</p><figure class="mn mo mp mq gt jr"><div class="bz fp l di"><div class="ny ne l"/></div></figure><h1 id="8e2a" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">捐助</h1><p id="c901" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">如果您对该工具的潜力感到兴奋，我们欢迎您做出贡献！我们将此开发为一个开源项目，并邀请您参与其中，让Nexus变得更好。</p><p id="5d2f" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">只需前往我们的<a class="ae lu" href="https://github.com/oslabs-beta/Nexus" rel="noopener ugc nofollow" target="_blank"> Nexus Github repo </a>并查看自述文件的贡献步骤部分。</p></div><div class="ab cl ma mb hu mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ij ik il im in"><h2 id="02e7" class="mr jz iq bd ka ms mt dn ke mu mv dp ki lh mw mx km ll my mz kq lp na nb ku nc bi translated">VSCode扩展市场</h2><p id="10d9" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">你可以在<a class="ae lu" href="https://marketplace.visualstudio.com/items?itemName=Nexus-tree.nexus-extension" rel="noopener ugc nofollow" target="_blank"> Visual Studio市场</a>亲自试用Nexus。</p><h2 id="f3b3" class="mr jz iq bd ka ms mt dn ke mu mv dp ki lh mw mx km ll my mz kq lp na nb ku nc bi translated">Nexus团队</h2><p id="1c04" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">迈克·洪— <a class="ae lu" href="https://www.linkedin.com/in/mykongee/" rel="noopener ugc nofollow" target="_blank">领英</a> | <a class="ae lu" href="https://github.com/mykongee" rel="noopener ugc nofollow" target="_blank"> Github </a></p><p id="a0ae" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">Brian Chiang—<a class="ae lu" href="https://www.linkedin.com/in/brian-chiang-849a181a7/" rel="noopener ugc nofollow" target="_blank">LinkedIn</a>|<a class="ae lu" href="https://github.com/BChiang4" rel="noopener ugc nofollow" target="_blank">Github</a></p><p id="d782" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">李尚义—<a class="ae lu" href="https://www.linkedin.com/in/david-lee-39541411a/" rel="noopener ugc nofollow" target="_blank">LinkedIn</a>|<a class="ae lu" href="https://github.com/dplee123" rel="noopener ugc nofollow" target="_blank">Github</a></p><p id="5c3a" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">尼科·弗洛雷斯—<a class="ae lu" href="https://www.linkedin.com/in/nicolasaflores/" rel="noopener ugc nofollow" target="_blank">LinkedIn</a>|<a class="ae lu" href="https://github.com/nicoflrs" rel="noopener ugc nofollow" target="_blank">Github</a></p><p id="9c1b" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">亚历克斯·赫斯勒—<a class="ae lu" href="https://www.linkedin.com/in/alex-hersler/" rel="noopener ugc nofollow" target="_blank">LinkedIn</a>|<a class="ae lu" href="https://github.com/FoxEight" rel="noopener ugc nofollow" target="_blank">Github</a></p><h2 id="3895" class="mr jz iq bd ka ms mt dn ke mu mv dp ki lh mw mx km ll my mz kq lp na nb ku nc bi translated">网站(全球资讯网的主机站)</h2><p id="4593" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated"><a class="ae lu" href="https://nexus-js.com/" rel="noopener ugc nofollow" target="_blank">https://nexus-js.com/</a></p><h2 id="8aed" class="mr jz iq bd ka ms mt dn ke mu mv dp ki lh mw mx km ll my mz kq lp na nb ku nc bi translated">联系我们</h2><p id="be56" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">电子邮件:<a class="ae lu" href="mailto:nexusjsadm@gmail.com" rel="noopener ugc nofollow" target="_blank">nexusjsadm@gmail.com</a></p><p id="b574" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">推特:<a class="ae lu" href="https://twitter.com/teamnexus_js" rel="noopener ugc nofollow" target="_blank"> @teamnexus_js </a></p></div></div>    
</body>
</html>