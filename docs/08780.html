<html>
<head>
<title>Cleaning Your Go Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">清除您的Go代码</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/cleaning-your-go-code-863c6f995049?source=collection_archive---------2-----------------------#2021-06-04">https://levelup.gitconnected.com/cleaning-your-go-code-863c6f995049?source=collection_archive---------2-----------------------#2021-06-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/95585277b6ad3a821407f4da230ae4c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*MH0vvivZp-jBGZSm"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">卡里·谢伊在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="9b40" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">作为大学计算机科学课程的助教，一个永久的收获是可读的、地道的代码的价值。当你不得不仔细地一个接一个地审查许多相似的代码样本时，你不希望它们变得模糊不清。这一课让我在专业上受益匪浅，在关键的开发任务中发挥了作用，比如拉请求和维护代码。将代码从<em class="le">工作</em>升级到<em class="le">可读</em>(因此<em class="le">可维护)，</em>对你和你的雇主来说都是值得的。</p><h1 id="23ca" class="lf lg it bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">Golang的基础清洁产品</h1><p id="5c8f" class="pw-post-body-paragraph kg kh it ki b kj md kl km kn me kp kq kr mf kt ku kv mg kx ky kz mh lb lc ld im bi translated">Go提供了许多代码质量工具，这些工具可能已经直接集成到了您的编辑器或IDE中，但是无论我在哪里编写代码，我都习惯性地遵循以下步骤，以使代码清晰易读。</p><h2 id="885b" class="mi lg it bd lh mj mk dn ll ml mm dp lp kr mn mo lt kv mp mq lx kz mr ms mb mt bi translated">第一步:“开始fmt”</h2><p id="44f9" class="pw-post-body-paragraph kg kh it ki b kj md kl km kn me kp kq kr mf kt ku kv mg kx ky kz mh lb lc ld im bi translated">可读代码最基本的方面是格式化。对于Go，格式化<strong class="ki iu">是</strong>重要的，因为，虽然你可能不认为Go考虑缩进或空白，但它确实考虑了。在“.”之前加一个换行符<em class="le">或者在</em>之前的<em class="le">，布尔运算符和编译器会很快提醒你Go的编译器不关心。不管您的编辑器或IDE的格式化能力如何，处理简单格式化的最好方法是<a class="ae kf" href="https://golang.org/cmd/go/#hdr-Gofmt__reformat__package_sources" rel="noopener ugc nofollow" target="_blank"> fmt </a>，它包装了<a class="ae kf" href="https://golang.org/cmd/gofmt/" rel="noopener ugc nofollow" target="_blank"> gofmt </a>:</em></p><blockquote class="mu mv mw"><p id="4a88" class="kg kh le ki b kj kk kl km kn ko kp kq mx ks kt ku my kw kx ky mz la lb lc ld im bi translated">Gofmt格式化Go程序。它使用制表符缩进和空白对齐。对齐方式假设编辑器使用固定宽度的字体。</p></blockquote><p id="ee61" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要运行fmt，您只需提供想要格式化的包路径:</p><pre class="na nb nc nd gt ne nf ng nh aw ni bi"><span id="5a82" class="mi lg it nf b gy nj nk l nl nm">go fmt ./...</span></pre><p id="addb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这将为您重新格式化所有代码。</p><h2 id="0b18" class="mi lg it bd lh mj mk dn ll ml mm dp lp kr mn mo lt kv mp mq lx kz mr ms mb mt bi translated">第二步:“去兽医诊所”</h2><p id="ff90" class="pw-post-body-paragraph kg kh it ki b kj md kl km kn me kp kq kr mf kt ku kv mg kx ky kz mh lb lc ld im bi translated">一旦格式化就绪，我使用的下一个工具就是<a class="ae kf" href="https://golang.org/cmd/vet/" rel="noopener ugc nofollow" target="_blank"> vet </a>命令:</p><blockquote class="mu mv mw"><p id="61c9" class="kg kh le ki b kj kk kl km kn ko kp kq mx ks kt ku my kw kx ky mz la lb lc ld im bi translated">Vet检查Go源代码并报告可疑的构造，比如参数与格式字符串不一致的Printf调用。Vet使用试探法，不能保证所有的报告都是真正的问题，但是它可以发现编译器没有发现的错误。</p></blockquote><p id="b09e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">它是Go发行版的一部分，将检查您的代码并报告它发现的问题。要运行vet，像fmt一样，只需提供包路径:</p><pre class="na nb nc nd gt ne nf ng nh aw ni bi"><span id="b12c" class="mi lg it nf b gy nj nk l nl nm">go vet ./...</span></pre><p id="8870" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">与fmt不同，使用vet时，您必须完成工作，检查其输出并做出适当的更改。</p><h2 id="1ce4" class="mi lg it bd lh mj mk dn ll ml mm dp lp kr mn mo lt kv mp mq lx kz mr ms mb mt bi translated">第三步:“棉绒”</h2><p id="b795" class="pw-post-body-paragraph kg kh it ki b kj md kl km kn me kp kq kr mf kt ku kv mg kx ky kz mh lb lc ld im bi translated">最后，我使用了一个<a class="ae kf" href="https://en.wikipedia.org/wiki/Lint_(software)" rel="noopener ugc nofollow" target="_blank"> lint </a>程序，它将真正挑剔你的代码。有多种棉绒可供选择，但我目前的选择是<a class="ae kf" href="https://golangci-lint.run/usage/quick-start/" rel="noopener ugc nofollow" target="_blank"> golangci-lint </a>:</p><blockquote class="mu mv mw"><p id="f7f8" class="kg kh le ki b kj kk kl km kn ko kp kq mx ks kt ku my kw kx ky mz la lb lc ld im bi translated">golangci-lint是一个Go linters聚合器。<br/>非常快:并行运行linters，重用Go构建缓存并缓存分析结果。</p></blockquote><p id="e1b4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一旦安装了golangci-lint，就可以像运行前面的命令一样运行它:</p><pre class="na nb nc nd gt ne nf ng nh aw ni bi"><span id="9172" class="mi lg it nf b gy nj nk l nl nm">golangci-lint run ./...</span></pre><p id="b201" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这里，您也必须查看。输出并进行适当的更改。</p><h2 id="6bb6" class="mi lg it bd lh mj mk dn ll ml mm dp lp kr mn mo lt kv mp mq lx kz mr ms mb mt bi translated">摘要</h2><p id="8bcf" class="pw-post-body-paragraph kg kh it ki b kj md kl km kn me kp kq kr mf kt ku kv mg kx ky kz mh lb lc ld im bi translated">在运行<strong class="ki iu"> <em class="le">时，对我的代码进行三次</em> </strong>清理可能看起来过多，但这是值得的。我这样做是提交拉取请求前的最后一步。这样做，你的代码会尽可能的干净和可共享，在调整的过程中，你会提高你的编码技能。</p></div></div>    
</body>
</html>