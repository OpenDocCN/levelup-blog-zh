<html>
<head>
<title>A Pirate-y intro to Node, CLI apps, and Yargs!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">对节点、CLI应用程序和Yargs的海盗式介绍！</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/a-pirate-y-intro-to-node-cli-apps-and-yargs-4af9410f034d?source=collection_archive---------11-----------------------#2020-03-27">https://levelup.gitconnected.com/a-pirate-y-intro-to-node-cli-apps-and-yargs-4af9410f034d?source=collection_archive---------11-----------------------#2020-03-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="a13b" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">真相会大白的！</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/6e0cd4fa8a8c52390f26bf6e23ad13ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Lb0W_sC8mSX6G_sl0KvWOQ.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">这是一个海盗式的博客帖子，你们这些肮脏的渣滓。</figcaption></figure><p id="207f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">有很多方法可以度过一场病毒灾难:冷静思考，自愿为邻居买杂货，<a class="ae lu" href="https://www.redcross.org/" rel="noopener ugc nofollow" target="_blank">献血帮助爆发的病人</a>，开发一个命令行Node.js应用程序…</p><p id="0a10" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">等等，其中一个和其他的不一样。</p><p id="0017" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是没关系！</p><p id="df8c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我最近开始学习<a class="ae lu" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank"> Node.js </a>，JavaScript的后端语言。JavaScript最初是作为一种与浏览器交互的方式开始的，用来操作“DOM”(用户在浏览器窗口中看到的所有东西)，而不必刷新和创建有趣的交互页面。它是“互联网三大语言”之一，其他两个是HTML和CSS，JavaScript可以与这两种语言进行交互。</p><p id="9e7d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">问题是直到最近，JS还做不了别的事情。这是一种半语言，在互联网上导致了很多仇恨，也许这是理所当然的(<a class="ae lu" href="https://www.destroyallsoftware.com/talks/wat" rel="noopener ugc nofollow" target="_blank">见上下文</a>)。</p><p id="7de8" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是，我们一直在使用互联网，JavaScript不仅允许我们创建动态网站，还允许我们以编程方式生成HTML元素，而不必重新键入大量代码，并支持与Python、Ruby和Java等其他后端编程语言进行通信。</p><p id="b5fc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这使得杰夫·阿特伍德，一个非常受欢迎的科技网站Stack Overflow的创始人之一，在2007年引用了一句话，后来被认为是阿特伍德定律。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lv"><img src="../Images/7d92673c73480d5ed8456654f0c94d7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*-DUPk-v_5HXC3voW.jpg"/></div></div></figure><p id="a6e6" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">事实上，早在几年前，OpenJS基金会就已经给出了解决问题的答案，即通过编写他们自己的代码:<a class="ae lu" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank"> Node.js. </a></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi lw"><img src="../Images/796a706396ae8febcf61af479631201c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1318/format:webp/1*Nh1yXMU4tRr-JW5w04mV-g.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">谁颂</figcaption></figure><p id="8cb2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在某种程度上，这很有意义。由于JavaScript经常用于从“后端”或“服务器”获取数据，并且JavaScript和其他应用程序之间的通信经常使用JSON来完成，JSON是“JavaScript Object Notation”的缩写，对于JavaScript来说，最简单、错误最少、最一致的后端-前端通信形式难道不是……更多的JavaScript吗？</p><p id="02b4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是WHT，如果我告诉你这一切都是谎言。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lx"><img src="../Images/daf5f8f916644ca5d9c2bfeb2c29bc37.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*37UQnXbAgWt8JpVOIi7stg.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">看看那马力！</figcaption></figure><p id="4c24" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果你看了上面Node的介绍图片，你会看到它实现了<a class="ae lu" href="https://v8.dev/" rel="noopener ugc nofollow" target="_blank"> Google/Chrome的V8“引擎”</a>。这实际上是使用任何Chrome或<a class="ae lu" href="https://www.chromium.org/" rel="noopener ugc nofollow" target="_blank">Chrome项目浏览器</a>时使用的相同实现！所以当你打开Chrome时，Node有点像交互式开发工具！在WASM(WebAssembly)上还有一个非常酷的部分，非常令人兴奋，让我们可以更快地在网上进行“昂贵的计算”,我建议你去看看，但那是另一篇文章的内容了。</p><p id="22e4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是你看！是用C++写的！</p><p id="6ecf" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">是的，这是真的，朋友们。Node.js只是JavaScript告诉<a class="ae lu" href="http://cplusplus.com" rel="noopener ugc nofollow" target="_blank">老派编程语言C++ </a>，通过编写的JavaScript和V8引擎，做一些计算，然后插值返回给我们。我们在作弊。一切都是谎言。没有圣诞老人。特朗普喷雾晒黑，严重。</p><p id="417b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">也就是说，让我们使用它。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ly"><img src="../Images/19c69439d1b51041eba5feec51e34595.png" data-original-src="https://miro.medium.com/v2/resize:fit:1292/format:webp/1*eyK3QY6b9JqthHblyWNjGg.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">有一些要求。</figcaption></figure><p id="4ae8" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这是我的Node app的顶部！类似于我们这些使用过<a class="ae lu" href="https://reactjs.org/" rel="noopener ugc nofollow" target="_blank"> React </a>的人，我们导入他人有用代码的“模块”的方式是使用节点语法:</p><pre class="kj kk kl km gt lz ma mb mc aw md bi"><span id="72a0" class="me mf it ma b gy mg mh l mi mj">const someModule = require('someModule')</span></pre><p id="d10f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这与React语法非常相似:</p><pre class="kj kk kl km gt lz ma mb mc aw md bi"><span id="38e7" class="me mf it ma b gy mg mh l mi mj">import React from 'react'</span></pre><p id="29a0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">事实上，两者都使用相同的语法将这些模块添加到他们的应用程序和“package.json”文件中，即:</p><pre class="kj kk kl km gt lz ma mb mc aw md bi"><span id="218c" class="me mf it ma b gy mg mh l mi mj">npm install some-module</span></pre><p id="dbe8" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">也就是“节点包管理器”或NPM。</p><p id="606f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">总之，这里我们正在安装<a class="ae lu" href="https://www.npmjs.com/package/yargs" rel="noopener ugc nofollow" target="_blank">【yargs】</a>，这是一个盗版的NPM包，允许NodeJs的命令行参数。</p><pre class="kj kk kl km gt lz ma mb mc aw md bi"><span id="c0e5" class="me mf it ma b gy mg mh l mi mj">const<em class="mk"> fs </em>=<em class="mk"> require</em>("fs")</span><span id="208a" class="me mf it ma b gy ml mh l mi mj">const<em class="mk"> chalk </em>=<em class="mk"> require</em>('chalk')</span><span id="9edd" class="me mf it ma b gy ml mh l mi mj">const<em class="mk"> </em>{<em class="mk"> log </em>}<em class="mk"> </em>=<em class="mk"> console</em></span><span id="24e6" class="me mf it ma b gy ml mh l mi mj">const<em class="mk"> addNote </em>=<em class="mk"> </em>(<em class="mk">title</em>,<em class="mk"> body</em>)<em class="mk"> </em>=&gt;<em class="mk"> </em>{</span><span id="48e1" class="me mf it ma b gy ml mh l mi mj">const<em class="mk"> notes </em>=<em class="mk"> loadNotes</em>()</span><span id="1a86" class="me mf it ma b gy ml mh l mi mj">if(!<em class="mk">notes.find</em>(<em class="mk">note </em>=&gt;<em class="mk"> note.title </em>===<em class="mk"> </em>title)){</span><span id="bb24" class="me mf it ma b gy ml mh l mi mj"><em class="mk">notes.push</em>({title,<em class="mk"> </em>body})</span><span id="3344" class="me mf it ma b gy ml mh l mi mj"><em class="mk">saveNotes</em>(notes)</span><span id="d90f" class="me mf it ma b gy ml mh l mi mj"><em class="mk">console.log</em>(<em class="mk">chalk.green.inverse</em>("New Note "<em class="mk"> </em>+<em class="mk"> </em>title<em class="mk"> </em>+<em class="mk"> </em>" added."))</span><span id="3c52" class="me mf it ma b gy ml mh l mi mj">}<em class="mk"> </em>else<em class="mk"> </em>{</span><span id="735a" class="me mf it ma b gy ml mh l mi mj"><em class="mk">console.log</em>(<em class="mk">chalk.red.inverse</em>(`<em class="mk">Sorry there is already a note called </em>${title}<em class="mk">, please try a different title.</em>`))</span><span id="e4b9" class="me mf it ma b gy ml mh l mi mj">}</span><span id="10e3" class="me mf it ma b gy ml mh l mi mj">}</span></pre><p id="1e35" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这里我有一个看起来很普通的JavaScript函数，为带有一些节点功能的命令行“Notes App”创建一个“Notes”。FS是一个节点模块，允许我与我的计算机的文件系统进行交互(这是JS在Node之前无法做到的！)而Chalk是一个很傻的模块，可以让你在控制台中给东西上色，这对错误消息和样式很有帮助。</p><p id="e09d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们有一些对其他函数的调用，我们不用担心，还有一些“console.log ”(这也是一个C++函数！一切都是谎言！)但最大的问题是，我们将从哪里获得添加注释的参数？</p><p id="0b1f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在传统的JS中，这可能会连接到浏览器中的一个表单，但这是一个命令行应用程序，所以伙计们，我们将不得不擦洗甲板并获得一些YARGS！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mm"><img src="../Images/3fd452cde7dfcc8e79881d25b37d3fc2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fYAXxqohs1aXMqpBcMY0aQ.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">雅格，我的鹦鹉在哪里？</figcaption></figure><p id="ec99" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">正如你从上图中看到的，我们导入了一个名为“Yargs”的模块，使用了我们见过的相同模式，我们甚至从我们自己编写的另一个文件中导入了使用<a class="ae lu" href="https://hacks.mozilla.org/2015/05/es6-in-depth-destructuring/" rel="noopener ugc nofollow" target="_blank">ES6 Object destructing</a>的函数！与React非常相似，Node如此强大的一个原因是它允许我们编写自己的模块，这些模块可以与他人的代码配对，以获得最大的简洁性和可重用性。</p><p id="092f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们也在使用一些东西。名为“command ”,它允许我们为名为“body”和“title”的变量描述一个JavaScript对象，然后由名为“handler”的“对象方法”执行，这就像Ruby/Python中的类方法——除此之外，对象方法是JS中的类方法，因为JS中的所有东西都是对象，所有这一切都利用了名为“原型”的东西，是“语法糖”,没有什么是真实的，政府给你的水添加了化学物质，好吧，回到它——</p><p id="4ce2" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">反正可以看到我们的标题和正文可能和前面看的函数一样有辨识度！</p><p id="0350" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">那么这在执行中看起来如何呢？</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mn"><img src="../Images/48cca603eb6c9720bd9eeea143542daf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TGEv-2wxB5_3yLbHdXxDLg.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">达特鲁夫</figcaption></figure><p id="bb96" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">让我们来分解一下:</p><ol class=""><li id="c8c8" class="mo mp it la b lb lc le lf lh mq ll mr lp ms lt mt mu mv mw bi translated">我有“Node”命令，后跟允许我运行该文件的文件名，就像在他们的一个文件后面键入“python”或“ruby”。</li><li id="932b" class="mo mp it la b lb mx le my lh mz ll na lp nb lt mt mu mv mw bi translated">我有命令“添加”,它对应于前面图片中“Yargs.command”的“command”键。</li><li id="23ea" class="mo mp it la b lb mx le my lh mz ll na lp nb lt mt mu mv mw bi translated">最后，我有两个参数，分别由“flags”或“—”语法、标题和正文表示，它们表示我希望将什么传递到我定义的Yargs命令的“handler”中。</li></ol><p id="1397" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们看到消息是从我们的函数返回的！</p><pre class="kj kk kl km gt lz ma mb mc aw md bi"><span id="e930" class="me mf it ma b gy mg mh l mi mj"><em class="mk">console.log</em>(<em class="mk">chalk.green.inverse</em>("New Note "<em class="mk"> </em>+<em class="mk"> </em>title<em class="mk"> </em>+<em class="mk"> </em>" added."))</span></pre><p id="267f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们可以看到，我们的标题参数已经通过我们的日志传递和保存。</p><p id="7a89" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我们心里清楚，C++为我们做了肮脏的工作…</p></div><div class="ab cl nc nd hx ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="im in io ip iq"><p id="f211" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">无论如何，这是一篇关于Node的更深入的文章，但关于Yargs的深度比我想象的要低一些，但公平地说，Yargs和Node本身是如此深入的主题，有很多值得探索的地方。</p><p id="2e00" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在这个充斥着错误信息和恐惧的时代，有许多真相有待发现，缺少了大卫·杜楚尼，我们就是我们自己X档案的代理人。</p><p id="bc02" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">真相就在那里，真相就是德国牧羊犬斯特拉。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nj"><img src="../Images/e368d5cfc3fcff427619622ce78e80cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XI-axSdPkDK1HBP-tGaQ7Q.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">斯特拉。</figcaption></figure><p id="6380" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">她的耳朵和鼻子一样长，她的小粗腿是为跳跃和跳跃而生的，可以舔和拥抱人类的脸。</p><p id="5b59" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">你在外面，斯特拉。</p><p id="2b39" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">再见了，</p><p id="fc19" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">网络信息中心(Network Information Center)ˌ网路界面卡(Network Interface Card)ˌ全国工业理事会(National Industrial Council)ˌ航行情报中心(Navigation Information Center)</p></div></div>    
</body>
</html>