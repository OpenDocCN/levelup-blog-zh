<html>
<head>
<title>Set up Jest in your Monorepo in 5 minutes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">5分钟后在你的Monorepo中设置Jest</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/set-up-jest-in-your-monorepo-in-5-minutes-ea0604760625?source=collection_archive---------1-----------------------#2022-10-24">https://levelup.gitconnected.com/set-up-jest-in-your-monorepo-in-5-minutes-ea0604760625?source=collection_archive---------1-----------------------#2022-10-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/f1265ca52d13dab8c5a6ada33a5aab7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*i-fz2L0IW3Tb2s6F.png"/></div></div></figure><h1 id="8bd3" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">介绍</h1><p id="5fb0" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">Jest是一个令人愉快的JavaScript测试框架，专注于简单性。你可以在任何JavaScript上使用Jest，比如React、Angular、Node、TypeScript…</p><p id="6ae6" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">我有一个关于为你的项目<a class="ae lz" href="https://duckylele.medium.com/set-up-jest-for-your-typescript-projects-in-under-5-minutes-a2bf0676f912" rel="noopener">设置Jest的教程</a></p><p id="e34c" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">Monorepo或Monorepository是一种代码管理和架构概念，其中您将所有代码保存在一个超级存储库中，而不是管理多个较小的存储库，就像您的网站和库的单个存储库一样</p><p id="07e7" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">我也有一个关于如何用NX right <a class="ae lz" href="https://duckylele.medium.com/create-a-package-based-monorepo-with-nx-ce4476b08139" rel="noopener">创建基于包的Monorepo的教程</a></p><h1 id="dd1b" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">设置笑话</h1><p id="a72d" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">这篇文章将是一个关于如何为你的Monorepo设置Jest的教程，从在你的根文件夹中安装Jest和TS-jest开始:</p><pre class="ma mb mc md gt me mf mg mh aw mi bi"><span id="4dbd" class="mj jz iq mf b gy mk ml l mm mn">yarn add jest @types/jest ts-jest</span></pre><h1 id="92a6" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">配置笑话</h1><p id="e85a" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">安装完所有依赖项后，我们用支持的typescript初始化jest配置文件:</p><pre class="ma mb mc md gt me mf mg mh aw mi bi"><span id="d281" class="mj jz iq mf b gy mk ml l mm mn">yarn ts-jest config:init</span></pre><p id="9d15" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">将创建<code class="fe mo mp mq mf b">jest.config.js</code>文件。我们将在这里完成所有配置，但首先，让我们看看我的产品包:</p><figure class="ma mb mc md gt jr gh gi paragraph-image"><div class="gh gi mr"><img src="../Images/7419613fe9a4ac2b5105ecc29bd559d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:462/format:webp/1*fEKt6QHtqmXHFLb4R2l5Kg.png"/></div></figure><p id="457c" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">我有两个包:<code class="fe mo mp mq mf b">common-ui</code>和<code class="fe mo mp mq mf b">web</code>，这里是<code class="fe mo mp mq mf b">jest.config.js</code></p><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ms"><img src="../Images/bfb1dd596cdb193b6096dbb58031892c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1232/format:webp/1*OQ0FL4PUIMJMBqUns__O1g.png"/></div></div></figure><p id="2860" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">我将从上到下:</p><ul class=""><li id="5d2e" class="mt mu iq ky b kz lu ld lv lh mv ll mw lp mx lt my mz na nb bi translated"><code class="fe mo mp mq mf b">preset</code>:显然是<code class="fe mo mp mq mf b">ts-jest</code></li><li id="fa98" class="mt mu iq ky b kz nc ld nd lh ne ll nf lp ng lt my mz na nb bi translated"><code class="fe mo mp mq mf b">testEnvironment</code>:我们将使用<code class="fe mo mp mq mf b">jsdom</code>，这样我们就可以在测试中使用<code class="fe mo mp mq mf b">document</code>方法</li><li id="af2b" class="mt mu iq ky b kz nc ld nd lh ne ll nf lp ng lt my mz na nb bi translated"><code class="fe mo mp mq mf b">rootDir</code>:由于这是一个monorepo，为了可读性，我们可能需要一个<code class="fe mo mp mq mf b">rootDir</code>常量</li><li id="4dd5" class="mt mu iq ky b kz nc ld nd lh ne ll nf lp ng lt my mz na nb bi translated"><code class="fe mo mp mq mf b">coverageDirectory</code>:我们想要放代码覆盖率报告的文件夹</li><li id="b396" class="mt mu iq ky b kz nc ld nd lh ne ll nf lp ng lt my mz na nb bi translated"><code class="fe mo mp mq mf b">collectCoverageFrom</code>:如您所见，我只想收集<code class="fe mo mp mq mf b">.ts</code>文件，排除<code class="fe mo mp mq mf b">constant.ts</code>和<code class="fe mo mp mq mf b">index.ts</code>(您可以根据需要轻松定制)</li><li id="d7c8" class="mt mu iq ky b kz nc ld nd lh ne ll nf lp ng lt my mz na nb bi translated">这是最重要的部分，我们将为我们的每个包专门设置一个Jest。</li><li id="46c0" class="mt mu iq ky b kz nc ld nd lh ne ll nf lp ng lt my mz na nb bi translated"><code class="fe mo mp mq mf b">testMatch</code>:我们将测试与其对应的<code class="fe mo mp mq mf b">.spec.ts</code>进行匹配，以正确收集其覆盖范围。</li></ul><h1 id="53de" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">运行测试</h1><p id="cd37" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">我们可以用<code class="fe mo mp mq mf b">yarn jest</code>在根文件夹中运行Jest</p><h1 id="703d" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">结论</h1><p id="f114" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">这是一个关于如何用我的<code class="fe mo mp mq mf b">jest.config.js</code>示例为你的Monorepo配置Jest的简单教程。只是根据你的monorepo和喜好来配置Jest</p><h1 id="e316" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">遗言</h1><p id="caab" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">虽然我的内容对每个人都是免费的，但是如果你觉得这篇文章有帮助，<a class="ae lz" href="https://www.buymeacoffee.com/kylele19" rel="noopener ugc nofollow" target="_blank">你可以在这里给我买一杯咖啡</a></p></div><div class="ab cl nh ni hu nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="ij ik il im in"><h1 id="30d7" class="jy jz iq bd ka kb no kd ke kf np kh ki kj nq kl km kn nr kp kq kr ns kt ku kv bi translated">分级编码</h1><p id="371e" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">感谢您成为我们社区的一员！在你离开之前:</p><ul class=""><li id="8d30" class="mt mu iq ky b kz lu ld lv lh mv ll mw lp mx lt my mz na nb bi translated">👏为故事鼓掌，跟着作者走👉</li><li id="4ab5" class="mt mu iq ky b kz nc ld nd lh ne ll nf lp ng lt my mz na nb bi translated">📰更多内容请查看<a class="ae lz" href="https://levelup.gitconnected.com/?utm_source=pub&amp;utm_medium=post" rel="noopener ugc nofollow" target="_blank">升级编码刊物</a></li><li id="05bf" class="mt mu iq ky b kz nc ld nd lh ne ll nf lp ng lt my mz na nb bi translated">🔔关注我们:<a class="ae lz" href="https://twitter.com/gitconnected" rel="noopener ugc nofollow" target="_blank">推特</a> | <a class="ae lz" href="https://www.linkedin.com/company/gitconnected" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a> | <a class="ae lz" href="https://newsletter.levelup.dev" rel="noopener ugc nofollow" target="_blank">时事通讯</a></li></ul><p id="22ed" class="pw-post-body-paragraph kw kx iq ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">🚀👉<a class="ae lz" href="https://jobs.levelup.dev/talent/welcome?referral=true" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir">加入升级人才集体，找到一份神奇的工作</strong> </a></p></div></div>    
</body>
</html>