<html>
<head>
<title>DOM Manipulation — Node Geometry and Styles</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">DOM操作—节点几何图形和样式</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/dom-manipulation-node-geometry-and-styles-a41199036072?source=collection_archive---------19-----------------------#2020-06-15">https://levelup.gitconnected.com/dom-manipulation-node-geometry-and-styles-a41199036072?source=collection_archive---------19-----------------------#2020-06-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/61f92a6956b78df504d975e28fe06394.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*DK_OnLNnCytpxWTQ"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">照片由<a class="ae kf" href="https://unsplash.com/@niko_photos?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> niko photos </a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="4f35" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">JavaScript是世界上最流行的编程语言之一。为了有效地使用它，我们必须了解它的基本知识。</p><p id="c189" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本文中，我们将研究如何获得节点的各种维度和样式。</p><h1 id="7ef0" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">获取元素offsetTop和offsetLeft值</h1><p id="e9a2" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated"><code class="fe mh mi mj mk b">offsetTop</code>和<code class="fe mh mi mj mk b">offsetLeft</code>从<code class="fe mh mi mj mk b">offsetParent</code>中获取一个元素节点的像素值。</p><p id="d4ae" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">元素节点属性给出了从左上边框之外和<code class="fe mh mi mj mk b">offserParent</code>左上边框之内的元素的像素距离。</p><p id="55f2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">offsetParent</code>是通过搜索具有非静态CSS位置的最近祖先来确定的。</p><p id="314e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果没有找到，则<code class="fe mh mi mj mk b">body</code>位置用于<code class="fe mh mi mj mk b">offsetParent</code>的值。</p><p id="be60" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，如果我们在主体中有一个div:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="82fa" class="mt lf it mk b gy mu mv l mw mx">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;</span><span id="8142" class="mt lf it mk b gy my mv l mw mx">  &lt;head&gt;</span><span id="c171" class="mt lf it mk b gy my mv l mw mx">  &lt;/head&gt;</span><span id="16f2" class="mt lf it mk b gy my mv l mw mx">  &lt;body&gt;<br/>    &lt;div&gt;&lt;/div&gt;<br/>  &lt;/body&gt;</span><span id="b802" class="mt lf it mk b gy my mv l mw mx">&lt;/html&gt;</span></pre><p id="112f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们可以用下面的方法得到div的位置:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="10d9" class="mt lf it mk b gy mu mv l mw mx">const div = document.querySelector('div');</span><span id="ef98" class="mt lf it mk b gy my mv l mw mx">console.log(div.offsetLeft);<br/>console.log(div.offsetTop); <br/>console.log(div.offsetParent);</span></pre><p id="f7b3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们为<code class="fe mh mi mj mk b">offsetparent</code>获取<code class="fe mh mi mj mk b">body</code>，为其他属性获取数字。</p><h1 id="0694" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">获取元素的上、右、下和左边框边缘</h1><p id="c8f0" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated"><code class="fe mh mi mj mk b">getBoundingClientRect()</code>方法获取一个元素的外部边界边缘相对于视窗顶部和左侧边缘的位置。</p><p id="2599" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，如果我们有:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="0e41" class="mt lf it mk b gy mu mv l mw mx">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;</span><span id="b906" class="mt lf it mk b gy my mv l mw mx">&lt;head&gt;</span><span id="2a3d" class="mt lf it mk b gy my mv l mw mx">&lt;/head&gt;</span><span id="b884" class="mt lf it mk b gy my mv l mw mx">&lt;body&gt;<br/>    &lt;div&gt;&lt;/div&gt;<br/>  &lt;/body&gt;</span><span id="f668" class="mt lf it mk b gy my mv l mw mx">&lt;/html&gt;</span></pre><p id="f658" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们写道:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="e982" class="mt lf it mk b gy mu mv l mw mx">const rect= document.querySelector('div').getBoundingClientRect();</span><span id="a747" class="mt lf it mk b gy my mv l mw mx">console.log(rect);</span></pre><p id="b38f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们得到<code class="fe mh mi mj mk b">top</code>、<code class="fe mh mi mj mk b">left</code>、<code class="fe mh mi mj mk b">right</code>和<code class="fe mh mi mj mk b">bottom</code>属性，其尺寸以像素为单位，相对于视口。</p><h1 id="8e08" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">获取视口中元素的大小</h1><p id="5f57" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated"><code class="fe mh mi mj mk b">getBoundingClientRect()</code>方法也返回<code class="fe mh mi mj mk b">height</code>和<code class="fe mh mi mj mk b">width</code>属性。</p><p id="8134" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，如果我们有:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="d70a" class="mt lf it mk b gy mu mv l mw mx">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;</span><span id="f369" class="mt lf it mk b gy my mv l mw mx">  &lt;head&gt;</span><span id="5685" class="mt lf it mk b gy my mv l mw mx">  &lt;/head&gt;</span><span id="9279" class="mt lf it mk b gy my mv l mw mx">  &lt;body&gt;<br/>    &lt;div&gt;&lt;/div&gt;<br/>  &lt;/body&gt;</span><span id="b330" class="mt lf it mk b gy my mv l mw mx">&lt;/html&gt;</span></pre><p id="3f0d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们写道:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="80b8" class="mt lf it mk b gy mu mv l mw mx">const rect = document.querySelector('div').getBoundingClientRect();</span><span id="c93e" class="mt lf it mk b gy my mv l mw mx">console.log(rect);</span></pre><p id="75f4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们得到的<code class="fe mh mi mj mk b">height</code>和<code class="fe mh mi mj mk b">width</code>属性的总高度和宽度包括填充和边框。</p><h1 id="df8e" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">获取不包括边框的视口中元素的大小</h1><p id="199a" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated"><code class="fe mh mi mj mk b">clientHeight</code>和<code class="fe mh mi mj mk b">clientWidth</code>具有不包括边框的元素尺寸。</p><p id="1b15" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">但是包括填充和内容。</p><p id="b206" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果我们有:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="a7ed" class="mt lf it mk b gy mu mv l mw mx">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;</span><span id="9b82" class="mt lf it mk b gy my mv l mw mx">  &lt;head&gt;</span><span id="dbfb" class="mt lf it mk b gy my mv l mw mx">  &lt;/head&gt;</span><span id="00b6" class="mt lf it mk b gy my mv l mw mx">  &lt;body&gt;<br/>    &lt;div&gt;&lt;/div&gt;<br/>  &lt;/body&gt;</span><span id="349c" class="mt lf it mk b gy my mv l mw mx">&lt;/html&gt;</span></pre><p id="67cb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="c58e" class="mt lf it mk b gy mu mv l mw mx">const div = document.querySelector('div');</span><span id="de73" class="mt lf it mk b gy my mv l mw mx">console.log(div.clientHeight, div.clientWidth)</span></pre><h1 id="0a2e" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">获取视口中特定点的最顶端元素</h1><p id="121a" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">获取对HTML文档中特定位置的最顶层元素的引用。</p><p id="cac8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，如果我们有:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="56b1" class="mt lf it mk b gy mu mv l mw mx">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;</span><span id="f3d9" class="mt lf it mk b gy my mv l mw mx">  &lt;head&gt;</span><span id="d5bc" class="mt lf it mk b gy my mv l mw mx">  &lt;/head&gt;</span><span id="da90" class="mt lf it mk b gy my mv l mw mx">  &lt;body&gt;<br/>    &lt;div&gt;&lt;/div&gt;<br/>  &lt;/body&gt;</span><span id="5a30" class="mt lf it mk b gy my mv l mw mx">&lt;/html&gt;</span></pre><p id="44d4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们可以通过写来使用它:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="23a6" class="mt lf it mk b gy mu mv l mw mx">console.log(document.elementFromPoint(10, 12));</span></pre><p id="10c9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们得到了<code class="fe mh mi mj mk b">html</code>元素。</p><h1 id="082b" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">使用scrollHeight和scrollWidth获取被滚动元素的大小</h1><p id="f770" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated"><code class="fe mh mi mj mk b">scrollHeight</code>和<code class="fe mh mi mj mk b">scrolLWidtgh</code>给出了被滚动节点的高度和宽度。</p><p id="e78f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，如果我们有一个滚动<code class="fe mh mi mj mk b">html</code>元素的HTML，那么我们得到被滚动的<code class="fe mh mi mj mk b">html</code>元素的大小。</p><p id="a37f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果我们有:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="4cd3" class="mt lf it mk b gy mu mv l mw mx">&lt;p&gt;</span><span id="38b1" class="mt lf it mk b gy my mv l mw mx">&lt;/p&gt;</span></pre><p id="89b5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">并且:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="bd3e" class="mt lf it mk b gy mu mv l mw mx">p {<br/>  height: 1000px;<br/>  width: 1000px;<br/>  background-color: green;<br/>}</span></pre><p id="17d2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后，我们通过写入获得正在滚动的p元素的宽度:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="4e3f" class="mt lf it mk b gy mu mv l mw mx">const p = document.querySelector('p');</span><span id="3587" class="mt lf it mk b gy my mv l mw mx">console.log(p.scrollHeight, p.scrollWidth);</span></pre><p id="f22d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">每处房产我们得到1000英镑。</p><h1 id="c58b" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">获取和设置从顶部和左侧滚动的像素</h1><p id="95a1" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated"><code class="fe mh mi mj mk b">scrollTop</code>和<code class="fe mh mi mj mk b">scrollLeft</code>是读写属性，返回由于滚动而当前在可滚动视区中不可见的左侧或顶部的像素。</p><p id="e366" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，如果我们有:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="6ead" class="mt lf it mk b gy mu mv l mw mx">&lt;p&gt;</span><span id="8404" class="mt lf it mk b gy my mv l mw mx">&lt;/p&gt;</span></pre><p id="5d39" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">并且:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="0ca6" class="mt lf it mk b gy mu mv l mw mx">p {<br/>  height: 1000px;<br/>  width: 1000px;<br/>  background-color: green;<br/>}</span></pre><p id="d733" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后，我们可以通过编写以下内容来设置它们:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="9035" class="mt lf it mk b gy mu mv l mw mx">const p = document.querySelector('p');<br/>p.scrollTop = 750;<br/>p.scrollLeft = 750;</span></pre><p id="f682" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后，当我们记录这些值时，我们应该会看到它们。</p><h1 id="7ec9" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">将元素滚动到视图中</h1><p id="d35b" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以调用<code class="fe mh mi mj mk b">scrollIntoView</code>方法将一个条目滚动到视图中。</p><p id="0cda" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，如果我们有:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="00b5" class="mt lf it mk b gy mu mv l mw mx">for (let i = 0; i &lt; 50; i++) {<br/>  const p = document.createElement('p');<br/>  p.innerText = i;<br/>  document.body.appendChild(p);<br/>}</span></pre><p id="3bcf" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了生成50个p元素并将它们附加到正文，我们将第41个元素滚动到视图中，方法是:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="b636" class="mt lf it mk b gy mu mv l mw mx">document.querySelectorAll('p')[40].scrollIntoView(true);</span></pre><figure class="ml mm mn mo gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mz"><img src="../Images/1e74a9bc10c3860d7af382481940791c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*9YLSxfCY_93GUs7E"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">菲尔·古德温在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><h1 id="6394" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">样式属性</h1><p id="b5d6" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">DOM节点对象有<code class="fe mh mi mj mk b">style</code>属性，用于样式化我们选择的元素。</p><p id="54de" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">它还返回元素的样式。</p><p id="09f0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，如果我们有:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="706c" class="mt lf it mk b gy mu mv l mw mx">&lt;div&gt;</span><span id="36b6" class="mt lf it mk b gy my mv l mw mx">&lt;/div&gt;</span></pre><p id="ca6d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们可以通过书写得到样式:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="1956" class="mt lf it mk b gy mu mv l mw mx">const styles = document.querySelector('div').style;</span></pre><p id="de49" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后<code class="fe mh mi mj mk b">styles</code>会有所有款式。</p><h1 id="e491" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">结论</h1><p id="2477" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以用DOM对象的不同属性得到不同的维度，</p><p id="3bed" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要获取样式，我们可以使用<code class="fe mh mi mj mk b">style</code>属性。</p></div></div>    
</body>
</html>