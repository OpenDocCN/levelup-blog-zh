<html>
<head>
<title>Setup RESTful API with Node.js, Express, MongoDB using TypeScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用TypeScript使用Node.js、Express、MongoDB设置RESTful API</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/setup-restful-api-with-node-js-express-mongodb-using-typescript-261959ef0998?source=collection_archive---------1-----------------------#2020-04-04">https://levelup.gitconnected.com/setup-restful-api-with-node-js-express-mongodb-using-typescript-261959ef0998?source=collection_archive---------1-----------------------#2020-04-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/375add0fa33c1c03f0e375e244c8701d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*p-zoott5uZ8YR3ntSfz5vA.png"/></div></figure><p id="1265" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">第1部分:<a class="ae ks" href="https://medium.com/@jpbinith/setup-restful-api-with-node-js-express-mongodb-using-typescript-261959ef0998" rel="noopener">设置REST API </a></p><p id="0391" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">第二部分:<a class="ae ks" href="https://medium.com/@jpbinith/project-structure-and-building-routes-of-restful-api-with-node-js-f3a8b53d94e7" rel="noopener">REST API中的项目结构和建设路线</a></p><p id="b36c" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">第3部分:<a class="ae ks" href="https://medium.com/@jpbinith/connect-express-rest-api-with-mongodb-and-crud-operations-using-typescript-58d9afcc06d" rel="noopener">连接到MongoDB和CRUD操作</a></p></div><div class="ab cl kt ku hu kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="ij ik il im in"><p id="0e17" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在本文中，我将帮助您使用上述技术建立您的第一个REST API，并在您的机器上运行它。希望你会喜欢它。😃</p><p id="b5b8" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在开始之前，让我们对将要使用的技术和工具有一些了解。</p><h2 id="f63f" class="la lb iq bd lc ld le dn lf lg lh dp li kf lj lk ll kj lm ln lo kn lp lq lr ls bi translated">什么是API，它是如何工作的？</h2><p id="c7d4" class="pw-post-body-paragraph ju jv iq jw b jx lt jz ka kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ij bi translated">API(应用程序编程接口)有点像信使。它充当两个或更多需要相互对话的应用程序之间的中介。换句话说，它将你的请求传递给提供者(你向他们请求什么),并在那里对你做出响应(你请求的东西)。因此，这是一种允许两个应用程序使用一组<strong class="jw ir">规则进行交互的机制。</strong></p><p id="2caf" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">想象你在一家餐馆里享用一些食物。你的桌子上有一份菜单，上面有很多选择，在厨房里，有一位厨师准备好为你做饭。但是厨师不能来帮你点菜，因为他/她正在厨房忙着做饭。所以服务员会从你那里接订单，送到厨房，告诉厨师你点的是什么(要求)。当食物(回应)准备好了，服务员会把它送到你面前。在这里，服务员充当API。这个例子将让你对什么是API以及它如何工作有一个基本的概念。</p><h2 id="8c1e" class="la lb iq bd lc ld le dn lf lg lh dp li kf lj lk ll kj lm ln lo kn lp lq lr ls bi translated"><strong class="ak">原料药的种类？</strong></h2><ul class=""><li id="d398" class="ly lz iq jw b jx lt kb lu kf ma kj mb kn mc kr md me mf mg bi translated">肥皂</li><li id="7b6e" class="ly lz iq jw b jx mh kb mi kf mj kj mk kn ml kr md me mf mg bi translated">XML-RPC</li><li id="da07" class="ly lz iq jw b jx mh kb mi kf mj kj mk kn ml kr md me mf mg bi translated">JSON-RPC</li><li id="ecf1" class="ly lz iq jw b jx mh kb mi kf mj kj mk kn ml kr md me mf mg bi translated">休息</li></ul><h2 id="229f" class="la lb iq bd lc ld le dn lf lg lh dp li kf lj lk ll kj lm ln lo kn lp lq lr ls bi translated">什么是Rest API，我们为什么要使用它？</h2><p id="3900" class="pw-post-body-paragraph ju jv iq jw b jx lt jz ka kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ij bi translated">REST(<strong class="jw ir">RE</strong>presentational<strong class="jw ir">S</strong>state<strong class="jw ir">T</strong>transfer)API是一个应用程序接口，它使用HTTP请求来获取、上传、发布和删除数据。它不像其他web服务那样是一个协议，相反，它是一组架构原则。REST建议为客户机请求的数据创建一个对象，并将对象的状态发送给用户。REST APIs比其他类型的API更快、更灵活，开发人员喜欢REST，因为学习曲线不太陡。</p><h2 id="4525" class="la lb iq bd lc ld le dn lf lg lh dp li kf lj lk ll kj lm ln lo kn lp lq lr ls bi translated">节点. js</h2><p id="0f8e" class="pw-post-body-paragraph ju jv iq jw b jx lt jz ka kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ij bi translated">Node.js是一个开源的跨平台运行时环境，用于开发服务器端和网络应用程序。Node.js应用程序是用JavaScript编写的，可以在OS X、Microsoft Windows和Linux上的Node.js运行时中运行。</p><h2 id="0b10" class="la lb iq bd lc ld le dn lf lg lh dp li kf lj lk ll kj lm ln lo kn lp lq lr ls bi translated">表达</h2><p id="3dfd" class="pw-post-body-paragraph ju jv iq jw b jx lt jz ka kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ij bi translated">Express是Node.js的一个快速、自信、基本和适度的web框架。您可以假设express是构建在Node.js之上的一个层，帮助管理服务器和路由。它提供了一组健壮的特性来开发web和移动应用程序。</p><h2 id="517d" class="la lb iq bd lc ld le dn lf lg lh dp li kf lj lk ll kj lm ln lo kn lp lq lr ls bi translated">MongoDB</h2><p id="3f4e" class="pw-post-body-paragraph ju jv iq jw b jx lt jz ka kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ij bi translated">MongoDB是一个面向文档的NoSQL数据库，用于大容量数据存储。MongoDB使用带有模式的类似JSON的文档。</p><h2 id="f55f" class="la lb iq bd lc ld le dn lf lg lh dp li kf lj lk ll kj lm ln lo kn lp lq lr ls bi translated">以打字打的文件</h2><p id="3ce0" class="pw-post-body-paragraph ju jv iq jw b jx lt jz ka kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ij bi translated">TypeScript是一种由微软开发和维护的开源编程语言。它是JavaScript语言的超集，为该语言添加了可选的静态类型。TypeScript的目标是帮助通过类型系统尽早发现错误，并使JavaScript开发更加高效。</p><h2 id="8010" class="la lb iq bd lc ld le dn lf lg lh dp li kf lj lk ll kj lm ln lo kn lp lq lr ls bi translated">刻薄？</h2><p id="5a2e" class="pw-post-body-paragraph ju jv iq jw b jx lt jz ka kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ij bi translated">在MEAN stack中，M代表MongoDB，E代表Express，A代表AngularJS，最终N代表Node.js. Angular是一个前端开发框架，因为我们专注于后端，所以我不打算在这里谈论它。MEAN stack比其他竞争对手都出名，因为它覆盖了使用javascript从前端到后端开发的整个web开发周期，有助于保持web应用程序开发的有序性，抵制不必要的繁重工作，并且因为它们是开源的，所以具有良好的社区支持。</p></div><div class="ab cl kt ku hu kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="ij ik il im in"><p id="848f" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在我们开始之前，确保您的机器上已经安装了<a class="ae ks" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank"> NodeJS、</a><a class="ae ks" href="https://docs.mongodb.com/manual/administration/install-community/" rel="noopener ugc nofollow" target="_blank">MongoDB</a><a class="ae ks" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank">T5】。如果您在本地安装了MongoDB，您应该为GUI界面安装</a><a class="ae ks" href="https://docs.mongodb.com/compass/master/install/" rel="noopener ugc nofollow" target="_blank"> Mongo Compass </a>或<a class="ae ks" href="https://robomongo.org/" rel="noopener ugc nofollow" target="_blank"> Robo 3T </a>。我建议你使用<a class="ae ks" href="https://code.visualstudio.com/" rel="noopener ugc nofollow" target="_blank"> VS代码</a>进行开发。</p><p id="3f08" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">如果您在开始我们的项目之前全局安装TypeScript会更好。然后在终端中键入下面一行，并按Enter键。</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="2bca" class="la lb iq mr b gy mv mw l mx my">npm install -g typescript ts-node</span></pre><p id="dbcf" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">为了测试HTTP请求，我们可以使用<a class="ae ks" href="https://www.getpostman.com/apps" rel="noopener ugc nofollow" target="_blank"> Postman </a>发送示例请求并查看响应。</p><p id="5a97" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">现在我们可以深入到编码部分了💪让我们先设置我们的项目</p><blockquote class="mz na nb"><p id="6aad" class="ju jv nc jw b jx jy jz ka kb kc kd ke nd kg kh ki ne kk kl km nf ko kp kq kr ij bi translated"><strong class="jw ir">第一步:启动一个节点项目</strong></p></blockquote><p id="a6b1" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">打开要在其中创建项目的文件夹。然后单击地址栏中的文件浏览类型cmd并输入。然后在你的终端上输入“代码”它会把你引向vs代码。在vs代码中，你可以通过点击终端标签并选择新终端或者按ctrl + shift +` '来打开终端。您可以现在回答问题，也可以在之后的任何时间进行编辑。完成初始化后，你可以看到'<strong class="jw ir"> package.json </strong>'已经创建好了。</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="b9da" class="la lb iq mr b gy mv mw l mx my">mkdir my-first-project<br/>cd .\my-first-project\<br/>npm init</span></pre><blockquote class="mz na nb"><p id="7bef" class="ju jv nc jw b jx jy jz ka kb kc kd ke nd kg kh ki ne kk kl km nf ko kp kq kr ij bi translated"><strong class="jw ir">第二步:安装所有的依赖项</strong></p></blockquote><p id="a82c" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">完成后，您可以看到'<strong class="jw ir"> package-lock.json </strong>'文件已创建，且'<strong class="jw ir"> node_modules </strong>'已导入。</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="e292" class="la lb iq mr b gy mv mw l mx my">npm install --save @types/express express body-parser mongoose   nodemon</span></pre><blockquote class="mz na nb"><p id="4ca8" class="ju jv nc jw b jx jy jz ka kb kc kd ke nd kg kh ki ne kk kl km nf ko kp kq kr ij bi translated"><strong class="jw ir">第三步:配置TypeScript配置文件</strong></p></blockquote><p id="1d48" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我们使用typescript进行开发，但是因为我们在Node.js上运行它，所以我们需要将其转换为javascript。所以在这里我们把我们所有的typescript文件放在一个名为<strong class="jw ir"> <em class="nc"> lib </em> </strong>的文件夹里面，而java script文件放在一个名为<strong class="jw ir"> <em class="nc"> dist </em> </strong>的文件夹里面。让我们在下一篇文章中讨论这种文件格式。现在在你的项目中创建一个文件，命名为'<strong class="jw ir"> tsconfig.json </strong>'，复制并粘贴如下内容。</p><figure class="mm mn mo mp gt jr"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="7b6f" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">每当我们运行typescript编译器'<strong class="jw ir"> tsc </strong>'时，'<strong class="jw ir"> lib </strong>文件夹中的所有typescript文件都会转换成javascript并保存在'<strong class="jw ir"> dist </strong>文件夹中</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="17ad" class="la lb iq mr b gy mv mw l mx my">tsc</span></pre><blockquote class="mz na nb"><p id="bf0f" class="ju jv nc jw b jx jy jz ka kb kc kd ke nd kg kh ki ne kk kl km nf ko kp kq kr ij bi translated"><strong class="jw ir">第四步:设置脚本运行API </strong></p></blockquote><p id="68b0" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在'<strong class="jw ir"> package.json </strong>'文件中更新主文件如下。</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="6743" class="la lb iq mr b gy mv mw l mx my">"main": "./dist/server.js"</span></pre><p id="032e" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在脚本下的'<strong class="jw ir"> package.json </strong>'文件中添加以下脚本。</p><figure class="mm mn mo mp gt jr"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="baed" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">因此，对于开发，我们可以通过在您的终端上运行以下命令来运行测试服务器</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="ba24" class="la lb iq mr b gy mv mw l mx my">npm run test / npm run dev</span></pre><p id="9d27" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">为了生产</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="3cb3" class="la lb iq mr b gy mv mw l mx my">npm run prod</span></pre><p id="1e44" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在这里，我们使用typescript编译器(tsc)将typescript编译成javascript，并转到server.ts文件所在的方向，使用nodemon运行它。</p><p id="df53" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">要终止该过程，请按</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="9595" class="la lb iq mr b gy mv mw l mx my">ctrl + c</span></pre><blockquote class="mz na nb"><p id="50a1" class="ju jv nc jw b jx jy jz ka kb kc kd ke nd kg kh ki ne kk kl km nf ko kp kq kr ij bi translated"><strong class="jw ir">步骤5:在应用程序上配置基本配置</strong></p></blockquote><p id="e6e1" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">现在让我们在'<strong class="jw ir"> lib </strong>'文件夹中创建另一个名为'<strong class="jw ir"> config </strong>的文件夹。在下一篇文章中，我们将更多地讨论文件格式。在这个“<strong class="jw ir"> config </strong>文件夹中创建一个名为“<strong class="jw ir"> app.ts </strong>的文件，复制并粘贴以下内容。在处理程序之前解析中间件中的传入请求体，在<code class="fe ni nj nk mr b">req.body</code>属性下可用。目前，我们不打算在这方面整合mongo。</p><figure class="mm mn mo mp gt jr"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="293a" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">然后创建server.ts文件</p><figure class="mm mn mo mp gt jr"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="2099" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">从现在开始，您可以通过运行'<strong class="jw ir"> npm run dev </strong>'来测试项目，下面的内容将会打印在您的终端上。</p><blockquote class="nl"><p id="2d35" class="nm nn iq bd no np nq nr ns nt nu kr dk translated">快速服务器侦听端口3000</p></blockquote><p id="3e2a" class="pw-post-body-paragraph ju jv iq jw b jx nv jz ka kb nw kd ke kf nx kh ki kj ny kl km kn nz kp kq kr ij bi translated">完整代码请访问我的<a class="ae ks" href="https://github.com/jpbinith/test-project" rel="noopener ugc nofollow" target="_blank"> Github库</a>。如果你感兴趣，你可以从下面的文章中学习关于Node Express REST APIs的移动。</p><ol class=""><li id="7bc0" class="ly lz iq jw b jx jy kb kc kf oa kj ob kn oc kr od me mf mg bi translated"><a class="ae ks" href="https://medium.com/@jpbinith/setup-restful-api-with-node-js-express-mongodb-using-typescript-261959ef0998" rel="noopener">设置REST API </a></li><li id="d231" class="ly lz iq jw b jx mh kb mi kf mj kj mk kn ml kr od me mf mg bi translated"><a class="ae ks" href="https://medium.com/@jpbinith/project-structure-and-building-routes-of-restful-api-with-node-js-f3a8b53d94e7" rel="noopener">REST API</a>项目结构和建设路线</li><li id="9770" class="ly lz iq jw b jx mh kb mi kf mj kj mk kn ml kr od me mf mg bi translated"><a class="ae ks" href="https://medium.com/@jpbinith/connect-express-rest-api-with-mongodb-and-crud-operations-using-typescript-58d9afcc06d" rel="noopener">连接到MongoDB和CRUD操作</a></li></ol></div></div>    
</body>
</html>