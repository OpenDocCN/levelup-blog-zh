<html>
<head>
<title>A Rundown of Typescript 4.9</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Typescript 4.9的概要</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/a-rundown-of-typescript-4-9-4858ccf3daea?source=collection_archive---------30-----------------------#2022-11-28">https://levelup.gitconnected.com/a-rundown-of-typescript-4-9-4858ccf3daea?source=collection_archive---------30-----------------------#2022-11-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/ccab24cda3e83c6fdd972cf3038debb7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i_nkswaX0xYyLyrI1kMQSQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">一张画在纽约一座摩天大楼上的蓝色背景数字4的照片</figcaption></figure><p id="bf47" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">Typescript让生活更美好。我爱Typescript，Typescript 4.9在这里。随之而来的新特性将使你的代码在类型安全的同时更容易理解。</p><h1 id="f381" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">满足</h1><p id="5291" class="pw-post-body-paragraph kc kd iq ke b kf ly kh ki kj lz kl km kn ma kp kq kr mb kt ku kv mc kx ky kz ij bi translated">当我们有一个匹配一种类型但也可能匹配另一种类型的表达式时，新的满足操作符用于解决这个问题。一个例子可能是当我们有一个相同数据的对象，但以不同的方式表示。</p><pre class="md me mf mg gt mh mi mj bn mk ml bi"><span id="4a29" class="mm lb iq mi b be mn mo l mp mq">type RGB = [number, number, number];<br/><br/>const palette: Record&lt;"red"|"blue"|"green", string | RGB&gt; = {<br/>  red: [255,0,0],<br/>  green: "#00ff00",<br/>  blue: [0,0,255]<br/>}<br/>palette.green.toUpperCase(); // error! 😱</span></pre><p id="e3b2" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">代码很好，但是，问题是颜色记录的类型注释。当我们试图把<code class="fe mr ms mt mi b">colours.green.toUpperCase()</code>当作一个字符串来使用时，它会抛出一个错误。我们可以看到它是一个字符串，我们的编译器不能。</p><p id="3608" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我们可以完全删除类型……但这会造成一个允许代码中出现类型错误的环境。</p><p id="7d69" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">或者，我们可以添加条件语句来绕过它。但这是膨胀，它是混乱的。</p><pre class="md me mf mg gt mh mi mj bn mk ml bi"><span id="207a" class="mm lb iq mi b be mn mo l mp mq">type RGB = [number, number, number];<br/><br/>const palette: Record&lt;"red"|"blue"|"green", string | RGB&gt; = {<br/>  red: [255,0,0],<br/>  green: "#00ff00",<br/>  blue: [0,0,255]<br/>}<br/>if (typeof palette.green === "string") {<br/>   palette.green.toUpperCase(); // 🤮<br/>}</span></pre><p id="d644" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">相反，我们可以使用满足运算符来确保根据类型的值来正确推断类型。</p><pre class="md me mf mg gt mh mi mj bn mk ml bi"><span id="b93a" class="mm lb iq mi b be mn mo l mp mq">type RGB = [number, number, number];<br/><br/>const palette = {<br/>  red: [255,0,0],<br/>  green: "#00ff00",<br/>  blue: [0,0,255]<br/>} satisfies Record&lt;"red"|"blue"|"green", string | RGB&gt;<br/><br/>palette.green.toUpperCase(); // 😁</span></pre><p id="abb5" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在传入的数据可能有多种类型的情况下，比如您正在构建一个框架或处理一个API调用，并且想要推断响应中的类型，这是一个好方法。</p><p id="9bc7" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">注意:</p><blockquote class="mu mv mw"><p id="e200" class="kc kd mx ke b kf kg kh ki kj kk kl km my ko kp kq mz ks kt ku na kw kx ky kz ij bi translated"><em class="iq">记录是Typescript中的一种特殊类型，它实现了下面的签名</em> <code class="fe mr ms mt mi b"><em class="iq">Record&lt;keys, Type&gt;</em></code> <em class="iq">。它意味着这些可能的键和可能的类型的对象。当一个对象的键可能意味着多种类型时，这很有用。我知道这很疯狂。</em></p></blockquote><p id="e178" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><a class="ae nb" href="https://devblogs.microsoft.com/typescript/announcing-typescript-4-9-rc/#the-satisfies-operator" rel="noopener ugc nofollow" target="_blank">满足运算符</a></p><h1 id="87cf" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">未列出的属性缩小—在</h1><p id="04a9" class="pw-post-body-paragraph kc kd iq ke b kf ly kh ki kj lz kl km kn ma kp kq kr mb kt ku kv mc kx ky kz ij bi translated">当你不确定函数使用的变量类型时，可以使用新的<code class="fe mr ms mt mi b">in</code>操作符。例如:</p><pre class="md me mf mg gt mh mi mj bn mk ml bi"><span id="0133" class="mm lb iq mi b be mn mo l mp mq">interface Context {<br/>  packageJSON: unknown;<br/>}<br/><br/>function tryGetPackageName(context: Context) {<br/> const packageJSON = context.packageJSON;<br/> if (packageJSON &amp;&amp; typeof packageJSON === "object") {<br/>  return pacakgeJSON.name; // error Name doesn't exist on unknown<br/> }<br/> return undefined;<br/>}</span></pre><p id="7602" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">为了解决这个问题，我们可以使用<code class="fe mr ms mt mi b">in</code>操作符来构建类型并增加类型安全性。当您试图从未知输入中构建一个类型时，这很有用。</p><pre class="md me mf mg gt mh mi mj bn mk ml bi"><span id="9a31" class="mm lb iq mi b be mn mo l mp mq">interface Context {<br/>  packageJSON: unknown;<br/>}<br/><br/>function tryGetPackageName(context: Context) {<br/> const packageJSON = context.packageJSON;<br/> if (packageJSON &amp;&amp; typeof packageJSON === "object") {<br/>  if("name" in packageJSON &amp;&amp; typeof packageJSON.name === "string") {<br/>    return pacakgeJSON.name;<br/>  }<br/> }<br/> return undefined;<br/>}</span></pre><p id="1953" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><a class="ae nb" href="https://devblogs.microsoft.com/typescript/announcing-typescript-4-9-rc/#in-narrowing" rel="noopener ugc nofollow" target="_blank">向内缩小</a></p><h1 id="5f57" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">ECMAScript自动访问器</h1><p id="070b" class="pw-post-body-paragraph kc kd iq ke b kf ly kh ki kj lz kl km kn ma kp kq kr mb kt ku kv mc kx ky kz ij bi translated">新的<code class="fe mr ms mt mi b">accessor</code>关键字可以在类中用来自动生成getters和setters。创建的属性将是私有的，因此用户无法访问。</p><pre class="md me mf mg gt mh mi mj bn mk ml bi"><span id="03dd" class="mm lb iq mi b be mn mo l mp mq">class Person {<br/>  accessor name: string;<br/><br/>  constructor(name: string) {<br/>    this.name = name;<br/>  }<br/>}</span></pre><p id="2e33" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><a class="ae nb" href="https://github.com/microsoft/TypeScript/pull/49705" rel="noopener ugc nofollow" target="_blank">支持Stage 3 Decorators提案中的自动访问器字段</a></p><h1 id="fd6a" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">文件监视事件(速度提高)</h1><p id="59f5" class="pw-post-body-paragraph kc kd iq ke b kf ly kh ki kj lz kl km kn ma kp kq kr mb kt ku kv mc kx ky kz ij bi translated">Typescripts内部现在使用文件系统事件来监视文件。这意味着使用Typescript进行代码编辑的应用程序应该有显著的速度提高。以前的Typescript使用轮询来监视单个文件，这意味着它将定期检查更新，如果有大量文件，这可能是一项昂贵的任务。</p><p id="e613" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">与轮询不同，Typescript现在将使用文件系统事件来侦听特定文件中的更新，并且只在它们实际发生更改时得到通知。这应该有助于Monorepos持有的大得多的项目。</p><p id="35b6" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><a class="ae nb" href="https://devblogs.microsoft.com/typescript/announcing-typescript-4-9-rc/#file-watching-now-uses-file-system-events" rel="noopener ugc nofollow" target="_blank">文件查看现在使用文件系统事件</a></p></div><div class="ab cl nc nd hu ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="ij ik il im in"><p id="e893" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">你可以在<a class="ae nb" href="https://matty.dev" rel="noopener ugc nofollow" target="_blank"> https://matty.dev </a>阅读更多类似内容</p></div><div class="ab cl nc nd hu ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="ij ik il im in"><h1 id="0abc" class="la lb iq bd lc ld nj lf lg lh nk lj lk ll nl ln lo lp nm lr ls lt nn lv lw lx bi translated">分级编码</h1><p id="e6f0" class="pw-post-body-paragraph kc kd iq ke b kf ly kh ki kj lz kl km kn ma kp kq kr mb kt ku kv mc kx ky kz ij bi translated">感谢您成为我们社区的一员！在你离开之前:</p><ul class=""><li id="e26b" class="no np iq ke b kf kg kj kk kn nq kr nr kv ns kz nt nu nv nw bi translated">👏为故事鼓掌，跟着作者走👉</li><li id="44c7" class="no np iq ke b kf nx kj ny kn nz kr oa kv ob kz nt nu nv nw bi translated">📰查看更多内容请参见<a class="ae nb" href="https://levelup.gitconnected.com/?utm_source=pub&amp;utm_medium=post" rel="noopener ugc nofollow" target="_blank">升级编码刊物</a></li><li id="6e8f" class="no np iq ke b kf nx kj ny kn nz kr oa kv ob kz nt nu nv nw bi translated">🔔关注我们:<a class="ae nb" href="https://twitter.com/gitconnected" rel="noopener ugc nofollow" target="_blank">Twitter</a>|<a class="ae nb" href="https://www.linkedin.com/company/gitconnected" rel="noopener ugc nofollow" target="_blank">LinkedIn</a>|<a class="ae nb" href="https://newsletter.levelup.dev" rel="noopener ugc nofollow" target="_blank">时事通讯</a></li></ul><p id="b257" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">🚀👉<a class="ae nb" href="https://jobs.levelup.dev/talent/welcome?referral=true" rel="noopener ugc nofollow" target="_blank"> <strong class="ke ir">加入升级人才集体，找到一份神奇的工作</strong> </a></p></div></div>    
</body>
</html>