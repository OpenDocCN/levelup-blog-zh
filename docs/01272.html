<html>
<head>
<title>A Quick Beginner’s Guide to Easy End-to-End Testing with Cypress</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Cypress进行简单的端到端测试的快速入门指南</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/a-quick-beginners-guide-to-easy-end-to-end-testing-with-cypress-aa20c85d7834?source=collection_archive---------6-----------------------#2019-12-10">https://levelup.gitconnected.com/a-quick-beginners-guide-to-easy-end-to-end-testing-with-cypress-aa20c85d7834?source=collection_archive---------6-----------------------#2019-12-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="db2c" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">只需要基本JavaScript技能的自动化测试</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/70b8e3e43a5b5934b0d7ae8adbf16c66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c_fvqZuQX19HlpZByG9ulQ.jpeg"/></div></div></figure><p id="2ce4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这篇文章的目标是展示如何用很少的努力，使用<a class="ae ln" href="https://www.cypress.io/" rel="noopener ugc nofollow" target="_blank"> Cypress </a>将有用的端到端(E2E)测试添加到你的项目中，即使你还没有做过任何测试。</p><p id="cd88" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在本文的开始，我将讨论为什么对于任何熟悉JavaScript基础知识的开发人员来说，<strong class="kt ir">用Cypress编写E2E测试是容易的。然后，我将介绍一种在官方文档的帮助下快速开始使用Cypress的方法，该文档是一个优秀的教程，为初学者提供指导。</strong></p><p id="614f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">虽然官方文档对于开始使用Cypress是完美的，但是它假设您已经知道某些测试工具和技术。对于还没有测试经验的开发人员，我将在这里介绍这些方面，这样您就可以完全理解教程并毫无问题地开始编写测试。</p><p id="c65e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="lo">这篇介绍性文章假设您已经掌握了JavaScript基础知识，并且知道如何使用npm和命令行。</em></p><h1 id="7189" class="lp lq iq bd lr ls lt lu lv lw lx ly lz jw ma jx mb jz mc ka md kc me kd mf mg bi translated">是什么让Cypress如此容易使用</h1><ul class=""><li id="6119" class="mh mi iq kt b ku mj kx mk la ml le mm li mn lm mo mp mq mr bi translated">柏树<a class="ae ln" href="https://docs.cypress.io/guides/overview/why-cypress.html#In-a-nutshell" rel="noopener ugc nofollow" target="_blank">文档</a>是<strong class="kt ir">接近完美</strong>。你不必搜索教程，即使你还没有做过任何E2E测试，这些文档对你开始使用Cypress也很有帮助。</li><li id="3606" class="mh mi iq kt b ku ms kx mt la mu le mv li mw lm mo mp mq mr bi translated">读写测试超级<strong class="kt ir">直观。基本上，Cypress语法读起来就像英语。</strong></li><li id="61d5" class="mh mi iq kt b ku ms kx mt la mu le mv li mw lm mo mp mq mr bi translated">使用Cypress <strong class="kt ir">你可以使用JavaScript来编写测试</strong>。如果你用JavaScript编程才几个月，你仍然可以使用Cypress。</li><li id="f8a1" class="mh mi iq kt b ku ms kx mt la mu le mv li mw lm mo mp mq mr bi translated">Cypress提供了很好的错误信息，清楚地解释了为什么你的测试没有成功。</li><li id="cd9c" class="mh mi iq kt b ku ms kx mt la mu le mv li mw lm mo mp mq mr bi translated">Cypress不需要任何配置。</li><li id="5a64" class="mh mi iq kt b ku ms kx mt la mu le mv li mw lm mo mp mq mr bi translated">Cypress有一个漂亮而简单的API。</li></ul><h1 id="92be" class="lp lq iq bd lr ls lt lu lv lw lx ly lz jw ma jx mb jz mc ka md kc me kd mf mg bi translated">如何快速上手Cypress</h1><p id="4ff2" class="pw-post-body-paragraph kr ks iq kt b ku mj jr kw kx mk ju kz la mx lc ld le my lg lh li mz lk ll lm ij bi translated">你可以在官方Cypress文档的入门部分找到开始使用Cypress所需的一切。入门部分是一个完美的教程。它清晰明了地展示了如何:</p><p id="aa0d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><a class="ae ln" href="https://docs.cypress.io/guides/getting-started/installing-cypress.html#Installing" rel="noopener ugc nofollow" target="_blank"> <em class="lo">装柏</em> </a></p><p id="8a2b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><a class="ae ln" href="https://docs.cypress.io/guides/getting-started/installing-cypress.html#Opening-Cypress" rel="noopener ugc nofollow" target="_blank"> <em class="lo">打开柏树使用命令行</em> </a></p><p id="e197" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><a class="ae ln" href="https://docs.cypress.io/guides/getting-started/writing-your-first-test.html#Add-a-test-file" rel="noopener ugc nofollow" target="_blank"> <em class="lo">并添加一个测试文件</em> </a></p><p id="e49f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">完成这些步骤后，就可以开始编写测试了。最好的学习方法在文档的<a class="ae ln" href="https://docs.cypress.io/guides/getting-started/writing-your-first-test.html#Write-a-real-test" rel="noopener ugc nofollow" target="_blank"> <em class="lo">编写真实测试</em> </a> <em class="lo"> </em>部分有描述。</p><p id="4236" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">尽管文档的这一部分尽可能的平易近人，但是<strong class="kt ir">它假设您熟悉某些测试工具和概念</strong>。让我们先在这里讨论它们，以便您可以继续编写测试。</p><p id="d4db" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">首先，你应该知道用于组织和运行测试的<strong class="kt ir">方法</strong>。这些方法来自于<a class="ae ln" href="https://mochajs.org/" rel="noopener ugc nofollow" target="_blank">摩卡</a>，一个捆绑了柏树的试跑者。</p><p id="f837" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">将几个相关的测试组合在一起。它有两个参数:测试块的名称和一个包含使用<code class="fe na nb nc nd b">it()</code>方法创建的单个测试的函数。</p><p id="ebde" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe na nb nc nd b">it(name, fn)</code>方法包含个别测试。<code class="fe na nb nc nd b">it()</code>将测试的名称作为参数和包含测试的函数。</p><p id="9d86" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这是用于编写测试的两种基本方法。赛普拉斯还借鉴了摩卡的一套其他方法，叫做<a class="ae ln" href="https://docs.cypress.io/guides/core-concepts/writing-and-organizing-tests.html#Hooks" rel="noopener ugc nofollow" target="_blank">钩</a> : <code class="fe na nb nc nd b">before()</code>、<code class="fe na nb nc nd b">after()</code>、<code class="fe na nb nc nd b">beforeEach()</code>和<code class="fe na nb nc nd b">afterEach()</code>。钩子的目的是在文件中运行测试之前或之后运行一个函数。</p><p id="39df" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">你应该熟悉的另一个概念是<strong class="kt ir">测试断言，以及它们在测试</strong>中是如何使用的。</p><p id="ddf6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">简单来说，<strong class="kt ir">测试断言用于验证实际结果与预期结果</strong>是否相同。如果实际结果与预期结果匹配，则断言正确通过，如果这两个结果不匹配，则断言失败。</p><p id="cd6a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Cypress捆绑了<a class="ae ln" href="http://chaijs.com/" rel="noopener ugc nofollow" target="_blank">柴</a>断言库，提供内置断言。Chai提供了三种不同的<a class="ae ln" href="https://www.chaijs.com/guide/styles/" rel="noopener ugc nofollow" target="_blank">断言风格</a>，本质上呈现了<strong class="kt ir">三种构造断言的方式</strong>。</p><p id="a28f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="lo">断言样式</em>通过<code class="fe na nb nc nd b">assert</code>接口公开:</p><p id="8149" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe na nb nc nd b">assert.equal(actualResult, expectation);</code> // <em class="lo">检查实际值是否等于期望值</em></p><p id="4fe1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="lo">期望样式</em>通过<code class="fe na nb nc nd b">expect</code>接口暴露；</p><p id="0b61" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe na nb nc nd b">expect(actualResult).to.include(expectation);</code> // <em class="lo">验证实际结果是否包含预期值</em></p><p id="31d4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">以及通过<code class="fe na nb nc nd b">should</code>界面暴露出来的<em class="lo">肩部样式</em>:</p><p id="a433" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe na nb nc nd b">actualResult.should.have.lengthOf(expectation);</code> // <em class="lo">验证实际结果具有预期长度</em></p><p id="96ac" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">虽然这些风格有一些差异，但使用哪一种基本上是个人喜好的问题。</p><p id="ca93" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这三个接口提供了对<em class="lo">链器</em>(在上面的例子中是<code class="fe na nb nc nd b">equal</code>、<code class="fe na nb nc nd b">include</code>和<code class="fe na nb nc nd b">lengthOf</code>)的访问。<strong class="kt ir">链条用于比较实际值和期望值</strong>。在这里你可以找到可用链节的参考列表，以及它们的用法示例。</p><p id="86aa" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">尽管这三个Chai接口可以用于Cypress，<strong class="kt ir">创建断言最常见的方式是借助tge Cypress API提供的</strong> <code class="fe na nb nc nd b"><strong class="kt ir">.should()</strong></code> <strong class="kt ir">方法</strong>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/ab61a5e1c5289d87a84808a7b2697127.png" data-original-src="https://miro.medium.com/v2/resize:fit:1020/format:webp/1*3xC0C64Ja4WZljfYUMEQQA.jpeg"/></div><figcaption class="nf ng gj gh gi nh ni bd b be z dk translated">的例子。should()用法</figcaption></figure><p id="ddcd" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在上面的例子中<code class="fe na nb nc nd b">cy</code>是一个<strong class="kt ir">全局对象，它提供对Cypress API方法</strong>的访问(这些方法在官方文档中被称为<strong class="kt ir">命令</strong>)。命令是可链接的，这提高了测试的可读性。</p><p id="f56d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe na nb nc nd b">.should()</code>方法将链接器和期望值作为参数。链接器以字符串形式提供，可以是来自Chai的任何有效链接器。</p><p id="a182" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">看看这些<a class="ae ln" href="https://docs.cypress.io/guides/references/assertions.html#Common-Assertions" rel="noopener ugc nofollow" target="_blank">常见断言</a>的例子，感受一下它们是如何与Cypress一起使用的。</p><p id="9149" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，当这些主题在Cypress文档中涵盖时，您可以开始<a class="ae ln" href="https://docs.cypress.io/guides/getting-started/writing-your-first-test.html#Write-a-real-test" rel="noopener ugc nofollow" target="_blank">编写真正的测试</a>。因为通过例子学习总是最好的，你可以在Cypress docs提供的优秀的<a class="ae ln" href="https://docs.cypress.io/examples/examples/tutorials.html#Test-a-React-Todo-App" rel="noopener ugc nofollow" target="_blank">教程视频</a>中寻找有用的代码片段。这些视频涵盖了编写测试的最常见用例，并展示了测试驱动开发的示例。</p><p id="75ba" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">最后，可选但强烈推荐:看一下<a class="ae ln" href="https://docs.cypress.io/guides/core-concepts/introduction-to-cypress.html#Cypress-Can-Be-Simple-Sometimes" rel="noopener ugc nofollow" target="_blank">对Cypress </a>部分的介绍，深入了解Cypress测试背后的机制。</p></div><div class="ab cl nj nk hu nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="ij ik il im in"><p id="8d10" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Cypress易于学习和使用，这使得它成为初学者的一个完美的E2E测试工具。更好的是，简单并不意味着Cypress的容量受到限制。它提供了更多伟大的特性，在您的测试经验进步之后，您会很高兴地发现这些特性。</p><p id="22ea" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果你开发一个应用，发现自己要做大量的手工测试，也可以考虑使用Cypress作为主要的开发浏览器。看看这篇<a class="ae ln" href="https://itnext.io/front-end-productivity-boost-cypress-as-your-main-development-browser-f08721123498" rel="noopener ugc nofollow" target="_blank">文章</a>,了解为什么在开发前端应用程序时，自动化最频繁执行的测试用例是一件好事。</p></div></div>    
</body>
</html>