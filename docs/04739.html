<html>
<head>
<title>JavaScript Tips — Add Seconds, Format Dates, Traverse Objects, and More</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript提示—添加秒数、格式化日期、遍历对象等等</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/javascript-tips-add-seconds-format-dates-traverse-objects-and-more-17d8a673881f?source=collection_archive---------8-----------------------#2020-07-12">https://levelup.gitconnected.com/javascript-tips-add-seconds-format-dates-traverse-objects-and-more-17d8a673881f?source=collection_archive---------8-----------------------#2020-07-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/f87659d84f61b26f15cd895a12d44f7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8oJfQbM9VhJBOyzb"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">照片由<a class="ae kf" href="https://unsplash.com/@karaozgur?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">奥兹古尔·卡拉</a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="58ff" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">像任何类型的应用程序一样，当我们编写JavaScript应用程序时，有一些困难的问题需要解决。</p><p id="96a1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本文中，我们将研究一些常见JavaScript问题的解决方案。</p><h1 id="5af0" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">给日期加上x秒</h1><p id="353d" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以通过使用<code class="fe mh mi mj mk b">getSeconds</code>方法来获取<code class="fe mh mi mj mk b">date</code>对象中的秒数，从而将<code class="fe mh mi mj mk b">x</code>的秒数添加到<code class="fe mh mi mj mk b">Date</code>实例中。</p><p id="5f81" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="cdfc" class="mt lf it mk b gy mu mv l mw mx">const date = new Date('2020-01-01 10:11:55');<br/>date.setSeconds(date.getSeconds() + 10);</span></pre><p id="b979" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们创建一个<code class="fe mh mi mj mk b">Date</code>实例。</p><p id="16ec" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们调用<code class="fe mh mi mj mk b">setSeconds</code>来设置秒。</p><p id="c5cb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们把从<code class="fe mh mi mj mk b">getSeconds</code>开始的秒数加上我们想要增加的秒数。</p><p id="269a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这个例子中，我们增加了10秒。</p><p id="f0bf" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们也可以使用<code class="fe mh mi mj mk b">getTime</code>并将毫秒数添加到对象中。</p><p id="6367" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="4660" class="mt lf it mk b gy mu mv l mw mx">let date = new Date('2020-01-01 10:11:55');<br/>date = new Date(date.getTime() + 10000);</span></pre><p id="69d2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">getTime</code>获取自UTC时间1970年1月1日午夜以来的毫秒数。</p><p id="46de" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">10000毫秒等同于10秒。</p><p id="3578" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因此，我们可以将它放在<code class="fe mh mi mj mk b">Date</code>构造函数中，并获得第一个<code class="fe mh mi mj mk b">Date</code>实例后10秒的新日期。</p><h1 id="3215" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">存储键值对</h1><p id="a4c6" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以用普通对象或<code class="fe mh mi mj mk b">Map</code>实例存储键值对。</p><p id="b100" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="64e6" class="mt lf it mk b gy mu mv l mw mx">const hash = {};<br/>hash['james'] = 123;<br/>hash['joe'] = 456;</span></pre><p id="5582" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">或者我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="dcf2" class="mt lf it mk b gy mu mv l mw mx">const map = new Map();<br/>map.set('james', 123);<br/>map.set('<!-- -->joe<!-- -->', <!-- -->456<!-- -->);</span></pre><p id="b658" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">'james'</code>和<code class="fe mh mi mj mk b">'joe'</code>都是键，在两个例子中数字都是它们的值。</p><p id="194e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以用for-of循环遍历地图。</p><p id="0be2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="c570" class="mt lf it mk b gy mu mv l mw mx">for (const key of map) {<br/>  console.log(key);<br/>}</span></pre><p id="3700" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">循环播放按键。</p><p id="9468" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">此外，我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="5cd3" class="mt lf it mk b gy mu mv l mw mx">for (const [key, value] of map) {<br/>  console.log(key, value);<br/>}</span></pre><p id="9934" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">循环访问键和值。</p><p id="e6ee" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">它还有<code class="fe mh mi mj mk b">keys</code>和<code class="fe mh mi mj mk b">values</code>方法，让我们循环访问键和值。</p><p id="4b78" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="c3bc" class="mt lf it mk b gy mu mv l mw mx">for (const key of map.keys()) {<br/>  console.log(key);<br/>}</span></pre><p id="ab30" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">循环播放按键。</p><p id="6cf6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们写道:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="f67e" class="mt lf it mk b gy mu mv l mw mx">for (const value of map.values()) {<br/>  console.log(value);<br/>}</span></pre><p id="b1d1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">循环遍历这些值。</p><h1 id="6e10" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">禁用和启用HTML输入按钮</h1><p id="96bc" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以使用<code class="fe mh mi mj mk b">disabled</code>属性来禁用或启用HTML输入按钮。</p><p id="b460" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="cfeb" class="mt lf it mk b gy mu mv l mw mx">document.querySelector("button").disabled = true;</span></pre><p id="304c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">禁用按钮。</p><p id="93de" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">此外，我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="4989" class="mt lf it mk b gy mu mv l mw mx">document.querySelector("button").disabled = false;</span></pre><p id="a2bd" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">启用按钮。</p><h1 id="a341" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">显示对象的所有方法</h1><p id="4c12" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以使用<code class="fe mh mi mj mk b">getOwnPropertyNames</code>来获取一个对象的所有方法。</p><p id="2f2b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="44d8" class="mt lf it mk b gy mu mv l mw mx">const objMethodNames = Object.getOwnPropertyNames(obj).filter((p) =&gt; {<br/>   return typeof obj[p] === 'function';<br/>})</span></pre><p id="487b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们用<code class="fe mh mi mj mk b">obj</code>得到属性名。</p><p id="4c33" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们调用<code class="fe mh mi mj mk b">filter</code>来返回属性名，也就是函数名。</p><h1 id="fb68" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">获取UTC时间戳</h1><p id="dc98" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">为了获得一个<code class="fe mh mi mj mk b">Date</code>实例的UTC时间戳，我们可以调用<code class="fe mh mi mj mk b">getTime</code>方法。</p><p id="681e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="0c9f" class="mt lf it mk b gy mu mv l mw mx">const date = new Date().getTime();</span></pre><p id="ff9b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">或者我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="34db" class="mt lf it mk b gy mu mv l mw mx">const date = Date.now();</span></pre><h1 id="672e" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">用JavaScript输出ISO 8601格式的字符串</h1><p id="7652" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以使用<code class="fe mh mi mj mk b">toISOString</code>方法将<code class="fe mh mi mj mk b">Date</code>实例转换成ISO 8601格式的字符串。</p><p id="6806" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="3e76" class="mt lf it mk b gy mu mv l mw mx">const date = new Date();<br/>date.toISOString();</span></pre><p id="d9d2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们得到:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="b8ab" class="mt lf it mk b gy mu mv l mw mx">"2020-06-03T23:29:15.666Z"</span></pre><h1 id="75f5" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">在setTimeout回调中更改“this”上下文</h1><p id="b800" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以使用<code class="fe mh mi mj mk b">bind</code>方法在回调中设置<code class="fe mh mi mj mk b">this</code>的值。</p><p id="39b7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">它只适用于常规功能。</p><p id="2ecd" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="066a" class="mt lf it mk b gy mu mv l mw mx">const obj = {<br/>  destroy(){<br/>    //...<br/>  }<br/>}</span><span id="655d" class="mt lf it mk b gy my mv l mw mx">setTimeout(<!-- -->obj<!-- -->.destroy.bind(<!-- -->obj<!-- -->), 1000);</span></pre><p id="4872" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们有<code class="fe mh mi mj mk b">obj</code>和<code class="fe mh mi mj mk b">destroy</code>方法。</p><p id="2728" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们调用<code class="fe mh mi mj mk b">bind</code>将<code class="fe mh mi mj mk b">destroy</code>方法绑定到<code class="fe mh mi mj mk b">obj</code>。</p><p id="fc2b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">那么<code class="fe mh mi mj mk b">obj.destroy</code>中<code class="fe mh mi mj mk b">this</code>的值肯定应该是<code class="fe mh mi mj mk b">obj</code>。</p><h1 id="396b" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">让Google Chrome JavaScript控制台日志持久化</h1><p id="c350" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">默认情况下，当我们刷新页面或加载新页面时，Google Chrome控制台日志会被清除。</p><p id="8959" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了防止这种情况发生，我们可以在控制台中单击Preserve log来阻止它在我们刷新页面或加载新页面时被清除。</p><figure class="ml mm mn mo gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mz"><img src="../Images/004914b9b78bad80e1a4d39544413284.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_PINBSu5GDRubMcP"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">照片由<a class="ae kf" href="https://unsplash.com/@srikanth262?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">斯里坎特·皮塔</a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><h1 id="1f9f" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">结论</h1><p id="55aa" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以让Chrome控制台日志持久化。</p><p id="20c7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">bind</code>用我们想要的<code class="fe mh mi mj mk b">this</code>的值返回一个新函数。</p><p id="39fd" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以使用<code class="fe mh mi mj mk b">toISOString</code>将日期时间格式化成一个字符串。</p><p id="4404" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">同样，我们可以使用<code class="fe mh mi mj mk b">getOwnPropertyNames</code>获取所有的键，使用<code class="fe mh mi mj mk b">filter</code>返回方法的键。</p></div></div>    
</body>
</html>