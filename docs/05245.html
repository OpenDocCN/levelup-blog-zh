<html>
<head>
<title>How to Set Up Import Aliases for Gatsby</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何为Gatsby设置导入别名</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-set-up-import-aliases-for-gatsby-32398ae67e7f?source=collection_archive---------5-----------------------#2020-08-14">https://levelup.gitconnected.com/how-to-set-up-import-aliases-for-gatsby-32398ae67e7f?source=collection_archive---------5-----------------------#2020-08-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="748e" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在这篇文章中，我们将一步一步地研究如何向gatsby站点添加导入别名。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/ae70b724b758a26c2760ae1fc303fbdd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Qm_ptDn_00_wJJb6pBwGhA.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@patwhelen" rel="noopener ugc nofollow" target="_blank"> <strong class="bd kz">拍惠伦</strong> </a></figcaption></figure><p id="fc4f" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">在这篇文章中，我们将一步一步地研究如何向gatsby站点添加导入别名。</p><p id="6ee4" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">我们设置导入别名的原因更多的是为了从导入树中导入组件时代码的可读性和外观。</p><p id="8430" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">我的意思是，如果我们看下面的例子</p><pre class="kj kk kl km gt lw lx ly lz aw ma bi"><span id="b444" class="mb mc it lx b gy md me l mf mg">import Subscribe from '../../../../../../../core/modules/newsletter/mixins/Subscribe'</span></pre><p id="540c" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">在我看来，这看起来非常丑陋，那么我们该如何改善它呢？</p><p id="22ff" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">我们可以通过更新webpack配置来包含我们的主目录的别名，我们知道这些目录将成为我们组件的基础。</p><p id="a78d" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">一旦我们完成了这篇文章中的所有步骤，最终结果将如下所示</p><pre class="kj kk kl km gt lw lx ly lz aw ma bi"><span id="4e21" class="mb mc it lx b gy md me l mf mg">import Subscribe from '@core/modules/newsletter/mixins/Subscribe'</span></pre></div><div class="ab cl mh mi hx mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="im in io ip iq"><h1 id="11c0" class="mo mc it bd kz mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">在盖茨比中添加别名</h1><p id="d49f" class="pw-post-body-paragraph la lb it lc b ld ne ju lf lg nf jx li lj ng ll lm ln nh lp lq lr ni lt lu lv im bi translated">假设Gatsby使用Webpack作为其核心，并且默认情况下不公开配置，我们可以使用Gatsby的<code class="fe nj nk nl lx b">onCreateWebpackConfig</code> API添加自定义Webpack配置，这将导致自定义配置被合并，从而允许您修改默认webpack配置。</p><p id="6747" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">要添加定制的webpack配置，我们需要编辑(或者创建文件，如果它不存在于我们的项目的根目录中)<code class="fe nj nk nl lx b">gatsby-node.js</code>并将新的配置添加到其中。</p><h2 id="21d1" class="mb mc it bd kz nm nn dn ms no np dp mw lj nq nr my ln ns nt na lr nu nv nc nw bi translated">配置</h2><pre class="kj kk kl km gt lw lx ly lz aw ma bi"><span id="f6ab" class="mb mc it lx b gy md me l mf mg">const path = require("path");<br/>exports.onCreateWebpackConfig = ({ actions }) =&gt; {<br/>  actions.setWebpackConfig({<br/>    resolve: {<br/>      alias: {<br/>        "@components": path.resolve(__dirname, "src/components"),<br/>        "@static": path.resolve(__dirname, "static")<br/>      }<br/>    }<br/>  });<br/>}</span></pre><p id="207d" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">正如我们在上面的代码片段中看到的，actions对象给我们提供了使用<code class="fe nj nk nl lx b">setWebpackConfig</code>的选项，它获取我们的自定义webpack配置并将其合并到Gatsby的webpack配置中。</p><p id="0991" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">为了添加新的别名，我们将使用webpack的<a class="ae ky" href="https://webpack.js.org/configuration/resolve/#resolve-alias" rel="noopener ugc nofollow" target="_blank">解析别名</a>，这将允许我们在组件内部使用新创建的导入别名。</p><p id="6876" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">如下所示，添加新别名后的最终结果如下所示</p><pre class="kj kk kl km gt lw lx ly lz aw ma bi"><span id="270f" class="mb mc it lx b gy md me l mf mg">import Layout from '@components/Layout';</span></pre></div><div class="ab cl mh mi hx mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="im in io ip iq"><h1 id="6707" class="mo mc it bd kz mp mq mr ms mt mu mv mw jz mx ka my kc mz kd na kf nb kg nc nd bi translated">解析ESlint导入</h1><p id="76ed" class="pw-post-body-paragraph la lb it lc b ld ne ju lf lg nf jx li lj ng ll lm ln nh lp lq lr ni lt lu lv im bi translated">现在，我们已经完成了webpack配置的添加，我们会注意到ESLint正在抱怨这些导入，说它不能为它们解析路径，并且错误会说类似的话。</p><pre class="kj kk kl km gt lw lx ly lz aw ma bi"><span id="3532" class="mb mc it lx b gy md me l mf mg">// Unable to resolve path to module '@components/Layout'. [import/no-unresolved]<br/>import Layout from '@components/Layout';</span></pre><p id="8434" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated">为了解决这个问题，我们需要安装一个插件并更新<code class="fe nj nk nl lx b">.eslintrc</code>配置。</p><h2 id="87ce" class="mb mc it bd kz nm nn dn ms no np dp mw lj nq nr my ln ns nt na lr nu nv nc nw bi translated">装置</h2><pre class="kj kk kl km gt lw lx ly lz aw ma bi"><span id="fc74" class="mb mc it lx b gy md me l mf mg">npm i -D eslint-import-resolver-alias</span></pre><h2 id="0a88" class="mb mc it bd kz nm nn dn ms no np dp mw lj nq nr my ln ns nt na lr nu nv nc nw bi translated">配置</h2><p id="ac33" class="pw-post-body-paragraph la lb it lc b ld ne ju lf lg nf jx li lj ng ll lm ln nh lp lq lr ni lt lu lv im bi translated">我们需要将以下内容添加到我们的eslint文件中</p><pre class="kj kk kl km gt lw lx ly lz aw ma bi"><span id="a99c" class="mb mc it lx b gy md me l mf mg">{<br/>  "settings": {<br/>    "import/resolver": {<br/>      "alias": [<br/>        ["@components", "./src/components"]<br/>      ]<br/>    }<br/>  }<br/>}</span></pre><p id="5e06" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated"><code class="fe nj nk nl lx b">alias</code>属性接受一组数组作为它的值，每个数组代表别名和路径。</p><h1 id="dd55" class="mo mc it bd kz mp nx mr ms mt ny mv mw jz nz ka my kc oa kd na kf ob kg nc nd bi translated">向VScode添加导入自动完成功能(可选)</h1><p id="b773" class="pw-post-body-paragraph la lb it lc b ld ne ju lf lg nf jx li lj ng ll lm ln nh lp lq lr ni lt lu lv im bi translated">最后，为了让VScode知道这些别名，以便在输入导入时继续提供自动完成功能，我们需要在<code class="fe nj nk nl lx b">jsconfig.json</code>中添加别名。</p><pre class="kj kk kl km gt lw lx ly lz aw ma bi"><span id="3642" class="mb mc it lx b gy md me l mf mg">{<br/>  "compilerOptions": {<br/>    "baseUrl": ".",<br/>    "paths": {<br/>      "@components": [<br/>        "src/components"<br/>      ],<br/>    }<br/>  }<br/>}</span></pre><p id="83de" class="pw-post-body-paragraph la lb it lc b ld le ju lf lg lh jx li lj lk ll lm ln lo lp lq lr ls lt lu lv im bi translated"><code class="fe nj nk nl lx b">paths</code>对象接受in key作为别名导入名称，其值是导入路径的数组。</p><h1 id="0fbd" class="mo mc it bd kz mp nx mr ms mt ny mv mw jz nz ka my kc oa kd na kf ob kg nc nd bi translated">结论</h1><p id="64a2" class="pw-post-body-paragraph la lb it lc b ld ne ju lf lg nf jx li lj ng ll lm ln nh lp lq lr ni lt lu lv im bi translated">这包含了向我们的Gatsby项目添加导入别名的指南。</p></div></div>    
</body>
</html>