<html>
<head>
<title>How to Make YouTube Links Show Up As A Thumbnail on Medium with JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用JavaScript让YouTube链接在媒体上显示为缩略图</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-make-youtube-links-show-up-as-a-thumbnail-on-medium-with-javascript-1b6c966a4bca?source=collection_archive---------17-----------------------#2022-12-09">https://levelup.gitconnected.com/how-to-make-youtube-links-show-up-as-a-thumbnail-on-medium-with-javascript-1b6c966a4bca?source=collection_archive---------17-----------------------#2022-12-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="fc6f" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">一个快速简单的功能，确保所有链接显示为缩略图！</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/c194c0b9c86da4ebc6f3f8e76b3a031e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eEy1xnLoguNNCcMVOYFYrA.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@eyestetix?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Eyestetix工作室</a>在<a class="ae ky" href="https://unsplash.com/s/photos/YouTube?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</figcaption></figure><p id="23a8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我最近在写一篇关于各种冥想的博客文章，当我意识到我保存在手机上的Notes应用程序中的所有链接都不会出现在我的文章中时，我在过去几年里真的喜欢上了这篇文章。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lv"><img src="../Images/64b652f612a6dee1d82dbb9f31a7326f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7j5ATmx_AL6BIkB3ZqDkrA.png"/></div></div></figure><p id="53c6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">通常，当我在一个链接后按回车键时，如果缩略图可用，它会在几秒钟内出现。但出于某种原因，这些链接只显示为链接本身——没有缩略图格式。</p><p id="f9d0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我注意到的是，如果我将帖子中的链接复制/粘贴到我笔记本电脑的浏览器中，链接会发生变化。现在，在将浏览器中的新链接复制/粘贴到我的博客文章中后，缩略图几乎会在点击Enter后立即出现。</p><p id="63d1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我决定在我的控制台中创建一个函数来处理转换，而不是为我的所有链接(我有超过30个链接)做整个复制/粘贴。现在你也可以用它了！</p><p id="ad4c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">下面是您将用来转换链接的函数。</p><pre class="kj kk kl km gt mb ma mc bn md me bi"><span id="b3ea" class="mf mg it ma b be mh mi l mj mk">const convertLinks = (links) =&gt; {<br/>  var finalLinks = ""<br/>  var thumbFormat = "https://www.youtube.com/watch?app=desktop&amp;v="<br/>    links.forEach(link=&gt;{<br/>      var hash = link.split(/v\=/)[1]  <br/>      finalLinks += thumbFormat + hash + "\n"   <br/>    })<br/>  console.log(finalLinks);<br/>}</span></pre><p id="4a1a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们来分解一下。首先，该函数将接受一个字符串数组——这些字符串将是您已经拥有的URL。</p><p id="0b8b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">接下来，我们遍历提供的链接数组，分离出视频哈希(在<code class="fe lx ly lz ma b">v=</code>之后)。我们可以通过使用<code class="fe lx ly lz ma b">split</code>方法来分离散列。因为<code class="fe lx ly lz ma b">=</code>是一个保留字符，为了在我们的regex语句中使用它，我们必须在它前面添加一个反斜杠。</p><p id="ee2c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">之后，我们构建新的链接，它将在我们的媒体文章中显示缩略图。我们通过将<code class="fe lx ly lz ma b">hash</code>附加到<code class="fe lx ly lz ma b">thumbFormat</code>来实现这一点。为了方便用户，我在末尾添加了一个换行符(<code class="fe lx ly lz ma b">\n</code>)。这样，当我们执行函数的最后一部分时，每个新链接将出现在字符串中它自己的行上。</p><p id="25a4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">函数的最后一部分只是为了<code class="fe lx ly lz ma b">console.log</code>结果。让我们看看它的实际效果吧！首先，声明一个链接数组变量。</p><pre class="kj kk kl km gt mb ma mc bn md me bi"><span id="3e2c" class="mf mg it ma b be mh mi l mj mk">var myLinks = [<br/>  "https://m.youtube.com/watch?v=hwtRJEtJbZ0", <br/>  "https://m.youtube.com/watch?v=y6mPFlPV1IE", <br/>  "https://m.youtube.com/watch?v=lBGtFICU3Rg", <br/>  "https://www.youtube.com/watch?app=desktop&amp;v=kC6so_Z5mGg"<br/>]<br/><br/>// the last one is a test to ensure the function <br/>// works with different link formats</span></pre><p id="7aaf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">将上述变量复制/粘贴到您的控制台中。完成后，在你的控制台中复制粘贴<code class="fe lx ly lz ma b">convertLinks</code>功能。一旦你完成了，复制粘贴下面一行。</p><pre class="kj kk kl km gt mb ma mc bn md me bi"><span id="920b" class="mf mg it ma b be mh mi l mj mk">convertLink(myLinks)</span></pre><p id="4a25" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">您应该会看到下面的结果。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ml"><img src="../Images/862a944adaf59c93e92e63a63334a646.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lYV98aVLPZenHneHx5_Rxg.png"/></div></div></figure><p id="c4ad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，如果你复制所有的链接并粘贴到你的文章中，然后点击回车，你会看到缩略图出现在你的文章中。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/fa2e7162331a8de7b3abb6d8de774e2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/0*O1XEEnXWTv1olFRq"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">抱歉，闷闷不乐</figcaption></figure><h2 id="85a8" class="mn mg it bd mo mp mq dn mr ms mt dp mu li mv mw mx lm my mz na lq nb nc nd ne bi translated">奖金</h2><p id="e5aa" class="pw-post-body-paragraph kz la it lb b lc nf ju le lf ng jx lh li nh lk ll lm ni lo lp lq nj ls lt lu im bi translated">你可能已经注意到了最后一个警告。看看这篇文章第一张图中的链接。最后一个，里面没有<code class="fe lx ly lz ma b">v=</code>。它也有不同的域名。见下面两个网址对比。</p><pre class="kj kk kl km gt mb ma mc bn md me bi"><span id="0a5b" class="mf mg it ma b be mh mi l mj mk">// First link in myLinks<br/>"https://m.youtube.com/watch?v=hwtRJEtJbZ0"<br/><br/>// Last link in first picture<br/>"https://youtu.be/3YuOMmxbc9M"</span></pre><p id="172d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们如何在我们的函数中考虑像第二个这样的链接呢？我们可以做两个独立的<code class="fe lx ly lz ma b">split</code>语句，如下所示。</p><pre class="kj kk kl km gt mb ma mc bn md me bi"><span id="d5dd" class="mf mg it ma b be mh mi l mj mk">var hash = link.split(/v\=/)[1] ?? link.split(/youtu.be\//)[1]</span></pre><p id="cdcb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">或者，我们实际上可以在我们的<em class="lw">原始正则表达式</em>中包含<strong class="lb iu">两个条件</strong>。见下文。</p><pre class="kj kk kl km gt mb ma mc bn md me bi"><span id="d907" class="mf mg it ma b be mh mi l mj mk">var hash = link.split(/v\=|youtu.be\//)[1]</span></pre><p id="4749" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我喜欢第二个，因为它更简洁一些。将它添加到您的函数中。</p><pre class="kj kk kl km gt mb ma mc bn md me bi"><span id="271f" class="mf mg it ma b be mh mi l mj mk">const convertLinks = (links) =&gt; {<br/>  var finalLinks = ""<br/>  var thumbFormat = "https://www.youtube.com/watch?app=desktop&amp;v="<br/>    links.forEach(link=&gt;{<br/>      var hash = link.split(/v\=|youtu.be\//)[1]  // added it here<br/>      finalLinks += thumbFormat + hash + "\n"   <br/>    })<br/>  console.log(finalLinks);<br/>}</span></pre><p id="4d6e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在更新您的<code class="fe lx ly lz ma b">myLinks</code>值，以包含一个新格式的链接。</p><pre class="kj kk kl km gt mb ma mc bn md me bi"><span id="5a4d" class="mf mg it ma b be mh mi l mj mk">var myLinks = [<br/>  "https://m.youtube.com/watch?v=hwtRJEtJbZ0", <br/>  "https://m.youtube.com/watch?v=y6mPFlPV1IE", <br/>  "https://m.youtube.com/watch?v=lBGtFICU3Rg", <br/>  "https://www.youtube.com/watch?app=desktop&amp;v=kC6so_Z5mGg",<br/>  "https://youtu.be/3YuOMmxbc9M"<br/>]</span></pre><p id="ab7b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，在您的控制台上测试一下吧！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/9c7ae8248d29cf518ab6fe8ad31bbaaf.png" data-original-src="https://miro.medium.com/v2/resize:fit:824/format:webp/1*cgF0P3KSWNSA8khKSlvFKw.png"/></div></figure><p id="fab0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">维奥拉。你的功能现在可以处理一些不同种类的链接，你现在应该只能看到缩略图了！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/f89bc8a7862c0768ab16001e0cb36957.png" data-original-src="https://miro.medium.com/v2/resize:fit:1080/0*K6vYoY2CMfc6OEEo"/></div></figure></div><div class="ab cl nm nn hx no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="im in io ip iq"><p id="a778" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你知道为什么原始链接不能显示缩略图吗？你现在了解YouTube视频网址吗？请在评论中告诉我！</p><p id="9503" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://matt-croak.medium.com/membership" rel="noopener"> <strong class="lb iu"> <em class="lw">升级您的免费Medium会员资格</em> </strong> </a> <em class="lw">并接收各种出版物上数千名作家的无限量、无广告的故事。这是一个附属链接，你的会员资格的一部分帮助我为我创造的内容获得奖励。</em></p><p id="e74c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><em class="lw">您也可以通过电子邮件</em>   <em class="lw">订阅，每当我发布新内容时，您都会收到通知！</em></p></div></div>    
</body>
</html>