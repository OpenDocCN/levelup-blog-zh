<html>
<head>
<title>FastAPI Fundamentals — Getting Faster with FastAPI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">FastAPI基础——利用FastAPI提高速度</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/fastapi-fundamentals-getting-faster-with-fastapi-866545b841ca?source=collection_archive---------0-----------------------#2022-09-21">https://levelup.gitconnected.com/fastapi-fundamentals-getting-faster-with-fastapi-866545b841ca?source=collection_archive---------0-----------------------#2022-09-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/1d9f63a1d0109ab759d37530a55a8b18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*du7p50wS_fIsaC_lR18qsg.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><a class="ae kc" href="https://fastapi.tiangolo.com/" rel="noopener ugc nofollow" target="_blank">https://fastapi.tiangolo.com/</a></figcaption></figure><p id="628e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">FastAPI是一个现代、快速(高性能)的web框架，用于使用Python 3.7+基于标准Python类型提示构建API。</p><h2 id="a792" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">什么是API？</h2><figure class="lu lv lw lx gt jr"><div class="bz fp l di"><div class="ly lz l"/></div></figure><p id="f558" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">API是<strong class="kf ir">应用编程接口</strong>的首字母缩写，它是一个软件中介，允许两个应用程序相互对话。</p><p id="73e7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在API的上下文中，接口可以被认为是两个应用程序之间的服务契约。该契约定义了两者如何使用请求和响应相互通信，这些响应消息可以是任何支持的格式，如XML、JSON、CSV等。</p><p id="126e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">想象一下，你和你的搭档去一家餐馆吃饭，你想点菜。你会怎么做？打电话给服务员，下订单。现在，后端会发生什么？服务员去找厨师，告诉他点的菜的细节。当菜准备好了，他把它们带给你。这就是API通常的工作方式。API允许客户端访问后端或服务器的特定资源。</p><figure class="lu lv lw lx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ma"><img src="../Images/f0cba69310537bf446c401e85b304e25.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qTKTKMFz37Y8ODRkTsd6EQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">信用:【https://www.analyticsvidhya.com/】T4</figcaption></figure><h1 id="197b" class="mb lc iq bd ld mc md me lg mf mg mh lj mi mj mk lm ml mm mn lp mo mp mq ls mr bi translated"><strong class="ak">为什么选择FastAPI？</strong></h1><p id="5d17" class="pw-post-body-paragraph kd ke iq kf b kg ms ki kj kk mt km kn ko mu kq kr ks mv ku kv kw mw ky kz la ij bi translated">我不会告诉你我们崇拜FastAPI的原因是因为它是👇</p><ul class=""><li id="a035" class="mx my iq kf b kg kh kk kl ko mz ks na kw nb la nc nd ne nf bi translated"><strong class="kf ir">快</strong></li><li id="6016" class="mx my iq kf b kg ng kk nh ko ni ks nj kw nk la nc nd ne nf bi translated"><strong class="kf ir">快速去码</strong></li><li id="e100" class="mx my iq kf b kg ng kk nh ko ni ks nj kw nk la nc nd ne nf bi translated"><strong class="kf ir">更少的bug</strong></li><li id="b82a" class="mx my iq kf b kg ng kk nh ko ni ks nj kw nk la nc nd ne nf bi translated"><strong class="kf ir">直观</strong></li><li id="7bb7" class="mx my iq kf b kg ng kk nh ko ni ks nj kw nk la nc nd ne nf bi translated"><strong class="kf ir">简单</strong></li><li id="0edd" class="mx my iq kf b kg ng kk nh ko ni ks nj kw nk la nc nd ne nf bi translated"><strong class="kf ir">短</strong></li><li id="eb5b" class="mx my iq kf b kg ng kk nh ko ni ks nj kw nk la nc nd ne nf bi translated"><strong class="kf ir">健壮</strong></li><li id="ec2a" class="mx my iq kf b kg ng kk nh ko ni ks nj kw nk la nc nd ne nf bi translated"><strong class="kf ir">基于标准的</strong></li></ul><p id="2ce0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你已经知道了，这就是为什么你在读这篇文章📜对吗？？</p><h1 id="585d" class="mb lc iq bd ld mc md me lg mf mg mh lj mi mj mk lm ml mm mn lp mo mp mq ls mr bi translated">怎么安装？</h1><figure class="lu lv lw lx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nl"><img src="../Images/3a6236fca424e9a7d0aaa02714c009e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3FhQCKhNExg81-PIjEgiaQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><strong class="bd ld">通过pip安装</strong></figcaption></figure><p id="5eb4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Uvicorn是Python的一个<strong class="kf ir"> ASGI </strong> ( <em class="nm">异步服务器网关接口</em> ) web服务器实现。ASGI是WSGI的精神继承者，旨在提供支持异步的Python web服务器、框架和应用程序之间的标准接口。</p><h1 id="d18e" class="mb lc iq bd ld mc md me lg mf mg mh lj mi mj mk lm ml mm mn lp mo mp mq ls mr bi translated">让我们创建一个基本的fastAPI🚀</h1><p id="92e1" class="pw-post-body-paragraph kd ke iq kf b kg ms ki kj kk mt km kn ko mu kq kr ks mv ku kv kw mw ky kz la ij bi translated">创建一个基本的python脚本，我们将其命名为<em class="nm"> main.py. </em>在这个脚本中，我们将导入fastAPI并创建一个函数，当通过端点调用时，该函数将返回“Hello World”。这将确保我们已经成功安装了fastAPI，并且它已经开始运行了&amp;—<strong class="kf ir">【Hello World】</strong>的通用目标😁</p><figure class="lu lv lw lx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nn"><img src="../Images/4c6cf6bc3177ebdb61c12cfccc608eb3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qkAoqTK0iG_OdvX3MPdFsw.png"/></div></div></figure><p id="7087" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在为了运行服务器，我们需要在终端中以下面的语法运行uvicorn。</p><pre class="lu lv lw lx gt no np nq nr aw ns bi"><span id="db82" class="lb lc iq np b gy nt nu l nv nw"><strong class="np ir">uvicorn main:app — reload</strong></span></pre><p id="5b6c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">"<strong class="kf ir"> main </strong> " →是模块/脚本名即main.py(我们不用写。这里的py扩展)&amp; " <strong class="kf ir"> app </strong> " →是我们在上面的代码片段中创建的类<em class="nm"> FastAPI </em>的实例变量。</p><figure class="lu lv lw lx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nx"><img src="../Images/4376a8d1bfdeabd102ce66f371a07b51.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q_vrVWWv80VhYCx6hTUyNg.png"/></div></div></figure><pre class="lu lv lw lx gt no np nq nr aw ns bi"><span id="929e" class="lb lc iq np b gy nt nu l nv nw"><a class="ae kc" href="http://127.0.0.1:8000/" rel="noopener ugc nofollow" target="_blank">http://127.0.0.1:8000/</a> 👈running this in a browser( local machine ) will fetch the response of the above API.</span></pre><figure class="lu lv lw lx gt jr gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/af0ae95a9e1fe6f7469a747c7a5f89ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1190/format:webp/1*nJHa9wet-jghEi8hEwgoSw.png"/></div></figure><p id="56cf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">FastAPI提供了一个叫做Swagger UI的交互式API文档。对于运行Swagger UI在浏览器中运行→<a class="ae kc" href="http://127.0.0.1:8000/docs" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir">http://127 . 0 . 0 . 1:8000/docs</strong></a><strong class="kf ir"/>。您将看到自动交互API文档。</p><figure class="lu lv lw lx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nz"><img src="../Images/010607881efda7d83dbdb8833bbb66ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ApKxzLfAGIUX-W-T_y5fiw.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><strong class="bd ld">霸气UI </strong></figcaption></figure><p id="2502" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以我们的API返回了正确的消息✅，但是等一下，这里刚刚发生了什么⁉️⁉️</p><figure class="lu lv lw lx gt jr"><div class="bz fp l di"><div class="oa lz l"/></div></figure></div><div class="ab cl ob oc hu od" role="separator"><span class="oe bw bk of og oh"/><span class="oe bw bk of og oh"/><span class="oe bw bk of og"/></div><div class="ij ik il im in"><h1 id="802f" class="mb lc iq bd ld mc oi me lg mf oj mh lj mi ok mk lm ml ol mn lp mo om mq ls mr bi translated"><strong class="ak">了解路径操作</strong></h1><h1 id="bbc5" class="mb lc iq bd ld mc md me lg mf mg mh lj mi mj mk lm ml mm mn lp mo mp mq ls mr bi translated">什么是路径？</h1><p id="9073" class="pw-post-body-paragraph kd ke iq kf b kg ms ki kj kk mt km kn ko mu kq kr ks mv ku kv kw mw ky kz la ij bi translated">此url的最后一部分👉<a class="ae kc" href="http://127.0.0.1:8000/" rel="noopener ugc nofollow" target="_blank">http://127 . 0 . 0 . 1:8000/</a>8000后开始的。所以这里的<strong class="kf ir">“/”</strong>也是一条路径。也被称为<strong class="kf ir">端点/路由/api </strong>。</p><h1 id="fcb5" class="mb lc iq bd ld mc md me lg mf mg mh lj mi mj mk lm ml mm mn lp mo mp mq ls mr bi translated">什么是手术？</h1><p id="7b8f" class="pw-post-body-paragraph kd ke iq kf b kg ms ki kj kk mt km kn ko mu kq kr ks mv ku kv kw mw ky kz la ij bi translated">操作参考<a class="ae kc" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods" rel="noopener ugc nofollow" target="_blank"> HTTP方法</a>。有很多方法，但最常用的HTTP方法如下:</p><pre class="lu lv lw lx gt no np nq nr aw ns bi"><span id="0c32" class="lb lc iq np b gy nt nu l nv nw"><strong class="np ir">POST : </strong>Create data.</span><span id="cd52" class="lb lc iq np b gy on nu l nv nw"><strong class="np ir">GET : </strong>Retrieve/Read data.</span><span id="e0e6" class="lb lc iq np b gy on nu l nv nw"><strong class="np ir">PUT : </strong>Update the data.</span><span id="a771" class="lb lc iq np b gy on nu l nv nw"><strong class="np ir">DELETE : </strong>Delete data.</span></pre><p id="1342" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这些操作组合在一起称为<strong class="kf ir"> <em class="nm"> CRUD </em> </strong>操作。</p><p id="4141" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">回到我们的应用程序。“<strong class="kf ir"><em class="nm">@ app . get('/')”</em></strong>decorator<strong class="kf ir"><em class="nm"/></strong>给出了<strong class="kf ir"> FastAPI </strong>两条信息。1.这是一个<strong class="kf ir"> <em class="nm">得到</em> </strong>的操作。2.路径参数为<strong class="kf ir"><em class="nm">“/”。</em> </strong>一个<strong class="kf ir"> <em class="nm">装饰器</em> </strong>总是被定义在一个函数之上，它接受这个函数并对它做一些事情。这里，每当<strong class="kf ir"> FastAPI </strong>使用GET操作接收到对URL<strong class="kf ir"><em class="nm">"/</em></strong>的请求时，函数<strong class="kf ir"> <em class="nm"> base </em> </strong>将被调用。</p></div><div class="ab cl ob oc hu od" role="separator"><span class="oe bw bk of og oh"/><span class="oe bw bk of og oh"/><span class="oe bw bk of og"/></div><div class="ij ik il im in"><p id="1008" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我们知道了如何创建端点/路径以及如何在任何函数上修饰它，让我们探索一些使用GET &amp; POST方法的例子。</p><h1 id="cd6c" class="mb lc iq bd ld mc md me lg mf mg mh lj mi mj mk lm ml mm mn lp mo mp mq ls mr bi translated">路径参数</h1><p id="b389" class="pw-post-body-paragraph kd ke iq kf b kg ms ki kj kk mt km kn ko mu kq kr ks mv ku kv kw mw ky kz la ij bi translated">路径参数是我们通过路径/端点传递的参数/变量/值。我们需要在<strong class="kf ir"> <em class="nm"> {} </em> </strong>中声明参数，同样的变量需要在函数中声明为参数。所以端点/路径上的变量将作为参数传递给函数。</p><p id="690a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">FastAPI集成了Pydantic，因此我们可以获得使用Python类型注释进行类型验证的所有好处。我们只需要定义类型，不需要担心后台的数据验证。</p><p id="ba81" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们创建一些端点/API，并查看响应来证明上述陈述。</p><figure class="lu lv lw lx gt jr"><div class="bz fp l di"><div class="oo lz l"/></div></figure><p id="8b58" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">例1: </strong></p><figure class="lu lv lw lx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi op"><img src="../Images/a81f89ebff9e3634b1332700c86d832c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J8cuybuMg-MrioF76CN3oA.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><strong class="bd ld"> API文档— Swagger UI </strong></figcaption></figure><figure class="lu lv lw lx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oq"><img src="../Images/3d75571ba27fc59ae0dcc9a24ae9fdd5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_St2h1osuXxNCajaKcvH0w.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><strong class="bd ld">请求URL &amp;响应正文</strong></figcaption></figure><p id="66e7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">注意到了什么👆尽管我们将1234作为路径参数传递，但它被解析为一个字符串，当我们在python脚本中接受输入时会发生什么呢？是的，我们在这里面临着同样的问题。但是在这里，它们是URL的一部分，它们是“自然”的字符串。如果我们传递一个float或date对象会发生什么？好奇？？自己测试一下——这是唯一的学习方法！！！</p><p id="5167" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在让我们看看第二个例子，我们已经处理了类型👇。</p><p id="39c2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">例2: </strong></p><figure class="lu lv lw lx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi or"><img src="../Images/700929f34a0bc0ba2db74ce8195ed8a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3dhSQ3B4eAdOwAu2Qx_2Rw.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><strong class="bd ld"> API文档— Swagger UI </strong></figcaption></figure><figure class="lu lv lw lx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi os"><img src="../Images/4d2dbf1d5c75cf2d9d5b8c9604a584dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aV2yQVBQU9FUaeYBsKG3lQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><strong class="bd ld">请求URL &amp;响应正文</strong></figcaption></figure><p id="5409" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">结果在意料之中🌟。这是因为当我们声明数据类型时，首先将它们转换成该类型，然后根据它进行验证。但是如果我们传递除了int以外的任何值，会发生什么呢？我们去看看。</p><figure class="lu lv lw lx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ot"><img src="../Images/638dd84ff3079b7511c062affbf78808.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MFHOTk-YluQRJVTy2bMHLw.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><strong class="bd ld">当通过一个浮动时</strong></figcaption></figure><figure class="lu lv lw lx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ou"><img src="../Images/b15fb513b6054cdff972789d75dceb26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R00IgLZhdZ60cuiToDLkZQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><strong class="bd ld">当传递了一个字符串</strong></figcaption></figure><h1 id="ffac" class="mb lc iq bd ld mc md me lg mf mg mh lj mi mj mk lm ml mm mn lp mo mp mq ls mr bi translated">查询参数</h1><p id="b1f7" class="pw-post-body-paragraph kd ke iq kf b kg ms ki kj kk mt km kn ko mu kq kr ks mv ku kv kw mw ky kz la ij bi translated">你有没有在搜索引擎上输入一个地址，结果却是它返回一个又长又复杂的带有等号和问号的东西？</p><p id="03fd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">查询参数可以定义为出现在<strong class="kf ir">"？"之后的可选键-值对</strong>在URL中由<strong class="kf ir">、&amp;、</strong>字符分隔。</p><p id="21d9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">问号符号用于分隔路径和查询参数。</p><h2 id="1edf" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">路径和查询参数之间的区别？</h2><ol class=""><li id="feb0" class="mx my iq kf b kg ms kk mt ko ov ks ow kw ox la oy nd ne nf bi translated">路径参数出现在<strong class="kf ir">"？"</strong>在URL中，而查询参数跟在它后面。</li><li id="9aeb" class="mx my iq kf b kg ng kk nh ko ni ks nj kw nk la oy nd ne nf bi translated">路径参数标识特定的资源，而查询参数用于排序/过滤资源。</li><li id="0ac1" class="mx my iq kf b kg ng kk nh ko ni ks nj kw nk la oy nd ne nf bi translated">您不能省略路径参数中的值，但在查询中可以。</li></ol><figure class="lu lv lw lx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oz"><img src="../Images/3eb7b854db9a2fbe9b4cd7c00bf80165.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2Nb9OivcgEDuCTRGunLGgg.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><strong class="bd ld">查询参数示例</strong></figcaption></figure><p id="e64e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们已经定义了两个端点一个<strong class="kf ir"> "/add" </strong>，它需要两个查询参数x &amp; y，我们已经使用类型注释处理了类型，另一个是<strong class="kf ir"> "/multiply" </strong>，它也是一样的，除了它有一个默认值，我们也可以使用None定义一些可选参数，但是我们将在<strong class="kf ir"> POST </strong>方法中介绍。</p><p id="221b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我们用Python类型声明参数时，它们被转换成该类型并根据该类型进行验证。</p><p id="ed68" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们在<a class="ae kc" href="https://www.thunderclient.com/" rel="noopener ugc nofollow" target="_blank">迅雷客户端</a>中测试一下。</p><figure class="lu lv lw lx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi pa"><img src="../Images/650f70f8c648e064cd96ae0fd375ad18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WlrO14JmuHZ0BccEOYoFqw.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><strong class="bd ld">带类型验证的查询</strong></figcaption></figure><p id="5a1c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">“/add”的网址为:<a class="ae kc" href="http://127.0.0.1:8000/add?x=4&amp;y=6" rel="noopener ugc nofollow" target="_blank"> http://127.0.0.1:8000/add？x=4 &amp; y=6 </a></p><figure class="lu lv lw lx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi pb"><img src="../Images/9a9ebfa418e1448e75c4d7dad6c22bae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K02vBoKms5sID6HWkdbGTg.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><strong class="bd ld">用默认值查询</strong></figcaption></figure><p id="a7ad" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">“/multiply”的URL是:<a class="ae kc" href="http://127.0.0.1:8000/multiply" rel="noopener ugc nofollow" target="_blank">http://127 . 0 . 0 . 1:8000/multiply</a>，这里的URL是不同的，没有“？”或“&amp;”符号，这要归功于默认值，当不通过任何查询时使用默认值，如果我们提供一个，它会覆盖默认值。请参见下面的查询</p><figure class="lu lv lw lx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi pc"><img src="../Images/36a2f3cf6d5c8e209838db77b709a713.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aY_6OP_E504gBLWfKLcG1Q.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><strong class="bd ld">覆盖默认值</strong></figcaption></figure><h1 id="4228" class="mb lc iq bd ld mc md me lg mf mg mh lj mi mj mk lm ml mm mn lp mo mp mq ls mr bi translated">请求正文</h1><p id="9908" class="pw-post-body-paragraph kd ke iq kf b kg ms ki kj kk mt km kn ko mu kq kr ks mv ku kv kw mw ky kz la ij bi translated">响应的反面是一个请求，其中客户端需要通过API向服务器端发送数据。为了发送数据，我们通常使用POST方法。同样为了数据验证，我们使用pydantic的<em class="nm">基本模型</em>。使用<strong class="kf ir"> <em class="nm"> BaseModel </em> </strong>我们定义一个类/模型，并声明所有需要的数据/字段及其类型。如果一些值被初始化，则不需要，否则需要&amp;我们可以通过使用<em class="nm"> None使一个值可选。</em>点击阅读更多关于Pydantic <a class="ae kc" href="https://pydantic-docs.helpmanual.io/" rel="noopener ugc nofollow" target="_blank">的信息。</a></p><figure class="lu lv lw lx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nn"><img src="../Images/566b86ca166153d5a34c23ccd4c02f71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2mHGRZXwKcSV2Y2TYqq_zA.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><strong class="bd ld">使用基本模型的模型类</strong></figcaption></figure><p id="da29" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这里👆：</p><ol class=""><li id="16ae" class="mx my iq kf b kg kh kk kl ko mz ks na kw nb la oy nd ne nf bi translated">user_id是必需的，并且必须是整数数据类型。</li><li id="a2e6" class="mx my iq kf b kg ng kk nh ko ni ks nj kw nk la oy nd ne nf bi translated">user_age是一个可选值，如果传递需要一个整数。</li><li id="35db" class="mx my iq kf b kg ng kk nh ko ni ks nj kw nk la oy nd ne nf bi translated">user_name是必需的，并且必须是字符串数据类型。</li><li id="eed7" class="mx my iq kf b kg ng kk nh ko ni ks nj kw nk la oy nd ne nf bi translated">user_nick_name是必需的&amp;传递时需要是一个字符串，如果没有传递任何内容，则它的默认值为‘Oreo’。</li></ol><p id="8e64" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">默认值的类型自动设置字段的类型。</p><figure class="lu lv lw lx gt jr gh gi paragraph-image"><div class="gh gi pd"><img src="../Images/beb9b6eca677f50eb0d616d386610224.png" data-original-src="https://miro.medium.com/v2/resize:fit:1148/format:webp/1*3j-vuMljaXhxjqv1tXw6cw.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><strong class="bd ld"> JSON模式</strong></figcaption></figure><p id="5db5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">首先，我们将通过所有字段。</p><figure class="lu lv lw lx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi pe"><img src="../Images/4830dc6dd5b8f0da816d95bdd62e75f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*trIdchITKuYxsd9adjBkDg.png"/></div></div></figure><p id="de11" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的例子中，只有user_age是可选的，所以让我们发送一个请求，丢弃可选值。</p><figure class="lu lv lw lx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi pf"><img src="../Images/9205dc8328b3b5e6ebd27d77c5a306db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W5lBAGxcMXbi0ATopqs7GA.png"/></div></div></figure><p id="4306" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以，这几乎是你开始使用FastAPI所需要知道的所有基础知识。我希望你喜欢这篇文章。另一个话题再见👋</p><figure class="lu lv lw lx gt jr"><div class="bz fp l di"><div class="pg lz l"/></div></figure><h2 id="1952" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">感谢阅读🙏继续学习🧠保持敬畏🤘</h2></div></div>    
</body>
</html>