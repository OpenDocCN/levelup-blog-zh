<html>
<head>
<title>Hacks on Bitwise Programming</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">按位编程技巧</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/hacks-on-bitwise-programming-bc8100545c8e?source=collection_archive---------9-----------------------#2021-07-19">https://levelup.gitconnected.com/hacks-on-bitwise-programming-bc8100545c8e?source=collection_archive---------9-----------------------#2021-07-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="c2a0" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">思维程序员</h2><div class=""/><div class=""><h2 id="1ae1" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">JavaScript中的事实和技巧</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/0567a470f2c7f645d1c9027a550327b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*B6Kgia1ejSAP-Uok"/></div></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">谢尔盖·佐尔金在<a class="ae lh" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="2f74" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">在编程中，我们可以有效地使用位。首先，让我们看看每个位操作的定义，然后转移到解决问题的不同技术上。基本上，每种语言都支持六种操作符来进行位操作:<code class="fe me mf mg mh b">&amp;</code> (AND)、<code class="fe me mf mg mh b">|</code> (OR)、<code class="fe me mf mg mh b">^</code> (XOR)、<code class="fe me mf mg mh b">&lt;&lt;</code>(左移)、<code class="fe me mf mg mh b">&gt;&gt;</code>(右移)和<code class="fe me mf mg mh b">~</code>(补码)。</p><h1 id="5c8c" class="mi mj it bd mk ml mm mn mo mp mq mr ms ki mt kj mu kl mv km mw ko mx kp my mz bi translated">按位编程的事实</h1><h2 id="c5fd" class="na mj it bd mk nb nc dn mo nd ne dp ms lr nf ng mu lv nh ni mw lz nj nk my iz bi translated">按位AND</h2><p id="e2a9" class="pw-post-body-paragraph li lj it lk b ll nl kd ln lo nm kg lq lr nn lt lu lv no lx ly lz np mb mc md im bi translated">按位AND测试两个二进制数，并在两个数都为1的位置返回位值1，在两个数都不为1的位置返回位值0。</p><pre class="ks kt ku kv gt nq mh nr ns aw nt bi"><span id="b3cc" class="na mj it mh b gy nu nv l nw nx">// a = 10 (in binary)<br/>var a = 2</span><span id="9cc3" class="na mj it mh b gy ny nv l nw nx">// b = 11 (in binary)<br/>var b = 3</span><span id="19f1" class="na mj it mh b gy ny nv l nw nx">// a &amp; b = 10 &amp; 11 = 10 (in binary) = 2 (in decimal)<br/>a &amp; b<br/>&lt;&lt; <strong class="mh jd">2</strong></span></pre><h2 id="46ff" class="na mj it bd mk nb nc dn mo nd ne dp ms lr nf ng mu lv nh ni mw lz nj nk my iz bi translated">按位或</h2><p id="d0ff" class="pw-post-body-paragraph li lj it lk b ll nl kd ln lo nm kg lq lr nn lt lu lv no lx ly lz np mb mc md im bi translated">按位OR测试两个二进制数，并返回位值为1的位置，其中一位或两位都为1，只有当两位都为0时，结果才为0。</p><pre class="ks kt ku kv gt nq mh nr ns aw nt bi"><span id="c240" class="na mj it mh b gy nu nv l nw nx">// a | b = 10 | 11 = 11 (in binary) = 3(in decimal)<br/>a | b<br/>&lt;&lt; <strong class="mh jd">3</strong></span></pre><h2 id="58b1" class="na mj it bd mk nb nc dn mo nd ne dp ms lr nf ng mu lv nh ni mw lz nj nk my iz bi translated">按位异或</h2><p id="3701" class="pw-post-body-paragraph li lj it lk b ll nl kd ln lo nm kg lq lr nn lt lu lv no lx ly lz np mb mc md im bi translated">按位异或测试两个二进制数，并为两位不同的位置返回位值1；如果它们相同，则结果为0。</p><pre class="ks kt ku kv gt nq mh nr ns aw nt bi"><span id="c6b0" class="na mj it mh b gy nu nv l nw nx">// a ^ b = 10 ^ 11 = 01 (in binay) = 1 (in decimal)<br/>a ^ b<br/>&lt;&lt; <strong class="mh jd">1</strong></span></pre><h2 id="cc57" class="na mj it bd mk nb nc dn mo nd ne dp ms lr nf ng mu lv nh ni mw lz nj nk my iz bi translated">按位左移</h2><p id="a080" class="pw-post-body-paragraph li lj it lk b ll nl kd ln lo nm kg lq lr nn lt lu lv no lx ly lz np mb mc md im bi translated">按位左移将数字中的所有位向左移动，并用0(左移)或1(无符号左移)填充空出的位位置。</p><pre class="ks kt ku kv gt nq mh nr ns aw nt bi"><span id="e381" class="na mj it mh b gy nu nv l nw nx">// c = 0101 (in binary)<br/>var c = 5</span><span id="b988" class="na mj it mh b gy ny nv l nw nx">// bitwise left shift: c &lt;&lt; 1 = 1010 (in binary) = 10 (in decimal)<br/>c &lt;&lt; 1<br/>&lt;&lt; <strong class="mh jd">1</strong></span></pre><h2 id="b77d" class="na mj it bd mk nb nc dn mo nd ne dp ms lr nf ng mu lv nh ni mw lz nj nk my iz bi translated">按位右移</h2><p id="e61e" class="pw-post-body-paragraph li lj it lk b ll nl kd ln lo nm kg lq lr nn lt lu lv no lx ly lz np mb mc md im bi translated">按位右移将数字中的所有位向右移动。</p><pre class="ks kt ku kv gt nq mh nr ns aw nt bi"><span id="e17f" class="na mj it mh b gy nu nv l nw nx">// c &gt;&gt; 1 = 010 (in binary) = 2 (in decimal)<br/>c &gt;&gt; 1<br/>&lt;&lt; <strong class="mh jd">2</strong></span></pre><h2 id="08a6" class="na mj it bd mk nb nc dn mo nd ne dp ms lr nf ng mu lv nh ni mw lz nj nk my iz bi translated">逐位补码</h2><p id="e8ff" class="pw-post-body-paragraph li lj it lk b ll nl kd ln lo nm kg lq lr nn lt lu lv no lx ly lz np mb mc md im bi translated">按位补码反转单个二进制数中的位。</p><pre class="ks kt ku kv gt nq mh nr ns aw nt bi"><span id="7eae" class="na mj it mh b gy nu nv l nw nx">// ~c -&gt; 1010 (in binary) -&gt; 10 (in decimal), 2’s compliment of 10 will be -6.<br/>~c<br/>&lt;&lt; <strong class="mh jd">-6</strong></span></pre><h1 id="623d" class="mi mj it bd mk ml mm mn mo mp mq mr ms ki mt kj mu kl mv km mw ko mx kp my mz bi translated">按位编程技巧</h1><h2 id="5c99" class="na mj it bd mk nb nc dn mo nd ne dp ms lr nf ng mu lv nh ni mw lz nj nk my iz bi translated">检查数字是否是2的幂</h2><p id="44fb" class="pw-post-body-paragraph li lj it lk b ll nl kd ln lo nm kg lq lr nn lt lu lv no lx ly lz np mb mc md im bi translated">给定一个数<code class="fe me mf mg mh b">n</code>，要检查这个数是否为<code class="fe me mf mg mh b">2^n</code>形式，我们可以用表达式:<code class="fe me mf mg mh b">if(n &amp; n — 1 == 0)</code>。</p><pre class="ks kt ku kv gt nq mh nr ns aw nt bi"><span id="b6fd" class="na mj it mh b gy nu nv l nw nx">// n = 10000<br/>var n = 16 // 2⁴</span><span id="5bda" class="na mj it mh b gy ny nv l nw nx">// n — 1 = 15 (in decimal) = 01111<br/>// n &amp; (n — 1) = 10000 &amp; 01111 = 0<br/>n &amp; (n — 1)<br/>&lt;&lt; <strong class="mh jd">0</strong></span></pre><h2 id="d643" class="na mj it bd mk nb nc dn mo nd ne dp ms lr nf ng mu lv nh ni mw lz nj nk my iz bi translated">将数字乘以2的幂</h2><p id="040a" class="pw-post-body-paragraph li lj it lk b ll nl kd ln lo nm kg lq lr nn lt lu lv no lx ly lz np mb mc md im bi translated">对于一个给定的数<code class="fe me mf mg mh b">n</code>，用<code class="fe me mf mg mh b">2^k</code>乘以这个数我们可以用表达式:<code class="fe me mf mg mh b">n ≪ k</code> <em class="nz">。</em></p><pre class="ks kt ku kv gt nq mh nr ns aw nt bi"><span id="4913" class="na mj it mh b gy nu nv l nw nx">var n = 16</span><span id="e523" class="na mj it mh b gy ny nv l nw nx">// 16*(2^1) = 32<br/>n &lt;&lt; 1<br/>&lt;&lt; <strong class="mh jd">32</strong></span></pre><h2 id="8fce" class="na mj it bd mk nb nc dn mo nd ne dp ms lr nf ng mu lv nh ni mw lz nj nk my iz bi translated">将数除以2的幂</h2><p id="df44" class="pw-post-body-paragraph li lj it lk b ll nl kd ln lo nm kg lq lr nn lt lu lv no lx ly lz np mb mc md im bi translated">对于一个给定的数<code class="fe me mf mg mh b">n</code>，用<code class="fe me mf mg mh b">2^k</code>除这个数，我们可以用表达式:<code class="fe me mf mg mh b">n ≫ k</code>。</p><pre class="ks kt ku kv gt nq mh nr ns aw nt bi"><span id="b69f" class="na mj it mh b gy nu nv l nw nx">var n = 16</span><span id="a7c0" class="na mj it mh b gy ny nv l nw nx">// 16/(2²) = 4<br/>n &gt;&gt; 2<br/>&lt;&lt; <strong class="mh jd">4</strong></span></pre><h2 id="cabe" class="na mj it bd mk nb nc dn mo nd ne dp ms lr nf ng mu lv nh ni mw lz nj nk my iz bi translated">执行无除法平均</h2><p id="e833" class="pw-post-body-paragraph li lj it lk b ll nl kd ln lo nm kg lq lr nn lt lu lv no lx ly lz np mb mc md im bi translated">有没有一种稍微有点无聊的算法可以用更快的东西来代替<code class="fe me mf mg mh b">mid = (low + high) / 2</code>(用于二分搜索法和归并排序)？</p><p id="39e7" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">我们可以用<code class="fe me mf mg mh b">mid = (low + high) &gt;&gt; 1</code>。</p><h2 id="a3e9" class="na mj it bd mk nb nc dn mo nd ne dp ms lr nf ng mu lv nh ni mw lz nj nk my iz bi translated">寻找给定数字的模</h2><p id="27e5" class="pw-post-body-paragraph li lj it lk b ll nl kd ln lo nm kg lq lr nn lt lu lv no lx ly lz np mb mc md im bi translated">对于一个给定的数字<code class="fe me mf mg mh b">n</code>，要找到<code class="fe me mf mg mh b">%8</code>我们可以使用表达式:<code class="fe me mf mg mh b">n &amp; 0x7</code>。类似地，要找到<code class="fe me mf mg mh b">%32</code>，使用表达式:<code class="fe me mf mg mh b">n &amp; 0x1F</code>。</p><pre class="ks kt ku kv gt nq mh nr ns aw nt bi"><span id="270f" class="na mj it mh b gy nu nv l nw nx">var n = 20</span><span id="d492" class="na mj it mh b gy ny nv l nw nx">// 20%8 = 4<br/>n &amp; 0x7<br/>&lt;&lt; <strong class="mh jd">4</strong></span></pre><p id="d570" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">同样，我们可以找到任何数字的模值。</p><h2 id="5714" class="na mj it bd mk nb nc dn mo nd ne dp ms lr nf ng mu lv nh ni mw lz nj nk my iz bi translated">检查第K位是否置位</h2><p id="e5f9" class="pw-post-body-paragraph li lj it lk b ll nl kd ln lo nm kg lq lr nn lt lu lv no lx ly lz np mb mc md im bi translated">我们假设给定的数字是<code class="fe me mf mg mh b">n</code>。然后，为了检查<code class="fe me mf mg mh b">K-th</code>位，我们可以使用表达式:<code class="fe me mf mg mh b">n &amp; (1 ≪ K 1)</code>。如果表达式为真，那么我们可以说<code class="fe me mf mg mh b">K-th</code> <em class="nz"> </em>位被设置(这意味着设置为1)。</p><pre class="ks kt ku kv gt nq mh nr ns aw nt bi"><span id="f543" class="na mj it mh b gy nu nv l nw nx">// n = 01001011 (in binary)<br/>var n = 75<br/>var k = 4</span><span id="1bdf" class="na mj it mh b gy ny nv l nw nx">// 1 &lt;&lt; k — 1 = 00001000 (in binary)<br/>// n &amp; (1 &lt;&lt; k — 1) = 01001011 &amp; 00001000 = 00001000 = 8 (in decimal)</span><span id="2b8f" class="na mj it mh b gy ny nv l nw nx">n &amp; (1 &lt;&lt; k — 1)<br/>&lt;&lt; <strong class="mh jd">8</strong></span></pre><h2 id="4b07" class="na mj it bd mk nb nc dn mo nd ne dp ms lr nf ng mu lv nh ni mw lz nj nk my iz bi translated">设置第K位</h2><p id="6b29" class="pw-post-body-paragraph li lj it lk b ll nl kd ln lo nm kg lq lr nn lt lu lv no lx ly lz np mb mc md im bi translated">对于给定的数字<code class="fe me mf mg mh b">n</code>，要设置<code class="fe me mf mg mh b">K-th</code>位，我们可以使用表达式:<code class="fe me mf mg mh b">n | 1 ≪ (K — 1)</code>。假设我们需要设置n的第3位。</p><pre class="ks kt ku kv gt nq mh nr ns aw nt bi"><span id="f7c8" class="na mj it mh b gy nu nv l nw nx">// n = 01001011 (in binary)<br/>var n = 75<br/>var k = 3</span><span id="2f2b" class="na mj it mh b gy ny nv l nw nx">// 1 &lt;&lt; k — 1 = 00000100 (in binary)<br/>// n | (1 &lt;&lt; k — 1) = 01001011 | 00000100 = 01001111 (in binary) = 79 (in decimal)<br/>n | (1 &lt;&lt; k — 1)<br/>&lt;&lt; <strong class="mh jd">79</strong></span></pre><h2 id="17bb" class="na mj it bd mk nb nc dn mo nd ne dp ms lr nf ng mu lv nh ni mw lz nj nk my iz bi translated">清除第K位</h2><p id="66f6" class="pw-post-body-paragraph li lj it lk b ll nl kd ln lo nm kg lq lr nn lt lu lv no lx ly lz np mb mc md im bi translated">要清除给定数字<code class="fe me mf mg mh b">n</code>的<code class="fe me mf mg mh b">K-th</code>位，我们可以使用表达式:<code class="fe me mf mg mh b">n &amp; ~(1 ≪ K — 1)</code>。</p><pre class="ks kt ku kv gt nq mh nr ns aw nt bi"><span id="f885" class="na mj it mh b gy nu nv l nw nx">// n = 01001011 (in binary)<br/>var n = 75<br/>var k = 3</span><span id="d936" class="na mj it mh b gy ny nv l nw nx">// 1 &lt;&lt; k — 1 = 00000100 (in binary)<br/>// n &amp; (1 &lt;&lt; k — 1) = 01001011 &amp; 00000100 = 0 (in binary) = 0 (in decimal)<br/>n &amp; (1 &lt;&lt; k — 1)<br/>&lt;&lt; <strong class="mh jd">0</strong></span></pre><h2 id="fd96" class="na mj it bd mk nb nc dn mo nd ne dp ms lr nf ng mu lv nh ni mw lz nj nk my iz bi translated">切换数字的第k位</h2><p id="d181" class="pw-post-body-paragraph li lj it lk b ll nl kd ln lo nm kg lq lr nn lt lu lv no lx ly lz np mb mc md im bi translated">对于给定的数字<code class="fe me mf mg mh b">n</code>，如果<code class="fe me mf mg mh b">k-th</code>位为<code class="fe me mf mg mh b">0</code>，则将其切换到<code class="fe me mf mg mh b">1</code>，如果为<code class="fe me mf mg mh b">1</code>，则将其切换到<code class="fe me mf mg mh b">0</code>。我们可以用这样的表达:<code class="fe me mf mg mh b">n ^(1 ≪ k –1)</code>。</p><pre class="ks kt ku kv gt nq mh nr ns aw nt bi"><span id="b425" class="na mj it mh b gy nu nv l nw nx">// n = 01001011 (in binary) -&gt; toggle(n, k) = 01001111<br/>var n = 75<br/>var k = 3</span><span id="579e" class="na mj it mh b gy ny nv l nw nx">// 1 &lt;&lt; k — 1 = 00000100 (in binary)<br/>// n ^ (1 &lt;&lt; k — 1) = 01001011 ^ 00000100 = 01001111 (in binary) = 79 (in decimal)<br/>n ^ (1 &lt;&lt; k — 1)<br/>&lt;&lt; <strong class="mh jd">79</strong></span></pre><h2 id="7ee7" class="na mj it bd mk nb nc dn mo nd ne dp ms lr nf ng mu lv nh ni mw lz nj nk my iz bi translated">切换最右边的一位</h2><p id="0a5f" class="pw-post-body-paragraph li lj it lk b ll nl kd ln lo nm kg lq lr nn lt lu lv no lx ly lz np mb mc md im bi translated">对于给定的数字<code class="fe me mf mg mh b">n</code>，为了切换最右边的一位，我们可以使用表达式:<code class="fe me mf mg mh b">n &amp; n — 1</code>。</p><pre class="ks kt ku kv gt nq mh nr ns aw nt bi"><span id="61d3" class="na mj it mh b gy nu nv l nw nx">// n = 01001011 (in binary)<br/>var n = 75</span><span id="efda" class="na mj it mh b gy ny nv l nw nx">// n — 1 = 74 = 01001010<br/>// n &amp; n — 1 = 01001011 &amp; 01001010 = 01001010 = 74<br/>n &amp; n — 1<br/>&lt;&lt; <strong class="mh jd">74</strong></span></pre></div><div class="ab cl oa ob hx oc" role="separator"><span class="od bw bk oe of og"/><span class="od bw bk oe of og"/><span class="od bw bk oe of"/></div><div class="im in io ip iq"><p id="02bb" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">感谢阅读😘，再见👋，别忘了👏最多50次并跟随！</p></div></div>    
</body>
</html>