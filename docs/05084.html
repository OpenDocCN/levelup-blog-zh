<html>
<head>
<title>Step-by-step guide for localizing plurals in iOS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在iOS中本地化复数的分步指南</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/step-by-step-guide-for-localizing-plurals-in-ios-57f9deaade3e?source=collection_archive---------5-----------------------#2020-08-03">https://levelup.gitconnected.com/step-by-step-guide-for-localizing-plurals-in-ios-57f9deaade3e?source=collection_archive---------5-----------------------#2020-08-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="d3bf" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">了解如何使用Localizable.stringsdict文件在iOS中本地化多种语言的复数</h2></div><p id="5cd2" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你已经熟悉在iOS中本地化复数，并且你只是想记住细节，下面的备忘单会帮助你。</p><p id="20e4" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你是新手，现在跳过备忘单，阅读下面的基础知识。</p><h1 id="50f0" class="le lf it bd lg lh li lj lk ll lm ln lo jz lp ka lq kc lr kd ls kf lt kg lu lv bi translated">小抄</h1><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi lw"><img src="../Images/7e04262b41f6cfc92759b18ff683340d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*7AytQ6Hz3nD7oO2P.png"/></div></div></figure><h1 id="e719" class="le lf it bd lg lh li lj lk ll lm ln lo jz lp ka lq kc lr kd ls kf lt kg lu lv bi translated">基础</h1><p id="eab1" class="pw-post-body-paragraph ki kj it kk b kl mi ju kn ko mj jx kq kr mk kt ku kv ml kx ky kz mm lb lc ld im bi translated">每当您想要本地化像<code class="fe mn mo mp mq b">My dog ate 2 carrots</code>这样胡萝卜数量是动态的文本时，一个本地化字符串是不够的。比如用<code class="fe mn mo mp mq b">My dog ate %i carrots</code>定位，传入<code class="fe mn mo mp mq b">1</code>会产生<code class="fe mn mo mp mq b">My dog ate 1 carrots</code>。</p><p id="d926" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您想到的第一个解决方案可能是为一个胡萝卜创建另一个本地化字符串，并在代码中添加一些逻辑，如:</p><pre class="lx ly lz ma gt mr mq ms mt aw mu bi"><span id="64dd" class="mv lf it mq b gy mw mx l my mz">if carrotCount == 1 { <br/>   label.text = NSLocalizedString("dog_eating_carrots_one") <br/>} else { <br/>   label.text = String(format:       NSLocalizedString("dog_eating_carrots_multiple"), carrotCount) <br/>}</span></pre><p id="791a" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这种解决方案可能适用于某些语言，但是不同的语言在处理复数的方式上有所不同。例如，在俄语中，你必须处理更多的情况。单词<em class="na">狗</em>的复数规则如下:</p><ul class=""><li id="77fc" class="nb nc it kk b kl km ko kp kr nd kv ne kz nf ld ng nh ni nj bi translated"><code class="fe mn mo mp mq b">собака</code>为<code class="fe mn mo mp mq b">1, 21, 31, 41, 51, 61</code>等。例子:<code class="fe mn mo mp mq b">1 собака, 21 собака</code></li><li id="99e0" class="nb nc it kk b kl nk ko nl kr nm kv nn kz no ld ng nh ni nj bi translated"><code class="fe mn mo mp mq b">собаки</code>为<code class="fe mn mo mp mq b">2-4, 22-24, 32-34</code>等。例子:<code class="fe mn mo mp mq b">2 собаки, 22 собаки</code></li><li id="33a5" class="nb nc it kk b kl nk ko nl kr nm kv nn kz no ld ng nh ni nj bi translated"><code class="fe mn mo mp mq b">собак</code>为<code class="fe mn mo mp mq b">5-20, 25-30, 35-40</code>等。示例:<code class="fe mn mo mp mq b">5 собак, 20 собак</code></li></ul><p id="2255" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">用代码处理这种逻辑会很复杂。所以<code class="fe mn mo mp mq b">Localizable.strigsdict</code>来救援了。</p><p id="88f7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">与<code class="fe mn mo mp mq b">Localizable.strings</code>文件不同的是，<code class="fe mn mo mp mq b">Localizable.strigsdict</code>文件提供了额外的功能来处理不同的语言，例如定义多个规则。<code class="fe mn mo mp mq b">Localizable.strigsdict</code>能够解释您传入的参数，并基于它选择正确的本地化字符串。</p><h1 id="c45c" class="le lf it bd lg lh li lj lk ll lm ln lo jz lp ka lq kc lr kd ls kf lt kg lu lv bi translated">创建并本地化一个<code class="fe mn mo mp mq b">Localizable.stringdict</code>文件</h1><p id="57f6" class="pw-post-body-paragraph ki kj it kk b kl mi ju kn ko mj jx kq kr mk kt ku kv ml kx ky kz mm lb lc ld im bi translated">要创建一个<code class="fe mn mo mp mq b">Localizable.stringdict</code>文件，在创建新文件时从Xcode的对话框中选择一个<code class="fe mn mo mp mq b">.stringdict</code>模板。</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi np"><img src="../Images/7263e3217a37cd4817738b013f97a94e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*unGZqUWTBhaNNXlB.png"/></div></div></figure><p id="b4b6" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">本地化过程与<code class="fe mn mo mp mq b">Localizable.strings</code>文件完全相同。如果你是iOS本地化的新手，你可以通过阅读Paul Hudson的文章来了解这个话题。</p><h1 id="b25f" class="le lf it bd lg lh li lj lk ll lm ln lo jz lp ka lq kc lr kd ls kf lt kg lu lv bi translated">添加复数配置</h1><p id="e1c8" class="pw-post-body-paragraph ki kj it kk b kl mi ju kn ko mj jx kq kr mk kt ku kv ml kx ky kz mm lb lc ld im bi translated">现在，您可以为特定语言添加复数配置。该模板为您提供了一个很好的起点。</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi nr"><img src="../Images/76c541a0ef741aae8db5f549077eddfc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*0tGR4H6Oa_Qtu7rO.png"/></div></div></figure><p id="4c25" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们示例的配置如下所示:</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi ns"><img src="../Images/ed11fa31c60aa759b5fba261556c69dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*yA0f7L7uTfKtn8S2.png"/></div></div></figure><p id="e4c7" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们一步一步来。</p><ul class=""><li id="4f5b" class="nb nc it kk b kl km ko kp kr nd kv ne kz nf ld ng nh ni nj bi translated">该值是带有参数的本地化文本。在我们的例子中是<code class="fe mn mo mp mq b">My dog ate %#@carrotsCount@.</code></li><li id="58d7" class="nb nc it kk b kl nk ko nl kr nm kv nn kz no ld ng nh ni nj bi translated">你定义的每一个变量都应该在<code class="fe mn mo mp mq b">%#@</code>之前，在<code class="fe mn mo mp mq b">@</code>之后</li><li id="a254" class="nb nc it kk b kl nk ko nl kr nm kv nn kz no ld ng nh ni nj bi translated">您只需要为应该应用复数规则的参数定义变量</li><li id="97c5" class="nb nc it kk b kl nk ko nl kr nm kv nn kz no ld ng nh ni nj bi translated">如果你只是想传递像狗的名字这样的东西，你可以简单地使用你已经知道的字符串格式说明符，比如<code class="fe mn mo mp mq b">%@</code>、<code class="fe mn mo mp mq b">%d</code>等等。为了传递狗的名字，我们的格式字符串应该是这样的:<code class="fe mn mo mp mq b">My dog %@ ate %#@carrotsCount@.</code></li></ul><h1 id="6c23" class="le lf it bd lg lh li lj lk ll lm ln lo jz lp ka lq kc lr kd ls kf lt kg lu lv bi translated">在属性列表和源代码之间切换</h1><p id="1b68" class="pw-post-body-paragraph ki kj it kk b kl mi ju kn ko mj jx kq kr mk kt ku kv ml kx ky kz mm lb lc ld im bi translated">Xcode提供了一个用户界面来处理属性列表文件。根据您的喜好，您也可以直接使用源代码。要进行切换，右击<code class="fe mn mo mp mq b">Localizable.stringdict</code>文件并选择<code class="fe mn mo mp mq b">Open as -&gt; Source Code</code>。切换回来同<code class="fe mn mo mp mq b">Open as -&gt; Property List</code>。</p><p id="b86b" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下面是上面例子的代码:</p><pre class="lx ly lz ma gt mr mq ms mt aw mu bi"><span id="ec41" class="mv lf it mq b gy mw mx l my mz">&lt;?xml version="1.0" encoding="UTF-8"?&gt; <br/>&lt;!DOCTYPE plist PUBLIC "-//Apple &lt;plist version="1.0"&gt; <br/>&lt;dict&gt; <br/>  &lt;key&gt;dog_eating_carrots&lt;/key&gt; <br/>  &lt;dict&gt; <br/>     &lt;key&gt;NSStringLocalizedFormatKey&lt;/key&gt; <br/>     &lt;string&gt;My dog ate %#@carrotsCount@.&lt;/string&gt; <br/>     &lt;key&gt;carrotsCount&lt;/key&gt;<br/>     &lt;dict&gt; <br/>         &lt;key&gt;NSStringFormatSpecTypeKey&lt;/key&gt;  <br/>         &lt;string&gt;NSStringPluralRuleType&lt;/string&gt; <br/>         &lt;key&gt;NSStringFormatValueTypeKey&lt;/key&gt; <br/>         &lt;string&gt;d&lt;/string&gt; <br/>         &lt;key&gt;zero&lt;/key&gt; <br/>         &lt;string&gt;no carrots&lt;/string&gt; <br/>         &lt;key&gt;one&lt;/key&gt; <br/>         &lt;string&gt;1 carrot&lt;/string&gt; <br/>         &lt;key&gt;other&lt;/key&gt; <br/>         &lt;string&gt;%d carrots&lt;/string&gt; <br/>     &lt;/dict&gt; <br/>  &lt;/dict&gt; <br/>&lt;/dict&gt; <br/>&lt;/plist&gt;</span></pre><h1 id="15a3" class="le lf it bd lg lh li lj lk ll lm ln lo jz lp ka lq kc lr kd ls kf lt kg lu lv bi translated">结论</h1><p id="a9c9" class="pw-post-body-paragraph ki kj it kk b kl mi ju kn ko mj jx kq kr mk kt ku kv ml kx ky kz mm lb lc ld im bi translated">既然您已经熟悉了复数本地化，那么您可以跳回到本文顶部的备忘单，看看另一个包含两个变量的示例。为了快速得到结果，你可以复制源代码并粘贴到你的。stringsdict文件作为起点。</p></div><div class="ab cl nt nu hx nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="im in io ip iq"><p id="e8c5" class="pw-post-body-paragraph ki kj it kk b kl km ju kn ko kp jx kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="na">最初发表于</em><a class="ae nq" href="https://www.tanaschita.com/posts/20200801-plurals-localization-in-ios/" rel="noopener ugc nofollow" target="_blank"><em class="na">https://www.tanaschita.com</em></a><em class="na">。</em></p></div></div>    
</body>
</html>