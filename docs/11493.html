<html>
<head>
<title>Build an URL Shortener with LFU Cache by Rust</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Rust的LFU缓存创建一个网址缩短器</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/build-an-url-shortener-with-lfu-cache-by-rust-d2056a4d24e9?source=collection_archive---------3-----------------------#2022-03-21">https://levelup.gitconnected.com/build-an-url-shortener-with-lfu-cache-by-rust-d2056a4d24e9?source=collection_archive---------3-----------------------#2022-03-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="4c86" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">周末建设和学习。这个周末让我们创建一个具有LFU缓存功能的URL Shortner。</p><p id="4ca8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">你也可以看看我的最新系列。</p><div class="ko kp gp gr kq kr"><a href="https://towardsdatascience.com/a-data-pipeline-for-go-trains-delay-analysis-ml-in-action-with-rust-b294e80eede9" rel="noopener follow" target="_blank"><div class="ks ab fo"><div class="kt ab ku cl cj kv"><h2 class="bd iu gy z fp kw fr fs kx fu fw is bi translated">Go列车延误分析的数据管道——ML与Rust的作用</h2><div class="ky l"><h3 class="bd b gy z fp kw fr fs kx fu fw dk translated">ML管道带锈运行</h3></div><div class="kz l"><p class="bd b dl z fp kw fr fs kx fu fw dk translated">towardsdatascience.com</p></div></div><div class="la l"><div class="lb l lc ld le la lf lg kr"/></div></div></a></div></div><div class="ab cl lh li hx lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="im in io ip iq"><h1 id="2304" class="lo lp it bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">什么是网址缩写？</h1><p id="86cc" class="pw-post-body-paragraph jq jr it js b jt mm jv jw jx mn jz ka kb mo kd ke kf mp kh ki kj mq kl km kn im bi translated">网址缩写减少了长链接。使用我们的工具来缩短链接，然后共享它们；您还可以监控流量统计。你可以找到很多(教程、服务、API、文章等等。).</p><p id="b272" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如何设计和建立一个网址缩写器是科技公司面试的热门话题，尤其是系统设计。</p><div class="ko kp gp gr kq kr"><a href="https://leetcode.com/discuss/interview-question/124658/Design-a-URL-Shortener-%28-TinyURL-%29-System/" rel="noopener  ugc nofollow" target="_blank"><div class="ks ab fo"><div class="kt ab ku cl cj kv"><h2 class="bd iu gy z fp kw fr fs kx fu fw is bi translated">设计类似TinyURL - LeetCode的URL缩短服务讨论</h2><div class="ky l"><h3 class="bd b gy z fp kw fr fs kx fu fw dk translated">问题:设计一个类似TinyURL的服务，一个URL缩短服务，一个为…提供短别名的web服务</h3></div><div class="kz l"><p class="bd b dl z fp kw fr fs kx fu fw dk translated">leetcode.com</p></div></div><div class="la l"><div class="mr l lc ld le la lf lg kr"/></div></div></a></div></div><div class="ab cl lh li hx lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="im in io ip iq"><h1 id="2241" class="lo lp it bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">什么是LFU缓存？</h1><p id="27ce" class="pw-post-body-paragraph jq jr it js b jt mm jv jw jx mn jz ka kb mo kd ke kf mp kh ki kj mq kl km kn im bi translated">缓存是保护高并发系统的三种有效方法之一。另外两个分别是节流和降级。</p><p id="55c9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">缓存广泛应用于操作系统、数据库和其他系统中，这些系统通过缓存应用程序使用的数据来加快执行速度。有许多政策，如MRU(最近使用)、MFU(最常使用)、LRU(最近最少使用)和LFU(最少使用)，这些政策各有利弊，因此用于特定的情况。</p><p id="d0c6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">对于这个用例，我将更多地关注LFU(最不常用的)。</p></div><div class="ab cl lh li hx lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="im in io ip iq"><h1 id="c13a" class="lo lp it bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">让我们编码</h1><blockquote class="ms mt mu"><p id="7379" class="jq jr mv js b jt ju jv jw jx jy jz ka mw kc kd ke mx kg kh ki my kk kl km kn im bi translated">免责声明，该代码主要侧重于逻辑演练，它可能不包含一些实现细节，为了简单起见，我也将跳过API部分；然而，如果你密切关注我，单元测试是旅程的一部分。</p></blockquote><h2 id="091b" class="mz lp it bd lq na nb dn lu nc nd dp ly kb ne nf mc kf ng nh mg kj ni nj mk nk bi translated">肖特纳</h2><p id="61e8" class="pw-post-body-paragraph jq jr it js b jt mm jv jw jx mn jz ka kb mo kd ke kf mp kh ki kj mq kl km kn im bi translated">如果我们从逻辑的角度来看。我们需要做的第一件事是构造Shortener，它将表现出两个重要的功能:</p><ol class=""><li id="d2b3" class="nl nm it js b jt ju jx jy kb nn kf no kj np kn nq nr ns nt bi translated">新功能:每次使用时初始化定时器。比如每次API调用；当获得请求时，初始化它。</li><li id="7079" class="nl nm it js b jt nu jx nv kb nw kf nx kj ny kn nq nr ns nt bi translated">生成器函数:获取输入URL并生成一个作为短URL的密钥。</li></ol><figure class="nz oa ob oc gt od"><div class="bz fp l di"><div class="oe of l"/></div></figure><p id="f203" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">非常简单。我们还可以修改或增强算法来生成更短的URL。例如，我们可以使用原始URL的MD5或SHA256进行计算，然后使用base62等进行编码。</p><p id="47e8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">正如我之前提到的，我们将只关注使用Rust的逻辑演练。不过，如果你对这个算法感兴趣，它会在互联网上有很多例子。</p><h2 id="8dda" class="mz lp it bd lq na nb dn lu nc nd dp ly kb ne nf mc kf ng nh mg kj ni nj mk nk bi translated">LFU高速缓存</h2><p id="80d8" class="pw-post-body-paragraph jq jr it js b jt mm jv jw jx mn jz ka kb mo kd ke kf mp kh ki kj mq kl km kn im bi translated">关于LFU的一个关键设计是在每次设置、查找等时跟踪垂直和水平维度的更新。，操作。</p><p id="d04c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">纵轴是用于精确频率计数的数据集，横轴是计数列表。</p><figure class="nz oa ob oc gt od gh gi paragraph-image"><div role="button" tabindex="0" class="oh oi di oj bf ok"><div class="gh gi og"><img src="../Images/cf70ab98136d749761ec8cb55eaab864.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rMO6z9Dl4_OYg_KHxDVyIQ.png"/></div></div><figcaption class="om on gj gh gi oo op bd b be z dk translated">来源:http://dhruvbird.com/lfu.pdf<a class="ae oq" href="http://dhruvbird.com/lfu.pdf" rel="noopener ugc nofollow" target="_blank"/></figcaption></figure><p id="c1ce" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">让我们按功能方面来分解一下:</p><ol class=""><li id="8b12" class="nl nm it js b jt ju jx jy kb nn kf no kj np kn nq nr ns nt bi translated">公共函数集:将键值对设置到缓存中。</li><li id="2f3e" class="nl nm it js b jt nu jx nv kb nw kf nx kj ny kn nq nr ns nt bi translated">公共函数查找:通过值获取键。</li><li id="6f97" class="nl nm it js b jt nu jx nv kb nw kf nx kj ny kn nq nr ns nt bi translated">私有功能更新:每次操作时更新访问频率，如#1、#2。</li><li id="06fd" class="nl nm it js b jt nu jx nv kb nw kf nx kj ny kn nq nr ns nt bi translated">私有函数evict:移除/驱逐不常用的元素。</li><li id="78b2" class="nl nm it js b jt nu jx nv kb nw kf nx kj ny kn nq nr ns nt bi translated">其他功能包括获取缓存的总容量、缓存的当前长度、缓存上的循环等。</li></ol><figure class="nz oa ob oc gt od"><div class="bz fp l di"><div class="oe of l"/></div><figcaption class="om on gj gh gi oo op bd b be z dk translated">初始结构—按作者</figcaption></figure><figure class="nz oa ob oc gt od"><div class="bz fp l di"><div class="oe of l"/></div><figcaption class="om on gj gh gi oo op bd b be z dk translated">设置键值对—按作者</figcaption></figure><figure class="nz oa ob oc gt od"><div class="bz fp l di"><div class="oe of l"/></div><figcaption class="om on gj gh gi oo op bd b be z dk translated">更新访问频率—按作者</figcaption></figure><figure class="nz oa ob oc gt od"><div class="bz fp l di"><div class="oe of l"/></div><figcaption class="om on gj gh gi oo op bd b be z dk translated">按关键字获取值并驱逐—按作者</figcaption></figure><figure class="nz oa ob oc gt od"><div class="bz fp l di"><div class="oe of l"/></div><figcaption class="om on gj gh gi oo op bd b be z dk translated">其他公共职能-按作者</figcaption></figure><h2 id="3e28" class="mz lp it bd lq na nb dn lu nc nd dp ly kb ne nf mc kf ng nh mg kj ni nj mk nk bi translated">放在一起</h2><figure class="nz oa ob oc gt od"><div class="bz fp l di"><div class="oe of l"/></div><figcaption class="om on gj gh gi oo op bd b be z dk translated">工作原理—作者</figcaption></figure><h2 id="355d" class="mz lp it bd lq na nb dn lu nc nd dp ly kb ne nf mc kf ng nh mg kj ni nj mk nk bi translated">让我们对它进行单元测试</h2><figure class="nz oa ob oc gt od gh gi paragraph-image"><div role="button" tabindex="0" class="oh oi di oj bf ok"><div class="gh gi or"><img src="../Images/eafbf51605f0ca17d71b03e7e323f61e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VWtu_reCPj0tS3OtllSKeQ.png"/></div></div><figcaption class="om on gj gh gi oo op bd b be z dk translated">单元测试结果—作者</figcaption></figure></div><div class="ab cl lh li hx lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="im in io ip iq"><h1 id="1e51" class="lo lp it bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">最后的话</h1><p id="f623" class="pw-post-body-paragraph jq jr it js b jt mm jv jw jx mn jz ka kb mo kd ke kf mp kh ki kj mq kl km kn im bi translated">从逻辑代码演练的角度来看，我们主要了解了Rust实现URL缩短器和LFU缓存的方式。</p><p id="271d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我开始写作之旅已经快三年了。你们的支持是让我不断前进，写出更多精彩学习分享的最重要动力。</p><p id="ad8d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">请加入我的中帖连载，和我一起编码学习。</p><div class="ko kp gp gr kq kr"><a href="https://jayhuang75.medium.com/membership" rel="noopener follow" target="_blank"><div class="ks ab fo"><div class="kt ab ku cl cj kv"><h2 class="bd iu gy z fp kw fr fs kx fu fw is bi translated">用我的推荐链接加入媒体-黄伟</h2><div class="ky l"><h3 class="bd b gy z fp kw fr fs kx fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="kz l"><p class="bd b dl z fp kw fr fs kx fu fw dk translated">jayhuang75.medium.com</p></div></div><div class="la l"><div class="os l lc ld le la lf lg kr"/></div></div></a></div><p id="b7d1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">另外，你可以用下面的链接给我买一杯咖啡，让我有动力在周末进行更多的锻炼和学习。</p><div class="ko kp gp gr kq kr"><a href="https://www.buymeacoffee.com/jayhuang75" rel="noopener  ugc nofollow" target="_blank"><div class="ks ab fo"><div class="kt ab ku cl cj kv"><h2 class="bd iu gy z fp kw fr fs kx fu fw is bi translated">jayhuang75是编程、编码、工程和领导博客</h2><div class="ky l"><h3 class="bd b gy z fp kw fr fs kx fu fw dk translated">嘿👋你现在可以给我买一杯咖啡，让我有动力在周末进行更多的建设和学习。</h3></div><div class="kz l"><p class="bd b dl z fp kw fr fs kx fu fw dk translated">www.buymeacoffee.com</p></div></div><div class="la l"><div class="ot l lc ld le la lf lg kr"/></div></div></a></div></div></div>    
</body>
</html>