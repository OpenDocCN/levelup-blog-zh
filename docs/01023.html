<html>
<head>
<title>React Context API: Quickest State Management Implementation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Reactä¸Šä¸‹æ–‡API:æœ€å¿«çš„çŠ¶æ€ç®¡ç†å®ç°</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://levelup.gitconnected.com/react-context-api-quickest-state-management-implementation-f9abd6658e66?source=collection_archive---------2-----------------------#2019-10-21">https://levelup.gitconnected.com/react-context-api-quickest-state-management-implementation-f9abd6658e66?source=collection_archive---------2-----------------------#2019-10-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/8ceb6ea7720cb8f772bc89d7902c79bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GhXWYN7DOOW0uQOQFhDSMg.png"/></div></div></figure><p id="443b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Reduxæ˜¯åœ¨ä¸­å°å‹åº”ç”¨ç¨‹åºä¸­å®ç°å…¨å±€çŠ¶æ€ç®¡ç†çš„æœ‰æ•ˆæ–¹æ³•ã€‚åœ¨æœ¬æŒ‡å—ä¸­ï¼Œæˆ‘ä»¬å°†ä¼šçœ‹åˆ°åœ¨ä½ çš„åº”ç”¨ä¸­å®ç°çŠ¶æ€ç®¡ç†çš„æœ€ç®€æ´ã€æœ€å¿«ã€æœ€ç®€å•çš„æ–¹æ³•ï¼è¿™äº›ç®€å•çš„æ­¥éª¤å°†èŠ±è´¹æ‚¨ä¸åˆ°äº”åˆ†é’Ÿçš„æ—¶é—´ï¼Œå¹¶ä¸”æ‚¨å°†å¯åŠ¨å¹¶è¿è¡Œæ‚¨è‡ªå·±çš„å…¨å±€çŠ¶æ€ç®¡ç†ç³»ç»Ÿã€‚</p><p id="8553" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æˆ‘ä»¬å°†ä½¿ç”¨Reactä¸Šä¸‹æ–‡APIï¼Œå®ƒå·²ç»åŒ…å«åœ¨Reactä¸­ï¼Œå› æ­¤æˆ‘ä»¬ä¸å¿…ä¸ºè¿™ä¸ªé¡¹ç›®å®‰è£…ä»»ä½•é¢å¤–çš„åŒ…ã€‚</p><pre class="kw kx ky kz gt la lb lc ld aw le bi"><span id="bb4c" class="lf lg iq lb b gy lh li l lj lk">npx create-react-app contextpractice</span></pre><p id="b1b8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æˆ‘ä»¬é¦–å…ˆåˆ›å»ºä¸€ä¸ªåŒ…å«åˆå§‹é€»è¾‘çš„å°æ–‡ä»¶<code class="fe ll lm ln lb b">state.js</code>ã€‚ä»£ç å°†åœ¨å¹•åä¸ºæ‚¨å¤„ç†ä¸€åˆ‡ï¼Œæ‰€ä»¥ç°åœ¨ä¸è¦æ‹…å¿ƒç†è§£å®ƒã€‚</p><figure class="kw kx ky kz gt jr"><div class="bz fp l di"><div class="lo lp l"/></div></figure><p id="dfbd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ç„¶åå°†è¿™ä¸ªæ–‡ä»¶å¯¼å…¥åˆ°<code class="fe ll lm ln lb b">App.js</code>ä¸­ã€‚</p><pre class="kw kx ky kz gt la lb lc ld aw le bi"><span id="b7d9" class="lf lg iq lb b gy lh li l lj lk">import { StateProvider } from "./state"</span></pre><p id="8319" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æˆ‘ä»¬çš„ç¤ºä¾‹åº”ç”¨ç¨‹åºå°†æ˜¯ä¸€ä¸ªç®€å•çš„è®¡æ•°å™¨ï¼Œå¯ä»¥ä½¿ç”¨æˆ‘ä»¬çš„å…¨å±€çŠ¶æ€æ¥å¢åŠ å’Œå‡å°‘ã€‚</p><p id="6e82" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">åœ¨App.jsä¸­ï¼Œæˆ‘ä»¬å°†æ‰§è¡Œä¸‰ä¸ªç®€å•çš„æ­¥éª¤:</p><p id="a59e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">1)åˆ›å»ºåˆå§‹çŠ¶æ€:</p><pre class="kw kx ky kz gt la lb lc ld aw le bi"><span id="0398" class="lf lg iq lb b gy lh li l lj lk">const initialState = {<br/>   counter: 0<br/>}</span></pre><p id="37a7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">2)åˆ›å»ºä¸€ä¸ªå…·æœ‰å¢å‡åŠŸèƒ½çš„å‡é€Ÿå™¨:</p><pre class="kw kx ky kz gt la lb lc ld aw le bi"><span id="a843" class="lf lg iq lb b gy lh li l lj lk">const reducer = (state, action) =&gt; {<br/>   switch (action.type) {<br/>      case "increaseCounter":<br/>         return {<br/>            ...state,<br/>            counter: state.counter + 1<br/>         };<br/>      case "decreaseCounter":<br/>         return {<br/>            ...state,<br/>            counter: state.counter - 1<br/>         };<br/>      default:<br/>         return state;<br/>      }<br/>};</span></pre><p id="ce9f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">3)ç”¨æˆ‘ä»¬åˆšåˆšå¯¼å…¥çš„<code class="fe ll lm ln lb b">StateProvider</code>åŒ…è£…æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºã€‚</p><pre class="kw kx ky kz gt la lb lc ld aw le bi"><span id="ce89" class="lf lg iq lb b gy lh li l lj lk">return (<br/>   &lt;StateProvider initialState={initialState} reducer={reducer}&gt;<br/>      &lt;Counter /&gt;<br/>   &lt;StateProvider&gt;<br/>   )<br/>}</span></pre><p id="2a17" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æ‚¨çš„<code class="fe ll lm ln lb b">App.js</code>æ–‡ä»¶åº”è¯¥å¦‚ä¸‹æ‰€ç¤º:</p><figure class="kw kx ky kz gt jr"><div class="bz fp l di"><div class="lo lp l"/></div></figure><p id="289b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">è¿™å°±æ˜¯æˆ‘ä»¬çš„å…¨çƒçŠ¶æ€ç®¡ç†ï¼æˆ‘ä»¬ç°åœ¨å¯ä»¥åœ¨åº”ç”¨ç¨‹åºä¸­åŒ…å«çš„ä»»ä½•ç»„ä»¶ä¸­ä½¿ç”¨æˆ‘ä»¬çš„çŠ¶æ€ã€‚è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•è®¿é—®å’Œæ›´æ–°ç±»ç»„ä»¶ä¸­çš„çŠ¶æ€ã€‚</p><p id="3798" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">é¦–å…ˆåˆ›å»ºä¸€ä¸ª<code class="fe ll lm ln lb b">Counter.js</code>æ–‡ä»¶ã€‚</p><figure class="kw kx ky kz gt jr"><div class="bz fp l di"><div class="lo lp l"/></div></figure><p id="50ef" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ä»ä»»ä½•ç»„ä»¶è®¿é—®æˆ‘ä»¬çš„çŠ¶æ€åªéœ€ä¸‰ä¸ªç®€å•çš„æ­¥éª¤:</p><ol class=""><li id="a320" class="lq lr iq ka b kb kc kf kg kj ls kn lt kr lu kv lv lw lx ly bi translated">å¯¼å…¥çŠ¶æ€ä¸Šä¸‹æ–‡:<code class="fe ll lm ln lb b">import { StateContext } from ".state"</code></li><li id="073d" class="lq lr iq ka b kb lz kf ma kj mb kn mc kr md kv lv lw lx ly bi translated">æ¸²æŸ“å‰åŠŸèƒ½:<code class="fe ll lm ln lb b">static contextType = StateContext</code></li><li id="d3a1" class="lq lr iq ka b kb lz kf ma kj mb kn mc kr md kv lv lw lx ly bi translated">æ¸²æŸ“å‡½æ•°ä¹‹åï¼Œè¿”å›ä¹‹å‰:<code class="fe ll lm ln lb b">const [{ counter }, dispatch] = this.context</code></li></ol><p id="b4ec" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æˆ‘ä»¬ç°åœ¨å¯ä»¥è®¿é—®<code class="fe ll lm ln lb b">counter</code>çŠ¶æ€å˜é‡ï¼Œå¹¶ä¸”æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code class="fe ll lm ln lb b">dispatch</code>æ¥æ›´æ–°çŠ¶æ€:</p><figure class="kw kx ky kz gt jr"><div class="bz fp l di"><div class="lo lp l"/></div></figure><p id="a581" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ä¸åˆ°5åˆ†é’Ÿï¼Œæˆ‘ä»¬å°±åœ¨åº”ç”¨ç¨‹åºä¸­å®ç°äº†å…¨å±€çŠ¶æ€ç®¡ç†ï¼ğŸ‰</p><p id="82e8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">è®©æˆ‘ä»¬ç»ƒä¹ æ·»åŠ å¦ä¸€å—åˆ°æˆ‘ä»¬çš„çŠ¶æ€ã€‚å¦‚æœæˆ‘ä»¬æƒ³ç»™æˆ‘ä»¬çš„<code class="fe ll lm ln lb b">increaseCounter</code>å‡½æ•°ä¼ é€’ä¸€ä¸ªå‚æ•°å‘¢ï¼Ÿæ¯”å¦‚è¦é€’å¢çš„é‡ï¼Ÿè®©æˆ‘ä»¬åœ¨App.jsä¸­åˆ›å»ºå¦ä¸€ä¸ªè®¡æ•°å™¨<code class="fe ll lm ln lb b">counter2</code>ï¼Œä»¥åŠä¸€ä¸ªæ–°çš„<code class="fe ll lm ln lb b">increase</code> / <code class="fe ll lm ln lb b">decrease</code>è®¡æ•°å™¨å‡½æ•°:</p><figure class="kw kx ky kz gt jr"><div class="bz fp l di"><div class="lo lp l"/></div></figure><p id="9b44" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æ³¨æ„ï¼Œåœ¨<code class="fe ll lm ln lb b">increaseCounter2</code>ä¸­ï¼Œæˆ‘ä»¬è¯´:</p><pre class="kw kx ky kz gt la lb lc ld aw le bi"><span id="bd0b" class="lf lg iq lb b gy lh li l lj lk">counter: state.counter + action.increment</span></pre><p id="6257" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æˆ‘ä»¬å°†æŠŠä¸€ä¸ªåä¸º<code class="fe ll lm ln lb b">increment</code>çš„å‚æ•°ä¼ é€’ç»™<code class="fe ll lm ln lb b">Counter.js</code>ä¸­çš„<code class="fe ll lm ln lb b">dispatch</code>å‡½æ•°ï¼Œè¯¥å‡½æ•°å°†ä¿å­˜æˆ‘ä»¬å¸Œæœ›è®¡æ•°å™¨å¢åŠ çš„å€¼ã€‚è®©æˆ‘ä»¬çœ‹çœ‹å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„:</p><figure class="kw kx ky kz gt jr"><div class="bz fp l di"><div class="lo lp l"/></div></figure><p id="cf61" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æˆ‘ä»¬çš„è°ƒåº¦å‡½æ•°ç°åœ¨çœ‹èµ·æ¥åƒè¿™æ ·:</p><pre class="kw kx ky kz gt la lb lc ld aw le bi"><span id="e0ff" class="lf lg iq lb b gy lh li l lj lk">dispatch({type: "increaseCounter2", increment: 10})</span></pre><p id="ede3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">å¢é‡å‚æ•°ç„¶åä½œä¸º<code class="fe ll lm ln lb b">action.increment</code>ä¼ é€’ç»™æˆ‘ä»¬çš„ç¼©å‡å™¨ã€‚</p><p id="d04c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æ„Ÿè°¢é˜…è¯»ï¼å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œç•™ä¸‹ä¸€ç‚¹æŒå£°ï¼Œå¦‚æœè¿™ä¸ªè¿‡ç¨‹çš„ä»»ä½•éƒ¨åˆ†è®©ä½ æ„Ÿåˆ°å›°æƒ‘ï¼Œç•™ä¸‹è¯„è®ºğŸ‰</p><p id="e908" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Githubåº“:<a class="ae me" href="https://github.com/deeayeen/medium-context" rel="noopener ugc nofollow" target="_blank">https://github.com/deeayeen/mediumcontextpractice</a></p></div></div>    
</body>
</html>