<html>
<head>
<title>How To Show Off the Hours You Worked On Coding Projects</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何炫耀你在编码项目上工作的时间</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-show-off-the-hours-you-worked-on-coding-projects-b616b042973d?source=collection_archive---------22-----------------------#2021-08-24">https://levelup.gitconnected.com/how-to-show-off-the-hours-you-worked-on-coding-projects-b616b042973d?source=collection_archive---------22-----------------------#2021-08-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="538f" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">用Firebase &amp; Toggl的API构建React组件</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/a753c344be2c7d3215c49246318a60a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nMeoZTj-Jm07IcfjDlRbhg.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">真实数据，每日更新！</figcaption></figure><p id="a05c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在没有计算机科学学位的情况下，展示你对软件的热情和知识的最好方式是通过构建东西。做得更好的唯一方法是<strong class="kx ir">投入时间</strong>。</p><p id="c88e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在本教程中，我将向你展示如何建立我的<a class="ae lr" href="http://christianvega.me/projects" rel="noopener ugc nofollow" target="_blank">作品集网站的项目部分</a>，在那里我炫耀(或者像孩子们喜欢说的那样<em class="ls"> flex、</em>)我在那些项目上付出的辛苦时间。</p><p id="af36" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">为了更好地理解，您应该具备关于<strong class="kx ir">类型脚本、React </strong>和<strong class="kx ir">REST API</strong>的工作知识。</p><h1 id="6359" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">概观</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ml"><img src="../Images/e19a71693deaed76fd34d59c6ed21fa4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jI5uiH2UG44XjVEsNn0I0A.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">高层设计。(用<a class="ae lr" href="http://draw.io" rel="noopener ugc nofollow" target="_blank">图纸io </a>制作)</figcaption></figure><p id="e034" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><a class="ae lr" href="https://toggl.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="kx ir"> Toggl </strong> </a>是一个带有<a class="ae lr" href="https://github.com/toggl/toggl_api_docs" rel="noopener ugc nofollow" target="_blank">公共API </a>的在线时间跟踪工具，我们将使用它作为数据源。</p><p id="2742" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在最细粒度上，数据集由每个单独工作任务的记录组成，例如，花1小时编写CSS或花30分钟完成机器学习课程。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mm mn l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">来自Toggl的API的样本记录。</figcaption></figure><p id="7eef" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">虽然Toggl有<strong class="kx ir">项目</strong>的概念，但我所有的编码项目目前都在同一个Toggl项目下跟踪(天才，我知道)。</p><p id="3ca4" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这意味着特定编码项目的每条记录都需要有完全相同的名称，这样数据聚合就不会变得比需要的更复杂。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mo"><img src="../Images/3b930f6b498c331671fbd764a573876b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IcTCPHBW6S2hi68ewHWztA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">每条记录都简单地以编码项目本身命名(最左边的一列)。</figcaption></figure><p id="2b7d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">目标是合计每个编码项目的时间，并在相应的React组件上显示它们。</p><p id="f4c3" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">“愚蠢”的实现是每当用户访问页面时，直接从前端获取Toggl数据，但是这种方法有两个问题:</p><ul class=""><li id="c083" class="mp mq iq kx b ky kz lb lc le mr li ms lm mt lq mu mv mw mx bi translated">Toggl限制每秒1个请求，它的响应每50条记录分页一次。我们提取了250多条记录，因此每个用户至少需要等待5秒钟才能加载数据。在2021年，这不是一个好的用户体验。</li><li id="2ab4" class="mp mq iq kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated">使用我的私有API令牌对调用进行身份验证，这将把它暴露给任何访问该站点的人。</li></ul><p id="6662" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这就是火基的用武之地。不用在每次用户访问页面时都调用API，我们只需通过一个预定的函数将数据加载到数据库，并直接从前端查询数据库，这是Firebase支持的。</p><h1 id="2727" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">在Firebase上建立实时数据库</h1><p id="137b" class="pw-post-body-paragraph kv kw iq kx b ky nd jr la lb ne ju ld le nf lg lh li ng lk ll lm nh lo lp lq ij bi translated">说我已经建立了一个生产数据库有点荒谬，因为我只有8个键，没有任何模式实施，但是唉，这就是云NoSQL的魔力。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/8d2b33d353b835f3f2d5c8983c79e131.png" data-original-src="https://miro.medium.com/v2/resize:fit:926/format:webp/1*81W9bISZQFlBhx4RFGkwEg.jpeg"/></div></figure><p id="bd4d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">以上是我的数据库，我在其中创建了两个主要节点:<code class="fe nj nk nl nm b">projects</code>和<code class="fe nj nk nl nm b">projectsMetadata</code> <strong class="kx ir">。</strong></p><p id="1451" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><code class="fe nj nk nl nm b">Projects</code>是我在Toggl中跟踪的项目的字典式对象，格式为{项目名称:跟踪的小时数}。数据库中的每个键对应于API响应中的一个键，所以没有拼写错误是很重要的。</p><p id="6e09" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><code class="fe nj nk nl nm b">ProjectsMetadata</code>将存储数据的时间范围，这将在某一天派上用场，因为API只允许检索长达1年的时间跨度。</p><p id="0317" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果我想开始跟踪数据库中的一个新项目，我必须手动将其对应的键添加到DB中。</p><p id="4e69" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">下面是一个神奇的调度函数:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="1239" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">该函数使用cron风格的调度，声明它将在每天凌晨4点运行。</p><p id="eff9" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">为了简单起见，我将时间存储为带有一个小数点的小时。</p><p id="1a94" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">首先，<code class="fe nj nk nl nm b">getDateToLoad</code>检查今天的数据是否已经加载。如果有，它返回一个空字符串，如果没有，它返回今天的日期。</p><p id="aaa8" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">然后，<code class="fe nj nk nl nm b">getFirebaseProjectData</code>从Firebase中检索现有数据，<code class="fe nj nk nl nm b">getTogglProjectData</code>调用API来检索过去24小时的会话。</p><p id="a5a3" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我使用了<a class="ae lr" href="https://www.npmjs.com/package/axios" rel="noopener ugc nofollow" target="_blank"> axios </a>库来发出请求，并将所需的参数定义为环境变量。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="24e0" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">最后，我们遍历新的会话，计算新的总数，将值推送到firebase，并将今天的日期设置为最后加载的日期。</p><h1 id="9787" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">创建React组件</h1><p id="3eb1" class="pw-post-body-paragraph kv kw iq kx b ky nd jr la lb ne ju ld le nf lg lh li ng lk ll lm nh lo lp lq ij bi translated">现在是有趣的部分:我将省去痛苦的CSS细节，把重点放在这个项目的反应方面。</p><p id="2f5b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">为了获得优化的用户体验，我决定在第一次页面加载时获取项目数据，而不管用户进入的是什么页面。这是通过我们的老朋友useEffect实现的。</p><p id="68e9" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">然后，这些数据被保存在应用程序级别的状态中，并作为props传递给项目页面。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="457e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">只有当状态中的数据被更新时，项目页面才会依次呈现项目及其相应的图像。</p><p id="9d81" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">否则，用户界面将只显示一个旋转的图标。这可以防止“未定义”数据的半秒钟闪烁。</p><p id="8d54" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">最后，我们将时间数据作为道具传递给每个项目，同时传递的还有特定于我决定如何显示组件的属性。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="92be" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在一点儿<strong class="kx ir"> CSS </strong>魔法之后，我们有了成品:一个Instagram风格的项目提要，其中没有喜欢，而是有时间！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/48e76d1849b6ced74b075e40f893fc73.png" data-original-src="https://miro.medium.com/v2/resize:fit:1008/1*LSVr9NIndgToL9Ht-Mgw4g.gif"/></div></figure></div></div>    
</body>
</html>