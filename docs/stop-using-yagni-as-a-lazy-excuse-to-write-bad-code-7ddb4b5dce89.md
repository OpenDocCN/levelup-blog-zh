# 不要再用 YAGNI 作为编写糟糕代码的懒惰借口

> 原文：<https://levelup.gitconnected.com/stop-using-yagni-as-a-lazy-excuse-to-write-bad-code-7ddb4b5dce89>

## 你必须有健壮的代码来应用 YAGNI 原理

![](img/ce717a1314a69116d9bd31fcc727445d.png)

约书亚·阿拉贡在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄的照片

你将要读到的是我在作为软件工程师的职业生涯中形成的观点。如果你正在寻找一个说“这样做，你就会成功”的神奇配方，你现在就可以点击离开。

YAGNI 代表“你不会需要它”。它来自极限编程(XP)。它也可以表述为“不要在你认为你会需要的时候实现功能，只在你真正需要的时候实现它”。

这个原理可能很容易理解，但并不像看起来那么容易理解。

# 你在任何时候都需要好的设计

YAGNI 的定义有没有引起你的注意？有一个重要的细节应该指出。是“功能性”这个词。当人们谈论 YAGNI 时，似乎所有的注意力都放在了“需要”这个词上，而忘记了功能性。

“功能性”这个词通常被理解为“任何事情”，YAGNI 的整个定义就变成了“除非你需要，否则不要做任何事情”。这也最终被简化为“什么都不要做”。这听起来是很好的建议…如果你想弄糟你的代码库，然后坐在那里后悔，直到宇宙的热寂，同时把所有的责任都推给那些愚蠢的需求…如果他们不那么愚蠢就好了…

你不应该说“什么都不要做”。有一件重要的事情是你*一直都需要的*。这是什么？好的代码设计。不管你将在什么时候实现什么特性，你总是需要好的设计。

## YAGNI 和糟糕的设计不相配

坏的一面是实现新需求的时间总是会到来。您可以随时申请任何新功能。如果没有一个可以轻松添加新特性的代码库，你就完了。在这种情况下，YAGNI 和基斯是帮不上忙的。

问题是，YAGNI 经常被用作不采取措施使代码库易于修改的借口，因为“你将来不需要修改它”。

YAGNI 与良好的代码设计密切相关。没有好的代码设计，YAGNI 是没有意义的，因为无论你什么时候选择添加新的功能，无论哪种方式都是昂贵的，以后甚至可能更加昂贵。

# 什么属于 YAGNI，什么不属于他

接下来的问题是什么实际上属于 YAGNI 范畴，什么不属于？

任何你预见到需要的特性或功能都属于 YAGNI 类别。任何基于以下假设而编写的代码:它是为了*你将来需要的那个特定特性*。当这样的代码在系统中产生实际可见的效果时，这是最明显的。

有时，属于 YAGNI 类别的代码在系统中不会产生明显的效果。那么，如何知道你是否在做一些不必要的事情呢？

如果你在写东西的时候脑子里想着某个*特有的*特性，那么不要这么做，因为你不需要它。

如果你正在写的东西没有明确的未来特征，那也没关系。例如，分离某些东西是好的，划分责任是好的，封装概念是好的…

这里的关键词是*具体的*。

假设您决定创建一个接口，当您只需要在屏幕上显示用户记录时，该接口允许您将用户记录保存在某种形式的存储中(只有接口，没有具体的实现)。那是你不应该做的事情，因为你不需要保存记录，你只需要在屏幕上显示出来。在这个例子中，您想要做的更改与一个特定的*特性相关，在这个例子中是存储。*

然而，假设您决定创建一个使用用户记录的接口，目的是将记录处理的方式从系统的其余部分中分离出来，那就没问题了。然后，如果到了保存记录的时候，您的设计将允许您轻松地这样做，您需要做的就是创建该消费者接口的新实现。

后一个例子中的不同之处在于，创建接口的决定是为了改进现有的*设计并使其更加健壮，因为以前，在屏幕上显示记录是与系统的其他部分结合在一起的，创建存储接口对改进设计没有任何作用。如你所见，第二个例子中没有特别的特性。这是一个好的设计决策如何补充 YAGNI 的例子，解耦并不是专门为存储而做的，以后易于保存是一个很好的副作用。*

如果你想应用 YAGNI，好的设计是必不可少的。

系统中不可见的变化是许多讨论产生的原因。我记得在一些讨论中，简单地应用单一责任原则被认为是不必要的，因为“我们在将来永远都不需要修改那个类”。讨论实际上比实际修改代码花费了更多的时间。

当争论某事比实际修改代码花费更多时间时，很难称之为过度工程化(我不是指明显的情况，比如为在一个地方使用的每个变量创建一个常量)，如果有什么不同的话，讨论本身就是过度工程化。

# YAGNI 并不意味着你应该不计后果

YAGNI 并不意味着你应该忽略软件设计，开始不计后果地编写代码，因为很多人都是这么解释这个原则的。

似乎 YAGNI 不断被滥用为送垃圾的借口，连同干和吻。DRY 被滥用了，引入了很多耦合，KISS 被滥用了，就像 YAGNI 一样，写什么都行。一个原理听起来越简单，就越容易被滥用和曲解。

感觉我们正处于软件设计的理念被时间遗忘的时刻，因为越来越多的软件开发人员进入这个领域只是为了赚钱，而根本不关心好的软件设计，我们被趋势所驱动，每个人都想挑战旧的理念，因为它很酷，点击量很大，如果你应用它们，它显然是“过度工程”和“反模式”，规则、模式、严格类型和所有这类东西都是给喜欢写样板文件的老 Java 人的我是在讽刺你。

我知道，每条规则都有例外，只是“每条规则都有例外”这句话被发挥到了极致，任何独立于框架或者不是 React hook 一部分的代码都是“过度工程”，所以大家都应该停止编写它，因为 YAGNI。如果你问我的话，我觉得这太鲁莽了。

TL；博士，如果你因为 YAGNI 而难以决定某件事是否不应该做，想想你做出改变的原因。如果你这么做是为了改进现有的设计，那就去做吧，如果你这么做是为了将来某个特定的功能，那就不要去做。

为了应用 YAGNI 原理，你需要一个健壮的代码设计，所以不要害怕投入一些时间来实现这样的设计。

好的设计决策不是“你将来不会需要”的东西，所以不要找那个借口。