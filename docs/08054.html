<html>
<head>
<title>Make Clubhouse Scroll Animation in Swift</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Swift中制作俱乐部会所滚动动画</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/make-clubhouse-scroll-animation-in-swift-a58832790669?source=collection_archive---------13-----------------------#2021-03-30">https://levelup.gitconnected.com/make-clubhouse-scroll-animation-in-swift-a58832790669?source=collection_archive---------13-----------------------#2021-03-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="957f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">本指南讲述了兴趣屏幕的水平滚动效果</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/17e3e9f9f835d0bc71568e2274bd527e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0CTTIo8v03VwHO_k"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">照片由<a class="ae lb" href="https://unsplash.com/@williamk?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">威廉·克劳斯</a>在<a class="ae lb" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</figcaption></figure><p id="bace" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果您登录Clubhouse，在<code class="fe lc ld le lf b">profile-&gt;settings-&gt;interests</code>中您会发现不同的兴趣，您可以选择并横向滚动。在本文中，我们将重点介绍这种水平滚动动画。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi lg"><img src="../Images/2ce256f1ccae25259df3b741d6473223.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*PMMfxw5fA_PKkI90jqtTAQ.gif"/></div></figure><h2 id="8c00" class="lh li iq bd lj lk ll dn lm ln lo dp lp jy lq lr ls kc lt lu lv kg lw lx ly lz bi translated">源代码</h2><p id="ea20" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">源代码可以在我的github上找到。</p><div class="mf mg gp gr mh mi"><a href="https://github.com/Shayimpagne/ClubhouseInterests" rel="noopener  ugc nofollow" target="_blank"><div class="mj ab fo"><div class="mk ab ml cl cj mm"><h2 class="bd ir gy z fp mn fr fs mo fu fw ip bi translated">shayimpagne/俱乐部兴趣</h2><div class="mp l"><h3 class="bd b gy z fp mn fr fs mo fu fw dk translated">在GitHub上创建一个帐户，为Shayimpagne/ClubhouseInterests的发展做出贡献。</h3></div><div class="mq l"><p class="bd b dl z fp mn fr fs mo fu fw dk translated">github.com</p></div></div><div class="mr l"><div class="ms l mt mu mv mr mw kv mi"/></div></div></a></div><h2 id="1d8b" class="lh li iq bd lj lk ll dn lm ln lo dp lp jy lq lr ls kc lt lu lv kg lw lx ly lz bi translated">少说多做！👨🏻‍💻</h2><p id="b82b" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">首先，让我们考虑一个模型结构。我们有一组数组，每个数组包含一定数量的兴趣(有兴趣的行)。</p><p id="c260" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">数组中项的结构:</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="2e3f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后，让我们继续讨论一组数组的结构，其中包含一个由<code class="fe lc ld le lf b">Interest</code>项组成的数组:</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="723f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当然，你可以将标题和表情符号组合在一个字符串中，但我想将它们分开。你想怎么做就怎么做，由你决定。</p><p id="d95e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">此外，我使用autolayout创建了一个帮助器函数，用于将视图边缘绑定到它的superview:</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="f858" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">代表兴趣的视图:</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="84f7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我将两个标签(表情符号和标题)放置在水平的<code class="fe lc ld le lf b">UIStackView</code>中，间距为8，并将表情符号标签的宽度和高度设置为24。将视角的角部四舍五入至12°。</p><p id="f01c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后定义包含一组兴趣的视图:</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="49c3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe lc ld le lf b">transparentView</code>是我们用来检测<code class="fe lc ld le lf b">UIScrollView</code> <code class="fe lc ld le lf b">contentOffset</code>和<code class="fe lc ld le lf b">groupStackView</code>包含兴趣视图的技巧。</p><p id="5609" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后添加功能<code class="fe lc ld le lf b">setup(with: InterestGroup)</code>。在这个函数中，每个兴趣数组都嵌入在<code class="fe lc ld le lf b">UIScrollView</code>中。用户交互被禁用，并以编程方式控制。每个<code class="fe lc ld le lf b">UIScrollView</code>存储在<code class="fe lc ld le lf b">rows</code>数组中，<code class="fe lc ld le lf b">minRowWidth</code>包含最小<code class="fe lc ld le lf b">UIScrollView</code>内容宽度的宽度，<code class="fe lc ld le lf b">minRowOffset</code>是其<code class="fe lc ld le lf b">UIScrollView</code>的最大偏移量。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="6ed0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后在<code class="fe lc ld le lf b">layoutSubviews()</code>中我们可以找到内容宽度最小的<code class="fe lc ld le lf b">UIScrollView</code>。我们需要忽略宽度小于视图宽度的行，并用最小行宽度的值设置<code class="fe lc ld le lf b">transparentView</code>的宽度约束。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="65d0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，最后一部分是为每一行计算scroll <code class="fe lc ld le lf b">velocity</code>。例如，内容宽度最小的行的速度等于1，它以固定的速度滚动，而内容宽度较大的行的速度大于1，以便同时完成。我们忽略内容宽度小于视图宽度的行，并将其速度设置为1。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="58af" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在你的<code class="fe lc ld le lf b">UIViewController</code>中合成具有不同兴趣的<code class="fe lc ld le lf b">InterestGroup</code>对象，创建<code class="fe lc ld le lf b">InterestGroupView</code></p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="f564" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">运行应用程序并尝试水平滚动组:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi lg"><img src="../Images/9306ffcb4052f10ead181c7d4f01ebe5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*V0OBT2xPH-HLzz4DNTsNgg.gif"/></div></figure><p id="f9a6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在排到达末端之后，我们需要在拉动时将它们放置在一个位置。添加下一个代码，在从左边缘或右边缘拉动时将所有行吸引成一行:</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="6e29" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">运行它:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi lg"><img src="../Images/55def0d3672b4bbccaad182133abf59a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*DE1RYLgQaH6m0ym6G1tWCw.gif"/></div></figure><p id="b642" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">谢谢你的阅读，好好编码🙂。</p><p id="ff19" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">资源:</p><div class="mf mg gp gr mh mi"><a href="https://github.com/Shayimpagne/ClubhouseInterests" rel="noopener  ugc nofollow" target="_blank"><div class="mj ab fo"><div class="mk ab ml cl cj mm"><h2 class="bd ir gy z fp mn fr fs mo fu fw ip bi translated">shayimpagne/俱乐部兴趣</h2><div class="mp l"><h3 class="bd b gy z fp mn fr fs mo fu fw dk translated">在GitHub上创建一个帐户，为Shayimpagne/ClubhouseInterests的发展做出贡献。</h3></div><div class="mq l"><p class="bd b dl z fp mn fr fs mo fu fw dk translated">github.com</p></div></div><div class="mr l"><div class="ms l mt mu mv mr mw kv mi"/></div></div></a></div></div></div>    
</body>
</html>