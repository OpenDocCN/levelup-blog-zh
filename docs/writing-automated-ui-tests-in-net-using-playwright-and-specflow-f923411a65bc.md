# 在中编写自动化 UI 测试。NET 使用剧作家和 SpecFlow

> 原文：<https://levelup.gitconnected.com/writing-automated-ui-tests-in-net-using-playwright-and-specflow-f923411a65bc>

## 为什么是自动化测试，为什么应该编写自动化测试

虽然编写测试对于大多数开发人员(包括我)来说不是一件愉快的事情，但它是软件开发的一个基本部分。您日常使用的高质量软件产品有足够的测试来将错误保持在最低限度，并给我们完美的体验，这就是为什么您应该在您正在工作的应用程序中做同样的事情。

![](img/e9427afb7a22a6794e0af2248e9a47d4.png)

在 [Unsplash](https://unsplash.com/photos/hOCYuLmTTnY) 上的[this is 工程](https://unsplash.com/@thisisengineering)拍摄

## **自动化测试**

你会问什么是自动化测试？它是编写独立于你要测试的软件的代码，主要目的是在应用程序进入生产之前发现其中的任何错误或缺陷。

不要误解我的意思，即使经过测试，你的软件也不会 100%没有 bug，但是 bug 的百分比肯定会下降。

## 编写自动化测试的短期缺点

有很多人会认为，编写大量的测试可能会很昂贵，因为它耗费时间，因为你必须编写实际的应用程序，然后在你能够发布任何软件之前进行测试。

但是让我问一个问题。你是想发布你和你的团队能开发的最好的产品，并把错误限制在最低限度，还是想匆忙发布一个有很多错误的应用程序，让所有用户和相关方都不高兴？

## **长期优势**

虽然作为一个公司，你确实需要花费更多的时间和金钱来编写测试，但这并不是不做测试的足够理由。

从长远来看，如果测试做得正确，应用程序的质量将会更高，没有人需要花费时间和金钱去匆忙修复错误，更不用说如果您的应用程序正在快速增长，手动测试根本就不可伸缩。

虽然一开始写它们可能会很痛苦。自动化测试是可重用的——您只需编写一次，就可以运行成百上千次。

## 剧作家和 SpecFlow

所有这些都解决了之后，让我们创建一些自动化的 UI 测试。为此，我们需要使用 [*剧作家*](https://playwright.dev/) ，它使我们能够编写端到端的测试，并且是一个开源的浏览器自动化库。我们还将使用一个. NET 的行为驱动开发(BDD)框架。

对于那些不熟悉 BDD 测试的人，这里有一个 SpecFlow 特性文件的代码示例。

正如我们所看到的，它遵循了一个普通用户想要在浏览器中做一些事情的行为。剧作家所做的是帮助我们使用浏览器来测试这是否真的发生了。

## **设置剧作家**

这段代码的作用是在我们进行的每个*场景*(测试)之前启动一个浏览器，并在*场景*完成后关闭它。

## 创建我们的页面对象

首先，我们将创建一个 *BasePageObject* 类，该类有一个 *NavigateAsync* 方法将我们导航到我们的页面路径。

然后我们需要一个实际的类来测试页面。

这将有初始页面路径和我们需要完成测试的所有方法。如上所述，我们需要:

1.  在搜索栏中填写详细信息
2.  点击搜索按钮
3.  单击 SpecFlow 链接

这正是使用*页面的示例中所发生的情况。ClickAsync* 并传入选择器(您可以通过检查页面直接从那里复制来获得选择器)。

这一页。RunAndWaitForNavigationAsync 将强制该方法在单击之前等待导航更改，从而防止测试因页面加载缓慢而失败。

## **编写实际测试**

这将经历来自*的所有步骤。上面的特性*文件，并按照我们想要的方式导航。最后，它将检查我们在浏览器中的位置是否实际上是我们在*中传递的目标 URL 。特写【https://specflow.org/】文件和正[文件](https://specflow.org/)。在测试本身中，它被表示为'(。*)'在 Then 情况下。*

## **总结**

对于开发人员来说，测试可能是一个短期的地狱，但却是一个长期的投资，肯定会有不错的回报，一旦理解了，实现起来就不会那么困难了。所以如果你想开发出最好的软件，一定要钻研自动化测试！