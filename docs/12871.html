<html>
<head>
<title>Tips to improve code readability</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">提高代码可读性的技巧</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/tips-to-improve-code-readability-fa16a9a9f8dc?source=collection_archive---------1-----------------------#2022-07-18">https://levelup.gitconnected.com/tips-to-improve-code-readability-fa16a9a9f8dc?source=collection_archive---------1-----------------------#2022-07-18</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="cb7b" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">任何傻瓜都能写出计算机能理解的代码。优秀的程序员写出人类能理解的代码——马丁·福勒</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/20c8f6ae8650000906a61afdac8aa158.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eVk53D9bfrNtHAhjbOhBRg.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">米海三都</figcaption></figure><p id="2a54" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">编程语言对人类来说是抽象的。不管你是用C，Java，Python，还是汇编写代码。都是为了人类。如果人类能够像计算机一样快地理解和书写“0”和“1”的字符串，那么我们就不需要编程语言了。</p><p id="fd87" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">但是我们不能(或者至少不容易)。所以我们开发了一种方法，在人类逻辑和直觉的帮助下利用所有的计算机能力。</p><p id="3935" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">作为程序员，我们应该努力使代码尽可能的可读。这就是为什么我们不断借用现实生活中的术语，比如工厂、堆栈、队列、读者等等。因为他们很熟悉。</p><p id="21cb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">作为一名程序员，我也是一名作家。诚然，与小说相比，读者是有限的，但我仍然是一名作家。</p><p id="4953" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在，代码阅读和故事阅读是不同的。读代码是出于需要，而读小说是出于放松。但如果我必须做一些事情，并不意味着它不能令人愉快。</p><p id="b72d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">因此，下面是我列出的编写适合人类的代码的技巧:</p><h2 id="d825" class="lu lv it bd lw lx ly dn lz ma mb dp mc lh md me mf ll mg mh mi lp mj mk ml mm bi translated">避免缩写</h2><p id="951b" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">曾经有一段时间，存储空间是有限的。现在已经不是那个时候了，所以我不会在信上省钱。</p><p id="c505" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我喜欢避免使用甚至是众所周知的缩写，因为它们大多与文化有关。就拿“数字”来说，在欧洲我们用“nr”当美国使用“不”的时候，为什么要让事情变得比它应该变得更难呢？我们现在都有代码自动完成功能，所以短变量名并不能提高我的效率。</p><p id="2370" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这条规则也有一些例外，比如国际标准或一些在我工作的组织中很常见的缩写。但只有当它们被记录下来并为公司内部的每个人所知时。</p><p id="08fb" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在所有这些情况下，我更喜欢用我自己的判断。如果我发现自己想知道我是否应该使用一个特定的缩写，那么答案可能是否定的。</p><h2 id="707c" class="lu lv it bd lw lx ly dn lz ma mb dp mc lh md me mf ll mg mh mi lp mj mk ml mm bi translated">命名类时避免使用通用术语</h2><p id="20f3" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">如果没有表达意图，使用完整的词语没有任何好处。我经常看到以“管理器”、“助手”、“管弦乐队”等结尾的类名。现在，我明白了，它们很简单。但它们很模糊。</p><p id="1a4d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">一个<em class="ms"> UserManager </em>类可以做各种各样的事情。它可以管理寿命，密码，个人信息，篮子，与其他用户的关系，等等。</p><p id="fbab" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我试着用一句话概括全班的意图。如果我做不到，那么我将设法分解其中的方法/属性，并想出一个清晰的名称。</p><p id="e1de" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">模糊的名称是无限滚动类文件的入口点。所以我不惜一切代价避开他们。</p><p id="72ef" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">大多数时候，我们的问题是设计，而不是名字。以用户类为例。如果我们需要设置或编辑密码，我们可以简单地在类中添加类似“setPassword()”的方法。为什么要创建“经理”类？</p><p id="c28e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">与其他用户的关系、产品偏好等也是如此。如果你觉得这样的课程太大了，你是对的。我将创建UserSecurity、UserRelations、UserProductPreference类，并将它们作为属性添加到User类中。使用面向对象语言的全部功能。</p><p id="3ecf" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">提示:如果我想不出一个类的名字，我喜欢给它起一个奇怪的名字，比如TheBonsayTree或者BananaMonkey。这个奇怪的名字阻止了我提交代码。这迫使我以后再回来。通常，那时我的潜意识已经为这个类想出了一个名字。如果没有，我使用橡皮鸭技术或者我请求同事帮助我找到一个合适的名字。</p><h2 id="334b" class="lu lv it bd lw lx ly dn lz ma mb dp mc lh md me mf ll mg mh mi lp mj mk ml mm bi translated">提取函数</h2><p id="a3c7" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated"><a class="ae mt" href="https://en.wikipedia.org/wiki/The_Magical_Number_Seven,_Plus_or_Minus_Two" rel="noopener ugc nofollow" target="_blank"> <strong class="la iu">神奇的数字7 </strong> </a>，或者说我们可以同时跟踪多少件事情。根据这篇论文，普通人的大脑在短期记忆中的一个点上最多可以容纳7个项目(给或拿2)。</p><p id="6f2b" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这个数字指导我如何写我所有的方法。如果我必须在一个方法中定义7个以上的变量，我会考虑可能的提取，即使提取的方法只使用一次。</p><p id="bea5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">看看这个方法:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="761c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">不难读，但不令人愉快。现在比较一下这个:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="bc6e" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我想世界上每个程序员都能说出代码应该做什么。这很容易理解。</p><p id="1e8c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">诚然，这个例子是琐碎的，但它证明了这一点。这个过程可以应用于每一段代码。将处理相同逻辑或导致单个操作(如NotifyAccountCreated方法)的行分组到一个块中，并提取它。</p><p id="2150" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在创建方法时，我至少遵循两个原则:<a class="ae mt" rel="noopener ugc nofollow" target="_blank" href="/the-single-responsibility-principle-made-simple-4e1597a44d7d">单一责任</a>和CQS(将在本文后面解释)。</p><h2 id="cfe2" class="lu lv it bd lw lx ly dn lz ma mb dp mc lh md me mf ll mg mh mi lp mj mk ml mm bi translated">避免否定(或让他们可见)</h2><p id="dbf7" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">消极的表达是有代价的。它们很难理解和调试。每一个否定都使我的大脑理解代码的工作量加倍。</p><p id="fc3f" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">现在，有时候不管出于什么原因，我都无法避免否定。这样的话，我想让它尽可能的可见。</p><p id="5213" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">有一次，我不得不检查一个方法，检查文本中的黑名单和白名单关键字。我和另一个程序员太专注于尽可能高效的算法，而忘记了注意一个“如果”!在里面。</p><p id="8212" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">什么更明显？</p><pre class="kj kk kl km gt mw mx my mz aw na bi"><span id="1f86" class="lu lv it mx b gy nb nc l nd ne">if(!isOpen)<br/><strong class="mx iu">or</strong> <br/>if(isOpen == false)</span></pre><p id="c028" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我知道== false写起来不好听，看起来很幼稚，但我从来没有因为错过阅读而为一个bug浪费时间。在我眼里，这个“！”变形为括号。</p><h2 id="c4b4" class="lu lv it bd lw lx ly dn lz ma mb dp mc lh md me mf ll mg mh mi lp mj mk ml mm bi translated">避免如果-否则地狱</h2><p id="bdac" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">没有人喜欢阅读多个if-else链接在一起。讽刺的是，没有人写它们。它们就像面包上的霉菌一样传播开来。</p><p id="1fa0" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我认为问题始于我们如何编排代码。我们经常受到截止日期的压力，所以捷径太诱人了。</p><p id="2aa9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">请看下面的片段:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="e9d8" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">即使是最初级的程序员也能遵循上述条件。但是，让我们将该功能扩展到美国以外的国家。比如日本。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="f560" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">事情开始变得复杂了。让我们再加入一个变量。在奥地利，16英镑可以买到某种饮料(比如啤酒)，18英镑可以买到烈性酒。</p><p id="7531" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">每一个新的if-else都是随着时间的推移而添加的。直到有一天，我们想知道是谁写了这样一个不可读/不可维护的代码。一切都是耦合和连接的，所以每一个新的变化都会带来许多可能的错误。</p><p id="790d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">一切都从第一个if-else开始。这就奠定了基础。所以我不惜一切代价避免使用“else”。有很多方法:</p><ul class=""><li id="8789" class="nf ng it la b lb lc le lf lh nh ll ni lp nj lt nk nl nm nn bi translated">if和早期回报的组合-&gt;这可以应用到上面的例子中。</li><li id="b270" class="nf ng it la b lb no le np lh nq ll nr lp ns lt nk nl nm nn bi translated">应用工厂设计模式或责任链(在应用它们之前查看上下文)</li><li id="4748" class="nf ng it la b lb no le np lh nq ll nr lp ns lt nk nl nm nn bi translated">使用字典存储一个键和一个调用该键的函数(这里的<a class="ae mt" href="https://towardsdatascience.com/dictionary-as-an-alternative-to-if-else-76fe57a1e4af" rel="noopener" target="_blank">就是一个例子)</a></li><li id="9fa1" class="nf ng it la b lb no le np lh nq ll nr lp ns lt nk nl nm nn bi translated">对于C#来说，使用注释和枚举的组合</li></ul><p id="1dd9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">还有很多方法可以避免if-else。谷歌上到处都是。只需寻找适合你情况的东西。</p><p id="914c" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu">不要过度。</strong>我不只是开始应用设计模式或反射或其他复杂的东西。我总是看上下文。</p><p id="b13a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果它只是一个简单的函数，扩展的机会极小，我会尝试应用If和早期回报的组合。然后我看字典。这些永远是我的首选。</p><p id="dffc" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">只有当这两个看起来不可收拾的时候，我才会去寻找更好的东西。记住，保持简单。</p><p id="7df5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">回到这个例子，只有当奥地利案例出现时，我才会开始考虑实现工厂模式。为什么？因为如果我从第一个需求开始实现这个奇特的设计，我很容易犯很多错误:</p><ul class=""><li id="4c5c" class="nf ng it la b lb lc le lf lh nh ll ni lp nj lt nk nl nm nn bi translated">我不知道开始时的变量，所以我可能提取出错误的抽象。当实际需求到来时，这导致了代码重写</li><li id="4095" class="nf ng it la b lb no le np lh nq ll nr lp ns lt nk nl nm nn bi translated">也许我在设计一些永远不会改变的东西。</li></ul><p id="caa4" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">不到需要的时候不要做。</p><h2 id="ded0" class="lu lv it bd lw lx ly dn lz ma mb dp mc lh md me mf ll mg mh mi lp mj mk ml mm bi translated"><strong class="ak">设计模式在解决问题时很有用</strong></h2><p id="5aae" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">作为一名初级程序员，我渴望向有经验的程序员证明自己。我认为实现大量的设计模式会显示我的价值，但事实上，这证明了我缺乏经验。</p><p id="7e65" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我的代码运行得很好，但是我用300行代码做的事情用50行就可以完成。现在，我不是说设计模式不好。他们解决问题。但是，在某个时间和地点，它们必须得到应用。对于小工具和任务，大多数时候，它们只是过度工程化了。</p><p id="9e2a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">我发现，在尽可能清晰地表达你的意图时，专注于降低代码圈复杂度比应用扭曲的设计更有助于代码维护。</p><h2 id="e18e" class="lu lv it bd lw lx ly dn lz ma mb dp mc lh md me mf ll mg mh mi lp mj mk ml mm bi translated"><strong class="ak">遵循CQS原理</strong></h2><p id="5880" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">告诉我这听起来是否熟悉:您正在调查一个bug，并且您隔离了系统中对它负责的部分。开始调试过程，一步一步地遍历代码。然后，进入一个函数，看看那不是原因，继续前进，进入另一个函数，等等，直到找到原因。</p><p id="ccb1" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果我们能跳过所有那些不必要的“步入”，能节省多少时间？</p><p id="36e5" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">CQS原则(命令查询分离)很简单，它规定我们应该把所有的功能看作命令或查询。</p><ul class=""><li id="f30d" class="nf ng it la b lb lc le lf lh nh ll ni lp nj lt nk nl nm nn bi translated">命令功能是那些改变系统状态的功能</li><li id="5e67" class="nf ng it la b lb no le np lh nq ll nr lp ns lt nk nl nm nn bi translated">查询函数是检索一些数据的函数。要信任他们，你需要知道，你想怎么叫他们就怎么叫，他们不会改变体制内的任何东西。</li></ul><p id="92a9" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">如果你有兴趣了解更多的原理，请查看这篇<a class="ae mt" rel="noopener ugc nofollow" target="_blank" href="/how-to-improve-your-code-readability-with-cqs-b54b43ca9fa5">文章</a>。</p><p id="badd" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated"><strong class="la iu">简单需要时间</strong></p><p id="a83d" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">在每一个新方法之后，我写道我会休息一会儿，只是看看和思考。这让我能够处理每一件新事物，让我能够寻找更好的方法。如果我写得像要赢得打字比赛一样，命名、提取和设计模式就不能被应用。</p><p id="2a8a" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">这里介绍的技巧虽然琐碎简单，但要真正有效，需要大量的思考。就像史蒂夫·乔布斯曾经说过的那样，“<em class="ms">简单可能比复杂更难:你必须努力让你的思维变得清晰，才能变得简单。”</em></p><p id="be90" class="pw-post-body-paragraph ky kz it la b lb lc ju ld le lf jx lg lh li lj lk ll lm ln lo lp lq lr ls lt im bi translated">慢慢来，节省时间。</p></div><div class="ab cl nt nu hx nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="im in io ip iq"><h1 id="5283" class="oa lv it bd lw ob oc od lz oe of og mc jz oh ka mf kc oi kd mi kf oj kg ml ok bi translated">分级编码</h1><p id="9417" class="pw-post-body-paragraph ky kz it la b lb mn ju ld le mo jx lg lh mp lj lk ll mq ln lo lp mr lr ls lt im bi translated">感谢您成为我们社区的一员！在你离开之前:</p><ul class=""><li id="9822" class="nf ng it la b lb lc le lf lh nh ll ni lp nj lt nk nl nm nn bi translated">👏为故事鼓掌，跟着作者走👉</li><li id="69aa" class="nf ng it la b lb no le np lh nq ll nr lp ns lt nk nl nm nn bi translated">📰查看<a class="ae mt" href="https://levelup.gitconnected.com/" rel="noopener ugc nofollow" target="_blank">升级编码</a>中的更多内容</li><li id="9070" class="nf ng it la b lb no le np lh nq ll nr lp ns lt nk nl nm nn bi translated">🔔关注我们:<a class="ae mt" href="https://twitter.com/gitconnected" rel="noopener ugc nofollow" target="_blank">Twitter</a>|<a class="ae mt" href="https://www.linkedin.com/company/gitconnected" rel="noopener ugc nofollow" target="_blank">LinkedIn</a></li><li id="dd23" class="nf ng it la b lb no le np lh nq ll nr lp ns lt nk nl nm nn bi translated">🚀👉<a class="ae mt" href="https://jobs.levelup.dev/" rel="noopener ugc nofollow" target="_blank"> <strong class="la iu">软件工程师的顶级工作</strong> </a></li></ul></div></div>    
</body>
</html>