<html>
<head>
<title>SwiftUI 3D Scroll Effect — Tutorial</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">SwiftUI 3D滚动效果—教程</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/swiftui-3d-scroll-effect-fa5310665738?source=collection_archive---------11-----------------------#2020-04-09">https://levelup.gitconnected.com/swiftui-3d-scroll-effect-fa5310665738?source=collection_archive---------11-----------------------#2020-04-09</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="7d62" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">让-马克·布里安内</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/007bf4cab0de32827e199969c864e10d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/0*pYnR4ym84WIZk3tf.gif"/></div><figcaption class="kq kr gj gh gi ks kt bd b be z dk translated">完成3D滚动效果</figcaption></figure><p id="e10c" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">这是我们今天要制作的3D滚动效果。在本教程结束时，您将能够在您的应用程序中的任何自定义SwiftUI视图中添加此3D效果。我们开始吧！</p><blockquote class="lq lr ls"><p id="078d" class="ku kv lt kw b kx ky ju kz la lb jx lc lu le lf lg lv li lj lk lw lm ln lo lp im bi translated">在开始之前，请考虑使用这个<a class="ae lx" href="https://trailingclosure.com/signup/" rel="noopener ugc nofollow" target="_blank">链接</a>订阅，如果你没有在<a class="ae lx" href="https://trailingclosure.com/" rel="noopener ugc nofollow" target="_blank">TrailingClosure.com</a>上阅读这篇文章，请随时来看看我们！</p></blockquote><h2 id="d1a8" class="ly lz it bd ma mb mc dn md me mf dp mg ld mh mi mj lh mk ml mm ll mn mo mp mq bi translated">入门指南</h2><p id="e2bc" class="pw-post-body-paragraph ku kv it kw b kx mr ju kz la ms jx lc ld mt lf lg lh mu lj lk ll mv ln lo lp im bi translated">首先创建一个新的SwiftUI视图。出于示例的目的，我将用不同的颜色显示矩形列表，所以我将视图命名为<code class="fe mw mx my mz b">ColorList</code>。</p><pre class="kj kk kl km gt na mz nb nc aw nd bi"><span id="553d" class="ly lz it mz b gy ne nf l ng nh">import SwiftUI<br/><br/>struct ColorList: View {<br/>    var body: some View {<br/>        Text("Hello, World!")<br/>    }<br/>}<br/><br/>struct ColorList_Previews: PreviewProvider {<br/>    static var previews: some View {<br/>        ColorList()<br/>    }<br/>}</span></pre><h2 id="c735" class="ly lz it bd ma mb mc dn md me mf dp mg ld mh mi mj lh mk ml mm ll mn mo mp mq bi translated">彩色信号数据</h2><p id="0f3e" class="pw-post-body-paragraph ku kv it kw b kx mr ju kz la ms jx lc ld mt lf lg lh mu lj lk ll mv ln lo lp im bi translated">在视图结构的顶部，添加一个用于跟踪颜色的变量。</p><pre class="kj kk kl km gt na mz nb nc aw nd bi"><span id="60d0" class="ly lz it mz b gy ne nf l ng nh">var colors: [Colors]</span></pre><h2 id="a24c" class="ly lz it bd ma mb mc dn md me mf dp mg ld mh mi mj lh mk ml mm ll mn mo mp mq bi translated">列清单</h2><p id="f221" class="pw-post-body-paragraph ku kv it kw b kx mr ju kz la ms jx lc ld mt lf lg lh mu lj lk ll mv ln lo lp im bi translated">在你的<code class="fe mw mx my mz b">body</code>变量中，去掉占位符<code class="fe mw mx my mz b">Text</code>。像这样在<code class="fe mw mx my mz b">ScrollView</code>里加上一个<code class="fe mw mx my mz b">HStack</code>包装。</p><pre class="kj kk kl km gt na mz nb nc aw nd bi"><span id="0f3c" class="ly lz it mz b gy ne nf l ng nh">var body: some View {<br/>    ScrollView(.horizontal, showsIndicators: false) {<br/>        HStack(alignment: .center, spacing: 50) {<br/><br/>        }<br/>    }<br/>}</span></pre><h2 id="d766" class="ly lz it bd ma mb mc dn md me mf dp mg ld mh mi mj lh mk ml mm ll mn mo mp mq bi translated">显示矩形</h2><p id="03b6" class="pw-post-body-paragraph ku kv it kw b kx mr ju kz la ms jx lc ld mt lf lg lh mu lj lk ll mv ln lo lp im bi translated">在您的<code class="fe mw mx my mz b">HStack</code>中，我们需要为存储在<code class="fe mw mx my mz b">colors</code>中的每种颜色显示一个<code class="fe mw mx my mz b">Rectangle</code>。为此我们将使用一个<code class="fe mw mx my mz b">ForEach</code>。我已经修改了矩形的框架，使之更符合传统的UI卡。</p><pre class="kj kk kl km gt na mz nb nc aw nd bi"><span id="43d3" class="ly lz it mz b gy ne nf l ng nh">var body: some View {<br/>    ScrollView(.horizontal, showsIndicators: false) {<br/>        HStack(alignment: .center, spacing: 20) {<br/>            ForEach(colors, id: \.self) { color in<br/>                Rectangle()<br/>                    .foregroundColor(color)<br/>                    .frame(width: 200, height: 300, alignment: .center)<br/>            }<br/>        }<br/>    }<br/>}</span></pre><p id="3e3a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果您继续为预览结构提供一个颜色列表，如下所示:</p><pre class="kj kk kl km gt na mz nb nc aw nd bi"><span id="8378" class="ly lz it mz b gy ne nf l ng nh">struct ColorList_Previews: PreviewProvider {<br/>    static var previews: some View {<br/>        ColorList(colors: [.blue, .green, .orange, .red, .gray, .pink, .yellow])<br/>    }<br/>}</span></pre><p id="46e8" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">你应该看看这个！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/61bcc0b96b0c430b8879f3a278f9d535.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/format:webp/0*NfpStvbJHfMO2Tqq.png"/></div></figure><h2 id="c86d" class="ly lz it bd ma mb mc dn md me mf dp mg ld mh mi mj lh mk ml mm ll mn mo mp mq bi translated">添加3D效果</h2><p id="01d3" class="pw-post-body-paragraph ku kv it kw b kx mr ju kz la ms jx lc ld mt lf lg lh mu lj lk ll mv ln lo lp im bi translated">从用<code class="fe mw mx my mz b">GeometryReader</code>包裹你的<code class="fe mw mx my mz b">Rectangle</code>开始。这将允许我们在<code class="fe mw mx my mz b">Rectangle</code>在屏幕上移动时获取对其框架的引用。</p><pre class="kj kk kl km gt na mz nb nc aw nd bi"><span id="ff5c" class="ly lz it mz b gy ne nf l ng nh">var body: some View {<br/>    ScrollView(.horizontal, showsIndicators: false) {<br/>        HStack(alignment: .center, spacing: 230) {<br/>            ForEach(colors, id: \.self) { color in<br/>                GeometryReader { geometry in<br/>                    Rectangle()<br/>                        .foregroundColor(color)<br/>                        .frame(width: 200, height: 300, alignment: .center)<br/>                }<br/>            }<br/>        }<br/>    }<br/>}</span></pre><p id="ac97" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">由于<code class="fe mw mx my mz b">GeometryReader</code>的工作方式，您需要更改上面定义的<code class="fe mw mx my mz b">HStack</code>间距。</p><p id="fe1a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">然后将这一行添加到您的<code class="fe mw mx my mz b">Rectangle</code></p><pre class="kj kk kl km gt na mz nb nc aw nd bi"><span id="e591" class="ly lz it mz b gy ne nf l ng nh">.rotation3DEffect(Angle(degrees: (Double(geometry.frame(in: .global).minX) - 210) / -20), axis: (x: 0, y: 1.0, z: 0))</span></pre><p id="a033" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">当<code class="fe mw mx my mz b">Rectangle</code>在屏幕上移动时，您传递到函数中的<code class="fe mw mx my mz b">Angle</code>会发生变化。请特别注意<code class="fe mw mx my mz b">.frame(in:)</code>功能。它允许您抓住<code class="fe mw mx my mz b">Rectangle</code>的<code class="fe mw mx my mz b">CGRect</code>并使用其<code class="fe mw mx my mz b">minX</code>坐标进行角度计算。</p><p id="ef80" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><code class="fe mw mx my mz b">axis</code>参数是一个元组，它详细说明了使用您刚刚传入的角度来修改哪个轴。在这种情况下，它是Y轴。</p><blockquote class="lq lr ls"><p id="bc06" class="ku kv lt kw b kx ky ju kz la lb jx lc lu le lf lg lv li lj lk lw lm ln lo lp im bi translated">rotation3DEffect()的文档可以在苹果官方网站的<a class="ae lx" href="https://developer.apple.com/documentation/swiftui/scrollview/3287538-rotation3deffect" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p></blockquote><p id="ac7a" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">如果你继续运行这个例子，你应该会看到你的<code class="fe mw mx my mz b">Rectangles</code>随着它们在屏幕上移动而旋转！</p><blockquote class="lq lr ls"><p id="dac1" class="ku kv lt kw b kx ky ju kz la lb jx lc lu le lf lg lv li lj lk lw lm ln lo lp im bi translated">我还修改了矩形的圆角半径，并添加了阴影，使它看起来更好一些。</p></blockquote><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/f001fa4c20ed3463dbd8aacd4409eada.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/0*IidRWGBSe936-9Ls.gif"/></div><figcaption class="kq kr gj gh gi ks kt bd b be z dk translated">很酷吧！？</figcaption></figure><h2 id="1fe1" class="ly lz it bd ma mb mc dn md me mf dp mg ld mh mi mj lh mk ml mm ll mn mo mp mq bi translated">最终产品</h2><pre class="kj kk kl km gt na mz nb nc aw nd bi"><span id="de17" class="ly lz it mz b gy ne nf l ng nh">struct ColorList: View {<br/>    <br/>    var colors:[Color]<br/>    <br/>    var body: some View {<br/>        ScrollView(.horizontal, showsIndicators: false) {<br/>            HStack(alignment: .center, spacing: 230) {<br/>                ForEach(colors, id: \.self) { color in<br/>                    GeometryReader { geometry in<br/>                        Rectangle()<br/>                            .foregroundColor(color)<br/>                            .frame(width: 200, height: 300, alignment: .center)<br/>                            .cornerRadius(16)<br/>                            .shadow(color: Color.black.opacity(0.2), radius: 20, x: 0, y: 0)<br/>                            .rotation3DEffect(Angle(degrees: (Double(geometry.frame(in: .global).minX) - 210) / -20), axis: (x: 0, y: 1.0, z: 0))<br/>                    }<br/>                }<br/>            }.padding(.horizontal, 210)<br/>        }<br/>    }<br/>}</span></pre><h2 id="bc95" class="ly lz it bd ma mb mc dn md me mf dp mg ld mh mi mj lh mk ml mm ll mn mo mp mq bi translated">那都是乡亲们！</h2><p id="4527" class="pw-post-body-paragraph ku kv it kw b kx mr ju kz la ms jx lc ld mt lf lg lh mu lj lk ll mv ln lo lp im bi translated">如果你喜欢这篇文章，请考虑使用这个<a class="ae lx" href="https://trailingclosure.com/signup/" rel="noopener ugc nofollow" target="_blank">链接</a>订阅我的网站，如果你没有在<a class="ae lx" href="https://trailingclosure.com/" rel="noopener ugc nofollow" target="_blank">TrailingClosure.com</a>上阅读这篇文章，请随时来看看我们！</p></div></div>    
</body>
</html>