<html>
<head>
<title>What are PropTypes and why do we use them</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">什么是PropTypes？我们为什么要使用它们</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/what-are-proptypes-why-use-them-933744e7583e?source=collection_archive---------22-----------------------#2020-04-05">https://levelup.gitconnected.com/what-are-proptypes-why-use-them-933744e7583e?source=collection_archive---------22-----------------------#2020-04-05</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="1b3d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">被劫持</p><p id="060d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在React中，我们将数据作为道具传递给React组件，不管它是来自另一个组件，还是来自Redux store或其他任何地方。数据在这些分隔化和模块化实体之间的移动是React如此吸引我和高效的原因。React可用于无缝构建复杂的数据网络，这些数据在整个程序过程中流动和转换。然而，一个应用程序的复杂结构可能会无缝地瓦解并陷入完全的混乱和黑暗。我最近发现的在React中调试和管理数据流的最有帮助的方法之一就是使用PropTypes。</p><p id="761c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">“prop-types”库用于在数据移入组件时对其进行类型检查。PropTypes可以帮助我们更有效地调试代码，并确保我们的代码在部署之前非常干净。</p><p id="8629" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">有了prop-types库，您可以对多种特性进行类型检查，包括但不限于从我们的props数据类型到对象prop的键和值。下面的例子展示了其中的一些，我创建了一个名为<code class="fe ko kp kq kr b">Example</code>的假想组件，并给它分配了一个名为propTypes的属性，然后将它设置为等于一个对象。该对象包含作为键的属性，验证每个属性都存在并且包含与提供给propTypes对象的内容一致的值，无论它们是布尔值(bool)、对象、数字、字符串、函数(func)等。</p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi ks"><img src="../Images/fc0171ba1a1369d950b9ea8fa30ebfda.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jDnA4yyQeb2FIGLJh0bcHA.png"/></div></div></figure><p id="f3ed" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">为了引出道具类型的有用性，我绘制了一个超级简单的小react应用程序，并从经典的Poke API获取数据。</p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div class="gh gi le"><img src="../Images/3e0396e199226756a43083fb1d9daaa2.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*Zve10C69-t6gYGaG0XPArA.gif"/></div></figure><p id="c2f4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">惊艳吧。</p><p id="167a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在这个应用程序中，我们可以无限循环播放前40个口袋妖怪，显示它们的名字，用圆圈的颜色表示它们的类型，特殊的动作和一点图像精灵。下面是我们应用组件的源代码:</p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi lf"><img src="../Images/96f4e0fe17bdd848bea04dcf2e90da43.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7uYVNp5TXP44sufXG5EO8w.png"/></div></div></figure><p id="1647" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在第一页上，在我们的应用程序功能组件中，我们正在获取口袋妖怪数据，并使用React钩子通过useState钩子设置allPoke的状态，并在useEffect钩子中获取我们的数据。然后，我们将存储在变量allPoke中的Pokemon数组作为道具传递给Pokecards组件。</p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi lg"><img src="../Images/bd1e4c12e3984179a9c53c7a85e51d87.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kTAHnWuCMkAJznLzq77xLg.png"/></div></div></figure><p id="4921" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在PokeCards组件中，我们在状态中设置了一个等于零的索引，并使用该索引状态将单个Pokemon从allPoke数组发送到PokeCard。我们还定义了函数，我们将在PokeCard组件中调用这些函数。在这个组件中，我们看到了使用“prop-types”库的第一个实例。在第二行，我们导入库并将其命名为PropTypes。prop-types库现在可以用来在我们的道具从一个组件传递到另一个组件时对它们进行类型检查。在第40行，我们给组件一个名为propTypes的属性，并将其设置为一个对象，该对象对传递给组件的每个属性进行类型检查。在这种情况下，我们将allPoke向下传递给这个组件，我们希望确保它的类型是array，并且它确实是运行所必需的，因此我们给它赋予了isRequired属性。</p><p id="2543" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我现在要中断我的应用程序，将allPoke属性设置为一个对象，而不是属性类型所需的数组。在第40行，我没有传递Pokemon对象的allPoke数组，只是传递了一个对象。这是我们在浏览器控制台中看到的。</p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi lh"><img src="../Images/57e4195cb96c9d4a297a14bb1675a970.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CME25TEK1TLofE2bUNn5fA.png"/></div></div></figure><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div class="gh gi li"><img src="../Images/3c88b92b92b7f6e8bc180e890deab1e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1036/format:webp/1*6oh4hYy_gs8ku1A4GwFP3Q.png"/></div></figure><p id="06f9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">看看那些错误！这就成功破了app。如果我们仔细看看第一个错误，我们会发现它是一个警告，告诉我们可能发生了什么。"警告:失败的属性类型:提供给` PokeCards '的类型` object '的属性` allPoke '无效，应为` array'。这个错误非常有用！它准确地告诉我们哪个变量被设置为错误的数据类型，警告在哪个组件中弹出，以及应该是哪种数据类型。想象一下，如果这发生在一个更大更复杂的应用程序上，会有多么大的帮助。想象一下，这是一个代码库，你只是在其中挖你的脚跟。</p><p id="57f8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">后一点展示了使用PropTypes的另一个好处:<em class="lj">上下文化</em>。使用React和查看其他React应用程序代码库的一个更困难的方面是理解另一个或许多其他开发人员的组件图的能力。PropTypes可用于向其他开发人员指示组件中的每个prop是什么类型的数据，从而为其他人提供进入数据流逻辑的访问点。</p><p id="af28" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这是另一个非常酷和有用的prop-types属性，我们可以用它来对代码进行类型检查。当在PropTypes对象上使用“exact”属性时，如果向对象添加了与我们的PropTypes中声明的值相矛盾的额外属性，该属性将警告我们。假设我们决定创建一个对象，该对象包含我们希望从PokeCards组件传递到PokeCard组件的样式属性。我们可以这样定义我们的州。</p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi lk"><img src="../Images/912f9064e35aa4fbcb12e499a29b38b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JDkRpGyirdRVD9MAeYdlmQ.png"/></div></div></figure><p id="6d74" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在将它作为道具从PokeCards传递到PokeCard之后，我们可以使用PropType的exact方法来检查这些确切的键。</p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi ll"><img src="../Images/792b6cc0c60f0270a22efc097abebe85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gxczGkttAPo8pk93U8y5Ng.png"/></div></div></figure><p id="5f36" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如您所见，PokeCard propTypes属性检查的不仅仅是pokeAbilitiesStyle属性。我们还检查我们的口袋妖怪道具是一个对象，onForwardClick和onBackClick是函数，索引是一个数字。我们可以注入这个样式对象作为我们的任何JSX元素的样式，它将应用给定的样式！但是让我们看看如果我们给我们的颜色pokeAbilitiesStyles添加一个键会发生什么。</p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi lm"><img src="../Images/e4cdad7f92b188d2df4a5a456d86a882.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HdpTISo3Z-XMtBWCPKODyA.png"/></div></div></figure><p id="ba1d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们的代码没有中断，蓝色实际上被应用了(*pokeAbilities样式被应用于“叶绿素”和“过度生长”，就在bulbasaur sprite下面)，但是看看我们控制台中的红色警告错误。该错误清楚地向我们表明，向pokeAbilitiesStyle属性提供了一个无效的键“color ”,而该颜色实际上不在我们的有效键中！</p><h1 id="0814" class="ln lo it bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">最后</h1><p id="4b9b" class="pw-post-body-paragraph jq jr it js b jt ml jv jw jx mm jz ka kb mn kd ke kf mo kh ki kj mp kl km kn im bi translated">PropTypes是JavaScript语言基本属性的陪衬:JavaScript是一种动态类型语言的事实。当我们在JavaScript中声明变量或给赋值函数参数时，我们不需要将它们赋给特定的数据类型。然而，对于Swift(我最近才开始接触的一个框架)，它是静态类型的，我们在调用函数之前声明函数参数的数据类型以及返回值的数据类型。</p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi mq"><img src="../Images/aad8adbf71eebf56edde68fcdbf46d01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_4qN3JauRFvaVjRvqJq-mg.png"/></div></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk translated">不是JAVASCRIPT</figcaption></figure><p id="b279" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在上面的示例中，我们定义了一个名为daysInQuarantine的函数，并为它提供了参数name和days。在我们的函数中，我们为每个参数分配了所需的数据类型，如果我们调用了daysInQuarantine并以不同的数据类型作为参数传入，将会产生一个错误。虽然这需要更多的输入，但这无疑比JavaScript更容易理解我们的代码，并使其符合上下文。</p><p id="d799" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">PropTypes赋予我们的对react props进行类型检查的能力是调试、数据组织和代码上下文化的有用工具。如果您想了解更多关于PropTypes的信息，我当然推荐您通过下面提供的链接查看React自己的关于PropTypes的文档。</p><p id="aea6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><a class="ae mv" href="https://reactjs.org/docs/typechecking-with-proptypes.html" rel="noopener ugc nofollow" target="_blank">https://reactjs.org/docs/typechecking-with-proptypes.html</a></p></div></div>    
</body>
</html>