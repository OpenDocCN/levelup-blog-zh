<html>
<head>
<title>5 ways to check if a Javascript Array is empty</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">检查Javascript数组是否为空的5种方法</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/5-ways-to-check-if-a-javascript-array-is-empty-77eff962a232?source=collection_archive---------2-----------------------#2022-03-28">https://levelup.gitconnected.com/5-ways-to-check-if-a-javascript-array-is-empty-77eff962a232?source=collection_archive---------2-----------------------#2022-03-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="74c2" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">外加打字提示</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/feb2977da12846b199cd7f0dbf24baf3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*24f6WRugb-q8nsjJ"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">Pawel Czerwinski 在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="78ae" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我将简要描述什么是Javascript (JS)数组，我们如何使用它，然后我将描述我们如何检查它是否为空。有更多的方法可以做到这一点，所以我将逐步描述它们，因为JS语言正在发展，现在我们有更好更简洁的方法来做到这一点。如果您使用Typescript (TS ),还有一种更有趣、更可靠的方法来检查空数组。</p><h1 id="27a0" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">JS数组简介</h1><p id="84c4" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">JS数组用于在一个列表中存储多个值。JS数组是JS对象的子类型。这意味着它以某种方式扩展了JS对象的行为。数组的文字语法使用方括号:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="cdf7" class="mu lt iq mq b gy mv mw l mx my">let myArray = []</span></pre><p id="ad7d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当对象使用花括号时:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="488f" class="mu lt iq mq b gy mv mw l mx my">let myObject = {}</span></pre><p id="2966" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">JS数组使用数字索引，从索引<code class="fe mz na nb mq b">0</code>开始。它们也有<code class="fe mz na nb mq b">length</code>属性，这是不言自明的。这里有一个例子:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="3b16" class="mu lt iq mq b gy mv mw l mx my">let myArray = [1, 245, 'apple', { type: 'fruit' }]</span><span id="cf30" class="mu lt iq mq b gy nc mw l mx my">myArray.length<br/>// 4</span></pre><p id="6611" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这个数组的长度是4，你可以看到我们可以混合任何我们想要的值(数字，字符串，对象等等。)这是我们获取个体价值的方式:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="fb11" class="mu lt iq mq b gy mv mw l mx my">myArray[0]<br/>// 1</span><span id="a6dd" class="mu lt iq mq b gy nc mw l mx my">myArray[2]<br/>// 'apple'</span></pre><p id="2b5f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">警告</strong></p><p id="b8a3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">JS数组中有所谓的“<a class="ae kv" href="https://github.com/getify/You-Dont-Know-JS/blob/2nd-ed/objects-classes/ch2.md#empty-slots" rel="noopener ugc nofollow" target="_blank">空槽</a>”。</p><blockquote class="nd ne nf"><p id="fdf0" class="kw kx ng ky b kz la jr lb lc ld ju le nh lg lh li ni lk ll lm nj lo lp lq lr ij bi translated">如果你给数组的一个索引赋值超过了数组的当前末端一个位置，JS会把中间的槽留为“空”，而不是像你所期望的那样自动把它们赋值为undefined。</p></blockquote><p id="b671" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">给定我们上面定义的数组，我们可以执行以下操作:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="9e03" class="mu lt iq mq b gy mv mw l mx my">myArray[10] = 'carrot'<br/>myArray.length<br/>// 11</span></pre><p id="64a9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所有其他职位都是不确定的。</p><p id="5198" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">关于数组有很多方法，我们可以做得更多，但作为一个介绍，这就够了。文章的主要部分如下:</p><h1 id="c9e9" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">JS数组是空的吗？存在吗？</h1><p id="c869" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">让我们描述5种检查JS数组是否为空以及是否存在的方法。</p><h2 id="0d96" class="mu lt iq bd lu nk nl dn ly nm nn dp mc lf no np me lj nq nr mg ln ns nt mi nu bi translated">1.长度属性</h2><p id="8dc7" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">你可能首先想到的是<code class="fe mz na nb mq b">length</code>地产，我们已经介绍过了。</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="88eb" class="mu lt iq mq b gy mv mw l mx my">myArray.length ? true : false</span></pre><p id="d0cd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果长度为0，将返回false。比如<code class="fe mz na nb mq b">myArray</code>未定义怎么办？或者，如果我们得到<code class="fe mz na nb mq b">null</code>，因为一个值来自后端呢？我们需要确保<code class="fe mz na nb mq b">myArray</code>存在，否则我们会得到以下错误:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nv"><img src="../Images/e19ffdb494097955ec3ad8fe38fd98ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*eyX03dV0VDV5lf-N.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">未捕获的类型错误:无法读取未定义的属性(读取“长度”)</figcaption></figure><h2 id="d409" class="mu lt iq bd lu nk nl dn ly nm nn dp mc lf no np me lj nq nr mg ln ns nt mi nu bi translated">2.And (&amp;&amp;)运算符和长度</h2><p id="1bfd" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">我们可以使用<code class="fe mz na nb mq b">&amp;&amp;</code>运算符来避免以前的错误。</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="f3c6" class="mu lt iq mq b gy mv mw l mx my">myArray &amp;&amp; myArray.length ? true : false</span></pre><p id="39f5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这很好，但是使用<a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining" rel="noopener ugc nofollow" target="_blank">可选链接操作符</a> <code class="fe mz na nb mq b">.?</code>有一个更短的方法。</p><h2 id="9812" class="mu lt iq bd lu nk nl dn ly nm nn dp mc lf no np me lj nq nr mg ln ns nt mi nu bi translated">3.可选链接(。？)</h2><p id="1dfc" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">我们可以不使用<code class="fe mz na nb mq b">&amp;&amp;</code>操作符来检查<code class="fe mz na nb mq b">myArray</code>是否存在，同时是否具有长度属性，而是编写:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="52c6" class="mu lt iq mq b gy mv mw l mx my">myArray?.length ? true : false</span></pre><p id="348e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">说到操作符，我还想提一下<a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Nullish_coalescing_operator" rel="noopener ugc nofollow" target="_blank">无效合并操作符</a>(?？).我们的数组也包含一个对象，所以我们可以检查它的属性。</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="527c" class="mu lt iq mq b gy mv mw l mx my">let myArray = [1, 245, 'apple', { type: 'fruit' }]<br/>myArray?.[3]?.type ?? 'No type property'<br/>// 'fruit'</span></pre><p id="8075" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果它是真的，我们在左边得到我们评估的任何东西，否则我们得到在右边的东西。</p><h2 id="73ea" class="mu lt iq bd lu nk nl dn ly nm nn dp mc lf no np me lj nq nr mg ln ns nt mi nu bi translated">4.逻辑NOT(！)</h2><p id="e8ee" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">这取决于你真正需要什么，但这里有另一种方法。逻辑not运算符对值求反。如果<code class="fe mz na nb mq b">myArray</code>为空，下面将返回<code class="fe mz na nb mq b">true</code>，即<code class="fe mz na nb mq b">[]</code>，或<code class="fe mz na nb mq b">undefined</code>或<code class="fe mz na nb mq b">null</code>。</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="0e9f" class="mu lt iq mq b gy mv mw l mx my">!myArray?.length ? true : false</span></pre><h2 id="14a1" class="mu lt iq bd lu nk nl dn ly nm nn dp mc lf no np me lj nq nr mg ln ns nt mi nu bi translated">5.isArray()方法</h2><p id="cd2b" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">但是，我们如何真正知道我们是否使用了数组呢？字符串上也存在长度属性。我们可以使用<a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/isArray" rel="noopener ugc nofollow" target="_blank"> isArray() </a>方法:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="b672" class="mu lt iq mq b gy mv mw l mx my">let myArray = [1, 245, 'apple', { type: 'fruit' }]</span><span id="6c99" class="mu lt iq mq b gy nc mw l mx my">Array.isArray(myArray)<br/>// true</span></pre><p id="be42" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">显然，您可以将上面列出的方法结合起来。例如:</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="0958" class="mu lt iq mq b gy mv mw l mx my">if (Array.isArray(myArray) &amp;&amp; myArray.length) {<br/>  // array exists and is not empty<br/>}</span></pre><h1 id="093f" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">类型脚本解决方案</h1><p id="249f" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">我推荐阅读卢卡·德尔·普波的这篇文章，看看下面的片段是如何详细工作的。</p><pre class="kg kh ki kj gt mp mq mr ms aw mt bi"><span id="2b5c" class="mu lt iq mq b gy mv mw l mx my">export interface NonEmptyArray&lt;A&gt; extends ReadonlyArray&lt;A&gt; {<br/>  // tslint:disable-next-line: readonly-keyword<br/>  0: A;<br/>}<br/>type ReadOnlyNotEmptyArray&lt;T&gt; = Readonly&lt;NotEmptyArray&lt;T&gt;&gt;;</span><span id="8db8" class="mu lt iq mq b gy nc mw l mx my">function isNotEmptyArray&lt;T&gt;(as: T[]): as is NotEmptyArray&lt;T&gt; {<br/>  return as.length &gt; 0;<br/>}</span></pre><h1 id="6466" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">结论</h1><p id="8daf" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">我列出了几种利用操作符来处理数组并检查它们是否为空的方法。我们从属性<code class="fe mz na nb mq b">length</code>开始，引入了操作符，如<code class="fe mz na nb mq b">&amp;&amp;</code>、可选链接<code class="fe mz na nb mq b">.?</code>、无效合并操作符<code class="fe mz na nb mq b">??</code>以及最后的<code class="fe mz na nb mq b">isArray()</code>方法。如果使用TypeScript，还可以将检查空数组的代码片段合并到应用程序中。</p><p id="b805" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">根据您的需要，您可以选择一种或多种方法并将它们组合在一起，或者您也可以编写类似于Typescript的助手函数。希望这篇文章对你有用。</p><h2 id="1a03" class="mu lt iq bd lu nk nl dn ly nm nn dp mc lf no np me lj nq nr mg ln ns nt mi nu bi translated">参考</h2><ul class=""><li id="e435" class="nw nx iq ky b kz mk lc ml lf ny lj nz ln oa lr ob oc od oe bi translated"><a class="ae kv" href="https://github.com/getify/You-Dont-Know-JS/blob/2nd-ed/objects-classes/ch2.md#arrays" rel="noopener ugc nofollow" target="_blank">你还不知道JS:对象&amp;类—第二版</a></li><li id="b7e2" class="nw nx iq ky b kz of lc og lf oh lj oi ln oj lr ob oc od oe bi translated"><a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining" rel="noopener ugc nofollow" target="_blank"> MDN网络文档</a></li><li id="29c9" class="nw nx iq ky b kz of lc og lf oh lj oi ln oj lr ob oc od oe bi translated"><a class="ae kv" href="https://www.youtube.com/watch?v=ULniqxZ8ueI" rel="noopener ugc nofollow" target="_blank">我在检查空数组错误(Youtube) </a></li><li id="a8fa" class="nw nx iq ky b kz of lc og lf oh lj oi ln oj lr ob oc od oe bi translated"><a class="ae kv" href="https://dev.to/this-is-learning/typescript-readonlynotemptyarray-2id7" rel="noopener ugc nofollow" target="_blank">Typescript—(ReadOnly)NotEmptyArray</a></li></ul></div></div>    
</body>
</html>