<html>
<head>
<title>Avoid using switch statements like this in your code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">é¿å…åœ¨ä»£ç ä¸­ä½¿ç”¨è¿™æ ·çš„switchè¯­å¥</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://levelup.gitconnected.com/avoid-using-switch-statements-like-this-in-your-code-b3dedea66d9?source=collection_archive---------6-----------------------#2022-12-07">https://levelup.gitconnected.com/avoid-using-switch-statements-like-this-in-your-code-b3dedea66d9?source=collection_archive---------6-----------------------#2022-12-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/33792e45c2701ca92f9318633b65f0f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*fY7ctb_FE98fk0fz.png"/></div></div></figure><p id="74d0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">åˆ‡æ¢è¯­å¥(<strong class="ka ir"> <em class="kw">æˆ–if)..elseâ€¦else if block for the matter</em></strong>)æ˜¯æ¯ä¸ªç¨‹åºå‘˜éƒ½ç†Ÿæ‚‰çš„ä»»ä½•ç¼–ç¨‹è¯­è¨€ä¸­æ•™æˆçš„æœ€åŸºæœ¬çš„æ¦‚å¿µã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†å­¦ä¹ è¿™ä¸ªç®€å•çš„æ¦‚å¿µå¦‚ä½•åœ¨ä½ çš„æºä»£ç ä¸­è¢«è¯¯ç”¨ï¼Œå¯¼è‡´ä¸€ä¸ªç³Ÿç³•çš„ä»£ç è®¾è®¡ï¼Œä»¥åŠæˆ‘ä»¬å¦‚ä½•ä¿®å¤å®ƒã€‚æˆ‘ä»¬èµ°å§ï¼ï¼ğŸš¶</p><p id="74aa" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">è€ƒè™‘ä¸€ä¸ªç®€å•çš„OOPåº”ç”¨ç¨‹åºï¼Œå…¶ä¸­æˆ‘ä»¬æœ‰ä¸€ä¸ª<code class="fe kx ky kz la b">Employee</code>ç±»ã€‚</p><pre class="lb lc ld le gt lf la lg bn lh li bi"><span id="b7b6" class="lj lk iq la b be ll lm l ln lo">class Employee<br/>{<br/>  ...............<br/>  ...........<br/><br/>  function calculateSalary()<br/>  {<br/>    switch(this.type)<br/>    {<br/>      case EMPLOYED    :  return this.totalSalary - 10% of this.totalSalary;<br/>      case FULL_TIME   :  return this.salary;<br/>      case FLEXIBLE    :  return this.working hours * 10;<br/>      default          :  throw new Exception();<br/>    }<br/>  }<br/><br/>  ................<br/>  ........<br/>}</span></pre><p id="2068" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æ‚¨è®¤ä¸ºè¿™æ®µä»£ç æœ‰ä»€ä¹ˆé—®é¢˜å—ï¼Ÿå¯èƒ½ä¸æ˜¯ç°åœ¨ï¼Œå¯¹å—ï¼Ÿ</p><p id="c69d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ç°åœ¨å‡è®¾åŒä¸€ä¸ªç±»éœ€è¦æ·»åŠ å¦ä¸€ä¸ªå‡½æ•°æ¥è®¡ç®—é›‡å‘˜çš„ç¨æ¬¾ã€‚</p><pre class="lb lc ld le gt lf la lg bn lh li bi"><span id="6e51" class="lj lk iq la b be ll lm l ln lo">class Employee<br/>{<br/>  ...............<br/>  ...........<br/>  //somewhere in the same Employee class<br/>  function calculateTax()<br/>  {<br/>    switch(this.type) // the same switch statement used here<br/>    {<br/>      case EMPLOYED    :  // return something<br/>      case FULL_TIME   :  // return something else<br/>      case FLEXIBLE    :  // return something else again<br/>      default          :  throw new Exception();<br/>    }<br/>  }<br/><br/>  ................<br/>  ........<br/>}</span></pre><p id="6bd0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">åœ¨è¿™ä¸ªç±»ä¸­å¦‚ä½•ä½¿ç”¨switchè¯­å¥æœ‰å‡ ä¸ªé—®é¢˜ã€‚é¦–å…ˆï¼Œæ˜¾è€Œæ˜“è§çš„æ˜¯:<em class="kw">æ–¹æ³•ä¸­çš„ä»£ç é‡å¤</em>ä½¿å¾—ç±»å˜å¤§äº†(å½“æ‚¨å¿…é¡»æ·»åŠ æ–°ç±»å‹çš„é›‡å‘˜æ—¶ï¼Œ<em class="kw">æˆ–è€…å°†æ¥ä¼šå˜å¤§)ã€‚è¿™ä¸ªç±»ä¸­æœ‰æ˜æ˜¾çš„ä»£ç é‡å¤ï¼Œå› ä¸ºåŒä¸€ä¸ªswitchè¯­å¥åœ¨å¤šä¸ªæ–¹æ³•ä¸­è¢«é‡ç”¨ã€‚è¿™é‡Œæ˜æ˜¾è¿åäº†<strong class="ka ir"><em class="kw">ã€SRPã€‘</em></strong>ã€‚</em></p><p id="ce8d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ç¬¬äºŒï¼Œè¿™ä¸ªç±»ä¹Ÿè¿åäº†<strong class="ka ir"> <em class="kw">å¼€é—­åŸåˆ™(OCP) </em> </strong>ï¼Œå› ä¸ºå½“ä½ åœ¨åº”ç”¨ç¨‹åºä¸­æ·»åŠ æ–°ç±»å‹çš„é›‡å‘˜æ—¶ï¼Œä½ å°†ä¸å¾—ä¸åœ¨ä¸¤ä¸ªä¸åŒçš„å‡½æ•°ä¸­åšåŒæ ·çš„æ”¹å˜:åœ¨<code class="fe kx ky kz la b">calculateTax</code>å’Œ<code class="fe kx ky kz la b">calculateSalary</code>æ–¹æ³•ä¸­æ·»åŠ ä¸€ä¸ª<code class="fe kx ky kz la b">case-return</code>å¯¹ã€‚å½“ä½ éœ€è¦åœ¨ä½ çš„åº”ç”¨ç¨‹åºä¸­åˆ é™¤ä¸€ä¸ªé›‡å‘˜ç±»å‹æ—¶ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œå³ä»ä¸¤ä¸ªæ–¹æ³•ä¸­åˆ é™¤<code class="fe kx ky kz la b">case-return</code>å¯¹ã€‚ç”šè‡³ä¸è¦è®©æˆ‘å¼€å§‹æ€è€ƒåœ¨ç±»<code class="fe kx ky kz la b">Employee</code>ä¸Šæ€ä¹ˆä¼šæœ‰åƒ<code class="fe kx ky kz la b">calculateEligibleLeave</code>å’Œ<code class="fe kx ky kz la b">calculateBonus</code>è¿™æ ·çš„æ–¹æ³•å¯ä»¥ä¸€æ¬¡åˆä¸€æ¬¡åœ°é‡ç”¨åŒä¸€ä¸ªswitchè¯­å¥ã€‚ğŸ˜© ğŸ˜©</p><p id="d244" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">å¼•ç”¨ç½—ä¼¯ç‰¹Â·é©¬ä¸åœ¨ä»–çš„åè‘—<a class="ae lp" href="https://www.oreilly.com/library/view/clean-code-a/9780136083238/" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir">ä¸­çš„å¹²å‡€ä»£ç </strong> </a>:</p><blockquote class="lq lr ls"><p id="3f83" class="jy jz kw ka b kb kc kd ke kf kg kh ki lt kk kl km lu ko kp kq lv ks kt ku kv ij bi translated">æˆ‘å¯¹switchè¯­å¥çš„ä¸€èˆ¬è§„åˆ™æ˜¯ï¼Œå¦‚æœå®ƒä»¬åªå‡ºç°ä¸€æ¬¡ï¼Œè¢«ç”¨æ¥åˆ›å»ºå¤šæ€å¯¹è±¡ï¼Œå¹¶ä¸”éšè—åœ¨ç»§æ‰¿å…³ç³»ä¹‹åï¼Œç³»ç»Ÿçš„å…¶ä»–éƒ¨åˆ†çœ‹ä¸åˆ°å®ƒä»¬ï¼Œé‚£ä¹ˆå®ƒä»¬æ˜¯å¯ä»¥å®¹å¿çš„ã€‚</p></blockquote><p id="0ed2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">é‚£ä¹ˆï¼Œæœ‰ä»€ä¹ˆè§£å†³åŠæ³•å‘¢ï¼Ÿè§£å†³æ–¹æ³•å°±æ˜¯ç®€å•çš„æŠŠswitchè¯­å¥åŸ‹åœ¨ä¸€ä¸ª<strong class="ka ir"> <em class="kw">æŠ½è±¡å·¥å‚</em> </strong>çš„åœ°ä¸‹å®¤é‡Œã€‚å·¥å‚å°†ä½¿ç”¨<em class="kw"> switch </em>è¯­å¥æ¥åˆ›å»º<code class="fe kx ky kz la b">Employee</code>æ´¾ç”Ÿçš„é€‚å½“å®ä¾‹ï¼Œå„ç§åŠŸèƒ½å°†é€šè¿‡<code class="fe kx ky kz la b">Employee</code>æ¥å£è¿›è¡Œå¤šæ€è°ƒåº¦ã€‚</p><pre class="lb lc ld le gt lf la lg bn lh li bi"><span id="eb71" class="lj lk iq la b be ll lm l ln lo">//a new class that is just responsible to take a employee and return an apropriate instance via its employee type<br/>class EmployeeFactory<br/>{<br/>  public Employee makeEmployee(Employee emp)<br/>  {<br/>    switch(emp.type)<br/>    {<br/>      case EMPLOYED    :  return new EmployedEmployee();<br/>      case FULL_TIME   :  return new FulltimeEmployee();<br/>      case FLEXIBLE    :  return new FlexibleEmploye();<br/>      default          :  throw new Exception();<br/>  }<br/>}</span></pre><p id="3e4b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">çœ‹åˆ°æ‰€æœ‰æ–°çš„èŒä¸šï¼Œåƒ<code class="fe kx ky kz la b">EmployedEmployee</code>å’Œ<code class="fe kx ky kz la b">FulltimeEmployee</code>ã€‚ä»–ä»¬ç°åœ¨è¦æœ‰æ–¹æ³•:<code class="fe kx ky kz la b">calculateTax</code>å’Œ<code class="fe kx ky kz la b">calculateSalary</code>ã€‚</p><pre class="lb lc ld le gt lf la lg bn lh li bi"><span id="aab1" class="lj lk iq la b be ll lm l ln lo">class EmployedEmployee extends Employee<br/>{<br/>  function calculateTax()<br/>  {<br/>    // return something<br/>  }<br/><br/>  function calculateSalary()<br/>  {<br/>    return this.totalSalary - 10% of this.totalSalary;<br/>  }<br/>}</span></pre><p id="c2e5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ç°åœ¨ï¼Œåœ¨è®¡ç®—ä»»ä½•å‘˜å·¥çš„ç¨æˆ–å·¥èµ„æ—¶ï¼Œåªéœ€è¿™æ ·åš:</p><pre class="lb lc ld le gt lf la lg bn lh li bi"><span id="28c3" class="lj lk iq la b be ll lm l ln lo">//a better solution<br/>class Employee<br/>{<br/>  ...............<br/>  ...........<br/>  function calculateTax()<br/>  {<br/>    return EmployeeFactory.makeEmployee(this).calculateTax();<br/>  }<br/><br/>  function calculateSalary()<br/>  {<br/>    return EmployeeFactory.makeEmployee(this).calculateSalary();<br/>  }<br/><br/>  ................<br/>  ........<br/>}<br/></span></pre><h2 id="abbf" class="lw lk iq bd lx ly lz dn ma mb mc dp md kj me mf mg kn mh mi mj kr mk ml mm mn bi translated">é‚£ä¹ˆè¿™æ®µä»£ç æ€ä¹ˆæ¯”å‰é¢çš„å¥½å‘¢ï¼Ÿ</h2><ol class=""><li id="feed" class="mo mp iq ka b kb mq kf mr kj ms kn mt kr mu kv mv mw mx my bi translated">è¯¥å‡†åˆ™æ˜¯å¦ä»ç„¶è¿å<em class="kw">å•ä¸€è´£ä»»åŸåˆ™</em>ï¼Ÿ<strong class="ka ir">å¦</strong>ã€‚å› ä¸ºswitchè¯­å¥åªè´Ÿè´£ä¸€ä»¶äº‹:è¿”å›ä¸€ä¸ªé›‡å‘˜çš„å¤šæ€å®ä¾‹ï¼Œä»…æ­¤è€Œå·²ã€‚</li><li id="30a1" class="mo mp iq ka b kb mz kf na kj nb kn nc kr nd kv mv mw mx my bi translated">ä»£ç æ˜¯å¦ä»ç„¶è¿å<em class="kw">å¼€é—­åŸåˆ™(OCP) </em>ï¼Ÿ<strong class="ka ir">å¦</strong>ã€‚å› ä¸ºå½“å¢åŠ æ–°å‘˜å·¥æ—¶ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨ä¸€ä¸ªåœ°æ–¹åšå‡ºæ”¹å˜ã€‚åœ¨å“ªé‡Œï¼Ÿå½“ç„¶æ˜¯åœ¨<code class="fe kx ky kz la b">EmployeeFactory</code>çš„<code class="fe kx ky kz la b">switch</code>è¯­å¥é‡Œé¢ã€‚å¦‚æœæ‚¨çš„åº”ç”¨ç¨‹åºéœ€è¦æ·»åŠ æ–°ç±»å‹çš„é›‡å‘˜ï¼Œè¯·åœ¨<code class="fe kx ky kz la b">EmployeeFactory</code>çš„<code class="fe kx ky kz la b">makeEmployee</code>æ–¹æ³•ä¸­æ·»åŠ æ–°çš„<code class="fe kx ky kz la b">case: return</code>å¯¹ã€‚åƒ<code class="fe kx ky kz la b">EmployedEmployee</code>å’Œ<code class="fe kx ky kz la b">FullTimeEmployee</code>ä¸€æ ·ï¼Œä¸ºæ–°å‘˜å·¥ç±»å‹æ·»åŠ ä¸€ä¸ªæ–°ç±»ã€‚å°±æ˜¯è¿™æ ·ï¼ä¸éœ€è¦æ”¹å˜ä»»ä½•ç°æœ‰çš„ç±»ã€‚</li></ol><p id="ed65" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æ‰€ä»¥ä¸‹æ¬¡ä½ å†™ä¸€ä¸ª<code class="fe kx ky kz la b">switch</code>æˆ–è€…<code class="fe kx ky kz la b">if â€¦ else â€¦ elseif</code>è¯­å¥çš„æ—¶å€™ï¼Œè¯•ç€æƒ³æƒ³<em class="kw">ç›¸åŒçš„switchè¯­å¥</em>æ˜¯å¦ä¼šè¢«å†™åœ¨ä½ æºä»£ç çš„å¦ä¸€ä¸ªåœ°æ–¹ã€‚å¦‚æœæ˜¯è¿™æ ·ï¼Œä½ å¯èƒ½è¦è€ƒè™‘åº”ç”¨<strong class="ka ir">æŠ½è±¡å·¥å‚è®¾è®¡æ¨¡å¼</strong>ã€‚</p><p id="4546" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æ„Ÿè°¢æ‚¨é˜…è¯»æ–‡ç« å¹¶åšæŒåˆ°æœ€åã€‚ğŸ˜ƒ</p></div><div class="ab cl ne nf hu ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ij ik il im in"><p id="fe82" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">å‚è€ƒæ–‡çŒ®</strong></p><p id="8ddc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">[1]å•ä¸€è´£ä»»åŸåˆ™<a class="ae lp" href="https://en.wikipedia.org/wiki/Single-responsibility_principle" rel="noopener ugc nofollow" target="_blank">https://en . Wikipedia . org/wiki/Single-respons ibility _ Principle</a></p><p id="184f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">[2]å¼€é—­åŸç†<a class="ae lp" href="https://en.wikipedia.org/wiki/Open%E2%80%93closed_principle" rel="noopener ugc nofollow" target="_blank">https://en.wikipedia.org/wiki/Open%E2%80%93closed_principle</a></p><p id="44ce" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">[3]æŠ½è±¡å·¥å‚æ¨¡å¼<a class="ae lp" href="https://en.wikipedia.org/wiki/Abstract_factory_pattern" rel="noopener ugc nofollow" target="_blank">https://en.wikipedia.org/wiki/Abstract_factory_pattern</a></p><p id="e165" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">[4]ç½—ä¼¯ç‰¹Â·å¡è¥¿å°”Â·é©¬ä¸çš„ã€Šå¹²å‡€çš„ä»£ç ã€‹</p></div></div>    
</body>
</html>