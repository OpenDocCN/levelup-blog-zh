<html>
<head>
<title>Getting Started with Mobile Development with Ionic and React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Ionic和React开始移动开发</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/getting-started-with-mobile-development-with-ionic-and-react-badc98fef59d?source=collection_archive---------5-----------------------#2021-01-23">https://levelup.gitconnected.com/getting-started-with-mobile-development-with-ionic-and-react-badc98fef59d?source=collection_archive---------5-----------------------#2021-01-23</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/3be3bc858e83de3fe0e59d5767f3f75b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*F-wuOQbgTfhOw_rR"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">照片由<a class="ae kf" href="https://unsplash.com/@mr_fresh?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">尤拉鲜</a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="fc7c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本文中，我们将看看如何使用带有React的Ionic框架开始移动开发。</p><h1 id="7d31" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">入门指南</h1><p id="a615" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以从安装一些东西开始。</p><p id="3b6e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">首先，我们通过运行以下命令来全局安装Ionic CLI:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="451e" class="mq lf it mm b gy mr ms l mt mu">npm install -g @ionic/cli native-run cordova-res</span></pre><p id="7539" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">接下来，我们可以通过运行以下命令来创建Ionic应用程序项目:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="81f4" class="mq lf it mm b gy mr ms l mt mu">ionic start ionic-app tabs --type=react --capacitor</span></pre><p id="5dfc" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mv mw mx mm b">tabs</code>在应用程序中添加标签。</p><p id="f92e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mv mw mx mm b">type</code>设置为<code class="fe mv mw mx mm b">react</code>意味着我们将创建一个React项目</p><p id="a3e1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mv mw mx mm b">--capacitor</code>意味着我们添加了电容器，这样我们就可以从我们的项目文件中运行和构建一个本地应用程序。</p><p id="2fd6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们运行:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="c579" class="mq lf it mm b gy mr ms l mt mu">npm install @ionic/react-hooks @ionic/pwa-elements</span></pre><p id="dcaf" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在<code class="fe mv mw mx mm b">ionic-app</code>项目文件夹中为我们的项目安装React钩子。</p><p id="3bf2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后，为了在浏览器中运行应用程序，我们运行:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="204b" class="mq lf it mm b gy mr ms l mt mu">ionic serve</span></pre><h1 id="4bac" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">使用Genymotion运行应用程序</h1><p id="978f" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">要使用Genymotion运行我们的应用程序并构建一个原生应用程序，我们需要做更多的事情。</p><p id="06c3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">首先，我们运行:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="fe3a" class="mq lf it mm b gy mr ms l mt mu">ionic build</span></pre><p id="a3be" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">创建资产文件夹。</p><p id="1938" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们运行:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="1eeb" class="mq lf it mm b gy mr ms l mt mu">npx cap add android <br/>npx cap sync</span></pre><p id="5a1e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">添加Android依赖项。</p><p id="b0da" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后需要安装Android Studio和Genymotion。</p><p id="cb96" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在我们安装了Android Studio之后，我们安装了Android Studio的Genymotion插件。</p><p id="07bf" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一旦我们这样做了，我们运行:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="fc69" class="mq lf it mm b gy mr ms l mt mu">ionic capacitor run android --livereload --external --address=0.0.0.0</span></pre><p id="0604" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在Genymotion中预览我们的应用程序。</p><p id="2b26" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在，我们应该看到应用程序重新加载生活。</p><h1 id="87f6" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">创建相机应用程序</h1><p id="4db0" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以使用Ionic轻松创建一个相机应用程序。</p><p id="8d40" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为此，我们转到<code class="fe mv mw mx mm b">Tab1.tsx</code>，写下:</p><p id="eb9a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mv mw mx mm b">pages/Tab1.tsx</code></p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="d311" class="mq lf it mm b gy mr ms l mt mu">import React, { useEffect, useState } from 'react';<br/>import { IonButton, IonCol, IonContent, IonGrid, IonHeader, IonImg, IonPage, IonRow, IonTitle, IonToolbar } from '@ionic/react';<br/>import ExploreContainer from '../components/ExploreContainer';<br/>import './Tab1.css';<br/>import { useCamera } from '@ionic/react-hooks/camera';<br/>import { CameraResultType, CameraSource } from "@capacitor/core";</span><span id="832a" class="mq lf it mm b gy my ms l mt mu">interface Photo {<br/>  filepath: string;<br/>  webviewPath?: string;<br/>}</span><span id="ced5" class="mq lf it mm b gy my ms l mt mu">function usePhotoGallery() {<br/>  const { getPhoto } = useCamera();<br/>  const [photos, setPhotos] = useState&lt;Photo[]&gt;([]);</span><span id="92fc" class="mq lf it mm b gy my ms l mt mu">  const takePhoto = async () =&gt; {<br/>    const cameraPhoto = await getPhoto({<br/>      resultType: CameraResultType.Uri,<br/>      source: CameraSource.Camera,<br/>      quality: 100<br/>    });</span><span id="55d0" class="mq lf it mm b gy my ms l mt mu">  const fileName = new Date().getTime() + '.jpeg';<br/>    const newPhotos = [{<br/>      filepath: fileName,<br/>      webviewPath: cameraPhoto.webPath<br/>    }, ...photos];<br/>    setPhotos(newPhotos)<br/>  };</span><span id="2977" class="mq lf it mm b gy my ms l mt mu">  return {<br/>    photos,<br/>    takePhoto<br/>  };<br/>}</span><span id="5e51" class="mq lf it mm b gy my ms l mt mu">const Tab1: React.FC = () =&gt; {<br/>  const { photos, takePhoto } = usePhotoGallery();</span><span id="4c14" class="mq lf it mm b gy my ms l mt mu">  return (<br/>    &lt;IonPage&gt;<br/>      &lt;IonHeader&gt;<br/>        &lt;IonToolbar&gt;<br/>          &lt;IonTitle&gt;Tab 1&lt;/IonTitle&gt;<br/>        &lt;/IonToolbar&gt;<br/>      &lt;/IonHeader&gt;<br/>      &lt;IonContent fullscreen&gt;<br/>        &lt;IonGrid&gt;<br/>          &lt;IonRow&gt;<br/>            &lt;IonButton onClick={takePhoto}&gt;take photo&lt;/IonButton&gt;<br/>          &lt;/IonRow&gt;<br/>          &lt;IonRow&gt;<br/>            {photos.map((photo, index) =&gt; (<br/>              &lt;IonCol size="6" key={index}&gt;<br/>                &lt;IonImg src={photo.webviewPath} /&gt;<br/>              &lt;/IonCol&gt;<br/>            ))}<br/>          &lt;/IonRow&gt;<br/>        &lt;/IonGrid&gt;<br/>      &lt;/IonContent&gt;<br/>    &lt;/IonPage&gt;<br/>  );<br/>};</span><span id="11fa" class="mq lf it mm b gy my ms l mt mu">export default Tab1;</span></pre><p id="5d0e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这是整个相机应用程序的代码。</p><p id="9e28" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们创建了<code class="fe mv mw mx mm b">usePhotoGallery</code>钩子，它使用<code class="fe mv mw mx mm b">useCamera</code>钩子调用<code class="fe mv mw mx mm b">getPhoto</code>函数来创建<code class="fe mv mw mx mm b">cameraPhoto</code>对象。</p><p id="4f89" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">有了它，摄像机就会显示。</p><p id="b13d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们添加<code class="fe mv mw mx mm b">newPhotos</code>数组来获取照片并放入<code class="fe mv mw mx mm b">photos</code>数组。</p><p id="f895" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mv mw mx mm b">webviewPath</code>有照片的路径。</p><p id="1a7b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在<code class="fe mv mw mx mm b">Tab1</code>组件中，我们添加了一个<code class="fe mv mw mx mm b">IonButton</code>来显示拍照按钮。</p><p id="83d8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们将<code class="fe mv mw mx mm b">onClick</code>道具设置为<code class="fe mv mw mx mm b">takePhoto</code>功能，以显示相机并拍摄照片。</p><p id="1f1d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后，一旦我们完成了拍照，我们就从<code class="fe mv mw mx mm b">photos</code>数组中获取照片并显示它们。</p><h1 id="a2ae" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">结论</h1><p id="7512" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以用Ionic轻松创建一个简单的应用程序。</p></div></div>    
</body>
</html>