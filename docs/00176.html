<html>
<head>
<title>ğŸ How to Send Image with Dialogflow</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ğŸå¦‚ä½•ç”¨Dialogflowå‘é€å›¾åƒ</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://levelup.gitconnected.com/how-to-send-image-via-dialogflow-f74c7dc72a8e?source=collection_archive---------0-----------------------#2018-07-23">https://levelup.gitconnected.com/how-to-send-image-via-dialogflow-f74c7dc72a8e?source=collection_archive---------0-----------------------#2018-07-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/c64975a9281913145370585ae2d86d71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1218/format:webp/1*BwI6Mm0OfJXYsJWESbNxvg.png"/></div></figure><p id="5795" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">æˆ‘åœ¨å»ºé€ åœ¨<strong class="jw ir">æ’æ˜Ÿ</strong>ä¸Šçš„å”®ç¥¨å¹³å°ä¸Šå·¥ä½œğŸš€éœ€è¦å‘é€å›¾åƒçš„åŒºå—é“¾ã€‚è¿™åº”è¯¥æ˜¯ç®€å•ä»»åŠ¡ï¼Œä½†æ˜¯ç”±äºç³Ÿç³•çš„æ–‡æ¡£ã€åå¯¹å’Œé™åˆ¶ï¼Œå®ƒå˜å¾—å¾ˆå›°éš¾ã€‚æœ¬æ–‡å°†æè¿°å¦‚ä½•ä½¿ç”¨Dialogflowå‘é€å›¾åƒ</p><h2 id="77e8" class="ks kt iq bd ku kv kw dn kx ky kz dp la kf lb lc ld kj le lf lg kn lh li lj lk bi translated">æ–¹å¼1:ä½¿ç”¨Dialogflow</h2><p id="a4b0" class="pw-post-body-paragraph ju jv iq jw b jx ll jz ka kb lm kd ke kf ln kh ki kj lo kl km kn lp kp kq kr ij bi translated">ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è·å–<a class="ae lq" href="https://github.com/dialogflow/dialogflow-fulfillment-nodejs" rel="noopener ugc nofollow" target="_blank"> <strong class="jw ir">å¯¹è¯æµ</strong>ä»£ç†å±¥è¡Œåº“(NodeJS) </a>:</p><pre class="lr ls lt lu gt lv lw lx ly aw lz bi"><span id="3a98" class="ks kt iq lw b gy ma mb l mc md">yarn add dialogflow-fulfillment<br/>// OR<br/>npm i --save dialogflow-fulfillment</span></pre><p id="c0c1" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">ç„¶å<code class="fe me mf mg lw b">require</code>å°†å…¶æ”¾å…¥æ‚¨çš„é¡¹ç›®ï¼Œå¹¶ä½¿ç”¨URLæ·»åŠ å›¾åƒ:</p><pre class="lr ls lt lu gt lv lw lx ly aw lz bi"><span id="b11f" class="ks kt iq lw b gy ma mb l mc md">const { WebhookClient, Image } = require('dialogflow-fulfillment')<br/>const agent = new WebhookClient({ request, response })</span><span id="2946" class="ks kt iq lw b gy mh mb l mc md">agent.add(<br/>  new Image('<a class="ae lq" href="https://avatars1.githubusercontent.com/u/36980416?s=200&amp;v=4" rel="noopener ugc nofollow" target="_blank">https://avatars1.githubusercontent.com/u/36980416</a>')<br/>)</span></pre><h2 id="d4e8" class="ks kt iq bd ku kv kw dn kx ky kz dp la kf lb lc ld kj le lf lg kn lh li lj lk bi translated">æ–¹å¼2:ä½¿ç”¨è„¸ä¹¦API</h2><p id="754b" class="pw-post-body-paragraph ju jv iq jw b jx ll jz ka kb lm kd ke kf ln kh ki kj lo kl km kn lp kp kq kr ij bi translated">2.2ä¸Šä¼ å›¾åƒåˆ°<strong class="jw ir">è„¸ä¹¦</strong></p><blockquote class="mi mj mk"><p id="5d94" class="ju jv ml jw b jx jy jz ka kb kc kd ke mm kg kh ki mn kk kl km mo ko kp kq kr ij bi translated">ç”¨æ‚¨çš„urlæ›¿æ¢<strong class="jw ir"> url </strong>å’Œ<strong class="jw ir"> $PAGE_ACCESS_TOKEN </strong></p></blockquote><pre class="lr ls lt lu gt lv lw lx ly aw lz bi"><span id="6e63" class="ks kt iq lw b gy ma mb l mc md">curl -X POST -H "Content-Type: application/json" -d '{<br/>  "message": {<br/>    "attachment": {<br/>      "type": "image",<br/>      "payload": {<br/>        "is_reusable": true,<br/>        "url": "<a class="ae lq" href="https://avatars1.githubusercontent.com/u/36980416?s=200&amp;v=4" rel="noopener ugc nofollow" target="_blank"><strong class="lw ir">https://avatars1.githubusercontent.com/u/36980416</strong></a>"<br/>      }<br/>    }<br/>  }<br/>}' "<a class="ae lq" href="https://graph.facebook.com/v2.6/me/message_attachments?access_token=$PAGE_ACCESS_TOKEN" rel="noopener ugc nofollow" target="_blank">https://graph.facebook.com/v2.6/me/message_attachments?access_token=<strong class="lw ir">$PAGE_ACCESS_TOKEN</strong></a>"</span></pre><p id="4f59" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">å“åº”åº”è¯¥å¦‚ä¸‹æ‰€ç¤º</p><pre class="lr ls lt lu gt lv lw lx ly aw lz bi"><span id="3ef0" class="ks kt iq lw b gy ma mb l mc md">{"attachment_id":"<strong class="lw ir">210118692982122</strong>"}</span></pre><p id="e832" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">2.2é€šè¿‡webhookä»è¯·æ±‚ä¸­è·å–<strong class="jw ir">sender id</strong>(<strong class="jw ir">2238896416126713</strong>for me)</p><pre class="lr ls lt lu gt lv lw lx ly aw lz bi"><span id="3a87" class="ks kt iq lw b gy ma mb l mc md">request.body.originalDetectIntentRequest.payload.data.sender.id</span></pre><p id="0ea6" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">2.3é€šè¿‡messengerå‘é€</p><pre class="lr ls lt lu gt lv lw lx ly aw lz bi"><span id="30fd" class="ks kt iq lw b gy ma mb l mc md">curl -X POST -H "Content-Type: application/json" -d '{<br/>  "messaging_type": "NON_PROMOTIONAL_SUBSCRIPTION",<br/>  "recipient": {<br/>    "id": "<strong class="lw ir">2238896416126713</strong>"<br/>  },<br/>  "message":{<br/>    "attachment":{<br/>      "type":"image", <br/>      "payload":{<br/>        "attachment_id": "<strong class="lw ir">210118692982122</strong>"<br/>      }<br/>    }<br/>  }<br/>}' "<a class="ae lq" href="https://graph.facebook.com/v2.6/me/messages?access_token=$PAGE_ACCESS_TOKEN" rel="noopener ugc nofollow" target="_blank">https://graph.facebook.com/v2.6/me/messages?access_token=<strong class="lw ir">$PAGE_ACCESS_TOKEN</strong></a>"</span></pre><p id="2c65" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">æŒ‘ä¸€ä¸ªå°±æå®šäº†ï¼Œè€¶ï¼</p><figure class="lr ls lt lu gt jr gh gi paragraph-image"><a href="https://levelup.gitconnected.com"><div class="gh gi mp"><img src="../Images/439094b9a664ef0239afbc4565c6ca49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S9uYu-fFL3hIQLGVu0o-EQ.png"/></div></a></figure></div></div>    
</body>
</html>