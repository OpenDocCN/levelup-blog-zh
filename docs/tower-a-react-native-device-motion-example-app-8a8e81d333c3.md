# Tower:ä¸€ä¸ª React-Native è®¾å¤‡è¿åŠ¨ç¤ºä¾‹åº”ç”¨ç¨‹åº

> åŸæ–‡ï¼š<https://levelup.gitconnected.com/tower-a-react-native-device-motion-example-app-8a8e81d333c3>

![](img/857d02418a1bfc34cfa51995cad54e7f.png)

Tower:ä¸€ä¸ª React-Native è®¾å¤‡è¿åŠ¨ç¤ºä¾‹åº”ç”¨ç¨‹åº

## ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œè¯´æ˜å¦‚ä½•åœ¨ expo ä¸­ä½¿ç”¨è®¾å¤‡åŠ¨ä½œã€‚

æˆ‘åœ¨ç ”ç©¶è‹¹æœçš„æŒ‡å—é’ˆåº”ç”¨ç¨‹åºï¼Œå®ƒä¹Ÿæœ‰è°ƒå¹³åŠŸèƒ½ã€‚æˆ‘æƒ³åˆ°åˆ›å»ºç›¸åŒçš„åº”ç”¨ç¨‹åºä½œä¸ºä¾‹å­æ¥ç†è§£ç§»åŠ¨è®¾å¤‡è¿åŠ¨çš„ç‰©ç†å­¦ã€‚ç»è¿‡å¤šæ¬¡æ€è€ƒï¼Œæˆ‘æƒ³åˆ›å»ºä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œå°†æ˜¾ç¤ºä¸€ä¸ªåœ†æŸ±å¡”çš„é˜´å½±ï¼Œæˆ‘ä»¬çš„è¿åŠ¨æ˜¯ä»ä¸åŒè§’åº¦çœ‹åœ†æŸ±çš„ç›¸æœºè§†å›¾ã€‚

ä»è¿™ä¸ªç®€å•çš„é¡¹ç›®å¼€å§‹ï¼Œé¦–å…ˆï¼Œè®©æˆ‘ä»¬ä»æˆ‘ä»¬å°†åœ¨é¡¹ç›®ä¸­ä½¿ç”¨çš„ä¸åŒåº“çš„æ¦‚è¿°å¼€å§‹ã€‚

# ååº”-è‡ªç„¶

React Native æ˜¯ä¸€ä¸ª JavaScript æ¡†æ¶ï¼Œç”¨äºä¸º iOS å’Œ Android ç¼–å†™çœŸå®çš„ã€æœ¬åœ°å‘ˆç°çš„ç§»åŠ¨åº”ç”¨ç¨‹åºã€‚

# ä¸–åšä¼š

[Expo](http://expo.io) æ˜¯ä¸€ä¸ªé€šç”¨ React åº”ç”¨çš„æ¡†æ¶å’Œå¹³å°ã€‚å®ƒæ˜¯ä¸€å¥—å›´ç»• React åŸç”Ÿå’ŒåŸç”Ÿå¹³å°æ„å»ºçš„å·¥å…·å’ŒæœåŠ¡ï¼Œå¸®åŠ©æ‚¨ä»ç›¸åŒçš„ JavaScript/Typescript ä»£ç åº“å¼€å‘ã€æ„å»ºã€éƒ¨ç½²å’Œå¿«é€Ÿè¿­ä»£ iOSã€Android å’Œ web åº”ç”¨ç¨‹åºã€‚

# Expo ä¼ æ„Ÿå™¨

[Expo-Sensors](https://docs.expo.io/versions/latest/sdk/sensors/) æä¾›å„ç§ API æ¥è®¿é—®è®¾å¤‡ä¼ æ„Ÿå™¨ï¼Œä»¥æµ‹é‡è¿åŠ¨ã€æ–¹å‘ã€å‹åŠ›ã€ç£åœºå’Œæ­¥æ•°ã€‚æˆ‘ä»¬å°†ä½¿ç”¨è¿™ä¸ªåº“ä¸­çš„ [DeviceMotion](https://docs.expo.io/versions/latest/sdk/devicemotion/) ã€‚

# ååº”-åŸç”Ÿ-SVG

React-Native-SVG ä¸º iOS å’Œ Android ä¸Šçš„ React Native æä¾›äº† SVG æ”¯æŒï¼Œå¹¶ä¸º web æä¾›äº†ä¸€ä¸ªå…¼å®¹å±‚ã€‚æˆ‘ä»¬å°†ä½¿ç”¨è¿™ä¸ªåº“é€šè¿‡åœ†å’Œçº¿æ¥è®¾è®¡ä¸€ä¸ªåœ†æŸ±ä½“çš„å¹»è±¡ã€‚

# **åˆ›å»ºé¡¹ç›®æ–‡ä»¶å¤¹**

å¦‚æœæ‚¨æ˜¯ä¸€å React-Native å¼€å‘äººå‘˜ï¼Œæ‚¨å·²ç»çŸ¥é“å¦‚ä½•åˆ›å»º Expo é¡¹ç›®ã€‚

```
expo init tower
```

# å®‰è£…åº“

*   `react-native-svg` â€” [React-Native-SVG](https://github.com/react-native-community/react-native-svg)
*   `expo-sensors` â€” [æ›å…‰ä¼ æ„Ÿå™¨](https://docs.expo.io/versions/latest/sdk/sensors/)

æ‚¨å¿…é¡»ä½¿ç”¨ **expo install** æ¥ç¡®ä¿æ‚¨ä¸‹è½½çš„åŒ…æ˜¯ä¸æ‚¨çš„é¡¹ç›®æ­£åœ¨è¿è¡Œçš„ SDK ç‰ˆæœ¬å…¼å®¹çš„åˆé€‚çš„åŒ…ã€‚

```
expo install react-native-svg expo-sensors
```

åœ¨å‘æ‚¨å±•ç¤ºä»£ç ä¹‹å‰ï¼Œæˆ‘å¿…é¡»è§£é‡Šå¦‚ä½•ä½¿ç”¨ DeviceMotion åº“ã€‚æˆ‘ä»¬é¦–å…ˆåƒè¿™æ ·ä»`expo-sensors`å¯¼å…¥åº“:

```
import { DeviceMotion } from 'expo-sensors'; 
```

> `[DeviceMotion.addListener(listener)](https://docs.expo.io/versions/latest/sdk/devicemotion/#devicemotionaddlistenerlistener)`

DeviceMotion æä¾›äº†ä¸€ä¸ªåä¸º addListener çš„å‡½æ•°æ¥è®¢é˜… DeviceMotion çš„æ›´æ–°ã€‚è¿™é‡Œæˆ‘ä»¬æ·»åŠ äº†ä¾¦å¬å™¨å‡½æ•°ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªå¯¹è±¡ä½œä¸ºå•ä¸ªå‚æ•°ã€‚

åœ¨è¿™ä¸ªå¯¹è±¡ä¸­ï¼Œæˆ‘ä»¬æ„Ÿå…´è¶£çš„æ˜¯æ—‹è½¬å¯¹è±¡ï¼Œå®ƒæ˜¯è®¾å¤‡åœ¨ç©ºé—´ä¸­ä½œä¸ºå…·æœ‰ alphaã€betaã€gamma é”®çš„å¯¹è±¡çš„æ–¹å‘ï¼Œå…¶ä¸­ alpha è¡¨ç¤ºç»• Z è½´æ—‹è½¬ï¼Œbeta è¡¨ç¤º X è½´æ—‹è½¬ï¼Œgamma è¡¨ç¤º Y è½´æ—‹è½¬ã€‚

ä¸ºäº†è§£é‡Šè¿™äº›å€¼å’Œè½´æ—‹è½¬ï¼Œä¸‹é¢æ˜¯æ¥è‡ª [developers.google](https://developers.google.com/web/fundamentals/native-hardware/device-orientation) çš„æ–‡æ¡£:

# è®¾å¤‡åæ ‡æ¡†æ¶

![](img/5d546e434b30e16e2457f48e9c01658a.png)

è®¾å¤‡åæ ‡æ¡†æ¶å›¾

ç”±å€¼`x`ã€`y`å’Œ`z`æè¿°çš„å™¨ä»¶åæ ‡æ¡†æ¶åŸºäºå™¨ä»¶ä¸­å¿ƒå¯¹é½ã€‚

**æ³¨æ„:**åœ¨ç»™å®šçš„æ–‡æ¡£å’Œæˆ‘ä»¬çš„ listener å¯¹è±¡ä¸­ï¼Œalphaï¼Œbeta & gamma çš„å€¼æ˜¯ä¸åŒçš„æ ¼å¼ï¼Œå–å€¼èŒƒå›´ä»-Ï€åˆ°Ï€ï¼Œå› æ­¤æµ®ç‚¹å€¼ä¸º-3.14 åˆ° 3.14

## å¸Œè…Šå­—æ¯çš„ç¬¬ä¸€ä¸ªå­—æ¯

![](img/158b3b0aeaac4bc6ddda2c532aa0aca3.png)

è®¾å¤‡åæ ‡æ¡†æ¶ä¸­ alpha çš„å›¾ç¤º

ç»• z è½´çš„æ—‹è½¬ã€‚å½“è®¾å¤‡é¡¶éƒ¨ç›´æ¥æŒ‡å‘åŒ—æ–¹æ—¶ï¼Œ`alpha`å€¼ä¸º 0ã€‚éšç€è®¾å¤‡é€†æ—¶é’ˆæ—‹è½¬ï¼Œ`alpha`å€¼å¢åŠ ã€‚

## è´å¡”

![](img/74b70f2ff7454b32e2b1a915895c0aa2.png)

å™¨ä»¶åæ ‡æ¡†æ¶ä¸­çš„Î²å›¾

ç»• x è½´çš„æ—‹è½¬ã€‚å½“è®¾å¤‡çš„é¡¶éƒ¨å’Œåº•éƒ¨ä¸åœ°çƒè¡¨é¢è·ç¦»ç›¸ç­‰æ—¶,`beta`å€¼ä¸º 0ã€‚è¯¥å€¼éšç€è®¾å¤‡é¡¶éƒ¨å‘åœ°çƒè¡¨é¢å€¾æ–œè€Œå¢åŠ ã€‚

## å¾®å…‹

![](img/8699489ef1b27f42caf639ecb86ea067.png)

è®¾å¤‡åæ ‡æ¡†æ¶ä¸­çš„ gamma å›¾

ç»• y è½´çš„æ—‹è½¬ã€‚å½“è®¾å¤‡çš„å·¦å³è¾¹ç¼˜ä¸åœ°çƒè¡¨é¢è·ç¦»ç›¸ç­‰æ—¶ï¼Œ`gamma`å€¼ä¸º 0ã€‚è¯¥å€¼éšç€å³ä¾§å‘åœ°çƒè¡¨é¢å€¾æ–œè€Œå¢åŠ ã€‚

åœ¨è¿™ä¸ªé¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬åªéœ€è¦ beta å’Œ gamma å€¼ï¼Œå› ä¸ºæˆ‘ä»¬è¯•å›¾åˆ›å»ºä¸€ä¸ªæ‘„åƒå¤´è§†å›¾æ¥æŸ¥çœ‹ä½äºå±å¹•ä¸­å¿ƒçš„å¯¹è±¡ï¼Œæ‰€ä»¥ Z è½´ä¸Šçš„æ•°æ®æ²¡æœ‰ç”¨ã€‚

ä¸‹é¢æ˜¯å¦‚ä½•æ·»åŠ ä¾¦å¬å™¨å¹¶å­˜å‚¨æ—‹è½¬æ•°æ®:

æˆ‘ä»¬å°†ä½¿ç”¨è¿™äº›æ•°æ®æ¥æ¸²æŸ“æˆ‘ä»¬çš„åœ†æŸ±ä½“ã€‚ä¸ºäº†ç»˜åˆ¶åœ†æŸ±ä½“ï¼Œæˆ‘ä»¬ä½¿ç”¨ react-native-svg åº“ï¼Œå®ƒæä¾›äº†åŸºæœ¬å…ƒç´ ï¼Œå¦‚åœ†å½¢ã€çŸ©å½¢ã€ç›´çº¿ç­‰ç­‰ã€‚æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªå›ºå®šçš„é˜´å½±å…ƒç´ å’Œä¸€ä¸ªç§»åŠ¨çš„åœ†æŸ±å…ƒç´ ã€‚

![](img/6805753a93b7e23ef2cbf0793163574a.png)

é˜´å½±å…ƒç´ 

é˜´å½±å…ƒç´ æ˜¯ç”¨ä¸€æ¡çº¿å’Œä¸€ä¸ªåœ†ç»˜åˆ¶çš„ã€‚åœ¨ç»˜åˆ¶è¿™ä¸ªå…ƒç´ æ—¶ï¼Œå…ƒç´ çš„å †å å¹¶ä¸é‡è¦ï¼Œå› ä¸ºå®ƒä»¬å…·æœ‰ç›¸åŒçš„é¢œè‰²ï¼Œå¹¶ä¸”æ˜¯å›ºå®šçš„å…ƒç´ ã€‚é˜´å½±å°†ä»ä¸­é—´æŠ•å°„åˆ°å·¦ä¸Šè§’çš„ä¸­é—´ã€‚

ä¸‹é¢æ˜¯é˜´å½±å…ƒç´ çš„ä»£ç :

å¯¹äºåœ†æŸ±ä½“å…ƒç´ ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ beta å’Œ gamma å€¼æ¥æ”¾ç½®åæ ‡ç³»ä¸­çš„å¯¹è±¡ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¦‚ä½•å®šä½å¯¹è±¡ä¸­çš„å…ƒç´ å¾ˆé‡è¦ï¼Œå› ä¸ºå®ƒä»¬å¤„äºè¿åŠ¨ä¸­ï¼Œå¹¶ä¸”å…·æœ‰ä¸åŒçš„é¢œè‰²ã€‚æœ€ä¸Šé¢çš„å­å…ƒç´ ä½äºç»˜åˆ¶å †æ ˆçš„åº•éƒ¨ã€‚æ°”ç¼¸ä¸­ä½¿ç”¨äº†å››ä¸ªå…ƒä»¶:

*   å……å½“å¡”èº«çš„çº¿ã€‚
*   ä½œä¸ºå¡”åº•çš„å›ºå®šåœ†ã€‚
*   å¡”ä½“ä¸Šçš„ç»†çº¿ï¼Œè¡¨æ˜å®ƒæ˜¯å¡”çš„å‰é¢ã€‚
*   ä¸€ä¸ªå……å½“å¡”é¡¶çš„åœ†åœˆã€‚

æˆ‘å·²ç»æ”¹å˜äº†é¢œè‰²ï¼Œè®©ä½ æ˜ç™½æ¯ä¸ªå…ƒç´ ï¼Œå¦åˆ™çœŸæ­£çš„å…ƒç´ å°†çœ‹èµ·æ¥åƒåœ¨ä¸»å›¾åƒçš„é¡¶éƒ¨ã€‚

![](img/8d86fb38d16ca2524145201920a8f4f5.png)

ä»¥ä¸‹æ˜¯åœ†æŸ±ä½“å…ƒç´ çš„ä»£ç :

beta å’Œ gamma å€¼å››èˆäº”å…¥åˆ°å°æ•°ç‚¹åä¸¤ä½ã€‚åªæœ‰å½“ beta ä¸ºæ­£æ—¶ï¼Œbeta ä¹Ÿç”¨äºæ˜¾ç¤ºå‰çº¿ï¼Œè¿™æ„å‘³ç€ä»é¢å‘å¤©ç©ºçš„å±å¹•åˆ°é¢å‘æ‚¨å±å¹•çš„å±å¹•çš„è§’åº¦ã€‚

è¿˜æœ‰ä¸€ä¸ª gamma align å¸ƒå°”å€¼æ¥æ£€æŸ¥å±å¹•æ˜¯å¦åœ¨é¡¶è§†å›¾ä¸Šï¼Œå¦‚æœä¸æ˜¯ï¼Œåˆ™å±å¹•ä¼šæ˜¾ç¤ºæ–‡æœ¬â€œä¿æŒå±å¹•åœ¨é¡¶éƒ¨ï¼â€ã€‚ç°åœ¨ï¼Œç»“åˆæ‰€æœ‰çš„ä»£ç ï¼Œè¿™é‡Œæ˜¯ä»£ç å°†å¦‚ä½•ã€‚

å¡”å¼åº”ç”¨ç¨‹åºâ€” App.js

# ç»“è®º

è¿™å°±æ˜¯è¿™ä¸ªé¡¹ç›®çš„å…¨éƒ¨ï¼Œä½†è®¸å¤šäº‹æƒ…å¯ä»¥åœ¨è¿™æ–¹é¢è¿›ä¸€æ­¥å·¥ä½œï¼Œå¦‚ä½¿ç”¨ alpha å€¼æ ¹æ®å¤ªé˜³çš„ä½ç½®æ¥å®šä½é˜´å½±ï¼Œæˆ–ä½¿ç”¨ DeviceMotion å’Œ three.js çš„ 3D æ¨¡å‹ã€‚è¿™åªæ˜¯ä¸€ä¸ªä¾‹å­ï¼Œä¾›åˆå­¦è€…æ£€æŸ¥å¦‚ä½•ç”¨ç®€å•è¯¦ç»†çš„è§£é‡Šä»£ç å®ç° DeviceMotionã€‚

> ä½ å¯ä»¥åœ¨ GitHub ä¸ŠæŸ¥çœ‹è¿™ä¸ªé¡¹ç›®ã€‚

[](https://github.com/tejas77/tower) [## tejas 77/å¡”

### ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œè¯´æ˜å¦‚ä½•åœ¨ expo ä¸­ä½¿ç”¨è®¾å¤‡åŠ¨ä½œã€‚æˆ‘åœ¨çœ‹è‹¹æœçš„â€¦

github.com](https://github.com/tejas77/tower) 

***è°¢è°¢ã€‚*ğŸ¤—**