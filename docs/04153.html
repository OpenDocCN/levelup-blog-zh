<html>
<head>
<title>JavaScript Best Practices — Objects and Variables</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript最佳实践—对象和变量</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/javascript-best-practices-objects-and-variables-6d16da92d767?source=collection_archive---------23-----------------------#2020-06-11">https://levelup.gitconnected.com/javascript-best-practices-objects-and-variables-6d16da92d767?source=collection_archive---------23-----------------------#2020-06-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/5906edf9c86288f1351e4515d2852b1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*H95PglyiFdUsUQrK"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">安娜·沙利文在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="96a0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">JavaScript是一种简单易学的编程语言。编写运行并执行某些操作的程序很容易。然而，很难考虑所有的用例并编写健壮的JavaScript代码。</p><p id="1b5f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本文中，我们将探讨处理对象和变量的最佳方式。</p><h1 id="070c" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">使用变量访问属性时，请使用括号表示法</h1><p id="bc4d" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">当我们用变量访问属性时，我们应该使用括号符号。</p><p id="4fde" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="cc53" class="mq lf it mm b gy mr ms l mt mu">const getVal = (prop) =&gt; {<br/>  return foo[prop];<br/>}</span><span id="84e4" class="mq lf it mm b gy mv ms l mt mu">const bar = getProp('jedi');</span></pre><p id="31b4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">上面的代码有一个<code class="fe mw mx my mm b">getVal</code>函数将<code class="fe mw mx my mm b">prop</code>传递给对象<code class="fe mw mx my mm b">foo</code>。</p><h1 id="3de4" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">计算指数时使用指数运算符</h1><p id="87d2" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们应该用<code class="fe mw mx my mm b">**</code>求幂，而不是用<code class="fe mw mx my mm b">Math.pow</code>。</p><p id="c503" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="56d1" class="mq lf it mm b gy mr ms l mt mu">const result = 2 ** 5;</span></pre><p id="41ca" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">而不是写:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="8bcd" class="mq lf it mm b gy mr ms l mt mu">const result = Math.pow(2, 5);</span></pre><h1 id="6565" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">变量</h1><p id="9d28" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">当我们声明JavaScript变量时，需要考虑一些事情。</p><h1 id="be0d" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">总是使用let或const来声明变量</h1><p id="107b" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们应该总是使用<code class="fe mw mx my mm b">let</code>或<code class="fe mw mx my mm b">const</code>来声明变量。</p><p id="e3ba" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">否则，我们最终会得到全局变量。</p><p id="1da8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，不写:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="e39f" class="mq lf it mm b gy mr ms l mt mu">foo = 1;</span></pre><p id="def4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">或者:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="560a" class="mq lf it mm b gy mr ms l mt mu">var foo = 1;</span></pre><p id="28ad" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们写道:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="9942" class="mq lf it mm b gy mr ms l mt mu">let foo = 1;</span></pre><p id="68c7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">或者:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="ad88" class="mq lf it mm b gy mr ms l mt mu">const bar = 2;</span></pre><p id="91f4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mw mx my mm b">const</code>值不能被重新分配，但是被分配的值仍然是可变的。</p><h1 id="938f" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">每个变量或赋值使用一个const或let声明</h1><p id="19fa" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们应该在每一行声明变量。</p><p id="a161" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这样，我们就可以准确地知道每个变量的类型。</p><p id="8993" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，不写:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="b13c" class="mq lf it mm b gy mr ms l mt mu">const foo = 1, bar = 2;</span></pre><p id="df0c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们写道:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="1d48" class="mq lf it mm b gy mr ms l mt mu">const foo = 1;<br/>const bar = 2;</span></pre><h1 id="4560" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">将所有const和let语句组合在一起</h1><p id="056e" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">将它们组合在一起会使阅读更容易。</p><p id="1ffb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，不写:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="5ba6" class="mq lf it mm b gy mr ms l mt mu">let foo = 1;<br/>const bar = 2;<br/>let baz = 3;<br/>const qux = 4;</span></pre><p id="67fb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们写道:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="4122" class="mq lf it mm b gy mr ms l mt mu">let foo = 1;<br/>let baz = 3;</span><span id="782f" class="mq lf it mm b gy mv ms l mt mu">const bar = 2;<br/>const qux = 4;</span></pre><h1 id="7b67" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">在我们需要的地方分配变量</h1><p id="a321" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们应该在需要使用变量的地方分配变量。</p><p id="914a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这样，我们就不必跟随许多行代码来查看它们在哪里被使用。</p><p id="5734" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，不写:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="aaca" class="mq lf it mm b gy mr ms l mt mu">let x = 1;<br/>// 50 lines of code that doesn't change x ...<br/>x = 2;</span></pre><p id="36f0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们写道:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="ff2c" class="mq lf it mm b gy mr ms l mt mu">let x = 1;<br/>// 5 lines of code that doesn't reference x...<br/>x = 2;</span></pre><h1 id="d2bd" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">不要链接变量赋值</h1><p id="eb5e" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们不应该链接变量赋值。</p><p id="6715" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这是因为我们将从中创建全局变量。</p><p id="ed36" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，如果我们有:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="4434" class="mq lf it mm b gy mr ms l mt mu">let a = b = c = 2;</span></pre><p id="9e47" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">那么<code class="fe mw mx my mm b">b</code>和<code class="fe mw mx my mm b">c</code>就是全局变量。</p><p id="b2b2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">所以我们应该写:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="c02e" class="mq lf it mm b gy mr ms l mt mu">let a = 2;<br/>let b = a;<br/>let c = a;</span></pre><p id="14d1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">相反。</p><h1 id="ff52" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">避免使用递增或递减运算符</h1><p id="978f" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">递增和递减运算符都更新值并同时返回它们。</p><p id="822a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">根据运算符的位置，它可能返回更新的值或旧值。</p><p id="5a29" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果我们将<code class="fe mw mx my mm b">++</code>或<code class="fe mw mx my mm b">--</code>放在操作数之前，那么新值将被返回。</p><p id="0d04" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">否则，将返回旧值。</p><p id="632f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，如果我们写:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="f49a" class="mq lf it mm b gy mr ms l mt mu">let x = 1;<br/>const y = ++x;</span></pre><p id="f435" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">那么<code class="fe mw mx my mm b">y</code>是2，因为<code class="fe mw mx my mm b">x</code>的更新值被返回。</p><p id="df0a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">另一方面，如果我们写:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="e3a5" class="mq lf it mm b gy mr ms l mt mu">let x = 1;<br/>const y = x++;</span></pre><p id="3ed0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">那么<code class="fe mw mx my mm b">y</code>为1，因为<code class="fe mw mx my mm b">x</code>的旧值被返回。</p><p id="37ce" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这也适用于<code class="fe mw mx my mm b">--</code></p><p id="b0ab" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因此，我们应该使用<code class="fe mw mx my mm b">+=</code>和<code class="fe mw mx my mm b">-=</code>操作符，并使递增和递减操作符成为一个语句。</p><p id="e269" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以写:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="6c33" class="mq lf it mm b gy mr ms l mt mu">x += 1;</span></pre><p id="7d6d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">或者:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="a25c" class="mq lf it mm b gy mr ms l mt mu">x -= 1</span></pre><p id="0414" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">相反。</p><figure class="mh mi mj mk gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mz"><img src="../Images/5e7a0cd1d8ecfbc5706b92a99e4e1b3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*WgRZr9w09Xs7Gc3F"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated"><a class="ae kf" href="https://unsplash.com/@rodlong?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">杆长</a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">防溅板</a>上拍照</figcaption></figure><h1 id="8cb2" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">在赋值中避免在=之前或之后换行</h1><p id="7af6" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们可以用括号将一个长的JavaScript表达式括起来，这样我们就可以清楚地看到我们给变量赋了什么。</p><p id="cb06" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，不写:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="e434" class="mq lf it mm b gy mr ms l mt mu">const foo = <br/>  longExpression;</span></pre><p id="7a93" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以写:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="ff99" class="mq lf it mm b gy mr ms l mt mu">const foo = (<br/>  longExpression<br/>);</span></pre><h1 id="cfee" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">结论</h1><p id="91b1" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们应该总是使用<code class="fe mw mx my mm b">let</code>或<code class="fe mw mx my mm b">const</code>来声明变量。</p><p id="7771" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">另外，我们应该使用<code class="fe mw mx my mm b">+=</code>或<code class="fe mw mx my mm b">-=</code>操作符，而不是<code class="fe mw mx my mm b">++</code>或<code class="fe mw mx my mm b">--</code>分别用于递增和递减。</p><p id="9ac9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果我们有很长的表达式，我们应该在赋值前把它们用括号括起来。</p><p id="213f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们应该尽可能多地使用点符号来访问属性。</p></div></div>    
</body>
</html>