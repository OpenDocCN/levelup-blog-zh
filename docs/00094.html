<html>
<head>
<title>My new best friend TypeScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我的新好朋友打字稿</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/my-new-best-friend-typescript-2a5ca8399622?source=collection_archive---------0-----------------------#2018-03-05">https://levelup.gitconnected.com/my-new-best-friend-typescript-2a5ca8399622?source=collection_archive---------0-----------------------#2018-03-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="7cce" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">对于JavaScript开发人员来说，TypeScript还不是默认的选择，但它正在慢慢成为默认选择。我想分享我的旅程，以及我不想回去的原因。我觉得自己又活过来了！</h2></div><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi kg"><img src="../Images/1ca4f5563d4b92f66b7aedc60a2a39ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*kKGSGwPybToE6-ZM."/></div></div><figcaption class="ks kt gj gh gi ku kv bd b be z dk translated">由<a class="ae kf" href="https://unsplash.com/@robbie36?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">罗伯特·科林斯</a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><h1 id="e437" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">过去</h1><p id="c08b" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">我说回去是什么意思？嗯，巴别塔周围有一个生态系统，这是目前普遍利用ES2015+的主要方法。为了类型安全，<a class="ae kf" href="https://flow.org/" rel="noopener ugc nofollow" target="_blank"> FlowType </a>几乎可以和Babel一起工作。我使用这两种技术有一段时间了，这并不是说我不开心，而是有一些模糊的感觉，有些事情不对劲。</p><p id="cbf0" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">让我再倒回去一点。TypeScript并不完全是一个新的播放器，我记得大约两年多前看着它，我想:“什么？它不能做这做那？”。那是在ES6成为现实的时候，Babel在功能实现方面遥遥领先。TypeScript在很多方面都有所欠缺，而且类型安全也不觉得离开ES6有多重要。谁会放弃曾经学习和热爱过的胖箭头函数呢？</p><h1 id="1a24" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">现状</h1><p id="4945" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">回到当下。发现TypeScript实际上跟上了最新的ECMAScript特性是一个相当令人震惊的发现，这让我非常感兴趣。我对FlowType并不完全满意，对类型安全的日益增长的渴望最终改变了我。</p><p id="b07a" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">不要误解我——我并不是为了减少代码中的错误而寻求类型安全。<a class="ae kf" href="https://medium.com/javascript-scene/you-might-not-need-typescript-or-static-types-aa7cb670a77b" rel="noopener">不是这样的</a>。我相信这句话已经说过很多次了，但还是让我们重复一遍吧。</p><blockquote class="mp"><p id="9914" class="mq mr iq bd ms mt mu mv mw mx my mj dk translated">静态类型检查不会保护你免受运行时错误的影响。</p></blockquote><p id="4a5e" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">我只是想让我的生活更轻松。我可能变得又老又懒，但是为了使用我一个月前写的一些函数，总是不得不检查它的源代码，这有点烦人。更不用说当有一些深度嵌套的对象时，我必须找出我现在需要的值在哪里。不得不这么做一点也不酷。</p><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi ne"><img src="../Images/faa3636a7b403d12e4ff093357bdb48a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*eZONdlImjXOTrB1d."/></div></div><figcaption class="ks kt gj gh gi ku kv bd b be z dk translated"><a class="ae kf" href="https://unsplash.com/@frankie_k?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">弗兰基·k .</a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的《挂在装饰环上的蓝色羽毛》</figcaption></figure><p id="a7da" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">肯定有一些关于TypeScript的神话让人觉得如此可怕，以至于用户宁愿完全避免它。下面是其中的一些(从<a class="ae kf" href="https://kamranicus.com/presentations/demystifying-typescript/#/6" rel="noopener ugc nofollow" target="_blank">这个演讲</a>中借用)。</p><h2 id="8d63" class="nf kx iq bd ky ng nh dn lc ni nj dp lg lx nk nl li mb nm nn lk mf no np lm nq bi translated">我必须学习一门全新的语言</h2><p id="5674" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">不，没什么特别要学的，只是JavaScript，真的。</p><h2 id="3c5f" class="nf kx iq bd ky ng nh dn lc ni nj dp lg lx nk nl li mb nm nn lk mf no np lm nq bi translated">TypeScript不能与JavaScript互操作</h2><p id="1a0d" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">我不知道TypeScript中有什么东西不是ECMAScript规范的一部分。如果我错了，请在评论中纠正我，但是我认为可以很有把握地说，一旦去掉类型注释，至少95%的TypeScript将与ECMAScript兼容。</p><h2 id="d841" class="nf kx iq bd ky ng nh dn lc ni nj dp lg lx nk nl li mb nm nn lk mf no np lm nq bi translated">TypeScript就像CoffeeScript或Dart或Babel或Flow等。</h2><p id="7e52" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">那实际上是有几分真实的。TypeScript就像巴别塔+心流。TypeScript是一个单独包中的编译器/类型检查器。它负责将您的ES20##代码转换成您需要的任何目标(ES3和更高版本)。并且它会一直进行类型检查。但最重要的是，它开箱即用！几乎不需要任何配置，您就可以开始了。</p><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/a2fad683bdd9982f83ecf6744af4224b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1018/format:webp/1*N_-hH9gNysrfjMp9AEHQcQ.png"/></div><figcaption class="ks kt gj gh gi ku kv bd b be z dk translated">基本配置为TypeScript的tsconfig.json文件。</figcaption></figure><p id="c442" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">当配置预置和插件时，这可能感觉类似于巴别塔。不同的是<strong class="lq ir">你不需要安装任何额外的包</strong>，都包含在TypeScript里了。使用VSCode，您甚至不需要查看文档，它会告诉您可以在那里使用什么。</p><h2 id="af15" class="nf kx iq bd ky ng nh dn lc ni nj dp lg lx nk nl li mb nm nn lk mf no np lm nq bi translated">您只能在Windows中使用TypeScript</h2><p id="3621" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">没有。TypeScript与平台无关。这可能是因为它是微软的产品。嗯，他们当然已经变了；)</p><h2 id="6c10" class="nf kx iq bd ky ng nh dn lc ni nj dp lg lx nk nl li mb nm nn lk mf no np lm nq bi translated">单元测试将消除对类型脚本的任何需求</h2><p id="e6f8" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">恰恰相反。TypeScript可以帮助您编写单元测试。这对于TDD方法来说可能是有问题的，但是除此之外，它是一个很好的资产。请记住，TypeScript不会将您从运行时错误中解救出来。这就是为什么你既需要单元测试又需要TypeScript。</p><h1 id="ddf6" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">肮脏的东西</h1><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi ns"><img src="../Images/5fc80213013f5d7de4cc2dd5f4338dd4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7ev9q_5ci4WiiLhb."/></div></div><figcaption class="ks kt gj gh gi ku kv bd b be z dk translated"><a class="ae kf" href="https://unsplash.com/@jessedo81?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">杰西·奥里科</a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的《一个双手沾满泥巴的男人》</figcaption></figure><h2 id="cc82" class="nf kx iq bd ky ng nh dn lc ni nj dp lg lx nk nl li mb nm nn lk mf no np lm nq bi translated">入门指南</h2><p id="07f4" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">你开始使用TypeScript时是否认为在使用它之前需要理解类型系统？个人建议，不要从一开始就启用类型守卫，这可能是相当压倒性的。只需进行<a class="ae kf" href="https://www.typescriptlang.org/docs/handbook/typescript-in-5-minutes.html" rel="noopener ugc nofollow" target="_blank">基本配置</a>，一旦你对TypeScript正在检查和传输你的代码感到满意，请阅读<a class="ae kf" href="https://basarat.gitbooks.io/typescript/content/docs/getting-started.html" rel="noopener ugc nofollow" target="_blank"> TypeScript深度剖析</a>。</p><p id="443f" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">我建议在正式文件发布之前阅读这本书，因为这本书有时会有点混乱。例如，他们在任何地方都使用<code class="fe nt nu nv nw b">let</code>,这很容易让人觉得那里不存在<code class="fe nt nu nv nw b">const</code>。或者像<code class="fe nt nu nv nw b">import m = require("mod")</code>这样的陈述感觉像CommonJS和ESM的奇怪组合。所以，是的，先读读那本书，让自己不要紧张；)</p><h2 id="2628" class="nf kx iq bd ky ng nh dn lc ni nj dp lg lx nk nl li mb nm nn lk mf no np lm nq bi translated">林挺</h2><p id="8d73" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">我相信你已经学会喜欢ESLint，因为它为你节省了许多分钟甚至几个小时来发现问题，否则很难跟踪这些问题。怎么委婉地说呢…忘了ESLint吧！</p><p id="4b9d" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">仅仅是类型检查当然有助于发现各种各样的错误。然后还有一个<a class="ae kf" href="https://palantir.github.io/tslint/" rel="noopener ugc nofollow" target="_blank"> TSLint </a>对应项，它覆盖了一些遗漏的检查。就插件而言，它不是那么健壮，但是你可以在那里找到ESLint的大多数重要规则。说实话，我还没探索到那么深。至于造型规则，好吧，就用<a class="ae kf" href="https://prettier.io/" rel="noopener ugc nofollow" target="_blank">更漂亮</a>就可以欢乐起舞了。</p><h2 id="5d63" class="nf kx iq bd ky ng nh dn lc ni nj dp lg lx nk nl li mb nm nn lk mf no np lm nq bi translated">自定义类型</h2><p id="c3bd" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">在很短的一段时间内，你将会发现所有的东西都输入得很好，而且你最喜欢的IDE一直在给你有用的提示。然后，您遇到了一些您确实想使用的第三方库，您可能想知道如何为其获取类型。基本上有三种情况。</p><p id="28ce" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">*模块是用TypeScript编写的或者包含类型定义文件——您已经完成了，不需要额外的工作<br/> *有一个您可以安装的<code class="fe nt nu nv nw b">@types/*</code>模块(使用<a class="ae kf" href="https://microsoft.github.io/TypeSearch/" rel="noopener ugc nofollow" target="_blank"> TypeSearch </a> ) <br/> *您必须自己创建一个类型存根</p><p id="766b" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">在后面的两个场景中，TypeScript甚至会给你一个有用的提示。只要跟着它走，你就是金色的。</p><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/85485aeff01cb312bee014652e307354.png" data-original-src="https://miro.medium.com/v2/resize:fit:1350/format:webp/1*d3XV0S1oyIrUpe2Uw9J04w.png"/></div><figcaption class="ks kt gj gh gi ku kv bd b be z dk translated">当缺少第三个模块的声明时，Typescript会给出建议。</figcaption></figure><p id="6544" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">这再容易不过了。在项目的任何地方创建文件，输入行<code class="fe nt nu nv nw b">declare module 'react-acrylic'</code>，你就可以开始了。这被称为环境模块，它像一个全局声明一样工作，不需要导入任何东西，无论它位于何处(在项目文件夹中)，TypeScript都会找到它。</p><p id="e0d7" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">当您熟悉了类型系统后，您可以慢慢地在代码中扩展定义。看看我的第一次尝试在图书馆打字。那个文件只是放在我的项目中，每当我想使用一些非类型化的特性时，我就把它添加到那里。最终，我甚至可能会把它出版给DefinitelyTyped.org。</p><h1 id="93eb" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">现实</h1><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi ne"><img src="../Images/6fe293f5d5f5a874bfaacb948d5aa1f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-EthsocOXpb_0QbT."/></div></div><figcaption class="ks kt gj gh gi ku kv bd b be z dk translated">照片由<a class="ae kf" href="https://unsplash.com/@thenikyv?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Niketh ve lanki</a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="8704" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">就我个人而言，我还没有真正尝试过将现有项目转换为TypeScript。这可能是大多数开发人员不愿采用的主要原因。可以肯定的是，你不会遇到语言本身的任何问题。如今，您可以在Babel中使用的所有内容都可以在TypeScript中使用。当你依赖一些奇怪的/模糊的/定制的巴别塔插件时，事情会变得不稳定。您可能想要<a class="ae kf" href="http://artsy.github.io/blog/2017/11/27/Babel-7-and-TypeScript/" rel="noopener ugc nofollow" target="_blank">查看这篇文章</a>以获得关于该用例的帮助。</p><p id="410c" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">在基本配置中，TypeScript将计算出您在那里拥有的大部分内容。其他的一切都将是非类型化的，等着你在对你有意义的时候添加那些类型。你肯定想这么做。这是你换工作的主要原因，对吗？可以肯定的是，TypeScript不会阻止你运行你的非类型化代码，除非有明显的违规，例如，将数字传递给一个明显需要布尔值的函数。</p><p id="3afa" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">然后你启用各种类型的守卫，修复一些问题，也许再次禁用他们，直到你觉得准备好下一轮。冲洗和重复，直到一切都很好地输入和安全。你添加的任何类型注释当然会起作用，当你违反它们时会对你大喊大叫。</p><p id="a3d7" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">不要试图对TypeScript撒谎，告诉它这个苹果实际上是一个橙子，后来(<em class="ny"> runtime </em>)发现它确实是那个苹果。在寻找由此引起的细菌时，你的头可能会受伤。如果你想要一个类型安全的代码，努力找出一个正确的类型，而不是到处散布<code class="fe nt nu nv nw b">any</code>。</p><p id="5943" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">这里我想提到的最后一点是，Babel和TypeScript都有对JSX的一流支持，但是使用TypeScript，您不需要安装任何额外的东西，只需在配置文件中启用该选项。如果你是一名React开发人员，你将会对此非常满意。在以后的文章中，我将更多地关注React应用程序的类型检查，敬请关注；)</p></div></div>    
</body>
</html>