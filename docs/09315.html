<html>
<head>
<title>Demystifying Bytes, Runes, and Strings in Go</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">揭开Go中字节、符文和字符串的神秘面纱</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/demystifying-bytes-runes-and-strings-in-go-1f94df215615?source=collection_archive---------1-----------------------#2021-07-27">https://levelup.gitconnected.com/demystifying-bytes-runes-and-strings-in-go-1f94df215615?source=collection_archive---------1-----------------------#2021-07-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/de1794ade0b27e6073d7071d0ef6f2ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*foPP55PL-nyH09Hn"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated"><a class="ae kf" href="https://unsplash.com/@sigmund?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">西格蒙德</a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</figcaption></figure><p id="e392" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在谈到<em class="le">字符串、字节、符文</em>的时候，很多入门级的Golang开发者都感到很困惑。在这篇文章中，我想从应用开发者的角度给出一些解释。</p><p id="9c09" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你更喜欢Rob Pike的全面解释，他是Go语言的合作伙伴。请有空在这里暂停一下，看看下面的帖子。</p><div class="lf lg gp gr lh li"><a href="https://blog.golang.org/strings" rel="noopener  ugc nofollow" target="_blank"><div class="lj ab fo"><div class="lk ab ll cl cj lm"><h2 class="bd iu gy z fp ln fr fs lo fu fw is bi translated">Go中的字符串、字节、符文和字符</h2><div class="lp l"><h3 class="bd b gy z fp ln fr fs lo fu fw dk translated">rob Pike 2013年10月23日上一篇博文解释了切片在围棋中的工作原理，并使用了几个例子来…</h3></div><div class="lq l"><p class="bd b dl z fp ln fr fs lo fu fw dk translated">blog.golang.org</p></div></div><div class="lr l"><div class="ls l lt lu lv lr lw jz li"/></div></div></a></div><h1 id="35d2" class="lx ly it bd lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu bi translated">字节</h1><p id="f63e" class="pw-post-body-paragraph kg kh it ki b kj mv kl km kn mw kp kq kr mx kt ku kv my kx ky kz mz lb lc ld im bi translated">Go中的一个字节是一个<strong class="ki iu">无符号8位</strong>整数。这意味着它的数值范围限制在0-255之间。</p><pre class="na nb nc nd gt ne nf ng nh aw ni bi"><span id="4ce8" class="nj ly it nf b gy nk nl l nm nn"><strong class="nf iu">type byte = uint8</strong></span></pre><blockquote class="no np nq"><p id="6376" class="kg kh le ki b kj kk kl km kn ko kp kq nr ks kt ku ns kw kx ky nt la lb lc ld im bi translated">根据Go文档，Byte是<strong class="ki iu"> uint8 </strong>的别名，在所有方面都与uint8相同。按照惯例，它用于区分字节和实际的8位无符号整数值。</p></blockquote><p id="6d48" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">字节类型可用于存储所有的<a class="ae kf" href="https://en.wikipedia.org/wiki/ASCII" rel="noopener ugc nofollow" target="_blank"> ASCII </a>字符。例如，下图表示字节变量中的字符Z。</p><figure class="na nb nc nd gt ju gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/dfaa1a7d281b6851a1acc3fba9969c66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1072/format:webp/1*lAvlF-5swlV3AkaUg-Slgw.jpeg"/></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">ASCII字符Z的位表示</figcaption></figure><p id="ad74" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">要初始化一个字节变量，我们至少有三种不同的方法:</p><ul class=""><li id="09f2" class="nv nw it ki b kj kk kn ko kr nx kv ny kz nz ld oa ob oc od bi translated">通过指定一个0到255之间的十进制整数</li><li id="10bf" class="nv nw it ki b kj oe kn of kr og kv oh kz oi ld oa ob oc od bi translated">通过分配一个<a class="ae kf" href="https://en.wikipedia.org/wiki/ASCII" rel="noopener ugc nofollow" target="_blank"> ASCII </a>字符</li><li id="ea41" class="nv nw it ki b kj oe kn of kr og kv oh kz oi ld oa ob oc od bi translated">通过分配不同的基数整数(二进制、八进制、十六进制)</li></ul><figure class="na nb nc nd gt ju"><div class="bz fp l di"><div class="oj ok l"/></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">如何分配一个字节变量</figcaption></figure><p id="fc37" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在我们已经知道了字节，让我们进一步看看字节片，特别是初始化字节片类型的三种方法。</p><figure class="na nb nc nd gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ol"><img src="../Images/2a72ee26aa10a5775172b4d6f69e037c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KKWGqu7lGmkFyL3eBf0JLQ.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">字节片</figcaption></figure><figure class="na nb nc nd gt ju"><div class="bz fp l di"><div class="oj ok l"/></div></figure><h1 id="ee15" class="lx ly it bd lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu bi translated">古代北欧文字</h1><p id="c68e" class="pw-post-body-paragraph kg kh it ki b kj mv kl km kn mw kp kq kr mx kt ku kv my kx ky kz mz lb lc ld im bi translated">和字节类型一样，Go还有另一种整数类型<code class="fe om on oo nf b"><strong class="ki iu">rune</strong></code>。它是int32 (4字节)数据类型的别名，在所有方面都等同于int32。</p><pre class="na nb nc nd gt ne nf ng nh aw ni bi"><span id="7274" class="nj ly it nf b gy nk nl l nm nn">// rune is an alias for int32 and is equivalent to int32 in all ways. It is used, by convention, to distinguish character values from integer values.</span><span id="8f5b" class="nj ly it nf b gy op nl l nm nn"><strong class="nf iu">type rune = int32</strong></span></pre><p id="f0f6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">那么究竟是什么让<strong class="ki iu"> </strong>与普通<code class="fe om on oo nf b">int32</code>如此特别呢？</p><p id="37d3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们知道<code class="fe om on oo nf b">byte</code>类型代表<a class="ae kf" href="https://en.wikipedia.org/wiki/ASCII" rel="noopener ugc nofollow" target="_blank"> ASCII </a>字符。<a class="ae kf" href="https://commons.wikimedia.org/wiki/File:ASCII-Table-wide.svg" rel="noopener ugc nofollow" target="_blank"> ASCII </a>只包括英语和一些欧洲语言符号。但是世界上有很多人也需要在电脑中使用他们自己的书写系统。</p><p id="a5e6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这就是为什么<strong class="ki iu"> Unicode </strong>被创建的原因。Unicode version 8在100多种语言中定义了超过120，000个字符<a class="ae kf" href="https://en.wikipedia.org/wiki/Code_point" rel="noopener ugc nofollow" target="_blank">代码点</a>。</p><p id="2dbb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在围棋中引入了一个新名词叫做<strong class="ki iu"> <em class="le">符文</em></strong><em class="le">到</em>与码分含义相同。</p><figure class="na nb nc nd gt ju"><div class="bz fp l di"><div class="oj ok l"/></div></figure><p id="0d07" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi">For example, the Chinese character ‘汉’ has a Unicode codepoint of U+6C49 and integer value 27721. We use a rune variable to store it in memory.</p><p id="d109" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi">Source code in Go is <em class="le">defined</em> to be UTF-8 encoding. So character ‘汉’ has a binary representation of 1110<strong class="ki iu">0110</strong> 10<strong class="ki iu">110001</strong> 10<strong class="ki iu">001001</strong></p><pre class="na nb nc nd gt ne nf ng nh aw ni bi"><span id="7c63" class="nj ly it nf b gy nk nl l nm nn">A character:                    汉<br/>Unicode Code points:            U+6C49 <br/>Convert 6C49 to binary:         <strong class="nf iu">01101100 01001001</strong><br/>Encode character as UTF-8:      1110<strong class="nf iu">0110</strong> 10<strong class="nf iu">110001</strong> 10<strong class="nf iu">001001</strong></span></pre><p id="ecb9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果你不明白UTF 8和Unicode之间的区别，这里有两个很好的帖子。</p><div class="lf lg gp gr lh li"><a href="https://www.joelonsoftware.com/2003/10/08/the-absolute-minimum-every-software-developer-absolutely-positively-must-know-about-unicode-and-character-sets-no-excuses/" rel="noopener  ugc nofollow" target="_blank"><div class="lj ab fo"><div class="lk ab ll cl cj lm"><h2 class="bd iu gy z fp ln fr fs lo fu fw is bi translated">每个软件开发人员绝对、肯定必须了解Unicode和…</h2><div class="lp l"><h3 class="bd b gy z fp ln fr fs lo fu fw dk translated">有没有想过那个神秘的内容类型标签？你知道，你应该把它放在HTML中，但是你从来没有…</h3></div><div class="lq l"><p class="bd b dl z fp ln fr fs lo fu fw dk translated">www.joelonsoftware.com</p></div></div><div class="lr l"><div class="oq l lt lu lv lr lw jz li"/></div></div></a></div><div class="lf lg gp gr lh li"><a href="https://stackoverflow.com/a/27939161/10153574" rel="noopener  ugc nofollow" target="_blank"><div class="lj ab fo"><div class="lk ab ll cl cj lm"><h2 class="bd iu gy z fp ln fr fs lo fu fw is bi translated">UTF 8和Unicode有什么区别？</h2><div class="lp l"><h3 class="bd b gy z fp ln fr fs lo fu fw dk translated">世界上有很多角色，</h3></div><div class="lq l"><p class="bd b dl z fp ln fr fs lo fu fw dk translated">stackoverflow.com</p></div></div><div class="lr l"><div class="or l lt lu lv lr lw jz li"/></div></div></a></div><p id="3f26" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在Golang中，字符值的默认类型是<code class="fe om on oo nf b">rune</code>。如果在声明带有字符值的变量时没有显式声明类型，那么Go会将类型推断为<code class="fe om on oo nf b">rune</code>而不是<strong class="ki iu"> </strong> <code class="fe om on oo nf b">byte</code></p><figure class="na nb nc nd gt ju"><div class="bz fp l di"><div class="oj ok l"/></div></figure><p id="229e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">再来看另一种常用类型:<code class="fe om on oo nf b">[]rune</code></p><figure class="na nb nc nd gt ju"><div class="bz fp l di"><div class="oj ok l"/></div></figure><h1 id="4747" class="lx ly it bd lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu bi translated">线</h1><p id="cefd" class="pw-post-body-paragraph kg kh it ki b kj mv kl km kn mw kp kq kr mx kt ku kv my kx ky kz mz lb lc ld im bi translated">一个字符串实际上是一个只读的字节片。它是用双引号声明的，如<code class="fe om on oo nf b">"Hello World"</code></p><blockquote class="os"><p id="0f9b" class="ot ou it bd ov ow ox oy oz pa pb ld dk translated">请记住，单引号表示字节类型或符文类型值，双引号表示字符串类型。</p></blockquote><p id="1446" class="pw-post-body-paragraph kg kh it ki b kj pc kl km kn pd kp kq kr pe kt ku kv pf kx ky kz pg lb lc ld im bi translated">就字符串的内容而言，它完全等同于一片字节。for循环迭代每个字节。</p><figure class="na nb nc nd gt ju"><div class="bz fp l di"><div class="oj ok l"/></div></figure><p id="f873" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这个循环是另一个故事:它在每次迭代中解码一个UTF 8编码的符文。for循环迭代每个字节。</p><figure class="na nb nc nd gt ju"><div class="bz fp l di"><div class="oj ok l"/></div></figure><p id="43fb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">每循环一次，循环的索引就是当前符文的起始位置，以字节为单位，码位就是它的值。</p><h1 id="8b6b" class="lx ly it bd lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu bi translated">类型变换</h1><ul class=""><li id="9f90" class="nv nw it ki b kj mv kn mw kr ph kv pi kz pj ld oa ob oc od bi translated">Go中的一个<strong class="ki iu"> Int </strong>值和一个<strong class="ki iu">字符串</strong>之间如何转换？使用<code class="fe om on oo nf b"><strong class="ki iu">strconv.Atoi</strong></code> <strong class="ki iu">和</strong> <code class="fe om on oo nf b"><strong class="ki iu">strconv.Itoa</strong></code> <strong class="ki iu"> </strong>(注:a代表<strong class="ki iu"> ASCII) </strong></li></ul><figure class="na nb nc nd gt ju gh gi paragraph-image"><div class="gh gi pk"><img src="../Images/d1100ede51aae0b9ba8bc10a2d91b34c.png" data-original-src="https://miro.medium.com/v2/resize:fit:722/format:webp/1*yN0EbE2vLJwMa2qPE6mnRQ.png"/></div></figure><p id="fccd" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">陷阱:您可能想执行一个错误的语句:<code class="fe om on oo nf b">string(123)</code>，它产生' { '</p><p id="c436" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">3.围棋中的<strong class="ki iu">字符串</strong>和<strong class="ki iu">[]符文</strong>如何转换？</p><figure class="na nb nc nd gt ju"><div class="bz fp l di"><div class="oj ok l"/></div></figure></div><div class="ab cl pl pm hx pn" role="separator"><span class="po bw bk pp pq pr"/><span class="po bw bk pp pq pr"/><span class="po bw bk pp pq"/></div><div class="im in io ip iq"><p id="9494" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">那都是乡亲们！感谢阅读。更多好文章敬请期待。</p><div class="lf lg gp gr lh li"><a rel="noopener  ugc nofollow" target="_blank" href="/composite-data-types-in-golang-a829288b5553"><div class="lj ab fo"><div class="lk ab ll cl cj lm"><h2 class="bd iu gy z fp ln fr fs lo fu fw is bi translated">Golang中的复合数据类型</h2><div class="lp l"><h3 class="bd b gy z fp ln fr fs lo fu fw dk translated">Go支持复合类型，如数组、切片、映射和结构。我们将讨论四种复合类型之一…</h3></div><div class="lq l"><p class="bd b dl z fp ln fr fs lo fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="lr l"><div class="ps l lt lu lv lr lw jz li"/></div></div></a></div></div></div>    
</body>
</html>