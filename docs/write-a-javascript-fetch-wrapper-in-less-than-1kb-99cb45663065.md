# ç”¨ä¸åˆ° 1kb çš„ç©ºé—´ç¼–å†™ä¸€ä¸ª JavaScript è·å–åŒ…è£…å™¨

> åŸæ–‡ï¼š<https://levelup.gitconnected.com/write-a-javascript-fetch-wrapper-in-less-than-1kb-99cb45663065>

## å› æ­¤é¿å…å®‰è£…å¤§é‡çš„ä¾èµ–é¡¹

![](img/ac2eb97028c085f894c5046eb255d457.png)

å®‰ä¸œå°¼Â·æœå…°åœ¨ [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) ä¸Šçš„ç…§ç‰‡

è‡ªä»é‡‡ç”¨ *npm æ¨¡å—*ä»¥æ¥ï¼Œå‰ç«¯å¼€å‘å‘å±•å¾—éå¸¸å¿«:ç”±äºå¼€æºä¸–ç•Œï¼Œå·²ç»å‘å¸ƒäº†æ•°åä¸‡ä¸ªåŒ…ï¼Œä¸ºä»»ä½•å¼€å‘äººå‘˜çš„éœ€æ±‚æä¾›äº†å¯ç”¨çš„ä¾èµ–ã€‚

ç„¶è€Œï¼Œæœ‰æ—¶æˆ‘ä»¬é¢ä¸´çš„é—®é¢˜å¹¶ä¸éœ€è¦å¤æ‚çš„é€»è¾‘ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬ç”šè‡³å¯ä»¥åœ¨ä¸å®‰è£…å¤–éƒ¨ä¾èµ–çš„æƒ…å†µä¸‹å®ç°æ‰€éœ€çš„å†…å®¹ã€‚

è¿™æœ‰ä¸€äº›ä¼˜ç‚¹:

*   æ‚¨å¯ä»¥å®Œå…¨æ§åˆ¶è‡ªå·±çš„ä»£ç ã€‚å¦‚æœæ‚¨çš„ä¸šåŠ¡é€»è¾‘éœ€è¦æ›´æ”¹ä»£ç ï¼Œæ‚¨å¯ä»¥ç›´æ¥å¯¹å…¶è¿›è¡Œæ“ä½œï¼Œè€Œæ— éœ€ç­‰å¾…ä¾èµ–å…³ç³»æ›´æ–°æˆ–æ··åˆé€»è¾‘æ¥æ¬ºéª—æ‚¨æ­£åœ¨ä½¿ç”¨çš„åŒ…ã€‚
*   **ä½ å¯ä»¥å®ç°ä½ æ‰€éœ€è¦çš„ï¼Œåˆ«æ— ä»–æ±‚ã€‚å¤§å¤šæ•°è‘—åçš„æ¨¡å—éƒ½å¾ˆæ£’ï¼Œå› ä¸ºå®ƒä»¬æä¾›äº†å¤§é‡çš„ç‰¹æ€§å’Œçµæ´»æ€§ï¼Œä½†æ˜¯æˆ‘ä»¬çœŸçš„éœ€è¦ä¸€ä¸ª 30kb çš„åŒ…æ¥å®Œæˆæˆ‘ä»¬åªç”¨ 10 è¡Œä»£ç å°±èƒ½å®Œæˆçš„äº‹æƒ…å—ï¼Ÿ**

## API å®¢æˆ·ç«¯è¦æ±‚

å‡ ä¹æ¯ä¸ªç”¨ JavaScript ç¼–å†™çš„ web åº”ç”¨ç¨‹åºéƒ½éœ€è¦å¤„ç†ä¸€äº›é€»è¾‘æ¥è§¦å‘ HTTP è¯·æ±‚ï¼Œå¹¶æ­£ç¡®åœ°è·å–æ‰€éœ€çš„æ•°æ®ã€‚è¿™äº›å¹´æ¥ï¼Œç¤¾åŒºå¸¦æ¥äº†æˆå¨çš„è§£å†³æ–¹æ¡ˆï¼Œä»ä¼—æ‰€å‘¨çŸ¥çš„ [*è¯·æ±‚*](https://www.npmjs.com/package/request) æ¨¡å—(ç°å·²å¼ƒç”¨)ï¼Œåˆ°ä¼—æ‰€å‘¨çŸ¥çš„ [*axios*](https://www.npmjs.com/package/axios) *ã€‚*

è¿™äº›å½“ç„¶æ˜¯å¾ˆå¥½çš„æŠ½è±¡ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥ç”¨æ›´å°‘çš„ä»£ç æ¥æ„å»ºæ›´è½»çš„ã€å…·æœ‰ç›¸ä¼¼ç‰¹æ€§çš„ä¸œè¥¿ã€‚

æˆ‘ä»¬ç°åœ¨å°†æ ¹æ®éœ€æ±‚æ„å»ºæˆ‘é€šå¸¸ç¼–å†™çš„ API å®¢æˆ·ç«¯ï¼Œå®ƒåŒ…æ‹¬ä»¥ä¸‹ç‰¹æ€§:

*   è§£æå“åº”
*   å¤„ç†æ‰€æœ‰è¯·æ±‚çš„æ–¹æ³•
*   é™„åŠ æŸ¥è¯¢å‚æ•°
*   å¤šåŸŸ
*   å¤„ç†ç»è¿‡èº«ä»½éªŒè¯çš„è¯·æ±‚

è®©æˆ‘ä»¬ä¸€èµ·ä¸€æ­¥ä¸€æ­¥æ¥æ‰“é€ å§ï¼ğŸš€

## è¯·æ±‚åŒ…è£…å™¨å®ç°

é¦–å…ˆï¼Œè®©æˆ‘ä»¬ç¼–å†™æ²¡æœ‰é¢å¤–åŠŸèƒ½çš„åŒ…è£…å™¨å‡½æ•°ï¼Œè¿™å°†æ˜¯æˆ‘ä»¬å®ç°çš„èµ·ç‚¹ã€‚æˆ‘ä»¬å°†ä½¿ç”¨ [*çš„*](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API) å†…ç½®å‡½æ•°ä½œä¸ºåŸºæœ¬è¯·æ±‚:

![](img/785557bb08a37d48303ae961170f24c0.png)

åŸºæœ¬æŠ½è±¡

å› ä¸ºæˆ‘ä»¬å¸Œæœ›ä½¿ç”¨è¿™ä¸ªå®¢æˆ·æœºæ¥è§£æ JSON å“åº”ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬åœ¨æ”¶åˆ°å“åº”æ—¶è§£æå®ƒã€‚åœ¨æˆ‘çš„éœ€æ±‚ä¸­ï¼Œæˆ‘æœŸæœ›ä½¿ç”¨ä¸€ä¸ªå…·æœ‰å›ºå®šç»“æ„çš„ APIï¼Œå®ƒå°†æ€»æ˜¯è¿”å›ä¸€ä¸ªå…·æœ‰ä¸¤ä¸ªå±æ€§çš„å¯¹è±¡ï¼Œå³**æ•°æ®**æˆ–**é”™è¯¯**å’Œ**T5 ä¸€ä¸ªå¸ƒå°”å€¼**æˆåŠŸ**:**

![](img/420cb3340531127fdfe1203d4cc22709.png)

æ·»åŠ å“åº”æ­£æ–‡è§£æå™¨

ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥å¼€å§‹ä¸ºæˆ‘ä»¬çš„è¯·æ±‚å‡½æ•°å¢åŠ çµæ´»æ€§ï¼Œè‡ªåŠ¨ç”Ÿæˆä¸€äº›é€‰é¡¹ï¼Œå¦‚æ ‡é¢˜å’ŒæŸ¥è¯¢å‚æ•°:

![](img/171c924ca29418380c514fa906278d87.png)

å…¬å¼€æŸ¥è¯¢é€‰é¡¹ä»¥è·å–æŸ¥è¯¢å‚æ•°

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»æœ‰äº†ä¸€ä¸ªå¾ˆå¥½çš„ç»“æœï¼æˆ‘ä»¬ç°åœ¨èƒ½å¤Ÿè½»æ¾åœ°è§¦å‘ HTTP è¯·æ±‚å¹¶è§£æå“åº”ï¼Œè€Œä¸éœ€è¦ä»»ä½•é‡å¤çš„æ“ä½œã€‚

ä½†æ˜¯ï¼Œè¿˜æœ‰æ”¹è¿›çš„ä½™åœ°ï¼å¦‚æœæˆ‘ä»¬çš„ app éœ€è¦æ¶ˆè´¹å¤šä¸ªæœåŠ¡æ€ä¹ˆåŠï¼Ÿå¦‚æœè¯·æ±‚è¢«å®šå‘åˆ°å¦ä¸€ä¸ªæœåŠ¡ï¼Œæˆ‘ä»¬å¯èƒ½å¸Œæœ›ä¿®æ”¹æ¥å£ï¼Œä»é€‰æ‹©ä¸­æŒ‘é€‰ä¸€ä¸ªåŸºæœ¬ URLã€‚è®©æˆ‘ä»¬ä¸ºæ­¤ä¿®æ”¹è„šæœ¬:

![](img/9449546ec879cb60f20303d5c8d42078.png)

æ·»åŠ ä¸»æœºå±æ€§ä»¥é€‰æ‹©è‡ªå®šä¹‰çš„åŸºæœ¬ url

æˆ‘ä»¬å¿«å®Œæˆäº†ï¼ä½†æ˜¯å¦‚æœä¸€ä¸ªç”¨æˆ·ç™»å½•äº†ï¼Œæˆ‘ä»¬å¦‚ä½•ä½¿æˆ‘ä»¬çš„è¯·æ±‚å¾—åˆ°è®¤è¯å‘¢ï¼Ÿæˆ‘ä»¬åº”è¯¥ä»èº«ä»½éªŒè¯æœåŠ¡ä¸­æ£€ç´¢ä¼šè¯ä»¤ç‰Œ(å¦‚æœå¯ç”¨)ï¼Œå¹¶é€šè¿‡æˆæƒå¤´å°†å…¶é™„åŠ åˆ°è¯·æ±‚ä¸­:

![](img/e52fdbc24cee3fe264948a2f50ff1b71.png)

å¯ç”¨å·²éªŒè¯çš„è¯·æ±‚

å‘ headers å¯¹è±¡ä¼ é€’ä¸€ä¸ªæœ‰æ¡ä»¶çš„ spread å°†å…è®¸æˆ‘ä»¬è¦†ç›– Authorization å±æ€§ï¼Œä»¥é˜²æˆ‘ä»¬æƒ³è¦ä¼ é€’ä¸€ä¸ªå®šåˆ¶çš„å¤´ã€‚

ä¸ºäº†å®Œæˆæˆ‘ä»¬çš„åŒ…è£…ï¼Œæˆ‘æ€»æ˜¯ä¸ºä¸€ä¸ªå¿…éœ€çš„å­—æ®µæ·»åŠ ä¸€äº›éªŒè¯å™¨ï¼Œæœ‰æ—¶å¯èƒ½ä¼šå¿˜è®°ä¼ é€’ä¸€ä¸ªç¯å¢ƒå˜é‡ï¼

![](img/50396be6717b279858bece7e25e1fce2.png)

å¯¹å‚æ•°æ·»åŠ ä¸€äº›éªŒè¯æ£€æŸ¥

å¦‚æ‚¨æ‰€è§ï¼Œå¦‚æœç¼ºå°‘ç¯å¢ƒå˜é‡æˆ–è€…è·¯å¾„ä¸æ˜¯å­—ç¬¦ä¸²ï¼Œå®ƒå°†æŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚

## åŒ…æ‰

ç”¨ä¸åˆ° 70 è¡Œä»£ç ï¼Œæˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ªå®Œå…¨æœ‰æ•ˆçš„æŠ½è±¡ï¼Œè¶³å¤Ÿçµæ´»åœ°æ»¡è¶³æ‰€æœ‰çš„åº”ç”¨éœ€æ±‚ã€‚æ‚¨å¯ä»¥æ ¹æ®åº”ç”¨ç¨‹åºçš„éœ€è¦å¯¹å…¶è¿›è¡Œè°ƒæ•´ã€‚ä»£ç é‡é‡çº¦ä¸º 1.9Kbï¼Œç¼©å°åä¸åˆ° 1KbğŸš€

æˆ‘å°†ä¸ºæ‚¨ç•™ä¸‹å®Œæ•´å®ç°çš„è¦ç‚¹å’Œä¸€äº›ä½¿ç”¨ç¤ºä¾‹:

å…³äºè¿™ä¸ªè¯é¢˜çš„è¯„è®ºã€åˆ†äº«å’Œè®¨è®ºæ€»æ˜¯å¾ˆå—æ¬¢è¿ã€‚æˆ‘å¾ˆä¹æ„å›ç­”ä½ çš„ä»»ä½•é—®é¢˜ï¼

> **éšæ—¶è”ç³»æˆ‘**[**Linkedin**](https://www.linkedin.com/in/marcoantonioghiani/)

[](https://marcoghiani.com/blog/refactoring-a-react-component) [## é‡æ„ä¸€ä¸ªååº”ç»„ä»¶

### ä½¿ç”¨æœ€ä½³å®è·µç¼–å†™é«˜æ•ˆå¯è¯»çš„ React ç»„ä»¶çš„ 5 æ¡è§„åˆ™ React.js å·²ç»æˆä¸ºæœ€æµè¡Œçš„è§‚ç‚¹â€¦

marcoghiani.com](https://marcoghiani.com/blog/refactoring-a-react-component) [](https://marcoghiani.com/blog/how-to-use-component-composition-in-react) [## å¦‚ä½•åœ¨ React ä¸­ä½¿ç”¨ç»„ä»¶ç»„åˆ

### æŒ‰ç…§ç»„åˆæ¨¡å¼åˆ›å»ºåšå›ºè€Œçµæ´»çš„ react ç»„ä»¶ã€‚å½“æˆ‘å¼€å§‹ä½¿ç”¨ React æ—¶ï¼Œæˆ‘â€¦

marcoghiani.com](https://marcoghiani.com/blog/how-to-use-component-composition-in-react) [](https://marcoghiani.com/blog/how-i-became-a-fast-learner-changing-my-habits) [## æˆ‘æ˜¯å¦‚ä½•é€šè¿‡æ”¹å˜ä¹ æƒ¯å¿«é€Ÿå­¦ä¹ çš„ã€‚

### 9 ä¸ªæœ‰æ•ˆçš„ä¹ æƒ¯å¯ä»¥è®©ä½ å­¦å¾—æ›´å¿«ï¼Œæé«˜å·¥ä½œæ•ˆç‡ã€‚ä¸€å¹´å¤šå‰ï¼Œåœ¨æˆ‘ 25 å²çš„æ—¶å€™ï¼Œæˆ‘ç¦»å¼€äº†æˆ‘çš„â€¦

marcoghiani.com](https://marcoghiani.com/blog/how-i-became-a-fast-learner-changing-my-habits)