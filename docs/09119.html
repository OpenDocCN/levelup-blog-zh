<html>
<head>
<title>Space Shooter Challenge: Boss Part 2 — Weapons</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">太空射击挑战:Boss第2部分-武器</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/space-shooter-challenge-boss-part-2-weapons-f8fd0602c37e?source=collection_archive---------12-----------------------#2021-07-07">https://levelup.gitconnected.com/space-shooter-challenge-boss-part-2-weapons-f8fd0602c37e?source=collection_archive---------12-----------------------#2021-07-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/c3bdaa3aa89364c433c577a3c6e8373c.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/1*ySYW9FOpQPGCsF6vgf87gg.gif"/></div></figure><p id="4665" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我现在有一个以多种不同方式移动的老板，但如果没有伤害玩家的能力，它又有什么价值呢？</p><p id="0393" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">让我们从发射侧面的<strong class="jw ir">地雷</strong>开始。我想让它们以某种圆周运动的方式散开，然后继续在屏幕上移动，为<strong class="jw ir">玩家制造障碍。</strong></p><p id="9024" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在不同的<strong class="jw ir">运动协程</strong>中，我调用了一个<strong class="jw ir"> FireMines方法，</strong>为侧面传递一个字符串。这允许我使用一个<strong class="jw ir"> switch语句</strong>并将<strong class="jw ir">父游戏对象</strong>设置为正确的<strong class="jw ir">空对象</strong>，这是我在昨天的文章中设置的。</p><p id="e817" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">然后，我使用<strong class="jw ir">GetComponentsInChildren</strong>来创建一个<strong class="jw ir">数组</strong>，然后使用<strong class="jw ir"> foreach循环</strong>来循环这个数组。<strong class="jw ir">GetComponentsInChildren</strong>也将<strong class="jw ir">父对象</strong>添加到<strong class="jw ir">数组中。</strong>父对象位于0，0，0，我不希望<strong class="jw ir">矿</strong>在那里被<strong class="jw ir">实例化</strong>。因此我需要检查<strong class="jw ir">标签</strong>来删除我不想要的对象。从那里，我<strong class="jw ir">实例化</strong>我的<strong class="jw ir">地雷预置</strong>并将其添加到<strong class="jw ir">激光容器</strong>中，以形成一个整洁的<strong class="jw ir">层级。</strong></p><figure class="kt ku kv kw gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ks"><img src="../Images/a08535efa53ac7902a7339009663614a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2v1wD9oniFCZ-AfV1-3bDg.png"/></div></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">一旦boss完成，我打算用int而不是strings来整理switch语句。</figcaption></figure><p id="5520" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">接下来，我需要为<strong class="jw ir">地雷创建功能。</strong>为此，我想将<strong class="jw ir"> Boss </strong>存储为一个变量，然后运行一个<strong class="jw ir">协程</strong>，将<strong class="jw ir">矿</strong>从<strong class="jw ir"> Boss的相反方向移动。我还创建了一个<strong class="jw ir">随机时间</strong>，在允许每个<strong class="jw ir">地雷</strong>向下移动之前运行。</strong></p><p id="e6c7" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">此外，我创建了一个<strong class="jw ir">销毁方法</strong>来检查屏幕边界，以避免<strong class="jw ir">地雷</strong>永远漂浮在游戏世界中！</p><figure class="kt ku kv kw gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ks"><img src="../Images/ff521f45a7bc5fd2f546fbaf89138698.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7mgrPLI-w_awNPlcVfIJ-Q.png"/></div></div></figure><figure class="kt ku kv kw gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi lf"><img src="../Images/7946b5c4abe92b142af19f5deabd8708.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*CENPsux89zQEEgky_dc5Sg.gif"/></div></div></figure></div><div class="ab cl lg lh hu li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="ij ik il im in"><p id="b493" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">对于<strong class="jw ir">炮塔，</strong>我从<strong class="jw ir">炮塔脚本</strong>本身开始。首先，创建一个<strong class="jw ir">公共方法</strong>来开始。这需要从<strong class="jw ir"> Boss脚本</strong>中传递一个<strong class="jw ir"> bool </strong>，以及一个<strong class="jw ir"> int </strong>供侧面开火。</p><p id="3ae5" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">如果<strong class="jw ir"> Boss </strong>允许<strong class="jw ir">炮塔</strong>开火，我启动两个协程，一个用于旋转——这将在明天的文章中讨论，另一个用于发射大型炮塔。</p><p id="e7f3" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">对于较小的炮塔，我需要运行一个<strong class="jw ir">侧选方法</strong>类似于地雷方法。</p><p id="2cbd" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">如果<strong class="jw ir"> Boss </strong>阻止<strong class="jw ir">炮塔</strong>开火，我只需使用<strong class="jw ir"> StopAllCoroutines。</strong></p><figure class="kt ku kv kw gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ks"><img src="../Images/cfe16b1c8f3de90b9d50ece062dd6862.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PsqxPtkdc4XJuRY4g9YWcA.png"/></div></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">我在这里使用了int而不是strings！这个老板是一个正在进行的建设！</figcaption></figure><p id="5163" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">另外，一旦boss完成，我打算做一个<strong class="jw ir">游戏对象</strong>的<strong class="jw ir">数组</strong>来存放不同的空容器。</p><figure class="kt ku kv kw gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ln"><img src="../Images/b6727c8e53a15b0d8ef4cd316ce6f982.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9Wsq2kD_skJnB8dpTkIgYQ.png"/></div></div></figure><p id="44b9" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">用于<strong class="jw ir">触发协程。</strong>我检查<strong class="jw ir">标签</strong>以区分两个尺寸，然后在一个<strong class="jw ir"> while循环</strong>中，我<strong class="jw ir">实例化</strong>适当的<strong class="jw ir">激光预制、</strong>并将<strong class="jw ir">激光</strong>添加到<strong class="jw ir">容器中。</strong></p><p id="2951" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在未展示的<strong class="jw ir">大型炮塔协程</strong>中，唯一额外的方面是我必须为<strong class="jw ir">激光创建一个<strong class="jw ir">矢量3偏移</strong>。</strong>我没有为<strong class="jw ir">标准炮塔</strong>这样做的原因是，它在非常近的距离发射两个较小的激光。我不想让这个对玩家造成两次伤害，所以我创建了一个包含<strong class="jw ir">激光行为的<strong class="jw ir">空对象</strong>，</strong>中嵌套了两个包含<strong class="jw ir">激光精灵的对象。</strong></p><figure class="kt ku kv kw gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi lo"><img src="../Images/c5458ddf2de38b29b52d2bf2e3440ec6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SVgwkCJM8CtNCH7VA_Pg4w.png"/></div></div></figure><p id="5c03" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">为了从<strong class="jw ir"> Boss脚本中调用<strong class="jw ir"> TurretControl方法</strong>，</strong>我创建了一个方法来存储每个<strong class="jw ir"> Turret的脚本</strong>，因为我会多次访问它们以用于各种用途。</p><p id="43c9" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">一旦访问了<strong class="jw ir">脚本，</strong>我就把它们添加到了<strong class="jw ir">列表中。</strong></p><figure class="kt ku kv kw gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi lo"><img src="../Images/70c433ec10db302a11e9ab9b878d8558.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sK-I7opMWLkR5UQK-dWUHQ.png"/></div></div></figure><p id="eee1" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">从这里，我可以简单地访问我的<strong class="jw ir">所有刀塔列表</strong>中的每个<strong class="jw ir">刀塔脚本</strong>，并访问我喜欢的任何一个<strong class="jw ir">公共方法</strong>。我创建了一个<strong class="jw ir">开始转塔</strong>和<strong class="jw ir">停止转塔方法</strong>，通过适当的调用调用我的<strong class="jw ir">转塔控制方法</strong>。</p><p id="ff2c" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">然后我在我的<strong class="jw ir"> StateSelector方法</strong>的开头和结尾分别调用了这两个方法。</p><figure class="kt ku kv kw gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi lo"><img src="../Images/ef639f33a4143ed93ae7b68109a399ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dVHLMVHH-JD06uQECEBwZg.png"/></div></div></figure><p id="a482" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">明天，让我们看看如何实现健康系统，并让炮塔跟踪玩家。</p><figure class="kt ku kv kw gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi lf"><img src="../Images/a4627c2fc468bc831e4d843fcf6c5503.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*8UUT4Mqd7i6VMrWlbWnaUQ.gif"/></div></div></figure><p id="edd1" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">点击这里查看第三部<a class="ae lp" rel="noopener ugc nofollow" target="_blank" href="/space-shooter-challenge-boss-part-3-turret-rotation-and-health-system-1c958a439f97"/>！</p></div></div>    
</body>
</html>