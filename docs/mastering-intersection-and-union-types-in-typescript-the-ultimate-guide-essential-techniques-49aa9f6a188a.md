# æŒæ¡ TypeScript ä¸­çš„äº¤é›†å’Œå¹¶é›†ç±»å‹:æœ€ç»ˆæŒ‡å—å’ŒåŸºæœ¬æŠ€æœ¯

> åŸæ–‡ï¼š<https://levelup.gitconnected.com/mastering-intersection-and-union-types-in-typescript-the-ultimate-guide-essential-techniques-49aa9f6a188a>

åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†æ¢ç´¢ TypeScript ä¸­äº¤é›†å’Œå¹¶é›†ç±»å‹çš„ç”¨ä¾‹åŠå…¶ä¼˜ç‚¹ï¼Œå¹¶æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨å®ƒä»¬æ¥æé«˜ä»£ç çš„å¯é æ€§å’Œçµæ´»æ€§ï¼Œä¸ºåˆå­¦è€…æˆ–æœ‰ç»éªŒçš„ TypeScript å¼€å‘äººå‘˜æä¾›æœ‰ä»·å€¼çš„è§è§£ã€‚è®©æˆ‘ä»¬å¼€å§‹å§â€¦

![](img/5b4d9096dfe1081cfc91318f95ad8b9f.png)

# ç›®å½•

*   äº¤å‰ç‚¹ç±»å‹
    *å…³é”®ç‚¹
*   å·¥ä¼šç±»å‹
*   ç±»å‹ç®€åŒ–

# äº¤å‰ç‚¹ç±»å‹

ä»€ä¹ˆæ˜¯äº¤é›†ç±»å‹ï¼Ÿç®€å•åœ°è¯´ï¼Œäº¤é›†ç±»å‹æ˜¯ä¸€ç§ä½¿ç”¨`&`ç¬¦å·å°†å¤šä¸ªç±»å‹ç»„åˆæˆä¸€ä¸ªç±»å‹ï¼Œç„¶åä½¿ç”¨`type`å£°æ˜æ–°åˆ›å»ºçš„ç±»å‹çš„æ–¹æ³•ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªä¾‹å­:

```
type A = { a: number };
type B = { b: string };
type C = A & B;
let c: C = { a: 1, b: '2' };
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸¤ç§ç±»å‹ï¼Œ`A`å’Œ`B`ï¼Œå®ƒä»¬å„æœ‰ä¸€ä¸ªå±æ€§ã€‚ç„¶åæˆ‘ä»¬ä½¿ç”¨`&`æ“ä½œç¬¦å°†è¿™ä¸¤ç§ç±»å‹ç»„åˆæˆä¸€ç§æ–°çš„ç±»å‹ï¼Œç§°ä¸º`C`ã€‚ç„¶åæˆ‘ä»¬å¯ä»¥ä½¿ç”¨`C`ç±»å‹å£°æ˜ä¸€ä¸ªå˜é‡`c`ï¼Œå®ƒå¿…é¡»åŒæ—¶å…·æœ‰`a`å’Œ`b`å±æ€§ã€‚

å½“æ‚¨æƒ³è¦å®šä¹‰ä¸€ä¸ªå…·æœ‰å¤šç§ç±»å‹çš„æ‰€æœ‰å±æ€§çš„ç±»å‹æ—¶ï¼Œäº¤é›†ç±»å‹éå¸¸æœ‰ç”¨ã€‚å½“åœ¨ TypeScript ä¸­ä½¿ç”¨æ¥å£æ—¶ï¼Œå®ƒä»¬ç‰¹åˆ«æœ‰ç”¨ã€‚

# è¦ç‚¹

*   ä»»ä½•ç±»å‹éƒ½å¯ä»¥ç”¨`&`ç»„åˆæˆæ–°ç±»å‹å—ï¼Ÿ

ä¸ï¼Œç”¨`&`æ“ä½œç¬¦ç»„åˆåŸºæœ¬ç±»å‹æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œå› ä¸ºç»“æœç±»å‹ä¼šæ˜¯`never`ã€‚ä¾‹å¦‚ï¼Œ`string & number`æ˜¯æ— æ•ˆçš„ï¼Œå› ä¸ºä¸€ä¸ªå€¼ä¸å¯èƒ½æ—¢æ˜¯å­—ç¬¦ä¸²åˆæ˜¯æ•°å­—ã€‚

*   å±æ€§åç›¸åŒçš„æ¥å£ç±»å‹ä½¿ç”¨`&`ç»„åˆæ—¶æ˜¯å¦‚ä½•å¤„ç†çš„ï¼Ÿ

è¿™é‡Œæœ‰ä¸¤ç§æƒ…å†µéœ€è¦è€ƒè™‘:

1.  å¦‚æœå±æ€§ç±»å‹ç›¸åŒï¼Œåˆ™ç»“æœç±»å‹å°†å…·æœ‰ç›¸åŒçš„å±æ€§ç±»å‹ã€‚
2.  å¦‚æœå±æ€§ç±»å‹ä¸åŒï¼Œç»“æœç±»å‹å°†å…·æœ‰å±æ€§ç±»å‹`never`ã€‚

```
interface X{
 q:number,
 w:string
}
interface Y{
 q:boolean,
 r:string,
}
type XY = X&Y
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ`XY`ç±»å‹è¢«å®šä¹‰ä¸º`X`å’Œ`Y`æ¥å£çš„äº¤é›†ã€‚è¿™æ„å‘³ç€`XY`ç±»å‹å°†æœ‰ä¸‰ä¸ªå±æ€§:`q`ã€`w`å’Œ`r`ã€‚`q`å±æ€§çš„ç±»å‹å°†æ˜¯`never`ï¼Œå› ä¸º`q`å±æ€§åœ¨`X`å’Œ`Y`æ¥å£ä¸­æœ‰ä¸åŒçš„ç±»å‹ã€‚`w`å’Œ`r`å±æ€§å°†åˆ†åˆ«å…·æœ‰ä¸`X`å’Œ`Y`æ¥å£ç›¸åŒçš„ç±»å‹ã€‚

å› æ­¤ï¼Œäº§ç”Ÿçš„`XY`ç±»å‹å°†å…·æœ‰ä»¥ä¸‹ç»“æ„:

```
{
  q: never,
  w: string,
  r: string
}
```

æ‚¨å¯ä»¥ä½¿ç”¨`XY`ç±»å‹æ¥å£°æ˜å¿…é¡»åœ¨`X`å’Œ`Y`æ¥å£ä¸­å®šä¹‰å±æ€§çš„å˜é‡ã€‚ä¾‹å¦‚:

```
let xy: XY = { q: true, w: 'foo', r: 'bar' };
```

è¯¥å˜é‡`xy`å¿…é¡»æœ‰ä¸€ä¸ª`boolean`ç±»å‹çš„`q`å±æ€§ã€`string`ç±»å‹çš„`w`å±æ€§å’Œ`string`ç±»å‹çš„`r`å±æ€§ã€‚

å¦ä¸€ä¸ªæ›´é«˜çº§çš„ä¾‹å­æ˜¯:

```
interface A {
    inner: D;
}
interface B {
    inner: E;
}
interface C {
    inner: F;
}

interface D {
    d: boolean;
}
interface E {
    e: string;
}
interface F {
    f: number;
}
type ABC = A & B & C;
let abc: ABC = {
    inner: {
        d: false,
        e: 'className',
        f: 5
    }
};
```

åœ¨æœ¬ä¾‹ä¸­ï¼Œ`ABC`ç±»å‹è¢«å®šä¹‰ä¸º`A`ã€`B`å’Œ`C`æ¥å£çš„äº¤é›†ã€‚è¿™æ„å‘³ç€`ABC`ç±»å‹å°†åªæœ‰ä¸€ä¸ªå±æ€§`inner`ï¼Œå®ƒæœ¬èº«æ˜¯ä¸€ä¸ªå…·æœ‰ä¸‰ä¸ªå±æ€§çš„å¯¹è±¡:`d`ã€`e`å’Œ`f`ã€‚

`ABC`ç±»å‹çš„`inner`å±æ€§æ˜¯`A`ã€`B`å’Œ`C`æ¥å£çš„`inner`å±æ€§çš„è”åˆã€‚è¿™æ„å‘³ç€å®ƒå¿…é¡»å…·æœ‰æ‰€æœ‰ä¸‰ä¸ªå±æ€§:`d`ã€`e`å’Œ`f`ï¼Œå¹¶ä¸”å®ƒä»¬çš„ç±»å‹å¿…é¡»åˆ†åˆ«ä¸`D`ã€`E`å’Œ`F`æ¥å£ä¸­å®šä¹‰çš„ç±»å‹ç›¸åŒ¹é…ã€‚

å› æ­¤ï¼Œäº§ç”Ÿçš„`ABC`ç±»å‹å°†å…·æœ‰ä»¥ä¸‹ç»“æ„:

```
{
  inner: {
    d: boolean,
    e: string,
    f: number
  }
}
```

æ‚¨å¯ä»¥ä½¿ç”¨`ABC`ç±»å‹æ¥å£°æ˜å˜é‡ï¼Œè¿™äº›å˜é‡å¿…é¡»å…·æœ‰åœ¨æ‰€æœ‰ä¸‰ä¸ª`A`ã€`B`å’Œ`C`æ¥å£ä¸­å®šä¹‰çš„å±æ€§ã€‚ä¾‹å¦‚:

```
let abc: ABC = {
  inner: {
    d: false,
    e: 'className',
    f: 5
  }
};
```

è¿™ä¸ªå˜é‡`abc`å¿…é¡»æœ‰ä¸€ä¸ª`inner`å±æ€§ï¼Œè¯¥å±æ€§æ˜¯ä¸€ä¸ªå…·æœ‰ç±»å‹`boolean`çš„`d`å±æ€§ã€ç±»å‹`string`çš„`e`å±æ€§å’Œç±»å‹`number`çš„`f`å±æ€§çš„å¯¹è±¡ã€‚

# å·¥ä¼šç±»å‹

è”åˆç±»å‹å…è®¸æ‚¨æŒ‡å®šå¯ä»¥æ˜¯å‡ ç§ä¸åŒç±»å‹ä¹‹ä¸€çš„å€¼ã€‚è¦åˆ›å»ºä¸€ä¸ªè”åˆç±»å‹ï¼Œå¯ä»¥ä½¿ç”¨`|`æ“ä½œç¬¦å°†å¤šä¸ªç±»å‹ç»„åˆæˆä¸€ä¸ªç±»å‹ã€‚ä¾‹å¦‚:

```
type A = { a: number };
type B = { b: string };
type C = A | B;
let c: C = { a: 1 };
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸¤ä¸ªç±»å‹ï¼Œ`A`å’Œ`B`ï¼Œå®ƒä»¬å„æœ‰ä¸€ä¸ªå±æ€§ã€‚ç„¶åæˆ‘ä»¬ä½¿ç”¨`|`æ“ä½œç¬¦åˆ›å»ºä¸€ä¸ªåä¸º`C`çš„æ–°ç±»å‹ï¼Œå®ƒè¡¨ç¤ºä¸€ä¸ªå¯ä»¥æ˜¯`A`æˆ–`B`çš„å€¼ã€‚ç„¶åæˆ‘ä»¬å¯ä»¥ä½¿ç”¨`C`ç±»å‹æ¥å£°æ˜ä¸€ä¸ªå˜é‡`c`ï¼Œå®ƒå¿…é¡»å…·æœ‰`number`ç±»å‹çš„`a`å±æ€§æˆ–è€…`string`ç±»å‹çš„`b`å±æ€§ã€‚

å½“æ‚¨å¸Œæœ›ä¸€ä¸ªå€¼å¯ä»¥æ˜¯å‡ ç§ä¸åŒç±»å‹ä¸­çš„ä¸€ç§æ—¶ï¼Œè”åˆç±»å‹éå¸¸æœ‰ç”¨ã€‚å½“ä½¿ç”¨ TypeScript ä¸­çš„å‡½æ•°æ—¶ï¼Œå®ƒä»¬ç‰¹åˆ«æœ‰ç”¨ã€‚

## å‡½æ•°æ¥å£ç±»å‹çš„è”åˆç±»å‹

è”åˆç±»å‹ä¹Ÿå¯ä»¥ä¸å‡½æ•°æ¥å£ç±»å‹ä¸€èµ·ä½¿ç”¨ã€‚ä¾‹å¦‚:

```
interface A {
  (a: number): string;
}
interface B {
  (b: string): number;
}
type C = A | B;
let c: C;
c = (val: string | number) => {
  if (typeof val === 'string') {
    return val.length;
  } else {
    return val.toString();
  }
};
```

åœ¨æœ¬ä¾‹ä¸­ï¼Œ`C`ç±»å‹è¢«å®šä¹‰ä¸º`A`å’Œ`B`æ¥å£çš„è”åˆã€‚è¿™æ„å‘³ç€`C`ç±»å‹è¡¨ç¤ºä¸€ä¸ªå‡½æ•°ï¼Œå®ƒå¯ä»¥æ¥å—ä¸€ä¸ª`number`å¹¶è¿”å›ä¸€ä¸ª`string`ï¼Œæˆ–è€…æ¥å—ä¸€ä¸ª`string`å¹¶è¿”å›ä¸€ä¸ª`number`ã€‚

`c`å˜é‡ç”¨`C`ç±»å‹å£°æ˜ï¼Œå¹¶è¢«èµ‹äºˆä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°æ¥å—`string | number`ç±»å‹çš„å€¼ï¼Œå¹¶æ ¹æ®å€¼çš„ç±»å‹è¿”å›`string`æˆ–`number`ã€‚

å½“æ‚¨å¸Œæœ›å‡½æ•°æ¥å—å¤šç§ä¸åŒç±»å‹çš„å‚æ•°ï¼Œæˆ–è€…è¿”å›å¤šç§ä¸åŒç±»å‹çš„å€¼æ—¶ï¼Œè¿™å¯èƒ½ä¼šå¾ˆæœ‰ç”¨ã€‚

## ç±»å‹ç®€åŒ–

TypeScript æœ‰ä¸€ä¸ªç§°ä¸ºç±»å‹ç¼©å‡çš„åŠŸèƒ½ï¼Œå®ƒå…è®¸æ‚¨æ ¹æ®ä½¿ç”¨å€¼çš„ä¸Šä¸‹æ–‡æ¥æ¨æ–­å€¼çš„ç±»å‹ã€‚ä¾‹å¦‚:

```
let a: A | B;
if (someCondition) {
  a = { a: 1 };
} else {
  a = { b: '2' };
}
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å£°æ˜äº†ä¸€ä¸ªè”åˆç±»å‹ä¸º`A | B`çš„å˜é‡`a`ã€‚æ ¹æ®`someCondition`çš„å€¼ï¼Œ`a`è¢«åˆ†é…ä¸€ä¸ª`A`æˆ–`B`å€¼ã€‚ç„¶è€Œï¼Œä¸€æ—¦è¿›è¡Œäº†èµ‹å€¼ï¼Œ`a`çš„ç±»å‹ä¼šæ ¹æ®æ‰€èµ‹çš„å€¼å‡å°‘ä¸º`A`æˆ–`B`ã€‚

è¿™åœ¨ä½¿ç”¨è”åˆç±»å‹æ—¶ç‰¹åˆ«æœ‰ç”¨ï¼Œå› ä¸ºå®ƒå…è®¸æ‚¨åˆ©ç”¨ TypeScript çš„ç±»å‹å®‰å…¨ï¼ŒåŒæ—¶è¿˜å…è®¸çµæ´»åœ°ä¸ºå˜é‡èµ‹å€¼ã€‚

## å»¶ä¼¸é˜…è¯»:

*   [TypeScript å¿…å¤‡åŸºç¡€çŸ¥è¯†â€”ç±»å‹åˆ«åå’Œæ¥å£](/typescript-must-know-fundamentals-for-your-next-tech-interview-or-project-255ae70df0a3)
*   [åƒä¸“å®¶ä¸€æ ·ä½¿ç”¨æ‰“å­—é”®](/use-typescript-keyof-like-a-pro-56f3a3d06b73)
*   [æ‰“å­—ç¨¿ç±»â€”â€”ä»é›¶åˆ°è‹±é›„](/typescript-classes-from-zero-to-hero-a429a3c96189)
*   [ä½¿ç”¨ç±»å’Œè£…é¥°å™¨çš„ä¸‹ä¸€çº§ Typescript è¿è¡Œæ—¶ç±»å‹éªŒè¯](/next-level-your-typescript-runtime-type-validation-using-class-and-decorators-ddd2ce3c86f3)
*   [æŒæ¡ç±»å‹è„šæœ¬æ³›å‹:ç»ˆææŒ‡å—](/mastering-typescript-generics-the-ultimate-guide-3a62afeff44)
*   æ‰“å­—æŠ€å·§å’Œæç¤º:ç«‹åˆ»æˆä¸ºä¸“ä¸šäººå£«
*   [TypeScript ä¸­çš„æ³›å‹â€”â€”æ„šè ¢ç®€åŒ–çš„åŸºç¡€çŸ¥è¯†](/generics-in-typescript-must-know-fundamentals-stupidly-simplified-e7b4d7ffc0e3)
*   [Typescript é—æ¼äº†è¿™ä¸€ç‚¹ï¼Œä½†ä½ ä¸åº”è¯¥â€”è¿è¡Œæ—¶ç±»å‹éªŒè¯](/typescript-missed-this-but-you-shouldnt-runtime-type-validation-aa8a81ce4289)
*   [Typescript æšä¸¾é™·é˜±å’Œè§£å†³æ–¹æ¡ˆå¿…é¡»çŸ¥é“](/typescript-enum-pitfalls-and-solutions-must-know-bb971cb0f7d2)
*   [æŒæ¡æ‰“å­—ç¨¿æ³›å‹â€”ç»ˆææŒ‡å—â€”åŸºæœ¬æ¥å£æŠ€æœ¯](https://bootcamp.uxdesign.cc/mastering-typescript-generics-the-ultimate-guide-essential-interface-techniques-86e793cf1fc)
*   Javascript å¼€å‘äººå‘˜ç»å¸¸å¿½ç•¥çš„ Typescript ç‰¹æ€§

å¦‚æœä½ è§‰å¾—è¿™ä¸ªæŒ‡å—æœ‰å¸®åŠ©ï¼Œè¯·é¼“æŒå¹¶è·Ÿæˆ‘æ¥ã€‚é€šè¿‡[é“¾æ¥](https://medium.com/@caopengau/membership)åŠ å…¥ mediumï¼Œåœ¨ medium ä¸Šè®¿é—®æˆ‘å’Œæ‰€æœ‰å…¶ä»–ä¼˜ç§€ä½œå®¶çš„æ‰€æœ‰ä¼˜è´¨æ–‡ç« ã€‚

# åˆ†çº§ç¼–ç 

æ„Ÿè°¢æ‚¨æˆä¸ºæˆ‘ä»¬ç¤¾åŒºçš„ä¸€å‘˜ï¼åœ¨ä½ ç¦»å¼€ä¹‹å‰:

*   ğŸ‘ä¸ºæ•…äº‹é¼“æŒï¼Œè·Ÿç€ä½œè€…èµ°ğŸ‘‰
*   ğŸ“°æŸ¥çœ‹[å‡çº§ç¼–ç å‡ºç‰ˆç‰©](https://levelup.gitconnected.com/?utm_source=pub&utm_medium=post)ä¸­çš„æ›´å¤šå†…å®¹
*   ğŸ””å…³æ³¨æˆ‘ä»¬:[Twitter](https://twitter.com/gitconnected)|[LinkedIn](https://www.linkedin.com/company/gitconnected)|[æ—¶äº‹é€šè®¯](https://newsletter.levelup.dev)

ğŸš€ğŸ‘‰ [**åŠ å…¥äººæ‰é›†ä½“ï¼Œæ‰¾åˆ°ä¸€ä»½ä»¤äººæƒŠå–œçš„å·¥ä½œ**](https://jobs.levelup.dev/talent/welcome?referral=true)