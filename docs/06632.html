<html>
<head>
<title>How to Create a Simple Chess App With React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用React创建一个简单的象棋应用程序</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-create-a-simple-chess-app-with-react-e18c0179b167?source=collection_archive---------1-----------------------#2020-12-15">https://levelup.gitconnected.com/how-to-create-a-simple-chess-app-with-react-e18c0179b167?source=collection_archive---------1-----------------------#2020-12-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="37e5" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">不到50行代码</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/5576bab89cd147f211245ca60c3f267e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kMlRp4widUrDBFTocJrghQ.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@neon845b?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Jani Kaasinen </a>在<a class="ae kv" href="https://unsplash.com/s/photos/online-chess?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><h2 id="b91c" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">我们在创造什么</h2><p id="fdee" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">如果你对我们将要创造的东西感兴趣。这是给你的演示。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ml"><img src="../Images/1484c60dd1e8fed841d303fbf7abb961.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/1*6I2DQszOXHdZ_uAiHDcVxg.gif"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">随机象棋</figcaption></figure><p id="8821" class="pw-post-body-paragraph ls lt iq lu b lv mm jr lx ly mn ju ma lf mo mc md lj mp mf mg ln mq mi mj mk ij bi translated">这是一个简单的棋盘，你可以移动，计算机将发挥一个有效的随机移动。这种情况一直持续到游戏结束。</p><h2 id="80a7" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">棋盘</h2><p id="6eb6" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">不，我们不会创造自己的棋盘。如果我们在创造一个棋盘，我应该写一本书，而不是一篇文章。</p><p id="5846" class="pw-post-body-paragraph ls lt iq lu b lv mm jr lx ly mn ju ma lf mo mc md lj mp mf mg ln mq mi mj mk ij bi translated">我们将使用<a class="ae kv" href="https://github.com/willb335/chessboardjsx" rel="noopener ugc nofollow" target="_blank">棋盘. jsx </a>。这是一个用于<a class="ae kv" href="https://github.com/oakmac/chessboardjs" rel="noopener ugc nofollow" target="_blank">棋盘. js </a>的react包装器，可以免费使用。</p><h2 id="0c99" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">国际象棋规则</h2><p id="2155" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">要实现我们想要的，光靠棋盘是不够的。因为棋盘是一个组件，它不知道象棋的规则。我们需要<code class="fe mr ms mt mu b">chess.js</code>，另一个知道国际象棋规则的开源国际象棋库。并且将帮助我们检查所下的棋是否有效，该轮到谁下了，游戏是否结束，等等。</p><h2 id="a6ee" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">我们开始吧</h2><p id="5f3d" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">现在我们得到了我们需要的。让我们开始编码吧。首先，我们借助<code class="fe mr ms mt mu b">create-react-app</code>工具，用typescript创建一个react app。</p><pre class="kg kh ki kj gt mv mu mw mx aw my bi"><span id="f7b0" class="kw kx iq mu b gy mz na l nb nc">$ npx create-react-app --template=typescript chess-game</span></pre><p id="ea2e" class="pw-post-body-paragraph ls lt iq lu b lv mm jr lx ly mn ju ma lf mo mc md lj mp mf mg ln mq mi mj mk ij bi translated">接下来，在你最喜欢的编辑器中打开项目，然后打开<code class="fe mr ms mt mu b">src/App.tsx</code>文件，删除所有代码。</p><p id="b9b2" class="pw-post-body-paragraph ls lt iq lu b lv mm jr lx ly mn ju ma lf mo mc md lj mp mf mg ln mq mi mj mk ij bi translated">我们将从渲染棋盘开始。如前所述，我们将使用<code class="fe mr ms mt mu b">chessboardjsx</code>。在我们使用它之前，我们必须安装它。</p><pre class="kg kh ki kj gt mv mu mw mx aw my bi"><span id="519c" class="kw kx iq mu b gy mz na l nb nc">// npm<br/>$ npm install chessboardjsx<br/>// yarn<br/>$ yarn add chessboardjsx</span></pre><p id="d2c9" class="pw-post-body-paragraph ls lt iq lu b lv mm jr lx ly mn ju ma lf mo mc md lj mp mf mg ln mq mi mj mk ij bi translated">现在，我们已经安装了<code class="fe mr ms mt mu b">chessboardjsx</code>。让我们渲染棋盘。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="b02d" class="pw-post-body-paragraph ls lt iq lu b lv mm jr lx ly mn ju ma lf mo mc md lj mp mf mg ln mq mi mj mk ij bi translated">我正在使用我在<code class="fe mr ms mt mu b">App.css</code>中定义的<code class="fe mr ms mt mu b">flex-center</code> css类来将页面居中。</p><p id="ba28" class="pw-post-body-paragraph ls lt iq lu b lv mm jr lx ly mn ju ma lf mo mc md lj mp mf mg ln mq mi mj mk ij bi translated">我们将2个道具传递给<code class="fe mr ms mt mu b">Chessboard</code>组件。第一个很明显，<code class="fe mr ms mt mu b">width</code>告诉我们棋盘的宽度。第二个是<code class="fe mr ms mt mu b">position</code>，其实是一个<a class="ae kv" href="https://www.chessprogramming.org/Forsyth-Edwards_Notation" rel="noopener ugc nofollow" target="_blank">分</a>。如果你是象棋新手。Fen是棋子位置的文本表示，还包含一些其他信息。如果你想了解更多关于fen的知识。你可以在这里做<a class="ae kv" href="https://www.chessprogramming.org/Forsyth-Edwards_Notation" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="c7e7" class="pw-post-body-paragraph ls lt iq lu b lv mm jr lx ly mn ju ma lf mo mc md lj mp mf mg ln mq mi mj mk ij bi translated">让我们运行应用程序，这是您应该在浏览器中看到的内容。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ml"><img src="../Images/eaa5e723dfaf0c6676dc5032f675523c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*845KjhEH4d2_1nmESo3Fiw.png"/></div></figure><p id="1dd4" class="pw-post-body-paragraph ls lt iq lu b lv mm jr lx ly mn ju ma lf mo mc md lj mp mf mg ln mq mi mj mk ij bi translated">如果你试着走几步，你会发现你可以走任何一步。我们有一块免费的木板。</p><p id="120c" class="pw-post-body-paragraph ls lt iq lu b lv mm jr lx ly mn ju ma lf mo mc md lj mp mf mg ln mq mi mj mk ij bi translated">现在，我们用<code class="fe mr ms mt mu b"><a class="ae kv" href="https://github.com/jhlywa/chess.js" rel="noopener ugc nofollow" target="_blank">chess.js</a></code>来添加游戏逻辑。在我们使用<code class="fe mr ms mt mu b">chess.js</code>之前，我们必须安装它。</p><pre class="kg kh ki kj gt mv mu mw mx aw my bi"><span id="d1cc" class="kw kx iq mu b gy mz na l nb nc">npm install chess.js</span></pre><p id="5847" class="pw-post-body-paragraph ls lt iq lu b lv mm jr lx ly mn ju ma lf mo mc md lj mp mf mg ln mq mi mj mk ij bi translated">因为我们使用了typescript，所以我们也将为<code class="fe mr ms mt mu b">chess.js</code>添加类型</p><pre class="kg kh ki kj gt mv mu mw mx aw my bi"><span id="0f9c" class="kw kx iq mu b gy mz na l nb nc">npm install @types/chess.js --save-dev</span></pre><p id="d72a" class="pw-post-body-paragraph ls lt iq lu b lv mm jr lx ly mn ju ma lf mo mc md lj mp mf mg ln mq mi mj mk ij bi translated">让我们将<code class="fe mr ms mt mu b">chess.js</code>添加到我们的应用程序中。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="77c3" class="pw-post-body-paragraph ls lt iq lu b lv mm jr lx ly mn ju ma lf mo mc md lj mp mf mg ln mq mi mj mk ij bi translated">我用<code class="fe mr ms mt mu b">require</code>导入<code class="fe mr ms mt mu b">Chess</code>，用import导入<code class="fe mr ms mt mu b">ChessInstance</code>。这是因为，在撰写本文时，<code class="fe mr ms mt mu b">chess.js</code>和<code class="fe mr ms mt mu b">@types/chess.js</code>并不同步。</p><p id="5ba6" class="pw-post-body-paragraph ls lt iq lu b lv mm jr lx ly mn ju ma lf mo mc md lj mp mf mg ln mq mi mj mk ij bi translated">并使用<code class="fe mr ms mt mu b">useState</code>通过传递初始fen来实例化一个<code class="fe mr ms mt mu b">Chess</code>实例。</p><p id="9cc1" class="pw-post-body-paragraph ls lt iq lu b lv mm jr lx ly mn ju ma lf mo mc md lj mp mf mg ln mq mi mj mk ij bi translated">通过使用<code class="fe mr ms mt mu b">chess</code>，我们将允许用户只进行有效的移动。玩随机的电脑游戏。让我们开始吧。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="e1d6" class="pw-post-body-paragraph ls lt iq lu b lv mm jr lx ly mn ju ma lf mo mc md lj mp mf mg ln mq mi mj mk ij bi translated">我会试着分析一下这里发生了什么。</p><p id="d856" class="pw-post-body-paragraph ls lt iq lu b lv mm jr lx ly mn ju ma lf mo mc md lj mp mf mg ln mq mi mj mk ij bi translated">首先，我们给<code class="fe mr ms mt mu b">Chessboard</code>组件添加了<code class="fe mr ms mt mu b">onDrop</code>道具。每当拾取一个棋子并将其放到棋盘上时，就会调用<code class="fe mr ms mt mu b">onDrop</code>。递给我们<code class="fe mr ms mt mu b">sourceSquare</code>(从方格)和<code class="fe mr ms mt mu b">targetSquare</code>(到方格)。</p><p id="e74a" class="pw-post-body-paragraph ls lt iq lu b lv mm jr lx ly mn ju ma lf mo mc md lj mp mf mg ln mq mi mj mk ij bi translated">我们创建了一个<code class="fe mr ms mt mu b">handleMove</code>函数，它从<code class="fe mr ms mt mu b">chess.js</code>接收一个<code class="fe mr ms mt mu b">ShortMove</code>。<code class="fe mr ms mt mu b">ShortMove</code>是具有<code class="fe mr ms mt mu b">from</code>、<code class="fe mr ms mt mu b">to</code>、<code class="fe mr ms mt mu b">promotion</code>属性的对象。当<code class="fe mr ms mt mu b">onDrop</code>被调用时，我们将<code class="fe mr ms mt mu b">sourceSquare</code>和<code class="fe mr ms mt mu b">targetSquare</code>转换为<code class="fe mr ms mt mu b">ShortMove</code>。我们将<code class="fe mr ms mt mu b">promotion</code>作为<code class="fe mr ms mt mu b">q</code>传递。告诉<code class="fe mr ms mt mu b">chess.js</code>每当升级发生时自动升级为女王。</p><p id="d1f3" class="pw-post-body-paragraph ls lt iq lu b lv mm jr lx ly mn ju ma lf mo mc md lj mp mf mg ln mq mi mj mk ij bi translated">我们在<code class="fe mr ms mt mu b">handleMove</code>做的第一件事是在<code class="fe mr ms mt mu b">chess.js</code>采取行动。如果传递的移动有效，它将返回一个有效的完整移动，否则<code class="fe mr ms mt mu b">null</code>。如果一个走法有效，我们从<code class="fe mr ms mt mu b">chess.js</code>获取更新的<code class="fe mr ms mt mu b">fen</code>并更新<code class="fe mr ms mt mu b">fen</code>状态。</p><p id="3115" class="pw-post-body-paragraph ls lt iq lu b lv mm jr lx ly mn ju ma lf mo mc md lj mp mf mg ln mq mi mj mk ij bi translated">之后，更新<code class="fe mr ms mt mu b">fen</code>。我们设置了300毫秒的超时。通过使用返回移动数组的<code class="fe mr ms mt mu b">moves()</code>获得所有有效的移动。选择一个随机移动并在<code class="fe mr ms mt mu b">chess.js</code>上玩，然后再次更新<code class="fe mr ms mt mu b">fen</code>。这种情况一直持续到游戏结束。</p><p id="57c3" class="pw-post-body-paragraph ls lt iq lu b lv mm jr lx ly mn ju ma lf mo mc md lj mp mf mg ln mq mi mj mk ij bi translated">在这个阶段，我们可以做得更多。但是我会在这里停下来，因为我想保持简单。</p><p id="d316" class="pw-post-body-paragraph ls lt iq lu b lv mm jr lx ly mn ju ma lf mo mc md lj mp mf mg ln mq mi mj mk ij bi translated">您可以在这里获得完整的源代码。</p><div class="nf ng gp gr nh ni"><a href="https://github.com/varunpvp/random-chess" rel="noopener  ugc nofollow" target="_blank"><div class="nj ab fo"><div class="nk ab nl cl cj nm"><h2 class="bd ir gy z fp nn fr fs no fu fw ip bi translated">随机象棋</h2><div class="np l"><h3 class="bd b gy z fp nn fr fs no fu fw dk translated">GitHub是超过5000万开发人员的家园，他们一起工作来托管和审查代码、管理项目和构建…</h3></div><div class="nq l"><p class="bd b dl z fp nn fr fs no fu fw dk translated">github.com</p></div></div><div class="nr l"><div class="ns l nt nu nv nr nw kp ni"/></div></div></a></div><p id="f678" class="pw-post-body-paragraph ls lt iq lu b lv mm jr lx ly mn ju ma lf mo mc md lj mp mf mg ln mq mi mj mk ij bi translated">如果你有兴趣的话，可以试试我开发的名为<a class="ae kv" href="https://puzzlerace.netlify.app/" rel="noopener ugc nofollow" target="_blank">益智游戏</a>的象棋应用。你可以和你的朋友实时比赛你的国际象棋解谜技巧。</p><div class="nf ng gp gr nh ni"><a href="https://puzzlerace.netlify.app/" rel="noopener  ugc nofollow" target="_blank"><div class="nj ab fo"><div class="nk ab nl cl cj nm"><h2 class="bd ir gy z fp nn fr fs no fu fw ip bi translated">拼图比赛-比赛你的国际象棋拼图技能</h2><div class="np l"><h3 class="bd b gy z fp nn fr fs no fu fw dk translated">一个比赛你的国际象棋技巧的应用程序</h3></div><div class="nq l"><p class="bd b dl z fp nn fr fs no fu fw dk translated">puzzlerace.netlify.app</p></div></div></div></a></div><p id="c690" class="pw-post-body-paragraph ls lt iq lu b lv mm jr lx ly mn ju ma lf mo mc md lj mp mf mg ln mq mi mj mk ij bi translated">如果您有任何问题或想了解更多信息。让我知道。如果你喜欢你所读的，给它一个掌声。</p><p id="df09" class="pw-post-body-paragraph ls lt iq lu b lv mm jr lx ly mn ju ma lf mo mc md lj mp mf mg ln mq mi mj mk ij bi translated">感谢阅读。</p></div><div class="ab cl nx ny hu nz" role="separator"><span class="oa bw bk ob oc od"/><span class="oa bw bk ob oc od"/><span class="oa bw bk ob oc"/></div><div class="ij ik il im in"><h1 id="8422" class="oe kx iq bd ky of og oh lb oi oj ok le jw ol jx li jz om ka lm kc on kd lq oo bi translated">分级编码</h1><p id="111b" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">感谢您成为我们社区的一员！<a class="ae kv" href="https://www.youtube.com/channel/UC3v9kBR_ab4UHXXdknz8Fbg?sub_confirmation=1" rel="noopener ugc nofollow" target="_blank"> <strong class="lu ir">订阅我们的YouTube频道</strong> </a>或者加入<a class="ae kv" href="https://skilled.dev/" rel="noopener ugc nofollow" target="_blank"> <strong class="lu ir"> Skilled.dev编码面试课程</strong> </a>。</p><div class="nf ng gp gr nh ni"><a href="https://skilled.dev" rel="noopener  ugc nofollow" target="_blank"><div class="nj ab fo"><div class="nk ab nl cl cj nm"><h2 class="bd ir gy z fp nn fr fs no fu fw ip bi translated">编写面试问题+获得开发工作</h2><div class="np l"><h3 class="bd b gy z fp nn fr fs no fu fw dk translated">掌握编码面试的过程</h3></div><div class="nq l"><p class="bd b dl z fp nn fr fs no fu fw dk translated">技术开发</p></div></div><div class="nr l"><div class="op l nt nu nv nr nw kp ni"/></div></div></a></div></div></div>    
</body>
</html>