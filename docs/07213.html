<html>
<head>
<title>Insider’s guide to System Design Interviews</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">系统设计访谈的内部人员指南</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/insiders-guide-to-system-design-interviews-d824dae7a287?source=collection_archive---------15-----------------------#2021-02-01">https://levelup.gitconnected.com/insiders-guide-to-system-design-interviews-d824dae7a287?source=collection_archive---------15-----------------------#2021-02-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="cf6e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用有效的模板提升你的技能</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/9ac7cf9ae2af487040906661a9cfe936.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*QbYB71HRz-QSn9KO"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">由<a class="ae lb" href="https://unsplash.com/@youxventures?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> You X Ventures </a>在<a class="ae lb" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="d27c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">可扩展的系统设计是面试中区分高级工程师和初级工程师的最重要的方面。随着你职业生涯的发展，系统设计面试会变得更加重要，因为它们在决定候选人的水平方面发挥着重要作用。作为一名帮助开发人员进入顶级公司的技术教练，我想分享一种应对这些面试的系统方法。在这篇文章中，我将分享一个可以用来破解任何系统设计面试的模板。</p><p id="84ea" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们看看构成良好系统设计基础的主要构建模块:</p><ul class=""><li id="24a0" class="lc ld iq jp b jq jr ju jv jy le kc lf kg lg kk lh li lj lk bi translated">功能需求</li><li id="20c1" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk lh li lj lk bi translated">规模要求</li><li id="a030" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk lh li lj lk bi translated">高级设计</li><li id="c81e" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk lh li lj lk bi translated">容量要求</li></ul></div><div class="ab cl lq lr hu ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="ij ik il im in"><h1 id="65ea" class="lx ly iq bd lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu bi translated">功能需求</h1><p id="694f" class="pw-post-body-paragraph jn jo iq jp b jq mv js jt ju mw jw jx jy mx ka kb kc my ke kf kg mz ki kj kk ij bi translated">在进行系统设计之前，建立一套你和面试官都同意的通用需求是必须的。在大多数情况下，面试官故意对要求含糊其辞。他们只会从一句类似“你如何构建Instagram？”或者“复制一个优步”。你需要意识到面试官正在评估你在一个模棱两可的情况下获得清晰思路的能力。</p><p id="f51d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">考虑到这一点，现在你有责任戴上产品所有者的帽子，识别不同的人物角色，并为每个人物角色列出一个必备功能列表(例如，<em class="na">，优步有骑手和司机人物角色</em>)。重要的是，你要在这里与面试官进行开诚布公的讨论，并问一些问题，以确保你没有忽视面试官可能认为很重要的一个特点。这样做除了显示你的分析能力之外，还会显示你思路的清晰。</p></div><div class="ab cl lq lr hu ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="ij ik il im in"><h1 id="7544" class="lx ly iq bd lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu bi translated">规模要求</h1><p id="386a" class="pw-post-body-paragraph jn jo iq jp b jq mv js jt ju mw jw jx jy mx ka kb kc my ke kf kg mz ki kj kk ij bi translated">虽然我们不需要详细的确切数字，但谈论一下我们将要设计的系统的大概规模总是好的。这包括知道有多少用户将实际使用该系统。</p><p id="8a21" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">以下是对评估规模非常有帮助的几个指标:</p><ul class=""><li id="7b93" class="lc ld iq jp b jq jr ju jv jy le kc lf kg lg kk lh li lj lk bi translated">目前世界人口约80亿</li><li id="a271" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk lh li lj lk bi translated">40%的世界人口与互联网连接，约30亿人</li><li id="7d80" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk lh li lj lk bi translated">脸书、WhatsApp和YouTube等最受欢迎的社交应用拥有最高的日活跃用户(DAU)，在10-20亿之间。</li><li id="a3be" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk lh li lj lk bi translated">谷歌每秒接收大约5万次搜索。</li><li id="51b6" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk lh li lj lk bi translated">其他受欢迎的应用如Instagram、Twitter、Snap Chat、LinkedIn拥有约3-5亿DAU。</li></ul><p id="fd12" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这无疑有助于研究广泛流行的系统(尤其是那些由你面试的公司建立的系统)。</p><p id="c2ae" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">基于这些数字，你可以对你的应用程序的日活跃用户数(DAU)或月活跃用户数(MAU)进行快速粗略的估算。除此之外，还要评估系统的读/写比。这有助于确定系统是应该针对读取还是写入进行扩展。使用读/写比率和DAU，您可以确定系统的中值每秒读取数(RPS)和每秒写入数(WPS)。</p><p id="a01f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们已经有了功能需求和系统的规模，是时候继续前进，从高层次的设计开始了。</p></div><div class="ab cl lq lr hu ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="ij ik il im in"><h1 id="0e86" class="lx ly iq bd lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu bi translated">高级服务设计</h1><p id="fdbd" class="pw-post-body-paragraph jn jo iq jp b jq mv js jt ju mw jw jx jy mx ka kb kc my ke kf kg mz ki kj kk ij bi translated">设计和构建后端服务是系统设计问题的核心所在。这是你需要花大部分时间来做好的地方。除了功能需求之外，您还需要考虑规模需求，以提供一组可以独立构建和扩展的独立微服务(例如，优步可以提供定位服务、登录服务、预订服务等服务)。</p><p id="2a56" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">采用微服务架构设计的典型应用有应用层、缓存层和持久层。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/0768cac06e4594710571342758cb9c33.png" data-original-src="https://miro.medium.com/v2/resize:fit:662/format:webp/1*_4NFelKQMPZrKHvznvUa6A.png"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">典型微服务剖析</figcaption></figure><p id="5792" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于每项服务，应根据功能和规模要求设计应用程序、缓存和数据库。</p><p id="1643" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> API设计</strong></p><ul class=""><li id="9b37" class="lc ld iq jp b jq jr ju jv jy le kc lf kg lg kk lh li lj lk bi translated">资源端点和相应的HTTP动词(GET，POST，PUT，PATCH，DELETE) <em class="na">例如:GET /v1.2/places/{place_id} </em></li><li id="8ecc" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk lh li lj lk bi translated">API请求参数(<em class="na">输入模式</em>)</li><li id="3bdd" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk lh li lj lk bi translated">API响应(<em class="na">输出模式</em>)</li></ul><p id="f5d6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">数据库设计</strong></p><ul class=""><li id="ee61" class="lc ld iq jp b jq jr ju jv jy le kc lf kg lg kk lh li lj lk bi translated">用于保存数据的表模式</li><li id="67a2" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk lh li lj lk bi translated">根据比例要求确定是否需要对表格进行分片</li><li id="89c1" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk lh li lj lk bi translated">确定所需的数据库副本数量</li></ul><p id="11b2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">缓存层</strong></p><ul class=""><li id="466b" class="lc ld iq jp b jq jr ju jv jy le kc lf kg lg kk lh li lj lk bi translated">需要缓存的数据</li><li id="31e5" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk lh li lj lk bi translated">缓存刷新频率</li><li id="fde4" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk lh li lj lk bi translated">处理来自外部服务的缓存更新(如果需要)</li><li id="dfba" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk lh li lj lk bi translated">确定缓存是否需要分片和复制</li></ul><p id="c277" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">服务整合</strong></p><p id="fce8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">设计好单个服务后，你要讲讲这些微服务之间是如何通信的。您将采用作为功能需求的一部分列出的每个关键工作流，并解释每个服务之间的交互将如何帮助完成工作流中的端到端场景。</p><p id="0fbc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您还需要强调其他重要的设计决策，如“您的缓存层如何避免读取热点”、“消息代理如何避免写入热点”以及“MapReduce系统如何帮助离线批处理”。</p></div><div class="ab cl lq lr hu ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="ij ik il im in"><h1 id="67df" class="lx ly iq bd lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu bi translated">容量要求</h1><p id="51c6" class="pw-post-body-paragraph jn jo iq jp b jq mv js jt ju mw jw jx jy mx ka kb kc my ke kf kg mz ki kj kk ij bi translated">一旦我们设计了服务，通常一个好的做法是执行一个快速的信封计算，以得出容量需求。</p><p id="ef93" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">以下是可用于估算的典型生产级系统的几个关键容量指标:</p><ul class=""><li id="38df" class="lc ld iq jp b jq jr ju jv jy le kc lf kg lg kk lh li lj lk bi translated">单个生产级系统每秒可处理高达2000次典型读取</li><li id="59c8" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk lh li lj lk bi translated">单个生产级系统每秒可处理高达200次典型写入</li><li id="56e3" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk lh li lj lk bi translated">单个生产级系统可拥有高达64 GB至256 GB的内存</li><li id="d404" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk lh li lj lk bi translated">单个生产级系统可以拥有高达4 TB的磁盘空间</li></ul><p id="14ab" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">估计存储容量</strong></p><ul class=""><li id="e63e" class="lc ld iq jp b jq jr ju jv jy le kc lf kg lg kk lh li lj lk bi translated">3年存储=表中每行的大小*每秒写入次数*每天100000秒*每年1000天</li><li id="25f7" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk lh li lj lk bi translated">碎片数= 3年/ 4年的存储(<em class="na">假设每台服务器有4TB的磁盘空间</em></li><li id="12df" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk lh li lj lk bi translated">DB机器的总数=碎片数* 3(一个<em class="na">假设每个碎片需要3个副本</em></li></ul><p id="eda5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">估计缓存容量</strong></p><p id="a773" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">假设80%的请求由20%的持久化数据提供服务，这是一个很好的估计。</p><ul class=""><li id="400d" class="lc ld iq jp b jq jr ju jv jy le kc lf kg lg kk lh li lj lk bi translated">缓存存储=总存储* 0.2</li><li id="50d1" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk lh li lj lk bi translated">缓存服务器数量=缓存存储/100 ( <em class="na">假设100 GB内存/机器</em>)</li><li id="2f9e" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk lh li lj lk bi translated">缓存服务器总数=缓存服务器数量* 2 ( <em class="na">假设每个缓存服务器有2个副本</em></li></ul><p id="2090" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">估算应用服务器容量</strong></p><ul class=""><li id="5807" class="lc ld iq jp b jq jr ju jv jy le kc lf kg lg kk lh li lj lk bi translated">基于每秒读取次数的应用服务器数量=每秒读取次数/ 2000</li><li id="8dc8" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk lh li lj lk bi translated">基于每秒写入次数的应用服务器数量=每秒写入次数/ 200</li><li id="597b" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk lh li lj lk bi translated">应用服务器总数=最大值(基于每秒读取数的应用服务器数量，基于每秒写入数的应用服务器数量)</li></ul></div><div class="ab cl lq lr hu ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="ij ik il im in"><p id="9be1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">请关注我即将发表的系列文章，在这些文章中，我们将使用这些信息作为基础，使用这个模板设计一些流行的系统。</p></div></div>    
</body>
</html>