<html>
<head>
<title>What Exactly are JavaScript Strings? Sequences of 8-Bit Units or 16-Bit Units?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript字符串到底是什么？8位单位序列还是16位单位序列？</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/what-exactly-are-javascript-strings-sequences-of-8-bit-units-or-16-bit-units-b731b74c78c0?source=collection_archive---------15-----------------------#2022-07-05">https://levelup.gitconnected.com/what-exactly-are-javascript-strings-sequences-of-8-bit-units-or-16-bit-units-b731b74c78c0?source=collection_archive---------15-----------------------#2022-07-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/794cc0a921bc3df18a03145be6fde349.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KVhxtcS3eUzaTLGrwy0Flg.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">照片由<a class="ae kc" href="https://www.pexels.com/photo/two-man-and-woman-wooden-couple-keychains-hanging-on-rope-overlooking-bokeh-lights-1194025/" rel="noopener ugc nofollow" target="_blank">拍摄，这是来自Pexels </a>的尊</figcaption></figure><p id="9b14" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">几乎每次编写JavaScript代码时，我们都会用到字符串。知道如何在JavaScript中使用字符串对于每个开发人员来说都是非常重要的；事实上，字符串的概念适用于几乎所有的编程语言。毫无疑问。</p><p id="242b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但是，虽然我们可能知道如何在JavaScript中处理字符串，但我们真的熟悉JavaScript处理字符串的方式吗？我们能解释为什么<code class="fe lb lc ld le b">'🙂'.length</code>返回<code class="fe lb lc ld le b">2</code>而不是<code class="fe lb lc ld le b">1</code>吗？</p><p id="d389" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所有这些都将在本文中详细讨论。让我们开始吧…</p></div><div class="ab cl lf lg hu lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="ij ik il im in"><h1 id="c2b3" class="lm ln iq bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">JavaScript中的字符串到底是什么？</h1><p id="9345" class="pw-post-body-paragraph kd ke iq kf b kg mk ki kj kk ml km kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">任何编程语言中的字符串都是以非常典型和简单的方式定义的。也就是说，</p><blockquote class="mp mq mr"><p id="d7e8" class="kd ke ms kf b kg kh ki kj kk kl km kn mt kp kq kr mu kt ku kv mv kx ky kz la ij bi translated"><strong class="kf ir">字符串是一系列文本字符。</strong></p></blockquote><p id="cfca" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这个定义没有错——毕竟，字符串实际上是一系列字符。</p><p id="ed67" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但是如果我们真的放大记忆的深度，我们会发现这个定义有点模糊。我们真的不知道这里的<em class="ms">‘字符’</em>到底是什么意思。</p><p id="594c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">每种编程语言都可能有不同的解释。</p><p id="4cbb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我们关心的是JavaScript，对吗？</p><p id="aeb4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，从JavaScript的角度来看，按照ECMAScript规范<a class="ae kc" href="https://tc39.es/ecma262/#sec-terms-and-definitions-string-value" rel="noopener ugc nofollow" target="_blank">的规定，字符串是以如下方式定义的:</a></p><blockquote class="mp mq mr"><p id="a7ea" class="kd ke ms kf b kg kh ki kj kk kl km kn mt kp kq kr mu kt ku kv mv kx ky kz la ij bi translated"><strong class="kf ir">原始值，是零个或多个16位无符号整数值的有限有序序列。</strong></p></blockquote><p id="f0b6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">首先，从这个定义中有一点是绝对清楚的——不管是什么情况，字符串都是一个<strong class="kf ir">序列</strong>类型。</p><p id="abe9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">继续，这个序列中的每个元素都是一个16比特的数，一般称为一个<strong class="kf ir"><em class="ms"/></strong>16比特码单元，或者简称为一个<strong class="kf ir"> <em class="ms">码单元</em> </strong>。最重要的是每个元素严格来说都不是一个字符。</p><p id="c536" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们进一步阐述这一点…</p><p id="59e8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">JavaScript中的大多数字符确实消耗了一个代码单元(即一个16位数)，然而这并不适用于所有的字符。有些角色如<code class="fe lb lc ld le b">🙂</code>消耗2个代码单位。</p><p id="6285" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这马上澄清了一个事实，从技术上来说，字符串不是字符序列；相反，它是一个代码单元序列，当被解析时，形成一个(可视的)字符序列。</p><p id="0677" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这听起来可能很复杂，但本质上，这是一个非常简单的想法。</p><p id="2f16" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">根据这个想法，<code class="fe lb lc ld le b"><strong class="kf ir">length</strong></code>字符串属性<strong class="kf ir">不返回给定字符串</strong>中的字符数，而是这些16位代码单元的数量。</p><p id="36cf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这解释了下面的代码:</p><figure class="mw mx my mz gt jr"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="0777" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文的后半部分，我们将了解为什么🙂跨越2个代码单位。</p><p id="25fd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在的问题是，如果JavaScript中的字符串是一个16位整数序列，<strong class="kf ir">这些单纯的数字是如何转换成字符的？</strong></p><p id="8a10" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，【JavaScript如何判断一个代码单元何时不单独表示一个字符，而是必须与下一个单元合并来共同表示一个字符？</p><p id="01ca" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所有这些都将在下一节中回答。</p></div><div class="ab cl lf lg hu lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="ij ik il im in"><h1 id="2fad" class="lm ln iq bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">Unicode和UTF-16</h1><p id="2fc2" class="pw-post-body-paragraph kd ke iq kf b kg mk ki kj kk ml km kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">JavaScript字符串是16位代码单元的序列。那很清楚。</p><p id="78ff" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但是这并没有真正告诉我们JavaScript是如何从一个数字<code class="fe lb lc ld le b">97</code>变成字符<code class="fe lb lc ld le b">a</code>的。</p><p id="4587" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">嗯，这就是<strong class="kf ir"> <em class="ms"> Unicode </em> </strong>及其<strong class="kf ir"> <em class="ms"> UTF-16 </em> </strong>编码方案进入游戏的地方。</p><p id="5bef" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Unicode是处理文本信息的国际编码标准。它可以用来方便地表示各种各样的字符，从14.0版本开始，有144，697个字符在全球范围内使用。</p><p id="aa80" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">通俗地说，Unicode可以被认为是一个巨大的表，其中一个唯一的数字与一个特定的字符相关联。这个唯一的数字叫做角色的<strong class="kf ir"> <em class="ms">码点</em> </strong>。</p><p id="fe5b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，<code class="fe lb lc ld le b">a</code>的码位是<code class="fe lb lc ld le b">97</code>,<code class="fe lb lc ld le b">b</code>的码位是<code class="fe lb lc ld le b">98</code>,<code class="fe lb lc ld le b">A</code>的码位是<code class="fe lb lc ld le b">61</code>,<code class="fe lb lc ld le b">B</code>的码位是<code class="fe lb lc ld le b">62</code>，一个空格字符的码位是<code class="fe lb lc ld le b">32</code>等等。<code class="fe lb lc ld le b">🙂</code>的码位也在那里——<code class="fe lb lc ld le b">128578</code>。</p><p id="fb3d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你可以在<a class="ae kc" href="https://unicode-table.com/en/" rel="noopener ugc nofollow" target="_blank"> Unicode字符表</a>看到表格的部分或完整版本。</p><p id="f2f7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在Unicode只是整数到字符的映射，或者更好地说是整数到字形(字符的可视化表示)的映射。</p><p id="bac2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">帮助我们在编程环境中从这些整数(代码点)和可视表示(字形)来回转换的是一个<strong class="kf ir"> <em class="ms">编码方案</em> </strong>。</p><p id="874d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Unicode使用了几种编码方案:</p><ol class=""><li id="c537" class="nc nd iq kf b kg kh kk kl ko ne ks nf kw ng la nh ni nj nk bi translated"><strong class="kf ir"><em class="ms">【UTF】-8位</em> </strong>，为<strong class="kf ir"> <em class="ms"> Unicode转换格式-8位</em> </strong></li><li id="4745" class="nc nd iq kf b kg nl kk nm ko nn ks no kw np la nh ni nj nk bi translated"><strong class="kf ir"> <em class="ms"> UTF-16 </em> </strong>，为<strong class="kf ir"> <em class="ms"> Unicode转换格式— 16位</em> </strong></li><li id="8caa" class="nc nd iq kf b kg nl kk nm ko nn ks no kw np la nh ni nj nk bi translated"><strong class="kf ir"> <em class="ms"> UTF-32 </em> </strong>，为<strong class="kf ir"> <em class="ms"> Unicode转换格式— 32位</em> </strong></li></ol><p id="224e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">JavaScript使用第二种，即UTF-16。</p><p id="e633" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们更深入地研究UTF-16…</p><p id="c8ce" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">顾名思义，UTF-16中最基本的单位是16位整数。Unicode中的每个字符都被转换为UTF-16下的16位整数序列。</p><p id="6bce" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">注意，我们在这里使用了术语<em class="ms">‘序列’</em>，而不是说Unicode中的每个字符都被转换成UTF-16下的<em class="ms">单个</em> 16位整数。这是因为有些字符可以转换成不止一个，而是两个16位单位，比如🙂。</p><p id="5ead" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这就是<strong class="kf ir"> <em class="ms">平面的概念</em> </strong>和<strong class="kf ir"> <em class="ms">替代了</em> </strong>步骤<em class="ms"> </em>的所在。</p><p id="7dda" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">首先从<strong class="kf ir">开始用<em class="ms">刨</em>刨</strong>。平面只是一个花哨的术语，用来指Unicode中的字符集合。总共有17架飞机，可分为两类:</p><ol class=""><li id="3930" class="nc nd iq kf b kg kh kk kl ko ne ks nf kw ng la nh ni nj nk bi translated"><strong class="kf ir"> <em class="ms">基本多语言平面</em> </strong> —包含大多数常用字符。只有一架这样的飞机，那是第一架。它覆盖的码位范围如下(以十六进制提及):<code class="fe lb lc ld le b">0x0000 — 0xFFFF</code>。</li><li id="9e17" class="nc nd iq kf b kg nl kk nm ko nn ks no kw np la nh ni nj nk bi translated"><strong class="kf ir"> <em class="ms">补充平面</em> </strong> —包含不太常见的字符，如数学符号、表情符号、乐谱等。所有剩余的16个平面都是补充平面，覆盖代码点范围的剩余部分。</li></ol><p id="d386" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，我们来说说<strong class="kf ir"> <em class="ms">代孕</em> </strong>。</p><p id="4edd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">回想一下，UTF-16中最简单的单位跨越16位内存。这意味着我们只能有效地表示范围<code class="fe lb lc ld le b">0x0000 — 0xFFFF</code>中的数字。</p><p id="473e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="ms">是不是这样？</em></p><p id="b5dd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但是人物又是怎样的呢🙂用UTF-16表示，谁的码位超过了16位整数的最大限制？</p><p id="6f0f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">答案是<strong class="kf ir"> <em class="ms">代孕</em> </strong>。Unicode中有一系列字符，特别是从<code class="fe lb lc ld le b">0xDC00</code>到<code class="fe lb lc ld le b">0xDFFF</code>，它们被称为<strong class="kf ir"> <em class="ms">低代</em> </strong>。这些角色没有任何视觉表现，只是因为他们有一个特殊的目的。</p><p id="774d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">也就是说，低代理字符的目的是指示另一个16位代码单元跟随其后，<strong class="kf ir">与其</strong>一起表示单个字符。低代理后的值称为<strong class="kf ir"> <em class="ms">高代理</em> </strong>。</p><p id="7e1e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">UTF-16负责将给定的Unicode码位转换成一个16位代码单元，或一对16位代码单元(即低代理后跟高代理)，完全基于该码位。</p><p id="dcb9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">更准确地说，如果一个字符的码位可以用16位表示，UTF-16将把它转换成一个单一的代码单元。否则，UTF-16会将其转换为一对两个代码单元(总共跨越32位)。</p><p id="22a7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这种UTF-16处理的具体工作方式超出了本文的范围。你可以在<a class="ae kc" href="https://unicode.org/faq/utf_bom.html" rel="noopener ugc nofollow" target="_blank"> UTF-8、UTF-16、UTF-32 &amp; BOM </a>上阅读更多细节。</p><p id="360e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在让我们来讨论一个JavaScript特性，它可以帮助我们将字符串视为一个字符序列，而不是一个代码单元序列。</p></div><div class="ab cl lf lg hu lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="ij ik il im in"><h1 id="8c7a" class="lm ln iq bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated"><strong class="ak">字符串@迭代器方法</strong></h1><p id="1de6" class="pw-post-body-paragraph kd ke iq kf b kg mk ki kj kk ml km kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">ECMAScript 6在JavaScript中引入了符号。我们现在不讨论符号的细节，而只是了解这样一个事实，即由<code class="fe lb lc ld le b">Symbol.iterator</code>属性返回的值是ECMAScript 6中的<code class="fe lb lc ld le b">String</code>类的一个键，它帮助我们迭代字符串的字符，而不是它的代码单元。</p><p id="04ee" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">按照惯例，给定对象的符号属性以<code class="fe lb lc ld le b">@</code>为前缀。因此，<code class="fe lb lc ld le b">String</code>的<code class="fe lb lc ld le b">Symbol.iterator</code>属性引用了一个函数，简称为<code class="fe lb lc ld le b">@iterator()</code>字符串方法。</p><p id="3a64" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，在JavaScript中有两种方法可以使用这个方法:</p><ol class=""><li id="6227" class="nc nd iq kf b kg kh kk kl ko ne ks nf kw ng la nh ni nj nk bi translated">使用<code class="fe lb lc ld le b">for...of</code>回路</li><li id="28fa" class="nc nd iq kf b kg nl kk nm ko nn ks no kw np la nh ni nj nk bi translated">使用数组展开运算符(<code class="fe lb lc ld le b">...</code>)</li></ol><p id="4764" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">(实际上，有三种方法可以使用这个方法，但是第三种方法依赖于手动使用string <code class="fe lb lc ld le b">@iterator()</code>方法返回的迭代器对象，这反过来要求我们对迭代器有一点了解，如果不是很多的话。如果你想深入了解JavaScript中的迭代器，你可以参考我们自己的<a class="ae kc" href="https://www.codeguage.com/courses/advanced-js/" rel="noopener ugc nofollow" target="_blank">高级JavaScript </a>课程中的<a class="ae kc" href="https://www.codeguage.com/courses/advanced-js/iteration-introduction" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">高级JavaScript——迭代器</strong> </a>介绍一章。</p><p id="bde6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们一个接一个地看看这些…</p><h2 id="93da" class="nq ln iq bd lo nr ns dn ls nt nu dp lw ko nv nw ma ks nx ny me kw nz oa mi ob bi translated"><code class="fe lb lc ld le b">for...of</code>循环</h2><p id="a302" class="pw-post-body-paragraph kd ke iq kf b kg mk ki kj kk ml km kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">在下面的代码中，我们迭代字符串<code class="fe lb lc ld le b">str</code>并逐个记录它的每个字符:</p><figure class="mw mx my mz gt jr"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="21a3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">注意数组是如何处理的🙂作为一个单独的实体，尽管在字符串<code class="fe lb lc ld le b">str</code>内部，它消耗了两个代码单元。</p><h2 id="e642" class="nq ln iq bd lo nr ns dn ls nt nu dp lw ko nv nw ma ks nx ny me kw nz oa mi ob bi translated">数组扩展运算符(…)</h2><p id="44f8" class="pw-post-body-paragraph kd ke iq kf b kg mk ki kj kk ml km kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">利用这种基于字符而不是基于代码单元的字符串<code class="fe lb lc ld le b">@iterator()</code>方法的第二种方式是使用数组扩展操作符(<code class="fe lb lc ld le b">...</code></p><p id="d497" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在下面的代码中，我们使用<code class="fe lb lc ld le b">...</code>来确定给定字符串中的字符总数(不是代码单元的总数):</p><figure class="mw mx my mz gt jr"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="4826" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如前所述，<code class="fe lb lc ld le b">str.length</code>不返回<code class="fe lb lc ld le b">str</code>中<strong class="kf ir">字符</strong>的数量。相反，它返回代码单元的数量。</p><p id="0cda" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">相反，<code class="fe lb lc ld le b">[...str].length</code>返回<code class="fe lb lc ld le b">str</code>中的字符总数。</p><p id="a16d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lb lc ld le b">[...str]</code>首先使用字符串的<code class="fe lb lc ld le b">@iterator()</code>方法将<code class="fe lb lc ld le b">str</code>转换成一个字符数组。然后，<code class="fe lb lc ld le b">length</code>属性(在数组上调用)返回该数组中的项目总数。</p><p id="0f5d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="ms">简单，不是吗？</em></p></div><div class="ab cl lf lg hu lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="ij ik il im in"><h1 id="530d" class="lm ln iq bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">最后</h1><p id="aa86" class="pw-post-body-paragraph kd ke iq kf b kg mk ki kj kk ml km kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">简而言之，JavaScript将字符串视为16位整数(称为代码单元)的<strong class="kf ir">序列。该语言中几乎所有的字符串工具都以这种方式处理字符串——例如，string <code class="fe lb lc ld le b">length</code>属性、字符串的词典比较等等。</strong></p><p id="f4c7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们想以一种无错误的方式在JavaScript中处理字符串，我们必须意识到语言的这种行为。</p><p id="dd4e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你想进一步了解JavaScript字符串中的Unicode，你可以参考<a class="ae kc" href="https://www.codeguage.com/courses/js/strings-unicode" rel="noopener ugc nofollow" target="_blank">JavaScript Strings—Unicode</a>。</p><p id="5cf1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">祝您愉快地学习JavaScript并使用它开发令人惊叹的程序！🙂</p><pre class="mw mx my mz gt oc le od oe aw of bi"><span id="db1e" class="nq ln iq le b gy og oh l oi oj">Learn JavaScript From Scratch</span><span id="155a" class="nq ln iq le b gy ok oh l oi oj"><a class="ae kc" href="https://www.codeguage.com/courses/js/" rel="noopener ugc nofollow" target="_blank"><strong class="le ir">JavaScript Course at CodeGuage</strong></a></span></pre></div><div class="ab cl lf lg hu lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="ij ik il im in"><h1 id="5fcb" class="lm ln iq bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">分级编码</h1><p id="cb65" class="pw-post-body-paragraph kd ke iq kf b kg mk ki kj kk ml km kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">感谢您成为我们社区的一员！更多内容见<a class="ae kc" href="https://levelup.gitconnected.com/" rel="noopener ugc nofollow" target="_blank">级编码出版物</a>。<br/>跟随:<a class="ae kc" href="https://twitter.com/gitconnected" rel="noopener ugc nofollow" target="_blank">推特</a>，<a class="ae kc" href="https://www.linkedin.com/company/gitconnected" rel="noopener ugc nofollow" target="_blank">领英</a>，<a class="ae kc" href="https://newsletter.levelup.dev/" rel="noopener ugc nofollow" target="_blank">通迅</a> <br/> <strong class="kf ir">升一级正在改造理工大招聘➡️ </strong> <a class="ae kc" href="https://jobs.levelup.dev/talent/welcome?referral=true" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">加入我们的人才集体</strong> </a></p></div></div>    
</body>
</html>