<html>
<head>
<title>Essential Tooling for Javascript Developers: Advanced Webpack and Babel</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Javascript开发人员的基本工具:高级Webpack和Babel</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/essential-tooling-for-javascript-developers-webpack-advanced-and-babel-d84245e1ff1a?source=collection_archive---------17-----------------------#2020-05-31">https://levelup.gitconnected.com/essential-tooling-for-javascript-developers-webpack-advanced-and-babel-d84245e1ff1a?source=collection_archive---------17-----------------------#2020-05-31</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/9fedb85a6e3645a09022feb88ec214f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LLZXWHH_8PCIQjLrixZ23w.png"/></div></div></figure><p id="681b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在这个系列中，我们将讨论和理解所有必要的工具，它们是任何Javascript开发人员生活中不可或缺的一部分。我们将学习工具和技术，如<em class="kz">命令行界面、NPM、Git和GitHub、Webpack和Babel、</em>等。同时了解它们各自的目的和需求。</p><h1 id="9625" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">该系列涵盖的主题</h1><ol class=""><li id="ba57" class="ly lz it kd b ke ma ki mb km mc kq md ku me ky mf mg mh mi bi translated"><a class="ae mj" href="https://medium.com/@alok.sharma61630/developers-best-friend-command-line-interface-bb841aea4b98?source=friends_link&amp;sk=bea4ceb19c8bb188c85c4ee7ce096cf3" rel="noopener">命令行界面。</a></li><li id="1b20" class="ly lz it kd b ke mk ki ml km mm kq mn ku mo ky mf mg mh mi bi translated"><a class="ae mj" href="https://medium.com/swlh/essential-tooling-for-javascript-developers-npm-in-depth-d6dad74cbedc?source=friends_link&amp;sk=49859b8b6bb216edd64e43f245f71861" rel="noopener"> NPM。</a></li><li id="3751" class="ly lz it kd b ke mk ki ml km mm kq mn ku mo ky mf mg mh mi bi translated">Git和Github。</li><li id="6893" class="ly lz it kd b ke mk ki ml km mm kq mn ku mo ky mf mg mh mi bi translated">网络包和巴别塔。</li></ol><p id="4aa1" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在我的上一篇文章【Javascript开发人员必备工具:Webpack深度中，我讨论了Webpack将对我们的源代码应用什么、为什么以及如何应用一些转换:</p><figure class="mq mr ms mt gt ju gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/983e22d26c41afd57b96516c64785f27.png" data-original-src="https://miro.medium.com/v2/resize:fit:458/format:webp/1*XSOt0W5K0SG_7OgV6riCtw.png"/></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk translated">源代码</figcaption></figure><p id="f56e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">并将为我们提供最终优化的生产代码，即“dist”文件夹。</p><figure class="mq mr ms mt gt ju gh gi paragraph-image"><div class="gh gi my"><img src="../Images/d0a69abb8c5b58df4454b6792dba98ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:450/format:webp/1*OVq4d_GdK7bfXP9-yERGFA.png"/></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk translated">生产代码</figcaption></figure><p id="42b8" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们讨论了公共JS模块、入口和输出点、加载器、插件等概念。如果你不知道这些概念，我推荐你去看看那篇文章，这样就很容易理解了。</p><p id="7e38" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在本文中，我们将学习和理解高级Webpack概念，以便我们最终优化的生产代码，即“dist”文件夹看起来像这样:</p><figure class="mq mr ms mt gt ju gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/7b659d322c55cad8dc975b0477ba8043.png" data-original-src="https://miro.medium.com/v2/resize:fit:454/format:webp/1*DqjM6gK4qwyGeDykAqaA_A.png"/></div></figure><h2 id="5658" class="na lb it bd lc nb nc dn lg nd ne dp lk km nf ng lo kq nh ni ls ku nj nk lw nl bi translated">逐步进行高级Webpack配置:</h2><figure class="mq mr ms mt gt ju"><div class="bz fp l di"><div class="nm nn l"/></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk translated">高级Webpack配置</figcaption></figure><h2 id="287a" class="na lb it bd lc nb nc dn lg nd ne dp lk km nf ng lo kq nh ni ls ku nj nk lw nl bi translated">正在提取CSS文件</h2><p id="f7e2" class="pw-post-body-paragraph kb kc it kd b ke ma kg kh ki mb kk kl km no ko kp kq np ks kt ku nq kw kx ky im bi translated">在我向您展示的上一篇文章中使用基本的webpack配置时，我们所有的应用程序样式都工作得很好，即使在‘dist’文件夹中没有样式文件。这仅仅是因为我们使用了——sass-loader、css-loader和style-loader来处理我们的样式</p><pre class="mq mr ms mt gt nr ns nt nu aw nv bi"><span id="ec9b" class="na lb it ns b gy nw nx l ny nz">rules: [ <br/> { <br/>   test: /\.scss$/’,<br/>   use: [‘style-loader’,’css-loader’, ‘sass-loader’]<br/> }<br/>]</span></pre><ul class=""><li id="c70b" class="ly lz it kd b ke kf ki kj km oa kq ob ku oc ky od mg mh mi bi translated">sass-loader——它利用node-sass包将SASS代码转换成等价的CSS代码</li><li id="e7f7" class="ly lz it kd b ke mk ki ml km mm kq mn ku mo ky od mg mh mi bi translated">css-loader——它将CSS代码转换成等效的Javascript代码。</li><li id="192b" class="ly lz it kd b ke mk ki ml km mm kq mn ku mo ky od mg mh mi bi translated">style-loader——通过将等效的javascript代码注入“bundle.js”中，将它们附加到DOM中。</li></ul><p id="7c8b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">正是因为有了样式加载器，我们的样式才被注入到“bundle.js”中，并且仍然有效。现在，如果我们想提取我们的CSS代码，单独在' dist '文件夹中，我们可以利用一个插件。</p><pre class="mq mr ms mt gt nr ns nt nu aw nv bi"><span id="3bed" class="na lb it ns b gy nw nx l ny nz">npm install mini-css-extract-plugin --save-dev </span></pre><h2 id="bbfe" class="na lb it bd lc nb nc dn lg nd ne dp lk km nf ng lo kq nh ni ls ku nj nk lw nl bi translated">配置迷你css-extract-plugin</h2><p id="264e" class="pw-post-body-paragraph kb kc it kd b ke ma kg kh ki mb kk kl km no ko kp kq np ks kt ku nq kw kx ky im bi translated">导入插件</p><pre class="mq mr ms mt gt nr ns nt nu aw nv bi"><span id="d798" class="na lb it ns b gy nw nx l ny nz">const MiniCssExtractPlugin = require("mini-css-extract-plugin");</span></pre><p id="ca46" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">配置插件</p><pre class="mq mr ms mt gt nr ns nt nu aw nv bi"><span id="04aa" class="na lb it ns b gy nw nx l ny nz">module: {<br/> rules: [<br/>  {<br/>   test: /\.scss$/,<br/>   use: [MiniCssExtractPlugin.loader, "css-loader", "sass-loader"],<br/>  },<br/> ],<br/>},<br/>plugins: [<br/>  new MiniCssExtractPlugin({<br/>   filename: "styles/style.css"<br/>  })<br/>]</span></pre><p id="8d8b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这里我们将使用MiniCssExtractPlugin提供给我们的“loader ”,而不是使用“style-loader”。</p><ul class=""><li id="c81a" class="ly lz it kd b ke kf ki kj km oa kq ob ku oc ky od mg mh mi bi translated">“mini-css-extract-plugin”会将我们所有的“css”代码提取到“style”文件夹中的“style.css”文件中(<em class="kz">如文件名中所指定，选择您想要的任何名称</em></li><li id="7653" class="ly lz it kd b ke mk ki ml km mm kq mn ku mo ky od mg mh mi bi translated">' html-webpack-plugin' ( <em class="kz">在上一篇文章</em>中配置)将自动注入那个CSS文件，在' index.html '的' head '部分。</li></ul><figure class="mq mr ms mt gt ju gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/754b7a131b4b59cf8cb2b0f63315f42f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1340/format:webp/1*O28ShQNlAVWm-vCPf7ETeA.png"/></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk translated">在头部注入CSS</figcaption></figure><p id="4dce" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">注意:如果您不想在“dist”文件夹中创建另一个“styles”文件夹，只需忽略将“styles”文件夹指定为</p><pre class="mq mr ms mt gt nr ns nt nu aw nv bi"><span id="7cbe" class="na lb it ns b gy nw nx l ny nz">filename: "style.css"</span></pre><p id="fd45" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在你可能会想，如果我们的“CSS”代码即使不提取也能工作，那么提取它又有什么意义呢？</p><p id="bc42" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">很简单，因为当我们不提取我们的“CSS”代码时，“样式加载器”就会开始工作，并将代码附加到“bundle.js”中。</p><ul class=""><li id="55d9" class="ly lz it kd b ke kf ki kj km oa kq ob ku oc ky od mg mh mi bi translated">在“html-webpack-plugin”的帮助下,“bundle.js”被注入到“index.html”中“body”的末尾。(<em class="kz">为上一篇文章</em>中讨论的 <em class="kz">)。</em></li><li id="cbab" class="ly lz it kd b ke mk ki ml km mm kq mn ku mo ky od mg mh mi bi translated">如果“样式”出现在“index.html”中“正文”的底部，那么在渲染过程中，您可能会在网页上“反映样式”和加载“html”之间经历一点时间延迟。</li><li id="67f3" class="ly lz it kd b ke mk ki ml km mm kq mn ku mo ky od mg mh mi bi translated">如果你单独提取你的“CSS”代码，那么它们将在“头”部分注入，在“正文”之前，并且在加载“HTML”和“CSS”之间没有时间延迟。</li></ul><h2 id="b5a3" class="na lb it bd lc nb nc dn lg nd ne dp lk km nf ng lo kq nh ni ls ku nj nk lw nl bi translated">方式</h2><p id="a0f5" class="pw-post-body-paragraph kb kc it kd b ke ma kg kh ki mb kk kl km no ko kp kq np ks kt ku nq kw kx ky im bi translated">Webpack在“开发”和“生产”模式下弹出不同大小的包。“开发”环境为我们提供了比“生产”捆绑包更大的捆绑包，因为在“开发”模式下执行的优化更少。</p><p id="d371" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们的“开发”包看起来像这样</p><figure class="mq mr ms mt gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi of"><img src="../Images/4ae402b7a34b3b5f76e280eceb1b20a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*la_gan6DnyZIxOiGOxNXoA.png"/></div></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk translated">index.html</figcaption></figure><figure class="mq mr ms mt gt ju gh gi paragraph-image"><div class="gh gi og"><img src="../Images/5d73296e339238e03526f71f6df37fe5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1308/format:webp/1*nOP1t49wBqmNJIuA-yVbkw.png"/></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk translated">style.css</figcaption></figure><figure class="mq mr ms mt gt ju gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/c713dd2f04bc60bf29d3b4956b2a3d96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1354/format:webp/1*ne0bwqcIp-G_HdaCK_QRAw.png"/></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk translated">bundle.js</figcaption></figure><p id="0ae3" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">另一方面，我们的“生产”包看起来类似于</p><figure class="mq mr ms mt gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi oi"><img src="../Images/15aa67a594df0ca8887b48950b7a6c07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QA_YEWHmxTuZSi3v33cd7A.png"/></div></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk translated">index.html</figcaption></figure><figure class="mq mr ms mt gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi oj"><img src="../Images/917e9f7c09f7c93f0ee2cfcdaa1f76cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Dkx_znk3kxyBYuNP28Y0JA.png"/></div></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk translated">style.css</figcaption></figure><figure class="mq mr ms mt gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ok"><img src="../Images/24d67bb2be2fe0c21665e20b12cde4fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R9iseFpIRsZFZCH_cbWXng.png"/></div></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk translated">bundle.js</figcaption></figure><p id="6854" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">束尺寸的比较</p><figure class="mq mr ms mt gt ju gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/f1da3d1713f6ff2bc234d50b9f4367cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1224/format:webp/1*e5XSv7xR0ytn15-t0rRUiA.png"/></div></figure><p id="4d15" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">从上面的比较中可以看出，与“开发”包相比，“生产”包要小得多。</p><p id="b03c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">好处:更小的包意味着从服务器下载它们所需的时间更少，这反过来会提高我们应用程序的性能和效率。</p><p id="9cab" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">为了使用不同的构建环境，我们需要指定“mode”属性。</p><pre class="mq mr ms mt gt nr ns nt nu aw nv bi"><span id="be24" class="na lb it ns b gy nw nx l ny nz">mode: "development or production"</span></pre><h2 id="092c" class="na lb it bd lc nb nc dn lg nd ne dp lk km nf ng lo kq nh ni ls ku nj nk lw nl bi translated">缩小HTML、CSS和Javascript包</h2><p id="66ac" class="pw-post-body-paragraph kb kc it kd b ke ma kg kh ki mb kk kl km no ko kp kq np ks kt ku nq kw kx ky im bi translated">虽然“生产”包的大小相对较小，但我们仍然可以使用某些插件进一步缩小和压缩它们。</p><ul class=""><li id="3e4f" class="ly lz it kd b ke kf ki kj km oa kq ob ku oc ky od mg mh mi bi translated">为了配置这些插件，我们必须在配置文件中指定一个名为“优化”的新属性。</li><li id="69f7" class="ly lz it kd b ke mk ki ml km mm kq mn ku mo ky od mg mh mi bi translated">“优化”又包含一个名为“最小化器”的属性。</li><li id="842c" class="ly lz it kd b ke mk ki ml km mm kq mn ku mo ky od mg mh mi bi translated">“最小化器”指的是我们想要使用的最小化器集合。</li></ul><pre class="mq mr ms mt gt nr ns nt nu aw nv bi"><span id="8179" class="na lb it ns b gy nw nx l ny nz">optimizations: {<br/>   minimizers:[]<br/>}</span></pre><p id="04ff" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">缩小CSS和资源(图像文件)</p><pre class="mq mr ms mt gt nr ns nt nu aw nv bi"><span id="e9de" class="na lb it ns b gy nw nx l ny nz">npm install optimize-css-assets-webpack-plugin --save-dev</span></pre><p id="3041" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">导入插件</p><pre class="mq mr ms mt gt nr ns nt nu aw nv bi"><span id="ef4b" class="na lb it ns b gy nw nx l ny nz">const OptimizeAssets = require("optimize-css-assets-webpack-plugin");</span></pre><p id="c5a7" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">使用插件</p><pre class="mq mr ms mt gt nr ns nt nu aw nv bi"><span id="1df1" class="na lb it ns b gy nw nx l ny nz">optimization: {  <br/>  minimizer: [new OptimizeAssets()], <br/>},</span></pre><p id="3555" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">为了缩小Javascript，我们不需要安装任何新的插件。Webpack已经附带了“terser-webpack-plugin ”,默认情况下，它在“生产”模式下在幕后使用该插件。但是一旦我们指定了我们自己的“最小化器”，如上所述(<em class="kz">optimize-CSS-assets-web pack-plugin</em>)，这个“最小化器”属性就会被覆盖。为了让它再次工作，我们只需要导入并指定它。</p><p id="6d72" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">导入插件</p><pre class="mq mr ms mt gt nr ns nt nu aw nv bi"><span id="c281" class="na lb it ns b gy nw nx l ny nz">const TerserJSPlugin = require("terser-webpack-plugin");</span></pre><p id="95cc" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">使用插件</p><pre class="mq mr ms mt gt nr ns nt nu aw nv bi"><span id="5e04" class="na lb it ns b gy nw nx l ny nz">optimization: {  <br/>  minimizer: [ new TerserJSPlugin(), new OptimizeAssets()], <br/>}</span></pre><p id="2806" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">为了缩小HTML，我们可以使用我们在上一篇文章中安装和配置的“html-webpack-plugin”</p><pre class="mq mr ms mt gt nr ns nt nu aw nv bi"><span id="f648" class="na lb it ns b gy nw nx l ny nz">plugins: [<br/>   new HtmlWebpackPlugin({   <br/>    template: "index.html",   <br/>    filename: "index.html"<br/>   })<br/>}</span></pre><p id="acfe" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">要缩小HTML，我们需要在“minimizers”属性中指定“html-webpack-plugin ”,而不是“plugins”属性。</p><pre class="mq mr ms mt gt nr ns nt nu aw nv bi"><span id="5a72" class="na lb it ns b gy nw nx l ny nz">optimization: {<br/>  minimizer: [<br/>   new TerserJSPlugin(),<br/>   new OptimizeAssets(),<br/>   new HtmlWebpackPlugin({<br/>       template: "index.html",<br/>       filename: "index.html",<br/>   },<br/>  }),<br/>]</span></pre><p id="d30a" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在，我们必须通过指定“minify”属性来扩展其配置，该属性可以包含以下规则</p><pre class="mq mr ms mt gt nr ns nt nu aw nv bi"><span id="7da1" class="na lb it ns b gy nw nx l ny nz">new HtmlWebpackPlugin({   <br/>  template: "index.html",   <br/>  filename: "index.html",   <br/>  minify: {    <br/>     collapseWhitespace: true,<br/>     removeComments: true,<br/>     removeRedundantAttributes: true,<br/>     removeScriptTypeAttributes: true,<br/>     removeStyleLinkTypeAttributes: true,<br/>     useShortDoctype: true  <br/>  }  <br/>})</span></pre><p id="b257" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在，Webpack将压缩所有这些包，并弹出尺寸更小的新包。</p><p id="7f97" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">束尺寸的比较</p><figure class="mq mr ms mt gt ju gh gi paragraph-image"><div class="gh gi om"><img src="../Images/89cdeb8a9cd294cd8e0a8800c7c07185.png" data-original-src="https://miro.medium.com/v2/resize:fit:1222/format:webp/1*vtJvnb3NCY_JW644pulCfw.png"/></div></figure><h2 id="00bc" class="na lb it bd lc nb nc dn lg nd ne dp lk km nf ng lo kq nh ni ls ku nj nk lw nl bi translated">巴比伦式的城市</h2><p id="728f" class="pw-post-body-paragraph kb kc it kd b ke ma kg kh ki mb kk kl km no ko kp kq np ks kt ku nq kw kx ky im bi translated">“巴别塔”是下一代“Javascript编译器”。Babel只是允许我们使用“ECMAScript”中引入的最新Javascript方法、特性和语法，而不用担心浏览器支持。</p><p id="076f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">‘babel’只是将‘es next’代码(<em class="kz"> ES6，ES7，ES8，ES9，ES10 </em>)转换成ES5代码(<em class="kz">代码</em> <em class="kz">支持</em>跨所有浏览器)。</p><p id="9d59" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在配置Babel时，我们需要注意两个过程:</p><ol class=""><li id="8c42" class="ly lz it kd b ke kf ki kj km oa kq ob ku oc ky mf mg mh mi bi translated">蒸腾作用</li><li id="83ee" class="ly lz it kd b ke mk ki ml km mm kq mn ku mo ky mf mg mh mi bi translated">聚合填充。</li></ol><p id="09a4" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">“编译”和“填充”都是指将下一代Javascript转换成ES5代码的过程。</p><ul class=""><li id="ee5d" class="ly lz it kd b ke kf ki kj km oa kq ob ku oc ky od mg mh mi bi translated">“Transpilation”只对存在于“ES5”中的功能有效。例如，在“ES6”中，有一种使用箭头函数编写函数表达式的新方法。因此,“箭头函数”将在后台转换为“函数表达式”。另一方面，</li><li id="e0c8" class="ly lz it kd b ke mk ki ml km mm kq mn ku mo ky od mg mh mi bi translated">多填充指的是处理ES5中不存在的相对较新的特性。例如，在“ES5”中没有“类”这种东西。随着“ES6”的引入，类被添加到Javascript中。因此，幕后的“巴别塔”创建了一些逻辑来在我们的应用程序中实现这些相对较新的功能。</li></ul><p id="4e94" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">注意—“Babel”本身是一个独立的工具，不是“Webpack”的一部分，但它可以使用“babel-loader”与“Webpack”同步工作。</p><h2 id="a0cb" class="na lb it bd lc nb nc dn lg nd ne dp lk km nf ng lo kq nh ni ls ku nj nk lw nl bi translated">安装巴别塔—</h2><pre class="mq mr ms mt gt nr ns nt nu aw nv bi"><span id="7b27" class="na lb it ns b gy nw nx l ny nz">npm install @babel/core @babel/cli @babel/preset-env babel-loader --save-dev</span></pre><ul class=""><li id="5a1c" class="ly lz it kd b ke kf ki kj km oa kq ob ku oc ky od mg mh mi bi translated">@babel/core —包含所有编译逻辑的包。</li><li id="f0f5" class="ly lz it kd b ke mk ki ml km mm kq mn ku mo ky od mg mh mi bi translated">@babel/cli —允许我们在应用程序中使用babel的包。</li><li id="f316" class="ly lz it kd b ke mk ki ml km mm kq mn ku mo ky od mg mh mi bi translated">@ babel/preset-env—‘presets’只是指‘babel’在幕后正常运行所需的一组插件。</li></ul><p id="2e57" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">例如<em class="kz">，i </em>如果我们正在使用‘React’那么我们需要安装@babel/preset-react，如果我们正在使用‘Typescript’那么我们需要使用@babel/preset-typescript。因为我们没有使用任何库或框架,@babel/preset-env会很好地工作。</p><ul class=""><li id="a742" class="ly lz it kd b ke kf ki kj km oa kq ob ku oc ky od mg mh mi bi translated">babel-loader——根据配置实际执行与Webpack同步的转换的加载程序。</li></ul><p id="8c0e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">所有上面的包将照顾' Transpilation '过程。为了处理“聚合填充”,我们需要安装另外两个软件包——</p><pre class="mq mr ms mt gt nr ns nt nu aw nv bi"><span id="97d4" class="na lb it ns b gy nw nx l ny nz">npm install core-js regenerator-runtime --save</span></pre><h2 id="a5df" class="na lb it bd lc nb nc dn lg nd ne dp lk km nf ng lo kq nh ni ls ku nj nk lw nl bi translated">配置巴别塔</h2><pre class="mq mr ms mt gt nr ns nt nu aw nv bi"><span id="ba01" class="na lb it ns b gy nw nx l ny nz">module: {<br/> rules: [<br/>   { <br/>      test: /\.js$/,<br/>      exclude: "node_modules",<br/>      use: ["babel-loader"],<br/>   }<br/> ]<br/>}</span></pre><p id="d63c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">上面的规则简单地说明了—所有那些以。js扩展应由“babel-loader”处理，不包括“node_modules”文件夹中的js文件(<em class="kz">，因为不需要)</em>。</p><p id="3ee2" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">仅仅这样是不够的，因为“babel-loader”将会寻找一些关于如何处理这些js文件的配置。为了完全配置‘babel ’,我们需要创建一个新文件。babelrc在我们项目的根级别。</p><figure class="mq mr ms mt gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi on"><img src="../Images/c56eb0e3a8cacd81ed94d7fa337ed8df.png" data-original-src="https://miro.medium.com/v2/resize:fit:434/format:webp/1*uZHyhVzhhWH-ir3SlxkndA.png"/></div></div></figure><p id="f7cd" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">正在配置。巴伯尔克</p><pre class="mq mr ms mt gt nr ns nt nu aw nv bi"><span id="0bfe" class="na lb it ns b gy nw nx l ny nz">{<br/>"presets": [<br/>  [ "@babel/env", {<br/>       "useBuiltIns": "usage",<br/>       "corejs": "3",<br/>       "targets": { <br/>        "browsers": ["last 5 versions", "ie &gt;= 8"]<br/>       }</span><span id="edc0" class="na lb it ns b gy oo nx l ny nz">     }</span><span id="dbb9" class="na lb it ns b gy oo nx l ny nz">   ]<br/> ]<br/>}</span></pre><p id="dd85" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">上面的配置告诉“babel-loader”使用“babel-preset-env”，core-js版本3，代码应该在所有浏览器的最后5个版本中受支持，在internet explorer上支持版本8以上。</p><h2 id="0f76" class="na lb it bd lc nb nc dn lg nd ne dp lk km nf ng lo kq nh ni ls ku nj nk lw nl bi translated">拆分开发和生产配置</h2><p id="7b01" class="pw-post-body-paragraph kb kc it kd b ke ma kg kh ki mb kk kl km no ko kp kq np ks kt ku nq kw kx ky im bi translated">Webpack允许我们为开发和生产环境创建不同的配置文件。为了将我们的“开发”和“生产”配置分开，不需要创建一个单独的“webpack.config.js”文件，只需为项目文件夹中的每个配置创建单独的新配置文件</p><ul class=""><li id="8c28" class="ly lz it kd b ke kf ki kj km oa kq ob ku oc ky od mg mh mi bi translated">webpack.dev.js' —用于“开发”配置。</li><li id="1376" class="ly lz it kd b ke mk ki ml km mm kq mn ku mo ky od mg mh mi bi translated">webpack.prod.js' —用于“生产”配置。</li><li id="6447" class="ly lz it kd b ke mk ki ml km mm kq mn ku mo ky od mg mh mi bi translated">webpack.common.js' —在上面两个文件中保持相同的配置，如条目、输出、“文件加载器”、“html加载器”、“babel加载器”等。</li></ul><p id="b693" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">注意:这些是用于这种配置的标准名称，您可以随意选择您想要的名称。</p><figure class="mq mr ms mt gt ju gh gi paragraph-image"><div class="gh gi op"><img src="../Images/313646371371261afa3f327bac5481bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:452/format:webp/1*U44PQ7i6CMk4MF7DreIKBA.png"/></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk translated">新配置文件</figcaption></figure><p id="807b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在“开发”配置中，根本不需要提取、压缩或缩小文件，因为这需要相当多的时间。对于更快的开发构建，我们可以简单地省略这些步骤。所以我们最终的配置文件看起来会像这样(<em class="kz">确保阅读前面的注释</em>)</p><figure class="mq mr ms mt gt ju"><div class="bz fp l di"><div class="nm nn l"/></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk translated">webpack.common.js</figcaption></figure><figure class="mq mr ms mt gt ju"><div class="bz fp l di"><div class="nm nn l"/></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk translated">webpack.dev.js</figcaption></figure><figure class="mq mr ms mt gt ju"><div class="bz fp l di"><div class="nm nn l"/></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk translated">webpack.prod.js</figcaption></figure><p id="f9f6" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">注意</p><ul class=""><li id="d30d" class="ly lz it kd b ke kf ki kj km oa kq ob ku oc ky od mg mh mi bi translated">我在“webpack.common.js”中安装并使用了一个名为“clean-webpack-plugin”的新插件。它只是确保在执行新的构建之前，首先清理“dist”文件夹。(<em class="kz">)否则，如果您之前已经执行了一个生产构建，那么即使在执行了开发构建之后，您也可能会找到提取的CSS文件。</em>)</li><li id="a4fc" class="ly lz it kd b ke mk ki ml km mm kq mn ku mo ky od mg mh mi bi translated">其次，我已经在‘web pack . dev . js’和‘web pack . prod . js’中安装并使用了一个名为‘web pack-merge’的新包。它只是帮助将公共配置(<em class="kz"> webpack.common.js </em>)与单独的“开发”和“生产”配置合并。</li></ul><pre class="mq mr ms mt gt nr ns nt nu aw nv bi"><span id="1cef" class="na lb it ns b gy nw nx l ny nz">const merge = require("webpack-merge");</span></pre><ul class=""><li id="f197" class="ly lz it kd b ke kf ki kj km oa kq ob ku oc ky od mg mh mi bi translated">“合并”只是一个接收大量需要合并的配置的函数。我已经将两个文件中的通用配置导入为</li></ul><pre class="mq mr ms mt gt nr ns nt nu aw nv bi"><span id="f344" class="na lb it ns b gy nw nx l ny nz">const common = require(“./webpack.common”);</span></pre><p id="ea9a" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">合并</p><pre class="mq mr ms mt gt nr ns nt nu aw nv bi"><span id="8caa" class="na lb it ns b gy nw nx l ny nz">module.exports = merge(common, {development or production config });</span></pre><h2 id="d5a6" class="na lb it bd lc nb nc dn lg nd ne dp lk km nf ng lo kq nh ni ls ku nj nk lw nl bi translated">开发服务器</h2><p id="3b3f" class="pw-post-body-paragraph kb kc it kd b ke ma kg kh ki mb kk kl km no ko kp kq np ks kt ku nq kw kx ky im bi translated">Webpack还为我们提供了一个“开发服务器”,支持“实时重装”。要安装:</p><pre class="mq mr ms mt gt nr ns nt nu aw nv bi"><span id="b1e9" class="na lb it ns b gy nw nx l ny nz">npm install webpack-dev-server --save-dev</span></pre><h1 id="2fcc" class="la lb it bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">运行Webpack</h1><p id="fdce" class="pw-post-body-paragraph kb kc it kd b ke ma kg kh ki mb kk kl km no ko kp kq np ks kt ku nq kw kx ky im bi translated">在您的“package.json”中创建新的npm脚本，并将配置传递给它们</p><figure class="mq mr ms mt gt ju gh gi paragraph-image"><div class="gh gi oq"><img src="../Images/ac1be2e3fb3df3e0f25639b5c245c6db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1276/format:webp/1*d_MvERmaVbQUNrCHNouu7g.png"/></div></figure><p id="da40" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在在终端中以npm run dev ( <em class="kz">用于开发构建</em>)、npm run build ( <em class="kz">用于生产构建</em>)和npm run start ( <em class="kz">用于实时服务器</em>)的身份运行这些脚本，看看webpack的神奇之处。</p><p id="e8ee" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">Webpack和Babel到此为止！。如果你觉得这篇文章有帮助，请告诉我。敬请期待！</p></div></div>    
</body>
</html>