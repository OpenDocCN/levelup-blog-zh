<html>
<head>
<title>Working with a JSONB Array of Objects in PostgreSQL</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在PostgreSQL中使用JSONB对象数组</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/working-with-a-jsonb-array-of-objects-in-postgresql-d2b7e7f4db87?source=collection_archive---------0-----------------------#2020-08-10">https://levelup.gitconnected.com/working-with-a-jsonb-array-of-objects-in-postgresql-d2b7e7f4db87?source=collection_archive---------0-----------------------#2020-08-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="db1f" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">数据库提示</h2><div class=""/><div class=""><h2 id="7384" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">从数组中获取、添加和移除JSON对象</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi kr"><img src="../Images/7015d22e1da0087d7605d8024ca00b63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*VuxGSPiTXrK74QFziptMOA.png"/></div><figcaption class="kz la gj gh gi lb lc bd b be z dk translated">来源:PostgreSQL Wiki</figcaption></figure><p id="b5e1" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">在我的<a class="ae lz" rel="noopener ugc nofollow" target="_blank" href="/how-to-query-a-json-array-of-objects-as-a-recordset-in-postgresql-a81acec9fbc5">上一篇文章</a>中，我们关注于将包含一个对象数组的PostgreSQL jsonb列转换成一个记录集，这样就可以用关系方式查询它。</p><h1 id="9d61" class="ma mb it bd mc md me mf mg mh mi mj mk ki ml kj mm kl mn km mo ko mp kp mq mr bi translated">我们将做什么</h1><p id="bfad" class="pw-post-body-paragraph ld le it lf b lg ms kd li lj mt kg ll lm mu lo lp lq mv ls lt lu mw lw lx ly im bi translated">在本文中，我想继续使用包含一组对象的jsonb专栏，</p><ul class=""><li id="238b" class="mx my it lf b lg lh lj lk lm mz lq na lu nb ly nc nd ne nf bi translated">获取数组中的所有对象。</li><li id="7964" class="mx my it lf b lg ng lj nh lm ni lq nj lu nk ly nc nd ne nf bi translated">按数组中的位置从数组中获取特定对象。当位置已知时，当我们必须发现它时。</li><li id="9bf5" class="mx my it lf b lg ng lj nh lm ni lq nj lu nk ly nc nd ne nf bi translated">向数组中添加一个json对象。</li><li id="f687" class="mx my it lf b lg ng lj nh lm ni lq nj lu nk ly nc nd ne nf bi translated">从数组中移除特定对象。</li><li id="fe4f" class="mx my it lf b lg ng lj nh lm ni lq nj lu nk ly nc nd ne nf bi translated">增加了2021年1月5日—索引</li></ul><blockquote class="nl"><p id="9281" class="nm nn it bd no np nq nr ns nt nu ly dk translated">我们不仅会研究查询技术，还会将它们视为API端点，以及它们对前端(比如说PERN堆栈)的意义。</p></blockquote><p id="3dde" class="pw-post-body-paragraph ld le it lf b lg nv kd li lj nw kg ll lm nx lo lp lq ny ls lt lu nz lw lx ly im bi translated"><strong class="lf jd">样本数据</strong></p><p id="2af3" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">我们在jsonb列中的示例数据看起来与此类似，</p><pre class="ks kt ku kv gt oa ob oc od aw oe bi"><span id="2a9f" class="of mb it ob b gy og oh l oi oj">[{<br/>  "productid": 3,<br/>  "name": "Virtual Keyboard",<br/>  "price": 150</span><span id="ad2e" class="of mb it ob b gy ok oh l oi oj">}, {<br/>  "productid": 1,<br/>  "name": "Dell 123 Laptop Computer",<br/>  "price": 1300</span><span id="d531" class="of mb it ob b gy ok oh l oi oj">},<br/> {<br/>  "productid": 8,<br/>  "name": "LG Ultrawide Monitor",<br/>  "price": 190</span><span id="ab2c" class="of mb it ob b gy ok oh l oi oj">}<br/>]</span></pre><p id="ab10" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated"><em class="ol">这可能代表客户购买的产品。我们想添加新的购买，获得所有项目购买，获得一个特定的项目购买和删除一个项目购买。</em></p><p id="b903" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">在上一篇文章中，我们使用了<strong class="lf jd"> jsonb_to_recordset() </strong>函数。</p><blockquote class="nl"><p id="d9da" class="nm nn it bd no np om on oo op oq ly dk translated">在本文中，我们将广泛使用<strong class="ak"> jsonb_array_elements()函数。</strong></p></blockquote></div><div class="ab cl or os hx ot" role="separator"><span class="ou bw bk ov ow ox"/><span class="ou bw bk ov ow ox"/><span class="ou bw bk ov ow"/></div><div class="im in io ip iq"><h1 id="d763" class="ma mb it bd mc md oy mf mg mh oz mj mk ki pa kj mm kl pb km mo ko pc kp mq mr bi translated">假设</h1><p id="af69" class="pw-post-body-paragraph ld le it lf b lg ms kd li lj mt kg ll lm mu lo lp lq mv ls lt lu mw lw lx ly im bi translated">我假设你有<a class="ae lz" href="https://www.postgresql.org/" rel="noopener ugc nofollow" target="_blank"> PostgreSQL </a>和类似<a class="ae lz" href="https://www.pgadmin.org/" rel="noopener ugc nofollow" target="_blank"> pgAdmin </a>的东西。</p></div><div class="ab cl or os hx ot" role="separator"><span class="ou bw bk ov ow ox"/><span class="ou bw bk ov ow ox"/><span class="ou bw bk ov ow"/></div><div class="im in io ip iq"><h1 id="2573" class="ma mb it bd mc md oy mf mg mh oz mj mk ki pa kj mm kl pb km mo ko pc kp mq mr bi translated">我们开始吧！</h1><h2 id="1e6e" class="of mb it bd mc pd pe dn mg pf pg dp mk lm ph pi mm lq pj pk mo lu pl pm mq iz bi translated">构建我们的数据</h2><ol class=""><li id="29c6" class="mx my it lf b lg ms lj mt lm pn lq po lu pp ly pq nd ne nf bi translated">打开<strong class="lf jd"> pgAdmin </strong>并根据需要创建一个数据库。</li><li id="36ea" class="mx my it lf b lg ng lj nh lm ni lq nj lu nk ly pq nd ne nf bi translated">右击数据库名称并选择<strong class="lf jd">查询工具</strong>。</li><li id="2a3f" class="mx my it lf b lg ng lj nh lm ni lq nj lu nk ly pq nd ne nf bi translated">运行下面的代码片段来创建一个简单的表，该表有一个id、购买者姓名和一个存储json对象数组的<strong class="lf jd"> <em class="ol"> jsonb列，该数组将存储购买的商品。</em> </strong></li></ol><pre class="ks kt ku kv gt oa ob oc od aw oe bi"><span id="0da9" class="of mb it ob b gy og oh l oi oj">CREATE TABLE public.purchases<br/>(<br/>    id   serial PRIMARY KEY,<br/>    purchaser varchar(50),<br/>    items_purchased jsonb<br/>);</span></pre><p id="282e" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">4.运行下面的代码片段，将四条记录插入到表中。</p><pre class="ks kt ku kv gt oa ob oc od aw oe bi"><span id="eec7" class="of mb it ob b gy og oh l oi oj">INSERT INTO purchases (purchaser,items_purchased) VALUES ('Bob',<br/>'[{<br/>  "productid": 1,<br/>  "name": "Dell 123 Laptop Computer",<br/>  "price": 1300</span><span id="4e7c" class="of mb it ob b gy ok oh l oi oj">},<br/> {<br/>  "productid": 2,<br/>  "name": "Mechanical Keyboard",<br/>  "price": 120</span><span id="ee58" class="of mb it ob b gy ok oh l oi oj">}<br/>]');</span><span id="dfc8" class="of mb it ob b gy ok oh l oi oj">INSERT INTO purchases (purchaser,items_purchased) VALUES('Carol',<br/>'[{<br/>  "productid": 3,<br/>  "name": "Virtual Keyboard",<br/>  "price": 150</span><span id="b561" class="of mb it ob b gy ok oh l oi oj">}, {<br/>  "productid": 1,<br/>  "name": "Dell 123 Laptop Computer",<br/>  "price": 1300</span><span id="f01f" class="of mb it ob b gy ok oh l oi oj">},<br/> {<br/>  "productid": 8,<br/>  "name": "LG Ultrawide Monitor",<br/>  "price": 190</span><span id="e1f0" class="of mb it ob b gy ok oh l oi oj">}<br/>]');</span><span id="00a0" class="of mb it ob b gy ok oh l oi oj">INSERT INTO purchases (purchaser,items_purchased) VALUES ('Ted',<br/>'[{<br/>  "productid": 6,<br/>  "name": "Ergonomic Keyboard",<br/>  "price": 90</span><span id="6ed6" class="of mb it ob b gy ok oh l oi oj">},<br/> {<br/>  "productid": 7,<br/>  "name": "Dell 789 Desktop Computer",<br/>  "price": 120</span><span id="8050" class="of mb it ob b gy ok oh l oi oj">}<br/>]');</span><span id="10ed" class="of mb it ob b gy ok oh l oi oj">INSERT INTO purchases (purchaser,items_purchased) VALUES('Alice',<br/>'[{<br/>  "productid": 7,<br/>  "name": "Dell 789 Desktop Computer",<br/>  "price": 120</span><span id="3338" class="of mb it ob b gy ok oh l oi oj">},<br/> {<br/>  "productid": 2,<br/>  "name": "Mechanical Keyboard",<br/>  "price": 120</span><span id="7626" class="of mb it ob b gy ok oh l oi oj">}<br/>]');</span></pre><p id="a243" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">5.要查看我们的数据，请运行下面的查询。</p><pre class="ks kt ku kv gt oa ob oc od aw oe bi"><span id="9c9b" class="of mb it ob b gy og oh l oi oj">SELECT * FROM purchases;</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="ps pt di pu bf pv"><div class="gh gi pr"><img src="../Images/5edd70fa6c1c2289b3b29a504e834a7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RHYKEyhpKxRreVHrjgkAdg.jpeg"/></div></div><figcaption class="kz la gj gh gi lb lc bd b be z dk translated">具有jsonb列的购买项目的购买</figcaption></figure><h1 id="c1c4" class="ma mb it bd mc md me mf mg mh mi mj mk ki ml kj mm kl mn km mo ko mp kp mq mr bi translated">我们的疑问</h1><h2 id="09cb" class="of mb it bd mc pd pe dn mg pf pg dp mk lm ph pi mm lq pj pk mo lu pl pm mq iz bi translated">获取为某个帐户购买的所有商品</h2><p id="b36b" class="pw-post-body-paragraph ld le it lf b lg ms kd li lj mt kg ll lm mu lo lp lq mv ls lt lu mw lw lx ly im bi translated">这是最简单的查询。</p><ol class=""><li id="2e52" class="mx my it lf b lg lh lj lk lm mz lq na lu nb ly pq nd ne nf bi translated">运行以下查询以获取Ted购买的所有商品。</li></ol><pre class="ks kt ku kv gt oa ob oc od aw oe bi"><span id="6c5a" class="of mb it ob b gy og oh l oi oj">SELECT items_purchased FROM purchases<br/>WHERE id=3</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi pw"><img src="../Images/ed815b722246e592e511722dbd58ea59.png" data-original-src="https://miro.medium.com/v2/resize:fit:1398/format:webp/1*PH8xMPR976NVV54EmxIuRw.jpeg"/></div><figcaption class="kz la gj gh gi lb lc bd b be z dk translated">json对象的数组</figcaption></figure><h2 id="0ef9" class="of mb it bd mc pd pe dn mg pf pg dp mk lm ph pi mm lq pj pk mo lu pl pm mq iz bi translated">前端</h2><p id="70d6" class="pw-post-body-paragraph ld le it lf b lg ms kd li lj mt kg ll lm mu lo lp lq mv ls lt lu mw lw lx ly im bi translated">考虑到这是一个API端点结果，这对于前端开发人员使用Array.map()、Array.filter()或Array.forEach()和其他操作进行前端处理来说是完美的。</p><h2 id="3a9a" class="of mb it bd mc pd pe dn mg pf pg dp mk lm ph pi mm lq pj pk mo lu pl pm mq iz bi translated">获取为帐户购买的特定商品</h2><p id="ab69" class="pw-post-body-paragraph ld le it lf b lg ms kd li lj mt kg ll lm mu lo lp lq mv ls lt lu mw lw lx ly im bi translated">根据要求，我们有几种选择。</p><p id="7cb3" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">看看Carol，id=2，我们看到她已经购买了，</p><pre class="ks kt ku kv gt oa ob oc od aw oe bi"><span id="936c" class="of mb it ob b gy og oh l oi oj">[<br/>    {<br/>        "name": "Virtual Keyboard",<br/>        "price": 150,<br/>        "productid": 3<br/>    },<br/>    {<br/>        "name": "Dell 123 Laptop Computer",<br/>        "price": 1300,<br/>        "productid": 1<br/>    },<br/>    {<br/>        "name": "LG Ultrawide Monitor",<br/>        "price": 190,<br/>        "productid": 8<br/>    }<br/>]</span></pre><ol class=""><li id="2a35" class="mx my it lf b lg lh lj lk lm mz lq na lu nb ly pq nd ne nf bi translated">让我们从运行下面的查询开始，检查我们得到的结果。</li></ol><pre class="ks kt ku kv gt oa ob oc od aw oe bi"><span id="f34a" class="of mb it ob b gy og oh l oi oj">SELECT arr.position,arr.item_object<br/>FROM purchases,<br/><strong class="ob jd">jsonb_array_elements(items_purchased) with ordinality arr(item_object, position) </strong><br/>WHERE id=2;</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi px"><img src="../Images/a861740c0ba1c7a8571364dadc39a712.png" data-original-src="https://miro.medium.com/v2/resize:fit:930/format:webp/1*7-N0UhiV7PPCLq8PLudh1g.jpeg"/></div><figcaption class="kz la gj gh gi lb lc bd b be z dk translated">取出每个json对象及其在数组中的序号位置</figcaption></figure><p id="8e65" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">这为我们提供了每个json对象(购买的商品)及其在数组中的序号位置。</p><p id="b225" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated"><strong class="lf jd">jsonb _ array _ elements(items _ purchased)带序数arr(item_object，position) </strong></p><ul class=""><li id="32fb" class="mx my it lf b lg lh lj lk lm mz lq na lu nb ly nc nd ne nf bi translated">我们传递给<strong class="lf jd"> jsonb_array_elements </strong>带有对象数组的jsonb列。这将数组分解成单独的json对象。</li><li id="780f" class="mx my it lf b lg ng lj nh lm ni lq nj lu nk ly nc nd ne nf bi translated">我们用普通的包括了<strong class="lf jd">。这告诉PostgreSQL包括序号位置。<em class="ol">注意这是从1开始的。但是处理数组的时候，从0开始。</em></strong></li><li id="7754" class="mx my it lf b lg ng lj nh lm ni lq nj lu nk ly nc nd ne nf bi translated">“arr”这个名称是任意的。</li><li id="c503" class="mx my it lf b lg ng lj nh lm ni lq nj lu nk ly nc nd ne nf bi translated">名称“item_object”是任意的，在我们的例子中引用了一个purchase json对象。</li><li id="d651" class="mx my it lf b lg ng lj nh lm ni lq nj lu nk ly nc nd ne nf bi translated"><strong class="lf jd">位置</strong>这个词是一个关键词。</li><li id="d949" class="mx my it lf b lg ng lj nh lm ni lq nj lu nk ly nc nd ne nf bi translated">我们可以通过使用语法arr.position和arr.item_object来访问位置和item_object。<em class="ol">我们实际上不需要包含“arr”前缀，我们可以只使用position和item_object。</em></li></ul><p id="7faf" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated"><em class="ol">更多关于jsonb_to_array()的内容可以在</em> <a class="ae lz" href="https://www.postgresql.org/docs/12/functions-json.html" rel="noopener ugc nofollow" target="_blank"> <em class="ol">这里找到</em> </a> <em class="ol">。</em></p><p id="6df3" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">现在我们看到了数据是如何转换的，如果我们希望Carol购买第二件商品，我们只需创建一个Where子句，指定数组中的序号位置。</p><p id="e2cb" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">2.如果我们知道数组中的序号位置，我们可以在Where子句中指定它。</p><p id="253c" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">运行下面的查询，只获取Carol购买的第二件商品，id=2。</p><pre class="ks kt ku kv gt oa ob oc od aw oe bi"><span id="3866" class="of mb it ob b gy og oh l oi oj"><strong class="ob jd">SELECT arr.item_object</strong><br/>FROM purchases,jsonb_array_elements(items_purchased) with ordinality arr(item_object, position) <br/>WHERE id=2 and <strong class="ob jd">arr.position=2;</strong></span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi py"><img src="../Images/78fb492161dac56da940a35b8988d94c.png" data-original-src="https://miro.medium.com/v2/resize:fit:888/format:webp/1*Ouz_PUL9MXfjRDufb3N4TQ.jpeg"/></div><figcaption class="kz la gj gh gi lb lc bd b be z dk translated">购买的第二件物品</figcaption></figure><p id="ee50" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">3.如果我们不知道位置，但是我们知道productid(或任何键),我们可以使用一个子查询来查找序号位置。</p><p id="1138" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">运行下面的查询，产生与上面相同的结果。</p><pre class="ks kt ku kv gt oa ob oc od aw oe bi"><span id="88c3" class="of mb it ob b gy og oh l oi oj">SELECT arr.item_object<br/>FROM purchases,jsonb_array_elements(items_purchased) with ordinality arr(item_object, position) <br/>WHERE id=2 and arr.position=<strong class="ob jd">Cast((select arr.position  FROM purchases, jsonb_array_elements(items_purchased) with ordinality arr(item_object, position) <br/>WHERE id=2 and arr.item_object-&gt;&gt;'productid' = '1') as int)</strong></span></pre><ul class=""><li id="df57" class="mx my it lf b lg lh lj lk lm mz lq na lu nb ly nc nd ne nf bi translated">--&gt; &gt;操作符将以文本形式返回包含在item_object中的键值(productid)。这就是为什么我们使用“1 ”,即使productid是一个数字。</li><li id="8bcb" class="mx my it lf b lg ng lj nh lm ni lq nj lu nk ly nc nd ne nf bi translated">即使序数位置是一个bigint，我们也必须将其转换为int或bigint。</li></ul><h2 id="0b7d" class="of mb it bd mc pd pe dn mg pf pg dp mk lm ph pi mm lq pj pk mo lu pl pm mq iz bi translated">前端</h2><p id="dde4" class="pw-post-body-paragraph ld le it lf b lg ms kd li lj mt kg ll lm mu lo lp lq mv ls lt lu mw lw lx ly im bi translated">考虑到这是一个API端点结果，这对前端开发人员来说是完美的。我们得到了一个干净漂亮的json对象，他们可以操作或显示它。</p><p id="5955" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">4.作为奖励，我们将结合我上一篇文章中的一项技术，以获得Carol购买的最高价格物品，id=2。</p><pre class="ks kt ku kv gt oa ob oc od aw oe bi"><span id="420d" class="of mb it ob b gy og oh l oi oj">SELECT arr.item_object,arr.item_object-&gt;&gt;'price'<br/>FROM purchases,<br/>jsonb_array_elements(items_purchased) with ordinality arr(item_object, position) <br/>WHERE id=2<br/>and arr.item_object-&gt;&gt;'price' = Cast((Select max(item_prices.price) as p<br/>FROM purchases,jsonb_to_recordset(purchases.items_purchased) as item_prices(price int)<br/>WHERE id=2) as varchar);</span></pre><p id="4157" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">我在Select子句中包含了" arr . item _ object '--&gt; &gt; ' price '，这样我们可以看到返回的数据类型是text。因此需要Cast()函数。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi pz"><img src="../Images/d37c34a79eb91add9f70532c25b0361d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1070/format:webp/1*uIQ4GdpvlN2IhOYobcJJYA.jpeg"/></div><figcaption class="kz la gj gh gi lb lc bd b be z dk translated">价格最高的项目</figcaption></figure><p id="8a00" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">在我之前的文章中没有解释太多，jsonb_to_recordset()函数允许我们将数据提取到关系列中，我们可以根据关系列进行查询。</p><p id="3238" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated"><em class="ol">更多关于jsonb的操作符可以在这里找到</em><a class="ae lz" href="https://www.postgresql.org/docs/12/functions-json.html" rel="noopener ugc nofollow" target="_blank"><em class="ol"/></a><em class="ol">。</em></p><h2 id="779f" class="of mb it bd mc pd pe dn mg pf pg dp mk lm ph pi mm lq pj pk mo lu pl pm mq iz bi translated">向帐户添加新购买的商品</h2><p id="15dc" class="pw-post-body-paragraph ld le it lf b lg ms kd li lj mt kg ll lm mu lo lp lq mv ls lt lu mw lw lx ly im bi translated">如果我们查看Bob的购买情况，我们会发现他购买了，</p><pre class="ks kt ku kv gt oa ob oc od aw oe bi"><span id="535c" class="of mb it ob b gy og oh l oi oj">[<br/>    {<br/>        "name": "Dell 123 Laptop Computer",<br/>        "price": 1300,<br/>        "productid": 1<br/>    },<br/>    {<br/>        "name": "Mechanical Keyboard",<br/>        "price": 120,<br/>        "productid": 2<br/>    }<br/>]</span></pre><p id="fe39" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">鲍勃打算购买一台显示器。</p><pre class="ks kt ku kv gt oa ob oc od aw oe bi"><span id="2cec" class="of mb it ob b gy og oh l oi oj">{<br/>        "name": "LG Ultrawide Monitor",<br/>        "price": 190,<br/>        "productid": 8<br/>}</span></pre><ol class=""><li id="8060" class="mx my it lf b lg lh lj lk lm mz lq na lu nb ly pq nd ne nf bi translated">运行以下查询，向id=1的Bob的items_purchased数组中添加一项采购。</li></ol><pre class="ks kt ku kv gt oa ob oc od aw oe bi"><span id="10c9" class="of mb it ob b gy og oh l oi oj">UPDATE purchases SET items_purchased = items_purchased || <br/>'{"name": "LG Ultrawide Monitor",<br/>        "price": 190,<br/>        "productid": 8}' ::jsonb<br/>WHERE id=1;</span></pre><p id="cfd4" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">鲍勃现在购买了一台显示器。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="ps pt di pu bf pv"><div class="gh gi qa"><img src="../Images/84c991113df0a8aba4eab55d2b490c80.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-gk2AzFbucOCDlVwDeiYOw.jpeg"/></div></div><figcaption class="kz la gj gh gi lb lc bd b be z dk translated">鲍勃新买的东西</figcaption></figure><p id="0d19" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">这里我们使用了连接操作符||，将一个jsonb对象连接到数组上。</p><h2 id="fd80" class="of mb it bd mc pd pe dn mg pf pg dp mk lm ph pi mm lq pj pk mo lu pl pm mq iz bi translated">前端</h2><p id="9efc" class="pw-post-body-paragraph ld le it lf b lg ms kd li lj mt kg ll lm mu lo lp lq mv ls lt lu mw lw lx ly im bi translated">考虑到这是一个API端点，这是HTTP补丁请求的完美用途。前端发送补丁请求和要添加到主体中的json对象。</p><p id="2659" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">2.<strong class="lf jd">特例— </strong>没有现有购买。如果items_purchased为null，我们需要使用一个额外的函数COALESCE。</p><pre class="ks kt ku kv gt oa ob oc od aw oe bi"><span id="555a" class="of mb it ob b gy og oh l oi oj">UPDATE purchases SET items_purchased = <strong class="ob jd">COALESCE</strong>(items_purchased, '[]'::jsonb) ||<br/>'{"name": "LG Ultrawide Monitor",<br/>        "price": 190,<br/>        "productid": 8}' ::jsonb<br/>WHERE id=1;</span></pre><blockquote class="qb qc qd"><p id="2957" class="ld le ol lf b lg lh kd li lj lk kg ll qe ln lo lp qf lr ls lt qg lv lw lx ly im bi translated">在查询数据时，我们经常使用<code class="fe qh qi qj ob b">COALESCE</code>函数来用默认值代替空值</p></blockquote><p id="e0c1" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">在我们的例子中，我们替换空数组，然后连接<em class="ol">,因为不能连接到null。</em></p><p id="1bf4" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">更多关于COALESCE的信息可以在<a class="ae lz" href="https://www.postgresqltutorial.com/postgresql-coalesce/" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><h2 id="7fe2" class="of mb it bd mc pd pe dn mg pf pg dp mk lm ph pi mm lq pj pk mo lu pl pm mq iz bi translated">从帐户中删除购买</h2><p id="763b" class="pw-post-body-paragraph ld le it lf b lg ms kd li lj mt kg ll lm mu lo lp lq mv ls lt lu mw lw lx ly im bi translated"><strong class="lf jd">重要提示</strong>:之前我们使用“with ordinality”来获取数组中的“位置”。当使用jsonb_array_elements()函数时，这很好。但是需要注意的是，虽然这个顺序值从数字1 <strong class="lf jd">开始，但是jsonb对象数组从0开始。</strong></p><ol class=""><li id="884a" class="mx my it lf b lg lh lj lk lm mz lq na lu nb ly pq nd ne nf bi translated">当数组中的位置已知时，这就像使用'-'操作符一样简单。</li></ol><p id="b47f" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">文档中的“-”操作符描述在我看来有点模糊。</p><blockquote class="qb qc qd"><p id="5762" class="ld le ol lf b lg lh kd li lj lk kg ll qe ln lo lp qf lr ls lt qg lv lw lx ly im bi translated">从左操作数中删除键/值对或<em class="it">字符串</em>元素。键/值对基于它们的键值进行匹配。</p></blockquote><p id="94a8" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">鲍勃归还了他的机械键盘。让我们从他的items_purchased中删除项目2。首先查询Bob的商品，看他有三个，然后删除商品2。</p><pre class="ks kt ku kv gt oa ob oc od aw oe bi"><span id="5be2" class="of mb it ob b gy og oh l oi oj">SELECT * FROM purchases where id=1;</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="ps pt di pu bf pv"><div class="gh gi qa"><img src="../Images/84c991113df0a8aba4eab55d2b490c80.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-gk2AzFbucOCDlVwDeiYOw.jpeg"/></div></div><figcaption class="kz la gj gh gi lb lc bd b be z dk translated">鲍勃有三样东西</figcaption></figure><p id="7eb0" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated"><em class="ol">项编号2，机械键盘，位于</em> <strong class="lf jd"> <em class="ol">数组位置1 </em> </strong> <em class="ol">。</em></p><pre class="ks kt ku kv gt oa ob oc od aw oe bi"><span id="2b35" class="of mb it ob b gy og oh l oi oj">UPDATE purchases SET items_purchased = items_purchased - 1<br/>WHERE id=1;</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="ps pt di pu bf pv"><div class="gh gi qk"><img src="../Images/a520b0b354135c2e30a8316d8a96f79b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZKZNMZ-JVo6CeCrbN8DiDg.jpeg"/></div></div><figcaption class="kz la gj gh gi lb lc bd b be z dk translated">没有项目编号2或数组位置1的Bob</figcaption></figure><p id="a9cb" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">不知道位置怎么办？也许productid是已知的。一个以前用过的查询帮助了我们。</p><p id="80a4" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">下面的查询给出了Dell 123笔记本电脑的序号位置，productid=1，Carol的序号位置，id=2。</p><pre class="ks kt ku kv gt oa ob oc od aw oe bi"><span id="b775" class="of mb it ob b gy og oh l oi oj">SELECT position FROM purchases, jsonb_array_elements(items_purchased) with ordinality arr(item_object, position) <br/>WHERE id=2 and item_object-&gt;&gt;'productid' = '1';</span></pre><p id="8940" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">这将返回数字2，因为Carol的Dell 123笔记本电脑位于阵列的第二个位置。然而，如果我们用它来帮助我们删除一个项目，它将删除第三个项目，因为，正如在上面的注释中提到的，数组位置从0开始。解决方法很简单，只需使用位置-1</p><p id="9e1f" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">2.查找该项在数组中的位置，然后移除该项。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="ps pt di pu bf pv"><div class="gh gi ql"><img src="../Images/d52d6319780eaca7d885c0fd0cb65df4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZG7jjVGt_-7NKOXLrblFnw.jpeg"/></div></div><figcaption class="kz la gj gh gi lb lc bd b be z dk translated">卡罗尔。戴尔123笔记本电脑位于序号位置2，但阵列位置1。</figcaption></figure><pre class="ks kt ku kv gt oa ob oc od aw oe bi"><span id="a439" class="of mb it ob b gy og oh l oi oj">UPDATE purchases SET items_purchased = items_purchased - <br/><strong class="ob jd">Cast</strong>((<strong class="ob jd">SELECT position - 1</strong> FROM purchases, jsonb_array_elements(items_purchased) with ordinality arr(item_object, position) <br/>WHERE id=2 and <strong class="ob jd">item_object-&gt;&gt;'productid' = '1'</strong>) as int)<br/>WHERE id=2;</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="ps pt di pu bf pv"><div class="gh gi qm"><img src="../Images/6eded676b00fe2a36a9c0957258aaf05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BabGIu-Djh4lXRIvBv0X6Q.jpeg"/></div></div><figcaption class="kz la gj gh gi lb lc bd b be z dk translated">没有productid=1的Carol。它的序号位置是2，但数组位置是1。</figcaption></figure><ul class=""><li id="d36f" class="mx my it lf b lg lh lj lk lm mz lq na lu nb ly nc nd ne nf bi translated">我们使用a查询来查找Carol的items_purchased中productid=1的位置。这将返回序号位置2。因此，我们使用position-1来获取数组位置1。</li><li id="497d" class="mx my it lf b lg ng lj nh lm ni lq nj lu nk ly nc nd ne nf bi translated">即使序数位置是一个bigint，我们也必须将其转换为int或bigint。</li><li id="997f" class="mx my it lf b lg ng lj nh lm ni lq nj lu nk ly nc nd ne nf bi translated">还记得-&gt; &gt;返回一个字符串，所以在item_object-&gt;&gt;'productid' = '1 '中，我们与字符串版本的productid进行比较，即使它在json中是一个数字。</li></ul><h1 id="f3b9" class="ma mb it bd mc md me mf mg mh mi mj mk ki ml kj mm kl mn km mo ko mp kp mq mr bi translated">索引</h1><p id="3da1" class="pw-post-body-paragraph ld le it lf b lg ms kd li lj mt kg ll lm mu lo lp lq mv ls lt lu mw lw lx ly im bi translated">基于读者提出的几个问题，我在JSON中添加了索引items_purchased列和一个键值。</p><h2 id="02d6" class="of mb it bd mc pd pe dn mg pf pg dp mk lm ph pi mm lq pj pk mo lu pl pm mq iz bi translated">为列编制索引</h2><pre class="ks kt ku kv gt oa ob oc od aw oe bi"><span id="330c" class="of mb it ob b gy og oh l oi oj">CREATE INDEX idx_purchases ON public.purchases (items_purchased);</span></pre><p id="ffc6" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">这将创建一个btree索引。</p><h2 id="e2c9" class="of mb it bd mc pd pe dn mg pf pg dp mk lm ph pi mm lq pj pk mo lu pl pm mq iz bi translated">索引JSONB列中的键</h2><p id="d099" class="pw-post-body-paragraph ld le it lf b lg ms kd li lj mt kg ll lm mu lo lp lq mv ls lt lu mw lw lx ly im bi translated">对于一个特定的键<strong class="lf jd">，这里命名为</strong>，在现场使用时，</p><pre class="ks kt ku kv gt oa ob oc od aw oe bi"><span id="fe4b" class="of mb it ob b gy og oh l oi oj">CREATE INDEX idx_purchases_name<br/> ON public.purchases <br/> ((items_purchased -&gt;&gt; ‘name’));</span></pre><p id="b21e" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">这将在name上创建一个btree索引。</p><p id="80d3" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">在我们的小数据集中，当你进行解释分析时，你可能看不到正在使用的索引。</p><blockquote class="qb qc qd"><p id="68eb" class="ld le ol lf b lg lh kd li lj lk kg ll qe ln lo lp qf lr ls lt qg lv lw lx ly im bi translated">当在<code class="fe qh qi qj ob b">SELECT</code>查询中使用索引时，首先从索引中获取请求行的位置(而不是直接从表中获取)。然后，请求的行(总数的子集)实际上是从表中获取的。这是一个分两步走的过程。给定足够多的请求行(比如id大于10的所有文章)，直接从表中获取所有这些行实际上比通过额外的步骤向索引查询这些行的位置，然后从表中获取这些特定的行更有效。如果行的百分比小于表中所有行的5-10%,则使用存储在索引中的信息的好处超过了额外的中间步骤。</p></blockquote><p id="5bb4" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">全篇<a class="ae lz" href="https://thoughtbot.com/blog/why-postgres-wont-always-use-an-index" rel="noopener ugc nofollow" target="_blank">此处</a>。</p><h1 id="9bb4" class="ma mb it bd mc md me mf mg mh mi mj mk ki ml kj mm kl mn km mo ko mp kp mq mr bi translated">结论</h1><p id="9cf6" class="pw-post-body-paragraph ld le it lf b lg ms kd li lj mt kg ll lm mu lo lp lq mv ls lt lu mw lw lx ly im bi translated">概括一下。在本文中，我们继续了前一篇文章<a class="ae lz" rel="noopener ugc nofollow" target="_blank" href="/how-to-query-a-json-array-of-objects-as-a-recordset-in-postgresql-a81acec9fbc5">中所做的工作，将jsonb对象数组作为记录集</a>进行查询，增加了<strong class="lf jd">获取</strong>特定数组对象、<strong class="lf jd">添加</strong>新数组对象和<strong class="lf jd">移除</strong>数组对象的能力。</p><p id="4cc5" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">PostgreSQL有许多用于JSON数据的函数和操作符，我们将在以后的文章中探讨其中的一些。</p><p id="e702" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">我每天都在使用它们，因为我为一个PERN栈构建了一个RESTful API。</p><p id="659c" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">如果您觉得这很有用，<a class="ae lz" href="https://www.postgresql.org/docs/12/functions-json.html" rel="noopener ugc nofollow" target="_blank">开始探索json、jsonb和JSON的其他操作符和函数</a>，以及PostgreSQL中可用的常规SQL操作。</p><p id="bf9c" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated"><strong class="lf jd">感谢您的阅读和编码！</strong></p><p id="6816" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated"><em class="ol">想看就看，加入Medium帮我继续写</em></p><div class="qn qo gp gr qp qq"><a href="https://bobtomlin-70659.medium.com/membership" rel="noopener follow" target="_blank"><div class="qr ab fo"><div class="qs ab qt cl cj qu"><h2 class="bd jd gy z fp qv fr fs qw fu fw jc bi translated">通过我的推荐链接加入灵媒——重力井(罗伯·汤姆林)</h2><div class="qx l"><h3 class="bd b gy z fp qv fr fs qw fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="qy l"><p class="bd b dl z fp qv fr fs qw fu fw dk translated">bobtomlin-70659.medium.com</p></div></div><div class="qz l"><div class="ra l rb rc rd qz re kx qq"/></div></div></a></div><p id="c3b5" class="pw-post-body-paragraph ld le it lf b lg lh kd li lj lk kg ll lm ln lo lp lq lr ls lt lu lv lw lx ly im bi translated">你也可以享受，</p><div class="qn qo gp gr qp qq"><a rel="noopener  ugc nofollow" target="_blank" href="/working-with-the-array-data-type-in-postgresql-1e6fecdb51fe"><div class="qr ab fo"><div class="qs ab qt cl cj qu"><h2 class="bd jd gy z fp qv fr fs qw fu fw jc bi translated">在PostgreSQL中使用数组数据类型</h2><div class="qx l"><h3 class="bd b gy z fp qv fr fs qw fu fw dk translated">创建、获取、修改、添加和删除数组中的数据</h3></div><div class="qy l"><p class="bd b dl z fp qv fr fs qw fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="qz l"><div class="rf l rb rc rd qz re kx qq"/></div></div></a></div><div class="qn qo gp gr qp qq"><a rel="noopener  ugc nofollow" target="_blank" href="/creating-a-data-pagination-function-in-postgresql-2a032084af54"><div class="qr ab fo"><div class="qs ab qt cl cj qu"><h2 class="bd jd gy z fp qv fr fs qw fu fw jc bi translated">在PostgreSQL中创建数据分页函数</h2><div class="qx l"><h3 class="bd b gy z fp qv fr fs qw fu fw dk translated">使用LIMIT、OFFSET和FETCH NEXT运算符。</h3></div><div class="qy l"><p class="bd b dl z fp qv fr fs qw fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="qz l"><div class="rg l rb rc rd qz re kx qq"/></div></div></a></div><div class="qn qo gp gr qp qq"><a rel="noopener  ugc nofollow" target="_blank" href="/how-to-query-a-json-array-of-objects-as-a-recordset-in-postgresql-a81acec9fbc5"><div class="qr ab fo"><div class="qs ab qt cl cj qu"><h2 class="bd jd gy z fp qv fr fs qw fu fw jc bi translated">如何在PostgreSQL中将JSONB对象数组作为记录集进行查询</h2><div class="qx l"><h3 class="bd b gy z fp qv fr fs qw fu fw dk translated">使用jsonb_to_recordset()函数将对象数组转换为行</h3></div><div class="qy l"><p class="bd b dl z fp qv fr fs qw fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="qz l"><div class="rh l rb rc rd qz re kx qq"/></div></div></a></div><div class="qn qo gp gr qp qq"><a href="https://medium.com/javascript-in-plain-english/querying-sql-server-in-node-js-using-async-await-5cb68acf2144" rel="noopener follow" target="_blank"><div class="qr ab fo"><div class="qs ab qt cl cj qu"><h2 class="bd jd gy z fp qv fr fs qw fu fw jc bi translated">使用Async/Await在Node.js中查询SQL Server</h2><div class="qx l"><h3 class="bd b gy z fp qv fr fs qw fu fw dk translated">一种更简洁的数据库查询方式</h3></div><div class="qy l"><p class="bd b dl z fp qv fr fs qw fu fw dk translated">medium.com</p></div></div><div class="qz l"><div class="ri l rb rc rd qz re kx qq"/></div></div></a></div><div class="qn qo gp gr qp qq"><a href="https://medium.com/javascript-in-plain-english/how-to-download-files-from-an-amazon-s3-bucket-to-a-sql-server-rds-a6d20f3b9014" rel="noopener follow" target="_blank"><div class="qr ab fo"><div class="qs ab qt cl cj qu"><h2 class="bd jd gy z fp qv fr fs qw fu fw jc bi translated">将AWS S3中的文件下载到SQL Server RDS</h2><div class="qx l"><h3 class="bd b gy z fp qv fr fs qw fu fw dk translated">并将内容大容量装载到一个表中</h3></div><div class="qy l"><p class="bd b dl z fp qv fr fs qw fu fw dk translated">中等。</p></div></div><div class="qz l"><div class="rj l rb rc rd qz re kx qq"/></div></div></a></div></div><div class="ab cl or os hx ot" role="separator"><span class="ou bw bk ov ow ox"/><span class="ou bw bk ov ow ox"/><span class="ou bw bk ov ow"/></div><div class="im in io ip iq"><h1 id="849c" class="ma mb it bd mc md oy mf mg mh oz mj mk ki pa kj mm kl pb km mo ko pc kp mq mr bi translated">分级编码</h1><p id="9489" class="pw-post-body-paragraph ld le it lf b lg ms kd li lj mt kg ll lm mu lo lp lq mv ls lt lu mw lw lx ly im bi translated">感谢您成为我们社区的一员！升级正在改变技术招聘。<a class="ae lz" href="https://jobs.levelup.dev/talent" rel="noopener ugc nofollow" target="_blank"> <strong class="lf jd">在最好的公司</strong>找到你最完美的工作 </a> <strong class="lf jd">。</strong></p><div class="qn qo gp gr qp qq"><a href="https://jobs.levelup.dev/talent" rel="noopener  ugc nofollow" target="_blank"><div class="qr ab fo"><div class="qs ab qt cl cj qu"><h2 class="bd jd gy z fp qv fr fs qw fu fw jc bi translated">提升——改变招聘流程</h2><div class="qx l"><h3 class="bd b gy z fp qv fr fs qw fu fw dk translated">🔥让软件工程师找到他们热爱的完美角色🧠寻找人才是最痛苦的部分…</h3></div><div class="qy l"><p class="bd b dl z fp qv fr fs qw fu fw dk translated">作业. levelup.dev</p></div></div><div class="qz l"><div class="rk l rb rc rd qz re kx qq"/></div></div></a></div></div></div>    
</body>
</html>