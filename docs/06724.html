<html>
<head>
<title>Learning SQL: The SELECT Statement and the WHERE Clause</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">学习SQL:SELECT语句和WHERE子句</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/learning-sql-the-select-statement-and-the-where-clause-b087f8aec315?source=collection_archive---------15-----------------------#2020-12-22">https://levelup.gitconnected.com/learning-sql-the-select-statement-and-the-where-clause-b087f8aec315?source=collection_archive---------15-----------------------#2020-12-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/f17d17f6983c583109bf82fe377e1cea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*L6hZCF6TeqD23DJE"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">阿尔瓦罗·雷耶斯在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="fb5a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在我上一篇关于学习SQL的文章中，我讨论了如何使用SELECT语句查询数据库表。在本文中，我将讨论如何使用WHERE子句来细化查询。</p><h1 id="4bd5" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">SELECT语句</h1><p id="47d9" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">快速回顾一下，<code class="fe mh mi mj mk b">SELECT</code>语句用于从数据库表中检索数据(称为查询)。这里有一个例子:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="acdf" class="mt lf it mk b gy mu mv l mw mx">sqlite&gt; select first_name, last_name from demographics;<br/>Cynthia|Fehrenbach<br/>Raymond|Williams<br/>Danny|Martin<br/>Jonathan|Childs<br/>Meredith|Stanton<br/>Jessica|Wise</span></pre><p id="9cc6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您也可以通过用星号替换列名来指定所有列:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="5215" class="mt lf it mk b gy mu mv l mw mx">sqlite&gt; select * from demographics;<br/>1234|Cynthia|Fehrenbach|Little Rock|1988-02-09|Graphic Arts<br/>1231|Raymond|Williams|Sheridan|1985-12-07|Classics<br/>2314|Danny|Martin|Greenbrier|1978-06-12|Information Technology<br/>2143|Jonathan|Childs|Hot Springs|1988-05-13|Film and Sound<br/>3124|Meredith|Stanton|Maumelle|1985-06-03|English<br/>2341|Jessica|Wise|North Little Rock|1984-08-01|English</span></pre><p id="0945" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">但是，在许多情况下，您希望将查询返回的数据限制为存储在表中的数据的子集。WHERE子句可以帮助您细化查询，以符合您想要的限制。</p><h1 id="107e" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">带有关系运算符的WHERE子句</h1><p id="bb90" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated"><code class="fe mh mi mj mk b">WHERE</code>子句的目的是根据条件或规范请求表中数据的子集。让我们从<code class="fe mh mi mj mk b">WHERE</code>子句的语法模板开始:</p><p id="09ce" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="my"> select [*，columns]from table-name where[条件/规格]；</em></p><p id="2d6c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">让我们从给<code class="fe mh mi mj mk b">WHERE</code>子句提供一个条件开始。这里有一个例子:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="39fd" class="mt lf it mk b gy mu mv l mw mx">sqlite&gt; select * from demographics where last_name = 'Fehrenbach';<br/>1234|Cynthia|Fehrenbach|Little Rock|1988-02-09|Graphic Arts</span></pre><p id="e504" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">该条件要求只检索姓氏为“Fehrenbach”的行。</p><p id="d70b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这是另一个例子:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="65dd" class="mt lf it mk b gy mu mv l mw mx">sqlite&gt; select * from demographics where major = "English";<br/>3124|Meredith|Stanton|Maumelle|1985-06-03|English<br/>2341|Jessica|Wise|North Little Rock|1984-08-01|English</span></pre><p id="6e14" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这里的条件只要求专业字段中包含“English”的行，并且返回了两行。</p><p id="3797" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最后两个例子使用了等式条件，但是您也可以使用其他关系运算符。下面是一个使用<code class="fe mh mi mj mk b">&lt;</code>操作符的例子:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="8258" class="mt lf it mk b gy mu mv l mw mx">sqlite&gt; select first_name, last_name, dob from demographics where dob &lt; '1985';<br/>Danny|Martin|1978-06-12<br/>Jessica|Wise|1984-08-01</span></pre><p id="fbc2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下面是一个使用<code class="fe mh mi mj mk b">!=</code>操作符的例子:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="8dae" class="mt lf it mk b gy mu mv l mw mx">sqlite&gt; select first_name, last_name, major from demographics where major != "English";<br/>Cynthia|Fehrenbach|Graphic Arts<br/>Raymond|Williams|Classics<br/>Danny|Martin|Information Technology<br/>Jonathan|Childs|Film and Sound</span></pre><h1 id="831e" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">带有布尔运算符的WHERE子句</h1><p id="1970" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">有时候，一个<code class="fe mh mi mj mk b">WHERE </code>子句中只有一个条件是不够的。您可以使用布尔运算符组合两个或多个条件。布尔运算符是and、or和not。</p><p id="c55c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">and</code>操作符用于返回的行必须同时满足两个条件的查询。在第一个示例中，查询搜索以M和Z之间的字母开头的姓氏和非英语专业，姓氏按字母顺序排列:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="9131" class="mt lf it mk b gy mu mv l mw mx">sqlite&gt; select * from demographics where last_name &gt; 'L' and major != 'English' order by last_name;<br/>2314|Danny|Martin|Greenbrier|1978-06-12|Information Technology<br/>1231|Raymond|Williams|Sheridan|1985-12-07|Classics</span></pre><p id="20e0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下面是另一个例子，其中查询搜索1985年或之后出生的英语专业学生:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="9d94" class="mt lf it mk b gy mu mv l mw mx">sqlite&gt; select first_name, last_name, major from demographics where major = 'English' and dob &gt; '1985';<br/>Meredith|Stanton|English</span></pre><p id="d83c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">or</code>操作符将返回匹配任一条件的查询。下面是一个示例，其中查询搜索学生出生于1988年之前或他们的家乡是小石城的行:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="36f4" class="mt lf it mk b gy mu mv l mw mx">sqlite&gt; select last_name, dob, hometown from demographics where dob &lt; '1988' or hometown = "Little Rock";<br/>Fehrenbach|1988-02-09|Little Rock<br/>Williams|1985-12-07|Sheridan<br/>Martin|1978-06-12|Greenbrier<br/>Stanton|1985-06-03|Maumelle<br/>Wise|1984-08-01|North Little Rock</span></pre><p id="ca3d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">第一行出生于1988年，但她的家乡是小石城，所以它与查询匹配。</p><p id="9f08" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">not</code>操作符简单地否定它后面出现的条件。例如，要查找所有非英语专业的学生，查询可以写成这样:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="83a0" class="mt lf it mk b gy mu mv l mw mx">sqlite&gt; select first_name, last_name, major from demographics where not major = "English";<br/>Cynthia|Fehrenbach|Graphic Arts<br/>Raymond|Williams|Classics<br/>Danny|Martin|Information Technology<br/>Jonathan|Childs|Film and Sound</span></pre><p id="7ae7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">编写这样的查询并不比使用！=运算符，但是您应该始终努力使查询易于理解，因为其他人可能会阅读您的查询，或者您可能需要稍后重新访问查询，而以不清楚的方式编写的查询将会花费您更长的时间来理解。</p><h1 id="e92b" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">相似模式匹配</h1><p id="f9a8" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">到目前为止，我执行的大多数查询都涉及到精确的值，比如字符串数据、姓名或专业。在这一节中，我将介绍如何执行匹配数据模式的查询，例如以“M”开头的单词或其中包含“iec”的单词。</p><p id="a014" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">为了使用模式，我们必须使用通配符来指定模式。SQL中使用了两个通配符:<code class="fe mh mi mj mk b">%</code>和<code class="fe mh mi mj mk b">_</code>(下划线)。现在让我们花些时间来看看这些通配符是如何工作的。</p><p id="c84c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">%</code>通配符用于匹配任何零个或多个字符的字符串。例如，如果你想查询所有以字母“E”开头的专业，你可以写<code class="fe mh mi mj mk b">"E%"</code>，这将匹配“英语”和“经济学”。</p><p id="18fe" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您也可以在图形的末尾使用<code class="fe mh mi mj mk b">%</code>操作符。模式<code class="fe mh mi mj mk b">“%s”</code>将匹配一个或多个字符的任何字符串，该字符串末尾有一个“s”。</p><p id="359a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">_</code>字符(下划线)用于匹配字符串中的任何一个字符。例如，模式<code class="fe mh mi mj mk b">“____” </code>将匹配任何四个字符的字符串，而<code class="fe mh mi mj mk b">“E___”</code>将匹配任何以“E”开头并有其他三个字符的字符串。</p><p id="65e2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">记住所有这些，让我们看一些例子。第一个示例返回专业以“E”开头的所有学生:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="156a" class="mt lf it mk b gy mu mv l mw mx">sqlite&gt; select last_name, major from demographics where major like "E%";<br/>Stanton|English<br/>Wise|English<br/>Hodges|Economics</span></pre><p id="0e99" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下一个示例匹配所有生日在1985年的学生:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="f677" class="mt lf it mk b gy mu mv l mw mx">sqlite&gt; select first_name, last_name from demographics where dob like '1985%';<br/>Raymond|Williams<br/>Meredith|Stanton</span></pre><h1 id="222e" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">介于之间的范围过滤</h1><p id="f770" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">您可以使用<code class="fe mh mi mj mk b">BETWEEN</code>子句在表中查询一组介于两个指定值之间的值。<code class="fe mh mi mj mk b">BETWEEN</code>的语法模板是:</p><p id="2490" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="my">从表名中选择列名，其中列名在值1和值2之间</em></p><p id="5b40" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">对于这一部分，我在表中添加了一个平均绩点(gpa)列。在后面的文章中，我将向您展示如何做到这一点。不过现在，让我们用gpa专栏来演示一下<code class="fe mh mi mj mk b">BETWEEN</code>子句是如何工作的。</p><p id="fb33" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">首先，这是所有行的列表，以便您可以看到添加的gpa值:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="d81d" class="mt lf it mk b gy mu mv l mw mx">sqlite&gt; select * from demographics;<br/>1234|Cynthia|Fehrenbach|Little Rock|1988-02-09|Graphic Arts|3.64<br/>1231|Raymond|Williams|Sheridan|1985-12-07|Classics|2.43<br/>2314|Danny|Martin|Greenbrier|1978-06-12|Information Technology|3.27<br/>2143|Jonathan|Childs|Hot Springs|1988-05-13|Film and Sound|3.52<br/>3124|Meredith|Stanton|Maumelle|1985-06-03|English|3.72<br/>2341|Jessica|Wise|North Little Rock|1984-08-01|English|3.55<br/>4213|Mindy|Hodges|North Little Rock|1984-12-23|Economics|3.71</span></pre><p id="0937" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下面是第一个示例，我们在表中查询介于3.3和3.6之间的gpa值:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="0b39" class="mt lf it mk b gy mu mv l mw mx">sqlite&gt; select last_name, gpa from demographics where gpa between 3.3 and 3.6;<br/>Childs|3.52<br/>Wise|3.55</span></pre><p id="8ffa" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您还可以对字符串使用<code class="fe mh mi mj mk b">BETWEEN</code>子句，如下例所示:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="db4a" class="mt lf it mk b gy mu mv l mw mx">sqlite&gt; select last_name, major from demographics where major between 'A' and 'F';<br/>Williams|Classics<br/>Stanton|English<br/>Wise|English<br/>Hodges|Economics</span></pre><p id="44e2" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">您可以通过使用<code class="fe mh mi mj mk b">NOT</code>来否定<code class="fe mh mi mj mk b">BETWEEN</code>查询，如下所示:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="4166" class="mt lf it mk b gy mu mv l mw mx">sqlite&gt; select last_name, gpa from demographics where gpa not between 3.3 and 3.6 order by gpa;<br/>Williams|2.43<br/>Martin|3.27<br/>Fehrenbach|3.64<br/>Hodges|3.71<br/>Stanton|3.72</span></pre><p id="0015" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">请注意，gpa值是有序的，因此较低的gpa值首先显示。</p><p id="ca8f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">请记住，<code class="fe mh mi mj mk b">BETWEEN</code>子句是使用<code class="fe mh mi mj mk b">WHERE</code>和<code class="fe mh mi mj mk b">AND</code>的简写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="1d51" class="mt lf it mk b gy mu mv l mw mx">sqlite&gt; select last_name, gpa from demographics where gpa &gt;= 3.3 and gpa &lt;= 3.6 order by gpa;<br/>Childs|3.52<br/>Wise|3.55</span></pre><h1 id="20f3" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">使用IN进行列表过滤</h1><p id="0d5f" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">执行查询的另一种方式是要求查询返回与给定列表的一个或多个值匹配的行。这是使用<code class="fe mh mi mj mk b">IN</code>关键字完成的。</p><p id="cab1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下面是<code class="fe mh mi mj mk b">IN</code>的语法模板:</p><p id="f7a8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="my">从列所在的表中选择列(值列表)；</em></p><p id="e77b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下面是一个使用<code class="fe mh mi mj mk b">IN</code>返回与给定列表匹配的专业列表的例子:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="de0e" class="mt lf it mk b gy mu mv l mw mx">sqlite&gt; select last_name, major from demographics where major in ('English','Economics');<br/>Stanton|English<br/>Wise|English<br/>Hodges|Economics</span></pre><p id="509e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下面是另一个示例，其中指定的列表是平均绩点列表:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="5c18" class="mt lf it mk b gy mu mv l mw mx">sqlite&gt; select last_name, major, gpa from demographics where gpa in (3.70, 3.71, 3.72);<br/>Stanton|English|3.72<br/>Hodges|Economics|3.71</span></pre><p id="8835" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">请记住，使用<code class="fe mh mi mj mk b">IN</code>关键字是编写使用带有一系列<code class="fe mh mi mj mk b">OR</code>的<code class="fe mh mi mj mk b">WHERE</code>的查询的另一种方式，如上面的专业示例中的重写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="8752" class="mt lf it mk b gy mu mv l mw mx">sqlite&gt; select last_name, major from demographics where major = 'English' or major = 'Economics';<br/>Stanton|English<br/>Wise|English<br/>Hodges|Economics</span></pre><p id="f044" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">这就结束了我对使用SELECT语句进行查询的讨论。在我的下一篇文章中，我将开始研究SQL操作符和函数。</p><p id="3407" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">感谢您的阅读，请对本文提出您的意见和建议，或给我发电子邮件至<a class="ae kf" href="mailto:mmmcmillan1@att.net" rel="noopener ugc nofollow" target="_blank">mmmcmillan1@att.net</a>。</p></div></div>    
</body>
</html>