<html>
<head>
<title>Set Up and Run a Simple Node Server Project</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">设置并运行一个简单的节点服务器项目</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/set-up-and-run-a-simple-node-server-project-38b403a3dc09?source=collection_archive---------0-----------------------#2021-02-22">https://levelup.gitconnected.com/set-up-and-run-a-simple-node-server-project-38b403a3dc09?source=collection_archive---------0-----------------------#2021-02-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="ba5d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我学习计算机编程已经快三年了，我注意到了一个新的发展，我掌握了实际帮助其他开发者的技术知识。所以，我想我应该开始写下我所熟悉的东西，来帮助我记住我所知道的，并为其他人提供参考。为此，我从一些简单的东西开始，一个用静态文件响应请求的节点应用程序。或者，至少这在有经验的开发人员中可能<em class="kl">看起来</em>简单，但是我将对此略加赘述，因为我希望具有最低限度的web开发知识的人至少能够开始使用这个Node应用程序，并在完成本教程后为接下来的有趣内容打下坚实的基础。尽管如此，我不能解释所有的事情，所以如果你想的话，有时我会送你去学习更多。</p></div><div class="ab cl km kn hu ko" role="separator"><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr"/></div><div class="ij ik il im in"><h2 id="79b9" class="kt ku iq bd kv kw kx dn ky kz la dp lb jy lc ld le kc lf lg lh kg li lj lk ll bi translated"><strong class="ak">加入升级人才集体</strong></h2><div class="lm ln gp gr lo lp"><a href="https://jobs.levelup.dev/talent/welcome?referral=true" rel="noopener  ugc nofollow" target="_blank"><div class="lq ab fo"><div class="lr ab ls cl cj lt"><h2 class="bd ir gy z fp lu fr fs lv fu fw ip bi translated">升级—转变技术招聘</h2><div class="lw l"><h3 class="bd b gy z fp lu fr fs lv fu fw dk translated">升级—转变技术招聘🔥使软件工程师能够找到完美的角色…</h3></div><div class="lx l"><p class="bd b dl z fp lu fr fs lv fu fw dk translated">作业. levelup.dev</p></div></div><div class="ly l"><div class="lz l ma mb mc ly md me lp"/></div></div></a></div></div><div class="ab cl km kn hu ko" role="separator"><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr"/></div><div class="ij ik il im in"><p id="e05a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在本教程中，我将介绍设置节点服务器的步骤。从客户机的角度来看(客户机是与服务器通信的人/计算机)，这个服务器只做一件事:显示一个单一的静态HTML页面。没有CSS，没有前端JavaScript，没有数据库连接，什么都没有，只有最少的NPM包(我会解释一下NPM在哪里)。事实上，我们甚至不会在实际的互联网上运行它，我们只是在本地运行它。我还应该补充一点，如果你想了解服务器一般是如何工作的，客户端-服务器通信的机制，这一点很重要，如果你想做更严肃的节点工作，我就不在这里讨论了。</p></div><div class="ab cl km kn hu ko" role="separator"><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr"/></div><div class="ij ik il im in"><p id="bca0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先，让我们回顾一下大致情况:</p><ol class=""><li id="69e4" class="mf mg iq jp b jq jr ju jv jy mh kc mi kg mj kk mk ml mm mn bi translated">去NodeJS网站下载NodeJS</li><li id="2b24" class="mf mg iq jp b jq mo ju mp jy mq kc mr kg ms kk mk ml mm mn bi translated">确保安装了节点和NPM，并定义了它们的路径</li><li id="2270" class="mf mg iq jp b jq mo ju mp jy mq kc mr kg ms kk mk ml mm mn bi translated">创建新的项目文件夹</li><li id="ab59" class="mf mg iq jp b jq mo ju mp jy mq kc mr kg ms kk mk ml mm mn bi translated">在你的项目文件夹中开始运行NPM(它在后台运行)</li><li id="085b" class="mf mg iq jp b jq mo ju mp jy mq kc mr kg ms kk mk ml mm mn bi translated">安装我们需要的任何NPM软件包</li><li id="6a0d" class="mf mg iq jp b jq mo ju mp jy mq kc mr kg ms kk mk ml mm mn bi translated">在项目文件夹中创建一个HTML文件(这是客户端将看到的内容)</li><li id="ffb8" class="mf mg iq jp b jq mo ju mp jy mq kc mr kg ms kk mk ml mm mn bi translated">在项目文件夹中创建一个节点/JavaScript文件(这是您的服务器文件)</li><li id="1eb2" class="mf mg iq jp b jq mo ju mp jy mq kc mr kg ms kk mk ml mm mn bi translated">运行您的服务器</li><li id="608b" class="mf mg iq jp b jq mo ju mp jy mq kc mr kg ms kk mk ml mm mn bi translated">访问您的(本地)网站！</li></ol></div><div class="ab cl km kn hu ko" role="separator"><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr"/></div><div class="ij ik il im in"><p id="9edd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">第一步:去NodeJS网站下载NodeJS </strong></p><p id="4066" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae mt" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank">这里是NodeJS网站</a>。如果你正在遵循这个教程，那么我会推荐你<strong class="jp ir">下载LTS(长期支持)版本</strong>，这是大多数人使用的稳定版本，如果出现问题，你将有更好的时间获得帮助。这个部分的标题在技术上有误导性，你实际上下载了NodeJS <em class="kl">安装程序</em>，一旦下载完成，你应该打开它并按照指示安装Node。</p><p id="2758" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">第二步:确保安装了节点和NPM，并定义了它们的路径</strong></p><p id="4624" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一旦下载并安装了NodeJS，您将希望通过在终端中运行以下命令来确保Node实际上安装正确:</p><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="575f" class="kt ku iq mz b gy nd ne l nf ng">node -v</span></pre><p id="c951" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这将返回一个版本号，如下所示:</p><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="83f8" class="kt ku iq mz b gy nd ne l nf ng">v14.15.0</span></pre><p id="92f2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">安装Node时，还会安装Node Package Manager，通常简称为NPM。就命令行而言，您很可能会更多地与NPM交互，而不是与Node交互。我稍后会解释它是做什么的，但是现在，只需要检查一下NPM是否已经安装，它的路径是否正确。要检查这些，请执行与节点相同的操作:</p><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="2870" class="kt ku iq mz b gy nd ne l nf ng">npm -v</span></pre><p id="b334" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这将返回一个类似的数字，如:</p><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="8442" class="kt ku iq mz b gy nd ne l nf ng">6.14.8</span></pre><p id="3384" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">事实上，这是在命令行上检查大多数程序的常用技术。在不深入了解命令行语义的情况下，大多数(all？)您将在命令行上与之交互的程序可以处理-v标志，因此您几乎总是可以通过遵循以下格式来检查您安装的在命令行上使用的工具/程序是否正常工作:</p><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="cee6" class="kt ku iq mz b gy nd ne l nf ng">&lt;name of program&gt; -v</span></pre><p id="9794" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果一切顺利，你就可以开始下一步了。如果你收到这条信息:</p><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="10f4" class="kt ku iq mz b gy nd ne l nf ng">'node' is not recognized as an internal or external command,<br/>operable program or batch file.</span></pre><p id="01bf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你应该做的第一件事是检查你的路径变量，因为9/10次，这是这个错误的问题。为了让这篇文章尽可能的简短，我不会去解决这个问题，但是这是一个很常见的问题，很多人都在网上问过。一旦节点和NPM正常工作，我们就可以进入下一步了。</p><p id="cf7e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">第三步:创建一个新的项目文件夹</strong></p><p id="500f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您可以将项目文件夹放在电脑上的任意位置，并随意命名。这一步很容易。每个人都知道如何创建一个新的目录或文件夹，对吗？</p><p id="c2a9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">步骤4:在你的项目文件夹中开始运行NPM</strong></p><p id="ed27" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">好吧，那么NPM到底是什么？你可以去<a class="ae mt" href="https://docs.npmjs.com/about-npm" rel="noopener ugc nofollow" target="_blank">网站</a>亲自看看，但是对于刚刚学习Node的人来说，让它变得简单一点，一个包只不过是一个被设计来与你的Node应用一起工作的程序。当您需要您的web应用程序做一些事情、执行一些逻辑、操作一些数据或与互联网上其他地方的另一个服务通信时，您可以查找一个包，下载它，并将其添加到您的项目中，而不是自己在节点文件中编写所有代码。这并不是说使用NPM包总是很容易，通常仍然需要编写一些代码来创建节点项目和包中代码之间的接口，有时这些代码可能有点棘手。</p><p id="c3db" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是你如何开始在你的项目文件夹中运行NPM:</p><ul class=""><li id="7faf" class="mf mg iq jp b jq jr ju jv jy mh kc mi kg mj kk nh ml mm mn bi translated">打开终端</li><li id="76a5" class="mf mg iq jp b jq mo ju mp jy mq kc mr kg ms kk nh ml mm mn bi translated">更改目录，直到进入项目文件夹</li><li id="9fdd" class="mf mg iq jp b jq mo ju mp jy mq kc mr kg ms kk nh ml mm mn bi translated">在终端中运行命令<code class="fe ni nj nk mz b">npm init</code></li></ul><p id="dfc9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">此时，应该会提示您输入以下信息:</p><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="fbc6" class="kt ku iq mz b gy nd ne l nf ng">This utility will walk you through creating a package.json file.</span><span id="eeac" class="kt ku iq mz b gy nl ne l nf ng">It only covers the most common items, and tries to guess sensible defaults.</span><span id="c0e0" class="kt ku iq mz b gy nl ne l nf ng">See `npm help init` for definitive documentation on these fields</span><span id="b8e6" class="kt ku iq mz b gy nl ne l nf ng">and exactly what they do.</span><span id="9c31" class="kt ku iq mz b gy nl ne l nf ng">Use `npm install &lt;pkg&gt;` afterwards to install a package and</span><span id="4904" class="kt ku iq mz b gy nl ne l nf ng">save it as a dependency in the package.json file.</span></pre><p id="518e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下面应该是这样的:</p><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="71c2" class="kt ku iq mz b gy nd ne l nf ng">Press ^C at any time to quit.</span><span id="489f" class="kt ku iq mz b gy nl ne l nf ng">package name: (simple-node-server)</span></pre><p id="207e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">“package name:(simple-node-server)”这一行以及您将在此设置过程中看到的所有后续行首先说明它们需要什么变量(在本例中为<code class="fe ni nj nk mz b">package name</code>)，其右侧要么是括号中的内容，要么是空白。括号中的值是默认值，对于这些行中的每一行，您可以只按enter键接受默认值(也可以接受空白默认值)，或者您可以键入自己的值，然后按enter键。大多数刚刚起步的人坚持使用默认设置。</p><p id="7eb5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">关于这个设置需要知道的另一件事是，<code class="fe ni nj nk mz b">entry point</code>变量将是你的主服务器文件(在较大的项目中，通常有多个服务器文件，所以Node将使用入口点文件来启动应用程序，但是对于像这样的简单文件，我们只需要一个)。当我开始使用Node时，让我感到困惑的是开发人员给他们的主服务器文件起了不同的名字，我见过的最常见的是:</p><ul class=""><li id="d946" class="mf mg iq jp b jq jr ju jv jy mh kc mi kg mj kk nh ml mm mn bi translated">索引. js</li><li id="236e" class="mf mg iq jp b jq mo ju mp jy mq kc mr kg ms kk nh ml mm mn bi translated">app.js</li><li id="03b5" class="mf mg iq jp b jq mo ju mp jy mq kc mr kg ms kk nh ml mm mn bi translated">server.js</li></ul><p id="0248" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">主服务器文件的名称是任意的，这可能会引起混淆，因为您将与Node一起使用的一些服务希望服务器文件具有特定的名称和/或位于特定的位置。对于这个简单的服务器来说，这并不是非常重要，但是如果你开始看例子的话，一定要记住这一点。</p><p id="7864" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">完成后，终端应该如下所示:</p><figure class="mu mv mw mx gt nn gh gi paragraph-image"><div role="button" tabindex="0" class="no np di nq bf nr"><div class="gh gi nm"><img src="../Images/c8e6ba2a4a0cbd13155bddfc2812932e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*01Kt5VeX6pMqdnap0AzpzA.png"/></div></div></figure><p id="a2d3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您的项目文件夹中应该有一个名为package.json的文件，如下所示:</p><figure class="mu mv mw mx gt nn"><div class="bz fp l di"><div class="nt nu l"/></div></figure><p id="783b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">第五步:安装任何NPM软件包:</strong></p><p id="b7f5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">好了，现在我们已经将NPM连接到我们的项目，我们将使用命令行安装一个NPM包。您将在大多数节点服务器项目中使用这个特定的包。它被称为Express.js，它与Node本身同义，在大多数Node项目中，您实际上会使用Express中的对象和方法，这些对象和方法使运行常见的web开发过程(如路由、数据库集成、错误处理和使用前端模板)变得更加容易。</p><p id="72a0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们的根项目文件夹中的package.json文件保存了关于我们的应用程序的一些基本信息，但是package.json文件最常见的用途是保存我们下载并保存到我们的项目中的所有包的记录。这一点很重要，因为为了让我们的项目代码在其他环境中运行(例如，如果您正在与一个团队合作，或者您有一个开源项目，您希望其他人能够在他们自己的计算机上工作，或者如果您希望将它部署在亚马逊网络服务(AWS)、谷歌应用引擎(GAE)、Heroku或一些类似的服务上)，其他环境需要知道您的项目使用了哪些NPM包，以便可以下载和保存它们。package.json实际上做了很多不同的事情，但是现在，您只需要知道它保存了项目的基本信息，包括包。</p><p id="00db" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">简而言之，将包连接到我们的应用程序有两个部分:</p><ol class=""><li id="e781" class="mf mg iq jp b jq jr ju jv jy mh kc mi kg mj kk mk ml mm mn bi translated">从NPM下载/安装软件包</li><li id="9583" class="mf mg iq jp b jq mo ju mp jy mq kc mr kg ms kk mk ml mm mn bi translated">将包名和版本号保存在package.json中的“Dependencies”下</li></ol><p id="da72" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">要下载并安装一个NPM包到我们的项目中，在本例中是<code class="fe ni nj nk mz b">express</code>，我们将需要从您的终端运行下面的命令(当您运行这个命令时，确保您在项目的根文件夹中):</p><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="9598" class="kt ku iq mz b gy nd ne l nf ng">npm i -s express</span></pre><ul class=""><li id="ff7c" class="mf mg iq jp b jq jr ju jv jy mh kc mi kg mj kk nh ml mm mn bi translated"><code class="fe ni nj nk mz b">npm</code>是您正在运行的程序的名称</li><li id="b60b" class="mf mg iq jp b jq mo ju mp jy mq kc mr kg ms kk nh ml mm mn bi translated"><code class="fe ni nj nk mz b">-i</code>是<code class="fe ni nj nk mz b">--install</code>的简称，你可以使用其中任何一个。这将把<code class="fe ni nj nk mz b">express</code>添加到根项目文件夹中的一个名为<code class="fe ni nj nk mz b">node_modules</code>的文件夹中。需要注意的是，在第一个软件包安装NPM之前，这个文件夹不会添加到您的项目文件夹中。(这就是为什么您还没有在项目文件夹中看到它)。</li><li id="f8af" class="mf mg iq jp b jq mo ju mp jy mq kc mr kg ms kk nh ml mm mn bi translated"><code class="fe ni nj nk mz b">-s</code>是<code class="fe ni nj nk mz b">--save</code>的简写别名，你可以使用其中任何一个。这是一个可以添加到npm install命令中的标记，用于自动保存到package.json中。需要注意的是，如果您忘记了<code class="fe ni nj nk mz b">-s</code>或<code class="fe ni nj nk mz b">--save</code>，您可以手动将软件包名称和版本号添加到package.json中。无论如何，只要确保软件包名称和版本号在您的package.json中即可。</li></ul><figure class="mu mv mw mx gt nn gh gi paragraph-image"><div role="button" tabindex="0" class="no np di nq bf nr"><div class="gh gi nv"><img src="../Images/87c1433a46a071d72f5d7ae193bbc888.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*L-A4jgG4P2bgdYca0guC3w.gif"/></div></div><figcaption class="nw nx gj gh gi ny nz bd b be z dk translated">看到底。你看到了吗？Node自动将express添加到package.json，将node_modules文件夹添加到根文件夹。</figcaption></figure><p id="5e0f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">第六步:创建一个HTML文件</strong></p><p id="2f23" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这可能是创建项目文件夹之后第二简单的步骤。将扩展名为'的文件添加到文件夹中。“html”。一个常见的惯例是将主html文件命名为“index.html”，但这不是一个硬性规定，所以您可以随意命名。</p><p id="6856" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这就是你在html文件中所需要的，但是你可以随意把它做成你想要的任何类型的html页面:</p><figure class="mu mv mw mx gt nn"><div class="bz fp l di"><div class="nt nu l"/></div></figure><p id="8753" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">第七步:在项目文件夹中创建一个节点/JavaScript文件</strong></p><p id="4be9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在项目的根文件夹中，创建一个名为“index.js”的文件。对，没错，现在有一个文件叫‘索引’。html 和一个名为‘index’的文件。在你的根文件夹中。如果这令人困惑，您只需习惯它，事实上，一旦您知道了规则(更像是一个指南)，如果Node在启动您的服务器或呈现您的某个页面时遇到问题，它可以方便地进行调试。规则是:</p><blockquote class="oa ob oc"><p id="408f" class="jn jo kl jp b jq jr js jt ju jv jw jx od jz ka kb oe kd ke kf of kh ki kj kk ij bi translated"><a class="ae mt" href="https://nodejs.org/dist/latest-v7.x/docs/api/modules.html#modules_folders_as_modules" rel="noopener ugc nofollow" target="_blank">如果目录中没有package.json文件，那么Node.js将尝试从该目录中加载一个</a> <code class="fe ni nj nk mz b"><a class="ae mt" href="https://nodejs.org/dist/latest-v7.x/docs/api/modules.html#modules_folders_as_modules" rel="noopener ugc nofollow" target="_blank">index.js</a></code> <a class="ae mt" href="https://nodejs.org/dist/latest-v7.x/docs/api/modules.html#modules_folders_as_modules" rel="noopener ugc nofollow" target="_blank">或</a> <code class="fe ni nj nk mz b"><a class="ae mt" href="https://nodejs.org/dist/latest-v7.x/docs/api/modules.html#modules_folders_as_modules" rel="noopener ugc nofollow" target="_blank">index.node</a></code> <a class="ae mt" href="https://nodejs.org/dist/latest-v7.x/docs/api/modules.html#modules_folders_as_modules" rel="noopener ugc nofollow" target="_blank">文件。</a></p></blockquote><p id="6ac6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">许多前端框架，从Handlebars之类的模板引擎到React之类的JavaScript框架，都利用了这一点，在某些文件夹中寻找index.js文件作为特定目录的入口点。</p><p id="ac1f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">无论如何，如果你对服务器实际上是如何工作的一无所知，这里有一些关于服务器工作的最基本的东西:</p><ol class=""><li id="f8d1" class="mf mg iq jp b jq jr ju jv jy mh kc mi kg mj kk mk ml mm mn bi translated">打开端口以侦听来自客户端的传入请求</li><li id="d2f9" class="mf mg iq jp b jq mo ju mp jy mq kc mr kg ms kk mk ml mm mn bi translated">定义如何处理每个进来的请求(服务器的响应)</li></ol><p id="fd60" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是对被恰当地称为请求-响应循环的最简单的描述，也是互联网主要是如何工作的。因此，我们需要设置我们的服务器来做到这一点。</p><p id="8938" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在Node/Express应用程序中，这是以某种方式完成的:</p><ol class=""><li id="5f6c" class="mf mg iq jp b jq jr ju jv jy mh kc mi kg mj kk mk ml mm mn bi translated">导入我们刚刚安装的Express依赖项。</li><li id="4f2e" class="mf mg iq jp b jq mo ju mp jy mq kc mr kg ms kk mk ml mm mn bi translated">实例化(即创建一个实例)Express app对象。这个app对象有一大堆内置的方法和变量，您可以将它们用于您的服务器，您马上就会看到其中的两个。</li><li id="970e" class="mf mg iq jp b jq mo ju mp jy mq kc mr kg ms kk mk ml mm mn bi translated">将端口号保存在变量中。这在该应用中是可选的，但当你开始与他人开发应用并将你的应用部署到一些基于云的服务时，你会想要添加一些逻辑，以便你的应用可以确定它在什么样的环境中工作并使用适当的端口。</li><li id="6116" class="mf mg iq jp b jq mo ju mp jy mq kc mr kg ms kk mk ml mm mn bi translated">设置路由，在这种情况下只有一个，它的工作是在应用程序的根目录('/')接收任何请求，并通过向客户端的浏览器发送HTML文件进行响应。同样，如果您在任何大型节点应用程序上工作，您将有多个路由，并且通常是完全独立的路由器文件，每个都有自己的多个路由，连接到您的主服务器文件。</li><li id="cf58" class="mf mg iq jp b jq mo ju mp jy mq kc mr kg ms kk mk ml mm mn bi translated">最后，我们需要为服务器设置监听端口。这是等待传入连接的文件，在Express应用程序中，它总是在文件的末尾。</li></ol><p id="4168" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">好吧，你是这样做的:</p><ol class=""><li id="0090" class="mf mg iq jp b jq jr ju jv jy mh kc mi kg mj kk mk ml mm mn bi translated">要将依赖项导入到节点文件中，需要遵循以下格式:</li></ol><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="2166" class="kt ku iq mz b gy nd ne l nf ng">const &lt;variable-name&gt; = require('&lt;name-of-package&gt;');</span></pre><p id="e53b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这方面的一些要点:</p><ul class=""><li id="6f08" class="mf mg iq jp b jq jr ju jv jy mh kc mi kg mj kk nh ml mm mn bi translated"><code class="fe ni nj nk mz b">&lt;variable-name&gt;</code>是一个任意的名字，你想用什么就用什么，真的。但是，最佳实践是根据这些变量各自的依赖关系来命名它们。</li><li id="ab62" class="mf mg iq jp b jq mo ju mp jy mq kc mr kg ms kk nh ml mm mn bi translated"><code class="fe ni nj nk mz b">require()</code>是一个内置的节点函数，允许您访问另一个节点文件的代码。您可以将它用于您引入到节点服务器中的每个依赖项，您也可以编写自己的节点文件，并以同样的方式将它们导入到主服务器文件中。</li><li id="9803" class="mf mg iq jp b jq mo ju mp jy mq kc mr kg ms kk nh ml mm mn bi translated"><code class="fe ni nj nk mz b">&lt;name-of-package&gt;</code>应该是您希望导入的文件夹或文件的确切名称(如果您只是导入一个JavaScript文件，您可以关闭文件扩展名)。如果您要导入的是NPM包，您可以只使用package.json作为参考，因为package.json中列出的内容应该与您在节点服务器文件中需要的字符串相同。在我们的package.json中，依赖关系如下所示:</li></ul><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="554e" class="kt ku iq mz b gy nd ne l nf ng">"dependencies": {</span><span id="06c6" class="kt ku iq mz b gy nl ne l nf ng">   "express": "^4.17.1"</span><span id="4073" class="kt ku iq mz b gy nl ne l nf ng">}</span></pre><p id="3e63" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以，package.json说，' express '，我们的require()函数接受字符串，' express '。</p><p id="4767" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2.接下来，我们需要在Express中创建app对象的实例。如果你想用Node 构建应用程序，应用程序对象是你想要彻底理解的东西。我们像这样实例化它:</p><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="337e" class="kt ku iq mz b gy nd ne l nf ng">const app = express();</span></pre><ul class=""><li id="5f14" class="mf mg iq jp b jq jr ju jv jy mh kc mi kg mj kk nh ml mm mn bi translated">这只是运行您在上面的行中导入的依赖项，该依赖项导出一个app对象，该app对象保存到名为app的常量变量中。正是这个app对象保存了Express代码，并且您将与它进行最多的交互。</li></ul><p id="9075" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">3.这很简单，现在只需在变量port中保存一个端口号。3000到8000之间的任何数字的作品，大多数人都会选择3000或8000。</p><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="3990" class="kt ku iq mz b gy nd ne l nf ng">const port = 5000;</span></pre><p id="0ac7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">4.基于<a class="ae mt" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods" rel="noopener ugc nofollow" target="_blank"> HTTP方法</a>,<a class="ae mt" href="https://expressjs.com/en/4x/api.html#app.METHOD" rel="noopener ugc nofollow" target="_blank">app对象包含几个用于路由请求</a>的函数，这些函数中最常见的有:</p><ul class=""><li id="dbd6" class="mf mg iq jp b jq jr ju jv jy mh kc mi kg mj kk nh ml mm mn bi translated">app.get()</li><li id="6c83" class="mf mg iq jp b jq mo ju mp jy mq kc mr kg ms kk nh ml mm mn bi translated">app.post()</li><li id="5b88" class="mf mg iq jp b jq mo ju mp jy mq kc mr kg ms kk nh ml mm mn bi translated">app.put()</li><li id="f704" class="mf mg iq jp b jq mo ju mp jy mq kc mr kg ms kk nh ml mm mn bi translated">app.delete()</li><li id="ae89" class="mf mg iq jp b jq mo ju mp jy mq kc mr kg ms kk nh ml mm mn bi translated">app.use()</li><li id="e234" class="mf mg iq jp b jq mo ju mp jy mq kc mr kg ms kk nh ml mm mn bi translated">app.all()</li></ul><p id="3915" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我认为其中最常见的一个，也是我们现在要使用的一个，是app.get()，它用于get请求，是您每次访问网站时要做的事情。GET请求是互联网上最常见的一种请求，所以我们来看看app.get()。<a class="ae mt" href="https://expressjs.com/en/4x/api.html#app.get.method" rel="noopener ugc nofollow" target="_blank">快递单据给我们下了这个定义</a>:</p><blockquote class="oa ob oc"><p id="6f19" class="jn jo kl jp b jq jr js jt ju jv jw jx od jz ka kb oe kd ke kf of kh ki kj kk ij bi translated"><strong class="jp ir"> app.get(path，callback [，callback …]) </strong></p><p id="a10d" class="jn jo kl jp b jq jr js jt ju jv jw jx od jz ka kb oe kd ke kf of kh ki kj kk ij bi translated">使用指定的回调函数将HTTP GET请求路由到指定的路径。</p></blockquote><p id="b929" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">他们给了我们一个例子:</p><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="0dc5" class="kt ku iq mz b gy nd ne l nf ng">app.get('/', function (req, res) {<br/>  res.send('GET request to homepage')<br/>})</span></pre><p id="372b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因此我们可以看到，从定义中我们应该期望app.get()接受两个参数，<em class="kl">路径</em>和任何<em class="kl">回调函数</em>。在示例中，我们可以看到有两个参数:</p><ul class=""><li id="70df" class="mf mg iq jp b jq jr ju jv jy mh kc mi kg mj kk nh ml mm mn bi translated"><code class="fe ni nj nk mz b">'/'</code> =路径</li><li id="c6e5" class="mf mg iq jp b jq mo ju mp jy mq kc mr kg ms kk nh ml mm mn bi translated"><code class="fe ni nj nk mz b">function (req, res) { res.send('GET request to homepage')}</code> =回调函数</li></ul><p id="4cb0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这个例子中，只有一个回调函数，但是可能有一大堆回调函数。在Express中，他们称这些为中间件，因为它们被插入到您的路由中间，介于服务器收到客户端请求和服务器发回响应之间。此外，在较大的节点项目中，中间件功能的数量可能会变得相当大，并且路由通常具有多个中间件功能。也有许多NPM包，您可以在您的节点项目中使用，它们被编写为像中间件一样使用。<a class="ae mt" href="https://expressjs.com/en/guide/using-middleware.html" rel="noopener ugc nofollow" target="_blank">的确，这就是全部的表达，真的</a>:</p><blockquote class="oa ob oc"><p id="e6f9" class="jn jo kl jp b jq jr js jt ju jv jw jx od jz ka kb oe kd ke kf of kh ki kj kk ij bi translated">Express是一个路由和中间件web框架，它本身的功能很少:Express应用程序本质上是一系列中间件函数调用。</p></blockquote><p id="bf50" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在Express中，许多中间件将在其他地方定义，并以其名称传递给路由函数，但路由函数中的最后一个回调函数通常看起来像本例中的函数，您应该知道这一点:</p><ul class=""><li id="c121" class="mf mg iq jp b jq jr ju jv jy mh kc mi kg mj kk nh ml mm mn bi translated">它有两个参数:req和res。这些是内置对象，可以帮助您在新的请求-响应周期中做很多有趣的事情，Express希望它们出现在它们的中间件功能中。目前，我们没有使用req对象，但是如果您的应用程序有输入或url编码的数据(在url中传递给服务器的东西)，您可以使用req对象访问这些信息。res对象是当您的服务器发送响应时您将使用的对象。值得注意的是，您实际上不需要将它们命名为req和res，Express将使用您使用的任何名称来代替req和res，但是文档中所有的内容都引用了req和res，并且绝大多数节点服务器都遵循这一约定，所以我也会这样做。</li><li id="4c6b" class="mf mg iq jp b jq mo ju mp jy mq kc mr kg ms kk nh ml mm mn bi translated">它实际上与大多数被认为是中间件的东西略有不同，因为它没有下一个参数，大多数中间件用它来告诉Express继续到下一个中间件。当这个函数调用res.sendFile()时，这是请求-响应周期的结束，服务器完成了该请求。</li></ul><p id="d07e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你想了解更多关于res.sendFile()，<a class="ae mt" href="https://expressjs.com/en/4x/api.html#res.sendFile" rel="noopener ugc nofollow" target="_blank">去阅读文档</a>，但是现在只知道</p><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="d96e" class="kt ku iq mz b gy nd ne l nf ng">res.sendFile('&lt;file-name&gt;', {root: __dirname});</span></pre><p id="b3e3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">是如何从服务器文件(index.js)所在的同一文件夹(根目录)中发送文件。</p><p id="6ea2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">5.最后，我们希望设置服务器知道的代码来监听传入的请求。Express中的app对象有一个名为app.listen()的函数，所有参数都是可选的，包括端口号。然而，通常你至少会看到一个端口号，而且经常会看到一个回调函数被传递。我在应用程序中使用的app.listen()的完整版本是:</p><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="f90b" class="kt ku iq mz b gy nd ne l nf ng">app.listen(port, () =&gt; {<br/>    console.log(`Now listening on port ${port}`);<br/>}); </span></pre><p id="6c5a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">好的，让我们把这个分解，然后我们可以把它包起来。</p><ul class=""><li id="a67d" class="mf mg iq jp b jq jr ju jv jy mh kc mi kg mj kk nh ml mm mn bi translated">是我们在index.js文件顶部定义的同一个端口吗</li><li id="eeee" class="mf mg iq jp b jq mo ju mp jy mq kc mr kg ms kk nh ml mm mn bi translated">是一个箭头函数，它做的事情和JavaScript中的常规函数完全一样，只是看起来更干净一点。</li><li id="af17" class="mf mg iq jp b jq mo ju mp jy mq kc mr kg ms kk nh ml mm mn bi translated"><code class="fe ni nj nk mz b">console.log()</code>可能是您以前见过的，但是如果没有，这一行将会把提供给它的字符串打印到控制台上。</li></ul><p id="e9cb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">总的来说，index.js文件应该如下所示:</p><figure class="mu mv mw mx gt nn"><div class="bz fp l di"><div class="nt nu l"/></div></figure><p id="d867" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">步骤8:启动节点服务器</strong></p><p id="1ab9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是它的编码部分。下一步是实际启动服务器！您可以通过打开终端并运行以下命令来实现:</p><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="df09" class="kt ku iq mz b gy nd ne l nf ng">node index.js</span></pre><p id="21ad" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您应该看到您的console.log消息出现在您的控制台中，带有您告诉它使用的任何端口号。</p><figure class="mu mv mw mx gt nn gh gi paragraph-image"><div role="button" tabindex="0" class="no np di nq bf nr"><div class="gh gi nv"><img src="../Images/b232005158dcb46f03b1d58225c26410.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Oqa--bT2xy4bNeErxLWxpA.gif"/></div></div></figure><p id="33de" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">第九步:访问你的(本地)网站！</p><p id="1188" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">剩下唯一要做的就是去你的网站。您的站点托管在您给定的端口上的本地主机上。打开浏览器，使用以下网址:</p><pre class="mu mv mw mx gt my mz na nb aw nc bi"><span id="b7a5" class="kt ku iq mz b gy nd ne l nf ng">localhost:&lt;port number&gt;</span></pre><p id="b381" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您应该可以获得HTML页面中包含的所有内容！恭喜你，你主持了你的第一个节点网站！</p></div><div class="ab cl km kn hu ko" role="separator"><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr"/></div><div class="ij ik il im in"><p id="1465" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你觉得这个教程怎么样？您是否能够按照所有步骤操作，并在本地运行一个简单的html页面？有什么术语令人困惑吗？它们是什么？请在评论中告诉我。</p></div><div class="ab cl km kn hu ko" role="separator"><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr"/></div><div class="ij ik il im in"><h1 id="191b" class="og ku iq bd kv oh oi oj ky ok ol om lb on oo op le oq or os lh ot ou ov lk ow bi translated">分级编码</h1><p id="a73f" class="pw-post-body-paragraph jn jo iq jp b jq ox js jt ju oy jw jx jy oz ka kb kc pa ke kf kg pb ki kj kk ij bi translated">感谢您成为我们社区的一员！在你离开之前:</p><ul class=""><li id="43e7" class="mf mg iq jp b jq jr ju jv jy mh kc mi kg mj kk nh ml mm mn bi translated">📰查看<a class="ae mt" href="https://levelup.gitconnected.com/?utm_source=pub&amp;utm_medium=post" rel="noopener ugc nofollow" target="_blank">级编码出版物</a>中的更多内容</li><li id="3828" class="mf mg iq jp b jq mo ju mp jy mq kc mr kg ms kk nh ml mm mn bi translated">🔔关注我们:<a class="ae mt" href="https://twitter.com/gitconnected" rel="noopener ugc nofollow" target="_blank">推特</a> | <a class="ae mt" href="https://www.linkedin.com/company/gitconnected" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a> | <a class="ae mt" href="https://newsletter.levelup.dev" rel="noopener ugc nofollow" target="_blank">时事通讯</a></li></ul><p id="b939" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">🚀👉<a class="ae mt" href="https://jobs.levelup.dev/talent/welcome?referral=true" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir">将像你这样的开发人员安置在顶级创业公司和科技公司</strong> </a></p><div class="lm ln gp gr lo lp"><a href="https://jobs.levelup.dev/talent/welcome?referral=true" rel="noopener  ugc nofollow" target="_blank"><div class="lq ab fo"><div class="lr ab ls cl cj lt"><h2 class="bd ir gy z fp lu fr fs lv fu fw ip bi translated">升级—转变技术招聘</h2><div class="lw l"><h3 class="bd b gy z fp lu fr fs lv fu fw dk translated">升级—转变技术招聘🔥使软件工程师能够找到完美的角色…</h3></div><div class="lx l"><p class="bd b dl z fp lu fr fs lv fu fw dk translated">作业. levelup.dev</p></div></div><div class="ly l"><div class="lz l ma mb mc ly md me lp"/></div></div></a></div></div></div>    
</body>
</html>