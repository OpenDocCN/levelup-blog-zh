<html>
<head>
<title>How I made a fluid layout component — WotW</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我如何制作一个流体布局组件——WotW</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-i-made-a-fluid-layout-component-wotw-eccd17966066?source=collection_archive---------0-----------------------#2018-05-10">https://levelup.gitconnected.com/how-i-made-a-fluid-layout-component-wotw-eccd17966066?source=collection_archive---------0-----------------------#2018-05-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/29c8f88c8b5c21d840d81e13ba44d7a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*_tnaFm9dRiVJLpep.jpeg"/></div></div></figure><p id="ac09" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">欢迎来到“每周小部件”系列，在这里我拍摄了令人敬畏的UI/UX组件的gif或视频，并用代码将它们赋予生命。</p><blockquote class="kw kx ky"><p id="5ee0" class="jy jz kz ka b kb kc kd ke kf kg kh ki la kk kl km lb ko kp kq lc ks kt ku kv ij bi translated">查看本周所有的<a class="ae ld" rel="noopener ugc nofollow" target="_blank" href="https://levelup.gitconnected.com/wotw/home"> Widget文章</a>，关注gitconnected，确保你不会错过任何一个Widget教程。</p></blockquote><p id="50be" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">今天我将做一个组件，当一个按钮被点击时，它改变一个两列布局的宽度。这个小工具的灵感来自<a class="ae ld" href="https://uimovement.com/ui/5303/vr-class/" rel="noopener ugc nofollow" target="_blank">这个提交</a>，看起来像这样:</p><figure class="lf lg lh li gt jr gh gi paragraph-image"><div class="gh gi le"><img src="../Images/650fd9f2c3c15ccae12818e6c02b242a.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/0*JC7lJOfRtRgDnr2N.gif"/></div></figure><h2 id="04aa" class="lj lk iq bd ll lm ln dn lo lp lq dp lr kj ls lt lu kn lv lw lx kr ly lz ma mb bi translated">准备</h2><p id="4396" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr mg kt ku kv ij bi translated">像我以前做的一样，我们将使用<a class="ae ld" href="https://vuejs.org/" rel="noopener ugc nofollow" target="_blank"> Vue.js </a>进行交互，使用<a class="ae ld" href="https://greensock.com/gsap" rel="noopener ugc nofollow" target="_blank"> GSAP平台</a>制作动画。如果你使用类似<a class="ae ld" href="http://codepen.io" rel="noopener ugc nofollow" target="_blank"> codepen </a>的东西，你可以在图书馆找到它们。</p><h2 id="bb27" class="lj lk iq bd ll lm ln dn lo lp lq dp lr kj ls lt lu kn lv lw lx kr ly lz ma mb bi translated">基本标记</h2><p id="6253" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr mg kt ku kv ij bi translated">对于此组件，我将简化其内容，我不会添加任何文本，我们将只使用左窗格、右窗格和操作按钮:</p><pre class="lf lg lh li gt mh mi mj mk aw ml bi"><span id="c2da" class="lj lk iq mi b gy mm mn l mo mp">&lt;div id="app"&gt;<br/>  &lt;div class="container"&gt;<br/>    &lt;div class="left-pane"&gt;&lt;/div&gt;<br/>    &lt;div class="right-pane"&gt;&lt;/div&gt;<br/>  &lt;/div&gt;<br/>  &lt;div class="action-btn"&gt;+&lt;/div&gt;<br/>&lt;/div&gt;</span></pre><p id="4153" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">不要被它的简单性所欺骗，因为这意味着CSS和JS将在今天承担重任。</p><h2 id="8116" class="lj lk iq bd ll lm ln dn lo lp lq dp lr kj ls lt lu kn lv lw lx kr ly lz ma mb bi translated">式样</h2><p id="8f50" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr mg kt ku kv ij bi translated">让我们开始对组件的各个部分进行样式化，但是首先要对HTML的主体进行一些初始的css设置:</p><pre class="lf lg lh li gt mh mi mj mk aw ml bi"><span id="0570" class="lj lk iq mi b gy mm mn l mo mp">body {<br/>  margin: 0;<br/>  padding: 0;<br/>}</span></pre><p id="e33d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，我们将在容器上定义一个高度，以使窗格具有一定的体积。在左侧窗格中，我们将使用纯色，在右侧窗格中，我们将设置一个居中的背景图像，覆盖整个窗格。对于图像，我将使用来自<a class="ae ld" href="https://placeimg.com/" rel="noopener ugc nofollow" target="_blank"> placeimg </a>的占位符，但它可以是您想要的任何内容:</p><pre class="lf lg lh li gt mh mi mj mk aw ml bi"><span id="093f" class="lj lk iq mi b gy mm mn l mo mp">.container {<br/>  height: 600px;<br/>}<br/>.left-pane {<br/>  display: inline-block;<br/>  background-color: #307490;<br/>  width: 30%;<br/>  height: 600px; /* should match containers height */<br/>}<br/>.right-pane {<br/>  display: inline-block;<br/>  width: 70%;<br/>  height: 100%;<br/>  height: 600px;/* should match containers height */<br/>  <br/>  background-image: url("https://placeimg.com/1000/600/nature");<br/>  background-size: cover;<br/>  background-repeat: no-repeat;<br/>  background-position: 50% 50%;<br/>}</span></pre><p id="9f60" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们现在有两个<code class="fe mq mr ms mi b">inline-blocks</code>，一个有<code class="fe mq mr ms mi b">30%</code>宽，另一个有<code class="fe mq mr ms mi b">70%</code>，所以它们应该并排，对吗？<br/>错了！它们看起来像这样:</p><figure class="lf lg lh li gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mt"><img src="../Images/ad283bacac3079accbcf96bc9a267c6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*TLOTJmdOydjcEZ4w.png"/></div></div></figure><p id="2105" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为什么会这样呢？<br/>信不信由你，由于我们自己的标记，两个窗格之间有一个小空间。基本上“30% +小空格+ 70%”大于“100%”，导致最后一个元素(右窗格)向下。但是这个空间到底在哪里呢？就在这里:</p><pre class="lf lg lh li gt mh mi mj mk aw ml bi"><span id="5f69" class="lj lk iq mi b gy mm mn l mo mp">&lt;div class="left-pane"&gt;&lt;/div&gt;<br/>    &lt;div class="right-pane"&gt;&lt;/div&gt;</span></pre><p id="6429" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">也许你看不到它，但它就在那里，让我把它拿掉，这样你就能明白我在说什么了:</p><pre class="lf lg lh li gt mh mi mj mk aw ml bi"><span id="78dd" class="lj lk iq mi b gy mm mn l mo mp">&lt;div class="left-pane"&gt;&lt;/div&gt;&lt;!-- this comment removes the space<br/>  --&gt;&lt;div class="right-pane"&gt;&lt;/div&gt;</span></pre><p id="eee8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在你看到了，如果你愿意，你可以把两个窗格放在同一行，但是我发现这种“注释”的方法更具可读性。</p><p id="97b5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在让我们来设计将改变布局的按钮。为此，我们需要它被定位<code class="fe mq mr ms mi b">absolute</code> ly，所以它可以在两个窗格的顶部，我也使用<code class="fe mq mr ms mi b">border-radius</code>使它成为一个圆形，一些规则有白色和居中的文本，最后<code class="fe mq mr ms mi b">cursor: pointer</code>，所以当悬停时它看起来可点击:</p><pre class="lf lg lh li gt mh mi mj mk aw ml bi"><span id="bcb0" class="lj lk iq mi b gy mm mn l mo mp">.action-btn {<br/>  position: absolute;<br/>  width: 50px;<br/>  height: 50px;<br/>  left: calc(30% - 25px); /* width of first pane - half circle */<br/>  top: 300px;<br/>  border-radius: 50%;<br/>  background: black;<br/>  color: white;<br/>  font-size: 40px;<br/>  text-align: center;<br/>  cursor: pointer;<br/>}</span></pre><p id="2c49" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们几乎完成了CSS方面的工作，我们只需要为转换做准备。我们的窗格将改变它们的宽度，所以我们需要一个动画:</p><pre class="lf lg lh li gt mh mi mj mk aw ml bi"><span id="5f28" class="lj lk iq mi b gy mm mn l mo mp">.right-pane, .left-pane {<br/>  transition: width 0.7s;<br/>}</span></pre><p id="ce35" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">最后，当它们打开时，我们将添加一个<code class="fe mq mr ms mi b">.open</code>类来改变它们的宽度，为此我们需要这两条规则:</p><pre class="lf lg lh li gt mh mi mj mk aw ml bi"><span id="e74c" class="lj lk iq mi b gy mm mn l mo mp">.left-pane.open {<br/>  width: 70%;<br/>}<br/>.right-pane.open {<br/>  width: 30%;<br/>}</span></pre><p id="47f4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在看起来好多了。</p><figure class="lf lg lh li gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mu"><img src="../Images/1d74ccb0d7cf495ceaa406971f06ca8e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*3L6tqdObdzg-f6rZ.png"/></div></div></figure><h2 id="e6b6" class="lj lk iq bd ll lm ln dn lo lp lq dp lr kj ls lt lu kn lv lw lx kr ly lz ma mb bi translated">互动</h2><p id="7a8e" class="pw-post-body-paragraph jy jz iq ka b kb mc kd ke kf md kh ki kj me kl km kn mf kp kq kr mg kt ku kv ij bi translated">为了开始对组件的行为进行编程，我们需要创建Vue实例。之后，我们将只声明一个名为<code class="fe mq mr ms mi b">open</code>的数据属性来跟踪我们窗格的状态，我们还声明一个方法<code class="fe mq mr ms mi b">toggle</code>来改变<code class="fe mq mr ms mi b">open</code>属性:</p><pre class="lf lg lh li gt mh mi mj mk aw ml bi"><span id="9b65" class="lj lk iq mi b gy mm mn l mo mp">new Vue({<br/>  el: '#app',<br/>  data: {<br/>    open: false,<br/>  },<br/>  methods: {<br/>    toggle () {<br/>      this.open = !this.open<br/>    }<br/>  }<br/>})</span></pre><p id="48c6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">很直接，对吧？现在我们需要将它绑定到我们的HTML上，这样它才能工作。我们将在两个窗格上添加一个类绑定，这样当<code class="fe mq mr ms mi b">open</code>属性为真时，就会添加<code class="fe mq mr ms mi b">open</code>类，然后将按钮click绑定到toggle方法，如下所示:</p><pre class="lf lg lh li gt mh mi mj mk aw ml bi"><span id="ebcd" class="lj lk iq mi b gy mm mn l mo mp">&lt;div id="app"&gt;<br/>  &lt;div class="container"&gt;<br/>    &lt;div class="left-pane" :class="{'open': open}"&gt;&lt;/div&gt;&lt;!-- this comment removes the space<br/>  --&gt;&lt;div class="right-pane" :class="{'open': open}"&gt;&lt;/div&gt;<br/>  &lt;/div&gt;<br/>  &lt;div @click="toggle" class="action-btn"&gt;+&lt;/div&gt;<br/>&lt;/div&gt;</span></pre><p id="7732" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果一切顺利，我们应该有我们的窗格动画时，点击按钮。</p><figure class="lf lg lh li gt jr gh gi paragraph-image"><div class="gh gi mv"><img src="../Images/dccc5dbf22bdef7ed0818bc0a4614de7.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/0*9h1Y7_ZB8NusBG-G.gif"/></div></figure><p id="6eaf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">棘手的部分来了，我们的按钮也需要动画来匹配我们之前看到的。为了能够直接引用我们的按钮，让我们以如下方式放置一个<code class="fe mq mr ms mi b">ref</code>:</p><pre class="lf lg lh li gt mh mi mj mk aw ml bi"><span id="4091" class="lj lk iq mi b gy mm mn l mo mp">...<br/>    &lt;div @click="toggle" ref="actionbtn" class="action-btn"&gt;+&lt;/div&gt;<br/>...</span></pre><p id="f069" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这样我们就可以在JS中引用<code class="fe mq mr ms mi b">actionbtn</code>。此时，我们的按钮一直是可点击的，为了避免双击，我们需要一个<code class="fe mq mr ms mi b">animating</code>数据属性来帮助我们只在按钮和窗格不活动时运行切换功能。</p><pre class="lf lg lh li gt mh mi mj mk aw ml bi"><span id="0d55" class="lj lk iq mi b gy mm mn l mo mp">//...<br/>  data: {<br/>    open: false,<br/>    animating: false<br/>  },<br/>  methods: {<br/>    toggle () {<br/>      if(this.animating) {<br/>        // avoid any action if button clicked when animated<br/>        return<br/>      }<br/>      <br/>      this.open = !this.open<br/>      this.animateButton()<br/>    }<br/>  }<br/>//...</span></pre><p id="3fe1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们刚刚在toggle方法中添加了一个动画按钮方法调用，所以让我们来创建它。在这里，我们将设置“动画”为“真”,然后使用TweenMax使我们的按钮消失:</p><pre class="lf lg lh li gt mh mi mj mk aw ml bi"><span id="40eb" class="lj lk iq mi b gy mm mn l mo mp">//... methods<br/>    animateButton () {<br/>      this.animating = true<br/><br/>      // animate out<br/>      const propsOut = {<br/>        scale: 0, // make it disappear<br/>        ease: Back.easeIn,<br/>        onComplete: this.animateIn // this function will be called when animation finishes<br/>      }<br/>      TweenMax.to(this.$refs.actionbtn, 0.2, propsOut)<br/>      <br/>    },</span></pre><p id="a9c7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在ease: Back.easeIn线上，我们声明我们将使用哪种动画，作为参考，你可以查看GSAP ease visualizer中所有可用的选项。还要注意我们用这个。$refs.actionbtn来引用我们的按钮并开始制作动画。我们在消失的动画结束后调用的animateIn函数非常相似，我们只需要一个计算的属性来知道我们的按钮根据打开状态应该出现在哪里:</p><pre class="lf lg lh li gt mh mi mj mk aw ml bi"><span id="44a4" class="lj lk iq mi b gy mm mn l mo mp">//... methods <br/>    animateIn () {<br/>      //set new position<br/>      TweenMax.set(this.$refs.actionbtn, this.actionBtnPosition)<br/>      <br/>      const propsIn = {<br/>        delay: 0.4,<br/>        scale: 1,<br/>        ease: Back.easeOut,<br/>      }<br/>      TweenMax.to(this.$refs.actionbtn, 0.2, propsIn)<br/>    },<br/>  }<br/>  computed: {<br/>    actionBtnPosition () {<br/>      const perc = this.open ? '70%' : '30%'<br/>      const top = this.open ? '200px' : '300px'<br/>      return {<br/>        top: top,<br/>        left: `calc(${perc} - 25px)` <br/>      }<br/>    },<br/>  }<br/>//...</span></pre><p id="4811" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">动画差不多准备好了，我们只需要把加号改成关闭符号。在我们的参考gif中，他们通过旋转按钮来做到这一点，我们也将这样做。</p><p id="7fa9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">就在让按钮出现的代码之后，我们需要添加一个改变旋转的补间。同样，当一切完成后，我们可以将“动画”设置回false，这样我们就可以再次单击该按钮:</p><pre class="lf lg lh li gt mh mi mj mk aw ml bi"><span id="abc9" class="lj lk iq mi b gy mm mn l mo mp">//... methods<br/>////... animateIn<br/>        const propsRotation = {<br/>        delay: 0.4,<br/>        rotation: this.actionBtnRotation,<br/>        onComplete: this.endedAnimating<br/>      }<br/>      TweenMax.to(this.$refs.actionbtn, 0.3, propsRotation)<br/>    },<br/>    endedAnimating () {<br/>      this.animating = false<br/>    }<br/>//... computed<br/>    actionBtnRotation () {<br/>      return this.open ? -135 : 0<br/>    }<br/>//...</span></pre><p id="5046" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">就这样，这就是最终的结果！</p><figure class="lf lg lh li gt jr"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="8ce1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你渴望更多，你可以检查其他WotW: <br/> <a class="ae ld" href="http://ederdiaz.com/blog/2018/04/25/how-to-make-an-animated-wizard-component-wotw/" rel="noopener ugc nofollow" target="_blank">向导</a> <br/> <a class="ae ld" href="http://ederdiaz.com/blog/2018/04/18/animated-card-slider-with-vue-gsap/" rel="noopener ugc nofollow" target="_blank">动画卡滑块</a> <br/> <a class="ae ld" href="http://ederdiaz.com/blog/2018/04/11/making-a-submit-button-with-loader-wotw/" rel="noopener ugc nofollow" target="_blank">提交按钮与加载器</a></p><p id="c5e7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">另外，如果你想看下周的某个小部件，可以在评论区发表。</p><p id="40f6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">下周见，关注<a class="ae ld" href="https://levelup.gitconnected.com" rel="noopener ugc nofollow" target="_blank"> gitconnected </a>获取每周小工具！</p></div><div class="ab cl my mz hu na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="ij ik il im in"><p id="0c31" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="kz">最初发表于</em><a class="ae ld" href="http://ederdiaz.com/blog/2018/05/09/how-i-made-a-fluid-layout-component-wotw/" rel="noopener ugc nofollow" target="_blank"><em class="kz">Eder díaz</em></a><em class="kz">。</em></p></div></div>    
</body>
</html>