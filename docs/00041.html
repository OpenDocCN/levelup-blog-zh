<html>
<head>
<title>A Beginner’s Guide to google-map-react</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">谷歌地图反应初学者指南</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/google-map-react-beginners-guide-85bb1a94b04a?source=collection_archive---------0-----------------------#2017-11-10">https://levelup.gitconnected.com/google-map-react-beginners-guide-85bb1a94b04a?source=collection_archive---------0-----------------------#2017-11-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/21c140e1513a7f6eb843aea6e793f2a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hdrr5ejHw-QtOvzXe6A8Uw.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">我的GoogleMapReact组件用于显示附近的药物滥用康复机构</figcaption></figure><p id="cca0" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">能够在React应用中使用Google Maps API不仅可以为您提供可靠的导航资源，还可以通过整合流畅的地图界面来改善整体用户体验。Google Map React做了很好的工作，让您可以访问Google Maps API，并展示JavaScript功能和表示。</p><p id="8a91" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">为什么我选择了<code class="fe ld le lf lg b">google-map-react</code>而不是<code class="fe ld le lf lg b">react-google-map</code>？我以前没有使用后者的经验，因此无法给出准确的评估，但我的一些“不幸”使用它的同学强烈要求我不要使用它。然而，谷歌地图React获得了好评！</p><h1 id="f306" class="lh li it bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">入门指南</h1><p id="e908" class="pw-post-body-paragraph kf kg it kh b ki mf kk kl km mg ko kp kq mh ks kt ku mi kw kx ky mj la lb lc im bi translated">你要做的第一件事是从Google API站点<a class="ae mk" href="https://developers.google.com/maps/get-started/" rel="noopener ugc nofollow" target="_blank">获取一个Google API密钥。</a></p><figure class="mm mn mo mp gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ml"><img src="../Images/b1a8add202c737e2219b6960bd1c29d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p7-EEEMrvIhG4sg-7P_RHg.png"/></div></div></figure><p id="1211" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我选择了Google Maps Javascript API，它让您能够根据自己的内容和功能定制地图组件。</p><p id="885a" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">抓住那个API键，我会在后面讲到它。但是现在您已经有了它，您可以继续下载项目中的<code class="fe ld le lf lg b">google-map-react-package</code>。</p><pre class="mm mn mo mp gt mq lg mr ms aw mt bi"><span id="c37f" class="mu li it lg b gy mv mw l mx my">npm install --save google-map-react</span></pre><p id="d4f6" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">在您成功地安装了这个包之后，您需要将它导入到您将在其中使用<code class="fe ld le lf lg b">GoogleMapReact</code>组件的组件中(以及任何<code class="fe ld le lf lg b">GoogleMapReact</code>属性，我很快就会谈到)。</p><pre class="mm mn mo mp gt mq lg mr ms aw mt bi"><span id="17be" class="mu li it lg b gy mv mw l mx my">import GoogleMapReact from 'google-map-react';</span></pre><p id="789f" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">首先，您应该设置一些<code class="fe ld le lf lg b">defaultProps</code>供您的地图组件使用。这不仅在地图等待接收您选择的任何数据时非常有用，而且实际上是必要的。如果您没有通过您的组件<code class="fe ld le lf lg b">defaultProps</code>，该组件将会中断，因为它没有所需的数据。</p><pre class="mm mn mo mp gt mq lg mr ms aw mt bi"><span id="9a59" class="mu li it lg b gy mv mw l mx my">static defaultProps = {<br/>   center: {lat: 40.73, lng: -73.93}, <br/>   zoom: 12<br/>}</span><span id="cfd0" class="mu li it lg b gy mz mw l mx my">//the center coordinates are NYC. I chose 12 as the zoom because it didn’t seem too far away or too close. The higher the number you choose, the more you zoom in on the map.</span></pre><p id="3353" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">除了<code class="fe ld le lf lg b">defaultProps</code>，你还需要一些其他的参数。以下是我用于我的<code class="fe ld le lf lg b">GoogleMapReact</code>组件的内容:</p><pre class="mm mn mo mp gt mq lg mr ms aw mt bi"><span id="6276" class="mu li it lg b gy mv mw l mx my">&lt;GoogleMapReact <br/>   defaultCenter={this.props.center}<br/>   center={this.state.center}<br/>   defaultZoom={this.props.zoom}<br/>   onChildMouseEnter={this.onChildMouseEnter}<br/>   onChildMouseLeave={this.onChildMouseLeave}<br/>/&gt;</span></pre><p id="5d5e" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我提供了<code class="fe ld le lf lg b">defaultCenter</code>，这是地图在接收到另一个改变中心的选项之前的中心位置(在我的例子中，是通过我的<code class="fe ld le lf lg b">currentUser</code>动作获得的当前位置)。我还是想维持原来的<code class="fe ld le lf lg b">defaultZoom</code>(用户可以通过点击地图上的加号和减号来放大和缩小)。那么<code class="fe ld le lf lg b">onChildMouseEnter</code>和<code class="fe ld le lf lg b">onChildMouseLeave</code>事件是与<code class="fe ld le lf lg b">GoogleMapReact</code>组件的悬停功能一致的功能。这样，我可以将鼠标悬停在每个标记上并显示设施名称。当悬停在每个标记上时，显示消失。</p><figure class="mm mn mo mp gt ju gh gi paragraph-image"><div class="gh gi na"><img src="../Images/861f9d927f11c653075829fdd417be2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:892/format:webp/1*3oqA4QzCfQ6Ub4XOlN1NAA.png"/></div></figure><p id="38ad" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">如果你不把这些函数传递给你的地图组件，它不会崩溃，但也不会有任何酷的悬停交互性。所以，是的，传下去。</p><p id="e5af" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">还记得之前的API密匙吗？是的，它也会成为一个道具。</p><pre class="mm mn mo mp gt mq lg mr ms aw mt bi"><span id="1845" class="mu li it lg b gy mv mw l mx my">&lt;GoogleMapReact  <br/>   <strong class="lg iu">bootstrapURLKeys={{<br/>      key: YOUR_API_KEY, <br/>      language: 'en'<br/>   }}</strong><br/>   defaultCenter={this.props.center}<br/>   center={this.state.center}<br/>   defaultZoom={this.props.zoom}<br/>   onChildMouseEnter={this.onChildMouseEnter}<br/>   onChildMouseLeave={this.onChildMouseLeave}<br/>&gt;&lt;/GoogleMapReact&gt;</span></pre><p id="39b6" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated"><code class="fe ld le lf lg b"><strong class="kh iu">bootstrapURLKeys</strong></code> <strong class="kh iu"> </strong>带两个花括号，因为它是一个对象道具，你有两个键/值:<code class="fe ld le lf lg b">key</code>指向你的API键(用引号括起来)，和默认语言(我用<code class="fe ld le lf lg b">‘en’</code>表示英语)。</p><p id="29a9" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">但是你怎么拿到马克笔呢？还是当前位置pin？嗯，我做的方法是我做了两个组件:<code class="fe ld le lf lg b">FacilityPin</code>和<code class="fe ld le lf lg b">CurrentPin</code>。</p><p id="e8e4" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">对于设施，我绘制了从商店获得的所有设施，并为每个设施制作了一个<code class="fe ld le lf lg b">FacilityPin</code>，传递了所有必要的道具。</p><pre class="mm mn mo mp gt mq lg mr ms aw mt bi"><span id="e0e6" class="mu li it lg b gy mv mw l mx my">const facilityPins = this.props.facilities.map((facility, index) ={<br/>   if (facility.latitude === null || facility.longitude === null){<br/>     return null<br/>   } else {<br/>     return &lt;FacilityPin <br/>             onClick={()=&gt;this.setPinAsCenter(facility)}<br/>             key={index} <br/>             onChildMouseEnter={this.onChildMouseEnter}<br/>             onChildMouseLeave={this.onChildMouseLeave} <br/>             handlePinClick={this.handleOnClick} <br/>             facility={facility}<br/>             hover={this.state.hover} <br/>             lat={facility.latitude} <br/>             lng={facility.longitude} <br/>            /&gt;<br/>   }<br/>}</span></pre><p id="b1da" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">如果设施由于任何原因具有不合法的纬度或经度(即，当在设施对象创建时地址在后端被错误地传递时)，那么我检查它们并忽略它们。没有别针！</p><figure class="mm mn mo mp gt ju"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="8885" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">附注:我在App中调用了对我的facilities API进行提取的操作，因此我只需进行一次提取，而无需重新加载。因此，只要您不重新加载页面，它就可以在我的组件中使用，无需等待时间！</p><p id="2f43" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我需要将鼠标功能传递给工具引脚，因为它们是我们将要悬停的组件。下面是我的<code class="fe ld le lf lg b">FacilityPin</code>组件的代码。</p><pre class="mm mn mo mp gt mq lg mr ms aw mt bi"><span id="9146" class="mu li it lg b gy mv mw l mx my">import React from 'react'<br/>import { Icon } from 'semantic-ui-react'</span><span id="22c5" class="mu li it lg b gy mz mw l mx my">const pinStyle={<br/>  borderRadius: '10px',<br/>  transform: 'matrix(-1, 0, 0, 1, 10, 0)'<br/>}</span><span id="729c" class="mu li it lg b gy mz mw l mx my">const FacilityPin = (props) =&gt; {<br/>    return(<br/>      &lt;div&gt;<br/>        &lt;Icon className="building icon" <br/>          size='big' <br/>          style={pinStyle} <br/>          onClick={props.onClick}<br/>         /&gt;<br/>      &lt;/div&gt;<br/>    )<br/>}</span><span id="ae6b" class="mu li it lg b gy mz mw l mx my">export default FacilityPin</span></pre><p id="9a65" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">至于<code class="fe ld le lf lg b">CurrentPin</code>，在这一点上它仅仅是表象。所以我传递给它一个文本对象，以及当前用户的纬度和经度。</p><pre class="mm mn mo mp gt mq lg mr ms aw mt bi"><span id="3cfb" class="mu li it lg b gy mv mw l mx my">{facilityPins}</span><span id="c1cf" class="mu li it lg b gy mz mw l mx my">&lt;CurrentPin<br/>  lat={this.props.current.lat}<br/>  lng={this.props.current.lng}<br/>  text={'You'}<br/>/&gt;</span></pre><p id="cda9" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">这里是<code class="fe ld le lf lg b">CurrentPin</code>组件的代码。</p><pre class="mm mn mo mp gt mq lg mr ms aw mt bi"><span id="2937" class="mu li it lg b gy mv mw l mx my">const iconStyle = {  <br/>    borderRadius: '100px',  <br/>    boxShadow: '3px 3px 1px #888888'<br/>} </span><span id="19e0" class="mu li it lg b gy mz mw l mx my">const CurrentPin = ({text}) =&gt; {  <br/>   return(<br/>      &lt;div&gt;<br/>        &lt;Icon name="user circle outline" <br/>         color='blue' <br/>         size='big' <br/>         style={iconStyle}<br/>        /&gt;      <br/>        {text} <br/>       &lt;/div&gt; <br/>    )<br/>}</span></pre><p id="8b4f" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">悬停时出现的信息框呢？是的，另一个组成部分。</p><pre class="mm mn mo mp gt mq lg mr ms aw mt bi"><span id="e633" class="mu li it lg b gy mv mw l mx my">{this.state.hover <br/>   ? &lt;InfoBox <br/>      onClick={()=&gt;{this.setPinAsCenter({<br/>                      lat: this.state.lat, <br/>                      lng: this.state.lng<br/>              })}<br/>      lat={this.state.lat}<br/>      lng={this.state.lng}<br/>      facility={this.state.facility}<br/>  : null<br/>}</span></pre><p id="8b13" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">请注意，该组件不包含在设施pin组件中。我一开始是这样做的，当你将鼠标悬停在其中一个设施上时，它会显示所有设施的信息框。只是一团糟。点击下面的链接查看GitHub Repo中的所有代码。</p><div class="nd ne gp gr nf ng"><a href="https://github.com/macro6461/mod-5-project-frontend/tree/master/src/components/facility" rel="noopener  ugc nofollow" target="_blank"><div class="nh ab fo"><div class="ni ab nj cl cj nk"><h2 class="bd iu gy z fp nl fr fs nm fu fw is bi translated">macro 6461/mod-5-项目-前端</h2><div class="nn l"><h3 class="bd b gy z fp nl fr fs nm fu fw dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="no l"><p class="bd b dl z fp nl fr fs nm fu fw dk translated">github.com</p></div></div></div></a></div><h1 id="e948" class="lh li it bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated"><strong class="ak">外卖</strong></h1><ol class=""><li id="2640" class="np nq it kh b ki mf km mg kq nr ku ns ky nt lc nu nv nw nx bi translated">从<a class="ae mk" href="https://developers.google.com/maps/get-started/" rel="noopener ugc nofollow" target="_blank">谷歌地图API站点</a>获取API密钥</li><li id="554d" class="np nq it kh b ki ny km nz kq oa ku ob ky oc lc nu nv nw nx bi translated">安装<a class="ae mk" href="https://www.npmjs.com/package/google-maps-react" rel="noopener ugc nofollow" target="_blank"> google-map-react npm包</a>(不是react-google-map)</li><li id="f5eb" class="np nq it kh b ki ny km nz kq oa ku ob ky oc lc nu nv nw nx bi translated">在地图组件中导入<code class="fe ld le lf lg b">GoogleMapReact</code></li><li id="6399" class="np nq it kh b ki ny km nz kq oa ku ob ky oc lc nu nv nw nx bi translated">确保给予适当的…支持(确保适当地包括适当的<code class="fe ld le lf lg b">defaultProps</code>——好吧，我就不说了)</li><li id="86f6" class="np nq it kh b ki ny km nz kq oa ku ob ky oc lc nu nv nw nx bi translated">任何想要出现在地图上的组件都需要用<code class="fe ld le lf lg b">&lt;GoogleMapReact&gt;&lt;/GoogleMapReact&gt;</code>包裹起来</li><li id="f9ab" class="np nq it kh b ki ny km nz kq oa ku ob ky oc lc nu nv nw nx bi translated"><code class="fe ld le lf lg b">GoogleMapReact</code>有很多有用的功能来提高地图的交互性</li><li id="1537" class="np nq it kh b ki ny km nz kq oa ku ob ky oc lc nu nv nw nx bi translated">定制(外观和功能)是一个主要的关键🔑</li></ol><p id="2f40" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我仍在探索<code class="fe ld le lf lg b">GoogleMapReact</code>的所有酷功能，但我希望这是一个有用的指南！还有大量有用的文档。(眨眨眼)</p></div><div class="ab cl od oe hx of" role="separator"><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi"/></div><div class="im in io ip iq"><p id="7ef3" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated"><a class="ae mk" href="https://matt-croak.medium.com/membership" rel="noopener"> <em class="ok">点击此处，将您的免费媒体会员升级为付费会员</em> </a> <em class="ok">，每月只需5美元，您就可以收到各种出版物上数千名作家的无限量无广告故事。这是一个附属链接，你的会员资格的一部分帮助我为我创造的内容获得奖励。谢谢大家！</em></p><h1 id="a6a0" class="lh li it bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">参考</h1><div class="nd ne gp gr nf ng"><a href="https://github.com/fullstackreact/google-maps-react" rel="noopener  ugc nofollow" target="_blank"><div class="nh ab fo"><div class="ni ab nj cl cj nk"><h2 class="bd iu gy z fp nl fr fs nm fu fw is bi translated">fullstackreact/谷歌地图-反应</h2><div class="nn l"><h3 class="bd b gy z fp nl fr fs nm fu fw dk translated">“如何编写Google Maps React组件”教程的配套代码</h3></div><div class="no l"><p class="bd b dl z fp nl fr fs nm fu fw dk translated">github.com</p></div></div><div class="ol l"><div class="om l on oo op ol oq jz ng"/></div></div></a></div><div class="nd ne gp gr nf ng"><a href="https://github.com/istarkov/google-map-react" rel="noopener  ugc nofollow" target="_blank"><div class="nh ab fo"><div class="ni ab nj cl cj nk"><h2 class="bd iu gy z fp nl fr fs nm fu fw is bi translated">伊斯塔科夫/谷歌地图反应</h2><div class="nn l"><h3 class="bd b gy z fp nl fr fs nm fu fw dk translated">通用谷歌地图反应组件，允许在谷歌地图上渲染反应组件</h3></div><div class="no l"><p class="bd b dl z fp nl fr fs nm fu fw dk translated">github.com</p></div></div><div class="ol l"><div class="or l on oo op ol oq jz ng"/></div></div></a></div><div class="nd ne gp gr nf ng"><a href="https://www.npmjs.com/package/google-map-react" rel="noopener  ugc nofollow" target="_blank"><div class="nh ab fo"><div class="ni ab nj cl cj nk"><h2 class="bd iu gy z fp nl fr fs nm fu fw is bi translated">谷歌地图反应</h2><div class="nn l"><h3 class="bd b gy z fp nl fr fs nm fu fw dk translated">同构的谷歌地图react组件，允许在谷歌地图上渲染react组件</h3></div><div class="no l"><p class="bd b dl z fp nl fr fs nm fu fw dk translated">www.npmjs.com</p></div></div><div class="ol l"><div class="os l on oo op ol oq jz ng"/></div></div></a></div><div class="nd ne gp gr nf ng"><a href="https://developers.google.com/maps/get-started/" rel="noopener  ugc nofollow" target="_blank"><div class="nh ab fo"><div class="ni ab nj cl cj nk"><h2 class="bd iu gy z fp nl fr fs nm fu fw is bi translated">开始使用谷歌地图APIs |谷歌开发者</h2><div class="nn l"><h3 class="bd b gy z fp nl fr fs nm fu fw dk translated">了解哪些API在你关心的平台上可用。为您的移动应用程序选择十几个APIs</h3></div><div class="no l"><p class="bd b dl z fp nl fr fs nm fu fw dk translated">developers.google.com</p></div></div><div class="ol l"><div class="ot l on oo op ol oq jz ng"/></div></div></a></div></div></div>    
</body>
</html>