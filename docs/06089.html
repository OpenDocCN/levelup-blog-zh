<html>
<head>
<title>Extend The Lifespan of Your Raspberry Pi’s SD Card with log2ram</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用log2ram延长您的Raspberry Pisd卡的使用寿命</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/extend-the-lifespan-of-your-raspberry-pis-sd-card-with-log2ram-5929bf3316f2?source=collection_archive---------3-----------------------#2020-10-26">https://levelup.gitconnected.com/extend-the-lifespan-of-your-raspberry-pis-sd-card-with-log2ram-5929bf3316f2?source=collection_archive---------3-----------------------#2020-10-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="6049" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Log2ram是将日志重定向到内存而不是SD卡的软件。下面是我如何在我的树莓Pi中使用它来延长我的SD卡的寿命。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/30507cf22be4173334da0d54d9362091.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*MZvlaCxMBhKZxOcq.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">最初发布于2020年10月24日<a class="ae ky" href="https://ikarus.sg/extend-sd-card-lifespan-with-log2ram/" rel="noopener ugc nofollow" target="_blank"> ikarus.sg </a></figcaption></figure><p id="d970" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我的<a class="ae ky" href="https://ikarus.sg/using-zram-to-get-more-out-of-your-raspberry-pi/" rel="noopener ugc nofollow" target="_blank">上一篇文章</a>中，我谈到了如何使用<em class="lv"> zram </em>免费从你的树莓Pi中挤出更多内存。在这篇文章中，我将讨论如何使用额外的压缩内存来延长Raspberry Pi上SD卡的寿命。</p><h2 id="b11c" class="lw lx it bd ly lz ma dn mb mc md dp me li mf mg mh lm mi mj mk lq ml mm mn mo bi translated">使用SD卡的绝妙设计</h2><p id="ec64" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li mr lk ll lm ms lo lp lq mt ls lt lu im bi translated">自从树莓Pi问世以来，市场上几乎所有的<em class="lv">单板电脑</em>(SBC)都纷纷效仿，使用SD卡作为操作系统的主要存储介质。</p><p id="680b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在我看来，这样做的主要好处是:</p><ol class=""><li id="8db4" class="mu mv it lb b lc ld lf lg li mw lm mx lq my lu mz na nb nc bi translated">在操作系统发生灾难性故障时，无需断开设备连接并将设备移至您的计算机进行重置或刷新</li><li id="fbbf" class="mu mv it lb b lc nd lf ne li nf lm ng lq nh lu mz na nb nc bi translated">SD卡的低价位支持在存储故障时廉价更换</li><li id="7adb" class="mu mv it lb b lc nd lf ne li nf lm ng lq nh lu mz na nb nc bi translated">更快的迭代学习和功能集切换，设备可以通过交换SD卡扮演完全不同的角色，这需要切换操作系统。<br/>例如:➡️媒体中心桌面更换➡️物联网中心</li></ol><h2 id="3e31" class="lw lx it bd ly lz ma dn mb mc md dp me li mf mg mh lm mi mj mk lq ml mm mn mo bi translated">当这种辉煌成为问题时</h2><p id="c29f" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li mr lk ll lm ms lo lp lq mt ls lt lu im bi translated">虽然SD卡的使用对于学习和小型个人项目非常有用，但由于树莓派基金会和所有其他SBC制造商之间的<em class="lv">规范军备竞赛</em>，现今的SBC已经<em class="lv">超越了它们最初的用例。</em></p><p id="1898" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">例如，在撰写本文时，我们看到的是带有8GB RAM选项的Raspberry Pi 4 Model B，这对于简单的物联网控制器来说太多了。因此，SBC市场正在缓慢但肯定地增长，超过其原始用例，这并不令人惊讶。</p><h2 id="6381" class="lw lx it bd ly lz ma dn mb mc md dp me li mf mg mh lm mi mj mk lq ml mm mn mo bi translated">我用单板机做什么</h2><p id="1881" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li mr lk ll lm ms lo lp lq mt ls lt lu im bi translated">我目前在11台SBC上为我的家人和密友(最多20个用户)运行自托管web服务，总共多达50个内核，23GB内存分布在两个集群上，<a class="ae ky" href="https://ikarus.sg/how-i-built-kraken/" rel="noopener ugc nofollow" target="_blank">北海巨妖</a>和利维坦。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ni"><img src="../Images/160cae7bcb81af54123e6c7e2835e039.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*KUWEda1gocF_06Il.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">我的Grafana仪表盘显示了我的集群的资源利用率</figcaption></figure><p id="f997" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是一个相当极端的例子，但是如果您的用例甚至与服务器的24/7运行有一点点联系，那么您肯定会在SD卡生命周期的某个时间点遇到可靠性问题。</p><h2 id="9df3" class="lw lx it bd ly lz ma dn mb mc md dp me li mf mg mh lm mi mj mk lq ml mm mn mo bi translated">SD卡的问题是</h2><p id="4c1f" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li mr lk ll lm ms lo lp lq mt ls lt lu im bi translated">SD卡在本质上与闪存盘和固态硬盘是一样的。所有3种存储解决方案都采用了我们所知的<em class="lv">基于NAND的闪存</em>来在没有电力的情况下保存数据。</p><p id="212d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">SD卡/闪存驱动器和更昂贵的固态硬盘之间的主要区别在于所使用的NAND闪存的底层技术。SD卡和闪存驱动器通常使用<strong class="lb iu"> MLC </strong> ( <em class="lv">多级单元</em>)技术，其中<em class="lv">多位(最多5位)信息</em>存储在<em class="lv">单个存储元件</em>中，而固态硬盘通常使用<strong class="lb iu"> SLC </strong> ( <em class="lv">单级单元</em>)技术，其中仅<em class="lv"> 1位信息</em>存储在<em class="lv">单个存储元件</em>中。这类似于房屋租赁。</p><h2 id="1c99" class="lw lx it bd ly lz ma dn mb mc md dp me li mf mg mh lm mi mj mk lq ml mm mn mo bi translated">公寓出租类比</h2><p id="e733" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li mr lk ll lm ms lo lp lq mt ls lt lu im bi translated">假设你拥有一栋有100套公寓的大楼。这栋建筑代表你的存储设备，公寓代表设备上的存储元素，租户代表你的数据。</p><h2 id="13c4" class="lw lx it bd ly lz ma dn mb mc md dp me li mf mg mh lm mi mj mk lq ml mm mn mo bi translated">SLC情景</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nj"><img src="../Images/cb7a02aa6e30b91ddab17e9e044766f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*CRXQyKMBVOgMasUy.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">新加坡的一室公寓(<a class="ae ky" href="https://www.royceresidences.cos.sg/" rel="noopener ugc nofollow" target="_blank">来源</a>)</figcaption></figure><p id="80ae" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你将每套公寓的最大入住人数设置为1人，那么这将导致租户的密度相对较低，而生活水平较高，因此人均成本较高，因为这栋建筑可能只能容纳100名租户。考虑到1个公寓总是对应1个租户，租户也可以快速定位。这种情况反映了固态硬盘中典型的NAND技术，基本上是优质、快速和可靠的存储。</p><h2 id="ac82" class="lw lx it bd ly lz ma dn mb mc md dp me li mf mg mh lm mi mj mk lq ml mm mn mo bi translated">MLC场景</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/16ce67fd47f387db155cae1927c828c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/0*MiyRyA0VJajlhbhi.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">九龙城寨中一栋人口密集的公寓大楼</figcaption></figure><p id="8829" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你将每套公寓的最大入住率提高到5人，那么租户的密度将会增加5倍。尽管这种<strong class="lb iu">将人均成本</strong>降低到早期情景的五分之一，允许你的建筑容纳500名租户，<strong class="lb iu">高密度</strong>公寓往往会有较低的生活水平<strong class="lb iu">。考虑到每个公寓可能住着多个房客，找到房客也更加麻烦。</strong></p><p id="e017" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最重要的是，高密度的公寓也导致犯罪率上升，这一点在香港的T42九龙城寨中可以得到证明，该城在1994年被拆除前是世界上人口最稠密的聚居地。这里的犯罪率可以被视为类似于<em class="lv">数据损坏率</em>。这种情况反映了闪存驱动器中典型的NAND技术，存储价格便宜，但速度慢，数据损坏的可能性更高。</p><h2 id="d4fd" class="lw lx it bd ly lz ma dn mb mc md dp me li mf mg mh lm mi mj mk lq ml mm mn mo bi translated">这一切意味着什么</h2><p id="61dc" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li mr lk ll lm ms lo lp lq mt ls lt lu im bi translated">与固态硬盘和其他存储介质相比，SD卡会更早地经历磨损<em class="lv">的影响，这是因为它们的存储技术需要更短的寿命，尤其是如果您的使用是写入密集型的。不幸的是，除了简单的预定脚本之外，几乎所有东西都有一个写繁重的组件，所以你会期望平均每2年<strong class="lb iu">更换一次你的Raspberry Pi上的SD卡</strong>。</em></p><p id="52e1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">然而，这并不意味着你的覆盆子就要完蛋了。</p><blockquote class="nl nm nn"><p id="cef6" class="kz la lv lb b lc ld ju le lf lg jx lh no lj lk ll np ln lo lp nq lr ls lt lu im bi translated">希望还是有的。</p></blockquote><h2 id="903c" class="lw lx it bd ly lz ma dn mb mc md dp me li mf mg mh lm mi mj mk lq ml mm mn mo bi translated">你好log2ram</h2><p id="2594" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li mr lk ll lm ms lo lp lq mt ls lt lu im bi translated">在典型的服务器中，大多数写操作不是来自资产本身，而是来自日志。来自linux内核、服务器守护进程、其工作进程以及您可能放在同一台机器上的其他软件的日志。</p><p id="d493" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Log2ram是一个linux软件，它将这种写入重定向到内存(ram)而不是磁盘(SD卡)。它通过从内存(<em class="lv"> ramdisk </em>)中留出的空间创建一个虚拟块设备，将现有的<code class="fe nr ns nt nu b">/var/log</code>目录移动到<code class="fe nr ns nt nu b">/var/log.hdd</code>，然后将ramdisk挂载到所有日志通常写入的<code class="fe nr ns nt nu b">/var/log</code>上。这样，记录到内存对所有应用程序都是透明的，因为它们仍然记录到同一个目录。</p><h2 id="90c2" class="lw lx it bd ly lz ma dn mb mc md dp me li mf mg mh lm mi mj mk lq ml mm mn mo bi translated">日志的持久性</h2><p id="0ff9" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li mr lk ll lm ms lo lp lq mt ls lt lu im bi translated">由于RAM是瞬时的，断电时其中的所有数据都会丢失，所以这些写入内存的日志最终也必须保存到磁盘上。Log2ram通过使用默认每天运行的<em class="lv"> cron作业</em>定期将<code class="fe nr ns nt nu b">/var/log</code>同步到<code class="fe nr ns nt nu b">/var/log.hdd</code>的磁盘来实现日志持久性。</p><h2 id="f4ec" class="lw lx it bd ly lz ma dn mb mc md dp me li mf mg mh lm mi mj mk lq ml mm mn mo bi translated">一句警告</h2><p id="cb6f" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li mr lk ll lm ms lo lp lq mt ls lt lu im bi translated">使用log2ram有一个缺点，在您的系统上实现它之前，您应该知道这一点。如果系统崩溃或断电，您可能会丢失崩溃前发生的事件的宝贵日志。</p><p id="42fa" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这是由于RAM的短暂性和使用log2ram时所需的持久性机制。崩溃/停机最有可能发生在将日志保存到磁盘的cron作业有机会运行之前，导致在1秒前<em class="lv"/>和早至<em class="lv">设置的同步频率</em>(默认为最后1天)之间的<em class="lv">日志</em>丢失。</p><p id="d5a0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果日志对你的设置绝对重要，我建议要么<em class="lv">完全跳过log2ram，要么设置一个非常频繁的同步间隔</em>(&lt;1小时)，尽管这严重限制了这项练习的好处。</p><h2 id="49fe" class="lw lx it bd ly lz ma dn mb mc md dp me li mf mg mh lm mi mj mk lq ml mm mn mo bi translated">安装log2ram</h2><p id="9402" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li mr lk ll lm ms lo lp lq mt ls lt lu im bi translated">现在客套话说完了，让我们把手弄脏吧。安装步骤与<a class="ae ky" href="https://ikarus.sg/using-zram-to-get-more-out-of-your-raspberry-pi/" rel="noopener ugc nofollow" target="_blank"> zram-swap-config </a>非常相似，原因我将在本文后面揭示。</p><p id="7e88" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">确保安装了git</strong></p><pre class="kj kk kl km gt nv nu nw nx aw ny bi"><span id="cffa" class="lw lx it nu b gy nz oa l ob oc">$ sudo apt-get install git</span></pre><p id="4391" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">克隆zram-swap-config库</strong></p><pre class="kj kk kl km gt nv nu nw nx aw ny bi"><span id="a3ef" class="lw lx it nu b gy nz oa l ob oc">$ git clone https://github.com/azlux/log2ram &amp;&amp; cd log2ram</span></pre><p id="ad62" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">安装zram-swap-config </strong></p><pre class="kj kk kl km gt nv nu nw nx aw ny bi"><span id="e2af" class="lw lx it nu b gy nz oa l ob oc">$ chmod +x install.sh &amp;&amp; sudo ./install.sh</span></pre><p id="19cf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">清理安装文件</strong></p><pre class="kj kk kl km gt nv nu nw nx aw ny bi"><span id="9648" class="lw lx it nu b gy nz oa l ob oc">$ cd .. &amp;&amp; rm -r log2ram</span></pre><h2 id="be5b" class="lw lx it bd ly lz ma dn mb mc md dp me li mf mg mh lm mi mj mk lq ml mm mn mo bi translated">配置log2ram</h2><p id="426f" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li mr lk ll lm ms lo lp lq mt ls lt lu im bi translated">log2ram安装时有相同的缺省值。但是为了外面的修补狂们，这里有一些你可以调整它的方法。</p><p id="ebc4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">编辑<code class="fe nr ns nt nu b">/etc/log2ram.conf</code>并根据您的喜好修改以下参数。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="ca9b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">到目前为止，您可能已经意识到我接下来要谈论的内容，但是为了那些度过了糟糕的一天或者正在经历高大脑延迟的人，下面是关于log2ram的更令人印象深刻的内容:</p><blockquote class="nl nm nn"><p id="0ab5" class="kz la lv lb b lc ld ju le lf lg jx lh no lj lk ll np ln lo lp nq lr ls lt lu im bi translated">Log2ram与zram相集成，用于节省空间的日志存储(😱！！！1111oneone)</p></blockquote><h2 id="798c" class="lw lx it bd ly lz ma dn mb mc md dp me li mf mg mh lm mi mj mk lq ml mm mn mo bi translated">好处:与zram集成</h2><p id="93e8" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li mr lk ll lm ms lo lp lq mt ls lt lu im bi translated">在我开始之前，对于不熟悉的人，我将花一点时间来解释为什么这是一件大事。</p><h2 id="e5b1" class="lw lx it bd ly lz ma dn mb mc md dp me li mf mg mh lm mi mj mk lq ml mm mn mo bi translated">这有什么了不起的？</h2><p id="61a4" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li mr lk ll lm ms lo lp lq mt ls lt lu im bi translated">文本数据和压缩总是密切相关的，因为压缩的工作原理是，文本，尤其是英文文本，是由相对较小的字符集(如果是ASCII，大约128个字符)的大量字符排列组成的单词和句子。从机器的角度来看，这是大量的重复。通过存储字符及其位置信息，我们可以节省大量空间，这就是压缩的本质。</p><p id="8750" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">日志是这种可压缩数据的一个很好的例子。随着CPU指令集的进步，压缩已经成为现代处理器中相对廉价的操作，因此压缩不仅节省了空间，而且性能成本非常低。</p><p id="6c93" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我在这里说的是，我们可以在为log2ram保留的内存中的<strong class="lb iu">相同数量的空间</strong>中存储多达<strong class="lb iu"> 5X的更多日志</strong>。客观来看，<strong class="lb iu">默认设置40M将允许200M的日志量</strong>，这个数字你可能永远不会在树莓Pi上看到。</p><h2 id="7658" class="lw lx it bd ly lz ma dn mb mc md dp me li mf mg mh lm mi mj mk lq ml mm mn mo bi translated">为zram-swap-config配置log2ram</h2><p id="a0a5" class="pw-post-body-paragraph kz la it lb b lc mp ju le lf mq jx lh li mr lk ll lm ms lo lp lq mt ls lt lu im bi translated">如果你还没有安装zram-swap-config，在继续阅读之前，请先参考我的<a class="ae ky" href="https://ikarus.sg/using-zram-to-get-more-out-of-your-raspberry-pi/" rel="noopener ugc nofollow" target="_blank">上一篇文章</a>来安装它。如果您已经这样做了，编辑<code class="fe nr ns nt nu b">/etc/log2ram.conf</code>并修改以下参数以适合您的系统。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="4367" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><code class="fe nr ns nt nu b">LOG_DISK_SIZE</code>配置的预期压缩比(<a class="ae ky" href="https://github.com/azlux/log2ram" rel="noopener ugc nofollow" target="_blank">来源</a>):</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="ec9d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一旦你完成了log2ram的配置，<strong class="lb iu">重启你的Raspberry Pi </strong>，你就一切就绪了。</p><h2 id="c56c" class="lw lx it bd ly lz ma dn mb mc md dp me li mf mg mh lm mi mj mk lq ml mm mn mo bi translated">我的配置为Raspbian对树莓派3B</h2><pre class="kj kk kl km gt nv nu nw nx aw ny bi"><span id="bdec" class="lw lx it nu b gy nz oa l ob oc">SIZE=100M<br/>USE_RSYNC=false<br/>MAIL=true<br/>PATH_DISK="/var/log"<br/>ZL2R=true<br/>COMP_ALG=lz4<br/>LOG_DISK_SIZE=400M</span></pre><p id="cd1e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我的log2ram配置文件</p><ul class=""><li id="891e" class="mu mv it lb b lc ld lf lg li mw lm mx lq my lu of na nb nc bi translated"><code class="fe nr ns nt nu b">SIZE</code>设置为100米，因为我正在运行Kubernetes，我倾向于每个节点平均有10个pod。ramdisk在较低的值下会耗尽空间。</li><li id="1502" class="mu mv it lb b lc nd lf ne li nf lm ng lq nh lu of na nb nc bi translated"><code class="fe nr ns nt nu b">COMP_ALG</code>被设置为与<em class="lv"> zram-swap-config </em>中使用的相同的压缩算法，其本身受到系统可用性的限制。</li><li id="c066" class="mu mv it lb b lc nd lf ne li nf lm ng lq nh lu of na nb nc bi translated"><code class="fe nr ns nt nu b">LOG_DISK_SIZE</code>设置为400M，估计真实世界的压缩比为4.00。这明显高于上述理论比率，因为它们是从压缩混合数据中获得的，而在这种情况下，我们只压缩文本，而文本恰好是<em class="lv">非常可压缩的</em>。</li></ul><p id="6f39" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">就这样，你现在再也不用担心那些讨厌的SD卡寿命缩短了。享受你对你的树莓派的新的信心吧！</p></div><div class="ab cl og oh hx oi" role="separator"><span class="oj bw bk ok ol om"/><span class="oj bw bk ok ol om"/><span class="oj bw bk ok ol"/></div><div class="im in io ip iq"><p id="4291" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最初发表于2020年10月24日<a class="ae ky" href="https://ikarus.sg/extend-sd-card-lifespan-with-log2ram/" rel="noopener ugc nofollow" target="_blank"> ikarus.sg </a>。</p></div></div>    
</body>
</html>