# 如何成为一个真正的毕加索

> 原文：<https://levelup.gitconnected.com/how-to-become-a-true-react-picasso-4b99a0ed40c>

## 作为艺术家在 React 中使用图像

![](img/0b5f9586562cdbb574227ddff1b1f2f7.png)

[Ari 何](https://unsplash.com/@talescrow?utm_source=medium&utm_medium=referral)在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍照

我经常发现自己想知道在 React 应用程序中在哪里存储以及如何显示图像，尤其是当我开始一个新项目时。我决定做一点研究，列出我在这篇文章中学到的一切。我希望你准备好了，因为我们就要开始了。

# 如何在 React 应用程序中存储图像

**在 react 应用程序中存储图像有 3 种主要方法:**

*   `src`文件夹——存储在此目录中的图像将包含在最终的包中。此外，它们还有额外的好处，可以作为 JavaScript 模块导入。
*   `public``public`目录下的文件夹文件不会被 Webpack 处理。它们不会成为最终捆绑包的一部分。
*   外部服务器—图像也可以存储在外部服务器上，如 [S3](https://www.upbeatcode.com/where-to-store-images-in-react-app/Amazon%20S3%20-%20Free%20Secure%20Cloud%20Storage) 或 [Cloudinary](https://cloudinary.com/) ，并从 react 应用程序中引用。

要了解每种方法的优缺点，我们必须分别仔细研究每种方法。

## 将图像存储在源目录中

将图像保存在`src`目录中是一个很好的解决方案，通常鼓励使用它来代替静态文件服务。大多数 react 开发者倾向于将他们的图片存储在`src/assets`文件夹中。在 React 中，您可以将图像作为存储在 JavaScript 对象中的数据属性导入。这些数据属性可以在组件中的任何地方访问。

**优点**

*   所有的图像都由 Webpack 处理，因此我们可以提供进一步的优化
*   如果图像内容由于 Webpack 哈希而发生了很大变化，这种方法很好
*   使用图像作为 javascript 模块的可能性

**缺点**

*   图像的动态导入可能会导致问题

## 将图像作为静态资产

静态资产，如图像、脚本和视频，是储存在网站服务器上并提供给用户的文件。静态图像可以显示在网站上，而不需要任何额外的资源。这些资源可以是 JavaScript、Flash 或其他浏览器插件。

**优点**

*   该文件与主应用程序位于同一服务器上，这可以提高性能
*   易于动态加载文件

**缺点**

*   不由 Webpack 处理，因此我们无法执行优化
*   如果内容因为缓存而改变，我们需要改变图像的名称
*   缺少的文件在编译时不会被调用，并将导致 404 错误

## 在外部服务器上存储图像

第三种选择是使用外部服务，如 Cloudinary 或亚马逊 S3。Cloudinary 或 S3 都是为开发者处理图像托管的服务。使用这些服务，我们可以专注于编码，而不必担心存储和处理图像。

**优点**

*   图像管理由专门的服务处理
*   优化的 CDN 以尽可能快的速度提供图像

**缺点**

*   不适合预算低的项目
*   如果内容因为浏览器缓存而改变，我们需要改变图像的名称。

现在我们知道了如何存储图像，让我们看看如何更有效地显示它们。

GIF by [Giphy](https://giphy.com/)

# 延迟加载图像

延迟加载图像是 web 开发中使用的一种技术，用于保存数据和提高加载速度。它提高了任何网站的性能，并使其在管理资源方面更加出色。延迟加载图像有两个步骤:

*   动态生成一个`img`标签的`src`属性，以便在图像在浏览器中可见之前不设置它
*   设置`img`的`src`属性何时应该设置为给定值的规则。在大多数情况下，此规则设置为图像进入浏览器的视口。

社交媒体网站经常使用惰性加载技术，这样他们就不会一次加载所有的图片。这将允许他们用更吸引人的布局展示他们的网站，同时为用户节省时间和带宽。现在我们知道了什么是惰性加载，让我们看看如何在我们心爱的 React 中实现它。

## 在 React 中延迟加载图像

React 中的延迟加载图像可以通过使用**intersect observer API**来完成。这个 API 提供了一种异步方式来观察 web 页面上的变化，并让您知道元素何时超过了给定的阈值。换句话说，我们可以监视元素何时进入或离开视口。所以我们可以加载一个图像或任何其他资源。

为了实现这种行为，我们可以利用一个名为 [react-lazyload](https://www.npmjs.com/package/react-lazyload) 的强大库。在`react-lazyload`的帮助下，图像只有出现在用户眼前时才会被加载。它通过监听窗口滚动事件并检查浏览器视窗中是否有新图像出现来工作。为了避免不必要的像素化或不必要的内存使用，该库确保图像在加载之前是可见的。

用法很简单。我们所需要做的就是用`LazyLoad`组件包装`img`，一切都开箱即用。

# 渐进加载图像

渐进式图像加载是一种先显示低分辨率图像的技术。然后逐渐用同一图像的更高分辨率版本替换它。使用渐进式图像加载的一个原因是需要节省带宽，但它也允许查看者在以全分辨率加载图像之前快速预览图像。

虽然这种技术通常用于 PNG 或 JPEGs 等图像格式。它也可以用于动画 gif，其中动画将首先以低分辨率显示，然后由更高分辨率的帧替换。

## React 中的渐进加载

渐进式图像加载可以用几行代码完成。但是也有 React 可用的库，如 [react-progressive-image](https://www.npmjs.com/package/react-progressive-image) 可以尽可能轻松地为我们完成所有工作。该模块是 React 应用程序中渐进式图像加载的常用选择。它提供了一个接受`src`和`placeholder`属性的高阶组件。

上面的例子将最初显示`placeholder`，在大多数情况下，它是原始图像的一个非常小的版本。浏览器加载它的速度会比原始图像快得多。然而，我们仍然需要从服务器加载占位符。为了省去我们这个麻烦，我们可以直接用 [base64](https://en.wikipedia.org/wiki/Base64) 编码的图像作为`placeholder`。

# 动态导入图像

在本节中，我们将学习如何在 React 中动态导入图像。在我的开发生涯中，我多次面临这个问题。我也看到其他人也在为此挣扎。

为了在 React 应用程序中使用图像，我们需要首先导入它。所以我们要解决的问题很简单。怎样才能动态导入东西？信不信由你，解决方法也很简单。我们需要做的就是实现一个组件，它将文件名作为一个`prop`。并返回将`src`设置为给定图像的`img`元素。

该组件采用该文件的名称，并尝试导入它。如果给定名称的文件不存在。执行失败，将被我们的`catch`块捕获。显示一个警告是一个好主意，这样使用这个组件的人会发现有些事情不正常。

# 结论

图像是网站中常见的组成部分。在 React 应用程序中存储图像有许多不同的方法，了解所有这些方法的优缺点非常重要。在这篇博文中，我们研究了在 react 应用中存储图像的不同方法，并为每种方法找到了一个很好的应用。

我还分享了一些技巧和诀窍，以及在处理图像时应该应用的最佳实践。这些实践包含像延迟加载或渐进加载这样的方法。现在是最后一部分，是时候采用这些方法并开始在 React 项目中使用它们了。

【https://www.upbeatcode.com】最初发表于[](https://www.upbeatcode.com/where-to-store-images-in-react-app/)**。**