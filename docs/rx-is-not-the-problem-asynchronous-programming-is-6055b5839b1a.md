# Rx 不是问题，异步编程才是。

> 原文：<https://levelup.gitconnected.com/rx-is-not-the-problem-asynchronous-programming-is-6055b5839b1a>

## 不是 Rx 的粉丝？我明白，但是听我说完。

![](img/7bfdb26e5047b3421575354d110fe4c0.png)

由[莎伦·麦卡琴](https://unsplash.com/@sharonmccutcheon?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)在 [Unsplash](https://unsplash.com/s/photos/rx?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) 拍摄的照片

依稀记得用 Rx 之前的日子。记得第一次看 Rx 的时候。男孩，那是不同的时代。

> 你为什么要做某事？每个人都这样吗？每次“发射”是什么意思？

Rx 对我来说是火的考验。我开始在一个系统上工作，这个系统将 Rx 用于从数据库操作到拥有一个反应式 UI 的所有事情。一开始，就像在地狱一样。我讨厌它。

但是经过一年(是的，一年)的挣扎，我已经改变了我的论调。我真的相信它是大多数异步编程的最佳抽象。

## Rx 是什么？

当我说 Rx 时，我指的是 ReactiveX 规范，特别是 RxJava、RxJS 和 RxSwift 的实现。也是这个顺序。RxJava 是 ReactiveX 规范的最佳实现，另外两个是愚蠢的表亲。

那么，为什么我改变了我的论调？简而言之，去年我不得不写了很多异步代码。用不同的语言。在不同的代码库中。

现在，你可能会想我有[斯德哥尔摩综合症](https://en.wikipedia.org/wiki/Stockholm_syndrome)。我可能会。但是我尝试了其他的模式。我写过很多 JavaScript 承诺，也玩过 Kotlin 协程。

## 每个工具都有时间和地点

据我所知，Rx 非常适合对数据流或事件驱动的应用进行建模。将数据流视为流是有意义的。一旦你学会了操作符，你就可以用很少的代码表达复杂的思想。

承诺对于纯粹的异步工作建模非常有用，例如，做一些工作，完成后再回来。当您想要执行某种事务(比如保存到数据库)时，这很有意义。您不希望在代价高昂且可能很慢的写入时锁定应用程序，而是希望等待结果，以了解保存是否成功。

当然，Rx 有很多东西要学。你很难理解。大理石图很奇怪。虽然掌握承诺的诀窍更容易，但也有很多微妙之处。但是我说，这些工具集不是问题所在。

底线是:

> 异步编程很难

很难读。很难写。尤其是大规模的。你认为你的异步代码有效吗？将其扩展到一百万个线程。通过你的链条排放数百万的气体。工作原理一样吗？您的小型系统或开发环境可能工作得很好。但是一旦你有了许多链条和线程，事情就变得难以推理了。

我的意思是，你能完全解释共享计数器变量问题吗？问题详细[此处](https://proandroiddev.com/synchronization-and-thread-safety-techniques-in-java-and-kotlin-f63506370e6d)。我想不起来。即使你能做到，我相信当你第一次看到这个例子的时候，这也不是自然而然的。它只是没有太多的内在意义。这是异步编程微妙之处的冰山一角。(调度人员？管理自己的线程？你的系统用的是真线程还是假线程？)

## 副业不赚钱。

另一个问题是很少有大型同步系统。写你的待办事项 app，没有 Rx 也没有承诺是没问题的，但是大多数产生金钱的系统需要支持几十万用户。向上扩展需要线程，这是生活中的不幸事实。处理大型的、可能是旧的代码库是每个程序员的噩梦。同样，你不应该责怪工具。异步编程给工程师带来了压力。

然而问题的关键是，我们作为人类一次一行地思考程序。我们可以编写适用于小情况的异步代码，并将问题局限在几行代码中。但我们无法思考这些系统如何大规模运作，或者它们如何相互作用。我们的大脑只有[一个线程](https://www.npr.org/templates/story/story.php?storyId=95256794)！

这没关系。编写大型异步代码库是一项艰巨的工作。但是我认为对工具的憎恨是没有根据的。一旦学会，Rx 就是一个建模流或事件的很好的规范。真的是。但是不要把精力放在挑选工具上，而是把精力放在理解异步编程这个困难的概念上。