<html>
<head>
<title>Automate repetitive tasks with custom Git commands</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用定制的Git命令自动执行重复性任务</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/automate-repetitive-tasks-with-custom-git-commands-76a4b71d262f?source=collection_archive---------6-----------------------#2020-05-14">https://levelup.gitconnected.com/automate-repetitive-tasks-with-custom-git-commands-76a4b71d262f?source=collection_archive---------6-----------------------#2020-05-14</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div class="gh gi jq"><img src="../Images/a8163331cf691f181d05642c74a256f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/0*mcrN8Xh8KO-12MOJ.png"/></div></figure><p id="6eee" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">Git帮助我们编写自己的定制命令，这些命令可以用任何您喜欢的语言编写，比如Ruby或JavaScript。</p><p id="7fa7" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">在本教程中，我将解释如何编写自己的自定义命令，并给出一些例子。在本教程中，我们将使用bash。</p><p id="a834" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">编写定制git命令非常简单，只需三个步骤:</p><ol class=""><li id="6530" class="kv kw it jz b ka kb ke kf ki kx km ky kq kz ku la lb lc ld bi translated">用给定格式的名称<code class="fe le lf lg lh b">git-mycommand</code>创建一个文件。并且该文件应该具有可执行的访问权限。</li><li id="2672" class="kv kw it jz b ka li ke lj ki lk km ll kq lm ku la lb lc ld bi translated">创建的文件应该包含在<code class="fe le lf lg lh b">$PATH</code>中。这可以在<code class="fe le lf lg lh b">bashrc</code>或<code class="fe le lf lg lh b">zshrc</code>完成</li><li id="cd70" class="kv kw it jz b ka li ke lj ki lk km ll kq lm ku la lb lc ld bi translated">然后，您可以在任何git repo中运行命令<code class="fe le lf lg lh b">git mycommand</code>。</li></ol><h1 id="ce7b" class="ln lo it bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">编写我们的第一个定制命令</h1><p id="544e" class="pw-post-body-paragraph jx jy it jz b ka ml kc kd ke mm kg kh ki mn kk kl km mo ko kp kq mp ks kt ku im bi translated">让我们编写一个定制的Git命令来添加、提交，然后用一个命令将更改推送到remote。</p><h2 id="6a06" class="mq lo it bd lp mr ms dn lt mt mu dp lx ki mv mw mb km mx my mf kq mz na mj nb bi translated">1.为我们的命令创建一个文件</h2><p id="257c" class="pw-post-body-paragraph jx jy it jz b ka ml kc kd ke mm kg kh ki mn kk kl km mo ko kp kq mp ks kt ku im bi translated">最好有一个目录来包含我们所有的自定义命令，这样就可以对其进行组织。让我们创建一个目录。</p><pre class="nc nd ne nf gt ng lh nh ni aw nj bi"><span id="7d3e" class="mq lo it lh b gy nk nl l nm nn">mkdir my-git-custom-commands</span></pre><p id="6f90" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">在上面创建的目录中创建一个名为<code class="fe le lf lg lh b">git-lazypush</code>的文件，并添加以下代码。在此参考<a class="ae no" href="https://gist.github.com/srebalaji/4b23fb62f6ce26c17b73ca07ae7cfc67#file-git-lazypush" rel="noopener ugc nofollow" target="_blank">要点中的代码</a>。</p><figure class="nc nd ne nf gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="nq nr di ns bf nt"><div class="gh gi np"><img src="../Images/1530eae7a122071264d993b6099695dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*b4KNBUIlRf4Apvdy.png"/></div></div></figure><p id="aaf3" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">最后但同样重要的是，使该文件可执行</p><pre class="nc nd ne nf gt ng lh nh ni aw nj bi"><span id="5e3a" class="mq lo it lh b gy nk nl l nm nn">chmod +x git-lazypush</span></pre><h2 id="7d48" class="mq lo it bd lp mr ms dn lt mt mu dp lx ki mv mw mb km mx my mf kq mz na mj nb bi translated">2.向$PATH添加自定义命令</h2><p id="b3ac" class="pw-post-body-paragraph jx jy it jz b ka ml kc kd ke mm kg kh ki mn kk kl km mo ko kp kq mp ks kt ku im bi translated">这一点相当重要。这将有助于Git识别定制命令。</p><p id="07aa" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">我们正在将目录添加到<code class="fe le lf lg lh b">$PATH</code>。将下面一行添加到<code class="fe le lf lg lh b">bashrc</code>或<code class="fe le lf lg lh b">zshrc</code></p><pre class="nc nd ne nf gt ng lh nh ni aw nj bi"><span id="47be" class="mq lo it lh b gy nk nl l nm nn">export PATH=$PATH:/your-directory/my-git-custom-commands</span></pre><p id="4250" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">现在，您可以获取文件或启动终端的新实例</p><pre class="nc nd ne nf gt ng lh nh ni aw nj bi"><span id="7d81" class="mq lo it lh b gy nk nl l nm nn">source ~/.zshrc</span></pre><h2 id="196d" class="mq lo it bd lp mr ms dn lt mt mu dp lx ki mv mw mb km mx my mf kq mz na mj nb bi translated">3.运行我们的自定义命令</h2><p id="32d6" class="pw-post-body-paragraph jx jy it jz b ka ml kc kd ke mm kg kh ki mn kk kl km mo ko kp kq mp ks kt ku im bi translated">一切就绪后，是时候运行我们的自定义命令了。转到您的任何本地git repo并运行以下命令</p><pre class="nc nd ne nf gt ng lh nh ni aw nj bi"><span id="de86" class="mq lo it lh b gy nk nl l nm nn">git lazypush "Your commit message"</span></pre><figure class="nc nd ne nf gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="nq nr di ns bf nt"><div class="gh gi nu"><img src="../Images/ef4a67a175a8c61ae7d023d698948b42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*9iABwAL4lT5UWw_C.png"/></div></div></figure><p id="b025" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">如您所见，我已经创建了一个新文件，并执行了自定义命令。</p><p id="fbcf" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">很明显，文件被添加、提交并推送到远程服务器。</p><p id="84dd" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">Git命令非常有用，可以用来自动化工作流中的常见任务。所以试着找到你觉得重复的任务，并自动完成。</p><h1 id="79e0" class="ln lo it bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">自定义命令的想法</h1><p id="a2e7" class="pw-post-body-paragraph jx jy it jz b ka ml kc kd ke mm kg kh ki mn kk kl km mo ko kp kq mp ks kt ku im bi translated">我将添加一些我能想到的自定义命令的想法。</p><h2 id="7acc" class="mq lo it bd lp mr ms dn lt mt mu dp lx ki mv mw mb km mx my mf kq mz na mj nb bi translated">git-切换到</h2><p id="402e" class="pw-post-body-paragraph jx jy it jz b ka ml kc kd ke mm kg kh ki mn kk kl km mo ko kp kq mp ks kt ku im bi translated">将当前分支中所有未暂存的更改签出到新分支的自定义命令。</p><p id="21b7" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">你可以在<a class="ae no" href="https://gist.github.com/srebalaji/4b23fb62f6ce26c17b73ca07ae7cfc67#file-git-switch-to" rel="noopener ugc nofollow" target="_blank"> <strong class="jz iu">要点这里</strong> </a>找到代码。</p><figure class="nc nd ne nf gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="nq nr di ns bf nt"><div class="gh gi nv"><img src="../Images/14fbf76af828e83710f2b16cfe1cfab3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*jZxTGlfjarvmsp8j.png"/></div></div></figure><h2 id="31c6" class="mq lo it bd lp mr ms dn lt mt mu dp lx ki mv mw mb km mx my mf kq mz na mj nb bi translated">git远程差分</h2><p id="d521" class="pw-post-body-paragraph jx jy it jz b ka ml kc kd ke mm kg kh ki mn kk kl km mo ko kp kq mp ks kt ku im bi translated">查看指定分支的本地和远程之间差异的自定义命令。</p><p id="425e" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">你可以在<a class="ae no" href="https://gist.github.com/srebalaji/4b23fb62f6ce26c17b73ca07ae7cfc67#file-git-remote-diff" rel="noopener ugc nofollow" target="_blank"> <strong class="jz iu">要点这里找到</strong> </a>的代码。</p><figure class="nc nd ne nf gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="nq nr di ns bf nt"><div class="gh gi nw"><img src="../Images/e664699e36e0001cd544024f45f1c266.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*xEe47rtpo0Qk67UV.png"/></div></div></figure><h2 id="5520" class="mq lo it bd lp mr ms dn lt mt mu dp lx ki mv mw mb km mx my mf kq mz na mj nb bi translated">git远程日志</h2><p id="4e7e" class="pw-post-body-paragraph jx jy it jz b ka ml kc kd ke mm kg kh ki mn kk kl km mo ko kp kq mp ks kt ku im bi translated">custom命令帮助您查看给定分支的本地和远程更改之间的提交日志。</p><p id="9846" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">你可以在<a class="ae no" href="https://gist.github.com/srebalaji/4b23fb62f6ce26c17b73ca07ae7cfc67#file-git-remote-log" rel="noopener ugc nofollow" target="_blank">的<strong class="jz iu">要点这里找到代码</strong> </a>。</p><figure class="nc nd ne nf gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="nq nr di ns bf nt"><div class="gh gi nw"><img src="../Images/64a04b3a84c84d48cea6f68c885bb08a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Xhu2oaYe17QdDWln.png"/></div></div></figure><h2 id="b1c8" class="mq lo it bd lp mr ms dn lt mt mu dp lx ki mv mw mb km mx my mf kq mz na mj nb bi translated">git-硬删除</h2><p id="4779" class="pw-post-body-paragraph jx jy it jz b ka ml kc kd ke mm kg kh ki mn kk kl km mo ko kp kq mp ks kt ku im bi translated">本地和远程删除分支的自定义命令。</p><p id="d5d0" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">你可以在<a class="ae no" href="https://gist.github.com/srebalaji/4b23fb62f6ce26c17b73ca07ae7cfc67#file-git-hard-delete" rel="noopener ugc nofollow" target="_blank"> <strong class="jz iu">要点这里</strong> </a>找到代码。</p><figure class="nc nd ne nf gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="nq nr di ns bf nt"><div class="gh gi nv"><img src="../Images/6477bb62541542c623c4e1308008b3a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*q6NIpILT8EW2_nrR.png"/></div></div></figure><h2 id="effa" class="mq lo it bd lp mr ms dn lt mt mu dp lx ki mv mw mb km mx my mf kq mz na mj nb bi translated">git-lazypr</h2><p id="8bcb" class="pw-post-body-paragraph jx jy it jz b ka ml kc kd ke mm kg kh ki mn kk kl km mo ko kp kq mp ks kt ku im bi translated">创建拉请求的自定义命令。Github、Gitlab中有API可以在repo中创建PR。您可以使用它从命令行创建一个PR。</p><p id="522c" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">如果您有任何疑问、反馈或任何事情，您可以留下评论。</p><p id="3f54" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated">感谢您的阅读:)</p><p id="7af4" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated"><strong class="jz iu">你可以在这里找到我的其他git相关文章</strong></p><pre class="nc nd ne nf gt ng lh nh ni aw nj bi"><span id="afc0" class="mq lo it lh b gy nk nl l nm nn">1. <a class="ae no" rel="noopener ugc nofollow" target="_blank" href="/what-is-git-cherry-pick-and-how-to-use-it-effectively-665247192442">What is git cherry-pick and how to use</a></span><span id="4689" class="mq lo it lh b gy nx nl l nm nn">2. <a class="ae no" rel="noopener ugc nofollow" target="_blank" href="/how-to-use-git-fetch-and-git-pull-effectively-c6a4becfbc16">Useful tricks of git fetch and git pull</a></span><span id="907e" class="mq lo it lh b gy nx nl l nm nn">3. <a class="ae no" href="https://medium.com/@srebalaji/a-very-basic-intro-of-git-b9cab0e64153" rel="noopener">A very basic intro of Git</a></span></pre><p id="6e5d" class="pw-post-body-paragraph jx jy it jz b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku im bi translated"><strong class="jz iu">本帖原载于我的简讯</strong><a class="ae no" href="https://gitbetter.substack.com/" rel="noopener ugc nofollow" target="_blank"><strong class="jz iu">GitBetter</strong></a><strong class="jz iu">。如果你已经来了这么久，那么我想你会对Git非常感兴趣。可以订阅</strong><a class="ae no" href="https://gitbetter.substack.com/" rel="noopener ugc nofollow" target="_blank"><strong class="jz iu">Git better</strong></a><strong class="jz iu">获取Git的招数、技巧、高级话题。</strong></p></div></div>    
</body>
</html>