<html>
<head>
<title>How to setup Svelte with official Typescript support + TailwindCSS + SCSS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何设置官方支持的Svelte+TailwindCSS+SCSS</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-setup-svelte-typescript-tailwindcss-scss-bebdca7b2a0a?source=collection_archive---------8-----------------------#2020-08-03">https://levelup.gitconnected.com/how-to-setup-svelte-typescript-tailwindcss-scss-bebdca7b2a0a?source=collection_archive---------8-----------------------#2020-08-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/2db80cca67ce4d42a023d21ae9f855be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xR_sp3Pb12dw3uBE"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">由<a class="ae kc" href="https://unsplash.com/@flowforfrank?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">费伦茨·阿尔马西</a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><h1 id="7d9d" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">2022年更新</h1><p id="5d07" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">这篇文章是2年前写的，很多东西都变了，我写了一个2022年更新的版本，你应该照着做</p><h1 id="99b6" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">用Typescript设置Svelte</h1><p id="e152" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">Svelte刚刚宣布了他们对Typescript的完全官方支持，这是一个完整的指南，可以在TailwindCSS和SCSS的新项目中设置它。</p><p id="31fd" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">我将使用<code class="fe me mf mg mh b">yarn</code>作为包管理器，但是如果你愿意，你也可以使用<code class="fe me mf mg mh b">npm</code>。</p><p id="f9f8" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">我们从默认的苗条模板开始</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="14f0" class="mq ke iq mh b gy mr ms l mt mu">npx degit sveltejs/template svelte-ts<br/>cd svelte-ts<br/>yarn</span></pre><p id="ff31" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">然后使用提供的安装脚本添加Typescript</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="906a" class="mq ke iq mh b gy mr ms l mt mu">node scripts/setupTypeScript.js<br/>yarn</span></pre><p id="7887" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">Typescript支持依赖于几个包，所以在脚本运行后再次运行包管理器。</p><p id="18a9" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">Svelte现在为<code class="fe me mf mg mh b">.svelte</code>文件提供了一个官方的VSCode扩展<a class="ae kc" href="https://marketplace.visualstudio.com/items?itemName=svelte.svelte-vscode" rel="noopener ugc nofollow" target="_blank">。如果你还没有安装它，你应该安装它。</a></p><p id="08ac" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">如果你安装了詹姆斯·比特莱斯以前的扩展，你需要先移除它，你可以通过进入扩展并搜索<code class="fe me mf mg mh b">@installed</code>来移除它</p><p id="51ce" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">或者只是运行命令行来删除它</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="93ad" class="mq ke iq mh b gy mr ms l mt mu">code --uninstall-extension JamesBirtles.svelte-vscode</span></pre><p id="0f55" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">你可以在这里了解更多关于<a class="ae kc" href="https://svelte.dev/blog/svelte-and-typescript" rel="noopener ugc nofollow" target="_blank"> Svelte的类型脚本支持，它也描述了如何手动设置一个现有的项目。</a></p><p id="f62b" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">这样，我们就可以使用Typescript和Svelte了。</p><h1 id="3bf0" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">添加TailwindCSS</h1><p id="fa67" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">添加<code class="fe me mf mg mh b">tailwindcss</code>包并生成<code class="fe me mf mg mh b">tailwind.config.js</code>配置文件。</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="54b0" class="mq ke iq mh b gy mr ms l mt mu">yarn add tailwindcss<br/>npx tailwindcss init</span></pre><p id="d6b9" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">现在我们需要将Tailwind的CSS类导入到我们的应用程序中，让我们创建一个<code class="fe me mf mg mh b">Tailwind.svelte</code>组件，它将通过一个<code class="fe me mf mg mh b">global</code>样式标签来完成这个任务。</p><p id="2a86" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">我们使用<code class="fe me mf mg mh b">global</code>是因为我们需要将这些类应用于页面中的每个元素，否则我们的样式将仅限于该组件。</p><figure class="mi mj mk ml gt jr"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="9ef0" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">现在我们将这个组件直接导入到我们的主<code class="fe me mf mg mh b">App.svelte</code>组件中，以确保它总是被包含在内。我们还将清理默认代码。</p><p id="8f9a" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">首先，删除<code class="fe me mf mg mh b">public/global.css</code>中的所有CSS代码，然后替换<code class="fe me mf mg mh b">App.svelte</code></p><figure class="mi mj mk ml gt jr"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="5402" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">如果你现在运行这个应用程序，你会注意到文本不是红色的，而且还没有应用顺风的样式。</p><p id="2d7a" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">原因是<code class="fe me mf mg mh b">@tailwind</code>指令还没有任何意义。为了让我们的构建工具用正确的CSS样式替换它们，我们必须告诉Rollup如何通过<code class="fe me mf mg mh b">svelte-preprocess</code>对它们进行预处理。</p><p id="376b" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">大部分设置已经为我们完成了，因为Typescript设置已经和<code class="fe me mf mg mh b">svelte-preprocess</code>一起提供了，但是我们仍然需要告诉它使用<code class="fe me mf mg mh b">postcss</code>和一些其他的包。</p><p id="92dd" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">让我们从添加这些包开始</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="ea28" class="mq ke iq mh b gy mr ms l mt mu">yarn add -D postcss postcss-load-config @fullhuman/postcss-purgecss </span></pre><p id="6cc0" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">创建一个<code class="fe me mf mg mh b">postcss.config.js</code>文件，注意这里的名字很重要，因为<code class="fe me mf mg mh b">postcss-load-config</code>将会寻找这个文件。</p><figure class="mi mj mk ml gt jr"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="7133" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">由于Tailwind有大量的CSS类来支持灵活的样式，它默认生成的CSS文件相当大(大约1.6 Mb未压缩)。</p><p id="4a16" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">当你只使用其中的一小部分时，你不会想运送那么多的CSS。</p><p id="fd52" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">这就是为什么配置<code class="fe me mf mg mh b">purgecss</code>很重要的原因，它将负责删除我们不使用的任何类，使我们的产品CSS包更小。</p><p id="09c9" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">配置文件告诉<code class="fe me mf mg mh b">purgecss</code>查看<code class="fe me mf mg mh b">src</code>文件夹中的所有<code class="fe me mf mg mh b">.html</code>和<code class="fe me mf mg mh b">.svelte</code>文件。</p><p id="7a18" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated"><code class="fe me mf mg mh b">whitelistPatterns</code>选项告诉<code class="fe me mf mg mh b">purgecss</code>不要删除从<code class="fe me mf mg mh b">svelte-</code>开始的类。Svelte生成这些类来保持每个组件的样式范围。因为这些是生成的，所以它们不会出现在我们组件的代码中，并且会被<code class="fe me mf mg mh b">purgecss</code>移除，以避免我们将它们列入白名单。</p><p id="4061" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">如果您正在使用其他生成类的工具，您需要使用这个，提供<code class="fe me mf mg mh b">font-awesome</code>支持的<code class="fe me mf mg mh b">svelte-awesome</code>是一个很好的例子，因为它添加了<code class="fe me mf mg mh b">fa-icon</code>类，您还需要将<code class="fe me mf mg mh b">/fa-icon/</code>添加到白名单中。</p><p id="df09" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">一般来说，如果您的任何风格在产品构建中消失了，这可能是白名单问题。</p><p id="8039" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">现在我们需要通过<code class="fe me mf mg mh b">svelte-preprocess</code>告诉Rollup使用<code class="fe me mf mg mh b">postcss</code></p><p id="a115" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">在<code class="fe me mf mg mh b">rollup.config.js</code>中，在调用<code class="fe me mf mg mh b">svelte</code>函数的<code class="fe me mf mg mh b">plugins</code>数组中，你会看到<code class="fe me mf mg mh b">preprocess</code>选项不带任何参数地调用<code class="fe me mf mg mh b">sveltePreprocess</code>。</p><p id="de1c" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">我们需要告诉<code class="fe me mf mg mh b">sveltePreprocess</code>我们想要使用<code class="fe me mf mg mh b">postcss</code>，为此我们将传递给它一个配置对象</p><figure class="mi mj mk ml gt jr"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="27f4" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">现在你可以运行<code class="fe me mf mg mh b">yarn dev</code>了，你应该会看到我们的<code class="fe me mf mg mh b">h1</code>现在如预期的那样是红色的。顺风现在设置好了。</p><h1 id="8e33" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">添加SCSS支持</h1><p id="d75f" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">使用TailwindCSS，您很少需要编写CSS，但仍有需要自定义CSS的情况。</p><p id="d279" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">如果也支持SCSS就好了，主要是能够编写嵌套的CSS。</p><p id="0aa3" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">我们将增加几个包</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="5751" class="mq ke iq mh b gy mr ms l mt mu">yarn add -D node-sass autoprefixer</span></pre><p id="021c" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">以及更多的汇总配置</p><figure class="mi mj mk ml gt jr"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="b0b1" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">仅此而已！现在你可以通过添加<code class="fe me mf mg mh b">lang="scss"</code>到你的风格标签中来使用SCSS。</p><figure class="mi mj mk ml gt jr"><div class="bz fp l di"><div class="mv mw l"/></div></figure><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="254a" class="mq ke iq mh b gy mr ms l mt mu">yarn dev</span></pre><p id="7d32" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">耶，我们的文字又红又大！</p><h1 id="9974" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">现成的项目模板</h1><p id="2e4f" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">我还制作了这个设置的模板，这样你就可以快速启动一个项目，只需运行</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="252e" class="mq ke iq mh b gy mr ms l mt mu">npx degit <a class="ae kc" href="https://github.com/skflowne/svelte-ts-scss-tailwind-template" rel="noopener ugc nofollow" target="_blank">https://github.com/skflowne/svelte-ts-scss-tailwind-template</a> my-app</span></pre><p id="23d8" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">然后cd进入你的应用程序并运行<code class="fe me mf mg mh b">yarn</code>或<code class="fe me mf mg mh b">npm install</code></p><h1 id="76d8" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">结论</h1><p id="e3e7" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">对我来说，这似乎是一个可靠的设置，可以构建一个轻量级的应用程序，使用Typescript享受类型安全，借助Tailwind快速构建一个响应性良好的UI，并能够在需要时使用SCSS编写更高级的CSS。</p><p id="3730" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">如果你用它造了什么东西就告诉我。</p></div></div>    
</body>
</html>