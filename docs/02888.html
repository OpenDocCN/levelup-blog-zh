<html>
<head>
<title>Build a Note-Taking App with MySQL Backend in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python语言的MySQL后端构建一个笔记应用程序</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/build-a-note-taking-app-with-mysql-backend-in-python-927b4c5fad91?source=collection_archive---------1-----------------------#2020-04-09">https://levelup.gitconnected.com/build-a-note-taking-app-with-mysql-backend-in-python-927b4c5fad91?source=collection_archive---------1-----------------------#2020-04-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="0ddb" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">了解如何在Python中执行数据库创建读取更新删除(CRUD)操作。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/df5704c89fa80314b8ffc662ff813e88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8vuIvcG4PCNwBRCRDRMEWw.png"/></div></div></figure><p id="e1bf" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我将向您展示如何通过构建一个笔记桌面应用程序来执行各种数据库操作，例如Python中的CRUD。我的目标不仅仅是教你如何用Python创建一个笔记应用程序，而是向你提供工具、原则和概念，它们可以应用于构建其他酷的web、桌面、移动应用程序(需要后端数据库)。</p><p id="8d7e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我将假设您已经安装并设置了Python 和<a class="ae ln" href="https://tkdocs.com/tutorial/install.html" rel="noopener ugc nofollow" target="_blank"> Tkinter库</a>(用于构建我们的GUI)。本教程不会关注Tkinter，因为我将更多地关注与数据库相关的操作。因此，如果你还不熟悉Tkinter，请看看我的<a class="ae ln" href="https://medium.com/@ceffiong/learn-python-by-building-a-gui-guessing-game-with-tkinter-9f82291db6?sk=4154727ca3623ac1a98f9aa1dbb4a565" rel="noopener">以前的教程</a>。我已经在github上传了完整的<a class="ae ln" href="https://github.com/effiongcharles/note-taking-app-python" rel="noopener ugc nofollow" target="_blank">源代码，供大家下载</a>试用。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lo lp l"/></div></figure><p id="8408" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">上面的电影展示了工作的应用程序。该应用程序将允许用户添加新的笔记，查看笔记细节，更新和删除现有的笔记。该应用程序依靠mysql数据库来保存(存储)我们的笔记数据。我们将从应用后端开始，即设置和执行基本的数据库CRUD操作，然后实施前端-UI。系好安全带准备起飞！</p></div><div class="ab cl lq lr hu ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="ij ik il im in"><h1 id="1fd5" class="lx ly iq bd lz ma mb mc md me mf mg mh jw mi jx mj jz mk ka ml kc mm kd mn mo bi translated">备份—数据库设置和操作</h1><p id="10e8" class="pw-post-body-paragraph kr ks iq kt b ku mp jr kw kx mq ju kz la mr lc ld le ms lg lh li mt lk ll lm ij bi translated">我们很酷的应用程序将使用mysql数据库后端来保存数据。但是我们如何建立这样一个数据库呢？为了在您的系统上托管数据库服务器，您可以下载并安装mysql。有几个选项(比如<a class="ae ln" href="http://www.wampserver.com/en/" rel="noopener ugc nofollow" target="_blank"> WAMP服务器</a>)但是我们将使用XAMPP，这是一个流行的开源Apache发行版，附带Mysql数据库。安装和使用都很简单。前往https://www.apachefriends.org/index.html<a class="ae ln" href="https://www.apachefriends.org/index.html" rel="noopener ugc nofollow" target="_blank">并点击下载按钮来下载XAMPP。按照说明安装并启动XAMPP。</a></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mu"><img src="../Images/c8fbfcf3140f8b8b07af72b3b24bd866.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yu8kF5ztgYcOQ3Gu8zUsFA.png"/></div></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated">图1: XAMPP仪表板</figcaption></figure><p id="c710" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">图1显示了在本地主机和端口8081上运行的XAMPP仪表板。端口号取决于您的设置:)XAMPP附带了phpMyAdmin——一个web界面，允许您执行各种与数据库相关的功能。点击“phpMyAdmin”菜单进入phpMyAdmin网络界面。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mz"><img src="../Images/f278dc331cb2fbbf901b2396296d6123.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jiRTJsI7lZDGFvgVe1MrdA.png"/></div></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated">图2: phpMyAdmin web界面</figcaption></figure><p id="f92e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">图2显示了phpMyAdmin web界面。我们可以从这个界面创建数据库、表格和执行数据库操作(插入数据、选择、删除等)，但是，嘿，让我们通过Python脚本来完成吧。那不是很有趣吗？我打赌会的！</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na lp l"/></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated">图3:数据库连接和创建数据库功能</figcaption></figure><p id="e13b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">图3中的代码片段显示了创建数据库的函数。我们需要一个“驱动程序”来连接MySQL数据库服务器。这个驱动是在<em class="nb">行1 </em>导入的。接下来，我们创建一个MySQL连接对象，其中我们指定了MySQL服务器的详细信息，即主机地址、端口、用户和密码<em class="nb">(第3行)</em>。您需要更改它们以匹配您的服务器凭据。</p><p id="99aa" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"> <em class="nb"> db_create_db(..)</em> </strong>函数创建一个数据库(即db_notes)如果它不存在。这很重要，因为我们不想每次函数执行时都重写数据库。光标用来处理各种数据库操作。在执行了函数<em class="nb">(第10行)</em>之后，我们可以检查phpMyAdmin来查看数据库是如何创建的，如图4所示。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nc"><img src="../Images/36055d7ce613fc82ef275c19fe69ae68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Vak4e-XEIQL69hXtXg_-Uw.png"/></div></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated">图4:创建的数据库“db_notes”</figcaption></figure><p id="1936" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">目前，我们的数据库已经创建，但是为空(没有表)。下一步是创建表。一个数据库就像一个集合，它承载着其他数据库对象，例如表、视图等。让我们看看如何创建一个表。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na lp l"/></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated">图5:创建表格功能</figcaption></figure><p id="9e52" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">图5中的代码片段创建了表(<em class="nb"> tb_notes </em>)。首先，我们选择将托管该表的数据库<em class="nb">(第3行)</em>。接下来，我们创建一个包含我们的<em class="nb"> sql </em>查询<em class="nb">的字符串(第5–8行)。</em>注意(和数据库一样),如果表不存在，我们会创建它以防止覆盖。我们的表将有3个字段:<em class="nb">注释id、标题和注释</em>。我们需要一种方法来惟一地标识表中的每条记录(一个表行被称为一条记录)，因此我们在<em class="nb"> note_id上使用了一个“<em class="nb">主键</em>”。</em>这意味着我们的表中不能有两个记录具有相同的<em class="nb"> note_id </em>并且字段不能为<em class="nb"> NULL。另外，我们将<em class="nb"> note_id </em>设置为“自动递增”,这意味着数据库服务器负责为每个插入的数据创建唯一的<em class="nb"> id </em>。我们使用游标<em class="nb">执行<em class="nb"> sql </em>查询(第9行)。</em>在执行了函数<em class="nb">(第12行)</em>之后，我们可以检查phpMyAdmin来查看表是否被创建，如下图6所示。</em></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nd"><img src="../Images/db0f2b9a30adb1bb93ff61134da19f79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YPBZdczGd_A4jVvgTlvjAg.png"/></div></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated">图6:创建了表“tb_notes”</figcaption></figure><p id="86dd" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">注意，新创建的表在<em class="nb"> db_notes </em>数据库中，因为我们选择了它。我们的表已创建，但目前为空。让我们看看如何通过Python向表中插入数据。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na lp l"/></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated">图7:插入数据功能</figcaption></figure><p id="e70d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">图7中的代码片段显示了如何将数据插入到我们的表中。注意，我们在查询<em class="nb">(第4行)中指定了将要插入数据的表。</em>此外，该查询只指定了<em class="nb">标题</em>和<em class="nb">注释</em>字段，而没有指定<em class="nb">注释id </em>字段，因为db服务器负责为<em class="nb">注释id </em>字段创建唯一id，如前所述。提交函数被调用<em class="nb"> </em>来完成插入操作<em class="nb">(第7行)</em>。这是修改表数据的每个事务/查询所必需的。调用该函数将虚拟记录插入我们的表<em class="nb">(第18–19行)。</em></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ne"><img src="../Images/c0fa9f4f16c123c423afb574d5debbd6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xosQCPNYxdvAykfAQpP0BQ.png"/></div></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated">图8:插入的音符数据</figcaption></figure><p id="4c62" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们可以很容易地通过phpMyAdmin验证该记录是否成功保存在表(<em class="nb"> tb_notes </em> ) <em class="nb"> </em>中，如图8所示。如前所述，我们还可以清楚地看到服务器自动为我们插入了<em class="nb"> note_id </em>字段。您可能想知道如何从数据库表中读取数据。接下来我们来看看这个。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na lp l"/></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated">图9: Select all from database和init函数</figcaption></figure><p id="c03d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">图9中的代码片段— <strong class="kt ir"> <em class="nb"> db_select_all(..)</em> </strong>显示了如何从数据库表中检索所有数据。我们使用MySQL的“SELECT”关键字来选择数据，光标从表中获取所有(<strong class="kt ir"> * </strong> ) <strong class="kt ir"> </strong>数据。类似地，我们可以使用<em class="nb"> WHERE </em>关键字选择一个或多个记录。WHERE关键字可以与SELECT一起使用，以便只检索与WHERE子句匹配的记录。这在<strong class="kt ir">中有说明<em class="nb"> db_select_specific_note(..)</em> </strong>函数在图9中我们从表中只选择了一条记录。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nf"><img src="../Images/95bf7ba0410092bcbb67812514fe42ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4CQRo_TH9E8ByMo9ShzuvQ.png"/></div></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated">图10:选择查询的输出</figcaption></figure><p id="858b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">select函数以二维数组的形式返回选定的数据。如果我们打印出返回数据(<em class="nb">见图9，第12–14行)</em>,(执行两个功能的)输出如图10所示。</p><p id="87ee" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">有些情况下，我们需要更新数据库中的记录。接下来看看怎么做。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na lp l"/></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated">图11:更新数据功能</figcaption></figure><p id="1642" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">图11示出了更新数据库中特定记录的功能。该查询使用MySQL“UPDATE”关键字和“WHERE”子句来更新与<em class="nb"> note_id(第7行)</em>匹配的记录。为了测试这个方法，我们调用方法<em class="nb">(第10行)</em>来更新<em class="nb"> note_id </em>为5的记录。我们可以通过phpMyAdmin验证更新，如图12所示。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ng"><img src="../Images/276f6cf8dd821b3d8dcfca8e6908c6ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0tB6hqj-0ehL2aDcHrQe_w.png"/></div></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated">图12:更新的数据库表</figcaption></figure><p id="1e82" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在我们已经完成了<strong class="kt ir">C</strong>create<strong class="kt ir">R</strong>EAD和<strong class="kt ir"> U </strong> pdate，我们只剩下<strong class="kt ir"> D </strong> elete操作了。让我们看看如何从数据库表中删除记录。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na lp l"/></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated">图13从数据库功能中删除记录</figcaption></figure><p id="60af" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">图13中的代码片段显示了如何删除记录。该功能使用MySQL <em class="nb"> DELETE </em>、<em class="nb"> WHERE </em>关键字选择要删除的具体记录。在这里，具有指定的<em class="nb"> note_id </em>的记录将从我们的表中删除。我们调用该函数，从我们的表<em class="nb">(第10行)</em>中删除<em class="nb"> note_id </em>为3的记录。如果我们检查pypMyAdmin，我们可以确认第3条记录中<em class="nb"> note_id </em>已经被删除。这在下面的图14中示出。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ng"><img src="../Images/112e1c29e67821cd440a36f4d1e4b2c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F3BSa6PxF6TA0OtGACAa-w.png"/></div></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated">图14:删除数据库记录</figcaption></figure><p id="1299" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">既然我们已经知道如何执行CRUD数据库操作，我们就可以将这些知识应用于构建应用程序的前端。</p></div><div class="ab cl lq lr hu ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="ij ik il im in"><h1 id="06aa" class="lx ly iq bd lz ma mb mc md me mf mg mh jw mi jx mj jz mk ka ml kc mm kd mn mo bi translated">前端—笔记界面</h1><p id="3cda" class="pw-post-body-paragraph kr ks iq kt b ku mp jr kw kx mq ju kz la mr lc ld le ms lg lh li mt lk ll lm ij bi translated">在上一节中，我们使用Python脚本对笔记执行了CRUD操作。这对于测试我们的后端很好，但是不方便用户。因此，我们将创建一个用户界面，从中可以执行CRUD操作。例如，我们希望能够在一个漂亮的用户界面而不是终端上显示笔记。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nh"><img src="../Images/662df7ab5c4b1dfd7876b1e8e88b0e82.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6ykHX1gMj0CxDCKXNl3Wbw.png"/></div></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated">图15:笔记应用主窗口</figcaption></figure><p id="e44b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">图15显示了应用程序主窗口。它由<em class="nb">列表框</em>小部件(用于显示注释标题)、<em class="nb">条目</em>小部件(用于输入和显示注释标题)、<em class="nb">文本</em>小部件(用于输入和显示注释)和<em class="nb">按钮</em>小部件(用于添加、编辑和删除注释)组成。目前，我们正在展示“虚拟”标题(例如标题1、标题2、标题3……)。如果我们显示数据库表中的数据，不是很酷吗？让我们看看下一步怎么做。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na lp l"/></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated">图16: init函数</figcaption></figure><p id="c7dc" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们依靠<strong class="kt ir"> <em class="nb"> init(..)</em> </strong>功能(如图16所示)将我们数据库中的数据显示到UI上。有趣的是，我们在这里利用后端函数来创建数据库、表和读取数据。我们获取数据库中的所有注释，并将其存储在<em class="nb">注释</em>变量<em class="nb">(第6行)</em>中。然后，我们使用一个循环来附加每个<em class="nb">标题</em>(注释[0]返回id，而注释[1]返回标题)，如<em class="nb">第9行所示。</em>我们还将<em class="nb"> note_id </em>的值保存在<em class="nb"> notes_id </em>变量中。这是因为Tkinter listbox小部件的限制(我们需要手动将<em class="nb"> Listbox小部件</em>上的标题映射到它们各自的id。)</p><p id="f99c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">当我们选择或点击任何列表框项目(标题)时，调用图17代码片段所示的<strong class="kt ir"> <em class="nb"> onselect() </em> </strong>函数。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na lp l"/></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated">图17:列表框选择函数代码段</figcaption></figure><p id="46eb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在这里，我们从<em class="nb">事件</em>中获取被点击项目的索引和值，并将其传递给<strong class="kt ir"> <em class="nb"> display_note(..)</em> </strong>功能。display_note函数(希望)非常容易理解。首先，我们清除字段<em class="nb">(第18–19行)</em>。接下来，我们从数据库<em class="nb">(第15行)</em>中获取想要显示的数据。数据(存储在注释变量中)包含从数据库中检索的<em class="nb">标题</em>(数据[0])和<em class="nb">注释</em>(数据[1】)。我们在UI <em class="nb">(第18–19行)</em>上显示标题和注释，并启用我们的编辑和删除按钮。接下来，让我们看看如何从UI向db添加新的注释。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na lp l"/></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated">图18保存便笺功能</figcaption></figure><p id="4506" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">当点击“添加”按钮时。调用图18所示的<strong class="kt ir"> <em class="nb"> save_note() </em> </strong>功能。这个函数可能看起来很长，但是很容易理解。首先，我们检查用户是否输入了有效标题，并注意到<em class="nb">(第5–12行)</em>。然后，我们检查以确保输入的标题是唯一的。如果满足上述条件，我们将数据(标题、注释)保存到数据库中(使用我们之前创建的db函数)，更新UI —将新添加的列表追加到显示区域<em class="nb">(第32行)</em>，并清空文本区域。接下来，我们来看看如何更新UI。</p><p id="aef3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">当点击“编辑”按钮时，我们调用<strong class="kt ir"><em class="nb">update _ note()</em></strong>函数。这个函数类似于我们之前讨论的<em class="nb"> save_note() </em>函数。主要区别是我们使用了<strong class="kt ir"><em class="nb">db _ update _ note()</em></strong>函数。所以，我不会用重复来烦你:)最后一步是在单击delete按钮时删除db记录。接下来让我们看看这背后的逻辑。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na lp l"/></div><figcaption class="mv mw gj gh gi mx my bd b be z dk translated">图19:删除注释功能</figcaption></figure><p id="5852" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们在点击删除按钮时调用<strong class="kt ir"> <em class="nb"> date_note() </em> </strong>函数。该功能如图19所示。首先，我们确保用户选择要删除<em class="nb">(第8–10行)</em>的注释。然后，我们显示一个提示，让用户确认删除操作<em class="nb">(第12行)</em>。如果确认为“是”<em class="nb">(第14行)，</em>我们从数据库表中删除该记录(使用db删除功能— <em class="nb">第17行</em>)，并从UI中删除该记录(<em class="nb">第21–23行</em>)。是的，我们完成了:)</p></div><div class="ab cl lq lr hu ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="ij ik il im in"><h1 id="f027" class="lx ly iq bd lz ma mb mc md me mf mg mh jw mi jx mj jz mk ka ml kc mm kd mn mo bi translated">摘要</h1><p id="d978" class="pw-post-body-paragraph kr ks iq kt b ku mp jr kw kx mq ju kz la mr lc ld le ms lg lh li mt lk ll lm ij bi translated">我已经向您展示了如何通过构建一个笔记应用程序来执行数据库<strong class="kt ir">C</strong>reate<strong class="kt ir">R</strong>EAD<strong class="kt ir">U</strong>pdate和<strong class="kt ir"> D </strong> elete (CRUD)功能。我希望你现在已经掌握了db的原则和概念，可以用它们来开发出色的db后端应用程序(web、移动、桌面)。我迫不及待地想看看你下一步会创造什么！</p><p id="1dcf" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果我们不仅可以查看自己的笔记，还可以查看其他用户的笔记，这不是很酷吗？为了改进这个应用程序和你的编程实践，我建议你增加那个功能。<strong class="kt ir">提示:</strong>您至少需要两个数据库表(一个用于用户信息，另一个用于注释)，并使用<a class="ae ln" href="https://dev.mysql.com/doc/refman/5.6/en/create-table-foreign-keys.html" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="nb">外键</em> </strong>关系</a>连接这两个表。</p><p id="0c4d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">你可以在我的github  上下载<a class="ae ln" href="https://github.com/effiongcharles/note-taking-app-python" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir">完整的项目源代码。如果您有任何问题，请随时试用代码并联系我。</strong></a></p><p id="cbfa" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">祝你好运！</p></div></div>    
</body>
</html>