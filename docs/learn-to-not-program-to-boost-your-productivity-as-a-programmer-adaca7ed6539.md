# 作为程序员，学会不编程来提高你的生产力

> 原文：<https://levelup.gitconnected.com/learn-to-not-program-to-boost-your-productivity-as-a-programmer-adaca7ed6539>

## 如何在简单的 CLI 工具已经足够的情况下不进行编程——使用合适的工具完成工作。

![](img/05fd730444bde23a76afa03888f9f52e.png)

卡斯帕·卡米尔·鲁宾在 [Unsplash](https://unsplash.com/s/photos/programming?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) 上的照片

程序员不喜欢手工。他们总是倾向于找到最有效的工具来处理临时工作。

当没有适合这项工作的工具时，大多数人会转向为它编写脚本(或程序)。毕竟，我们是程序员。

但是我的建议是在编写脚本之前考虑使用老式的 CLI 工具。在处理基于文本的数据文件时尤其如此。在 Unix/Linux 生态系统中已经有许多内置工具来操作文本，因为 Unix 有一个传统，即[比其他数据格式更喜欢文本](https://en.wikipedia.org/wiki/Unix_philosophy)。

对那些只有 MS-Windows 背景的程序员的一个建议:认真考虑学习 Unix，即使是基础水平，那么一个新的世界将向你打开。

# 一个简单的要求

假设我们从老板那里得到一份工作:

*   有两个文本文件:A.txt 和 B.txt .每个文件有 1048576 行(这是现代 MS Office Excel 中的行数上限，所以你无法用 Excel 完成这项工作🤪).
*   这些文件中的每一行都是社会安全号码，格式为“AAA-GG-SSSS”
*   我们想要的是存在于 A.txt 中而不存在于 B.txt 中的 SSN(即 A-B)。
*   然后从上一步的结果集中提取“AAA”部分到一个单独的列中，将每一行转换为“AAA，AAA-GG-SSSS”。
*   然后从结果集中删除重复项。
*   最后，按降序对结果集进行排序。

看起来没有单一的工具可以解决这个问题，让我们用我最近最喜欢的编程语言 Golang 来写吧。

# 与 Golang 一起完成任务

这是一个没有任何惊喜的琐碎脚本。

这 90 行代码不言自明。我们一步一步地解决问题。

我们读取文件，计算差异，进行转换，消除重复，对结果进行排序，最后打印输出。

然后我们可以运行它:

```
$ go run main.go A.txt B.txt
```

这个脚本简单明了，非常适合这个任务。我的 MBP 只用了不到五秒钟就处理了数百万行。

唯一的缺点是对 Golang 工具链的依赖，因为 Golang 目前没有预装在大多数机器上。

# 用 Python 重写脚本

至于预装，Python 和 Golang 完全不一样。它存在于几乎所有的 Linux/Unix 发行版中。就连 MacOSX 也已经预装了。

如果我们可以用 Python 脚本来完成这项工作，那么需要的先决条件就更少了。

感谢 Python 简洁的语法，我们用不到 30 行代码就达到了同样的目的。向上运行:

```
python3 diff.py A.txt B.txt
```

这个脚本的性能大致相当于 Golang 版本。但是它显然更容易维护，因为它更短。

因此，Python 脚本似乎是当前任务的更好解决方案。它适用于世界上大多数非 Windows 计算机，简单易学，使用起来令人愉快。

有没有更好的解决办法？是的，有。是终极一个。

# 利用 shell 命令

我们可以编写几个 Linux/Unix 命令行工具来完成这项工作。

*   **comm** :选择或拒绝两个文件共有的行。我们使用这个命令来执行“A-B”操作。`comm`要求两个输入文件应该排序。
*   **awk** :我们用它来转换结果集的每一行。
*   **uniq** :删除重复行。
*   **排序:**对文本行进行排序。

放在一起:

打印出结果大约需要 20 秒钟。

```
sh diff.sh A.txt B.txt
```

如上所述，命令`comm`要求其输入文件应该被排序。所以我们先对这两个文件进行排序，将结果重定向到临时文件 *sortedA.txt* 和 *sortedB.txt* 。在这个脚本的最后，我们删除这两个文件。

这个脚本的核心是下面的一行:

```
comm -23 sortedA.txt sortedB.txt|awk -F'-' '{print $1","$0;}'|uniq|sort -r
```

这里有四个命令，用“`|`”(流水线字符)联系。这意味着这些命令像链条一样连接在一起。前一个命令的输出将成为下一个命令的输入。关于这些命令的详细用法，你可以参考他们的手册。

但是这里的要点是，我们成功地将脚本的行数从 90 减少到了 8。

而且这些命令都是现代*nix (Linux/Unix/MacOSX)电脑内置的。你不必安装任何新的程序来做这些琐碎的工作。

**注意**:事实上，有一个简单的解决方案。只是把`comm`换成了`grep`:

```
grep -vFf B.txt A.txt|awk -F'-' '{print $1","$0;}'|uniq|sort -r
```

由于在使用`grep`之前不需要对输入文件进行排序，这个解决方案是我能发现的最短最简单的一个。但它有一个不可接受的缺点，那就是比`comm`版本慢得多。我甚至没有耐心去计算要花多少时间才能完成。

# 结论

程序员喜欢编程。但是在某些情况下，你应该学会不编程。

程序员的责任是用正确的工具构建一个合适的解决方案，用最少的资源解决问题。

**编码是我们的工作，但不是全部。**

干杯。

另请参见:

车丹用 300 行代码在 Golang 中构建一个终端仪表板