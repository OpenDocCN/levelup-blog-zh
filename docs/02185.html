<html>
<head>
<title>Top Python Tools for Developing Secure, Quality Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用于开发安全、高质量代码的顶级Python工具</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/top-python-tools-for-developing-secure-quality-code-4b3f5ec1e2de?source=collection_archive---------6-----------------------#2020-02-25">https://levelup.gitconnected.com/top-python-tools-for-developing-secure-quality-code-4b3f5ec1e2de?source=collection_archive---------6-----------------------#2020-02-25</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="a6a1" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">编写高质量、无错误的代码很难，让这些python工具为您做一些工作吧</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/e99f633285e44d447997920a4ac7b467.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M1foyDuyojQe3Ajb-91FMg.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">基于<a class="ae ky" href="https://unsplash.com/@euwars?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">法扎德·纳兹菲</a>在<a class="ae ky" href="https://unsplash.com/s/photos/best-code?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</figcaption></figure><p id="783a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">软件工程师每天都在使用无数的工具来提高代码的质量、安全性和可维护性。我将看看几个我最喜欢的python工具，并对它们的易用性进行评估:安装、运行和自动化的难易程度、质量影响、可维护性影响和安全性影响。</p><p id="68c7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我还将简要介绍如何在CI管道中包含所有这些工具，以自动化它们的使用和有效性。</p><h1 id="2ed4" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">工具</h1><h2 id="bf90" class="mn lw it bd lx mo mp dn mb mq mr dp mf li ms mt mh lm mu mv mj lq mw mx ml my bi translated">Pipenv</h2><p id="22f3" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated"><a class="ae ky" href="https://github.com/pypa/pipenv" rel="noopener ugc nofollow" target="_blank"> Pipenv </a>是一个针对python的开发管理和依赖管理工具，最初由<a class="ae ky" href="https://github.com/psf/requests" rel="noopener ugc nofollow" target="_blank">请求</a>的作者<a class="ae ky" href="https://www.kennethreitz.org/" rel="noopener ugc nofollow" target="_blank"> Kenneth Reitz </a>编写。</p><p id="67de" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你使用python开发过一段时间，你可能也使用过<a class="ae ky" href="https://virtualenv.pypa.io/en/latest/" rel="noopener ugc nofollow" target="_blank"> virtualenv </a>或<a class="ae ky" href="https://docs.python.org/3/library/venv.html" rel="noopener ugc nofollow" target="_blank"> venv </a>来管理你的环境，以及可信赖的<code class="fe ne nf ng nh b">pip freeze &gt; requirements.txt</code>来进行依赖管理。这在很多情况下仍然完全有效，但是我发现pipenv更方便、更强大，而且它可以像non via <code class="fe ne nf ng nh b">Pipfile</code>和<code class="fe ne nf ng nh b">Pipfile.lock</code>一样进行依赖固定，这在很大程度上取代了<code class="fe ne nf ng nh b">requirements.txt</code>，可以带来更可靠的部署。</p><p id="1cd3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">由于<a class="ae ky" href="http://pyfound.blogspot.com/2019/11/seeking-developers-for-paid-contract.html" rel="noopener ugc nofollow" target="_blank"> Python软件基金会拨出资金用于改进pip </a>以及pipenv在2019年缺乏实质性进展，我对pipenv的未来有点担心，但我认为pipenv对于大多数Python用户来说仍然是一个优秀的工具。</p><p id="8990" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">网址:<a class="ae ky" href="https://pipenv.kennethreitz.org/en/latest/" rel="noopener ugc nofollow" target="_blank">https://pipenv.kennethreitz.org/en/latest/</a></p><p id="e670" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">月下载量:2，111，976</p><p id="c6c2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">备选方案:<a class="ae ky" href="https://python-poetry.org/" rel="noopener ugc nofollow" target="_blank">诗词</a>，<a class="ae ky" href="https://virtualenv.pypa.io/en/latest/" rel="noopener ugc nofollow" target="_blank">才女</a>，<a class="ae ky" href="https://docs.python.org/3/library/venv.html" rel="noopener ugc nofollow" target="_blank">才女</a></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ni nj l"/></div></figure><h2 id="c0f7" class="mn lw it bd lx mo mp dn mb mq mr dp mf li ms mt mh lm mu mv mj lq mw mx ml my bi translated">奥克罗纳</h2><p id="ac90" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">我在这里有点偏见，因为Ochrona是我正在积极开发的工具，并希望在2020年发布，所以我也将看看这种类型工具的几个替代方案。</p><p id="2e07" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Ochrona是一个依赖分析或软件组合分析工具，用于检查您的开源依赖关系是否存在已知漏洞。pyup.io的Safety<a class="ae ky" href="https://pyup.io/safety/" rel="noopener ugc nofollow" target="_blank">是这个领域另一个非常受欢迎的开源工具。我认为Ochrona优于竞争对手的地方在于。</a></p><ol class=""><li id="5f15" class="nk nl it lb b lc ld lf lg li nm lm nn lq no lu np nq nr ns bi translated">它提供了一个免费的选项，不管它是用于开源项目还是商业项目。免费选项总是使用最新的漏洞信息。</li><li id="5778" class="nk nl it lb b lc nt lf nu li nv lm nw lq nx lu np nq nr ns bi translated">在磁盘使用和IO方面非常轻量级。它不是一个需要拉整个漏洞数据库的本地工具，而是SaaS，所以它只需对一个公共API进行一次调用。</li><li id="4ccf" class="nk nl it lb b lc nt lf nu li nv lm nw lq nx lu np nq nr ns bi translated">出色的漏洞数据，每天而不是每月更新，提供比竞争对手更多的漏洞细节。即使是免费用户。</li></ol><p id="61eb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">网址:<a class="ae ky" href="https://ochrona.dev/" rel="noopener ugc nofollow" target="_blank">https://ochrona.dev/</a></p><p id="9227" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">每月下载量:未发布</p><p id="69e0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">替代品:<a class="ae ky" href="https://pyup.io/safety/" rel="noopener ugc nofollow" target="_blank">安全</a>，<a class="ae ky" href="https://snyk.io/" rel="noopener ugc nofollow" target="_blank"> snyk ($) </a></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ni nj l"/></div></figure><h2 id="c4da" class="mn lw it bd lx mo mp dn mb mq mr dp mf li ms mt mh lm mu mv mj lq mw mx ml my bi translated">强盗</h2><p id="a057" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">如果我必须推荐一个工具来提高你的python项目的安全性，那就是<a class="ae ky" href="https://bandit.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank"> Bandit </a>。Bandit最初来自OpenStack，尽管现在由<a class="ae ky" href="https://github.com/PyCQA" rel="noopener ugc nofollow" target="_blank"> PyCQA </a>维护。Bandit是一个开源的SAST工具，在某些方面，它的行为也像一个关注安全的linter。这对于捕捉不安全的配置、已知的不安全模块使用、硬编码凭证、断言等问题非常有用。</p><p id="8335" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Bandit是免费的、可配置的、快速的。我想不出有什么令人信服的理由不将它添加到您的项目中。</p><p id="f15d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">网址:<a class="ae ky" href="https://github.com/PyCQA/bandit" rel="noopener ugc nofollow" target="_blank">https://github.com/PyCQA/bandit</a></p><p id="3839" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">月下载量:575，101</p><p id="cf18" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">替代品:<a class="ae ky" href="https://pyre-check.org/" rel="noopener ugc nofollow" target="_blank">柴堆</a>，<a class="ae ky" href="https://github.com/python-security/pyt" rel="noopener ugc nofollow" target="_blank"> pyt </a>，<a class="ae ky" href="https://github.com/landscapeio/dodgy" rel="noopener ugc nofollow" target="_blank">dodge</a></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ni nj l"/></div></figure><h2 id="8670" class="mn lw it bd lx mo mp dn mb mq mr dp mf li ms mt mh lm mu mv mj lq mw mx ml my bi translated">黑色</h2><p id="e415" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">Black是一个基于通用Pep-8风格指南的固执己见的代码格式化工具。虽然Pep-8和许多用于检查Pep-8符合性的工具(如pycodestyle或flake8)对于验证是否符合Pep-8指南非常优秀，但Black是一种代码格式化程序，会自动将您的代码更新为Black的样式，这是Pep-8的超集。</p><p id="235d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我以前写过关于黑色的文章，所以它出现在这个列表中并不奇怪。与传统的linters相比，Black节省了时间，传统的linters通常要求您更新代码以符合标准，并且它在配置方面也非常有限，这意味着如果您以前使用过它，任何其他使用Black的项目都应该看起来非常熟悉。</p><div class="ny nz gp gr oa ob"><a href="https://medium.com/swlh/black-is-the-way-e034af9089ad" rel="noopener follow" target="_blank"><div class="oc ab fo"><div class="od ab oe cl cj of"><h2 class="bd iu gy z fp og fr fs oh fu fw is bi translated">黑色是出路</h2><div class="oi l"><h3 class="bd b gy z fp og fr fs oh fu fw dk translated">Mando说“格式化你的代码”</h3></div><div class="oj l"><p class="bd b dl z fp og fr fs oh fu fw dk translated">medium.com</p></div></div><div class="ok l"><div class="ol l om on oo ok op ks ob"/></div></div></a></div><p id="30c8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">网址:<a class="ae ky" href="https://github.com/psf/black" rel="noopener ugc nofollow" target="_blank">https://github.com/psf/black</a></p><p id="60eb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">月下载量:1，891，711</p><p id="2d82" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">替代品:<a class="ae ky" href="https://github.com/PyCQA/flake8" rel="noopener ugc nofollow" target="_blank"> flake8 </a>，<a class="ae ky" href="https://github.com/PyCQA/pylint" rel="noopener ugc nofollow" target="_blank"> pylint </a></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ni nj l"/></div></figure><h2 id="4006" class="mn lw it bd lx mo mp dn mb mq mr dp mf li ms mt mh lm mu mv mj lq mw mx ml my bi translated">Mypy</h2><p id="9716" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">Mypy 是python的可选静态类型检查器。python中的类型提示是在<a class="ae ky" href="https://www.python.org/dev/peps/pep-0484/" rel="noopener ugc nofollow" target="_blank"> PEP 484 </a>中引入的，mypy利用这些类型提示对您的项目进行静态类型检查。Python仍然有动态鸭类型，但是添加静态类型检查可以帮助您更早地发现错误，减少测试和调试，并且增加了代码内文档的级别。</p><p id="c751" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">大公司也在支持python中的静态类型检查，Dropbox(在吉多·范·罗苏姆任期内)使用mypy检查了超过400万行python代码。其他主要的python用户，如Instagram，也开始使用静态类型检查(尽管有他们自己的工具)。</p><p id="c585" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">网址:<a class="ae ky" href="http://mypy-lang.org/" rel="noopener ugc nofollow" target="_blank">http://mypy-lang.org/</a></p><p id="bb1e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">月下载量:2 487 228次</p><p id="d4db" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">替代品:<a class="ae ky" href="https://pyre-check.org/" rel="noopener ugc nofollow" target="_blank">柴堆</a></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ni nj l"/></div></figure><h1 id="b3f3" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">把所有的放在一起</h1><p id="7e1a" class="pw-post-body-paragraph kz la it lb b lc mz ju le lf na jx lh li nb lk ll lm nc lo lp lq nd ls lt lu im bi translated">对于这个例子，我将使用<a class="ae ky" href="https://travis-ci.com/" rel="noopener ugc nofollow" target="_blank"> Travis-CI </a>，但是配置您正在使用的任何CI工具应该是一个相似的过程，尽管使用不同的语法。对于这个例子，我将使用一个简单的故意不安全的、有问题的flask应用程序。</p><p id="c599" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们的<code class="fe ne nf ng nh b">app.py</code>文件将如下所示。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="7c4c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们的<code class="fe ne nf ng nh b">Pipfile</code>会是这个样子。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="5d63" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，我们将在目录的根目录下创建一个<code class="fe ne nf ng nh b">.travis.yml</code>文件，它包含以下内容。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="37f8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果您在这里查看构建<a class="ae ky" href="https://travis-ci.com/beatsbears/vulnerable_flask/builds/149315498" rel="noopener ugc nofollow" target="_blank">，您会看到每个工具要么标记了一个错误，要么指示需要修复。然而，如果我们做一些修改，正如在</a><a class="ae ky" href="https://github.com/beatsbears/vulnerable_flask/pull/2" rel="noopener ugc nofollow" target="_blank">这个PR </a>中看到的，我们可以看到<a class="ae ky" href="https://travis-ci.com/beatsbears/vulnerable_flask/builds/150167077" rel="noopener ugc nofollow" target="_blank">我们得到了一个合格的版本</a>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oq"><img src="../Images/83040e31b1a285a753b6eaccbc24e1a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kJ2gqRkPFRhJCyq3cOrdAg.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">将Flask更新至没有已知漏洞的版本</figcaption></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi or"><img src="../Images/064ce31ee70546d9f41cf7fde144fc58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*91Zuh7NM8pPE3duw8yA56g.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">修复类型批注、禁用调试模式和样式格式</figcaption></figure><p id="61c3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">虽然这个例子只处理了一个CI平台，但是集成到大多数其他平台中是非常相似的，我强烈推荐将Travis-CI 用于开源项目。</p></div><div class="ab cl os ot hx ou" role="separator"><span class="ov bw bk ow ox oy"/><span class="ov bw bk ow ox oy"/><span class="ov bw bk ow ox"/></div><div class="im in io ip iq"><p id="f6c3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">你用什么工具来改进你的python代码？我很乐意听到任何建议或反馈。下面是我对提到的所有工具的排名。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ni nj l"/></div></figure></div></div>    
</body>
</html>