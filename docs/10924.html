<html>
<head>
<title>Access your AWS Lambda Logs with Grafana</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Grafana访问您的AWS Lambda日志</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/access-aws-cloudwatch-logs-with-grafana-2d75bfe25e4f?source=collection_archive---------1-----------------------#2022-01-26">https://levelup.gitconnected.com/access-aws-cloudwatch-logs-with-grafana-2d75bfe25e4f?source=collection_archive---------1-----------------------#2022-01-26</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="fef2" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">在本地主机上查看AWS日志再简单不过了。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/63064a02672aa98c7601c211273daddb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SovEUp_wI82Pcp8Aig_Bhg.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">图片来自<a class="ae ky" href="https://grafana.com/grafana/" rel="noopener ugc nofollow" target="_blank">Grafana.com</a></figcaption></figure><p id="c1b4" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">背景</strong></p><p id="02e9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我和我的团队大量使用AWS Lambda来托管我们的后端API。一切都很顺利，直到我们在生产中测试它。然后，我们需要通过AWS CloudWatch访问API的日志，我发现用起来不太友好。所以我开始四处寻找，看看我们是否有更容易访问日志的方法。原来我已经找到了格拉夫纳。</p><p id="f007" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://grafana.com/oss/grafana/" rel="noopener ugc nofollow" target="_blank">T5】格拉法纳T7】</a></p><blockquote class="lv lw lx"><p id="8835" class="kz la ly lb b lc ld ju le lf lg jx lh lz lj lk ll ma ln lo lp mb lr ls lt lu im bi translated">Grafana允许您查询、可视化、提醒和了解您的指标，无论它们存储在哪里。与您的团队一起创建、探索和共享漂亮的仪表板，培养数据驱动的文化。</p></blockquote><p id="4272" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">它是付费云服务附带的开源工具。它是一个工具，使我们能够创建衡量指标的仪表板，而不管数据存储在哪里。它可以在你托管的Kubernetes，AWS，GCP，Azure，Elastic等。</p><p id="d6cb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我是一个简单的人，我不是DevOps的专家。我使用Grafana的主要原因是为了使我的生产测试流程更加顺畅，并且能够更容易地访问我的AWS日志。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mc"><img src="../Images/d4ddd320ba438e0f5f297af4533c6cdc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PQ4m0_fC1yCXSX4W-FQ0gw.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">Grafana登录页面</figcaption></figure><p id="75b0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">按照简单的说明在这里安装Grafana<a class="ae ky" href="https://grafana.com/grafana/download?pg=oss-graf&amp;plcmt=resources" rel="noopener ugc nofollow" target="_blank"/>。之后，您将能够通过以下本地主机URL使用您最喜欢的浏览器访问Grafana。默认用户名和密码都是<strong class="lb iu"> admins </strong>:</p><pre class="kj kk kl km gt md me mf mg aw mh bi"><span id="1e53" class="mi mj it me b gy mk ml l mm mn"><a class="ae ky" href="http://localhost:3000" rel="noopener ugc nofollow" target="_blank">http://localhost:3000</a></span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mo"><img src="../Images/976d717e902bfc9c58f67c1c554a26e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cFFJDzXUxLmixC1W0Z-Xqg.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">(图片-1)配置-&gt;数据源</figcaption></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mp"><img src="../Images/f66bd95538e86e76e10e18f55db7a29b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uD_UfPrhMwRFFGOg3B63tQ.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">(图片-2)搜索云观察</figcaption></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mq"><img src="../Images/99709543e9069daab07fa42fbb3b53a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6n-wprLAFtIAY25gSsspHA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">(图3)填写AWS凭证</figcaption></figure><p id="9f48" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，您可以看到带有左侧面板的仪表板(图1)。前往面板，寻找添加数据源的配置。它将引导您到搜索面板；继续搜索CloudWatch(图片-2)。您将继续填写您的AWS详细信息(图3)。我正在使用accessKey和secretKey对。其余的都是可选的，现在可以让它为空。现在我们可以保存和测试。如果您的凭据有效，将弹出一个窗口，指示数据源正在工作。</p><p id="f082" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我的日志在哪里？！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mr"><img src="../Images/277ee6a3a3f60e66fe0f69bc55652df2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Rxlg5-19VSsmGtUTAa0-FA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">(图片-4)设置云观察</figcaption></figure><p id="b414" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">冷静点，我们开始吧。现在，再次转到您的左侧面板，并寻找探索。我们需要填写四个关键的东西来检索我们的日志(图4)。</p><ol class=""><li id="7ddd" class="ms mt it lb b lc ld lf lg li mu lm mv lq mw lu mx my mz na bi translated">确保您选择了正确的数据源。</li><li id="0820" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated">设置您的地区，尽管这是一个可选字段。</li><li id="bc66" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated">选择您的日志组，您可以选择多个日志组。</li><li id="310a" class="ms mt it lb b lc nb lf nc li nd lm ne lq nf lu mx my mz na bi translated">日志的查询。最简单查询如下所示:</li></ol><pre class="kj kk kl km gt md me mf mg aw mh bi"><span id="799a" class="mi mj it me b gy mk ml l mm mn">fields <a class="ae ky" href="http://twitter.com/timestamp" rel="noopener ugc nofollow" target="_blank">@timestamp</a>, <a class="ae ky" href="http://twitter.com/message" rel="noopener ugc nofollow" target="_blank">@message</a><br/>| sort <a class="ae ky" href="http://twitter.com/timestamp" rel="noopener ugc nofollow" target="_blank">@timestamp</a> desc<br/>| limit 20</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mc"><img src="../Images/91e199731a15a1f7d19b0a3d88caab42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d8qe2BULBjV7GCo4XpcqFA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">(图5)显示日志</figcaption></figure><p id="07cb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">最后，点击运行查询按钮，您将能够查看您的所有日志。</p><p id="7009" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">最终关键外卖</strong></p><p id="6b18" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Grafana能做的不仅仅是查看AWS Lambda的日志。本教程只是一个简单的例子，说明Grafana是如何工作的，以及我如何利用它来为自己谋利。给Grafana更多的时间来探索它是值得的。</p><p id="ddbf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我写了关于智能工具来简化和帮助我们的日常工作，请看这里:</p><div class="ng nh gp gr ni nj"><a rel="noopener  ugc nofollow" target="_blank" href="/tools-that-you-dont-know-you-need-for-development-a73bf699a0d4"><div class="nk ab fo"><div class="nl ab nm cl cj nn"><h2 class="bd iu gy z fp no fr fs np fu fw is bi translated">您不知道开发需要的工具</h2><div class="nq l"><h3 class="bd b gy z fp no fr fs np fu fw dk translated">使用正确的工具，聪明地工作</h3></div><div class="nr l"><p class="bd b dl z fp no fr fs np fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="ns l"><div class="nt l nu nv nw ns nx ks nj"/></div></div></a></div><p id="96f0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">如果你希望支持我并阅读更多来自Medium和我的优秀内容创作者的文章，你可以在这里加入Medium会员。</p></div></div>    
</body>
</html>