<html>
<head>
<title>Run unpublished Spark notebooks in Azure Synapse</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Azure Synapse中运行未发布的Spark笔记本</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/run-unpublished-spark-notebooks-in-azure-synapse-2a5f2e9935f3?source=collection_archive---------18-----------------------#2022-05-10">https://levelup.gitconnected.com/run-unpublished-spark-notebooks-in-azure-synapse-2a5f2e9935f3?source=collection_archive---------18-----------------------#2022-05-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="4fd1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您现在可以在Azure Synapse Analytics中引用未发布的Spark笔记本！</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/ce0408104f745c263eb656086319ec8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6Cw9PyY_d5IQDU-r"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">封面图片(<a class="ae lb" href="https://www.pexels.com/photo/woman-programming-on-a-notebook-1181359/" rel="noopener ugc nofollow" target="_blank">来源</a>)</figcaption></figure><p id="5320" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">以前，您只能引用已经发布到Synapse工作区的笔记本。换句话说，如果笔记本只存在于Git存储库中，那么您就没有机会从另一个笔记本中调用该笔记本——您必须简单地将所有代码放入一个笔记本中。</p><p id="ba49" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，您可以通过切换“父”笔记本中的选项来引用只存在于Git存储库中的笔记本。这位于笔记本设置中，如下图所示。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi lc"><img src="../Images/033cabdfaab0e6084ee08bb364437747.png" data-original-src="https://miro.medium.com/v2/resize:fit:598/format:webp/1*yItX6yREsXh3mYB15HZ0fA.png"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">启用未发布的笔记本参考</figcaption></figure><p id="9eee" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">激活此选项后，屏幕截图中的“主笔记本”现在可以引用仅存在于Git存储库中的其他笔记本。</p><p id="756c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">“我如何实际引用另一个笔记本”？很高兴你问了。让我们假设我们有一个笔记本，它有一个单元格来定义下面的add_one函数。这个笔记本将被称为“testNB”并存储在“TestFolder”文件夹中。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi ld"><img src="../Images/1417bfdb3796081b2100f7fbb024bb24.png" data-original-src="https://miro.medium.com/v2/resize:fit:428/format:webp/1*JjwbMHXPFVcMWsNRFC0nmA.png"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">笔记本样本</figcaption></figure><p id="a669" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">向函数传递一个数字，它返回加1的数字。现在如果我们想在可以引用未发布笔记本的“主笔记本”内部调用add_one怎么办？也很简单。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi le"><img src="../Images/6a1837ca46815c8f0937f4d77e39b3ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:726/format:webp/1*U9yl0E8VsTemNccwV6eL_Q.png"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">查阅笔记本</figcaption></figure><p id="70db" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">%run magic命令是引用/运行内部笔记本所需的命令。Spark甚至会提供intellisense来帮助您正确引用笔记本名称。</p><p id="9cea" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">不能和%run在同一个单元格中运行更多的代码，所以对add_one的调用是在第二个单元格中完成的。二加一等于三，电池的输出也是如此。在<strong class="jp ir">运行</strong>后，宁的“testNB”add _ one在“主笔记本”的Spark会话中变得可用。这是一个基本的例子，但是您可以想象将代码分割到多个笔记本中是多么强大，而不需要事先将它发布到工作区:)</p><p id="1437" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果您想知道Synapse如何选择运行笔记本版本，文档是这样解释的:</p><ul class=""><li id="86cc" class="lf lg iq jp b jq jr ju jv jy lh kc li kg lj kk lk ll lm ln bi translated">如果禁用了未发布的笔记本引用，则始终运行已发布的版本</li><li id="e951" class="lf lg iq jp b jq lo ju lp jy lq kc lr kg ls kk lk ll lm ln bi translated">如果启用，优先级为:编辑/新建&gt;提交&gt;发布</li></ul><p id="3537" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">关于这个功能的所有细节，请参考官方文档<a class="ae lb" href="https://docs.microsoft.com/en-us/azure/synapse-analytics/spark/apache-spark-development-using-notebooks#reference-unpublished-notebook" rel="noopener ugc nofollow" target="_blank">https://docs . Microsoft . com/en-us/azure/synapse-analytics/spark/Apache-spark-development-using-notebooks # reference-unpublished-notebook</a></p></div></div>    
</body>
</html>