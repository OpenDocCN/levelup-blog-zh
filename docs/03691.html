<html>
<head>
<title>Screenshot websites with Ruby on Rails and Google Puppeteer on AWS Elastic Beanstalk</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Ruby on Rails和Google puppet er on AWS Elastic Beanstalk对网站进行截图</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/screenshot-websites-with-ruby-on-rails-and-google-puppeteer-on-aws-elastic-beanstalk-6ace17487c26?source=collection_archive---------19-----------------------#2020-05-22">https://levelup.gitconnected.com/screenshot-websites-with-ruby-on-rails-and-google-puppeteer-on-aws-elastic-beanstalk-6ace17487c26?source=collection_archive---------19-----------------------#2020-05-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/b947a8f0e6c55cb5313bc09656b521d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QosA6LiRFx4r1opYgq2bKQ.png"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">一个显示https://wikipedia.org截图的Rails应用</figcaption></figure><p id="f283" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">在macOS上，从零到一个可以抓取整页网址截图的Rails应用程序只花了不到一个小时的时间。为了将它部署到AWS Elastic Beanstalk EC2服务器上，又花了几个小时。困难来自于Amazon Linux 2，它缺少许多依赖项，并且不容易通过<code class="fe ld le lf lg b">yum</code>包管理器提供所有的依赖项。大多数在线讨论都是针对基于Debian的系统，而Amazon Linux与RHEL/CentOS兼容。</p><p id="ebce" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">因此，这是您使用Grover和Puppeteer部署到AWS Elastic Beanstalk的Rails应用程序所需的配置。</p><p id="e21f" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">首先你需要格罗弗宝石:</p><p id="3b17" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated"><code class="fe ld le lf lg b">bundle add grover</code></p><p id="be42" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">然后<a class="ae lh" href="https://developers.google.com/web/tools/puppeteer" rel="noopener ugc nofollow" target="_blank">谷歌木偶师</a>:</p><p id="d014" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated"><code class="fe ld le lf lg b">yarn add puppeteer</code></p><p id="abdb" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">然后你需要添加几个<code class="fe ld le lf lg b">yum</code>包到你的<code class="fe ld le lf lg b">.ebextensions</code>配置中:</p><figure class="li lj lk ll gt ju"><div class="bz fp l di"><div class="lm ln l"/></div></figure><p id="a582" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">如你所见，许多必须通过<code class="fe ld le lf lg b">rpm</code>安装。呈现URL的无头Chromium应用程序需要这些包。</p><p id="142a" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">应该就是这样了，一个带有Google Puppeteer的Rails应用程序的工作部署。</p><p id="4d3b" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">如果你想要有用的截屏，我也建议改变木偶师的默认设置。您可以通过<code class="fe ld le lf lg b">config/initializers/grover.rb</code>配置Grover，例如:</p><figure class="li lj lk ll gt ju"><div class="bz fp l di"><div class="lm ln l"/></div></figure><p id="413b" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">你可以在这里看到这个Rails应用的源代码；</p><p id="9bfe" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated"><a class="ae lh" href="https://github.com/paulmwatson/elasticbeanstalk-rails-grover-puppeteer/blob/master/.ebextensions/00_packages.config" rel="noopener ugc nofollow" target="_blank">https://github . com/paulmwatson/elastic beanstalk-rails-Grover-puppet eer/</a></p></div></div>    
</body>
</html>