<html>
<head>
<title>Learning C++: Storing Class Objects in Containers</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">学习C++:在容器中存储类对象</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/learning-c-storing-class-objects-in-containers-ca12546f1a89?source=collection_archive---------2-----------------------#2020-09-07">https://levelup.gitconnected.com/learning-c-storing-class-objects-in-containers-ca12546f1a89?source=collection_archive---------2-----------------------#2020-09-07</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/dbcba20ae1b23b24deb5054533060f6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*yI0rN5Yvv9gNGxRO"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">安妮·斯普拉特在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="fd91" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">从类实例化的对象可以存储在各种C++容器中，就像容器存储各种内置数据类型的变量一样。在这篇文章中，我将向你展示如何在数组和向量中存储类对象，以及如何在这些对象被存储后访问它们。</p><h1 id="c86d" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">类别定义</h1><p id="6b46" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我将用来演示如何在容器中存储类对象的类是一个<code class="fe mh mi mj mk b">Student</code>类，它包含学生的姓名、学号和一个向量，向量中包含他们的学期成绩。尤其重要的是，我有一个成员变量，它本身就是一个容器，这样我就可以向你展示如何从另一个容器中访问成绩(这只是有点混乱)。</p><p id="0f0d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下面是<code class="fe mh mi mj mk b">Student </code>(名义)等级定义:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="0945" class="mt lf it mk b gy mu mv l mw mx">class Student {<br/>private:<br/>  string name;<br/>  string id;<br/>  vector&lt;int&gt; grades;</span><span id="6c2d" class="mt lf it mk b gy my mv l mw mx">public:<br/>  Student(string n, string i) {<br/>    name = n;<br/>    id = i;<br/>  }</span><span id="babe" class="mt lf it mk b gy my mv l mw mx">  Student() {<br/>    name = "";<br/>    id = "";<br/>  }</span><span id="8df9" class="mt lf it mk b gy my mv l mw mx">  string getName() { return name; }<br/>  string getId() { return id; }</span><span id="fbb1" class="mt lf it mk b gy my mv l mw mx">  void addGrade(int grade) {<br/>    grades.push_back(grade);<br/>  }<br/>};</span></pre><h1 id="8987" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">在数组中存储和访问类对象</h1><p id="0728" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">现在让我们创建几个对象，并把它们放在一个数组中。数组是通过使用<code class="fe mh mi mj mk b">Student</code>类作为数据类型，后跟名称和要存储的元素数量来创建的。这是一行代码:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="44c9" class="mt lf it mk b gy mu mv l mw mx">const int numStudents = 3;<br/>Student students[numStudents];</span></pre><p id="7534" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下面是使用<code class="fe mh mi mj mk b">Student</code>类定义的完整程序:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="3556" class="mt lf it mk b gy mu mv l mw mx">int main ()<br/>{<br/>  Student stu1("Jane Smith", "1234");<br/>  stu1.addGrade(77);<br/>  stu1.addGrade(81);<br/>  stu1.addGrade(88);<br/>  Student stu2("John Jones", "2345");<br/>  stu2.addGrade(91);<br/>  stu2.addGrade(81);<br/>  stu2.addGrade(66);<br/>  Student stu3("Barb Green", "4321");<br/>  stu3.addGrade(81);<br/>  stu3.addGrade(82);<br/>  stu3.addGrade(83);<br/>  const int numStudents = 3;<br/>  Student students[numStudents];<br/>  students[0] = stu1;<br/>  students[1] = stu2;<br/>  students[2] = stu3;<br/>  return 0;<br/>}</span></pre><p id="9587" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在让我们看看如何访问数组中的对象来显示它们的名称和id。如果一个<code class="fe mh mi mj mk b">Student</code>对象不在容器中，我们可以访问对象名，后跟点操作符和我们想要的成员函数名。对于数组中的对象，对象名被替换为数组名和我们正在访问的索引位置。</p><p id="dbfc" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下面的代码片段演示了如何做到这一点:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="f08e" class="mt lf it mk b gy mu mv l mw mx">for (int i = 0; i &lt; numStudents; i++) {<br/>  cout &lt;&lt; students[i].getName() &lt;&lt; ", "<br/>       &lt;&lt; students[i].getId() &lt;&lt; endl;<br/>}</span></pre><p id="7c9b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">以下是我们运行程序时的输出:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="8feb" class="mt lf it mk b gy mu mv l mw mx">Jane Smith, 1234<br/>John Jones, 2345<br/>Barb Green, 4321</span></pre><p id="09c7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">那还不算太糟。现在让我们更深入一层，访问存储在向量中的分数。由于<code class="fe mh mi mj mk b">grades</code>向量是私有的，我们需要一个getter成员函数来检索分数:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="fe4a" class="mt lf it mk b gy mu mv l mw mx">void showGrades() {<br/>  for (int grade : grades) {<br/>    cout &lt;&lt; grade &lt;&lt; " ";<br/>  }<br/>}</span></pre><p id="9563" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在我们可以将对这个成员函数的调用合并到我们的程序中:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="f967" class="mt lf it mk b gy mu mv l mw mx">for (int i = 0; i &lt; numStudents; i++) {<br/>  cout &lt;&lt; students[i].getName() &lt;&lt; ", "<br/>       &lt;&lt; students[i].getId() &lt;&lt; endl;<br/>  cout &lt;&lt; "Grades: ";<br/>  students[1].showGrades();<br/>  cout &lt;&lt; endl;<br/>}</span></pre><p id="d28d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在的输出是:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="12c1" class="mt lf it mk b gy mu mv l mw mx">Jane Smith, 1234<br/>Grades: 91 81 66<br/>John Jones, 2345<br/>Grades: 91 81 66<br/>Barb Green, 4321<br/>Grades: 91 81 66</span></pre><p id="5089" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">类似地，我们可以编写成员函数来计算平均分数，找出最低和最高分数，等等。但是现在对于数组来说已经足够了。让我们继续学习矢量。</p><h1 id="6025" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">在向量中存储和访问类对象</h1><p id="0c11" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">除了向量和数组之间的所有区别之外，使用向量存储类对象和使用数组的主要区别在于如何声明向量来存储类对象。</p><p id="3e20" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以使用前面所示的相同的<code class="fe mh mi mj mk b">Student </code>类定义。我们可以使用与前面相同的对象实例化代码来创建三个学生。我们必须做的第一个更改是用创建向量的语句替换数组声明语句:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="50db" class="mt lf it mk b gy mu mv l mw mx">vector&lt;Student&gt; students;</span></pre><p id="0128" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们不需要一个常数来表示学生的数量，因为如果我们需要知道向量中有多少元素，我们可以使用<code class="fe mh mi mj mk b">size</code>成员函数，并且因为我们可以使用一个范围<code class="fe mh mi mj mk b">for </code>循环来遍历向量，所以我们不需要这个循环的常数。</p><p id="2376" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们程序的其余部分可以像我们之前写的那样使用。我们将使用相同的点符号来访问对象的成员函数，将数组符号(<code class="fe mh mi mj mk b">students[n]</code>)替换为向量名称，例如当我们将学生添加到向量时:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="bdec" class="mt lf it mk b gy mu mv l mw mx">students.push_back(stu1);<br/>students.push_back(stu2);<br/>students.push_back(stu3);</span></pre><p id="d971" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">记住这些，下面是在vector中存储和访问<code class="fe mh mi mj mk b">Student</code>对象的程序:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="66e8" class="mt lf it mk b gy mu mv l mw mx">#include &lt;iostream&gt;<br/>#include &lt;vector&gt;<br/>using namespace std;</span><span id="d0cd" class="mt lf it mk b gy my mv l mw mx">// class definition goes here</span><span id="59d3" class="mt lf it mk b gy my mv l mw mx">int main ()<br/>{<br/>  Student stu1("Jane Smith", "1234");<br/>  stu1.addGrade(77);<br/>  stu1.addGrade(81);<br/>  stu1.addGrade(88);<br/>  Student stu2("John Jones", "2345");<br/>  stu2.addGrade(91);<br/>  stu2.addGrade(81);<br/>  stu2.addGrade(66);<br/>  Student stu3("Barb Green", "4321");<br/>  stu3.addGrade(81);<br/>  stu3.addGrade(82);<br/>  stu3.addGrade(83);<br/>  vector&lt;Student&gt; students;<br/>  students.push_back(stu1);<br/>  students.push_back(stu2);<br/>  students.push_back(stu3);<br/>  for (Student stdnt : students) {<br/>    cout &lt;&lt; stdnt.getName() &lt;&lt; ", " &lt;&lt; stdnt.getId() &lt;&lt; endl;<br/>    cout &lt;&lt; "Grades: ";<br/>    stdnt.showGrades();<br/>    cout &lt;&lt; endl;<br/>  }<br/>  return 0;<br/>}</span></pre><p id="7cb4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">以下是该程序的输出:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="e05f" class="mt lf it mk b gy mu mv l mw mx">Jane Smith, 1234<br/>Grades: 77 81 88<br/>John Jones, 2345<br/>Grades: 91 81 66<br/>Barb Green, 4321<br/>Grades: 81 82 83</span></pre><h1 id="667e" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">下课了</h1><p id="da69" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">这就是关于在数组和向量容器中存储类对象的概述。在我的下一篇文章中，我将转移到一个更技术性但更有用的话题——操作符重载。</p><p id="cdfa" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">感谢您的阅读，请在<a class="ae kf" href="mailto:mmmcmillan1@att.net" rel="noopener ugc nofollow" target="_blank">mmmcmillan1@att.net</a>给我发电子邮件，提出意见和建议。如果你对我的在线编程课程感兴趣，请访问<a class="ae kf" href="https://learningcpp.teachable.com" rel="noopener ugc nofollow" target="_blank">https://learningcpp.teachable.com</a>。</p></div></div>    
</body>
</html>