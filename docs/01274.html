<html>
<head>
<title>Understand browser readyState and how to track the interactivity of the content on your web page</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">了解浏览器就绪状态以及如何跟踪网页内容的交互性</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/understand-browser-readystate-and-how-to-track-the-interactivity-of-the-content-on-your-web-page-8d2802f29aa?source=collection_archive---------8-----------------------#2019-12-10">https://levelup.gitconnected.com/understand-browser-readystate-and-how-to-track-the-interactivity-of-the-content-on-your-web-page-8d2802f29aa?source=collection_archive---------8-----------------------#2019-12-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="5872" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">了解如何处理浏览器事件和文档的状态，以便进行加载、交互和完成</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/adfed8c65175f3b7553d66f13fb18f51.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VMj9mdbz2dRB09MQcuGTkw.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">文档的不同就绪状态</figcaption></figure><p id="d7bd" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">可以使用<code class="fe lr ls lt lu b">document</code>对象的<code class="fe lr ls lt lu b">readyState</code>属性来访问文档的当前状态。<code class="fe lr ls lt lu b">document.readyState</code>告诉我们页面加载的状态。</p><p id="083a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">有3种不同的可能状态:</p><ul class=""><li id="6da8" class="lv lw iq kx b ky kz lb lc le lx li ly lm lz lq ma mb mc md bi translated"><code class="fe lr ls lt lu b"><strong class="kx ir">loading</strong></code> —正在加载文档(正在下载/解析<code class="fe lr ls lt lu b">.html</code>文件)</li><li id="6e84" class="lv lw iq kx b ky me lb mf le mg li mh lm mi lq ma mb mc md bi translated"><code class="fe lr ls lt lu b"><strong class="kx ir">interactive</strong></code> —在这种状态下，DOM被加载并可访问。然而，像图像、样式表和JavaScript文件这样的资源还没有完成下载/加载/解析。</li><li id="963b" class="lv lw iq kx b ky me lb mf le mg li mh lm mi lq ma mb mc md bi translated"><code class="fe lr ls lt lu b"><strong class="kx ir">complete</strong></code> —文档和图像/样式表等所有资源已加载完毕。</li></ul><p id="1fcc" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">让我们看一个例子。我们有一个网站<code class="fe lr ls lt lu b">gitconnected.com</code>，让我们比较一下在浏览器中输入URL并按回车键时的<code class="fe lr ls lt lu b">readyState</code>。</p><h1 id="f4b3" class="mj mk iq bd ml mm mn mo mp mq mr ms mt jw mu jx mv jz mw ka mx kc my kd mz na bi translated">1.装货</h1><p id="1048" class="pw-post-body-paragraph kv kw iq kx b ky nb jr la lb nc ju ld le nd lg lh li ne lk ll lm nf lo lp lq ij bi translated">从服务器下载<code class="fe lr ls lt lu b">index.html</code>文件(如果没有指定，这是默认值)并解析它。如果您包含了任何<code class="fe lr ls lt lu b">script</code>标签，那么这些标签也会被下载、解析和执行。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ng"><img src="../Images/b895ff7467a6fc3ea98421e7f17fe316.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PVyyOJj-l0oV4h9187JaCw.png"/></div></div></figure><p id="b0b3" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">一旦加载了HTML文件，<code class="fe lr ls lt lu b">readyState</code>就变成了<code class="fe lr ls lt lu b">interactive</code>，我们可以使用<code class="fe lr ls lt lu b">readystatechange</code>事件来检测这一点。</p><h1 id="9826" class="mj mk iq bd ml mm mn mo mp mq mr ms mt jw mu jx mv jz mw ka mx kc my kd mz na bi translated">2.相互作用的</h1><p id="7b1c" class="pw-post-body-paragraph kv kw iq kx b ky nb jr la lb nc ju ld le nd lg lh li ne lk ll lm nf lo lp lq ij bi translated">在<code class="fe lr ls lt lu b">interactive</code>状态下，下载css/image文件等附加文件。一旦<code class="fe lr ls lt lu b">readyState</code>状态为<code class="fe lr ls lt lu b">interactive</code>，这意味着DOM已经加载，但是资源正在下载。当<code class="fe lr ls lt lu b">readyState</code>从<code class="fe lr ls lt lu b">loading</code>变为<code class="fe lr ls lt lu b">interactive</code>时，也触发<code class="fe lr ls lt lu b">DOMContentLoaded</code>事件。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ng"><img src="../Images/86dbc954cff6d14788d383e3c224f393.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jMTzq4VkADfI1IQIajbesA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">交互状态</figcaption></figure><p id="0877" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">一旦下载并解析完所有文件，文档<code class="fe lr ls lt lu b">readystate</code>将变成<code class="fe lr ls lt lu b">complete</code>。在这种状态下，页面的所有资源都是可用的。</p><h1 id="487c" class="mj mk iq bd ml mm mn mo mp mq mr ms mt jw mu jx mv jz mw ka mx kc my kd mz na bi translated">3.完成</h1><p id="ca16" class="pw-post-body-paragraph kv kw iq kx b ky nb jr la lb nc ju ld le nd lg lh li ne lk ll lm nf lo lp lq ij bi translated">当<code class="fe lr ls lt lu b">readyState</code>更改为<code class="fe lr ls lt lu b">complete</code>时，意味着文档现在被解析和加载<strong class="kx ir">和</strong>所有已知的附加资源，如CSS、images和JS也已经被解析和加载。</p><h1 id="476f" class="mj mk iq bd ml mm mn mo mp mq mr ms mt jw mu jx mv jz mw ka mx kc my kd mz na bi translated"><code class="fe lr ls lt lu b">readyStateChange</code>事件</h1><p id="f486" class="pw-post-body-paragraph kv kw iq kx b ky nb jr la lb nc ju ld le nd lg lh li ne lk ll lm nf lo lp lq ij bi translated">为了检测状态变化，我们可以在文档中添加<code class="fe lr ls lt lu b">readyStateChange</code>事件监听器。</p><pre class="kg kh ki kj gt nh lu ni nj aw nk bi"><span id="66e6" class="nl mk iq lu b gy nm nn l no np">document.addEventListener('readystatechange', function(ev) {<br/>    console.log(<strong class="lu ir">document.readyState</strong>)<br/>});</span></pre><p id="3412" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">上述状态的完整示例:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="4c8b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">参考:<a class="ae ns" href="https://developer.mozilla.org/en-US/docs/Web/API/Document/readyState" rel="noopener ugc nofollow" target="_blank"> MDN </a></p><p id="7c67" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">跟随<a class="nt nu ep" href="https://medium.com/u/f9ffc26e7e69?source=post_page-----8d2802f29aa--------------------------------" rel="noopener" target="_blank"> Javascript吉普🚙💨</a>。</p></div></div>    
</body>
</html>