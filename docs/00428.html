<html>
<head>
<title>Using Pre-Commit and Pre-Push Git Hooks in a React Project</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在React项目中使用预提交和预推送Git挂钩</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/using-pre-commit-and-pre-push-git-hooks-in-a-react-project-6c83431ef2bd?source=collection_archive---------0-----------------------#2019-02-19">https://levelup.gitconnected.com/using-pre-commit-and-pre-push-git-hooks-in-a-react-project-6c83431ef2bd?source=collection_archive---------0-----------------------#2019-02-19</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/6cdb363306bb37ec4f7c72afd71d8213.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xO6RQvFmAsRQQgod1Tk1Kg.jpeg"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">React + Git挂钩</figcaption></figure><p id="c573" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">在我的软件开发生涯中，我越来越感兴趣的一个话题就是质量！也许我被烧伤的次数太多了。唉，我决定使用<code class="fe ld le lf lg b"><strong class="kh iu">husky</strong></code>包测试向React项目添加git挂钩。我的目标是在提交代码或推送到git存储库之前，<code class="fe ld le lf lg b"><strong class="kh iu">eslint</strong></code> linter和<code class="fe ld le lf lg b"><strong class="kh iu">jest</strong></code>测试套件都必须运行。</p><p id="e44f" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">注意:这篇文章附带的代码库可以在<a class="ae lh" href="https://github.com/nas5w/fun-with-react-and-git-hooks" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><p id="0d93" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">如果这篇教程对你有帮助，请考虑为它鼓掌👏(或者50)！</p><p id="8af6" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi">***</p><h2 id="5b33" class="li lj it bd lk ll lm dn ln lo lp dp lq kq lr ls lt ku lu lv lw ky lx ly lz ma bi translated">通过注册我的免费时事通讯，在您的收件箱中获得快速JavaScript技巧！</h2><figure class="mb mc md me gt ju"><div class="bz fp l di"><div class="mf mg l"/></div></figure><p id="8355" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi">***</p><h1 id="9144" class="mh lj it bd lk mi mj mk ln ml mm mn lq mo mp mq lt mr ms mt lw mu mv mw lz mx bi translated">从头开始设置</h1><p id="c0fa" class="pw-post-body-paragraph kf kg it kh b ki my kk kl km mz ko kp kq na ks kt ku nb kw kx ky nc la lb lc im bi translated">从头开始设置它被证明是相当琐碎的。我一开始是用<code class="fe ld le lf lg b"><strong class="kh iu">create-react-app</strong></code>的boostapping。</p><pre class="mb mc md me gt nd lg ne nf aw ng bi"><span id="86c2" class="li lj it lg b gy nh ni l nj nk">create-react-app fun-with-git-hooks<br/>cd fun-with-git-hooks</span></pre><p id="1029" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">接下来，我安装了<a class="ae lh" href="https://github.com/typicode/husky" rel="noopener ugc nofollow" target="_blank"> husky </a>，它号称“git hooks made easy”(准确！).因为它只在开发环境中是必需的，所以只把它作为开发依赖项安装。</p><pre class="mb mc md me gt nd lg ne nf aw ng bi"><span id="4ef0" class="li lj it lg b gy nh ni l nj nk">npm install husky --save-dev</span></pre><p id="0665" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">我们实际上最终需要一个额外的名为<code class="fe ld le lf lg b"><strong class="kh iu">cross-env</strong></code>的开发依赖项，这将允许我们在我们当前所处的任何环境中配置一个CI环境变量。</p><pre class="mb mc md me gt nd lg ne nf aw ng bi"><span id="d225" class="li lj it lg b gy nh ni l nj nk">npm install cross-env --save-dev</span></pre><p id="30f7" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">最后，让我们对我们的<code class="fe ld le lf lg b"><strong class="kh iu">package.json</strong></code>文件做一些修改来完成一些事情:</p><ul class=""><li id="babe" class="nl nm it kh b ki kj km kn kq nn ku no ky np lc nq nr ns nt bi translated">将<code class="fe ld le lf lg b"><strong class="kh iu">jest</strong></code>测试重新配置为在持续集成模式下运行(否则，运行<code class="fe ld le lf lg b">npm test</code>将会挂起)</li><li id="d192" class="nl nm it kh b ki nu km nv kq nw ku nx ky ny lc nq nr ns nt bi translated">添加一个林挺命令(我们不必单独安装<code class="fe ld le lf lg b"><strong class="kh iu">eslint</strong></code> <strong class="kh iu"> </strong>，因为它是用<code class="fe ld le lf lg b"><strong class="kh iu">create-react-app</strong></code>引导的)</li><li id="81e5" class="nl nm it kh b ki nu km nv kq nw ku nx ky ny lc nq nr ns nt bi translated">将我们的<code class="fe ld le lf lg b"><strong class="kh iu">husky</strong></code>挂钩配置为首先去除棉绒，然后进行测试</li></ul><pre class="mb mc md me gt nd lg ne nf aw ng bi"><span id="b098" class="li lj it lg b gy nh ni l nj nk">"scripts": {<br/>  "start": "react-scripts start",<br/>  "build": "react-scripts build",<br/>  "test": "cross-env CI=true react-scripts test --env=jsdom",<br/>  "eject": "react-scripts eject",<br/>  "lint": "eslint src"<br/>},<br/>"husky": {<br/>  "hooks": {<br/>    "pre-commit": "npm run lint &amp;&amp; npm test",<br/>    "pre-push": "npm run lint &amp;&amp; npm test"<br/>  }<br/>}</span></pre><p id="9302" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">就是这样！现在，每当您尝试提交或推送代码时，如果林挺或测试失败，您将无法这样做。</p><p id="aac9" class="pw-post-body-paragraph kf kg it kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc im bi translated">以质量取胜！</p></div><div class="ab cl nz oa hx ob" role="separator"><span class="oc bw bk od oe of"/><span class="oc bw bk od oe of"/><span class="oc bw bk od oe"/></div><div class="im in io ip iq"><figure class="mb mc md me gt ju gh gi paragraph-image"><a href="https://levelup.gitconnected.com"><div class="gh gi og"><img src="../Images/9914c5dd23ac08b70eea6f4f9ba6fed2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E6CoI_MRyZ1JInNPsBSHtA.png"/></div></a></figure><div class="oh oi gp gr oj ok"><a href="https://gitconnected.com/learn/javascript" rel="noopener  ugc nofollow" target="_blank"><div class="ol ab fo"><div class="om ab on cl cj oo"><h2 class="bd iu gy z fp op fr fs oq fu fw is bi translated">学习JavaScript -最佳JavaScript教程(2019) | gitconnected</h2><div class="or l"><h3 class="bd b gy z fp op fr fs oq fu fw dk translated">50大JavaScript教程-免费学习JavaScript。课程由开发人员提交并投票，从而实现…</h3></div><div class="os l"><p class="bd b dl z fp op fr fs oq fu fw dk translated">gitconnected.com</p></div></div><div class="ot l"><div class="ou l ov ow ox ot oy jz ok"/></div></div></a></div></div></div>    
</body>
</html>