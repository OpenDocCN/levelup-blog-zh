<html>
<head>
<title>How To Implement Google reCAPTCHA v3 in Flutter Web</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Flutter Web中实现Google reCAPTCHA v3</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-implement-google-recaptcha-v3-in-flutter-web-38000139bbc0?source=collection_archive---------3-----------------------#2021-12-19">https://levelup.gitconnected.com/how-to-implement-google-recaptcha-v3-in-flutter-web-38000139bbc0?source=collection_archive---------3-----------------------#2021-12-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="9e3c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kl">开发者在Flutter Web中嵌入Google reCAPTCHA v3的基本指南。</em></p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/a710c424f5ddd99533d1fbd1764dfafe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i_asQCziUxW3PaBFbAH4Kw.jpeg"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated">Web表单上的Bot攻击描述。</figcaption></figure><h1 id="d97c" class="ld le iq bd lc lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">对机器人的恐惧</h1><p id="224f" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">作为一名开发人员，每当您创建表单从web上的用户那里获取数据时，您总是需要警惕垃圾数据。黑客可以注入脚本机器人，用恶意代码活动填充表单，并访问您网站的后端。</p><p id="4068" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">谷歌引入了<code class="fe mf mg mh mi b"><strong class="jp ir">reCAPTCHA</strong></code>的概念，这是一项免费而安全的服务，可以应对人们对机器人的恐惧。该网站称</p><blockquote class="mj mk ml"><p id="a69d" class="jn jo kl jp b jq jr js jt ju jv jw jx mm jz ka kb mn kd ke kf mo kh ki kj kk ij bi translated">reCAPTCHA v3可以帮助您在没有用户交互的情况下检测网站上的滥用流量。reCAPTCHA v3不会显示验证码挑战，而是返回一个分数，以便您可以为您的网站选择最合适的操作。</p></blockquote><h1 id="a711" class="ld le iq bd lc lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">客户端设置</h1><p id="8eae" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">在开始编码之前，你需要注册使用<code class="fe mf mg mh mi b"><strong class="jp ir">reCAPTCHA v3</strong></code>的站点。遵循以下步骤:</p><ol class=""><li id="90e6" class="mp mq iq jp b jq jr ju jv jy mr kc ms kg mt kk mu mv mw mx bi translated">访问<a class="ae my" href="https://www.google.com/recaptcha/about" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir">Google reCAPTCHA</strong></a><strong class="jp ir"/>网站，点击<strong class="jp ir">“v3管理控制台”</strong> &amp;使用您的Google帐户登录。</li></ol><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi mz"><img src="../Images/0191307fd593abe969b0050a40e4a8f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4mk5Nugk0dkR1XfMkWqVLA.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated"><strong class="bd lc"> <em class="na">谷歌reCAPTCHA v3管理控制台导航图。</em>T19】</strong></figcaption></figure><p id="cf19" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2.选择<strong class="jp ir"><em class="kl">“reCAPTCHA v3”</em></strong>并键入<strong class="jp ir"><em class="kl">“localhost”</em></strong>(如果您还没有准备好生产环境)，接受条款&amp;点击<strong class="jp ir"> <em class="kl">“提交”</em> </strong>按钮。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/3a809c252bd668f8cf767ff833fe1d7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1304/format:webp/1*7OhtC2p23W5dQ5S6NPihdg.png"/></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated"><strong class="bd lc"><em class="na">Google reCAPTCHA v3网站注册表单示意图。</em> </strong></figcaption></figure><p id="c18c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">3.注册成功后，记下<strong class="jp ir"><em class="kl">reCAPTCHA</em>site<em class="kl">&amp;secret</em></strong><strong class="jp ir"><em class="kl">key</em></strong>。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi nc"><img src="../Images/95c21be20bef9f3c3b2b365e93677528.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hZOIPNiFfIZNzjWZWVPTCA.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated"><strong class="bd lc"><em class="na">Google reCAPTCHA v3站点和密钥的图解。</em>T49】</strong></figcaption></figure><h1 id="6d00" class="ld le iq bd lc lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">必需的PUBSPEC包</h1><p id="cd08" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">在<code class="fe mf mg mh mi b"><strong class="jp ir">pubspec.yaml</strong></code>文件中，在<code class="fe mf mg mh mi b"><strong class="jp ir">dependencies</strong></code>下添加下面的包。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="nd ne l"/></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated"><strong class="ak">pub spec . YAML文件中需要的包</strong></figcaption></figure><h1 id="eb00" class="ld le iq bd lc lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">整体情况</h1><p id="12aa" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">为了简单起见，我们将创建一个<code class="fe mf mg mh mi b"><strong class="jp ir">MaterialApp</strong></code> <strong class="jp ir"> </strong>，它有一个<strong class="jp ir"> </strong>熊骨<code class="fe mf mg mh mi b"><strong class="jp ir">Form</strong></code>小部件，带有一个<strong class="jp ir">名字</strong> <code class="fe mf mg mh mi b"><strong class="jp ir">TextFormField </strong></code>和一个<code class="fe mf mg mh mi b"><strong class="jp ir">Submit</strong></code> <strong class="jp ir"> </strong>按钮，参见<strong class="jp ir"> <em class="kl">图-I </em> </strong>的app小部件树结构。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/f725451704e800f123a0ccd8775fdd06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1262/format:webp/1*S36_dVBY-lRsHw7OiUn7Ag.png"/></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated"><strong class="bd lc">图一:应用程序小部件树示意图。</strong></figcaption></figure><p id="10df" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如<strong class="jp ir"> <em class="kl">图二</em> </strong>所示，从客户端角度来看，我们需要:</p><ol class=""><li id="b043" class="mp mq iq jp b jq jr ju jv jy mr kc ms kg mt kk mu mv mw mx bi translated">让<code class="fe mf mg mh mi b"><strong class="jp ir">main</strong></code>方法异步。</li><li id="d13f" class="mp mq iq jp b jq ng ju nh jy ni kc nj kg nk kk mu mv mw mx bi translated">在<code class="fe mf mg mh mi b"><strong class="jp ir">main</strong></code> <em class="kl">、</em> <strong class="jp ir"> <em class="kl"> </em> </strong>内部调用<code class="fe mf mg mh mi b"><strong class="jp ir">runApp</strong></code>之前的<code class="fe mf mg mh mi b"><strong class="jp ir">GRecaptchaV3.ready²</strong></code> <strong class="jp ir"> </strong>方法。</li><li id="b9af" class="mp mq iq jp b jq ng ju nh jy ni kc nj kg nk kk mu mv mw mx bi translated">点击<strong class="jp ir"> <em class="kl">提交</em> </strong>，调用<code class="fe mf mg mh mi b"><strong class="jp ir">GRecaptchaV3.execute²</strong></code> <em class="kl"> </em>方法。</li><li id="9358" class="mp mq iq jp b jq ng ju nh jy ni kc nj kg nk kk mu mv mw mx bi translated">将生成的<strong class="jp ir"> <em class="kl">【用户响应令牌】</em> </strong>保存在私有变量<code class="fe mf mg mh mi b"><strong class="jp ir">_token</strong></code>中。</li></ol><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi nl"><img src="../Images/d1b284e1675016faee0c414d2c4ebf56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*McQVufuIhGQ0AVyN0WbuxA.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated"><strong class="bd lc">图二:客户端流程图。</strong></figcaption></figure><p id="d03b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">客户端(我们的app)会将带有<code class="fe mf mg mh mi b"><strong class="jp ir">recaptcha-secret-key</strong></code>的<code class="fe mf mg mh mi b"><strong class="jp ir">_token</strong></code>作为<strong class="jp ir"> <em class="kl"> HTTP POST请求</em> </strong>发送给服务器，如图<strong class="jp ir"> <em class="kl">图三</em> </strong>所示。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi nm"><img src="../Images/bdd767afc9e1bf307da21bcb39c7b1a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4lhTGxXnqXOfejdQQpCFXA.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated">图三:客户端-服务器流程图。</figcaption></figure><p id="7c8d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在接收到<strong class="jp ir"> <em class="kl"> HTTP POST请求</em></strong><em class="kl"/>后，服务器验证客户端的请求，如<strong class="jp ir"> <em class="kl">图四</em> </strong>所示。在该响应中，获得0.0到1.0之间的<code class="fe mf mg mh mi b"><strong class="jp ir">score</strong></code>，其中零表示没有发现人类交互。我们可以说<strong class="jp ir">“很可能是个bot！”</strong>就外行而言<strong class="jp ir">就外行而言</strong>。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi nn"><img src="../Images/22963a517d9e4758e0690e41dde37bcc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jhVo7DDfvkc0MBnMvxnuKg.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated">图四:服务器-客户端流程图。</figcaption></figure><p id="98f0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">根据站点的性质，我们将定义一个<code class="fe mf mg mh mi b"><strong class="jp ir">action</strong></code>和一个阈值来解释获得的<code class="fe mf mg mh mi b"><strong class="jp ir">score</strong></code>。有关<strong class="jp ir"> <em class="kl">分数解释&amp;动作</em> </strong>的更多信息，请参考reCAPTCHA <a class="ae my" href="https://developers.google.com/recaptcha/docs/v3#interpreting_the_score" rel="noopener ugc nofollow" target="_blank">文档</a> <strong class="jp ir"> </strong>。</p><h1 id="c110" class="ld le iq bd lc lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">处理颤振WEB中CORS的解决方法</h1><p id="2426" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">因为我们会在整个项目中发出HTTP请求，你可能会在Flutter Web中遇到<strong class="jp ir"> <em class="kl"> CORS⁴ </em> </strong>错误。下面是一个关于<strong class="jp ir"> <em class="kl">堆栈溢出</em> </strong>的变通办法，可以帮助你在本地主机中发出请求。</p><div class="no np gp gr nq nr"><a href="https://stackoverflow.com/a/66879350/4517075" rel="noopener  ugc nofollow" target="_blank"><div class="ns ab fo"><div class="nt ab nu cl cj nv"><h2 class="bd ir gy z fp nw fr fs nx fu fw ip bi translated">如何只用dart代码解决flutter web api cors错误？</h2><div class="ny l"><h3 class="bd b gy z fp nw fr fs nx fu fw dk translated">CORS错误似乎是网络领域的一个众所周知的问题。但是我第一次尝试了flutter web，我…</h3></div><div class="nz l"><p class="bd b dl z fp nw fr fs nx fu fw dk translated">stackoverflow.com</p></div></div><div class="oa l"><div class="ob l oc od oe oa of kw nr"/></div></div></a></div><h1 id="cb07" class="ld le iq bd lc lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">开始编码吧！</h1><p id="7e63" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated"><strong class="jp ir"> <em class="kl"> WROOM！呜！呜！抓紧你的按键，因为我们要开始编码了。下面的<strong class="jp ir"> <em class="kl">图-V </em> </strong>显示了将在整个项目中维护的文件夹结构。</em></strong></p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi og"><img src="../Images/be61d3e08cc8aadf515bafa43c52274a.png" data-original-src="https://miro.medium.com/v2/resize:fit:428/format:webp/1*Y2Pg3rjlLJr8FcIoXyMEGQ.png"/></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated"><strong class="bd lc"> <em class="na">图五:项目架构示意图。</em> </strong></figcaption></figure><h2 id="2e5e" class="oh le iq bd lc oi oj dn li ok ol dp lm jy om on lq kc oo op lu kg oq or ly os bi translated">步骤1 -将reCAPTCHA站点密钥放在index.html文件中。</h2><p id="3fbd" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">导航到<code class="fe mf mg mh mi b"><strong class="jp ir">web</strong></code> <strong class="jp ir"> </strong>文件夹，打开<code class="fe mf mg mh mi b"><strong class="jp ir">index.html</strong></code>文件，将下面的脚本粘贴到<code class="fe mf mg mh mi b"><strong class="jp ir">&lt;body&gt;</strong></code> <strong class="jp ir"> <em class="kl"> </em> </strong>标签内，如下图所示。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="nd ne l"/></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated"><strong class="ak">在index.html放置reCAPTCHA站点密钥</strong></figcaption></figure><p id="9a49" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">要检查<code class="fe mf mg mh mi b"><strong class="jp ir">Google reCAPTCHA v3</strong></code>在我们的站点上是否正常工作，调用<code class="fe mf mg mh mi b"><strong class="jp ir">main.dart</strong></code>中的<code class="fe mf mg mh mi b"><strong class="jp ir">GRecaptchaV3.ready</strong></code> <em class="kl"> </em>方法，如下面的代码片段所示。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="nd ne l"/></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated"><strong class="ak">使用</strong> <code class="fe mf mg mh mi b"><strong class="ak">main</strong></code> <strong class="ak">测试Google reCAPTCHA v3。镖</strong></figcaption></figure><p id="beda" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">运行上面的代码后，你会看到<strong class="jp ir"> <em class="kl">【受reCAPTCHA保护】</em> </strong>，如下图<strong class="jp ir"><em class="kl">-VI</em></strong>所示。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi ot"><img src="../Images/ba630972533ab4dea348d31a108fa3f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GZr69oT9mmXYEX6gbCqV2g.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated"><strong class="bd lc">图六:带有Google reCAPTCHA保护的计数器应用程序的图示。</strong></figcaption></figure><h2 id="d1a0" class="oh le iq bd lc oi oj dn li ok ol dp lm jy om on lq kc oo op lu kg oq or ly os bi translated">步骤2 -保护机密信息。</h2><p id="4286" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">为了保密密钥和站点密钥，在<code class="fe mf mg mh mi b"><strong class="jp ir">lib</strong></code> <strong class="jp ir"> <em class="kl"> </em> </strong>文件夹下创建一个带有<code class="fe mf mg mh mi b"><strong class="jp ir">config.dart</strong></code>文件的<code class="fe mf mg mh mi b"><strong class="jp ir">config</strong></code>文件夹，如下面的代码片段所示。<strong class="jp ir">注意:别忘了把这个添加到</strong> <code class="fe mf mg mh mi b"><strong class="jp ir">.gitignore</strong></code> <strong class="jp ir"> <em class="kl"> </em>文件中！</strong></p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="nd ne l"/></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated"><strong class="ak">config . dart的代码片段</strong></figcaption></figure><h2 id="1a9a" class="oh le iq bd lc oi oj dn li ok ol dp lm jy om on lq kc oo op lu kg oq or ly os bi translated">步骤3 -创建一个ReCAPTCHA响应模型。</h2><p id="2ba3" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">在<code class="fe mf mg mh mi b"><strong class="jp ir">lib</strong></code> <strong class="jp ir"> <em class="kl"> </em> </strong>文件夹下用<code class="fe mf mg mh mi b"><strong class="jp ir">recaptcha_response.dart</strong></code>文件创建一个<code class="fe mf mg mh mi b"><strong class="jp ir">model</strong></code>文件夹，如下面的代码片段所示。这个类将保存作为<code class="fe mf mg mh mi b"><strong class="jp ir">dart </strong></code>对象获得的<strong class="jp ir"> HTTP响应</strong>。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="nd ne l"/></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated"><strong class="ak">Recaptcha反应模型。</strong></figcaption></figure><h2 id="f1e1" class="oh le iq bd lc oi oj dn li ok ol dp lm jy om on lq kc oo op lu kg oq or ly os bi translated">步骤4 -创建ReCAPTCHA服务。</h2><p id="598b" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">我们不是直接调用<code class="fe mf mg mh mi b"><strong class="jp ir">GRecaptchaV3</strong></code> <strong class="jp ir"> </strong>方法，而是创建一个服务层或包装类来保存所有的<code class="fe mf mg mh mi b"><strong class="jp ir">reCAPTCHA</strong></code>操作。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="nd ne l"/></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated">Recaptcha服务。</figcaption></figure><p id="3c50" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们通过分解代码来理解它。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="nd ne l"/></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated"><code class="fe mf mg mh mi b"><strong class="ak">Replace GRecaptchV3.ready with RecaptchaService.initiate in main.dart</strong></code></figcaption></figure><ol class=""><li id="6ddf" class="mp mq iq jp b jq jr ju jv jy mr kc ms kg mt kk mu mv mw mx bi translated"><strong class="jp ir"><em class="kl">recaptchaservice . initiate():</em></strong><em class="kl">一个</em> <code class="fe mf mg mh mi b"><strong class="jp ir">GRecaptchaV3.ready</strong></code> <strong class="jp ir"> </strong>的包装器，将在运行我们的应用程序之前在<code class="fe mf mg mh mi b"><strong class="jp ir">main</strong></code>方法中使用。如<code class="fe mf mg mh mi b"><strong class="jp ir">reCAPTCHA</strong></code>文档中所述，在<code class="fe mf mg mh mi b"><strong class="jp ir">execute</strong></code>方法之前调用<code class="fe mf mg mh mi b"><strong class="jp ir">ready</strong></code>方法是很重要的，参见上面的代码片段。</li><li id="1652" class="mp mq iq jp b jq ng ju nh jy ni kc nj kg nk kk mu mv mw mx bi translated"><strong class="jp ir"><em class="kl">recaptchaservice . isnotabot():</em></strong>在用户提交表单&amp;提交通过所有验证后调用。这是一个简单的方法，它根据<code class="fe mf mg mh mi b"><strong class="jp ir">_score</strong></code>计算阈值并返回true/false。</li><li id="817a" class="mp mq iq jp b jq ng ju nh jy ni kc nj kg nk kk mu mv mw mx bi translated"><strong class="jp ir"> <em class="kl">再接再厉。_ getVerificationResponse():</em></strong>一个私有方法，执行<strong class="jp ir"> <em class="kl"> HTTP POST </em> </strong>请求来验证客户端的响应令牌。<code class="fe mf mg mh mi b"><strong class="jp ir">GRecaptchaV3.execute</strong></code>方法返回一个两秒内有效的响应令牌。为了生成一个有效的<strong class="jp ir"> <em class="kl"> HTTP POST </em> </strong>请求，我们将检查是否首先接收到响应令牌，然后将它作为<strong class="jp ir"> <em class="kl"> POST </em> </strong>请求体参数与<code class="fe mf mg mh mi b"><strong class="jp ir">reCAPTCHA secret key</strong></code>一起传递。如果<strong class="jp ir"> <em class="kl"> HTTP POST </em> </strong>请求成功，我们将把<strong class="jp ir"> <em class="kl"> HTTP响应</em> </strong>转换成<code class="fe mf mg mh mi b"><strong class="jp ir">RecaptchaResponse</strong></code>模型对象并返回它。</li></ol><h2 id="64c0" class="oh le iq bd lc oi oj dn li ok ol dp lm jy om on lq kc oo op lu kg oq or ly os bi translated">步骤5 -提交表单后调用ReCAPTCHA服务。</h2><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="nd ne l"/></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated"><strong class="ak">在提交按钮上使用RecaptchaService.isNotABot方法。</strong></figcaption></figure><p id="1d6e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<strong class="jp ir"> <em class="kl">提交</em> </strong>按钮的<code class="fe mf mg mh mi b"><strong class="jp ir">onPressed</strong></code>功能中，我们会:</p><ol class=""><li id="eabc" class="mp mq iq jp b jq jr ju jv jy mr kc ms kg mt kk mu mv mw mx bi translated">检查<code class="fe mf mg mh mi b"><strong class="jp ir">GlobalKey&lt;FormState&gt;</strong></code>当前状态是否有效。如果有效，则进入步骤2，否则告诉用户正确填写<code class="fe mf mg mh mi b"><strong class="jp ir">NameFormField</strong></code> <strong class="jp ir"> </strong>。</li><li id="69f5" class="mp mq iq jp b jq ng ju nh jy ni kc nj kg nk kk mu mv mw mx bi translated">如果成功，调用<code class="fe mf mg mh mi b"><strong class="jp ir">RecaptchaService.isNotABot()</strong></code>并将其值赋给布尔标志<code class="fe mf mg mh mi b"><strong class="jp ir">_isNotABot</strong></code> <strong class="jp ir"> </strong>。</li><li id="539f" class="mp mq iq jp b jq ng ju nh jy ni kc nj kg nk kk mu mv mw mx bi translated">根据<code class="fe mf mg mh mi b"><strong class="jp ir">_isNotABot</strong></code>的值，向用户显示一个对话框。</li></ol><h2 id="dde2" class="oh le iq bd lc oi oj dn li ok ol dp lm jy om on lq kc oo op lu kg oq or ly os bi translated">第6步-运行应用程序</h2><p id="a389" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">运行app看结果如图<strong class="jp ir"> <em class="kl">图七</em> </strong>所示。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi ou"><img src="../Images/aedb155bd187ab105e1dd4b15305bdb9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*GZE7rGDgL8pIYDOkZHcruw.gif"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated">图七:Google reCAPTCHA v3在Flutter Web中的演示。</figcaption></figure><p id="1150" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">访问<a class="ae my" href="https://github.com/Zujaj/recaptcha_v3_tutorial" rel="noopener ugc nofollow" target="_blank">recaptcha _ v3 _ tutorial</a>⁵github资源库，获取该项目的完整源代码。</p><p id="45a4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> <em class="kl">提示-键入</em> </strong> <code class="fe mf mg mh mi b"><strong class="jp ir">1s</strong></code> <strong class="jp ir"> <em class="kl">如果您希望在类似</em> </strong> <code class="fe mf mg mh mi b"><a class="ae my" href="https://github1s.com/Zujaj/recaptcha_v3_tutorial" rel="noopener ugc nofollow" target="_blank">https://github1s.com/Zujaj/recaptcha_v3_tutorial</a></code> <em class="kl">的浏览器中查看VSCode中的回购。</em></p><h1 id="f81e" class="ld le iq bd lc lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">Google reCAPTCHA管理控制台</h1><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi ov"><img src="../Images/92b4e42834e07fda5ecd2a4791662f81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eEQAGx2FWYGhRLTRNw6LXg.png"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated">Google reCAPTCHA v3管理控制台的图示。</figcaption></figure><p id="ec4b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">访问<strong class="jp ir"><em class="kl">Google reCAPTCHA Admin</em></strong><strong class="jp ir"><em class="kl">控制台</em> </strong>进行风险分析。请注意，本地主机的读数与实时托管站点的读数会有所不同。一旦您为生产做好准备，不要忘记通过管理控制台的⚙️设置图标<em class="kl">将您的域从<strong class="jp ir"><em class="kl">“localhost”</em></strong>更改为。</em></p><h1 id="4a27" class="ld le iq bd lc lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">结论</h1><p id="49c7" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">我希望这篇文章在引导你在Flutter web中实现Web表单的安全性方面卓有成效。如果你喜欢这篇文章，请不要按任何按钮；按50次！</p><h1 id="d129" class="ld le iq bd lc lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">确认</h1><p id="6f5b" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">感谢<a class="ae my" href="https://levelup.gitconnected.com/" rel="noopener ugc nofollow" target="_blank"><em class="kl">Level Up code</em></a><em class="kl"/>平台为我提供了学习、探索和分享这些宝贵知识的空间。我也感谢<a class="ae my" href="https://telicsolutions.com/" rel="noopener ugc nofollow" target="_blank"><em class="kl">Telic Solutions</em></a>的<a class="ae my" href="https://github.com/muzzammil-khan" rel="noopener ugc nofollow" target="_blank"><em class="kl">Muzzammil-Khan</em></a><em class="kl"/>指引我走向Google reCAPTCHA v3控制台。</p><p id="30d3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">特别感谢<a class="ae my" href="https://github.com/bharathraj-e" rel="noopener ugc nofollow" target="_blank"> Bharathraj </a>介绍<a class="ae my" href="https://pub.dev/packages/g_recaptcha_v3" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir"><em class="kl">g _ recaptcha _ v3</em></strong></a>包。</p><h1 id="55a9" class="ld le iq bd lc lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">参考</h1><p id="5f54" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated"><strong class="jp ir"><em class="kl">【1】:关于谷歌reCAPTCHA【https://www.google.com/recaptcha/about】</em></strong><br/><a class="ae my" href="https://www.google.com/recaptcha/about/" rel="noopener ugc nofollow" target="_blank"/></p><p id="dc05" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"><em class="kl">【2】:g _ recaptcha _ v3 |扑包</em><br/></strong><a class="ae my" href="https://pub.dev/packages/g_recaptcha_v3" rel="noopener ugc nofollow" target="_blank">https://pub.dev/packages/g_recaptcha_v3</a></p><p id="b6b7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"><em class="kl">【3】:解读分数| reCAPTCHA Docs<br/></em></strong><a class="ae my" href="https://developers.google.com/recaptcha/docs/v3#interpreting_the_score" rel="noopener ugc nofollow" target="_blank">https://developers . Google . com/reCAPTCHA/Docs/v3 # Interpreting _ The _ Score</a></p><p id="738f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"><em class="kl">【4】:跨产地资源共享(mozilla.org)—HTTP | MDN()<br/></em></strong><a class="ae my" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS" rel="noopener ugc nofollow" target="_blank">https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS</a></p><p id="a90f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"><em class="kl">【5】:reCAPTCHA v3教程| GitHub资源库<br/></em></strong><a class="ae my" href="https://github1s.com/Zujaj/recaptcha_v3_tutorial" rel="noopener ugc nofollow" target="_blank">https://github.com/Zujaj/recaptcha_v3_tutorial</a></p></div></div>    
</body>
</html>