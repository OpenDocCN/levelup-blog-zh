<html>
<head>
<title>How to Use Axios for HTTP Requests</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Axios处理HTTP请求</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-use-axios-for-http-requests-b26ff40e65af?source=collection_archive---------9-----------------------#2020-03-24">https://levelup.gitconnected.com/how-to-use-axios-for-http-requests-b26ff40e65af?source=collection_archive---------9-----------------------#2020-03-24</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/91ebcd2dfe5dc025f24a7e8a9b360203.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zzKlHsoo5WF_V6fkf690vA.png"/></div></div></figure><p id="4ef1" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">对于所有的JavaScript开发人员来说，我敢肯定你们一整天都在让“获取”发生。在这篇博客中，我将向你介绍fetch的竞争对手Axios。</p><p id="85c9" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">Axios是一个轻量级的HTTP请求库。关键特性包括能够从Node.js发出http请求，支持承诺，并自动转换JSON数据，这意味着它可以解析传入的JSON数据。它还提供了有趣的错误处理功能，我将在后面介绍。我将带您了解如何使用Axios让<strong class="kd iu">获得</strong>和<strong class="kd iu">发布</strong>请求。如果你一直关注我的博客(❤️💕💖谢谢大家！)，你知道我喜欢发现新的有趣的API来练习。对于这个博客，我将使用一个哈利波特API和一个尤达翻译器API。所以，抓紧你们的巫师帽和光剑，这里会变得很无聊。</p><figure class="kz la lb lc gt ju"><div class="bz fp l di"><div class="ld le l"/></div></figure><p id="810f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们需要做的第一件事是安装Axios。</p><pre class="kz la lb lc gt lf lg lh li aw lj bi"><span id="4173" class="lk ll it lg b gy lm ln l lo lp">npm install axios</span></pre><p id="96d0" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">接下来，在我们将要执行请求的文件的顶部，我们需要写入:</p><pre class="kz la lb lc gt lf lg lh li aw lj bi"><span id="f3a4" class="lk ll it lg b gy lm ln l lo lp">const axios = require("axios")</span></pre><h1 id="1478" class="lq ll it bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">获取请求</h1><p id="7baa" class="pw-post-body-paragraph kb kc it kd b ke mn kg kh ki mo kk kl km mp ko kp kq mq ks kt ku mr kw kx ky im bi translated">现在让我们对哈利波特API做一个GET请求。我们想得到所有的角色。</p><figure class="kz la lb lc gt ju"><div class="bz fp l di"><div class="ms le l"/></div></figure><p id="225e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">我们正在调用axios.get到API url。在第4行和第5行，我们得到了返回的响应(注意，我们不需要做res.json()，因为它已经被解析了)，这是一个对象数组，通过映射数组来获得字符名称列表。</p><p id="185d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">get请求的API响应如下所示:</p><figure class="kz la lb lc gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mt"><img src="../Images/e4da6363f1fa7c33af0e6c2fa20fbb87.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VwHbCNLypBylVQDSJFDT2g.png"/></div></div></figure><p id="ced8" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">映射响应后，我们得到以下结果:</p><figure class="kz la lb lc gt ju gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/bd52d526fba0c181bcd4071dfa452a65.png" data-original-src="https://miro.medium.com/v2/resize:fit:728/format:webp/1*V2Yq7aLP2_EOj3KOP15wQQ.png"/></div></figure><p id="f35c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">成功！但是，如果请求不成功并且没有获得期望的结果，会发生什么呢？</p><h1 id="db90" class="lq ll it bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated"><strong class="ak">Axios中的错误处理</strong></h1><p id="701d" class="pw-post-body-paragraph kb kc it kd b ke mn kg kh ki mo kk kl km mp ko kp kq mq ks kt ku mr kw kx ky im bi translated">Axios有一个名为err.response和err.request的属性，它允许我们确定错误是发生在响应上还是请求上。正如您在第7–15行看到的，我们使用这些属性来处理潜在的错误。</p><figure class="kz la lb lc gt ju"><div class="bz fp l di"><div class="ms le l"/></div></figure><p id="ee25" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果我们向一个不存在的路由发送请求，比如"<a class="ae mv" href="http://hp-api.herokuapp.com/api/characters" rel="noopener ugc nofollow" target="_blank">http://hp-api.herokuapp.com/api/</a>斯莱特林规则"，我们会得到一个响应错误:</p><figure class="kz la lb lc gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mw"><img src="../Images/aa780e6a85040ec8b879e2c3ea665b02.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b_BpMZ1dck5EUBRl0uRbmA.png"/></div></div><figcaption class="mx my gj gh gi mz na bd b be z dk translated">从第8–9行</figcaption></figure><p id="9f58" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">请求被发送到正确的url，但是服务器不知道如何处理，因为它不希望任何请求被发送到这样的路由。</p><p id="d195" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在，如果我们向一个无效和错误的url发出请求，比如"<a class="ae mv" href="http://hp-api.herokuapp.com/api/characters" rel="noopener ugc nofollow" target="_blank">http://nomuggles/API/characters</a>"，我们会得到一个请求错误:</p><figure class="kz la lb lc gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nb"><img src="../Images/7548b268e94e7a9e93acf639b67430ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mtfRsAWujofF0NWuSTlOfQ.png"/></div></div></figure><h1 id="8d85" class="lq ll it bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated"><strong class="ak">发布请求</strong></h1><p id="2afe" class="pw-post-body-paragraph kb kc it kd b ke mn kg kh ki mo kk kl km mp ko kp kq mq ks kt ku mr kw kx ky im bi translated">现在，让我们向Yoda Translator API发出一个POST请求。</p><figure class="kz la lb lc gt ju"><div class="bz fp l di"><div class="ms le l"/></div></figure><p id="9bc9" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">axios.post接受两个参数，请求url和数据对象。这里，数据对象是我们希望由API翻译的文本，第2行的<code class="fe nc nd ne lg b">"text":"Hello World"</code>。我们得到的回应是:</p><figure class="kz la lb lc gt ju gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/9656b2f7e23f3b06bc4bef251c27c6ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:796/format:webp/1*NHFo_3bJedQWj0z96XkrBw.png"/></div></figure><p id="b7a5" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">那都是朋友！下次见！</p><figure class="kz la lb lc gt ju"><div class="bz fp l di"><div class="ng le l"/></div></figure></div></div>    
</body>
</html>