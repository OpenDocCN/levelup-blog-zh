# JavaScript 代码格式—属性、语句体和带换行符的对象

> 原文：<https://levelup.gitconnected.com/javascript-code-formatting-properties-statement-body-and-objects-with-newline-5828181232f>

![](img/d9e52b81d031b4f05ae1c8872ab3d669.png)

史蒂文·斯凯里特在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄的照片

JavaScript 是一种非常宽容的语言。编写可以运行但有错误的代码很容易。

在本文中，我们将研究删除属性前的空格、单行语句的位置以及对象内一致的间距。

# 属性前没有空格

只有当属性访问代码写在新行上时，才应该在属性前使用空格。

例如，我们应该编写如下所示的代码:

```
foo .bar .baz
```

在上面的代码中，我们在`.bar`和`.baz`之前有额外的空白。这样不好，因为没用。它很容易被理解为别的东西。

这是我们可以节省的额外空间，因为点已经是一个属性链的分隔符。

我们应该这样写:

```
foo.bar.baz
```

当我们编写访问对象属性的代码时，另一个额外空白的例子如下:

```
foo[ prop ]
```

在上面的代码中，我们有`prop`属性，它在括号周围有额外的空格。

在`prop`变量周围我们不需要额外的空间。例如，我们应该编写以下代码:

```
foo[prop]
```

这是因为括号已经是`prop`属性的分隔符。

但是，如果我们编写以下代码，我们可以在属性前使用空格:

```
foo
  .bar()
  .baz();
```

或者:

```
foo
  .bar
  .baz();
```

在上面的代码中，我们通过调用方法或访问属性链来访问新行中的属性。

在点和属性名之前有两个空格，这样我们可以清楚地看到我们正在访问一个属性。

通过这种方式，它很简洁，界限也很清楚，这样我们就可以阅读代码中的属性，而不用太费劲。

# 单行语句的位置

如果我们有一个只有一行的`if`块，有些人可能会像下面这样不用花括号来写:

```
if (foo)
  bar();
```

在上面的代码中，如果`foo`是`true`，那么运行`bar`函数。

有些人可能还会写:

```
if (foo) bar();
```

上面的代码和前面的例子做了同样的事情。

这很容易让开发人员感到困惑，因为大括号不见了，所以很容易像下面这样混淆:

```
if (foo)
  bar();
  baz();
```

如果`foo`为真，我们可能认为`bar`和`baz`都在运行。然而，事实并非如此。

实际上应该这样写:

```
if (foo)
  bar();
baz();
```

只有当`foo`为真时`bar`才会运行，但是无论`foo`的值是多少，`baz`都会运行。

去掉括号节省了打字，但是引起了更多的混乱。

我们应该添加大括号来消除混淆，而不是使用缩进。

例如，我们可以编写以下内容:

```
if (foo) {
  bar();
}
baz();
```

或者:

```
if (foo) {
  bar();
  baz();
}
```

括号保持一切整洁和清晰。现在,`if`的声明没有歧义了。

这不仅仅适用于`if`语句。只有一行的循环体也可以不用花括号来写。

例如，我们可以编写以下代码:

```
for (const a of arr) console.log(a);
```

或者我们可以编写一个`while`循环或`do...while`循环，如下所示:

```
do bar(); while (foo);
while (foo) bar();
```

它们也有单线体，而且都没有花括号。

我们还应该给它们加上花括号，这样我们就不会混淆循环体的开始和结束。

因此，我们应该改为编写以下代码:

```
for (const a of arr) {
  console.log(a);
}do {
  bar();
} while (foo);while (foo) {
  bar();
}
```

![](img/68a455356828e64a1438857805390ca3.png)

西蒙·斯霍尔滕在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上的照片

# 大括号内一致的换行符

大括号内的对象属性应该有一致的间距。

例如，以下用于创建对象文字的代码是不好的，因为它的间距是一致的:

```
const foo = {a:  1,   b: 2    };
```

正如我们所看到的，我们到处都有不同的间距和许多额外的空间。

我们应该改为编写以下代码:

```
const foo = {
  a: 1,
  b: 2
};
```

在上面的代码中，缩进是一致的，属性后面没有多余的空格。同样，键和值之间的间距也是一致的。

# 结论

属性前的空格应该被删除，除非我们在不同的行中访问它们。

此外，属性键和值的间距应该保持一致，以便代码整洁易读。

在`if`块和循环下的单行语句应该在花括号内，以消除任何混淆。