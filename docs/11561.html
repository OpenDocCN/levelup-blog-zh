<html>
<head>
<title>How to eliminate code bloat in JavaScript with object catalogs</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用对象目录消除JavaScript中的代码膨胀</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/how-to-eliminate-code-bloat-in-javascript-with-object-catalogs-983c436c59f9?source=collection_archive---------3-----------------------#2022-03-27">https://levelup.gitconnected.com/how-to-eliminate-code-bloat-in-javascript-with-object-catalogs-983c436c59f9?source=collection_archive---------3-----------------------#2022-03-27</a></blockquote><div><div class="fc if ig ih ii ij"/><div class="ik il im in io"><div class=""/><div class=""><h2 id="f193" class="pw-subtitle-paragraph jo iq ir bd b jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf dk translated">一个常见问题的简单解决方案</h2></div><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj kg"><img src="../Images/3df3570b560a3a92bf8c31ca751642c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*nlF4bVYdzCixy3y-"/></div></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk translated"><a class="ae kw" href="https://unsplash.com/@gary_at_unsplash?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">陈嘉里</a>在<a class="ae kw" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><h1 id="fc2b" class="kx ky ir bd kz la lb lc ld le lf lg lh jx li jy lj ka lk kb ll kd lm ke ln lo bi translated">它是如何发生的</h1><p id="2dd4" class="pw-post-body-paragraph lp lq ir lr b ls lt js lu lv lw jv lx ly lz ma mb mc md me mf mg mh mi mj mk ik bi translated">用JavaScript创建对象文字很容易。</p><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div class="gi gj ml"><img src="../Images/76715b0ba4d642c40cdabb9c60c1f449.png" data-original-src="https://miro.medium.com/v2/resize:fit:1020/format:webp/1*Qgd55ou8mGkjAqbIKY-lsA@2x.png"/></div></figure><p id="3771" class="pw-post-body-paragraph lp lq ir lr b ls mm js lu lv mn jv lx ly mo ma mb mc mp me mf mg mq mi mj mk ik bi translated">也许太容易了。我们可以复制并粘贴一个对象文字来快速创建一系列游戏平台。</p><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj mr"><img src="../Images/2a0b1f9932601a754f73af451c92afdf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dm67tce0j0nqaWacDP_--w@2x.png"/></div></div></figure><p id="0efb" class="pw-post-body-paragraph lp lq ir lr b ls mm js lu lv mn jv lx ly mo ma mb mc mp me mf mg mq mi mj mk ik bi translated">只要我们的手指还在<code class="fe ms mt mu mv b">Cmd/Ctrl-V</code>键上，就让我们继续走下去，为我们的游戏《地牢Crawly》和《子弹噩梦》创建一个平台支持地图。</p><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj mw"><img src="../Images/31637de181dc2d4c4356ea1dfa43889d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bw4yTZC1qy7Jbd3k8zXxzA@2x.png"/></div></div></figure><p id="14be" class="pw-post-body-paragraph lp lq ir lr b ls mm js lu lv mn jv lx ly mo ma mb mc mp me mf mg mq mi mj mk ik bi translated">很简单，柠檬榨汁机。</p><p id="9c98" class="pw-post-body-paragraph lp lq ir lr b ls mm js lu lv mn jv lx ly mo ma mb mc mp me mf mg mq mi mj mk ik bi translated">需要添加一个属性？JavaScript说:“是的！”</p><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj mx"><img src="../Images/769268508db74d23e0ade51cae74d1ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XysFT64C0fN40GAsDg018g@2x.png"/></div></div></figure><p id="0cff" class="pw-post-body-paragraph lp lq ir lr b ls mm js lu lv mn jv lx ly mo ma mb mc mp me mf mg mq mi mj mk ik bi translated">这又快又简单。JavaScript使许多事情变得快速而简单，这也是它成为如此流行的编程语言的部分原因。</p><p id="669a" class="pw-post-body-paragraph lp lq ir lr b ls mm js lu lv mn jv lx ly mo ma mb mc mp me mf mg mq mi mj mk ik bi translated">但是现在我们有一些问题。我们复制了代码。重复的代码是不好的*。XBox的对象文字完整地出现在两个游戏中(第10行和第18行)。</p><pre class="kh ki kj kk gu my mv mz na aw nb bi"><span id="350b" class="nc ky ir mv b gz nd ne l nf ng">*There are exceptions. See <a class="ae kw" href="https://medium.com/@sethltx/when-is-it-okay-to-duplicate-code-2921421d8340" rel="noopener">When is it okay to duplicate code</a>?</span></pre><p id="9aff" class="pw-post-body-paragraph lp lq ir lr b ls mm js lu lv mn jv lx ly mo ma mb mc mp me mf mg mq mi mj mk ik bi translated">首先，我们的代码现在不必要地被两个XBox定义所膨胀。我们只需要一个。第二，我们现在有两个XBox的事实来源，所以我们必须确保在做出改变时更新它们。这造成了维护的噩梦:</p><ol class=""><li id="94e2" class="nh ni ir lr b ls mm lv mn ly nj mc nk mg nl mk nm nn no np bi translated">我们现在需要纠正两处<code class="fe ms mt mu mv b">Micrsoft</code>的拼写。</li><li id="49ca" class="nh ni ir lr b ls nq lv nr ly ns mc nt mg nu mk nm nn no np bi translated">我们在第一个XBox定义中添加了<code class="fe ms mt mu mv b">website</code>属性，但是我们漏掉了第二个。</li></ol><p id="b8e0" class="pw-post-body-paragraph lp lq ir lr b ls mm js lu lv mn jv lx ly mo ma mb mc mp me mf mg mq mi mj mk ik bi translated">这个代码片段很容易创建，但最终的结果是臃肿和难以维护。</p><h1 id="8233" class="kx ky ir bd kz la lb lc ld le lf lg lh jx li jy lj ka lk kb ll kd lm ke ln lo bi translated">怎么修</h1><p id="8cde" class="pw-post-body-paragraph lp lq ir lr b ls lt js lu lv lw jv lx ly lz ma mb mc md me mf mg mh mi mj mk ik bi translated">我们可以通过一个支持平台的目录来解决代码重复和膨胀的问题。这是平台的唯一真实来源。</p><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj nv"><img src="../Images/ad895fdf0c6342c891e6c3cbe8e1dd50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B72t01-nU5zXmnVpVaNhnQ@2x.png"/></div></div></figure><p id="4c2c" class="pw-post-body-paragraph lp lq ir lr b ls mm js lu lv mn jv lx ly mo ma mb mc mp me mf mg mq mi mj mk ik bi translated">我简单地称之为“对象目录”。</p><pre class="kh ki kj kk gu my mv mz na aw nb bi"><span id="9480" class="nc ky ir mv b gz nd ne l nf ng">There are many ways to implement object catalogs. </span><span id="389e" class="nc ky ir mv b gz nw ne l nf ng">Here we’re using a map indexed by the platform "tag" property.</span><span id="7e30" class="nc ky ir mv b gz nw ne l nf ng">You might need look up objects in the catalog using different properties in different situations, .e.g., looking up platforms by the "manufacturer" or "category" properties. In this case, an array of objects might work better than a map.</span></pre><p id="93e6" class="pw-post-body-paragraph lp lq ir lr b ls mm js lu lv mn jv lx ly mo ma mb mc mp me mf mg mq mi mj mk ik bi translated">我们在平台支持图中简洁地引用了该目录。</p><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj nx"><img src="../Images/dee9f6062e76901c46e4ef603738a7b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-PMkKU3hl-Uo1FkKMN0lzQ@2x.png"/></div></div></figure><p id="d8c0" class="pw-post-body-paragraph lp lq ir lr b ls mm js lu lv mn jv lx ly mo ma mb mc mp me mf mg mq mi mj mk ik bi translated">如果我们需要对平台进行更新，我们只需要在一个地方进行:目录。让我们修复拼写错误和那些丢失的<code class="fe ms mt mu mv b">website</code>属性。</p><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj ny"><img src="../Images/6276c3f97385d041ef3d29468bf17404.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CwUs04h61lTXIfBaS2CCww@2x.png"/></div></div></figure><p id="2bec" class="pw-post-body-paragraph lp lq ir lr b ls mm js lu lv mn jv lx ly mo ma mb mc mp me mf mg mq mi mj mk ik bi translated">我们不再有任何代码重复，我们的平台支持图仍然功能齐全。假设我们想知道“子弹噩梦”在桌面平台上是否可用。</p><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj nz"><img src="../Images/882f8b884c71b020c00f9940dd102835.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pDjvkIjGTqtN5iAJlVH0UA@2x.png"/></div></div></figure><p id="3a26" class="pw-post-body-paragraph lp lq ir lr b ls mm js lu lv mn jv lx ly mo ma mb mc mp me mf mg mq mi mj mk ik bi translated">我们的平台目录可能会随着应用的增长而增长，但它仍然是一个强大的、单一的事实来源。</p><p id="db55" class="pw-post-body-paragraph lp lq ir lr b ls mm js lu lv mn jv lx ly mo ma mb mc mp me mf mg mq mi mj mk ik bi translated">当您看到对象文字集合时，寻找机会创建对象目录。重复的对象文字是您需要一个对象目录的明确标志。</p></div></div>    
</body>
</html>