# 围棋中的错误处理策略

> 原文：<https://levelup.gitconnected.com/error-handling-strategies-in-go-7759b3f73d0>

![](img/0163a7799e5a590e8f6c688d83dca9a8.png)

[附身摄影](https://unsplash.com/@possessedphotography?utm_source=medium&utm_medium=referral)在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍照

在 Go 中，当函数调用返回错误时，调用者有责任检查错误并采取适当的措施。可能有几种策略来处理它。

在这篇文章中，让我们来看看以下四个选项:

*   繁殖
*   重试
*   记录并继续。
*   记录并停止程序。

# 繁殖

最常见的方法是直接返回错误。因此子例程中的失败会传播到调用者。

在下面的示例中，如果调用`http.Get`失败，则返回 HTTP 错误，而不做进一步处理。

有时，有必要错误地包装一些描述性信息，以便对我们有所帮助。

在下面的例子中，我们使用函数`fmt.Errorf`用一个字符串包装错误消息。它包括请求 URL 和错误消息，URL 是调试的重要信息。

使用这种错误处理策略有三个最佳实践技巧。

*   首先，错误消息应该有足够的描述性，以帮助用户理解问题。
*   第二，因为错误消息经常链接在一起，所以消息不应该大写，并且应该避免换行
*   第三，函数调用者和被调用者有不同的责任来处理错误。被调用方报告尝试的操作和与错误上下文相关的参数值。调用者添加了更多的上下文，但是被调用者没有，比如上面`html.Parse` 案例中的 URL。

# 重试

第二种错误处理策略是重试。它适用于暂时性错误的情况，调用方可以重试该操作。

有许多重试策略，如固定退避、指数退避和随机退避。如果你对这个话题感兴趣，你可以通过搜索网页了解更多。

在这里，我们实现了一个简单的重试策略，使用指数补偿进行重试，以演示目的。

# 记录错误并继续。

在某些情况下，容忍一个错误是可以的。在这种情况下，会记录错误，程序会继续运行。

# 记录并停止程序。

第四个错误处理策略是停止程序。主函数一般应该使用这种策略来终止程序。

# 摘要

Go 中的错误处理是必不可少的。现在，让我们开始享受用四种策略进行错误处理的快乐旅程。

我希望你喜欢读这篇文章。如果你愿意支持我成为一名作家，考虑成为一名媒体成员。你还可以无限制地访问媒体上的每个故事。