<html>
<head>
<title>Using Heroku for Static Web Content</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将Heroku用于静态网页内容</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/using-heroku-for-static-web-content-b7f5ce0712b1?source=collection_archive---------21-----------------------#2020-08-10">https://levelup.gitconnected.com/using-heroku-for-static-web-content-b7f5ce0712b1?source=collection_archive---------21-----------------------#2020-08-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="47c8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在“<a class="ae ko" rel="noopener ugc nofollow" target="_blank" href="/moving-away-from-aws-and-onto-heroku-d84852b9884d">从AWS迁移到Heroku </a>的文章中，我介绍了我想从亚马逊流行的AWS解决方案迁移到<a class="ae ko" href="https://www.heroku.com/" rel="noopener ugc nofollow" target="_blank"> Heroku </a>的应用程序。随后，“<a class="ae ko" rel="noopener ugc nofollow" target="_blank" href="/destination-heroku-86a5811a199c"> Destination Heroku </a>”文章阐述了新Heroku帐户的建立，并重点介绍了一个Java API(在Spring Boot编写),它连接到这个新的平台即服务(PaaS)生态系统中的ClearDB实例。我的主要目标是找到一个解决方案，让我能够将有限的时间集中在提供业务解决方案上，而不是跟上开发运维流程。</p><h1 id="3539" class="kp kq it bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">快速回顾</h1><p id="2ab3" class="pw-post-body-paragraph jq jr it js b jt ln jv jw jx lo jz ka kb lp kd ke kf lq kh ki kj lr kl km kn im bi translated">作为一个TL；(博士太长；没看)到原文章，我给婆婆开的小企业建了一个Angular客户端和一个Java API。在Elastic Beanstalk和S3上运行应用程序一年后，我想看看是否有更好的解决方案，让我能够更加专注于编写功能和增强功能，而不必担心学习、理解和执行AWS生态系统中固有的类似DevOps的方面。</p><p id="0cfa" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在，随着Java API在Heroku上运行，是时候关注应用程序的客户端了。</p><h1 id="e66d" class="kp kq it bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">AWS S3替代方案</h1><p id="b0f7" class="pw-post-body-paragraph jq jr it js b jt ln jv jw jx lo jz ka kb lp kd ke kf lq kh ki kj lr kl km kn im bi translated">亚马逊AWS简单存储服务(S3)是惊人的。那些对寻找令人兴奋的案例研究感兴趣的人，只要看看网飞或Airbnb提供的服务，就可以了解对象服务平台对于高要求应用程序的响应能力和可扩展性。</p><p id="71fd" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">虽然AMHS的应用程序在任何层面上都比不上网飞或Airbnb，但我最初选择了AWS S3，因为它是定位Angular应用程序静态文件的正确位置。我想让客户机代码和服务器代码运行在同一个基础服务上，这证明了我的决定是正确的。</p><p id="d676" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">当我开始考虑静态内容时，我不确定事情在Heroku模型中是如何工作的。在做一些快速研究时，很明显我不是这个用例的唯一使用者。事实上，所有的结果都让我想到了同一个解决方案——简单地利用Node.js Express服务器为客户机托管静态文件。因此，我将在Heroku中为客户端运行一个应用程序，就像我运行RESTful API一样。</p><h1 id="b2c7" class="kp kq it bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">创建<code class="fe ls lt lu lv b">amhs-angular</code>应用程序</h1><p id="8da3" class="pw-post-body-paragraph jq jr it js b jt ln jv jw jx lo jz ka kb lp kd ke kf lq kh ki kj lr kl km kn im bi translated">按照“<a class="ae ko" rel="noopener ugc nofollow" target="_blank" href="/destination-heroku-86a5811a199c"> Destination Heroku </a>”文章中相同的基本步骤，我创建了一个名为<code class="fe ls lt lu lv b">amhs-angular</code>的应用程序来存放Angular客户端代码。</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi lw"><img src="../Images/3fe17b1e17d6f1343aee7a188d3c9385.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*gVfCu2iF3qdZWiDC.png"/></div></div></figure><p id="9cb2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">由于这将只是一个静态web应用程序，因此不需要为此服务配置任何附加组件。我可以使用Heroku CLI的以下命令执行相同的过程:</p><p id="f6e1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe ls lt lu lv b">heroku create amhs-angular</code></p><p id="89ab" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">接下来，我使用下面的命令将<code class="fe ls lt lu lv b">amhs-angular</code> Heroku项目作为远程项目添加到AMHS Angular客户端的git存储库中:</p><p id="1ace" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe ls lt lu lv b">heroku git:remote -a amhs-angular</code></p><p id="501c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">它的响应输出如下:</p><p id="fe77" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe ls lt lu lv b">set git remote heroku to <a class="ae ko" href="https://git.heroku.com/amhs-angular.git" rel="noopener ugc nofollow" target="_blank">https://git.heroku.com/amhs-angular.git</a></code></p><p id="a71e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">以下git命令验证了远程设置是否正确:</p><p id="c0ea" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe ls lt lu lv b">$git remote -v</code></p><h1 id="2ab0" class="kp kq it bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">更新Angular以在Node Express内部运行</h1><p id="004a" class="pw-post-body-paragraph jq jr it js b jt ln jv jw jx lo jz ka kb lp kd ke kf lq kh ki kj lr kl km kn im bi translated">当对静态客户端文件使用AWS S3时，我遵循以下步骤，以便提供一个可公开访问的AMHS客户端版本:</p><ol class=""><li id="ece0" class="mi mj it js b jt ju jx jy kb mk kf ml kj mm kn mn mo mp mq bi translated">使用<code class="fe ls lt lu lv b">ng build --prod</code>命令建立角度分布</li><li id="5191" class="mi mj it js b jt mr jx ms kb mt kf mu kj mv kn mn mo mp mq bi translated">导航到AWS |存储| S3</li><li id="3cf7" class="mi mj it js b jt mr jx ms kb mt kf mu kj mv kn mn mo mp mq bi translated">单击AMHS桶</li><li id="9a29" class="mi mj it js b jt mr jx ms kb mt kf mu kj mv kn mn mo mp mq bi translated">将<code class="fe ls lt lu lv b">/dist</code>文件夹下的所有文件拖到AWS的主文件屏幕中</li><li id="b77a" class="mi mj it js b jt mr jx ms kb mt kf mu kj mv kn mn mo mp mq bi translated">选择所有文件并授予适当的安全级别</li></ol><p id="6c66" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">对于Heroku，计划使用Node.js Express服务器来托管这些文件。在AMHS Angular客户端项目的终端中，我执行了以下命令来包含express服务器:</p><p id="8621" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe ls lt lu lv b">$ npm install express --save</code></p><p id="7a7d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">接下来，我需要将<code class="fe ls lt lu lv b">package.json</code>更新为<code class="fe ls lt lu lv b">"start": "node server.js"</code>，还包括一个<code class="fe ls lt lu lv b">"postinstall": "ng build --output-path dist"</code>来执行角度构建。</p><p id="2e2c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">下面是<code class="fe ls lt lu lv b">package.json</code>更新后的副本:</p><p id="7ac4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">JSON</p><pre class="lx ly lz ma gt mw lv mx my aw mz bi"><span id="acf6" class="na kq it lv b gy nb nc l nd ne">"scripts": {<br/>"ng": "ng",<br/>"start": "node server.js",<br/>"build": "ng build --prod",<br/>"test": "ng test",<br/>"lint": "ng lint",<br/>"e2e": "ng e2e",<br/>"postinstall": "ng build --output-path dist"<br/>},</span></pre><p id="812b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我还需要包含一个<code class="fe ls lt lu lv b">"engines"</code>属性，与<code class="fe ls lt lu lv b">"scripts"</code>到<code class="fe ls lt lu lv b">package.json</code>处于同一级别:</p><p id="6119" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">JSON</p><pre class="lx ly lz ma gt mw lv mx my aw mz bi"><span id="026b" class="na kq it lv b gy nb nc l nd ne">},<br/>"engines": {<br/>"node": "11.15.0",<br/>"npm": "6.7.0"<br/>}</span></pre><p id="5d6e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">接下来，需要创建一个通用的<code class="fe ls lt lu lv b">server.js</code>文件(如上所述)。内容列举如下:</p><p id="bc58" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Java Script语言</p><pre class="lx ly lz ma gt mw lv mx my aw mz bi"><span id="75c5" class="na kq it lv b gy nb nc l nd ne">const express = require('express');<br/>const path = require('path');<br/>const app = express();<br/>app.use(express.static('./dist'));<br/>app.get('/*', function(req,res) {<br/>res.sendFile(path.join(__dirname,'/dist/index.html'));<br/>});<br/>app.listen(process.env.PORT || 8080);</span></pre><p id="1890" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">最后，我需要更新<code class="fe ls lt lu lv b">environment.prod.ts</code> Angular文件，以引用正确的回调URL和“Destination Heroku”文章中创建的API:</p><p id="94e2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Java Script语言</p><pre class="lx ly lz ma gt mw lv mx my aw mz bi"><span id="7a00" class="na kq it lv b gy nb nc l nd ne">api: 'https://amhs.herokuapp.com',<br/>redirectUrl: 'https://amhs-angular.herokuapp.com/implicit/callback'</span></pre><p id="e82d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我还需要包含一个<code class="fe ls lt lu lv b">"engines"</code>属性，与<code class="fe ls lt lu lv b">package.json</code>的<code class="fe ls lt lu lv b">"scripts"</code>处于同一级别:</p><p id="4cfb" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">JSON</p><pre class="lx ly lz ma gt mw lv mx my aw mz bi"><span id="1436" class="na kq it lv b gy nb nc l nd ne">},<br/>"engines": {<br/>"node": "11.15.0",<br/>"npm": "6.7.0"<br/>}</span></pre><p id="c9ec" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">接下来，需要创建一个通用的<code class="fe ls lt lu lv b">server.js</code>文件(如上所述)。内容列举如下:</p><p id="ad9b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Java Script语言</p><pre class="lx ly lz ma gt mw lv mx my aw mz bi"><span id="052c" class="na kq it lv b gy nb nc l nd ne">const express = require('express');<br/>const path = require('path');<br/>const app = express();<br/>app.use(express.static('./dist'));<br/>app.get('/*', function(req,res) {<br/>res.sendFile(path.join(__dirname,'/dist/index.html'));<br/>});<br/>app.listen(process.env.PORT || 8080);</span></pre><p id="00cd" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">最后，我需要更新<code class="fe ls lt lu lv b">environment.prod.ts</code> Angular文件，以引用正确的回调URL和“Destination Heroku”文章中创建的API:</p><p id="37a3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Java Script语言</p><pre class="lx ly lz ma gt mw lv mx my aw mz bi"><span id="0cee" class="na kq it lv b gy nb nc l nd ne">api: 'https://amhs.herokuapp.com',<br/>redirectUrl: 'https://amhs-angular.herokuapp.com/implicit/callback'</span></pre><p id="7f83" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">此时，当客户端被部署时，它准备好利用Node.js Express服务器来托管<code class="fe ls lt lu lv b">/dist</code>文件夹中的文件，当https://amhs-angular.herokuapp.com URL被调用时，调用<code class="fe ls lt lu lv b">/dist/index.html</code>文件。</p><h1 id="f69d" class="kp kq it bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">应用增强</h1><p id="a3f9" class="pw-post-body-paragraph jq jr it js b jt ln jv jw jx lo jz ka kb lp kd ke kf lq kh ki kj lr kl km kn im bi translated">除了进行上述更改，我还想为AMHS应用程序引入一些新特性。积压的两个项目如下:</p><ul class=""><li id="80b8" class="mi mj it js b jt ju jx jy kb mk kf ml kj mm kn nf mo mp mq bi translated">引入删除属性的功能</li><li id="de45" class="mi mj it js b jt mr jx ms kb mt kf mu kj mv kn nf mo mp mq bi translated">允许管理员用户删除员工</li></ul><p id="759b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">必要的API修改已经就绪，我继续更新Angular客户端。属性列表现在包含每个属性的删除按钮:</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi ng"><img src="../Images/3199be101e8cf20b680ec1ce5818111f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*r1IPwWW5_2iv1zTs.png"/></div></div></figure><p id="eb7f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">删除属性是一个简单的操作，并且在执行实际删除之前包括一个确认模式:</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/7db61ad0e689292485d51cf6749741bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1004/format:webp/0*YG4sWeUwK9ED2jlq.png"/></div></figure><p id="d308" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">人员视图还包括一个删除按钮:</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi ng"><img src="../Images/6f4905b36071344a0df1ab6e4bf0bd99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*hB-wypJXAqiOkWoJ.png"/></div></div></figure><p id="8f83" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">对于工作人员，事情要复杂一些。下面说明了基本的业务规则:</p><ol class=""><li id="c0f4" class="mi mj it js b jt ju jx jy kb mk kf ml kj mm kn mn mo mp mq bi translated">如果员工的销售与现有物业相关，则不应删除该员工。</li><li id="2584" class="mi mj it js b jt mr jx ms kb mt kf mu kj mv kn mn mo mp mq bi translated">如果员工是任何在职员工的经理，则不应删除该员工。</li><li id="680c" class="mi mj it js b jt mr jx ms kb mt kf mu kj mv kn mn mo mp mq bi translated">在这两种情况都不允许的情况下，建议将该工作人员停职。</li></ol><p id="190e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">使用此逻辑，当条件#1不满足时，出现以下模式:</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/9703e5e1e08145fdcd5619451cc83077.png" data-original-src="https://miro.medium.com/v2/resize:fit:1016/format:webp/0*wWtEL6S9F8IB26ap.png"/></div></figure><p id="f743" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">类似地，不满足条件#2会产生如下所示的模式:</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/b8ef3829ed9a7d4203f3a3ed98024cad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1008/format:webp/0*4F13ABYcgb8apHkx.png"/></div></figure><p id="7bc6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">当一个职员可以被删除时，会出现如下确认模式:</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/b08a92b5e6de640c6f0925c5b14b671b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1010/format:webp/0*v6JUR1vUD3RKZ7vA.png"/></div></figure><p id="9e36" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在确认一切都按预期运行之后，上面的所有更改都被签入到AMHS Angular客户端存储库的主分支中。</p><h1 id="befb" class="kp kq it bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">推动Heroku的变革</h1><p id="e3cc" class="pw-post-body-paragraph jq jr it js b jt ln jv jw jx lo jz ka kb lp kd ke kf lq kh ki kj lr kl km kn im bi translated">检查了AMHS Angular客户端存储库中的代码并为<code class="fe ls lt lu lv b">amhs-angular</code>项目设置了Heroku远程设置后，使用以下命令将代码部署到Heroku:</p><p id="9044" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe ls lt lu lv b">git push heroku</code></p><p id="43ab" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">以下命令提供了关于部署的更新:</p><p id="d2a2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">壳</p><pre class="lx ly lz ma gt mw lv mx my aw mz bi"><span id="2ad3" class="na kq it lv b gy nb nc l nd ne">-----&gt; Node.js app detected</span><span id="f225" class="na kq it lv b gy nl nc l nd ne"><br/>-----&gt; Creating runtime environment</span><span id="2c72" class="na kq it lv b gy nl nc l nd ne">NPM_CONFIG_LOGLEVEL=error<br/>NODE_ENV=production<br/>NODE_MODULES_CACHE=true<br/>NODE_VERBOSE=false</span><span id="3239" class="na kq it lv b gy nl nc l nd ne">-----&gt; Installing binaries<br/>engines.node (package.json):  11.15.0<br/>engines.npm (package.json):   6.7.0</span><span id="9e85" class="na kq it lv b gy nl nc l nd ne">Resolving node version 11.15.0...<br/>Downloading and installing node 11.15.0...<br/>npm 6.7.0 already installed with node</span><span id="15be" class="na kq it lv b gy nl nc l nd ne">-----&gt; Restoring cache<br/>- node_modules</span><span id="286f" class="na kq it lv b gy nl nc l nd ne">-----&gt; Installing dependencies<br/>Installing node modules</span><span id="5865" class="na kq it lv b gy nl nc l nd ne">&gt; fsevents@1.2.12 install /tmp/build_d2400638d424ad7a3269162acc30fb7e/node_modules/fsevents</span><span id="f4d6" class="na kq it lv b gy nl nc l nd ne">&gt; node-gyp rebuild</span><span id="d62e" class="na kq it lv b gy nl nc l nd ne">gyp info it worked if it ends with ok<br/>gyp info using node-gyp@3.8.0<br/>gyp info using node@11.15.0 | linux | x64<br/>gyp http GET <a class="ae ko" href="https://nodejs.org/download/release/v11.15.0/node-v11.15.0-headers.tar.gz" rel="noopener ugc nofollow" target="_blank">https://nodejs.org/download/release/v11.15.0/node-v11.15.0-headers.tar.gz</a><br/>gyp http 200 <a class="ae ko" href="https://nodejs.org/download/release/v11.15.0/node-v11.15.0-headers.tar.gz" rel="noopener ugc nofollow" target="_blank">https://nodejs.org/download/release/v11.15.0/node-v11.15.0-headers.tar.gz</a><br/>gyp http GET <a class="ae ko" href="https://nodejs.org/download/release/v11.15.0/SHASUMS256.txt" rel="noopener ugc nofollow" target="_blank">https://nodejs.org/download/release/v11.15.0/SHASUMS256.txt</a><br/>gyp http 200 <a class="ae ko" href="https://nodejs.org/download/release/v11.15.0/SHASUMS256.txt" rel="noopener ugc nofollow" target="_blank">https://nodejs.org/download/release/v11.15.0/SHASUMS256.txt</a><br/>gyp info spawn /usr/bin/python2<br/>gyp info spawn args [ '/tmp/build_d2400638d424ad7a3269162acc30fb7e/.heroku/node/lib/node_modules/npm/node_modules/node-gyp/gyp/gyp_main.py',<br/>gyp info spawn args   'binding.gyp',<br/>gyp info spawn args   '-f',<br/>gyp info spawn args   'make',<br/>gyp info spawn args   '-I',<br/>gyp info spawn args   '/tmp/build_d2400638d424ad7a3269162acc30fb7e/node_modules/fsevents/build/config.gypi'<br/>gyp info spawn args   '-I',<br/>gyp info spawn args   '/tmp/build_d2400638d424ad7a3269162acc30fb7e/.heroku/node/lib/node_modules/npm/node_modules/node-gyp/addon.gypi',<br/>gyp info spawn args   '-I',<br/>gyp info spawn args   '/app/.node-gyp/11.15.0/include/node/common.gypi',<br/>gyp info spawn args   '-Dlibrary=shared_library',<br/>gyp info spawn args   '-Dvisibility=default',<br/>gyp info spawn args   '-Dnode_root_dir=/app/.node-gyp/11.15.0',<br/>gyp info spawn args   '-Dnode_gyp_dir=/tmp/build_d2400638d424ad7a3269162acc30fb7e/.heroku/node/lib/node_modules/npm/node_modules/node-gyp',<br/>gyp info spawn args   '-Dnode_lib_file=/app/.node-gyp/11.15.0/&lt;(target_arch)/node.lib',<br/>gyp info spawn args   '-Dmodule_root_dir=/tmp/build_d2400638d424ad7a3269162acc30fb7e/node_modules/fsevents',<br/>gyp info spawn args   '-Dnode_engine=v8',<br/>gyp info spawn args   '--depth=.',<br/>gyp info spawn args   '--no-parallel',<br/>gyp info spawn args   '--generator-output',<br/>gyp info spawn args   'build',<br/>gyp info spawn args   '-Goutput_dir=.' ]<br/>gyp info spawn make<br/>gyp info spawn args [ 'BUILDTYPE=Release', '-C', 'build' ]<br/>make: Entering directory '/tmp/build_d2400638d424ad7a3269162acc30fb7e/node_modules/fsevents/build'<br/>SOLINK_MODULE(target) Release/obj.target/.node<br/>COPY Release/.node<br/>make: Leaving directory '/tmp/build_d2400638d424ad7a3269162acc30fb7e/node_modules/fsevents/build'<br/>gyp info ok</span><span id="3242" class="na kq it lv b gy nl nc l nd ne">&gt; node-sass@4.14.0 install /tmp/build_d2400638d424ad7a3269162acc30fb7e/node_modules/node-sass<br/>&gt; node scripts/install.js</span><span id="d762" class="na kq it lv b gy nl nc l nd ne">Downloading binary from <a class="ae ko" href="https://github.com/sass/node-sass/releases/download/v4.14.0/linux-x64-67_binding.node" rel="noopener ugc nofollow" target="_blank">https://github.com/sass/node-sass/releases/download/v4.14.0/linux-x64-67_binding.node</a><br/>Download complete<br/>Binary saved to /tmp/build_d2400638d424ad7a3269162acc30fb7e/node_modules/node-sass/vendor/linux-x64-67/binding.node</span><span id="6dad" class="na kq it lv b gy nl nc l nd ne">&gt; node-sass@4.14.0 postinstall /tmp/build_d2400638d424ad7a3269162acc30fb7e/node_modules/node-sass<br/>&gt; node scripts/build.js</span><span id="db92" class="na kq it lv b gy nl nc l nd ne">Binary found at /tmp/build_d2400638d424ad7a3269162acc30fb7e/node_modules/node-sass/vendor/linux-x64-67/binding.node<br/>Testing binary<br/>Binary is fine</span><span id="db88" class="na kq it lv b gy nl nc l nd ne">&gt; ejs@2.7.4 postinstall /tmp/build_d2400638d424ad7a3269162acc30fb7e/node_modules/ejs<br/>&gt; node ./postinstall.js</span><span id="7a8b" class="na kq it lv b gy nl nc l nd ne">Thank you for installing EJS: built with the Jake JavaScript build tool (https://jakejs.com/)</span><span id="0ac8" class="na kq it lv b gy nl nc l nd ne"><br/>&gt; core-js@2.6.11 postinstall /tmp/build_d2400638d424ad7a3269162acc30fb7e/node_modules/core-js<br/>&gt; node -e "try{require('./postinstall')}catch(e){}"</span><span id="46ee" class="na kq it lv b gy nl nc l nd ne">Thank you for using core-js ( <a class="ae ko" href="https://github.com/zloirock/core-js" rel="noopener ugc nofollow" target="_blank">https://github.com/zloirock/core-js</a> ) for polyfilling JavaScript standard library!</span><span id="fab7" class="na kq it lv b gy nl nc l nd ne">The project needs your help! Please consider supporting of core-js on Open Collective or Patreon:<br/>&gt; <a class="ae ko" href="https://opencollective.com/core-js" rel="noopener ugc nofollow" target="_blank">https://opencollective.com/core-js</a><br/>&gt; <a class="ae ko" href="https://www.patreon.com/zloirock" rel="noopener ugc nofollow" target="_blank">https://www.patreon.com/zloirock</a></span><span id="9709" class="na kq it lv b gy nl nc l nd ne">Also, the author of core-js ( <a class="ae ko" href="https://github.com/zloirock" rel="noopener ugc nofollow" target="_blank">https://github.com/zloirock</a> ) is looking for a good job -)</span><span id="63c7" class="na kq it lv b gy nl nc l nd ne"><br/>&gt; uws@9.14.0 install /tmp/build_d2400638d424ad7a3269162acc30fb7e/node_modules/uws<br/>&gt; node-gyp rebuild &gt; build_log.txt 2&gt;&amp;1 || exit 0</span><span id="b6da" class="na kq it lv b gy nl nc l nd ne"><br/>&gt; amhs-client@0.0.0 postinstall /tmp/build_d2400638d424ad7a3269162acc30fb7e<br/>&gt; ng build --output-path dist</span><span id="7636" class="na kq it lv b gy nl nc l nd ne"><br/>Date: 2020-04-29T14:51:08.447Z<br/>Hash: 3d551622b66d1beb5645<br/>Time: 16403ms<br/>chunk {main} main.js, main.js.map (main) 238 kB [initial] [rendered]<br/>chunk {polyfills} polyfills.js, polyfills.js.map (polyfills) 428 kB [initial] [rendered]<br/>chunk {runtime} runtime.js, runtime.js.map (runtime) 6.22 kB [entry] [rendered]<br/>chunk {styles} styles.js, styles.js.map (styles) 60.8 kB [initial] [rendered]<br/>chunk {vendor} vendor.js, vendor.js.map (vendor) 4.96 MB [initial] [rendered]<br/>added 1304 packages in 78.585s</span><span id="cbbc" class="na kq it lv b gy nl nc l nd ne">-----&gt; Build<br/>Running build</span><span id="ccc7" class="na kq it lv b gy nl nc l nd ne">&gt; amhs-client@0.0.0 build /tmp/build_d2400638d424ad7a3269162acc30fb7e<br/>&gt; ng build --prod</span><span id="84d4" class="na kq it lv b gy nl nc l nd ne"><br/>Date: 2020-04-29T14:52:24.535Z<br/>Hash: 459ef7d3fda55011a399<br/>Time: 72281ms<br/>chunk {0} runtime.06daa30a2963fa413676.js (runtime) 1.44 kB [entry] [rendered]<br/>chunk {1} main.478fe235ec2084c25ab2.js (main) 867 kB [initial] [rendered]<br/>chunk {2} polyfills.aeab97ddd8f1df8ccaa1.js (polyfills) 103 kB [initial] [rendered]<br/>chunk {3} styles.495d5a4089b8a2584a59.css (styles) 30.9 kB [initial] [rendered]</span><span id="9f01" class="na kq it lv b gy nl nc l nd ne">-----&gt; Caching build<br/>- node_modules</span><span id="5aea" class="na kq it lv b gy nl nc l nd ne">-----&gt; Pruning devDependencies<br/>removed 1204 packages and audited 182 packages in 18.694s<br/>found 3 vulnerabilities (1 low, 1 moderate, 1 high)<br/>run `npm audit fix` to fix them, or `npm audit` for details</span><span id="448d" class="na kq it lv b gy nl nc l nd ne">-----&gt; Build succeeded!<br/>-----&gt; Discovering process types<br/>Procfile declares types     -&gt; (none)<br/>Default types for buildpack -&gt; web<br/>-----&gt; Compressing...<br/>Done: 53.1M<br/>-----&gt; Launching...<br/>Released v1<br/><a class="ae ko" href="https://amhs-angular.herokuapp.com/" rel="noopener ugc nofollow" target="_blank">https://amhs-angular.herokuapp.com/</a> deployed to Heroku</span></pre><p id="ecf6" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">查看Heroku控制台，显示以下信息:</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi nm"><img src="../Images/b398154c143f650d89ab237526c53749.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*o7bwvYN2vt8Bxp8O.png"/></div></div></figure><p id="74c4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在，下面的URL已经准备好并可用:</p><p id="646d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><a class="ae ko" href="https://amhs-angular.herokuapp.com/" rel="noopener ugc nofollow" target="_blank">https://amhs-angular.herokuapp.com</a></p><p id="0b79" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">使用时，将与Okta集成以显示AMHS应用程序的登录屏幕:</p><figure class="lx ly lz ma gt mb gh gi paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="gh gi nn"><img src="../Images/3423a56d98cef4bc256beb8964fdf495.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*fSKmAZ1eZhwrRoTj.png"/></div></div></figure><h1 id="0c5b" class="kp kq it bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">结论</h1><p id="b1de" class="pw-post-body-paragraph jq jr it js b jt ln jv jw jx lo jz ka kb lp kd ke kf lq kh ki kj lr kl km kn im bi translated">将Heroku用于AMHS Angular客户端，部署从许多手动步骤减少到一个git命令:</p><p id="12fb" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><code class="fe ls lt lu lv b">git push heroku</code></p><p id="fd05" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">事实上，使用GitLab(存放AMHS源代码的地方)中的CI/CD功能，可以使用一个非常基本的管道来自动化这个过程，当存储库的主分支发生变化时，就会触发这个管道。</p><p id="58e8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">虽然我确信在AWS S3有一种方法可以自动完成同样的步骤，但是需要更多的时间来学习技术的各个方面，而不是专注于为我的客户提供特性和功能。</p><p id="1ad8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在本系列的最后一篇文章中，我将讨论以下几点:</p><ul class=""><li id="b9d9" class="mi mj it js b jt ju jx jy kb mk kf ml kj mm kn nf mo mp mq bi translated">详述新设计</li><li id="4ab1" class="mi mj it js b jt mr jx ms kb mt kf mu kj mv kn nf mo mp mq bi translated">事情发生了怎样的变化</li><li id="03d8" class="mi mj it js b jt mr jx ms kb mt kf mu kj mv kn nf mo mp mq bi translated">使用Heroku的保障性和维修性</li><li id="5508" class="mi mj it js b jt mr jx ms kb mt kf mu kj mv kn nf mo mp mq bi translated">经验教训</li></ul><p id="e65a" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">祝你今天过得愉快！</p></div></div>    
</body>
</html>