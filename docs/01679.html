<html>
<head>
<title>Introduction to Express.js: a Node.js Framework</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Express.js简介:Node.js框架</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/introduction-to-express-js-a-node-js-framework-fa3dcbba3a98?source=collection_archive---------14-----------------------#2020-01-21">https://levelup.gitconnected.com/introduction-to-express-js-a-node-js-framework-fa3dcbba3a98?source=collection_archive---------14-----------------------#2020-01-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div class="gh gi jq"><img src="../Images/b117efee1ddeec9cb856c97d9515fe66.png" data-original-src="https://miro.medium.com/v2/resize:fit:870/format:webp/1*mP9IItA6sPV0ZlP1ZEHTjg.png"/></div><figcaption class="jx jy gj gh gi jz ka bd b be z dk translated">Express.js是构建在Node.js之上的框架</figcaption></figure><p id="52af" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">狂热者终于找到了我。我决定深入研究Express.js框架以及它如何补充React前端。所以，让我们从Node.js的一些吸引人的统计数据开始，你可以在互联网上找到这些数据:</p><ul class=""><li id="60e8" class="kz la it kd b ke kf ki kj km lb kq lc ku ld ky le lf lg lh bi translated">亚马逊、网飞、易贝、Reddit、LinkedIn、Tumblr和PayPal都使用Node。</li><li id="a416" class="kz la it kd b ke li ki lj km lk kq ll ku lm ky le lf lg lh bi translated"><strong class="kd iu"> 43%的Node.js开发者</strong>将其用于企业应用。</li><li id="e32e" class="kz la it kd b ke li ki lj km lk kq ll ku lm ky le lf lg lh bi translated">85%的人主要将它用于web应用程序开发。</li><li id="da0c" class="kz la it kd b ke li ki lj km lk kq ll ku lm ky le lf lg lh bi translated">部署Node.js后，PayPal的页面平均响应时间减少了35%</li><li id="0338" class="kz la it kd b ke li ki lj km lk kq ll ku lm ky le lf lg lh bi translated">Node.js被发现<strong class="kd iu">将应用程序的性能提高了50% </strong>。</li><li id="6084" class="kz la it kd b ke li ki lj km lk kq ll ku lm ky le lf lg lh bi translated">发现node . js<strong class="kd iu">降低开发成本58% </strong>。</li><li id="5057" class="kz la it kd b ke li ki lj km lk kq ll ku lm ky le lf lg lh bi translated">Node.js在美国最受欢迎——几乎有28，000个网站在使用它。</li></ul><figure class="lo lp lq lr gt ju gh gi paragraph-image"><div class="gh gi ln"><img src="../Images/1315786cf8951067deb200d9cd9849aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:996/1*1pjScfjNCaNzrHQNzZ2ibg.gif"/></div><figcaption class="jx jy gj gh gi jz ka bd b be z dk translated">太棒了</figcaption></figure><p id="55a7" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu"> <em class="ls">对于这个演示，我将通过Expo </em> </strong>与React Native合作</p><p id="f571" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">那么我们如何开始呢？首先，让我们创建一个React本地应用程序。当CLI中出现提示时，我选择了“tabs”选项。</p><pre class="lo lp lq lr gt lt lu lv lw aw lx bi"><span id="89ae" class="ly lz it lu b gy ma mb l mc md">expo init rn-express-app<br/>cd rn-express-app<br/>mkdir client<br/>code .</span></pre><p id="2502" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">太棒了。所以这里有一个额外的步骤，我们创建了一个目录，<code class="fe me mf mg lu b">client</code>，在那里我们将存储所有面向用户的React本地代码。</p><p id="b4dc" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">下一步，在您喜欢的文本编辑器中打开项目目录。一旦打开，将所有的样板RN代码移动到<code class="fe me mf mg lu b">client</code>目录中。接下来输入以下命令:</p><pre class="lo lp lq lr gt lt lu lv lw aw lx bi"><span id="6177" class="ly lz it lu b gy ma mb l mc md">mkdir backend<br/>cd backend<br/>npm init y</span></pre><p id="5a98" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在后台打开你的<code class="fe me mf mg lu b">package.json</code>文件，修改如下内容:</p><pre class="lo lp lq lr gt lt lu lv lw aw lx bi"><span id="3e23" class="ly lz it lu b gy ma mb l mc md"><strong class="lu iu">{<br/>  "name": "rn-express-app",<br/>  "version": "1.0.0",<br/>  "scripts": {<br/>  "client": "cd client &amp;&amp; yarn start",<br/>  "server": "nodemon server.js",<br/>  "dev": "concurrently --kill-others-on-fail \"yarn server\" \"yarn        client\""<br/>  },<br/>  "dependencies": {<br/>  "body-parser": "^1.18.3",<br/>  "express": "^4.16.4",<br/>  "nodemon": "^2.0.2"<br/>  },<br/> "devDependencies": {<br/>  "concurrently": "^4.0.1"<br/>  }<br/>}</strong></span></pre><p id="bbc1" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">接下来运行以下命令:</p><pre class="lo lp lq lr gt lt lu lv lw aw lx bi"><span id="ba30" class="ly lz it lu b gy ma mb l mc md">yarn</span></pre><p id="df6f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在，让我们在<code class="fe me mf mg lu b">backend</code>目录的根目录下创建一个<em class="ls"> server.js </em>文件:</p><pre class="lo lp lq lr gt lt lu lv lw aw lx bi"><span id="aaed" class="ly lz it lu b gy ma mb l mc md">touch server.js</span></pre><p id="af14" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在我们可以跳到一些实际的代码中。对于这个例子，我们将从前端发出一个简单的<code class="fe me mf mg lu b">GET</code>请求和一个<code class="fe me mf mg lu b">POST</code>请求。</p><p id="0f6e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><em class="ls"> Server.js </em></p><pre class="lo lp lq lr gt lt lu lv lw aw lx bi"><span id="ceaf" class="ly lz it lu b gy ma mb l mc md">const express = require("express");<br/>const bodyParser = require("body-parser");</span><span id="97ac" class="ly lz it lu b gy mh mb l mc md">const app = express();<br/>const port = process.env.PORT || 3000;</span></pre><p id="061b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">使用Express时需要指出两点:</p><ol class=""><li id="b8e4" class="kz la it kd b ke kf ki kj km lb kq lc ku ld ky mi lf lg lh bi translated">Require语句→ Node.js和CommonJS一起运行真的很好。这意味着我们将使用模块和require语句。你通过<em class="ls">拉进来的这些模块需要语句</em>都有特定的任务。对于我们的例子，我们将发出一个POST请求，所以我们需要<code class="fe me mf mg lu b">body-parser</code>模块。<code class="fe me mf mg lu b">body-parser</code>是一个中间件模块，它解析使用<code class="fe me mf mg lu b">HTTP POST</code>请求提交的JSON、buffer、string和URL编码的数据。</li><li id="cb76" class="kz la it kd b ke li ki lj km lk kq ll ku lm ky mi lf lg lh bi translated">const app = express() →这个变量实际上代表你的Express app。你对它调用的每一个方法，你做的每一个修改都将存储在这个变量中。</li></ol><p id="6fee" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><em class="ls"> Server.js </em></p><pre class="lo lp lq lr gt lt lu lv lw aw lx bi"><span id="37ff" class="ly lz it lu b gy ma mb l mc md">app.listen(port, () =&gt; console.log(`LiStEnInG on pOrT ${port}`));</span></pre><p id="29a9" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这告诉我们的Express服务器在端口3000上运行，或者在您的。环境文件。现在，让我们添加一些路线。</p><pre class="lo lp lq lr gt lt lu lv lw aw lx bi"><span id="50af" class="ly lz it lu b gy ma mb l mc md">const express = require("express");<br/>const bodyParser = require("body-parser");</span><span id="4af7" class="ly lz it lu b gy mh mb l mc md">const app = express();<br/>const port = process.env.PORT || 3000;</span><span id="16c0" class="ly lz it lu b gy mh mb l mc md"><strong class="lu iu">app.use(bodyParser.json());<br/>app.use(bodyParser.urlencoded({ extended: true }));</strong></span><span id="c612" class="ly lz it lu b gy mh mb l mc md"><strong class="lu iu">app.get("/get", (req, res) =&gt; {<br/>  res.send({ theServer: "hElLo FrOm YoUr ExPrEsS sErVeR" });<br/>});</strong></span><span id="03a3" class="ly lz it lu b gy mh mb l mc md"><strong class="lu iu">app.post("/wow/post", (req, res) =&gt; {<br/>  console.log(req.body);<br/>  res.send(`Here is what you sent me: ${req.body.post}`);<br/>});</strong></span><span id="64f8" class="ly lz it lu b gy mh mb l mc md">app.listen(port, () =&gt; console.log(`LiStEnInG on pOrT ${port}`));</span></pre><p id="7b5e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">让我们来分解一下<code class="fe me mf mg lu b">GET</code>请求。<code class="fe me mf mg lu b">.get()</code>方法有三个参数:路由、<em class="ls">尽可能多的回调、请求和响应。对于我们简单的<code class="fe me mf mg lu b">GET</code>请求，我们只想发送回一个包含好消息的对象。所以说白了，当用户向我们的/get路由发出一个<em class="ls">请求</em>时，我们将发送一个包含消息的<em class="ls">响应</em>对象。</em></p><p id="198f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">在我们从前端进行初始提取之后，我们将返回到POST请求。在该目录中，输入以下命令:</p><pre class="lo lp lq lr gt lt lu lv lw aw lx bi"><span id="f26b" class="ly lz it lu b gy ma mb l mc md">node server.js</span></pre><p id="fa83" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">现在您的服务器应该已经启动并运行在localhost:3000上了。让我们直接进入RN代码。进入你的<code class="fe me mf mg lu b">client</code>目录，打开<em class="ls"> HomeScreen.js </em>，添加以下代码:</p><p id="aa6a" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><em class="ls"> /Screens/HomeScreen.js </em></p><pre class="lo lp lq lr gt lt lu lv lw aw lx bi"><span id="81cc" class="ly lz it lu b gy ma mb l mc md"><strong class="lu iu">import React, { useEffect } from 'react'<br/>...<br/></strong>export default function HomeScreen() {</span><span id="b57f" class="ly lz it lu b gy mh mb l mc md"><strong class="lu iu">useEffect(() =&gt; {<br/>   fetch("http://localhost:3000/get")<br/>    .then(res =&gt; res.json())<br/>    .then(res =&gt; console.log(res.theServer))<br/>  }, []);</strong></span><span id="7c8d" class="ly lz it lu b gy mh mb l mc md">...</span><span id="b9f4" class="ly lz it lu b gy mh mb l mc md">}</span></pre><p id="aef2" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">是啊，是啊，是啊，没有ES8异步函数等待获取挂钩等等等等。我试着保持简单。现在，让我们通过在“client”目录中输入以下命令来启动RN应用程序。</p><pre class="lo lp lq lr gt lt lu lv lw aw lx bi"><span id="bf9f" class="ly lz it lu b gy ma mb l mc md">yarn start</span></pre><p id="4168" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">如果一切都添加正确(或者如果我没有犯任何错误)，您应该在您的终端中看到以下内容:</p><figure class="lo lp lq lr gt ju gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/6a5b15cb48333ae805dedcaebbf9ecb9.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/format:webp/1*1fVEq8FlvPfSU5YmU9w-6A.png"/></div><figcaption class="jx jy gj gh gi jz ka bd b be z dk translated">你的服务器正在运转</figcaption></figure><figure class="lo lp lq lr gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="ml mm di mn bf mo"><div class="gh gi mk"><img src="../Images/756685e57835ec6c978e3008e67d9de5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YJIVsQS2DD9VN3cgaPhVMQ.png"/></div></div><figcaption class="jx jy gj gh gi jz ka bd b be z dk translated">通过面向用户的注册护士应用程序</figcaption></figure><p id="7d64" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">太好了。现在我们来提一个<code class="fe me mf mg lu b">POST</code>要求。这里有一个简单的表单+提交处理程序，您可以通过替换<code class="fe me mf mg lu b">ScrollView</code>容器中的代码将它添加到HomeScreen.js中。</p><pre class="lo lp lq lr gt lt lu lv lw aw lx bi"><span id="fb30" class="ly lz it lu b gy ma mb l mc md">export default function HomeScreen() {<strong class="lu iu"><br/>  const [inputState, setInput] = useState("");<br/>  const [response, setResponse] = useState();</strong></span><span id="6956" class="ly lz it lu b gy mh mb l mc md">useEffect(() =&gt; {<br/>   fetch("http://localhost:3000/users")<br/>    .then(res =&gt; res.json())<br/>    .then(res =&gt; console.log(res.express));<br/>   }, []);</span><span id="5e32" class="ly lz it lu b gy mh mb l mc md"><strong class="lu iu">async function handleSubmit() {</strong><br/>   <strong class="lu iu">const response = await fetch("http://localhost:3000/wow/post", {<br/>     method: "POST",<br/>     headers: {<br/>      "Content-Type": "application/json"<br/>      },<br/>     body: JSON.stringify(inputState)<br/>    });</strong></span><span id="2b05" class="ly lz it lu b gy mh mb l mc md"><strong class="lu iu">  const body = await response.text();<br/>  setResponse({ responseToPost: body });<br/>}</strong></span><span id="f7bd" class="ly lz it lu b gy mh mb l mc md">return (<br/>   &lt;View <em class="ls">style</em>={styles.container}&gt;<br/>    &lt;ScrollView<br/>     <em class="ls">style</em>={styles.container}<br/>     <em class="ls">contentContainerStyle</em>={styles.contentContainer}<br/>    &gt;<strong class="lu iu"><br/>    &lt;Text<br/>      <em class="ls">style</em>={{<br/>       fontWeight: "900",<br/>       fontSize: 24,<br/>       marginTop: 200,<br/>       marginLeft: "auto",<br/>       marginRight: "auto"<br/>       }}<br/>     &gt;<br/>     Express Server Form<br/>    &lt;/Text&gt;<br/>   &lt;View<br/>     <em class="ls">style</em>={{<br/>       backgroundColor: "#F2EFEE",<br/>       height: 75,<br/>       marginTop: 20,<br/>       marginBottom: "auto"<br/>      }}&gt;<br/>     &lt;TextInput<br/>      <em class="ls">style</em>={{ color: "black", fontSize: 50 }}<br/>      <em class="ls">value</em>={inputState}<br/>      <em class="ls">onChangeText</em>={text =&gt; setInput(text)}<br/>     /&gt;<br/>   &lt;TouchableOpacity<br/>      <em class="ls">onPress</em>={handleSubmit}<br/>      <em class="ls">style</em>={{<br/>        borderRadius: 10,<br/>        marginLeft: "auto",<br/>        marginRight: "auto",<br/>        marginTop: 30,<br/>        backgroundColor: "#25aae1",<br/>        padding: 5,<br/>        height: 40,<br/>        width: 80<br/>        }}&gt;<br/>     &lt;Text <em class="ls">style</em>={{ color: "white", fontWeight: "800", padding: 5 }}&gt;<br/>Submit<br/>  &lt;/Text&gt;<br/>&lt;/TouchableOpacity&gt;<br/>   {response ? (<br/>     &lt;Text <em class="ls">style</em>={{ marginTop: 10, marginLeft: 20 }}&gt;<br/>       Response: {response.responseToPost}<br/>     &lt;/Text&gt;) : (<br/>     &lt;Text <em class="ls">style</em>={{ marginTop: 10, marginLeft: 20 }}&gt;Response:&lt;/Text&gt;<br/>     )}<br/>   &lt;/View&gt;<br/>  </strong>&lt;/ScrollView&gt;<br/>  &lt;/View&gt;<strong class="lu iu"><br/>);<br/>}</strong></span></pre><p id="919e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">旋转它，并通过您的注册护士应用程序发送请求:</p><pre class="lo lp lq lr gt lt lu lv lw aw lx bi"><span id="616a" class="ly lz it lu b gy ma mb l mc md">yarn start</span></pre><p id="1269" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">这个简单的例子展示了Express.js如何作为数据库之上的抽象层，比如MongoDB。一旦你掌握了MERN (MongoDB，Express，React，Node.js)栈，<em class="ls">并且只有到那时</em>，你才会被接受为一个真正的前端开发者(至少直到下一个，最好的框架，库等等)。出来)。</p></div></div>    
</body>
</html>