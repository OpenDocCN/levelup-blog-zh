<html>
<head>
<title>Hosting a Dedicated Terraria Server on AWS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在AWS上托管专用的Terraria服务器</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/guide-building-a-terraria-server-on-aws-eaebd6d556a5?source=collection_archive---------3-----------------------#2022-04-05">https://levelup.gitconnected.com/guide-building-a-terraria-server-on-aws-eaebd6d556a5?source=collection_archive---------3-----------------------#2022-04-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="fa2b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">了解如何创建和部署您自己的Terraria服务器</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/dfe2c7c6138dc1a67555a0554d85d582.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dZs5Rz8z-5xmGw7SiwOjEg.jpeg"/></div></div></figure><h2 id="b203" class="kx ky iq bd kz la lb dn lc ld le dp lf jy lg lh li kc lj lk ll kg lm ln lo lp bi translated">介绍</h2><p id="1ebc" class="pw-post-body-paragraph jn jo iq jp b jq lq js jt ju lr jw jx jy ls ka kb kc lt ke kf kg lu ki kj kk ij bi translated">我最近迷上了Terraria，像许多其他人一样，这个游戏让我深深地被它的广阔世界所吸引。有这么多的进展内容和在你的想象中构建任何东西的自由，难怪这个游戏如此令人上瘾。</p><p id="2ad1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Terraria本质上是一款多人游戏，和朋友一起玩的最好方式之一就是建立一个专用的托管服务器。虽然有许多第三方服务提供这种服务，但在我们这边稍加努力，我们可以以较低的成本托管一个Terraria服务器。同时学习基本的网络和Linux命令！</p><h2 id="77e2" class="kx ky iq bd kz la lb dn lc ld le dp lf jy lg lh li kc lj lk ll kg lm ln lo lp bi translated">定价</h2><p id="555f" class="pw-post-body-paragraph jn jo iq jp b jq lq js jt ju lr jw jx jy ls ka kb kc lt ke kf kg lu ki kj kk ij bi translated">在本指南中，我们将使用AWS按需EC2实例。我目前正在运行一个t2.small实例，成本为0.023美元/小时。假设我们在一个月的每一天每天工作8小时，这将使账单总计为5.52美元。</p><p id="5979" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">此外，对于按需EC2实例，您只需根据服务器的使用情况来支付费用。如果你在外面生活，负担不起这么多的游戏，账单可能会比这少。</p><p id="7a96" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">注意:价格因地区而异，此价格由美国东部地区决定。你可以点击查看费用<a class="ae lv" href="https://aws.amazon.com/ec2/pricing/on-demand/" rel="noopener ugc nofollow" target="_blank">。</a></p></div><div class="ab cl lw lx hu ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ij ik il im in"><p id="4738" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们开始吧！</p><p id="1456" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">创建AWS账户</strong></p><p id="9301" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先，你必须在这里创建一个AWS账户<a class="ae lv" href="https://aws.amazon.com" rel="noopener ugc nofollow" target="_blank">，并在账单&gt;下设置支付方式。</a></p><h2 id="2bb5" class="kx ky iq bd kz la lb dn lc ld le dp lf jy lg lh li kc lj lk ll kg lm ln lo lp bi translated">创建服务器</h2><ol class=""><li id="a78e" class="md me iq jp b jq lq ju lr jy mf kc mg kg mh kk mi mj mk ml bi translated">在搜索栏中搜索EC2。这应该会将您带到EC2仪表板。在浏览器的右上角选择离您最近的地区。我的设置是新加坡。</li></ol><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mm"><img src="../Images/a1b0d4566acb3cf6b7fb1134d906df76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Acxf_1P1aU1qnb7sCRpmGA.png"/></div></div><figcaption class="mn mo gj gh gi mp mq bd b be z dk translated">EC2仪表板</figcaption></figure><p id="2132" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2.选择密钥对并创建一个RSA和类型的密钥对。pem格式。这创建了一个SSH密钥对，允许我们稍后通过SSH连接到EC2实例。</p><p id="e589" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">创建密钥对将启动私钥的下载。您可以为Terraria创建一个文件夹，并将私钥存储在那里。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mr"><img src="../Images/89c45f7c5a02838824d87cdcf9085396.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K29TkZXbl6EMFg48Bv-14g.png"/></div></div><figcaption class="mn mo gj gh gi mp mq bd b be z dk translated">创建SSH密钥对</figcaption></figure><p id="b257" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">3.现在我们准备创建一个EC2实例。从EC2仪表板中，选择启动实例，然后选择Ubuntu Server 20.04LTS (64位x86)。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ms"><img src="../Images/cde8d6505cbb61baef298d8440f97740.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Pd28aOSbZeKmxMj6yvC6tQ.png"/></div></div></figure><p id="c439" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">4.请随意试验实例大小。然而，我发现t2.small足以和几个朋友一起运行一个大世界。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mt"><img src="../Images/9db3854944a83619e420adcc25525af2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qqfZLeflTx3X2SrprHl_ng.png"/></div></div></figure><p id="2417" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">5.对于存储，我选择了默认的8GB。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mu"><img src="../Images/de7e370cc3d8932c11841ebdf6c94493.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7OAWZ78wW8LaYbk9_BJhcQ.png"/></div></div></figure><p id="1795" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">6.安全组使您能够控制可以到达EC2实例的流量。Terraria服务器运行在端口7777上，因此我们必须将该端口暴露给TCP和UDP连接。</p><p id="5858" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">安全组还能够基于ip限制流量。对于我的设置，我的实例允许来自任何ip地址(0.0.0.0/0)的流量，所以任何人都可以在我的服务器上玩。但是，如果您想要增加安全性，您可以将流量只限制到您的ip。如果您的ip地址是127.0.0.0，只需在所有类型的流量(SSH、UDP和TCP)的源列添加127.0.0.0/32。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mv"><img src="../Images/9bc98be0f3422b9f863baebff11102ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tgy4aHcIENBw3EB7P6BBNw.png"/></div></div></figure><p id="9891" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">7.最后选择启动按钮。当要求选择一个SSH密钥对来与您的EC2实例相关联时，只需选择您之前创建的密钥对，然后单击Launch Instances。您的服务器应该在几分钟内启动！</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/3e542f718d08ac1aadae82bd582d2f04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1252/format:webp/1*5aG5vdOL8putO0n-CVQpNA.png"/></div></figure></div><div class="ab cl lw lx hu ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ij ik il im in"><h2 id="2351" class="kx ky iq bd kz la lb dn lc ld le dp lf jy lg lh li kc lj lk ll kg lm ln lo lp bi translated">下载Terraria</h2><p id="a4df" class="pw-post-body-paragraph jn jo iq jp b jq lq js jt ju lr jw jx jy ls ka kb kc lt ke kf kg lu ki kj kk ij bi translated">现在我们有了一个正在运行的服务器，下一步是下载Terraria服务器和TShock。TShock是一个管理Terraria服务器和社区的工具箱。</p><ol class=""><li id="066c" class="md me iq jp b jq jr ju jv jy mx kc my kg mz kk mi mj mk ml bi translated">创建一个名为Terraria的文件夹。</li></ol><p id="b8b1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2.去Terraria <a class="ae lv" href="https://terraria.org/" rel="noopener ugc nofollow" target="_blank">网站</a>。在页脚，选择PC专用服务器。这应该会触发到一个名为terraria-server-xxxx的zip文件的下载。最后4位数字表示terraria的版本。</p><p id="c046" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">解压缩文件，并将名为Linux的文件夹转移到您的Terraria文件夹中。</p><p id="ef1b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">3.跳到TShock git <a class="ae lv" href="https://github.com/Pryaxis/TShock/releases" rel="noopener ugc nofollow" target="_blank">仓库</a>并下载一个与步骤2中的Terraria服务器版本相对应的版本。我的terraria版本是1.4.3.6，所以下载了<a class="ae lv" href="https://github.com/Pryaxis/TShock/releases/download/v4.5.17/TShock4.5.17_Terraria_1.4.3.6.zip" rel="noopener ugc nofollow" target="_blank">t shock 4 . 5 . 17 _ Terraria _ 1 . 4 . 3 . 6 . zip</a>。</p><p id="f8b6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">解压缩文件，并将所有内容放入Terraria文件夹。</p><h2 id="ba24" class="kx ky iq bd kz la lb dn lc ld le dp lf jy lg lh li kc lj lk ll kg lm ln lo lp bi translated">在服务器上安装Terraria</h2><p id="69fb" class="pw-post-body-paragraph jn jo iq jp b jq lq js jt ju lr jw jx jy ls ka kb kc lt ke kf kg lu ki kj kk ij bi translated">注意:我们必须在这里运行linux命令。如果您使用的是Windows PC，您可以使用本<a class="ae lv" href="https://www.windowscentral.com/how-install-wsl2-windows-10" rel="noopener ugc nofollow" target="_blank">指南</a>使用Windows子系统for linux (WSL)运行Linux命令。</p><ol class=""><li id="1233" class="md me iq jp b jq jr ju jv jy mx kc my kg mz kk mi mj mk ml bi translated">首先，我们必须连接到我们之前构建的EC2实例。在操控板上选择实例，然后单击连接。AWS将提供连接到您的服务器实例的命令列表。</li></ol><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi na"><img src="../Images/14b55ac32573603db9d849e7e3187911.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3utzkKV4NgGQ8_d0hrJ4Iw.png"/></div></div></figure><p id="8e13" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2.确保您的Terraria文件夹中有SSH私钥。打开终端，进入你的Terraria文件夹，运行提供的命令。这里的ip地址是指ec2实例的公共地址(ipv4 DNS)。</p><pre class="km kn ko kp gt nb nc nd ne aw nf bi"><span id="2ba9" class="kx ky iq nc b gy ng nh l ni nj"># Terminal 1</span><span id="67ae" class="kx ky iq nc b gy nk nh l ni nj">cd ~/Desktop/Terraria</span><span id="810e" class="kx ky iq nc b gy nk nh l ni nj"># give read access only<br/>chmod 400 Terraria\ Key.pem</span><span id="7c12" class="kx ky iq nc b gy nk nh l ni nj"># connect to server via SSH<br/>ssh -i "Terraria Key.pem" ubuntu@&lt;public address&gt;</span></pre><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nl"><img src="../Images/e7db9eb204f325dd2186d8e11a08dd6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*waZsLkSTpr6XV4szwrvSyQ.png"/></div></div></figure><p id="4b75" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">3.在终端上创建一个新的选项卡，并运行下面的Linux命令。这会将您的Terraria文件从本地计算机传输到远程EC2实例。</p><pre class="km kn ko kp gt nb nc nd ne aw nf bi"><span id="4a46" class="kx ky iq nc b gy ng nh l ni nj"># Terminal 2</span><span id="6526" class="kx ky iq nc b gy nk nh l ni nj"># copy files over to the EC2 instance<br/># use the same public address from step 2<br/>scp -r ~/Desktop/Terraria ubuntu<a class="ae lv" href="mailto:ubuntu@ec2-18-141-161-114.ap-southeast-1.compute.amazonaws.com" rel="noopener ugc nofollow" target="_blank">@</a>&lt;public address&gt;:~/</span></pre><p id="e24f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">4.在终端1中，运行命令<code class="fe nm nn no nc b">ls</code>。您应该在根目录中看到文件Terraria。</p><p id="7938" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">5.接下来，你必须在ubuntu上安装Mono包。这篇<a class="ae lv" href="https://linuxize.com/post/how-to-install-mono-on-ubuntu-20-04/" rel="noopener ugc nofollow" target="_blank">文章</a>详细解释了如何在终端上这样做。</p><p id="dfec" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">6.您终于可以运行Terraria服务器了。转到TShock文件夹并启动服务器！</p><pre class="km kn ko kp gt nb nc nd ne aw nf bi"><span id="a2aa" class="kx ky iq nc b gy ng nh l ni nj"># Terminal 1</span><span id="a4e4" class="kx ky iq nc b gy nk nh l ni nj">cd ~/Terraria/TShock4.5.17_Terraria_1.4.3.6</span><span id="4be7" class="kx ky iq nc b gy nk nh l ni nj">#Start up your server!<br/>sudo mono TerrariaServer.exe</span></pre><h2 id="ea6e" class="kx ky iq bd kz la lb dn lc ld le dp lf jy lg lh li kc lj lk ll kg lm ln lo lp bi translated">从远程服务器播放Terraria</h2><p id="6447" class="pw-post-body-paragraph jn jo iq jp b jq lq js jt ju lr jw jx jy ls ka kb kc lt ke kf kg lu ki kj kk ij bi translated">在你的Terraria游戏中，选择多人游戏&gt;通过IP加入。插入EC2实例的外部IP地址，现在您已经准备好探索广阔的Terraria了！</p><h2 id="db9f" class="kx ky iq bd kz la lb dn lc ld le dp lf jy lg lh li kc lj lk ll kg lm ln lo lp bi translated">结论</h2><p id="a1bd" class="pw-post-body-paragraph jn jo iq jp b jq lq js jt ju lr jw jx jy ls ka kb kc lt ke kf kg lu ki kj kk ij bi translated">对于那些以前没有AWS或网络经验的人来说，实现一个服务器可能是令人生畏的。希望这个指南已经帮助你托管了一个Terraria服务器，这样你就可以和你的朋友们一起探索洞穴和对抗粘液或僵尸了！</p></div></div>    
</body>
</html>