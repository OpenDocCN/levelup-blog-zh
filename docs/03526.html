<html>
<head>
<title>Semantic versioning with git flow and the marvelous way to go there</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">git流的语义版本控制以及实现这一点的绝妙方法</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/semantic-versioning-with-git-flow-and-the-marvelous-way-to-go-there-b9f97b90455c?source=collection_archive---------1-----------------------#2020-05-14">https://levelup.gitconnected.com/semantic-versioning-with-git-flow-and-the-marvelous-way-to-go-there-b9f97b90455c?source=collection_archive---------1-----------------------#2020-05-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/288c0fd5447248c6179d19799309d878.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*jdhfSlMBiQ_u4WBD"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">照片由<a class="ae kc" href="https://unsplash.com/@yancymin?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">扬西·敏</a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><h1 id="a163" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">语义版本化？我的天啊。</h1><p id="cc68" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">到底什么是<a class="ae kc" href="https://semver.org/" rel="noopener ugc nofollow" target="_blank">语义版本化</a>？语义版本化(也称为<strong class="ld ir"> SemVer </strong>)是开发/发布软件时使用的版本化系统。语义版本化提供了一种版本化软件开发项目的通用方式，这是跟踪软件进展的最佳方式，因为新的插件、附件、库和扩展几乎每天都在构建。</p><p id="e49c" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">给定一个版本号<code class="fe me mf mg mh b">Major.Minor.Patch</code>，增加:</p><ol class=""><li id="39c2" class="mi mj iq ld b le lz li ma lm mk lq ml lu mm ly mn mo mp mq bi translated"><code class="fe me mf mg mh b">Major</code>版本当你做出不兼容的API修改时，</li><li id="9e1f" class="mi mj iq ld b le mr li ms lm mt lq mu lu mv ly mn mo mp mq bi translated"><code class="fe me mf mg mh b">Minor</code>以向后兼容的方式添加功能时的版本，以及</li><li id="0e92" class="mi mj iq ld b le mr li ms lm mt lq mu lu mv ly mn mo mp mq bi translated"><code class="fe me mf mg mh b">Patch</code>版本当你做向后兼容的bug修复。</li></ol><p id="ec6f" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">预发布和构建元数据的附加标签是对<code class="fe me mf mg mh b">Major.Minor.Patch</code>格式的扩展。</p><figure class="mx my mz na gt jr gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/8172fcadf6ffe80a1c26dd91f2462723.png" data-original-src="https://miro.medium.com/v2/resize:fit:1048/format:webp/1*uVfJoHuFKGkAT0PX0nperQ.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">SemVer 2.0.0</figcaption></figure><p id="b678" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">当您使用语义版本化时，有多条规则需要遵循，您可以在此处阅读<a class="ae kc" href="https://semver.org/#semantic-versioning-specification-semver" rel="noopener ugc nofollow" target="_blank"/>，但是我们将为您总结其中的一些规则:</p><ul class=""><li id="dad5" class="mi mj iq ld b le lz li ma lm mk lq ml lu mm ly nb mo mp mq bi translated">永远不要对版本使用负数(咄！)</li><li id="44a8" class="mi mj iq ld b le mr li ms lm mt lq mu lu mv ly nb mo mp mq bi translated">不要改变已发布版本的内容。不要懒惰，发布一个新的。</li><li id="f3a3" class="mi mj iq ld b le mr li ms lm mt lq mu lu mv ly nb mo mp mq bi translated">当主版本为零时，我们认为软件处于开发阶段，公共API不稳定。所以从零开始主要版本，但最终发布<code class="fe me mf mg mh b">1.0.0</code>版本。</li><li id="2aca" class="mi mj iq ld b le mr li ms lm mt lq mu lu mv ly nb mo mp mq bi translated">补丁版本包括错误修复，不要将它们用于新功能。</li><li id="6861" class="mi mj iq ld b le mr li ms lm mt lq mu lu mv ly nb mo mp mq bi translated">如果发布了新的主要版本，次要版本和补丁版本必须重置为零。</li><li id="e65b" class="mi mj iq ld b le mr li ms lm mt lq mu lu mv ly nb mo mp mq bi translated">如果发布了新的次要版本，修补程序版本必须重置为零</li><li id="0f6e" class="mi mj iq ld b le mr li ms lm mt lq mu lu mv ly nb mo mp mq bi translated">预发行版可以用一个连字符和一系列紧跟在补丁版本后面的点分隔标识符来表示。例如<code class="fe me mf mg mh b">1.0.0-alpha.1</code>或<code class="fe me mf mg mh b">1.5.3-rc.7</code></li></ul><h1 id="8ad6" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">Git流</h1><p id="4824" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">由<a class="ae kc" href="https://nvie.com/about/" rel="noopener ugc nofollow" target="_blank"> Vincent Driessen </a>发布的<a class="ae kc" href="https://nvie.com/posts/a-successful-git-branching-model/" rel="noopener ugc nofollow" target="_blank"> GitFlow Workflow </a>是一个分支模型，允许多个流之间有严格的边界。核心原则相当简单和直观。</p><p id="2591" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">Git Flow是永远友好的，这意味着它允许开发人员为每个特性、补丁、版本或修补程序创建分支。</p><figure class="mx my mz na gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nc"><img src="../Images/fde7c8aeff0cb55a9c79478f78316fa1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8-zDz1s5Atux_yNW_mXmfg@2x.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">来自<a class="ae kc" href="https://nvie.com/posts/a-successful-git-branching-model/" rel="noopener ugc nofollow" target="_blank">一个成功的Git分支模型</a></figcaption></figure><p id="94d9" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">所以我们来谈谈Git流中的分支。</p><ul class=""><li id="578f" class="mi mj iq ld b le lz li ma lm mk lq ml lu mm ly nb mo mp mq bi translated"><code class="fe me mf mg mh b">develop</code>是最新的不稳定版本</li><li id="2909" class="mi mj iq ld b le mr li ms lm mt lq mu lu mv ly nb mo mp mq bi translated"><code class="fe me mf mg mh b">master</code>是最新的稳定版本</li><li id="d731" class="mi mj iq ld b le mr li ms lm mt lq mu lu mv ly nb mo mp mq bi translated"><code class="fe me mf mg mh b">tag</code>是版本的快照</li><li id="649c" class="mi mj iq ld b le mr li ms lm mt lq mu lu mv ly nb mo mp mq bi translated"><code class="fe me mf mg mh b">hotfix</code>是临时分支，用来修复版本上的某些东西</li><li id="542a" class="mi mj iq ld b le mr li ms lm mt lq mu lu mv ly nb mo mp mq bi translated"><code class="fe me mf mg mh b">release</code>是临时分部准备的新版本</li><li id="6afa" class="mi mj iq ld b le mr li ms lm mt lq mu lu mv ly nb mo mp mq bi translated"><code class="fe me mf mg mh b">feature</code>是开发新功能的临时分支</li></ul><p id="21f0" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated"><code class="fe me mf mg mh b">master</code>和<code class="fe me mf mg mh b">develop</code>分支在Git流中是不朽的，应该永生。<code class="fe me mf mg mh b">master</code>分支包含最新的稳定版本和它的官方历史。<code class="fe me mf mg mh b">develop</code>分支包含最新的不稳定版本。除了<code class="fe me mf mg mh b">hotfix</code>以外的所有临时分支都必须合并到<code class="fe me mf mg mh b">develop</code>中。这意味着我们从<code class="fe me mf mg mh b">develop</code>创建<code class="fe me mf mg mh b">release</code>分支，并将它们合并回<code class="fe me mf mg mh b">develop</code>和<code class="fe me mf mg mh b">master</code>。版本标签必须合并到<code class="fe me mf mg mh b">master</code>分支中。</p><p id="daa2" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">从现在开始我们假设你对<code class="fe me mf mg mh b">git</code>本身和<a class="ae kc" href="https://github.com/nvie/gitflow/wiki/Installation" rel="noopener ugc nofollow" target="_blank">安装的</a> <code class="fe me mf mg mh b">gitflow</code>扩展有一点了解。</p><figure class="mx my mz na gt jr gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/4d5158f65bb1e6b1d8a4f7c0a01c98dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1240/format:webp/1*Fir6912RpKl8ix0oAUbIfQ.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">来自<a class="ae kc" href="https://danielkummer.github.io/git-flow-cheatsheet/" rel="noopener ugc nofollow" target="_blank"> git-flow cheatsheet </a></figcaption></figure><h2 id="91cb" class="ne ke iq bd kf nf ng dn kj nh ni dp kn lm nj nk kr lq nl nm kv lu nn no kz np bi translated">生存的特征，失去的分支</h2><p id="9894" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">一个新特性是项目中的一个新故事:</p><blockquote class="nq nr ns"><p id="2679" class="lb lc nt ld b le lz lg lh li ma lk ll nu mb lo lp nv mc ls lt nw md lw lx ly ij bi translated">作为某人[我想要某样东西]</p></blockquote><p id="68c3" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">特性为项目添加了新的功能。在Git流程中，我们为每个特性从<code class="fe me mf mg mh b">develop</code>分支创建一个新的<code class="fe me mf mg mh b">feature</code>分支，实现并测试它，将其合并到develop中，然后在最后移除<code class="fe me mf mg mh b">feature</code>分支。</p><pre class="mx my mz na gt nx mh ny nz aw oa bi"><span id="afe9" class="ne ke iq mh b gy ob oc l od oe">git checkout develop<br/>git pull origin develop<br/>git flow feature start featureName</span></pre><p id="bb28" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">这将从<code class="fe me mf mg mh b">develop</code>创建一个名为<code class="fe me mf mg mh b">feature/featureName</code>的新分支。如果其他人也在使用，您可以将功能发布到遥控器或从遥控器中提取功能:</p><pre class="mx my mz na gt nx mh ny nz aw oa bi"><span id="195b" class="ne ke iq mh b gy ob oc l od oe">git flow feature publish featureName<br/>git flow feature pull featureName</span></pre><p id="c48b" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">最后，特征分支消失了，特征存在于<code class="fe me mf mg mh b">develop</code>中。该命令将特征分支合并到<code class="fe me mf mg mh b">develop</code>中，并本地和远程删除。</p><pre class="mx my mz na gt nx mh ny nz aw oa bi"><span id="d924" class="ne ke iq mh b gy ob oc l od oe">git flow feature finish featureName</span></pre><h2 id="5206" class="ne ke iq bd kf nf ng dn kj nh ni dp kn lm nj nk kr lq nl nm kv lu nn no kz np bi translated">这不是虫，这是…等等，是一只虫子</h2><p id="7ab2" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">Bug分支也是活的临时的。Git Flow以<code class="fe me mf mg mh b">bugfix/bugfixName</code>的名字从<code class="fe me mf mg mh b">develop</code>创建bug分支。</p><pre class="mx my mz na gt nx mh ny nz aw oa bi"><span id="3bab" class="ne ke iq mh b gy ob oc l od oe">git checkout develop<br/>git pull origin develop<br/>git flow bugfix start bugName</span></pre><p id="48a4" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">其他Git流命令也适用于bug修复(发布、拉取、完成)。</p><h2 id="56c4" class="ne ke iq bd kf nf ng dn kj nh ni dp kn lm nj nk kr lq nl nm kv lu nn no kz np bi translated">master上的一个关键bug？</h2><p id="daf6" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">稳定版本报告的错误创建了一个次要版本。要创建这种类型的错误修复，必须创建热修复。热修复程序使用<code class="fe me mf mg mh b">master</code>分支作为起点，并合并回其中</p><pre class="mx my mz na gt nx mh ny nz aw oa bi"><span id="f6d9" class="ne ke iq mh b gy ob oc l od oe">git checkout master<br/>git pull origin master<br/>git flow hotfix start hotfixName</span></pre><p id="fe2f" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">其他Git流命令也适用于热修复(发布、拉取、完成)。</p><h2 id="2a7a" class="ne ke iq bd kf nf ng dn kj nh ni dp kn lm nj nk kr lq nl nm kv lu nn no kz np bi translated">安全了吗？释放它…</h2><p id="ac0d" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">发布基于<code class="fe me mf mg mh b">develop</code>的新版本，Git flow允许你创建<code class="fe me mf mg mh b">release</code>分支。<code class="fe me mf mg mh b">release</code>brands包含来自<code class="fe me mf mg mh b">develop</code>的最新代码，并在最后在git中创建新的标签(版本)。</p><pre class="mx my mz na gt nx mh ny nz aw oa bi"><span id="e60e" class="ne ke iq mh b gy ob oc l od oe">git checkout develop<br/>git pull origin develop<br/>git flow release start 1.0.8</span></pre><p id="dd89" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">这将创建一个名为<code class="fe me mf mg mh b">release/1.0.8</code>的新分支，如果你完成它，一个新标签(1.0.8)将被合并到<code class="fe me mf mg mh b">master</code>中。</p><h1 id="143a" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">什么是被改变的人类？</h1><p id="205d" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">更改日志是一个文件，它包含一个按时间顺序排列的列表，列出了项目每个版本的显著更改。更改日志是为人类准备的，人类不理解git日志，所以不要让任何人将他们的git日志转储到<code class="fe me mf mg mh b">CHANGELOG.md</code>。</p><p id="89ee" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">以下是基于<a class="ae kc" href="https://keepachangelog.com/en/1.0.0/" rel="noopener ugc nofollow" target="_blank">创建<code class="fe me mf mg mh b">CHANGELOG.md</code>的一些注意事项</a></p><ul class=""><li id="aa52" class="mi mj iq ld b le lz li ma lm mk lq ml lu mm ly nb mo mp mq bi translated">每个版本都应该有一个条目。</li><li id="d98f" class="mi mj iq ld b le mr li ms lm mt lq mu lu mv ly nb mo mp mq bi translated">相同类型的变更应分组:</li></ul><ol class=""><li id="ef36" class="mi mj iq ld b le lz li ma lm mk lq ml lu mm ly mn mo mp mq bi translated"><code class="fe me mf mg mh b">Added</code>为新增功能。</li><li id="794d" class="mi mj iq ld b le mr li ms lm mt lq mu lu mv ly mn mo mp mq bi translated"><code class="fe me mf mg mh b">Changed</code>针对现有功能的变更。</li><li id="1a12" class="mi mj iq ld b le mr li ms lm mt lq mu lu mv ly mn mo mp mq bi translated"><code class="fe me mf mg mh b">Deprecated</code>针对即将删除的功能。</li><li id="1300" class="mi mj iq ld b le mr li ms lm mt lq mu lu mv ly mn mo mp mq bi translated"><code class="fe me mf mg mh b">Removed</code>为现已移除的特征。</li><li id="784c" class="mi mj iq ld b le mr li ms lm mt lq mu lu mv ly mn mo mp mq bi translated"><code class="fe me mf mg mh b">Fixed</code>任何bug修复。</li><li id="8a3c" class="mi mj iq ld b le mr li ms lm mt lq mu lu mv ly mn mo mp mq bi translated"><code class="fe me mf mg mh b">Security</code>以防漏洞。</li></ol><ul class=""><li id="0e2d" class="mi mj iq ld b le lz li ma lm mk lq ml lu mm ly nb mo mp mq bi translated">版本和节应该是可链接的。</li><li id="bbc8" class="mi mj iq ld b le mr li ms lm mt lq mu lu mv ly nb mo mp mq bi translated">最新版本优先。</li><li id="2b33" class="mi mj iq ld b le mr li ms lm mt lq mu lu mv ly nb mo mp mq bi translated">显示每个版本的发布日期。</li></ul><h1 id="a5ef" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">结论</h1><p id="b8bf" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">将语义版本控制与Git flow结合使用，使得维护软件项目变得容易。记住，你也可以在你的项目中添加一个可读的变更日志，来跟踪在这个不可思议的开发过程中已经完成了什么。</p></div></div>    
</body>
</html>