<html>
<head>
<title>From ‘hi’ to $2y$10$TmNKr… What Happened to Your Password?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从“嗨”到$2y$10$TmNKr…你的密码怎么了？</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/from-hi-to-2y-10-tmnkr-what-happened-to-your-password-f70c869183c4?source=collection_archive---------12-----------------------#2020-08-03">https://levelup.gitconnected.com/from-hi-to-2y-10-tmnkr-what-happened-to-your-password-f70c869183c4?source=collection_archive---------12-----------------------#2020-08-03</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><figure class="is it gp gr iu iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi ir"><img src="../Images/cf1c7baab6b9f800c57861d32375e497.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2g1w5EUXuj4iZB8X"/></div></div></figure><div class=""/><div class=""><h2 id="4585" class="pw-subtitle-paragraph kb jd je bd b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks dk translated">密码保护的幕后</h2></div><p id="3eba" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">假设我决定注册一个账户，一个非常不安全的密码，“T0”。这是如何变成这样存储在数据库中的:</p><p id="a75e" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated"><code class="fe lp lq lr ls b">$2y$10$TmNKrCzcsgVeIS/DOdQ6JeyhZUePie/yaiBQHMrN0tk4THZhgHyW6</code></p><p id="ceca" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">密码是携带你的钱包、个人信息和在线历史的字符序列。不仅从用户的角度，而且从网站的角度来看，这些都非常需要安全，以便符合法律并确保用户的信任。</p><figure class="lu lv lw lx gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi lt"><img src="../Images/2e8cd180ee484b90944b11458647863c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hjzKFm2uGJ-OlDuwCbd0sQ.png"/></div></div></figure><p id="7518" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">出于多种原因，将用户密码直接存储在数据库中是很危险的。最明显的是，如果其他人获得了数据库的访问权限，他们将能够看到每个人的密码。许多网站还使用cookies，即存储在您浏览器中的数据，即使您离开网站，这些数据仍然存在，以帮助您在下次访问网站时自动登录。将原始文本密码保留在cookie中会使下一个计算机用户以及可以读取跨站点cookie的站点和程序可以访问该密码。</p><p id="b886" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">哈希用于将字符串转换为该字符串的另一种表示形式。哈希函数的目的是创建密码的编码版本，以便:</p><ul class=""><li id="9705" class="ly lz je kv b kw kx kz la lc ma lg mb lk mc lo md me mf mg bi translated">从密码到编码很容易(<code class="fe lp lq lr ls b">hi_there</code>到<code class="fe lp lq lr ls b">sjiu3s9*@slajsk</code>)。</li><li id="453e" class="ly lz je kv b kw mh kz mi lc mj lg mk lk ml lo md me mf mg bi translated">从编码到密码(解码)是不可能的(或者，至少，非常非常不容易)(<code class="fe lp lq lr ls b">sjiu3s9*@slajsk</code>到<code class="fe lp lq lr ls b">hi_there</code>)。</li></ul><p id="9ffa" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">因此，即使黑客访问了我们的数据库，他们也无法将<code class="fe lp lq lr ls b">sjiu3s9*@slajsk</code>转换成真正输入的密码<code class="fe lp lq lr ls b">hi_there</code>。然而，散列是一个困难的想法，因为信息必须只能单向流动。</p><p id="7dd6" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">这类似于在五页文本中表示所有的<em class="mm">奥德赛</em>:转换是单向的，因为不可能从五页摘要中重建<em class="mm">奥德赛</em>。因此，散列的一个固有部分是丢弃信息。由于这一事实，有时非常不同的输入字符串将具有相同的散列，因为丢弃的信息导致相同的处理字符串，但是通过设计，这种可能性导致一些实际安全威胁的机会是可以忽略的。</p><p id="4629" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">虽然有许多散列函数，但通常它们遵循三步设计。首先，密码被分解成几个部分，然后传递给一个压缩函数。这个压缩函数就是挤出一些信息，压缩成分的部分。最后，压缩的输出被编码(表示)为一长串字符，可以包含数字、字母和符号。</p><figure class="lu lv lw lx gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mn"><img src="../Images/ed1dd2109ba6fd03399ccf7916cf5115.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9KQ39BGcAMeAvAmKRqqa1Q.png"/></div></div></figure><p id="1084" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">通过信息的受控丢失(可以通过舍入或取模等运算以数学方式表示)，哈希创建了一个单向函数来保护密码。哈希算法的设计使得即使输入中很小的变化也会极大地影响最终结果(“fox123”的哈希与“fox122”的哈希完全不同)。</p><p id="78ab" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">然后，我们不是将原始密码存储在数据库中，而是存储它的散列。下一次用户登录时，我们用同样的算法对他们的输入进行散列，看看散列是否匹配。由于散列对于相同的输入总是产生相同的结果，所以我们可以确信密码是相同的，而不会以公开的、易受攻击的格式存储密码。</p><p id="075e" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">散列法极大地提高了数据库的安全性，但是它仍然容易受到黑客经典的“试一试”策略的攻击。虽然哈希使得直接访问原始文本密码变得不可能，但只要我们知道使用的是哪种哈希算法——没有什么是一个相当优秀的黑客不能访问的——我们就可以尝试数百万个输入并存储它们的哈希，然后看看是否有任何哈希与记录的哈希匹配。这就是搭建彩虹桌的做法。</p><figure class="lu lv lw lx gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mo"><img src="../Images/28124ff6171931d5b727f5412a67ddda.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M8cCHhDAoCv6u5ys2qe4Nw.png"/></div></div><figcaption class="mp mq gj gh gi mr ms bd b be z dk translated">彩虹桌的构造。</figcaption></figure><p id="4de8" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">虽然这看起来太过手动，但不幸的是，人们并不像你希望的那样善于创建密码，而且许多账户的密码都是一样的。然后，能够访问数据库的黑客可能会发现一个与彩虹表中记录的散列相似的散列:</p><figure class="lu lv lw lx gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mt"><img src="../Images/9d3feb8ad22f13e7e4db747ab6c53aad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*spMYt1Ubq2awpRbvi0ArSQ.png"/></div></div></figure><p id="6f36" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">注意到id 4与id 6具有相同的散列，并且记录的散列与彩虹表中输入“hi”的散列相同，黑客现在可以访问两个帐户，因为他们知道他们的密码是“hi”。尽管这种方法看起来太费力且效率低下，但许多黑客仍在不断构建彩虹表:</p><ul class=""><li id="5b8c" class="ly lz je kv b kw kx kz la lc ma lg mb lk mc lo md me mf mg bi translated">有效的彩虹表考虑了密码是真实密码的可能性。例如，“si*S&amp;3ljksna”可能不是一个用过的密码，不值得检查，但“my_Doggo_3_2020”是。</li><li id="eeda" class="ly lz je kv b kw mh kz mi lc mj lg mk lk ml lo md me mf mg bi translated">仅一台标准计算机每秒就可以检查近60万个密码的散列。GPU或3D卡的执行速度可以达到这个速度的三倍，更不用说一些黑客操作的专门系统了。</li><li id="4154" class="ly lz je kv b kw mh kz mi lc mj lg mk lk ml lo md me mf mg bi translated">重申上面的观点:人们不擅长生成唯一的密码。' 123456 '仍被2300万账户持有人用作密码，无疑还有许多其他常用密码。59%的人在任何地方都使用相同的密码<em class="mm"/>，这意味着如果彩虹表成功登陆一个帐户，黑客就有很大机会成功登录你在不同网站的另一个帐户。</li></ul><p id="d6ec" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">一个设计良好的连续几个月不间断生成的彩虹表生成器会有一个庞大的字典，其中几乎保证有很大一部分账户是匹配的。</p><p id="dc7f" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">为了解决这个问题，我们对哈希进行加盐处理。(饿了没？)</p><p id="e406" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">Salting是一个绝妙的主意——它是在散列之前在密码末尾添加一个长字符串。每当创建某人的帐户时，都会生成一个salt，存储的密码是密码和salt的散列。例如，如果密码是“hi”并且随机生成的盐是“3s8S72l3”，则存储的散列将不是“hi”的散列，而是“hi3s8S72l3”的散列。salt和hash都被存储，以便当用户登录时，salt被附加到他们的密码中，并且hash被匹配。</p><figure class="lu lv lw lx gt iv gh gi paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="gh gi mu"><img src="../Images/6614e5fcff32d192690b96139e6ea1a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kgG_YVphCCOB0Foy7llPrA.png"/></div></div></figure><p id="456f" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">有了足够长的盐，腌制杂烩可以打败彩虹表。彩虹表是通过记住“常用密码”的概念构建的，如名称、形容词、名词和数字序列(如日期或圆周率的数字)，因为不可能在合理的时间内搜索所有可能的字符组合密码。</p><p id="b016" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">可以认为盐会增加密码的复杂性。具有15个字符salt的5个字符的密码将变成具有20个字符复杂性的密码，并大大降低彩虹表包含该散列的可能性。所以，从技术上来说，如果你用“嗨”这个密码注册了一个使用大量盐的网站，你是安全的。</p><p id="86f1" class="pw-post-body-paragraph kt ku je kv b kw kx kf ky kz la ki lb lc ld le lf lg lh li lj lk ll lm ln lo im bi translated">也就是说，大多数网站不会花费太多资源进行大量salting，因为它们会变得很长(salts有时也可以是其他数据的函数，如您的用户名或注册时间，以避免存储它所需的空间)，因此为了安全起见，最好遵循良好的密码指南。</p><h2 id="d9c6" class="mv mw je bd mx my mz dn na nb nc dp nd lc ne nf ng lg nh ni nj lk nk nl nm nn bi translated">要点</h2><ul class=""><li id="49be" class="ly lz je kv b kw no kz np lc nq lg nr lk ns lo md me mf mg bi translated">哈希用于将密码转换为编码形式。哈希不能被解码，这意味着即使你有一个哈希，你也无法访问原始密码。</li><li id="0d0f" class="ly lz je kv b kw mh kz mi lc mj lg mk lk ml lo md me mf mg bi translated">为了确保单向信息流，散列利用了受控形式的信息丢失。</li><li id="638b" class="ly lz je kv b kw mh kz mi lc mj lg mk lk ml lo md me mf mg bi translated">彩虹表是由黑客创建的，用来记录输入和它们的哈希值，这些哈希值可以与记录的哈希值进行匹配，以找到原始密码。这种方法对于一个有效且冗长的彩虹表来说是非常有效的。</li><li id="2ed1" class="ly lz je kv b kw mh kz mi lc mj lg mk lk ml lo md me mf mg bi translated">Salting通过在哈希之前将盐或随机生成的长字符串附加到密码的末尾来抵御彩虹表。这创建了一个完全不同的散列，增加了密码的复杂性，并使彩虹表攻击在计算上更不可行。</li></ul><div class="is it gp gr iu nt"><a href="https://towardsdatascience.com/common-misconceptions-about-big-o-algorithmic-complexity-4a7601395038" rel="noopener follow" target="_blank"><div class="nu ab fo"><div class="nv ab nw cl cj nx"><h2 class="bd jf gy z fp ny fr fs nz fu fw jd bi translated">关于大O和算法复杂性的常见误解</h2><div class="oa l"><h3 class="bd b gy z fp ny fr fs nz fu fw dk translated">你是不是用错了Big-O？</h3></div><div class="ob l"><p class="bd b dl z fp ny fr fs nz fu fw dk translated">towardsdatascience.com</p></div></div><div class="oc l"><div class="od l oe of og oc oh ja nt"/></div></div></a></div><div class="is it gp gr iu nt"><a href="https://towardsdatascience.com/five-essential-advanced-concepts-in-object-oriented-programming-explained-intuitively-b7faefe04491" rel="noopener follow" target="_blank"><div class="nu ab fo"><div class="nv ab nw cl cj nx"><h2 class="bd jf gy z fp ny fr fs nz fu fw jd bi translated">面向对象编程中五个重要的高级概念，直观地解释</h2><div class="oa l"><h3 class="bd b gy z fp ny fr fs nz fu fw dk translated">从封装到抽象</h3></div><div class="ob l"><p class="bd b dl z fp ny fr fs nz fu fw dk translated">towardsdatascience.com</p></div></div><div class="oc l"><div class="oi l oe of og oc oh ja nt"/></div></div></a></div></div></div>    
</body>
</html>