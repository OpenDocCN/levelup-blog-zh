<html>
<head>
<title>Using Puppeteer on Netlify</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在网络上使用木偶师</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/using-puppeteer-on-netlify-e2d3801893c2?source=collection_archive---------5-----------------------#2020-07-26">https://levelup.gitconnected.com/using-puppeteer-on-netlify-e2d3801893c2?source=collection_archive---------5-----------------------#2020-07-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/b30e8161828f475f6a10c1bda3f48363.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gp-0nobJYjbjES6ev78DRA.png"/></div></div></figure><p id="e049" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">不久前，一个熟人在Twitter上推出了丹麦版的“每周一词”。她每周都会在推特上发布一个她认为用得不够多的词。它可能是一个真实的单词或一些古老的俚语。我觉得很好笑，心想“为什么没有一个网站把他们列出来”。长话短说，我开始着手于此，https://ugensord.dk 诞生了(我首先得到了她的许可！).</p><p id="6244" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这个网站非常简单。它使用Unsplash来显示背景，然后在中间显示一个简单的黑框，其中包含一个单词及其含义，有时还会有一段引文。自动生成twitter图片基本上是完美的。</p><p id="4cee" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">正如标题所言，整个事情都托管在Netlify上，作为我的构建项目的一部分，我使用Puppeteer来截取一个渲染模板的截图。</p><p id="8225" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让木偶师在Netlify上工作是一件相当麻烦的事情，直到我偶然发现了一个名为<code class="fe kx ky kz la b">chrome-aws-lambda</code>的库，它展示了一些获得<code class="fe kx ky kz la b">executeablePath</code>等的承诺。</p><p id="26cc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">注意:根据您的环境，添加<code class="fe kx ky kz la b">puppeteer-core</code>或<code class="fe kx ky kz la b">puppeteer</code>作为依赖项是很重要的。我使用Docker与<code class="fe kx ky kz la b">node:14-alpine</code>和安装<code class="fe kx ky kz la b">chromium</code>通过APK。</p><p id="ac9f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">代码相当简单。它使用<code class="fe kx ky kz la b">chrome-aws-lambda</code>来访问<code class="fe kx ky kz la b">puppeteer</code>，而不是直接要求那个包。</p><figure class="lb lc ld le gt jr"><div class="bz fp l di"><div class="lf lg l"/></div></figure><p id="3827" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">注意:我将<code class="fe kx ky kz la b">headless</code>强制设为<code class="fe kx ky kz la b">true</code>，这样我就不需要设置<code class="fe kx ky kz la b">AWS_LAMBDA_FUNCTION_NAME</code>并欺骗包进入无头状态。</p><p id="fecd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">奖励:这是我在这个项目中使用的<code class="fe kx ky kz la b">Dockerfile</code>。</p><figure class="lb lc ld le gt jr"><div class="bz fp l di"><div class="lf lg l"/></div></figure></div></div>    
</body>
</html>