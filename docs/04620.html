<html>
<head>
<title>Singleton Pattern in Swift</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Swift中的单例模式</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/singleton-pattern-in-swift-5a135873715c?source=collection_archive---------5-----------------------#2020-07-06">https://levelup.gitconnected.com/singleton-pattern-in-swift-5a135873715c?source=collection_archive---------5-----------------------#2020-07-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/67c4c93c87b557084b1c2675979ac335.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yjwVM8gO0TOgTyykI4AFVQ.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">图片由来自<a class="ae kc" href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=865297" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>的<a class="ae kc" href="https://pixabay.com/photos/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=865297" rel="noopener ugc nofollow" target="_blank">自由照片</a>提供</figcaption></figure><p id="7db6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Singleton是一种创造性的设计模式。这是一种常用的设计模式，很容易在项目中实现。简而言之，我们可以将singleton定义为——singleton模式允许一个类只有一个实例，这个类的每个引用都指向同一个实例。</p><h2 id="b0ac" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated"><strong class="ak">实施</strong></h2><figure class="lu lv lw lx gt jr"><div class="bz fp l di"><div class="ly lz l"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">单例类的实现</figcaption></figure><ol class=""><li id="fb3d" class="ma mb iq kf b kg kh kk kl ko mc ks md kw me la mf mg mh mi bi translated"><code class="fe mj mk ml mm b">static let shared = SingletonClass()</code> —您在这里创建了一个静态let属性，它将负责singleton实例。</li><li id="7d73" class="ma mb iq kf b kg mn kk mo ko mp ks mq kw mr la mf mg mh mi bi translated"><code class="fe mj mk ml mm b">private init() { }</code> —您在此定义初始化器访问级别，这将阻止创建其他实例。</li><li id="c30f" class="ma mb iq kf b kg mn kk mo ko mp ks mq kw mr la mf mg mh mi bi translated"><code class="fe mj mk ml mm b">func someMethod() </code> —你正在创造一种方法来完成某项任务。</li><li id="4c09" class="ma mb iq kf b kg mn kk mo ko mp ks mq kw mr la mf mg mh mi bi translated"><code class="fe mj mk ml mm b">let singleton = SingletonClass.shared </code> —您将获得该类的单例实例。</li><li id="83d5" class="ma mb iq kf b kg mn kk mo ko mp ks mq kw mr la mf mg mh mi bi translated"><code class="fe mj mk ml mm b">singleton.someMethod()</code> —您将调用singleton类的方法。</li></ol><p id="ae9d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">上面的例子是一个纯粹的单例类。现在，让我们通过添加以下代码来创建一个<code class="fe mj mk ml mm b">SingletonClass</code>的实例-</p><p id="066b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mj mk ml mm b">let newSingleton = SingletonClass()</code></p><figure class="lu lv lw lx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ms"><img src="../Images/781cbd9c7f1ed2a3a6040c19744d5311.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B4JfNnOiIJ9m31MNEaXGZA.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">单一类访问级别错误</figcaption></figure><p id="5033" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您将无法创建singleton类的新实例，因为我们已经将访问级别设置为private。</p><p id="5846" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在让我们改变访问级别，尝试相同的代码—</p><figure class="lu lv lw lx gt jr"><div class="bz fp l di"><div class="ly lz l"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">以不同的方式实现singleton。</figcaption></figure><p id="e720" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这个实现类似于前面的实现，唯一的不同是我们改变了<code class="fe mj mk ml mm b">private init() { } to init() { }</code>。</p><p id="5541" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这将允许您通过编写代码— <code class="fe mj mk ml mm b">let newSingleton = SingletonClass()</code>来创建SingletonClass的新实例，您也将通过调用此代码— <code class="fe mj mk ml mm b"> let singleton = SingletonClass.shared</code>来获得singleton实例。</p><p id="15d5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">实现singleton的两种方法都是正确的，甚至苹果也根据场景遵循两种方法。</p><figure class="lu lv lw lx gt jr"><div class="bz fp l di"><div class="ly lz l"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">示例1</figcaption></figure><figure class="lu lv lw lx gt jr"><div class="bz fp l di"><div class="ly lz l"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">示例2</figcaption></figure><figure class="lu lv lw lx gt jr"><div class="bz fp l di"><div class="ly lz l"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">示例3</figcaption></figure><p id="f816" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">与示例1、2一样，我们可以创建UserDefaults和FileManager的新实例，而在示例3中，UIApplication不允许您创建该类的新实例，这将导致编译错误。所以我们可以说UIApplication是一个纯粹的singleton。</p><h2 id="9368" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">什么时候使用单例模式？</h2><p id="222c" class="pw-post-body-paragraph kd ke iq kf b kg mt ki kj kk mu km kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated">如果一个类的多个实例影响您在项目中的实现，在这种情况下，您可以使用这种模式。每种模式都有优点和缺点，所以当你为你的项目选择一种模式时，一定要清楚。记住，永远不要过度使用任何模式，从长远来看，这会导致问题。</p></div><div class="ab cl my mz hu na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="ij ik il im in"><p id="eb52" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">感谢您阅读这篇文章。如果你觉得这篇文章有帮助，请不要忘记鼓掌。</p><p id="fd43" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果您有任何问题或意见，请随时通过<a class="ae kc" href="https://twitter.com/nomadicsheldon" rel="noopener ugc nofollow" target="_blank"> Twitter </a>联系我。</p></div></div>    
</body>
</html>