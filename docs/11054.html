<html>
<head>
<title>Introduction to Sentiment Analysis with Speech Recognition</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">语音识别情感分析简介</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/introduction-to-sentiment-analysis-with-speech-recognition-909d49fb5430?source=collection_archive---------16-----------------------#2022-02-10">https://levelup.gitconnected.com/introduction-to-sentiment-analysis-with-speech-recognition-909d49fb5430?source=collection_archive---------16-----------------------#2022-02-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="83fe" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">动手Python机器学习项目</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/5a5a39a350fc04d6bd125ae3a97321df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BQE1_H9DByw7Uvc_YGiDJw.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">米格尔拍摄的照片。来自<a class="ae ky" href="https://www.pexels.com/photo/two-white-message-balloons-1111368/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">佩克斯</a>的帕德里纳</figcaption></figure><p id="7158" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">在这篇文章中，我们将学习如何使用情感分析来分析一篇演讲。情感分析是从写句子中理解观点或情感基调的过程。这是一个很好的话题，通常包含在自然语言处理主题中。</p><p id="a434" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">随着人工智能模型的发展，NLP方法在理解人类时也变得更有思想，更智能。情感分析现在被用于许多行业，从聊天机器人到产品反馈研究。</p><h2 id="878f" class="lv lw it bd lx ly lz dn ma mb mc dp md li me mf mg lm mh mi mj lq mk ml mm mn bi translated">目录</h2><ul class=""><li id="d62f" class="mo mp it lb b lc mq lf mr li ms lm mt lq mu lu mv mw mx my bi translated"><em class="mz">入门</em></li><li id="8a81" class="mo mp it lb b lc na lf nb li nc lm nd lq ne lu mv mw mx my bi translated"><em class="mz">第一步:库</em></li><li id="70c5" class="mo mp it lb b lc na lf nb li nc lm nd lq ne lu mv mw mx my bi translated"><em class="mz">步骤2:音频数据</em></li><li id="cc54" class="mo mp it lb b lc na lf nb li nc lm nd lq ne lu mv mw mx my bi translated"><em class="mz">步骤3:带有情感分析的音频转录</em></li><li id="e99d" class="mo mp it lb b lc na lf nb li nc lm nd lq ne lu mv mw mx my bi translated"><em class="mz">最后一步:了解结果</em></li></ul></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><h1 id="1a20" class="nm lw it bd lx nn no np ma nq nr ns md jz nt ka mg kc nu kd mj kf nv kg mm nw bi translated">入门指南</h1><p id="cdac" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li nx lk ll lm ny lo lp lq nz ls lt lu im bi translated">首先，我们需要一些数据来运行我们的情感分析。这些数据可以是你写在文本文档中的一句话，也可以是你在会议上的长篇演讲。</p><p id="da19" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">对于本教程，我将使用一些阅读句子的录音。在程序中，我将使用语音识别器将语音转换成文本格式。</p><p id="00ad" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将使用AssemblyAI的<a class="ae ky" href="https://www.assemblyai.com/" rel="noopener ugc nofollow" target="_blank">语音转文本</a> API。它是一个训练有素的人工智能API。免费使用。创建帐户后，您将获得一个唯一的API密钥。我们将使用该API密钥来使用服务和功能。</p><p id="af17" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们开始吧。</p></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><h1 id="428d" class="nm lw it bd lx nn no np ma nq nr ns md jz nt ka mg kc nu kd mj kf nv kg mm nw bi translated">第一步:图书馆</h1><p id="4668" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li nx lk ll lm ny lo lp lq nz ls lt lu im bi translated">作为我们的编码环境，我会选择Jupyter笔记本。我喜欢用它来做像这样的机器学习项目。在不影响整个代码的情况下，很容易跟踪进程并在不同的块上进行特定的更改。</p><p id="4007" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们需要的库都是Python内置的库。所以，我们不需要安装任何库。</p><p id="68f1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们打开一个新的Jupyter笔记本并导入库。</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="6d91" class="lv lw it ob b gy of og l oh oi">import sys<br/>import time<br/>import requests</span></pre></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><h1 id="6cd0" class="nm lw it bd lx nn no np ma nq nr ns md jz nt ka mg kc nu kd mj kf nv kg mm nw bi translated">第二步:音频数据</h1><p id="480d" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li nx lk ll lm ny lo lp lq nz ls lt lu im bi translated">正如你从标题中可以理解的，我们将在这一步导入音频数据。这些数据可以是一个简短的语音备忘录，一个长的演讲，或者任何你想使用的东西。为了简单起见，我会用一小段录音。</p><p id="667c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">当我们的数据准备好了，就该把它导入程序了。由于我们将使用API进行转录和情感分析，我们必须将录音上传到云存储。我将使用AssemblyAI的云来访问更容易访问的数据。</p><p id="228f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我会将录音文件移动到我的Jupyter笔记本所在的文件夹中。然后在程序中定义它。</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="1304" class="lv lw it ob b gy of og l oh oi">audio_data = "review_recording.m4a"</span></pre><p id="a4a2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在，是时候写一个函数来读取这个录音文件了。顺便说一下，文件格式应该是音频格式，以便我们的阅读功能正常工作。</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="779f" class="lv lw it ob b gy of og l oh oi">def read_audio_file(audio_data, chunk_size=5242880):<br/>    with open(audio_data, 'rb') as _file:<br/>        while True:<br/>            data = _file.read(chunk_size)<br/>            if not data:<br/>                break<br/>            yield data</span></pre><p id="0f7c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">是时候把我们的录音上传到云端了。</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="4fe2" class="lv lw it ob b gy of og l oh oi">headers = {<br/>    "authorization": "API key goes here"<br/> }</span><span id="4f0f" class="lv lw it ob b gy oj og l oh oi">response = requests.post('<a class="ae ky" href="https://api.assemblyai.com/v2/upload'" rel="noopener ugc nofollow" target="_blank">https://api.assemblyai.com/v2/upload'</a>, headers=headers, data=read_audio_file(audio_data))</span><span id="0f1e" class="lv lw it ob b gy oj og l oh oi">print(response.json())</span></pre><p id="c91d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">太好了！运行完这段代码后。我们将从API获得响应。响应消息将包括上传文件的URL地址。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ok"><img src="../Images/6d077d77702c8b763ab61733992cf93d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3FV5OrRu4JaCsdifAgCvuw.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">图片由<a class="ae ky" href="https://lifexplorer.medium.com" rel="noopener">作者</a>提供。</figcaption></figure></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><h1 id="4942" class="nm lw it bd lx nn no np ma nq nr ns md jz nt ka mg kc nu kd mj kf nv kg mm nw bi translated">步骤3:带有情感分析的音频转录</h1><p id="1ee1" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li nx lk ll lm ny lo lp lq nz ls lt lu im bi translated">快到了！这一步将运行带有情感分析特性的云转录模型。这是一个在几秒钟内获得快速响应的好方法。一切都发生在AssemblyAI的云中，我们不必担心我们设备的规格。</p><p id="a15a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><a class="ae ky" href="https://docs.assemblyai.com/audio-intelligence#sentiment-analysis" rel="noopener ugc nofollow" target="_blank">这里的</a>是官方文档，如果你想了解更多。</p><p id="0242" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">好吧，我们开始吧。</p><p id="6399" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们将定义四个变量:一个字符串、两个字典和一个POST请求。当我们添加分配的真实值时，情感分析被启用。如果为false，请求将进行常规语音识别。</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="9a78" class="lv lw it ob b gy of og l oh oi">speech_to_text_api = "<a class="ae ky" href="https://api.assemblyai.com/v2/transcript" rel="noopener ugc nofollow" target="_blank">https://api.assemblyai.com/v2/transcript</a>"</span><span id="d61b" class="lv lw it ob b gy oj og l oh oi">data = {<br/>  "audio_url": "The upload url address from the previous step",<br/>  "sentiment_analysis": "TRUE"<br/>}</span><span id="6eac" class="lv lw it ob b gy oj og l oh oi">headers = {<br/>    "authorization": "API key goes here",<br/>    "content-type": "application/json"<br/>}</span><span id="d76a" class="lv lw it ob b gy oj og l oh oi">response = requests.post(speech_to_text_api, json=data, headers=headers)</span><span id="48e8" class="lv lw it ob b gy oj og l oh oi">print(response.json())</span></pre><p id="f321" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">运行这个代码块后，我们的请求订单将进入云队列，等待处理。以下是我收到的回复:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ol"><img src="../Images/8611a8c167682fdacd8c777add5f20dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*atLuHO_ziCUU4sNB2zHNeQ.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">图片由<a class="ae ky" href="https://lifexplorer.medium.com" rel="noopener">作者</a>提供。</figcaption></figure><p id="a331" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">该id是我们的请求id。我们需要它来跟踪整个过程。状态键显示我们的订单状态。</p></div><div class="ab cl nf ng hx nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="im in io ip iq"><h1 id="1265" class="nm lw it bd lx nn no np ma nq nr ns md jz nt ka mg kc nu kd mj kf nv kg mm nw bi translated">最后一步:了解结果</h1><p id="d119" class="pw-post-body-paragraph kz la it lb b lc mq ju le lf mr jx lh li nx lk ll lm ny lo lp lq nz ls lt lu im bi translated">在最后一步中，我们将检查请求的结果并进行分析。让我们通过运行下面的代码块来检查响应。</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="5a42" class="lv lw it ob b gy of og l oh oi">request_url = "<a class="ae ky" href="https://api.assemblyai.com/v2/transcript/o6z85sn6vc-acc5-4d64-9a41-9386674f7ff0" rel="noopener ugc nofollow" target="_blank">https://api.assemblyai.com/v2/transcript/o6z85sn6vc-acc5-4d64-9a41-9386674f7ff0</a>"</span><span id="a649" class="lv lw it ob b gy oj og l oh oi">headers = {<br/>    "authorization": "API key goes here"<br/>}</span><span id="464a" class="lv lw it ob b gy oj og l oh oi">response = requests.get(request_url, headers=headers)</span><span id="6be2" class="lv lw it ob b gy oj og l oh oi">print(response.json())</span></pre><p id="fb18" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">以下是整个回复的截图:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi om"><img src="../Images/49fcd4fb70d7e91d406e37ee62b75f07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HH87kSKirwHrngZWu_2jKA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">图片由<a class="ae ky" href="https://lifexplorer.medium.com" rel="noopener">作者</a>提供。</figcaption></figure><p id="9281" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">让我们继续从这个长字典中筛选出情感分析的关键。</p><pre class="kj kk kl km gt oa ob oc od aw oe bi"><span id="62aa" class="lv lw it ob b gy of og l oh oi">sentiment_analysis_report = response.json()['sentiment_analysis_results']</span><span id="b298" class="lv lw it ob b gy oj og l oh oi">sentiment_analysis_report</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi on"><img src="../Images/cc51e2c9bb4e8bfb9a8b86208f94a4ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZBA-pYjtsENt7luyPiEiAA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">图片由<a class="ae ky" href="https://lifexplorer.medium.com" rel="noopener">作者</a>提供。</figcaption></figure><p id="6412" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">看起来很完美！我们得到了一份带有几行代码的演讲录音的情感分析报告。情感分析将录音中发现的每个句子分解，然后进行分析以确定它们是积极的、中立的还是消极的。该报告甚至包括模型对其决策的信心程度。是不是很酷？</p><p id="5005" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">我们在本教程中所做的只是一个简单的练习；看看这个模型在更长的语音记录中的表现会很有趣。现在，您已经了解了情感分析在实际项目中是如何工作的。从事像这样的动手编程项目是提高编码技能的最好方式。</p><blockquote class="oo op oq"><p id="bf47" class="kz la mz lb b lc ld ju le lf lg jx lh or lj lk ll os ln lo lp ot lr ls lt lu im bi translated">我是贝希克·居文，我喜欢分享关于编程、教育和生活的故事。<a class="ae ky" href="https://lifexplorer.medium.com/membership" rel="noopener">订阅</a>我的内容，保持灵感。泰，</p></blockquote><p id="1a50" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated"><strong class="lb iu">如果你想知道我写什么样的文章，这里有一些:</strong></p><ul class=""><li id="872b" class="mo mp it lb b lc ld lf lg li ow lm ox lq oy lu mv mw mx my bi translated"><a class="ae ky" href="https://towardsdatascience.com/python-for-art-design-personalized-quote-images-using-python-44ef4d8876d8" rel="noopener" target="_blank">使用Python设计个性化报价图片</a></li><li id="a090" class="mo mp it lb b lc na lf nb li nc lm nd lq ne lu mv mw mx my bi translated"><a class="ae ky" href="https://towardsdatascience.com/step-by-step-guide-building-a-prediction-model-in-python-ac441e8b9e8b" rel="noopener" target="_blank">分步指南—用Python构建预测模型</a></li><li id="d74a" class="mo mp it lb b lc na lf nb li nc lm nd lq ne lu mv mw mx my bi translated"><a class="ae ky" href="https://towardsdatascience.com/my-recent-interview-experience-with-google-c7e8e1206260" rel="noopener" target="_blank">我最近在谷歌的面试经历</a></li></ul></div></div>    
</body>
</html>