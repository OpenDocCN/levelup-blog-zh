<html>
<head>
<title>quotespy: Create graphics for quotes, lyrics, and tweets</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">quotespy:为引用、歌词和推文创建图形</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/quotespy-create-graphics-for-quotes-lyrics-and-tweets-f0a89b76e341?source=collection_archive---------31-----------------------#2020-06-01">https://levelup.gitconnected.com/quotespy-create-graphics-for-quotes-lyrics-and-tweets-f0a89b76e341?source=collection_archive---------31-----------------------#2020-06-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="4e6c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2019年10月，我<a class="ae kl" href="https://medium.com/analytics-vidhya/how-to-create-twitter-screenshots-with-python-c142ef71fda7?source=friends_link&amp;sk=8a5bb375ca2969b6d59231d8796d7ce0" rel="noopener">写了一篇中型文章</a>，讲述如何使用Python和PIL图书馆创建类似tweet的图形。现在我发布了一个完整的Python库，可以用于这个目的，也可以用于歌词和引用图形。我叫它quotespy。</p><p id="abe3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在本文中，我将向您展示基于项目自述文件中包含的示例的演示，从最简单的用法到将quotespy与<code class="fe km kn ko kp b">os</code>模块集成在一起的更“高级”的案例。</p><p id="b6e3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于初学者，用通常的pip命令安装库</p><pre class="kq kr ks kt gt ku kp kv kw aw kx bi"><span id="3c30" class="ky kz iq kp b gy la lb l lc ld">pip install quotespy</span></pre><p id="95e3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你就可以走了。</p><h1 id="0038" class="le kz iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated"><strong class="ak">用quotespy.graphics创建歌词/引语图形</strong></h1><p id="0f6a" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">quotespy有两个软件包，一个用于类似推特的图形，另一个用于歌词/引语。我们将首先讨论后者。</p><figure class="kq kr ks kt gt mg"><div class="bz fp l di"><div class="mh mi l"/></div><figcaption class="mj mk gj gh gi ml mm bd b be z dk translated">quotespy.graphics基本用法</figcaption></figure><p id="582c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">正如您所看到的，给定一个包含图形信息的字典和一个图形设置(默认)格式，上面的脚本生成了以下内容。png文件。</p><figure class="kq kr ks kt gt mg gh gi paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="gh gi mn"><img src="../Images/94f2540ab1d989eea77dc924ebe59bd0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rpszxtaw39YXFenbc3ejKw.png"/></div></div><figcaption class="mj mk gj gh gi ml mm bd b be z dk translated">基本歌词图形示例</figcaption></figure><p id="d6ae" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">就我个人而言，我不认为默认设置的字体(Arial)适合图形/歌词，但我选择了它，因为(1)它是tweets包的字体,( 2)它在潜在用户的机器上更常见。</p><p id="fd45" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因此，为了改进定制，您可以传递您自己的设置，而不是传递一个空字典作为第二个参数。我称之为<code class="fe km kn ko kp b">graphic_settings</code>字典，它包括图形的格式设置。请注意，这里显示的所有字典，无论是图形信息还是图形格式，都需要例子中包含的所有键值对。说到这里，请注意，无论是空字典还是自定义设置的完整字典，都必须作为第二个位置参数传递。</p><figure class="kq kr ks kt gt mg"><div class="bz fp l di"><div class="mh mi l"/></div><figcaption class="mj mk gj gh gi ml mm bd b be z dk translated">带有自定义图形设置的quotespy.graphics基本用法</figcaption></figure><p id="5f97" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">正如您在上面的代码片段中看到的，您可以选择字体系列、字体大小、图形的尺寸(宽度和高度，都是像素)、配色方案(背景和文本颜色，都是十六进制值)、每行的最大字符数以及行间的垂直边距。哦，因为我们使用自定义图形设置，所以没有必要指定<code class="fe km kn ko kp b">default_settings_format</code>。</p><p id="48e5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">此外，请注意，在本例中还指定了输出目录。省略时，创建的图形的目的地默认为当前目录，但当给定路径(相对或绝对)时，它会保存在该位置。在这种情况下，图形保存在当前目录下的“输出”文件夹中。</p><figure class="kq kr ks kt gt mg gh gi paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="gh gi mn"><img src="../Images/d88bd462ad880ea2443319bd4b690c6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hyhmdCc7lboyc-qDWk6a6w.png"/></div></div><figcaption class="mj mk gj gh gi ml mm bd b be z dk translated">带有自定义设置的基本歌词图形示例</figcaption></figure><p id="1893" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">理想情况下，使用默认设置创建的图形应该是这样的，使用无墨字体，但由于默认情况下它不可用，所以我保留了Arial作为默认设置。</p><p id="a847" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下一个例子是从一个. txt或者。json文件为每一个创建一个图形。假设您手头有一个这样的. json文件</p><figure class="kq kr ks kt gt mg"><div class="bz fp l di"><div class="mh mi l"/></div><figcaption class="mj mk gj gh gi ml mm bd b be z dk translated">quotes.json示例文件</figcaption></figure><p id="0299" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">或. txt替代文件</p><figure class="kq kr ks kt gt mg"><div class="bz fp l di"><div class="mh mi l"/></div><figcaption class="mj mk gj gh gi ml mm bd b be z dk translated">quotes.txt示例文件</figcaption></figure><p id="e680" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您可以使用<code class="fe km kn ko kp b">gen_graphics</code>功能来加载文件，并为每个引用/歌词创建图形:</p><figure class="kq kr ks kt gt mg"><div class="bz fp l di"><div class="mh mi l"/></div><figcaption class="mj mk gj gh gi ml mm bd b be z dk translated">quotespy.graphics加载多个报价的基本用法</figcaption></figure><p id="88ba" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">同样，我们使用自定义图形设置，并指定。引用的json文件。所有创建的报价图形再次保存在“输出”文件夹中。这是一个创建的报价图形的示例。</p><figure class="kq kr ks kt gt mg gh gi paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="gh gi mu"><img src="../Images/423c457d94ada70938be8c34318432d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wCZ83cNWbl76dNVLAvKiyg.png"/></div></div><figcaption class="mj mk gj gh gi ml mm bd b be z dk translated">引用图形示例</figcaption></figure><p id="9c0c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当然，同样的<code class="fe km kn ko kp b">gen_graphics</code>函数也可以用于歌词文件。这里的可变因素是所使用的图形设置，文本只是在图形中绘制的内容。</p><p id="8f7b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于<code class="fe km kn ko kp b">graphics</code>一揽子计划来说，差不多就是这些了。现在让我们继续讨论<code class="fe km kn ko kp b">tweet_graphics</code>的对应部分。</p><h1 id="68a3" class="le kz iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated"><strong class="ak">使用quotespy.tweet_graphics创建推文图形</strong></h1><p id="484b" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">创建tweet图形同样简单，只需为信息和图形设置字典添加一些键值对。</p><p id="1ef1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先，<code class="fe km kn ko kp b">tweet_info</code>字典需要tweet/file的名称(而不是<code class="fe km kn ko kp b">title</code>)、用户的用户名和标签/句柄，当然还有实际的tweet文本。也可以添加配置文件图片的路径，或者保留为空字符串。</p><figure class="kq kr ks kt gt mg"><div class="bz fp l di"><div class="mh mi l"/></div><figcaption class="mj mk gj gh gi ml mm bd b be z dk translated">tweet_graphics基本用法</figcaption></figure><p id="54fb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这种情况下，配置文件图片位于“samples”文件夹中，名称为“user_photo.png”，也就是说，它的位置是用相对路径指定的。哦，请注意，个人资料图片被调整为图形尺寸的十分之一，并带有圆形裁剪。</p><p id="28f1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">类似于<code class="fe km kn ko kp b">graphics</code>包，<code class="fe km kn ko kp b">create_tweet</code>功能也接受默认的图形设置:“蓝色”、“亮”和“暗”，这反映了Twitter的主题。下面是所示代码片段的输出图形。</p><figure class="kq kr ks kt gt mg gh gi paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="gh gi mv"><img src="../Images/c5c1498c95886b447c4fa44c4c57a151.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*85jpHZF3A32eBwz5dqv7tg.png"/></div></div><figcaption class="mj mk gj gh gi ml mm bd b be z dk translated">tweet_graphics基本使用示例输出</figcaption></figure><p id="415d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当然，也可以传递自定义图形设置。</p><figure class="kq kr ks kt gt mg"><div class="bz fp l di"><div class="mh mi l"/></div><figcaption class="mj mk gj gh gi ml mm bd b be z dk translated">带有自定义图形设置的基本quotespy.tweet_graphics用法</figcaption></figure><p id="4206" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">请注意用于tweet的<code class="fe km kn ko kp b">graphic_settings</code>字典是如何包含<code class="fe km kn ko kp b">font_size_text</code>和<code class="fe km kn ko kp b">font_size_header</code>键的，因此标题(用户名和标签/句柄)可以与tweet的其余部分大小不同。</p><p id="a940" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这一次图形保存在当前目录中，并且它没有个人资料图片:</p><figure class="kq kr ks kt gt mg gh gi paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="gh gi mv"><img src="../Images/7591e8e19f1fea22c1d03f67498a544f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lUBiNgVqhia49ZFrsc-eTg.png"/></div></div><figcaption class="mj mk gj gh gi ml mm bd b be z dk translated">带有自定义设置的基本tweet图形示例</figcaption></figure><p id="efd7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，也可以加载一个包含多个tweets的文件，但仅限于这一次。json文件。</p><p id="1027" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">假设您有一个这样的文件(一个JSON对象数组，作为一个<code class="fe km kn ko kp b">graphic_info</code>字典列表加载):</p><figure class="kq kr ks kt gt mg"><div class="bz fp l di"><div class="mh mi l"/></div><figcaption class="mj mk gj gh gi ml mm bd b be z dk translated">tweets.json示例文件</figcaption></figure><p id="9e32" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后，可以使用以下代码为文件中的每个tweet生成图形:</p><figure class="kq kr ks kt gt mg"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="d857" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">它创建了两个图形，文件中的每个tweet都有一个图形，使用默认的“light”主题图形设置。第二个看起来像这样:</p><figure class="kq kr ks kt gt mg gh gi paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><div class="gh gi mv"><img src="../Images/039685b3d1b67c2b21b8dd2a500afb15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9xu4xzPfyYtJUewbXlJZ7Q.png"/></div></div><figcaption class="mj mk gj gh gi ml mm bd b be z dk translated">gen_tweet示例输出</figcaption></figure><p id="5619" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我展示了第二张tweet图片，这样你就可以看到长用户名和文本的图片了。</p><h1 id="bd36" class="le kz iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">"高级用法"</h1><p id="2384" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">最后，我想展示一个“高级用法”的例子，它将quotespy与<code class="fe km kn ko kp b">os</code>模块集成在一起，在每个tweet的文件夹中创建tweet的“亮”和“暗”模式图形。</p><figure class="kq kr ks kt gt mg"><div class="bz fp l di"><div class="mh mi l"/></div><figcaption class="mj mk gj gh gi ml mm bd b be z dk translated">quotespy高级用法</figcaption></figure><p id="55a5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先，有一个<code class="fe km kn ko kp b">tweet_info</code>字典列表，也就是推文列表。“顶层”保存目标再次是“输出”文件夹，在<code class="fe km kn ko kp b">PATH</code>变量中指定。然后，指定两个自定义图形设置字典:一个用于亮模式，另一个用于暗模式。</p><p id="1b6d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在所有的信息都已确定，我们可以循环遍历推文列表，用<code class="fe km kn ko kp b">create_tweet</code>函数创建每一条推文。然而，在创建任何图形之前，我们在“输出”中创建了一个新文件夹来存储当前tweet的两个版本(浅色和深色)。这是通过<code class="fe km kn ko kp b">os.path.join</code>和<code class="fe km kn ko kp b">mkdir</code>终端命令(通过<code class="fe km kn ko kp b">os.system</code>执行)创建与tweet同名的文件夹来实现的。</p><p id="160c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，创建浅色模式版本，为了创建深色版本，将“_DM”附加到tweet的名称上，以便每个版本有不同的名称。如果名称相同，黑暗模式版本将覆盖光明模式版本。</p><p id="ebbe" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">运行脚本后,“output”文件夹现在包含三个文件夹，每个tweet一个，每个文件夹中有一个深色和浅色版本。</p><h1 id="e3c9" class="le kz iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">结论</h1><p id="30c1" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">编写这个库是一次宝贵的经历。首先，我相信我创建了一个有趣的库，可以帮助人们准备好在社交媒体上发布的内容。第二，我在创作过程中学到了很多。我一直在本地用独立的脚本进行这些创作，但是现在代码已经公开了。</p><p id="e848" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个项目的另一个好处是熟悉了<code class="fe km kn ko kp b">pytest</code>测试库。它很灵活，允许快速编写自动化测试，编写相同测试的变体的开销很小(例如，测试一个函数为不同的<code class="fe km kn ko kp b">graphic_settings</code>字典抛出了哪个异常)。不幸的是，我没能写出我想要的所有测试，但至少这个库有足够好的代码覆盖率(大约80%)。</p><p id="1c11" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，我想指出micha karzyński的“<a class="ae kl" href="http://michal.karzynski.pl/blog/2019/05/26/python-project-maturity-checklist/" rel="noopener ugc nofollow" target="_blank"> Python项目成熟度检查表</a>”的方向。从分离的脚本到准备出版的最终库，这确实是一个很好的指南。</p><p id="0886" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">quotespy在GitHub <a class="ae kl" href="https://github.com/Ze1598/quotespy" rel="noopener ugc nofollow" target="_blank">这里</a>有售，在PyPi <a class="ae kl" href="https://pypi.org/project/quotespy/1.0.1/" rel="noopener ugc nofollow" target="_blank">这里</a>有售。</p></div></div>    
</body>
</html>