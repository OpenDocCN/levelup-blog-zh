<html>
<head>
<title>Flexible and responsive UI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">灵活且响应迅速的用户界面</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/flexible-and-responsive-ui-b17a895b2d52?source=collection_archive---------2-----------------------#2020-12-16">https://levelup.gitconnected.com/flexible-and-responsive-ui-b17a895b2d52?source=collection_archive---------2-----------------------#2020-12-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/c9774f69d2cfda433f31289535cd19bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XWFP1uZpTyUsHt5b4OLT_w.png"/></div></div></figure><p id="cd67" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">手机现在有各种尺寸，这就是为什么提供一个灵活的、反应灵敏的用户界面是如此重要。我们需要设计我们的应用程序的用户界面完全灵活，以便它可以在所有设备上正确显示。本文将向您展示如何使用Android中可用的工具支持不同的屏幕尺寸(对于Android wear、电视等其他设备，我们必须采取更多步骤)。</p><p id="068e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你还可以在我的GitHub中看到Responsive UI代码实现。</p><div class="kw kx gp gr ky kz"><a href="https://github.com/GolnazTorabi/ResponsiveUI" rel="noopener  ugc nofollow" target="_blank"><div class="la ab fo"><div class="lb ab lc cl cj ld"><h2 class="bd ir gy z fp le fr fs lf fu fw ip bi translated">GolnazTorabi/责任UI</h2><div class="lg l"><h3 class="bd b gy z fp le fr fs lf fu fw dk translated">解散GitHub是超过5000万开发者的家园，他们一起工作来托管和审查代码，管理项目，以及…</h3></div><div class="lh l"><p class="bd b dl z fp le fr fs lf fu fw dk translated">github.com</p></div></div><div class="li l"><div class="lj l lk ll lm li ln jw kz"/></div></div></a></div></div><div class="ab cl lo lp hu lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ij ik il im in"><p id="8824" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">创建响应式UI的最佳方式是使用<a class="ae lv" href="https://developer.android.com/reference/androidx/constraintlayout/widget/ConstraintLayout" rel="noopener ugc nofollow" target="_blank"> ConstraintLayout </a>作为我们的基本布局文件，因为在ConstraintLayout中，我们可以根据布局中与其他视图的空间关系来指定每个视图的位置和大小。我们可以将LinearLayout转换为Constraint，或者使用layout_weight选项使UI更加灵活(但是在嵌套的LinearLayout中，这会降低我们的UI性能)。</p><figure class="lx ly lz ma gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lw"><img src="../Images/22bf9948a0cab57bceea01703a04bbbe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EUwozLOLBndcuT4d2N_Adg.png"/></div></div><figcaption class="mb mc gj gh gi md me bd b be z dk translated">转换为ConstraintLayout</figcaption></figure><p id="f170" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">所以我们有办法负责任地定义我们的布局。</strong></p><p id="b0ed" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> 1。尺寸</strong></p><ul class=""><li id="bf2d" class="mf mg iq ka b kb kc kf kg kj mh kn mi kr mj kv mk ml mm mn bi translated">对于大多数视图组件的宽度和高度，只使用<strong class="ka ir"> match_parent </strong>或<strong class="ka ir"> wrap_content </strong>，而不使用硬编码的布局尺寸(如设置图像宽度60dp，如果只需要对UI组件使用<strong class="ka ir"> dp </strong>)。</li><li id="a5e7" class="mf mg iq ka b kb mo kf mp kj mq kn mr kr ms kv mk ml mm mn bi translated">仅使用<strong class="ka ir"> sp </strong>作为文本大小，并在<strong class="ka ir">dimenses</strong>文件中定义。</li><li id="d795" class="mf mg iq ka b kb mo kf mp kj mq kn mr kr ms kv mk ml mm mn bi translated">将尺寸保存在<strong class="ka ir"> dimens.xml </strong>文件中(不在代码上)。</li><li id="40ac" class="mf mg iq ka b kb mo kf mp kj mq kn mr kr ms kv mk ml mm mn bi translated">为每种类型的设备尺寸提供尺寸<strong class="ka ir">值</strong>文件夹。</li></ul><p id="ca0d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">那么dp(dip)、sp、px 的<strong class="ka ir">区别是什么呢？基于<a class="ae lv" href="https://developer.android.com/guide/topics/resources/more-resources.html#Dimension" rel="noopener ugc nofollow" target="_blank"> Android开发者文档</a>:</strong></p><p id="76ee" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> dp </strong></p><p id="4d2c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">与密度无关的像素—基于屏幕物理密度的抽象单位。这些单位是相对于160 dpi(每英寸点数)屏幕而言的，在该屏幕上，1dp大约等于1px。当在更高密度的屏幕上运行时，用于绘制1dp的像素数会按适合屏幕dpi的因子放大。同样，在密度较低的屏幕上，用于1dp的像素数也会相应减少。dp与像素的比值会随着屏幕密度的变化而变化，但不一定成正比。使用dp单位(而不是px单位)是一种简单的解决方案，可以根据不同的屏幕密度适当调整布局中的视图尺寸。换句话说，它为不同设备上的UI元素的真实大小提供了一致性。</p><p id="696c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> sp </strong></p><p id="1f06" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">与比例无关的像素—这类似于dp单位，但它也根据用户的字体大小偏好进行缩放。建议您在指定字体大小时使用此单位，这样可以根据屏幕密度和用户偏好进行调整。</p><p id="4139" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> px </strong></p><p id="2895" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">像素—对应于屏幕上的实际像素。不推荐使用这种测量单位，因为实际表示可能因设备而异；每个设备每英寸的像素数可能不同，并且屏幕上可用的总像素数可能更多或更少。</p><p id="96d3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">如何创建多个活动或维度不同的文件:</strong></p><ol class=""><li id="4b59" class="mf mg iq ka b kb kc kf kg kj mh kn mi kr mj kv mt ml mm mn bi translated">创建一个新的资源目录:res &gt; New &gt; Android资源目录</li></ol><p id="532f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">2.选择资源类型作为布局</p><p id="661b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">3.在目录名中添加软件<n> dp，例如layout-sw300dp，并点击<strong class="ka ir"> OK </strong></n></p><p id="4ebc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">对于尺寸</strong>:</p><ol class=""><li id="0763" class="mf mg iq ka b kb kc kf kg kj mh kn mi kr mj kv mt ml mm mn bi translated">右键单击dimens文件:新建&gt;值资源文件</li><li id="037a" class="mf mg iq ka b kb mo kf mp kj mq kn mr kr ms kv mt ml mm mn bi translated">添加名称并选择屏幕宽度或高度，然后像这样设置大小:</li></ol><figure class="lx ly lz ma gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mu"><img src="../Images/1d535757c9fb90c72d303e8e3ab3cb0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UWECreQDkQrou8ObLyaYuA.png"/></div></div></figure><p id="3213" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">结果是这样的:</p><figure class="lx ly lz ma gt jr gh gi paragraph-image"><div class="gh gi mv"><img src="../Images/0b3f0209cb639dd5237283018e070bfb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1194/format:webp/1*gjN_wZhnZ9iWuwSU9Isq4Q.png"/></div></figure><p id="b59a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">值</strong>不同屏幕尺寸的文件夹尺寸。根据<a class="ae lv" href="https://developer.android.com/training/multiscreen/screensizes" rel="noopener ugc nofollow" target="_blank"> Android开发者文档</a>。</p><ul class=""><li id="f00a" class="mf mg iq ka b kb kc kf kg kj mh kn mi kr mj kv mk ml mm mn bi translated">320dp:典型的手机屏幕(240x320 ldpi，320x480 mdpi，480x800 hdpi等)。</li><li id="6cf4" class="mf mg iq ka b kb mo kf mp kj mq kn mr kr ms kv mk ml mm mn bi translated">480dp:手机大屏~ 5”(480 x800 mdpi)。</li><li id="32dc" class="mf mg iq ka b kb mo kf mp kj mq kn mr kr ms kv mk ml mm mn bi translated">600dp:一款7英寸的平板电脑(600x1024 mdpi)。</li><li id="18ea" class="mf mg iq ka b kb mo kf mp kj mq kn mr kr ms kv mk ml mm mn bi translated">720 DP:10英寸平板电脑(720x1280 mdpi、800x1280 mdpi等)。</li></ul><figure class="lx ly lz ma gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/e59c1fc06b94b3fa6bb7acdf3372a4cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sIO3QGqo4JoEZTyJ-dIEeQ.png"/></div></div></figure><p id="65c1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">对于每个布局尺寸，我们定义了一个布局文件夹，如<strong class="ka ir"> layout-w600dp </strong>(用于7”平板电脑或任何600dp宽度的屏幕)，或<strong class="ka ir"> layout-h600dp </strong>(用于高度)。因为我们不想根据设备的最小宽度或高度来改变布局，所以我们根据当前可用的宽度或高度来改变布局。对于定位，我们可以为您的资源目录名(<strong class="ka ir">RES/layout-land/main _ activity . XML</strong>)定义<strong class="ka ir"> port </strong>或l <strong class="ka ir"> a </strong> nd限定符。</p><p id="d809" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当我们设计多种屏幕尺寸时，我们希望确保我们不会不必要地在活动中重复我们的UI行为。所以我们应该使用<a class="ae lv" href="https://developer.android.com/guide/components/fragments" rel="noopener ugc nofollow" target="_blank">片段</a>将我们的UI逻辑提取到单独的组件中。例如，当设备是平板电脑时，我们在屏幕左侧显示菜单，但在常规尺寸的手机中，我们不想显示该菜单。</p><p id="c5f2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">使用这些限定符指定的尺寸是<strong class="ka ir">，而不是实际的屏幕尺寸</strong>。更确切地说，这些尺寸是针对活动窗口可用的<strong class="ka ir">DP单位的宽度或高度。</strong></p><p id="9947" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">首先，我们将下面的代码添加到清单文件中。</p><figure class="lx ly lz ma gt jr"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="e080" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果您想在用户报告UI有问题时方便地获取用户手机的大小，下面的方法适合这种情况。</p><figure class="lx ly lz ma gt jr"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="70cf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">或者，如果设备有导航栏，则计算其高度:</p><figure class="lx ly lz ma gt jr"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="066b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">有时，我们检查<strong class="ka ir">键盘是否正在运行</strong>，然后<strong class="ka ir">增加</strong>或<strong class="ka ir">减少</strong>填充或边距。因此，我们必须在它运行时使用一个监听器，将这些更改应用到布局中，当它关闭时，返回到以前的UI。</p><p id="7a17" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">首先，将这些代码添加到kotlin文件中</p><figure class="lx ly lz ma gt jr"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="e882" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后创建一个监听器类</p><figure class="lx ly lz ma gt jr"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="84de" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在OnResume方法中，我们必须像下面这样使用它:</p><figure class="lx ly lz ma gt jr"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="13f1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> 2。图标和图像</strong></p><ul class=""><li id="deb2" class="mf mg iq ka b kb kc kf kg kj mh kn mi kr mj kv mk ml mm mn bi translated"><strong class="ka ir">第一种方式</strong>是针对不同的屏幕分辨率，在几个可绘制的文件夹中提供不同的图像和图标。对于图像，请<strong class="ka ir">不要使用固定值和添加填充。</strong></li></ul><p id="e220" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">drawable-ldpi//240 x320<br/>drawable-mdpi//320 x480<br/>drawable-hdpi//480 x800<br/>drawable-xhdpi//720 x 1280<br/>drawable-xxhdpi//1080 x 1920<br/>drawable-xxxhdpi//1440 x 2560</p><ul class=""><li id="aa65" class="mf mg iq ka b kb kc kf kg kj mh kn mi kr mj kv mk ml mm mn bi translated">第二种方法是使用九补丁位图，我们可以将它用于不同的屏幕尺寸。为了创建9补丁文件，我们右击PNG文件并选择<strong class="ka ir">创建9补丁文件</strong> <strong class="ka ir">文件</strong>。然后键入文件名，然后*.9.png文件将被创建，我们可以打开该文件并更改文件的大小等。(更多信息，参见<a class="ae lv" href="https://developer.android.com/studio/write/draw9patch" rel="noopener ugc nofollow" target="_blank">创建可调整大小的位图(9补丁文件))</a>。</li><li id="4833" class="mf mg iq ka b kb mo kf mp kj mq kn mr kr ms kv mk ml mm mn bi translated"><strong class="ka ir">第三种方式</strong>(我认为是最好的方式)是对图像使用vector，因为它兼容不同的大小(建议使用srcCompat设置image，而不是src，因为对于SVGs，在以前的android版本中使用src时会出现问题)</li></ul><h1 id="c4fc" class="mz na iq bd nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw bi translated">结论</h1><p id="d69c" class="pw-post-body-paragraph jy jz iq ka b kb nx kd ke kf ny kh ki kj nz kl km kn oa kp kq kr ob kt ku kv ij bi translated">正如本文所提到的，在多种设备上为我们的应用程序提供一个响应迅速的UI是非常重要的。如需更多帮助，您可以查看<a class="ae lv" href="https://material.io/design/layout/responsive-layout-grid.html#columns-gutters-and-margins" rel="noopener ugc nofollow" target="_blank"> materialIO </a>。感谢您阅读我的文章。</p></div></div>    
</body>
</html>