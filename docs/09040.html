<html>
<head>
<title>Tip of the Day: Ray Casting in Unity</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">日积月累:Unity中的光线投射</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/tip-of-the-day-ray-casting-in-unity-abcdc8700366?source=collection_archive---------25-----------------------#2021-06-29">https://levelup.gitconnected.com/tip-of-the-day-ray-casting-in-unity-abcdc8700366?source=collection_archive---------25-----------------------#2021-06-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="8023" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你看过我之前的进度文章(<a class="ae kl" href="https://medium.com/geekculture/zombie-progression-report-player-movement-shooting-unity-3d-3e4f2925a4a2" rel="noopener">僵尸进度报告:玩家移动&amp;射击Unity 3D </a>)，那么你就会知道我们为了射击而应用了光线投射。</p><p id="9187" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在本文中，我将更深入地解释这是如何实现的，以及这对Ray Cast意味着什么。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/5a82f2e366dda0e5d558d46fb2f1d5bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B5YABX-dECvHwUmayNmIKg.jpeg"/></div></div></figure></div><div class="ab cl ky kz hu la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ij ik il im in"><blockquote class="lf lg lh"><p id="2574" class="jn jo li jp b jq jr js jt ju jv jw jx lj jz ka kb lk kd ke kf ll kh ki kj kk ij bi translated">定义</p></blockquote><p id="1ef9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">光线投射是Unity物理系统的一部分，它是一种允许你从某个最大距离<strong class="jp ir">长度</strong>的<strong class="jp ir">原点</strong>向某个<strong class="jp ir">方向</strong>发射<strong class="jp ir">光线</strong>(像激光一样)的方法。射线和它碰撞的其他物体之间的确切接触点返回一个<strong class="jp ir">击中信息</strong>，这是非常有用的。</p><p id="02ce" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">光线投射的默认语法是:</p><pre class="kn ko kp kq gt lm ln lo lp aw lq bi"><span id="34fa" class="lr ls iq ln b gy lt lu l lv lw"><strong class="ln ir">Raycast</strong>(<a class="ae kl" href="https://docs.unity3d.com/ScriptReference/Vector3.html" rel="noopener ugc nofollow" target="_blank">Vector3</a> <strong class="ln ir">origin</strong>, <a class="ae kl" href="https://docs.unity3d.com/ScriptReference/Vector3.html" rel="noopener ugc nofollow" target="_blank">Vector3</a> <strong class="ln ir">direction</strong>, float <strong class="ln ir">maxDistance</strong> = Mathf.Infinity, int <strong class="ln ir">layerMask</strong> = DefaultRaycastLayers);</span></pre><p id="14b5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">LayerMask是可选的，它允许你过滤光线可以碰撞的对象。</p><blockquote class="lf lg lh"><p id="dcc4" class="jn jo li jp b jq jr js jt ju jv jw jx lj jz ka kb lk kd ke kf ll kh ki kj kk ij bi translated">实际例子</p></blockquote><p id="868c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在我们的僵尸射手项目中(本文顶部的链接),我们希望允许玩家射击武器。我们决定使用光线投射，以便从相机的中心(枪十字线)拍摄。</p><ol class=""><li id="34bc" class="lx ly iq jp b jq jr ju jv jy lz kc ma kg mb kk mc md me mf bi translated">使用新的输入系统，当玩家点击鼠标左键时，我们改变一个布尔值“_canShoot”。</li><li id="5457" class="lx ly iq jp b jq mg ju mh jy mi kc mj kg mk kk mc md me mf bi translated">定义一条来自相机中心的光线。Unity有一个非常方便的方法，叫做“ViewportPointToRay(new vector 3(x，y，z)”，它返回从相机的视口拍摄的光线。视口坐标是标准化的，并且相对于相机。相机左下方是(0，0)；右上方是(1，1)。所以中心是x=0.5f，y = 0.5f。</li><li id="250e" class="lx ly iq jp b jq mg ju mh jy mi kc mj kg mk kk mc md me mf bi translated">利用物理学。Raycast来检测我们上面拍摄的光线的命中信息。如果射线击中了目标，那么我们会调用目标的伤害方法对他们造成伤害。</li><li id="4bc9" class="lx ly iq jp b jq mg ju mh jy mi kc mj kg mk kk mc md me mf bi translated">用冷却系统封装所有这些。</li></ol><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi ml"><img src="../Images/75ba1fa1e346a76a9f15b5256751fe48.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wRZBMUtTDFyOhtzuhkyS5A.png"/></div></div><figcaption class="mm mn gj gh gi mo mp bd b be z dk translated">用光线投射拍摄</figcaption></figure><p id="30f8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是它在游戏中带血的样子。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi mq"><img src="../Images/8084d515e4ab3aecef1c27f53aff8257.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*AIhz-Bl8pEccg_BMVVVILw.gif"/></div></div><figcaption class="mm mn gj gh gi mo mp bd b be z dk translated">用光线投射拍摄</figcaption></figure><p id="e3d1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你想知道我是如何在射线和敌人之间的撞击点添加血液飞溅的，请在评论中告诉我。</p></div></div>    
</body>
</html>