<html>
<head>
<title>JavaScript Mistakes — Things We Shouldn’t Put into Our Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript错误——我们不应该在代码中出现的错误</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/javascript-mistakes-things-we-shouldnt-put-into-our-code-5554c716e359?source=collection_archive---------3-----------------------#2020-04-17">https://levelup.gitconnected.com/javascript-mistakes-things-we-shouldnt-put-into-our-code-5554c716e359?source=collection_archive---------3-----------------------#2020-04-17</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/bd7aaf4638203acb79b6b0eafe0c4d1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*CH2X54Bcl39EtwnA"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">照片由<a class="ae kf" href="https://unsplash.com/@neonbrand?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> NeONBRAND </a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="3eb0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">JavaScript是一种非常宽容的语言。编写可以运行但有错误的代码很容易。</p><p id="5084" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这篇文章中，我们将看看我们不应该放在代码中的东西。</p><h1 id="3a05" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">我们不应该在条件语句中使用赋值操作符</h1><p id="507b" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">我们不应该在条件赋值中使用赋值操作符。例如，以下可能是一个错误:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="33c0" class="mq lf it mm b gy mr ms l mt mu">if (title = "manager") {<br/><br/>}</span></pre><p id="4290" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">上面的代码将<code class="fe mv mw mx mm b">title</code>设置为<code class="fe mv mw mx mm b">'manager'</code>，而不是检查<code class="fe mv mw mx mm b">title</code>是否有值<code class="fe mv mw mx mm b">'manager'</code>。这可能是一个错误，因为大多数人想用<code class="fe mv mw mx mm b">===</code>操作符检查值，而不是在<code class="fe mv mw mx mm b">if</code>语句中进行赋值操作。</p><p id="2ea9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们真正想要的是:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="c237" class="mq lf it mm b gy mr ms l mt mu">if (title === "manager") {<br/><br/>}</span></pre><h1 id="aecd" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">我们不应该把控制台留在生产代码中</h1><p id="ce16" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated"><code class="fe mv mw mx mm b">console.log</code>和其他<code class="fe mv mw mx mm b">console</code>方法对于调试我们的代码非常有用。然而，在我们将它们投入生产之前，我们应该将它们删除，这样我们就不会无意中向用户暴露任何内容。</p><p id="f4ce" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因此，以下代码不应出现在生产代码中:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="e08d" class="mq lf it mm b gy mr ms l mt mu">console.log("hello.");<br/>console.warn("warning.");<br/>console.error("error.");</span></pre><p id="80a9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">其他的<code class="fe mv mw mx mm b">console</code>方法调用也不应该被提交。唯一的例外是我们在Node.js应用程序中使用<code class="fe mv mw mx mm b">console</code>向用户输出数据。</p><p id="501e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">那么我们可能想忽略这个规则。</p><h1 id="f4f4" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">我们不应该把常量表达式放在条件中</h1><p id="f88e" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">常量表达式很可能是一个错误，除非我们是故意这样做的。例如:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="4217" class="mq lf it mm b gy mr ms l mt mu">if (false) {<br/>    foo();<br/>}</span></pre><p id="5e92" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">上面的代码永远不会运行，因为里面的条件总是<code class="fe mv mw mx mm b">false</code>。</p><p id="d58d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">同样，当在循环中使用常量条件时，我们可能会得到无限循环或从不运行的循环。例如，下面是一个无限循环:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="2969" class="mq lf it mm b gy mr ms l mt mu">while (true) {<br/>    foo();<br/>}</span></pre><p id="ff4d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在大多数情况下，我们可能不希望这样。如果三进制表达式中的条件是常数，那么它就没什么用，因为它总是返回一个值。</p><p id="34d5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="2581" class="mq lf it mm b gy mr ms l mt mu">let result = true ? 'foo' : 'bar';</span></pre><p id="5155" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">那么<code class="fe mv mw mx mm b">result</code>总是<code class="fe mv mw mx mm b">'foo'</code>，因为条件是<code class="fe mv mw mx mm b">true</code>，所以总是返回第一个值。</p><p id="e3db" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">更有意义的代码示例包括:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="b51c" class="mq lf it mm b gy mr ms l mt mu">while (true) {<br/>  foo();<br/>  if (conditionFalse()){<br/>    break;<br/>  }<br/>}</span></pre><h1 id="749c" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">在JavaScript正则表达式中放置控制字符</h1><p id="e561" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">控制字符在ASCII到31的范围内。他们是特殊的隐形人物。JavaScript字符串中很少使用这些字符，所以这可能是一个错误。</p><p id="19ac" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，下面的内容可能不是我们想要的:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="5062" class="mq lf it mm b gy mr ms l mt mu">const pattern1 = <!-- -->/\x00/;<br/>const pattern2 = new RegExp("\x00");</span></pre><p id="3cba" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们很少想要匹配空字符，也就是ASCII中的字符0。</p><h1 id="7843" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">我们不应该将调试器语句放在生产代码中</h1><p id="3a09" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">顾名思义，<code class="fe mv mw mx mm b">debugger</code>用于调试。它会暂停该行中的程序，以便我们可以检查代码中当前点的项目。</p><p id="5feb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">此外，使用<code class="fe mv mw mx mm b">debugger</code>调试代码还有更好的方法。生产代码中绝对不应该有<code class="fe mv mw mx mm b">debugger</code>，因为它会暂停用户正在使用的程序，如果它存在的话。</p><p id="861d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，下面是一个错误:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="6426" class="mq lf it mm b gy mr ms l mt mu">const isTrue = (x) =&gt; {<br/>  debugger;<br/>  return x === true;<br/>}</span></pre><p id="7522" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在生产代码中，我们应该写:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="4429" class="mq lf it mm b gy mr ms l mt mu">const isTrue = (x) =&gt; {<br/>  return x === true;<br/>}</span></pre><figure class="mh mi mj mk gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi my"><img src="../Images/f801db7925d27bb1a7104663b4246d85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xlydNAeUaWTeNSVF"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">由<a class="ae kf" href="https://unsplash.com/@officestock?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">塞巴斯蒂安·赫尔曼</a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><h1 id="db18" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">我们不应该在函数中有重复的参数</h1><p id="e6dc" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">具有相同的多个参数意味着最后出现的参数采用具有相同名称的最后一个参数的值。</p><p id="72ad" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，如果我们有:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="8119" class="mq lf it mm b gy mr ms l mt mu">const foo = (a, b, a) =&gt; {<br/>  console.log(a);<br/>}</span></pre><p id="4f8b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">那么当我们如下调用<code class="fe mv mw mx mm b">foo</code>时:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="ddd8" class="mq lf it mm b gy mr ms l mt mu">foo(1, 2, 3);</span></pre><p id="0420" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们看到记录的值为3。这会引起混乱，很可能是个错误。两个参数同名没有太大意义。</p><p id="9428" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">相反，我们应该重命名第三个参数:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="8128" class="mq lf it mm b gy mr ms l mt mu">const foo = (a, b, c) =&gt; {<br/>  console.log(a);<br/>}</span></pre><p id="dd24" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">或者去掉第二个<code class="fe mv mw mx mm b">a</code>:</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="53c8" class="mq lf it mm b gy mr ms l mt mu">const foo = (a, b) =&gt; {<br/>  console.log(a);<br/>}</span></pre><h1 id="bc13" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">结论</h1><p id="4800" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">由于其宽容的本质，在编写JavaScript代码时可能会犯许多种错误。我们永远不应该留下类似<code class="fe mv mw mx mm b">console</code>或<code class="fe mv mw mx mm b">debugger</code>的调试代码。唯一的例外是当我们在节点应用程序中使用<code class="fe mv mw mx mm b">console</code>向用户输出值时。</p><p id="77f7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">条件中的常量表达式最容易出错。在条件语句中，我们编写总是运行或从不运行的代码。</p><p id="3d9f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果它们在循环中，那么它们要么创建一个无限循环，要么创建一个永不运行的循环。</p><p id="2970" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在三元表达式中，我们创建一个总是赋值相同的表达式。因此，它很可能不是很有用，是一个错误。</p><p id="87fc" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最后，函数中不应该有重复的参数名。这会造成混乱，因为传入的最后一个值会覆盖赋给相同参数名的第一个值。</p></div></div>    
</body>
</html>