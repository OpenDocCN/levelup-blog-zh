<html>
<head>
<title>Screen Orientation/Layout in SwiftUI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">SwiftUI中的屏幕方向/布局</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/screen-orientation-layout-in-swiftui-32878cf29a8b?source=collection_archive---------7-----------------------#2021-02-01">https://levelup.gitconnected.com/screen-orientation-layout-in-swiftui-32878cf29a8b?source=collection_archive---------7-----------------------#2021-02-01</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="3bcb" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">布局的挑战是知道你有多少空间可以利用。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/182bd950d1ecb29b4215b5e8a6d4ce63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vo3c51QnMAMzVWop-u3THA.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">Avel Chuklanov 在<a class="ae ky" href="https://unsplash.com/@chuklanov?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="bce7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">现在苹果每年至少两次推出新硬件。具有新分辨率、新屏幕和新功能的新硬件。随着他们这样做，计算出你的应用程序必须在多大的屏幕上运行变得越来越困难。</p><p id="c0e2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">iOS中多任务处理的引入让你雪上加霜，我们完成了一项不可能完成的任务。值得庆幸的是，这一点没有被试图解决这个问题的苹果公司忽略。有一个视频专门介绍了他们对2016年挑战的解决方案，即特质<a class="ae ky" href="https://developer.apple.com/videos/play/wwdc2016/222/" rel="noopener ugc nofollow" target="_blank">在这里</a>。我想每个人都还在努力解决这个问题，最近一次是在WWDC 2019这个视频开始27分钟的时候。</p><p id="68cd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">关于这个问题的文档，总结得很好，看一看，向下，向下，再向下一点。</p><div class="lv lw gp gr lx ly"><a href="https://developer.apple.com/design/human-interface-guidelines/ios/visual-design/adaptivity-and-layout/" rel="noopener  ugc nofollow" target="_blank"><div class="lz ab fo"><div class="ma ab mb cl cj mc"><h2 class="bd iu gy z fp md fr fs me fu fw is bi translated">适应性和布局——视觉设计——iOS——人机界面指南——苹果开发者</h2><div class="mf l"><h3 class="bd b gy z fp md fr fs me fu fw dk translated">人们通常希望能够在他们的所有设备上和任何环境下使用他们最喜欢的应用程序。在iOS应用程序中…</h3></div><div class="mg l"><p class="bd b dl z fp md fr fs me fu fw dk translated">developer.apple.com</p></div></div></div></a></div><p id="6870" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">不过，好吧，理论够了，代码呢？现在你可能在想，但是等等——我已经知道怎么做了。我用旧的UIKit代码覆盖了它。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="00d5" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这在iPhone上运行得相当好，但在多个窗口运行时会出现问题——当窗口大小相等时，会报告风景。谁知道iPhones什么时候会支持多任务处理…错了。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><p id="8f70" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是好吧，是的，我知道了——解决方法很简单。你是SwiftUI中的几何学家，不。如果垂直方向大于水平方向，那么你是纵向的，否则你一定是横向的。我也是这么想的，所以写了这个小程序。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="5f64" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">一个有效的方法，但是——只在iPhones上有效。更糟糕的是，geometryReader似乎根本不支持多窗口，甚至从不承认你正在运行它们。是几何读本里的bug可能吧。</p></div><div class="ab cl mj mk hx ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="im in io ip iq"><p id="a74c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">好吧，为什么我们这么愚蠢，难道苹果的解决方案不起作用。我们可以通过SwiftUI @环境变量访问trait类。这里显示了一个非常基本的实现。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="8d03" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">但是不，打住，你不会想同时检查这两项，是吗？这段代码不能正常工作。你需要对其中一个采取行动，但不是两个都要。为了修理它，我加了一把锁。</p><pre class="kj kk kl km gt mq mr ms mt aw mu bi"><span id="040a" class="mv mw it mr b gy mx my l mz na">@State var lock = false</span><span id="74fc" class="mv mw it mr b gy nb my l mz na">if !lock {<br/>  lock = true<br/>  print("hz \(horizontalSizeClass) vt \(verticalSizeClass)")<br/>  DispatchQueue.main.asyncAfter(deadline: .now() + 2) {<br/>    lock = false<br/>  }<br/>}</span></pre><p id="edf6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">这将确保我们对其中一个消息采取行动，而不是同时对两个消息采取行动。除此之外，您需要检查返回的两个值，在这一点上，您可以决定将返回的值与方向匹配。当然，这种写法不会让你每两秒钟改变一次方向。</p><p id="f155" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">所有这些都促使我结束这篇简短但有希望有用的关于这个主题的论文。更多文章请关注我的medium.com。我在2019年发表了近100篇，希望在2020年做得更多。</p><div class="lv lw gp gr lx ly"><a href="https://marklucking.medium.com" rel="noopener follow" target="_blank"><div class="lz ab fo"><div class="ma ab mb cl cj mc"><h2 class="bd iu gy z fp md fr fs me fu fw is bi translated">马克·卢金-中号</h2><div class="mf l"><h3 class="bd b gy z fp md fr fs me fu fw dk translated">阅读马克.卢金在媒介上的作品。编码35年以上，喜欢使用和学习Swift/iOS开发…</h3></div><div class="mg l"><p class="bd b dl z fp md fr fs me fu fw dk translated">marklucking.medium.com</p></div></div><div class="nc l"><div class="nd l ne nf ng nc nh ks ly"/></div></div></a></div><p id="9c8a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">保持冷静，继续编码。</p></div></div>    
</body>
</html>