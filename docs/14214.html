<html>
<head>
<title>6 Steps to Improve HTML Images For Users and Developers</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为用户和开发者改进HTML图像的6个步骤</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/6-steps-to-improve-html-images-for-users-developers-9e6025ab45b8?source=collection_archive---------27-----------------------#2022-11-08">https://levelup.gitconnected.com/6-steps-to-improve-html-images-for-users-developers-9e6025ab45b8?source=collection_archive---------27-----------------------#2022-11-08</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/149ddfab03f1aa76c04659c0e32028cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Pw2LqM_vYu-MotfxZNW4lw.png"/></div></div></figure><figure class="kb kc kd ke gt ju"><div class="bz fp l di"><div class="kf kg l"/></div></figure><p id="4168" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">TLDR:</p><ul class=""><li id="e038" class="lf lg it kj b kk kl ko kp ks lh kw li la lj le lk ll lm ln bi translated"><code class="fe lo lp lq lr b">&lt;img&gt;</code> <strong class="kj iu">带刚</strong> <code class="fe lo lp lq lr b">src</code>:容易实现。良好的开发者体验。没有响应图像。没有后退的现代格式。可能使用更多带宽。最差的用户体验。</li><li id="f1db" class="lf lg it kj b kk ls ko lt ks lu kw lv la lw le lk ll lm ln bi translated"><code class="fe lo lp lq lr b">&lt;img&gt;</code> <strong class="kj iu">带</strong> <code class="fe lo lp lq lr b">srcset</code> <strong class="kj iu">属性</strong>:工作中等。Ok开发者体验。支持响应速度快、带宽低的图像。没有后退的现代格式。将潜在的节约留在桌面上。好的用户体验。</li><li id="61f2" class="lf lg it kj b kk ls ko lt ks lu kw lv la lw le lk ll lm ln bi translated"><code class="fe lo lp lq lr b">&lt;picture&gt;</code> <strong class="kj iu">带多个</strong> <code class="fe lo lp lq lr b">&lt;source&gt;</code> <strong class="kj iu">和</strong> <code class="fe lo lp lq lr b">srcset</code>:支持响应式图像和带后退的现代格式。宁愿往我眼睛里喷墨西哥胡椒汁。</li><li id="db2f" class="lf lg it kj b kk ls ko lt ks lu kw lv la lw le lk ll lm ln bi translated"><code class="fe lo lp lq lr b">&lt;img&gt;</code> <strong class="kj iu">带just </strong> <code class="fe lo lp lq lr b">src</code> <strong class="kj iu">带图像管理器</strong>:易于实现，自动以最佳尺寸和格式发送图像。开发者和用户双赢！！！</li></ul></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><p id="7f7c" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">让我们说，我们只有一个基本的网站，是从我的领域加载图像。我们的代码可能是这样的:</p><pre class="kb kc kd ke gt me lr mf mg aw mh bi"><span id="2566" class="mi mj it lr b gy mk ml l mm mn">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;<br/>&lt;body&gt;<br/>  &lt;img <br/>    src="https://images.austingil.com/wp-content/uploads/Command-Line-Blog-Cover.png"<br/>    alt="Command line terminal and old PC with an indigo brush stroke in the background."<br/>  &gt;<br/>&lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="eb6e" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">一个带有单个图像标签的HTML文档，该标签有一个<code class="fe lo lp lq lr b"><a class="ae mo" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/img#attr-src" rel="noopener ugc nofollow" target="_blank">src</a></code>和一个<code class="fe lo lp lq lr b"><a class="ae mo" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/img#attr-alt" rel="noopener ugc nofollow" target="_blank">alt</a></code>属性。这在技术上是可行的。它提供了预期的图像，但是这个图像有几个问题。</p><figure class="kb kc kd ke gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mp"><img src="../Images/43ccd2b3d49dda73531e0a1b83e4e76d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*rqFYUEICWQk-7Z4q.png"/></div></div></figure><p id="461f" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">在大屏幕上，这个图像就可以了，但是对于使用小屏幕设备的用户来说，1200像素宽的图像意味着他们不得不下载比他们需要的更大的图像。这可能需要更长的时间来下载，并可能花费他们的数据计划的钱。</p><h1 id="dc71" class="mq mj it bd mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm bi translated">步骤1:优化和调整图像大小</h1><p id="d353" class="pw-post-body-paragraph kh ki it kj b kk nn km kn ko no kq kr ks np ku kv kw nq ky kz la nr lc ld le im bi translated">这第一步是关键的一步，但也是我认为大多数人都熟悉的一步，所以我不会走得太远。</p><ol class=""><li id="0929" class="lf lg it kj b kk kl ko kp ks lh kw li la lj le ns ll lm ln bi translated">你的网站上的图片应该只有他们需要的那么大。如果你的图片只有600像素宽，400像素高，你就不应该让人们下载1200x800px像素的图片。</li><li id="9154" class="lf lg it kj b kk ls ko lt ks lu kw lv la lw le ns ll lm ln bi translated">大多数网站不需要尽可能高质量的图片。通过压缩图像，您可以删除大量不必要的数据，而不会损失质量。</li></ol><p id="6c8c" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">Squoosh 是一个非常棒的手动应用程序。</p><p id="81df" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">如果图片在你的GitHub repo中，你也可以用<a class="ae mo" href="https://imgbot.net/" rel="noopener ugc nofollow" target="_blank"> imgbot </a>自动完成。</p><h1 id="7342" class="mq mj it bd mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm bi translated">步骤2:创建响应图像</h1><p id="1c53" class="pw-post-body-paragraph kh ki it kj b kk nn km kn ko no kq kr ks np ku kv kw nq ky kz la nr lc ld le im bi translated">图像可以有一个<code class="fe lo lp lq lr b"><a class="ae mo" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/img#attr-srcset" rel="noopener ugc nofollow" target="_blank">srcset</a></code>属性，允许我们根据某些设备特性(如设备宽度)为图像定义多个来源。</p><p id="ff13" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">我们可以向图像标签添加一个<code class="fe lo lp lq lr b">srcset</code>属性，如下所示:</p><pre class="kb kc kd ke gt me lr mf mg aw mh bi"><span id="4cef" class="mi mj it lr b gy mk ml l mm mn">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;<br/>&lt;body&gt;<br/>  &lt;img<br/>    <strong class="lr iu">srcset="<br/>      https://austingil.com/wp-content/uploads/Command-Line-Blog-Cover-1080x540.png 1080w,<br/>      https://austingil.com/wp-content/uploads/Command-Line-Blog-Cover-480x240.png 480w,<br/>      https://austingil.com/wp-content/uploads/Command-Line-Blog-Cover-200x100.png 200w,<br/>      https://austingil.com/wp-content/uploads/Command-Line-Blog-Cover-768x384.png 768w,<br/>      https://austingil.com/wp-content/uploads/Command-Line-Blog-Cover.png 1200w"</strong><br/>    src="https://cdn.statically.io/img/austingil.com/f=auto%2Cq=70/wp-content/uploads/Command-Line-Blog-Cover.png"<br/>    alt="Command line terminal and old PC with an indigo brush stroke in the background."<br/>  &gt;<br/>&lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="9bba" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">我链接到五个不同大小的五个不同图像，并定义它们对应的视口宽度。如果我们在浏览器中打开我们的图像，视觉上没有什么变化。但是在引擎盖下有一些改进。</p><p id="254b" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">当我们在不同的屏幕上重新加载时，打开devtools网络选项卡。</p><p id="74d1" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">在一个大屏幕上，我们会看到全尺寸的图像被下载(Command-Line-Blog-Cover.png)，就像我们以前做的那样。没什么特别的。</p><figure class="kb kc kd ke gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mp"><img src="../Images/1cc5c3d7d7b09d1519e6a8526ad570ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*gYoW8IMxgo3FwBht.png"/></div></div></figure><p id="bd16" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">但是如果我们在200像素或更窄的屏幕上开始，我们加载200x100像素的图像(命令行-博客-封面-200x100.png)。</p><figure class="kb kc kd ke gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mp"><img src="../Images/92fe7030e110e1e17224b5104961dcf2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*fAfBb13ziSk6j7Qu.png"/></div></div></figure><p id="bcc2" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">对于用户来说，这个尺寸将会更小，下载速度也会更快。</p><p id="4204" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">只发送较小的图像有一个问题，如果用户最初在小屏幕上加载页面，然后将浏览器的大小调整为更大，会发生什么？在大屏幕上拉伸小图像会使其像素化。</p><p id="e6e5" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">对于<code class="fe lo lp lq lr b">srcset</code>属性，这种情况不会发生(假设我们提供了正确的图像)，因为当从最小屏幕调整到最大屏幕时，新的图像会根据它们的断点下载。</p><figure class="kb kc kd ke gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mp"><img src="../Images/36ccd81b156d4b2bd5533c958d68a2f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*HLpQhZIiz_Ard3-m.png"/></div></div></figure><p id="383f" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">方便的是，同样的行为不会发生在另一个方向，大屏幕到小屏幕，因为毕竟，你可以在一个较小的屏幕上提供一个大的图像，它可以缩小而不损失质量。当屏幕变小时，你不希望下载额外的图像，因为那会使用更多的数据而没有任何额外的好处。</p><p id="ddd5" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">这确实是一种通过节省带宽和以合适的大小提供合适的图像来改善用户体验的便捷方式，但仍有改进的空间。</p><h1 id="16c2" class="mq mj it bd mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm bi translated">第三步:使用现代图像格式</h1><p id="6304" class="pw-post-body-paragraph kh ki it kj b kk nn km kn ko no kq kr ks np ku kv kw nq ky kz la nr lc ld le im bi translated">我们正在加载的图像是一个PNG，但是现代浏览器支持新的图像格式，比如<a class="ae mo" href="https://en.wikipedia.org/wiki/WebP" rel="noopener ugc nofollow" target="_blank"> WebP </a>或者<a class="ae mo" href="https://en.wikipedia.org/wiki/AVIF" rel="noopener ugc nofollow" target="_blank"> AVIF </a>。这些格式提供了更高的压缩率，而没有明显的数据丢失，这意味着我们可以在更小的文件大小中有效地提供相同的图像。</p><p id="ffa2" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">浏览器再次用<a class="ae mo" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/picture" rel="noopener ugc nofollow" target="_blank"> HTML </a> <code class="fe lo lp lq lr b"><a class="ae mo" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/picture" rel="noopener ugc nofollow" target="_blank">&lt;picture&gt;</a></code> <a class="ae mo" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/picture" rel="noopener ugc nofollow" target="_blank">元素</a>覆盖了我们。</p><p id="d451" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">类似于<code class="fe lo lp lq lr b">srcset</code>属性，图片元素允许我们根据设备特性定义不同的图像源。</p><p id="2161" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">因此，我们可以根据设备宽度或不同的像素密度提供不同的图像。但是将图片元素与<code class="fe lo lp lq lr b">srcset</code>属性区分开来的一点是我们可以针对不同的mime类型。</p><p id="4ea4" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">让我们在示例中添加一个图片元素，如果浏览器支持的话，该元素包含AVIF和WebP格式。当然，我们也希望继续提供响应版本。</p><pre class="kb kc kd ke gt me lr mf mg aw mh bi"><span id="ae96" class="mi mj it lr b gy mk ml l mm mn">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;<br/>&lt;body&gt;<br/>  <strong class="lr iu">&lt;picture&gt;<br/>    &lt;source<br/>      type="image/avif"<br/>      srcset="<br/>      https://austingil.com/wp-content/uploads/Command-Line-Blog-Cover.avif 1200w,<br/>      https://austingil.com/wp-content/uploads/Command-Line-Blog-Cover-1080x540.avif 1080w,<br/>      https://austingil.com/wp-content/uploads/Command-Line-Blog-Cover-768x384.avif 768w,<br/>      https://austingil.com/wp-content/uploads/Command-Line-Blog-Cover-480x240.avif 480w,<br/>      https://austingil.com/wp-content/uploads/Command-Line-Blog-Cover-200x100.avif 200w"<br/>    &gt;<br/>    &lt;source<br/>      type="image/webp"<br/>      srcset="<br/>      https://austingil.com/wp-content/uploads/Command-Line-Blog-Cover.webp 1200w,<br/>      https://austingil.com/wp-content/uploads/Command-Line-Blog-Cover-1080x540.webp 1080w,<br/>      https://austingil.com/wp-content/uploads/Command-Line-Blog-Cover-768x384.webp 768w,<br/>      https://austingil.com/wp-content/uploads/Command-Line-Blog-Cover-480x240.webp 480w,<br/>      https://austingil.com/wp-content/uploads/Command-Line-Blog-Cover-200x100.webp 200w"<br/>    &gt;</strong><br/>    &lt;img <br/>      src="https://cdn.statically.io/img/austingil.com/f=auto%2Cq=70/wp-content/uploads/Command-Line-Blog-Cover.png"<br/>      alt="Command line terminal and old PC with an indigo brush stroke in the background."<br/>    &gt;<br/>  <strong class="lr iu">&lt;/picture&gt;</strong><br/>&lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="fcfe" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">(我们不需要在<code class="fe lo lp lq lr b">&lt;img&gt;</code>标签上添加<code class="fe lo lp lq lr b">srcset</code>，因为这是不支持<code class="fe lo lp lq lr b">srcset</code>的老浏览器的备用方案。)</p><p id="d338" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">好了，我们得到了一个图像，它只能以最小的尺寸给用户提供最现代的图像格式。</p><p id="9351" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">上面的代码不就是…好看吗…？</p><p id="7a00" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">真的让你想添加新的图片到你的网站，对不对？</p><p id="1fc2" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">对！？！？</p><p id="6008" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi">(ಥ◡ಥ)</p><p id="08ce" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">天啊。不要！我们做了什么！？！？</p><h1 id="725d" class="mq mj it bd mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm bi translated">第四步:开始质疑生活选择</h1><p id="f0af" class="pw-post-body-paragraph kh ki it kj b kk nn km kn ko no kq kr ks np ku kv kw nq ky kz la nr lc ld le im bi">…</p><p id="adaf" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">（🎶你好，黑暗，我的老朋友…🎶)</p><p id="81b3" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi">…</p><h1 id="e72f" class="mq mj it bd mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm bi translated">第五步:简化现代图像格式</h1><p id="a9c3" class="pw-post-body-paragraph kh ki it kj b kk nn km kn ko no kq kr ks np ku kv kw nq ky kz la nr lc ld le im bi translated">好了，现在我们已经解决了这个问题，很明显，上面的解决方案并不好。</p><p id="ab8c" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">我们需要不同版本的图像，以适应我们想要的每种格式和设备宽度。从上面的例子来看，这是同一张图片的11个版本(5个AVIF，5个网页，1个PNG)。</p><p id="7ed0" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">尽管浏览器为我们提供了提供更好的图像和更好的用户体验的功能，但这是以牺牲开发者体验为代价的。</p><p id="0efb" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">(谁愿意为此买单呢？不是我！)</p><p id="292d" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">我们可以在上传图像时自动生成不同的格式和大小，然后将这些细节存储在数据库中。有一些工具可以提供帮助，比如<code class="fe lo lp lq lr b"><a class="ae mo" href="https://www.npmjs.com/package/sharp" rel="noopener ugc nofollow" target="_blank">sharp</a></code>，但这仍然需要大量的工作。我很少看到人们这样做，因为要么工作量太大，要么他们根本不考虑。</p><p id="f385" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">我的建议是外包。</p><p id="6745" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">今天我将使用<a class="ae mo" href="https://www.akamai.com/products/image-and-video-manager?utm_source=influencer&amp;utm_medium=blog&amp;utm_campaign=austingil" rel="noopener ugc nofollow" target="_blank"> Akamai图像和视频管理器</a>，因为这是我最熟悉的服务，尽管也有其他人做同样的工作。主要目标是为用户提供最好的图像，而不会让开发人员发疯。</p><p id="d3cc" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">我在images.austingil.com建立了一个图像管理器的实例。</p><p id="fb08" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">要从我的域中添加图像，我可以在常规的图像URL中添加“images”前缀。于是“austing il . com/WP-content/uploads/Command-Line-Blog-cover . png”就变成了“images . austing il . com/WP-content/uploads/Command-Line-Blog-cover . png”。</p><p id="1714" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">没什么太有趣的。</p><p id="ae80" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">但是让我们回到我们的代码，去掉<code class="fe lo lp lq lr b">&lt;picture&gt;</code>元素，替换旧的URL，看看我们能做什么:</p><pre class="kb kc kd ke gt me lr mf mg aw mh bi"><span id="ea9c" class="mi mj it lr b gy mk ml l mm mn">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;<br/>&lt;body&gt;<br/>  &lt;img<br/>    srcset="<br/>      https://images.austingil.com/wp-content/uploads/Command-Line-Blog-Cover-1080x540.png 1080w,<br/>      https://images.austingil.com/wp-content/uploads/Command-Line-Blog-Cover-480x240.png 480w,<br/>      https://images.austingil.com/wp-content/uploads/Command-Line-Blog-Cover-200x100.png 200w,<br/>      https://images.austingil.com/wp-content/uploads/Command-Line-Blog-Cover-768x384.png 768w,<br/>      https://images.austingil.com/wp-content/uploads/Command-Line-Blog-Cover.png 1200w"<br/>    src="https://cdn.statically.io/img/austingil.com/f=auto%2Cq=70/wp-content/uploads/Command-Line-Blog-Cover.png"<br/>    alt="Command line terminal and old PC with an indigo brush stroke in the background."<br/>  &gt;<br/>&lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="5b24" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">与在AVIF和WebP中使用<code class="fe lo lp lq lr b">&lt;picture&gt;</code>元素相比，我认为没有人会抱怨这一点。这肯定是少干活，但是结果呢？</p><p id="38b0" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">如果我重新加载页面，我们可以看到同样的图像出现(“Command-Line-Blog-Cover.png”)，但是如果我们查看响应标题，事情会变得有点有趣。</p><figure class="kb kc kd ke gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mp"><img src="../Images/08cabd076d5f0c4375d0e0aaa2c843f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*dYlNEh_v2-ghJ-kg.png"/></div></div></figure><p id="a81a" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">虽然请求的是PNG图像，但响应实际上是发送一个WebP数据。这导致一个更小的图像尺寸，这意味着只需打开图像管理器，我已经为我的用户节省了带宽，而无需做任何事情。</p><h1 id="f859" class="mq mj it bd mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm bi translated">步骤6:简化响应图像</h1><p id="9cdf" class="pw-post-body-paragraph kh ki it kj b kk nn km kn ko no kq kr ks np ku kv kw nq ky kz la nr lc ld le im bi translated">我们改进了格式，但是相应的图像大小呢？</p><p id="f9fc" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">我仍然将<code class="fe lo lp lq lr b">srcset</code>属性设置为在小屏幕上显示小图像，在大屏幕上显示大图像。但是该系统仍然依赖于提供具有五种不同分辨率的五种不同图像。</p><p id="8133" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">还是很痛苦。</p><p id="da14" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">仅仅提供上传功能就已经是一个很大的功能了，更不用说调整大小和存储不同的图像了。幸运的是，因为我们使用了图像管理器，我们实际上可以使这个过程简单得多。</p><p id="6edb" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">实际上，我将多次引用同一个图像，而不是使用五个不同大小的不同图像。但是我将添加一个查询字符串参数，它明确地定义了我想要的目标大小。</p><pre class="kb kc kd ke gt me lr mf mg aw mh bi"><span id="4fa4" class="mi mj it lr b gy mk ml l mm mn">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;<br/>&lt;body&gt;<br/>  &lt;img<br/>    srcset="<br/>      https://images.austingil.com/wp-content/uploads/Command-Line-Blog-Cover.png?imwidth=1080 1080w,<br/>      https://images.austingil.com/wp-content/uploads/Command-Line-Blog-Cover.png?imwidth=480 480w,<br/>      https://images.austingil.com/wp-content/uploads/Command-Line-Blog-Cover.png?imwidth=200 200w,<br/>      https://images.austingil.com/wp-content/uploads/Command-Line-Blog-Cover.png?imwidth=768 768w,<br/>      https://images.austingil.com/wp-content/uploads/Command-Line-Blog-Cover.png 1200w"<br/>    src="https://cdn.statically.io/img/austingil.com/f=auto%2Cq=70/wp-content/uploads/Command-Line-Blog-Cover.png"<br/>    alt="Command line terminal and old PC with an indigo brush stroke in the background."<br/>  &gt;<br/>&lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="e38f" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">注意，现在每个图像URL都指向同一个“Command-Line-Blog-Cover.png”文件，但是其中一些附加了一个额外的<code class="fe lo lp lq lr b"><a class="ae mo" href="https://techdocs.akamai.com/ivm/reference/test-images-on-demand" rel="noopener ugc nofollow" target="_blank">imwidth</a></code>查询字符串。</p><p id="758c" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">如果我像以前一样在这个小屏幕上重新加载并调整到一个更大的屏幕，我们会看到类似的行为。不同尺寸的不同图像被加载到各自的屏幕尺寸中。</p><figure class="kb kc kd ke gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mp"><img src="../Images/88f9fc4d7efa60eda6ef7c7db6ccfa66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*fhf4iRdp96qSZr6A.png"/></div></div></figure><p id="e1ad" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">但是这里有一个很大的不同。我们不必创建、上传和管理五个不同大小的不同图像，而只需担心一个图像。通过奇异字符串参数生成不同的大小。</p><p id="16e4" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">这比其他方式要少很多工作，特别是如果你使用基于组件的框架。</p><p id="7287" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">但是我们可以做更少的工作！</p><p id="66e8" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">我们可以回到只使用图像URL，让图像管理器为我们选择合适的大小。</p><p id="e35e" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">为了展示它，我喜欢在一个新标签中打开图片，而不是在网站上。将鼠标悬停在浏览器选项卡上会显示图像的尺寸，1200x600px。</p><figure class="kb kc kd ke gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mp"><img src="../Images/3efca8fe12e550026c85d14a31585c74.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Sx3aW5f1S-ukfWik.png"/></div></div></figure><p id="b874" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">如果我打开我的devtools，我可以转到Elements选项卡，模拟不同的设备，如iPhone SE</p><figure class="kb kc kd ke gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mp"><img src="../Images/160859f4032a1928eee0a221e837b6b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*y5oh2pg-8wePOarK.png"/></div></div></figure><p id="e41b" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">当我重新加载时，有趣的事情发生了。</p><figure class="kb kc kd ke gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mp"><img src="../Images/a6783bb7f31500d8edf85e05aeb52708.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*SoDRon5CXz3w_zXh.png"/></div></div></figure><p id="a09c" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">尽管URL完全相同，但我可以看到图像的大小只有一半。将鼠标悬停在选项卡上可以确认尺寸为640x320px。</p><p id="42be" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">最棒的是。决定提供哪个图像的所有工作都是在我(开发人员)不做任何事情的情况下进行的。每个请求都会自动发送设备特征，Image Manager会以一个小得多的图像进行响应。</p><p id="0509" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">老实说，我无法解释它是如何工作的。这太神奇了，超级酷，让我的生活更轻松，让我的用户生活得更好。</p><p id="42d5" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">(如果你真的很好奇它是如何工作的，<a class="ae mo" href="https://twitter.com/heyAustinGil" rel="noopener ugc nofollow" target="_blank">在Twitter上联系我</a>，我会帮你找到答案。)</p><p id="8f25" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">如果你是<a class="ae mo" href="https://www.akamai.com/" rel="noopener ugc nofollow" target="_blank"> Akamai </a>的用户，并且你没有使用这个功能，你应该马上使用它！</p><h1 id="9e68" class="mq mj it bd mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm bi translated">可选的“我是坏蛋”步骤:自己动手！</h1><p id="02f0" class="pw-post-body-paragraph kh ki it kj b kk nn km kn ko no kq kr ks np ku kv kw nq ky kz la nr lc ld le im bi translated">我还想为不是Akamai客户的人分享一些替代方案。有两个开源项目看起来提供了相似的特性，尽管我没有亲自使用过它们。</p><p id="b0cd" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">其中一个叫做<a class="ae mo" href="https://github.com/imgproxy/imgproxy" rel="noopener ugc nofollow" target="_blank"> imgproxy </a>。另一个叫做<a class="ae mo" href="https://github.com/thumbor/thumbor" rel="noopener ugc nofollow" target="_blank">拇指或者</a>。只要你习惯使用Docker，它们看起来都很容易安装。</p><p id="19ae" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">我真的很喜欢廉价而强大的VPS，如果你想试着推出其中任何一个的实例，你可以使用这个链接获得100美元的信用。</p><p id="edb5" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated"><a class="ae mo" href="https://www.linode.com/akatube?utm_source=austin_gil&amp;utm_medium=blog&amp;utm_campaign=blog-austin_gil-dev_advocate-austin_gil&amp;utm_content=&amp;utm_term=" rel="noopener ugc nofollow" target="_blank">linode.com/akatube</a></p><p id="9da9" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">我是DIY方法的忠实粉丝，但我不认为它没有缺点(我的意思是，除了设置和维护)。我不确定这些服务的图片托管在哪里。如果它们和安装在同一个服务器上，那么有两个可能的问题。</p><ol class=""><li id="de0b" class="lf lg it kj b kk kl ko kp ks lh kw li la lj le ns ll lm ln bi translated">如果你正在生成同一张图片的多个版本，这些版本必须存在于某个地方。如果他们住在同一个VPS上，费用会更高。尝试为图像使用类似于<a class="ae mo" href="https://www.linode.com/products/object-storage/" rel="noopener ugc nofollow" target="_blank">对象存储</a>的东西，因为这样有更便宜的存储费用。</li><li id="6d59" class="lf lg it kj b kk ls ko lt ks lu kw lv la lw le ns ll lm ln bi translated">从同一位置加载图像可能会导致延迟问题。我真的很喜欢Image Manager提供的Akamai CDN网络，因此图像总是来自离用户最近的地方。这可以大大加快下载速度。</li></ol><p id="496c" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">也就是说，我认为它仍然值得一试。</p><p id="3a28" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">如果你真的让它工作了，并且你喜欢它，请回来让我知道它进行得如何。哪些进展顺利，哪些没有成功，哪些很棒，还有哪些缺失？</p><h1 id="2c72" class="mq mj it bd mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm bi translated">结束语</h1><p id="945b" class="pw-post-body-paragraph kh ki it kj b kk nn km kn ko no kq kr ks np ku kv kw nq ky kz la nr lc ld le im bi translated">好了，这就是我今天为你准备的。我们浏览了处理图像的不同选项及其优缺点。从只有<code class="fe lo lp lq lr b">src</code>属性的<code class="fe lo lp lq lr b">&lt;img&gt;</code>开始，添加了一个<code class="fe lo lp lq lr b">srcset</code>属性，移动到有不同<code class="fe lo lp lq lr b">&lt;source&gt;</code>标签的<code class="fe lo lp lq lr b">&lt;picture&gt;</code>，最终全部烧毁，回到只有<code class="fe lo lp lq lr b">&lt;img&gt;</code>属性的<code class="fe lo lp lq lr b">src</code>，但是合并了图像管理器。</p><p id="ae64" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">换句话说，这是一个非常迂回的旅程:</p><pre class="kb kc kd ke gt me lr mf mg aw mh bi"><span id="a379" class="mi mj it lr b gy mk ml l mm mn">&lt;! – BAD – &gt;<br/>&lt;img<br/>  src="https://<strong class="lr iu">austingil.com</strong>/wp-content/uploads/Command-Line-Blog-Cover.png"<br/>  alt="Command line terminal and old PC with an indigo brush stroke in the background."<br/>&gt;</span></pre><p id="ea86" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">对此:</p><pre class="kb kc kd ke gt me lr mf mg aw mh bi"><span id="7242" class="mi mj it lr b gy mk ml l mm mn">&lt;! – GOOD – &gt;<br/>&lt;img<br/>  src="https://<strong class="lr iu">images.austingil.com</strong>/wp-content/uploads/Command-Line-Blog-Cover.png"<br/>  alt="Command line terminal and old PC with an indigo brush stroke in the background."<br/>&gt;</span></pre><p id="d0f4" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">多么虎头蛇尾。</p><p id="15e7" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">也许可以节省时间，只需说，“改善图像的一个步骤:使用图像管理器”，但这有什么意思呢？我也喜欢探究原因。</p><p id="3813" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">我们甚至没有触及像<a class="ae mo" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Img#attr-loading" rel="noopener ugc nofollow" target="_blank">延迟加载</a>、<a class="ae mo" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Img#attr-decoding" rel="noopener ugc nofollow" target="_blank">解码</a>或<a class="ae mo" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Img#attr-fetchpriority" rel="noopener ugc nofollow" target="_blank">获取优先级</a>这样的事情，但是这些更有上下文关系和细微差别，而上面的建议几乎是全面的。</p><p id="33ec" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">无论如何，我希望你喜欢它，我希望你实施这些解决方案中的一些，因为用现代格式发送较小的图像是一个伟大的方式，使互联网成为一个更快、更环保的地方。</p><figure class="kb kc kd ke gt ju gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/b03036e830c6ac2b929350aa37d6b713.png" data-original-src="https://miro.medium.com/v2/resize:fit:2/0*4BvIxScpS1YR6OK2.gif"/></div></figure><p id="afee" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated">非常感谢您的阅读。如果你喜欢这篇文章，请<a class="ae mo" href="https://twitter.com/share?via=heyAustinGil" rel="noopener ugc nofollow" target="_blank">分享它</a>。这是支持我的最好方式之一。你也可以<a class="ae mo" href="https://austingil.com/newsletter/" rel="noopener ugc nofollow" target="_blank">注册我的时事通讯</a>或者<a class="ae mo" href="https://twitter.com/heyAustinGil" rel="noopener ugc nofollow" target="_blank">在Twitter上关注我</a>如果你想知道什么时候有新文章发表。</p></div><div class="ab cl lx ly hx lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="im in io ip iq"><p id="d977" class="pw-post-body-paragraph kh ki it kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le im bi translated"><em class="nu">原载于</em><a class="ae mo" href="https://austingil.com/better-html-images/" rel="noopener ugc nofollow" target="_blank"><em class="nu"/></a><em class="nu">。</em></p></div></div>    
</body>
</html>