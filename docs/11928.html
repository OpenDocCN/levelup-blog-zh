<html>
<head>
<title>Pull Requests Are Slowing You Down</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">拉取请求会降低您的速度</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/pull-requests-are-slowing-you-down-513e35522e9a?source=collection_archive---------0-----------------------#2022-04-30">https://levelup.gitconnected.com/pull-requests-are-slowing-you-down-513e35522e9a?source=collection_archive---------0-----------------------#2022-04-30</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="dbf0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">当在软件开发中作为标准代码变更的一部分时，拉请求会减慢连续交付的速度。如果您使用拉式请求，您应该问自己:</p><ul class=""><li id="2f2e" class="ko kp it js b jt ju jx jy kb kq kf kr kj ks kn kt ku kv kw bi translated">您每天花费多长时间等待拉动式请求批准？</li><li id="a1b1" class="ko kp it js b jt kx jx ky kb kz kf la kj lb kn kt ku kv kw bi translated">当您打开一个拉取请求时，您有多大把握通过集成测试？</li><li id="a0b2" class="ko kp it js b jt kx jx ky kb kz kf la kj lb kn kt ku kv kw bi translated">不按预期工作的代码被批准了多少次？</li></ul><figure class="ld le lf lg gt lh gh gi paragraph-image"><div class="gh gi lc"><img src="../Images/24c58802745db07bd23131ab14b07246.png" data-original-src="https://miro.medium.com/v2/resize:fit:1254/format:webp/1*NkzOw90MUOAWaUxOc7N8fw.png"/></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk translated">拉请求的问题是</figcaption></figure><h1 id="12e7" class="lo lp it bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">连续交付需要集成测试</h1><p id="0802" class="pw-post-body-paragraph jq jr it js b jt mm jv jw jx mn jz ka kb mo kd ke kf mp kh ki kj mq kl km kn im bi translated">在开发软件时，我们希望尽可能频繁地测试和发布软件，这样我们就可以获得快速的反馈并做出快速的改进。</p><p id="d6f8" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">为了让我们交付软件，我们需要运行集成测试，以便我们可以确认系统的行为并识别任何问题。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div class="gh gi mr"><img src="../Images/2022eab4ad67c79051f0bd23f804fa11.png" data-original-src="https://miro.medium.com/v2/resize:fit:930/format:webp/1*GZEsNTAv7L2QHDI_1f6MZw.png"/></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk translated">发布前的集成测试</figcaption></figure><p id="72f4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">但在此之前…</p><h1 id="81ae" class="lo lp it bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">集成测试需要代码集成和部署</h1><p id="fca3" class="pw-post-body-paragraph jq jr it js b jt mm jv jw jx mn jz ka kb mo kd ke kf mp kh ki kj mq kl km kn im bi translated">在运行有效的集成测试之前，我们需要集成我们的代码变更并将其部署到测试环境中。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi ms"><img src="../Images/8a5c7f5ec7eee19105fee4a28044c2ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2ZUBkpkvUVqGSsYTr54YwQ.png"/></div></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk translated">集成测试前合并和部署</figcaption></figure><p id="b78b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这个过程可以简单到将变更提交到主分支，然后等待自动部署和测试。但是对于许多团队来说，这意味着:</p><ol class=""><li id="1807" class="ko kp it js b jt ju jx jy kb kq kf kr kj ks kn mx ku kv kw bi translated">创建带有拉请求的分支。</li><li id="8974" class="ko kp it js b jt kx jx ky kb kz kf la kj lb kn mx ku kv kw bi translated">向其他团队成员发送消息，要求进行代码评审。</li><li id="f82a" class="ko kp it js b jt kx jx ky kb kz kf la kj lb kn mx ku kv kw bi translated">查看拉动式请求的备注。</li><li id="4393" class="ko kp it js b jt kx jx ky kb kz kf la kj lb kn mx ku kv kw bi translated">对代码进行更改。</li><li id="ad68" class="ko kp it js b jt kx jx ky kb kz kf la kj lb kn mx ku kv kw bi translated">从步骤2开始重复，直到提供正确的批准数量。</li><li id="3229" class="ko kp it js b jt kx jx ky kb kz kf la kj lb kn mx ku kv kw bi translated">合并代码，等待部署和测试。</li></ol><h1 id="e946" class="lo lp it bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">拉取请求是如何阻碍的</h1><p id="6686" class="pw-post-body-paragraph jq jr it js b jt mm jv jw jx mn jz ka kb mo kd ke kf mp kh ki kj mq kl km kn im bi translated">等待拉取请求批准我们的代码更改可能需要几分钟、几小时，甚至几天。这个时间直接影响我们获得代码变更反馈的能力，因为它发生在我们的集成测试运行之前。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi my"><img src="../Images/0e6c0c8421ea6e8f98731ecf1a649302.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LH_-UrOfvznM7j0H0vFjOQ.png"/></div></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk translated">反馈缓慢的问题</figcaption></figure><p id="b6cc" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们不应该浪费时间等待我们还没有完全测试过的代码的批准，我们应该致力于在我们对代码有信心的时候获得即时的批准或者完成审查。</p><h1 id="aff1" class="lo lp it bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">我们如何移动得更快？</h1><p id="0336" class="pw-post-body-paragraph jq jr it js b jt mm jv jw jx mn jz ka kb mo kd ke kf mp kh ki kj mq kl km kn im bi translated">有两个主要的选择来防止拉请求通过减慢你的速度来破坏你的软件开发生命周期。</p><h2 id="0c77" class="mz lp it bd lq na nb dn lu nc nd dp ly kb ne nf mc kf ng nh mg kj ni nj mk nk bi translated">结对编程</h2><p id="cce7" class="pw-post-body-paragraph jq jr it js b jt mm jv jw jx mn jz ka kb mo kd ke kf mp kh ki kj mq kl km kn im bi translated">在共享屏幕、键盘和/或计算机的同时一起处理代码的两个开发者可以被用来保证在打开和批准拉请求之间的最小停机时间。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi nl"><img src="../Images/87b6bdccd92628b763472f8fd64bc025.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NYQfKIzcHEc0XoMOEc5QDA.png"/></div></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk translated">结对编程即时复习</figcaption></figure><p id="0219" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">这是可行的，因为一起工作的两个开发人员应该理解代码，就实现达成一致，并且同时可用。</p><h2 id="293e" class="mz lp it bd lq na nb dn lu nc nd dp ly kb ne nf mc kf ng nh mg kj ni nj mk nk bi translated">预发布代码审查</h2><p id="e08b" class="pw-post-body-paragraph jq jr it js b jt mm jv jw jx mn jz ka kb mo kd ke kf mp kh ki kj mq kl km kn im bi translated">在部署和测试之后、发布之前完成代码评审可以取代对拉请求的需求。这仍然允许相同级别的审查，但是给予开发人员信心和首先运行集成测试的快速反馈。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi my"><img src="../Images/b55960beca9cede26c77bb5a08f5eda0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VG_FZpg8Q6PDdHpt8W15FQ.png"/></div></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk translated">评审前测试反馈</figcaption></figure><p id="0eb9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们可以通过向部署管道添加一些额外的步骤来实现这个代码审查过程。</p><p id="1f05" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">首先，我们需要区分当前代码和新版本，这可以通过git命令来完成:</p><pre class="ld le lf lg gt nm nn no np aw nq bi"><span id="e12c" class="mz lp it nn b gy nr ns l nt nu">git diff e237udbas r2bghur392</span></pre><p id="f657" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">然后，在检查代码变更后，需要手动触发发布。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/c6c6bd184e5ebcfa8a1613f4d9e9fb1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:486/format:webp/1*hglu5euKMG7nMqheXhYkbA.png"/></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk translated">Gitlab手动触发器</figcaption></figure><h1 id="5f40" class="lo lp it bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">你怎么想呢?</h1><p id="3bcf" class="pw-post-body-paragraph jq jr it js b jt mm jv jw jx mn jz ka kb mo kd ke kf mp kh ki kj mq kl km kn im bi translated">这些仅仅是在连续交付软件时防止拉请求减慢我们速度的一些方法的例子。</p><p id="63e5" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">你认为这些想法有助于提高你的软件开发吗？在<strong class="js iu">Twitter:</strong><a class="ae nw" href="https://twitter.com/BenTorvo" rel="noopener ugc nofollow" target="_blank">@ BenTorvo</a>或通过<strong class="js iu">邮箱:</strong><a class="ae nw" href="http://torvo.com.au/" rel="noopener ugc nofollow" target="_blank">ben@torvo.com.au</a>告诉我</p></div></div>    
</body>
</html>