<html>
<head>
<title>Demystifying a Simple Web Crawler Example in Go</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Go中解密一个简单的网络爬虫示例</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/demystifying-a-simple-web-crawler-example-in-go-51b1d85770be?source=collection_archive---------0-----------------------#2021-08-29">https://levelup.gitconnected.com/demystifying-a-simple-web-crawler-example-in-go-51b1d85770be?source=collection_archive---------0-----------------------#2021-08-29</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="2bfc" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">Go是一种出色的编程语言，具有高性能、表现力和可读性。</p><p id="afc9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在本帖中，我将用一个网络爬虫的例子来展示其超强的并发能力。</p><h1 id="b561" class="ko kp it bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">基本能力</h1><p id="35c2" class="pw-post-body-paragraph jq jr it js b jt lm jv jw jx ln jz ka kb lo kd ke kf lp kh ki kj lq kl km kn im bi translated">Go中一个网络爬虫需要具备的一些基本能力。</p><ul class=""><li id="4e43" class="lr ls it js b jt ju jx jy kb lt kf lu kj lv kn lw lx ly lz bi translated">高并发性</li><li id="1659" class="lr ls it js b jt ma jx mb kb mc kf md kj me kn lw lx ly lz bi translated">监控goroutine的数量是否有泄漏</li><li id="2444" class="lr ls it js b jt ma jx mb kb mc kf md kj me kn lw lx ly lz bi translated">允许灵活的并发控制</li></ul><p id="a3ff" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">代码如下:</p><figure class="mf mg mh mi gt mj"><div class="bz fp l di"><div class="mk ml l"/></div><figcaption class="mm mn gj gh gi mo mp bd b be z dk translated">golang网络爬虫示例</figcaption></figure><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="gh gi mq"><img src="../Images/cee3370eee5c40d084287fb6aee3f6e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MhMY2RWrm84CZumP5LTZJw.png"/></div></div><figcaption class="mm mn gj gh gi mo mp bd b be z dk translated">围棋中的网络爬虫</figcaption></figure><p id="56d2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">1️⃣:在这里，我们希望利用机器上的所有内核来实现高并发性。</p><p id="f017" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">2️⃣在这里，我们使用一个包含频道的ticker，它会在每次tick之后发送频道上的时间。</p><p id="4cab" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">3️⃣:这里我们启动一个守护程序goroutine，一旦有信号从ticker通道发出，它就运行<code class="fe mx my mz na b">watch</code>函数</p><p id="605c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">4️⃣在这里，我们声明了函数<code class="fe mx my mz na b">watch</code>,它打印当前活动的goroutines的数量</p><p id="8210" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">5️⃣在这里，我们创建了一个容量为200的缓冲通道。这个数字定义了我们程序允许的最大并发请求。</p><p id="c919" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">6️⃣在这里我们模拟<code class="fe mx my mz na b">MAX</code>时间的网页请求</p><p id="0c60" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">7️⃣在这里，我们启动一个新的goroutine，在每次从通道<code class="fe mx my mz na b">c</code>发出信号时执行<code class="fe mx my mz na b">worker</code>任务。</p><p id="67bf" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">8️⃣:这里我们用睡眠功能模拟网页抓取动作</p><p id="a19f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">9️⃣在这里，我们将请求令牌返回给通道</p></div><div class="ab cl nb nc hx nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="im in io ip iq"><p id="cffa" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">发现这篇文章很有用👏？看看我下面的其他文章吧！</p><ul class=""><li id="e8f7" class="lr ls it js b jt ju jx jy kb lt kf lu kj lv kn lw lx ly lz bi translated"><a class="ae ni" rel="noopener ugc nofollow" target="_blank" href="/how-does-golang-channel-works-6d66acd54753">戈朗通道是如何工作的</a>？</li><li id="4db4" class="lr ls it js b jt ma jx mb kb mc kf md kj me kn lw lx ly lz bi translated"><a class="ae ni" rel="noopener ugc nofollow" target="_blank" href="/composite-data-types-in-golang-a829288b5553">Golang中的复合数据类型</a></li><li id="a3fa" class="lr ls it js b jt ma jx mb kb mc kf md kj me kn lw lx ly lz bi translated"><a class="ae ni" rel="noopener ugc nofollow" target="_blank" href="/demystifying-bytes-runes-and-strings-in-go-1f94df215615">揭秘Golang中的字节符文和字符串</a></li></ul></div></div>    
</body>
</html>