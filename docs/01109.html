<html>
<head>
<title>Building a Simple Calculator in Kotlin Using Android Studio</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Android Studio在Kotlin中构建一个简单的计算器</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/building-a-simple-calculator-in-kotlin-using-android-studio-e877dec52768?source=collection_archive---------0-----------------------#2019-11-11">https://levelup.gitconnected.com/building-a-simple-calculator-in-kotlin-using-android-studio-e877dec52768?source=collection_archive---------0-----------------------#2019-11-11</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="3324" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在本教程中，我们将学习如何使用Android Studio在Kotlin中构建一个简单的计算器。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/8e7506e94fd06775d3d6ce05fff0fc68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hI9RZtwWu3sydSYuJRodiw.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">演职员表:<a class="ae le" href="http://www.digitstory.com/setting-up-kotlin-in-android-studio/" rel="noopener ugc nofollow" target="_blank">数字仓库</a></figcaption></figure><h2 id="cebc" class="lf lg it bd lh li lj dn lk ll lm dp ln kb lo lp lq kf lr ls lt kj lu lv lw lx bi translated">描述</h2><p id="037e" class="pw-post-body-paragraph jq jr it js b jt ly jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj mc kl km kn im bi translated">在本教程中，我们将使用Kotlin在Android Studio上开发一个“<strong class="js iu"> 10键</strong>计算器”。包括的按钮应该是:</p><ul class=""><li id="4d4d" class="md me it js b jt ju jx jy kb mf kf mg kj mh kn mi mj mk ml bi translated">数字键:<strong class="js iu"> 1 </strong>、<strong class="js iu"> 2 </strong>、<strong class="js iu"> 3 </strong>、<strong class="js iu"> 4 </strong>、<strong class="js iu"> 5 </strong>、<strong class="js iu"> 6 </strong>、<strong class="js iu"> 7 </strong>、<strong class="js iu"> 8 </strong>、<strong class="js iu"> 9 </strong>、<strong class="js iu"> 0 </strong>。</li><li id="cddb" class="md me it js b jt mm jx mn kb mo kf mp kj mq kn mi mj mk ml bi translated">操作键:<strong class="js iu"> + </strong>、<strong class="js iu"> - </strong>、<strong class="js iu"> * </strong>、<strong class="js iu"> / </strong>。</li><li id="f979" class="md me it js b jt mm jx mn kb mo kf mp kj mq kn mi mj mk ml bi translated">其他按键:<strong class="js iu"> = </strong>，<strong class="js iu">清除</strong>。这里“<strong class="js iu">清除</strong>”键应该清除屏幕和内存中的所有内容。“<strong class="js iu"> = </strong>”键应用操作并给出结果。</li><li id="7d5c" class="md me it js b jt mm jx mn kb mo kf mp kj mq kn mi mj mk ml bi translated">此外，计算器将有一个“<strong class="js iu"> DEL </strong>”键，与“退格键”相同，将删除屏幕上的最后一个字符。</li><li id="fc80" class="md me it js b jt mm jx mn kb mo kf mp kj mq kn mi mj mk ml bi translated"><strong class="js iu">一个。</strong>"键应该显示一个小数。</li></ul><p id="cf73" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在我们知道了计算器的外观和工作方式，让我们开始吧。为了让你理解，我将尽力提供所有必要的步骤。</p></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><h2 id="9b7a" class="lf lg it bd lh li lj dn lk ll lm dp ln kb lo lp lq kf lr ls lt kj lu lv lw lx bi translated">第一步:在Android Studio上创建一个“空活动”。</h2><p id="2654" class="pw-post-body-paragraph jq jr it js b jt ly jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj mc kl km kn im bi translated">让我们创建一个新项目。由于我们的计算器只包含一个活动(我们只需要一个活动Kotlin文件和一个XML布局文件)，我们需要选择一个“<strong class="js iu">空活动</strong>”。这可以按如下所示完成:</p><p id="fda4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">新建→新建项目→清空活动</strong></p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi my"><img src="../Images/3e33df59dd5b7e491ff8c1461982f60d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7bIXzopvCssWxUQTEINE7A.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">在android studio上创建空活动</figcaption></figure><p id="52ba" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">创建空活动后，配置项目，例如名称、包名、位置、语言和API级别。按照下面的截图来配置您的项目，以保持一致性。确保你选择的语言是Kotlin(显然我是用Kotlin编码的)。然后点击完成，那么你的项目就会被加载。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi mz"><img src="../Images/e55d12f7992c3a1da0438a92c6b922e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9A7efzarBI1YH2VA2CtIYQ.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">配置您的项目</figcaption></figure><p id="e6a0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">要了解更多关于API级别的信息，你可以参考下面给出的google官方文档，并不是强制选择上面截图中显示的API 15。只是为了教程的一致性而选择它。</p><div class="na nb gp gr nc nd"><a href="https://source.android.com/setup/start/build-numbers" rel="noopener  ugc nofollow" target="_blank"><div class="ne ab fo"><div class="nf ab ng cl cj nh"><h2 class="bd iu gy z fp ni fr fs nj fu fw is bi translated">代号、标签和内部版本号| Android开源项目</h2><div class="nk l"><h3 class="bd b gy z fp ni fr fs nj fu fw dk translated">Android开发版本被组织成具有字母代号的家族，其灵感来自美味的食物…</h3></div><div class="nl l"><p class="bd b dl z fp ni fr fs nj fu fw dk translated">source.android.com</p></div></div></div></a></div></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><h2 id="08b5" class="lf lg it bd lh li lj dn lk ll lm dp ln kb lo lp lq kf lr ls lt kj lu lv lw lx bi translated">步骤2:向colors.xml文件添加颜色</h2><p id="0914" class="pw-post-body-paragraph jq jr it js b jt ly jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj mc kl km kn im bi translated">顾名思义，在颜色文件中，我们可以为计算器的所有按钮指定颜色。colors.xml文件可以在以下位置找到:</p><p id="23e9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">app→RES→数值→colors.xml </strong></p><pre class="kp kq kr ks gt nm nn no np aw nq bi"><span id="c933" class="lf lg it nn b gy nr ns l nt nu"><em class="nv">&lt;?</em><strong class="nn iu">xml version="1.0" encoding="utf-8"</strong><em class="nv">?&gt;<br/></em>&lt;<strong class="nn iu">resources</strong>&gt;<br/>    &lt;<strong class="nn iu">color name="colorPrimary"</strong>&gt;#000000&lt;/<strong class="nn iu">color</strong>&gt;<br/>    &lt;<strong class="nn iu">color name = "white"</strong>&gt;#ffffff&lt;/<strong class="nn iu">color</strong>&gt;<br/>    &lt;<strong class="nn iu">color name="colorPrimaryDark"</strong>&gt;#cccccc&lt;/<strong class="nn iu">color</strong>&gt;<br/>    &lt;<strong class="nn iu">color name="colorAccent"</strong>&gt;#FF4081&lt;/<strong class="nn iu">color</strong>&gt;<br/>    &lt;<strong class="nn iu">color name = "actionButton"</strong>&gt;#808080&lt;/<strong class="nn iu">color</strong>&gt;<br/>    &lt;<strong class="nn iu">color name = "equalButton"</strong>&gt;#FF0000&lt;/<strong class="nn iu">color</strong>&gt;<br/>    &lt;<strong class="nn iu">color name="numberActionButton"</strong>&gt;#000000&lt;/<strong class="nn iu">color</strong>&gt;<br/>    &lt;<strong class="nn iu">color name = "numberActionButton2"</strong>&gt;#373737&lt;/<strong class="nn iu">color</strong>&gt;<br/>&lt;/<strong class="nn iu">resources</strong>&gt;</span></pre></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><h2 id="1906" class="lf lg it bd lh li lj dn lk ll lm dp ln kb lo lp lq kf lr ls lt kj lu lv lw lx bi translated">步骤3:修改styles.xml文件</h2><p id="6917" class="pw-post-body-paragraph jq jr it js b jt ly jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj mc kl km kn im bi translated">样式文件用于定义UI的格式或外观。一个样式可以应用到一个单独的<code class="fe nw nx ny nn b">View</code>(从一个布局文件中)或整个<code class="fe nw nx ny nn b">Activity</code>或应用程序(从清单文件中)。</p><p id="0d06" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">styles.xml可以在</p><p id="3315" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">app→RES→values→style . XML</strong></p><pre class="kp kq kr ks gt nm nn no np aw nq bi"><span id="2ec0" class="lf lg it nn b gy nr ns l nt nu">&lt;<strong class="nn iu">resources</strong>&gt;<br/><br/><em class="nv">&lt;!-- Base application theme. --&gt;<br/></em>&lt;<strong class="nn iu">style name="AppTheme" parent="Theme.AppCompat.Light.DarkActionBar"</strong>&gt;<br/>    <em class="nv">&lt;!-- Customize your theme here. --&gt;<br/>    </em>&lt;<strong class="nn iu">item name="colorPrimary"</strong>&gt;@color/colorPrimary&lt;/<strong class="nn iu">item</strong>&gt;<br/>    &lt;<strong class="nn iu">item name="colorPrimaryDark"</strong>&gt;@color/colorPrimaryDark&lt;/<strong class="nn iu">item</strong>&gt;<br/>    &lt;<strong class="nn iu">item name="colorAccent"</strong>&gt;@color/colorAccent&lt;/<strong class="nn iu">item</strong>&gt;<br/>&lt;/<strong class="nn iu">style</strong>&gt;<br/><br/><em class="nv">&lt;!-- ActionButtonStyle for keys "CLEAR" and "/". --&gt;</em>  <br/>&lt;<strong class="nn iu">style name="ActionButtonStyle"</strong>&gt;<br/>    &lt;<strong class="nn iu">item name="android:layout_width"</strong>&gt;0dp&lt;/<strong class="nn iu">item</strong>&gt;<br/>    &lt;<strong class="nn iu">item name="android:layout_height"</strong>&gt;match_parent&lt;/<strong class="nn iu">item</strong>&gt;<br/>    &lt;<strong class="nn iu">item name="android:layout_weight"</strong>&gt;1&lt;/<strong class="nn iu">item</strong>&gt;<br/>    &lt;<strong class="nn iu">item name="android:background"</strong>&gt;@color/actionButton&lt;/<strong class="nn iu">item</strong>&gt;<br/>    &lt;<strong class="nn iu">item name = "android:textSize"</strong>&gt;21sp&lt;/<strong class="nn iu">item</strong>&gt;<br/>    &lt;<strong class="nn iu">item name="android:textColor"</strong>&gt;@android:color/white&lt;/<strong class="nn iu">item</strong>&gt;<br/>    &lt;<strong class="nn iu">item name="android:gravity"</strong>&gt;center&lt;/<strong class="nn iu">item</strong>&gt;<br/>    &lt;<strong class="nn iu">item name="android:layout_margin"</strong>&gt;0.5dp&lt;/<strong class="nn iu">item</strong>&gt;<br/><br/>&lt;/<strong class="nn iu">style</strong>&gt;<br/><br/><em class="nv">&lt;!-- NumberButtonStyle for keys "1, 2, 3, 4, 5, 6, 7, 8, 9, 0". --&gt;</em><br/>&lt;<strong class="nn iu">style name="NumberButtonStyle"</strong>&gt;<br/>    &lt;<strong class="nn iu">item name="android:layout_width"</strong>&gt;0dp&lt;/<strong class="nn iu">item</strong>&gt;<br/>    &lt;<strong class="nn iu">item name="android:layout_height"</strong>&gt;match_parent&lt;/<strong class="nn iu">item</strong>&gt;<br/>    &lt;<strong class="nn iu">item name="android:layout_weight"</strong>&gt;1&lt;/<strong class="nn iu">item</strong>&gt;<br/>    &lt;<strong class="nn iu">item name="android:background"</strong>&gt;@color/numberActionButton&lt;/<strong class="nn iu">item</strong>&gt;<br/>    &lt;<strong class="nn iu">item name = "android:textSize"</strong>&gt;21sp&lt;/<strong class="nn iu">item</strong>&gt;<br/>    &lt;<strong class="nn iu">item name="android:textColor"</strong>&gt;@android:color/white&lt;/<strong class="nn iu">item</strong>&gt;<br/>    &lt;<strong class="nn iu">item name="android:gravity"</strong>&gt;center&lt;/<strong class="nn iu">item</strong>&gt;<br/>    &lt;<strong class="nn iu">item name="android:layout_margin"</strong>&gt;0.5dp&lt;/<strong class="nn iu">item</strong>&gt;<br/>&lt;/<strong class="nn iu">style</strong>&gt;</span><span id="1ed4" class="lf lg it nn b gy nz ns l nt nu"><em class="nv">&lt;!-- EqualButtonStyle for key "=". --&gt;</em><br/>&lt;<strong class="nn iu">style name="EqualButtonStyle"</strong>&gt;<br/>    &lt;<strong class="nn iu">item name="android:layout_width"</strong>&gt;0dp&lt;/<strong class="nn iu">item</strong>&gt;<br/>    &lt;<strong class="nn iu">item name="android:layout_height"</strong>&gt;match_parent&lt;/<strong class="nn iu">item</strong>&gt;<br/>    &lt;<strong class="nn iu">item name="android:layout_weight"</strong>&gt;1&lt;/<strong class="nn iu">item</strong>&gt;<br/>    &lt;<strong class="nn iu">item name="android:background"</strong>&gt;@color/equalButton&lt;/<strong class="nn iu">item</strong>&gt;<br/>    &lt;<strong class="nn iu">item name = "android:textSize"</strong>&gt;21sp&lt;/<strong class="nn iu">item</strong>&gt;<br/>    &lt;<strong class="nn iu">item name="android:textColor"</strong>&gt;@android:color/white&lt;/<strong class="nn iu">item</strong>&gt;<br/>    &lt;<strong class="nn iu">item name="android:gravity"</strong>&gt;center&lt;/<strong class="nn iu">item</strong>&gt;<br/>    &lt;<strong class="nn iu">item name="android:layout_margin"</strong>&gt;0.5dp&lt;/<strong class="nn iu">item</strong>&gt;<br/>&lt;/<strong class="nn iu">style</strong>&gt;<br/><br/><em class="nv">&lt;!-- NumberActionButton2 for keys "*", "-", "+". --&gt;</em><br/>&lt;<strong class="nn iu">style name="NumberActionButton2"</strong>&gt;<br/>    &lt;<strong class="nn iu">item name="android:layout_width"</strong>&gt;0dp&lt;/<strong class="nn iu">item</strong>&gt;<br/>    &lt;<strong class="nn iu">item name="android:layout_height"</strong>&gt;match_parent&lt;/<strong class="nn iu">item</strong>&gt;<br/>    &lt;<strong class="nn iu">item name="android:layout_weight"</strong>&gt;1&lt;/<strong class="nn iu">item</strong>&gt;<br/>    &lt;<strong class="nn iu">item name="android:background"</strong>&gt;@color/numberActionButton2&lt;/<strong class="nn iu">item</strong>&gt;<br/>    &lt;<strong class="nn iu">item name ="android:textSize"</strong>&gt;21sp&lt;/<strong class="nn iu">item</strong>&gt;<br/>    &lt;<strong class="nn iu">item name="android:textColor"</strong>&gt;@android:color/white&lt;/<strong class="nn iu">item</strong>&gt;<br/>    &lt;<strong class="nn iu">item name="android:gravity"</strong>&gt;center&lt;/<strong class="nn iu">item</strong>&gt;<br/>    &lt;<strong class="nn iu">item name="android:layout_margin"</strong>&gt;0.5dp&lt;/<strong class="nn iu">item</strong>&gt;<br/>&lt;/<strong class="nn iu">style</strong>&gt;<br/><br/>&lt;/<strong class="nn iu">resources</strong>&gt;</span></pre><p id="f151" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">以上只是styles.xml文件中定义的计算器的样式属性。发出简报</p><blockquote class="oa ob oc"><p id="8488" class="jq jr nv js b jt ju jv jw jx jy jz ka od kc kd ke oe kg kh ki of kk kl km kn im bi translated"><strong class="js iu"> ActionButtonStyle:按键→清除，/ </strong></p><p id="9de2" class="jq jr nv js b jt ju jv jw jx jy jz ka od kc kd ke oe kg kh ki of kk kl km kn im bi translated"><strong class="js iu">数字按钮样式:按键→ 1，2，3，4，5，6，7，8，9，0 </strong></p><p id="d989" class="jq jr nv js b jt ju jv jw jx jy jz ka od kc kd ke oe kg kh ki of kk kl km kn im bi translated"><strong class="js iu">数字操作按钮2:按键→ *、-、+ </strong></p><p id="6328" class="jq jr nv js b jt ju jv jw jx jy jz ka od kc kd ke oe kg kh ki of kk kl km kn im bi translated"><strong class="js iu"> EqualButtonStyle: Key → = </strong></p></blockquote></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><h2 id="88f7" class="lf lg it bd lh li lj dn lk ll lm dp ln kb lo lp lq kf lr ls lt kj lu lv lw lx bi translated">步骤4:配置“activity_main.xml”文件</h2><p id="bc59" class="pw-post-body-paragraph jq jr it js b jt ly jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj mc kl km kn im bi translated">这是主布局文件，这里你不需要使用UI编辑器，而是可以使用XML编码整个布局。这里我们可以使用文本视图布局，而不是按键按钮。我将所有的文本视图放置在线性布局中。因为有多个文本视图，所以这是一个机械的过程。所以现在跟我来。</p><pre class="kp kq kr ks gt nm nn no np aw nq bi"><span id="04bb" class="lf lg it nn b gy nr ns l nt nu"><em class="nv">&lt;?</em><strong class="nn iu">xml version="1.0" encoding="utf-8"</strong><em class="nv">?&gt;<br/></em>&lt;<strong class="nn iu">LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"<br/>    xmlns:app="http://schemas.android.com/apk/res-auto"<br/>    xmlns:tools="http://schemas.android.com/tools"<br/>    android:layout_width="match_parent"<br/>    android:layout_height="match_parent"<br/>    tools:context=".MainActivity"<br/>    android:background="@android:color/black"<br/>    android:orientation="vertical"</strong>&gt;<br/><br/>    &lt;<strong class="nn iu">TextView<br/>        android:id="@+id/tvExpression"<br/>        android:layout_width="match_parent"<br/>        android:layout_height="80dp"<br/>        android:textColor="@color/actionButton"<br/>        android:layout_gravity="end"<br/>        android:ellipsize="start"<br/>        android:singleLine="true"<br/>        android:textSize="40sp" </strong>/&gt;<br/><br/><br/>    &lt;<strong class="nn iu">TextView<br/>        android:id="@+id/tvResult"<br/>        android:layout_width="match_parent"<br/>        android:layout_height="100dp"<br/>        android:textColor="@color/white"<br/>        android:layout_gravity="end"<br/>        android:ellipsize="end"<br/>        android:singleLine="true"<br/>        android:textSize="30sp"</strong>/&gt;<br/><br/><br/>    &lt;<strong class="nn iu">LinearLayout<br/>        android:layout_width="match_parent"<br/>        android:layout_height="match_parent"<br/>        android:orientation="vertical"</strong>&gt;<br/><br/>        &lt;<strong class="nn iu">LinearLayout<br/>            android:layout_width="match_parent"<br/>            android:layout_height="0dp"<br/>            android:layout_weight="1"<br/>            android:orientation="horizontal"</strong>&gt;<br/>            &lt;<strong class="nn iu">TextView<br/>                android:id="@+id/tvClear"<br/>                style="@style/ActionButtonStyle"<br/>                android:text="CLEAR"</strong>/&gt;<br/>            <br/>            &lt;<strong class="nn iu">TextView<br/>                android:id="@+id/tvDivide"<br/>                style="@style/ActionButtonStyle"<br/>                android:text="/"</strong>/&gt;<br/><br/><br/>        &lt;/<strong class="nn iu">LinearLayout</strong>&gt;<br/><br/>        &lt;<strong class="nn iu">LinearLayout<br/>            android:layout_width="match_parent"<br/>            android:layout_height="0dp"<br/>            android:layout_weight="1"<br/>            android:orientation="horizontal"</strong>&gt;<br/><br/>            &lt;<strong class="nn iu">TextView<br/>                android:id="@+id/tvSeven"<br/>                style="@style/NumberButtonStyle"<br/>                android:text="7"</strong>/&gt;<br/><br/>            &lt;<strong class="nn iu">TextView<br/>                android:id="@+id/tvEight"<br/>                style="@style/NumberButtonStyle"<br/>                android:text="8"</strong>/&gt;<br/><br/>            &lt;<strong class="nn iu">TextView<br/>                android:id="@+id/tvNine"<br/>                style="@style/NumberButtonStyle"<br/>                android:text="9"</strong>/&gt;<br/><br/>            &lt;<strong class="nn iu">TextView<br/>                android:id="@+id/tvMul"<br/>                style="@style/NumberActionButton2"<br/>                android:text="*"</strong>/&gt;<br/><br/>        &lt;/<strong class="nn iu">LinearLayout</strong>&gt;<br/><br/>        &lt;<strong class="nn iu">LinearLayout<br/>            android:layout_width="match_parent"<br/>            android:layout_height="0dp"<br/>            android:layout_weight="1"<br/>            android:orientation="horizontal"</strong>&gt;<br/><br/>            &lt;<strong class="nn iu">TextView<br/>                android:id="@+id/tvFour"<br/>                style="@style/NumberButtonStyle"<br/>                android:text="4"</strong>/&gt;<br/><br/>            &lt;<strong class="nn iu">TextView<br/>                android:id="@+id/tvFive"<br/>                style="@style/NumberButtonStyle"<br/>                android:text="5"</strong>/&gt;<br/><br/>            &lt;<strong class="nn iu">TextView<br/>                android:id="@+id/tvSix"<br/>                style="@style/NumberButtonStyle"<br/>                android:text="6"</strong>/&gt;<br/><br/>            &lt;<strong class="nn iu">TextView<br/>                android:id="@+id/tvMinus"<br/>                style="@style/NumberActionButton2"<br/>                android:text="-"</strong>/&gt;<br/><br/><br/>        &lt;/<strong class="nn iu">LinearLayout</strong>&gt;<br/><br/>        &lt;<strong class="nn iu">LinearLayout<br/>            android:layout_width="match_parent"<br/>            android:layout_height="0dp"<br/>            android:layout_weight="1"<br/>            android:orientation="horizontal"</strong>&gt;<br/><br/>            &lt;<strong class="nn iu">TextView<br/>                android:id="@+id/tvOne"<br/>                style="@style/NumberButtonStyle"<br/>                android:text="1"</strong>/&gt;<br/><br/>            &lt;<strong class="nn iu">TextView<br/>                android:id="@+id/tvTwo"<br/>                style="@style/NumberButtonStyle"<br/>                android:text="2"</strong>/&gt;<br/><br/>            &lt;<strong class="nn iu">TextView<br/>                android:id="@+id/tvThree"<br/>                style="@style/NumberButtonStyle"<br/>                android:text="3"</strong>/&gt;<br/><br/>            &lt;<strong class="nn iu">TextView<br/>                android:id="@+id/tvPlus"<br/>                style="@style/NumberActionButton2"<br/>                android:text="+"</strong>/&gt;<br/><br/><br/>        &lt;/<strong class="nn iu">LinearLayout</strong>&gt;<br/><br/>        &lt;<strong class="nn iu">LinearLayout<br/>            android:layout_width="match_parent"<br/>            android:layout_height="0dp"<br/>            android:layout_weight="1"<br/>            android:orientation="horizontal"</strong>&gt;<br/><br/>            &lt;<strong class="nn iu">TextView<br/>                android:id="@+id/tvDot"<br/>                style="@style/NumberButtonStyle"<br/>                android:text="."</strong>/&gt;<br/><br/>            &lt;<strong class="nn iu">TextView<br/>                android:id="@+id/tvZero"<br/>                style="@style/NumberButtonStyle"<br/>                android:text="0"</strong>/&gt;<br/><br/>            &lt;<strong class="nn iu">TextView<br/>                android:id="@+id/tvBack"<br/>                style="@style/NumberButtonStyle"<br/>                android:text="DEL"</strong>/&gt;<br/><br/>            &lt;<strong class="nn iu">TextView<br/>                android:id="@+id/tvEquals"<br/>                style="@style/EqualButtonStyle"<br/>                android:text="="</strong>/&gt;<br/><br/><br/>        &lt;/<strong class="nn iu">LinearLayout</strong>&gt;<br/><br/>    &lt;/<strong class="nn iu">LinearLayout</strong>&gt;<br/><br/><br/>&lt;/<strong class="nn iu">LinearLayout</strong>&gt;</span></pre></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><h2 id="ec16" class="lf lg it bd lh li lj dn lk ll lm dp ln kb lo lp lq kf lr ls lt kj lu lv lw lx bi translated">步骤5:将表达式构建器库放入Gradle中。</h2><p id="1a8b" class="pw-post-body-paragraph jq jr it js b jt ly jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj mc kl km kn im bi translated">我已经使用了<a class="ae le" href="https://www.objecthunter.net/exp4j/" rel="noopener ugc nofollow" target="_blank">表达式生成器</a>库来计算表达式。在GitHub库的帮助下，我学会了如何做这件事。我很难使用等号按钮来生成结果。所以现在只需将表达式构建器库放在Gradle中。</p><p id="e602" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu"> app →Gradle脚本→build.gradle </strong></p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi og"><img src="../Images/0ba0d1cc81dfa776a06dda994317a936.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7c8oVwNZNaV91Crspn2QfA.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">只需粘贴→ <strong class="bd lh">编译“net . object hunter:exp4j:0 . 4 . 8”</strong>到build.gradle里面</figcaption></figure></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><h2 id="1a9c" class="lf lg it bd lh li lj dn lk ll lm dp ln kb lo lp lq kf lr ls lt kj lu lv lw lx bi translated">步骤6:计算器的实际Kotlin编码</h2><p id="cc44" class="pw-post-body-paragraph jq jr it js b jt ly jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj mc kl km kn im bi translated">首先，我追加1，2，3，…..0，当用户分别按下文本视图的键时。为此，我创建了一个名为<strong class="js iu"> evaluateExpression() </strong>的函数，它完成了文本视图的附加工作。然后在Equals函数中，我使用表达式构建器库并调用它的方法<strong class="js iu">表达式构建器</strong>来进行计算。代码基本上是不言自明的。main_activity.kt可以在以下位置找到:</p><p id="6bba" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">app→Java→com . example . my application calculator→main activity . kt</strong></p><p id="2d21" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">在我的例子中，包名是<strong class="js iu">com . example . my application calculator</strong>，在你的例子中可能会有所不同。</p><pre class="kp kq kr ks gt nm nn no np aw nq bi"><span id="c88c" class="lf lg it nn b gy nr ns l nt nu"><strong class="nn iu"><em class="nv">// Program: main_activity.kt<br/>// Author: Tanu. N. Prabhu<br/>// Course: CS 855<br/>// Date: 28/010/2019<br/>// Assignment 2<br/>/* Description: This program helps to perform the operations and the calculations of <br/> the basic calculator*/<br/>//------------------------------------------------------------------</em></strong><em class="nv"><br/><br/></em><strong class="nn iu">package </strong>com.example.finalcalculator<br/><strong class="nn iu">import </strong>androidx.appcompat.app.AppCompatActivity<br/><strong class="nn iu">import </strong>android.os.Bundle<br/><strong class="nn iu">import </strong>kotlinx.android.synthetic.main.activity_main.*<br/><strong class="nn iu">import </strong>net.objecthunter.exp4j.ExpressionBuilder<br/><br/><strong class="nn iu">class </strong>MainActivity : AppCompatActivity()<br/>{<br/><br/>    <strong class="nn iu">override fun </strong>onCreate(savedInstanceState: Bundle?)<br/>    {<br/>        <strong class="nn iu">super</strong>.onCreate(savedInstanceState)<br/>        setContentView(R.<em class="nv">layout</em>.<em class="nv">activity_main</em>)<br/><br/><br/>        <em class="nv">/*Number Buttons*/<br/><br/>        tv</em>One.<em class="nv">setOnClickListener </em><strong class="nn iu">{<br/>            </strong>evaluateExpression(<strong class="nn iu">"1"</strong>, clear = <strong class="nn iu">true</strong>)<br/>        <strong class="nn iu">}<br/><br/>        </strong>tvTwo.<em class="nv">setOnClickListener </em><strong class="nn iu">{<br/>           </strong>evaluateExpression(<strong class="nn iu">"2"</strong>, clear = <strong class="nn iu">true</strong>)<br/>        <strong class="nn iu">}<br/><br/>        </strong>tvThree.<em class="nv">setOnClickListener </em><strong class="nn iu">{<br/>            </strong>evaluateExpression(<strong class="nn iu">"3"</strong>, clear = <strong class="nn iu">true</strong>)<br/>        <strong class="nn iu">}</strong></span><span id="aeb4" class="lf lg it nn b gy nz ns l nt nu">tvFour.<em class="nv">setOnClickListener </em><strong class="nn iu">{<br/>            </strong>evaluateExpression(<strong class="nn iu">"4"</strong>, clear = <strong class="nn iu">true</strong>)<br/>        <strong class="nn iu">}<br/><br/>        </strong>tvFive.<em class="nv">setOnClickListener </em><strong class="nn iu">{<br/>            </strong>evaluateExpression(<strong class="nn iu">"5"</strong>, clear = <strong class="nn iu">true</strong>)<br/>        <strong class="nn iu">}<br/><br/>        </strong>tvSix.<em class="nv">setOnClickListener </em><strong class="nn iu">{<br/>            </strong>evaluateExpression(<strong class="nn iu">"6"</strong>, clear = <strong class="nn iu">true</strong>)<br/>        <strong class="nn iu">}<br/><br/>        </strong>tvSeven.<em class="nv">setOnClickListener </em><strong class="nn iu">{<br/>            </strong>evaluateExpression(<strong class="nn iu">"7"</strong>, clear = <strong class="nn iu">true</strong>)<br/>        <strong class="nn iu">}<br/><br/>        </strong>tvEight.<em class="nv">setOnClickListener </em><strong class="nn iu">{<br/>            </strong>evaluateExpression(<strong class="nn iu">"8"</strong>, clear = <strong class="nn iu">true</strong>)<br/>        <strong class="nn iu">}<br/><br/>        </strong>tvNine.<em class="nv">setOnClickListener </em><strong class="nn iu">{<br/>            </strong>evaluateExpression(<strong class="nn iu">"9"</strong>, clear = <strong class="nn iu">true</strong>)<br/>        <strong class="nn iu">}<br/><br/>        </strong>tvZero.<em class="nv">setOnClickListener </em><strong class="nn iu">{<br/>            </strong>evaluateExpression(<strong class="nn iu">"0"</strong>, clear = <strong class="nn iu">true</strong>)<br/>        <strong class="nn iu">}<br/><br/>        </strong><em class="nv">/*Operators*/<br/><br/>        </em>tvPlus.<em class="nv">setOnClickListener </em><strong class="nn iu">{<br/>            </strong>evaluateExpression(<strong class="nn iu">"+"</strong>, clear = <strong class="nn iu">true</strong>)<br/>        <strong class="nn iu">}<br/><br/>        </strong>tvMinus.<em class="nv">setOnClickListener </em><strong class="nn iu">{<br/>            </strong>evaluateExpression(<strong class="nn iu">"-"</strong>, clear = <strong class="nn iu">true</strong>)<br/>        <strong class="nn iu">}<br/><br/>        </strong>tvMul.<em class="nv">setOnClickListener </em><strong class="nn iu">{<br/>            </strong>evaluateExpression(<strong class="nn iu">"*"</strong>, clear = <strong class="nn iu">true</strong>)<br/>        <strong class="nn iu">}<br/><br/>        </strong>tvDivide.<em class="nv">setOnClickListener </em><strong class="nn iu">{<br/>            </strong>evaluateExpression(<strong class="nn iu">"/"</strong>, clear = <strong class="nn iu">true</strong>)<br/>        <strong class="nn iu">}<br/><br/>        </strong>tvDot.<em class="nv">setOnClickListener </em><strong class="nn iu">{<br/>            </strong>evaluateExpression(<strong class="nn iu">"."</strong>, clear = <strong class="nn iu">true</strong>)<br/>        <strong class="nn iu">}<br/><br/>        </strong>tvClear.<em class="nv">setOnClickListener </em><strong class="nn iu">{<br/>            </strong>tvExpression.<em class="nv">text </em>= <strong class="nn iu">""<br/>            </strong>tvResult.text = <strong class="nn iu">""<br/>        }<br/><br/>        </strong>tvEquals.<em class="nv">setOnClickListener </em><strong class="nn iu">{<br/>            val </strong>text = tvExpression.<em class="nv">text</em>.toString()<strong class="nn iu"><br/>            val </strong>expression = ExpressionBuilder(text).build()<br/><br/>            <strong class="nn iu">val </strong>result = expression.evaluate()<br/>            <strong class="nn iu">val </strong>longResult = result.toLong()<br/>            <strong class="nn iu">if </strong>(result == longResult.toDouble()) {<br/>                tvResult.text = longResult.toString()<br/>            } <strong class="nn iu">else </strong>{<strong class="nn iu"><br/>                </strong>tvResult.text = result.toString()<br/>            }<br/>        <strong class="nn iu">}<br/><br/>        </strong>tvBack.<em class="nv">setOnClickListener </em><strong class="nn iu">{<br/>            val </strong>text = tvExpression.<em class="nv">text</em>.toString()<br/>            <strong class="nn iu">if</strong>(text.isNotEmpty()) {<br/>                tvExpression.<em class="nv">text </em>= text.drop(1)<br/>            }<br/><br/>            tvResult.text = <strong class="nn iu">""<br/>        </strong>}<strong class="nn iu"><br/>    </strong>}<br/><br/>    <em class="nv">/*Function to calculate the expressions using expression builder library*/<br/><br/>    </em><strong class="nn iu">fun </strong>evaluateExpression(string: String, clear: Boolean) {<br/>        <strong class="nn iu">if</strong>(clear) {<br/>            Result.text = <strong class="nn iu">""<br/>            </strong>Expression.append(string)<br/>        } <strong class="nn iu">else </strong>{<br/>            Expression.append(Result.text)<br/>            Expression.append(string)<br/>            Result.text = <strong class="nn iu">""<br/>        </strong>}<br/>    }<br/>}</span></pre></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><h2 id="6078" class="lf lg it bd lh li lj dn lk ll lm dp ln kb lo lp lq kf lr ls lt kj lu lv lw lx bi translated">步骤7:使用模拟器运行应用程序</h2><p id="e6cc" class="pw-post-body-paragraph jq jr it js b jt ly jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj mc kl km kn im bi translated">这是最后一步，现在你已经写好了所有的Kotlin代码，现在让我们测试结果。为此，我们可以使用androids内置仿真器。点击右上角看起来像播放按钮的绿色按钮，或者按下<strong class="js iu"> Shift + F10。</strong>如果你不知道如何配置和使用android内置模拟器。请查看下面的视频:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="oh oi l"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">演职员表:<a class="ae le" href="https://www.youtube.com/watch?v=LgRRmgfrFQM&amp;t=390s" rel="noopener ugc nofollow" target="_blank">弗拉德·沃延科</a></figcaption></figure><p id="d86f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">或者，如果您在使用模拟器时遇到问题，或者您的笔记本电脑过热。别担心，总有第二种选择。使用<a class="ae le" href="https://www.genymotion.com/" rel="noopener ugc nofollow" target="_blank"> Genymotion </a>作为外部仿真器。您可以在下面观看如何设置Genymotion的视频:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="oh oi l"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">演职员表:<a class="ae le" href="https://www.youtube.com/channel/UCe1jGdp0cGKVOPHUiuNDwBA" rel="noopener ugc nofollow" target="_blank"> Apk天堂</a></figcaption></figure><p id="15e0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">现在所有的设置都完成了，当你运行模拟器时，你会得到一个漂亮的简单的计算器，如果没有，那么仔细检查你的代码。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/03bcc464ef32d9703553936322db586a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1342/format:webp/1*PA_i1jV3ji9_odcK9JT30Q.png"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">简单计算器</figcaption></figure><h2 id="fbac" class="lf lg it bd lh li lj dn lk ll lm dp ln kb lo lp lq kf lr ls lt kj lu lv lw lx bi translated">用户交互</h2><p id="b06e" class="pw-post-body-paragraph jq jr it js b jt ly jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj mc kl km kn im bi translated">这个android应用程序需要用户交互才能运行。用户通过执行按下计算器键盘上的按钮的基本任务来与应用程序交互。通过输入数字，用户可以完成基本的数学运算，如加、减、乘、除。使用这个计算器是微不足道的；用户只需要使用键盘将输入输入到计算器中，然后通过点击四个操作按钮(+、-、*、/)中的一个来指定他们想要执行什么操作。这个计算器可以识别正数和负数。此外，它还识别操作的顺序；规则的集合，这些规则显示首先执行哪些运算来计算表达式。通常规则被表示为PEMDAS，其中P-括号，E-指数，M-乘法，D-除法，A-加法和S-减法。例如，如果用户输入2+9*5，则计算器会提示结果为47，而不是55。此计算器不支持括号和指数，因此在这种情况下，根据PEMDAS的运算顺序是“*”，即9*5后跟“+”，即45+2，结果是47。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ok"><img src="../Images/986f08dee56bad6e39a87c8beaa417f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Fs8u2qVNJ_nTJdMwvsNGbg.png"/></div></div></figure><p id="7322" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">上表1显示了基本计算器的按钮和功能。这些操作类似于如今大家都知道的基本计算器。例如，该计算器在屏幕上最多可显示18个字符(1/3 = 0.3333333333333)。这款计算器拥有良好的用户体验和设计，看起来和感觉上有点像我们经常在android手机上使用的高级计算器。事实上，我打算基于我目前的android智能手机来设计它。</p></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><h2 id="df87" class="lf lg it bd lh li lj dn lk ll lm dp ln kb lo lp lq kf lr ls lt kj lu lv lw lx bi translated">已知问题和限制</h2><p id="a3e4" class="pw-post-body-paragraph jq jr it js b jt ly jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj mc kl km kn im bi translated">通过使用这个计算器，我们不能使用键盘快捷键来输入。我们只能使用计算器本身提供的按钮来输入数据。这不是一个需要担心的大问题，因为这是一个android应用程序。每个人都在他们的智能手机上运行这个应用程序，你不需要键盘来输入数字。</p><p id="c87b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">此外，如果有人试图除以0，这个计算器不会提供任何错误信息。如果有人同时输入两个操作，那么计算器不会显示任何错误消息。例如，通过输入表达式5**+9，计算器不会冻结或崩溃，而是等待用户更改运算，使其成为有效的数学表达式。</p><p id="2e7d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">除了这两个限制之外，该应用程序满足上面描述部分列出的所有标准。我使用文本视图布局作为按钮，因为我发现这是一种简单的组织按钮的方式。当我手动将按钮放置在另一个按钮旁边时，我遇到了一些问题。每次当我使用模拟器执行应用程序时，即使我限制了布局，按钮还是分散在整个屏幕上。在文本视图布局的帮助下，我可以解决这个问题。</p></div><div class="ab cl mr ms hx mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="im in io ip iq"><p id="cc9c" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">因此，我们有意无意地在Android Studio上使用Kotlin构建了一个漂亮的简单计算器。这只是一个简单的计算器，我们可以添加更多的功能，也建立一个科学的。但是这对于获得Kotlin和Android Studio编码实践的良好开端来说已经足够了。我建议你们键入代码，而不是复制粘贴，有时当你复制粘贴时，你最终会因为包不匹配而出错。每个人在android studio中都有不同的包，所以输入并学习吧。如果你们对本教程有任何疑问，请在下面发表回复或评论。我会很快回复。再见，再见。</p></div></div>    
</body>
</html>