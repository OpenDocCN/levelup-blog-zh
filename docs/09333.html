<html>
<head>
<title>Two SQL Queries to find rows present in one table but not another.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">两个SQL查询来查找在一个表中存在而在另一个表中不存在的行。</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/two-sql-queries-to-find-rows-present-in-one-table-but-not-another-5db9692f5685?source=collection_archive---------3-----------------------#2021-07-28">https://levelup.gitconnected.com/two-sql-queries-to-find-rows-present-in-one-table-but-not-another-5db9692f5685?source=collection_archive---------3-----------------------#2021-07-28</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><p id="800f" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">有时在查询SQL表时，您希望找到缺失的行，而不是存在的行。在这篇文章中，我将演示两个查询，您可以使用它们来确定在一个表中出现但在另一个表中丢失的行…</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/d0b25e9fd77d91bf59f216aad0fbd185.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*zR7OOtNMTC74oIvS.jpg"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated"><a class="ae le" href="https://pixabay.com/images/id-2527458/" rel="noopener ugc nofollow" target="_blank">链接到摄影者</a>。</figcaption></figure><p id="4dc0" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">自我推销:</p><p id="a0d4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">如果你喜欢这里写的内容，尽一切办法，把这个博客和你最喜欢的帖子分享给其他可能从中受益或喜欢它的人。既然咖啡是我最喜欢的饮料，如果你愿意，你甚至可以给我买一杯！</p></div><div class="ab cl lf lg hx lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="im in io ip iq"><p id="a02e" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><strong class="js iu">注意</strong>:对于本文中的示例查询，我使用的是Oracle数据库。您的特定SQL实现可能与我使用的查询类似或完全不同。</p><p id="a389" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我有两个简单的表，每个表都有一个数据类型为<code class="fe lm ln lo lp b">CHAR</code>的列，我将它们用于示例数据:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="lq lr l"/></div></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi ls"><img src="../Images/badffe8a5ec7eee804c377c0de3dc1c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:248/0*IWW93D_qy3MpKXzW"/></div></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi lt"><img src="../Images/06676eb694a804f81968b539f9dec9fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:2/0*7COfJSJpDC_IlL3A.gif"/></div></figure><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="lq lr l"/></div></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi lu"><img src="../Images/9a5c4f7d18844b3a9eccba9c13e9eb78.png" data-original-src="https://miro.medium.com/v2/resize:fit:292/0*_Arii5RbSEFzg04d"/></div></div></figure><p id="e73d" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">期望的结果是编写一个返回“L”和“O”的查询，因为这些行不在<strong class="js iu"> TAB2 </strong>表中。</p><h2 id="e64f" class="lv lw it bd lx ly lz dn ma mb mc dp md kb me mf mg kf mh mi mj kj mk ml mm mn bi translated">查找缺失行的查询1:减去集合运算符</h2><p id="672c" class="pw-post-body-paragraph jq jr it js b jt mo jv jw jx mp jz ka kb mq kd ke kf mr kh ki kj ms kl km kn im bi translated"><code class="fe lm ln lo lp b">MINUS</code>是甲骨文中相当于<code class="fe lm ln lo lp b">EXCEPT</code> <strong class="js iu"> </strong>的集合运算符。<code class="fe lm ln lo lp b">MINUS</code>只返回那些出现在第一个<code class="fe lm ln lo lp b">SELECT</code>语句中，而在第二个<code class="fe lm ln lo lp b">SELECT</code>语句中找不到的行，同时从结果集中删除重复的行。</p><p id="b108" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我们可以使用<code class="fe lm ln lo lp b">MINUS</code>并轻松找出哪些行在表<strong class="js iu"> TAB1 </strong>中，哪些行不在表<strong class="js iu"> TAB2 </strong>中。第一个<code class="fe lm ln lo lp b">SELECT</code>应该来自<strong class="js iu">表1 </strong>，因为这是查询<code class="fe lm ln lo lp b">MINUS</code>防止任何行在第二个<code class="fe lm ln lo lp b">SELECT</code>中找不到。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="lq lr l"/></div></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/8ddec499c20365401c2c276a40fe2283.png" data-original-src="https://miro.medium.com/v2/resize:fit:264/0*LxwcDCe_BVgjqhtB"/></div></figure><p id="f3c9" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">(<strong class="js iu"> <em class="mu"> Pro提示</em> </strong>:记住使用集合操作符，比如<code class="fe lm ln lo lp b">MINUS</code>，对于涉及的<code class="fe lm ln lo lp b">SELECT</code>语句，列数和数据类型应该匹配。)</p><p id="bc41" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">返回的行具有表<strong class="js iu"> TAB2 </strong>中没有的<strong class="js iu"> COL1 </strong>值“L”和“O”。</p></div><div class="ab cl lf lg hx lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="im in io ip iq"><p id="fad3" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">我坚持每周写一封关于我正在学习并感兴趣的SQL/PHP的邮件。如果这听起来像是你想参与的事情，请使用此<a class="ae le" href="https://digitalowlsprose.ck.page/1b35a06295" rel="noopener ugc nofollow" target="_blank">注册</a>(异地链接)表格进行订阅。谢谢大家！</p></div><div class="ab cl lf lg hx lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="im in io ip iq"><h2 id="10c0" class="lv lw it bd lx ly lz dn ma mb mc dp md kb me mf mg kf mh mi mj kj mk ml mm mn bi translated">查找缺失行的查询2:左连接，空值过滤</h2><p id="1457" class="pw-post-body-paragraph jq jr it js b jt mo jv jw jx mp jz ka kb mq kd ke kf mr kh ki kj ms kl km kn im bi translated">A <code class="fe lm ln lo lp b">LEFT OUTER JOIN</code>返回左<em class="mu">表中的所有行和右</em>表中的任何匹配行。在<em class="mu">右</em>表中没有匹配的地方，一个<code class="fe lm ln lo lp b">LEFT OUTER JOIN</code>返回<code class="fe lm ln lo lp b">NULL</code>。让我们访问一个示例查询以获得全面理解:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="lq lr l"/></div></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi mv"><img src="../Images/ad166a7ccaf1781eba1e134d8bbb6f84.png" data-original-src="https://miro.medium.com/v2/resize:fit:402/0*z4oZaj7tXOxMmaDy"/></div></div></figure><p id="a3a2" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">由于<strong class="js iu"> TAB1 </strong>行的‘L’和‘O’在<strong class="js iu"> TAB2 </strong>中不匹配，<code class="fe lm ln lo lp b">NULL</code>返回到<code class="fe lm ln lo lp b">JOIN</code>的<strong class="js iu"> TAB2 </strong>侧<em class="mu">侧</em>。有了这些知识，我们可以过滤结果集的<em class="mu">侧</em>，只保留那些<strong class="js iu">tab 2</strong>col<strong class="js iu">col 1</strong>值为<code class="fe lm ln lo lp b">NULL</code>的行。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="lq lr l"/></div></figure><p id="d788" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">(<strong class="js iu"> <em class="mu">亲提示</em> </strong>:记住，<code class="fe lm ln lo lp b">NULL</code>不等同于任何东西。甚至不是另一个<code class="fe lm ln lo lp b">NULL</code>。因此，当通过<code class="fe lm ln lo lp b">NULL</code>过滤时，相等测试不起作用，将返回一个空集。过滤<code class="fe lm ln lo lp b">NULL</code>时必须使用<code class="fe lm ln lo lp b">IS NULL</code>。或者反过来，<code class="fe lm ln lo lp b"><strong class="js iu">IS NOT NULL</strong></code>，如果逻辑指示如此。)</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/a21c9cf71fa9ae008e5a7c563983ae95.png" data-original-src="https://miro.medium.com/v2/resize:fit:282/0*gUHfacs5VeXVjLsg"/></div></figure><p id="e61b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">同样，根据需要返回值为“L”和“O”的行。</p><h2 id="04b7" class="lv lw it bd lx ly lz dn ma mb mc dp md kb me mf mg kf mh mi mj kj mk ml mm mn bi translated">查找缺失行的查询:读者建议</h2><p id="722b" class="pw-post-body-paragraph jq jr it js b jt mo jv jw jx mp jz ka kb mq kd ke kf mr kh ki kj ms kl km kn im bi translated">现在轮到你了。您会使用哪些其他查询来实现这些结果？请在下面的评论区告诉我关于他们的一切。</p><p id="1a30" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">一如既往，如果你有任何问题或看到代码中的任何错误，请通过评论让我知道。建设性的意见有助于我提供准确的博客帖子，我非常感激。</p><p id="4fee" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">进一步阅读</p><ul class=""><li id="230f" class="mx my it js b jt ju jx jy kb mz kf na kj nb kn nc nd ne nf bi translated"><a class="ae le" href="https://joshuaotwell.com/how-to-use-the-nvl-and-nvl2-functions-in-oracle-sql/" rel="noopener ugc nofollow" target="_blank">如何使用Oracle SQL中的NVL和NVL2函数</a>(非现场链接)</li><li id="902b" class="mx my it js b jt ng jx nh kb ni kf nj kj nk kn nc nd ne nf bi translated"><a class="ae le" href="https://joshuaotwell.com/how-order-by-is-restricted-in-group-by-queries/" rel="noopener ugc nofollow" target="_blank">ORDER BY如何在GROUP BY查询中受到限制</a>(非现场链接)</li><li id="44f9" class="mx my it js b jt ng jx nh kb ni kf nj kj nk kn nc nd ne nf bi translated"><a class="ae le" href="https://joshuaotwell.com/how-to-insert-data-using-oracle-sql-developer/" rel="noopener ugc nofollow" target="_blank">如何使用Oracle SQL Developer插入数据</a>(非现场链接)</li></ul><p id="2499" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">喜欢你读过的？看到什么不正确的吗？请在下面评论，感谢阅读！！！</p><h1 id="e0a8" class="nl lw it bd lx nm nn no ma np nq nr md ns nt nu mg nv nw nx mj ny nz oa mm ob bi translated">行动的号召！</h1><p id="90a2" class="pw-post-body-paragraph jq jr it js b jt mo jv jw jx mp jz ka kb mq kd ke kf mr kh ki kj ms kl km kn im bi translated">感谢你花时间阅读这篇文章。我真心希望你发现了一些有趣和有启发性的东西。请在这里与你认识的其他人分享你的发现，他们也会从中获得同样的价值。</p><p id="01ff" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">访问<a class="ae le" href="https://wp.me/P28ctb-3KD" rel="noopener ugc nofollow" target="_blank"> Portfolio-Projects页面</a>查看我为客户完成的博客帖子/技术写作。</p><p id="4502" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><a class="ae le" href="https://ko-fi.com/joshlovescoffee" rel="noopener ugc nofollow" target="_blank"> <strong class="js iu">给我买杯咖啡！</strong> </a></p><p id="d7f4" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">要在最新的博客文章发表时收到来自本博客(“数字猫头鹰散文”)的电子邮件通知(绝不是垃圾邮件)，请点击“点击订阅！”按钮在首页的侧边栏！(如有任何问题，请随时查看<a class="ae le" href="https://wp.me/P28ctb-3gI" rel="noopener ugc nofollow" target="_blank"> Digital Owl的散文隐私政策页面</a>:电子邮件更新、选择加入、选择退出、联系表格等……)</p><p id="3b1b" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">请务必访问<a class="ae le" href="https://joshuaotwell.com/where-blog_post-in-digital-owls-prose-best-of/" rel="noopener ugc nofollow" target="_blank">“最佳”</a>页面，收集我的最佳博客文章。</p></div><div class="ab cl lf lg hx lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="im in io ip iq"><p id="c453" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><a class="ae le" href="https://joshuaotwell.com/about/" rel="noopener ugc nofollow" target="_blank"> Josh Otwell </a>作为一名SQL开发人员和博客作者，他热衷于学习和成长。其他最喜欢的活动是让他埋头于一本好书、一篇文章或Linux命令行。其中，他喜欢桌面RPG游戏，阅读奇幻小说，并与妻子和两个女儿共度时光。</p><p id="1677" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated">免责声明:本文中的例子是关于如何实现类似结果的假设。它们不是最好的解决方案。所提供的大多数(如果不是全部)示例都是在个人发展/学习工作站环境中执行的，不应被视为生产质量或就绪。您的特定目标和需求可能会有所不同。使用那些最有利于你的需求和目标的实践。观点是我自己的。</p><p id="cbe1" class="pw-post-body-paragraph jq jr it js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn im bi translated"><em class="mu">原载于2021年7月28日https://joshuaotwell.com</em><a class="ae le" href="https://joshuaotwell.com/two-sql-queries-to-find-rows-present-in-one-table-but-not-another/" rel="noopener ugc nofollow" target="_blank"><em class="mu"/></a><em class="mu">。</em></p></div></div>    
</body>
</html>