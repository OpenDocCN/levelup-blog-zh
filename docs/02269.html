<html>
<head>
<title>Organize Code with Python Functions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Python函数组织代码</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/organize-code-with-python-functions-dca315485126?source=collection_archive---------5-----------------------#2020-03-02">https://levelup.gitconnected.com/organize-code-with-python-functions-dca315485126?source=collection_archive---------5-----------------------#2020-03-02</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/90eb61f77508c43d628e674832a85e5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*EOCx2ZC5F59BVrqE"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">杰夫·谢尔登在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="0c45" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Python是一种方便的语言，通常用于脚本编写、数据科学和web开发。</p><p id="cfab" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在本文中，我们将了解如何定义和使用Python函数。</p><h1 id="e611" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">功能</h1><p id="cec4" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">函数是我们可以在不同地方重复调用的一段代码。</p><p id="5097" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">用关键字<code class="fe mh mi mj mk b">def</code>定义如下:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="e3c3" class="mt lf it mk b gy mu mv l mw mx">def greet(name):<br/>  print('Hello', name)</span></pre><p id="4a1d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">上面的<code class="fe mh mi mj mk b">greet</code>函数有一个参数。我们可以传入一个参数，在调用时设置参数的值。</p><p id="3ed9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">函数总是以<code class="fe mh mi mj mk b">def</code>关键字开始，然后是函数名，然后是括号，里面有零个或多个参数。然后第一行以冒号结尾。</p><p id="c529" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">函数的代码缩进在函数块中。</p><p id="23dd" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以如下调用<code class="fe mh mi mj mk b">greet</code>:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="6414" class="mt lf it mk b gy mu mv l mw mx">greet('Joe')</span></pre><p id="588f" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们看到:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="70af" class="mt lf it mk b gy mu mv l mw mx">Hello Joe</span></pre><p id="12f7" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">显示在屏幕上，因为我们把<code class="fe mh mi mj mk b">'Joe'</code>作为<code class="fe mh mi mj mk b">greet</code>函数调用的参数。</p><p id="0b6c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">函数可以调用其他函数。例如，我们可以编写以下代码，让我们的<code class="fe mh mi mj mk b">greet</code>函数调用另一个函数:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="8411" class="mt lf it mk b gy mu mv l mw mx">def greet(first_name, last_name):<br/>  print('Hello', full_name(first_name, last_name))</span><span id="71c9" class="mt lf it mk b gy my mv l mw mx">def full_name(first_name, last_name):<br/>  return '%s %s' % (first_name, last_name)</span><span id="c4fa" class="mt lf it mk b gy my mv l mw mx">greet('Jane', 'Smith')</span></pre><p id="9dcf" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在上面的代码中，我们的<code class="fe mh mi mj mk b">greet</code>函数调用了<code class="fe mh mi mj mk b">full_name</code>函数，该函数返回由<code class="fe mh mi mj mk b">first_name</code>和<code class="fe mh mi mj mk b">last_name</code>组合而成的全名。</p><p id="ce27" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在<code class="fe mh mi mj mk b">full_name</code>函数中，我们使用<code class="fe mh mi mj mk b">return</code>关键字返回将<code class="fe mh mi mj mk b">first_name</code>和<code class="fe mh mi mj mk b">last_name</code>参数组合成一个字符串的计算结果。</p><p id="7ed4" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">每当我们使用<code class="fe mh mi mj mk b">return</code>关键字时，该函数就会结束。它下面什么都不会跑。</p><p id="65fb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因此，我们可以如下使用它，通过使用多个<code class="fe mh mi mj mk b">return</code>语句返回我们想要有条件返回的值，如下所示:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="a41d" class="mt lf it mk b gy mu mv l mw mx">import random</span><span id="0ffd" class="mt lf it mk b gy my mv l mw mx">def crystal_ball(num):<br/>  if num == 1:<br/>    return 'It is a great day'<br/>  elif num == 2:<br/>    return 'It is a lucky day'<br/>  elif num == 3:<br/>    return 'It is an auspicious day'</span><span id="2349" class="mt lf it mk b gy my mv l mw mx">r = random.randint(1, 4)<br/>fortune = crystal_ball(r)<br/>print(fortune)</span></pre><p id="0eb3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在上面的代码中，每当<code class="fe mh mi mj mk b">num</code>的值为1、2或3时，我们都有<code class="fe mh mi mj mk b">if</code>语句返回一些东西。</p><p id="e237" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果<code class="fe mh mi mj mk b">num</code>为1，那么<code class="fe mh mi mj mk b">crystal_ball</code>返回<code class="fe mh mi mj mk b">'It is a great day'</code>。</p><p id="bed0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果<code class="fe mh mi mj mk b">num</code>为2，则<code class="fe mh mi mj mk b">crystal_ball</code>返回<code class="fe mh mi mj mk b">'It is a lucky day'</code>。</p><p id="227c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果<code class="fe mh mi mj mk b">num</code>是3，那么<code class="fe mh mi mj mk b">crystal_ball</code>返回<code class="fe mh mi mj mk b">‘It is an auspicious day’</code>。</p><p id="3e10" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">一旦有东西返回，<code class="fe mh mi mj mk b">crystal_ball</code>函数就停止运行。</p><p id="e980" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后，我们可以将返回值赋给另一个变量进行存储，就像我们写的那样:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="51ea" class="mt lf it mk b gy mu mv l mw mx">fortune = crystal_ball(r)</span></pre><p id="40eb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们打印出<code class="fe mh mi mj mk b">fortune</code>的值。</p><h1 id="0fa7" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">无值</h1><p id="ea04" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">在Python中，我们用值<code class="fe mh mi mj mk b">None</code>来表示没有值。<code class="fe mh mi mj mk b">None</code>有类型<code class="fe mh mi mj mk b">NoneType</code>。</p><p id="9e4d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><code class="fe mh mi mj mk b">None</code>有资本<code class="fe mh mi mj mk b">N</code>。</p><p id="3619" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们可以用它作为一个不应该有值的东西的返回值。</p><p id="d523" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，<code class="fe mh mi mj mk b">print</code>返回<code class="fe mh mi mj mk b">None</code>,因为没有任何东西可以返回。它只是在屏幕上打印一个值。</p><p id="abfe" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">如果我们写:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="d98f" class="mt lf it mk b gy mu mv l mw mx">foo = print('Hello!')<br/>print(None == foo)</span></pre><p id="c527" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在上面的代码中，我们应该看到:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="7c28" class="mt lf it mk b gy mu mv l mw mx">Hello!<br/>True</span></pre><p id="ae3d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因为<code class="fe mh mi mj mk b">print</code>返回<code class="fe mh mi mj mk b">None</code>，所以分配给<code class="fe mh mi mj mk b">foo</code>的值将是<code class="fe mh mi mj mk b">None</code>。</p><p id="2d62" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">因此，<code class="fe mh mi mj mk b">None == foo</code>返回<code class="fe mh mi mj mk b">True</code>。</p><h1 id="0575" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">关键字参数</h1><p id="df8e" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">Python函数可以有命名参数。这样，当我们传递参数时，我们就知道参数设置了什么值。</p><p id="48b5" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，我们可以按如下方式传入命名参数:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="5ccc" class="mt lf it mk b gy mu mv l mw mx">def full_name(first_name, last_name):<br/>  return '%s %s' % (first_name, last_name)</span><span id="9fbc" class="mt lf it mk b gy my mv l mw mx">print(full_name(first_name='Jane', last_name='Smith'))</span></pre><p id="074e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在代码中，我们通过编写来调用<code class="fe mh mi mj mk b">full_name</code>:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="ebe1" class="mt lf it mk b gy mu mv l mw mx">full_name(first_name='Jane', last_name='Smith')</span></pre><p id="97ba" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">现在我们知道我们正在传递<code class="fe mh mi mj mk b">'Jane'</code>作为<code class="fe mh mi mj mk b">first_name</code>参数的值，传递<code class="fe mh mi mj mk b">'Smith'</code>作为<code class="fe mh mi mj mk b">last_name</code>参数的值。</p><figure class="ml mm mn mo gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi mz"><img src="../Images/f2b7c71c6f27ac7da756d7335ab5a734.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8n6lby5K1H8wdPlV"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">安妮·斯普拉特在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><h1 id="a07d" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">调用堆栈</h1><p id="c833" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">调用栈是一种数据结构，它告诉我们按照调用的顺序调用了什么函数。</p><p id="0b6b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">最早调用的函数在栈底，后面调用的在栈顶。</p><p id="bb8d" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，在我们前面的例子中:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="35e7" class="mt lf it mk b gy mu mv l mw mx">def greet(first_name, last_name):<br/>  print('Hello', full_name(first_name, last_name))</span><span id="acfa" class="mt lf it mk b gy my mv l mw mx">def full_name(first_name, last_name):<br/>  return '%s %s' % (first_name, last_name)</span><span id="b93b" class="mt lf it mk b gy my mv l mw mx">greet('Jane', 'Smith')</span></pre><p id="b57b" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们的调用堆栈将在底部有<code class="fe mh mi mj mk b">greet</code>函数，在顶部有<code class="fe mh mi mj mk b">full_name</code>函数。</p><h1 id="063e" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">本地和全球范围</h1><p id="1a07" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">函数内部的变量有一个局部范围。它只在函数和嵌套函数中可用。</p><p id="33ee" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">它们不能在函数之外被引用。</p><p id="0f33" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">Python文件顶层的任何东西都有全局范围。</p><p id="9953" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">具有全局作用域的变量可以在位于较低函数(如块或函数)中的任何地方被访问。</p><p id="9b3c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">例如，如果我们有:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="02b0" class="mt lf it mk b gy mu mv l mw mx">x = 1</span><span id="d0ce" class="mt lf it mk b gy my mv l mw mx">def show_x():<br/>  print(x)</span><span id="7ab4" class="mt lf it mk b gy my mv l mw mx">show_x()</span></pre><p id="b44e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">然后我们可以在<code class="fe mh mi mj mk b">show_x</code>函数中引用<code class="fe mh mi mj mk b">x</code>，因为<code class="fe mh mi mj mk b">x</code>具有全局范围。</p><p id="e783" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">另一方面，如果我们有:</p><pre class="ml mm mn mo gt mp mk mq mr aw ms bi"><span id="dc78" class="mt lf it mk b gy mu mv l mw mx">def show_x():<br/>  x = 1</span><span id="2d95" class="mt lf it mk b gy my mv l mw mx">print(x)</span></pre><p id="7841" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我们会得到一个错误，说<code class="fe mh mi mj mk b">x</code>没有被定义。</p><p id="162c" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">有了作用域，我们就可以缩小可能导致bug的代码范围。我们不必搜索整个程序来解决所有问题。</p><h1 id="8e21" class="le lf it bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">结论</h1><p id="78d2" class="pw-post-body-paragraph kg kh it ki b kj mc kl km kn md kp kq kr me kt ku kv mf kx ky kz mg lb lc ld im bi translated">函数用于将代码组织成可重用的片段。它们带参数，我们通过传入参数来调用它们。</p><p id="d6f3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">他们可以返回带有<code class="fe mh mi mj mk b">return</code>关键字的东西。函数的返回值可以赋给其他变量。</p><p id="dec9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">函数内部的变量有一个局部范围。不能从函数外部访问它们。</p><p id="d273" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">另一方面，顶层的变量具有全局范围，可以在函数内部访问。</p></div></div>    
</body>
</html>