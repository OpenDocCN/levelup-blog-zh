<html>
<head>
<title>Rewriting Firebase RemoteConfig</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">重写Firebase RemoteConfig</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/rewriting-firebase-remoteconfig-b831e86247c8?source=collection_archive---------19-----------------------#2021-02-23">https://levelup.gitconnected.com/rewriting-firebase-remoteconfig-b831e86247c8?source=collection_archive---------19-----------------------#2021-02-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/21ad623255db83937a2533c4ec73c9ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z6LOwQ86SYO6Or0_aEkf-A.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">远程配置如何工作—Giuseppe giacopo</figcaption></figure><p id="2188" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">TLTR；我开发了一个Kotlin库，旨在比Firebase RemoteConfig更加灵活😎</p><p id="d1d5" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">你可以在这里找到它:<a class="ae la" href="https://github.com/GiuseppeGiacoppo/RemoteConfig" rel="noopener ugc nofollow" target="_blank">https://github.com/GiuseppeGiacoppo/RemoteConfig</a></p><p id="edac" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">它适用于任何Kotlin项目，而不仅仅是Android🎉</p></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><p id="6fe6" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">如果你是一名Android开发者，迟早你会面临这个世界上最常见的问题之一:</p><blockquote class="li"><p id="5d41" class="lj lk iq bd ll lm ln lo lp lq lr kz dk translated">如何在不发布新版本的情况下更改生产应用程序中的某些内容？</p></blockquote><p id="71ee" class="pw-post-body-paragraph kc kd iq ke b kf ls kh ki kj lt kl km kn lu kp kq kr lv kt ku kv lw kx ky kz ij bi translated">我指的不是部署新功能或改变整个流程这样的大事，而是有许多常见的问题:</p><ul class=""><li id="f598" class="lx ly iq ke b kf kg kj kk kn lz kr ma kv mb kz mc md me mf bi translated">强制用户升级应用程序。有时候你解决了一个bug，你需要停止一个特定版本的应用</li><li id="7347" class="lx ly iq ke b kf mg kj mh kn mi kr mj kv mk kz mc md me mf bi translated">更改业务逻辑中的某些部分。您想要禁用或启用某些功能，更改API服务的基本url，等等。</li><li id="f99f" class="lx ly iq ke b kf mg kj mh kn mi kr mj kv mk kz mc md me mf bi translated">使用户界面可远程配置。它可以是一个标签、一条信息或你的调色板</li></ul><p id="2f68" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">Firebase有一个非常有用的工具叫做RemoteConfig。一旦您在他们的平台上配置了您的项目并包含了适当的库，它就允许您获取一个键值数据结构并在您的应用程序中使用这些值。</p><blockquote class="li"><p id="f175" class="lj lk iq bd ll lm ln lo lp lq lr kz dk translated">很酷，对吧？是的，但是..</p></blockquote><p id="0558" class="pw-post-body-paragraph kc kd iq ke b kf ls kh ki kj lt kl km kn lu kp kq kr lv kt ku kv lw kx ky kz ij bi translated">但是有一个问题:你被迫使用单一的键值结构😒不可能有像这样复杂的物体:</p><figure class="ml mm mn mo gt jr"><div class="bz fp l di"><div class="mp mq l"/></div></figure><p id="82f2" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">您不能有多个具有不同提取逻辑的配置:</p><figure class="ml mm mn mo gt jr"><div class="bz fp l di"><div class="mp mq l"/></div></figure><p id="7733" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">出于这些原因，我决定重写RemoteConfig🙌</p><figure class="ml mm mn mo gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/19d4591e0a5572f38e9fdcbf308dc55a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q64YwJlgpNCElAF-pZ336g.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">我的远程配置版本——朱塞佩·贾科波</figcaption></figure><p id="154d" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">首先我定义了图书馆应该做什么。对于每个配置(也称为<em class="mr">远程资源</em>):</p><ul class=""><li id="025a" class="lx ly iq ke b kf kg kj kk kn lz kr ma kv mb kz mc md me mf bi translated">让用户设置默认配置</li><li id="724e" class="lx ly iq ke b kf mg kj mh kn mi kr mj kv mk kz mc md me mf bi translated">让用户从远程获取配置</li><li id="51de" class="lx ly iq ke b kf mg kj mh kn mi kr mj kv mk kz mc md me mf bi translated">让用户手动激活配置</li></ul><p id="58b5" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">最后一点可能看起来是一个限制，但相反，它是一个好东西。它将允许用户立即激活上次获取的配置，然后在后台获取新的配置，这些配置不会影响正在运行的应用程序，直到您手动激活它们</p><p id="2e0e" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">另一个重要步骤是定义:</p><ul class=""><li id="1602" class="lx ly iq ke b kf kg kj kk kn lz kr ma kv mb kz mc md me mf bi translated">可以匹配配置结构的类</li><li id="588c" class="lx ly iq ke b kf mg kj mh kn mi kr mj kv mk kz mc md me mf bi translated">远程配置所在的位置(也称为<em class="mr">资源远程存储库</em></li><li id="87a9" class="lx ly iq ke b kf mg kj mh kn mi kr mj kv mk kz mc md me mf bi translated">在那里可以保存下载的配置<em class="mr"> (ResourceLocalRepository </em>)</li></ul><p id="7dbc" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">由于这些原因，与FirebaseRemoteConfig相比，library需要以更广泛的方式进行初始化，但Kotlin允许以一种非常干净的方式来完成:</p><figure class="ml mm mn mo gt jr"><div class="bz fp l di"><div class="mp mq l"/></div></figure><p id="3511" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">只有几行代码:</p><ul class=""><li id="a2fa" class="lx ly iq ke b kf kg kj kk kn lz kr ma kv mb kz mc md me mf bi translated">MessagesConfig类的RemoteResource已在RemoteConfig库中注册。它定义了配置的存储位置和获取位置</li><li id="27c7" class="lx ly iq ke b kf mg kj mh kn mi kr mj kv mk kz mc md me mf bi translated">MessagesConfig实例可以很容易地注入到您的应用程序中(KTX是游戏规则的改变者)</li></ul><blockquote class="li"><p id="83aa" class="lj lk iq bd ll lm ms mt mu mv mw kz dk translated">就是这样！</p></blockquote><p id="f3da" class="pw-post-body-paragraph kc kd iq ke b kf ls kh ki kj lt kl km kn lu kp kq kr lv kt ku kv lw kx ky kz ij bi translated">你可以在自述文件中找到其他很酷的特性。您可以拥有多个匹配同一类的配置，您甚至可以扩展您自己的远程存储库，并以YAML、原始文件或任何其他格式提供您的配置！</p><p id="9c29" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">请随意尝试，并在评论中告诉我你对它的看法！</p><p id="03ce" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">该库是开源的，可以在Github上通过以下链接获得:<a class="ae la" href="https://github.com/GiuseppeGiacoppo/RemoteConfig" rel="noopener ugc nofollow" target="_blank">https://github.com/GiuseppeGiacoppo/RemoteConfig</a></p><p id="3e98" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">如果你来到这里，我要告诉你一个秘密:我正在开发一个Android扩展，所以你可以按照Android的指导方针存储配置文件(Java文件API在这个环境中不是最好的)👌</p></div></div>    
</body>
</html>