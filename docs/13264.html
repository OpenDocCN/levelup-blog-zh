<html>
<head>
<title>What is a Multi-Cluster Virtual Warehouse in the Snowflake Data Platform</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">什么是雪花数据平台中的多集群虚拟仓库</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/what-is-a-multi-cluster-virtual-warehouse-in-the-snowflake-data-platform-4fd944f5184d?source=collection_archive---------9-----------------------#2022-08-21">https://levelup.gitconnected.com/what-is-a-multi-cluster-virtual-warehouse-in-the-snowflake-data-platform-4fd944f5184d?source=collection_archive---------9-----------------------#2022-08-21</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="2646" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">雪花中的多集群虚拟仓库自动扩展计算资源，以应对数据仓库不断变化的需求。以下是它们的工作原理，以及与使用更大的虚拟仓库相比，它们如何为您节省资金。</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/0919cc5499e0ffb278ca59d16b75c25a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PH5zhVleUgCLKHoAbbAfKw.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated"><a class="ae ky" href="https://unsplash.com/@possessedphotography?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">附身摄影</a>在<a class="ae ky" href="https://unsplash.com/s/photos/clusters-servers?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</figcaption></figure><h1 id="7155" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">雪花账户什么时候需要多个虚拟仓库？</h1><p id="1963" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">假设您的公司有一个数据分析师，他处理所有的事情，并且每天都在运行复杂的数据库查询。他或她可能愿意等待几分钟，但不是几个小时，因此他们增加单个虚拟仓库的大小，直到查询处理速度正确为止。在这种情况下，单个雪花仓库非常有用。</p><p id="3230" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">另一方面，构建产品内分析将是何时需要考虑并发性的一个很好的例子。如果您向客户提供产品内分析或见解，那么您的客户可能会同时请求几十个独特的数据查询。您不希望任何单个客户的结果因为队列中的其他请求而变慢。</p><p id="fb94" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">首选的方法是<a class="ae ky" href="https://scottdistillery.medium.com/great-scene-this-is-spinal-tap-b22e7f5b2b60" rel="noopener">将刻度盘调到11 </a>，然后选择6倍大的仓库，但是你的预算可能不喜欢这个主意。每小时高达512个信用点(每小时花费约1024美元，每个信用点2美元)，你需要每月支付747，520美元来保持这个庞然大物在线。如果您只是偶尔需要用户并发，而不是24/7，您将会浪费金钱。</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="5b6d" class="kz la it bd lb lc mz le lf lg na li lj jz nb ka ll kc nc kd ln kf nd kg lp lq bi translated">什么是雪花的多集群虚拟仓库？</h1><p id="c563" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">当您处理复杂的并发请求时，您可能想要探索Snowflake的多集群仓库，它提供了全自动的并发伸缩。多集群仓库允许您将更大的处理能力池用于运行查询，并且它们是仅在雪花的企业版本中可用的特性。</p><p id="9f5d" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">标准虚拟仓库只有一个计算资源集群，而多集群仓库最多可以有10个集群。与标准仓库一样，雪花帐户中的多集群仓库数量似乎没有限制，但每个多集群仓库最多只能有10个计算集群。</p><p id="a7b7" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">多集群仓库为您提供了<a class="ae ky" href="https://www.propeldata.com/blog/how-many-virtual-warehouses-can-snowflake-hold" rel="noopener ugc nofollow" target="_blank">多仓库</a>的并发优势，以及雪花根据需要自动启动和关闭正在运行的集群以处理用户并发需求的高峰和低谷的额外优势。换句话说，数据仓库使用的集群数量会根据当前对雪花数据分析的需求自动扩展。但是，您可能需要一些额外的数据工程来将超过1个包含10个计算资源的多集群仓库连接到单个应用程序中。</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="5dd7" class="kz la it bd lb lc mz le lf lg na li lj jz nb ka ll kc nc kd ln kf nd kg lp lq bi translated">多群仓库有哪两种模式？</h1><p id="2617" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">雪花中的多集群虚拟仓库有两种操作模式:</p><ol class=""><li id="cc06" class="ne nf it lt b lu mn lx mo ma ng me nh mi ni mm nj nk nl nm bi translated"><strong class="lt iu">最大化模式</strong> —集群的最小和最大数量相同，因此多集群虚拟仓库始终拥有最大的可用计算资源。</li><li id="2a9a" class="ne nf it lt b lu nn lx no ma np me nq mi nr mm nj nk nl nm bi translated"><strong class="lt iu">自动伸缩模式</strong> —雪花根据数据仓库的需求，在指定的最小值和最大值之间动态管理集群。</li></ol><p id="34b8" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">自动缩放模式显然更好，但也更复杂。例如，您必须指定一个扩展策略，其中“Standard”总是根据需求增加集群的数量，而“Economy”只在有足够的查询负载让新集群忙碌6分钟时才添加集群。正如您可能从名称中猜到的那样，后者节省了资金，但是它可能导致查询仍然排队，即使您使用的是多集群仓库。</p><p id="9975" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">当然，另一种选择也很复杂。要手动设置多个单独的仓库，您需要根据您自己对同时运行多个用户和查询的CPU负载的估计，为每个仓库选择合适的大小。这就是为什么拥有能够根据需要自动增减可用计算量的多集群仓库如此有用，但您的公司将需要注册雪花的企业版。</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><h1 id="801b" class="kz la it bd lb lc mz le lf lg na li lj jz nb ka ll kc nc kd ln kf nd kg lp lq bi translated">何时在雪花中使用多集群仓库的示例</h1><p id="5e1f" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">构建任何有多个用户的数据应用程序，尤其是产品内分析，是您可能需要雪花中多集群虚拟仓库的完美例子。假设一家公司在其拥有1000名客户的产品中构建了一个排行榜指标。起初，他们只是为了改善缓慢的查询和数据加载问题而调整单个仓库的大小，但后来他们看到了账单。作为回应，他们切换到自动扩展模式下的多集群虚拟仓库，并以更低的成本获得了更高的性能。</p><p id="4b17" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">首先，该公司尝试了标准的扩展策略，但是建立大量仓库仍然要花费他们太多的钱。他们的SaaS(软件即服务)产品的客户乐于看到他们的排行榜指标延迟15分钟，因此该公司能够有效地排队来自他们的无服务器功能的请求。经过几次实验后，他们能够在自动扩展模式下使用单个多集群虚拟仓库向排行榜提供新数据，经济扩展策略在1到6个集群之间选择。</p><p id="b064" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated">当然，该公司可能需要雇用整个数据工程师团队来在其数据仓库的基础上构建白标分析应用程序。但是，底线是multi‍-cluster虚拟仓库是雪花企业版的一个基本功能，可以帮助您的数据应用程序处理并发性，同时可能为您的组织节省资金。</p><p id="a2dc" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><strong class="lt iu">编码快乐！</strong> ⛄️❄️🍧🏂⛷</p></div><div class="ab cl ms mt hx mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="im in io ip iq"><p id="618b" class="pw-post-body-paragraph lr ls it lt b lu mn ju lw lx mo jx lz ma mp mc md me mq mg mh mi mr mk ml mm im bi translated"><a class="ae ky" href="https://www.linkedin.com/in/derek-austin/" rel="noopener ugc nofollow" target="_blank">Derek Austin</a>博士是《职业规划<a class="ae ky" href="https://www.amazon.com/dp/B0BRJDLJ43" rel="noopener ugc nofollow" target="_blank"> <em class="ns">:如何在6个月内成为6位数成功程序员</em> </a>的作者，现在亚马逊上有售。</p></div></div>    
</body>
</html>