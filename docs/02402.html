<html>
<head>
<title>Learning Go: For Loops and the Input One, Process One Template</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">学习Go:对于循环和输入，处理一个模板</h1>
<blockquote>原文：<a href="https://levelup.gitconnected.com/learning-go-for-loops-and-the-input-one-process-one-template-de54d1af1571?source=collection_archive---------23-----------------------#2020-03-10">https://levelup.gitconnected.com/learning-go-for-loops-and-the-input-one-process-one-template-de54d1af1571?source=collection_archive---------23-----------------------#2020-03-10</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/bcfb39675228a5627508ca90550eb76e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*oXsTShkSsTuvTgMJ"/></div></div><figcaption class="kb kc gj gh gi kd ke bd b be z dk translated">照片由<a class="ae kf" href="https://unsplash.com/@splashabout?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Nareeta Martin </a>在<a class="ae kf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="9757" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这篇文章中，我将介绍如何在Go中执行迭代(循环)。Go只有一个循环结构，即<code class="fe le lf lg lh b">for</code>循环。本文将只讨论<code class="fe le lf lg lh b">for</code>循环的一个版本——这个版本取代了其他编程语言中的<code class="fe le lf lg lh b">while</code>循环。我还将在一个新的编程模板的上下文中演示循环— <em class="li">输入一个，处理一个</em>。</p><h1 id="38cd" class="lj lk it bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated"><code class="fe le lf lg lh b">for</code>回路</h1><p id="ab54" class="pw-post-body-paragraph kg kh it ki b kj mh kl km kn mi kp kq kr mj kt ku kv mk kx ky kz ml lb lc ld im bi translated">我们编写计算机程序的一个主要原因是重复执行任务(迭代)。当人类连续多次执行一项任务时，他们会感到厌烦，并倾向于开始出错。另一方面，计算机永远不会感到无聊和疲倦，所以我们可以给它们编程，让它们重复同样的任务数百次，而不用担心出错。</p><p id="342a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">编程语言都有执行迭代的构造。大多数编程语言都有三四个迭代结构，但是Go只有一个for循环。Go的for循环被设计成可以处理你想在程序中执行迭代的所有不同方式。</p><p id="3d25" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我将在本文中讨论的for循环版本的语法模板如下所示:</p><p id="41f6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="li"> for条件{ <br/>语句<br/> } </em></p><p id="f134" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">当条件为真时，<code class="fe le lf lg lh b">for</code>循环执行循环体内的语句。如模板所示，循环体中可以有多个语句。</p><p id="6408" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下面是一个打印数字1到10的简单示例(我排除了Go程序的开始部分，除非我需要导入一个包):</p><pre class="mm mn mo mp gt mq lh mr ms aw mt bi"><span id="0429" class="mu lk it lh b gy mv mw l mx my">func main() {<br/>  i := 1<br/>  for i &lt;= 10 {<br/>    fmt.Println(i)<br/>    i++<br/>  }<br/>}</span></pre><p id="ce8e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">请注意，条件没有写在括号内，事实上，如果您使用括号，这是一个错误。您可以将条件放在括号中，但去掉括号是常见的Go编程风格。</p><p id="c4eb" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">但是，即使循环体只包含一条语句，也必须包含循环体的大括号。对于那些允许你去掉大括号的语言来说，这已经成为一种常见的编程习惯，我推荐Go开发团队在所有的<code class="fe le lf lg lh b">for</code>循环中使用大括号。</p><h1 id="6231" class="lj lk it bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">控制具有标记值的循环</h1><p id="f296" class="pw-post-body-paragraph kg kh it ki b kj mh kl km kn mi kp kq kr mj kt ku kv mk kx ky kz ml lb lc ld im bi translated">一种经常使用的回路是<em class="li">哨兵控制的</em>回路。标记是对程序有特殊意义的值。它和<code class="fe le lf lg lh b">for</code>循环一起使用通常是为了表示是时候停止循环了。</p><p id="780e" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下面是一个示例Go程序，它会回显用户的输入，直到用户写下“Stop”:</p><pre class="mm mn mo mp gt mq lh mr ms aw mt bi"><span id="16ad" class="mu lk it lh b gy mv mw l mx my">func main() {<br/>  var sentence string<br/>  fmt.Print("Enter a word (type Stop to stop): ")<br/>  fmt.Scan(&amp;sentence)<br/>  for sentence != "Stop" {<br/>    fmt.Println(sentence)<br/>    fmt.Print("Enter a word (type Stop to stop): ")<br/>    fmt.Scan(&amp;sentence)<br/>  }<br/>}</span></pre><p id="82a1" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这个程序中,“Stop”是一个标记值，当用户进入循环时，它会强制循环停止。</p><h1 id="562f" class="lj lk it bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">输入一个，处理一个模板</h1><p id="9811" class="pw-post-body-paragraph kg kh it ki b kj mh kl km kn mi kp kq kr mj kt ku kv mk kx ky kz ml lb lc ld im bi translated">既然我们已经介绍了使用<code class="fe le lf lg lh b">for</code>循环的基础知识，并了解了如何使用sentinel值控制循环，那么让我们看看如何将它应用到编程模板中。<em class="li"> Input One，Process One </em>模板用于提示用户输入一个值，然后在一个循环中多次使用该值进行操作。下面是模板的伪代码:</p><p id="07d6" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated"><em class="li">重复这些步骤:<br/>从输入<br/>中读取一个值，处理该值</em></p><p id="acbc" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下面是一个应用这个模板解决问题的例子。你是一名教师，你想计算一组考试成绩的平均值。您不确定您需要输入多少分数，所以您决定停止输入-1作为测试分数，因为最低的测试分数是0(尽管我在过去曾受到学生的负面分数威胁)。下面是程序，以及指示模板中步骤的注释:</p><pre class="mm mn mo mp gt mq lh mr ms aw mt bi"><span id="c866" class="mu lk it lh b gy mv mw l mx my">func main() {<br/>  const stopValue = -1<br/>  var grade, total, count int<br/>  fmt.Print("Enter a score (-1 to quit): ")<br/>  // input one<br/>  fmt.Scan(&amp;grade)<br/>  for grade != stopValue {<br/>    count++<br/>    // process one<br/>    total += grade<br/>    fmt.Print("Enter a score (-1 to quit): ")<br/>    fmt.Scan(&amp;grade)<br/>  }<br/>  average := float64(total) / float64(count)<br/>  fmt.Printf("The average grade is %.2f.\n", average)<br/>}</span></pre><p id="d3e9" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">在这个程序中有一些事情需要注意。首先，我使用一个常数来表示sentinel值。这只是好的编程风格，应该在任何编程语言的所有程序中遵循。</p><p id="445a" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">第二件事是为了计算平均值，我必须使用类型转换将<code class="fe le lf lg lh b">total</code>和<code class="fe le lf lg lh b">count </code>变量从<code class="fe le lf lg lh b">int</code>转换为<code class="fe le lf lg lh b">float64</code>。这是因为如果两个操作数都是整数，那么<code class="fe le lf lg lh b">/ </code>运算符将执行整数除法，而Go不允许只转换分子或分母。您必须将两个操作数都转换为浮点，程序才能编译。</p><h1 id="a4ae" class="lj lk it bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">计数控制回路</h1><p id="cf60" class="pw-post-body-paragraph kg kh it ki b kj mh kl km kn mi kp kq kr mj kt ku kv mk kx ky kz ml lb lc ld im bi translated">还有另一个版本的<code class="fe le lf lg lh b"> for</code>循环可以用于计数控制循环，但是如果你愿意，你可以使用我在这里讨论的版本。如果我们将上述问题转化为已经知道我们需要输入多少个测试分数，我们就不必使用哨兵控制的循环，而是可以使用计数控制的循环。</p><p id="0ac8" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">下面是对上述程序的修改，将它改为计数控制回路，而不是哨兵控制回路:</p><pre class="mm mn mo mp gt mq lh mr ms aw mt bi"><span id="ace5" class="mu lk it lh b gy mv mw l mx my">func main() {<br/>  var grade, total int<br/>  count := 0<br/>  const numGrades = 5<br/>  for count &lt; numGrades {<br/>    fmt.Print("Enter a grade: ")<br/>    // input one<br/>    fmt.Scan(&amp;grade)<br/>    // process one<br/>    total += grade<br/>    count++;<br/>  }<br/>  average := float64(total) / float64(count)<br/>  fmt.Printf("The average grade is %.2f.\n", average)<br/>}</span></pre><p id="04d3" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">对于那些懂一些编程的人来说，你可能会奇怪为什么我在这个程序中没有使用常规的For循环。我故意不只是为了证明这种格式的Go for循环可以用于计数控制的循环，尽管这样做并不被认为是好的编程实践。在我的下一篇文章中，我将使用一个常规的for循环来演示下一个编程模板— <em class="li">按指定的次数做某事</em>。</p><h1 id="b24b" class="lj lk it bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">转到for循环</h1><p id="f0d3" class="pw-post-body-paragraph kg kh it ki b kj mh kl km kn mi kp kq kr mj kt ku kv mk kx ky kz ml lb lc ld im bi translated">Go编程语言中我最喜欢的特性之一是该语言中有限的循环结构。当只有一个构造来创建循环时，这使得语言更容易学习和使用。一些程序员可能会觉得这有局限性，但我相信这使得用Go编程比用拥有所有可以想象的特性的语言编程更有趣。</p><p id="15f0" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">我的下一篇文章将展示for循环的更标准版本，以及它如何与<em class="li">Do thing a Specified Number Times</em>模板一起使用。</p><p id="9712" class="pw-post-body-paragraph kg kh it ki b kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld im bi translated">感谢您阅读这篇文章，如果您有任何意见或建议，请发邮件给我。</p></div></div>    
</body>
</html>